From terrasi.carmelo at gmail.com  Wed Sep  1 06:15:55 2010
From: terrasi.carmelo at gmail.com (Carmelo Terrasi)
Date: Wed Sep  1 06:15:58 2010
Subject: [gdal-dev] Extract elevation from (latitude, longitude)
In-Reply-To: <4C7D26FB.3010000@gmail.com>
References: <AANLkTim2r8wCXzsC9Tn2tf-fOx8Mi26cv5yQwb5WJr38@mail.gmail.com>
	<4C7D26FB.3010000@gmail.com>
Message-ID: <AANLkTi=p4_n=i6jLEsKc+gjEKxMEeWncidK5De-x2Bfd@mail.gmail.com>

OK, I got it, it works, thank you so much!!!

2010/8/31 J Luis <jmfluis@gmail.com>

>  Carmelo,
>
> In GMT with GDAL support that is trivial to do using the grdtrack program.
>
> Joaquim Luis
>
>
> Hello everybody,
> first of all my apologies cause I'm a newbie with this stuff...
>
>  I'm trying to build a function able to extract altitude from latitude and
> longitude as parameters.
> Something like that: *double MyElevation(double lat, double lon)*
> *
> *
> I'm using Dted level 0 to get the elevation (I've already read this post:
> http://www.osgeo.org/pipermail/gdal-dev/2010-February/023457.html )
> But I got lost... :(
>
>  *GDALAllRegister();
> *
> *pointerToDataSet=(GDALDataset*) GDALOpen("n30.dt0", GA_ReadOnly);*
> * *
> *double data[6];*
> *double longitude, latitude;*
> *
> *
> *pointerToDataSet->GetGeoTransform(data);*
> *
> *
> *longitude=???;*
> *latitude=???;*
> * *
> *double x = (longitude - pippo[0]) / pippo[1];*
> *double y = (latitude - pippo[3]) / pippo[5];*
> * *
> *GDALRasterBand* pointerToBand;*
> * *
> *pointerToBand=pointerToDataSet->GetRasterBand(1);*
> * *
> *float *elevation;*
> * *
> *pointerToDataSet->RasterIO(?,?, ... , ?);*
>  *pointerToBand->RasterIO(?,?, ... , ?);*
>
>
>  I supposed I had to store elevation data into the buffer I created, I
> mean the float pointer.
> I got confused among these:
> - the file *.dt0
> - longitude and latitude
> - parameters for RasterIO()
>
>  Every tips will be very appreciated, thanks a lot for your patience,
> Regards,
> Carmelo
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100901/1bfcf7ae/attachment.html
From sebastian.ovide at gmail.com  Wed Sep  1 06:33:11 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Wed Sep  1 06:33:33 2010
Subject: [gdal-dev] MapInfo mixed geometry
Message-ID: <AANLkTin5R_fx45-FRqkBXBkahX=O_DKkaKCq3WhEwztC@mail.gmail.com>

Hi All,

I have MapInfo mixed geometry files. As MapServer doesn't support layers
wityh mixed geometry, Is it possible to use gdal for extracting its points,
its polygaons etc... and save them in different files ?

thanks

-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100901/d0847612/attachment.html
From chaitanya.ch at gmail.com  Wed Sep  1 08:37:24 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Sep  1 08:37:27 2010
Subject: [gdal-dev] MapInfo mixed geometry
In-Reply-To: <AANLkTin5R_fx45-FRqkBXBkahX=O_DKkaKCq3WhEwztC@mail.gmail.com>
References: <AANLkTin5R_fx45-FRqkBXBkahX=O_DKkaKCq3WhEwztC@mail.gmail.com>
Message-ID: <AANLkTik1RUwaahs2VuPrqtAZwBV-PFqTEkmQe4k0TCzP@mail.gmail.com>

Sebastian,

You can write a python script to do that. Refer to ogr2ogr.py in
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples for a
sample. Skip features according to their geometry's types using
GetGeometryType().

On Wed, Sep 1, 2010 at 4:03 PM, Sebastian E. Ovide <
sebastian.ovide@gmail.com> wrote:

> Hi All,
>
> I have MapInfo mixed geometry files. As MapServer doesn't support layers
> wityh mixed geometry, Is it possible to use gdal for extracting its points,
> its polygaons etc... and save them in different files ?
>
> thanks
>
> --
> Sebastian E. Ovide
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100901/572753b9/attachment.html
From warmerdam at pobox.com  Wed Sep  1 08:54:10 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep  1 08:54:15 2010
Subject: [gdal-dev] MapInfo mixed geometry
In-Reply-To: <AANLkTin5R_fx45-FRqkBXBkahX=O_DKkaKCq3WhEwztC@mail.gmail.com>
References: <AANLkTin5R_fx45-FRqkBXBkahX=O_DKkaKCq3WhEwztC@mail.gmail.com>
Message-ID: <4C7E4CF2.5090600@pobox.com>

Sebastian E. Ovide wrote:
> Hi All,
> 
> I have MapInfo mixed geometry files. As MapServer doesn't support layers 
> wityh mixed geometry, Is it possible to use gdal for extracting its 
> points, its polygaons etc... and save them in different files ?

Sebastian,

You can do something like:

ogr2ogr your_points.shp mixed.tab -where "ogr_geometry='point'"

ogr2ogr your_lines.shp  mixed.tab -where "ogr_geometry='linestring'"

ogr2ogr your_lines.shp  mixed.tab \
    -where "ogr_geometry='polygon' or ogr_geometry='multipolygon'"

Note that MapServer can draw from a mixed file, but you would need
to define a layer for each type of geometry you want to draw and
there are inefficiencies since the other geometries are discarded
after some expense reading for the layers they don't apply to.  So
splitting things, as above, is best for large files.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sebastian.ovide at gmail.com  Wed Sep  1 12:28:35 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Wed Sep  1 12:28:59 2010
Subject: [gdal-dev] MapInfo mixed geometry
In-Reply-To: <4C7E4CF2.5090600@pobox.com>
References: <AANLkTin5R_fx45-FRqkBXBkahX=O_DKkaKCq3WhEwztC@mail.gmail.com>
	<4C7E4CF2.5090600@pobox.com>
Message-ID: <AANLkTimWk-18m=2WH7R-vEBJfW=-dMD20+TQpiatvRb=@mail.gmail.com>

Thanks !

On Wed, Sep 1, 2010 at 1:54 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Sebastian E. Ovide wrote:
>
>> Hi All,
>>
>> I have MapInfo mixed geometry files. As MapServer doesn't support layers
>> wityh mixed geometry, Is it possible to use gdal for extracting its points,
>> its polygaons etc... and save them in different files ?
>>
>
> Sebastian,
>
> You can do something like:
>
> ogr2ogr your_points.shp mixed.tab -where "ogr_geometry='point'"
>
> ogr2ogr your_lines.shp  mixed.tab -where "ogr_geometry='linestring'"
>
> ogr2ogr your_lines.shp  mixed.tab \
>   -where "ogr_geometry='polygon' or ogr_geometry='multipolygon'"
>
> Note that MapServer can draw from a mixed file, but you would need
> to define a layer for each type of geometry you want to draw and
> there are inefficiencies since the other geometries are discarded
> after some expense reading for the layers they don't apply to.  So
> splitting things, as above, is best for large files.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100901/834d73e7/attachment.html
From sebastian.ovide at gmail.com  Wed Sep  1 12:45:52 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Wed Sep  1 12:46:15 2010
Subject: [gdal-dev] convert multipart polygon to single part polygon
Message-ID: <AANLkTimZe2sEibg=jf50VcDLKghSSPTKYfg+f6P4AfnC@mail.gmail.com>

Hi All,

Is it possible to create a single part polygon from a multipart polygon ?

thanks

-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100901/8e872932/attachment.html
From ari.jolma at gmail.com  Wed Sep  1 13:58:38 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Sep  1 14:01:55 2010
Subject: [gdal-dev] swig generated files for Perl bindings removed from
	repository
In-Reply-To: <4C6D2F8A.7050701@pobox.com>
References: <4C6CDC88.7050902@gmail.com> <4C6D2F8A.7050701@pobox.com>
Message-ID: <4C7E944E.3080102@gmail.com>

On 08/19/2010 04:20 PM, Frank Warmerdam wrote:
> Ari,
>
> I agree, you are welcome to remove the perl bindings from the repository.
> I see that the mkgdaldist.sh script is already regenerating the perl
> (and C#) bindings when release and nightly distributions are prepared.
>
> If it has not already been done, you should try to make the situation
> clear in the documentation.
>

I created a new section for the foreign function interface (aka 
bindings, aka wrappers) to http://trac.osgeo.org/gdal/wiki/BuildHints

I wrote a short page for Perl

If there are hints for Python, C#, Java or other interfaces, they should 
be linked to the BuildHints page as it is the entry page for the build 
documentation.

Regards,

Ari

From conputer at free.fr  Wed Sep  1 18:00:50 2010
From: conputer at free.fr (conpie)
Date: Wed Sep  1 18:00:51 2010
Subject: [gdal-dev] Image registration, gdal?
Message-ID: <1283378450996-5489004.post@n2.nabble.com>


Greeting to all.
First, i'd like to thank all contributors to gdal/ogr.
For my problem:
i am to write an image registration plugin for a software. looking at qgis,
i'd be happy to mimic the georeferencer and wrap the gdalwarp algorithm.
i've been looking a little at the code, but am still asking myself a few
questions.
The principal would be, what performance/reliability should i be waiting
from the algorithm?
to make it clear, a classical problem in image registration is a user has
taken a great number of gcp, more than needed for the transformation. 
Does the gdalwarp has a internal mechanism to deal with that (which implies
minimizing a metric)?
how much gcp a dataset can hold?
has anyone used gdal for image registration  with an approach itk-like
(optimizer, metric, interpolator, transformations)?
or should i switch to otb/itk right away?

thanks for the answers
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Image-registration-gdal-tp5489004p5489004.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From woodbri at swoodbridge.com  Thu Sep  2 00:27:26 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Thu Sep  2 00:29:02 2010
Subject: [gdal-dev] Mixing gdal and shapelib?
Message-ID: <4C7F27AE.7090501@swoodbridge.com>

Hi devs,

I have written a program that uses gdal to access raster images and 
shapelib calls to read and write some shapefiles.

I'm getting some SEGVs and I crashed valgrind! see valgrind gdb runs below.

It also appears the gdal/ogr has a copy of shapelib build into it so I 
have tried loading -lshp -lgdal and -lgdal -lshp, but I'm guess having 
two copies is bad.

I know I could use ogr, but I already had the code written with shapelib 
and I have not used ogr before.

-Steve W

woodbri@mappy:~/dev/elevation$ valgrind ./shpaddelev 
/u/data/routeloops-v2/01/01001/Streets.shp a.shp /u/srcdata/ned2.vrt
==16063== Memcheck, a memory error detector.
==16063== Copyright (C) 2002-2007, and GNU GPL'd, by Julian Seward et al.
==16063== Using LibVEX rev 1854, a library for dynamic binary translation.
==16063== Copyright (C) 2004-2007, and GNU GPL'd, by OpenWorks LLP.
==16063== Using valgrind-3.3.1-Debian, a dynamic binary instrumentation 
framework.
==16063== Copyright (C) 2000-2007, and GNU GPL'd, by Julian Seward et al.
==16063== For more details, rerun with: -v
==16063==
==16063== Invalid read of size 8
==16063==    at 0x4016B4: main (shpaddelev.c:194)
==16063==  Address 0xf0aa9c8 is 8 bytes after a block of size 16 alloc'd
==16063==    at 0x4C203E4: calloc (vg_replace_malloc.c:397)
==16063==    by 0x4E284EC: SHPReadObject (in /usr/lib/libshp.so.1.0.1)
==16063==    by 0x401662: main (shpaddelev.c:186)
==16063==
==16063== Invalid read of size 8
==16063==    at 0x4016F8: main (shpaddelev.c:195)
==16063==  Address 0xf0aaa08 is 8 bytes after a block of size 16 alloc'd
==16063==    at 0x4C203E4: calloc (vg_replace_malloc.c:397)
==16063==    by 0x4E284FF: SHPReadObject (in /usr/lib/libshp.so.1.0.1)
==16063==    by 0x401662: main (shpaddelev.c:186)
==16063==
==16063== Invalid write of size 1
==16063==    at 0x4C23C28: memset (mc_replace_strmem.c:493)
==16063==    by 0x554086D: VRTSourcedRasterBand::IRasterIO(GDALRWFlag, 
int, int, int, int, void*, int, int, GDALDataType, int, int) 
(vrtsourcedrasterband.cpp:155)
==16063==    by 0x401787: main (shpaddelev.c:196)
==16063==  Address 0xf0aaa48 is 8 bytes after a block of size 16 alloc'd
==16063==    at 0x4C203E4: calloc (vg_replace_malloc.c:397)
==16063==    by 0x4E28512: SHPReadObject (in /usr/lib/libshp.so.1.0.1)
==16063==    by 0x401662: main (shpaddelev.c:186)
==16063==
==16063== Invalid write of size 1
==16063==    at 0x4C23C2C: memset (mc_replace_strmem.c:493)
==16063==    by 0x554086D: VRTSourcedRasterBand::IRasterIO(GDALRWFlag, 
int, int, int, int, void*, int, int, GDALDataType, int, int) 
(vrtsourcedrasterband.cpp:155)
==16063==    by 0x401787: main (shpaddelev.c:196)
==16063==  Address 0xf0aaa49 is 9 bytes after a block of size 16 alloc'd
==16063==    at 0x4C203E4: calloc (vg_replace_malloc.c:397)
==16063==    by 0x4E28512: SHPReadObject (in /usr/lib/libshp.so.1.0.1)
==16063==    by 0x401662: main (shpaddelev.c:186)
==16063==
==16063== Invalid write of size 1
==16063==    at 0x4C23C31: memset (mc_replace_strmem.c:493)
==16063==    by 0x554086D: VRTSourcedRasterBand::IRasterIO(GDALRWFlag, 
int, int, int, int, void*, int, int, GDALDataType, int, int) 
(vrtsourcedrasterband.cpp:155)
==16063==    by 0x401787: main (shpaddelev.c:196)
==16063==  Address 0xf0aaa4a is 10 bytes after a block of size 16 alloc'd
==16063==    at 0x4C203E4: calloc (vg_replace_malloc.c:397)
==16063==    by 0x4E28512: SHPReadObject (in /usr/lib/libshp.so.1.0.1)
==16063==    by 0x401662: main (shpaddelev.c:186)
==16063==
==16063== Invalid write of size 1
==16063==    at 0x4C23C36: memset (mc_replace_strmem.c:493)
==16063==    by 0x554086D: VRTSourcedRasterBand::IRasterIO(GDALRWFlag, 
int, int, int, int, void*, int, int, GDALDataType, int, int) 
(vrtsourcedrasterband.cpp:155)
==16063==    by 0x401787: main (shpaddelev.c:196)
==16063==  Address 0xf0aaa4b is 11 bytes after a block of size 16 alloc'd
==16063==    at 0x4C203E4: calloc (vg_replace_malloc.c:397)
==16063==    by 0x4E28512: SHPReadObject (in /usr/lib/libshp.so.1.0.1)
==16063==    by 0x401662: main (shpaddelev.c:186)
--16063-- VALGRIND INTERNAL ERROR: Valgrind received a signal 11 
(SIGSEGV) - exiting
--16063-- si_code=1;  Faulting address: 0x0;  sp: 0x402E87E20

valgrind: the 'impossible' happened:
    Killed by fatal signal
==16063==    at 0x38023DCF: unlinkBlock (m_mallocfree.c:205)
==16063==    by 0x38024434: vgPlain_arena_malloc (m_mallocfree.c:1202)
==16063==    by 0x380029E5: vgMemCheck_new_block (mc_malloc_wrappers.c:195)
==16063==    by 0x38002DE4: vgMemCheck_malloc (mc_malloc_wrappers.c:226)
==16063==    by 0x38038051: vgPlain_scheduler (scheduler.c:1269)
==16063==    by 0x38049450: run_a_thread_NORETURN (syswrap-linux.c:89)

sched status:
   running_tid=1

Thread 1: status = VgTs_Runnable
==16063==    at 0x4C2260E: malloc (vg_replace_malloc.c:207)
==16063==    by 0x4E2922F: SHPWriteObject (in /usr/lib/libshp.so.1.0.1)
==16063==    by 0x4017B6: main (shpaddelev.c:201)


Note: see also the FAQ.txt in the source distribution.
It contains workarounds to several common problems.

If that doesn't help, please report this bug to: www.valgrind.org

In the bug report, send all the above text, the valgrind
version, and what Linux distro you are using.  Thanks.

----------------------------------------------------------------

And running it in gdb:

woodbri@mappy:~/dev/elevation$ gdb ./shpaddelev
GNU gdb 6.8-debian
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later 
<http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu"...
(gdb) run /u/data/routeloops-v2/01/01001/Streets.shp a.shp 
/u/srcdata/ned2.vrt
Starting program: /home/woodbri/dev/elevation/shpaddelev 
/u/data/routeloops-v2/01/01001/Streets.shp a.shp /u/srcdata/ned2.vrt
[Thread debugging using libthread_db enabled]
warning: Lowest section in /usr/lib/libicudata.so.38 is .hash at 
0000000000000120
*** glibc detected *** /home/woodbri/dev/elevation/shpaddelev: free(): 
invalid next size (fast): 0x0000000000615250 ***
[New Thread 0x7fcd0612d710 (LWP 16472)]
======= Backtrace: =========
/lib/libc.so.6[0x7fcd04c949a8]
/lib/libc.so.6(cfree+0x76)[0x7fcd04c96ab6]
/usr/lib/libshp.so.1(SHPDestroyObject+0x33)[0x7fcd05e8b0c3]
/home/woodbri/dev/elevation/shpaddelev[0x4017c3]
/lib/libc.so.6(__libc_start_main+0xe6)[0x7fcd04c3f1a6]
/home/woodbri/dev/elevation/shpaddelev[0x400ff9]
======= Memory map: ========
00400000-00402000 r-xp 00000000 fd:04 671833 
  /home/woodbri/dev/elevation/shpaddelev
00601000-00602000 rw-p 00001000 fd:04 671833 
  /home/woodbri/dev/elevation/shpaddelev
00602000-006a9000 rw-p 00602000 00:00 0 
  [heap]
7fccf4000000-7fccf4021000 rw-p 7fccf4000000 00:00 0
7fccf4021000-7fccf8000000 ---p 7fccf4021000 00:00 0
7fccfbf96000-7fccfbfa5000 r-xp 00000000 fd:02 49241 
  /usr/lib/libtasn1.so.3.0.15
7fccfbfa5000-7fccfc1a5000 ---p 0000f000 fd:02 49241 
  /usr/lib/libtasn1.so.3.0.15
7fccfc1a5000-7fccfc1a6000 rw-p 0000f000 fd:02 49241 
  /usr/lib/libtasn1.so.3.0.15
7fccfc1a6000-7fccfc1a9000 r-xp 00000000 fd:02 49214 
  /usr/lib/libgpg-error.so.0.3.0
7fccfc1a9000-7fccfc2a8000 ---p 00003000 fd:02 49214 
  /usr/lib/libgpg-error.so.0.3.0
7fccfc2a8000-7fccfc2a9000 rw-p 00002000 fd:02 49214 
  /usr/lib/libgpg-error.so.0.3.0
7fccfc2a9000-7fccfc30e000 r-xp 00000000 fd:02 49216 
  /usr/lib/libgcrypt.so.11.4.4
7fccfc30e000-7fccfc50d000 ---p 00065000 fd:02 49216 
  /usr/lib/libgcrypt.so.11.4.4
7fccfc50d000-7fccfc510000 rw-p 00064000 fd:02 49216 
  /usr/lib/libgcrypt.so.11.4.4
7fccfc510000-7fccfc5b7000 r-xp 00000000 fd:02 51425 
  /usr/lib/libgnutls.so.26.4.6
7fccfc5b7000-7fccfc7b7000 ---p 000a7000 fd:02 51425 
  /usr/lib/libgnutls.so.26.4.6
7fccfc7b7000-7fccfc7c2000 rw-p 000a7000 fd:02 51425 
  /usr/lib/libgnutls.so.26.4.6
7fccfc7c2000-7fccfc7db000 r-xp 00000000 fd:02 49644 
  /usr/lib/libsasl2.so.2.0.22
7fccfc7db000-7fccfc9db000 ---p 00019000 fd:02 49644 
  /usr/lib/libsasl2.so.2.0.22
7fccfc9db000-7fccfc9dc000 rw-p 00019000 fd:02 49644 
  /usr/lib/libsasl2.so.2.0.22
7fccfc9dc000-7fccfc9ec000 r-xp 00000000 fd:01 112760 
  /lib/libresolv-2.7.so
7fccfc9ec000-7fccfcbec000 ---p 00010000 fd:01 112760 
  /lib/libresolv-2.7.so
7fccfcbec000-7fccfcbee000 rw-p 00010000 fd:01 112760 
  /lib/libresolv-2.7.so
7fccfcbee000-7fccfcbf0000 rw-p 7fccfcbee000 00:00 0
7fccfcbf0000-7fccfcbf2000 r-xp 00000000 fd:01 112653 
  /lib/libkeyutils-1.2.so
7fccfcbf2000-7fccfcdf1000 ---p 00002000 fd:01 112653 
  /lib/libkeyutils-1.2.so
7fccfcdf1000-7fccfcdf2000 rw-p 00001000 fd:01 112653 
  /lib/libkeyutils-1.2.so
7fccfcdf2000-7fccfcdf9000 r-xp 00000000 fd:02 50190 
  /usr/lib/libkrb5support.so.0.1
7fccfcdf9000-7fccfcff9000 ---p 00007000 fd:02 50190 
  /usr/lib/libkrb5support.so.0.1
7fccfcff9000-7fccfcffa000 rw-p 00007000 fd:02 50190 
  /usr/lib/libkrb5support.so.0.1
7fccfcffa000-7fccfd01e000 r-xp 00000000 fd:02 50192 
  /usr/lib/libk5crypto.so.3.1
7fccfd01e000-7fccfd21e000 ---p 00024000 fd:02 50192 
  /usr/lib/libk5crypto.so.3.1
7fccfd21e000-7fccfd220000 rw-p 00024000 fd:02 50192 
  /usr/lib/libk5crypto.so.3.1
7fccfd220000-7fccfd235000 r-xp 00000000 fd:01 112714 
  /lib/libnsl-2.7.so
7fccfd235000-7fccfd434000 ---p 00015000 fd:01 112714 
  /lib/libnsl-2.7.so
7fccfd434000-7fccfd436000 rw-p 00014000 fd:01 112714 
  /lib/libnsl-2.7.so
7fccfd436000-7fccfd438000 rw-p 7fccfd436000 00:00 0
7fccfd438000-7fccfd446000 r-xp 00000000 fd:02 49363 
  /usr/lib/liblber-2.4.so.2.1.0
7fccfd446000-7fccfd646000 ---p 0000e000 fd:02 49363 
  /usr/lib/liblber-2.4.so.2.1.0
7fccfd646000-7fccfd647000 rw-p 0000e000 fd:02 49363 
  /usr/lib/liblber-2.4.so.2.1.0
7fccfd647000-7fccfd669000 r-xp 00000000 fd:02 49758 
  /usr/lib/libssh2.so.1.0.0
7fccfd669000-7fccfd869000 ---p 00022000 fd:02 49758 
  /usr/lib/libssh2.so.1.0.0
7fccfd869000-7fccfd86a000 rw-p 00022000 fd:02 49758 
  /usr/lib/libssh2.so.1.0.0
7fccfd86a000-7fccfd89b000 r-xp 00000000 fd:02 49719 
  /usr/lib/libidn.so.11.5.37
7fccfd89b000-7fccfda9b000 ---p 00031000 fd:02 49719 
  /usr/lib/libidn.so.11.5.37
7fccfda9b000-7fccfda9c000 rw-p 00031000 fd:02 49719 
  /usr/lib/libidn.so.11.5.37
7fccfda9c000-7fccfdae1000 r-xp 00000000 fd:02 49364 
  /usr/lib/libldap_r-2.4.so.2.1.0
7fccfdae1000-7fccfdce0000 ---p 00045000 fd:02 49364 
  /usr/lib/libldap_r-2.4.so.2.1.0
7fccfdce0000-7fccfdce3000 rw-p 00044000 fd:02 49364 
  /usr/lib/libldap_r-2.4.so.2.1.0
7fccfdce3000-7fccfdce5000 rw-p 7fccfdce3000 00:00 0
7fccfdce5000-7fccfdced000 r-xp 00000000 fd:01 112701 
  /lib/libcrypt-2.7.so
7fccfdced000-7fccfdeed000 ---p 00008000 fd:01 112701 
  /lib/libcrypt-2.7.so
7fccfdeed000-7fccfdeef000 rw-p 00008000 fd:01 112701 
  /lib/libcrypt-2.7.so
7fccfdeef000-7fccfdf1d000 rw-p 7fccfdeef000 00:00 0
7fccfdf1d000-7fccfdf48000 r-xp 00000000 fd:02 50186 
  /usr/lib/libgssapi_krb5.so.2.2
7fccfdf48000-7fccfe147000 ---p 0002b000 fd:02 50186 
  /usr/lib/libgssapi_krb5.so.2.2
7fccfe147000-7fccfe149000 rw-p 0002a000 fd:02 50186 
  /usr/lib/libgssapi_krb5.so.2.2
7fccfe149000-7fccfe14c000 r-xp 00000000 fd:01 112786 
  /lib/libcom_err.so.2.1
7fccfe14c000-7fccfe34b000 ---p 00003000 fd:01 112786 
  /lib/libcom_err.so.2.1
7fccfe34b000-7fccfe34c000 rw-p 00002000 fd:01 112786 
  /lib/libcom_err.so.2.1
7fccfe34c000-7fccfe3e9000 r-xp 00000000 fd:02 50188 
  /usr/lib/libkrb5.so.3.3
7fccfe3e9000-7fccfe5e9000 ---p 0009d000 fd:02 50188 
  /usr/lib/libkrb5.so.3.3
7fccfe5e9000-7fccfe5ed000 rw-p 0009d000 fd:02 50188 
  /usr/lib/libkrb5.so.3.3
7fccfe5ed000-7fccfe75f000 r-xp 00000000 fd:02 49292 
  /usr/lib/libcrypto.so.0.9.8
7fccfe75f000-7fccfe95e000 ---p 00172000 fd:02 49292 
  /usr/lib/libcrypto.so.0.9.8
7fccfe95e000-7fccfe984000 rw-p 00171000 fd:02 49292 
  /usr/lib/libcrypto.so.0.9.8
7fccfe984000-7fccfe988000 rw-p 7fccfe984000 00:00 0
7fccfe988000-7fccfe9d2000 r-xp 00000000 fd:02 49358 
  /usr/lib/libssl.so.0.9.8
7fccfe9d2000-7fccfebd2000 ---p 0004a000 fd:02 49358 
  /usr/lib/libssl.so.0.9.8
7fccfebd2000-7fccfebd9000 rw-p 0004a000 fd:02 49358 
  /usr/lib/libssl.so.0.9.8
7fccfebd9000-7fccfec18000 r-xp 00000000 fd:02 50247 
  /usr/lib/libproj.so.0.5.5
7fccfec18000-7fccfee18000 ---p 0003f000 fd:02 50247 
  /usr/lib/libproj.so.0.5.5
7fccfee18000-7fccfee1b000 rw-p 0003f000 fd:02 50247 
  /usr/lib/libproj.so.0.5.5
7fccfee1b000-7fccfee1d000 r-xp 00000000 fd:01 112713 
  /lib/libutil-2.7.so
7fccfee1d000-7fccff01c000 ---p 00002000 fd:01 112713 
  /lib/libutil-2.7.so
7fccff01c000-7fccff01e000 rw-p 00001000 fd:01 112713 
  /lib/libutil-2.7.so
7fccff01e000-7fccff119000 r-xp 00000000 fd:02 50973 
  /usr/lib/liblam.so.4.0
7fccff119000-7fccff319000 ---p 000fb000 fd:02 50973 
  /usr/lib/liblam.so.4.0
7fccff319000-7fccff320000 rw-p 000fb000 fd:02 50973 
  /usr/lib/liblam.so.4.0
7fccff320000-7fccff335000 rw-p 7fccff320000 00:00 0
7fccff335000-7fccff361000 r-xp 00000000 fd:02 50974 
  /usr/lib/liblamio.so.4.0
7fccff361000-7fccff561000 ---p 0002c000 fd:02 50974 
  /usr/lib/liblamio.so.4.0
7fccff561000-7fccff562000 rw-p 0002c000 fd:02 50974 
  /usr/lib/liblamio.so.4.0
7fccff562000-7fcd00038000 r--p 00000000 fd:02 49201 
  /usr/lib/libicudata.so.38.1
7fcd00038000-7fcd00237000 ---p 00ad6000 fd:02 49201 
  /usr/lib/libicudata.so.38.1
7fcd00237000-7fcd00238000 rw-p 00ad5000 fd:02 49201 
  /usr/lib/libicudata.so.38.1
7fcd00238000-7fcd00368000 r-xp 00000000 fd:02 49209 
  /usr/lib/libicuuc.so.38.1
7fcd00368000-7fcd00568000 ---p 00130000 fd:02 49209 
  /usr/lib/libicuuc.so.38.1
7fcd00568000-7fcd00578000 rw-p 00130000 fd:02 49209 
  /usr/lib/libicuuc.so.38.1
7fcd00578000-7fcd00579000 rw-p 7fcd00578000 00:00 0
7fcd00579000-7fcd00580000 r-xp 00000000 fd:02 49441 
  /usr/lib/libltdl.so.3.1.6
7fcd00580000-7fcd0077f000 ---p 00007000 fd:02 49441 
  /usr/lib/libltdl.so.3.1.6
7fcd0077f000-7fcd00780000 rw-p 00006000 fd:02 49441 
  /usr/lib/libltdl.so.3.1.6
7fcd00780000-7fcd008f5000 r-xp 00000000 fd:02 50244 
  /usr/lib/libgeos-3.2.0.so
7fcd008f5000-7fcd00af5000 ---p 00175000 fd:02 50244 
  /usr/lib/libgeos-3.2.0.so
7fcd00af5000-7fcd00b00000 rw-p 00175000 fd:02 50244 
  /usr/lib/libgeos-3.2.0.so
7fcd00b00000-7fcd00b16000 r-xp 00000000 fd:01 112650 
  /lib/libgcc_s.so.1
7fcd00b16000-7fcd00d16000 ---p 00016000 fd:01 112650 
  /lib/libgcc_s.so.1
7fcd00d16000-7fcd00d17000 rw-p 00016000 fd:01 112650 
  /lib/libgcc_s.so.1
7fcd00d17000-7fcd00e08000 r-xp 00000000 fd:02 50606 
  /usr/lib/libstdc++.so.6.0.10
7fcd00e08000-7fcd01007000 ---p 000f1000 fd:02 50606 
  /usr/lib/libstdc++.so.6.0.10
7fcd01007000-7fcd0100d000 r--p 000f0000 fd:02 50606 
  /usr/lib/libstdc++.so.6.0.10
7fcd0100d000-7fcd01010000 rw-p 000f6000 fd:02 50606 
  /usr/lib/libstdc++.so.6.0.10
7fcd01010000-7fcd01023000 rw-p 7fcd01010000 00:00 0
7fcd01023000-7fcd011e2000 r-xp 00000000 fd:02 49298 
  /usr/lib/libmysqlclient.so.15.0.0
7fcd011e2000-7fcd013e2000 ---p 001bf000 fd:02 49298 
  /usr/lib/libmysqlclient.so.15.0.0
7fcd013e2000-7fcd0142d000 rw-p 001bf000 fd:02 49298 
  /usr/lib/libmysqlclient.so.15.0.0
7fcd0142d000-7fcd0142e000 rw-p 7fcd0142d000 00:00 0
7fcd0142e000-7fcd01444000 r-xp 00000000 fd:01 112772 
  /lib/libpthread-2.7.so
7fcd01444000-7fcd01644000 ---p 00016000 fd:01 112772 
  /lib/libpthread-2.7.so
7fcd01644000-7fcd01646000 rw-p 00016000 fd:01 112772 
  /lib/libpthread-2.7.so
7fcd01646000-7fcd0164a000 rw-p 7fcd01646000 00:00 0
7fcd0164a000-7fcd0168f000 r-xp 00000000 fd:02 50443 
  /usr/lib/libcurl.so.4.1.0
7fcd0168f000-7fcd0188f000 ---p 00045000 fd:02 50443 
  /usr/lib/libcurl.so.4.1.0
7fcd0188f000-7fcd01891000 rw-p 00045000 fd:02 50443 
  /usr/lib/libcurl.so.4.1.0
7fcd01891000-7fcd01893000 r-xp 00000000 fd:01 112724 
  /lib/libdl-2.7.so
7fcd01893000-7fcd01a93000 ---p 00002000 fd:01 112724 
  /lib/libdl-2.7.so
7fcd01a93000-7fcd01a95000 rw-p 00002000 fd:01 112724 
  /lib/libdl-2.7.so
7fcd01a95000-7fcd01a9d000 r-xp 00000000 fd:01 112759 
  /lib/librt-2.7.so
7fcd01a9d000-7fcd01c9c000 ---p 00008000 fd:01 112759 
  /lib/librt-2.7.so
7fcd01c9c000-7fcd01c9e000 rw-p 00007000 fd:01 112759 
  /lib/librt-2.7.so
7fcd01c9e000-7fcd01cb4000 r-xp 00000000 fd:02 50612 
  /usr/lib/libz.so.1.2.3.3
7fcd01cb4000-7fcd01eb4000 ---p 00016000 fd:02 50612 
  /usr/lib/libz.so.1.2.3.3
7fcd01eb4000-7fcd01eb5000 rw-p 00016000 fd:02 50612 
  /usr/lib/libz.so.1.2.3.3
7fcd01eb5000-7fcd01eda000 r-xp 00000000 fd:02 49448 
  /usr/lib/libpq.so.5.2
7fcd01eda000-7fcd020da000 ---p 00025000 fd:02 49448 
  /usr/lib/libpq.so.5.2
7fcd020da000-7fcd020dd000 rw-p 00025000 fd:02 49448 
  /usr/lib/libpq.so.5.2
7fcd020dd000-7fcd02110000 r-xp 00000000 fd:02 49633 
  /usr/lib/libnetcdf.so.4.0.0
7fcd02110000-7fcd0230f000 ---p 00033000 fd:02 49633 
  /usr/lib/libnetcdf.so.4.0.0
7fcd0230f000-7fcd02310000 rw-p 00032000 fd:02 49633 
  /usr/lib/libnetcdf.so.4.0.0
7fcd02310000-7fcd02312000 rw-p 7fcd02310000 00:00 0
7fcd02312000-7fcd02337000 r-xp 00000000 fd:02 49259 
  /usr/lib/libpng12.so.0.27.0
7fcd02337000-7fcd02536000 ---p 00025000 fd:02 49259 
  /usr/lib/libpng12.so.0.27.0
7fcd02536000-7fcd02537000 rw-p 00024000 fd:02 49259 
  /usr/lib/libpng12.so.0.27.0
7fcd02537000-7fcd02558000 r-xp 00000000 fd:02 49343 
  /usr/lib/libjpeg.so.62.0.0
7fcd02558000-7fcd02758000 ---p 00021000 fd:02 49343 
  /usr/lib/libjpeg.so.62.0.0
7fcd02758000-7fcd02759000 rw-p 00021000 fd:02 49343 
  /usr/lib/libjpeg.so.62.0.0
7fcd02759000-7fcd02761000 r-xp 00000000 fd:02 50627 
  /usr/lib/libgif.so.4.1.6
7fcd02761000-7fcd02960000 ---p 00008000 fd:02 50627 
  /usr/lib/libgif.so.4.1.6
7fcd02960000-7fcd02961000 rw-p 00007000 fd:02 50627 
  /usr/lib/libgif.so.4.1.6
7fcd02961000-7fcd02980000 r-xp 00000000 fd:02 611288 
  /usr/lib/libogdi.so.3.2
7fcd02980000-7fcd02b80000 ---p 0001f000 fd:02 611288 
  /usr/lib/libogdi.so.3.2
7fcd02b80000-7fcd02b81000 rw-p 0001f000 fd:02 611288 
  /usr/lib/libogdi.so.3.2
7fcd02b81000-7fcd02c06000 r-xp 00000000 fd:02 50665 
  /usr/lib/libdf.so.4.1r4
7fcd02c06000-7fcd02e05000 ---p 00085000 fd:02 50665 
  /usr/lib/libdf.so.4.1r4
7fcd02e05000-7fcd02e09000 rw-p 00084000 fd:02 50665 
  /usr/lib/libdf.so.4.1r4
7fcd02e09000-7fcd02e32000 rw-p 7fcd02e09000 00:00 0
7fcd02e32000-7fcd02e57000 r-xp 00000000 fd:02 50663 
  /usr/lib/libmfhdf.so.4.1r4
7fcd02e57000-7fcd03057000 ---p 00025000 fd:02 50663 
  /usr/lib/libmfhdf.so.4.1r4
7fcd03057000-7fcd03058000 rw-p 00025000 fd:02 50663 
  /usr/lib/libmfhdf.so.4.1r4
7fcd03058000-7fcd03059000 rw-p 7fcd03058000 00:00 0
7fcd03059000-7fcd03183000 r-xp 00000000 fd:02 51480 
  /usr/lib/libhdf5-1.6.6.so.0.0.0
7fcd03183000-7fcd03383000 ---p 0012a000 fd:02 51480 
  /usr/lib/libhdf5-1.6.6.so.0.0.0
7fcd03383000-7fcd03389000 rw-p 0012a000 fd:02 51480 
  /usr/lib/libhdf5-1.6.6.so.0.0.0
7fcd03389000-7fcd0338a000 rw-p 7fcd03389000 00:00 0
7fcd0338a000-7fcd033ac000 r-xp 00000000 fd:02 409636 
  /usr/local/lib/libNCSUtil.so.0.0.0
7fcd033ac000-7fcd035ac000 ---p 00022000 fd:02 409636 
  /usr/local/lib/libNCSUtil.so.0.0.0
7fcd035ac000-7fcd035ae000 rw-p 00022000 fd:02 409636 
  /usr/local/lib/libNCSUtil.so.0.0.0
7fcd035ae000-7fcd035af000 rw-p 7fcd035ae000 00:00 0
7fcd035af000-7fcd035c3000 r-xp 00000000 fd:02 409641 
  /usr/local/lib/libNCSCnet.so.0.0.0
7fcd035c3000-7fcd037c3000 ---p 00014000 fd:02 409641 
  /usr/local/lib/libNCSCnet.so.0.0.0
7fcd037c3000-7fcd037c4000 rw-p 00014000 fd:02 409641 
  /usr/local/lib/libNCSCnet.so.0.0.0
7fcd037c4000-7fcd038ea000 r-xp 00000000 fd:02 409631 
  /usr/local/lib/libNCSEcw.so.0.0.0
7fcd038ea000-7fcd03aea000 ---p 00126000 fd:02 409631 
  /usr/local/lib/libNCSEcw.so.0.0.0
7fcd03aea000-7fcd03af9000 rw-p 00126000 fd:02 409631 
  /usr/local/lib/libNCSEcw.so.0.0.0
7fcd03af9000-7fcd03b06000 rw-p 7fcd03af9000 00:00 0
7fcd03b06000-7fcd03ebd000 r-xp 00000000 fd:02 49475 
  /usr/lib/libxerces-c.so.28.0
7fcd03ebd000-7fcd040bd000 ---p 003b7000 fd:02 49475 
  /usr/lib/libxerces-c.so.28.0
7fcd040bd000-7fcd040ff000 rw-p 003b7000 fd:02 49475 
  /usr/lib/libxerces-c.so.28.0
7fcd040ff000-7fcd04100000 rw-p 7fcd040ff000 00:00 0
7fcd04100000-7fcd04127000 r-xp 00000000 fd:02 49269 
  /usr/lib/libexpat.so.1.5.2
7fcd04127000-7fcd04327000 ---p 00027000 fd:02 49269 
  /usr/lib/libexpat.so.1.5.2
7fcd04327000-7fcd04329000 rw-p 00027000 fd:02 49269 
  /usr/lib/libexpat.so.1.5.2
7fcd04329000-7fcd04334000 r-xp 00000000 fd:02 50691 
  /usr/lib/libodbcinst.so.1.0.0
7fcd04334000-7fcd04534000 ---p 0000b000 fd:02 50691 
  /usr/lib/libodbcinst.so.1.0.0
7fcd04534000-7fcd04535000 rw-p 0000b000 fd:02 50691 
  /usr/lib/libodbcinst.so.1.0.0
7fcd04535000-7fcd0458a000 r-xp 00000000 fd:02 50697 
  /usr/lib/libodbc.so.1.0.0
7fcd0458a000-7fcd04789000 ---p 00055000 fd:02 50697 
  /usr/lib/libodbc.so.1.0.0
7fcd04789000-7fcd04791000 rw-p 00054000 fd:02 50697 
  /usr/lib/libodbc.so.1.0.0
7fcd04791000-7fcd04805000 r-xp 00000000 fd:02 49309 
  /usr/lib/libsqlite3.so.0.8.6
7fcd04805000-7fcd04a05000 ---p 00074000 fd:02 49309 
  /usr/lib/libsqlite3.so.0.8.6
7fcd04a05000-7fcd04a07000 rw-p 00074000 fd:02 49309 
  /usr/lib/libsqlite3.so.0.8.6
7fcd04a07000-7fcd04a20000 r-xp 00000000 fd:02 50321 
  /usr/lib/libgeos_c.so.1.6.0
7fcd04a20000-
Program received signal SIGABRT, Aborted.
[Switching to Thread 0x7fcd0612d710 (LWP 16472)]
0x00007fcd04c52ed5 in raise () from /lib/libc.so.6
(gdb) bt
#0  0x00007fcd04c52ed5 in raise () from /lib/libc.so.6
#1  0x00007fcd04c543f3 in abort () from /lib/libc.so.6
#2  0x00007fcd04c8f408 in ?? () from /lib/libc.so.6
#3  0x00007fcd04c949a8 in ?? () from /lib/libc.so.6
#4  0x00007fcd04c96ab6 in free () from /lib/libc.so.6
#5  0x00007fcd05e8b0c3 in SHPDestroyObject () from /usr/lib/libshp.so.1
#6  0x00000000004017c3 in main (argc=0, argv=0x7fffffffd298)
     at shpaddelev.c:202
(gdb) q
The program is running.  Exit anyway? (y or n) y
From warmerdam at pobox.com  Thu Sep  2 10:21:46 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep  2 10:21:51 2010
Subject: [gdal-dev] Mixing gdal and shapelib?
In-Reply-To: <4C7F27AE.7090501@swoodbridge.com>
References: <4C7F27AE.7090501@swoodbridge.com>
Message-ID: <4C7FB2FA.4080704@pobox.com>

Stephen Woodbridge wrote:
> Hi devs,
> 
> I have written a program that uses gdal to access raster images and 
> shapelib calls to read and write some shapefiles.
> 
> I'm getting some SEGVs and I crashed valgrind! see valgrind gdb runs below.
> 
> It also appears the gdal/ogr has a copy of shapelib build into it so I 
> have tried loading -lshp -lgdal and -lgdal -lshp, but I'm guess having 
> two copies is bad.
> 
> I know I could use ogr, but I already had the code written with shapelib 
> and I have not used ogr before.

Steve,

As long as GDAL is not configured --with-hide-internal-symbols=yes it
should be possible to link against GDAL and call it's copy of the Shapelib
functions safely and avoid linking in a separate copy.  You might need to
use the include files from gdal/ogr/ogrsf_frmts/shape in this case too.

It is bad karma to have two copies of shapelib in your build.

I would add there is currently no mechanism for GDAL to link against an
external shapelib.  I really never intended for shapelib to be a standalone
library - I always envisaged it being "built in" as it is with GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ahh34 at cam.ac.uk  Thu Sep  2 10:07:50 2010
From: ahh34 at cam.ac.uk (Alex Hagen-Zanker)
Date: Thu Sep  2 10:23:35 2010
Subject: [gdal-dev] Bug in coordinate system library? unknown elliptical
	parameter for BNG coordinate system
Message-ID: <4C7FAFB6.7060704@cam.ac.uk>



Jean-Claude was right. I had a problem with the installation. There were several versions of proj.dll on my computer.

One that I downloaded as a binary, one that I build myself, one in fw_tools and some that I created trying to solve this problem.

By deleting all the old ones except for the recent self-built the problem was solved.

This problem has been quite a nuisance, so maybe it is worth mentioning it somewhere (or maybe having it in the mailing archives like this is enough).

Alex


>>  Hi Alex,
>>  There is probably something wrong in your installation. Check the paths,
>>  environment variables, etc ...

>>  Jean-Claude

From woodbri at swoodbridge.com  Thu Sep  2 11:27:51 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Thu Sep  2 11:29:39 2010
Subject: [gdal-dev] Mixing gdal and shapelib?
In-Reply-To: <AANLkTi=71D7bBbFx-do4nfEdvB-i1Y_HFC5aH=XEbTve@mail.gmail.com>
References: <4C7F27AE.7090501@swoodbridge.com>
	<AANLkTi=71D7bBbFx-do4nfEdvB-i1Y_HFC5aH=XEbTve@mail.gmail.com>
Message-ID: <4C7FC277.2020509@swoodbridge.com>

On 9/2/2010 12:41 AM, Chaitanya kumar CH wrote:
> Before I read through the valgrind and gdb reports throughly, I want to
> suggest that you can compile gdal without ogr support.


Hi Chaitanya,

Not exactly the test you asked for because I can not easily install gdal 
without ogr on this server, but ...

I commented out the gdal calls and relinked with just the shapelib calls 
and the program runs fine linked without -lgdal

If I link with -lshp -lgdal it segv's.
If I link with -lgdal -lshp it works fine also.

because the later lib overides entry points of the prior libs.

Also looking at the ogr source:

woodbri@mappy:/u/software/gdal-1.7.2$ ls ogr/ogrsf_frmts/shape/ 
         dbfopen.c           makefile.vc             ogrshapelayer.cpp 
shptree.c
drv_shapefile.html  ogrshapedatasource.cpp  shape2ogr.cpp      shp_vsi.c
GNUmakefile         ogrshapedriver.cpp      shapefil.h
LICENSE.LGPL        ogrshape.h              shpopen.c

this shapefil.h is significantly different from the system shapefil.h 
and this embedded shapelib has not been moved to a different namespace 
so from this I have to conclude that you can not link shapelib with 
gdal/ogr libraries, which is too bad. I guess I'll go google the ogr 
tutorial and try to port this application to ogr tonight.

-Steve
From rodmertin at hotmail.com  Thu Sep  2 20:27:58 2010
From: rodmertin at hotmail.com (AusRod)
Date: Thu Sep  2 20:27:59 2010
Subject: [gdal-dev] GDALINFO cannot pipe to text file
Message-ID: <1283473678158-5493418.post@n2.nabble.com>



-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALINFO-cannot-pipe-to-text-file-tp5493418p5493418.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From peifer at gmx.eu  Fri Sep  3 02:32:04 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri Sep  3 02:32:12 2010
Subject: [gdal-dev] Re: GDALINFO cannot pipe to text file
In-Reply-To: <1283473678158-5493418.post@n2.nabble.com>
References: <1283473678158-5493418.post@n2.nabble.com>
Message-ID: <4C809664.6050904@gmx.eu>

On 03/09/2010 02:27, AusRod wrote:
>
>

Same here:

$ GDALINFO file.tif > textfile
-bash: GDALINFO: command not found

But there is an easy way out. See below. Hermann

$ gdalinfo file.tif > textfile

$ cat textfile
Driver: GTiff/GeoTIFF
Files: file.tif
Size is 4850, 4150
Coordinate System is:
PROJCS["ETRS_1989_LAEA_L52_M10",
     GEOGCS["European_Terrestrial_Reference_System_1989",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS 1980",6378137,298.2572221010002,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6258"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["latitude_of_center",52],
     PARAMETER["longitude_of_center",10],
     PARAMETER["false_easting",4321000],
     PARAMETER["false_northing",3210000],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
Origin = (2555000.000000000000000,5500000.000000000000000)
Pixel Size = (1000.000000000000000,-1000.000000000000000)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( 2555000.000, 5500000.000) ( 34d 7'12.64"W, 67d17'7.44"N)
Lower Left  ( 2555000.000, 1350000.000) (  8d54'24.14"W, 33d13'50.38"N)
Upper Right ( 7405000.000, 5500000.000) ( 72d57'42.08"E, 58d55'2.50"N)
Lower Right ( 7405000.000, 1350000.000) ( 42d 7'32.17"E, 29d19'21.50"N)
Center      ( 4980000.000, 3425000.000) ( 19d58'18.08"E, 53d31'26.07"N)
Band 1 Block=256x256 Type=Int16, ColorInterp=Gray
   NoData Value=-9999

From riaanvddool at gmail.com  Fri Sep  3 06:39:09 2010
From: riaanvddool at gmail.com (Riaan van den Dool)
Date: Fri Sep  3 06:39:13 2010
Subject: [gdal-dev] ReadAsArray misbehaving...
Message-ID: <AANLkTikaOQY1q5ttGUV5Ca5-TskO4DBMTic+g82EQsQR@mail.gmail.com>

I have recently started a new open-source project that will use gdal
extensively, named scikits.eartho.

The vision is to implement some advanced algorithms and ideas that we
develop and work with at the South African Satellite Applications Centre
(SAC) for use in Python (SciPy).

I am experiencing some trouble with RasterBand.ReadAsArray.

My python code:

import osgeo.gdal as gdal

class RasterReaderWriter:
    def __init__(self,  raster):
        self.raster = raster
        self.tileWidth =1024
        self.tileHeight = 1024
        self.tileNum = 0

    def setTileSize(self,  width,  height):
        self.tileWidth =width
        self.tileHeight = height

    def resetIterator(self):
        self.tileNum = 0

    def readNextTile(self):
        tileRaster,  offsetX,  offsetY,  width,  height  =
self.readTile(self.tileNum)
        self.tileNum = self.tileNum + 1
        return tileRaster,  offsetX,  offsetY,  width,  height

    def readTile(self,  tileNum):
        tilesInWidth = self.raster.XSize / self.tileWidth + 1
        offsetX = tileNum % tilesInWidth * self.tileWidth
        offsetY = tileNum / tilesInWidth * self.tileHeight
        width = min(self.tileWidth,  self.raster.XSize - offsetX)
        height = min(self.tileHeight,  self.raster.YSize - offsetY)
        print offsetX,  offsetY,  width,  height
        tileRaster = self.raster.ReadAsArray(offsetX,  offsetY, width,
height)
        return tileRaster,  offsetX,  offsetY,  width,  height




reader = RasterReaderWriter(gdal.Open(iFilename).GetRasterBand(1))
print reader.raster.XSize
print reader.raster.YSize
tile, offsetX, offsetY, width, height = reader.readNextTile()

Before the call to readNextTile() the raster XSize and YSize is correct.
After the call the raster seems to have been corrupted as the XSize and
YSize have invalid values.

Any help would be appreciated!

Riaan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100903/81ddabb4/attachment.html
From riaanvddool at gmail.com  Fri Sep  3 07:45:00 2010
From: riaanvddool at gmail.com (Riaan van den Dool)
Date: Fri Sep  3 07:45:02 2010
Subject: [gdal-dev] ReadAsArray misbehaving...
In-Reply-To: <AANLkTikcDPZB7GMZ15rFTPqX5cZzOW4ir+0bJ7UjbwL5@mail.gmail.com>
References: <AANLkTikaOQY1q5ttGUV5Ca5-TskO4DBMTic+g82EQsQR@mail.gmail.com>
	<AANLkTikcDPZB7GMZ15rFTPqX5cZzOW4ir+0bJ7UjbwL5@mail.gmail.com>
Message-ID: <AANLkTimQtHE7pNvUYiKn1LGVu24xKEGyhYXrgnCMLEcT@mail.gmail.com>

Thanks for the suggestion.

I have tried:

tileRaster = self.raster.ReadAsArray(xoff=offsetX,  yoff=offsetY,
win_xsize=width,  win_ysize=height)

and

tileRaster = self.raster.ReadAsArray(xoff=offsetX,  yoff=offsetY,
buf_xsize=width,  buf_ysize=height)

but the result is something like:

(array([], shape=(0, 1024), dtype=float32), 0, 0, 1024, 0)


Riaan

On Fri, Sep 3, 2010 at 1:33 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Riaan,
>
> Try calling the method as below
> tileRaster = self.raster.ReadAsArray(xoff=offsetX,  yoff=offsetY,
> xsize=width,  ysize=height)
>
> On Fri, Sep 3, 2010 at 4:09 PM, Riaan van den Dool <riaanvddool@gmail.com>wrote:
>
>> I have recently started a new open-source project that will use gdal
>> extensively, named scikits.eartho.
>>
>> The vision is to implement some advanced algorithms and ideas that we
>> develop and work with at the South African Satellite Applications Centre
>> (SAC) for use in Python (SciPy).
>>
>> I am experiencing some trouble with RasterBand.ReadAsArray.
>>
>> My python code:
>>
>> import osgeo.gdal as gdal
>>
>> class RasterReaderWriter:
>>     def __init__(self,  raster):
>>         self.raster = raster
>>         self.tileWidth =1024
>>         self.tileHeight = 1024
>>         self.tileNum = 0
>>
>>     def setTileSize(self,  width,  height):
>>         self.tileWidth =width
>>         self.tileHeight = height
>>
>>     def resetIterator(self):
>>         self.tileNum = 0
>>
>>     def readNextTile(self):
>>         tileRaster,  offsetX,  offsetY,  width,  height  =
>> self.readTile(self.tileNum)
>>         self.tileNum = self.tileNum + 1
>>         return tileRaster,  offsetX,  offsetY,  width,  height
>>
>>     def readTile(self,  tileNum):
>>         tilesInWidth = self.raster.XSize / self.tileWidth + 1
>>         offsetX = tileNum % tilesInWidth * self.tileWidth
>>         offsetY = tileNum / tilesInWidth * self.tileHeight
>>         width = min(self.tileWidth,  self.raster.XSize - offsetX)
>>         height = min(self.tileHeight,  self.raster.YSize - offsetY)
>>         print offsetX,  offsetY,  width,  height
>>         tileRaster = self.raster.ReadAsArray(offsetX,  offsetY, width,
>> height)
>>         return tileRaster,  offsetX,  offsetY,  width,  height
>>
>>
>>
>>
>> reader = RasterReaderWriter(gdal.Open(iFilename).GetRasterBand(1))
>> print reader.raster.XSize
>> print reader.raster.YSize
>> tile, offsetX, offsetY, width, height = reader.readNextTile()
>>
>> Before the call to readNextTile() the raster XSize and YSize is correct.
>> After the call the raster seems to have been corrupted as the XSize and
>> YSize have invalid values.
>>
>> Any help would be appreciated!
>>
>> Riaan
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100903/b3fcab39/attachment.html
From woodbri at swoodbridge.com  Fri Sep  3 12:45:56 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Sep  3 12:48:13 2010
Subject: [gdal-dev] Need help if OGR C-API
Message-ID: <4C812644.4060809@swoodbridge.com>

Hi all,

Trying to convert a shapelib program over to OGR and have to say it is 
very complicated.

I'm using: GDAL 1.7.2, released 2010/04/23

At the moment I stuck on:

   hDSin = OGROpen( "Streets.shp", FALSE, NULL );
   hLayerIn = OGR_DS_GetLayerByName( hDSin, "Streets" );

   hFDefnIn = OGR_L_GetLayerDefn( hLayerIn );
   layerGeomType = OGR_FD_GetGeomType( hFDefnIn );

And always returns:   layerGeomType == wkbUnknown

And OGR_L_GetGeomType( hLayerIn )  does not appear until 1.8.

ogrinfo -so Streets.shp Streets
INFO: Open of `Streets.shp'
       using driver `ESRI Shapefile' successful.

Layer name: Streets
Geometry: Line String
Feature Count: 102958
Extent: (-71.888528, 42.156701) - (-71.020913, 42.734315)
Layer SRS WKT:
(unknown)
LINK_ID: Integer (10.0)
NAME: String (80.0)
...

So how do I get the geometry type of the shapefile?

-Steve
From warmerdam at pobox.com  Fri Sep  3 13:04:13 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep  3 13:04:18 2010
Subject: [gdal-dev] Need help if OGR C-API
In-Reply-To: <4C812644.4060809@swoodbridge.com>
References: <4C812644.4060809@swoodbridge.com>
Message-ID: <4C812A8D.1040104@pobox.com>

Stephen Woodbridge wrote:
> Hi all,
> 
> Trying to convert a shapelib program over to OGR and have to say it is 
> very complicated.
> 
> I'm using: GDAL 1.7.2, released 2010/04/23
> 
> At the moment I stuck on:
> 
>   hDSin = OGROpen( "Streets.shp", FALSE, NULL );
>   hLayerIn = OGR_DS_GetLayerByName( hDSin, "Streets" );
> 
>   hFDefnIn = OGR_L_GetLayerDefn( hLayerIn );
>   layerGeomType = OGR_FD_GetGeomType( hFDefnIn );
> 
> And always returns:   layerGeomType == wkbUnknown
> 
> And OGR_L_GetGeomType( hLayerIn )  does not appear until 1.8.
...

> So how do I get the geometry type of the shapefile?

Steve,

Hmm, that's odd.  You should be getting wkbLineString or wkbLineString25D.
Does ogrinfo report the layer type properly?   It is essentially using
the same mechanism.  Perhaps GDAL/OGR 1.7.2 did not always return the layer
geometry type - it is technically inaccurate to return wkbLineString since
the shapefile could also contain multilinestrings and we can't know unless
they are all read which we don't want to do on open.

The current trunk code reports linestring, but this is an area of behavior
on which I have vacillated (correctness vs. handiness).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From woodbri at swoodbridge.com  Fri Sep  3 13:14:49 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Sep  3 13:17:07 2010
Subject: [gdal-dev] Need help if OGR C-API
In-Reply-To: <4C812A8D.1040104@pobox.com>
References: <4C812644.4060809@swoodbridge.com> <4C812A8D.1040104@pobox.com>
Message-ID: <4C812D09.6090607@swoodbridge.com>

On 9/3/2010 1:04 PM, Frank Warmerdam wrote:
> Stephen Woodbridge wrote:
>> Hi all,
>>
>> Trying to convert a shapelib program over to OGR and have to say it is
>> very complicated.
>>
>> I'm using: GDAL 1.7.2, released 2010/04/23
>>
>> At the moment I stuck on:
>>
>> hDSin = OGROpen( "Streets.shp", FALSE, NULL );
>> hLayerIn = OGR_DS_GetLayerByName( hDSin, "Streets" );
>>
>> hFDefnIn = OGR_L_GetLayerDefn( hLayerIn );
>> layerGeomType = OGR_FD_GetGeomType( hFDefnIn );
>>
>> And always returns: layerGeomType == wkbUnknown
>>
>> And OGR_L_GetGeomType( hLayerIn ) does not appear until 1.8.
> ...
>
>> So how do I get the geometry type of the shapefile?
>
> Steve,
>
> Hmm, that's odd. You should be getting wkbLineString or wkbLineString25D.
> Does ogrinfo report the layer type properly? It is essentially using
> the same mechanism. Perhaps GDAL/OGR 1.7.2 did not always return the layer
> geometry type - it is technically inaccurate to return wkbLineString since
> the shapefile could also contain multilinestrings and we can't know unless
> they are all read which we don't want to do on open.
>
> The current trunk code reports linestring, but this is an area of behavior
> on which I have vacillated (correctness vs. handiness).
>

Hi Frank,

One thing that would be very nice is to change the name space for the 
embedded shapelib function so libshp can be linked to a program with 
ogr. I can see that using ogr has lots of benefits, but it is 
complicated relative shapelib if that is all you need.

Back to the current problem, here is what shpdump reports and ogrinfo. 
These both look ok.

-Steve

woodbri@mappy:~/dev/elevation$ shpdump Streets.shp | head
Shapefile Type: Arc   # of Shapes: 102958

File Bounds: (     -71.889,      42.157,0,0)
          to  (     -71.021,      42.734,0,0)

Shape:0 (Arc)  nVertices=3, nParts=1
   Bounds:(     -71.563,      42.267, 0, 0)
       to (     -71.563,      42.267, 0, 0)
      (     -71.563,      42.267, 0, 0) Ring
      (     -71.563,      42.267, 0, 0)


ogrinfo  Streets.shp Streets
INFO: Open of `Streets.shp'
       using driver `ESRI Shapefile' successful.

Layer name: Streets
Geometry: Line String
Feature Count: 102958
Extent: (-71.888528, 42.156701) - (-71.020913, 42.734315)
Layer SRS WKT:
(unknown)
LINK_ID: Integer (10.0)
NAME: String (80.0)
L_REFADDR: Integer (10.0)
L_NREFADDR: Integer (10.0)
L_SQLNUMF: String (12.0)
L_SQLFMT: String (16.0)
L_CFORMAT: String (16.0)
R_REFADDR: Integer (10.0)
R_NREFADDR: Integer (10.0)
R_SQLNUMF: String (12.0)
R_SQLFMT: String (16.0)
R_CFORMAT: String (16.0)
L_AC5: String (35.0)
L_AC4: String (35.0)
L_AC3: String (35.0)
L_AC2: String (35.0)
L_AC1: String (35.0)
R_AC5: String (35.0)
R_AC4: String (35.0)
R_AC3: String (35.0)
R_AC2: String (35.0)
R_AC1: String (35.0)
L_POSTCODE: String (11.0)
R_POSTCODE: String (11.0)
MTFCC: Integer (5.0)
PASSFLG: String (1.0)
DIVROAD: String (1.0)
OGRFeature(Streets):0
   LINK_ID (Integer) = 40037470
   NAME (String) = I- 90
   L_REFADDR (Integer) = 0
   L_NREFADDR (Integer) = 0
   L_SQLNUMF (String) = (null)
   L_SQLFMT (String) = (null)
   L_CFORMAT (String) = (null)
   R_REFADDR (Integer) = 0
   R_NREFADDR (Integer) = 0
   R_SQLNUMF (String) = (null)
   R_SQLFMT (String) = (null)
   R_CFORMAT (String) = (null)
   L_AC5 (String) = (null)
   L_AC4 (String) = (null)
   L_AC3 (String) = Middlesex
   L_AC2 (String) = MA
   L_AC1 (String) = US
   R_AC5 (String) = (null)
   R_AC4 (String) = Hopkinton
   R_AC3 (String) = Middlesex
   R_AC2 (String) = MA
   R_AC1 (String) = US
   L_POSTCODE (String) = (null)
   R_POSTCODE (String) = (null)
   MTFCC (Integer) = 1100
   PASSFLG (String) = (null)
   DIVROAD (String) = Y
   LINESTRING (-71.563116999999991 
42.267372999999999,-71.563024999999996 42.267412999999998,-71.562956 
42.267443)

...
From even.rouault at mines-paris.org  Fri Sep  3 13:43:11 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep  3 13:43:08 2010
Subject: [gdal-dev] Need help if OGR C-API
In-Reply-To: <4C812644.4060809@swoodbridge.com>
References: <4C812644.4060809@swoodbridge.com>
Message-ID: <201009031943.11264.even.rouault@mines-paris.org>

Le vendredi 03 septembre 2010 18:45:56, Stephen Woodbridge a ?crit :
> Hi all,
> 
> Trying to convert a shapelib program over to OGR and have to say it is
> very complicated.

No, it's just that you are not yet accustomed to use it ;-)

> 
> I'm using: GDAL 1.7.2, released 2010/04/23
> 
> At the moment I stuck on:
> 
>    hDSin = OGROpen( "Streets.shp", FALSE, NULL );
>    hLayerIn = OGR_DS_GetLayerByName( hDSin, "Streets" );
> 
>    hFDefnIn = OGR_L_GetLayerDefn( hLayerIn );
>    layerGeomType = OGR_FD_GetGeomType( hFDefnIn );
> 
> And always returns:   layerGeomType == wkbUnknown

Well, this is really weird. I've just tried the following code that is really 
a stand-alone version of your code:

#include <ogr_api.h>

int main(int argc, char* argv[])
{
    OGRRegisterAll();
    OGRDataSourceH  hDSin = OGROpen( argv[1], FALSE, NULL );
    OGRLayerH hLayerIn = OGR_DS_GetLayer( hDSin, 0 );
    OGRFieldDefnH hFDefnIn = OGR_L_GetLayerDefn( hLayerIn );
    OGRwkbGeometryType layerGeomType = OGR_FD_GetGeomType( hFDefnIn );
    printf("%d\n", layerGeomType == wkbLineString);
    return 0;
}

when passed a shapefile with linestrings, it prints 1 as expected with both 
trunk and 1.7 branch. You should try it on your streets.shp. If it returns 1, 
so there must something subtly wrong on your code that perhaps valgrind could 
detect. If it returns 0, hum, well no idea...

> 
> And OGR_L_GetGeomType( hLayerIn )  does not appear until 1.8.

You don't need it. This is just a convenience method that can provide speed-up 
for some drivers. But as documented, it will be strictly equivalent to 
OGR_FD_GetGeomType(OGR_L_GetLayerDefn(hLayerIn)).

> 
> ogrinfo -so Streets.shp Streets
> INFO: Open of `Streets.shp'
>        using driver `ESRI Shapefile' successful.
> 
> Layer name: Streets
> Geometry: Line String
> Feature Count: 102958
> Extent: (-71.888528, 42.156701) - (-71.020913, 42.734315)
> Layer SRS WKT:
> (unknown)
> LINK_ID: Integer (10.0)
> NAME: String (80.0)
> ...
> 
> So how do I get the geometry type of the shapefile?
> 
> -Steve
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From woodbri at swoodbridge.com  Fri Sep  3 13:48:51 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Sep  3 13:51:10 2010
Subject: [gdal-dev] Need help if OGR C-API
In-Reply-To: <201009031943.11264.even.rouault@mines-paris.org>
References: <4C812644.4060809@swoodbridge.com>
	<201009031943.11264.even.rouault@mines-paris.org>
Message-ID: <4C813503.2060606@swoodbridge.com>

Thanks Even,

I coded up a similar test program, and the works here so I'm looking 
elsewhere.

Looks like ogdi on Debian installs libgdal.so so I just uninstalled 
ogdi, since I don't think I use it. And I'm rebuilding gdal without that 
just to make sure I have a clean system without any rouge libs hanging 
around.

Then I will get back to debugging this.

-Steve W

On 9/3/2010 1:43 PM, Even Rouault wrote:
> Le vendredi 03 septembre 2010 18:45:56, Stephen Woodbridge a ?crit :
>> Hi all,
>>
>> Trying to convert a shapelib program over to OGR and have to say it is
>> very complicated.
>
> No, it's just that you are not yet accustomed to use it ;-)
>
>>
>> I'm using: GDAL 1.7.2, released 2010/04/23
>>
>> At the moment I stuck on:
>>
>>     hDSin = OGROpen( "Streets.shp", FALSE, NULL );
>>     hLayerIn = OGR_DS_GetLayerByName( hDSin, "Streets" );
>>
>>     hFDefnIn = OGR_L_GetLayerDefn( hLayerIn );
>>     layerGeomType = OGR_FD_GetGeomType( hFDefnIn );
>>
>> And always returns:   layerGeomType == wkbUnknown
>
> Well, this is really weird. I've just tried the following code that is really
> a stand-alone version of your code:
>
> #include<ogr_api.h>
>
> int main(int argc, char* argv[])
> {
>      OGRRegisterAll();
>      OGRDataSourceH  hDSin = OGROpen( argv[1], FALSE, NULL );
>      OGRLayerH hLayerIn = OGR_DS_GetLayer( hDSin, 0 );
>      OGRFieldDefnH hFDefnIn = OGR_L_GetLayerDefn( hLayerIn );
>      OGRwkbGeometryType layerGeomType = OGR_FD_GetGeomType( hFDefnIn );
>      printf("%d\n", layerGeomType == wkbLineString);
>      return 0;
> }
>
> when passed a shapefile with linestrings, it prints 1 as expected with both
> trunk and 1.7 branch. You should try it on your streets.shp. If it returns 1,
> so there must something subtly wrong on your code that perhaps valgrind could
> detect. If it returns 0, hum, well no idea...
>
>>
>> And OGR_L_GetGeomType( hLayerIn )  does not appear until 1.8.
>
> You don't need it. This is just a convenience method that can provide speed-up
> for some drivers. But as documented, it will be strictly equivalent to
> OGR_FD_GetGeomType(OGR_L_GetLayerDefn(hLayerIn)).
>
>>
>> ogrinfo -so Streets.shp Streets
>> INFO: Open of `Streets.shp'
>>         using driver `ESRI Shapefile' successful.
>>
>> Layer name: Streets
>> Geometry: Line String
>> Feature Count: 102958
>> Extent: (-71.888528, 42.156701) - (-71.020913, 42.734315)
>> Layer SRS WKT:
>> (unknown)
>> LINK_ID: Integer (10.0)
>> NAME: String (80.0)
>> ...
>>
>> So how do I get the geometry type of the shapefile?
>>
>> -Steve
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Fri Sep  3 13:52:26 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep  3 13:52:24 2010
Subject: [gdal-dev] ReadAsArray misbehaving...
In-Reply-To: <AANLkTikaOQY1q5ttGUV5Ca5-TskO4DBMTic+g82EQsQR@mail.gmail.com>
References: <AANLkTikaOQY1q5ttGUV5Ca5-TskO4DBMTic+g82EQsQR@mail.gmail.com>
Message-ID: <201009031952.26892.even.rouault@mines-paris.org>

Riann,

hum, I think you've hit a classical problem with the use of the GDAL python 
bindings. The root of your problem is likely the following line:

 reader = RasterReaderWriter(gdal.Open(iFilename).GetRasterBand(1))

Currently the GDAL python bindings do a poor job with life cycle management of 
native underlying objects. When chaining the calls, some objects can go out-
of-scope and are then destroyed. Specifically, the band object doesn't keep the 
dataset object alive, so the RasterReaderWriter() constructor will get a band 
object with a ghost dataset. This can typically result in application crashes, 
or as you've observed various corruptions.

All in all, I'd advise you rewriting the above as :

ds = gdal.Open(iFilename)
band = ds.GetRasterBand(1)
reader =  RasterReaderWriter(band)
....
.....
ds = None # we can drop the reference on the dataset when we don't need to use 
the reader.

An alternative if you don't want to keep the reference on the dataset in the 
calling code, is to pass both the dataset and the band to RasterReaderWrite() 
so that it can stores them in member variables of the class.

Best regards,

Even

Le vendredi 03 septembre 2010 12:39:09, Riaan van den Dool a ?crit :
> I have recently started a new open-source project that will use gdal
> extensively, named scikits.eartho.
> 
> The vision is to implement some advanced algorithms and ideas that we
> develop and work with at the South African Satellite Applications Centre
> (SAC) for use in Python (SciPy).
> 
> I am experiencing some trouble with RasterBand.ReadAsArray.
> 
> My python code:
> 
> import osgeo.gdal as gdal
> 
> class RasterReaderWriter:
>     def __init__(self,  raster):
>         self.raster = raster
>         self.tileWidth =1024
>         self.tileHeight = 1024
>         self.tileNum = 0
> 
>     def setTileSize(self,  width,  height):
>         self.tileWidth =width
>         self.tileHeight = height
> 
>     def resetIterator(self):
>         self.tileNum = 0
> 
>     def readNextTile(self):
>         tileRaster,  offsetX,  offsetY,  width,  height  =
> self.readTile(self.tileNum)
>         self.tileNum = self.tileNum + 1
>         return tileRaster,  offsetX,  offsetY,  width,  height
> 
>     def readTile(self,  tileNum):
>         tilesInWidth = self.raster.XSize / self.tileWidth + 1
>         offsetX = tileNum % tilesInWidth * self.tileWidth
>         offsetY = tileNum / tilesInWidth * self.tileHeight
>         width = min(self.tileWidth,  self.raster.XSize - offsetX)
>         height = min(self.tileHeight,  self.raster.YSize - offsetY)
>         print offsetX,  offsetY,  width,  height
>         tileRaster = self.raster.ReadAsArray(offsetX,  offsetY, width,
> height)
>         return tileRaster,  offsetX,  offsetY,  width,  height
> 
> 
> 
> 
> reader = RasterReaderWriter(gdal.Open(iFilename).GetRasterBand(1))
> print reader.raster.XSize
> print reader.raster.YSize
> tile, offsetX, offsetY, width, height = reader.readNextTile()
> 
> Before the call to readNextTile() the raster XSize and YSize is correct.
> After the call the raster seems to have been corrupted as the XSize and
> YSize have invalid values.
> 
> Any help would be appreciated!
> 
> Riaan
From woodbri at swoodbridge.com  Fri Sep  3 14:12:51 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Sep  3 14:15:10 2010
Subject: [gdal-dev] Need help if OGR C-API
In-Reply-To: <201009031943.11264.even.rouault@mines-paris.org>
References: <4C812644.4060809@swoodbridge.com>
	<201009031943.11264.even.rouault@mines-paris.org>
Message-ID: <4C813AA3.4060504@swoodbridge.com>

Even,

Here is my test program:

$ cat testogr.c
#include "ogr_api.h"

int main() {
     OGRDataSourceH hDSin;
     OGRLayerH hLayerIn;
     OGRFeatureDefnH hFDefnIn;
     OGRwkbGeometryType layerGeomType;

     OGRRegisterAll();

     hDSin = OGROpen( "/u/data/routeloops-v2/25/25017/Streets.shp", 
FALSE, NULL );
     hLayerIn = OGR_DS_GetLayerByName( hDSin, "Streets" );

     hFDefnIn = OGR_L_GetLayerDefn( hLayerIn );
     layerGeomType = OGR_FD_GetGeomType( hFDefnIn );
     printf("GeometryType: %s\n", OGRGeometryTypeToName( layerGeomType ));

     OGR_FD_Release( hFDefnIn );
     OGR_DS_Destroy( hDSin );
}

$ gcc -g -o testogr testogr.c  -I/usr/local/include/gdal -lgdal -lm

It reports GeometryType correctly and then segvs :(

woodbri@mappy:~/work$ gdb ./testogr
GNU gdb 6.8-debian
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later 
<http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu"...
(gdb) run
Starting program: /home/woodbri/work/testogr
[Thread debugging using libthread_db enabled]
warning: Lowest section in /usr/lib/libicudata.so.38 is .hash at 
0000000000000120
GeometryType: Line String
[New Thread 0x7f361a0bc710 (LWP 30585)]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0x7f361a0bc710 (LWP 30585)]
0x0000000000000031 in ?? ()
(gdb) bt
#0  0x0000000000000031 in ?? ()
#1  0x00007f3619a2f190 in ~OGRShapeLayer (this=0x605a40)
     at ogrshapelayer.cpp:105
#2  0x00007f3619a2c63f in ~OGRShapeDataSource (this=0x604330)
     at ogrshapedatasource.cpp:62
#3  0x0000000000400958 in main () at testogr.c:19
From even.rouault at mines-paris.org  Fri Sep  3 14:20:55 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep  3 14:20:51 2010
Subject: [gdal-dev] Need help if OGR C-API
In-Reply-To: <4C813AA3.4060504@swoodbridge.com>
References: <4C812644.4060809@swoodbridge.com>
	<201009031943.11264.even.rouault@mines-paris.org>
	<4C813AA3.4060504@swoodbridge.com>
Message-ID: <201009032020.55370.even.rouault@mines-paris.org>

Stephen

did you read : 
http://gdal.org/ogr/ogr__api_8h.html#7b67ea4ab5892c6720460dc7f66eca2d ?

You'll know the cause of the crash afterwards ;-)

Le vendredi 03 septembre 2010 20:12:51, Stephen Woodbridge a ?crit :
> Even,
> 
> Here is my test program:
> 
> $ cat testogr.c
> #include "ogr_api.h"
> 
> int main() {
>      OGRDataSourceH hDSin;
>      OGRLayerH hLayerIn;
>      OGRFeatureDefnH hFDefnIn;
>      OGRwkbGeometryType layerGeomType;
> 
>      OGRRegisterAll();
> 
>      hDSin = OGROpen( "/u/data/routeloops-v2/25/25017/Streets.shp",
> FALSE, NULL );
>      hLayerIn = OGR_DS_GetLayerByName( hDSin, "Streets" );
> 
>      hFDefnIn = OGR_L_GetLayerDefn( hLayerIn );
>      layerGeomType = OGR_FD_GetGeomType( hFDefnIn );
>      printf("GeometryType: %s\n", OGRGeometryTypeToName( layerGeomType ));
> 
>      OGR_FD_Release( hFDefnIn );
>      OGR_DS_Destroy( hDSin );
> }
> 
> $ gcc -g -o testogr testogr.c  -I/usr/local/include/gdal -lgdal -lm
> 
> It reports GeometryType correctly and then segvs :(
> 
> woodbri@mappy:~/work$ gdb ./testogr
> GNU gdb 6.8-debian
> Copyright (C) 2008 Free Software Foundation, Inc.
> License GPLv3+: GNU GPL version 3 or later
> <http://gnu.org/licenses/gpl.html>
> This is free software: you are free to change and redistribute it.
> There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
> and "show warranty" for details.
> This GDB was configured as "x86_64-linux-gnu"...
> (gdb) run
> Starting program: /home/woodbri/work/testogr
> [Thread debugging using libthread_db enabled]
> warning: Lowest section in /usr/lib/libicudata.so.38 is .hash at
> 0000000000000120
> GeometryType: Line String
> [New Thread 0x7f361a0bc710 (LWP 30585)]
> 
> Program received signal SIGSEGV, Segmentation fault.
> [Switching to Thread 0x7f361a0bc710 (LWP 30585)]
> 0x0000000000000031 in ?? ()
> (gdb) bt
> #0  0x0000000000000031 in ?? ()
> #1  0x00007f3619a2f190 in ~OGRShapeLayer (this=0x605a40)
>      at ogrshapelayer.cpp:105
> #2  0x00007f3619a2c63f in ~OGRShapeDataSource (this=0x604330)
>      at ogrshapedatasource.cpp:62
> #3  0x0000000000400958 in main () at testogr.c:19
From woodbri at swoodbridge.com  Fri Sep  3 23:17:38 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Sep  3 23:19:07 2010
Subject: [gdal-dev] Need help if OGR C-API (Resolved)
In-Reply-To: <201009032020.55370.even.rouault@mines-paris.org>
References: <4C812644.4060809@swoodbridge.com>
	<201009031943.11264.even.rouault@mines-paris.org>
	<4C813AA3.4060504@swoodbridge.com>
	<201009032020.55370.even.rouault@mines-paris.org>
Message-ID: <4C81BA52.5040208@swoodbridge.com>

Thank you, still learning my way around things.

So after copying 90% of the my not working source code into the test 
program and it worked there, it finally dawned on me to check the 
Makefile. Duh! while I had removed all the shapelib calls from the 
source code, I forgot to check the link line to remove adding -lshp 
which apparently was causing the bogus behavior. Cleaned that up and 
things started working as expected.

Thanks for all the help guys. It is very much appreciated.

-Steve

On 9/3/2010 2:20 PM, Even Rouault wrote:
> Stephen
>
> did you read :
> http://gdal.org/ogr/ogr__api_8h.html#7b67ea4ab5892c6720460dc7f66eca2d ?
>
> You'll know the cause of the crash afterwards ;-)
>
> Le vendredi 03 septembre 2010 20:12:51, Stephen Woodbridge a ?crit :
>> Even,
>>
>> Here is my test program:
>>
>> $ cat testogr.c
>> #include "ogr_api.h"
>>
>> int main() {
>>       OGRDataSourceH hDSin;
>>       OGRLayerH hLayerIn;
>>       OGRFeatureDefnH hFDefnIn;
>>       OGRwkbGeometryType layerGeomType;
>>
>>       OGRRegisterAll();
>>
>>       hDSin = OGROpen( "/u/data/routeloops-v2/25/25017/Streets.shp",
>> FALSE, NULL );
>>       hLayerIn = OGR_DS_GetLayerByName( hDSin, "Streets" );
>>
>>       hFDefnIn = OGR_L_GetLayerDefn( hLayerIn );
>>       layerGeomType = OGR_FD_GetGeomType( hFDefnIn );
>>       printf("GeometryType: %s\n", OGRGeometryTypeToName( layerGeomType ));
>>
>>       OGR_FD_Release( hFDefnIn );
>>       OGR_DS_Destroy( hDSin );
>> }
>>
>> $ gcc -g -o testogr testogr.c  -I/usr/local/include/gdal -lgdal -lm
>>
>> It reports GeometryType correctly and then segvs :(
>>
>> woodbri@mappy:~/work$ gdb ./testogr
>> GNU gdb 6.8-debian
>> Copyright (C) 2008 Free Software Foundation, Inc.
>> License GPLv3+: GNU GPL version 3 or later
>> <http://gnu.org/licenses/gpl.html>
>> This is free software: you are free to change and redistribute it.
>> There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
>> and "show warranty" for details.
>> This GDB was configured as "x86_64-linux-gnu"...
>> (gdb) run
>> Starting program: /home/woodbri/work/testogr
>> [Thread debugging using libthread_db enabled]
>> warning: Lowest section in /usr/lib/libicudata.so.38 is .hash at
>> 0000000000000120
>> GeometryType: Line String
>> [New Thread 0x7f361a0bc710 (LWP 30585)]
>>
>> Program received signal SIGSEGV, Segmentation fault.
>> [Switching to Thread 0x7f361a0bc710 (LWP 30585)]
>> 0x0000000000000031 in ?? ()
>> (gdb) bt
>> #0  0x0000000000000031 in ?? ()
>> #1  0x00007f3619a2f190 in ~OGRShapeLayer (this=0x605a40)
>>       at ogrshapelayer.cpp:105
>> #2  0x00007f3619a2c63f in ~OGRShapeDataSource (this=0x604330)
>>       at ogrshapedatasource.cpp:62
>> #3  0x0000000000400958 in main () at testogr.c:19

From even.rouault at mines-paris.org  Sat Sep  4 04:55:31 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Sep  4 04:55:41 2010
Subject: [gdal-dev] Need help if OGR C-API (Resolved)
In-Reply-To: <4C81BA52.5040208@swoodbridge.com>
References: <4C812644.4060809@swoodbridge.com>
	<201009032020.55370.even.rouault@mines-paris.org>
	<4C81BA52.5040208@swoodbridge.com>
Message-ID: <201009041055.31368.even.rouault@mines-paris.org>

Ah ok, but I wasn't refering to that. I meant that you shouldn't do 
OGR_FD_Release( hFDefnIn ) on a field definition returned by 
OGR_L_GetLayerDefn(), otherwise you'll get into memory corruption issues.

Le samedi 04 septembre 2010 05:17:38, Stephen Woodbridge a ?crit :
> Thank you, still learning my way around things.
> 
> So after copying 90% of the my not working source code into the test
> program and it worked there, it finally dawned on me to check the
> Makefile. Duh! while I had removed all the shapelib calls from the
> source code, I forgot to check the link line to remove adding -lshp
> which apparently was causing the bogus behavior. Cleaned that up and
> things started working as expected.
> 
> Thanks for all the help guys. It is very much appreciated.
> 
> -Steve
> 
> On 9/3/2010 2:20 PM, Even Rouault wrote:
> > Stephen
> > 
> > did you read :
> > http://gdal.org/ogr/ogr__api_8h.html#7b67ea4ab5892c6720460dc7f66eca2d ?
> > 
> > You'll know the cause of the crash afterwards ;-)
> > 
> > Le vendredi 03 septembre 2010 20:12:51, Stephen Woodbridge a ?crit :
> >> Even,
> >> 
> >> Here is my test program:
> >> 
> >> $ cat testogr.c
> >> #include "ogr_api.h"
> >> 
> >> int main() {
> >> 
> >>       OGRDataSourceH hDSin;
> >>       OGRLayerH hLayerIn;
> >>       OGRFeatureDefnH hFDefnIn;
> >>       OGRwkbGeometryType layerGeomType;
> >>       
> >>       OGRRegisterAll();
> >>       
> >>       hDSin = OGROpen( "/u/data/routeloops-v2/25/25017/Streets.shp",
> >> 
> >> FALSE, NULL );
> >> 
> >>       hLayerIn = OGR_DS_GetLayerByName( hDSin, "Streets" );
> >>       
> >>       hFDefnIn = OGR_L_GetLayerDefn( hLayerIn );
> >>       layerGeomType = OGR_FD_GetGeomType( hFDefnIn );
> >>       printf("GeometryType: %s\n", OGRGeometryTypeToName( layerGeomType
> >>       ));
> >>       
> >>       OGR_FD_Release( hFDefnIn );
> >>       OGR_DS_Destroy( hDSin );
> >> 
> >> }
> >> 
> >> $ gcc -g -o testogr testogr.c  -I/usr/local/include/gdal -lgdal -lm
> >> 
> >> It reports GeometryType correctly and then segvs :(
> >> 
> >> woodbri@mappy:~/work$ gdb ./testogr
> >> GNU gdb 6.8-debian
> >> Copyright (C) 2008 Free Software Foundation, Inc.
> >> License GPLv3+: GNU GPL version 3 or later
> >> <http://gnu.org/licenses/gpl.html>
> >> This is free software: you are free to change and redistribute it.
> >> There is NO WARRANTY, to the extent permitted by law.  Type "show
> >> copying" and "show warranty" for details.
> >> This GDB was configured as "x86_64-linux-gnu"...
> >> (gdb) run
> >> Starting program: /home/woodbri/work/testogr
> >> [Thread debugging using libthread_db enabled]
> >> warning: Lowest section in /usr/lib/libicudata.so.38 is .hash at
> >> 0000000000000120
> >> GeometryType: Line String
> >> [New Thread 0x7f361a0bc710 (LWP 30585)]
> >> 
> >> Program received signal SIGSEGV, Segmentation fault.
> >> [Switching to Thread 0x7f361a0bc710 (LWP 30585)]
> >> 0x0000000000000031 in ?? ()
> >> (gdb) bt
> >> #0  0x0000000000000031 in ?? ()
> >> #1  0x00007f3619a2f190 in ~OGRShapeLayer (this=0x605a40)
> >> 
> >>       at ogrshapelayer.cpp:105
> >> 
> >> #2  0x00007f3619a2c63f in ~OGRShapeDataSource (this=0x604330)
> >> 
> >>       at ogrshapedatasource.cpp:62
> >> 
> >> #3  0x0000000000400958 in main () at testogr.c:19
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From benjamin.r.welton at wmich.edu  Sat Sep  4 16:16:40 2010
From: benjamin.r.welton at wmich.edu (Benjamin Welton)
Date: Sat Sep  4 16:21:46 2010
Subject: [gdal-dev] Reading MXD files
Message-ID: <4C82A928.1070602@wmich.edu>

  Hey All,

     Im wondering if there is any way to read MXD files in ether gdal or 
some other python based extension. I'm not looking for the raster data 
for the files only the filename/SDE name of the layer and the name of 
the layer in the MXD file. Is there any easy way to pull this 
information out of the MXD?

Thanks,
Ben
From pcorti at gmail.com  Sat Sep  4 17:44:16 2010
From: pcorti at gmail.com (Paolo Corti)
Date: Sat Sep  4 17:44:09 2010
Subject: [gdal-dev] Reading MXD files
In-Reply-To: <4C82A928.1070602@wmich.edu>
References: <4C82A928.1070602@wmich.edu>
Message-ID: <6727826448517379503@unknownmsgid>

>    Im wondering if there is any way to read MXD files in ether gdal or some other python based extension. I'm not looking for the raster data for the files only the filename/SDE name of the layer and the name of the layer in the MXD file. Is there any easy way to pull this information out of the MXD?
>
>

I think your only option is to use the ArcGis Python library, but you
need a license for doing so

Paolo
From benjamin.r.welton at wmich.edu  Sat Sep  4 19:30:13 2010
From: benjamin.r.welton at wmich.edu (Benjamin Welton)
Date: Sat Sep  4 19:30:18 2010
Subject: [gdal-dev] Reading MXD files
In-Reply-To: <6727826448517379503@unknownmsgid>
References: <4C82A928.1070602@wmich.edu> <6727826448517379503@unknownmsgid>
Message-ID: <4C82D685.9060401@wmich.edu>

  Can you do that with ArcGIS 9.3? i was under the impression from the 
doc's/forums that it's only available in the arcpy package in 10.

Ben


On 9/4/2010 5:44 PM, Paolo Corti wrote:
>>     Im wondering if there is any way to read MXD files in ether gdal or some other python based extension. I'm not looking for the raster data for the files only the filename/SDE name of the layer and the name of the layer in the MXD file. Is there any easy way to pull this information out of the MXD?
>>
>>
> I think your only option is to use the ArcGis Python library, but you
> need a license for doing so
>
> Paolo

From ivan.lucena at pmldnet.com  Fri Sep  3 20:36:06 2010
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Sat Sep  4 20:38:45 2010
Subject: [gdal-dev] Reading MXD files
In-Reply-To: <4C82D685.9060401@wmich.edu>
References: <4C82A928.1070602@wmich.edu> <6727826448517379503@unknownmsgid>
	<4C82D685.9060401@wmich.edu>
Message-ID: <4C819476.4000901@pmldnet.com>

Ben,

There are some interfaces on the ArcObject package that let you not exactly *ready* the MXD but you 
can get some useful information from the document. I believe that you can access the ArcObject COM 
API in ArcGIS 10 or 9 by using the win32com.client.Dispatch() the same way as you can load the 
"esriGeoprocessing.GpDispatch.1". You can use the tools on PythonWin to browse to all the available 
ArcGIS components.

 >>> import win32com.client
 >>> arcobj = win32com.client.Dipath("< What should goes here ? >")

It is only a wild guess, I am not even running Windows now to do a quick test, but I hope it would 
help you.

Ivan

Benjamin Welton wrote:
>  Can you do that with ArcGIS 9.3? i was under the impression from the 
> doc's/forums that it's only available in the arcpy package in 10.
> 
> Ben
> 
> 
> On 9/4/2010 5:44 PM, Paolo Corti wrote:
>>>     Im wondering if there is any way to read MXD files in ether gdal 
>>> or some other python based extension. I'm not looking for the raster 
>>> data for the files only the filename/SDE name of the layer and the 
>>> name of the layer in the MXD file. Is there any easy way to pull this 
>>> information out of the MXD?
>>>
>>>
>> I think your only option is to use the ArcGis Python library, but you
>> need a license for doing so
>>
>> Paolo
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From gregcorradini at gmail.com  Sun Sep  5 19:38:14 2010
From: gregcorradini at gmail.com (Greg Corradini)
Date: Sun Sep  5 19:38:16 2010
Subject: [gdal-dev] Unable to find driver `PostgreSQL'
Message-ID: <AANLkTimM+jJ2-oT9zQMBvjBw47J93rhznYa_mpKm_RgA@mail.gmail.com>

So i've run variations on this ogr2ogr command a lot over the past few weeks
never with any problems. But recently I get the following  error:

ogr2ogr -f "PostgreSQL" PG:"host='localhost' user='postgres'
password='postgres' dbname='gisdb'" states.shp -nln "states"
Unable to find driver `PostgreSQL'.
The following drivers are available:
<List of Drivers>

I can't figure out what's going on. The only thing that has changed since I
last ran these commands is that I destroyed my original database.I'm running
Ubuntu 9.0.

Any ideas for how to troubleshoot this?

Thanks
Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100905/35c9238b/attachment.html
From benjamin.r.welton at wmich.edu  Mon Sep  6 00:09:02 2010
From: benjamin.r.welton at wmich.edu (Benjamin Welton)
Date: Mon Sep  6 00:09:23 2010
Subject: [gdal-dev] Reading MXD files
In-Reply-To: <4C819476.4000901@pmldnet.com>
References: <4C82A928.1070602@wmich.edu> <6727826448517379503@unknownmsgid>
	<4C82D685.9060401@wmich.edu> <4C819476.4000901@pmldnet.com>
Message-ID: <4C84695E.4090908@wmich.edu>

  Hey Ivan,

     Yeah that's what im thinking that id have to access the COM API in 
ArcGIS 9 to get this accomplished. I don't actually need to read the 
data in the layers that are included in the document only the name of 
the layer in the document and the corresponding file/database name for 
the layer.  Im going to give the client dispatcher a try and see what i 
can hack up to get this done.

     Right now im thinking worst case scenario i have to write something 
in java to do the actual reading of the MXD files until we make the 
upgrade to ArcGIS 10 (which has the ArcPY module which can read MXD's). 
Id like to avoid using java if possible to keep the code all python :-P.

Thanks for your help,
Ben



On 9/3/2010 8:36 PM, Lucena, Ivan wrote:
> Ben,
>
> There are some interfaces on the ArcObject package that let you not 
> exactly *ready* the MXD but you can get some useful information from 
> the document. I believe that you can access the ArcObject COM API in 
> ArcGIS 10 or 9 by using the win32com.client.Dispatch() the same way as 
> you can load the "esriGeoprocessing.GpDispatch.1". You can use the 
> tools on PythonWin to browse to all the available ArcGIS components.
>
> >>> import win32com.client
> >>> arcobj = win32com.client.Dipath("< What should goes here ? >")
>
> It is only a wild guess, I am not even running Windows now to do a 
> quick test, but I hope it would help you.
>
> Ivan
>
> Benjamin Welton wrote:
>>  Can you do that with ArcGIS 9.3? i was under the impression from the 
>> doc's/forums that it's only available in the arcpy package in 10.
>>
>> Ben
>>
>>
>> On 9/4/2010 5:44 PM, Paolo Corti wrote:
>>>>     Im wondering if there is any way to read MXD files in ether 
>>>> gdal or some other python based extension. I'm not looking for the 
>>>> raster data for the files only the filename/SDE name of the layer 
>>>> and the name of the layer in the MXD file. Is there any easy way to 
>>>> pull this information out of the MXD?
>>>>
>>>>
>>> I think your only option is to use the ArcGis Python library, but you
>>> need a license for doing so
>>>
>>> Paolo
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>

From riaanvddool at gmail.com  Mon Sep  6 03:33:35 2010
From: riaanvddool at gmail.com (Riaan van den Dool)
Date: Mon Sep  6 03:33:38 2010
Subject: [gdal-dev] ReadAsArray misbehaving...
In-Reply-To: <201009031952.26892.even.rouault@mines-paris.org>
References: <AANLkTikaOQY1q5ttGUV5Ca5-TskO4DBMTic+g82EQsQR@mail.gmail.com>
	<201009031952.26892.even.rouault@mines-paris.org>
Message-ID: <AANLkTimnN7J3-fr4wm=XcnGZo+v=Rrzpk4bnWcqbjS_3@mail.gmail.com>

Even

Thanks for pointing that out. I have now been able to solve that problem by
keeping the dataset in scope...

Riaan

On Fri, Sep 3, 2010 at 7:52 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Riann,
>
> hum, I think you've hit a classical problem with the use of the GDAL python
> bindings. The root of your problem is likely the following line:
>
>  reader = RasterReaderWriter(gdal.Open(iFilename).GetRasterBand(1))
>
> Currently the GDAL python bindings do a poor job with life cycle management
> of
> native underlying objects. When chaining the calls, some objects can go
> out-
> of-scope and are then destroyed. Specifically, the band object doesn't keep
> the
> dataset object alive, so the RasterReaderWriter() constructor will get a
> band
> object with a ghost dataset. This can typically result in application
> crashes,
> or as you've observed various corruptions.
>
> All in all, I'd advise you rewriting the above as :
>
> ds = gdal.Open(iFilename)
> band = ds.GetRasterBand(1)
> reader =  RasterReaderWriter(band)
> ....
> .....
> ds = None # we can drop the reference on the dataset when we don't need to
> use
> the reader.
>
> An alternative if you don't want to keep the reference on the dataset in
> the
> calling code, is to pass both the dataset and the band to
> RasterReaderWrite()
> so that it can stores them in member variables of the class.
>
> Best regards,
>
> Even
>
> Le vendredi 03 septembre 2010 12:39:09, Riaan van den Dool a ?crit :
> > I have recently started a new open-source project that will use gdal
> > extensively, named scikits.eartho.
> >
> > The vision is to implement some advanced algorithms and ideas that we
> > develop and work with at the South African Satellite Applications Centre
> > (SAC) for use in Python (SciPy).
> >
> > I am experiencing some trouble with RasterBand.ReadAsArray.
> >
> > My python code:
> >
> > import osgeo.gdal as gdal
> >
> > class RasterReaderWriter:
> >     def __init__(self,  raster):
> >         self.raster = raster
> >         self.tileWidth =1024
> >         self.tileHeight = 1024
> >         self.tileNum = 0
> >
> >     def setTileSize(self,  width,  height):
> >         self.tileWidth =width
> >         self.tileHeight = height
> >
> >     def resetIterator(self):
> >         self.tileNum = 0
> >
> >     def readNextTile(self):
> >         tileRaster,  offsetX,  offsetY,  width,  height  =
> > self.readTile(self.tileNum)
> >         self.tileNum = self.tileNum + 1
> >         return tileRaster,  offsetX,  offsetY,  width,  height
> >
> >     def readTile(self,  tileNum):
> >         tilesInWidth = self.raster.XSize / self.tileWidth + 1
> >         offsetX = tileNum % tilesInWidth * self.tileWidth
> >         offsetY = tileNum / tilesInWidth * self.tileHeight
> >         width = min(self.tileWidth,  self.raster.XSize - offsetX)
> >         height = min(self.tileHeight,  self.raster.YSize - offsetY)
> >         print offsetX,  offsetY,  width,  height
> >         tileRaster = self.raster.ReadAsArray(offsetX,  offsetY, width,
> > height)
> >         return tileRaster,  offsetX,  offsetY,  width,  height
> >
> >
> >
> >
> > reader = RasterReaderWriter(gdal.Open(iFilename).GetRasterBand(1))
> > print reader.raster.XSize
> > print reader.raster.YSize
> > tile, offsetX, offsetY, width, height = reader.readNextTile()
> >
> > Before the call to readNextTile() the raster XSize and YSize is correct.
> > After the call the raster seems to have been corrupted as the XSize and
> > YSize have invalid values.
> >
> > Any help would be appreciated!
> >
> > Riaan
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100906/50ea8951/attachment.html
From terrasi.carmelo at gmail.com  Mon Sep  6 11:25:31 2010
From: terrasi.carmelo at gmail.com (Carmelo Terrasi)
Date: Mon Sep  6 11:25:34 2010
Subject: [gdal-dev] Extract data from a.dem file
Message-ID: <AANLkTinqd_H1LT1kNr8=ZZ_b-5pcbEPDT0U0Bex+fnez@mail.gmail.com>

Hello everybody,
I'm trying to figure out how to get elevation from a .dem file.

I opened the file:
...
pointerToDataSet=(GDALDataset*) GDALOpen("myFile.dem", GA_ReadOnly);
...


So I caught a grid as a 371x371 matrix, but I can read only the first line,
so the first 371 elevations... the error is: *...Access window out of range
in RasterIO()...*

I mean If I put coordinates like (*0*, *somethingelse*) where 0<*
somethingelse<*370:
...
pointerToBand->RasterIO( GF_Read, 0, *somethingelse*, nXSize, 1, elevation,
nXSize, 1,  GDT_Float32, 0, 0 );
...
that's ok



Instead if I put coordinates (*x*, *somethingelse*) where
0<*somethingelse*<370 and
0<*x*:
...
pointerToBand->RasterIO( GF_Read, *x*, *somethingelse*
, nXSize, 1, elevation, nXSize, 1,  GDT_Float32, 0, 0 );
...
that doesn't work :(

I opened myFile.dem with a text editor and I've seen the whole matrix as a
linecode values...
There's something I cannot understand obviously, any tips would be really
appreciated, thanks in advance,
Regards
Carmelo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100906/a8ae4bfc/attachment.html
From antonio.rocha at deimos.com.pt  Mon Sep  6 12:08:14 2010
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Mon Sep  6 12:08:18 2010
Subject: [gdal-dev] Create a Google Earth overlay based on Geotiff
Message-ID: <4C8511EE.2030401@deimos.com.pt>

Greetings

I have a goerreferenced Geotiff image, already in EPSG:4326, and I need 
to automatically create an KML with an overlay from this geotiff. Is it 
possible using GDAL? If so, how can I do that? Or can anyone indicate me 
an Wiki that explain this?
I have found this link: 
http://code.google.com/apis/kml/articles/raster.html but it creates 
empty doc.kml

Thanks

Antonio


__________ Information from ESET NOD32 Antivirus, version of virus signature database 5428 (20100906) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From chaitanya.ch at gmail.com  Mon Sep  6 12:35:40 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Sep  6 12:35:43 2010
Subject: [gdal-dev] Create a Google Earth overlay based on Geotiff
In-Reply-To: <4C8511EE.2030401@deimos.com.pt>
References: <4C8511EE.2030401@deimos.com.pt>
Message-ID: <AANLkTik44cLioagjDi7CtT0wPTdtCCG+HFon=Hahezbx@mail.gmail.com>

Ant?nio,

Refer to http://www.gdal.org/gdal2tiles.html and
http://www.gdal.org/gdal_utilities.html

2010/9/6 Ant?nio Rocha <antonio.rocha@deimos.com.pt>

> Greetings
>
> I have a goerreferenced Geotiff image, already in EPSG:4326, and I need to
> automatically create an KML with an overlay from this geotiff. Is it
> possible using GDAL? If so, how can I do that? Or can anyone indicate me an
> Wiki that explain this?
> I have found this link:
> http://code.google.com/apis/kml/articles/raster.html but it creates empty
> doc.kml
>
> Thanks
>
> Antonio
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 5428 (20100906) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100906/c6a63f87/attachment.html
From antonio.rocha at deimos.com.pt  Mon Sep  6 13:07:59 2010
From: antonio.rocha at deimos.com.pt (=?UTF-8?B?QW50w7NuaW8gUm9jaGE=?=)
Date: Mon Sep  6 13:08:02 2010
Subject: [gdal-dev] Create a Google Earth overlay based on Geotiff
In-Reply-To: <AANLkTik44cLioagjDi7CtT0wPTdtCCG+HFon=Hahezbx@mail.gmail.com>
References: <4C8511EE.2030401@deimos.com.pt>
	<AANLkTik44cLioagjDi7CtT0wPTdtCCG+HFon=Hahezbx@mail.gmail.com>
Message-ID: <4C851FEF.5070902@deimos.com.pt>

Hi there
It worked (my problem was that I was using gdal_translate instead of 
gdalwarp to reproject the images to EPSG:4326).

But now I have 1 little question:
When I do the reprojection of the image from my UTM to EPSG:4326 It 
creates a black-NO VALUE area around the image due to projection. In 
order to auxiliate the visualization is it possible to turn this no-data 
into transparent?

Chaitanya kumar CH wrote:
> Ant?nio,
>
> Refer to http://www.gdal.org/gdal2tiles.html and 
> http://www.gdal.org/gdal_utilities.html
>
> 2010/9/6 Ant?nio Rocha <antonio.rocha@deimos.com.pt 
> <mailto:antonio.rocha@deimos.com.pt>>
>
>     Greetings
>
>     I have a goerreferenced Geotiff image, already in EPSG:4326, and I
>     need to automatically create an KML with an overlay from this
>     geotiff. Is it possible using GDAL? If so, how can I do that? Or
>     can anyone indicate me an Wiki that explain this?
>     I have found this link:
>     http://code.google.com/apis/kml/articles/raster.html but it
>     creates empty doc.kml
>
>     Thanks
>
>     Antonio
>
>
>     __________ Information from ESET NOD32 Antivirus, version of virus
>     signature database 5428 (20100906) __________
>
>     The message was checked by ESET NOD32 Antivirus.
>
>     http://www.eset.com
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E



__________ Information from ESET NOD32 Antivirus, version of virus signature database 5428 (20100906) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From even.rouault at mines-paris.org  Mon Sep  6 13:30:26 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Sep  6 13:30:35 2010
Subject: [gdal-dev] Extract data from a.dem file
In-Reply-To: <AANLkTinqd_H1LT1kNr8=ZZ_b-5pcbEPDT0U0Bex+fnez@mail.gmail.com>
References: <AANLkTinqd_H1LT1kNr8=ZZ_b-5pcbEPDT0U0Bex+fnez@mail.gmail.com>
Message-ID: <201009061930.26971.even.rouault@mines-paris.org>

Yes , what you see is expected.

The prototype of RasterIO() is :

RasterIO( flag, x, y, width, height, buffer, buffer_width, buffer_height, 
gdal_type, pixel_offset, line_offset)

so that means that you ask the extraction of the window [x, x + with-1] x [y, 
y + height -1] to be stored in a buffer_width x buffer_height buffer.

so if you set x to be non-null, you cannot ask for the full XSize to be read, 
the maximum value for width is XSize - x.

See http://gdal.org/classGDALRasterBand.html#5497e8d29e743ee9177202cb3f61c3c7 
for the full reference.

Le lundi 06 septembre 2010 17:25:31, Carmelo Terrasi a ?crit :
> Hello everybody,
> I'm trying to figure out how to get elevation from a .dem file.
> 
> I opened the file:
> ...
> pointerToDataSet=(GDALDataset*) GDALOpen("myFile.dem", GA_ReadOnly);
> ...
> 
> 
> So I caught a grid as a 371x371 matrix, but I can read only the first line,
> so the first 371 elevations... the error is: *...Access window out of range
> in RasterIO()...*
> 
> I mean If I put coordinates like (*0*, *somethingelse*) where 0<*
> somethingelse<*370:
> ...
> pointerToBand->RasterIO( GF_Read, 0, *somethingelse*, nXSize, 1, elevation,
> nXSize, 1,  GDT_Float32, 0, 0 );
> ...
> that's ok
> 
> 
> 
> Instead if I put coordinates (*x*, *somethingelse*) where
> 0<*somethingelse*<370 and
> 0<*x*:
> ...
> pointerToBand->RasterIO( GF_Read, *x*, *somethingelse*
> , nXSize, 1, elevation, nXSize, 1,  GDT_Float32, 0, 0 );
> ...
> that doesn't work :(
> 
> I opened myFile.dem with a text editor and I've seen the whole matrix as a
> linecode values...
> There's something I cannot understand obviously, any tips would be really
> appreciated, thanks in advance,
> Regards
> Carmelo
From even.rouault at mines-paris.org  Mon Sep  6 14:27:22 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Sep  6 14:27:29 2010
Subject: [gdal-dev] About new GDAL/OGR drivers
Message-ID: <201009062027.22693.even.rouault@mines-paris.org>

Hi all,

I've neglected to mention a few of the GDAL/OGR drivers that I have recently  
added into trunk since 1.7 release. For those that like doing early testing 
and write useful bug reports so that those new drivers are in shape for the 
1.8.0 release, here's a summary :

GDAL drivers :
* HF2/HFZ ( http://gdal.org/frmt_hf2.html ) : heightfield raster datasets that 
can be compressed. Read/write support.
* JP2OpenJPEG ( http://gdal.org/frmt_jp2openjpeg.html ) : another (the 5th!) 
JPEG2000 driver, based on the open-source OpenJpeg library (BSD-licenced). 
More potential than Jasper with big images, but depends on an (yet) unreleased 
development branch of OpenJpeg. Read/write support.
* XYZ ( http://gdal.org/frmt_xyz.html ) : to access simple gridded ASCII files. 
Read/write support.
* GeoPDF ( http://gdal.org/frmt_geopdf.html ) : to extract both georeferencing 
and rasterize PDF documents, that have georeferencing encoded in either of the 
2 current existing ways : the OGC GeoPDF encoding best practice (promoted by 
TerraGo), or according to the Adobe Supplement to ISO 32000. Read-only, based 
on poppler library (GPL-licenced)

OGR drivers :
* GPSBabel ( http://gdal.org/ogr/drv_gpsbabel.html ) : leverages the 
capabilities of the GPSBabel utility (GPL-licenced) to read/write many GPS file 
formats.
* OpenAir ( http://gdal.org/ogr/drv_openair.html ) and SUA ( 
http://gdal.org/ogr/drv_sua.html ) : 2 fairly equivalent and special-purpose 
drivers to read text files describing Special Use Airspaces.
* PDS ( http://gdal.org/ogr/drv_pds.html ) : another fairly specialized driver 
to extract tabular information from NASA PDS  (Planetary Data Systems) files
* PGDump ( http://gdal.org/ogr/drv_pgdump.html ) : I believe I alrealdy 
mentionned that one. A write-only driver to generate SQL dump files that can be 
later injected into a live PostgreSQL instance. More or less similar to 
PostGIS shp2pgsql utility
* WFS ( http://gdal.org/ogr/drv_wfs.html ) : a WFS/WFS-T client that can read 
and write OGC WFS 1.0.0 and 1.1.0 services.

The GML driver was also significantly upgraded, in particular to support more 
GML3 geometries, more complex documents with non-flat structures and various 
tweaks that help reading some GML application schemas (CityGML, AIXM) etc... 
For more details about that... and the work done by all the others GDAL 
contributors, you can have a look at the preliminary NEWS : 
http://trac.osgeo.org/gdal/browser/trunk/gdal/NEWS

How testing those new stuff ?
- Unix/Linux users : checkout GDAL svn trunk (or daily snapshot from 
http://gdal.org/daily/ ), configure, make, make install ;-)
- Windows users : build from source, or use for example Tamas Szekeres' daily 
builds at http://vbkto.dyndns.org/sdk/  (Note that those builds don't 
currently include JP2OpenJPEG and GeoPDF due to the external dependencies). I 
believe that gdal-dev in osgeo4w has also been recently updated with a 
1.8.0dev snapshot.

Have fun,

Even

From p.baumann at jacobs-university.de  Mon Sep  6 14:33:51 2010
From: p.baumann at jacobs-university.de (Peter Baumann)
Date: Mon Sep  6 14:34:00 2010
Subject: [gdal-dev] About new GDAL/OGR drivers
In-Reply-To: <201009062027.22693.even.rouault@mines-paris.org>
References: <201009062027.22693.even.rouault@mines-paris.org>
Message-ID: <4C85340F.5060105@jacobs-university.de>

...plus this GDAL driver:
* rasdaman raster database ( http://gdal.org/frmt_rasdaman.html ) : 
retrieval and processing of 2-D extracts from multi-dimensional raster 
data sets.

-Peter



On 09/06/2010 08:27 PM, Even Rouault wrote:
> Hi all,
>
> I've neglected to mention a few of the GDAL/OGR drivers that I have recently
> added into trunk since 1.7 release. For those that like doing early testing
> and write useful bug reports so that those new drivers are in shape for the
> 1.8.0 release, here's a summary :
>
> GDAL drivers :
> * HF2/HFZ ( http://gdal.org/frmt_hf2.html ) : heightfield raster datasets that
> can be compressed. Read/write support.
> * JP2OpenJPEG ( http://gdal.org/frmt_jp2openjpeg.html ) : another (the 5th!)
> JPEG2000 driver, based on the open-source OpenJpeg library (BSD-licenced).
> More potential than Jasper with big images, but depends on an (yet) unreleased
> development branch of OpenJpeg. Read/write support.
> * XYZ ( http://gdal.org/frmt_xyz.html ) : to access simple gridded ASCII files.
> Read/write support.
> * GeoPDF ( http://gdal.org/frmt_geopdf.html ) : to extract both georeferencing
> and rasterize PDF documents, that have georeferencing encoded in either of the
> 2 current existing ways : the OGC GeoPDF encoding best practice (promoted by
> TerraGo), or according to the Adobe Supplement to ISO 32000. Read-only, based
> on poppler library (GPL-licenced)
>
> OGR drivers :
> * GPSBabel ( http://gdal.org/ogr/drv_gpsbabel.html ) : leverages the
> capabilities of the GPSBabel utility (GPL-licenced) to read/write many GPS file
> formats.
> * OpenAir ( http://gdal.org/ogr/drv_openair.html ) and SUA (
> http://gdal.org/ogr/drv_sua.html ) : 2 fairly equivalent and special-purpose
> drivers to read text files describing Special Use Airspaces.
> * PDS ( http://gdal.org/ogr/drv_pds.html ) : another fairly specialized driver
> to extract tabular information from NASA PDS  (Planetary Data Systems) files
> * PGDump ( http://gdal.org/ogr/drv_pgdump.html ) : I believe I alrealdy
> mentionned that one. A write-only driver to generate SQL dump files that can be
> later injected into a live PostgreSQL instance. More or less similar to
> PostGIS shp2pgsql utility
> * WFS ( http://gdal.org/ogr/drv_wfs.html ) : a WFS/WFS-T client that can read
> and write OGC WFS 1.0.0 and 1.1.0 services.
>
> The GML driver was also significantly upgraded, in particular to support more
> GML3 geometries, more complex documents with non-flat structures and various
> tweaks that help reading some GML application schemas (CityGML, AIXM) etc...
> For more details about that... and the work done by all the others GDAL
> contributors, you can have a look at the preliminary NEWS :
> http://trac.osgeo.org/gdal/browser/trunk/gdal/NEWS
>
> How testing those new stuff ?
> - Unix/Linux users : checkout GDAL svn trunk (or daily snapshot from
> http://gdal.org/daily/ ), configure, make, make install ;-)
> - Windows users : build from source, or use for example Tamas Szekeres' daily
> builds at http://vbkto.dyndns.org/sdk/  (Note that those builds don't
> currently include JP2OpenJPEG and GeoPDF due to the external dependencies). I
> believe that gdal-dev in osgeo4w has also been recently updated with a
> 1.8.0dev snapshot.
>
> Have fun,
>
> Even
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>    

-- 
Dr. Peter Baumann
  - Professor of Computer Science, Jacobs University Bremen
    www.faculty.jacobs-university.de/pbaumann
    mail: p.baumann@jacobs-university.de
    tel: +49-421-200-3178, fax: +49-421-200-493178
  - Executive Director, rasdaman GmbH Bremen (HRB 147737)
    www.rasdaman.com, mail: baumann@rasdaman.com
    tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
"Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 10xx)



From szekerest at gmail.com  Mon Sep  6 15:32:24 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Sep  6 15:32:26 2010
Subject: [gdal-dev] About new GDAL/OGR drivers
In-Reply-To: <201009062027.22693.even.rouault@mines-paris.org>
References: <201009062027.22693.even.rouault@mines-paris.org>
Message-ID: <AANLkTi=L-NvuXshiqXxe386U3x2RuhNX=K7YYrRBeXTW@mail.gmail.com>

And I'm about to include a new OGR MS SQL Spatial (R/W) driver in a couple
of days....

Tamas



2010/9/6 Even Rouault <even.rouault@mines-paris.org>

> Hi all,
>
> I've neglected to mention a few of the GDAL/OGR drivers that I have
> recently
> added into trunk since 1.7 release. For those that like doing early testing
> and write useful bug reports so that those new drivers are in shape for the
> 1.8.0 release, here's a summary :
>
> GDAL drivers :
> * HF2/HFZ ( http://gdal.org/frmt_hf2.html ) : heightfield raster datasets
> that
> can be compressed. Read/write support.
> * JP2OpenJPEG ( http://gdal.org/frmt_jp2openjpeg.html ) : another (the
> 5th!)
> JPEG2000 driver, based on the open-source OpenJpeg library (BSD-licenced).
> More potential than Jasper with big images, but depends on an (yet)
> unreleased
> development branch of OpenJpeg. Read/write support.
> * XYZ ( http://gdal.org/frmt_xyz.html ) : to access simple gridded ASCII
> files.
> Read/write support.
> * GeoPDF ( http://gdal.org/frmt_geopdf.html ) : to extract both
> georeferencing
> and rasterize PDF documents, that have georeferencing encoded in either of
> the
> 2 current existing ways : the OGC GeoPDF encoding best practice (promoted
> by
> TerraGo), or according to the Adobe Supplement to ISO 32000. Read-only,
> based
> on poppler library (GPL-licenced)
>
> OGR drivers :
> * GPSBabel ( http://gdal.org/ogr/drv_gpsbabel.html ) : leverages the
> capabilities of the GPSBabel utility (GPL-licenced) to read/write many GPS
> file
> formats.
> * OpenAir ( http://gdal.org/ogr/drv_openair.html ) and SUA (
> http://gdal.org/ogr/drv_sua.html ) : 2 fairly equivalent and
> special-purpose
> drivers to read text files describing Special Use Airspaces.
> * PDS ( http://gdal.org/ogr/drv_pds.html ) : another fairly specialized
> driver
> to extract tabular information from NASA PDS  (Planetary Data Systems)
> files
> * PGDump ( http://gdal.org/ogr/drv_pgdump.html ) : I believe I alrealdy
> mentionned that one. A write-only driver to generate SQL dump files that
> can be
> later injected into a live PostgreSQL instance. More or less similar to
> PostGIS shp2pgsql utility
> * WFS ( http://gdal.org/ogr/drv_wfs.html ) : a WFS/WFS-T client that can
> read
> and write OGC WFS 1.0.0 and 1.1.0 services.
>
> The GML driver was also significantly upgraded, in particular to support
> more
> GML3 geometries, more complex documents with non-flat structures and
> various
> tweaks that help reading some GML application schemas (CityGML, AIXM)
> etc...
> For more details about that... and the work done by all the others GDAL
> contributors, you can have a look at the preliminary NEWS :
> http://trac.osgeo.org/gdal/browser/trunk/gdal/NEWS
>
> How testing those new stuff ?
> - Unix/Linux users : checkout GDAL svn trunk (or daily snapshot from
> http://gdal.org/daily/ ), configure, make, make install ;-)
> - Windows users : build from source, or use for example Tamas Szekeres'
> daily
> builds at http://vbkto.dyndns.org/sdk/  (Note that those builds don't
> currently include JP2OpenJPEG and GeoPDF due to the external dependencies).
> I
> believe that gdal-dev in osgeo4w has also been recently updated with a
> 1.8.0dev snapshot.
>
> Have fun,
>
> Even
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100906/6a7e3af2/attachment-0001.html
From terrasi.carmelo at gmail.com  Tue Sep  7 03:40:31 2010
From: terrasi.carmelo at gmail.com (Carmelo Terrasi)
Date: Tue Sep  7 03:40:33 2010
Subject: [gdal-dev] Extract data from a.dem file
In-Reply-To: <201009061930.26971.even.rouault@mines-paris.org>
References: <AANLkTinqd_H1LT1kNr8=ZZ_b-5pcbEPDT0U0Bex+fnez@mail.gmail.com>
	<201009061930.26971.even.rouault@mines-paris.org>
Message-ID: <AANLkTikRuCy5KJEPYAMyTjh76SDJ+N4J5nLvNv-VPX-V@mail.gmail.com>

OK guys, I got it, very helpful!
Thank you so much

2010/9/6 Even Rouault <even.rouault@mines-paris.org>

> Yes , what you see is expected.
>
> The prototype of RasterIO() is :
>
> RasterIO( flag, x, y, width, height, buffer, buffer_width, buffer_height,
> gdal_type, pixel_offset, line_offset)
>
> so that means that you ask the extraction of the window [x, x + with-1] x
> [y,
> y + height -1] to be stored in a buffer_width x buffer_height buffer.
>
> so if you set x to be non-null, you cannot ask for the full XSize to be
> read,
> the maximum value for width is XSize - x.
>
> See
> http://gdal.org/classGDALRasterBand.html#5497e8d29e743ee9177202cb3f61c3c7
> for the full reference.
>
> Le lundi 06 septembre 2010 17:25:31, Carmelo Terrasi a ?crit :
> > Hello everybody,
> > I'm trying to figure out how to get elevation from a .dem file.
> >
> > I opened the file:
> > ...
> > pointerToDataSet=(GDALDataset*) GDALOpen("myFile.dem", GA_ReadOnly);
> > ...
> >
> >
> > So I caught a grid as a 371x371 matrix, but I can read only the first
> line,
> > so the first 371 elevations... the error is: *...Access window out of
> range
> > in RasterIO()...*
> >
> > I mean If I put coordinates like (*0*, *somethingelse*) where 0<*
> > somethingelse<*370:
> > ...
> > pointerToBand->RasterIO( GF_Read, 0, *somethingelse*, nXSize, 1,
> elevation,
> > nXSize, 1,  GDT_Float32, 0, 0 );
> > ...
> > that's ok
> >
> >
> >
> > Instead if I put coordinates (*x*, *somethingelse*) where
> > 0<*somethingelse*<370 and
> > 0<*x*:
> > ...
> > pointerToBand->RasterIO( GF_Read, *x*, *somethingelse*
> > , nXSize, 1, elevation, nXSize, 1,  GDT_Float32, 0, 0 );
> > ...
> > that doesn't work :(
> >
> > I opened myFile.dem with a text editor and I've seen the whole matrix as
> a
> > linecode values...
> > There's something I cannot understand obviously, any tips would be really
> > appreciated, thanks in advance,
> > Regards
> > Carmelo
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100907/d52d12fa/attachment.html
From anders.moe at geocap.no  Tue Sep  7 09:59:17 2010
From: anders.moe at geocap.no (Anders Moe)
Date: Tue Sep  7 09:59:19 2010
Subject: [gdal-dev] C++ interface to lists of coordinate systems in data dir
	?
Message-ID: <AANLkTinj=Zq0+bypLYRnaTAihvaBJnbNoEY8Nv=2jUO5@mail.gmail.com>

Hi everyone

Creating a C++ enduser app I was wondering if there is a programmatic way to
read the various datums/projections etc. files in the gdal data directory ?
I would like to present these in the interface if the user is to perform
conversion, etc.

Best regards,
Anders
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100907/8949db73/attachment.html
From SGONG at mdacorporation.com  Tue Sep  7 11:23:57 2010
From: SGONG at mdacorporation.com (Shawn Gong)
Date: Tue Sep  7 11:25:01 2010
Subject: [gdal-dev] Gdal nodata Complex value
Message-ID: <33584A1DEF4341428D15C1273466D32312DD0448@EVSYVR1.ds.mda.ca>

Hi list,

How do you set Gdal nodata in Complex? Would someone give me an example?


Thanks,
Shawn
From hobu.inc at gmail.com  Tue Sep  7 13:02:27 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Sep  7 13:02:33 2010
Subject: [gdal-dev] C++ interface to lists of coordinate systems in data
	dir ?
In-Reply-To: <AANLkTinj=Zq0+bypLYRnaTAihvaBJnbNoEY8Nv=2jUO5@mail.gmail.com>
References: <AANLkTinj=Zq0+bypLYRnaTAihvaBJnbNoEY8Nv=2jUO5@mail.gmail.com>
Message-ID: <3C07E27A-8A64-44A9-AA09-3176FD27AE15@gmail.com>


On Sep 7, 2010, at 8:59 AM, Anders Moe wrote:

> 
> Hi everyone
> 
> Creating a C++ enduser app I was wondering if there is a programmatic way to read the various datums/projections etc. files in the gdal data directory ? I would like to present these in the interface if the user is to perform conversion, etc. 

Anders,

There's no interfaces as far as I know.  People usually consume the files in the GDAL_DATA directory using their favorite text manipulation methods or extract the EPSG <http://www.epsg.org> data into some sort of SQL database like Postgres or sqlite for more complete manipulation capabilities.

Howard

From matt.wilkie at gov.yk.ca  Tue Sep  7 13:27:01 2010
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Sep  7 13:27:07 2010
Subject: [gdal-dev] Reading MXD files
In-Reply-To: <4C819476.4000901@pmldnet.com>
References: <4C82A928.1070602@wmich.edu>
	<6727826448517379503@unknownmsgid>	<4C82D685.9060401@wmich.edu>
	<4C819476.4000901@pmldnet.com>
Message-ID: <4C8675E5.7050804@gov.yk.ca>

Here is a recipe for accessing arcobjects from python:
http://gis.stackexchange.com/questions/80/how-do-i-access-arcobjects-from-python

cheers,

matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

On 03/09/2010 5:36 PM, Lucena, Ivan wrote:
> Ben,
>
> There are some interfaces on the ArcObject package that let you not exactly *ready* the MXD but you
> can get some useful information from the document. I believe that you can access the ArcObject COM
> API in ArcGIS 10 or 9 by using the win32com.client.Dispatch() the same way as you can load the
> "esriGeoprocessing.GpDispatch.1". You can use the tools on PythonWin to browse to all the available
> ArcGIS components.
>
>   >>>  import win32com.client
>   >>>  arcobj = win32com.client.Dipath("<  What should goes here ?>")
>
> It is only a wild guess, I am not even running Windows now to do a quick test, but I hope it would
> help you.
>
> Ivan
>
> Benjamin Welton wrote:
>>   Can you do that with ArcGIS 9.3? i was under the impression from the
>> doc's/forums that it's only available in the arcpy package in 10.
>>
>> Ben
>>
>>
>> On 9/4/2010 5:44 PM, Paolo Corti wrote:
>>>>      Im wondering if there is any way to read MXD files in ether gdal
>>>> or some other python based extension. I'm not looking for the raster
>>>> data for the files only the filename/SDE name of the layer and the
>>>> name of the layer in the MXD file. Is there any easy way to pull this
>>>> information out of the MXD?
>>>>
>>>>
>>> I think your only option is to use the ArcGis Python library, but you
>>> need a license for doing so
>>>
>>> Paolo
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> .
>
From even.rouault at mines-paris.org  Tue Sep  7 13:27:05 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Sep  7 13:27:16 2010
Subject: [gdal-dev] Gdal nodata Complex value
In-Reply-To: <33584A1DEF4341428D15C1273466D32312DD0448@EVSYVR1.ds.mda.ca>
References: <33584A1DEF4341428D15C1273466D32312DD0448@EVSYVR1.ds.mda.ca>
Message-ID: <201009071927.05080.even.rouault@mines-paris.org>

Shawn,

The nodata value at the band level (GDALRasterBand::GetNoDataValue() / 
SetNoDataValue()) is a real number, so there's no complete solution. Usually 
parts of the application that take into account the real part of complex 
numbers and compare it to the nodata value to determine if the pixel is nodata 
or not.

There's an exception however in the warping code where you can pass a nodata 
value formed of a real and imaginary part. See 
http://gdal.org/structGDALWarpOptions.html


Le mardi 07 septembre 2010 17:23:57, Shawn Gong a ?crit :
> Hi list,
> 
> How do you set Gdal nodata in Complex? Would someone give me an example?
> 
> 
> Thanks,
> Shawn
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From nahumcastro at gmail.com  Tue Sep  7 14:06:27 2010
From: nahumcastro at gmail.com (Nahum Castro)
Date: Tue Sep  7 14:06:30 2010
Subject: [gdal-dev] Fedara 13 and ECW
Message-ID: <AANLkTik_4aJ7+iELdoh-mY43UZ+g4_x=pR=+tmA43+H6@mail.gmail.com>

I'am trying to compile gdal 1.7.2 on fedora 13 x86_64 with ECW, but i have
the next problem when making.


/bin/sh /home/nahum/Descargas/gdal-1.7.2/libtool --mode=link    g++
gdalmanage.lo  /home/nahum/Descargas/gdal-1.7.2/libgdal.la -o gdalmanage
libtool: link: g++ .libs/gdalmanage.o -o .libs/gdalmanage
/home/nahum/Descargas/gdal-1.7.2/.libs/libgdal.so
/usr/bin/ld: /usr/local/lib/libNCSUtil.so.0: undefined reference to symbol
'pthread_cancel@@GLIBC_2.2.5'
/usr/bin/ld: note: 'pthread_cancel@@GLIBC_2.2.5' is defined in DSO
/lib64/libpthread.so.0 so try adding it to the linker command line
/lib64/libpthread.so.0: could not read symbols: Invalid operation
collect2: ld returned 1 exit status
make[1]: *** [gdalmanage] Error 1
make[1]: se sale del directorio `/home/nahum/Descargas/gdal-1.7.2/apps'
make: *** [apps-target] Error 2

here is my configure
./configure --with-pg --with-libtiff=internal --with-geotiff=internal
--with-ecw --with-mysql --with-sqlite3 --with-geos --with-static-proj4
--with-perl --with-python


Thanks in advance


-- 
Nahum Castro Gonz?lez
Le?n, Guanajuato, M?xico
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100907/9532416c/attachment.html
From ivan.lucena at pmldnet.com  Tue Sep  7 14:58:38 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Sep  7 14:58:41 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gQysrIGludGVyZmFjZSB0byBsaXN0cyBvZiBjb29yZGluYXRlIHN5c3RlbXMgaW4gZGF0YSBkaXIgPw==?=
Message-ID: <20100907185838.16905.qmail@s466.sureserver.com>

>  On Sep 7, 2010, at 8:59 AM, Anders Moe wrote:
>  
>  >
>  > Hi everyone
>  >
>  > Creating a C++ enduser app I was wondering if there is a programmatic way to read the various datums/projections etc. files in the gdal data directory ? I would like to present these in the interface if the user is to perform conversion, etc.
>  
>  Anders,
>  
>  There's no interfaces as far as I know.??People usually consume the files in the GDAL_DATA directory using their favorite text manipulation methods 

That is right, you can also the GDAL own CSV support:

http://trac.osgeo.org/gdal/browser/trunk/gdal/port/cpl_csv.cpp

Example of use are everywhere in the code, like here:

http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/idrisi/IdrisiDataset.cpp#L2301

I believe that CPL_CSV is not exposed on the GDAL API but it is available for C  and C++ coders.

Regards,

Ivan

From nahumcastro at gmail.com  Tue Sep  7 15:40:35 2010
From: nahumcastro at gmail.com (Nahum Castro)
Date: Tue Sep  7 15:40:38 2010
Subject: [gdal-dev] gdal on fedora 13
Message-ID: <AANLkTimwopr_Dqt_mpe8HDkebLurMFgg-fgBSjBnWPg0@mail.gmail.com>

I can not compile gdal 1.72 on fedora 13 beacuse of this.

6.3.1. GCC now uses Implicit DSO linking
Key points:

   1. ld will no longer automatically search in the dependencies of linked
   objects.
   2. If your project used both libraries *A* and *B*, it will not compile
   unless *A* and *B* are both explicitly linked.
   3. There are more explanations on the GCC features page on the Fedora
   wiki:
   http://fedoraproject.org/w/index.php?title=UnderstandingDSOLinkChange.

 Under the new changes, if your package fails its build with a message like:


/usr/bin/ld: gpx-parser.o: undefined reference to symbol 'acos@@GLIBC_2.0'
/usr/bin/ld: note: 'acos@@GLIBC_2.0' is defined in DSO /lib/libm.so.6
so try adding it to the linker command line

Then the line that builds the specified .o needs to explicitly link *libm*.

What i have to modify to implicit DSO linking all libraries.

/bin/sh /home/nahum/Descargas/gdal-1.7.2/libtool --mode=link    g++
gdalmanage.lo  /home/nahum/Descargas/gdal-1.7.2/libgdal.la -o gdalmanage
libtool: link: g++ .libs/gdalmanage.o -o .libs/gdalmanage
/home/nahum/Descargas/gdal-1.7.2/.libs/libgdal.so
/usr/bin/ld: /usr/local/lib/libNCSUtil.so.0: undefined reference to symbol
'pthread_cancel@@GLIBC_2.2.5'
/usr/bin/ld: note: 'pthread_cancel@@GLIBC_2.2.5' is defined in DSO
/lib64/libpthread.so.0 so try adding it to the linker command line
/lib64/libpthread.so.0: could not read symbols: Invalid operation
collect2: ld returned 1 exit status
make[1]: *** [gdalmanage] Error 1
make[1]: se sale del directorio `/home/nahum/Descargas/gdal-1.7.2/apps'
make: *** [apps-target] Error 2


Thanks in advance


-- 
Nahum Castro Gonz?lez
Le?n, Guanajuato, M?xico
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100907/6090ad73/attachment.html
From terrasi.carmelo at gmail.com  Wed Sep  8 09:26:26 2010
From: terrasi.carmelo at gmail.com (Carmelo Terrasi)
Date: Wed Sep  8 09:26:28 2010
Subject: [gdal-dev] cut a .dem file
Message-ID: <AANLkTin2TrizcpeRnHpUnZRKL_q=_6a9MVEtz71cROTs@mail.gmail.com>

Hello everybody,

does anybody know how to cut a smaller dem file from another one???
I have my original file *terrain.dem *but my *image.bmp* is smaller so I
would cut a portion just to create another suitable dem file for my *
image.bmp*
Is it possible to do it or am I off-board?

Thanks in advance,
Regards,
Carmelo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100908/5ff5c181/attachment.html
From peifer at gmx.eu  Wed Sep  8 09:42:41 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Sep  8 09:42:46 2010
Subject: [gdal-dev] Re: cut a .dem file
In-Reply-To: <AANLkTin2TrizcpeRnHpUnZRKL_q=_6a9MVEtz71cROTs@mail.gmail.com>
References: <AANLkTin2TrizcpeRnHpUnZRKL_q=_6a9MVEtz71cROTs@mail.gmail.com>
Message-ID: <4C8792D1.80408@gmx.eu>

On 08/09/2010 15:26, Carmelo Terrasi wrote:
> Hello everybody,
>
> does anybody know how to cut a smaller dem file from another one???
> I have my original file /terrain.dem /but my /image.bmp/ is smaller so I
> would cut a portion just to create another suitable dem file for my
> /image.bmp/
> Is it possible to do it or am I off-board?
>

Look at the -srcwin and -projwin options at 
http://gdal.org/gdal_translate.html

Hermann
From tom at vdputte.nl  Wed Sep  8 10:03:18 2010
From: tom at vdputte.nl (Tom van der Putte)
Date: Wed Sep  8 10:56:35 2010
Subject: [gdal-dev] OGR: Get FID of last set feat in PG
Message-ID: <3534.1283954598@vdputte.nl>

Hi
All,
 I'm adding several new features to a PostGIS table using OGR (in
C#). After each CreateFeature I'd like to somehow get the FID of the
created feature. Is there any possible way to do this? If not elegant,
any hack is also welcome :D
 Cheers,
 Tom
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100908/60bd9dcd/attachment-0001.html
From tom at vdputte.nl  Wed Sep  8 11:36:30 2010
From: tom at vdputte.nl (Tom van der Putte)
Date: Wed Sep  8 11:36:33 2010
Subject: [gdal-dev] OGR: Get FID of last set feat in PG
Message-ID: <4147.1283960190@vdputte.nl>

 In reply to my own question, I've created something that works:
 Layer tempLayer = ds2.ExecuteSQL("SELECT
currval(pg_get_serial_sequence('wells', 'well_id')) as seqval;", null,
null);
 Feature seqFeat = tempLayer.GetNextFeature(); //always only 1 row in
the resultset, so no *while*
 tempFID = seqFeat.GetFieldAsInteger("seqval");
 ds2.ReleaseResultSet(tempLayer);
 Is it necessary to call ReleaseResultSet after every ExecuteSQL? Or
only after the last one?
 Cheers,
 Tom
 On Wed 08/09/10 16:03 , Tom van der Putte tom@vdputte.nl sent:
  Hi All,
 I'm adding several new features to a PostGIS table using OGR (in
C#). After each CreateFeature I'd like to somehow get the FID of the
created feature. Is there any possible way to do this? If not elegant,
any hack is also welcome :D
 Cheers,
 Tom
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100908/67b8fcbb/attachment.html
From terrasi.carmelo at gmail.com  Wed Sep  8 11:38:56 2010
From: terrasi.carmelo at gmail.com (Carmelo Terrasi)
Date: Wed Sep  8 11:38:59 2010
Subject: [gdal-dev] Re: cut a .dem file
In-Reply-To: <4C8792D1.80408@gmx.eu>
References: <AANLkTin2TrizcpeRnHpUnZRKL_q=_6a9MVEtz71cROTs@mail.gmail.com>
	<4C8792D1.80408@gmx.eu>
Message-ID: <AANLkTin2zVttKhXx2fATP=sGx0ObHDBnepfNCnz50_mr@mail.gmail.com>

Yes, you're right, if I need a portion I have to use that utility.
Thank you so much Hermann,
regards,
Carmelo

2010/9/8 Hermann Peifer <peifer@gmx.eu>

> On 08/09/2010 15:26, Carmelo Terrasi wrote:
>
>> Hello everybody,
>>
>> does anybody know how to cut a smaller dem file from another one???
>> I have my original file /terrain.dem /but my /image.bmp/ is smaller so I
>> would cut a portion just to create another suitable dem file for my
>> /image.bmp/
>> Is it possible to do it or am I off-board?
>>
>>
> Look at the -srcwin and -projwin options at
> http://gdal.org/gdal_translate.html
>
> Hermann
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100908/48e4ac09/attachment.html
From jluis at ualg.pt  Wed Sep  8 11:47:11 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Sep  8 11:47:22 2010
Subject: [gdal-dev] Re: cut a .dem file
In-Reply-To: <AANLkTin2zVttKhXx2fATP=sGx0ObHDBnepfNCnz50_mr@mail.gmail.com>
References: <AANLkTin2TrizcpeRnHpUnZRKL_q=_6a9MVEtz71cROTs@mail.gmail.com>	<4C8792D1.80408@gmx.eu>
	<AANLkTin2zVttKhXx2fATP=sGx0ObHDBnepfNCnz50_mr@mail.gmail.com>
Message-ID: <4C87AFFF.9000003@ualg.pt>

On 08-09-2010 16:38, Carmelo Terrasi wrote:
> Yes, you're right, if I need a portion I have to use that utility.
> Thank you so much Hermann,
> regards,
> Carmelo

Not so simple.
The problem will be that your bmp image is not referenced but the DEM 
is, so you'll need to find the correspondence between the (row,column) 
coordinates of the bmp image and the (x,y) coords of the model. That 
means referencing the image (bmp) to the grid (dem).

Joaquim


>
> 2010/9/8 Hermann Peifer <peifer@gmx.eu <mailto:peifer@gmx.eu>>
>
>     On 08/09/2010 15:26, Carmelo Terrasi wrote:
>
>         Hello everybody,
>
>         does anybody know how to cut a smaller dem file from another
>         one???
>         I have my original file /terrain.dem /but my /image.bmp/ is
>         smaller so I
>         would cut a portion just to create another suitable dem file
>         for my
>         /image.bmp/
>         Is it possible to do it or am I off-board?
>
>
>     Look at the -srcwin and -projwin options at
>     http://gdal.org/gdal_translate.html
>
>     Hermann
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100908/b4a0ef26/attachment.html
From alexandre.gacon+gdal at gmail.com  Wed Sep  8 15:01:54 2010
From: alexandre.gacon+gdal at gmail.com (Alexandre Gacon)
Date: Wed Sep  8 15:01:56 2010
Subject: [gdal-dev] C++ interface to lists of coordinate systems in data
	dir ?
In-Reply-To: <20100907185838.16905.qmail@s466.sureserver.com>
References: <20100907185838.16905.qmail@s466.sureserver.com>
Message-ID: <AANLkTinHPD7tcK80OLvPypa8Y=DT=XbTaeG0Kk6SU9VD@mail.gmail.com>

The OGR CSV support is a supported driver and I think it will work better
than the built-in GDAL support (but perhaps it the same think).

Alexandre

On Tue, Sep 7, 2010 at 8:58 PM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:

> >  On Sep 7, 2010, at 8:59 AM, Anders Moe wrote:
> >
> >  >
> >  > Hi everyone
> >  >
> >  > Creating a C++ enduser app I was wondering if there is a programmatic
> way to read the various datums/projections etc. files in the gdal data
> directory ? I would like to present these in the interface if the user is to
> perform conversion, etc.
> >
> >  Anders,
> >
> >  There's no interfaces as far as I know.  People usually consume the
> files in the GDAL_DATA directory using their favorite text manipulation
> methods
>
> That is right, you can also the GDAL own CSV support:
>
> http://trac.osgeo.org/gdal/browser/trunk/gdal/port/cpl_csv.cpp
>
> Example of use are everywhere in the code, like here:
>
>
> http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/idrisi/IdrisiDataset.cpp#L2301
>
> I believe that CPL_CSV is not exposed on the GDAL API but it is available
> for C  and C++ coders.
>
> Regards,
>
> Ivan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Alexandre Gacon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100908/f02fda65/attachment.html
From dlowther at coordinatesolutions.com  Wed Sep  8 15:08:47 2010
From: dlowther at coordinatesolutions.com (David Lowther)
Date: Wed Sep  8 15:09:16 2010
Subject: [gdal-dev] OGR OVF has no identified FID column
In-Reply-To: <4C6E8E3B.8080904@geoanalytic.com>
References: <1282244198128-5441674.post@n2.nabble.com>
	<4C6D82AE.7040606@geoanalytic.com>
	<5C3E8F598A214A3884EAF6A2F99C9D66@dlq6600>
	<4C6D8AC9.9020206@geoanalytic.com>
	<74E1B79A1CAD4D1EA5928E117BED7FB8@dlq6600>
	<4C6DA048.1020205@geoanalytic.com>
	<BAE011C34DB94D698A8BC9A12EAA9160@dlq6600>
	<4C6E8E3B.8080904@geoanalytic.com>
Message-ID: <6E1151FA9BFE4870950AB43828B94B47@dlq6600>

Brent, 

Finally got back to this today. I upgraded my GDAL to version 1.7.1. The
only thing I notice that is different is that I get:

OGR: OGRGeometryFactory::createFromWkb() - got corrupt data.

That gave me a hint. I added a WKT column to the MS SQL Server table and
calculated it to the STAsText of the Feature column. Then I modified the ovf
file to look for WKT in the WKT column. Still no FID, but the point data ogr
sees is what I expect:

Layer name: PointData
Geometry: Unknown (any)
OGR_ODBC: ExecuteSQL(SELECT * FROM PointData)
Feature Count: 1
OGR_ODBC: ExecuteSQL(SELECT * FROM PointData)
Layer SRS WKT:
(unknown)
PKey: Integer (10.0)
Feature: Binary (0.0)
WKT: String (0.0)
OGR_ODBC: ExecuteSQL(SELECT * FROM PointData)
OGRFeature(PointData):3
  PKey (Integer) = 3
  Feature (Binary) = BC080000010C00000000000059400000000000005940
  WKT (String) = POINT (100 100)
  POINT (100 100)


Thanks again for your help.

David Lowther
 
Coordinate Solutions, Inc.
 

-----Original Message-----
From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
Sent: Friday, August 20, 2010 10:16 AM
To: David Lowther
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] OGR OVF has no identified FID column

David,

   GDAL:       POINT (0.0 2.000000000021871)
   SQL Server: POINT (150 150)

   That IS strange!  There could be a problem with GDAL's or SQL Server's 
encoding/decoding of WKB, or it could be related to data type (geometry? 
geography?) or the lack of a Spatial Reference System?

Best Regards,
Brent Fraser

David Lowther wrote:
> D:\Utility\ms4w\tools\gdal-ogr>ogrinfo test.ovf  PointData --debug on
> ERROR 4: Update access not supported for VRT datasources.
> OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
> ODBC: SQLConnect(CLO)
> OGR_ODBC: Table PointData has no identified FID column.
> OGR: OGROpen(ODBC:un/pw@CLO,PointData/00FB9BB0) succeeded as ODBC.
> OGR: OGROpen(test.ovf/010870B8) succeeded as VRT.
> Had to open data source read-only.
> INFO: Open of `test.ovf'
>       using driver `VRT' successful.
> OGR: GetLayerCount() = 1
> 
> 
> Layer name: PointData
> Geometry: Unknown (any)
> OGR_ODBC: ExecuteSQL(SELECT * FROM PointData)
> Feature Count: 1
> OGR_ODBC: ExecuteSQL(SELECT * FROM PointData)
> Extent: (0.000000, 2.000000) - (0.000000, 2.000000)
> Layer SRS WKT:
> (unknown)
> PKey: Integer (10.0)
> Feature: Binary (0.0)
> OGR_ODBC: ExecuteSQL(SELECT * FROM PointData)
> OGRFeature(PointData):1
>   PKey (Integer) = 1
>   Feature (Binary) = 00000000010C0000000000C062400000000000C06240
>   POINT (0.0 2.000000000021871)
> 
> VRT: 2 features read on layer 'PointData'.
> OGR_ODBC: 3 features read on layer 'PointData'.
> ODBC: SQLDisconnect()
> 
> 
> 
> 
> And, why do you think it is saying 0.0 2.000000... for the point when the
> SQL query says?
> 
> 1	0x00000000010C0000000000C062400000000000C06240	POINT (150 150)
> 
> 
> 
> David Lowther
>  
> Coordinate Solutions, Inc.
>  
> 
> -----Original Message-----
> From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
> Sent: Thursday, August 19, 2010 5:21 PM
> To: David Lowther
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] OGR OVF has no identified FID column
> 
> I think it's faster since it doesn't have to enumerate all the
tables,views,
> etc.
> 
> so how do you get for attributes names when you do a
> 
> ogrinfo test.ovf  PointData --debug on
> 
> Brent
> 
> David Lowther wrote:
>> Still doesn't see the FID but is way faster! 
>>
>> <OGRVRTDataSource>
>>      <OGRVRTLayer name="PointData">
>>           <SrcDataSource>ODBC:un/pw@CLO,PointData</SrcDataSource>
>>           <GeometryField encoding="WKB" field="Feature"/>
>>           <FID>PKey</FID>
>>      </OGRVRTLayer>
>> </OGRVRTDataSource>
>>
>> ogrinfo test.ovf --debug on
>>
>> ERROR 4: Update access not supported for VRT datasources.
>> OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
>> ODBC: SQLConnect(CLO)
>> OGR_ODBC: Table PointData has no identified FID column.
>> OGR: OGROpen(ODBC:un/pw@CLO,PointData/02799B88) succeeded as ODBC.
>> OGR: OGROpen(test.ovf/010270B8) succeeded as VRT.
>> Had to open data source read-only.
>> INFO: Open of `test.ovf'
>>       using driver `VRT' successful.
>> OGR: GetLayerCount() = 1
>>
>> 1: PointData
>> ODBC: SQLDisconnect()
>>
>>
>>
>> Does the datatype of the FID column matter? I have it as an int, does it
>> need to be guid?
>>
>> David Lowther
>>  
>> Coordinate Solutions, Inc.
>>  
>>
>> -----Original Message-----
>> From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
>> Sent: Thursday, August 19, 2010 3:49 PM
>> To: David Lowther
>> Cc: gdal-dev@lists.osgeo.org
>> Subject: Re: [gdal-dev] OGR OVF has no identified FID column
>>
>> Yeah I saw that after I sent the message.  Take out the  <SrcSQL>, it's
>> really 
>> only useful if want to do "special" things, and it can kill spatial
> indexing
>> on 
>> ODBC datasources.  Does this work any better:
>>
>> <OGRVRTDataSource>
>>      <OGRVRTLayer name="UserPoint">
>>           <SrcDataSource>ODBC:un/pw@CLO,PointData</SrcDataSource>
>>           <GeometryField encoding="WKB" field="Feature"/>
>>           <FID>PKey</FID>
>>      </OGRVRTLayer>
>> </OGRVRTDataSource>
>>
>>
>> Brent
>>
>> David Lowther wrote:
>>> Brent,
>>>
>>> Thanks for the reply. On initial read I thought you had found my issue -
>>> that I was trying so many things I finally messed it all up. But on
> closer
>>> inspection I am aliasing the PKey column to FID in the SrcSQL (select
> PKey
>>> as FID, Feature from PointData).
>>>
>>> When <FID>FID</FID> ogrinfo returns:
>>>
>>> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
>>> OGR_ODBC: Table SELECT has no identified FID column.
>>> OGR: OGROpen(test.ovf/00ED7090) succeeded as VRT.
>>> Had to open data source read-only.
>>> INFO: Open of `test.ovf'
>>>       using driver `VRT' successful.
>>> OGR: GetLayerCount() = 1
>>>
>>> 1: UserPoint
>>> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02719D10) dereferenced and now
>>> destroying.
>>> ODBC: SQLDisconnect()
>>>
>>> When <FID>PKEY</FID> ogrinfo returns:
>>>
>>> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
>>> OGR_ODBC: Table SELECT has no identified FID column.
>>> ERROR 1: Unable to identify FID field 'PKey'.
>>> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02C39D18) dereferenced and now
>>> destroying.
>>> ODBC: SQLDisconnect()
>>> FAILURE:
>>> Unable to open datasource `test.ovf' with the following drivers.
>>>   -> ESRI Shapefile
>>>
>>>
>>> David Lowther
>>>  
>>> Coordinate Solutions, Inc.
>>>  
>>>
>>> -----Original Message-----
>>> From: Brent Fraser [mailto:bfraser@geoanalytic.com] 
>>> Sent: Thursday, August 19, 2010 3:15 PM
>>> To: David Lowther
>>> Cc: gdal-dev@lists.osgeo.org
>>> Subject: Re: [gdal-dev] OGR OVF has no identified FID column
>>>
>>> How about using:
>>> <FID>PKey</FID>
>>>
>>> but that doesn't explain why it takes a long time...
>>>
>>> Best Regards,
>>> Brent Fraser
>>>
>>>
>>> David Lowther wrote:
>>>> List,
>>>> 	
>>>> I have an OVF layer defined as follows:
>>>>
>>>> <OGRVRTDataSource>
>>>>         <OGRVRTLayer name="UserPoint">
>>>>          <SrcDataSource>ODBC:un/pw@CLO</SrcDataSource>
>>>>          <SrcSQL>select PKey as FID, Feature from PointData</SrcSQL>
>>>>          <GeometryField encoding="WKB" field="Feature"/>
>>>>   <FID>FID</FID>
>>>>         </OGRVRTLayer>
>>>> </OGRVRTDataSource>
>>>>
>>>> The ODBC connection is to a SQL Express 2008 database. The PointData
>> table
>>>> is defined as follows:
>>>>
>>>> CREATE TABLE [dbo].[PointData](
>>>>  [PKey] [int] IDENTITY(1,1) NOT NULL,
>>>>  [Feature] [geometry] NULL,
>>>>  CONSTRAINT [PK_PointData] PRIMARY KEY CLUSTERED 
>>>> (
>>>>  [PKey] ASC
>>>> )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY
=
>>>> OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
>>>> ) ON [PRIMARY]
>>>>
>>>> This query
>>>>
>>>> select *, Feature.STAsText() from pointdata
>>>>
>>>> yields
>>>>
>>>> 1 0x00000000010C0000000000C062400000000000C06240 POINT (150 150)
>>>>
>>>> "ogrinfo test.ovf --debug on" runs for a very long time returning many
>>> lines
>>>> of this sort of stuff:
>>>>
>>>> ERROR 4: Update access not supported for VRT datasources.
>>>> OGR_ODBC: EstablishSession(DSN:"CLO", userid:"un", password:"pw")
>>>> ODBC: SQLConnect(CLO)
>>>> ODBC: CatalogNameL: (null)
>>>> Schema name: (null)
>>>>
>>>> OGR_ODBC: Table PointData has no identified FID column.
>>>> OGR_ODBC: Table UserMapData has no identified FID column.
>>>> OGR_ODBC: Table CHECK_CONSTRAINTS has no identified FID column.
>>>>
>>>> before finally saying:
>>>>
>>>> OGR: OGROpen(ODBC:un/pw@CLO/02C79D10) succeeded as ODBC.
>>>> ODBC: ExecuteSQL(select PKey as FID, Feature from PointData) called.
>>>> OGR_ODBC: Table SELECT has no identified FID column.
>>>> OGR: OGROpen(test.ovf/00E17090) succeeded as VRT.
>>>> Had to open data source read-only.
>>>> INFO: Open of `test.ovf'
>>>>       using driver `VRT' successful.
>>>> OGR: GetLayerCount() = 1
>>>>
>>>> 1: UserPoint
>>>> OGR: ReleaseDataSource(ODBC:un/pw@CLO/02C79D10) dereferenced and now
>>>> destroying.
>>>> ODBC: SQLDisconnect()
>>>>
>>>> GDAL version is 1.6.0.
>>>>
>>>> I have tried using no FID tag and using SrcLayer instead of SrcSQL.
>>> Anybody
>>>> know what I could do to make it see the FID? I'm guessing it would be a
>>> lot
>>>> faster if it didn't check every table in the database for an FID...
>>>>
>>>> Thanks in advance for your assistance,
>>>>
>>>> Dave Lowther
>>>>
>>>
>>
>>
> 
> 
> 


From even.rouault at mines-paris.org  Wed Sep  8 16:34:00 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep  8 16:34:09 2010
Subject: [gdal-dev] OGR: Get FID of last set feat in PG
In-Reply-To: <4147.1283960190@vdputte.nl>
References: <4147.1283960190@vdputte.nl>
Message-ID: <201009082234.00628.even.rouault@mines-paris.org>

Tom,

yes you need to call  ReleaseResultSet after every ExecuteSQL, otherwise 
you'll have memory leaks

Ideally you should have been able to call GetFID() after CreateFeature(), but 
this is currently not implemented in the postgresql driver.

I have a patch to solve the issue, but it raises some potential backward 
compatibility issue, so I'd like hearing from other people before applying.

Patch and potential issues discussed here : 
http://trac.osgeo.org/gdal/ticket/3744

Best regards,

Even

Le mercredi 08 septembre 2010 17:36:30, Tom van der Putte a ?crit :
>  In reply to my own question, I've created something that works:
>  Layer tempLayer = ds2.ExecuteSQL("SELECT
> currval(pg_get_serial_sequence('wells', 'well_id')) as seqval;", null,
> null);
>  Feature seqFeat = tempLayer.GetNextFeature(); //always only 1 row in
> the resultset, so no *while*
>  tempFID = seqFeat.GetFieldAsInteger("seqval");
>  ds2.ReleaseResultSet(tempLayer);
>  Is it necessary to call ReleaseResultSet after every ExecuteSQL? Or
> only after the last one?
>  Cheers,
>  Tom
>  On Wed 08/09/10 16:03 , Tom van der Putte tom@vdputte.nl sent:
>   Hi All,
>  I'm adding several new features to a PostGIS table using OGR (in
> C#). After each CreateFeature I'd like to somehow get the FID of the
> created feature. Is there any possible way to do this? If not elegant,
> any hack is also welcome :D
>  Cheers,
>  Tom
From ivan.lucena at pmldnet.com  Wed Sep  8 02:37:13 2010
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Sep  8 18:41:03 2010
Subject: [gdal-dev] C++ interface to lists of coordinate systems in data
	dir ?
In-Reply-To: <AANLkTinHPD7tcK80OLvPypa8Y=DT=XbTaeG0Kk6SU9VD@mail.gmail.com>
References: <20100907185838.16905.qmail@s466.sureserver.com>
	<AANLkTinHPD7tcK80OLvPypa8Y=DT=XbTaeG0Kk6SU9VD@mail.gmail.com>
Message-ID: <4C872F19.8060502@pmldnet.com>

Hi Alexandre,

Yes, that is an interesting idea. You can actually read the CSV files as OGR data source:

% ogrinfo gcs.csv -al | more
INFO: Open of `gcs.csv'
       using driver `CSV' successful.

Layer name: gcs
Geometry: None
Feature Count: 438
Layer SRS WKT:
(unknown)
COORD_REF_SYS_CODE: String (0.0)
COORD_REF_SYS_NAME: String (0.0)
DATUM_CODE: String (0.0)
DATUM_NAME: String (0.0)
GREENWICH_DATUM: String (0.0)
UOM_CODE: String (0.0)
ELLIPSOID_CODE: String (0.0)
PRIME_MERIDIAN_CODE: String (0.0)
SHOW_CRS: String (0.0)
DEPRECATED: String (0.0)
COORD_SYS_CODE: String (0.0)
COORD_OP_CODE: String (0.0)
COORD_OP_CODE_MULTI: String (0.0)
COORD_OP_METHOD_CODE: String (0.0)
DX: String (0.0)
DY: String (0.0)
DZ: String (0.0)
RX: String (0.0)
RY: String (0.0)
RZ: String (0.0)
DS: String (0.0)
OGRFeature(gcs):1
   COORD_REF_SYS_CODE (String) = 3819
   COORD_REF_SYS_NAME (String) = HD1909
   DATUM_CODE (String) = 1024
   DATUM_NAME (String) = Hungarian Datum 1909
   GREENWICH_DATUM (String) = 1024
   UOM_CODE (String) = 9122
   ELLIPSOID_CODE (String) = 7004
   PRIME_MERIDIAN_CODE (String) = 8901
   SHOW_CRS (String) = 1
   DEPRECATED (String) = 0
   COORD_SYS_CODE (String) = 6422
   COORD_OP_CODE (String) = 3817
   COORD_OP_CODE_MULTI (String) = 0
...

So Anders's application could browse those file using the GDAL/OGR C API and fill up his GUI. And 
that could be done in other wrappers too. Great.

Ivan

Alexandre Gacon wrote:
> The OGR CSV support is a supported driver and I think it will work 
> better than the built-in GDAL support (but perhaps it the same think).
> 
> Alexandre
> 
> On Tue, Sep 7, 2010 at 8:58 PM, Ivan Lucena <ivan.lucena@pmldnet.com 
> <mailto:ivan.lucena@pmldnet.com>> wrote:
> 
>      >  On Sep 7, 2010, at 8:59 AM, Anders Moe wrote:
>      >
>      >  >
>      >  > Hi everyone
>      >  >
>      >  > Creating a C++ enduser app I was wondering if there is a
>     programmatic way to read the various datums/projections etc. files
>     in the gdal data directory ? I would like to present these in the
>     interface if the user is to perform conversion, etc.
>      >
>      >  Anders,
>      >
>      >  There's no interfaces as far as I know.  People usually consume
>     the files in the GDAL_DATA directory using their favorite text
>     manipulation methods
> 
>     That is right, you can also the GDAL own CSV support:
> 
>     http://trac.osgeo.org/gdal/browser/trunk/gdal/port/cpl_csv.cpp
> 
>     Example of use are everywhere in the code, like here:
> 
>     http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/idrisi/IdrisiDataset.cpp#L2301
> 
>     I believe that CPL_CSV is not exposed on the GDAL API but it is
>     available for C  and C++ coders.
> 
>     Regards,
> 
>     Ivan
> 
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> 
> -- 
> Alexandre Gacon

From niccolo at rigacci.org  Thu Sep  9 09:44:47 2010
From: niccolo at rigacci.org (Niccolo Rigacci)
Date: Thu Sep  9 10:02:18 2010
Subject: [gdal-dev] Invalid geometry reading from Oracle via OGR OCI driver
Message-ID: <20100909134447.GA21602@rigacci.org>

In an Oracle Spatial DB I have a geometry like this:

MULTIPOLYGON = (((POLYGON), (HOLE)), ((POLYGON), (HOLE)))

When I dump the geometry via ogrinfo, I get an invalid geometry: 

MULTIPOLYGON = (((POLYGON)), ((POLYGON)), ((POLYGON)), ((POLYGON)))

The dump is done with:
ogrinfo "OCI:..." table_name

The same problem results when I import the Oracle geometry into a
Postgres database via ogr2ogr. The resulting geometry is invalid.

Strange enough, if I convert the same Oracle geometry into a 
shapefile, the result IS valid: two polygons with one hole 
each. The conversion is made with:
ogr2ogr -f "ESRI Shapefile" shapefile "OCI:..."

I noticed also that the polygons into the shapefile are 
clock-wise inverted respect the original Oracle ones, but the 
geometry is valid.


I'm using GDAL/OGR 1.6.3.

Am I missing some OGR parameter?
Is this a known bug fixed in newer versions?

Thank you very much for any hints.

-- 
Niccolo Rigacci
Firenze - Italy
From even.rouault at mines-paris.org  Thu Sep  9 13:35:29 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep  9 13:35:45 2010
Subject: [gdal-dev] Invalid geometry reading from Oracle via OGR OCI driver
In-Reply-To: <20100909134447.GA21602@rigacci.org>
References: <20100909134447.GA21602@rigacci.org>
Message-ID: <201009091935.29886.even.rouault@mines-paris.org>

Niccolo,

I can't comment on the OCI side, but I can explain a bit what happens at the 
shapefile side. In shapefiles, the only way to distinguish holes from non-holes  
is based on the winding : clockwise for non-holes (outer ring), 
counterclockwise for holes (inner ring). So the shapefile writer makes a 
topological analysis of all the rings of the multipolygon to fix their winding 
if needed. The shapefile reader also does a similar analysis to rebuild the 
geometry. 

If you still replicate the issue in the OCI driver with the latest version, it 
might be appropriate to file a ticket in Trac with a way to reproduce it.

Best regards,

Even

Le jeudi 09 septembre 2010 15:44:47, Niccolo Rigacci a ?crit :
> In an Oracle Spatial DB I have a geometry like this:
> 
> MULTIPOLYGON = (((POLYGON), (HOLE)), ((POLYGON), (HOLE)))
> 
> When I dump the geometry via ogrinfo, I get an invalid geometry:
> 
> MULTIPOLYGON = (((POLYGON)), ((POLYGON)), ((POLYGON)), ((POLYGON)))
> 
> The dump is done with:
> ogrinfo "OCI:..." table_name
> 
> The same problem results when I import the Oracle geometry into a
> Postgres database via ogr2ogr. The resulting geometry is invalid.
> 
> Strange enough, if I convert the same Oracle geometry into a
> shapefile, the result IS valid: two polygons with one hole
> each. The conversion is made with:
> ogr2ogr -f "ESRI Shapefile" shapefile "OCI:..."
> 
> I noticed also that the polygons into the shapefile are
> clock-wise inverted respect the original Oracle ones, but the
> geometry is valid.
> 
> 
> I'm using GDAL/OGR 1.6.3.
> 
> Am I missing some OGR parameter?
> Is this a known bug fixed in newer versions?
> 
> Thank you very much for any hints.
From szekerest at gmail.com  Thu Sep  9 15:21:45 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Sep  9 15:21:52 2010
Subject: [gdal-dev] Adding transaction support to the CPL ODBC layer
Message-ID: <AANLkTimwyr764z9=bZYq7i3sDK9xnPN8nJvRNKbWTULg@mail.gmail.com>

Folks,

I've created an OGR driver to provide read/write support for accessing the
MS SQL 2008+ spatial databases. I would be in favour of including this
driver in SVN trunk soon.
This driver use the current CPL ODBC implementation to access the server,
however it should somewhat be extended to support transactions at ODBC
level.
For this reason I've created a ticket
http://trac.osgeo.org/gdal/ticket/3745and added the patch related to
this common code.
Any objections to apply these additions? I'm not sure it this change is
large enough to write up an RFC on this, but I would do so if required.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100909/f82c2d00/attachment.html
From even.rouault at mines-paris.org  Thu Sep  9 16:18:23 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep  9 16:18:39 2010
Subject: [gdal-dev] Adding transaction support to the CPL ODBC layer
In-Reply-To: <AANLkTimwyr764z9=bZYq7i3sDK9xnPN8nJvRNKbWTULg@mail.gmail.com>
References: <AANLkTimwyr764z9=bZYq7i3sDK9xnPN8nJvRNKbWTULg@mail.gmail.com>
Message-ID: <201009092218.23687.even.rouault@mines-paris.org>

Hi Tamas,

Looks good to me. Probably not worth a RFC (IMHO) as I'd consider 
cpl_odbc.h/cpp to be more or less internal GDAL API.

I assume that the changes are backward compatible so that the PGeo / ODBC 
drivers still work ?

Best regards,

Even

Le jeudi 09 septembre 2010 21:21:45, Tamas Szekeres a ?crit :
> Folks,
> 
> I've created an OGR driver to provide read/write support for accessing the
> MS SQL 2008+ spatial databases. I would be in favour of including this
> driver in SVN trunk soon.
> This driver use the current CPL ODBC implementation to access the server,
> however it should somewhat be extended to support transactions at ODBC
> level.
> For this reason I've created a ticket
> http://trac.osgeo.org/gdal/ticket/3745and added the patch related to
> this common code.
> Any objections to apply these additions? I'm not sure it this change is
> large enough to write up an RFC on this, but I would do so if required.
> 
> 
> Best regards,
> 
> Tamas
From szekerest at gmail.com  Thu Sep  9 16:28:01 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Sep  9 16:28:03 2010
Subject: [gdal-dev] Adding transaction support to the CPL ODBC layer
In-Reply-To: <201009092218.23687.even.rouault@mines-paris.org>
References: <AANLkTimwyr764z9=bZYq7i3sDK9xnPN8nJvRNKbWTULg@mail.gmail.com>
	<201009092218.23687.even.rouault@mines-paris.org>
Message-ID: <AANLkTim+4pT03UwMw_UudbbpWgAgztejqxihnOFuJ5f=@mail.gmail.com>

2010/9/9 Even Rouault <even.rouault@mines-paris.org>

>
> I assume that the changes are backward compatible so that the PGeo / ODBC
> drivers still work ?
>
>
Hi Even,

It works in the original manner as far as the driver doesn't use these new
(transaction related) methods.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100909/69471694/attachment.html
From jluis at ualg.pt  Thu Sep  9 18:25:48 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Sep  9 18:26:10 2010
Subject: [gdal-dev] KML binay?
Message-ID: <4C895EEC.7040609@ualg.pt>

Hi,

Excuse if this is only marginally GDAlish. Anyone know if it is possible 
to create binary KML?
I know about KMZ but that's not what I'm after. What I wanted is to try 
to use GE as visualizer of LIDAR data. That is, to go directly from LAS 
to KML (binary).

Thanks

Joaquim Luis
From warmerdam at pobox.com  Fri Sep 10 02:21:17 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep 10 02:21:23 2010
Subject: [gdal-dev] Adding transaction support to the CPL ODBC layer
In-Reply-To: <AANLkTimwyr764z9=bZYq7i3sDK9xnPN8nJvRNKbWTULg@mail.gmail.com>
References: <AANLkTimwyr764z9=bZYq7i3sDK9xnPN8nJvRNKbWTULg@mail.gmail.com>
Message-ID: <AANLkTi=HP_rrEb6-_pbKtsnHCG4S_ctEX+KuVOY9L5y6@mail.gmail.com>

On Thu, Sep 9, 2010 at 3:21 PM, Tamas Szekeres <szekerest@gmail.com> wrote:
> Folks,
>
> I've created an OGR driver to provide read/write support for accessing the
> MS SQL 2008+ spatial databases. I would be in favour of including this
> driver in SVN trunk soon.
> This driver use the current CPL ODBC implementation to access the server,
> however it should somewhat be extended to support transactions at ODBC
> level.
> For this reason I've created a ticket http://trac.osgeo.org/gdal/ticket/3745
> and added the patch related to this common code.
> Any objections to apply these additions? I'm not sure it this change is
> large enough to write up an RFC on this, but I would do so if required.

Tamas,

The patch looks straight forward and harmless.  Since the ODBC
API is essentially internal and the changes seem to have no effect
on existing use I think there is no need for an RFC.

I was just speaking to folks at the conference yesterday about
the need for an MS SQL Server driver in OGR so the timing of
your implementation is excellent!  I look forward to this driver
going into OGR.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From warmerdam at pobox.com  Fri Sep 10 05:23:23 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep 10 05:23:25 2010
Subject: [gdal-dev] RFC 31 - OGR 64bit Fields and FID
Message-ID: <AANLkTimYctdi3ZeAqDKCRHBjV+e4zathBsUYkp0Yaeb-@mail.gmail.com>

Folks,

Some one involved with OSM this week pointed out that
the lack of 64bit FIDs in OGR is likely to become a
problem in the not to distant future for them.  This made
me think that it is likely a good time to address the lack of
64bit integer handling for FIDs and fields in OGR.  To that
end I have prepared a preliminary RFC though it isn't complete
enough to vote on.  I would like to solicit feedback.

  http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From Upendra.Dadi at noaa.gov  Fri Sep 10 12:16:14 2010
From: Upendra.Dadi at noaa.gov (Upendra Dadi)
Date: Fri Sep 10 13:16:16 2010
Subject: [gdal-dev] Creating shape file from csv with double quotes in
	attribute
Message-ID: <4C8A59CE.4070501@noaa.gov>

Hi,
  I have a query on creating shapefile from csv. I am not sure if this 
is the correct forum for it. Thought I should try it anyway.
  I have a csv file consisting of lat/lon and an attribute with double 
quotes like this:
      "<a 
href="http://data.nodc.noaa.gov/thredds/dodsC/gtspp/atlantic/2010/07/9670278.nc.html" 
target="_blank">Data URL</a>"

When I create the shape file from this file using a vrt file, the shape 
file has this value for the attribute:
    <a 
href=http://data.nodc.noaa.gov/thredds/dodsC/gtspp/atlantic/2010/07/9670278.nc

As you can see, the double quotes are gone and the attribute is 
truncated. How do I overcome this problem? Any help is appreciated.

Upendra
From pcorti at gmail.com  Fri Sep 10 13:37:49 2010
From: pcorti at gmail.com (Paolo Corti)
Date: Fri Sep 10 13:38:59 2010
Subject: [gdal-dev] Creating shape file from csv with double quotes in
	attribute
In-Reply-To: <4C8A59CE.4070501@noaa.gov>
References: <4C8A59CE.4070501@noaa.gov>
Message-ID: <-1297697969629266548@unknownmsgid>

> Hi,
> I have a query on creating shapefile from csv. I am not sure if this is the correct forum for it. Thought I should try it anyway.
> I have a csv file consisting of lat/lon and an attribute with double quotes like this:
>     "<a href="http://data.nodc.noaa.gov/thredds/dodsC/gtspp/atlantic/2010/07/9670278.nc.html" target="_blank">Data URL</a>"
>
> When I create the shape file from this file using a vrt file, the shape file has this value for the attribute:
>   <a href=http://data.nodc.noaa.gov/thredds/dodsC/gtspp/atlantic/2010/07/9670278.nc
>
> As you can see, the double quotes are gone and the attribute is truncated. How do I overcome this problem? Any help is appreciated.
>
>

Because shapefile has a limit of 255 characters for string field.
In your case you may use a service like tinyurl as a workaround
Best regards
Paolo
From pcorti at gmail.com  Fri Sep 10 13:37:49 2010
From: pcorti at gmail.com (Paolo Corti)
Date: Fri Sep 10 13:39:26 2010
Subject: [gdal-dev] Creating shape file from csv with double quotes in
	attribute
In-Reply-To: <4C8A59CE.4070501@noaa.gov>
References: <4C8A59CE.4070501@noaa.gov>
Message-ID: <-1297697969629266548@unknownmsgid>

> Hi,
> I have a query on creating shapefile from csv. I am not sure if this is the correct forum for it. Thought I should try it anyway.
> I have a csv file consisting of lat/lon and an attribute with double quotes like this:
>     "<a href="http://data.nodc.noaa.gov/thredds/dodsC/gtspp/atlantic/2010/07/9670278.nc.html" target="_blank">Data URL</a>"
>
> When I create the shape file from this file using a vrt file, the shape file has this value for the attribute:
>   <a href=http://data.nodc.noaa.gov/thredds/dodsC/gtspp/atlantic/2010/07/9670278.nc
>
> As you can see, the double quotes are gone and the attribute is truncated. How do I overcome this problem? Any help is appreciated.
>
>

Because shapefile has a limit of 255 characters for string field.
In your case you may use a service like tinyurl as a workaround
Best regards
Paolo
From even.rouault at mines-paris.org  Fri Sep 10 13:50:58 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Sep 10 13:51:22 2010
Subject: [gdal-dev] RFC 31 - OGR 64bit Fields and FID
In-Reply-To: <AANLkTimYctdi3ZeAqDKCRHBjV+e4zathBsUYkp0Yaeb-@mail.gmail.com>
References: <AANLkTimYctdi3ZeAqDKCRHBjV+e4zathBsUYkp0Yaeb-@mail.gmail.com>
Message-ID: <201009101950.58735.even.rouault@mines-paris.org>

Frank,

yes I definitely think that 64bit integer field/FID support is a must-have for 
OGR.

Here are my remarks on the proposal :

0) Minor point : about "Note that the old interfaces using "long" are already 
64bit on 64bit operating systems so there is little harm to applications 
continuing to use these interfaces on 64bit operating systems". This is true 
on almost all platforms, except on Win64 where a long is still 32 bit...

1) I assume that the corresponding C API will be also added to match the new 
C++ methods ?

2) There are also 2 methods that should be revisited for 64 bit support :

OGRLayer::DeleteFeature(long nFID)
OGRLayer::GetFeature(long nFID)

So we probably need :

OGRLayer::DeleteFeature64(GIntBig nFID)
OGRLayer::GetFeature64(GIntBig nFID)

3) I had thought also about the 64bit support before, and backward 
compatibility was a point for which I didn't come with a satisfactory 
solution. The API additions in the proposal are obviously done in a way to 
preserve backward compatibility in the traditionnal sense of it, but the 
changes done in the drivers to expose OFTInteger64 can be disruptive to 
existing applications. For example, I suppose we'll take the opportunity of 64 
bit integer support to solve that long standing issue with shapefiles and 
decide to map DBF integer fields of width >= 10 to be OFTInteger64 field (e.g. 
4000000000 cannot fit into a signed int32)

What happens if an application relies on the result of a switch(poFDefn-
>GetType()) ? Like in :

switch(poFDefn->GetType())
{
	case OFTString: printf("%s\n", poFeature->GetFieldAsString(i)); break;
	case OFTInteger: printf("%d\n", poFeature->GetFieldAsInteger(i)); break;
	case OFTReal: printf("%f\n", poFeature->GetFieldAsDouble(i)); break;
	default: fatal("Doh ! That can definitely not happen with shapefiles !!!
\n"); break;
}

One solution to workaround this could be to add a global function 
OGRAllow64BitInteger() so that applications can declare that they have been 
ported and now capable of dealing with 64 bit integer. If set, the drivers 
will be allowed to create OFTInteger64 fields, otherwise they will just expose 
them as OFTInteger. The drawback is that it increases a bit the complexity of 
drivers, and that applications aware of the 64bit additions must remind of 
calling the function soon after OGRRegisterAll()


4) Python support : I see 2 possiblities.
    a) as Python code rarely depends on the integer size, we could keep 
existing methods and make them use the 64 bit C API instead. This is indded 
what I've done indeed for the new GDALSetCacheMax64() that is now called by 
gdal.SetCacheMax(). But this could be perhaps a bit more risky to do the same 
for GetFID(), GetField(), GetFieldAsInteger() if the user really expects the 
result to be a 32 bit integer, although I fail to see a situation where it 
would be a problem. Indeed, Python dynamically adapts the type to the stored 
value :

>>> a = 12345
>>> print type(a)
<type 'int'>


>>> a = 3000000000
>>> print type(a)
<type 'long'>

So users won't notice until the returned value is actually a 64 bit integer. 
And I'd note that since Python 3, the long type no longer exist. It is just 
'<class int'> for both...

    b) If we want zero risk, introduce new methods with 64 suffix

   As far as the testing of RFC31 is concerned, once we have Python support 
for it in place, this should be easy. Just put a 11 char int field in a 
shapefile and try to get a value from it.
       
5) Java support. Java has strong typing and method signatures depend on the 
exact types, so no choice here if we want the new gdal.jar to be a drop-in 
replacement. We, at minimum, need explicit 64 bit variants for the getters. 
But for SetFID(), we could keep the existing SetFID(int) and add SetFID(long) 
and/or SetFID64(long) (Note: I'm talking about the Java API where a long is 
always a 64bit integer). As I feel that being consistant with the C++ API is a 
nice plus, my proposal would be :

	keep existing "int Feature.GetFID()" and "int Feature.SetFID(int)"
 	add           "long Feature.GetFID64()" and "int Feature.SetFID64(long)"

   I volunteer to make the appropriate changes in the Java bindings.

6) I realize this is a bit out of scope of the RFC, but as we are introducing 
GetFID64(), why not also introducing GetFIDAsString(), 
OGRLayer::GetFeature(const char* pszId) ... ? I'm thinking here to GML/WFS 
where gml:id is a string. We currently have a logic in the GML driver that 
tries to build an integer FID from the string, but that cannot obviously work 
in all circumstances, so we can end up with accidentally duplicated FIDs.

Best regards,

Even
From pcorti at gmail.com  Fri Sep 10 13:52:35 2010
From: pcorti at gmail.com (Paolo Corti)
Date: Fri Sep 10 13:52:24 2010
Subject: [gdal-dev] Creating shape file from csv with double quotes in
	attribute
In-Reply-To: <4C8A59CE.4070501@noaa.gov>
References: <4C8A59CE.4070501@noaa.gov>
Message-ID: <1364986665000934095@unknownmsgid>

> Hi,
> I have a query on creating shapefile from csv. I am not sure if this is the correct forum for it. Thought I should try it anyway.
> I have a csv file consisting of lat/lon and an attribute with double quotes like this:
>     "<a href="http://data.nodc.noaa.gov/thredds/dodsC/gtspp/atlantic/2010/07/9670278.nc.html" target="_blank">Data URL</a>"
>
> When I create the shape file from this file using a vrt file, the shape file has this value for the attribute:
>   <a href=http://data.nodc.noaa.gov/thredds/dodsC/gtspp/atlantic/2010/07/9670278.nc
>
> As you can see, the double quotes are gone and the attribute is truncated. How do I overcome this problem? Any help is appreciated.
>

Oops I read your questions too quickly.
In any case I would store in one field the text and in another one the
url after preprocessing the string
Best regards
P
From jluis at ualg.pt  Fri Sep 10 20:45:21 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri Sep 10 20:46:00 2010
Subject: [gdal-dev] RFC 31 - OGR 64bit Fields and FID
In-Reply-To: <201009101950.58735.even.rouault@mines-paris.org>
References: <AANLkTimYctdi3ZeAqDKCRHBjV+e4zathBsUYkp0Yaeb-@mail.gmail.com>
	<201009101950.58735.even.rouault@mines-paris.org>
Message-ID: <4C8AD121.1030708@ualg.pt>

On 10-09-2010 18:50, Even Rouault wrote:
> Frank,
>
> yes I definitely think that 64bit integer field/FID support is a must-have for
> OGR.
>
> Here are my remarks on the proposal :
>
> 0) Minor point : about "Note that the old interfaces using "long" are already
> 64bit on 64bit operating systems so there is little harm to applications
> continuing to use these interfaces on 64bit operating systems". This is true
> on almost all platforms, except on Win64 where a long is still 32 bit...
>    

Hi,

About the issue of the 64-bits ints on Windows we had quite some 
troubles in GMT while implementing it.
The problem, as far as I remember and I'm the one who suffered more with 
it (other developers use Macs only), was that one cannot read as %ld a 
variable that is a 64 bits int. There was no compiling or running error, 
but memory was corrupted at totally unexpected/unrelated places.
We have a note in one of our headers that describe it, and the solution 
we adopted

/* Note: Under Windows 64-bit a 64-bit integer is __int64 and when used
  * with scanf the format must be %lld.  This is not exactly what we call
  * POSIX-clean where %ld is expected.  Thus, in places where such 64-bit
  * variables are processed we let the compiler build the actual format
  * using the GMT_LL string which is either "l" or "ll"
  */
#ifdef _WIN64
typedef __int64 GMT_LONG;    /* A signed 8-byte integer under 64-bit 
Windows */
#define GMT_LL "ll"
#else
typedef long GMT_LONG;        /* A signed 4 (or 8-byte for 64-bit) 
integer */
#define GMT_LL "l"
#endif


than we use it for example like

     sscanf (p, "%" GMT_LL "d-%" GMT_LL "d", &start, &stop);


Excuse if this trivia for you guys (it wasn't for us)

Joaquim Luis

From peifer at gmx.eu  Sat Sep 11 09:11:12 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Sat Sep 11 09:10:57 2010
Subject: [gdal-dev] Re: Creating shape file from csv with double quotes in
	attribute
In-Reply-To: <4C8A59CE.4070501@noaa.gov>
References: <4C8A59CE.4070501@noaa.gov>
Message-ID: <4C8B7FF0.8060004@gmx.eu>

On 10/09/2010 18:16, Upendra Dadi wrote:
> Hi,
> I have a query on creating shapefile from csv. I am not sure if this is
> the correct forum for it. Thought I should try it anyway.
> I have a csv file consisting of lat/lon and an attribute with double
> quotes like this:
> "<a
> href="http://data.nodc.noaa.gov/thredds/dodsC/gtspp/atlantic/2010/07/9670278.nc.html"
> target="_blank">Data URL</a>"
>
> When I create the shape file from this file using a vrt file, the shape
> file has this value for the attribute:
> <a
> href=http://data.nodc.noaa.gov/thredds/dodsC/gtspp/atlantic/2010/07/9670278.nc
>
>
> As you can see, the double quotes are gone and the attribute is
> truncated. How do I overcome this problem? Any help is appreciated.
>

I managed to fix the quote issue with: sed 's/"/"""/g'

The truncation issue comes from the shapefile driver's default width for 
string fields (80 characters). But one can create a .csvt file, as 
explained at: http://www.gdal.org/ogr/drv_csv.html

I copied some more details to here (for better readability): 
http://pastebin.com/6yeAzAZc

Hermann
From axj4159 at cs.rit.edu  Sat Sep 11 14:01:37 2010
From: axj4159 at cs.rit.edu (Akhil Jaggarwal)
Date: Sat Sep 11 14:09:22 2010
Subject: [gdal-dev] TIFF write and comparison
Message-ID: <AANLkTi=UcnL6pwHzWUF7wzq_zH242tUsn2K7VQy+tB1s@mail.gmail.com>

Hi,

I just started using the GDAL C API.

I wrote some code that compares pixel values of 4 equally sized
GeoTIFFs, and depending on the values, writes the output to an output
TIFF.

I'd like to ask if:

1) I'm doing it the correct way, specifically if I'm writing the
pixels the correctly.
2) Is using CreateCopy() an ideal method to write projection
information? Should I write using Create() instead? tiffinfo output of
the output tiff does not state all the projection information using
CreateCopy().

Thanks.

Here's the code:

#include "/usr/include/gdal/gdal.h"
#include "/usr/include/gdal/cpl_conv.h" /* for CPLMalloc() */
#include "/usr/include/gdal/cpl_string.h"	// for createcopy()


int main(int argc, char **argv)
{
	GDALDatasetH  hDataset;

	GDALDatasetH  hDataset2;
	GDALDatasetH  hDataset3;
	GDALDatasetH  hDataset4;

	// output tiff
	GDALDatasetH hDestDS;

	GDALAllRegister();

	hDataset = GDALOpen( argv[1], GA_ReadOnly );
	hDataset2 = GDALOpen( argv[2], GA_ReadOnly );
	hDataset3 = GDALOpen( argv[3], GA_ReadOnly );
	hDataset4 = GDALOpen( argv[4], GA_ReadOnly );

	GDALDriverH   hDriver;
	GDALDriverH   hDriver2;
	GDALDriverH   hDriver3;
	GDALDriverH   hDriver4;

	// array to hold projection data
	double        adfGeoTransform[6];

	hDriver = GDALGetDatasetDriver( hDataset );
	hDriver2 = GDALGetDatasetDriver( hDataset2 );
	hDriver3 = GDALGetDatasetDriver( hDataset3 );
	hDriver4 = GDALGetDatasetDriver( hDataset4 );
	//	hDriver = GDALGetDatasetDriver( hDataset2 );
	//	hDriver = GDALGetDatasetDriver( hDataset3 );
	//	hDriver = GDALGetDatasetDriver( hDataset4 );
	printf( "Driver: %s/%s\n",
			GDALGetDriverShortName( hDriver ),
			GDALGetDriverLongName( hDriver ) );
	/* ====================== get TIFF attributes ========================= */
	printf( "Size is %dx%dx%d\n",
			GDALGetRasterXSize( hDataset ),
			GDALGetRasterYSize( hDataset ),
			GDALGetRasterCount( hDataset ) );

	/*	printf( "Size is %dx%dx%d\n",
		GDALGetRasterXSize( hDataset2 ),
		GDALGetRasterYSize( hDataset2 ),
		GDALGetRasterCount( hDataset2 ) );
		*/
	if( GDALGetProjectionRef( hDataset ) != NULL )
		printf( "Projection (dataset1) is `%s'\n", GDALGetProjectionRef( hDataset ) );

	/*	if( GDALGetProjectionRef( hDataset2 ) != NULL )
		printf( "Projection (dataset2) is `%s'\n", GDALGetProjectionRef(
hDataset2 ) );
		*/
	if( GDALGetGeoTransform( hDataset, adfGeoTransform ) == CE_None )
	{
		printf( "Origin = (%.6f,%.6f)\n",
				adfGeoTransform[0], adfGeoTransform[3] );

		printf( "Pixel Size = (%.6f,%.6f)\n",
				adfGeoTransform[1], adfGeoTransform[5] );
	}
	/* ================= Fetch raster data to read on later ================*/
	// fetching raster data
	//
	GDALRasterBandH hBand;
	GDALRasterBandH hBand2;
	GDALRasterBandH hBand3;
	GDALRasterBandH hBand4;
	int             nBlockXSize, nBlockYSize;
	int             bGotMin, bGotMax;
	double          adfMinMax[2];

	hBand = GDALGetRasterBand( hDataset, 1 );
	hBand2 = GDALGetRasterBand( hDataset, 1 );
	hBand3 = GDALGetRasterBand( hDataset, 1 );
	hBand4 = GDALGetRasterBand( hDataset, 1 );
	
	GDALGetBlockSize( hBand, &nBlockXSize, &nBlockYSize );
	printf( "Block=%dx%d Type=%s, ColorInterp=%s\n",
			nBlockXSize, nBlockYSize,
			GDALGetDataTypeName(GDALGetRasterDataType(hBand)),
			GDALGetColorInterpretationName(
				GDALGetRasterColorInterpretation(hBand)) );

	adfMinMax[0] = GDALGetRasterMinimum( hBand, &bGotMin );
	adfMinMax[1] = GDALGetRasterMaximum( hBand, &bGotMax );
	if( ! (bGotMin && bGotMax) )
		GDALComputeRasterMinMax( hBand, TRUE, adfMinMax );

	printf( "Min=%.3fd, Max=%.3f\n", adfMinMax[0], adfMinMax[1] );

	if( GDALGetOverviewCount(hBand) > 0 )
		printf( "Band has %d overviews.\n", GDALGetOverviewCount(hBand));

	if( GDALGetRasterColorTable( hBand ) != NULL )
		printf( "Band has a color table with %d entries.\n",
				GDALGetColorEntryCount(
					GDALGetRasterColorTable( hBand ) ) );

	/* ================== check if format supports createcopy() ===== */

	const char *pszFormat = "GTiff";
	hDriver = GDALGetDriverByName( pszFormat );
	char ** papszMetadata;

	if (hDriver == NULL )
		exit(1);

	papszMetadata = GDALGetMetadata( hDriver, NULL );
	
	if( CSLFetchBoolean( papszMetadata, GDAL_DCAP_CREATE, FALSE ) ) {
			printf( "Driver %s supports Create() method.\n", pszFormat );

	}
		
	if( CSLFetchBoolean( papszMetadata, GDAL_DCAP_CREATECOPY, FALSE ) ) {
		printf( "Driver %s supports CreateCopy() method.\n", pszFormat );
	}
	/* ================== Read raster data ========================*/

	// for class tiff
	unsigned char * pafScanline;
	// for slope tiff
	short int * pafScanline2;
	// for elevation tiff
	short int * pafScanline3;
	// for wb1 tiff
	short int * pafScanline4;

	const char *pszDestFileName = "out_142029.tif";
	hDestDS = GDALCreateCopy(hDriver, pszDestFileName, hDataset, FALSE,
NULL, NULL, NULL );
	int nxSize = GDALGetRasterBandXSize( hBand );

	int nySize = GDALGetRasterBandYSize( hBand );
	printf("raster band xSize: %d\n", nxSize);
	printf("raster band ySize: %d\n", nySize);

	int rule1 = 5;
	int rule2 = 3;
        // pafScanline is a void pointer
	void *change1 = &rule1;
	void *change2 = &rule2;

	// allocate buffer to hold pixel data
	//
	// classification
	pafScanline = (unsigned char *)CPLMalloc(sizeof(unsigned char)*nxSize);
	// slope
	pafScanline2 = (short int *)CPLMalloc(sizeof(short int)*nxSize);
	// dem-elevation
	pafScanline3 = (short int *)CPLMalloc(sizeof(short int)*nxSize);
	// wb1
	pafScanline4 = (short int *)CPLMalloc(sizeof(short int)*nxSize);
	// erwflag, nxoff, nyoff, nxsize, nysize, pdata, nbufxsize, nbufysize,
	// ebuftype, npixelspace, nlinespace
	//

			//nBlockXSize, nBlockYSize,
	int i,j;
        // compare and read datasets, change values accordingly
	for(i = 0; i < nxSize; i++) {
		for(j = nySize; j < 5; j++) {
			GDALRasterIO(hBand, GF_Read, 0,0, i, j,	pafScanline,
			i, j,
			GDT_Byte,
			0, 0);
			GDALRasterIO(hBand, GF_Read, 0,0, i, j,	pafScanline2,
			i, j,
			GDT_Int16,
			0, 0);
			GDALRasterIO(hBand, GF_Read, 0,0, i, j,	pafScanline3,
			i, j,
			GDT_Int16,
			0, 0);
			GDALRasterIO(hBand, GF_Read, 0,0, i, j,	pafScanline4,
			i, j,
			GDT_Int16,
			0, 0);

			// read datasets, compare data and write
			if ( (pafScanline2[j] > 6 || pafScanline3[j] > 950) &&
					pafScanline[j] == 2) {
				GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
						change1, i, i, GDT_Byte, 0,0);
			}
			else if( (pafScanline4[j] < -700) &&
					pafScanline[j] == 6 ) {
				GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
						change2, i, i, GDT_Byte, 0,0);
			}
			else if( (pafScanline2[j] > 6) && pafScanline[j] == 3 ) {
				GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
						change2, i, i, GDT_Byte, 0,0);
			}
			else if((pafScanline3[j]>1500) && pafScanline[j] == 6) {
				GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
						change1, i, i, GDT_Byte, 0,0);
			}
			else
				GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
						&pafScanline[j], i, i, GDT_Byte, 0,0);
		//	printf("%u\n", pafScanline[j]);
		}
	}

	//	printf("width of pixels in this band: %d\n", );

	CPLFree(pafScanline);
	CPLFree(pafScanline2);
	CPLFree(pafScanline3);
	CPLFree(pafScanline4);
	
	GDALClose(hDataset);
	GDALClose(hDataset2);
	GDALClose(hDataset3);
	GDALClose(hDataset4);	
	GDALClose(hDestDS);

//	CSLDestroy(argv);
	GDALDestroyDriverManager();
	
	return 0;

}
From szekerest at gmail.com  Sun Sep 12 10:22:58 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Sep 12 10:23:00 2010
Subject: [gdal-dev] OGR MS SQL Spatial driver has been added
Message-ID: <AANLkTi=quVC=5NDt_v==qPE56eXk2MOzx6-zUrj=4exT@mail.gmail.com>

Folks,

For those who interested, I've now added the initial revision of the OGR MS
SQL Spatial driver to the GDAL repository. For further information please
refer to the driver information
page<http://www.gdal.org/ogr/drv_mssqlspatial.html>
.
Working binaries (which always contain all the recent fixes) can be
downloaded from the daily build system available at:
http://vbkto.dyndns.org/sdk/

Since I didn't have the chance to test with all kind of the fancy spatial
data types any feedback on the potential issues are graciously accepted.

Upon the experiences gathered when writing this driver, I'm also planning to
add support for accessing the native SqlGeometry/SqlGeography serialization
format in the MapServer sql2008 driver which appears to provide a
significant increment in the performance of the data retrieval.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100912/4520096d/attachment.html
From ari.jolma at gmail.com  Sun Sep 12 11:32:08 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sun Sep 12 11:32:17 2010
Subject: [gdal-dev] RFC 31 - OGR 64bit Fields and FID
In-Reply-To: <4C8AD121.1030708@ualg.pt>
References: <AANLkTimYctdi3ZeAqDKCRHBjV+e4zathBsUYkp0Yaeb-@mail.gmail.com>	<201009101950.58735.even.rouault@mines-paris.org>
	<4C8AD121.1030708@ualg.pt>
Message-ID: <4C8CF278.10205@gmail.com>

On 09/11/2010 03:45 AM, Joaquim Luis wrote:
>
> Hi,
>
> About the issue of the 64-bits ints on Windows we had quite some 
> troubles in GMT while implementing it.
> The problem, as far as I remember and I'm the one who suffered more 
> with it (other developers use Macs only), was that one cannot read as 
> %ld a variable that is a 64 bits int. There was no compiling or 
> running error, but memory was corrupted at totally 
> unexpected/unrelated places.
> We have a note in one of our headers that describe it, and the 
> solution we adopted
>
> /* Note: Under Windows 64-bit a 64-bit integer is __int64 and when used
>  * with scanf the format must be %lld.  This is not exactly what we call
>  * POSIX-clean where %ld is expected.  Thus, in places where such 64-bit
>  * variables are processed we let the compiler build the actual format
>  * using the GMT_LL string which is either "l" or "ll"
>  */
> #ifdef _WIN64
> typedef __int64 GMT_LONG;    /* A signed 8-byte integer under 64-bit 
> Windows */
> #define GMT_LL "ll"
> #else
> typedef long GMT_LONG;        /* A signed 4 (or 8-byte for 64-bit) 
> integer */
> #define GMT_LL "l"
> #endif
>
>
> than we use it for example like
>
>     sscanf (p, "%" GMT_LL "d-%" GMT_LL "d", &start, &stop);
>
>
> Excuse if this trivia for you guys (it wasn't for us)

Joaquim,

Have taken a look at this ticket and discussions?

http://trac.osgeo.org/gdal/ticket/2649

How 64 bit ints are handled in windows depend on which runtime libs are 
used.

Best regards,

Ari

>
> Joaquim Luis
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From candini at meeo.it  Mon Sep 13 10:45:30 2010
From: candini at meeo.it (canduc17)
Date: Mon Sep 13 10:45:34 2010
Subject: [gdal-dev] Copy only georeference between two images
Message-ID: <1284389130768-5526582.post@n2.nabble.com>


One simple question:

I have two identical images, exept for their their georeferentiation. They
represent the same scene, their sizes are identical, but one of them has a
correct UTM georeferentiation and the second one hasn't.

In which way can I copy and paste the correct georeferentiation from one to
another?

Thanks in advance.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Copy-only-georeference-between-two-images-tp5526582p5526582.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From christian.mueller at nvoe.at  Mon Sep 13 10:52:08 2010
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Mon Sep 13 10:54:00 2010
Subject: [gdal-dev] Copy only georeference between two images
In-Reply-To: <1284389130768-5526582.post@n2.nabble.com>
References: <1284389130768-5526582.post@n2.nabble.com>
Message-ID: <20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>

Do you have the georeference information included in your image file  
(geotiff for example) or do you have an extra world file containing 6  
lines of numbers.
In the second case, it is easy.

Quoting canduc17 <candini@meeo.it>:

>
> One simple question:
>
> I have two identical images, exept for their their georeferentiation. They
> represent the same scene, their sizes are identical, but one of them has a
> correct UTM georeferentiation and the second one hasn't.
>
> In which way can I copy and paste the correct georeferentiation from one to
> another?
>
> Thanks in advance.
> --
> View this message in context:   
> http://osgeo-org.1803224.n2.nabble.com/Copy-only-georeference-between-two-images-tp5526582p5526582.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From candini at meeo.it  Mon Sep 13 10:55:43 2010
From: candini at meeo.it (canduc17)
Date: Mon Sep 13 10:55:44 2010
Subject: [gdal-dev] Re: Copy only georeference between two images
In-Reply-To: <20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>
References: <1284389130768-5526582.post@n2.nabble.com>
	<20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>
Message-ID: <1284389743006-5526623.post@n2.nabble.com>


My case is the first one: with gdalinfo on one of my images I obtain:
Driver: GTiff/GeoTIFF
Files: AVN_CLS57_ALAV2A127252720_20080614_20100906.tif
Size is 8505, 8378
Coordinate System is:
PROJCS["WGS 84 / UTM zone 31N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",3],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32631"]]
Origin = (646644.437500000000000,4872539.500000000000000)
Pixel Size = (10.000000000000000,-10.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  646644.438, 4872539.500) (  4d49'43.67"E, 43d59'28.91"N)
Lower Left  (  646644.438, 4788759.500) (  4d48'21.90"E, 43d14'14.57"N)
Upper Right (  731694.438, 4872539.500) (  5d53'18.11"E, 43d58'10.13"N)
Lower Right (  731694.438, 4788759.500) (  5d51'9.09"E, 43d12'57.82"N)
Center      (  689169.438, 4830649.500) (  5d20'38.21"E, 43d36'17.27"N)
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Copy-only-georeference-between-two-images-tp5526582p5526623.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From christian.mueller at nvoe.at  Mon Sep 13 11:20:16 2010
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Mon Sep 13 11:20:23 2010
Subject: [gdal-dev] Re: Copy only georeference between two images
In-Reply-To: <1284389743006-5526623.post@n2.nabble.com>
References: <1284389130768-5526582.post@n2.nabble.com>
	<20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>
	<1284389743006-5526623.post@n2.nabble.com>
Message-ID: <20100913172016.zl3xczqchmow4kkw@webmail.nvoe.at>

And what is the output of the second image ?

Quoting canduc17 <candini@meeo.it>:

>
> My case is the first one: with gdalinfo on one of my images I obtain:
> Driver: GTiff/GeoTIFF
> Files: AVN_CLS57_ALAV2A127252720_20080614_20100906.tif
> Size is 8505, 8378
> Coordinate System is:
> PROJCS["WGS 84 / UTM zone 31N",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.2572235630016,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",3],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","32631"]]
> Origin = (646644.437500000000000,4872539.500000000000000)
> Pixel Size = (10.000000000000000,-10.000000000000000)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   COMPRESSION=LZW
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  646644.438, 4872539.500) (  4d49'43.67"E, 43d59'28.91"N)
> Lower Left  (  646644.438, 4788759.500) (  4d48'21.90"E, 43d14'14.57"N)
> Upper Right (  731694.438, 4872539.500) (  5d53'18.11"E, 43d58'10.13"N)
> Lower Right (  731694.438, 4788759.500) (  5d51'9.09"E, 43d12'57.82"N)
> Center      (  689169.438, 4830649.500) (  5d20'38.21"E, 43d36'17.27"N)
> --
> View this message in context:   
> http://osgeo-org.1803224.n2.nabble.com/Copy-only-georeference-between-two-images-tp5526582p5526623.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From candini at meeo.it  Mon Sep 13 11:22:12 2010
From: candini at meeo.it (canduc17)
Date: Mon Sep 13 11:22:15 2010
Subject: [gdal-dev] Re: Copy only georeference between two images
In-Reply-To: <20100913172016.zl3xczqchmow4kkw@webmail.nvoe.at>
References: <1284389130768-5526582.post@n2.nabble.com>
	<20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>
	<1284389743006-5526623.post@n2.nabble.com>
	<20100913172016.zl3xczqchmow4kkw@webmail.nvoe.at>
Message-ID: <1284391332967-5526728.post@n2.nabble.com>


It is the same, but the georef information is a little bit shifted.

So I have to copy the first georef into the second image.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Copy-only-georeference-between-two-images-tp5526582p5526728.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Ralf.Suhr at itc-halle.de  Mon Sep 13 11:28:54 2010
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Mon Sep 13 11:30:00 2010
Subject: [gdal-dev] Copy only georeference between two images
In-Reply-To: <1284389130768-5526582.post@n2.nabble.com>
References: <1284389130768-5526582.post@n2.nabble.com>
Message-ID: <201009131728.54465.Ralf.Suhr@itc-halle.de>

Use listgeo -tfw FILE and rename the new worldfile to the filename without 
georeferentiation. listgeo is from geotiff.

Gr
Ralf

Am Montag 13 September 2010 16:45:30 schrieb canduc17:
> One simple question:
> 
> I have two identical images, exept for their their georeferentiation. They
> represent the same scene, their sizes are identical, but one of them has a
> correct UTM georeferentiation and the second one hasn't.
> 
> In which way can I copy and paste the correct georeferentiation from one to
> another?
> 
> Thanks in advance.
> 
From ivan.lucena at pmldnet.com  Mon Sep 13 11:31:22 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon Sep 13 11:31:24 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUmU6IENvcHkgb25seSBnZW9yZWZlcmVuY2UgYmV0d2VlbiB0d28gaW1hZ2Vz?=
Message-ID: <20100913153122.23630.qmail@s466.sureserver.com>

- Using gdal_translate -a_srs you can make a copy of your second image with the assigned georeferece EPSG:32631.

- Using Python or other API you could Open the image in update mode and call SetProjectionRef with the WKT from the first image.

http://spatialreference.org/ref/epsg/32631/
http://gdal.org/gdal_translate.html
http://gdal.org/classGDALDataset.html#e2d2e231f6d632f8c2b2cf0078a01150


>  -------Original Message-------
>  From: canduc17 <candini@meeo.it>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] Re: Copy only georeference between two images
>  Sent: Sep 13 '10 10:22
>  
>  
>  It is the same, but the georef information is a little bit shifted.
>  
>  So I have to copy the first georef into the second image.
>  --
>  View this message in context: http://osgeo-org.1803224.n2.nabble.com/Copy-only-georeference-between-two-images-tp5526582p5526728.html
>  Sent from the GDAL - Dev mailing list archive at Nabble.com.
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From christian.mueller at nvoe.at  Mon Sep 13 11:35:08 2010
From: christian.mueller at nvoe.at (christian.mueller@nvoe.at)
Date: Mon Sep 13 11:35:15 2010
Subject: [gdal-dev] Re: Copy only georeference between two images
In-Reply-To: <1284391332967-5526728.post@n2.nabble.com>
References: <1284389130768-5526582.post@n2.nabble.com>
	<20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>
	<1284389743006-5526623.post@n2.nabble.com>
	<20100913172016.zl3xczqchmow4kkw@webmail.nvoe.at>
	<1284391332967-5526728.post@n2.nabble.com>
Message-ID: <20100913173508.tgpl6bzio8s0so8c@webmail.nvoe.at>

I see your image is LZW compressed, AFAIK this is the same for png images.

Try the following

1) use gdal_translate to create a png file and a corresponding world  
file from your shifted image.
2) Open the world file with an editor and adjust the values
3) use gdal_translate to create a geotiff from the png file.
The interesting options are

-a_srs EPSG:32631
-co "COMPRESSION=LZW"
-of TIFF

4) Use gdalinfo and check the result

Perhaps there is a shorter way, but this is the way I would try it.

Cheers
Christian




Quoting canduc17 <candini@meeo.it>:

>
> It is the same, but the georef information is a little bit shifted.
>
> So I have to copy the first georef into the second image.
> --
> View this message in context:   
> http://osgeo-org.1803224.n2.nabble.com/Copy-only-georeference-between-two-images-tp5526582p5526728.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From dlowther at coordinatesolutions.com  Mon Sep 13 12:01:18 2010
From: dlowther at coordinatesolutions.com (David Lowther)
Date: Mon Sep 13 12:01:50 2010
Subject: [gdal-dev] OGR MS SQL Spatial driver has been added
In-Reply-To: <AANLkTi=quVC=5NDt_v==qPE56eXk2MOzx6-zUrj=4exT@mail.gmail.com>
References: <AANLkTi=quVC=5NDt_v==qPE56eXk2MOzx6-zUrj=4exT@mail.gmail.com>
Message-ID: <37CC42B551DD4326AEE1F1EC9C38804E@dlq6600>

Tamas,

 

Thanks for this great addition.  I pulled the latest working binaries and
can connect using ogrinfo and read datasets, but when trying to create I
receive the following:

 

D:\Utility\release-1600-x64-gdal-mapserver\bin\gdal\apps>ogr2ogr -f
MSSQLSpatial "MSSMSSQL:server=...;database=...;uid=...;pwd=..."
d:\data\ok\bia.shp

MSSQLSpatial driver failed to create
MSSMSSQL:server=...;database=...;uid=...;pwd=...

 

Here is a successful ogrinfo connect:

 

D:\Utility\release-1600-x64-gdal-mapserver\bin\gdal\apps>ogrinfo -al
"MSSQL:server=...;database=...;tables=pointdata;uid=...;pwd=... "

INFO: Open of
`MSSQL:server=...;database=...;tables=pointdata;uid=...;pwd=...'

 

      using driver `MSSQLSpatial' successful.

 

Layer name: pointdata

Geometry: Unknown (any)

Feature Count: 1

Extent: (100.000000, 100.000000) - (100.000000, 100.000000)

Layer SRS WKT:

(unknown)

FID Column = PKey

Geometry Column = Feature

WKT: String (0.0)

OGRFeature(pointdata):3

  WKT (String) = POINT (100 100)

  POINT (100 100)

 

I am certain that the user connecting to the database has sa rights. I've
tried more than one shapefile - and I know the shapefiles can be drawn by
Mapserver and seem valid when viewed from ogrinfo.

 

D:\Utility\release-1600-x64-gdal-mapserver\bin\gdal\apps>ogrinfo
d:\data\ok\bia.shp

INFO: Open of `d:\data\ok\bia.shp'

      using driver `ESRI Shapefile' successful.

1: bia (Polygon)

 

Any thoughts?

 

David Lowther

 

Coordinate Solutions, Inc.

 

  _____  

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Tamas Szekeres
Sent: Sunday, September 12, 2010 10:23 AM
To: gdal-dev
Subject: [gdal-dev] OGR MS SQL Spatial driver has been added

 

Folks,

For those who interested, I've now added the initial revision of the OGR MS
SQL Spatial driver to the GDAL repository. For further information please
refer to the driver information
<http://www.gdal.org/ogr/drv_mssqlspatial.html>  page.
Working binaries (which always contain all the recent fixes) can be
downloaded from the daily build system available at:
http://vbkto.dyndns.org/sdk/

Since I didn't have the chance to test with all kind of the fancy spatial
data types any feedback on the potential issues are graciously accepted.

Upon the experiences gathered when writing this driver, I'm also planning to
add support for accessing the native SqlGeometry/SqlGeography serialization
format in the MapServer sql2008 driver which appears to provide a
significant increment in the performance of the data retrieval.


Best regards,

Tamas

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100913/d60ea74a/attachment.html
From abhay.menon at gmail.com  Mon Sep 13 13:08:41 2010
From: abhay.menon at gmail.com (Abhay)
Date: Mon Sep 13 13:09:03 2010
Subject: [gdal-dev] OGR MS SQL Spatial driver has been added
In-Reply-To: <37CC42B551DD4326AEE1F1EC9C38804E@dlq6600>
References: <AANLkTi=quVC=5NDt_v==qPE56eXk2MOzx6-zUrj=4exT@mail.gmail.com>
	<37CC42B551DD4326AEE1F1EC9C38804E@dlq6600>
Message-ID: <AANLkTi=49BTMS+CeP9s=V1WZ=O19RXiz8nTUD0XfRmHZ@mail.gmail.com>

Try using "MSSQL:" instead of "MSSMSSQL:"

On Mon, Sep 13, 2010 at 9:31 PM, David Lowther <
dlowther@coordinatesolutions.com> wrote:

> MSSQL:server
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100913/f103efb9/attachment.html
From dlowther at coordinatesolutions.com  Mon Sep 13 13:10:13 2010
From: dlowther at coordinatesolutions.com (David Lowther)
Date: Mon Sep 13 13:10:45 2010
Subject: [gdal-dev] OGR MS SQL Spatial driver has been added
In-Reply-To: <AANLkTi=49BTMS+CeP9s=V1WZ=O19RXiz8nTUD0XfRmHZ@mail.gmail.com>
References: <AANLkTi=quVC=5NDt_v==qPE56eXk2MOzx6-zUrj=4exT@mail.gmail.com>
	<37CC42B551DD4326AEE1F1EC9C38804E@dlq6600>
	<AANLkTi=49BTMS+CeP9s=V1WZ=O19RXiz8nTUD0XfRmHZ@mail.gmail.com>
Message-ID: <25CBDFC564834D91B74933D9677249CD@dlq6600>

doh!

 

thanks!

 

 

David Lowther

 

Coordinate Solutions, Inc.

 

  _____  

From: Abhay [mailto:abhay.menon@gmail.com] 
Sent: Monday, September 13, 2010 1:09 PM
To: David Lowther
Cc: Tamas Szekeres; gdal-dev
Subject: Re: [gdal-dev] OGR MS SQL Spatial driver has been added

 

Try using "MSSQL:" instead of "MSSMSSQL:" 

On Mon, Sep 13, 2010 at 9:31 PM, David Lowther
<dlowther@coordinatesolutions.com> wrote:

MSSQL:server

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100913/51c469fa/attachment.html
From axj4159 at cs.rit.edu  Mon Sep 13 14:30:05 2010
From: axj4159 at cs.rit.edu (Akhil Jaggarwal)
Date: Mon Sep 13 14:31:08 2010
Subject: [gdal-dev] Re: TIFF write and comparison
Message-ID: <AANLkTi=pGS4v66M_+VQZ3aPMp0Rky0c=74R7Q9hhg3y2@mail.gmail.com>

Hi,

I've shortened my questions to exactly this part of the code:

 // read datasets, compare data and write
                       if ( (pafScanline2[j] > 6 || pafScanline3[j] > 950) &&
                                       pafScanline[j] == 2) {
                               GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
                                               change1, i, j, GDT_Byte, 0,0);
                       }
                       else if( (pafScanline4[j] < -700) &&
                                       pafScanline[j] == 6 ) {
                               GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
                                               change2, i, j, GDT_Byte, 0,0);
                       }
                       else if( (pafScanline2[j] > 6) && pafScanline[j] == 3 ) {
                               GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
                                               change2, i, j, GDT_Byte, 0,0);
                       }
                       else if((pafScanline3[j]>1500) && pafScanline[j] == 6) {
                               GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
                                               change1, i, j, GDT_Byte, 0,0);
                       }
                       else
                               GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
                                               &pafScanline[j], i, j,
GDT_Byte, 0,0);
               //      printf("%u\n", pafScanline[j]);


1) Am I writing pixels the correct way?

As of now I am getting just the exact copy of the input TIFF without
any pixel modifications. Where step am I doing wrong.

Any help would be great!

Thanks.
From gml.check.tool at gmail.com  Mon Sep 13 21:50:18 2010
From: gml.check.tool at gmail.com (eros)
Date: Mon Sep 13 21:50:21 2010
Subject: [gdal-dev] Re: GML 3.1.1
In-Reply-To: <20090620120822.GM5615@moon.overmeer.net>
References: <ECDBB484CB145E429AAB0661F935E4E33174813EBD@SLOTHMAIL.eea.eu.int>
	<20090620120822.GM5615@moon.overmeer.net>
Message-ID: <1284429018879-5528649.post@n2.nabble.com>


likewise here...
we are adopting 3.2.1 and trying to create GML 3.2.1 validation tool but
getting hard to it..

thanks a lot guys for making our life easier..
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GML-3-1-1-tp3124401p5528649.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From axj4159 at cs.rit.edu  Mon Sep 13 23:54:35 2010
From: axj4159 at cs.rit.edu (Akhil Jaggarwal)
Date: Mon Sep 13 23:55:38 2010
Subject: [gdal-dev] Re: TIFF write and comparison
In-Reply-To: <AANLkTi=x6gvH9vGMh_=q7_NHKGfrPKZEnVaYFNBV12QU@mail.gmail.com>
References: <AANLkTi=pGS4v66M_+VQZ3aPMp0Rky0c=74R7Q9hhg3y2@mail.gmail.com>
	<AANLkTi=x6gvH9vGMh_=q7_NHKGfrPKZEnVaYFNBV12QU@mail.gmail.com>
Message-ID: <AANLkTi=sq9tBF5U-2HjaTwi+bHb9zz3mgqokfVGmtjPO@mail.gmail.com>

Hi,

Thank you for the reply.

Calls to GDALRasterIO() are OK. Which I assume in a line interleaved
format look like this:

 GDALRasterIO(hBand, GF_Read, 0,0, i, j, pafScanline,
                        nBlockXSize, nBlockYSize,
                        GDT_Int16,
                        0, 0);

Is that correct?

Also, the statement: if(pafScanline[j] == pixel_value), is that a
correct way to check if a pixel value at the jth col is equal to some
constant?

pafScanline is declared as follows: short int * pafScanline. In the
API, pdata is a void *.

Is this way to substitute the value of a pixel (of short int type)
according to a rule, and then writing the pixel back to the TIFF a
correct way? -

short int rule1 = 1;
void *change = malloc(sizeof(short int));
change1 = &rule1;
...
...
...
GDALRasterIO( hDestDS, GF_Write, 0,0, i,j, change1,
nBlockXSize,nBlockYSize , GDT_Int16, 0,0);

Thanks.

On Mon, Sep 13, 2010 at 4:40 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com> wrote:
> Akhil,
>
> Check which of the GDALRasterIO() calls are made.
>
> Also, I noticed that you are calling GDALRasterIO() to read the data pixel
> by pixel. Line by line will be faster, especially if the data is line
> interleaved.
>
> On Mon, Sep 13, 2010 at 8:30 PM, Akhil Jaggarwal <axj4159@cs.rit.edu> wrote:
>>
>> Hi,
>>
>> I've shortened my questions to exactly this part of the code:
>>
>> ?// read datasets, compare data and write
>> ? ? ? ? ? ? ? ? ? ? ? if ( (pafScanline2[j] > 6 || pafScanline3[j] > 950)
>> &&
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? pafScanline[j] == 2) {
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? change1, i, j, GDT_Byte,
>> 0,0);
>> ? ? ? ? ? ? ? ? ? ? ? }
>> ? ? ? ? ? ? ? ? ? ? ? else if( (pafScanline4[j] < -700) &&
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? pafScanline[j] == 6 ) {
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? change2, i, j, GDT_Byte,
>> 0,0);
>> ? ? ? ? ? ? ? ? ? ? ? }
>> ? ? ? ? ? ? ? ? ? ? ? else if( (pafScanline2[j] > 6) && pafScanline[j] ==
>> 3 ) {
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? change2, i, j, GDT_Byte,
>> 0,0);
>> ? ? ? ? ? ? ? ? ? ? ? }
>> ? ? ? ? ? ? ? ? ? ? ? else if((pafScanline3[j]>1500) && pafScanline[j] ==
>> 6) {
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? change1, i, j, GDT_Byte,
>> 0,0);
>> ? ? ? ? ? ? ? ? ? ? ? }
>> ? ? ? ? ? ? ? ? ? ? ? else
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? &pafScanline[j], i, j,
>> GDT_Byte, 0,0);
>> ? ? ? ? ? ? ? // ? ? ?printf("%u\n", pafScanline[j]);
>>
>>
>> 1) Am I writing pixels the correct way?
>>
>> As of now I am getting just the exact copy of the input TIFF without
>> any pixel modifications. Where step am I doing wrong.
>>
>> Any help would be great!
>>
>> Thanks.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
From mark at overmeer.net  Tue Sep 14 05:10:51 2010
From: mark at overmeer.net (Mark Overmeer)
Date: Tue Sep 14 05:11:58 2010
Subject: [gdal-dev] Re: GML 3.1.1
In-Reply-To: <1284429018879-5528649.post@n2.nabble.com>
References: <ECDBB484CB145E429AAB0661F935E4E33174813EBD@SLOTHMAIL.eea.eu.int>
	<20090620120822.GM5615@moon.overmeer.net>
	<1284429018879-5528649.post@n2.nabble.com>
Message-ID: <20100914091051.GP6564@moon.overmeer.net>

* eros (gml.check.tool@gmail.com) [100914 01:50]:
> likewise here...
> we are adopting 3.2.1 and trying to create GML 3.2.1 validation tool but
> getting hard to it..

I have created the Perl module Geo::GML, which is capable of reading
and writing any version of GML. While reading it strictly validating
against the schemas.

It should even be possible to upgrade data to newer versions of GML,
although I did not intensively test that.
-- 
CU,
               MarkOv
From candini at meeo.it  Tue Sep 14 05:17:07 2010
From: candini at meeo.it (canduc17)
Date: Tue Sep 14 05:17:11 2010
Subject: [gdal-dev] Re: Copy only georeference between two images
In-Reply-To: <20100913173508.tgpl6bzio8s0so8c@webmail.nvoe.at>
References: <1284389130768-5526582.post@n2.nabble.com>
	<20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>
	<1284389743006-5526623.post@n2.nabble.com>
	<20100913172016.zl3xczqchmow4kkw@webmail.nvoe.at>
	<1284391332967-5526728.post@n2.nabble.com>
	<20100913173508.tgpl6bzio8s0so8c@webmail.nvoe.at>
Message-ID: <1284455827037-5529496.post@n2.nabble.com>


Thank you everyone.
I thought it was simpler.

@Ralf Suhr-3
I have produced the ftw file as you suggested:
           10.0000000000
            0.0000000000
            0.0000000000
          -10.0000000000
       584018.5625000000
      5147058.5000000000
but why the values are different from gdalinfo?
gdalinfo img.tif | grep Origin
Origin = (584013.562500000000000,5147063.500000000000000)
And what I'm suppose to do whith that? What is the file without
georeferentiation?

@Ivan Lucena
Unfortunately I don't have python support in my GDAL installation and I
cannot recompile it.
Using gdal_translate is ok, but is there another way to avoid rewriting on
disk the image (which is quite big)?
Is not possible to "paste" the info obtained by gdalinfo into my second
image?

@christian.mueller-
If it's exist, I would prefer an automatic way to solve my problem...


-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Copy-only-georeference-between-two-images-tp5526582p5529496.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jrepetto at free.fr  Tue Sep 14 05:32:33 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Tue Sep 14 05:43:14 2010
Subject: [gdal-dev] Re: Copy only georeference between two images
In-Reply-To: <1284455827037-5529496.post@n2.nabble.com>
References: <1284389130768-5526582.post@n2.nabble.com>	<20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>	<1284389743006-5526623.post@n2.nabble.com>	<20100913172016.zl3xczqchmow4kkw@webmail.nvoe.at>	<1284391332967-5526728.post@n2.nabble.com>	<20100913173508.tgpl6bzio8s0so8c@webmail.nvoe.at>
	<1284455827037-5529496.post@n2.nabble.com>
Message-ID: <4C8F4131.6050008@free.fr>

Le 14/09/2010 11:17, canduc17 a ?crit :
>
> @Ralf Suhr-3
> I have produced the ftw file as you suggested:
>             10.0000000000
>              0.0000000000
>              0.0000000000
>            -10.0000000000
>         584018.5625000000
>        5147058.5000000000
> but why the values are different from gdalinfo?
> gdalinfo img.tif | grep Origin
> Origin = (584013.562500000000000,5147063.500000000000000)

The world file contains the coordinates of the center of the upper left 
pixel of the map.
gdalinfo gives the coordinates of the upper left corner of the map.
You'll notice that the difference is equal to half the pixel size.
Have you read the Wikipedia article at 
http://en.wikipedia.org/wiki/World_file ?

Jean-Claude
From Ralf.Suhr at itc-halle.de  Tue Sep 14 05:44:16 2010
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Tue Sep 14 05:44:20 2010
Subject: [gdal-dev] Re: Copy only georeference between two images
In-Reply-To: <1284455827037-5529496.post@n2.nabble.com>
References: <1284389130768-5526582.post@n2.nabble.com>
	<20100913173508.tgpl6bzio8s0so8c@webmail.nvoe.at>
	<1284455827037-5529496.post@n2.nabble.com>
Message-ID: <201009141144.16462.Ralf.Suhr@itc-halle.de>

Hi canduc17,

Am Dienstag 14 September 2010 11:17:07 schrieb canduc17:
> Thank you everyone.
> I thought it was simpler.
> 
> @Ralf Suhr-3
> I have produced the ftw file as you suggested:
>            10.0000000000
>             0.0000000000
>             0.0000000000
>           -10.0000000000
>        584018.5625000000
>       5147058.5000000000
> but why the values are different from gdalinfo?

the world file coordinate is for the upper left corner. gdalinfo print 
coordinates from center of pixel. The difference (half pixelsize) is correct.

> gdalinfo img.tif | grep Origin
> Origin = (584013.562500000000000,5147063.500000000000000)
> And what I'm suppose to do whith that? What is the file without
> georeferentiation?

If your filename without UTM georeferentiation is secound.tif you have to copy 
img.tfw to secound.tfw

Gr
Ralf

> 
> @Ivan Lucena
> Unfortunately I don't have python support in my GDAL installation and I
> cannot recompile it.
> Using gdal_translate is ok, but is there another way to avoid rewriting on
> disk the image (which is quite big)?
> Is not possible to "paste" the info obtained by gdalinfo into my second
> image?
> 
> @christian.mueller-
> If it's exist, I would prefer an automatic way to solve my problem...
> 
From piva at meeo.it  Tue Sep 14 05:55:49 2010
From: piva at meeo.it (Giacomo Piva)
Date: Tue Sep 14 06:02:34 2010
Subject: [gdal-dev] Copy only georeference between two images
In-Reply-To: <1284389130768-5526582.post@n2.nabble.com>
References: <1284389130768-5526582.post@n2.nabble.com>
Message-ID: <4C8F46A5.6000606@meeo.it>

I think that you want to work in this way:
You can "copy" the georeference from an already opened dataset 
(inputhDataset) ...

         pszTargetSRS = (char *)GDALGetProjectionRef(inputhDataset);
         GDALGetGeoTransform(inputhDataset, padfGeoTransform);
         nGCPCount = GDALGetGCPCount(inputhDataset);

         if(nGCPCount != 0){
             pasGCPList = GDALGetGCPs(inputhDataset);
             pszGCPProjection = GDALGetGCPProjection(inputhDataset);
         }

Then, you can "paste" the georeference information to the output dataset 
(outputhDataset) in this way:

         GDALSetProjection(outputhDataset, pszTargetSRS);
         GDALSetGeoTransform(outputhDataset, padfGeoTransform);

         if (nGCPCount != 0)
             
GDALSetGCPs(outputhDataset,nGCPCount,pasGCPList,pszGCPProjection);

where the used variables are:

     GDALDatasetH outputhDataset;
     GDALDatasetH inputhDataset;

     const GDAL_GCP *pasGCPList;
     const char *pszGCPProjection;
     int nGCPCount;
     double padfGeoTransform[6];
     char *pszTargetSRS;

On 09/13/2010 04:45 PM, canduc17 wrote:
> One simple question:
>
> I have two identical images, exept for their their georeferentiation. They
> represent the same scene, their sizes are identical, but one of them has a
> correct UTM georeferentiation and the second one hasn't.
>
> In which way can I copy and paste the correct georeferentiation from one to
> another?
>
> Thanks in advance.
>    


-- 
Giacomo Piva

MEEO S.r.l.
Via Saragat 9
I-44122 Ferrara, Italy
Tel: +39 0532 1861501
Fax: +39 0532 1861637
http://www.meeo.it

========================================
"ATTENZIONE:le informazioni contenute in questo messaggio sono
da considerarsi confidenziali ed il loro utilizzo ? riservato unicamente
al destinatario sopra indicato. Chi dovesse ricevere questo messaggio
per errore ? tenuto ad informare il mittente ed a rimuoverlo
definitivamente da ogni supporto elettronico o cartaceo."

"WARNING:This message contains confidential and/or proprietary
information which may be subject to privilege or immunity and which
is intended for use of its addressee only. Should you receive this
message in error, you are kindly requested to inform the sender and
to definitively remove it from any paper or electronic format."

From candini at meeo.it  Tue Sep 14 06:23:08 2010
From: candini at meeo.it (canduc17)
Date: Tue Sep 14 06:23:12 2010
Subject: [gdal-dev] Re: Copy only georeference between two images
In-Reply-To: <201009141144.16462.Ralf.Suhr@itc-halle.de>
References: <1284389130768-5526582.post@n2.nabble.com>
	<20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>
	<1284389743006-5526623.post@n2.nabble.com>
	<20100913172016.zl3xczqchmow4kkw@webmail.nvoe.at>
	<1284391332967-5526728.post@n2.nabble.com>
	<20100913173508.tgpl6bzio8s0so8c@webmail.nvoe.at>
	<1284455827037-5529496.post@n2.nabble.com>
	<201009141144.16462.Ralf.Suhr@itc-halle.de>
Message-ID: <1284459788143-5529669.post@n2.nabble.com>


My files have both the georeferentiation, but one is correct and the other
one is wrong.
And the georeferentiation is INSIDE the geotiff file, not in a separated
.tfw file.

I would like to obtain only one file as output. To have only one GEOTiff
image with the corrected georef...
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Copy-only-georeference-between-two-images-tp5526582p5529669.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Ralf.Suhr at itc-halle.de  Tue Sep 14 06:46:41 2010
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Tue Sep 14 06:46:47 2010
Subject: [gdal-dev] Re: Copy only georeference between two images
In-Reply-To: <1284459788143-5529669.post@n2.nabble.com>
References: <1284389130768-5526582.post@n2.nabble.com>
	<201009141144.16462.Ralf.Suhr@itc-halle.de>
	<1284459788143-5529669.post@n2.nabble.com>
Message-ID: <201009141246.42287.Ralf.Suhr@itc-halle.de>

You have a wrong georeferentiation? I think it is better to transform this 
"wrong" georeferentiation.

The quick way: strip geotiff information with mogrify -strip. Now the 
information from world file will be used.

Gr
Ralf

Am Dienstag 14 September 2010 12:23:08 schrieb canduc17:
> My files have both the georeferentiation, but one is correct and the other
> one is wrong.
> And the georeferentiation is INSIDE the geotiff file, not in a separated
> .tfw file.
> 
> I would like to obtain only one file as output. To have only one GEOTiff
> image with the corrected georef...
> 
From candini at meeo.it  Tue Sep 14 07:02:06 2010
From: candini at meeo.it (canduc17)
Date: Tue Sep 14 07:02:08 2010
Subject: [gdal-dev] Re: Copy only georeference between two images
In-Reply-To: <201009141246.42287.Ralf.Suhr@itc-halle.de>
References: <1284389130768-5526582.post@n2.nabble.com>
	<20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>
	<1284389743006-5526623.post@n2.nabble.com>
	<20100913172016.zl3xczqchmow4kkw@webmail.nvoe.at>
	<1284391332967-5526728.post@n2.nabble.com>
	<20100913173508.tgpl6bzio8s0so8c@webmail.nvoe.at>
	<1284455827037-5529496.post@n2.nabble.com>
	<201009141144.16462.Ralf.Suhr@itc-halle.de>
	<1284459788143-5529669.post@n2.nabble.com>
	<201009141246.42287.Ralf.Suhr@itc-halle.de>
Message-ID: <1284462126940-5529773.post@n2.nabble.com>


I have the correct georef in the first image and the wrong in the second.
I would like to copy the georef of the first into the second.

I will try mogrify, but I think that the easier way is to create a C program
as suggested above by Giacomo.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Copy-only-georeference-between-two-images-tp5526582p5529773.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ramprasad85 at gmail.com  Tue Sep 14 10:14:07 2010
From: ramprasad85 at gmail.com (Ramprasad N)
Date: Tue Sep 14 10:14:19 2010
Subject: [gdal-dev] Writing GDAL driver in windows
Message-ID: <4C8F832F.4040409@gmail.com>

  I am trying to write a GDAL driver.
I am using Visual Studio 2005
I am new to NMake project.
My problem is that even if I make a small change and compile(F7), it 
takes significant amount of time. also after compilation when I start 
debugging (F5 or F10 with gdal_translate.exe) it starts building again.
I only want to compile the modified file and the files affected by that. 
how do i do that?

Ramprasad N

From Sebastien.Donnet at amec.com  Tue Sep 14 10:56:32 2010
From: Sebastien.Donnet at amec.com (Donnet , Sebastien)
Date: Tue Sep 14 10:57:40 2010
Subject: [gdal-dev] NAD27 to NAD83
Message-ID: <B789270628BCF248BD517FA6466290E4010BEB4EEB51@ATT1-MBX1.global.amec.com>

Hi,

I have a bunch of data in NAD27 (lat, lon ascii files) that I would like to convert into NAD83.
How can I do that easily with gdal?

Up to now I've tried it like this:

gdaltransform -s_srs NAD27 -t_srs NAD83 < nad27.txt > nad83.txt

using a nad27.txt that looks like that (tab separated):

71.9881 -80.7771
71.9880 -80.7199
71.8889 -80.9131
71.8892 -80.9117
71.9041 -80.8410

but didn't go anywhere... a nad83.txt was created, but blank...
what input format am I supposed to provide?  (I tried comma separated among others...)

thanks in advance if you can help,


S/

________________________________
The information contained in this e-mail is intended only for the individual or entity to whom it is addressed.
Its contents (including any attachments) may contain confidential and/or privileged information.
If you are not an intended recipient you must not use, disclose, disseminate, copy or print its contents.
If you receive this e-mail in error, please notify the sender by reply e-mail and delete and destroy the message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100914/f2809b3c/attachment.html
From warmerdam at pobox.com  Tue Sep 14 11:12:20 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 14 11:12:26 2010
Subject: [gdal-dev] NAD27 to NAD83
In-Reply-To: <B789270628BCF248BD517FA6466290E4010BEB4EEB51@ATT1-MBX1.global.amec.com>
References: <B789270628BCF248BD517FA6466290E4010BEB4EEB51@ATT1-MBX1.global.amec.com>
Message-ID: <4C8F90D4.1050901@pobox.com>

Donnet , Sebastien wrote:
> Hi,
>  
> I have a bunch of data in NAD27 (lat, lon ascii files) that I would like 
> to convert into NAD83.
> How can I do that easily with gdal?
>  
> Up to now I've tried it like this:
>  
> gdaltransform -s_srs NAD27 -t_srs NAD83 < nad27.txt > nad83.txt
>  
> using a nad27.txt that looks like that (tab separated):
>  
> 71.9881 -80.7771
> 71.9880 -80.7199
> 71.8889 -80.9131
> 71.8892 -80.9117
> 71.9041 -80.8410
>  
> but didn't go anywhere... a nad83.txt was created, but blank... 
> what input format am I supposed to provide?  (I tried comma separated 
> among others...)

Sebastien,

It turns out they need to be space separated instead of tab separated.
Also, put the longitude first.  If you file a ticket on this limitation
we will likely get to fixing it.

gdaltransform -s_srs NAD27 -t_srs NAD83

-80.7771 71.9881
-80.776396134163 71.9887576959729 9.47713851928711e-05

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jrepetto at free.fr  Tue Sep 14 11:15:17 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Tue Sep 14 11:15:24 2010
Subject: [gdal-dev] NAD27 to NAD83
In-Reply-To: <B789270628BCF248BD517FA6466290E4010BEB4EEB51@ATT1-MBX1.global.amec.com>
References: <B789270628BCF248BD517FA6466290E4010BEB4EEB51@ATT1-MBX1.global.amec.com>
Message-ID: <4C8F9185.9060405@free.fr>

Le 14/09/2010 16:56, Donnet , Sebastien a ?crit :
> Hi,
> I have a bunch of data in NAD27 (lat, lon ascii files) that I would like
> to convert into NAD83.
> How can I do that easily with gdal?
> Up to now I've tried it like this:
> gdaltransform -s_srs NAD27 -t_srs NAD83 < nad27.txt > nad83.txt
> using a nad27.txt that looks like that (tab separated):
> 71.9881 -80.7771
> 71.9880 -80.7199
> 71.8889 -80.9131
> 71.8892 -80.9117
> 71.9041 -80.8410

Hello,

It is easier to use PROJ.4 :

cs2cs -r -s -f "%.4f" +proj=latlong +datum=NAD27 +to +proj=latlong 
+datum=NAD83 < nad27.txt
71.9888	-80.7764 0.0001
71.9887	-80.7192 0.0001
71.8896	-80.9124 0.0001
71.8899	-80.9110 0.0001
71.9048	-80.8403 0.0001

Jean-Claude
From ari.jolma at gmail.com  Tue Sep 14 11:37:06 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue Sep 14 11:37:08 2010
Subject: [gdal-dev] Re: GML 3.1.1
In-Reply-To: <20100914091051.GP6564@moon.overmeer.net>
References: <ECDBB484CB145E429AAB0661F935E4E33174813EBD@SLOTHMAIL.eea.eu.int>
	<20090620120822.GM5615@moon.overmeer.net>
	<1284429018879-5528649.post@n2.nabble.com>
	<20100914091051.GP6564@moon.overmeer.net>
Message-ID: <AANLkTikcA7m-VzDAQbcybNd9C6a3EmeaQsxiy7jcrpLw@mail.gmail.com>

2010/9/14 Mark Overmeer <mark@overmeer.net>

> * eros (gml.check.tool@gmail.com) [100914 01:50]:
> > likewise here...
> > we are adopting 3.2.1 and trying to create GML 3.2.1 validation tool but
> > getting hard to it..
>
> I have created the Perl module Geo::GML, which is capable of reading
> and writing any version of GML. While reading it strictly validating
> against the schemas.
>
> It should even be possible to upgrade data to newer versions of GML,
> although I did not intensively test that.
>


Mark,

Would it make sense to use Geo::GDAL (i.e., the Perl interface to GDAL) for
i/o data to GDAL and from there to any GDAL supported format or just for use
within GDAL? I.e. the pipeline would thus be:

GML(doc) <-> Geo::GML <-> Geo::GDAL <-> GDAL <-> any OGR format

Ari



> --
> CU,
>               MarkOv
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100914/c98180e4/attachment.html
From David.Hildebrand at afsc.ca  Tue Sep 14 11:55:20 2010
From: David.Hildebrand at afsc.ca (David Hildebrand)
Date: Tue Sep 14 11:52:02 2010
Subject: [gdal-dev] gdal_grid utility
Message-ID: <9188AB5935664040805E01E348A2B81D1BF68F35@lacex1.afsc.ads>

I am trying to grid a set of points.  My input is a CSV file for which I
have created a VRT file.  The input coordinate system is WGS84 but the
output is Transverse Mercator (for which I have an ESRI PRJ file).  The
command completes but the output is upside down.  Here is the command
line.

 

gdal_grid.exe

  -ot Float32

  -of GTiff

  -a_srs "a10tm.prj"

  -txe 134498.3 865501.7 -tye 5425283.9 6659287.2

  -outsize 73 123

  -a invdist:nodata=9999

  -l alberta_out

  "alberta_out.vrt" "abl_val_16.tif"

 

Here is the console output.

 

Grid data type is "Float32"

Grid size = (73 123).

Corner coordinates = (129491.408618 6664303.466297)-(870508.591382
5420267.656599).

Grid cell size = (10013.745713 10032.546852).

Source point count = 835.

Algorithm name: "invdist".

Options are
"power=2.000000:smoothing=0.000000:radius1=0.000000:radius2=0.000000

:angle=0.000000:max_points=0:min_points=0:nodata=9999.000000"

 

0...10...20...30...40...50...60...70...80...90...100 - done.

 

An output image is created but upside down.  The top should be the
bottom and vice versa.

 

Any ideas?  If so, please respond to this email address.  Thanks.

 

 

 

===========================
David V. Hildebrand
Agriculture Financial Services Corporation
(403) 782-8239   

www.afsc.ca <about:www.afsc.ca>  <http://www.afsc.ca
<http://www.afsc.ca/> >
This communication is intended for the use of the recipient to which it
is addressed, and may contain confidential, personal and/or privileged
information. Please contact Agriculture Financial Services Corporation
immediately if you are not the intended recipient of this communication,
and do not copy, distribute, or take action relying on it. Any
communication received in error, or subsequent reply, should be deleted
or destroyed. Please consider the environment before printing this
email.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100914/b7495dd5/attachment-0001.html
From mark at overmeer.net  Tue Sep 14 14:19:11 2010
From: mark at overmeer.net (Mark Overmeer)
Date: Tue Sep 14 14:19:16 2010
Subject: [gdal-dev] Re: GML 3.1.1
In-Reply-To: <AANLkTikcA7m-VzDAQbcybNd9C6a3EmeaQsxiy7jcrpLw@mail.gmail.com>
References: <ECDBB484CB145E429AAB0661F935E4E33174813EBD@SLOTHMAIL.eea.eu.int>
	<20090620120822.GM5615@moon.overmeer.net>
	<1284429018879-5528649.post@n2.nabble.com>
	<20100914091051.GP6564@moon.overmeer.net>
	<AANLkTikcA7m-VzDAQbcybNd9C6a3EmeaQsxiy7jcrpLw@mail.gmail.com>
Message-ID: <20100914181910.GD6564@moon.overmeer.net>

* Ari Jolma (ari.jolma@gmail.com) [100914 15:37]:
> Would it make sense to use Geo::GDAL (i.e., the Perl interface to GDAL)
> for i/o data to GDAL and from there to any GDAL supported format or just
> for use within GDAL?

Geo::GML translates XML (in this case representing GML data) into
Perl's nested HASHes and ARRAYs with the same structure (while
validating)  And the reverse: write GML.

> I.e. the pipeline would thus be:
> GML(doc) <-> Geo::GML <-> Geo::GDAL <-> GDAL <-> any OGR format

I do not understand this. Geo::GDAL/GDAL is an application, where
GML and OGR are formats.  So, it would be something like:

    Geo::GML->read($gml_doc)->Geo::GDAL::ogr_or_something($outfile)
                                  libGDAL

I have no idea how the data needs to be organized to be accepted
by the Geo::GDAL functions.
-- 
Greetz,   MarkOv
From David.Hildebrand at afsc.ca  Tue Sep 14 19:21:20 2010
From: David.Hildebrand at afsc.ca (David Hildebrand)
Date: Tue Sep 14 19:18:03 2010
Subject: [gdal-dev] RE: gdal_rasterize utility
References: <9188AB5935664040805E01E348A2B81D1BF68F35@lacex1.afsc.ads>
Message-ID: <9188AB5935664040805E01E348A2B81D1BF68F36@lacex1.afsc.ads>

I am trying to rasterize a set of points from a CSV file with
coordinates.  I have created a VRT file to define a virtual 2D layer.  I
am using version1.7 so I need to copy a template output image file to
rasterize (output.tif).  The field "abl_val" contains the data I want to
rasterize and "f_year" and "f_period" are filter attributes.  I use the
following syntax in my rasterize command.  

 

gdal_rasterize 

  -a abl_val -l alberta_out -where 'f_year = 2010 and f_period = 16 and
abl_val is not null' Alberta_Out.vrt output.tif

 

I simply get the standard usage message below indicating that my syntax
is wrong.  Yet, I cannot see it.

 

Usage: gdal_rasterize [-b band] [-i]

       [-burn value] | [-a attribute_name] | [-3d]

       [-l layername]* [-where expression] [-sql select_statement]

       <src_datasource> <dst_filename>

 

Any ideas?  If so, please respond to this email address.  Thanks.

 

===========================
David V. Hildebrand
Agriculture Financial Services Corporation
(403) 782-8239   

www.afsc.ca <about:www.afsc.ca>  <http://www.afsc.ca
<http://www.afsc.ca/> >
This communication is intended for the use of the recipient to which it
is addressed, and may contain confidential, personal and/or privileged
information. Please contact Agriculture Financial Services Corporation
immediately if you are not the intended recipient of this communication,
and do not copy, distribute, or take action relying on it. Any
communication received in error, or subsequent reply, should be deleted
or destroyed. Please consider the environment before printing this
email.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100914/572ce8b9/attachment.html
From michael.smith at usace.army.mil  Tue Sep 14 19:32:18 2010
From: michael.smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Tue Sep 14 19:35:09 2010
Subject: [gdal-dev] RFC28 OGR SQL Expressions now in trunk
In-Reply-To: <4C6AAC08.8000605@pobox.com>
Message-ID: <C8B57E42.21CF2%michael.smith@usace.army.mil>

Frank,

I was testing accesing the OGR_STYLE value from a kmz file using the LIBKML
driver. Previously this had worked.

u4rt9mds@maps:/htdocs/dhs/marine$ ogr2ogr -f OCI
oci:"user/pass@tns:marinetest MarineTraffic.kmz -nln MArineTest3 -lco dim=2
-lco srid-8265 -lco launder=yes -lco precision=no -sql "select *, ogr_style
from 0"
OGR: OGROpen(MarineTraffic.kmz/0x13bb63a0) succeeded as LIBKML.
ERROR 1: SQL Expression Parsing Error: syntax error

At revision 20614.

Mike




On 8/17/10 11:34 AM, "Frank Warmerdam" <warmerdam@pobox.com> wrote:

> Folks,
> 
> I have completed the migration of OGR SQL Expression support (RFC 28)
> into trunk, added testing and updated the documentation. Feel free to give
> it a try and let me know if/when you encounter problems.
> 
> Best regards,

From warmerdam at pobox.com  Tue Sep 14 21:00:15 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 14 21:00:20 2010
Subject: [gdal-dev] RFC28 OGR SQL Expressions now in trunk
In-Reply-To: <C8B57E42.21CF2%michael.smith@usace.army.mil>
References: <C8B57E42.21CF2%michael.smith@usace.army.mil>
Message-ID: <4C901A9F.6030107@pobox.com>

Smith, Michael ERDC-CRREL-NH wrote:
> Frank,
> 
> I was testing accesing the OGR_STYLE value from a kmz file using the LIBKML
> driver. Previously this had worked.
> 
> u4rt9mds@maps:/htdocs/dhs/marine$ ogr2ogr -f OCI
> oci:"user/pass@tns:marinetest MarineTraffic.kmz -nln MArineTest3 -lco dim=2
> -lco srid-8265 -lco launder=yes -lco precision=no -sql "select *, ogr_style
> from 0"
> OGR: OGROpen(MarineTraffic.kmz/0x13bb63a0) succeeded as LIBKML.
> ERROR 1: SQL Expression Parsing Error: syntax error

Mike,

The problem seems to be the table named 0 rather than the ogr_style
portion.  Currently well formed identifiers must start with a letter or
an underscore, not a numeric digit.  You can however quote it.

So 'select *, ogr_style from "0"' should work.

This is definitely a backward compatability issue, but it isn't clear to me
whether I ought to try and change it or not.  Thoughts welcome.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From axj4159 at cs.rit.edu  Tue Sep 14 23:07:14 2010
From: axj4159 at cs.rit.edu (Akhil Jaggarwal)
Date: Tue Sep 14 23:08:15 2010
Subject: [gdal-dev] Re: TIFF write and comparison
In-Reply-To: <AANLkTi=sq9tBF5U-2HjaTwi+bHb9zz3mgqokfVGmtjPO@mail.gmail.com>
References: <AANLkTi=pGS4v66M_+VQZ3aPMp0Rky0c=74R7Q9hhg3y2@mail.gmail.com>
	<AANLkTi=x6gvH9vGMh_=q7_NHKGfrPKZEnVaYFNBV12QU@mail.gmail.com>
	<AANLkTi=sq9tBF5U-2HjaTwi+bHb9zz3mgqokfVGmtjPO@mail.gmail.com>
Message-ID: <AANLkTikY3hN=OmgG4KEC5vOs4ciBu07ewiT9a2Q=O+3G@mail.gmail.com>

Hi,

Any comments/suggestions on this issue would be immensely helpful!

I'm storing the pixel values in a buffer like this:

 pafScanline = (short int*)CPLMalloc(sizeof(short int)*nxSize*nySize);

I can read the data alright. The call to GDALRasterIO is being made
correctly, which I do with:

GDALRasterIO(hBand, GF_Read, 0, 0, nxSize, nySize,
                        pafScanline,
                        nxSize,nySize,
                        GDT_Int16,
                        0, 0);
However, when it comes to the part of writing a pixel data to an
output file, the call to GDALRasterIO fails:

for(i = 0; i < nySize; i++) {
                for(j = 0; j < nxSize; j++) {

                        if( CE_Failure == GDALRasterIO( hDestDS,
GF_Write, 0, 0, j, i,
                          change1, j, i , GDT_Int16, 0,0) ) {
                                  printf("Write Error!");
                                  return 1;
                          }
              }
   }

Where change1 is a variable to hold pixel data that I want to change.
It's declared in the following manner:

short int*change1;
change1 = malloc(sizeof(short int));
*change1 = 1;

I can't get what exactly am I missing. The file i'm using is a tiled,
16 bit signed TIFF.

How do I change the value at a pixel location?

Thanks!



On Mon, Sep 13, 2010 at 11:54 PM, Akhil Jaggarwal <axj4159@cs.rit.edu> wrote:
> Hi,
>
> Thank you for the reply.
>
> Calls to GDALRasterIO() are OK. Which I assume in a line interleaved
> format look like this:
>
> ?GDALRasterIO(hBand, GF_Read, 0,0, i, j, pafScanline,
> ? ? ? ? ? ? ? ? ? ? ? ?nBlockXSize, nBlockYSize,
> ? ? ? ? ? ? ? ? ? ? ? ?GDT_Int16,
> ? ? ? ? ? ? ? ? ? ? ? ?0, 0);
>
> Is that correct?
>
> Also, the statement: if(pafScanline[j] == pixel_value), is that a
> correct way to check if a pixel value at the jth col is equal to some
> constant?
>
> pafScanline is declared as follows: short int * pafScanline. In the
> API, pdata is a void *.
>
> Is this way to substitute the value of a pixel (of short int type)
> according to a rule, and then writing the pixel back to the TIFF a
> correct way? -
>
> short int rule1 = 1;
> void *change = malloc(sizeof(short int));
> change1 = &rule1;
> ...
> ...
> ...
> GDALRasterIO( hDestDS, GF_Write, 0,0, i,j, change1,
> nBlockXSize,nBlockYSize , GDT_Int16, 0,0);
>
> Thanks.
>
> On Mon, Sep 13, 2010 at 4:40 PM, Chaitanya kumar CH
> <chaitanya.ch@gmail.com> wrote:
>> Akhil,
>>
>> Check which of the GDALRasterIO() calls are made.
>>
>> Also, I noticed that you are calling GDALRasterIO() to read the data pixel
>> by pixel. Line by line will be faster, especially if the data is line
>> interleaved.
>>
>> On Mon, Sep 13, 2010 at 8:30 PM, Akhil Jaggarwal <axj4159@cs.rit.edu> wrote:
>>>
>>> Hi,
>>>
>>> I've shortened my questions to exactly this part of the code:
>>>
>>> ?// read datasets, compare data and write
>>> ? ? ? ? ? ? ? ? ? ? ? if ( (pafScanline2[j] > 6 || pafScanline3[j] > 950)
>>> &&
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? pafScanline[j] == 2) {
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? change1, i, j, GDT_Byte,
>>> 0,0);
>>> ? ? ? ? ? ? ? ? ? ? ? }
>>> ? ? ? ? ? ? ? ? ? ? ? else if( (pafScanline4[j] < -700) &&
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? pafScanline[j] == 6 ) {
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? change2, i, j, GDT_Byte,
>>> 0,0);
>>> ? ? ? ? ? ? ? ? ? ? ? }
>>> ? ? ? ? ? ? ? ? ? ? ? else if( (pafScanline2[j] > 6) && pafScanline[j] ==
>>> 3 ) {
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? change2, i, j, GDT_Byte,
>>> 0,0);
>>> ? ? ? ? ? ? ? ? ? ? ? }
>>> ? ? ? ? ? ? ? ? ? ? ? else if((pafScanline3[j]>1500) && pafScanline[j] ==
>>> 6) {
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? change1, i, j, GDT_Byte,
>>> 0,0);
>>> ? ? ? ? ? ? ? ? ? ? ? }
>>> ? ? ? ? ? ? ? ? ? ? ? else
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? GDALRasterIO( hDestDS, GF_Write, 0,0, i,j,
>>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? &pafScanline[j], i, j,
>>> GDT_Byte, 0,0);
>>> ? ? ? ? ? ? ? // ? ? ?printf("%u\n", pafScanline[j]);
>>>
>>>
>>> 1) Am I writing pixels the correct way?
>>>
>>> As of now I am getting just the exact copy of the input TIFF without
>>> any pixel modifications. Where step am I doing wrong.
>>>
>>> Any help would be great!
>>>
>>> Thanks.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>> /t?a???nj?/ /k?m?r/
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
From warmerdam at pobox.com  Tue Sep 14 23:22:48 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 14 23:22:51 2010
Subject: [gdal-dev] RFC 30: Unicode Filenames - call for discussion
Message-ID: <4C903C08.9070302@pobox.com>

Folks,

A client has asked me to support unicode filenames on windows.  To that end
I have constructed an RFC for migration to treating all filesnames in the
GDAL API as utf-8.

   http://trac.osgeo.org/gdal/wiki/rfc30_utf8_filenames

I'd appreciate review and comment.  If all is well I hope to call for a vote
on this RFC late this week.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fabrice.lallauret at external.thalesgroup.com  Wed Sep 15 04:05:36 2010
From: fabrice.lallauret at external.thalesgroup.com (Fabrice LALLAURET - PSV)
Date: Wed Sep 15 04:08:20 2010
Subject: [gdal-dev] problem with unwanted white space in input file list for
	gdalbuildvrt
Message-ID: <4C907E50.4030605@external.thalesgroup.com>

  Hi all,
I try to use some gdal tools in a batch file on windows and I've a 
strange side effect. Here is a little batch use with fwtools 2.4.7.

@echo off
echo "Test 1 with file list"
del listin.txt test1.vrt test2.vrt
for %%F in (krel*.tif) do @echo %%F>>  listin.txt
gdalbuildvrt  -input_file_list listin.txt test1.vrt
echo "Test 2 with direct argument"
gdalbuildvrt  test2.vrt krel*.tif

And then the result of this script.

H:\>testgdal.bat
"Test 1 with file"
0...10...20...30...40...50Warning 6: gdalbuildvrt does not support positive NS
resolution. Skipping krel31.tif
...60...70...80...90...100 - done.
Warning 6: gdalbuildvrt does not support positive NS resolution. Skipping krel32.tif
"Test 2 with direct argument"
0...10...20...30...40...50...60...70...80...90...100 - done.

The two input files are all correct and when I use this command line :


Everything works.

After some investigations,(check my file, gdal debug compilation, try on 
linux too, ...), I've found that there is a space at the end of each 
line in my listin.txt. On linux, the same thing produce a clear error :


#>  gdalbuildvrt -input_file_list listin.txt toto.vrt
0...10...20...30...40...50ERROR 4: `krel31.tif ' does not exist in the file system,
and is not recognised as a supported dataset name.
Warning 1: Warning : can't open krel31.tif . Skipping it
...60...70...80...90...100 - done.
ERROR 4: `krel32.tif ' does not exist in the file system,
and is not recognised as a supported dataset name.
Warning 1: Warning : can't open krel32.tif . Skipping it


It will be a good  thing that gdalbuildvrt trim white space before 
reading file or have the same error on windows and linux.

Thanks

From candini at meeo.it  Wed Sep 15 04:26:38 2010
From: candini at meeo.it (canduc17)
Date: Wed Sep 15 04:26:42 2010
Subject: [gdal-dev] gdal_translate -mo option
Message-ID: <1284539198894-5533518.post@n2.nabble.com>


Hi everyone.

gdal_translate -mo "VALUE=1234" input.tif output.tif
works fine.

But what if I have to insert 2 or more metadata values?
gdal_translate -mo "VALUE_1=1234" -mo "VALUE_2=5678" input.tif output.tif
It doesn't work.
Is there any wildcard to use into -mo string to insert multiple values? For
example
gdal_translate -mo "VALUE_1=1234\nVALUE_2=5678" input.tif output.tif
Also this doesn't work.

Is it possible to do that?
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-translate-mo-option-tp5533518p5533518.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From fabrice.lallauret at external.thalesgroup.com  Wed Sep 15 04:37:07 2010
From: fabrice.lallauret at external.thalesgroup.com (Fabrice LALLAURET - PSV)
Date: Wed Sep 15 04:37:10 2010
Subject: [gdal-dev] problem with unwanted white space in input file list
	for	gdalbuildvrt
In-Reply-To: <4C907E50.4030605@external.thalesgroup.com>
References: <4C907E50.4030605@external.thalesgroup.com>
Message-ID: <4C9085B3.80102@external.thalesgroup.com>

  Le 09/15/2010 10:05 AM, Fabrice LALLAURET - PSV a ?crit :
>  Hi all,
> I try to use some gdal tools in a batch file on windows and I've a 
> strange side effect. Here is a little batch use with fwtools 2.4.7.
>
> @echo off
> echo "Test 1 with file list"
> del listin.txt test1.vrt test2.vrt
> for %%F in (krel*.tif) do @echo %%F>>  listin.txt
> gdalbuildvrt  -input_file_list listin.txt test1.vrt
> echo "Test 2 with direct argument"
> gdalbuildvrt  test2.vrt krel*.tif
>
> And then the result of this script.
>
> H:\>testgdal.bat
> "Test 1 with file"
> 0...10...20...30...40...50Warning 6: gdalbuildvrt does not support 
> positive NS
> resolution. Skipping krel31.tif
> ...60...70...80...90...100 - done.
> Warning 6: gdalbuildvrt does not support positive NS resolution. 
> Skipping krel32.tif
> "Test 2 with direct argument"
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> The two input files are all correct and when I use this command line :
>
>
> Everything works.
>
> After some investigations,(check my file, gdal debug compilation, try 
> on linux too, ...), I've found that there is a space at the end of 
> each line in my listin.txt. On linux, the same thing produce a clear 
> error :
>
>
> #>  gdalbuildvrt -input_file_list listin.txt toto.vrt
> 0...10...20...30...40...50ERROR 4: `krel31.tif ' does not exist in the 
> file system,
> and is not recognised as a supported dataset name.
> Warning 1: Warning : can't open krel31.tif . Skipping it
> ...60...70...80...90...100 - done.
> ERROR 4: `krel32.tif ' does not exist in the file system,
> and is not recognised as a supported dataset name.
> Warning 1: Warning : can't open krel32.tif . Skipping it
>
>
> It will be a good  thing that gdalbuildvrt trim white space before 
> reading file or have the same error on windows and linux.
>
> Thanks
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

I've found the problem in my script

for %%F in (krel*.tif) do @echo %%F>>   listin.txt


must be

for %%F in (krel*.tif) do @echo %%F>>   listin.txt # no white space between F and>  !!


But I don't understand the problem of reading the geolocation of the 
tiff and a white space in a  file ??

Regards


-- 
      .--.    Fabrice LALLAURET - PSV Team
     |o_o |   Tel: (33) (01 34) 22 83 47
     |:_/ |   Thales Training&  Simulation
    //   \ \  1, rue du General de Gaulle
   (|     | ) Z.I. les beaux soleils
  /'\_   _/`\ Osny. B.P. 226
  \___)=(___/ 95523 Cergy-Pontoise Cedex
  E-mail: fabrice.lallauret@external.thalesgroup.com
  "Power corrupts. PowerPoint corrupts absolutely."
  My personnal (french) Websites: http://www.xbee.net
  and http://www.french-comics-zone.fr.st


From ari.jolma at gmail.com  Wed Sep 15 04:51:27 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Sep 15 04:51:31 2010
Subject: [gdal-dev] Re: GML 3.1.1
In-Reply-To: <20100914181910.GD6564@moon.overmeer.net>
References: <ECDBB484CB145E429AAB0661F935E4E33174813EBD@SLOTHMAIL.eea.eu.int>
	<20090620120822.GM5615@moon.overmeer.net>
	<1284429018879-5528649.post@n2.nabble.com>
	<20100914091051.GP6564@moon.overmeer.net>
	<AANLkTikcA7m-VzDAQbcybNd9C6a3EmeaQsxiy7jcrpLw@mail.gmail.com>
	<20100914181910.GD6564@moon.overmeer.net>
Message-ID: <4C90890F.502@gmail.com>

On 09/14/2010 09:19 PM, Mark Overmeer wrote:
> * Ari Jolma (ari.jolma@gmail.com) [100914 15:37]:
>    
>> Would it make sense to use Geo::GDAL (i.e., the Perl interface to GDAL)
>> for i/o data to GDAL and from there to any GDAL supported format or just
>> for use within GDAL?
>>      
> Geo::GML translates XML (in this case representing GML data) into
> Perl's nested HASHes and ARRAYs with the same structure (while
> validating)  And the reverse: write GML.
>
>    
>> I.e. the pipeline would thus be:
>> GML(doc)<->  Geo::GML<->  Geo::GDAL<->  GDAL<->  any OGR format
>>      
> I do not understand this. Geo::GDAL/GDAL is an application, where
> GML and OGR are formats.  So, it would be something like:
>
>      Geo::GML->read($gml_doc)->Geo::GDAL::ogr_or_something($outfile)
>                                    libGDAL
>
> I have no idea how the data needs to be organized to be accepted
> by the Geo::GDAL functions.
>    

To write data into an OGR supported format (in-memory is also a format), 
you'd need to create a data source, then a layer, and then insert 
features into the layer. There are a few ways to actually do this. That 
should not be very difficult, I'd just need to know how that data is 
accessed from Geo::GML, which is in the docs I assume.

I'm wondering if Geo::GDAL should check for the availability of Geo::GML 
and if it is there, then do what? Enable a method to create a GDAL 
vector data source with the help of Geo::GML and a method to save a data 
source into GML with the help of Geo::GML? I'm not sure what are the 
issues between different versions of GML vs the data model for vector 
data in OGR.

Ari

From mark at overmeer.net  Wed Sep 15 05:14:11 2010
From: mark at overmeer.net (Mark Overmeer)
Date: Wed Sep 15 05:14:17 2010
Subject: [gdal-dev] Re: GML 3.1.1
In-Reply-To: <4C90890F.502@gmail.com>
References: <ECDBB484CB145E429AAB0661F935E4E33174813EBD@SLOTHMAIL.eea.eu.int>
	<20090620120822.GM5615@moon.overmeer.net>
	<1284429018879-5528649.post@n2.nabble.com>
	<20100914091051.GP6564@moon.overmeer.net>
	<AANLkTikcA7m-VzDAQbcybNd9C6a3EmeaQsxiy7jcrpLw@mail.gmail.com>
	<20100914181910.GD6564@moon.overmeer.net> <4C90890F.502@gmail.com>
Message-ID: <20100915091411.GD3306@moon.overmeer.net>

* Ari Jolma (ari.jolma@gmail.com) [100915 08:51]:
> To write data into an OGR supported format (in-memory is also a
> format), you'd need to create a data source, then a layer, and then
> insert features into the layer. There are a few ways to actually do
> this. That should not be very difficult, I'd just need to know how
> that data is accessed from Geo::GML, which is in the docs I assume.

Geo::GML reader produces pure Perl, not objects or methods. It's
a nested HASH as simple as that, reflecting the data in the document.
With
    print $gml->template(PERL => $type)
you get a nicely documented example of the data you can expect.

> Enable a method to create a GDAL vector data source with the help
> of Geo::GML

The program looks like this:

   use Geo::GML ':gml321';
   use Data::Dumper;

   my ($type, $data) = Geo::GML->from('data.xml');

   print Dumper $data;

For instance, when the input file contains
 <gml:multiExtentOf xmlns:gml="http://www.opengis.net/gml/3.2">
   <gml:MultiSurface srsName="EPGS:4326">
     <gml:surfaceMembers>
       <gml:Polygon>
         <gml:exterior>
           <gml:LinearRing>
             <gml:posList count="7">
               53.477199 6.139263 53.588759 5.359165 53.695178 4.5753
               52.762039 4.224426 52.656849 4.990792 52.54677 5.753162
               53.477199 6.139263
             </gml:posList>
           </gml:LinearRing>
         </gml:exterior>
       </gml:Polygon>
     </gml:surfaceMembers>
   </gml:MultiSurface>
 </gml:multiExtentOf>

The content of %$data will become

  {
  gml_MultiSurface => {
    srsName => 'EPGS:4326',
    gml_surfaceMembers => {

#     gml__Surface => [              # in GML3.1.1 syntax
      seq_gml_AbstractSurface => [   # in GML3.2.1 syntax
        { gml_Polygon => {
            gml_interior => [],
            gml_exterior => {
              gml_LinearRing => {
                gml_posList => {
                  count => 7,
                  _ => [
                    53.477199, 6.139263,
                    53.588759, 5.359165,
                    53.695178, 4.5753,
                    52.762039, 4.224426,
                    52.656849, 4.990792,
                    52.54677,  5.753162,
                    53.477199, 6.139263
                  ]
                }
              }
            }
          }
        }
      ]
    }
  } }

Then, recursively, you have to run through the $data and translate it
into internal GDAL data structures.

Of course, you can use any simple XML parser to get such a data-structure,
however with Geo::GML, the parsing is schema controled and validated.
For instance, an element which can be repeated will always be shows as
ARRAY, even if there is just one element.  In simple parsers, you often
needs constructs like

   my @interior = ref $data->{interior} eq 'ARRAY'
                ? @{$data->{interior}}
                : defined $data->{interior}
                ? $data->{interior}
                : ();

with XML::Compile, you can do

   my @interior = @{$data->{interior} || []};
-- 
CU,
               MarkOv
From szekerest at gmail.com  Wed Sep 15 05:23:05 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Sep 15 05:23:08 2010
Subject: [gdal-dev] RFC 30: Unicode Filenames - call for discussion
In-Reply-To: <4C903C08.9070302@pobox.com>
References: <4C903C08.9070302@pobox.com>
Message-ID: <AANLkTimPj2zWCRzz6dLCnAek0hniCY4yfVpJJxqQCirQ@mail.gmail.com>

Frank,

How do we know whether an unicode on an ansi string mapping should be
actually done in the bindings? With respect to the C# bindings the strings
are normally maintained as unicode in the C# side however the default
conversion option is "Charset.Ansi" in the interface causing the character
conversion is done automatically. When marshaling the stringlist values a
custom code in typemaps_csharp.i use
System.Runtime.InteropServices.Marshal.PtrToStringAnsi explicitly.

All of this mapping could also be set to unicode as well, however it's not
clear to me how to decide whether ansi or unicode mapping should actually be
done. Or do we intend to create 2 versions of each functions enumerated in
RFC 30?  Recall to switch between the unicode and ansi versions of the
WinAPI functions (like CreatefileW or CreateFileA) are normally selected
'globally' by using a compiler flag.

Best regards,

Tamas



2010/9/15 Frank Warmerdam <warmerdam@pobox.com>

> Folks,
>
> A client has asked me to support unicode filenames on windows.  To that end
> I have constructed an RFC for migration to treating all filesnames in the
> GDAL API as utf-8.
>
>  http://trac.osgeo.org/gdal/wiki/rfc30_utf8_filenames
>
> I'd appreciate review and comment.  If all is well I hope to call for a
> vote
> on this RFC late this week.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100915/ec51581e/attachment.html
From peifer at gmx.eu  Wed Sep 15 05:43:48 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed Sep 15 05:43:53 2010
Subject: [gdal-dev] Re: gdal_translate -mo option
In-Reply-To: <1284539198894-5533518.post@n2.nabble.com>
References: <1284539198894-5533518.post@n2.nabble.com>
Message-ID: <4C909554.5060308@gmx.eu>

On 15/09/2010 10:26, canduc17 wrote:
>
> gdal_translate -mo "VALUE_1=1234" -mo "VALUE_2=5678" input.tif output.tif
> It doesn't work.

Hmm. It works for me:

$ gdalinfo in.tif
Driver: GTiff/GeoTIFF
Files: in.tif
Size is 1, 1
Coordinate System is `'
Origin = (1.000000000000000,2.000000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (   1.0000000,   2.0000000)
Lower Left  (   1.0000000,   1.0000000)
Upper Right (   2.0000000,   2.0000000)
Lower Right (   2.0000000,   1.0000000)
Center      (   1.5000000,   1.5000000)
Band 1 Block=1x1 Type=Byte, ColorInterp=Gray
   NoData Value=0


$ gdal_translate -mo "VALUE_1=123" -mo "VALUE_2=456" -mo "VALUE_3=789" 
in.tif out.tif
Input file size is 1, 1
0...10...20...30...40...50...60...70...80...90...100 - done.

$ gdalinfo out.tif
Driver: GTiff/GeoTIFF
Files: out.tif
Size is 1, 1
Coordinate System is `'
Origin = (1.000000000000000,2.000000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Metadata:
   VALUE_1=123
   VALUE_2=456
   VALUE_3=789
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (   1.0000000,   2.0000000)
Lower Left  (   1.0000000,   1.0000000)
Upper Right (   2.0000000,   2.0000000)
Lower Right (   2.0000000,   1.0000000)
Center      (   1.5000000,   1.5000000)
Band 1 Block=1x1 Type=Byte, ColorInterp=Gray
   NoData Value=0
From ari.jolma at gmail.com  Wed Sep 15 06:49:26 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Sep 15 06:49:33 2010
Subject: [gdal-dev] RFC 30: Unicode Filenames - call for discussion
In-Reply-To: <4C903C08.9070302@pobox.com>
References: <4C903C08.9070302@pobox.com>
Message-ID: <4C90A4B6.2000502@gmail.com>

On 09/15/2010 06:22 AM, Frank Warmerdam wrote:
> Folks,
>
> A client has asked me to support unicode filenames on windows.  To 
> that end
> I have constructed an RFC for migration to treating all filesnames in the
> GDAL API as utf-8.
>
>   http://trac.osgeo.org/gdal/wiki/rfc30_utf8_filenames
>
> I'd appreciate review and comment.  If all is well I hope to call for 
> a vote
> on this RFC late this week.

My observation is that I can open data sources with non-ascii filenames 
in Linux but not in Windows using the Perl bindings. There's a bug in 
the Perl bindings to tell Perl that those same filenames when read back 
from GDAL are (I guess) utf-8.

Thus it seems to me that only the VSI windows functions need fixing.

Does Windows use utf-8 for filenames? If so, then fixing the back to 
utf-8 bug, would also work for windows, I guess.

Ari

>
> Best regards,

From mark at overmeer.net  Wed Sep 15 07:23:22 2010
From: mark at overmeer.net (Mark Overmeer)
Date: Wed Sep 15 07:23:27 2010
Subject: [gdal-dev] RFC 30: Unicode Filenames - call for discussion
In-Reply-To: <4C90A4B6.2000502@gmail.com>
References: <4C903C08.9070302@pobox.com>
 <4C90A4B6.2000502@gmail.com>
Message-ID: <20100915112322.GL3306@moon.overmeer.net>

* Ari Jolma (ari.jolma@gmail.com) [100915 10:49]:
> On 09/15/2010 06:22 AM, Frank Warmerdam wrote:
> >A client has asked me to support unicode filenames on windows.  To
> >that end
> >I have constructed an RFC for migration to treating all filesnames in the
> >GDAL API as utf-8.
> >
> >  http://trac.osgeo.org/gdal/wiki/rfc30_utf8_filenames
> >
> >I'd appreciate review and comment.  If all is well I hope to call
> >for a vote on this RFC late this week.
> 
> My observation is that I can open data sources with non-ascii
> filenames in Linux but not in Windows using the Perl bindings.
> There's a bug in the Perl bindings to tell Perl that those same
> filenames when read back from GDAL are (I guess) utf-8.

In UNIX/Linux, the charset used for filenames can differ per filesystem.
This means, in practice, that the charset is undefined; sometimes you
can find the charset for a filesys in /etc/fstab, sometimes only in the
filesys documentation. There is no systemcall which can tell you that.
It would be a nice addition to statfs().
What if you move a file between filesystems with different encodings?

> Does Windows use utf-8 for filenames? If so, then fixing the back to
> utf-8 bug, would also work for windows, I guess.

WINDOWS uses UTF16 with a subset of Unicode (all chars are two
bytes). See http://en.wikipedia.org/wiki/NTFS

Perl treats filenames as sequence of bytes, where a [/\:] have
a special meaning. You cannot convert filenames safely into utf8,
because they may already be in utf8 (or something else than latin1)
-- 
CU,
               MarkOv
From axj4159 at cs.rit.edu  Wed Sep 15 11:52:04 2010
From: axj4159 at cs.rit.edu (Akhil Jaggarwal)
Date: Wed Sep 15 11:53:14 2010
Subject: [gdal-dev] Writing pixel values
Message-ID: <AANLkTin-fU8iUzT9N7YJD8=AL2k_v-M2pkTQT3jSHjwa@mail.gmail.com>

Hi,

Any comments/suggestions on this issue would be immensely helpful!

I'm storing the pixel values in a buffer like this:

 pafScanline = (short int*)CPLMalloc(sizeof(short int)*nxSize*nySize);

I can read the data alright. The call to GDALRasterIO is being made
correctly, which I do with:

GDALRasterIO(hBand, GF_Read, 0, 0, nxSize, nySize,
                       pafScanline,
                       nxSize,nySize,
                       GDT_Int16,
                       0, 0);
However, when it comes to the part of writing a pixel data to an
output file, the call to GDALRasterIO fails:

for(i = 0; i < nySize; i++) {
               for(j = 0; j < nxSize; j++) {

                       if( CE_Failure == GDALRasterIO( hDestDS,
GF_Write, 0, 0, j, i,
                         change1, j, i , GDT_Int16, 0,0) ) {
                                 printf("Write Error!");
                                 return 1;
                         }
             }
  }

Where change1 is a variable to hold pixel data that I want to change.
It's declared in the following manner:

short int*change1;
change1 = malloc(sizeof(short int));
*change1 = 1;

I can't get what exactly am I missing. The file i'm using is a tiled,
16 bit signed TIFF.

How do I change the value at a pixel location?

Thanks!
From ivan.lucena at pmldnet.com  Wed Sep 15 11:58:21 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed Sep 15 11:58:23 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gV3JpdGluZyBwaXhlbCB2YWx1ZXM=?=
Message-ID: <20100915155821.9342.qmail@s466.sureserver.com>

Akhil,

How did you create or opened the output? Did you also create the bands before calling GDALRasterIO?

See examples on: http://gdal.org/gdal_tutorial.html

Regards,

Ivan


>  -------Original Message-------
>  From: Akhil Jaggarwal <axj4159@cs.rit.edu>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] Writing pixel values
>  Sent: Sep 15 '10 10:52
>  
>  Hi,
>  
>  Any comments/suggestions on this issue would be immensely helpful!
>  
>  I'm storing the pixel values in a buffer like this:
>  
>  pafScanline = (short int*)CPLMalloc(sizeof(short int)*nxSize*nySize);
>  
>  I can read the data alright. The call to GDALRasterIO is being made
>  correctly, which I do with:
>  
>  GDALRasterIO(hBand, GF_Read, 0, 0, nxSize, nySize,
>  ?????????????????????? pafScanline,
>  ?????????????????????? nxSize,nySize,
>  ?????????????????????? GDT_Int16,
>  ?????????????????????? 0, 0);
>  However, when it comes to the part of writing a pixel data to an
>  output file, the call to GDALRasterIO fails:
>  
>  for(i = 0; i < nySize; i++) {
>  ?????????????? for(j = 0; j < nxSize; j++) {
>  
>  ?????????????????????? if( CE_Failure == GDALRasterIO( hDestDS,
>  GF_Write, 0, 0, j, i,
>  ???????????????????????? change1, j, i , GDT_Int16, 0,0) ) {
>  ???????????????????????????????? printf("Write Error!");
>  ???????????????????????????????? return 1;
>  ???????????????????????? }
>  ???????????? }
>  ??}
>  
>  Where change1 is a variable to hold pixel data that I want to change.
>  It's declared in the following manner:
>  
>  short int*change1;
>  change1 = malloc(sizeof(short int));
>  *change1 = 1;
>  
>  I can't get what exactly am I missing. The file i'm using is a tiled,
>  16 bit signed TIFF.
>  
>  How do I change the value at a pixel location?
>  
>  Thanks!
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From axj4159 at cs.rit.edu  Wed Sep 15 13:58:03 2010
From: axj4159 at cs.rit.edu (Akhil Jaggarwal)
Date: Wed Sep 15 13:59:05 2010
Subject: [gdal-dev] Writing pixel values
In-Reply-To: <20100915155821.9342.qmail@s466.sureserver.com>
References: <20100915155821.9342.qmail@s466.sureserver.com>
Message-ID: <AANLkTi=WH-Z2j-6gt9Nvwf8SSh1k1HmG02xmN08WBwNw@mail.gmail.com>

Ivan,

I call CreateCopy() to create a copy of the input, because I need the
output to hold all the metadata.

 hDestDS = GDALCreateCopy( hDriver, pszDestFileName, hDataset, FALSE,
                                    NULL, NULL, NULL );


Is this how I create a new band for writing?

hDestDS = GDALOpen( pszDestFileName, GA_Update );

Thanks.

On Wed, Sep 15, 2010 at 11:58 AM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
> Akhil,
>
> How did you create or opened the output? Did you also create the bands before calling GDALRasterIO?
>
> See examples on: http://gdal.org/gdal_tutorial.html
>
> Regards,
>
> Ivan
>
>
>> ?-------Original Message-------
>> ?From: Akhil Jaggarwal <axj4159@cs.rit.edu>
>> ?To: gdal-dev@lists.osgeo.org
>> ?Subject: [gdal-dev] Writing pixel values
>> ?Sent: Sep 15 '10 10:52
>>
>> ?Hi,
>>
>> ?Any comments/suggestions on this issue would be immensely helpful!
>>
>> ?I'm storing the pixel values in a buffer like this:
>>
>> ?pafScanline = (short int*)CPLMalloc(sizeof(short int)*nxSize*nySize);
>>
>> ?I can read the data alright. The call to GDALRasterIO is being made
>> ?correctly, which I do with:
>>
>> ?GDALRasterIO(hBand, GF_Read, 0, 0, nxSize, nySize,
>> ??????????????????????? pafScanline,
>> ??????????????????????? nxSize,nySize,
>> ??????????????????????? GDT_Int16,
>> ??????????????????????? 0, 0);
>> ?However, when it comes to the part of writing a pixel data to an
>> ?output file, the call to GDALRasterIO fails:
>>
>> ?for(i = 0; i < nySize; i++) {
>> ??????????????? for(j = 0; j < nxSize; j++) {
>>
>> ??????????????????????? if( CE_Failure == GDALRasterIO( hDestDS,
>> ?GF_Write, 0, 0, j, i,
>> ????????????????????????? change1, j, i , GDT_Int16, 0,0) ) {
>> ????????????????????????????????? printf("Write Error!");
>> ????????????????????????????????? return 1;
>> ????????????????????????? }
>> ????????????? }
>> ???}
>>
>> ?Where change1 is a variable to hold pixel data that I want to change.
>> ?It's declared in the following manner:
>>
>> ?short int*change1;
>> ?change1 = malloc(sizeof(short int));
>> ?*change1 = 1;
>>
>> ?I can't get what exactly am I missing. The file i'm using is a tiled,
>> ?16 bit signed TIFF.
>>
>> ?How do I change the value at a pixel location?
>>
>> ?Thanks!
>> ?_______________________________________________
>> ?gdal-dev mailing list
>> ?gdal-dev@lists.osgeo.org
>> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From warmerdam at pobox.com  Wed Sep 15 14:06:10 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep 15 14:06:14 2010
Subject: [gdal-dev] Writing pixel values
In-Reply-To: <AANLkTin-fU8iUzT9N7YJD8=AL2k_v-M2pkTQT3jSHjwa@mail.gmail.com>
References: <AANLkTin-fU8iUzT9N7YJD8=AL2k_v-M2pkTQT3jSHjwa@mail.gmail.com>
Message-ID: <4C910B12.8090907@pobox.com>

Akhil Jaggarwal wrote:
> Hi,
> 
> Any comments/suggestions on this issue would be immensely helpful!
> 
> I'm storing the pixel values in a buffer like this:
> 
>  pafScanline = (short int*)CPLMalloc(sizeof(short int)*nxSize*nySize);
> 
> I can read the data alright. The call to GDALRasterIO is being made
> correctly, which I do with:
> 
> GDALRasterIO(hBand, GF_Read, 0, 0, nxSize, nySize,
>                        pafScanline,
>                        nxSize,nySize,
>                        GDT_Int16,
>                        0, 0);
> However, when it comes to the part of writing a pixel data to an
> output file, the call to GDALRasterIO fails:
> 
> for(i = 0; i < nySize; i++) {
>                for(j = 0; j < nxSize; j++) {
> 
>                        if( CE_Failure == GDALRasterIO( hDestDS,
> GF_Write, 0, 0, j, i,
>                          change1, j, i , GDT_Int16, 0,0) ) {
>                                  printf("Write Error!");
>                                  return 1;
>                          }
>              }
>   }

Akhil,

I observe a couple of issues.

First, you passing hDestDS instead of a band to GDALRasterIO when writing.

Second, you seem to want to write a single pixel, but you are passing i,j
as the sizes instead of the position.  Perhaps you mean:

GDALRasterIO( hDestBand, GF_Write,
               i, j, 1, 1,
               change1, 1, 1, GDT_Int16, 0, 0 );

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ari.jolma at gmail.com  Wed Sep 15 14:37:18 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Sep 15 14:37:29 2010
Subject: [gdal-dev] RFC 30: Unicode Filenames - call for discussion
In-Reply-To: <20100915112322.GL3306@moon.overmeer.net>
References: <4C903C08.9070302@pobox.com> <4C90A4B6.2000502@gmail.com>
	<20100915112322.GL3306@moon.overmeer.net>
Message-ID: <4C91125E.1080101@gmail.com>

On 09/15/2010 02:23 PM, Mark Overmeer wrote:
> * Ari Jolma (ari.jolma@gmail.com) [100915 10:49]:
>    
>> On 09/15/2010 06:22 AM, Frank Warmerdam wrote:
>>      
>>> A client has asked me to support unicode filenames on windows.  To
>>> that end
>>> I have constructed an RFC for migration to treating all filesnames in the
>>> GDAL API as utf-8.
>>>
>>>   http://trac.osgeo.org/gdal/wiki/rfc30_utf8_filenames
>>>
>>> I'd appreciate review and comment.  If all is well I hope to call
>>> for a vote on this RFC late this week.
>>>        
>> My observation is that I can open data sources with non-ascii
>> filenames in Linux but not in Windows using the Perl bindings.
>> There's a bug in the Perl bindings to tell Perl that those same
>> filenames when read back from GDAL are (I guess) utf-8.
>>      
> In UNIX/Linux, the charset used for filenames can differ per filesystem.
> This means, in practice, that the charset is undefined; sometimes you
> can find the charset for a filesys in /etc/fstab, sometimes only in the
> filesys documentation. There is no systemcall which can tell you that.
> It would be a nice addition to statfs().
> What if you move a file between filesystems with different encodings?
>
>    
>> Does Windows use utf-8 for filenames? If so, then fixing the back to
>> utf-8 bug, would also work for windows, I guess.
>>      
> WINDOWS uses UTF16 with a subset of Unicode (all chars are two
> bytes). See http://en.wikipedia.org/wiki/NTFS
>
> Perl treats filenames as sequence of bytes, where a [/\:] have
> a special meaning. You cannot convert filenames safely into utf8,
> because they may already be in utf8 (or something else than latin1)
>    

The idea of this RFC as I understand it is to build a layer into GDAL, 
which would take care of conversions between utf-8 and utf-16 (Windows 
end) transparently, thus making it similar to the current case of utf-8 
filesystem in unix. Everything should work fine as it is now, but I'll 
add encode (to utf8 by default) to be on the safe side.

In the case of unix with non utf8 filesystem determining the filename 
encoding is left for the user. The encoding is by default utf8 but can 
be changed.

Ari

From Chris.Barker at noaa.gov  Wed Sep 15 14:48:51 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Sep 15 14:48:54 2010
Subject: [gdal-dev] RFC 30: Unicode Filenames - call for discussion
In-Reply-To: <4C903C08.9070302@pobox.com>
References: <4C903C08.9070302@pobox.com>
Message-ID: <4C911513.6000504@noaa.gov>

Frank,

This looks great!

One comment about the python bindings:

"""
In theory functions that return filenames, such as gdal.ReadDir?() 
should return unicode strings for filenames, but from my perspective it 
seems adequate to always return utf-8 strings and let the application 
translate if needed.
"""

I think that's a mistake, if an app gets back a utf-8 string it has no 
way of knowing what the heck it is (accept by knowing the GDAL 
convention). So it will essentially always have to translate. And it's 
ripe for bugs, if when testing, the utf-8 string happen to be ascii 
compatible, things will just work, and then break when some odd 
character is inserted later in production.

Better for GDAL to return a unicode object. If the user really needs it 
as a byte string, they can convert, but the normal stuff like:

file()
os.path.*

etc.

will all work with a unicode object.


-Chris






-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From axj4159 at cs.rit.edu  Wed Sep 15 15:14:07 2010
From: axj4159 at cs.rit.edu (Akhil Jaggarwal)
Date: Wed Sep 15 15:15:08 2010
Subject: [gdal-dev] Writing pixel values
In-Reply-To: <20100915155821.9342.qmail@s466.sureserver.com>
References: <20100915155821.9342.qmail@s466.sureserver.com>
Message-ID: <AANLkTimCocpa1Qxzc_p5H_Zz_dS0_-dz+N9+Q9fAaj4q@mail.gmail.com>

Thanks, I understand what I was doing wrong and have appropriately
made some changes.

I created a new band to write using:

GDALRasterBandH hDestBand;

and open the dataset for writing:

hDestDS = GDALOpen( pszDestFileName, GA_Update );


Then I pass metadata:
hDestDS = GDALCreateCopy( hDriver, pszDestFileName, hDataset, FALSE,
                                      NULL, NULL, NULL );

And read all the dataset into pafscanfile buffer: (before starting the for loop)
 GDALRasterIO(hBand, GF_Read, 0, 0, nxSize, nySize,
                        pafScanline,
                        nxSize,nySize,
                        GDT_Int16,
                        0, 0);

However, when it comes to the part of writing the dataset, using:
  for(i = 0; i < nySize; i++) {
                for(j = 0; j < nxSize; j++) {
                         if( CE_Failure == GDALRasterIO( hDestBand,
GF_Write, j, i, 1, 1,
                          change1, 1, 1 , GDT_Int16, 0,0) ) {
                                  printf("Write Error!");
                                  return 1;
                          }

I get the error:

ERROR 5: Access window out of range in RasterIO().  Requested
(1,1) of size 1x1 on raster of 0x0.
Write Error

What am I missing here? It seems I 've to specify the the raster band
size of the ouput band. How can I do that?

Thanks once again.

On Wed, Sep 15, 2010 at 11:58 AM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
> Akhil,
>
> How did you create or opened the output? Did you also create the bands before calling GDALRasterIO?
>
> See examples on: http://gdal.org/gdal_tutorial.html
>
> Regards,
>
> Ivan
>
>
>> ?-------Original Message-------
>> ?From: Akhil Jaggarwal <axj4159@cs.rit.edu>
>> ?To: gdal-dev@lists.osgeo.org
>> ?Subject: [gdal-dev] Writing pixel values
>> ?Sent: Sep 15 '10 10:52
>>
>> ?Hi,
>>
>> ?Any comments/suggestions on this issue would be immensely helpful!
>>
>> ?I'm storing the pixel values in a buffer like this:
>>
>> ?pafScanline = (short int*)CPLMalloc(sizeof(short int)*nxSize*nySize);
>>
>> ?I can read the data alright. The call to GDALRasterIO is being made
>> ?correctly, which I do with:
>>
>> ?GDALRasterIO(hBand, GF_Read, 0, 0, nxSize, nySize,
>> ??????????????????????? pafScanline,
>> ??????????????????????? nxSize,nySize,
>> ??????????????????????? GDT_Int16,
>> ??????????????????????? 0, 0);
>> ?However, when it comes to the part of writing a pixel data to an
>> ?output file, the call to GDALRasterIO fails:
>>
>> ?for(i = 0; i < nySize; i++) {
>> ??????????????? for(j = 0; j < nxSize; j++) {
>>
>> ??????????????????????? if( CE_Failure == GDALRasterIO( hDestDS,
>> ?GF_Write, 0, 0, j, i,
>> ????????????????????????? change1, j, i , GDT_Int16, 0,0) ) {
>> ????????????????????????????????? printf("Write Error!");
>> ????????????????????????????????? return 1;
>> ????????????????????????? }
>> ????????????? }
>> ???}
>>
>> ?Where change1 is a variable to hold pixel data that I want to change.
>> ?It's declared in the following manner:
>>
>> ?short int*change1;
>> ?change1 = malloc(sizeof(short int));
>> ?*change1 = 1;
>>
>> ?I can't get what exactly am I missing. The file i'm using is a tiled,
>> ?16 bit signed TIFF.
>>
>> ?How do I change the value at a pixel location?
>>
>> ?Thanks!
>> ?_______________________________________________
>> ?gdal-dev mailing list
>> ?gdal-dev@lists.osgeo.org
>> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From ivan.lucena at pmldnet.com  Wed Sep 15 15:38:41 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed Sep 15 15:38:43 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gV3JpdGluZyBwaXhlbCB2YWx1ZXM=?=
Message-ID: <20100915193841.709.qmail@s466.sureserver.com>

Akhil,

If you loo at that section of the API Tutorial:

"Using CreateCopy()

The GDALDriver::CreateCopy() method can be used fairly simply..."

You will see that what you need to do is to call GDALOpen() with GA_ReadOnly passing the input file; then you would need to get a driver, with GDALGetDriverByName(); then call GDALCreateCopy() passing the driver and the output file name.

That returns the output dataset pointer read for writing. You don't need to call GDALOpen with GA_Update in that case.

You should call GDALGetRasterBand() from the input dataset and from the output dataset.

You can find example of that on the last "In C: " source code box on the GDAL API tutorial.

Please pay attention to what Frank said about the number of pixels that you are trying to write. He is the boss. :)

By the way, I am planning to visit RIT this fall with my son. What Al Pacino and Graig Ferguson are going to be doing together over there? :) (rit.edu).

Regards,

Ivan

>  -------Original Message-------
>  From: Akhil Jaggarwal <axj4159@cs.rit.edu>
>  To: gdal-dev@lists.osgeo.org
>  Subject: Re: [gdal-dev] Writing pixel values
>  Sent: Sep 15 '10 14:14
>  
>  Thanks, I understand what I was doing wrong and have appropriately
>  made some changes.
>  
>  I created a new band to write using:
>  
>  GDALRasterBandH hDestBand;
>  
>  and open the dataset for writing:
>  
>  hDestDS = GDALOpen( pszDestFileName, GA_Update );
>  
>  
>  Then I pass metadata:
>  hDestDS = GDALCreateCopy( hDriver, pszDestFileName, hDataset, FALSE,
>  ??????????????????????????????????????NULL, NULL, NULL );
>  
>  And read all the dataset into pafscanfile buffer: (before starting the for loop)
>  GDALRasterIO(hBand, GF_Read, 0, 0, nxSize, nySize,
>  ????????????????????????pafScanline,
>  ????????????????????????nxSize,nySize,
>  ????????????????????????GDT_Int16,
>  ????????????????????????0, 0);
>  
>  However, when it comes to the part of writing the dataset, using:
>  ??for(i = 0; i < nySize; i++) {
>  ????????????????for(j = 0; j < nxSize; j++) {
>  ???????????????????????? if( CE_Failure == GDALRasterIO( hDestBand,
>  GF_Write, j, i, 1, 1,
>  ??????????????????????????change1, 1, 1 , GDT_Int16, 0,0) ) {
>  ??????????????????????????????????printf("Write Error!");
>  ??????????????????????????????????return 1;
>  ??????????????????????????}
>  
>  I get the error:
>  
>  ERROR 5: Access window out of range in RasterIO().??Requested
>  (1,1) of size 1x1 on raster of 0x0.
>  Write Error
>  
>  What am I missing here? It seems I 've to specify the the raster band
>  size of the ouput band. How can I do that?
>  
>  Thanks once again.
>  
>  On Wed, Sep 15, 2010 at 11:58 AM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
>  > Akhil,
>  >
>  > How did you create or opened the output? Did you also create the bands before calling GDALRasterIO?
>  >
>  > See examples on: http://gdal.org/gdal_tutorial.html
>  >
>  > Regards,
>  >
>  > Ivan
>  >
>  >
>  >> ?-------Original Message-------
>  >> ?From: Akhil Jaggarwal <axj4159@cs.rit.edu>
>  >> ?To: gdal-dev@lists.osgeo.org
>  >> ?Subject: [gdal-dev] Writing pixel values
>  >> ?Sent: Sep 15 '10 10:52
>  >>
>  >> ?Hi,
>  >>
>  >> ?Any comments/suggestions on this issue would be immensely helpful!
>  >>
>  >> ?I'm storing the pixel values in a buffer like this:
>  >>
>  >> ?pafScanline = (short int*)CPLMalloc(sizeof(short int)*nxSize*nySize);
>  >>
>  >> ?I can read the data alright. The call to GDALRasterIO is being made
>  >> ?correctly, which I do with:
>  >>
>  >> ?GDALRasterIO(hBand, GF_Read, 0, 0, nxSize, nySize,
>  >> ??????????????????????? pafScanline,
>  >> ??????????????????????? nxSize,nySize,
>  >> ??????????????????????? GDT_Int16,
>  >> ??????????????????????? 0, 0);
>  >> ?However, when it comes to the part of writing a pixel data to an
>  >> ?output file, the call to GDALRasterIO fails:
>  >>
>  >> ?for(i = 0; i < nySize; i++) {
>  >> ??????????????? for(j = 0; j < nxSize; j++) {
>  >>
>  >> ??????????????????????? if( CE_Failure == GDALRasterIO( hDestDS,
>  >> ?GF_Write, 0, 0, j, i,
>  >> ????????????????????????? change1, j, i , GDT_Int16, 0,0) ) {
>  >> ????????????????????????????????? printf("Write Error!");
>  >> ????????????????????????????????? return 1;
>  >> ????????????????????????? }
>  >> ????????????? }
>  >> ???}
>  >>
>  >> ?Where change1 is a variable to hold pixel data that I want to change.
>  >> ?It's declared in the following manner:
>  >>
>  >> ?short int*change1;
>  >> ?change1 = malloc(sizeof(short int));
>  >> ?*change1 = 1;
>  >>
>  >> ?I can't get what exactly am I missing. The file i'm using is a tiled,
>  >> ?16 bit signed TIFF.
>  >>
>  >> ?How do I change the value at a pixel location?
>  >>
>  >> ?Thanks!
>  >> ?_______________________________________________
>  >> ?gdal-dev mailing list
>  >> ?gdal-dev@lists.osgeo.org
>  >> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >>
>  >
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From even.rouault at mines-paris.org  Wed Sep 15 16:16:51 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep 15 16:16:53 2010
Subject: [gdal-dev] RFC 30: Unicode Filenames - call for discussion
In-Reply-To: <4C903C08.9070302@pobox.com>
References: <4C903C08.9070302@pobox.com>
Message-ID: <201009152216.51445.even.rouault@mines-paris.org>

Frank,

About the question "Do we need to convert to UCS-16 to do parsing or can we 
safely assume that special characters like '/', '.', '\' and ':' never occur 
as part of UTF-8 multi-byte sequences?", I was unclear what you really meant, 
but here are my findings/beliefs :
* In a UTF-8 string, any (unsigned) byte whose value is <= 127 is guaranteed 
to be a single-character that is the one defined in the ASCII set (so any 
multibyte character has bytes whose value is >= 128)
* Now, if we look at a UCS-16 byte stream, I had a hard time to find the 
answer. But basically any unicode character >= 0x000 && <= 0xFFFF is directly 
"converted" into a single 16 bit code-point in UTF-16. If we consider the 
point character, it's ascii value is 0x2E, and in unicode/UTF-16 it is thus 
"0x002E". Bit "0x2E2E" is a valid unicode character( '?' , the reversed 
quotation mark in spanish), we cannot trust the "0x2E" byte found in the 
UCS-16 byte stream to be always a point character.

About command line applications, I was a bit concerned about backward 
compatibility because there are existing working applications that pass ANSI 
non-ascii filenames to gdal command line utilities. I've tested your 
preliminary implementation with a file containing a '?' (e-acute) character on 
a Windows platform that I think uses CP1252 (~ ISO-LATIN-1) as the codepage. I 
expected a failure in the UTF-8 -> UCS-16 translation since the passed filename 
wasn't UTF-8. It turns out that it actually works, since the utf-8 -> wide 
char conversion routine in cpl_recode_stub.cpp has a special case : when it 
doesn't manage to translate a (apparently) multibyte UTF-8 character, it 
assumes they are CP1252 and convert them into UCS-16 correctly. So this is 
good news for people having CP1252 as their current code page !

But apparently, there's a way for command line Windows applications to get 
their arguments as UCS-16 strings. This could be used to convert them reliably 
to UTF-8 just afterwards to feed it into GDAL. Here's what I found in MSDN :
* GetCommandLineW : http://msdn.microsoft.com/en-
us/library/ms683156%28VS.85%29.aspx
* CommandLineToArgvW : http://msdn.microsoft.com/en-
us/library/bb776391%28VS.85%29.aspx

The issue is that, if we go on this route, drivers that still use the old VSI 
API (posix one) won't work anymore with non-ASCII filenames... So I'm not sure 
if it's worth the pain : it would be only worth for people using currently 
successfully the command line utilities with a non-CP1252 code page.

About Java bindings, nothing to change. Java strings are encoded in unicode 
(UTF-16) and the typemaps we use already automatically converts to/from UTF-8 
on the C side (with GetStringUTFChars() from Java to C, and NewStringUTF() 
from C to Java)

Best regards,

Even


From James.Koch at gtri.gatech.edu  Wed Sep 15 16:28:28 2010
From: James.Koch at gtri.gatech.edu (James.Koch@gtri.gatech.edu)
Date: Wed Sep 15 16:28:31 2010
Subject: [gdal-dev] OGR SQL Server driver - Default FID values when there is
 no FID column?
Message-ID: <E20B9C7BF418494C9EFD3B735EDE3CF52C2773A0@apatlisdmbx02.core.gtri.org>

Tamas, thanks for the SQL Server driver.  I also did some development on a SQL Server driver for the FalconView software, using OGR's existing MySQL driver as a reference.  One issue I saw was with setting a default FID value, when no FID column is present.  In OGRMSSQLSpatialLayer::GetNextRawFeature(), you set the value to an incrementing counter:



    if( pszFIDColumn != NULL && poStmt->GetColId(pszFIDColumn) > -1 )

        poFeature->SetFID(

            atoi(poStmt->GetColData(poStmt->GetColId(pszFIDColumn))) );

    else

        poFeature->SetFID( iNextShapeId );



Maybe you addressed this elsewhere in your code, but it seems like this causes problems if you expect the FID value to always be preserved for any given feature.  The FID value for a feature will be different before & after a filter is applied to the data set, since new OGRFeature objects are created each time.

Is my understanding of the situation and the driver code correct?  If so, should the FID value stay constant?

Thanks!

Jim Koch
Georgia Tech Research Institute
FalconView Developer
www.falconview.org<http://www.falconview.org>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100915/1296423a/attachment.html
From szekerest at gmail.com  Wed Sep 15 16:38:56 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Sep 15 16:38:59 2010
Subject: [gdal-dev] OGR SQL Server driver - Default FID values when there
	is no FID column?
In-Reply-To: <E20B9C7BF418494C9EFD3B735EDE3CF52C2773A0@apatlisdmbx02.core.gtri.org>
References: <E20B9C7BF418494C9EFD3B735EDE3CF52C2773A0@apatlisdmbx02.core.gtri.org>
Message-ID: <AANLkTi=xp53jYdZjYtN+HOFF8EM55EYctvuLHx1SK7E6@mail.gmail.com>

Jim,

The layers created with this driver should always have a FID column which is
an identity column with primary key constraint. Therefore the else part of
the implementation is a bit theoretical and not really used.

Best regards,

Tamas



2010/9/15 <James.Koch@gtri.gatech.edu>

>  Tamas, thanks for the SQL Server driver.  I also did some development on a SQL Server driver for the FalconView software, using OGR's existing MySQL driver as a reference.  One issue I saw was with setting a default FID value, when no FID column is present.  In OGRMSSQLSpatialLayer::GetNextRawFeature(), you set the value to an incrementing counter:
>
>
>
>     if( pszFIDColumn != NULL && poStmt->GetColId(pszFIDColumn) > -1 )
>
>         poFeature->SetFID(
>
>             atoi(poStmt->GetColData(poStmt->GetColId(pszFIDColumn))) );
>
>     else
>
>         poFeature->SetFID( iNextShapeId );
>
>
>
> Maybe you addressed this elsewhere in your code, but it seems like this causes problems if you expect the FID value to always be preserved for any given feature.  The FID value for a feature will be different before & after a filter is applied to the data set, since new OGRFeature objects are created each time.
>
>
>
> Is my understanding of the situation and the driver code correct?  If so,
> should the FID value stay constant?
>
>
>
> Thanks!
>
>
>
> Jim Koch
>
> Georgia Tech Research Institute
>
> FalconView Developer
>
> www.falconview.org
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100915/182bb4b7/attachment.html
From beyhan at deprem.gov.tr  Wed Sep 15 09:04:24 2010
From: beyhan at deprem.gov.tr (Murat Beyhan)
Date: Wed Sep 15 20:03:55 2010
Subject: [gdal-dev] compile error
Message-ID: <1284555864.28951.2.camel@localhost>

I tried to install gdal 1.7.2 on mandriva in order to read data from
mysql.
So I faced following error
Please help me How can I solve this problem
many thanks
Murat


g++ -I../../port -I../../gcore -I../../alg -I../../ogr `php-config
--includes` -fpic -c
gdal_wrap.cpp                                                                                         
gdal_wrap.cpp:562: warning: deprecated conversion from string constant
to
?char*?                                                                                                             
gdal_wrap.cpp:867: error: ?zend_property_reference? was not declared in
this
scope                                                                                                            
gdal_wrap.cpp:867: error: ?property_reference? was not declared in this
scope                                                                                                                 
gdal_wrap.cpp:867: error: expected primary-expression before ?*?
token                                                                                                                        
gdal_wrap.cpp:867: error: ?value? was not declared in this
scope                                                                                                                              
gdal_wrap.cpp:867: error: initializer expression list treated as
compound
expression                                                                                                          
gdal_wrap.cpp:868: error: ?zend_property_reference? was not declared in
this
scope                                                                                                            
gdal_wrap.cpp:868: error: ?property_reference? was not declared in this
scope                                                                                                                 
gdal_wrap.cpp:868: error: expected primary-expression before ?*?
token                                                                                                                        
gdal_wrap.cpp:868: error: ?value? was not declared in this
scope                                                                                                                              
gdal_wrap.cpp:868: error: initializer expression list treated as
compound
expression                                                                                                          
gdal_wrap.cpp:869: error: ?zend_property_reference? was not declared in
this
scope                                                                                                            
gdal_wrap.cpp:869: error: ?property_reference? was not declared in this
scope                                                                                                                 
gdal_wrap.cpp:870: error: ?zend_property_reference? was not declared in
this
scope                                                                                                            
gdal_wrap.cpp:870: error: ?property_reference? was not declared in this
scope                                                                                                                 
gdal_wrap.cpp:870: error: expected primary-expression before ?*?
token                                                                                                                        
gdal_wrap.cpp:870: error: ?value? was not declared in this
scope                                                                                                                              
gdal_wrap.cpp:870: error: initializer expression list treated as
compound
expression                                                                                                          
gdal_wrap.cpp:882: error: ?zend_property_reference? was not declared in
this
scope                                                                                                            
gdal_wrap.cpp:882: error: ?property_reference? was not declared in this
scope                                                                                                                 
gdal_wrap.cpp:882: error: expected primary-expression before ?*?
token                                                                                                                        
gdal_wrap.cpp:882: error: ?value? was not declared in this
scope                                                                                                                              
gdal_wrap.cpp:882: error: initializer expression list treated as
compound
expression                                                                                                          
gdal_wrap.cpp:883: error: ?zend_property_reference? was not declared in
this
scope                                                                                                            
gdal_wrap.cpp:883: error: ?property_reference? was not declared in this
scope                                                                                                                 
gdal_wrap.cpp:883: error: expected primary-expression before ?*?
token                                                                                                                        
gdal_wrap.cpp:883: error: ?value? was not declared in this
scope                                                                                                                              
gdal_wrap.cpp:883: error: initializer expression list treated as
compound
expression                                                                                                          
gdal_wrap.cpp:884: error: ?zend_property_reference? was not declared in
this
scope                                                                                                            
gdal_wrap.cpp:884: error: ?property_reference? was not declared in this
scope                                                                                                                 
gdal_wrap.cpp:885: error: ?zend_property_reference? was not declared in
this
scope                                                                                                            
gdal_wrap.cpp:885: error: ?property_reference? was not declared in this
scope                                                                                                                 
gdal_wrap.cpp:885: error: expected primary-expression before ?*?
token                                                                                                                        
gdal_wrap.cpp:885: error: ?value? was not declared in this
scope                                                                                                                              
gdal_wrap.cpp:885: error: initializer expression list treated as
compound
expression                                                                                                          
gdal_wrap.cpp:915: error: ?zend_property_reference? was not declared in
this
scope                                                                                                            
gdal_wrap.cpp:915: error: ?property_reference? was not declared in this
scope                                                                                                                 
gdal_wrap.cpp:915: error: expected primary-expression before ?*?
token                                                                                                                        
gdal_wrap.cpp:915: error: ?value? was not declared in this
scope                                                                                                                              
gdal_wrap.cpp:915: error: initializer expression list treated as
compound
expression                                                                                                          
gdal_wrap.cpp:916: error: ?zend_property_reference? was not declared in
this
scope                                                                                                            
gdal_wrap.cpp:916: error: ?property_reference? was not declared in this
scope                                                                                                                 
gdal_wrap.cpp:916: error: expected primary-expression before ?*?
token                                                                                                                        
gdal_wrap.cpp:916: error: ?value? was not declared in this
scope                                                                                                                              
gdal_wrap.cpp:916: error: initializer expression list treated as
compound
expression                                                                                                          
gdal_wrap.cpp:917: error: ?zend_property_reference? was not declared in
this
scope                                                                                                            
gdal_wrap.cpp:917: error: ?property_reference? was not declared in this
scope                                                                                                                 
gdal_wrap.cpp:918: error: ?zend_property_reference? was not declared in
this
scope                                                                                                            
gdal_wrap.cpp:918: error: ?property_reference? was not declared in this
scope                                                                                                                 
gdal_wrap.cpp:918: error: expected primary-expression before ?*?
token                                                                                                                        
gdal_wrap.cpp:918: error: ?value? was not declared in this
scope                                                                                                                              
gdal_wrap.cpp:918: error: initializer expression list treated as
compound
expression                                                                                                          
gdal_wrap.cpp:1143: error: ?zend_property_reference? was not declared in
this
scope                                                                                                           
gdal_wrap.cpp:1143: error: ?property_reference? was not declared in this
scope                                                                                                                
gdal_wrap.cpp:1143: error: expected primary-expression before ?*?
token                                                                                                                       
gdal_wrap.cpp:1143: error: ?value? was not declared in this
scope                                                                                                                             
gdal_wrap.cpp:1143: error: initializer expression list treated as
compound
expression                                                                                                         
gdal_wrap.cpp:1144: error: ?zend_property_reference? was not declared in
this
scope                                                                                                           
gdal_wrap.cpp:1144: error: ?property_reference? was not declared in this
scope                                                                                                                
gdal_wrap.cpp:1144: error: expected primary-expression before ?*?
token                                                                                                                       
gdal_wrap.cpp:1144: error: ?value? was not declared in this
scope                                                                                                                             
gdal_wrap.cpp:1144: error: initializer expression list treated as
compound
expression                                                                                                         
gdal_wrap.cpp:1145: error: ?zend_property_reference? was not declared in
this
scope                                                                                                           
gdal_wrap.cpp:1145: error: ?property_reference? was not declared in this
scope                                                                                                                
gdal_wrap.cpp:1146: error: ?zend_property_reference? was not declared in
this
scope                                                                                                           
gdal_wrap.cpp:1146: error: ?property_reference? was not declared in this
scope                                                                                                                
gdal_wrap.cpp:1146: error: expected primary-expression before ?*?
token                                                                                                                       
gdal_wrap.cpp:1146: error: ?value? was not declared in this
scope                                                                                                                             
gdal_wrap.cpp:1146: error: initializer expression list treated as
compound
expression                                                                                                         
gdal_wrap.cpp:1261: error: ?zend_property_reference? was not declared in
this
scope                                                                                                           
gdal_wrap.cpp:1261: error: ?property_reference? was not declared in this
scope                                                                                                                
gdal_wrap.cpp:1261: error: expected primary-expression before ?*?
token                                                                                                                       
gdal_wrap.cpp:1261: error: ?value? was not declared in this
scope                                                                                                                             
gdal_wrap.cpp:1261: error: initializer expression list treated as
compound
expression                                                                                                         
gdal_wrap.cpp:1262: error: ?zend_property_reference? was not declared in
this
scope                                                                                                           
gdal_wrap.cpp:1262: error: ?property_reference? was not declared in this
scope
gdal_wrap.cpp:1262: error: expected primary-expression before ?*? token
gdal_wrap.cpp:1262: error: ?value? was not declared in this scope
gdal_wrap.cpp:1262: error: initializer expression list treated as
compound expression
gdal_wrap.cpp:1263: error: ?zend_property_reference? was not declared in
this scope
gdal_wrap.cpp:1263: error: ?property_reference? was not declared in this
scope
gdal_wrap.cpp:1264: error: ?zend_property_reference? was not declared in
this scope
gdal_wrap.cpp:1264: error: ?property_reference? was not declared in this
scope
gdal_wrap.cpp:1264: error: expected primary-expression before ?*? token
gdal_wrap.cpp:1264: error: ?value? was not declared in this scope
gdal_wrap.cpp:1264: error: initializer expression list treated as
compound expression
gdal_wrap.cpp:1276: error: ?zend_property_reference? was not declared in
this scope
gdal_wrap.cpp:1276: error: ?property_reference? was not declared in this
scope
gdal_wrap.cpp:1276: error: expected primary-expression before ?*? token
gdal_wrap.cpp:1276: error: ?value? was not declared in this scope
gdal_wrap.cpp:1276: error: initializer expression list treated as
compound expression
gdal_wrap.cpp:1277: error: ?zend_property_reference? was not declared in
this scope
gdal_wrap.cpp:1277: error: ?property_reference? was not declared in this
scope
gdal_wrap.cpp:1277: error: expected primary-expression before ?*? token
gdal_wrap.cpp:1277: error: ?value? was not declared in this scope
gdal_wrap.cpp:1277: error: initializer expression list treated as
compound expression
gdal_wrap.cpp:1278: error: ?zend_property_reference? was not declared in
this scope
gdal_wrap.cpp:1278: error: ?property_reference? was not declared in this
scope
gdal_wrap.cpp:1279: error: ?zend_property_reference? was not declared in
this scope
gdal_wrap.cpp:1279: error: ?property_reference? was not declared in this
scope
gdal_wrap.cpp:1279: error: expected primary-expression before ?*? token
gdal_wrap.cpp:1279: error: ?value? was not declared in this scope
gdal_wrap.cpp:1279: error: initializer expression list treated as
compound expression
gdal_wrap.cpp:1536: warning: deprecated conversion from string constant
to ?char*?
gdal_wrap.cpp: In function ?void _wrap_PushErrorHandler__SWIG_1(int,
zval*, zval**, zval*, int)?:
gdal_wrap.cpp:1806: warning: deprecated conversion from string constant
to ?char*?
gdal_wrap.cpp: In function ?void _wrap_MajorObject_GetDescription(int,
zval*, zval**, zval*, int)?:
gdal_wrap.cpp:2128: warning: deprecated conversion from string constant
to ?char*?
gdal_wrap.cpp: In function ?void _wrap_MajorObject_SetDescription(int,
zval*, zval**, zval*, int)?:
gdal_wrap.cpp:2160: warning: deprecated conversion from string constant
to ?char*?
gdal_wrap.cpp: In function ?void _wrap_MajorObject_GetMetadata_Dict(int,
zval*, zval**, zval*, int)?:
gdal_wrap.cpp:2197: warning: deprecated conversion from string constant
to ?char*?
gdal_wrap.cpp: In function ?void _wrap_MajorObject_GetMetadata_List(int,
zval*, zval**, zval*, int)?:
gdal_wrap.cpp:2252: warning: deprecated conversion from string constant
to ?char*?
gdal_wrap.cpp: In function ?void
_wrap_MajorObject_SetMetadata__SWIG_0(int, zval*, zval**, zval*, int)?:
gdal_wrap.cpp:2306: warning: deprecated conversion from string constant
to ?char*?
gdal_wrap.cpp: In function ?void
_wrap_MajorObject_SetMetadata__SWIG_1(int, zval*, zval**, zval*, int)?:
gdal_wrap.cpp:2372: warning: deprecated conversion from string constant
to ?char*?
gdal_wrap.cpp: At global scope:
gdal_wrap.cpp:2463: error: redefinition of ?pval
_wrap_propget_MajorObject?
gdal_wrap.cpp:869: error: ?pval _wrap_propget_MajorObject? previously
declared here
gdal_wrap.cpp:2463: error: ?zend_property_reference? was not declared in
this scope
gdal_wrap.cpp:2463: error: ?property_reference? was not declared in this
scope
make[2]: *** [gdal_wrap.o] Error 1
make[2]: Leaving directory `/usr/local/gdal-1.7.2/swig/php'
make[1]: *** [build] Error 2
make[1]: Leaving directory `/usr/local/gdal-1.7.2/swig'
make: *** [swig-modules] Error 2




-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.

From jamesm at lantic.net  Thu Sep 16 04:23:27 2010
From: jamesm at lantic.net (James Meyer)
Date: Thu Sep 16 04:30:36 2010
Subject: [gdal-dev] GDALDataset blocks in different thread
Message-ID: <4C91D3FF.6010709@lantic.net>

Hi

I am opening a GDALDataset in my main thread which I then pass to a 
second thread for processing. Only the second thread accesses the dataset.

As soon as the thread makes a call to GDALRasterBand::RasterIO() the 
thread blocks indefinitely.

Could you please explain to me why this is happening?

Also, how do I check whether my build of GDAL was built with the 
--with-threads option enabled?

Thanks

James
From oyvind.idland at gmail.com  Thu Sep 16 08:03:09 2010
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Thu Sep 16 08:03:11 2010
Subject: [gdal-dev] The 2.5D geometry proposal
Message-ID: <AANLkTimcSThOi4jA2OSPV2SqbwFmCRu7-kfd7WW7H+Zd@mail.gmail.com>

Hello,

been taking a look at "Adam's 2.5D simple features proposal" at the OGR website.

Question: Why not adopt the existing ISO SQL/MM part 3 standard ?

The SQL/MM standard is an extension to the existing WKB/WKT by OGC.

The extensions includes Z and M geometries, and even arcs
(CircularString/CompoundCurve etc).


regards,


Oyvind Idland
From Ralf.Suhr at itc-halle.de  Thu Sep 16 08:23:08 2010
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Thu Sep 16 08:23:15 2010
Subject: [gdal-dev] The 2.5D geometry proposal
In-Reply-To: <AANLkTimcSThOi4jA2OSPV2SqbwFmCRu7-kfd7WW7H+Zd@mail.gmail.com>
References: <AANLkTimcSThOi4jA2OSPV2SqbwFmCRu7-kfd7WW7H+Zd@mail.gmail.com>
Message-ID: <201009161423.09256.Ralf.Suhr@itc-halle.de>

Hi Oyvind,

there no 3D in ISO SQL/MM part 3. If you want real 3D, you have to define 
volumetric objekts. PostGIS support SQL/MM part 3.

Gr
Ralf

Am Donnerstag 16 September 2010 14:03:09 schrieb Oyvind Idland:
> Hello,
> 
> been taking a look at "Adam's 2.5D simple features proposal" at the OGR
>  website.
> 
> Question: Why not adopt the existing ISO SQL/MM part 3 standard ?
> 
> The SQL/MM standard is an extension to the existing WKB/WKT by OGC.
> 
> The extensions includes Z and M geometries, and even arcs
> (CircularString/CompoundCurve etc).
> 
> 
> regards,
> 
> 
> Oyvind Idland
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From oyvind.idland at gmail.com  Thu Sep 16 08:33:12 2010
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Thu Sep 16 08:33:13 2010
Subject: [gdal-dev] The 2.5D geometry proposal
In-Reply-To: <201009161423.09256.Ralf.Suhr@itc-halle.de>
References: <AANLkTimcSThOi4jA2OSPV2SqbwFmCRu7-kfd7WW7H+Zd@mail.gmail.com>
	<201009161423.09256.Ralf.Suhr@itc-halle.de>
Message-ID: <AANLkTi=8k5cJuX6yzCZd8b2_3ha60_AibJCVHF-PU9J-@mail.gmail.com>

Hi Ralf,

full 3D/volumetric objects was not what I was refering to. I mean
"2.5D", simple features
with Z (and M) ordinates.

If I understand correct, this is what Adam is refering to in his proposal.

SQL/MM do specify Z and M geometries (plus circular geometries).


Oyvind



On Thu, Sep 16, 2010 at 2:23 PM, Ralf Suhr <Ralf.Suhr@itc-halle.de> wrote:
> Hi Oyvind,
>
> there no 3D in ISO SQL/MM part 3. If you want real 3D, you have to define
> volumetric objekts. PostGIS support SQL/MM part 3.
>
> Gr
> Ralf
>
> Am Donnerstag 16 September 2010 14:03:09 schrieb Oyvind Idland:
>> Hello,
>>
>> been taking a look at "Adam's 2.5D simple features proposal" at the OGR
>> ?website.
>>
>> Question: Why not adopt the existing ISO SQL/MM part 3 standard ?
>>
>> The SQL/MM standard is an extension to the existing WKB/WKT by OGC.
>>
>> The extensions includes Z and M geometries, and even arcs
>> (CircularString/CompoundCurve etc).
>>
>>
>> regards,
>>
>>
>> Oyvind Idland
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jukka.rahkonen at mmmtike.fi  Thu Sep 16 08:51:02 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Sep 16 08:51:15 2010
Subject: [gdal-dev] Re: problem with unwanted white space in input file list
	for	gdalbuildvrt
References: <4C907E50.4030605@external.thalesgroup.com>
Message-ID: <loom.20100916T144001-730@post.gmane.org>

Fabrice LALLAURET - PSV <fabrice.lallauret <at> external.thalesgroup.com> writes:

> 
>   Hi all,
> I try to use some gdal tools in a batch file on windows and I've a 
> strange side effect. Here is a little batch use with fwtools 2.4.7.
> 
> @echo off
> echo "Test 1 with file list"
> del listin.txt test1.vrt test2.vrt
> for %%F in (krel*.tif) do @echo %%F>>  listin.txt
> gdalbuildvrt  -input_file_list listin.txt test1.vrt
> echo "Test 2 with direct argument"
> gdalbuildvrt  test2.vrt krel*.tif

...... 
> After some investigations,(check my file, gdal debug compilation, try on 
> linux too, ...), I've found that there is a space at the end of each 
> line in my listin.txt. On linux, the same thing produce a clear error :

I tried your batch file and my listin.txt does not have any space 
characters at the end of lines. Are you sure that your script did 
not ever have space in %%F >> ?

dir /b krel*.tif >listin.txt 
gives the same result as
for %%F in (krel*.tif) do @echo %%F>>  listin.txt

-Jukka Rahkonen-



From warmerdam at pobox.com  Thu Sep 16 10:08:34 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep 16 10:08:42 2010
Subject: [gdal-dev] The 2.5D geometry proposal
In-Reply-To: <AANLkTi=8k5cJuX6yzCZd8b2_3ha60_AibJCVHF-PU9J-@mail.gmail.com>
References: <AANLkTimcSThOi4jA2OSPV2SqbwFmCRu7-kfd7WW7H+Zd@mail.gmail.com>
	<201009161423.09256.Ralf.Suhr@itc-halle.de>
	<AANLkTi=8k5cJuX6yzCZd8b2_3ha60_AibJCVHF-PU9J-@mail.gmail.com>
Message-ID: <4C9224E2.8060100@pobox.com>

Oyvind Idland wrote:
> Hi Ralf,
> 
> full 3D/volumetric objects was not what I was refering to. I mean
> "2.5D", simple features
> with Z (and M) ordinates.
> 
> If I understand correct, this is what Adam is refering to in his proposal.
> 
> SQL/MM do specify Z and M geometries (plus circular geometries).
...

>> Am Donnerstag 16 September 2010 14:03:09 schrieb Oyvind Idland:
>>> Hello,
>>>
>>> been taking a look at "Adam's 2.5D simple features proposal" at the OGR
>>>  website.

Oyvind,

I would note that Adam's proposal was from around the year 2000 and was used
in OGR for many years until OGC/ISO decided to use different codes for 2.5D
in WKB despite the fact that Adam's proposal had been adopted by OGC.

There has been some effort to support the new numbering scheme but I'm not
exactly sure what OGR produces by default not.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Thu Sep 16 13:13:45 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep 16 13:13:41 2010
Subject: [gdal-dev] RFC28 OGR SQL Expressions now in trunk
In-Reply-To: <4C901A9F.6030107@pobox.com>
References: <C8B57E42.21CF2%michael.smith@usace.army.mil>
	<4C901A9F.6030107@pobox.com>
Message-ID: <201009161913.45735.even.rouault@mines-paris.org>

For the record, if I create a postgres table 0, I need to double-quote it when 
issuing a SQL query, like :

ogrinfo pg:dbname=autotest -sql 'select * from "0"'

and mysql needs also quoting, but they use reverse slash  `  character instead 
of double-quote.

So the new syntax isn't something that strange. I have no strong opinion if we 
should relax the restriction to the previous behaviour or not.

Le mercredi 15 septembre 2010 03:00:15, Frank Warmerdam a ?crit :
> Smith, Michael ERDC-CRREL-NH wrote:
> > Frank,
> > 
> > I was testing accesing the OGR_STYLE value from a kmz file using the
> > LIBKML driver. Previously this had worked.
> > 
> > u4rt9mds@maps:/htdocs/dhs/marine$ ogr2ogr -f OCI
> > oci:"user/pass@tns:marinetest MarineTraffic.kmz -nln MArineTest3 -lco
> > dim=2 -lco srid-8265 -lco launder=yes -lco precision=no -sql "select *,
> > ogr_style from 0"
> > OGR: OGROpen(MarineTraffic.kmz/0x13bb63a0) succeeded as LIBKML.
> > ERROR 1: SQL Expression Parsing Error: syntax error
> 
> Mike,
> 
> The problem seems to be the table named 0 rather than the ogr_style
> portion.  Currently well formed identifiers must start with a letter or
> an underscore, not a numeric digit.  You can however quote it.
> 
> So 'select *, ogr_style from "0"' should work.
> 
> This is definitely a backward compatability issue, but it isn't clear to me
> whether I ought to try and change it or not.  Thoughts welcome.
> 
> Best regards,
From even.rouault at mines-paris.org  Thu Sep 16 13:27:07 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep 16 13:27:03 2010
Subject: [gdal-dev] GDALDataset blocks in different thread
In-Reply-To: <4C91D3FF.6010709@lantic.net>
References: <4C91D3FF.6010709@lantic.net>
Message-ID: <201009161927.07375.even.rouault@mines-paris.org>

James,

what you see is a bit surprising...

Do you build GDAL by yourself or use a packaged version ? If you build it 
yourself, you explicitely need to specify --with-threads at ./configure time 
(unless you use the latest trunk version where it is now the default). In 
port/cpl_multiproc.h, you can see #define CPL_MULTIPROC_PTHREAD 1 if everything 
works. If you have only the .so, you can for example try using the 
CPLCreateThread() method. If it returns -1, then you have the stub 
implementation.

Could you try compiling and running the following code that is an attempt to 
have a minimum scenario that reproduces what you descrbe ?

****************************************

#include <gdal.h>
#include <gdal_alg.h>
#include "cpl_multiproc.h"

void my_thread(void* pData)
{
    GDALDatasetH hDS;
    int checksum;  
    hDS = (GDALDatasetH)pData;
  
    printf("in thread\n");
    checksum = GDALChecksumImage(GDALGetRasterBand(hDS, 1), 0, 0, 20, 20);
    printf("checksum = %d\n", checksum);
}

int main(int argc, char* argv[])
{
    GDALDatasetH hDS;
    GDALAllRegister();
    hDS = GDALOpen("byte.tif", GA_ReadOnly);
    CPLCreateThread(my_thread, hDS);
    CPLSleep(2);
    printf("finished\n");
    return 0;
}

****************************************

It works fine for me. The byte.tif is available at 
http://trac.osgeo.org/gdal/export/20628/trunk/autotest/gcore/data/byte.tif

Otherwise, which OS are you using ?  which GDAL version ? Which GDAL driver is 
used by your dataset ? etc etc ? If you run it under gdb, what is the stack 
trace when it is blocked ?

Even

Le jeudi 16 septembre 2010 10:23:27, James Meyer a ?crit :
> Hi
> 
> I am opening a GDALDataset in my main thread which I then pass to a
> second thread for processing. Only the second thread accesses the dataset.
> 
> As soon as the thread makes a call to GDALRasterBand::RasterIO() the
> thread blocks indefinitely.
> 
> Could you please explain to me why this is happening?
> 
> Also, how do I check whether my build of GDAL was built with the
> --with-threads option enabled?
> 
> Thanks
> 
> James
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Thu Sep 16 13:39:20 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep 16 13:39:16 2010
Subject: [gdal-dev] compile error
In-Reply-To: <1284555864.28951.2.camel@localhost>
References: <1284555864.28951.2.camel@localhost>
Message-ID: <201009161939.20673.even.rouault@mines-paris.org>

Murat,

unfortunately, no-one currently maintains the PHP bindings so there's a high 
risk they are not functionnal (PHP mainteners welcome by the way). See 
http://trac.osgeo.org/gdal/wiki/GdalOgrInPhp

Actually I got the same errors as you. It appears the gdal_wrap.cpp in SVN is 
outdated. However I've managed to build the PHP bindings by doing this :

cd swig/php
make veryclean
make build

This assumes you have SWIG somewhere in your path (tested version here : swig 
1.3.39)

This produces a php_gdal.so, but again don't blame me if it doesn't work ;-)

Even

Le mercredi 15 septembre 2010 15:04:24, Murat Beyhan a ?crit :
> I tried to install gdal 1.7.2 on mandriva in order to read data from
> mysql.
> So I faced following error
> Please help me How can I solve this problem
> many thanks
> Murat
> 
> 
> g++ -I../../port -I../../gcore -I../../alg -I../../ogr `php-config
> --includes` -fpic -c
> gdal_wrap.cpp
> gdal_wrap.cpp:562: warning: deprecated conversion from string constant
> to
> ?char*?
> gdal_wrap.cpp:867: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:867: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:867: error: expected primary-expression before ?*?
> token
> gdal_wrap.cpp:867: error: ?value? was not declared in this
> scope
> gdal_wrap.cpp:867: error: initializer expression list treated as
> compound
> expression
> gdal_wrap.cpp:868: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:868: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:868: error: expected primary-expression before ?*?
> token
> gdal_wrap.cpp:868: error: ?value? was not declared in this
> scope
> gdal_wrap.cpp:868: error: initializer expression list treated as
> compound
> expression
> gdal_wrap.cpp:869: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:869: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:870: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:870: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:870: error: expected primary-expression before ?*?
> token
> gdal_wrap.cpp:870: error: ?value? was not declared in this
> scope
> gdal_wrap.cpp:870: error: initializer expression list treated as
> compound
> expression
> gdal_wrap.cpp:882: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:882: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:882: error: expected primary-expression before ?*?
> token
> gdal_wrap.cpp:882: error: ?value? was not declared in this
> scope
> gdal_wrap.cpp:882: error: initializer expression list treated as
> compound
> expression
> gdal_wrap.cpp:883: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:883: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:883: error: expected primary-expression before ?*?
> token
> gdal_wrap.cpp:883: error: ?value? was not declared in this
> scope
> gdal_wrap.cpp:883: error: initializer expression list treated as
> compound
> expression
> gdal_wrap.cpp:884: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:884: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:885: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:885: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:885: error: expected primary-expression before ?*?
> token
> gdal_wrap.cpp:885: error: ?value? was not declared in this
> scope
> gdal_wrap.cpp:885: error: initializer expression list treated as
> compound
> expression
> gdal_wrap.cpp:915: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:915: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:915: error: expected primary-expression before ?*?
> token
> gdal_wrap.cpp:915: error: ?value? was not declared in this
> scope
> gdal_wrap.cpp:915: error: initializer expression list treated as
> compound
> expression
> gdal_wrap.cpp:916: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:916: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:916: error: expected primary-expression before ?*?
> token
> gdal_wrap.cpp:916: error: ?value? was not declared in this
> scope
> gdal_wrap.cpp:916: error: initializer expression list treated as
> compound
> expression
> gdal_wrap.cpp:917: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:917: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:918: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:918: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:918: error: expected primary-expression before ?*?
> token
> gdal_wrap.cpp:918: error: ?value? was not declared in this
> scope
> gdal_wrap.cpp:918: error: initializer expression list treated as
> compound
> expression
> gdal_wrap.cpp:1143: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:1143: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:1143: error: expected primary-expression before ?*?
> token
> gdal_wrap.cpp:1143: error: ?value? was not declared in this
> scope
> gdal_wrap.cpp:1143: error: initializer expression list treated as
> compound
> expression
> gdal_wrap.cpp:1144: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:1144: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:1144: error: expected primary-expression before ?*?
> token
> gdal_wrap.cpp:1144: error: ?value? was not declared in this
> scope
> gdal_wrap.cpp:1144: error: initializer expression list treated as
> compound
> expression
> gdal_wrap.cpp:1145: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:1145: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:1146: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:1146: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:1146: error: expected primary-expression before ?*?
> token
> gdal_wrap.cpp:1146: error: ?value? was not declared in this
> scope
> gdal_wrap.cpp:1146: error: initializer expression list treated as
> compound
> expression
> gdal_wrap.cpp:1261: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:1261: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:1261: error: expected primary-expression before ?*?
> token
> gdal_wrap.cpp:1261: error: ?value? was not declared in this
> scope
> gdal_wrap.cpp:1261: error: initializer expression list treated as
> compound
> expression
> gdal_wrap.cpp:1262: error: ?zend_property_reference? was not declared in
> this
> scope
> gdal_wrap.cpp:1262: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:1262: error: expected primary-expression before ?*? token
> gdal_wrap.cpp:1262: error: ?value? was not declared in this scope
> gdal_wrap.cpp:1262: error: initializer expression list treated as
> compound expression
> gdal_wrap.cpp:1263: error: ?zend_property_reference? was not declared in
> this scope
> gdal_wrap.cpp:1263: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:1264: error: ?zend_property_reference? was not declared in
> this scope
> gdal_wrap.cpp:1264: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:1264: error: expected primary-expression before ?*? token
> gdal_wrap.cpp:1264: error: ?value? was not declared in this scope
> gdal_wrap.cpp:1264: error: initializer expression list treated as
> compound expression
> gdal_wrap.cpp:1276: error: ?zend_property_reference? was not declared in
> this scope
> gdal_wrap.cpp:1276: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:1276: error: expected primary-expression before ?*? token
> gdal_wrap.cpp:1276: error: ?value? was not declared in this scope
> gdal_wrap.cpp:1276: error: initializer expression list treated as
> compound expression
> gdal_wrap.cpp:1277: error: ?zend_property_reference? was not declared in
> this scope
> gdal_wrap.cpp:1277: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:1277: error: expected primary-expression before ?*? token
> gdal_wrap.cpp:1277: error: ?value? was not declared in this scope
> gdal_wrap.cpp:1277: error: initializer expression list treated as
> compound expression
> gdal_wrap.cpp:1278: error: ?zend_property_reference? was not declared in
> this scope
> gdal_wrap.cpp:1278: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:1279: error: ?zend_property_reference? was not declared in
> this scope
> gdal_wrap.cpp:1279: error: ?property_reference? was not declared in this
> scope
> gdal_wrap.cpp:1279: error: expected primary-expression before ?*? token
> gdal_wrap.cpp:1279: error: ?value? was not declared in this scope
> gdal_wrap.cpp:1279: error: initializer expression list treated as
> compound expression
> gdal_wrap.cpp:1536: warning: deprecated conversion from string constant
> to ?char*?
> gdal_wrap.cpp: In function ?void _wrap_PushErrorHandler__SWIG_1(int,
> zval*, zval**, zval*, int)?:
> gdal_wrap.cpp:1806: warning: deprecated conversion from string constant
> to ?char*?
> gdal_wrap.cpp: In function ?void _wrap_MajorObject_GetDescription(int,
> zval*, zval**, zval*, int)?:
> gdal_wrap.cpp:2128: warning: deprecated conversion from string constant
> to ?char*?
> gdal_wrap.cpp: In function ?void _wrap_MajorObject_SetDescription(int,
> zval*, zval**, zval*, int)?:
> gdal_wrap.cpp:2160: warning: deprecated conversion from string constant
> to ?char*?
> gdal_wrap.cpp: In function ?void _wrap_MajorObject_GetMetadata_Dict(int,
> zval*, zval**, zval*, int)?:
> gdal_wrap.cpp:2197: warning: deprecated conversion from string constant
> to ?char*?
> gdal_wrap.cpp: In function ?void _wrap_MajorObject_GetMetadata_List(int,
> zval*, zval**, zval*, int)?:
> gdal_wrap.cpp:2252: warning: deprecated conversion from string constant
> to ?char*?
> gdal_wrap.cpp: In function ?void
> _wrap_MajorObject_SetMetadata__SWIG_0(int, zval*, zval**, zval*, int)?:
> gdal_wrap.cpp:2306: warning: deprecated conversion from string constant
> to ?char*?
> gdal_wrap.cpp: In function ?void
> _wrap_MajorObject_SetMetadata__SWIG_1(int, zval*, zval**, zval*, int)?:
> gdal_wrap.cpp:2372: warning: deprecated conversion from string constant
> to ?char*?
> gdal_wrap.cpp: At global scope:
> gdal_wrap.cpp:2463: error: redefinition of ?pval
> _wrap_propget_MajorObject?
> gdal_wrap.cpp:869: error: ?pval _wrap_propget_MajorObject? previously
> declared here
> gdal_wrap.cpp:2463: error: ?zend_property_reference? was not declared in
> this scope
> gdal_wrap.cpp:2463: error: ?property_reference? was not declared in this
> scope
> make[2]: *** [gdal_wrap.o] Error 1
> make[2]: Leaving directory `/usr/local/gdal-1.7.2/swig/php'
> make[1]: *** [build] Error 2
> make[1]: Leaving directory `/usr/local/gdal-1.7.2/swig'
> make: *** [swig-modules] Error 2
From oyvind.idland at gmail.com  Thu Sep 16 13:48:44 2010
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Thu Sep 16 13:48:46 2010
Subject: [gdal-dev] The 2.5D geometry proposal
In-Reply-To: <4C9224E2.8060100@pobox.com>
References: <AANLkTimcSThOi4jA2OSPV2SqbwFmCRu7-kfd7WW7H+Zd@mail.gmail.com>
	<201009161423.09256.Ralf.Suhr@itc-halle.de>
	<AANLkTi=8k5cJuX6yzCZd8b2_3ha60_AibJCVHF-PU9J-@mail.gmail.com>
	<4C9224E2.8060100@pobox.com>
Message-ID: <AANLkTi=J1Wg-+ozFC9y-ZRYBoD4FUrni34rnBx6DmbpZ@mail.gmail.com>

On Thu, Sep 16, 2010 at 4:08 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Oyvind Idland wrote:
>>
>> Hi Ralf,
>>
>> full 3D/volumetric objects was not what I was refering to. I mean
>> "2.5D", simple features
>> with Z (and M) ordinates.
>>
>> If I understand correct, this is what Adam is refering to in his proposal.
>>
>> SQL/MM do specify Z and M geometries (plus circular geometries).
>
> ...
>
>>> Am Donnerstag 16 September 2010 14:03:09 schrieb Oyvind Idland:
>>>>
>>>> Hello,
>>>>
>>>> been taking a look at "Adam's 2.5D simple features proposal" at the OGR
>>>> ?website.
>
> Oyvind,
>
> I would note that Adam's proposal was from around the year 2000 and was used
> in OGR for many years until OGC/ISO decided to use different codes for 2.5D
> in WKB despite the fact that Adam's proposal had been adopted by OGC.
>
> There has been some effort to support the new numbering scheme but I'm not
> exactly sure what OGR produces by default not.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
>

Ok, thanks, that makes sense.

Seems like OGC/ISO chose a somewhat different encoding though.


-- Oyvind
From beyhan at deprem.gov.tr  Thu Sep 16 14:34:08 2010
From: beyhan at deprem.gov.tr (Murat Beyhan)
Date: Thu Sep 16 14:36:49 2010
Subject: [gdal-dev] compile error
In-Reply-To: <201009161939.20673.even.rouault@mines-paris.org>
References: <1284555864.28951.2.camel@localhost>
	<201009161939.20673.even.rouault@mines-paris.org>
Message-ID: <1284662048.12755.2.camel@localhost>

Dear Even,

Thanks for your reply.
I just remove php support from configure script than I achieved to
install gdal with mysql support. 
Many Thanks for your help...
Murat 

On Thu, 2010-09-16 at 19:39 +0200, Even Rouault wrote:
> Murat,
> 
> unfortunately, no-one currently maintains the PHP bindings so there's a high 
> risk they are not functionnal (PHP mainteners welcome by the way). See 
> http://trac.osgeo.org/gdal/wiki/GdalOgrInPhp
> 
> Actually I got the same errors as you. It appears the gdal_wrap.cpp in SVN is 
> outdated. However I've managed to build the PHP bindings by doing this :
> 
> cd swig/php
> make veryclean
> make build
> 
> This assumes you have SWIG somewhere in your path (tested version here : swig 
> 1.3.39)
> 
> This produces a php_gdal.so, but again don't blame me if it doesn't work ;-)
> 
> Even
> 
> Le mercredi 15 septembre 2010 15:04:24, Murat Beyhan a ?crit :
> > I tried to install gdal 1.7.2 on mandriva in order to read data from
> > mysql.
> > So I faced following error
> > Please help me How can I solve this problem
> > many thanks
> > Murat
> > 
> > 
> > g++ -I../../port -I../../gcore -I../../alg -I../../ogr `php-config
> > --includes` -fpic -c
> > gdal_wrap.cpp
> > gdal_wrap.cpp:562: warning: deprecated conversion from string constant
> > to
> > ?char*?
> > gdal_wrap.cpp:867: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:867: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:867: error: expected primary-expression before ?*?
> > token
> > gdal_wrap.cpp:867: error: ?value? was not declared in this
> > scope
> > gdal_wrap.cpp:867: error: initializer expression list treated as
> > compound
> > expression
> > gdal_wrap.cpp:868: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:868: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:868: error: expected primary-expression before ?*?
> > token
> > gdal_wrap.cpp:868: error: ?value? was not declared in this
> > scope
> > gdal_wrap.cpp:868: error: initializer expression list treated as
> > compound
> > expression
> > gdal_wrap.cpp:869: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:869: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:870: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:870: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:870: error: expected primary-expression before ?*?
> > token
> > gdal_wrap.cpp:870: error: ?value? was not declared in this
> > scope
> > gdal_wrap.cpp:870: error: initializer expression list treated as
> > compound
> > expression
> > gdal_wrap.cpp:882: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:882: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:882: error: expected primary-expression before ?*?
> > token
> > gdal_wrap.cpp:882: error: ?value? was not declared in this
> > scope
> > gdal_wrap.cpp:882: error: initializer expression list treated as
> > compound
> > expression
> > gdal_wrap.cpp:883: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:883: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:883: error: expected primary-expression before ?*?
> > token
> > gdal_wrap.cpp:883: error: ?value? was not declared in this
> > scope
> > gdal_wrap.cpp:883: error: initializer expression list treated as
> > compound
> > expression
> > gdal_wrap.cpp:884: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:884: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:885: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:885: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:885: error: expected primary-expression before ?*?
> > token
> > gdal_wrap.cpp:885: error: ?value? was not declared in this
> > scope
> > gdal_wrap.cpp:885: error: initializer expression list treated as
> > compound
> > expression
> > gdal_wrap.cpp:915: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:915: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:915: error: expected primary-expression before ?*?
> > token
> > gdal_wrap.cpp:915: error: ?value? was not declared in this
> > scope
> > gdal_wrap.cpp:915: error: initializer expression list treated as
> > compound
> > expression
> > gdal_wrap.cpp:916: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:916: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:916: error: expected primary-expression before ?*?
> > token
> > gdal_wrap.cpp:916: error: ?value? was not declared in this
> > scope
> > gdal_wrap.cpp:916: error: initializer expression list treated as
> > compound
> > expression
> > gdal_wrap.cpp:917: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:917: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:918: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:918: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:918: error: expected primary-expression before ?*?
> > token
> > gdal_wrap.cpp:918: error: ?value? was not declared in this
> > scope
> > gdal_wrap.cpp:918: error: initializer expression list treated as
> > compound
> > expression
> > gdal_wrap.cpp:1143: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:1143: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:1143: error: expected primary-expression before ?*?
> > token
> > gdal_wrap.cpp:1143: error: ?value? was not declared in this
> > scope
> > gdal_wrap.cpp:1143: error: initializer expression list treated as
> > compound
> > expression
> > gdal_wrap.cpp:1144: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:1144: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:1144: error: expected primary-expression before ?*?
> > token
> > gdal_wrap.cpp:1144: error: ?value? was not declared in this
> > scope
> > gdal_wrap.cpp:1144: error: initializer expression list treated as
> > compound
> > expression
> > gdal_wrap.cpp:1145: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:1145: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:1146: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:1146: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:1146: error: expected primary-expression before ?*?
> > token
> > gdal_wrap.cpp:1146: error: ?value? was not declared in this
> > scope
> > gdal_wrap.cpp:1146: error: initializer expression list treated as
> > compound
> > expression
> > gdal_wrap.cpp:1261: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:1261: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:1261: error: expected primary-expression before ?*?
> > token
> > gdal_wrap.cpp:1261: error: ?value? was not declared in this
> > scope
> > gdal_wrap.cpp:1261: error: initializer expression list treated as
> > compound
> > expression
> > gdal_wrap.cpp:1262: error: ?zend_property_reference? was not declared in
> > this
> > scope
> > gdal_wrap.cpp:1262: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:1262: error: expected primary-expression before ?*? token
> > gdal_wrap.cpp:1262: error: ?value? was not declared in this scope
> > gdal_wrap.cpp:1262: error: initializer expression list treated as
> > compound expression
> > gdal_wrap.cpp:1263: error: ?zend_property_reference? was not declared in
> > this scope
> > gdal_wrap.cpp:1263: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:1264: error: ?zend_property_reference? was not declared in
> > this scope
> > gdal_wrap.cpp:1264: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:1264: error: expected primary-expression before ?*? token
> > gdal_wrap.cpp:1264: error: ?value? was not declared in this scope
> > gdal_wrap.cpp:1264: error: initializer expression list treated as
> > compound expression
> > gdal_wrap.cpp:1276: error: ?zend_property_reference? was not declared in
> > this scope
> > gdal_wrap.cpp:1276: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:1276: error: expected primary-expression before ?*? token
> > gdal_wrap.cpp:1276: error: ?value? was not declared in this scope
> > gdal_wrap.cpp:1276: error: initializer expression list treated as
> > compound expression
> > gdal_wrap.cpp:1277: error: ?zend_property_reference? was not declared in
> > this scope
> > gdal_wrap.cpp:1277: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:1277: error: expected primary-expression before ?*? token
> > gdal_wrap.cpp:1277: error: ?value? was not declared in this scope
> > gdal_wrap.cpp:1277: error: initializer expression list treated as
> > compound expression
> > gdal_wrap.cpp:1278: error: ?zend_property_reference? was not declared in
> > this scope
> > gdal_wrap.cpp:1278: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:1279: error: ?zend_property_reference? was not declared in
> > this scope
> > gdal_wrap.cpp:1279: error: ?property_reference? was not declared in this
> > scope
> > gdal_wrap.cpp:1279: error: expected primary-expression before ?*? token
> > gdal_wrap.cpp:1279: error: ?value? was not declared in this scope
> > gdal_wrap.cpp:1279: error: initializer expression list treated as
> > compound expression
> > gdal_wrap.cpp:1536: warning: deprecated conversion from string constant
> > to ?char*?
> > gdal_wrap.cpp: In function ?void _wrap_PushErrorHandler__SWIG_1(int,
> > zval*, zval**, zval*, int)?:
> > gdal_wrap.cpp:1806: warning: deprecated conversion from string constant
> > to ?char*?
> > gdal_wrap.cpp: In function ?void _wrap_MajorObject_GetDescription(int,
> > zval*, zval**, zval*, int)?:
> > gdal_wrap.cpp:2128: warning: deprecated conversion from string constant
> > to ?char*?
> > gdal_wrap.cpp: In function ?void _wrap_MajorObject_SetDescription(int,
> > zval*, zval**, zval*, int)?:
> > gdal_wrap.cpp:2160: warning: deprecated conversion from string constant
> > to ?char*?
> > gdal_wrap.cpp: In function ?void _wrap_MajorObject_GetMetadata_Dict(int,
> > zval*, zval**, zval*, int)?:
> > gdal_wrap.cpp:2197: warning: deprecated conversion from string constant
> > to ?char*?
> > gdal_wrap.cpp: In function ?void _wrap_MajorObject_GetMetadata_List(int,
> > zval*, zval**, zval*, int)?:
> > gdal_wrap.cpp:2252: warning: deprecated conversion from string constant
> > to ?char*?
> > gdal_wrap.cpp: In function ?void
> > _wrap_MajorObject_SetMetadata__SWIG_0(int, zval*, zval**, zval*, int)?:
> > gdal_wrap.cpp:2306: warning: deprecated conversion from string constant
> > to ?char*?
> > gdal_wrap.cpp: In function ?void
> > _wrap_MajorObject_SetMetadata__SWIG_1(int, zval*, zval**, zval*, int)?:
> > gdal_wrap.cpp:2372: warning: deprecated conversion from string constant
> > to ?char*?
> > gdal_wrap.cpp: At global scope:
> > gdal_wrap.cpp:2463: error: redefinition of ?pval
> > _wrap_propget_MajorObject?
> > gdal_wrap.cpp:869: error: ?pval _wrap_propget_MajorObject? previously
> > declared here
> > gdal_wrap.cpp:2463: error: ?zend_property_reference? was not declared in
> > this scope
> > gdal_wrap.cpp:2463: error: ?property_reference? was not declared in this
> > scope
> > make[2]: *** [gdal_wrap.o] Error 1
> > make[2]: Leaving directory `/usr/local/gdal-1.7.2/swig/php'
> > make[1]: *** [build] Error 2
> > make[1]: Leaving directory `/usr/local/gdal-1.7.2/swig'
> > make: *** [swig-modules] Error 2
> 

-- 
Murat BEYHAN
Jeofizik Y.M?h.
T.C. Ba?bakanl?k
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem Dairesi Ba?kanl???
Eski?ehir Yolu 12. Km.
Lodumlu/ANKARA
Tel: 312 2872680-1556
email:beyhan@deprem.gov.tr


-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.

From jamesm at lantic.net  Thu Sep 16 14:57:51 2010
From: jamesm at lantic.net (James Meyer)
Date: Thu Sep 16 14:58:03 2010
Subject: [gdal-dev] GDALDataset blocks in different thread
In-Reply-To: <201009161927.07375.even.rouault@mines-paris.org>
References: <4C91D3FF.6010709@lantic.net>
	<201009161927.07375.even.rouault@mines-paris.org>
Message-ID: <4C9268AF.4060208@lantic.net>

Hi Even

Thanks for the reply. I ran your code and it doesn't block with your 
sample tiff file.
It blocks with any .pix files (driver: PCIDSK Database File) with the 
output being:

*********************
in thread
finished
********************/

/I am running Ubuntu 10.04 and have GDAL 1.7 on my system installed 
through the package manager.
CPL_MULTIPROC_PTHREAD is 1.

When I debug the program with gdb and reach the line that blocks, gdb 
blocks along with the line. I also can't step into the call to 
GDALChecksumImage.
Of course I might be debugging it wrong.

Any ideas?


On 16/09/2010 19:27, Even Rouault wrote:
> James,
>
> what you see is a bit surprising...
>
> Do you build GDAL by yourself or use a packaged version ? If you build it
> yourself, you explicitely need to specify --with-threads at ./configure time
> (unless you use the latest trunk version where it is now the default). In
> port/cpl_multiproc.h, you can see #define CPL_MULTIPROC_PTHREAD 1 if everything
> works. If you have only the .so, you can for example try using the
> CPLCreateThread() method. If it returns -1, then you have the stub
> implementation.
>
> Could you try compiling and running the following code that is an attempt to
> have a minimum scenario that reproduces what you descrbe ?
>
> ****************************************
>
> #include<gdal.h>
> #include<gdal_alg.h>
> #include "cpl_multiproc.h"
>
> void my_thread(void* pData)
> {
>      GDALDatasetH hDS;
>      int checksum;
>      hDS = (GDALDatasetH)pData;
>
>      printf("in thread\n");
>      checksum = GDALChecksumImage(GDALGetRasterBand(hDS, 1), 0, 0, 20, 20);
>      printf("checksum = %d\n", checksum);
> }
>
> int main(int argc, char* argv[])
> {
>      GDALDatasetH hDS;
>      GDALAllRegister();
>      hDS = GDALOpen("byte.tif", GA_ReadOnly);
>      CPLCreateThread(my_thread, hDS);
>      CPLSleep(2);
>      printf("finished\n");
>      return 0;
> }
>
> ****************************************
>
> It works fine for me. The byte.tif is available at
> http://trac.osgeo.org/gdal/export/20628/trunk/autotest/gcore/data/byte.tif
>
> Otherwise, which OS are you using ?  which GDAL version ? Which GDAL driver is
> used by your dataset ? etc etc ? If you run it under gdb, what is the stack
> trace when it is blocked ?
>
> Even
>
> Le jeudi 16 septembre 2010 10:23:27, James Meyer a ?crit :
>    
>> Hi
>>
>> I am opening a GDALDataset in my main thread which I then pass to a
>> second thread for processing. Only the second thread accesses the dataset.
>>
>> As soon as the thread makes a call to GDALRasterBand::RasterIO() the
>> thread blocks indefinitely.
>>
>> Could you please explain to me why this is happening?
>>
>> Also, how do I check whether my build of GDAL was built with the
>> --with-threads option enabled?
>>
>> Thanks
>>
>> James
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>      
>    
From even.rouault at mines-paris.org  Thu Sep 16 15:29:59 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep 16 15:29:54 2010
Subject: [gdal-dev] GDALDataset blocks in different thread
In-Reply-To: <4C9268AF.4060208@lantic.net>
References: <4C91D3FF.6010709@lantic.net>
	<201009161927.07375.even.rouault@mines-paris.org>
	<4C9268AF.4060208@lantic.net>
Message-ID: <201009162129.59183.even.rouault@mines-paris.org>

James,

ok, I confirm the bug. This was indeed specific to the new implementation of the 
PCIDSK driver that came in 1.7.0. 

See http://trac.osgeo.org/gdal/ticket/3755 for the fix

Le jeudi 16 septembre 2010 20:57:51, James Meyer a ?crit :
> Hi Even
> 
> Thanks for the reply. I ran your code and it doesn't block with your
> sample tiff file.
> It blocks with any .pix files (driver: PCIDSK Database File) with the
> output being:
> 
> *********************
> in thread
> finished
> ********************/
> 
> /I am running Ubuntu 10.04 and have GDAL 1.7 on my system installed
> through the package manager.
> CPL_MULTIPROC_PTHREAD is 1.
> 
> When I debug the program with gdb and reach the line that blocks, gdb
> blocks along with the line. I also can't step into the call to
> GDALChecksumImage.
> Of course I might be debugging it wrong.
> 
> Any ideas?
> 
> On 16/09/2010 19:27, Even Rouault wrote:
> > James,
> > 
> > what you see is a bit surprising...
> > 
> > Do you build GDAL by yourself or use a packaged version ? If you build it
> > yourself, you explicitely need to specify --with-threads at ./configure
> > time (unless you use the latest trunk version where it is now the
> > default). In port/cpl_multiproc.h, you can see #define
> > CPL_MULTIPROC_PTHREAD 1 if everything works. If you have only the .so,
> > you can for example try using the CPLCreateThread() method. If it
> > returns -1, then you have the stub implementation.
> > 
> > Could you try compiling and running the following code that is an attempt
> > to have a minimum scenario that reproduces what you descrbe ?
> > 
> > ****************************************
> > 
> > #include<gdal.h>
> > #include<gdal_alg.h>
> > #include "cpl_multiproc.h"
> > 
> > void my_thread(void* pData)
> > {
> > 
> >      GDALDatasetH hDS;
> >      int checksum;
> >      hDS = (GDALDatasetH)pData;
> >      
> >      printf("in thread\n");
> >      checksum = GDALChecksumImage(GDALGetRasterBand(hDS, 1), 0, 0, 20,
> >      20); printf("checksum = %d\n", checksum);
> > 
> > }
> > 
> > int main(int argc, char* argv[])
> > {
> > 
> >      GDALDatasetH hDS;
> >      GDALAllRegister();
> >      hDS = GDALOpen("byte.tif", GA_ReadOnly);
> >      CPLCreateThread(my_thread, hDS);
> >      CPLSleep(2);
> >      printf("finished\n");
> >      return 0;
> > 
> > }
> > 
> > ****************************************
> > 
> > It works fine for me. The byte.tif is available at
> > http://trac.osgeo.org/gdal/export/20628/trunk/autotest/gcore/data/byte.ti
> > f
> > 
> > Otherwise, which OS are you using ?  which GDAL version ? Which GDAL
> > driver is used by your dataset ? etc etc ? If you run it under gdb, what
> > is the stack trace when it is blocked ?
> > 
> > Even
> > 
> > Le jeudi 16 septembre 2010 10:23:27, James Meyer a ?crit :
> >> Hi
> >> 
> >> I am opening a GDALDataset in my main thread which I then pass to a
> >> second thread for processing. Only the second thread accesses the
> >> dataset.
> >> 
> >> As soon as the thread makes a call to GDALRasterBand::RasterIO() the
> >> thread blocks indefinitely.
> >> 
> >> Could you please explain to me why this is happening?
> >> 
> >> Also, how do I check whether my build of GDAL was built with the
> >> --with-threads option enabled?
> >> 
> >> Thanks
> >> 
> >> James
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jamesm at lantic.net  Thu Sep 16 16:54:16 2010
From: jamesm at lantic.net (James Meyer)
Date: Thu Sep 16 16:54:33 2010
Subject: [gdal-dev] GDALDataset blocks in different thread
In-Reply-To: <201009162129.59183.even.rouault@mines-paris.org>
References: <4C91D3FF.6010709@lantic.net>
	<201009161927.07375.even.rouault@mines-paris.org>
	<4C9268AF.4060208@lantic.net>
	<201009162129.59183.even.rouault@mines-paris.org>
Message-ID: <4C9283F8.8070801@lantic.net>

Oh okay. Thanks!

All the while I thought I was doing something wrong.
I'm assuming the fix won't be reflected in the version that is available 
from the Ubuntu repositories, right?
In other words I will need to build GDAL from source then?

Regards

James

On 16/09/2010 21:29, Even Rouault wrote:
> James,
>
> ok, I confirm the bug. This was indeed specific to the new implementation of the
> PCIDSK driver that came in 1.7.0.
>
> See http://trac.osgeo.org/gdal/ticket/3755 for the fix
>
> Le jeudi 16 septembre 2010 20:57:51, James Meyer a ?crit :
>    
>> Hi Even
>>
>> Thanks for the reply. I ran your code and it doesn't block with your
>> sample tiff file.
>> It blocks with any .pix files (driver: PCIDSK Database File) with the
>> output being:
>>
>> *********************
>> in thread
>> finished
>> ********************/
>>
>> /I am running Ubuntu 10.04 and have GDAL 1.7 on my system installed
>> through the package manager.
>> CPL_MULTIPROC_PTHREAD is 1.
>>
>> When I debug the program with gdb and reach the line that blocks, gdb
>> blocks along with the line. I also can't step into the call to
>> GDALChecksumImage.
>> Of course I might be debugging it wrong.
>>
>> Any ideas?
>>
>> On 16/09/2010 19:27, Even Rouault wrote:
>>      
>>> James,
>>>
>>> what you see is a bit surprising...
>>>
>>> Do you build GDAL by yourself or use a packaged version ? If you build it
>>> yourself, you explicitely need to specify --with-threads at ./configure
>>> time (unless you use the latest trunk version where it is now the
>>> default). In port/cpl_multiproc.h, you can see #define
>>> CPL_MULTIPROC_PTHREAD 1 if everything works. If you have only the .so,
>>> you can for example try using the CPLCreateThread() method. If it
>>> returns -1, then you have the stub implementation.
>>>
>>> Could you try compiling and running the following code that is an attempt
>>> to have a minimum scenario that reproduces what you descrbe ?
>>>
>>> ****************************************
>>>
>>> #include<gdal.h>
>>> #include<gdal_alg.h>
>>> #include "cpl_multiproc.h"
>>>
>>> void my_thread(void* pData)
>>> {
>>>
>>>       GDALDatasetH hDS;
>>>       int checksum;
>>>       hDS = (GDALDatasetH)pData;
>>>
>>>       printf("in thread\n");
>>>       checksum = GDALChecksumImage(GDALGetRasterBand(hDS, 1), 0, 0, 20,
>>>       20); printf("checksum = %d\n", checksum);
>>>
>>> }
>>>
>>> int main(int argc, char* argv[])
>>> {
>>>
>>>       GDALDatasetH hDS;
>>>       GDALAllRegister();
>>>       hDS = GDALOpen("byte.tif", GA_ReadOnly);
>>>       CPLCreateThread(my_thread, hDS);
>>>       CPLSleep(2);
>>>       printf("finished\n");
>>>       return 0;
>>>
>>> }
>>>
>>> ****************************************
>>>
>>> It works fine for me. The byte.tif is available at
>>> http://trac.osgeo.org/gdal/export/20628/trunk/autotest/gcore/data/byte.ti
>>> f
>>>
>>> Otherwise, which OS are you using ?  which GDAL version ? Which GDAL
>>> driver is used by your dataset ? etc etc ? If you run it under gdb, what
>>> is the stack trace when it is blocked ?
>>>
>>> Even
>>>
>>> Le jeudi 16 septembre 2010 10:23:27, James Meyer a ?crit :
>>>        
>>>> Hi
>>>>
>>>> I am opening a GDALDataset in my main thread which I then pass to a
>>>> second thread for processing. Only the second thread accesses the
>>>> dataset.
>>>>
>>>> As soon as the thread makes a call to GDALRasterBand::RasterIO() the
>>>> thread blocks indefinitely.
>>>>
>>>> Could you please explain to me why this is happening?
>>>>
>>>> Also, how do I check whether my build of GDAL was built with the
>>>> --with-threads option enabled?
>>>>
>>>> Thanks
>>>>
>>>> James
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>          
>    
From even.rouault at mines-paris.org  Thu Sep 16 17:11:21 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep 16 17:11:16 2010
Subject: [gdal-dev] GDALDataset blocks in different thread
In-Reply-To: <4C9283F8.8070801@lantic.net>
References: <4C91D3FF.6010709@lantic.net>
	<201009162129.59183.even.rouault@mines-paris.org>
	<4C9283F8.8070801@lantic.net>
Message-ID: <201009162311.21704.even.rouault@mines-paris.org>

Le jeudi 16 septembre 2010 22:54:16, James Meyer a ?crit :
> Oh okay. Thanks!
> 
> All the while I thought I was doing something wrong.
> I'm assuming the fix won't be reflected in the version that is available
> from the Ubuntu repositories, right?

It's up to the Ubuntu packagers. You'll probably get the fix when they'll 
update to the next versions that will be released by the project (1.8.0 or 
1.7.3).

> In other words I will need to build GDAL from source then?

Yes, for now, that's the way to go if you want to get the fix quickly.

> 
> Regards
> 
> James
> 
> On 16/09/2010 21:29, Even Rouault wrote:
> > James,
> > 
> > ok, I confirm the bug. This was indeed specific to the new implementation
> > of the PCIDSK driver that came in 1.7.0.
> > 
> > See http://trac.osgeo.org/gdal/ticket/3755 for the fix
> > 
> > Le jeudi 16 septembre 2010 20:57:51, James Meyer a ?crit :
> >> Hi Even
> >> 
> >> Thanks for the reply. I ran your code and it doesn't block with your
> >> sample tiff file.
> >> It blocks with any .pix files (driver: PCIDSK Database File) with the
> >> output being:
> >> 
> >> *********************
> >> in thread
> >> finished
> >> ********************/
> >> 
> >> /I am running Ubuntu 10.04 and have GDAL 1.7 on my system installed
> >> through the package manager.
> >> CPL_MULTIPROC_PTHREAD is 1.
> >> 
> >> When I debug the program with gdb and reach the line that blocks, gdb
> >> blocks along with the line. I also can't step into the call to
> >> GDALChecksumImage.
> >> Of course I might be debugging it wrong.
> >> 
> >> Any ideas?
> >> 
> >> On 16/09/2010 19:27, Even Rouault wrote:
> >>> James,
> >>> 
> >>> what you see is a bit surprising...
> >>> 
> >>> Do you build GDAL by yourself or use a packaged version ? If you build
> >>> it yourself, you explicitely need to specify --with-threads at
> >>> ./configure time (unless you use the latest trunk version where it is
> >>> now the default). In port/cpl_multiproc.h, you can see #define
> >>> CPL_MULTIPROC_PTHREAD 1 if everything works. If you have only the .so,
> >>> you can for example try using the CPLCreateThread() method. If it
> >>> returns -1, then you have the stub implementation.
> >>> 
> >>> Could you try compiling and running the following code that is an
> >>> attempt to have a minimum scenario that reproduces what you descrbe ?
> >>> 
> >>> ****************************************
> >>> 
> >>> #include<gdal.h>
> >>> #include<gdal_alg.h>
> >>> #include "cpl_multiproc.h"
> >>> 
> >>> void my_thread(void* pData)
> >>> {
> >>> 
> >>>       GDALDatasetH hDS;
> >>>       int checksum;
> >>>       hDS = (GDALDatasetH)pData;
> >>>       
> >>>       printf("in thread\n");
> >>>       checksum = GDALChecksumImage(GDALGetRasterBand(hDS, 1), 0, 0, 20,
> >>>       20); printf("checksum = %d\n", checksum);
> >>> 
> >>> }
> >>> 
> >>> int main(int argc, char* argv[])
> >>> {
> >>> 
> >>>       GDALDatasetH hDS;
> >>>       GDALAllRegister();
> >>>       hDS = GDALOpen("byte.tif", GA_ReadOnly);
> >>>       CPLCreateThread(my_thread, hDS);
> >>>       CPLSleep(2);
> >>>       printf("finished\n");
> >>>       return 0;
> >>> 
> >>> }
> >>> 
> >>> ****************************************
> >>> 
> >>> It works fine for me. The byte.tif is available at
> >>> http://trac.osgeo.org/gdal/export/20628/trunk/autotest/gcore/data/byte.
> >>> ti f
> >>> 
> >>> Otherwise, which OS are you using ?  which GDAL version ? Which GDAL
> >>> driver is used by your dataset ? etc etc ? If you run it under gdb,
> >>> what is the stack trace when it is blocked ?
> >>> 
> >>> Even
> >>> 
> >>> Le jeudi 16 septembre 2010 10:23:27, James Meyer a ?crit :
> >>>> Hi
> >>>> 
> >>>> I am opening a GDALDataset in my main thread which I then pass to a
> >>>> second thread for processing. Only the second thread accesses the
> >>>> dataset.
> >>>> 
> >>>> As soon as the thread makes a call to GDALRasterBand::RasterIO() the
> >>>> thread blocks indefinitely.
> >>>> 
> >>>> Could you please explain to me why this is happening?
> >>>> 
> >>>> Also, how do I check whether my build of GDAL was built with the
> >>>> --with-threads option enabled?
> >>>> 
> >>>> Thanks
> >>>> 
> >>>> James
> >>>> _______________________________________________
> >>>> gdal-dev mailing list
> >>>> gdal-dev@lists.osgeo.org
> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ahmettemiz88 at gmail.com  Fri Sep 17 03:36:11 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Fri Sep 17 03:36:14 2010
Subject: [gdal-dev] gdal_grid from contour
Message-ID: <AANLkTin32Y1856P24GrBE0vvp6prMuxUaunQYVuf=JKs@mail.gmail.com>

hello

Does gdal_grid have a capability of generating dem from elevation contour
lines ?

regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100917/0468eb9d/attachment.html
From ari.jolma at gmail.com  Fri Sep 17 08:12:34 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri Sep 17 08:12:39 2010
Subject: [gdal-dev] Of errors and their treatment in bindings
Message-ID: <4C935B32.8060800@gmail.com>

Folks,

I added binding to VSIStatL (my idea is to start using ReadDir from GDAL 
and I need to know if something is a file or a directory).

That requires, in my mind, a new typemap, which I call 
RETURN_NONE_TRUE_IS_ERROR as the VSIStatL in port returns 0 on success 
but it does not call CPLError.

Similarly we have from earlier IF_FALSE_RETURN_NONE, which is used now 
only in once case (GCPsToGeoTransform) where GDAL non-zero return means 
error condition and GDAL does not call CPLError (the docs explain 
possible causes of error). And we have IF_ERROR_RETURN_NONE. IMHO these 
should be called RETURN_NONE_FALSE_IS_ERROR and RETURN_NONE.

Sometimes the GDAL API uses plain int and sometimes CPLErr. We need to 
tell Swig that it should drop the return value. If int is used, it must 
be shadowed with typedef int something_else. I renamed the typedef from 
FALSE_IS_ERR to RETURN_NONE which is hopefully a bit more descriptive.

I guess if we could trust GDAL to call CPLError always we could simply 
use one RETURN_NONE typemap and not three. That would have the added 
benefit of having a bit more clear error message as now only issuing an 
"unspecified error" can basically be put into the typemaps.

Ari

From warmerdam at pobox.com  Fri Sep 17 08:33:25 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep 17 08:33:30 2010
Subject: [gdal-dev] gdal_grid from contour
In-Reply-To: <AANLkTin32Y1856P24GrBE0vvp6prMuxUaunQYVuf=JKs@mail.gmail.com>
References: <AANLkTin32Y1856P24GrBE0vvp6prMuxUaunQYVuf=JKs@mail.gmail.com>
Message-ID: <4C936015.1000000@pobox.com>

ahmet temiz wrote:
> hello
> 
> Does gdal_grid have a capability of generating dem from elevation 
> contour lines ?
> 

Ahmet,

The normal way of generating a DEM from contour lines with GDAL is to
burn the contours into a blank (all nodata) file with gdal_rasterize and
then to fill in the areas between contours by interpolation with
gdal_fillnodata.py.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ahmettemiz88 at gmail.com  Fri Sep 17 09:02:46 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Fri Sep 17 09:02:48 2010
Subject: [gdal-dev] gdal_grid from contour
In-Reply-To: <4C936015.1000000@pobox.com>
References: <AANLkTin32Y1856P24GrBE0vvp6prMuxUaunQYVuf=JKs@mail.gmail.com>
	<4C936015.1000000@pobox.com>
Message-ID: <AANLkTinUCWV6UZNtU_dcoZqxEC0qAbWY1SzSUo1yNDb=@mail.gmail.com>

thank you

I am sorry but I am not clear.

how shall we integrate elevation data if we burn vectors to all nodata ?

regards

2010/9/17 Frank Warmerdam <warmerdam@pobox.com>

> ahmet temiz wrote:
>
>> hello
>>
>> Does gdal_grid have a capability of generating dem from elevation contour
>> lines ?
>>
>>
> Ahmet,
>
> The normal way of generating a DEM from contour lines with GDAL is to
> burn the contours into a blank (all nodata) file with gdal_rasterize and
> then to fill in the areas between contours by interpolation with
> gdal_fillnodata.py.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100917/85df04fe/attachment.html
From warmerdam at pobox.com  Fri Sep 17 09:12:38 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep 17 09:12:43 2010
Subject: [gdal-dev] gdal_grid from contour
In-Reply-To: <AANLkTinUCWV6UZNtU_dcoZqxEC0qAbWY1SzSUo1yNDb=@mail.gmail.com>
References: <AANLkTin32Y1856P24GrBE0vvp6prMuxUaunQYVuf=JKs@mail.gmail.com>
	<4C936015.1000000@pobox.com>
	<AANLkTinUCWV6UZNtU_dcoZqxEC0qAbWY1SzSUo1yNDb=@mail.gmail.com>
Message-ID: <4C936946.3090109@pobox.com>

ahmet temiz wrote:
> thank you
> 
> I am sorry but I am not clear.
> 
> how shall we integrate elevation data if we burn vectors to all nodata ?

Ahmet,

You need to create a blank file for the study area - with all pixels set to
a nodata value.  Then you burn the contours in with gdal_rasterize.  The
pixels under the contours will be set to the elevation value of the contours.

Then interpolate with gdal_fillnodata.py.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Sjur.A.Kolberg at sintef.no  Fri Sep 17 10:13:23 2010
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Fri Sep 17 10:14:30 2010
Subject: [gdal-dev] gdal_translate distorts PROJCS specification ?
Message-ID: <72251B925CE10A478606EEAC6AA683BE1A9344F7E9@SINTEFEXMBX01.sintef.no>

Dear experts,

I have a grib2 file which I try to convert to IDRISI, extracting band 1.
Somehow the PROJCS section is distorted, leaving the IDRISI file useless for warping.

Windows 7, GDAL 1.7.0b2, FWTools 2.4.7, released 2010/01/19
I use the following sequence of commands:

gdalinfo har04_00_ext.grib2>gribinfo.txt

gdal_translate -of RST -b 1 har04_00_ext.grib2 har04_00_ext.rst
Input file size is 289, 489
0...10...20...30...40...50...60...70...80...90...100 - done.

gdalinfo har04_00_ext.rst>rstinfo.txt


Output of first GDALINFO:

Driver: GRIB/GRIdded Binary (.grb)
Files: har04_00_ext.grib2
Size is 289, 489
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["Coordinate System imported from GRIB file",
        DATUM["unknown",
            SPHEROID["Sphere",6367470,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",64.35],
    PARAMETER["standard_parallel_2",64.35],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",337],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0]]
Origin = (1192906.028257467600000,10107044.152202457000000)
Pixel Size = (4000.000000000000000,-4000.000000000000000)
Corner Coordinates:
Upper Left  ( 1192906.028,10107044.152) ( 19d40'29.23"E, 74d32'51.23"N)
Lower Left  ( 1192906.028, 8151044.152) (  1d52'57.71"W, 58d57'40.03"N)
Upper Right ( 2348906.028,10107044.152) ( 40d41'28.49"E, 66d46'40.32"N)
Lower Right ( 2348906.028, 8151044.152) ( 14d55'47.70"E, 54d18'2.03"N)
Center      ( 1770906.028, 9129044.152) ( 16d25'18.42"E, 64d26'49.23"N)
Band 1 Block=289x1 Type=Float64, ColorInterp=Undefined
Etc... (long file)


Output of second GDALINFO, note the "-1.#INF" instead of 0 under the SPHEROID label.

Driver: RST/Idrisi Raster A.1
Files: har04_00_ext.rst
       har04_00_ext.rst.aux.xml
       har04_00_ext.rdc
       har04_00_ext.ref
Size is 289, 489
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["har04_00_ext",
        DATUM["unknown",
            SPHEROID["Sphere",6367470,"-1.#INF"],
            TOWGS84[0,0,0,0,0,0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",64.35],
    PARAMETER["standard_parallel_2",64.35],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",337],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["degree",0]]
Origin = (1192906.028257499900000,10107044.152202500000000)
Pixel Size = (4000.000000000000000,-4000.000000000000000)
Corner Coordinates:
Upper Left  ( 1192906.028,10107044.152)
Lower Left  ( 1192906.028, 8151044.152)
Upper Right ( 2348906.028,10107044.152)
Lower Right ( 2348906.028, 8151044.152)
Center      ( 1770906.028, 9129044.152)
Band 1 Block=289x1 Type=Float32, ColorInterp=Gray


Do anyone have a clue to why this happens?

Regards, Sjur K :-)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100917/6405fc37/attachment.html
From warmerdam at pobox.com  Fri Sep 17 10:44:57 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep 17 10:45:05 2010
Subject: [gdal-dev] gdal_translate distorts PROJCS specification ?
In-Reply-To: <72251B925CE10A478606EEAC6AA683BE1A9344F7E9@SINTEFEXMBX01.sintef.no>
References: <72251B925CE10A478606EEAC6AA683BE1A9344F7E9@SINTEFEXMBX01.sintef.no>
Message-ID: <4C937EE9.8060001@pobox.com>

Sjur Kolberg wrote:
> Output of second GDALINFO, note the ?-1.#INF? instead of 0 under the 
> SPHEROID label.
...
>             SPHEROID["Sphere",6367470,"-1.#INF"],

Sjur,

I believe this is a problem with sphere representation in the RST driver.
I see a similar problem if I do:

   gdal_translate -of RST utm.tif \
         -a_srs '+proj=utm +zone=11 +ellps=sphere' out.rst

Could you file a ticket on this issue?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fabrice.lallauret at external.thalesgroup.com  Fri Sep 17 10:56:55 2010
From: fabrice.lallauret at external.thalesgroup.com (Fabrice LALLAURET - PSV)
Date: Fri Sep 17 10:56:58 2010
Subject: [gdal-dev] Re: problem with unwanted white space in input file
	list	for	gdalbuildvrt
In-Reply-To: <loom.20100916T144001-730@post.gmane.org>
References: <4C907E50.4030605@external.thalesgroup.com>
	<loom.20100916T144001-730@post.gmane.org>
Message-ID: <25452_1284735415_4C9381B7_25452_12206_1_4C9381B7.6090203@external.thalesgroup.com>

  Le 09/16/2010 02:51 PM, Jukka Rahkonen a ?crit :
> Fabrice LALLAURET - PSV<fabrice.lallauret<at>  external.thalesgroup.com>  writes:
>
>>    Hi all,
>> I try to use some gdal tools in a batch file on windows and I've a
>> strange side effect. Here is a little batch use with fwtools 2.4.7.
>>
>> @echo off
>> echo "Test 1 with file list"
>> del listin.txt test1.vrt test2.vrt
>> for %%F in (krel*.tif) do @echo %%F>>   listin.txt
>> gdalbuildvrt  -input_file_list listin.txt test1.vrt
>> echo "Test 2 with direct argument"
>> gdalbuildvrt  test2.vrt krel*.tif
> ......
>> After some investigations,(check my file, gdal debug compilation, try on
>> linux too, ...), I've found that there is a space at the end of each
>> line in my listin.txt. On linux, the same thing produce a clear error :
> I tried your batch file and my listin.txt does not have any space
> characters at the end of lines. Are you sure that your script did
> not ever have space in %%F>>  ?
>
> dir /b krel*.tif>listin.txt
> gives the same result as
> for %%F in (krel*.tif) do @echo %%F>>   listin.txt
>
> -Jukka Rahkonen-
>
Hi,
Thanks, my problem isn't really with my batch script, I've found my 
error (%%F> listin.txt and not %%F > listin.txt) but if I put a space at 
the end of each line in the filelist, I have strange error with 
gdalbuildvrt ("gdalbuildvrt does not support positive NS resolution"). 
On linux, the same thing produce an error like "file don't exist".

Fabrice Lallauret

From Chris.Yesson at ioz.ac.uk  Fri Sep 17 10:29:38 2010
From: Chris.Yesson at ioz.ac.uk (Chris Yesson)
Date: Fri Sep 17 11:23:43 2010
Subject: [gdal-dev] gdal_calc.py
Message-ID: <41E1ED29E5E8E34BBDD8B82CFA1A9D0409997FCF@ZSL26.zsl.org>

Hi all,

 

I have been playing around with a python/gdalnumeric-based raster
calculator for a while now
(http://static.zsl.org/files/gdal-calc-1218.py).

I thought it was time to try to share this properly via GDAL.

 

Could this go on the sample python scripts directory? 

Could I get advice on what I would need to do to get it into the main
scripts?

 

Many thanks

 

- Chris

 

Dr Chris Yesson
Postdoctoral Researcher
Institute of Zoology
Zoological Society of London
Regent's Park
London NW1 4RY
020 7449 6267
http://www.zsl.org/chrisyesson/ <http://www.zsl.org/chrisyesson/> 
http://eu-fp7-coralfish.net/ <http://eu-fp7-coralfish.net/> 

 



The Zoological Society of London is incorporated by Royal Charter
Principal Office England. Company Number RC000749
Registered address: 
Regent's Park, London, England NW1 4RY
Registered Charity in England and Wales no. 208728 

_________________________________________________________________________
This e-mail has been sent in confidence to the named addressee(s).
If you are not the intended recipient, you must not disclose or distribute
it in any form, and you are asked to contact the sender immediately.
Views or opinions expressed in this communication may not be those
of The Zoological Society of London and, therefore, The Zoological
Society of London does not accept legal responsibility for the contents
of this message. The recipient(s) must be aware that e-mail is not a
secure communication medium and that the contents of this mail may
have been altered by a third party in transit.
If you have any issues regarding this mail please contact:
administrator@zsl.org.
___________________________________________________________________________



This message has been scanned for viruses by MailControl, a service from BlackSpider Technologies.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100917/2fe3d716/attachment.html
From jeff.hamann at forestinformatics.com  Fri Sep 17 12:30:36 2010
From: jeff.hamann at forestinformatics.com (Jeff Hamann)
Date: Fri Sep 17 12:47:20 2010
Subject: [gdal-dev] can't import osgeo or gdal in python
Message-ID: <2768F3C4-CBD6-492D-8DE8-2BC84A641DDE@forestinformatics.com>

Hi list, 

First, let me say, I'm *not* a python person, so please be gentle with your assumptions.

I built gdal-1.7.2 with the following configure options:


$ ./configure \
 CC="gcc -arch i386" \
 CXX="g++ -arch i386" \
OBJC="gcc -arch i386" \
 F77="gfortran -arch i386" \
 FC="gfortran -arch i386" \
  --with-pg=/usr/local/pgsql/bin/pg_config \
  --with-macosx-framework=NO \
  --without-sqlite3  \
  --with-python

configure: WARNING: unrecognized options: --with-macosx-framework

GDAL is now configured for i386-apple-darwin10.4.0

  Installation directory:    /usr/local
  C compiler:                gcc -arch i386  -g -O2
  C++ compiler:              g++ -arch i386  -g -O2

  LIBTOOL support:           yes

  LIBZ support:              external
  GRASS support:             no
  CFITSIO support:           no
  PCRaster support:          internal
  NetCDF support:            yes
  LIBPNG support:            internal
  LIBTIFF support:           internal (BigTIFF=yes)
  LIBGEOTIFF support:        internal
  LIBJPEG support:           internal
  8/12 bit JPEG TIFF:        yes
  LIBGIF support:            internal
  OGDI support:              no
  HDF4 support:              no
  HDF5 support:              no
  Kakadu support:            no
  JasPer support:            no
  ECW support:               no
  MrSID support:             no
  MSG support:               no
  GRIB support:              yes
  EPSILON support:           no
  cURL support (wms/wcs/...):yes
  PostgreSQL support:        yes
  MySQL support:             no
  Ingres support:            no
  Xerces-C support:          no
  NAS support:               no
  Expat support:             yes
  ODBC support:              no
  PGeo support:              no
  PCIDSK support:            internal
  OCI support:               no
  GEORASTER support:         no
  SDE support:               no
  DODS support:              no
  SQLite support:            no
  SpatiaLite support:        no
  DWGdirect support          no
  INFORMIX DataBlade support:no
  GEOS support:              yes
  VFK support:               yes

  Mac OS X Framework :       no

  SWIG Bindings:          python 

  Statically link PROJ.4:    no
  enable OGR building:       yes
  enable pthread support:    no
  hide internal symbols:     no

Jeff-Hamanns-MacBook-Pro:gdal-1.7.2 hamannj$ 


okay, a little odd (-with-macosx-framework, --with-swig) when ./configure --help contains:

  --with-macosx-framework         Build and install GDAL as a Mac OS X Framework
  --with-perl           Enable perl bindings
  --with-php            Enable php bindings
  --with-ruby           Enable Ruby bindings
  --with-python       Enable python bindings

but, it builds and installs just fine. I can also build things that depend on gdal (i.e. wktraster). 

When I try to "run" (again newbie talking here, so be patient), a python script and import gdal:

Jeff-Hamanns-MacBook-Pro:gdal-1.7.2 hamannj$ python
Python 2.6.1 (r261:67515, Feb 11 2010, 00:51:29) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import gdal
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/gdal.py", line 2, in <module>
    from osgeo.gdal import deprecation_warn
  File "/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/__init__.py", line 21, in <module>
    _gdal = swig_import_helper()
  File "/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/__init__.py", line 17, in swig_import_helper
    _mod = imp.load_module('_gdal', fp, pathname, description)
ImportError: dlopen(/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so, 2): Symbol not found: _CPLDefaultErrorHandler
  Referenced from: /Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so
  Expected in: flat namespace
 in /Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so
>>> 

I can't seem to get any traction, but can somebody provide an answer as to why gdal isn't loading?

Please?

Respectfully,
Jeff.



Jeff Hamann, PhD
PO Box 1421
Corvallis, Oregon 97339-1421
541-754-2457
jeff.hamann[at]forestinformatics[dot]com
http://www.forestinformatics.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100917/494a33ac/attachment.html
From chris.bailey at gtri.gatech.edu  Fri Sep 17 13:31:29 2010
From: chris.bailey at gtri.gatech.edu (Chris Bailey)
Date: Fri Sep 17 13:31:30 2010
Subject: [gdal-dev] Using TMS driver to connect to a WMTS
Message-ID: <1284744689080-5543685.post@n2.nabble.com>


Has anyone looked into the possibility of configuring the GDAL TMS driver to
connect to a WMTS using the REST interface specification?

I am interested in supporting WMTS but did not know of any public servers. I
just saw this announcement:
http://my.opera.com/tastle/blog/2010/07/12/first-public-ogc-wmts-1-0-0-is-now-available

Since it is supporting the WMTS REST interfaces, I thought it might be
possible to configure a GDAL WMS description file to connect.  I have
browsed the WMTS spec and it appears that it would be possible but if
someone has an example WMS XML file (or reasons why it can't work) it could
save a lot of headaches.

Thanks,
  Chris Bailey
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Using-TMS-driver-to-connect-to-a-WMTS-tp5543685p5543685.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ivan.lucena at pmldnet.com  Fri Sep 17 13:38:48 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri Sep 17 13:38:50 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gZ2RhbF9jYWxjLnB5?=
Message-ID: <20100917173848.18102.qmail@s466.sureserver.com>

Hi Chris,

That sounds good. 

Is that by any chance based on this idea here: [http://trac.osgeo.org/gdal/wiki/SummerOfCode]? 

Regards,

Ivan


>  -------Original Message-------
>  From: Chris Yesson <Chris.Yesson@ioz.ac.uk>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] gdal_calc.py
>  Sent: Sep 17 '10 09:29
>  
>  Hi all,
>  
>  
>  I have been playing around with a python/gdalnumeric-based raster
>  calculator for a while now (http://static.zsl.org/files/gdal-calc-1218.py).
>  
>  
>  I thought it was time to try to share this properly via GDAL.
>  
>  
>  Could this go on the sample python scripts directory?
>  
>  Could I get advice on what I would need to do to get it into the main
>  scripts?
>  
>  
>  Many thanks
>  
>  
>  - Chris
>  
>  
>  _Dr Chris Yesson_
>  _Postdoctoral Researcher_
>  _Institute__ of Zoology_
>  _Zoological Society of London_
>  _Regent's Park_
>  _London__ NW1 4RY_
>  _020 7449 6267_
>  [LINK: http://www.zsl.org/chrisyesson/] _http://www.zsl.org/chrisyesson/_
>  [LINK: http://eu-fp7-coralfish.net/] _http://eu-fp7-coralfish.net/_
>  
>  
>  The Zoological Society of London is incorporated by Royal Charter
>  Principal Office England. Company Number RC000749
>  Registered address:
>  Regent's Park, London, England NW1 4RY
>  Registered Charity in England and Wales no. 208728
>  
>  
>  _________________________________________________________________________
>  This e-mail has been sent in confidence to the named addressee(s).
>  If you are not the intended recipient, you must not disclose or distribute
>  it in any form, and you are asked to contact the sender immediately.
>  Views or opinions expressed in this communication may not be those
>  of The Zoological Society of London and, therefore, The Zoological
>  Society of London does not accept legal responsibility for the contents
>  of this message. The recipient(s) must be aware that e-mail is not a
>  secure communication medium and that the contents of this mail may
>  have been altered by a third party in transit.
>  If you have any issues regarding this mail please contact:
>  [LINK: mailto:administrator@zsl.org] administrator@zsl.org.
>  ___________________________________________________________________________
>  
>  
>  This message has been scanned for viruses by [LINK:
>  http://www.mailcontrol.com/] MailControl, a service from [LINK:
>  http://www.blackspider.com/] BlackSpider Technologies.
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
From hobu.inc at gmail.com  Fri Sep 17 13:52:13 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Sep 17 13:52:16 2010
Subject: [gdal-dev] gdal_calc.py
In-Reply-To: <41E1ED29E5E8E34BBDD8B82CFA1A9D0409997FCF@ZSL26.zsl.org>
References: <41E1ED29E5E8E34BBDD8B82CFA1A9D0409997FCF@ZSL26.zsl.org>
Message-ID: <7D0DB928-A8E8-4919-97A9-3D77AC5D28B7@gmail.com>


On Sep 17, 2010, at 9:29 AM, Chris Yesson wrote:

> Hi all,
>  
> I have been playing around with a python/gdalnumeric-based raster calculator for a while now (http://static.zsl.org/files/gdal-calc-1218.py).
> I thought it was time to try to share this properly via GDAL.
>  
> Could this go on the sample python scripts directory?
> Could I get advice on what I would need to do to get it into the main scripts?
>  
> Many thanks

I think it would be a good addition to the samples directory.  Put a copyright notice and license ala <http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/classify.py>, and I'll drop it into the examples directory.  

Howard

From Chris.Barker at noaa.gov  Fri Sep 17 14:32:46 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Fri Sep 17 14:32:49 2010
Subject: [gdal-dev] can't import osgeo or gdal in python
In-Reply-To: <2768F3C4-CBD6-492D-8DE8-2BC84A641DDE@forestinformatics.com>
References: <2768F3C4-CBD6-492D-8DE8-2BC84A641DDE@forestinformatics.com>
Message-ID: <4C93B44E.9040003@noaa.gov>

Jeff Hamann wrote:


> I built gdal-1.7.2 with the following configure options:

1) What version of OS-X, python, etc. are you using -- there are way too 
many! If nothing else, make sure that the gdal build and your testing 
are happening with the same python.

2) Can you use the pre-built frameworks here:

   http://www.kyngchaos.com/software/frameworks

That could save you a lot of pain.

Note that those frameworks are built to use the Apple-supplied python, 
and from your output, I'm guess you're on 10.6 and the Apple python, 
which is good news for you). If you want to use a different python, you 
may have to re-build, but perhaps only the python bindings -- stay 
tuned, I'm working on that myself right now.

Sorry not to be more help.

-Chris


> 
> $ ./configure \
>  CC="gcc -arch i386" \
>  CXX="g++ -arch i386" \
> OBJC="gcc -arch i386" \
>  F77="gfortran -arch i386" \
>  FC="gfortran -arch i386" \
>   --with-pg=/usr/local/pgsql/bin/pg_config \
>   --with-macosx-framework=NO \
>   --without-sqlite3  \
>   --with-python
> 
> configure: WARNING: unrecognized options: --with-macosx-framework
> 
> GDAL is now configured for i386-apple-darwin10.4.0
> 
>   Installation directory:    /usr/local
>   C compiler:                gcc -arch i386  -g -O2
>   C++ compiler:              g++ -arch i386  -g -O2
> 
>   LIBTOOL support:           yes
> 
>   LIBZ support:              external
>   GRASS support:             no
>   CFITSIO support:           no
>   PCRaster support:          internal
>   NetCDF support:            yes
>   LIBPNG support:            internal
>   LIBTIFF support:           internal (BigTIFF=yes)
>   LIBGEOTIFF support:        internal
>   LIBJPEG support:           internal
>   8/12 bit JPEG TIFF:        yes
>   LIBGIF support:            internal
>   OGDI support:              no
>   HDF4 support:              no
>   HDF5 support:              no
>   Kakadu support:            no
>   JasPer support:            no
>   ECW support:               no
>   MrSID support:             no
>   MSG support:               no
>   GRIB support:              yes
>   EPSILON support:           no
>   cURL support (wms/wcs/...):yes
>   PostgreSQL support:        yes
>   MySQL support:             no
>   Ingres support:            no
>   Xerces-C support:          no
>   NAS support:               no
>   Expat support:             yes
>   ODBC support:              no
>   PGeo support:              no
>   PCIDSK support:            internal
>   OCI support:               no
>   GEORASTER support:         no
>   SDE support:               no
>   DODS support:              no
>   SQLite support:            no
>   SpatiaLite support:        no
>   DWGdirect support          no
>   INFORMIX DataBlade support:no
>   GEOS support:              yes
>   VFK support:               yes
> 
>   Mac OS X Framework :       no
> 
>   SWIG Bindings:          python 
> 
>   Statically link PROJ.4:    no
>   enable OGR building:       yes
>   enable pthread support:    no
>   hide internal symbols:     no
> 
> Jeff-Hamanns-MacBook-Pro:gdal-1.7.2 hamannj$ 
> 
> 
> okay, a little odd (-with-macosx-framework, --with-swig) when 
> ./configure --help contains:
> 
>   --with-macosx-framework         Build and install GDAL as a Mac OS X 
> Framework
>   --with-perl           Enable perl bindings
>   --with-php            Enable php bindings
>   --with-ruby           Enable Ruby bindings
>   --with-python       Enable python bindings
> 
> but, it builds and installs just fine. I can also build things that 
> depend on gdal (i.e. wktraster). 
> 
> When I try to "run" (again newbie talking here, so be patient), a python 
> script and import gdal:
> 
> Jeff-Hamanns-MacBook-Pro:gdal-1.7.2 hamannj$ python
> Python 2.6.1 (r261:67515, Feb 11 2010, 00:51:29) 
> [GCC 4.2.1 (Apple Inc. build 5646)] on darwin
> Type "help", "copyright", "credits" or "license" for more information.
>  >>> import gdal
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
>   File 
> "/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/gdal.py", 
> line 2, in <module>
>     from osgeo.gdal import deprecation_warn
>   File 
> "/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/__init__.py", 
> line 21, in <module>
>     _gdal = swig_import_helper()
>   File 
> "/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/__init__.py", 
> line 17, in swig_import_helper
>     _mod = imp.load_module('_gdal', fp, pathname, description)
> ImportError: 
> dlopen(/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so, 
> 2): Symbol not found: _CPLDefaultErrorHandler
>   Referenced from: 
> /Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so
>   Expected in: flat namespace
>  in 
> /Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so
>  >>> 
> 
> I can't seem to get any traction, but can somebody provide an answer as 
> to why gdal isn't loading?
> 
> Please?
> 
> Respectfully,
> Jeff.
> 
> 
> 
> Jeff Hamann, PhD
> PO Box 1421
> Corvallis, Oregon 97339-1421
> 541-754-2457
> jeff.hamann[at]forestinformatics[dot]com
> http://www.forestinformatics.com <http://www.forestinformatics.com/>
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From jason.roberts at duke.edu  Fri Sep 17 15:02:58 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Fri Sep 17 15:03:06 2010
Subject: [gdal-dev] With Python bindings,
	should geometry objects created by ogr.Geometry() be
	explicitly destroyed?
Message-ID: <04b201cb569a$f1c54220$d54fc660$@roberts@duke.edu>

I have some Python code that uses OGR geometry objects internally, creating
them like this:

 

point = ogr.Geometry(ogr.wkbPoint)

 

Does this code need to explicitly destroy these geometries, like the
following, to avoid leaks, or can it simply allow them to go out of scope
and have Python's reference counting and garbage collector clean them up?

 

point.Destroy()

 

Does the situation change if I call feature.SetGeometry(point)? What about
feature.SetGeometryDirectly(point)?

 

I'm sorry for my ignorance here. I found a nice GDAL tutorial that seems to
say they *should* be explicitly destroyed in certain circumstances (see
http://www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_slides2.pdf, page
12). But I have not really seen any other examples of this.

 

If you follow gdal-dev, you probably notice that the "to destroy or not to
destroy" question comes up periodically from Python programmers, as does the
problem where someone gets a GDALDataset, gets a band, allows the
GDALDataset to go out of scope, and then expects the band to still work.
These are areas where the GDAL Python bindings to not work like other Python
libraries, causing confusion among Python programmers, who generally expect
reference counting that "just works" and that they only need to explicitly
close something when some kind of I/O is involved.

 

It would be really great if there was FAQ that pointed out all of the ways
that GDAL differs from typical Python libraries. The scenarios I mention
above seem to be two of the most common ones. Would someone be willing to
create it? I would but do not feel competent enough at this point.

 

Thanks,

Jason

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100917/4506b9a9/attachment.html
From jason.roberts at duke.edu  Fri Sep 17 15:17:06 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Fri Sep 17 15:17:14 2010
Subject: [gdal-dev] With Python bindings,
	should geometry objects created by ogr.Geometry() be	explicitly
	destroyed?
In-Reply-To: <04b201cb569a$f1c54220$d54fc660$%roberts@duke.edu>
References: <04b201cb569a$f1c54220$d54fc660$%roberts@duke.edu>
Message-ID: <04bd01cb569c$eb651bb0$c22f5310$@roberts@duke.edu>

(Just a side note: Another way that the GDAL Python bindings differ from
typical Python libraries is the need to call gdal.UseExceptions() to have
exceptions be raised when errors occur, and the need to explicitly call
gdal.ErrorReset() in the exception handler, or the same error will keep
occurring on subsequent GDAL API calls.)

 

Now back to the "to destroy or not to destroy" question.

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jason Roberts
Sent: Friday, September 17, 2010 3:03 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] With Python bindings, should geometry objects created by
ogr.Geometry() be explicitly destroyed?

 

I have some Python code that uses OGR geometry objects internally, creating
them like this:

 

point = ogr.Geometry(ogr.wkbPoint)

 

Does this code need to explicitly destroy these geometries, like the
following, to avoid leaks, or can it simply allow them to go out of scope
and have Python's reference counting and garbage collector clean them up?

 

point.Destroy()

 

Does the situation change if I call feature.SetGeometry(point)? What about
feature.SetGeometryDirectly(point)?

 

I'm sorry for my ignorance here. I found a nice GDAL tutorial that seems to
say they *should* be explicitly destroyed in certain circumstances (see
http://www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_slides2.pdf, page
12). But I have not really seen any other examples of this.

 

If you follow gdal-dev, you probably notice that the "to destroy or not to
destroy" question comes up periodically from Python programmers, as does the
problem where someone gets a GDALDataset, gets a band, allows the
GDALDataset to go out of scope, and then expects the band to still work.
These are areas where the GDAL Python bindings to not work like other Python
libraries, causing confusion among Python programmers, who generally expect
reference counting that "just works" and that they only need to explicitly
close something when some kind of I/O is involved.

 

It would be really great if there was FAQ that pointed out all of the ways
that GDAL differs from typical Python libraries. The scenarios I mention
above seem to be two of the most common ones. Would someone be willing to
create it? I would but do not feel competent enough at this point.

 

Thanks,

Jason

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100917/94ecd702/attachment.html
From woodbri at swoodbridge.com  Fri Sep 17 19:42:50 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Sep 17 19:44:22 2010
Subject: [gdal-dev] OGR C API Help needed
Message-ID: <4C93FCFA.6090504@swoodbridge.com>

Hi all,

I am stumped by this. I am trying to copy a shapefile and append a new 
attribute column to it. The loop below adds all the existing fields, but 
the code following does not add the new field. I have been trying to 
figure this out for hours and I assume it is something really stupid 
that I am missing, but ...

I would appreciate a hint on this.

-Steve

/* this loop works fine and adds all the existing fields */
   for( iField = 0; iField < OGR_FD_GetFieldCount(hFDefnIn); iField++ ) {
     OGRFieldDefnH hFieldDefnIn = OGR_FD_GetFieldDefn( hFDefnIn, iField );
     OGRFieldDefnH hFieldDefnOut = OGR_Fld_Create( 
OGR_Fld_GetNameRef(hFieldDefnIn), OFTString );
     OGR_Fld_SetType( hFieldDefnOut, OGR_Fld_GetType(hFieldDefnIn));
     OGR_Fld_SetWidth( hFieldDefnOut, OGR_Fld_GetWidth(hFieldDefnIn));
     OGR_Fld_SetPrecision( hFieldDefnOut, 
OGR_Fld_GetPrecision(hFieldDefnIn));

     if( OGR_L_CreateField( hLayerOut, hFieldDefnOut, TRUE ) != 
OGRERR_NONE ) {
       printf( "Creating %s field failed.\n", 
OGR_Fld_GetNameRef(hFieldDefnIn) );
       exit(1);
     }

     OGR_Fld_Destroy(hFieldDefnOut);
   }

/* I want to append a new field but it is not written to the
    like the above fields are !!!!
*/
   hFldElevUp = OGR_Fld_Create( "ELEV_UP", OFTString );
   OGR_Fld_SetType( hFldElevUp, OFTReal );
   OGR_Fld_SetWidth( hFldElevUp, 8);
   OGR_Fld_SetPrecision( hFldElevUp, 1);
   if( OGR_L_CreateField( hLayerOut, hFldElevUp, TRUE ) != OGRERR_NONE ) {
     printf( "Creating ELEV_UP field failed.\n");
     exit(1);
   }
   OGR_Fld_Destroy( hFldElevUp );

From woodbri at swoodbridge.com  Fri Sep 17 19:47:24 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Sep 17 19:48:55 2010
Subject: [gdal-dev] OGR C API Help needed
In-Reply-To: <4C93FCFA.6090504@swoodbridge.com>
References: <4C93FCFA.6090504@swoodbridge.com>
Message-ID: <4C93FE0C.9050600@swoodbridge.com>

Nevermind, all is good. It helps if you execute the new code and not the 
one in the path!  <sigh>

-Steve

On 9/17/2010 7:42 PM, Stephen Woodbridge wrote:
> Hi all,
>
> I am stumped by this. I am trying to copy a shapefile and append a new
> attribute column to it. The loop below adds all the existing fields, but
> the code following does not add the new field. I have been trying to
> figure this out for hours and I assume it is something really stupid
> that I am missing, but ...
>
> I would appreciate a hint on this.
>
> -Steve
>
> /* this loop works fine and adds all the existing fields */
> for( iField = 0; iField < OGR_FD_GetFieldCount(hFDefnIn); iField++ ) {
> OGRFieldDefnH hFieldDefnIn = OGR_FD_GetFieldDefn( hFDefnIn, iField );
> OGRFieldDefnH hFieldDefnOut = OGR_Fld_Create(
> OGR_Fld_GetNameRef(hFieldDefnIn), OFTString );
> OGR_Fld_SetType( hFieldDefnOut, OGR_Fld_GetType(hFieldDefnIn));
> OGR_Fld_SetWidth( hFieldDefnOut, OGR_Fld_GetWidth(hFieldDefnIn));
> OGR_Fld_SetPrecision( hFieldDefnOut, OGR_Fld_GetPrecision(hFieldDefnIn));
>
> if( OGR_L_CreateField( hLayerOut, hFieldDefnOut, TRUE ) != OGRERR_NONE ) {
> printf( "Creating %s field failed.\n", OGR_Fld_GetNameRef(hFieldDefnIn) );
> exit(1);
> }
>
> OGR_Fld_Destroy(hFieldDefnOut);
> }
>
> /* I want to append a new field but it is not written to the
> like the above fields are !!!!
> */
> hFldElevUp = OGR_Fld_Create( "ELEV_UP", OFTString );
> OGR_Fld_SetType( hFldElevUp, OFTReal );
> OGR_Fld_SetWidth( hFldElevUp, 8);
> OGR_Fld_SetPrecision( hFldElevUp, 1);
> if( OGR_L_CreateField( hLayerOut, hFldElevUp, TRUE ) != OGRERR_NONE ) {
> printf( "Creating ELEV_UP field failed.\n");
> exit(1);
> }
> OGR_Fld_Destroy( hFldElevUp );
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From hobu.inc at gmail.com  Fri Sep 17 21:43:35 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Sep 17 21:43:40 2010
Subject: [gdal-dev] Of errors and their treatment in bindings
In-Reply-To: <4C935B32.8060800@gmail.com>
References: <4C935B32.8060800@gmail.com>
Message-ID: <C6261297-8AE3-41D5-A49A-FD3351D895C1@gmail.com>


On Sep 17, 2010, at 7:12 AM, Ari Jolma wrote:

> Folks,
> 
> I added binding to VSIStatL (my idea is to start using ReadDir from GDAL and I need to know if something is a file or a directory).

Why not use the more natural (to you the Perl programmer) facilities your language provides for determining this?  In my opinion, this adds a lot binding complexity for very little gain.

In Python:

os.path.isdir(mytarget)
os.path.ispath(mytarget)

Why reimplement this in the GDAL bindings?


> 
> That requires, in my mind, a new typemap, which I call RETURN_NONE_TRUE_IS_ERROR as the VSIStatL in port returns 0 on success but it does not call CPLError.
> 
> Similarly we have from earlier IF_FALSE_RETURN_NONE, which is used now only in once case (GCPsToGeoTransform) where GDAL non-zero return means error condition and GDAL does not call CPLError (the docs explain possible causes of error). And we have IF_ERROR_RETURN_NONE. IMHO these should be called RETURN_NONE_FALSE_IS_ERROR and RETURN_NONE.
> 
> Sometimes the GDAL API uses plain int and sometimes CPLErr. We need to tell Swig that it should drop the return value. If int is used, it must be shadowed with typedef int something_else. I renamed the typedef from FALSE_IS_ERR to RETURN_NONE which is hopefully a bit more descriptive.
> 
> I guess if we could trust GDAL to call CPLError always we could simply use one RETURN_NONE typemap and not three.

Unfortunately, it's too late for that :/

I don't disagree with any of the above situational information regarding typemaps and what's necessary to write bindings for VSIStatL.  I just disagree that we need public, calcified, never-to-be-changed-ever-again bindings for a compatibility layer that users can already get from their language's facilities.  With help.  And fewer bugs ;)

Howard


From even.rouault at mines-paris.org  Sat Sep 18 05:52:14 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Sep 18 05:52:18 2010
Subject: [gdal-dev] With Python bindings,
	should geometry objects created by ogr.Geometry() be explicitly
	destroyed?
In-Reply-To: <04b201cb569a$f1c54220$d54fc660$@roberts@duke.edu>
References: <04b201cb569a$f1c54220$d54fc660$@roberts@duke.edu>
Message-ID: <201009181152.14158.even.rouault@mines-paris.org>

Jason,

> I have some Python code that uses OGR geometry objects internally, creating
> them like this:
> 
> 
> 
> point = ogr.Geometry(ogr.wkbPoint)
> 
> 
> 
> Does this code need to explicitly destroy these geometries, like the
> following, to avoid leaks, or can it simply allow them to go out of scope
> and have Python's reference counting and garbage collector clean them up?
> 
> 
> 
> point.Destroy()

There's no reason to call Destroy(), at all. Native object gets destroyed when 
Python object goes out of scope, or when they are assigned to None. So replace 
foo.Destroy() by foo = None if you really want to control when the underlying 
C++ object is destroyed. This is indeed generally only interesting for I/O 
objects, like a GDALDataset or OGRDataSource, when you want to control when 
the file handle is closed.

ds = gdal.GetDriverByName('GTiff').Create('foo.tif', 10, 10, 1)
ds.GetRasterBand(1).Fill(255)
ds = None # Now, foo.tif is closed and I can safely copy it
shutil.copy('foo.tif', 'other.tif')

> 
> 
> 
> Does the situation change if I call feature.SetGeometry(point)? What about
> feature.SetGeometryDirectly(point)?

No, you don't need to call Destroy() either. SetGeometryDirectly() brings a 
bit of subtelty though : it makes the (C++) feature object the owner of the 
(C++) geometry object (whereas SetGeometry() just clones the passed geometry). 
The consequence for Python side is then when feature goes out of scope, C++ 
feature object dies and the C++ geometry object too, so the Python point 
object just referes to a dead C++ object.

So do *NOT* do that :

point = ogr.Geometry(ogr.wkbPoint)
feature = ogr.Feature(layer_defn)
feature.SetGeometryDirectly(point)
feature = None # point becomes implicitely invalid at that point
print point.ExportToWkt() # here you die

The issue is that the bindings here expose something that is probably 
manageable for C++ programmers used to take into account object lifetime, but 
in Python, this can have surprising effect...

> 
> 
> 
> I'm sorry for my ignorance here. I found a nice GDAL tutorial that seems to
> say they *should* be explicitly destroyed in certain circumstances (see
> http://www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_slides2.pdf, page
> 12). But I have not really seen any other examples of this.
> 

Destroy() was perhaps necessary with old-gen bindings, but I'm not even sure 
of that... Perhaps this shouldn't have been exposed at all... But, as 
mentionned in the slides, it is true that there are situations where you 
shouldn't call Destroy() at all.

Do *NOT* do this :

feat = lyr.GetNextFeature()
geom = feat.GetGeometryRef()
geom.Destroy() # Arg! C++ feature still points at the underlying C++ geometry, 
but is is now dead
feat = None # this will destroy the C++ feature, that will try to destroy the 
C++ geometry, but this one is already destroyed --> segfault !

> 
> 
> If you follow gdal-dev, you probably notice that the "to destroy or not to
> destroy" question comes up periodically from Python programmers, as does
> the problem where someone gets a GDALDataset, gets a band, allows the
> GDALDataset to go out of scope, and then expects the band to still work.
> These are areas where the GDAL Python bindings to not work like other
> Python libraries, causing confusion among Python programmers, who
> generally expect reference counting that "just works" and that they only
> need to explicitly close something when some kind of I/O is involved.
> 

Agreed.

I wouldn't say that is a problem of reference counting, but more a problem of 
ownership and lifetime of C++ objects, that are sometimes destroyed when a 
Python object get out of scope, but shouldn't since another Python object 
indirectly still need them to be alive.

Do *NOT* do this :

feat = lyr.GetNextFeature()
geom = feat.GetGeometryRef()
feat = None # This kills the C++ feature, and its C++ geometry
print(geom.ExportToWkt()) # segfault here. The C++ geometry no longer exist

Byt you could do (and this is what the patch in ticket 3592 I mention below 
does under the hood):

feat = lyr.GetNextFeature()
geom = feat.GetGeometryRef()
geom.please_keep_alive_object_after_equal_sign = feat
feat = None # The underlying C++ object is still alive, since geom keeps the 
python feature object alive
print(geom.ExportToWkt())


Similarly, do *NOT* do this :

ds = gdal.Open('foo.tif')
band = ds.GetRasterBand(1)
ds = None
print(band.Checksum())

But you could do :

ds = gdal.Open('foo.tif')
band = ds.GetRasterBand(1)
band.please_keep_alive_object_after_equal_sign = ds
ds = None
print(band.Checksum())


Do *NOT* do this also :

print(gdal.Open('foo.tif').GetRasterBand(1).Checksum())

> 
> 
> It would be really great if there was FAQ that pointed out all of the ways
> that GDAL differs from typical Python libraries. The scenarios I mention
> above seem to be two of the most common ones. Would someone be willing to
> create it? I would but do not feel competent enough at this point.
> 
> 

If you start a wiki page collecting all the info you found in the mailing list 
threads, that would be a beginning...

Obviously, instead of documenting weird behaviour a better approach would be 
to fix the code so it behaves as expected...

There was an attempt I pursued in http://trac.osgeo.org/gdal/ticket/3592 , 
that would solve all the crashes in the above examples, but as you can see in 
the ticket, it raises backward compatibility issues in some cases (including 
the GDAL/OGR python autotest suite)... So the question is a bit like : should 
we inflict pain to existing users (in a few scenarios) to make the life of new 
users easier... ?

But the patch doesn't solve all cases. Unfortunately, there would be still 
ways of causing segfault from Python. You can break some subtle API contracts, 
like adding a new field to a layer when features deriving from this layer 
definition are still active. And it isn't obvious how we could detect such 
situations to prevent them from happening (see 
http://trac.osgeo.org/gdal/ticket/3552 )

Do *NOT* do that :

feature = lyr.GetNextFeature()
field_defn = ogr.FieldDefn("foo", ogr.OFTString)
lyr.CreateField(field_defn) # now, existing features deriving from this layer 
are invalid
feature.DumpReadable() # segfault

> 
> Thanks,
> 
> Jason
From ari.jolma at gmail.com  Sat Sep 18 06:01:51 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat Sep 18 06:01:55 2010
Subject: [gdal-dev] Of errors and their treatment in bindings
In-Reply-To: <C6261297-8AE3-41D5-A49A-FD3351D895C1@gmail.com>
References: <4C935B32.8060800@gmail.com>
	<C6261297-8AE3-41D5-A49A-FD3351D895C1@gmail.com>
Message-ID: <4C948E0F.6010209@gmail.com>

On 09/18/2010 04:43 AM, Howard Butler wrote:
> On Sep 17, 2010, at 7:12 AM, Ari Jolma wrote:
>
>    
>> Folks,
>>
>> I added binding to VSIStatL (my idea is to start using ReadDir from GDAL and I need to know if something is a file or a directory).
>>      
> Why not use the more natural (to you the Perl programmer) facilities your language provides for determining this?  In my opinion, this adds a lot binding complexity for very little gain.
>    

The Windows support in Perl is sadly not very good in this respect 
(readdir for unicode file names). It can be done but using GDAL 
functions seems to me a good idea as they should soon support unicode 
filenames in Windows and also because I'd be feeding those names back to 
GDAL anyway to open the files.


>
>> I guess if we could trust GDAL to call CPLError always we could simply use one RETURN_NONE typemap and not three.
>>      
> Unfortunately, it's too late for that :/
>    

I'm not quite sure I understand why.

> I don't disagree with any of the above situational information regarding typemaps and what's necessary to write bindings for VSIStatL.  I just disagree that we need public, calcified, never-to-be-changed-ever-again bindings for a compatibility layer that users can already get from their language's facilities.  With help.  And fewer bugs ;)
>    

Most other VSI*L functions were in the bindings already. With a comment: 
"It is just for some testing stuff.", however.

I usually have a big trouble understanding what goes on in the bindings 
as they are a sort of meta code. And when things have been named 
confusingly (maybe not confusingly in the beginning but after some 
changes they have become confusing) it just adds to the pain. I guess 
this was the first time I really did understand how this set of bindings 
work - at least I think so.

IMHO README.typemaps seems outdated and not even always used. For example:

%typemap(out) (retStringAndCPLFree*) should be added and
Python uses
out (char **out_ppsz_and_free)
instead of
out (char **CSL)
which is mentioned in the README.typemaps

Cheers,

Ari



> Howard
>
>
>    

From ari.jolma at gmail.com  Sat Sep 18 06:06:59 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat Sep 18 06:07:03 2010
Subject: [gdal-dev] Of errors and their treatment in bindings
In-Reply-To: <C6261297-8AE3-41D5-A49A-FD3351D895C1@gmail.com>
References: <4C935B32.8060800@gmail.com>
	<C6261297-8AE3-41D5-A49A-FD3351D895C1@gmail.com>
Message-ID: <4C948F43.5000500@gmail.com>

On 09/18/2010 04:43 AM, Howard Butler wrote:
> On Sep 17, 2010, at 7:12 AM, Ari Jolma wrote:
>
>    
>> Folks,
>>
>> I added binding to VSIStatL (my idea is to start using ReadDir from GDAL and I need to know if something is a file or a directory).
>>      
> Why not use the more natural (to you the Perl programmer) facilities your language provides for determining this?  In my opinion, this adds a lot binding complexity for very little gain.
>
>    

On more reason, which I note now as I svn updated. There's also a Curl 
filesystem in GDAL with stat, readdir, etc. Thus the GDAL filesystem is 
quite powerful abstraction layer.

Ari

From even.rouault at mines-paris.org  Sat Sep 18 06:49:18 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Sep 18 06:49:20 2010
Subject: [gdal-dev] Of errors and their treatment in bindings
In-Reply-To: <4C948E0F.6010209@gmail.com>
References: <4C935B32.8060800@gmail.com>
	<C6261297-8AE3-41D5-A49A-FD3351D895C1@gmail.com>
	<4C948E0F.6010209@gmail.com>
Message-ID: <201009181249.19005.even.rouault@mines-paris.org>

> 
> IMHO README.typemaps seems outdated and not even always used. For example:
> 
> %typemap(out) (retStringAndCPLFree*) should be added and
> Python uses
> out (char **out_ppsz_and_free)
> instead of
> out (char **CSL)
> which is mentioned in the README.typemaps

My fault, I wasn't even aware that README.typemaps existed... Will update it 
and fix java and python to use out (char **CSL) instead of my custom 
out_ppsz_and_free

> 
> Cheers,
> 
> Ari
> 
> > Howard
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Sat Sep 18 07:13:28 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Sep 18 07:13:29 2010
Subject: [gdal-dev] With Python bindings,
	should geometry objects created by ogr.Geometry() 
	=?utf-8?q?be=09explicitly?= destroyed?
In-Reply-To: <04bd01cb569c$eb651bb0$c22f5310$@roberts@duke.edu>
References: <04b201cb569a$f1c54220$d54fc660$%roberts@duke.edu>
	<04bd01cb569c$eb651bb0$c22f5310$@roberts@duke.edu>
Message-ID: <201009181313.28321.even.rouault@mines-paris.org>

Le vendredi 17 septembre 2010 21:17:06, Jason Roberts a ?crit :
> (Just a side note: Another way that the GDAL Python bindings differ from
> typical Python libraries is the need to call gdal.UseExceptions() to have
> exceptions be raised when errors occur,

Backward compatibility issue. Some existing code doesn't expect exceptions to 
be thrown.

> and the need to explicitly call
> gdal.ErrorReset() in the exception handler, or the same error will keep
> occurring on subsequent GDAL API calls.)

Was indeed a bug known as http://trac.osgeo.org/gdal/ticket/3077. I've just 
fixed it.
From martin at bier-mail.de  Sat Sep 18 10:53:06 2010
From: martin at bier-mail.de (Matin80)
Date: Sat Sep 18 10:53:08 2010
Subject: [gdal-dev] access multiple files with VRT
Message-ID: <1284821586432-5545929.post@n2.nabble.com>


Dear all,

I have plenty of binary files which I access through a VRT file. This works
fine with the following lines:

<VRTDataset rasterXSize="1440" rasterYSize="400"> 
  <Geotransform>0,0.25,0,50, 0,-0.25</Geotransform> 
  <SRS>WGS84</SRS> 
  <VRTRasterBand dataType="Float32" band="1" subClass="VRTRawRasterBand"> 
    <SourceFilename
relativeToVRT="1">3B42_daily.2009.01.01.6.bin</SourceFilename> 
    <ByteOrder>MSB</ByteOrder> 
    <ImageOffset>0</ImageOffset> 
    <PixelOffset>4</PixelOffset> 
    <LineOffset>5760</LineOffset> 
  </VRTRasterBand>
</VRTDataset>  

now my question: is it possible to access all ".bin" files in the same
directory with a single VRT without having to use the same block again and
again for every single file?

greetings,
Martin


-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/access-multiple-files-with-VRT-tp5545929p5545929.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sat Sep 18 11:31:44 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Sep 18 11:31:44 2010
Subject: [gdal-dev] access multiple files with VRT
In-Reply-To: <1284821586432-5545929.post@n2.nabble.com>
References: <1284821586432-5545929.post@n2.nabble.com>
Message-ID: <201009181731.44181.even.rouault@mines-paris.org>

Martin,

I'm not sure how this would work. If you need to access each .bin file, you 
need a .vrt for each of them...

Le samedi 18 septembre 2010 16:53:06, Matin80 a ?crit :
> Dear all,
> 
> I have plenty of binary files which I access through a VRT file. This works
> fine with the following lines:
> 
> <VRTDataset rasterXSize="1440" rasterYSize="400">
>   <Geotransform>0,0.25,0,50, 0,-0.25</Geotransform>
>   <SRS>WGS84</SRS>
>   <VRTRasterBand dataType="Float32" band="1" subClass="VRTRawRasterBand">
>     <SourceFilename
> relativeToVRT="1">3B42_daily.2009.01.01.6.bin</SourceFilename>
>     <ByteOrder>MSB</ByteOrder>
>     <ImageOffset>0</ImageOffset>
>     <PixelOffset>4</PixelOffset>
>     <LineOffset>5760</LineOffset>
>   </VRTRasterBand>
> </VRTDataset>
> 
> now my question: is it possible to access all ".bin" files in the same
> directory with a single VRT without having to use the same block again and
> again for every single file?
> 
> greetings,
> Martin
From szekerest at gmail.com  Sat Sep 18 12:19:32 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Sep 18 12:19:33 2010
Subject: [gdal-dev] Backward incompatible changes in the OGR style string
	format (r19724)
Message-ID: <AANLkTikXDok7pGG_sKBq2HqwW6XYgwhv69w7WYJ2x68U@mail.gmail.com>

Hi All,

There have been a backward incompatible change in
r19724<http://trac.osgeo.org/gdal/changeset/19724>related to the OGR
style string format. According to this change the
separator in the feature style id has been changed from '.' to ','
Unfortunately such kind of changes may cause existing applications to work
incorrectly and would also need to be fixed. For instance this change
affects the mapserver function msOGRGetSymbolId in
mapogr.cpp<http://trac.osgeo.org/mapserver/browser/trunk/mapserver/mapogr.cpp>as
well. So as to fix this issue in mapserver, we would probably require
to
keep the original code simultaneously, depending on the gdal version.

I'd be curious to know whether we have any compelling reason to apply these
modifications, or we just wanted to follow the feature style
specification<http://www.gdal.org/ogr/ogr_feature_style.html>with
these changes? In the latter case I would personally in favour of
reverting these changes in gdal and handle this issue by fixing the feature
style documentation to follow the original syntax.

Any ideas?


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100918/961807a7/attachment.html
From mail2vajram at gmail.com  Mon Sep 20 02:53:31 2010
From: mail2vajram at gmail.com (mail2vajram)
Date: Mon Sep 20 02:53:34 2010
Subject: [gdal-dev] how to prepare set up file......
Message-ID: <1284965611436-5549304.post@n2.nabble.com>


i have used the gdal libraries through fwtools in my .NET application, and
now i am giong to prepare the setup of my applaction. But in the code i set
the environmental variable from fwtools path. That means should i have to
install fwtools in the client system, if so please tell me the way to
prepare one set up file which will install both fwtools and my application
or is there any way.......

Thank you...
srinivas 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/how-to-prepare-set-up-file-tp5549304p5549304.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mail2vajram at gmail.com  Mon Sep 20 02:54:33 2010
From: mail2vajram at gmail.com (mail2vajram)
Date: Mon Sep 20 02:54:35 2010
Subject: [gdal-dev] how to prepare set up file......
Message-ID: <1284965673517-5549306.post@n2.nabble.com>


i have used the gdal libraries through fwtools in my .NET application, and
now i am giong to prepare the setup of my applaction. But in the code i set
the environmental variable from fwtools path. That means should i have to
install fwtools in the client system, if so please tell me the way to
prepare one set up file which will install both fwtools and my application
or is there any way.......

Thank you...
srinivas 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/how-to-prepare-set-up-file-tp5549306p5549306.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From schut at sarvision.nl  Mon Sep 20 04:25:54 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Mon Sep 20 04:26:00 2010
Subject: [gdal-dev] gdal_calc.py
In-Reply-To: <20100917173848.18102.qmail@s466.sureserver.com>
References: <20100917173848.18102.qmail@s466.sureserver.com>
Message-ID: <4C971A92.1020706@sarvision.nl>

  Just fyi: I've been using my own brewn version of a band-math like 
command line gdal python script for some years now (have sent it to the 
gdal list once, like a year ago or something), you might be interested 
to take a look at the source and compare approaches. I've attached the 
script with this email. Afaic it's public domain, do with it what you 
want :-)

Cheers,
Vincent.

On 09/17/2010 07:38 PM, Ivan Lucena wrote:
> Hi Chris,
>
> That sounds good.
>
> Is that by any chance based on this idea here: [http://trac.osgeo.org/gdal/wiki/SummerOfCode]?
>
> Regards,
>
> Ivan
>
>
>>   -------Original Message-------
>>   From: Chris Yesson<Chris.Yesson@ioz.ac.uk>
>>   To: gdal-dev@lists.osgeo.org
>>   Subject: [gdal-dev] gdal_calc.py
>>   Sent: Sep 17 '10 09:29
>>
>>   Hi all,
>>
>>
>>   I have been playing around with a python/gdalnumeric-based raster
>>   calculator for a while now (http://static.zsl.org/files/gdal-calc-1218.py).
>>
>>
>>   I thought it was time to try to share this properly via GDAL.
>>
>>
>>   Could this go on the sample python scripts directory?
>>
>>   Could I get advice on what I would need to do to get it into the main
>>   scripts?
>>
>>
>>   Many thanks
>>
>>
>>   - Chris
>>
>>
>>   _Dr Chris Yesson_
>>   _Postdoctoral Researcher_
>>   _Institute__ of Zoology_
>>   _Zoological Society of London_
>>   _Regent's Park_
>>   _London__ NW1 4RY_
>>   _020 7449 6267_
>>   [LINK: http://www.zsl.org/chrisyesson/] _http://www.zsl.org/chrisyesson/_
>>   [LINK: http://eu-fp7-coralfish.net/] _http://eu-fp7-coralfish.net/_
>>
>>
>>   The Zoological Society of London is incorporated by Royal Charter
>>   Principal Office England. Company Number RC000749
>>   Registered address:
>>   Regent's Park, London, England NW1 4RY
>>   Registered Charity in England and Wales no. 208728
>>
>>
>>   _________________________________________________________________________
>>   This e-mail has been sent in confidence to the named addressee(s).
>>   If you are not the intended recipient, you must not disclose or distribute
>>   it in any form, and you are asked to contact the sender immediately.
>>   Views or opinions expressed in this communication may not be those
>>   of The Zoological Society of London and, therefore, The Zoological
>>   Society of London does not accept legal responsibility for the contents
>>   of this message. The recipient(s) must be aware that e-mail is not a
>>   secure communication medium and that the contents of this mail may
>>   have been altered by a third party in transit.
>>   If you have any issues regarding this mail please contact:
>>   [LINK: mailto:administrator@zsl.org] administrator@zsl.org.
>>   ___________________________________________________________________________
>>
>>
>>   This message has been scanned for viruses by [LINK:
>>   http://www.mailcontrol.com/] MailControl, a service from [LINK:
>>   http://www.blackspider.com/] BlackSpider Technologies.
>>   --------------------
>>   _______________________________________________
>>   gdal-dev mailing list
>>   [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>>   [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>>   http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal_calc.py
Type: text/x-python
Size: 15657 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100920/b684483f/gdal_calc.py
From martin at bier-mail.de  Mon Sep 20 04:37:08 2010
From: martin at bier-mail.de (Matin80)
Date: Mon Sep 20 04:37:10 2010
Subject: [gdal-dev] Re: access multiple files with VRT
In-Reply-To: <201009181731.44181.even.rouault@mines-paris.org>
References: <1284821586432-5545929.post@n2.nabble.com>
	<201009181731.44181.even.rouault@mines-paris.org>
Message-ID: <1284971828853-5549557.post@n2.nabble.com>


hm, do you think it's possible to create a batch, which looks at all the .bin
files in the directory and automatically creates a VRT for all of them (the
header is always the same)?
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/access-multiple-files-with-VRT-tp5545929p5549557.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ivan.lucena at pmldnet.com  Mon Sep 20 06:57:08 2010
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Mon Sep 20 07:00:02 2010
Subject: [gdal-dev] gdal_calc.py
In-Reply-To: <4C971A92.1020706@sarvision.nl>
References: <20100917173848.18102.qmail@s466.sureserver.com>
	<4C971A92.1020706@sarvision.nl>
Message-ID: <4C973E04.9080302@pmldnet.com>

Hi Vicent,

Sorry if I called you Chris.

I think that the gdal_calc.py implementation looks pretty good and I would vote to include it as 
official GDAL command line tool. I could upload it to <trunk>/swig/python/scripts/ if eveybody agrees.

Regards,

Ivan

Vincent Schut wrote:
>  Just fyi: I've been using my own brewn version of a band-math like 
> command line gdal python script for some years now (have sent it to the 
> gdal list once, like a year ago or something), you might be interested 
> to take a look at the source and compare approaches. I've attached the 
> script with this email. Afaic it's public domain, do with it what you 
> want :-)
> 
> Cheers,
> Vincent.
> 
> On 09/17/2010 07:38 PM, Ivan Lucena wrote:
>> Hi Chris,
>>
>> That sounds good.
>>
>> Is that by any chance based on this idea here: 
>> [http://trac.osgeo.org/gdal/wiki/SummerOfCode]?
>>
>> Regards,
>>
>> Ivan
>>
>>
>>>   -------Original Message-------
>>>   From: Chris Yesson<Chris.Yesson@ioz.ac.uk>
>>>   To: gdal-dev@lists.osgeo.org
>>>   Subject: [gdal-dev] gdal_calc.py
>>>   Sent: Sep 17 '10 09:29
>>>
>>>   Hi all,
>>>
>>>
>>>   I have been playing around with a python/gdalnumeric-based raster
>>>   calculator for a while now 
>>> (http://static.zsl.org/files/gdal-calc-1218.py).
>>>
>>>
>>>   I thought it was time to try to share this properly via GDAL.
>>>
>>>
>>>   Could this go on the sample python scripts directory?
>>>
>>>   Could I get advice on what I would need to do to get it into the main
>>>   scripts?
>>>
>>>
>>>   Many thanks
>>>
>>>
>>>   - Chris
>>>
>>>
>>>   _Dr Chris Yesson_
>>>   _Postdoctoral Researcher_
>>>   _Institute__ of Zoology_
>>>   _Zoological Society of London_
>>>   _Regent's Park_
>>>   _London__ NW1 4RY_
>>>   _020 7449 6267_
>>>   [LINK: http://www.zsl.org/chrisyesson/] 
>>> _http://www.zsl.org/chrisyesson/_
>>>   [LINK: http://eu-fp7-coralfish.net/] _http://eu-fp7-coralfish.net/_
>>>
>>>
>>>   The Zoological Society of London is incorporated by Royal Charter
>>>   Principal Office England. Company Number RC000749
>>>   Registered address:
>>>   Regent's Park, London, England NW1 4RY
>>>   Registered Charity in England and Wales no. 208728
>>>
>>>
>>>   
>>> _________________________________________________________________________ 
>>>
>>>   This e-mail has been sent in confidence to the named addressee(s).
>>>   If you are not the intended recipient, you must not disclose or 
>>> distribute
>>>   it in any form, and you are asked to contact the sender immediately.
>>>   Views or opinions expressed in this communication may not be those
>>>   of The Zoological Society of London and, therefore, The Zoological
>>>   Society of London does not accept legal responsibility for the 
>>> contents
>>>   of this message. The recipient(s) must be aware that e-mail is not a
>>>   secure communication medium and that the contents of this mail may
>>>   have been altered by a third party in transit.
>>>   If you have any issues regarding this mail please contact:
>>>   [LINK: mailto:administrator@zsl.org] administrator@zsl.org.
>>>   
>>> ___________________________________________________________________________ 
>>>
>>>
>>>
>>>   This message has been scanned for viruses by [LINK:
>>>   http://www.mailcontrol.com/] MailControl, a service from [LINK:
>>>   http://www.blackspider.com/] BlackSpider Technologies.
>>>   --------------------
>>>   _______________________________________________
>>>   gdal-dev mailing list
>>>   [LINK: compose.php?to=gdal-dev@lists.osgeo.org] 
>>> gdal-dev@lists.osgeo.org
>>>   [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>>>   http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From schut at sarvision.nl  Mon Sep 20 07:25:52 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Mon Sep 20 07:25:56 2010
Subject: [gdal-dev] gdal_calc.py
In-Reply-To: <4C973E04.9080302@pmldnet.com>
References: <20100917173848.18102.qmail@s466.sureserver.com>
	<4C971A92.1020706@sarvision.nl> <4C973E04.9080302@pmldnet.com>
Message-ID: <4C9744C0.1080307@sarvision.nl>

  On 09/20/2010 12:57 PM, Lucena, Ivan wrote:
> Hi Vicent,
>
> Sorry if I called you Chris.
You didn't. Chris and I just both happen to have coded our own gdal_calc 
script. They are different, each might have its pro's and con's. Sorry 
if I created some confusion... I just thought it might be interesting to 
have both implementations.
>
> I think that the gdal_calc.py implementation looks pretty good and I 
> would vote to include it as official GDAL command line tool. I could 
> upload it to <trunk>/swig/python/scripts/ if eveybody agrees.
Feel free to upload it (can't speak for Chris, of course), and to 
use/modify to your needs. However, putting it in some examples folder 
might be more appropriate?, as I don't intend to do lots of maintenance 
on this script. I just use it, and if I encounter a bug or need more 
functionality, I code it. It is the result of some years of evolution, 
however I personally don't feel the code is 'production quality'...

Regards,
Vincent.
>
> Regards,
>
> Ivan
>
> Vincent Schut wrote:
>>  Just fyi: I've been using my own brewn version of a band-math like 
>> command line gdal python script for some years now (have sent it to 
>> the gdal list once, like a year ago or something), you might be 
>> interested to take a look at the source and compare approaches. I've 
>> attached the script with this email. Afaic it's public domain, do 
>> with it what you want :-)
>>
>> Cheers,
>> Vincent.
>>
>> On 09/17/2010 07:38 PM, Ivan Lucena wrote:
>>> Hi Chris,
>>>
>>> That sounds good.
>>>
>>> Is that by any chance based on this idea here: 
>>> [http://trac.osgeo.org/gdal/wiki/SummerOfCode]?
>>>
>>> Regards,
>>>
>>> Ivan
>>>
>>>
>>>>   -------Original Message-------
>>>>   From: Chris Yesson<Chris.Yesson@ioz.ac.uk>
>>>>   To: gdal-dev@lists.osgeo.org
>>>>   Subject: [gdal-dev] gdal_calc.py
>>>>   Sent: Sep 17 '10 09:29
>>>>
>>>>   Hi all,
>>>>
>>>>
>>>>   I have been playing around with a python/gdalnumeric-based raster
>>>>   calculator for a while now 
>>>> (http://static.zsl.org/files/gdal-calc-1218.py).
>>>>
>>>>
>>>>   I thought it was time to try to share this properly via GDAL.
>>>>
>>>>
>>>>   Could this go on the sample python scripts directory?
>>>>
>>>>   Could I get advice on what I would need to do to get it into the 
>>>> main
>>>>   scripts?
>>>>
>>>>
>>>>   Many thanks
>>>>
>>>>
>>>>   - Chris
>>>>
>>>>
>>>>   _Dr Chris Yesson_
>>>>   _Postdoctoral Researcher_
>>>>   _Institute__ of Zoology_
>>>>   _Zoological Society of London_
>>>>   _Regent's Park_
>>>>   _London__ NW1 4RY_
>>>>   _020 7449 6267_
>>>>   [LINK: http://www.zsl.org/chrisyesson/] 
>>>> _http://www.zsl.org/chrisyesson/_
>>>>   [LINK: http://eu-fp7-coralfish.net/] _http://eu-fp7-coralfish.net/_
>>>>
>>>>
>>>>   The Zoological Society of London is incorporated by Royal Charter
>>>>   Principal Office England. Company Number RC000749
>>>>   Registered address:
>>>>   Regent's Park, London, England NW1 4RY
>>>>   Registered Charity in England and Wales no. 208728
>>>>
>>>>
>>>>   
>>>> _________________________________________________________________________ 
>>>>
>>>>   This e-mail has been sent in confidence to the named addressee(s).
>>>>   If you are not the intended recipient, you must not disclose or 
>>>> distribute
>>>>   it in any form, and you are asked to contact the sender immediately.
>>>>   Views or opinions expressed in this communication may not be those
>>>>   of The Zoological Society of London and, therefore, The Zoological
>>>>   Society of London does not accept legal responsibility for the 
>>>> contents
>>>>   of this message. The recipient(s) must be aware that e-mail is not a
>>>>   secure communication medium and that the contents of this mail may
>>>>   have been altered by a third party in transit.
>>>>   If you have any issues regarding this mail please contact:
>>>>   [LINK: mailto:administrator@zsl.org] administrator@zsl.org.
>>>>   
>>>> ___________________________________________________________________________ 
>>>>
>>>>
>>>>
>>>>   This message has been scanned for viruses by [LINK:
>>>>   http://www.mailcontrol.com/] MailControl, a service from [LINK:
>>>>   http://www.blackspider.com/] BlackSpider Technologies.
>>>>   --------------------
>>>>   _______________________________________________
>>>>   gdal-dev mailing list
>>>>   [LINK: compose.php?to=gdal-dev@lists.osgeo.org] 
>>>> gdal-dev@lists.osgeo.org
>>>>   [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>>>>   http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From peifer at gmx.eu  Mon Sep 20 07:53:18 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Mon Sep 20 07:54:24 2010
Subject: [gdal-dev] Re: access multiple files with VRT
In-Reply-To: <1284971828853-5549557.post@n2.nabble.com>
References: <1284821586432-5545929.post@n2.nabble.com>	<201009181731.44181.even.rouault@mines-paris.org>
	<1284971828853-5549557.post@n2.nabble.com>
Message-ID: <4C974B2E.4010100@gmx.eu>

On 20/09/2010 10:37, Matin80 wrote:
> hm, do you think it's possible to create a batch, which looks at all the .bin
> files in the directory and automatically creates a VRT for all of them (the
> header is always the same)?

You could try this (in bash or similar):

$ for f in *.bin ; do gdal_translate -of vrt $f ${f%bin}vrt ; done

Hermann
From jason.roberts at duke.edu  Mon Sep 20 12:29:26 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Sep 20 12:29:31 2010
Subject: [gdal-dev] With Python bindings,
	should geometry objects created by ogr.Geometry() be explicitly
	destroyed?
In-Reply-To: <201009181152.14158.even.rouault@mines-paris.org>
References: <04b201cb569a$f1c54220$d54fc660$%roberts@duke.edu>
	<201009181152.14158.even.rouault@mines-paris.org>
Message-ID: <000a01cb58e0$fe757420$fb605c60$@roberts@duke.edu>

Even,

Thank you very much for your comments. Based on them, I started a new "Python Gotchas" page here http://trac.osgeo.org/gdal/wiki/PythonGotchas, referenced from http://trac.osgeo.org/gdal/wiki/GdalOgrInPython. Please review it to make sure I got everything right.

Best regards,

Jason

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Saturday, September 18, 2010 5:52 AM
To: gdal-dev@lists.osgeo.org
Cc: Jason Roberts
Subject: Re: [gdal-dev] With Python bindings, should geometry objects created by ogr.Geometry() be explicitly destroyed?

Jason,

> I have some Python code that uses OGR geometry objects internally, creating
> them like this:
> 
> 
> 
> point = ogr.Geometry(ogr.wkbPoint)
> 
> 
> 
> Does this code need to explicitly destroy these geometries, like the
> following, to avoid leaks, or can it simply allow them to go out of scope
> and have Python's reference counting and garbage collector clean them up?
> 
> 
> 
> point.Destroy()

There's no reason to call Destroy(), at all. Native object gets destroyed when 
Python object goes out of scope, or when they are assigned to None. So replace 
foo.Destroy() by foo = None if you really want to control when the underlying 
C++ object is destroyed. This is indeed generally only interesting for I/O 
objects, like a GDALDataset or OGRDataSource, when you want to control when 
the file handle is closed.

ds = gdal.GetDriverByName('GTiff').Create('foo.tif', 10, 10, 1)
ds.GetRasterBand(1).Fill(255)
ds = None # Now, foo.tif is closed and I can safely copy it
shutil.copy('foo.tif', 'other.tif')

> 
> 
> 
> Does the situation change if I call feature.SetGeometry(point)? What about
> feature.SetGeometryDirectly(point)?

No, you don't need to call Destroy() either. SetGeometryDirectly() brings a 
bit of subtelty though : it makes the (C++) feature object the owner of the 
(C++) geometry object (whereas SetGeometry() just clones the passed geometry). 
The consequence for Python side is then when feature goes out of scope, C++ 
feature object dies and the C++ geometry object too, so the Python point 
object just referes to a dead C++ object.

So do *NOT* do that :

point = ogr.Geometry(ogr.wkbPoint)
feature = ogr.Feature(layer_defn)
feature.SetGeometryDirectly(point)
feature = None # point becomes implicitely invalid at that point
print point.ExportToWkt() # here you die

The issue is that the bindings here expose something that is probably 
manageable for C++ programmers used to take into account object lifetime, but 
in Python, this can have surprising effect...

> 
> 
> 
> I'm sorry for my ignorance here. I found a nice GDAL tutorial that seems to
> say they *should* be explicitly destroyed in certain circumstances (see
> http://www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_slides2.pdf, page
> 12). But I have not really seen any other examples of this.
> 

Destroy() was perhaps necessary with old-gen bindings, but I'm not even sure 
of that... Perhaps this shouldn't have been exposed at all... But, as 
mentionned in the slides, it is true that there are situations where you 
shouldn't call Destroy() at all.

Do *NOT* do this :

feat = lyr.GetNextFeature()
geom = feat.GetGeometryRef()
geom.Destroy() # Arg! C++ feature still points at the underlying C++ geometry, 
but is is now dead
feat = None # this will destroy the C++ feature, that will try to destroy the 
C++ geometry, but this one is already destroyed --> segfault !

> 
> 
> If you follow gdal-dev, you probably notice that the "to destroy or not to
> destroy" question comes up periodically from Python programmers, as does
> the problem where someone gets a GDALDataset, gets a band, allows the
> GDALDataset to go out of scope, and then expects the band to still work.
> These are areas where the GDAL Python bindings to not work like other
> Python libraries, causing confusion among Python programmers, who
> generally expect reference counting that "just works" and that they only
> need to explicitly close something when some kind of I/O is involved.
> 

Agreed.

I wouldn't say that is a problem of reference counting, but more a problem of 
ownership and lifetime of C++ objects, that are sometimes destroyed when a 
Python object get out of scope, but shouldn't since another Python object 
indirectly still need them to be alive.

Do *NOT* do this :

feat = lyr.GetNextFeature()
geom = feat.GetGeometryRef()
feat = None # This kills the C++ feature, and its C++ geometry
print(geom.ExportToWkt()) # segfault here. The C++ geometry no longer exist

Byt you could do (and this is what the patch in ticket 3592 I mention below 
does under the hood):

feat = lyr.GetNextFeature()
geom = feat.GetGeometryRef()
geom.please_keep_alive_object_after_equal_sign = feat
feat = None # The underlying C++ object is still alive, since geom keeps the 
python feature object alive
print(geom.ExportToWkt())


Similarly, do *NOT* do this :

ds = gdal.Open('foo.tif')
band = ds.GetRasterBand(1)
ds = None
print(band.Checksum())

But you could do :

ds = gdal.Open('foo.tif')
band = ds.GetRasterBand(1)
band.please_keep_alive_object_after_equal_sign = ds
ds = None
print(band.Checksum())


Do *NOT* do this also :

print(gdal.Open('foo.tif').GetRasterBand(1).Checksum())

> 
> 
> It would be really great if there was FAQ that pointed out all of the ways
> that GDAL differs from typical Python libraries. The scenarios I mention
> above seem to be two of the most common ones. Would someone be willing to
> create it? I would but do not feel competent enough at this point.
> 
> 

If you start a wiki page collecting all the info you found in the mailing list 
threads, that would be a beginning...

Obviously, instead of documenting weird behaviour a better approach would be 
to fix the code so it behaves as expected...

There was an attempt I pursued in http://trac.osgeo.org/gdal/ticket/3592 , 
that would solve all the crashes in the above examples, but as you can see in 
the ticket, it raises backward compatibility issues in some cases (including 
the GDAL/OGR python autotest suite)... So the question is a bit like : should 
we inflict pain to existing users (in a few scenarios) to make the life of new 
users easier... ?

But the patch doesn't solve all cases. Unfortunately, there would be still 
ways of causing segfault from Python. You can break some subtle API contracts, 
like adding a new field to a layer when features deriving from this layer 
definition are still active. And it isn't obvious how we could detect such 
situations to prevent them from happening (see 
http://trac.osgeo.org/gdal/ticket/3552 )

Do *NOT* do that :

feature = lyr.GetNextFeature()
field_defn = ogr.FieldDefn("foo", ogr.OFTString)
lyr.CreateField(field_defn) # now, existing features deriving from this layer 
are invalid
feature.DumpReadable() # segfault

> 
> Thanks,
> 
> Jason

From pcorti at gmail.com  Mon Sep 20 12:55:30 2010
From: pcorti at gmail.com (Paolo Corti)
Date: Mon Sep 20 12:55:52 2010
Subject: [gdal-dev] With Python bindings, should geometry objects created
	by ogr.Geometry() be explicitly destroyed?
In-Reply-To: <-6510942208422008965@unknownmsgid>
References: <04b201cb569a$f1c54220$d54fc660$%roberts@duke.edu>
	<201009181152.14158.even.rouault@mines-paris.org>
	<-6510942208422008965@unknownmsgid>
Message-ID: <AANLkTikc_NYec=ZVBhOJaftBeoOuNpLGrH43pBRfmeye@mail.gmail.com>

On Mon, Sep 20, 2010 at 6:29 PM, Jason Roberts <jason.roberts@duke.edu> wrote:
> Even,
>
> Thank you very much for your comments. Based on them, I started a new "Python Gotchas" page here http://trac.osgeo.org/gdal/wiki/PythonGotchas, referenced from http://trac.osgeo.org/gdal/wiki/GdalOgrInPython. Please review it to make sure I got everything right.
>
> Best regards,
>
> Jason
>

Jason (and Even)
Thanks a lot!
This is really an excellent write up, I think it is a very good
introduction for Python developers that need to use the GDAL Python
bindings.
Personally I had many difficulties when I started using them, so I
think this is a great informative resource.
P

-- 
Paolo Corti
GIS specialist and web developer
web: http://www.paolocorti.net
twitter: @paolo_corti
From Chris.Barker at noaa.gov  Mon Sep 20 13:33:39 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Mon Sep 20 13:33:42 2010
Subject: [gdal-dev] can't import osgeo or gdal in python
In-Reply-To: <DCB4DA54-9676-453E-900B-50D7CDA899BE@forestinformatics.com>
References: <2768F3C4-CBD6-492D-8DE8-2BC84A641DDE@forestinformatics.com>
	<4C93B44E.9040003@noaa.gov>
	<DCB4DA54-9676-453E-900B-50D7CDA899BE@forestinformatics.com>
Message-ID: <4C979AF3.6040603@noaa.gov>

Jeff Hamann wrote:
> Chris, 
> 
> Thanks for responding to my post. 

re-including the gdal list -- I suspect you didn't mean to reply only to me.

> I'm not using the pre-built frameworks as I'm trying to construct a 
> stack that can be "easily" built, installed, and replicated on Linux, 
> FreeBSD (my fav), windows (not so much) and OSX.

In that case, I'd forget about the framework build -- you might as well 
keep it as similar to the other *nix's

If you're not trying to do frameworks, and you don't need to 
re-distribute to other architectures or OS-X versions, it should be a 
pretty straightforward build.

One issue to look for: there are a lot of python versions available for 
the Mac: Apple's, the python.org one, fink, macports, build-your-own, ...

so make sure you know what version you are using, and that you are doing 
everything with that same version.


>>>  When I try to "run" (again newbie
>>> talking here, so be patient), a python script and import gdal:

>>> /Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so
>>>  Expected in: flat namespace

This is something I know next to nothign abuot, but I know there is 
something in OS-X with things being build with either "flat" or "nested" 
namespaces -- perhaps those have gotten confused with your build? Did 
you build your own Python?

Not much, sorry.

-Chris





-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From szekerest at gmail.com  Mon Sep 20 13:42:42 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Sep 20 13:42:44 2010
Subject: [gdal-dev] how to prepare set up file......
In-Reply-To: <1284965673517-5549306.post@n2.nabble.com>
References: <1284965673517-5549306.post@n2.nabble.com>
Message-ID: <AANLkTi=CDEaV3ho_BvOFDeLBarGegD0CrtC=x_OcoM4D@mail.gmail.com>

If you install all the required dll-s and gdal support files along with your
executable, you might not require to install fwtools as a prerequisite.

Best regards,

Tamas



2010/9/20 mail2vajram <mail2vajram@gmail.com>

>
> i have used the gdal libraries through fwtools in my .NET application, and
> now i am giong to prepare the setup of my applaction. But in the code i set
> the environmental variable from fwtools path. That means should i have to
> install fwtools in the client system, if so please tell me the way to
> prepare one set up file which will install both fwtools and my application
> or is there any way.......
>
> Thank you...
> srinivas
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/how-to-prepare-set-up-file-tp5549306p5549306.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100920/9ee96b03/attachment.html
From Martin.Sommer at cassidian.com  Mon Sep 20 14:10:52 2010
From: Martin.Sommer at cassidian.com (Sommer, Martin)
Date: Mon Sep 20 14:11:58 2010
Subject: [gdal-dev] C# SWIG & VMAP/OGDI
Message-ID: <809C01ADEDDDFA4EBA028B5A35A10E0A0229B911@deimsg41.de.net.world>

Hi all,

is there a way to read VMAP data with the SWIG libs?
My request looks like: Ogr.Open("gltp:/vrf/C:/vmap/EURNASIA/LIB_xxx",
0);

Resulting datasource is null. Any hints?

Console command with ogr2ogr.exe works fine, also access to other
ressources under C#.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100920/a01b9a13/attachment.html
From even.rouault at mines-paris.org  Mon Sep 20 14:12:29 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Sep 20 14:12:22 2010
Subject: [gdal-dev] With Python bindings,
	should geometry objects created by ogr.Geometry() be explicitly
	destroyed?
In-Reply-To: <000a01cb58e0$fe757420$fb605c60$@roberts@duke.edu>
References: <04b201cb569a$f1c54220$d54fc660$%roberts@duke.edu>
	<201009181152.14158.even.rouault@mines-paris.org>
	<000a01cb58e0$fe757420$fb605c60$@roberts@duke.edu>
Message-ID: <201009202012.29818.even.rouault@mines-paris.org>

Jason,

thanks for the effort ! I didn't find any obvious errors and it will likely be 
very valuable to newcomers !

I just made a few changes in the way of expressing things. I guess some of the 
unpleasant effects you can observe are more likely side effects of the 
implementation and not really *design* decisions. That might be fixed/changed 
in the future, but it will be weighted against backward compatibility.

The part where I'm not sure if about the Numpy ABI problems. I wasn't very 
aware of problems related to it. From what I've seen in the code, it looks 
like that the python bindings only use the C API/ABI of Numpy. But they indeed 
access numpy structures (struct PyArrayObject namely), so if those structures 
change between numpy versions, you're likely to have troubles. I don't believe 
it is related to the fact that the GDAL python bindings are in C or C++ : the 
swig generated files are indeed C++, but that's unrelated to the numpy ABI 
issue, IMHO. However, I haven't changed anything in this section as I'm not 
100% sure of my analysis.

Best regards,

Even

Le lundi 20 septembre 2010 18:29:26, Jason Roberts a ?crit :
> Even,
> 
> Thank you very much for your comments. Based on them, I started a new
> "Python Gotchas" page here http://trac.osgeo.org/gdal/wiki/PythonGotchas,
> referenced from http://trac.osgeo.org/gdal/wiki/GdalOgrInPython. Please
> review it to make sure I got everything right.
> 
> Best regards,
> 
> Jason
> 
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Saturday, September 18, 2010 5:52 AM
> To: gdal-dev@lists.osgeo.org
> Cc: Jason Roberts
> Subject: Re: [gdal-dev] With Python bindings, should geometry objects
> created by ogr.Geometry() be explicitly destroyed?
> 
> Jason,
> 
> > I have some Python code that uses OGR geometry objects internally,
> > creating them like this:
> > 
> > 
> > 
> > point = ogr.Geometry(ogr.wkbPoint)
> > 
> > 
> > 
> > Does this code need to explicitly destroy these geometries, like the
> > following, to avoid leaks, or can it simply allow them to go out of scope
> > and have Python's reference counting and garbage collector clean them up?
> > 
> > 
> > 
> > point.Destroy()
> 
> There's no reason to call Destroy(), at all. Native object gets destroyed
> when Python object goes out of scope, or when they are assigned to None.
> So replace foo.Destroy() by foo = None if you really want to control when
> the underlying C++ object is destroyed. This is indeed generally only
> interesting for I/O objects, like a GDALDataset or OGRDataSource, when you
> want to control when the file handle is closed.
> 
> ds = gdal.GetDriverByName('GTiff').Create('foo.tif', 10, 10, 1)
> ds.GetRasterBand(1).Fill(255)
> ds = None # Now, foo.tif is closed and I can safely copy it
> shutil.copy('foo.tif', 'other.tif')
> 
> > Does the situation change if I call feature.SetGeometry(point)? What
> > about feature.SetGeometryDirectly(point)?
> 
> No, you don't need to call Destroy() either. SetGeometryDirectly() brings a
> bit of subtelty though : it makes the (C++) feature object the owner of the
> (C++) geometry object (whereas SetGeometry() just clones the passed
> geometry). The consequence for Python side is then when feature goes out
> of scope, C++ feature object dies and the C++ geometry object too, so the
> Python point object just referes to a dead C++ object.
> 
> So do *NOT* do that :
> 
> point = ogr.Geometry(ogr.wkbPoint)
> feature = ogr.Feature(layer_defn)
> feature.SetGeometryDirectly(point)
> feature = None # point becomes implicitely invalid at that point
> print point.ExportToWkt() # here you die
> 
> The issue is that the bindings here expose something that is probably
> manageable for C++ programmers used to take into account object lifetime,
> but in Python, this can have surprising effect...
> 
> > I'm sorry for my ignorance here. I found a nice GDAL tutorial that seems
> > to say they *should* be explicitly destroyed in certain circumstances
> > (see
> > http://www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_slides2.pdf,
> > page 12). But I have not really seen any other examples of this.
> 
> Destroy() was perhaps necessary with old-gen bindings, but I'm not even
> sure of that... Perhaps this shouldn't have been exposed at all... But, as
> mentionned in the slides, it is true that there are situations where you
> shouldn't call Destroy() at all.
> 
> Do *NOT* do this :
> 
> feat = lyr.GetNextFeature()
> geom = feat.GetGeometryRef()
> geom.Destroy() # Arg! C++ feature still points at the underlying C++
> geometry, but is is now dead
> feat = None # this will destroy the C++ feature, that will try to destroy
> the C++ geometry, but this one is already destroyed --> segfault !
> 
> > If you follow gdal-dev, you probably notice that the "to destroy or not
> > to destroy" question comes up periodically from Python programmers, as
> > does the problem where someone gets a GDALDataset, gets a band, allows
> > the GDALDataset to go out of scope, and then expects the band to still
> > work. These are areas where the GDAL Python bindings to not work like
> > other Python libraries, causing confusion among Python programmers, who
> > generally expect reference counting that "just works" and that they only
> > need to explicitly close something when some kind of I/O is involved.
> 
> Agreed.
> 
> I wouldn't say that is a problem of reference counting, but more a problem
> of ownership and lifetime of C++ objects, that are sometimes destroyed
> when a Python object get out of scope, but shouldn't since another Python
> object indirectly still need them to be alive.
> 
> Do *NOT* do this :
> 
> feat = lyr.GetNextFeature()
> geom = feat.GetGeometryRef()
> feat = None # This kills the C++ feature, and its C++ geometry
> print(geom.ExportToWkt()) # segfault here. The C++ geometry no longer exist
> 
> Byt you could do (and this is what the patch in ticket 3592 I mention below
> does under the hood):
> 
> feat = lyr.GetNextFeature()
> geom = feat.GetGeometryRef()
> geom.please_keep_alive_object_after_equal_sign = feat
> feat = None # The underlying C++ object is still alive, since geom keeps
> the python feature object alive
> print(geom.ExportToWkt())
> 
> 
> Similarly, do *NOT* do this :
> 
> ds = gdal.Open('foo.tif')
> band = ds.GetRasterBand(1)
> ds = None
> print(band.Checksum())
> 
> But you could do :
> 
> ds = gdal.Open('foo.tif')
> band = ds.GetRasterBand(1)
> band.please_keep_alive_object_after_equal_sign = ds
> ds = None
> print(band.Checksum())
> 
> 
> Do *NOT* do this also :
> 
> print(gdal.Open('foo.tif').GetRasterBand(1).Checksum())
> 
> > It would be really great if there was FAQ that pointed out all of the
> > ways that GDAL differs from typical Python libraries. The scenarios I
> > mention above seem to be two of the most common ones. Would someone be
> > willing to create it? I would but do not feel competent enough at this
> > point.
> 
> If you start a wiki page collecting all the info you found in the mailing
> list threads, that would be a beginning...
> 
> Obviously, instead of documenting weird behaviour a better approach would
> be to fix the code so it behaves as expected...
> 
> There was an attempt I pursued in http://trac.osgeo.org/gdal/ticket/3592 ,
> that would solve all the crashes in the above examples, but as you can see
> in the ticket, it raises backward compatibility issues in some cases
> (including the GDAL/OGR python autotest suite)... So the question is a bit
> like : should we inflict pain to existing users (in a few scenarios) to
> make the life of new users easier... ?
> 
> But the patch doesn't solve all cases. Unfortunately, there would be still
> ways of causing segfault from Python. You can break some subtle API
> contracts, like adding a new field to a layer when features deriving from
> this layer definition are still active. And it isn't obvious how we could
> detect such situations to prevent them from happening (see
> http://trac.osgeo.org/gdal/ticket/3552 )
> 
> Do *NOT* do that :
> 
> feature = lyr.GetNextFeature()
> field_defn = ogr.FieldDefn("foo", ogr.OFTString)
> lyr.CreateField(field_defn) # now, existing features deriving from this
> layer are invalid
> feature.DumpReadable() # segfault
> 
> > Thanks,
> > 
> > Jason
From Chris.Barker at noaa.gov  Mon Sep 20 14:32:09 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Mon Sep 20 14:32:11 2010
Subject: [gdal-dev] With Python bindings,
	should geometry objects created by ogr.Geometry() be
	explicitly	destroyed?
In-Reply-To: <201009202012.29818.even.rouault@mines-paris.org>
References: <04b201cb569a$f1c54220$d54fc660$%roberts@duke.edu>
	<201009181152.14158.even.rouault@mines-paris.org>
	<000a01cb58e0$fe757420$fb605c60$%roberts@duke.edu>
	<201009202012.29818.even.rouault@mines-paris.org>
Message-ID: <4C97A8A9.3020500@noaa.gov>

Even Rouault wrote:
> The part where I'm not sure if about the Numpy ABI problems. I wasn't very 
> aware of problems related to it. From what I've seen in the code, it looks 
> like that the python bindings only use the C API/ABI of Numpy.

yup -- there is no C++ in numpy.

 > IMHO. However, I haven't changed anything in this section as I'm not
> 100% sure of my analysis.

aside from C rather than C++, it's all correct.

However, the numpy developers try to keep the ABI compatible as much as 
possible. A little while back a numpy version (I think 1.4.0) was 
released with binary incompatibility, somewhat by accident - it ended up 
getting retracted and an ABI compatible version released in its place. 
However, those folks that re-built something right in those few weeks 
hit the problem.

If you look at the sourceforge download site, you'll see a 1.4.1, but no 
1.4.0, for that reason.

So this is a potential issue, but not a common one.

I'm pretty sure that 1.5 is ABI backward compatible with 1.4.1 and 1.3.* 
at least, and maybe back a lot further.

2.0 may be incompatible, that's why it's called 2.0

-Chris





> Best regards,
> 
> Even
> 
> Le lundi 20 septembre 2010 18:29:26, Jason Roberts a ?crit :
>> Even,
>>
>> Thank you very much for your comments. Based on them, I started a new
>> "Python Gotchas" page here http://trac.osgeo.org/gdal/wiki/PythonGotchas,
>> referenced from http://trac.osgeo.org/gdal/wiki/GdalOgrInPython. Please
>> review it to make sure I got everything right.
>>
>> Best regards,
>>
>> Jason
>>
>> -----Original Message-----
>> From: Even Rouault [mailto:even.rouault@mines-paris.org]
>> Sent: Saturday, September 18, 2010 5:52 AM
>> To: gdal-dev@lists.osgeo.org
>> Cc: Jason Roberts
>> Subject: Re: [gdal-dev] With Python bindings, should geometry objects
>> created by ogr.Geometry() be explicitly destroyed?
>>
>> Jason,
>>
>>> I have some Python code that uses OGR geometry objects internally,
>>> creating them like this:
>>>
>>>
>>>
>>> point = ogr.Geometry(ogr.wkbPoint)
>>>
>>>
>>>
>>> Does this code need to explicitly destroy these geometries, like the
>>> following, to avoid leaks, or can it simply allow them to go out of scope
>>> and have Python's reference counting and garbage collector clean them up?
>>>
>>>
>>>
>>> point.Destroy()
>> There's no reason to call Destroy(), at all. Native object gets destroyed
>> when Python object goes out of scope, or when they are assigned to None.
>> So replace foo.Destroy() by foo = None if you really want to control when
>> the underlying C++ object is destroyed. This is indeed generally only
>> interesting for I/O objects, like a GDALDataset or OGRDataSource, when you
>> want to control when the file handle is closed.
>>
>> ds = gdal.GetDriverByName('GTiff').Create('foo.tif', 10, 10, 1)
>> ds.GetRasterBand(1).Fill(255)
>> ds = None # Now, foo.tif is closed and I can safely copy it
>> shutil.copy('foo.tif', 'other.tif')
>>
>>> Does the situation change if I call feature.SetGeometry(point)? What
>>> about feature.SetGeometryDirectly(point)?
>> No, you don't need to call Destroy() either. SetGeometryDirectly() brings a
>> bit of subtelty though : it makes the (C++) feature object the owner of the
>> (C++) geometry object (whereas SetGeometry() just clones the passed
>> geometry). The consequence for Python side is then when feature goes out
>> of scope, C++ feature object dies and the C++ geometry object too, so the
>> Python point object just referes to a dead C++ object.
>>
>> So do *NOT* do that :
>>
>> point = ogr.Geometry(ogr.wkbPoint)
>> feature = ogr.Feature(layer_defn)
>> feature.SetGeometryDirectly(point)
>> feature = None # point becomes implicitely invalid at that point
>> print point.ExportToWkt() # here you die
>>
>> The issue is that the bindings here expose something that is probably
>> manageable for C++ programmers used to take into account object lifetime,
>> but in Python, this can have surprising effect...
>>
>>> I'm sorry for my ignorance here. I found a nice GDAL tutorial that seems
>>> to say they *should* be explicitly destroyed in certain circumstances
>>> (see
>>> http://www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_slides2.pdf,
>>> page 12). But I have not really seen any other examples of this.
>> Destroy() was perhaps necessary with old-gen bindings, but I'm not even
>> sure of that... Perhaps this shouldn't have been exposed at all... But, as
>> mentionned in the slides, it is true that there are situations where you
>> shouldn't call Destroy() at all.
>>
>> Do *NOT* do this :
>>
>> feat = lyr.GetNextFeature()
>> geom = feat.GetGeometryRef()
>> geom.Destroy() # Arg! C++ feature still points at the underlying C++
>> geometry, but is is now dead
>> feat = None # this will destroy the C++ feature, that will try to destroy
>> the C++ geometry, but this one is already destroyed --> segfault !
>>
>>> If you follow gdal-dev, you probably notice that the "to destroy or not
>>> to destroy" question comes up periodically from Python programmers, as
>>> does the problem where someone gets a GDALDataset, gets a band, allows
>>> the GDALDataset to go out of scope, and then expects the band to still
>>> work. These are areas where the GDAL Python bindings to not work like
>>> other Python libraries, causing confusion among Python programmers, who
>>> generally expect reference counting that "just works" and that they only
>>> need to explicitly close something when some kind of I/O is involved.
>> Agreed.
>>
>> I wouldn't say that is a problem of reference counting, but more a problem
>> of ownership and lifetime of C++ objects, that are sometimes destroyed
>> when a Python object get out of scope, but shouldn't since another Python
>> object indirectly still need them to be alive.
>>
>> Do *NOT* do this :
>>
>> feat = lyr.GetNextFeature()
>> geom = feat.GetGeometryRef()
>> feat = None # This kills the C++ feature, and its C++ geometry
>> print(geom.ExportToWkt()) # segfault here. The C++ geometry no longer exist
>>
>> Byt you could do (and this is what the patch in ticket 3592 I mention below
>> does under the hood):
>>
>> feat = lyr.GetNextFeature()
>> geom = feat.GetGeometryRef()
>> geom.please_keep_alive_object_after_equal_sign = feat
>> feat = None # The underlying C++ object is still alive, since geom keeps
>> the python feature object alive
>> print(geom.ExportToWkt())
>>
>>
>> Similarly, do *NOT* do this :
>>
>> ds = gdal.Open('foo.tif')
>> band = ds.GetRasterBand(1)
>> ds = None
>> print(band.Checksum())
>>
>> But you could do :
>>
>> ds = gdal.Open('foo.tif')
>> band = ds.GetRasterBand(1)
>> band.please_keep_alive_object_after_equal_sign = ds
>> ds = None
>> print(band.Checksum())
>>
>>
>> Do *NOT* do this also :
>>
>> print(gdal.Open('foo.tif').GetRasterBand(1).Checksum())
>>
>>> It would be really great if there was FAQ that pointed out all of the
>>> ways that GDAL differs from typical Python libraries. The scenarios I
>>> mention above seem to be two of the most common ones. Would someone be
>>> willing to create it? I would but do not feel competent enough at this
>>> point.
>> If you start a wiki page collecting all the info you found in the mailing
>> list threads, that would be a beginning...
>>
>> Obviously, instead of documenting weird behaviour a better approach would
>> be to fix the code so it behaves as expected...
>>
>> There was an attempt I pursued in http://trac.osgeo.org/gdal/ticket/3592 ,
>> that would solve all the crashes in the above examples, but as you can see
>> in the ticket, it raises backward compatibility issues in some cases
>> (including the GDAL/OGR python autotest suite)... So the question is a bit
>> like : should we inflict pain to existing users (in a few scenarios) to
>> make the life of new users easier... ?
>>
>> But the patch doesn't solve all cases. Unfortunately, there would be still
>> ways of causing segfault from Python. You can break some subtle API
>> contracts, like adding a new field to a layer when features deriving from
>> this layer definition are still active. And it isn't obvious how we could
>> detect such situations to prevent them from happening (see
>> http://trac.osgeo.org/gdal/ticket/3552 )
>>
>> Do *NOT* do that :
>>
>> feature = lyr.GetNextFeature()
>> field_defn = ogr.FieldDefn("foo", ogr.OFTString)
>> lyr.CreateField(field_defn) # now, existing features deriving from this
>> layer are invalid
>> feature.DumpReadable() # segfault
>>
>>> Thanks,
>>>
>>> Jason
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From jason.roberts at duke.edu  Mon Sep 20 15:05:52 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Sep 20 15:05:57 2010
Subject: [gdal-dev] With Python bindings,
	should geometry objects created by ogr.Geometry() be
	explicitly	destroyed?
In-Reply-To: <4C97A8A9.3020500@noaa.gov>
References: <04b201cb569a$f1c54220$d54fc660$%roberts@duke.edu>
	<201009181152.14158.even.rouault@mines-paris.org>
	<000a01cb58e0$fe757420$fb605c60$%roberts@duke.edu>
	<201009202012.29818.even.rouault@mines-paris.org>
	<4C97A8A9.3020500@noaa.gov>
Message-ID: <002e01cb58f6$d8dd9330$8a98b990$@roberts@duke.edu>

Hi Even and Chris,

Thanks for the review and edits. Feel free to edit as needed to reflect the facts as seen by yourself and the GDAL team.

I replaced the reference to "C++" with "C" for numpy. Hopefully it reflects reality now. I work mostly at the Python level these days and sometimes gloss over the detail of whether the underlying stuff is C or C++. :-)

I am aware of the problem with numpy 1.4.1, where they introduced some advanced date/time support but it broke the ABI so they retracted the change and deferred it (I think to numpy 2.0). I found that 1.3.0 is not forward compatible with extension modules compiled against 1.4.1, at least on win32. I do not recall the exact problem--just diffed the 1.3.0 headers with 1.4.1, but could not immediately spot it. Unfortunately this caused a problem for my application. My app integrates with ArcGIS, and ArcGIS 10 shipped with numpy 1.3.0. I like to keep up with numpy versions but found that I could not compile the GDAL bindings against 1.4.1 and have them work on 1.3.0.

Of course, the numpy team may not prioritize this kind of compatibility; perhaps if I had compiled GDAL's bindings against 1.3.0 they would have worked fine with 1.4.1. If you know the details and care to update the page, please go for it...

Thanks again,

Jason

-----Original Message-----
From: Christopher Barker [mailto:Chris.Barker@noaa.gov] 
Sent: Monday, September 20, 2010 2:32 PM
To: Even Rouault
Cc: Jason Roberts; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] With Python bindings, should geometry objects created by ogr.Geometry() be explicitly destroyed?

Even Rouault wrote:
> The part where I'm not sure if about the Numpy ABI problems. I wasn't very 
> aware of problems related to it. From what I've seen in the code, it looks 
> like that the python bindings only use the C API/ABI of Numpy.

yup -- there is no C++ in numpy.

 > IMHO. However, I haven't changed anything in this section as I'm not
> 100% sure of my analysis.

aside from C rather than C++, it's all correct.

However, the numpy developers try to keep the ABI compatible as much as 
possible. A little while back a numpy version (I think 1.4.0) was 
released with binary incompatibility, somewhat by accident - it ended up 
getting retracted and an ABI compatible version released in its place. 
However, those folks that re-built something right in those few weeks 
hit the problem.

If you look at the sourceforge download site, you'll see a 1.4.1, but no 
1.4.0, for that reason.

So this is a potential issue, but not a common one.

I'm pretty sure that 1.5 is ABI backward compatible with 1.4.1 and 1.3.* 
at least, and maybe back a lot further.

2.0 may be incompatible, that's why it's called 2.0

-Chris





> Best regards,
> 
> Even
> 
> Le lundi 20 septembre 2010 18:29:26, Jason Roberts a ?crit :
>> Even,
>>
>> Thank you very much for your comments. Based on them, I started a new
>> "Python Gotchas" page here http://trac.osgeo.org/gdal/wiki/PythonGotchas,
>> referenced from http://trac.osgeo.org/gdal/wiki/GdalOgrInPython. Please
>> review it to make sure I got everything right.
>>
>> Best regards,
>>
>> Jason
>>
>> -----Original Message-----
>> From: Even Rouault [mailto:even.rouault@mines-paris.org]
>> Sent: Saturday, September 18, 2010 5:52 AM
>> To: gdal-dev@lists.osgeo.org
>> Cc: Jason Roberts
>> Subject: Re: [gdal-dev] With Python bindings, should geometry objects
>> created by ogr.Geometry() be explicitly destroyed?
>>
>> Jason,
>>
>>> I have some Python code that uses OGR geometry objects internally,
>>> creating them like this:
>>>
>>>
>>>
>>> point = ogr.Geometry(ogr.wkbPoint)
>>>
>>>
>>>
>>> Does this code need to explicitly destroy these geometries, like the
>>> following, to avoid leaks, or can it simply allow them to go out of scope
>>> and have Python's reference counting and garbage collector clean them up?
>>>
>>>
>>>
>>> point.Destroy()
>> There's no reason to call Destroy(), at all. Native object gets destroyed
>> when Python object goes out of scope, or when they are assigned to None.
>> So replace foo.Destroy() by foo = None if you really want to control when
>> the underlying C++ object is destroyed. This is indeed generally only
>> interesting for I/O objects, like a GDALDataset or OGRDataSource, when you
>> want to control when the file handle is closed.
>>
>> ds = gdal.GetDriverByName('GTiff').Create('foo.tif', 10, 10, 1)
>> ds.GetRasterBand(1).Fill(255)
>> ds = None # Now, foo.tif is closed and I can safely copy it
>> shutil.copy('foo.tif', 'other.tif')
>>
>>> Does the situation change if I call feature.SetGeometry(point)? What
>>> about feature.SetGeometryDirectly(point)?
>> No, you don't need to call Destroy() either. SetGeometryDirectly() brings a
>> bit of subtelty though : it makes the (C++) feature object the owner of the
>> (C++) geometry object (whereas SetGeometry() just clones the passed
>> geometry). The consequence for Python side is then when feature goes out
>> of scope, C++ feature object dies and the C++ geometry object too, so the
>> Python point object just referes to a dead C++ object.
>>
>> So do *NOT* do that :
>>
>> point = ogr.Geometry(ogr.wkbPoint)
>> feature = ogr.Feature(layer_defn)
>> feature.SetGeometryDirectly(point)
>> feature = None # point becomes implicitely invalid at that point
>> print point.ExportToWkt() # here you die
>>
>> The issue is that the bindings here expose something that is probably
>> manageable for C++ programmers used to take into account object lifetime,
>> but in Python, this can have surprising effect...
>>
>>> I'm sorry for my ignorance here. I found a nice GDAL tutorial that seems
>>> to say they *should* be explicitly destroyed in certain circumstances
>>> (see
>>> http://www.gis.usu.edu/~chrisg/python/2009/lectures/ospy_slides2.pdf,
>>> page 12). But I have not really seen any other examples of this.
>> Destroy() was perhaps necessary with old-gen bindings, but I'm not even
>> sure of that... Perhaps this shouldn't have been exposed at all... But, as
>> mentionned in the slides, it is true that there are situations where you
>> shouldn't call Destroy() at all.
>>
>> Do *NOT* do this :
>>
>> feat = lyr.GetNextFeature()
>> geom = feat.GetGeometryRef()
>> geom.Destroy() # Arg! C++ feature still points at the underlying C++
>> geometry, but is is now dead
>> feat = None # this will destroy the C++ feature, that will try to destroy
>> the C++ geometry, but this one is already destroyed --> segfault !
>>
>>> If you follow gdal-dev, you probably notice that the "to destroy or not
>>> to destroy" question comes up periodically from Python programmers, as
>>> does the problem where someone gets a GDALDataset, gets a band, allows
>>> the GDALDataset to go out of scope, and then expects the band to still
>>> work. These are areas where the GDAL Python bindings to not work like
>>> other Python libraries, causing confusion among Python programmers, who
>>> generally expect reference counting that "just works" and that they only
>>> need to explicitly close something when some kind of I/O is involved.
>> Agreed.
>>
>> I wouldn't say that is a problem of reference counting, but more a problem
>> of ownership and lifetime of C++ objects, that are sometimes destroyed
>> when a Python object get out of scope, but shouldn't since another Python
>> object indirectly still need them to be alive.
>>
>> Do *NOT* do this :
>>
>> feat = lyr.GetNextFeature()
>> geom = feat.GetGeometryRef()
>> feat = None # This kills the C++ feature, and its C++ geometry
>> print(geom.ExportToWkt()) # segfault here. The C++ geometry no longer exist
>>
>> Byt you could do (and this is what the patch in ticket 3592 I mention below
>> does under the hood):
>>
>> feat = lyr.GetNextFeature()
>> geom = feat.GetGeometryRef()
>> geom.please_keep_alive_object_after_equal_sign = feat
>> feat = None # The underlying C++ object is still alive, since geom keeps
>> the python feature object alive
>> print(geom.ExportToWkt())
>>
>>
>> Similarly, do *NOT* do this :
>>
>> ds = gdal.Open('foo.tif')
>> band = ds.GetRasterBand(1)
>> ds = None
>> print(band.Checksum())
>>
>> But you could do :
>>
>> ds = gdal.Open('foo.tif')
>> band = ds.GetRasterBand(1)
>> band.please_keep_alive_object_after_equal_sign = ds
>> ds = None
>> print(band.Checksum())
>>
>>
>> Do *NOT* do this also :
>>
>> print(gdal.Open('foo.tif').GetRasterBand(1).Checksum())
>>
>>> It would be really great if there was FAQ that pointed out all of the
>>> ways that GDAL differs from typical Python libraries. The scenarios I
>>> mention above seem to be two of the most common ones. Would someone be
>>> willing to create it? I would but do not feel competent enough at this
>>> point.
>> If you start a wiki page collecting all the info you found in the mailing
>> list threads, that would be a beginning...
>>
>> Obviously, instead of documenting weird behaviour a better approach would
>> be to fix the code so it behaves as expected...
>>
>> There was an attempt I pursued in http://trac.osgeo.org/gdal/ticket/3592 ,
>> that would solve all the crashes in the above examples, but as you can see
>> in the ticket, it raises backward compatibility issues in some cases
>> (including the GDAL/OGR python autotest suite)... So the question is a bit
>> like : should we inflict pain to existing users (in a few scenarios) to
>> make the life of new users easier... ?
>>
>> But the patch doesn't solve all cases. Unfortunately, there would be still
>> ways of causing segfault from Python. You can break some subtle API
>> contracts, like adding a new field to a layer when features deriving from
>> this layer definition are still active. And it isn't obvious how we could
>> detect such situations to prevent them from happening (see
>> http://trac.osgeo.org/gdal/ticket/3552 )
>>
>> Do *NOT* do that :
>>
>> feature = lyr.GetNextFeature()
>> field_defn = ogr.FieldDefn("foo", ogr.OFTString)
>> lyr.CreateField(field_defn) # now, existing features deriving from this
>> layer are invalid
>> feature.DumpReadable() # segfault
>>
>>> Thanks,
>>>
>>> Jason
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From jason.roberts at duke.edu  Mon Sep 20 15:06:58 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Sep 20 15:07:02 2010
Subject: [gdal-dev] With Python bindings,
	should geometry objects created by ogr.Geometry() be explicitly
	destroyed?
In-Reply-To: <AANLkTikc_NYec=ZVBhOJaftBeoOuNpLGrH43pBRfmeye@mail.gmail.com>
References: <04b201cb569a$f1c54220$d54fc660$%roberts@duke.edu>
	<201009181152.14158.even.rouault@mines-paris.org>
	<-6510942208422008965@unknownmsgid>
	<AANLkTikc_NYec=ZVBhOJaftBeoOuNpLGrH43pBRfmeye@mail.gmail.com>
Message-ID: <002f01cb58f6$ffd0bc60$ff723520$@roberts@duke.edu>

Hi Paolo,

Glad you liked it. If you can recall additional difficulties that you think
others would appreciate knowing, please feel free to add them to the page.

Best,

Jason

-----Original Message-----
From: Paolo Corti [mailto:pcorti@gmail.com] 
Sent: Monday, September 20, 2010 12:56 PM
To: Jason Roberts
Cc: Even Rouault; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] With Python bindings, should geometry objects
created by ogr.Geometry() be explicitly destroyed?

On Mon, Sep 20, 2010 at 6:29 PM, Jason Roberts <jason.roberts@duke.edu>
wrote:
> Even,
>
> Thank you very much for your comments. Based on them, I started a new
"Python Gotchas" page here http://trac.osgeo.org/gdal/wiki/PythonGotchas,
referenced from http://trac.osgeo.org/gdal/wiki/GdalOgrInPython. Please
review it to make sure I got everything right.
>
> Best regards,
>
> Jason
>

Jason (and Even)
Thanks a lot!
This is really an excellent write up, I think it is a very good
introduction for Python developers that need to use the GDAL Python
bindings.
Personally I had many difficulties when I started using them, so I
think this is a great informative resource.
P

-- 
Paolo Corti
GIS specialist and web developer
web: http://www.paolocorti.net
twitter: @paolo_corti

From woklist at kyngchaos.com  Mon Sep 20 16:15:14 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Sep 20 16:15:19 2010
Subject: [gdal-dev] can't import osgeo or gdal in python
In-Reply-To: <4C979AF3.6040603@noaa.gov>
References: <2768F3C4-CBD6-492D-8DE8-2BC84A641DDE@forestinformatics.com>
	<4C93B44E.9040003@noaa.gov>
	<DCB4DA54-9676-453E-900B-50D7CDA899BE@forestinformatics.com>
	<4C979AF3.6040603@noaa.gov>
Message-ID: <2153CAD5-EB5C-431F-8C64-786DDE1792BD@kyngchaos.com>

On Sep 20, 2010, at 12:33 PM, Christopher Barker wrote:

> Jeff Hamann wrote:
>> Chris, Thanks for responding to my post. 
> 
> re-including the gdal list -- I suspect you didn't mean to reply only to me.
> 
>> I'm not using the pre-built frameworks as I'm trying to construct a stack that can be "easily" built, installed, and replicated on Linux, FreeBSD (my fav), windows (not so much) and OSX.
> 
> In that case, I'd forget about the framework build -- you might as well keep it as similar to the other *nix's
> 
Well, on its own, the framework build of GDAL is just as easy to built and install as the unix-style library build, and could be also considered standard.

As a stack, I like to think my frameworks and packages are a de facto standard, though I don't promote that as much as I should.  There are build scripts for all but GDAL (maybe I'll clean that one up someday, but it's not a high priority since the GDAL source has a framework option), so it's easily replicated.

>>>> When I try to "run" (again newbie
>>>> talking here, so be patient), a python script and import gdal:
> 
>>>> /Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so
>>>> Expected in: flat namespace
> 
> This is something I know next to nothign abuot, but I know there is something in OS-X with things being build with either "flat" or "nested" namespaces -- perhaps those have gotten confused with your build? Did you build your own Python?

flat/two-level namespaces are a way to internally organize the external library functions ("symbols") used by a library or program.  With flat (linux-like), the library name is not recorded, so it looks in each loaded library for the function, which can be slow.  With two-level, the library name is stored along with the function name, so it only needs to look in that library.

When a function is not found, with a flat namespace the error can't tell you where it was expecting to find it  But with a two-level namespace, the error can tell you the library name, which helps figure out where the problem is.

So, your error only means it can find CPLDefaultErrorHandler(), but it doesn't know where it's supposed to be.  The flat namespace isn't necessarily the source of the problem (though it can lead to problems finding symbols that are loaded).

The default in recent versions of the OSX development tools is two-level.  It has changed a couple times in the past.  In the early porting days one or the other has had problems with *nix ports, and developers have tried to hardwire into configure whichever one seemed to work for them (usually that meant forcing flat namespaces).  These days namespace issues have been worked out and the default two-level works just fine.

Sorry for the long-winded explanation.

... hmm, looking at the GDAL configure, I see that for OS X 10.5 and 10.6 it does not add the flat-namespace option to the GDAL library linking, but it does for earlier versions (at least it looks like it does).  Are you setting MACOSX_DEPLOYMENT_TARGET before configuring?

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

All generalizations are dangerous, even this one.


From szekerest at gmail.com  Mon Sep 20 16:55:54 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Sep 20 16:55:57 2010
Subject: [gdal-dev] OGR MS SQL Spatial driver has been added
In-Reply-To: <088E77A3F30945D587F5DCE02DDFAD4D@dlq6600>
References: <AANLkTi=quVC=5NDt_v==qPE56eXk2MOzx6-zUrj=4exT@mail.gmail.com>
	<088E77A3F30945D587F5DCE02DDFAD4D@dlq6600>
Message-ID: <AANLkTinjJ9GDOqjRUT90zGE_pdWx-YckQuej2K88yLtA@mail.gmail.com>

2010/9/20 David Lowther <dlowther@coordinatesolutions.com>

>
>
> It seems almost as if there is an index off in the field information.
>
>
>

David,

That's strange indeed. What is the database type of this field in the table?
Could you provide your test data to reproduce this?



> I am also not seeing any features when I render the layer in Mapserver
> (though that could be any number of things as I am just getting started with
> OGR MSSQL in Mapserver).
>
>
>

It would be helpful to see your mapfile to make sure about the problem.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100920/a018e33b/attachment.html
From dlowther at coordinatesolutions.com  Mon Sep 20 17:07:02 2010
From: dlowther at coordinatesolutions.com (David Lowther)
Date: Mon Sep 20 17:07:07 2010
Subject: [gdal-dev] OGR MS SQL Spatial driver has been added
In-Reply-To: <AANLkTinjJ9GDOqjRUT90zGE_pdWx-YckQuej2K88yLtA@mail.gmail.com>
References: <AANLkTi=quVC=5NDt_v==qPE56eXk2MOzx6-zUrj=4exT@mail.gmail.com><088E77A3F30945D587F5DCE02DDFAD4D@dlq6600>
	<AANLkTinjJ9GDOqjRUT90zGE_pdWx-YckQuej2K88yLtA@mail.gmail.com>
Message-ID: <13F9C31074FC4C84AED14B8957B7AA53@dlq6600>

CREATE TABLE [dbo].[MetesAndBoundsHeader](

      [PKey] [int] IDENTITY(1,1) NOT NULL,

      [SpatialDataKey] [int] NULL,

      [StartX] [decimal](18, 4) NULL,

      [StartY] [decimal](18, 4) NULL,

      [Feature] [geometry] NULL,

 CONSTRAINT [PK_MetesAndBoundsDescription] PRIMARY KEY CLUSTERED 

(

      [PKey] ASC

)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY =
OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]

) ON [PRIMARY]

GO

SET IDENTITY_INSERT [dbo].[MetesAndBoundsHeader] ON

INSERT [dbo].[MetesAndBoundsHeader] ([PKey], [SpatialDataKey], [StartX],
[StartY], [Feature]) VALUES (8, 7, CAST(463644.9082 AS Decimal(18, 4)),
CAST(1484517.3764 AS Decimal(18, 4)),
0xE60E00000104050000009A999999734C1C4100000000E5A636419A999999734C1C41000000
00F5CD36419A99999939B01B4100000000A4CE36419A99999939B01B410000000094A736419A
999999734C1C4100000000E5A6364101000000020000000001000000FFFFFFFF0000000003)

INSERT [dbo].[MetesAndBoundsHeader] ([PKey], [SpatialDataKey], [StartX],
[StartY], [Feature]) VALUES (9, 8, CAST(416571.3699 AS Decimal(18, 4)),
CAST(1465354.3699 AS Decimal(18, 4)),
0xE60E00000104050000009A999999ED6C1941000000000A5C36419A999999ED6C1941000000
001A8336419A999999B3D0184100000000C98336419A999999B3D0184100000000B95C36419A
999999ED6C1941000000000A5C364101000000020000000001000000FFFFFFFF0000000003)

SET IDENTITY_INSERT [dbo].[MetesAndBoundsHeader] OFF

 

 

David Lowther

 

Coordinate Solutions, Inc.

 

  _____  

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Monday, September 20, 2010 4:56 PM
To: David Lowther
Cc: gdal-dev
Subject: Re: [gdal-dev] OGR MS SQL Spatial driver has been added

 

 

2010/9/20 David Lowther <dlowther@coordinatesolutions.com>

  

It seems almost as if there is an index off in the field information.

 


David,

That's strange indeed. What is the database type of this field in the table?
Could you provide your test data to reproduce this? 

 

I am also not seeing any features when I render the layer in Mapserver
(though that could be any number of things as I am just getting started with
OGR MSSQL in Mapserver).

 


It would be helpful to see your mapfile to make sure about the problem.


Best regards,

Tamas

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100920/f6fab3cb/attachment.html
From dlowther at coordinatesolutions.com  Mon Sep 20 17:34:11 2010
From: dlowther at coordinatesolutions.com (David Lowther)
Date: Mon Sep 20 17:34:19 2010
Subject: [gdal-dev] OGR MS SQL Spatial driver has been added
In-Reply-To: <13F9C31074FC4C84AED14B8957B7AA53@dlq6600>
References: <AANLkTi=quVC=5NDt_v==qPE56eXk2MOzx6-zUrj=4exT@mail.gmail.com><088E77A3F30945D587F5DCE02DDFAD4D@dlq6600><AANLkTinjJ9GDOqjRUT90zGE_pdWx-YckQuej2K88yLtA@mail.gmail.com>
	<13F9C31074FC4C84AED14B8957B7AA53@dlq6600>
Message-ID: <4D7F809A43854E5F83311293E8CD618E@dlq6600>

LAYER

              NAME "SQL SPATIAL"

              CONNECTIONTYPE OGR

              CONNECTION
"MSSQL:server=coordinatesolutions.com\sqlexpress2008;database=xxx;uid=xxx;pw
d=xxx;tables=MetesAndBoundsHeader"

              DATA "MetesAndBoundsHeader"

              TYPE POLYGON

              PROJECTION #MSTM

                     proj=tmerc

                     lat_0=32.500000 #REF LAT

                     lon_0=-89.750000 #CENTRAL MERIDIAN

                     x_0=500000.000000 #FALSE EAST

                     y_0=1300000.000000 #FALSE NORTH

                     datum=NAD83

                     ellps=GRS80

                     no_defs

              END#PROJECTION

              STATUS DEFAULT

              CLASS

                     SIZE 10

               COLOR 255 0 0

              END

       END

 

 

David Lowther

 

Coordinate Solutions, Inc.

 

  _____  

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of David Lowther
Sent: Monday, September 20, 2010 5:07 PM
To: 'Tamas Szekeres'; 'gdal-dev'
Subject: RE: [gdal-dev] OGR MS SQL Spatial driver has been added

 

CREATE TABLE [dbo].[MetesAndBoundsHeader](

      [PKey] [int] IDENTITY(1,1) NOT NULL,

      [SpatialDataKey] [int] NULL,

      [StartX] [decimal](18, 4) NULL,

      [StartY] [decimal](18, 4) NULL,

      [Feature] [geometry] NULL,

 CONSTRAINT [PK_MetesAndBoundsDescription] PRIMARY KEY CLUSTERED 

(

      [PKey] ASC

)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY =
OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]

) ON [PRIMARY]

GO

SET IDENTITY_INSERT [dbo].[MetesAndBoundsHeader] ON

INSERT [dbo].[MetesAndBoundsHeader] ([PKey], [SpatialDataKey], [StartX],
[StartY], [Feature]) VALUES (8, 7, CAST(463644.9082 AS Decimal(18, 4)),
CAST(1484517.3764 AS Decimal(18, 4)),
0xE60E00000104050000009A999999734C1C4100000000E5A636419A999999734C1C41000000
00F5CD36419A99999939B01B4100000000A4CE36419A99999939B01B410000000094A736419A
999999734C1C4100000000E5A6364101000000020000000001000000FFFFFFFF0000000003)

INSERT [dbo].[MetesAndBoundsHeader] ([PKey], [SpatialDataKey], [StartX],
[StartY], [Feature]) VALUES (9, 8, CAST(416571.3699 AS Decimal(18, 4)),
CAST(1465354.3699 AS Decimal(18, 4)),
0xE60E00000104050000009A999999ED6C1941000000000A5C36419A999999ED6C1941000000
001A8336419A999999B3D0184100000000C98336419A999999B3D0184100000000B95C36419A
999999ED6C1941000000000A5C364101000000020000000001000000FFFFFFFF0000000003)

SET IDENTITY_INSERT [dbo].[MetesAndBoundsHeader] OFF

 

 

David Lowther

 

Coordinate Solutions, Inc.

 

  _____  

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Monday, September 20, 2010 4:56 PM
To: David Lowther
Cc: gdal-dev
Subject: Re: [gdal-dev] OGR MS SQL Spatial driver has been added

 

 

2010/9/20 David Lowther <dlowther@coordinatesolutions.com>

  

It seems almost as if there is an index off in the field information.

 


David,

That's strange indeed. What is the database type of this field in the table?
Could you provide your test data to reproduce this? 

 

I am also not seeing any features when I render the layer in Mapserver
(though that could be any number of things as I am just getting started with
OGR MSSQL in Mapserver).

 


It would be helpful to see your mapfile to make sure about the problem.


Best regards,

Tamas

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100920/98e0aaac/attachment-0001.html
From szekerest at gmail.com  Mon Sep 20 18:05:53 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Sep 20 18:06:00 2010
Subject: [gdal-dev] OGR MS SQL Spatial driver has been added
In-Reply-To: <13F9C31074FC4C84AED14B8957B7AA53@dlq6600>
References: <AANLkTi=quVC=5NDt_v==qPE56eXk2MOzx6-zUrj=4exT@mail.gmail.com>
	<088E77A3F30945D587F5DCE02DDFAD4D@dlq6600>
	<AANLkTinjJ9GDOqjRUT90zGE_pdWx-YckQuej2K88yLtA@mail.gmail.com>
	<13F9C31074FC4C84AED14B8957B7AA53@dlq6600>
Message-ID: <AANLkTikY0kcjMUrtHQu78Oa37-ck8evM=EbpU+_vN8Du@mail.gmail.com>

David,

The driver assumes that the first field is the fid and the second is the
geometry column in the table. This doesn't appear to be a problem until the
table has been created by the same driver.
However in your case the field ordering doesn't follow this pattern. For a
workaround you may modify your table as follows:

select [PKey], [Feature], [SpatialDataKey], [StartX], [StartY] into
MetesAndBoundsHeader2 from MetesAndBoundsHeader
ALTER TABLE dbo.MetesAndBoundsHeader2 ADD CONSTRAINT
PK_MetesAndBoundsHeader2 PRIMARY KEY CLUSTERED (PKey)

and then do the same test with MetesAndBoundsHeader2. (Hopefully this will
solve the mapserver issue as well)


I consider this to be a bug in the driver and I'll correct this issue
tomorrow so as to allow the columns defined in arbitrary field order.

Best regards,

Tamas





2010/9/20 David Lowther <dlowther@coordinatesolutions.com>

>  CREATE TABLE [dbo].[MetesAndBoundsHeader](
>
>       [PKey] [int] IDENTITY(1,1) NOT NULL,
>
>       [SpatialDataKey] [int] NULL,
>
>       [StartX] [decimal](18, 4) NULL,
>
>       [StartY] [decimal](18, 4) NULL,
>
>       [Feature] [geometry] NULL,
>
>  CONSTRAINT [PK_MetesAndBoundsDescription] PRIMARY KEY CLUSTERED
>
> (
>
>       [PKey] ASC
>
> )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY =
> OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
>
> ) ON [PRIMARY]
>
> GO
>
> SET IDENTITY_INSERT [dbo].[MetesAndBoundsHeader] ON
>
> INSERT [dbo].[MetesAndBoundsHeader] ([PKey], [SpatialDataKey], [StartX],[StartY]
> , [Feature]) VALUES (8, 7, CAST(463644.9082 AS Decimal(18, 4)), CAST(1484517.3764
> AS Decimal(18, 4)),0xE60E00000104050000009A999999734C1C4100000000E5A636419A999999734C1C4100000000F5CD36419A99999939B01B4100000000A4CE36419A99999939B01B410000000094A736419A999999734C1C4100000000E5A6364101000000020000000001000000FFFFFFFF0000000003
> )
>
> INSERT [dbo].[MetesAndBoundsHeader] ([PKey], [SpatialDataKey], [StartX],[StartY]
> , [Feature]) VALUES (9, 8, CAST(416571.3699 AS Decimal(18, 4)), CAST(1465354.3699
> AS Decimal(18, 4)),0xE60E00000104050000009A999999ED6C1941000000000A5C36419A999999ED6C1941000000001A8336419A999999B3D0184100000000C98336419A999999B3D0184100000000B95C36419A999999ED6C1941000000000A5C364101000000020000000001000000FFFFFFFF0000000003
> )
>
> SET IDENTITY_INSERT [dbo].[MetesAndBoundsHeader] OFF
>
>
>
>
>
> David Lowther
>
>
>
> Coordinate Solutions, Inc.
>
>
>   ------------------------------
>
> *From:* Tamas Szekeres [mailto:szekerest@gmail.com]
> *Sent:* Monday, September 20, 2010 4:56 PM
> *To:* David Lowther
> *Cc:* gdal-dev
> *Subject:* Re: [gdal-dev] OGR MS SQL Spatial driver has been added
>
>
>
>
>
> 2010/9/20 David Lowther <dlowther@coordinatesolutions.com>
>
>
>
> It seems almost as if there is an index off in the field information.
>
>
>
>
> David,
>
> That's strange indeed. What is the database type of this field in the
> table? Could you provide your test data to reproduce this?
>
>
>
>  I am also not seeing any features when I render the layer in Mapserver
> (though that could be any number of things as I am just getting started with
> OGR MSSQL in Mapserver).
>
>
>
>
> It would be helpful to see your mapfile to make sure about the problem.
>
>
> Best regards,
>
> Tamas
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100921/49d86556/attachment.html
From dlowther at coordinatesolutions.com  Mon Sep 20 19:37:03 2010
From: dlowther at coordinatesolutions.com (David Lowther)
Date: Mon Sep 20 19:37:07 2010
Subject: [gdal-dev] OGR MS SQL Spatial driver has been added
In-Reply-To: <AANLkTikY0kcjMUrtHQu78Oa37-ck8evM=EbpU+_vN8Du@mail.gmail.com>
References: <AANLkTi=quVC=5NDt_v==qPE56eXk2MOzx6-zUrj=4exT@mail.gmail.com><088E77A3F30945D587F5DCE02DDFAD4D@dlq6600><AANLkTinjJ9GDOqjRUT90zGE_pdWx-YckQuej2K88yLtA@mail.gmail.com><13F9C31074FC4C84AED14B8957B7AA53@dlq6600>
	<AANLkTikY0kcjMUrtHQu78Oa37-ck8evM=EbpU+_vN8Du@mail.gmail.com>
Message-ID: <45B9ABF0CB18404A9DD55291CD708F42@dlq6600>

Tamas,

 

I altered the table and that did indeed fix up my ogrinfo results. I'm still
not getting anything from Mapserver, but I am preparing a basic mapfile that
should make testing easier.

 

David Lowther

 

Coordinate Solutions, Inc.

 

  _____  

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Monday, September 20, 2010 6:06 PM
To: David Lowther
Cc: gdal-dev
Subject: Re: [gdal-dev] OGR MS SQL Spatial driver has been added

 

David,

The driver assumes that the first field is the fid and the second is the
geometry column in the table. This doesn't appear to be a problem until the
table has been created by the same driver.
However in your case the field ordering doesn't follow this pattern. For a
workaround you may modify your table as follows:

select [PKey], [Feature], [SpatialDataKey], [StartX], [StartY] into
MetesAndBoundsHeader2 from MetesAndBoundsHeader
ALTER TABLE dbo.MetesAndBoundsHeader2 ADD CONSTRAINT
PK_MetesAndBoundsHeader2 PRIMARY KEY CLUSTERED (PKey)

and then do the same test with MetesAndBoundsHeader2. (Hopefully this will
solve the mapserver issue as well)


I consider this to be a bug in the driver and I'll correct this issue
tomorrow so as to allow the columns defined in arbitrary field order.

Best regards,

Tamas






2010/9/20 David Lowther <dlowther@coordinatesolutions.com>

CREATE TABLE [dbo].[MetesAndBoundsHeader](

      [PKey] [int] IDENTITY(1,1) NOT NULL,

      [SpatialDataKey] [int] NULL,

      [StartX] [decimal](18, 4) NULL,

      [StartY] [decimal](18, 4) NULL,

      [Feature] [geometry] NULL,

 CONSTRAINT [PK_MetesAndBoundsDescription] PRIMARY KEY CLUSTERED 

(

      [PKey] ASC

)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY =
OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]

) ON [PRIMARY]

GO

SET IDENTITY_INSERT [dbo].[MetesAndBoundsHeader] ON

INSERT [dbo].[MetesAndBoundsHeader] ([PKey], [SpatialDataKey], [StartX],
[StartY], [Feature]) VALUES (8, 7, CAST(463644.9082 AS Decimal(18, 4)),
CAST(1484517.3764 AS Decimal(18, 4)),
0xE60E00000104050000009A999999734C1C4100000000E5A636419A999999734C1C41000000
00F5CD36419A99999939B01B4100000000A4CE36419A99999939B01B410000000094A736419A
999999734C1C4100000000E5A6364101000000020000000001000000FFFFFFFF0000000003)

INSERT [dbo].[MetesAndBoundsHeader] ([PKey], [SpatialDataKey], [StartX],
[StartY], [Feature]) VALUES (9, 8, CAST(416571.3699 AS Decimal(18, 4)),
CAST(1465354.3699 AS Decimal(18, 4)),
0xE60E00000104050000009A999999ED6C1941000000000A5C36419A999999ED6C1941000000
001A8336419A999999B3D0184100000000C98336419A999999B3D0184100000000B95C36419A
999999ED6C1941000000000A5C364101000000020000000001000000FFFFFFFF0000000003)

SET IDENTITY_INSERT [dbo].[MetesAndBoundsHeader] OFF

 

 

David Lowther

 

Coordinate Solutions, Inc.

 

  _____  

From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Monday, September 20, 2010 4:56 PM
To: David Lowther
Cc: gdal-dev
Subject: Re: [gdal-dev] OGR MS SQL Spatial driver has been added

 

 

2010/9/20 David Lowther <dlowther@coordinatesolutions.com>

  

It seems almost as if there is an index off in the field information.

 


David,

That's strange indeed. What is the database type of this field in the table?
Could you provide your test data to reproduce this? 

 

I am also not seeing any features when I render the layer in Mapserver
(though that could be any number of things as I am just getting started with
OGR MSSQL in Mapserver).

 


It would be helpful to see your mapfile to make sure about the problem.


Best regards,

Tamas

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100920/02285dfa/attachment-0001.html
From ivan.lucena at pmldnet.com  Mon Sep 20 19:54:31 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon Sep 20 19:54:32 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gY2FuJ3QgaW1wb3J0IG9zZ2VvIG9yIGdkYWwgaW4gcHl0aG9u?=
Message-ID: <20100920235431.2506.qmail@s466.sureserver.com>

Hi guys,

Sorry to interrupt but I was having the exact same error as Jeff and I was following the discussion quite close.

But I found a solution. I can get it to work as long as if I use python2.6:

turtlebowl:~ ilucena$ python2.6
Python 2.6.1 (r261:67515, Feb 11 2010, 00:51:29) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from osgeo import gdal
>>> drv = gdal.GetDriverByName("GTIFF")
>>> print drv
<osgeo.gdal.Driver; proxy of <Swig Object of type 'GDALDriverShadow *' at 0x1002596a0> >
>>> ^D

But if I use the default python,  2.7 - that I download binaries from python.org and run the installer from the dmg, 
that is what I got:

turtlebowl:~ ilucena$ python
Python 2.7 (r27:82508, Jul  3 2010, 20:17:05) 
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from osgeo import gdal
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/osgeo/__init__.py", line 21, 
in <module>
    _gdal = swig_import_helper()
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/osgeo/__init__.py", line 17, 
in swig_import_helper
    _mod = imp.load_module('_gdal', fp, pathname, description)
ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/osgeo/_gdal.so, 
2): Symbol not found: _CPLDefaultErrorHandler
  Referenced from: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/osgeo/_gdal.so
  Expected in: dynamic lookup

Just like Jeff.

This is my system:

turtlebowl:~ ilucena$ sw_vers
ProductName:	Mac OS X
ProductVersion:	10.6.4
BuildVersion:	10F2061

I build GDAL with and without macosx-framework that doesn't seem to affect.

So, what does it means? 

Regards,

Ivan

>  -------Original Message-------
>  From: William Kyngesburye <woklist@kyngchaos.com>
>  To: Jeff Hamann <jeff.hamann@forestinformatics.com>
>  Cc: gdal-dev <gdal-dev@lists.osgeo.org>
>  Subject: Re: [gdal-dev] can't import osgeo or gdal in python
>  Sent: Sep 20 '10 15:15
>  
>  On Sep 20, 2010, at 12:33 PM, Christopher Barker wrote:
>  
>  > Jeff Hamann wrote:
>  >> Chris, Thanks for responding to my post.
>  >
>  > re-including the gdal list -- I suspect you didn't mean to reply only to me.
>  >
>  >> I'm not using the pre-built frameworks as I'm trying to construct a stack that can be "easily" built, installed, and 
replicated on Linux, FreeBSD (my fav), windows (not so much) and OSX.
>  >
>  > In that case, I'd forget about the framework build -- you might as well keep it as similar to the other *nix's
>  >
>  Well, on its own, the framework build of GDAL is just as easy to built and install as the unix-style library build, and 
could be also considered standard.
>  
>  As a stack, I like to think my frameworks and packages are a de facto standard, though I don't promote that as 
much as I should.??There are build scripts for all but GDAL (maybe I'll clean that one up someday, but it's not a high 
priority since the GDAL source has a framework option), so it's easily replicated.
>  
>  >>>> When I try to "run" (again newbie
>  >>>> talking here, so be patient), a python script and import gdal:
>  >
>  >>>> /Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so
>  >>>> Expected in: flat namespace
>  >
>  > This is something I know next to nothign abuot, but I know there is something in OS-X with things being build 
with either "flat" or "nested" namespaces -- perhaps those have gotten confused with your build? Did you build your 
own Python?
>  
>  flat/two-level namespaces are a way to internally organize the external library functions ("symbols") used by a library 
or program.??With flat (linux-like), the library name is not recorded, so it looks in each loaded library for the function, 
which can be slow.??With two-level, the library name is stored along with the function name, so it only needs to look 
in that library.
>  
>  When a function is not found, with a flat namespace the error can't tell you where it was expecting to find it??But 
with a two-level namespace, the error can tell you the library name, which helps figure out where the problem is.
>  
>  So, your error only means it can find CPLDefaultErrorHandler(), but it doesn't know where it's supposed to be.??The 
flat namespace isn't necessarily the source of the problem (though it can lead to problems finding symbols that are 
loaded).
>  
>  The default in recent versions of the OSX development tools is two-level.??It has changed a couple times in the 
past.??In the early porting days one or the other has had problems with *nix ports, and developers have tried to 
hardwire into configure whichever one seemed to work for them (usually that meant forcing flat namespaces).??These 
days namespace issues have been worked out and the default two-level works just fine.
>  
>  Sorry for the long-winded explanation.
>  
>  ... hmm, looking at the GDAL configure, I see that for OS X 10.5 and 10.6 it does not add the flat-namespace 
option to the GDAL library linking, but it does for earlier versions (at least it looks like it does).??Are you setting 
MACOSX_DEPLOYMENT_TARGET before configuring?
>  
>  -----
>  William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>  http://www.kyngchaos.com/
>  
>  All generalizations are dangerous, even this one.
>  
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From woklist at kyngchaos.com  Mon Sep 20 20:54:13 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Sep 20 20:54:17 2010
Subject: [gdal-dev] can't import osgeo or gdal in python
In-Reply-To: <20100920235431.2506.qmail@s466.sureserver.com>
References: <20100920235431.2506.qmail@s466.sureserver.com>
Message-ID: <3F2E7325-3641-4C0D-9214-70929DAC1F66@kyngchaos.com>

For both of you, it now sounds like the _gdal.so might not be linking libgdal at all.

What does this return:

otool -L /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/osgeo/_gdal.so

On Sep 20, 2010, at 6:54 PM, Ivan Lucena wrote:

> Hi guys,
> 
> Sorry to interrupt but I was having the exact same error as Jeff and I was following the discussion quite close.
> 
> But I found a solution. I can get it to work as long as if I use python2.6:
> 
> turtlebowl:~ ilucena$ python2.6
> Python 2.6.1 (r261:67515, Feb 11 2010, 00:51:29) 
> [GCC 4.2.1 (Apple Inc. build 5646)] on darwin
> Type "help", "copyright", "credits" or "license" for more information.
>>>> from osgeo import gdal
>>>> drv = gdal.GetDriverByName("GTIFF")
>>>> print drv
> <osgeo.gdal.Driver; proxy of <Swig Object of type 'GDALDriverShadow *' at 0x1002596a0> >
>>>> ^D
> 
> But if I use the default python,  2.7 - that I download binaries from python.org and run the installer from the dmg, 
> that is what I got:
> 
> turtlebowl:~ ilucena$ python
> Python 2.7 (r27:82508, Jul  3 2010, 20:17:05) 
> [GCC 4.0.1 (Apple Inc. build 5493)] on darwin
> Type "help", "copyright", "credits" or "license" for more information.
>>>> from osgeo import gdal
> Traceback (most recent call last):
>  File "<stdin>", line 1, in <module>
>  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/osgeo/__init__.py", line 21, 
> in <module>
>    _gdal = swig_import_helper()
>  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/osgeo/__init__.py", line 17, 
> in swig_import_helper
>    _mod = imp.load_module('_gdal', fp, pathname, description)
> ImportError: dlopen(/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/osgeo/_gdal.so, 
> 2): Symbol not found: _CPLDefaultErrorHandler
>  Referenced from: /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/osgeo/_gdal.so
>  Expected in: dynamic lookup
> 
> Just like Jeff.
> 
> This is my system:
> 
> turtlebowl:~ ilucena$ sw_vers
> ProductName:	Mac OS X
> ProductVersion:	10.6.4
> BuildVersion:	10F2061
> 
> I build GDAL with and without macosx-framework that doesn't seem to affect.
> 
> So, what does it means? 
> 
> Regards,

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying, fighting, and all for things that the beasts of the jungle would not deign to possess - money to purchase the effeminate pleasures of weaklings.  And yet withal bound down by silly customs that make them slaves to their unhappy lot while firm in the belief that they be the lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From woklist at kyngchaos.com  Mon Sep 20 20:57:27 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Sep 20 20:57:30 2010
Subject: [gdal-dev] can't import osgeo or gdal in python
In-Reply-To: <2768F3C4-CBD6-492D-8DE8-2BC84A641DDE@forestinformatics.com>
References: <2768F3C4-CBD6-492D-8DE8-2BC84A641DDE@forestinformatics.com>
Message-ID: <CF48615D-E2EE-4110-9DA1-471E8EBF13A5@kyngchaos.com>

On Sep 17, 2010, at 11:30 AM, Jeff Hamann wrote:

> ImportError: dlopen(/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so, 2): Symbol not found: _CPLDefaultErrorHandler
>   Referenced from: /Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so
>   Expected in: flat namespace
>  in /Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so
> >>> 
> 


hmmm, Jeff, how are you getting an egg?  From what I can understand of the makefiles, it doesn't install an egg by default, and you have to make that separately with "make egg", and even then I don't know if that will be installed by "make install".

I wonder if you have previously installed the GDAL-python extension by another method (installing the egg), which is then overriding your install from source.  And whichever GDAL it was expecting to find is not present any more.

Do you have this folder:

/Library/Python/2.6/site-packages/osgeo/


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

All generalizations are dangerous, even this one.


From ivan.lucena at pmldnet.com  Mon Sep 20 21:43:41 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon Sep 20 21:43:43 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gY2FuJ3QgaW1wb3J0IG9zZ2VvIG9yIGdkYWwgaW4gcHl0aG9u?=
Message-ID: <20100921014341.5192.qmail@s466.sureserver.com>

Well, I am following other lead.

I am trying to uninstall the python.org 2.7 and use only the 2.6 from Apple that is actually working well with GDAL.

I did some search and found that tip on python bug report issue7107 on how to uninstall python from OS X:

http://bugs.python.org/issue7107

Regards,

Ivan

>  -------Original Message-------
>  From: William Kyngesburye <woklist@kyngchaos.com>
>  To: Ivan Lucena <ivan.lucena@pmldnet.com>
>  Cc: gdal-dev <gdal-dev@lists.osgeo.org>
>  Subject: Re: [gdal-dev] can't import osgeo or gdal in python
>  Sent: Sep 20 '10 19:54
>  
>  For both of you, it now sounds like the _gdal.so might not be linking libgdal at all.
>  
>  What does this return:
>  
>  otool -L /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/osgeo/_gdal.so
>  

From ivan.lucena at pmldnet.com  Mon Sep 20 22:37:32 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon Sep 20 22:37:34 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gY2FuJ3QgaW1wb3J0IG9zZ2VvIG9yIGdkYWwgaW4gcHl0aG9u?=
Message-ID: <20100921023732.20669.qmail@s466.sureserver.com>

I got some good news!

It is working pretty good. See:

Last login: Mon Sep 20 19:08:28 on ttys002
turtlebowl:~ ilucena$ python
Python 2.6.1 (r261:67515, Feb 11 2010, 00:51:29) 
[GCC 4.2.1 (Apple Inc. build 5646)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> from osgeo import gdal
>>> drv = gdal.GetDriverByName("GTIFF")
>>> print drv.GetDescription()
GTiff
>>> 

In my case, I install Python 2.7 so it was easier to notice that I was not running Apples's installation of Python 2.6.

Anyway, the instruction are relatively accurate at issue7107 but basically, all you need to do is that:

ln -s /usr/bin/python2.6 /usr/bin/python

Note that running "make generate; setup.py build; setup.py install" with Apple's Python is a little bit scarier now, full of 
warning but it works.

Regards,

Ivan

>  -------Original Message-------
>  From: Ivan Lucena <ivan.lucena@pmldnet.com>
>  To: William Kyngesburye <kyngchaos@kyngchaos.com>
>  Cc: gdal-dev <gdal-dev@lists.osgeo.org>
>  Subject: Re: [gdal-dev] can't import osgeo or gdal in python
>  Sent: Sep 20 '10 20:43
>  
>  Well, I am following other lead.
>  
>  I am trying to uninstall the python.org 2.7 and use only the 2.6 from Apple that is actually working well with GDAL.
>  
>  I did some search and found that tip on python bug report issue7107 on how to uninstall python from OS X:
>  
>  http://bugs.python.org/issue7107
>  
>  Regards,
>  
>  Ivan
>  
>  >??-------Original Message-------
>  >??From: William Kyngesburye <woklist@kyngchaos.com>
>  >??To: Ivan Lucena <ivan.lucena@pmldnet.com>
>  >??Cc: gdal-dev <gdal-dev@lists.osgeo.org>
>  >??Subject: Re: [gdal-dev] can't import osgeo or gdal in python
>  >??Sent: Sep 20 '10 19:54
>  >??
>  >??For both of you, it now sounds like the _gdal.so might not be linking libgdal at all.
>  >??
>  >??What does this return:
>  >??
>  >??otool -L /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/osgeo/_gdal.so
>  >??
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From woklist at kyngchaos.com  Mon Sep 20 22:53:01 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Sep 20 22:53:05 2010
Subject: [gdal-dev] can't import osgeo or gdal in python
In-Reply-To: <20100921023732.20669.qmail@s466.sureserver.com>
References: <20100921023732.20669.qmail@s466.sureserver.com>
Message-ID: <353B7A85-7CFF-4D69-B90C-1D6AB65BE4F3@kyngchaos.com>

On Sep 20, 2010, at 9:37 PM, Ivan Lucena wrote:

> I got some good news!
> 
> It is working pretty good. See:
> 
> Last login: Mon Sep 20 19:08:28 on ttys002
> turtlebowl:~ ilucena$ python
> Python 2.6.1 (r261:67515, Feb 11 2010, 00:51:29) 
> [GCC 4.2.1 (Apple Inc. build 5646)] on darwin
> Type "help", "copyright", "credits" or "license" for more information.
>>>> from osgeo import gdal
>>>> drv = gdal.GetDriverByName("GTIFF")
>>>> print drv.GetDescription()
> GTiff
>>>> 
> 
> In my case, I install Python 2.7 so it was easier to notice that I was not running Apples's installation of Python 2.6.
> 
> Anyway, the instruction are relatively accurate at issue7107 but basically, all you need to do is that:
> 
> ln -s /usr/bin/python2.6 /usr/bin/python
> 
Ah, something must have deleted this file.  This exists on a clean OS X install.  And, more correctly, the files are more complicated:

/usr/bin/python and its companions /usr/bin/pythonw are Apple-special python executables.  These will drop to 32bit mode when based on an environment variable.  This is non-standard behavior (for python), and strangely these executables don't respond to the arch command to force an executable to run with a given architecture (the standard way for any program).  I think pythonw may also automatically always drop to 32bit mode because it assume you're running a wxpython GUI program, which is 32bit-only.

If these were deleted somehow, the only way to recover them (for out-of-the-box OS X Python behavior) is to reinstall the system or recover them from a backup.

/usr/bin/python2.6 and other variations of pythonw and 2.5 and 2.6 versions are all symlinks to the executable in the python framework.  These respond normally to the arch command.  These are the same as what you get with a source build or from the python.org installers.

> Note that running "make generate; setup.py build; setup.py install" with Apple's Python is a little bit scarier now, full of 
> warning but it works.
> 
> Regards,
> 
> Ivan
> 
>> -------Original Message-------
>> From: Ivan Lucena <ivan.lucena@pmldnet.com>
>> To: William Kyngesburye <kyngchaos@kyngchaos.com>
>> Cc: gdal-dev <gdal-dev@lists.osgeo.org>
>> Subject: Re: [gdal-dev] can't import osgeo or gdal in python
>> Sent: Sep 20 '10 20:43
>> 
>> Well, I am following other lead.
>> 
>> I am trying to uninstall the python.org 2.7 and use only the 2.6 from Apple that is actually working well with GDAL.
>> 
>> I did some search and found that tip on python bug report issue7107 on how to uninstall python from OS X:
>> 
>> http://bugs.python.org/issue7107
>> 
>> Regards,
>> 
>> Ivan

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy


From ivan.lucena at pmldnet.com  Tue Sep 21 01:51:00 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Sep 21 01:57:42 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gY2FuJ3QgaW1wb3J0IG9zZ2VvIG9yIGdkYWwgaW4gcHl0aG9u?=
Message-ID: <20100921055100.32374.qmail@s466.sureserver.com>

William,

>  -------Original Message-------
>  From: William Kyngesburye <woklist@kyngchaos.com>
>  To: Ivan Lucena <ivan.lucena@pmldnet.com>
>  Cc: gdal-dev <gdal-dev@lists.osgeo.org>
>  Subject: Re: [gdal-dev] can't import osgeo or gdal in python
>  Sent: Sep 20 '10 21:53
>  
>  On Sep 20, 2010, at 9:37 PM, Ivan Lucena wrote:
>  
>  > I got some good news!
>  >
>  > It is working pretty good. See:
>  >
>  > Last login: Mon Sep 20 19:08:28 on ttys002
>  > turtlebowl:~ ilucena$ python
>  > Python 2.6.1 (r261:67515, Feb 11 2010, 00:51:29)
>  > [GCC 4.2.1 (Apple Inc. build 5646)] on darwin
>  > Type "help", "copyright", "credits" or "license" for more information.
>  >>>> from osgeo import gdal
>  >>>> drv = gdal.GetDriverByName("GTIFF")
>  >>>> print drv.GetDescription()
>  > GTiff
>  >>>>
>  >
>  > In my case, I install Python 2.7 so it was easier to notice that I was not running Apples's installation of Python 
2.6.
>  >
>  > Anyway, the instruction are relatively accurate at issue7107 but basically, all you need to do is that:
>  >
>  > ln -s /usr/bin/python2.6 /usr/bin/python

Looking back to my log, that command didn't get through, it returned "file already exist". 

My bad. I should have said "get rid of the PATH entries added by the python.org installer in your .profile" 

I understand that your following comments are based on my wrong statement but they are important to me anyway.

>  >
>  Ah, something must have deleted this file.??This exists on a clean OS X install.??And, more correctly, the files are 
more complicated:

I would guess that in a clean OS X Install /usr/bin/python is a symbolic link to:

/System/Library/Frameworks/Python.framework/Versions/2.6/bin/python2.6

Am I right?

I followed the instruction on issue7107 and now I have a "ghost" Python.framework at:

/Library/Frameworks/Python.framework/Versions/2.7

But that should not affect anything. Right? That is not the official Apple's Python installation. Correct me if I am 
wrong.

So now, when I type "python" the system is not going to find the "python" executable that existed over there but it 
will find the /usr/bin/python symbolic link instead. Is that a good thing or not? Am I missing something?

Note that the site-package is in another corner:

$ ls /Library/Python/2.6/site-packages/
GDAL-1.7.0-py2.6-macosx-10.6-universal.egg	easy-install.pth
README						numpy-1.5.0-py2.6-macosx-10.6-universal.egg

That seems to be shared by everybody.

>  
>  /usr/bin/python and its companions /usr/bin/pythonw are Apple-special python executables.??These will drop to 
32bit mode when based on an environment variable.??This is non-standard behavior (for python), and strangely these 
executables don't respond to the arch command to force an executable to run with a given architecture (the standard 
way for any program).??I think pythonw may also automatically always drop to 32bit mode because it assume you're 
running a wxpython GUI program, which is 32bit-only.

That is very interesting. I will certainly investigate more about it. I have just 4 days of OS X experience, BTW.

>  
>  If these were deleted somehow, the only way to recover them (for out-of-the-box OS X Python behavior) is to 
reinstall the system or recover them from a backup.
>  
>  /usr/bin/python2.6 and other variations of pythonw and 2.5 and 2.6 versions are all symlinks to the executable in 
the python framework.??These respond normally to the arch command.??These are the same as what you get with a 
source build or from the python.org installers.

There are three versions of python on /System/Library/Frameworks/Python.framework/Versions:

$ ls /System/Library/Frameworks/Python.framework/Versions
2.3	2.5	2.6	Current

They all look health and in good shape so there is no reason for panic. That is what I am trying to convince myself. I 
will examine a fresh installation and compare. Just to make sure.

The key point to me was that the python.org distribution are not compatible with the building process of GDAL python 
wrapper using the gcc from XCode. Doesn't matter what options I run on ./configure.

I should have never installed python anyway. The one that comes with the system is good enough. I did not know 
that.

The solution is to restore the system as it was before the python.org installation. I could just remove/comment the 
entries on my .profile and I could also remove the Python.framework from the python.org installation. I did both.

Do you think that a solution like that would also work for Jeff?

My best regards,

Ivan

>  
>  > Note that running "make generate; setup.py build; setup.py install" with Apple's Python is a little bit scarier now, 
full of
>  > warning but it works.
>  >
>  > Regards,
>  >
>  > Ivan
>  >
>  >> -------Original Message-------
>  >> From: Ivan Lucena <ivan.lucena@pmldnet.com>
>  >> To: William Kyngesburye <kyngchaos@kyngchaos.com>
>  >> Cc: gdal-dev <gdal-dev@lists.osgeo.org>
>  >> Subject: Re: [gdal-dev] can't import osgeo or gdal in python
>  >> Sent: Sep 20 '10 20:43
>  >>
>  >> Well, I am following other lead.
>  >>
>  >> I am trying to uninstall the python.org 2.7 and use only the 2.6 from Apple that is actually working well with 
GDAL.
>  >>
>  >> I did some search and found that tip on python bug report issue7107 on how to uninstall python from OS X:
>  >>
>  >> http://bugs.python.org/issue7107
>  >>
>  >> Regards,
>  >>
>  >> Ivan
>  
>  -----
>  William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>  http://www.kyngchaos.com/
>  
>  "Those people who most want to rule people are, ipso-facto, those least suited to do it."
>  
>  - A rule of the universe, from the HitchHiker's Guide to the Galaxy
>  
>  
>  
From beyhan at deprem.gov.tr  Tue Sep 21 04:07:02 2010
From: beyhan at deprem.gov.tr (Murat Beyhan)
Date: Tue Sep 21 04:09:57 2010
Subject: [gdal-dev] Open failed for OGR connection
In-Reply-To: <20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>
References: <1284389130768-5526582.post@n2.nabble.com>
	<20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>
Message-ID: <1285056422.5716.21.camel@localhost>

Dear friends,

I could not solve the problem for OGR connections.

from terminal I use the following codes and it works fine

[murat@localhost makedaskmap]$ ogrinfo
"MySQL:testogr,user=root,password=mysql_123"
INFO: Open of `MySQL:testogr,user=root,password=mysql_123'
      using driver `MySQL' successful.
1: deniz (Polygon)
2: il_merkezleri (Point)
3: il_sinirlari (Polygon)
4: ilce_merkezleri (Point)
5: ilce_sinirlari (Polygon)
6: iller (Polygon)
7: iller_sil (Polygon)
8: komsular (Polygon) 

But when I try to read data from mysql database it doesn't work for it.
and mapserver gives error as follows

msDrawMap(): Image handling error. Failed to draw layer named 'ilcmrk'.
msOGRFileOpen(): OGR error. Open failed for OGR connection in layer
`ilcmrk'. File not found or unsupported format.

part of map file as follows for the layer ilcmrk

data ilce_merkezleri is stored in Mysql table testogr as point 

I have reganerated the ilce_merkezleri data in MySql database as follows

ogr2ogr -f MySQL MySQL:testogr,user=root,password=mysql_123 ilcmrk.shp
-nln ilce_merkezleri -update -overwrite -lco GEOMETRY_NAME=SHAPE2



LAYER
  connectiontype ogr
 CONNECTION "MySQL:testogr,user=root,password=mysql_123" 
 NAME "ilcmrk"
  DATA ilce_merkezleri
  STATUS default
  TYPE POINT
  CLASS
    NAME "iLCE MERKEZi"
    SYMBOL "cpoint"
    SIZE 1
    COLOR 72 118 255	
  END
END


What is wrong with my procedures. Please help me.
Murat



-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.

From jrepetto at free.fr  Tue Sep 21 04:31:52 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Tue Sep 21 04:41:01 2010
Subject: [gdal-dev] Open failed for OGR connection
In-Reply-To: <1285056422.5716.21.camel@localhost>
References: <1284389130768-5526582.post@n2.nabble.com>	<20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>
	<1285056422.5716.21.camel@localhost>
Message-ID: <4C986D78.1060900@free.fr>

Le 21/09/2010 10:07, Murat Beyhan a ?crit :
> Dear friends,
>
> I could not solve the problem for OGR connections.
>

Hello,

Why did you post your question into the thread "Copy only georeference 
between two images" ?

Please create a new thread.
From beyhan at deprem.gov.tr  Tue Sep 21 04:46:19 2010
From: beyhan at deprem.gov.tr (Murat Beyhan)
Date: Tue Sep 21 04:49:11 2010
Subject: [gdal-dev] Open failed for OGR connection
In-Reply-To: <4C986D78.1060900@free.fr>
References: <1284389130768-5526582.post@n2.nabble.com>
	<20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>
	<1285056422.5716.21.camel@localhost>  <4C986D78.1060900@free.fr>
Message-ID: <1285058779.28101.2.camel@localhost>

Hi 
I'm sorry, please.I could not understood what do you mean.
I didn't use thread what you mention.
I sent my question by using "Open failed for OGR connection"

murat

On Tue, 2010-09-21 at 10:31 +0200, Jean-Claude REPETTO wrote:
> Le 21/09/2010 10:07, Murat Beyhan a ?crit :
> > Dear friends,
> >
> > I could not solve the problem for OGR connections.
> >
> 
> Hello,
> 
> Why did you post your question into the thread "Copy only georeference 
> between two images" ?
> 
> Please create a new thread.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 



-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.

From jrepetto at free.fr  Tue Sep 21 05:24:36 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Tue Sep 21 05:24:42 2010
Subject: [gdal-dev] Open failed for OGR connection
In-Reply-To: <1285058779.28101.2.camel@localhost>
References: <1284389130768-5526582.post@n2.nabble.com>	
	<20100913165208.6o1esk04jk08o0ks@webmail.nvoe.at>	
	<1285056422.5716.21.camel@localhost> <4C986D78.1060900@free.fr>
	<1285058779.28101.2.camel@localhost>
Message-ID: <4C9879D4.2010703@free.fr>

Le 21/09/2010 10:46, Murat Beyhan a ?crit :
> Hi
> I'm sorry, please.I could not understood what do you mean.
> I didn't use thread what you mention.
> I sent my question by using "Open failed for OGR connection"

You replied to the thread "Copy only georeference between two images" 
instead of creating a new message, didn't you ?

Look at the thread on gmane :
http://thread.gmane.org/gmane.comp.gis.gdal.devel/24464


From anders.moe at geocap.no  Tue Sep 21 06:21:52 2010
From: anders.moe at geocap.no (Anders Moe)
Date: Tue Sep 21 06:21:56 2010
Subject: [gdal-dev] Is the OGR SDE driver being maintained ?
Message-ID: <AANLkTikA4i2erj=X1YnfPJ4O9CdeYcAy5d78Hsxr-1Wm@mail.gmail.com>

Hello everyone

I'm generally having some problems with the OGR SDE driver

* lack of UTF support, for example; I reported this almost two years ago,
had to fix this myself in ogrsdedriver
* sql errors when writing to the database

So I was just wondering if there is something going in the 1.8 branch for
this driver, or if I should try a different solution/hacking something in
place  myself.

Cheers,
Anders
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100921/8d1be568/attachment.html
From beyhan at deprem.gov.tr  Tue Sep 21 06:20:31 2010
From: beyhan at deprem.gov.tr (Murat Beyhan)
Date: Tue Sep 21 06:23:49 2010
Subject: [gdal-dev] open failed ogr connection
Message-ID: <1285064431.15425.0.camel@localhost>

Dear friends,

I could not solve the problem for OGR connections.

from terminal I use the following codes and it works fine

[murat@localhost makedaskmap]$ ogrinfo
"MySQL:testogr,user=root,password=mysql_123"
INFO: Open of `MySQL:testogr,user=root,password=mysql_123'
      using driver `MySQL' successful.
1: deniz (Polygon)
2: il_merkezleri (Point)
3: il_sinirlari (Polygon)
4: ilce_merkezleri (Point)
5: ilce_sinirlari (Polygon)
6: iller (Polygon)
7: iller_sil (Polygon)
8: komsular (Polygon) 

But when I try to read data from mysql database it doesn't work for it.
and mapserver gives error as follows

msDrawMap(): Image handling error. Failed to draw layer named 'ilcmrk'.
msOGRFileOpen(): OGR error. Open failed for OGR connection in layer
`ilcmrk'. File not found or unsupported format.

part of map file as follows for the layer ilcmrk

data ilce_merkezleri is stored in Mysql table testogr as point 

I have reganerated the ilce_merkezleri data in MySql database as follows

ogr2ogr -f MySQL MySQL:testogr,user=root,password=mysql_123 ilcmrk.shp
-nln ilce_merkezleri -update -overwrite -lco GEOMETRY_NAME=SHAPE2



LAYER
  connectiontype ogr
 CONNECTION "MySQL:testogr,user=root,password=mysql_123" 
 NAME "ilcmrk"
  DATA ilce_merkezleri
  STATUS default
  TYPE POINT
  CLASS
    NAME "iLCE MERKEZi"
    SYMBOL "cpoint"
    SIZE 1
    COLOR 72 118 255    
  END
END


What is wrong with my procedures. Please help me.
Murat
-- 
Murat BEYHAN
Jeofizik Y.M?h.
T.C. Ba?bakanl?k
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem Dairesi Ba?kanl???
Eski?ehir Yolu 12. Km.
Lodumlu/ANKARA
Tel: 312 2872680-1556
email:beyhan@deprem.gov.tr


-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.

From szekerest at gmail.com  Tue Sep 21 06:57:27 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Sep 21 06:57:31 2010
Subject: [gdal-dev] OGR MS SQL Spatial driver has been added
In-Reply-To: <45B9ABF0CB18404A9DD55291CD708F42@dlq6600>
References: <AANLkTi=quVC=5NDt_v==qPE56eXk2MOzx6-zUrj=4exT@mail.gmail.com>
	<088E77A3F30945D587F5DCE02DDFAD4D@dlq6600>
	<AANLkTinjJ9GDOqjRUT90zGE_pdWx-YckQuej2K88yLtA@mail.gmail.com>
	<13F9C31074FC4C84AED14B8957B7AA53@dlq6600>
	<AANLkTikY0kcjMUrtHQu78Oa37-ck8evM=EbpU+_vN8Du@mail.gmail.com>
	<45B9ABF0CB18404A9DD55291CD708F42@dlq6600>
Message-ID: <AANLkTik0cNzCTUU152mknaKrWeDOSDTNuNFOc0yhsibV@mail.gmail.com>

I've fixed the field order problem in trunk (
http://trac.osgeo.org/gdal/changeset/20660). The corresponding binaries will
be available in the next daily build at http://vbkto.dyndns.org/sdk/.

Best regards,

Tamas


2010/9/21 David Lowther <dlowther@coordinatesolutions.com>

>  Tamas,
>
>
>
> I altered the table and that did indeed fix up my ogrinfo results. I'm
> still not getting anything from Mapserver, but I am preparing a basic
> mapfile that should make testing easier.
>
>
>
> David Lowther
>
>
>
> Coordinate Solutions, Inc.
>
>
>   ------------------------------
>
> *From:* Tamas Szekeres [mailto:szekerest@gmail.com]
> *Sent:* Monday, September 20, 2010 6:06 PM
>
> *To:* David Lowther
> *Cc:* gdal-dev
> *Subject:* Re: [gdal-dev] OGR MS SQL Spatial driver has been added
>
>
>
> David,
>
> The driver assumes that the first field is the fid and the second is the
> geometry column in the table. This doesn't appear to be a problem until the
> table has been created by the same driver.
> However in your case the field ordering doesn't follow this pattern. For a
> workaround you may modify your table as follows:
>
> select [PKey], [Feature], [SpatialDataKey], [StartX], [StartY] into
> MetesAndBoundsHeader2 from MetesAndBoundsHeader
> ALTER TABLE dbo.MetesAndBoundsHeader2 ADD CONSTRAINT
> PK_MetesAndBoundsHeader2 PRIMARY KEY CLUSTERED (PKey)
>
> and then do the same test with MetesAndBoundsHeader2. (Hopefully this will
> solve the mapserver issue as well)
>
>
> I consider this to be a bug in the driver and I'll correct this issue
> tomorrow so as to allow the columns defined in arbitrary field order.
>
> Best regards,
>
> Tamas
>
>
>
>
>  2010/9/20 David Lowther <dlowther@coordinatesolutions.com>
>
> CREATE TABLE [dbo].[MetesAndBoundsHeader](
>
>       [PKey] [int] IDENTITY(1,1) NOT NULL,
>
>       [SpatialDataKey] [int] NULL,
>
>       [StartX] [decimal](18, 4) NULL,
>
>       [StartY] [decimal](18, 4) NULL,
>
>       [Feature] [geometry] NULL,
>
>  CONSTRAINT [PK_MetesAndBoundsDescription] PRIMARY KEY CLUSTERED
>
> (
>
>       [PKey] ASC
>
> )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY =
> OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
>
> ) ON [PRIMARY]
>
> GO
>
> SET IDENTITY_INSERT [dbo].[MetesAndBoundsHeader] ON
>
> INSERT [dbo].[MetesAndBoundsHeader] ([PKey], [SpatialDataKey], [StartX],[StartY]
> , [Feature]) VALUES (8, 7, CAST(463644.9082 AS Decimal(18, 4)), CAST(1484517.3764
> AS Decimal(18, 4)),0xE60E00000104050000009A999999734C1C4100000000E5A636419A999999734C1C4100000000F5CD36419A99999939B01B4100000000A4CE36419A99999939B01B410000000094A736419A999999734C1C4100000000E5A6364101000000020000000001000000FFFFFFFF0000000003
> )
>
> INSERT [dbo].[MetesAndBoundsHeader] ([PKey], [SpatialDataKey], [StartX],[StartY]
> , [Feature]) VALUES (9, 8, CAST(416571.3699 AS Decimal(18, 4)), CAST(1465354.3699
> AS Decimal(18, 4)),0xE60E00000104050000009A999999ED6C1941000000000A5C36419A999999ED6C1941000000001A8336419A999999B3D0184100000000C98336419A999999B3D0184100000000B95C36419A999999ED6C1941000000000A5C364101000000020000000001000000FFFFFFFF0000000003
> )
>
> SET IDENTITY_INSERT [dbo].[MetesAndBoundsHeader] OFF
>
>
>
>
>
> David Lowther
>
>
>
> Coordinate Solutions, Inc.
>
>
>   ------------------------------
>
> *From:* Tamas Szekeres [mailto:szekerest@gmail.com]
> *Sent:* Monday, September 20, 2010 4:56 PM
> *To:* David Lowther
> *Cc:* gdal-dev
> *Subject:* Re: [gdal-dev] OGR MS SQL Spatial driver has been added
>
>
>
>
>
> 2010/9/20 David Lowther <dlowther@coordinatesolutions.com>
>
>
>
> It seems almost as if there is an index off in the field information.
>
>
>
>
> David,
>
> That's strange indeed. What is the database type of this field in the
> table? Could you provide your test data to reproduce this?
>
>
>
>  I am also not seeing any features when I render the layer in Mapserver
> (though that could be any number of things as I am just getting started with
> OGR MSSQL in Mapserver).
>
>
>
>
> It would be helpful to see your mapfile to make sure about the problem.
>
>
> Best regards,
>
> Tamas
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100921/36944276/attachment-0001.html
From ahmettemiz88 at gmail.com  Tue Sep 21 07:54:23 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Tue Sep 21 07:54:26 2010
Subject: [gdal-dev] problem in gdal_fillnodata.py
Message-ID: <AANLkTimhJ9M5sQOvQDVyB1GUVX-mU-A2ZAyHB+i_4NYw@mail.gmail.com>

hello

Could you tell me what the problem was ?


orkun@orkun-desktop:~/data/pro1001/yuk$ python gdal_fillnodata.py -md
100 work1.tif dem1.tif
Traceback (most recent call last):
  File "/usr/local/gdal/swig/python/scripts/gdal_fillnodata.py", line
34, in <module>
    import gdal
  File "/usr/local/lib/python2.5/site-packages/gdal.py", line 2, in <module>
    from osgeo.gdal import deprecation_warn
  File "/usr/local/lib/python2.5/site-packages/osgeo/__init__.py",
line 24, in <module>
    import _gdal
ImportError: /usr/local/lib/python2.5/site-packages/osgeo/_gdal.so:
undefined symbol: GDALSetRasterUnitType



how can I solve the problem

regards
From hobu.inc at gmail.com  Tue Sep 21 08:51:12 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Sep 21 08:51:21 2010
Subject: [gdal-dev] Is the OGR SDE driver being maintained ?
In-Reply-To: <AANLkTikA4i2erj=X1YnfPJ4O9CdeYcAy5d78Hsxr-1Wm@mail.gmail.com>
References: <AANLkTikA4i2erj=X1YnfPJ4O9CdeYcAy5d78Hsxr-1Wm@mail.gmail.com>
Message-ID: <DE2FF5EB-529D-4FB9-93CD-B71C88E63772@gmail.com>


On Sep 21, 2010, at 5:21 AM, Anders Moe wrote:

> Hello everyone
> 
> I'm generally having some problems with the OGR SDE driver
> 
> * lack of UTF support, for example; I reported this almost two years ago, had to fix this myself in ogrsdedriver
> * sql errors when writing to the database
> 
> So I was just wondering if there is something going in the 1.8 branch for this driver, or if I should try a different solution/hacking something in place  myself. 

I would say that the OGR SDE (and MapServer SDE too, for that matter) is looking for a maintainer.  I no longer have the ability to maintain it as I do not have the pieces (SDE) to test with.  

Howard

From warmerdam at pobox.com  Tue Sep 21 10:38:00 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 21 10:38:05 2010
Subject: [gdal-dev] problem in gdal_fillnodata.py
In-Reply-To: <AANLkTimhJ9M5sQOvQDVyB1GUVX-mU-A2ZAyHB+i_4NYw@mail.gmail.com>
References: <AANLkTimhJ9M5sQOvQDVyB1GUVX-mU-A2ZAyHB+i_4NYw@mail.gmail.com>
Message-ID: <4C98C348.50907@pobox.com>

ahmet temiz wrote:
> hello
> 
> Could you tell me what the problem was ?
> 
> 
> orkun@orkun-desktop:~/data/pro1001/yuk$ python gdal_fillnodata.py -md
> 100 work1.tif dem1.tif
> Traceback (most recent call last):
>   File "/usr/local/gdal/swig/python/scripts/gdal_fillnodata.py", line
> 34, in <module>
>     import gdal
>   File "/usr/local/lib/python2.5/site-packages/gdal.py", line 2, in <module>
>     from osgeo.gdal import deprecation_warn
>   File "/usr/local/lib/python2.5/site-packages/osgeo/__init__.py",
> line 24, in <module>
>     import _gdal
> ImportError: /usr/local/lib/python2.5/site-packages/osgeo/_gdal.so:
> undefined symbol: GDALSetRasterUnitType

Ahmet,

Hmm, funky.  Perhaps you have multiple versions of libgdal.so
installed on your system and an older one is being picked up at runtime?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From chaitanya.ch at gmail.com  Tue Sep 21 12:42:58 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Sep 21 12:43:01 2010
Subject: [gdal-dev] Is the OGR SDE driver being maintained ?
In-Reply-To: <DE2FF5EB-529D-4FB9-93CD-B71C88E63772@gmail.com>
References: <AANLkTikA4i2erj=X1YnfPJ4O9CdeYcAy5d78Hsxr-1Wm@mail.gmail.com>
	<DE2FF5EB-529D-4FB9-93CD-B71C88E63772@gmail.com>
Message-ID: <AANLkTinqvFiFMAK3pGsdRo5iRrViBh4kns95Beck06zz@mail.gmail.com>

Hi,

I'm thinking about taking this up if and when I get a license for this.
In any case, this will take some time.

On Tue, Sep 21, 2010 at 6:21 PM, Howard Butler <hobu.inc@gmail.com> wrote:

>
> On Sep 21, 2010, at 5:21 AM, Anders Moe wrote:
>
> > Hello everyone
> >
> > I'm generally having some problems with the OGR SDE driver
> >
> > * lack of UTF support, for example; I reported this almost two years ago,
> had to fix this myself in ogrsdedriver
> > * sql errors when writing to the database
> >
> > So I was just wondering if there is something going in the 1.8 branch for
> this driver, or if I should try a different solution/hacking something in
> place  myself.
>
> I would say that the OGR SDE (and MapServer SDE too, for that matter) is
> looking for a maintainer.  I no longer have the ability to maintain it as I
> do not have the pieces (SDE) to test with.
>
> Howard
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100921/9ea1e10d/attachment.html
From ahmettemiz88 at gmail.com  Tue Sep 21 15:02:25 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Tue Sep 21 15:02:27 2010
Subject: [gdal-dev] legend of the dem ?
Message-ID: <AANLkTi=q8229sUQrHhbw7qLNnA5ieHOOz5CWadN01O2r@mail.gmail.com>

I used gdaldem color-relief and  created the map.

Now, how can I generate the legend of the dem ?

kind regards
From ahmettemiz88 at gmail.com  Tue Sep 21 15:42:46 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Tue Sep 21 15:42:48 2010
Subject: [gdal-dev] legend of the dem ?
In-Reply-To: <AANLkTikeC9U0R41zew4ech48+qhgXMis_LvCdb5QO1vQ@mail.gmail.com>
References: <AANLkTi=q8229sUQrHhbw7qLNnA5ieHOOz5CWadN01O2r@mail.gmail.com>
	<AANLkTikeC9U0R41zew4ech48+qhgXMis_LvCdb5QO1vQ@mail.gmail.com>
Message-ID: <AANLkTimXT7SVPHi0zQHpzZHM0SpuDCmAOevNs95a1_6a@mail.gmail.com>

So, what are they ?

2010/9/21 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> ahmet,
> You have to create a legend of the dem from the color configuration file
> using some other tool.
>
> On Wed, Sep 22, 2010 at 12:32 AM, ahmet temiz <ahmettemiz88@gmail.com>
> wrote:
>>
>> I used gdaldem color-relief and ?created the map.
>>
>> Now, how can I generate the legend of the dem ?
>>
>> kind regards
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
From warmerdam at pobox.com  Tue Sep 21 15:49:33 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 21 15:49:37 2010
Subject: [gdal-dev] RFC 30: Unicode Filenames - call for discussion
In-Reply-To: <AANLkTimPj2zWCRzz6dLCnAek0hniCY4yfVpJJxqQCirQ@mail.gmail.com>
References: <4C903C08.9070302@pobox.com>
	<AANLkTimPj2zWCRzz6dLCnAek0hniCY4yfVpJJxqQCirQ@mail.gmail.com>
Message-ID: <4C990C4D.5020704@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> How do we know whether an unicode on an ansi string mapping should be 
> actually done in the bindings? With respect to the C# bindings the 
> strings are normally maintained as unicode in the C# side however the 
> default conversion option is "Charset.Ansi" in the interface causing the 
> character conversion is done automatically. When marshaling the 
> stringlist values a custom code in typemaps_csharp.i use 
> System.Runtime.InteropServices.Marshal.PtrToStringAnsi explicitly.
> 
> All of this mapping could also be set to unicode as well, however it's 
> not clear to me how to decide whether ansi or unicode mapping should 
> actually be done. Or do we intend to create 2 versions of each functions 
> enumerated in  RFC 30?  Recall to switch between the unicode and ansi 
> versions of the WinAPI functions (like CreatefileW or CreateFileA) are 
> normally selected 'globally' by using a compiler flag.

Tamas,

The intention of the RFC is that all filenames will be treated as utf-8.
You mention a Changeset.Ansi converter.  I assume it is also possible to
do a unicode to utf-8 conversion at the swig interface?  It sounds like
all strings that are supposed to be utf-8 as opposed to "locale dependent
C strings" should be identified and a different typemap used for them.
Does that make sense?  I have made some note of this in the RFC but I'm
not in a great position to fool with the C# bindings so I'm hoping you
will help with them.

I'll note that all the OGR string and stringlist field reading and writing
should also be handled as if the strings are utf-8 per RFC 23.  Is that
done currently?

   http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode

It would be nice if there is some resilience in the face of filenames
coming back that are not valid utf-8.  I think if the CPL conversion
functions are used this will come "for free".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Sep 21 15:59:06 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 21 15:59:11 2010
Subject: [gdal-dev] RFC 30: Unicode Filenames - call for discussion
In-Reply-To: <4C911513.6000504@noaa.gov>
References: <4C903C08.9070302@pobox.com> <4C911513.6000504@noaa.gov>
Message-ID: <4C990E8A.5080408@pobox.com>

Christopher Barker wrote:
> Frank,
> 
> This looks great!
> 
> One comment about the python bindings:
> 
> """
> In theory functions that return filenames, such as gdal.ReadDir?() 
> should return unicode strings for filenames, but from my perspective it 
> seems adequate to always return utf-8 strings and let the application 
> translate if needed.
> """
> 
> I think that's a mistake, if an app gets back a utf-8 string it has no 
> way of knowing what the heck it is (accept by knowing the GDAL 
> convention). So it will essentially always have to translate. And it's 
> ripe for bugs, if when testing, the utf-8 string happen to be ascii 
> compatible, things will just work, and then break when some odd 
> character is inserted later in production.
> 
> Better for GDAL to return a unicode object. If the user really needs it 
> as a byte string, they can convert, but the normal stuff like:
> 
> file()
> os.path.*

Chris,

I guess my concern is whether there will be significant backward
compatability problems if the GDAL interfaces that previously returned
regular strings start returning unicode strings in GDAL 1.8.  However,
thinking about it, there aren't many such interfaces that were previously
exposed through GDAL.

On further consideration I agree with you and have updated the RFC to
indicate that APIs like ReadDir() and GetFileList() that return filenames
should return them as unicode objects rather than as regular strings (in
Python).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Sep 21 16:01:29 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 21 16:01:34 2010
Subject: [gdal-dev] RFC 30: Unicode Filenames - call for discussion
In-Reply-To: <4C91125E.1080101@gmail.com>
References: <4C903C08.9070302@pobox.com> <4C90A4B6.2000502@gmail.com>
	<20100915112322.GL3306@moon.overmeer.net> <4C91125E.1080101@gmail.com>
Message-ID: <4C990F19.6090406@pobox.com>

Ari Jolma wrote:
> The idea of this RFC as I understand it is to build a layer into GDAL, 
> which would take care of conversions between utf-8 and utf-16 (Windows 
> end) transparently, thus making it similar to the current case of utf-8 
> filesystem in unix. Everything should work fine as it is now, but I'll 
> add encode (to utf8 by default) to be on the safe side.
> 
> In the case of unix with non utf8 filesystem determining the filename 
> encoding is left for the user. The encoding is by default utf8 but can 
> be changed.

Ari,

I'm a bit uncertain about where we stand on Perl.  Is it true that currently
the filenames are just treated as "plain strings" in Perl and that these
strings have no obvious characterset or encoding associated with them?  If
so I'm not sure that "encoding to utf-8 by default" will necessarily make
sense if they are already in utf-8.  If you "encode to utf-8", is it assumed
the encoding is being done from whatever the locale charset is?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ari.jolma at gmail.com  Tue Sep 21 16:33:14 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue Sep 21 16:33:20 2010
Subject: [gdal-dev] RFC 30: Unicode Filenames - call for discussion
In-Reply-To: <4C990F19.6090406@pobox.com>
References: <4C903C08.9070302@pobox.com> <4C90A4B6.2000502@gmail.com>
	<20100915112322.GL3306@moon.overmeer.net>
	<4C91125E.1080101@gmail.com> <4C990F19.6090406@pobox.com>
Message-ID: <4C99168A.3060709@gmail.com>

On 09/21/2010 10:01 PM, Frank Warmerdam wrote:
> Ari Jolma wrote:
>> The idea of this RFC as I understand it is to build a layer into 
>> GDAL, which would take care of conversions between utf-8 and utf-16 
>> (Windows end) transparently, thus making it similar to the current 
>> case of utf-8 filesystem in unix. Everything should work fine as it 
>> is now, but I'll add encode (to utf8 by default) to be on the safe side.
>>
>> In the case of unix with non utf8 filesystem determining the filename 
>> encoding is left for the user. The encoding is by default utf8 but 
>> can be changed.
>
> Ari,
>
> I'm a bit uncertain about where we stand on Perl.  Is it true that 
> currently
> the filenames are just treated as "plain strings" in Perl

"Plain strings" in Perl are in Perl's internal format that can handle 
unicode text.

> and that these
> strings have no obvious characterset or encoding associated with 
> them?  If
> so I'm not sure that "encoding to utf-8 by default" will necessarily make
> sense if they are already in utf-8.  If you "encode to utf-8", is it 
> assumed
> the encoding is being done from whatever the locale charset is?

Basically Perl should be told what the encoding of text is when it is 
given to it and when text is wanted from Perl it should be told the 
encoding. If GDAL functions assume and produce text in a known format, 
all is well, as we can tell that to Perl.

Best regards,

Ari

>
> Best regards,

From Chris.Barker at noaa.gov  Tue Sep 21 16:38:53 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Sep 21 16:38:55 2010
Subject: [gdal-dev] RFC 30: Unicode Filenames - call for discussion
In-Reply-To: <4C990E8A.5080408@pobox.com>
References: <4C903C08.9070302@pobox.com> <4C911513.6000504@noaa.gov>
	<4C990E8A.5080408@pobox.com>
Message-ID: <4C9917DD.1030005@noaa.gov>

Frank Warmerdam wrote:
> On further consideration I agree with you and have updated the RFC to
> indicate that APIs like ReadDir() and GetFileList() that return filenames
> should return them as unicode objects rather than as regular strings (in
> Python).

sounds good.

Thanks for your work on this, and, as always, for everything you do on 
GDAL/OGR

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From warmerdam at pobox.com  Tue Sep 21 16:48:39 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 21 16:48:46 2010
Subject: [gdal-dev] RFC 30: Unicode Filenames - call for discussion
In-Reply-To: <201009152216.51445.even.rouault@mines-paris.org>
References: <4C903C08.9070302@pobox.com>
	<201009152216.51445.even.rouault@mines-paris.org>
Message-ID: <4C991A27.9080601@pobox.com>

Even Rouault wrote:
> Frank,
> 
> About the question "Do we need to convert to UCS-16 to do parsing or can we 
> safely assume that special characters like '/', '.', '\' and ':' never occur 
> as part of UTF-8 multi-byte sequences?", I was unclear what you really meant, 
> but here are my findings/beliefs :
> * In a UTF-8 string, any (unsigned) byte whose value is <= 127 is guaranteed 
> to be a single-character that is the one defined in the ASCII set (so any 
> multibyte character has bytes whose value is >= 128)
> * Now, if we look at a UCS-16 byte stream, I had a hard time to find the 
> answer. But basically any unicode character >= 0x000 && <= 0xFFFF is directly 
> "converted" into a single 16 bit code-point in UTF-16. If we consider the 
> point character, it's ascii value is 0x2E, and in unicode/UTF-16 it is thus 
> "0x002E". Bit "0x2E2E" is a valid unicode character( '?' , the reversed 
> quotation mark in spanish), we cannot trust the "0x2E" byte found in the 
> UCS-16 byte stream to be always a point character.

Even,

Sorry, I was not clear.  I was wondering if it was safe to assume that a
'/', '\', ':' or '.' character in a utf-8 string would always represent
the corresponding ascii character.  Your response seems to indicate this
is true so we do not need to convert utf-8 strings to ucs-16 before doing
path/extension parsing.  This means we can just leave the parsing functions
as they are.

> About command line applications, I was a bit concerned about backward 
> compatibility because there are existing working applications that pass ANSI 
> non-ascii filenames to gdal command line utilities. I've tested your 
> preliminary implementation with a file containing a '?' (e-acute) character on 
> a Windows platform that I think uses CP1252 (~ ISO-LATIN-1) as the codepage. I 
> expected a failure in the UTF-8 -> UCS-16 translation since the passed filename 
> wasn't UTF-8. It turns out that it actually works, since the utf-8 -> wide 
> char conversion routine in cpl_recode_stub.cpp has a special case : when it 
> doesn't manage to translate a (apparently) multibyte UTF-8 character, it 
> assumes they are CP1252 and convert them into UCS-16 correctly. So this is 
> good news for people having CP1252 as their current code page !
> 
> But apparently, there's a way for command line Windows applications to get 
> their arguments as UCS-16 strings. This could be used to convert them reliably 
> to UTF-8 just afterwards to feed it into GDAL. Here's what I found in MSDN :
> * GetCommandLineW : http://msdn.microsoft.com/en-
> us/library/ms683156%28VS.85%29.aspx
> * CommandLineToArgvW : http://msdn.microsoft.com/en-
> us/library/bb776391%28VS.85%29.aspx

I have confirmed that the above functions can be used to get UCS-2
(wide character) filename arguments that can be successfully converted
to UTF-8 and passed to GDALOpen().  I am hesitant to change all the
GDAL utilities to use this functionality inline; however, it would be
pretty easy to modify the GDALGeneralCmdLineProcessor() and
OGRGeneralCommandLineProcessor() to ignore the passed in
list of options and instead refetch and reparse them using wide
strings on windows.  In the normal use for these functions that would
do the trick nicely, but it will defeat any efforts to do tricky stuff
with these functions (like application injected options).

I will tentatively writeup the RFC to do so despite the possible
downside risks.

> The issue is that, if we go on this route, drivers that still use the old VSI 
> API (posix one) won't work anymore with non-ASCII filenames... So I'm not sure 
> if it's worth the pain : it would be only worth for people using currently 
> successfully the command line utilities with a non-CP1252 code page.

While it is true that exotic characters converted to utf will not
work with fopen() (underlying VSIFOpen()) I don't see how we are any
worse off then if we didn't do this special processing?

> About Java bindings, nothing to change. Java strings are encoded in unicode 
> (UTF-16) and the typemaps we use already automatically converts to/from UTF-8 
> on the C side (with GetStringUTFChars() from Java to C, and NewStringUTF() 
> from C to Java)

Excellent, I have noted as much in the RFC.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Tue Sep 21 16:53:51 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Sep 21 16:53:58 2010
Subject: [gdal-dev] RFC 30: Unicode Filenames - call for discussion
In-Reply-To: <4C990C4D.5020704@pobox.com>
References: <4C903C08.9070302@pobox.com>
	<AANLkTimPj2zWCRzz6dLCnAek0hniCY4yfVpJJxqQCirQ@mail.gmail.com>
	<4C990C4D.5020704@pobox.com>
Message-ID: <AANLkTimMnmbRsUmksX2mNPD9td2RhROx3HohAGNPNHRV@mail.gmail.com>

2010/9/21 Frank Warmerdam <warmerdam@pobox.com>

>
> The intention of the RFC is that all filenames will be treated as utf-8.
> You mention a Changeset.Ansi converter.  I assume it is also possible to
> do a unicode to utf-8 conversion at the swig interface?  It sounds like
> all strings that are supposed to be utf-8 as opposed to "locale dependent
> C strings" should be identified and a different typemap used for them.
> Does that make sense?  I have made some note of this in the RFC but I'm
> not in a great position to fool with the C# bindings so I'm hoping you
> will help with them.
>
>
Frank,

.Net strings are stored as UTF-16 not UTF-8 so passing UTF8 strings in the
API will require manual marshaling. Currently the default marshaling
behaviour automatically does the UTF-16 to ANSI conversion in the C#
interface.


> I'll note that all the OGR string and stringlist field reading and writing
> should also be handled as if the strings are utf-8 per RFC 23.  Is that
> done currently?
>

No. I'd require the complete list of the functions (and their parameters)
for which such kind of manual marshaling should take place. You did mention
about stringlists which should always be treated as UTF8, it might be true
for OGRFeature.GetFieldAsStringList but not for OGRLayer.CreateLayer for
instance.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100921/b07c2fd6/attachment.html
From warmerdam at pobox.com  Tue Sep 21 19:19:02 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Sep 21 19:19:04 2010
Subject: [gdal-dev] Motion: Adopt RFC 30 on Unicode Filenames
Message-ID: <4C993D66.40501@pobox.com>

Motion: I move to adopt RFC 30: Unicode Filenames.

   http://trac.osgeo.org/gdal/wiki/rfc30_utf8_filenames

--

I have made a variety of adjustments and improvements based on the the
feedback on RFC30.  I think it is now in good enough from to adopt, and
complete implementation.

+1 Frank


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ryantxu at gmail.com  Tue Sep 21 21:02:38 2010
From: ryantxu at gmail.com (Ryan McKinley)
Date: Tue Sep 21 21:02:40 2010
Subject: [gdal-dev] Motion: Adopt RFC 30 on Unicode Filenames
In-Reply-To: <4C993D66.40501@pobox.com>
References: <4C993D66.40501@pobox.com>
Message-ID: <AANLkTinq7OvKG47jG+W03Y5ySrzj_tnG+Qc=OkNSCuuG@mail.gmail.com>

+1


On Tue, Sep 21, 2010 at 7:19 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Motion: I move to adopt RFC 30: Unicode Filenames.
>
> ?http://trac.osgeo.org/gdal/wiki/rfc30_utf8_filenames
>
> --
>
> I have made a variety of adjustments and improvements based on the the
> feedback on RFC30. ?I think it is now in good enough from to adopt, and
> complete implementation.
>
> +1 Frank
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From massimodisasha at yahoo.it  Wed Sep 22 03:07:48 2010
From: massimodisasha at yahoo.it (Massimo Di Stefano)
Date: Wed Sep 22 03:10:10 2010
Subject: [gdal-dev] svn build on mac osx 10.6.4 (errors in GDALmake.opt)
Message-ID: <10876F21-36E8-4B40-9F70-7B96D51ADB29@yahoo.it>

Hi ,

any clue about this message : 

 "GDALmake.opt:50: *** missing separator. Stop. " 

i have it tring to run "make "  
on mac osx  10.6.4

 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
PYTHON_INCLUDES = @PYTHON_INCLUDES@
PYTHON_LIBS = @PYTHON_LIBS@
PYTHON_CFLAGS = @PYTHON_CFLAGS@ @NUMPY_FLAG@
PYTHON = python
PYTHON_DEV = @PYTHON_DEV@
PY_LD_SHARED = @PY_LD_SHARED@
PY_SO_EXT = @PY_SO_EXT@
PY_HAVE_SETUPTOOLS=Leopard libedit detected.
1

# Next Generation SWIG bindings
BINDINGS	=	python 


 (line:9 = line:50 in GDALmake )

i used a "standard " 

 ./configure, 

on gdal svn-trunk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100922/31c06dad/attachment.html
From ahmettemiz88 at gmail.com  Wed Sep 22 04:20:48 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Wed Sep 22 04:20:51 2010
Subject: [gdal-dev] gdal_fillnodata.py doesn't work
Message-ID: <AANLkTinoV6PRO95fw4Q35FtngLe8=W51NUowdMFQnzE6@mail.gmail.com>

hello

can you tell me what this problem is ?

orkun@orkun-desktop:~/data/pro1001/yuk$ python gdal_fillnodata.py -md
100 work1.tif dem1.tif
ERROR 1: libgrass: MAPSET is not set
Aborted

regards
From massimodisasha at gmail.com  Wed Sep 22 04:58:04 2010
From: massimodisasha at gmail.com (Massimo Di Stefano)
Date: Wed Sep 22 05:03:54 2010
Subject: [gdal-dev] svn build on mac osx 10.6.4 (errors in GDALmake.opt)
In-Reply-To: <10876F21-36E8-4B40-9F70-7B96D51ADB29@yahoo.it>
References: <10876F21-36E8-4B40-9F70-7B96D51ADB29@yahoo.it>
Message-ID: <D2D9BEC0-2382-40D0-90CA-2D5B76D6A063@gmail.com>

Fixed using the path to python-config during the ./configure :

--with-python=/usr/bin/python2.6-config


Il giorno 22/set/2010, alle ore 09.07, Massimo Di Stefano ha scritto:

> Hi ,
> 
> any clue about this message : 
> 
>  "GDALmake.opt:50: *** missing separator. Stop. " 
> 
> i have it tring to run "make "  
> on mac osx  10.6.4
> 
>  1
>  2
>  3
>  4
>  5
>  6
>  7
>  8
>  9
> 10
> 11
> 12
> PYTHON_INCLUDES = @PYTHON_INCLUDES@
> PYTHON_LIBS = @PYTHON_LIBS@
> PYTHON_CFLAGS = @PYTHON_CFLAGS@ @NUMPY_FLAG@
> PYTHON = python
> PYTHON_DEV = @PYTHON_DEV@
> PY_LD_SHARED = @PY_LD_SHARED@
> PY_SO_EXT = @PY_SO_EXT@
> PY_HAVE_SETUPTOOLS=Leopard libedit detected.
> 1
> 
> # Next Generation SWIG bindings
> BINDINGS	=	python 
> 
> 
>  (line:9 = line:50 in GDALmake )
> 
> i used a "standard " 
> 
>  ./configure, 
> 
> on gdal svn-trunk
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100922/53db84c4/attachment-0001.html
From chaitanya.ch at gmail.com  Wed Sep 22 06:47:08 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Sep 22 06:47:10 2010
Subject: [gdal-dev] gdal_fillnodata.py doesn't work
In-Reply-To: <AANLkTinoV6PRO95fw4Q35FtngLe8=W51NUowdMFQnzE6@mail.gmail.com>
References: <AANLkTinoV6PRO95fw4Q35FtngLe8=W51NUowdMFQnzE6@mail.gmail.com>
Message-ID: <AANLkTimN_+ZMyEh_YeHHiNCoe3bOjNoUgjDrr5y=0fDO@mail.gmail.com>

ahmet,

This error is reported by the grass library.
Is "work1.tif" in TIFF format? Can you post the output of gdalinfo on
work1.tif for more info?

On Wed, Sep 22, 2010 at 1:50 PM, ahmet temiz <ahmettemiz88@gmail.com> wrote:

> hello
>
> can you tell me what this problem is ?
>
> orkun@orkun-desktop:~/data/pro1001/yuk$ python gdal_fillnodata.py -md
> 100 work1.tif dem1.tif
> ERROR 1: libgrass: MAPSET is not set
> Aborted
>
> regards
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100922/47ba2eb1/attachment.html
From ivan.lucena at pmldnet.com  Wed Sep 22 07:05:40 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed Sep 22 07:05:42 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gc3ZuIGJ1aWxkIG9uIG1hYyBvc3ggMTAuNi40IChlcnJvcnMgaW4gR0RBTG1ha2Uub3B0KQ==?=
Message-ID: <20100922110540.19585.qmail@s466.sureserver.com>

Massimo,

if you just run "/.configure" it should show:

--
...
checking for python bindings... disabled
  ...
  SWIG Bindings:          no
...
--

Then you can just run make and it should be fine. Even if you want to use
GDAL+Python.

Did you install any additional Python distribution on top of what comes
with your Mac?

Send the result of those commands:

% python --version

% printenv | grep python

% whereis python

  Regards,

Ivan


 	-------Original Message-------
  From: Massimo Di Stefano
  To: gdal-dev
  Subject: [gdal-dev] svn build on mac osx 10.6.4 (errors in GDALmake.opt)
  Sent: Sep 22 '10 02:07

  Hi ,


any clue about this message :


 "GDALmake.opt:50: *** missing separator. Stop. "


i have it tring to run "make "
on mac osx  10.6.4


 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12


PYTHON_INCLUDES = @PYTHON_INCLUDES@
PYTHON_LIBS = @PYTHON_LIBS@
PYTHON_CFLAGS = @PYTHON_CFLAGS@ @NUMPY_FLAG@
PYTHON = python
PYTHON_DEV = @PYTHON_DEV@
PY_LD_SHARED = @PY_LD_SHARED@
PY_SO_EXT = @PY_SO_EXT@
PY_HAVE_SETUPTOOLS=Leopard libedit detected.
1

# Next Generation SWIG bindings
BINDINGS	=	python


 (line:9 = line:50 in GDALmake )


i used a "standard "


 ./configure,


on gdal svn-trunk
          --------------------
_______________________________________________
  gdal-dev mailing list
  [LINK: http://mbox.pmldnet.com/compose.php?to=gdal-dev@lists.osgeo.org]
gdal-dev@lists.osgeo.org
  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100922/5f5b6380/attachment.html
From andrew.hartley at metoffice.gov.uk  Wed Sep 22 07:11:28 2010
From: andrew.hartley at metoffice.gov.uk (Hartley, Andrew)
Date: Wed Sep 22 07:11:34 2010
Subject: [gdal-dev] RE: Compression using the create method in python and
	aggregation methods
In-Reply-To: <E40ECC4BCBB70543AB323A3492ACB34604BA25AB@EXXMAIL01.desktop.frd.metoffice.com>
References: <E40ECC4BCBB70543AB323A3492ACB34604BA25AB@EXXMAIL01.desktop.frd.metoffice.com>
Message-ID: <E40ECC4BCBB70543AB323A3492ACB34604BA25AE@EXXMAIL01.desktop.frd.metoffice.com>

> Hi all,
> 
> I'm trying to create a Gtiff with LZW compression using python, with
> the code below, which I wrote with help from the tutorial at
> http://www.gdal.org/gdal_tutorial.html. Gdalinfo tells me that the
> resulting tif ("outfile.tif") has compression (Image Structure
> Metadata: COMPRESSION=LZW), but all my outfiles have the same file
> size and are quite large, so it seems they actually aren't compressed.
> In fact, when I tried:
> 
> gdal_translate -co 'COMPRESS=LZW' outfile.tif newoutfile.tif
> 
the newoutfile.tif is considerably smaller than the original file. So,
this leads me to think that there's a problem with my create() statement
below (see the line in bold below). Could somebody please tell me what I
have missed?

> Since I'm here, I think I will also pick your brains about cell
> aggregation methods. You'll see from the code below that I have writen
> a loop to aggregate only cells with data. I spent a bit of time
> considering a few options (for example, the excellent pages by Dr
> Gomez-Dans -
> http://sites.google.com/site/spatialpython/aggregating-data-to-grid-ce
> lls). My code works reasonably well, but since I have lots of
> processing to do and it is not as fast as I would like, I was
> wondering if anybody could suggest a more efficient solution?
> 
> Thanks very much in advance for any help you may be able to offer me!
> 
> Kind regards,
> Andy
> 
> s = (640,640)
> dt = numpy.dtype('uint16')	
> # reftile is approx 1km resolution raster, with a unique ID for each
> cell for a 5 degree square window
> gscl = gdal.Open (reftile)
> tilescl = g.GetRasterBand(1).ReadAsArray().astype(numpy.uint16)	
> # reftile90 is a 90m resample (using nearest neighbour) of reftile
> g90 = gdal.Open (reftile90)
> tile90 = g.GetRasterBand(1).ReadAsArray().astype(numpy.uint16)	
> 		
> z = numpy.zeros(s, dtype=dt)
> U = unique(tile90[numpy.greater(rec90, 0)])
> lenU = len(U)
> # for each 90m cell with data, aggregate and write to low resolution
> output grid
> for u in range(lenU):
> 	result = numpy.sum(rec90[numpy.equal(tile90, U[u])])
> 	z[numpy.equal(tilescl, U[u])] = result
> # Write out the grid
> outDrv = gdal.GetDriverByName('GTiff')
> out = outDrv.Create("outfile.tif", gscl.RasterXSize, gscl.RasterYSize,
> 1, gdalconst.GDT_UInt16,  [ 'COMPRESS=LZW' ] )
> out.SetProjection(gscl.GetProjection())
> out.SetGeoTransform(gscl.GetGeoTransform())
> out.GetRasterBand(1).WriteArray(z)
> gscl = None
> G90 = None
> out = None
> 
> 
> 
> --
> Andrew Hartley  Climate Impacts Risk Analyst
> Met Office Hadley Centre  FitzRoy Road  Exeter  Devon  EX1 3PB  United
> Kingdom
> Tel: +44 (0)1392 885720  Fax: +44 (0)1392 885681
> Email: andrew.hartley@metoffice.gov.uk  Website: www.metoffice.gov.uk
> 
> See our guide to climate change at
> http://www.metoffice.gov.uk/climatechange/guide/
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100922/10fd2e07/attachment.html
From massimodisasha at yahoo.it  Wed Sep 22 07:08:41 2010
From: massimodisasha at yahoo.it (Massimo Di Stefano)
Date: Wed Sep 22 07:21:42 2010
Subject: [gdal-dev] svn build on mac osx 10.6.4 (errors in GDALmake.opt)
In-Reply-To: <20100922110540.19585.qmail@s466.sureserver.com>
References: <20100922110540.19585.qmail@s466.sureserver.com>
Message-ID: <A2B0AB7D-76A7-478D-8F13-DA0DDD73D8A7@yahoo.it>

Ivan,

$: python --version

Python 2.6.1

$: printenv | grep python

$: whereis python

/usr/bin/python

Thanks!

Massimo.

Il giorno 22/set/2010, alle ore 13.05, Ivan Lucena ha scritto:

> Massimo,
> 
> if you just run "/.configure" it should show:
> 
> --
> ...
> checking for python bindings... disabled
> ...
>   SWIG Bindings:          no
> ...
> --
> 
> Then you can just run make and it should be fine. Even if you want to use GDAL+Python.
> 
> Did you install any additional Python distribution on top of what comes with your Mac?
> 
> Send the result of those commands:
> 
> % python --version
> 
> % printenv | grep python
> 
> % whereis python
> 
> Regards,
> 
> Ivan
>  
> -------Original Message-------
> From: Massimo Di Stefano 
> To: gdal-dev 
> Subject: [gdal-dev] svn build on mac osx 10.6.4 (errors in GDALmake.opt)
> Sent: Sep 22 '10 02:07
> 
> Hi ,
> 
> any clue about this message : 
> 
>  "GDALmake.opt:50: *** missing separator. Stop. " 
> 
> i have it tring to run "make "  
> on mac osx  10.6.4
> 
>  1
>  2
>  3
>  4
>  5
>  6
>  7
>  8
>  9
> 10
> 11
> 12
> PYTHON_INCLUDES = @PYTHON_INCLUDES@
> PYTHON_LIBS = @PYTHON_LIBS@
> PYTHON_CFLAGS = @PYTHON_CFLAGS@ @NUMPY_FLAG@
> PYTHON = python
> PYTHON_DEV = @PYTHON_DEV@
> PY_LD_SHARED = @PY_LD_SHARED@
> PY_SO_EXT = @PY_SO_EXT@
> PY_HAVE_SETUPTOOLS=Leopard libedit detected.
> 1
> 
> # Next Generation SWIG bindings
> BINDINGS	=	python 
> 
> 
>  (line:9 = line:50 in GDALmake )
> 
> i used a "standard " 
> 
>  ./configure, 
> 
> on gdal svn-trunk
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100922/5bc360c5/attachment-0001.html
From ahmettemiz88 at gmail.com  Wed Sep 22 07:23:53 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Wed Sep 22 07:23:57 2010
Subject: [gdal-dev] gdal_fillnodata.py doesn't work
In-Reply-To: <AANLkTimN_+ZMyEh_YeHHiNCoe3bOjNoUgjDrr5y=0fDO@mail.gmail.com>
References: <AANLkTinoV6PRO95fw4Q35FtngLe8=W51NUowdMFQnzE6@mail.gmail.com>
	<AANLkTimN_+ZMyEh_YeHHiNCoe3bOjNoUgjDrr5y=0fDO@mail.gmail.com>
Message-ID: <AANLkTin5=zgF8d_Tznha2yk=O=9odjUvbc8OSeNJa274@mail.gmail.com>

thank you for your interest

here it is:

orkun@orkun-desktop:~/data/pro1001/yuk$ gdalinfo work1.tif
Driver: GTiff/GeoTIFF
Files: work1.tif
Size is 4716, 5481
Coordinate System is `'
Origin = (436921.710000000020955,4648461.900000000372529)
Pixel Size = (20.000000000000000,-20.000000000000000)
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  436921.710, 4648461.900)
Lower Left  (  436921.710, 4538841.900)
Upper Right (  531241.710, 4648461.900)
Lower Right (  531241.710, 4538841.900)
Center      (  484081.710, 4593651.900)
Band 1 Block=4716x1 Type=Float64, ColorInterp=Gray
  NoData Value=0


regards

2010/9/22 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> ahmet,
>
> This error is reported by the grass library.
> Is "work1.tif" in TIFF format? Can you post the output of gdalinfo on
> work1.tif for more info?
>
> On Wed, Sep 22, 2010 at 1:50 PM, ahmet temiz <ahmettemiz88@gmail.com> wrote:
>>
>> hello
>>
>> can you tell me what this problem is ?
>>
>> orkun@orkun-desktop:~/data/pro1001/yuk$ python gdal_fillnodata.py -md
>> 100 work1.tif dem1.tif
>> ERROR 1: libgrass: MAPSET is not set
>> Aborted
>>
>> regards
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
From Chris.Yesson at ioz.ac.uk  Wed Sep 22 06:58:29 2010
From: Chris.Yesson at ioz.ac.uk (Chris Yesson)
Date: Wed Sep 22 07:32:14 2010
Subject: [gdal-dev] RE: gdal_calc.py
References: <20100920160011.24FD3E01FF5@lists.osgeo.org> 
Message-ID: <41E1ED29E5E8E34BBDD8B82CFA1A9D04099E7110@ZSL26.zsl.org>

Thanks to everyone for the comments.  
I have tried to fit the options in with the gdal-calc summer of code
outline.
Vince's code seems to be doing pretty much the same thing as mine but
with slightly different options.
At least if we post one version it will save someone else doing this
again.
I would be happy to provide a bit of support for this code and weave in
small changes if anyone can suggest improvements or find bugs.

Here is a version of my code with the disclaimer that Howard suggested.

http://static.zsl.org/files/gdal-calc-1218.py

- Chris

Dr Chris Yesson
Institute of Zoology
http://www.zsl.org/chrisyesson/



The Zoological Society of London is incorporated by Royal Charter
Principal Office England. Company Number RC000749
Registered address: 
Regent's Park, London, England NW1 4RY
Registered Charity in England and Wales no. 208728 

_________________________________________________________________________
This e-mail has been sent in confidence to the named addressee(s).
If you are not the intended recipient, you must not disclose or distribute
it in any form, and you are asked to contact the sender immediately.
Views or opinions expressed in this communication may not be those
of The Zoological Society of London and, therefore, The Zoological
Society of London does not accept legal responsibility for the contents
of this message. The recipient(s) must be aware that e-mail is not a
secure communication medium and that the contents of this mail may
have been altered by a third party in transit.
If you have any issues regarding this mail please contact:
administrator@zsl.org.
___________________________________________________________________________



This message has been scanned for viruses by MailControl, a service from BlackSpider Technologies.
From ivan.lucena at pmldnet.com  Wed Sep 22 08:08:32 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed Sep 22 08:08:34 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gc3ZuIGJ1aWxkIG9uIG1hYyBvc3ggMTAuNi40IChlcnJvcnMgaW4gR0RBTG1ha2Uub3B0KQ==?=
Message-ID: <20100922120832.6011.qmail@s466.sureserver.com>

Eccellente!

But strange. I have a system just like yours and I don't need to do that. :!

Regards,

Ivan

>  -------Original Message-------
>  From: Massimo Di Stefano <massimodisasha@gmail.com>
>  To: Massimo Di Stefano <massimodisasha@yahoo.it>
>  Cc: gdal-dev <gdal-dev@lists.osgeo.org>
>  Subject: Re: [gdal-dev] svn build on mac osx 10.6.4 (errors in GDALmake.opt)
>  Sent: Sep 22 '10 03:58
>  
>  Fixed using the path to python-config during the ./configure :
>  
>  
>  --with-python=/usr/bin/python2.6-config
>  
>  
>  Il giorno 22/set/2010, alle ore 09.07, Massimo Di Stefano ha scritto:
>  
>  Hi ,
>  
>  
>  any clue about this message :
>  
>  
>  "GDALmake.opt:50: *** missing separator. Stop. "
>  
>  
>  i have it tring to run "make "
>  on mac osx  10.6.4
>  
>  
>  1  2  3  4  5  6  7  8  9 10 11 12
>  
>  
>  PYTHON_INCLUDES = @PYTHON_INCLUDES@ PYTHON_LIBS = @PYTHON_LIBS@
>  PYTHON_CFLAGS = @PYTHON_CFLAGS@ @NUMPY_FLAG@ PYTHON = python PYTHON_DEV =
>  @PYTHON_DEV@ PY_LD_SHARED = @PY_LD_SHARED@ PY_SO_EXT = @PY_SO_EXT@
>  PY_HAVE_SETUPTOOLS=Leopard libedit detected. 1  # Next Generation SWIG
>  bindings BINDINGS	=	python
>  
>  
>  (line:9 = line:50 in GDALmake )
>  
>  
>  i used a "standard "
>  
>  
>  ./configure,
>  
>  
>  on gdal svn-trunk_______________________________________________
>  gdal-dev mailing list
>  [LINK: mailto:gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
From hobu.inc at gmail.com  Wed Sep 22 09:28:13 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Sep 22 09:31:28 2010
Subject: [gdal-dev] RE: gdal_calc.py
In-Reply-To: <41E1ED29E5E8E34BBDD8B82CFA1A9D04099E7110@ZSL26.zsl.org>
References: <20100920160011.24FD3E01FF5@lists.osgeo.org>
	<41E1ED29E5E8E34BBDD8B82CFA1A9D04099E7110@ZSL26.zsl.org>
Message-ID: <2E37F7CA-2698-4436-8CCA-73D626BE62D9@gmail.com>


On Sep 22, 2010, at 5:58 AM, Chris Yesson wrote:

> Thanks to everyone for the comments.  
> I have tried to fit the options in with the gdal-calc summer of code
> outline.
> Vince's code seems to be doing pretty much the same thing as mine but
> with slightly different options.
> At least if we post one version it will save someone else doing this
> again.
> I would be happy to provide a bit of support for this code and weave in
> small changes if anyone can suggest improvements or find bugs.
> 
> Here is a version of my code with the disclaimer that Howard suggested.
> 
> http://static.zsl.org/files/gdal-calc-1218.py


Added.  If you need to make changes, please file tickets and cc me on them and I'll try to apply them.

Thanks again!

Howard
From cjanssen at iavo-rs.com  Wed Sep 22 10:02:45 2010
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Wed Sep 22 10:02:48 2010
Subject: [gdal-dev] Quick dataset close
Message-ID: <AANLkTikPbJq7fSzkSKLPrbafLwo4O5-y3RLopE5d72i2@mail.gmail.com>

Is there a way to quickly close a large dataset using the API? For instance,
I'm writing to very large TIFF file at which point the user cancels, the
code in turn stops what it's doing, closes the dataset, and deletes the
file. The problem is, since the file is around 5GB the close dataset
function will flush out the remaining file since it believes I'm done
writing, where in reality I would prefer it to just close it, leaving it in
an invalid state, so I can promptly delete it (or GDAL could close and
delete it itself if it wanted doesn't matter to me). Thanks.

Christiaan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100922/19bb6fdc/attachment.html
From warmerdam at pobox.com  Wed Sep 22 10:15:49 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep 22 10:15:54 2010
Subject: [gdal-dev] Quick dataset close
In-Reply-To: <AANLkTikPbJq7fSzkSKLPrbafLwo4O5-y3RLopE5d72i2@mail.gmail.com>
References: <AANLkTikPbJq7fSzkSKLPrbafLwo4O5-y3RLopE5d72i2@mail.gmail.com>
Message-ID: <4C9A0F95.2000205@pobox.com>

Christiaan Janssen wrote:
> Is there a way to quickly close a large dataset using the API? For 
> instance, I'm writing to very large TIFF file at which point the user 
> cancels, the code in turn stops what it's doing, closes the dataset, and 
> deletes the file. The problem is, since the file is around 5GB the close 
> dataset function will flush out the remaining file since it believes I'm 
> done writing, where in reality I would prefer it to just close it, 
> leaving it in an invalid state, so I can promptly delete it (or GDAL 
> could close and delete it itself if it wanted doesn't matter to me). Thanks.

Christian,

I'm not aware of a way of doing this with the current GDAL API.  If you wanted
to modify the code a bit you could expose TryGetLockedBlockRef() on the
GDALRasterBand.  Then walk all the blocks trying to fetch them - it will only
work if they are in the cache.  When you get one call MarkClean() on it.
When this is done for all blocks, you can delete the dataset object without
it attempting to flush out the blocks.

Potentially we could add a DiscardPendingWrites() method on the GDALRasterBlock
that would do this but the need seems pretty special purpose so I'm not too
inclined to pursue it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From chaitanya.ch at gmail.com  Wed Sep 22 11:11:05 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Sep 22 11:11:08 2010
Subject: [gdal-dev] RE: Compression using the create method in python and
	aggregation methods
In-Reply-To: <E40ECC4BCBB70543AB323A3492ACB34604BA25AE@EXXMAIL01.desktop.frd.metoffice.com>
References: <E40ECC4BCBB70543AB323A3492ACB34604BA25AB@EXXMAIL01.desktop.frd.metoffice.com>
	<E40ECC4BCBB70543AB323A3492ACB34604BA25AE@EXXMAIL01.desktop.frd.metoffice.com>
Message-ID: <AANLkTi=0-wKVRXXoWqLOhvX67wLBe61jwmYNuf1+uUYZ@mail.gmail.com>

Andy,

Try this instead.
out = outDrv.Create("outfile.tif", gscl.RasterXSize, gscl.RasterYSize, 1,
gdalconst.GDT_UInt16,  *options = *[ 'COMPRESS=LZW' ] )

However, I am not sure this makes any difference because gdalinfo did tell
that there is LZW compression.

On Wed, Sep 22, 2010 at 4:41 PM, Hartley, Andrew <
andrew.hartley@metoffice.gov.uk> wrote:

>  Hi all,
>
> I'm trying to create a Gtiff with LZW compression using python, with the
> code below, which I wrote with help from the tutorial at *
> http://www.gdal.org/gdal_tutorial.html*<http://www.gdal.org/gdal_tutorial.html>.
> Gdalinfo tells me that the resulting tif ("outfile.tif") has compression
> (Image Structure Metadata: COMPRESSION=LZW), but all my outfiles have the
> same file size and are quite large, so it seems they actually aren't
> compressed. In fact, when I tried:
>
> gdal_translate -co 'COMPRESS=LZW' outfile.tif newoutfile.tif
>
> the newoutfile.tif is considerably smaller than the original file. So, this
> leads me to think that there's a problem with my create() statement below
> (see the line in bold below). Could somebody please tell me what I have
> missed?
>
> Since I'm here, I think I will also pick your brains about cell aggregation
> methods. You'll see from the code below that I have writen a loop to
> aggregate only cells with data. I spent a bit of time considering a few
> options (for example, the excellent pages by Dr Gomez-Dans - *
> http://sites.google.com/site/spatialpython/aggregating-data-to-grid-cells*<http://sites.google.com/site/spatialpython/aggregating-data-to-grid-cells>).
> My code works reasonably well, but since I have lots of processing to do and
> it is not as fast as I would like, I was wondering if anybody could suggest
> a more efficient solution?
>
> Thanks very much in advance for any help you may be able to offer me!
>
> Kind regards,
> Andy
>
> s = (640,640)
> dt = numpy.dtype('uint16')
> # reftile is approx 1km resolution raster, with a unique ID for each cell
> for a 5 degree square window
> gscl = gdal.Open (reftile)
> tilescl = g.GetRasterBand(1).ReadAsArray().astype(numpy.uint16)
> # reftile90 is a 90m resample (using nearest neighbour) of reftile
> g90 = gdal.Open (reftile90)
> tile90 = g.GetRasterBand(1).ReadAsArray().astype(numpy.uint16)
>
> z = numpy.zeros(s, dtype=dt)
> U = unique(tile90[numpy.greater(rec90, 0)])
> lenU = len(U)
> # for each 90m cell with data, aggregate and write to low resolution output
> grid
> for u in range(lenU):
>         result = numpy.sum(rec90[numpy.equal(tile90, U[u])])
>         z[numpy.equal(tilescl, U[u])] = result
> # Write out the grid
> outDrv = gdal.GetDriverByName('GTiff')
> *out = outDrv.Create("outfile.tif", gscl.RasterXSize, gscl.RasterYSize, 1,
> gdalconst.GDT_UInt16,  [ 'COMPRESS=LZW' ] )*
> out.SetProjection(gscl.GetProjection())
> out.SetGeoTransform(gscl.GetGeoTransform())
> out.GetRasterBand(1).WriteArray(z)
> gscl = None
> G90 = None
> out = None
>
>
> --
> Andrew Hartley  Climate Impacts Risk Analyst
> *Met Office Hadley Centre*  FitzRoy Road  Exeter  Devon  EX1 3PB  United
> Kingdom
> Tel: +44 (0)1392 885720  Fax: +44 (0)1392 885681
> Email: andrew.hartley@metoffice.gov.uk  Website: *www.metoffice.gov.uk*
>
> See our guide to climate change at *
> http://www.metoffice.gov.uk/climatechange/guide/*<http://www.metoffice.gov.uk/climatechange/guide/>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100922/01a0afd3/attachment-0001.html
From andrew.hartley at metoffice.gov.uk  Wed Sep 22 11:30:33 2010
From: andrew.hartley at metoffice.gov.uk (Hartley, Andrew)
Date: Wed Sep 22 11:30:36 2010
Subject: [gdal-dev] RE: Compression using the create method in python and
	aggregation methods
In-Reply-To: <AANLkTi=0-wKVRXXoWqLOhvX67wLBe61jwmYNuf1+uUYZ@mail.gmail.com>
References: <E40ECC4BCBB70543AB323A3492ACB34604BA25AB@EXXMAIL01.desktop.frd.metoffice.com><E40ECC4BCBB70543AB323A3492ACB34604BA25AE@EXXMAIL01.desktop.frd.metoffice.com>
	<AANLkTi=0-wKVRXXoWqLOhvX67wLBe61jwmYNuf1+uUYZ@mail.gmail.com>
Message-ID: <E40ECC4BCBB70543AB323A3492ACB34604BA25B4@EXXMAIL01.desktop.frd.metoffice.com>

Chaitanya,
Thanks for the help, but it didn't change anything. If it helps, I'm using gdal 1.7.2 with python 3.1 and numpy 1.5.
Cheers,
Andy

________________________________

From: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com] 
Sent: 22 September 2010 16:11
To: Hartley, Andrew
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] RE: Compression using the create method in python and aggregation methods


Andy,

Try this instead.
out = outDrv.Create("outfile.tif", gscl.RasterXSize, gscl.RasterYSize, 1, gdalconst.GDT_UInt16,  options = [ 'COMPRESS=LZW' ] ) 

However, I am not sure this makes any difference because gdalinfo did tell that there is LZW compression.


On Wed, Sep 22, 2010 at 4:41 PM, Hartley, Andrew <andrew.hartley@metoffice.gov.uk> wrote:


	Hi all, 

	I'm trying to create a Gtiff with LZW compression using python, with the code below, which I wrote with help from the tutorial at http://www.gdal.org/gdal_tutorial.html <http://www.gdal.org/gdal_tutorial.html> . Gdalinfo tells me that the resulting tif ("outfile.tif") has compression (Image Structure Metadata: COMPRESSION=LZW), but all my outfiles have the same file size and are quite large, so it seems they actually aren't compressed. In fact, when I tried:

	gdal_translate -co 'COMPRESS=LZW' outfile.tif newoutfile.tif 

	the newoutfile.tif is considerably smaller than the original file. So, this leads me to think that there's a problem with my create() statement below (see the line in bold below). Could somebody please tell me what I have missed?

	Since I'm here, I think I will also pick your brains about cell aggregation methods. You'll see from the code below that I have writen a loop to aggregate only cells with data. I spent a bit of time considering a few options (for example, the excellent pages by Dr Gomez-Dans - http://sites.google.com/site/spatialpython/aggregating-data-to-grid-cells <http://sites.google.com/site/spatialpython/aggregating-data-to-grid-cells> ). My code works reasonably well, but since I have lots of processing to do and it is not as fast as I would like, I was wondering if anybody could suggest a more efficient solution?

	Thanks very much in advance for any help you may be able to offer me! 

	Kind regards, 
	Andy 

	s = (640,640) 
	dt = numpy.dtype('uint16')      
	# reftile is approx 1km resolution raster, with a unique ID for each cell for a 5 degree square window 
	gscl = gdal.Open (reftile) 
	tilescl = g.GetRasterBand(1).ReadAsArray().astype(numpy.uint16) 
	# reftile90 is a 90m resample (using nearest neighbour) of reftile 
	g90 = gdal.Open (reftile90) 
	tile90 = g.GetRasterBand(1).ReadAsArray().astype(numpy.uint16)  
	                
	z = numpy.zeros(s, dtype=dt) 
	U = unique(tile90[numpy.greater(rec90, 0)]) 
	lenU = len(U) 
	# for each 90m cell with data, aggregate and write to low resolution output grid 
	for u in range(lenU): 
	        result = numpy.sum(rec90[numpy.equal(tile90, U[u])]) 
	        z[numpy.equal(tilescl, U[u])] = result 
	# Write out the grid 
	outDrv = gdal.GetDriverByName('GTiff') 
	out = outDrv.Create("outfile.tif", gscl.RasterXSize, gscl.RasterYSize, 1, gdalconst.GDT_UInt16,  [ 'COMPRESS=LZW' ] ) 
	out.SetProjection(gscl.GetProjection()) 
	out.SetGeoTransform(gscl.GetGeoTransform()) 
	out.GetRasterBand(1).WriteArray(z) 
	gscl = None 
	G90 = None 
	out = None 


	
	

	-- 
	Andrew Hartley  Climate Impacts Risk Analyst 
	Met Office Hadley Centre  FitzRoy Road  Exeter  Devon  EX1 3PB  United Kingdom 
	Tel: +44 (0)1392 885720  Fax: +44 (0)1392 885681 
	Email: andrew.hartley@metoffice.gov.uk  Website: www.metoffice.gov.uk 

	See our guide to climate change at http://www.metoffice.gov.uk/climatechange/guide/ <http://www.metoffice.gov.uk/climatechange/guide/>  


	_______________________________________________
	gdal-dev mailing list
	gdal-dev@lists.osgeo.org
	http://lists.osgeo.org/mailman/listinfo/gdal-dev
	




-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/ 
+91-9494447584
17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100922/e3a4abc9/attachment.html
From chaitanya.ch at gmail.com  Wed Sep 22 12:06:29 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Sep 22 12:06:31 2010
Subject: [gdal-dev] gdal_fillnodata.py doesn't work
In-Reply-To: <AANLkTin5=zgF8d_Tznha2yk=O=9odjUvbc8OSeNJa274@mail.gmail.com>
References: <AANLkTinoV6PRO95fw4Q35FtngLe8=W51NUowdMFQnzE6@mail.gmail.com>
	<AANLkTimN_+ZMyEh_YeHHiNCoe3bOjNoUgjDrr5y=0fDO@mail.gmail.com>
	<AANLkTin5=zgF8d_Tznha2yk=O=9odjUvbc8OSeNJa274@mail.gmail.com>
Message-ID: <AANLkTimt4r=P0WURbjf1EoJOxLhY60XH_2SMUnKqZ2CP@mail.gmail.com>

ahmet,

I can't understand why the error occurs. Can you provide a sample data that
gives this error?

On Wed, Sep 22, 2010 at 4:53 PM, ahmet temiz <ahmettemiz88@gmail.com> wrote:

> thank you for your interest
>
> here it is:
>
> orkun@orkun-desktop:~/data/pro1001/yuk$ gdalinfo work1.tif
> Driver: GTiff/GeoTIFF
> Files: work1.tif
> Size is 4716, 5481
> Coordinate System is `'
> Origin = (436921.710000000020955,4648461.900000000372529)
> Pixel Size = (20.000000000000000,-20.000000000000000)
> Image Structure Metadata:
>  INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  436921.710, 4648461.900)
> Lower Left  (  436921.710, 4538841.900)
> Upper Right (  531241.710, 4648461.900)
> Lower Right (  531241.710, 4538841.900)
> Center      (  484081.710, 4593651.900)
> Band 1 Block=4716x1 Type=Float64, ColorInterp=Gray
>  NoData Value=0
>
>
> regards
>
> 2010/9/22 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> > ahmet,
> >
> > This error is reported by the grass library.
> > Is "work1.tif" in TIFF format? Can you post the output of gdalinfo on
> > work1.tif for more info?
> >
> > On Wed, Sep 22, 2010 at 1:50 PM, ahmet temiz <ahmettemiz88@gmail.com>
> wrote:
> >>
> >> hello
> >>
> >> can you tell me what this problem is ?
> >>
> >> orkun@orkun-desktop:~/data/pro1001/yuk$ python gdal_fillnodata.py -md
> >> 100 work1.tif dem1.tif
> >> ERROR 1: libgrass: MAPSET is not set
> >> Aborted
> >>
> >> regards
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> > /t?a???nj?/ /k?m?r/
> > +91-9494447584
> > 17.2416N 80.1426E
> >
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100922/2bcded79/attachment.html
From even.rouault at mines-paris.org  Wed Sep 22 13:12:42 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep 22 13:12:06 2010
Subject: [gdal-dev] Motion: Adopt RFC 30 on Unicode Filenames
In-Reply-To: <4C993D66.40501@pobox.com>
References: <4C993D66.40501@pobox.com>
Message-ID: <201009221912.42479.even.rouault@mines-paris.org>

Le mercredi 22 septembre 2010 01:19:02, Frank Warmerdam a ?crit :
> Motion: I move to adopt RFC 30: Unicode Filenames.
> 
>    http://trac.osgeo.org/gdal/wiki/rfc30_utf8_filenames

+1

Even
From even.rouault at mines-paris.org  Wed Sep 22 13:24:42 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep 22 13:24:05 2010
Subject: [gdal-dev] Quick dataset close
In-Reply-To: <AANLkTikPbJq7fSzkSKLPrbafLwo4O5-y3RLopE5d72i2@mail.gmail.com>
References: <AANLkTikPbJq7fSzkSKLPrbafLwo4O5-y3RLopE5d72i2@mail.gmail.com>
Message-ID: <201009221924.42483.even.rouault@mines-paris.org>

Christiaan,

you can try creating your TIFF with the SPARSE_OK=YES creation option. This 
will avoid writing unfilled blocks at dataset closing. However, in the normal 
situation where you don't interrupt your dataset creation processus, if you 
don't write all blocks, the resulting file will be sparsed, which might be not 
handled properly by some non-GDAL geotiff readers.

If you want to get the benefit of SPARSE_OK=YES in "normal" mode *and* have a 
fast closing in case of user interruption, you can try the following hack in 
frmts/gtiff/geotiff.cpp

Replace

/* -------------------------------------------------------------------- */
/*      Fill in missing blocks with empty data.                         */
/* -------------------------------------------------------------------- */
    if( bFillEmptyTiles )
    {
        FillEmptyTiles();
        bFillEmptyTiles = FALSE;
    }

by

/* -------------------------------------------------------------------- */
/*      Fill in missing blocks with empty data.                         */
/* -------------------------------------------------------------------- */
    if( bFillEmptyTiles && !CSLTestBoolean("GTIFF_FAST_CLOSING", "NO") )
    {
        FillEmptyTiles();
        bFillEmptyTiles = FALSE;
    }

In the case of user interruption, do something like :

CPLSetConfigOption("GTIFF_FAST_CLOSING", "YES");
GDALClose(hDS);
CPLSetConfigOption("GTIFF_FAST_CLOSING", "NO");

The approach suggested by Frank is complementary (it is about avoiding writing 
cached blocks), but I don't think that this accounts for most of the time 
spent in the case of a 5GB file, which is likely spent in FillEmptyTiles().

Even

Le mercredi 22 septembre 2010 16:02:45, Christiaan Janssen a ?crit :
> Is there a way to quickly close a large dataset using the API? For
> instance, I'm writing to very large TIFF file at which point the user
> cancels, the code in turn stops what it's doing, closes the dataset, and
> deletes the file. The problem is, since the file is around 5GB the close
> dataset function will flush out the remaining file since it believes I'm
> done writing, where in reality I would prefer it to just close it, leaving
> it in an invalid state, so I can promptly delete it (or GDAL could close
> and delete it itself if it wanted doesn't matter to me). Thanks.
> 
> Christiaan
From szekerest at gmail.com  Wed Sep 22 15:30:44 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Sep 22 15:30:46 2010
Subject: [gdal-dev] Motion: Adopt RFC 30 on Unicode Filenames
In-Reply-To: <4C993D66.40501@pobox.com>
References: <4C993D66.40501@pobox.com>
Message-ID: <AANLkTi=YvHpG0miuCrv8W7E41=ZoUfyQsVAp4A-WgzM2@mail.gmail.com>

+1

I'll take care of adding the UTF-8 support in the C# bindings.

Best regards,

Tamas




2010/9/22 Frank Warmerdam <warmerdam@pobox.com>

> Motion: I move to adopt RFC 30: Unicode Filenames.
>
>  http://trac.osgeo.org/gdal/wiki/rfc30_utf8_filenames
>
> --
>
> I have made a variety of adjustments and improvements based on the the
> feedback on RFC30.  I think it is now in good enough from to adopt, and
> complete implementation.
>
> +1 Frank
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100922/ffbd5c3c/attachment.html
From warmerdam at pobox.com  Wed Sep 22 15:52:40 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep 22 15:52:44 2010
Subject: [gdal-dev] GDAL/OGR 2.0 Notes
Message-ID: <4C9A5E88.5010907@pobox.com>

Folks,

In IRC I was just mentioning to Howard that we might want to drop use of
CPL_STDCALL in the GDAL API if a 2.0 release ever occurs.  It seemed to me
that such ideas ought to be kept track of so off the "Developer" section of
the Trac wiki I have created a page for this and pre-populated it with a few
items.  Please feel free to add other cleanup suitable to do at such an
ABI breaking version.

   http://trac.osgeo.org/gdal/wiki/GDAL20Changes

As we are running out of 1.x numbers (1.8.0 hopfully coming out soon), I'm
thinking about a 2.0 release for something like the fall of 2012 - just in
time for the world to end.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jzl5325 at psu.edu  Wed Sep 22 14:42:32 2010
From: jzl5325 at psu.edu (Jay L.)
Date: Wed Sep 22 16:42:22 2010
Subject: [gdal-dev] Enabling GEOS with GDAL on Windows
Message-ID: <AANLkTi=s1znpj+HZ=sBf7oqyUF9PHHb-mKV1QS3-3AE_@mail.gmail.com>

Afternoon all,

I have both FWTools and GDAL 1.6 (with the python bindings) installed
(windows7).  I have a pair of scripts that I would like to use the GEOS
functionality with (intersection and buffer).  I believe that FWTools
installed GEOS.  Is there a way to use the GEOS installed FWTools from my
script?

If not, what is the best place to look for information on enabling GEOS in
GDAL?  Up until this point I have used the precompiled binaries.  I have
seen the partially completed wiki pages about using NMake and CMake.  Is
that the best place to start?  Can I compile GDAL with GEOS without
Microsoft Visual C++?

Any help appreciated and I apologize if these are super basic questions.
Once I get this working I intend to create a tutorial for others looking to
access GEOS through GDAL in python.

Thanks,
Jay
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100922/47110dfb/attachment.html
From Doug_Newcomb at fws.gov  Wed Sep 22 16:52:24 2010
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Sep 22 16:52:34 2010
Subject: [gdal-dev] GDAL/OGR 2.0 Notes
In-Reply-To: <4C9A5E88.5010907@pobox.com>
Message-ID: <OF0102FD8B.B30CEEA2-ON852577A6.00725EF8-852577A6.0072A90B@fws.gov>

>As we are running out of 1.x numbers (1.8.0 hopfully coming out soon), 
I'm
>thinking about a 2.0 release for something like the fall of 2012 - just 
in
>time for the world to end.

That should simplify keeping track of the EPSG codes...

Doug
 

Doug Newcomb 
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the 
official policy of the U.S.Fish and Wildlife Service or Dept. of the 
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100922/9e779cbe/attachment-0001.html
From Chris.Barker at noaa.gov  Wed Sep 22 17:02:45 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Sep 22 17:02:47 2010
Subject: [gdal-dev] Enabling GEOS with GDAL on Windows
In-Reply-To: <AANLkTi=s1znpj+HZ=sBf7oqyUF9PHHb-mKV1QS3-3AE_@mail.gmail.com>
References: <AANLkTi=s1znpj+HZ=sBf7oqyUF9PHHb-mKV1QS3-3AE_@mail.gmail.com>
Message-ID: <4C9A6EF5.30503@noaa.gov>

Jay L. wrote:
> If not, what is the best place to look for information on enabling GEOS 
> in GDAL?

I don't know about that, but another way to use geos in Python is to use 
Shapely:

http://pypi.python.org/pypi/Shapely

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From jzl5325 at psu.edu  Wed Sep 22 17:28:40 2010
From: jzl5325 at psu.edu (Jay L.)
Date: Wed Sep 22 17:28:43 2010
Subject: [gdal-dev] Enabling GEOS with GDAL on Windows
In-Reply-To: <4C9A6EF5.30503@noaa.gov>
References: <AANLkTi=s1znpj+HZ=sBf7oqyUF9PHHb-mKV1QS3-3AE_@mail.gmail.com>
	<4C9A6EF5.30503@noaa.gov>
Message-ID: <AANLkTim4E_8hGWSMYsZcXJtd7PKBO7s6bcndZ2e=2xgr@mail.gmail.com>

Chris,

Shapely is my backup plan.  I have, essentially, wrapped shapely in gdal
using the load and dump wkt options before, but would love to be able to
access geos without any work arounds.

Thanks!

Jay

On Wed, Sep 22, 2010 at 2:02 PM, Christopher Barker
<Chris.Barker@noaa.gov>wrote:

> Jay L. wrote:
>
>> If not, what is the best place to look for information on enabling GEOS in
>> GDAL?
>>
>
> I don't know about that, but another way to use geos in Python is to use
> Shapely:
>
> http://pypi.python.org/pypi/Shapely
>
> -Chris
>
>
> --
> Christopher Barker, Ph.D.
> Oceanographer
>
> Emergency Response Division
> NOAA/NOS/OR&R            (206) 526-6959   voice
> 7600 Sand Point Way NE   (206) 526-6329   fax
> Seattle, WA  98115       (206) 526-6317   main reception
>
> Chris.Barker@noaa.gov
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100922/6ce06c19/attachment.html
From chaitanya.ch at gmail.com  Thu Sep 23 00:33:22 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Sep 23 00:33:25 2010
Subject: [gdal-dev] legend of the dem ?
In-Reply-To: <AANLkTimXT7SVPHi0zQHpzZHM0SpuDCmAOevNs95a1_6a@mail.gmail.com>
References: <AANLkTi=q8229sUQrHhbw7qLNnA5ieHOOz5CWadN01O2r@mail.gmail.com>
	<AANLkTikeC9U0R41zew4ech48+qhgXMis_LvCdb5QO1vQ@mail.gmail.com>
	<AANLkTimXT7SVPHi0zQHpzZHM0SpuDCmAOevNs95a1_6a@mail.gmail.com>
Message-ID: <AANLkTikFq93KnUPdA5yNgBEP-GKfxYiM=6uuXYs=cGoq@mail.gmail.com>

ahmet,

The gdaldem color-relief utility uses the color entries from a text file
which is given as the argument color_text_file. If you did create a map
using gdaldem color-relief, you should already have the file. Use the
entries from it.

On Wed, Sep 22, 2010 at 1:12 AM, ahmet temiz <ahmettemiz88@gmail.com> wrote:

> So, what are they ?
>
> 2010/9/21 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> > ahmet,
> > You have to create a legend of the dem from the color configuration file
> > using some other tool.
> >
> > On Wed, Sep 22, 2010 at 12:32 AM, ahmet temiz <ahmettemiz88@gmail.com>
> > wrote:
> >>
> >> I used gdaldem color-relief and  created the map.
> >>
> >> Now, how can I generate the legend of the dem ?
> >>
> >> kind regards
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> > /t?a???nj?/ /k?m?r/
> > +91-9494447584
> > 17.2416N 80.1426E
> >
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100923/ecffcc56/attachment.html
From ahmettemiz88 at gmail.com  Thu Sep 23 08:14:18 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Thu Sep 23 08:14:22 2010
Subject: [gdal-dev] trimming the map is out of mask
Message-ID: <AANLkTin_s8h9KPr5yP0-EPgKGkAwzqSAKqcDXUoU_rF8@mail.gmail.com>

hello

I have two tif maps. One is mask, the other is DEM.

as usual,  I want to trim the part of DEM which is out of this mask.

how can I do that ?

regards
From ahmettemiz88 at gmail.com  Thu Sep 23 08:18:18 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Thu Sep 23 08:18:20 2010
Subject: [gdal-dev] legend of the dem ?
In-Reply-To: <AANLkTikFq93KnUPdA5yNgBEP-GKfxYiM=6uuXYs=cGoq@mail.gmail.com>
References: <AANLkTi=q8229sUQrHhbw7qLNnA5ieHOOz5CWadN01O2r@mail.gmail.com>
	<AANLkTikeC9U0R41zew4ech48+qhgXMis_LvCdb5QO1vQ@mail.gmail.com>
	<AANLkTimXT7SVPHi0zQHpzZHM0SpuDCmAOevNs95a1_6a@mail.gmail.com>
	<AANLkTikFq93KnUPdA5yNgBEP-GKfxYiM=6uuXYs=cGoq@mail.gmail.com>
Message-ID: <AANLkTiko9uOOBdaNMbHxv-Q51yB4X544t4fB0-=yZ1ZX@mail.gmail.com>

I learnt later. This color file should be created by myself.

I had asked if there was any automatic way of generation of that file
as in "GMT makecpt"

regards

2010/9/23 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> ahmet,
>


> The gdaldem color-relief utility uses the color entries from a text file
> which is given as the argument color_text_file. If you did create a map
> using gdaldem color-relief, you should already have the file. Use the
> entries from it.
>
> On Wed, Sep 22, 2010 at 1:12 AM, ahmet temiz <ahmettemiz88@gmail.com> wrote:
>>
>> So, what are they ?
>>
>> 2010/9/21 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
>> > ahmet,
>> > You have to create a legend of the dem from the color configuration file
>> > using some other tool.
>> >
>> > On Wed, Sep 22, 2010 at 12:32 AM, ahmet temiz <ahmettemiz88@gmail.com>
>> > wrote:
>> >>
>> >> I used gdaldem color-relief and ?created the map.
>> >>
>> >> Now, how can I generate the legend of the dem ?
>> >>
>> >> kind regards
>> >> _______________________________________________
>> >> gdal-dev mailing list
>> >> gdal-dev@lists.osgeo.org
>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> >
>> >
>> > --
>> > Best regards,
>> > Chaitanya kumar CH.
>> > /t?a???nj?/ /k?m?r/
>> > +91-9494447584
>> > 17.2416N 80.1426E
>> >
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
From schut at sarvision.nl  Thu Sep 23 08:48:02 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Thu Sep 23 08:48:08 2010
Subject: [gdal-dev] kmlsuperoverlay driver
Message-ID: <4C9B4C82.4020409@sarvision.nl>

  Hi,

I was curious about the new gdal klmsuperoverlay driver 
(frmts/kmlsuperoverlay). I have installed minizip, and ran make in the 
frmts/kmlsuperoverlay folder, which resulted in a 
kmlsuperoverlaydataset.o. Now what? How would I incorporate this into my 
gdal lib, either internally or as a plugin? I tried to search google to 
no avail, documentation (or my searching abilities) appears to be a bit 
sparse...

Btw, I'm on linux and using gdal from svn.

Regards,
Vincent.
From frankhevans at yahoo.com  Thu Sep 23 09:58:08 2010
From: frankhevans at yahoo.com (turtlewax)
Date: Thu Sep 23 09:58:09 2010
Subject: [gdal-dev] NITF driver reads GEOLOB, but does not write it.
Message-ID: <1285250288098-5563144.post@n2.nabble.com>


Just wanted to confirm. NITFs potentially store location data in 2 places.
IGEOLO  and GEOLOB. But GEOLOB has more accuracy (more decimal places).

There was a ticket which modified the NITF driver to read GEOLOB (if
present), 
http://trac.osgeo.org/gdal/ticket/3180

But the NITF driver does not write GEOLOB. If confirmed, I would suggest
opening a ticket for this.




-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/NITF-driver-reads-GEOLOB-but-does-not-write-it-tp5563144p5563144.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ari.jolma at gmail.com  Thu Sep 23 10:04:52 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Sep 23 10:04:58 2010
Subject: [gdal-dev] GDAL/OGR 2.0 Notes
In-Reply-To: <4C9A5E88.5010907@pobox.com>
References: <4C9A5E88.5010907@pobox.com>
Message-ID: <4C9B5E84.1050509@gmail.com>

On 09/22/2010 09:52 PM, Frank Warmerdam wrote:
> Folks,
>
> In IRC I was just mentioning to Howard that we might want to drop use of
> CPL_STDCALL in the GDAL API if a 2.0 release ever occurs.  It seemed 
> to me
> that such ideas ought to be kept track of so off the "Developer" 
> section of
> the Trac wiki I have created a page for this and pre-populated it with 
> a few
> items.  Please feel free to add other cleanup suitable to do at such an
> ABI breaking version.
>
>   http://trac.osgeo.org/gdal/wiki/GDAL20Changes
>
> As we are running out of 1.x numbers (1.8.0 hopfully coming out soon)

We can always have 1.10 and 1.11 etc. That would not be uncommon (there 
is for example Perl 5.10 as we're waiting for Perl 6). However, I'm for 
having 2.0, not just because numbers ran out but because that would be a 
chance to do something a bit more major. One idea would be to make a 
general call for new ideas and wish lists.

Best regards,

Ari

> , I'm
> thinking about a 2.0 release for something like the fall of 2012 - 
> just in
> time for the world to end.
>
> Best regards,

From dmorissette at mapgears.com  Thu Sep 23 11:05:30 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Sep 23 11:11:42 2010
Subject: [gdal-dev] Backward incompatible changes in the OGR style string
	format (r19724)
In-Reply-To: <AANLkTikXDok7pGG_sKBq2HqwW6XYgwhv69w7WYJ2x68U@mail.gmail.com>
References: <AANLkTikXDok7pGG_sKBq2HqwW6XYgwhv69w7WYJ2x68U@mail.gmail.com>
Message-ID: <4C9B6CBA.6090302@mapgears.com>

Hi Tamas,

I remember that I discussed with other devs this a little while ago, I'm
just not sure if that was on the list or on IRC... however I'm a bit
surprised since I see that r19724 was done by winkey and I thought I had
this discussion with aboudreault, so I'll need to dig a bit further to
refresh my mind about this.

Anyway, I think in the end the conclusion was that we should bite the
bullet and fix things to really use "," as a separator (instead of "."
which is currently wrong and causes some side-effects which I can't
remember just now). The only side-effect of this fix is on applications
using Style strings, and there are probably very few of them, the only
one I know about myself is MapServer, and the fix for them will be to
add a version-specific #ifdef to look for either "," or "." depending on
the GDAL/OGR version.

I'll try to dig out the discussions that we had about this and get back
to you with more details.

Daniel


Tamas Szekeres wrote:
> Hi All,
> 
> There have been a backward incompatible change in r19724
> <http://trac.osgeo.org/gdal/changeset/19724> related to the OGR style
> string format. According to this change the separator in the feature
> style id has been changed from '.' to ','
> Unfortunately such kind of changes may cause existing applications to
> work incorrectly and would also need to be fixed. For instance this
> change affects the mapserver function msOGRGetSymbolId in mapogr.cpp
> <http://trac.osgeo.org/mapserver/browser/trunk/mapserver/mapogr.cpp> as
> well. So as to fix this issue in mapserver, we would probably require to
> keep the original code simultaneously, depending on the gdal version.
> 
> I'd be curious to know whether we have any compelling reason to apply
> these modifications, or we just wanted to follow the feature style
> specification <http://www.gdal.org/ogr/ogr_feature_style.html> with
> these changes? In the latter case I would personally in favour of
> reverting these changes in gdal and handle this issue by fixing the
> feature style documentation to follow the original syntax.
> 
> Any ideas?
> 
> 
> Best regards,
> 
> Tamas
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/
From chaitanya.ch at gmail.com  Thu Sep 23 11:22:05 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Sep 23 11:22:08 2010
Subject: [gdal-dev] legend of the dem ?
In-Reply-To: <AANLkTiko9uOOBdaNMbHxv-Q51yB4X544t4fB0-=yZ1ZX@mail.gmail.com>
References: <AANLkTi=q8229sUQrHhbw7qLNnA5ieHOOz5CWadN01O2r@mail.gmail.com>
	<AANLkTikeC9U0R41zew4ech48+qhgXMis_LvCdb5QO1vQ@mail.gmail.com>
	<AANLkTimXT7SVPHi0zQHpzZHM0SpuDCmAOevNs95a1_6a@mail.gmail.com>
	<AANLkTikFq93KnUPdA5yNgBEP-GKfxYiM=6uuXYs=cGoq@mail.gmail.com>
	<AANLkTiko9uOOBdaNMbHxv-Q51yB4X544t4fB0-=yZ1ZX@mail.gmail.com>
Message-ID: <AANLkTinVBRnc7KdhGQAvfbxjPMgFnFA6KOTft7ZddNFa@mail.gmail.com>

ahmet,

Perhaps the python script rgb2pct.py can help you. ( Refer to
http://www.gdal.org/rgb2pct.html & http://www.gdal.org/gdal_utilities.html )

PS: You can easily set some fancy color tables using some desktop GIS
applications.

On Thu, Sep 23, 2010 at 5:48 PM, ahmet temiz <ahmettemiz88@gmail.com> wrote:

> I learnt later. This color file should be created by myself.
>
> I had asked if there was any automatic way of generation of that file
> as in "GMT makecpt"
>
> regards
>
> 2010/9/23 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> > ahmet,
> >
>
>
> > The gdaldem color-relief utility uses the color entries from a text file
> > which is given as the argument color_text_file. If you did create a map
> > using gdaldem color-relief, you should already have the file. Use the
> > entries from it.
> >
> > On Wed, Sep 22, 2010 at 1:12 AM, ahmet temiz <ahmettemiz88@gmail.com>
> wrote:
> >>
> >> So, what are they ?
> >>
> >> 2010/9/21 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> >> > ahmet,
> >> > You have to create a legend of the dem from the color configuration
> file
> >> > using some other tool.
> >> >
> >> > On Wed, Sep 22, 2010 at 12:32 AM, ahmet temiz <ahmettemiz88@gmail.com
> >
> >> > wrote:
> >> >>
> >> >> I used gdaldem color-relief and  created the map.
> >> >>
> >> >> Now, how can I generate the legend of the dem ?
> >> >>
> >> >> kind regards
> >> >> _______________________________________________
> >> >> gdal-dev mailing list
> >> >> gdal-dev@lists.osgeo.org
> >> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >> >
> >> >
> >> >
> >> > --
> >> > Best regards,
> >> > Chaitanya kumar CH.
> >> > /t?a???nj?/ /k?m?r/
> >> > +91-9494447584
> >> > 17.2416N 80.1426E
> >> >
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> > /t?a???nj?/ /k?m?r/
> > +91-9494447584
> > 17.2416N 80.1426E
> >
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100923/4e42ae9b/attachment.html
From dmorissette at mapgears.com  Thu Sep 23 11:47:33 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Sep 23 11:47:35 2010
Subject: [gdal-dev] Backward incompatible changes in the OGR style string
	format (r19724)
In-Reply-To: <4C9B6CBA.6090302@mapgears.com>
References: <AANLkTikXDok7pGG_sKBq2HqwW6XYgwhv69w7WYJ2x68U@mail.gmail.com>
	<4C9B6CBA.6090302@mapgears.com>
Message-ID: <4C9B7695.6070207@mapgears.com>

(Cross-posted to mapserver-dev)

Okay, I finally found traces of the previous discussions on this topic
in one GDAL ticket, and a related MITAB bugzilla entry:

http://trac.osgeo.org/gdal/ticket/3571

and

http://bugzilla.maptools.org/show_bug.cgi?id=2206

<wrist_slap>
Tamas and I would have saved lots of time if winkey had included a
reference to the ticket number in his SVN commit change log... please
all developers take this as a reminder to include refs to ticket number
in SVN change logs, and references to the SVN revision number when
closing tickets... this makes it much easier to go back in history.
</wrist_slap>

Sounds like what needs to happen is:

1- Add version-specific code in MapServer's msOGRGetSymbolId() to look
for "," vs "." delimiter in symbol ids depending on GDAL/OGR version

2- Add prominent note about this backwards incompatibility in the MITAB
driver notes, the GDAL/OGR 1.8 release notes, and on the list so that
developers of other applications using style strings can update their
code before it breaks in the user's hands

3- Update MITAB upstream with the same change (so that it is not
overwritten in future updates of the OGR copy)

4- And perhaps ensure that no other driver in OGR currently generates
symbol ids with "." and need the same fix.

What do you think Tamas?

Daniel


Daniel Morissette wrote:
> Hi Tamas,
> 
> I remember that I discussed with other devs this a little while ago, I'm
> just not sure if that was on the list or on IRC... however I'm a bit
> surprised since I see that r19724 was done by winkey and I thought I had
> this discussion with aboudreault, so I'll need to dig a bit further to
> refresh my mind about this.
> 
> Anyway, I think in the end the conclusion was that we should bite the
> bullet and fix things to really use "," as a separator (instead of "."
> which is currently wrong and causes some side-effects which I can't
> remember just now). The only side-effect of this fix is on applications
> using Style strings, and there are probably very few of them, the only
> one I know about myself is MapServer, and the fix for them will be to
> add a version-specific #ifdef to look for either "," or "." depending on
> the GDAL/OGR version.
> 
> I'll try to dig out the discussions that we had about this and get back
> to you with more details.
> 
> Daniel
> 
> 
> Tamas Szekeres wrote:
>> Hi All,
>>
>> There have been a backward incompatible change in r19724
>> <http://trac.osgeo.org/gdal/changeset/19724> related to the OGR style
>> string format. According to this change the separator in the feature
>> style id has been changed from '.' to ','
>> Unfortunately such kind of changes may cause existing applications to
>> work incorrectly and would also need to be fixed. For instance this
>> change affects the mapserver function msOGRGetSymbolId in mapogr.cpp
>> <http://trac.osgeo.org/mapserver/browser/trunk/mapserver/mapogr.cpp> as
>> well. So as to fix this issue in mapserver, we would probably require to
>> keep the original code simultaneously, depending on the gdal version.
>>
>> I'd be curious to know whether we have any compelling reason to apply
>> these modifications, or we just wanted to follow the feature style
>> specification <http://www.gdal.org/ogr/ogr_feature_style.html> with
>> these changes? In the latter case I would personally in favour of
>> reverting these changes in gdal and handle this issue by fixing the
>> feature style documentation to follow the original syntax.
>>
>> Any ideas?
>>
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 


-- 
Daniel Morissette
http://www.mapgears.com/
From szekerest at gmail.com  Thu Sep 23 12:45:28 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Sep 23 12:45:31 2010
Subject: [gdal-dev] Backward incompatible changes in the OGR style string
	format (r19724)
In-Reply-To: <4C9B7695.6070207@mapgears.com>
References: <AANLkTikXDok7pGG_sKBq2HqwW6XYgwhv69w7WYJ2x68U@mail.gmail.com>
	<4C9B6CBA.6090302@mapgears.com> <4C9B7695.6070207@mapgears.com>
Message-ID: <AANLkTinUzTqwzoHXMVRndDR8CfrkMo5hV=Zq9Uh9JKE0@mail.gmail.com>

Daniel,

I don't think we extensively use filenames and URLs in the style strings
however we may indeed consider the dot '.' as a reserved char for example in
the parameters which could be a float value in the style strings. In such
sense the comma ',' could also be a character which already used as a
separator in the style strings. By all means if we go ahead with this
variant, the upper level libraries using the style strings (like mapserver)
should also be fixed. We may consider whether such fix should be appied only
in the development version only or in the stable branch as well.


BTW: How is the MITAB upstream project normally updated with the changes in
the GDAL project. Is that based on the SVN changeset in GDAL (in the mitab
subdir) or based on the bugs submitted to the maptools tracker?  I can see a
variety of changes/fixes even in the GDAL stable branch which should also be
applied in MITAB before pulling the whole mainstream back in the GDAL SVN.


Best regards,

Tamas



2010/9/23 Daniel Morissette <dmorissette@mapgears.com>

> (Cross-posted to mapserver-dev)
>
> Okay, I finally found traces of the previous discussions on this topic
> in one GDAL ticket, and a related MITAB bugzilla entry:
>
> http://trac.osgeo.org/gdal/ticket/3571
>
> and
>
> http://bugzilla.maptools.org/show_bug.cgi?id=2206
>
> <wrist_slap>
> Tamas and I would have saved lots of time if winkey had included a
> reference to the ticket number in his SVN commit change log... please
> all developers take this as a reminder to include refs to ticket number
> in SVN change logs, and references to the SVN revision number when
> closing tickets... this makes it much easier to go back in history.
> </wrist_slap>
>
> Sounds like what needs to happen is:
>
> 1- Add version-specific code in MapServer's msOGRGetSymbolId() to look
> for "," vs "." delimiter in symbol ids depending on GDAL/OGR version
>
> 2- Add prominent note about this backwards incompatibility in the MITAB
> driver notes, the GDAL/OGR 1.8 release notes, and on the list so that
> developers of other applications using style strings can update their
> code before it breaks in the user's hands
>
> 3- Update MITAB upstream with the same change (so that it is not
> overwritten in future updates of the OGR copy)
>
> 4- And perhaps ensure that no other driver in OGR currently generates
> symbol ids with "." and need the same fix.
>
> What do you think Tamas?
>
> Daniel
>
>
> Daniel Morissette wrote:
> > Hi Tamas,
> >
> > I remember that I discussed with other devs this a little while ago, I'm
> > just not sure if that was on the list or on IRC... however I'm a bit
> > surprised since I see that r19724 was done by winkey and I thought I had
> > this discussion with aboudreault, so I'll need to dig a bit further to
> > refresh my mind about this.
> >
> > Anyway, I think in the end the conclusion was that we should bite the
> > bullet and fix things to really use "," as a separator (instead of "."
> > which is currently wrong and causes some side-effects which I can't
> > remember just now). The only side-effect of this fix is on applications
> > using Style strings, and there are probably very few of them, the only
> > one I know about myself is MapServer, and the fix for them will be to
> > add a version-specific #ifdef to look for either "," or "." depending on
> > the GDAL/OGR version.
> >
> > I'll try to dig out the discussions that we had about this and get back
> > to you with more details.
> >
> > Daniel
> >
> >
> > Tamas Szekeres wrote:
> >> Hi All,
> >>
> >> There have been a backward incompatible change in r19724
> >> <http://trac.osgeo.org/gdal/changeset/19724> related to the OGR style
> >> string format. According to this change the separator in the feature
> >> style id has been changed from '.' to ','
> >> Unfortunately such kind of changes may cause existing applications to
> >> work incorrectly and would also need to be fixed. For instance this
> >> change affects the mapserver function msOGRGetSymbolId in mapogr.cpp
> >> <http://trac.osgeo.org/mapserver/browser/trunk/mapserver/mapogr.cpp> as
> >> well. So as to fix this issue in mapserver, we would probably require to
> >> keep the original code simultaneously, depending on the gdal version.
> >>
> >> I'd be curious to know whether we have any compelling reason to apply
> >> these modifications, or we just wanted to follow the feature style
> >> specification <http://www.gdal.org/ogr/ogr_feature_style.html> with
> >> these changes? In the latter case I would personally in favour of
> >> reverting these changes in gdal and handle this issue by fixing the
> >> feature style documentation to follow the original syntax.
> >>
> >> Any ideas?
> >>
> >>
> >> Best regards,
> >>
> >> Tamas
> >>
> >>
> >>
> >> ------------------------------------------------------------------------
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
>
>
> --
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100923/cac4b166/attachment.html
From even.rouault at mines-paris.org  Thu Sep 23 13:24:27 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep 23 13:24:33 2010
Subject: [gdal-dev] NITF driver reads GEOLOB, but does not write it.
In-Reply-To: <1285250288098-5563144.post@n2.nabble.com>
References: <1285250288098-5563144.post@n2.nabble.com>
Message-ID: <201009231924.27538.even.rouault@mines-paris.org>

It is true that the driver doesn't write automatically the GEOLOB TRE, but you 
can manually do it by using the TRE creation option of the NITF driver. See 
http://gdal.org/frmt_nitf.html and http://gdal.org/frmt_nitf_advanced.html. 
This will require you to format it "at hand" properly from the georeferencing 
info. But you should also likely write the GEOPSB TRE, so that the resulting 
NITF file is valid in a non GDAL based NITF reader. I've found some more info 
here about those TREs : 
http://www.gwg.nga.mil/ntb/baseline/docs/stdi0006/NCDRD_20Dec06.pdf and  
http://www.ittvis.com/portals/0/pdfs/envi/NITF_Module.pdf.

Le jeudi 23 septembre 2010 15:58:08, turtlewax a ?crit :
> Just wanted to confirm. NITFs potentially store location data in 2 places.
> IGEOLO  and GEOLOB. But GEOLOB has more accuracy (more decimal places).
> 
> There was a ticket which modified the NITF driver to read GEOLOB (if
> present),
> http://trac.osgeo.org/gdal/ticket/3180
> 
> But the NITF driver does not write GEOLOB. If confirmed, I would suggest
> opening a ticket for this.
From dmorissette at mapgears.com  Thu Sep 23 13:36:38 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Sep 23 13:36:41 2010
Subject: [gdal-dev] Backward incompatible changes in the OGR style string
	format (r19724)
In-Reply-To: <AANLkTinUzTqwzoHXMVRndDR8CfrkMo5hV=Zq9Uh9JKE0@mail.gmail.com>
References: <AANLkTikXDok7pGG_sKBq2HqwW6XYgwhv69w7WYJ2x68U@mail.gmail.com>	<4C9B6CBA.6090302@mapgears.com>	<4C9B7695.6070207@mapgears.com>
	<AANLkTinUzTqwzoHXMVRndDR8CfrkMo5hV=Zq9Uh9JKE0@mail.gmail.com>
Message-ID: <4C9B9026.8060406@mapgears.com>

Tamas Szekeres wrote:
> 
> I don't think we extensively use filenames and URLs in the style strings
> however we may indeed consider the dot '.' as a reserved char for
> example in the parameters which could be a float value in the style
> strings. In such sense the comma ',' could also be a character which
> already used as a separator in the style strings. By all means if we go
> ahead with this variant, the upper level libraries using the style
> strings (like mapserver) should also be fixed. We may consider whether
> such fix should be appied only in the development version only or in the
> stable branch as well.
>  

You've got a good point that in addition to trunk, at a minimum the the
MapServer 5.6.x branch should be updated with the fix as well... it
would be a little on-liner #ifdef with little/no chances of breaking
anything so there is no risk in doing this in a stable branch.


> 
> BTW: How is the MITAB upstream project normally updated with the changes
> in the GDAL project. Is that based on the SVN changeset in GDAL (in the
> mitab subdir) or based on the bugs submitted to the maptools tracker?  I
> can see a variety of changes/fixes even in the GDAL stable branch which
> should also be applied in MITAB before pulling the whole mainstream back
> in the GDAL SVN.
> 

Updates have to be committed upstream, ideally by submitting a ticket at
http://bugzilla.maptools.org/ ... eventually I should open the MITAB CVS
repository to more GDAL committers to facilitate this process.

I have to admit that as new GDAL committers have started making changes
to ogr/ogrsf_fmrts/mitab without making sure the fix is propagated
upstream we've kind of lost control and are in front of a bit of a mess
at the moment.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From ivan.lucena at pmldnet.com  Thu Sep 23 13:48:43 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu Sep 23 13:48:45 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gR0RBTC9PR1IgMi4wIE5vdGVz?=
Message-ID: <20100923174843.10315.qmail@s466.sureserver.com>

>  -------Original Message-------
>  From: Ari Jolma <ari.jolma@gmail.com>
>  To: gdal-dev@lists.osgeo.org
>  Subject: Re: [gdal-dev] GDAL/OGR 2.0 Notes
>  Sent: Sep 23 '10 09:04
>  
>  On 09/22/2010 09:52 PM, Frank Warmerdam wrote:
>  > Folks,
>  >
>  > In IRC I was just mentioning to Howard that we might want to drop use of
>  > CPL_STDCALL in the GDAL API if a 2.0 release ever occurs.??It seemed
>  > to me
>  > that such ideas ought to be kept track of so off the "Developer"
>  > section of
>  > the Trac wiki I have created a page for this and pre-populated it with
>  > a few
>  > items.??Please feel free to add other cleanup suitable to do at such an
>  > ABI breaking version.
>  >
>  >?? http://trac.osgeo.org/gdal/wiki/GDAL20Changes
>  >
>  > As we are running out of 1.x numbers (1.8.0 hopfully coming out soon)
>  
>  We can always have 1.10 and 1.11 etc. That would not be uncommon (there
>  is for example Perl 5.10 as we're waiting for Perl 6). However, I'm for

I like that.

>  having 2.0, not just because numbers ran out but because that would be a
>  chance to do something a bit more major. One idea would be to make a
>  general call for new ideas and wish lists.

But maybe the support for UNICODE could be considered a major change. No?

IMHO,

Ivan

>  
>  Best regards,
>  
>  Ari
>  
>  > , I'm
>  > thinking about a 2.0 release for something like the fall of 2012 -
>  > just in
>  > time for the world to end.
>  >
>  > Best regards,
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From warmerdam at pobox.com  Thu Sep 23 14:00:23 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep 23 14:00:31 2010
Subject: [gdal-dev] GDAL/OGR 2.0 Notes
In-Reply-To: <20100923174843.10315.qmail@s466.sureserver.com>
References: <20100923174843.10315.qmail@s466.sureserver.com>
Message-ID: <4C9B95B7.3060308@pobox.com>

Ivan Lucena wrote:
>>  We can always have 1.10 and 1.11 etc. That would not be uncommon (there
>>  is for example Perl 5.10 as we're waiting for Perl 6). However, I'm for
> 
> I like that.

Folks,

Well, I hate two digit releases, and they confuse the versioning
in stuff like OSGeo4W.  Not a compelling reason.  Also, without a
hard limit, I might never try a jump to 2.0!

>>  having 2.0, not just because numbers ran out but because that would be a
>>  chance to do something a bit more major. One idea would be to make a
>>  general call for new ideas and wish lists.
> 
> But maybe the support for UNICODE could be considered a major change. No?

The approach to unicode has very backward compatible in order to avoid
a need for a major version.  It has also been spread over multiple releases
with utf-8 for OGR field values done in 1.6 or 1.7, and filenames done in
1.8.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Thu Sep 23 14:06:51 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Sep 23 14:06:53 2010
Subject: [gdal-dev] Backward incompatible changes in the OGR style string
	format (r19724)
In-Reply-To: <4C9B9026.8060406@mapgears.com>
References: <AANLkTikXDok7pGG_sKBq2HqwW6XYgwhv69w7WYJ2x68U@mail.gmail.com>
	<4C9B6CBA.6090302@mapgears.com> <4C9B7695.6070207@mapgears.com>
	<AANLkTinUzTqwzoHXMVRndDR8CfrkMo5hV=Zq9Uh9JKE0@mail.gmail.com>
	<4C9B9026.8060406@mapgears.com>
Message-ID: <AANLkTi=oPbWXcCGetQERim1-FmnDmogePD3HwfkqZSh6@mail.gmail.com>

2010/9/23 Daniel Morissette <dmorissette@mapgears.com>

>
> Updates have to be committed upstream, ideally by submitting a ticket at
> http://bugzilla.maptools.org/ ... eventually I should open the MITAB CVS
> repository to more GDAL committers to facilitate this process.
>
> I have to admit that as new GDAL committers have started making changes
> to ogr/ogrsf_fmrts/mitab without making sure the fix is propagated
> upstream we've kind of lost control and are in front of a bit of a mess
> at the moment.
>
>
Daniel,

Count me as a "new" committer as I've also done some changes in this part,
however bug has also been added with these changes at
http://trac.osgeo.org/gdal/ticket/3687 ;-)  We may indeed forget to
duplicate this into the other BugTracker which would require a more
advertised policy to follow. Or we could leave the things as it is, and
periodically update all the changes in gdal back to the main stream.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100923/7681c2bd/attachment-0001.html
From dmorissette at mapgears.com  Thu Sep 23 14:50:02 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Sep 23 14:50:04 2010
Subject: [gdal-dev] Backward incompatible changes in the OGR style string
	format (r19724)
In-Reply-To: <AANLkTi=oPbWXcCGetQERim1-FmnDmogePD3HwfkqZSh6@mail.gmail.com>
References: <AANLkTikXDok7pGG_sKBq2HqwW6XYgwhv69w7WYJ2x68U@mail.gmail.com>	<4C9B6CBA.6090302@mapgears.com>	<4C9B7695.6070207@mapgears.com>	<AANLkTinUzTqwzoHXMVRndDR8CfrkMo5hV=Zq9Uh9JKE0@mail.gmail.com>	<4C9B9026.8060406@mapgears.com>
	<AANLkTi=oPbWXcCGetQERim1-FmnDmogePD3HwfkqZSh6@mail.gmail.com>
Message-ID: <4C9BA15A.8080502@mapgears.com>

Tamas Szekeres wrote:
> 
> Count me as a "new" committer as I've also done some changes in this
> part, however bug has also been added with these changes at
> http://trac.osgeo.org/gdal/ticket/3687 ;-)  We may indeed forget to
> duplicate this into the other BugTracker which would require a more
> advertised policy to follow. Or we could leave the things as it is, and
> periodically update all the changes in gdal back to the main stream.
> 

And I remember that you did contact me to ask about this but I failed to
follow up with you... the mess I am referring to is not only due to GDAL
devs committing fixes (which is great in most cases), it's also due to
me not having/taking the time to followup on all the changes so I'm in
large part to blame for lack of action.

Pusing that action item higher on my TODO list again...

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From frankhevans at yahoo.com  Thu Sep 23 16:32:44 2010
From: frankhevans at yahoo.com (turtlewax)
Date: Thu Sep 23 16:32:46 2010
Subject: [gdal-dev] Re: NITF driver reads GEOLOB, but does not write it.
In-Reply-To: <201009231924.27538.even.rouault@mines-paris.org>
References: <1285250288098-5563144.post@n2.nabble.com>
	<201009231924.27538.even.rouault@mines-paris.org>
Message-ID: <1285273964664-5564612.post@n2.nabble.com>


Even, thanks for responding.  The ultimate goal is to serve up NITFs via
MapServer. So if we need to specify a TRE option, we would need to define it
in the mapfile. 

Still, this is a good lead. Do you have any guidance on exercising this from
the command-line?

gdal_translate -of NITF -co TRE=GEOLOB="CETAG = 'GEOLOB'\n        CEL   =
'00048'\n        ARV   = '073932800'\n
    BRV   = '080076800'\n        LSO   = '-096.9774560321'\n        PSO   =
'+045.1446198929'\n        IS_OVERFLOW =        0" foo.tif foo.ntf
Input file size is 1543, 1670
ERROR 1: Cannot read GEOLOB TRE. Wrong size.
0...10...20...30...40...50...60...70...80...90...100 - done.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/NITF-driver-reads-GEOLOB-but-does-not-write-it-tp5563144p5564612.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Thu Sep 23 16:38:13 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep 23 16:38:19 2010
Subject: [gdal-dev] Re: NITF driver reads GEOLOB, but does not write it.
In-Reply-To: <1285273964664-5564612.post@n2.nabble.com>
References: <1285250288098-5563144.post@n2.nabble.com>
	<201009231924.27538.even.rouault@mines-paris.org>
	<1285273964664-5564612.post@n2.nabble.com>
Message-ID: <201009232238.14012.even.rouault@mines-paris.org>

No, you must not write CETAG = 'GEOLOB', ... as the value of the TRE. You must 
really format the TRE byte by byte, without any separator or field name, 
according to its documentation.

gdal_translate -of NITF foo.tif foo.ntf -co 
"TRE=GEOLOB=073932800080076800-096.9774560321+045.1446198929"

Le jeudi 23 septembre 2010 22:32:44, turtlewax a ?crit :
> Even, thanks for responding.  The ultimate goal is to serve up NITFs via
> MapServer. So if we need to specify a TRE option, we would need to define
> it in the mapfile.
> 
> Still, this is a good lead. Do you have any guidance on exercising this
> from the command-line?
> 
> gdal_translate -of NITF -co TRE=GEOLOB="CETAG = 'GEOLOB'\n        CEL   =
> '00048'\n        ARV   = '073932800'\n
>     BRV   = '080076800'\n        LSO   = '-096.9774560321'\n        PSO   =
> '+045.1446198929'\n        IS_OVERFLOW =        0" foo.tif foo.ntf
> Input file size is 1543, 1670
> ERROR 1: Cannot read GEOLOB TRE. Wrong size.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
From bclay at ball.com  Thu Sep 23 16:23:04 2010
From: bclay at ball.com (Clay, Bruce)
Date: Thu Sep 23 16:50:01 2010
Subject: [gdal-dev] can not connect top postgis db using GDAL
Message-ID: <C482FF98AE985A47B8C982FD429C9E34027EBEF8@daytonmsg2k3.AERO.BALL.COM>

I can not connect to a posgresql/postgis database using GDAL.  I have
verified that the PostgreSql drivers are in the DLL by calling ogrinfo
-formats.

PostgreSql is on the list

 

From c++ code I try the following:

 

strcat(connectBuf, "PG:\"dbname='postgis' host='<ip address' port='5432'
user='postgres' password='<pwd>'\"");

*dataSource = OGRSFDriverRegistrar::Open(connectBuf, FALSE)

 

*dataDouce always comes back NULL

 

 

I tried ogrinfo -ro PG:host=<ip address> user=postgis password=<pwd>
dbname=postgis based on rhw online examples and I get an error message
indicating no password was supplied.

 

I can connect to the remote host usin pgAdminIII so I know the systems
can talk to each other.

 

Does anyone see what I might be doing wrong?  

 

 

Bruce

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100923/3bf6816d/attachment.html
From warmerdam at pobox.com  Thu Sep 23 17:05:05 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Sep 23 17:05:11 2010
Subject: [gdal-dev] can not connect top postgis db using GDAL
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34027EBEF8@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34027EBEF8@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <4C9BC101.1070504@pobox.com>

Clay, Bruce wrote:
> I can not connect to a posgresql/postgis database using GDAL.  I have 
> verified that the PostgreSql drivers are in the DLL by calling ogrinfo 
> ?formats.
> 
> PostgreSql is on the list
> 
>  
> 
> From c++ code I try the following:
> 
>  
> 
> strcat(connectBuf, "PG:\"dbname='postgis' host='<ip address' port='5432' 
> user='postgres' password='<pwd>'\"");

Bruce,

You should not be including the extra escaped double quotes in the connection
string.  You likely saw an example in this form intended for use at the
commandline where the quotes would be interpreted by the shell, and keep the
whole connection string together as one argument.  Try:


strcat(connectBuf, "PG:dbname='postgis' host='<ip address' port='5432' 
user='postgres' password='<pwd>'");

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From bclay at ball.com  Thu Sep 23 17:25:34 2010
From: bclay at ball.com (Clay, Bruce)
Date: Thu Sep 23 17:29:47 2010
Subject: [gdal-dev] can not connect top postgis db using GDAL
In-Reply-To: <4C9BC101.1070504@pobox.com>
References: <C482FF98AE985A47B8C982FD429C9E34027EBEF8@daytonmsg2k3.AERO.BALL.COM>
	<4C9BC101.1070504@pobox.com>
Message-ID: <C482FF98AE985A47B8C982FD429C9E34027EBEFB@daytonmsg2k3.AERO.BALL.COM>

Frank:
  Thanks for the reply.  I tried again with"

strcat(connectBuf, "PG:dbname='postgis' host='<hostname>' port='5432'
user='postgres' password='>Pwd>'");

*dataSource = OGRSFDriverRegistrar::Open(connectBuf
/*connectString.c_str() */, FALSE);

And still no connection and *dataSource was returned NULL.

I put a breakpoint in GdalErrorHandler and the code did not go there so
apparently no error was signaled during the connection attempt

I also tried:

L:\SupportLibraries\gdal-1.7.1\bin\release>ogrinfo -ro
PG:"host=<hostname> user=postgres password=<pwd>"
FAILURE:
Unable to open datasource `PG:host=<hostname> user=postgres
password=<pwd>'
 with the following drivers.
  -> ESRI Shapefile
  -> MapInfo File
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> S57
  -> DGN
  -> VRT
  -> REC
  -> Memory
  -> BNA
  -> CSV
  -> GML
  -> GPX
  -> KML
  -> GeoJSON
  -> GMT
  -> ODBC
  -> PGeo
  -> PostgreSQL
  -> PCIDSK
  -> XPlane
  -> AVCBin
  -> AVCE00
  -> DXF
  -> Geoconcept
  -> GeoRSS
  -> GPSTrackMaker
  -> VFK


From the list we can see PostgrSQL but no reason was given for the
failure

Any other suggestions would be greatly appreciated.

Bruce



-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Thursday, September 23, 2010 5:05 PM
To: Clay, Bruce
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] can not connect top postgis db using GDAL

Clay, Bruce wrote:
> I can not connect to a posgresql/postgis database using GDAL.  I have 
> verified that the PostgreSql drivers are in the DLL by calling ogrinfo

> -formats.
> 
> PostgreSql is on the list
> 
>  
> 
> From c++ code I try the following:
> 
>  
> 
> strcat(connectBuf, "PG:\"dbname='postgis' host='<ip address'
port='5432' 
> user='postgres' password='<pwd>'\"");

Bruce,

You should not be including the extra escaped double quotes in the
connection
string.  You likely saw an example in this form intended for use at the
commandline where the quotes would be interpreted by the shell, and keep
the
whole connection string together as one argument.  Try:


strcat(connectBuf, "PG:dbname='postgis' host='<ip address' port='5432' 
user='postgres' password='<pwd>'");

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
From jeshua at OpenOSX.com  Thu Sep 23 21:04:03 2010
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Thu Sep 23 21:10:47 2010
Subject: [gdal-dev] OGDI 3.2 Beta 2
Message-ID: <77F82224-3D80-4ED7-9087-E8EC3EC780D9@OpenOSX.com>



Greetings,

Is gdal 1.7.2 supposed to be compatible with OGDI 3.2 beta 2?

I am getting the following (I tried making a symbolic link from my libogdi.dylib to libogdi31.dylib:

configure:18511: result: no
configure:18530: checking for cln_GetLayerCapabilities in -logdi31
configure:18555: gcc -o conftest -arch x86_64 -arch x86_64 -L/usr/local/lib -arch x86_64 conftest.c -logdi31 -L/usr/local -L/usr/local/lib -logdi31 -L/usr/local -L/usr/local/lib -lnetcdf -L/usr/local/grass-6.4.0/lib -lgrass_vect -lgrass_dig2 -lgrass_dgl -lgrass_rtree -lgrass_linkm -lgrass_dbmiclient -lgrass_dbmibase -lgrass_I -lgrass_gproj -lgrass_vask -lgrass_gmath -lgrass_gis -lgrass_datetime -lpq -L/usr/local/pgsql/lib -lpq -lz -L/usr -L/usr/lib -lpthread -ldl  >&5
ld: library not found for -logdi31
collect2: ld returned 1 exit status
configure:18555: $? = 1
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE_URL ""
| #define STDC_HEADERS 1
| #define HAVE_SYS_TYPES_H 1
| #define HAVE_SYS_STAT_H 1
| #define HAVE_STDLIB_H 1
| #define HAVE_STRING_H 1
| #define HAVE_MEMORY_H 1
| #define HAVE_STRINGS_H 1
| #define HAVE_INTTYPES_H 1
| #define HAVE_STDINT_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_DLFCN_H 1
| #define LT_OBJDIR ".libs/"
| #define HAVE_LIBDL 1
| #define STDC_HEADERS 1
| #define HAVE_ASSERT_H 1
| #define HAVE_FCNTL_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_DLFCN_H 1
| #define HAVE_STDINT_H 1
| #define HAVE_LIMITS_H 1
| #define HAVE_LOCALE_H 1
| #define HAVE_FLOAT_H 1
| #define HAVE_ERRNO_H 1
| #define HAVE_LONG_LONG 1
| #define UNIX_STDIO_64 1
| #define VSI_LARGE_API_SUPPORTED 1
| #define VSI_FTELL64 ftello
| #define VSI_FSEEK64 fseeko
| #define VSI_STAT64 stat64
| #define VSI_STAT64_T stat64
| #define VSI_FOPEN64 fopen
| #define SIZEOF_INT 4
| #define SIZEOF_UNSIGNED_LONG 8
| #define SIZEOF_VOIDP 8
| #define HAVE_IEEEFP 1
| #define HOST_FILLORDER FILLORDER_LSB2MSB
| #define HAVE_VPRINTF 1
| #define HAVE_SNPRINTF 1
| #define HAVE_VSNPRINTF 1
| #define HAVE_ATOLL 1
| #define HAVE_STRTOF 1
| #define HAVE_GETCWD 1
| #define HAVE_DECL_STRTOF 1
| #define HAVE_GCC_ATOMIC_BUILTINS 1
| #define HAVE_PTHREAD_MUTEX_RECURSIVE 1
| #define CPL_MULTIPROC_PTHREAD 1
| #define HAVE_LIBPQ 1
| /* end confdefs.h.  */
| 
| /* Override any GCC internal prototype to avoid an error.
|    Use char because int might match the return type of a GCC
|    builtin and then its argument prototype would still apply.  */
| #ifdef __cplusplus
| extern "C"
| #endif
| char cln_GetLayerCapabilities ();
| int
| main ()
| {
| return cln_GetLayerCapabilities ();
|   ;
|   return 0;
| }
configure:18564: result: no
configure:18583: error: libogdi not found.


Thanks,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 208.462.4171

From woklist at kyngchaos.com  Thu Sep 23 23:02:06 2010
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu Sep 23 23:02:10 2010
Subject: [gdal-dev] OGDI 3.2 Beta 2
In-Reply-To: <77F82224-3D80-4ED7-9087-E8EC3EC780D9@OpenOSX.com>
References: <77F82224-3D80-4ED7-9087-E8EC3EC780D9@OpenOSX.com>
Message-ID: <750F21D1-F3B0-434F-9085-21BF63D7AB84@kyngchaos.com>

The OGDI source builds a bit of a broken library for OS X (library name, endian problem, plugin naming problem).  See the OS X build notes on my site for patches and info to get something useable.

On Sep 23, 2010, at 8:04 PM, Jeshua Lacock wrote:

> 
> 
> Greetings,
> 
> Is gdal 1.7.2 supposed to be compatible with OGDI 3.2 beta 2?
> 
> I am getting the following (I tried making a symbolic link from my libogdi.dylib to libogdi31.dylib:
> 
> configure:18511: result: no
> configure:18530: checking for cln_GetLayerCapabilities in -logdi31
> configure:18555: gcc -o conftest -arch x86_64 -arch x86_64 -L/usr/local/lib -arch x86_64 conftest.c -logdi31 -L/usr/local -L/usr/local/lib -logdi31 -L/usr/local -L/usr/local/lib -lnetcdf -L/usr/local/grass-6.4.0/lib -lgrass_vect -lgrass_dig2 -lgrass_dgl -lgrass_rtree -lgrass_linkm -lgrass_dbmiclient -lgrass_dbmibase -lgrass_I -lgrass_gproj -lgrass_vask -lgrass_gmath -lgrass_gis -lgrass_datetime -lpq -L/usr/local/pgsql/lib -lpq -lz -L/usr -L/usr/lib -lpthread -ldl  >&5
> ld: library not found for -logdi31
> collect2: ld returned 1 exit status
> configure:18555: $? = 1
> configure: failed program was:
> | /* confdefs.h */
> | #define PACKAGE_NAME ""
> | #define PACKAGE_TARNAME ""
> | #define PACKAGE_VERSION ""
> | #define PACKAGE_STRING ""
> | #define PACKAGE_BUGREPORT ""
> | #define PACKAGE_URL ""
> | #define STDC_HEADERS 1
> | #define HAVE_SYS_TYPES_H 1
> | #define HAVE_SYS_STAT_H 1
> | #define HAVE_STDLIB_H 1
> | #define HAVE_STRING_H 1
> | #define HAVE_MEMORY_H 1
> | #define HAVE_STRINGS_H 1
> | #define HAVE_INTTYPES_H 1
> | #define HAVE_STDINT_H 1
> | #define HAVE_UNISTD_H 1
> | #define HAVE_DLFCN_H 1
> | #define LT_OBJDIR ".libs/"
> | #define HAVE_LIBDL 1
> | #define STDC_HEADERS 1
> | #define HAVE_ASSERT_H 1
> | #define HAVE_FCNTL_H 1
> | #define HAVE_UNISTD_H 1
> | #define HAVE_DLFCN_H 1
> | #define HAVE_STDINT_H 1
> | #define HAVE_LIMITS_H 1
> | #define HAVE_LOCALE_H 1
> | #define HAVE_FLOAT_H 1
> | #define HAVE_ERRNO_H 1
> | #define HAVE_LONG_LONG 1
> | #define UNIX_STDIO_64 1
> | #define VSI_LARGE_API_SUPPORTED 1
> | #define VSI_FTELL64 ftello
> | #define VSI_FSEEK64 fseeko
> | #define VSI_STAT64 stat64
> | #define VSI_STAT64_T stat64
> | #define VSI_FOPEN64 fopen
> | #define SIZEOF_INT 4
> | #define SIZEOF_UNSIGNED_LONG 8
> | #define SIZEOF_VOIDP 8
> | #define HAVE_IEEEFP 1
> | #define HOST_FILLORDER FILLORDER_LSB2MSB
> | #define HAVE_VPRINTF 1
> | #define HAVE_SNPRINTF 1
> | #define HAVE_VSNPRINTF 1
> | #define HAVE_ATOLL 1
> | #define HAVE_STRTOF 1
> | #define HAVE_GETCWD 1
> | #define HAVE_DECL_STRTOF 1
> | #define HAVE_GCC_ATOMIC_BUILTINS 1
> | #define HAVE_PTHREAD_MUTEX_RECURSIVE 1
> | #define CPL_MULTIPROC_PTHREAD 1
> | #define HAVE_LIBPQ 1
> | /* end confdefs.h.  */
> | 
> | /* Override any GCC internal prototype to avoid an error.
> |    Use char because int might match the return type of a GCC
> |    builtin and then its argument prototype would still apply.  */
> | #ifdef __cplusplus
> | extern "C"
> | #endif
> | char cln_GetLayerCapabilities ();
> | int
> | main ()
> | {
> | return cln_GetLayerCapabilities ();
> |   ;
> |   return 0;
> | }
> configure:18564: result: no
> configure:18583: error: libogdi not found.
> 
> 
> Thanks,
> 
> Jeshua Lacock, Owner
> <http://OpenOSX.com>
> phone: 208.462.4171
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what does that remind me of?  Ah, yes - life."

- Marvin


From Ralf.Suhr at itc-halle.de  Fri Sep 24 03:19:46 2010
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Fri Sep 24 03:19:52 2010
Subject: [gdal-dev] OGDI 3.2 Beta 2
In-Reply-To: <77F82224-3D80-4ED7-9087-E8EC3EC780D9@OpenOSX.com>
References: <77F82224-3D80-4ED7-9087-E8EC3EC780D9@OpenOSX.com>
Message-ID: <201009240919.47029.Ralf.Suhr@itc-halle.de>

Hi Jeshua,

create a link from libogdi.so to libogdi31.so

Gr
Ralf

Am Freitag 24 September 2010 03:04:03 schrieb Jeshua Lacock:
> Greetings,
> 
> Is gdal 1.7.2 supposed to be compatible with OGDI 3.2 beta 2?
> 
> I am getting the following (I tried making a symbolic link from my
>  libogdi.dylib to libogdi31.dylib:
> 
> configure:18511: result: no
> configure:18530: checking for cln_GetLayerCapabilities in -logdi31
> configure:18555: gcc -o conftest -arch x86_64 -arch x86_64 -L/usr/local/lib
>  -arch x86_64 conftest.c -logdi31 -L/usr/local -L/usr/local/lib -logdi31
>  -L/usr/local -L/usr/local/lib -lnetcdf -L/usr/local/grass-6.4.0/lib
>  -lgrass_vect -lgrass_dig2 -lgrass_dgl -lgrass_rtree -lgrass_linkm
>  -lgrass_dbmiclient -lgrass_dbmibase -lgrass_I -lgrass_gproj -lgrass_vask
>  -lgrass_gmath -lgrass_gis -lgrass_datetime -lpq -L/usr/local/pgsql/lib
>  -lpq -lz -L/usr -L/usr/lib -lpthread -ldl  >&5 ld: library not found for
>  -logdi31
> collect2: ld returned 1 exit status
> configure:18555: $? = 1
> 
> configure: failed program was:
> | /* confdefs.h */
> | #define PACKAGE_NAME ""
> | #define PACKAGE_TARNAME ""
> | #define PACKAGE_VERSION ""
> | #define PACKAGE_STRING ""
> | #define PACKAGE_BUGREPORT ""
> | #define PACKAGE_URL ""
> | #define STDC_HEADERS 1
> | #define HAVE_SYS_TYPES_H 1
> | #define HAVE_SYS_STAT_H 1
> | #define HAVE_STDLIB_H 1
> | #define HAVE_STRING_H 1
> | #define HAVE_MEMORY_H 1
> | #define HAVE_STRINGS_H 1
> | #define HAVE_INTTYPES_H 1
> | #define HAVE_STDINT_H 1
> | #define HAVE_UNISTD_H 1
> | #define HAVE_DLFCN_H 1
> | #define LT_OBJDIR ".libs/"
> | #define HAVE_LIBDL 1
> | #define STDC_HEADERS 1
> | #define HAVE_ASSERT_H 1
> | #define HAVE_FCNTL_H 1
> | #define HAVE_UNISTD_H 1
> | #define HAVE_DLFCN_H 1
> | #define HAVE_STDINT_H 1
> | #define HAVE_LIMITS_H 1
> | #define HAVE_LOCALE_H 1
> | #define HAVE_FLOAT_H 1
> | #define HAVE_ERRNO_H 1
> | #define HAVE_LONG_LONG 1
> | #define UNIX_STDIO_64 1
> | #define VSI_LARGE_API_SUPPORTED 1
> | #define VSI_FTELL64 ftello
> | #define VSI_FSEEK64 fseeko
> | #define VSI_STAT64 stat64
> | #define VSI_STAT64_T stat64
> | #define VSI_FOPEN64 fopen
> | #define SIZEOF_INT 4
> | #define SIZEOF_UNSIGNED_LONG 8
> | #define SIZEOF_VOIDP 8
> | #define HAVE_IEEEFP 1
> | #define HOST_FILLORDER FILLORDER_LSB2MSB
> | #define HAVE_VPRINTF 1
> | #define HAVE_SNPRINTF 1
> | #define HAVE_VSNPRINTF 1
> | #define HAVE_ATOLL 1
> | #define HAVE_STRTOF 1
> | #define HAVE_GETCWD 1
> | #define HAVE_DECL_STRTOF 1
> | #define HAVE_GCC_ATOMIC_BUILTINS 1
> | #define HAVE_PTHREAD_MUTEX_RECURSIVE 1
> | #define CPL_MULTIPROC_PTHREAD 1
> | #define HAVE_LIBPQ 1
> | /* end confdefs.h.  */
> |
> | /* Override any GCC internal prototype to avoid an error.
> |    Use char because int might match the return type of a GCC
> |    builtin and then its argument prototype would still apply.  */
> | #ifdef __cplusplus
> | extern "C"
> | #endif
> | char cln_GetLayerCapabilities ();
> | int
> | main ()
> | {
> | return cln_GetLayerCapabilities ();
> |   ;
> |   return 0;
> | }
> 
> configure:18564: result: no
> configure:18583: error: libogdi not found.
> 
> 
> Thanks,
> 
> Jeshua Lacock, Owner
> <http://OpenOSX.com>
> phone: 208.462.4171
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From ahh34 at cam.ac.uk  Fri Sep 24 04:15:27 2010
From: ahh34 at cam.ac.uk (Alex Hagen-Zanker)
Date: Fri Sep 24 04:15:30 2010
Subject: [gdal-dev] Enabling GEOS with GDAL on Windows
In-Reply-To: <AANLkTim4E_8hGWSMYsZcXJtd7PKBO7s6bcndZ2e=2xgr@mail.gmail.com>
References: <AANLkTi=s1znpj+HZ=sBf7oqyUF9PHHb-mKV1QS3-3AE_@mail.gmail.com>	<4C9A6EF5.30503@noaa.gov>
	<AANLkTim4E_8hGWSMYsZcXJtd7PKBO7s6bcndZ2e=2xgr@mail.gmail.com>
Message-ID: <4C9C5E1F.2020308@cam.ac.uk>

  >>would love to be able to access geos without any work arounds

Jay, I am not an expert and struggled to get it working as well. I took 
the following steps using nmake. If you don't have nmake, you can find 
instructions for getting it by Googling. It is also an option to get 
Visual Studio Express.

1. Download and compile latest version of GEOS (following their install 
instructions).
2. Make sure that the GEOS Environment Variables are correct (GEOS_DIR 
and GEOS_HEADERS, I suppose GEOS_DIR would be sufficient)
3. Modify GDAL's "nmake.opt" file  where it concerns GEOS, i.e. the 
following lines:

# Uncomment for GEOS support
#GEOS_DIR=C:/warmerda/geos
GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/source/headers -DHAVE_GEOS
GEOS_LIB     = $(GEOS_DIR)/source/geos_c_i.lib

4. Build GDAL using nmake:

nmake /f makefile.vc clean
nmake /f makefile.vc
nmake /f makefile.vc install
nmake /f makefile.vc devinstall

5. Make sure that your GDAL uses the right geos.dll, e.g. by searching 
your computer for geos.dll and renaming all unused instances.

Good luck, Alex
From jukka.rahkonen at mmmtike.fi  Fri Sep 24 08:14:52 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Sep 24 08:15:02 2010
Subject: [gdal-dev] Re: can not connect top postgis db using GDAL
References: <C482FF98AE985A47B8C982FD429C9E34027EBEF8@daytonmsg2k3.AERO.BALL.COM>
	<4C9BC101.1070504@pobox.com>
	<C482FF98AE985A47B8C982FD429C9E34027EBEFB@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <loom.20100924T141128-33@post.gmane.org>

Clay, Bruce <bclay <at> ball.com> writes:


> 
> L:\SupportLibraries\gdal-1.7.1\bin\release>ogrinfo -ro
> PG:"host=<hostname> user=postgres password=<pwd>"
> FAILURE:
> Unable to open datasource `PG:host=<hostname> user=postgres
> password=<pwd>'

You forgot to give dbname.

This works for sure for me from Windows:

orginfo -ro PG:"dbname=postgis host=localhost port=5432 user=username
password=password"

-Jukka Rahkonen-




From ahmettemiz88 at gmail.com  Fri Sep 24 08:19:49 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Fri Sep 24 08:19:52 2010
Subject: [gdal-dev] to get rgb and elevation values together
Message-ID: <AANLkTima5D2YHG7OHj2Dp23ok+hf_td9G94J1Aa0BYVf@mail.gmail.com>

hello

I am confused.

when I used gdaldem color-relief, I lost elevation values. I only get
rgb values.
Is there any way to get rgb and elevation values together.


gdaldem color-relief dem21.tif ramp22.txt dem_colored21.tif


regards
From oyvind.idland at gmail.com  Fri Sep 24 08:48:32 2010
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Fri Sep 24 08:48:34 2010
Subject: [gdal-dev] WMS bands - no color interpretation ?
Message-ID: <AANLkTimZ+qjAgnGvOsbxMe71vx4G4KRQrDon8sMuRnZP@mail.gmail.com>

Hi,

i am fiddling around a bit with GDAL. I can successfully load GeoTIFF files
etc, but when trying with the WMS
driver, something strange happens:

Opening the example frmt_wms_onearth_global_mosaic.xml works fine. I query
for bands, and get 3.
When calling band->GetColorInterpretation(), I get 0 (GCI_Undefined) for all
3 bands.

I am using v. 1.7.2.


-- ?yvind
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100924/78152e5c/attachment.html
From schut at sarvision.nl  Fri Sep 24 09:25:16 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Fri Sep 24 09:25:21 2010
Subject: [gdal-dev] kmlsuperoverlay driver
In-Reply-To: <4C9B4C82.4020409@sarvision.nl>
References: <4C9B4C82.4020409@sarvision.nl>
Message-ID: <4C9CA6BC.1010902@sarvision.nl>

  On 09/23/2010 02:48 PM, Vincent Schut wrote:
>  Hi,
>
> I was curious about the new gdal klmsuperoverlay driver 
> (frmts/kmlsuperoverlay). I have installed minizip, and ran make in the 
> frmts/kmlsuperoverlay folder, which resulted in a 
> kmlsuperoverlaydataset.o. Now what? How would I incorporate this into 
> my gdal lib, either internally or as a plugin? I tried to search 
> google to no avail, documentation (or my searching abilities) appears 
> to be a bit sparse...

No one?

Shamelessly bumping my own message with some more info:
I've tried creating a .so from the .o (gcc -shared 
-Wl,-soname,kmlsuperoverlaydataset.so -o kmlsuperoverlaydataset.so 
kmlsuperoverlaydataset.o -lminizip -lsz -ljpeg -lgdal) and copying that 
in /usr/local/lib/gdalplugins, but gdalinfo --formats still doesn't show 
kmlsuperoverlay as a supported format. Stracing gdalinfo shows that it's 
stat-ing /usr/local/lib/gdalplugins, however, nothing is loaded from there.
Now I might be missing something essential when creating the .so; I've 
just copied some stuff from other plugin formats' makefiles... I'd be 
grateful if anyone could shine some more light on it, even just by 
saying, hey, don't bother, kmlsuperoverlay is only supported on 
windows/not working/eating your root fs/whatever reason there is to not 
try to use it...

(strace output | grep -i plugin:
...
open("/usr/local/lib/gdalplugins", 
O_RDONLY|O_NONBLOCK|O_DIRECTORY|O_CLOEXEC) = 3
fcntl(3, F_GETFD)                       = 0x1 (flags FD_CLOEXEC)
getdents(3, /* 3 entries */, 32768)     = 96
getdents(3, /* 0 entries */, 32768)     = 0
close(3)                                = 0
fstat(1, {st_mode=S_IFIFO|0600, st_size=0, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) 
= 0x7f323e014000
write(1, "Supported Formats:\n  VRT (rw+): "..., 3812Supported Formats:
   VRT (rw+): Virtual Raster
   GTiff (rw+v): GeoTIFF
   ...
)

Regards,
Vincent.
>
> Btw, I'm on linux and using gdal from svn.
>
> Regards,
> Vincent.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Fri Sep 24 09:52:19 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Sep 24 09:52:25 2010
Subject: [gdal-dev] kmlsuperoverlay driver
In-Reply-To: <4C9CA6BC.1010902@sarvision.nl>
References: <4C9B4C82.4020409@sarvision.nl> <4C9CA6BC.1010902@sarvision.nl>
Message-ID: <4C9CAD13.8030004@pobox.com>

Vincent Schut wrote:
>  On 09/23/2010 02:48 PM, Vincent Schut wrote:
>>  Hi,
>>
>> I was curious about the new gdal klmsuperoverlay driver 
>> (frmts/kmlsuperoverlay). I have installed minizip, and ran make in the 
>> frmts/kmlsuperoverlay folder, which resulted in a 
>> kmlsuperoverlaydataset.o. Now what? How would I incorporate this into 
>> my gdal lib, either internally or as a plugin? I tried to search 
>> google to no avail, documentation (or my searching abilities) appears 
>> to be a bit sparse...
> 
> No one?
> 
> Shamelessly bumping my own message with some more info:
> I've tried creating a .so from the .o (gcc -shared 
> -Wl,-soname,kmlsuperoverlaydataset.so -o kmlsuperoverlaydataset.so 

Vincent,

plugins have to have a filename of the form "gdal_<drivername>.so"
and the registration entry point for the driver in that .so has to be
of the form "GDALRegister_<drivername>".  I see the registration entry
point is GDALRegister_KMLSUPEROVERLAY() so you should name the .so
gdal_KMLSUPEROVERLAY.so

I'll leave it up to Harsh Govind to answer questions about the driver itself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ari.jolma at gmail.com  Sat Sep 25 03:48:14 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat Sep 25 03:48:18 2010
Subject: [gdal-dev] WMS bands - no color interpretation ?
In-Reply-To: <AANLkTimZ+qjAgnGvOsbxMe71vx4G4KRQrDon8sMuRnZP@mail.gmail.com>
References: <AANLkTimZ+qjAgnGvOsbxMe71vx4G4KRQrDon8sMuRnZP@mail.gmail.com>
Message-ID: <4C9DA93E.8020905@gmail.com>

On 09/24/2010 03:48 PM, Oyvind Idland wrote:
> Hi,
>
> i am fiddling around a bit with GDAL. I can successfully load GeoTIFF 
> files etc, but when trying with the WMS
> driver, something strange happens:
>
> Opening the example frmt_wms_onearth_global_mosaic.xml works fine. I 
> query for bands, and get 3.
> When calling band->GetColorInterpretation(), I get 0 (GCI_Undefined) 
> for all 3 bands.

I get 3, 4 and 5. I'm using the latest trunk. If something was broken, 
it is fixed now. Latest change (r19089) in wms/dataset.cpp is from Mar 
15 2010 with message "default color interpretation fro wms driver 
#3420". You've found the bug reported in ticket 3420, which is now fixed 
in trunk.

Ari

>
> I am using v. 1.7.2.
>
>
> -- ?yvind
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100925/fa9581ef/attachment.html
From frankhevans at yahoo.com  Sat Sep 25 13:31:26 2010
From: frankhevans at yahoo.com (turtlewax)
Date: Sat Sep 25 13:31:28 2010
Subject: [gdal-dev] Re: NITF driver reads GEOLOB, but does not write it.
In-Reply-To: <201009232238.14012.even.rouault@mines-paris.org>
References: <1285250288098-5563144.post@n2.nabble.com>
	<201009231924.27538.even.rouault@mines-paris.org>
	<1285273964664-5564612.post@n2.nabble.com>
	<201009232238.14012.even.rouault@mines-paris.org>
Message-ID: <1285435886364-5570329.post@n2.nabble.com>


Even thanks for all your help. With the correct syntax the NITF generation
does complete without error.  But it seems that writing GEOLOB also changes
the way IGEOLO is written.

EXAMPLE:

If I don't create the GEOLOB, then IGEOLO is written as follows.
IGEOLO  258041N0665839E250841N0665915E250807N0665915E250807N0665839E

If I create a GEOLOB, then IGEOLO is written as follows.
IGEOLO	+25.145+066.977+25.145+066.987+25.135+066.987+25.135+066.977

This causes problems for viewers that I have tested (ERDAS and Global
Mapper).

QUESTION: 
If I write manually GEOLOB, am I required to manually provide other TREs?
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/NITF-driver-reads-GEOLOB-but-does-not-write-it-tp5563144p5570329.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sat Sep 25 13:59:56 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Sep 25 13:59:59 2010
Subject: [gdal-dev] Re: NITF driver reads GEOLOB, but does not write it.
In-Reply-To: <1285435886364-5570329.post@n2.nabble.com>
References: <1285250288098-5563144.post@n2.nabble.com>
	<201009232238.14012.even.rouault@mines-paris.org>
	<1285435886364-5570329.post@n2.nabble.com>
Message-ID: <201009251959.56658.even.rouault@mines-paris.org>

> EXAMPLE:
> 
> If I don't create the GEOLOB, then IGEOLO is written as follows.
> IGEOLO  258041N0665839E250841N0665915E250807N0665915E250807N0665839E
> 
> If I create a GEOLOB, then IGEOLO is written as follows.
> IGEOLO	+25.145+066.977+25.145+066.987+25.135+066.987+25.135+066.977
> 

Currently when reading the GEOLOB TRE, the driver forces the ICORDS field to be 
D (decimal) (and when writing a file, you begin to write a skeleton, and read 
it back to update it afterwards, which explains why your IGEOLO ends up being 
written as D). I'm not 100% sure why ICORDS was forces to D. I guess it is to 
ensure that the SRS will be geographic. I think this also could have been set 
equivalently to G.

So you can try to comment the line psImage->chICORDS = 'D' of NITFReadGEOLOB() 
in frmts/nitf/nitfimage.c, or change the D to G.

> This causes problems for viewers that I have tested (ERDAS and Global
> Mapper).
> 
> QUESTION:
> If I write manually GEOLOB, am I required to manually provide other TREs?

According to the docs I quoted in my previous email, yes, you likely need 
writing the GEOPSB TRE in addition to GEOLOB.
From frankhevans at yahoo.com  Sat Sep 25 17:41:22 2010
From: frankhevans at yahoo.com (turtlewax)
Date: Sat Sep 25 17:41:24 2010
Subject: [gdal-dev] Re: NITF driver reads GEOLOB, but does not write it.
In-Reply-To: <201009251959.56658.even.rouault@mines-paris.org>
References: <1285250288098-5563144.post@n2.nabble.com>
	<201009231924.27538.even.rouault@mines-paris.org>
	<1285273964664-5564612.post@n2.nabble.com>
	<201009232238.14012.even.rouault@mines-paris.org>
	<1285435886364-5570329.post@n2.nabble.com>
	<201009251959.56658.even.rouault@mines-paris.org>
Message-ID: <1285450882383-5570838.post@n2.nabble.com>


Thanks, you were right on both counts.
1. Code change in nitfimage.c fixed the ERDAS/Global Mapper error.
2. To get the improved accuracy I did have to specify the GEOPSB TRE as
well.

To make this work in mapserver I'll need to do something like the following,
but that means the OUTPUTFORMAT will be specific to each raster/layer, so a
mapfile can only contain a single layer.

  OUTPUTFORMAT 
    NAME NITF 
    DRIVER "GDAL/NITF" 
    IMAGEMODE RGB 
    MIMETYPE "image/nitf" 
    EXTENSION "ntf" 
    #The following option needs to be specific to each layer
    FORMATOPTION
"TRE=GEOLOB=073932800080076800-136.9774560321+045.1446198929" 
  END

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/NITF-driver-reads-GEOLOB-but-does-not-write-it-tp5563144p5570838.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Sun Sep 26 12:53:51 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Sep 26 12:59:05 2010
Subject: [gdal-dev] Re: Motion: Adopt RFC 30 on Unicode Filenames
In-Reply-To: <4C993D66.40501@pobox.com>
References: <4C993D66.40501@pobox.com>
Message-ID: <4C9F7A9F.3030005@pobox.com>

Frank Warmerdam wrote:
> Motion: I move to adopt RFC 30: Unicode Filenames.
> 
>   http://trac.osgeo.org/gdal/wiki/rfc30_utf8_filenames

Folks,

I declare this motion passed with support from Even, Tamas and myself.
I have created a ticket to track implementation progress:

   http://trac.osgeo.org/gdal/ticket/3766

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From schut at sarvision.nl  Mon Sep 27 04:03:57 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Mon Sep 27 04:04:03 2010
Subject: [gdal-dev] kmlsuperoverlay driver
In-Reply-To: <4C9CAD13.8030004@pobox.com>
References: <4C9B4C82.4020409@sarvision.nl> <4C9CA6BC.1010902@sarvision.nl>
	<4C9CAD13.8030004@pobox.com>
Message-ID: <4CA04FED.8010909@sarvision.nl>



On 09/24/2010 03:52 PM, Frank Warmerdam wrote:
> Vincent Schut wrote:
>>  On 09/23/2010 02:48 PM, Vincent Schut wrote:
>>>  Hi,
>>>
>>> I was curious about the new gdal klmsuperoverlay driver 
>>> (frmts/kmlsuperoverlay). I have installed minizip, and ran make in 
>>> the frmts/kmlsuperoverlay folder, which resulted in a 
>>> kmlsuperoverlaydataset.o. Now what? How would I incorporate this 
>>> into my gdal lib, either internally or as a plugin? I tried to 
>>> search google to no avail, documentation (or my searching abilities) 
>>> appears to be a bit sparse...
>>
>> No one?
>>
>> Shamelessly bumping my own message with some more info:
>> I've tried creating a .so from the .o (gcc -shared 
>> -Wl,-soname,kmlsuperoverlaydataset.so -o kmlsuperoverlaydataset.so 
>
> Vincent,
>
> plugins have to have a filename of the form "gdal_<drivername>.so"
> and the registration entry point for the driver in that .so has to be
> of the form "GDALRegister_<drivername>".  I see the registration entry
> point is GDALRegister_KMLSUPEROVERLAY() so you should name the .so
> gdal_KMLSUPEROVERLAY.so

Thanks Frank, works like a charm. Just renaming the file caused gdalinfo 
--formats to report KMLSUPEROVERLAY as a supported driver.

I'll do some tests later to see if this driver is useful for me, and to 
compare it to the gdal2tiles script.

Vincent.
>
> I'll leave it up to Harsh Govind to answer questions about the driver 
> itself.
>
> Best regards,
From oyvind.idland at gmail.com  Mon Sep 27 06:40:07 2010
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Mon Sep 27 06:40:09 2010
Subject: [gdal-dev] Using a directory of bitmaps as tiles
Message-ID: <AANLkTimogOCTP6mbRY-wdTt+=_pwAd7NhKXAUnHsL9Jy@mail.gmail.com>

I got a directoty of tiff's, where all of them has an associated .tfw with
them. I would
like to use an index and treat the whole folder as a dataset.

I have successfully genereated a shape-index using gdaltindex. Is it
possible
to use this index in GDAL directly in some way, or do I have to implement
the
logic myself ?

Thanks,

Oyvind
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100927/95a49280/attachment.html
From oyvind.idland at gmail.com  Mon Sep 27 08:58:26 2010
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Mon Sep 27 08:58:29 2010
Subject: [gdal-dev] Re: Using a directory of bitmaps as tiles
In-Reply-To: <AANLkTimogOCTP6mbRY-wdTt+=_pwAd7NhKXAUnHsL9Jy@mail.gmail.com>
References: <AANLkTimogOCTP6mbRY-wdTt+=_pwAd7NhKXAUnHsL9Jy@mail.gmail.com>
Message-ID: <AANLkTimRzfXAbQnBSJCbKRQXpbmAEqMF-syYGuGyKvdX@mail.gmail.com>

Update: solved by using gdalbuildvrt.

-- Oyvind

On Mon, Sep 27, 2010 at 12:40 PM, Oyvind Idland <oyvind.idland@gmail.com>wrote:

> I got a directoty of tiff's, where all of them has an associated .tfw with
> them. I would
> like to use an index and treat the whole folder as a dataset.
>
> I have successfully genereated a shape-index using gdaltindex. Is it
> possible
> to use this index in GDAL directly in some way, or do I have to implement
> the
> logic myself ?
>
> Thanks,
>
> Oyvind
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100927/5b08b149/attachment.html
From warmerdam at pobox.com  Mon Sep 27 10:31:33 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Sep 27 10:36:46 2010
Subject: [gdal-dev] Proposed UTF-8 SWIG Changes 
Message-ID: <4CA0AAC5.5080303@pobox.com>

Even, Tamas, Ari, Howard, and other SWIG wise men,

I got lost last night in the SWIG typemaps we use for GDAL, but eventually
I came up with a minimal patch that seems to make sense and work.  I would
appreciate it if you guys could skim it and let me know if I'm doing things
in a really wrong or dangerous way.

  http://trac.osgeo.org/gdal/attachment/ticket/3766/utf8_swig.patch

I am attempting to treat any const char * parameter named utf8_path via
a custom typemap that uses the preexisting GDALPythonObjectToCStr() to
convert it.  This appears to take regular strings, and unicode strings
properly in Python.

In other languages there is no special processing except that I have also
globally applied the NONNULL typemap to such parameters.

If I got ahead with this, should I add utf8_path in the README.typemaps?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Mon Sep 27 11:26:03 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Sep 27 11:26:05 2010
Subject: [gdal-dev] Proposed UTF-8 SWIG Changes
In-Reply-To: <4CA0AAC5.5080303@pobox.com>
References: <4CA0AAC5.5080303@pobox.com>
Message-ID: <AANLkTi=GM9eAUtv6Cr8-e2gO_kY8HMV9MQ25S_4qWJpC@mail.gmail.com>

2010/9/27 Frank Warmerdam <warmerdam@pobox.com>

> Even, Tamas, Ari, Howard, and other SWIG wise men,
>
> I got lost last night in the SWIG typemaps we use for GDAL, but eventually
> I came up with a minimal patch that seems to make sense and work.  I would
> appreciate it if you guys could skim it and let me know if I'm doing things
> in a really wrong or dangerous way.
>
>  http://trac.osgeo.org/gdal/attachment/ticket/3766/utf8_swig.patch
>
> I am attempting to treat any const char * parameter named utf8_path via
> a custom typemap that uses the preexisting GDALPythonObjectToCStr() to
> convert it.  This appears to take regular strings, and unicode strings
> properly in Python.
>
>
Frank,

I don't really undestand what's wrong with this. Applying custom typemaps to
specific parameters is widely used in the bindings. Those languages will get
a warning if that typemap is not yet implemented which is a correct way to
notify there should something to be done for that language.


>
> If I got ahead with this, should I add utf8_path in the README.typemaps?
>
>
Yes, it should be documented here what to be implemented in the typemap
code. I would also be in favour of adding such typemaps for all other
methods requiring utf8 strings in the current interface.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100927/f1e298df/attachment.html
From sebastian.ovide at gmail.com  Mon Sep 27 11:25:45 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Mon Sep 27 11:26:09 2010
Subject: [gdal-dev] compiling gdal under linux + OCI without installing
	Oracle
Message-ID: <AANLkTikNULe=3iDb0XY8pW0RcochaYfwH3URky6+4F2p@mail.gmail.com>

Hi Guys,

I have a VBox (no graphic) with Ubuntu 10.10 and trying to build GDAL + OCI.
Is there anyway of doing it without installing Oracle ?... perhaps
downloading only the -libs ? I know that Oracle is not so light... and it
could be problematic under Ubuntu...

thanks

-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100927/73d1a5aa/attachment.html
From warmerdam at pobox.com  Mon Sep 27 11:35:42 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Sep 27 11:40:59 2010
Subject: [gdal-dev] Proposed UTF-8 SWIG Changes
In-Reply-To: <AANLkTi=GM9eAUtv6Cr8-e2gO_kY8HMV9MQ25S_4qWJpC@mail.gmail.com>
References: <4CA0AAC5.5080303@pobox.com>
	<AANLkTi=GM9eAUtv6Cr8-e2gO_kY8HMV9MQ25S_4qWJpC@mail.gmail.com>
Message-ID: <4CA0B9CE.4050504@pobox.com>

Tamas Szekeres wrote:
> 
> 2010/9/27 Frank Warmerdam <warmerdam@pobox.com <mailto:warmerdam@pobox.com>>
> 
>     Even, Tamas, Ari, Howard, and other SWIG wise men,
> 
>     I got lost last night in the SWIG typemaps we use for GDAL, but
>     eventually
>     I came up with a minimal patch that seems to make sense and work.  I
>     would
>     appreciate it if you guys could skim it and let me know if I'm doing
>     things
>     in a really wrong or dangerous way.
> 
>      http://trac.osgeo.org/gdal/attachment/ticket/3766/utf8_swig.patch
> 
>     I am attempting to treat any const char * parameter named utf8_path via
>     a custom typemap that uses the preexisting GDALPythonObjectToCStr() to
>     convert it.  This appears to take regular strings, and unicode strings
>     properly in Python.
> 
> 
> Frank,
> 
> I don't really undestand what's wrong with this. Applying custom 
> typemaps to specific parameters is widely used in the bindings. Those 
> languages will get a warning if that typemap is not yet implemented 
> which is a correct way to notify there should something to be done for 
> that language.


Tamas,

Well, I don't know if there is anything wrong with my approach.

I am depending on the parameter name (utf8_path) to trigger the typemap
and presumably for languages not implementing that typemap the normal
"const char *" typemaps will kick in so I don't anticipate any errors
for the other bindings.  But I also haven't tried them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ivan.lucena at pmldnet.com  Mon Sep 27 11:50:44 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon Sep 27 11:50:46 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gY29tcGlsaW5nIGdkYWwgdW5kZXIgbGludXggKyBPQ0kgd2l0aG91dCBpbnN0YWxsaW5nIE9yYWNsZQ==?=
Message-ID: <20100927155044.11173.qmail@s466.sureserver.com>

Sebastian,

That might help you:

http://forums.oracle.com/forums/thread.jspa?messageID=4570333 "Thread: Building GDAL with geoRaster support in Linux "

Regards,

Ivan

>  -------Original Message-------
>  From: Sebastian E. Ovide <sebastian.ovide@gmail.com>
>  To: gdal-dev <gdal-dev@lists.osgeo.org>
>  Subject: [gdal-dev] compiling gdal under linux + OCI without installing Oracle
>  Sent: Sep 27 '10 10:25
>  
>  Hi Guys,
>  
>  
>  I have a VBox (no graphic) with Ubuntu 10.10 and trying to build GDAL +
>  OCI. Is there anyway of doing it without installing Oracle ?... perhaps
>  downloading only the -libs ? I know that Oracle is not so light... and it
>  could be problematic under Ubuntu...?
>  
>  
>  thanks
>  
>  --
>  Sebastian E. Ovide
>  
>  
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jluis at ualg.pt  Mon Sep 27 14:53:51 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Sep 27 14:53:57 2010
Subject: [gdal-dev] Why not netCDF output?
Message-ID: <4CA0E83F.20409@ualg.pt>

Hi

While running this command

gdalwarp -s_srs +proj=latlong -t_srs "+proj=ortho +lon_0=-42 +lat_0=40 
+ellps=WGS84" -of netCDF lixo.grd proj.grd

I get

Output driver `netCDF' not recognised or does not support direct output 
file creation.  The following format drivers are configured
(a format list where netCDF is not listed)

but if I ask gdalwarp the list of formats, netCDF is listed there as 
(rw). Furthermore

gdalwarp --format netCDF
Format Details:
   Short Name: netCDF
   Long Name: Network Common Data Format
   Extension: nc
   Help Topic: frmt_netcdf.html
   Supports: CreateCopy() - Create dataset by copying another.

??

Joaquim Luis

From even.rouault at mines-paris.org  Mon Sep 27 15:02:55 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Sep 27 15:02:37 2010
Subject: [gdal-dev] Why not netCDF output?
In-Reply-To: <4CA0E83F.20409@ualg.pt>
References: <4CA0E83F.20409@ualg.pt>
Message-ID: <201009272102.55960.even.rouault@mines-paris.org>

Joaquim,

The valid formats for the output of gdalwarp are formats that support the 
Create() method, not just the CreateCopy() method. This is indicated by (rw+) 
: the + indicates that Create() is supported.

The difference between Create() and CreateCopy() is mainly that Create() allows 
writing of pixel data in random order, which is needed by gdalwarp.

You can try in 2 steps :
1) gdalwarp -of VRT lixo.grd [other_options] temp.vrt
2) gdal_translate -of netCDF temp.vrt proj.grd

Best regards,

Even

> Hi
> 
> While running this command
> 
> gdalwarp -s_srs +proj=latlong -t_srs "+proj=ortho +lon_0=-42 +lat_0=40
> +ellps=WGS84" -of netCDF lixo.grd proj.grd
> 
> I get
> 
> Output driver `netCDF' not recognised or does not support direct output
> file creation.  The following format drivers are configured
> (a format list where netCDF is not listed)
> 
> but if I ask gdalwarp the list of formats, netCDF is listed there as
> (rw). Furthermore
> 
> gdalwarp --format netCDF
> Format Details:
>    Short Name: netCDF
>    Long Name: Network Common Data Format
>    Extension: nc
>    Help Topic: frmt_netcdf.html
>    Supports: CreateCopy() - Create dataset by copying another.
> 
> ??
> 
> Joaquim Luis
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jluis at ualg.pt  Mon Sep 27 15:20:02 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Sep 27 15:20:09 2010
Subject: [gdal-dev] Why not netCDF output?
In-Reply-To: <201009272102.55960.even.rouault@mines-paris.org>
References: <4CA0E83F.20409@ualg.pt>
	<201009272102.55960.even.rouault@mines-paris.org>
Message-ID: <4CA0EE62.1090406@ualg.pt>

Thanks Even,

I think that's the second time you explain me that (sorry, an easy thing 
to forget), but the docs could be a bit clearer about this. For example

*--formats*
    List all raster formats supported by this GDAL build (read-only and
    read-write) and exit. The format support is indicated as follows:
    'ro' is read-only driver; 'rw' is read or write (ie. supports
    CreateCopy); 'rw+' is read, write and update (ie. supports Create).

so I though the + was for updating


A second point is that the command I used shows a bug in gdalwarp. In 
that the "lixo.grd" is a grid extracted from one the etopo_something 
(actually a regrid version created by me) saning [-180 180] [0 90] and 
the bug is that at dateline there is a stripe of nodata.
Since the grid is too big to post in a ticket, can you please try to 
reproduce this?

Joaquim

> Joaquim,
>
> The valid formats for the output of gdalwarp are formats that support the
> Create() method, not just the CreateCopy() method. This is indicated by (rw+)
> : the + indicates that Create() is supported.
>
> The difference between Create() and CreateCopy() is mainly that Create() allows
> writing of pixel data in random order, which is needed by gdalwarp.
>
> You can try in 2 steps :
> 1) gdalwarp -of VRT lixo.grd [other_options] temp.vrt
> 2) gdal_translate -of netCDF temp.vrt proj.grd
>
> Best regards,
>
> Even
>
>    
>> Hi
>>
>> While running this command
>>
>> gdalwarp -s_srs +proj=latlong -t_srs "+proj=ortho +lon_0=-42 +lat_0=40
>> +ellps=WGS84" -of netCDF lixo.grd proj.grd
>>
>> I get
>>
>> Output driver `netCDF' not recognised or does not support direct output
>> file creation.  The following format drivers are configured
>> (a format list where netCDF is not listed)
>>
>> but if I ask gdalwarp the list of formats, netCDF is listed there as
>> (rw). Furthermore
>>
>> gdalwarp --format netCDF
>> Format Details:
>>     Short Name: netCDF
>>     Long Name: Network Common Data Format
>>     Extension: nc
>>     Help Topic: frmt_netcdf.html
>>     Supports: CreateCopy() - Create dataset by copying another.
>>
>> ??
>>
>> Joaquim Luis
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>      
>
>    

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100927/8169c5fa/attachment.html
From even.rouault at mines-paris.org  Mon Sep 27 15:24:53 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Sep 27 15:24:34 2010
Subject: [gdal-dev] Proposed UTF-8 SWIG Changes
In-Reply-To: <4CA0AAC5.5080303@pobox.com>
References: <4CA0AAC5.5080303@pobox.com>
Message-ID: <201009272124.53856.even.rouault@mines-paris.org>

Frank,

you'd likely need to also define the following typemap

%typemap(freearg) (const char *utf8_path) { 
	GDALPythonFreeCStr($1);
} 

to avoid memory leaks with Python3.

Hum, and on Python2, GDALPythonObjectToCStr() doesn't seem to accept unicode 
strings. Did you make a change in it ? or did I miss something ? I think that 
the part that deals with Unicode for Python3 currently should be generalized 
for Python2 too

For example, currently feat.SetField(0, u'a') throws :

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.6/dist-packages/GDAL-1.7.0-py2.6-linux-
x86_64.egg/osgeo/ogr.py", line 2179, in SetField
    return _ogr.Feature_SetField(self, *args)
NotImplementedError: Wrong number of arguments for overloaded function 
'Feature_SetField'.
  Possible C/C++ prototypes are:
    SetField(OGRFeatureShadow *,int,char const *)
    SetField(OGRFeatureShadow *,char const *,char const *)
    SetField(OGRFeatureShadow *,int,int)
    SetField(OGRFeatureShadow *,char const *,int)
    SetField(OGRFeatureShadow *,int,double)
    SetField(OGRFeatureShadow *,char const *,double)
    SetField(OGRFeatureShadow *,int,int,int,int,int,int,int,int)
    SetField(OGRFeatureShadow *,char const *,int,int,int,int,int,int,int)

whereas the same with feat.SetField(0, 'a') works.

Also it seems that the %typemap(in) (tostring argin) typemap is essentially 
the same as the new one you propose. So perhaps tostring use should be 
generalized instead ?


> Even, Tamas, Ari, Howard, and other SWIG wise men,
> 
> I got lost last night in the SWIG typemaps we use for GDAL, but eventually
> I came up with a minimal patch that seems to make sense and work.  I would
> appreciate it if you guys could skim it and let me know if I'm doing things
> in a really wrong or dangerous way.
> 
>   http://trac.osgeo.org/gdal/attachment/ticket/3766/utf8_swig.patch
> 
> I am attempting to treat any const char * parameter named utf8_path via
> a custom typemap that uses the preexisting GDALPythonObjectToCStr() to
> convert it.  This appears to take regular strings, and unicode strings
> properly in Python.
> 
> In other languages there is no special processing except that I have also
> globally applied the NONNULL typemap to such parameters.
> 
> If I got ahead with this, should I add utf8_path in the README.typemaps?
> 
> Best regards,
From even.rouault at mines-paris.org  Mon Sep 27 15:39:14 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Sep 27 15:38:58 2010
Subject: [gdal-dev] Why not netCDF output?
In-Reply-To: <4CA0EE62.1090406@ualg.pt>
References: <4CA0E83F.20409@ualg.pt>
	<201009272102.55960.even.rouault@mines-paris.org>
	<4CA0EE62.1090406@ualg.pt>
Message-ID: <201009272139.14077.even.rouault@mines-paris.org>

Le lundi 27 septembre 2010 21:20:02, Joaquim Luis a ?crit :
> Thanks Even,
> 
> I think that's the second time you explain me that (sorry, an easy thing
> to forget), but the docs could be a bit clearer about this. For example
> 
> *--formats*
>     List all raster formats supported by this GDAL build (read-only and
>     read-write) and exit. The format support is indicated as follows:
>     'ro' is read-only driver; 'rw' is read or write (ie. supports
>     CreateCopy); 'rw+' is read, write and update (ie. supports Create).
> 
> so I though the + was for updating

What would you suggest to be clearer ?

> 
> 
> A second point is that the command I used shows a bug in gdalwarp. In
> that the "lixo.grd" is a grid extracted from one the etopo_something
> (actually a regrid version created by me) saning [-180 180] [0 90] and
> the bug is that at dateline there is a stripe of nodata.
> Since the grid is too big to post in a ticket, can you please try to
> reproduce this?

Yes I reproduce it too. I managed to solve it by increasing the SAMPLE_STEPS 
warping option to 60 for example (input source is 5120 x 2560). See 
http://gdal.org/structGDALWarpOptions.html for more explanations

gdalwarp world.tif  -t_srs "+proj=ortho +lon_0=-42 +lat_0=40 +ellps=WGS84"  
out.tif -overwrite -wo SAMPLE_STEPS=60

> 
> Joaquim
> 
> > Joaquim,
> > 
> > The valid formats for the output of gdalwarp are formats that support the
> > Create() method, not just the CreateCopy() method. This is indicated by
> > (rw+)
> > 
> > : the + indicates that Create() is supported.
> > 
> > The difference between Create() and CreateCopy() is mainly that Create()
> > allows writing of pixel data in random order, which is needed by
> > gdalwarp.
> > 
> > You can try in 2 steps :
> > 1) gdalwarp -of VRT lixo.grd [other_options] temp.vrt
> > 2) gdal_translate -of netCDF temp.vrt proj.grd
> > 
> > Best regards,
> > 
> > Even
> > 
> >> Hi
> >> 
> >> While running this command
> >> 
> >> gdalwarp -s_srs +proj=latlong -t_srs "+proj=ortho +lon_0=-42 +lat_0=40
> >> +ellps=WGS84" -of netCDF lixo.grd proj.grd
> >> 
> >> I get
> >> 
> >> Output driver `netCDF' not recognised or does not support direct output
> >> file creation.  The following format drivers are configured
> >> (a format list where netCDF is not listed)
> >> 
> >> but if I ask gdalwarp the list of formats, netCDF is listed there as
> >> (rw). Furthermore
> >> 
> >> gdalwarp --format netCDF
> >> 
> >> Format Details:
> >>     Short Name: netCDF
> >>     Long Name: Network Common Data Format
> >>     Extension: nc
> >>     Help Topic: frmt_netcdf.html
> >>     Supports: CreateCopy() - Create dataset by copying another.
> >> 
> >> ??
> >> 
> >> Joaquim Luis
> >> 
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jluis at ualg.pt  Mon Sep 27 16:11:43 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Sep 27 16:12:07 2010
Subject: [gdal-dev] Why not netCDF output?
In-Reply-To: <201009272139.14077.even.rouault@mines-paris.org>
References: <4CA0E83F.20409@ualg.pt>
	<201009272102.55960.even.rouault@mines-paris.org>
	<4CA0EE62.1090406@ualg.pt>
	<201009272139.14077.even.rouault@mines-paris.org>
Message-ID: <4CA0FA7F.5080400@ualg.pt>

On 27-09-2010 20:39, Even Rouault wrote:
> Le lundi 27 septembre 2010 21:20:02, Joaquim Luis a ?crit :
>    
>> Thanks Even,
>>
>> I think that's the second time you explain me that (sorry, an easy thing
>> to forget), but the docs could be a bit clearer about this. For example
>>
>> *--formats*
>>      List all raster formats supported by this GDAL build (read-only and
>>      read-write) and exit. The format support is indicated as follows:
>>      'ro' is read-only driver; 'rw' is read or write (ie. supports
>>      CreateCopy); 'rw+' is read, write and update (ie. supports Create).
>>
>> so I though the + was for updating
>>      
> What would you suggest to be clearer ?
>    

Well, using your own words, and to not extend the wording too much. 
Something like

... 'rw+' is read, write and update (ie. supports Create). Note: The 
valid formats for the output of gdalwarp are formats that support the 
Create() method, not just the CreateCopy() method.


> Yes I reproduce it too. I managed to solve it by increasing the 
> SAMPLE_STEPS
> warping option to 60 for example (input source is 5120 x 2560). See
> http://gdal.org/structGDALWarpOptions.html for more explanations
>
> gdalwarp world.tif  -t_srs "+proj=ortho +lon_0=-42 +lat_0=40 +ellps=WGS84"
> out.tif -overwrite -wo SAMPLE_STEPS=60
>    

Thanks. It worked for me too. I have followed this issue that is 
recurrent here in different disguises.
If it was easy to solve you guys would have done it long ago, but about 
a warning message when this problem arises?
I mean, is there any doable way to detect a posteriori that the shit 
happened and the SAMPLE_STEPS can help clean it?

Joaquim
From even.rouault at mines-paris.org  Mon Sep 27 16:28:15 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Sep 27 16:27:55 2010
Subject: [gdal-dev] Why not netCDF output?
In-Reply-To: <4CA0FA7F.5080400@ualg.pt>
References: <4CA0E83F.20409@ualg.pt>
	<201009272139.14077.even.rouault@mines-paris.org>
	<4CA0FA7F.5080400@ualg.pt>
Message-ID: <201009272228.15437.even.rouault@mines-paris.org>

Le lundi 27 septembre 2010 22:11:43, Joaquim Luis a ?crit :

> 
> Well, using your own words, and to not extend the wording too much.
> Something like
> 
> ... 'rw+' is read, write and update (ie. supports Create). Note: The
> valid formats for the output of gdalwarp are formats that support the
> Create() method, not just the CreateCopy() method.

Applied. But note that gdalwarp is just a (common) example. There are also 
other utilities that have this restriction.

> 
> > Yes I reproduce it too. I managed to solve it by increasing the
> > SAMPLE_STEPS
> > warping option to 60 for example (input source is 5120 x 2560). See
> > http://gdal.org/structGDALWarpOptions.html for more explanations
> > 
> > gdalwarp world.tif  -t_srs "+proj=ortho +lon_0=-42 +lat_0=40
> > +ellps=WGS84" out.tif -overwrite -wo SAMPLE_STEPS=60
> 
> Thanks. It worked for me too. I have followed this issue that is
> recurrent here in different disguises.
> If it was easy to solve you guys would have done it long ago, but about
> a warning message when this problem arises?
> I mean, is there any doable way to detect a posteriori that the shit
> happened and the SAMPLE_STEPS can help clean it?

Yes, that's probably doable, but clearly not trivial. I add a hard time (look 
at how ugly/complicated the code now looks...) doing something similar in 
GDALSuggestedWarpOutput2() to guess the extent of the target extent when such 
discontinuities in the reprojection occur (and it  probably doesn't solve 100% 
situations). Something similar (in spirit) would probably be needed in 
GDALWarpOperation::ComputeSourceWindow().

> 
> Joaquim
From jluis at ualg.pt  Mon Sep 27 16:58:36 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Sep 27 16:58:59 2010
Subject: [gdal-dev] Why not netCDF output?
In-Reply-To: <201009272228.15437.even.rouault@mines-paris.org>
References: <4CA0E83F.20409@ualg.pt>
	<201009272139.14077.even.rouault@mines-paris.org>
	<4CA0FA7F.5080400@ualg.pt>
	<201009272228.15437.even.rouault@mines-paris.org>
Message-ID: <4CA1057C.9050704@ualg.pt>


> Yes, that's probably doable, but clearly not trivial. I add a hard time (look
> at how ugly/complicated the code now looks...) doing something similar in
> GDALSuggestedWarpOutput2() to guess the extent of the target extent when such
> discontinuities in the reprojection occur (and it  probably doesn't solve 100%
> situations). Something similar (in spirit) would probably be needed in
> GDALWarpOperation::ComputeSourceWindow().
>    

Yes, big it is and I confess that I didn't even try to comprehend what 
it does. But my suggestion was perhaps simpler (in mind).
My idea was to just give a warning that a discontinuity had occurred and 
advise that the SAMPLE_STEPS can be of much help.
And how to detect the discontinuity? Sure that's the key question, but 
on the current case the -180 and the 180 points should be coincident on 
the target grid, or at least very, very close (in terms of target grid 
steps). If they aren't ... ring the bell

Well just a thought.

Joaquim
From gregcorradini at gmail.com  Mon Sep 27 23:00:30 2010
From: gregcorradini at gmail.com (Greg Corradini)
Date: Mon Sep 27 23:00:32 2010
Subject: [gdal-dev] GDAL easy_install problem
Message-ID: <AANLkTik=WGuO8-LgRpgHC7YpGz9yX2uBw+9aZ+12Nf6t@mail.gmail.com>

Hello,
I'm trying to install GDAL using easy_install as detailed here (
http://trac.osgeo.org/gdal/wiki/GdalOgrInPython). I've never see this error
before on my other GDAL Ubuntu 9.0 installs. Not sure what it means. I'm
wondering if it might have to do with NumPy (I think I screwed that install
up). Any ideas?


# sudo easy_install GDAL
Searching for GDAL
Reading http://pypi.python.org/simple/GDAL/
Reading http://www.gdal.org
Best match: GDAL 1.7.1
Downloading
http://pypi.python.org/packages/source/G/GDAL/GDAL-1.7.1.tar.gz#md5=38b838d528b309a28a3aa24d4fcef3cd
Processing GDAL-1.7.1.tar.gz
Running GDAL-1.7.1/setup.py -q bdist_egg --dist-dir
/tmp/easy_install-drTCwM/GDAL-1.7.1/egg-dist-tmp-nxP_u9
Could not run gdal-config!!!!
cc1plus: warning: command line option "-Wstrict-prototypes" is valid for
Ada/C/ObjC but not for C++
extensions/gdal_wrap.cpp: In function ?int PyProgressProxy(double, const
char*, void*)?:
extensions/gdal_wrap.cpp:2969: warning: the address of ?_Py_NoneStruct? will
never be NULL
extensions/gdal_wrap.cpp: In function ?PyObject*
_wrap_MajorObject_SetMetadata__SWIG_0(PyObject*, PyObject*)?:
extensions/gdal_wrap.cpp:5854: warning: deprecated conversion from string
constant to ?char*?
extensions/gdal_wrap.cpp: In function ?PyObject*
_wrap_PushErrorHandler(PyObject*, PyObject*)?:
extensions/gdal_wrap.cpp:4888: warning: ?argv[0]? may be used uninitialized
in this function
cc1plus: warning: command line option "-Wstrict-prototypes" is valid for
Ada/C/ObjC but not for C++
extensions/osr_wrap.cpp:2906: warning: ?char*
GDALPythonObjectToCStr(PyObject*)? defined but not used
cc1plus: warning: command line option "-Wstrict-prototypes" is valid for
Ada/C/ObjC but not for C++
In file included from extensions/ogr_wrap.cpp:2808:
/usr/local/include/ogr_p.h:94:17: error: swq.h: No such file or directory
In file included from extensions/ogr_wrap.cpp:2808:
/usr/local/include/ogr_p.h:105: error: ?swq_field_type? does not name a type
error: Setup script exited with error: command 'gcc' failed with exit status
1
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100927/ae5e3234/attachment.html
From chaitanya.ch at gmail.com  Tue Sep 28 01:33:20 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Sep 28 01:33:21 2010
Subject: [gdal-dev] GDAL easy_install problem
In-Reply-To: <AANLkTik=WGuO8-LgRpgHC7YpGz9yX2uBw+9aZ+12Nf6t@mail.gmail.com>
References: <AANLkTik=WGuO8-LgRpgHC7YpGz9yX2uBw+9aZ+12Nf6t@mail.gmail.com>
Message-ID: <AANLkTikK3e9SrUM3_JhT930DR-S4Sxr6qo5gbN49sFSv@mail.gmail.com>

Greg,

This issue is actively being pursued. There is a temporary fix for this.
Refer to http://trac.osgeo.org/gdal/ticket/3468#comment:10

On Tue, Sep 28, 2010 at 8:30 AM, Greg Corradini <gregcorradini@gmail.com>wrote:

> Hello,
> I'm trying to install GDAL using easy_install as detailed here (
> http://trac.osgeo.org/gdal/wiki/GdalOgrInPython). I've never see this
> error before on my other GDAL Ubuntu 9.0 installs. Not sure what it means.
> I'm wondering if it might have to do with NumPy (I think I screwed that
> install up). Any ideas?
>
>
> # sudo easy_install GDAL
> Searching for GDAL
> Reading http://pypi.python.org/simple/GDAL/
> Reading http://www.gdal.org
> Best match: GDAL 1.7.1
> Downloading
> http://pypi.python.org/packages/source/G/GDAL/GDAL-1.7.1.tar.gz#md5=38b838d528b309a28a3aa24d4fcef3cd
> Processing GDAL-1.7.1.tar.gz
> Running GDAL-1.7.1/setup.py -q bdist_egg --dist-dir
> /tmp/easy_install-drTCwM/GDAL-1.7.1/egg-dist-tmp-nxP_u9
> Could not run gdal-config!!!!
> cc1plus: warning: command line option "-Wstrict-prototypes" is valid for
> Ada/C/ObjC but not for C++
> extensions/gdal_wrap.cpp: In function ?int PyProgressProxy(double, const
> char*, void*)?:
> extensions/gdal_wrap.cpp:2969: warning: the address of ?_Py_NoneStruct?
> will never be NULL
> extensions/gdal_wrap.cpp: In function ?PyObject*
> _wrap_MajorObject_SetMetadata__SWIG_0(PyObject*, PyObject*)?:
> extensions/gdal_wrap.cpp:5854: warning: deprecated conversion from string
> constant to ?char*?
> extensions/gdal_wrap.cpp: In function ?PyObject*
> _wrap_PushErrorHandler(PyObject*, PyObject*)?:
> extensions/gdal_wrap.cpp:4888: warning: ?argv[0]? may be used uninitialized
> in this function
> cc1plus: warning: command line option "-Wstrict-prototypes" is valid for
> Ada/C/ObjC but not for C++
> extensions/osr_wrap.cpp:2906: warning: ?char*
> GDALPythonObjectToCStr(PyObject*)? defined but not used
> cc1plus: warning: command line option "-Wstrict-prototypes" is valid for
> Ada/C/ObjC but not for C++
> In file included from extensions/ogr_wrap.cpp:2808:
> /usr/local/include/ogr_p.h:94:17: error: swq.h: No such file or directory
> In file included from extensions/ogr_wrap.cpp:2808:
> /usr/local/include/ogr_p.h:105: error: ?swq_field_type? does not name a
> type
> error: Setup script exited with error: command 'gcc' failed with exit
> status 1
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100928/f43e2662/attachment.html
From alexander.bruy at gmail.com  Tue Sep 28 02:41:07 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Tue Sep 28 02:41:10 2010
Subject: [gdal-dev] Accessing in-memory shapefiles and db
Message-ID: <AANLkTi=NsnYAGr7yO6VNicXMgX-djAH7wdK-Awi--ZNY@mail.gmail.com>

Hi all,

I've develop a small GIS tool and use GDAL/OGR to work with raster and
vector data.

Is it possible to access shapefiles which loaded in memory with OGR?
And same things with SpatiaLite databases? I know that SQLIte/SpatiaLite
can create in-memory DB. But is it possible to access such databases
with OGR?

Small example or any hinst will be very useful

Thanks

-- 
Alexander Bruy
From sebastian.ovide at gmail.com  Tue Sep 28 04:58:20 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Tue Sep 28 04:58:45 2010
Subject: [gdal-dev] compiling gdal under linux + OCI without installing
	Oracle
In-Reply-To: <20100927155044.11173.qmail@s466.sureserver.com>
References: <20100927155044.11173.qmail@s466.sureserver.com>
Message-ID: <AANLkTinHuY_2h7uyGZ=on6KwoSjfkaXjECdSqk6_60=T@mail.gmail.com>

great !... wiki updated: http://trac.osgeo.org/gdal/wiki/BuildingOnUnix

On Mon, Sep 27, 2010 at 4:50 PM, Ivan Lucena <ivan.lucena@pmldnet.com>wrote:

> Sebastian,
>
> That might help you:
>
> http://forums.oracle.com/forums/thread.jspa?messageID=4570333 "Thread:
> Building GDAL with geoRaster support in Linux "
>
> Regards,
>
> Ivan
>
> >  -------Original Message-------
> >  From: Sebastian E. Ovide <sebastian.ovide@gmail.com>
> >  To: gdal-dev <gdal-dev@lists.osgeo.org>
> >  Subject: [gdal-dev] compiling gdal under linux + OCI without installing
> Oracle
> >  Sent: Sep 27 '10 10:25
> >
> >  Hi Guys,
> >
> >
> >  I have a VBox (no graphic) with Ubuntu 10.10 and trying to build GDAL +
> >  OCI. Is there anyway of doing it without installing Oracle ?... perhaps
> >  downloading only the -libs ? I know that Oracle is not so light... and
> it
> >  could be problematic under Ubuntu...
> >
> >
> >  thanks
> >
> >  --
> >  Sebastian E. Ovide
> >
> >
> >  --------------------
> >  _______________________________________________
> >  gdal-dev mailing list
> >  [LINK: compose.php?to=gdal-dev@lists.osgeo.org]
> gdal-dev@lists.osgeo.org
> >  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100928/789f4093/attachment.html
From goocreations at gmail.com  Tue Sep 28 06:01:07 2010
From: goocreations at gmail.com (GOO Creations)
Date: Tue Sep 28 06:01:15 2010
Subject: [gdal-dev] GDAL Error 4 - Again
Message-ID: <4CA1BCE3.3080002@gmail.com>

   Hi everyone

I've looked through the mailing-list archive and I know this issue was 
addressed several 100 times, but I still can't find the problem:

This is my code I use to open an image:
const char* f = "/home/goocreations/Documents/blue.pix";
GDALDataset *d = (GDALDataset*) GDALOpen(f,GA_Update);

I'm getting the following error:
ERROR 4: `/home/goocreations/Documents/blue.pix' not recognised as a 
supported file format.

The interesting part is that I have a python GUI (with SIP bindings) 
that calls exactly the same C++ code as above and passed a file path via 
the QFileDialog.
This plugin can open the exact same image 
(/home/goocreations/Documents/blue.pix) correctly through GDAL, although 
some other images sometimes open and sometimes don't (this is weird).

I've read through the archive, and yes the following applies:
- The image actually exists.
- I have full access/permission to the image
- The image is 30mb
- The image is not corrupt, since I can open it through the GUI and 
through QGis.

I've really no idea what's wrong, any idea??

Thanks
Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100928/46e35ac1/attachment-0001.html
From chaitanya.ch at gmail.com  Tue Sep 28 06:17:04 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Sep 28 06:17:06 2010
Subject: [gdal-dev] GDAL Error 4 - Again
In-Reply-To: <4CA1BCE3.3080002@gmail.com>
References: <4CA1BCE3.3080002@gmail.com>
Message-ID: <AANLkTi=CCMs9XJMi2DcXLc2CSvu=Qj3eQ7BJvJ_fGQVU@mail.gmail.com>

Chris,

Did yo remember to make a call to GDALAllRegister() ?
Python automatically calls that when the GDAL module is imported.

On Tue, Sep 28, 2010 at 3:31 PM, GOO Creations <goocreations@gmail.com>wrote:

>  Hi everyone
>
> I've looked through the mailing-list archive and I know this issue was
> addressed several 100 times, but I still can't find the problem:
>
> This is my code I use to open an image:
>                 const char* f = "/home/goocreations/Documents/blue.pix";
>                 GDALDataset *d = (GDALDataset*) GDALOpen(f,GA_Update);
>
> I'm getting the following error:
>                 ERROR 4: `/home/goocreations/Documents/blue.pix' not
> recognised as a supported file format.
>
> The interesting part is that I have a python GUI (with SIP bindings) that
> calls exactly the same C++ code as above and passed a file path via the
> QFileDialog.
> This plugin can open the exact same image
> (/home/goocreations/Documents/blue.pix) correctly through GDAL, although
> some other images sometimes open and sometimes don't (this is weird).
>
> I've read through the archive, and yes the following applies:
> - The image actually exists.
> - I have full access/permission to the image
> - The image is 30mb
> - The image is not corrupt, since I can open it through the GUI and through
> QGis.
>
> I've really no idea what?s wrong, any idea??
>
> Thanks
> Chris
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100928/769793f0/attachment.html
From goocreations at gmail.com  Tue Sep 28 07:07:47 2010
From: goocreations at gmail.com (GOO Creations)
Date: Tue Sep 28 07:07:53 2010
Subject: [gdal-dev] GDAL Error 4 - Again
In-Reply-To: <AANLkTi=CCMs9XJMi2DcXLc2CSvu=Qj3eQ7BJvJ_fGQVU@mail.gmail.com>
References: <4CA1BCE3.3080002@gmail.com>
	<AANLkTi=CCMs9XJMi2DcXLc2CSvu=Qj3eQ7BJvJ_fGQVU@mail.gmail.com>
Message-ID: <4CA1CC83.2020302@gmail.com>

  Yes, but this didn't help either.

Chris


On 2010/09/28 12:17 PM, Chaitanya kumar CH wrote:
> Chris,
>
> Did yo remember to make a call to GDALAllRegister() ?
> Python automatically calls that when the GDAL module is imported.
>
> On Tue, Sep 28, 2010 at 3:31 PM, GOO Creations <goocreations@gmail.com 
> <mailto:goocreations@gmail.com>> wrote:
>
>     Hi everyone
>
>     I've looked through the mailing-list archive and I know this issue
>     was addressed several 100 times, but I still can't find the problem:
>
>     This is my code I use to open an image:
>     const char* f = "/home/goocreations/Documents/blue.pix";
>     GDALDataset *d = (GDALDataset*) GDALOpen(f,GA_Update);
>
>     I'm getting the following error:
>     ERROR 4: `/home/goocreations/Documents/blue.pix' not recognised as
>     a supported file format.
>
>     The interesting part is that I have a python GUI (with SIP
>     bindings) that calls exactly the same C++ code as above and passed
>     a file path via the QFileDialog.
>     This plugin can open the exact same image
>     (/home/goocreations/Documents/blue.pix) correctly through GDAL,
>     although some other images sometimes open and sometimes don't
>     (this is weird).
>
>     I've read through the archive, and yes the following applies:
>     - The image actually exists.
>     - I have full access/permission to the image
>     - The image is 30mb
>     - The image is not corrupt, since I can open it through the GUI
>     and through QGis.
>
>     I've really no idea what?s wrong, any idea??
>
>     Thanks
>     Chris
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100928/019d020b/attachment.html
From ibrahimsaricicek at gmail.com  Tue Sep 28 07:40:49 2010
From: ibrahimsaricicek at gmail.com (Ibrahim Saricicek)
Date: Tue Sep 28 07:40:51 2010
Subject: [gdal-dev] Erdas 2010 and OpenEV different views
Message-ID: <1285674049823-5579024.post@n2.nabble.com>


Hi List,

By Erdas Imagine 2010 I've combined 3 bands (by Spectral/Layer Stack Menu).
Saved as 32 bit. And by "Rescale" menu, rescaled to 8 bit.

The image is shown the same on Mapserver, QGis, Ossim, OpenEv and different
on Erdas Imagine 2010.
You may see the differences on the images. And I attached the image on tif
format.

What is wrong with  QGis, Ossim or OpenEv?

Thanks in advance...
http://osgeo-org.1803224.n2.nabble.com/file/n5579024/erdas.jpg 
http://osgeo-org.1803224.n2.nabble.com/file/n5579024/chip.tif chip.tif 
http://osgeo-org.1803224.n2.nabble.com/file/n5579024/gdal.jpg 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Erdas-2010-and-OpenEV-different-views-tp5579024p5579024.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From goocreations at gmail.com  Tue Sep 28 07:52:38 2010
From: goocreations at gmail.com (GOO Creations)
Date: Tue Sep 28 07:52:44 2010
Subject: [gdal-dev] GDAL Error 4 - Again
In-Reply-To: <AANLkTi=CCMs9XJMi2DcXLc2CSvu=Qj3eQ7BJvJ_fGQVU@mail.gmail.com>
References: <4CA1BCE3.3080002@gmail.com>
	<AANLkTi=CCMs9XJMi2DcXLc2CSvu=Qj3eQ7BJvJ_fGQVU@mail.gmail.com>
Message-ID: <4CA1D706.2060006@gmail.com>

  Sorry guys, seems like my process somehow changed the image along the way.
It works now.

Thanks for the help.

Chris



On 2010/09/28 12:17 PM, Chaitanya kumar CH wrote:
> Chris,
>
> Did yo remember to make a call to GDALAllRegister() ?
> Python automatically calls that when the GDAL module is imported.
>
> On Tue, Sep 28, 2010 at 3:31 PM, GOO Creations <goocreations@gmail.com 
> <mailto:goocreations@gmail.com>> wrote:
>
>     Hi everyone
>
>     I've looked through the mailing-list archive and I know this issue
>     was addressed several 100 times, but I still can't find the problem:
>
>     This is my code I use to open an image:
>     const char* f = "/home/goocreations/Documents/blue.pix";
>     GDALDataset *d = (GDALDataset*) GDALOpen(f,GA_Update);
>
>     I'm getting the following error:
>     ERROR 4: `/home/goocreations/Documents/blue.pix' not recognised as
>     a supported file format.
>
>     The interesting part is that I have a python GUI (with SIP
>     bindings) that calls exactly the same C++ code as above and passed
>     a file path via the QFileDialog.
>     This plugin can open the exact same image
>     (/home/goocreations/Documents/blue.pix) correctly through GDAL,
>     although some other images sometimes open and sometimes don't
>     (this is weird).
>
>     I've read through the archive, and yes the following applies:
>     - The image actually exists.
>     - I have full access/permission to the image
>     - The image is 30mb
>     - The image is not corrupt, since I can open it through the GUI
>     and through QGis.
>
>     I've really no idea what?s wrong, any idea??
>
>     Thanks
>     Chris
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100928/00927a35/attachment.html
From schut at sarvision.nl  Tue Sep 28 07:56:23 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Tue Sep 28 07:56:28 2010
Subject: [gdal-dev] Erdas 2010 and OpenEV different views
In-Reply-To: <1285674049823-5579024.post@n2.nabble.com>
References: <1285674049823-5579024.post@n2.nabble.com>
Message-ID: <4CA1D7E7.8020104@sarvision.nl>

  On 09/28/2010 01:40 PM, Ibrahim Saricicek wrote:
> Hi List,
>
> By Erdas Imagine 2010 I've combined 3 bands (by Spectral/Layer Stack Menu).
> Saved as 32 bit. And by "Rescale" menu, rescaled to 8 bit.
>
> The image is shown the same on Mapserver, QGis, Ossim, OpenEv and different
> on Erdas Imagine 2010.
> You may see the differences on the images. And I attached the image on tif
> format.
>
> What is wrong with  QGis, Ossim or OpenEv?
>
> Thanks in advance...
> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/erdas.jpg
> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/chip.tif
> chip.tif
> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/gdal.jpg

I don't know erdas, but it looks like erdas is applying some scaling 
(aka stretching) while the others don't. You should try to switch of 
scaling in erdas, or apply the same scaling in openev/qgis/etc.

Vincent.
From chaitanya.ch at gmail.com  Tue Sep 28 07:59:21 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Sep 28 07:59:23 2010
Subject: [gdal-dev] Erdas 2010 and OpenEV different views
In-Reply-To: <1285674049823-5579024.post@n2.nabble.com>
References: <1285674049823-5579024.post@n2.nabble.com>
Message-ID: <AANLkTinp7gNWZDwdSngWG__1TpNR+=BjzgMiWPBW1h=1@mail.gmail.com>

Ibrahim,

Try the buttons in openev toolbar with the slant lines. They perform
different kinds of rescaling.

On Tue, Sep 28, 2010 at 5:10 PM, Ibrahim Saricicek <
ibrahimsaricicek@gmail.com> wrote:

>
> Hi List,
>
> By Erdas Imagine 2010 I've combined 3 bands (by Spectral/Layer Stack Menu).
> Saved as 32 bit. And by "Rescale" menu, rescaled to 8 bit.
>
> The image is shown the same on Mapserver, QGis, Ossim, OpenEv and different
> on Erdas Imagine 2010.
> You may see the differences on the images. And I attached the image on tif
> format.
>
> What is wrong with  QGis, Ossim or OpenEv?
>
> Thanks in advance...
> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/erdas.jpg
> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/chip.tif chip.tif
> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/gdal.jpg
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Erdas-2010-and-OpenEV-different-views-tp5579024p5579024.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100928/c7ea16ec/attachment-0001.html
From ibrahimsaricicek at gmail.com  Tue Sep 28 08:56:16 2010
From: ibrahimsaricicek at gmail.com (ibrahim saricicek)
Date: Tue Sep 28 08:56:18 2010
Subject: [gdal-dev] Erdas 2010 and OpenEV different views
In-Reply-To: <AANLkTinp7gNWZDwdSngWG__1TpNR+=BjzgMiWPBW1h=1@mail.gmail.com>
References: <1285674049823-5579024.post@n2.nabble.com>
	<AANLkTinp7gNWZDwdSngWG__1TpNR+=BjzgMiWPBW1h=1@mail.gmail.com>
Message-ID: <AANLkTinn4shNQqGZMProNS2GmfgSzTJ125TR7vzT=H_u@mail.gmail.com>

Hi List,

Thanks "Linear Stretch/ Enhancement" works.
And one more question how can i save the image with "Linear Stretch/
Enhancement" applied?

Regards..

On Tue, Sep 28, 2010 at 2:59 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Ibrahim,
>
> Try the buttons in openev toolbar with the slant lines. They perform
> different kinds of rescaling.
>
> On Tue, Sep 28, 2010 at 5:10 PM, Ibrahim Saricicek <
> ibrahimsaricicek@gmail.com> wrote:
>
>>
>> Hi List,
>>
>> By Erdas Imagine 2010 I've combined 3 bands (by Spectral/Layer Stack
>> Menu).
>> Saved as 32 bit. And by "Rescale" menu, rescaled to 8 bit.
>>
>> The image is shown the same on Mapserver, QGis, Ossim, OpenEv and
>> different
>> on Erdas Imagine 2010.
>> You may see the differences on the images. And I attached the image on tif
>> format.
>>
>> What is wrong with  QGis, Ossim or OpenEv?
>>
>> Thanks in advance...
>> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/erdas.jpg
>> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/chip.tif chip.tif
>> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/gdal.jpg
>> --
>> View this message in context:
>> http://osgeo-org.1803224.n2.nabble.com/Erdas-2010-and-OpenEV-different-views-tp5579024p5579024.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100928/c86ffa08/attachment.html
From chaitanya.ch at gmail.com  Tue Sep 28 09:49:13 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Sep 28 09:49:15 2010
Subject: [gdal-dev] Erdas 2010 and OpenEV different views
In-Reply-To: <AANLkTinn4shNQqGZMProNS2GmfgSzTJ125TR7vzT=H_u@mail.gmail.com>
References: <1285674049823-5579024.post@n2.nabble.com>
	<AANLkTinp7gNWZDwdSngWG__1TpNR+=BjzgMiWPBW1h=1@mail.gmail.com>
	<AANLkTinn4shNQqGZMProNS2GmfgSzTJ125TR7vzT=H_u@mail.gmail.com>
Message-ID: <AANLkTi=ijteNbEWm1C0KLcC_ksZ8ZZR5eiZGGJRJwANZ@mail.gmail.com>

Ibrahim,

I don't think you can save the image that way in openev.
You can use gdal_translate to perform linear scaling.
Use the -scale option. If you think you can stand to lose some info in very
dark or very bright areas, specify appropriate values for src_min and
src_max.

http://www.gdal.org/gdal_translate.html


On Tue, Sep 28, 2010 at 6:26 PM, ibrahim saricicek <
ibrahimsaricicek@gmail.com> wrote:

> Hi List,
>
> Thanks "Linear Stretch/ Enhancement" works.
> And one more question how can i save the image with "Linear Stretch/
> Enhancement" applied?
>
> Regards..
>
>
> On Tue, Sep 28, 2010 at 2:59 PM, Chaitanya kumar CH <chaitanya.ch@
> gmail.com> wrote:
>
>> Ibrahim,
>>
>> Try the buttons in openev toolbar with the slant lines. They perform
>> different kinds of rescaling.
>>
>> On Tue, Sep 28, 2010 at 5:10 PM, Ibrahim Saricicek <
>> ibrahimsaricicek@gmail.com> wrote:
>>
>>>
>>> Hi List,
>>>
>>> By Erdas Imagine 2010 I've combined 3 bands (by Spectral/Layer Stack
>>> Menu).
>>> Saved as 32 bit. And by "Rescale" menu, rescaled to 8 bit.
>>>
>>> The image is shown the same on Mapserver, QGis, Ossim, OpenEv and
>>> different
>>> on Erdas Imagine 2010.
>>> You may see the differences on the images. And I attached the image on
>>> tif
>>> format.
>>>
>>> What is wrong with  QGis, Ossim or OpenEv?
>>>
>>> Thanks in advance...
>>> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/erdas.jpg
>>> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/chip.tif chip.tif
>>> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/gdal.jpg
>>> --
>>> View this message in context:
>>> http://osgeo-org.1803224.n2.nabble.com/Erdas-2010-and-OpenEV-different-views-tp5579024p5579024.html
>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>> /t?a???nj?/ /k?m?r/
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100928/6598da02/attachment.html
From schut at sarvision.nl  Tue Sep 28 10:24:18 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Tue Sep 28 10:24:23 2010
Subject: [gdal-dev] tiff with colortable loses alpha values?
Message-ID: <4CA1FA92.6060201@sarvision.nl>

  Hi,

I'm creating a geotiff with colortable using the python bindings, 
however, the alpha value of the colorentry is lost / always set to 255 
(says gdalinfo on the output image).
Does gdal/geotiff with colortable not support rbga?
Or, what am I doing wrong?

Testcase is below:


from osgeo import gdal
gtiff = gdal.GetDriverByName('GTiff')
ds = gtiff.Create('/home/vincent/test.tif', 1, 1, 1, gdal.GDT_Byte)
ct = gdal.ColorTable()
ct.SetColorEntry(1, (100, 100, 100, 100))
ds.GetRasterBand(1).SetColorTable(ct)

gdalinfo on /home/vincent/test.tif says 100,100,100,255 for colorentry 1...

using gdal from svn, internal geotiff.

Regards,
Vincent.
From ari.jolma at gmail.com  Tue Sep 28 10:54:06 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue Sep 28 10:54:16 2010
Subject: [gdal-dev] Accessing in-memory shapefiles and db
In-Reply-To: <AANLkTi=NsnYAGr7yO6VNicXMgX-djAH7wdK-Awi--ZNY@mail.gmail.com>
References: <AANLkTi=NsnYAGr7yO6VNicXMgX-djAH7wdK-Awi--ZNY@mail.gmail.com>
Message-ID: <4CA2018E.3080308@gmail.com>

On 09/28/2010 09:41 AM, Alexander Bruy wrote:
> Hi all,
>
> I've develop a small GIS tool and use GDAL/OGR to work with raster and
> vector data.
>
> Is it possible to access shapefiles which loaded in memory with OGR?
> And same things with SpatiaLite databases? I know that SQLIte/SpatiaLite
> can create in-memory DB. But is it possible to access such databases
> with OGR?
>
> Small example or any hinst will be very useful
>    

The way to accomplish that in GDAL is to copy the layer to a data source 
controlled by the MEM driver. Depending on which language you work with 
take a look at OGRDataSource::CopyLayer method or one of its FFI's.

Best regards,

Ari

> Thanks
>
>    

From ari.jolma at gmail.com  Tue Sep 28 11:36:16 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue Sep 28 11:36:31 2010
Subject: [gdal-dev] Proposed UTF-8 SWIG Changes
In-Reply-To: <4CA0AAC5.5080303@pobox.com>
References: <4CA0AAC5.5080303@pobox.com>
Message-ID: <4CA20B70.1040909@gmail.com>

On 09/27/2010 05:31 PM, Frank Warmerdam wrote:
> Even, Tamas, Ari, Howard, and other SWIG wise men,
>
> I got lost last night in the SWIG typemaps we use for GDAL, but 
> eventually
> I came up with a minimal patch that seems to make sense and work.  I 
> would
> appreciate it if you guys could skim it and let me know if I'm doing 
> things
> in a really wrong or dangerous way.
>
>  http://trac.osgeo.org/gdal/attachment/ticket/3766/utf8_swig.patch

ok with me, this does not break anything AFAI can see. I'll handle the 
decode/encode for Perl in Perl.

> I am attempting to treat any const char * parameter named utf8_path via
> a custom typemap that uses the preexisting GDALPythonObjectToCStr() to
> convert it.  This appears to take regular strings, and unicode strings
> properly in Python.
>
> In other languages there is no special processing except that I have also
> globally applied the NONNULL typemap to such parameters.
>
> If I got ahead with this, should I add utf8_path in the README.typemaps?

Please do. It's an optional typemap.

Best regards,

Ari


>
> Best regards,

From sebastian.ovide at gmail.com  Tue Sep 28 12:39:39 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Tue Sep 28 12:40:04 2010
Subject: [gdal-dev] ogr problems with MapInfo
Message-ID: <AANLkTikeaDv3UdsWmw6CN8EbFV8dSe=R9VohrJaKHAaQ@mail.gmail.com>

Hi All,

I have built gdal with MapInfo support:

gis@mapserver:~/data/us$ ogrinfo --formats
Supported Formats:
  -> "ESRI Shapefile" (read/write)
  -> "MapInfo File" (read/write)
 ...
...

And I have MapInfo files. Now running ogrinfo:

gis@mapserver:~/data/us$ ogrinfo -ro .
OGR: OGROpen(.) failed.
FAILURE:
Unable to open datasource `.' with the following drivers.
  -> ESRI Shapefile
  -> MapInfo File
...
...

I am using the same data on another machine and it is working well.... so
the data is not corrupted...

any ideas ?




-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100928/ae402ace/attachment.html
From chaitanya.ch at gmail.com  Tue Sep 28 13:18:39 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Sep 28 13:18:41 2010
Subject: [gdal-dev] ogr problems with MapInfo
In-Reply-To: <AANLkTikeaDv3UdsWmw6CN8EbFV8dSe=R9VohrJaKHAaQ@mail.gmail.com>
References: <AANLkTikeaDv3UdsWmw6CN8EbFV8dSe=R9VohrJaKHAaQ@mail.gmail.com>
Message-ID: <AANLkTinv5qG8QSVguS+5YwWO6B-jJXpcKOUYa+ThfuED@mail.gmail.com>

Sebastian,

Can you provide a long list of the directory?

On Tue, Sep 28, 2010 at 10:09 PM, Sebastian E. Ovide <
sebastian.ovide@gmail.com> wrote:

> Hi All,
>
> I have built gdal with MapInfo support:
>
> gis@mapserver:~/data/us$ ogrinfo --formats
> Supported Formats:
>   -> "ESRI Shapefile" (read/write)
>   -> "MapInfo File" (read/write)
>  ...
> ...
>
> And I have MapInfo files. Now running ogrinfo:
>
> gis@mapserver:~/data/us$ ogrinfo -ro .
> OGR: OGROpen(.) failed.
> FAILURE:
> Unable to open datasource `.' with the following drivers.
>   -> ESRI Shapefile
>   -> MapInfo File
> ...
> ...
>
> I am using the same data on another machine and it is working well.... so
> the data is not corrupted...
>
> any ideas ?
>
>
> --
> Sebastian E. Ovide
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100928/2006e8e0/attachment.html
From even.rouault at mines-paris.org  Tue Sep 28 13:29:24 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Sep 28 13:29:31 2010
Subject: [gdal-dev] tiff with colortable loses alpha values?
In-Reply-To: <4CA1FA92.6060201@sarvision.nl>
References: <4CA1FA92.6060201@sarvision.nl>
Message-ID: <201009281929.24876.even.rouault@mines-paris.org>

Vincent,

The TIFF format doesn't allow storing the alpha component, so it is ignored.

See the TIFF specification, section 5 : 
http://partners.adobe.com/public/developer/en/tiff/TIFF6.pdf

Possible workarounds :
* work with RGBA tiff
* add a mask band

Best regards,

Even

Le mardi 28 septembre 2010 16:24:18, Vincent Schut a ?crit :
>   Hi,
> 
> I'm creating a geotiff with colortable using the python bindings,
> however, the alpha value of the colorentry is lost / always set to 255
> (says gdalinfo on the output image).
> Does gdal/geotiff with colortable not support rbga?
> Or, what am I doing wrong?
> 
> Testcase is below:
> 
> 
> from osgeo import gdal
> gtiff = gdal.GetDriverByName('GTiff')
> ds = gtiff.Create('/home/vincent/test.tif', 1, 1, 1, gdal.GDT_Byte)
> ct = gdal.ColorTable()
> ct.SetColorEntry(1, (100, 100, 100, 100))
> ds.GetRasterBand(1).SetColorTable(ct)
> 
> gdalinfo on /home/vincent/test.tif says 100,100,100,255 for colorentry 1...
> 
> using gdal from svn, internal geotiff.
> 
> Regards,
> Vincent.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Tue Sep 28 15:01:25 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Sep 28 15:01:31 2010
Subject: [gdal-dev] Re: NITF driver reads GEOLOB, but does not write it.
In-Reply-To: <119492.36318.qm@web111304.mail.gq1.yahoo.com>
References: <119492.36318.qm@web111304.mail.gq1.yahoo.com>
Message-ID: <201009282101.25219.even.rouault@mines-paris.org>

Cool, thanks for your feedback. I could also test it successfully with 
GeoGenesis LITE that visibly takes into account the GEOLOB & GEOPSB TRE when 
available.

I've commited the changes in trunk in r20708 with minor variations (comments, 
and so on). The only change that you'd notice is that I renamed the creation 
option to be SDE_TRE, so that in the future it can be also used to write 
MAPLOB & PRJPSB TRE in case of projected SRS.

Le mardi 28 septembre 2010 17:41:35, Frank Evans a ?crit :
> Even, I downloaded and compiled the GDAL trunk, then added your changes. It
> worked perfectly. See the attached screenshot.
> 
> gdal_translate -of NITF -co WRITE_GEOLOB=YES -co \
> BLOCKXSIZE=1024 -co BLOCKYSIZE=1024 \
> foo.tif foo.ntf
> 
> I'm actually working against an older release (1.7), so I'll need to do a
> little merging, but things are looking very good.
> 
> I'm very grateful for your help. Is there any other information I can
> provide?
> 
> 
> --- On Sun, 9/26/10, Frank Evans <frankhevans@yahoo.com> wrote:
> 
> From: Frank Evans <frankhevans@yahoo.com>
> Subject: Re: [gdal-dev] Re: NITF driver reads GEOLOB, but does not write
> it. To: "Even Rouault" <even.rouault@mines-paris.org>
> Date: Sunday, September 26, 2010, 2:18 PM
> 
> In the case of Global Mapper I might not have been clear.
> 
> Global Mapper Summary
> Even though GlobalMapper does not use GEOLOB, specifying the GEOLOB "broke"
> the NITF for GlobalMapper because it changed the IGEOLO to Decimal
> Degrees, GlobalMapper didn't complain. But it registered the image in the
> wrong location (way wrong).
> 
> After I applied the change you suggested, GlobalMapper was able to read the
> IGEOLO. But you are right, it probably ignores the GEOLOB.
> 
> ERDAS Summary (version 10)
> Like GlobalMapper, ERDAS also chokes unless ICORDS='G'If you add the GEOLOB
> and set ICORDS='G', ERDAS will read the NITF but you don't get the
> accuracy.If you add the GEOLOB, and add the GEOPSB, and also specify
> ICORDS='G', then you get submeter accuracy which lines up with the
> original image.
> 
> I wrote the GEOPSB as a TRE, not as a FILE_TRE. I will try FILE_TRE, and
> let you know. I will definitely test the patch. Thanks very much....
> 
> 
> 
> 
> 
> --- On Sun, 9/26/10, Even Rouault <even.rouault@mines-paris.org> wrote:
> 
> From: Even Rouault <even.rouault@mines-paris.org>
> Subject: Re: [gdal-dev] Re: NITF driver reads GEOLOB, but does not write
> it. To: "turtlewax" <frankhevans@yahoo.com>
> Date: Sunday, September 26, 2010, 1:34 PM
> 
> Hi,
> 
> Which Global Mapper version did you try ? I tried with v11 and v12
> (evaluation) versions and they don't appear to read GEOPSB and/or GEOLOB at
> all (for the sake of testing, I applied a big shift in the longitudes of
> the IGEOLO field to be sure to
>  distinguish if GEOLOB was used (1)), so I'm
> surprised by your report. Are you really sure that GEOLOB was used ?
> 
> I have not access to ERDAS software to test neither.
> 
> By the way, when reading the  specs, to be valid, the GEOPSB TRE must be
> written as a file header TRE (FILE_TRE=xxxx creation option in GDAL), and
> not as a image header TRE (TRE=xxxx creation option in GDAL). Which one
> did you use ?
> 
> I've attached a patch against latest SVN trunk (and the archive of the
> frmts/nitf directory) with all the that writes the GEOLOB and GEOPSB TRE
> from the georeferencing info, provided that you specify the
> WRITE_GEOLOB=YES creation option. Would you mind testing it and reporting
> if it works with the other software ?
> 
> Best regards,
> 
> Even
> 
> (1) You can do that for example by adding the following lines at the
> beginning of NITFWriteIGEOLO() in nitfimage.c
> 
>     dfULX +=
>  100;
>     dfURX += 100;
>     dfLRX += 100;
>     dfLLX += 100;
> 
> Le samedi 25 septembre 2010 23:41:22, turtlewax a ?crit :
> > Thanks, you were right on both counts.
> > 1. Code change in nitfimage.c fixed the ERDAS/Global Mapper error.
> > 2. To get the improved accuracy I did have to specify the GEOPSB TRE as
> > well.
> > 
> > To make this work in mapserver I'll need to do something like the
> > following, but that means the OUTPUTFORMAT will be specific to each
> > raster/layer, so a mapfile can only contain a single layer.
> >
> >   OUTPUTFORMAT
> >     NAME NITF
> >     DRIVER "GDAL/NITF"
> >     IMAGEMODE RGB
> >     MIMETYPE "image/nitf"
> >     EXTENSION "ntf"
> >     #The following option needs to be
> 
>  specific to each layer
> 
> >     FORMATOPTION
> >
> > "TRE=GEOLOB=073932800080076800-136.9774560321+045.1446198929"
> >
> >   END
From jukka.rahkonen at mmmtike.fi  Tue Sep 28 15:59:26 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Sep 28 15:59:36 2010
Subject: [gdal-dev] Re: Erdas 2010 and OpenEV different views
References: <1285674049823-5579024.post@n2.nabble.com>
	<AANLkTinp7gNWZDwdSngWG__1TpNR+=BjzgMiWPBW1h=1@mail.gmail.com>
	<AANLkTinn4shNQqGZMProNS2GmfgSzTJ125TR7vzT=H_u@mail.gmail.com>
Message-ID: <loom.20100928T215611-351@post.gmane.org>

ibrahim saricicek <ibrahimsaricicek <at> gmail.com> writes:

> 
> 
> Hi List,Thanks "Linear Stretch/ Enhancement" works.And one more question
> how can i save the image with "Linear Stretch/ Enhancement" applied?Regards..

I was goint to suggest you to try OSSIM Image linker, it is rather a lot
ERDAS-like, but I notised you have already tried it. Not satisfied with it?

-Jukka Rahkonen-





From ibrahimsaricicek at gmail.com  Wed Sep 29 02:59:38 2010
From: ibrahimsaricicek at gmail.com (ibrahim saricicek)
Date: Wed Sep 29 02:59:41 2010
Subject: [gdal-dev] Erdas 2010 and OpenEV different views
In-Reply-To: <AANLkTi=ijteNbEWm1C0KLcC_ksZ8ZZR5eiZGGJRJwANZ@mail.gmail.com>
References: <1285674049823-5579024.post@n2.nabble.com>
	<AANLkTinp7gNWZDwdSngWG__1TpNR+=BjzgMiWPBW1h=1@mail.gmail.com>
	<AANLkTinn4shNQqGZMProNS2GmfgSzTJ125TR7vzT=H_u@mail.gmail.com>
	<AANLkTi=ijteNbEWm1C0KLcC_ksZ8ZZR5eiZGGJRJwANZ@mail.gmail.com>
Message-ID: <AANLkTiktwQVGLYD15=+iJKR_H_mo9Wh8R+c=p4n2809e@mail.gmail.com>

Dear List,

>From OpenEv, Exporting with "Advanced Options/Scale to View Settings" works
now.
Thanks a lot...

Regards..

On Tue, Sep 28, 2010 at 4:49 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Ibrahim,
>
> I don't think you can save the image that way in openev.
> You can use gdal_translate to perform linear scaling.
> Use the -scale option. If you think you can stand to lose some info in very
> dark or very bright areas, specify appropriate values for src_min and
> src_max.
>
> http://www.gdal.org/gdal_translate.html
>
>
>
> On Tue, Sep 28, 2010 at 6:26 PM, ibrahim saricicek <
> ibrahimsaricicek@gmail.com> wrote:
>
>> Hi List,
>>
>> Thanks "Linear Stretch/ Enhancement" works.
>> And one more question how can i save the image with "Linear Stretch/
>> Enhancement" applied?
>>
>> Regards..
>>
>>
>> On Tue, Sep 28, 2010 at 2:59 PM, Chaitanya kumar CH <chaitanya.ch@
>> gmail.com> wrote:
>>
>>> Ibrahim,
>>>
>>> Try the buttons in openev toolbar with the slant lines. They perform
>>> different kinds of rescaling.
>>>
>>> On Tue, Sep 28, 2010 at 5:10 PM, Ibrahim Saricicek <
>>> ibrahimsaricicek@gmail.com> wrote:
>>>
>>>>
>>>> Hi List,
>>>>
>>>> By Erdas Imagine 2010 I've combined 3 bands (by Spectral/Layer Stack
>>>> Menu).
>>>> Saved as 32 bit. And by "Rescale" menu, rescaled to 8 bit.
>>>>
>>>> The image is shown the same on Mapserver, QGis, Ossim, OpenEv and
>>>> different
>>>> on Erdas Imagine 2010.
>>>> You may see the differences on the images. And I attached the image on
>>>> tif
>>>> format.
>>>>
>>>> What is wrong with  QGis, Ossim or OpenEv?
>>>>
>>>> Thanks in advance...
>>>> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/erdas.jpg
>>>> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/chip.tif chip.tif
>>>> http://osgeo-org.1803224.n2.nabble.com/file/n5579024/gdal.jpg
>>>> --
>>>> View this message in context:
>>>> http://osgeo-org.1803224.n2.nabble.com/Erdas-2010-and-OpenEV-different-views-tp5579024p5579024.html
>>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>> /t?a???nj?/ /k?m?r/
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100929/9b254866/attachment-0001.html
From sebastian.ovide at gmail.com  Wed Sep 29 04:26:05 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Wed Sep 29 04:26:27 2010
Subject: [gdal-dev] ogr problems with MapInfo
In-Reply-To: <AANLkTinv5qG8QSVguS+5YwWO6B-jJXpcKOUYa+ThfuED@mail.gmail.com>
References: <AANLkTikeaDv3UdsWmw6CN8EbFV8dSe=R9VohrJaKHAaQ@mail.gmail.com>
	<AANLkTinv5qG8QSVguS+5YwWO6B-jJXpcKOUYa+ThfuED@mail.gmail.com>
Message-ID: <AANLkTimqXTVCAyLJG0kDQc5qcRe_itqK+U9YjxpvBE=f@mail.gmail.com>

Is there anyway to get more verbose outputs ?


gis@mapserver:~/data/us$ ls -la .
-rwxr-xr-x 1 gis root   3512226 2010-09-28 17:10 CA_Wild Fire Bundle.DAT
-rwxr-xr-x 1 gis root    413184 2010-09-28 17:10 CA_Wild Fire Bundle.ID
-rwxr-xr-x 1 gis root   6606336 2010-09-28 17:10 CA_Wild Fire Bundle.IND
-rwxr-xr-x 1 gis root 117387776 2010-09-28 17:11 CA_Wild Fire Bundle.MAP
-rwxr-xr-x 1 gis root       478 2010-09-28 17:10 CA_Wild Fire Bundle.TAB

gis@mapserver:~/data/us$ ogrinfo CA_Wild\ Fire\ Bundle.TAB
FAILURE:
Unable to open datasource `CA_Wild Fire Bundle.TAB' with the following
drivers.
  -> ESRI Shapefile
  -> MapInfo File
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> S57
  -> DGN
  -> VRT
  -> REC
  -> Memory
  -> BNA
  -> CSV
  -> GML
  -> GPX
  -> KML
  -> GeoJSON
  -> GMT
  -> OCI
  -> PCIDSK
  -> XPlane
  -> AVCBin
  -> AVCE00
  -> DXF
  -> Geoconcept
  -> GeoRSS
  -> GPSTrackMaker
  -> VFK
gis@mapserver:~/data/us$


from another machine on the same data:

sebas@SeansPC:~$ ogrinfo MapInfo/CA_Wild\ Fire\ Bundle.TAB
Had to open data source read-only.
INFO: Open of `MapInfo/CA_Wild Fire Bundle.TAB'
      using driver `MapInfo File' successful.
1: CA_Wild Fire Bundle
sebas@SeansPC:~$



On Tue, Sep 28, 2010 at 6:18 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Sebastian,
>
> Can you provide a long list of the directory?
>
> On Tue, Sep 28, 2010 at 10:09 PM, Sebastian E. Ovide <
> sebastian.ovide@gmail.com> wrote:
>
>> Hi All,
>>
>> I have built gdal with MapInfo support:
>>
>> gis@mapserver:~/data/us$ ogrinfo --formats
>> Supported Formats:
>>   -> "ESRI Shapefile" (read/write)
>>   -> "MapInfo File" (read/write)
>>  ...
>> ...
>>
>> And I have MapInfo files. Now running ogrinfo:
>>
>> gis@mapserver:~/data/us$ ogrinfo -ro .
>> OGR: OGROpen(.) failed.
>> FAILURE:
>> Unable to open datasource `.' with the following drivers.
>>   -> ESRI Shapefile
>>   -> MapInfo File
>> ...
>> ...
>>
>> I am using the same data on another machine and it is working well.... so
>> the data is not corrupted...
>>
>> any ideas ?
>>
>>
>> --
>> Sebastian E. Ovide
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100929/46807d4b/attachment.html
From sebastian.ovide at gmail.com  Wed Sep 29 04:40:20 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Wed Sep 29 04:40:43 2010
Subject: [gdal-dev] ogr problems with MapInfo
In-Reply-To: <AANLkTinv5qG8QSVguS+5YwWO6B-jJXpcKOUYa+ThfuED@mail.gmail.com>
References: <AANLkTikeaDv3UdsWmw6CN8EbFV8dSe=R9VohrJaKHAaQ@mail.gmail.com>
	<AANLkTinv5qG8QSVguS+5YwWO6B-jJXpcKOUYa+ThfuED@mail.gmail.com>
Message-ID: <AANLkTikMEyWxC+wbqH9+YfQiJcaO74BOGyCdOX3V_2nz@mail.gmail.com>

ok guys, something weird is happening...

I have the data in a windows share folder on another machine. So I have
mounted that folder on a VBox Ubuntu. ogrinfo would not work on those files.

I copied those files to another directory:

us is the smb folder
tmp is a local folder

cp us/* tmp/

on tmp ogrinfo works like a charm !!!

any ideas ?

On Tue, Sep 28, 2010 at 6:18 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Sebastian,
>
> Can you provide a long list of the directory?
>
> On Tue, Sep 28, 2010 at 10:09 PM, Sebastian E. Ovide <
> sebastian.ovide@gmail.com> wrote:
>
>> Hi All,
>>
>> I have built gdal with MapInfo support:
>>
>> gis@mapserver:~/data/us$ ogrinfo --formats
>> Supported Formats:
>>   -> "ESRI Shapefile" (read/write)
>>   -> "MapInfo File" (read/write)
>>  ...
>> ...
>>
>> And I have MapInfo files. Now running ogrinfo:
>>
>> gis@mapserver:~/data/us$ ogrinfo -ro .
>> OGR: OGROpen(.) failed.
>> FAILURE:
>> Unable to open datasource `.' with the following drivers.
>>   -> ESRI Shapefile
>>   -> MapInfo File
>> ...
>> ...
>>
>> I am using the same data on another machine and it is working well.... so
>> the data is not corrupted...
>>
>> any ideas ?
>>
>>
>> --
>> Sebastian E. Ovide
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100929/505aaf89/attachment.html
From schut at sarvision.nl  Wed Sep 29 05:02:55 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Sep 29 05:02:59 2010
Subject: [gdal-dev] tiff with colortable loses alpha values?
In-Reply-To: <201009281929.24876.even.rouault@mines-paris.org>
References: <4CA1FA92.6060201@sarvision.nl>
	<201009281929.24876.even.rouault@mines-paris.org>
Message-ID: <4CA300BF.6040000@sarvision.nl>

  On 09/28/2010 07:29 PM, Even Rouault wrote:
> Vincent,
>
> The TIFF format doesn't allow storing the alpha component, so it is ignored.
>
> See the TIFF specification, section 5 :
> http://partners.adobe.com/public/developer/en/tiff/TIFF6.pdf
>
> Possible workarounds :
> * work with RGBA tiff
> * add a mask band
>
> Best regards,
>
> Even
Even,

thanks for the info. I already was afraid it wouldn't...
I'll go and write 4band rgba tiffs directly, then.

Best,
Vincent.
> Le mardi 28 septembre 2010 16:24:18, Vincent Schut a ?crit :
>>    Hi,
>>
>> I'm creating a geotiff with colortable using the python bindings,
>> however, the alpha value of the colorentry is lost / always set to 255
>> (says gdalinfo on the output image).
>> Does gdal/geotiff with colortable not support rbga?
>> Or, what am I doing wrong?
>>
>> Testcase is below:
>>
>>
>> from osgeo import gdal
>> gtiff = gdal.GetDriverByName('GTiff')
>> ds = gtiff.Create('/home/vincent/test.tif', 1, 1, 1, gdal.GDT_Byte)
>> ct = gdal.ColorTable()
>> ct.SetColorEntry(1, (100, 100, 100, 100))
>> ds.GetRasterBand(1).SetColorTable(ct)
>>
>> gdalinfo on /home/vincent/test.tif says 100,100,100,255 for colorentry 1...
>>
>> using gdal from svn, internal geotiff.
>>
>> Regards,
>> Vincent.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From dmorissette at mapgears.com  Wed Sep 29 10:41:39 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Sep 29 10:49:26 2010
Subject: [gdal-dev] ogr problems with MapInfo
In-Reply-To: <AANLkTikMEyWxC+wbqH9+YfQiJcaO74BOGyCdOX3V_2nz@mail.gmail.com>
References: <AANLkTikeaDv3UdsWmw6CN8EbFV8dSe=R9VohrJaKHAaQ@mail.gmail.com>	<AANLkTinv5qG8QSVguS+5YwWO6B-jJXpcKOUYa+ThfuED@mail.gmail.com>
	<AANLkTikMEyWxC+wbqH9+YfQiJcaO74BOGyCdOX3V_2nz@mail.gmail.com>
Message-ID: <4CA35023.2060007@mapgears.com>

Sebastian E. Ovide wrote:
> ok guys, something weird is happening...
> 
> I have the data in a windows share folder on another machine. So I have
> mounted that folder on a VBox Ubuntu. ogrinfo would not work on those files.
> 
> I copied those files to another directory:
> 
> us is the smb folder
> tmp is a local folder
> 
> cp us/* tmp/
> 
> on tmp ogrinfo works like a charm !!!
> 
> any ideas ?
> 

That's very odd.

Perhaps try setting the environment variable CPL_DEBUG=ON and try again.
This may give us a clue about what is going wrong.

You could also try reading your dataset using the MITAB library's
TAB2TAB program directly and see if you get more useful info.
(http://mitab.maptools.org/)

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From dmorissette at mapgears.com  Wed Sep 29 12:17:03 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Sep 29 12:17:06 2010
Subject: [gdal-dev] MOTION: Add Alan Boudreault as GDAL/OGR committer
Message-ID: <4CA3667F.1010508@mapgears.com>

MOTION: To add Alan Boudreault as GDAL/OGR committer


Alan is already a committer of the MITAB project whose code is used for
the MapInfo MIF/TAB OGR driver, and he has contributed several fixes and
enhancements to MITAB in the last couple of years.

With GDAL/OGR commit rights, Alan would be more easily able to help
maintain the MITAB OGR driver up to date with the upstream version.

I start with my +1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From warmerdam at pobox.com  Wed Sep 29 12:17:23 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep 29 12:22:41 2010
Subject: [gdal-dev] MOTION: Add Alan Boudreault as GDAL/OGR committer
In-Reply-To: <4CA3667F.1010508@mapgears.com>
References: <4CA3667F.1010508@mapgears.com>
Message-ID: <4CA36693.3080800@pobox.com>

Daniel Morissette wrote:
> MOTION: To add Alan Boudreault as GDAL/OGR committer

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Wed Sep 29 13:14:04 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep 29 13:14:07 2010
Subject: [gdal-dev] MOTION: Add Alan Boudreault as GDAL/OGR committer
In-Reply-To: <4CA3667F.1010508@mapgears.com>
References: <4CA3667F.1010508@mapgears.com>
Message-ID: <201009291914.04925.even.rouault@mines-paris.org>

Le mercredi 29 septembre 2010 18:17:03, Daniel Morissette a ?crit :
> MOTION: To add Alan Boudreault as GDAL/OGR committer
> 
+1

Even
From hobu.inc at gmail.com  Wed Sep 29 13:32:22 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Sep 29 13:31:44 2010
Subject: [gdal-dev] MOTION: Add Alan Boudreault as GDAL/OGR committer
In-Reply-To: <201009291914.04925.even.rouault@mines-paris.org>
References: <4CA3667F.1010508@mapgears.com>
	<201009291914.04925.even.rouault@mines-paris.org>
Message-ID: <4097E9BE-B9F2-4FC5-93A1-A9D2A43201C7@gmail.com>



On Sep 29, 2010, at 12:14 PM, Even Rouault <even.rouault@mines-paris.org> wrote:

> Le mercredi 29 septembre 2010 18:17:03, Daniel Morissette a ?crit :
>> MOTION: To add Alan Boudreault as GDAL/OGR committer
>> 
> +1
> 

+1

Howard
From Mario.Beaulieu at crim.ca  Wed Sep 29 14:48:55 2010
From: Mario.Beaulieu at crim.ca (Mario Beaulieu)
Date: Wed Sep 29 15:19:07 2010
Subject: [gdal-dev] Creatin an image file from scratch
Message-ID: <09e78e78-7087-43cb-8001-db8b30ec0fc7@corpo.crim.ca>


****Hi, I am trying to create a TIFF file from scratch by doing this :
GDALDriver* pDriver = (GDALDriver*) GDALGetDriverByName("GTiff"); GDALDataset* pOutDS = pDriver->Create( sFilePath.c_str(), m_lWidth, m_lHeight, m_lNumberOfBands, GDT_Byte, NULL);GDALClose(pOutDS );**** It creates the file but it failed when iI try to loaded it.  I got  ... not recognised as a supported file formatGDALDataset* pOutDS2  = (GDALDataset*) GDALOpenShared(sFilePath.c_str(), GA_Update); What missing? 
Mario Beaulieu
Agent de recherche senior
?quipe Vision & Imagerie
CRIM (Centre de recherche informatique de Montr?al /
Computer Research Institut of Montreal)
514-840-1235, poste 2478
mario.beaulieu@crim.ca
www.crim.ca  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100929/d1b5362d/attachment.html
From didier.richard at ign.fr  Wed Sep 29 14:41:52 2010
From: didier.richard at ign.fr (RICHARD Didier)
Date: Wed Sep 29 15:29:40 2010
Subject: [gdal-dev] MOTION: Add Alan Boudreault as GDAL/OGR committer
In-Reply-To: <4CA3667F.1010508@mapgears.com>
References: <4CA3667F.1010508@mapgears.com>
Message-ID: <34581.87.231.96.39.1285785712.squirrel@webmail.ign.fr>


> MOTION: To add Alan Boudreault as GDAL/OGR committer
>

+1 didier

> Daniel
> --
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
RICHARD Didier - Chef du p?le technique du G?oportail
2/4, avenue Pasteur - 94165 Saint Mand? Cedex
T?l : +33 (0) 1 43 98 83 23
From szekerest at gmail.com  Wed Sep 29 16:09:27 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Sep 29 16:09:28 2010
Subject: [gdal-dev] MOTION: Add Alan Boudreault as GDAL/OGR committer
In-Reply-To: <4CA3667F.1010508@mapgears.com>
References: <4CA3667F.1010508@mapgears.com>
Message-ID: <AANLkTi=7Z4AcrFYZNe7Xegt+PhGs2GH3Ki8shTn6J40y@mail.gmail.com>

+1

Tamas



2010/9/29 Daniel Morissette <dmorissette@mapgears.com>

> MOTION: To add Alan Boudreault as GDAL/OGR committer
>
>
> Alan is already a committer of the MITAB project whose code is used for
> the MapInfo MIF/TAB OGR driver, and he has contributed several fixes and
> enhancements to MITAB in the last couple of years.
>
> With GDAL/OGR commit rights, Alan would be more easily able to help
> maintain the MITAB OGR driver up to date with the upstream version.
>
> I start with my +1
>
> Daniel
> --
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100929/bf3dfcde/attachment.html
From craig.destigter at koordinates.com  Wed Sep 29 16:27:01 2010
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Wed Sep 29 16:27:05 2010
Subject: [gdal-dev] cubic / bilinear resampling with gdalwarp looks similar
	to nearest neighbour
Message-ID: <AANLkTing7zvNaZrwjfAfNv2KoazrZmAhc1P3M3keLy5D@mail.gmail.com>

Hi folks

I filed this bug <http://trac.osgeo.org/gdal/ticket/3740> on gdal a few
weeks back and haven't heard anything since.

Would someone mind taking a look at it?

Thanks
Craig de Stigter

-- 
Koordinates Ltd
PO Box 1604, Shortland St, Auckland, New Zealand
Phone +64-9-966 0433 Fax +64-9-969 0045
Web http://www.koordinates.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100930/f2a19d96/attachment.html
From even.rouault at mines-paris.org  Wed Sep 29 17:34:33 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Sep 29 17:34:35 2010
Subject: [gdal-dev] cubic / bilinear resampling with gdalwarp looks
	similar to nearest neighbour
In-Reply-To: <AANLkTing7zvNaZrwjfAfNv2KoazrZmAhc1P3M3keLy5D@mail.gmail.com>
References: <AANLkTing7zvNaZrwjfAfNv2KoazrZmAhc1P3M3keLy5D@mail.gmail.com>
Message-ID: <201009292334.33205.even.rouault@mines-paris.org>

Craig,

The main reason is that you are using gdalwarp to reduce an image by a large 
factor and not reproject it, which generally only involves image resizing by 
small factors. The implementation of the bilinear and cubic resampling 
algorithms is currently not designed for the pure resizing use case and takes 
only into account a few source pixels (basically if to compute a destination 
pixel you would need to take into account a 5x5 source window, they will only 
used the 4 corners of that square, which fine usually since those are just the 
immediate neighbours of the source pixel), whereas cubicspline and lancsoz 
take into account more pixels (all the pixels in the 5x5 square).

Best regards,

Even

Le mercredi 29 septembre 2010 22:27:01, Craig de Stigter a ?crit :
> Hi folks
> 
> I filed this bug <http://trac.osgeo.org/gdal/ticket/3740> on gdal a few
> weeks back and haven't heard anything since.
> 
> Would someone mind taking a look at it?
> 
> Thanks
> Craig de Stigter
From warmerdam at pobox.com  Wed Sep 29 17:50:07 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Sep 29 17:55:24 2010
Subject: [gdal-dev] Creatin an image file from scratch
In-Reply-To: <09e78e78-7087-43cb-8001-db8b30ec0fc7@corpo.crim.ca>
References: <09e78e78-7087-43cb-8001-db8b30ec0fc7@corpo.crim.ca>
Message-ID: <4CA3B48F.9010501@pobox.com>

Mario Beaulieu wrote:
> ****Hi, I am trying to create a TIFF file from scratch by doing this :
> 
> GDALDriver* pDriver = (GDALDriver*) GDALGetDriverByName("GTiff");
> 
> GDALDataset* pOutDS = pDriver->Create( sFilePath.c_str(), m_lWidth, 
> m_lHeight, m_lNumberOfBands, GDT_Byte, NULL);
> 
> GDALClose(pOutDS );
> 
> **** It creates the file but it failed when iI try to loaded it.  I got  
> ... not recognised as a supported file format
> 
> GDALDataset* pOutDS2  = (GDALDataset*) GDALOpenShared(sFilePath.c_str(), 
> GA_Update);
> 
>  
> 
> What missing?

Mario,

I don't see an obvious problem.  Could you prepare a minimal sample program
that demonstrates the problem so I could try it here?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From craig.destigter at koordinates.com  Wed Sep 29 18:12:12 2010
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Wed Sep 29 18:13:44 2010
Subject: [gdal-dev] cubic / bilinear resampling with gdalwarp looks
	similar to nearest neighbour
In-Reply-To: <201009292334.33205.even.rouault@mines-paris.org>
References: <AANLkTing7zvNaZrwjfAfNv2KoazrZmAhc1P3M3keLy5D@mail.gmail.com>
	<201009292334.33205.even.rouault@mines-paris.org>
Message-ID: <AANLkTinrg33ruOQS-uiga4=xYvbFvTQ85F1bLk8kvfpy@mail.gmail.com>

Thanks Even

However if I do the same thing with reprojection I get the same result.
gdalwarp output looks sharp and ugly, imagemagick output looks nice.

Is there any way to force the bilinear/cubic interpolation to notice more
pixels? The other interpolation methods are much slower, I imagine even
forcing cubic to notice all of the 5x5 pixels would still be faster.

Regards
Craig de Stigter

On Thu, Sep 30, 2010 at 10:34 AM, Even Rouault <even.rouault@mines-paris.org
> wrote:

> Craig,
>
> The main reason is that you are using gdalwarp to reduce an image by a
> large
> factor and not reproject it, which generally only involves image resizing
> by
> small factors. The implementation of the bilinear and cubic resampling
> algorithms is currently not designed for the pure resizing use case and
> takes
> only into account a few source pixels (basically if to compute a
> destination
> pixel you would need to take into account a 5x5 source window, they will
> only
> used the 4 corners of that square, which fine usually since those are just
> the
> immediate neighbours of the source pixel), whereas cubicspline and lancsoz
> take into account more pixels (all the pixels in the 5x5 square).
>
> Best regards,
>
> Even
>
> Le mercredi 29 septembre 2010 22:27:01, Craig de Stigter a ?crit :
> > Hi folks
> >
> > I filed this bug <http://trac.osgeo.org/gdal/ticket/3740> on gdal a few
> > weeks back and haven't heard anything since.
> >
> > Would someone mind taking a look at it?
> >
> > Thanks
> > Craig de Stigter
>



-- 
Koordinates Ltd
PO Box 1604, Shortland St, Auckland, New Zealand
Phone +64-9-966 0433 Fax +64-9-969 0045
Web http://www.koordinates.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100930/3c9fa75c/attachment.html
From craig.destigter at koordinates.com  Wed Sep 29 18:12:12 2010
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Wed Sep 29 18:13:46 2010
Subject: [gdal-dev] cubic / bilinear resampling with gdalwarp looks
	similar to nearest neighbour
In-Reply-To: <201009292334.33205.even.rouault@mines-paris.org>
References: <AANLkTing7zvNaZrwjfAfNv2KoazrZmAhc1P3M3keLy5D@mail.gmail.com>
	<201009292334.33205.even.rouault@mines-paris.org>
Message-ID: <AANLkTinrg33ruOQS-uiga4=xYvbFvTQ85F1bLk8kvfpy@mail.gmail.com>

Thanks Even

However if I do the same thing with reprojection I get the same result.
gdalwarp output looks sharp and ugly, imagemagick output looks nice.

Is there any way to force the bilinear/cubic interpolation to notice more
pixels? The other interpolation methods are much slower, I imagine even
forcing cubic to notice all of the 5x5 pixels would still be faster.

Regards
Craig de Stigter

On Thu, Sep 30, 2010 at 10:34 AM, Even Rouault <even.rouault@mines-paris.org
> wrote:

> Craig,
>
> The main reason is that you are using gdalwarp to reduce an image by a
> large
> factor and not reproject it, which generally only involves image resizing
> by
> small factors. The implementation of the bilinear and cubic resampling
> algorithms is currently not designed for the pure resizing use case and
> takes
> only into account a few source pixels (basically if to compute a
> destination
> pixel you would need to take into account a 5x5 source window, they will
> only
> used the 4 corners of that square, which fine usually since those are just
> the
> immediate neighbours of the source pixel), whereas cubicspline and lancsoz
> take into account more pixels (all the pixels in the 5x5 square).
>
> Best regards,
>
> Even
>
> Le mercredi 29 septembre 2010 22:27:01, Craig de Stigter a ?crit :
> > Hi folks
> >
> > I filed this bug <http://trac.osgeo.org/gdal/ticket/3740> on gdal a few
> > weeks back and haven't heard anything since.
> >
> > Would someone mind taking a look at it?
> >
> > Thanks
> > Craig de Stigter
>



-- 
Koordinates Ltd
PO Box 1604, Shortland St, Auckland, New Zealand
Phone +64-9-966 0433 Fax +64-9-969 0045
Web http://www.koordinates.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100930/3c9fa75c/attachment-0001.html
From seth at pricepages.org  Wed Sep 29 19:30:30 2010
From: seth at pricepages.org (Seth Price)
Date: Wed Sep 29 20:23:48 2010
Subject: [gdal-dev] cubic / bilinear resampling with gdalwarp looks 
	similar to nearest neighbour
In-Reply-To: <AANLkTinrg33ruOQS-uiga4=xYvbFvTQ85F1bLk8kvfpy@mail.gmail.com>
References: <AANLkTing7zvNaZrwjfAfNv2KoazrZmAhc1P3M3keLy5D@mail.gmail.com>
	<201009292334.33205.even.rouault@mines-paris.org>
	<AANLkTinrg33ruOQS-uiga4=xYvbFvTQ85F1bLk8kvfpy@mail.gmail.com>
Message-ID: <f832ba00c89e251d7f96dec12f9f8708.squirrel@pricepages.org>

The only way to 'force' it is to use cubicspline or lanczos. Everything
else has a hardcoded filter size. If those are too slow, I'd suggest using
the OpenCL code I wrote over the summer. It's many times faster. (It
should be in trunk soon if it isn't already.)

http://github.com/mailseth/OpenCL-integration-for-GRASS---GDAL

~Seth



On Wed, September 29, 2010 4:12 pm, Craig de Stigter wrote:
> Thanks Even
>
> However if I do the same thing with reprojection I get the same result.
> gdalwarp output looks sharp and ugly, imagemagick output looks nice.
>
> Is there any way to force the bilinear/cubic interpolation to notice more
> pixels? The other interpolation methods are much slower, I imagine even
> forcing cubic to notice all of the 5x5 pixels would still be faster.
>
> Regards
> Craig de Stigter
>
> On Thu, Sep 30, 2010 at 10:34 AM, Even Rouault
> <even.rouault@mines-paris.org
>> wrote:
>
>> Craig,
>>
>> The main reason is that you are using gdalwarp to reduce an image by a
>> large
>> factor and not reproject it, which generally only involves image
>> resizing
>> by
>> small factors. The implementation of the bilinear and cubic resampling
>> algorithms is currently not designed for the pure resizing use case and
>> takes
>> only into account a few source pixels (basically if to compute a
>> destination
>> pixel you would need to take into account a 5x5 source window, they will
>> only
>> used the 4 corners of that square, which fine usually since those are
>> just
>> the
>> immediate neighbours of the source pixel), whereas cubicspline and
>> lancsoz
>> take into account more pixels (all the pixels in the 5x5 square).
>>
>> Best regards,
>>
>> Even
>>
>> Le mercredi 29 septembre 2010 22:27:01, Craig de Stigter a ?crit :
>> > Hi folks
>> >
>> > I filed this bug <http://trac.osgeo.org/gdal/ticket/3740> on gdal a
>> few
>> > weeks back and haven't heard anything since.
>> >
>> > Would someone mind taking a look at it?
>> >
>> > Thanks
>> > Craig de Stigter
>>
>
>
>
> --
> Koordinates Ltd
> PO Box 1604, Shortland St, Auckland, New Zealand
> Phone +64-9-966 0433 Fax +64-9-969 0045
> Web http://www.koordinates.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From peifer at gmx.eu  Thu Sep 30 03:29:50 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Thu Sep 30 03:30:07 2010
Subject: [gdal-dev] gdal_rasterize -tr and -te
Message-ID: <i81e9e$4dc$1@dough.gmane.org>

Hi All,

GDAL >= 1.8.0 comes with the helpful switches -te and -tr. If the target 
extent is not specified, the extent of the output file will be the 
extent of the vector layers. This leads usually to corner coordinates 
like this:

Upper Left  ( 4923406.374, 3088693.597)
Lower Right ( 4994261.374, 3010723.597)

However, what I always need are corner coordinates which follow the 
"standard grid", which starts at 0,0 and then grows in all directions 
with the given pixel size. So in the above case and for e.g. a 100m 
raster I really want that the target extent grows to:

Upper Left  ( 4923500, 3088600)
Lower Right ( 4994200, 3010800)

There is probably no way of convincing gdal_rasterize to do the maths, 
based on the provided tr and te values?

Hermann





From sebastian.ovide at gmail.com  Thu Sep 30 06:34:05 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Thu Sep 30 06:34:29 2010
Subject: [gdal-dev] ogr problems with MapInfo
In-Reply-To: <4CA35023.2060007@mapgears.com>
References: <AANLkTikeaDv3UdsWmw6CN8EbFV8dSe=R9VohrJaKHAaQ@mail.gmail.com>
	<AANLkTinv5qG8QSVguS+5YwWO6B-jJXpcKOUYa+ThfuED@mail.gmail.com>
	<AANLkTikMEyWxC+wbqH9+YfQiJcaO74BOGyCdOX3V_2nz@mail.gmail.com>
	<4CA35023.2060007@mapgears.com>
Message-ID: <AANLkTim7LvPpRc6UR0iTXRUQXTH-60xc5=4qO-x6Eq7=@mail.gmail.com>

no luck...

gdal is compiled with --enable-debug and CPL_DEBUG=ON

the only output that I get is

gis@mapserver:~/data/tmp$ ogrinfo .
OGR: OGROpen(.) failed.
OGR: OGROpen(.) failed.
FAILURE:
Unable to open datasource `.' with the following drivers.
  -> ESRI Shapefile
  -> MapInfo File
...

can verbosity be increased further ?

and with TAB2TAB the only messages that I get are:

gis@mapserver:/tmp$ /home/gis/src/mitab-1.7.0/mitab/tab2tab
/home/gis/data/tmp/CA_AbandonedMine.TAB test.TAB
ERROR 3: stat() failed for /home/gis/data/tmp/CA_AbandonedMine.id

ERROR 3: Open() failed for /home/gis/data/tmp/CA_AbandonedMine.map
ERROR 3: /home/gis/data/tmp/CA_AbandonedMine.TAB could not be opened as a
MapInfo dataset.
Failed to open /home/gis/data/tmp/CA_AbandonedMine.TAB

(again, If I copy those files to another folder, then I can open them....
very odd !)

On Wed, Sep 29, 2010 at 3:41 PM, Daniel Morissette <dmorissette@mapgears.com
> wrote:

> Sebastian E. Ovide wrote:
> > ok guys, something weird is happening...
> >
> > I have the data in a windows share folder on another machine. So I have
> > mounted that folder on a VBox Ubuntu. ogrinfo would not work on those
> files.
> >
> > I copied those files to another directory:
> >
> > us is the smb folder
> > tmp is a local folder
> >
> > cp us/* tmp/
> >
> > on tmp ogrinfo works like a charm !!!
> >
> > any ideas ?
> >
>
> That's very odd.
>
> Perhaps try setting the environment variable CPL_DEBUG=ON and try again.
> This may give us a clue about what is going wrong.
>
> You could also try reading your dataset using the MITAB library's
> TAB2TAB program directly and see if you get more useful info.
> (http://mitab.maptools.org/)
>
> Daniel
> --
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100930/9a4c5a4c/attachment.html
From dmorissette at mapgears.com  Thu Sep 30 08:44:04 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Sep 30 08:44:07 2010
Subject: [gdal-dev] ogr problems with MapInfo
In-Reply-To: <AANLkTi=7NzxMx9YtR5V4pmdpRxyhrCr-+fBut_2siVYY@mail.gmail.com>
References: <AANLkTikeaDv3UdsWmw6CN8EbFV8dSe=R9VohrJaKHAaQ@mail.gmail.com>
	<AANLkTinv5qG8QSVguS+5YwWO6B-jJXpcKOUYa+ThfuED@mail.gmail.com>
	<AANLkTikMEyWxC+wbqH9+YfQiJcaO74BOGyCdOX3V_2nz@mail.gmail.com>
	<4CA35023.2060007@mapgears.com>
	<AANLkTi=7NzxMx9YtR5V4pmdpRxyhrCr-+fBut_2siVYY@mail.gmail.com>
Message-ID: <4CA48614.10209@mapgears.com>

Sebastian E. Ovide wrote:
> 
> can verbosity be increased further ?
> 

I don't think so... the only way to know more about what is happening
would be to run this in gdb.


> and with TAB2TAB the only messages that I get are:
> 
> gis@mapserver:/tmp$ /home/gis/src/mitab-1.7.0/mitab/tab2tab
> /home/gis/data/tmp/CA_AbandonedMine.TAB test.TAB
> ERROR 3: stat() failed for /home/gis/data/tmp/CA_AbandonedMine.id
> 
> ERROR 3: Open() failed for /home/gis/data/tmp/CA_AbandonedMine.map
> ERROR 3: /home/gis/data/tmp/CA_AbandonedMine.TAB could not be opened as
> a MapInfo dataset.
> Failed to open /home/gis/data/tmp/CA_AbandonedMine.TAB
> 

This looks like an uppercase vs lowercase file extension problem. There
is some logic in MITAB to try to guess and then adjust filename
extensions (e.g. .MAP vs .map) on non-Windows systems that uses stat()
and for some reason it seems to fail with the SMB share.

Can you please try renaming all files for a given table to lowercase
extensions (.tab, .map, .dat, .ind, .id) and then see if that changes
anything with the tab2tab program on the SMB share?

If that solves the issue then we'll need to reproduce this here and run
this in gdb to figure the exact source of the problem and fix it.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From briansmailbox at gmail.com  Thu Sep 30 09:18:48 2010
From: briansmailbox at gmail.com (Brian Kelly)
Date: Thu Sep 30 09:18:51 2010
Subject: [gdal-dev] JVM crash on making a call to the class/method
	OGRLineString::exportToWkt
Message-ID: <AANLkTim9ovKQWsgjv22hVXu+8nU0q-DoGHhbgEN1a_qB@mail.gmail.com>

Hi all,

Apologies in advance for not providing a testable case that can be fired up.
I'm hoping the background info provided and investigation work shown below
is enough to help trace what the issue is.

PROBLEM DEFINITION:
I work with a custom java application that loads GIS data using GDAL
(current TRUNK code in use though issue occurs with v1.7.2 also). We can
load a variety of data types (MapInfo, DGN,etc) with no issues. A problem
occurs when TIGER data is loaded though - the TIGER data loads and is
viewable but after a few pans and zooms the JAVA server process crashes.
This seems to happen when it tries to unload loaded features. Was using US
Census data tiger files.

PROBLEM ANALYSIS:
Two sources of debug information were looked at. A (1) general log file
generated by java and (2) a core dump file. The outputs of these are below.

1. LOG NUMBER ONE: The log file generated on crash indicates the source of
the problem is the GDAL library when features are deleted.

Current thread (0x0000000041a4d800):  JavaThread
"FeatureNativeObjectsCleaner" daemon [_thread_in_native, id=28311,
stack(0x00007ff5f4cc8000,0x00007ff5f4dc9000)]
siginfo:si_signo=SIGSEGV: si_errno=0, si_code=1 (SEGV_MAPERR),
si_addr=0x000000000000003a
Stack: [0x00007ff5f4cc8000,0x00007ff5f4dc9000],  sp=0x00007ff5f4dc77a8,
free space=3fd0000000000000018k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native
code)
C  0x0000000042355af0
j  org.gdal.ogr.FeatureNative.delete()V+23

2. LOG NUMBER TWO: A linux core dump was captured when the JVM crashed. This
was analysed for more precise details using the GDB debugger using the
approach outlined at
http://www.dialogic.com/support/helpweb/dxall/tn957.aspx

The output from the core dump file analysis was:
Loaded symbols for /usr/lib/jvm/jrrt-4.0.1-1.6.0/jre/lib/amd64/libdcpr.so
Core was generated by `/usr/lib/jvm/java-6-jrockit/bin/java -Xms2048m
-Xmx2048m -Djava.util.logging.ma'.
Program terminated with signal 6, Aborted.
#0  0x00007f51ac719a75 in raise () from /lib/libc.so.6
(gdb) bt
#0  0x00007f51ac719a75 in raise () from /lib/libc.so.6
#1  0x00007f51ac71d5c0 in abort () from /lib/libc.so.6
#2  0x00007f51ac7534fb in ?? () from /lib/libc.so.6
#3  0x00007f51ac75d5b6 in ?? () from /lib/libc.so.6
#4  0x00007f51ac7616d8 in ?? () from /lib/libc.so.6
#5  0x00007f51ac76258e in malloc () from /lib/libc.so.6
#6  0x00007f515d06c262 in OGRLineString::exportToWkt (this=0x7f5154722bb0,
    ppszDstText=0x7f5158804728) at ogrlinestring.cpp:1049
#7  0x00007f515d51655f in OGRGeometryShadow_ExportToWkt__SWIG_1
(jenv=0x5952bf0,
    jcls=<value optimized out>, jarg1=6, jarg1_=0xffffffffffffffff)
    at ogr_wrap.cpp:1792
#8  Java_org_gdal_ogr_ogrJNI_Geometry_1ExportToWkt_1_1SWIG_11
(jenv=0x5952bf0,
    jcls=<value optimized out>, jarg1=6, jarg1_=0xffffffffffffffff)
    at ogr_wrap.cpp:7166
#9  0x00007f5166de2715 in ?? ()
#10 0x00000000827520c0 in ?? ()


1. The core dump file indicates that an exception occurs in the file
ogrlinestring.cpp at L1049. In the GDAL trunk source code that I have this
corresponds to the line:
       *ppszDstText = (char *) VSIMalloc( nMaxString );
2. The output from Log #1 indicates that there might be an issue with memory
pointers. This is based on the SEGV_MAPERR error output and the opinion on
the post here:
http://www.linuxquestions.org/questions/programming-9/free-invalid-next-size-fast-c-error-729852/

It looks like the problem could be a memory pointer size issue related to
ogrlinestring. If anyone could take a quick look and suggest a fix that
would be appreciated. I'm a java programmer lost in a C++ world on this one.

Thanks,
Brian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100930/10ffc668/attachment.html
From sebastian.ovide at gmail.com  Thu Sep 30 09:40:15 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Thu Sep 30 09:40:37 2010
Subject: [gdal-dev] ogr problems with MapInfo
In-Reply-To: <4CA48614.10209@mapgears.com>
References: <AANLkTikeaDv3UdsWmw6CN8EbFV8dSe=R9VohrJaKHAaQ@mail.gmail.com>
	<AANLkTinv5qG8QSVguS+5YwWO6B-jJXpcKOUYa+ThfuED@mail.gmail.com>
	<AANLkTikMEyWxC+wbqH9+YfQiJcaO74BOGyCdOX3V_2nz@mail.gmail.com>
	<4CA35023.2060007@mapgears.com>
	<AANLkTi=7NzxMx9YtR5V4pmdpRxyhrCr-+fBut_2siVYY@mail.gmail.com>
	<4CA48614.10209@mapgears.com>
Message-ID: <AANLkTi=vH4n5LMiH5J31BVQ1XhSrvhkfiK9B-S5-EQ=e@mail.gmail.com>

done... didn't work...

Copied on the same SMB folder with undercase names... both ogrinfo and
tab2tab failed.
Copied the same files to a local folder and both ogrinfo and tab2tab
succeeded...

same errors....


On Thu, Sep 30, 2010 at 1:44 PM, Daniel Morissette <dmorissette@mapgears.com
> wrote:

> Sebastian E. Ovide wrote:
> >
> > can verbosity be increased further ?
> >
>
> I don't think so... the only way to know more about what is happening
> would be to run this in gdb.
>
>
> > and with TAB2TAB the only messages that I get are:
> >
> > gis@mapserver:/tmp$ /home/gis/src/mitab-1.7.0/mitab/tab2tab
> > /home/gis/data/tmp/CA_AbandonedMine.TAB test.TAB
> > ERROR 3: stat() failed for /home/gis/data/tmp/CA_AbandonedMine.id
> >
> > ERROR 3: Open() failed for /home/gis/data/tmp/CA_AbandonedMine.map
> > ERROR 3: /home/gis/data/tmp/CA_AbandonedMine.TAB could not be opened as
> > a MapInfo dataset.
> > Failed to open /home/gis/data/tmp/CA_AbandonedMine.TAB
> >
>
> This looks like an uppercase vs lowercase file extension problem. There
> is some logic in MITAB to try to guess and then adjust filename
> extensions (e.g. .MAP vs .map) on non-Windows systems that uses stat()
> and for some reason it seems to fail with the SMB share.
>
> Can you please try renaming all files for a given table to lowercase
> extensions (.tab, .map, .dat, .ind, .id) and then see if that changes
> anything with the tab2tab program on the SMB share?
>
> If that solves the issue then we'll need to reproduce this here and run
> this in gdb to figure the exact source of the problem and fix it.
>
> Daniel
> --
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100930/42077cad/attachment.html
From bea at ixsea.com  Thu Sep 30 12:37:53 2010
From: bea at ixsea.com (=?ISO-8859-1?Q?Beno=EEt_Andrieu?=)
Date: Thu Sep 30 12:40:49 2010
Subject: [gdal-dev] GDALOpen GDALClose memory leak when threading
In-Reply-To: <4CA3B48F.9010501@pobox.com>
References: <09e78e78-7087-43cb-8001-db8b30ec0fc7@corpo.crim.ca>
	<4CA3B48F.9010501@pobox.com>
Message-ID: <4CA4BCE1.5050606@ixsea.com>

  Hi list !

I am having some strange memory leak problems and I need help ! ^^

Our software is having memory leaks, I looked into this and I found it 
is related with the loading unloading of GDALDatasets.
By the way, the software is in C# and Managed C++. The code that calls 
GDAL is in Managed C++.

So, basically, the software is creating one thread for each picture that 
has to be processed.
It seems that as long as all the GDALOpen and GDALClose are made in one 
and only thread then there is no memory leak.
But if the GDAL calls are made in different threads (Managed threads), 
then there are memory leaks.

I looked at the documentation but could not find anything really related 
to this. Am I missing something ?

Thanks for any tips !

Beno?t
From even.rouault at mines-paris.org  Thu Sep 30 12:50:49 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep 30 12:50:49 2010
Subject: [gdal-dev] gdal_rasterize -tr and -te
In-Reply-To: <i81e9e$4dc$1@dough.gmane.org>
References: <i81e9e$4dc$1@dough.gmane.org>
Message-ID: <201009301850.49816.even.rouault@mines-paris.org>

> Lower Right ( 4994200, 3010800)
> 
> There is probably no way of convincing gdal_rasterize to do the maths,
> based on the provided tr and te values?

No there isn't. This is a bit too specialized requirement... Your best help is 
some Python GDAL scripting to create the output file before using 
gdal_rasterize

> 
> Hermann
> 
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Thu Sep 30 13:01:39 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Sep 30 13:01:38 2010
Subject: [gdal-dev] JVM crash on making a call to the class/method
	OGRLineString::exportToWkt
In-Reply-To: <AANLkTim9ovKQWsgjv22hVXu+8nU0q-DoGHhbgEN1a_qB@mail.gmail.com>
References: <AANLkTim9ovKQWsgjv22hVXu+8nU0q-DoGHhbgEN1a_qB@mail.gmail.com>
Message-ID: <201009301901.39679.even.rouault@mines-paris.org>

Brian,

This is indeed going be difficult to help you in an efficient way without a 
testable case...

First, check that GDAL is configured --with-threads

Then try the OGRFeature and OGRTestGC test applications that are generated in 
swig/java/build/apps

How ogrinfo and ogr2ogr work on the TIGER data ? (try with valgrind) That 
could be a bug in the TIGER driver if it doesn't occur with other format.

Your errors seem to indicate some native heap memory corruption. Perhaps a bug 
in GDAL or the Java bindings, or perhaps a misuse of the API that lead to 
that. (There are indeed some ways of causing corruption by misusing the API if 
you don't follow the do's / dont do's in the API doc, and potentially other 
undocumented ways...)

The best would really for you to extract the parts where you use OGR API and 
try having a minimum app that trigger the issue.

Best regards,

Even

Le jeudi 30 septembre 2010 15:18:48, Brian Kelly a ?crit :
> Hi all,
> 
> Apologies in advance for not providing a testable case that can be fired
> up. I'm hoping the background info provided and investigation work shown
> below is enough to help trace what the issue is.
> 
> PROBLEM DEFINITION:
> I work with a custom java application that loads GIS data using GDAL
> (current TRUNK code in use though issue occurs with v1.7.2 also). We can
> load a variety of data types (MapInfo, DGN,etc) with no issues. A problem
> occurs when TIGER data is loaded though - the TIGER data loads and is
> viewable but after a few pans and zooms the JAVA server process crashes.
> This seems to happen when it tries to unload loaded features. Was using US
> Census data tiger files.
> 
> PROBLEM ANALYSIS:
> Two sources of debug information were looked at. A (1) general log file
> generated by java and (2) a core dump file. The outputs of these are below.
> 
> 1. LOG NUMBER ONE: The log file generated on crash indicates the source of
> the problem is the GDAL library when features are deleted.
> 
> Current thread (0x0000000041a4d800):  JavaThread
> "FeatureNativeObjectsCleaner" daemon [_thread_in_native, id=28311,
> stack(0x00007ff5f4cc8000,0x00007ff5f4dc9000)]
> siginfo:si_signo=SIGSEGV: si_errno=0, si_code=1 (SEGV_MAPERR),
> si_addr=0x000000000000003a
> Stack: [0x00007ff5f4cc8000,0x00007ff5f4dc9000],  sp=0x00007ff5f4dc77a8,
> free space=3fd0000000000000018k
> Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native
> code)
> C  0x0000000042355af0
> j  org.gdal.ogr.FeatureNative.delete()V+23
> 
> 2. LOG NUMBER TWO: A linux core dump was captured when the JVM crashed.
> This was analysed for more precise details using the GDB debugger using
> the approach outlined at
> http://www.dialogic.com/support/helpweb/dxall/tn957.aspx
> 
> The output from the core dump file analysis was:
> Loaded symbols for /usr/lib/jvm/jrrt-4.0.1-1.6.0/jre/lib/amd64/libdcpr.so
> Core was generated by `/usr/lib/jvm/java-6-jrockit/bin/java -Xms2048m
> -Xmx2048m -Djava.util.logging.ma'.
> Program terminated with signal 6, Aborted.
> #0  0x00007f51ac719a75 in raise () from /lib/libc.so.6
> (gdb) bt
> #0  0x00007f51ac719a75 in raise () from /lib/libc.so.6
> #1  0x00007f51ac71d5c0 in abort () from /lib/libc.so.6
> #2  0x00007f51ac7534fb in ?? () from /lib/libc.so.6
> #3  0x00007f51ac75d5b6 in ?? () from /lib/libc.so.6
> #4  0x00007f51ac7616d8 in ?? () from /lib/libc.so.6
> #5  0x00007f51ac76258e in malloc () from /lib/libc.so.6
> #6  0x00007f515d06c262 in OGRLineString::exportToWkt (this=0x7f5154722bb0,
>     ppszDstText=0x7f5158804728) at ogrlinestring.cpp:1049
> #7  0x00007f515d51655f in OGRGeometryShadow_ExportToWkt__SWIG_1
> (jenv=0x5952bf0,
>     jcls=<value optimized out>, jarg1=6, jarg1_=0xffffffffffffffff)
>     at ogr_wrap.cpp:1792
> #8  Java_org_gdal_ogr_ogrJNI_Geometry_1ExportToWkt_1_1SWIG_11
> (jenv=0x5952bf0,
>     jcls=<value optimized out>, jarg1=6, jarg1_=0xffffffffffffffff)
>     at ogr_wrap.cpp:7166
> #9  0x00007f5166de2715 in ?? ()
> #10 0x00000000827520c0 in ?? ()
> 
> 
> 1. The core dump file indicates that an exception occurs in the file
> ogrlinestring.cpp at L1049. In the GDAL trunk source code that I have this
> corresponds to the line:
>        *ppszDstText = (char *) VSIMalloc( nMaxString );
> 2. The output from Log #1 indicates that there might be an issue with
> memory pointers. This is based on the SEGV_MAPERR error output and the
> opinion on the post here:
> http://www.linuxquestions.org/questions/programming-9/free-invalid-next-siz
> e-fast-c-error-729852/
> 
> It looks like the problem could be a memory pointer size issue related to
> ogrlinestring. If anyone could take a quick look and suggest a fix that
> would be appreciated. I'm a java programmer lost in a C++ world on this
> one.
> 
> Thanks,
> Brian
From peifer at gmx.eu  Thu Sep 30 13:16:16 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Thu Sep 30 13:16:08 2010
Subject: [gdal-dev] gdal_rasterize -tr and -te
In-Reply-To: <201009301850.49816.even.rouault@mines-paris.org>
References: <i81e9e$4dc$1@dough.gmane.org>
	<201009301850.49816.even.rouault@mines-paris.org>
Message-ID: <4CA4C5E0.7060004@gmx.eu>

  On 30/09/2010 18:50, Even Rouault wrote:
>> Lower Right ( 4994200, 3010800)
>>
>> There is probably no way of convincing gdal_rasterize to do the maths,
>> based on the provided tr and te values?
> No there isn't. This is a bit too specialized requirement... Your best help is
> some Python GDAL scripting to create the output file before using
> gdal_rasterize
>

OK. Thanks for replying. Currently I have a simple one-liner in my 
batch-processing shell scripts, something like:

myExtent=$(ogrinfo -al -so my.shp | awk '/^Extent/{ do the maths }')

At work, we are taking this "standard grid" issue pretty serious, but 
indeed, we might be the only ones worldwide with such a business rule.

Hermann
