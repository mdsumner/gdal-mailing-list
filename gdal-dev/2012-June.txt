From ivan.lucena at princeton-ma.us  Fri Jun  1 04:17:07 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri, 01 Jun 2012 06:17:07 -0500
Subject: [gdal-dev] =?iso-8859-1?q?gdal=5Ftranslate_takes_negative_values_?=
	=?iso-8859-1?q?as_an_option_=28=3F=29?=
Message-ID: <20120601111707.23632.qmail@s466.sureserver.com>

Hi there,

I tried to re-scale some of the values of a image just like this one here:

$ gdalinfo in.tif
...
  Minimum=2401.740, Maximum=2936.040, Mean=2685.227, StdDev=125.518
  NoData Value=-3.4e+38

By using the -scale option in gdal_translate:

$ gdal_translate in.tif out.tif -scale -3.8e+38 0 0 0 -a_nodata 0
Option -3.8e+38 incomplete, or not recognised.

But it seems like the "-" was interpreted as the beginning of an option.

That happens at that line of code here:

http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdal_translate.cpp#L457

It looks like a bug but it might have some other implications that I can't see.

Other parameters, like -a_ullr, doesn't have that problem because the values are not optional as in -scale.

Any suggestion?

Regards,

Ivan


From ivan.lucena at princeton-ma.us  Fri Jun  1 08:17:46 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri, 01 Jun 2012 10:17:46 -0500
Subject: [gdal-dev]
	=?iso-8859-1?q?gdal=5Ftranslate_takes_negative_values_?=
	=?iso-8859-1?q?as_an_option_=28=3F=29?=
In-Reply-To: <20120601111707.23632.qmail@s466.sureserver.com>
References: <20120601111707.23632.qmail@s466.sureserver.com>
Message-ID: <20120601151746.13865.qmail@s466.sureserver.com>

It turns out that gdal_translate -scale doesn't parse exponential by using the function ArgIsNumeric:

http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdal_translate.cpp#L1258

It works fine with -0.0000000000000000000000000000000000034

Users be aware!

>  -------Original Message-------
>  From: Ivan Lucena <ivan.lucena at princeton-ma.us>
>  To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
>  Subject: [gdal-dev] gdal_translate takes negative values as an option (?)
>  Sent: Jun 01 '12 06:17
>  
>  Hi there,
>  
>  I tried to re-scale some of the values of a image just like this one here:
>  
>  $ gdalinfo in.tif
>  ...
>  ??Minimum=2401.740, Maximum=2936.040, Mean=2685.227, StdDev=125.518
>  ??NoData Value=-3.4e+38
>  
>  By using the -scale option in gdal_translate:
>  
>  $ gdal_translate in.tif out.tif -scale -3.8e+38 0 0 0 -a_nodata 0
>  Option -3.8e+38 incomplete, or not recognised.
>  
>  But it seems like the "-" was interpreted as the beginning of an option.
>  
>  That happens at that line of code here:
>  
>  http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdal_translate.cpp#L457
>  
>  It looks like a bug but it might have some other implications that I can't see.
>  
>  Other parameters, like -a_ullr, doesn't have that problem because the values are not optional as in -scale.
>  
>  Any suggestion?
>  
>  Regards,
>  
>  Ivan
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev at lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  

From dhoese at gmail.com  Fri Jun  1 10:47:59 2012
From: dhoese at gmail.com (David Hoese)
Date: Fri, 01 Jun 2012 12:47:59 -0500
Subject: [gdal-dev] reproject python numpy binary swath/lat/lon
Message-ID: <4FC9004F.9070704@gmail.com>

I have 3 binary files, the image/swath 2D data and the corresponding 2D 
latitude and longitude pixel data from a previous processing step.  The 
binary files were all created using numpy's tofile().  I would like to 
take the binary data (as filenames or loaded into numpy arrays) and 
remap it to a grid that I can define with PROJ.4 parameters and output 
the remapped data as another binary file or numpy array.  I would like 
to be able to do this all from within python if possible without any 
command line calls.  I found this thread that describes a solution that 
looks like what I'm trying to do at least to start with, but suggests 
gdalwarp from the command line:

http://osgeo-org.1560.n6.nabble.com/Lat-Lon-projection-from-satellite-swath-td3751165.html

I'm new to GDAL and pretty new to remapping in general.  Is what I'm 
trying to do possible with GDAL?  Where should I start?  I'm coming from 
using a remapping utility that had one purpose and I'm kind of getting 
lost in all of the options GDAL offers.

Thanks for any help.

-Dave

From anakintang at gmail.com  Fri Jun  1 12:12:06 2012
From: anakintang at gmail.com (Yingqi Tang)
Date: Fri, 1 Jun 2012 12:12:06 -0700
Subject: [gdal-dev] [*** YES ! ***] Re: Can OGR WFS driver take
 advantage of WFS Server streaming?
In-Reply-To: <201205182141.42874.even.rouault@mines-paris.org>
References: <CA+DQzZAG-A_4ZO210MOa3-ngbQOEoJjG-MYreUTtEh_5LPq-0A@mail.gmail.com>
	<CA+DQzZDdxBZSQGQ0KeO_p6m+=EMUOVb114HESG4eAxyBAqwC7A@mail.gmail.com>
	<201205172126.10293.even.rouault@mines-paris.org>
	<201205182141.42874.even.rouault@mines-paris.org>
Message-ID: <CA+DQzZBpGZkyswH7vnOFA1CGqwq+0QX=_LrVV_abo=HZAbivTg@mail.gmail.com>

Hi Even,

Any chance this new /viscurl_stream/ included in future release of official
gdal/ogr?

Thanks

On Fri, May 18, 2012 at 12:41 PM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> OK,
>
> I've finally implemented /vsicurl_stream/ , optimized the GML driver for
> it,
> and ported the WFS driver to use it transparently. It should now be
> possible
> to parse gigabytes of GML through WFS with very little RAM consumption.
>
> For example,
>
> ogrinfo -ro -al -q WFS:http://testing.deegree.org/deegree-wfs/services
> app:Springs
>
> or you can also test it at hand, like this :
>
> ogrinfo -ro -al -q "/vsicurl_streaming/http://testing.deegree.org/deegree-
>
> wfs/services?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=app:Springs
> "
>
> Best regards,
>
> Even
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120601/95eddbbd/attachment.html>

From even.rouault at mines-paris.org  Fri Jun  1 12:39:49 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 1 Jun 2012 21:39:49 +0200
Subject: [gdal-dev] [*** YES ! ***] Re: Can OGR WFS driver take
	advantage of WFS Server streaming?
In-Reply-To: <CA+DQzZBpGZkyswH7vnOFA1CGqwq+0QX=_LrVV_abo=HZAbivTg@mail.gmail.com>
References: <CA+DQzZAG-A_4ZO210MOa3-ngbQOEoJjG-MYreUTtEh_5LPq-0A@mail.gmail.com>
	<201205182141.42874.even.rouault@mines-paris.org>
	<CA+DQzZBpGZkyswH7vnOFA1CGqwq+0QX=_LrVV_abo=HZAbivTg@mail.gmail.com>
Message-ID: <201206012139.49806.even.rouault@mines-paris.org>

Le vendredi 01 juin 2012 21:12:06, Yingqi Tang a ?crit :
> Hi Even,
> 
> Any chance this new /viscurl_stream/ included in future release of official
> gdal/ogr?

When I write publicly that something is implemented, it is not just for my own 
sole pleasure, but it means that it is in the trunk for everybody's 
consumption ;-) So yes, it will be in GDAL 2.0, and you can already test it if 
you compile your own GDAL from svn trunk, or if you use one of the daily 
builds for Windows available at http://www.gisinternals.com/sdk/ (one of the 
ones marked "-development")

From even.rouault at mines-paris.org  Fri Jun  1 13:10:33 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 1 Jun 2012 22:10:33 +0200
Subject: [gdal-dev] gdal_translate takes negative values as an option (?)
In-Reply-To: <20120601151746.13865.qmail@s466.sureserver.com>
References: <20120601111707.23632.qmail@s466.sureserver.com>
	<20120601151746.13865.qmail@s466.sureserver.com>
Message-ID: <201206012210.33783.even.rouault@mines-paris.org>

Le vendredi 01 juin 2012 17:17:46, Ivan Lucena a ?crit :
> It turns out that gdal_translate -scale doesn't parse exponential by using
> the function ArgIsNumeric:
> 
> http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdal_translate.cpp#L1258
> 
> It works fine with -0.0000000000000000000000000000000000034

I've fixed ArgIsNumeric() in r24528, so values in scientific notation should now 
be recognized properly.

From ivan.lucena at princeton-ma.us  Fri Jun  1 13:23:25 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri, 01 Jun 2012 15:23:25 -0500
Subject: [gdal-dev]
	=?iso-8859-1?q?gdal=5Ftranslate_takes_negative_values_?=
	=?iso-8859-1?q?as_an_option_=28=3F=29?=
In-Reply-To: <201206012210.33783.even.rouault@mines-paris.org>
References: <20120601111707.23632.qmail@s466.sureserver.com>
	<20120601151746.13865.qmail@s466.sureserver.com>
	<201206012210.33783.even.rouault@mines-paris.org>
Message-ID: <20120601202325.11794.qmail@s466.sureserver.com>

That is great! Thanks Even.

>  -------Original Message-------
>  From: Even Rouault <even.rouault at mines-paris.org>
>  To: gdal-dev at lists.osgeo.org, Ivan Lucena <ivan.lucena at princeton-ma.us>
>  Subject: Re: [gdal-dev] gdal_translate takes negative values as an option (?)
>  Sent: Jun 01 '12 15:10
>  
>  Le vendredi 01 juin 2012 17:17:46, Ivan Lucena a ?crit :
>  > It turns out that gdal_translate -scale doesn't parse exponential by using
>  > the function ArgIsNumeric:
>  >
>  > http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdal_translate.cpp#L1258
>  >
>  > It works fine with -0.0000000000000000000000000000000000034
>  
>  I've fixed ArgIsNumeric() in r24528, so values in scientific notation should now
>  be recognized properly.
>  

From kyle at pobox.com  Fri Jun  1 13:51:04 2012
From: kyle at pobox.com (Kyle Shannon)
Date: Fri, 1 Jun 2012 14:51:04 -0600
Subject: [gdal-dev] DODS Driver issue
Message-ID: <CAJ0mEz0dkG+uKkYZjXghKknekBnMhfWgxjuCQM=OwnG8vWwn1w@mail.gmail.com>

I am messing around with some opendap weather data and tinkering with gdal.
 Does anyone have any test data/links I can use?  I used gdalinfo to look
at this data:

http://nomads.ncdc.noaa.gov/dods/NCEP_NAM/subsets/nam_218_winds.dds

using:

kyle at ubuntu:~/Desktop$ gdalinfo
http://nomads.ncdc.noaa.gov/dods/NCEP_NAM/subsets/nam_218_winds?ugrd10m[0][y][x]
Driver: DODS/DAP 3.x servers
Files: none associated
Size is 1038, 500
Coordinate System is `'
Origin = (-153.050000000000011,11.949999999999999)
Pixel Size = (0.100000000000000,0.100000000000000)
Corner Coordinates:
Upper Left (-153.0500000, 11.9500000)
Lower Left (-153.0500000, 61.9500000)
Upper Right ( -49.2500000, 11.9500000)
Lower Right ( -49.2500000, 61.9500000)
Center (-101.1500000, 36.9500000)
Band 1 Block=512x128 Type=Float32, ColorInterp=Undefined
NoData Value=9.999e+20
Overviews: 519x250, 259x125, 129x62

and I noticed the origin y values are inverted.  The image 'shows' up in
the right place because the y pixel size is positive, but
adfGeoTransform[3] is wrong.  I am also not getting any data back (all
nodata) but I am not sure if that is me, or the provider.  I am looking for
a link to test the dods driver and see if this is always the case, or if
the data served by nomads is an exception.  Thanks.

kss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120601/77e2e992/attachment.html>

From anakintang at gmail.com  Fri Jun  1 16:03:13 2012
From: anakintang at gmail.com (Yingqi Tang)
Date: Fri, 1 Jun 2012 16:03:13 -0700
Subject: [gdal-dev] [*** YES ! ***] Re: Can OGR WFS driver take
 advantage of WFS Server streaming?
In-Reply-To: <201206012139.49806.even.rouault@mines-paris.org>
References: <CA+DQzZAG-A_4ZO210MOa3-ngbQOEoJjG-MYreUTtEh_5LPq-0A@mail.gmail.com>
	<201205182141.42874.even.rouault@mines-paris.org>
	<CA+DQzZBpGZkyswH7vnOFA1CGqwq+0QX=_LrVV_abo=HZAbivTg@mail.gmail.com>
	<201206012139.49806.even.rouault@mines-paris.org>
Message-ID: <CA+DQzZANdKk+EncCPO1S=sgN5Po70s8uiseUCRxCy7m9_pfZMA@mail.gmail.com>

Even,

I tried it with the latest dev build and it works great for me. Thanks a
lot!

Thanks

On Fri, Jun 1, 2012 at 12:39 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le vendredi 01 juin 2012 21:12:06, Yingqi Tang a ?crit :
> > Hi Even,
> >
> > Any chance this new /viscurl_stream/ included in future release of
> official
> > gdal/ogr?
>
> When I write publicly that something is implemented, it is not just for my
> own
> sole pleasure, but it means that it is in the trunk for everybody's
> consumption ;-) So yes, it will be in GDAL 2.0, and you can already test
> it if
> you compile your own GDAL from svn trunk, or if you use one of the daily
> builds for Windows available at http://www.gisinternals.com/sdk/ (one of
> the
> ones marked "-development")
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120601/9a28fd20/attachment.html>

From jukka.rahkonen at mmmtike.fi  Sat Jun  2 03:36:39 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat, 2 Jun 2012 10:36:39 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?Geospatial_PDF_with_OGR=5FDATASOURCE?=
Message-ID: <loom.20120602T122858-230@post.gmane.org>

Hi,

I was reading about a possibility of adding OGR vector layers on top of raster
layer in geospatial pdf from http://gdal.org/frmt_pdf.html

Are there any example commands available? I guess that at least discovering the
use of OGR_DISPLAY_FIELD and OGR_DISPLAY_LAYER_NAMES may take a while with plain
trial and error.

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Sat Jun  2 04:24:28 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 2 Jun 2012 13:24:28 +0200
Subject: [gdal-dev] Geospatial PDF with OGR_DATASOURCE
In-Reply-To: <loom.20120602T122858-230@post.gmane.org>
References: <loom.20120602T122858-230@post.gmane.org>
Message-ID: <201206021324.28784.even.rouault@mines-paris.org>

Le samedi 02 juin 2012 12:36:39, Jukka Rahkonen a ?crit :
> Hi,
> 
> I was reading about a possibility of adding OGR vector layers on top of
> raster layer in geospatial pdf from http://gdal.org/frmt_pdf.html
> 
> Are there any example commands available? I guess that at least discovering
> the use of OGR_DISPLAY_FIELD and OGR_DISPLAY_LAYER_NAMES may take a while
> with plain trial and error.

I've tried to make the description of those option hopefully a bit clearer. 
Have a look at http://trac.osgeo.org/gdal/changeset/24529 . If you can help in 
making this more understandable, you're welcome. I know I'm not so good at 
writing docs.

Without screenshots of the UI of the "well-know PDF viewer" (but GDAL/OGR doc 
is generally rather ascetic ;-)), I'm afraid that it is still a bit difficult to 
understand. The best is to experiment.

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From gdal at stripfamily.net  Sat Jun  2 15:16:51 2012
From: gdal at stripfamily.net (David Strip)
Date: Sat, 02 Jun 2012 16:16:51 -0600
Subject: [gdal-dev] GeoPDF (TM) vs. GeoSpatial PDF
In-Reply-To: <201206021324.28784.even.rouault@mines-paris.org>
References: <loom.20120602T122858-230@post.gmane.org>
	<201206021324.28784.even.rouault@mines-paris.org>
Message-ID: <4FCA90D3.3090602@stripfamily.net>

Jukka's posting earlier today has made me aware that GDAL will now write 
a geospatial PDF. Is it also capable of writing a geoPDF (which is a 
trademark of TerraGo, but there is an OGC standard, so possibly it's 
legal to create them)? When used in conjunction with the (free) TerraGo 
toolbar, the geoPDF provides many more capabilities than a geo-spatial 
pdf, especially if the pdf "modify" permission is set. From the looks of 
it, the main difference between a geospatial PDF and a geoPDF is that 
the latter contains a dictionary object LGIdict which contains the 
projection, the coordinate transform to the page, and that sort of 
thing. In fact, it will support multiple data frames on the same page.

From tobias.preuss at googlemail.com  Sun Jun  3 09:32:48 2012
From: tobias.preuss at googlemail.com (Tobias Preuss)
Date: Sun, 3 Jun 2012 18:32:48 +0200
Subject: [gdal-dev] Convert DBX/SHP to JSON using ogr2ogr
In-Reply-To: <CADEaiE8nBwvi4qLVzz0KZmXDKMkh1rXY9MPTZigfz-O7FouMMA@mail.gmail.com>
References: <CADEaiE8nBwvi4qLVzz0KZmXDKMkh1rXY9MPTZigfz-O7FouMMA@mail.gmail.com>
Message-ID: <CADEaiE84bP+PnucH2vk1y8O4LeT3zEHQ+38P83-kMb1JczYn1g@mail.gmail.com>

Hello. I am trying convert shape files [1] of London (Canada) into
JSON. I am totally new to these formats but at least I found out that
ogr2ogr is able to do the job. However, there are two files that
contain the data as far as I can tell. One file TREES.DBF contains all
the properties. The other file trees.shp holds the main objects (trees
in this case) with an identifier. I can convert each file into JSON
with the following commands.

$ ogr2ogr -f GeoJSON -s_srs EPSG:26917 -t_srs EPSG:4326
trees_coordinates.json trees.shp
$ ogr2ogr -f GeoJSON -s_srs EPSG:26917 TREES_properties.json TREES.DBF

I am not sure what the other files are good for?!
After the conversion, however, I end up with two files again. Is there
a way to combine both datasets - so each tree object will be matched
with its corresponding property information from the other file?

Note: I am not totally sure about the source SRS. If you can teach me,
how I can find out what the source SRS is from the files, I would very
much appreciate that!
Best regards, Tobias


_________
[1] http://www.london.ca/OpenData/ShapeFiles_Zipped/Tree_Inventory_Public.zip

From even.rouault at mines-paris.org  Sun Jun  3 09:50:39 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 3 Jun 2012 18:50:39 +0200
Subject: [gdal-dev] Convert DBX/SHP to JSON using ogr2ogr
In-Reply-To: <CADEaiE84bP+PnucH2vk1y8O4LeT3zEHQ+38P83-kMb1JczYn1g@mail.gmail.com>
References: <CADEaiE8nBwvi4qLVzz0KZmXDKMkh1rXY9MPTZigfz-O7FouMMA@mail.gmail.com>
	<CADEaiE84bP+PnucH2vk1y8O4LeT3zEHQ+38P83-kMb1JczYn1g@mail.gmail.com>
Message-ID: <201206031850.39541.even.rouault@mines-paris.org>

Le dimanche 03 juin 2012 18:32:48, Tobias Preuss a ?crit :
> Hello. I am trying convert shape files [1] of London (Canada) into
> JSON. I am totally new to these formats but at least I found out that
> ogr2ogr is able to do the job. However, there are two files that
> contain the data as far as I can tell. One file TREES.DBF contains all
> the properties. The other file trees.shp holds the main objects (trees
> in this case) with an identifier. I can convert each file into JSON
> with the following commands.
> 
> $ ogr2ogr -f GeoJSON -s_srs EPSG:26917 -t_srs EPSG:4326
> trees_coordinates.json trees.shp
> $ ogr2ogr -f GeoJSON -s_srs EPSG:26917 TREES_properties.json TREES.DBF
> 
> I am not sure what the other files are good for?!

A shapefile consists at the minimum of .shp, .shx and .dbf files.

.shp contains the geometry, .shx is an index to the .shp, and .dbf contains 
the properties.

The OGR Shapefile driver can read geometries and properties together, but in 
the particular case of this dataset, if you are on Unix/Linux, due to the case 
sensitivity of filesystems, you need to rename TREES.DBF to trees.dbf, so that 
.dbf and .shp are associated.

I've tested that the following command then gives sensible result :
 ogr2ogr -f GeoJSON -s_srs EPSG:26917 -t_srs EPSG:4326 trees.json trees.shp

And to finish answering your question, the .sbn and .sbx are ESRI specific 
spatial index, and .shp.xml a ESRI specific metadata file. All 3 not used by 
OGR.

From gdemmy at gmail.com  Sun Jun  3 09:59:13 2012
From: gdemmy at gmail.com (George Demmy)
Date: Sun, 3 Jun 2012 12:59:13 -0400
Subject: [gdal-dev] GeoPDF (TM) vs. GeoSpatial PDF
In-Reply-To: <4FCA90D3.3090602@stripfamily.net>
References: <loom.20120602T122858-230@post.gmane.org>
	<201206021324.28784.even.rouault@mines-paris.org>
	<4FCA90D3.3090602@stripfamily.net>
Message-ID: <CA+7PDU1aPJmA-6Vei7goJ925nU2KPqHm=HE6hxpuu2qcYwnsGw@mail.gmail.com>

On Sat, Jun 2, 2012 at 6:16 PM, David Strip <gdal at stripfamily.net> wrote:
> Jukka's posting earlier today has made me aware that GDAL will now write a
> geospatial PDF. Is it also capable of writing a geoPDF (which is a trademark
> of TerraGo, but there is an OGC standard, so possibly it's legal to create
> them)?

Hi David,

As you mention, GeoPDF is a trademark, but it's increasingly weakly
associated with an particular encoding used to georegister the content
in a PDF. The method published by OGC as a best practice is the one
that was originally used to develop a suite of technologies around
using PDF as an geospatial application delivery platform branded as
"GeoPDF". There is also a georegistration encoding that was published
by Adobe as extensions to ISO 32000, the standard specifying PDF.
GeoPDF software can use either, so the encoding has nothing to do with
GeoPDFness.

Anyone is free to create georegistered PDF using the OGC best practice
or with the ISO method. Both specs are freely available on the web.
What folks are not supposed to do is sell stuff called GeoPDF if they
don't use TerraGo software to cook up the PDFs. I'm not debating
rightness, wrongness, or wisdom: just trying to be clear!

The choice of which encoding to use is largely a matter of taste, as
neither has been subjected to any rigorous scrutiny from a
standardization perspective. The OGC encoding was based upon a set of
standards promulgated by the US Government and its NATO allies called
DIGEST and NGA's GEOTRANS software. More at http://dgiwg.org for
DIGEST and http://earth-info.nga.mil/GandG/geotrans/ for GEOTRANS. The
ISO spec admits use of certain EPSG codes and WKT. Adobe Reader 9 and
later uses a version of Esri's projection engine, so from an
implementation perspective it's "whatever PE Reader can reach
understands". The geospatial bits of Reader are no longer being
actively developed by Adobe, Adobe having left that to TerraGo to
provide with its TerraGo Toolbar.

> When used in conjunction with the (free) TerraGo toolbar, the geoPDF
> provides many more capabilities than a geo-spatial pdf, especially if the
> pdf "modify" permission is set.

As of version 6 which shipped recently, the TerraGo Toolbar offers
continuous display of coordinates and other functionality for any
geospatial PDF as long as it can grok the encoding. It supports OGC
and ISO and uses proj4 via GDAL under the hood for projections. Like
Reader, Toolbar has some more advanced functionality that is
accessible if certain permission bits are set.

> From the looks of it, the main difference
> between a geospatial PDF and a geoPDF is that the latter contains a
> dictionary object LGIdict which contains the projection, the coordinate
> transform to the page, and that sort of thing. In fact, it will support
> multiple data frames on the same page.

What you're seeing here is the difference in encoding. The OGC
georeferencing uses the LGIDict data structure you mention and the ISO
uses something called a measurement dictionary. Both encodings support
multiple map frames. There are pointers to the specs on the GDAL
geospatial PDF page http://www.gdal.org/frmt_pdf.html.

Speaking of which, Even has been doing a knock-out job on the PDF
support, IMO! It's a challenge because there are two things that don't
jibe well with the GDAL data model. First, PDF is not so much a data
format as a presentation/consumption format and as such is
conceptually is at a very different level of abstraction than are
stuff like shapefiles and GeoTIFF. Second, and related, the
distinction between vector and raster hardly makes sense in PDF
content, but is a fundamental architectural reality in GDAL/OGR. I
mention this mainly to point out some of the battles that Even faces
and to provoke some thought about what it means to import or export a
PDF from GDAL...

Hope this helps!

George

From tobias.preuss at googlemail.com  Sun Jun  3 10:14:13 2012
From: tobias.preuss at googlemail.com (Tobias Preuss)
Date: Sun, 3 Jun 2012 19:14:13 +0200
Subject: [gdal-dev] Convert DBX/SHP to JSON using ogr2ogr
In-Reply-To: <201206031850.39541.even.rouault@mines-paris.org>
References: <CADEaiE8nBwvi4qLVzz0KZmXDKMkh1rXY9MPTZigfz-O7FouMMA@mail.gmail.com>
	<CADEaiE84bP+PnucH2vk1y8O4LeT3zEHQ+38P83-kMb1JczYn1g@mail.gmail.com>
	<201206031850.39541.even.rouault@mines-paris.org>
Message-ID: <CADEaiE-p8aw9Z-g76o8CqsTC=1N80TWf=mgbH2iKv-H9Qm+EpA@mail.gmail.com>

Dear Even.
I would have never had the idea that the files need to be small
letters all to make the matching working. Thank you so much for this
advice!!! and the additional education on the formats.
Can you tell how I can determine the source SRS from the files? Is
that possible?
Tobias


On Sun, Jun 3, 2012 at 6:50 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le dimanche 03 juin 2012 18:32:48, Tobias Preuss a ?crit :
>> Hello. I am trying convert shape files [1] of London (Canada) into
>> JSON. I am totally new to these formats but at least I found out that
>> ogr2ogr is able to do the job. However, there are two files that
>> contain the data as far as I can tell. One file TREES.DBF contains all
>> the properties. The other file trees.shp holds the main objects (trees
>> in this case) with an identifier. I can convert each file into JSON
>> with the following commands.
>>
>> $ ogr2ogr -f GeoJSON -s_srs EPSG:26917 -t_srs EPSG:4326
>> trees_coordinates.json trees.shp
>> $ ogr2ogr -f GeoJSON -s_srs EPSG:26917 TREES_properties.json TREES.DBF
>>
>> I am not sure what the other files are good for?!
>
> A shapefile consists at the minimum of .shp, .shx and .dbf files.
>
> .shp contains the geometry, .shx is an index to the .shp, and .dbf contains
> the properties.
>
> The OGR Shapefile driver can read geometries and properties together, but in
> the particular case of this dataset, if you are on Unix/Linux, due to the case
> sensitivity of filesystems, you need to rename TREES.DBF to trees.dbf, so that
> .dbf and .shp are associated.
>
> I've tested that the following command then gives sensible result :
> ?ogr2ogr -f GeoJSON -s_srs EPSG:26917 -t_srs EPSG:4326 trees.json trees.shp
>
> And to finish answering your question, the .sbn and .sbx are ESRI specific
> spatial index, and .shp.xml a ESRI specific metadata file. All 3 not used by
> OGR.

From even.rouault at mines-paris.org  Sun Jun  3 10:21:22 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 3 Jun 2012 19:21:22 +0200
Subject: [gdal-dev] Convert DBX/SHP to JSON using ogr2ogr
In-Reply-To: <CADEaiE-p8aw9Z-g76o8CqsTC=1N80TWf=mgbH2iKv-H9Qm+EpA@mail.gmail.com>
References: <CADEaiE8nBwvi4qLVzz0KZmXDKMkh1rXY9MPTZigfz-O7FouMMA@mail.gmail.com>
	<201206031850.39541.even.rouault@mines-paris.org>
	<CADEaiE-p8aw9Z-g76o8CqsTC=1N80TWf=mgbH2iKv-H9Qm+EpA@mail.gmail.com>
Message-ID: <201206031921.22738.even.rouault@mines-paris.org>

> Can you tell how I can determine the source SRS from the files? Is
> that possible?

Sometimes, you have an associated .prj file that contains the SRS. If the file 
is not present, then you must guess it.

From tobias.preuss at googlemail.com  Sun Jun  3 10:28:08 2012
From: tobias.preuss at googlemail.com (Tobias Preuss)
Date: Sun, 3 Jun 2012 19:28:08 +0200
Subject: [gdal-dev] Convert DBX/SHP to JSON using ogr2ogr
In-Reply-To: <201206031921.22738.even.rouault@mines-paris.org>
References: <CADEaiE8nBwvi4qLVzz0KZmXDKMkh1rXY9MPTZigfz-O7FouMMA@mail.gmail.com>
	<201206031850.39541.even.rouault@mines-paris.org>
	<CADEaiE-p8aw9Z-g76o8CqsTC=1N80TWf=mgbH2iKv-H9Qm+EpA@mail.gmail.com>
	<201206031921.22738.even.rouault@mines-paris.org>
Message-ID: <CADEaiE9aNUGCFX-evz=W-NmtvjcX5U-doEbX8Efgv76X1Z_knw@mail.gmail.com>

That is the answer I was afraid of. I heard of the project file. I
imagine it is quite hard to identify the correct SRS without the
project file.
Does ogr2ogr then recognize all settings by itself if the project file is given?

From chuck at sharpsteen.net  Sun Jun  3 10:28:24 2012
From: chuck at sharpsteen.net (Charlie Sharpsteen)
Date: Sun, 3 Jun 2012 10:28:24 -0700
Subject: [gdal-dev] Convert DBX/SHP to JSON using ogr2ogr
In-Reply-To: <201206031921.22738.even.rouault@mines-paris.org>
References: <CADEaiE8nBwvi4qLVzz0KZmXDKMkh1rXY9MPTZigfz-O7FouMMA@mail.gmail.com>
	<201206031850.39541.even.rouault@mines-paris.org>
	<CADEaiE-p8aw9Z-g76o8CqsTC=1N80TWf=mgbH2iKv-H9Qm+EpA@mail.gmail.com>
	<201206031921.22738.even.rouault@mines-paris.org>
Message-ID: <CAMEX5swWxCQevmAv=OiPfLPwas7aH+52Y7uoYdFKDsQu_ByvNQ@mail.gmail.com>

On Sun, Jun 3, 2012 at 10:21 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> > Can you tell how I can determine the source SRS from the files? Is
> > that possible?
>
> Sometimes, you have an associated .prj file that contains the SRS. If the
> file
> is not present, then you must guess it.


Or ask the person who gave you the data which coordinate system they
projected it into. Conversely, if you ever distribute geospatial data
_write this info down somewhere_ and include the notes with the data files.

-Charlie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120603/8dac218e/attachment.html>

From gdal at stripfamily.net  Sun Jun  3 21:02:38 2012
From: gdal at stripfamily.net (David Strip)
Date: Sun, 03 Jun 2012 22:02:38 -0600
Subject: [gdal-dev] GeoPDF (TM) vs. GeoSpatial PDF
In-Reply-To: <CA+7PDU1aPJmA-6Vei7goJ925nU2KPqHm=HE6hxpuu2qcYwnsGw@mail.gmail.com>
References: <loom.20120602T122858-230@post.gmane.org>
	<201206021324.28784.even.rouault@mines-paris.org>
	<4FCA90D3.3090602@stripfamily.net>
	<CA+7PDU1aPJmA-6Vei7goJ925nU2KPqHm=HE6hxpuu2qcYwnsGw@mail.gmail.com>
Message-ID: <4FCC335E.7050900@stripfamily.net>

On 6/3/2012 10:59 AM, George Demmy wrote:

>> David Strip wrote:

>> >  When used in conjunction with the (free) TerraGo toolbar, the geoPDF
>> >  provides many more capabilities than a geo-spatial pdf, especially if the
>> >  pdf "modify" permission is set.
> As of version 6 which shipped recently, the TerraGo Toolbar offers
> continuous display of coordinates and other functionality for any
> geospatial PDF as long as it can grok the encoding. It supports OGC
> and ISO and uses proj4 via GDAL under the hood for projections. Like
> Reader, Toolbar has some more advanced functionality that is
> accessible if certain permission bits are set.
>
While V6 of the toolbar (and in fact previous versions) provide 
continuous display of coordinates, a "true geoPDF" (which I believe 
means having the LGIDict), has far more coordinate conversion 
capability, as well as the ability to add "geo-marks", geo-located 
stamps (icons) added to the file. I verified this by downloading the 
latest version of the Terrago Toolbar (15.0.0.591). I opened a 
geo-spatial pdf that I created with ArcMap 10.0.2. I can get the 
position display in Lat/Lon and MGRS at the bottom of the image, and in 
the Geolocator tool (from the toolbar), I can also see UTM13N, WGS84, 
USNG, and MGRS. I can't use the GeoMark tools at all. I then open a 
geoPDF (a new generation USGS topo map). In this case I can set the 
GeoLocator projection to display in any of a hundred or more predefined 
projections, or define my own projection parameters. I can also mark the 
map with GeoMarks. The ability to use GeoMarks is not a function of the 
pdf "modify" bit being set. It is set in the ArcMap generated map, which 
I can add non-geospatial marks with other pdf tools.

I belief that the presence of the LGIDict is what enables these other 
features, but I could be wrong.  That's something I've been trying to 
find out.

From Jukka.Rahkonen at mmmtike.fi  Mon Jun  4 02:26:55 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Mon, 4 Jun 2012 09:26:55 +0000
Subject: [gdal-dev] Geospatial PDF with OGR_DATASOURCE
In-Reply-To: <201206021324.28784.even.rouault@mines-paris.org>
References: <loom.20120602T122858-230@post.gmane.org>
	<201206021324.28784.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A634578B3@suutari.haapa.mmm.fi>

Even Rouault wrote:
> 
> Le samedi 02 juin 2012 12:36:39, Jukka Rahkonen a ?crit :
> > Hi,
> > 
> > I was reading about a possibility of adding OGR vector 
> layers on top of
> > raster layer in geospatial pdf from http://gdal.org/frmt_pdf.html
> > 
> > Are there any example commands available? I guess that at 
> least discovering
> > the use of OGR_DISPLAY_FIELD and OGR_DISPLAY_LAYER_NAMES 
> may take a while
> > with plain trial and error.
> 
> I've tried to make the description of those option hopefully 
> a bit clearer. 
> Have a look at http://trac.osgeo.org/gdal/changeset/24529 . 
> If you can help in 
> making this more understandable, you're welcome. I know I'm 
> not so good at 
> writing docs.
> 
> Without screenshots of the UI of the "well-know PDF viewer" 
> (but GDAL/OGR doc 
> is generally rather ascetic ;-)), I'm afraid that it is still 
> a bit difficult to 
> understand. The best is to experiment.


I made some quick trials by combining some raster base maps and 
shapefiles and I am sure that this will be an amusing toy. But
with the default settings the vector features are almost invisible
on the map because of the drawing styles. I made a blind
trial with OGR Feature Styles and wrote these two lines into a
.ofs file for making linework a bit wider
	OFS-version 1.0
	DefaultStyle: PEN(c:#FF0000,w:5px)

However, it did not make any difference. Perhaps OFS is not
supported yet, or?  I did notice that I can change the colour
of the features through Acrobat reader's UI, but I cannot set
the line width. As a first aid I would suggest to use wider 
lines and bigger points as defaults. Areas, which are drawn 
as semi-transparent with a light grey fill are OK.

I am eager to have a possibility to capture a base map from
WMS and some vectors from WFS, put some styles into the 
vectors and combine everything together with gdal_translate 
into a geospatial PDF. It does not seem to be so far away.

-Jukka Rahkonen-


From gdemmy at gmail.com  Mon Jun  4 06:31:31 2012
From: gdemmy at gmail.com (George Demmy)
Date: Mon, 4 Jun 2012 14:31:31 +0100
Subject: [gdal-dev] GeoPDF (TM) vs. GeoSpatial PDF
In-Reply-To: <4FCC335E.7050900@stripfamily.net>
References: <loom.20120602T122858-230@post.gmane.org>
	<201206021324.28784.even.rouault@mines-paris.org>
	<4FCA90D3.3090602@stripfamily.net>
	<CA+7PDU1aPJmA-6Vei7goJ925nU2KPqHm=HE6hxpuu2qcYwnsGw@mail.gmail.com>
	<4FCC335E.7050900@stripfamily.net>
Message-ID: <CA+7PDU2nRtP9ChtUVJyTvjMsXD=QiqmvWbCWEbs7nY69mM7ZYg@mail.gmail.com>

On Mon, Jun 4, 2012 at 5:02 AM, David Strip <gdal at stripfamily.net> wrote:
> On 6/3/2012 10:59 AM, George Demmy wrote:
>
>>> David Strip wrote:
>
>
>>> > ?When used in conjunction with the (free) TerraGo toolbar, the geoPDF
>>> > ?provides many more capabilities than a geo-spatial pdf, especially if
>>> > the
>>> > ?pdf "modify" permission is set.
>>
>> As of version 6 which shipped recently, the TerraGo Toolbar offers
>> continuous display of coordinates and other functionality for any
>> geospatial PDF as long as it can grok the encoding. It supports OGC
>> and ISO and uses proj4 via GDAL under the hood for projections. Like
>> Reader, Toolbar has some more advanced functionality that is
>> accessible if certain permission bits are set.
>>
> While V6 of the toolbar (and in fact previous versions) provide continuous
> display of coordinates, a "true geoPDF" (which I believe means having the
> LGIDict), has far more coordinate conversion capability, as well as the
> ability to add "geo-marks", geo-located stamps (icons) added to the file. I
> verified this by downloading the latest version of the Terrago Toolbar
> (15.0.0.591). I opened a geo-spatial pdf that I created with ArcMap 10.0.2.
> I can get the position display in Lat/Lon and MGRS at the bottom of the
> image, and in the Geolocator tool (from the toolbar), I can also see UTM13N,
> WGS84, USNG, and MGRS. I can't use the GeoMark tools at all. I then open a
> geoPDF (a new generation USGS topo map). In this case I can set the
> GeoLocator projection to display in any of a hundred or more predefined
> projections, or define my own projection parameters. I can also mark the map
> with GeoMarks. The ability to use GeoMarks is not a function of the pdf
> "modify" bit being set. It is set in the ArcMap generated map, which I can
> add non-geospatial marks with other pdf tools.

To mark up a PDF in Adobe Reader, the file must be "enabled for
comment and analysis" by Adobe software. This has changed a little in
Reader 10 which allows use of the note tool for any PDF where previous
versions did not. You can mark up any non-secured PDF in Acrobat and
perhaps other software as well. To use the GeoMark Toolbar, the file
must be both enabled for comment and analysis (Adobe) and
GeoMark-enabled (TerraGo) to mark it up in Reader. It need only be
GeoMark-enabled to be marked up in Acrobat with Toolbar. The ability
to use GeoMarks in Adobe Reader *is* the function of a functionality
access bit being set by Adobe as well as TerraGo. However, it's not
permission to modify the file as much as permission/license to use
software tools. ArcMap does not generate comment-enabled PDFs by
default, so I don't understand what you mean in that last sentence.

> I belief that the presence of the LGIDict is what enables these other
> features, but I could be wrong. ?That's something I've been trying to find
> out.

All the presence of an LGIDict guarantees is that someone has tried to
use the OGC encoding to georeference the PDF. The different
functionality is turned on by permission bits, although Toolbar looks
for signatures which indicate that a map was created by very old
TerraGo software, and the presence of LGIDict is part of that
signature. It's possible to cook up a PDF with an LGIDict that will
trick Toolbar into working. I hope that leaves nothing to figure out
with respect to this stuff.

Regards,

George

From dhoese at gmail.com  Mon Jun  4 08:50:31 2012
From: dhoese at gmail.com (David Hoese)
Date: Mon, 04 Jun 2012 10:50:31 -0500
Subject: [gdal-dev] reproject python numpy binary swath/lat/lon
In-Reply-To: <CAMWde5qM9aAzeru0FZ5xD6iD--opRJ+_4bgtXGbsPHNog2b+dA@mail.gmail.com>
References: <4FC9004F.9070704@gmail.com>
	<CAMWde5qM9aAzeru0FZ5xD6iD--opRJ+_4bgtXGbsPHNog2b+dA@mail.gmail.com>
Message-ID: <4FCCD947.1040000@gmail.com>

On 6/1/12 1:44 PM, Jose Gomez-Dans wrote:
> Hi David,
>
> On 1 June 2012 18:47, David Hoese <dhoese at gmail.com 
> <mailto:dhoese at gmail.com>> wrote:
>
>     I have 3 binary files, the image/swath 2D data and the
>     corresponding 2D latitude and longitude pixel data from a previous
>     processing step.  The binary files were all created using numpy's
>     tofile().
>
>
> the link you posted was mostly there. Basically, you create (in 
> Python) the corresponding VRT files (you may want to use gdalbuildvrt 
> to give you a flavour of how they look like). Once the files are in 
> the system, you can reproject in python, using eg 
> gdal.AutoCreateWarpedVRT, or gdal.ReprojectImage (see example here: 
> http://jgomezdans.github.com/gdal_notes/reprojection.html).
>
> Using VRTs is quite nice if you are still going to do some further 
> processing in Python/GDAL. You can convert to something like a GeoTIFF 
> as a final stage.
>
>  Anyway, hope that's useful
> J

Thanks Jose,

I looked at your notes and most of it makes sense to me except I'm still 
having a few problems.

First, if I understand it correctly to get the GDAL utilities to use the 
external GEOLOCATION files you have to specify the "-geoloc" on the 
command line with programs like gdalwarp and gdal_translate.  How do I 
do that in the python API, or did I read something wrong?  When I open 
the VRT file and do a GetGeoTransform() I get the default (0, 1, 0, 0, 
0, 1), which means its not getting the lat/lon data right?  I'm also not 
including any SRS tag in the VRT files because I was hoping GDAL would 
get that information from the swath lat/lon files.

Second, I tried using gdalwarp as a test to get the data reprojected and 
into a tiff.  Initially it told me that I had too big of a file, so I 
shrunk it down.  Then I got the "Too many points (441 out of 441) failed 
to transform" error message.  I'm guessing this has to do with my 
reprojection parameters (see next problem).

Third, for the moment I am trying to reproject to a specific grid where 
I know the number of X and Y grid points as well as the type of 
projection and the PROJ4 parameters that go along with that.  I haven't 
found anything about grids except GDALGridCreate which doesn't seem to 
be in the python bindings.  Any suggestions for how to do this with out 
using command line calls?

-Dave


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120604/aabd6591/attachment.html>

From wrightc at forthvalleygis.co.uk  Mon Jun  4 09:42:50 2012
From: wrightc at forthvalleygis.co.uk (Colin Wright)
Date: Mon, 04 Jun 2012 17:42:50 +0100
Subject: [gdal-dev] Problems converting polygons to DXF with ogr2ogr
Message-ID: <4FCCF399.FDD4.0005.1@forthvalleygis.co.uk>

With gdal 1.8 and 1.9 I am unable to convert any polygon datasets to DXF in a format where they can be read by AutoCad.  Every time I try to open a DXF created with these versions I get the error:

The following error was encountered while reading
in HATCH starting at line 1546:
Error: expected group code 10
Invalid or incomplete DXF input -- drawing discarded.

I've found a couple of mentions of this issue on the mailing list in the past but haven't seen any real solutions.  Details are below:

I am currently using 1.9.0, and have tried converting programmatically from postgis 1.5.3 -> DXF  and   have also tried using ogr2ogr from Shapefile -> DXF with the same result.
The OGR2OGR command lines I've tried are:

ogr2ogr -f "DXF" polytest2.dxf polytest.shp
or 
ogr2ogr -f "DXF" -nlt POLYGON polytest2.dxf polytest.shp

The test shapefile contains only 3 simple polygon shapes with no holes or multi-part geometries, and as far as I can tell I'm using the standard DXF header and footer files that come with GDAL.  The DXFs work fine when created with the older 1.7 version of GDAL which just translates the polygons as lines.

Does anyone know of another approach I can try, or is this a known bug?  I can send anyone a sample dxf file if they would like to take a look at it.

Regards

Colin Wright




From woodbri at swoodbridge.com  Mon Jun  4 11:22:31 2012
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon, 04 Jun 2012 14:22:31 -0400
Subject: [gdal-dev] Problems converting polygons to DXF with ogr2ogr
In-Reply-To: <4FCCF399.FDD4.0005.1@forthvalleygis.co.uk>
References: <4FCCF399.FDD4.0005.1@forthvalleygis.co.uk>
Message-ID: <4FCCFCE7.2000200@swoodbridge.com>

Colin,

You might want to try reading the dxf file the the Teigha File 
Convertor. This is a Windows utility that converts between dwg abd dxf 
and the various versions of both. Its a free download and I just used it 
to convert about 60K dwg files to dxf and it works great. You can 
specify what version of dxf you are reading or writing. Oh and there is 
also a companion viewer application so you can view the files. I just 
found it a useful too because it was very flexible and supported 
multiple versions.

-Steve

On 6/4/2012 12:42 PM, Colin Wright wrote:
> With gdal 1.8 and 1.9 I am unable to convert any polygon datasets to
> DXF in a format where they can be read by AutoCad.  Every time I try
> to open a DXF created with these versions I get the error:
>
> The following error was encountered while reading in HATCH starting
> at line 1546: Error: expected group code 10 Invalid or incomplete DXF
> input -- drawing discarded.
>
> I've found a couple of mentions of this issue on the mailing list in
> the past but haven't seen any real solutions.  Details are below:
>
> I am currently using 1.9.0, and have tried converting
> programmatically from postgis 1.5.3 ->  DXF  and   have also tried
> using ogr2ogr from Shapefile ->  DXF with the same result. The
> OGR2OGR command lines I've tried are:
>
> ogr2ogr -f "DXF" polytest2.dxf polytest.shp or ogr2ogr -f "DXF" -nlt
> POLYGON polytest2.dxf polytest.shp
>
> The test shapefile contains only 3 simple polygon shapes with no
> holes or multi-part geometries, and as far as I can tell I'm using
> the standard DXF header and footer files that come with GDAL.  The
> DXFs work fine when created with the older 1.7 version of GDAL which
> just translates the polygons as lines.
>
> Does anyone know of another approach I can try, or is this a known
> bug?  I can send anyone a sample dxf file if they would like to take
> a look at it.
>
> Regards
>
> Colin Wright
>
>
>
> _______________________________________________ gdal-dev mailing
> list gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Mon Jun  4 13:37:23 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 4 Jun 2012 22:37:23 +0200
Subject: [gdal-dev] Geospatial PDF with OGR_DATASOURCE
In-Reply-To: <84446DEF76453C439E9E97E438E13A634578B3@suutari.haapa.mmm.fi>
References: <loom.20120602T122858-230@post.gmane.org>
	<201206021324.28784.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A634578B3@suutari.haapa.mmm.fi>
Message-ID: <201206042237.24134.even.rouault@mines-paris.org>

> 
> I made some quick trials by combining some raster base maps and
> shapefiles and I am sure that this will be an amusing toy. But
> with the default settings the vector features are almost invisible
> on the map because of the drawing styles. I made a blind
> trial with OGR Feature Styles and wrote these two lines into a
> .ofs file for making linework a bit wider
> 	OFS-version 1.0
> 	DefaultStyle: PEN(c:#FF0000,w:5px)
> 
> However, it did not make any difference. Perhaps OFS is not
> supported yet, or? 


Oh, I didn't even know that those .ofs file existed, but indeed I see them 
mentionned in http://www.gdal.org/ogr/ogr_feature_style.html . However, from a 
quick look, although this seems to be implemented in ogr/ogrfeaturestyle.cpp, 
this feature isn't used by any driver.

> I did notice that I can change the colour
> of the features through Acrobat reader's UI, but I cannot set
> the line width. As a first aid I would suggest to use wider
> lines and bigger points as defaults.
	
Yes, as far as I remember the current state of the code, the pen width is 
scaled with the coordinates of the geometries, so the appropriate value of the 
width depends on whether you work with projected or geographic SRS, and the 
layer spatial extent.

> Areas, which are drawn
> as semi-transparent with a light grey fill are OK.

Even if table level styling isn't supported, the PDF writer can fetch the 
style at the feature level (not at the table level like you tried). You can 
for example try the following to attach the style to the features :

ogr2ogr -f PDF poly.pdf poly.shp -sql "select *, 'PEN(c:#FF0000,w:5px)' as 
OGR_STYLE from poly"

Best regards,

Even

From Jukka.Rahkonen at mmmtike.fi  Tue Jun  5 00:12:19 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Tue, 5 Jun 2012 07:12:19 +0000
Subject: [gdal-dev] Geospatial PDF with OGR_DATASOURCE
In-Reply-To: <201206042237.24134.even.rouault@mines-paris.org>
References: <loom.20120602T122858-230@post.gmane.org>
	<201206021324.28784.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A634578B3@suutari.haapa.mmm.fi>
	<201206042237.24134.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A63457B72@suutari.haapa.mmm.fi>

Even Rouault wrote:

 
> > 
> > I made some quick trials by combining some raster base maps and
> > shapefiles and I am sure that this will be an amusing toy. But
> > with the default settings the vector features are almost invisible
> > on the map because of the drawing styles. I made a blind
> > trial with OGR Feature Styles and wrote these two lines into a
> > .ofs file for making linework a bit wider
> > 	OFS-version 1.0
> > 	DefaultStyle: PEN(c:#FF0000,w:5px)
> > 
> > However, it did not make any difference. Perhaps OFS is not
> > supported yet, or? 
> 
> 
> Oh, I didn't even know that those .ofs file existed, but 
> indeed I see them 
> mentionned in http://www.gdal.org/ogr/ogr_feature_style.html 
> . However, from a 
> quick look, although this seems to be implemented in 
> ogr/ogrfeaturestyle.cpp, 
> this feature isn't used by any driver.
> 
> > I did notice that I can change the colour
> > of the features through Acrobat reader's UI, but I cannot set
> > the line width. As a first aid I would suggest to use wider
> > lines and bigger points as defaults.
> 	
> Yes, as far as I remember the current state of the code, the 
> pen width is 
> scaled with the coordinates of the geometries, so the 
> appropriate value of the 
> width depends on whether you work with projected or 
> geographic SRS, and the 
> layer spatial extent.
> 
> > Areas, which are drawn
> > as semi-transparent with a light grey fill are OK.
> 
> Even if table level styling isn't supported, the PDF writer 
> can fetch the 
> style at the feature level (not at the table level like you 
> tried). You can 
> for example try the following to attach the style to the features :
> 
> ogr2ogr -f PDF poly.pdf poly.shp -sql "select *, 
> 'PEN(c:#FF0000,w:5px)' as 
> OGR_STYLE from poly"

I want to combine raster and vector sources but I found
it impossible to discover how to use the -sql parameter
together with the PDF creation option -co OGR_DATASOURCE=
Fortunately it was enough to add an attribute named OGR_STYLE
into the shapefile and fill in styles as strings. Styles are 
really applied feature by feature so it is possible to set
colours and line widths individually for each feature in the
shapefile, which is pretty amusing.

I could symbolize lines and polygons with PEN and BRUSH by
using the examples from http://www.gdal.org/ogr/ogr_feature_style.html
However, I could not make SYMBOL settings to work with my
points. They appear as grey circles even if I attached some
OGR_STYLE strings to them, like
 SYMBOL(c:#00FF00,id:"ogr-sym-7")

I was able to set the colours of the points by using PEN but 
altering the w: parameter did not change the size of the 
points.

-Jukka Rahkonen-

> Best regards,
> 
> Even
> 

From wrightc at forthvalleygis.co.uk  Tue Jun  5 02:50:20 2012
From: wrightc at forthvalleygis.co.uk (Colin Wright)
Date: Tue, 05 Jun 2012 10:50:20 +0100
Subject: [gdal-dev] Problems converting polygons to DXF with ogr2ogr
Message-ID: <4FCDE46B.FDD4.0005.1@forthvalleygis.co.uk>

Steve,
Thanks for your suggestion.  I tried opening the file in the Teigha
Viewer but it was giving an error as well.
The error in this case was:

ODA Warning: Syntax error or premature end of file on line/offset
1748.
Error: Loading of file "C:\Temp\cwpolytest.dxf" was failed.

In this case the line 1748 relates to a DICTIONARY line, which is
actually line #50 from the trailer.dxf file in OGR.
I've checked the header.dxf and trailer.dxf files and both are
identical to those in the gdal source code repository

Does anyone have a windows build of gdal 1.9 that does work for
converting polygons to dxf?

Thanks
Colin
?----------------------------------------------------------
On 6/4/2012 14:22 PM, Stephen Woodbridge wrote:

Colin,

You might want to try reading the dxf file the the Teigha File 
Convertor. This is a Windows utility that converts between dwg abd dxf

and the various versions of both. Its a free download and I just used
it 
to convert about 60K dwg files to dxf and it works great. You can 
specify what version of dxf you are reading or writing. Oh and there is

also a companion viewer application so you can view the files. I just 
found it a useful too because it was very flexible and supported 
multiple versions.

-Steve

On 6/4/2012 12:42 PM, Colin Wright wrote:
> With gdal 1.8 and 1.9 I am unable to convert any polygon datasets to
> DXF in a format where they can be read by AutoCad.  Every time I try
> to open a DXF created with these versions I get the error:
>
> The following error was encountered while reading in HATCH starting
> at line 1546: Error: expected group code 10 Invalid or incomplete
DXF
> input -- drawing discarded.
>
> I've found a couple of mentions of this issue on the mailing list in
> the past but haven't seen any real solutions.  Details are below:
>
> I am currently using 1.9.0, and have tried converting
> programmatically from postgis 1.5.3 ->  DXF  and   have also tried
> using ogr2ogr from Shapefile ->  DXF with the same result. The
> OGR2OGR command lines I've tried are:
>
> ogr2ogr -f "DXF" polytest2.dxf polytest.shp or ogr2ogr -f "DXF" -nlt
> POLYGON polytest2.dxf polytest.shp
>
> The test shapefile contains only 3 simple polygon shapes with no
> holes or multi-part geometries, and as far as I can tell I'm using
> the standard DXF header and footer files that come with GDAL.  The
> DXFs work fine when created with the older 1.7 version of GDAL which
> just translates the polygons as lines.
>
> Does anyone know of another approach I can try, or is this a known
> bug?  I can send anyone a sample dxf file if they would like to take
> a look at it.
>
> Regards
>
> Colin Wright
>


From bfraser at geoanalytic.com  Tue Jun  5 07:49:14 2012
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Tue, 05 Jun 2012 08:49:14 -0600
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading
	support
In-Reply-To: <BANLkTik4uK1nc+z=qTnvuhs8L=saNDLihw@mail.gmail.com>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4DFC4CE7.8030706@tiscali.it> <4DFC9C4A.9080404@pobox.com>
	<4E070B19.2090305@tiscali.it> <4E071B1E.70900@pobox.com>
	<4E0760D5.9030006@tiscali.it>
	<BANLkTik4uK1nc+z=qTnvuhs8L=saNDLihw@mail.gmail.com>
Message-ID: <4FCE1C6A.9070303@geoanalytic.com>

Has there been any progress in reading AVNIR2 data?  GDAL's ceos driver 
doesn't support georeferencing...

Best Regards,
Brent Fraser


On 6/27/2011 6:56 AM, Rodolfo Bonnin wrote:
> Hello Antonio,
>
> I'll read the specs regarding JaxaPalser type, out software is reading 
> those and they look well, but I didn't analyze the format in detail. 
> I've also added georeferencing (Calculating the affine transform based 
> on the 4 corners and assigning a coordinate system (WGS84 instead of 
> ITRF97 at the moment as we are based on 1.8.0) to the JaxaPalsar driver.
>
> For the time being, I'm writing new drivers for the PRISM and AVNIR2 
> sensors, based on the current JaxaPalsar driver, as we are constrained 
> in time, but I think that once I send the code, the diffing could be 
> useful when writing the new unified driver. I'm ready to collaborate 
> if you think another approach could more useful. The idea is to have 
> PRISM and AVNIR2 support ASAP.
>
> Regards,
> Rodolfo Bonnin.
>
> 2011/6/26 Antonio Valentino <antonio.valentino at tiscali.it 
> <mailto:antonio.valentino at tiscali.it>>:
> > Hi Frank,
> >
> > Il 26/06/2011 13:42, Frank Warmerdam ha scritto:
> >> On 11-06-26 06:34 AM, Antonio Valentino wrote:
> >>> Hi Frank,
> >
> > [...]
> >
> >>> Looking deeper into the ceos2 code it seems to me that the 
> "recipe" for
> >>> decoding ALOS-PALSAR products do not match at all specifications I can
> >>> find at
> >>>
> >>> http://www.eorc.jaxa.jp/ALOS/en/doc/fdata/PALSAR_L10_J_ENa.zip
> >>>
> >>> Does that recipe refers to another format specification document?
> >>
> >> Antonio,
> >>
> >> I don't know.
> >
> > well, in this case I guess it is not a good idea to modify that recipe
> > in any manner
> >
> >>> Also, regarding the ceos2 driver in general, I didn't find an obvious
> >>> way to support CEOS products with multiple image files (like multi
> >>> polarization PALSAR or ALOS PRISM).
> >>
> >> Ah, that may well have been part of Phil's rationale for handling
> >> multi-polarization data with custom drivers.  I don't know how hard
> >> it would be to do so within the existing SAR_CEOS driver.
> >
> > OK, thank you for confirming my analysis
> >
> >> Possibly you could set up a multi-polarization driver based on the
> >> low level ceos2 code but with a somewhat different recipe mechanism?
> >
> > Yes I could try.
> >
> > A new CEOS multi-band driver could be used for ALOS (all three sensors)
> > and Landsat.
> > There are other sensors that could be interesting to support?
> > Where can I find pointers and format spec?
> >
> > ciao
> >
> > --
> > Antonio Valentino
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> -- 
> Ing. Rodolfo Bonnin
> SUR Emprendimientos Tecnol?gicos
>
> Per? 345  Piso 5to Oficina "B" (C1067AAG)
> Ciudad de Buenos Aires, Argentina
> Tel. +54 (11) 4342-2976/84
> rodolfobonnin at suremptec.com.ar <mailto:rodolfobonnin at suremptec.com.ar>
> www.suremptec.com <http://www.suremptec.com>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120605/9802a287/attachment.html>

From even.rouault at mines-paris.org  Tue Jun  5 15:21:13 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 6 Jun 2012 00:21:13 +0200
Subject: [gdal-dev] Geospatial PDF with OGR_DATASOURCE
In-Reply-To: <84446DEF76453C439E9E97E438E13A63457B72@suutari.haapa.mmm.fi>
References: <loom.20120602T122858-230@post.gmane.org>
	<201206042237.24134.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A63457B72@suutari.haapa.mmm.fi>
Message-ID: <201206060021.13795.even.rouault@mines-paris.org>

> I want to combine raster and vector sources but I found
> it impossible to discover how to use the -sql parameter
> together with the PDF creation option -co OGR_DATASOURCE=
> Fortunately it was enough to add an attribute named OGR_STYLE
> into the shapefile and fill in styles as strings.

Yes, you can't directly do that through the GDAL PDF driver, but you can for 
example use a OGR VRT as the datasource for the OGR_DATASOURCE creation 
option.

> 
> I could symbolize lines and polygons with PEN and BRUSH by
> using the examples from http://www.gdal.org/ogr/ogr_feature_style.html
> However, I could not make SYMBOL settings to work with my
> points. They appear as grey circles even if I attached some
> OGR_STYLE strings to them, like
>  SYMBOL(c:#00FF00,id:"ogr-sym-7")
> 
> I was able to set the colours of the points by using PEN but
> altering the w: parameter did not change the size of the
> points.

Yes, SYMBOL tool was not yet implemented up to now. There's now a limited 
implementation of it :

r24543 /trunk/ (3 files in 3 dirs): OGR PDF: use SYMBOL styling on point 
geometries, limited to taking into account the id (ogr-sym-0 to ogr-sym-9), c 
and s parameters

Note that the PEN, BRUSH and LABEL tool are also limited in the support of 
their parameters :
  * color, width and dash pattern for PEN
  * color for BRUSH
  * text, color, size and angle for TEXT (the text being limited to ASCII 
characters)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120606/b13dc937/attachment.html>

From Jukka.Rahkonen at mmmtike.fi  Wed Jun  6 00:16:56 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Wed, 6 Jun 2012 07:16:56 +0000
Subject: [gdal-dev] Geospatial PDF with OGR_DATASOURCE
In-Reply-To: <201206060021.13795.even.rouault@mines-paris.org>
References: <loom.20120602T122858-230@post.gmane.org>
	<201206042237.24134.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A63457B72@suutari.haapa.mmm.fi>
	<201206060021.13795.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A63457D1D@suutari.haapa.mmm.fi>

Even Rouault  wrote:

> > However, I could not make SYMBOL settings to work with my
>> points. They appear as grey circles even if I attached some
> > OGR_STYLE strings to them, like
>> SYMBOL(c:#00FF00,id:"ogr-sym-7")
>>
> > I was able to set the colours of the points by using PEN but
> > altering the w: parameter did not change the size of the
 >> points.
> Yes, SYMBOL tool was not yet implemented up to now. There's now a limited implementation of it :
> r24543 /trunk/ (3 files in 3 dirs): OGR PDF: use SYMBOL styling on point geometries,
> limited to taking into account the id (ogr-sym-0 to ogr-sym-9), c and s parametersNote
> that   the PEN, BRUSH and LABEL tool are also limited in the support of their parameters :
> * color, width and dash pattern for PEN* color for BRUSH* text, color, size and angle for
> TEXT (the text being limited to ASCII characters)



I installed GDAL dev from gisinternals.com<http://www.gisinternals.com> and it claims to contain r24544.  However,

I can still see only grey circles.

My styled test points are available at http://latuviitta.org/documents/styled_pdf_points.gml



The command I used for testing is

ogr2ogr -f PDF pdf_point_test.pdf styled_pdf_points.gml



-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120606/aeb56bf0/attachment.html>

From even.rouault at mines-paris.org  Wed Jun  6 11:57:24 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 6 Jun 2012 20:57:24 +0200
Subject: [gdal-dev] Geospatial PDF with OGR_DATASOURCE
In-Reply-To: <84446DEF76453C439E9E97E438E13A63457D1D@suutari.haapa.mmm.fi>
References: <loom.20120602T122858-230@post.gmane.org>
	<201206060021.13795.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A63457D1D@suutari.haapa.mmm.fi>
Message-ID: <201206062057.24371.even.rouault@mines-paris.org>


> I installed GDAL dev from gisinternals.com<http://www.gisinternals.com> and
> it claims to contain r24544.  However,
> 
> I can still see only grey circles.

Weird, I can see that the updated unit tests pass, so I suspect that there's 
something else.

> 
> My styled test points are available at
> http://latuviitta.org/documents/styled_pdf_points.gml

The link does not work (the domain name has expired apparently), but I've 
successfully tested it with the following GML file :

<?xml version="1.0" encoding="utf-8" ?>
<ogr:FeatureCollection
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://ogr.maptools.org/ point.xsd"
     xmlns:ogr="http://ogr.maptools.org/"
     xmlns:gml="http://www.opengis.net/gml">
  <gml:featureMember>
    <ogr:point fid="point.0">
      <ogr:geometryProperty><gml:Point><gml:coordinates>479819.84375,4765180.5</gml:coordinates></gml:Point></ogr:geometryProperty>
      <ogr:AREA>215229.266</ogr:AREA>
      <ogr:EAS_ID>168</ogr:EAS_ID>
      <ogr:PRFEDEA>35043411</ogr:PRFEDEA>
      <ogr:OGR_STYLE>SYMBOL(c:#FF0000,id:"ogr-sym-0",s:100)</ogr:OGR_STYLE>
    </ogr:point>
  </gml:featureMember>
  <gml:featureMember>
    <ogr:point fid="point.1">
      <ogr:geometryProperty><gml:Point><gml:coordinates>480035.34375,4765558.5</gml:coordinates></gml:Point></ogr:geometryProperty>
      <ogr:AREA>247328.172</ogr:AREA>
      <ogr:EAS_ID>179</ogr:EAS_ID>
      <ogr:PRFEDEA>35043423</ogr:PRFEDEA>
      <ogr:OGR_STYLE>SYMBOL(c:#FF00FF,id:"ogr-sym-5",s:50)</ogr:OGR_STYLE>
    </ogr:point>
  </gml:featureMember>
</ogr:FeatureCollection>

and

ogr2ogr -f pdf temp.pdf point.gml -dsco MARGIN=100

Did you check that ogrinfo on your GML file reports lines with "Style = 
SYMBOL(something)" just before the geometry WKT ? 

Even

From Jukka.Rahkonen at mmmtike.fi  Wed Jun  6 14:33:41 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Wed, 6 Jun 2012 21:33:41 +0000
Subject: [gdal-dev] Geospatial PDF with OGR_DATASOURCE
In-Reply-To: <201206062057.24371.even.rouault@mines-paris.org>
References: <loom.20120602T122858-230@post.gmane.org>
	<201206060021.13795.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A63457D1D@suutari.haapa.mmm.fi>,
	<201206062057.24371.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A63457F31@suutari.haapa.mmm.fi>

Even Rouault wrote:
>
>> My styled test points are available at
>> http://latuviitta.org/documents/styled_pdf_points.gml

> The link does not work (the domain name has expired apparently), but I've
> successfully tested it with the following GML file :

I got the domain name back so the link should work again soon.


> Did you check that ogrinfo on your GML file reports lines with "Style =
> SYMBOL(something)" just before the geometry WKT ?

Oginfo is reporting like this

OGRFeature(pdf_piste2):0
  fid (String) = pdf_piste2.0
  OGR_STYLE (String) = SYMBOL(id:"ogr-sym-1",c:#000000,s:5)
  Style = SYMBOL(id:"ogr-sym-1",c:#000000,s:5)
  POINT (380530.90923728806 6677521.4394915262)

Data was as shapefile first and I converted it into GML with ogr2ogr. May have some little troubles with character encoding (shapefile must have been iso-8859-1) but ogrinfo does not look bad for me.  

-Jukka-

> Even

From even.rouault at mines-paris.org  Wed Jun  6 15:05:08 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 7 Jun 2012 00:05:08 +0200
Subject: [gdal-dev] Geospatial PDF with OGR_DATASOURCE
In-Reply-To: <84446DEF76453C439E9E97E438E13A63457F31@suutari.haapa.mmm.fi>
References: <loom.20120602T122858-230@post.gmane.org>
	<201206062057.24371.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A63457F31@suutari.haapa.mmm.fi>
Message-ID: <201206070005.08782.even.rouault@mines-paris.org>

Le mercredi 06 juin 2012 23:33:41, Rahkonen Jukka a ?crit :
> Even Rouault wrote:
> >> My styled test points are available at
> >> http://latuviitta.org/documents/styled_pdf_points.gml
> > 
> > The link does not work (the domain name has expired apparently), but I've
> 
> > successfully tested it with the following GML file :
> I got the domain name back so the link should work again soon.
> 
> > Did you check that ogrinfo on your GML file reports lines with "Style =
> > SYMBOL(something)" just before the geometry WKT ?
> 
> Oginfo is reporting like this
> 
> OGRFeature(pdf_piste2):0
>   fid (String) = pdf_piste2.0
>   OGR_STYLE (String) = SYMBOL(id:"ogr-sym-1",c:#000000,s:5)
>   Style = SYMBOL(id:"ogr-sym-1",c:#000000,s:5)
>   POINT (380530.90923728806 6677521.4394915262)
> 
> Data was as shapefile first and I converted it into GML with ogr2ogr. May
> have some little troubles with character encoding (shapefile must have
> been iso-8859-1) but ogrinfo does not look bad for me.

I've downloaded 
http://www.gisinternals.com/sdk/Download.aspx?file=release-1500-gdal-
mapserver.zip and used it successfully to convert your file.

> 
> -Jukka-
> 
> > Even
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Jukka.Rahkonen at mmmtike.fi  Wed Jun  6 21:09:46 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Thu, 7 Jun 2012 04:09:46 +0000
Subject: [gdal-dev] Geospatial PDF with OGR_DATASOURCE
In-Reply-To: <201206070005.08782.even.rouault@mines-paris.org>
References: <loom.20120602T122858-230@post.gmane.org>
	<201206062057.24371.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A63457F31@suutari.haapa.mmm.fi>,
	<201206070005.08782.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A63457F91@suutari.haapa.mmm.fi>

Even Rouault wrote:

>>
>> Data was as shapefile first and I converted it into GML with ogr2ogr. May
>> have some little troubles with character encoding (shapefile must have
>> been iso-8859-1) but ogrinfo does not look bad for me.

> I've downloaded
> http://www.gisinternals.com/sdk/Download.aspx?file=release-1500-gdal-
> mapserver.zip and used it successfully to convert your file.

Works perfectly for me too now.  The built I downloaded yesterday morning had to be without the r24543 changes.

-Jukka-

From shlomivaknin at gmail.com  Thu Jun  7 02:08:54 2012
From: shlomivaknin at gmail.com (Shlomi Vaknin)
Date: Thu, 7 Jun 2012 12:08:54 +0300
Subject: [gdal-dev] Compiling gdal with xlc
Message-ID: <CANyzh=japjA4ghS8-9kPdZ4wyzJ_=2mJk5dvBNSRjO8LRuYhXQ@mail.gmail.com>

Hello,
I would like to know if anyone has any experience in compiling this library
over aix using xlc compiler (I will most likely not be able to use gcc, but
still not sure..)
what i specifically need from the library is to read dted files.

if you got any suggestions, any hint will help

thanks alot!
Shlomi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120607/73e1e0d7/attachment.html>

From karsten at terragis.net  Thu Jun  7 16:43:52 2012
From: karsten at terragis.net (karsten)
Date: Thu, 7 Jun 2012 16:43:52 -0700
Subject: [gdal-dev] loading geometries only into postgis via ogr2ogr using
	shp file only as input
Message-ID: <DB85A73E393B4F87A1908E43D21A2B25@terragis2>

Hi All, 

I posted the question below in the PostGIS email and local CUGOS email lists
and got some good input. 
Now I wanted to determine how hard it would be to 'hack' the ogr2ogr utility
program to be able to only load the geometries of a shape file (shp file
only, without shx and dbf that are usually required) into PostGIS. Thus only
the geometry is needed and a unique id, the test that ogr2ogr does if shx
and dbf are present should be omitted (that is that hack I am talking about)
Any ideas on that if that could be accomplished with by hacking ogr2ogr
without too much trouble ? Or is there any other utility tool out there to
get this done preferably without programming :)

Cheers 
Karsten 

Terra GIS LTD 
 <blocked::http://www.terragis.net/> www.terragis.net
............................................................................
............................................................................
............................................................................
>>> I am working on a data upload function where for a web map a user can
upload a shape file onto the server, the file will then be loaded via a
utility into PostGIS e.g. using ogr2ogr or shp2pgsql. 
Now we all know that usually a shape files has at least 3 files shp, shx and
dbf to be complete... but unusually - well I was wondering if it would be
possible to only use a shp file alone to load the geometry to PostGIS (if it
is ok to loose index and attributes) 

The reason is this would have several advantages for the work I am tying to
do 
1. the shape file is user provided (if will be always 'simple' polygon
shapes, but due to that will always have non consistent attributes (i.e not
the same table schema) which are not needed anyway for the purposes of the
app 
2. the geometry alone will be used to show areas of Interest for the user on
the map (attributes are not needed, only location and extent matters) 
3. inconsistencies of differing attributes will not be a problem if I could
in fact only import the geometry to PostGIS and simply add a unique gid and
user id as only default attributes to the PostGIS table 
4. another advantage would be that only the single shp file alone would need
to be uploaded to the server :) >>>>
............................................................................
...................................... 





=======
Email scanned by PC Tools - No viruses or spyware found.
(Email Guard: 9.0.0.888, Virus/Spyware Database: 6.19840)
http://www.pctools.com/
=======
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120607/e4d0affa/attachment-0001.html>

From chaitanya.ch at gmail.com  Thu Jun  7 19:54:55 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri, 8 Jun 2012 08:24:55 +0530
Subject: [gdal-dev] loading geometries only into postgis via ogr2ogr
 using shp file only as input
In-Reply-To: <DB85A73E393B4F87A1908E43D21A2B25@terragis2>
References: <DB85A73E393B4F87A1908E43D21A2B25@terragis2>
Message-ID: <CAMKgpOb0Lg8HF6dF76z3_xSx4tdkBbQZfposf+Z7brN49dBvJg@mail.gmail.com>

Karsten,

shapelib used by OGR can handle shapefiles without the dbf files.
However, it uses the shx file to build the index. It may be possible to
build the index by reading the shp file, but it needs non-trivial changes
to the shapelib.

On Fri, Jun 8, 2012 at 5:13 AM, karsten <karsten at terragis.net> wrote:

> **
>  ****Hi All,
>
> I posted the question below in the PostGIS email and local CUGOS email
> lists and got some good input. **
> **Now I wanted to determine how hard it would be to 'hack' the ogr2ogr
> utility program to be able to only load the geometries of a shape file (shp
> file only, without shx and dbf that are usually required) into PostGIS. Thu
> s only the geometry is needed and a unique id, the test that ogr2ogr does if
> shx and dbf are present should be omitted (that is that hack I am talking
> about)
> Any ideas on that if that could be accomplished with by hacking ogr2ogr without
> too much trouble ? Or is there any other utility tool out there to get
> this done preferably without programming :)**
> **
>
> Cheers
> Karsten
> Terra GIS LTD
> www.terragis.net**
> **........................................................................
> .........................................................................
> ..........................................................................
> .........**
> **>>> I am working on a data upload function where for a web map a user
> can upload a shape file onto the server, the file will then be loaded via a
> utility into PostGIS e.g. using ogr2ogr or shp2pgsql.
> Now we all know that usually a shape files has at least 3 files shp, shx
> and dbf to be complete... but unusually - well I was wondering if it would
> be possible to only use a shp file alone to load the geometry to PostGIS
> (if it is ok to loose index and attributes)
>
> The reason is this would have several advantages for the work I am tying
> to do
> 1. the shape file is user provided (if will be always 'simple' polygon
> shapes, but due to that will always have non consistent attributes (i.e not
> the same table schema) which are not needed anyway for the purposes of the
> app
> 2. the geometry alone will be used to show areas of Interest for the user
> on the map (attributes are not needed, only location and extent matters)
> 3. inconsistencies of differing attributes will not be a problem if I
> could in fact only import the geometry to PostGIS and simply add a unique
> gid and user id as only default attributes to the PostGIS table
> 4. another advantage would be that only the single shp file alone would
> need to be uploaded to the server :) >>>>
> .........................................................................
> .........................................
> **
>
>
>
>
>
> =======
> Email scanned by PC Tools - No viruses or spyware found.
> (Email Guard: 9.0.0.888, Virus/Spyware Database: 6.19840)
> http://www.pctools.com<http://www.pctools.com/?cclick=EmailFooterClean_51>
> =======
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120608/71b6924f/attachment.html>

From s.r.kriishna at gmail.com  Thu Jun  7 22:35:28 2012
From: s.r.kriishna at gmail.com (SIVA RAMA KRISHNA)
Date: Fri, 8 Jun 2012 11:05:28 +0530
Subject: [gdal-dev] saving a shape File after obtaining from intersection
 from to two different shape Files
Message-ID: <CAP-zkzeQKKqKN8YTop9DEVv20hgvrmNv8OXMWe-i-HiEwy-aYQ@mail.gmail.com>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120608/2926f878/attachment.html>

From s.r.kriishna at gmail.com  Thu Jun  7 23:08:49 2012
From: s.r.kriishna at gmail.com (SIVA RAMA KRISHNA)
Date: Fri, 8 Jun 2012 11:38:49 +0530
Subject: [gdal-dev] how to store a shapefile afterobtaining from
 intersection of two different shapeFiles
Message-ID: <CAP-zkzdjTdzE=qaX8Ywn33DQb5A_mNQ4ESE4hE3=n-=44zvJrw@mail.gmail.com>

mywindow::mywindow(QWidget *parent) :    QMainWindow(parent){
view=new QGraphicsView(this);    view->repaint();    scene=new
QGraphicsScene();    OGRRegisterAll();    scaleFactor=0.01;    //poDS
= OGRSFDriverRegistrar::Open( "admin.shp");    //poLayer =
poDS->GetLayerByName( "admin");    poDS = OGRSFDriverRegistrar::Open(
"india_st.shp");    poLayer = poDS->*GetLayerByName*( "india_st");
poDS1=OGRSFDriverRegistrar::Open("india_ds.shx");
poLayer1=poDS1->*GetLayerByName*("india_ds");
poLayer->*ResetReading*();    poLayer1->*ResetReading*();
view->setRenderHint(QPainter::Antialiasing);
while(((poFeature=poLayer->*GetNextFeature*())!=NULL) &&
((poFeature1=poLayer1->*GetNextFeature*())!=NULL))    {
poGeometry=poFeature->GetGeometryRef();
poGeometry1=poFeature1->GetGeometryRef();        OGREnvelope *
psEnvelope1 = new OGREnvelope();        OGREnvelope * psEnvelope2 =
new OGREnvelope();        poGeometry->*getEnvelope*(psEnvelope1);
  poGeometry1->*getEnvelope*(psEnvelope2);        qDebug() <<
psEnvelope1->MinX << psEnvelope1->MinY <<  psEnvelope1->MaxX <<
psEnvelope1->MaxY;        qDebug() << psEnvelope2->MinX <<
psEnvelope2->MinY <<  psEnvelope2->MaxX << psEnvelope2->MaxY;
if (this->Intersects1(poGeometry,poGeometry1)==1)        {
QPainter painter2;
poGeometry2=poGeometry->*Intersection*(poGeometry1);
if(poGeometry2 !=NULL                    &&
wkbFlatten(poGeometry2->*getGeometryType*()) == wkbPolygon)
{                qDebug()<<"1yes";                polyShape2 =
(OGRPolygon*) poGeometry2;
drawPolyShape(painter2,polyShape2,MBR,scaleFactor);            }
 }        this->setCentralWidget(view);    }//end of while loop
QString filename3,projString;    filename3="india_st_out.shp";
OGRwkbGeometryType type;    ShapeFileWriter( filename3,type,
projString);}//end of main
OGRBoolean mywindow::Intersects1(OGRGeometry *poGeom,  OGRGeometry
*poOtherGeom ) const{   // this is for obtaining a region for
interscetion}
void mywindow::drawPolyShape(QPainter& painter,OGRPolygon*
polyShape,const QRectF& MBR, const double& scaleFactor){        // for
drawing a shape file
}
void mywindow::drawClosedLinearRing(QPainterPath&
painter,OGRLinearRing* linearRing,
const QRectF& MBR, const double& scaleFactor){              // for
drawing a  shape  file
}
void mywindow::ShapeFileWriter(QString filename,OGRwkbGeometryType
type,QString projString)// program to write to shape file     {
QFileInfo info(filename);        QString baseFileName =
info.absolutePath(); //+ QDir::separator();        baseFileName +=
info.baseName();            QFile fileshx(baseFileName + ".shx");
  QFile fileshp(baseFileName + ".shp");        QFile
filedbf(baseFileName + ".dbf");        QFile fileprj(baseFileName +
".prj");        if(fileshp.exists())        {
fileshp.remove();        }        if(fileshx.exists())        {
    fileshx.remove();        }        if(filedbf.exists())        {
        filedbf.remove();        }        if(fileprj.exists())
{            fileprj.remove();        }        QString fileName =
filename;        QStringList list;        const char *pszDriverName =
"ESRI Shapefile";        OGRSFDriver *poDriver;
OGRRegisterAll();        poDriver =
OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(
pszDriverName );        if( poDriver == NULL )        {
return;        }        poDS =
poDriver->*CreateDataSource*(filename.toLatin1().data(), NULL );
 if( poDS == NULL )        {            return;        }
filename.truncate(fileName.length()-4);        poLayer =
poDS->*CreateLayer*(filename.toLatin1().data(), NULL, type, NULL);
   if( poLayer == NULL )        {            return;        }
if(!projString.isEmpty() && !projString.isNull())        {
filename = filename + ".prj";            QFile data(filename);
   if (data.*open*(QFile::WriteOnly | QFile::Truncate))            {
              QTextStream out(&data);
out<<projString<<"\n";                 list.append(projString);
    }            data.*close*();        }
        int rec;//
rec=identifyRecord(psEnvelope3->MinX,psEnvelope3->MinY,psEnvelope3->MaxX
);        int x;        x=addRecord(poGeometry2,list);        int y;
     y=getNumofRecords();        qDebug()<<y;    }int
mywindow::addRecord(OGRGeometry* geometry,QStringList list)    {
 int fID;        OGRFeature *poFeature;        poFeature =
OGRFeature::CreateFeature( poLayer->*GetLayerDefn*() );
poFeature->SetField( "ID", (int)poFeature->GetFID());
poFeature->SetGeometry( geometry );        for(int i = 0; i <
list.size(); i++)        {            qDebug()<<"ADDED";
poFeature->SetField( i, list.at(i).toDouble());        }        if(
poLayer->*CreateFeature*( poFeature ) != OGRERR_NONE )        {
    return -1;        }        fID = (int)poFeature->GetFID();
OGRFeature::DestroyFeature( poFeature );        return fID;   }
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120608/1fd054ae/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Thu Jun  7 23:48:59 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 8 Jun 2012 06:48:59 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?loading_geometries_only_into_postgis_via_ogr?=
	=?utf-8?q?2ogr_using=09shp_file_only_as_input?=
References: <DB85A73E393B4F87A1908E43D21A2B25@terragis2>
Message-ID: <loom.20120608T084518-735@post.gmane.org>

karsten <karsten <at> terragis.net> writes:


> 
> Now I wanted to determine how hard it 
> would be to 'hack' the ogr2ogr utility 
> program to be able to only load the geometries of a shape file (shp file only,


Hi,

OpenJUMP can open such shapefiles but I am not sure if it can store them into
PostGIS. The CORE version for sure not, it can only read from PostGIS but the
PLUS version perhaps can.

-Jukka Rahkonen-


From kassies at gmail.com  Fri Jun  8 05:00:48 2012
From: kassies at gmail.com (Rutger)
Date: Fri, 8 Jun 2012 05:00:48 -0700 (PDT)
Subject: [gdal-dev] Reading a NetCDF file with python (not recognised as a
 supported dataset name
Message-ID: <1339156848808-4979943.post@n6.nabble.com>

Dear list,

I am trying to open a NetCDF file with the Python bindings. My GDAL 1.9
build (Win32 from Tamas) shows the NetCDF driver when i run "gdalinfo
--formats", so it should be possible.

When using the pre-build command-line utilities all works well. But when i
move to Python i get the message:
/" ... does not exist in the file system, and is not recognised as a
supported dataset name."/
I dont have the slightest clue about what i'm doing wrong.

I have simplified the problem to 3 steps:
1. Use gdal_translate to select a subdataset and output to VRT
2. Read the VRT in Python with gdal.Open()
3. Use gdal_translate to convert the VRT to a Geotiff

Step 1 & 3 work well, but 2 fails. Is there some limitation of the Python
bindings regarding NetCDF? The script runs fine if i replace the NetCDF with
a Geotiff file.

Any help would be appreciated.

An example NetCDF i used can be found at:
ftp://hydro1.sci.gsfc.nasa.gov/data/s4pa/WAOB/LPRM_TMI_DY_SOILM3.001/2012/05/
ftp://hydro1.sci.gsfc.nasa.gov/data/s4pa/WAOB/LPRM_TMI_DY_SOILM3.001/2012/05/ 

Below is the Python script i have used for exploring the issue:

import os
try:
    from osgeo import gdal
except ImportError:
    import gdal

netcdffile =
"NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.nc:soil_moisture_x"
vrtfile = "LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.vrt"
tiffile = "LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.tif"

# 1: convert the netcdf to vrt externally (works well)
os.system('gdal_translate -of "VRT" ' + netcdffile + ' ' + vrtfile)

# 2: try to open the vrt in Python (fails at .ReadAsArray)
dsin = gdal.Open(vrtfile)
   
if not dsin is None:
  indata = dsin.ReadAsArray(0, 0, dsin.RasterXSize, dsin.RasterYSize)

# 3: convert the same vrt to a tif externally (works well)
os.system('gdal_translate ' + vrtfile + ' ' + tiffile)


Regards,
Rutger


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Reading-a-NetCDF-file-with-python-not-recognised-as-a-supported-dataset-name-tp4979943.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Fri Jun  8 06:07:20 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri, 8 Jun 2012 18:37:20 +0530
Subject: [gdal-dev] how to store a shapefile afterobtaining from
 intersection of two different shapeFiles
In-Reply-To: <CAP-zkzdjTdzE=qaX8Ywn33DQb5A_mNQ4ESE4hE3=n-=44zvJrw@mail.gmail.com>
References: <CAP-zkzdjTdzE=qaX8Ywn33DQb5A_mNQ4ESE4hE3=n-=44zvJrw@mail.gmail.com>
Message-ID: <CAMKgpOaW1TSkoQ2NagoSQdcQZRmRAAVOwsVFSH+qTRZR31mfSw@mail.gmail.com>

Siva,

You can create a new shapefile layer using the poGeometry2 objects. Set
each of them to a feature object and add them to the layer.
Refer to the OGR API Tutorial.
http://www.gdal.org/ogr/ogr_apitut.html

On Fri, Jun 8, 2012 at 11:38 AM, SIVA RAMA KRISHNA
<s.r.kriishna at gmail.com>wrote:

> mywindow::mywindow(QWidget *parent) :    QMainWindow(parent){        view=new QGraphicsView(this);    view->repaint();    scene=new QGraphicsScene();    OGRRegisterAll();    scaleFactor=0.01;    //poDS = OGRSFDriverRegistrar::Open( "admin.shp");    //poLayer = poDS->GetLayerByName( "admin");    poDS = OGRSFDriverRegistrar::Open( "india_st.shp");    poLayer = poDS->*GetLayerByName*( "india_st");    poDS1=OGRSFDriverRegistrar::Open("india_ds.shx");    poLayer1=poDS1->*GetLayerByName*("india_ds");    poLayer->*ResetReading*();    poLayer1->*ResetReading*();    view->setRenderHint(QPainter::Antialiasing);    while(((poFeature=poLayer->*GetNextFeature*())!=NULL) && ((poFeature1=poLayer1->*GetNextFeature*())!=NULL))    {        poGeometry=poFeature->GetGeometryRef();        poGeometry1=poFeature1->GetGeometryRef();        OGREnvelope * psEnvelope1 = new OGREnvelope();        OGREnvelope * psEnvelope2 = new OGREnvelope();        poGeometry->*getEnvelope*(psEnvelope1);        poGeometry1->*getEnvelope*(psEnvelope2);        qDebug() << psEnvelope1->MinX << psEnvelope1->MinY <<  psEnvelope1->MaxX << psEnvelope1->MaxY;        qDebug() << psEnvelope2->MinX << psEnvelope2->MinY <<  psEnvelope2->MaxX << psEnvelope2->MaxY;        if (this->Intersects1(poGeometry,poGeometry1)==1)        {            QPainter painter2;            poGeometry2=poGeometry->*Intersection*(poGeometry1);            if(poGeometry2 !=NULL                    && wkbFlatten(poGeometry2->*getGeometryType*()) == wkbPolygon)            {                qDebug()<<"1yes";                polyShape2 = (OGRPolygon*) poGeometry2;                drawPolyShape(painter2,polyShape2,MBR,scaleFactor);            }        }        this->setCentralWidget(view);    }//end of while loop    QString filename3,projString;    filename3="india_st_out.shp";    OGRwkbGeometryType type;    ShapeFileWriter( filename3,type, projString);}//end of main
> OGRBoolean mywindow::Intersects1(OGRGeometry *poGeom,  OGRGeometry *poOtherGeom ) const{   // this is for obtaining a region for interscetion}
> void mywindow::drawPolyShape(QPainter& painter,OGRPolygon* polyShape,const QRectF& MBR, const double& scaleFactor){        // for drawing a shape file
> }
> void mywindow::drawClosedLinearRing(QPainterPath& painter,OGRLinearRing* linearRing,                                    const QRectF& MBR, const double& scaleFactor){              // for drawing a  shape  file
> }
> void mywindow::ShapeFileWriter(QString filename,OGRwkbGeometryType type,QString projString)// program to write to shape file     {        QFileInfo info(filename);        QString baseFileName = info.absolutePath(); //+ QDir::separator();        baseFileName += info.baseName();            QFile fileshx(baseFileName + ".shx");        QFile fileshp(baseFileName + ".shp");        QFile filedbf(baseFileName + ".dbf");        QFile fileprj(baseFileName + ".prj");        if(fileshp.exists())        {            fileshp.remove();        }        if(fileshx.exists())        {            fileshx.remove();        }        if(filedbf.exists())        {            filedbf.remove();        }        if(fileprj.exists())        {            fileprj.remove();        }        QString fileName = filename;        QStringList list;        const char *pszDriverName = "ESRI Shapefile";        OGRSFDriver *poDriver;        OGRRegisterAll();        poDriver = OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(                pszDriverName );        if( poDriver == NULL )        {            return;        }        poDS = poDriver->*CreateDataSource*(filename.toLatin1().data(), NULL );        if( poDS == NULL )        {            return;        }        filename.truncate(fileName.length()-4);        poLayer = poDS->*CreateLayer*(filename.toLatin1().data(), NULL, type, NULL);        if( poLayer == NULL )        {            return;        }        if(!projString.isEmpty() && !projString.isNull())        {            filename = filename + ".prj";            QFile data(filename);            if (data.*open*(QFile::WriteOnly | QFile::Truncate))            {                 QTextStream out(&data);                 out<<projString<<"\n";                 list.append(projString);            }            data.*close*();        }
>         int rec;//      rec=identifyRecord(psEnvelope3->MinX,psEnvelope3->MinY,psEnvelope3->MaxX );        int x;        x=addRecord(poGeometry2,list);        int y;        y=getNumofRecords();        qDebug()<<y;    }int mywindow::addRecord(OGRGeometry* geometry,QStringList list)    {        int fID;        OGRFeature *poFeature;        poFeature = OGRFeature::CreateFeature( poLayer->*GetLayerDefn*() );        poFeature->SetField( "ID", (int)poFeature->GetFID());        poFeature->SetGeometry( geometry );        for(int i = 0; i < list.size(); i++)        {            qDebug()<<"ADDED";            poFeature->SetField( i, list.at(i).toDouble());        }        if( poLayer->*CreateFeature*( poFeature ) != OGRERR_NONE )        {            return -1;        }        fID = (int)poFeature->GetFID();        OGRFeature::DestroyFeature( poFeature );        return fID;   }
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120608/2031726d/attachment-0001.html>

From johann.hirner at gmx.de  Fri Jun  8 07:37:07 2012
From: johann.hirner at gmx.de (Johann Hirner)
Date: Fri, 08 Jun 2012 16:37:07 +0200
Subject: [gdal-dev] ogr2ogr does not project coordinates in csv file
Message-ID: <20120608143707.141730@gmx.net>

Dear list,

I am trying to transform a list of coordinates in a csv file from EPSG:4326 to a KML in UTM 32N (EPSG:32632). I am using this command:
ogr2ogr.exe -f KML -t_srs epsg:32632 out.kml 4326.vrt

However the output coordinates are not transformed (see output below). What is it that I am missing?

Kind regards
Johann

THe vrt file loooks like this:
<OGRVRTDataSource>
  <OGRVRTLayer name="4326">
    <SrcDataSource relativeToVRT="0">4326.csv</SrcDataSource>
    <GeometryType>wkbPoint</GeometryType>
    <GeometryField encoding="PointFromColumns" x="lon" y="lat"/>
    <LayerSRS>EPSG:4326</LayerSRS>
  </OGRVRTLayer>
</OGRVRTDataSource>

The csv file looks like this:
P, lon, lat
1, 6.219200, 46.572210
2, 9.345943, 46.605497
3, 9.330450, 44.000110
4, 6.343561, 43.969698

The resulting kml file:
<?xml version="1.0" encoding="utf-8" ?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document><Folder><name>4326</name>
<Schema name="4326" id="4326">
    <SimpleField name="Name" type="string"></SimpleField>
    <SimpleField name="Description" type="string"></SimpleField>
    <SimpleField name="P" type="string"></SimpleField>
    <SimpleField name="lon" type="string"></SimpleField>
    <SimpleField name="lat" type="string"></SimpleField>
</Schema>
  <Placemark>
    <ExtendedData><SchemaData schemaUrl="#4326">
        <SimpleData name="P">1</SimpleData>
        <SimpleData name="lon">6.219200</SimpleData>
        <SimpleData name="lat">46.572210</SimpleData>
    </SchemaData></ExtendedData>
      <Point><coordinates>6.219199999982147,46.572209999958666</coordinates></Point>
  </Placemark>
  <Placemark>
    <ExtendedData><SchemaData schemaUrl="#4326">
        <SimpleData name="P">2</SimpleData>
        <SimpleData name="lon">9.345943</SimpleData>
        <SimpleData name="lat">46.605497</SimpleData>
    </SchemaData></ExtendedData>
      <Point><coordinates>9.345943,46.605497</coordinates></Point>
  </Placemark>
  <Placemark>
    <ExtendedData><SchemaData schemaUrl="#4326">
        <SimpleData name="P">3</SimpleData>
        <SimpleData name="lon">9.330450</SimpleData>
        <SimpleData name="lat">44.000110</SimpleData>
    </SchemaData></ExtendedData>
      <Point><coordinates>9.33045,44.00011</coordinates></Point>
  </Placemark>
  <Placemark>
    <ExtendedData><SchemaData schemaUrl="#4326">
        <SimpleData name="P">4</SimpleData>
        <SimpleData name="lon">6.343561</SimpleData>
        <SimpleData name="lat">43.969698</SimpleData>
    </SchemaData></ExtendedData>
      <Point><coordinates>6.343560999981887,43.96969799997111</coordinates></Point>
  </Placemark>
</Folder></Document></kml>
-- 
NEU: FreePhone 3-fach-Flat mit kostenlosem Smartphone!                                  
Jetzt informieren: http://mobile.1und1.de/?ac=OM.PW.PW003K20328T7073a

From even.rouault at mines-paris.org  Fri Jun  8 07:43:43 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 08 Jun 2012 16:43:43 +0200
Subject: [gdal-dev] ogr2ogr does not project coordinates in csv file
In-Reply-To: <20120608143707.141730@gmx.net>
References: <20120608143707.141730@gmx.net>
Message-ID: <1339166623.4fd20f9f261ff@imp.free.fr>

Selon Johann Hirner <johann.hirner at gmx.de>:

> Dear list,
>
> I am trying to transform a list of coordinates in a csv file from EPSG:4326
> to a KML in UTM 32N (EPSG:32632). I am using this command:
> ogr2ogr.exe -f KML -t_srs epsg:32632 out.kml 4326.vrt
>
> However the output coordinates are not transformed (see output below). What
> is it that I am missing?

In fact, there are 2 reprojections occuring :
- the first one done by ogr2ogr from EPSG:4326 to EPSG:32632 as required by the
-t_srs option
- the second one, done implicitely by the KML driver, from EPSG:32632 to
EPSG:4326, since KML requires coordinates to be in EPSG:4326.

KML in UTM 32N is just not possible as per the KML spec.

>
> Kind regards
> Johann
>
> THe vrt file loooks like this:
> <OGRVRTDataSource>
>   <OGRVRTLayer name="4326">
>     <SrcDataSource relativeToVRT="0">4326.csv</SrcDataSource>
>     <GeometryType>wkbPoint</GeometryType>
>     <GeometryField encoding="PointFromColumns" x="lon" y="lat"/>
>     <LayerSRS>EPSG:4326</LayerSRS>
>   </OGRVRTLayer>
> </OGRVRTDataSource>
>
> The csv file looks like this:
> P, lon, lat
> 1, 6.219200, 46.572210
> 2, 9.345943, 46.605497
> 3, 9.330450, 44.000110
> 4, 6.343561, 43.969698
>
> The resulting kml file:
> <?xml version="1.0" encoding="utf-8" ?>
> <kml xmlns="http://www.opengis.net/kml/2.2">
> <Document><Folder><name>4326</name>
> <Schema name="4326" id="4326">
>     <SimpleField name="Name" type="string"></SimpleField>
>     <SimpleField name="Description" type="string"></SimpleField>
>     <SimpleField name="P" type="string"></SimpleField>
>     <SimpleField name="lon" type="string"></SimpleField>
>     <SimpleField name="lat" type="string"></SimpleField>
> </Schema>
>   <Placemark>
>     <ExtendedData><SchemaData schemaUrl="#4326">
>         <SimpleData name="P">1</SimpleData>
>         <SimpleData name="lon">6.219200</SimpleData>
>         <SimpleData name="lat">46.572210</SimpleData>
>     </SchemaData></ExtendedData>
>
> <Point><coordinates>6.219199999982147,46.572209999958666</coordinates></Point>
>   </Placemark>
>   <Placemark>
>     <ExtendedData><SchemaData schemaUrl="#4326">
>         <SimpleData name="P">2</SimpleData>
>         <SimpleData name="lon">9.345943</SimpleData>
>         <SimpleData name="lat">46.605497</SimpleData>
>     </SchemaData></ExtendedData>
>       <Point><coordinates>9.345943,46.605497</coordinates></Point>
>   </Placemark>
>   <Placemark>
>     <ExtendedData><SchemaData schemaUrl="#4326">
>         <SimpleData name="P">3</SimpleData>
>         <SimpleData name="lon">9.330450</SimpleData>
>         <SimpleData name="lat">44.000110</SimpleData>
>     </SchemaData></ExtendedData>
>       <Point><coordinates>9.33045,44.00011</coordinates></Point>
>   </Placemark>
>   <Placemark>
>     <ExtendedData><SchemaData schemaUrl="#4326">
>         <SimpleData name="P">4</SimpleData>
>         <SimpleData name="lon">6.343561</SimpleData>
>         <SimpleData name="lat">43.969698</SimpleData>
>     </SchemaData></ExtendedData>
>
> <Point><coordinates>6.343560999981887,43.96969799997111</coordinates></Point>
>   </Placemark>
> </Folder></Document></kml>
> --
> NEU: FreePhone 3-fach-Flat mit kostenlosem Smartphone!
> Jetzt informieren: http://mobile.1und1.de/?ac=OM.PW.PW003K20328T7073a
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From etourigny.dev at gmail.com  Fri Jun  8 08:09:39 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 8 Jun 2012 12:09:39 -0300
Subject: [gdal-dev] Reading a NetCDF file with python (not recognised as
 a supported dataset name
In-Reply-To: <1339156848808-4979943.post@n6.nabble.com>
References: <1339156848808-4979943.post@n6.nabble.com>
Message-ID: <CA+TxYvNbv7gkpnVUa3fyGyNVS82owoW9tQ2vFZe79LXb4M-Yhg@mail.gmail.com>

Rutger,

There should not be any difference when using the python bindings. If
gdalinfo can read it the python bindings should also.

I cannot reproduce your problem using gdal-1.9.1 under linux.  Which
exact version are you using?

By the way, the vrtfile in unnecessary, because GDAL's Open accepts
the NETCDF:file.nc:variable syntax.

Try adding this to your script and send the result back here
gdal.SetConfigOption( 'CPL_DEBUG', 'ON' )

also try gdal_info.exe -stats
NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.nc:soil_moisture_x
this actually reads the file contents and not just the metadata. If it
fails then something is wrong.

you should see
    STATISTICS_MAXIMUM=99
    STATISTICS_MEAN=21.746993313128
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=20.100893016522


Etienne

On Fri, Jun 8, 2012 at 9:00 AM, Rutger <kassies at gmail.com> wrote:
> Dear list,
>
> I am trying to open a NetCDF file with the Python bindings. My GDAL 1.9
> build (Win32 from Tamas) shows the NetCDF driver when i run "gdalinfo
> --formats", so it should be possible.
>
> When using the pre-build command-line utilities all works well. But when i
> move to Python i get the message:
> /" ... does not exist in the file system, and is not recognised as a
> supported dataset name."/
> I dont have the slightest clue about what i'm doing wrong.
>
> I have simplified the problem to 3 steps:
> 1. Use gdal_translate to select a subdataset and output to VRT
> 2. Read the VRT in Python with gdal.Open()
> 3. Use gdal_translate to convert the VRT to a Geotiff
>
> Step 1 & 3 work well, but 2 fails. Is there some limitation of the Python
> bindings regarding NetCDF? The script runs fine if i replace the NetCDF with
> a Geotiff file.
>
> Any help would be appreciated.
>
> An example NetCDF i used can be found at:
> ftp://hydro1.sci.gsfc.nasa.gov/data/s4pa/WAOB/LPRM_TMI_DY_SOILM3.001/2012/05/
> ftp://hydro1.sci.gsfc.nasa.gov/data/s4pa/WAOB/LPRM_TMI_DY_SOILM3.001/2012/05/
>
> Below is the Python script i have used for exploring the issue:
>
> import os
> try:
> ? ?from osgeo import gdal
> except ImportError:
> ? ?import gdal
>
> netcdffile =
> "NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.nc:soil_moisture_x"
> vrtfile = "LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.vrt"
> tiffile = "LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.tif"
>
> # 1: convert the netcdf to vrt externally (works well)
> os.system('gdal_translate -of "VRT" ' + netcdffile + ' ' + vrtfile)
>
> # 2: try to open the vrt in Python (fails at .ReadAsArray)
> dsin = gdal.Open(vrtfile)
>
> if not dsin is None:
> ?indata = dsin.ReadAsArray(0, 0, dsin.RasterXSize, dsin.RasterYSize)
>
> # 3: convert the same vrt to a tif externally (works well)
> os.system('gdal_translate ' + vrtfile + ' ' + tiffile)
>
>
> Regards,
> Rutger
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Reading-a-NetCDF-file-with-python-not-recognised-as-a-supported-dataset-name-tp4979943.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From anton.korosov at nersc.no  Fri Jun  8 07:50:17 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Fri, 08 Jun 2012 16:50:17 +0200
Subject: [gdal-dev] Reading a NetCDF file with python (not recognised as
 a supported dataset name
In-Reply-To: <1339156848808-4979943.post@n6.nabble.com>
References: <1339156848808-4979943.post@n6.nabble.com>
Message-ID: <4FD21129.5070805@nersc.no>

Hi Rutger,

I remember I had similar problems when reading NetCDF in Windows. The 
solution in my case was pretty simple - I had to include the full path 
to the file in double quotes:

Try this way (but replace this path with yours):

ds = 
gdal.Open('NETCDF:"c:/data/LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.nc":soil_moisture_x')

I cannot test on Win, but it works on Linux perfectly.

If that doesn't work, can you please provide the VRT file?

Regards,
Anton


On 06/08/2012 02:00 PM, Rutger wrote:
> Dear list,
>
> I am trying to open a NetCDF file with the Python bindings. My GDAL 1.9
> build (Win32 from Tamas) shows the NetCDF driver when i run "gdalinfo
> --formats", so it should be possible.
>
> When using the pre-build command-line utilities all works well. But when i
> move to Python i get the message:
> /" ... does not exist in the file system, and is not recognised as a
> supported dataset name."/
> I dont have the slightest clue about what i'm doing wrong.
>
> I have simplified the problem to 3 steps:
> 1. Use gdal_translate to select a subdataset and output to VRT
> 2. Read the VRT in Python with gdal.Open()
> 3. Use gdal_translate to convert the VRT to a Geotiff
>
> Step 1&  3 work well, but 2 fails. Is there some limitation of the Python
> bindings regarding NetCDF? The script runs fine if i replace the NetCDF with
> a Geotiff file.
>
> Any help would be appreciated.
>
> An example NetCDF i used can be found at:
> ftp://hydro1.sci.gsfc.nasa.gov/data/s4pa/WAOB/LPRM_TMI_DY_SOILM3.001/2012/05/
> ftp://hydro1.sci.gsfc.nasa.gov/data/s4pa/WAOB/LPRM_TMI_DY_SOILM3.001/2012/05/
>
> Below is the Python script i have used for exploring the issue:
>
> import os
> try:
>      from osgeo import gdal
> except ImportError:
>      import gdal
>
> netcdffile =
> "NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.nc:soil_moisture_x"
> vrtfile = "LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.vrt"
> tiffile = "LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.tif"
>
> # 1: convert the netcdf to vrt externally (works well)
> os.system('gdal_translate -of "VRT" ' + netcdffile + ' ' + vrtfile)
>
> # 2: try to open the vrt in Python (fails at .ReadAsArray)
> dsin = gdal.Open(vrtfile)
>
> if not dsin is None:
>    indata = dsin.ReadAsArray(0, 0, dsin.RasterXSize, dsin.RasterYSize)
>
> # 3: convert the same vrt to a tif externally (works well)
> os.system('gdal_translate ' + vrtfile + ' ' + tiffile)
>
>
> Regards,
> Rutger
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Reading-a-NetCDF-file-with-python-not-recognised-as-a-supported-dataset-name-tp4979943.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From KShannon at gcs-research.com  Fri Jun  8 08:08:50 2012
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Fri, 8 Jun 2012 15:08:50 +0000
Subject: [gdal-dev] Reading a NetCDF file with python (not recognised as
 a supported dataset name
In-Reply-To: <CA+TxYvNbv7gkpnVUa3fyGyNVS82owoW9tQ2vFZe79LXb4M-Yhg@mail.gmail.com>
References: <1339156848808-4979943.post@n6.nabble.com>
	<CA+TxYvNbv7gkpnVUa3fyGyNVS82owoW9tQ2vFZe79LXb4M-Yhg@mail.gmail.com>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B975ABC78F@MAIL.gcs-research.net>

Etienne, Rutger,
I can reproduce on windows with 32 bit 1.9 branch and 1.9.1 from Tamas' site.  In fact, I couldn't open any datasets.

kss

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Etienne Tourigny
Sent: Friday, June 08, 2012 9:10 AM
To: Rutger
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Reading a NetCDF file with python (not recognised as a supported dataset name

Rutger,

There should not be any difference when using the python bindings. If gdalinfo can read it the python bindings should also.

I cannot reproduce your problem using gdal-1.9.1 under linux.  Which exact version are you using?

By the way, the vrtfile in unnecessary, because GDAL's Open accepts the NETCDF:file.nc:variable syntax.

Try adding this to your script and send the result back here gdal.SetConfigOption( 'CPL_DEBUG', 'ON' )

also try gdal_info.exe -stats
NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.nc:soil_moisture_x
this actually reads the file contents and not just the metadata. If it fails then something is wrong.

you should see
    STATISTICS_MAXIMUM=99
    STATISTICS_MEAN=21.746993313128
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=20.100893016522


Etienne

On Fri, Jun 8, 2012 at 9:00 AM, Rutger <kassies at gmail.com> wrote:
> Dear list,
>
> I am trying to open a NetCDF file with the Python bindings. My GDAL 
> 1.9 build (Win32 from Tamas) shows the NetCDF driver when i run 
> "gdalinfo --formats", so it should be possible.
>
> When using the pre-build command-line utilities all works well. But 
> when i move to Python i get the message:
> /" ... does not exist in the file system, and is not recognised as a 
> supported dataset name."/ I dont have the slightest clue about what 
> i'm doing wrong.
>
> I have simplified the problem to 3 steps:
> 1. Use gdal_translate to select a subdataset and output to VRT 2. Read 
> the VRT in Python with gdal.Open() 3. Use gdal_translate to convert 
> the VRT to a Geotiff
>
> Step 1 & 3 work well, but 2 fails. Is there some limitation of the 
> Python bindings regarding NetCDF? The script runs fine if i replace 
> the NetCDF with a Geotiff file.
>
> Any help would be appreciated.
>
> An example NetCDF i used can be found at:
> ftp://hydro1.sci.gsfc.nasa.gov/data/s4pa/WAOB/LPRM_TMI_DY_SOILM3.001/2
> 012/05/ 
> ftp://hydro1.sci.gsfc.nasa.gov/data/s4pa/WAOB/LPRM_TMI_DY_SOILM3.001/2
> 012/05/
>
> Below is the Python script i have used for exploring the issue:
>
> import os
> try:
> ? ?from osgeo import gdal
> except ImportError:
> ? ?import gdal
>
> netcdffile =
> "NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.nc:soil_moisture_x"
> vrtfile = "LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.vrt"
> tiffile = "LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.tif"
>
> # 1: convert the netcdf to vrt externally (works well) 
> os.system('gdal_translate -of "VRT" ' + netcdffile + ' ' + vrtfile)
>
> # 2: try to open the vrt in Python (fails at .ReadAsArray) dsin = 
> gdal.Open(vrtfile)
>
> if not dsin is None:
> ?indata = dsin.ReadAsArray(0, 0, dsin.RasterXSize, dsin.RasterYSize)
>
> # 3: convert the same vrt to a tif externally (works well) 
> os.system('gdal_translate ' + vrtfile + ' ' + tiffile)
>
>
> Regards,
> Rutger
>
>
> --
> View this message in context: 
> http://osgeo-org.1560.n6.nabble.com/Reading-a-NetCDF-file-with-python-
> not-recognised-as-a-supported-dataset-name-tp4979943.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From etourigny.dev at gmail.com  Fri Jun  8 08:31:59 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 8 Jun 2012 12:31:59 -0300
Subject: [gdal-dev] Reading a NetCDF file with python (not recognised as
 a supported dataset name
In-Reply-To: <2DD24CD6225DC04C81CF12523261F4B975ABC78F@MAIL.gcs-research.net>
References: <1339156848808-4979943.post@n6.nabble.com>
	<CA+TxYvNbv7gkpnVUa3fyGyNVS82owoW9tQ2vFZe79LXb4M-Yhg@mail.gmail.com>
	<2DD24CD6225DC04C81CF12523261F4B975ABC78F@MAIL.gcs-research.net>
Message-ID: <CA+TxYvN5iXOxc3=kYOnqy1Mnz-JwH=KxycTF1mUTGZW0dKyTQQ@mail.gmail.com>

with commandline and/or python?

I can do both fine using gdal-1.9.1 from osgeo4w (32bit), haven't
tried Tamas' build yet

On Fri, Jun 8, 2012 at 12:08 PM, Kyle Shannon <KShannon at gcs-research.com> wrote:
> Etienne, Rutger,
> I can reproduce on windows with 32 bit 1.9 branch and 1.9.1 from Tamas' site. ?In fact, I couldn't open any datasets.
>
> kss
>
> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Etienne Tourigny
> Sent: Friday, June 08, 2012 9:10 AM
> To: Rutger
> Cc: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Reading a NetCDF file with python (not recognised as a supported dataset name
>
> Rutger,
>
> There should not be any difference when using the python bindings. If gdalinfo can read it the python bindings should also.
>
> I cannot reproduce your problem using gdal-1.9.1 under linux. ?Which exact version are you using?
>
> By the way, the vrtfile in unnecessary, because GDAL's Open accepts the NETCDF:file.nc:variable syntax.
>
> Try adding this to your script and send the result back here gdal.SetConfigOption( 'CPL_DEBUG', 'ON' )
>
> also try gdal_info.exe -stats
> NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.nc:soil_moisture_x
> this actually reads the file contents and not just the metadata. If it fails then something is wrong.
>
> you should see
> ? ?STATISTICS_MAXIMUM=99
> ? ?STATISTICS_MEAN=21.746993313128
> ? ?STATISTICS_MINIMUM=0
> ? ?STATISTICS_STDDEV=20.100893016522
>
>
> Etienne
>
> On Fri, Jun 8, 2012 at 9:00 AM, Rutger <kassies at gmail.com> wrote:
>> Dear list,
>>
>> I am trying to open a NetCDF file with the Python bindings. My GDAL
>> 1.9 build (Win32 from Tamas) shows the NetCDF driver when i run
>> "gdalinfo --formats", so it should be possible.
>>
>> When using the pre-build command-line utilities all works well. But
>> when i move to Python i get the message:
>> /" ... does not exist in the file system, and is not recognised as a
>> supported dataset name."/ I dont have the slightest clue about what
>> i'm doing wrong.
>>
>> I have simplified the problem to 3 steps:
>> 1. Use gdal_translate to select a subdataset and output to VRT 2. Read
>> the VRT in Python with gdal.Open() 3. Use gdal_translate to convert
>> the VRT to a Geotiff
>>
>> Step 1 & 3 work well, but 2 fails. Is there some limitation of the
>> Python bindings regarding NetCDF? The script runs fine if i replace
>> the NetCDF with a Geotiff file.
>>
>> Any help would be appreciated.
>>
>> An example NetCDF i used can be found at:
>> ftp://hydro1.sci.gsfc.nasa.gov/data/s4pa/WAOB/LPRM_TMI_DY_SOILM3.001/2
>> 012/05/
>> ftp://hydro1.sci.gsfc.nasa.gov/data/s4pa/WAOB/LPRM_TMI_DY_SOILM3.001/2
>> 012/05/
>>
>> Below is the Python script i have used for exploring the issue:
>>
>> import os
>> try:
>> ? ?from osgeo import gdal
>> except ImportError:
>> ? ?import gdal
>>
>> netcdffile =
>> "NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.nc:soil_moisture_x"
>> vrtfile = "LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.vrt"
>> tiffile = "LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.tif"
>>
>> # 1: convert the netcdf to vrt externally (works well)
>> os.system('gdal_translate -of "VRT" ' + netcdffile + ' ' + vrtfile)
>>
>> # 2: try to open the vrt in Python (fails at .ReadAsArray) dsin =
>> gdal.Open(vrtfile)
>>
>> if not dsin is None:
>> ?indata = dsin.ReadAsArray(0, 0, dsin.RasterXSize, dsin.RasterYSize)
>>
>> # 3: convert the same vrt to a tif externally (works well)
>> os.system('gdal_translate ' + vrtfile + ' ' + tiffile)
>>
>>
>> Regards,
>> Rutger
>>
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.n6.nabble.com/Reading-a-NetCDF-file-with-python-
>> not-recognised-as-a-supported-dataset-name-tp4979943.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From kyle at pobox.com  Fri Jun  8 08:50:25 2012
From: kyle at pobox.com (Kyle Shannon)
Date: Fri, 8 Jun 2012 09:50:25 -0600
Subject: [gdal-dev] Reading a NetCDF file with python (not recognised as
 a supported dataset name
In-Reply-To: <CA+TxYvN5iXOxc3=kYOnqy1Mnz-JwH=KxycTF1mUTGZW0dKyTQQ@mail.gmail.com>
References: <1339156848808-4979943.post@n6.nabble.com>
	<CA+TxYvNbv7gkpnVUa3fyGyNVS82owoW9tQ2vFZe79LXb4M-Yhg@mail.gmail.com>
	<2DD24CD6225DC04C81CF12523261F4B975ABC78F@MAIL.gcs-research.net>
	<CA+TxYvN5iXOxc3=kYOnqy1Mnz-JwH=KxycTF1mUTGZW0dKyTQQ@mail.gmail.com>
Message-ID: <CAJ0mEz1UsQAqaFnxn0CrbjbougA3spiNG0zw73n9wnwf+omy_w@mail.gmail.com>

Command line works fine.  I didn't have time to test well though.  I will
try to get on a windows machine and download tamas package and give it
another shot.

kss

On Fri, Jun 8, 2012 at 9:31 AM, Etienne Tourigny <etourigny.dev at gmail.com>wrote:

> with commandline and/or python?
>
> I can do both fine using gdal-1.9.1 from osgeo4w (32bit), haven't
> tried Tamas' build yet
>
> On Fri, Jun 8, 2012 at 12:08 PM, Kyle Shannon <KShannon at gcs-research.com>
> wrote:
> > Etienne, Rutger,
> > I can reproduce on windows with 32 bit 1.9 branch and 1.9.1 from Tamas'
> site.  In fact, I couldn't open any datasets.
> >
> > kss
> >
> > -----Original Message-----
> > From: gdal-dev-bounces at lists.osgeo.org [mailto:
> gdal-dev-bounces at lists.osgeo.org] On Behalf Of Etienne Tourigny
> > Sent: Friday, June 08, 2012 9:10 AM
> > To: Rutger
> > Cc: gdal-dev at lists.osgeo.org
> > Subject: Re: [gdal-dev] Reading a NetCDF file with python (not
> recognised as a supported dataset name
> >
> > Rutger,
> >
> > There should not be any difference when using the python bindings. If
> gdalinfo can read it the python bindings should also.
> >
> > I cannot reproduce your problem using gdal-1.9.1 under linux.  Which
> exact version are you using?
> >
> > By the way, the vrtfile in unnecessary, because GDAL's Open accepts the
> NETCDF:file.nc:variable syntax.
> >
> > Try adding this to your script and send the result back here
> gdal.SetConfigOption( 'CPL_DEBUG', 'ON' )
> >
> > also try gdal_info.exe -stats
> >
> NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.nc:soil_moisture_x
> > this actually reads the file contents and not just the metadata. If it
> fails then something is wrong.
> >
> > you should see
> >    STATISTICS_MAXIMUM=99
> >    STATISTICS_MEAN=21.746993313128
> >    STATISTICS_MINIMUM=0
> >    STATISTICS_STDDEV=20.100893016522
> >
> >
> > Etienne
> >
> > On Fri, Jun 8, 2012 at 9:00 AM, Rutger <kassies at gmail.com> wrote:
> >> Dear list,
> >>
> >> I am trying to open a NetCDF file with the Python bindings. My GDAL
> >> 1.9 build (Win32 from Tamas) shows the NetCDF driver when i run
> >> "gdalinfo --formats", so it should be possible.
> >>
> >> When using the pre-build command-line utilities all works well. But
> >> when i move to Python i get the message:
> >> /" ... does not exist in the file system, and is not recognised as a
> >> supported dataset name."/ I dont have the slightest clue about what
> >> i'm doing wrong.
> >>
> >> I have simplified the problem to 3 steps:
> >> 1. Use gdal_translate to select a subdataset and output to VRT 2. Read
> >> the VRT in Python with gdal.Open() 3. Use gdal_translate to convert
> >> the VRT to a Geotiff
> >>
> >> Step 1 & 3 work well, but 2 fails. Is there some limitation of the
> >> Python bindings regarding NetCDF? The script runs fine if i replace
> >> the NetCDF with a Geotiff file.
> >>
> >> Any help would be appreciated.
> >>
> >> An example NetCDF i used can be found at:
> >> ftp://hydro1.sci.gsfc.nasa.gov/data/s4pa/WAOB/LPRM_TMI_DY_SOILM3.001/2
> >> 012/05/
> >> ftp://hydro1.sci.gsfc.nasa.gov/data/s4pa/WAOB/LPRM_TMI_DY_SOILM3.001/2
> >> 012/05/
> >>
> >> Below is the Python script i have used for exploring the issue:
> >>
> >> import os
> >> try:
> >>    from osgeo import gdal
> >> except ImportError:
> >>    import gdal
> >>
> >> netcdffile =
> >>
> "NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.nc:soil_moisture_x"
> >> vrtfile = "LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.vrt"
> >> tiffile = "LPRM-TMI_L3_DY_SOILM3_V001-20120411T144114Z_20120102.tif"
> >>
> >> # 1: convert the netcdf to vrt externally (works well)
> >> os.system('gdal_translate -of "VRT" ' + netcdffile + ' ' + vrtfile)
> >>
> >> # 2: try to open the vrt in Python (fails at .ReadAsArray) dsin =
> >> gdal.Open(vrtfile)
> >>
> >> if not dsin is None:
> >>  indata = dsin.ReadAsArray(0, 0, dsin.RasterXSize, dsin.RasterYSize)
> >>
> >> # 3: convert the same vrt to a tif externally (works well)
> >> os.system('gdal_translate ' + vrtfile + ' ' + tiffile)
> >>
> >>
> >> Regards,
> >> Rutger
> >>
> >>
> >> --
> >> View this message in context:
> >> http://osgeo-org.1560.n6.nabble.com/Reading-a-NetCDF-file-with-python-
> >> not-recognised-as-a-supported-dataset-name-tp4979943.html
> >> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120608/69a4a3f9/attachment.html>

From egoddard at memphis.edu  Fri Jun  8 09:43:41 2012
From: egoddard at memphis.edu (Eric Goddard)
Date: Fri, 8 Jun 2012 11:43:41 -0500
Subject: [gdal-dev] Error using ogr2ogr to import sqlite table into FileGDB
Message-ID: <CAMM2+YrnEeHc2F9dEMVVFBmyWYAwP80ahDimCLJzCgLTUjG6hQ@mail.gmail.com>

Hello everyone,

I'm attempting to import a non-spatial SQLite table into a File
Geodatabase. I have gdal 1.9.0 compiled with FileGDB support on
kubuntu 12.04 and it is working correctly. When I use

$ogr2ogr -f "FileGDB" geodatabase.gdb database.db

the command runs but for every record I get the following error:

ERROR 1: Error: Failed at writing Geometry to Row in CreateFeature.
(An expected Field was not found or could not be retrieved properly.)

In the geodatabase the table shows as an empty table and not a feature
class. Is there an argument I am missing to make the sqlite table
import as a table and not a feature class in the FileGDB?

I also tried
$ogr2ogr -f "FileGDB" geodatabase.gdb database.db myTable -nln newTable

and got the same error.

Thanks,
Eric

From kedardeshpande87 at gmail.com  Fri Jun  8 12:59:41 2012
From: kedardeshpande87 at gmail.com (Kedar Deshpande)
Date: Fri, 8 Jun 2012 12:59:41 -0700
Subject: [gdal-dev] Accuracy of OGRLayer:SetSpatialFilter() API
In-Reply-To: <CA+_hAHeLB7b10KtEKsSCg4ezwygcOO0vbu8ep-JV-GsVFC+zMw@mail.gmail.com>
References: <CA+_hAHeLB7b10KtEKsSCg4ezwygcOO0vbu8ep-JV-GsVFC+zMw@mail.gmail.com>
Message-ID: <CA+_hAHfvc27zwbaAd_M7wqEDKrbEcZtb_vY4PSA2Ju0_1tO8_g@mail.gmail.com>

>
> Hi,
>
> I am creating an application that reads a shapefile having Zipcode
> Tabulation Area information (provided by US Census Bureau).
> Once I get the layer, I am setting a spatial filter on it. I am passing a
> OGRPoint object to it having some values for latitude and longitude.
> After I apply this filter, I am iterating over the Features that the layer
> returns.
> But for a given geometry point, it is returning more than one features. I
> am extracting the zipcode from the feature.
> So, it is returning me more than one zip codes for one lat/long point.
> Could someone please let me know why is this behavior observed ?
> If it returns multiple features for a filter, what is the order in which
> it returns the features (when we call layer->GetNextFeature()).
> Is this order according to how exactly the filter matches Or is it not
> definite ? The documentation in the API does not mention about the order.
>
> Thanks,
> Kedar
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120608/bbed77bc/attachment.html>

From warmerdam at pobox.com  Fri Jun  8 13:18:30 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 8 Jun 2012 13:18:30 -0700
Subject: [gdal-dev] Accuracy of OGRLayer:SetSpatialFilter() API
In-Reply-To: <CA+_hAHfvc27zwbaAd_M7wqEDKrbEcZtb_vY4PSA2Ju0_1tO8_g@mail.gmail.com>
References: <CA+_hAHeLB7b10KtEKsSCg4ezwygcOO0vbu8ep-JV-GsVFC+zMw@mail.gmail.com>
	<CA+_hAHfvc27zwbaAd_M7wqEDKrbEcZtb_vY4PSA2Ju0_1tO8_g@mail.gmail.com>
Message-ID: <CA+YzLBcn4qJ+bptb7DDCwtU7K=LgCPOkXbVojjP_fcH6os=Nww@mail.gmail.com>

Kedar,

If you build GDAL/OGR without use of the GEOS library then I believe
the spatial filtering is normally just based on bounding boxes.  So
you are likely getting back all the zip codes which have a bounding
box including the target point.

The SetSpatialFilter() method should have documentation suggesting in
some scenarios it may produce more features than strictly satisfy the
spatial filter.

If you rebuild with GEOS you will hopefully get an exact spatial
filtering.  Some caveats might apply for points on zip code
boundaries.

Of course it is also possible there is some overlap in your zip code
polygon set.  One thing I'm learning in my current job is that
datasets are rarely clean. :-)

Best regards,
Frank

On Fri, Jun 8, 2012 at 12:59 PM, Kedar Deshpande
<kedardeshpande87 at gmail.com> wrote:
>> Hi,
>>
>> I am creating an application that reads a shapefile having Zipcode
>> Tabulation Area information (provided by US Census Bureau).
>> Once I get the layer, I am setting a spatial filter on it. I am passing a
>> OGRPoint object to it having some values for latitude and longitude.
>> After I apply this filter, I am iterating over the Features that the layer
>> returns.
>> But for a given geometry point, it is returning more than one features. I
>> am extracting the zipcode from the feature.
>> So, it is returning me more than one zip codes for one lat/long point.
>> Could someone please let me know why is this behavior observed ?
>> If it returns multiple features for a filter, what is the order in which
>> it returns the features (when we call layer->GetNextFeature()).
>> Is this order according to how exactly the filter matches Or is it not
>> definite ? The documentation in the API does not mention about the order.
>>
>> Thanks,
>> Kedar
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer

From kassies at gmail.com  Fri Jun  8 13:56:36 2012
From: kassies at gmail.com (Rutger)
Date: Fri, 8 Jun 2012 13:56:36 -0700 (PDT)
Subject: [gdal-dev] Reading a NetCDF file with python (not recognised as
 a supported dataset name
In-Reply-To: <CA+TxYvNbv7gkpnVUa3fyGyNVS82owoW9tQ2vFZe79LXb4M-Yhg@mail.gmail.com>
References: <1339156848808-4979943.post@n6.nabble.com>
	<CA+TxYvNbv7gkpnVUa3fyGyNVS82owoW9tQ2vFZe79LXb4M-Yhg@mail.gmail.com>
Message-ID: <1339188996038-4980067.post@n6.nabble.com>

Hey,

Thank you all for the replies, i really appreciate the help.

@Anton, i have tried many different ways of refering to the file. Full path,
file only, back and forward slashes, double slashes etc. All have the same
result. I also would expect this to be platform dependent, but not file
format dependent. So for a NetCDF file it should be similar as for Geotiff
etc. The NETCDF prefix and subdataset are format specific, so this might be
an issue. But if this is wrong, i would suspect the commandline utilities to
be failing as well.

@Etienne, Running gdalinfo with stats gives me exactly the same values as
you, till the last decimal. This confirms that both the file is fine
(gdal-proof), and that the pre-build command-line utilities are working as
supposed to. 

Turning on 'CPL_DEBUG' (and adding the -q to supress progress) for the
previous posted script results in:
/D:\Projects\Python\TRMM_soilm>python debug.py
GDAL: GDALOpen(LPRM-TMI_L3_DY_SOILM3_V001-20120503T175233Z_20120501.vrt,
this=01883C90) succeeds as VRT.
ERROR 4:
`NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120503T175233Z_20120501.nc:soil_moisture_x'
does not exist in the file system,
and is not recognised as a supported dataset name.

GDAL: GDALClose(LPRM-TMI_L3_DY_SOILM3_V001-20120503T175233Z_20120501.vrt,
this=01883C90)
GDAL:
GDALClose(NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120503T175233Z_20120501.nc:soil_moisture_x,
this=01884388)/

Besides the earlier error still being present i dont see anything which can
be an indication of the problem.

If anyone has any other ways of debugging this, i would appreciate it.

Regards,
Rutger


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Reading-a-NetCDF-file-with-python-not-recognised-as-a-supported-dataset-name-tp4979943p4980067.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From etourigny.dev at gmail.com  Fri Jun  8 14:17:10 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 8 Jun 2012 18:17:10 -0300
Subject: [gdal-dev] Reading a NetCDF file with python (not recognised as
 a supported dataset name
In-Reply-To: <1339188996038-4980067.post@n6.nabble.com>
References: <1339156848808-4979943.post@n6.nabble.com>
	<CA+TxYvNbv7gkpnVUa3fyGyNVS82owoW9tQ2vFZe79LXb4M-Yhg@mail.gmail.com>
	<1339188996038-4980067.post@n6.nabble.com>
Message-ID: <CA+TxYvO8s1wpjT+JNcMtGWSJW4DJyaZ4eV=oi8OiBVJ06cpGkQ@mail.gmail.com>

On Fri, Jun 8, 2012 at 5:56 PM, Rutger <kassies at gmail.com> wrote:
> Hey,
>
> Thank you all for the replies, i really appreciate the help.
>
> @Anton, i have tried many different ways of refering to the file. Full path,
> file only, back and forward slashes, double slashes etc. All have the same
> result. I also would expect this to be platform dependent, but not file
> format dependent. So for a NetCDF file it should be similar as for Geotiff
> etc. The NETCDF prefix and subdataset are format specific, so this might be

probably. there netcdf file argument parser might not be perfect in
windows, especially dealing with python

> an issue. But if this is wrong, i would suspect the commandline utilities to
> be failing as well.

Not necessarily ... the python bindings might behave differently with
quotes, which is probably the root of the problem here.

Can you try with osgeo4w? You can probably just do a minimal install
with gdal+python, then try to run you python script in the osgeo4w
shell.
I got it working that way.

>
> @Etienne, Running gdalinfo with stats gives me exactly the same values as
> you, till the last decimal. This confirms that both the file is fine
> (gdal-proof), and that the pre-build command-line utilities are working as
> supposed to.
>
> Turning on 'CPL_DEBUG' (and adding the -q to supress progress) for the
> previous posted script results in:
> /D:\Projects\Python\TRMM_soilm>python debug.py
> GDAL: GDALOpen(LPRM-TMI_L3_DY_SOILM3_V001-20120503T175233Z_20120501.vrt,
> this=01883C90) succeeds as VRT.
> ERROR 4:
> `NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120503T175233Z_20120501.nc:soil_moisture_x'
> does not exist in the file system,
> and is not recognised as a supported dataset name.

Strange that there is no netcdf debugging information.

Please try with the small attached file:

And try this:
gdal_translate -of netcdf
NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120503T175233Z_20120501.nc:soil_moisture_x
tmp1.nc
gdalinfo tmp1.nc

and then run your script with tmp1.nc instead (without any vrt stuff),
it might be that netcdf support is not ok in the python build?


You should probably experiment without a vrt file, this might also
cause problems

>
> GDAL: GDALClose(LPRM-TMI_L3_DY_SOILM3_V001-20120503T175233Z_20120501.vrt,
> this=01883C90)
> GDAL:
> GDALClose(NETCDF:LPRM-TMI_L3_DY_SOILM3_V001-20120503T175233Z_20120501.nc:soil_moisture_x,
> this=01884388)/
>
> Besides the earlier error still being present i dont see anything which can
> be an indication of the problem.
>
> If anyone has any other ways of debugging this, i would appreciate it.
>
> Regards,
> Rutger
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Reading-a-NetCDF-file-with-python-not-recognised-as-a-supported-dataset-name-tp4979943p4980067.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
A non-text attachment was scrubbed...
Name: trmm.nc
Type: application/x-netcdf
Size: 8956 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120608/8ce10c8c/attachment-0001.nc>

From dlopezaspe at gmail.com  Fri Jun  8 15:13:10 2012
From: dlopezaspe at gmail.com (sigologo)
Date: Fri, 8 Jun 2012 15:13:10 -0700 (PDT)
Subject: [gdal-dev] How to Import one Subdataset to Netcdf
Message-ID: <1339193590008-4980075.post@n6.nabble.com>

Hello Everyone
 I'm import many files ntcdf like  fnl_19990801_00_00.nc... by console in
Ubuntu 10.04LTS by gdal_traslate, but not knowing how insert subdataset
T_CDC_3_CCY_10

*david at laptop:~/tesis/karina/netcdf$ gdal_translate -of netcdf
fnl_19990801_00_00.nc out.gtiff
Input file contains subdatasets. Please, select one of them for reading.
*
SUBDATASET_15_NAME=NETCDF:"fnl_19990801_00_00.nc":T_CDC_3_CCY_10
SUBDATASET_15_DESC=[1x181x360] T_CDC_3_CCY_10 (32-bit floating-point)

anyone have an idea?
Thanks a lot..

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-Import-one-Subdataset-to-Netcdf-tp4980075.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From etourigny.dev at gmail.com  Fri Jun  8 15:30:50 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 8 Jun 2012 19:30:50 -0300
Subject: [gdal-dev] How to Import one Subdataset to Netcdf
In-Reply-To: <1339193590008-4980075.post@n6.nabble.com>
References: <1339193590008-4980075.post@n6.nabble.com>
Message-ID: <CA+TxYvN2P=m8Lh918LtTx6QWLTHTYY9a=wwgN-0LuqyJx-BJ7g@mail.gmail.com>

Please consult the docs at http://www.gdal.org/frmt_netcdf.html

You need to use one of the SUBDATASET_XX_NAME values for example

gdal_translate NETCDF:"fnl_19990801_00_00.nc":T_CDC_3_CCY_10 tmp1.tif


On Fri, Jun 8, 2012 at 7:13 PM, sigologo <dlopezaspe at gmail.com> wrote:
> Hello Everyone
> ?I'm import many files ntcdf like ?fnl_19990801_00_00.nc... by console in
> Ubuntu 10.04LTS by gdal_traslate, but not knowing how insert subdataset
> T_CDC_3_CCY_10
>
> *david at laptop:~/tesis/karina/netcdf$ gdal_translate -of netcdf
> fnl_19990801_00_00.nc out.gtiff
> Input file contains subdatasets. Please, select one of them for reading.
> *
> SUBDATASET_15_NAME=NETCDF:"fnl_19990801_00_00.nc":T_CDC_3_CCY_10
> SUBDATASET_15_DESC=[1x181x360] T_CDC_3_CCY_10 (32-bit floating-point)
>
> anyone have an idea?
> Thanks a lot..
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-Import-one-Subdataset-to-Netcdf-tp4980075.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From dlopezaspe at gmail.com  Fri Jun  8 16:10:23 2012
From: dlopezaspe at gmail.com (sigologo)
Date: Fri, 8 Jun 2012 16:10:23 -0700 (PDT)
Subject: [gdal-dev] How to Import one Subdataset to Netcdf
In-Reply-To: <CA+TxYvN2P=m8Lh918LtTx6QWLTHTYY9a=wwgN-0LuqyJx-BJ7g@mail.gmail.com>
References: <1339193590008-4980075.post@n6.nabble.com>
	<CA+TxYvN2P=m8Lh918LtTx6QWLTHTYY9a=wwgN-0LuqyJx-BJ7g@mail.gmail.com>
Message-ID: <1339197023743-4980080.post@n6.nabble.com>

Thanks a Lot Mr Etienne 
 The file was imported correctly, but not too much  how to make this batch
for many files!!!!!

Regards

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-Import-one-Subdataset-to-Netcdf-tp4980075p4980080.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From kedardeshpande87 at gmail.com  Fri Jun  8 18:54:19 2012
From: kedardeshpande87 at gmail.com (Kedar Deshpande)
Date: Fri, 8 Jun 2012 18:54:19 -0700
Subject: [gdal-dev] Using Java bindings of GDAL library :
	UnsatisfiedLinkError
Message-ID: <CA+_hAHe0aHcH61T+EDNO1QXg0SU4i+2cODzgNyu1_f+Ow0oy4w@mail.gmail.com>

Hi,

I am writing a simple program to read a shapefile in Java on my linux
machine using the gdal library's Java bindings.

I followed the steps according to the link
http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix given on
the GDAL library's site.

In the gdal folder in gdal/swig/java, I made changes in java.opt and the
ran 'make' command.
Then I wrote a simple program under /apps folder as :

package apps;

import org.gdal.ogr.DataSource;
import org.gdal.ogr.ogr;

public class TestClass {

public static void main(String[] args) {
ogr.RegisterAll();
}
}

and ran it as

javac apps/TestClass.java
setenv LD_LIBRARY_PATH ${LD_LIBRARY_PATH}:`pwd`
java -classpath `pwd`/gdal.jar:`pwd`:`pwd`/apps TestClass

but I am getting UnsatisfiedLinkError after running it.

Native library load failed.
java.lang.UnsatisfiedLinkError: no ogrjni in java.library.path
Exception in thread "main" java.lang.UnsatisfiedLinkError:
org.gdal.ogr.ogrJNI.RegisterAll()V
	at org.gdal.ogr.ogrJNI.RegisterAll(Native Method)
	at org.gdal.ogr.ogr.RegisterAll(ogr.java:110)
	at apps.TestClass.main(TestClass.java:9)


Is there anything I am missing in this configuration?

I have the libgdal.la library files in my PATH env variable. (I am
running it on RHEL5)

Can some please let me know how do I get rid of this exception and
make it link to the library?

Thanks,

Kedar
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120608/29707cac/attachment.html>

From chaitanya.ch at gmail.com  Fri Jun  8 20:25:25 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat, 9 Jun 2012 08:55:25 +0530
Subject: [gdal-dev] Using Java bindings of GDAL library :
	UnsatisfiedLinkError
In-Reply-To: <CA+_hAHe0aHcH61T+EDNO1QXg0SU4i+2cODzgNyu1_f+Ow0oy4w@mail.gmail.com>
References: <CA+_hAHe0aHcH61T+EDNO1QXg0SU4i+2cODzgNyu1_f+Ow0oy4w@mail.gmail.com>
Message-ID: <CAMKgpOb-NA8FDPwiFmcJ+96yQ21ogLwjvaLc-FZz+R1PL8OKzw@mail.gmail.com>

Kedar,

I don't think setenv works at Linux terminal. Use the export command.

export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:`pwd`

You should also set GDAL_DATA to the data directory to gdal/data

On Sat, Jun 9, 2012 at 7:24 AM, Kedar Deshpande
<kedardeshpande87 at gmail.com>wrote:

> Hi,
>
> I am writing a simple program to read a shapefile in Java on my linux
> machine using the gdal library's Java bindings.
>
> I followed the steps according to the link
> http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix given
> on the GDAL library's site.
>
> In the gdal folder in gdal/swig/java, I made changes in java.opt and the
> ran 'make' command.
> Then I wrote a simple program under /apps folder as :
>
> package apps;
>
> import org.gdal.ogr.DataSource;
> import org.gdal.ogr.ogr;
>
> public class TestClass {
>
> public static void main(String[] args) {
>  ogr.RegisterAll();
> }
> }
>
> and ran it as
>
> javac apps/TestClass.java
> setenv LD_LIBRARY_PATH ${LD_LIBRARY_PATH}:`pwd`
> java -classpath `pwd`/gdal.jar:`pwd`:`pwd`/apps TestClass
>
> but I am getting UnsatisfiedLinkError after running it.
>
> Native library load failed.
> java.lang.UnsatisfiedLinkError: no ogrjni in java.library.path
> Exception in thread "main" java.lang.UnsatisfiedLinkError: org.gdal.ogr.ogrJNI.RegisterAll()V
> 	at org.gdal.ogr.ogrJNI.RegisterAll(Native Method)
> 	at org.gdal.ogr.ogr.RegisterAll(ogr.java:110)
> 	at apps.TestClass.main(TestClass.java:9)
>
>
> Is there anything I am missing in this configuration?
>
> I have the libgdal.la library files in my PATH env variable. (I am running it on RHEL5)
>
> Can some please let me know how do I get rid of this exception and make it link to the library?
>
> Thanks,
>
> Kedar
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120609/7d1d1bde/attachment.html>

From chaitanya.ch at gmail.com  Sat Jun  9 00:38:18 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat, 9 Jun 2012 13:08:18 +0530
Subject: [gdal-dev] Error using ogr2ogr to import sqlite table into
	FileGDB
In-Reply-To: <CAMM2+YrnEeHc2F9dEMVVFBmyWYAwP80ahDimCLJzCgLTUjG6hQ@mail.gmail.com>
References: <CAMM2+YrnEeHc2F9dEMVVFBmyWYAwP80ahDimCLJzCgLTUjG6hQ@mail.gmail.com>
Message-ID: <CAMKgpOaZkmMMfb4f4SYcFDW_6aRfJRRq1Eo33enK7DePr3jsEA@mail.gmail.com>

Eric,

I don't think ESRI FileGDB supports layers without a geometry.
Try adding "-nlt NONE" to the ogr2ogr command.

On Fri, Jun 8, 2012 at 10:13 PM, Eric Goddard <egoddard at memphis.edu> wrote:

> Hello everyone,
>
> I'm attempting to import a non-spatial SQLite table into a File
> Geodatabase. I have gdal 1.9.0 compiled with FileGDB support on
> kubuntu 12.04 and it is working correctly. When I use
>
> $ogr2ogr -f "FileGDB" geodatabase.gdb database.db
>
> the command runs but for every record I get the following error:
>
> ERROR 1: Error: Failed at writing Geometry to Row in CreateFeature.
> (An expected Field was not found or could not be retrieved properly.)
>
> In the geodatabase the table shows as an empty table and not a feature
> class. Is there an argument I am missing to make the sqlite table
> import as a table and not a feature class in the FileGDB?
>
> I also tried
> $ogr2ogr -f "FileGDB" geodatabase.gdb database.db myTable -nln newTable
>
> and got the same error.
>
> Thanks,
> Eric
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120609/90d28717/attachment.html>

From schwab at linux-m68k.org  Fri Jun  8 12:02:15 2012
From: schwab at linux-m68k.org (Andreas Schwab)
Date: Fri, 08 Jun 2012 21:02:15 +0200
Subject: [gdal-dev] [PATCH] Postgisraster: fix array overflow
Message-ID: <m2aa0dtyo8.fsf@igel.home>

Index: frmts/postgisraster/postgisrasterdataset.cpp
===================================================================
--- frmts/postgisraster/postgisrasterdataset.cpp	(revision 24546)
+++ frmts/postgisraster/postgisrasterdataset.cpp	(working copy)
@@ -1014,8 +1014,8 @@ CPLErr PostGISRasterDataset::IRasterIO(G
     PostGISRasterRasterBand * poBand = NULL;
     GByte * pabySrcBlock = NULL;
     int nBlocksPerRow, nBlocksPerColumn;
-    char orderByY[4];
-    char orderByX[3];
+    char orderByY[5];
+    char orderByX[4];
 
 
     /**

Andreas.

-- 
Andreas Schwab, schwab at linux-m68k.org
GPG Key fingerprint = 58CA 54C7 6D53 942B 1756  01D3 44D5 214B 8276 4ED5
"And now for something completely different."


From mateusz at loskot.net  Sat Jun  9 08:00:17 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 9 Jun 2012 16:00:17 +0100
Subject: [gdal-dev] [PATCH] Postgisraster: fix array overflow
In-Reply-To: <m2aa0dtyo8.fsf@igel.home>
References: <m2aa0dtyo8.fsf@igel.home>
Message-ID: <CABUeae--M1h-aFGavatX3bE=JXqGKQwn=xdrfsQ+cPEPW0n1NA@mail.gmail.com>

On 8 June 2012 20:02, Andreas Schwab <schwab at linux-m68k.org> wrote:
> Index: frmts/postgisraster/postgisrasterdataset.cpp
> ===================================================================
> --- frmts/postgisraster/postgisrasterdataset.cpp ? ? ? ?(revision 24546)
> +++ frmts/postgisraster/postgisrasterdataset.cpp ? ? ? ?(working copy)
> [...]

FYI, I created ticket for your patch:

http://trac.osgeo.org/gdal/ticket/4703

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From bfraser at geoanalytic.com  Sat Jun  9 08:50:52 2012
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Sat, 09 Jun 2012 09:50:52 -0600
Subject: [gdal-dev] image outline polygons with keys
Message-ID: <4FD370DC.60004@geoanalytic.com>

All,

   I need to create image footprints (outlines excluding the nodata 
areas)  for about 300 geotiff images.  While GDAL's gdal_polygonize.py 
may do the job, I prefer GINA's 
(http://www.gina.alaska.edu/projects/gina-tools) gdal_trace_outline 
because of its option,s but I'm open to alternatives.  I intend to load 
the polygons into PostGIS for later processing and I need some kind of 
key value (filename?) on the polygons. Neither gdal_polygonize nor 
gdal_trace_outline have an option for setting an attribute value (the 
produced shapefiles have a single integer attribute) to identify the 
polygon when they create the shapefile.

   So my current plan calls for scripting:

    For 300 shapefiles:
       Use shp2pgsl to Load shapefile into a PostGIS temp table
             (creates a table with a single row),
       Use pgsql to do an ALTER table to:
             add a IMAGENAME column
             update IMAGENAME for the loaded row
             copy the row into the final table
             delete the temp table

I suppose I could enhance gdal_polygonize (or gdal_trace_outline) to 
allow an attribute value, but I'm hoping someone has a simpler, more 
elegant way using existing software.

GeoKettle may be an answer, but it has a steep learning curve...

-- 
Best Regards,
Brent Fraser



From yogesh at vizexperts.com  Sat Jun  9 15:42:18 2012
From: yogesh at vizexperts.com (Yogesh Dahiya)
Date: Sun, 10 Jun 2012 04:12:18 +0530
Subject: [gdal-dev] gdal2tiles
Message-ID: <008c01cd4691$219d1f80$64d75e80$@vizexperts.com>

The thing is I want to crate tiles (TMS format) from large map image using
gdal c++ api (similar to what is done by gdal2tiles.py).

So is there any particular api for that our I have to do it from scratch
using base api (and I want tile creation to be optimized and parallelized).

Any suggestion will be great help.

Thanks

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120610/ed0689da/attachment.html>

From chaitanya.ch at gmail.com  Sat Jun  9 17:40:18 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun, 10 Jun 2012 06:10:18 +0530
Subject: [gdal-dev] gdal2tiles
In-Reply-To: <008c01cd4691$219d1f80$64d75e80$@vizexperts.com>
References: <008c01cd4691$219d1f80$64d75e80$@vizexperts.com>
Message-ID: <CAMKgpOZXf4bmS48P1kC15p2x5YRCpqTC4MdKDK7a-vk5MOGngA@mail.gmail.com>

Yogesh,

There are a couple of implementations in Python for this. GeoWebCache was
implemented in Java.
As for optimization, I think your bottleneck is going to be disk i/o
instead of processor speed.

On Sun, Jun 10, 2012 at 4:12 AM, Yogesh Dahiya <yogesh at vizexperts.com>wrote:

> The thing is I want to crate tiles (TMS format) from large map image using
> gdal c++ api (similar to what is done by gdal2tiles.py).****
>
> So is there any particular api for that our I have to do it from scratch
> using base api (and I want tile creation to be optimized and parallelized).
> ****
>
> Any suggestion will be great help.****
>
> Thanks****
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120610/0b4cab4e/attachment.html>

From klokan at gmail.com  Sun Jun 10 00:34:15 2012
From: klokan at gmail.com (klokan at gmail.com)
Date: Sun, 10 Jun 2012 09:34:15 +0200
Subject: [gdal-dev] gdal2tiles
In-Reply-To: <008c01cd4691$219d1f80$64d75e80$@vizexperts.com>
References: <008c01cd4691$219d1f80$64d75e80$@vizexperts.com>
Message-ID: <CANkM0ZCqZHx0aeRjDKpjT6ajoPQVQznxq3fXiA2SJZMFJBD4ZA@mail.gmail.com>

Dear Yogesh,

we have developed highly optimized tiling and merging utility in C++
on top of GDAL. It is parallelized (multi-core CPUs) and can even run
on a cluster of computers with MPI. It is also producing tiles with
minimal size in PNG8/PNG8a or in JPEG. It has been used on very large
datasets in production environments.

Have a look at http://www.maptiler.com/. We can provide you a demo of
the software.

Best regards,

Petr Pridal

(the original author of GDAL2Tiles)

On Sun, Jun 10, 2012 at 12:42 AM, Yogesh Dahiya <yogesh at vizexperts.com> wrote:
> The thing is I want to crate tiles (TMS format) from large map image using
> gdal c++ api (similar to what is done by gdal2tiles.py).
>
> So is there any particular api for that our I have to do it from scratch
> using base api (and I want tile creation to be optimized and parallelized).
>
> Any suggestion will be great help.
>
> Thanks
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
http://www.klokantech.com/
http://www.georeferencer.com/
http://www.maptiler.com/
http://www.oldmapsonline.org/

From lao.jinghao at yahoo.com.cn  Sun Jun 10 07:03:07 2012
From: lao.jinghao at yahoo.com.cn (xiaomi)
Date: Sun, 10 Jun 2012 07:03:07 -0700 (PDT)
Subject: [gdal-dev] How to get some special metadata of HDF5
	Cosmo-Skymed file
In-Reply-To: <CAC4=NR_qgvqVV2v982OtJ18PcX61QKbwrt8hRj6j7xK-+zHqcw@mail.gmail.com>
References: <1310306922740-6567852.post@n2.nabble.com>
	<4E19B8CF.4080702@tiscali.it>
	<CAC4=NR_qgvqVV2v982OtJ18PcX61QKbwrt8hRj6j7xK-+zHqcw@mail.gmail.com>
Message-ID: <1339336987691-4980229.post@n6.nabble.com>

hi Alex,
     I am a beginner to learn gdal. I have a problem to read the metadata of
hdf5 file of Cosmo-skymed. I am working on visual studio 2010 in C# using
gdal dotnet dll. 
     I want to get some metadata item from the hdf5 dataset, the method like
"GetMetadataItem(string pszName, string pszDomainName)",  when I work as
"GetMetaData("")", return a string array. The first string is
"Acquisition_Mode=HUGEREGION", so I try
GetMetadataItem("Mode","Acquisition"), but it return null. I have try
"GetMetadataItem("Beam_ID","S01")", return null as well. How can I know the
DomainName of a metadat item? Is it in special format? 
     Looking forward to your reply. Best regards!

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-get-some-special-metadata-of-HDF5-Cosmo-Skymed-file-tp3744320p4980229.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From giohappy at gmail.com  Sun Jun 10 13:33:59 2012
From: giohappy at gmail.com (G. Allegri)
Date: Sun, 10 Jun 2012 22:33:59 +0200
Subject: [gdal-dev] gdal2tiles
Message-ID: <CAB4g1=wQzcbHnpBuNUzirqFiaZ_VaU-2SQupPM7VfPN89UZwcw@mail.gmail.com>

Hi Petr,
AFAICS Maptiler is not open source, right?

giovanni
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120610/ff60c0f6/attachment.html>

From mateusz at loskot.net  Sun Jun 10 13:36:59 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun, 10 Jun 2012 21:36:59 +0100
Subject: [gdal-dev] gdal2tiles
In-Reply-To: <CAB4g1=wQzcbHnpBuNUzirqFiaZ_VaU-2SQupPM7VfPN89UZwcw@mail.gmail.com>
References: <CAB4g1=wQzcbHnpBuNUzirqFiaZ_VaU-2SQupPM7VfPN89UZwcw@mail.gmail.com>
Message-ID: <CABUeae8o8yCWOSBa+u3LTGMxwBqTUWi0utn+ycCPpU_ODmpK1w@mail.gmail.com>

On 10 June 2012 21:33, G. Allegri <giohappy at gmail.com> wrote:
> Hi Petr,
> AFAICS Maptiler is not open source, right?

You may be confusing

http://www.klokantech.com/maptiler/

with

http://www.maptiler.org/
http://code.google.com/p/maptiler/

The latter is FOSS.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From giohappy at gmail.com  Sun Jun 10 13:42:01 2012
From: giohappy at gmail.com (G. Allegri)
Date: Sun, 10 Jun 2012 22:42:01 +0200
Subject: [gdal-dev] gdal2tiles
In-Reply-To: <CABUeae8o8yCWOSBa+u3LTGMxwBqTUWi0utn+ycCPpU_ODmpK1w@mail.gmail.com>
References: <CAB4g1=wQzcbHnpBuNUzirqFiaZ_VaU-2SQupPM7VfPN89UZwcw@mail.gmail.com>
	<CABUeae8o8yCWOSBa+u3LTGMxwBqTUWi0utn+ycCPpU_ODmpK1w@mail.gmail.com>
Message-ID: <CAB4g1=wUhwHKrpZsy-HBE363vAnORX8JcD-WeeZj-Z=qmdTA9A@mail.gmail.com>

I'm not confusing them.
What Petr was referring to is maptiler.com (MapTiler Cluster), which
doesn't seem to be open source.

giovanni

2012/6/10 Mateusz Loskot <mateusz at loskot.net>

> On 10 June 2012 21:33, G. Allegri <giohappy at gmail.com> wrote:
> > Hi Petr,
> > AFAICS Maptiler is not open source, right?
>
> You may be confusing
>
> http://www.klokantech.com/maptiler/
>
> with
>
> http://www.maptiler.org/
> http://code.google.com/p/maptiler/
>
> The latter is FOSS.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120610/8c8ee209/attachment.html>

From even.rouault at mines-paris.org  Sun Jun 10 13:44:51 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 10 Jun 2012 22:44:51 +0200
Subject: [gdal-dev] [NEW] Multi-threaded warping
Message-ID: <201206102244.51268.even.rouault@mines-paris.org>

Hi,

I've just commited in trunk the capability of doing multi-threaded warping. 
There was already a -multi option of gdalwarp that was used to parallelize I/O 
operations and warping computations. There's now a NUM_THREADS warping option 
that can be used to set the number of threads to parallelize the warping 
computations themselves. The value can be either a numeric value or ALL_CPUS 
to use all the available CPUs/cores. The best performance is achieved when 
used in combination with PROJ 4.8.0 or later, which allow SRS transformations 
to be done in parallel (when an older version is used, GDAL uses a global 
mutex to serialize SRS transformations). The new option is of course mostly 
useful when warping is CPU bound, for example when using complex warping 
kernels, such as cubic or lanczos.

For example :

gdalwarp [-multi] src.tif dst.tif -wo NUM_THREADS=ALL_CPUS

Please test and report if you have issues.

Best regards,

Even

From even.rouault at mines-paris.org  Sun Jun 10 14:52:44 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 10 Jun 2012 23:52:44 +0200
Subject: [gdal-dev] [NEW] Multi-threaded warping
In-Reply-To: <001a01cd4752$4784fa80$d68eef80$@vizexperts.com>
References: <201206102244.51268.even.rouault@mines-paris.org>
	<001a01cd4752$4784fa80$d68eef80$@vizexperts.com>
Message-ID: <201206102352.44870.even.rouault@mines-paris.org>

Le dimanche 10 juin 2012 23:44:54, Yogesh Dahiya a ?crit :
> As far I know gdal1.9 has integrated opencl so we can parallelize by
> setting it right.
> So what exactly is your addition.
> By the way I tried opencl case and was able to get 16x over general case
> for lanczos for image of 16000*16000

(Replying to list too, as others might have the same question)

Yes indeed, GDAL 1.9 can use OpenCL and this implementation is of course still 
available.

Unfortunately, AFAIK, there is not yet any working OpenSource OpenCL 
implementation (and my experience with some proprietary OpenCL implementation 
has not always been convincing, like the GUI being totally unresponsive during 
the processing).

The new multi-threaded implementation just uses traditional multi-threading 
technics that are available on all platforms where GDAL can run.

From etourigny.dev at gmail.com  Sun Jun 10 15:22:36 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun, 10 Jun 2012 19:22:36 -0300
Subject: [gdal-dev] [NEW] Multi-threaded warping
In-Reply-To: <201206102352.44870.even.rouault@mines-paris.org>
References: <201206102244.51268.even.rouault@mines-paris.org>
	<001a01cd4752$4784fa80$d68eef80$@vizexperts.com>
	<201206102352.44870.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvNF1a5hyKoBiZVvV_8H_Tr3Y4QOfrXjG2BLpNs8joNT_Q@mail.gmail.com>

Even - good stuff!

Can you comment on the usage of openmp for multi-threading?  Is the
multi-threading in gdal entirely based on pthreads (in linux)?

It's my understanding that openmp is much easier to manage but offers
less fine-grained control - is that required for multi-thread warping?
Of course what works best is what is already working!

Sorry for such a generic question, I did not really look into the
specifics (other than a quick look at mutext handling).

Regards,
Etienne

On Sun, Jun 10, 2012 at 6:52 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le dimanche 10 juin 2012 23:44:54, Yogesh Dahiya a ?crit :
>> As far I know gdal1.9 has integrated opencl so we can parallelize by
>> setting it right.
>> So what exactly is your addition.
>> By the way I tried opencl case and was able to get 16x over general case
>> for lanczos for image of 16000*16000
>
> (Replying to list too, as others might have the same question)
>
> Yes indeed, GDAL 1.9 can use OpenCL and this implementation is of course still
> available.
>
> Unfortunately, AFAIK, there is not yet any working OpenSource OpenCL
> implementation (and my experience with some proprietary OpenCL implementation
> has not always been convincing, like the GUI being totally unresponsive during
> the processing).
>
> The new multi-threaded implementation just uses traditional multi-threading
> technics that are available on all platforms where GDAL can run.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From seth at pricepages.org  Sun Jun 10 16:29:53 2012
From: seth at pricepages.org (Seth Price)
Date: Sun, 10 Jun 2012 17:29:53 -0600
Subject: [gdal-dev] [NEW] Multi-threaded warping
In-Reply-To: <201206102352.44870.even.rouault@mines-paris.org>
References: <201206102244.51268.even.rouault@mines-paris.org>
	<001a01cd4752$4784fa80$d68eef80$@vizexperts.com>
	<201206102352.44870.even.rouault@mines-paris.org>
Message-ID: <1D664FF2-26CA-493C-93BB-5FAC88697070@pricepages.org>

If you tell OpenCL to target the CPU, it will produce a multiprocessor implementation instead of GPU.
~Seth


via iPhone

On Jun 10, 2012, at 3:52 PM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le dimanche 10 juin 2012 23:44:54, Yogesh Dahiya a ?crit :
>> As far I know gdal1.9 has integrated opencl so we can parallelize by
>> setting it right.
>> So what exactly is your addition.
>> By the way I tried opencl case and was able to get 16x over general case
>> for lanczos for image of 16000*16000
> 
> (Replying to list too, as others might have the same question)
> 
> Yes indeed, GDAL 1.9 can use OpenCL and this implementation is of course still 
> available.
> 
> Unfortunately, AFAIK, there is not yet any working OpenSource OpenCL 
> implementation (and my experience with some proprietary OpenCL implementation 
> has not always been convincing, like the GUI being totally unresponsive during 
> the processing).
> 
> The new multi-threaded implementation just uses traditional multi-threading 
> technics that are available on all platforms where GDAL can run.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From lao.jinghao at yahoo.com.cn  Mon Jun 11 00:31:54 2012
From: lao.jinghao at yahoo.com.cn (=?gb2312?B?wM3QocP0?=)
Date: Mon, 11 Jun 2012 15:31:54 +0800
Subject: [gdal-dev] How to Get metadata of HDF5 Cosmo-Skymed file ?
Message-ID: <008701cd47a4$4683e4f0$d38baed0$@jinghao@yahoo.com.cn>

Hi,all

     I am working on visual studio 2010 in C# using gdal dotnet dll. I have
a problem to read the metadata of hdf5 file of Cosmo-skymed. 

     I want to get some metadata item from the hdf5 dataset, the method like
"GetMetadataItem(string pszName, string pszDomainName)",  when I work as
"GetMetaData("")", return a string array. The first string is
"Acquisition_Mode=HUGEREGION", so I try
?GetMetadataItem("Mode","Acquisition")?, but it return null. I have try
"GetMetadataItem("Beam_ID","S01")", return null as well. I just don?t know
what string parameter should put into the method. How can I know the
DomainName of a metadat item? Is it in special format? 

     Looking forward to your reply. Best regards!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120611/619c4d7b/attachment.html>

From kassies at gmail.com  Mon Jun 11 00:54:27 2012
From: kassies at gmail.com (Rutger)
Date: Mon, 11 Jun 2012 00:54:27 -0700 (PDT)
Subject: [gdal-dev] Reading a NetCDF file with python (not recognised as
 a supported dataset name
In-Reply-To: <CA+TxYvO8s1wpjT+JNcMtGWSJW4DJyaZ4eV=oi8OiBVJ06cpGkQ@mail.gmail.com>
References: <1339156848808-4979943.post@n6.nabble.com>
	<CA+TxYvNbv7gkpnVUa3fyGyNVS82owoW9tQ2vFZe79LXb4M-Yhg@mail.gmail.com>
	<1339188996038-4980067.post@n6.nabble.com>
	<CA+TxYvO8s1wpjT+JNcMtGWSJW4DJyaZ4eV=oi8OiBVJ06cpGkQ@mail.gmail.com>
Message-ID: <1339401267077-4980313.post@n6.nabble.com>

Hey Etienne,

Thanks alot for the suggestions, here's are my results:

I made a minimal install of osgeo4w and tried to run the earlier script, it
results in the same error. I didnt notice anything different. 

I have tried it with the attached file, which also results in the same
error. 

Creating the 'tmp1.nc' with the command-line utilities works (as expected),
but then opening it directly (or with the vrt) again results in the same
error.
The script for testing was as simple as this:
/try:
    from osgeo import gdal
except ImportError:
    import gdal

dsin = gdal.Open('NETCDF:trmm.nc:soil_moisture_x')
/

I dont notice anything different when removing the VRT part, except that the
VRT method only throws the error when i actually start reading from the
dataset, whereas the direct .nc reading already fails at gdal.Open(). 

I added the VRT part to be sure that the reference to the NetCDF file was
correct. I wasnt 100% sure if my reference was correct, therefore i made
gdal_translate build the VRT. But all of it doesnt seem to make a
difference.


Thanks for your help so far! 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Reading-a-NetCDF-file-with-python-not-recognised-as-a-supported-dataset-name-tp4979943p4980313.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Mon Jun 11 01:44:09 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon, 11 Jun 2012 14:14:09 +0530
Subject: [gdal-dev] how to store a shapefile afterobtaining from
 intersection of two different shapeFiles
In-Reply-To: <CAP-zkzc6Ps6tJBUpr_Uh7OuHMEiypJdJ=xTqO-BAAr_Y8iZb=A@mail.gmail.com>
References: <CAP-zkzdjTdzE=qaX8Ywn33DQb5A_mNQ4ESE4hE3=n-=44zvJrw@mail.gmail.com>
	<CAMKgpOaW1TSkoQ2NagoSQdcQZRmRAAVOwsVFSH+qTRZR31mfSw@mail.gmail.com>
	<CAP-zkzc6Ps6tJBUpr_Uh7OuHMEiypJdJ=xTqO-BAAr_Y8iZb=A@mail.gmail.com>
Message-ID: <CAMKgpOYZHYfRh6RkQd67_Lm8Cuw7f3DabJ-tHXYZh6OEq+4q3Q@mail.gmail.com>

Siva,

Please go through the OGR Architecture tutorial and the OGR API pages.
http://www.gdal.org/ogr/ogr_arch.html
http://www.gdal.org/ogr/ogr_apitut.html

On Mon, Jun 11, 2012 at 1:54 PM, SIVA RAMA KRISHNA
<s.r.kriishna at gmail.com>wrote:

>  DEAR Chaitanya,
>
> HOW TO CREATE A SHAPEFILE USING POGEOMETRY OBJECT
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> best Regards
> from shiva
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120611/7f2363a3/attachment.html>

From etourigny.dev at gmail.com  Mon Jun 11 04:29:52 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 11 Jun 2012 08:29:52 -0300
Subject: [gdal-dev] Reading a NetCDF file with python (not recognised as
 a supported dataset name
In-Reply-To: <1339401267077-4980313.post@n6.nabble.com>
References: <1339156848808-4979943.post@n6.nabble.com>
	<CA+TxYvNbv7gkpnVUa3fyGyNVS82owoW9tQ2vFZe79LXb4M-Yhg@mail.gmail.com>
	<1339188996038-4980067.post@n6.nabble.com>
	<CA+TxYvO8s1wpjT+JNcMtGWSJW4DJyaZ4eV=oi8OiBVJ06cpGkQ@mail.gmail.com>
	<1339401267077-4980313.post@n6.nabble.com>
Message-ID: <CA+TxYvOY+enDJBff-oy=RvnJRThE8RcdvORXDdpgiiCqVTs9+g@mail.gmail.com>

On Mon, Jun 11, 2012 at 4:54 AM, Rutger <kassies at gmail.com> wrote:
> Hey Etienne,
>
> Thanks alot for the suggestions, here's are my results:
>
> I made a minimal install of osgeo4w and tried to run the earlier script, it
> results in the same error. I didnt notice anything different.
>
> I have tried it with the attached file, which also results in the same
> error.

Which version of gdal did you install?

See below, you are probably not using the correct syntax.

>
> Creating the 'tmp1.nc' with the command-line utilities works (as expected),
> but then opening it directly (or with the vrt) again results in the same
> error.
> The script for testing was as simple as this:
> /try:
> ? ?from osgeo import gdal
> except ImportError:
> ? ?import gdal
>
> dsin = gdal.Open('NETCDF:trmm.nc:soil_moisture_x')

This is not correct,  trmm.nc does not have soil_moisture_x variable

And you don't need to add NETCDF: to the file syntax, unless you are
using a subdataset - the full path will be given by `gdalinfo file.nc`

you should just open it like this

dsin = gdal.Open('trmm.nc')

> /
>
> I dont notice anything different when removing the VRT part, except that the
> VRT method only throws the error when i actually start reading from the
> dataset, whereas the direct .nc reading already fails at gdal.Open().
>
> I added the VRT part to be sure that the reference to the NetCDF file was
> correct. I wasnt 100% sure if my reference was correct, therefore i made
> gdal_translate build the VRT. But all of it doesnt seem to make a
> difference.
>
>
> Thanks for your help so far!
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Reading-a-NetCDF-file-with-python-not-recognised-as-a-supported-dataset-name-tp4979943p4980313.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jukka.rahkonen at mmmtike.fi  Mon Jun 11 05:47:32 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 11 Jun 2012 12:47:32 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?Gdal_pdf_driver_and_ogr=5Fdatasource_with_au?=
	=?utf-8?q?tomatic_-spat?=
Message-ID: <loom.20120611T140537-919@post.gmane.org>

Hi,

Could it be possible to make GDAL PDF driver (http://gdal.org/frmt_pdf.html)
to apply automatically -spat filter for the OGR_DATASOURCE layers which 
are to be drawn on top of raster layers? The values for the filter could
be captured from the raster layer extents.

Now by default all the features from the vector layer are inserted into
the PDF document. The features which lie outside the map borders on 
the map are rather unusable for users because it is impossible to 
show the features on a map even it is possible to select the features
from the list and show the attributes. However, I suppose that usually 
people suppose that the map and feature list suit together.

I can imagine that there could be some troubles in automatic construction
of -spat filter if the PDF targer srs is different than the native srs of
OGR_DATASOURCE.

-Jukka Rahkonen-


From kassies at gmail.com  Mon Jun 11 07:27:52 2012
From: kassies at gmail.com (Rutger)
Date: Mon, 11 Jun 2012 07:27:52 -0700 (PDT)
Subject: [gdal-dev] Reading a NetCDF file with python (not recognised as
 a supported dataset name
In-Reply-To: <CA+TxYvOY+enDJBff-oy=RvnJRThE8RcdvORXDdpgiiCqVTs9+g@mail.gmail.com>
References: <1339156848808-4979943.post@n6.nabble.com>
	<CA+TxYvNbv7gkpnVUa3fyGyNVS82owoW9tQ2vFZe79LXb4M-Yhg@mail.gmail.com>
	<1339188996038-4980067.post@n6.nabble.com>
	<CA+TxYvO8s1wpjT+JNcMtGWSJW4DJyaZ4eV=oi8OiBVJ06cpGkQ@mail.gmail.com>
	<1339401267077-4980313.post@n6.nabble.com>
	<CA+TxYvOY+enDJBff-oy=RvnJRThE8RcdvORXDdpgiiCqVTs9+g@mail.gmail.com>
Message-ID: <1339424872757-4980406.post@n6.nabble.com>

Hey,

I installed the latest OSGeo4W version (as mentioned in the quickstart at
the website: http://download.osgeo.org/osgeo4w/osgeo4w-setup.exe). 
During installation i unchecked every package except GDAL. The OSGeo4W shell
mentions "GDAL 1.9.1, released 2012/05/16" as the version.

I should have off course removed the subdataset when opening, my bad. The
error message changes from:
/ERROR 4: `NETCDF:trmm.nc:soil_moisture_x' does not exist in the file
system,
and is not recognised as a supported dataset name./

to:
/ERROR 4: `trmm.nc' not recognised as a supported file format./

It maybe rules out that the subdataset reference is the issue, but opening
the actual file is.

I also tried loading the netCDF-driver in Python, this returns a 'None'. In
the OSGeo4W shell i started python and did:
/D:\>python
Python 2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v.1500 32 bit (Intel)] on
win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import gdal
>>> driver = gdal.GetDriverByName('netCDF')
>>> print driver
None
>>> driver = gdal.GetDriverByName('Gtiff')
>>> print driver
<osgeo.gdal.Driver; proxy of &lt;Swig Object of type 'GDALDriverShadow *' at
0x00D680F8> >
>>>/

I dont know if reading and writing is done by the same driver. Is there a
way to test which GDAL version/installation my Python 2.7.2 imports. I only
have the Python bindings for 1.9.1 installed. But i probably have other GDAL
installations which ship with other programs (like QGIS).

Thanks again!


Regards,




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Reading-a-NetCDF-file-with-python-not-recognised-as-a-supported-dataset-name-tp4979943p4980406.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From etourigny.dev at gmail.com  Mon Jun 11 08:26:29 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 11 Jun 2012 12:26:29 -0300
Subject: [gdal-dev] Reading a NetCDF file with python (not recognised as
 a supported dataset name
In-Reply-To: <1339424872757-4980406.post@n6.nabble.com>
References: <1339156848808-4979943.post@n6.nabble.com>
	<CA+TxYvNbv7gkpnVUa3fyGyNVS82owoW9tQ2vFZe79LXb4M-Yhg@mail.gmail.com>
	<1339188996038-4980067.post@n6.nabble.com>
	<CA+TxYvO8s1wpjT+JNcMtGWSJW4DJyaZ4eV=oi8OiBVJ06cpGkQ@mail.gmail.com>
	<1339401267077-4980313.post@n6.nabble.com>
	<CA+TxYvOY+enDJBff-oy=RvnJRThE8RcdvORXDdpgiiCqVTs9+g@mail.gmail.com>
	<1339424872757-4980406.post@n6.nabble.com>
Message-ID: <CA+TxYvPN6zF-OOpnuiLJxv4rTkBU--b_-23ZiY-hzg6X2-Mm3w@mail.gmail.com>

On Mon, Jun 11, 2012 at 11:27 AM, Rutger <kassies at gmail.com> wrote:
> Hey,
>
> I installed the latest OSGeo4W version (as mentioned in the quickstart at
> the website: http://download.osgeo.org/osgeo4w/osgeo4w-setup.exe).
> During installation i unchecked every package except GDAL. The OSGeo4W shell
> mentions "GDAL 1.9.1, released 2012/05/16" as the version.
>
> I should have off course removed the subdataset when opening, my bad. The
> error message changes from:
> /ERROR 4: `NETCDF:trmm.nc:soil_moisture_x' does not exist in the file
> system,
> and is not recognised as a supported dataset name./
>
> to:
> /ERROR 4: `trmm.nc' not recognised as a supported file format./
>
> It maybe rules out that the subdataset reference is the issue, but opening
> the actual file is.
>
> I also tried loading the netCDF-driver in Python, this returns a 'None'. In
> the OSGeo4W shell i started python and did:
> /D:\>python
> Python 2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v.1500 32 bit (Intel)] on
> win32
> Type "help", "copyright", "credits" or "license" for more information.
>>>> import gdal
>>>> driver = gdal.GetDriverByName('netCDF')
>>>> print driver
> None
>>>> driver = gdal.GetDriverByName('Gtiff')
>>>> print driver
> <osgeo.gdal.Driver; proxy of &lt;Swig Object of type 'GDALDriverShadow *' at
> 0x00D680F8> >
>>>>/
>

did you install the gdal-python package? Your gdal python is probably
referencing an older gdal build which does not include netcdf support.

There most probably is something wrong with your installation, because
I can read both files fine in osgeo4w with gdal-1.9.1 - 32 bits

By any chance, are you running a 64-bit windows?

> I dont know if reading and writing is done by the same driver. Is there a
> way to test which GDAL version/installation my Python 2.7.2 imports. I only
> have the Python bindings for 1.9.1 installed. But i probably have other GDAL
> installations which ship with other programs (like QGIS).

here is how you can get the gdal version in python
print('gdal version:'+gdal.VersionInfo())
my install returns :
gdal version:1910

>
> Thanks again!
>
>
> Regards,
>
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Reading-a-NetCDF-file-with-python-not-recognised-as-a-supported-dataset-name-tp4979943p4980406.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From marcel.derrien at meteo.fr  Mon Jun 11 09:10:58 2012
From: marcel.derrien at meteo.fr (Marcel Derrien)
Date: Mon, 11 Jun 2012 16:10:58 +0000
Subject: [gdal-dev] gdalwarp incomplete output with geostationary satellite
	projection
Message-ID: <4FD61892.6050401@meteo.fr>

Hi all,

I am using gdalwarp (1.9.0, Linux x86_64) to reproject data from Plate 
carre projection to the target Geostationary Satellite projection 
(proj.4 definition) in an image defined by its georeferenced extent and 
resolution (target georeferenced units, metres).

The output image is as expected  but the earth disk is not completely 
filled when approaching the poles.
 
During execution the following error messages are output:
...
ERROR 1: tolerance condition error
...
ERROR 1: Reprojection failed, err = -20, further errors will be 
supressed on the transform object.

Here is the command I am using:

gdalwarp -t_srs "+proj=geos +a=6378169 +b=6356583.8 +lon_0=0 
+h=35785831" -tr 3000.403357 3000.403357 -te -5570248.832537 
-5567248.428647 5567248.428647 5570248.832537  source.tif dest.tif
 
Has anyone an idea to obtain a full coverage of the earth disk ?

Thanks in advance,
---
Marcel Derrien

-------------- next part --------------
A non-text attachment was scrubbed...
Name: marcel_derrien.vcf
Type: text/x-vcard
Size: 375 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120611/2bd5b924/attachment.vcf>

From kedardeshpande87 at gmail.com  Mon Jun 11 09:48:58 2012
From: kedardeshpande87 at gmail.com (Kedar Deshpande)
Date: Mon, 11 Jun 2012 09:48:58 -0700
Subject: [gdal-dev] Using Java bindings of GDAL library :
	UnsatisfiedLinkError
In-Reply-To: <CAMKgpOb-NA8FDPwiFmcJ+96yQ21ogLwjvaLc-FZz+R1PL8OKzw@mail.gmail.com>
References: <CA+_hAHe0aHcH61T+EDNO1QXg0SU4i+2cODzgNyu1_f+Ow0oy4w@mail.gmail.com>
	<CAMKgpOb-NA8FDPwiFmcJ+96yQ21ogLwjvaLc-FZz+R1PL8OKzw@mail.gmail.com>
Message-ID: <CA+_hAHcDYm57E3tgurgM33_ssWch8jRDq110iSVeLCoz3Q-OnQ@mail.gmail.com>

I am still getting the same exception. Even export env variable is not
working.
The entire exception I am getting is :

kdeshpan.desktop% java -classpath `pwd`/gdal.jar:`pwd`:`pwd`/apps
apps/TestClass
Native library load failed.
java.lang.UnsatisfiedLinkError:
/rhel5pdi/home/kdeshpan/gdal_java/swig/java/libogrjni.so:
/rhel5pdi/home/kdeshpan/gdal_java/swig/java/libogrjni.so: wrong ELF class:
ELFCLASS64 (Possible cause: architecture word width mismatch)
Exception in thread "main" java.lang.UnsatisfiedLinkError:
org.gdal.ogr.ogrJNI.RegisterAll()V
        at org.gdal.ogr.ogrJNI.RegisterAll(Native Method)
        at org.gdal.ogr.ogr.RegisterAll(ogr.java:110)
        at apps.TestClass.main(TestClass.java:9)

What am I missing? Can someone please let me know all the steps for using
this library with Java bindings.

Thanks,
Kedar

On Fri, Jun 8, 2012 at 8:25 PM, Chaitanya kumar CH
<chaitanya.ch at gmail.com>wrote:

> Kedar,
>
> I don't think setenv works at Linux terminal. Use the export command.
>
> export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:`pwd`
>
> You should also set GDAL_DATA to the data directory to gdal/data
>
> On Sat, Jun 9, 2012 at 7:24 AM, Kedar Deshpande <
> kedardeshpande87 at gmail.com> wrote:
>
>> Hi,
>>
>> I am writing a simple program to read a shapefile in Java on my linux
>> machine using the gdal library's Java bindings.
>>
>> I followed the steps according to the link
>> http://trac.osgeo.org/gdal/wiki/GdalOgrInJavaBuildInstructionsUnix given
>> on the GDAL library's site.
>>
>> In the gdal folder in gdal/swig/java, I made changes in java.opt and the
>> ran 'make' command.
>> Then I wrote a simple program under /apps folder as :
>>
>> package apps;
>>
>> import org.gdal.ogr.DataSource;
>> import org.gdal.ogr.ogr;
>>
>> public class TestClass {
>>
>> public static void main(String[] args) {
>>  ogr.RegisterAll();
>> }
>> }
>>
>> and ran it as
>>
>> javac apps/TestClass.java
>> setenv LD_LIBRARY_PATH ${LD_LIBRARY_PATH}:`pwd`
>> java -classpath `pwd`/gdal.jar:`pwd`:`pwd`/apps TestClass
>>
>> but I am getting UnsatisfiedLinkError after running it.
>>
>> Native library load failed.
>> java.lang.UnsatisfiedLinkError: no ogrjni in java.library.path
>> Exception in thread "main" java.lang.UnsatisfiedLinkError: org.gdal.ogr.ogrJNI.RegisterAll()V
>> 	at org.gdal.ogr.ogrJNI.RegisterAll(Native Method)
>> 	at org.gdal.ogr.ogr.RegisterAll(ogr.java:110)
>> 	at apps.TestClass.main(TestClass.java:9)
>>
>>
>> Is there anything I am missing in this configuration?
>>
>> I have the libgdal.la library files in my PATH env variable. (I am running it on RHEL5)
>>
>> Can some please let me know how do I get rid of this exception and make it link to the library?
>>
>> Thanks,
>>
>> Kedar
>>
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120611/b5162e84/attachment-0001.html>

From kedardeshpande87 at gmail.com  Mon Jun 11 10:21:33 2012
From: kedardeshpande87 at gmail.com (Kedar Deshpande)
Date: Mon, 11 Jun 2012 10:21:33 -0700
Subject: [gdal-dev] Accuracy of OGRLayer:SetSpatialFilter() API
In-Reply-To: <CA+_hAHeLB7b10KtEKsSCg4ezwygcOO0vbu8ep-JV-GsVFC+zMw@mail.gmail.com>
References: <CA+_hAHeLB7b10KtEKsSCg4ezwygcOO0vbu8ep-JV-GsVFC+zMw@mail.gmail.com>
Message-ID: <CA+_hAHe-GzEbTPHcpxbb1eoD0ed92_e_1mSgt==uXU47VMWrew@mail.gmail.com>

Is there a specific order in which the features get retrieved on calling
layer->GetNextFeature() ?
For example, if the given spatial filter matched 4 features, when we
iterate over the feature in a loop by calling  layer->GetNextFeature() , is
there a predefined order in which these feature are returned (such as best
match first etc) ?

I am not using GEOS, is there another way to make it retrieve more accurate
features ?

Thanks,
Kedar

On Fri, Jun 8, 2012 at 12:13 PM, Kedar Deshpande <kedardeshpande87 at gmail.com
> wrote:

> Hi,
>
> I am creating an application that reads a shapefile having Zipcode
> Tabulation Area information (provided by US Census Bureau).
> Once I get the layer, I am setting a spatial filter on it. I am passing a
> OGRPoint object to it having some values for latitude and longitude.
> After I apply this filter, I am iterating over the Features that the layer
> returns.
> But for a given geometry point, it is returning more than one features. I
> am extracting the zipcode from the feature.
> So, it is returning me more than one zip codes for one lat/long point.
> Could someone please let me know why is this behavior observed ?
> If it returns multiple features for a filter, what is the order in which
> it returns the features (when we call layer->GetNextFeature()).
> Is this order according to how exactly the filter matches Or is it not
> definite ? The documentation in the API does not mention about the order.
>
> Thanks,
> Kedar
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120611/9f9f5e8d/attachment.html>

From even.rouault at mines-paris.org  Mon Jun 11 11:00:39 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 11 Jun 2012 20:00:39 +0200
Subject: [gdal-dev] Using Java bindings of GDAL library :
	UnsatisfiedLinkError
In-Reply-To: <CA+_hAHcDYm57E3tgurgM33_ssWch8jRDq110iSVeLCoz3Q-OnQ@mail.gmail.com>
References: <CA+_hAHe0aHcH61T+EDNO1QXg0SU4i+2cODzgNyu1_f+Ow0oy4w@mail.gmail.com>
	<CAMKgpOb-NA8FDPwiFmcJ+96yQ21ogLwjvaLc-FZz+R1PL8OKzw@mail.gmail.com>
	<CA+_hAHcDYm57E3tgurgM33_ssWch8jRDq110iSVeLCoz3Q-OnQ@mail.gmail.com>
Message-ID: <201206112000.39631.even.rouault@mines-paris.org>


> /rhel5pdi/home/kdeshpan/gdal_java/swig/java/libogrjni.so: wrong ELF class:
> ELFCLASS64 (Possible cause: architecture word width mismatch)

That's pretty informative, isn't it ? Sounds like you are mixing a 64bit Java 
with a 32bit GDAL build, or the reverse

From even.rouault at mines-paris.org  Mon Jun 11 12:14:51 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 11 Jun 2012 21:14:51 +0200
Subject: [gdal-dev] Gdal pdf driver and ogr_datasource with automatic
	-spat
In-Reply-To: <loom.20120611T140537-919@post.gmane.org>
References: <loom.20120611T140537-919@post.gmane.org>
Message-ID: <201206112114.51099.even.rouault@mines-paris.org>

Le lundi 11 juin 2012 14:47:32, Jukka Rahkonen a ?crit :
> Hi,
> 
> Could it be possible to make GDAL PDF driver
> (http://gdal.org/frmt_pdf.html) to apply automatically -spat filter for
> the OGR_DATASOURCE layers which are to be drawn on top of raster layers?
> The values for the filter could be captured from the raster layer extents.
> 
> Now by default all the features from the vector layer are inserted into
> the PDF document. The features which lie outside the map borders on
> the map are rather unusable for users because it is impossible to
> show the features on a map even it is possible to select the features
> from the list and show the attributes. However, I suppose that usually
> people suppose that the map and feature list suit together.
> 
> I can imagine that there could be some troubles in automatic construction
> of -spat filter if the PDF targer srs is different than the native srs of
> OGR_DATASOURCE.

Excellent idea implemented in :

r24576 /trunk/ (4 files in 3 dirs): GDAL PDF: avoid writing OGR features that 
are outside the raster extent (and reproject OGR geometries to raster SRS if 
necessary)

Indeed, setting the spatial filter if the PDF targer srs is different than the 
native srs of OGR_DATASOURCE would be challenging, so I don't do that. In case 
reprojection is involved, no spatial filter is set, but just an intersection 
test after reprojection of each geometry. Not the most efficient, but achieves 
the purpose of discarding non intersecting geometries.

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120611/0a3b33a7/attachment.html>

From even.rouault at mines-paris.org  Mon Jun 11 12:54:19 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 11 Jun 2012 21:54:19 +0200
Subject: [gdal-dev] [NEW] Multi-threaded warping
In-Reply-To: <CA+TxYvNF1a5hyKoBiZVvV_8H_Tr3Y4QOfrXjG2BLpNs8joNT_Q@mail.gmail.com>
References: <201206102244.51268.even.rouault@mines-paris.org>
	<201206102352.44870.even.rouault@mines-paris.org>
	<CA+TxYvNF1a5hyKoBiZVvV_8H_Tr3Y4QOfrXjG2BLpNs8joNT_Q@mail.gmail.com>
Message-ID: <201206112154.19339.even.rouault@mines-paris.org>

Le lundi 11 juin 2012 00:22:36, Etienne Tourigny a ?crit :
> Even - good stuff!
> 
> Can you comment on the usage of openmp for multi-threading?  Is the
> multi-threading in gdal entirely based on pthreads (in linux)?

Yes, using the mutex, condition and thread API in cpl_multiproc.h that mimics 
pthreads. On Unix, there is almost a 1-1 mapping with pthread semantics (the 
main difference is that CPLCreateMutex() also takes the mutex). On Windows, 
pthread semantics is emulated using matching functions of the Windows API.

> 
> It's my understanding that openmp is much easier to manage but offers
> less fine-grained control - is that required for multi-thread warping?

I'm pretty much convinced that it could be written with OpenMP too, and my 
quick looking at its capabilities show that it should offer sufficient control. 
It is just that I'm not familiar enough with OpenMP. And, on a personal plan 
(others are free to disagree), I also prefer the explicit verbosity of 
threading API, rather than OpenMP directives.

From warmerdam at pobox.com  Mon Jun 11 14:45:42 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 11 Jun 2012 14:45:42 -0700
Subject: [gdal-dev] Accuracy of OGRLayer:SetSpatialFilter() API
In-Reply-To: <CA+_hAHe-GzEbTPHcpxbb1eoD0ed92_e_1mSgt==uXU47VMWrew@mail.gmail.com>
References: <CA+_hAHeLB7b10KtEKsSCg4ezwygcOO0vbu8ep-JV-GsVFC+zMw@mail.gmail.com>
	<CA+_hAHe-GzEbTPHcpxbb1eoD0ed92_e_1mSgt==uXU47VMWrew@mail.gmail.com>
Message-ID: <CA+YzLBdVc_N3fcs8bvUPqg4xukw8K9WoSZJBHrpNSi_dE0q_Uw@mail.gmail.com>

On Fri, Jun 8, 2012 at 3:28 PM, Kedar Deshpande
<kedardeshpande87 at gmail.com> wrote:
> Thanks Frank,
>
> Even if it returns the multiple feature, is there a specific order in which
> the features get retrieved on calling layer->GetNextFeature() ?
> For example, if the given spatial filter matched 4 features, when we iterate
> over the feature in a loop by calling? layer->GetNextFeature()?, is there a
> predefined order in which these feature are returned (such as best match
> first etc) ?

Kedar,

There is no externally defined ordering, though the implementation in
each driver will presumably have some implicit ordering.

On Mon, Jun 11, 2012 at 10:21 AM, Kedar Deshpande
<kedardeshpande87 at gmail.com> wrote:
> Is there a specific order in which the features get retrieved on calling
> layer->GetNextFeature() ?
> For example, if the given spatial filter matched 4 features, when we iterate
> over the feature in a loop by calling? layer->GetNextFeature()?, is there a
> predefined order in which these feature are returned (such as best match
> first etc) ?
>
> I am not using GEOS, is there another way to make it retrieve more accurate
> features ?

No, not really.  GEOS is the geometry library we use for this sort of thing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer

From kedardeshpande87 at gmail.com  Mon Jun 11 16:48:24 2012
From: kedardeshpande87 at gmail.com (kedardeshpande87)
Date: Mon, 11 Jun 2012 16:48:24 -0700 (PDT)
Subject: [gdal-dev] Accuracy of OGRLayer:SetSpatialFilter() API
In-Reply-To: <CA+YzLBdVc_N3fcs8bvUPqg4xukw8K9WoSZJBHrpNSi_dE0q_Uw@mail.gmail.com>
References: <CA+_hAHfvc27zwbaAd_M7wqEDKrbEcZtb_vY4PSA2Ju0_1tO8_g@mail.gmail.com>
	<CA+_hAHe-GzEbTPHcpxbb1eoD0ed92_e_1mSgt==uXU47VMWrew@mail.gmail.com>
	<CA+YzLBdVc_N3fcs8bvUPqg4xukw8K9WoSZJBHrpNSi_dE0q_Uw@mail.gmail.com>
Message-ID: <1339458504355-4980594.post@n6.nabble.com>


Frank Warmerdam wrote
> 
> There is no externally defined ordering, though the implementation in
> each driver will presumably have some implicit ordering.
> 
I am reading a TIGER shapefile provided by US Census Bureau:
...
ogr.RegisterAll();
DataSource ds = ogr.open("path/to/shapefil");
if(ds == null) {
      System.out.println("open failed");
      System.exit(1);
}
....
So, when I call ds.getDriver().getName(), it gives me "ESRI Shapefile".
For this driver, looks like the implementation is in the ogrshapelayer.cpp
file.
I went through the implementation of GetNetxtFeature(geometry) function, it
keeps looping over as long as features matching the criteria are found. From
the implementation, the order is not quite obvious to figure out. If
possible, can you please elaborate on this more (for ESRI Shapefile driver
implementation)?

In my application, I want to retrieve a single feature which matches the
criteria the closest.

Thanks,
Kedar

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Re-Accuracy-of-OGRLayer-SetSpatialFilter-API-tp4980063p4980594.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Mon Jun 11 17:13:58 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 11 Jun 2012 17:13:58 -0700
Subject: [gdal-dev] Accuracy of OGRLayer:SetSpatialFilter() API
In-Reply-To: <1339458504355-4980594.post@n6.nabble.com>
References: <CA+_hAHfvc27zwbaAd_M7wqEDKrbEcZtb_vY4PSA2Ju0_1tO8_g@mail.gmail.com>
	<CA+_hAHe-GzEbTPHcpxbb1eoD0ed92_e_1mSgt==uXU47VMWrew@mail.gmail.com>
	<CA+YzLBdVc_N3fcs8bvUPqg4xukw8K9WoSZJBHrpNSi_dE0q_Uw@mail.gmail.com>
	<1339458504355-4980594.post@n6.nabble.com>
Message-ID: <CA+YzLBfuqRStCUKQZfY16OTkK6KnPSJMahUO4SEjWgd3tf24Bw@mail.gmail.com>

On Mon, Jun 11, 2012 at 4:48 PM, kedardeshpande87
<kedardeshpande87 at gmail.com> wrote:
>
> Frank Warmerdam wrote
>>
>> There is no externally defined ordering, though the implementation in
>> each driver will presumably have some implicit ordering.
>>
> I am reading a TIGER shapefile provided by US Census Bureau:
> ...
> ogr.RegisterAll();
> DataSource ds = ogr.open("path/to/shapefil");
> if(ds == null) {
> ? ? ?System.out.println("open failed");
> ? ? ?System.exit(1);
> }
> ....
> So, when I call ds.getDriver().getName(), it gives me "ESRI Shapefile".
> For this driver, looks like the implementation is in the ogrshapelayer.cpp
> file.
> I went through the implementation of GetNetxtFeature(geometry) function, it
> keeps looping over as long as features matching the criteria are found. From
> the implementation, the order is not quite obvious to figure out. If
> possible, can you please elaborate on this more (for ESRI Shapefile driver
> implementation)?

Kedar,

I believe if there is a spatial index it will return them in spatial
index traversal order.  If not they will be returned ordered by
shapeid.  I could be wrong about the spatial index though - even in
that case it might return them ordered by shapeid, I'm not sure.

> In my application, I want to retrieve a single feature which matches the
> criteria the closest.

Then you will need to compute this as some sort of post process.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer

From ngarel at micromine.com  Mon Jun 11 22:38:03 2012
From: ngarel at micromine.com (ngarel)
Date: Mon, 11 Jun 2012 22:38:03 -0700 (PDT)
Subject: [gdal-dev] MSSQL Spatial and 3D issue
In-Reply-To: <CACALY+STi42iFO2cRQi3JVUGU3vHFtuNH59vkP+taegj9yLvcw@mail.gmail.com>
References: <125F609FE1635548AF411AFA01558DFA3EEF637F22@per-srv-em1>
	<CACALY+STi42iFO2cRQi3JVUGU3vHFtuNH59vkP+taegj9yLvcw@mail.gmail.com>
Message-ID: <1339479483071-4980634.post@n6.nabble.com>

Hi Tamas,

How is the progress going on that issue?

Please let me know.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-MSSQL-Spatial-and-3D-issue-tp4892552p4980634.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From kassies at gmail.com  Tue Jun 12 00:16:06 2012
From: kassies at gmail.com (Rutger)
Date: Tue, 12 Jun 2012 00:16:06 -0700 (PDT)
Subject: [gdal-dev] Reading a NetCDF file with python (not recognised as
 a supported dataset name
In-Reply-To: <CA+TxYvPN6zF-OOpnuiLJxv4rTkBU--b_-23ZiY-hzg6X2-Mm3w@mail.gmail.com>
References: <1339156848808-4979943.post@n6.nabble.com>
	<CA+TxYvNbv7gkpnVUa3fyGyNVS82owoW9tQ2vFZe79LXb4M-Yhg@mail.gmail.com>
	<1339188996038-4980067.post@n6.nabble.com>
	<CA+TxYvO8s1wpjT+JNcMtGWSJW4DJyaZ4eV=oi8OiBVJ06cpGkQ@mail.gmail.com>
	<1339401267077-4980313.post@n6.nabble.com>
	<CA+TxYvOY+enDJBff-oy=RvnJRThE8RcdvORXDdpgiiCqVTs9+g@mail.gmail.com>
	<1339424872757-4980406.post@n6.nabble.com>
	<CA+TxYvPN6zF-OOpnuiLJxv4rTkBU--b_-23ZiY-hzg6X2-Mm3w@mail.gmail.com>
Message-ID: <1339485366473-4980653.post@n6.nabble.com>

Hey,


Etienne Tourigny-3 wrote
> 
> did you install the gdal-python package? Your gdal python is probably
> referencing an older gdal build which does not include netcdf support.
> 
> There most probably is something wrong with your installation, because
> I can read both files fine in osgeo4w with gdal-1.9.1 - 32 bits
> 
> By any chance, are you running a 64-bit windows?
> 

I have tried it now on three different machines.
1. XP Win32, Python 2.7.3, GDAL 1.9.1
2. XP Win32, Python 2.7.2, GDAL 1.9.1
3. XP Win64, Python 2.7.3, GDAL 1.9.0

All installations are made with the builds from Tamas, i installed both the
'GDAL core' and the Python bindings, for example:
GDAL-1.9.0.win32-py2.7.msi
gdal-19-1500-core.msi

For the first machine i tried it both in the OSGeo4W shell and the standard
Python command line. The result is always like this:
/Python 2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v.1500 32 bit (Intel)]
on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import gdal
>>> print('gdal version:'+gdal.VersionInfo())
gdal version:1910
>>> driver = gdal.GetDriverByName('netCDF')
>>> print driver
None
>>> driver = gdal.GetDriverByName('GTiff')
>>> print driver
<osgeo.gdal.Driver; proxy of &lt;Swig Object of type 'GDALDriverShadow *' at
0x00D68140> >
>>>/

Im certainly using a recent gdal build, and as mentioned the command line
utilities have the netCDF driver correctly working. Ideed something is
probably wrong with my setup, 
It would be interesting if anyone else using the Windows builds from Tamas
can give the above commands a try.
I always pick the name of the driver from the 'code' column on the GDAL
formats page, i assume this is the right way to do.


Regards,
Rutger

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Reading-a-NetCDF-file-with-python-not-recognised-as-a-supported-dataset-name-tp4979943p4980653.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From fabian.schindler at eox.at  Tue Jun 12 00:58:52 2012
From: fabian.schindler at eox.at (Fabian Schindler)
Date: Tue, 12 Jun 2012 09:58:52 +0200
Subject: [gdal-dev] [NEW] Multi-threaded warping
In-Reply-To: <CA+TxYvNF1a5hyKoBiZVvV_8H_Tr3Y4QOfrXjG2BLpNs8joNT_Q@mail.gmail.com>
References: <201206102244.51268.even.rouault@mines-paris.org>
	<001a01cd4752$4784fa80$d68eef80$@vizexperts.com>
	<201206102352.44870.even.rouault@mines-paris.org>
	<CA+TxYvNF1a5hyKoBiZVvV_8H_Tr3Y4QOfrXjG2BLpNs8joNT_Q@mail.gmail.com>
Message-ID: <4FD6F6BC.1060404@eox.at>

Etienne,

The main advantage of OpenMP is that you can compile the code with 
(-fopenmp on gcc) or without OpenMP support but the output *should* stay 
the same. So you can produce code that is highly optimized for 
multithreaded environments (with little overhead) and still have 
backwards compatibility for systems that lack threads.

When using OpenMP, you give up control when and how you create thread 
contexts, this is managed at compile time (using the #pragma omp 
directives (which btw should stay the only interface to OpenMP)). You 
still have control of atomic sections, thread local/global variables and 
so on.

I hope this explained a little.

Regards,
Fabian

On 06/11/2012 12:22 AM, Etienne Tourigny wrote:
> Even - good stuff!
>
> Can you comment on the usage of openmp for multi-threading?  Is the
> multi-threading in gdal entirely based on pthreads (in linux)?
>
> It's my understanding that openmp is much easier to manage but offers
> less fine-grained control - is that required for multi-thread warping?
> Of course what works best is what is already working!
>
> Sorry for such a generic question, I did not really look into the
> specifics (other than a quick look at mutext handling).
>
> Regards,
> Etienne
>
> On Sun, Jun 10, 2012 at 6:52 PM, Even Rouault
> <even.rouault at mines-paris.org>  wrote:
>> Le dimanche 10 juin 2012 23:44:54, Yogesh Dahiya a ?crit :
>>> As far I know gdal1.9 has integrated opencl so we can parallelize by
>>> setting it right.
>>> So what exactly is your addition.
>>> By the way I tried opencl case and was able to get 16x over general case
>>> for lanczos for image of 16000*16000
>> (Replying to list too, as others might have the same question)
>>
>> Yes indeed, GDAL 1.9 can use OpenCL and this implementation is of course still
>> available.
>>
>> Unfortunately, AFAIK, there is not yet any working OpenSource OpenCL
>> implementation (and my experience with some proprietary OpenCL implementation
>> has not always been convincing, like the GUI being totally unresponsive during
>> the processing).
>>
>> The new multi-threaded implementation just uses traditional multi-threading
>> technics that are available on all platforms where GDAL can run.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From kassies at gmail.com  Tue Jun 12 02:08:21 2012
From: kassies at gmail.com (Rutger)
Date: Tue, 12 Jun 2012 02:08:21 -0700 (PDT)
Subject: [gdal-dev] reproject python numpy binary swath/lat/lon
In-Reply-To: <4FCCD947.1040000@gmail.com>
References: <4FC9004F.9070704@gmail.com> <4FCCD947.1040000@gmail.com>
Message-ID: <1339492101512-4980686.post@n6.nabble.com>

Hello David,

A while back i did some tests with GDAL geolocation arrays using MODIS swath
data. I found that specifying the "s_srs" tag when running gdalwarp gets rid
of the 'too many points' error, even if you already have a SRS in your VRT.
If you use gdalwarp, your target grid can be completely described by the
-t_srs -tr and -t switches. The Python equivalent of these are the
dataset.SetProjection() and dataset.SetGeoTransform(). Getting the input SRS
from only the coordinate values seems impossible to me, the SRS should be
either read from some metadata or specified by the user.

For me the geolocation arrays worked technically well, and very convenient.
However. i found the resulting image quality very disappointing (for my
specific MODIS case) compared to MRTswath and Pyresample. This might be due
to the irregular coordinate grids as a result of the swiping image sensor or
something like that. Maybe in different cases it would give good quality
results.

I ended up using the Pyresample module which is part from the Pytroll
project. See:
http://pytroll.org/index.html http://pytroll.org/index.html 
This worked great for my case.


Regards,
Rutger


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-reproject-python-numpy-binary-swath-lat-lon-tp4978609p4980686.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From s.r.kriishna at gmail.com  Tue Jun 12 04:21:41 2012
From: s.r.kriishna at gmail.com (SIVA RAMA KRISHNA)
Date: Tue, 12 Jun 2012 16:51:41 +0530
Subject: [gdal-dev] to find area of shapeFile
Message-ID: <CAP-zkzeUfHJ2NJSUFn8OcE=Qau40bRzgTUkjJuSAYR=8fXfx9w@mail.gmail.com>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120612/6cbc2b0b/attachment.html>

From rajjad at gmail.com  Tue Jun 12 04:31:44 2012
From: rajjad at gmail.com (Imran Rajjad)
Date: Tue, 12 Jun 2012 16:31:44 +0500
Subject: [gdal-dev] copy raster data in between file formats - Java
Message-ID: <CADz3VuU=iLicVHM3-ode7HYfFMo5Hu298D8+nsds9sKmnEd9fA@mail.gmail.com>

Dear List,

Have been trying to write raster from one file format e.g. BMP into a
tiff file which will eventually become a BIGTiff. The current output
is a grey image whereas the output should be RGB. The GeoTiFF is not
accepting bands for some reasons, To write a multiband geoTiff do we
require to add each band separately or is there something missing in
the below code snippet?

                gdal.AllRegister();				
		Driver driver = gdal.GetDriverByName("GTiff");
		Dataset dst = driver.Create("d:\\test.tif", 256, 256,3,gdalconst.GDT_Byte);
		Dataset src = gdal.Open("d:\\test.bmp");
	
		
		byte[] outputPixels = new byte[src.GetRasterXSize() *
src.GetRasterYSize() * src.getRasterCount()*Integer.SIZE];
		src.ReadRaster(0, 0, src.getRasterXSize(), src.getRasterYSize(),
src.getRasterXSize(), src.getRasterYSize(), gdalconst.GDT_Byte,
outputPixels, null, 0);
		dst.WriteRaster(0, 0, src.getRasterXSize(), src.getRasterYSize(),
src.getRasterXSize(), src.getRasterYSize(), gdalconst.GDT_Byte,
outputPixels, null, 0);
		dst.FlushCache();
		dst.delete();
		src.delete();


for testing purpose, currently only trying on small 256 x 256 image,
the gdalinfo of the source image is as :

Files: test.bmp
Size is 256, 256
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  256.0)
Upper Right (  256.0,    0.0)
Lower Right (  256.0,  256.0)
Center      (  128.0,  128.0)
Band 1 Block=256x1 Type=Byte, ColorInterp=Red
Band 2 Block=256x1 Type=Byte, ColorInterp=Green
Band 3 Block=256x1 Type=Byte, ColorInterp=Blue



regards,
-- 
I.R

From etourigny.dev at gmail.com  Tue Jun 12 04:48:19 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 12 Jun 2012 08:48:19 -0300
Subject: [gdal-dev] Reading a NetCDF file with python (not recognised as
 a supported dataset name
In-Reply-To: <1339485366473-4980653.post@n6.nabble.com>
References: <1339156848808-4979943.post@n6.nabble.com>
	<CA+TxYvNbv7gkpnVUa3fyGyNVS82owoW9tQ2vFZe79LXb4M-Yhg@mail.gmail.com>
	<1339188996038-4980067.post@n6.nabble.com>
	<CA+TxYvO8s1wpjT+JNcMtGWSJW4DJyaZ4eV=oi8OiBVJ06cpGkQ@mail.gmail.com>
	<1339401267077-4980313.post@n6.nabble.com>
	<CA+TxYvOY+enDJBff-oy=RvnJRThE8RcdvORXDdpgiiCqVTs9+g@mail.gmail.com>
	<1339424872757-4980406.post@n6.nabble.com>
	<CA+TxYvPN6zF-OOpnuiLJxv4rTkBU--b_-23ZiY-hzg6X2-Mm3w@mail.gmail.com>
	<1339485366473-4980653.post@n6.nabble.com>
Message-ID: <CA+TxYvOsLAfDbX41UUgBaRKiSTSMDOTYQSPj9kULS4n3kQ440g@mail.gmail.com>

* Perhaps * there is a conflict/mismatch between osgeo4w and Tamas's install?

As far as I know both packages include netcdf...

I have no idea, sorry...

Etienne

On Tue, Jun 12, 2012 at 4:16 AM, Rutger <kassies at gmail.com> wrote:
> Hey,
>
>
> Etienne Tourigny-3 wrote
>>
>> did you install the gdal-python package? Your gdal python is probably
>> referencing an older gdal build which does not include netcdf support.
>>
>> There most probably is something wrong with your installation, because
>> I can read both files fine in osgeo4w with gdal-1.9.1 - 32 bits
>>
>> By any chance, are you running a 64-bit windows?
>>
>
> I have tried it now on three different machines.
> 1. XP Win32, Python 2.7.3, GDAL 1.9.1
> 2. XP Win32, Python 2.7.2, GDAL 1.9.1
> 3. XP Win64, Python 2.7.3, GDAL 1.9.0
>
> All installations are made with the builds from Tamas, i installed both the
> 'GDAL core' and the Python bindings, for example:
> GDAL-1.9.0.win32-py2.7.msi
> gdal-19-1500-core.msi
>
> For the first machine i tried it both in the OSGeo4W shell and the standard
> Python command line. The result is always like this:
> /Python 2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v.1500 32 bit (Intel)]
> on win32
> Type "help", "copyright", "credits" or "license" for more information.
>>>> import gdal
>>>> print('gdal version:'+gdal.VersionInfo())
> gdal version:1910
>>>> driver = gdal.GetDriverByName('netCDF')
>>>> print driver
> None
>>>> driver = gdal.GetDriverByName('GTiff')
>>>> print driver
> <osgeo.gdal.Driver; proxy of &lt;Swig Object of type 'GDALDriverShadow *' at
> 0x00D68140> >
>>>>/
>
> Im certainly using a recent gdal build, and as mentioned the command line
> utilities have the netCDF driver correctly working. Ideed something is
> probably wrong with my setup,
> It would be interesting if anyone else using the Windows builds from Tamas
> can give the above commands a try.
> I always pick the name of the driver from the 'code' column on the GDAL
> formats page, i assume this is the right way to do.
>
>
> Regards,
> Rutger
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Reading-a-NetCDF-file-with-python-not-recognised-as-a-supported-dataset-name-tp4979943p4980653.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From etourigny.dev at gmail.com  Tue Jun 12 04:50:11 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 12 Jun 2012 08:50:11 -0300
Subject: [gdal-dev] reproject python numpy binary swath/lat/lon
In-Reply-To: <1339492101512-4980686.post@n6.nabble.com>
References: <4FC9004F.9070704@gmail.com> <4FCCD947.1040000@gmail.com>
	<1339492101512-4980686.post@n6.nabble.com>
Message-ID: <CA+TxYvN8TWvvc8H0KHCUuQRVySRbfEveA-SSpxo-Y+_ypatPTQ@mail.gmail.com>

To use geolocation arrays with gdalwarp you probably need to add the
-geoloc argument

Etienne

On Tue, Jun 12, 2012 at 6:08 AM, Rutger <kassies at gmail.com> wrote:
> Hello David,
>
> A while back i did some tests with GDAL geolocation arrays using MODIS swath
> data. I found that specifying the "s_srs" tag when running gdalwarp gets rid
> of the 'too many points' error, even if you already have a SRS in your VRT.
> If you use gdalwarp, your target grid can be completely described by the
> -t_srs -tr and -t switches. The Python equivalent of these are the
> dataset.SetProjection() and dataset.SetGeoTransform(). Getting the input SRS
> from only the coordinate values seems impossible to me, the SRS should be
> either read from some metadata or specified by the user.
>
> For me the geolocation arrays worked technically well, and very convenient.
> However. i found the resulting image quality very disappointing (for my
> specific MODIS case) compared to MRTswath and Pyresample. This might be due
> to the irregular coordinate grids as a result of the swiping image sensor or
> something like that. Maybe in different cases it would give good quality
> results.
>
> I ended up using the Pyresample module which is part from the Pytroll
> project. See:
> http://pytroll.org/index.html http://pytroll.org/index.html
> This worked great for my case.
>
>
> Regards,
> Rutger
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-reproject-python-numpy-binary-swath-lat-lon-tp4978609p4980686.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From etourigny.dev at gmail.com  Tue Jun 12 05:01:32 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 12 Jun 2012 09:01:32 -0300
Subject: [gdal-dev] copy raster data in between file formats - Java
In-Reply-To: <CADz3VuU=iLicVHM3-ode7HYfFMo5Hu298D8+nsds9sKmnEd9fA@mail.gmail.com>
References: <CADz3VuU=iLicVHM3-ode7HYfFMo5Hu298D8+nsds9sKmnEd9fA@mail.gmail.com>
Message-ID: <CA+TxYvNh6_7NZv_UH2MGukvTwBJh2eHeweJnMvBN3jA2BCg-mg@mail.gmail.com>

Not sure about the java bindings - but why don't you use the
CreateCopy() function, which will take care of everything for you?

I'd bet the error is because you didn't include the "band_list" parameter.

Etienne

On Tue, Jun 12, 2012 at 8:31 AM, Imran Rajjad <rajjad at gmail.com> wrote:
> Dear List,
>
> Have been trying to write raster from one file format e.g. BMP into a
> tiff file which will eventually become a BIGTiff. The current output
> is a grey image whereas the output should be RGB. The GeoTiFF is not
> accepting bands for some reasons, To write a multiband geoTiff do we
> require to add each band separately or is there something missing in
> the below code snippet?
>
> ? ? ? ? ? ? ? ?gdal.AllRegister();
> ? ? ? ? ? ? ? ?Driver driver = gdal.GetDriverByName("GTiff");
> ? ? ? ? ? ? ? ?Dataset dst = driver.Create("d:\\test.tif", 256, 256,3,gdalconst.GDT_Byte);
> ? ? ? ? ? ? ? ?Dataset src = gdal.Open("d:\\test.bmp");
>
>
> ? ? ? ? ? ? ? ?byte[] outputPixels = new byte[src.GetRasterXSize() *
> src.GetRasterYSize() * src.getRasterCount()*Integer.SIZE];
> ? ? ? ? ? ? ? ?src.ReadRaster(0, 0, src.getRasterXSize(), src.getRasterYSize(),
> src.getRasterXSize(), src.getRasterYSize(), gdalconst.GDT_Byte,
> outputPixels, null, 0);
> ? ? ? ? ? ? ? ?dst.WriteRaster(0, 0, src.getRasterXSize(), src.getRasterYSize(),
> src.getRasterXSize(), src.getRasterYSize(), gdalconst.GDT_Byte,
> outputPixels, null, 0);
> ? ? ? ? ? ? ? ?dst.FlushCache();
> ? ? ? ? ? ? ? ?dst.delete();
> ? ? ? ? ? ? ? ?src.delete();
>
>
> for testing purpose, currently only trying on small 256 x 256 image,
> the gdalinfo of the source image is as :
>
> Files: test.bmp
> Size is 256, 256
> Coordinate System is `'
> Corner Coordinates:
> Upper Left ?( ? ?0.0, ? ?0.0)
> Lower Left ?( ? ?0.0, ?256.0)
> Upper Right ( ?256.0, ? ?0.0)
> Lower Right ( ?256.0, ?256.0)
> Center ? ? ?( ?128.0, ?128.0)
> Band 1 Block=256x1 Type=Byte, ColorInterp=Red
> Band 2 Block=256x1 Type=Byte, ColorInterp=Green
> Band 3 Block=256x1 Type=Byte, ColorInterp=Blue
>
>
>
> regards,
> --
> I.R
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From rajjad at gmail.com  Tue Jun 12 05:04:19 2012
From: rajjad at gmail.com (Imran Rajjad)
Date: Tue, 12 Jun 2012 17:04:19 +0500
Subject: [gdal-dev] copy raster data in between file formats - Java
In-Reply-To: <CA+TxYvNh6_7NZv_UH2MGukvTwBJh2eHeweJnMvBN3jA2BCg-mg@mail.gmail.com>
References: <CADz3VuU=iLicVHM3-ode7HYfFMo5Hu298D8+nsds9sKmnEd9fA@mail.gmail.com>
	<CA+TxYvNh6_7NZv_UH2MGukvTwBJh2eHeweJnMvBN3jA2BCg-mg@mail.gmail.com>
Message-ID: <CADz3VuUQ4nMyb16JnmkASy0=m4HRfEstKjNOzmC1KVSeOrOvQQ@mail.gmail.com>

Hi,

well this kind of operation is well supported under JAI, however it
has the limitations of writing a tiff file under 4GB thats why trying
out GDAL. Anyway checking out
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java/apps/GDALTestIO.java

regards,
Imran

On Tue, Jun 12, 2012 at 5:01 PM, Etienne Tourigny
<etourigny.dev at gmail.com> wrote:
> Not sure about the java bindings - but why don't you use the
> CreateCopy() function, which will take care of everything for you?
>
> I'd bet the error is because you didn't include the "band_list" parameter.
>
> Etienne
>
> On Tue, Jun 12, 2012 at 8:31 AM, Imran Rajjad <rajjad at gmail.com> wrote:
>> Dear List,
>>
>> Have been trying to write raster from one file format e.g. BMP into a
>> tiff file which will eventually become a BIGTiff. The current output
>> is a grey image whereas the output should be RGB. The GeoTiFF is not
>> accepting bands for some reasons, To write a multiband geoTiff do we
>> require to add each band separately or is there something missing in
>> the below code snippet?
>>
>> ? ? ? ? ? ? ? ?gdal.AllRegister();
>> ? ? ? ? ? ? ? ?Driver driver = gdal.GetDriverByName("GTiff");
>> ? ? ? ? ? ? ? ?Dataset dst = driver.Create("d:\\test.tif", 256, 256,3,gdalconst.GDT_Byte);
>> ? ? ? ? ? ? ? ?Dataset src = gdal.Open("d:\\test.bmp");
>>
>>
>> ? ? ? ? ? ? ? ?byte[] outputPixels = new byte[src.GetRasterXSize() *
>> src.GetRasterYSize() * src.getRasterCount()*Integer.SIZE];
>> ? ? ? ? ? ? ? ?src.ReadRaster(0, 0, src.getRasterXSize(), src.getRasterYSize(),
>> src.getRasterXSize(), src.getRasterYSize(), gdalconst.GDT_Byte,
>> outputPixels, null, 0);
>> ? ? ? ? ? ? ? ?dst.WriteRaster(0, 0, src.getRasterXSize(), src.getRasterYSize(),
>> src.getRasterXSize(), src.getRasterYSize(), gdalconst.GDT_Byte,
>> outputPixels, null, 0);
>> ? ? ? ? ? ? ? ?dst.FlushCache();
>> ? ? ? ? ? ? ? ?dst.delete();
>> ? ? ? ? ? ? ? ?src.delete();
>>
>>
>> for testing purpose, currently only trying on small 256 x 256 image,
>> the gdalinfo of the source image is as :
>>
>> Files: test.bmp
>> Size is 256, 256
>> Coordinate System is `'
>> Corner Coordinates:
>> Upper Left ?( ? ?0.0, ? ?0.0)
>> Lower Left ?( ? ?0.0, ?256.0)
>> Upper Right ( ?256.0, ? ?0.0)
>> Lower Right ( ?256.0, ?256.0)
>> Center ? ? ?( ?128.0, ?128.0)
>> Band 1 Block=256x1 Type=Byte, ColorInterp=Red
>> Band 2 Block=256x1 Type=Byte, ColorInterp=Green
>> Band 3 Block=256x1 Type=Byte, ColorInterp=Blue
>>
>>
>>
>> regards,
>> --
>> I.R
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
I.R

From kassies at gmail.com  Tue Jun 12 05:29:45 2012
From: kassies at gmail.com (Rutger)
Date: Tue, 12 Jun 2012 05:29:45 -0700 (PDT)
Subject: [gdal-dev] reproject python numpy binary swath/lat/lon
In-Reply-To: <CA+TxYvN8TWvvc8H0KHCUuQRVySRbfEveA-SSpxo-Y+_ypatPTQ@mail.gmail.com>
References: <4FC9004F.9070704@gmail.com> <4FCCD947.1040000@gmail.com>
	<1339492101512-4980686.post@n6.nabble.com>
	<CA+TxYvN8TWvvc8H0KHCUuQRVySRbfEveA-SSpxo-Y+_ypatPTQ@mail.gmail.com>
Message-ID: <1339504185991-4980774.post@n6.nabble.com>


Etienne Tourigny-3 wrote
> 
> To use geolocation arrays with gdalwarp you probably need to add the
> -geoloc argument
> 

Its probably good to do so. I think however that if you use the VRT method
as shown at the link in the opening post, the "<Metadata
domain="GEOLOCATION">" part already takes care of this. Adding or removing
-geoloc doesnt make a difference when i use the VRT method, both work.

When using for example HDF files which have a lat/lon band its probably
mandatory, since its not obvious that you want them to be used for
geolocation.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-reproject-python-numpy-binary-swath-lat-lon-tp4978609p4980774.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From lhomme.xavier at gmail.com  Tue Jun 12 05:38:05 2012
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Tue, 12 Jun 2012 14:38:05 +0200
Subject: [gdal-dev] [WFS Driver] Http Error Code 414
Message-ID: <CACqzBMyFjARzKbtccGA2ciQ2CoTbA7JYMrLR+UN=++FtoODbrw@mail.gmail.com>

Hello

 I'm requesting a WFS source with a very long request. The URI generated by
the WFS driver is very long (more than 2048). In return I' ve got an HTTP
error code 414.
 OGRWFSDataSource::HTTPFetch function should be protected against very long
URI and switch between a GET request to a POST request.

best regards
xavier
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120612/4e2e4a24/attachment.html>

From kedardeshpande87 at gmail.com  Tue Jun 12 10:44:15 2012
From: kedardeshpande87 at gmail.com (kedardeshpande87)
Date: Tue, 12 Jun 2012 10:44:15 -0700 (PDT)
Subject: [gdal-dev] Accuracy of OGRLayer:SetSpatialFilter() API
In-Reply-To: <CA+YzLBfuqRStCUKQZfY16OTkK6KnPSJMahUO4SEjWgd3tf24Bw@mail.gmail.com>
References: <CA+_hAHfvc27zwbaAd_M7wqEDKrbEcZtb_vY4PSA2Ju0_1tO8_g@mail.gmail.com>
	<CA+_hAHe-GzEbTPHcpxbb1eoD0ed92_e_1mSgt==uXU47VMWrew@mail.gmail.com>
	<CA+YzLBdVc_N3fcs8bvUPqg4xukw8K9WoSZJBHrpNSi_dE0q_Uw@mail.gmail.com>
	<1339458504355-4980594.post@n6.nabble.com>
	<CA+YzLBfuqRStCUKQZfY16OTkK6KnPSJMahUO4SEjWgd3tf24Bw@mail.gmail.com>
Message-ID: <1339523055197-4980907.post@n6.nabble.com>

Frank,

Thank you very much for the reply.

I am still really curious about what could be the reason that it returns
multiple features for a single point.
The code for filtering which I have written is like this : 
...
OGRDataSource *ds = OGRSFDriverRegistrar::Open("shapefile_path", FALSE);
OGRLayer *layer = ds->GetLayer(0);
OGRGeometry *g = new OGRPoint(longitude, latitude);
layer->SetSpatialFilter(g);
OGRFeature *feature = NULL;

while((feature = layer->GetNextFeature()) != NULL) {
       // do something with feature ...
}

As per the API doc, it says : "it is guaranteed that all features who's
envelope (as returned by OGRGeometry::getEnvelope()) overlaps the envelope
of the spatial filter will be returned."

I checked the envelope the OGRPoint geometry I have created. This envelope
is also a single point (minX, maxX are same and minY, maxY are same). So,
how is it possible that multiple features overlap on the same point ?  

For the same shapefile, I checked results by using some other libraries as
well. Those libraries return a single zipcode. So I am guessing the
shapefile which I am using does not have overlapping data.

Could it be that the vector math done while calculating the intersection of
filter-geometry and features has some limitations?
Could you please give me some idea about this ?

Thanks,
Kedar

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Re-Accuracy-of-OGRLayer-SetSpatialFilter-API-tp4980063p4980907.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Tue Jun 12 11:14:31 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 12 Jun 2012 20:14:31 +0200
Subject: [gdal-dev] copy raster data in between file formats - Java
In-Reply-To: <CADz3VuU=iLicVHM3-ode7HYfFMo5Hu298D8+nsds9sKmnEd9fA@mail.gmail.com>
References: <CADz3VuU=iLicVHM3-ode7HYfFMo5Hu298D8+nsds9sKmnEd9fA@mail.gmail.com>
Message-ID: <201206122014.32202.even.rouault@mines-paris.org>

Le mardi 12 juin 2012 13:31:44, Imran Rajjad a ?crit :
> Dear List,
> 
> Have been trying to write raster from one file format e.g. BMP into a
> tiff file which will eventually become a BIGTiff. The current output
> is a grey image whereas the output should be RGB. The GeoTiFF is not
> accepting bands for some reasons, To write a multiband geoTiff do we
> require to add each band separately or is there something missing in
> the below code snippet?
> 
>                 gdal.AllRegister();
> 		Driver driver = gdal.GetDriverByName("GTiff");
> 		Dataset dst = driver.Create("d:\\test.tif", 256,
> 256,3,gdalconst.GDT_Byte); Dataset src = gdal.Open("d:\\test.bmp");
> 
> 
> 		byte[] outputPixels = new byte[src.GetRasterXSize() *
> src.GetRasterYSize() * src.getRasterCount()*Integer.SIZE];
> 		src.ReadRaster(0, 0, src.getRasterXSize(), src.getRasterYSize(),
> src.getRasterXSize(), src.getRasterYSize(), gdalconst.GDT_Byte,
> outputPixels, null, 0);
> 		dst.WriteRaster(0, 0, src.getRasterXSize(), src.getRasterYSize(),
> src.getRasterXSize(), src.getRasterYSize(), gdalconst.GDT_Byte,
> outputPixels, null, 0);
> 		dst.FlushCache();
> 		dst.delete();
> 		src.delete();
> 

I've just tested the above snippet with a 256x256 image and it works as 
expected. Not sure why you have a problem. Do you use a recent GDAL version, 
let's say 1.9 ?

From even.rouault at mines-paris.org  Tue Jun 12 11:16:31 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 12 Jun 2012 20:16:31 +0200
Subject: [gdal-dev] [WFS Driver] Http Error Code 414
In-Reply-To: <CACqzBMyFjARzKbtccGA2ciQ2CoTbA7JYMrLR+UN=++FtoODbrw@mail.gmail.com>
References: <CACqzBMyFjARzKbtccGA2ciQ2CoTbA7JYMrLR+UN=++FtoODbrw@mail.gmail.com>
Message-ID: <201206122016.31676.even.rouault@mines-paris.org>

Le mardi 12 juin 2012 14:38:05, xavier lhomme a ?crit :
> Hello
> 
>  I'm requesting a WFS source with a very long request. The URI generated by
> the WFS driver is very long (more than 2048). In return I' ve got an HTTP
> error code 414.
>  OGRWFSDataSource::HTTPFetch function should be protected against very long
> URI and switch between a GET request to a POST request.

Patch welcome and public server for testing :-)

> 
> best regards
> xavier

From dhoese at gmail.com  Tue Jun 12 11:37:40 2012
From: dhoese at gmail.com (David Hoese)
Date: Tue, 12 Jun 2012 13:37:40 -0500
Subject: [gdal-dev] reproject python numpy binary swath/lat/lon
In-Reply-To: <mailman.1789.1339502661.1116.gdal-dev@lists.osgeo.org>
References: <mailman.1789.1339502661.1116.gdal-dev@lists.osgeo.org>
Message-ID: <4FD78C74.6050107@gmail.com>

Rutger,

Thanks for the reply.  I tried the s_srs tag and it still didn't help.  
I also tried using the -geoloc flag which I had tried earlier too and 
still get the 441 out of 441 failed to transform error.  I have tried 
PyTroll, but there KDTree algorithm seems to be too slow for the amount 
of data I'm using (not sure why), I have contacted them in the past.

I'm attempting to project satellite data to an AWIPS grid.  Assuming I 
have the grid defined correctly with proj4 parameters, I've been using 
"+proj=latlong +datum=wgs84" as my s_srs parameters.  Does that sound 
correct for satellite data?  So my command line call (still for testing) 
becomes:

gdalwarp -s_srs "+proj=latlong +datum=wgs84" \
-te 59.844 -123.044 14.335 -65.091 \
-ts 5120 5120 \
-t_srs "+proj=lcc +lon_1=-95.000  +lon_0=-113.133 +lat_2=25.0001 
+lat_1=24.9999 +lat_0=16.369" \
-geoloc -of GTIFF \
image.vrt out.tif

The output grid is 5120x5120 and I wasn't sure if -te was lat/lon 
points, but that's what I used.  -te has lat/lon of upper left pixel of 
the grid and lat/lon of the lower right pixel of the grid.  Does any of 
this look correct?  Thanks for the help.

-Dave

On 6/12/12 7:04 AM, gdal-dev-request at lists.osgeo.org wrote:
> Message: 2
> Date: Tue, 12 Jun 2012 02:08:21 -0700 (PDT)
> From: Rutger<kassies at gmail.com>
> To:gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] reproject python numpy binary swath/lat/lon
> Message-ID:<1339492101512-4980686.post at n6.nabble.com>
> Content-Type: text/plain; charset=us-ascii
>
> Hello David,
>
> A while back i did some tests with GDAL geolocation arrays using MODIS swath
> data. I found that specifying the "s_srs" tag when running gdalwarp gets rid
> of the 'too many points' error, even if you already have a SRS in your VRT.
> If you use gdalwarp, your target grid can be completely described by the
> -t_srs -tr and -t switches. The Python equivalent of these are the
> dataset.SetProjection() and dataset.SetGeoTransform(). Getting the input SRS
> from only the coordinate values seems impossible to me, the SRS should be
> either read from some metadata or specified by the user.
>
> For me the geolocation arrays worked technically well, and very convenient.
> However. i found the resulting image quality very disappointing (for my
> specific MODIS case) compared to MRTswath and Pyresample. This might be due
> to the irregular coordinate grids as a result of the swiping image sensor or
> something like that. Maybe in different cases it would give good quality
> results.
>
> I ended up using the Pyresample module which is part from the Pytroll
> project. See:
> http://pytroll.org/index.html  http://pytroll.org/index.html
> This worked great for my case.
>
>
> Regards,
> Rutger


From jluis at ualg.pt  Tue Jun 12 11:59:39 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue, 12 Jun 2012 19:59:39 +0100
Subject: [gdal-dev] reproject python numpy binary swath/lat/lon
In-Reply-To: <4FD78C74.6050107@gmail.com>
References: <mailman.1789.1339502661.1116.gdal-dev@lists.osgeo.org>
	<4FD78C74.6050107@gmail.com>
Message-ID: <4FD7919B.3010600@ualg.pt>

David,

Would this help?

https://sites.google.com/site/mironehowtos/satellite/import-a-modis-l2-sst-hdf-grid

I do the projection using the geolocation arrays and an internal 
interpolation using a minimum curvature algorithm. Works pretty nicely 
with MODIS L2 SSTs and chlorophyll

Joaquim

> Rutger,
>
> Thanks for the reply.  I tried the s_srs tag and it still didn't 
> help.  I also tried using the -geoloc flag which I had tried earlier 
> too and still get the 441 out of 441 failed to transform error.  I 
> have tried PyTroll, but there KDTree algorithm seems to be too slow 
> for the amount of data I'm using (not sure why), I have contacted them 
> in the past.
>
> I'm attempting to project satellite data to an AWIPS grid.  Assuming I 
> have the grid defined correctly with proj4 parameters, I've been using 
> "+proj=latlong +datum=wgs84" as my s_srs parameters.  Does that sound 
> correct for satellite data?  So my command line call (still for 
> testing) becomes:
>
> gdalwarp -s_srs "+proj=latlong +datum=wgs84" \
> -te 59.844 -123.044 14.335 -65.091 \
> -ts 5120 5120 \
> -t_srs "+proj=lcc +lon_1=-95.000  +lon_0=-113.133 +lat_2=25.0001 
> +lat_1=24.9999 +lat_0=16.369" \
> -geoloc -of GTIFF \
> image.vrt out.tif
>
> The output grid is 5120x5120 and I wasn't sure if -te was lat/lon 
> points, but that's what I used.  -te has lat/lon of upper left pixel 
> of the grid and lat/lon of the lower right pixel of the grid.  Does 
> any of this look correct?  Thanks for the help.
>
> -Dave
>
> On 6/12/12 7:04 AM, gdal-dev-request at lists.osgeo.org wrote:
>> Message: 2
>> Date: Tue, 12 Jun 2012 02:08:21 -0700 (PDT)
>> From: Rutger<kassies at gmail.com>
>> To:gdal-dev at lists.osgeo.org
>> Subject: Re: [gdal-dev] reproject python numpy binary swath/lat/lon
>> Message-ID:<1339492101512-4980686.post at n6.nabble.com>
>> Content-Type: text/plain; charset=us-ascii
>>
>> Hello David,
>>
>> A while back i did some tests with GDAL geolocation arrays using 
>> MODIS swath
>> data. I found that specifying the "s_srs" tag when running gdalwarp 
>> gets rid
>> of the 'too many points' error, even if you already have a SRS in 
>> your VRT.
>> If you use gdalwarp, your target grid can be completely described by the
>> -t_srs -tr and -t switches. The Python equivalent of these are the
>> dataset.SetProjection() and dataset.SetGeoTransform(). Getting the 
>> input SRS
>> from only the coordinate values seems impossible to me, the SRS 
>> should be
>> either read from some metadata or specified by the user.
>>
>> For me the geolocation arrays worked technically well, and very 
>> convenient.
>> However. i found the resulting image quality very disappointing (for my
>> specific MODIS case) compared to MRTswath and Pyresample. This might 
>> be due
>> to the irregular coordinate grids as a result of the swiping image 
>> sensor or
>> something like that. Maybe in different cases it would give good quality
>> results.
>>
>> I ended up using the Pyresample module which is part from the Pytroll
>> project. See:
>> http://pytroll.org/index.html  http://pytroll.org/index.html
>> This worked great for my case.
>>
>>
>> Regards,
>> Rutger
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From dbakeman at comcast.net  Tue Jun 12 13:07:55 2012
From: dbakeman at comcast.net (David J. Bakeman)
Date: Tue, 12 Jun 2012 13:07:55 -0700
Subject: [gdal-dev] Accuracy of OGRLayer:SetSpatialFilter() API
In-Reply-To: <CA+_hAHfsaM-PVEn5nV_qAxwSEP0h3RVn1MX=EA9dTHMV6Cs4OQ@mail.gmail.com>
References: <CA+_hAHfvc27zwbaAd_M7wqEDKrbEcZtb_vY4PSA2Ju0_1tO8_g@mail.gmail.com>	<CA+_hAHe-GzEbTPHcpxbb1eoD0ed92_e_1mSgt==uXU47VMWrew@mail.gmail.com>	<CA+YzLBdVc_N3fcs8bvUPqg4xukw8K9WoSZJBHrpNSi_dE0q_Uw@mail.gmail.com>	<1339458504355-4980594.post@n6.nabble.com>	<CA+YzLBfuqRStCUKQZfY16OTkK6KnPSJMahUO4SEjWgd3tf24Bw@mail.gmail.com>	<1339523055197-4980907.post@n6.nabble.com>	<4FD78BB2.6040705@comcast.net>
	<CA+_hAHfsaM-PVEn5nV_qAxwSEP0h3RVn1MX=EA9dTHMV6Cs4OQ@mail.gmail.com>
Message-ID: <4FD7A19B.6010307@comcast.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120612/dc8e4000/attachment.html>

From warmerdam at pobox.com  Tue Jun 12 13:36:23 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 12 Jun 2012 13:36:23 -0700
Subject: [gdal-dev] Accuracy of OGRLayer:SetSpatialFilter() API
In-Reply-To: <1339523055197-4980907.post@n6.nabble.com>
References: <CA+_hAHfvc27zwbaAd_M7wqEDKrbEcZtb_vY4PSA2Ju0_1tO8_g@mail.gmail.com>
	<CA+_hAHe-GzEbTPHcpxbb1eoD0ed92_e_1mSgt==uXU47VMWrew@mail.gmail.com>
	<CA+YzLBdVc_N3fcs8bvUPqg4xukw8K9WoSZJBHrpNSi_dE0q_Uw@mail.gmail.com>
	<1339458504355-4980594.post@n6.nabble.com>
	<CA+YzLBfuqRStCUKQZfY16OTkK6KnPSJMahUO4SEjWgd3tf24Bw@mail.gmail.com>
	<1339523055197-4980907.post@n6.nabble.com>
Message-ID: <CA+YzLBcAeO_0TTcFDSLgeGCq7dCj_EHVLVtZVXrSejTH8kCyAQ@mail.gmail.com>

On Tue, Jun 12, 2012 at 10:44 AM, kedardeshpande87
<kedardeshpande87 at gmail.com> wrote:
> I checked the envelope the OGRPoint geometry I have created. This envelope
> is also a single point (minX, maxX are same and minY, maxY are same). So,
> how is it possible that multiple features overlap on the same point ?

Kedard,

Because the *envelope of the polygons* all overlap the point. The envelopes
(ie. bounding rectangles) of the zip code features will overlap substantially so
clearly there will be points which will intersect the envelopes of multiple
polygons.

> For the same shapefile, I checked results by using some other libraries as
> well. Those libraries return a single zipcode. So I am guessing the
> shapefile which I am using does not have overlapping data.

That guess would seem to be based on very faulty intuition.

> Could it be that the vector math done while calculating the intersection of
> filter-geometry and features has some limitations?

Yes, I think that has been covered.  Without GEOS it is just
envelope to envelope comparisons.

I think this will be my last response on this topic since we seem
to be repeating ourselves.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer

From kedardeshpande87 at gmail.com  Tue Jun 12 16:35:55 2012
From: kedardeshpande87 at gmail.com (kedardeshpande87)
Date: Tue, 12 Jun 2012 16:35:55 -0700 (PDT)
Subject: [gdal-dev] Accuracy of OGRLayer:SetSpatialFilter() API
In-Reply-To: <4FD7A19B.6010307@comcast.net>
References: <CA+_hAHfvc27zwbaAd_M7wqEDKrbEcZtb_vY4PSA2Ju0_1tO8_g@mail.gmail.com>
	<CA+_hAHe-GzEbTPHcpxbb1eoD0ed92_e_1mSgt==uXU47VMWrew@mail.gmail.com>
	<CA+YzLBdVc_N3fcs8bvUPqg4xukw8K9WoSZJBHrpNSi_dE0q_Uw@mail.gmail.com>
	<1339458504355-4980594.post@n6.nabble.com>
	<CA+YzLBfuqRStCUKQZfY16OTkK6KnPSJMahUO4SEjWgd3tf24Bw@mail.gmail.com>
	<1339523055197-4980907.post@n6.nabble.com>
	<4FD7A19B.6010307@comcast.net>
Message-ID: <1339544155334-4980987.post@n6.nabble.com>

Thanks dbnakuru,

quote author="dbnakuru">
&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01
Transitional//EN&quot;&gt;
Otherwise what you can do is test to see if your point is in any of the
polygons returned by OGR.&nbsp; So let OGR do the initial checks then grab
the vertices yourself and run a point in polygon test.&nbsp; There are
multiple examples of the crossings test available on the web search for
code point in polygon to see a bunch in google.&nbsp; Just pick the one
that's appropriate for whatever language you're using. 


I am writing the application in Java using the Java bindings. Thus, as you
suggested, for the inputs for which I get multiple features, for each
feature, I will run the point-in-polygon test by retrieving all its ring
points and checking the input point if it falls inside the polygon ring of
the feature. For this, I am trying to call
feature.GetGeometryRef().getPoints(). This method is returning me null.
Also, getPointCount() is returning me 0.
When I write the same thing in C++, by doing : 

OGRGeometry *geom = feature->GetGeometryRef();
OGRLinearRing *extRing = ((OGRPolygon *) geom)->getExteriorRing();
// ....extRing->getNumPoints() ... etc
This returns me valid number of points and their coordinates.
In Java, there is no explicit api for different geometry types. How do I
achieve this using the Java api ?

Am I going in the right direction to achieve this?

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Re-Accuracy-of-OGRLayer-SetSpatialFilter-API-tp4980063p4980987.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From rajjad at gmail.com  Tue Jun 12 21:47:29 2012
From: rajjad at gmail.com (Imran Rajjad)
Date: Wed, 13 Jun 2012 09:47:29 +0500
Subject: [gdal-dev] copy raster data in between file formats - Java
In-Reply-To: <201206122014.32202.even.rouault@mines-paris.org>
References: <CADz3VuU=iLicVHM3-ode7HYfFMo5Hu298D8+nsds9sKmnEd9fA@mail.gmail.com>
	<201206122014.32202.even.rouault@mines-paris.org>
Message-ID: <CADz3VuW=qNwSxXPd9O7CDcujYoSH9uQn-8gJZJWHiBdwp8-QtQ@mail.gmail.com>

Hi Even,

I have 1.8, and I was getting a grey image earlier but I guess by
adding the Integer.SIZE in the byte array size made it work, but
honestly I am not sure how its working now, further I was wondering if
GDAL can leverage from JAI`s DiskMemImage class, because if I have to
write a bigtiff as big as 12GB, Its impossible to work with Memory
Raster.

regards,
Imran

On Tue, Jun 12, 2012 at 11:14 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le mardi 12 juin 2012 13:31:44, Imran Rajjad a ?crit :
>> Dear List,
>>
>> Have been trying to write raster from one file format e.g. BMP into a
>> tiff file which will eventually become a BIGTiff. The current output
>> is a grey image whereas the output should be RGB. The GeoTiFF is not
>> accepting bands for some reasons, To write a multiband geoTiff do we
>> require to add each band separately or is there something missing in
>> the below code snippet?
>>
>> ? ? ? ? ? ? ? ? gdal.AllRegister();
>> ? ? ? ? ? ? ? Driver driver = gdal.GetDriverByName("GTiff");
>> ? ? ? ? ? ? ? Dataset dst = driver.Create("d:\\test.tif", 256,
>> 256,3,gdalconst.GDT_Byte); Dataset src = gdal.Open("d:\\test.bmp");
>>
>>
>> ? ? ? ? ? ? ? byte[] outputPixels = new byte[src.GetRasterXSize() *
>> src.GetRasterYSize() * src.getRasterCount()*Integer.SIZE];
>> ? ? ? ? ? ? ? src.ReadRaster(0, 0, src.getRasterXSize(), src.getRasterYSize(),
>> src.getRasterXSize(), src.getRasterYSize(), gdalconst.GDT_Byte,
>> outputPixels, null, 0);
>> ? ? ? ? ? ? ? dst.WriteRaster(0, 0, src.getRasterXSize(), src.getRasterYSize(),
>> src.getRasterXSize(), src.getRasterYSize(), gdalconst.GDT_Byte,
>> outputPixels, null, 0);
>> ? ? ? ? ? ? ? dst.FlushCache();
>> ? ? ? ? ? ? ? dst.delete();
>> ? ? ? ? ? ? ? src.delete();
>>
>
> I've just tested the above snippet with a 256x256 image and it works as
> expected. Not sure why you have a problem. Do you use a recent GDAL version,
> let's say 1.9 ?



-- 
I.R

From fjitiaux at gmail.com  Wed Jun 13 00:25:39 2012
From: fjitiaux at gmail.com (Florent JITIAUX)
Date: Wed, 13 Jun 2012 09:25:39 +0200
Subject: [gdal-dev] copy raster data in between file formats - Java
In-Reply-To: <CADz3VuW=qNwSxXPd9O7CDcujYoSH9uQn-8gJZJWHiBdwp8-QtQ@mail.gmail.com>
References: <CADz3VuU=iLicVHM3-ode7HYfFMo5Hu298D8+nsds9sKmnEd9fA@mail.gmail.com>
	<201206122014.32202.even.rouault@mines-paris.org>
	<CADz3VuW=qNwSxXPd9O7CDcujYoSH9uQn-8gJZJWHiBdwp8-QtQ@mail.gmail.com>
Message-ID: <CAL81ghCTLfUNmM+hPOq4M5uMqF0GHH+1mwBg-YTwfDZt3ZrNiQ@mail.gmail.com>

Hi all,

process with a large amount of data like images is always a problem in
Java. But you don't need to use JAI. You can process with any image by
divide it in smaller rasters. That's why you have xoff and yoff arguments
in ReadRaster and WriteRaster Method. You fix width and height of the
raster you read and add them of offsets of next raster you read.

Florent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120613/60c29b2d/attachment.html>

From rajjad at gmail.com  Wed Jun 13 02:39:32 2012
From: rajjad at gmail.com (Imran Rajjad)
Date: Wed, 13 Jun 2012 14:39:32 +0500
Subject: [gdal-dev] copy raster data in between file formats - Java
In-Reply-To: <CAL81ghCTLfUNmM+hPOq4M5uMqF0GHH+1mwBg-YTwfDZt3ZrNiQ@mail.gmail.com>
References: <CADz3VuU=iLicVHM3-ode7HYfFMo5Hu298D8+nsds9sKmnEd9fA@mail.gmail.com>
	<201206122014.32202.even.rouault@mines-paris.org>
	<CADz3VuW=qNwSxXPd9O7CDcujYoSH9uQn-8gJZJWHiBdwp8-QtQ@mail.gmail.com>
	<CAL81ghCTLfUNmM+hPOq4M5uMqF0GHH+1mwBg-YTwfDZt3ZrNiQ@mail.gmail.com>
Message-ID: <CADz3VuVPxoQC8KK6BPO52n47B_aN7T8YwiJF8YbGSNYGkwkEzQ@mail.gmail.com>

Hi Florent,

I get your point , but the thing is how does one copy raster across
datasets when the required size value is more than  Integer`s maximum
value, It would make sense to fill memory raster data store with 1Gb
of data and dump it in the destination data store, but things break
down where you need to allocate an array for raster data. You can
either put the data in an array or bytebuffer and both require
capacity in terms of integer. It would be great if you can copy a
dataset at a given location and dimensions in another dataset with
same data type.

regards,
Imran

On Wed, Jun 13, 2012 at 12:25 PM, Florent JITIAUX <fjitiaux at gmail.com> wrote:
> Hi all,
>
> process with a large amount of data like images is always a problem in Java.
> But you don't need to use JAI. You can process with any image by divide it
> in smaller rasters. That's why you have xoff and yoff arguments in
> ReadRaster and WriteRaster Method. You fix width and height of the raster
> you read and add them of offsets of next raster you read.
>
> Florent



-- 
I.R

From fjitiaux at gmail.com  Wed Jun 13 03:30:03 2012
From: fjitiaux at gmail.com (Florent JITIAUX)
Date: Wed, 13 Jun 2012 12:30:03 +0200
Subject: [gdal-dev] copy raster data in between file formats - Java
In-Reply-To: <CADz3VuVPxoQC8KK6BPO52n47B_aN7T8YwiJF8YbGSNYGkwkEzQ@mail.gmail.com>
References: <CADz3VuU=iLicVHM3-ode7HYfFMo5Hu298D8+nsds9sKmnEd9fA@mail.gmail.com>
	<201206122014.32202.even.rouault@mines-paris.org>
	<CADz3VuW=qNwSxXPd9O7CDcujYoSH9uQn-8gJZJWHiBdwp8-QtQ@mail.gmail.com>
	<CAL81ghCTLfUNmM+hPOq4M5uMqF0GHH+1mwBg-YTwfDZt3ZrNiQ@mail.gmail.com>
	<CADz3VuVPxoQC8KK6BPO52n47B_aN7T8YwiJF8YbGSNYGkwkEzQ@mail.gmail.com>
Message-ID: <CAL81ghCuNfMbqdsbMfoASBkAADqf0koUx31=6-CwgFJawO88QQ@mail.gmail.com>

2012/6/13 Imran Rajjad <rajjad at gmail.com>

> Hi Florent,
>
> I get your point , but the thing is how does one copy raster across
> datasets when the required size value is more than  Integer`s maximum
> value, It would make sense to fill memory raster data store with 1Gb
> of data and dump it in the destination data store, but things break
> down where you need to allocate an array for raster data. You can
> either put the data in an array or bytebuffer and both require
> capacity in terms of integer. It would be great if you can copy a
> dataset at a given location and dimensions in another dataset with
> same data type.
>
> regards,
> Imran


That's why as Etienne says it's easier to use  the Driver.CreateCopy
method. I never used BigTIFF files but it seems in the last version of
libtiff, it's possible to manage files larger than 4GB.

Florent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120613/7cc7408c/attachment.html>

From jukka.rahkonen at mmmtike.fi  Wed Jun 13 04:58:06 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 13 Jun 2012 11:58:06 +0000 (UTC)
Subject: [gdal-dev] Ogr2ogr from Spatialite into PostGIS stops to non-ASCII
	character
Message-ID: <loom.20120613T134901-361@post.gmane.org>

Hi,

How could I prevent the following problem:

ERROR 1: INSERT command for new feature failed.
ERROR:  invalid byte sequence for encoding "UTF8": 0xc56b

Command: INSERT INTO "test_table" ("wkb_geometry" , "address",
"osoite") VALUES ('0101000020FB0B0000AB1109023B190841634688040C595941'
::GEOMETRY, 'Jurmo ?kershamn', 8) RETURNING "ogc_fid"
ERROR 1: Terminating translation prematurely after failed
translation of layer test_table (use -skipfailures to skip errors)

I believe that my Spatialite db is in order and uses UTF-8 internally. The
target PostGIS db is also using UTF-8. 
I am on a Windows XP machine with Finnish locale settings.

-Jukka Rahkonen-




From jmckenna at gatewaygeomatics.com  Wed Jun 13 05:09:25 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 13 Jun 2012 09:09:25 -0300
Subject: [gdal-dev] Ogr2ogr from Spatialite into PostGIS stops to
 non-ASCII character
In-Reply-To: <loom.20120613T134901-361@post.gmane.org>
References: <loom.20120613T134901-361@post.gmane.org>
Message-ID: <4FD882F5.7010809@gatewaygeomatics.com>

On 12-06-13 8:58 AM, Jukka Rahkonen wrote:
> Hi,
> 
> How could I prevent the following problem:
> 
> ERROR 1: INSERT command for new feature failed.
> ERROR:  invalid byte sequence for encoding "UTF8": 0xc56b
> 
> Command: INSERT INTO "test_table" ("wkb_geometry" , "address",
> "osoite") VALUES ('0101000020FB0B0000AB1109023B190841634688040C595941'
> ::GEOMETRY, 'Jurmo ?kershamn', 8) RETURNING "ogc_fid"
> ERROR 1: Terminating translation prematurely after failed
> translation of layer test_table (use -skipfailures to skip errors)
> 
> I believe that my Spatialite db is in order and uses UTF-8 internally. The
> target PostGIS db is also using UTF-8. 
> I am on a Windows XP machine with Finnish locale settings.
> 

Hmm I have had to use the magical "-W" switch before with shp2pgsql to
specify encoding; I wonder if with ogr2ogr you should pass a "-sql"
switch with something like "SET CLIENT_ENCODING to UTF8" ?  But I
haven't tested that.

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



From jukka.rahkonen at mmmtike.fi  Wed Jun 13 05:57:11 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 13 Jun 2012 12:57:11 +0000 (UTC)
Subject: [gdal-dev] Ogr2ogr from Spatialite into PostGIS stops to
	non-ASCII character
References: <loom.20120613T134901-361@post.gmane.org>
	<4FD882F5.7010809@gatewaygeomatics.com>
Message-ID: <loom.20120613T144810-61@post.gmane.org>

Jeff McKenna <jmckenna <at> gatewaygeomatics.com> writes:

 
> Hmm I have had to use the magical "-W" switch before with shp2pgsql to
> specify encoding; I wonder if with ogr2ogr you should pass a "-sql"
> switch with something like "SET CLIENT_ENCODING to UTF8" ?  But I
> haven't tested that.

It reads actually in the documentation http://gdal.org/ogr/drv_pg.html
Giving SET PGCLIENTENCODING=LATIN1 before running ogr2ogr helped. I had tried
first something that I read from the internet by giving 
--config PGCLIENTENCODING LATIN1 but it did not work for me. One must not rely
on everything that is in the web.

-Jukka-


> 
> -jeff
> 





From jmckenna at gatewaygeomatics.com  Wed Jun 13 06:04:11 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 13 Jun 2012 10:04:11 -0300
Subject: [gdal-dev] Ogr2ogr from Spatialite into PostGIS stops to
 non-ASCII character
In-Reply-To: <loom.20120613T144810-61@post.gmane.org>
References: <loom.20120613T134901-361@post.gmane.org>
	<4FD882F5.7010809@gatewaygeomatics.com>
	<loom.20120613T144810-61@post.gmane.org>
Message-ID: <4FD88FCB.4030605@gatewaygeomatics.com>

On 12-06-13 9:57 AM, Jukka Rahkonen wrote:
> 
> It reads actually in the documentation http://gdal.org/ogr/drv_pg.html
> Giving SET PGCLIENTENCODING=LATIN1 before running ogr2ogr helped. I had tried
> first something that I read from the internet by giving 
> --config PGCLIENTENCODING LATIN1 but it did not work for me. One must not rely
> on everything that is in the web.

Yup that rings a bell.

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



From jukka.rahkonen at mmmtike.fi  Wed Jun 13 06:46:12 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 13 Jun 2012 13:46:12 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Ogr2ogr_from_Spatialite_into_PostGIS_stops_t?=
	=?utf-8?q?o=09non-ASCII_character?=
References: <loom.20120613T134901-361@post.gmane.org>
	<4FD882F5.7010809@gatewaygeomatics.com>
	<loom.20120613T144810-61@post.gmane.org>
Message-ID: <loom.20120613T153825-617@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:

> 
> Jeff McKenna <jmckenna <at> gatewaygeomatics.com> writes:
> 
>  
> > Hmm I have had to use the magical "-W" switch before with shp2pgsql to
> > specify encoding; I wonder if with ogr2ogr you should pass a "-sql"
> > switch with something like "SET CLIENT_ENCODING to UTF8" ?  But I
> > haven't tested that.
> 
> It reads actually in the documentation http://gdal.org/ogr/drv_pg.html
> Giving SET PGCLIENTENCODING=LATIN1 before running ogr2ogr helped. I had tried
> first something that I read from the internet by giving 
> --config PGCLIENTENCODING LATIN1 but it did not work for me. One must not rely
> on everything that is in the web.

Next trouble: I would now take the data back from PostGIS into Spatialite (it
was much faster to do some processing with PostGIS) but the happens again: my
non-ascii characters are converted to something invalid. I cannot see any
SQLITECLIENTENCODING option or anything.

-Jukka Rahkonen-




From jmckenna at gatewaygeomatics.com  Wed Jun 13 07:20:30 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 13 Jun 2012 11:20:30 -0300
Subject: [gdal-dev] Ogr2ogr from Spatialite into PostGIS stops to
 non-ASCII character
In-Reply-To: <loom.20120613T153825-617@post.gmane.org>
References: <loom.20120613T134901-361@post.gmane.org>
	<4FD882F5.7010809@gatewaygeomatics.com>
	<loom.20120613T144810-61@post.gmane.org>
	<loom.20120613T153825-617@post.gmane.org>
Message-ID: <4FD8A1AE.4010306@gatewaygeomatics.com>

On 12-06-13 10:46 AM, Jukka Rahkonen wrote:
> 
> Next trouble: I would now take the data back from PostGIS into Spatialite (it
> was much faster to do some processing with PostGIS) but the happens again: my
> non-ascii characters are converted to something invalid. I cannot see any
> SQLITECLIENTENCODING option or anything.
> 

It is difficult for me to comment without testing.  I would guess that
you need to use the "-sql" ogr2ogr switch with something like this
command for sqlite: http://www.sqlite.org/pragma.html#pragma_encoding

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/





From kassies at gmail.com  Wed Jun 13 07:58:56 2012
From: kassies at gmail.com (Rutger)
Date: Wed, 13 Jun 2012 07:58:56 -0700 (PDT)
Subject: [gdal-dev] reproject python numpy binary swath/lat/lon
In-Reply-To: <4FD78C74.6050107@gmail.com>
References: <4FC9004F.9070704@gmail.com> <4FCCD947.1040000@gmail.com>
	<4FD78C74.6050107@gmail.com>
Message-ID: <1339599536673-4981173.post@n6.nabble.com>


David Hoese wrote
> 
> Thanks for the reply.  I tried the s_srs tag and it still didn't help.  
> I also tried using the -geoloc flag which I had tried earlier too and 
> still get the 441 out of 441 failed to transform error.  I have tried 
> PyTroll, but there KDTree algorithm seems to be too slow for the amount 
> of data I'm using (not sure why), I have contacted them in the past.
> 

I think their the KDTree algorithm comes from scipy. I have had some
problems with large swaths as well, on Win32 my memory was limited so i
ended up doing the resampling is small chunks. Which works, but will only
further decrease performance. 


David Hoese wrote
> 
> I'm attempting to project satellite data to an AWIPS grid.  Assuming I 
> have the grid defined correctly with proj4 parameters, I've been using 
> "+proj=latlong +datum=wgs84" as my s_srs parameters.  Does that sound 
> correct for satellite data?  So my command line call (still for testing) 
> becomes:
> 

Is it publicly available satellite data? I will give it a go myself if i
have some sample data.


David Hoese wrote
> 
> gdalwarp -s_srs "+proj=latlong +datum=wgs84" \
> -te 59.844 -123.044 14.335 -65.091 \
> -ts 5120 5120 \
> -t_srs "+proj=lcc +lon_1=-95.000  +lon_0=-113.133 +lat_2=25.0001 
> +lat_1=24.9999 +lat_0=16.369" \
> -geoloc -of GTIFF \
> image.vrt out.tif
> 
> The output grid is 5120x5120 and I wasn't sure if -te was lat/lon 
> points, but that's what I used.  -te has lat/lon of upper left pixel of 
> the grid and lat/lon of the lower right pixel of the grid.  Does any of 
> this look correct?  Thanks for the help.
> 

Geographic WGS84 (lat/lon) is an obvious choice if you're not sure, but its
not necessarily correct. As you can see, your Lambert target projection has
coordinates in a similar value range, so you cannot be sure just based on
the values alone.
The syntax for gdalwarp seems alright to me. Because you're outputting to a
rather large area (geographically), it might be useful to test it for a
small subset first to rule out difficulties in finding a proper
transformation, although im not sure if it could help in this case.

Regards,
Rutger

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-reproject-python-numpy-binary-swath-lat-lon-tp4978609p4981173.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From eadam at co.lincoln.or.us  Wed Jun 13 07:54:16 2012
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Wed, 13 Jun 2012 07:54:16 -0700
Subject: [gdal-dev] to find area of shapeFile
In-Reply-To: <CAP-zkzeUfHJ2NJSUFn8OcE=Qau40bRzgTUkjJuSAYR=8fXfx9w@mail.gmail.com>
References: <CAP-zkzeUfHJ2NJSUFn8OcE=Qau40bRzgTUkjJuSAYR=8fXfx9w@mail.gmail.com>
Message-ID: <CACqBkM_9teSSBqVg3gxNbWX6O-wTUbyfxTUzryeheymwU3oMbA@mail.gmail.com>

I'm just guessing here since not much of an email or question made it through.

You can look at this, http://gdal.org/ogr/ogr_sql.html, specifically
OGR_GEOM_AREA

HTH, Eli

On Tue, Jun 12, 2012 at 4:21 AM, SIVA RAMA KRISHNA
<s.r.kriishna at gmail.com> wrote:
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From yjacolin at free.fr  Wed Jun 13 05:59:42 2012
From: yjacolin at free.fr (Free)
Date: Wed, 13 Jun 2012 14:59:42 +0200
Subject: [gdal-dev] Ogr2ogr from Spatialite into PostGIS stops to
	non-ASCII character
In-Reply-To: <loom.20120613T144810-61@post.gmane.org>
References: <loom.20120613T134901-361@post.gmane.org>
	<4FD882F5.7010809@gatewaygeomatics.com>
	<loom.20120613T144810-61@post.gmane.org>
Message-ID: <14253485.U7boqobCsY@tatras>

Le mercredi 13 juin 2012 12:57:11 Jukka Rahkonen a ?crit :
> Jeff McKenna <jmckenna <at> gatewaygeomatics.com> writes:
> > Hmm I have had to use the magical "-W" switch before with shp2pgsql to
> > specify encoding; I wonder if with ogr2ogr you should pass a "-sql"
> > switch with something like "SET CLIENT_ENCODING to UTF8" ?  But I
> > haven't tested that.
> 
> It reads actually in the documentation http://gdal.org/ogr/drv_pg.html
> Giving SET PGCLIENTENCODING=LATIN1 before running ogr2ogr helped. I had
> tried first something that I read from the internet by giving
> --config PGCLIENTENCODING LATIN1 but it did not work for me. One must not
> rely on everything that is in the web.
Hello,

I already used something like this sucessfully:

export PGCLIENTENCODING=LATIN1
ogr2ogr flags dst source

Regards,

Y.

From stevenlgolden at gmail.com  Wed Jun 13 11:17:25 2012
From: stevenlgolden at gmail.com (Steve G)
Date: Wed, 13 Jun 2012 11:17:25 -0700 (PDT)
Subject: [gdal-dev] translate ecw to geotiff + tfw
Message-ID: <1339611445213-4981248.post@n6.nabble.com>

I am attempting to use the translate function to convert from ecw to geotiff
and the creation of an associated tfw file.  The geotiff is created, but it
fails to create the tfw file.  I've tried many times, but always fails.  My
syntax is as follows:

gdal_translate -a_srs EPSG:2227 -co tfw=yes -of GTiff
R:/GIS/GIS_Data/Aerials/65123.ecw R:/GIS/GIS_Data/Aerials/65123.tif

When I do a similar operation with a sid file, the tfw is created.  Has
anyone else experienced this problem with translating an ecw file type?  Any
suggestions?

Thanks in advance.

Steve

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/translate-ecw-to-geotiff-tfw-tp4981248.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Wed Jun 13 11:44:46 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 13 Jun 2012 20:44:46 +0200
Subject: [gdal-dev] translate ecw to geotiff + tfw
In-Reply-To: <1339611445213-4981248.post@n6.nabble.com>
References: <1339611445213-4981248.post@n6.nabble.com>
Message-ID: <201206132044.46685.even.rouault@mines-paris.org>

Le mercredi 13 juin 2012 20:17:25, Steve G a ?crit :
> I am attempting to use the translate function to convert from ecw to
> geotiff and the creation of an associated tfw file.  The geotiff is
> created, but it fails to create the tfw file.  I've tried many times, but
> always fails.  My syntax is as follows:
> 
> gdal_translate -a_srs EPSG:2227 -co tfw=yes -of GTiff
> R:/GIS/GIS_Data/Aerials/65123.ecw R:/GIS/GIS_Data/Aerials/65123.tif
> 
> When I do a similar operation with a sid file, the tfw is created.  Has
> anyone else experienced this problem with translating an ecw file type? 
> Any suggestions?

I suspect that your ecw file has no associated geotransform matrix, which is 
needed to write a TFW file. This could be confirmed if you post the output of 
gdalinfo on your ecw file.

> 
> Thanks in advance.
> 
> Steve
> 
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/translate-ecw-to-geotiff-tfw-tp4981248
> .html Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From stevenlgolden at gmail.com  Wed Jun 13 14:03:12 2012
From: stevenlgolden at gmail.com (Steve G)
Date: Wed, 13 Jun 2012 14:03:12 -0700 (PDT)
Subject: [gdal-dev] translate ecw to geotiff + tfw
In-Reply-To: <201206132044.46685.even.rouault@mines-paris.org>
References: <1339611445213-4981248.post@n6.nabble.com>
	<201206132044.46685.even.rouault@mines-paris.org>
Message-ID: <1339621392762-4981262.post@n6.nabble.com>

Thanks for your suggestion.  

It got me thinking about the projection and other geo information stored in
the header data within the ECW file.  I previously had trouble with various
GIS/mapping applications being able to display ECW files properly
(projection, extent, etc) and applications like ESRI was automatically
creating an xml file that stores some of this information after reading the
ECW file.  In the end, the only thing that worked for me and through various
combinations of other applications, was for each ECW file I have an
associated ".ecw.aux.xml", ".ecw.xml", and ".xml" file.  Each contains
projection, extent, etc. data in a slightly different format.

When I use gdal translate with the tfw=yes creation option and choose an ECW
file in a folder with all the other xml files, the tfw file is not created. 
However, I copied the ECW to an empty folder without the xml files, ran the
same gdal translate function and the tfw file was created.

So, my conclusion is that the extra xml files is somehow impacting the
creation of the tfw file.  Not sure why or how, but perhaps this information
will help someone else trying to do a similar translate.  Also, this only
seems to be the case with ECW files.  I have a similar file structure with
SID files (also has associated xml files) and it was able to create the tfw
file just fine.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/translate-ecw-to-geotiff-tfw-tp4981248p4981262.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From muralikrishna50 at gmail.com  Wed Jun 13 14:19:53 2012
From: muralikrishna50 at gmail.com (Murali Krishna)
Date: Wed, 13 Jun 2012 22:19:53 +0100
Subject: [gdal-dev] GDAL spatial reference issue
Message-ID: <CAND4YNmnb=eUSKM2Y11-tbW2gZpsMCxB2zmakxNWJ1H1P9Toqw@mail.gmail.com>

I'm facing an issue in creating ESRI shape files using GDAL library.

I want to create a layer with SpatialReference information set on it and
until now i'm creating SpatialReference by importing WellKnownText (wkt)
representation.

Is there any way we can create the same SpatialReference from ESRI's
WellKnownId (wkid) using gdal ogr java bindings?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120613/939ee97a/attachment.html>

From even.rouault at mines-paris.org  Wed Jun 13 14:23:24 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 13 Jun 2012 23:23:24 +0200
Subject: [gdal-dev] translate ecw to geotiff + tfw
In-Reply-To: <1339621392762-4981262.post@n6.nabble.com>
References: <1339611445213-4981248.post@n6.nabble.com>
	<201206132044.46685.even.rouault@mines-paris.org>
	<1339621392762-4981262.post@n6.nabble.com>
Message-ID: <201206132323.24359.even.rouault@mines-paris.org>

Le mercredi 13 juin 2012 23:03:12, Steve G a ?crit :
> Thanks for your suggestion.
> 
> It got me thinking about the projection and other geo information stored in
> the header data within the ECW file.  I previously had trouble with various
> GIS/mapping applications being able to display ECW files properly
> (projection, extent, etc) and applications like ESRI was automatically
> creating an xml file that stores some of this information after reading the
> ECW file.  In the end, the only thing that worked for me and through
> various combinations of other applications, was for each ECW file I have
> an associated ".ecw.aux.xml", ".ecw.xml", and ".xml" file.  Each contains
> projection, extent, etc. data in a slightly different format.
> 
> When I use gdal translate with the tfw=yes creation option and choose an
> ECW file in a folder with all the other xml files, the tfw file is not
> created. However, I copied the ECW to an empty folder without the xml
> files, ran the same gdal translate function and the tfw file was created.
> 
> So, my conclusion is that the extra xml files is somehow impacting the
> creation of the tfw file. 

Well, you are making some shortcuts in the reasoning. Believe me, the fact 
that the tfw=yes creation option produces a file or not isn't the cause, but 
the consequence. However, the presence of extra xml files is certainly 
impacting how the ECW driver recognizes the georeferencing of the ECW file. If 
you follow my first suggestion, I guess you could see that gdalinfo on the ecw 
file will report certainly something different if there's a ".ecw.aux.xml" file 
or not next to the ecw file.

The behaviour of the ECW driver is the following :
- if there's a .ecw.aux.xml file that includes a valid geotransform, then this 
geotransform is used
- if not, the geotransform deduced from the header of the ecw file itself is 
used.

From warmerdam at pobox.com  Wed Jun 13 14:39:10 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 13 Jun 2012 14:39:10 -0700
Subject: [gdal-dev] GDAL spatial reference issue
In-Reply-To: <CAND4YNmnb=eUSKM2Y11-tbW2gZpsMCxB2zmakxNWJ1H1P9Toqw@mail.gmail.com>
References: <CAND4YNmnb=eUSKM2Y11-tbW2gZpsMCxB2zmakxNWJ1H1P9Toqw@mail.gmail.com>
Message-ID: <CA+YzLBdxawpZRjT3_vJriZ7GVZ4u=g7GW8OeeYhQ3gjNy_R=_g@mail.gmail.com>

On Wed, Jun 13, 2012 at 2:19 PM, Murali Krishna
<muralikrishna50 at gmail.com> wrote:
> I'm facing an issue in creating ESRI shape files using GDAL library.
>
> I want to create a layer with SpatialReference information set on it and
> until now i'm creating SpatialReference by importing WellKnownText (wkt)
> representation.
>
> Is there any way we can create the same SpatialReference from ESRI's
> WellKnownId (wkid) using gdal ogr java bindings?

Murali,

If you are importing ESRI Projection Engine strings (ESRI WKT) then
after ingesting the WKT into an OGRSpatialReference object call
the morphFromESRI() method to transform into "OGR standard"
form.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer

From stevenlgolden at gmail.com  Wed Jun 13 14:49:32 2012
From: stevenlgolden at gmail.com (Steve G)
Date: Wed, 13 Jun 2012 14:49:32 -0700 (PDT)
Subject: [gdal-dev] translate ecw to geotiff + tfw
In-Reply-To: <201206132323.24359.even.rouault@mines-paris.org>
References: <1339611445213-4981248.post@n6.nabble.com>
	<201206132044.46685.even.rouault@mines-paris.org>
	<1339621392762-4981262.post@n6.nabble.com>
	<201206132323.24359.even.rouault@mines-paris.org>
Message-ID: <1339624172620-4981272.post@n6.nabble.com>

OK...I guess for my purposes I am only interested in the consequence.  I have
a relatively easy conversion process, so it is easy enough for me to copy
the ecw's into an empty directory and translate from there.  If your correct
about the ordering in which the ecw driver reads and validates the geo data
(xml file first, then ecw header) then I think I would have to assume that
the xml data was invalid and it failed to move to the ECW header data since
in the end, the ecw header itself was valid.  Or that multiple associated
xml files for the same ecw file somehow impacts how those files are read by
the driver.  

Thanks for the assistance.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/translate-ecw-to-geotiff-tfw-tp4981248p4981272.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From muralikrishna50 at gmail.com  Wed Jun 13 14:50:43 2012
From: muralikrishna50 at gmail.com (Murali Krishna)
Date: Wed, 13 Jun 2012 22:50:43 +0100
Subject: [gdal-dev] GDAL spatial reference issue
In-Reply-To: <CA+YzLBdxawpZRjT3_vJriZ7GVZ4u=g7GW8OeeYhQ3gjNy_R=_g@mail.gmail.com>
References: <CAND4YNmnb=eUSKM2Y11-tbW2gZpsMCxB2zmakxNWJ1H1P9Toqw@mail.gmail.com>
	<CA+YzLBdxawpZRjT3_vJriZ7GVZ4u=g7GW8OeeYhQ3gjNy_R=_g@mail.gmail.com>
Message-ID: <CAND4YNktfK3gHkd7Sn1WNfD2-EyBuJ3OFXtNvfek_bH2TLOZqA@mail.gmail.com>

Frank,

I don't have access to ESRI WKT. I was given the following
SpatialReference information by ArcGIS Feature Server when i query for a
layer schema:

"spatialReference" : {
      "wkid" : 102100,
      "latestWkid" : 3857
    }
So from the above "wkid" i need to create a shape file. Is there any way of
doing this in GDAL.

Regards

Murali

On Wed, Jun 13, 2012 at 10:39 PM, Frank Warmerdam <warmerdam at pobox.com>wrote:

> On Wed, Jun 13, 2012 at 2:19 PM, Murali Krishna
> <muralikrishna50 at gmail.com> wrote:
> > I'm facing an issue in creating ESRI shape files using GDAL library.
> >
> > I want to create a layer with SpatialReference information set on it and
> > until now i'm creating SpatialReference by importing WellKnownText (wkt)
> > representation.
> >
> > Is there any way we can create the same SpatialReference from ESRI's
> > WellKnownId (wkid) using gdal ogr java bindings?
>
> Murali,
>
> If you are importing ESRI Projection Engine strings (ESRI WKT) then
> after ingesting the WKT into an OGRSpatialReference object call
> the morphFromESRI() method to transform into "OGR standard"
> form.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120613/9a849500/attachment.html>

From etourigny.dev at gmail.com  Wed Jun 13 15:05:26 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 13 Jun 2012 19:05:26 -0300
Subject: [gdal-dev] GDAL spatial reference issue
In-Reply-To: <CAND4YNktfK3gHkd7Sn1WNfD2-EyBuJ3OFXtNvfek_bH2TLOZqA@mail.gmail.com>
References: <CAND4YNmnb=eUSKM2Y11-tbW2gZpsMCxB2zmakxNWJ1H1P9Toqw@mail.gmail.com>
	<CA+YzLBdxawpZRjT3_vJriZ7GVZ4u=g7GW8OeeYhQ3gjNy_R=_g@mail.gmail.com>
	<CAND4YNktfK3gHkd7Sn1WNfD2-EyBuJ3OFXtNvfek_bH2TLOZqA@mail.gmail.com>
Message-ID: <CA+TxYvO0Lb4Sy7qox+ZvMCi1UgmJXmVVioJJeYXqu-wd732ULA@mail.gmail.com>

A few ESRI ids correspond to ESRI authid codes - but not all so it's
not fool-proof...

Assuming the esri code DOES correspond to EPSG code, you would
basically use OSRImportFromEPSG( <latestWkid>)

In your example, the    "latestWkid" : 3857 corresponds to EPSG:3857
which is the WGS 84 / Pseudo-Mercator
and       "wkid" : 102100 is the "old" id which has been replaced by 3857

see:
http://forums.esri.com/Thread.asp?c=93&f=984&t=288607
http://forums.arcgis.com/threads/8762-WGS-1984-Web-Mercator-(Auxiliary-Sphere)-WKID-102100


Frank - this may require yet another ESRI-OGC translation scheme!

Many (but by all means not all) ESRI srid correspond to EPSG authids,
but not in the upper range....


Etienne

On Wed, Jun 13, 2012 at 6:50 PM, Murali Krishna
<muralikrishna50 at gmail.com> wrote:
> Frank,
>
> I don't have access to ESRI WKT. I was given the following
> SpatialReference?information by ArcGIS Feature Server when i query for a
> layer schema:
>
> "spatialReference" : {
> ????? "wkid" : 102100,
> ????? "latestWkid" : 3857
> ??? }
> So from the above "wkid" i need to create a shape file. Is there any way of
> doing this in GDAL.
>
> Regards
>
> Murali
>
> On Wed, Jun 13, 2012 at 10:39 PM, Frank Warmerdam <warmerdam at pobox.com>
> wrote:
>>
>> On Wed, Jun 13, 2012 at 2:19 PM, Murali Krishna
>> <muralikrishna50 at gmail.com> wrote:
>> > I'm facing an issue in creating ESRI shape files using GDAL library.
>> >
>> > I want to create a layer with SpatialReference information set on it and
>> > until now i'm creating SpatialReference by importing WellKnownText (wkt)
>> > representation.
>> >
>> > Is there any way we can create the same SpatialReference from ESRI's
>> > WellKnownId (wkid) using gdal ogr java bindings?
>>
>> Murali,
>>
>> If you are importing ESRI Projection Engine strings (ESRI WKT) then
>> after ingesting the WKT into an OGRSpatialReference object call
>> the morphFromESRI() method to transform into "OGR standard"
>> form.
>>
>> Best regards,
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up?? | Frank Warmerdam,
>> warmerdam at pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush? ? | Geospatial Software Developer
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From dhoese at gmail.com  Wed Jun 13 15:32:55 2012
From: dhoese at gmail.com (David Hoese)
Date: Wed, 13 Jun 2012 17:32:55 -0500
Subject: [gdal-dev] reproject python numpy binary swath/lat/lon
In-Reply-To: <mailman.2204.1339599601.1116.gdal-dev@lists.osgeo.org>
References: <mailman.2204.1339599601.1116.gdal-dev@lists.osgeo.org>
Message-ID: <4FD91517.1060102@gmail.com>

On 6/13/12 10:00 AM, gdal-dev-request at lists.osgeo.org wrote
> David Hoese wrote
>> >  
>> >  I'm attempting to project satellite data to an AWIPS grid.  Assuming I
>> >  have the grid defined correctly with proj4 parameters, I've been using
>> >  "+proj=latlong +datum=wgs84" as my s_srs parameters.  Does that sound
>> >  correct for satellite data?  So my command line call (still for testing)
>> >  becomes:
>> >  
> Is it publicly available satellite data? I will give it a go myself if i
> have some sample data.
I'm not sure at the moment, it's VIIRS data.  I'm playing around with 
different existing remapping tools, I have one that works called 
ms2gt(ll2cr/fornav) which you might be able to google for the old 
versions, but it's slightly outdated and is single purpose.  I would 
like to use GDAL if it can handle it, because of the various formats 
that it supports as output.
>
>
> David Hoese wrote
>> >  
>> >  gdalwarp -s_srs "+proj=latlong +datum=wgs84" \
>> >  -te 59.844 -123.044 14.335 -65.091 \
>> >  -ts 5120 5120 \
>> >  -t_srs "+proj=lcc +lon_1=-95.000  +lon_0=-113.133 +lat_2=25.0001
>> >  +lat_1=24.9999 +lat_0=16.369" \
>> >  -geoloc -of GTIFF \
>> >  image.vrt out.tif
>> >  
>> >  The output grid is 5120x5120 and I wasn't sure if -te was lat/lon
>> >  points, but that's what I used.  -te has lat/lon of upper left pixel of
>> >  the grid and lat/lon of the lower right pixel of the grid.  Does any of
>> >  this look correct?  Thanks for the help.
>> >  
> Geographic WGS84 (lat/lon) is an obvious choice if you're not sure, but its
> not necessarily correct. As you can see, your Lambert target projection has
> coordinates in a similar value range, so you cannot be sure just based on
> the values alone.
> The syntax for gdalwarp seems alright to me. Because you're outputting to a
> rather large area (geographically), it might be useful to test it for a
> small subset first to rule out difficulties in finding a proper
> transformation, although im not sure if it could help in this case.
So I've played around with this for a while now and have gotten 
somewhere.  I was able to get data into the geotiff, but with a lot of 
guess work and small tweaking.  My t_srs is now:
"+a=6378137 +lon_1=-95.000 +b=6356752.314 +lon_0=-123.044 +proj=lcc 
+lat_1=25.000 +lat_0=59.844 +ellps=WGS84 +no_defs +wktext +units=m"

All of which are probably not necessary, but at this point it doesn't 
hurt.  The origin in that projection is the upper left corner of my 
grid.  So I now specify -te as something like:
"-te 0.0 -5120000.0 5120000.0 0.0"

Which gets me something in the geotiff.  I've played around with 
different extents and my best result comes from me manually changing the 
extents to match a picture I have from another system.  The grid I'm 
trying to match to is the first one on this page:
http://www.nws.noaa.gov/noaaport/html/icdtb48_2.html

I have tried using pyproj and plugging in different corner points to get 
the extent points in meters, but when I use those I get skewed images 
(the grid should be 5120 x 5120).

So at this point, I just need to find a way to get the extents figured 
out in a programmatic way (like 1km * 5120 grid pixels = 5120000 
meters).  If you have any more advice that'd be great, otherwise I'll 
just have to keep playing around and asking people around my work.  
Thanks a lot for the help so far.

-Dave


From kassies at gmail.com  Thu Jun 14 00:15:31 2012
From: kassies at gmail.com (Rutger)
Date: Thu, 14 Jun 2012 00:15:31 -0700 (PDT)
Subject: [gdal-dev] reproject python numpy binary swath/lat/lon
In-Reply-To: <4FD91517.1060102@gmail.com>
References: <4FC9004F.9070704@gmail.com> <4FCCD947.1040000@gmail.com>
	<4FD91517.1060102@gmail.com>
Message-ID: <1339658131386-4981318.post@n6.nabble.com>

Hey David,


David Hoese wrote
> 
> On 6/13/12 10:00 AM, gdal-dev-request at .osgeo wrote
> I'm not sure at the moment, it's VIIRS data.  I'm playing around with 
> different existing remapping tools, I have one that works called 
> ms2gt(ll2cr/fornav) which you might be able to google for the old 
> versions, but it's slightly outdated and is single purpose.  I would 
> like to use GDAL if it can handle it, because of the various formats 
> that it supports as output.
> 

I actually already did some test with GDAL geolocation arrays and VIIRS
data. It work flawless for my target area; utm31 for the Netherlands. My
VRT's looked like this:

lat.vrt
<VRTDataset rasterXSize="6400" rasterYSize="1536">
  <VRTRasterBand dataType="Float32" band="1">
    <Metadata />
    <SimpleSource>
      <SourceFilename
relativeToVRT="0">HDF5:GITCO_npp_d20120315_t1208597_e1210238_b01974_c20120321152146856862_noaa_ops.h5://All_Data/VIIRS-IMG-GEO-TC_All/Latitude</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="6400" RasterYSize="1536"
DataType="Float32" BlockXSize="6400" BlockYSize="1536" />
      <SrcRect xOff="0" yOff="0" xSize="6400" ySize="1536" />
      <DstRect xOff="0" yOff="0" xSize="6400" ySize="1536" />
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>

lon.vrt
<VRTDataset rasterXSize="6400" rasterYSize="1536">
  <VRTRasterBand dataType="Float32" band="1">
    <Metadata />
    <SimpleSource>
      <SourceFilename
relativeToVRT="0">HDF5:GITCO_npp_d20120315_t1208597_e1210238_b01974_c20120321152146856862_noaa_ops.h5://All_Data/VIIRS-IMG-GEO-TC_All/Longitude</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="6400" RasterYSize="1536"
DataType="Float32" BlockXSize="6400" BlockYSize="1536" />
      <SrcRect xOff="0" yOff="0" xSize="6400" ySize="1536" />
      <DstRect xOff="0" yOff="0" xSize="6400" ySize="1536" />
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>

band5.vrt
<VRTDataset rasterXSize="6400" rasterYSize="1536">
   <Metadata domain="GEOLOCATION">
     <MDI key="X_DATASET">lon.vrt</MDI>
     <MDI key="X_BAND">1</MDI>
     <MDI key="Y_DATASET">lat.vrt</MDI>
     <MDI key="Y_BAND">1</MDI>
     <MDI key="PIXEL_OFFSET">0</MDI>
     <MDI key="LINE_OFFSET">0</MDI>
     <MDI key="PIXEL_STEP">1</MDI>
     <MDI key="LINE_STEP">1</MDI>
   </Metadata> 
  <VRTRasterBand dataType="UInt16" band="1">
    <Metadata />
    <SimpleSource>
      <SourceFilename
relativeToVRT="0">HDF5:SVI05_npp_d20120315_t1208597_e1210238_b01974_c20120316203244033373_noaa_ops.h5://All_Data/VIIRS-I5-SDR_All/BrightnessTemperature</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="6400" RasterYSize="1536"
DataType="UInt16" BlockXSize="6400" BlockYSize="1536" />
      <SrcRect xOff="0" yOff="0" xSize="6400" ySize="1536" />
      <DstRect xOff="0" yOff="0" xSize="6400" ySize="1536" />
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>

And then reprojection with gdalwarp like:
gdalwarp -s_srs "epsg:4326" -t_srs "+proj=utm +zone=31 +datum=WGS84
+units=m" \
-tr 250 250 -te 392875 5574125 808875 5940125 band5.vrt band5.tif

This works without any errors for me, and the geolocation seems accurate.
But as said, i didnt like the resulting image quality. I have attached a
simple comparison between a gdalwarp nearest neighbor, bilinear and
Pyresample gaussian reprojection. The gdalwarp reprojection seem very
patchy, and the bilinear flag (same with cubic) doesnt seem to have much
affect. Im not sure whether this is to be expected with the current
implementation or if i made any mistakes while specifying the VRT files.


David Hoese wrote
> 
> So I've played around with this for a while now and have gotten 
> somewhere.  I was able to get data into the geotiff, but with a lot of 
> guess work and small tweaking.  My t_srs is now:
> "+a=6378137 +lon_1=-95.000 +b=6356752.314 +lon_0=-123.044 +proj=lcc 
> +lat_1=25.000 +lat_0=59.844 +ellps=WGS84 +no_defs +wktext +units=m"
> 
> All of which are probably not necessary, but at this point it doesn't 
> hurt.  The origin in that projection is the upper left corner of my 
> grid.  So I now specify -te as something like:
> "-te 0.0 -5120000.0 5120000.0 0.0"
> 
> Which gets me something in the geotiff.  I've played around with 
> different extents and my best result comes from me manually changing the 
> extents to match a picture I have from another system.  The grid I'm 
> trying to match to is the first one on this page:
> http://www.nws.noaa.gov/noaaport/html/icdtb48_2.html
> 
> I have tried using pyproj and plugging in different corner points to get 
> the extent points in meters, but when I use those I get skewed images 
> (the grid should be 5120 x 5120).
> 
> So at this point, I just need to find a way to get the extents figured 
> out in a programmatic way (like 1km * 5120 grid pixels = 5120000 
> meters).  If you have any more advice that'd be great, otherwise I'll 
> just have to keep playing around and asking people around my work.  
> Thanks a lot for the help so far.
> 
> -Dave
> 

Since it worked for my case, i think its likely that the problems you are
having are related to the projection and area definition. I have no
experience with the AWIPS grid you are mentioning. What i would do in such a
case is to get a sample file with the correct projection and boundingbox,
and just read the metadata with:
gdalinfo -proj4 samplefile.tif

Optionally add some of the -norat -noct etc flags to hide the large tables.
The proj4 string can be directly used by other gdal tools. 


Regards,
Rutger

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-reproject-python-numpy-binary-swath-lat-lon-tp4978609p4981318.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From kassies at gmail.com  Thu Jun 14 00:16:56 2012
From: kassies at gmail.com (Rutger)
Date: Thu, 14 Jun 2012 00:16:56 -0700 (PDT)
Subject: [gdal-dev] reproject python numpy binary swath/lat/lon
In-Reply-To: <1339658131386-4981318.post@n6.nabble.com>
References: <4FC9004F.9070704@gmail.com> <4FCCD947.1040000@gmail.com>
	<4FD91517.1060102@gmail.com>
	<1339658131386-4981318.post@n6.nabble.com>
Message-ID: <1339658216480-4981320.post@n6.nabble.com>

Sorry, forgot to attach the image. 
http://osgeo-org.1560.n6.nabble.com/file/n4981320/gdalwarp_and_pyresample.png 

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-reproject-python-numpy-binary-swath-lat-lon-tp4978609p4981320.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From yasinberber at gmail.com  Thu Jun 14 00:25:40 2012
From: yasinberber at gmail.com (=?ISO-8859-1?Q?Yasin_Sel=E7uk_Berber?=)
Date: Thu, 14 Jun 2012 10:25:40 +0300
Subject: [gdal-dev] =?utf-8?q?in_WKT=2C_is_=22unknown_datum=22_=3D_=22spec?=
	=?utf-8?q?ified_perfect_spheroid=22_with_no_additional_shifts_=26_?=
	=?utf-8?b?bW9kaWZpY2F0aeKAi29ucyA/?=
Message-ID: <CA+h5NzM67SwnyPkBqCDh0G4jVXrDuMAqHE48sjP0XzqiPBez_w@mail.gmail.com>

Hi.

i want to be sure that, in a WKT, if the datum is specified as "unknown",
does that mean;
the datum is same as "the given perfect spheroid in WKT" with no specific
adjustments to match real earth, bulges ... etc ?

thanks

-- 
Yasin Sel?uk Berber
"Bismillah, her hayr?n ba??d?r."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120614/1dc3a2ea/attachment.html>

From s.r.kriishna at gmail.com  Thu Jun 14 01:22:27 2012
From: s.r.kriishna at gmail.com (SIVA RAMA KRISHNA)
Date: Thu, 14 Jun 2012 13:52:27 +0530
Subject: [gdal-dev] to find area of Shape File
Message-ID: <CAP-zkzeUEnix3m=VZrzX6RyXsNVYMWBr3FdGXWCZpbVdnxUxWg@mail.gmail.com>

  i  am Trying To Find Area of A Polygon
       with the Following Code

int main()    {    OGRRegisterAll();    OGRLayer *poLayer;
OGRFeature *poFeature;    OGRDataSource       *poDS;    poDS =
OGRSFDriverRegistrar::Open( "first.shp");    poLayer =
poDS->*GetLayerByName*( "first");    int
nCount=poDS->*GetLayerCount*();    printf("%d",nCount);
poLayer->*ResetReading*();    OGRGeometry *poGeometry;
OGRGeometryCollection *PoGC;
while((poFeature=poLayer->*GetNextFeature*())!=NULL)    {        int
nCnt=poFeature->GetFieldCount();        printf("\n %d",nCnt);
qDebug()<<"entered";        poGeometry=poFeature->GetGeometryRef();
     if(poGeometry !=NULL             &&
wkbFlatten(poGeometry->*getGeometryType*()) == wkbPolygon)       {
        PoGC->*addGeometry*(poGeometry);             double area =
PoGC->*get_Area*() ;            qDebug() << area ;         }    }
return 0;}

i am getting Error
With Regards
siva
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120614/6cfc3d9c/attachment.html>

From etourigny.dev at gmail.com  Thu Jun 14 05:23:46 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 14 Jun 2012 09:23:46 -0300
Subject: [gdal-dev] reproject python numpy binary swath/lat/lon
In-Reply-To: <1339658131386-4981318.post@n6.nabble.com>
References: <4FC9004F.9070704@gmail.com> <4FCCD947.1040000@gmail.com>
	<4FD91517.1060102@gmail.com>
	<1339658131386-4981318.post@n6.nabble.com>
Message-ID: <CA+TxYvPRxy4Ncr0R_3Fz4hFU71ukaVjpLD3e=HH_gbSmfVGV0Q@mail.gmail.com>

On Thu, Jun 14, 2012 at 4:15 AM, Rutger <kassies at gmail.com> wrote:
> Hey David,
>
>
> David Hoese wrote
>>
>> On 6/13/12 10:00 AM, gdal-dev-request at .osgeo wrote
>> I'm not sure at the moment, it's VIIRS data. ?I'm playing around with
>> different existing remapping tools, I have one that works called
>> ms2gt(ll2cr/fornav) which you might be able to google for the old
>> versions, but it's slightly outdated and is single purpose. ?I would
>> like to use GDAL if it can handle it, because of the various formats
>> that it supports as output.
>>
>
> I actually already did some test with GDAL geolocation arrays and VIIRS
> data. It work flawless for my target area; utm31 for the Netherlands. My
> VRT's looked like this:
>
> lat.vrt
> <VRTDataset rasterXSize="6400" rasterYSize="1536">
> ?<VRTRasterBand dataType="Float32" band="1">
> ? ?<Metadata />
> ? ?<SimpleSource>
> ? ? ?<SourceFilename
> relativeToVRT="0">HDF5:GITCO_npp_d20120315_t1208597_e1210238_b01974_c20120321152146856862_noaa_ops.h5://All_Data/VIIRS-IMG-GEO-TC_All/Latitude</SourceFilename>
> ? ? ?<SourceBand>1</SourceBand>
> ? ? ?<SourceProperties RasterXSize="6400" RasterYSize="1536"
> DataType="Float32" BlockXSize="6400" BlockYSize="1536" />
> ? ? ?<SrcRect xOff="0" yOff="0" xSize="6400" ySize="1536" />
> ? ? ?<DstRect xOff="0" yOff="0" xSize="6400" ySize="1536" />
> ? ?</SimpleSource>
> ?</VRTRasterBand>
> </VRTDataset>
>
> lon.vrt
> <VRTDataset rasterXSize="6400" rasterYSize="1536">
> ?<VRTRasterBand dataType="Float32" band="1">
> ? ?<Metadata />
> ? ?<SimpleSource>
> ? ? ?<SourceFilename
> relativeToVRT="0">HDF5:GITCO_npp_d20120315_t1208597_e1210238_b01974_c20120321152146856862_noaa_ops.h5://All_Data/VIIRS-IMG-GEO-TC_All/Longitude</SourceFilename>
> ? ? ?<SourceBand>1</SourceBand>
> ? ? ?<SourceProperties RasterXSize="6400" RasterYSize="1536"
> DataType="Float32" BlockXSize="6400" BlockYSize="1536" />
> ? ? ?<SrcRect xOff="0" yOff="0" xSize="6400" ySize="1536" />
> ? ? ?<DstRect xOff="0" yOff="0" xSize="6400" ySize="1536" />
> ? ?</SimpleSource>
> ?</VRTRasterBand>
> </VRTDataset>
>
> band5.vrt
> <VRTDataset rasterXSize="6400" rasterYSize="1536">
> ? <Metadata domain="GEOLOCATION">
> ? ? <MDI key="X_DATASET">lon.vrt</MDI>
> ? ? <MDI key="X_BAND">1</MDI>
> ? ? <MDI key="Y_DATASET">lat.vrt</MDI>
> ? ? <MDI key="Y_BAND">1</MDI>
> ? ? <MDI key="PIXEL_OFFSET">0</MDI>
> ? ? <MDI key="LINE_OFFSET">0</MDI>
> ? ? <MDI key="PIXEL_STEP">1</MDI>
> ? ? <MDI key="LINE_STEP">1</MDI>
> ? </Metadata>
> ?<VRTRasterBand dataType="UInt16" band="1">
> ? ?<Metadata />
> ? ?<SimpleSource>
> ? ? ?<SourceFilename
> relativeToVRT="0">HDF5:SVI05_npp_d20120315_t1208597_e1210238_b01974_c20120316203244033373_noaa_ops.h5://All_Data/VIIRS-I5-SDR_All/BrightnessTemperature</SourceFilename>
> ? ? ?<SourceBand>1</SourceBand>
> ? ? ?<SourceProperties RasterXSize="6400" RasterYSize="1536"
> DataType="UInt16" BlockXSize="6400" BlockYSize="1536" />
> ? ? ?<SrcRect xOff="0" yOff="0" xSize="6400" ySize="1536" />
> ? ? ?<DstRect xOff="0" yOff="0" xSize="6400" ySize="1536" />
> ? ?</SimpleSource>
> ?</VRTRasterBand>
> </VRTDataset>
>
> And then reprojection with gdalwarp like:
> gdalwarp -s_srs "epsg:4326" -t_srs "+proj=utm +zone=31 +datum=WGS84
> +units=m" \
> -tr 250 250 -te 392875 5574125 808875 5940125 band5.vrt band5.tif
>
> This works without any errors for me, and the geolocation seems accurate.
> But as said, i didnt like the resulting image quality. I have attached a
> simple comparison between a gdalwarp nearest neighbor, bilinear and
> Pyresample gaussian reprojection. The gdalwarp reprojection seem very
> patchy, and the bilinear flag (same with cubic) doesnt seem to have much
> affect. Im not sure whether this is to be expected with the current
> implementation or if i made any mistakes while specifying the VRT files.

Did you try the other resampling  methods - cubicspline and lanczos ?

It seems that gaussian resampling is only available for gdaladdo.

>
>
> David Hoese wrote
>>
>> So I've played around with this for a while now and have gotten
>> somewhere. ?I was able to get data into the geotiff, but with a lot of
>> guess work and small tweaking. ?My t_srs is now:
>> "+a=6378137 +lon_1=-95.000 +b=6356752.314 +lon_0=-123.044 +proj=lcc
>> +lat_1=25.000 +lat_0=59.844 +ellps=WGS84 +no_defs +wktext +units=m"
>>
>> All of which are probably not necessary, but at this point it doesn't
>> hurt. ?The origin in that projection is the upper left corner of my
>> grid. ?So I now specify -te as something like:
>> "-te 0.0 -5120000.0 5120000.0 0.0"
>>
>> Which gets me something in the geotiff. ?I've played around with
>> different extents and my best result comes from me manually changing the
>> extents to match a picture I have from another system. ?The grid I'm
>> trying to match to is the first one on this page:
>> http://www.nws.noaa.gov/noaaport/html/icdtb48_2.html
>>
>> I have tried using pyproj and plugging in different corner points to get
>> the extent points in meters, but when I use those I get skewed images
>> (the grid should be 5120 x 5120).
>>
>> So at this point, I just need to find a way to get the extents figured
>> out in a programmatic way (like 1km * 5120 grid pixels = 5120000
>> meters). ?If you have any more advice that'd be great, otherwise I'll
>> just have to keep playing around and asking people around my work.
>> Thanks a lot for the help so far.
>>
>> -Dave
>>
>
> Since it worked for my case, i think its likely that the problems you are
> having are related to the projection and area definition. I have no
> experience with the AWIPS grid you are mentioning. What i would do in such a
> case is to get a sample file with the correct projection and boundingbox,
> and just read the metadata with:
> gdalinfo -proj4 samplefile.tif
>
> Optionally add some of the -norat -noct etc flags to hide the large tables.
> The proj4 string can be directly used by other gdal tools.
>
>
> Regards,
> Rutger
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-reproject-python-numpy-binary-swath-lat-lon-tp4978609p4981318.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From rigal at rapideye.net  Thu Jun 14 05:41:02 2012
From: rigal at rapideye.net (Matthieu Rigal)
Date: Thu, 14 Jun 2012 14:41:02 +0200
Subject: [gdal-dev] What about adding a "-b" band parameter to gdal_merge ?
Message-ID: <CAH7Xw_WiqZdGn4XpyBYonpMaCm6-ery7uBRQk9hH0BE6XdidNQ@mail.gmail.com>

Hi all,

I just came accross one possibility that I was missing. It is a bit the
complement of the "-separate" that was introduced in v. 1.9.0.
Why is there actually no "-b" option in gdal_merge ?

I have the case of a bunch of 5 bands images that I want to merge into one
single file but only for one band. The "-b" parameter would have been
perfect. Is it something that may be implemented/added in the future ?

For now, I am creating virtual rasters and I am then merging them or I
generate the 5 bands and then use gdal_translate, but it is more time and
space consuming.

Regards,
Matthieu Rigal

RapidEye AG
Molkenmarkt 30
14776 Brandenburg an der Havel
Germany
 
Follow us on Twitter! www.twitter.com/rapideye_global
 
Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
Management Board/Vorstand: Ryan Johnson
Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: 
Robert Johnson
Commercial Register/Handelsregister Potsdam HRB 24742 P
Tax Number/Steuernummer: 048/100/00320
VAT-Ident-Number/Ust.-ID: DE 815303842
DIN EN ISO 9001 certified
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120614/022d6721/attachment-0001.html>

From eadam at co.lincoln.or.us  Thu Jun 14 09:35:35 2012
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Thu, 14 Jun 2012 09:35:35 -0700
Subject: [gdal-dev] to find area of shapeFile
In-Reply-To: <CAP-zkzeeugNo=dLYU3WQjWvuDY9ryNzAHj6HJ4doqzjU_bd=0g@mail.gmail.com>
References: <CAP-zkzeUfHJ2NJSUFn8OcE=Qau40bRzgTUkjJuSAYR=8fXfx9w@mail.gmail.com>
	<CACqBkM_9teSSBqVg3gxNbWX6O-wTUbyfxTUzryeheymwU3oMbA@mail.gmail.com>
	<CAP-zkzeeugNo=dLYU3WQjWvuDY9ryNzAHj6HJ4doqzjU_bd=0g@mail.gmail.com>
Message-ID: <CACqBkM8tm_J0OgFihD-TvOW+6ZBFs_RAUSEyccka2CDz+f4N-g@mail.gmail.com>

Siva,

I'm not sure how to help you with the below code.  Perhaps if you
explain the error someone else on the list might be able to help.

My suggestion was how to get the area using the command line tool ogr2ogr.

Regards, Eli

On Thu, Jun 14, 2012 at 1:16 AM, SIVA RAMA KRISHNA
<s.r.kriishna at gmail.com> wrote:
> ?Eli Adam,
>
> ?????? i? am Trying To Find Area of A Polygon
> ?????? with the Following Code
>
> int main()
>     {
>     OGRRegisterAll();
>     OGRLayer *poLayer;
>     OGRFeature *poFeature;
>     OGRDataSource       *poDS;
>     poDS = OGRSFDriverRegistrar::Open( "first.shp");
>     poLayer = poDS->GetLayerByName( "first");
>     int nCount=poDS->GetLayerCount();
>     printf("%d",nCount);
>     poLayer->ResetReading();
>     OGRGeometry *poGeometry;
>     OGRGeometryCollection *PoGC;
>     while((poFeature=poLayer->GetNextFeature())!=NULL)
>     {
>         int nCnt=poFeature->GetFieldCount();
>         printf("\n %d",nCnt);
>         qDebug()<<"entered";
>         poGeometry=poFeature->GetGeometryRef();
>          if(poGeometry !=NULL
>              && wkbFlatten(poGeometry->getGeometryType()) == wkbPolygon)
>        {
>              PoGC->addGeometry(poGeometry);
>              double area = PoGC->get_Area() ;
>             qDebug() << area ;
>          }
>     }
>     return 0;
> }
>
> i am getting Error
> With Regards
> siva
>

From siebe at hydroconsult.nl  Thu Jun 14 10:08:20 2012
From: siebe at hydroconsult.nl (Siebe Bosch)
Date: Thu, 14 Jun 2012 19:08:20 +0200
Subject: [gdal-dev] Reading NetCDF using VB.NET
Message-ID: <4FDA1A84.9050900@hydroconsult.nl>

Hello all,

I'm trying to build a command line application in VB.NET that extracts 
parts from a NetCDF file.
For this I'm using the C# API as supplied with FWTools version 2.4.7. 
It's supposed to support VB.NET as well; am I right?

However, the application already crashes at the line Call GDAL.Registerall()
Here's the code:

Imports System
Imports OSGeo.GDAL
Imports OSGeo.OGR

Module MeteoBase

   'Copyright Siebe Bosch Hydroconsult, 2012
   'Lulofsstraat 55, unit 47 Den Haag, The Netherlands
   'this program creates subsets from precipitation data in NetCDF-files
   'as requested by the user. The program is designed to be called from
   'a PHP-script.

   Dim FileName As String
   Dim ds As Dataset

   Sub Main()
     Dim DebugMode As Boolean

     Console.WriteLine("This program extracts data from a NetCDF file")
     Console.WriteLine("Path to the NetCDF file (*.cn)")
     DebugMode = True

     'start reading the command line arguments
     If DebugMode Then
       FileName = "c:\GDAL\PM\1990\EVAP_PM_19901231.nc"
     Else
       If My.Application.CommandLineArgs.Count = 0 Then
         Console.WriteLine("Enter the path to the NetCDF-file:")
         FileName = Console.ReadLine()
       ElseIf My.Application.CommandLineArgs.Count <> 1 Then
         Console.WriteLine("Error: incorrect number of arguments presented")
       Else
         FileName = My.Application.CommandLineArgs(0)
       End If
     End If

     Try
       'start reading the NetCDF File
       Call Gdal.AllRegister()
       ds = Gdal.Open(FileName, Access.GA_ReadOnly)
       If ds Is Nothing Then
         Console.WriteLine("Cannot open NetCDF file: " & FileName)
         Throw New Exception
       Else
         Console.WriteLine("Raster dataset parameters:")
         Console.WriteLine("  Projection: " + ds.GetProjectionRef())
         Console.WriteLine("  RasterCount: " + ds.RasterCount)
         Console.WriteLine("  RasterSize (" + ds.RasterXSize + "," + 
ds.RasterYSize + ")")
       End If
     Catch ex As Exception
       Console.WriteLine("Error in sub Main of Meteobase")
     End Try

   End Sub

End Module


From siebe at hydroconsult.nl  Thu Jun 14 11:40:33 2012
From: siebe at hydroconsult.nl (Siebe Bosch)
Date: Thu, 14 Jun 2012 20:40:33 +0200
Subject: [gdal-dev] Reading NetCDF using VB.NET
In-Reply-To: <4FDA1A84.9050900@hydroconsult.nl>
References: <4FDA1A84.9050900@hydroconsult.nl>
Message-ID: <4FDA3021.7050107@hydroconsult.nl>

Dear all,

Never mind; I figured out that it's a problem that has been described 
before:
Either place the dll's from the BIN directory of FWTools next to the 
executable or add the the bin directory to the PATH environment...

Cheers,
Siebe

From etourigny.dev at gmail.com  Thu Jun 14 11:51:11 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 14 Jun 2012 15:51:11 -0300
Subject: [gdal-dev] Reading NetCDF using VB.NET
In-Reply-To: <4FDA1A84.9050900@hydroconsult.nl>
References: <4FDA1A84.9050900@hydroconsult.nl>
Message-ID: <CA+TxYvPytcQ+5riuVRr_xjVJ_JOBgp0DRbJORcD3sWscMmiV7Q@mail.gmail.com>

If you read the GDAL download page [1] you will find this:

"The latest FWtools version for Windows, 2.4.7, dates back to a
pre-1.6 GDAL version. In order to benefit from the latest and
greatest, you can refer to the other binary builds mentionned above."

If you want to support netcdf files, you should probably be using a
more recent gdal, at least 1.9

That means you should probably not use FWTools, and use the SDK from
Tamas Szekeres [3] - which according to [2] supports vb.net (C#)

[1] http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
[2] http://trac.osgeo.org/gdal/wiki/GdalOgrInCsharp
[3] http://vbkto.dyndns.org/sdk/

cheers
Etienne

On Thu, Jun 14, 2012 at 2:08 PM, Siebe Bosch <siebe at hydroconsult.nl> wrote:
> Hello all,
>
> I'm trying to build a command line application in VB.NET that extracts parts
> from a NetCDF file.
> For this I'm using the C# API as supplied with FWTools version 2.4.7. It's
> supposed to support VB.NET as well; am I right?
>
> However, the application already crashes at the line Call GDAL.Registerall()
> Here's the code:
>
> Imports System
> Imports OSGeo.GDAL
> Imports OSGeo.OGR
>
> Module MeteoBase
>
> ?'Copyright Siebe Bosch Hydroconsult, 2012
> ?'Lulofsstraat 55, unit 47 Den Haag, The Netherlands
> ?'this program creates subsets from precipitation data in NetCDF-files
> ?'as requested by the user. The program is designed to be called from
> ?'a PHP-script.
>
> ?Dim FileName As String
> ?Dim ds As Dataset
>
> ?Sub Main()
> ? ?Dim DebugMode As Boolean
>
> ? ?Console.WriteLine("This program extracts data from a NetCDF file")
> ? ?Console.WriteLine("Path to the NetCDF file (*.cn)")
> ? ?DebugMode = True
>
> ? ?'start reading the command line arguments
> ? ?If DebugMode Then
> ? ? ?FileName = "c:\GDAL\PM\1990\EVAP_PM_19901231.nc"
> ? ?Else
> ? ? ?If My.Application.CommandLineArgs.Count = 0 Then
> ? ? ? ?Console.WriteLine("Enter the path to the NetCDF-file:")
> ? ? ? ?FileName = Console.ReadLine()
> ? ? ?ElseIf My.Application.CommandLineArgs.Count <> 1 Then
> ? ? ? ?Console.WriteLine("Error: incorrect number of arguments presented")
> ? ? ?Else
> ? ? ? ?FileName = My.Application.CommandLineArgs(0)
> ? ? ?End If
> ? ?End If
>
> ? ?Try
> ? ? ?'start reading the NetCDF File
> ? ? ?Call Gdal.AllRegister()
> ? ? ?ds = Gdal.Open(FileName, Access.GA_ReadOnly)
> ? ? ?If ds Is Nothing Then
> ? ? ? ?Console.WriteLine("Cannot open NetCDF file: " & FileName)
> ? ? ? ?Throw New Exception
> ? ? ?Else
> ? ? ? ?Console.WriteLine("Raster dataset parameters:")
> ? ? ? ?Console.WriteLine(" ?Projection: " + ds.GetProjectionRef())
> ? ? ? ?Console.WriteLine(" ?RasterCount: " + ds.RasterCount)
> ? ? ? ?Console.WriteLine(" ?RasterSize (" + ds.RasterXSize + "," +
> ds.RasterYSize + ")")
> ? ? ?End If
> ? ?Catch ex As Exception
> ? ? ?Console.WriteLine("Error in sub Main of Meteobase")
> ? ?End Try
>
> ?End Sub
>
> End Module
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From BRENDA.R.TRIST at saic.com  Thu Jun 14 12:26:09 2012
From: BRENDA.R.TRIST at saic.com (Trist, Brenda R.)
Date: Thu, 14 Jun 2012 15:26:09 -0400
Subject: [gdal-dev] GDAL Byte Swapping?
Message-ID: <EB094E64C8EADD4DB9EA346CC4B835500304FA71@0015-its-exmb09.us.saic.com>

I am new to GDAL.  I recently downloaded GDAL have successfully built 

and linked to the source.  The program I am writing reads in a 

GeoTiff DEM (32bit format) and writes the dem data portion out to a 

ntif file (using NITRO NITF routines from sourceforge).

I then ran the command od -c on the tif file I am reading and on the 

ntif I just created to compare the DEM data area.  I noticed that 

while the data is there that the bytes appear to have been swapped.  

I am assuming that I don't want it to do that.  I was wondering if 

anyone has encountered this same thing and if there is something that 

I should be doing differently?  I researched the bug list and all 

mentions of byteswapping pretty much have been closed due to being 

fixed.  So I am assuming that I must be doing something wrong at my end.

 

 

Thank you,

Becky Trist

 

SAIC

100 Rialto Place, Suite 200

Melbourne, FL  32901

321-751-3236

 

"Sometimes you have to look reality in the eye, and deny it."   -
Garrison Keillor

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120614/55169f44/attachment.html>

From even.rouault at mines-paris.org  Thu Jun 14 12:41:21 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 14 Jun 2012 21:41:21 +0200
Subject: [gdal-dev] GDAL Byte Swapping?
In-Reply-To: <EB094E64C8EADD4DB9EA346CC4B835500304FA71@0015-its-exmb09.us.saic.com>
References: <EB094E64C8EADD4DB9EA346CC4B835500304FA71@0015-its-exmb09.us.saic.com>
Message-ID: <201206142141.21210.even.rouault@mines-paris.org>

Le jeudi 14 juin 2012 21:26:09, Trist, Brenda R. a ?crit :
> I am new to GDAL.  I recently downloaded GDAL have successfully built
> 
> and linked to the source.  The program I am writing reads in a
> 
> GeoTiff DEM (32bit format) and writes the dem data portion out to a
> 
> ntif file (using NITRO NITF routines from sourceforge).
> 
> I then ran the command od -c on the tif file I am reading and on the
> 
> ntif I just created to compare the DEM data area.  I noticed that
> 
> while the data is there that the bytes appear to have been swapped.
> 
> I am assuming that I don't want it to do that.  I was wondering if
> 
> anyone has encountered this same thing and if there is something that
> 
> I should be doing differently?  I researched the bug list and all
> 
> mentions of byteswapping pretty much have been closed due to being
> 
> fixed.  So I am assuming that I must be doing something wrong at my end.

On little endian (Intel like) architectures, TIFF files with multi-byte data 
types are (generally) written in little endian ordering (if the first 2 bytes 
of the TIFF files are "II", then it's little endian. If it's "MM", then it's 
big endian). Whereas in NITF, it is always big endian. So what you are seeing 
is likely expected.

You could compare that the 2 files contain the same data values (taking into 
account the byte swapping if needed) by checking the checksum value reported 
"gdalinfo -checksum thefile" 

Any reason not to use the GDAL NITF driver by the way ? 

From warmerdam at pobox.com  Thu Jun 14 12:41:56 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 14 Jun 2012 12:41:56 -0700
Subject: [gdal-dev] GDAL Byte Swapping?
In-Reply-To: <EB094E64C8EADD4DB9EA346CC4B835500304FA71@0015-its-exmb09.us.saic.com>
References: <EB094E64C8EADD4DB9EA346CC4B835500304FA71@0015-its-exmb09.us.saic.com>
Message-ID: <CA+YzLBdC5NCX4-7OeoX08f4bgrNKC8ZSLm02oyD52FikYW8kWg@mail.gmail.com>

On Thu, Jun 14, 2012 at 12:26 PM, Trist, Brenda R.
<BRENDA.R.TRIST at saic.com> wrote:
> I am new to GDAL.? I recently downloaded GDAL have successfully built
> and linked to the source.? The program I am writing reads in a
> GeoTiff DEM (32bit format) and writes the dem data portion out to a
> ntif file (using NITRO NITF routines from sourceforge).
> I then ran the command od -c on the tif file I am reading and on the
> ntif I just created to compare the DEM data area.? I noticed that
> while the data is there that the bytes appear to have been swapped.
> I am assuming that I don't want it to do that.? I was wondering if
> anyone has encountered this same thing and if there is something that
> I should be doing differently?? I researched the bug list and all
> mentions of byteswapping pretty much have been closed due to being
> fixed.? So I am assuming that I must be doing something wrong at my end.

Brenda,

I'm guessing you have written your own program
that uses GDAL to read the GeoTIFF and Nitro
to write the NITF but not using the GDAL NITF driver.
Is that right?

Assuming the answer is yes, then the only question is
what does GDAL do when reading from a GeoTIFF
into a memory buffer for non-8bit data.  The answer is
that the GeoTIFF driver analyses the byte ordering of
the GeoTIFF which will start with II if it is little endian
(Intel order) or MM if it is big endian (ie. motorola order).

The GeoTIFF driver will then byte swap the image
data if needed to bring it into the native byte order of
the machine on which the program is run.

This is well established machinery so I have no reason
to believe it would be broken.  You might want to check
if NITRO expects it's image pixel input in machine local
order or some other order.

Peeking into the GDAL NITF driver it appears that
16bit data in NITF is normally in big endian format.  So
if NITRO expects you to pass in the image buffer in
big endian order and you are running on Intel you may
need to byte swap things in your program.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer

From BRENDA.R.TRIST at saic.com  Thu Jun 14 12:56:24 2012
From: BRENDA.R.TRIST at saic.com (Trist, Brenda R.)
Date: Thu, 14 Jun 2012 15:56:24 -0400
Subject: [gdal-dev] GDAL Byte Swapping?
In-Reply-To: <201206142141.21210.even.rouault@mines-paris.org>
References: <EB094E64C8EADD4DB9EA346CC4B835500304FA71@0015-its-exmb09.us.saic.com>
	<201206142141.21210.even.rouault@mines-paris.org>
Message-ID: <EB094E64C8EADD4DB9EA346CC4B835500304FAD8@0015-its-exmb09.us.saic.com>

Even,

I knew of big and little endian but never knew how to tell the difference.  The original geotiff dem is little endian (II).  I have been comparing the two and for the most part the data is there it is just swapped.  The reason I did not use GDAL NITF is because at the time (January) I started writing this software I found NITRO NITF had all the routines necessary to write all the various header formats to a nitf file along with the dem data, PIAPRD TRE, and XML DE Segment.  I just in the past week incorporated GDAL in the mix because the libgeotiff/libtiff library routines could not handle 32bit imagery.  I had been testing with 8bit imagery by mistake and found I needed 32bit.  I just downloaded this 32bit today to further my testing.

Thank you,
Becky Trist

SAIC
100 Rialto Place, Suite 200
Melbourne, FL  32901
321-751-3236

?Sometimes you have to look reality in the eye, and deny it.??? - Garrison Keillor


-----Original Message-----
From: Even Rouault [mailto:even.rouault at mines-paris.org] 
Sent: Thursday, June 14, 2012 3:41 PM
To: gdal-dev at lists.osgeo.org
Cc: Trist, Brenda R.
Subject: Re: [gdal-dev] GDAL Byte Swapping?

Le jeudi 14 juin 2012 21:26:09, Trist, Brenda R. a ?crit :
> I am new to GDAL.  I recently downloaded GDAL have successfully built
> 
> and linked to the source.  The program I am writing reads in a
> 
> GeoTiff DEM (32bit format) and writes the dem data portion out to a
> 
> ntif file (using NITRO NITF routines from sourceforge).
> 
> I then ran the command od -c on the tif file I am reading and on the
> 
> ntif I just created to compare the DEM data area.  I noticed that
> 
> while the data is there that the bytes appear to have been swapped.
> 
> I am assuming that I don't want it to do that.  I was wondering if
> 
> anyone has encountered this same thing and if there is something that
> 
> I should be doing differently?  I researched the bug list and all
> 
> mentions of byteswapping pretty much have been closed due to being
> 
> fixed.  So I am assuming that I must be doing something wrong at my end.

On little endian (Intel like) architectures, TIFF files with multi-byte data types are (generally) written in little endian ordering (if the first 2 bytes of the TIFF files are "II", then it's little endian. If it's "MM", then it's big endian). Whereas in NITF, it is always big endian. So what you are seeing is likely expected.

You could compare that the 2 files contain the same data values (taking into account the byte swapping if needed) by checking the checksum value reported "gdalinfo -checksum thefile" 

Any reason not to use the GDAL NITF driver by the way ? 

From BRENDA.R.TRIST at saic.com  Thu Jun 14 13:03:51 2012
From: BRENDA.R.TRIST at saic.com (Trist, Brenda R.)
Date: Thu, 14 Jun 2012 16:03:51 -0400
Subject: [gdal-dev] GDAL Byte Swapping?
In-Reply-To: <CA+YzLBdC5NCX4-7OeoX08f4bgrNKC8ZSLm02oyD52FikYW8kWg@mail.gmail.com>
References: <EB094E64C8EADD4DB9EA346CC4B835500304FA71@0015-its-exmb09.us.saic.com>
	<CA+YzLBdC5NCX4-7OeoX08f4bgrNKC8ZSLm02oyD52FikYW8kWg@mail.gmail.com>
Message-ID: <EB094E64C8EADD4DB9EA346CC4B835500304FAF0@0015-its-exmb09.us.saic.com>

Frank,

Yes I have written my own program using the tools created by others.  I went with NITRO NITF to write the data because it had all the necessary header routines (File Header, Security, Image Header, PIAPRD TRE and XML DE Segment and CSSHPA Segment) at my disposal.  I am not one to reinvent the wheel.  When I have been testing I unfortunately was testing with 8bit data.  So when I tested on 32bit data it did not work.  I was using libgeotiff/libtiff libraries.  So a week ago I started my search on other libraries that could possibly handle what I am doing.  That is when I came across GDAL.  I downloaded a dem geotiff (32bit) today to further my testing.  Then I noticed the byte swapping.  Thanks for explaining to me the difference.  The original file is little endian.

Thank you,
Becky Trist

SAIC
100 Rialto Place, Suite 200
Melbourne, FL  32901
321-751-3236

"Sometimes you have to look reality in the eye, and deny it."?? - Garrison Keillor


-----Original Message-----
From: fwarmerdam at gmail.com [mailto:fwarmerdam at gmail.com] On Behalf Of Frank Warmerdam
Sent: Thursday, June 14, 2012 3:42 PM
To: Trist, Brenda R.
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] GDAL Byte Swapping?

On Thu, Jun 14, 2012 at 12:26 PM, Trist, Brenda R.
<BRENDA.R.TRIST at saic.com> wrote:
> I am new to GDAL.? I recently downloaded GDAL have successfully built 
> and linked to the source.? The program I am writing reads in a GeoTiff 
> DEM (32bit format) and writes the dem data portion out to a ntif file 
> (using NITRO NITF routines from sourceforge).
> I then ran the command od -c on the tif file I am reading and on the 
> ntif I just created to compare the DEM data area.? I noticed that 
> while the data is there that the bytes appear to have been swapped.
> I am assuming that I don't want it to do that.? I was wondering if 
> anyone has encountered this same thing and if there is something that 
> I should be doing differently?? I researched the bug list and all 
> mentions of byteswapping pretty much have been closed due to being 
> fixed.? So I am assuming that I must be doing something wrong at my end.

Brenda,

I'm guessing you have written your own program that uses GDAL to read the GeoTIFF and Nitro to write the NITF but not using the GDAL NITF driver.
Is that right?

Assuming the answer is yes, then the only question is what does GDAL do when reading from a GeoTIFF into a memory buffer for non-8bit data.  The answer is that the GeoTIFF driver analyses the byte ordering of the GeoTIFF which will start with II if it is little endian (Intel order) or MM if it is big endian (ie. motorola order).

The GeoTIFF driver will then byte swap the image data if needed to bring it into the native byte order of the machine on which the program is run.

This is well established machinery so I have no reason to believe it would be broken.  You might want to check if NITRO expects it's image pixel input in machine local order or some other order.

Peeking into the GDAL NITF driver it appears that 16bit data in NITF is normally in big endian format.  So if NITRO expects you to pass in the image buffer in big endian order and you are running on Intel you may need to byte swap things in your program.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam at pobox.com light and sound - activate the windows | http://pobox.com/~warmerdam and watch the world go round - Rush? ? | Geospatial Software Developer

From dlopezaspe at gmail.com  Thu Jun 14 13:06:39 2012
From: dlopezaspe at gmail.com (sigologo)
Date: Thu, 14 Jun 2012 13:06:39 -0700 (PDT)
Subject: [gdal-dev] How to Import one Subdataset to Netcdf
In-Reply-To: <1339197023743-4980080.post@n6.nabble.com>
References: <1339193590008-4980075.post@n6.nabble.com>
	<CA+TxYvN2P=m8Lh918LtTx6QWLTHTYY9a=wwgN-0LuqyJx-BJ7g@mail.gmail.com>
	<1339197023743-4980080.post@n6.nabble.com>
Message-ID: <1339704399813-4981515.post@n6.nabble.com>

Hello Everyone....
 I sending mode batch for many files NETCDF....

for file in  fnl*.nc ; do
	echo "map: $file"
	gdal_translate -a_srs "EPSG:4326" -a_nodata 65535   -a_ullr -180 90 180 -90 
NETCDF:"$file":T_CDC_3_CCY_10 ${file}_prep.tif
done

Thanks a lot for assistance Etienne!!!!!!!!!!!!
GDAL is powerful!!! 

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-Import-one-Subdataset-to-Netcdf-tp4980075p4981515.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From dhoese at gmail.com  Thu Jun 14 21:56:05 2012
From: dhoese at gmail.com (David Hoese)
Date: Thu, 14 Jun 2012 23:56:05 -0500
Subject: [gdal-dev] reproject python numpy binary swath/lat/lon
In-Reply-To: <mailman.2468.1339678118.1116.gdal-dev@lists.osgeo.org>
References: <mailman.2468.1339678118.1116.gdal-dev@lists.osgeo.org>
Message-ID: <4FDAC065.9050007@gmail.com>

Hi Rutger (long email below),

I figured out my projection problems.  To increase google search 
accuracy I'm going to try to include as many relevant terms as I 
searched for to describe what happened.

I was attempting to project VIIRS binary image data that I had extracted 
from the SDR hdf files.  This extraction left me with three files, the 
binary image file, the binary latitude file, the binary longitude file.  
I needed to project the data into AWIPS grids, east 211 for testing.  
The grid is 5120 x 5120 with about 1km equal area pixels.  I had 
previously been using ms2gt (a mapx based toolbox, gpd files to specify 
projection parameters) to do this, since it was the first thing 
suggested, and had a png image of what the remapped data should look 
like.  To be able to use GDAL I needed to convert the ms2gt/mapx 
projection parameters into a proj4 string.  Seemed pretty 1:1 and 
generally it was.

After spending way too much time trying to figure out why the images 
weren't looking the same, I decided to look at the ms2gt/mapx source and 
figure out how it was using the parameters to see how that differs from 
the expected behavior.  The version of ms2gt I was using was very old 
(2001), so was the mapx library.  The documentation mentions that you 
can specify the equatorial and polar radius so that's what I had been 
using in proj4.  I checked the source code of mapx...and it IGNORES it, 
it doesn't even give you an error about an unknown parameter.

So after figuring this out, I changed the proj4 parameters to say that 
+a and +b were the same.  I then made the origin of the projection the 
origin specified on the NOAA page (from previous email) and used pyproj 
to calculate the grid origin offset in meters to use for the -te (target 
extent) in the gdalwarp call.  And finally it worked, the 2 images 
matched, at least visually.  Now I just need to work on bow tie 
correction (even though "Bow ties are cool"), but some coworkers may 
know how to handle this...or gdal-dev will get another email from me.  
I'll also need to meet my original goal and do the projecting with the 
Python bindings.

Thanks a lot Rutger.

-Dave

P.S. Final gdalwarp call, may not be exactly correct for AWIPS since I 
haven't tested it yet:
gdalwarp -s_srs "EPSG:4326" -t_srs "+proj=lcc +ellps=clrk66 +a=6378137 
+b=6378137 +e=0.0818191910435 +lat_0=24.9999 +lon_0=-95 +lat_1=24.9999 
+lat_ts=25.0001 +units=m +no_defs" -te -1952976.3246 -828316.5944 
3248431.6754 4373091.4056 -of GTiff -geoloc -overwrite -r bilinear -ts 
5120 5120 image.vrt out.tif

Note: Clark1866 is what ms2gt says its default is. And the 24.9999 and 
25.0001 are artifacts from previous iterations.

On 6/14/12 7:48 AM, gdal-dev-request at lists.osgeo.org wrote:
> Since it worked for my case, i think its likely that the problems you are
> having are related to the projection and area definition. I have no
> experience with the AWIPS grid you are mentioning. What i would do in such a
> case is to get a sample file with the correct projection and boundingbox,
> and just read the metadata with:
> gdalinfo -proj4 samplefile.tif
>
> Optionally add some of the -norat -noct etc flags to hide the large tables.
> The proj4 string can be directly used by other gdal tools.
>
>
> Regards,
> Rutger


From tigerpvr at gmail.com  Fri Jun 15 00:26:06 2012
From: tigerpvr at gmail.com (Pavel Rudchenko)
Date: Fri, 15 Jun 2012 11:26:06 +0400
Subject: [gdal-dev] GDAL GeoTiff tegs problem
Message-ID: <CAKhK-3Uc705o3sYboft+nhux222oBW6wNrOGxJhN7=FNE-VVgQ@mail.gmail.com>

Hello! I create GeoTiff files with GDAL library (.net wrapper).
All right, but some geo-tags not setted.
For example, GeogCitationGeoKey (Ascii,1): ""
But shall be: GeogCitationGeoKey (Ascii,6): "WGS84"

My vode to set geo-data is:

SpatialReference oSrs = new SpatialReference(null);
oSrs.SetUTM(30, 1);
Double convertToRadians = Double.Parse(Osr.SRS_UA_DEGREE_CONV,
 CultureInfo.InvariantCulture.NumberFormat);
oSrs.SetGeogCS(string.Empty, //"UTM 30 (WGS84) in northern hemisphere.",
 Osr.SRS_DN_WGS84, Osr.SRS_DN_WGS84,
 Osr.SRS_WGS84_SEMIMAJOR, Osr.SRS_WGS84_INVFLATTENING,
 "Greenwich", 0.0, "degree", convertToRadians);
string wkt;
oSrs.ExportToWkt(out wkt);
ds.SetProjection(wkt);

Please, tell me, what I do not right?

From tigerpvr at gmail.com  Fri Jun 15 00:41:49 2012
From: tigerpvr at gmail.com (Pavel Rudchenko)
Date: Fri, 15 Jun 2012 11:41:49 +0400
Subject: [gdal-dev] GDAL GeoTiff tegs problem: how to set
	GeogPrimeMeridianGeoKey?
Message-ID: <CAKhK-3UG=ngL_BaZvT+9EoJOjC-r814ShPTEz32HbAx2VBYHtA@mail.gmail.com>

Hello,
I have second question.
How to set geo-tag GeogPrimeMeridianGeoKey? Now it isn't created.

My GDAL code is:

SpatialReference oSrs = new SpatialReference(null);
oSrs.SetUTM(30, 1);
Double convertToRadians = Double.Parse(Osr.SRS_UA_DEGREE_CONV,
 CultureInfo.InvariantCulture.NumberFormat);
oSrs.SetGeogCS(string.Empty, //"UTM 30 (WGS84) in northern hemisphere.",
 Osr.SRS_DN_WGS84, Osr.SRS_DN_WGS84,
 Osr.SRS_WGS84_SEMIMAJOR, Osr.SRS_WGS84_INVFLATTENING,
 "Greenwich", 0.0, "degree", convertToRadians);
string wkt;
oSrs.ExportToWkt(out wkt);
ds.SetProjection(wkt);

Thank you.

From jukka.rahkonen at mmmtike.fi  Fri Jun 15 00:45:07 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 15 Jun 2012 07:45:07 +0000 (UTC)
Subject: [gdal-dev] Ogr2ogr from Spatialite into PostGIS stops to
	non-ASCII character [SOLVED]
References: <loom.20120613T134901-361@post.gmane.org>
	<4FD882F5.7010809@gatewaygeomatics.com>
	<loom.20120613T144810-61@post.gmane.org>
	<loom.20120613T153825-617@post.gmane.org>
	<4FD8A1AE.4010306@gatewaygeomatics.com>
Message-ID: <loom.20120615T091249-630@post.gmane.org>

Jeff McKenna <jmckenna <at> gatewaygeomatics.com> writes:

> 
> On 12-06-13 10:46 AM, Jukka Rahkonen wrote:
> > 
> > Next trouble: I would now take the data back from PostGIS into Spatialite (it
> > was much faster to do some processing with PostGIS) but the happens again: my
> > non-ascii characters are converted to something invalid. I cannot see any
> > SQLITECLIENTENCODING option or anything.
> > 
> 
> It is difficult for me to comment without testing.  I would guess that
> you need to use the "-sql" ogr2ogr switch with something like this
> command for sqlite: http://www.sqlite.org/pragma.html#pragma_encoding
> 
> -jeff

This appeared to be an garbage in, garbage out case. I had made my initial
import from LATIN1 encoded shapefiles into Spatialite without setting
SHAPE_ENCODING first. That lead to wrong encoding used inside Spatialite. It
seemed that translating this carbage into PostGIS was successful after I set the
 PGCLIENTENCODING to LATIN1 but apparently it did not lead to totally correct
result with my data.
I started everything again by setting SHAPE_ENCODING before doing the initial
shapefiles to Spatialite conversion and then my characters seem to remain
correct in the following steps.

These character encoding things are a bit messy. Sometimes conversions go well
without any encoding settings but sometimes not and then there are driver
specific config options like SHAPE_ENCODING and PGCLIENTENCODING and
DXF_ENCODING and some other ways are needed when working with GML or Mapinfo
files. I would remember better the usage of some switch like
-SOURCE_ENCODING=xxx if it was common for all the drivers.

-Jukka Rahkonen- 



From s.r.kriishna at gmail.com  Fri Jun 15 01:43:10 2012
From: s.r.kriishna at gmail.com (SIVA RAMA KRISHNA)
Date: Fri, 15 Jun 2012 14:13:10 +0530
Subject: [gdal-dev] to store a shapeFile with the following code getting
 problem assigning goemetries in translateLayer Function
Message-ID: <CAP-zkzeYOWAOaNpu8ZBPioVchKCv=xpQbtBHVu4-qmJinX=yWQ@mail.gmail.com>

#include "main.h"#include "ogrsf_frmts.h"#include "ogr_p.h"#include
"cpl_conv.h"#include "cpl_string.h"#include "ogr_api.h"#include
"gdal.h"static int TranslateLayer(OGRLayer
*poPassedLayer,OGRDataSource *ODS,char *pszNewLayerName,int
eGType);int main( ){     const char  *pszFormat = "ESRI Shapefile";
 const char  *pszDataSource ="india_ds.shp";     const char
*pszDestDataSource = "out.shp";     char *pszNewLayerName=NULL;
OGRLayer        *poLayer;     OGRDataSource       *poDS;
OGRDataSource       *poODS=NULL;      const char *pszDriverName =
"ESRI Shapefile";         OGRSFDriver *poDriver;
OGRRegisterAll();         poDriver =
OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(
    pszDriverName );         if( poDriver == NULL )         {
   printf( "%s driver not available.\n", pszDriverName );
exit( 1 );         }         poODS = poDriver->*CreateDataSource*(
"out.shp", NULL );         if( poODS == NULL )         {
printf( "Creation of output file failed.\n" );             exit( 1 );
       }         poDS = poDriver->*Open*( "india_ds.shp" );
poLayer=poDS->*GetLayerByName*("india_ds");         if( poDS == NULL )
            {                 printf( "Open failed.\n" );
   exit( 1 );             }          int nLayerCount;
OGRLayer** papoLayers = NULL;           nLayerCount =
poDS->*GetLayerCount*();                printf("\n %d",nLayerCount);
             papoLayers = (OGRLayer**)CPLMalloc(sizeof(OGRLayer*) *
nLayerCount);                for( int iLayer = 0;
iLayer < nLayerCount;                     iLayer++ )                {
                    poLayer = poDS->*GetLayer*(iLayer);
      papoLayers[iLayer] = poLayer;                }
pszNewLayerName = CPLStrdup(CPLGetBasename(pszDestDataSource));
    printf("%s",pszNewLayerName);             printf("\n
%d",poLayer->*GetFeatureCount*());            int eGType=5;
for( int iLayer = 0;                iLayer < nLayerCount;
  iLayer++ )            {                 OGRLayer        *poLayer =
papoLayers[iLayer];                 if (poLayer == NULL)
     continue;                  OGRLayer* poPassedLayer = poLayer;
             if( !TranslateLayer(  poPassedLayer,
poODS,pszNewLayerName, eGType));                      {
         exit(1);                       }            }   return
0;}static int TranslateLayer(OGRLayer  *poSrcLayer,OGRDataSource
*poDstDS,char *pszNewLayerName,int  eGType)   {        OGRLayer
*poDstLayer;        OGRFeatureDefn *poSrcFDefn;        OGRFeatureDefn
*poDstFDefn = NULL;        OGRSpatialReference *poOutputSRS;
poSrcFDefn = poSrcLayer->*GetLayerDefn*();        poOutputSRS =
poSrcLayer->*GetSpatialRef*();        poDstLayer =
poDstDS->*GetLayerByName*(pszNewLayerName);         poDstLayer =
poDstDS->*CreateLayer*( pszNewLayerName, poOutputSRS,
                             (OGRwkbGeometryType) eGType);
poDstLayer->*SetStyleTable*( poSrcLayer->*GetStyleTable* () );
 int         nSrcFieldCount = poSrcFDefn->GetFieldCount();
printf("%d",nSrcFieldCount );          poDstFDefn =
poDstLayer->*GetLayerDefn*();          OGRFeature  *poFeature;
printf("\n 2 %d",poSrcLayer->*GetFeatureCount*());      OGRFeature
 *poDstFeature = NULL;        poSrcLayer->*ResetReading*();
while((poFeature = poSrcLayer->*GetNextFeature*()) != NULL)
   {                     poFeature = poSrcLayer->*GetNextFeature*();
                  OGRGeometry* poSrcGeometry =
poFeature->GetGeometryRef();                     poDstFeature =
OGRFeature::CreateFeature( poDstLayer->*GetLayerDefn*() );
        poDstFeature->*SetFID*( poFeature->GetFID() );
    OGRGeometry* poDstGeometry = poDstFeature->GetGeometryRef();
              poDstFeature->SetGeometry(poSrcGeometry);             }
return 0;}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120615/1d26b94e/attachment-0001.html>

From mateusz at loskot.net  Fri Jun 15 02:15:38 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 15 Jun 2012 10:15:38 +0100
Subject: [gdal-dev] to store a shapeFile with the following code getting
 problem assigning goemetries in translateLayer Function
In-Reply-To: <CAP-zkzeYOWAOaNpu8ZBPioVchKCv=xpQbtBHVu4-qmJinX=yWQ@mail.gmail.com>
References: <CAP-zkzeYOWAOaNpu8ZBPioVchKCv=xpQbtBHVu4-qmJinX=yWQ@mail.gmail.com>
Message-ID: <CABUeae_05d8V3868D0t4aZG9d6jMDvoMeFpDmc_34uZDS+9Esw@mail.gmail.com>

Read this first:

http://www.catb.org/~esr/faqs/smart-questions.html

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From pcorti at gmail.com  Fri Jun 15 03:10:57 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Fri, 15 Jun 2012 12:10:57 +0200
Subject: [gdal-dev] Cannot read NetCDF subdatasets
Message-ID: <CAHXrU-L8sF6_HUUJ9ZLVo=QKdGqjW7hrFU=EqAhLfW+HWxi7DQ@mail.gmail.com>

Hi all

While I can succesfully read NetCDF in Mint 12 (my development
environment), I cannot manage to read the subdatasets in REL5 (the
production server).

In REL5 I can succesfully read the NetCDF dataset with gdalinfo:

gdalinfo /my/full/path/mydataset.nc4

But if I try reading a subdataset, I get the following error (CPL_DEBUG is ON):

$ gdalinfo NETCDF:"/my/full/path/mydataset.nc4":MY_VAR
GDAL_netCDF:
=====
calling nc_open(/my/full/path/mydataset.nc4 )

GDAL: GDALClose(NETCDF:/my/full/path/mydataset.nc4:MY_VAR, this=0x85177f8)
ERROR 4: `NETCDF:/my/full/path/mydataset.nc4:MY_VAR' does not exist in
the file system,
and is not recognised as a supported dataset name.

gdalinfo failed - unable to open 'NETCDF:/my/full/path/mydataset.nc4:MY_VAR'.
GDAL: In GDALDestroy - unloading GDAL shared library.

Some more information on my system configuration:

$ rpm -qa hdf5*
hdf5-1.8.7-1.el5.rf
hdf5-devel-1.8.7-1.el5.rf

$ gdalinfo --version
GDAL 1.9.0, released 2011/12/29

$ gdalinfo --formats | grep -i cdf
  GMT (rw): GMT NetCDF Grid Format
  netCDF (rw+): Network Common Data Format

$ gdalinfo --formats | grep -i hdf
  HDF4 (ro): Hierarchical Data Format Release 4
  HDF4Image (rw+): HDF4 Dataset
  HDF5 (ro): Hierarchical Data Format Release 5
  HDF5Image (ro): HDF5 Dataset

any ideas? Is it possible that I am missing any dependency?
thanks so much

p

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti

From yjacolin at free.fr  Fri Jun 15 03:16:16 2012
From: yjacolin at free.fr (Free)
Date: Fri, 15 Jun 2012 12:16:16 +0200
Subject: [gdal-dev] Cannot read NetCDF subdatasets
In-Reply-To: <CAHXrU-L8sF6_HUUJ9ZLVo=QKdGqjW7hrFU=EqAhLfW+HWxi7DQ@mail.gmail.com>
References: <CAHXrU-L8sF6_HUUJ9ZLVo=QKdGqjW7hrFU=EqAhLfW+HWxi7DQ@mail.gmail.com>
Message-ID: <4202337.4ulnyHD3Et@tatras>

Paolo,

I had a similar issue with 32b system with some NetCDF files with "bigfile" flag. 
We should use (if I remember correctly) 64b system.

Regards,

Y.
Le vendredi 15 juin 2012 12:10:57 Paolo Corti a ?crit :
> Hi all
> 
> While I can succesfully read NetCDF in Mint 12 (my development
> environment), I cannot manage to read the subdatasets in REL5 (the
> production server).
> 
> In REL5 I can succesfully read the NetCDF dataset with gdalinfo:
> 
> gdalinfo /my/full/path/mydataset.nc4
> 
> But if I try reading a subdataset, I get the following error (CPL_DEBUG is
> ON):
> 
> $ gdalinfo NETCDF:"/my/full/path/mydataset.nc4":MY_VAR
> GDAL_netCDF:
> =====
> calling nc_open(/my/full/path/mydataset.nc4 )
> 
> GDAL: GDALClose(NETCDF:/my/full/path/mydataset.nc4:MY_VAR, this=0x85177f8)
> ERROR 4: `NETCDF:/my/full/path/mydataset.nc4:MY_VAR' does not exist in
> the file system,
> and is not recognised as a supported dataset name.
> 
> gdalinfo failed - unable to open
> 'NETCDF:/my/full/path/mydataset.nc4:MY_VAR'. GDAL: In GDALDestroy -
> unloading GDAL shared library.
> 
> Some more information on my system configuration:
> 
> $ rpm -qa hdf5*
> hdf5-1.8.7-1.el5.rf
> hdf5-devel-1.8.7-1.el5.rf
> 
> $ gdalinfo --version
> GDAL 1.9.0, released 2011/12/29
> 
> $ gdalinfo --formats | grep -i cdf
>   GMT (rw): GMT NetCDF Grid Format
>   netCDF (rw+): Network Common Data Format
> 
> $ gdalinfo --formats | grep -i hdf
>   HDF4 (ro): Hierarchical Data Format Release 4
>   HDF4Image (rw+): HDF4 Dataset
>   HDF5 (ro): Hierarchical Data Format Release 5
>   HDF5Image (ro): HDF5 Dataset
> 
> any ideas? Is it possible that I am missing any dependency?
> thanks so much
> 
> p

From etourigny.dev at gmail.com  Fri Jun 15 03:53:34 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 15 Jun 2012 07:53:34 -0300
Subject: [gdal-dev] Cannot read NetCDF subdatasets
In-Reply-To: <4202337.4ulnyHD3Et@tatras>
References: <CAHXrU-L8sF6_HUUJ9ZLVo=QKdGqjW7hrFU=EqAhLfW+HWxi7DQ@mail.gmail.com>
	<4202337.4ulnyHD3Et@tatras>
Message-ID: <CA+TxYvMwssK-Zm82OoO+icz7TobevG00Kx1ZNeByZ_Ekx3d86w@mail.gmail.com>

That file does not use the "bigfile" flag, but it is probably a
netcdf-4 file (with hdf5 storage).

Regardless, "bigfiles" are supported since gdal-1.9.0 on 32-bit platforms.

I would guess your netcdf and gdal installation do not have netcdf-4 support.
And probably a 'gdalinfo <file>' shows the hdf5 driver picks it up, right?

You can check your netcdf-4 suppport with

1)
$nc-config --all
(check for nc-4)
  --has-nc4   -> yes
  --has-hdf5  -> yes

2)
$ ncdump -k <file>
netCDF-4
$ ncdump <file>
...

3) gdalinfo --format netcdf

you should see:
<CreationOptionList>
  <Option name="FORMAT" type="string-select" default="NC">
    <Value>NC</Value>
    <Value>NC2</Value>
    <Value>NC4</Value>
    <Value>NC4C</Value>
  </Option>

If it is supported, could you share an example file?

Etienne

On Fri, Jun 15, 2012 at 7:16 AM, Free <yjacolin at free.fr> wrote:
> Paolo,
>
> I had a similar issue with 32b system with some NetCDF files with "bigfile" flag.
> We should use (if I remember correctly) 64b system.
>
> Regards,
>
> Y.
> Le vendredi 15 juin 2012 12:10:57 Paolo Corti a ?crit :
>> Hi all
>>
>> While I can succesfully read NetCDF in Mint 12 (my development
>> environment), I cannot manage to read the subdatasets in REL5 (the
>> production server).
>>
>> In REL5 I can succesfully read the NetCDF dataset with gdalinfo:
>>
>> gdalinfo /my/full/path/mydataset.nc4
>>
>> But if I try reading a subdataset, I get the following error (CPL_DEBUG is
>> ON):
>>
>> $ gdalinfo NETCDF:"/my/full/path/mydataset.nc4":MY_VAR
>> GDAL_netCDF:
>> =====
>> calling nc_open(/my/full/path/mydataset.nc4 )
>>
>> GDAL: GDALClose(NETCDF:/my/full/path/mydataset.nc4:MY_VAR, this=0x85177f8)
>> ERROR 4: `NETCDF:/my/full/path/mydataset.nc4:MY_VAR' does not exist in
>> the file system,
>> and is not recognised as a supported dataset name.
>>
>> gdalinfo failed - unable to open
>> 'NETCDF:/my/full/path/mydataset.nc4:MY_VAR'. GDAL: In GDALDestroy -
>> unloading GDAL shared library.
>>
>> Some more information on my system configuration:
>>
>> $ rpm -qa hdf5*
>> hdf5-1.8.7-1.el5.rf
>> hdf5-devel-1.8.7-1.el5.rf
>>
>> $ gdalinfo --version
>> GDAL 1.9.0, released 2011/12/29
>>
>> $ gdalinfo --formats | grep -i cdf
>> ? GMT (rw): GMT NetCDF Grid Format
>> ? netCDF (rw+): Network Common Data Format
>>
>> $ gdalinfo --formats | grep -i hdf
>> ? HDF4 (ro): Hierarchical Data Format Release 4
>> ? HDF4Image (rw+): HDF4 Dataset
>> ? HDF5 (ro): Hierarchical Data Format Release 5
>> ? HDF5Image (ro): HDF5 Dataset
>>
>> any ideas? Is it possible that I am missing any dependency?
>> thanks so much
>>
>> p
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From tigerpvr at gmail.com  Fri Jun 15 05:03:51 2012
From: tigerpvr at gmail.com (Pavel Rudchenko)
Date: Fri, 15 Jun 2012 16:03:51 +0400
Subject: [gdal-dev] How to write more stuff of GeoKeys?
Message-ID: <CAKhK-3UfOYk0YZsvxR3PwEzJShJ7R7D1ztWke37JCeeg0XFp0g@mail.gmail.com>

Hello, people!
My task is to write more GeoKeys tegs to GeoTiff file.
How can do it with the GDAL (C# wrapper)?
Fow example, I can't write GeoKeys "GeogEllipsoidGeoKey",
"GeogSemiMajorAxisGeoKey", "GeogSemiMinorAxisGeoKey", and others.
Maximum keys that I can do with GDAL is:

   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      GTCitationGeoKey (Ascii,22): "WGS 84 / UTM zone 30N"
      GeogCitationGeoKey (Ascii,1): ""
      GeogAngularUnitsGeoKey (Short,1): Angular_Degree
      ProjectedCSTypeGeoKey (Short,1): PCS_WGS84_UTM_zone_30N
      ProjLinearUnitsGeoKey (Short,1): Linear_Meter
      End_Of_Keys.
   End_Of_Geotiff.

And why "GeogCitationGeoKey" is empty?

From etourigny.dev at gmail.com  Fri Jun 15 07:08:47 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 15 Jun 2012 11:08:47 -0300
Subject: [gdal-dev] GDAL GeoTiff tegs problem
In-Reply-To: <CAKhK-3Uc705o3sYboft+nhux222oBW6wNrOGxJhN7=FNE-VVgQ@mail.gmail.com>
References: <CAKhK-3Uc705o3sYboft+nhux222oBW6wNrOGxJhN7=FNE-VVgQ@mail.gmail.com>
Message-ID: <CA+TxYvNij37ufhN5FzkwP0R2jbsqP2=bHkBJbVP0yfc05Mcf=Q@mail.gmail.com>

To make sure it's recognized as WGS84 datum/spheroid you should use

SetWellKnownGeogCS("WGS84") instead of SetGeogCS(...), and no need for
convertToRadians

Also, the arguments to SetGeogCS() are probably optional in your case

This might solve this problem and the other one you sent in another email.

Etienne

On Fri, Jun 15, 2012 at 4:26 AM, Pavel Rudchenko <tigerpvr at gmail.com> wrote:
> Hello! I create GeoTiff files with GDAL library (.net wrapper).
> All right, but some geo-tags not setted.
> For example, GeogCitationGeoKey (Ascii,1): ""
> But shall be: GeogCitationGeoKey (Ascii,6): "WGS84"
>
> My vode to set geo-data is:
>
> SpatialReference oSrs = new SpatialReference(null);
> oSrs.SetUTM(30, 1);
> Double convertToRadians = Double.Parse(Osr.SRS_UA_DEGREE_CONV,
> ?CultureInfo.InvariantCulture.NumberFormat);
> oSrs.SetGeogCS(string.Empty, //"UTM 30 (WGS84) in northern hemisphere.",
> ?Osr.SRS_DN_WGS84, Osr.SRS_DN_WGS84,
> ?Osr.SRS_WGS84_SEMIMAJOR, Osr.SRS_WGS84_INVFLATTENING,
> ?"Greenwich", 0.0, "degree", convertToRadians);
> string wkt;
> oSrs.ExportToWkt(out wkt);
> ds.SetProjection(wkt);
>
> Please, tell me, what I do not right?
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From geomartino at gmail.com  Fri Jun 15 07:46:27 2012
From: geomartino at gmail.com (Martin Ouellet)
Date: Fri, 15 Jun 2012 10:46:27 -0400
Subject: [gdal-dev] convert .tif/.tfwx/.aux.xml to a geotiff?
Message-ID: <CAENYpGY6XR5RSVDcqQSM+a2WQugPdgraomE5b5=vWNSJ_ebN9A@mail.gmail.com>

Hi,

I manually georeferenced some images in ArcGIS and at the end, I got a
.tfwx file and a aux.xml.

I wish to convert them into geotiff with the georeferenced info in the
header:

1) I've renamed the .tfwx into .tfw and run a gdal_translate.  The command
didn't failed but the resulting image is not georeferenced at all

Is it possible to do that perhaps using the info in the .aux.xml file?

Thanks,

MartinO
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120615/25f0a2a8/attachment.html>

From etourigny.dev at gmail.com  Fri Jun 15 08:10:52 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 15 Jun 2012 12:10:52 -0300
Subject: [gdal-dev] netcdf driver does not support VSIFILE
Message-ID: <CA+TxYvMZuiFnOhyLjBMSxeKEHGEgRsM5URy9jCDHk85X-Yf+LA@mail.gmail.com>

All VSIFILE interfaces (/vsicurl/ , /vsigzip/ , etc.) do not work with
the netcdf driver.

As the netcdf driver uses libnetcdf, I'm not sure the driver can be
modified to use the "large file API".

Can someone comment on this?

The GTiff driver support VSI, how is this done given that the driver
uses libgeotiff? Does the tifvsi.cpp/ file make this possible, by
acting as a proxy?  If so, can a similar thing be done with libnetcdf?

thanks,
Etienne

From even.rouault at mines-paris.org  Fri Jun 15 08:44:18 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 15 Jun 2012 17:44:18 +0200
Subject: [gdal-dev] netcdf driver does not support VSIFILE
In-Reply-To: <CA+TxYvMZuiFnOhyLjBMSxeKEHGEgRsM5URy9jCDHk85X-Yf+LA@mail.gmail.com>
References: <CA+TxYvMZuiFnOhyLjBMSxeKEHGEgRsM5URy9jCDHk85X-Yf+LA@mail.gmail.com>
Message-ID: <1339775058.4fdb5852c959a@imp.free.fr>

Selon Etienne Tourigny <etourigny.dev at gmail.com>:

> All VSIFILE interfaces (/vsicurl/ , /vsigzip/ , etc.) do not work with
> the netcdf driver.
>
> As the netcdf driver uses libnetcdf, I'm not sure the driver can be
> modified to use the "large file API".
>
> Can someone comment on this?
>
> The GTiff driver support VSI, how is this done given that the driver
> uses libgeotiff? Does the tifvsi.cpp/ file make this possible, by
> acting as a proxy?

libtiff has a TIFFClientOpen() interface where you provide pointers to functions
for various stuff, including I/O functions. And libgeotiff has a similar
XTIFFClientOpen() that just calls TIFFClientOpen() after doing some libgeotiff
initialization.

> If so, can a similar thing be done with libnetcdf?

You are probably one of the best placed to answer the question ;-)

More seriously, you need to look at the libnetcdf API to see if it offers some
abstraction layer for its I/O, that can be customized, instead of doing directly
fopen(), fread(), fwrite(), fseek(), fclose() directly all over its code. If
not, and you want it, you'll need to hack into libnetcdf to avoid those direct
calls to the standard library.

>
> thanks,
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From etourigny.dev at gmail.com  Fri Jun 15 10:15:49 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 15 Jun 2012 14:15:49 -0300
Subject: [gdal-dev] netcdf driver does not support VSIFILE
In-Reply-To: <1339775058.4fdb5852c959a@imp.free.fr>
References: <CA+TxYvMZuiFnOhyLjBMSxeKEHGEgRsM5URy9jCDHk85X-Yf+LA@mail.gmail.com>
	<1339775058.4fdb5852c959a@imp.free.fr>
Message-ID: <CA+TxYvPsyp833_0z1ugqmuta4JpgxxY8jLRsCzuyJXrZYNkbbw@mail.gmail.com>

On Fri, Jun 15, 2012 at 12:44 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Selon Etienne Tourigny <etourigny.dev at gmail.com>:
>
>> All VSIFILE interfaces (/vsicurl/ , /vsigzip/ , etc.) do not work with
>> the netcdf driver.
>>
>> As the netcdf driver uses libnetcdf, I'm not sure the driver can be
>> modified to use the "large file API".
>>
>> Can someone comment on this?
>>
>> The GTiff driver support VSI, how is this done given that the driver
>> uses libgeotiff? Does the tifvsi.cpp/ file make this possible, by
>> acting as a proxy?
>
> libtiff has a TIFFClientOpen() interface where you provide pointers to functions
> for various stuff, including I/O functions. And libgeotiff has a similar
> XTIFFClientOpen() that just calls TIFFClientOpen() after doing some libgeotiff
> initialization.
>
>> If so, can a similar thing be done with libnetcdf?
>
> You are probably one of the best placed to answer the question ;-)

I was afraid you'd say that! I am knowledgeable with the netcdf api,
but its inner workings are still somewhat mysterious.

>
> More seriously, you need to look at the libnetcdf API to see if it offers some
> abstraction layer for its I/O, that can be customized, instead of doing directly
> fopen(), fread(), fwrite(), fseek(), fclose() directly all over its code. If
> not, and you want it, you'll need to hack into libnetcdf to avoid those direct
> calls to the standard library.

Quick inspection show non-customizable calls like

	fd = open(path, oflags, 0);
	(void) close(fd);

Netcdf-4 uses hdf5, but that also seems non-flexible:
        #define HDopen(S,F,M)    open(S,F,M)

This means it would probably be quite a challenge, one that should
involve quite a few people (ideally the UNIDATA folks)...

So I'm not sure it's really worth it, unfortunately -  I don't have the time

thanks
Etienne
>
>>
>> thanks,
>> Etienne
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>

From ozdogan at wisc.edu  Fri Jun 15 15:21:31 2012
From: ozdogan at wisc.edu (Mutlu Ozdogan)
Date: Fri, 15 Jun 2012 17:21:31 -0500
Subject: [gdal-dev] intersecting two shapefiles in OGR C API
Message-ID: <4FDBB56B.4060301@wisc.edu>

Hello All,

I am writing a C code that reads in two shapefiles with very large 
number of polygons and intersects them and writes the intersect results 
to a new output shapefile.  I am able to read in the files but I am 
stuck reading the contents of the two input shapefiles, intersecting 
them and writing the output polygon features to a new shapefile.  I read 
(and worked through) the API tutorial from A to Z but I am not able to 
move past opening the input files and reading the layer numbers from 
them.  Any help in the remaining parts of this code would be very much 
appreciated.

Thank you.

Mutlu..
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ozdogan.vcf
Type: text/x-vcard
Size: 269 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120615/bdb34aa1/attachment.vcf>

From fjitiaux at gmail.com  Sat Jun 16 00:46:54 2012
From: fjitiaux at gmail.com (Florent JITIAUX)
Date: Sat, 16 Jun 2012 09:46:54 +0200
Subject: [gdal-dev] convert .tif/.tfwx/.aux.xml to a geotiff?
In-Reply-To: <CAENYpGY6XR5RSVDcqQSM+a2WQugPdgraomE5b5=vWNSJ_ebN9A@mail.gmail.com>
References: <CAENYpGY6XR5RSVDcqQSM+a2WQugPdgraomE5b5=vWNSJ_ebN9A@mail.gmail.com>
Message-ID: <CAL81ghC==fQbEKbB2RhUA7ZRG=heCz7nGTf4qH_2jL13ep85pQ@mail.gmail.com>

Hi Martin,

if you georeference your images manually you can use gdalwarp to do it or
set coordinates of images with gdal_translate.

Florent

2012/6/15 Martin Ouellet <geomartino at gmail.com>

> Hi,
>
> I manually georeferenced some images in ArcGIS and at the end, I got a
> .tfwx file and a aux.xml.
>
> I wish to convert them into geotiff with the georeferenced info in the
> header:
>
> 1) I've renamed the .tfwx into .tfw and run a gdal_translate.  The command
> didn't failed but the resulting image is not georeferenced at all
>
> Is it possible to do that perhaps using the info in the .aux.xml file?
>
> Thanks,
>
> MartinO
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120616/ae67cc26/attachment.html>

From chaitanya.ch at gmail.com  Sat Jun 16 04:37:14 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat, 16 Jun 2012 17:07:14 +0530
Subject: [gdal-dev] intersecting two shapefiles in OGR C API
In-Reply-To: <4FDBB56B.4060301@wisc.edu>
References: <4FDBB56B.4060301@wisc.edu>
Message-ID: <CAMKgpOYzj0wJT9nerkPNiubvtSSh+_W73vLmkPCip4BJJUg+6A@mail.gmail.com>

Mutlu,

The only thing the tutorial didn't cover was the intersection. Please
provide details of the errors you are getting.


On 6/16/12, Mutlu Ozdogan <ozdogan at wisc.edu> wrote:
> Hello All,
>
> I am writing a C code that reads in two shapefiles with very large
> number of polygons and intersects them and writes the intersect results
> to a new output shapefile.  I am able to read in the files but I am
> stuck reading the contents of the two input shapefiles, intersecting
> them and writing the output polygon features to a new shapefile.  I read
> (and worked through) the API tutorial from A to Z but I am not able to
> move past opening the input files and reading the layer numbers from
> them.  Any help in the remaining parts of this code would be very much
> appreciated.
>
> Thank you.
>
> Mutlu..
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

From geomartino at gmail.com  Sat Jun 16 07:02:35 2012
From: geomartino at gmail.com (Martin Ouellet)
Date: Sat, 16 Jun 2012 10:02:35 -0400
Subject: [gdal-dev] convert .tif/.tfwx/.aux.xml to a geotiff?
In-Reply-To: <CAL81ghC==fQbEKbB2RhUA7ZRG=heCz7nGTf4qH_2jL13ep85pQ@mail.gmail.com>
References: <CAENYpGY6XR5RSVDcqQSM+a2WQugPdgraomE5b5=vWNSJ_ebN9A@mail.gmail.com>
	<CAL81ghC==fQbEKbB2RhUA7ZRG=heCz7nGTf4qH_2jL13ep85pQ@mail.gmail.com>
Message-ID: <CAENYpGZ1s5hJgyiyngZ7S=ipaMJns2HjAO0amo_u1XfMziiS7Q@mail.gmail.com>

Thanks Florent,

Can you provide me a simple example on how to set coordinates of an image
with gdal_translate?

MartinO

On Sat, Jun 16, 2012 at 3:46 AM, Florent JITIAUX <fjitiaux at gmail.com> wrote:

> Hi Martin,
>
> if you georeference your images manually you can use gdalwarp to do it or
> set coordinates of images with gdal_translate.
>
> Florent
>
> 2012/6/15 Martin Ouellet <geomartino at gmail.com>
>
>> Hi,
>>
>> I manually georeferenced some images in ArcGIS and at the end, I got a
>> .tfwx file and a aux.xml.
>>
>> I wish to convert them into geotiff with the georeferenced info in the
>> header:
>>
>> 1) I've renamed the .tfwx into .tfw and run a gdal_translate.  The
>> command didn't failed but the resulting image is not georeferenced at all
>>
>> Is it possible to do that perhaps using the info in the .aux.xml file?
>>
>> Thanks,
>>
>> MartinO
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120616/7421278b/attachment.html>

From kyle at pobox.com  Sat Jun 16 07:13:48 2012
From: kyle at pobox.com (Kyle Shannon)
Date: Sat, 16 Jun 2012 08:13:48 -0600
Subject: [gdal-dev] convert .tif/.tfwx/.aux.xml to a geotiff?
In-Reply-To: <CAL81ghC==fQbEKbB2RhUA7ZRG=heCz7nGTf4qH_2jL13ep85pQ@mail.gmail.com>
References: <CAENYpGY6XR5RSVDcqQSM+a2WQugPdgraomE5b5=vWNSJ_ebN9A@mail.gmail.com>
	<CAL81ghC==fQbEKbB2RhUA7ZRG=heCz7nGTf4qH_2jL13ep85pQ@mail.gmail.com>
Message-ID: <CAJ0mEz0RE9M=fBfrfQMFYbxC1MRvxZNk2V+BfOgwmYTe-h22bg@mail.gmail.com>

Martin, see the -a_ullr option here:

http://gdal.org/gdal_translate.html

(or gdal_translate --help).  The option allows you to set the upper left
and lower right corners.  You probably want to set the spatial reference as
well with -a_srs:

gdal_translate -a_ullr -117.0 45.0 -116.0 44.0 -a_srs epsg:4326 in.tif
out.tif

kss

On Sat, Jun 16, 2012 at 1:46 AM, Florent JITIAUX <fjitiaux at gmail.com> wrote:

> Hi Martin,
>
> if you georeference your images manually you can use gdalwarp to do it or
> set coordinates of images with gdal_translate.
>
> Florent
>
> 2012/6/15 Martin Ouellet <geomartino at gmail.com>
>
>> Hi,
>>
>> I manually georeferenced some images in ArcGIS and at the end, I got a
>> .tfwx file and a aux.xml.
>>
>> I wish to convert them into geotiff with the georeferenced info in the
>> header:
>>
>> 1) I've renamed the .tfwx into .tfw and run a gdal_translate.  The
>> command didn't failed but the resulting image is not georeferenced at all
>>
>> Is it possible to do that perhaps using the info in the .aux.xml file?
>>
>> Thanks,
>>
>> MartinO
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120616/91635e8b/attachment.html>

From jrepetto at free.fr  Sat Jun 16 07:25:31 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Sat, 16 Jun 2012 16:25:31 +0200
Subject: [gdal-dev] convert .tif/.tfwx/.aux.xml to a geotiff?
In-Reply-To: <CAENYpGY6XR5RSVDcqQSM+a2WQugPdgraomE5b5=vWNSJ_ebN9A@mail.gmail.com>
References: <CAENYpGY6XR5RSVDcqQSM+a2WQugPdgraomE5b5=vWNSJ_ebN9A@mail.gmail.com>
Message-ID: <4FDC975B.5070400@free.fr>

On 06/15/2012 04:46 PM, Martin Ouellet wrote:
> Hi,
> 
> I manually georeferenced some images in ArcGIS and at the end, I got a
> .tfwx file and a aux.xml.
> 
> I wish to convert them into geotiff with the georeferenced info in the
> header:
> 
> 1) I've renamed the .tfwx into .tfw and run a gdal_translate.  The
> command didn't failed but the resulting image is not georeferenced at all
> 
> Is it possible to do that perhaps using the info in the .aux.xml file?
> 
> Thanks,
> 
> MartinO
> 

Hello Martin,

Could you post here the contents of the .tfwx and .aux.xml files ?

Jean-Claude


From siebe at hydroconsult.nl  Sat Jun 16 12:03:39 2012
From: siebe at hydroconsult.nl (Siebe Bosch)
Date: Sat, 16 Jun 2012 21:03:39 +0200
Subject: [gdal-dev]  Reading NetCDF using VB.NET
In-Reply-To: <CA+TxYvPytcQ+5riuVRr_xjVJ_JOBgp0DRbJORcD3sWscMmiV7Q@mail.gmail.com>
References: <4FDA1A84.9050900@hydroconsult.nl>
	<CA+TxYvPytcQ+5riuVRr_xjVJ_JOBgp0DRbJORcD3sWscMmiV7Q@mail.gmail.com>
Message-ID: <4FDCD88B.9030005@hydroconsult.nl>

Thanks Etienne,

You're probably right that I will need the latest GDAL in stead of the 
one in FWTools.
Currently however I'm struggling with NMAKE to build the 
CSHARP-libraries. It gives me all sorts of error messages.

Anyone up for some guidance on NMAKE via screen sharing in Skype 
(username Crusoe73) ?

Or perhaps even better: does anyone already have a set of built DLL's 
that I can use straight away in Visual Studio 2008?

By the way: here's what I'll need to do in total:

1. Receive co-ordinates for a rectangle from Google Maps (PHP)
2. Convert them to +proj=stere +x_0=0 +y_0=0 +lat_0=90 +lon_0=0 
+lat_ts=60 +a=6378.388 +b=6356.906
3. Extract data for the rectangle from a series of NetCDF files
4. Convert the results to EPSG 28992 projection
5. Export the converted results to a new series of NetCDF files (of 
other formats)

Regards,
Siebe

From etourigny.dev at gmail.com  Sat Jun 16 12:25:11 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat, 16 Jun 2012 16:25:11 -0300
Subject: [gdal-dev] Reading NetCDF using VB.NET
In-Reply-To: <4FDCD88B.9030005@hydroconsult.nl>
References: <4FDA1A84.9050900@hydroconsult.nl>
	<CA+TxYvPytcQ+5riuVRr_xjVJ_JOBgp0DRbJORcD3sWscMmiV7Q@mail.gmail.com>
	<4FDCD88B.9030005@hydroconsult.nl>
Message-ID: <CA+TxYvM-RCEwKL059d+fWkQOcodCnQEcyLsPVDvRjigW7P1fYg@mail.gmail.com>

Read my last email more attentively, you will see links the SDK built
by Tamas Szekeres, which supposedly work with csharp

On Sat, Jun 16, 2012 at 4:03 PM, Siebe Bosch <siebe at hydroconsult.nl> wrote:
> Thanks Etienne,
>
> You're probably right that I will need the latest GDAL in stead of the one
> in FWTools.
> Currently however I'm struggling with NMAKE to build the CSHARP-libraries.
> It gives me all sorts of error messages.
>
> Anyone up for some guidance on NMAKE via screen sharing in Skype (username
> Crusoe73) ?
>
> Or perhaps even better: does anyone already have a set of built DLL's that I
> can use straight away in Visual Studio 2008?
>
> By the way: here's what I'll need to do in total:
>
> 1. Receive co-ordinates for a rectangle from Google Maps (PHP)
> 2. Convert them to +proj=stere +x_0=0 +y_0=0 +lat_0=90 +lon_0=0 +lat_ts=60
> +a=6378.388 +b=6356.906
> 3. Extract data for the rectangle from a series of NetCDF files
> 4. Convert the results to EPSG 28992 projection
> 5. Export the converted results to a new series of NetCDF files (of other
> formats)
>
> Regards,
> Siebe

From siebe at hydroconsult.nl  Sat Jun 16 12:33:11 2012
From: siebe at hydroconsult.nl (Siebe Bosch)
Date: Sat, 16 Jun 2012 21:33:11 +0200
Subject: [gdal-dev] Reading NetCDF using VB.NET
In-Reply-To: <CA+TxYvPytcQ+5riuVRr_xjVJ_JOBgp0DRbJORcD3sWscMmiV7Q@mail.gmail.com>
References: <4FDA1A84.9050900@hydroconsult.nl>
	<CA+TxYvPytcQ+5riuVRr_xjVJ_JOBgp0DRbJORcD3sWscMmiV7Q@mail.gmail.com>
Message-ID: <4FDCDF77.5060705@hydroconsult.nl>

Following your third link, I had already found the section that reads:


        GDAL and MapServer build SDK packages (provides to compile
        MapServer and GDAL by yourself):

I assumed that this meant that I had to compile the DLL myself. Hence my 
previous mail.

Considering your last mail however I tried to look up a pre-built DLL 
inside the SDK, and I found this one:
c:\GDALVS\release-1600\bin\gdal\csharp\gdal_csharp.dll

Is this the correct one?

I can add it to VS2008, however VS warns me that "the system cannot find 
the reference specified".





On 14-06-12 20:51, Etienne Tourigny wrote:
> If you read the GDAL download page [1] you will find this:
>
> "The latest FWtools version for Windows, 2.4.7, dates back to a
> pre-1.6 GDAL version. In order to benefit from the latest and
> greatest, you can refer to the other binary builds mentionned above."
>
> If you want to support netcdf files, you should probably be using a
> more recent gdal, at least 1.9
>
> That means you should probably not use FWTools, and use the SDK from
> Tamas Szekeres [3] - which according to [2] supports vb.net (C#)
>
> [1] http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
> [2] http://trac.osgeo.org/gdal/wiki/GdalOgrInCsharp
> [3] http://vbkto.dyndns.org/sdk/
>
> cheers
> Etienne
>
> On Thu, Jun 14, 2012 at 2:08 PM, Siebe Bosch<siebe at hydroconsult.nl>  wrote:
>> Hello all,
>>
>> I'm trying to build a command line application in VB.NET that extracts parts
>> from a NetCDF file.
>> For this I'm using the C# API as supplied with FWTools version 2.4.7. It's
>> supposed to support VB.NET as well; am I right?
>>
>> However, the application already crashes at the line Call GDAL.Registerall()
>> Here's the code:
>>
>> Imports System
>> Imports OSGeo.GDAL
>> Imports OSGeo.OGR
>>
>> Module MeteoBase
>>
>>   'Copyright Siebe Bosch Hydroconsult, 2012
>>   'Lulofsstraat 55, unit 47 Den Haag, The Netherlands
>>   'this program creates subsets from precipitation data in NetCDF-files
>>   'as requested by the user. The program is designed to be called from
>>   'a PHP-script.
>>
>>   Dim FileName As String
>>   Dim ds As Dataset
>>
>>   Sub Main()
>>     Dim DebugMode As Boolean
>>
>>     Console.WriteLine("This program extracts data from a NetCDF file")
>>     Console.WriteLine("Path to the NetCDF file (*.cn)")
>>     DebugMode = True
>>
>>     'start reading the command line arguments
>>     If DebugMode Then
>>       FileName = "c:\GDAL\PM\1990\EVAP_PM_19901231.nc"
>>     Else
>>       If My.Application.CommandLineArgs.Count = 0 Then
>>         Console.WriteLine("Enter the path to the NetCDF-file:")
>>         FileName = Console.ReadLine()
>>       ElseIf My.Application.CommandLineArgs.Count<>  1 Then
>>         Console.WriteLine("Error: incorrect number of arguments presented")
>>       Else
>>         FileName = My.Application.CommandLineArgs(0)
>>       End If
>>     End If
>>
>>     Try
>>       'start reading the NetCDF File
>>       Call Gdal.AllRegister()
>>       ds = Gdal.Open(FileName, Access.GA_ReadOnly)
>>       If ds Is Nothing Then
>>         Console.WriteLine("Cannot open NetCDF file: "&  FileName)
>>         Throw New Exception
>>       Else
>>         Console.WriteLine("Raster dataset parameters:")
>>         Console.WriteLine("  Projection: " + ds.GetProjectionRef())
>>         Console.WriteLine("  RasterCount: " + ds.RasterCount)
>>         Console.WriteLine("  RasterSize (" + ds.RasterXSize + "," +
>> ds.RasterYSize + ")")
>>       End If
>>     Catch ex As Exception
>>       Console.WriteLine("Error in sub Main of Meteobase")
>>     End Try
>>
>>   End Sub
>>
>> End Module
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
------------------------------------------
Hydroconsult
Lulofsstraat 55, unit 47
2521 AL Den Haag
The Netherlands

web: http://www.hydroconsult.nl
e-mail: siebe at hydroconsult.nl
phone: +31(0)70 250 0580
mobile: +31(0)6 17 682 689

actief lid van WaterForce.nu, het netwerk van
zelfstandige professionals in het waterbeheer
------------------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120616/ed0ddf2f/attachment.html>

From jukka.rahkonen at mmmtike.fi  Sat Jun 16 13:05:20 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat, 16 Jun 2012 20:05:20 +0000 (UTC)
Subject: [gdal-dev] convert .tif/.tfwx/.aux.xml to a geotiff?
References: <CAENYpGY6XR5RSVDcqQSM+a2WQugPdgraomE5b5=vWNSJ_ebN9A@mail.gmail.com>
	<CAL81ghC==fQbEKbB2RhUA7ZRG=heCz7nGTf4qH_2jL13ep85pQ@mail.gmail.com>
	<CAENYpGZ1s5hJgyiyngZ7S=ipaMJns2HjAO0amo_u1XfMziiS7Q@mail.gmail.com>
Message-ID: <loom.20120616T215528-900@post.gmane.org>

Martin Ouellet <geomartino <at> gmail.com> writes:

> 
> 
> Thanks Florent,
> 
> Can you provide me a simple example on how to set coordinates of an image with
gdal_translate?

This is setting 4 ground control points to corner pixels of a 10000 by 10000
pixel image. If you want to be accurate, remember that the anchor point is in
the upper left corner of the pixel

gdal_translate t202112.jp2 t202112_gcp.tif 
-gcp 0 0285113.632 6713217.584 
-gcp 9999 0 284658.101 6703227.690
-gcp 0 9999 295103.322 6712761.873 
-gcp 9999 9999 294647.828 6702772.378

Then you can warp the intermediate image with gdalwarp. The following has some
parameters tuned for orthophotos (cubic resampling) and for controlling the
output pixel size to exactly one metre.

gdalwarp -rc -dstnodata "0 0 0" -s_srs EPSG:3067 -t_srs EPSG:3067
-tr 1.0 1.0 t202112_gcp.tif t202112_TM35FIN.tif

The intermediate file containing ground control points can also be a .vrt file.
QGis georeferencer plugin gives a GUI for this procedure.

-Jukka Rahkonen-


From etourigny.dev at gmail.com  Sat Jun 16 13:08:28 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat, 16 Jun 2012 17:08:28 -0300
Subject: [gdal-dev] Reading NetCDF using VB.NET
In-Reply-To: <4FDCDF77.5060705@hydroconsult.nl>
References: <4FDA1A84.9050900@hydroconsult.nl>
	<CA+TxYvPytcQ+5riuVRr_xjVJ_JOBgp0DRbJORcD3sWscMmiV7Q@mail.gmail.com>
	<4FDCDF77.5060705@hydroconsult.nl>
Message-ID: <CA+TxYvO1sSvuth7_L0jhx2LnDEEiFje8ZHPtjNbq82u2+Sx2=w@mail.gmail.com>

Sorry I thought that included pre-built libraries - perhaps someone
else can help here? I don't know much about building in windows, sorry

Etienne

On Sat, Jun 16, 2012 at 4:33 PM, Siebe Bosch <siebe at hydroconsult.nl> wrote:
> Following your third link, I had already found the section that reads:
>
> GDAL and MapServer build SDK packages (provides to compile MapServer and
> GDAL by yourself):
>
> I assumed that this meant that I had to compile the DLL myself. Hence my
> previous mail.
>
> Considering your last mail however I tried to look up a pre-built DLL inside
> the SDK, and I found this one:
> c:\GDALVS\release-1600\bin\gdal\csharp\gdal_csharp.dll
>
> Is this the correct one?
>
> I can add it to VS2008, however VS warns me that "the system cannot find the
> reference specified".
>
>
>
>
>
>
> On 14-06-12 20:51, Etienne Tourigny wrote:
>
> If you read the GDAL download page [1] you will find this:
>
> "The latest FWtools version for Windows, 2.4.7, dates back to a
> pre-1.6 GDAL version. In order to benefit from the latest and
> greatest, you can refer to the other binary builds mentionned above."
>
> If you want to support netcdf files, you should probably be using a
> more recent gdal, at least 1.9
>
> That means you should probably not use FWTools, and use the SDK from
> Tamas Szekeres [3] - which according to [2] supports vb.net (C#)
>
> [1] http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
> [2] http://trac.osgeo.org/gdal/wiki/GdalOgrInCsharp
> [3] http://vbkto.dyndns.org/sdk/
>
> cheers
> Etienne
>
> On Thu, Jun 14, 2012 at 2:08 PM, Siebe Bosch <siebe at hydroconsult.nl> wrote:
>
> Hello all,
>
> I'm trying to build a command line application in VB.NET that extracts parts
> from a NetCDF file.
> For this I'm using the C# API as supplied with FWTools version 2.4.7. It's
> supposed to support VB.NET as well; am I right?
>
> However, the application already crashes at the line Call GDAL.Registerall()
> Here's the code:
>
> Imports System
> Imports OSGeo.GDAL
> Imports OSGeo.OGR
>
> Module MeteoBase
>
> ?'Copyright Siebe Bosch Hydroconsult, 2012
> ?'Lulofsstraat 55, unit 47 Den Haag, The Netherlands
> ?'this program creates subsets from precipitation data in NetCDF-files
> ?'as requested by the user. The program is designed to be called from
> ?'a PHP-script.
>
> ?Dim FileName As String
> ?Dim ds As Dataset
>
> ?Sub Main()
> ? ?Dim DebugMode As Boolean
>
> ? ?Console.WriteLine("This program extracts data from a NetCDF file")
> ? ?Console.WriteLine("Path to the NetCDF file (*.cn)")
> ? ?DebugMode = True
>
> ? ?'start reading the command line arguments
> ? ?If DebugMode Then
> ? ? ?FileName = "c:\GDAL\PM\1990\EVAP_PM_19901231.nc"
> ? ?Else
> ? ? ?If My.Application.CommandLineArgs.Count = 0 Then
> ? ? ? ?Console.WriteLine("Enter the path to the NetCDF-file:")
> ? ? ? ?FileName = Console.ReadLine()
> ? ? ?ElseIf My.Application.CommandLineArgs.Count <> 1 Then
> ? ? ? ?Console.WriteLine("Error: incorrect number of arguments presented")
> ? ? ?Else
> ? ? ? ?FileName = My.Application.CommandLineArgs(0)
> ? ? ?End If
> ? ?End If
>
> ? ?Try
> ? ? ?'start reading the NetCDF File
> ? ? ?Call Gdal.AllRegister()
> ? ? ?ds = Gdal.Open(FileName, Access.GA_ReadOnly)
> ? ? ?If ds Is Nothing Then
> ? ? ? ?Console.WriteLine("Cannot open NetCDF file: " & FileName)
> ? ? ? ?Throw New Exception
> ? ? ?Else
> ? ? ? ?Console.WriteLine("Raster dataset parameters:")
> ? ? ? ?Console.WriteLine(" ?Projection: " + ds.GetProjectionRef())
> ? ? ? ?Console.WriteLine(" ?RasterCount: " + ds.RasterCount)
> ? ? ? ?Console.WriteLine(" ?RasterSize (" + ds.RasterXSize + "," +
> ds.RasterYSize + ")")
> ? ? ?End If
> ? ?Catch ex As Exception
> ? ? ?Console.WriteLine("Error in sub Main of Meteobase")
> ? ?End Try
>
> ?End Sub
>
> End Module
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> ------------------------------------------
> Hydroconsult
> Lulofsstraat 55, unit 47
> 2521 AL Den Haag
> The Netherlands
>
> web: http://www.hydroconsult.nl
> e-mail: siebe at hydroconsult.nl
> phone: +31(0)70 250 0580
> mobile: +31(0)6 17 682 689
>
> actief lid van WaterForce.nu, het netwerk van
> zelfstandige professionals in het waterbeheer
> ------------------------------------------

From siebe at hydroconsult.nl  Sat Jun 16 13:14:28 2012
From: siebe at hydroconsult.nl (Siebe Bosch)
Date: Sat, 16 Jun 2012 22:14:28 +0200
Subject: [gdal-dev] Reading NetCDF using VB.NET
In-Reply-To: <CA+TxYvO1sSvuth7_L0jhx2LnDEEiFje8ZHPtjNbq82u2+Sx2=w@mail.gmail.com>
References: <4FDA1A84.9050900@hydroconsult.nl>
	<CA+TxYvPytcQ+5riuVRr_xjVJ_JOBgp0DRbJORcD3sWscMmiV7Q@mail.gmail.com>
	<4FDCDF77.5060705@hydroconsult.nl>
	<CA+TxYvO1sSvuth7_L0jhx2LnDEEiFje8ZHPtjNbq82u2+Sx2=w@mail.gmail.com>
Message-ID: <4FDCE924.6030003@hydroconsult.nl>

Well, it looks like the pre-built DLL's *are* available in the SDK. It's 
only that in VS2008 I seem not to be able to add a reference to them.
Some remarks on the web suggest that it should work in VS2005 and VS2010 
however. I'm therefore currently installing VS2010 express, just to try 
that hypothesis.

Will keep you posted!

Thanks,
Sieb
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120616/9df10ac8/attachment-0001.html>

From etourigny.dev at gmail.com  Sat Jun 16 13:19:39 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat, 16 Jun 2012 17:19:39 -0300
Subject: [gdal-dev] Reading NetCDF using VB.NET
In-Reply-To: <4FDCDF77.5060705@hydroconsult.nl>
References: <4FDA1A84.9050900@hydroconsult.nl>
	<CA+TxYvPytcQ+5riuVRr_xjVJ_JOBgp0DRbJORcD3sWscMmiV7Q@mail.gmail.com>
	<4FDCDF77.5060705@hydroconsult.nl>
Message-ID: <CA+TxYvML=emB7HfeNpKSbXUhJzta2_A8fkuEupAS0zd39PkviQ@mail.gmail.com>

On Sat, Jun 16, 2012 at 4:33 PM, Siebe Bosch <siebe at hydroconsult.nl> wrote:
> Following your third link, I had already found the section that reads:
>
> GDAL and MapServer build SDK packages (provides to compile MapServer and
> GDAL by yourself):
>
> I assumed that this meant that I had to compile the DLL myself. Hence my
> previous mail.
>
> Considering your last mail however I tried to look up a pre-built DLL inside
> the SDK, and I found this one:
> c:\GDALVS\release-1600\bin\gdal\csharp\gdal_csharp.dll

release-1600 is for VS2010, not VS2008

>
> Is this the correct one?
>
> I can add it to VS2008, however VS warns me that "the system cannot find the
> reference specified".
>
>
>
>
>
>
> On 14-06-12 20:51, Etienne Tourigny wrote:
>
> If you read the GDAL download page [1] you will find this:
>
> "The latest FWtools version for Windows, 2.4.7, dates back to a
> pre-1.6 GDAL version. In order to benefit from the latest and
> greatest, you can refer to the other binary builds mentionned above."
>
> If you want to support netcdf files, you should probably be using a
> more recent gdal, at least 1.9
>
> That means you should probably not use FWTools, and use the SDK from
> Tamas Szekeres [3] - which according to [2] supports vb.net (C#)
>
> [1] http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
> [2] http://trac.osgeo.org/gdal/wiki/GdalOgrInCsharp
> [3] http://vbkto.dyndns.org/sdk/
>
> cheers
> Etienne
>
> On Thu, Jun 14, 2012 at 2:08 PM, Siebe Bosch <siebe at hydroconsult.nl> wrote:
>
> Hello all,
>
> I'm trying to build a command line application in VB.NET that extracts parts
> from a NetCDF file.
> For this I'm using the C# API as supplied with FWTools version 2.4.7. It's
> supposed to support VB.NET as well; am I right?
>
> However, the application already crashes at the line Call GDAL.Registerall()
> Here's the code:
>
> Imports System
> Imports OSGeo.GDAL
> Imports OSGeo.OGR
>
> Module MeteoBase
>
> ?'Copyright Siebe Bosch Hydroconsult, 2012
> ?'Lulofsstraat 55, unit 47 Den Haag, The Netherlands
> ?'this program creates subsets from precipitation data in NetCDF-files
> ?'as requested by the user. The program is designed to be called from
> ?'a PHP-script.
>
> ?Dim FileName As String
> ?Dim ds As Dataset
>
> ?Sub Main()
> ? ?Dim DebugMode As Boolean
>
> ? ?Console.WriteLine("This program extracts data from a NetCDF file")
> ? ?Console.WriteLine("Path to the NetCDF file (*.cn)")
> ? ?DebugMode = True
>
> ? ?'start reading the command line arguments
> ? ?If DebugMode Then
> ? ? ?FileName = "c:\GDAL\PM\1990\EVAP_PM_19901231.nc"
> ? ?Else
> ? ? ?If My.Application.CommandLineArgs.Count = 0 Then
> ? ? ? ?Console.WriteLine("Enter the path to the NetCDF-file:")
> ? ? ? ?FileName = Console.ReadLine()
> ? ? ?ElseIf My.Application.CommandLineArgs.Count <> 1 Then
> ? ? ? ?Console.WriteLine("Error: incorrect number of arguments presented")
> ? ? ?Else
> ? ? ? ?FileName = My.Application.CommandLineArgs(0)
> ? ? ?End If
> ? ?End If
>
> ? ?Try
> ? ? ?'start reading the NetCDF File
> ? ? ?Call Gdal.AllRegister()
> ? ? ?ds = Gdal.Open(FileName, Access.GA_ReadOnly)
> ? ? ?If ds Is Nothing Then
> ? ? ? ?Console.WriteLine("Cannot open NetCDF file: " & FileName)
> ? ? ? ?Throw New Exception
> ? ? ?Else
> ? ? ? ?Console.WriteLine("Raster dataset parameters:")
> ? ? ? ?Console.WriteLine(" ?Projection: " + ds.GetProjectionRef())
> ? ? ? ?Console.WriteLine(" ?RasterCount: " + ds.RasterCount)
> ? ? ? ?Console.WriteLine(" ?RasterSize (" + ds.RasterXSize + "," +
> ds.RasterYSize + ")")
> ? ? ?End If
> ? ?Catch ex As Exception
> ? ? ?Console.WriteLine("Error in sub Main of Meteobase")
> ? ?End Try
>
> ?End Sub
>
> End Module
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> ------------------------------------------
> Hydroconsult
> Lulofsstraat 55, unit 47
> 2521 AL Den Haag
> The Netherlands
>
> web: http://www.hydroconsult.nl
> e-mail: siebe at hydroconsult.nl
> phone: +31(0)70 250 0580
> mobile: +31(0)6 17 682 689
>
> actief lid van WaterForce.nu, het netwerk van
> zelfstandige professionals in het waterbeheer
> ------------------------------------------

From siebe at hydroconsult.nl  Sat Jun 16 13:20:34 2012
From: siebe at hydroconsult.nl (Siebe Bosch)
Date: Sat, 16 Jun 2012 22:20:34 +0200
Subject: [gdal-dev] Reading NetCDF using VB.NET
In-Reply-To: <CA+TxYvML=emB7HfeNpKSbXUhJzta2_A8fkuEupAS0zd39PkviQ@mail.gmail.com>
References: <4FDA1A84.9050900@hydroconsult.nl>
	<CA+TxYvPytcQ+5riuVRr_xjVJ_JOBgp0DRbJORcD3sWscMmiV7Q@mail.gmail.com>
	<4FDCDF77.5060705@hydroconsult.nl>
	<CA+TxYvML=emB7HfeNpKSbXUhJzta2_A8fkuEupAS0zd39PkviQ@mail.gmail.com>
Message-ID: <4FDCEA92.8010705@hydroconsult.nl>

That explains a lot :)

Thanks again and have a great weekend.
Siebe


On 16-06-12 22:19, Etienne Tourigny wrote:
> On Sat, Jun 16, 2012 at 4:33 PM, Siebe Bosch<siebe at hydroconsult.nl>  wrote:
>> Following your third link, I had already found the section that reads:
>>
>> GDAL and MapServer build SDK packages (provides to compile MapServer and
>> GDAL by yourself):
>>
>> I assumed that this meant that I had to compile the DLL myself. Hence my
>> previous mail.
>>
>> Considering your last mail however I tried to look up a pre-built DLL inside
>> the SDK, and I found this one:
>> c:\GDALVS\release-1600\bin\gdal\csharp\gdal_csharp.dll
> release-1600 is for VS2010, not VS2008
>
>> Is this the correct one?
>>
>> I can add it to VS2008, however VS warns me that "the system cannot find the
>> reference specified".
>>
>>
>>

From Michael.Smith at erdc.dren.mil  Sun Jun 17 09:24:29 2012
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Sun, 17 Jun 2012 16:24:29 +0000
Subject: [gdal-dev] How to use RPC Metadata from NITF Files in a MapServer
	TileIndex
Message-ID: <CC037D02.2C93E%michael.smith@erdc.dren.mil>

I have a large number of NITF JP2K files. These files have IGEOLO metadata to the second accuracy so reprojecting these images leads to poor results. The images also have rpc metadata and using the -rpc option in gdalwarp reprojects them quite well. These files are source epsg:4326 and need to be reprojected to epsg:3857 for display.

I had orginally thought to just create a vrt for each ntf file with the rpc information but a tileindex of the vrts is dramatically slower to display in MapServer (for a 1:8000 scale area, from ~ 1 sec to over 10 min). It does reproject correctly though. Obviously not practical.

I then thought to reproject the vrts to an actual format (geotiff). The problem is that the black bounds (which should be nodata but are just near black areas) get expanded and aren't handled even when using the nearblack utility on the resulting geotiffs.

The best option (if possible) would seem to use the source nitf files but force gdal to use the rpc information to reproject (without having to go through the vrt process). Perhaps a CPL config option that could be set inside mapserver?

Other suggestions are welcome.

Mike

--
Michael Smith
michael.smith at usace.army.mil
US Army Corps
Remote Sensing GIS/Center
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120617/0d025456/attachment.html>

From even.rouault at mines-paris.org  Sun Jun 17 09:38:05 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 17 Jun 2012 18:38:05 +0200
Subject: [gdal-dev] How to use RPC Metadata from NITF Files in a
	MapServer TileIndex
In-Reply-To: <CC037D02.2C93E%michael.smith@erdc.dren.mil>
References: <CC037D02.2C93E%michael.smith@erdc.dren.mil>
Message-ID: <201206171838.05800.even.rouault@mines-paris.org>

Le dimanche 17 juin 2012 18:24:29, Smith, Michael ERDC-RDE-CRREL-NH a ?crit :
> I have a large number of NITF JP2K files. These files have IGEOLO metadata
> to the second accuracy so reprojecting these images leads to poor results.
> The images also have rpc metadata and using the -rpc option in gdalwarp
> reprojects them quite well. These files are source epsg:4326 and need to
> be reprojected to epsg:3857 for display.
> 
> I had orginally thought to just create a vrt for each ntf file with the rpc
> information but a tileindex of the vrts is dramatically slower to display
> in MapServer (for a 1:8000 scale area, from ~ 1 sec to over 10 min). It
> does reproject correctly though. Obviously not practical.
> 
> I then thought to reproject the vrts to an actual format (geotiff). The
> problem is that the black bounds (which should be nodata but are just near
> black areas) get expanded and aren't handled even when using the nearblack
> utility on the resulting geotiffs.
> 
> The best option (if possible) would seem to use the source nitf files but
> force gdal to use the rpc information to reproject (without having to go
> through the vrt process). Perhaps a CPL config option that could be set
> inside mapserver?

Did you use the -dstalpha option of gdalwarp, so that the areas in the 
reprojected image that are not part of the source image are marked with a 0 
alpha value ? -dstnodata could also do it.

> 
> Other suggestions are welcome.
> 
> Mike
> 
> --
> Michael Smith
> michael.smith at usace.army.mil
> US Army Corps
> Remote Sensing GIS/Center

From Michael.Smith at erdc.dren.mil  Sun Jun 17 09:45:01 2012
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Sun, 17 Jun 2012 16:45:01 +0000
Subject: [gdal-dev] How to use RPC Metadata from NITF Files in a
 MapServer TileIndex
In-Reply-To: <201206171838.05800.even.rouault@mines-paris.org>
Message-ID: <CC0380FF.2C964%michael.smith@erdc.dren.mil>

I did originally use -dstalpha. I had dropped it when creating the
geotiffs as I used PHOTOMETRIC=YCBCR as a creation option.

I'll try with -dstalpha and dropping the YCBCR.

Is there a known issue with using the vrts inside a tileindex that makes
it so slow?

--

This is what I used to convert to tif

gdalwarp -rpc -of vrt -overwrite  -t_srs epsg:3857 -r cubic --config
GDAL_CACHEMAX 500 -wm 500 $1 $1.vrt
   gdal_translate -of GTiff -co "TILED=YES" -co "JPEG_QUALITY=95" -co
"COMPRESS=JPEG" -co "PHOTOMETRIC=YCBCR" $1.vrt $1.tif
   gdaladdo --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
YCBCR --config INTERLEAVE_OVERVIEW PIXEL $1.tif 2 4 8 16 32


Mike

On 6/17/12 12:38 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:

>Le dimanche 17 juin 2012 18:24:29, Smith, Michael ERDC-RDE-CRREL-NH a
>?crit :
>> I have a large number of NITF JP2K files. These files have IGEOLO
>>metadata
>> to the second accuracy so reprojecting these images leads to poor
>>results.
>> The images also have rpc metadata and using the -rpc option in gdalwarp
>> reprojects them quite well. These files are source epsg:4326 and need to
>> be reprojected to epsg:3857 for display.
>> 
>> I had orginally thought to just create a vrt for each ntf file with the
>>rpc
>> information but a tileindex of the vrts is dramatically slower to
>>display
>> in MapServer (for a 1:8000 scale area, from ~ 1 sec to over 10 min). It
>> does reproject correctly though. Obviously not practical.
>> 
>> I then thought to reproject the vrts to an actual format (geotiff). The
>> problem is that the black bounds (which should be nodata but are just
>>near
>> black areas) get expanded and aren't handled even when using the
>>nearblack
>> utility on the resulting geotiffs.
>> 
>> The best option (if possible) would seem to use the source nitf files
>>but
>> force gdal to use the rpc information to reproject (without having to go
>> through the vrt process). Perhaps a CPL config option that could be set
>> inside mapserver?
>
>Did you use the -dstalpha option of gdalwarp, so that the areas in the
>reprojected image that are not part of the source image are marked with a
>0 
>alpha value ? -dstnodata could also do it.
>
>> 
>> Other suggestions are welcome.
>> 
>> Mike
>> 
>> --
>> Michael Smith
>> michael.smith at usace.army.mil
>> US Army Corps
>> Remote Sensing GIS/Center


From even.rouault at mines-paris.org  Sun Jun 17 09:55:00 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 17 Jun 2012 18:55:00 +0200
Subject: [gdal-dev] How to use RPC Metadata from NITF Files in a
	MapServer TileIndex
In-Reply-To: <CC0380FF.2C964%michael.smith@erdc.dren.mil>
References: <CC0380FF.2C964%michael.smith@erdc.dren.mil>
Message-ID: <201206171855.00188.even.rouault@mines-paris.org>

Le dimanche 17 juin 2012 18:45:01, Smith, Michael ERDC-RDE-CRREL-NH a ?crit :
> I did originally use -dstalpha. I had dropped it when creating the
> geotiffs as I used PHOTOMETRIC=YCBCR as a creation option.
> 
> I'll try with -dstalpha and dropping the YCBCR.

Ah, ok, JPEG compression is indeed incompatible with alpha band. But you could 
however use a mask band, which recent MapServer should handle.

gdalwarp rpc -of vrt -overwrite  -t_srs epsg:3857 -r cubic --config 
GDAL_CACHEMAX 500 -wm 500 $1 $1.vrt -dstalpha

gdal_translate -b 1 -b 2 -b 3 -mask 4  -co "TILED=YES" -co "JPEG_QUALITY=95" -
co "COMPRESS=JPEG" -co "PHOTOMETRIC=YCBCR" $1.vrt $1.tif

gdaladdo --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
YCBCR --config INTERLEAVE_OVERVIEW PIXEL $1.tif 2 4 8 16 32

> 
> Is there a known issue with using the vrts inside a tileindex that makes
> it so slow?

RPC reprojection is probably slow, and VRT can add some overhead, especially 
if the tiling scheme it adopts (128x128 blocks) is very different from the 
source raster. Furthermore, if you make a request that is a zoom out, the VRT 
cannot benefit from overviews of the source raster and will make reprojection 
at full scale, before zooming out.

From even.rouault at mines-paris.org  Sun Jun 17 10:10:57 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 17 Jun 2012 19:10:57 +0200
Subject: [gdal-dev] How to use RPC Metadata from NITF Files in a
	MapServer TileIndex
In-Reply-To: <201206171855.00188.even.rouault@mines-paris.org>
References: <CC0380FF.2C964%michael.smith@erdc.dren.mil>
	<201206171855.00188.even.rouault@mines-paris.org>
Message-ID: <201206171910.57748.even.rouault@mines-paris.org>

Actually, you'll need to add "--config GDAL_TIFF_INTERNAL_MASK YES" to the 2 
following commands :

gdal_translate -b 1 -b 2 -b 3 -mask 4  -co "TILED=YES" -co
 "JPEG_QUALITY=95" - co "COMPRESS=JPEG" -co "PHOTOMETRIC=YCBCR" $1.vrt
$1.tif --config GDAL_TIFF_INTERNAL_MASK YES

gdaladdo --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
YCBCR --config INTERLEAVE_OVERVIEW PIXEL $1.tif 2 4 8 16 32 --config 
GDAL_TIFF_INTERNAL_MASK YES

Otherwise, an external .msk file will be produced. And you'll need to run 
gdaladdo on it too.

From Michael.Smith at erdc.dren.mil  Sun Jun 17 11:54:33 2012
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Sun, 17 Jun 2012 18:54:33 +0000
Subject: [gdal-dev] How to use RPC Metadata from NITF Files in a
 MapServer TileIndex
In-Reply-To: <201206171910.57748.even.rouault@mines-paris.org>
Message-ID: <CC03A010.2CA1A%michael.smith@erdc.dren.mil>

Thanks Even. This is working well.

Mike

-- 
Michael Smith

US Army Corps
Remote Sensing GIS/Center



On 6/17/12 1:10 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:

>Actually, you'll need to add "--config GDAL_TIFF_INTERNAL_MASK YES" to
>the 2 
>following commands :
>
>gdal_translate -b 1 -b 2 -b 3 -mask 4  -co "TILED=YES" -co
> "JPEG_QUALITY=95" - co "COMPRESS=JPEG" -co "PHOTOMETRIC=YCBCR" $1.vrt
>$1.tif --config GDAL_TIFF_INTERNAL_MASK YES
>
>gdaladdo --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
>YCBCR --config INTERLEAVE_OVERVIEW PIXEL $1.tif 2 4 8 16 32 --config
>GDAL_TIFF_INTERNAL_MASK YES
>
>Otherwise, an external .msk file will be produced. And you'll need to run
>gdaladdo on it too.


From tigerpvr at gmail.com  Mon Jun 18 00:20:23 2012
From: tigerpvr at gmail.com (Pavel Rudchenko)
Date: Mon, 18 Jun 2012 11:20:23 +0400
Subject: [gdal-dev] Not right recording of some GeoTIFF tags
Message-ID: <CAKhK-3Xz0i8e+XB7cr91b+L_1FbZgiZkawWZn2jpTFQSnFSVAw@mail.gmail.com>

Hello.
Why via GDAL library (C# .net wrapper) som GeoTIFF tags not right?
For example, I know, that it's right:  GeogCitationGeoKey (Ascii,6): "WGS84"
But GDAL result is: GeogCitationGeoKey (Ascii,7): "WGS 84"
(with space)

My code is:

oSrs.SetProjCS("WGS_1984 / UTM zone 36N");
oSrs.SetWellKnownGeogCS("WGS84");
oSrs.SetUTM(36, 1);

string wkt;
oSrs.ExportToWkt(out wkt);
s.SetProjection(wkt);

See you, Pavel

From even.rouault at mines-paris.org  Mon Jun 18 02:35:50 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 18 Jun 2012 11:35:50 +0200
Subject: [gdal-dev] Not right recording of some GeoTIFF tags
In-Reply-To: <CAKhK-3Xz0i8e+XB7cr91b+L_1FbZgiZkawWZn2jpTFQSnFSVAw@mail.gmail.com>
References: <CAKhK-3Xz0i8e+XB7cr91b+L_1FbZgiZkawWZn2jpTFQSnFSVAw@mail.gmail.com>
Message-ID: <1340012150.4fdef676651df@imp.free.fr>

Selon Pavel Rudchenko <tigerpvr at gmail.com>:

> Hello.
> Why via GDAL library (C# .net wrapper) som GeoTIFF tags not right?
> For example, I know, that it's right:  GeogCitationGeoKey (Ascii,6): "WGS84"
> But GDAL result is: GeogCitationGeoKey (Ascii,7): "WGS 84"

What makes you believe that WGS84 is better than "WGS 84" ? I checked quickly in
the goetiff spec and could not find anything that normalizes the content of
GeogCitationGeoKey. It seems that citations geokeys can contain rather arbitrary
stuff. Perhaps I've missed something ?

From geomartino at gmail.com  Mon Jun 18 06:56:45 2012
From: geomartino at gmail.com (Martin Ouellet)
Date: Mon, 18 Jun 2012 09:56:45 -0400
Subject: [gdal-dev] convert .tif/.tfwx/.aux.xml to a geotiff?
In-Reply-To: <CAJ0mEz0RE9M=fBfrfQMFYbxC1MRvxZNk2V+BfOgwmYTe-h22bg@mail.gmail.com>
References: <CAENYpGY6XR5RSVDcqQSM+a2WQugPdgraomE5b5=vWNSJ_ebN9A@mail.gmail.com>
	<CAL81ghC==fQbEKbB2RhUA7ZRG=heCz7nGTf4qH_2jL13ep85pQ@mail.gmail.com>
	<CAJ0mEz0RE9M=fBfrfQMFYbxC1MRvxZNk2V+BfOgwmYTe-h22bg@mail.gmail.com>
Message-ID: <CAENYpGaoBy5qEFmHaEqQW2h8XRvmx8NrAreTkmX6bDLqYWDBmA@mail.gmail.com>

Thanks, -a_ullr option works great in that case but, when I open the image
(tif + .aux.xml) in ArcMap, there is a small rotation.

Is it possible to reuse the georeferenced points (in pixel) and their
equivalent in real coordinate so the geotiff would keep the rotation?
Extract from .aux.xml
<SourceGCPs xsi:type="typens:ArrayOfDouble">
        <Double>4.8908512645451037</Double>
        <Double>25.730248842109091</Double>
        <Double>16.685287664469797</Double>
        <Double>25.294638277962804</Double>
        <Double>4.6809492973132762</Double>
        <Double>6.0210986253641749</Double>
        <Double>17.233821111329988</Double>
        <Double>6.366754659536582</Double>
      </SourceGCPs>
      <TargetGCPs xsi:type="typens:ArrayOfDouble">
        <Double>330000</Double>
        <Double>5178000</Double>
        <Double>345000</Double>
        <Double>5177000</Double>
        <Double>329000</Double>
        <Double>5153000</Double>
        <Double>345000</Double>
        <Double>5153000</Double>
      </TargetGCPs>

cheers,

MartinO

On Sat, Jun 16, 2012 at 10:13 AM, Kyle Shannon <kyle at pobox.com> wrote:

> Martin, see the -a_ullr option here:
>
> http://gdal.org/gdal_translate.html
>
> (or gdal_translate --help).  The option allows you to set the upper left
> and lower right corners.  You probably want to set the spatial reference as
> well with -a_srs:
>
> gdal_translate -a_ullr -117.0 45.0 -116.0 44.0 -a_srs epsg:4326 in.tif
> out.tif
>
> kss
>
> On Sat, Jun 16, 2012 at 1:46 AM, Florent JITIAUX <fjitiaux at gmail.com>wrote:
>
>> Hi Martin,
>>
>> if you georeference your images manually you can use gdalwarp to do it or
>> set coordinates of images with gdal_translate.
>>
>> Florent
>>
>> 2012/6/15 Martin Ouellet <geomartino at gmail.com>
>>
>>> Hi,
>>>
>>> I manually georeferenced some images in ArcGIS and at the end, I got a
>>> .tfwx file and a aux.xml.
>>>
>>> I wish to convert them into geotiff with the georeferenced info in the
>>> header:
>>>
>>> 1) I've renamed the .tfwx into .tfw and run a gdal_translate.  The
>>> command didn't failed but the resulting image is not georeferenced at all
>>>
>>> Is it possible to do that perhaps using the info in the .aux.xml file?
>>>
>>> Thanks,
>>>
>>> MartinO
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120618/1bd76fa4/attachment.html>

From K.Digeser at gmail.com  Mon Jun 18 07:14:43 2012
From: K.Digeser at gmail.com (ElPer)
Date: Mon, 18 Jun 2012 07:14:43 -0700 (PDT)
Subject: [gdal-dev] encoding problem when convert S57 to shapefile under
	linux
Message-ID: <1340028883882-4982127.post@n6.nabble.com>

Hello, 

I have an encoding problem with the DEPARE layer when I convert S57 files to
shapefiles on a linux system wich environment language is german.
In my java rcp program I use ogr2ogr to convert S57 files to shapefiles.
Under windows I haven't any problems, but when I try it on a linux system
the DEPARE layer isn't visible. 
Now I found out that the .dbf file under my linux system is different
because ogr use the environment variable LANG to encoding which is
/de_DE.UTF-8/ on the system and make  instead of a point a comma. So the
mapserver can't interpret it correctly and show a white area.
I just tried different things to change the language like:

* gdal.SetConfigOption("LANG", "en_US.UTF-8") in the code
* gdal.SetConfigOption("PGCLIENTENCODING", "en_US.UTF-8") in the code
* change System environment in the code 
* use -nl en_US.UTF8 in Program arguments
* use -Duser.language in  Program arguments

but nothing help.
I hope somebody can help me

ElPer

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/encoding-problem-when-convert-S57-to-shapefile-under-linux-tp4982127.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From geomartino at gmail.com  Mon Jun 18 08:03:42 2012
From: geomartino at gmail.com (geomartino)
Date: Mon, 18 Jun 2012 08:03:42 -0700 (PDT)
Subject: [gdal-dev] convert .tif/.tfwx/.aux.xml to a geotiff?
In-Reply-To: <4FDC975B.5070400@free.fr>
References: <CAENYpGY6XR5RSVDcqQSM+a2WQugPdgraomE5b5=vWNSJ_ebN9A@mail.gmail.com>
	<4FDC975B.5070400@free.fr>
Message-ID: <1340031822723-4982138.post@n6.nabble.com>

.tfwx
4,2446168308058878
-0,12113356893358353
-0,12348388948051223
-4,2263807340657786
323886,87950403825
5182071,0717815552

.aux.xml

<PAMDataset>
  <Metadata/>
  <Metadata domain="xml:ESRI" format="xml">
    <GeodataXform xsi:type="typens:PolynomialXform"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:typens="http://www.esri.com/schemas/ArcGIS/10.0">
      <PolynomialOrder>1</PolynomialOrder>
      <SpatialReference xsi:type="typens:ProjectedCoordinateSystem">
       
<WKT>PROJCS[&quot;NAD_1927_UTM_Zone_19N&quot;,GEOGCS[&quot;GCS_North_American_1927&quot;,DATUM[&quot;D_North_American_1927&quot;,SPHEROID[&quot;Clarke_1866&quot;,6378206.4,294.9786982]],PRIMEM[&quot;Greenwich&quot;,0.0],UNIT[&quot;Degree&quot;,0.0174532925199433]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;False_Easting&quot;,500000.0],PARAMETER[&quot;False_Northing&quot;,0.0],PARAMETER[&quot;Central_Meridian&quot;,-69.0],PARAMETER[&quot;Scale_Factor&quot;,0.9996],PARAMETER[&quot;Latitude_Of_Origin&quot;,0.0],UNIT[&quot;Meter&quot;,1.0],AUTHORITY[&quot;EPSG&quot;,26719]]</WKT>
        <XOrigin>-5121000</XOrigin>
        <YOrigin>-9998000</YOrigin>
        <XYScale>450450052.74759901</XYScale>
        <ZOrigin>-100000</ZOrigin>
        <ZScale>10000</ZScale>
        <MOrigin>-100000</MOrigin>
        <MScale>10000</MScale>
        <XYTolerance>0.001</XYTolerance>
        <ZTolerance>0.001</ZTolerance>
        <MTolerance>0.001</MTolerance>
        <HighPrecision>true</HighPrecision>
        <WKID>26719</WKID>
      </SpatialReference>
      <SourceGCPs xsi:type="typens:ArrayOfDouble">
        <Double>4.8908512645451037</Double>
        <Double>25.730248842109091</Double>
        <Double>16.685287664469797</Double>
        <Double>25.294638277962804</Double>
        <Double>4.6809492973132762</Double>
        <Double>6.0210986253641749</Double>
        <Double>17.233821111329988</Double>
        <Double>6.366754659536582</Double>
      </SourceGCPs>
      <TargetGCPs xsi:type="typens:ArrayOfDouble">
        <Double>330000</Double>
        <Double>5178000</Double>
        <Double>345000</Double>
        <Double>5177000</Double>
        <Double>329000</Double>
        <Double>5153000</Double>
        <Double>345000</Double>
        <Double>5153000</Double>
      </TargetGCPs>
    </GeodataXform>
  </Metadata>
</PAMDataset>

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-convert-tif-tfwx-aux-xml-to-a-geotiff-tp4981730p4982138.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From etourigny.dev at gmail.com  Mon Jun 18 08:42:37 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 18 Jun 2012 12:42:37 -0300
Subject: [gdal-dev] how to programatically clear PAM information such as
	stats and histogram
Message-ID: <CA+TxYvPP=bSbswXJnMmfjwh7H6JO9x89QV3u4KcKhHwAEDeXbw@mail.gmail.com>

Hi devs,

I would like to know if there is a way with existing C api to clear
PAM information related to statistics and histogram.

Currently, if a raster file is modified outside of gdal, the .aux.xml
file may be invalid.

The approaches I can see are

1) Removing the .aux.xml file - but it may contain other valid
information such as CRS
2) Removing the relevant metadata items (for stats) and removing the
<Histograms> section in the .aux.xml file

thanks,
Etienne

From Mario.Beaulieu at crim.ca  Mon Jun 18 12:30:19 2012
From: Mario.Beaulieu at crim.ca (Beaulieu Mario)
Date: Mon, 18 Jun 2012 15:30:19 -0400
Subject: [gdal-dev] Polarimetric Radarsat2 band order question.
Message-ID: <87e3d48c-73e8-495c-9ecd-0fe442f0ff84@corpo.crim.ca>

Hi, I would like to know when we use product.xml has input file name, in which order are the bands (HH, HV, VH, VV) in the case of radarsat2 polarimetric data?
 
____________________________________________________
Mario Beaulieu????????????? CR????? IM
mario.beaulieu at crim.ca????? CR????? IM
Agent de Recherche Senior??? CR??? IM??????? 
Senior Research Agent????????? CRIM
---------------------------- CRIM CRIM
CRIM www.crim.ca??????????????????????????? 
405, avenue Ogilvy, bureau 101????? 
Montr?al (Qu?bec)  H3N 1M3    ??????? 
T?l?phone/Telephone  : 1 514-840-1234 (#2478)
Sans frais/Toll Free : 1 877-840-2746 ????? 
T?l?copieur/Fax????? : 1 514 840-1244
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120618/ef3d1b66/attachment.html>

From tigerpvr at gmail.com  Tue Jun 19 01:43:25 2012
From: tigerpvr at gmail.com (Pavel Rudchenko)
Date: Tue, 19 Jun 2012 12:43:25 +0400
Subject: [gdal-dev] How to set GEO-tags ProjectedCSTypeGeoKey and
	ProjectionGeoKey?
Message-ID: <CAKhK-3WHLBmw-z2PVMhnq471Am8NgXHuyQBOcAH5nAr8HD26Pg@mail.gmail.com>

Hello!
How may I set GEO-tags non-user defined?

Now it is:
ProjectedCSTypeGeoKey (Short,1): User-Defined
ProjectionGeoKey (Short,1): User-Defined

But shall be like this:
ProjectedCSTypeGeoKey (Short,1): PCS_WGS84_UTM_zone_30N
ProjectionGeoKey (Short,1): Proj_UTM_zone_30N

My GDAL-wrapper code is:
using (SpatialReference oSrs = new SpatialReference(null))
{
  oSrs.SetProjCS("WGS_1984 / UTM zone 36N");
  oSrs.SetWellKnownGeogCS("WGS84");
  oSrs.SetUTM(36, 1);
  string wkt;
  oSrs.ExportToWkt(out wkt);
  ds.SetProjection(wkt);      // Dataset
}

Thank you!

From gunter.becker at csogis.de  Tue Jun 19 04:29:07 2012
From: gunter.becker at csogis.de (Gunter Becker)
Date: Tue, 19 Jun 2012 04:29:07 -0700 (PDT)
Subject: [gdal-dev] MSSQL Spatial and UTF-8
Message-ID: <1340105347627-4982371.post@n6.nabble.com>

Hi,

I'm trying to import a shapefile via ogr2ogr into a SQL Server 2008 DB. When
looking at the created table I realised that some columns have some ugly
columnnames. Same to the strings in the data of this table. The problem is
caused by some special characters (german umlauts) in the dataset. 

Using ogr2ogr with other drivers (ex. SQLite, PostGIS) to import this
shapefile works as expected so that I think it is a problem with the "MSSQL
Spatial"-driver.

Is there any driver related setting I can make to force UTF-8 import into
SQL Server?

Thanks, Gunter

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/MSSQL-Spatial-and-UTF-8-tp4982371.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From lhomme.xavier at gmail.com  Tue Jun 19 08:06:17 2012
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Tue, 19 Jun 2012 17:06:17 +0200
Subject: [gdal-dev] [WFS Driver] Http Error Code 414
In-Reply-To: <201206122016.31676.even.rouault@mines-paris.org>
References: <CACqzBMyFjARzKbtccGA2ciQ2CoTbA7JYMrLR+UN=++FtoODbrw@mail.gmail.com>
	<201206122016.31676.even.rouault@mines-paris.org>
Message-ID: <CACqzBMx9tf3s_m+CLaFdkn3dKfVxYqhLYJgAsyTBgAdzDsB1dA@mail.gmail.com>

Hi
I tried to submit a POST request with the KVP form to an ArcGIS Server 10.0
but in response I've got an XML Parsing error.

 Do I need to translate the KVP form of the url into an XML form ?

xav


2012/6/12 Even Rouault <even.rouault at mines-paris.org>

> Le mardi 12 juin 2012 14:38:05, xavier lhomme a ?crit :
> > Hello
> >
> >  I'm requesting a WFS source with a very long request. The URI generated
> by
> > the WFS driver is very long (more than 2048). In return I' ve got an HTTP
> > error code 414.
> >  OGRWFSDataSource::HTTPFetch function should be protected against very
> long
> > URI and switch between a GET request to a POST request.
>
> Patch welcome and public server for testing :-)
>
> >
> > best regards
> > xavier
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120619/9258fe6c/attachment.html>

From jdmorgan at unca.edu  Tue Jun 19 09:37:01 2012
From: jdmorgan at unca.edu (jdmorgan)
Date: Tue, 19 Jun 2012 12:37:01 -0400
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
Message-ID: <4FE0AAAD.3010000@gmail.com>

Hello,

Is there a way to do something along the lines of zonal statistics with 
gdal.Basically, I have a county shape file and a classified raster 
dataset.I would like to count the number of raster pixels/county 
(FIPS).Is this possible with GDAL/OGR?If so can someone point me in the 
right direction?  If so, awesome as I plan to do some automation with 
python.

Thanks,

Derek

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120619/53ef4c5e/attachment-0001.html>

From alexander.bruy at gmail.com  Tue Jun 19 10:15:33 2012
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Tue, 19 Jun 2012 20:15:33 +0300
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <4FE0AAAD.3010000@gmail.com>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
Message-ID: <CALuHMPAAuvUFSw+ndL9ucg5jAkQcqQT3m84FFxMhY6nZkP0E0A@mail.gmail.com>

Hi,

you can use GDAL Python bindigs for this [0, 1]. The process may look
as open shape and raster, then convert pixel coordinates into map (shape)
coordinates and process only pixels inside your polygon.

[0] http://gdal.org/gdal_tutorial.html
[1] http://gdal.org/ogr/ogr_apitut.html

2012/6/19 jdmorgan <jdmorgan at unca.edu>:
> Hello,
>
> Is there a way to do something along the lines of zonal statistics with
> gdal.? Basically, I have a county shape file and a classified raster
> dataset.? I would like to count the number of raster pixels/county (FIPS).
> Is this possible with GDAL/OGR?? If so can someone point me in the right
> direction?? If so, awesome as I plan to do some automation with python.
>
> Thanks,
>
> Derek

Hope this helps
-- 
Alexander Bruy

From pcorti at gmail.com  Tue Jun 19 10:25:50 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Tue, 19 Jun 2012 19:25:50 +0200
Subject: [gdal-dev] Cannot read NetCDF subdatasets
In-Reply-To: <CA+TxYvMwssK-Zm82OoO+icz7TobevG00Kx1ZNeByZ_Ekx3d86w@mail.gmail.com>
References: <CAHXrU-L8sF6_HUUJ9ZLVo=QKdGqjW7hrFU=EqAhLfW+HWxi7DQ@mail.gmail.com>
	<4202337.4ulnyHD3Et@tatras>
	<CA+TxYvMwssK-Zm82OoO+icz7TobevG00Kx1ZNeByZ_Ekx3d86w@mail.gmail.com>
Message-ID: <CAHXrU-LJALMv5R3CyHiRG70HFBw0-wb9A_Y_CiL==zPPePW77w@mail.gmail.com>

Hi Etienne

> I would guess your netcdf and gdal installation do not have netcdf-4 support.
> And probably a 'gdalinfo <file>' shows the hdf5 driver picks it up, right?

That was!
I was missing out the --enable-netcdf-4 option: after recompiling
netcdf with that option option and then recompiling GDAL everything
works fine :)
By the way, hdf5 is still picked when opening the whole dataset, but
netcdf is correctly picked when opening the subdataset: is it the
desired behavior?

Thanks so much for your invaluable support, Etienne! ;)
p


-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti

From even.rouault at mines-paris.org  Tue Jun 19 10:41:01 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 19 Jun 2012 19:41:01 +0200
Subject: [gdal-dev] [WFS Driver] Http Error Code 414
In-Reply-To: <CACqzBMx9tf3s_m+CLaFdkn3dKfVxYqhLYJgAsyTBgAdzDsB1dA@mail.gmail.com>
References: <CACqzBMyFjARzKbtccGA2ciQ2CoTbA7JYMrLR+UN=++FtoODbrw@mail.gmail.com>
	<201206122016.31676.even.rouault@mines-paris.org>
	<CACqzBMx9tf3s_m+CLaFdkn3dKfVxYqhLYJgAsyTBgAdzDsB1dA@mail.gmail.com>
Message-ID: <201206191941.01070.even.rouault@mines-paris.org>

Le mardi 19 juin 2012 17:06:17, xavier lhomme a ?crit :
> Hi
> I tried to submit a POST request with the KVP form to an ArcGIS Server 10.0
> but in response I've got an XML Parsing error.
> 
>  Do I need to translate the KVP form of the url into an XML form ?

Yes, the content you send in a POST is different from the KVP of a GET. There 
are examples (if I remember correctly) in the OGC WFS spec.

> 
> xav
> 
> 
> 2012/6/12 Even Rouault <even.rouault at mines-paris.org>
> 
> > Le mardi 12 juin 2012 14:38:05, xavier lhomme a ?crit :
> > > Hello
> > > 
> > >  I'm requesting a WFS source with a very long request. The URI
> > >  generated
> > 
> > by
> > 
> > > the WFS driver is very long (more than 2048). In return I' ve got an
> > > HTTP error code 414.
> > > 
> > >  OGRWFSDataSource::HTTPFetch function should be protected against very
> > 
> > long
> > 
> > > URI and switch between a GET request to a POST request.
> > 
> > Patch welcome and public server for testing :-)
> > 
> > > best regards
> > > xavier

From etourigny.dev at gmail.com  Tue Jun 19 10:48:40 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 19 Jun 2012 14:48:40 -0300
Subject: [gdal-dev] Cannot read NetCDF subdatasets
In-Reply-To: <CAHXrU-LJALMv5R3CyHiRG70HFBw0-wb9A_Y_CiL==zPPePW77w@mail.gmail.com>
References: <CAHXrU-L8sF6_HUUJ9ZLVo=QKdGqjW7hrFU=EqAhLfW+HWxi7DQ@mail.gmail.com>
	<4202337.4ulnyHD3Et@tatras>
	<CA+TxYvMwssK-Zm82OoO+icz7TobevG00Kx1ZNeByZ_Ekx3d86w@mail.gmail.com>
	<CAHXrU-LJALMv5R3CyHiRG70HFBw0-wb9A_Y_CiL==zPPePW77w@mail.gmail.com>
Message-ID: <CA+TxYvPqew7jwAKfcNv9CbD9xK_rDj7CX7eeG1SE7TMFHscS1Q@mail.gmail.com>

On Tue, Jun 19, 2012 at 2:25 PM, Paolo Corti <pcorti at gmail.com> wrote:
> Hi Etienne
>
>> I would guess your netcdf and gdal installation do not have netcdf-4 support.
>> And probably a 'gdalinfo <file>' shows the hdf5 driver picks it up, right?
>
> That was!
> I was missing out the --enable-netcdf-4 option: after recompiling
> netcdf with that option option and then recompiling GDAL everything
> works fine :)
> By the way, hdf5 is still picked when opening the whole dataset, but
> netcdf is correctly picked when opening the subdataset: is it the
> desired behavior?
>

no... unless your system uses the hdf5 driver before the netcdf driver.

If the netcdf driver detects a hdf5 file that ends with nc, nc2, nc4
or cdf (the common extensions) then it opens it, else it passes it to
the hdf5 driver.
There is no other way of identifying hdf5 files that are not "netcdf-4" files.

There is a test in the autotest suite that tests that the netcdf
driver picks up netcdf-4 files but not other hdf5 files. If you do
have the autotests installed, try to run the gdrivers/netcdf.py test.

Can you send an example file to me?


> Thanks so much for your invaluable support, Etienne! ;)
> p

you are welcome!
Etienne
>
>
> --
> Paolo Corti
> Geospatial software developer
> web: http://www.paolocorti.net
> twitter: @capooti
> skype: capooti

From jukka.rahkonen at mmmtike.fi  Tue Jun 19 11:08:29 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 19 Jun 2012 18:08:29 +0000 (UTC)
Subject: [gdal-dev] MSSQL Spatial and UTF-8
References: <1340105347627-4982371.post@n6.nabble.com>
Message-ID: <loom.20120619T200553-717@post.gmane.org>

Gunter Becker <gunter.becker <at> csogis.de> writes:

> 
> Hi,
> 
> I'm trying to import a shapefile via ogr2ogr into a SQL Server 2008 DB. When
> looking at the created table I realised that some columns have some ugly
> columnnames. Same to the strings in the data of this table. The problem is
> caused by some special characters (german umlauts) in the dataset. 
> 
> Using ogr2ogr with other drivers (ex. SQLite, PostGIS) to import this
> shapefile works as expected so that I think it is a problem with the "MSSQL
> Spatial"-driver.
> 
> Is there any driver related setting I can make to force UTF-8 import into
> SQL Server?

You can try if setting SHAPE_ENCODING environment variable to suit your
shapefile before running ogr2ogr helps. It did help me couple of days ago with
Spatialite.

-Jukka Rahkonen-


From lhomme.xavier at gmail.com  Tue Jun 19 12:41:06 2012
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Tue, 19 Jun 2012 21:41:06 +0200
Subject: [gdal-dev] [WFS Driver] Http Error Code 414
In-Reply-To: <201206191941.01070.even.rouault@mines-paris.org>
References: <CACqzBMyFjARzKbtccGA2ciQ2CoTbA7JYMrLR+UN=++FtoODbrw@mail.gmail.com>
	<201206122016.31676.even.rouault@mines-paris.org>
	<CACqzBMx9tf3s_m+CLaFdkn3dKfVxYqhLYJgAsyTBgAdzDsB1dA@mail.gmail.com>
	<201206191941.01070.even.rouault@mines-paris.org>
Message-ID: <CACqzBMykagqk8GjdnkQyoLM5FmZGjhjBchdemPw3tctDYLKXZQ@mail.gmail.com>

>From specification

When using the HTTP POST method, the content type for XML encoded WFS
requests must be set to text/xml.  When using the HTTP POST method, the
content type for KVP encoded WFS requests must be set to
application/x-www-form-urlencoded and the content of the document must be
equivalent to the query string of an HTTP GET request.  That is, the
content must be equivalent to the string that follows the ??? character in
a URL encoded GET request.  Of course, the content must be encoded [10] to
protect special characters.

Then I will try to split the url after ? Encode the end of the url to
protect special character, set application/x-www-form-urlencoded and the
end url to the post parameter....

And if not working i will try the xml form...
Le 19 juin 2012 19:40, "Even Rouault" <even.rouault at mines-paris.org> a
?crit :

> Le mardi 19 juin 2012 17:06:17, xavier lhomme a ?crit :
> > Hi
> > I tried to submit a POST request with the KVP form to an ArcGIS Server
> 10.0
> > but in response I've got an XML Parsing error.
> >
> >  Do I need to translate the KVP form of the url into an XML form ?
>
> Yes, the content you send in a POST is different from the KVP of a GET.
> There
> are examples (if I remember correctly) in the OGC WFS spec.
>
> >
> > xav
> >
> >
> > 2012/6/12 Even Rouault <even.rouault at mines-paris.org>
> >
> > > Le mardi 12 juin 2012 14:38:05, xavier lhomme a ?crit :
> > > > Hello
> > > >
> > > >  I'm requesting a WFS source with a very long request. The URI
> > > >  generated
> > >
> > > by
> > >
> > > > the WFS driver is very long (more than 2048). In return I' ve got an
> > > > HTTP error code 414.
> > > >
> > > >  OGRWFSDataSource::HTTPFetch function should be protected against
> very
> > >
> > > long
> > >
> > > > URI and switch between a GET request to a POST request.
> > >
> > > Patch welcome and public server for testing :-)
> > >
> > > > best regards
> > > > xavier
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120619/24bee859/attachment.html>

From even.rouault at mines-paris.org  Tue Jun 19 12:48:01 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 19 Jun 2012 21:48:01 +0200
Subject: [gdal-dev] [WFS Driver] Http Error Code 414
In-Reply-To: <CACqzBMykagqk8GjdnkQyoLM5FmZGjhjBchdemPw3tctDYLKXZQ@mail.gmail.com>
References: <CACqzBMyFjARzKbtccGA2ciQ2CoTbA7JYMrLR+UN=++FtoODbrw@mail.gmail.com>
	<201206191941.01070.even.rouault@mines-paris.org>
	<CACqzBMykagqk8GjdnkQyoLM5FmZGjhjBchdemPw3tctDYLKXZQ@mail.gmail.com>
Message-ID: <201206192148.01690.even.rouault@mines-paris.org>

Le mardi 19 juin 2012 21:41:06, xavier lhomme a ?crit :
> From specification
> 
> When using the HTTP POST method, the content type for XML encoded WFS
> requests must be set to text/xml.  When using the HTTP POST method, the
> content type for KVP encoded WFS requests must be set to
> application/x-www-form-urlencoded and the content of the document must be
> equivalent to the query string of an HTTP GET request.  That is, the
> content must be equivalent to the string that follows the ??? character in
> a URL encoded GET request.  Of course, the content must be encoded [10] to
> protect special characters.
> 
> Then I will try to split the url after ? Encode the end of the url to
> protect special character, set application/x-www-form-urlencoded and the
> end url to the post parameter....

In fact, the spec describe 2 different methods (the above formatting of the 
text of the specification is a bit confusing. Interested readers should 
directly look at the spec and the table in it).

I didn't remember that KVP could also be used in POST. I thought of the XML 
form, like  :

<?xml version="1.0" ?>
<wfs:GetFeature
service="WFS"
version="1.1.0"
outputFormat="text/xml; subtype=gml/3.1.1"
xmlns:myns="http://www.someserver.com/myns"
xmlns:wfs="http://www.opengis.net/wfs"
xmlns:ogc="http://www.opengis.net/ogc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.opengis.net/wfs ../wfs/1.1.0/WFS.xsd">
<wfs:Query typeName="myns:InWaterA_1M">
<ogc:Filter>
<ogc:GmlObjectId gml:id="InWaterA_1M.1234"/>
</ogc:Filter>

The best is to try of course what works with your server.

> 
> And if not working i will try the xml form...
> Le 19 juin 2012 19:40, "Even Rouault" <even.rouault at mines-paris.org> a
> 
> ?crit :
> > Le mardi 19 juin 2012 17:06:17, xavier lhomme a ?crit :
> > > Hi
> > > I tried to submit a POST request with the KVP form to an ArcGIS Server
> > 
> > 10.0
> > 
> > > but in response I've got an XML Parsing error.
> > > 
> > >  Do I need to translate the KVP form of the url into an XML form ?
> > 
> > Yes, the content you send in a POST is different from the KVP of a GET.
> > There
> > are examples (if I remember correctly) in the OGC WFS spec.
> > 
> > > xav
> > > 
> > > 
> > > 2012/6/12 Even Rouault <even.rouault at mines-paris.org>
> > > 
> > > > Le mardi 12 juin 2012 14:38:05, xavier lhomme a ?crit :
> > > > > Hello
> > > > > 
> > > > >  I'm requesting a WFS source with a very long request. The URI
> > > > >  generated
> > > > 
> > > > by
> > > > 
> > > > > the WFS driver is very long (more than 2048). In return I' ve got
> > > > > an HTTP error code 414.
> > > > > 
> > > > >  OGRWFSDataSource::HTTPFetch function should be protected against
> > 
> > very
> > 
> > > > long
> > > > 
> > > > > URI and switch between a GET request to a POST request.
> > > > 
> > > > Patch welcome and public server for testing :-)
> > > > 
> > > > > best regards
> > > > > xavier

From dennis.duro at glel.carleton.ca  Tue Jun 19 14:55:49 2012
From: dennis.duro at glel.carleton.ca (dcd)
Date: Tue, 19 Jun 2012 14:55:49 -0700 (PDT)
Subject: [gdal-dev] [gdal_translate] Spatial subset HDF4Image with multiple
 subdatasets?
Message-ID: <1340142949428-4982526.post@n6.nabble.com>

Hi,

Is it possible to spatially subset an HDF4Image that contains multiple
subdatasets using gdal_translate (GDAL 1.9.1)? When using a spatial subset
switch ("-a_ullr"), I get the following response:

"Input file contains subdatasets. Please, select one of them for reading."

This happens regardless of output format specified (HDF4Image, GTiff, ENVI,
etc.), or whether the "-b" switch has been used as per the examples here:
http://www.gdal.org/gdal_translate.html. A workaround is to use the "-sds"
switch allows the process to complete, but (as expected) it processes each
subdataset as a separate file. I suppose I can just merge these subdatasets
together again, but I'd like to avoid the extra step. Is this possible?

I'm working with a MODIS imagery (MOD09GA), but I've had the issues with
other similar HDF4 datasets.

Any help would be appreciated!

Cheers,

Dennis

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-Spatial-subset-HDF4Image-with-multiple-subdatasets-tp4982526.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Tue Jun 19 15:02:14 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 20 Jun 2012 00:02:14 +0200
Subject: [gdal-dev] [gdal_translate] Spatial subset HDF4Image with
	multiple subdatasets?
In-Reply-To: <1340142949428-4982526.post@n6.nabble.com>
References: <1340142949428-4982526.post@n6.nabble.com>
Message-ID: <201206200002.14737.even.rouault@mines-paris.org>

Le mardi 19 juin 2012 23:55:49, dcd a ?crit :
> Hi,
> 
> Is it possible to spatially subset an HDF4Image that contains multiple
> subdatasets using gdal_translate (GDAL 1.9.1)? When using a spatial subset
> switch ("-a_ullr"), I get the following response:
> 
> "Input file contains subdatasets. Please, select one of them for reading."
> 
> This happens regardless of output format specified (HDF4Image, GTiff, ENVI,
> etc.), or whether the "-b" switch has been used as per the examples here:
> http://www.gdal.org/gdal_translate.html. A workaround is to use the "-sds"
> switch allows the process to complete, but (as expected) it processes each
> subdataset as a separate file. I suppose I can just merge these subdatasets
> together again, but I'd like to avoid the extra step. Is this possible?
> 
> I'm working with a MODIS imagery (MOD09GA), but I've had the issues with
> other similar HDF4 datasets.

You can use one of the subdataset names listed by gdalinfo on the HDF file as a 
pseudo-filename usable by any GDAL utility (including gdal_translate).

For example :

$ gdalinfo MOD02HKM.A2011169.1750.005.NRT.hdf
[...]
Subdatasets:
  SUBDATASET_1_NAME=HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB
  SUBDATASET_1_DESC=[5x4060x2708] EV_500_RefSB MODIS_SWATH_Type_L1B (16-bit 
unsigned integer)
  SUBDATASET_2_NAME=HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB_Uncert_Indexes
  SUBDATASET_2_DESC=[5x4060x2708] EV_500_RefSB_Uncert_Indexes 
MODIS_SWATH_Type_L1B (8-bit unsigned integer)
[...]

$ gdalinfo 
HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB

Driver: HDF4Image/HDF4 Dataset
Files: MOD02HKM.A2011169.1750.005.NRT.hdf
Size is 2708, 4060
Coordinate System is `'
GCP Projection = 
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
[...]

From packalen at cs.joensuu.fi  Tue Jun 19 21:59:29 2012
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed, 20 Jun 2012 07:59:29 +0300 (EEST)
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <4FE0AAAD.3010000@gmail.com>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
Message-ID: <Pine.GSO.4.64.1206200759080.9424@cs.joensuu.fi>

Derek,

Look at the http://starspan.projects.atlas.ca.gov project.

Petteri

On Tue, 19 Jun 2012, jdmorgan wrote:

> Hello,
>
> Is there a way to do something along the lines of zonal statistics with 
> gdal.Basically, I have a county shape file and a classified raster dataset.I 
> would like to count the number of raster pixels/county (FIPS).Is this 
> possible with GDAL/OGR?If so can someone point me in the right direction?  If 
> so, awesome as I plan to do some automation with python.
>
> Thanks,
>
> Derek
>
>

From anton.korosov at nersc.no  Wed Jun 20 00:47:26 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Wed, 20 Jun 2012 09:47:26 +0200
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <CALuHMPAAuvUFSw+ndL9ucg5jAkQcqQT3m84FFxMhY6nZkP0E0A@mail.gmail.com>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
	<CALuHMPAAuvUFSw+ndL9ucg5jAkQcqQT3m84FFxMhY6nZkP0E0A@mail.gmail.com>
Message-ID: <4FE1800E.8090106@nersc.no>

Hi,

though be prepared that converting large images into shape is quite 
slow. I would go opposite way: convert a shape to a raster [0, 1]; 
extract band from the image as another raster [2]; and then extract 
statistics using Numpy [e.g. 3].

[0] http://stackoverflow.com/questions/2220749/rasterizing-a-gdal-layer
[1] 
http://trac.osgeo.org/gdal/wiki/FAQRaster#HowcanIcreateablankrasterbasedonavectorfilesextentsforusewithgdal_rasterizeGDAL1.8.0
[2] http://gdal.org/gdal_tutorial.html#gdal_tutorial_read
[3] zoneMean = rasterFromBand[rasterFromShape = zoneIndex].mean()

Good luck!
Anton
On 06/19/2012 07:15 PM, Alexander Bruy wrote:
> Hi,
>
> you can use GDAL Python bindigs for this [0, 1]. The process may look
> as open shape and raster, then convert pixel coordinates into map (shape)
> coordinates and process only pixels inside your polygon.
>
> [0] http://gdal.org/gdal_tutorial.html
> [1] http://gdal.org/ogr/ogr_apitut.html
>
> 2012/6/19 jdmorgan<jdmorgan at unca.edu>:
>> Hello,
>>
>> Is there a way to do something along the lines of zonal statistics with
>> gdal.  Basically, I have a county shape file and a classified raster
>> dataset.  I would like to count the number of raster pixels/county (FIPS).
>> Is this possible with GDAL/OGR?  If so can someone point me in the right
>> direction?  If so, awesome as I plan to do some automation with python.
>>
>> Thanks,
>>
>> Derek
>
> Hope this helps


From pcorti at gmail.com  Wed Jun 20 01:47:20 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Wed, 20 Jun 2012 10:47:20 +0200
Subject: [gdal-dev] Cannot read NetCDF subdatasets
In-Reply-To: <CA+TxYvPqew7jwAKfcNv9CbD9xK_rDj7CX7eeG1SE7TMFHscS1Q@mail.gmail.com>
References: <CAHXrU-L8sF6_HUUJ9ZLVo=QKdGqjW7hrFU=EqAhLfW+HWxi7DQ@mail.gmail.com>
	<4202337.4ulnyHD3Et@tatras>
	<CA+TxYvMwssK-Zm82OoO+icz7TobevG00Kx1ZNeByZ_Ekx3d86w@mail.gmail.com>
	<CAHXrU-LJALMv5R3CyHiRG70HFBw0-wb9A_Y_CiL==zPPePW77w@mail.gmail.com>
	<CA+TxYvPqew7jwAKfcNv9CbD9xK_rDj7CX7eeG1SE7TMFHscS1Q@mail.gmail.com>
Message-ID: <CAHXrU-Lmq0q=KFPcC-iu75XELBxX0bfxEBaszDR+dqqD4DT=hw@mail.gmail.com>

On Tue, Jun 19, 2012 at 7:48 PM, Etienne Tourigny
<etourigny.dev at gmail.com> wrote:
> no... unless your system uses the hdf5 driver before the netcdf driver.
>
> If the netcdf driver detects a hdf5 file that ends with nc, nc2, nc4
> or cdf (the common extensions) then it opens it, else it passes it to
> the hdf5 driver.
> There is no other way of identifying hdf5 files that are not "netcdf-4" files.
>
> There is a test in the autotest suite that tests that the netcdf
> driver picks up netcdf-4 files but not other hdf5 files. If you do
> have the autotests installed, try to run the gdrivers/netcdf.py test.
>
> Can you send an example file to me?
>
>

The system, when opening the whole dataset uses hdf5 as the default.
At least, gdalinfo  display the list of each subdataset like this:

....
Subdatasets:
  SUBDATASET_1_NAME=HDF5:"/effisRisk/Data/Season-2012/Ecmwf/m05/Glb_20120528.nc4"://cf_DangerRisk
  SUBDATASET_1_DESC=[10x640x1280] //cf_DangerRisk (32-bit floating-point)
  SUBDATASET_2_NAME=HDF5:"/effisRisk/Data/Season-2012/Ecmwf/m05/Glb_20120528.nc4"://cf_FWI
  SUBDATASET_2_DESC=[10x640x1280] //cf_FWI (32-bit floating-point)
....

When opening a subdatset it uses the netcdf as the default
If I specify NETCDF:dataset it correctly uses netcdf also for the whole dataset.

Tests run fine, this is the output:

# python netcdf.py
/usr/lib/python2.4/site-packages/GDAL-1.9.0-py2.4-linux-i686.egg/osgeo/gdal.py:80:
DeprecationWarning: gdal.py was placed in a namespace, it is now
available as osgeo.gdal
  DeprecationWarning)
  TEST: netcdf_1 ... NOTICE: using netcdf version 4.1.3  has_nc2: True
 has_nc4: False
success
  TEST: netcdf_2 ... success
  TEST: netcdf_3 ... success
  TEST: netcdf_4 ... success
  TEST: netcdf_5 ... success
  TEST: netcdf_6 ... success
  TEST: netcdf_7 ... success
  TEST: netcdf_8 ... success
  TEST: netcdf_9 ... success
  TEST: netcdf_10 ... success
  TEST: netcdf_11 ... success
  TEST: netcdf_12 ... success
  TEST: netcdf_13 ... success
  TEST: netcdf_14 ... success
  TEST: netcdf_15 ... success
  TEST: netcdf_16 ... skip
  TEST: netcdf_17 ... skip
  TEST: netcdf_18 ... skip
  TEST: netcdf_19 ... skip
  TEST: netcdf_20 ... skip
  TEST: netcdf_21 ... skip
  TEST: netcdf_22 ... skip
  TEST: netcdf_23 ... skip
  TEST: netcdf_24 ... success
  TEST: netcdf_25 ... success
  TEST: netcdf_26 ... success
  TEST: netcdf_27 ... success
  TEST: SetGeoTransform: byte.tif ... success
  TEST: SetProjection: byte.tif ... success
  TEST: CreateCopy: byte.tif ... success
  TEST: Create: byte.tif ... success
  TEST: SetNoDataValue: byte.tif ... success
  TEST: CreateCopy: byte_signed.tif ... success
  TEST: Create: byte_signed.tif ... success
  TEST: SetNoDataValue: byte_signed.tif ... success
  TEST: CreateCopy: int16.tif ... success
  TEST: Create: int16.tif ... success
  TEST: SetNoDataValue: int16.tif ... success
  TEST: CreateCopy: int32.tif ... success
  TEST: Create: int32.tif ... success
  TEST: SetNoDataValue: int32.tif ... success
  TEST: CreateCopy: float32.tif ... success
  TEST: Create: float32.tif ... success
  TEST: SetNoDataValue: float32.tif ... success
  TEST: CreateCopy: float64.tif ... success
  TEST: Create: float64.tif ... success
  TEST: SetNoDataValue: float64.tif ... success

Test Script: netcdf
Succeeded: 39
Failed:    0 (0 blew exceptions)
Skipped:   8
Expected fail:0

I will send you the link to download a test dataset off list.
cheers
p

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti

From zoltans at geograph.co.za  Wed Jun 20 01:53:46 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Wed, 20 Jun 2012 10:53:46 +0200
Subject: [gdal-dev] OGR 1.9.0 won't open DGN file
Message-ID: <4FE18F9A.5040003@geograph.co.za>

Hi,
I have some DGN v7 files with contours, and I wish to add up the total 
length of all the contours in the file.

Using:
zls at gs0:~/ngi10k/ngi10k_geo$ ogrinfo --version
GDAL 1.9.0, released 2011/12/29

I get:
zls at gs0:~/ngi10k/ngi10k_geo$ ogrinfo 3117bb_lin_v7.dgn
INFO: Open of `3117bb_lin_v7.dgn'
       using driver `DGN' successful.
1: elements
zls at gs0:~/ngi10k/ngi10k_geo$

If I use parameters -so or -q or -geom=SUMMARY then I get the same 
error, but if I use parameter -al, then the DGN file is opened and all 
24000 contours are dumped to stdout.
QGIS 1.7.3 on Windows does open the same DGN file.

How can I investigate further as to why Linux ogr won't open the file 
using ?

TIA,
Zoltan

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================


From anssisamuli at gmail.com  Wed Jun 20 02:26:33 2012
From: anssisamuli at gmail.com (anssi)
Date: Wed, 20 Jun 2012 11:26:33 +0200
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <Pine.GSO.4.64.1206200759080.9424@cs.joensuu.fi>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
	<Pine.GSO.4.64.1206200759080.9424@cs.joensuu.fi>
Message-ID: <CAPkgWhmirmYnHQqSBxgHp9RfLEYuwrq_oHHzmT7CjCGc1Q1aLA@mail.gmail.com>

If you first rasterize your shapefile to the extent of your raster,
you can compute some basic stats and/or full histogram for your
polygons using Open Foris Geospatial Toolkit :

http://km.fao.org/OFwiki/index.php/Open_Foris_Toolkit

Installation instructions are under the "How to get it?" link.

Hope you're a Linux user :)

Best,

Anssi



On Wed, Jun 20, 2012 at 6:59 AM, Petteri Packalen
<packalen at cs.joensuu.fi> wrote:
> Derek,
>
> Look at the http://starspan.projects.atlas.ca.gov project.
>
> Petteri
>
>
> On Tue, 19 Jun 2012, jdmorgan wrote:
>
>> Hello,
>>
>> Is there a way to do something along the lines of zonal statistics with
>> gdal.Basically, I have a county shape file and a classified raster dataset.I
>> would like to count the number of raster pixels/county (FIPS).Is this
>> possible with GDAL/OGR?If so can someone point me in the right direction?
>> ?If so, awesome as I plan to do some automation with python.
>>
>> Thanks,
>>
>> Derek
>>
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From hi181904665 at msn.com  Wed Jun 20 02:53:05 2012
From: hi181904665 at msn.com (chenliang wang)
Date: Wed, 20 Jun 2012 17:53:05 +0800
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <CAPkgWhmirmYnHQqSBxgHp9RfLEYuwrq_oHHzmT7CjCGc1Q1aLA@mail.gmail.com>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
	<Pine.GSO.4.64.1206200759080.9424@cs.joensuu.fi>
	<CAPkgWhmirmYnHQqSBxgHp9RfLEYuwrq_oHHzmT7CjCGc1Q1aLA@mail.gmail.com>
Message-ID: <BLU0-SMTP15007A499DBAFFE23CD37C4F4FE0@phx.gbl>

Hi, Anssi

Cool ! Open Foris Geospatial Toolkit is a great geospatial library . Unfortunately, I can't download it from dropbox site because ofInternet censorship  of China. Can u upload it to other site or send it for me? Thanks a lot. I are a Linux and MINGW user .

Chen-Liang Wang

? 2012-6-20 17:26, anssi ??:
> If you first rasterize your shapefile to the extent of your raster,
> you can compute some basic stats and/or full histogram for your
> polygons using Open Foris Geospatial Toolkit :
>
> http://km.fao.org/OFwiki/index.php/Open_Foris_Toolkit
>
> Installation instructions are under the "How to get it?" link.
>
> Hope you're a Linux user :)
>
> Best,
>
> Anssi
>
>
>
> On Wed, Jun 20, 2012 at 6:59 AM, Petteri Packalen
> <packalen at cs.joensuu.fi> wrote:
>> Derek,
>>
>> Look at the http://starspan.projects.atlas.ca.gov project.
>>
>> Petteri
>>
>>
>> On Tue, 19 Jun 2012, jdmorgan wrote:
>>
>>> Hello,
>>>
>>> Is there a way to do something along the lines of zonal statistics with
>>> gdal.Basically, I have a county shape file and a classified raster dataset.I
>>> would like to count the number of raster pixels/county (FIPS).Is this
>>> possible with GDAL/OGR?If so can someone point me in the right direction?
>>>   If so, awesome as I plan to do some automation with python.
>>>
>>> Thanks,
>>>
>>> Derek
>>>
>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>



From s.r.kriishna at gmail.com  Wed Jun 20 02:59:21 2012
From: s.r.kriishna at gmail.com (SIVA RAMA KRISHNA)
Date: Wed, 20 Jun 2012 15:29:21 +0530
Subject: [gdal-dev] add my email
Message-ID: <CAP-zkzfwo103c_n3DoV9S_+W_f5up9UHKJ90K_i2=+1pEtQQsA@mail.gmail.com>

s.r.kriishna at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120620/951ea915/attachment.html>

From ari.jolma at gmail.com  Wed Jun 20 03:00:37 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 20 Jun 2012 13:00:37 +0300
Subject: [gdal-dev] add my email
In-Reply-To: <CAP-zkzfwo103c_n3DoV9S_+W_f5up9UHKJ90K_i2=+1pEtQQsA@mail.gmail.com>
References: <CAP-zkzfwo103c_n3DoV9S_+W_f5up9UHKJ90K_i2=+1pEtQQsA@mail.gmail.com>
Message-ID: <4FE19F45.7050702@gmail.com>

On 06/20/2012 12:59 PM, SIVA RAMA KRISHNA wrote:
> s.r.kriishna at gmail.com <mailto:s.r.kriishna at gmail.com>

http://lists.osgeo.org/listinfo/gdal-dev

>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120620/05ef280b/attachment.html>

From even.rouault at mines-paris.org  Wed Jun 20 03:56:10 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 20 Jun 2012 12:56:10 +0200
Subject: [gdal-dev] OGR 1.9.0 won't open DGN file
In-Reply-To: <4FE18F9A.5040003@geograph.co.za>
References: <4FE18F9A.5040003@geograph.co.za>
Message-ID: <1340189770.4fe1ac4a3f8ae@imp.free.fr>

Selon Zoltan Szecsei <zoltans at geograph.co.za>:

> Hi,
> I have some DGN v7 files with contours, and I wish to add up the total
> length of all the contours in the file.
>
> Using:
> zls at gs0:~/ngi10k/ngi10k_geo$ ogrinfo --version
> GDAL 1.9.0, released 2011/12/29
>
> I get:
> zls at gs0:~/ngi10k/ngi10k_geo$ ogrinfo 3117bb_lin_v7.dgn
> INFO: Open of `3117bb_lin_v7.dgn'
>        using driver `DGN' successful.
> 1: elements
> zls at gs0:~/ngi10k/ngi10k_geo$
>
> If I use parameters -so or -q or -geom=SUMMARY then I get the same
> error,

Which error ? The output of the above commands looks right. There is no error as
far as I can see...

> but if I use parameter -al, then the DGN file is opened and all
> 24000 contours are dumped to stdout.

Yes, that's expected.

> QGIS 1.7.3 on Windows does open the same DGN file.

Cool

>
> How can I investigate further as to why Linux ogr won't open the file
> using ?

AFAICS, OGR did open the file. It is just that without the -al option, or
specifying the layer name (elements), the features won't be listed in the
console. I don't see any issue in the above, but I've perhaps not understood
what you mean.

>
> TIA,
> Zoltan
>
> --
>
> ===========================================
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323     www.geograph.co.za
> ===========================================
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From etourigny.dev at gmail.com  Wed Jun 20 05:05:12 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 20 Jun 2012 09:05:12 -0300
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <BLU0-SMTP15007A499DBAFFE23CD37C4F4FE0@phx.gbl>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
	<Pine.GSO.4.64.1206200759080.9424@cs.joensuu.fi>
	<CAPkgWhmirmYnHQqSBxgHp9RfLEYuwrq_oHHzmT7CjCGc1Q1aLA@mail.gmail.com>
	<BLU0-SMTP15007A499DBAFFE23CD37C4F4FE0@phx.gbl>
Message-ID: <CA+TxYvNvhd9w+8EQcYMjqhrQW7La26hgEWHgJWuqePAGzJF5uQ@mail.gmail.com>

Distributing software via dropbox is a rather unusual practice, you
might consider hosting it elsewhere...

Etienne

On Wed, Jun 20, 2012 at 6:53 AM, chenliang wang <hi181904665 at msn.com> wrote:
> Hi, Anssi
>
> Cool ! Open Foris Geospatial Toolkit is a great geospatial library .
> Unfortunately, I can't download it from dropbox site because ofInternet
> censorship ?of China. Can u upload it to other site or send it for me?
> Thanks a lot. I are a Linux and MINGW user .
>
> Chen-Liang Wang
>
> ? 2012-6-20 17:26, anssi ??:
>
>> If you first rasterize your shapefile to the extent of your raster,
>> you can compute some basic stats and/or full histogram for your
>> polygons using Open Foris Geospatial Toolkit :
>>
>> http://km.fao.org/OFwiki/index.php/Open_Foris_Toolkit
>>
>> Installation instructions are under the "How to get it?" link.
>>
>> Hope you're a Linux user :)
>>
>> Best,
>>
>> Anssi
>>
>>
>>
>> On Wed, Jun 20, 2012 at 6:59 AM, Petteri Packalen
>> <packalen at cs.joensuu.fi> wrote:
>>>
>>> Derek,
>>>
>>> Look at the http://starspan.projects.atlas.ca.gov project.
>>>
>>> Petteri
>>>
>>>
>>> On Tue, 19 Jun 2012, jdmorgan wrote:
>>>
>>>> Hello,
>>>>
>>>> Is there a way to do something along the lines of zonal statistics with
>>>> gdal.Basically, I have a county shape file and a classified raster
>>>> dataset.I
>>>> would like to count the number of raster pixels/county (FIPS).Is this
>>>> possible with GDAL/OGR?If so can someone point me in the right
>>>> direction?
>>>> ?If so, awesome as I plan to do some automation with python.
>>>>
>>>> Thanks,
>>>>
>>>> Derek
>>>>
>>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jluis at ualg.pt  Wed Jun 20 05:49:16 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed, 20 Jun 2012 13:49:16 +0100
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <CA+TxYvNvhd9w+8EQcYMjqhrQW7La26hgEWHgJWuqePAGzJF5uQ@mail.gmail.com>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
	<Pine.GSO.4.64.1206200759080.9424@cs.joensuu.fi>
	<CAPkgWhmirmYnHQqSBxgHp9RfLEYuwrq_oHHzmT7CjCGc1Q1aLA@mail.gmail.com>
	<BLU0-SMTP15007A499DBAFFE23CD37C4F4FE0@phx.gbl>
	<CA+TxYvNvhd9w+8EQcYMjqhrQW7La26hgEWHgJWuqePAGzJF5uQ@mail.gmail.com>
Message-ID: <4FE1C6CC.8060804@ualg.pt>

One other thing called my attention. If, as we can read on the wiki page 
of OFGT

"... Most of the stand-alone programs use GDAL libraries and many of the 
scripts rely heavily on GDAL command-line utilities."

than why the OFGT's licence is GPL?

I know MIT's license allows it, but it clearly looks an abuse to me.

Joaquim

> Distributing software via dropbox is a rather unusual practice, you
> might consider hosting it elsewhere...
>
> Etienne
>
> On Wed, Jun 20, 2012 at 6:53 AM, chenliang wang<hi181904665 at msn.com>  wrote:
>> Hi, Anssi
>>
>> Cool ! Open Foris Geospatial Toolkit is a great geospatial library .
>> Unfortunately, I can't download it from dropbox site because ofInternet
>> censorship  of China. Can u upload it to other site or send it for me?
>> Thanks a lot. I are a Linux and MINGW user .
>>
>> Chen-Liang Wang
>>
>> ? 2012-6-20 17:26, anssi ??:
>>
>>> If you first rasterize your shapefile to the extent of your raster,
>>> you can compute some basic stats and/or full histogram for your
>>> polygons using Open Foris Geospatial Toolkit :
>>>
>>> http://km.fao.org/OFwiki/index.php/Open_Foris_Toolkit
>>>
>>> Installation instructions are under the "How to get it?" link.
>>>
>>> Hope you're a Linux user :)
>>>
>>> Best,
>>>
>>> Anssi
>>>
>>>
>>>
>>> On Wed, Jun 20, 2012 at 6:59 AM, Petteri Packalen
>>> <packalen at cs.joensuu.fi>  wrote:
>>>> Derek,
>>>>
>>>> Look at the http://starspan.projects.atlas.ca.gov project.
>>>>
>>>> Petteri
>>>>
>>>>
>>>> On Tue, 19 Jun 2012, jdmorgan wrote:
>>>>
>>>>> Hello,
>>>>>
>>>>> Is there a way to do something along the lines of zonal statistics with
>>>>> gdal.Basically, I have a county shape file and a classified raster
>>>>> dataset.I
>>>>> would like to count the number of raster pixels/county (FIPS).Is this
>>>>> possible with GDAL/OGR?If so can someone point me in the right
>>>>> direction?
>>>>>   If so, awesome as I plan to do some automation with python.
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Derek
>>>>>
>>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From dennis.duro at glel.carleton.ca  Wed Jun 20 05:50:29 2012
From: dennis.duro at glel.carleton.ca (dcd)
Date: Wed, 20 Jun 2012 05:50:29 -0700 (PDT)
Subject: [gdal-dev] [gdal_translate] Spatial subset HDF4Image with
 multiple subdatasets?
In-Reply-To: <201206200002.14737.even.rouault@mines-paris.org>
References: <1340142949428-4982526.post@n6.nabble.com>
	<201206200002.14737.even.rouault@mines-paris.org>
Message-ID: <1340196629022-4982668.post@n6.nabble.com>


Le mardi 19 juin 2012 23:55:49, dcd a ?crit :
> Hi,
> 
> Is it possible to spatially subset an HDF4Image that contains multiple
> subdatasets using gdal_translate (GDAL 1.9.1)? When using a spatial subset
> switch ("-a_ullr"), I get the following response:
> 
> "Input file contains subdatasets. Please, select one of them for reading."
> 
> This happens regardless of output format specified (HDF4Image, GTiff,
> ENVI,
> etc.), or whether the "-b" switch has been used as per the examples here:
> http://www.gdal.org/gdal_translate.html. A workaround is to use the "-sds"
> switch allows the process to complete, but (as expected) it processes each
> subdataset as a separate file. I suppose I can just merge these
> subdatasets
> together again, but I'd like to avoid the extra step. Is this possible?
> 
> I'm working with a MODIS imagery (MOD09GA), but I've had the issues with
> other similar HDF4 datasets.

You can use one of the subdataset names listed by gdalinfo on the HDF file
as a 
pseudo-filename usable by any GDAL utility (including gdal_translate).

For example :

$ gdalinfo MOD02HKM.A2011169.1750.005.NRT.hdf
[...]
Subdatasets:
 
SUBDATASET_1_NAME=HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB
  SUBDATASET_1_DESC=[5x4060x2708] EV_500_RefSB MODIS_SWATH_Type_L1B (16-bit 
unsigned integer)
 
SUBDATASET_2_NAME=HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB_Uncert_Indexes
  SUBDATASET_2_DESC=[5x4060x2708] EV_500_RefSB_Uncert_Indexes 
MODIS_SWATH_Type_L1B (8-bit unsigned integer)
[...]

$ gdalinfo 
HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB

Driver: HDF4Image/HDF4 Dataset
Files: MOD02HKM.A2011169.1750.005.NRT.hdf
Size is 2708, 4060
Coordinate System is `'
GCP Projection = 
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
[...]
_______________________________________________

Merci beaucoup for the quick reply!

Sorry, I didn't mention in the original post that I need to spatially subset
hundreds of images. 

While I know that I can declare subdatasets individually, it will still mean
that I need to combine the individual subdatasets after spatial subsetting.
Also, declaring individual subdatasets by name is a bit of pain, although
doable if need be.

It would be nice if the "-b" switch in gdal_translate could be used for
selecting specific subdatasets within an HDF4Image, either by their full
name (SUBDATASET_1_NAME=....), description (SUBDATASET_1_DESC=...), or
preferably by index ("-b 1" would be equivalent to "SUBDATASET_1", "-b 2"
would be equivalent to "SUBDATASET_2", etc). When reading the gdal_translate
documentation for the "-b" switch, it appears that this should be possible,
although the example is with a GTiff image. If it is possible with HDF
files, I'd like to know how. If not, I will put in a request using the
appropriate channels.

I could always use the MODIS Reprojection Tool to script this task, but I'd
like to have done this exclusively using GDAL.

Anyway, thanks for the tip!



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-Spatial-subset-HDF4Image-with-multiple-subdatasets-tp4982526p4982668.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From etourigny.dev at gmail.com  Wed Jun 20 05:55:54 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 20 Jun 2012 09:55:54 -0300
Subject: [gdal-dev] [gdal_translate] Spatial subset HDF4Image with
 multiple subdatasets?
In-Reply-To: <1340196629022-4982668.post@n6.nabble.com>
References: <1340142949428-4982526.post@n6.nabble.com>
	<201206200002.14737.even.rouault@mines-paris.org>
	<1340196629022-4982668.post@n6.nabble.com>
Message-ID: <CA+TxYvN29b+TEk5aB7vk_5nrh_rnqn24_v3yiyxDuF24sQ2d3g@mail.gmail.com>

You could combine them as a multi-band gtiff file for example

On Wed, Jun 20, 2012 at 9:50 AM, dcd <dennis.duro at glel.carleton.ca> wrote:
>
> Le mardi 19 juin 2012 23:55:49, dcd a ?crit :
>> Hi,
>>
>> Is it possible to spatially subset an HDF4Image that contains multiple
>> subdatasets using gdal_translate (GDAL 1.9.1)? When using a spatial subset
>> switch ("-a_ullr"), I get the following response:
>>
>> "Input file contains subdatasets. Please, select one of them for reading."
>>
>> This happens regardless of output format specified (HDF4Image, GTiff,
>> ENVI,
>> etc.), or whether the "-b" switch has been used as per the examples here:
>> http://www.gdal.org/gdal_translate.html. A workaround is to use the "-sds"
>> switch allows the process to complete, but (as expected) it processes each
>> subdataset as a separate file. I suppose I can just merge these
>> subdatasets
>> together again, but I'd like to avoid the extra step. Is this possible?
>>
>> I'm working with a MODIS imagery (MOD09GA), but I've had the issues with
>> other similar HDF4 datasets.
>
> You can use one of the subdataset names listed by gdalinfo on the HDF file
> as a
> pseudo-filename usable by any GDAL utility (including gdal_translate).
>
> For example :
>
> $ gdalinfo MOD02HKM.A2011169.1750.005.NRT.hdf
> [...]
> Subdatasets:
>
> SUBDATASET_1_NAME=HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB
> ?SUBDATASET_1_DESC=[5x4060x2708] EV_500_RefSB MODIS_SWATH_Type_L1B (16-bit
> unsigned integer)
>
> SUBDATASET_2_NAME=HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB_Uncert_Indexes
> ?SUBDATASET_2_DESC=[5x4060x2708] EV_500_RefSB_Uncert_Indexes
> MODIS_SWATH_Type_L1B (8-bit unsigned integer)
> [...]
>
> $ gdalinfo
> HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB
>
> Driver: HDF4Image/HDF4 Dataset
> Files: MOD02HKM.A2011169.1750.005.NRT.hdf
> Size is 2708, 4060
> Coordinate System is `'
> GCP Projection =
> GEOGCS["WGS 84",
> ? ?DATUM["WGS_1984",
> ? ? ? ?SPHEROID["WGS 84",6378137,298.257223563,
> ? ? ? ? ? ?AUTHORITY["EPSG","7030"]],
> ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ?AUTHORITY["EPSG","6326"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ?AUTHORITY["EPSG","9108"]],
> ? ?AUTHORITY["EPSG","4326"]]
> [...]
> _______________________________________________
>
> Merci beaucoup for the quick reply!
>
> Sorry, I didn't mention in the original post that I need to spatially subset
> hundreds of images.
>
> While I know that I can declare subdatasets individually, it will still mean
> that I need to combine the individual subdatasets after spatial subsetting.
> Also, declaring individual subdatasets by name is a bit of pain, although
> doable if need be.
>
> It would be nice if the "-b" switch in gdal_translate could be used for
> selecting specific subdatasets within an HDF4Image, either by their full
> name (SUBDATASET_1_NAME=....), description (SUBDATASET_1_DESC=...), or
> preferably by index ("-b 1" would be equivalent to "SUBDATASET_1", "-b 2"
> would be equivalent to "SUBDATASET_2", etc). When reading the gdal_translate
> documentation for the "-b" switch, it appears that this should be possible,
> although the example is with a GTiff image. If it is possible with HDF
> files, I'd like to know how. If not, I will put in a request using the
> appropriate channels.
>
> I could always use the MODIS Reprojection Tool to script this task, but I'd
> like to have done this exclusively using GDAL.
>
> Anyway, thanks for the tip!
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-Spatial-subset-HDF4Image-with-multiple-subdatasets-tp4982526p4982668.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From anssisamuli at gmail.com  Wed Jun 20 06:07:10 2012
From: anssisamuli at gmail.com (anssi)
Date: Wed, 20 Jun 2012 15:07:10 +0200
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <4FE1C6CC.8060804@ualg.pt>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
	<Pine.GSO.4.64.1206200759080.9424@cs.joensuu.fi>
	<CAPkgWhmirmYnHQqSBxgHp9RfLEYuwrq_oHHzmT7CjCGc1Q1aLA@mail.gmail.com>
	<BLU0-SMTP15007A499DBAFFE23CD37C4F4FE0@phx.gbl>
	<CA+TxYvNvhd9w+8EQcYMjqhrQW7La26hgEWHgJWuqePAGzJF5uQ@mail.gmail.com>
	<4FE1C6CC.8060804@ualg.pt>
Message-ID: <CAPkgWh=+YKeO9d4Eywk_WvzSjMFpVrro5vW43geTwYF=+gm8vA@mail.gmail.com>

Dear Joaquim,

thanks for pointing that out.

There?s absolutely no intention to abuse any of the great work of the
gdal/ogr developers. Rather the opposite.

The license is being discussed as we speak and we're considering
various options. What would you suggest? Should it be MIT or would ,
for example, Modified BSD License do?

Best,

Anssi



On Wed, Jun 20, 2012 at 2:49 PM, Joaquim Luis <jluis at ualg.pt> wrote:
> One other thing called my attention. If, as we can read on the wiki page of
> OFGT
>
> "... Most of the stand-alone programs use GDAL libraries and many of the
> scripts rely heavily on GDAL command-line utilities."
>
> than why the OFGT's licence is GPL?
>
> I know MIT's license allows it, but it clearly looks an abuse to me.
>
> Joaquim
>
>
>> Distributing software via dropbox is a rather unusual practice, you
>> might consider hosting it elsewhere...
>>
>> Etienne
>>
>> On Wed, Jun 20, 2012 at 6:53 AM, chenliang wang<hi181904665 at msn.com>
>> ?wrote:
>>>
>>> Hi, Anssi
>>>
>>> Cool ! Open Foris Geospatial Toolkit is a great geospatial library .
>>> Unfortunately, I can't download it from dropbox site because ofInternet
>>> censorship ?of China. Can u upload it to other site or send it for me?
>>> Thanks a lot. I are a Linux and MINGW user .
>>>
>>> Chen-Liang Wang
>>>
>>> ? 2012-6-20 17:26, anssi ??:
>>>
>>>> If you first rasterize your shapefile to the extent of your raster,
>>>> you can compute some basic stats and/or full histogram for your
>>>> polygons using Open Foris Geospatial Toolkit :
>>>>
>>>> http://km.fao.org/OFwiki/index.php/Open_Foris_Toolkit
>>>>
>>>> Installation instructions are under the "How to get it?" link.
>>>>
>>>> Hope you're a Linux user :)
>>>>
>>>> Best,
>>>>
>>>> Anssi
>>>>
>>>>
>>>>
>>>> On Wed, Jun 20, 2012 at 6:59 AM, Petteri Packalen
>>>> <packalen at cs.joensuu.fi> ?wrote:
>>>>>
>>>>> Derek,
>>>>>
>>>>> Look at the http://starspan.projects.atlas.ca.gov project.
>>>>>
>>>>> Petteri
>>>>>
>>>>>
>>>>> On Tue, 19 Jun 2012, jdmorgan wrote:
>>>>>
>>>>>> Hello,
>>>>>>
>>>>>> Is there a way to do something along the lines of zonal statistics
>>>>>> with
>>>>>> gdal.Basically, I have a county shape file and a classified raster
>>>>>> dataset.I
>>>>>> would like to count the number of raster pixels/county (FIPS).Is this
>>>>>> possible with GDAL/OGR?If so can someone point me in the right
>>>>>> direction?
>>>>>> ?If so, awesome as I plan to do some automation with python.
>>>>>>
>>>>>> Thanks,
>>>>>>
>>>>>> Derek
>>>>>>
>>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From dennis.duro at glel.carleton.ca  Wed Jun 20 06:16:25 2012
From: dennis.duro at glel.carleton.ca (dcd)
Date: Wed, 20 Jun 2012 06:16:25 -0700 (PDT)
Subject: [gdal-dev] [gdal_translate] Spatial subset HDF4Image with
 multiple subdatasets?
In-Reply-To: <CA+TxYvN29b+TEk5aB7vk_5nrh_rnqn24_v3yiyxDuF24sQ2d3g@mail.gmail.com>
References: <1340142949428-4982526.post@n6.nabble.com>
	<201206200002.14737.even.rouault@mines-paris.org>
	<1340196629022-4982668.post@n6.nabble.com>
	<CA+TxYvN29b+TEk5aB7vk_5nrh_rnqn24_v3yiyxDuF24sQ2d3g@mail.gmail.com>
Message-ID: <1340198185309-4982678.post@n6.nabble.com>


You could combine them as a multi-band gtiff file for example

Yes, but I could just as easily combine the individual subdatasets after
using "-sds" switch or Even's method into a single HDF4Image as well. I'd
rather just be able to do that all in one line using the "-b" switch in
gdal_translate without having to change formats (unless I need/want to).

Perhaps the MRT is actually doing all that work behind the scenes and I just
don't know it: 1) extracting all or specific subdatasets, 2) spatially
subsetting, and 3) merging results back into a HDF, GTiff, or whatever. In
any case, it would be nice if gdal_translate would be a bit more seamless
with handling multiple subdatasets in HDF files. Again, perhaps it is
possible, but perhaps not.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-Spatial-subset-HDF4Image-with-multiple-subdatasets-tp4982526p4982678.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From schut at sarvision.nl  Wed Jun 20 06:13:17 2012
From: schut at sarvision.nl (Vincent Schut)
Date: Wed, 20 Jun 2012 15:13:17 +0200
Subject: [gdal-dev] [gdal_translate] Spatial subset HDF4Image with
 multiple subdatasets?
In-Reply-To: <CA+TxYvN29b+TEk5aB7vk_5nrh_rnqn24_v3yiyxDuF24sQ2d3g@mail.gmail.com>
References: <1340142949428-4982526.post@n6.nabble.com>
	<201206200002.14737.even.rouault@mines-paris.org>
	<1340196629022-4982668.post@n6.nabble.com>
	<CA+TxYvN29b+TEk5aB7vk_5nrh_rnqn24_v3yiyxDuF24sQ2d3g@mail.gmail.com>
Message-ID: <4FE1CC6D.5060507@sarvision.nl>

On 06/20/2012 02:55 PM, Etienne Tourigny wrote:
> You could combine them as a multi-band gtiff file for example
No, in this case (MOD09GA data) you cannot, because the subdatasets have 
different resolutions / raster sizes, and datatypes. Imho there is no 
other way than to subset each subdataset separately. Things might seem a 
bit more logical when you consider the main hdf file as a container, 
like a directory or an archive. You also cannot subset a directory, but 
you'll need to subset each raster file in it by itself.

Best,
Vincent.

>
> On Wed, Jun 20, 2012 at 9:50 AM, dcd <dennis.duro at glel.carleton.ca> wrote:
>> Le mardi 19 juin 2012 23:55:49, dcd a ?crit :
>>> Hi,
>>>
>>> Is it possible to spatially subset an HDF4Image that contains multiple
>>> subdatasets using gdal_translate (GDAL 1.9.1)? When using a spatial subset
>>> switch ("-a_ullr"), I get the following response:
>>>
>>> "Input file contains subdatasets. Please, select one of them for reading."
>>>
>>> This happens regardless of output format specified (HDF4Image, GTiff,
>>> ENVI,
>>> etc.), or whether the "-b" switch has been used as per the examples here:
>>> http://www.gdal.org/gdal_translate.html. A workaround is to use the "-sds"
>>> switch allows the process to complete, but (as expected) it processes each
>>> subdataset as a separate file. I suppose I can just merge these
>>> subdatasets
>>> together again, but I'd like to avoid the extra step. Is this possible?
>>>
>>> I'm working with a MODIS imagery (MOD09GA), but I've had the issues with
>>> other similar HDF4 datasets.
>> You can use one of the subdataset names listed by gdalinfo on the HDF file
>> as a
>> pseudo-filename usable by any GDAL utility (including gdal_translate).
>>
>> For example :
>>
>> $ gdalinfo MOD02HKM.A2011169.1750.005.NRT.hdf
>> [...]
>> Subdatasets:
>>
>> SUBDATASET_1_NAME=HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB
>>   SUBDATASET_1_DESC=[5x4060x2708] EV_500_RefSB MODIS_SWATH_Type_L1B (16-bit
>> unsigned integer)
>>
>> SUBDATASET_2_NAME=HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB_Uncert_Indexes
>>   SUBDATASET_2_DESC=[5x4060x2708] EV_500_RefSB_Uncert_Indexes
>> MODIS_SWATH_Type_L1B (8-bit unsigned integer)
>> [...]
>>
>> $ gdalinfo
>> HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB
>>
>> Driver: HDF4Image/HDF4 Dataset
>> Files: MOD02HKM.A2011169.1750.005.NRT.hdf
>> Size is 2708, 4060
>> Coordinate System is `'
>> GCP Projection =
>> GEOGCS["WGS 84",
>>     DATUM["WGS_1984",
>>         SPHEROID["WGS 84",6378137,298.257223563,
>>             AUTHORITY["EPSG","7030"]],
>>         TOWGS84[0,0,0,0,0,0,0],
>>         AUTHORITY["EPSG","6326"]],
>>     PRIMEM["Greenwich",0,
>>         AUTHORITY["EPSG","8901"]],
>>     UNIT["degree",0.0174532925199433,
>>         AUTHORITY["EPSG","9108"]],
>>     AUTHORITY["EPSG","4326"]]
>> [...]
>> _______________________________________________
>>
>> Merci beaucoup for the quick reply!
>>
>> Sorry, I didn't mention in the original post that I need to spatially subset
>> hundreds of images.
>>
>> While I know that I can declare subdatasets individually, it will still mean
>> that I need to combine the individual subdatasets after spatial subsetting.
>> Also, declaring individual subdatasets by name is a bit of pain, although
>> doable if need be.
>>
>> It would be nice if the "-b" switch in gdal_translate could be used for
>> selecting specific subdatasets within an HDF4Image, either by their full
>> name (SUBDATASET_1_NAME=....), description (SUBDATASET_1_DESC=...), or
>> preferably by index ("-b 1" would be equivalent to "SUBDATASET_1", "-b 2"
>> would be equivalent to "SUBDATASET_2", etc). When reading the gdal_translate
>> documentation for the "-b" switch, it appears that this should be possible,
>> although the example is with a GTiff image. If it is possible with HDF
>> files, I'd like to know how. If not, I will put in a request using the
>> appropriate channels.
>>
>> I could always use the MODIS Reprojection Tool to script this task, but I'd
>> like to have done this exclusively using GDAL.
>>
>> Anyway, thanks for the tip!
>>
>>
>>
>> --
>> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-Spatial-subset-HDF4Image-with-multiple-subdatasets-tp4982526p4982668.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From jluis at ualg.pt  Wed Jun 20 06:20:33 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed, 20 Jun 2012 14:20:33 +0100
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <CAPkgWh=+YKeO9d4Eywk_WvzSjMFpVrro5vW43geTwYF=+gm8vA@mail.gmail.com>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
	<Pine.GSO.4.64.1206200759080.9424@cs.joensuu.fi>
	<CAPkgWhmirmYnHQqSBxgHp9RfLEYuwrq_oHHzmT7CjCGc1Q1aLA@mail.gmail.com>
	<BLU0-SMTP15007A499DBAFFE23CD37C4F4FE0@phx.gbl>
	<CA+TxYvNvhd9w+8EQcYMjqhrQW7La26hgEWHgJWuqePAGzJF5uQ@mail.gmail.com>
	<4FE1C6CC.8060804@ualg.pt>
	<CAPkgWh=+YKeO9d4Eywk_WvzSjMFpVrro5vW43geTwYF=+gm8vA@mail.gmail.com>
Message-ID: <4FE1CE21.6050307@ualg.pt>

Anssi,

OK, may I overreact a bit. It's just that I don't like GPL much, 
specially when it used on codes that rely on non GPLed codes. But this 
thing of licensing issue is delicate (and boring), so you'll excuse me 
if I don't give you one opinion on what you should. The most I can say 
is that when I got a clearer grasp of GPL, I change the license of my 
code to LGPL.
On a second read I see that you also depend on the gsl library, so 
perhaps you have to make it GPL. I don't know.

Joaquim

> Dear Joaquim,
>
> thanks for pointing that out.
>
> There?s absolutely no intention to abuse any of the great work of the
> gdal/ogr developers. Rather the opposite.
>
> The license is being discussed as we speak and we're considering
> various options. What would you suggest? Should it be MIT or would ,
> for example, Modified BSD License do?
>
> Best,
>
> Anssi
>
>
>
> On Wed, Jun 20, 2012 at 2:49 PM, Joaquim Luis<jluis at ualg.pt>  wrote:
>> One other thing called my attention. If, as we can read on the wiki page of
>> OFGT
>>
>> "... Most of the stand-alone programs use GDAL libraries and many of the
>> scripts rely heavily on GDAL command-line utilities."
>>
>> than why the OFGT's licence is GPL?
>>
>> I know MIT's license allows it, but it clearly looks an abuse to me.
>>
>> Joaquim
>>
>>
>>> Distributing software via dropbox is a rather unusual practice, you
>>> might consider hosting it elsewhere...
>>>
>>> Etienne
>>>
>>> On Wed, Jun 20, 2012 at 6:53 AM, chenliang wang<hi181904665 at msn.com>
>>>   wrote:
>>>> Hi, Anssi
>>>>
>>>> Cool ! Open Foris Geospatial Toolkit is a great geospatial library .
>>>> Unfortunately, I can't download it from dropbox site because ofInternet
>>>> censorship  of China. Can u upload it to other site or send it for me?
>>>> Thanks a lot. I are a Linux and MINGW user .
>>>>
>>>> Chen-Liang Wang
>>>>
>>>> ? 2012-6-20 17:26, anssi ??:
>>>>
>>>>> If you first rasterize your shapefile to the extent of your raster,
>>>>> you can compute some basic stats and/or full histogram for your
>>>>> polygons using Open Foris Geospatial Toolkit :
>>>>>
>>>>> http://km.fao.org/OFwiki/index.php/Open_Foris_Toolkit
>>>>>
>>>>> Installation instructions are under the "How to get it?" link.
>>>>>
>>>>> Hope you're a Linux user :)
>>>>>
>>>>> Best,
>>>>>
>>>>> Anssi
>>>>>
>>>>>
>>>>>
>>>>> On Wed, Jun 20, 2012 at 6:59 AM, Petteri Packalen
>>>>> <packalen at cs.joensuu.fi>    wrote:
>>>>>> Derek,
>>>>>>
>>>>>> Look at the http://starspan.projects.atlas.ca.gov project.
>>>>>>
>>>>>> Petteri
>>>>>>
>>>>>>
>>>>>> On Tue, 19 Jun 2012, jdmorgan wrote:
>>>>>>
>>>>>>> Hello,
>>>>>>>
>>>>>>> Is there a way to do something along the lines of zonal statistics
>>>>>>> with
>>>>>>> gdal.Basically, I have a county shape file and a classified raster
>>>>>>> dataset.I
>>>>>>> would like to count the number of raster pixels/county (FIPS).Is this
>>>>>>> possible with GDAL/OGR?If so can someone point me in the right
>>>>>>> direction?
>>>>>>>   If so, awesome as I plan to do some automation with python.
>>>>>>>
>>>>>>> Thanks,
>>>>>>>
>>>>>>> Derek
>>>>>>>
>>>>>>>
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev at lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From dennis.duro at glel.carleton.ca  Wed Jun 20 06:25:11 2012
From: dennis.duro at glel.carleton.ca (dcd)
Date: Wed, 20 Jun 2012 06:25:11 -0700 (PDT)
Subject: [gdal-dev] [gdal_translate] Spatial subset HDF4Image with
 multiple subdatasets?
In-Reply-To: <4FE1CC6D.5060507@sarvision.nl>
References: <1340142949428-4982526.post@n6.nabble.com>
	<201206200002.14737.even.rouault@mines-paris.org>
	<1340196629022-4982668.post@n6.nabble.com>
	<CA+TxYvN29b+TEk5aB7vk_5nrh_rnqn24_v3yiyxDuF24sQ2d3g@mail.gmail.com>
	<4FE1CC6D.5060507@sarvision.nl>
Message-ID: <1340198711723-4982681.post@n6.nabble.com>


On 06/20/2012 02:55 PM, Etienne Tourigny wrote:
> You could combine them as a multi-band gtiff file for example
No, in this case (MOD09GA data) you cannot, because the subdatasets have 
different resolutions / raster sizes, and datatypes. Imho there is no 
other way than to subset each subdataset separately. Things might seem a 
bit more logical when you consider the main hdf file as a container, 
like a directory or an archive. You also cannot subset a directory, but 
you'll need to subset each raster file in it by itself.

Best,
Vincent.

Just FYI, I've had the same issue with HDF4 files that contain subdatasets
that are all the same spatial resolution, extent, and data type (multi-band
Landsat).



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-Spatial-subset-HDF4Image-with-multiple-subdatasets-tp4982526p4982681.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jgomezdans at gmail.com  Wed Jun 20 06:26:21 2012
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Wed, 20 Jun 2012 14:26:21 +0100
Subject: [gdal-dev] [gdal_translate] Spatial subset HDF4Image with
 multiple subdatasets?
In-Reply-To: <4FE1CC6D.5060507@sarvision.nl>
References: <1340142949428-4982526.post@n6.nabble.com>
	<201206200002.14737.even.rouault@mines-paris.org>
	<1340196629022-4982668.post@n6.nabble.com>
	<CA+TxYvN29b+TEk5aB7vk_5nrh_rnqn24_v3yiyxDuF24sQ2d3g@mail.gmail.com>
	<4FE1CC6D.5060507@sarvision.nl>
Message-ID: <CAMWde5o7xLabCfs4vTB9nj7s5CPYmh9Znn3KWAoZ7Cxz08JqCA@mail.gmail.com>

Hi,



On 20 June 2012 14:13, Vincent Schut <schut at sarvision.nl> wrote:
> On 06/20/2012 02:55 PM, Etienne Tourigny wrote:
>>
>> You could combine them as a multi-band gtiff file for example
>
> No, in this case (MOD09GA data) you cannot, because the subdatasets have
> different resolutions / raster sizes, and datatypes. Imho there is no other

Another interesting option is to use virtual datasets. You create an
XML file that points to the individual HDF datasets, do the subsetting
(maybe reprojection) etc. This file is read transparently by GDAL
(referring to the original HDF files. Mind you, there's a penalty in
accessing the compressed datasets), or can be converted to another
format if you wish. Different resolutions (ie 0.5/1km data) are
readily treated by the VRT format specification.

J

From giuseppe.amatulli at gmail.com  Wed Jun 20 06:39:27 2012
From: giuseppe.amatulli at gmail.com (Giuseppe Amatulli)
Date: Wed, 20 Jun 2012 08:39:27 -0500
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <4FE1CE21.6050307@ualg.pt>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
	<Pine.GSO.4.64.1206200759080.9424@cs.joensuu.fi>
	<CAPkgWhmirmYnHQqSBxgHp9RfLEYuwrq_oHHzmT7CjCGc1Q1aLA@mail.gmail.com>
	<BLU0-SMTP15007A499DBAFFE23CD37C4F4FE0@phx.gbl>
	<CA+TxYvNvhd9w+8EQcYMjqhrQW7La26hgEWHgJWuqePAGzJF5uQ@mail.gmail.com>
	<4FE1C6CC.8060804@ualg.pt>
	<CAPkgWh=+YKeO9d4Eywk_WvzSjMFpVrro5vW43geTwYF=+gm8vA@mail.gmail.com>
	<4FE1CE21.6050307@ualg.pt>
Message-ID: <CAKoiDHLjgX5zOUic30rJwCkC8aTpgQOuX99MBzD3ppqeUWkKuA@mail.gmail.com>

Ciao,
keeping on the issues of the Subject:"zonal statistics with gdal", one month
ego i put on the web page
http://www.spatial-ecology.net/doku.php?id=wiki:geo_tools
a python script that calculate zonal statistics between two raster.
Is not so fast as the Anssi's OpenForis but i could coded by my self
with more options.
Fill free to modify and improve.
Best Regards
-- 
Giuseppe Amatulli
Web: www.spatial-ecology.net




On 20 June 2012 08:20, Joaquim Luis <jluis at ualg.pt> wrote:
> Anssi,
>
> OK, may I overreact a bit. It's just that I don't like GPL much, specially
> when it used on codes that rely on non GPLed codes. But this thing of
> licensing issue is delicate (and boring), so you'll excuse me if I don't
> give you one opinion on what you should. The most I can say is that when I
> got a clearer grasp of GPL, I change the license of my code to LGPL.
> On a second read I see that you also depend on the gsl library, so perhaps
> you have to make it GPL. I don't know.
>
> Joaquim
>
>
>> Dear Joaquim,
>>
>> thanks for pointing that out.
>>
>> There?s absolutely no intention to abuse any of the great work of the
>> gdal/ogr developers. Rather the opposite.
>>
>> The license is being discussed as we speak and we're considering
>> various options. What would you suggest? Should it be MIT or would ,
>> for example, Modified BSD License do?
>>
>> Best,
>>
>> Anssi
>>
>>
>>
>> On Wed, Jun 20, 2012 at 2:49 PM, Joaquim Luis<jluis at ualg.pt> ?wrote:
>>>
>>> One other thing called my attention. If, as we can read on the wiki page
>>> of
>>> OFGT
>>>
>>> "... Most of the stand-alone programs use GDAL libraries and many of the
>>> scripts rely heavily on GDAL command-line utilities."
>>>
>>> than why the OFGT's licence is GPL?
>>>
>>> I know MIT's license allows it, but it clearly looks an abuse to me.
>>>
>>> Joaquim
>>>
>>>
>>>> Distributing software via dropbox is a rather unusual practice, you
>>>> might consider hosting it elsewhere...
>>>>
>>>> Etienne
>>>>
>>>> On Wed, Jun 20, 2012 at 6:53 AM, chenliang wang<hi181904665 at msn.com>
>>>> ?wrote:
>>>>>
>>>>> Hi, Anssi
>>>>>
>>>>> Cool ! Open Foris Geospatial Toolkit is a great geospatial library .
>>>>> Unfortunately, I can't download it from dropbox site because ofInternet
>>>>> censorship ?of China. Can u upload it to other site or send it for me?
>>>>> Thanks a lot. I are a Linux and MINGW user .
>>>>>
>>>>> Chen-Liang Wang
>>>>>
>>>>> ? 2012-6-20 17:26, anssi ??:
>>>>>
>>>>>> If you first rasterize your shapefile to the extent of your raster,
>>>>>> you can compute some basic stats and/or full histogram for your
>>>>>> polygons using Open Foris Geospatial Toolkit :
>>>>>>
>>>>>> http://km.fao.org/OFwiki/index.php/Open_Foris_Toolkit
>>>>>>
>>>>>> Installation instructions are under the "How to get it?" link.
>>>>>>
>>>>>> Hope you're a Linux user :)
>>>>>>
>>>>>> Best,
>>>>>>
>>>>>> Anssi
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Wed, Jun 20, 2012 at 6:59 AM, Petteri Packalen
>>>>>> <packalen at cs.joensuu.fi> ? ?wrote:
>>>>>>>
>>>>>>> Derek,
>>>>>>>
>>>>>>> Look at the http://starspan.projects.atlas.ca.gov project.
>>>>>>>
>>>>>>> Petteri
>>>>>>>
>>>>>>>
>>>>>>> On Tue, 19 Jun 2012, jdmorgan wrote:
>>>>>>>
>>>>>>>> Hello,
>>>>>>>>
>>>>>>>> Is there a way to do something along the lines of zonal statistics
>>>>>>>> with
>>>>>>>> gdal.Basically, I have a county shape file and a classified raster
>>>>>>>> dataset.I
>>>>>>>> would like to count the number of raster pixels/county (FIPS).Is
>>>>>>>> this
>>>>>>>> possible with GDAL/OGR?If so can someone point me in the right
>>>>>>>> direction?
>>>>>>>> ?If so, awesome as I plan to do some automation with python.
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>>
>>>>>>>> Derek
>>>>>>>>
>>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> gdal-dev mailing list
>>>>>>> gdal-dev at lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev at lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Giuseppe Amatulli
Web: www.spatial-ecology.net

From anssisamuli at gmail.com  Wed Jun 20 06:41:04 2012
From: anssisamuli at gmail.com (anssi)
Date: Wed, 20 Jun 2012 15:41:04 +0200
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <4FE1CE21.6050307@ualg.pt>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
	<Pine.GSO.4.64.1206200759080.9424@cs.joensuu.fi>
	<CAPkgWhmirmYnHQqSBxgHp9RfLEYuwrq_oHHzmT7CjCGc1Q1aLA@mail.gmail.com>
	<BLU0-SMTP15007A499DBAFFE23CD37C4F4FE0@phx.gbl>
	<CA+TxYvNvhd9w+8EQcYMjqhrQW7La26hgEWHgJWuqePAGzJF5uQ@mail.gmail.com>
	<4FE1C6CC.8060804@ualg.pt>
	<CAPkgWh=+YKeO9d4Eywk_WvzSjMFpVrro5vW43geTwYF=+gm8vA@mail.gmail.com>
	<4FE1CE21.6050307@ualg.pt>
Message-ID: <CAPkgWh=3snoQB2pxHmgVz8pPS1zmjv9ZxPPaBQgFaVQgQDxRMg@mail.gmail.com>

No problem at all,

you had a good point.

Anyone here who knows these issues thoroughly and could provide some
recommendations?

Cheers,

Anssi


On Wed, Jun 20, 2012 at 3:20 PM, Joaquim Luis <jluis at ualg.pt> wrote:
> Anssi,
>
> OK, may I overreact a bit. It's just that I don't like GPL much, specially
> when it used on codes that rely on non GPLed codes. But this thing of
> licensing issue is delicate (and boring), so you'll excuse me if I don't
> give you one opinion on what you should. The most I can say is that when I
> got a clearer grasp of GPL, I change the license of my code to LGPL.
> On a second read I see that you also depend on the gsl library, so perhaps
> you have to make it GPL. I don't know.
>
> Joaquim
>
>
>> Dear Joaquim,
>>
>> thanks for pointing that out.
>>
>> There?s absolutely no intention to abuse any of the great work of the
>> gdal/ogr developers. Rather the opposite.
>>
>> The license is being discussed as we speak and we're considering
>> various options. What would you suggest? Should it be MIT or would ,
>> for example, Modified BSD License do?
>>
>> Best,
>>
>> Anssi
>>
>>
>>
>> On Wed, Jun 20, 2012 at 2:49 PM, Joaquim Luis<jluis at ualg.pt> ?wrote:
>>>
>>> One other thing called my attention. If, as we can read on the wiki page
>>> of
>>> OFGT
>>>
>>> "... Most of the stand-alone programs use GDAL libraries and many of the
>>> scripts rely heavily on GDAL command-line utilities."
>>>
>>> than why the OFGT's licence is GPL?
>>>
>>> I know MIT's license allows it, but it clearly looks an abuse to me.
>>>
>>> Joaquim
>>>
>>>
>>>> Distributing software via dropbox is a rather unusual practice, you
>>>> might consider hosting it elsewhere...
>>>>
>>>> Etienne
>>>>
>>>> On Wed, Jun 20, 2012 at 6:53 AM, chenliang wang<hi181904665 at msn.com>
>>>> ?wrote:
>>>>>
>>>>> Hi, Anssi
>>>>>
>>>>> Cool ! Open Foris Geospatial Toolkit is a great geospatial library .
>>>>> Unfortunately, I can't download it from dropbox site because ofInternet
>>>>> censorship ?of China. Can u upload it to other site or send it for me?
>>>>> Thanks a lot. I are a Linux and MINGW user .
>>>>>
>>>>> Chen-Liang Wang
>>>>>
>>>>> ? 2012-6-20 17:26, anssi ??:
>>>>>
>>>>>> If you first rasterize your shapefile to the extent of your raster,
>>>>>> you can compute some basic stats and/or full histogram for your
>>>>>> polygons using Open Foris Geospatial Toolkit :
>>>>>>
>>>>>> http://km.fao.org/OFwiki/index.php/Open_Foris_Toolkit
>>>>>>
>>>>>> Installation instructions are under the "How to get it?" link.
>>>>>>
>>>>>> Hope you're a Linux user :)
>>>>>>
>>>>>> Best,
>>>>>>
>>>>>> Anssi
>>>>>>
>>>>>>
>>>>>>
>>>>>> On Wed, Jun 20, 2012 at 6:59 AM, Petteri Packalen
>>>>>> <packalen at cs.joensuu.fi> ? ?wrote:
>>>>>>>
>>>>>>> Derek,
>>>>>>>
>>>>>>> Look at the http://starspan.projects.atlas.ca.gov project.
>>>>>>>
>>>>>>> Petteri
>>>>>>>
>>>>>>>
>>>>>>> On Tue, 19 Jun 2012, jdmorgan wrote:
>>>>>>>
>>>>>>>> Hello,
>>>>>>>>
>>>>>>>> Is there a way to do something along the lines of zonal statistics
>>>>>>>> with
>>>>>>>> gdal.Basically, I have a county shape file and a classified raster
>>>>>>>> dataset.I
>>>>>>>> would like to count the number of raster pixels/county (FIPS).Is
>>>>>>>> this
>>>>>>>> possible with GDAL/OGR?If so can someone point me in the right
>>>>>>>> direction?
>>>>>>>> ?If so, awesome as I plan to do some automation with python.
>>>>>>>>
>>>>>>>> Thanks,
>>>>>>>>
>>>>>>>> Derek
>>>>>>>>
>>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> gdal-dev mailing list
>>>>>>> gdal-dev at lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev at lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>

From jgomezdans at gmail.com  Wed Jun 20 06:58:12 2012
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Wed, 20 Jun 2012 14:58:12 +0100
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <CAMWde5p4Vzq5MgtdXgRn-doW9x6N0_DMGvKHHOCQA2QQrcKNoQ@mail.gmail.com>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
	<CAMWde5p4Vzq5MgtdXgRn-doW9x6N0_DMGvKHHOCQA2QQrcKNoQ@mail.gmail.com>
Message-ID: <CAMWde5pMyEmX6VH+fziHCwnybkwCc5jWJ6wHDgBxkzFUCaC-GQ@mail.gmail.com>

Hi,

<forgot to send it to the list>

On 19 June 2012 17:37, jdmorgan <jdmorgan at unca.edu> wrote:
> Is there a way to do something along the lines of zonal statistics with
> gdal.? Basically, I have a county shape file and a classified raster
> dataset.? I would like to count the number of raster pixels/county (FIPS).
> Is this possible with GDAL/OGR?? If so can someone point me in the right
> direction?? If so, awesome as I plan to do some automation with python.

Is this of any use?
<http://sites.google.com/site/spatialpython/zonal-statistics>

Uses python and it's GDAL bindings, but you get the idea.

J

From even.rouault at mines-paris.org  Wed Jun 20 07:00:14 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 20 Jun 2012 16:00:14 +0200
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <CAPkgWh=+YKeO9d4Eywk_WvzSjMFpVrro5vW43geTwYF=+gm8vA@mail.gmail.com>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
	<Pine.GSO.4.64.1206200759080.9424@cs.joensuu.fi>
	<CAPkgWhmirmYnHQqSBxgHp9RfLEYuwrq_oHHzmT7CjCGc1Q1aLA@mail.gmail.com>
	<BLU0-SMTP15007A499DBAFFE23CD37C4F4FE0@phx.gbl>
	<CA+TxYvNvhd9w+8EQcYMjqhrQW7La26hgEWHgJWuqePAGzJF5uQ@mail.gmail.com>
	<4FE1C6CC.8060804@ualg.pt>
	<CAPkgWh=+YKeO9d4Eywk_WvzSjMFpVrro5vW43geTwYF=+gm8vA@mail.gmail.com>
Message-ID: <1340200814.4fe1d76e4333a@imp.free.fr>

Selon anssi <anssisamuli at gmail.com>:

> Dear Joaquim,
>
> thanks for pointing that out.
>
> There??s absolutely no intention to abuse any of the great work of the
> gdal/ogr developers. Rather the opposite.
>
> The license is being discussed as we speak and we're considering
> various options. What would you suggest? Should it be MIT or would ,
> for example, Modified BSD License do?

Ansi,

You are completely free of choosing the licence for your software. The X/MIT
licence of GDAL/OGR has no consequence on the choice of the licence of other
software using GDAL/OGR. You could even release your software under a
proprietary licence if you wish (but, as a OSGeo project, we clearly advocate
for the use and development of free and Open Source software !). It is up to you
to decide which rights and obligations you want to offer/impose to your users.

Licencing has been discussed in the past and you can for example have a look at
this post
http://dmorissette.blogspot.fr/2011/07/obligations-related-to-open-source.html
for a quick summary of my understanding of some common FOSS licences.

Best regards,

Even


From zoltans at geograph.co.za  Wed Jun 20 07:31:31 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Wed, 20 Jun 2012 16:31:31 +0200
Subject: [gdal-dev] OGR 1.9.0 won't open DGN file
In-Reply-To: <1340189770.4fe1ac4a3f8ae@imp.free.fr>
References: <4FE18F9A.5040003@geograph.co.za>
	<1340189770.4fe1ac4a3f8ae@imp.free.fr>
Message-ID: <4FE1DEC3.90606@geograph.co.za>

On 2012/06/20 12:56, Even Rouault wrote:
> Selon Zoltan Szecsei<zoltans at geograph.co.za>:
>
>> Hi,
>> I have some DGN v7 files with contours, and I wish to add up the total
>> length of all the contours in the file.
>>
>> Using:
>> zls at gs0:~/ngi10k/ngi10k_geo$ ogrinfo --version
>> GDAL 1.9.0, released 2011/12/29
>>
>> I get:
>> zls at gs0:~/ngi10k/ngi10k_geo$ ogrinfo 3117bb_lin_v7.dgn
>> INFO: Open of `3117bb_lin_v7.dgn'
>>         using driver `DGN' successful.
>> 1: elements
>> zls at gs0:~/ngi10k/ngi10k_geo$
>>
>> If I use parameters -so or -q or -geom=SUMMARY then I get the same
>> error,
> Which error ? The output of the above commands looks right. There is no error as
> far as I can see...
Ah! Sorry. That's my sloppy use of the word "error".
I was expecting to see some summary of my dgn file. eg: number of 
elements, layers occupied, who know's what else.
This expectation came from reading the ogrinfo description webpage.
I expected to see something different when I used different parameters 
-so, -q and -geom=SUMMARY, but got all the same "nothing".
There are just over 24000 contour lines, as either LINESTRING or 
MULTILINESTRING in this DGN file.
>
>> but if I use parameter -al, then the DGN file is opened and all
>> 24000 contours are dumped to stdout.
> Yes, that's expected.
Yes, so did I expect this. I was providing it to show that my DGN file 
was in fact 'dumped' , and hence usable/readable by ogrinfo.
>
>> QGIS 1.7.3 on Windows does open the same DGN file.
> Cool
>
>> How can I investigate further as to why Linux ogr won't open the file
>> using ?
> AFAICS, OGR did open the file. It is just that without the -al option, or
> specifying the layer name (elements), the features won't be listed in the
> console. I don't see any issue in the above, but I've perhaps not understood
> what you mean.
I did not want to dump the features. I was hoping that "SUMMARY" would 
give some useful info like layers occupied, element type/count and sum 
of line-lengths, poly perimeters/area etc etc (the sum of line lengths 
were what I was praying for).

Thanks for your response, and apologies for the misuse of the word "error".
Regards,
Zoltan
>
>> TIA,
>> Zoltan
>>
>> --
>>
>> ===========================================
>> Zoltan Szecsei PrGISc [PGP0031]
>> Geograph (Pty) Ltd.
>> P.O. Box 7, Muizenberg 7950, South Africa.
>>
>> 65 Main Road, Muizenberg 7945
>> Western Cape, South Africa.
>>
>> 34? 6'16.35"S 18?28'5.62"E
>>
>> Tel: +27-21-7884897  Mobile: +27-83-6004028
>> Fax: +27-86-6115323     www.geograph.co.za
>> ===========================================
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================


From jukka.rahkonen at mmmtike.fi  Wed Jun 20 07:38:26 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 20 Jun 2012 14:38:26 +0000 (UTC)
Subject: [gdal-dev] OGR 1.9.0 won't open DGN file
References: <4FE18F9A.5040003@geograph.co.za>
	<1340189770.4fe1ac4a3f8ae@imp.free.fr>
	<4FE1DEC3.90606@geograph.co.za>
Message-ID: <loom.20120620T163637-117@post.gmane.org>

Zoltan Szecsei <zoltans <at> geograph.co.za> writes:

Just do 

ogrinfo -al -so 

-Jukka Rahkonen


From anssisamuli at gmail.com  Wed Jun 20 07:45:45 2012
From: anssisamuli at gmail.com (anssi)
Date: Wed, 20 Jun 2012 16:45:45 +0200
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <1340200814.4fe1d76e4333a@imp.free.fr>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
	<Pine.GSO.4.64.1206200759080.9424@cs.joensuu.fi>
	<CAPkgWhmirmYnHQqSBxgHp9RfLEYuwrq_oHHzmT7CjCGc1Q1aLA@mail.gmail.com>
	<BLU0-SMTP15007A499DBAFFE23CD37C4F4FE0@phx.gbl>
	<CA+TxYvNvhd9w+8EQcYMjqhrQW7La26hgEWHgJWuqePAGzJF5uQ@mail.gmail.com>
	<4FE1C6CC.8060804@ualg.pt>
	<CAPkgWh=+YKeO9d4Eywk_WvzSjMFpVrro5vW43geTwYF=+gm8vA@mail.gmail.com>
	<1340200814.4fe1d76e4333a@imp.free.fr>
Message-ID: <CAPkgWhmxEFCqVF-j_Jdq9hsCoO4bZCpN5RQ5uF12VYARR=+iAA@mail.gmail.com>

Dear Even,

many thanks for your prompt reply and the link. I found them both very helpful!

Cheers,

anssi



On Wed, Jun 20, 2012 at 4:00 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Selon anssi <anssisamuli at gmail.com>:
>
>> Dear Joaquim,
>>
>> thanks for pointing that out.
>>
>> There?s absolutely no intention to abuse any of the great work of the
>> gdal/ogr developers. Rather the opposite.
>>
>> The license is being discussed as we speak and we're considering
>> various options. What would you suggest? Should it be MIT or would ,
>> for example, Modified BSD License do?
>
> Ansi,
>
> You are completely free of choosing the licence for your software. The X/MIT
> licence of GDAL/OGR has no consequence on the choice of the licence of other
> software using GDAL/OGR. You could even release your software under a
> proprietary licence if you wish (but, as a OSGeo project, we clearly advocate
> for the use and development of free and Open Source software !). It is up to you
> to decide which rights and obligations you want to offer/impose to your users.
>
> Licencing has been discussed in the past and you can for example have a look at
> this post
> http://dmorissette.blogspot.fr/2011/07/obligations-related-to-open-source.html
> for a quick summary of my understanding of some common FOSS licences.
>
> Best regards,
>
> Even
>

From jukka.rahkonen at mmmtike.fi  Wed Jun 20 07:49:30 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 20 Jun 2012 14:49:30 +0000 (UTC)
Subject: [gdal-dev] OGR 1.9.0 won't open DGN file
References: <4FE18F9A.5040003@geograph.co.za>
	<1340189770.4fe1ac4a3f8ae@imp.free.fr>
	<4FE1DEC3.90606@geograph.co.za>
	<loom.20120620T163637-117@post.gmane.org>
Message-ID: <loom.20120620T164441-144@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:

> 
> Zoltan Szecsei <zoltans <at> geograph.co.za> writes:
> 
> Just do 
> 
> ogrinfo -al -so 

Sorry, after really reading your message I notice that you were not after the
standard summary report. Read this page about OGR and SQL and start playing with
your data

http://www.gdal.org/ogr/ogr_sql.html

I can see there is OGR_GEOM_AREA but not OGR_GEOM_LENGTH which could be rather
close to what you are after, used together with SUM which seems to be supported.

> 
> -Jukka Rahkonen
> 





From emmanuel.seguin at ign.fr  Wed Jun 20 09:41:40 2012
From: emmanuel.seguin at ign.fr (=?ISO-8859-1?Q?Emmanuel_S=E9guin?=)
Date: Wed, 20 Jun 2012 18:41:40 +0200
Subject: [gdal-dev] Updating shapefile "fields" name with ogr2ogr
Message-ID: <4FE1FD44.7020908@ign.fr>

Hi,

This may be very easy but I did not find a way to use ogr2ogr to change 
a shapefile field (attribute) name.
I've tried something like this : ' ogr2ogr -f "ESRI Shapefile" -sql 
"ALTER TABLE CHEMIN RENAME COLUMN prec_alti TO foo" CHEMIN2.shp 
CHEMIN.shp ' but I get the following error "ERROR 6: Can't alter field 
definition on a read-only shapefile layer." (I've tried to use the 
"AlterFieldDefn=TRUE" layer option with no success whatsoever)

Thanx for any help,

Manu

-- 
Emmanuel S?guin
SIEL - P?le technique du G?oportail
Institut G?ographique National
2/4, avenue Pasteur - 94165 Saint Mand? Cedex
Phone : +33 1.43.98.83.54
http://fr.linkedin.com/in/emmmanuelseguin


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120620/69ca91c0/attachment.html>

From even.rouault at mines-paris.org  Wed Jun 20 10:50:34 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 20 Jun 2012 19:50:34 +0200
Subject: [gdal-dev] Updating shapefile "fields" name with ogr2ogr
In-Reply-To: <4FE1FD44.7020908@ign.fr>
References: <4FE1FD44.7020908@ign.fr>
Message-ID: <201206201950.34491.even.rouault@mines-paris.org>

Le mercredi 20 juin 2012 18:41:40, Emmanuel S?guin a ?crit :
> Hi,
> 
> This may be very easy but I did not find a way to use ogr2ogr to change
> a shapefile field (attribute) name.
> I've tried something like this : ' ogr2ogr -f "ESRI Shapefile" -sql
> "ALTER TABLE CHEMIN RENAME COLUMN prec_alti TO foo" CHEMIN2.shp
> CHEMIN.shp ' but I get the following error "ERROR 6: Can't alter field
> definition on a read-only shapefile layer." (I've tried to use the
> "AlterFieldDefn=TRUE" layer option with no success whatsoever)

I know this is going to sound a bit counter-intutive at first...

When doing ogr2ogr destination.shp source.shp [anything], there's no reason to 
open source.shp in read/write mode, so it is opened in read-only mode. When 
you issue a SQL command, it is meant as an action on the source dataset, not 
the target dataset. When this SQL command is a ALTER one, you obviously need 
read/write permissions. When you combine all the statements, you understand 
the error message...

The good news is that you can solve it easily by using ogrinfo instead. 
ogrinfo opens datasources in read/write mode by default (unless you specify -
ro). So you can run :

ogrinfo CHEMIN.shp -sql "ALTER TABLE CHEMIN RENAME COLUMN prec_alti TO foo"

Best regards,

Even

From pcorti at gmail.com  Wed Jun 20 13:59:12 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Wed, 20 Jun 2012 22:59:12 +0200
Subject: [gdal-dev] Updating shapefile "fields" name with ogr2ogr
In-Reply-To: <201206201950.34491.even.rouault@mines-paris.org>
References: <4FE1FD44.7020908@ign.fr>
	<201206201950.34491.even.rouault@mines-paris.org>
Message-ID: <CAHXrU-LwfcEMSn5mu6XSdANAUHtLWhPF5ZOWG5cJc6htDE5k0Q@mail.gmail.com>

On Wed, Jun 20, 2012 at 7:50 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
>
> ogrinfo CHEMIN.shp -sql "ALTER TABLE CHEMIN RENAME COLUMN prec_alti TO foo"
>

really nice, I was not aware of this.

Another option I have been always using is:
ogr2ogr -sql 'select field1, field2, fieldn, ..., oldname as newname
from input' output.shp input.shp

but this way we need to regenerate the shapefile
best regards
p

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti

From codyschank at gmail.com  Wed Jun 20 14:04:39 2012
From: codyschank at gmail.com (Cody Schank)
Date: Wed, 20 Jun 2012 17:04:39 -0400
Subject: [gdal-dev] vertex counts in ogr
Message-ID: <CAEisBgSN4o1YEAMFfOy3K4aLW14r74vJ=CDJonDLbCBbXnEWJw@mail.gmail.com>

Hi,

I just started using ogr a couple of weeks ago, as I move away from arcpy.

After some head scratching, I came up with the following code to get a
vertex count for a polygon shapefile:

numVertices = 0
dataSource = driver.Open(shp, 0)
layer = dataSource.GetLayer()
for feature in layer:
     geom = feature.GetGeometryRef()
     for polygon in geom:
          numVertices += polygon.GetPointCount()

The script works, but returns a different count from the script I have used
in the past with arcpy (pasted below)

numVertices = 0
desc = arcpy.Describe(shp)
shapefieldname = desc.ShapeFieldName
rows = arcpy.SearchCursor(shp)
for row in rows:
     feat = row.getValue(shapefieldname)
     numVertices += feat.pointCount


Any help would be awesome!

Thanks!
Cody
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120620/c11dcb1d/attachment.html>

From emmanuel.seguin at ign.fr  Thu Jun 21 06:29:32 2012
From: emmanuel.seguin at ign.fr (=?UTF-8?B?RW1tYW51ZWwgU8OpZ3Vpbg==?=)
Date: Thu, 21 Jun 2012 15:29:32 +0200
Subject: [gdal-dev] Updating shapefile "fields" name with ogr2ogr
In-Reply-To: <201206201950.34491.even.rouault@mines-paris.org>
References: <4FE1FD44.7020908@ign.fr>
	<201206201950.34491.even.rouault@mines-paris.org>
Message-ID: <4FE321BC.9010203@ign.fr>

Thanx for your answer. Working fine.

On 06/20/2012 07:50 PM, Even Rouault wrote:
> Le mercredi 20 juin 2012 18:41:40, Emmanuel S?guin a ?crit :
>> Hi,
>>
>> This may be very easy but I did not find a way to use ogr2ogr to change
>> a shapefile field (attribute) name.
>> I've tried something like this : ' ogr2ogr -f "ESRI Shapefile" -sql
>> "ALTER TABLE CHEMIN RENAME COLUMN prec_alti TO foo" CHEMIN2.shp
>> CHEMIN.shp ' but I get the following error "ERROR 6: Can't alter field
>> definition on a read-only shapefile layer." (I've tried to use the
>> "AlterFieldDefn=TRUE" layer option with no success whatsoever)
> I know this is going to sound a bit counter-intutive at first...
>
> When doing ogr2ogr destination.shp source.shp [anything], there's no reason to
> open source.shp in read/write mode, so it is opened in read-only mode. When
> you issue a SQL command, it is meant as an action on the source dataset, not
> the target dataset. When this SQL command is a ALTER one, you obviously need
> read/write permissions. When you combine all the statements, you understand
> the error message...
>
> The good news is that you can solve it easily by using ogrinfo instead.
> ogrinfo opens datasources in read/write mode by default (unless you specify -
> ro). So you can run :
>
> ogrinfo CHEMIN.shp -sql "ALTER TABLE CHEMIN RENAME COLUMN prec_alti TO foo"
>
> Best regards,
>
> Even
>


-- 
Emmanuel S?guin
SIEL - P?le technique du G?oportail
Institut G?ographique National
2/4, avenue Pasteur - 94165 Saint Mand? Cedex
Phone : +33 1.43.98.83.54
http://fr.linkedin.com/in/emmmanuelseguin



From peifer at gmx.eu  Thu Jun 21 23:03:24 2012
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri, 22 Jun 2012 08:03:24 +0200
Subject: [gdal-dev] Updating shapefile "fields" name with ogr2ogr
In-Reply-To: <201206201950.34491.even.rouault@mines-paris.org>
References: <4FE1FD44.7020908@ign.fr>
	<201206201950.34491.even.rouault@mines-paris.org>
Message-ID: <4FE40AAC.3010800@gmx.eu>

On 2012-06-20 19:50, Even Rouault wrote:
>
> I know this is going to sound a bit counter-intutive at first...
>
> ogrinfo opens datasources in read/write mode by default...

Just out of curiosity: why does an ...info tool use read/write mode by 
default? One would expect that it only needs to *read* some info in the 
data source?

Hermann

From tom.van.tilburg at gmail.com  Fri Jun 22 01:23:10 2012
From: tom.van.tilburg at gmail.com (Tom van Tilburg)
Date: Fri, 22 Jun 2012 10:23:10 +0200
Subject: [gdal-dev] Problem exporting from postgis: no valid pixels found
Message-ID: <4FE42B6E.9000906@gmail.com>

Hi,

It seems since my last update of postgis (2.0.0) and gdal(1.9.1) I can't 
get exports from postgis rasters anymore.
This is what happens:

1) Uploaded my raster file with raster2pgsql

2) Check existence of raster data in postgis with:
     SELECT (ST_SummaryStats(rast,1)).* FROM tmp.ahn1_sample;
         
188011;850804.048978517;4.52528867448456;3.79287402253362;-1.10899996757507;21.1429996490479
     SELECT (ST_BandMetaData(rast,1)).* FROM  tmp.ahn1_sample;
         "32BF";-3.40282346638529e+38;f;""
     SELECT ST_Value(rast, 1000,1000) FROM tmp.ahn1_sample;
         2.8840000629425

3) Get gdalinfo:
      gdalinfo -stats "PG:host=localhost dbname='mydbase' user='me' 
password='mypass' schema='tmp' table=ahn1_sample"
==========================================================
Driver: PostGISRaster/PostGIS Raster driver
Files: none associated
Size is 1000, 1250
Coordinate System is:
PROJCS["Amersfoort / RD New",
     GEOGCS["Amersfoort",
         DATUM["Amersfoort",
             SPHEROID["Bessel 1841",6377397.155,299.1528128,
                 AUTHORITY["EPSG","7004"]],
             AUTHORITY["EPSG","6289"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.01745329251994328,
             AUTHORITY["EPSG","9122"]],
         AUTHORITY["EPSG","4289"]],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     PROJECTION["Oblique_Stereographic"],
     PARAMETER["latitude_of_origin",52.15616055555555],
     PARAMETER["central_meridian",5.38763888888889],
     PARAMETER["scale_factor",0.9999079],
     PARAMETER["false_easting",155000],
     PARAMETER["false_northing",463000],
     AUTHORITY["EPSG","28992"],
     AXIS["X",EAST],
     AXIS["Y",NORTH]]
Origin = (140000.000000000000000,606250.000000000000000)
Pixel Size = (5.000000000000000,-5.000000000000000)
Corner Coordinates:
Upper Left  (  140000.000,  606250.000) (  5d 9'42.75"E, 53d26'36.33"N)
Lower Left  (  140000.000,  600000.000) (  5d 9'43.81"E, 53d23'14.15"N)
Upper Right (  145000.000,  606250.000) (  5d14'13.67"E, 53d26'36.76"N)
Lower Right (  145000.000,  600000.000) (  5d14'14.38"E, 53d23'14.57"N)
Center      (  142500.000,  603125.000) (  5d11'58.65"E, 53d24'55.48"N)
Band 1 Block=1000x1250 Type=Float32, ColorInterp=Undefined
ERROR 1: PG:host=localhost dbname='mydbase' user='me' password='mypass' 
schema='tmp' table=ahn1_sample, band 1: Failed to compute statistics, no 
valid pixels found in sampling.
   NoData Value=0
   Overviews: arbitrary
=================================

As you can see there seem to be no valid pixels in the raster.

Some version outputs:
     gdalinfo --version
     GDAL 1.9.1, released 2012/05/15

SELECT postgis_raster_lib_version();
     "2.0.0 r9605"

I'm curious wether anyone experiences the same. Searches on the web 
didn't really turn up with this specific error message.
I can sent the raster sample if needed.

Best regards,
  Tom

From eadam at co.lincoln.or.us  Fri Jun 22 08:55:39 2012
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Fri, 22 Jun 2012 08:55:39 -0700
Subject: [gdal-dev] Updating shapefile "fields" name with ogr2ogr
In-Reply-To: <4FE40AAC.3010800@gmx.eu>
References: <4FE1FD44.7020908@ign.fr>
	<201206201950.34491.even.rouault@mines-paris.org>
	<4FE40AAC.3010800@gmx.eu>
Message-ID: <CACqBkM9JGu-f2Fkyji0YAH-gQ-+munpUBtA8ba0nqNsAP02s1A@mail.gmail.com>

I've also found this very confusing and unexpected.  Once I did figure
it out it has been very useful.  Could

ogrinfo CHEMIN.shp -sql "ALTER TABLE CHEMIN RENAME COLUMN prec_alti TO foo"

or similar be added as an example to http://gdal.org/ogrinfo.html and
perhaps also as a 'note about ogrinfo with OGR SQL' on
http://gdal.org/ogr/ogr_sql.html?

Perhaps http://gdal.org/ogr/ogr_sql.html could be updated from:

-sql statement:
    Execute the indicated SQL statement and return the result.

to something like:

-sql statement:
    Execute the indicated SQL statement and return the result. In
place updates (ALTER TABLE) are also permitted.


Eli


On Thu, Jun 21, 2012 at 11:03 PM, Hermann Peifer <peifer at gmx.eu> wrote:
> On 2012-06-20 19:50, Even Rouault wrote:
>>
>>
>> I know this is going to sound a bit counter-intutive at first...
>>
>> ogrinfo opens datasources in read/write mode by default...
>
>
> Just out of curiosity: why does an ...info tool use read/write mode by
> default? One would expect that it only needs to *read* some info in the data
> source?
>
> Hermann
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From macwind2 at gmail.com  Sat Jun 23 01:28:06 2012
From: macwind2 at gmail.com (Mac Wind)
Date: Sat, 23 Jun 2012 10:28:06 +0200
Subject: [gdal-dev] =?windows-1252?q?DXF_files=3A_Is_it_possible_to_handle?=
	=?windows-1252?q?_layer_names=3F_=28I_get_only_=93entities=94=29?=
Message-ID: <CAEdUBOiX+QQCFWPst9QtxzNvhc03f8UTDnwo3MZz=fo6U4VG1Q@mail.gmail.com>

I'm using Python to extract the layers of a DXF file and convert them into SHP.

I began with:

------------------------
import ogr, os, sys
driver = ogr.GetDriverByName('DXF')
datasource = driver.Open('test1.dxf', 0)
numberLayers = datasource.GetLayerCount()
for i in range(0, numberLayers):
    layer = datasource.GetLayerByIndex(i)
    layerName = layer.GetName()
    numberFeatures = layer.GetFeatureCount()
    print 'Layer=%s|Features=%s' % (layerName, numberFeatures)
but I get one only layer: entities (as expected:
http://www.gdal.org/ogr/drv_dxf.html)
----------------

Obviously, it's the same information as if I execute: ogrinfo -so
test1.dxf entities

My DXF file contains several CAD layers: "ROADS", "ELEVATION", ... Is
it possible to handle these layer names with OGR? Thank you very much.

From j.l.h.hartmann at uva.nl  Sat Jun 23 05:23:02 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat, 23 Jun 2012 14:23:02 +0200
Subject: [gdal-dev] gdaltransform with gcps from file
In-Reply-To: <CA+YzLBcn4qJ+bptb7DDCwtU7K=LgCPOkXbVojjP_fcH6os=Nww@mail.gmail.com>
References: <CA+_hAHeLB7b10KtEKsSCg4ezwygcOO0vbu8ep-JV-GsVFC+zMw@mail.gmail.com>
	<CA+_hAHfvc27zwbaAd_M7wqEDKrbEcZtb_vY4PSA2Ju0_1tO8_g@mail.gmail.com>
	<CA+YzLBcn4qJ+bptb7DDCwtU7K=LgCPOkXbVojjP_fcH6os=Nww@mail.gmail.com>
Message-ID: <4FE5B526.4090304@uva.nl>

Silly question, perhaps. I use gdaltransform with gcps given at the 
command line. According to the documentation, gcps can also be put into 
the <srcfile> parameter to the program. What is the format of that file? 
Most of the time I get an error message like "file fomat not supported". 
With four numbers per line the message is "Ungridded dataset". What am I 
doing wrong?

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120623/0a28b604/attachment.html>

From bfraser at geoanalytic.com  Sat Jun 23 09:10:22 2012
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Sat, 23 Jun 2012 10:10:22 -0600
Subject: [gdal-dev] gdaltransform with gcps from file
In-Reply-To: <4FE5B526.4090304@uva.nl>
References: <CA+_hAHeLB7b10KtEKsSCg4ezwygcOO0vbu8ep-JV-GsVFC+zMw@mail.gmail.com>
	<CA+_hAHfvc27zwbaAd_M7wqEDKrbEcZtb_vY4PSA2Ju0_1tO8_g@mail.gmail.com>
	<CA+YzLBcn4qJ+bptb7DDCwtU7K=LgCPOkXbVojjP_fcH6os=Nww@mail.gmail.com>
	<4FE5B526.4090304@uva.nl>
Message-ID: <4FE5EA6E.7080105@geoanalytic.com>

Jan,

   Dunno about using the <srcfile> parameter in gdaltransform, but while 
using gdal_translate, I have used the "--optfile" option and put 
multiple "-gcp" commands in it. Perhaps it would work with gdaltransform 
too...

Best Regards,
Brent Fraser

On 6/23/2012 6:23 AM, Jan Hartmann wrote:
> Silly question, perhaps. I use gdaltransform with gcps given at the 
> command line. According to the documentation, gcps can also be put 
> into the <srcfile> parameter to the program. What is the format of 
> that file? Most of the time I get an error message like "file fomat 
> not supported". With four numbers per line the message is "Ungridded 
> dataset". What am I doing wrong?
>
> Jan
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120623/9a44adc5/attachment.html>

From jdmorgan at unca.edu  Sat Jun 23 12:19:57 2012
From: jdmorgan at unca.edu (jdmorgan)
Date: Sat, 23 Jun 2012 15:19:57 -0400
Subject: [gdal-dev] zonal statistics with gdal
In-Reply-To: <CAPkgWhmirmYnHQqSBxgHp9RfLEYuwrq_oHHzmT7CjCGc1Q1aLA@mail.gmail.com>
References: <mailman.51.1340046004.5792.gdal-dev@lists.osgeo.org>
	<4FE0AAAD.3010000@gmail.com>
	<Pine.GSO.4.64.1206200759080.9424@cs.joensuu.fi>
	<CAPkgWhmirmYnHQqSBxgHp9RfLEYuwrq_oHHzmT7CjCGc1Q1aLA@mail.gmail.com>
Message-ID: <4FE616DD.8080707@gmail.com>

Anssim, Petteri and others,

Thanks for you great feedback on this topic.

Cheers,
Derek

On 6/20/2012 5:26 AM, anssi wrote:
> If you first rasterize your shapefile to the extent of your raster,
> you can compute some basic stats and/or full histogram for your
> polygons using Open Foris Geospatial Toolkit :
>
> http://km.fao.org/OFwiki/index.php/Open_Foris_Toolkit
>
> Installation instructions are under the "How to get it?" link.
>
> Hope you're a Linux user :)
>
> Best,
>
> Anssi
>
>
>
> On Wed, Jun 20, 2012 at 6:59 AM, Petteri Packalen
> <packalen at cs.joensuu.fi> wrote:
>> Derek,
>>
>> Look at the http://starspan.projects.atlas.ca.gov project.
>>
>> Petteri
>>
>>
>> On Tue, 19 Jun 2012, jdmorgan wrote:
>>
>>> Hello,
>>>
>>> Is there a way to do something along the lines of zonal statistics with
>>> gdal.Basically, I have a county shape file and a classified raster dataset.I
>>> would like to count the number of raster pixels/county (FIPS).Is this
>>> possible with GDAL/OGR?If so can someone point me in the right direction?
>>>   If so, awesome as I plan to do some automation with python.
>>>
>>> Thanks,
>>>
>>> Derek
>>>
>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From macwind2 at gmail.com  Sun Jun 24 09:34:14 2012
From: macwind2 at gmail.com (Mac Wind)
Date: Sun, 24 Jun 2012 18:34:14 +0200
Subject: [gdal-dev] =?windows-1252?q?=93AttributeError=3A_getZ=94_error_wh?=
	=?windows-1252?q?en_trying_to_get_the_elevation_of_DXF_linestrings?=
Message-ID: <CAEdUBOhvTRe8rByNiKFPRO5Zp5tWn7cPNP+BgFnZk0WWbGqKEA@mail.gmail.com>

Hello.

I'm using Python and OGR to extract the elevation of lines within a DXF file.

--------------
import ogr

driver = ogr.GetDriverByName('DXF')
datasource = driver.Open('test1.dxf', 0)

layers=datasource.ExecuteSQL( "SELECT DISTINCT Layer FROM entities" )
layer=datasource.GetLayerByIndex(0)

for i in range(0, layers.GetFeatureCount()):
        layerName = layers.GetFeature(i).GetFieldAsString(0)
        layer.SetAttributeFilter( "Layer='%s'" % layerName)
        print 'Layer=%s|Features=%s' % (layerName, layer.GetFeatureCount())

    for j in range(0, layer.GetFeatureCount()):
      myFeature = layer.GetNextFeature()
      myElevation = myFeature.GetGeometryRef().getZ(0)
-----------

But I get an "AttributeError: getZ" error when executing it.

What am I doing wrong? Thank you very much.

From even.rouault at mines-paris.org  Sun Jun 24 10:59:23 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 24 Jun 2012 19:59:23 +0200
Subject: [gdal-dev]
 =?utf-8?b?4oCcQXR0cmlidXRlRXJyb3I6IGdldFrigJ0gZXJyb3Ig?=
 =?utf-8?q?when_trying_to_get_the_elevation_of_DXF_linestrings?=
In-Reply-To: <CAEdUBOhvTRe8rByNiKFPRO5Zp5tWn7cPNP+BgFnZk0WWbGqKEA@mail.gmail.com>
References: <CAEdUBOhvTRe8rByNiKFPRO5Zp5tWn7cPNP+BgFnZk0WWbGqKEA@mail.gmail.com>
Message-ID: <201206241959.23995.even.rouault@mines-paris.org>

>       myElevation = myFeature.GetGeometryRef().getZ(0)
> -----------
> 
> But I get an "AttributeError: getZ" error when executing it.

The method name is GetZ(). And due to how the memory management of the python 
bindings work, I'd encourage you storing the geometry in a temporary variable 
before calling GetZ()

myGeom = myFeature.GetGeometryRef()
myElevation = myGeom.GetZ()

From etourigny.dev at gmail.com  Mon Jun 25 07:41:08 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 25 Jun 2012 11:41:08 -0300
Subject: [gdal-dev] Cannot read NetCDF subdatasets
In-Reply-To: <CAHXrU-Lmq0q=KFPcC-iu75XELBxX0bfxEBaszDR+dqqD4DT=hw@mail.gmail.com>
References: <CAHXrU-L8sF6_HUUJ9ZLVo=QKdGqjW7hrFU=EqAhLfW+HWxi7DQ@mail.gmail.com>
	<4202337.4ulnyHD3Et@tatras>
	<CA+TxYvMwssK-Zm82OoO+icz7TobevG00Kx1ZNeByZ_Ekx3d86w@mail.gmail.com>
	<CAHXrU-LJALMv5R3CyHiRG70HFBw0-wb9A_Y_CiL==zPPePW77w@mail.gmail.com>
	<CA+TxYvPqew7jwAKfcNv9CbD9xK_rDj7CX7eeG1SE7TMFHscS1Q@mail.gmail.com>
	<CAHXrU-Lmq0q=KFPcC-iu75XELBxX0bfxEBaszDR+dqqD4DT=hw@mail.gmail.com>
Message-ID: <CA+TxYvP6OynM=2niTNMEjTgpsrUwEVyOO_pMDzbK4mT8VjANpg@mail.gmail.com>

For informatioon: the problem was that Paolo was using custom netcdf
libraries and did not add the proper option to configure

--with-netcdf=/usr/local

Etienne

On Wed, Jun 20, 2012 at 5:47 AM, Paolo Corti <pcorti at gmail.com> wrote:
> On Tue, Jun 19, 2012 at 7:48 PM, Etienne Tourigny
> <etourigny.dev at gmail.com> wrote:
>> no... unless your system uses the hdf5 driver before the netcdf driver.
>>
>> If the netcdf driver detects a hdf5 file that ends with nc, nc2, nc4
>> or cdf (the common extensions) then it opens it, else it passes it to
>> the hdf5 driver.
>> There is no other way of identifying hdf5 files that are not "netcdf-4" files.
>>
>> There is a test in the autotest suite that tests that the netcdf
>> driver picks up netcdf-4 files but not other hdf5 files. If you do
>> have the autotests installed, try to run the gdrivers/netcdf.py test.
>>
>> Can you send an example file to me?
>>
>>
>
> The system, when opening the whole dataset uses hdf5 as the default.
> At least, gdalinfo ?display the list of each subdataset like this:
>
> ....
> Subdatasets:
> ?SUBDATASET_1_NAME=HDF5:"/effisRisk/Data/Season-2012/Ecmwf/m05/Glb_20120528.nc4"://cf_DangerRisk
> ?SUBDATASET_1_DESC=[10x640x1280] //cf_DangerRisk (32-bit floating-point)
> ?SUBDATASET_2_NAME=HDF5:"/effisRisk/Data/Season-2012/Ecmwf/m05/Glb_20120528.nc4"://cf_FWI
> ?SUBDATASET_2_DESC=[10x640x1280] //cf_FWI (32-bit floating-point)
> ....
>
> When opening a subdatset it uses the netcdf as the default
> If I specify NETCDF:dataset it correctly uses netcdf also for the whole dataset.
>
> Tests run fine, this is the output:
>
> # python netcdf.py
> /usr/lib/python2.4/site-packages/GDAL-1.9.0-py2.4-linux-i686.egg/osgeo/gdal.py:80:
> DeprecationWarning: gdal.py was placed in a namespace, it is now
> available as osgeo.gdal
> ?DeprecationWarning)
> ?TEST: netcdf_1 ... NOTICE: using netcdf version 4.1.3 ?has_nc2: True
> ?has_nc4: False
> success
> ?TEST: netcdf_2 ... success
> ?TEST: netcdf_3 ... success
> ?TEST: netcdf_4 ... success
> ?TEST: netcdf_5 ... success
> ?TEST: netcdf_6 ... success
> ?TEST: netcdf_7 ... success
> ?TEST: netcdf_8 ... success
> ?TEST: netcdf_9 ... success
> ?TEST: netcdf_10 ... success
> ?TEST: netcdf_11 ... success
> ?TEST: netcdf_12 ... success
> ?TEST: netcdf_13 ... success
> ?TEST: netcdf_14 ... success
> ?TEST: netcdf_15 ... success
> ?TEST: netcdf_16 ... skip
> ?TEST: netcdf_17 ... skip
> ?TEST: netcdf_18 ... skip
> ?TEST: netcdf_19 ... skip
> ?TEST: netcdf_20 ... skip
> ?TEST: netcdf_21 ... skip
> ?TEST: netcdf_22 ... skip
> ?TEST: netcdf_23 ... skip
> ?TEST: netcdf_24 ... success
> ?TEST: netcdf_25 ... success
> ?TEST: netcdf_26 ... success
> ?TEST: netcdf_27 ... success
> ?TEST: SetGeoTransform: byte.tif ... success
> ?TEST: SetProjection: byte.tif ... success
> ?TEST: CreateCopy: byte.tif ... success
> ?TEST: Create: byte.tif ... success
> ?TEST: SetNoDataValue: byte.tif ... success
> ?TEST: CreateCopy: byte_signed.tif ... success
> ?TEST: Create: byte_signed.tif ... success
> ?TEST: SetNoDataValue: byte_signed.tif ... success
> ?TEST: CreateCopy: int16.tif ... success
> ?TEST: Create: int16.tif ... success
> ?TEST: SetNoDataValue: int16.tif ... success
> ?TEST: CreateCopy: int32.tif ... success
> ?TEST: Create: int32.tif ... success
> ?TEST: SetNoDataValue: int32.tif ... success
> ?TEST: CreateCopy: float32.tif ... success
> ?TEST: Create: float32.tif ... success
> ?TEST: SetNoDataValue: float32.tif ... success
> ?TEST: CreateCopy: float64.tif ... success
> ?TEST: Create: float64.tif ... success
> ?TEST: SetNoDataValue: float64.tif ... success
>
> Test Script: netcdf
> Succeeded: 39
> Failed: ? ?0 (0 blew exceptions)
> Skipped: ? 8
> Expected fail:0
>
> I will send you the link to download a test dataset off list.
> cheers
> p
>
> --
> Paolo Corti
> Geospatial software developer
> web: http://www.paolocorti.net
> twitter: @capooti
> skype: capooti

From pcorti at gmail.com  Mon Jun 25 08:25:44 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Mon, 25 Jun 2012 17:25:44 +0200
Subject: [gdal-dev] Cannot read NetCDF subdatasets
In-Reply-To: <CA+TxYvP6OynM=2niTNMEjTgpsrUwEVyOO_pMDzbK4mT8VjANpg@mail.gmail.com>
References: <CAHXrU-L8sF6_HUUJ9ZLVo=QKdGqjW7hrFU=EqAhLfW+HWxi7DQ@mail.gmail.com>
	<4202337.4ulnyHD3Et@tatras>
	<CA+TxYvMwssK-Zm82OoO+icz7TobevG00Kx1ZNeByZ_Ekx3d86w@mail.gmail.com>
	<CAHXrU-LJALMv5R3CyHiRG70HFBw0-wb9A_Y_CiL==zPPePW77w@mail.gmail.com>
	<CA+TxYvPqew7jwAKfcNv9CbD9xK_rDj7CX7eeG1SE7TMFHscS1Q@mail.gmail.com>
	<CAHXrU-Lmq0q=KFPcC-iu75XELBxX0bfxEBaszDR+dqqD4DT=hw@mail.gmail.com>
	<CA+TxYvP6OynM=2niTNMEjTgpsrUwEVyOO_pMDzbK4mT8VjANpg@mail.gmail.com>
Message-ID: <CAHXrU-JA=RqiGjTo4YM_14M8Crhq59+Yfu-TuCyPg6eE-1cVMQ@mail.gmail.com>

On Mon, Jun 25, 2012 at 4:41 PM, Etienne Tourigny
<etourigny.dev at gmail.com> wrote:
> For informatioon: the problem was that Paolo was using custom netcdf
> libraries and did not add the proper option to configure
>
> --with-netcdf=/usr/local
>

Thanks again to Etienne for helping with this.
After closing the filed ticket [1] he has updated the wiki page [2] as
well with this, so most likely no one can be in my same shoes
p

[1] http://trac.osgeo.org/gdal/ticket/4717#comment:7
[2] http://trac.osgeo.org/gdal/wiki/NetCDF

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti

From jmckenna at gatewaygeomatics.com  Mon Jun 25 08:45:46 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon, 25 Jun 2012 12:45:46 -0300
Subject: [gdal-dev] Cannot read NetCDF subdatasets
In-Reply-To: <CAHXrU-JA=RqiGjTo4YM_14M8Crhq59+Yfu-TuCyPg6eE-1cVMQ@mail.gmail.com>
References: <CAHXrU-L8sF6_HUUJ9ZLVo=QKdGqjW7hrFU=EqAhLfW+HWxi7DQ@mail.gmail.com>
	<4202337.4ulnyHD3Et@tatras>
	<CA+TxYvMwssK-Zm82OoO+icz7TobevG00Kx1ZNeByZ_Ekx3d86w@mail.gmail.com>
	<CAHXrU-LJALMv5R3CyHiRG70HFBw0-wb9A_Y_CiL==zPPePW77w@mail.gmail.com>
	<CA+TxYvPqew7jwAKfcNv9CbD9xK_rDj7CX7eeG1SE7TMFHscS1Q@mail.gmail.com>
	<CAHXrU-Lmq0q=KFPcC-iu75XELBxX0bfxEBaszDR+dqqD4DT=hw@mail.gmail.com>
	<CA+TxYvP6OynM=2niTNMEjTgpsrUwEVyOO_pMDzbK4mT8VjANpg@mail.gmail.com>
	<CAHXrU-JA=RqiGjTo4YM_14M8Crhq59+Yfu-TuCyPg6eE-1cVMQ@mail.gmail.com>
Message-ID: <4FE887AA.2080205@gatewaygeomatics.com>

On 12-06-25 12:25 PM, Paolo Corti wrote:
> On Mon, Jun 25, 2012 at 4:41 PM, Etienne Tourigny
> <etourigny.dev at gmail.com> wrote:
>> For informatioon: the problem was that Paolo was using custom netcdf
>> libraries and did not add the proper option to configure
>>
>> --with-netcdf=/usr/local
>>
> 
> Thanks again to Etienne for helping with this.
> After closing the filed ticket [1] he has updated the wiki page [2] as
> well with this, so most likely no one can be in my same shoes
> p
> 
> [1] http://trac.osgeo.org/gdal/ticket/4717#comment:7
> [2] http://trac.osgeo.org/gdal/wiki/NetCDF
> 

Thanks for updating the wiki.  Unfortunately there is no mention of a
workaround for Windows; I'm curious if one exists.

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/





From jluis at ualg.pt  Mon Jun 25 09:16:59 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon, 25 Jun 2012 17:16:59 +0100
Subject: [gdal-dev] Cannot read NetCDF subdatasets
In-Reply-To: <4FE887AA.2080205@gatewaygeomatics.com>
References: <CAHXrU-L8sF6_HUUJ9ZLVo=QKdGqjW7hrFU=EqAhLfW+HWxi7DQ@mail.gmail.com>
	<4202337.4ulnyHD3Et@tatras>
	<CA+TxYvMwssK-Zm82OoO+icz7TobevG00Kx1ZNeByZ_Ekx3d86w@mail.gmail.com>
	<CAHXrU-LJALMv5R3CyHiRG70HFBw0-wb9A_Y_CiL==zPPePW77w@mail.gmail.com>
	<CA+TxYvPqew7jwAKfcNv9CbD9xK_rDj7CX7eeG1SE7TMFHscS1Q@mail.gmail.com>
	<CAHXrU-Lmq0q=KFPcC-iu75XELBxX0bfxEBaszDR+dqqD4DT=hw@mail.gmail.com>
	<CA+TxYvP6OynM=2niTNMEjTgpsrUwEVyOO_pMDzbK4mT8VjANpg@mail.gmail.com>
	<CAHXrU-JA=RqiGjTo4YM_14M8Crhq59+Yfu-TuCyPg6eE-1cVMQ@mail.gmail.com>
	<4FE887AA.2080205@gatewaygeomatics.com>
Message-ID: <4FE88EFB.7050903@ualg.pt>


>> Thanks again to Etienne for helping with this.
>> After closing the filed ticket [1] he has updated the wiki page [2] as
>> well with this, so most likely no one can be in my same shoes
>> p
>>
>> [1] http://trac.osgeo.org/gdal/ticket/4717#comment:7
>> [2] http://trac.osgeo.org/gdal/wiki/NetCDF
>>
> Thanks for updating the wiki.  Unfortunately there is no mention of a
> workaround for Windows; I'm curious if one exists.
>
> -jeff

But is there a problem on Windows? I remember to have done a couple of 
tests that Etienne asked me and all was right.

Joaquim

From etourigny.dev at gmail.com  Mon Jun 25 09:44:53 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 25 Jun 2012 13:44:53 -0300
Subject: [gdal-dev] Cannot read NetCDF subdatasets
In-Reply-To: <4FE887AA.2080205@gatewaygeomatics.com>
References: <CAHXrU-L8sF6_HUUJ9ZLVo=QKdGqjW7hrFU=EqAhLfW+HWxi7DQ@mail.gmail.com>
	<4202337.4ulnyHD3Et@tatras>
	<CA+TxYvMwssK-Zm82OoO+icz7TobevG00Kx1ZNeByZ_Ekx3d86w@mail.gmail.com>
	<CAHXrU-LJALMv5R3CyHiRG70HFBw0-wb9A_Y_CiL==zPPePW77w@mail.gmail.com>
	<CA+TxYvPqew7jwAKfcNv9CbD9xK_rDj7CX7eeG1SE7TMFHscS1Q@mail.gmail.com>
	<CAHXrU-Lmq0q=KFPcC-iu75XELBxX0bfxEBaszDR+dqqD4DT=hw@mail.gmail.com>
	<CA+TxYvP6OynM=2niTNMEjTgpsrUwEVyOO_pMDzbK4mT8VjANpg@mail.gmail.com>
	<CAHXrU-JA=RqiGjTo4YM_14M8Crhq59+Yfu-TuCyPg6eE-1cVMQ@mail.gmail.com>
	<4FE887AA.2080205@gatewaygeomatics.com>
Message-ID: <CA+TxYvP=5LjLdMGeFi-KeJdPG1y-Yu6a3_Ln+SFN=MRHst0VRQ@mail.gmail.com>

There is no need for a workaround - Paolo simply did not configure
gdal properly. Netcdf support in windows builds is a little different
but is quite simple - just a few lines to edit in nmake.opt

On Mon, Jun 25, 2012 at 12:45 PM, Jeff McKenna
<jmckenna at gatewaygeomatics.com> wrote:
> On 12-06-25 12:25 PM, Paolo Corti wrote:
>> On Mon, Jun 25, 2012 at 4:41 PM, Etienne Tourigny
>> <etourigny.dev at gmail.com> wrote:
>>> For informatioon: the problem was that Paolo was using custom netcdf
>>> libraries and did not add the proper option to configure
>>>
>>> --with-netcdf=/usr/local
>>>
>>
>> Thanks again to Etienne for helping with this.
>> After closing the filed ticket [1] he has updated the wiki page [2] as
>> well with this, so most likely no one can be in my same shoes
>> p
>>
>> [1] http://trac.osgeo.org/gdal/ticket/4717#comment:7
>> [2] http://trac.osgeo.org/gdal/wiki/NetCDF
>>
>
> Thanks for updating the wiki. ?Unfortunately there is no mention of a
> workaround for Windows; I'm curious if one exists.
>
> -jeff
>
>
>
>
> --
> Jeff McKenna
> MapServer Consulting and Training Services
> http://www.gatewaygeomatics.com/
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From kedardeshpande87 at gmail.com  Mon Jun 25 10:00:53 2012
From: kedardeshpande87 at gmail.com (kedardeshpande87)
Date: Mon, 25 Jun 2012 10:00:53 -0700 (PDT)
Subject: [gdal-dev] Building from source excluding some packages
Message-ID: <1340643653764-4983703.post@n6.nabble.com>

Hi,

I am trying to build the gdal-1.9.1 from source code using simple make
command. I am creating a small application that does not involve any
graphics or any maps/visual output. Therefore I wanted to *exclude* some of
the packages/directories while building the source such as raster formats
supported by gdal. The source code has many GNUmakefiles that get invoked at
various places while building. I am not sure how/which files I should
change. Is there a way I can make some changes in the top GNUmakefile (or
some other files) so that I can exclude some source from building ?

Thanks,
Kedar

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Building-from-source-excluding-some-packages-tp4983703.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From gabrielfusca at suremptec.com.ar  Mon Jun 25 10:38:34 2012
From: gabrielfusca at suremptec.com.ar (Gabriel Fusca)
Date: Mon, 25 Jun 2012 14:38:34 -0300
Subject: [gdal-dev] Veto wx ComboBox selection before selection change
Message-ID: <CAJ1ZnRUyjNZ3bBknBe+ocLozqBPtEAkJQ886hxV=Wf0uh1ND3g@mail.gmail.com>

Hi,

I?m using Windows OS and wx 2.8.12. I tried to use a wxCombobox which has
the capability to veto the change of the selected item from the combobox if
the current selection has changes to save.

I?m trying to use the wxEVT_COMMAND_COMBOBOX_
SELECTED. I want to save the previous selection index and when the user
changes the selection, I want to verify that the previous selection item
has changes to save. If this happens I want to set the combox selection to
the previous index values and notify the user.

Am I doing it wrong? Or it ther another way to do this?

It?s impossible to change the version of Wx.

Regards,


-- 
Gabriel Fusca
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
gabrielfusca at suremptec.com.ar
http://www.suremptec.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120625/01dd2f97/attachment.html>

From jmckenna at gatewaygeomatics.com  Mon Jun 25 10:33:11 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon, 25 Jun 2012 14:33:11 -0300
Subject: [gdal-dev] Cannot read NetCDF subdatasets
In-Reply-To: <CA+TxYvP=5LjLdMGeFi-KeJdPG1y-Yu6a3_Ln+SFN=MRHst0VRQ@mail.gmail.com>
References: <CAHXrU-L8sF6_HUUJ9ZLVo=QKdGqjW7hrFU=EqAhLfW+HWxi7DQ@mail.gmail.com>
	<4202337.4ulnyHD3Et@tatras>
	<CA+TxYvMwssK-Zm82OoO+icz7TobevG00Kx1ZNeByZ_Ekx3d86w@mail.gmail.com>
	<CAHXrU-LJALMv5R3CyHiRG70HFBw0-wb9A_Y_CiL==zPPePW77w@mail.gmail.com>
	<CA+TxYvPqew7jwAKfcNv9CbD9xK_rDj7CX7eeG1SE7TMFHscS1Q@mail.gmail.com>
	<CAHXrU-Lmq0q=KFPcC-iu75XELBxX0bfxEBaszDR+dqqD4DT=hw@mail.gmail.com>
	<CA+TxYvP6OynM=2niTNMEjTgpsrUwEVyOO_pMDzbK4mT8VjANpg@mail.gmail.com>
	<CAHXrU-JA=RqiGjTo4YM_14M8Crhq59+Yfu-TuCyPg6eE-1cVMQ@mail.gmail.com>
	<4FE887AA.2080205@gatewaygeomatics.com>
	<CA+TxYvP=5LjLdMGeFi-KeJdPG1y-Yu6a3_Ln+SFN=MRHst0VRQ@mail.gmail.com>
Message-ID: <4FE8A0D7.2040600@gatewaygeomatics.com>

On 12-06-25 1:44 PM, Etienne Tourigny wrote:
> There is no need for a workaround - Paolo simply did not configure
> gdal properly. Netcdf support in windows builds is a little different
> but is quite simple - just a few lines to edit in nmake.opt
> 

Ah ok thanks Etienne, I was scared there for a second :)

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/





From pcorti at gmail.com  Mon Jun 25 14:19:52 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Mon, 25 Jun 2012 23:19:52 +0200
Subject: [gdal-dev] Building from source excluding some packages
In-Reply-To: <1340643653764-4983703.post@n6.nabble.com>
References: <1340643653764-4983703.post@n6.nabble.com>
Message-ID: <CAHXrU-J4+pB-6Ob-9MMbWaFtC7P=4ToDfwZxpVJ+7Jyq1r1X_g@mail.gmail.com>

On Mon, Jun 25, 2012 at 7:00 PM, kedardeshpande87
<kedardeshpande87 at gmail.com> wrote:
> Hi,
>
> I am trying to build the gdal-1.9.1 from source code using simple make
> command. I am creating a small application that does not involve any
> graphics or any maps/visual output. Therefore I wanted to *exclude* some of
> the packages/directories while building the source such as raster formats
> supported by gdal. The source code has many GNUmakefiles that get invoked at
> various places while building. I am not sure how/which files I should
> change. Is there a way I can make some changes in the top GNUmakefile (or
> some other files) so that I can exclude some source from building ?
>

Take a look at this [1] wiki page
p

[1] http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti

From macwind2 at gmail.com  Wed Jun 27 06:52:19 2012
From: macwind2 at gmail.com (Mac Wind)
Date: Wed, 27 Jun 2012 15:52:19 +0200
Subject: [gdal-dev] Errors with ogr2ogr and DXF files (ASCII and BIN)
Message-ID: <CAEdUBOipaaNyuHwMP7hdh_xSuLu37qxEbffnV-TJHT3aH75vpQ@mail.gmail.com>

Hi.

Using OGR, I'm trying to reproject a DXF file. I'm using ogr2ogr, but
I get two type of errors depending if I start with a BIN DXF or an
ASCII DXF file.

With BIN DXF:

ogr2ogr -s_srs 27492.prj -t_srs 4326.prj myfile_WGS84.dxf myfile_BIN12.dxf

I get this error message:

FAILURE:
Unable to open datasource `myfile_BIN12.dxf' with the following drivers.
[+ the list of installed drivers, included DXF]

With ASCII DXF

ogr2ogr -s_srs 27492.prj -t_srs 4326.prj myfile_WGS84.dxf myfile_ASCII12.dxf

I get this error message:

FAILED: Layer entities already exists, and -append not specified.
        Consider using -append, or -overwrite.
ERROR 1: Terminating translation prematurely after failed
translation of layer entities (use -skipfailures to skip errors)

(effectively, 'entities' does exist, but this the expected situation, right?)

I don't know what I am doing wrong. I tried with different BIN and
ASCII versions (R13, R14, 2007, 2010), with the same errors.

Thank you very much in advance.

From jrepetto at free.fr  Wed Jun 27 07:09:50 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed, 27 Jun 2012 16:09:50 +0200
Subject: [gdal-dev] Errors with ogr2ogr and DXF files (ASCII and BIN)
In-Reply-To: <CAEdUBOipaaNyuHwMP7hdh_xSuLu37qxEbffnV-TJHT3aH75vpQ@mail.gmail.com>
References: <CAEdUBOipaaNyuHwMP7hdh_xSuLu37qxEbffnV-TJHT3aH75vpQ@mail.gmail.com>
Message-ID: <4FEB142E.3030403@free.fr>

Le 27/06/2012 15:52, Mac Wind a ?crit :
>
>
> With ASCII DXF
>
> ogr2ogr -s_srs 27492.prj -t_srs 4326.prj myfile_WGS84.dxf myfile_ASCII12.dxf
>
> I get this error message:
>
> FAILED: Layer entities already exists, and -append not specified.
>          Consider using -append, or -overwrite.
>

Try to remove the output file before executing the ogr2ogr command.

BTW, you have forgotten the -f "DXF" parameter.

Jean-Claude

From even.rouault at mines-paris.org  Wed Jun 27 07:10:04 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 27 Jun 2012 16:10:04 +0200
Subject: [gdal-dev] Errors with ogr2ogr and DXF files (ASCII and BIN)
In-Reply-To: <CAEdUBOipaaNyuHwMP7hdh_xSuLu37qxEbffnV-TJHT3aH75vpQ@mail.gmail.com>
References: <CAEdUBOipaaNyuHwMP7hdh_xSuLu37qxEbffnV-TJHT3aH75vpQ@mail.gmail.com>
Message-ID: <1340806204.4feb143cb423f@imp.free.fr>

Selon Mac Wind <macwind2 at gmail.com>:

> Hi.
>
> Using OGR, I'm trying to reproject a DXF file. I'm using ogr2ogr, but
> I get two type of errors depending if I start with a BIN DXF or an
> ASCII DXF file.
>
> With BIN DXF:
>
> ogr2ogr -s_srs 27492.prj -t_srs 4326.prj myfile_WGS84.dxf myfile_BIN12.dxf
>
> I get this error message:
>
> FAILURE:
> Unable to open datasource `myfile_BIN12.dxf' with the following drivers.
> [+ the list of installed drivers, included DXF]

Binary DXF is not supported.

>
> With ASCII DXF
>
> ogr2ogr -s_srs 27492.prj -t_srs 4326.prj myfile_WGS84.dxf myfile_ASCII12.dxf
>
> I get this error message:
>
> FAILED: Layer entities already exists, and -append not specified.
>         Consider using -append, or -overwrite.
> ERROR 1: Terminating translation prematurely after failed
> translation of layer entities (use -skipfailures to skip errors)
>
> (effectively, 'entities' does exist, but this the expected situation, right?)
>

You must explicitely specify the output driver with -f DXF (otherwise
And you must delete myfile_WGS84.dxf if it exists before.




From kedardeshpande87 at gmail.com  Wed Jun 27 11:36:03 2012
From: kedardeshpande87 at gmail.com (kedardeshpande87)
Date: Wed, 27 Jun 2012 11:36:03 -0700 (PDT)
Subject: [gdal-dev] Building from source on 64 bit environment
Message-ID: <1340822163395-4984334.post@n6.nabble.com>

Hi,

I am trying to build the gdal from source on a 64 bit RHEL5. I am also using
the swig bindings for Java.
But I am getting UnsatisfiedLinkError with the error cause as :
.../libogrjni.so: wrong ELF class: ELFCLASS64* (Possible cause: architecture
word width mismatch)*

Where can I set this option of 32/64 bit so as to run it on 64 bit linux
machine ? Is there any variable defined in any build file ?

Thanks,
Kedar


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Building-from-source-on-64-bit-environment-tp4984334.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Wed Jun 27 11:39:52 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 27 Jun 2012 20:39:52 +0200
Subject: [gdal-dev] Building from source on 64 bit environment
In-Reply-To: <1340822163395-4984334.post@n6.nabble.com>
References: <1340822163395-4984334.post@n6.nabble.com>
Message-ID: <201206272039.52435.even.rouault@mines-paris.org>

Le mercredi 27 juin 2012 20:36:03, kedardeshpande87 a ?crit :
> Hi,
> 
> I am trying to build the gdal from source on a 64 bit RHEL5. I am also
> using the swig bindings for Java.
> But I am getting UnsatisfiedLinkError with the error cause as :
> .../libogrjni.so: wrong ELF class: ELFCLASS64* (Possible cause:
> architecture word width mismatch)*
> 
> Where can I set this option of 32/64 bit so as to run it on 64 bit linux
> machine ? Is there any variable defined in any build file ?

Are you using a 64bit JVM with 64 bit data model ? The error message sounds 
like if the JVM is in 32 bits mode.

> 
> Thanks,
> Kedar
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Building-from-source-on-64-bit-environ
> ment-tp4984334.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ari.jolma at gmail.com  Wed Jun 27 11:40:16 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 27 Jun 2012 21:40:16 +0300
Subject: [gdal-dev] Motion to adopt the RFC 39
Message-ID: <4FEB5390.802@gmail.com>

Dear GDAL PSC,

Some time ago I and Even spent some time to work on a patch which would 
initially implement the RFC OGR Layer Algebra. The RFC proposes new API 
for GDAL 2.0. The RFC is at 
http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra

We believe the RFC and associated patch is now ready for approval.

I will now rise the status of the RFC from development to proposed and 
motion to adopt it.

Best regards,

Ari Jolma


From chapmanm at pixia.com  Wed Jun 27 12:09:40 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Wed, 27 Jun 2012 15:09:40 -0400 (EDT)
Subject: [gdal-dev] Motion to adopt the RFC 39
In-Reply-To: <4FEB5390.802@gmail.com>
References: <4FEB5390.802@gmail.com>
Message-ID: <ccf9e57f.00000a6c.0000000e@CHAPMANM7S>

Ari,

I really like the idea and your proposed functions.  I would like to
propose additional ideas:

1. In addition to the spatial operations also have the spatial predicates
like intersects, contains, within, etc...

2. Add an additional spatial predicate called IntersectsEvenOdd that uses
the even odd winding method for fast intersection.  The way geos does
intersects is really rigorous but too slow for rendering purposes.
IntersectsEvenOdd can be really useful when you just want to reduce the
number of geometries you render in your view.

3. Add support for mensuration such as calculating area or perimeter.
Maybe use GeographicLib for measurement in decimal degrees and simple
algorithms for planimetric calculations (when in projected space).  Have
enumerations for units such as metric units and us survey units.

4. Add a way to tag features in a layer to selected or unselected or
provide a linked list of feature ids so after a predicate operation is
completed you can iterate through the feature list and determine all the
features that intersected. 

Just some thoughts.

Best regards,
Martin
  

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org
[mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Ari Jolma
Sent: Wednesday, June 27, 2012 12:40 PM
To: 'gdal-dev'
Subject: [gdal-dev] Motion to adopt the RFC 39

Dear GDAL PSC,

Some time ago I and Even spent some time to work on a patch which would
initially implement the RFC OGR Layer Algebra. The RFC proposes new API
for GDAL 2.0. The RFC is at
http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra

We believe the RFC and associated patch is now ready for approval.

I will now rise the status of the RFC from development to proposed and
motion to adopt it.

Best regards,

Ari Jolma

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From kedardeshpande87 at gmail.com  Wed Jun 27 12:55:02 2012
From: kedardeshpande87 at gmail.com (kedardeshpande87)
Date: Wed, 27 Jun 2012 12:55:02 -0700 (PDT)
Subject: [gdal-dev] Building from source on 64 bit environment
In-Reply-To: <201206272039.52435.even.rouault@mines-paris.org>
References: <1340822163395-4984334.post@n6.nabble.com>
	<201206272039.52435.even.rouault@mines-paris.org>
Message-ID: <1340826902941-4984355.post@n6.nabble.com>

Thanks Even,

You were right. I was using the 32 bit JVM. Now I have avoided that error.
But now I am getting another weird unsatisfied linker error as :

java.lang.UnsatisfiedLinkError: .../gdal/build/.libs/libgdal.so.1: undefined
symbol: _ZTVN6PCIDSK15PCIDSKExceptionE

Any idea why I am getting this error ?

Thanks,
Kedar

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Building-from-source-on-64-bit-environment-tp4984334p4984355.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From lrssvtml at gmail.com  Thu Jun 28 01:11:22 2012
From: lrssvtml at gmail.com (Salvatore Larosa)
Date: Thu, 28 Jun 2012 10:11:22 +0200
Subject: [gdal-dev] [saga-gis-developer] the output image is cut to half
In-Reply-To: <4FEC0929.4090902@laserdata.at>
References: <1340731839.7435.11.camel@localhost>
	<4FEAAADC.5010205@laserdata.at> <1340788055.7435.21.camel@localhost>
	<4FEADD77.10504@laserdata.at> <1340803772.7435.39.camel@localhost>
	<4FEC0929.4090902@laserdata.at>
Message-ID: <1340871082.5000.7.camel@localhost>

I think this could be the cause of my problem with output saga images!

Any idea on how avoid libtiff version mismatch?
I refer at 1.9.1 version!

Il giorno gio, 28/06/2012 alle 09.35 +0200, Volker Wichmann ha scritto:
> Hi Salvatore,
> 
> On 06/27/2012 03:29 PM, Salvatore Larosa wrote:
> >> "Warning 1: libtiff version mismatch : You're linking against libtiff
> >> 3.X, but GDAL has been compiled against libtiff >= 4.0.0"
> >
> > Actually I have some problem with libtiff. I compiled gdal with external
> > libtiff I recompiled saga and now:
> >
> > # ldd libgdal.so | grep libtiff
> > 	libtiff.so.4 => /usr/lib/x86_64-linux-gnu/libtiff.so.4
> > (0x00007f46ec898000)
> >
> > # ldd libio_gdal.so | grep libtiff
> > 	libtiff.so.4 => /usr/lib/x86_64-linux-gnu/libtiff.so.4
> > (0x00007f07608ce000)
> >
> > both the versions are matching!
> > But I still get thr Warning message!


> 
> I think this is a GDAL issue, the message is actually printed from
> 
> ./frmts/gtiff/geotiff.cpp:                     "libtiff version mismatch 
> : You're linking against libtiff 3.X, but GDAL has been compiled against 
> libtiff >= 4.0.0");
> 
> In the file, line 9110, there is also a comment:
> 
> /* This is a frequent configuration error that is difficult to track down */
> /* for people unaware of the issue : GDAL built against internal libtiff 
> (4.X) */
> /* but used by an application that links with external libtiff (3.X) */
> /* Note: on my conf, the order that cause GDAL to crash - and that is 
> detected */
> /* by the following code - is "-ltiff -lgdal". "-lgdal -ltiff" works for 
> the */
> /* GTiff driver but probably breaks the application that believes it 
> uses libtiff 3.X */
> /* but we cannot detect that... */
> 
> 
> In the news file there are further hints:
> 
> ./NEWS: * Don't prevent from loading GTiff driver even if libtiff 
> version mismatch detected (#4101)
> ./NEWS: * Try to detect build-time vs runtime libtiff version mismatch 
> (*nix only)
> 
> 
> I would guess that you still observe this conflict,
> best regards,
> Volker
> 
> 
> ------------------------------------------------------------------------------
> Live Security Virtual Conference
> Exclusive live event will cover all the ways today's security and 
> threat landscape has changed and how IT managers can respond. Discussions 
> will include endpoint security, mobile security and the latest in malware 
> threats. http://www.accelacomm.com/jaw/sfrnl04242012/114/50122263/
> _______________________________________________
> saga-gis-developer mailing list
> saga-gis-developer at lists.sourceforge.net
> https://lists.sourceforge.net/lists/listinfo/saga-gis-developer

-- 
Salvatore Larosa
linkedIn: http://linkedin.com/in/larosasalvatore
twitter: @lrssvt
skype: s.larosa
IRC: lrssvt on freenode


From ivan.lucena at princeton-ma.us  Thu Jun 28 06:50:13 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu, 28 Jun 2012 08:50:13 -0500
Subject: [gdal-dev] =?iso-8859-1?q?building_plugin_in_Linux64?=
Message-ID: <20120628135013.4655.qmail@s466.sureserver.com>

Hi there,

I am trying to build a GDAL driver as a plugin in a Linux 64 environment and I am having a little bit of problem. Besides the fact that I don't' have my glasses today...

1. I run ./configure, make, make install without any problem. Everything works, the driver works just fine. But I need to build it as a plugin, so when I try to run "make plugin" on the driver folder the GNUmakefile crashes because the variable LD_SHARED is not defined. I did that several times before in Linux32 and never have that problem.

By looking at GDAL I can see:

LD_SHARED       =

That is kind of strange because the main GDAL shared library was created perfectly in the same environment. Don't it uses the same settings?

2. Then I add this to the command: 'make plugin -e LD_SHARED="gcc -shared"' what results in:

relocation R_X86_64_32 against `a local symbol' can not be used when making a shared object; recompile with -fPIC

Again, why do I need that if it was perfectly fine when I build that same driver into the GDAL shared library?

3. If I add the '-fPIC" to the compilation and run the gcc -shared again, I got the plugin built but when I run it it complains that it cannot find the first initialization function on the commercial shared library that the driver uses. It seems like a shared library architecture mismatch to me. I don't know.  

But again, that same driver works perfectly when build into the GDAL shared library, without any -fPIC at all.

Does anybody has a glue?

Thanks in advance,

Ivan
 

From even.rouault at mines-paris.org  Thu Jun 28 09:24:07 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 28 Jun 2012 18:24:07 +0200
Subject: [gdal-dev] Motion to adopt the RFC 39
In-Reply-To: <4FEB5390.802@gmail.com>
References: <4FEB5390.802@gmail.com>
Message-ID: <201206281824.07586.even.rouault@mines-paris.org>

Le mercredi 27 juin 2012 20:40:16, Ari Jolma a ?crit :
> Dear GDAL PSC,
> 
> Some time ago I and Even spent some time to work on a patch which would
> initially implement the RFC OGR Layer Algebra. The RFC proposes new API
> for GDAL 2.0. The RFC is at
> http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra
> 
> We believe the RFC and associated patch is now ready for approval.
> 
> I will now rise the status of the RFC from development to proposed and
> motion to adopt it.

+1

Even

From even.rouault at mines-paris.org  Thu Jun 28 09:36:03 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 28 Jun 2012 18:36:03 +0200
Subject: [gdal-dev] [saga-gis-developer] the output image is cut to half
In-Reply-To: <1340871082.5000.7.camel@localhost>
References: <1340731839.7435.11.camel@localhost>
	<4FEC0929.4090902@laserdata.at> <1340871082.5000.7.camel@localhost>
Message-ID: <201206281836.03133.even.rouault@mines-paris.org>

Le jeudi 28 juin 2012 10:11:22, Salvatore Larosa a ?crit :
> I think this could be the cause of my problem with output saga images!
> 
> Any idea on how avoid libtiff version mismatch?
> I refer at 1.9.1 version!

The ldd output indeed could explain a few things. Generally, in Linux distros, 
libtiff.so.4 is in fact libtiff 3.8.2 or libtiff 3.9.X (yes, the soname doesn't 
reflect the version number of libtiff). You should check in your distro which 
libtiff version it is exactly. So if my hypothesis is right, you have both 
internal libtiff (libtiff 4.0beta) compiled in libgdal, and libgdal is linking 
to external libtiff 3.X, hence the warning about version mismatch. When GDAL 
links against its internal libtiff version, it doesn't try to link to external 
libtiff of course. So, to explain your situation, an hypothesis would be that 
GDAL links against another library, which itself links against libtiff 3.X... 
Hope you have followed me ;-)

What you could try is rebuild GDAL, by specifying --with-rename-internal-
libtiff-symbols in the ./configure command line (and make clean; make)

> 
> Il giorno gio, 28/06/2012 alle 09.35 +0200, Volker Wichmann ha scritto:
> > Hi Salvatore,
> > 
> > On 06/27/2012 03:29 PM, Salvatore Larosa wrote:
> > >> "Warning 1: libtiff version mismatch : You're linking against libtiff
> > >> 3.X, but GDAL has been compiled against libtiff >= 4.0.0"
> > > 
> > > Actually I have some problem with libtiff. I compiled gdal with
> > > external libtiff I recompiled saga and now:
> > > 
> > > # ldd libgdal.so | grep libtiff
> > > 
> > > 	libtiff.so.4 => /usr/lib/x86_64-linux-gnu/libtiff.so.4
> > > 
> > > (0x00007f46ec898000)
> > > 
> > > # ldd libio_gdal.so | grep libtiff
> > > 
> > > 	libtiff.so.4 => /usr/lib/x86_64-linux-gnu/libtiff.so.4
> > > 
> > > (0x00007f07608ce000)
> > > 
> > > both the versions are matching!
> > > But I still get thr Warning message!
> > 
> > I think this is a GDAL issue, the message is actually printed from
> > 
> > ./frmts/gtiff/geotiff.cpp:                     "libtiff version mismatch
> > 
> > : You're linking against libtiff 3.X, but GDAL has been compiled against
> > 
> > libtiff >= 4.0.0");
> > 
> > In the file, line 9110, there is also a comment:
> > 
> > /* This is a frequent configuration error that is difficult to track down
> > */ /* for people unaware of the issue : GDAL built against internal
> > libtiff (4.X) */
> > /* but used by an application that links with external libtiff (3.X) */
> > /* Note: on my conf, the order that cause GDAL to crash - and that is
> > detected */
> > /* by the following code - is "-ltiff -lgdal". "-lgdal -ltiff" works for
> > the */
> > /* GTiff driver but probably breaks the application that believes it
> > uses libtiff 3.X */
> > /* but we cannot detect that... */
> > 
> > 
> > In the news file there are further hints:
> > 
> > ./NEWS: * Don't prevent from loading GTiff driver even if libtiff
> > version mismatch detected (#4101)
> > ./NEWS: * Try to detect build-time vs runtime libtiff version mismatch
> > (*nix only)
> > 
> > 
> > I would guess that you still observe this conflict,
> > best regards,
> > Volker
> > 
> > 
> > -------------------------------------------------------------------------
> > ----- Live Security Virtual Conference
> > Exclusive live event will cover all the ways today's security and
> > threat landscape has changed and how IT managers can respond. Discussions
> > will include endpoint security, mobile security and the latest in malware
> > threats. http://www.accelacomm.com/jaw/sfrnl04242012/114/50122263/
> > _______________________________________________
> > saga-gis-developer mailing list
> > saga-gis-developer at lists.sourceforge.net
> > https://lists.sourceforge.net/lists/listinfo/saga-gis-developer

From chaitanya.ch at gmail.com  Thu Jun 28 10:15:02 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu, 28 Jun 2012 22:45:02 +0530
Subject: [gdal-dev] how to store a shapefile afterobtaining from
 intersection of two different shapeFiles
In-Reply-To: <CAP-zkzcX+OtGRAScCH9b_vTV7biEB7ZyEgMAYYJqUoBYfaihhA@mail.gmail.com>
References: <CAP-zkzdjTdzE=qaX8Ywn33DQb5A_mNQ4ESE4hE3=n-=44zvJrw@mail.gmail.com>
	<CAMKgpOaW1TSkoQ2NagoSQdcQZRmRAAVOwsVFSH+qTRZR31mfSw@mail.gmail.com>
	<CAP-zkzc6Ps6tJBUpr_Uh7OuHMEiypJdJ=xTqO-BAAr_Y8iZb=A@mail.gmail.com>
	<CAMKgpOYZHYfRh6RkQd67_Lm8Cuw7f3DabJ-tHXYZh6OEq+4q3Q@mail.gmail.com>
	<CAP-zkzf-7Q-gg1SwNb2WUA_fDHF1WwbgGmGi3yLFqjh6XKzyQw@mail.gmail.com>
	<CAMKgpOZr=BC390BDhM+9ejMEjJK5L2sP2uKfuTLt_7AAO+E59w@mail.gmail.com>
	<CAP-zkzecxz=nHPPpPpzTgi6F0pEssJW6MiEmZAj6aaVEoBh=7A@mail.gmail.com>
	<CAMKgpObBE=4fmGYWun9e4JGrvKD22hfOwu3vEUc1nY_Vk-bi9A@mail.gmail.com>
	<CAP-zkzenRGZM_Xh3oppVHr4iCm_BpkF+tpL6XESS5Q_Y_fCGuQ@mail.gmail.com>
	<CAP-zkzcsRDAdeJXMzYuvQWxn=nPUn0ftwo8wLDvaL0VbVpNipw@mail.gmail.com>
	<CAMKgpOb-drkELNHS_PJ1+VACwTKj7Q0-ZuympmveWLfgRnUWrg@mail.gmail.com>
	<CAP-zkzcX+OtGRAScCH9b_vTV7biEB7ZyEgMAYYJqUoBYfaihhA@mail.gmail.com>
Message-ID: <CAMKgpObNtMJvV9ZaSpFEZTt=wPuFni+0pTD4nmj9H7HU+EQWNQ@mail.gmail.com>

Siva,

The library if not adding the single quote character. Check if you have the
file at that location and that you have permissions to read that file.

On Thu, Jun 28, 2012 at 3:15 PM, SIVA RAMA KRISHNA
<s.r.kriishna at gmail.com>wrote:

> hai chaintanya,
>
>   I am using following code to Save a Contour . I am opening a dialogBox
> and passing the values from it to another Class with the following code
> void code::SetInterval(int Intr)
> {
>
>     Interval =Intr;
>
> }
>
> void code::SetSrcFileName( QString& SrcFname)
> {
>
>
>     SrcFileName=SrcFname;
>
>
> }
> void code::SetDestinationFileName(QString& DstFname)
> {
>     DstFileName=DstFname;
> //    qDebug()<<"destnation"<<DstFname;
> //    qDebug()<<"destination"<<DstFileName;
>
>
> }
>
> void code::Execute()   {    GDALAllRegister();    OGRRegisterAll();     qDebug()<<" in Execute source"<<SrcFileName; // this value is obtained from dialog box     qDebug()<<" in Execute destination"<<DstFileName;//this value is obtained from dialog box
>      int b3D = FALSE, bNoDataSet = FALSE, bIgnoreNoData = FALSE;    int nBandIn = 1;    double dfInterval = 0.0, dfNoData = 0.0, dfOffset = 0.0;    char *pszSrcFilename = NULL;     char *pszDstFilename =NULL;    const char *pszElevAttrib = NULL;    const char *pszFormat = "ESRI Shapefile";    double adfFixedLevels[1000];    int    nFixedLevelCount = 0;    int slen;    int dlen;     pszSrcFilename=new char[SrcFileName.size()+1];     pszDstFilename=new char[DstFileName.size()];    const char *DstFileName1=DstFileName.toLatin1().data();    const char *SrcFileName1=SrcFileName.toLatin1().data();
>     slen=strlen(SrcFileName1);    dlen=strlen(DstFileName1);    qDebug()<<slen;    qDebug()<<dlen;     strncpy(pszSrcFilename,SrcFileName.toLatin1().data(),slen );     strncpy(pszDstFilename,DstFileName.toLatin1().data(),dlen);    qDebug()<<"sourceFileName"<<pszSrcFilename;    qDebug()<<"DestinationFileName"<<pszDstFilename;    hSrcDS = (GDALDatasetH *) GDALOpen( pszSrcFilename, GA_ReadOnly );    if( hSrcDS == NULL )        exit( 2 );
>
>
>  }
>
> I am getting problem while opening through hrscDs with the following Error
> when i am opening File an extra character  ' getting addded to
> pszsourcename unabling to OPen
> ERROR 4: `/home/support/Images/DEM/adair.dem' does not exist in the file
> system,
>
> qDebug()<<"sourceFileName"<<pszSrcFilename;    qDebug()<<"DestinationFileName"<<pszDstFilename;
>
> this statements  are giving correct Names
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>> With Regards
>>>
>>>>  siva
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
> Hai Chaitanya,
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120628/fec2468e/attachment-0001.html>

From warmerdam at pobox.com  Thu Jun 28 10:22:02 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 28 Jun 2012 10:22:02 -0700
Subject: [gdal-dev] Motion to adopt the RFC 39
In-Reply-To: <4FEB5390.802@gmail.com>
References: <4FEB5390.802@gmail.com>
Message-ID: <CA+YzLBed_jAr_DonXPjH-DWbtU_tuUfSq-wiqQcbUcwV23BDwA@mail.gmail.com>

Ari,

Sorry for not getting more involved.  I skimmed through the patch and
all looks good.  I would like to have seen the core operations
actually defined (with APIs) in the RFC document but that is a
quibble.  Great work!

+1 Frank

On Wed, Jun 27, 2012 at 11:40 AM, Ari Jolma <ari.jolma at gmail.com> wrote:
> Dear GDAL PSC,
>
> Some time ago I and Even spent some time to work on a patch which would
> initially implement the RFC OGR Layer Algebra. The RFC proposes new API for
> GDAL 2.0. The RFC is at
> http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra
>
> We believe the RFC and associated patch is now ready for approval.
>
> I will now rise the status of the RFC from development to proposed and
> motion to adopt it.
>
> Best regards,
>
> Ari Jolma
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer

From kedardeshpande87 at gmail.com  Thu Jun 28 11:19:51 2012
From: kedardeshpande87 at gmail.com (kedardeshpande87)
Date: Thu, 28 Jun 2012 11:19:51 -0700 (PDT)
Subject: [gdal-dev] Error while building gdal source code with Swig Java
Message-ID: <1340907591761-4984659.post@n6.nabble.com>

Hi,

I am trying to build the source with the swig bindings
I am running it on RHEL5 64 bit.
I ran the 'configure', 'make' and 'make install' from the gdal
directory.This runs successfully and creates ligdal.so files
For java, I go into gdal/swig/java and run the 'make' command. I am getting
the following error while building it :

In file included from
/usr/lib/gcc/x86_64-redhat-linux/4.1.2/include/jni.h:52,
                 from gdalconst_wrap.c:121:
*/usr/lib/gcc/x86_64-redhat-linux/4.1.2/include/jni_md.h:30:31: error:
gcj/libgcj-config.h: No such file or directory*
make[1]: *** [gdalconst_wrap.lo] Error 1
...

I verified the location /usr/lib/gcc/x86_64-redhat-linux/4.1.2/include/gcj/
and found that the file *does exist*

Did anyone come across such an error ? What could be the reason I am getting
this error ?

Thanks,
Kedar


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Error-while-building-gdal-source-code-with-Swig-Java-tp4984659.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From hobu.inc at gmail.com  Thu Jun 28 12:19:13 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu, 28 Jun 2012 14:19:13 -0500
Subject: [gdal-dev] Motion to adopt the RFC 39
In-Reply-To: <CA+YzLBed_jAr_DonXPjH-DWbtU_tuUfSq-wiqQcbUcwV23BDwA@mail.gmail.com>
References: <4FEB5390.802@gmail.com>
	<CA+YzLBed_jAr_DonXPjH-DWbtU_tuUfSq-wiqQcbUcwV23BDwA@mail.gmail.com>
Message-ID: <E7240EE4-E6DE-414B-A39A-3C4A888F66A1@gmail.com>


On Jun 28, 2012, at 12:22 PM, Frank Warmerdam wrote:
> +1 Frank

:shipit:

+1 Howard


From lrssvtml at gmail.com  Thu Jun 28 14:10:45 2012
From: lrssvtml at gmail.com (Salvatore Larosa)
Date: Thu, 28 Jun 2012 23:10:45 +0200
Subject: [gdal-dev] [saga-gis-developer] the output image is cut to half
In-Reply-To: <201206281836.03133.even.rouault@mines-paris.org>
References: <1340731839.7435.11.camel@localhost>
	<4FEC0929.4090902@laserdata.at> <1340871082.5000.7.camel@localhost>
	<201206281836.03133.even.rouault@mines-paris.org>
Message-ID: <1340917845.2588.11.camel@localhost>

Hi Even,

Il giorno gio, 28/06/2012 alle 18.36 +0200, Even Rouault ha scritto:
> Le jeudi 28 juin 2012 10:11:22, Salvatore Larosa a ?crit :
> > I think this could be the cause of my problem with output saga images!
> > 
> > Any idea on how avoid libtiff version mismatch?
> > I refer at 1.9.1 version!
> 
> The ldd output indeed could explain a few things. Generally, in Linux distros, 
> libtiff.so.4 is in fact libtiff 3.8.2 or libtiff 3.9.X (yes, the soname doesn't 
> reflect the version number of libtiff). You should check in your distro which 
> libtiff version it is exactly. So if my hypothesis is right, you have both 
> internal libtiff (libtiff 4.0beta) compiled in libgdal, and libgdal is linking 
> to external libtiff 3.X, hence the warning about version mismatch. When GDAL 
> links against its internal libtiff version, it doesn't try to link to external 
> libtiff of course. So, to explain your situation, an hypothesis would be that 
> GDAL links against another library, which itself links against libtiff 3.X... 
> Hope you have followed me ;-)
> 
> What you could try is rebuild GDAL, by specifying --with-rename-internal-
> libtiff-symbols in the ./configure command line (and make clean; make)

Yep, great hint, it has worked!

Thanks a lot!

All the best!

-SL

> > 
> > Il giorno gio, 28/06/2012 alle 09.35 +0200, Volker Wichmann ha scritto:
> > > Hi Salvatore,
> > > 
> > > On 06/27/2012 03:29 PM, Salvatore Larosa wrote:
> > > >> "Warning 1: libtiff version mismatch : You're linking against libtiff
> > > >> 3.X, but GDAL has been compiled against libtiff >= 4.0.0"
> > > > 
> > > > Actually I have some problem with libtiff. I compiled gdal with
> > > > external libtiff I recompiled saga and now:
> > > > 
> > > > # ldd libgdal.so | grep libtiff
> > > > 
> > > > 	libtiff.so.4 => /usr/lib/x86_64-linux-gnu/libtiff.so.4
> > > > 
> > > > (0x00007f46ec898000)
> > > > 
> > > > # ldd libio_gdal.so | grep libtiff
> > > > 
> > > > 	libtiff.so.4 => /usr/lib/x86_64-linux-gnu/libtiff.so.4
> > > > 
> > > > (0x00007f07608ce000)
> > > > 
> > > > both the versions are matching!
> > > > But I still get thr Warning message!
> > > 
> > > I think this is a GDAL issue, the message is actually printed from
> > > 
> > > ./frmts/gtiff/geotiff.cpp:                     "libtiff version mismatch
> > > 
> > > : You're linking against libtiff 3.X, but GDAL has been compiled against
> > > 
> > > libtiff >= 4.0.0");
> > > 
> > > In the file, line 9110, there is also a comment:
> > > 
> > > /* This is a frequent configuration error that is difficult to track down
> > > */ /* for people unaware of the issue : GDAL built against internal
> > > libtiff (4.X) */
> > > /* but used by an application that links with external libtiff (3.X) */
> > > /* Note: on my conf, the order that cause GDAL to crash - and that is
> > > detected */
> > > /* by the following code - is "-ltiff -lgdal". "-lgdal -ltiff" works for
> > > the */
> > > /* GTiff driver but probably breaks the application that believes it
> > > uses libtiff 3.X */
> > > /* but we cannot detect that... */
> > > 
> > > 
> > > In the news file there are further hints:
> > > 
> > > ./NEWS: * Don't prevent from loading GTiff driver even if libtiff
> > > version mismatch detected (#4101)
> > > ./NEWS: * Try to detect build-time vs runtime libtiff version mismatch
> > > (*nix only)
> > > 
> > > 
> > > I would guess that you still observe this conflict,
> > > best regards,
> > > Volker
> > > 
> > > 
> > > -------------------------------------------------------------------------
> > > ----- Live Security Virtual Conference
> > > Exclusive live event will cover all the ways today's security and
> > > threat landscape has changed and how IT managers can respond. Discussions
> > > will include endpoint security, mobile security and the latest in malware
> > > threats. http://www.accelacomm.com/jaw/sfrnl04242012/114/50122263/
> > > _______________________________________________
> > > saga-gis-developer mailing list
> > > saga-gis-developer at lists.sourceforge.net
> > > https://lists.sourceforge.net/lists/listinfo/saga-gis-developer

-- 
Salvatore Larosa
linkedIn: http://linkedin.com/in/larosasalvatore
twitter: @lrssvt
skype: s.larosa
IRC: lrssvt on freenode


From szekerest at gmail.com  Thu Jun 28 14:30:27 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 28 Jun 2012 23:30:27 +0200
Subject: [gdal-dev] Motion to adopt the RFC 39
In-Reply-To: <4FEB5390.802@gmail.com>
References: <4FEB5390.802@gmail.com>
Message-ID: <CACALY+SwjDsz7L9O8a-NYiLqNogZRKWUwCZuf9nQDYu0b0EJHA@mail.gmail.com>

+1

Tamas


2012/6/27 Ari Jolma <ari.jolma at gmail.com>

> Dear GDAL PSC,
>
> Some time ago I and Even spent some time to work on a patch which would
> initially implement the RFC OGR Layer Algebra. The RFC proposes new API for
> GDAL 2.0. The RFC is at http://trac.osgeo.org/gdal/**
> wiki/rfc39_ogr_layer_algebra<http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra>
>
> We believe the RFC and associated patch is now ready for approval.
>
> I will now rise the status of the RFC from development to proposed and
> motion to adopt it.
>
> Best regards,
>
> Ari Jolma
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120628/2baee676/attachment.html>

From rigal at rapideye.net  Fri Jun 29 03:09:17 2012
From: rigal at rapideye.net (Matthieu Rigal)
Date: Fri, 29 Jun 2012 12:09:17 +0200
Subject: [gdal-dev] Possibility to add a MorphFromESRI-like feature to
	gdalwarp ?
Message-ID: <CAH7Xw_WFjoS-QMN48F7Bja4j7e6WKGErHkYnTERzHLi_5p6Ycw@mail.gmail.com>

Hi guys,

When asking gdalwarp to warp from a WKT projection generated by ESRI, it
will fail when attempting to convert it to Proj4 (ex: Lambert_Conform_Conic
projections).

Wouldn't it be possible to integrate some check/transformation like the one
done in Python here :
http://nullege.com/codes/search/osgeo.osr.SpatialReference.MorphFromESRI

Sorry, I am not a C++ dev and I won't be able to contribute...

Regards,
Matthieu

-- 
RapidEye AG
Molkenmarkt 30
14776 Brandenburg an der Havel
Germany
 
Follow us on Twitter! www.twitter.com/rapideye_global
 
Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
Management Board/Vorstand: Ryan Johnson
Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: Robert 
Johnson
Commercial Register/Handelsregister Potsdam HRB 24742 P
Tax Number/Steuernummer: 048/100/00320
VAT-Ident-Number/Ust.-ID: DE 815303842
DIN EN ISO 9001 certified
 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120629/149c9329/attachment.html>

From robbkwright at gmail.com  Fri Jun 29 05:12:30 2012
From: robbkwright at gmail.com (Robb K. Wright)
Date: Fri, 29 Jun 2012 08:12:30 -0400
Subject: [gdal-dev] Using OGR to modify shapefile field values
Message-ID: <4FED9BAE.40702@gmail.com>


1) I am looking for a way to use ogr command-line utilities to modify 
the contents of fields within a shapefile. It isn?t a problem to modify 
one step at a time/put in a loop where each change creates a new output 
? that is manageable ? but I?m missing the SQL statement to say ?if 
FIELDX=?abc?, then FIELDB=?123?. I could use the select statement to 
pull out only the records where FIELDX=?abc? (+ other statements, then 
merge back), but how to I set FIELDB=?123??

2) As an extension to the above question, I?d like to modify the values 
based on a time statement ? something along the lines of ?if DATE_FIELD 
is = (CURDATE ? 1), then FIELDX=?24h??. Can these SQL date queries be 
made through OGR?

3) The above questions aren't really gdal development questions - is 
there a more appropriate forum to submit these ?use? questions?

Robb

From dmorissette at mapgears.com  Fri Jun 29 05:32:29 2012
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri, 29 Jun 2012 08:32:29 -0400
Subject: [gdal-dev] Motion to adopt the RFC 39
In-Reply-To: <4FEB5390.802@gmail.com>
References: <4FEB5390.802@gmail.com>
Message-ID: <4FEDA05D.1000306@mapgears.com>

On 12-06-27 2:40 PM, Ari Jolma wrote:
> Dear GDAL PSC,
>
> Some time ago I and Even spent some time to work on a patch which would
> initially implement the RFC OGR Layer Algebra. The RFC proposes new API
> for GDAL 2.0. The RFC is at
> http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra
>
> We believe the RFC and associated patch is now ready for approval.
>
> I will now rise the status of the RFC from development to proposed and
> motion to adopt it.
>

+1

Note that I think some good docs and usage examples with pictures will 
be required for dumb people like me to really understand what each 
operator really does and how to use them. Perhaps a ref to 
http://courses.washington.edu/gis250/lessons/Model_Builder/ might help, 
but then it would have to be included in the API docs and not just in 
the RFC.

-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000




From etourigny.dev at gmail.com  Fri Jun 29 06:30:40 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 29 Jun 2012 10:30:40 -0300
Subject: [gdal-dev] Possibility to add a MorphFromESRI-like feature to
 gdalwarp ?
In-Reply-To: <CAH7Xw_WFjoS-QMN48F7Bja4j7e6WKGErHkYnTERzHLi_5p6Ycw@mail.gmail.com>
References: <CAH7Xw_WFjoS-QMN48F7Bja4j7e6WKGErHkYnTERzHLi_5p6Ycw@mail.gmail.com>
Message-ID: <CA+TxYvMXY49O38uztsapvGuaEmeapQbngZNemf0VY+2SravySA@mail.gmail.com>

As referenced in SetFromUserInput [1] you can force a morphFromESRI by
prefixing a WKT definition (file or WKT string) with "ESRI::"
I'm pretty sure that gdalwarp uses SetFromUserInput to get the SRS definition.

[1] http://www.gdal.org/ogr/classOGRSpatialReference.html#aec3c6a49533fe457ddc763d699ff8796

On Fri, Jun 29, 2012 at 7:09 AM, Matthieu Rigal <rigal at rapideye.net> wrote:
> Hi guys,
>
> When asking gdalwarp to warp from a WKT projection generated by ESRI, it
> will fail when attempting to convert it to Proj4 (ex: Lambert_Conform_Conic
> projections).
>
> Wouldn't it be possible to integrate some check/transformation like the one
> done in Python here :
> http://nullege.com/codes/search/osgeo.osr.SpatialReference.MorphFromESRI
>
> Sorry, I am not a C++ dev and I won't be able to contribute...
>
> Regards,
> Matthieu
>
> RapidEye AG
> Molkenmarkt 30
> 14776 Brandenburg an der Havel
> Germany
>
> Follow us on Twitter! www.twitter.com/rapideye_global
>
> Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
> Management Board/Vorstand: Ryan Johnson
> Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: Robert
> Johnson
> Commercial Register/Handelsregister Potsdam HRB 24742 P
> Tax Number/Steuernummer: 048/100/00320
> VAT-Ident-Number/Ust.-ID: DE 815303842
> DIN EN ISO 9001 certified
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From rigal at rapideye.net  Fri Jun 29 07:03:58 2012
From: rigal at rapideye.net (Matthieu Rigal)
Date: Fri, 29 Jun 2012 16:03:58 +0200
Subject: [gdal-dev] Possibility to add a MorphFromESRI-like feature to
 gdalwarp ?
In-Reply-To: <CA+TxYvMXY49O38uztsapvGuaEmeapQbngZNemf0VY+2SravySA@mail.gmail.com>
References: <CAH7Xw_WFjoS-QMN48F7Bja4j7e6WKGErHkYnTERzHLi_5p6Ycw@mail.gmail.com>
	<CA+TxYvMXY49O38uztsapvGuaEmeapQbngZNemf0VY+2SravySA@mail.gmail.com>
Message-ID: <CAH7Xw_U2RxEq1jTxfy-12op8gddqso2v0HROqFVvn=Dy_xKR=Q@mail.gmail.com>

Brilliant ! I am sorry, I had never seen that possibility. But it works
perfectly.

Thanks again Etienne,

Matthieu

On Fri, Jun 29, 2012 at 3:30 PM, Etienne Tourigny
<etourigny.dev at gmail.com>wrote:

> As referenced in SetFromUserInput [1] you can force a morphFromESRI by
> prefixing a WKT definition (file or WKT string) with "ESRI::"
> I'm pretty sure that gdalwarp uses SetFromUserInput to get the SRS
> definition.
>
> [1]
> http://www.gdal.org/ogr/classOGRSpatialReference.html#aec3c6a49533fe457ddc763d699ff8796
>
> On Fri, Jun 29, 2012 at 7:09 AM, Matthieu Rigal <rigal at rapideye.net>
> wrote:
> > Hi guys,
> >
> > When asking gdalwarp to warp from a WKT projection generated by ESRI, it
> > will fail when attempting to convert it to Proj4 (ex:
> Lambert_Conform_Conic
> > projections).
> >
> > Wouldn't it be possible to integrate some check/transformation like the
> one
> > done in Python here :
> > http://nullege.com/codes/search/osgeo.osr.SpatialReference.MorphFromESRI
> >
> > Sorry, I am not a C++ dev and I won't be able to contribute...
> >
> > Regards,
> > Matthieu
> >
>

-- 
RapidEye AG
Molkenmarkt 30
14776 Brandenburg an der Havel
Germany
 
Follow us on Twitter! www.twitter.com/rapideye_global
 
Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
Management Board/Vorstand: Ryan Johnson
Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: Robert 
Johnson
Commercial Register/Handelsregister Potsdam HRB 24742 P
Tax Number/Steuernummer: 048/100/00320
VAT-Ident-Number/Ust.-ID: DE 815303842
DIN EN ISO 9001 certified
 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120629/24ef073c/attachment-0001.html>

From etourigny.dev at gmail.com  Fri Jun 29 07:08:41 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 29 Jun 2012 11:08:41 -0300
Subject: [gdal-dev] Possibility to add a MorphFromESRI-like feature to
 gdalwarp ?
In-Reply-To: <CAH7Xw_U2RxEq1jTxfy-12op8gddqso2v0HROqFVvn=Dy_xKR=Q@mail.gmail.com>
References: <CAH7Xw_WFjoS-QMN48F7Bja4j7e6WKGErHkYnTERzHLi_5p6Ycw@mail.gmail.com>
	<CA+TxYvMXY49O38uztsapvGuaEmeapQbngZNemf0VY+2SravySA@mail.gmail.com>
	<CAH7Xw_U2RxEq1jTxfy-12op8gddqso2v0HROqFVvn=Dy_xKR=Q@mail.gmail.com>
Message-ID: <CA+TxYvP+EOCPtxKmeJB+TY=Tz6__17Cq0kGUioetOkYviU+e2Q@mail.gmail.com>

It's a shame that it's not done automatically, but it's hard to
differentiate ESRI WKT definitions from OGC ones without searching all
parameters for known ESRI keywords.

However, if the WKT is inside a .prj file (as part of a shapefile), I
think the OGR Shapefile driver does do the morphFromESRI automatically

On Fri, Jun 29, 2012 at 11:03 AM, Matthieu Rigal <rigal at rapideye.net> wrote:
> Brilliant ! I am sorry, I had never seen that possibility. But it works
> perfectly.
>
> Thanks again Etienne,
>
> Matthieu
>
>
> On Fri, Jun 29, 2012 at 3:30 PM, Etienne Tourigny <etourigny.dev at gmail.com>
> wrote:
>>
>> As referenced in SetFromUserInput [1] you can force a morphFromESRI by
>> prefixing a WKT definition (file or WKT string) with "ESRI::"
>> I'm pretty sure that gdalwarp uses SetFromUserInput to get the SRS
>> definition.
>>
>> [1]
>> http://www.gdal.org/ogr/classOGRSpatialReference.html#aec3c6a49533fe457ddc763d699ff8796
>>
>> On Fri, Jun 29, 2012 at 7:09 AM, Matthieu Rigal <rigal at rapideye.net>
>> wrote:
>> > Hi guys,
>> >
>> > When asking gdalwarp to warp from a WKT projection generated by ESRI, it
>> > will fail when attempting to convert it to Proj4 (ex:
>> > Lambert_Conform_Conic
>> > projections).
>> >
>> > Wouldn't it be possible to integrate some check/transformation like the
>> > one
>> > done in Python here :
>> > http://nullege.com/codes/search/osgeo.osr.SpatialReference.MorphFromESRI
>> >
>> > Sorry, I am not a C++ dev and I won't be able to contribute...
>> >
>> > Regards,
>> > Matthieu
>> >
>
>
>
> RapidEye AG
> Molkenmarkt 30
> 14776 Brandenburg an der Havel
> Germany
>
> Follow us on Twitter! www.twitter.com/rapideye_global
>
> Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
> Management Board/Vorstand: Ryan Johnson
> Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: Robert
> Johnson
> Commercial Register/Handelsregister Potsdam HRB 24742 P
> Tax Number/Steuernummer: 048/100/00320
> VAT-Ident-Number/Ust.-ID: DE 815303842
> DIN EN ISO 9001 certified
>
>

