From even.rouault at mines-paris.org  Sun Jan  1 11:30:57 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jan  1 11:30:57 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
In-Reply-To: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
References: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
Message-ID: <201201011730.58471.even.rouault@mines-paris.org>

Le dimanche 01 janvier 2012 02:38:00, Frank Warmerdam a ?crit :
> Motion: To promote the GDAL/OGR 1.9.0RC1 release candidate as
>             the final GDAL/OGR 1.9.0 release.
> 

I've managed to compile it (or the betas) on a variety of Unixes (CentOS 6.2, 
Ubuntu 11.10, FreeBSD 8.0, NetBSD 5, OpenBSD 4.5, Solaris 10 and 11, Debian 
Lenny on a big-endian host) and things seem to be in good shape.

Has anyone tested on MacOS X ?

The only regression I've found so far is in the Rasterlite driver ( fixed in 
http://trac.osgeo.org/gdal/ticket/4413 ). It was hidden by another problem in 
the lastest libspatialite3.0.0 that was exhibited by the GDAL autotests. But I 
don't think it justifies another RC per se.

*Last minute* : I've just tested with CentOS 4.7 and CentOS 5.6 and I've found 
a compilation problem with the sqlite driver (and in the GML driver when 
sqlite3 support is available). Those 2 OS ship with sqlite 3.3.6, but we now 
use various methods that weren't yet available. This is now fixed in trunk and 
1.9 branch (see http://trac.osgeo.org/gdal/ticket/4418 for details ). Not sure 
if it is worth a RC2.

Best regards,

Even
From even.rouault at mines-paris.org  Sun Jan  1 13:08:31 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jan  1 13:08:39 2012
Subject: [gdal-dev] Re: [SpatiaLite-Users] Spatialite_gml tool and Inspire
	Administrative units dataset
In-Reply-To: <3c09654e-7f36-4556-b547-d26ab8197e5a@v13g2000yqc.googlegroups.com>
References: <3c09654e-7f36-4556-b547-d26ab8197e5a@v13g2000yqc.googlegroups.com>
Message-ID: <201201011908.31751.even.rouault@mines-paris.org>

Le dimanche 01 janvier 2012 15:27:34, Jukka Rahkonen a ?crit :
> Hi,
> 
> I have been playing with a datasets that follows the Inspire
> definitions for the Administrative Units data set.  Data are in GML
> 3.2 format and the dataset contain administrative units both as
> polygons and linestrings. In addition, also the reference points for
> the administrational units are present. So there are three layers all
> together.
> 
> FME can find all the layers without problems. GDAL v 1.9.0 is also
> doing rather good work and ogr2ogr finds the polygon layer and
> linestring layer and can convert data for example into Spatialite
> format.

You can also fetch the reference points, but it is a bit more involved since 
OGR has not native support for multiple geometries per layer. In the case the 
GML parser finds several GML geometry elements for a single feature, it only 
reports the last one (arbitrary choice, but based on experience it is often 
the most interesting one...)

There are 2 different ways of doing this :

1) Remove inspire_au.gfs that has been generated previously and run "ogrinfo 
inspire_au_bak.xml --config GML_FETCH_ALL_GEOMETRIES YES". This option isn't 
really documented as it is a bit experimental, but seems to work with your 
file. The resulting AdministrativeUnit layer will have geometries of type 
GEOMETRYCOLLECTION. The first element of the geometry collection will be a 
MULTIPOINT with the reference points, and the second element the MULTIPOLYGON 
with the area of the unit. A bit of further processing would then be needed to 
split the 2 components. For example :

# fetch the points and polygons into a single geometrycollection, and split it 
immediately in 2 features, one with the points, the other with the polygons
$ ogr2ogr AdministrativeUnit.sqlite inspire_au.xml -explodecollections -f 
SQLite -dsco SPATIALITE=YES --config GML_FETCH_ALL_GEOMETRIES YES 
AdministrativeUnit

# extract the points
$ ogr2ogr AdministrativeUnit_points.sqlite AdministrativeUnit.sqlite  -f 
SQLite -dsco SPATIALITE=YES  -sql "select * from administrativeunit where 
OGR_GEOMETRY = 'MULTIPOINT' or OGR_GEOMETRY = 'POINT'" -dialect OGRSQL -nln 
AdministrativeUnit_points

# extract the polygons
$ ogr2ogr AdministrativeUnit_polygons.sqlite AdministrativeUnit.sqlite  -f 
SQLite -dsco SPATIALITE=YES  -sql "select * from administrativeunit where 
OGR_GEOMETRY = 'MULTIPOLYGON' or OGR_GEOMETRY = 'POLYGON'" -dialect OGRSQL -
nln AdministrativeUnit_polygons

2) Or edit the inspire_au.gfs that is generated by a normal run of ogrinfo to 
add the <GeometryType> and <GeometryElementPath> elements in the definition of 
the AdministrativeUnit class, so it looks like :

<GMLFeatureClassList>
  <GMLFeatureClass>
    <Name>AdministrativeUnit</Name>
    <ElementPath>AdministrativeUnit</ElementPath>
    <GeometryType>4</GeometryType> <!-- multipoint -->
    <GeometryElementPath>location</GeometryElementPath> <!-- 'location' 
contains the reference points -->
    <SRSName>EPSG:3067</SRSName>
[...]


The next run of ogrinfo will report the reference points in the 
AdministrativeUnit layer. It is however impossible currently to get both the 
points and the polygon in a single run.

From etourigny.dev at gmail.com  Sun Jan  1 20:00:47 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun Jan  1 20:01:27 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
In-Reply-To: <201201011730.58471.even.rouault@mines-paris.org>
References: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
	<201201011730.58471.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvO+HCg3NFY9a==OVU5o2V7E+tEmCT6RyYXqGSWpKVbwXA@mail.gmail.com>

What is the status of Windows 32-bit and 64-bit ?  Have they been
tested outside of Tamas' build bot?

best wishes for 2012,
Etienne

On Sun, Jan 1, 2012 at 1:30 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le dimanche 01 janvier 2012 02:38:00, Frank Warmerdam a ?crit :
>> Motion: To promote the GDAL/OGR 1.9.0RC1 release candidate as
>> ? ? ? ? ? ? the final GDAL/OGR 1.9.0 release.
>>
>
> I've managed to compile it (or the betas) on a variety of Unixes (CentOS 6.2,
> Ubuntu 11.10, FreeBSD 8.0, NetBSD 5, OpenBSD 4.5, Solaris 10 and 11, Debian
> Lenny on a big-endian host) and things seem to be in good shape.
>
> Has anyone tested on MacOS X ?
>
> The only regression I've found so far is in the Rasterlite driver ( fixed in
> http://trac.osgeo.org/gdal/ticket/4413 ). It was hidden by another problem in
> the lastest libspatialite3.0.0 that was exhibited by the GDAL autotests. But I
> don't think it justifies another RC per se.
>
> *Last minute* : I've just tested with CentOS 4.7 and CentOS 5.6 and I've found
> a compilation problem with the sqlite driver (and in the GML driver when
> sqlite3 support is available). Those 2 OS ship with sqlite 3.3.6, but we now
> use various methods that weren't yet available. This is now fixed in trunk and
> 1.9 branch (see http://trac.osgeo.org/gdal/ticket/4418 for details ). Not sure
> if it is worth a RC2.
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jeff at unterbahn.com  Sun Jan  1 23:55:27 2012
From: jeff at unterbahn.com (Jeffrey Warren)
Date: Sun Jan  1 23:55:40 2012
Subject: [gdal-dev] gradient alpha transparency bands for edge-blending in
	gdal_merge
Message-ID: <CAGqfm_CRD3csk4KGypp2FkqaFCEiRApXBmNniJ4Y1yQgCw22QA@mail.gmail.com>

I'm using some images with blurred edges (like http://tinyurl.com/6r2s3z4)
to mosaic a larger geotiff with gdal_merge, but it doesn't respect
transparency that's not either 0 or 1. Is there any way to achieve this
without coding my own merge tool?

This is what results: http://tinyurl.com/7xckw98

The command i'm using (gdal 1.7.3 on ubuntu 11.10) is:

gdal_merge.py -n 0 -o warren-township-geo.tif 47539-geo.tif 47543-geo.tif
47547-geo.tif

More detail on this issue is here:
https://github.com/jywarren/mapknitter/issues/15#issuecomment-3326956

I'd appreciate any tips, and I am wondering if I can contribute if this
functionality does not exist already.

Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120101/2fd52ca1/attachment.html
From jrepetto at free.fr  Mon Jan  2 02:30:57 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Jan  2 02:31:28 2012
Subject: [gdal-dev] gradient alpha transparency bands for edge-blending
	in gdal_merge
In-Reply-To: <CAGqfm_CRD3csk4KGypp2FkqaFCEiRApXBmNniJ4Y1yQgCw22QA@mail.gmail.com>
References: <CAGqfm_CRD3csk4KGypp2FkqaFCEiRApXBmNniJ4Y1yQgCw22QA@mail.gmail.com>
Message-ID: <4F015D31.2070303@free.fr>

On 01/02/12 05:55, Jeffrey Warren wrote:
> I'm using some images with blurred edges (like
> http://tinyurl.com/6r2s3z4) to mosaic a larger geotiff with gdal_merge,
> but it doesn't respect transparency that's not either 0 or 1. Is there
> any way to achieve this without coding my own merge tool?
>
> This is what results: http://tinyurl.com/7xckw98
>
> The command i'm using (gdal 1.7.3 on ubuntu 11.10) is:
>
> gdal_merge.py -n 0 -o warren-township-geo.tif 47539-geo.tif
> 47543-geo.tif 47547-geo.tif
>
> More detail on this issue is here:
> https://github.com/jywarren/mapknitter/issues/15#issuecomment-3326956
>
> I'd appreciate any tips, and I am wondering if I can contribute if this
> functionality does not exist already.
>
> Jeff

Hi Jeff,

I am not sure it will solve your problem, but you should try gdalwarp to 
merge your files.
gdal_merge.py is only an example program to show how to use the Python 
API. The correct tool to merge files is gdalwarp.

Jean-Claude
From szekerest at gmail.com  Mon Jan  2 09:09:03 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Jan  2 09:09:39 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
In-Reply-To: <CA+TxYvO+HCg3NFY9a==OVU5o2V7E+tEmCT6RyYXqGSWpKVbwXA@mail.gmail.com>
References: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
	<201201011730.58471.even.rouault@mines-paris.org>
	<CA+TxYvO+HCg3NFY9a==OVU5o2V7E+tEmCT6RyYXqGSWpKVbwXA@mail.gmail.com>
Message-ID: <CACALY+QbzZdUeHMG5f87qUThKtkKopH+aErBjPv+tTB2uwPXAQ@mail.gmail.com>

GDAL autotests are looking good on Win64. Futher tests are welcome.

Best regards,

Tamas



2012/1/2 Etienne Tourigny <etourigny.dev@gmail.com>

> What is the status of Windows 32-bit and 64-bit ?  Have they been
> tested outside of Tamas' build bot?
>
> best wishes for 2012,
> Etienne
>
> On Sun, Jan 1, 2012 at 1:30 PM, Even Rouault
> <even.rouault@mines-paris.org> wrote:
> > Le dimanche 01 janvier 2012 02:38:00, Frank Warmerdam a ?crit :
> >> Motion: To promote the GDAL/OGR 1.9.0RC1 release candidate as
> >>             the final GDAL/OGR 1.9.0 release.
> >>
> >
> > I've managed to compile it (or the betas) on a variety of Unixes (CentOS
> 6.2,
> > Ubuntu 11.10, FreeBSD 8.0, NetBSD 5, OpenBSD 4.5, Solaris 10 and 11,
> Debian
> > Lenny on a big-endian host) and things seem to be in good shape.
> >
> > Has anyone tested on MacOS X ?
> >
> > The only regression I've found so far is in the Rasterlite driver (
> fixed in
> > http://trac.osgeo.org/gdal/ticket/4413 ). It was hidden by another
> problem in
> > the lastest libspatialite3.0.0 that was exhibited by the GDAL autotests.
> But I
> > don't think it justifies another RC per se.
> >
> > *Last minute* : I've just tested with CentOS 4.7 and CentOS 5.6 and I've
> found
> > a compilation problem with the sqlite driver (and in the GML driver when
> > sqlite3 support is available). Those 2 OS ship with sqlite 3.3.6, but we
> now
> > use various methods that weren't yet available. This is now fixed in
> trunk and
> > 1.9 branch (see http://trac.osgeo.org/gdal/ticket/4418 for details ).
> Not sure
> > if it is worth a RC2.
> >
> > Best regards,
> >
> > Even
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120102/99ae8f08/attachment.html
From jukka.rahkonen at mmmtike.fi  Mon Jan  2 10:39:17 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Jan  2 10:39:51 2012
Subject: [gdal-dev] Ogr2ogr, WFS 1.1.0,  -spat and gml:Box
Message-ID: <loom.20120102T162738-520@post.gmane.org>

Hi,

Ogr2ogr WFS driver seems to create this kind of request when I use it with -spat
option

GET
http://server.org/wfs?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=lv:type_name&FILTER=%3CFilter%20xmlns=%22http://www.opengis.net/ogc%22%20xmlns:lv=%22http://lv.org/%22%20xmlns:gml=%22http://www.opengis.net/gml%22%3E%3CBBOX%3E%3CPropertyName%3Elv:the_geom%3C/PropertyName%3E%3Cgml:Box%3E%3Cgml:coordinates%3E2539023.0000000000000000,6677580.0000000000000000%202554679.0000000000000000,6689397.0000000000000000%3C/gml:coordinates%3E%3C/gml:Box%3E%3C/BBOX%3E%3C/Filter%3E

So it is WFS 1.1.0 request with the BBOX filter. But is it OK to give BBOX as
GML2 gml:Box if the service is WFS version 1.1.0? I have been thinking it should
be using GML3 and gml:Envelope instead.


-Jukka Rahkonen-


From yjacolin at free.fr  Mon Jan  2 11:45:28 2012
From: yjacolin at free.fr (Yves Jacolin (free))
Date: Mon Jan  2 11:46:03 2012
Subject: [gdal-dev] Writing Pixel Functions with VRT
In-Reply-To: <201112212156.30020.even.rouault@mines-paris.org>
References: <201112212041.04553.yjacolin@free.fr>
	<201112212151.57408.yjacolin@free.fr>
	<201112212156.30020.even.rouault@mines-paris.org>
Message-ID: <201201021745.28262.yjacolin@free.fr>

Hello,

Thanks to Even, Brian Case, Joaquim Luis, Etienne Tourigny, antonio (for the 
ticket, patch and lib example) and Frank!

I've suceesfully built my first C++ function and used it with GDAL and QGIS.

Happy new year!

Y.
Le mercredi 21 d?cembre 2011 21:56:29, Even Rouault a ?crit :
> Le mercredi 21 d?cembre 2011 21:51:57, Yves Jacolin (free) a ?crit :
> > Le mercredi 21 d?cembre 2011 21:44:14, Even Rouault a ?crit :
> > > Le mercredi 21 d?cembre 2011 20:41:04, Yves Jacolin (free) a ?crit :
> > > > Hello,
> > > > 
> > > > I have some question about writing pixel functions with vrt files. I
> > > > have a netcdf file with two subset named U and V.
> > > > 
> > > > How can I process sqrt(U^2 + V^2) using this feature with vrt file?
> > > > 
> > > > * do I need to create a C file and build GADL with it?
> > > > * do I need to create a C file and locate it close to vrt file?
> > > 
> > > It depends on how you want to use those pixel functions. If it is in an
> > > application in C/C++ that you develop and that uses GDAL, then it is
> > > sufficient to place the pixel function in your code and register it.
> > > 
> > > If you want the pixel functions to be usable by existing GDAL utilities
> > > or third-party programs using GDAL (QGIS...), then a solution is to
> > > create a small shared library that will be loaded as a GDAL plugin. See
> > > http://trac.osgeo.org/gdal/ticket/3367 that has already a few
> > > functions.
> > > 
> > > You just need to make sure that the plugin is accessible through
> > > GDAL_DRIVER_PATH environmenet variable. No need for it to be close to
> > > the VRT file.
> > > 
> > > Or you can indeed hack GDAL itself and add it and register it.
> > > 
> > > > Thanks,
> > > > 
> > > > Y.
> > 
> > interesting it seems we can use Python pixel functions.
> 
> I didn't dare to mention it because it is a bit geekie. You must use ctypes
> to load libgdal and then define manually each C function used. A bit more
> involved than the use of the typical GDAL Python bindings.
> 
> > Y.

-- 
Yves Jacolin
From even.rouault at mines-paris.org  Mon Jan  2 14:18:42 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  2 14:18:42 2012
Subject: [gdal-dev] Ogr2ogr, WFS 1.1.0,  -spat and gml:Box
In-Reply-To: <loom.20120102T162738-520@post.gmane.org>
References: <loom.20120102T162738-520@post.gmane.org>
Message-ID: <201201022018.43010.even.rouault@mines-paris.org>

Le lundi 02 janvier 2012 16:39:17, Jukka Rahkonen a ?crit :
> Hi,
> 
> Ogr2ogr WFS driver seems to create this kind of request when I use it with
> -spat option
> 
> GET
> http://server.org/wfs?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME
> =lv:type_name&FILTER=%3CFilter%20xmlns=%22http://www.opengis.net/ogc%22%20x
> mlns:lv=%22http://lv.org/%22%20xmlns:gml=%22http://www.opengis.net/gml%22%3
> E%3CBBOX%3E%3CPropertyName%3Elv:the_geom%3C/PropertyName%3E%3Cgml:Box%3E%3C
> gml:coordinates%3E2539023.0000000000000000,6677580.0000000000000000%2025546
> 79.0000000000000000,6689397.0000000000000000%3C/gml:coordinates%3E%3C/gml:B
> ox%3E%3C/BBOX%3E%3C/Filter%3E
> 
> So it is WFS 1.1.0 request with the BBOX filter. But is it OK to give BBOX
> as GML2 gml:Box if the service is WFS version 1.1.0? I have been thinking
> it should be using GML3 and gml:Envelope instead.

I suppose you're right. I didn't recall all the details, so I had a look at 
the code, and here's the answer :

    /* This is a heuristic to detect Deegree 3 servers, such as */
    /* http://deegree3-demo.deegree.org:80/deegree-utah-demo/services */
    /* that are very GML3 strict, and don't like <gml:Box> in a <Filter><BBOX> 
*/
    /* request, but requires instead <gml:Envelope>, but some servers (such as 
MapServer) */
    /* don't like <gml:Envelope> so we are obliged to detect the kind of 
server */

So basically it seems that most servers are tolerant and will accept gml:Box. 
But some servers that should accept gml:Envelope don't. So the default 
behaviour is to use gml:Box, except in cases where we know it won't be 
accepted (but the server mentionned in the comment is no longer online, and I 
cannot find another one that doesn't accept <gml:Box>)

It would perhaps be more reasonable to implement the reversed logic from a 
theoretical point of view, but unless you can point me to a server that 
doesn't like the current logic, I'm quite hesitant to change that :-)


> 
> 
> -Jukka Rahkonen-
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From landa.martin at gmail.com  Mon Jan  2 15:29:25 2012
From: landa.martin at gmail.com (Martin Landa)
Date: Mon Jan  2 15:29:37 2012
Subject: [gdal-dev] broken wms examples (frmt page)
Message-ID: <CA+Ei1OcK0KziiRN4JAJwZ1JAoShpG-pjkaOL8wt69fLkGefu0w@mail.gmail.com>

Hi,

some of the examples from WMS frmt page [1] do not work, eg.

gdal_translate -of JPEG -outsize 500 250
frmt_wms_onearth_global_mosaic.xml onearth_global_mosaic.jpg
Input file size is 2949120, 1474560
0ERROR 1: GDALWMS: The server returned exception: This server no
longer provides full WMS services!

ERROR 1: frmt_wms_onearth_global_mosaic.xml, band 1: IReadBlock failed
at X offset 0, Y offset 0

I am using gdal from SVN trunk.

Best regards, Martin Landa

[1] http://www.gdal.org/frmt_wms.html

-- 
Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa
From jukka.rahkonen at mmmtike.fi  Mon Jan  2 15:49:29 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Jan  2 15:50:16 2012
Subject: [gdal-dev] Re: Ogr2ogr, WFS 1.1.0,  -spat and gml:Box
References: <loom.20120102T162738-520@post.gmane.org>
	<201201022018.43010.even.rouault@mines-paris.org>
Message-ID: <loom.20120102T203525-629@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Le lundi 02 janvier 2012 16:39:17, Jukka Rahkonen a ?crit :

...
> > 
> > So it is WFS 1.1.0 request with the BBOX filter. But is it OK to give BBOX
> > as GML2 gml:Box if the service is WFS version 1.1.0? I have been thinking
> > it should be using GML3 and gml:Envelope instead.
> 
> I suppose you're right. I didn't recall all the details, so I had a look at 
> the code, and here's the answer :
> 
.... 
> So basically it seems that most servers are tolerant and will accept gml:Box. 
> But some servers that should accept gml:Envelope don't. So the default 
> behaviour is to use gml:Box, except in cases where we know it won't be 
> accepted (but the server mentionned in the comment is no longer online, and I 
> cannot find another one that doesn't accept <gml:Box>)
> 
> It would perhaps be more reasonable to implement the reversed logic from a 
> theoretical point of view, but unless you can point me to a server that 
> doesn't like the current logic, I'm quite hesitant to change that 

How about using plain key-value pair BBOX instead of Filter Encoded BBOX? GDAL
is using GET method anyway. With WFS 1.0.0 it would be simple and reliable. The
four parameter BBOX would always mean the default srsName of the feature type
and it would always follow the Easting-Northing order. Evil thing with WFS 1.1.0
is that KVP BBOX defaults to EPSG:4326. Therefore the BBOX should be given with
five parameters to include srsName. Client must check first the GetCapabilities
to know the default srsName but GDAL seems to do it anyway. I suppose that GDAL
does not try to interpret the the axis order used for the -spat parametes so it
would be up to user to give it right.

I am not sure how well different WFS servers support the five parameter KVP BBOX
with WFS 1.1.0. I know that TinyOWS supports it but it behaves in a wrong way
with axis order with some EPSG codes. I do not know the situation with
Mapserver, Geoserver and deegree. 


-Jukka Rahkonen-

From even.rouault at mines-paris.org  Mon Jan  2 16:19:50 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  2 16:19:37 2012
Subject: [gdal-dev] Re: Ogr2ogr, WFS 1.1.0,  -spat and gml:Box
In-Reply-To: <loom.20120102T203525-629@post.gmane.org>
References: <loom.20120102T162738-520@post.gmane.org>
	<201201022018.43010.even.rouault@mines-paris.org>
	<loom.20120102T203525-629@post.gmane.org>
Message-ID: <201201022219.50446.even.rouault@mines-paris.org>


> How about using plain key-value pair BBOX instead of Filter Encoded BBOX?
> GDAL is using GET method anyway. With WFS 1.0.0 it would be simple and
> reliable. The four parameter BBOX would always mean the default srsName of
> the feature type and it would always follow the Easting-Northing order.
> Evil thing with WFS 1.1.0 is that KVP BBOX defaults to EPSG:4326.
> Therefore the BBOX should be given with five parameters to include
> srsName. Client must check first the GetCapabilities to know the default
> srsName but GDAL seems to do it anyway.

When developing the WFS driver, I have had problems with some servers when I 
was using initialy KVP BBOX, and combined with attribute filtering. Using 
Filter Encoding in my experience enable to use both spatial and attribute 
filtering quite reliably. I'd really really hesitant to change that. I had too 
many problems to found requests that worked well with the various WFS servers 
exisiting, so perhaps in 5 years when all servers will be completely 
compliant, someone might reconsider changing the logic ;-)

> I suppose that GDAL does not try
> to interpret the the axis order used for the -spat parametes so it would
> be up to user to give it right.

Well, you are supposing incorrectly ;-) GDAL does actually to interpret the 
axis ordering for *geographic SRS* (unfortunately it does not interpret it for 
projected SRS : http://trac.osgeo.org/gdal/ticket/4329 ) if they are reported 
as urn:ogc:def:crs:EPSG::XXXX by GetCapabilities. It will do the axis order 
swapping when issuing spatial filters, and when reading the GML content, it 
will return in the usual GIS friendly long,lat order (unless the 
GML_INVERT_AXIS_ORDER_IF_LAT_LONG configuration option is set to NO in which 
case it will return in the order found in the GML file).

I'm afraid it is a bit confusing, but just have a look at the difference 
between (look at the subtle difference in the layer SRS too):

ogrinfo -ro "WFS:http://www.tinyows.org/cgi-bin/tinyows?TYPENAME=tows:world" -
al

and

ogrinfo -ro "WFS:http://www.tinyows.org/cgi-bin/tinyows?TYPENAME=tows:world" -
al --config GML_INVERT_AXIS_ORDER_IF_LAT_LONG NO

> 
> I am not sure how well different WFS servers support the five parameter KVP
> BBOX with WFS 1.1.0. I know that TinyOWS supports it but it behaves in a
> wrong way with axis order with some EPSG codes.

Yes, I also noticed issues with TinyOWS, WFS 1.1.0 and axis order. The 
following request -I think- should return features in Europa, but it returns 
feature in South Africa.

http://www.tinyows.org/cgi-
bin/tinyows?TYPENAME=tows:world&SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&FILTER=%3CFilter%20xmlns=%22http://www.opengis.net/ogc%22%20xmlns:tows=%22http://www.tinyows.org/%22%20xmlns:gml=%22http://www.opengis.net/gml%22%3E%3CBBOX%3E%3CPropertyName%3Etows:the_geom%3C/PropertyName%3E%3Cgml:Box%3E%3Cgml:coordinates%3E30.0000000000000000,-20.0000000000000000%2055.0000000000000000,20.0000000000000000%3C/gml:coordinates%3E%3C/gml:Box%3E%3C/BBOX%3E%3C/Filter%3E

(generated by ogrinfo  -ro "WFS:http://www.tinyows.org/cgi-
bin/tinyows?TYPENAME=tows:world" -al  -spat -20 30 20 55 )

> I do not know the
> situation with Mapserver, Geoserver and deegree.

In my experience : 3 servers and possibly >3 different behaviour depending on 
their different versions ;-)

> 
> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From woklist at kyngchaos.com  Mon Jan  2 20:20:11 2012
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Jan  2 20:20:33 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
In-Reply-To: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
References: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
Message-ID: <3B16DD3B-C530-45AD-A178-9A79D640B6E9@kyngchaos.com>

One configuration problem so far on OS X:

- with-freexl - doesn't test for freexl with libiconv (I have freexl compiled as static library, so it doesn't automatically link libiconv).  I just added $LIBICONV to both the freexl tests to get this to work, but another test for whether freexl needs iconv is really needed.


And one compile error: 

webpdataset.cpp:536: error: invalid conversion from 'int' to 'WebPEncCSP'

I changed the offending line to:

    sPicture.colorspace = WEBP_YUV420;

and it compiles.


If these can be fixed for 1.9.0 release that would be great, otherwise I'll add bug reports.

On Dec 31, 2011, at 7:38 PM, Frank Warmerdam wrote:

> Motion: To promote the GDAL/OGR 1.9.0RC1 release candidate as
>            the final GDAL/OGR 1.9.0 release.
> 
> +1 Frank
> 
> --
> 
> I have done a wee bit of testing and the release candidate seems
> solid.  Other PSC members are encouraged to test and vote.
> Feedback from other users is also welcome.
> 
> Voting will remain open until at least the end of day on
> Tuesday.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."

- the wisdom of Tarzan





From jukka.rahkonen at mmmtike.fi  Tue Jan  3 03:01:36 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Jan  3 03:02:33 2012
Subject: [gdal-dev] WFS and -where with non-ASCII characters
Message-ID: <loom.20120103T085634-540@post.gmane.org>

Hi,

Next trouble with the WFS driver. How am I supposed to find a place named
'H?meenkyl?'?  The following request leads to an error telling me that there are
forbidden characters.

ogr2ogr -f "ESRI Shapefile" -spat 377346 6673628 392155 6684806 test.shp
WFS:http://hip.latuviitta.org/cgi-bin/tinyows lv:pks_tilastoalue_piste -where
name='H?meenkyl?'

I have met this same error with other clients usign http GET. I suppose that '?'
characters should be given somehow escaped.

-Jukka Rahkonen-

From ari.jolma at gmail.com  Tue Jan  3 03:45:26 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue Jan  3 03:46:05 2012
Subject: [gdal-dev] WFS and -where with non-ASCII characters
In-Reply-To: <loom.20120103T085634-540@post.gmane.org>
References: <loom.20120103T085634-540@post.gmane.org>
Message-ID: <4F02C026.3070808@gmail.com>

Jukka,

I get: ERROR 1: 'H?meenkyl?' not recognised as an available field.

I.e., it seems to not be confused with '?' - I'm using a linux, where 
the terminal may be better with UTF8. However, the message confused me, 
it is coming from OGR SQL engine, and it seems that the engine tries to 
parse the constant as a field name.

The fix is to escape ', i.e., \'H?meenkyl?\', which works.

Ari

On 01/03/2012 10:01 AM, Jukka Rahkonen wrote:
> Hi,
>
> Next trouble with the WFS driver. How am I supposed to find a place named
> 'H?meenkyl?'?  The following request leads to an error telling me that there are
> forbidden characters.
>
> ogr2ogr -f "ESRI Shapefile" -spat 377346 6673628 392155 6684806 test.shp
> WFS:http://hip.latuviitta.org/cgi-bin/tinyows  lv:pks_tilastoalue_piste -where
> name='H?meenkyl?'
>
> I have met this same error with other clients usign http GET. I suppose that '?'
> characters should be given somehow escaped.
>
> -Jukka Rahkonen-

From jukka.rahkonen at mmmtike.fi  Tue Jan  3 04:01:49 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Jan  3 04:02:41 2012
Subject: [gdal-dev] Re: WFS and -where with non-ASCII characters
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com>
Message-ID: <loom.20120103T095521-53@post.gmane.org>

Ari Jolma <ari.jolma <at> gmail.com> writes:

> 
> Jukka,
> 
> I get: ERROR 1: 'H?meenkyl?' not recognised as an available field.
> 
> I.e., it seems to not be confused with '?' - I'm using a linux, where 
> the terminal may be better with UTF8. However, the message confused me, 
> it is coming from OGR SQL engine, and it seems that the engine tries to 
> parse the constant as a field name.
> 
> The fix is to escape ', i.e., \'H?meenkyl?\', which works.
> 
> Ari

Hi Ari,

It seems to behave differently on Windows. I got your error by using -where
name=H?meenkyl?. -where name='H?meenkyl?' gives me

ERROR 1: Error returned by server : <?xml version='1.0' encoding='UTF-8'?>
<ows:ExceptionReport
 xmlns='http://www.opengis.net/ows'
 xmlns:ows='http://www.opengis.net/ows'
 xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
 xsi:schemaLocation='http://www.opengis.net/ows http://schemas.opengis.net/ows/1
.0.0/owsExceptionReport.xsd'
 version='1.1.0' language='en'>
 <ows:Exception exceptionCode='MissingParameterValue' locator='request'>
  <ows:ExceptionText>QUERY_STRING contains forbidden characters</ows:ExceptionTe
xt>
 </ows:Exception>
</ows:ExceptionReport>

I tried with -where name=\'H?meenkyl?\' and it gives this error on Windows.
Notice that '?' is changed to something else.

ERROR 1: SQL Expression Parsing Error: syntax error
FAILURE: SetAttributeFilter(name=\'H?meenkyl?\') failed.

-Jukka-


From even.rouault at mines-paris.org  Tue Jan  3 04:59:57 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan  3 05:00:39 2012
Subject: [gdal-dev] WFS and -where with non-ASCII characters
In-Reply-To: <4F02C026.3070808@gmail.com>
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com>
Message-ID: <1325584797.4f02d19d0e25e@imp.free.fr>

Selon Ari Jolma <ari.jolma@gmail.com>:

> Jukka,
>
> I get: ERROR 1: 'H?meenkyl?' not recognised as an available field.
>
> I.e., it seems to not be confused with '?' - I'm using a linux, where
> the terminal may be better with UTF8. However, the message confused me,
> it is coming from OGR SQL engine, and it seems that the engine tries to
> parse the constant as a field name.
>
> The fix is to escape ', i.e., 'H?meenkyl?', which works.
>

On Linux, I suspect that the single quotes must be removed by your shell (hence
the SQL engine believes that it must test equality between a column and another
column). So the solution is to escape the single-quote, or to
double-quote the whole stuff:

-where "name='H?meenkyl?'".

On Windows, there might perhaps be a problem with the shell passing strings in
the local code page (CP1252 or whatever variant of it that is used in
Finland), whereas the WFS server perhaps expect it to be UTF-8. I'm not sure
which encoding we are supposed to send through Filter Encoding in KVP, and I'm
not sure how it is escaped (or not) currently. But if it works with Linux, it is
likely not an escaping problem, but one related with the encoding. Sending the
Filter Encoding as a POST content will likely get rid of the encoding problem
from a theoritical point of view, but there would still be the problem of
Windows passing non-UTF8 strings to the command line utilities

Jukka, I have not the means of checking for now (behind corporate firewall that
blocks your servre). But perhaps you could try with the following OGR Python
script :

from osgeo import ogr
ds = ogr.Open('WFS:http://hip.latuviitta.org/cgi-bin/tinyows')
lyr = ds.GetLayerByName('lv:pks_tilastoalue_piste')
lyr.SetAttributeFilter("name='H?meenkyl?'")
feat = lyr.GetNextFeature()
feat.DumpReadable()

The python shell should send UTF8 strings to GDAL.

Best regards,

Even


From max at geoinova.com  Tue Jan  3 05:23:16 2012
From: max at geoinova.com (Maksim Sestic)
Date: Tue Jan  3 05:23:24 2012
Subject: [gdal-dev] Re: GDAL WMS - stripes offset error
In-Reply-To: <201112311416.51968.even.rouault@mines-paris.org>
References: <1324570147905-7119089.post@n2.nabble.com>
	<1325259778344-7138360.post@n2.nabble.com>
	<201112301737.44833.even.rouault@mines-paris.org>
	<1325337047398-7140337.post@n2.nabble.com>
	<201112311416.51968.even.rouault@mines-paris.org>
Message-ID: <1325586196105-7146297.post@n2.nabble.com>

I'm afraid that:

http://user:password@host/... 

...won't work if username or password contain special characters, i.e. "@". 
Alas, data providers use e-mail address for the username more than often.

Regards,
Maksim Sestic

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-WMS-stripes-offset-error-tp7119089p7146297.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From max at geoinova.com  Tue Jan  3 05:42:43 2012
From: max at geoinova.com (Maksim Sestic)
Date: Tue Jan  3 05:43:08 2012
Subject: [gdal-dev] C# bindings - setting up progress delegate for
	Gdal.Open()
Message-ID: <1325587363369-7146342.post@n2.nabble.com>

Hi all,

Is there a way to set progress delegate function during a call to
Gdal.Open()? I'm opening a WMS dataset and I need some sort of progress
metering during the process, but I don't see a way to attach handler
function for:

Dim ds As Dataset = Gdal.Open("<GDAL_WMS>...</GDAL_WMS>",
Access.GA_ReadOnly)

Regards,
Maksim Sestic



--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/C-bindings-setting-up-progress-delegate-for-Gdal-Open-tp7146342p7146342.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Jukka.Rahkonen at mmmtike.fi  Tue Jan  3 05:34:06 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Tue Jan  3 05:47:03 2012
Subject: [gdal-dev] WFS and -where with non-ASCII characters
In-Reply-To: <1325584797.4f02d19d0e25e@imp.free.fr>
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com>,<1325584797.4f02d19d0e25e@imp.free.fr>
Message-ID: <84446DEF76453C439E9E97E438E13A63061332@suutari.haapa.mmm.fi>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> On Windows, there might perhaps be a problem with the shell passing strings in
> the local code page (CP1252 or whatever variant of it that is used in
> Finland), whereas the WFS server perhaps expect it to be UTF-8. I'm not sure
> which encoding we are supposed to send through Filter Encoding in KVP, and I'm
> not sure how it is escaped (or not) currently. But if it works with Linux, it is
> likely not an escaping problem, but one related with the encoding. Sending the
> Filter Encoding as a POST content will likely get rid of the encoding problem
> from a theoritical point of view, but there would still be the problem of
> Windows passing non-UTF8 strings to the command line utilities

POST method has been reliable for me both with GIS clients or when sending
requests through Firefox and Poster.
 
> Jukka, I have not the means of checking for now (behind corporate firewall that
> blocks your servre). But perhaps you could try with the following OGR Python
> script :
> 
> from osgeo import ogr
> ds = ogr.Open('WFS:http://hip.latuviitta.org/cgi-bin/tinyows')
> lyr = ds.GetLayerByName('lv:pks_tilastoalue_piste')
> lyr.SetAttributeFilter("name='H?meenkyl?'")
> feat = lyr.GetNextFeature()
> feat.DumpReadable()
> 
> The python shell should send UTF8 strings to GDAL.

Error is about the same as with ogr2ogr

>>> ds = ogr.Open('WFS:http://hip.latuviitta.org/cgi-bin/tinyows')
>>> lyr = ds.GetLayerByName('lv:pks_tilastoalue_piste')
>>> lyr.SetAttributeFilter("name='H?meenkyl?'")
0
>>> feat = lyr.GetNextFeature()
ERROR 1: Error returned by server : <?xml version='1.0' encoding='UTF-8'?>
<ows:ExceptionReport
 xmlns='http://www.opengis.net/ows'
 xmlns:ows='http://www.opengis.net/ows'
 xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
 xsi:schemaLocation='http://www.opengis.net/ows http://schemas.opengis.net/ows/1
.0.0/owsExceptionReport.xsd'
 version='1.1.0' language='en'>
 <ows:Exception exceptionCode='MissingParameterValue' locator='request'>
  <ows:ExceptionText>QUERY_STRING contains forbidden characters</ows:ExceptionTe
xt>
 </ows:Exception>
</ows:ExceptionReport>

>>> feat.DumpReadable()


I do not know if this is TinyOWS error but Mapserver 6.0 is not happy either. It
gives me http 500 error with browser

ogr2ogr -f "ESRI Shapefile" -spat 377346 6673628 392155 6684806 test.shp
WFS:http://hip.latuviitta.org/cgi-bin/mapserver_wfs 
pks_tilastoalue_piste -where name='H?meenkyl?'
ERROR 1: HTTP error code : 500
ERROR 1: Error returned by server : HTTP error code : 500 (0)

and a bit better report when sent through python

ERROR 1: Error returned by server : <?xml version="1.0" encoding="UTF-8"?>
<ows:ExceptionReport xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns
:ows="http://www.opengis.net/ows" version="1.1.0" language="en-US" xsi:schemaLoc
ation="http://www.opengis.net/ows http://schemas.opengis.net/ows/1.0.0/owsExcept
ionReport.xsd">
  <ows:Exception exceptionCode="NoApplicableCode" locator="mapserv">
    <ows:ExceptionText>msWFSGetFeature(): WFS server error. FLTApplyFilterToLaye
r() failed
msPostGISLayerWhichShapes(): Query error. Error (ERROR:  invalid byte sequence f
or encoding "UTF8": 0x84
) executing query: select "gid","ogc_fid","name",encode(ST_AsBinary(ST_Force_2D(
"the_geom"),'NDR'),'hex') as geom,"gid" from pks_tilastoalue_piste where the_geo
m &amp;&amp; GeomFromText('POLYGON((61600 6597900,61600 7776800,733000 7776800,7
33000 6597900,61600 6597900))',3067) and ( ("name"= 'H?meenkyl?') ) limit 100000

msEvalRegex(): Regular expression error. String failed expression test.</ows:Exc
eptionText>
  </ows:Exception>
</ows:ExceptionReport>

-Jukka-

> Best regards,
> 
> Even
> 


From even.rouault at mines-paris.org  Tue Jan  3 05:47:21 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan  3 05:48:13 2012
Subject: [gdal-dev] Re: GDAL WMS - stripes offset error
In-Reply-To: <1325586196105-7146297.post@n2.nabble.com>
References: <1324570147905-7119089.post@n2.nabble.com>
	<1325259778344-7138360.post@n2.nabble.com>
	<201112301737.44833.even.rouault@mines-paris.org>
	<1325337047398-7140337.post@n2.nabble.com>
	<201112311416.51968.even.rouault@mines-paris.org>
	<1325586196105-7146297.post@n2.nabble.com>
Message-ID: <1325587641.4f02dcb9a8dcb@imp.free.fr>

Selon Maksim Sestic <max@geoinova.com>:

> I'm afraid that:
>
> http://user:password@host/...
>
> ...won't work if username or password contain special characters, i.e. "@".
> Alas, data providers use e-mail address for the username more than often.

Perhaps escaping special characters with their hexadecimal code might work.
(like %20 for spaces, %2B for '+', etc...)

>
> Regards,
> Maksim Sestic
>
> --
> View this message in context:
>
http://osgeo-org.1803224.n2.nabble.com/GDAL-WMS-stripes-offset-error-tp7119089p7146297.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Tue Jan  3 05:49:46 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan  3 05:50:39 2012
Subject: [gdal-dev] C# bindings - setting up progress delegate for
	Gdal.Open()
In-Reply-To: <1325587363369-7146342.post@n2.nabble.com>
References: <1325587363369-7146342.post@n2.nabble.com>
Message-ID: <1325587786.4f02dd4a1df38@imp.free.fr>

Selon Maksim Sestic <max@geoinova.com>:

> Hi all,
>
> Is there a way to set progress delegate function during a call to
> Gdal.Open()? I'm opening a WMS dataset and I need some sort of progress
> metering during the process, but I don't see a way to attach handler
> function for:
>
> Dim ds As Dataset = Gdal.Open("<GDAL_WMS>...</GDAL_WMS>",
> Access.GA_ReadOnly)

No, there's no progress callback available for the Open() call. For WMS, the
time is essentially spend in waiting for the response to the GetCapabilities().
So even if there was a mechanism, there would be no way to know the percentage
of completion before the server sends the size of the answser XML, but once you
know it, as it is small, it is almost instantaneously downloaded.

>
> Regards,
> Maksim Sestic
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1803224.n2.nabble.com/C-bindings-setting-up-progress-delegate-for-Gdal-Open-tp7146342p7146342.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From max at geoinova.com  Tue Jan  3 06:05:45 2012
From: max at geoinova.com (Maksim Sestic)
Date: Tue Jan  3 06:06:28 2012
Subject: [gdal-dev] Re: C# bindings - setting up progress delegate for
	Gdal.Open()
In-Reply-To: <1325587786.4f02dd4a1df38@imp.free.fr>
References: <1325587363369-7146342.post@n2.nabble.com>
	<1325587786.4f02dd4a1df38@imp.free.fr>
Message-ID: <1325588745420-7146387.post@n2.nabble.com>

Hi Even,

I agree. Although it could be possible to meter number of tiles being
received, as we know the total number of tiles. "Granularity" would be
possible to set via single BlockSizeX/Y, i.e. 256x256 pixels would do the
trick.

Also - it's seems strange :-) that GDAL enables metering via
GDALProgressFunc callback during dataset Create phase, and not during
dataset Open phase.

I think I misunderstood your info, but does it mean that GetCapabilities()
gets executed during a call to Gdal.Open() for WMS driver?

Regards,
Maksim Sestic


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/C-bindings-setting-up-progress-delegate-for-Gdal-Open-tp7146342p7146387.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jukka.rahkonen at mmmtike.fi  Tue Jan  3 06:07:54 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Jan  3 06:08:57 2012
Subject: [gdal-dev] Re: WFS and -where with non-ASCII characters
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com>,
	<1325584797.4f02d19d0e25e@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63061332@suutari.haapa.mmm.fi>
Message-ID: <loom.20120103T120528-834@post.gmane.org>

I took the successful query sent by Ari from the TinyOWS log and copied it
literally into Windows and this way it works:

-where name='H??meenkyl??'

-Jukka-


From even.rouault at mines-paris.org  Tue Jan  3 07:20:20 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan  3 07:20:57 2012
Subject: [gdal-dev] Re: WFS and -where with non-ASCII characters
In-Reply-To: <loom.20120103T120528-834@post.gmane.org>
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com>,
	<1325584797.4f02d19d0e25e@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63061332@suutari.haapa.mmm.fi>
	<loom.20120103T120528-834@post.gmane.org>
Message-ID: <1325593220.4f02f2840378d@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:

> I took the successful query sent by Ari from the TinyOWS log and copied it
> literally into Windows and this way it works:

Yes, this confirms that the content provided on the ogr2ogr command line is
passed untransformed to OGR (so in a ANSI codepage) whereas, in the context of
the WFS server, UTF-8 is expected. Perhaps we should swith GDAL/OGR command line
utitities to use the wide-char version of main() instead of the ANSI one in
order to get command line arguments as unicode string. But I'm afraid this would
break other parts of GDAL that are not encoding aware and for which the
translation to unicode wouldn't be that great.

About Python, I did check and I was wrong. On Windows, the Python interpreter
uses the terminal encoding by default and not UTF-8.

So you could try :

from osgeo import ogr
import sys
ds = ogr.Open('WFS:http://hip.latuviitta.org/cgi-bin/tinyows')
lyr = ds.GetLayerByName('lv:pks_tilastoalue_piste')
lyr.SetAttributeFilter("name='H?meenkyl?'".decode(sys.stdin.encoding).encode('utf-8'))
feat = lyr.GetNextFeature()
feat.DumpReadable()

Or create a test.py script and make sure to open it with a editor configured in
UTF-8 (typically not notepad !) :

#!/usr/bin/env python
# -*- coding: utf-8 -*-
from osgeo import ogr
import sys
ds = ogr.Open('WFS:http://hip.latuviitta.org/cgi-bin/tinyows')
lyr = ds.GetLayerByName('lv:pks_tilastoalue_piste')
lyr.SetAttributeFilter("name='H?meenkyl?'")
feat = lyr.GetNextFeature()
feat.DumpReadable()

(Not sure how this email will display. But the character should be typed
naturally, I mean a single 'a' with the accent, not a 2-byte thing)

>
> -Jukka-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Tue Jan  3 07:38:20 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan  3 07:39:09 2012
Subject: [gdal-dev] Re: C# bindings - setting up progress delegate for
	Gdal.Open()
In-Reply-To: <1325588745420-7146387.post@n2.nabble.com>
References: <1325587363369-7146342.post@n2.nabble.com>
	<1325587786.4f02dd4a1df38@imp.free.fr>
	<1325588745420-7146387.post@n2.nabble.com>
Message-ID: <1325594300.4f02f6bc4cf5b@imp.free.fr>

Selon Maksim Sestic <max@geoinova.com>:

> Hi Even,
>
> I agree. Although it could be possible to meter number of tiles being
> received, as we know the total number of tiles. "Granularity" would be
> possible to set via single BlockSizeX/Y, i.e. 256x256 pixels would do the
> trick.
>
> Also - it's seems strange :-) that GDAL enables metering via
> GDALProgressFunc callback during dataset Create phase, and not during
> dataset Open phase.
>
> I think I misunderstood your info, but does it mean that GetCapabilities()
> gets executed during a call to Gdal.Open() for WMS driver?

Perhaps I musinuderstood your question, but your question was about Open().
Open() does nothing except running a GetCapabilities() which should not be a too
long operation if the server is normally responsive. There's no progress to
measure. It is binary : 0% or 100%.

And actually, if you provide the full XML, I'm not sure that Open() does the
GetCapabilities() actually. It might be instantenous. I was thinking of the case
when you use the new (GDAL 1.9) "WMS:http://url/to/wms/service" syntax.

But when you mention tile downloading, you are implying using something like a
CreateCopy() or a RasterIO() call. For CreateCopy(), there's a progress callback
that can be passed. RasterIO() has none since it is supposed to be an elementary
operation. If you use RasterIO(), it is up to you to compute the progress.

>
> Regards,
> Maksim Sestic
>
>
> --
> View this message in context:
>
http://osgeo-org.1803224.n2.nabble.com/C-bindings-setting-up-progress-delegate-for-Gdal-Open-tp7146342p7146387.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From mateusz at loskot.net  Tue Jan  3 07:45:15 2012
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Tue Jan  3 07:45:54 2012
Subject: [gdal-dev] Re: WFS and -where with non-ASCII characters
In-Reply-To: <loom.20120103T120528-834@post.gmane.org>
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com> <1325584797.4f02d19d0e25e@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63061332@suutari.haapa.mmm.fi>
	<loom.20120103T120528-834@post.gmane.org>
Message-ID: <CABUeae-dmWTg1vOOuDzvi05_vOZ=MfGGwdbfU2HEfJUL5bf_nw@mail.gmail.com>

On 3 January 2012 11:07, Jukka Rahkonen <jukka.rahkonen@mmmtike.fi> wrote:
> I took the successful query sent by Ari from the TinyOWS log and copied it
> literally into Windows and this way it works:
>
> -where name='H??meenkyl??'

Windows Command Prompt can work with UTF-8 characters if you change
codepage to UTF-8:

0) Open new prompt (cmd.exe)
1) Change font to Lucida Concole
3) chcp 65001

And OGR can consume filter without problems:

-where "name=\"H?meenkyl?\""

Note, the \"\" is needed to not to confuse OGR SQL compilers,
otherwise value H?meenkyl?
will be parsed as OGR SQL type SNT_COLUMN instead of SNT_CONSTANT for
field value.

However, I think the problem may be with TinyOWS. It throws error;

<ows:ExceptionText>QUERY_STRING contains forbidden
characters</ows:ExceptionText>

which is generated by TinyOWS:

http://www.tinyows.org/trac/browser/trunk/src/struct/cgi_request.c?rev=525#L208

where TinyOWS simply tests characters passed in request against fixed
range: A-Za-z?-?
Comparing extended ASII codes, the value '?' is outside of this range anyway.

I get no WFS exception no OGR error when querying with some (not all)
Polish diacritics:

ogrinfo WFS:http://hip.latuviitta.org/cgi-bin/tinyows
lv:pks_tilastoalue_piste -where "name=\"?????\""

Certainly, it gives empty resultset.

I think it would be a good idea to try against different WFS server.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From ari.jolma at gmail.com  Tue Jan  3 08:07:10 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue Jan  3 08:07:57 2012
Subject: [gdal-dev] Re: WFS and -where with non-ASCII characters
In-Reply-To: <CABUeae-dmWTg1vOOuDzvi05_vOZ=MfGGwdbfU2HEfJUL5bf_nw@mail.gmail.com>
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com> <1325584797.4f02d19d0e25e@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63061332@suutari.haapa.mmm.fi>
	<loom.20120103T120528-834@post.gmane.org>
	<CABUeae-dmWTg1vOOuDzvi05_vOZ=MfGGwdbfU2HEfJUL5bf_nw@mail.gmail.com>
Message-ID: <4F02FD7E.6060908@gmail.com>

On 01/03/2012 02:45 PM, Mateusz ?oskot wrote:
> On 3 January 2012 11:07, Jukka Rahkonen<jukka.rahkonen@mmmtike.fi>  wrote:
>> I took the successful query sent by Ari from the TinyOWS log and copied it
>> literally into Windows and this way it works:
>>
>> -where name='H??meenkyl??'
> Windows Command Prompt can work with UTF-8 characters if you change
> codepage to UTF-8:
>
> 0) Open new prompt (cmd.exe)
> 1) Change font to Lucida Concole
> 3) chcp 65001
>
> And OGR can consume filter without problems:
>
> -where "name=\"H?meenkyl?\""
>
> Note, the \"\" is needed to not to confuse OGR SQL compilers,
> otherwise value H?meenkyl?
> will be parsed as OGR SQL type SNT_COLUMN instead of SNT_CONSTANT for
> field value.

Is that really so? At least in PostgreSQL " and ' have different uses. " 
is used for column names, which are not all lowercase and without 
special characters and ' is used for string constants (as in this case).

Ari

From mateusz at loskot.net  Tue Jan  3 08:17:51 2012
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Tue Jan  3 08:18:32 2012
Subject: [gdal-dev] Re: WFS and -where with non-ASCII characters
In-Reply-To: <4F02FD7E.6060908@gmail.com>
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com> <1325584797.4f02d19d0e25e@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63061332@suutari.haapa.mmm.fi>
	<loom.20120103T120528-834@post.gmane.org>
	<CABUeae-dmWTg1vOOuDzvi05_vOZ=MfGGwdbfU2HEfJUL5bf_nw@mail.gmail.com>
	<4F02FD7E.6060908@gmail.com>
Message-ID: <CABUeae9pZOiPrW_TR=vQhSiebqiGXQNxG=+nDLPDQ2V4k33cTA@mail.gmail.com>

On 3 January 2012 13:07, Ari Jolma <ari.jolma@gmail.com> wrote:
> On 01/03/2012 02:45 PM, Mateusz ?oskot wrote:
>> On 3 January 2012 11:07, Jukka Rahkonen<jukka.rahkonen@mmmtike.fi> ?wrote:
>>>
>>> I took the successful query sent by Ari from the TinyOWS log and copied
>>> it literally into Windows and this way it works:
>>>
>>> -where name='H??meenkyl??'
>>
>> Windows Command Prompt can work with UTF-8 characters if you change
>> codepage to UTF-8:
>>
>> 0) Open new prompt (cmd.exe)
>> 1) Change font to Lucida Concole
>> 3) chcp 65001
>>
>> And OGR can consume filter without problems:
>>
>> -where "name=\"H?meenkyl?\""
>>
>> Note, the \"\" is needed to not to confuse OGR SQL compilers,
>> otherwise value H?meenkyl?
>> will be parsed as OGR SQL type SNT_COLUMN instead of SNT_CONSTANT for
>> field value.
>
>
> Is that really so?

I have checked the two variants under debugger and that's what I see,
as far as I look at right place.

> At least in PostgreSQL " and ' have different uses. " is
> used for column names, which are not all lowercase and without special
> characters and ' is used for string constants (as in this case).

Perhaps parser gets confused by extended ASCII or non-ASCII characters,
then the meaning of " and ' is affected.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From max at geoinova.com  Tue Jan  3 08:20:01 2012
From: max at geoinova.com (Maksim Sestic)
Date: Tue Jan  3 08:20:25 2012
Subject: [gdal-dev] Re: C# bindings - setting up progress delegate for
	Gdal.Open()
In-Reply-To: <1325594300.4f02f6bc4cf5b@imp.free.fr>
References: <1325587363369-7146342.post@n2.nabble.com>
	<1325587786.4f02dd4a1df38@imp.free.fr>
	<1325588745420-7146387.post@n2.nabble.com>
	<1325594300.4f02f6bc4cf5b@imp.free.fr>
Message-ID: <1325596801178-7146691.post@n2.nabble.com>

Hm, that's strange. I'm using Gdal.Open() to fetch WMS graphics, for example:

Dim ds As Dataset = Gdal.Open("<GDAL_WMS><Service
name="WMS"><Version>1.3.0</Version><ServerUrl>http://wms.agiv.be/inspire/wms/orthobeeldvorming</ServerUrl><CRS>CRS:84</CRS><ImageFormat>image/png</ImageFormat><Transparent>True</Transparent><Layers>RGB</Layers><Styles></Styles></Service><DataWindow><UpperLeftX>3.76302095985856</UpperLeftX><UpperLeftY>50.9987228424621</UpperLeftY><LowerRightX>3.76629196690679</LowerRightX><LowerRightY>50.9968195506639</LowerRightY><SizeX>2439</SizeX><SizeY>2255</SizeY></DataWindow><Projection>EPSG:4326</Projection></GDAL_WMS>",
Access.GA_ReadOnly)

...returns requested dataset, which I further save to disk using appropriate
Driver and CreateCopy() method. It works correctly. I hope that above
example does not perform GetCapabilities() at all?

I was thinking about above case, when Gdal.Open(...) actually reads a raster
dataset from WMS. First it creates "grid" of tiles if pixel size is larger
than BlockSizeX/Y. Then it reads tile by tile from server, merging them all
at the end into the final dataset. Downloading each tile would trigger
progress change. Setting BlockSize to i.e. 256x256 pixels (instead of
default 1024x1024) should make it granular enough for progress bars.

Regards,
Maksim Sestic


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/C-bindings-setting-up-progress-delegate-for-Gdal-Open-tp7146342p7146691.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From etourigny.dev at gmail.com  Tue Jan  3 09:04:31 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Jan  3 09:04:48 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
In-Reply-To: <3B16DD3B-C530-45AD-A178-9A79D640B6E9@kyngchaos.com>
References: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
	<3B16DD3B-C530-45AD-A178-9A79D640B6E9@kyngchaos.com>
Message-ID: <CA+TxYvMcLJ0yxtjFEUQ9SQcRHQb=KR=cRj4s9NfH5p9o+=TOgA@mail.gmail.com>

William,

Can you comment on the status of support for netcdf4 + hdf5 in mac osx
? Has that been tested, or is it possible to include them in your
builds?

There have been a number of improvements to the netcdf driver for
1.9.0 (including support for netcdf-4), it would be nice to have that
included in your builds.  If you need help I can try to assist, but I
don't have a mac nor experience with osx.

thanks,
Etienne

On Mon, Jan 2, 2012 at 10:20 PM, William Kyngesburye
<woklist@kyngchaos.com> wrote:
> One configuration problem so far on OS X:
>
> - with-freexl - doesn't test for freexl with libiconv (I have freexl compiled as static library, so it doesn't automatically link libiconv). ?I just added $LIBICONV to both the freexl tests to get this to work, but another test for whether freexl needs iconv is really needed.
>
>
> And one compile error:
>
> webpdataset.cpp:536: error: invalid conversion from 'int' to 'WebPEncCSP'
>
> I changed the offending line to:
>
> ? ?sPicture.colorspace = WEBP_YUV420;
>
> and it compiles.
>
>
> If these can be fixed for 1.9.0 release that would be great, otherwise I'll add bug reports.
>
> On Dec 31, 2011, at 7:38 PM, Frank Warmerdam wrote:
>
>> Motion: To promote the GDAL/OGR 1.9.0RC1 release candidate as
>> ? ? ? ? ? ?the final GDAL/OGR 1.9.0 release.
>>
>> +1 Frank
>>
>> --
>>
>> I have done a wee bit of testing and the release candidate seems
>> solid. ?Other PSC members are encouraged to test and vote.
>> Feedback from other users is also welcome.
>>
>> Voting will remain open until at least the end of day on
>> Tuesday.
>>
>> Best regards,
>> --
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up ? | Frank Warmerdam, warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush ? ?| Geospatial Software Developer
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."
>
> - the wisdom of Tarzan
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Tue Jan  3 09:24:26 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan  3 09:25:06 2012
Subject: [gdal-dev] Re: C# bindings - setting up progress delegate for
	Gdal.Open()
In-Reply-To: <1325596801178-7146691.post@n2.nabble.com>
References: <1325587363369-7146342.post@n2.nabble.com>
	<1325587786.4f02dd4a1df38@imp.free.fr>
	<1325588745420-7146387.post@n2.nabble.com>
	<1325594300.4f02f6bc4cf5b@imp.free.fr>
	<1325596801178-7146691.post@n2.nabble.com>
Message-ID: <1325600666.4f030f9a4bf4b@imp.free.fr>

Selon Maksim Sestic <max@geoinova.com>:

> Hm, that's strange. I'm using Gdal.Open() to fetch WMS graphics, for example:
>
> Dim ds As Dataset = Gdal.Open("<GDAL_WMS><Service
>
name="WMS"><Version>1.3.0</Version><ServerUrl>http://wms.agiv.be/inspire/wms/orthobeeldvorming</ServerUrl><CRS>CRS:84</CRS><ImageFormat>image/png</ImageFormat><Transparent>True</Transparent><Layers>RGB</Layers><Styles></Styles></Service><DataWindow><UpperLeftX>3.76302095985856</UpperLeftX><UpperLeftY>50.9987228424621</UpperLeftY><LowerRightX>3.76629196690679</LowerRightX><LowerRightY>50.9968195506639</LowerRightY><SizeX>2439</SizeX><SizeY>2255</SizeY></DataWindow><Projection>EPSG:4326</Projection></GDAL_WMS>",
> Access.GA_ReadOnly)
>
> ...returns requested dataset, which I further save to disk using appropriate
> Driver and CreateCopy() method. It works correctly. I hope that above
> example does not perform GetCapabilities() at all?

No it shouldn't

>
> I was thinking about above case, when Gdal.Open(...) actually reads a raster
> dataset from WMS. First it creates "grid" of tiles if pixel size is larger
> than BlockSizeX/Y. Then it reads tile by tile from server, merging them all
> at the end into the final dataset. Downloading each tile would trigger
> progress change. Setting BlockSize to i.e. 256x256 pixels (instead of
> default 1024x1024) should make it granular enough for progress bars.

GDALOpen() will divide into tiles, but will not read them. You need to call
CreateCopy() or RasterIO() for that.

So :

1) Open() on the XML description is a fast operation that doesn't download
anything and doesn't need progress
2) CreateCopy() has a progress callback which will be regularly called.
Depending on the output driver, it might not be called for each tile though, but
perhaps for each line.

>
> Regards,
> Maksim Sestic
>
>
> --
> View this message in context:
>
http://osgeo-org.1803224.n2.nabble.com/C-bindings-setting-up-progress-delegate-for-Gdal-Open-tp7146342p7146691.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Tue Jan  3 09:31:22 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan  3 09:31:39 2012
Subject: [gdal-dev] Re: WFS and -where with non-ASCII characters
In-Reply-To: <CABUeae9pZOiPrW_TR=vQhSiebqiGXQNxG=+nDLPDQ2V4k33cTA@mail.gmail.com>
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com> <1325584797.4f02d19d0e25e@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63061332@suutari.haapa.mmm.fi>
	<loom.20120103T120528-834@post.gmane.org>
	<CABUeae-dmWTg1vOOuDzvi05_vOZ=MfGGwdbfU2HEfJUL5bf_nw@mail.gmail.com>
	<4F02FD7E.6060908@gmail.com>
	<CABUeae9pZOiPrW_TR=vQhSiebqiGXQNxG=+nDLPDQ2V4k33cTA@mail.gmail.com>
Message-ID: <1325601082.4f03113ae1c70@imp.free.fr>

Selon Mateusz ??oskot <mateusz@loskot.net>:

> On 3 January 2012 13:07, Ari Jolma <ari.jolma@gmail.com> wrote:
> > On 01/03/2012 02:45 PM, Mateusz ??oskot wrote:
> >> On 3 January 2012 11:07, Jukka Rahkonen<jukka.rahkonen@mmmtike.fi>
> ??wrote:
> >>>
> >>> I took the successful query sent by Ari from the TinyOWS log and copied
> >>> it literally into Windows and this way it works:
> >>>
> >>> -where name='H????meenkyl????'
> >>
> >> Windows Command Prompt can work with UTF-8 characters if you change
> >> codepage to UTF-8:
> >>
> >> 0) Open new prompt (cmd.exe)
> >> 1) Change font to Lucida Concole
> >> 3) chcp 65001
> >>
> >> And OGR can consume filter without problems:
> >>
> >> -where "name=\"H??meenkyl??\""
> >>
> >> Note, the \"\" is needed to not to confuse OGR SQL compilers,
> >> otherwise value H??meenkyl??
> >> will be parsed as OGR SQL type SNT_COLUMN instead of SNT_CONSTANT for
> >> field value.
> >
> >
> > Is that really so?
>
> I have checked the two variants under debugger and that's what I see,
> as far as I look at right place.
>
> > At least in PostgreSQL " and ' have different uses. " is
> > used for column names, which are not all lowercase and without special
> > characters and ' is used for string constants (as in this case).
>
> Perhaps parser gets confused by extended ASCII or non-ASCII characters,
> then the meaning of " and ' is affected.

The OGR SQL dialect allows " and ' to be used indifferently for string literals.
However the SQL standard (or at least the implementations I'm familiar like
sqlite, postgresql) only uses ' for string literal and " for column/table names.

I'd discourage anyone from using " for string literals with OGR SQL. Because
ultimately it would be good to be stricter in order to be able to distinguish
column names that are quoted because they contain a special character from
string literals. Currently the 2 following tests would be interpreted the same
way :

1) a_column = "a column with &( weird characters"
2) a_column = 'a literal with &( weird characters'

That is to say that in case 1) we would consider the right part of the
comparison as a literal value and not a column name.

I have created some time ago a patch to start implementing that stricter mode (
http://trac.osgeo.org/gdal/ticket/4280 ) but it can break existing uses of OGR,
so perhaps material for GDAL 2.0.


>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From Jukka.Rahkonen at mmmtike.fi  Tue Jan  3 09:37:24 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Tue Jan  3 09:37:55 2012
Subject: [gdal-dev] Re: WFS and -where with non-ASCII characters
In-Reply-To: <CABUeae-dmWTg1vOOuDzvi05_vOZ=MfGGwdbfU2HEfJUL5bf_nw@mail.gmail.com>
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com> <1325584797.4f02d19d0e25e@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63061332@suutari.haapa.mmm.fi>
	<loom.20120103T120528-834@post.gmane.org>
	<CABUeae-dmWTg1vOOuDzvi05_vOZ=MfGGwdbfU2HEfJUL5bf_nw@mail.gmail.com>
Message-ID: <84446DEF76453C439E9E97E438E13A6306143C@suutari.haapa.mmm.fi>

 
Mateusz ?oskot wrote:

> Jukka Rahkonen wrote:
> > I took the successful query sent by Ari from the TinyOWS 
> log and copied it
> > literally into Windows and this way it works:
> >
> > -where name='H??meenkyl??'
> 
> Windows Command Prompt can work with UTF-8 characters if you change
> codepage to UTF-8:
> 
> 0) Open new prompt (cmd.exe)
> 1) Change font to Lucida Concole
> 3) chcp 65001
> 
> And OGR can consume filter without problems:
> 
> -where "name=\"H?meenkyl?\""
> 
> Note, the \"\" is needed to not to confuse OGR SQL compilers,
> otherwise value H?meenkyl?
> will be parsed as OGR SQL type SNT_COLUMN instead of SNT_CONSTANT for
> field value.
> 
> However, I think the problem may be with TinyOWS. It throws error;
> 
> <ows:ExceptionText>QUERY_STRING contains forbidden
> characters</ows:ExceptionText>
> 
> which is generated by TinyOWS:
> 
> http://www.tinyows.org/trac/browser/trunk/src/struct/cgi_reque
> st.c?rev=525#L208
> 
> where TinyOWS simply tests characters passed in request against fixed
> range: A-Za-z?-?
> Comparing extended ASII codes, the value '?' is outside of 
> this range anyway.
> 
> I get no WFS exception no OGR error when querying with some (not all)
> Polish diacritics:
> 
> ogrinfo WFS:http://hip.latuviitta.org/cgi-bin/tinyows
> lv:pks_tilastoalue_piste -where "name=\"?????\""
> 
> Certainly, it gives empty resultset.
> 
> I think it would be a good idea to try against different WFS server.

I followed your example but changing the font and chcp 65001 did not 
actually change anything as fas as I can see. OGR may consume
-where "name=\"H?meenkyl?\"" OK but as you said but TinyOWS denies it.
However,  -where name='H??meenkyl??' gives correct result. But 
it gave correct result even before changing the font and codepage. 

TinyOWS log shows your -where "name=\"?????\"" like "aescl" but I am not
sure if the characters have changed or if my console just shows them 
as ascii characters.

Mapserver behaves also as it did before. My codepage is now 65001 and 
-where "name=\"H?meenkyl?\"" gives http 500 error while 
-where name='H??meenkyl??' gives correct result.

-Jukka Rahkonen-



From even.rouault at mines-paris.org  Tue Jan  3 09:43:53 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan  3 09:44:55 2012
Subject: [gdal-dev] Re: WFS and -where with non-ASCII characters
In-Reply-To: <84446DEF76453C439E9E97E438E13A6306143C@suutari.haapa.mmm.fi>
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com> <1325584797.4f02d19d0e25e@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63061332@suutari.haapa.mmm.fi>
	<loom.20120103T120528-834@post.gmane.org>
	<CABUeae-dmWTg1vOOuDzvi05_vOZ=MfGGwdbfU2HEfJUL5bf_nw@mail.gmail.com>
	<84446DEF76453C439E9E97E438E13A6306143C@suutari.haapa.mmm.fi>
Message-ID: <1325601833.4f03142974119@imp.free.fr>

Selon Rahkonen Jukka <Jukka.Rahkonen@mmmtike.fi>:

>
> Mateusz ??oskot wrote:
>
> > Jukka Rahkonen wrote:
> > > I took the successful query sent by Ari from the TinyOWS
> > log and copied it
> > > literally into Windows and this way it works:
> > >
> > > -where name='H????meenkyl????'
> >
> > Windows Command Prompt can work with UTF-8 characters if you change
> > codepage to UTF-8:
> >
> > 0) Open new prompt (cmd.exe)
> > 1) Change font to Lucida Concole
> > 3) chcp 65001
> >
> > And OGR can consume filter without problems:
> >
> > -where "name=\"H??meenkyl??\""
> >
> > Note, the \"\" is needed to not to confuse OGR SQL compilers,
> > otherwise value H??meenkyl??
> > will be parsed as OGR SQL type SNT_COLUMN instead of SNT_CONSTANT for
> > field value.
> >
> > However, I think the problem may be with TinyOWS. It throws error;
> >
> > <ows:ExceptionText>QUERY_STRING contains forbidden
> > characters</ows:ExceptionText>
> >
> > which is generated by TinyOWS:
> >
> > http://www.tinyows.org/trac/browser/trunk/src/struct/cgi_reque
> > st.c?rev=525#L208
> >
> > where TinyOWS simply tests characters passed in request against fixed
> > range: A-Za-z??-??
> > Comparing extended ASII codes, the value '??' is outside of
> > this range anyway.
> >
> > I get no WFS exception no OGR error when querying with some (not all)
> > Polish diacritics:
> >
> > ogrinfo WFS:http://hip.latuviitta.org/cgi-bin/tinyows
> > lv:pks_tilastoalue_piste -where "name=\"?
????????\""
> >
> > Certainly, it gives empty resultset.
> >
> > I think it would be a good idea to try against different WFS server.
>
> I followed your example but changing the font and chcp 65001 did not
> actually change anything as fas as I can see. OGR may consume
> -where "name=\"H??meenkyl??\"" OK but as you said but TinyOWS denies it.
> However,  -where name='H????meenkyl????' gives correct result. But
> it gave correct result even before changing the font and codepage.
>
> TinyOWS log shows your -where "name=\"?
????????\"" like "aescl" but I am not
> sure if the characters have changed or if my console just shows them
> as ascii characters.
>
> Mapserver behaves also as it did before. My codepage is now 65001 and
> -where "name=\"H??meenkyl??\"" gives http 500 error while
> -where name='H????meenkyl????' gives correct result.

Yes, your observation confirms my little testing. Mateusz' trick with chcp
indeed fixes the display of UTF-8 characters in the console, but when I enter an
accentuated character, the command line utilities consume it as Latin1.
Note: I'm on Windows xp.

I've verified it with a trivial code compiled with MSVC :

int main(int argc, char* argv[])
{
   printf("%d\n", strlen(argv[1]));
   return 0;
}

If I try "test ?ven", it prints 4, whereas it should print 5 if it was really
UTF-8.

>
> -Jukka Rahkonen-
>
>
>
>


From Jukka.Rahkonen at mmmtike.fi  Tue Jan  3 09:51:26 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Tue Jan  3 09:51:48 2012
Subject: [gdal-dev] Re: WFS and -where with non-ASCII characters
In-Reply-To: <1325601833.4f03142974119@imp.free.fr>
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com> <1325584797.4f02d19d0e25e@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63061332@suutari.haapa.mmm.fi>
	<loom.20120103T120528-834@post.gmane.org>
	<CABUeae-dmWTg1vOOuDzvi05_vOZ=MfGGwdbfU2HEfJUL5bf_nw@mail.gmail.com>
	<84446DEF76453C439E9E97E438E13A6306143C@suutari.haapa.mmm.fi>
	<1325601833.4f03142974119@imp.free.fr>
Message-ID: <84446DEF76453C439E9E97E438E13A6306145D@suutari.haapa.mmm.fi>

It starts to be really amusing to see how some characters are changing when they travel a few times between Finland, France and Poland :)

-Jukka-

> -----Alkuper?inen viesti-----
> L?hett?j?: Even Rouault [mailto:even.rouault@mines-paris.org] 
> L?hetetty: 3. tammikuuta 2012 16:44
> Vastaanottaja: Rahkonen Jukka
> Kopio: 'gdal-dev@lists.osgeo.org'
> Aihe: Re: [gdal-dev] Re: WFS and -where with non-ASCII characters
> 
> Selon Rahkonen Jukka <Jukka.Rahkonen@mmmtike.fi>:
> 
> >
> > Mateusz ??oskot wrote:
> >
> > > Jukka Rahkonen wrote:
> > > > I took the successful query sent by Ari from the TinyOWS
> > > log and copied it
> > > > literally into Windows and this way it works:
> > > >
> > > > -where name='H????meenkyl????'
> > >
> > > Windows Command Prompt can work with UTF-8 characters if 
> you change
> > > codepage to UTF-8:
> > >
> > > 0) Open new prompt (cmd.exe)
> > > 1) Change font to Lucida Concole
> > > 3) chcp 65001
> > >
> > > And OGR can consume filter without problems:
> > >
> > > -where "name=\"H??meenkyl??\""
> > >
> > > Note, the \"\" is needed to not to confuse OGR SQL compilers,
> > > otherwise value H??meenkyl??
> > > will be parsed as OGR SQL type SNT_COLUMN instead of 
> SNT_CONSTANT for
> > > field value.
> > >
> > > However, I think the problem may be with TinyOWS. It throws error;
> > >
> > > <ows:ExceptionText>QUERY_STRING contains forbidden
> > > characters</ows:ExceptionText>
> > >
> > > which is generated by TinyOWS:
> > >
> > > http://www.tinyows.org/trac/browser/trunk/src/struct/cgi_reque
> > > st.c?rev=525#L208
> > >
> > > where TinyOWS simply tests characters passed in request 
> against fixed
> > > range: A-Za-z??-??
> > > Comparing extended ASII codes, the value '??' is outside of
> > > this range anyway.
> > >
> > > I get no WFS exception no OGR error when querying with 
> some (not all)
> > > Polish diacritics:
> > >
> > > ogrinfo WFS:http://hip.latuviitta.org/cgi-bin/tinyows
> > > lv:pks_tilastoalue_piste -where "name=\"??????????\""
> > >
> > > Certainly, it gives empty resultset.
> > >
> > > I think it would be a good idea to try against different 
> WFS server.
> >
> > I followed your example but changing the font and chcp 65001 did not
> > actually change anything as fas as I can see. OGR may consume
> > -where "name=\"H??meenkyl??\"" OK but as you said but 
> TinyOWS denies it.
> > However,  -where name='H????meenkyl????' gives correct result. But
> > it gave correct result even before changing the font and codepage.
> >
> > TinyOWS log shows your -where "name=\"??????????\"" like 
> "aescl" but I am not
> > sure if the characters have changed or if my console just shows them
> > as ascii characters.
> >
> > Mapserver behaves also as it did before. My codepage is now 
> 65001 and
> > -where "name=\"H??meenkyl??\"" gives http 500 error while
> > -where name='H????meenkyl????' gives correct result.
> 
> Yes, your observation confirms my little testing. Mateusz' 
> trick with chcp
> indeed fixes the display of UTF-8 characters in the console, 
> but when I enter an
> accentuated character, the command line utilities consume it 
> as Latin1.
> Note: I'm on Windows xp.
> 
> I've verified it with a trivial code compiled with MSVC :
> 
> int main(int argc, char* argv[])
> {
>    printf("%d\n", strlen(argv[1]));
>    return 0;
> }
> 
> If I try "test ?ven", it prints 4, whereas it should print 5 
> if it was really
> UTF-8.
> 
> >
> > -Jukka Rahkonen-
> >
> >
> >
> >
> 
> 
> 
From mateusz at loskot.net  Tue Jan  3 09:56:14 2012
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Tue Jan  3 09:57:17 2012
Subject: [gdal-dev] Re: WFS and -where with non-ASCII characters
In-Reply-To: <1325601833.4f03142974119@imp.free.fr>
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com> <1325584797.4f02d19d0e25e@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63061332@suutari.haapa.mmm.fi>
	<loom.20120103T120528-834@post.gmane.org>
	<CABUeae-dmWTg1vOOuDzvi05_vOZ=MfGGwdbfU2HEfJUL5bf_nw@mail.gmail.com>
	<84446DEF76453C439E9E97E438E13A6306143C@suutari.haapa.mmm.fi>
	<1325601833.4f03142974119@imp.free.fr>
Message-ID: <CABUeae9q1jSZ5W-j6LucBsOBT1pGc_sYaEccO=_8W1Vf6ZAcfw@mail.gmail.com>

On 3 January 2012 14:43, Even Rouault <even.rouault@mines-paris.org> wrote:
> Selon Rahkonen Jukka <Jukka.Rahkonen@mmmtike.fi>:
>>
>> Mapserver behaves also as it did before. My codepage is now 65001 and
>> -where "name=\"H?meenkyl?\"" gives http 500 error while
>> -where name='H??meenkyl??' gives correct result.
>
> Yes, your observation confirms my little testing. Mateusz' trick with chcp
> indeed fixes the display of UTF-8 characters in the console, but when I enter an
> accentuated character, the command line utilities consume it as Latin1.
> Note: I'm on Windows xp.
>
> I've verified it with a trivial code compiled with MSVC :
>
> int main(int argc, char* argv[])
> {
> ? printf("%d\n", strlen(argv[1]));
> ? return 0;
> }
>
> If I try "test ?ven", it prints 4, whereas it should print 5 if it was really
> UTF-8.


Even,

Your test program works for me as expected for text with
all Polish diacritics included

http://www.flickr.com/photos/mloskot/6628216939/

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From even.rouault at mines-paris.org  Tue Jan  3 10:22:08 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan  3 10:22:42 2012
Subject: [gdal-dev] Re: WFS and -where with non-ASCII characters
In-Reply-To: <CABUeae9q1jSZ5W-j6LucBsOBT1pGc_sYaEccO=_8W1Vf6ZAcfw@mail.gmail.com>
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com> <1325584797.4f02d19d0e25e@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63061332@suutari.haapa.mmm.fi>
	<loom.20120103T120528-834@post.gmane.org>
	<CABUeae-dmWTg1vOOuDzvi05_vOZ=MfGGwdbfU2HEfJUL5bf_nw@mail.gmail.com>
	<84446DEF76453C439E9E97E438E13A6306143C@suutari.haapa.mmm.fi>
	<1325601833.4f03142974119@imp.free.fr>
	<CABUeae9q1jSZ5W-j6LucBsOBT1pGc_sYaEccO=_8W1Vf6ZAcfw@mail.gmail.com>
Message-ID: <1325604128.4f031d2068f87@imp.free.fr>

> Even,
>
> Your test program works for me as expected for text with
> all Polish diacritics included

As expected, really ? I can see on the photo that there are 17 characters in the
string and that it prints 17. But I'd say it is *not* the expected result. If it
was UTF-8, it would be more than 17 because strlen() will/should return the
number of bytes.

>
> http://www.flickr.com/photos/mloskot/6628216939/
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
>


From max at geoinova.com  Tue Jan  3 10:40:00 2012
From: max at geoinova.com (Maksim Sestic)
Date: Tue Jan  3 10:40:32 2012
Subject: [gdal-dev] Re: C# bindings - setting up progress delegate for
	Gdal.Open()
In-Reply-To: <1325600666.4f030f9a4bf4b@imp.free.fr>
References: <1325587363369-7146342.post@n2.nabble.com>
	<1325587786.4f02dd4a1df38@imp.free.fr>
	<1325588745420-7146387.post@n2.nabble.com>
	<1325594300.4f02f6bc4cf5b@imp.free.fr>
	<1325596801178-7146691.post@n2.nabble.com>
	<1325600666.4f030f9a4bf4b@imp.free.fr>
Message-ID: <1325605200464-7147105.post@n2.nabble.com>

Hi Even,


Even Rouault wrote
> 
> GDALOpen() will divide into tiles, but will not read them. You need to
> call
> CreateCopy() or RasterIO() for that.
> 
> So :
> 
> 1) Open() on the XML description is a fast operation that doesn't download
> anything and doesn't need progress
> 2) CreateCopy() has a progress callback which will be regularly called.
> Depending on the output driver, it might not be called for each tile
> though, but
> perhaps for each line.
> 

You're right, my Gdal.Open() presumption was completely wrong :-)

How do I get access to GDAL Wiki? I'd like to point this out overthere
(including other mgd. bindings-related details others may find useful as
well).

Regards,
Maksim Sestic

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/C-bindings-setting-up-progress-delegate-for-Gdal-Open-tp7146342p7147105.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mateusz at loskot.net  Tue Jan  3 10:39:51 2012
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Tue Jan  3 10:40:44 2012
Subject: [gdal-dev] Re: WFS and -where with non-ASCII characters
In-Reply-To: <1325604128.4f031d2068f87@imp.free.fr>
References: <loom.20120103T085634-540@post.gmane.org>
	<4F02C026.3070808@gmail.com> <1325584797.4f02d19d0e25e@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63061332@suutari.haapa.mmm.fi>
	<loom.20120103T120528-834@post.gmane.org>
	<CABUeae-dmWTg1vOOuDzvi05_vOZ=MfGGwdbfU2HEfJUL5bf_nw@mail.gmail.com>
	<84446DEF76453C439E9E97E438E13A6306143C@suutari.haapa.mmm.fi>
	<1325601833.4f03142974119@imp.free.fr>
	<CABUeae9q1jSZ5W-j6LucBsOBT1pGc_sYaEccO=_8W1Vf6ZAcfw@mail.gmail.com>
	<1325604128.4f031d2068f87@imp.free.fr>
Message-ID: <CABUeae9NCPPnRNjG4yyBR01ep9V5SUWD5Zz47TwfuwdNOD+RNA@mail.gmail.com>

On 3 January 2012 15:22, Even Rouault <even.rouault@mines-paris.org> wrote:
>> Even,
>>
>> Your test program works for me as expected for text with
>> all Polish diacritics included
>
> As expected, really ? I can see on the photo that there are 17 characters in the
> string and that it prints 17. But I'd say it is *not* the expected result. If it
> was UTF-8, it would be more than 17 because strlen() will/should return the
> number of bytes.

Even,

You are right. I assumed wrong correctness: Polish diacritics would
fit in UTF-8
based on their single-byte encoding of extended ASCII codes.
Certainly, they are 2-byte long in UTF-8.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From dmorissette at mapgears.com  Tue Jan  3 10:34:40 2012
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Jan  3 10:42:12 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
In-Reply-To: <201201011730.58471.even.rouault@mines-paris.org>
References: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
	<201201011730.58471.even.rouault@mines-paris.org>
Message-ID: <4F032010.2090808@mapgears.com>

On 12-01-01 11:30 AM, Even Rouault wrote:
>
> *Last minute* : I've just tested with CentOS 4.7 and CentOS 5.6 and I've found
> a compilation problem with the sqlite driver (and in the GML driver when
> sqlite3 support is available). Those 2 OS ship with sqlite 3.3.6, but we now
> use various methods that weren't yet available. This is now fixed in trunk and
> 1.9 branch (see http://trac.osgeo.org/gdal/ticket/4418 for details ). Not sure
> if it is worth a RC2.
>

A RC2 would sound like a good idea to me, just to make sure all the last 
minute fixes are tested on various platforms before going out the door.


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From even.rouault at mines-paris.org  Tue Jan  3 10:57:45 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan  3 10:58:30 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
In-Reply-To: <4F032010.2090808@mapgears.com>
References: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
	<201201011730.58471.even.rouault@mines-paris.org>
	<4F032010.2090808@mapgears.com>
Message-ID: <1325606265.4f03257940eea@imp.free.fr>

Selon Daniel Morissette <dmorissette@mapgears.com>:

> On 12-01-01 11:30 AM, Even Rouault wrote:
> >
> > *Last minute* : I've just tested with CentOS 4.7 and CentOS 5.6 and I've
> found
> > a compilation problem with the sqlite driver (and in the GML driver when
> > sqlite3 support is available). Those 2 OS ship with sqlite 3.3.6, but we
> now
> > use various methods that weren't yet available. This is now fixed in trunk
> and
> > 1.9 branch (see http://trac.osgeo.org/gdal/ticket/4418 for details ). Not
> sure
> > if it is worth a RC2.
> >
>
> A RC2 would sound like a good idea to me, just to make sure all the last
> minute fixes are tested on various platforms before going out the door.

If we decided to release RC1 (which would consist in renaming the
gdal-1.9.0rc1.tar.gz into gdal-1.9.0.tar.gz), the above fixes in the 1.9 branch
would not be included in it, so it won't break for other platforms.

But it might be perhaps interesting to have an RC2 with some of the build fixes
identified by William. I'll try to have a look tonight.

>
>
> --
> Daniel Morissette
> http://www.mapgears.com/
> Provider of Professional MapServer Support since 2000
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From warmerdam at pobox.com  Tue Jan  3 13:01:51 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan  3 13:02:33 2012
Subject: [gdal-dev] Motion: Authorize Islandwood Funding for Brian Case
In-Reply-To: <4EE84A57.1080005@pobox.com>
References: <4EE84A57.1080005@pobox.com>
Message-ID: <CA+YzLBc1tG8BW0d18TWbye0SnDe7f6rw23-gk7sig_69yw50Vw@mail.gmail.com>

On Tue, Dec 13, 2011 at 11:03 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Motion: The GDAL PSC authorizes funding up to US$525 to pay entrance fees
> to the Islandwood Code Sprint for Brian Case.

Folks,

I declare this motion passed with support from Tamas, Even,
Frank, Daniel and Howard.   If there is any other GDAL contributors
interested in attending the sprint under similar arrangements let me
know.  There are still openings available as I understand it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From jeff at unterbahn.com  Tue Jan  3 17:10:28 2012
From: jeff at unterbahn.com (Jeffrey Warren)
Date: Tue Jan  3 17:11:17 2012
Subject: [gdal-dev] gradient alpha transparency bands for edge-blending in
	gdal_merge
In-Reply-To: <4F015D31.2070303@free.fr>
References: <CAGqfm_CRD3csk4KGypp2FkqaFCEiRApXBmNniJ4Y1yQgCw22QA@mail.gmail.com>
	<4F015D31.2070303@free.fr>
Message-ID: <CAGqfm_D7zbaVTc7d3-TQf4JzTkBBy-9s5cPiLDn3S6RdXbjvKQ@mail.gmail.com>

That did work; thanks very much!

closed:
https://github.com/jywarren/mapknitter/issues/15#issuecomment-3344500

On Mon, Jan 2, 2012 at 12:30 AM, Jean-Claude Repetto <jrepetto@free.fr>wrote:

> On 01/02/12 05:55, Jeffrey Warren wrote:
>
>> I'm using some images with blurred edges (like
>> http://tinyurl.com/6r2s3z4) to mosaic a larger geotiff with gdal_merge,
>> but it doesn't respect transparency that's not either 0 or 1. Is there
>> any way to achieve this without coding my own merge tool?
>>
>> This is what results: http://tinyurl.com/7xckw98
>>
>> The command i'm using (gdal 1.7.3 on ubuntu 11.10) is:
>>
>> gdal_merge.py -n 0 -o warren-township-geo.tif 47539-geo.tif
>> 47543-geo.tif 47547-geo.tif
>>
>> More detail on this issue is here:
>> https://github.com/jywarren/**mapknitter/issues/15#**issuecomment-3326956<https://github.com/jywarren/mapknitter/issues/15#issuecomment-3326956>
>>
>> I'd appreciate any tips, and I am wondering if I can contribute if this
>> functionality does not exist already.
>>
>> Jeff
>>
>
> Hi Jeff,
>
> I am not sure it will solve your problem, but you should try gdalwarp to
> merge your files.
> gdal_merge.py is only an example program to show how to use the Python
> API. The correct tool to merge files is gdalwarp.
>
> Jean-Claude
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120103/bcf6b87d/attachment.html
From etourigny.dev at gmail.com  Tue Jan  3 17:25:25 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Jan  3 17:26:10 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
In-Reply-To: <1325606265.4f03257940eea@imp.free.fr>
References: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
	<201201011730.58471.even.rouault@mines-paris.org>
	<4F032010.2090808@mapgears.com>
	<1325606265.4f03257940eea@imp.free.fr>
Message-ID: <CA+TxYvO_+qJ8RkQAUgzQXNe8Yyf24K5P_eoETM1-5L1hf8eWDA@mail.gmail.com>

+1 for a rc2, including fixes and netcdf-4 testing for osx and Even's bugfixes.

On Tue, Jan 3, 2012 at 12:57 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Selon Daniel Morissette <dmorissette@mapgears.com>:
>
>> On 12-01-01 11:30 AM, Even Rouault wrote:
>> >
>> > *Last minute* : I've just tested with CentOS 4.7 and CentOS 5.6 and I've
>> found
>> > a compilation problem with the sqlite driver (and in the GML driver when
>> > sqlite3 support is available). Those 2 OS ship with sqlite 3.3.6, but we
>> now
>> > use various methods that weren't yet available. This is now fixed in trunk
>> and
>> > 1.9 branch (see http://trac.osgeo.org/gdal/ticket/4418 for details ). Not
>> sure
>> > if it is worth a RC2.
>> >
>>
>> A RC2 would sound like a good idea to me, just to make sure all the last
>> minute fixes are tested on various platforms before going out the door.
>
> If we decided to release RC1 (which would consist in renaming the
> gdal-1.9.0rc1.tar.gz into gdal-1.9.0.tar.gz), the above fixes in the 1.9 branch
> would not be included in it, so it won't break for other platforms.
>
> But it might be perhaps interesting to have an RC2 with some of the build fixes
> identified by William. I'll try to have a look tonight.
>
>>
>>
>> --
>> Daniel Morissette
>> http://www.mapgears.com/
>> Provider of Professional MapServer Support since 2000
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Tue Jan  3 17:29:07 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan  3 17:29:15 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
In-Reply-To: <CA+TxYvO_+qJ8RkQAUgzQXNe8Yyf24K5P_eoETM1-5L1hf8eWDA@mail.gmail.com>
References: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
	<201201011730.58471.even.rouault@mines-paris.org>
	<4F032010.2090808@mapgears.com>
	<1325606265.4f03257940eea@imp.free.fr>
	<CA+TxYvO_+qJ8RkQAUgzQXNe8Yyf24K5P_eoETM1-5L1hf8eWDA@mail.gmail.com>
Message-ID: <CA+YzLBevr2KnhnYR1yNQmMmmmDox3-+4BF1L6KH3Gjof+cD7Ug@mail.gmail.com>

Folks,

To make it official, I'll vote -1 on promoting RC1 as final.  I'll plan to
cut an RC2 in a couple hours.  If there are any pending fixes needed
first please let me know as soon as possible.  I can certainly put it off
a bit.

Best regards,
Frank

On Tue, Jan 3, 2012 at 2:25 PM, Etienne Tourigny
<etourigny.dev@gmail.com> wrote:
> +1 for a rc2, including fixes and netcdf-4 testing for osx and Even's bugfixes.
>
> On Tue, Jan 3, 2012 at 12:57 PM, Even Rouault
> <even.rouault@mines-paris.org> wrote:
>> Selon Daniel Morissette <dmorissette@mapgears.com>:
>>
>>> On 12-01-01 11:30 AM, Even Rouault wrote:
>>> >
>>> > *Last minute* : I've just tested with CentOS 4.7 and CentOS 5.6 and I've
>>> found
>>> > a compilation problem with the sqlite driver (and in the GML driver when
>>> > sqlite3 support is available). Those 2 OS ship with sqlite 3.3.6, but we
>>> now
>>> > use various methods that weren't yet available. This is now fixed in trunk
>>> and
>>> > 1.9 branch (see http://trac.osgeo.org/gdal/ticket/4418 for details ). Not
>>> sure
>>> > if it is worth a RC2.
>>> >
>>>
>>> A RC2 would sound like a good idea to me, just to make sure all the last
>>> minute fixes are tested on various platforms before going out the door.
>>
>> If we decided to release RC1 (which would consist in renaming the
>> gdal-1.9.0rc1.tar.gz into gdal-1.9.0.tar.gz), the above fixes in the 1.9 branch
>> would not be included in it, so it won't break for other platforms.
>>
>> But it might be perhaps interesting to have an RC2 with some of the build fixes
>> identified by William. I'll try to have a look tonight.
>>
>>>
>>>
>>> --
>>> Daniel Morissette
>>> http://www.mapgears.com/
>>> Provider of Professional MapServer Support since 2000
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Tue Jan  3 17:47:39 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan  3 17:47:05 2012
Subject: [gdal-dev] broken wms examples (frmt page)
In-Reply-To: <CA+Ei1OcK0KziiRN4JAJwZ1JAoShpG-pjkaOL8wt69fLkGefu0w@mail.gmail.com>
References: <CA+Ei1OcK0KziiRN4JAJwZ1JAoShpG-pjkaOL8wt69fLkGefu0w@mail.gmail.com>
Message-ID: <201201032347.39239.even.rouault@mines-paris.org>

Le lundi 02 janvier 2012 21:29:25, Martin Landa a ?crit :
> Hi,
> 
> some of the examples from WMS frmt page [1] do not work, eg.
> 
> gdal_translate -of JPEG -outsize 500 250
> frmt_wms_onearth_global_mosaic.xml onearth_global_mosaic.jpg
> Input file size is 2949120, 1474560
> 0ERROR 1: GDALWMS: The server returned exception: This server no
> longer provides full WMS services!
> 
> ERROR 1: frmt_wms_onearth_global_mosaic.xml, band 1: IReadBlock failed
> at X offset 0, Y offset 0
> 
> I am using gdal from SVN trunk.

Yes, the OnEarth server no longer accept regular WMS. I've added a note in the 
WMS driver documentation page about that, so that people aren't surprised. 
Ultimately another working example should be found, and if possible one that 
doesn't disappear too early ;-)

> 
> Best regards, Martin Landa
> 
> [1] http://www.gdal.org/frmt_wms.html
From etourigny.dev at gmail.com  Tue Jan  3 17:49:46 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Jan  3 17:50:10 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
In-Reply-To: <C7A2626D-F3F9-43AF-B108-E3D08097A103@kyngchaos.com>
References: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
	<3B16DD3B-C530-45AD-A178-9A79D640B6E9@kyngchaos.com>
	<CA+TxYvMcLJ0yxtjFEUQ9SQcRHQb=KR=cRj4s9NfH5p9o+=TOgA@mail.gmail.com>
	<C7A2626D-F3F9-43AF-B108-E3D08097A103@kyngchaos.com>
Message-ID: <CA+TxYvOdvvnjUZ1sisA_Lxy513kg37xP+Eo1MoNERFZxSxw2pw@mail.gmail.com>

Folks,

I would appreciate minimal testing for netcdf-4 in osx before
releasing rc2 (which should take a few days at the most).

Wiliam:

The driver in 1.9 includes support for netcdf-4, which uses hdf5 for
storage and supports deflate compression as well as a new data model.
Other important bugfixes and support for CF-1.5 have been included as
well.There are also some new autotests that are skipped if netcdf-4 is
not available to GDAL, if these pass the build should be fine.

More details here:
http://www.gdal.org/frmt_netcdf.html (Driver Improvements (GDAL >= 1.9.0) )
http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements
http://trac.osgeo.org/gdal/wiki/NetCDF

configure script should detect netcdf-4 if it is installed (and
nc-config can be found in the appropriate path), and if hdf5 is
available to gdal and netcdf-4 was built with netcdf-4/hdf5 support
(shared build). You might need to add --with-netcdf=path_to_netcdf if
it doesn't get detected (right after hdf4 and hdf5 detection).

I have sent a few emails to the list:
http://lists.osgeo.org/pipermail/gdal-dev/2011-December/031116.html
http://lists.osgeo.org/pipermail/gdal-dev/2011-October/030472.html

Bug entries for netcdf-4 support (including some tests)
http://trac.osgeo.org/gdal/ticket/3890
http://trac.osgeo.org/gdal/ticket/2379
http://trac.osgeo.org/gdal/ticket/4408


Wiliam, if have any problems building I'll be happy to help, and if
any of the tests fail please file a bug report.  I am on vacation but
have access to internet at night.

regards,
Etienne

On Tue, Jan 3, 2012 at 11:47 AM, William Kyngesburye
<woklist@kyngchaos.com> wrote:
> I've always built netcdf without v4 API because GDAL didn't support it. ?I missed that addition in GDAL 1.9, so it looks like I have more work for compilation and testing ;)
>
> I saw some time ago that HDF5 added some capbility for integration with netcdf4, GDAL 1.9 supports this now?
>
> On Jan 3, 2012, at 8:04 AM, Etienne Tourigny wrote:
>
>> William,
>>
>> Can you comment on the status of support for netcdf4 + hdf5 in mac osx
>> ? Has that been tested, or is it possible to include them in your
>> builds?
>>
>> There have been a number of improvements to the netcdf driver for
>> 1.9.0 (including support for netcdf-4), it would be nice to have that
>> included in your builds. ?If you need help I can try to assist, but I
>> don't have a mac nor experience with osx.
>>
>> thanks,
>> Etienne
>>
>> On Mon, Jan 2, 2012 at 10:20 PM, William Kyngesburye
>> <woklist@kyngchaos.com> wrote:
>>> One configuration problem so far on OS X:
>>>
>>> - with-freexl - doesn't test for freexl with libiconv (I have freexl compiled as static library, so it doesn't automatically link libiconv). ?I just added $LIBICONV to both the freexl tests to get this to work, but another test for whether freexl needs iconv is really needed.
>>>
>>>
>>> And one compile error:
>>>
>>> webpdataset.cpp:536: error: invalid conversion from 'int' to 'WebPEncCSP'
>>>
>>> I changed the offending line to:
>>>
>>> ? ?sPicture.colorspace = WEBP_YUV420;
>>>
>>> and it compiles.
>>>
>>>
>>> If these can be fixed for 1.9.0 release that would be great, otherwise I'll add bug reports.
>>>
>>> On Dec 31, 2011, at 7:38 PM, Frank Warmerdam wrote:
>>>
>>>> Motion: To promote the GDAL/OGR 1.9.0RC1 release candidate as
>>>> ? ? ? ? ? ?the final GDAL/OGR 1.9.0 release.
>>>>
>>>> +1 Frank
>>>>
>>>> --
>>>>
>>>> I have done a wee bit of testing and the release candidate seems
>>>> solid. ?Other PSC members are encouraged to test and vote.
>>>> Feedback from other users is also welcome.
>>>>
>>>> Voting will remain open until at least the end of day on
>>>> Tuesday.
>>>>
>>>> Best regards,
>>>> --
>>>> ---------------------------------------+--------------------------------------
>>>> I set the clouds in motion - turn up ? | Frank Warmerdam, warmerdam@pobox.com
>>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>>> and watch the world go round - Rush ? ?| Geospatial Software Developer
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> -----
>>> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>>> http://www.kyngchaos.com/
>>>
>>> "The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."
>>>
>>> - the wisdom of Tarzan
>>>
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "Oh, look, I seem to have fallen down a deep, dark hole. ?Now what does that remind me of? ?Ah, yes - life."
>
> - Marvin
>
>
From jluis at ualg.pt  Tue Jan  3 18:43:46 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Jan  3 18:44:53 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
In-Reply-To: <CA+TxYvOdvvnjUZ1sisA_Lxy513kg37xP+Eo1MoNERFZxSxw2pw@mail.gmail.com>
References: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>	<3B16DD3B-C530-45AD-A178-9A79D640B6E9@kyngchaos.com>	<CA+TxYvMcLJ0yxtjFEUQ9SQcRHQb=KR=cRj4s9NfH5p9o+=TOgA@mail.gmail.com>	<C7A2626D-F3F9-43AF-B108-E3D08097A103@kyngchaos.com>
	<CA+TxYvOdvvnjUZ1sisA_Lxy513kg37xP+Eo1MoNERFZxSxw2pw@mail.gmail.com>
Message-ID: <4F0392B2.2070206@ualg.pt>

Etienne,

For what it worth, I repeated the tests as for Windows in 
http://trac.osgeo.org/gdal/ticket/3166 and got the expected behavior.

Joaquim

> Folks,
>
> I would appreciate minimal testing for netcdf-4 in osx before
> releasing rc2 (which should take a few days at the most).
>
> Wiliam:
>
> The driver in 1.9 includes support for netcdf-4, which uses hdf5 for
> storage and supports deflate compression as well as a new data model.
> Other important bugfixes and support for CF-1.5 have been included as
> well.There are also some new autotests that are skipped if netcdf-4 is
> not available to GDAL, if these pass the build should be fine.
>
> More details here:
> http://www.gdal.org/frmt_netcdf.html (Driver Improvements (GDAL>= 1.9.0) )
> http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements
> http://trac.osgeo.org/gdal/wiki/NetCDF
>
> configure script should detect netcdf-4 if it is installed (and
> nc-config can be found in the appropriate path), and if hdf5 is
> available to gdal and netcdf-4 was built with netcdf-4/hdf5 support
> (shared build). You might need to add --with-netcdf=path_to_netcdf if
> it doesn't get detected (right after hdf4 and hdf5 detection).
>
> I have sent a few emails to the list:
> http://lists.osgeo.org/pipermail/gdal-dev/2011-December/031116.html
> http://lists.osgeo.org/pipermail/gdal-dev/2011-October/030472.html
>
> Bug entries for netcdf-4 support (including some tests)
> http://trac.osgeo.org/gdal/ticket/3890
> http://trac.osgeo.org/gdal/ticket/2379
> http://trac.osgeo.org/gdal/ticket/4408
>
>
> Wiliam, if have any problems building I'll be happy to help, and if
> any of the tests fail please file a bug report.  I am on vacation but
> have access to internet at night.
>
> regards,
> Etienne
>
> On Tue, Jan 3, 2012 at 11:47 AM, William Kyngesburye
> <woklist@kyngchaos.com>  wrote:
>> I've always built netcdf without v4 API because GDAL didn't support it.  I missed that addition in GDAL 1.9, so it looks like I have more work for compilation and testing ;)
>>
>> I saw some time ago that HDF5 added some capbility for integration with netcdf4, GDAL 1.9 supports this now?
>>
>> On Jan 3, 2012, at 8:04 AM, Etienne Tourigny wrote:
>>
>>> William,
>>>
>>> Can you comment on the status of support for netcdf4 + hdf5 in mac osx
>>> ? Has that been tested, or is it possible to include them in your
>>> builds?
>>>
>>> There have been a number of improvements to the netcdf driver for
>>> 1.9.0 (including support for netcdf-4), it would be nice to have that
>>> included in your builds.  If you need help I can try to assist, but I
>>> don't have a mac nor experience with osx.
>>>
>>> thanks,
>>> Etienne
>>>
>>> On Mon, Jan 2, 2012 at 10:20 PM, William Kyngesburye
>>> <woklist@kyngchaos.com>  wrote:
>>>> One configuration problem so far on OS X:
>>>>
>>>> - with-freexl - doesn't test for freexl with libiconv (I have freexl compiled as static library, so it doesn't automatically link libiconv).  I just added $LIBICONV to both the freexl tests to get this to work, but another test for whether freexl needs iconv is really needed.
>>>>
>>>>
>>>> And one compile error:
>>>>
>>>> webpdataset.cpp:536: error: invalid conversion from 'int' to 'WebPEncCSP'
>>>>
>>>> I changed the offending line to:
>>>>
>>>>     sPicture.colorspace = WEBP_YUV420;
>>>>
>>>> and it compiles.
>>>>
>>>>
>>>> If these can be fixed for 1.9.0 release that would be great, otherwise I'll add bug reports.
>>>>
>>>> On Dec 31, 2011, at 7:38 PM, Frank Warmerdam wrote:
>>>>
>>>>> Motion: To promote the GDAL/OGR 1.9.0RC1 release candidate as
>>>>>             the final GDAL/OGR 1.9.0 release.
>>>>>
>>>>> +1 Frank
>>>>>
>>>>> --
>>>>>
>>>>> I have done a wee bit of testing and the release candidate seems
>>>>> solid.  Other PSC members are encouraged to test and vote.
>>>>> Feedback from other users is also welcome.
>>>>>
>>>>> Voting will remain open until at least the end of day on
>>>>> Tuesday.
>>>>>
>>>>> Best regards,
>>>>> --
>>>>> ---------------------------------------+--------------------------------------
>>>>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>>>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>>>> and watch the world go round - Rush    | Geospatial Software Developer
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> -----
>>>> William Kyngesburye<kyngchaos*at*kyngchaos*dot*com>
>>>> http://www.kyngchaos.com/
>>>>
>>>> "The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."
>>>>
>>>> - the wisdom of Tarzan
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> -----
>> William Kyngesburye<kyngchaos*at*kyngchaos*dot*com>
>> http://www.kyngchaos.com/
>>
>> "Oh, look, I seem to have fallen down a deep, dark hole.  Now what does that remind me of?  Ah, yes - life."
>>
>> - Marvin
>>
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From woklist at kyngchaos.com  Tue Jan  3 21:46:42 2012
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Jan  3 21:47:27 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
In-Reply-To: <CA+TxYvOdvvnjUZ1sisA_Lxy513kg37xP+Eo1MoNERFZxSxw2pw@mail.gmail.com>
References: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
	<3B16DD3B-C530-45AD-A178-9A79D640B6E9@kyngchaos.com>
	<CA+TxYvMcLJ0yxtjFEUQ9SQcRHQb=KR=cRj4s9NfH5p9o+=TOgA@mail.gmail.com>
	<C7A2626D-F3F9-43AF-B108-E3D08097A103@kyngchaos.com>
	<CA+TxYvOdvvnjUZ1sisA_Lxy513kg37xP+Eo1MoNERFZxSxw2pw@mail.gmail.com>
Message-ID: <15B1A5D6-0DDA-4618-985E-C249A6655576@kyngchaos.com>

OK, I have NetCDF now with HDF4/5 & DAP.  Now configure problems again (again, netcdf is static library, as are HDF4, HDF5 and DAP):

My netcdf needs curl (it defaults to using curl), but GDAL doesn't test netcdf with that (curl is tested much later).

Netcdf4 also needs some symbols from libhdf5_hl, but this is not checked for.


On Jan 3, 2012, at 4:49 PM, Etienne Tourigny wrote:

> Folks,
> 
> I would appreciate minimal testing for netcdf-4 in osx before
> releasing rc2 (which should take a few days at the most).
> 
> Wiliam:
> 
> The driver in 1.9 includes support for netcdf-4, which uses hdf5 for
> storage and supports deflate compression as well as a new data model.
> Other important bugfixes and support for CF-1.5 have been included as
> well.There are also some new autotests that are skipped if netcdf-4 is
> not available to GDAL, if these pass the build should be fine.
> 
> More details here:
> http://www.gdal.org/frmt_netcdf.html (Driver Improvements (GDAL >= 1.9.0) )
> http://trac.osgeo.org/gdal/wiki/NetCDF_Improvements
> http://trac.osgeo.org/gdal/wiki/NetCDF
> 
> configure script should detect netcdf-4 if it is installed (and
> nc-config can be found in the appropriate path), and if hdf5 is
> available to gdal and netcdf-4 was built with netcdf-4/hdf5 support
> (shared build). You might need to add --with-netcdf=path_to_netcdf if
> it doesn't get detected (right after hdf4 and hdf5 detection).
> 
> I have sent a few emails to the list:
> http://lists.osgeo.org/pipermail/gdal-dev/2011-December/031116.html
> http://lists.osgeo.org/pipermail/gdal-dev/2011-October/030472.html
> 
> Bug entries for netcdf-4 support (including some tests)
> http://trac.osgeo.org/gdal/ticket/3890
> http://trac.osgeo.org/gdal/ticket/2379
> http://trac.osgeo.org/gdal/ticket/4408
> 
> 
> Wiliam, if have any problems building I'll be happy to help, and if
> any of the tests fail please file a bug report.  I am on vacation but
> have access to internet at night.
> 
> regards,
> Etienne
> 
> On Tue, Jan 3, 2012 at 11:47 AM, William Kyngesburye
> <woklist@kyngchaos.com> wrote:
>> I've always built netcdf without v4 API because GDAL didn't support it.  I missed that addition in GDAL 1.9, so it looks like I have more work for compilation and testing ;)
>> 
>> I saw some time ago that HDF5 added some capbility for integration with netcdf4, GDAL 1.9 supports this now?
>> 
>> On Jan 3, 2012, at 8:04 AM, Etienne Tourigny wrote:
>> 
>>> William,
>>> 
>>> Can you comment on the status of support for netcdf4 + hdf5 in mac osx
>>> ? Has that been tested, or is it possible to include them in your
>>> builds?
>>> 
>>> There have been a number of improvements to the netcdf driver for
>>> 1.9.0 (including support for netcdf-4), it would be nice to have that
>>> included in your builds.  If you need help I can try to assist, but I
>>> don't have a mac nor experience with osx.
>>> 
>>> thanks,
>>> Etienne
>>> 
>>> On Mon, Jan 2, 2012 at 10:20 PM, William Kyngesburye
>>> <woklist@kyngchaos.com> wrote:
>>>> One configuration problem so far on OS X:
>>>> 
>>>> - with-freexl - doesn't test for freexl with libiconv (I have freexl compiled as static library, so it doesn't automatically link libiconv).  I just added $LIBICONV to both the freexl tests to get this to work, but another test for whether freexl needs iconv is really needed.
>>>> 
>>>> 
>>>> And one compile error:
>>>> 
>>>> webpdataset.cpp:536: error: invalid conversion from 'int' to 'WebPEncCSP'
>>>> 
>>>> I changed the offending line to:
>>>> 
>>>>    sPicture.colorspace = WEBP_YUV420;
>>>> 
>>>> and it compiles.
>>>> 
>>>> 
>>>> If these can be fixed for 1.9.0 release that would be great, otherwise I'll add bug reports.
>>>> 
>>>> On Dec 31, 2011, at 7:38 PM, Frank Warmerdam wrote:
>>>> 
>>>>> Motion: To promote the GDAL/OGR 1.9.0RC1 release candidate as
>>>>>            the final GDAL/OGR 1.9.0 release.
>>>>> 
>>>>> +1 Frank
>>>>> 
>>>>> --
>>>>> 
>>>>> I have done a wee bit of testing and the release candidate seems
>>>>> solid.  Other PSC members are encouraged to test and vote.
>>>>> Feedback from other users is also welcome.
>>>>> 
>>>>> Voting will remain open until at least the end of day on
>>>>> Tuesday.
>>>>> 
>>>>> Best regards,
>>>>> --
>>>>> ---------------------------------------+--------------------------------------
>>>>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>>>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>>>> and watch the world go round - Rush    | Geospatial Software Developer
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> 
>>>> -----
>>>> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>>>> http://www.kyngchaos.com/
>>>> 
>>>> "The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."
>>>> 
>>>> - the wisdom of Tarzan
>>>> 
>>>> 
>>>> 
>>>> 
>>>> 
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> -----
>> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>> http://www.kyngchaos.com/
>> 
>> "Oh, look, I seem to have fallen down a deep, dark hole.  Now what does that remind me of?  Ah, yes - life."
>> 
>> - Marvin
>> 
>> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy


From woklist at kyngchaos.com  Tue Jan  3 22:46:51 2012
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Jan  3 22:47:37 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
In-Reply-To: <15B1A5D6-0DDA-4618-985E-C249A6655576@kyngchaos.com>
References: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
	<3B16DD3B-C530-45AD-A178-9A79D640B6E9@kyngchaos.com>
	<CA+TxYvMcLJ0yxtjFEUQ9SQcRHQb=KR=cRj4s9NfH5p9o+=TOgA@mail.gmail.com>
	<C7A2626D-F3F9-43AF-B108-E3D08097A103@kyngchaos.com>
	<CA+TxYvOdvvnjUZ1sisA_Lxy513kg37xP+Eo1MoNERFZxSxw2pw@mail.gmail.com>
	<15B1A5D6-0DDA-4618-985E-C249A6655576@kyngchaos.com>
Message-ID: <08A12487-BBB9-4FA2-BAD6-E65A4B2B3BEE@kyngchaos.com>

OK, looking good, after patching configure to work around netcdf problems mentioned.

Autotests generally OK.  Netcdf tests OK, except I need to install cfchecker to check CF compliance.

There are a bunch of new tiff_srs_* tests, many that fail.  It's dropping some TOWGS84 options, or some AUTHORITY options for PRIMEM and UNIT, or have having precision problems (ie 298.3 becomes 298.2999999999985).  Probably a problem with my libgeotiff, other srs tests are fine.


On Jan 3, 2012, at 8:46 PM, William Kyngesburye wrote:

> OK, I have NetCDF now with HDF4/5 & DAP.  Now configure problems again (again, netcdf is static library, as are HDF4, HDF5 and DAP):
> 
> My netcdf needs curl (it defaults to using curl), but GDAL doesn't test netcdf with that (curl is tested much later).
> 
> Netcdf4 also needs some symbols from libhdf5_hl, but this is not checked for.
> 
> 
> On Jan 3, 2012, at 4:49 PM, Etienne Tourigny wrote:
> 
>> Folks,
>> 
>> I would appreciate minimal testing for netcdf-4 in osx before
>> releasing rc2 (which should take a few days at the most).
>> 
>> Wiliam:
>> 
>> The driver in 1.9 includes support for netcdf-4, which uses hdf5 for
>> storage and supports deflate compression as well as a new data model.
>> Other important bugfixes and support for CF-1.5 have been included as
>> well.There are also some new autotests that are skipped if netcdf-4 is
>> not available to GDAL, if these pass the build should be fine.
>> 
>> 

>> On Tue, Jan 3, 2012 at 11:47 AM, William Kyngesburye
>> <woklist@kyngchaos.com> wrote:
>>> I've always built netcdf without v4 API because GDAL didn't support it.  I missed that addition in GDAL 1.9, so it looks like I have more work for compilation and testing ;)
>>> 
>>> I saw some time ago that HDF5 added some capbility for integration with netcdf4, GDAL 1.9 supports this now?

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."

- the wisdom of Tarzan





From warmerdam at pobox.com  Wed Jan  4 02:22:10 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan  4 02:22:46 2012
Subject: [gdal-dev] GDAL/OGR 1.9.0RC2
Message-ID: <4F03FE22.3070800@pobox.com>

Folks,

We fixed a few quirks in RC1 and have decided to issue a release candidate 2
for this 1.9.0 release.

  http://download.osgeo.org/gdal/gdal190RC2.zip - source as a zip
  http://download.osgeo.org/gdal/gdal-1.9.0RC2.tar.gz - source as .tar.gz
  http://download.osgeo.org/gdal/gdalautotest-1.9.0RC2.tar.gz - test suite
  http://download.osgeo.org/gdal/gdal190RC2doc.zip - documentation / website

Please let us know by ticket if you find any new or serious issues with
this release candidate.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From ari.jolma at gmail.com  Wed Jan  4 07:28:08 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Jan  4 07:30:03 2012
Subject: [gdal-dev] gdal2tiles with WMS as source?
Message-ID: <4F0445D8.2040007@gmail.com>

A question:

I have a WMS set up, which visualizes a certain vector dataset. I would 
like to create tiles for a tiled WMS from the WMS. gdal2tiles can be 
used to create tiles from a raster datasource, but apparently not from a 
WMS(?) or can it? How could I make it to use a WMS as the source?

Cheers,

Ari

From rbaatz at gmail.com  Wed Jan  4 07:51:51 2012
From: rbaatz at gmail.com (RolandB)
Date: Wed Jan  4 07:52:11 2012
Subject: [gdal-dev] Re: GDAL interpolation of Gtiff / ESRI polygon.shp
In-Reply-To: <CAJ0mEz1p0OOa83z+84xZ=HeJXD0QzH0d5_r-1C5so7Y9VVDzYg@mail.gmail.com>
References: <1324465994840-7114807.post@n2.nabble.com>
	<CAJ0mEz1p0OOa83z+84xZ=HeJXD0QzH0d5_r-1C5so7Y9VVDzYg@mail.gmail.com>
Message-ID: <1325681511800-7150275.post@n2.nabble.com>

Dear Kyle,

thank you for your fast response. I had been trying adapt gdalwarp() for
some time now and it seems it does not want to interpolate.

This what I did
$user:gdal_rasterize -a_nodata -99 -a kennummer -te 5.93 50.39 6.74722
51.22886 -ts 59 94 -ot Int32 -l Bk50_rur_wgs ./Input/bk50_rur_wgs.shp
./tmp/output1.tif
0...10...20...30...40...50...60...70...80...90...100 - done.

$user: gdal_translate -of netCDF ./tmp/output1.tif ./tmp/output1.nc
Input file size is 59, 94

$user: gdalwarp -ot Int32 -ts 59 94 -r near ./tmp/output1.tif
./tmp/output.tif
Creating output file that is 59P x 94L.
Processing input file ./tmp/output1.tif.
Using internal nodata values (eg. -99) for image ./tmp/output1.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

$user: gdal_translate -of netCDF ./tmp/output.tif ./tmp/interpolated.nc
Input file size is 59, 94

The nodata which is previously marked by -99 as in file ./tmp/output1.tif &
./tmp/output1.nc are set to 0 by the gdalwarp and show up like that in the
interpolated.nc. Not any more as nodata, as in ./tmp/output1.nc

Is there anything you perceive which I should change to get an interpolated
grid data set over the values of -99 with the second last and the last
command line?

Best regards,
Roland

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-interpolation-of-Gtiff-ESRI-polygon-shp-tp7114807p7150275.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Wed Jan  4 13:31:45 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jan  4 13:31:31 2012
Subject: [gdal-dev] gdal2tiles with WMS as source?
In-Reply-To: <4F0445D8.2040007@gmail.com>
References: <4F0445D8.2040007@gmail.com>
Message-ID: <201201041931.46019.even.rouault@mines-paris.org>

Le mercredi 04 janvier 2012 13:28:08, Ari Jolma a ?crit :
> A question:
> 
> I have a WMS set up, which visualizes a certain vector dataset. I would
> like to create tiles for a tiled WMS from the WMS. gdal2tiles can be
> used to create tiles from a raster datasource, but apparently not from a
> WMS(?) or can it? How could I make it to use a WMS as the source?

Ari

I'm not very familiar with gdal2tiles, but why couldn't it use WMS as a source 
? If you set up correctly the XML description file like described in 
http://gdal.org/frmt_wms.html then it should be considered as a valid GDAL 
raster. The only point of doubt I have is the performance.

Best regards,

Even

> 
> Cheers,
> 
> Ari
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From etourigny.dev at gmail.com  Wed Jan  4 17:23:53 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Jan  4 17:24:04 2012
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
In-Reply-To: <08A12487-BBB9-4FA2-BAD6-E65A4B2B3BEE@kyngchaos.com>
References: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>
	<3B16DD3B-C530-45AD-A178-9A79D640B6E9@kyngchaos.com>
	<CA+TxYvMcLJ0yxtjFEUQ9SQcRHQb=KR=cRj4s9NfH5p9o+=TOgA@mail.gmail.com>
	<C7A2626D-F3F9-43AF-B108-E3D08097A103@kyngchaos.com>
	<CA+TxYvOdvvnjUZ1sisA_Lxy513kg37xP+Eo1MoNERFZxSxw2pw@mail.gmail.com>
	<15B1A5D6-0DDA-4618-985E-C249A6655576@kyngchaos.com>
	<08A12487-BBB9-4FA2-BAD6-E65A4B2B3BEE@kyngchaos.com>
Message-ID: <CA+TxYvMFY5nR6+n4LgqSk2ihC8g0-eQ_vqx6mztEaOWuKhfkOw@mail.gmail.com>

William,

I have created the following ticket, please add any information there,
especially the patch to configure. I will see how to resolve that
issue on linux also.

http://trac.osgeo.org/gdal/ticket/4424

The CF compliance checks (in netcdf_cf.py) can be skipped safely and
are optional, no need to install the cfchecker.  The important tests
are in netcdf.py which deal with netcdf-4.

thanks,
Etienne

On Wed, Jan 4, 2012 at 12:46 AM, William Kyngesburye
<woklist@kyngchaos.com> wrote:
> OK, looking good, after patching configure to work around netcdf problems mentioned.
>
> Autotests generally OK. ?Netcdf tests OK, except I need to install cfchecker to check CF compliance.
>
> There are a bunch of new tiff_srs_* tests, many that fail. ?It's dropping some TOWGS84 options, or some AUTHORITY options for PRIMEM and UNIT, or have having precision problems (ie 298.3 becomes 298.2999999999985). ?Probably a problem with my libgeotiff, other srs tests are fine.
>
>
> On Jan 3, 2012, at 8:46 PM, William Kyngesburye wrote:
>
>> OK, I have NetCDF now with HDF4/5 & DAP. ?Now configure problems again (again, netcdf is static library, as are HDF4, HDF5 and DAP):
>>
>> My netcdf needs curl (it defaults to using curl), but GDAL doesn't test netcdf with that (curl is tested much later).
>>
>> Netcdf4 also needs some symbols from libhdf5_hl, but this is not checked for.
>>
>>
>> On Jan 3, 2012, at 4:49 PM, Etienne Tourigny wrote:
>>
>>> Folks,
>>>
>>> I would appreciate minimal testing for netcdf-4 in osx before
>>> releasing rc2 (which should take a few days at the most).
>>>
>>> Wiliam:
>>>
>>> The driver in 1.9 includes support for netcdf-4, which uses hdf5 for
>>> storage and supports deflate compression as well as a new data model.
>>> Other important bugfixes and support for CF-1.5 have been included as
>>> well.There are also some new autotests that are skipped if netcdf-4 is
>>> not available to GDAL, if these pass the build should be fine.
>>>
>>>
>
>>> On Tue, Jan 3, 2012 at 11:47 AM, William Kyngesburye
>>> <woklist@kyngchaos.com> wrote:
>>>> I've always built netcdf without v4 API because GDAL didn't support it. ?I missed that addition in GDAL 1.9, so it looks like I have more work for compilation and testing ;)
>>>>
>>>> I saw some time ago that HDF5 added some capbility for integration with netcdf4, GDAL 1.9 supports this now?
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."
>
> - the wisdom of Tarzan
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Wed Jan  4 17:30:25 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan  4 17:30:51 2012
Subject: [gdal-dev] Motion: Promote 1.9.0RC2 for release
Message-ID: <CA+YzLBcSFYx_x0YoeUMvmCow4NioHtGfo4DNuOUodxeXG0hyuA@mail.gmail.com>

Motion: GDAL/OGR 1.9.0RC2 is promoted to be the official
           1.9.0 final release.

---

PSC members please vote on this motion after you have had
a chance to do some validation.  Input from everyone else who
tests it is also very welcome.

+1 Frank

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Wed Jan  4 19:19:02 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jan  4 19:18:41 2012
Subject: [gdal-dev] Motion: Promote 1.9.0RC2 for release
In-Reply-To: <CA+YzLBcSFYx_x0YoeUMvmCow4NioHtGfo4DNuOUodxeXG0hyuA@mail.gmail.com>
References: <CA+YzLBcSFYx_x0YoeUMvmCow4NioHtGfo4DNuOUodxeXG0hyuA@mail.gmail.com>
Message-ID: <201201050119.02429.even.rouault@mines-paris.org>

> Motion: GDAL/OGR 1.9.0RC2 is promoted to be the official
>            1.9.0 final release.
> 
> ---
> 
+1 Even
From pascal.jaugeas.External at cassidian.com  Thu Jan  5 04:20:18 2012
From: pascal.jaugeas.External at cassidian.com (Jaugeas, Pascal (External))
Date: Thu Jan  5 04:20:57 2012
Subject: [gdal-dev] Open Grib File
Message-ID: <4A9CDAF29DA84A4EAEAA77395DDE56F405D66D13@SMFIDF806A.main.fr.ds.corp>

Hello,
 
I develop with Gdal for .Net.
And I try to read a grib File (ed 1) like this :  

Dataset ds = Gdal.Open(dataSourcePath, Access.GA_Update);

with dataSourcePath is the path of grib file (.grb).
 
But I have an error in debug : "... not recognised as a supported file
format."
 
Is this method correct to have a dataset of a grib file ?
 
Thank you for your help,
 
Best Regards,
 
Pascal Jaugeas
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120105/940beb17/attachment.html
From symonando at gmail.com  Thu Jan  5 05:15:25 2012
From: symonando at gmail.com (Aneesh Muralidharan)
Date: Thu Jan  5 05:15:52 2012
Subject: [gdal-dev] Reading OGRStyle information using C++
Message-ID: <CAGU4z-qNE1YvZUQJe=QpUm0XRxCcWS-hNx_DibPKqaYmqNYfCA@mail.gmail.com>

Hi,

I'm new to OGR/GDAL and I'm trying to read style information of vectors
using the OGR C++ API. I followed the documentation available here
http://www.gdal.org/ogr/ogr_feature_style.html. I have managed to get the
pen information of the glyphs' in vector file successfully.

The problem is that, it is unclear that from where can I figure out the
layer style specification. i.e the global style for the layer ( assuming
each glyph's pen can be either one of its own or dependent on the layer ).
The OGRFeatureDefn for the OGRLayer doesn't seem to have this information.

Also is there any detailed explanation of the API somewhere with some
sample code snippets ? (for the feature-style api. For read/write I know
there is http://www.gdal.org/ogr/ogr_apitut.html)

Hoping for a quick response

Thanks and regards,
Aneesh Muralidharan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120105/4ad254f8/attachment.html
From chaitanya.ch at gmail.com  Thu Jan  5 06:25:14 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan  5 06:25:55 2012
Subject: [gdal-dev] Reading OGRStyle information using C++
In-Reply-To: <CAGU4z-qNE1YvZUQJe=QpUm0XRxCcWS-hNx_DibPKqaYmqNYfCA@mail.gmail.com>
References: <CAGU4z-qNE1YvZUQJe=QpUm0XRxCcWS-hNx_DibPKqaYmqNYfCA@mail.gmail.com>
Message-ID: <CAMKgpOYLkfh5V_jdjB1cdQraveq_KhVBGqviRR8SbAHMch=4Dg@mail.gmail.com>

Aneesh,

A layer can have a style table that stores a set of styles that can be
referred by individual features. Usually the style table has a default
style.

Its usage is explained in the same page as the OGR Feature Style
Specification.

On Thu, Jan 5, 2012 at 3:45 PM, Aneesh Muralidharan <symonando@gmail.com>wrote:

> Hi,
>
> I'm new to OGR/GDAL and I'm trying to read style information of vectors
> using the OGR C++ API. I followed the documentation available here
> http://www.gdal.org/ogr/ogr_feature_style.html. I have managed to get the
> pen information of the glyphs' in vector file successfully.
>
> The problem is that, it is unclear that from where can I figure out the
> layer style specification. i.e the global style for the layer ( assuming
> each glyph's pen can be either one of its own or dependent on the layer ).
> The OGRFeatureDefn for the OGRLayer doesn't seem to have this information.
>
> Also is there any detailed explanation of the API somewhere with some
> sample code snippets ? (for the feature-style api. For read/write I know
> there is http://www.gdal.org/ogr/ogr_apitut.html)
>
> Hoping for a quick response
>
> Thanks and regards,
> Aneesh Muralidharan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120105/c63987e4/attachment.html
From chaitanya.ch at gmail.com  Thu Jan  5 06:27:17 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan  5 06:28:04 2012
Subject: [gdal-dev] Reading OGRStyle information using C++
In-Reply-To: <CAMKgpOYLkfh5V_jdjB1cdQraveq_KhVBGqviRR8SbAHMch=4Dg@mail.gmail.com>
References: <CAGU4z-qNE1YvZUQJe=QpUm0XRxCcWS-hNx_DibPKqaYmqNYfCA@mail.gmail.com>
	<CAMKgpOYLkfh5V_jdjB1cdQraveq_KhVBGqviRR8SbAHMch=4Dg@mail.gmail.com>
Message-ID: <CAMKgpOap_u7XWCh-gSFfGMohAbLarL2m+RNwMBVy7fWCnPo73A@mail.gmail.com>

A layer's style table can be accessed using OGRLayer::GetStyleTable() [1].

[1]: http://www.gdal.org/ogr/classOGRLayer.html

On Thu, Jan 5, 2012 at 4:55 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Aneesh,
>
> A layer can have a style table that stores a set of styles that can be
> referred by individual features. Usually the style table has a default
> style.
>
> Its usage is explained in the same page as the OGR Feature Style
> Specification.
>
> On Thu, Jan 5, 2012 at 3:45 PM, Aneesh Muralidharan <symonando@gmail.com>wrote:
>
>> Hi,
>>
>> I'm new to OGR/GDAL and I'm trying to read style information of vectors
>> using the OGR C++ API. I followed the documentation available here
>> http://www.gdal.org/ogr/ogr_feature_style.html. I have managed to get
>> the pen information of the glyphs' in vector file successfully.
>>
>> The problem is that, it is unclear that from where can I figure out the
>> layer style specification. i.e the global style for the layer ( assuming
>> each glyph's pen can be either one of its own or dependent on the layer ).
>> The OGRFeatureDefn for the OGRLayer doesn't seem to have this information.
>>
>> Also is there any detailed explanation of the API somewhere with some
>> sample code snippets ? (for the feature-style api. For read/write I know
>> there is http://www.gdal.org/ogr/ogr_apitut.html)
>>
>> Hoping for a quick response
>>
>> Thanks and regards,
>> Aneesh Muralidharan
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120105/2b78be95/attachment-0001.html
From chaitanya.ch at gmail.com  Thu Jan  5 07:00:24 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan  5 07:01:20 2012
Subject: [gdal-dev] Open Grib File
In-Reply-To: <4A9CDAF29DA84A4EAEAA77395DDE56F405D66D13@SMFIDF806A.main.fr.ds.corp>
References: <4A9CDAF29DA84A4EAEAA77395DDE56F405D66D13@SMFIDF806A.main.fr.ds.corp>
Message-ID: <CAMKgpOYWsrGE5eZOB6pfL6FYLXgkOC8jS-gKAhJngXCAynnLpA@mail.gmail.com>

Pascal,

First check if your file works with the gdalinfo utility. Set the
environment variable CPL_DEBUG to ON to get more detailed reports on events.

Check if you get the same error with another grib file and another format
file.


On Thu, Jan 5, 2012 at 2:50 PM, Jaugeas, Pascal (External) <
pascal.jaugeas.External@cassidian.com> wrote:

> **
> Hello,
>
> I develop with Gdal for .Net.
> And I try to read a grib File (ed 1) like this :
>
> Dataset
> ds = Gdal.Open(dataSourcePath, Access.GA_Update);
> with dataSourcePath is the path of grib file (.grb).
>
> But I have an error in debug : "... not recognised as a supported file
> format."
>
> Is this method correct to have a dataset of a grib file ?
>
> Thank you for your help,
>
> Best Regards,
>
> Pascal Jaugeas
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120105/30e65cab/attachment.html
From symonando at gmail.com  Thu Jan  5 07:00:57 2012
From: symonando at gmail.com (Aneesh Muralidharan)
Date: Thu Jan  5 07:01:20 2012
Subject: [gdal-dev] Reading OGRStyle information using C++
In-Reply-To: <CAMKgpOap_u7XWCh-gSFfGMohAbLarL2m+RNwMBVy7fWCnPo73A@mail.gmail.com>
References: <CAGU4z-qNE1YvZUQJe=QpUm0XRxCcWS-hNx_DibPKqaYmqNYfCA@mail.gmail.com>
	<CAMKgpOYLkfh5V_jdjB1cdQraveq_KhVBGqviRR8SbAHMch=4Dg@mail.gmail.com>
	<CAMKgpOap_u7XWCh-gSFfGMohAbLarL2m+RNwMBVy7fWCnPo73A@mail.gmail.com>
Message-ID: <CAGU4z-pJ8DqMrRhF0naMP4XrC61xUX3C3ck+Pv057M_zm1GYEw@mail.gmail.com>

Hi Chaithanya,

Thanks for the quick reply

About the style table, I did try to use the layer style table, but I'm
getting an empty table :(

By the way I'm trying to read a simple DXF file.

On Thu, Jan 5, 2012 at 4:57 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> A layer's style table can be accessed using OGRLayer::GetStyleTable() [1].
>
> [1]: http://www.gdal.org/ogr/classOGRLayer.html
>
>
> On Thu, Jan 5, 2012 at 4:55 PM, Chaitanya kumar CH <chaitanya.ch@gmail.com
> > wrote:
>
>> Aneesh,
>>
>> A layer can have a style table that stores a set of styles that can be
>> referred by individual features. Usually the style table has a default
>> style.
>>
>> Its usage is explained in the same page as the OGR Feature Style
>> Specification.
>>
>> On Thu, Jan 5, 2012 at 3:45 PM, Aneesh Muralidharan <symonando@gmail.com>wrote:
>>
>>> Hi,
>>>
>>> I'm new to OGR/GDAL and I'm trying to read style information of vectors
>>> using the OGR C++ API. I followed the documentation available here
>>> http://www.gdal.org/ogr/ogr_feature_style.html. I have managed to get
>>> the pen information of the glyphs' in vector file successfully.
>>>
>>> The problem is that, it is unclear that from where can I figure out the
>>> layer style specification. i.e the global style for the layer ( assuming
>>> each glyph's pen can be either one of its own or dependent on the layer ).
>>> The OGRFeatureDefn for the OGRLayer doesn't seem to have this information.
>>>
>>> Also is there any detailed explanation of the API somewhere with some
>>> sample code snippets ? (for the feature-style api. For read/write I know
>>> there is http://www.gdal.org/ogr/ogr_apitut.html)
>>>
>>> Hoping for a quick response
>>>
>>> Thanks and regards,
>>> Aneesh Muralidharan
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120105/fa99fa51/attachment.html
From pascal.jaugeas.External at cassidian.com  Thu Jan  5 07:02:58 2012
From: pascal.jaugeas.External at cassidian.com (Jaugeas, Pascal (External))
Date: Thu Jan  5 07:03:08 2012
Subject: [gdal-dev] Open Grib File
In-Reply-To: <CAMKgpOYWsrGE5eZOB6pfL6FYLXgkOC8jS-gKAhJngXCAynnLpA@mail.gmail.com>
Message-ID: <4A9CDAF29DA84A4EAEAA77395DDE56F405D66D15@SMFIDF806A.main.fr.ds.corp>

thank you,
 
I find the solution :  I need to do Gdal.AllRegister() for driver  and it works !
 
Thank you for your help !
 
Best regards,
 
Pascal

________________________________

De : Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com] 
Envoy? : jeudi 5 janvier 2012 13:00
? : Jaugeas, Pascal (External)
Cc : gdal-dev@lists.osgeo.org
Objet : Re: [gdal-dev] Open Grib File


Pascal,

First check if your file works with the gdalinfo utility. Set the environment variable CPL_DEBUG to ON to get more detailed reports on events.

Check if you get the same error with another grib file and another format file.



On Thu, Jan 5, 2012 at 2:50 PM, Jaugeas, Pascal (External) <pascal.jaugeas.External@cassidian.com> wrote:


	
	Hello,
	 
	I develop with Gdal for .Net.
	And I try to read a grib File (ed 1) like this :  

	Dataset

	ds = Gdal.Open(dataSourcePath, Access.GA_Update);
	with dataSourcePath is the path of grib file (.grb).
	 
	But I have an error in debug : "... not recognised as a supported file format."
	 
	Is this method correct to have a dataset of a grib file ?
	 
	Thank you for your help,
	 
	Best Regards,
	 
	Pascal Jaugeas
	 
	 

	_______________________________________________
	gdal-dev mailing list
	gdal-dev@lists.osgeo.org
	http://lists.osgeo.org/mailman/listinfo/gdal-dev
	




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120105/5b05a990/attachment.html
From chaitanya.ch at gmail.com  Thu Jan  5 07:21:14 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan  5 07:21:34 2012
Subject: [gdal-dev] Reading OGRStyle information using C++
In-Reply-To: <CAGU4z-pJ8DqMrRhF0naMP4XrC61xUX3C3ck+Pv057M_zm1GYEw@mail.gmail.com>
References: <CAGU4z-qNE1YvZUQJe=QpUm0XRxCcWS-hNx_DibPKqaYmqNYfCA@mail.gmail.com>
	<CAMKgpOYLkfh5V_jdjB1cdQraveq_KhVBGqviRR8SbAHMch=4Dg@mail.gmail.com>
	<CAMKgpOap_u7XWCh-gSFfGMohAbLarL2m+RNwMBVy7fWCnPo73A@mail.gmail.com>
	<CAGU4z-pJ8DqMrRhF0naMP4XrC61xUX3C3ck+Pv057M_zm1GYEw@mail.gmail.com>
Message-ID: <CAMKgpObN-jHdR=T8sV6Oc-gQiDbXk_ms0WF_WS-QWxSdBXG-dw@mail.gmail.com>

Aneesh,

I don't know if the DXF format maintains a default style or a style table
but OGR's DXF driver doesn't support layer's style table.

On Thu, Jan 5, 2012 at 5:30 PM, Aneesh Muralidharan <symonando@gmail.com>wrote:

> Hi Chaithanya,
>
> Thanks for the quick reply
>
> About the style table, I did try to use the layer style table, but I'm
> getting an empty table :(
>
> By the way I'm trying to read a simple DXF file.
>
> On Thu, Jan 5, 2012 at 4:57 PM, Chaitanya kumar CH <chaitanya.ch@gmail.com
> > wrote:
>
>> A layer's style table can be accessed using OGRLayer::GetStyleTable() [1].
>>
>> [1]: http://www.gdal.org/ogr/classOGRLayer.html
>>
>>
>> On Thu, Jan 5, 2012 at 4:55 PM, Chaitanya kumar CH <
>> chaitanya.ch@gmail.com> wrote:
>>
>>> Aneesh,
>>>
>>> A layer can have a style table that stores a set of styles that can be
>>> referred by individual features. Usually the style table has a default
>>> style.
>>>
>>> Its usage is explained in the same page as the OGR Feature Style
>>> Specification.
>>>
>>> On Thu, Jan 5, 2012 at 3:45 PM, Aneesh Muralidharan <symonando@gmail.com
>>> > wrote:
>>>
>>>> Hi,
>>>>
>>>> I'm new to OGR/GDAL and I'm trying to read style information of vectors
>>>> using the OGR C++ API. I followed the documentation available here
>>>> http://www.gdal.org/ogr/ogr_feature_style.html. I have managed to get
>>>> the pen information of the glyphs' in vector file successfully.
>>>>
>>>> The problem is that, it is unclear that from where can I figure out the
>>>> layer style specification. i.e the global style for the layer ( assuming
>>>> each glyph's pen can be either one of its own or dependent on the layer ).
>>>> The OGRFeatureDefn for the OGRLayer doesn't seem to have this information.
>>>>
>>>> Also is there any detailed explanation of the API somewhere with some
>>>> sample code snippets ? (for the feature-style api. For read/write I know
>>>> there is http://www.gdal.org/ogr/ogr_apitut.html)
>>>>
>>>> Hoping for a quick response
>>>>
>>>> Thanks and regards,
>>>> Aneesh Muralidharan
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120105/965ea607/attachment-0001.html
From symonando at gmail.com  Thu Jan  5 07:36:38 2012
From: symonando at gmail.com (Aneesh Muralidharan)
Date: Thu Jan  5 07:37:24 2012
Subject: [gdal-dev] Reading OGRStyle information using C++
In-Reply-To: <CAMKgpObN-jHdR=T8sV6Oc-gQiDbXk_ms0WF_WS-QWxSdBXG-dw@mail.gmail.com>
References: <CAGU4z-qNE1YvZUQJe=QpUm0XRxCcWS-hNx_DibPKqaYmqNYfCA@mail.gmail.com>
	<CAMKgpOYLkfh5V_jdjB1cdQraveq_KhVBGqviRR8SbAHMch=4Dg@mail.gmail.com>
	<CAMKgpOap_u7XWCh-gSFfGMohAbLarL2m+RNwMBVy7fWCnPo73A@mail.gmail.com>
	<CAGU4z-pJ8DqMrRhF0naMP4XrC61xUX3C3ck+Pv057M_zm1GYEw@mail.gmail.com>
	<CAMKgpObN-jHdR=T8sV6Oc-gQiDbXk_ms0WF_WS-QWxSdBXG-dw@mail.gmail.com>
Message-ID: <CAGU4z-r0eWNg0hWnGXRdpFkV5BfRx0JjechuGyGr1b3hvW712Q@mail.gmail.com>

Chaithanya,

Ahhh that explains it ! Thanks a lot. By the way where do I find out these
information (like DXF driver doesn't support style table), as in where is
it documented ?

And can you suggest me some other vector format that OGR loads by default,
which has style information ? I was using SHP till now, but then it doesn't
have the style information at all right. Also it will be great if you can
point me to some place where I can find some free samples as well.

On Thu, Jan 5, 2012 at 5:51 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Aneesh,
>
> I don't know if the DXF format maintains a default style or a style table
> but OGR's DXF driver doesn't support layer's style table.
>
>
> On Thu, Jan 5, 2012 at 5:30 PM, Aneesh Muralidharan <symonando@gmail.com>wrote:
>
>> Hi Chaithanya,
>>
>> Thanks for the quick reply
>>
>> About the style table, I did try to use the layer style table, but I'm
>> getting an empty table :(
>>
>> By the way I'm trying to read a simple DXF file.
>>
>> On Thu, Jan 5, 2012 at 4:57 PM, Chaitanya kumar CH <
>> chaitanya.ch@gmail.com> wrote:
>>
>>> A layer's style table can be accessed using OGRLayer::GetStyleTable()
>>> [1].
>>>
>>> [1]: http://www.gdal.org/ogr/classOGRLayer.html
>>>
>>>
>>> On Thu, Jan 5, 2012 at 4:55 PM, Chaitanya kumar CH <
>>> chaitanya.ch@gmail.com> wrote:
>>>
>>>> Aneesh,
>>>>
>>>> A layer can have a style table that stores a set of styles that can be
>>>> referred by individual features. Usually the style table has a default
>>>> style.
>>>>
>>>> Its usage is explained in the same page as the OGR Feature Style
>>>> Specification.
>>>>
>>>> On Thu, Jan 5, 2012 at 3:45 PM, Aneesh Muralidharan <
>>>> symonando@gmail.com> wrote:
>>>>
>>>>> Hi,
>>>>>
>>>>> I'm new to OGR/GDAL and I'm trying to read style information of
>>>>> vectors using the OGR C++ API. I followed the documentation available here
>>>>> http://www.gdal.org/ogr/ogr_feature_style.html. I have managed to get
>>>>> the pen information of the glyphs' in vector file successfully.
>>>>>
>>>>> The problem is that, it is unclear that from where can I figure out
>>>>> the layer style specification. i.e the global style for the layer (
>>>>> assuming each glyph's pen can be either one of its own or dependent on the
>>>>> layer ). The OGRFeatureDefn for the OGRLayer doesn't seem to have this
>>>>> information.
>>>>>
>>>>> Also is there any detailed explanation of the API somewhere with some
>>>>> sample code snippets ? (for the feature-style api. For read/write I know
>>>>> there is http://www.gdal.org/ogr/ogr_apitut.html)
>>>>>
>>>>> Hoping for a quick response
>>>>>
>>>>> Thanks and regards,
>>>>> Aneesh Muralidharan
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>>
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120105/34d0151b/attachment.html
From chaitanya.ch at gmail.com  Thu Jan  5 08:22:30 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan  5 08:22:53 2012
Subject: [gdal-dev] Reading OGRStyle information using C++
In-Reply-To: <CAGU4z-r0eWNg0hWnGXRdpFkV5BfRx0JjechuGyGr1b3hvW712Q@mail.gmail.com>
References: <CAGU4z-qNE1YvZUQJe=QpUm0XRxCcWS-hNx_DibPKqaYmqNYfCA@mail.gmail.com>
	<CAMKgpOYLkfh5V_jdjB1cdQraveq_KhVBGqviRR8SbAHMch=4Dg@mail.gmail.com>
	<CAMKgpOap_u7XWCh-gSFfGMohAbLarL2m+RNwMBVy7fWCnPo73A@mail.gmail.com>
	<CAGU4z-pJ8DqMrRhF0naMP4XrC61xUX3C3ck+Pv057M_zm1GYEw@mail.gmail.com>
	<CAMKgpObN-jHdR=T8sV6Oc-gQiDbXk_ms0WF_WS-QWxSdBXG-dw@mail.gmail.com>
	<CAGU4z-r0eWNg0hWnGXRdpFkV5BfRx0JjechuGyGr1b3hvW712Q@mail.gmail.com>
Message-ID: <CAMKgpOamF+UEn_3fuvvMt+SZ=44+irNQT6OLf94LP0TgRgG3Ew@mail.gmail.com>

Aneesh,

Actually, I just reviewed the driver code. It's not documented.

I don't know enough to suggest any format for efficiently storing style
info. But you can start with MapInfo, KML and DXF.

On Thu, Jan 5, 2012 at 6:06 PM, Aneesh Muralidharan <symonando@gmail.com>wrote:

> Chaithanya,
>
> Ahhh that explains it ! Thanks a lot. By the way where do I find out these
> information (like DXF driver doesn't support style table), as in where is
> it documented ?
>
> And can you suggest me some other vector format that OGR loads by default,
> which has style information ? I was using SHP till now, but then it doesn't
> have the style information at all right. Also it will be great if you can
> point me to some place where I can find some free samples as well.
>
>
> On Thu, Jan 5, 2012 at 5:51 PM, Chaitanya kumar CH <chaitanya.ch@gmail.com
> > wrote:
>
>> Aneesh,
>>
>> I don't know if the DXF format maintains a default style or a style table
>> but OGR's DXF driver doesn't support layer's style table.
>>
>>
>> On Thu, Jan 5, 2012 at 5:30 PM, Aneesh Muralidharan <symonando@gmail.com>wrote:
>>
>>> Hi Chaithanya,
>>>
>>> Thanks for the quick reply
>>>
>>> About the style table, I did try to use the layer style table, but I'm
>>> getting an empty table :(
>>>
>>> By the way I'm trying to read a simple DXF file.
>>>
>>> On Thu, Jan 5, 2012 at 4:57 PM, Chaitanya kumar CH <
>>> chaitanya.ch@gmail.com> wrote:
>>>
>>>> A layer's style table can be accessed using OGRLayer::GetStyleTable()
>>>> [1].
>>>>
>>>> [1]: http://www.gdal.org/ogr/classOGRLayer.html
>>>>
>>>>
>>>> On Thu, Jan 5, 2012 at 4:55 PM, Chaitanya kumar CH <
>>>> chaitanya.ch@gmail.com> wrote:
>>>>
>>>>> Aneesh,
>>>>>
>>>>> A layer can have a style table that stores a set of styles that can be
>>>>> referred by individual features. Usually the style table has a default
>>>>> style.
>>>>>
>>>>> Its usage is explained in the same page as the OGR Feature Style
>>>>> Specification.
>>>>>
>>>>> On Thu, Jan 5, 2012 at 3:45 PM, Aneesh Muralidharan <
>>>>> symonando@gmail.com> wrote:
>>>>>
>>>>>> Hi,
>>>>>>
>>>>>> I'm new to OGR/GDAL and I'm trying to read style information of
>>>>>> vectors using the OGR C++ API. I followed the documentation available here
>>>>>> http://www.gdal.org/ogr/ogr_feature_style.html. I have managed to
>>>>>> get the pen information of the glyphs' in vector file successfully.
>>>>>>
>>>>>> The problem is that, it is unclear that from where can I figure out
>>>>>> the layer style specification. i.e the global style for the layer (
>>>>>> assuming each glyph's pen can be either one of its own or dependent on the
>>>>>> layer ). The OGRFeatureDefn for the OGRLayer doesn't seem to have this
>>>>>> information.
>>>>>>
>>>>>> Also is there any detailed explanation of the API somewhere with some
>>>>>> sample code snippets ? (for the feature-style api. For read/write I know
>>>>>> there is http://www.gdal.org/ogr/ogr_apitut.html)
>>>>>>
>>>>>> Hoping for a quick response
>>>>>>
>>>>>> Thanks and regards,
>>>>>> Aneesh Muralidharan
>>>>>>
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Best regards,
>>>>> Chaitanya kumar CH.
>>>>>
>>>>> +91-9494447584
>>>>> 17.2416N 80.1426E
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>>
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120105/ec240555/attachment.html
From pascal.jaugeas.External at cassidian.com  Thu Jan  5 09:10:22 2012
From: pascal.jaugeas.External at cassidian.com (Jaugeas, Pascal (External))
Date: Thu Jan  5 09:11:01 2012
Subject: [gdal-dev] Open Grib File
In-Reply-To: <CAMKgpOYWsrGE5eZOB6pfL6FYLXgkOC8jS-gKAhJngXCAynnLpA@mail.gmail.com>
Message-ID: <4A9CDAF29DA84A4EAEAA77395DDE56F405D66D1A@SMFIDF806A.main.fr.ds.corp>

I have another problem.
 
After open grib file,  I have a DataSet.
This dataset give the quantities of row, col and band.
For each band, I want to know the heading.  In a band of a grib file, there are 3 rows for heading, not counting by the dataset.
Do you know how I can do that ?
 
Thanks and regards,
 

________________________________

De : Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com] 
Envoy? : jeudi 5 janvier 2012 13:00
? : Jaugeas, Pascal (External)
Cc : gdal-dev@lists.osgeo.org
Objet : Re: [gdal-dev] Open Grib File


Pascal,

First check if your file works with the gdalinfo utility. Set the environment variable CPL_DEBUG to ON to get more detailed reports on events.

Check if you get the same error with another grib file and another format file.



On Thu, Jan 5, 2012 at 2:50 PM, Jaugeas, Pascal (External) <pascal.jaugeas.External@cassidian.com> wrote:


	
	Hello,
	 
	I develop with Gdal for .Net.
	And I try to read a grib File (ed 1) like this :  

	Dataset

	ds = Gdal.Open(dataSourcePath, Access.GA_Update);
	with dataSourcePath is the path of grib file (.grb).
	 
	But I have an error in debug : "... not recognised as a supported file format."
	 
	Is this method correct to have a dataset of a grib file ?
	 
	Thank you for your help,
	 
	Best Regards,
	 
	Pascal Jaugeas
	 
	 

	_______________________________________________
	gdal-dev mailing list
	gdal-dev@lists.osgeo.org
	http://lists.osgeo.org/mailman/listinfo/gdal-dev
	




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120105/782b1c66/attachment-0001.html
From lists at hilboll.de  Thu Jan  5 09:15:47 2012
From: lists at hilboll.de (Andreas H.)
Date: Thu Jan  5 09:16:41 2012
Subject: [gdal-dev] To to create HDF4 files for GDAL
Message-ID: <5a1c440c1181784336b42a6b66e12e14.squirrel@srv2.s4y.tournesol-consulting.eu>

Hi there,

when creating HDF4 files outside of GDAL, which metadata do I have to
write to
the file such that GDAL can subsequently correctly read the data? In the docs
I read that only HDF4 files created with GDAL or certain other HDF4 types are
recognized. However, the files are created "by hand" using the HDF4 API from
Delphi. I would like to modify this creation in a way such that GDAL can read
the data.

The HDF files follow the "Scientific DataSet (SDS)" standard. When reading
the files with GDAL, it looks like this:

   $ gdalinfo datafile.hdf
   Driver: HDF4Image/HDF4 Dataset
   Files: datafile.hdf
   Size is 2880, 1440
   Coordinate System is `'
   Metadata:
     _FillValue=-nan
     long_name=VCDstrat NO2
   Geolocation:
     SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
     X_DATASET=HDF4_SDS:UNKNOWN:"datafile.hdf":2
     X_BAND=1
     Y_DATASET=HDF4_SDS:UNKNOWN:"datafile.hdf":1
     Y_BAND=1
     PIXEL_OFFSET=0
     PIXEL_STEP=1
     LINE_OFFSET=0
     LINE_STEP=1
   Corner Coordinates:
   Upper Left  (    0.0,    0.0)
   Lower Left  (    0.0, 1440.0)
   Upper Right ( 2880.0,    0.0)
   Lower Right ( 2880.0, 1440.0)
   Center      ( 1440.0,  720.0)
   Band 1 Block=2880x347 Type=Float32, ColorInterp=Gray

Obviously, georeferencing is not working. What do I need to do to the HDF4
file to fix this?

Thanks for your insight,

Andreas.


PS: In case anyone is interested, here's the reason why I want to do this:

I have a whole lot of HDF4-SDS files which I want to plot using GMT. So I
thought using gdal_translate to convert the HDF4 to GRD would be the easiest
solution. I'm using GDAL 1.8.1 .

However, I'm running into problems which I'm detailing below:

I guess the problem is that GDAL doesn't read the SDS's latitude/longitude
information. When converting this file then to GMT's grd format, I get a
warning, which I guess doesn't really matter too much:

   $ gdal_translate -of GMT datafile.hdf test.grd
   Warning 6: A dataset opened by GDALOpenShared should have the same
filename (datafile.hdf) and description
(HDF4_SDS:UNKNOWN:"datafile.hdf":0)
   Input file size is 2880, 1440

The resulting grd file looks like this:

   $ gdalinfo test.grd
   Driver: GMT/GMT NetCDF Grid Format
   Files: test.grd
          test.grd.aux.xml
   Size is 2880, 1440
   Coordinate System is `'
   Origin = (0.000000000000000,0.000000000000000)
   Pixel Size = (1.000000000000000,1.000000000000000)
   Metadata:
     _FillValue=-nan
     long_name=VCDstrat NO2
   Corner Coordinates:
   Upper Left  (   0.0000000,   0.0000000)
   Lower Left  (       0.000,    1440.000)
   Upper Right (    2880.000,       0.000)
   Lower Right (    2880.000,    1440.000)
   Center      (    1440.000,     720.000)
   Band 1 Block=2880x1 Type=Float32, ColorInterp=Gray

When I now try to plot this file using grdimage, I get the following:

   grdimage: GMT ERROR: grid y increment <= 0.0
   grdimage: Use grdedit -A on your grid file to make region and
increments compatible [test.grd]

However, running the suggested grdedit -A test.grd doesn't change a thing ...


From etourigny.dev at gmail.com  Thu Jan  5 09:32:41 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Jan  5 09:32:45 2012
Subject: [gdal-dev] To to create HDF4 files for GDAL
In-Reply-To: <5a1c440c1181784336b42a6b66e12e14.squirrel@srv2.s4y.tournesol-consulting.eu>
References: <5a1c440c1181784336b42a6b66e12e14.squirrel@srv2.s4y.tournesol-consulting.eu>
Message-ID: <CA+TxYvMJ6JKcEherHqCz32PyBf6Cowr6kzsPnw=rZp3TN+-yeQ@mail.gmail.com>

Andreas,

Why don't you simply use the netcdf api to create a GMT file (which
uses the netcdf file format)??

Have a look at the gdal hdf4 driver documentation :
http://www.gdal.org/frmt_hdf4.html , section Georeference . It seems
that you custom way of representing georeferencing is not one of the
formats supported by gdal's HDF4 driver.

Etienne

On Thu, Jan 5, 2012 at 11:15 AM, Andreas H. <lists@hilboll.de> wrote:
> Hi there,
>
> when creating HDF4 files outside of GDAL, which metadata do I have to
> write to
> the file such that GDAL can subsequently correctly read the data? In the docs
> I read that only HDF4 files created with GDAL or certain other HDF4 types are
> recognized. However, the files are created "by hand" using the HDF4 API from
> Delphi. I would like to modify this creation in a way such that GDAL can read
> the data.
>
> The HDF files follow the "Scientific DataSet (SDS)" standard. When reading
> the files with GDAL, it looks like this:
>
> ? $ gdalinfo datafile.hdf
> ? Driver: HDF4Image/HDF4 Dataset
> ? Files: datafile.hdf
> ? Size is 2880, 1440
> ? Coordinate System is `'
> ? Metadata:
> ? ? _FillValue=-nan
> ? ? long_name=VCDstrat NO2
> ? Geolocation:
> ? ? SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
> ? ? X_DATASET=HDF4_SDS:UNKNOWN:"datafile.hdf":2
> ? ? X_BAND=1
> ? ? Y_DATASET=HDF4_SDS:UNKNOWN:"datafile.hdf":1
> ? ? Y_BAND=1
> ? ? PIXEL_OFFSET=0
> ? ? PIXEL_STEP=1
> ? ? LINE_OFFSET=0
> ? ? LINE_STEP=1
> ? Corner Coordinates:
> ? Upper Left ?( ? ?0.0, ? ?0.0)
> ? Lower Left ?( ? ?0.0, 1440.0)
> ? Upper Right ( 2880.0, ? ?0.0)
> ? Lower Right ( 2880.0, 1440.0)
> ? Center ? ? ?( 1440.0, ?720.0)
> ? Band 1 Block=2880x347 Type=Float32, ColorInterp=Gray
>
> Obviously, georeferencing is not working. What do I need to do to the HDF4
> file to fix this?
>
> Thanks for your insight,
>
> Andreas.
>
>
> PS: In case anyone is interested, here's the reason why I want to do this:
>
> I have a whole lot of HDF4-SDS files which I want to plot using GMT. So I
> thought using gdal_translate to convert the HDF4 to GRD would be the easiest
> solution. I'm using GDAL 1.8.1 .
>
> However, I'm running into problems which I'm detailing below:
>
> I guess the problem is that GDAL doesn't read the SDS's latitude/longitude
> information. When converting this file then to GMT's grd format, I get a
> warning, which I guess doesn't really matter too much:
>
> ? $ gdal_translate -of GMT datafile.hdf test.grd
> ? Warning 6: A dataset opened by GDALOpenShared should have the same
> filename (datafile.hdf) and description
> (HDF4_SDS:UNKNOWN:"datafile.hdf":0)
> ? Input file size is 2880, 1440
>
> The resulting grd file looks like this:
>
> ? $ gdalinfo test.grd
> ? Driver: GMT/GMT NetCDF Grid Format
> ? Files: test.grd
> ? ? ? ? ?test.grd.aux.xml
> ? Size is 2880, 1440
> ? Coordinate System is `'
> ? Origin = (0.000000000000000,0.000000000000000)
> ? Pixel Size = (1.000000000000000,1.000000000000000)
> ? Metadata:
> ? ? _FillValue=-nan
> ? ? long_name=VCDstrat NO2
> ? Corner Coordinates:
> ? Upper Left ?( ? 0.0000000, ? 0.0000000)
> ? Lower Left ?( ? ? ? 0.000, ? ?1440.000)
> ? Upper Right ( ? ?2880.000, ? ? ? 0.000)
> ? Lower Right ( ? ?2880.000, ? ?1440.000)
> ? Center ? ? ?( ? ?1440.000, ? ? 720.000)
> ? Band 1 Block=2880x1 Type=Float32, ColorInterp=Gray
>
> When I now try to plot this file using grdimage, I get the following:
>
> ? grdimage: GMT ERROR: grid y increment <= 0.0
> ? grdimage: Use grdedit -A on your grid file to make region and
> increments compatible [test.grd]
>
> However, running the suggested grdedit -A test.grd doesn't change a thing ...
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From lists at hilboll.de  Thu Jan  5 09:44:05 2012
From: lists at hilboll.de (Andreas H.)
Date: Thu Jan  5 09:44:53 2012
Subject: [gdal-dev] To to create HDF4 files for GDAL
In-Reply-To: <CA+TxYvMJ6JKcEherHqCz32PyBf6Cowr6kzsPnw=rZp3TN+-yeQ@mail.gmail.com>
References: <5a1c440c1181784336b42a6b66e12e14.squirrel@srv2.s4y.tournesol-consulting.eu>
	<CA+TxYvMJ6JKcEherHqCz32PyBf6Cowr6kzsPnw=rZp3TN+-yeQ@mail.gmail.com>
Message-ID: <1f7bcec66be3823236440bcc9838229d.squirrel@srv2.s4y.tournesol-consulting.eu>

Etienne,

thanks for your input.

> Why don't you simply use the netcdf api to create a GMT file (which
> uses the netcdf file format)??

The software which creates these HDF files is not developed by me, and its
developer is unwilling to implement writing of netcdf files. However, if
I'd tell him to add some metadata to the HDF4 files he creates, he might
be willing to do so ;)

> Have a look at the gdal hdf4 driver documentation :
> http://www.gdal.org/frmt_hdf4.html , section Georeference . It seems
> that you custom way of representing georeferencing is not one of the
> formats supported by gdal's HDF4 driver.

Exactly. That's why I'm asking which metadata the HDF file needs to
contain in order to be recognized by GDAL.

Cheers,
Andreas.

From lists at hilboll.de  Thu Jan  5 10:59:18 2012
From: lists at hilboll.de (Andreas H.)
Date: Thu Jan  5 10:59:46 2012
Subject: [gdal-dev] To to create HDF4 files for GDAL
In-Reply-To: <5a1c440c1181784336b42a6b66e12e14.squirrel@srv2.s4y.tournesol-consulting.eu>
References: <5a1c440c1181784336b42a6b66e12e14.squirrel@srv2.s4y.tournesol-consulting.eu>
Message-ID: <a28676052a94def6b0096a6c9a7ceb58.squirrel@srv2.s4y.tournesol-consulting.eu>

Hi again,

I played around a bit and now it's working. I needed to add four global
attributes to the HDF4 file:

- TransformationMatrix
- AREA_OR_POINT
- Projection
- Signature

What I don't understand is why Signature is needed. I mean, even without
Signature, the file contains all necessary information, but GDAL refuses
to process it. Once I add the Signature = "Created with GDAL
(http://www.remotesensing.org/gdal/)" attribute, GDAL does read the file
correctly.

I personally find this behaviour very strange. If I don't use GDAL to
create the file, but add all attributes necessary, GDAL should use these
attributes.

I created a ticket for this:

   http://trac.osgeo.org/gdal/ticket/4425

Cheers,
Andreas.


> Hi there,
>
> when creating HDF4 files outside of GDAL, which metadata do I have to
> write to
> the file such that GDAL can subsequently correctly read the data? In the
> docs
> I read that only HDF4 files created with GDAL or certain other HDF4 types
> are
> recognized. However, the files are created "by hand" using the HDF4 API
> from
> Delphi. I would like to modify this creation in a way such that GDAL can
> read
> the data.
>
> The HDF files follow the "Scientific DataSet (SDS)" standard. When reading
> the files with GDAL, it looks like this:
>
>    $ gdalinfo datafile.hdf
>    Driver: HDF4Image/HDF4 Dataset
>    Files: datafile.hdf
>    Size is 2880, 1440
>    Coordinate System is `'
>    Metadata:
>      _FillValue=-nan
>      long_name=VCDstrat NO2
>    Geolocation:
>      SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
>      X_DATASET=HDF4_SDS:UNKNOWN:"datafile.hdf":2
>      X_BAND=1
>      Y_DATASET=HDF4_SDS:UNKNOWN:"datafile.hdf":1
>      Y_BAND=1
>      PIXEL_OFFSET=0
>      PIXEL_STEP=1
>      LINE_OFFSET=0
>      LINE_STEP=1
>    Corner Coordinates:
>    Upper Left  (    0.0,    0.0)
>    Lower Left  (    0.0, 1440.0)
>    Upper Right ( 2880.0,    0.0)
>    Lower Right ( 2880.0, 1440.0)
>    Center      ( 1440.0,  720.0)
>    Band 1 Block=2880x347 Type=Float32, ColorInterp=Gray
>
> Obviously, georeferencing is not working. What do I need to do to the HDF4
> file to fix this?
>
> Thanks for your insight,
>
> Andreas.
>
>
> PS: In case anyone is interested, here's the reason why I want to do this:
>
> I have a whole lot of HDF4-SDS files which I want to plot using GMT. So I
> thought using gdal_translate to convert the HDF4 to GRD would be the
> easiest
> solution. I'm using GDAL 1.8.1 .
>
> However, I'm running into problems which I'm detailing below:
>
> I guess the problem is that GDAL doesn't read the SDS's latitude/longitude
> information. When converting this file then to GMT's grd format, I get a
> warning, which I guess doesn't really matter too much:
>
>    $ gdal_translate -of GMT datafile.hdf test.grd
>    Warning 6: A dataset opened by GDALOpenShared should have the same
> filename (datafile.hdf) and description
> (HDF4_SDS:UNKNOWN:"datafile.hdf":0)
>    Input file size is 2880, 1440
>
> The resulting grd file looks like this:
>
>    $ gdalinfo test.grd
>    Driver: GMT/GMT NetCDF Grid Format
>    Files: test.grd
>           test.grd.aux.xml
>    Size is 2880, 1440
>    Coordinate System is `'
>    Origin = (0.000000000000000,0.000000000000000)
>    Pixel Size = (1.000000000000000,1.000000000000000)
>    Metadata:
>      _FillValue=-nan
>      long_name=VCDstrat NO2
>    Corner Coordinates:
>    Upper Left  (   0.0000000,   0.0000000)
>    Lower Left  (       0.000,    1440.000)
>    Upper Right (    2880.000,       0.000)
>    Lower Right (    2880.000,    1440.000)
>    Center      (    1440.000,     720.000)
>    Band 1 Block=2880x1 Type=Float32, ColorInterp=Gray
>
> When I now try to plot this file using grdimage, I get the following:
>
>    grdimage: GMT ERROR: grid y increment <= 0.0
>    grdimage: Use grdedit -A on your grid file to make region and
> increments compatible [test.grd]
>
> However, running the suggested grdedit -A test.grd doesn't change a thing
> ...
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From chaitanya.ch at gmail.com  Thu Jan  5 11:25:01 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan  5 11:25:16 2012
Subject: [gdal-dev] Open Grib File
In-Reply-To: <4A9CDAF29DA84A4EAEAA77395DDE56F405D66D1A@SMFIDF806A.main.fr.ds.corp>
References: <CAMKgpOYWsrGE5eZOB6pfL6FYLXgkOC8jS-gKAhJngXCAynnLpA@mail.gmail.com>
	<4A9CDAF29DA84A4EAEAA77395DDE56F405D66D1A@SMFIDF806A.main.fr.ds.corp>
Message-ID: <CAMKgpObo_4uKrSr8cG+0NP87PEN1K21u_DoFKKbq8z+O0Pe-kQ@mail.gmail.com>

Pascal,

Use the GDALMajorObject::GetMetaData() method[1].

You might want to go through the GDAL API docs[2] a bit throughly.

[1]: http://www.gdal.org/classGDALMajorObject.html
[2]: http://www.gdal.org/hierarchy.html

On Thu, Jan 5, 2012 at 7:40 PM, Jaugeas, Pascal (External) <
pascal.jaugeas.External@cassidian.com> wrote:

> **
> I have another problem.
>
> After open grib file,  I have a DataSet.
> This dataset give the quantities of row, col and band.
> For each band, I want to know the heading.  In a band of a grib file,
> there are 3 rows for heading, not counting by the dataset.
> Do you know how I can do that ?
>
> Thanks and regards,
>
>
>  ------------------------------
> *De :* Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
> *Envoy? :* jeudi 5 janvier 2012 13:00
> *? :* Jaugeas, Pascal (External)
> *Cc :* gdal-dev@lists.osgeo.org
> *Objet :* Re: [gdal-dev] Open Grib File
>
> Pascal,
>
> First check if your file works with the gdalinfo utility. Set the
> environment variable CPL_DEBUG to ON to get more detailed reports on events.
>
> Check if you get the same error with another grib file and another format
> file.
>
>
> On Thu, Jan 5, 2012 at 2:50 PM, Jaugeas, Pascal (External) <
> pascal.jaugeas.External@cassidian.com> wrote:
>
>> **
>> Hello,
>>
>> I develop with Gdal for .Net.
>> And I try to read a grib File (ed 1) like this :
>>
>> Dataset
>> ds = Gdal.Open(dataSourcePath, Access.GA_Update);
>> with dataSourcePath is the path of grib file (.grb).
>>
>> But I have an error in debug : "... not recognised as a supported file
>> format."
>>
>> Is this method correct to have a dataset of a grib file ?
>>
>> Thank you for your help,
>>
>> Best Regards,
>>
>> Pascal Jaugeas
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120105/fca8dce7/attachment-0001.html
From thlin.box at gmail.com  Thu Jan  5 11:27:43 2012
From: thlin.box at gmail.com (easyl)
Date: Thu Jan  5 11:28:06 2012
Subject: [gdal-dev] GDAL Java Binding meomory problem under intensive method
	calls
Message-ID: <1325780863590-7155011.post@n2.nabble.com>

GDAL 1.8.1 on Win64

basically I just use ogr2ogr and ogrinfo from gdal/java examples.

I wrote a test case with processing S57 (*000) data:

   /* read layer information with ogrinfo */
   final String param[] = { "-ro", "-al", src};
   final List<Layer> layers = ogrinfo.execute(param); // I just collect
"Layers" created by ogrinfo

   /* convert each possible layer and geometry type  with ogr2ogr */
   for (/* ... huge loop ...*/) {
      param= new String[]{"-skipfailure", "-append", "-f","ESRI Shapefile",
dest, src, "-nlt", type, layer};
      ogr2ogr.excute(param);
   }
  
   /* then try to access Layer again */
   layers.get(0).GetFeatureCount(); // XXX: it crashed here

I append the error at the end of the post.

It seems that the native lib has some memory reference issue or leak.


=========================================
=========================================
=========================================
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000007fee8653ab3,
pid=7364, tid=7396
#
# JRE version: 6.0_25-b06
# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.0-b11 mixed mode
windows-amd64 compressed oops)
# Problematic frame:
# C  [gdal18.dll+0x3c3ab3]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x000000000035b800):  JavaThread "main" [_thread_in_native,
id=7396, stack(0x0000000002630000,0x0000000002730000)]

siginfo: ExceptionCode=0xc0000005, reading address 0xffffffffffffffff

Registers:
RAX=0x0000000000000085, RBX=0x0000000000000085, RCX=0x3b58414d4143533b,
RDX=0x000000000687a3e2
RSP=0x000000000272f720, RBP=0x0000000000000000, RSI=0x000000000967db10,
RDI=0x0000000007be8d00
R8 =0x0000000000000000, R9 =0x000000000272f748, R10=0x000007fee8371d0d,
R11=0x000000000272f6b0
R12=0x0000000007be8d00, R13=0x0000000000000000, R14=0x00000000091f67b0,
R15=0x0000000000000003
RIP=0x000007fee8653ab3, EFLAGS=0x0000000000010297

Top of Stack: (sp=0x000000000272f720)
0x000000000272f720:   0000000000000004 000000000967db10
0x000000000272f730:   0000000007be8d00 00000000091f67b0
0x000000000272f740:   0000000000000000 0000000000000002
0x000000000272f750:   0000000007cbda30 000007fee86faea4
0x000000000272f760:   000000000035b800 0000000000000000
0x000000000272f770:   000000000272f958 0000000000000081
0x000000000272f780:   000000000967db10 000007fee8658586
0x000000000272f790:   0000000000000004 00000000091f67b0
0x000000000272f7a0:   0000000007be8d00 0000000000000001
0x000000000272f7b0:   0000000000000000 0000000000000002
0x000000000272f7c0:   fffffffffffffffe 0000000000000000
0x000000000272f7d0:   00000000bb52a7e8 0000000000000000
0x000000000272f7e0:   0000000000000e9d 000007fee8659256
0x000000000272f7f0:   0000000007be8d00 000000000272f928
0x000000000272f800:   0000000009244030 000000000967db10
0x000000000272f810:   0000000000000000 000007fee865d78f 

Instructions: (pc=0x000007fee8653ab3)
0x000007fee8653a93:   c3 d1 ff 48 63 d8 83 fb 01 0f 8c ed 00 00 00 49
0x000007fee8653aa3:   8b 0c 24 3b 59 30 0f 8f e0 00 00 00 48 8b 49 40
0x000007fee8653ab3:   48 8b 3c d9 48 85 ff 0f 84 cf 00 00 00 4c 8d 0d
0x000007fee8653ac3:   11 a2 31 00 48 8d 15 9a a2 31 00 45 33 c0 49 8b 


Register to memory mapping:

RAX=0x0000000000000085 is an unknown value
RBX=0x0000000000000085 is an unknown value
RCX=0x3b58414d4143533b is an unknown value
RDX=0x000000000687a3e2 is an unknown value
RSP=0x000000000272f720 is pointing into the stack for thread:
0x000000000035b800
RBP=0x0000000000000000 is an unknown value
RSI=0x000000000967db10 is an unknown value
RDI=0x0000000007be8d00 is an unknown value
R8 =0x0000000000000000 is an unknown value
R9 =0x000000000272f748 is pointing into the stack for thread:
0x000000000035b800
R10=0x000007fee8371d0d is an unknown value
R11=0x000000000272f6b0 is pointing into the stack for thread:
0x000000000035b800
R12=0x0000000007be8d00 is an unknown value
R13=0x0000000000000000 is an unknown value
R14=0x00000000091f67b0 is an unknown value
R15=0x0000000000000003 is an unknown value


Stack: [0x0000000002630000,0x0000000002730000],  sp=0x000000000272f720, 
free space=1021k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native
code)
C  [gdal18.dll+0x3c3ab3]  S57Reader::ApplyObjectClassAttributes+0xa3

[error occurred during error reporting (printing native stack), id
0xc0000005]

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j 
org.gdal.ogr.ogrJNI.Layer_GetFeatureCount__SWIG_1(JLorg/gdal/ogr/Layer;)I+0
j  org.gdal.ogr.Layer.GetFeatureCount()I+5
j  org.gdal.TestViolation.main([Ljava/lang/String;)V+404
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x0000000006371800 JavaThread "GeometryNativeObjectsCleaner" daemon
[_thread_blocked, id=6876, stack(0x0000000009c80000,0x0000000009d80000)]
  0x0000000006371000 JavaThread "FeatureNativeObjectsCleaner" daemon
[_thread_blocked, id=8172, stack(0x0000000009b80000,0x0000000009c80000)]
  0x0000000006370000 JavaThread "Low Memory Detector" daemon
[_thread_blocked, id=7592, stack(0x0000000007550000,0x0000000007650000)]
  0x0000000006361800 JavaThread "C2 CompilerThread1" daemon
[_thread_blocked, id=4484, stack(0x0000000007450000,0x0000000007550000)]
  0x000000000634b000 JavaThread "C2 CompilerThread0" daemon
[_thread_blocked, id=3812, stack(0x0000000007350000,0x0000000007450000)]
  0x000000000634a000 JavaThread "Attach Listener" daemon [_thread_blocked,
id=7500, stack(0x0000000007250000,0x0000000007350000)]
  0x0000000006349000 JavaThread "Signal Dispatcher" daemon [_thread_blocked,
id=6784, stack(0x0000000007150000,0x0000000007250000)]
  0x00000000062f8800 JavaThread "Finalizer" daemon [_thread_blocked,
id=5980, stack(0x0000000007050000,0x0000000007150000)]
  0x00000000062f2000 JavaThread "Reference Handler" daemon [_thread_blocked,
id=7004, stack(0x0000000006f50000,0x0000000007050000)]
=>0x000000000035b800 JavaThread "main" [_thread_in_native, id=7396,
stack(0x0000000002630000,0x0000000002730000)]

Other Threads:
  0x00000000062e6000 VMThread [stack: 0x0000000006e50000,0x0000000006f50000]
[id=7820]
  0x0000000006399000 WatcherThread [stack:
0x0000000007650000,0x0000000007750000] [id=8160]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 PSYoungGen      total 19072K, used 14187K [0x00000000eab60000,
0x00000000ec0a0000, 0x0000000100000000)
  eden space 16384K, 86% used
[0x00000000eab60000,0x00000000eb93aea0,0x00000000ebb60000)
  from space 2688K, 0% used
[0x00000000ebe00000,0x00000000ebe00000,0x00000000ec0a0000)
  to   space 2688K, 0% used
[0x00000000ebb60000,0x00000000ebb60000,0x00000000ebe00000)
 PSOldGen        total 43648K, used 0K [0x00000000c0200000,
0x00000000c2ca0000, 0x00000000eab60000)
  object space 43648K, 0% used
[0x00000000c0200000,0x00000000c0200000,0x00000000c2ca0000)
 PSPermGen       total 21248K, used 5628K [0x00000000bb000000,
0x00000000bc4c0000, 0x00000000c0200000)
  object space 21248K, 26% used
[0x00000000bb000000,0x00000000bb57f168,0x00000000bc4c0000)

Code Cache  [0x0000000002730000, 0x00000000029a0000, 0x0000000005730000)
 total_blobs=391 nmethods=67 adapters=277 free_code_cache=49629952
largest_free_block=24512

Dynamic libraries:
0x0000000000400000 - 0x000000000042e000 	C:\Program
Files\Java\jre6\bin\javaw.exe
0x00000000772f0000 - 0x0000000077499000 	C:\Windows\SYSTEM32\ntdll.dll
0x00000000771d0000 - 0x00000000772ef000 	C:\Windows\system32\kernel32.dll
0x000007fefda70000 - 0x000007fefdadc000 	C:\Windows\system32\KERNELBASE.dll
0x000007feff0a0000 - 0x000007feff17b000 	C:\Windows\system32\ADVAPI32.dll
0x000007fefe190000 - 0x000007fefe22f000 	C:\Windows\system32\msvcrt.dll
0x000007feff4c0000 - 0x000007feff4df000 	C:\Windows\SYSTEM32\sechost.dll
0x000007fefde60000 - 0x000007fefdf8d000 	C:\Windows\system32\RPCRT4.dll
0x00000000770d0000 - 0x00000000771ca000 	C:\Windows\system32\USER32.dll
0x000007fefdbc0000 - 0x000007fefdc27000 	C:\Windows\system32\GDI32.dll
0x000007feff4e0000 - 0x000007feff4ee000 	C:\Windows\system32\LPK.dll
0x000007feff1d0000 - 0x000007feff299000 	C:\Windows\system32\USP10.dll
0x000007feff2a0000 - 0x000007feff2ce000 	C:\Windows\system32\IMM32.DLL
0x000007feff4f0000 - 0x000007feff5f9000 	C:\Windows\system32\MSCTF.dll
0x000000006fa00000 - 0x000000006fa3f000 
C:\PROGRA~2\Sophos\SOPHOS~1\SOPHOS~2.DLL
0x00000000774b0000 - 0x00000000774b7000 	C:\Windows\system32\PSAPI.DLL
0x000000006d7f0000 - 0x000000006dfa8000 	C:\Program
Files\Java\jre6\bin\server\jvm.dll
0x000007fefc540000 - 0x000007fefc57b000 	C:\Windows\system32\WINMM.dll
0x000000006d760000 - 0x000000006d76e000 	C:\Program
Files\Java\jre6\bin\verify.dll
0x000000006d3b0000 - 0x000000006d3d7000 	C:\Program
Files\Java\jre6\bin\java.dll
0x000000006d7b0000 - 0x000000006d7c2000 	C:\Program
Files\Java\jre6\bin\zip.dll
0x000007fef2590000 - 0x000007fef2673000 
D:\user\workspace\org.gdal\nativelib\win64\iconv.dll
0x000000006fd80000 - 0x000000006fe52000 	C:\Windows\system32\MSVCR100.dll
0x000007feebbc0000 - 0x000007feebd08000 
D:\user\workspace\org.gdal\nativelib\win64\libxml2.dll
0x000007fef9b10000 - 0x000007fef9b19000 	C:\Windows\system32\WSOCK32.dll
0x000007feff180000 - 0x000007feff1cd000 	C:\Windows\system32\WS2_32.dll
0x000007feff4b0000 - 0x000007feff4b8000 	C:\Windows\system32\NSI.dll
0x0000000068d60000 - 0x0000000068ec4000 
D:\user\workspace\org.gdal\nativelib\win64\pdflib.dll
0x000007feebb10000 - 0x000007feebbb3000 
D:\user\workspace\org.gdal\nativelib\win64\sqlite3.dll
0x000007fef4f40000 - 0x000007fef4f67000 
D:\user\workspace\org.gdal\nativelib\win64\openjpeg.dll
0x000007fefbe50000 - 0x000007fefbe66000 
D:\user\workspace\org.gdal\nativelib\win64\zlib1.dll
0x000007feeace0000 - 0x000007feeae67000 
D:\user\workspace\org.gdal\nativelib\win64\libeay32.dll
0x000007fef4840000 - 0x000007fef488e000 
D:\user\workspace\org.gdal\nativelib\win64\ssleay32.dll
0x000007fef4bc0000 - 0x000007fef4c08000 
D:\user\workspace\org.gdal\nativelib\win64\libcurl.dll
0x000007feea4b0000 - 0x000007feea66c000 
D:\user\workspace\org.gdal\nativelib\win64\geos_c.dll
0x000000006fea0000 - 0x000000006ff38000 	C:\Windows\system32\MSVCP100.dll
0x000007feea260000 - 0x000007feea4a1000 
D:\user\workspace\org.gdal\nativelib\win64\libmysql.dll
0x000007fef4810000 - 0x000007fef4835000 
D:\user\workspace\org.gdal\nativelib\win64\libpq.dll
0x000007fefb1e0000 - 0x000007fefb1e7000 	C:\Windows\system32\SHFOLDER.dll
0x000007fefe310000 - 0x000007feff098000 	C:\Windows\system32\SHELL32.dll
0x000007fefe030000 - 0x000007fefe0a1000 	C:\Windows\system32\SHLWAPI.dll
0x000007fefd5b0000 - 0x000007fefd5bb000 	C:\Windows\system32\Secur32.dll
0x000007fefd5e0000 - 0x000007fefd605000 	C:\Windows\system32\SSPICLI.DLL
0x0000000180000000 - 0x0000000180023000 
D:\user\workspace\org.gdal\nativelib\win64\libexpat.dll
0x000007fef3d40000 - 0x000007fef3d8e000 
D:\user\workspace\org.gdal\nativelib\win64\proj.dll
0x000007feeb850000 - 0x000007feeb971000 
D:\user\workspace\org.gdal\nativelib\win64\spatialite.dll
0x0000000012000000 - 0x000000001233a000 
D:\user\workspace\org.gdal\nativelib\win64\xerces-c_2_8.dll
0x000007fee8290000 - 0x000007fee8c13000 
D:\user\workspace\org.gdal\nativelib\win64\gdal18.dll
0x000007fef2680000 - 0x000007fef2731000 	C:\Windows\system32\ODBC32.dll
0x0000000070110000 - 0x0000000070148000 	C:\Windows\system32\odbcint.dll
0x000007fef5390000 - 0x000007fef53a3000 
D:\user\workspace\org.gdal\nativelib\win64\gdalconstjni.dll
0x000007fef43a0000 - 0x000007fef43f0000 
D:\user\workspace\org.gdal\nativelib\win64\gdaljni.dll
0x000007fef4370000 - 0x000007fef4392000 
D:\user\workspace\org.gdal\nativelib\win64\osrjni.dll
0x000007fef42c0000 - 0x000007fef42e5000 
D:\user\workspace\org.gdal\nativelib\win64\ogrjni.dll
0x000007fef77c0000 - 0x000007fef78e5000 	C:\Windows\system32\dbghelp.dll

VM Arguments:
jvm_args: -Dfile.encoding=UTF-8 
java_command: org.gdal.TestViolation
Launcher Type: SUN_STANDARD

Environment Variables:
CLASSPATH=.;C:\Program Files (x86)\Java\jre6\lib\ext\QTJava.zip
PATH=nativelib/win64
USERNAME=user
OS=Windows_NT
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 30 Stepping 5, GenuineIntel



---------------  S Y S T E M  ---------------

OS: Windows 7 Build 7601 Service Pack 1

CPU:total 8 (4 cores per cpu, 2 threads per core) family 6 model 30 stepping
5, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt, ht

Memory: 4k page, physical 4183896k(1680868k free), swap 8365944k(4551052k
free)

vm_info: Java HotSpot(TM) 64-Bit Server VM (20.0-b11) for windows-amd64 JRE
(1.6.0_25-b06), built on Apr 14 2011 00:44:38 by "java_re" with MS VC++ 8.0
(VS2005)

time: Thu Jan 05 17:16:44 2012
elapsed time: 24 seconds



  

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-Java-Binding-meomory-problem-under-intensive-method-calls-tp7155011p7155011.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Thu Jan  5 12:06:35 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan  5 12:06:49 2012
Subject: [gdal-dev] GDAL Java Binding meomory problem under intensive
	method calls
In-Reply-To: <1325780863590-7155011.post@n2.nabble.com>
References: <1325780863590-7155011.post@n2.nabble.com>
Message-ID: <1325783195.4f05d89b739f3@imp.free.fr>

Selon easyl <thlin.box@gmail.com>:

Could you create a completely self-contained code that could be used to compile
and reproduce ? It might be possible that you use the layers after the
datasource has been closed for example, but it is difficult to be sure without
seeing the exact code.

> GDAL 1.8.1 on Win64
>
> basically I just use ogr2ogr and ogrinfo from gdal/java examples.
>
> I wrote a test case with processing S57 (*000) data:
>
>    /* read layer information with ogrinfo */
>    final String param[] = { "-ro", "-al", src};
>    final List<Layer> layers = ogrinfo.execute(param); // I just collect
> "Layers" created by ogrinfo
>
>    /* convert each possible layer and geometry type  with ogr2ogr */
>    for (/* ... huge loop ...*/) {
>       param= new String[]{"-skipfailure", "-append", "-f","ESRI Shapefile",
> dest, src, "-nlt", type, layer};
>       ogr2ogr.excute(param);
>    }
>
>    /* then try to access Layer again */
>    layers.get(0).GetFeatureCount(); // XXX: it crashed here
>
> I append the error at the end of the post.
>
> It seems that the native lib has some memory reference issue or leak.
>
>
> =========================================
> =========================================
> =========================================
> #
> # A fatal error has been detected by the Java Runtime Environment:
> #
> #  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x000007fee8653ab3,
> pid=7364, tid=7396
> #
> # JRE version: 6.0_25-b06
> # Java VM: Java HotSpot(TM) 64-Bit Server VM (20.0-b11 mixed mode
> windows-amd64 compressed oops)
> # Problematic frame:
> # C  [gdal18.dll+0x3c3ab3]
> #
> # If you would like to submit a bug report, please visit:
> #   http://java.sun.com/webapps/bugreport/crash.jsp
> # The crash happened outside the Java Virtual Machine in native code.
> # See problematic frame for where to report the bug.
> #
>
> ---------------  T H R E A D  ---------------
>
> Current thread (0x000000000035b800):  JavaThread "main" [_thread_in_native,
> id=7396, stack(0x0000000002630000,0x0000000002730000)]
>
> siginfo: ExceptionCode=0xc0000005, reading address 0xffffffffffffffff
>
> Registers:
> RAX=0x0000000000000085, RBX=0x0000000000000085, RCX=0x3b58414d4143533b,
> RDX=0x000000000687a3e2
> RSP=0x000000000272f720, RBP=0x0000000000000000, RSI=0x000000000967db10,
> RDI=0x0000000007be8d00
> R8 =0x0000000000000000, R9 =0x000000000272f748, R10=0x000007fee8371d0d,
> R11=0x000000000272f6b0
> R12=0x0000000007be8d00, R13=0x0000000000000000, R14=0x00000000091f67b0,
> R15=0x0000000000000003
> RIP=0x000007fee8653ab3, EFLAGS=0x0000000000010297
>
> Top of Stack: (sp=0x000000000272f720)
> 0x000000000272f720:   0000000000000004 000000000967db10
> 0x000000000272f730:   0000000007be8d00 00000000091f67b0
> 0x000000000272f740:   0000000000000000 0000000000000002
> 0x000000000272f750:   0000000007cbda30 000007fee86faea4
> 0x000000000272f760:   000000000035b800 0000000000000000
> 0x000000000272f770:   000000000272f958 0000000000000081
> 0x000000000272f780:   000000000967db10 000007fee8658586
> 0x000000000272f790:   0000000000000004 00000000091f67b0
> 0x000000000272f7a0:   0000000007be8d00 0000000000000001
> 0x000000000272f7b0:   0000000000000000 0000000000000002
> 0x000000000272f7c0:   fffffffffffffffe 0000000000000000
> 0x000000000272f7d0:   00000000bb52a7e8 0000000000000000
> 0x000000000272f7e0:   0000000000000e9d 000007fee8659256
> 0x000000000272f7f0:   0000000007be8d00 000000000272f928
> 0x000000000272f800:   0000000009244030 000000000967db10
> 0x000000000272f810:   0000000000000000 000007fee865d78f
>
> Instructions: (pc=0x000007fee8653ab3)
> 0x000007fee8653a93:   c3 d1 ff 48 63 d8 83 fb 01 0f 8c ed 00 00 00 49
> 0x000007fee8653aa3:   8b 0c 24 3b 59 30 0f 8f e0 00 00 00 48 8b 49 40
> 0x000007fee8653ab3:   48 8b 3c d9 48 85 ff 0f 84 cf 00 00 00 4c 8d 0d
> 0x000007fee8653ac3:   11 a2 31 00 48 8d 15 9a a2 31 00 45 33 c0 49 8b
>
>
> Register to memory mapping:
>
> RAX=0x0000000000000085 is an unknown value
> RBX=0x0000000000000085 is an unknown value
> RCX=0x3b58414d4143533b is an unknown value
> RDX=0x000000000687a3e2 is an unknown value
> RSP=0x000000000272f720 is pointing into the stack for thread:
> 0x000000000035b800
> RBP=0x0000000000000000 is an unknown value
> RSI=0x000000000967db10 is an unknown value
> RDI=0x0000000007be8d00 is an unknown value
> R8 =0x0000000000000000 is an unknown value
> R9 =0x000000000272f748 is pointing into the stack for thread:
> 0x000000000035b800
> R10=0x000007fee8371d0d is an unknown value
> R11=0x000000000272f6b0 is pointing into the stack for thread:
> 0x000000000035b800
> R12=0x0000000007be8d00 is an unknown value
> R13=0x0000000000000000 is an unknown value
> R14=0x00000000091f67b0 is an unknown value
> R15=0x0000000000000003 is an unknown value
>
>
> Stack: [0x0000000002630000,0x0000000002730000],  sp=0x000000000272f720,
> free space=1021k
> Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native
> code)
> C  [gdal18.dll+0x3c3ab3]  S57Reader::ApplyObjectClassAttributes+0xa3
>
> [error occurred during error reporting (printing native stack), id
> 0xc0000005]
>
> Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
> j
> org.gdal.ogr.ogrJNI.Layer_GetFeatureCount__SWIG_1(JLorg/gdal/ogr/Layer;)I+0
> j  org.gdal.ogr.Layer.GetFeatureCount()I+5
> j  org.gdal.TestViolation.main([Ljava/lang/String;)V+404
> v  ~StubRoutines::call_stub
>
> ---------------  P R O C E S S  ---------------
>
> Java Threads: ( => current thread )
>   0x0000000006371800 JavaThread "GeometryNativeObjectsCleaner" daemon
> [_thread_blocked, id=6876, stack(0x0000000009c80000,0x0000000009d80000)]
>   0x0000000006371000 JavaThread "FeatureNativeObjectsCleaner" daemon
> [_thread_blocked, id=8172, stack(0x0000000009b80000,0x0000000009c80000)]
>   0x0000000006370000 JavaThread "Low Memory Detector" daemon
> [_thread_blocked, id=7592, stack(0x0000000007550000,0x0000000007650000)]
>   0x0000000006361800 JavaThread "C2 CompilerThread1" daemon
> [_thread_blocked, id=4484, stack(0x0000000007450000,0x0000000007550000)]
>   0x000000000634b000 JavaThread "C2 CompilerThread0" daemon
> [_thread_blocked, id=3812, stack(0x0000000007350000,0x0000000007450000)]
>   0x000000000634a000 JavaThread "Attach Listener" daemon [_thread_blocked,
> id=7500, stack(0x0000000007250000,0x0000000007350000)]
>   0x0000000006349000 JavaThread "Signal Dispatcher" daemon [_thread_blocked,
> id=6784, stack(0x0000000007150000,0x0000000007250000)]
>   0x00000000062f8800 JavaThread "Finalizer" daemon [_thread_blocked,
> id=5980, stack(0x0000000007050000,0x0000000007150000)]
>   0x00000000062f2000 JavaThread "Reference Handler" daemon [_thread_blocked,
> id=7004, stack(0x0000000006f50000,0x0000000007050000)]
> =>0x000000000035b800 JavaThread "main" [_thread_in_native, id=7396,
> stack(0x0000000002630000,0x0000000002730000)]
>
> Other Threads:
>   0x00000000062e6000 VMThread [stack: 0x0000000006e50000,0x0000000006f50000]
> [id=7820]
>   0x0000000006399000 WatcherThread [stack:
> 0x0000000007650000,0x0000000007750000] [id=8160]
>
> VM state:not at safepoint (normal execution)
>
> VM Mutex/Monitor currently owned by a thread: None
>
> Heap
>  PSYoungGen      total 19072K, used 14187K [0x00000000eab60000,
> 0x00000000ec0a0000, 0x0000000100000000)
>   eden space 16384K, 86% used
> [0x00000000eab60000,0x00000000eb93aea0,0x00000000ebb60000)
>   from space 2688K, 0% used
> [0x00000000ebe00000,0x00000000ebe00000,0x00000000ec0a0000)
>   to   space 2688K, 0% used
> [0x00000000ebb60000,0x00000000ebb60000,0x00000000ebe00000)
>  PSOldGen        total 43648K, used 0K [0x00000000c0200000,
> 0x00000000c2ca0000, 0x00000000eab60000)
>   object space 43648K, 0% used
> [0x00000000c0200000,0x00000000c0200000,0x00000000c2ca0000)
>  PSPermGen       total 21248K, used 5628K [0x00000000bb000000,
> 0x00000000bc4c0000, 0x00000000c0200000)
>   object space 21248K, 26% used
> [0x00000000bb000000,0x00000000bb57f168,0x00000000bc4c0000)
>
> Code Cache  [0x0000000002730000, 0x00000000029a0000, 0x0000000005730000)
>  total_blobs=391 nmethods=67 adapters=277 free_code_cache=49629952
> largest_free_block=24512
>
> Dynamic libraries:
> 0x0000000000400000 - 0x000000000042e000 	C:\Program
> Files\Java\jre6\bin\javaw.exe
> 0x00000000772f0000 - 0x0000000077499000 	C:\Windows\SYSTEM32\ntdll.dll
> 0x00000000771d0000 - 0x00000000772ef000 	C:\Windows\system32\kernel32.dll
> 0x000007fefda70000 - 0x000007fefdadc000 	C:\Windows\system32\KERNELBASE.dll
> 0x000007feff0a0000 - 0x000007feff17b000 	C:\Windows\system32\ADVAPI32.dll
> 0x000007fefe190000 - 0x000007fefe22f000 	C:\Windows\system32\msvcrt.dll
> 0x000007feff4c0000 - 0x000007feff4df000 	C:\Windows\SYSTEM32\sechost.dll
> 0x000007fefde60000 - 0x000007fefdf8d000 	C:\Windows\system32\RPCRT4.dll
> 0x00000000770d0000 - 0x00000000771ca000 	C:\Windows\system32\USER32.dll
> 0x000007fefdbc0000 - 0x000007fefdc27000 	C:\Windows\system32\GDI32.dll
> 0x000007feff4e0000 - 0x000007feff4ee000 	C:\Windows\system32\LPK.dll
> 0x000007feff1d0000 - 0x000007feff299000 	C:\Windows\system32\USP10.dll
> 0x000007feff2a0000 - 0x000007feff2ce000 	C:\Windows\system32\IMM32.DLL
> 0x000007feff4f0000 - 0x000007feff5f9000 	C:\Windows\system32\MSCTF.dll
> 0x000000006fa00000 - 0x000000006fa3f000
> C:\PROGRA~2\Sophos\SOPHOS~1\SOPHOS~2.DLL
> 0x00000000774b0000 - 0x00000000774b7000 	C:\Windows\system32\PSAPI.DLL
> 0x000000006d7f0000 - 0x000000006dfa8000 	C:\Program
> Files\Java\jre6\bin\server\jvm.dll
> 0x000007fefc540000 - 0x000007fefc57b000 	C:\Windows\system32\WINMM.dll
> 0x000000006d760000 - 0x000000006d76e000 	C:\Program
> Files\Java\jre6\bin\verify.dll
> 0x000000006d3b0000 - 0x000000006d3d7000 	C:\Program
> Files\Java\jre6\bin\java.dll
> 0x000000006d7b0000 - 0x000000006d7c2000 	C:\Program
> Files\Java\jre6\bin\zip.dll
> 0x000007fef2590000 - 0x000007fef2673000
> D:\user\workspace\org.gdal\nativelib\win64\iconv.dll
> 0x000000006fd80000 - 0x000000006fe52000 	C:\Windows\system32\MSVCR100.dll
> 0x000007feebbc0000 - 0x000007feebd08000
> D:\user\workspace\org.gdal\nativelib\win64\libxml2.dll
> 0x000007fef9b10000 - 0x000007fef9b19000 	C:\Windows\system32\WSOCK32.dll
> 0x000007feff180000 - 0x000007feff1cd000 	C:\Windows\system32\WS2_32.dll
> 0x000007feff4b0000 - 0x000007feff4b8000 	C:\Windows\system32\NSI.dll
> 0x0000000068d60000 - 0x0000000068ec4000
> D:\user\workspace\org.gdal\nativelib\win64\pdflib.dll
> 0x000007feebb10000 - 0x000007feebbb3000
> D:\user\workspace\org.gdal\nativelib\win64\sqlite3.dll
> 0x000007fef4f40000 - 0x000007fef4f67000
> D:\user\workspace\org.gdal\nativelib\win64\openjpeg.dll
> 0x000007fefbe50000 - 0x000007fefbe66000
> D:\user\workspace\org.gdal\nativelib\win64\zlib1.dll
> 0x000007feeace0000 - 0x000007feeae67000
> D:\user\workspace\org.gdal\nativelib\win64\libeay32.dll
> 0x000007fef4840000 - 0x000007fef488e000
> D:\user\workspace\org.gdal\nativelib\win64\ssleay32.dll
> 0x000007fef4bc0000 - 0x000007fef4c08000
> D:\user\workspace\org.gdal\nativelib\win64\libcurl.dll
> 0x000007feea4b0000 - 0x000007feea66c000
> D:\user\workspace\org.gdal\nativelib\win64\geos_c.dll
> 0x000000006fea0000 - 0x000000006ff38000 	C:\Windows\system32\MSVCP100.dll
> 0x000007feea260000 - 0x000007feea4a1000
> D:\user\workspace\org.gdal\nativelib\win64\libmysql.dll
> 0x000007fef4810000 - 0x000007fef4835000
> D:\user\workspace\org.gdal\nativelib\win64\libpq.dll
> 0x000007fefb1e0000 - 0x000007fefb1e7000 	C:\Windows\system32\SHFOLDER.dll
> 0x000007fefe310000 - 0x000007feff098000 	C:\Windows\system32\SHELL32.dll
> 0x000007fefe030000 - 0x000007fefe0a1000 	C:\Windows\system32\SHLWAPI.dll
> 0x000007fefd5b0000 - 0x000007fefd5bb000 	C:\Windows\system32\Secur32.dll
> 0x000007fefd5e0000 - 0x000007fefd605000 	C:\Windows\system32\SSPICLI.DLL
> 0x0000000180000000 - 0x0000000180023000
> D:\user\workspace\org.gdal\nativelib\win64\libexpat.dll
> 0x000007fef3d40000 - 0x000007fef3d8e000
> D:\user\workspace\org.gdal\nativelib\win64\proj.dll
> 0x000007feeb850000 - 0x000007feeb971000
> D:\user\workspace\org.gdal\nativelib\win64\spatialite.dll
> 0x0000000012000000 - 0x000000001233a000
> D:\user\workspace\org.gdal\nativelib\win64\xerces-c_2_8.dll
> 0x000007fee8290000 - 0x000007fee8c13000
> D:\user\workspace\org.gdal\nativelib\win64\gdal18.dll
> 0x000007fef2680000 - 0x000007fef2731000 	C:\Windows\system32\ODBC32.dll
> 0x0000000070110000 - 0x0000000070148000 	C:\Windows\system32\odbcint.dll
> 0x000007fef5390000 - 0x000007fef53a3000
> D:\user\workspace\org.gdal\nativelib\win64\gdalconstjni.dll
> 0x000007fef43a0000 - 0x000007fef43f0000
> D:\user\workspace\org.gdal\nativelib\win64\gdaljni.dll
> 0x000007fef4370000 - 0x000007fef4392000
> D:\user\workspace\org.gdal\nativelib\win64\osrjni.dll
> 0x000007fef42c0000 - 0x000007fef42e5000
> D:\user\workspace\org.gdal\nativelib\win64\ogrjni.dll
> 0x000007fef77c0000 - 0x000007fef78e5000 	C:\Windows\system32\dbghelp.dll
>
> VM Arguments:
> jvm_args: -Dfile.encoding=UTF-8
> java_command: org.gdal.TestViolation
> Launcher Type: SUN_STANDARD
>
> Environment Variables:
> CLASSPATH=.;C:\Program Files (x86)\Java\jre6\lib\ext\QTJava.zip
> PATH=nativelib/win64
> USERNAME=user
> OS=Windows_NT
> PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 30 Stepping 5, GenuineIntel
>
>
>
> ---------------  S Y S T E M  ---------------
>
> OS: Windows 7 Build 7601 Service Pack 1
>
> CPU:total 8 (4 cores per cpu, 2 threads per core) family 6 model 30 stepping
> 5, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2, popcnt, ht
>
> Memory: 4k page, physical 4183896k(1680868k free), swap 8365944k(4551052k
> free)
>
> vm_info: Java HotSpot(TM) 64-Bit Server VM (20.0-b11) for windows-amd64 JRE
> (1.6.0_25-b06), built on Apr 14 2011 00:44:38 by "java_re" with MS VC++ 8.0
> (VS2005)
>
> time: Thu Jan 05 17:16:44 2012
> elapsed time: 24 seconds
>
>
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1803224.n2.nabble.com/GDAL-Java-Binding-meomory-problem-under-intensive-method-calls-tp7155011p7155011.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From thlin.box at gmail.com  Fri Jan  6 04:45:37 2012
From: thlin.box at gmail.com (easyl)
Date: Fri Jan  6 04:46:22 2012
Subject: [gdal-dev] Re: GDAL Java Binding meomory problem under intensive
	method calls
In-Reply-To: <1325783195.4f05d89b739f3@imp.free.fr>
References: <1325780863590-7155011.post@n2.nabble.com>
	<1325783195.4f05d89b739f3@imp.free.fr>
Message-ID: <1325843137612-7157803.post@n2.nabble.com>


directly using ogr2ogr and ogrinfo from
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java/apps/
I made a following test cae.


somehow I noticed that the error occurs when the S57 data more than 1mb

==============================

public class TestViolation {

   public static void main(String[] args) {

      final String src = "test/data/DE416030.000"; // S75 data
      final String tmp = "test/data/tmp";
      {
         final String param[] = { "-ro", "-al", src};
         // I have modified the ogrinfo code so that it returns Layers @see
http://snipt.org/tkppl5
         final List<Layer> layers = ogrinfo.main(param); 
         final Map<String, Layer> layerMap = new Hashtable<String, Layer>();
         for (Layer layer : layers) {         
            layerMap.put(layer.GetName(), layer);
         }

         // do some processing
         for (String layer : layerMap.keySet()) {
            String[] types = {"POLYGON", "POINT", "LINESTRING"}; 
            for (String type : types) {
               String[] command = new String[]{"-skipfailure", "-append",
"-f","ESRI Shapefile", tmp,src, "-nlt", type, layer};
               }
               ogr2ogr.main(command);
            }  
         }
         // do some processing
         
         for (Layer layer : layers) {         
            layer.GetFeatureCount(); // it crashed here!!!!
         }        
      }

   }
}

==============================

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-Java-Binding-meomory-problem-under-intensive-method-calls-tp7155011p7157803.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Fri Jan  6 05:30:54 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan  6 05:31:33 2012
Subject: [gdal-dev] Re: GDAL Java Binding meomory problem under intensive
	method calls
In-Reply-To: <1325843137612-7157803.post@n2.nabble.com>
References: <1325780863590-7155011.post@n2.nabble.com>
	<1325783195.4f05d89b739f3@imp.free.fr>
	<1325843137612-7157803.post@n2.nabble.com>
Message-ID: <1325845854.4f06cd5e6f5b2@imp.free.fr>

Hi,

ok I found what was going on. The issue is the call to ogr2ogr which calls
ogr.RegisterAll(). The effect of calling ogr.RegisterAll() when it has already
been called is to reload the drivers, which will invalidate any opened
datasource, like the one you use indirectly for the source layers. This
datasource then references a destroyed driver, and the crash is just the direct
consequence of that.

So the fix is to replace ogr.RegisterAll() by

        if( ogr.GetDriverCount() == 0 )
            ogr.RegisterAll();

in ogrinfo.java and ogr2ogr.java. Just pushed to SVN trunk.

Otherwise, using ogrinfo.java for the use you make of it is really
over-complicated. Just use :

         if( ogr.GetDriverCount() == 0 )
              ogr.RegisterAll();
         DataSource poDS = ogr.Open(src, false);
         List<Layer> layers = new ArrayList<Layer>();
         for(int i=0;i<poDS.GetLayerCount();i++)
            layers.add(poDS.GetLayer(i));

Best regards,

Even

From thlin.box at gmail.com  Fri Jan  6 05:53:51 2012
From: thlin.box at gmail.com (easyl)
Date: Fri Jan  6 05:53:57 2012
Subject: [gdal-dev] Re: GDAL Java Binding meomory problem under intensive
	method calls
In-Reply-To: <1325845854.4f06cd5e6f5b2@imp.free.fr>
References: <1325780863590-7155011.post@n2.nabble.com>
	<1325783195.4f05d89b739f3@imp.free.fr>
	<1325843137612-7157803.post@n2.nabble.com>
	<1325845854.4f06cd5e6f5b2@imp.free.fr>
Message-ID: <1325847231252-7157990.post@n2.nabble.com>

your are right! 
It fixed the problem!!

Actually I have another question (after fixing the violation bug).
Can I implement ogrtindex in Java as well?

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-Java-Binding-meomory-problem-under-intensive-method-calls-tp7155011p7157990.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Fri Jan  6 07:27:40 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan  6 07:28:07 2012
Subject: [gdal-dev] Re: GDAL Java Binding meomory problem under intensive
	method calls
In-Reply-To: <1325847231252-7157990.post@n2.nabble.com>
References: <1325780863590-7155011.post@n2.nabble.com>
	<1325783195.4f05d89b739f3@imp.free.fr>
	<1325843137612-7157803.post@n2.nabble.com>
	<1325845854.4f06cd5e6f5b2@imp.free.fr>
	<1325847231252-7157990.post@n2.nabble.com>
Message-ID: <1325852860.4f06e8bcad64f@imp.free.fr>

> Can I implement ogrtindex in Java as well?

I've scanned quickly ogrtindex.cpp and I believe that all the APIs it uses are
exposed in the Java bindings, so yes it looks like it is doable. I see that
there's a large part of the code that does various checks. You can probably skip
some of them if you are sure not to go into those conditions in your use cases.
From pascal.jaugeas.External at cassidian.com  Fri Jan  6 08:41:49 2012
From: pascal.jaugeas.External at cassidian.com (Jaugeas, Pascal (External))
Date: Fri Jan  6 08:42:02 2012
Subject: [gdal-dev] Open Grib File
In-Reply-To: <CAMKgpObo_4uKrSr8cG+0NP87PEN1K21u_DoFKKbq8z+O0Pe-kQ@mail.gmail.com>
Message-ID: <4A9CDAF29DA84A4EAEAA77395DDE56F405D66D24@SMFIDF806A.main.fr.ds.corp>

Hello,
 
another problem ....
 
I try to read data of a band of a grib File. I think , in C# dev, I must use ReadRaster function:
 
My code : 
 
for (int j = 1; j <= rows; j++)

{

for (int k = 1; k <= cols; k++)

{

byte[] buffer ={1,1};

CPLErr err = band.ReadRaster(0, 0, cols, rows, buffer, cols, rows, 1, 1);

double val = (double)band. ReadRaster(0, 0, cols, rows, buffer, cols, rows, 1, 1); 

}

}

 
But, val stay at 0  and err is none.
 
Do you have an idea ? buffer is important ?
 
Tank you again for any help
 
Best regards
 
Pascal
 

________________________________

De : gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] De la part de Chaitanya kumar CH
Envoy? : jeudi 5 janvier 2012 17:25
? : Jaugeas, Pascal (External)
Cc : gdal-dev@lists.osgeo.org
Objet : Re: [gdal-dev] Open Grib File


Pascal,

Use the GDALMajorObject::GetMetaData() method[1].

You might want to go through the GDAL API docs[2] a bit throughly.

[1]: http://www.gdal.org/classGDALMajorObject.html
[2]: http://www.gdal.org/hierarchy.html


On Thu, Jan 5, 2012 at 7:40 PM, Jaugeas, Pascal (External) <pascal.jaugeas.External@cassidian.com> wrote:


	
	I have another problem.
	 
	After open grib file,  I have a DataSet.
	This dataset give the quantities of row, col and band.
	For each band, I want to know the heading.  In a band of a grib file, there are 3 rows for heading, not counting by the dataset.
	Do you know how I can do that ?
	 
	Thanks and regards,
	 

________________________________

	De : Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com] 
	Envoy? : jeudi 5 janvier 2012 13:00
	? : Jaugeas, Pascal (External)
	Cc : gdal-dev@lists.osgeo.org
	Objet : Re: [gdal-dev] Open Grib File
	
	
	Pascal,
	
	First check if your file works with the gdalinfo utility. Set the environment variable CPL_DEBUG to ON to get more detailed reports on events.
	
	Check if you get the same error with another grib file and another format file.
	
	
	
	On Thu, Jan 5, 2012 at 2:50 PM, Jaugeas, Pascal (External) <pascal.jaugeas.External@cassidian.com> wrote:
	

		
		Hello,
		 
		I develop with Gdal for .Net.
		And I try to read a grib File (ed 1) like this :  

		Dataset

		ds = Gdal.Open(dataSourcePath, Access.GA_Update);
		with dataSourcePath is the path of grib file (.grb).
		 
		But I have an error in debug : "... not recognised as a supported file format."
		 
		Is this method correct to have a dataset of a grib file ?
		 
		Thank you for your help,
		 
		Best Regards,
		 
		Pascal Jaugeas
		 
		 

		_______________________________________________
		gdal-dev mailing list
		gdal-dev@lists.osgeo.org
		http://lists.osgeo.org/mailman/listinfo/gdal-dev
		




	-- 
	Best regards,
	Chaitanya kumar CH.
	
	+91-9494447584 <tel:%2B91-9494447584> 
	17.2416N 80.1426E
	




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120106/cef269b8/attachment-0001.html
From chaitanya.ch at gmail.com  Fri Jan  6 08:52:55 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jan  6 08:53:35 2012
Subject: [gdal-dev] Open Grib File
In-Reply-To: <4A9CDAF29DA84A4EAEAA77395DDE56F405D66D24@SMFIDF806A.main.fr.ds.corp>
References: <CAMKgpObo_4uKrSr8cG+0NP87PEN1K21u_DoFKKbq8z+O0Pe-kQ@mail.gmail.com>
	<4A9CDAF29DA84A4EAEAA77395DDE56F405D66D24@SMFIDF806A.main.fr.ds.corp>
Message-ID: <CAMKgpOb-tyyD6fU+xpazoeLpKEKE=DXwu+zGWTQ53b_GToKpVw@mail.gmail.com>

Pascal,

The data is written into the buffer array. The function returns the CE_None
or CE_None.

On Fri, Jan 6, 2012 at 7:11 PM, Jaugeas, Pascal (External) <
pascal.jaugeas.External@cassidian.com> wrote:

> **
> Hello,
>
> another problem ....
>
> I try to read data of a band of a grib File. I think , in C# dev, I must
> use ReadRaster function:
>
> My code :
>
>
> for
> (int j = 1; j <= rows; j++)
>
> {
>
> for (int k = 1; k <= cols; k++)
>
> {
>
> byte[] buffer ={1,1};
>
> CPLErr err = band.ReadRaster(0, 0, cols, rows, buffer, cols, rows, 1, 1);
>
> double val = (double)band. ReadRaster(0, 0, cols, rows, buffer, cols,
> rows, 1, 1);
>
> }
>
> }
>
> But, val stay at 0  and err is none.
>
> Do you have an idea ? buffer is important ?
>
> Tank you again for any help
>
> Best regards
>
> Pascal
>
>
>  ------------------------------
> *De :* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *De la part de* Chaitanya kumar CH
> *Envoy? :* jeudi 5 janvier 2012 17:25
>
> *? :* Jaugeas, Pascal (External)
> *Cc :* gdal-dev@lists.osgeo.org
> *Objet :* Re: [gdal-dev] Open Grib File
>
> Pascal,
>
> Use the GDALMajorObject::GetMetaData() method[1].
>
> You might want to go through the GDAL API docs[2] a bit throughly.
>
> [1]: http://www.gdal.org/classGDALMajorObject.html
> [2]: http://www.gdal.org/hierarchy.html
>
> On Thu, Jan 5, 2012 at 7:40 PM, Jaugeas, Pascal (External) <
> pascal.jaugeas.External@cassidian.com> wrote:
>
>> **
>> I have another problem.
>>
>> After open grib file,  I have a DataSet.
>> This dataset give the quantities of row, col and band.
>> For each band, I want to know the heading.  In a band of a grib file,
>> there are 3 rows for heading, not counting by the dataset.
>> Do you know how I can do that ?
>>
>> Thanks and regards,
>>
>>
>>  ------------------------------
>> *De :* Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
>> *Envoy? :* jeudi 5 janvier 2012 13:00
>> *? :* Jaugeas, Pascal (External)
>> *Cc :* gdal-dev@lists.osgeo.org
>> *Objet :* Re: [gdal-dev] Open Grib File
>>
>>  Pascal,
>>
>> First check if your file works with the gdalinfo utility. Set the
>> environment variable CPL_DEBUG to ON to get more detailed reports on events.
>>
>> Check if you get the same error with another grib file and another format
>> file.
>>
>>
>> On Thu, Jan 5, 2012 at 2:50 PM, Jaugeas, Pascal (External) <
>> pascal.jaugeas.External@cassidian.com> wrote:
>>
>>> **
>>> Hello,
>>>
>>> I develop with Gdal for .Net.
>>> And I try to read a grib File (ed 1) like this :
>>>
>>> Dataset
>>> ds = Gdal.Open(dataSourcePath, Access.GA_Update);
>>> with dataSourcePath is the path of grib file (.grb).
>>>
>>> But I have an error in debug : "... not recognised as a supported file
>>> format."
>>>
>>> Is this method correct to have a dataset of a grib file ?
>>>
>>> Thank you for your help,
>>>
>>> Best Regards,
>>>
>>> Pascal Jaugeas
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120106/b8bd2595/attachment.html
From rush at winkey.org  Fri Jan  6 15:57:06 2012
From: rush at winkey.org (Brian Case)
Date: Fri Jan  6 15:58:59 2012
Subject: [gdal-dev] Reading OGRStyle information using C++
In-Reply-To: <CAGU4z-r0eWNg0hWnGXRdpFkV5BfRx0JjechuGyGr1b3hvW712Q@mail.gmail.com>
References: <CAGU4z-qNE1YvZUQJe=QpUm0XRxCcWS-hNx_DibPKqaYmqNYfCA@mail.gmail.com>
	<CAMKgpOYLkfh5V_jdjB1cdQraveq_KhVBGqviRR8SbAHMch=4Dg@mail.gmail.com>
	<CAMKgpOap_u7XWCh-gSFfGMohAbLarL2m+RNwMBVy7fWCnPo73A@mail.gmail.com>
	<CAGU4z-pJ8DqMrRhF0naMP4XrC61xUX3C3ck+Pv057M_zm1GYEw@mail.gmail.com>
	<CAMKgpObN-jHdR=T8sV6Oc-gQiDbXk_ms0WF_WS-QWxSdBXG-dw@mail.gmail.com>
	<CAGU4z-r0eWNg0hWnGXRdpFkV5BfRx0JjechuGyGr1b3hvW712Q@mail.gmail.com>
Message-ID: <1325883426.30920.39.camel@octopi>

Aneesh

i believe the only driver that supports layer andf dataset style tables
is the libkml driver

Brian


On Thu, 2012-01-05 at 18:06 +0530, Aneesh Muralidharan wrote:
> Chaithanya,
> 
> Ahhh that explains it ! Thanks a lot. By the way where do I find out
> these information (like DXF driver doesn't support style table), as in
> where is it documented ?
> 
> And can you suggest me some other vector format that OGR loads by
> default, which has style information ? I was using SHP till now, but
> then it doesn't have the style information at all right. Also it will
> be great if you can point me to some place where I can find some free
> samples as well.
> 
> On Thu, Jan 5, 2012 at 5:51 PM, Chaitanya kumar CH
> <chaitanya.ch@gmail.com> wrote:
>         Aneesh,
>         
>         I don't know if the DXF format maintains a default style or a
>         style table but OGR's DXF driver doesn't support layer's style
>         table.
>         
>         
>         On Thu, Jan 5, 2012 at 5:30 PM, Aneesh Muralidharan
>         <symonando@gmail.com> wrote:
>                 Hi Chaithanya,
>                 
>                 Thanks for the quick reply
>                 
>                 About the style table, I did try to use the layer
>                 style table, but I'm getting an empty table :(
>                 
>                 By the way I'm trying to read a simple DXF file. 
>                 
>                 On Thu, Jan 5, 2012 at 4:57 PM, Chaitanya kumar CH
>                 <chaitanya.ch@gmail.com> wrote:
>                         A layer's style table can be accessed using
>                         OGRLayer::GetStyleTable() [1].
>                         
>                         [1]:
>                         http://www.gdal.org/ogr/classOGRLayer.html
>                         
>                         
>                         On Thu, Jan 5, 2012 at 4:55 PM, Chaitanya
>                         kumar CH <chaitanya.ch@gmail.com> wrote:
>                                 Aneesh,
>                                 
>                                 A layer can have a style table that
>                                 stores a set of styles that can be
>                                 referred by individual features.
>                                 Usually the style table has a default
>                                 style.
>                                 
>                                 Its usage is explained in the same
>                                 page as the OGR Feature Style
>                                 Specification.
>                                 
>                                 On Thu, Jan 5, 2012 at 3:45 PM, Aneesh
>                                 Muralidharan <symonando@gmail.com>
>                                 wrote:
>                                 
>                                         Hi,
>                                         
>                                         I'm new to OGR/GDAL and I'm
>                                         trying to read style
>                                         information of vectors using
>                                         the OGR C++ API. I followed
>                                         the documentation available
>                                         here
>                                         http://www.gdal.org/ogr/ogr_feature_style.html. I have managed to get the pen information of the glyphs' in vector file successfully.
>                                         
>                                         The problem is that, it is
>                                         unclear that from where can I
>                                         figure out the layer style
>                                         specification. i.e the global
>                                         style for the layer ( assuming
>                                         each glyph's pen can be either
>                                         one of its own or dependent on
>                                         the layer ). The
>                                         OGRFeatureDefn for the
>                                         OGRLayer doesn't seem to have
>                                         this information.
>                                         
>                                         Also is there any detailed
>                                         explanation of the API
>                                         somewhere with some sample
>                                         code snippets ? (for the
>                                         feature-style api. For
>                                         read/write I know there is
>                                         http://www.gdal.org/ogr/ogr_apitut.html)
>                                         
>                                         Hoping for a quick response
>                                         
>                                         Thanks and regards,
>                                         Aneesh Muralidharan
>                                         
>                                         
>                                         _______________________________________________
>                                         gdal-dev mailing list
>                                         gdal-dev@lists.osgeo.org
>                                         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>                                 
>                                 
>                                 
>                                 -- 
>                                 Best regards,
>                                 Chaitanya kumar CH.
>                                 
>                                 +91-9494447584
>                                 17.2416N 80.1426E
>                         
>                         
>                         
>                         -- 
>                         Best regards,
>                         Chaitanya kumar CH.
>                         
>                         +91-9494447584
>                         17.2416N 80.1426E
>                         
>                 
>                 
>         
>         
>         
>         -- 
>         Best regards,
>         Chaitanya kumar CH.
>         
>         +91-9494447584
>         17.2416N 80.1426E
>         
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From mjollnir.ray at gmail.com  Sat Jan  7 05:00:43 2012
From: mjollnir.ray at gmail.com (=?UTF-8?B?5ZC056OK?=)
Date: Sat Jan  7 05:01:34 2012
Subject: [gdal-dev] Can MEM-dataset be serialized as binary stream?
Message-ID: <CAABFZ=ZwayBbtOZ30Rbs6jynqj581ignVZ3ps7UGq2DYRkkwKw@mail.gmail.com>

Hi, guys,

I want to transfer some small datasets among compute nodes in a
distribute system. Actually, they are not necessary to be persistence,
they are only existed in memory.
Is there any approach I can use to serialize GDALDataset. MEM-dataset
seems to be only used in local node, am I right?

Thanks and regards,
From thlin.box at gmail.com  Sat Jan  7 08:18:12 2012
From: thlin.box at gmail.com (easyl)
Date: Sat Jan  7 08:18:15 2012
Subject: [gdal-dev] Re: GDAL Java Binding meomory problem under intensive
	method calls
In-Reply-To: <1325852860.4f06e8bcad64f@imp.free.fr>
References: <1325780863590-7155011.post@n2.nabble.com>
	<1325783195.4f05d89b739f3@imp.free.fr>
	<1325843137612-7157803.post@n2.nabble.com>
	<1325845854.4f06cd5e6f5b2@imp.free.fr>
	<1325847231252-7157990.post@n2.nabble.com>
	<1325852860.4f06e8bcad64f@imp.free.fr>
Message-ID: <1325942292369-7161592.post@n2.nabble.com>

Ja, I am re-writing now the ogrtindex.cpp from
http://svn.osgeo.org/gdal/trunk/gdal/apps/ogrtindex.cpp in Java.

It seems be rather easier than ogr2ogr or ogrinfo.

I found a Clone call in cpp code

   poFeatureDefn = poLayer->GetLayerDefn()->Clone();

But in Java binding (1.8.1) there is no Clone() for LayerDefn!
I don't think that would be a good idea that I in java code just ignore
Clone() call.
Maybe I need to keep the 'poLayer' not deleted? so that 'poFeatureDefn' can
still have reference on the LayerDefn.

Another question is, where can I check in my Java code for ogrtindex to
share with everyone.





--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-Java-Binding-meomory-problem-under-intensive-method-calls-tp7155011p7161592.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sat Jan  7 08:50:58 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan  7 08:49:42 2012
Subject: [gdal-dev] Re: GDAL Java Binding meomory problem under intensive
	method calls
In-Reply-To: <1325942292369-7161592.post@n2.nabble.com>
References: <1325780863590-7155011.post@n2.nabble.com>
	<1325852860.4f06e8bcad64f@imp.free.fr>
	<1325942292369-7161592.post@n2.nabble.com>
Message-ID: <201201071450.58669.even.rouault@mines-paris.org>

Le samedi 07 janvier 2012 14:18:12, easyl a ?crit :
> Ja, I am re-writing now the ogrtindex.cpp from
> http://svn.osgeo.org/gdal/trunk/gdal/apps/ogrtindex.cpp in Java.
> 
> It seems be rather easier than ogr2ogr or ogrinfo.
> 
> I found a Clone call in cpp code
> 
>    poFeatureDefn = poLayer->GetLayerDefn()->Clone();
> 
> But in Java binding (1.8.1) there is no Clone() for LayerDefn!
> I don't think that would be a good idea that I in java code just ignore
> Clone() call.
> Maybe I need to keep the 'poLayer' not deleted? so that 'poFeatureDefn' can
> still have reference on the LayerDefn.

You should be able to implement the one at line 294 that way :

FeatureDefn poSrcFeatureDefn = poLayer.GetLayerDefn();
poFeatureDefn = new FeatureDefn(poSrcFeatureDefn.GetName());
for(int i = 0; i < poSrcFeatureDefn.GetFieldCount(); i++)
	poFeatureDefn.AddFieldDefn(poSrcFeatureDefn.GetFieldDefn(i));

And I believe that the one at line 423 isn't used at all afterwards. So just 
emptying this line should work.

More generally, with the OGR Java bindings, avoid using the delete() methods, 
except on the datasource objects, where it is necessary to close properly the 
native file handles. The other type of objects should be garbage collected 
properly.

> 
> Another question is, where can I check in my Java code for ogrtindex to
> share with everyone.

You can file a ticket in http://trac.osgeo.org/gdal/newticket (you need to 
create a OSGeo id first if not already done) and attach your new file in it.
From giohappy at gmail.com  Sat Jan  7 13:53:14 2012
From: giohappy at gmail.com (G. Allegri)
Date: Sat Jan  7 13:53:21 2012
Subject: [gdal-dev] problems with gdal2tiles and querysize when tiling a
	raster
Message-ID: <CAB4g1=wjwy8oBmKJOPg_GJ2GNgo8u7EcAtvgQPgxsKW-rsM5cA@mail.gmail.com>

I'm trying to use gdal2tiles to tile a not-georeferenced image (an old map).
The image is a 5816x3961 color jpeg.

Running the following command:
> gdal2tiles -p raster -z "0-3" myimage.jpg myimage_tiles
I obtain 256x256 tile images but the content is wrongly rescaled.

I noticed that the problem happens in the code between lines 1276-127
http://trac.osgeo.org/gdal/browser/tags/1.8.1/gdal/swig/python/scripts/gdal2tiles.py#L1276
where the rescaled is applied based on self.querysize, which by default is
4 times the tile size.

If I change those lines to: (i.e. write the data directly to dstile rather
then dsquery, and commenting the call to the rescaling method)

-----------
dstile.WriteRaster(wx, wy, wxsize, wysize, data,
band_list=list(range(1,self.dataBandsCount+1)))
dstile.WriteRaster(wx, wy, wxsize, wysize, alpha, band_list=[tilebands])

#self.scale_query_to_tile(dsquery, dstile, tilefilename)
------------

everything works perfectly, and I obtain the correct tiles.
I don't know if querysize should me managed differently, or if I'm using
gdal2tiles the wrong way...

giovanni
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120107/17965a3f/attachment.html
From even.rouault at mines-paris.org  Sat Jan  7 20:15:36 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan  7 20:14:58 2012
Subject: [gdal-dev] Unable to link gdal : CPLCreateOrAcquireMutex
	reference not found
In-Reply-To: <CAKF0tmR+d1KWpxrqEc7kwW+Ly2CbUScjOf7kdHxsOkyomcjXGQ@mail.gmail.com>
References: <CAKF0tmR+d1KWpxrqEc7kwW+Ly2CbUScjOf7kdHxsOkyomcjXGQ@mail.gmail.com>
Message-ID: <201201080215.37125.even.rouault@mines-paris.org>

Le jeudi 08 d?cembre 2011 10:57:38, Alexandre Herbreteau a ?crit :
> Hi,
> 
> I've downloaded the latest GDAL source code by i'm unable to produce a
> library. It is due to a link error : "undefined reference to
> `CPLCreateOrAcquireMutex"
> 
> I'm using Mingw with gcc 4.5.2. Here is what I do :
> 
> Unzip, go to Gdal root directory, and run configure:
> - This generate a file cpl_config.h (under "port" directory) with this
> option :
> #define CPL_MULTIPROC_PTHREAD 1
> 
 
> It is quite strange that nobody already reported this problem, because
> compiling GDAL with CPL_MULTIPROC_PTHREAD support and under WIN32 is
> something really usual !!!!
> 
> What is wrong, please, with my way of doing ?

See http://trac.osgeo.org/gdal/ticket/4430 for a fix.

> 
> Thanks a lot for your answer.
> 
> Alexandre.
From even.rouault at mines-paris.org  Sun Jan  8 13:14:34 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jan  8 13:13:34 2012
Subject: [gdal-dev] Can MEM-dataset be serialized as binary stream?
In-Reply-To: <CAABFZ=ZwayBbtOZ30Rbs6jynqj581ignVZ3ps7UGq2DYRkkwKw@mail.gmail.com>
References: <CAABFZ=ZwayBbtOZ30Rbs6jynqj581ignVZ3ps7UGq2DYRkkwKw@mail.gmail.com>
Message-ID: <201201081914.34344.even.rouault@mines-paris.org>

Le samedi 07 janvier 2012 11:00:43, ?? a ?crit :
> Hi, guys,
> 
> I want to transfer some small datasets among compute nodes in a
> distribute system. Actually, they are not necessary to be persistence,
> they are only existed in memory.
> Is there any approach I can use to serialize GDALDataset. MEM-dataset
> seems to be only used in local node, am I right?

You can for example CreateCopy to a /vsimem/a_geotiff.tif and then get the 
buffer with VSIGetMemFileBuffer() ( 
http://gdal.org/cpl__vsi_8h.html#eaf26bcc4a5314371f426bb2a5e6ce7a )

> 
> Thanks and regards,
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jluis at ualg.pt  Sun Jan  8 15:44:58 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Jan  8 15:45:42 2012
Subject: [gdal-dev] How to build python bindings on windows?
Message-ID: <4F0A004A.9070804@ualg.pt>

Hi,

I made my first attempt to build the python bindings on Windows  and 
like others have complained before ... nothing happened
I did set PYDIR  and  PY_INST_DIR but at the end no errors nor anything 
else python related.
Next I went to swig\python and did
python.exe setup.py build
which resulted in

...
copying osgeo\osr.py -> build\lib.win32-2.6\osgeo
copying osgeo\__init__.py -> build\lib.win32-2.6\osgeo
running build_ext
building 'osgeo._gdal' extension
error: Unable to find vcvarsall.bat

why the hell is it looking for vcvarsall.bat (the VS batch that sets 
necessary env variables)? And who is doing that? I grepped for vcvarsall 
and nothing showed up.

Thanks

Joaquim
From even.rouault at mines-paris.org  Sun Jan  8 16:03:26 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jan  8 16:02:26 2012
Subject: [gdal-dev] How to build python bindings on windows?
In-Reply-To: <4F0A004A.9070804@ualg.pt>
References: <4F0A004A.9070804@ualg.pt>
Message-ID: <201201082203.26724.even.rouault@mines-paris.org>

Le dimanche 08 janvier 2012 21:44:58, Joaquim Luis a ?crit :
> Hi,
> 
> I made my first attempt to build the python bindings on Windows  and
> like others have complained before ... nothing happened
> I did set PYDIR  and  PY_INST_DIR but at the end no errors nor anything
> else python related.
> Next I went to swig\python and did
> python.exe setup.py build
> which resulted in
> 
> ...
> copying osgeo\osr.py -> build\lib.win32-2.6\osgeo
> copying osgeo\__init__.py -> build\lib.win32-2.6\osgeo
> running build_ext
> building 'osgeo._gdal' extension
> error: Unable to find vcvarsall.bat
> 
> why the hell is it looking for vcvarsall.bat (the VS batch that sets
> necessary env variables)? And who is doing that? I grepped for vcvarsall
> and nothing showed up.

Generally, to build Python extensions on Widnows, you need to use the same 
version of MSVC that was used to compile your Python binary. For python 2.6, I 
believe that the provided binaries are compiled with MSVC 2008 for example. 
See http://bugs.python.org/issue5235

If you have not that version, then you can probably hack distutils script to 
convince them to use whatever version of MSVC you have. Or you can rebuild 
python with the msvc version you have.

I'm not sure what Tamas did with its SDKs ( http://vbkto.dyndns.org/sdk/ : 
seems to be down just now ) where he manages to provide the Python bindings on 
various MSVC versions.

> 
> Thanks
> 
> Joaquim
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jluis at ualg.pt  Sun Jan  8 17:06:28 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun Jan  8 17:07:36 2012
Subject: [gdal-dev] How to build python bindings on windows?
In-Reply-To: <201201082203.26724.even.rouault@mines-paris.org>
References: <4F0A004A.9070804@ualg.pt>
	<201201082203.26724.even.rouault@mines-paris.org>
Message-ID: <4F0A1364.6070609@ualg.pt>


> Generally, to build Python extensions on Widnows, you need to use the same
> version of MSVC that was used to compile your Python binary. For python 2.6, I
> believe that the provided binaries are compiled with MSVC 2008 for example.
> See http://bugs.python.org/issue5235
>
> If you have not that version, then you can probably hack distutils script to
> convince them to use whatever version of MSVC you have. Or you can rebuild
> python with the msvc version you have.

Yes, I had read about that versions issue, but I was expecting some 
error to guide me. As is, it's very annoying because the build request 
is completely ignored. No errors, no warnings. Just nothing.
I tried now with setting those 2 environmental variables as suggested on 
the bug report, that is

set DISTUTILS_USE_SDK=1
set MSSdk=1

and now the direct call to "setup.py build" goes a bit further, but not 
that much

C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\mt.exe -nologo 
-manifest 
build\temp.win32-2.6\Release\extensions\_gdalconst.pyd.manifest 
-outputresource:build\lib.win32-2.6\osgeo\_gdalconst.pyd;2

build\temp.win32-2.6\Release\extensions\_gdalconst.pyd.manifest : 
general error c1010070: Failed to load and parse the manifest. The 
system cannot find the file specified.
error: command 'mt.exe' failed with exit status 31

manifests again. That's why I hate     2005 <= VS <= 2009

> I'm not sure what Tamas did with its SDKs ( http://vbkto.dyndns.org/sdk/ :
> seems to be down just now ) where he manages to provide the Python bindings on
> various MSVC versions.

I have one here based on gdal18dev that was build with VS10 and depends 
on python2.6

From jukka.rahkonen at mmmtike.fi  Mon Jan  9 05:12:51 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Jan  9 05:13:41 2012
Subject: [gdal-dev] Re: Ogr2ogr, WFS 1.1.0,  -spat and gml:Box
References: <loom.20120102T162738-520@post.gmane.org>
	<201201022018.43010.even.rouault@mines-paris.org>
Message-ID: <loom.20120109T095852-537@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> > So it is WFS 1.1.0 request with the BBOX filter. But is it OK to give BBOX
> > as GML2 gml:Box if the service is WFS version 1.1.0? I have been thinking
> > it should be using GML3 and gml:Envelope instead.
> 
> I suppose you're right. I didn't recall all the details, so I had a look at 
> the code, and here's the answer :
> 
>     /* This is a heuristic to detect Deegree 3 servers, such as */
>     /* http://deegree3-demo.deegree.org:80/deegree-utah-demo/services */
>     /* that are very GML3 strict, and don't like <gml:Box> in a <Filter><BBOX> 
> */
>     /* request, but requires instead <gml:Envelope>, but some servers (such as 
> MapServer) */
>     /* don't like <gml:Envelope> so we are obliged to detect the kind of 
> server */
> 
> So basically it seems that most servers are tolerant and will accept gml:Box. 
> But some servers that should accept gml:Envelope don't. So the default 
> behaviour is to use gml:Box, except in cases where we know it won't be 
> accepted (but the server mentionned in the comment is no longer online, and I 
> cannot find another one that doesn't accept <gml:Box>)
> 
> It would perhaps be more reasonable to implement the reversed logic from a 
> theoretical point of view, but unless you can point me to a server that 
> doesn't like the current logic, I'm quite hesitant to change that 

Hi,

The deegree3 demos can be found here http://demo.deegree.org/ and the Utah demo
seems to be at http://deegree3-demo.deegree.org:80/utah-workspace/services
I had a quick test and it did not complain about using <gml:Box> in <Filter>.
The result looks like correct, too.  So perhaps we can conclude that using
<gml:Box> with WFS 1.1.0 filters is probably wrong but because it works then it
will not be fixed.

I do not really like this ambiguous behaviour, though. Now for example WFS 1.1.0
bounding box guery with GDAL and EPSG:4236 leads to a mixture of using GML2
<gml:Box> that does not exist in GML3 but with a GML3 style Northing-Easting
coordinate order. However, normal GDAL user does not ever see it without
sniffing the web traffic and there is really nothing new with WFS being ambiguos
so perhaps I just need to take everything that is added to the stew and try to
remember all the tricks and pecularities while waiting for some comfortable
vector delivery service to appear.

-Jukka Rahkonen-

-Jukka Rahkonen-

From even.rouault at mines-paris.org  Mon Jan  9 05:30:37 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  9 05:31:27 2012
Subject: [gdal-dev] Re: Ogr2ogr, WFS 1.1.0,  -spat and gml:Box
In-Reply-To: <loom.20120109T095852-537@post.gmane.org>
References: <loom.20120102T162738-520@post.gmane.org>
	<201201022018.43010.even.rouault@mines-paris.org>
	<loom.20120109T095852-537@post.gmane.org>
Message-ID: <1326105037.4f0ac1cde9c8f@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:

> Even Rouault <even.rouault <at> mines-paris.org> writes:
>
>
> > > So it is WFS 1.1.0 request with the BBOX filter. But is it OK to give
> BBOX
> > > as GML2 gml:Box if the service is WFS version 1.1.0? I have been thinking
> > > it should be using GML3 and gml:Envelope instead.
> >
> > I suppose you're right. I didn't recall all the details, so I had a look at
> > the code, and here's the answer :
> >
> >     /* This is a heuristic to detect Deegree 3 servers, such as */
> >     /* http://deegree3-demo.deegree.org:80/deegree-utah-demo/services */
> >     /* that are very GML3 strict, and don't like <gml:Box> in a
> <Filter><BBOX>
> > */
> >     /* request, but requires instead <gml:Envelope>, but some servers (such
> as
> > MapServer) */
> >     /* don't like <gml:Envelope> so we are obliged to detect the kind of
> > server */
> >
> > So basically it seems that most servers are tolerant and will accept
> gml:Box.
> > But some servers that should accept gml:Envelope don't. So the default
> > behaviour is to use gml:Box, except in cases where we know it won't be
> > accepted (but the server mentionned in the comment is no longer online, and
> I
> > cannot find another one that doesn't accept <gml:Box>)
> >
> > It would perhaps be more reasonable to implement the reversed logic from a
> > theoretical point of view, but unless you can point me to a server that
> > doesn't like the current logic, I'm quite hesitant to change that
>
> Hi,
>
> The deegree3 demos can be found here http://demo.deegree.org/ and the Utah
> demo
> seems to be at http://deegree3-demo.deegree.org:80/utah-workspace/services
> I had a quick test and it did not complain about using <gml:Box> in <Filter>.
> The result looks like correct, too.  So perhaps we can conclude that using
> <gml:Box> with WFS 1.1.0 filters is probably wrong but because it works then
> it
> will not be fixed.
>
> I do not really like this ambiguous behaviour, though. Now for example WFS
> 1.1.0
> bounding box guery with GDAL and EPSG:4236 leads to a mixture of using GML2
> <gml:Box> that does not exist in GML3 but with a GML3 style Northing-Easting
> coordinate order. However, normal GDAL user does not ever see it without
> sniffing the web traffic and there is really nothing new with WFS being
> ambiguos
> so perhaps I just need to take everything that is added to the stew and try
> to
> remember all the tricks and pecularities while waiting for some comfortable
> vector delivery service to appear.

Jukka,

I'm just curious : is there an reason for you to look at what exact requests the
OGR WFS driver sends to the server ? Does it cause practical problems with a
server I would not have tested against ? If so, that might be worth
reconsidering the implementation and make gml:Envelope the default for WFS 1.1
(and in case of a buggy server fallback to gml:Box if needed. I should have
noted which server didn't like gml:Envelope ...), instead of the current logic
which is the reverse.

Best regards,

Even
From brfr at metrico.lu  Mon Jan  9 05:35:31 2012
From: brfr at metrico.lu (Frank Broniewski)
Date: Mon Jan  9 05:35:38 2012
Subject: [gdal-dev] Compiling fails on Debian
Message-ID: <4F0AC2F3.30200@metrico.lu>

Hi,

I try to compile gdal 1.9.0RC2 on my Debian machine

brfr@devel:~/gdal$ uname -ra
Linux devel 2.6.32-5-amd64 #1 SMP Mon Oct 3 03:59:20 UTC 2011 x86_64 
GNU/Linux

but make exits with an error 2. The last messages before exiting:
/usr/bin/ld: 
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(functexcept.o): 
relocation R_X86_64_32 against `std::bad_typeid::~bad_typeid()' can not 
be used when making a shared object; recompile with -fPIC
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a: could not read symbols: 
Bad value
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Fehler 1
make[1]: Leaving directory `/home/brfr/gdal/gdal-1.9.0'
make: *** [check-lib] Fehler 2

I tried already with the fPIC flag
brfr@devel:~/gdal$ export CXXFLAGS="-fPIC"
brfr@devel:~/gdal$ ./configure --with-python --with-geos=yes --enable-debug
brfr@devel:~/gdal$ make
but without success


Any hints?

Frank



-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From jukka.rahkonen at mmmtike.fi  Mon Jan  9 05:38:01 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Jan  9 05:38:22 2012
Subject: [gdal-dev] Are these WFS issues worth filing tickets?
Message-ID: <loom.20120109T112948-231@post.gmane.org>

Hi,

Should I file tickets about these findings:

- It seems to be difficult to send valid attribute queries with GDAL WFS driver
from Windows computers if attribute values contain non-ASCII characters.

- Doing "ogrinfo -al -so" for getting basic information about a WFS server is
sending getFeature requests for all the feature types in the whole service. It
means that ogrinfo is trying to fetch just evything from the server. It may
cause some troubles if WFS server is holding lots of data.

-Jukka Rahkonen-

From chaitanya.ch at gmail.com  Mon Jan  9 06:12:10 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jan  9 06:12:33 2012
Subject: [gdal-dev] Are these WFS issues worth filing tickets?
In-Reply-To: <loom.20120109T112948-231@post.gmane.org>
References: <loom.20120109T112948-231@post.gmane.org>
Message-ID: <CAMKgpOZBqFBwrgvMRkh-xSt3XTb_Jesp+s3C05nFOimAxjD+Sg@mail.gmail.com>

The problem with non-ascii characters looks serious. A ticket on it will
help.

WFS standard doesn't include getting a summary of features. OGR has to get
all the features to build the summary. I think it comes under the WPS
standard.

On Mon, Jan 9, 2012 at 4:08 PM, Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>wrote:

> Hi,
>
> Should I file tickets about these findings:
>
> - It seems to be difficult to send valid attribute queries with GDAL WFS
> driver
> from Windows computers if attribute values contain non-ASCII characters.
>
> - Doing "ogrinfo -al -so" for getting basic information about a WFS server
> is
> sending getFeature requests for all the feature types in the whole
> service. It
> means that ogrinfo is trying to fetch just evything from the server. It may
> cause some troubles if WFS server is holding lots of data.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120109/706b2599/attachment-0001.html
From even.rouault at mines-paris.org  Mon Jan  9 07:27:32 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  9 07:28:03 2012
Subject: [gdal-dev] Are these WFS issues worth filing tickets?
In-Reply-To: <loom.20120109T112948-231@post.gmane.org>
References: <loom.20120109T112948-231@post.gmane.org>
Message-ID: <1326112052.4f0add3489563@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:

> Hi,
>
> Should I file tickets about these findings:
>
> - It seems to be difficult to send valid attribute queries with GDAL WFS
> driver
> from Windows computers if attribute values contain non-ASCII characters.

This is a more general issue than with the OGR WFS driver. This is common to all
command line utilities. Perhaps worth a ticket indeed.

>
> - Doing "ogrinfo -al -so" for getting basic information about a WFS server is
> sending getFeature requests for all the feature types in the whole service.
> It
> means that ogrinfo is trying to fetch just evything from the server. It may
> cause some troubles if WFS server is holding lots of data.

You can mitigate that by adding MAXFEATURES=xxx . For example :

ogrinfo -al -so "WFS:http://myserver.com/service/wfs?MAXFEATURES=xxx". The
MAXFEATURES parameter will be passed to GetFeature requests. This is somehow
documented in the "Dataset name syntax" of http://gdal.org/ogr/drv_wfs.html :

"""
The minimal syntax to open a WFS datasource is : WFS:http://path/to/WFS/service
or http://path/to/WFS/service?SERVICE=WFS

Additionnal optional parameters can be specified such as TYPENAME, VERSION,
MAXFEATURES as specified in WFS specification.
"""

>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Mon Jan  9 07:44:22 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  9 07:44:54 2012
Subject: [gdal-dev] Compiling fails on Debian
In-Reply-To: <4F0AC2F3.30200@metrico.lu>
References: <4F0AC2F3.30200@metrico.lu>
Message-ID: <1326113062.4f0ae126e26d9@imp.free.fr>

Frank,

This looks like if the linking of the GDAL shared library was using the static
version of libstdc++ (the message "recompile with -fPIC" is for libstdc++, not
GDAL...) . A bit of googling shows that this error has been encountered with
various software packages.

Several tracks :

1) https://bugs.archlinux.org/task/14268 suggest to check that there is no
/usr/lib/libstdc++.la around. If there's one, rename it, and try again.

2) Other links would suggest that
/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a library was incorrectly built,
and not appropriate for being used by shared libraries.

3) http://code.google.com/p/staff/issues/detail?id=150 is also interesting :

"""
> Very strange, but why g++ tries to link libstdc++ staticaly?

That was the key question.
With the help of strace (my favorite tool) I figured out that g++ fell back to
the static lib (/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a) after getting
an error when trying to access the shared lib
(/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.so). The shared lib was a broken
symlink. The link apparently broke when I upgraded libstdc++6 to 4.6.1-4 without
upgrading libstdc++6-4.4-dev at the same time.
Sorry to have bothered you with this...
"""

So perhaps start by upgrading your libstdc++6-4.4-dev package ?

4) If none of the above works and it is libtool related as the above would
suggest, perhaps you could also try adding --without-libtool to your GDAL
./configure command line. The experience shows that it sometimes helps, but I'm
not positive it will be the case here.

> Hi,
>
> I try to compile gdal 1.9.0RC2 on my Debian machine
>
> brfr@devel:~/gdal$ uname -ra
> Linux devel 2.6.32-5-amd64 #1 SMP Mon Oct 3 03:59:20 UTC 2011 x86_64
> GNU/Linux
>
> but make exits with an error 2. The last messages before exiting:
> /usr/bin/ld:
> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(functexcept.o):
> relocation R_X86_64_32 against `std::bad_typeid::~bad_typeid()' can not
> be used when making a shared object; recompile with -fPIC
> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a: could not read symbols:
> Bad value
> collect2: ld returned 1 exit status
> make[1]: *** [libgdal.la] Fehler 1
> make[1]: Leaving directory `/home/brfr/gdal/gdal-1.9.0'
> make: *** [check-lib] Fehler 2
>
> I tried already with the fPIC flag
> brfr@devel:~/gdal$ export CXXFLAGS="-fPIC"
> brfr@devel:~/gdal$ ./configure --with-python --with-geos=yes --enable-debug
> brfr@devel:~/gdal$ make
> but without success
>
>
> Any hints?
>
> Frank
>
>
>
> --
> Frank BRONIEWSKI
>
> METRICO s.?? r.l.
> g??om??tres
> technologies d'information g??ographique
> rue des Romains 36
> L-5433 NIEDERDONVEN
>
> t??l.: +352 26 74 94 - 28
> fax.: +352 26 74 94 99
> http://www.metrico.lu
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From pepijn at vaneeckhoudt.net  Mon Jan  9 08:24:42 2012
From: pepijn at vaneeckhoudt.net (Pepijn Van Eeckhoudt)
Date: Mon Jan  9 08:46:31 2012
Subject: [gdal-dev] Mismatched output from listgeo/gdalwarp/cs2cs
Message-ID: <4F0AEA9A.6040302@vaneeckhoudt.net>

Hi,

My issue is related to gdal, libgeotiff and proj.4, but the problem 
appeared with gdalwarp so I'm posting here. I'm seeing different output 
from the various tools that I can't really make sense of and I was 
hoping someone here could clarify the meaning of the various output values.

I received a geotiff file from one of my clients that essentially has 
all it's referencing metadata set to 'User-Defined'. Listgeo -proj4 
prints out:

+proj=tmerc +lat_0=0.000000000 +lon_0=15.000000000 +k=0.999900 +x_0=500000.000 +y_0=-5000000.000 +a=6377397.155 +b=6356078.963 +units=m

I've double checked the geotiff data manually and this is indeed the 
information that is in the file. Transverse mercator projection with 
respect to the Bessel 1841 ellipsoid in other words. My client 
reprojected the geotiff to WGS84 using the following gdalwarp input

./gdalwarp.exe -t_srs '+proj=tmerc +lat_0=0 +lon_0=15 +datum=WGS84'

He then loaded both geotiffs in our GIS tool (not based on osgeo 
libraries) and noticed a substantial horizontal shift between the two 
variants of the file. I'm now trying to figure out what is going wrong. 
I listed what I've been able to find out so far below.

Listgeo prints out the following information for the upper left corner 
point:

Upper Left    (  439702.628,   71450.647)  ( 14d13'27.94"E, 45d47' 5.72"N)

If I then take the same projected coordinate and input those into cs2cs 
I get different lon lat values.

cs2cs +proj=tmerc +lat_0=0.000000000 +lon_0=15.000000000 +k=0.999900 +x_0=500000.000 +y_0=-5000000.000 +a=6377397.155 +b=6356078.963 +units=m
14d13'59.5"E    45d8'31.057"N 0.000, 71450.647

Shouldn't I be getting the same values here? If not, then what are the 
two tools actually showing me; it's not clear to me with respect to 
which datum the lon/lat coordinates are defined?

I then tried to get cs2cs to produce WGS84 lat/lon coordinates, but 
oddly enough that produced the same output as the previous command.

cs2cs +proj=tmerc +lat_0=0.000000000 +lon_0=15.000000000 +k=0.999900 +x_0=500000.000 +y_0=-5000000.000 +a=6377397.155 +b=6356078.963 +units=m +to +proj=latlon +datum=WGS84 coords.txt
14d13'59.5"E    45d8'31.057"N 0.000, 71450.647

I was able to get different output by adding an explicit +towgs84 
parameter for the input CRS

cs2cs +proj=tmerc +lat_0=0.000000000 +lon_0=15.000000000 +k=0.999900 +x_0=500000.000 +y_0=-5000000.000 +a=6377397.155 +b=6356078.963 +units=m +towgs84=0,0,0 +to +proj=latlon +datum=WGS84 coords.txt
14d13'59.5"E    45d8'33.211"N -706.488, 71450.647

This leads me to conclude that without an +datum reference or a +towgs84 
parameter value proj (and possibly gdalwarp) no longer performs any 
datum transformation whatsoever. In other words it is not converting 
from one ellipsoid to the other via geocentric. Is that correct? If so, 
what is the rationale behind this choice? Our GIS toolkit takes a 
different approach and defaults to +towgs84=0,0,0 instead. My hunch is 
that this difference in default interpretation is the cause of the 
horizontal shift I'm seeing.

Thanks in advance for any help,

Pepijn Van Eeckhoudt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120109/d1ceef2e/attachment.html
From pascal.jaugeas.External at cassidian.com  Mon Jan  9 08:58:43 2012
From: pascal.jaugeas.External at cassidian.com (Jaugeas, Pascal (External))
Date: Mon Jan  9 08:59:14 2012
Subject: [gdal-dev] Open Grib File
In-Reply-To: <CAMKgpOb-tyyD6fU+xpazoeLpKEKE=DXwu+zGWTQ53b_GToKpVw@mail.gmail.com>
Message-ID: <744B6CB137A87345940338C50D3093A5011797F1@SMFIDF806B.main.fr.ds.corp>

OK thank you very much
 
and the last question : to have metadata, I use the function band.GetMetadata(	pszDomain).
 
But if i  write "" in parameter of the function,   the default metadatas is not complete. Do you have document that list 	pszDomain ?
 
Thank you for your help
 
Pascal

________________________________

De : Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com] 
Envoy? : vendredi 6 janvier 2012 14:53
? : Jaugeas, Pascal (External)
Cc : gdal-dev@lists.osgeo.org
Objet : Re: [gdal-dev] Open Grib File


Pascal,

The data is written into the buffer array. The function returns the CE_None or CE_None.


On Fri, Jan 6, 2012 at 7:11 PM, Jaugeas, Pascal (External) <pascal.jaugeas.External@cassidian.com> wrote:


	
	Hello,
	 
	another problem ....
	 
	I try to read data of a band of a grib File. I think , in C# dev, I must use ReadRaster function:
	 
	My code : 
	 
	for

	(int j = 1; j <= rows; j++) 

	{

	

	for (int k = 1; k <= cols; k++) 

	{

	byte[] buffer ={1,1};

	CPLErr err = band.ReadRaster(0, 0, cols, rows, buffer, cols, rows, 1, 1);

	double val = (double)band. ReadRaster(0, 0, cols, rows, buffer, cols, rows, 1, 1); 

	}

	}

	 
	But, val stay at 0  and err is none.
	 
	Do you have an idea ? buffer is important ?
	 
	Tank you again for any help
	 
	Best regards
	 
	Pascal
	 

________________________________

	De : gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] De la part de Chaitanya kumar CH
	Envoy? : jeudi 5 janvier 2012 17:25 

	? : Jaugeas, Pascal (External)
	Cc : gdal-dev@lists.osgeo.org
	Objet : Re: [gdal-dev] Open Grib File
	

	Pascal,
	
	Use the GDALMajorObject::GetMetaData() method[1].
	
	You might want to go through the GDAL API docs[2] a bit throughly.
	
	[1]: http://www.gdal.org/classGDALMajorObject.html
	[2]: http://www.gdal.org/hierarchy.html
	
	
	On Thu, Jan 5, 2012 at 7:40 PM, Jaugeas, Pascal (External) <pascal.jaugeas.External@cassidian.com> wrote:
	

		
		I have another problem.
		 
		After open grib file,  I have a DataSet.
		This dataset give the quantities of row, col and band.
		For each band, I want to know the heading.  In a band of a grib file, there are 3 rows for heading, not counting by the dataset.
		Do you know how I can do that ?
		 
		Thanks and regards,
		 

________________________________

		De : Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com] 
		Envoy? : jeudi 5 janvier 2012 13:00
		? : Jaugeas, Pascal (External)
		Cc : gdal-dev@lists.osgeo.org
		Objet : Re: [gdal-dev] Open Grib File
		
		
		Pascal,
		
		First check if your file works with the gdalinfo utility. Set the environment variable CPL_DEBUG to ON to get more detailed reports on events.
		
		Check if you get the same error with another grib file and another format file.
		
		
		
		On Thu, Jan 5, 2012 at 2:50 PM, Jaugeas, Pascal (External) <pascal.jaugeas.External@cassidian.com> wrote:
		

			
			Hello,
			 
			I develop with Gdal for .Net.
			And I try to read a grib File (ed 1) like this :  

			Dataset

			ds = Gdal.Open(dataSourcePath, Access.GA_Update);
			with dataSourcePath is the path of grib file (.grb).
			 
			But I have an error in debug : "... not recognised as a supported file format."
			 
			Is this method correct to have a dataset of a grib file ?
			 
			Thank you for your help,
			 
			Best Regards,
			 
			Pascal Jaugeas
			 
			 

			_______________________________________________
			gdal-dev mailing list
			gdal-dev@lists.osgeo.org
			http://lists.osgeo.org/mailman/listinfo/gdal-dev
			




		-- 
		Best regards,
		Chaitanya kumar CH.
		
		+91-9494447584 <tel:%2B91-9494447584> 
		17.2416N 80.1426E
		




	-- 
	Best regards,
	Chaitanya kumar CH.
	
	+91-9494447584 <tel:%2B91-9494447584> 
	17.2416N 80.1426E
	

	_______________________________________________
	gdal-dev mailing list
	gdal-dev@lists.osgeo.org
	http://lists.osgeo.org/mailman/listinfo/gdal-dev
	




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120109/2d4b6b6e/attachment-0001.html
From thlin.box at gmail.com  Mon Jan  9 09:23:11 2012
From: thlin.box at gmail.com (easyl)
Date: Mon Jan  9 09:23:56 2012
Subject: [gdal-dev] Re: GDAL Java Binding meomory problem under intensive
	method calls
In-Reply-To: <201201071450.58669.even.rouault@mines-paris.org>
References: <1325780863590-7155011.post@n2.nabble.com>
	<1325783195.4f05d89b739f3@imp.free.fr>
	<1325843137612-7157803.post@n2.nabble.com>
	<1325845854.4f06cd5e6f5b2@imp.free.fr>
	<1325847231252-7157990.post@n2.nabble.com>
	<1325852860.4f06e8bcad64f@imp.free.fr>
	<1325942292369-7161592.post@n2.nabble.com>
	<201201071450.58669.even.rouault@mines-paris.org>
Message-ID: <1326118991485-7168002.post@n2.nabble.com>

http://trac.osgeo.org/gdal/ticket/4431

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-Java-Binding-meomory-problem-under-intensive-method-calls-tp7155011p7168002.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Mon Jan  9 09:35:13 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jan  9 09:35:57 2012
Subject: [gdal-dev] Open Grib File
In-Reply-To: <744B6CB137A87345940338C50D3093A5011797F1@SMFIDF806B.main.fr.ds.corp>
References: <CAMKgpOb-tyyD6fU+xpazoeLpKEKE=DXwu+zGWTQ53b_GToKpVw@mail.gmail.com>
	<744B6CB137A87345940338C50D3093A5011797F1@SMFIDF806B.main.fr.ds.corp>
Message-ID: <CAMKgpOYz0E2annuNEO=pu-vCm=EBtZPKL61CKuuv1jHhUsbZ7A@mail.gmail.com>

Pascal,

Please note that metadata could be associated with either dataset or the
band. Make sure to check them both.

On Mon, Jan 9, 2012 at 7:28 PM, Jaugeas, Pascal (External) <
pascal.jaugeas.External@cassidian.com> wrote:

> **
> OK thank you very much
>
> and the last question : to have metadata, I use the function
> band.GetMetadata( *pszDomain).*
> **
> But if i  write "" in parameter of the function,   the default metadatas
> is not complete. Do you have document that list  *pszDomain ?*
> **
> Thank you for your help
>
> Pascal
>
>  ------------------------------
> *De :* Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
> *Envoy? :* vendredi 6 janvier 2012 14:53
>
> *? :* Jaugeas, Pascal (External)
> *Cc :* gdal-dev@lists.osgeo.org
> *Objet :* Re: [gdal-dev] Open Grib File
>
> Pascal,
>
> The data is written into the buffer array. The function returns the
> CE_None or CE_None.
>
> On Fri, Jan 6, 2012 at 7:11 PM, Jaugeas, Pascal (External) <
> pascal.jaugeas.External@cassidian.com> wrote:
>
>> **
>> Hello,
>>
>> another problem ....
>>
>> I try to read data of a band of a grib File. I think , in C# dev, I must
>> use ReadRaster function:
>>
>> My code :
>>
>>
>> for
>> (int j = 1; j <= rows; j++)
>>
>> {
>>
>> for (int k = 1; k <= cols; k++)
>>
>> {
>>
>> byte[] buffer ={1,1};
>>
>> CPLErr err = band.ReadRaster(0, 0, cols, rows, buffer, cols, rows, 1, 1);
>>
>> double val = (double)band. ReadRaster(0, 0, cols, rows, buffer, cols,
>> rows, 1, 1);
>>
>> }
>>
>> }
>>
>> But, val stay at 0  and err is none.
>>
>> Do you have an idea ? buffer is important ?
>>
>> Tank you again for any help
>>
>> Best regards
>>
>> Pascal
>>
>>
>>  ------------------------------
>> *De :* gdal-dev-bounces@lists.osgeo.org [mailto:
>> gdal-dev-bounces@lists.osgeo.org] *De la part de* Chaitanya kumar CH
>> *Envoy? :* jeudi 5 janvier 2012 17:25
>>
>> *? :* Jaugeas, Pascal (External)
>> *Cc :* gdal-dev@lists.osgeo.org
>> *Objet :* Re: [gdal-dev] Open Grib File
>>
>>  Pascal,
>>
>> Use the GDALMajorObject::GetMetaData() method[1].
>>
>> You might want to go through the GDAL API docs[2] a bit throughly.
>>
>> [1]: http://www.gdal.org/classGDALMajorObject.html
>> [2]: http://www.gdal.org/hierarchy.html
>>
>> On Thu, Jan 5, 2012 at 7:40 PM, Jaugeas, Pascal (External) <
>> pascal.jaugeas.External@cassidian.com> wrote:
>>
>>> **
>>> I have another problem.
>>>
>>> After open grib file,  I have a DataSet.
>>> This dataset give the quantities of row, col and band.
>>> For each band, I want to know the heading.  In a band of a grib file,
>>> there are 3 rows for heading, not counting by the dataset.
>>> Do you know how I can do that ?
>>>
>>> Thanks and regards,
>>>
>>>
>>>  ------------------------------
>>> *De :* Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
>>> *Envoy? :* jeudi 5 janvier 2012 13:00
>>> *? :* Jaugeas, Pascal (External)
>>> *Cc :* gdal-dev@lists.osgeo.org
>>> *Objet :* Re: [gdal-dev] Open Grib File
>>>
>>>  Pascal,
>>>
>>> First check if your file works with the gdalinfo utility. Set the
>>> environment variable CPL_DEBUG to ON to get more detailed reports on events.
>>>
>>> Check if you get the same error with another grib file and another
>>> format file.
>>>
>>>
>>> On Thu, Jan 5, 2012 at 2:50 PM, Jaugeas, Pascal (External) <
>>> pascal.jaugeas.External@cassidian.com> wrote:
>>>
>>>> **
>>>> Hello,
>>>>
>>>> I develop with Gdal for .Net.
>>>> And I try to read a grib File (ed 1) like this :
>>>>
>>>> Dataset
>>>> ds = Gdal.Open(dataSourcePath, Access.GA_Update);
>>>> with dataSourcePath is the path of grib file (.grb).
>>>>
>>>> But I have an error in debug : "... not recognised as a supported file
>>>> format."
>>>>
>>>> Is this method correct to have a dataset of a grib file ?
>>>>
>>>> Thank you for your help,
>>>>
>>>> Best Regards,
>>>>
>>>> Pascal Jaugeas
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120109/c7010c38/attachment.html
From even.rouault at mines-paris.org  Mon Jan  9 09:40:36 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  9 09:40:48 2012
Subject: [gdal-dev] Mismatched output from listgeo/gdalwarp/cs2cs
In-Reply-To: <4F0AEA9A.6040302@vaneeckhoudt.net>
References: <4F0AEA9A.6040302@vaneeckhoudt.net>
Message-ID: <1326120036.4f0afc64c3626@imp.free.fr>


> This leads me to conclude that without an +datum reference or a +towgs84
> parameter value proj (and possibly gdalwarp) no longer performs any
> datum transformation whatsoever. In other words it is not converting
> from one ellipsoid to the other via geocentric. Is that correct? If so,
> what is the rationale behind this choice? Our GIS toolkit takes a
> different approach and defaults to +towgs84=0,0,0 instead. My hunch is
> that this difference in default interpretation is the cause of the
> horizontal shift I'm seeing.

Yes exactly, this is the new intended behaviour of proj4. See the following
entry in the FAQ :
http://trac.osgeo.org/proj/wiki/FAQ#WhydoIgetdifferentresultswith4.5.0and4.6.0

>
> Thanks in advance for any help,
>
> Pepijn Van Eeckhoudt
>


From jrepetto at free.fr  Mon Jan  9 09:52:42 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Jan  9 09:53:29 2012
Subject: [gdal-dev] Mismatched output from listgeo/gdalwarp/cs2cs
In-Reply-To: <4F0AEA9A.6040302@vaneeckhoudt.net>
References: <4F0AEA9A.6040302@vaneeckhoudt.net>
Message-ID: <4F0AFF3A.5040601@free.fr>

Le 09/01/2012 14:24, Pepijn Van Eeckhoudt a ?crit :
>
> Our GIS toolkit takes a
> different approach and defaults to +towgs84=0,0,0 instead.

> Pepijn Van Eeckhoudt

Blindly adding "+towgs84=0,0,0" will unlikely give correct results. 
You'll have to provide the correct datum transformation parameters.

Jean-Claude
From Jukka.Rahkonen at mmmtike.fi  Mon Jan  9 09:58:10 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Mon Jan  9 09:58:29 2012
Subject: [gdal-dev] Re: Ogr2ogr, WFS 1.1.0,  -spat and gml:Box
In-Reply-To: <1326105037.4f0ac1cde9c8f@imp.free.fr>
References: <loom.20120102T162738-520@post.gmane.org>
	<201201022018.43010.even.rouault@mines-paris.org>
	<loom.20120109T095852-537@post.gmane.org>,
	<1326105037.4f0ac1cde9c8f@imp.free.fr>
Message-ID: <84446DEF76453C439E9E97E438E13A63061F9C@suutari.haapa.mmm.fi>

Even Rouault wrote:

Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:

> Jukka,

> I'm just curious : is there an reason for you to look at what exact requests the
> OGR WFS driver sends to the server ? Does it cause practical problems with a
> server I would not have tested against ? If so, that might be worth
> reconsidering the implementation and make gml:Envelope the default for WFS 1.1
> (and in case of a buggy server fallback to gml:Box if needed. I should have
> noted which server didn't like gml:Envelope ...), instead of the current logic
> which is the reverse.

I have been spending some time for investigating what is the WFS interoperability situation between main open source servers (Geoserver, deegree, TinyOWS and Mapserver) and a bunch of clients (QGis, gvSIG, Kosmo GIS, uDig, iGeoDesktop, OpenJUMP, Geoserver and Mapserver (cascading WFS) and now GDAL. And ArcGIS, Mapinfo, Carcorp SIS Map Browser and Gaia from the commercial side. This because I want to be able to tell our clients which combinations work and which not and why not.

Using gml:Box in Filter sent with http GET seems not to be a big practical problem, if any. However, it is a bit irritating that the same Filter that is accepted through GET does not work if it is sent through http POST to schema validating WFS servers. At least TinyOWS denies it and probably deegree and also Geoserver when it is run in a strich CITE test mode. It must be really irritating to develop WFS clients and especially if they are intented to work both with GET and POST and support WFS 1.0.0 and WFS 1.1.0 and give a good support for using both spatial and attribute filters.

-Jukka Rahkonen-
From Jukka.Rahkonen at mmmtike.fi  Mon Jan  9 10:36:35 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Mon Jan  9 10:37:20 2012
Subject: [gdal-dev] Are these WFS issues worth filing tickets?
In-Reply-To: <1326112052.4f0add3489563@imp.free.fr>
References: <loom.20120109T112948-231@post.gmane.org>,
	<1326112052.4f0add3489563@imp.free.fr>
Message-ID: <84446DEF76453C439E9E97E438E13A63061FCE@suutari.haapa.mmm.fi>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Selon Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi>:
> 
> > Hi,
> >
> > Should I file tickets about these findings:
> >
> > - It seems to be difficult to send valid attribute queries with GDAL WFS
> > driver
> > from Windows computers if attribute values contain non-ASCII characters.
> 
> This is a more general issue than with the OGR WFS driver. This is common to all
> command line utilities. Perhaps worth a ticket indeed.
> 
> >
> > - Doing "ogrinfo -al -so" for getting basic information about a WFS server is
> > sending getFeature requests for all the feature types in the whole service.
> > It
> > means that ogrinfo is trying to fetch just evything from the server. It may
> > cause some troubles if WFS server is holding lots of data.
> 
> You can mitigate that by adding MAXFEATURES=xxx . For example :
> 
> ogrinfo -al -so "WFS:http://myserver.com/service/wfs?MAXFEATURES=xxx". The
> MAXFEATURES parameter will be passed to GetFeature requests. This is somehow
> documented in the "Dataset name syntax" of http://gdal.org/ogr/drv_wfs.html :
> 
> """
> The minimal syntax to open a WFS datasource is : WFS:http://path/to/WFS/service
> or http://path/to/WFS/service?SERVICE=WFS
> 
> Additionnal optional parameters can be specified such as TYPENAME, VERSION,
> MAXFEATURES as specified in WFS specification.
> """

I am speaking as one who is running a WFS server. It does not make me 
happy that users can use MAXFEATURES if the default is that it is not used. I have
more than 50 featureTypes, several of them containing a few hundred thousand
features and the biggest one has 1.2 million polygons. I do not use maxFeatures
on the server side because a certain point layer with 800000 features is reasonable
for unrestricted getFeature. Still my tiny server is spending nearly 15 minutes for 
sending it out.
Doing "ogrinfo -al -so" for my server means reading approximately 500 megabytes
of data through the web and the ogrinfo result is still broken because some 
feature types get truncated due to timeout after 15 minutes.

I know that I must be ready to take this because I have decided to run an open WFS
service and anybody can make such requests it they wish. However, I am not sure 
if this should be the default behaviour of GDAL. I would rather see that folks should
be active before they hurt my service and other users with GDAL.

How about setting MAXFEATURES to, let's say, at maximum 5000 by default?
By comparison, GDAL WFS driver itself seems to use only 100 features as a 
default page size if PagingAllowed is selected.

For those who do not know, ogrinfo wants to read the whole feature type so 
it can calculate the exact bounds of the dataset.  Data are not stored and if user
selects to fetch the data for local use another getFeature must be fired.

-Jukka Rahkonen-
From a.leclerc at valabre.com  Mon Jan  9 10:38:51 2012
From: a.leclerc at valabre.com (Alexandre LECLERC)
Date: Mon Jan  9 10:38:53 2012
Subject: [gdal-dev] c# P/invoke error spatialRef
Message-ID: <004601cbb012$0883daf0$198b90d0$@leclerc@valabre.com>

Hello, 

I try to transform coordinates between 2 projections.

But when I pass this line : 

SpatialReference spaceRef1 = new SpatialReference("");

I get a P/Invoke exception...

I've downloaded  the FWtools 247

I've add to my project all the dll in the directory C:\ Program Files (x86)
\FWTools2.4.6\csharp

I add in the path C:\Program Files (x86)\FWTools\bin

 

Can you help me please ?

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120109/32b506d1/attachment.html
From pepijn at vaneeckhoudt.net  Mon Jan  9 10:52:29 2012
From: pepijn at vaneeckhoudt.net (Pepijn Van Eeckhoudt)
Date: Mon Jan  9 10:53:14 2012
Subject: [gdal-dev] Mismatched output from listgeo/gdalwarp/cs2cs
In-Reply-To: <4F0AFF3A.5040601@free.fr>
References: <4F0AEA9A.6040302@vaneeckhoudt.net> <4F0AFF3A.5040601@free.fr>
Message-ID: <4F0B0D3D.1020102@vaneeckhoudt.net>

On 09/01/2012 15:52, Jean-Claude Repetto wrote:
> Le 09/01/2012 14:24, Pepijn Van Eeckhoudt a ?crit :
>> different approach and defaults to +towgs84=0,0,0 instead.
> Blindly adding "+towgs84=0,0,0" will unlikely give correct results. 
> You'll have to provide the correct datum transformation parameters.
Thanks for the answers. You're absolutely right that this is highly 
unlikely to be correct. I inherited the code in question and I'm 
inclined this behavior now.

I can understand why the datum shift change 
<http://trac.osgeo.org/proj/wiki/FAQ#WhydoIgetdifferentresultswith4.5.0and4.6.0> 
was made; the old behavior was  basically the same as adding 
towgs84=0,0,0. It's rather surprising then though that gdalwarp (and 
cs2cs) don't complain in these cases. I would expect the tools to refuse 
this type of input since you're asking them to do transformations that 
they cannot perform correctly.

Pepijn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120109/036f5ae1/attachment.html
From a.neumann at carto.net  Mon Jan  9 11:06:07 2012
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon Jan  9 11:06:59 2012
Subject: [gdal-dev] Shifting raster image one meter
Message-ID: <dcd8d6da7fcc72af6675335262fd047f@carto.net>

 Hi,

 Due to some error that I cannot easily reproduce one orthoimage is one 
 meter offset. Luckily the shift is constant throughout the image.

 What is the easiest way to shift this image back one meter (east-west) 
 with gdal utilities? I browsed through the gdal_translate and gdal_warp 
 documentation but couldn't find an easy way to translate an image 
 without changing the projection.

 Should I edit the world file? The image is a geotiff, so it doesn't 
 have a worldfile.

 Thanks for any ideas.

 Andreas

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland
From jrepetto at free.fr  Mon Jan  9 11:23:17 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Jan  9 11:24:05 2012
Subject: [gdal-dev] Shifting raster image one meter
In-Reply-To: <dcd8d6da7fcc72af6675335262fd047f@carto.net>
References: <dcd8d6da7fcc72af6675335262fd047f@carto.net>
Message-ID: <4F0B1475.4030501@free.fr>

Le 09/01/2012 17:06, Andreas Neumann a ?crit :
>
> Should I edit the world file? The image is a geotiff, so it doesn't have
> a worldfile.
>
> Thanks for any ideas.
>
> Andreas
>

Hi,

You can use the new utility gdal_edit.py (in GDAL 1.9) to edit GeoTiff 
metadata.

Frank, Even : It would be useful to add this utility to the 
documentation page at http://www.gdal.org/gdal_utilities.html .

Jean-Claude

From a.neumann at carto.net  Mon Jan  9 11:51:51 2012
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon Jan  9 11:52:47 2012
Subject: [gdal-dev] Shifting raster image one meter
In-Reply-To: <4F0B1475.4030501@free.fr>
References: <dcd8d6da7fcc72af6675335262fd047f@carto.net>
	<4F0B1475.4030501@free.fr>
Message-ID: <eb79beb77442591161c0be983834b10b@carto.net>

 Thanks, Jean-Claude,

 I will give it a try tomorrow!

 Andreas

 On Mon, 09 Jan 2012 17:23:17 +0100, Jean-Claude Repetto wrote:
> Le 09/01/2012 17:06, Andreas Neumann a ?crit :
>>
>> Should I edit the world file? The image is a geotiff, so it doesn't 
>> have
>> a worldfile.
>>
>> Thanks for any ideas.
>>
>> Andreas
>>
>
> Hi,
>
> You can use the new utility gdal_edit.py (in GDAL 1.9) to edit
> GeoTiff metadata.
>
> Frank, Even : It would be useful to add this utility to the
> documentation page at http://www.gdal.org/gdal_utilities.html .
>
> Jean-Claude
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland
From even.rouault at mines-paris.org  Mon Jan  9 13:47:05 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  9 13:47:18 2012
Subject: [gdal-dev] Are these WFS issues worth filing tickets?
In-Reply-To: <84446DEF76453C439E9E97E438E13A63061FCE@suutari.haapa.mmm.fi>
References: <loom.20120109T112948-231@post.gmane.org>
	<1326112052.4f0add3489563@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63061FCE@suutari.haapa.mmm.fi>
Message-ID: <201201091947.05073.even.rouault@mines-paris.org>

> 
> I am speaking as one who is running a WFS server. It does not make me
> happy that users can use MAXFEATURES if the default is that it is not used.
> I have more than 50 featureTypes, several of them containing a few hundred
> thousand features and the biggest one has 1.2 million polygons. I do not
> use maxFeatures on the server side because a certain point layer with
> 800000 features is reasonable for unrestricted getFeature. Still my tiny
> server is spending nearly 15 minutes for sending it out.
> Doing "ogrinfo -al -so" for my server means reading approximately 500
> megabytes of data through the web and the ogrinfo result is still broken
> because some feature types get truncated due to timeout after 15 minutes.
> 
> I know that I must be ready to take this because I have decided to run an
> open WFS service and anybody can make such requests it they wish. However,
> I am not sure if this should be the default behaviour of GDAL. I would
> rather see that folks should be active before they hurt my service and
> other users with GDAL.
> 
> How about setting MAXFEATURES to, let's say, at maximum 5000 by default?
> By comparison, GDAL WFS driver itself seems to use only 100 features as a
> default page size if PagingAllowed is selected.

I don't know. Someone that pastes the bare GetFeature request without a 
MAXFEATURES in his web browser will also make suffer your server. It is both a 
legitimate use case in some situations and a potential situation of denial of 
service in others. I also guess that if you add your server as a WFS 
datasource into QGIS and you add a layer in your map, it will try to fetch all 
the features.

I don't want to deny there is a problem when issuing ogrinfo, but I'm not sure 
that setting a default MAXFEATURES on client side is appropriate. The issue is 
more with GetExtent() and the fact that the reported extent in GetCapabilities 
is reported as WGS84 and not in the default SRS, or that the values are 
sometimes junk.

> 
> For those who do not know, ogrinfo wants to read the whole feature type so
> it can calculate the exact bounds of the dataset.  Data are not stored and
> if user selects to fetch the data for local use another getFeature must be
> fired.

Not true. The result of the GetFeature is stored in RAM (if you must download 
500 MB then I hope you have enough RAM) and reused for all the next calls to 
the OGR API, until it gets invalidated by a change/setting of 
spatial/attribute filter. I've verified that GetFeature was emitted only once 
with a ogrinfo -al on a layer.

> 
> -Jukka Rahkonen-_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Mon Jan  9 13:49:26 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  9 13:49:43 2012
Subject: [gdal-dev] Shifting raster image one meter
In-Reply-To: <4F0B1475.4030501@free.fr>
References: <dcd8d6da7fcc72af6675335262fd047f@carto.net>
	<4F0B1475.4030501@free.fr>
Message-ID: <201201091949.26731.even.rouault@mines-paris.org>

Le lundi 09 janvier 2012 17:23:17, Jean-Claude Repetto a ?crit :
> Le 09/01/2012 17:06, Andreas Neumann a ?crit :
> > Should I edit the world file? The image is a geotiff, so it doesn't have
> > a worldfile.
> > 
> > Thanks for any ideas.
> > 
> > Andreas
> 
> Hi,
> 
> You can use the new utility gdal_edit.py (in GDAL 1.9) to edit GeoTiff
> metadata.
> 
> Frank, Even : It would be useful to add this utility to the
> documentation page at http://www.gdal.org/gdal_utilities.html .

Actually, it is not yet in the "officially supported tool" category. I just put 
it in the "samples" category for now. That might change if there is enough 
interest for it.

> 
> Jean-Claude
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From dmorissette at mapgears.com  Mon Jan  9 14:11:18 2012
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Jan  9 14:12:04 2012
Subject: [gdal-dev] Motion: Promote 1.9.0RC2 for release
In-Reply-To: <CA+YzLBcSFYx_x0YoeUMvmCow4NioHtGfo4DNuOUodxeXG0hyuA@mail.gmail.com>
References: <CA+YzLBcSFYx_x0YoeUMvmCow4NioHtGfo4DNuOUodxeXG0hyuA@mail.gmail.com>
Message-ID: <4F0B3BD6.9090907@mapgears.com>

On 12-01-04 5:30 PM, Frank Warmerdam wrote:
> Motion: GDAL/OGR 1.9.0RC2 is promoted to be the official
>             1.9.0 final release.
>
> ---
>
> PSC members please vote on this motion after you have had
> a chance to do some validation.  Input from everyone else who
> tests it is also very welcome.
>

+1 Daniel

(Sorry for the late vote. I meant to do some more testing but didn't 
find the time. I at least verified that it does build well in an FGS 
environment.)

-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From hobu.inc at gmail.com  Mon Jan  9 14:13:08 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon Jan  9 14:14:02 2012
Subject: [gdal-dev] Motion: Promote 1.9.0RC2 for release
In-Reply-To: <4F0B3BD6.9090907@mapgears.com>
References: <CA+YzLBcSFYx_x0YoeUMvmCow4NioHtGfo4DNuOUodxeXG0hyuA@mail.gmail.com>
	<4F0B3BD6.9090907@mapgears.com>
Message-ID: <BEA6F71C-2D22-4983-9148-F8D2C1DC35CE@gmail.com>


On Jan 9, 2012, at 1:11 PM, Daniel Morissette wrote:

> On 12-01-04 5:30 PM, Frank Warmerdam wrote:
>> Motion: GDAL/OGR 1.9.0RC2 is promoted to be the official
>>            1.9.0 final release.
>> 
>> ---
>> 
>> PSC members please vote on this motion after you have had
>> a chance to do some validation.  Input from everyone else who
>> tests it is also very welcome.
>> 
> 
> +1 Daniel
> 
> (Sorry for the late vote. I meant to do some more testing but didn't find the time. I at least verified that it does build well in an FGS environment.)

+1 

With the caveat that I have only tested recent trunks, not tarballs on the systems (OSX, Linux) I frequent.

Howard
From yjacolin at free.fr  Mon Jan  9 11:50:02 2012
From: yjacolin at free.fr (Yves Jacolin)
Date: Mon Jan  9 14:19:41 2012
Subject: [gdal-dev] VRT Plugin
Message-ID: <201201091750.02130.yjacolin@free.fr>

Hello,

I get this error with one of my function of my vrt plugins:

Band 1 Block=128x128 Type=Float32, ColorInterp=Undefined
ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: IReadBlock failed at X offset 1, Y offset 0
ERROR 1: IReadBlock failed at X offset 0, Y offset 1
ERROR 1: IReadBlock failed at X offset 1, Y offset 1
ERROR 1: IReadBlock failed at X offset 0, Y offset 2
ERROR 1: IReadBlock failed at X offset 1, Y offset 2
ERROR 1: Failed to compute min/max, no valid pixels found in sampling.


This function is:
CPLErr waveDirToUFunc(void **papoSources, int nSources, void *pData,
                    int nXSize, int nYSize,
                    GDALDataType eSrcType, GDALDataType eBufType,
                    int nPixelSpace, int nLineSpace)
{
    int iLine, iCol, ii;
    double pix_val;
    double x0;
    
    /* ---- Init ---- */
    if (nSources < 2) return CE_Failure;

    /* ---- Set pixels ---- */
    if (GDALDataTypeIsComplex( eSrcType ))
    {
        /*double adfPixVal[2], dfOldR, dfOldI, dfNewR, dfNewI;*/
        /*void *pReal, *pImag;*/
        /*int nOffset = GDALGetDataTypeSize( eSrcType ) / 8 / 2;*/

        /* ---- Set pixels ---- */
        for( iLine = 0, ii= 0; iLine < nYSize; ++iLine ) {
            for( iCol = 0; iCol < nXSize; ++iCol, ++ii ) {
                x0 = SRCVAL(papoSources[0], eSrcType, ii);

                pix_val = cos(x0*0.1*PI/180);
            
                GDALCopyWords(&pix_val, GDT_Float64, 0,
                          ((GByte *)pData) + nLineSpace * iLine + iCol * 
nPixelSpace,
                          eBufType, nPixelSpace, 1);
            }
        }
    }
    /* ---- Return success ---- */
    return CE_None;
} /* waveDirToUFunc */

Data range value is 0 to 3600.

Any idea? Thanks,

Y.
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From Jukka.Rahkonen at mmmtike.fi  Mon Jan  9 16:04:16 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Mon Jan  9 16:04:36 2012
Subject: [gdal-dev] Are these WFS issues worth filing tickets?
In-Reply-To: <201201091947.05073.even.rouault@mines-paris.org>
References: <loom.20120109T112948-231@post.gmane.org>
	<1326112052.4f0add3489563@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63061FCE@suutari.haapa.mmm.fi>,
	<201201091947.05073.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A63062031@suutari.haapa.mmm.fi>


Even Rouault wrote:

>> I am speaking as one who is running a WFS server. It does not make me
>> happy that users can use MAXFEATURES if the default is that it is not used.
>> I have more than 50 featureTypes, several of them containing a few hundred
>> thousand features and the biggest one has 1.2 million polygons. I do not
>> use maxFeatures on the server side because a certain point layer with
>> 800000 features is reasonable for unrestricted getFeature. Still my tiny
>> server is spending nearly 15 minutes for sending it out.
>> Doing "ogrinfo -al -so" for my server means reading approximately 500
>> megabytes of data through the web and the ogrinfo result is still broken
>> because some feature types get truncated due to timeout after 15 minutes.
>>
>> I know that I must be ready to take this because I have decided to run an
>> open WFS service and anybody can make such requests it they wish. However,
>> I am not sure if this should be the default behaviour of GDAL. I would
>> rather see that folks should be active before they hurt my service and
>> other users with GDAL.
>
>> How about setting MAXFEATURES to, let's say, at maximum 5000 by default?
>> By comparison, GDAL WFS driver itself seems to use only 100 features as a
>> default page size if PagingAllowed is selected.

> I don't know. Someone that pastes the bare GetFeature request without a
> MAXFEATURES in his web browser will also make suffer your server. It is both a
> legitimate use case in some situations and a potential situation of denial of
> service in others. I also guess that if you add your server as a WFS
> datasource into QGIS and you add a layer in your map, it will try to fetch all
> the features.

I have not said anything against ogr2ogr which I understand as equivalent for
a GIS client that is adding a layer from WFS into a map project. Of course there must
not be any automatically set additional limits then because user really wants to get 
the features home. But I have been thinking that ogrinfo is intended for getting 
some describing info about the dataset and it is often used priot to ogr2ogr. 
But I have also learned that ogrinfo can do much more than to show info about
ogr layers.


> I don't want to deny there is a problem when issuing ogrinfo, but I'm not sure
> that setting a default MAXFEATURES on client side is appropriate. The issue is
> more with GetExtent() and the fact that the reported extent in GetCapabilities
> is reported as WGS84 and not in the default SRS, or that the values are
> sometimes junk.

Sure they are often junk but doing getFeature is an expensive way for getting the 
correct information. Ald also this result may be unreliable if it is interpreted to 
describe the whole WFS feature type it getFeature request hits the server side 
maxFeatures limit. In this case ogrinfo can only report the extents of the first
[maxFeatures] of the feature type.

How about having an option -TRUST_GETCAPABILITIES=TRUE and use it as
a default value? So number of feature could be examined with resulttype=hits 
and extents could be taken as they are in the getCapabilities. Or perhaps they 
could be reported as unknown if reprojecting the lat/lon bounding box feels 
bad or is inaccurate/impossible? Extents are not always so interesting.

>> For those who do not know, ogrinfo wants to read the whole feature type so
>> it can calculate the exact bounds of the dataset.  Data are not stored and
>> if user selects to fetch the data for local use another getFeature must be
>> fired.

> Not true. The result of the GetFeature is stored in RAM (if you must download
> 500 MB then I hope you have enough RAM) and reused for all the next calls to
> the OGR API, until it gets invalidated by a change/setting of
> spatial/attribute filter. I've verified that GetFeature was emitted only once
> with a ogrinfo -al on a layer.

What do you get with these two requests (check layer info - download and convert
to shapefile) against this small WFS feature type?

ogrinfo WFS:http://hip.latuviitta.org/cgi-bin/tinyows municipalities
ogr2ogr -f "ESRI Shapefile" test.shp  WFS:http://hip.latuviitta.org/cgi-bin
/tinyows municipalities

I can see that for me with a Windows laptop two sets of requests are sent.

I am ready to surrender, though, with one tiny remark: Is is necessary to do
at all the first getFeature with resulttype=hits if the next request is always a full
getFeature? GDAL can count the number of features returned by thet second
query and the resulttype=hits one can also be rather expensive for the WFS server.

-Jukka Rahkonen-
From even.rouault at mines-paris.org  Mon Jan  9 16:36:30 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  9 16:36:49 2012
Subject: [gdal-dev] Are these WFS issues worth filing tickets?
In-Reply-To: <84446DEF76453C439E9E97E438E13A63062031@suutari.haapa.mmm.fi>
References: <loom.20120109T112948-231@post.gmane.org>
	<201201091947.05073.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A63062031@suutari.haapa.mmm.fi>
Message-ID: <201201092236.30126.even.rouault@mines-paris.org>

> > I don't want to deny there is a problem when issuing ogrinfo, but I'm not
> > sure that setting a default MAXFEATURES on client side is appropriate.
> > The issue is more with GetExtent() and the fact that the reported extent
> > in GetCapabilities is reported as WGS84 and not in the default SRS, or
> > that the values are sometimes junk.
> 
> Sure they are often junk but doing getFeature is an expensive way for
> getting the correct information. Ald also this result may be unreliable if
> it is interpreted to describe the whole WFS feature type it getFeature
> request hits the server side maxFeatures limit. In this case ogrinfo can
> only report the extents of the first [maxFeatures] of the feature type.
> 
> How about having an option -TRUST_GETCAPABILITIES=TRUE and use it as
> a default value? So number of feature could be examined with
> resulttype=hits and extents could be taken as they are in the
> getCapabilities. Or perhaps they could be reported as unknown if
> reprojecting the lat/lon bounding box feels bad or is
> inaccurate/impossible? Extents are not always so interesting.
> 

I also somehow imagined that. Perhaps you could file a ticket about that, so it 
can be eventually considered later.

> 
> What do you get with these two requests (check layer info - download and
> convert to shapefile) against this small WFS feature type?
> 
> ogrinfo WFS:http://hip.latuviitta.org/cgi-bin/tinyows municipalities
> ogr2ogr -f "ESRI Shapefile" test.shp  WFS:http://hip.latuviitta.org/cgi-bin
> /tinyows municipalities
> 
> I can see that for me with a Windows laptop two sets of requests are sent.

I just get one GetFeature for each command line as expected. Did you expect 
caching between ogrinfo and ogr2ogr ? The caching is just for one OGR session 
"of course". 

$ ogrinfo WFS:http://hip.latuviitta.org/cgi-bin/tinyows municipalities --debug 
on
WFS: http://hip.latuviitta.org/cgi-
bin/tinyows?SERVICE=WFS&REQUEST=GetCapabilities&ACCEPTVERSIONS=1.1.0,1.0.0
HTTP: Fetch(http://hip.latuviitta.org/cgi-
bin/tinyows?SERVICE=WFS&REQUEST=GetCapabilities&ACCEPTVERSIONS=1.1.0,1.0.0)
WFS: GetFeature operation supports hits
WFS: Transaction support !
OGR: OGROpen(WFS:http://hip.latuviitta.org/cgi-bin/tinyows/0x94ac60) succeeded 
as WFS.
INFO: Open of `WFS:http://hip.latuviitta.org/cgi-bin/tinyows'
      using driver `WFS' successful.
OGR: GetLayerCount() = 55

HTTP: Fetch(http://hip.latuviitta.org/cgi-
bin/tinyows?SERVICE=WFS&VERSION=1.1.0&REQUEST=DescribeFeatureType&TYPENAME=lv:municipalities,lv:mml_kunta10k_2011_l,lv:mml_kunta10k_2011_p,lv:mml_kunta100k_2011_l,lv:mml_kunta100k_2011_p,lv:mml_kunta250k_2011_l,lv:mml_kunta250k_2011_p,lv:mml_kunta1000k_2011_l,lv:mml_kunta1000k_2011_p,lv:mml_kunta4500k_2011_l,lv:mml_kunta4500k_2011_p,lv:mml_airport,lv:mml_asemat,lv:mml_avi1_l,lv:mml_avi1_p,lv:mml_cityp,lv:mml_coast_l,lv:mml_coast_p,lv:mml_dcont_l,lv:mml_dcont_p,lv:mml_forest,lv:mml_hcont_l,lv:mml_hcont_p,lv:mml_hpoint,lv:mml_kunta1_l,lv:mml_kunta1_p,lv:mml_kunta1_maa_alue,lv:mml_lake_l,lv:mml_lake_p,lv:mml_maaku1_l,lv:mml_maaku1_p,lv:mml_namep,lv:mml_pelto,lv:mml_railway,lv:mml_river,lv:mml_rivera_l,lv:mml_rivera_p,lv:mml_road,lv:mml_suot,lv:mml_taajama,lv:mml_paikannimet20,lv:peltolohkot_2011,lv:pks_pienalue,lv:pks_suuralue,lv:pks_tilastoalue,lv:pks_pienalue_piste,lv:pks_suuralue_piste,lv:pks_tilastoalue_piste,lv:natura2000_suomi_2010)

Layer name: lv:municipalities
Geometry: Multi Polygon
WFS: http://hip.latuviitta.org/cgi-
bin/tinyows?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=lv:municipalities&RESULTTYPE=hits
HTTP: Fetch(http://hip.latuviitta.org/cgi-
bin/tinyows?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=lv:municipalities&RESULTTYPE=hits)
Feature Count: 343
WFS: http://hip.latuviitta.org/cgi-
bin/tinyows?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=lv:municipalities
HTTP: Fetch(http://hip.latuviitta.org/cgi-
bin/tinyows?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=lv:municipalities)
GML: Using Expat reader
OGR: OGROpen(/vsimem/tempwfs_0x9cd770/file.gml/0xac0a00) succeeded as GML.
GML: ResetReading()
GML: ResetReading()
GML: ResetReading()
Extent: (61684.000000, 6605838.000000) - (732897.000000, 7776424.000000)
Layer SRS WKT:
PROJCS["ETRS89 / TM35FIN(E,N)",
    GEOGCS["ETRS89",
        DATUM["European_Terrestrial_Reference_System_1989",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6258"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AXIS["Latitude",NORTH],
        AXIS["Longitude",EAST],
        AUTHORITY["EPSG","4258"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",27],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH],
    AUTHORITY["EPSG","3067"]]
Geometry Column = the_geom
gml_id: String (0.0)
suuralue: String (0.0)
avi: String (0.0)
maakunta: String (0.0)
seutukunta: String (0.0)
kunta: String (0.0)
suural_ni1: String (0.0)
suural_ni2: String (0.0)
avi_ni1: String (0.0)
avi_ni2: String (0.0)
maaku_ni1: String (0.0)
maaku_ni2: String (0.0)
seutuk_ni1: String (0.0)
seutuk_ni2: String (0.0)
kunta_ni1: String (0.0)
kunta_ni2: String (0.0)
kieli_ni1: String (0.0)
kieli_ni2: String (0.0)
kaupunki: Integer (0.0)
shape_leng: Real (0.0)
shape_area: Real (0.0)
OGRFeature(lv:municipalities):1
  gml_id (String) = municipalities.1
  suuralue (String) = 4
  avi (String) = 6
  maakunta (String) = 19
  seutukunta (String) = 197
  kunta (String) = 890
  suural_ni1 (String) = Pohjois-Suomi
  suural_ni2 (String) = Norra Finland
  avi_ni1 (String) = Lapin aluehallintovirasto
  avi_ni2 (String) = Regionf?rvaltningsverket i Lappland
  maaku_ni1 (String) = Lappi
  maaku_ni2 (String) = Lappland
  seutuk_ni1 (String) = Pohjois-Lapin seutukunta
  seutuk_ni2 (String) = N_A
  kunta_ni1 (String) = Utsjoki
  kunta_ni2 (String) = N_A
  kieli_ni1 (String) = Suomi
  kieli_ni2 (String) = N_A
  kaupunki (Integer) = 1
  shape_leng (Real) = 348861.033197
  shape_area (Real) = 5378678737.73
[...]

$ ogr2ogr -f "ESRI Shapefile" test.shp  WFS:http://hip.latuviitta.org/cgi-
bin/tinyows municipalities -overwrite --debug on
WFS: http://hip.latuviitta.org/cgi-
bin/tinyows?SERVICE=WFS&REQUEST=GetCapabilities&ACCEPTVERSIONS=1.1.0,1.0.0
HTTP: Fetch(http://hip.latuviitta.org/cgi-
bin/tinyows?SERVICE=WFS&REQUEST=GetCapabilities&ACCEPTVERSIONS=1.1.0,1.0.0)
WFS: GetFeature operation supports hits
WFS: Transaction support !
OGR: OGROpen(WFS:http://hip.latuviitta.org/cgi-bin/tinyows/0x224fc60) 
succeeded as WFS.
Shape: DBF Codepage = LDID/87 for test.shp
Shape: Treating as encoding 'ISO-8859-1'.
OGR: OGROpen(test.shp/0x2321b30) succeeded as ESRI Shapefile.
HTTP: Fetch(http://hip.latuviitta.org/cgi-
bin/tinyows?SERVICE=WFS&VERSION=1.1.0&REQUEST=DescribeFeatureType&TYPENAME=lv:municipalities,lv:mml_kunta10k_2011_l,lv:mml_kunta10k_2011_p,lv:mml_kunta100k_2011_l,lv:mml_kunta100k_2011_p,lv:mml_kunta250k_2011_l,lv:mml_kunta250k_2011_p,lv:mml_kunta1000k_2011_l,lv:mml_kunta1000k_2011_p,lv:mml_kunta4500k_2011_l,lv:mml_kunta4500k_2011_p,lv:mml_airport,lv:mml_asemat,lv:mml_avi1_l,lv:mml_avi1_p,lv:mml_cityp,lv:mml_coast_l,lv:mml_coast_p,lv:mml_dcont_l,lv:mml_dcont_p,lv:mml_forest,lv:mml_hcont_l,lv:mml_hcont_p,lv:mml_hpoint,lv:mml_kunta1_l,lv:mml_kunta1_p,lv:mml_kunta1_maa_alue,lv:mml_lake_l,lv:mml_lake_p,lv:mml_maaku1_l,lv:mml_maaku1_p,lv:mml_namep,lv:mml_pelto,lv:mml_railway,lv:mml_river,lv:mml_rivera_l,lv:mml_rivera_p,lv:mml_road,lv:mml_suot,lv:mml_taajama,lv:mml_paikannimet20,lv:peltolohkot_2011,lv:pks_pienalue,lv:pks_suuralue,lv:pks_tilastoalue,lv:pks_pienalue_piste,lv:pks_suuralue_piste,lv:pks_tilastoalue_piste,lv:natura2000_suomi_2010)
Shape: DBF Codepage = LDID/87 for test
Shape: Treating as encoding 'ISO-8859-1'.
WFS: http://hip.latuviitta.org/cgi-
bin/tinyows?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=lv:municipalities
HTTP: Fetch(http://hip.latuviitta.org/cgi-
bin/tinyows?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=lv:municipalities)
GML: Using Expat reader
OGR: OGROpen(/vsimem/tempwfs_0x22d28f0/file.gml/0x2460c00) succeeded as GML.
GML: ResetReading()
GML: ResetReading()
Warning 1: Value '5378678737.729999542236328' of field shape_area has been 
truncated to 24 characters.
This warning will not be emitted any more for that layer.
OGR2OGR: 343 features written in layer 'test'

> 
> I am ready to surrender, though, with one tiny remark: Is is necessary to
> do at all the first getFeature with resulttype=hits if the next request is
> always a full getFeature? GDAL can count the number of features returned
> by thet second query and the resulttype=hits one can also be rather
> expensive for the WFS server.

I can understand that, but the key to understand the behaviour you observe is 
that the OGR WFS driver has no idea that it is called in the context of 
ogrinfo. So when ogrinfo issues a GetFeatureCount(), there's no reason to 
issue a full GetFeature. Plus the fact that GetFeatureCount() is faster than 
full GetFeature on big layers, so you might still be interested to know how 
many features there are by just downloading a few bytes *before* issuing the 
full GetFeature

> 
> -Jukka Rahkonen-_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From JPalmer at linz.govt.nz  Mon Jan  9 16:47:21 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Mon Jan  9 16:51:04 2012
Subject: [gdal-dev] How to append data into an existing database table
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0E131CB629@prdlsmmsg01.ad.linz.govt.nz>

Hi All,

I've got an existing spatial table in PostgreSQL with has an existing primary key (non-serial) and shape column:

CREATE TABLE test_1
(
  id integer NOT NULL,
  appellation TEXT,
  affected_surveys TEXT,
  parcel_intent TEXT NOT NULL,
  topology_type VARCHAR(100) NOT NULL,
  statutory_actions TEXT,
  land_district VARCHAR(100) NOT NULL,
  titles TEXT,
  survey_area numeric(20,4),
  calc_area numeric(20,4) NOT NULL,
  shape geometry,
  PRIMARY KEY (id)
);

I'm trying to append data from a CSV file into a pg database but I'm having problems:

ogr2ogr -append -f PostgreSQL "PG:host=xxxx dbname=xxxx" test1.vrt -nln test_1

ERROR 1: INSERT command for new feature failed.
ERROR:  null value in column "id" violates not-null constraint

Command: INSERT INTO "public"."test_csv_table_1" ("affected_surveys", "appellation", "calc_area", "land_district", "parcel_intent", "statutory_actions", "survey_area", "titles", "topology_type") VALUES ('SO 11957, SO 1207', 'Part Sec 11 Waimea West DIST',              10.5708, 'Nelson', 'DCDB', '[Create] For the Use, Convenience and Enjoyment of a Road New Zealand Gazette 1979 p 3136',  10.0000, '', 'Primary') RETURNING id

ERROR 1: Terminating translation prematurely after failed
translation of layer test1 (use -skipfailures to skip errors)

Looks to me like it's expecting the id to be automatically populated and returned from the database. But I actually want the id values within the CSV to be used. Plus the geometry data from the CSV has been completed omitted.

Here's the CSV vrt schema:

<OGRVRTDataSource>
    <OGRVRTLayer name="test1">
        <SrcDataSource relativeToVRT="1">test1.csv</SrcDataSource>
        <GeometryType>wkbMultiPolygon</GeometryType>
        <LayerSRS>EPSG:4167</LayerSRS>
        <Field name="id" src="id" type="Integer"/>
        <Field name="appellation" src="appellation" type="String" />
        <Field name="affected_surveys" src="affected_surveys" type="String" />
        <Field name="parcel_intent" src="parcel_intent" type="String" />
        <Field name="topology_type" src="topology_type" type="String" width="100" />
        <Field name="statutory_actions" src="statutory_actions" type="String" />
        <Field name="land_district" src="land_district" type="String" width="100" />
        <Field name="titles" src="titles" type="String" />
        <Field name="survey_area" src="survey_area" type="Real" width="20" precision ="4" />
        <Field name="calc_area" src="calc_area" type="Real" width="20" precision ="4" />
        <GeometryField encoding="WKT" field="shape" reportSrcColumn="FALSE"/>
        <FID>id</FID>
    </OGRVRTLayer>
</OGRVRTDataSource>


I see there is a layer creation options that changes the fid and geometry column names, but because I'm appending it won't let me use these options.

Also note that my CSV file contains polygon and multipolygon WKT.

I have also tried doing similar operations with the spatialite and MSSQL drivers and got the same error.

I'm using gdal/ogr 1.8.0

Cheers,
Jeremy


#####################################################################################

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank You.

#####################################################################################
From even.rouault at mines-paris.org  Mon Jan  9 17:23:51 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  9 17:24:17 2012
Subject: [gdal-dev] How to append data into an existing database table
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0E131CB629@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0E131CB629@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <201201092323.51131.even.rouault@mines-paris.org>

Le lundi 09 janvier 2012 22:47:21, Jeremy Palmer a ?crit :
> Hi All,
> 
> I've got an existing spatial table in PostgreSQL with has an existing
> primary key (non-serial) and shape column:
> 
> CREATE TABLE test_1
> (
>   id integer NOT NULL,
>   appellation TEXT,
>   affected_surveys TEXT,
>   parcel_intent TEXT NOT NULL,
>   topology_type VARCHAR(100) NOT NULL,
>   statutory_actions TEXT,
>   land_district VARCHAR(100) NOT NULL,
>   titles TEXT,
>   survey_area numeric(20,4),
>   calc_area numeric(20,4) NOT NULL,
>   shape geometry,
>   PRIMARY KEY (id)
> );
> 
> I'm trying to append data from a CSV file into a pg database but I'm having
> problems:
> 
> ogr2ogr -append -f PostgreSQL "PG:host=xxxx dbname=xxxx" test1.vrt -nln
> test_1

Try adding the -preserve_fid option of ogr2ogr.
From rush at winkey.org  Mon Jan  9 18:02:42 2012
From: rush at winkey.org (Brian Case)
Date: Mon Jan  9 18:04:30 2012
Subject: [gdal-dev] Motion: Authorize Islandwood Funding for Brian Case
In-Reply-To: <CA+YzLBc1tG8BW0d18TWbye0SnDe7f6rw23-gk7sig_69yw50Vw@mail.gmail.com>
References: <4EE84A57.1080005@pobox.com>
	<CA+YzLBc1tG8BW0d18TWbye0SnDe7f6rw23-gk7sig_69yw50Vw@mail.gmail.com>
Message-ID: <1326150162.30920.46.camel@octopi>

hey people

Thanks for the support.
looking forwards to the sprint.

Brian



On Tue, 2012-01-03 at 10:01 -0800, Frank Warmerdam wrote:
> On Tue, Dec 13, 2011 at 11:03 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> > Motion: The GDAL PSC authorizes funding up to US$525 to pay entrance fees
> > to the Islandwood Code Sprint for Brian Case.
> 
> Folks,
> 
> I declare this motion passed with support from Tamas, Even,
> Frank, Daniel and Howard.   If there is any other GDAL contributors
> interested in attending the sprint under similar arrangements let me
> know.  There are still openings available as I understand it.
> 
> Best regards,


From JPalmer at linz.govt.nz  Mon Jan  9 19:43:40 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Mon Jan  9 19:44:36 2012
Subject: [gdal-dev] How to append data into an existing database table
In-Reply-To: <201201092323.51131.even.rouault@mines-paris.org>
References: <666FB8D75E95AE42965A0E76A5E5337E0E131CB629@prdlsmmsg01.ad.linz.govt.nz>
	<201201092323.51131.even.rouault@mines-paris.org>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0E131CB884@prdlsmmsg01.ad.linz.govt.nz>

I knew I was missing something!

I've now noticed that empty fields within the CSV get populated as a literal '' rather than null. Is there any option to control this behavior as well?

Thanks again,
Jeremy

> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Tuesday, 10 January 2012 11:24 a.m.
> To: gdal-dev@lists.osgeo.org
> Cc: Jeremy Palmer
> Subject: Re: [gdal-dev] How to append data into an existing database table
> 
> Le lundi 09 janvier 2012 22:47:21, Jeremy Palmer a ?crit :
> > Hi All,
> >
> > I've got an existing spatial table in PostgreSQL with has an existing
> > primary key (non-serial) and shape column:
> >
> > CREATE TABLE test_1
> > (
> >   id integer NOT NULL,
> >   appellation TEXT,
> >   affected_surveys TEXT,
> >   parcel_intent TEXT NOT NULL,
> >   topology_type VARCHAR(100) NOT NULL,
> >   statutory_actions TEXT,
> >   land_district VARCHAR(100) NOT NULL,
> >   titles TEXT,
> >   survey_area numeric(20,4),
> >   calc_area numeric(20,4) NOT NULL,
> >   shape geometry,
> >   PRIMARY KEY (id)
> > );
> >
> > I'm trying to append data from a CSV file into a pg database but I'm having
> > problems:
> >
> > ogr2ogr -append -f PostgreSQL "PG:host=xxxx dbname=xxxx" test1.vrt -nln
> > test_1
> 
> Try adding the -preserve_fid option of ogr2ogr.
#####################################################################################

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank You.

#####################################################################################
From even.rouault at mines-paris.org  Mon Jan  9 19:49:09 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  9 19:49:09 2012
Subject: [gdal-dev] How to append data into an existing database table
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0E131CB884@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0E131CB629@prdlsmmsg01.ad.linz.govt.nz>
	<201201092323.51131.even.rouault@mines-paris.org>
	<666FB8D75E95AE42965A0E76A5E5337E0E131CB884@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <201201100149.09452.even.rouault@mines-paris.org>

Le mardi 10 janvier 2012 01:43:40, Jeremy Palmer a ?crit :
> I knew I was missing something!
> 
> I've now noticed that empty fields within the CSV get populated as a
> literal '' rather than null. Is there any option to control this behavior
> as well?

Not that I'm aware of.

You can perhaps just issue a "UPDATE test_1 SET yourcolumn = NULL WHERE 
yourcolumn = ''" as a post-processing step ?

> 
> Thanks again,
> Jeremy
> 
> > -----Original Message-----
> > From: Even Rouault [mailto:even.rouault@mines-paris.org]
> > Sent: Tuesday, 10 January 2012 11:24 a.m.
> > To: gdal-dev@lists.osgeo.org
> > Cc: Jeremy Palmer
> > Subject: Re: [gdal-dev] How to append data into an existing database
> > table
> > 
> > Le lundi 09 janvier 2012 22:47:21, Jeremy Palmer a ?crit :
> > > Hi All,
> > > 
> > > I've got an existing spatial table in PostgreSQL with has an existing
> > > primary key (non-serial) and shape column:
> > > 
> > > CREATE TABLE test_1
> > > (
> > > 
> > >   id integer NOT NULL,
> > >   appellation TEXT,
> > >   affected_surveys TEXT,
> > >   parcel_intent TEXT NOT NULL,
> > >   topology_type VARCHAR(100) NOT NULL,
> > >   statutory_actions TEXT,
> > >   land_district VARCHAR(100) NOT NULL,
> > >   titles TEXT,
> > >   survey_area numeric(20,4),
> > >   calc_area numeric(20,4) NOT NULL,
> > >   shape geometry,
> > >   PRIMARY KEY (id)
> > > 
> > > );
> > > 
> > > I'm trying to append data from a CSV file into a pg database but I'm
> > > having problems:
> > > 
> > > ogr2ogr -append -f PostgreSQL "PG:host=xxxx dbname=xxxx" test1.vrt -nln
> > > test_1
> > 
> > Try adding the -preserve_fid option of ogr2ogr.
> 
> ###########################################################################
> ##########
> 
> This message contains information, which is confidential and may be subject
> to legal privilege. If you are not the intended recipient, you must not
> peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800
> 665 463 or info@linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ.
> 
> Thank You.
> 
> ###########################################################################
> ##########
From JPalmer at linz.govt.nz  Mon Jan  9 19:50:23 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Mon Jan  9 19:54:28 2012
Subject: [gdal-dev] How to append data into an existing database table
In-Reply-To: <201201100149.09452.even.rouault@mines-paris.org>
References: <666FB8D75E95AE42965A0E76A5E5337E0E131CB629@prdlsmmsg01.ad.linz.govt.nz>
	<201201092323.51131.even.rouault@mines-paris.org>
	<666FB8D75E95AE42965A0E76A5E5337E0E131CB884@prdlsmmsg01.ad.linz.govt.nz>
	<201201100149.09452.even.rouault@mines-paris.org>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0E131CB8A7@prdlsmmsg01.ad.linz.govt.nz>

Ah ok. I was hoping to avoid that. 

> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Tuesday, 10 January 2012 1:49 p.m.
> To: Jeremy Palmer
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] How to append data into an existing database table
> 
> Le mardi 10 janvier 2012 01:43:40, Jeremy Palmer a ?crit :
> > I knew I was missing something!
> >
> > I've now noticed that empty fields within the CSV get populated as a
> > literal '' rather than null. Is there any option to control this behavior
> > as well?
> 
> Not that I'm aware of.
> 
> You can perhaps just issue a "UPDATE test_1 SET yourcolumn = NULL WHERE
> yourcolumn = ''" as a post-processing step ?
> 
> >
> > Thanks again,
> > Jeremy
> >
> > > -----Original Message-----
> > > From: Even Rouault [mailto:even.rouault@mines-paris.org]
> > > Sent: Tuesday, 10 January 2012 11:24 a.m.
> > > To: gdal-dev@lists.osgeo.org
> > > Cc: Jeremy Palmer
> > > Subject: Re: [gdal-dev] How to append data into an existing database
> > > table
> > >
> > > Le lundi 09 janvier 2012 22:47:21, Jeremy Palmer a ?crit :
> > > > Hi All,
> > > >
> > > > I've got an existing spatial table in PostgreSQL with has an existing
> > > > primary key (non-serial) and shape column:
> > > >
> > > > CREATE TABLE test_1
> > > > (
> > > >
> > > >   id integer NOT NULL,
> > > >   appellation TEXT,
> > > >   affected_surveys TEXT,
> > > >   parcel_intent TEXT NOT NULL,
> > > >   topology_type VARCHAR(100) NOT NULL,
> > > >   statutory_actions TEXT,
> > > >   land_district VARCHAR(100) NOT NULL,
> > > >   titles TEXT,
> > > >   survey_area numeric(20,4),
> > > >   calc_area numeric(20,4) NOT NULL,
> > > >   shape geometry,
> > > >   PRIMARY KEY (id)
> > > >
> > > > );
> > > >
> > > > I'm trying to append data from a CSV file into a pg database but I'm
> > > > having problems:
> > > >
> > > > ogr2ogr -append -f PostgreSQL "PG:host=xxxx dbname=xxxx" test1.vrt -nln
> > > > test_1
> > >
> > > Try adding the -preserve_fid option of ogr2ogr.
> >
> >
> #####################################################
> ######################
> > ##########
> >
> > This message contains information, which is confidential and may be subject
> > to legal privilege. If you are not the intended recipient, you must not
> > peruse, use, disseminate, distribute or copy this message. If you have
> > received this message in error, please notify us immediately (Phone 0800
> > 665 463 or info@linz.govt.nz) and destroy the original message. LINZ
> > accepts no responsibility for changes to this email, or for any
> > attachments, after its transmission from LINZ.
> >
> > Thank You.
> >
> >
> #####################################################
> ######################
> > ##########
#####################################################################################

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank You.

#####################################################################################
From chapmanm at pixia.com  Mon Jan  9 21:03:14 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Mon Jan  9 21:08:59 2012
Subject: [gdal-dev] FYI - embedding overviews into read only file
Message-ID: <5b5cf6fe.00000810.0000000d@CHAPMANM7S>

Frank,

 

It just dawned on me that yesterday I used the following code to open a
raster file like so:

 

mDataSource = (GDALDataset*) GDALOpen(filePath.c_str(), GA_ReadOnly);

 

And then used the GDALDefaultOverviews class to embed some overviews into
the file.  Shouldn't the API prevent that if I opened the file as read
only?  I initialized the default overviews class using the dataset
pointer.  I am using GDAL 1.8.1. .  I used the BuildOverviews() method of
the default overviews class to execute the process.

 

Best regards

Martin

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120109/96bce125/attachment-0001.html
From warmerdam at pobox.com  Mon Jan  9 21:15:51 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan  9 21:16:38 2012
Subject: [gdal-dev] FYI - embedding overviews into read only file
In-Reply-To: <5b5cf6fe.00000810.0000000d@CHAPMANM7S>
References: <5b5cf6fe.00000810.0000000d@CHAPMANM7S>
Message-ID: <CA+YzLBeS+6T3sJ+Dr35SR5TbzNdhqCQA3RW7NbV-cBUd+sHEuA@mail.gmail.com>

Martin,

In general GDAL is very poor about checking read-only vs. read-write
status.  I presume the overviews where in a .ovr file, not in the original
file itself, right?

I will note it is desirable that we can build overviews for files
even if we can only open the files readonly (ie. formats
that don't support update), so I wouldn't want to introduce
careful update permission checking now.

Best regards,
Frank

On Mon, Jan 9, 2012 at 6:03 PM, Martin Chapman <chapmanm@pixia.com> wrote:
> Frank,
>
>
>
> It just dawned on me that yesterday I used the following code to open a
> raster file like so:
>
>
>
> mDataSource = (GDALDataset*) GDALOpen(filePath.c_str(), GA_ReadOnly);
>
>
>
> And then used the GDALDefaultOverviews class to embed some overviews into
> the file.? Shouldn?t the API prevent that if I opened the file as read only?
> ?I initialized the default overviews class using the dataset pointer.? I am
> using GDAL 1.8.1. .? I used the BuildOverviews() method of the default
> overviews class to execute the process.
>
>
>
> Best regards
>
> Martin
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From chapmanm at pixia.com  Mon Jan  9 21:35:43 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Mon Jan  9 21:35:49 2012
Subject: [gdal-dev] FYI - embedding overviews into read only file
In-Reply-To: <CA+YzLBeS+6T3sJ+Dr35SR5TbzNdhqCQA3RW7NbV-cBUd+sHEuA@mail.gmail.com>
References: <5b5cf6fe.00000810.0000000d@CHAPMANM7S>
	<CA+YzLBeS+6T3sJ+Dr35SR5TbzNdhqCQA3RW7NbV-cBUd+sHEuA@mail.gmail.com>
Message-ID: <4a65374c.00000810.00000015@CHAPMANM7S>

Frank,

I agree with your reasoning for letting the api do it anyway because it
would be a pain to close and reopen the file.  I just wanted to let you
know in case it was a bug.  Thanks for the response.

Best regards,
Martin

-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: Monday, January 09, 2012 7:16 PM
To: Martin Chapman
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] FYI - embedding overviews into read only file

Martin,

In general GDAL is very poor about checking read-only vs. read-write
status.  I presume the overviews where in a .ovr file, not in the original
file itself, right?

I will note it is desirable that we can build overviews for files even if
we can only open the files readonly (ie. formats that don't support
update), so I wouldn't want to introduce careful update permission
checking now.

Best regards,
Frank

On Mon, Jan 9, 2012 at 6:03 PM, Martin Chapman <chapmanm@pixia.com> wrote:
> Frank,
>
>
>
> It just dawned on me that yesterday I used the following code to open
> a raster file like so:
>
>
>
> mDataSource = (GDALDataset*) GDALOpen(filePath.c_str(), GA_ReadOnly);
>
>
>
> And then used the GDALDefaultOverviews class to embed some overviews
> into the file.? Shouldn?t the API prevent that if I opened the file as
read only?
> ?I initialized the default overviews class using the dataset pointer.?
> I am using GDAL 1.8.1. .? I used the BuildOverviews() method of the
> default overviews class to execute the process.
>
>
>
> Best regards
>
> Martin
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up?? | Frank Warmerdam,
warmerdam@pobox.com light and sound - activate the windows |
http://pobox.com/~warmerdam and watch the world go round - Rush? ? |
Geospatial Software Developer
From warmerdam at pobox.com  Tue Jan 10 02:04:12 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 10 02:05:00 2012
Subject: [gdal-dev] Re: Motion: Promote 1.9.0RC2 for release
In-Reply-To: <CA+YzLBcSFYx_x0YoeUMvmCow4NioHtGfo4DNuOUodxeXG0hyuA@mail.gmail.com>
References: <CA+YzLBcSFYx_x0YoeUMvmCow4NioHtGfo4DNuOUodxeXG0hyuA@mail.gmail.com>
Message-ID: <CA+YzLBdeYB3a_JL1Z=uv2Re5TW4_haBMkp72CySHsjSFreuKjQ@mail.gmail.com>

On Wed, Jan 4, 2012 at 2:30 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Motion: GDAL/OGR 1.9.0RC2 is promoted to be the official
> ? ? ? ? ? 1.9.0 final release.
>

Folks,

I declare this motion passed with support from Even, Daniel, Howard
and myself.  I will distribute an announcement shortly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From warmerdam at pobox.com  Tue Jan 10 02:19:53 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 10 02:20:40 2012
Subject: [gdal-dev] GDAL/OGR 1.9.0 Released
Message-ID: <4F0BE699.1010109@pobox.com>

The GDAL/OGR team is pleased to announce the release of GDAL/OGR 1.9.0.
This is a major new release including the following major new features:

  * New GDAL drivers: ACE2, CTG, E00GRID, ECRGTOC, GRASSASCIIGrid,
    GTA, NGSGEOID, SNODAS, WebP, ZMap
  * New OGR drivers:  ARCGEN, CouchDB, DWG, EDIGEO, ESRI FileGDB, Geomedia,
    Google Fusion Tables, IDRISI, MDB, SEGUKOOA, SEGY, SVG, XLS
  * Significantly improved drivers: NetCDF
  * Encoding support for shapefile/dbf (#882)
  * RFC 35: Delete, reorder and alter field definitions of OGR layers
  * RFC 37: Add mechanism to provide user data to CPLErrorHandler (#4295)
  * gdalsrsinfo: new supported utility to report SRS in various form
    (supercedes testepsg)

Complete news on the new release can be found at:

  http://trac.osgeo.org/gdal/wiki/Release/1.9.0-News

The new release can be downloaded from:
  * http://download.osgeo.org/gdal/gdal190.zip - source as a zip
  * http://download.osgeo.org/gdal/gdal-1.9.0.tar.gz - source as .tar.gz
  * http://download.osgeo.org/gdal/gdalautotest-1.9.0.tar.gz - test suite
  * http://download.osgeo.org/gdal/gdal190doc.zip - documentation / website

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From a.neumann at carto.net  Tue Jan 10 04:44:51 2012
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue Jan 10 04:45:24 2012
Subject: [gdal-dev] Shifting raster image one meter
In-Reply-To: <4F0B1475.4030501@free.fr>
References: <dcd8d6da7fcc72af6675335262fd047f@carto.net>
	<4F0B1475.4030501@free.fr>
Message-ID: <5fd14a25a496131e34d80dbec01a6c70@carto.net>

 Hi,

 just wanted you to know that gdal_edit.py worked perfectly fine:

 Here is my command:
 gdal_edit.py -a_ullr 688999 252000.25 702999 241000.25 
 orthofoto_2010.tif

 where -a_ullr are the new upper left and the lower right corner 
 coordinates.

 Thanks for the hint!

 Andreas

 On Mon, 09 Jan 2012 17:23:17 +0100, Jean-Claude Repetto wrote:
> Le 09/01/2012 17:06, Andreas Neumann a ?crit :
>>
>> Should I edit the world file? The image is a geotiff, so it doesn't 
>> have
>> a worldfile.
>>
>> Thanks for any ideas.
>>
>> Andreas
>>
>
> Hi,
>
> You can use the new utility gdal_edit.py (in GDAL 1.9) to edit
> GeoTiff metadata.
>
> Frank, Even : It would be useful to add this utility to the
> documentation page at http://www.gdal.org/gdal_utilities.html .
>
> Jean-Claude
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland
From jukka.rahkonen at mmmtike.fi  Tue Jan 10 05:39:27 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Jan 10 05:39:48 2012
Subject: [gdal-dev] Re: Are these WFS issues worth filing tickets?
References: <loom.20120109T112948-231@post.gmane.org>
	<201201091947.05073.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A63062031@suutari.haapa.mmm.fi>
	<201201092236.30126.even.rouault@mines-paris.org>
Message-ID: <loom.20120110T104123-116@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> > How about having an option -TRUST_GETCAPABILITIES=TRUE and use it as
> > a default value? So number of feature could be examined with
> > resulttype=hits and extents could be taken as they are in the
> > getCapabilities. Or perhaps they could be reported as unknown if
> > reprojecting the lat/lon bounding box feels bad or is
> > inaccurate/impossible? Extents are not always so interesting.
> > 
> 
> I also somehow imagined that. Perhaps you could file a ticket about that,
 so it 
> can be eventually considered later.

After all, such option would not make sense with ogrinfo tool and therefore I
will not make a ticket about it. GetCapabilities is sending fixed information
about the whole layer and that is unusable if user is making selections with
-where, -sql or -spat parameters. In that case the only possibility to get the
desired information is to read the features.

My next bid is to try to teach the users to avoid unintentionally heavy
requests by adding a new paragraph into the WFS driver document page
http://gdal.org/ogr/drv_wfs.html

Using ogrinfo
=============
Ogrinfo tool tries to apply the spatial and attribute filters from the command
line and fetches then data from the WFS service. If no fiters are given this
will lead to reading all features from a WFS data source with a GetFeature
request. This can be a slow operation. Particularly when ogrinfo is used with
the 'all layers' parameter (ogrinfo -al) it will make sequential request for
fetching the contents of each feature type from the whole WFS service. When
exhaustive layer info is not needed the use of special layers WFSLayerMetadata
and WFSGetCapabilities offer a much faster access to WFS service metadata.

My last suggestion is to make third special layer or actually set of special
layers. It could be named as WFSLayerSchema and it would return the schema that
is captured by making a DescribeFeatureType query. Usage might be like "ogrinfo
WFS:server.com/wfs WFSLayerSchema:[featureType]. Now the only way see the shema
is to use the heavy request.

Regards,

-Jukka Rahkonen-






From even.rouault at mines-paris.org  Tue Jan 10 07:34:22 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 10 07:35:06 2012
Subject: [gdal-dev] Re: Are these WFS issues worth filing tickets?
In-Reply-To: <loom.20120110T104123-116@post.gmane.org>
References: <loom.20120109T112948-231@post.gmane.org>
	<201201091947.05073.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A63062031@suutari.haapa.mmm.fi>
	<201201092236.30126.even.rouault@mines-paris.org>
	<loom.20120110T104123-116@post.gmane.org>
Message-ID: <1326198862.4f0c304e0f623@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:

> Even Rouault <even.rouault <at> mines-paris.org> writes:
>
> > > How about having an option -TRUST_GETCAPABILITIES=TRUE and use it as
> > > a default value? So number of feature could be examined with
> > > resulttype=hits and extents could be taken as they are in the
> > > getCapabilities. Or perhaps they could be reported as unknown if
> > > reprojecting the lat/lon bounding box feels bad or is
> > > inaccurate/impossible? Extents are not always so interesting.
> > >
> >
> > I also somehow imagined that. Perhaps you could file a ticket about that,
>  so it
> > can be eventually considered later.
>
> After all, such option would not make sense with ogrinfo tool and therefore I
> will not make a ticket about it. GetCapabilities is sending fixed information
> about the whole layer and that is unusable if user is making selections with
> -where, -sql or -spat parameters. In that case the only possibility to get
> the
> desired information is to read the features.

Well, the GetExtent() API has not a well defined semantics regarding to whether
it should take the filters into account or not ( see
http://gdal.org/ogr/ogr__api_8h.html#a6c495581900c8301dff91d8cd3ee12f ) and
indeed, there is a lot of variations between drivers. So I still believe that
the configuration option could make sense.

... but while looking at GetExtent() API more closely, I see that there is a
bForce parameter that could be used : """ If bForce is FALSE, and it would be
expensive to establish the extent then OGRERR_FAILURE will be returned
indicating that the extent isn't know. If bForce is TRUE then some
implementations will actually scan the entire layer once to compute the MBR of
all the features in the layer """ . AFAIR, very few drivers actually check the
value of the bForce driver (I cannot quote a single one from my memory which
would use it. I should do extensive searching). ogrinfo currently sets bForce =
TRUE. An option would be to change the default to FALSE, and add an option to
ogrinfo "-compute_extent" to explicitely set bForce to TRUE if needed.

So for the WFS driver, GetExtent(bForce = FALSE) would return a OGRERR_FAILURE,
whereas GetExtent(bForce = TRUE) would do the current behaviour.

What do you think ?

>
> My next bid is to try to teach the users to avoid unintentionally heavy
> requests by adding a new paragraph into the WFS driver document page
> http://gdal.org/ogr/drv_wfs.html
>
> Using ogrinfo
> =============
> Ogrinfo tool tries to apply the spatial and attribute filters from the
> command
> line and fetches then data from the WFS service. If no fiters are given this
> will lead to reading all features from a WFS data source with a GetFeature
> request. This can be a slow operation. Particularly when ogrinfo is used with
> the 'all layers' parameter (ogrinfo -al) it will make sequential request for
> fetching the contents of each feature type from the whole WFS service. When
> exhaustive layer info is not needed the use of special layers
> WFSLayerMetadata
> and WFSGetCapabilities offer a much faster access to WFS service metadata.

Thanks. Makes sense to document the behaviour of current releases.

>
> My last suggestion is to make third special layer or actually set of special
> layers. It could be named as WFSLayerSchema and it would return the schema
> that
> is captured by making a DescribeFeatureType query. Usage might be like
> "ogrinfo
> WFS:server.com/wfs WFSLayerSchema:[featureType]. Now the only way see the
> shema
> is to use the heavy request.

I don't know if it would still be usefull if the slowness of GetExtent() is
solved. In addition, there are some caveats :
* For example, Deegree WFS servers (at least the demo ones) generally return a
DescribeFeatureType with a lot of xs:include, but not interesting content. For
that you need to downloaded the referenced xsd in the includes. The OGR WFS
driver gives up at that point and just tries to establish the layer definition
by requesting just one feature.
* Sometimes the GML driver isn't smart enough to understand the schema (because
it contains nested attributes, or of non-primitive types), so it will also
establish the layer definition by requesting just one feature. So the actual
layer definition returned by the driver can be a bit (or a lot) different from
the one advertized in DescribeFeatureType. (In which case attribute or spatial
filtering won't work due to the mismatch ...). WFS administrators : you'd better
stick to the GML SF-0 implementation profile ...
From Jukka.Rahkonen at mmmtike.fi  Tue Jan 10 08:11:00 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Tue Jan 10 08:11:09 2012
Subject: [gdal-dev] Re: Are these WFS issues worth filing tickets?
In-Reply-To: <1326198862.4f0c304e0f623@imp.free.fr>
References: <loom.20120109T112948-231@post.gmane.org>
	<201201091947.05073.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A63062031@suutari.haapa.mmm.fi>
	<201201092236.30126.even.rouault@mines-paris.org>
	<loom.20120110T104123-116@post.gmane.org>
	<1326198862.4f0c304e0f623@imp.free.fr>
Message-ID: <84446DEF76453C439E9E97E438E13A63062199@suutari.haapa.mmm.fi>

Even Rouault wrote:

> Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:
> 
> > Even Rouault <even.rouault <at> mines-paris.org> writes:
> >
> > > > How about having an option -TRUST_GETCAPABILITIES=TRUE 
> and use it as
> > > > a default value? So number of feature could be examined with
> > > > resulttype=hits and extents could be taken as they are in the
> > > > getCapabilities. Or perhaps they could be reported as unknown if
> > > > reprojecting the lat/lon bounding box feels bad or is
> > > > inaccurate/impossible? Extents are not always so interesting.
> > > >
> > >
> > > I also somehow imagined that. Perhaps you could file a 
> ticket about that,
> >  so it
> > > can be eventually considered later.
> >
> > After all, such option would not make sense with ogrinfo 
> tool and therefore I
> > will not make a ticket about it. GetCapabilities is sending 
> fixed information
> > about the whole layer and that is unusable if user is 
> making selections with
> > -where, -sql or -spat parameters. In that case the only 
> possibility to get
> > the
> > desired information is to read the features.
> 
> Well, the GetExtent() API has not a well defined semantics 
> regarding to whether
> it should take the filters into account or not ( see
> http://gdal.org/ogr/ogr__api_8h.html#a6c495581900c8301dff91d8c
d3ee12f ) and
> indeed, there is a lot of variations between drivers. So I 
> still believe that
> the configuration option could make sense.
> 
> ... but while looking at GetExtent() API more closely, I see 
> that there is a
> bForce parameter that could be used : """ If bForce is FALSE, 
> and it would be
> expensive to establish the extent then OGRERR_FAILURE will be returned
> indicating that the extent isn't know. If bForce is TRUE then some
> implementations will actually scan the entire layer once to 
> compute the MBR of
> all the features in the layer """ . AFAIR, very few drivers 
> actually check the
> value of the bForce driver (I cannot quote a single one from 
> my memory which
> would use it. I should do extensive searching). ogrinfo 
> currently sets bForce =
> TRUE. An option would be to change the default to FALSE, and 
> add an option to
> ogrinfo "-compute_extent" to explicitely set bForce to TRUE if needed.
> 
> So for the WFS driver, GetExtent(bForce = FALSE) would return 
> a OGRERR_FAILURE,
> whereas GetExtent(bForce = TRUE) would do the current behaviour.
> 
> What do you think ?

I think I am going to count on you. About extent computing, it 
might be good to check how bForce behaves with Oracle driver. 
Selecting aggregate MBR from Oracle is very heavy.

> > My next bid is to try to teach the users to avoid 
> unintentionally heavy
> > requests by adding a new paragraph into the WFS driver document page
> > http://gdal.org/ogr/drv_wfs.html
> >
> > Using ogrinfo
> > =============
> > Ogrinfo tool tries to apply the spatial and attribute 
> filters from the
> > command
> > line and fetches then data from the WFS service. If no 
> fiters are given this
> > will lead to reading all features from a WFS data source 
> with a GetFeature
> > request. This can be a slow operation. Particularly when 
> ogrinfo is used with
> > the 'all layers' parameter (ogrinfo -al) it will make 
> sequential request for
> > fetching the contents of each feature type from the whole 
> WFS service. When
> > exhaustive layer info is not needed the use of special layers
> > WFSLayerMetadata
> > and WFSGetCapabilities offer a much faster access to WFS 
> service metadata.
> 
> Thanks. Makes sense to document the behaviour of current releases.
> 
> >
> > My last suggestion is to make third special layer or 
> actually set of special
> > layers. It could be named as WFSLayerSchema and it would 
> return the schema
> > that
> > is captured by making a DescribeFeatureType query. Usage 
> might be like
> > "ogrinfo
> > WFS:server.com/wfs WFSLayerSchema:[featureType]. Now the 
> only way see the
> > shema
> > is to use the heavy request.
> 
> I don't know if it would still be usefull if the slowness of 
> GetExtent() is
> solved. In addition, there are some caveats :
> * For example, Deegree WFS servers (at least the demo ones) 
> generally return a
> DescribeFeatureType with a lot of xs:include, but not 
> interesting content. For
> that you need to downloaded the referenced xsd in the 
> includes. The OGR WFS
> driver gives up at that point and just tries to establish the 
> layer definition
> by requesting just one feature.
> * Sometimes the GML driver isn't smart enough to understand 
> the schema (because
> it contains nested attributes, or of non-primitive types), so 
> it will also
> establish the layer definition by requesting just one 
> feature. So the actual
> layer definition returned by the driver can be a bit (or a 
> lot) different from
> the one advertized in DescribeFeatureType. (In which case 
> attribute or spatial
> filtering won't work due to the mismatch ...). WFS 
> administrators : you'd better
> stick to the GML SF-0 implementation profile ...

I agree, I totally forgot both the deegree server behaviour 
and complicated application schemas. But is it ever safe to  
guess the schema by investigating just the first feature? If the
attribute is not compulsory in the schema and the value 
happens to be empty then it is not included at all in the GML of
the first feature. Doesn't this mean that GML driver creates a 
schema without that attribute even the following features may 
have values for it?


-Jukka Rahkonen-
From even.rouault at mines-paris.org  Tue Jan 10 08:32:14 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 10 08:32:52 2012
Subject: [gdal-dev] Re: Are these WFS issues worth filing tickets?
In-Reply-To: <84446DEF76453C439E9E97E438E13A63062199@suutari.haapa.mmm.fi>
References: <loom.20120109T112948-231@post.gmane.org>
	<201201091947.05073.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A63062031@suutari.haapa.mmm.fi>
	<201201092236.30126.even.rouault@mines-paris.org>
	<loom.20120110T104123-116@post.gmane.org>
	<1326198862.4f0c304e0f623@imp.free.fr>
	<84446DEF76453C439E9E97E438E13A63062199@suutari.haapa.mmm.fi>
Message-ID: <1326202334.4f0c3ddee0b15@imp.free.fr>

> But is it ever safe to
> guess the schema by investigating just the first feature? If the
> attribute is not compulsory in the schema and the value
> happens to be empty then it is not included at all in the GML of
> the first feature. Doesn't this mean that GML driver creates a
> schema without that attribute even the following features may
> have values for it?

No, it is not completely reliable and you have perfectly identified the cases
where it doesn't work. The attributes that are not found in the first feature
will be ignored if found in the following features. The alternative would be ...
to downloaded the full GetFeature document ;-) (or better, manage to write a
better XSD parser)

>
>
> -Jukka Rahkonen-_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From knutfrodesoppel at hotmail.com  Tue Jan 10 08:36:01 2012
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Tue Jan 10 08:37:03 2012
Subject: [gdal-dev] Longitude and latitude raster bands
Message-ID: <jehes1$e4u$1@dough.gmane.org>

Hi,

For datasets with only GCPs for geolocation, is there any convenient and 
efficient method to extract latitude and longitude values as arrays of 
same size as the raster bands, using the Python API?

And similarly: is there an efficient method to return full arrays of the 
azimuth direction, e.g. defined as 0 for pixels where north is "up" (as 
it would always be in a lon-lat or Mercator projection).
This angle is relevant e.g. when one want to know the sensor look 
direction for satellite images.

Best regards from Knut-Frode

From nhatzop at gmail.com  Tue Jan 10 13:14:51 2012
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Tue Jan 10 13:15:02 2012
Subject: [gdal-dev] PCT Pallete
Message-ID: <CALDJGKDgd7BLaDaBXScrW6Oyeh419voOz5at=ZX26wv2=MLhqg@mail.gmail.com>

How you can create your own pallet for the tool rgb2pct from existing rgb
image.
What kind of technics are existing in order to define such a pallete?

--Nikos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120110/973d3f5b/attachment.html
From chaitanya.ch at gmail.com  Tue Jan 10 14:34:00 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jan 10 14:34:19 2012
Subject: [gdal-dev] PCT Pallete
In-Reply-To: <CALDJGKDgd7BLaDaBXScrW6Oyeh419voOz5at=ZX26wv2=MLhqg@mail.gmail.com>
References: <CALDJGKDgd7BLaDaBXScrW6Oyeh419voOz5at=ZX26wv2=MLhqg@mail.gmail.com>
Message-ID: <CAMKgpObXycp8h98hXtvRBV0ffv3YKVFUysP=nExjarxxnFRGUA@mail.gmail.com>

Nikos,

The easiest way to create your own palette is described in the
documentation of the script[1]. You can use any raster file with a palette
as a source of palette. In the example in the script's documentation, a
dummy VRT file with a color palette is created and used.

[1]:  http://www.gdal.org/rgb2pct.html

On Tue, Jan 10, 2012 at 11:44 PM, Nikolaos Hatzopoulos <nhatzop@gmail.com>wrote:

> How you can create your own pallet for the tool rgb2pct from existing rgb
> image.
> What kind of technics are existing in order to define such a pallete?
>
> --Nikos
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120111/37a87ebe/attachment.html
From warmerdam at pobox.com  Tue Jan 10 16:28:28 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 10 16:29:16 2012
Subject: [gdal-dev] Longitude and latitude raster bands
In-Reply-To: <jehes1$e4u$1@dough.gmane.org>
References: <jehes1$e4u$1@dough.gmane.org>
Message-ID: <CA+YzLBeQoyajjJ_mFteaMNtbASvfcTBBTobcs9aAAtxi_pTM7Q@mail.gmail.com>

On Tue, Jan 10, 2012 at 5:36 AM, Knut-Frode Dagestad
<knutfrodesoppel@hotmail.com> wrote:
> Hi,
>
> For datasets with only GCPs for geolocation, is there any convenient and
> efficient method to extract latitude and longitude values as arrays of same
> size as the raster bands, using the Python API?
>
> And similarly: is there an efficient method to return full arrays of the
> azimuth direction, e.g. defined as 0 for pixels where north is "up" (as it
> would always be in a lon-lat or Mercator projection).
> This angle is relevant e.g. when one want to know the sensor look direction
> for satellite images.

Knut-Fronde,

I am not aware of a preexisting solution for either operation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From brfr at metrico.lu  Wed Jan 11 02:50:35 2012
From: brfr at metrico.lu (Frank Broniewski)
Date: Wed Jan 11 02:51:19 2012
Subject: [gdal-dev] Compiling fails on Debian
In-Reply-To: <1326113062.4f0ae126e26d9@imp.free.fr>
References: <4F0AC2F3.30200@metrico.lu> <1326113062.4f0ae126e26d9@imp.free.fr>
Message-ID: <4F0D3F4B.4010708@metrico.lu>


Hi Even,

a verbose and helpful answer, as always. Point 3), the wrong symlink, 
seems to be my problem too. I am in the course of investigating how to 
resolve the problem. I just wanted to thank you for your help so far ...

Frank

Am 09.01.2012 13:44, schrieb Even Rouault:
> Frank,
>
> This looks like if the linking of the GDAL shared library was using the static
> version of libstdc++ (the message "recompile with -fPIC" is for libstdc++, not
> GDAL...) . A bit of googling shows that this error has been encountered with
> various software packages.
>
> Several tracks :
>
> 1) https://bugs.archlinux.org/task/14268 suggest to check that there is no
> /usr/lib/libstdc++.la around. If there's one, rename it, and try again.
>
> 2) Other links would suggest that
> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a library was incorrectly built,
> and not appropriate for being used by shared libraries.
>
> 3) http://code.google.com/p/staff/issues/detail?id=150 is also interesting :
>
> """
>> Very strange, but why g++ tries to link libstdc++ staticaly?
>
> That was the key question.
> With the help of strace (my favorite tool) I figured out that g++ fell back to
> the static lib (/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a) after getting
> an error when trying to access the shared lib
> (/usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.so). The shared lib was a broken
> symlink. The link apparently broke when I upgraded libstdc++6 to 4.6.1-4 without
> upgrading libstdc++6-4.4-dev at the same time.
> Sorry to have bothered you with this...
> """
>
> So perhaps start by upgrading your libstdc++6-4.4-dev package ?
>
> 4) If none of the above works and it is libtool related as the above would
> suggest, perhaps you could also try adding --without-libtool to your GDAL
> ./configure command line. The experience shows that it sometimes helps, but I'm
> not positive it will be the case here.
>
>> Hi,
>>
>> I try to compile gdal 1.9.0RC2 on my Debian machine
>>
>> brfr@devel:~/gdal$ uname -ra
>> Linux devel 2.6.32-5-amd64 #1 SMP Mon Oct 3 03:59:20 UTC 2011 x86_64
>> GNU/Linux
>>
>> but make exits with an error 2. The last messages before exiting:
>> /usr/bin/ld:
>> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a(functexcept.o):
>> relocation R_X86_64_32 against `std::bad_typeid::~bad_typeid()' can not
>> be used when making a shared object; recompile with -fPIC
>> /usr/lib/gcc/x86_64-linux-gnu/4.4.5/libstdc++.a: could not read symbols:
>> Bad value
>> collect2: ld returned 1 exit status
>> make[1]: *** [libgdal.la] Fehler 1
>> make[1]: Leaving directory `/home/brfr/gdal/gdal-1.9.0'
>> make: *** [check-lib] Fehler 2
>>
>> I tried already with the fPIC flag
>> brfr@devel:~/gdal$ export CXXFLAGS="-fPIC"
>> brfr@devel:~/gdal$ ./configure --with-python --with-geos=yes --enable-debug
>> brfr@devel:~/gdal$ make
>> but without success
>>
>>
>> Any hints?
>>
>> Frank
>>
>>
>>
>> --
>> Frank BRONIEWSKI
>>
>> METRICO s.?  r.l.
>> g??om??tres
>> technologies d'information g??ographique
>> rue des Romains 36
>> L-5433 NIEDERDONVEN
>>
>> t??l.: +352 26 74 94 - 28
>> fax.: +352 26 74 94 99
>> http://www.metrico.lu
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>


-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From timchab at yahoo.com  Wed Jan 11 03:09:19 2012
From: timchab at yahoo.com (AksakTimur)
Date: Wed Jan 11 03:09:30 2012
Subject: [gdal-dev] Problem w\ images with one raster band
Message-ID: <1326269359351-7175388.post@n2.nabble.com>

Hi, 

I'd like to use GDAL in my program to open raster images (MFC), but I have
one problem - when I try to open images with one raster band, these image
are drawn gray (or, in few cases, almost black). I' ve looked for a
solution, but haven't found any. 

 Thanks in advance. 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Problem-w-images-with-one-raster-band-tp7175388p7175388.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From timchab at yahoo.com  Wed Jan 11 03:11:18 2012
From: timchab at yahoo.com (Timur Chabayev)
Date: Wed Jan 11 03:14:26 2012
Subject: [gdal-dev] Problem w\images with one raster band
Message-ID: <1326269478.64652.YahooMailNeo@web114717.mail.gq1.yahoo.com>

Hi,?

I'd like to use GDAL in my program to open raster images (MFC), but I have one problem - when I try to open images with one raster band, these image are drawn gray (or, in few cases, almost black). I' ve looked for a solution, but haven't found any.?

?Thanks in advance.?

From ari.jolma at gmail.com  Wed Jan 11 04:30:56 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Jan 11 04:32:56 2012
Subject: [gdal-dev] Problem w\images with one raster band
In-Reply-To: <1326269478.64652.YahooMailNeo@web114717.mail.gq1.yahoo.com>
References: <1326269478.64652.YahooMailNeo@web114717.mail.gq1.yahoo.com>
Message-ID: <4F0D56D0.6060200@gmail.com>

On 01/11/2012 10:11 AM, Timur Chabayev wrote:
> Hi, 
>
> I'd like to use GDAL in my program to open raster images (MFC), but I have one problem - when I try to open images with one raster band, these image are drawn gray (or, in few cases, almost black). I' ve looked for a solution, but haven't found any.

Timur,

Would you elaborate more on how your program uses GDAL to open raster 
datasets? How do you control the visualization? I use GDAL in my program 
(Geoinformatica) to open raster datasets and it works fine - I make each 
band a separate layer and each layer has its own visualization control 
(grayscale, color table, ...).

Best regards,

Ari

>
>   Thanks in advance. 
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From timchab at yahoo.com  Wed Jan 11 05:08:56 2012
From: timchab at yahoo.com (AksakTimur)
Date: Wed Jan 11 05:09:46 2012
Subject: [gdal-dev] Re: Problem w\images with one raster band
In-Reply-To: <4F0D56D0.6060200@gmail.com>
References: <1326269478.64652.YahooMailNeo@web114717.mail.gq1.yahoo.com>
	<4F0D56D0.6060200@gmail.com>
Message-ID: <1326276536246-7175677.post@n2.nabble.com>

http://osgeo-org.1803224.n2.nabble.com/file/n7175677/Image.cpp Image.cpp 


Ari,


void CViewMain::OnDraw()
{
....
	if (m_image.IsOpen())
	{
	
m_image.Draw(hdcMem,m_image.m_XOff,m_image.m_YOff,m_image.m_imgWidth,m_image.m_imgHeight,
			m_image.m_xSrc,m_image.m_ySrc,m_image.m_srcWidth,m_image.m_srcHeight,
		1,1,1);
	}
....
}
void CViewMain::OnGdalOpen()
{

	LPCTSTR  szFilter = _T("Windows bitmap(*.bmp)|*.bmp|All Files
(*.*)|*.*||"); 
	CString filePath(_T("")); 
	CFileDialog fileOpenDlg(TRUE, _T("bmp"), NULL,OFN_HIDEREADONLY,szFilter); 
	if (fileOpenDlg.DoModal() == IDOK)  
	{ 
		VERIFY(filePath = fileOpenDlg.GetPathName()); 
	} 
 
	const char* pszFilename = CStringToCharUTF8(filePath);

	
	m_image.Open(filePath);

}

void CGDALImage::Draw(CDC *pDC, long xOff, long yOff, long width, long
height, long xSrc, long ySrc, long srcWidth, long srcHeight, long rband,
long gband, long bband)   
{   
       
    if(pDC==NULL)   
        return;    
    if (!m_pDataset)   
        return;   
   
    if(m_DC.m_hDC>0)   
        m_DC.Detach();   
    m_DC.Attach(pDC->m_hDC);   
    m_hdc=pDC->m_hDC;   
   
    if (rband == 0 || rband>m_bandNum)   
        rband = m_CurrentBand;   
    if (gband == 0 || gband>m_bandNum)   
        gband = m_CurrentBand;   
    if (bband == 0 || bband>m_bandNum)   
        bband = m_CurrentBand;   
   
    m_red=rband;   
    m_green=gband;   
    m_blue=bband;   
           
    if(xSrc<0 ||xSrc >m_imgWidth) xSrc=0;   
    if(ySrc<0 ||ySrc >m_imgHeight) ySrc=0;   
    if(srcWidth<1 || srcWidth > m_imgWidth) srcWidth=m_imgWidth;   
    if(srcHeight<1 || srcHeight > m_imgHeight) srcHeight=m_imgHeight;    
      m_XOff=xSrc;//????????????????????????   
      m_YOff=ySrc;   
      m_buffWidth=srcWidth;//????????????????   
      m_buffHeight=srcHeight;   
    if(double(width)/
double(height)>double(srcWidth)/double(srcHeight))//??????????????   
    {   
        double tmp=height*double(srcWidth)/double(srcHeight);   
        width=tmp-long(tmp)>0.5?long(tmp)+1:long(tmp);      
    }   
    else   
    {   
        double tmp=width*double(srcHeight)/double(srcWidth);   
        height=tmp-long(tmp)>0.5?long(tmp)+1:long(tmp);     
    }   
   
    m_WndWidth=width;   
    m_WnDHeight=height;   
    m_WndXOff=xOff;   
    m_WndYOff=yOff;   
     m_xSrc=xSrc;   
     m_ySrc=ySrc;   
     m_srcWidth=srcWidth;   
     m_srcHeight= srcHeight;   
   
    //byte* buf = new byte[srcWidth*srcHeight];   
    int dataType=0;   
    if(m_DataType=="Byte")dataType=0;   
    if(m_DataType=="UInt16")dataType=1;   
    if(m_DataType=="Int16")dataType=2;   
    if(m_DataType=="UInt32")dataType=3;   
    if(m_DataType=="Int32")dataType=4;   
    if(m_DataType=="Float32")dataType=5;   
    if(m_DataType=="Float64")dataType=6;   
    if(m_DataType=="CInt16")dataType=7;   
    if(m_DataType=="CInt32")dataType=8;   
    if(m_DataType=="CFloat32")dataType=9;   
    if(m_DataType=="CFloat64")dataType=10;   
       
    GDALRasterBand  *m_pBand=NULL;   
    byte* m_ByteBuff;   
    float* m_FloatBuff;   
    byte* buf =NULL;   
    float* buffFloat=NULL;   
    int x,y;   
    CDC dcMem;   
    dcMem.CreateCompatibleDC(pDC);   
    CBitmap bitmap;   
    bitmap.CreateCompatibleBitmap(pDC,width,height);   
    dcMem.SelectObject(&bitmap);   
    int i;   
    switch(dataType)   
    {   
        case 0://byte??byte        
               
                m_ByteBuff = new byte[width*height*3];             
                m_buffHeight=height;   
                m_buffWidth=width;                 
            m_buffSize=height*width*3;   
            buf = new byte[width*height];   
               
            m_pBand = m_pDataset->GetRasterBand(rband);     
            if (m_pBand)   
            {   
                if (CE_None==m_pBand->RasterIO( GF_Read, xSrc,ySrc,
srcWidth, srcHeight, buf, width,height, GDT_Byte, 0, 0 ))   
                {   
                    for ( i = 0; i < width*height; i ++)    
                        m_ByteBuff[3*i+2] = buf[i];   
                }   
            }      
            m_pBand = m_pDataset->GetRasterBand(gband);   
            if (m_pBand)   
            {      
                if (CE_None==m_pBand->RasterIO( GF_Read, xSrc,ySrc,
srcWidth, srcHeight, buf, width,height, GDT_Byte, 0, 0 ))   
                {   
                    for ( i = 0; i <width*height; i ++)    
                        m_ByteBuff[3*i+1] = buf[i];   
                }   
            }   
               
            m_pBand = m_pDataset->GetRasterBand(bband);   
            if (m_pBand)   
            {      
                if (CE_None==m_pBand->RasterIO( GF_Read, xSrc,ySrc,
srcWidth, srcHeight, buf, width,height, GDT_Byte,    0, 0 ))   
                {   
                    for ( i = 0; i < width*height; i ++)    
                        m_ByteBuff[3*i+0] = buf[i];   
                }   
            }   
            for ( x = 0; x < width; x ++)   
            {   
                for ( y = 0; y < height; y ++)    
                {   
                   
dcMem.SetPixel(x,y,RGB(m_ByteBuff[(y*width+x)*3+2],m_ByteBuff[(y*width+x)*3+1],m_ByteBuff[(y*width+x)*3+0]));   
                }   
            }   
            pDC->BitBlt(xOff,yOff,width,height,&dcMem,0,0,SRCCOPY);   
            delete buf;   
            delete  m_ByteBuff;   
            m_ByteBuff=NULL;   
            buf=NULL;   
            break;   
        default://??????????????float   
               
               
                m_FloatBuff = new float[width*height*3];               
                m_buffHeight=height;   
                m_buffWidth=width;   
               
            m_buffSize=height*width*3;   
            buffFloat = new float[width*height];   
               
            m_pBand = m_pDataset->GetRasterBand(rband);     
            if (m_pBand)   
            {   
                if (CE_None==m_pBand->RasterIO( GF_Read, xSrc,ySrc,
srcWidth, srcHeight, buffFloat, width,height, GDT_Float32, 0, 0 ))   
                {   
                    for ( i = 0; i  <width*height; i ++)    
                        m_FloatBuff[3*i+2] = buffFloat[i];   
                }   
            }      
            m_pBand = m_pDataset->GetRasterBand(gband);   
            if (m_pBand)   
            {      
                if (CE_None==m_pBand->RasterIO( GF_Read, xSrc,ySrc,
srcWidth, srcHeight, buffFloat, width,height, GDT_Float32, 0, 0 ))   
                {   
                    for ( i = 0; i <width*height; i ++)    
                        m_FloatBuff[3*i+1] = buffFloat[i];   
                }   
            }   
               
            m_pBand = m_pDataset->GetRasterBand(bband);   
            if (m_pBand)   
            {      
                if (CE_None==m_pBand->RasterIO( GF_Read, xSrc,ySrc,
srcWidth, srcHeight, buffFloat, width,height, GDT_Float32,   0, 0 ))   
                {   
                    for ( i = 0; i < width*height; i ++)    
                        m_FloatBuff[3*i+0] = buffFloat[i];   
                }   
            }   
            for ( x = 0; x < width; x ++)   
            {   
                for ( y = 0; y < height; y ++)    
                {   
                   
dcMem.SetPixel(x,y,RGB(m_FloatBuff[(y*width+x)*3+2],m_FloatBuff[(y*width+x)*3+1],m_FloatBuff[(y*width+x)*3+0]));   
                }   
            }   
            pDC->BitBlt(xOff,yOff,width,height,&dcMem,0,0,SRCCOPY);                 
            delete buffFloat;   
            delete  m_FloatBuff;   
            m_FloatBuff=NULL;   
            buffFloat=NULL;   
            break;   
    }   
       
  
}  


For imagesc with bands >= 3 the  OnDraw function works fine:
m_image.Draw(hdcMem,m_image.m_XOff,m_image.m_YOff,m_image.m_imgWidth,m_image.m_imgHeight,
			m_image.m_xSrc,m_image.m_ySrc,m_image.m_srcWidth,m_image.m_srcHeight,
		1,2,3);

Best Regards

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Problem-w-images-with-one-raster-band-tp7175398p7175677.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ari.jolma at gmail.com  Wed Jan 11 06:45:31 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Jan 11 06:47:10 2012
Subject: [gdal-dev] Re: Problem w\images with one raster band
In-Reply-To: <1326276536246-7175677.post@n2.nabble.com>
References: <1326269478.64652.YahooMailNeo@web114717.mail.gq1.yahoo.com>
	<4F0D56D0.6060200@gmail.com>
	<1326276536246-7175677.post@n2.nabble.com>
Message-ID: <4F0D765B.8000501@gmail.com>

oops, I seem to have asked off-list from Timur an example file.

Timur, the file you sent me has a color table, which you need to use for 
RGB lookup - the value in the raster is an index to the color LUT.

Best regards,

Ari

On 01/11/2012 12:08 PM, AksakTimur wrote:
> http://osgeo-org.1803224.n2.nabble.com/file/n7175677/Image.cpp Image.cpp
>
>
> Ari,
>
>
> void CViewMain::OnDraw()
> {
> ....
> 	if (m_image.IsOpen())
> 	{
> 	
> m_image.Draw(hdcMem,m_image.m_XOff,m_image.m_YOff,m_image.m_imgWidth,m_image.m_imgHeight,
> 			m_image.m_xSrc,m_image.m_ySrc,m_image.m_srcWidth,m_image.m_srcHeight,
> 		1,1,1);
> 	}
> ....
> }
> void CViewMain::OnGdalOpen()
> {
>
> 	LPCTSTR  szFilter = _T("Windows bitmap(*.bmp)|*.bmp|All Files
> (*.*)|*.*||");
> 	CString filePath(_T(""));
> 	CFileDialog fileOpenDlg(TRUE, _T("bmp"), NULL,OFN_HIDEREADONLY,szFilter);
> 	if (fileOpenDlg.DoModal() == IDOK)
> 	{
> 		VERIFY(filePath = fileOpenDlg.GetPathName());
> 	}
>
> 	const char* pszFilename = CStringToCharUTF8(filePath);
>
> 	
> 	m_image.Open(filePath);
>
> }
>
> void CGDALImage::Draw(CDC *pDC, long xOff, long yOff, long width, long
> height, long xSrc, long ySrc, long srcWidth, long srcHeight, long rband,
> long gband, long bband)
> {
>
>      if(pDC==NULL)
>          return;
>      if (!m_pDataset)
>          return;
>
>      if(m_DC.m_hDC>0)
>          m_DC.Detach();
>      m_DC.Attach(pDC->m_hDC);
>      m_hdc=pDC->m_hDC;
>
>      if (rband == 0 || rband>m_bandNum)
>          rband = m_CurrentBand;
>      if (gband == 0 || gband>m_bandNum)
>          gband = m_CurrentBand;
>      if (bband == 0 || bband>m_bandNum)
>          bband = m_CurrentBand;
>
>      m_red=rband;
>      m_green=gband;
>      m_blue=bband;
>
>      if(xSrc<0 ||xSrc>m_imgWidth) xSrc=0;
>      if(ySrc<0 ||ySrc>m_imgHeight) ySrc=0;
>      if(srcWidth<1 || srcWidth>  m_imgWidth) srcWidth=m_imgWidth;
>      if(srcHeight<1 || srcHeight>  m_imgHeight) srcHeight=m_imgHeight;
>        m_XOff=xSrc;//????????????????????????
>        m_YOff=ySrc;
>        m_buffWidth=srcWidth;//????????????????
>        m_buffHeight=srcHeight;
>      if(double(width)/
> double(height)>double(srcWidth)/double(srcHeight))//??????????????
>      {
>          double tmp=height*double(srcWidth)/double(srcHeight);
>          width=tmp-long(tmp)>0.5?long(tmp)+1:long(tmp);
>      }
>      else
>      {
>          double tmp=width*double(srcHeight)/double(srcWidth);
>          height=tmp-long(tmp)>0.5?long(tmp)+1:long(tmp);
>      }
>
>      m_WndWidth=width;
>      m_WnDHeight=height;
>      m_WndXOff=xOff;
>      m_WndYOff=yOff;
>       m_xSrc=xSrc;
>       m_ySrc=ySrc;
>       m_srcWidth=srcWidth;
>       m_srcHeight= srcHeight;
>
>      //byte* buf = new byte[srcWidth*srcHeight];
>      int dataType=0;
>      if(m_DataType=="Byte")dataType=0;
>      if(m_DataType=="UInt16")dataType=1;
>      if(m_DataType=="Int16")dataType=2;
>      if(m_DataType=="UInt32")dataType=3;
>      if(m_DataType=="Int32")dataType=4;
>      if(m_DataType=="Float32")dataType=5;
>      if(m_DataType=="Float64")dataType=6;
>      if(m_DataType=="CInt16")dataType=7;
>      if(m_DataType=="CInt32")dataType=8;
>      if(m_DataType=="CFloat32")dataType=9;
>      if(m_DataType=="CFloat64")dataType=10;
>
>      GDALRasterBand  *m_pBand=NULL;
>      byte* m_ByteBuff;
>      float* m_FloatBuff;
>      byte* buf =NULL;
>      float* buffFloat=NULL;
>      int x,y;
>      CDC dcMem;
>      dcMem.CreateCompatibleDC(pDC);
>      CBitmap bitmap;
>      bitmap.CreateCompatibleBitmap(pDC,width,height);
>      dcMem.SelectObject(&bitmap);
>      int i;
>      switch(dataType)
>      {
>          case 0://byte??byte
>
>                  m_ByteBuff = new byte[width*height*3];
>                  m_buffHeight=height;
>                  m_buffWidth=width;
>              m_buffSize=height*width*3;
>              buf = new byte[width*height];
>
>              m_pBand = m_pDataset->GetRasterBand(rband);
>              if (m_pBand)
>              {
>                  if (CE_None==m_pBand->RasterIO( GF_Read, xSrc,ySrc,
> srcWidth, srcHeight, buf, width,height, GDT_Byte, 0, 0 ))
>                  {
>                      for ( i = 0; i<  width*height; i ++)
>                          m_ByteBuff[3*i+2] = buf[i];
>                  }
>              }
>              m_pBand = m_pDataset->GetRasterBand(gband);
>              if (m_pBand)
>              {
>                  if (CE_None==m_pBand->RasterIO( GF_Read, xSrc,ySrc,
> srcWidth, srcHeight, buf, width,height, GDT_Byte, 0, 0 ))
>                  {
>                      for ( i = 0; i<width*height; i ++)
>                          m_ByteBuff[3*i+1] = buf[i];
>                  }
>              }
>
>              m_pBand = m_pDataset->GetRasterBand(bband);
>              if (m_pBand)
>              {
>                  if (CE_None==m_pBand->RasterIO( GF_Read, xSrc,ySrc,
> srcWidth, srcHeight, buf, width,height, GDT_Byte,    0, 0 ))
>                  {
>                      for ( i = 0; i<  width*height; i ++)
>                          m_ByteBuff[3*i+0] = buf[i];
>                  }
>              }
>              for ( x = 0; x<  width; x ++)
>              {
>                  for ( y = 0; y<  height; y ++)
>                  {
>
> dcMem.SetPixel(x,y,RGB(m_ByteBuff[(y*width+x)*3+2],m_ByteBuff[(y*width+x)*3+1],m_ByteBuff[(y*width+x)*3+0]));
>                  }
>              }
>              pDC->BitBlt(xOff,yOff,width,height,&dcMem,0,0,SRCCOPY);
>              delete buf;
>              delete  m_ByteBuff;
>              m_ByteBuff=NULL;
>              buf=NULL;
>              break;
>          default://??????????????float
>
>
>                  m_FloatBuff = new float[width*height*3];
>                  m_buffHeight=height;
>                  m_buffWidth=width;
>
>              m_buffSize=height*width*3;
>              buffFloat = new float[width*height];
>
>              m_pBand = m_pDataset->GetRasterBand(rband);
>              if (m_pBand)
>              {
>                  if (CE_None==m_pBand->RasterIO( GF_Read, xSrc,ySrc,
> srcWidth, srcHeight, buffFloat, width,height, GDT_Float32, 0, 0 ))
>                  {
>                      for ( i = 0; i<width*height; i ++)
>                          m_FloatBuff[3*i+2] = buffFloat[i];
>                  }
>              }
>              m_pBand = m_pDataset->GetRasterBand(gband);
>              if (m_pBand)
>              {
>                  if (CE_None==m_pBand->RasterIO( GF_Read, xSrc,ySrc,
> srcWidth, srcHeight, buffFloat, width,height, GDT_Float32, 0, 0 ))
>                  {
>                      for ( i = 0; i<width*height; i ++)
>                          m_FloatBuff[3*i+1] = buffFloat[i];
>                  }
>              }
>
>              m_pBand = m_pDataset->GetRasterBand(bband);
>              if (m_pBand)
>              {
>                  if (CE_None==m_pBand->RasterIO( GF_Read, xSrc,ySrc,
> srcWidth, srcHeight, buffFloat, width,height, GDT_Float32,   0, 0 ))
>                  {
>                      for ( i = 0; i<  width*height; i ++)
>                          m_FloatBuff[3*i+0] = buffFloat[i];
>                  }
>              }
>              for ( x = 0; x<  width; x ++)
>              {
>                  for ( y = 0; y<  height; y ++)
>                  {
>
> dcMem.SetPixel(x,y,RGB(m_FloatBuff[(y*width+x)*3+2],m_FloatBuff[(y*width+x)*3+1],m_FloatBuff[(y*width+x)*3+0]));
>                  }
>              }
>              pDC->BitBlt(xOff,yOff,width,height,&dcMem,0,0,SRCCOPY);
>              delete buffFloat;
>              delete  m_FloatBuff;
>              m_FloatBuff=NULL;
>              buffFloat=NULL;
>              break;
>      }
>
>
> }
>
>
> For imagesc with bands>= 3 the  OnDraw function works fine:
> m_image.Draw(hdcMem,m_image.m_XOff,m_image.m_YOff,m_image.m_imgWidth,m_image.m_imgHeight,
> 			m_image.m_xSrc,m_image.m_ySrc,m_image.m_srcWidth,m_image.m_srcHeight,
> 		1,2,3);
>
> Best Regards
>
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Problem-w-images-with-one-raster-band-tp7175398p7175677.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From max at geoinova.com  Wed Jan 11 07:01:58 2012
From: max at geoinova.com (Maksim Sestic)
Date: Wed Jan 11 07:02:07 2012
Subject: [gdal-dev] C# bindings - CreateCopy() progress delegate fails for
	WMS
Message-ID: <1326283318307-7175929.post@n2.nabble.com>

Hi all,

I'm experiencing issues while setting a progress delegate on CreateCopy()
for WMS driver. Here's the example:

Dim ds_in As Dataset = Gdal.Open("<GDAL_WMS><Service
name="WMS"><Version>1.3.0</Version><ServerUrl>http://wms.agiv.be/inspire/wms/orthobeeldvorming</ServerUrl><CRS>CRS:84</CRS><ImageFormat>image/png</ImageFormat><Transparent>True</Transparent><Layers>RGB</Layers><Styles></Styles></Service><DataWindow><UpperLeftX>3.76302095985856</UpperLeftX><UpperLeftY>50.9987228424621</UpperLeftY><LowerRightX>3.76629196690679</LowerRightX><LowerRightY>50.9968195506639</LowerRightY><SizeX>2439</SizeX><SizeY>2255</SizeY></DataWindow><Projection>EPSG:4326</Projection></GDAL_WMS>",
Access.GA_ReadOnly) 
...
Dim ds_out As Dataset = drv.CreateCopy("C:\Test.png", ds_in, 0, Nothing, New
Gdal.GDALProgressFuncDelegate(AddressOf ProgressFunc), "")

There's also callback function reporting progress:

Private Function ProgressFunc(Complete As Double, Message As System.IntPtr,
Data As System.IntPtr) As Integer
            MsgBox(Complete.ToString)
End Function

Above example fails with "libpng: No IDATs written into file" exception. 

But, if there's no callback function set:

ds_out = drv.CreateCopy("C:\Test.png", ds_in, 0, Nothing, Nothing, Nothing)

...everything works fine. What am I doing wrong here?

Regards,
Maksim Sestic

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/C-bindings-CreateCopy-progress-delegate-fails-for-WMS-tp7175929p7175929.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From max at geoinova.com  Wed Jan 11 07:04:40 2012
From: max at geoinova.com (Maksim Sestic)
Date: Wed Jan 11 07:05:01 2012
Subject: [gdal-dev] Re: C# bindings - CreateCopy() progress delegate fails
	for WMS
In-Reply-To: <1326283318307-7175929.post@n2.nabble.com>
References: <1326283318307-7175929.post@n2.nabble.com>
Message-ID: <1326283480187-7175940.post@n2.nabble.com>

Forgot to add - in above example there's PNG driver set using:

Dim drv As Driver = Gdal.GetDriverByName("PNG")

So, nothing really unusual...

Regards,
Maksim Sestic

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/C-bindings-CreateCopy-progress-delegate-fails-for-WMS-tp7175929p7175940.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From prairie99 at gmail.com  Wed Jan 11 11:43:44 2012
From: prairie99 at gmail.com (prairie Last)
Date: Wed Jan 11 11:44:08 2012
Subject: [gdal-dev] Link against spatialite
Message-ID: <CALPEyJFA0+hXOAjdUPxA2cHm3QT7GKLuePrxx0tz=76760Kg3A@mail.gmail.com>

I am trying to using the spatialite driver. According to the driver
documentation, ?creating or updating a spatialite database requires
explicit linking against SpatiaLite library?. How do I explicitly link
against the SpatiaLite library? Do I need to manually compile GDAL from
source?

 Wenxuan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120111/e2746fb2/attachment.html
From jluis at ualg.pt  Wed Jan 11 12:11:18 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Jan 11 12:11:34 2012
Subject: [gdal-dev] Problem w\images with one raster band
In-Reply-To: <1326269478.64652.YahooMailNeo@web114717.mail.gq1.yahoo.com>
References: <1326269478.64652.YahooMailNeo@web114717.mail.gq1.yahoo.com>
Message-ID: <4F0DC2B6.6080100@ualg.pt>

On 11-01-2012 08:11, Timur Chabayev wrote:
> Hi, 
>
> I'd like to use GDAL in my program to open raster images (MFC), but I have one problem - when I try to open images with one raster band, these image are drawn gray (or, in few cases, almost black). I' ve looked for a solution, but haven't found any. 
>
>   Thanks in advance.

Single band images need an associated color palette (some prefer to call 
it color map). Some programs just generate one default palette, that can 
be gray, when the file doesn't provide it. Maybe that's what is 
happening with you, or maybe the file has one that applied to band in 
question produces a dark image. Basically you must use one software that 
allows you to change the palette if the one you get doesn't please you.

Joaquim
From newmanw10 at gmail.com  Wed Jan 11 16:32:45 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Wed Jan 11 16:33:55 2012
Subject: [gdal-dev] Thread safe?
Message-ID: <CAD34qgn58TKjn_bL+auhFPKh_JDVzQpTd+SEshFpWO2nvaJxBg@mail.gmail.com>

I am using a third party lib (imageio-ext) to leverage gdal in java code.
I have noticed that the imageio-ext folks have wrapped the gdal.Open(..)
call in a synchronized method.  I am assuming this is to prevent
imageio-ext users from hanging themselves with regard to thread safety.

I have looked at the gdal FAQ with regards to thread safety and the last
release that it mentions additions is 1.3.0.

What is the current status of the 1.9.* build with regards to thread safety.

Thanks,
Billy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120111/f5631779/attachment.html
From even.rouault at mines-paris.org  Wed Jan 11 17:09:40 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jan 11 17:09:57 2012
Subject: [gdal-dev] Thread safe?
In-Reply-To: <CAD34qgn58TKjn_bL+auhFPKh_JDVzQpTd+SEshFpWO2nvaJxBg@mail.gmail.com>
References: <CAD34qgn58TKjn_bL+auhFPKh_JDVzQpTd+SEshFpWO2nvaJxBg@mail.gmail.com>
Message-ID: <201201112309.40239.even.rouault@mines-paris.org>

Le mercredi 11 janvier 2012 22:32:45, Billy Newman a ?crit :
> I am using a third party lib (imageio-ext) to leverage gdal in java code.
> I have noticed that the imageio-ext folks have wrapped the gdal.Open(..)
> call in a synchronized method.  I am assuming this is to prevent
> imageio-ext users from hanging themselves with regard to thread safety.
> 
> I have looked at the gdal FAQ with regards to thread safety and the last
> release that it mentions additions is 1.3.0.
> 
> What is the current status of the 1.9.* build with regards to thread
> safety.

The following is still true : "In particular for the situation where many 
threads are reading from GDAL datasets at once should work as long as no two 
threads access the same  GDALDataset object at the same time. However, in this 
scenario, no threads can be writing to GDAL while others are reading or chaos 
may ensue. "

I believe most common GDAL drivers should be safe. That includes drivers that 
don't depend on third party librairies (the driver is self contained in GDAL 
source tree), and drivers that depend on "classic" third-party libraries (such 
as PNG, JPEG, GIF). For other third party libraries (netCDF, HDF4, HDF5, ...), 
this depends on whether they are thread-safe themselves. There's at least one 
driver that is known to be non thread-safe : GRIB.

> 
> Thanks,
> Billy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120111/23e41c14/attachment.html
From even.rouault at mines-paris.org  Wed Jan 11 17:14:10 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jan 11 17:13:57 2012
Subject: [gdal-dev] Link against spatialite
In-Reply-To: <CALPEyJFA0+hXOAjdUPxA2cHm3QT7GKLuePrxx0tz=76760Kg3A@mail.gmail.com>
References: <CALPEyJFA0+hXOAjdUPxA2cHm3QT7GKLuePrxx0tz=76760Kg3A@mail.gmail.com>
Message-ID: <201201112314.10329.even.rouault@mines-paris.org>

Le mercredi 11 janvier 2012 17:43:44, prairie Last a ?crit :
> I am trying to using the spatialite driver. According to the driver
> documentation, ?creating or updating a spatialite database requires
> explicit linking against SpatiaLite library?. How do I explicitly link
> against the SpatiaLite library? Do I need to manually compile GDAL from
> source?

If you are on Windows, then you can use the builds at 
http://vbkto.dyndns.org/sdk/ . They include spatialite 3.0 support.

For Linux, ping the packagers of your distro. If you cannot wait, then yes, 
compile from source.

> 
>  Wenxuan
From JPalmer at linz.govt.nz  Wed Jan 11 21:37:38 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed Jan 11 21:41:32 2012
Subject: [gdal-dev] Loading data in MSSQL using ogr2ogr
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0E1360C23F@prdlsmmsg01.ad.linz.govt.nz>

Hi,

I'm trying to load a CSV file into an existing MSSQL 2008 table using ogr2ogr:

ogr2ogr -preserve_fid --debug on -append -skip
failures -f MSSQLSpatial "MSSQL:server=xxxx\SQL_SERVER_2008;Integrated Security=true;database=xxxx;tables=test_csv_table_1(shape)" test1.vrt -nln test_csv
_table_1 -s_srs epsg:4167  

The schema I've got is:

CREATE TABLE [dbo].[test_csv_table_1](
 [id] [int] NOT NULL,
 [appellation] [text] NULL,
 [affected_surveys] [text] NULL,
 [parcel_intent] [text] NOT NULL,
 [topology_type] [varchar](100) NOT NULL,
 [statutory_actions] [text] NULL,
 [land_district] [varchar](100) NOT NULL,
 [titles] [text] NULL,
 [survey_area] [numeric](20, 4) NULL,
 [calc_area] [numeric](20, 4) NOT NULL,
 [shape] [geometry] NULL,
PRIMARY KEY CLUSTERED 
(
 [id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]


This currently fails. The reason being that the SQL generated by ogr2ogr is:
 
SET IDENTITY_INSERT [dbo].[test_csv_table_1] ON;

INSERT INTO [dbo].[test_csv_table_1] (shape, [id], [appellation], [affected_surveys], [parcel_intent], [topology_type], [statutory_actions], [land_district], [titles], [survey_area], [calc_area]) VALUES (geometry::STGeomFromText('POLYGON ((172.7825528 -41.4211097333,172.78229796670001 -41.42127,172.7823694333 -41.4212575333,172.7825528 -41.4211097333))',4167).MakeValid(), 3621203, 'Sec 8 SO 14436', 'SO 14436', 'DCDB', 'Primary', '[Referenced] Stopped Road to be Amalgamated [Tadmor Valley Road, Nelson] New Zealand Gazette 2009 p 186 Stopped and Amalgamated with Land in CT NL72/70', 'Nelson', '464435',              50.0000,              38.3921);SET IDENTITY_INSERT [dbo].[test_csv_table_1] OFF;

The issue can be resolved if I change my table schema so the id field is an identity column, but I don't want to do this.

Is it possible to configure (or fix a bug) so the "SET IDENTITY_INSERT" SQL is not executed if the -preserve_fid option is used and the existing table does not have an identity field?

Cheers,
Jeremy
#####################################################################################

This message contains information, which is confidential and may be subject to legal privilege. 
If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message.
If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original message.
LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ.

Thank You.

#####################################################################################
From anton.korosov at nersc.no  Thu Jan 12 03:23:05 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Thu Jan 12 03:23:56 2012
Subject: [gdal-dev] Warping onto an image with only GCPs with Python
In-Reply-To: <4EEB5C14.8020705@nersc.no>
References: <jcd1aj$vil$1@dough.gmane.org> <4EEB5C14.8020705@nersc.no>
Message-ID: <4F0E9869.4080707@nersc.no>

Hello everyone!

Some time ago I've asked about problems with gdalwarp  (the e-mails 
below). I tried to utilize Python binding instead but got the same 
results. This brief script overlays the Europe map (GeoTIFF with 
geotransform) onto a MERIS images (PDS file with GCPs). But the result 
looks wrong again - the map is very small and apperas in the upper left 
corner (attached file).

GCPfile='MER_RR__2PNPDK20030809_100609_000022512018_00466_07534_3898.N1'
geotransformfile = 'europe.tif'
outfile = 'colocated.tif'

# open input datasets
src_ds = gdal.Open(geotransformfile)
dst_ds = gdal.Open(GCPfile)

# create writable copy of the destination image
driver = gdal.GetDriverByName( "GTiff" )
out_ds = driver.CreateCopy(outfile, dst_ds, 0 )

# reproject onto destination image with GCPs
gdal.ReprojectImage(src_ds, out_ds)

Can you please confirm that this is a bug in GDAL? If so I will issue a 
bug report.

Thank you in advance!
Anton

PS. If the GCPs in the destination image are replaced with a 
GeoTransfrom generated using the gdal.GCPsToGeoTransform() function, the 
result looks much better but the image is still rather distorted. Which 
is understandable because curvature of a MERIS images (given by GCPs) 
cannot be fully explained by few numbers in the geotransform.




On 12/16/2011 03:56 PM, Anton Korosov wrote:
> Hi!
>
> I'm not sure but probably my question is related to the one below.
> I'm trying to mosaic one MODIS images onto another with GDAL:
>
> gdal_translate
> HDF4_EOS:EOS_SWATH:"/Data/sat/GDAL_test/MYD021KM.A2011228.0925.005.2011229003113.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
> -b 1 /data/modis1.tif
>
> gdal_translate
> HDF4_EOS:EOS_SWATH:"/Data/sat/GDAL_test/MOD021KM.A2011229.1125.005.2011229195243.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
> -b 1 /data/modis2.tif
>
> gdalwarp modis1.tif modis2.tif
>
> Bu the results looks weird - the first image is on top of the second one
> but it is very small, distorted and in the top-left corner (though they
> cover approximately the same area).
>
> Do I understand right that such operation would work only when the
> target image georeference is defined by GeoTransform and not by GCPs?
>
> Can I also ask if it is a big work to include ability of GDAL to warp
> onto grid with GCPs (or RPC or geolocation array) ? And if it is planned
> in some future?
>
> Thank you!
> Anton
>
> On 12/15/2011 03:47 PM, Knut-Frode Dagestad wrote:
>> Hi,
>>
>> Hr?bjartur ?orsteinsson explained to me a near-hidden feature of GDAL,
>> namely to reproject one image onto the coverage of another.
>>
>> Given two images:
>> imageA.tiff
>> imageB.tiff
>>
>> Then an empty image can be created from image A with e.g.
>> $ gdal_translate -ot Float32 -scale 0 0 999 999 -a_nodata 999
>> imageA.tiff domainA.tiff
>>
>> And then imageB can be warped onto the extent of this image simply with:
>> $ gdalwarp imageB.tiff domainA.tiff
>>
>> domainA.tiff will then contain the data from imageB, exactly co-located
>> with imageA.
>>
>> The problem is that this only works when imageA contains a geotransform,
>> and not when it contains only GCPs.
>>
>>
>> So my question is:
>> Is there any workaround to warp data from one image onto another image
>> which is geolocated by GCPs only?
>>
>>
>>
>> With the -to option of gdalwarp it is possible to pass some parameters
>> to GDALCreateGenImgProjTransformer2(). In the documentation of this
>> function I find the following option:
>>
>> "METHOD: may have a value which is one of GEOTRANSFORM, GCP_POLYNOMIAL,
>> GCP_TPS, GEOLOC_ARRAY, RPC to force only one geolocation method to be
>> considered on the source dataset."
>> http://www.gdal.org/gdal__alg_8h.html#94cd172f78dbc41d6f407d662914f2e3
>>
>> But there is no corresponding option to force use of GCP_POLYNOMIAL for
>> the *destination* dataset. I guess this is a bad sign?
>>
>>
>> Thank you for any help!
>> Knut-Frode
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
A non-text attachment was scrubbed...
Name: colocated.png
Type: image/png
Size: 19680 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120112/0c8aeaad/colocated-0001.png
From jukka.rahkonen at mmmtike.fi  Thu Jan 12 04:57:37 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Jan 12 04:58:43 2012
Subject: [gdal-dev] Re: Are these WFS issues worth filing tickets?
References: <loom.20120109T112948-231@post.gmane.org>
	<201201091947.05073.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A63062031@suutari.haapa.mmm.fi>
	<201201092236.30126.even.rouault@mines-paris.org>
Message-ID: <loom.20120112T094509-223@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> > > I don't want to deny there is a problem when issuing ogrinfo, but I'm not
> > > sure that setting a default MAXFEATURES on client side is appropriate.
> > > The issue is more with GetExtent() and the fact that the reported extent
> > > in GetCapabilities is reported as WGS84 and not in the default SRS, or
> > > that the values are sometimes junk.
> > 
> > Sure they are often junk but doing getFeature is an expensive way for
> > getting the correct information. Ald also this result may be unreliable if
> > it is interpreted to describe the whole WFS feature type it getFeature
> > request hits the server side maxFeatures limit. In this case ogrinfo can
> > only report the extents of the first [maxFeatures] of the feature type.
> > 
> > How about having an option -TRUST_GETCAPABILITIES=TRUE and use it as
> > a default value? So number of feature could be examined with
> > resulttype=hits and extents could be taken as they are in the
> > getCapabilities. Or perhaps they could be reported as unknown if
> > reprojecting the lat/lon bounding box feels bad or is
> > inaccurate/impossible? Extents are not always so interesting.
> > 
> 
> I also somehow imagined that. Perhaps you could file a ticket about that, 
so it 
> can be eventually considered later.

I filed a ticket #4434 http://trac.osgeo.org/gdal/ticket/4434. It did not 
get immediate acceptance for understandable reasons because ogrinfo is a 
general tool which treats all the data sources in a similar way. However, 
WFS is a web service and it has some differences to other data sources. 
Network connection to databases has some similarities but then user 
needs to have a username and password from the database administrator.
Therefore a feedback from doing silly things in a database tends to be 
guaranteed, prompt and bitter. I do not know if db admins are alike 
everythere, though.

With an internat service the bandwidth has always some limits both on 
the server and client sides.  If user happens to use a mobile internet 
connection it can be also rather expensive. With my operator the cost 
seems to vary  2.40-10.24 euros per megabyte depending on the country.

For me "ogrinfo -so" means a standard tool for checking a layers 
metadata. Let's see what this quick look with ogrinfo -so means with 
one of my WFS feature type. The WFS server is running on a small Linux 
virtual server with 10 Mb line up. Feature type has 462208 features 
with lots of attribute data. I do have also bigger feature types than 
this one.

Ogrinfo -so is sending 4 requests. Here are the requests, data received 
and the time it took. 

GetCapabilities            32896 bytes in 2   seconds
DescribeFeatureType         6745 bytes in 3   seconds
GetFeature&resultType=hits   843 bytes in 90  seconds 
GetFeature             386446513 bytes in 590 seconds 

The last request is needed for getting one piece of metadata, the exact 
extents of the layer. The request transfers 386 megabytes of data for 
ogrinfo and is will be discarded after the extents have been calculated. 
With a fast network when the speed of the server side sets the limits 
finalising the reques takes nine and a half minute. If I were stupid and 
sent the request through mobile net while traveling in Europe it would 
have cost me 926 euros. If I were in Vietnam I would see in the next 
bill a price of 3952 euros.

Now the question is that isn't "ogrinfo -so" the standard way for checking 
just the  metadata of a layer with GDAL tools? Documentation says "Summary 
Only: supress listing of features, show only the summary information 
like projection, schema, feature count and extents". If answer is yes, 
the next question is that is it reasonable that with a WFS driver this 
command is reading the whole feature type from the service and all that 
just for calculating the exact extents for the layer. One must remember 
that the Lat/Lon extents have already been advertised within 2 seconds 
in the response to the first GetCapabilities request. I would say that 
the default should be not to read the features. In most cases I would 
rather live without exact extents. If GetFeature is needed it should use 
a MAXFEATURES parameter with some reasonable small value by default. The 
summary metadata query should fire GetFeature without any feature count 
limits only if user specifically selects that option.

If this is impossible to do with ogrinfo then perhaps there could be 
another tool "wfsinfo"? Or more feature rich "owsinfo" for giving 
optimised reports created in a reasonable way from various OGC web 
services (WMS, WFS, WCS, WPS)?

Regards,

-Jukka Rahkonen-

From szekerest at gmail.com  Thu Jan 12 05:22:48 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jan 12 05:23:21 2012
Subject: [gdal-dev] Loading data in MSSQL using ogr2ogr
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0E1360C23F@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0E1360C23F@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <CACALY+T=B_SVtV2KQpxEM1Z55am8m2hATLMc-twc=Wqru8bhwQ@mail.gmail.com>

Jeremy,

This seems to be a reasonable requirement. You should create a ticket for
this issue at:
http://trac.osgeo.org/gdal/newticket

Best regards,

Tamas



2012/1/12 Jeremy Palmer <JPalmer@linz.govt.nz>

> Hi,
>
> I'm trying to load a CSV file into an existing MSSQL 2008 table using
> ogr2ogr:
>
> ogr2ogr -preserve_fid --debug on -append -skip
> failures -f MSSQLSpatial "MSSQL:server=xxxx\SQL_SERVER_2008;Integrated
> Security=true;database=xxxx;tables=test_csv_table_1(shape)" test1.vrt -nln
> test_csv
> _table_1 -s_srs epsg:4167
>
> The schema I've got is:
>
> CREATE TABLE [dbo].[test_csv_table_1](
>  [id] [int] NOT NULL,
>  [appellation] [text] NULL,
>  [affected_surveys] [text] NULL,
>  [parcel_intent] [text] NOT NULL,
>  [topology_type] [varchar](100) NOT NULL,
>  [statutory_actions] [text] NULL,
>  [land_district] [varchar](100) NOT NULL,
>  [titles] [text] NULL,
>  [survey_area] [numeric](20, 4) NULL,
>  [calc_area] [numeric](20, 4) NOT NULL,
>  [shape] [geometry] NULL,
> PRIMARY KEY CLUSTERED
> (
>  [id] ASC
> )WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY =
> OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
> ) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
>
>
> This currently fails. The reason being that the SQL generated by ogr2ogr
> is:
>
> SET IDENTITY_INSERT [dbo].[test_csv_table_1] ON;
>
> INSERT INTO [dbo].[test_csv_table_1] (shape, [id], [appellation],
> [affected_surveys], [parcel_intent], [topology_type], [statutory_actions],
> [land_district], [titles], [survey_area], [calc_area]) VALUES
> (geometry::STGeomFromText('POLYGON ((172.7825528
> -41.4211097333,172.78229796670001 -41.42127,172.7823694333
> -41.4212575333,172.7825528 -41.4211097333))',4167).MakeValid(), 3621203,
> 'Sec 8 SO 14436', 'SO 14436', 'DCDB', 'Primary', '[Referenced] Stopped Road
> to be Amalgamated [Tadmor Valley Road, Nelson] New Zealand Gazette 2009 p
> 186 Stopped and Amalgamated with Land in CT NL72/70', 'Nelson', '464435',
>            50.0000,              38.3921);SET IDENTITY_INSERT
> [dbo].[test_csv_table_1] OFF;
>
> The issue can be resolved if I change my table schema so the id field is
> an identity column, but I don't want to do this.
>
> Is it possible to configure (or fix a bug) so the "SET IDENTITY_INSERT"
> SQL is not executed if the -preserve_fid option is used and the existing
> table does not have an identity field?
>
> Cheers,
> Jeremy
>
> #####################################################################################
>
> This message contains information, which is confidential and may be
> subject to legal privilege.
> If you are not the intended recipient, you must not peruse, use,
> disseminate, distribute or copy this message.
> If you have received this message in error, please notify us immediately
> (Phone 0800 665 463 or info@linz.govt.nz) and destroy the original
> message.
> LINZ accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ.
>
> Thank You.
>
>
> #####################################################################################
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120112/34e5d0cd/attachment.html
From chapmanm at pixia.com  Thu Jan 12 21:30:22 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Thu Jan 12 21:31:08 2012
Subject: [gdal-dev] Possible bug in OGRSpatialReference:: importFromWkt()
Message-ID: <a4b6abab.000012f8.00000002@CHAPMANM7S>

Frank,

 

I think there is a bug in OGRSpatialReference::importFromWkt().  I did the
following: 

 

char* wkt = NULL;

sourceSRS.exportToWkt(&wkt);

targetSRS.importFromWkt(&wkt);

CPLFree(wkt);

 

It blows up on the CPLFree().  Why you might ask.  Because it looks like
the importFromWkt() increments the pointer as it's parsing it so by the
time it returns the pointer you passed in no longer points to the
beginning of the array of char* pointers. Instead, it points to the end of
the memory block.  Shouldn't you be assigning a temp pointer to the start
of the array before you start parsing it?  If you made it a const char**
parameter this wouldn't happen.  

 

Am I correct or did I use the functions incorrectly?

 

Best regards,

Martin

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120112/4d8aa4a4/attachment.html
From rush at winkey.org  Thu Jan 12 21:45:13 2012
From: rush at winkey.org (Brian Case)
Date: Thu Jan 12 21:47:25 2012
Subject: [gdal-dev] Warping onto an image with only GCPs with Python
In-Reply-To: <4F0E9869.4080707@nersc.no>
References: <jcd1aj$vil$1@dough.gmane.org> <4EEB5C14.8020705@nersc.no>
	<4F0E9869.4080707@nersc.no>
Message-ID: <1326422714.30920.57.camel@octopi>

Anton

EOS_SWATH has 2 geolocation arrays, you might try the -geoloc switch to
gdalwarp, otherwise it creates a handfull of gcps from the arrays, if
you get a error about points failing to transform, set the output extent
with the -te switch.

also you could try the swath2grid application in
https://lpdaac.usgs.gov/tools/modis_reprojection_tool_swath

Brian


On Thu, 2012-01-12 at 09:23 +0100, Anton Korosov wrote:
> Hello everyone!
> 
> Some time ago I've asked about problems with gdalwarp  (the e-mails 
> below). I tried to utilize Python binding instead but got the same 
> results. This brief script overlays the Europe map (GeoTIFF with 
> geotransform) onto a MERIS images (PDS file with GCPs). But the result 
> looks wrong again - the map is very small and apperas in the upper left 
> corner (attached file).
> 
> GCPfile='MER_RR__2PNPDK20030809_100609_000022512018_00466_07534_3898.N1'
> geotransformfile = 'europe.tif'
> outfile = 'colocated.tif'
> 
> # open input datasets
> src_ds = gdal.Open(geotransformfile)
> dst_ds = gdal.Open(GCPfile)
> 
> # create writable copy of the destination image
> driver = gdal.GetDriverByName( "GTiff" )
> out_ds = driver.CreateCopy(outfile, dst_ds, 0 )
> 
> # reproject onto destination image with GCPs
> gdal.ReprojectImage(src_ds, out_ds)
> 
> Can you please confirm that this is a bug in GDAL? If so I will issue a 
> bug report.
> 
> Thank you in advance!
> Anton
> 
> PS. If the GCPs in the destination image are replaced with a 
> GeoTransfrom generated using the gdal.GCPsToGeoTransform() function, the 
> result looks much better but the image is still rather distorted. Which 
> is understandable because curvature of a MERIS images (given by GCPs) 
> cannot be fully explained by few numbers in the geotransform.
> 
> 
> 
> 
> On 12/16/2011 03:56 PM, Anton Korosov wrote:
> > Hi!
> >
> > I'm not sure but probably my question is related to the one below.
> > I'm trying to mosaic one MODIS images onto another with GDAL:
> >
> > gdal_translate
> > HDF4_EOS:EOS_SWATH:"/Data/sat/GDAL_test/MYD021KM.A2011228.0925.005.2011229003113.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
> > -b 1 /data/modis1.tif
> >
> > gdal_translate
> > HDF4_EOS:EOS_SWATH:"/Data/sat/GDAL_test/MOD021KM.A2011229.1125.005.2011229195243.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
> > -b 1 /data/modis2.tif
> >
> > gdalwarp modis1.tif modis2.tif
> >
> > Bu the results looks weird - the first image is on top of the second one
> > but it is very small, distorted and in the top-left corner (though they
> > cover approximately the same area).
> >
> > Do I understand right that such operation would work only when the
> > target image georeference is defined by GeoTransform and not by GCPs?
> >
> > Can I also ask if it is a big work to include ability of GDAL to warp
> > onto grid with GCPs (or RPC or geolocation array) ? And if it is planned
> > in some future?
> >
> > Thank you!
> > Anton
> >
> > On 12/15/2011 03:47 PM, Knut-Frode Dagestad wrote:
> >> Hi,
> >>
> >> Hr?bjartur ?orsteinsson explained to me a near-hidden feature of GDAL,
> >> namely to reproject one image onto the coverage of another.
> >>
> >> Given two images:
> >> imageA.tiff
> >> imageB.tiff
> >>
> >> Then an empty image can be created from image A with e.g.
> >> $ gdal_translate -ot Float32 -scale 0 0 999 999 -a_nodata 999
> >> imageA.tiff domainA.tiff
> >>
> >> And then imageB can be warped onto the extent of this image simply with:
> >> $ gdalwarp imageB.tiff domainA.tiff
> >>
> >> domainA.tiff will then contain the data from imageB, exactly co-located
> >> with imageA.
> >>
> >> The problem is that this only works when imageA contains a geotransform,
> >> and not when it contains only GCPs.
> >>
> >>
> >> So my question is:
> >> Is there any workaround to warp data from one image onto another image
> >> which is geolocated by GCPs only?
> >>
> >>
> >>
> >> With the -to option of gdalwarp it is possible to pass some parameters
> >> to GDALCreateGenImgProjTransformer2(). In the documentation of this
> >> function I find the following option:
> >>
> >> "METHOD: may have a value which is one of GEOTRANSFORM, GCP_POLYNOMIAL,
> >> GCP_TPS, GEOLOC_ARRAY, RPC to force only one geolocation method to be
> >> considered on the source dataset."
> >> http://www.gdal.org/gdal__alg_8h.html#94cd172f78dbc41d6f407d662914f2e3
> >>
> >> But there is no corresponding option to force use of GCP_POLYNOMIAL for
> >> the *destination* dataset. I guess this is a bad sign?
> >>
> >>
> >> Thank you for any help!
> >> Knut-Frode
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From chapmanm at pixia.com  Thu Jan 12 22:11:13 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Thu Jan 12 22:11:53 2012
Subject: [gdal-dev] Problem w\images with one raster band
In-Reply-To: <4F0DC2B6.6080100@ualg.pt>
References: <1326269478.64652.YahooMailNeo@web114717.mail.gq1.yahoo.com>
	<4F0DC2B6.6080100@ualg.pt>
Message-ID: <9ecdb495.000012f8.00000008@CHAPMANM7S>

An easy way to handle this would be to create a 3 band bitmap using the
windows gdi, in other words the bitmapinfo bits should be 24 (8 bits for
each band).  Then use the single band from the source image for every band
.  Red, green and blue.  Otherwise you will have to handle palletted like
Joaquim states.

Gonna look something like this if you have four bands:

// number of target output bands
Int numBands = 3;

// create new buffer to hold 3 band data
BYTE* targetBytes = new BYTE[stride * sourceRect.height * numBands]; 
memset(targetBytes, 0, stride * sourceRect.height * numBands);

// get pointers to first scanline (row) of each data buffer
UCHAR* sourceScan0 = (UCHAR*) sourceBytes;
UCHAR* targetScan0 = (UCHAR*) targetBytes;

// color table
GDALColorEntry colorEntry;
GDALColorTable* colorTable = band->GetColorTable();

// loop through each row of data
for (int y = 0; y < sourceRect.height; y++) 
{
	// loop through each pixel in paletted image and set the rgb
values of the new buffer
	for (UINT x = 0; x < stride; x++) 
	{
		// get color entry
		colorTable->GetColorEntryAsRGB((int) sourceScan0[0],
&colorEntry);

		// transfer pixels - note windows wants BGR
		targetScan0[0] = (UCHAR) colorEntry.c3;
		targetScan0[1] = (UCHAR) colorEntry.c2;
		targetScan0[2] = (UCHAR) colorEntry.c1;
		//targetScan0[3] = (UCHAR) colorEntry.c4;    // add this
if you have four bands

		// increment scanline pointers to the next pixel
		targetScan0 += numBands;
		sourceScan0 += 1;
	}
}

BITMAPINFO bmi;
bmi.bmiHeader.biSize = sizeof(BITMAPINFOHEADER);
bmi.bmiHeader.biWidth  = (LONG) stride;
bmi.bmiHeader.biHeight = (LONG) - sourceRect.height;  // added the
negative to flip the bitmap in my case
bmi.bmiHeader.biPlanes = 1;
bmi.bmiHeader.biBitCount = (numBands * 8);  // 8 bits times each band, in
this case it is 3, 8 is only good for 8 bit data though, if you have 16
bit then change 8 to 16
bmi.bmiHeader.biCompression = BI_RGB; 
bmi.bmiHeader.biSizeImage = (DWORD) (stride * sourceRect.height *
numBands) 
bmi.bmiHeader.biXPelsPerMeter = 0;
bmi.bmiHeader.biYPelsPerMeter = 0;
bmi.bmiHeader.biClrUsed = 0;
bmi.bmiHeader.biClrImportant = 0;

SetStretchBltMode(memoryDC, HALFTONE);
POINT brushOrg;
SetBrushOrgEx(memoryDC, drawRect.x, drawRect.y, &brushOrg);

StretchDIBits(memoryDC,  drawRect.x, drawRect.y, drawRect.width,
drawRect.height, 0, 0, sourceRect.width, sourceRect.height, targetBytes,
&bmi, DIB_RGB_COLORS, SRCCOPY);

SetStretchBltMode(memoryDC, stretchBltMode);
SetBrushOrgEx(memoryDC, brushOrg.x, brushOrg.y, NULL);

delete [] targetBytes;
targetBytes = NULL;

By the way, I just wrote this quick so there may be bugs.  If so, let me
know and I will compile it and fix it.

Marty

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Joaquim Luis
Sent: Wednesday, January 11, 2012 10:11 AM
To: Timur Chabayev
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Problem w\images with one raster band

On 11-01-2012 08:11, Timur Chabayev wrote:
> Hi,
>
> I'd like to use GDAL in my program to open raster images (MFC), but I
have one problem - when I try to open images with one raster band, these
image are drawn gray (or, in few cases, almost black). I' ve looked for a
solution, but haven't found any. 
>
>   Thanks in advance.

Single band images need an associated color palette (some prefer to call
it color map). Some programs just generate one default palette, that can
be gray, when the file doesn't provide it. Maybe that's what is happening
with you, or maybe the file has one that applied to band in question
produces a dark image. Basically you must use one software that allows you
to change the palette if the one you get doesn't please you.

Joaquim
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From chapmanm at pixia.com  Thu Jan 12 22:14:01 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Thu Jan 12 22:14:49 2012
Subject: [gdal-dev] Problem w\images with one raster band
In-Reply-To: <9ecdb495.000012f8.00000008@CHAPMANM7S>
References: <1326269478.64652.YahooMailNeo@web114717.mail.gq1.yahoo.com>	<4F0DC2B6.6080100@ualg.pt>
	<9ecdb495.000012f8.00000008@CHAPMANM7S>
Message-ID: <4ea779a6.000012f8.00000011@CHAPMANM7S>

Sorry, I said four bands when I meant three.

Marty

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Martin Chapman
Sent: Thursday, January 12, 2012 8:11 PM
To: 'Joaquim Luis'; 'Timur Chabayev'
Cc: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Problem w\images with one raster band

An easy way to handle this would be to create a 3 band bitmap using the
windows gdi, in other words the bitmapinfo bits should be 24 (8 bits for
each band).  Then use the single band from the source image for every band
.  Red, green and blue.  Otherwise you will have to handle palletted like
Joaquim states.

Gonna look something like this if you have four bands:

// number of target output bands
Int numBands = 3;

// create new buffer to hold 3 band data
BYTE* targetBytes = new BYTE[stride * sourceRect.height * numBands];
memset(targetBytes, 0, stride * sourceRect.height * numBands);

// get pointers to first scanline (row) of each data buffer
UCHAR* sourceScan0 = (UCHAR*) sourceBytes;
UCHAR* targetScan0 = (UCHAR*) targetBytes;

// color table
GDALColorEntry colorEntry;
GDALColorTable* colorTable = band->GetColorTable();

// loop through each row of data
for (int y = 0; y < sourceRect.height; y++) {
	// loop through each pixel in paletted image and set the rgb
values of the new buffer
	for (UINT x = 0; x < stride; x++) 
	{
		// get color entry
		colorTable->GetColorEntryAsRGB((int) sourceScan0[0],
&colorEntry);

		// transfer pixels - note windows wants BGR
		targetScan0[0] = (UCHAR) colorEntry.c3;
		targetScan0[1] = (UCHAR) colorEntry.c2;
		targetScan0[2] = (UCHAR) colorEntry.c1;
		//targetScan0[3] = (UCHAR) colorEntry.c4;    // add this
if you have four bands

		// increment scanline pointers to the next pixel
		targetScan0 += numBands;
		sourceScan0 += 1;
	}
}

BITMAPINFO bmi;
bmi.bmiHeader.biSize = sizeof(BITMAPINFOHEADER); bmi.bmiHeader.biWidth  =
(LONG) stride; bmi.bmiHeader.biHeight = (LONG) - sourceRect.height;  //
added the negative to flip the bitmap in my case bmi.bmiHeader.biPlanes =
1; bmi.bmiHeader.biBitCount = (numBands * 8);  // 8 bits times each band,
in this case it is 3, 8 is only good for 8 bit data though, if you have 16
bit then change 8 to 16 bmi.bmiHeader.biCompression = BI_RGB;
bmi.bmiHeader.biSizeImage = (DWORD) (stride * sourceRect.height *
numBands)
bmi.bmiHeader.biXPelsPerMeter = 0;
bmi.bmiHeader.biYPelsPerMeter = 0;
bmi.bmiHeader.biClrUsed = 0;
bmi.bmiHeader.biClrImportant = 0;

SetStretchBltMode(memoryDC, HALFTONE);
POINT brushOrg;
SetBrushOrgEx(memoryDC, drawRect.x, drawRect.y, &brushOrg);

StretchDIBits(memoryDC,  drawRect.x, drawRect.y, drawRect.width,
drawRect.height, 0, 0, sourceRect.width, sourceRect.height, targetBytes,
&bmi, DIB_RGB_COLORS, SRCCOPY);

SetStretchBltMode(memoryDC, stretchBltMode); SetBrushOrgEx(memoryDC,
brushOrg.x, brushOrg.y, NULL);

delete [] targetBytes;
targetBytes = NULL;

By the way, I just wrote this quick so there may be bugs.  If so, let me
know and I will compile it and fix it.

Marty

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Joaquim Luis
Sent: Wednesday, January 11, 2012 10:11 AM
To: Timur Chabayev
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Problem w\images with one raster band

On 11-01-2012 08:11, Timur Chabayev wrote:
> Hi,
>
> I'd like to use GDAL in my program to open raster images (MFC), but I
have one problem - when I try to open images with one raster band, these
image are drawn gray (or, in few cases, almost black). I' ve looked for a
solution, but haven't found any. 
>
>   Thanks in advance.

Single band images need an associated color palette (some prefer to call
it color map). Some programs just generate one default palette, that can
be gray, when the file doesn't provide it. Maybe that's what is happening
with you, or maybe the file has one that applied to band in question
produces a dark image. Basically you must use one software that allows you
to change the palette if the one you get doesn't please you.

Joaquim
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Thu Jan 12 22:17:14 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 12 22:17:24 2012
Subject: [gdal-dev] Possible bug in OGRSpatialReference:: importFromWkt()
In-Reply-To: <a4b6abab.000012f8.00000002@CHAPMANM7S>
References: <a4b6abab.000012f8.00000002@CHAPMANM7S>
Message-ID: <CA+YzLBep4F-=XwVT4Ptnp+BQxY_4+20+gVCFCNumLdBAEB9SKA@mail.gmail.com>

On Thu, Jan 12, 2012 at 6:30 PM, Martin Chapman <chapmanm@pixia.com> wrote:
> Frank,
>
>
>
> I think there is a bug in OGRSpatialReference::importFromWkt().? I did the
> following:
>
>
>
> char* wkt = NULL;
>
> sourceSRS.exportToWkt(&wkt);
>
> targetSRS.importFromWkt(&wkt);
>
> CPLFree(wkt);
>
>
>
> It blows up on the CPLFree().? Why you might ask.? Because it looks like the
> importFromWkt() increments the pointer as it?s parsing it so by the time it
> returns the pointer you passed in no longer points to the beginning of the
> array of char* pointers. Instead, it points to the end of the memory block.
> Shouldn?t you be assigning a temp pointer to the start of the array before
> you start parsing it?? If you made it a const char** parameter this wouldn?t
> happen.


Martin,

The behavior is intentional though quite possibly ill advised.

The original intent was that the modified pointer after the import
would indicate what had not been consumed by the import
parser.  But in practice this has just make for a messy to use
API and generally speaking callers have to setup their own
temporary pointer for the import.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From chapmanm at pixia.com  Thu Jan 12 22:20:02 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Thu Jan 12 22:20:18 2012
Subject: [gdal-dev] Possible bug in OGRSpatialReference:: importFromWkt()
In-Reply-To: <CA+YzLBep4F-=XwVT4Ptnp+BQxY_4+20+gVCFCNumLdBAEB9SKA@mail.gmail.com>
References: <a4b6abab.000012f8.00000002@CHAPMANM7S>
	<CA+YzLBep4F-=XwVT4Ptnp+BQxY_4+20+gVCFCNumLdBAEB9SKA@mail.gmail.com>
Message-ID: <0f8fdcc4.00001448.00000002@CHAPMANM7S>

Frank,

Ok, I'm cool with that, I just wanted to make sure it wasn't a bug.

Thanks for the quick response!

Best regards,
Martin

-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: Thursday, January 12, 2012 8:17 PM
To: Martin Chapman
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Possible bug in OGRSpatialReference::
importFromWkt()

On Thu, Jan 12, 2012 at 6:30 PM, Martin Chapman <chapmanm@pixia.com>
wrote:
> Frank,
>
>
>
> I think there is a bug in OGRSpatialReference::importFromWkt().? I did
> the
> following:
>
>
>
> char* wkt = NULL;
>
> sourceSRS.exportToWkt(&wkt);
>
> targetSRS.importFromWkt(&wkt);
>
> CPLFree(wkt);
>
>
>
> It blows up on the CPLFree().? Why you might ask.? Because it looks
> like the
> importFromWkt() increments the pointer as it?s parsing it so by the
> time it returns the pointer you passed in no longer points to the
> beginning of the array of char* pointers. Instead, it points to the end
of the memory block.
> Shouldn?t you be assigning a temp pointer to the start of the array
> before you start parsing it?? If you made it a const char** parameter
> this wouldn?t happen.


Martin,

The behavior is intentional though quite possibly ill advised.

The original intent was that the modified pointer after the import would
indicate what had not been consumed by the import parser.  But in practice
this has just make for a messy to use API and generally speaking callers
have to setup their own temporary pointer for the import.

Best regards,
--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up?? | Frank Warmerdam,
warmerdam@pobox.com light and sound - activate the windows |
http://pobox.com/~warmerdam and watch the world go round - Rush? ? |
Geospatial Software Developer
From anton.korosov at nersc.no  Fri Jan 13 04:33:59 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Fri Jan 13 04:34:45 2012
Subject: [gdal-dev] Warping onto an image with only GCPs with Python
Message-ID: <4F0FFA87.5020508@nersc.no>

Dear Brian,

thank you very much for your reply!

The '-geoloc' switch does produce the error about points failing to 
transform but the principal limitation is that I cannot use the '-te' 
switch because I cannot know the extent in advance.

My task is to overlay one image (either projected like e.g. Europe map 
or unprojected like e.g. L1B MERIS or MODIS image) onto another 
UNprojected image (MODIS or MERIS image with GCPs or geolocation 
arrays). And GDAL cannot do that correctly neither with gdalwarp (no 
matter which options I use) nor with Python bindings. It produces an 
output where the source image is place in the top left corner of the 
destination image.

Obviously this problem arises from a bug in the GDAL code and I will try 
to issue a descriptive bug report.

All the best!
Anton

 > Anton
 >
 > EOS_SWATH has 2 geolocation arrays, you might try the -geoloc switch to
 > gdalwarp, otherwise it creates a handfull of gcps from the arrays, if
 > you get a error about points failing to transform, set the output extent
 > with the -te switch.
 >
 > also you could try the swath2grid application in
 > https://lpdaac.usgs.gov/tools/modis_reprojection_tool_swath
 >
 > Brian
 >
 >
 > On Thu, 2012-01-12 at 09:23 +0100, Anton Korosov wrote:
 >> Hello everyone!
 >>
 >> Some time ago I've asked about problems with gdalwarp  (the e-mails
 >> below). I tried to utilize Python binding instead but got the same
 >> results. This brief script overlays the Europe map (GeoTIFF with
 >> geotransform) onto a MERIS images (PDS file with GCPs). But the result
 >> looks wrong again - the map is very small and apperas in the upper left
 >> corner (attached file).
 >>
 >> GCPfile='MER_RR__2PNPDK20030809_100609_000022512018_00466_07534_3898.N1'
 >> geotransformfile = 'europe.tif'
 >> outfile = 'colocated.tif'
 >>
 >> # open input datasets
 >> src_ds = gdal.Open(geotransformfile)
 >> dst_ds = gdal.Open(GCPfile)
 >>
 >> # create writable copy of the destination image
 >> driver = gdal.GetDriverByName( "GTiff" )
 >> out_ds = driver.CreateCopy(outfile, dst_ds, 0 )
 >>
 >> # reproject onto destination image with GCPs
 >> gdal.ReprojectImage(src_ds, out_ds)
 >>
 >> Can you please confirm that this is a bug in GDAL? If so I will issue a
 >> bug report.
 >>
 >> Thank you in advance!
 >> Anton
 >>
 >> PS. If the GCPs in the destination image are replaced with a
 >> GeoTransfrom generated using the gdal.GCPsToGeoTransform() function, the
 >> result looks much better but the image is still rather distorted. Which
 >> is understandable because curvature of a MERIS images (given by GCPs)
 >> cannot be fully explained by few numbers in the geotransform.
 >>
 >>
 >>
 >>
 >> On 12/16/2011 03:56 PM, Anton Korosov wrote:
 >>> Hi!
 >>>
 >>> I'm not sure but probably my question is related to the one below.
 >>> I'm trying to mosaic one MODIS images onto another with GDAL:
 >>>
 >>> gdal_translate
 >>> 
HDF4_EOS:EOS_SWATH:"/Data/sat/GDAL_test/MYD021KM.A2011228.0925.005.2011229003113.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
 >>> -b 1 /data/modis1.tif
 >>>
 >>> gdal_translate
 >>> 
HDF4_EOS:EOS_SWATH:"/Data/sat/GDAL_test/MOD021KM.A2011229.1125.005.2011229195243.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
 >>> -b 1 /data/modis2.tif
 >>>
 >>> gdalwarp modis1.tif modis2.tif
 >>>
 >>> Bu the results looks weird - the first image is on top of the 
second one
 >>> but it is very small, distorted and in the top-left corner (though they
 >>> cover approximately the same area).
 >>>
 >>> Do I understand right that such operation would work only when the
 >>> target image georeference is defined by GeoTransform and not by GCPs?
 >>>
 >>> Can I also ask if it is a big work to include ability of GDAL to warp
 >>> onto grid with GCPs (or RPC or geolocation array) ? And if it is 
planned
 >>> in some future?
 >>>
 >>> Thank you!
 >>> Anton
 >>>
 >>> On 12/15/2011 03:47 PM, Knut-Frode Dagestad wrote:
 >>>> Hi,
 >>>>
 >>>> Hr?bjartur ?orsteinsson explained to me a near-hidden feature of GDAL,
 >>>> namely to reproject one image onto the coverage of another.
 >>>>
 >>>> Given two images:
 >>>> imageA.tiff
 >>>> imageB.tiff
 >>>>
 >>>> Then an empty image can be created from image A with e.g.
 >>>> $ gdal_translate -ot Float32 -scale 0 0 999 999 -a_nodata 999
 >>>> imageA.tiff domainA.tiff
 >>>>
 >>>> And then imageB can be warped onto the extent of this image simply 
with:
 >>>> $ gdalwarp imageB.tiff domainA.tiff
 >>>>
 >>>> domainA.tiff will then contain the data from imageB, exactly 
co-located
 >>>> with imageA.
 >>>>
 >>>> The problem is that this only works when imageA contains a 
geotransform,
 >>>> and not when it contains only GCPs.
 >>>>
 >>>>
 >>>> So my question is:
 >>>> Is there any workaround to warp data from one image onto another image
 >>>> which is geolocated by GCPs only?
 >>>>
 >>>>
 >>>>
 >>>> With the -to option of gdalwarp it is possible to pass some parameters
 >>>> to GDALCreateGenImgProjTransformer2(). In the documentation of this
 >>>> function I find the following option:
 >>>>
 >>>> "METHOD: may have a value which is one of GEOTRANSFORM, 
GCP_POLYNOMIAL,
 >>>> GCP_TPS, GEOLOC_ARRAY, RPC to force only one geolocation method to be
 >>>> considered on the source dataset."
 >>>> http://www.gdal.org/gdal__alg_8h.html#94cd172f78dbc41d6f407d662914f2e3
 >>>>
 >>>> But there is no corresponding option to force use of 
GCP_POLYNOMIAL for
 >>>> the *destination* dataset. I guess this is a bad sign?
 >>>>
 >>>>
 >>>> Thank you for any help!
 >>>> Knut-Frode
 >>>>
 >>>> _______________________________________________
 >>>> gdal-dev mailing list
 >>>> gdal-dev@lists.osgeo.org
 >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 >>> _______________________________________________
 >>> gdal-dev mailing list
 >>> gdal-dev@lists.osgeo.org
 >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 >> _______________________________________________
 >> gdal-dev mailing list
 >> gdal-dev@lists.osgeo.org
 >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 >
 >
From timchab at yahoo.com  Fri Jan 13 06:16:21 2012
From: timchab at yahoo.com (AksakTimur)
Date: Fri Jan 13 06:16:45 2012
Subject: [gdal-dev] RE: Problem w\images with one raster band
In-Reply-To: <4ea779a6.000012f8.00000011@CHAPMANM7S>
References: <1326269478.64652.YahooMailNeo@web114717.mail.gq1.yahoo.com>
	<4F0DC2B6.6080100@ualg.pt> <9ecdb495.000012f8.00000008@CHAPMANM7S>
	<4ea779a6.000012f8.00000011@CHAPMANM7S>
Message-ID: <1326453381925-7183703.post@n2.nabble.com>


Martin,

This code below seems to work well:

...
checking if the band is a paletted one
...

else if (bandPalette)
{
    // Paletted map
    int pixelSpace=1*numBytesPerPixel;
    int lineSpace=destWidth * pixelSpace;

    unsigned char *rawImageData;
    rawImageData = new unsigned char[destWidth * destHeight * pixelSpace];
    imageData = new unsigned char[destWidth * destHeight * 3/*RGBA*/];
    pixelFormat = GL_RGBA;
    internalFormat = GL_RGBA;

   
bandPalette->RasterIO(GF_Read,windowX,windowY,windowWidth,windowHeight,(void*)	
		(rawImageData),destWidth,destHeight,targetGDALType,pixelSpace,lineSpace);
                
    for (int i = 0; i < destWidth * destHeight; i++)
    {
        const GDALColorEntry *colorEntry =
bandPalette->GetColorTable()->GetColorEntry(rawImageData[i]);
        GDALPaletteInterp interp =
bandPalette->GetColorTable()->GetPaletteInterpretation();
        if (!colorEntry)
        {
			...
        }
        else
        {
            if (interp == GPI_RGB)
            {
                imageData[3*i+0] = colorEntry->c3;
                imageData[3*i+1] = colorEntry->c2;
                imageData[3*i+2] = colorEntry->c1;
                // imageData[3*i+3] = colorEntry->c4;			                            
            }
           
        }
    }
    delete [] rawImageData;
}
else
{
   
}		
void * ptr_dest = NULL;
void * ptr_src = NULL;
if (imageData)
{
        BITMAPINFOHEADER  bih;
	int size = sizeof(BITMAPINFOHEADER) ;
	memset(&bih, 0, size);

	bih.biSize = size;
	bih.biWidth = ((((int) destWidth * 8) + 31) & ~31) >> 3;
	bih.biHeight = destHeight * -1;
	bih.biPlanes = 1;
	bih.biBitCount = 24;
	bih.biCompression = BI_RGB;

	pdc = new CDC ;
	pdc->CreateCompatibleDC(NULL);
	hbmp = CreateDIBSection( pdc->GetSafeHdc(),(BITMAPINFO*)&bih,
							DIB_PAL_COLORS,//DIB_RGB_COLORS,
							&ptr_dest ,
							NULL,
							0);

	unsigned int dibwidth =  m_bih.biWidth;

	GByte* src = (GByte*) imageData;

	for (int row = 0; row < destHeight; row++)
	{
		ptr_dest = dest + row * dibwidth* 3;
		ptr_src = src + row * destWidth *3;
		memcpy(ptr_dest, ptr_src, destWidth* 3);
	}
}

Your code is similar, though i haven't checked the GetColorEntryAsRGB
function yet

Best Regards





--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Problem-w-images-with-one-raster-band-tp7175398p7183703.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From rush at winkey.org  Fri Jan 13 14:40:23 2012
From: rush at winkey.org (Brian Case)
Date: Fri Jan 13 14:43:11 2012
Subject: [gdal-dev] Warping onto an image with only GCPs with Python
In-Reply-To: <4F0FFA87.5020508@nersc.no>
References: <4F0FFA87.5020508@nersc.no>
Message-ID: <1326483623.30920.78.camel@octopi>

Anton,

you can get the extents of the modis swath file from the metadata.

you have to use the the geolocation arrays to create a grid from the
swath file. the further left and right from the center of the image the
more area the single pixel in the swath file covers. also modis is a
pushbroom sensor. every 10 lines in the 1k file (20 in the 500m and 40
in the 250m) overlap the previous and next set. this is called the
bowtie effect. as it is right now gdal cannot properly deal with this.

short term I would use swath2grid to create tiffs of your data.


see http://trac.osgeo.org/gdal/ticket/4193
http://trac.osgeo.org/gdal/ticket/4192
http://trac.osgeo.org/gdal/ticket/4188

if you have any additional information or issues please add them


Brian



On Fri, 2012-01-13 at 10:33 +0100, Anton Korosov wrote:
> Dear Brian,
> 
> thank you very much for your reply!
> 
> The '-geoloc' switch does produce the error about points failing to 
> transform but the principal limitation is that I cannot use the '-te' 
> switch because I cannot know the extent in advance.
> 
> My task is to overlay one image (either projected like e.g. Europe map 
> or unprojected like e.g. L1B MERIS or MODIS image) onto another 
> UNprojected image (MODIS or MERIS image with GCPs or geolocation 
> arrays). And GDAL cannot do that correctly neither with gdalwarp (no 
> matter which options I use) nor with Python bindings. It produces an 
> output where the source image is place in the top left corner of the 
> destination image.
> 
> Obviously this problem arises from a bug in the GDAL code and I will try 
> to issue a descriptive bug report.
> 
> All the best!
> Anton
> 
>  > Anton
>  >
>  > EOS_SWATH has 2 geolocation arrays, you might try the -geoloc switch to
>  > gdalwarp, otherwise it creates a handfull of gcps from the arrays, if
>  > you get a error about points failing to transform, set the output extent
>  > with the -te switch.
>  >
>  > also you could try the swath2grid application in
>  > https://lpdaac.usgs.gov/tools/modis_reprojection_tool_swath
>  >
>  > Brian
>  >
>  >
>  > On Thu, 2012-01-12 at 09:23 +0100, Anton Korosov wrote:
>  >> Hello everyone!
>  >>
>  >> Some time ago I've asked about problems with gdalwarp  (the e-mails
>  >> below). I tried to utilize Python binding instead but got the same
>  >> results. This brief script overlays the Europe map (GeoTIFF with
>  >> geotransform) onto a MERIS images (PDS file with GCPs). But the result
>  >> looks wrong again - the map is very small and apperas in the upper left
>  >> corner (attached file).
>  >>
>  >> GCPfile='MER_RR__2PNPDK20030809_100609_000022512018_00466_07534_3898.N1'
>  >> geotransformfile = 'europe.tif'
>  >> outfile = 'colocated.tif'
>  >>
>  >> # open input datasets
>  >> src_ds = gdal.Open(geotransformfile)
>  >> dst_ds = gdal.Open(GCPfile)
>  >>
>  >> # create writable copy of the destination image
>  >> driver = gdal.GetDriverByName( "GTiff" )
>  >> out_ds = driver.CreateCopy(outfile, dst_ds, 0 )
>  >>
>  >> # reproject onto destination image with GCPs
>  >> gdal.ReprojectImage(src_ds, out_ds)
>  >>
>  >> Can you please confirm that this is a bug in GDAL? If so I will issue a
>  >> bug report.
>  >>
>  >> Thank you in advance!
>  >> Anton
>  >>
>  >> PS. If the GCPs in the destination image are replaced with a
>  >> GeoTransfrom generated using the gdal.GCPsToGeoTransform() function, the
>  >> result looks much better but the image is still rather distorted. Which
>  >> is understandable because curvature of a MERIS images (given by GCPs)
>  >> cannot be fully explained by few numbers in the geotransform.
>  >>
>  >>
>  >>
>  >>
>  >> On 12/16/2011 03:56 PM, Anton Korosov wrote:
>  >>> Hi!
>  >>>
>  >>> I'm not sure but probably my question is related to the one below.
>  >>> I'm trying to mosaic one MODIS images onto another with GDAL:
>  >>>
>  >>> gdal_translate
>  >>> 
> HDF4_EOS:EOS_SWATH:"/Data/sat/GDAL_test/MYD021KM.A2011228.0925.005.2011229003113.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>  >>> -b 1 /data/modis1.tif
>  >>>
>  >>> gdal_translate
>  >>> 
> HDF4_EOS:EOS_SWATH:"/Data/sat/GDAL_test/MOD021KM.A2011229.1125.005.2011229195243.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>  >>> -b 1 /data/modis2.tif
>  >>>
>  >>> gdalwarp modis1.tif modis2.tif
>  >>>
>  >>> Bu the results looks weird - the first image is on top of the 
> second one
>  >>> but it is very small, distorted and in the top-left corner (though they
>  >>> cover approximately the same area).
>  >>>
>  >>> Do I understand right that such operation would work only when the
>  >>> target image georeference is defined by GeoTransform and not by GCPs?
>  >>>
>  >>> Can I also ask if it is a big work to include ability of GDAL to warp
>  >>> onto grid with GCPs (or RPC or geolocation array) ? And if it is 
> planned
>  >>> in some future?
>  >>>
>  >>> Thank you!
>  >>> Anton
>  >>>
>  >>> On 12/15/2011 03:47 PM, Knut-Frode Dagestad wrote:
>  >>>> Hi,
>  >>>>
>  >>>> Hr?bjartur ?orsteinsson explained to me a near-hidden feature of GDAL,
>  >>>> namely to reproject one image onto the coverage of another.
>  >>>>
>  >>>> Given two images:
>  >>>> imageA.tiff
>  >>>> imageB.tiff
>  >>>>
>  >>>> Then an empty image can be created from image A with e.g.
>  >>>> $ gdal_translate -ot Float32 -scale 0 0 999 999 -a_nodata 999
>  >>>> imageA.tiff domainA.tiff
>  >>>>
>  >>>> And then imageB can be warped onto the extent of this image simply 
> with:
>  >>>> $ gdalwarp imageB.tiff domainA.tiff
>  >>>>
>  >>>> domainA.tiff will then contain the data from imageB, exactly 
> co-located
>  >>>> with imageA.
>  >>>>
>  >>>> The problem is that this only works when imageA contains a 
> geotransform,
>  >>>> and not when it contains only GCPs.
>  >>>>
>  >>>>
>  >>>> So my question is:
>  >>>> Is there any workaround to warp data from one image onto another image
>  >>>> which is geolocated by GCPs only?
>  >>>>
>  >>>>
>  >>>>
>  >>>> With the -to option of gdalwarp it is possible to pass some parameters
>  >>>> to GDALCreateGenImgProjTransformer2(). In the documentation of this
>  >>>> function I find the following option:
>  >>>>
>  >>>> "METHOD: may have a value which is one of GEOTRANSFORM, 
> GCP_POLYNOMIAL,
>  >>>> GCP_TPS, GEOLOC_ARRAY, RPC to force only one geolocation method to be
>  >>>> considered on the source dataset."
>  >>>> http://www.gdal.org/gdal__alg_8h.html#94cd172f78dbc41d6f407d662914f2e3
>  >>>>
>  >>>> But there is no corresponding option to force use of 
> GCP_POLYNOMIAL for
>  >>>> the *destination* dataset. I guess this is a bad sign?
>  >>>>
>  >>>>
>  >>>> Thank you for any help!
>  >>>> Knut-Frode
>  >>>>
>  >>>> _______________________________________________
>  >>>> gdal-dev mailing list
>  >>>> gdal-dev@lists.osgeo.org
>  >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >>> _______________________________________________
>  >>> gdal-dev mailing list
>  >>> gdal-dev@lists.osgeo.org
>  >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >> _______________________________________________
>  >> gdal-dev mailing list
>  >> gdal-dev@lists.osgeo.org
>  >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >
>  >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From aperi2007 at gmail.com  Fri Jan 13 14:55:26 2012
From: aperi2007 at gmail.com (aperi2007)
Date: Fri Jan 13 14:56:19 2012
Subject: [gdal-dev] OGR2OGR seem last the field with primary key
Message-ID: <4F108C2E.1090305@gmail.com>

Hi,

I notice that try-ing exporting from Postgres using ogr2ogr.exe
It lost completely the primary key filed if that is a integer field.
Instead it don't lost the same primary key field if it is a varchar type.

Is a know bug this ?

I'm use the gdal 1.9.

I try exporting to a spatialite or to a shapefile.
Both report the lost of the field PK.

The sintax I'm using is this:

ogr2ogr.exe --config PG_LIST_ALL_TABLES YES --config PG_SKIP_VIEWS YES 
-f "SQLite" prova.sqlite -progress PG:"dbname='test' active_schema=work 
schemas=work host='local' port='5432' user='postgres' 
password='postgres' " -overwrite -lco LAUNDER=yes -dsco SPATIALITE=yes 
-lco SPATIAL_INDEX=yes -gt 65536

Thx,

Andrea.
From aperi2007 at gmail.com  Fri Jan 13 15:05:46 2012
From: aperi2007 at gmail.com (aperi2007)
Date: Fri Jan 13 15:06:22 2012
Subject: [gdal-dev] OGR2OGR seem lost the field with primary key . ex
 [OGR2OGR seem last ...]
Message-ID: <4F108E9A.4010807@gmail.com>

Hi,

I notice that try-ing exporting from Postgres using ogr2ogr.exe
It lost completely the primary key filed if that is a integer field.
Instead it don't lost the same primary key field if it is a varchar type.

Is a know bug this ?

I'm use the gdal 1.9.

I try exporting to a spatialite or to a shapefile.
Both report the lost of the field PK.

The sintax I'm using is this:

ogr2ogr.exe --config PG_LIST_ALL_TABLES YES --config PG_SKIP_VIEWS YES
-f "SQLite" prova.sqlite -progress PG:"dbname='test' active_schema=work
schemas=work host='local' port='5432' user='postgres'
password='postgres' " -overwrite -lco LAUNDER=yes -dsco SPATIALITE=yes
-lco SPATIAL_INDEX=yes -gt 65536

Thx,

Andrea.

From chaitanya.ch at gmail.com  Sat Jan 14 05:59:46 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Jan 14 05:59:59 2012
Subject: [gdal-dev] OGR2OGR seem lost the field with primary key . ex
	[OGR2OGR seem last ...]
In-Reply-To: <4F108E9A.4010807@gmail.com>
References: <4F108E9A.4010807@gmail.com>
Message-ID: <CAMKgpOZB4RYHiP-9__hmHtavDQXH7ejGy=xGq=4ZYNxn_ZYkUw@mail.gmail.com>

Andrea,

The integer primary column might be going into the sqlite datasource as the
FID.

On Sat, Jan 14, 2012 at 1:35 AM, aperi2007 <aperi2007@gmail.com> wrote:

> Hi,
>
> I notice that try-ing exporting from Postgres using ogr2ogr.exe
> It lost completely the primary key filed if that is a integer field.
> Instead it don't lost the same primary key field if it is a varchar type.
>
> Is a know bug this ?
>
> I'm use the gdal 1.9.
>
> I try exporting to a spatialite or to a shapefile.
> Both report the lost of the field PK.
>
> The sintax I'm using is this:
>
> ogr2ogr.exe --config PG_LIST_ALL_TABLES YES --config PG_SKIP_VIEWS YES
> -f "SQLite" prova.sqlite -progress PG:"dbname='test' active_schema=work
> schemas=work host='local' port='5432' user='postgres'
> password='postgres' " -overwrite -lco LAUNDER=yes -dsco SPATIALITE=yes
> -lco SPATIAL_INDEX=yes -gt 65536
>
> Thx,
>
> Andrea.
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120114/c7e40850/attachment.html
From max at geoinova.com  Sat Jan 14 06:27:18 2012
From: max at geoinova.com (Maksim Sestic)
Date: Sat Jan 14 06:28:19 2012
Subject: [gdal-dev] Re: C# bindings - CreateCopy() progress delegate fails
	for WMS
In-Reply-To: <1326283480187-7175940.post@n2.nabble.com>
References: <1326283318307-7175929.post@n2.nabble.com>
	<1326283480187-7175940.post@n2.nabble.com>
Message-ID: <1326540438820-7187210.post@n2.nabble.com>

Hi all,

Could someone please confirm my findings? Should I file this as a bug?

Regards,
Maksim Sestic

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/C-bindings-CreateCopy-progress-delegate-fails-for-WMS-tp7175929p7187210.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From aperi2007 at gmail.com  Sun Jan 15 09:20:32 2012
From: aperi2007 at gmail.com (aperi2007)
Date: Sun Jan 15 09:21:05 2012
Subject: [gdal-dev] OGR2OGR seem lost the field with primary key . ex
	[OGR2OGR seem last ...]
In-Reply-To: <CAMKgpOZB4RYHiP-9__hmHtavDQXH7ejGy=xGq=4ZYNxn_ZYkUw@mail.gmail.com>
References: <4F108E9A.4010807@gmail.com>
	<CAMKgpOZB4RYHiP-9__hmHtavDQXH7ejGy=xGq=4ZYNxn_ZYkUw@mail.gmail.com>
Message-ID: <4F12E0B0.9010201@gmail.com>

 > The integer primary column might be going into the sqlite datasource
 >as
 > the FID.

Hi Chaitanya,

unfortunatelly seem no.

To have a more test I try to export from PG to shapefile.
I can confirm that the integer primary key field is lost in exportation.

I notice also that this happened only if I ask to ogr2ogr to export to 
shapefile a full schema.
Instead if I ask to ogr2ogr to export only one table using the -sql 
"select * from table_test" , the primary key integer is correctly exported.

Andrea.


Il 14/01/2012 11:59, Chaitanya kumar CH ha scritto:
> Andrea,
>
> The integer primary column might be going into the sqlite datasource as
> the FID.
>
> On Sat, Jan 14, 2012 at 1:35 AM, aperi2007 <aperi2007@gmail.com
> <mailto:aperi2007@gmail.com>> wrote:
>
>     Hi,
>
>     I notice that try-ing exporting from Postgres using ogr2ogr.exe
>     It lost completely the primary key filed if that is a integer field.
>     Instead it don't lost the same primary key field if it is a varchar
>     type.
>
>     Is a know bug this ?
>
>     I'm use the gdal 1.9.
>
>     I try exporting to a spatialite or to a shapefile.
>     Both report the lost of the field PK.
>
>     The sintax I'm using is this:
>
>     ogr2ogr.exe --config PG_LIST_ALL_TABLES YES --config PG_SKIP_VIEWS YES
>     -f "SQLite" prova.sqlite -progress PG:"dbname='test' active_schema=work
>     schemas=work host='local' port='5432' user='postgres'
>     password='postgres' " -overwrite -lco LAUNDER=yes -dsco SPATIALITE=yes
>     -lco SPATIAL_INDEX=yes -gt 65536
>
>     Thx,
>
>     Andrea.
>
>     _________________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/__mailman/listinfo/gdal-dev
>     <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E

From remo.eichenberger at gmail.com  Mon Jan 16 06:18:57 2012
From: remo.eichenberger at gmail.com (remoe)
Date: Mon Jan 16 06:19:45 2012
Subject: [gdal-dev] Postgres/Postgis driver issue 1.8.1 and latest trunk
Message-ID: <1326712737962-7192146.post@n2.nabble.com>

hi

i have an issue with postgres driver and SRID fetching from table. The
following code doesn't work correct on all cases:



When you have a table with NULL values in the geometry column, then this can
code returns an invalid SRID.
Why not get this information from geometry_columns - table ?

Thanks
Remo

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Postgres-Postgis-driver-issue-1-8-1-and-latest-trunk-tp7192146p7192146.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From pinchon.nicolas at gmail.com  Mon Jan 16 11:23:28 2012
From: pinchon.nicolas at gmail.com (Nikoko)
Date: Mon Jan 16 11:23:59 2012
Subject: [gdal-dev] Re: GDAL JP2KAK plugin for lossless 16 bit
In-Reply-To: <1317455625814-6850147.post@n2.nabble.com>
References: <201102221631.p1MGVrT0013890@smtp06.msg.oleane.net>
	<4D63EF8F.7020201@pobox.com>
	<1317455625814-6850147.post@n2.nabble.com>
Message-ID: <1326731008501-7193104.post@n2.nabble.com>

Hello,

I have the same problem with lossless unsigned integer (16 bits). See my
ticket :  http://trac.osgeo.org/gdal/ticket/4050
http://trac.osgeo.org/gdal/ticket/4050 
I tried with the last GDAL version 1.9.0 but this bug is not fixed yet. Did
someone find the cause of the problem ?


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-GDAL-JP2KAK-plugin-for-lossless-16-bit-tp6053172p7193104.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From tjmgis at gmail.com  Mon Jan 16 17:54:25 2012
From: tjmgis at gmail.com (TJMartin)
Date: Mon Jan 16 17:54:40 2012
Subject: [gdal-dev] Rasterlite = black tile in qgis
Message-ID: <1326754465115-7194434.post@n2.nabble.com>

Hi board

I have spent along time trying to load some geotiffs into rasterlite. Either
via gdal or the raster_load.exe

Both result in a black tile being shown when I open the Rasterlite file in
qgis

My original file is a geotiff with colour palette.

I thought this may have been a problem so used gdal_translate and -expand
rgb and still no joy

I then tried setting -co photometric=rgb

I still get a black tile

Can anyone think of what may be happening

Thanks

Tim



--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Rasterlite-black-tile-in-qgis-tp7194434p7194434.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From dmburgess at linktechs.net  Mon Jan 16 18:11:09 2012
From: dmburgess at linktechs.net (Dennis Burgess)
Date: Mon Jan 16 18:09:12 2012
Subject: [gdal-dev] End User Questions :(  KML Raster to Shapefile
Message-ID: <50710E9A7E64454C974049FC998EB655DA9F@03-exchange.lti.local>

I have a .KML File and .PNG file or a .TIF along with a .GEO file that
my application exports.

 

Once there, I need to convert these to a shape file for mailing lists,
but so far I have only found several application extensions that do
this, but nothing command line.  I believe that the gdaltindex could
work, but it shoots me back a no georeferencing is avail for the
getotif.tif files ..

 

 

Any suggestions would be great.

 

Dennis

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120116/1e7ef64c/attachment.html
From dmburgess at linktechs.net  Mon Jan 16 18:07:23 2012
From: dmburgess at linktechs.net (Dennis Burgess)
Date: Mon Jan 16 18:17:30 2012
Subject: [gdal-dev] (no subject)
Message-ID: <50710E9A7E64454C974049FC998EB655DA9C@03-exchange.lti.local>

 

 

------------------------------------------------------------------------
------------------------------------------------------------------------
-------------------
Dennis Burgess, Mikrotik Certified Trainer Author of "Learn RouterOS-
Second Edition <http://www.wlan1.com/product_p/mikrotik%20book-2.htm> "
Link Technologies, Inc -- Mikrotik & WISP Support Services
Office: 314-735-0270 <tel:314-735-0270>  Website:
http://www.linktechs.net <http://www.linktechs.net/>  - Skype: linktechs
<skype:linktechs?call> 
-- Create Wireless Coverages with www.mywificoverage.com
<http://www.mywificoverage.com/>  -- 
------------------------------------------------------------------------
------------------------------------------------------------------------
----------------------

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120116/4e34d679/attachment.html
From Michael.Smith at usace.army.mil  Mon Jan 16 20:00:17 2012
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Mon Jan 16 20:01:57 2012
Subject: [gdal-dev] End User Questions :(  KML Raster to Shapefile
In-Reply-To: <50710E9A7E64454C974049FC998EB655DA9F@03-exchange.lti.local>
Message-ID: <CB3A31FD.1DC5E%michael.smith@usace.army.mil>

Dennis,

ogr2ogr can convert a kml file to a shapefile if built with the kml or libkml drivers (I recommend the libkml driver, it offers many more features).

Mike



From: Dennis Burgess <dmburgess@linktechs.net<mailto:dmburgess@linktechs.net>>
Date: Mon, 16 Jan 2012 17:11:09 -0600
To: <gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>>
Subject: [gdal-dev] End User Questions :( KML Raster to Shapefile

I have a .KML File and .PNG file or a .TIF along with a .GEO file that my application exports.

Once there, I need to convert these to a shape file for mailing lists, but so far I have only found several application extensions that do this, but nothing command line.  I believe that the gdaltindex could work, but it shoots me back a no georeferencing is avail for the getotif.tif files ..


Any suggestions would be great.

Dennis
_______________________________________________gdal-dev mailing list gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120117/b4d7608a/attachment.html
From max at geoinova.com  Tue Jan 17 09:53:33 2012
From: max at geoinova.com (Maksim Sestic)
Date: Tue Jan 17 09:54:22 2012
Subject: [gdal-dev] Re: C# bindings - CreateCopy() progress delegate fails
	for WMS
In-Reply-To: <1326540438820-7187210.post@n2.nabble.com>
References: <1326283318307-7175929.post@n2.nabble.com>
	<1326283480187-7175940.post@n2.nabble.com>
	<1326540438820-7187210.post@n2.nabble.com>
Message-ID: <1326812013498-7196619.post@n2.nabble.com>

It's filed under ticket #4449

Ticket URL: http://trac.osgeo.org/gdal/ticket/4449

Regards,
Maksim Sestic

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/C-bindings-CreateCopy-progress-delegate-fails-for-WMS-tp7175929p7196619.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From rush at winkey.org  Tue Jan 17 14:07:58 2012
From: rush at winkey.org (Brian Case)
Date: Tue Jan 17 14:11:23 2012
Subject: [gdal-dev] End User Questions :(  KML Raster to Shapefile
In-Reply-To: <50710E9A7E64454C974049FC998EB655DA9F@03-exchange.lti.local>
References: <50710E9A7E64454C974049FC998EB655DA9F@03-exchange.lti.local>
Message-ID: <1326827278.30920.86.camel@octopi>

Dennis

gdal does not have any code for reading raster files in kml/kmz like
that. can you make the files you have available so i can look?

Brian


On Mon, 2012-01-16 at 17:11 -0600, Dennis Burgess wrote:
> I have a .KML File and .PNG file or a .TIF along with a .GEO file that
> my application exports.
> 
>  
> 
> Once there, I need to convert these to a shape file for mailing lists,
> but so far I have only found several application extensions that do
> this, but nothing command line.  I believe that the gdaltindex could
> work, but it shoots me back a no georeferencing is avail for the
> getotif.tif files ..
> 
>  
> 
>  
> 
> Any suggestions would be great.
> 
>  
> 
> Dennis
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From landa.martin at gmail.com  Wed Jan 18 07:56:31 2012
From: landa.martin at gmail.com (Martin Landa)
Date: Wed Jan 18 07:56:40 2012
Subject: [gdal-dev] OGR-VFK in 1.9
Message-ID: <CA+Ei1OdT2y5sB14Ro11RNZWv5hMOTtUUJOGj9aQvchiG5mLYhw@mail.gmail.com>

Hi all,

in the last days I have fundamentally updated VFK [1] driver in OGR
[2]. Beside fundamental optimization also some serious bugs have been
fixed. I wanted to ask you what is release policy regarding 1.9
branch. Could I merge recent updates in VFK driver to this branch?

Thanks for clarification. Martin

[1] http://gdal.org/ogr/drv_vfk.html
[2] http://trac.osgeo.org/gdal/log/trunk/gdal/ogr/ogrsf_frmts/vfk

-- 
Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa
From etourigny.dev at gmail.com  Wed Jan 18 09:06:51 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Jan 18 09:07:24 2012
Subject: [gdal-dev] OGR-VFK in 1.9
In-Reply-To: <CA+Ei1OdT2y5sB14Ro11RNZWv5hMOTtUUJOGj9aQvchiG5mLYhw@mail.gmail.com>
References: <CA+Ei1OdT2y5sB14Ro11RNZWv5hMOTtUUJOGj9aQvchiG5mLYhw@mail.gmail.com>
Message-ID: <CA+TxYvMK7JGnUXeD1UMhBY5OHtccPkB3zizjm+7p6WUsspHARg@mail.gmail.com>

Martin,

My understanding is that you can back-port bugfixes which have bug
entries.  New features and important changes require permission  of
the PSC or release manager and perhaps an RFC.

However, as your changes only affect your driver, I think it would be
easier to commit them to 1.9.0 without an RFC.  It would be easier if
you prepare a small wiki page (similar to RFCs) describing the
changes, and create at least one bug entry.

>From rfc : http://trac.osgeo.org/gdal/wiki/rfc3_commiters

- Changes should not be committed in stable branches without a
corresponding bug id. Any change worth pushing into the stable version
is worth a bug entry.
- Never commit new features to a stable branch without permission of
the PSC or release manager. Normally only fixes should go into stable
branches.
- New features go in the main development trunk.
- Only bug fixes should be committed to the code during pre-release
code freeze, without permission from the PSC or release manager.
- Significant changes to the main development version should be
discussed on the gdal-dev list before you make them, and larger
changes will require a RFC approved by the PSC.

regards,
Etienne

On Wed, Jan 18, 2012 at 10:56 AM, Martin Landa <landa.martin@gmail.com> wrote:
> Hi all,
>
> in the last days I have fundamentally updated VFK [1] driver in OGR
> [2]. Beside fundamental optimization also some serious bugs have been
> fixed. I wanted to ask you what is release policy regarding 1.9
> branch. Could I merge recent updates in VFK driver to this branch?
>
> Thanks for clarification. Martin
>
> [1] http://gdal.org/ogr/drv_vfk.html
> [2] http://trac.osgeo.org/gdal/log/trunk/gdal/ogr/ogrsf_frmts/vfk
>
> --
> Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jdmorgan at unca.edu  Wed Jan 18 10:38:38 2012
From: jdmorgan at unca.edu (John Morgan)
Date: Wed Jan 18 10:45:10 2012
Subject: [gdal-dev] reading attribute values out of erdas img
Message-ID: <CA+N3S5qDYh3SaKdxCxLN=h_5EYbtG+-LnB_fqb4e9Fi_c9TRYA@mail.gmail.com>

Hello,
I am fairly new to GDAL but impressed w/ its functionality.  I have an
ERDAS img file that has categorical data in it (data type).  I am
attempting to read out the  categorical data for the purposes of eventually
classifying it in a map server file.  I have found one example of this but
am not sure if this is the best way to go about it.  Any feedback would be
appreciated.  Here is what I have so far:

#! /usr/bin/python
from osgeo import gdal, gdalconst
from gdalconst import *

ds =
gdal.Open('/flood/fsdata-internal/efetac_nasa/AncillaryData/foresttype.img',
gdal.GA_ReadOnly)
# get image size
rows = ds.RasterYSize
cols = ds.RasterXSize
bands = ds.RasterCount

# create a list to store band data in
bandList = []
# read in bands and store all the data in bandList
for i in range(bands):
    band = ds.GetRasterBand(i+1)
    data = band.ReadAsArray(0, 0, cols, rows)
    bandList.append(data)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120118/8defddca/attachment.html
From knutfrodesoppel at hotmail.com  Wed Jan 18 11:01:14 2012
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Wed Jan 18 11:01:38 2012
Subject: [gdal-dev] Converting between row/col numbers of two datasets
Message-ID: <jf6qcb$se$1@dough.gmane.org>

Hi group,

In searching for the reason for the bug reported in ticket #4442 [1], I 
have made some tests with gdal.Transformer in Python:

A transformer defined generally as:
T = gdal.Transformer(src_ds, dst_ds, [''])
can be used to convert row/col from src-image to row/col of dst-image. 
Behind the scene, according to GDAL documentation [2], this consists of 
3 steps:

(source row/col) --> (source coordinates) --> (destination coordinates) 
--> (destination row/col)

My tests show that this works fine if the src-image has GCPs only and 
the dst-image has a geotransform, but not vice versa.
In the latter case, the output is not row/col of the GCP-image, but 
rather the coordinates (lon and lat). I.e., the last step of the chain 
above has not been performed. Enforcing the same projection for the two 
datasets makes no difference.
This should explain why in the tests of ticket #4442 the 
geotransform-image is placed in the upper left corner of the output 
GCP-image: the lon/lat-values are mistaken as destination row/col-values.

However, it is also possible to define a transformer which converts 
(back and forth) between row/column and coordinates of either the src- 
or dst-images:
T_src = gdal.Transformer(src_ds, None, [''])
T_dst = gdal.Transformer(dst_ds, None, [''])
These correspond to the first and last steps of the chain above. The 
interesting thing is that combining these it works well to calculate 
row/col of the GCP-image from row/col of the geotransform-image.

Can anyone explain why then the direct transformation does not work? I 
suspect a small fix could possibly solve this problem?

Best regards from Knut-Frode


[1] http://trac.osgeo.org/gdal/ticket/4442
[2] http://www.gdal.org/gdal__alg_8h.html#7671696d085085a0bfba3c3df9ffcc0a


The script below can be used to reproduce this:

GCPfile = 'MER_RR__2PNPDK20030809_100609_000022512018_00466_07534_3898.N1'
# http://envisat.esa.int/services/sample_products/meris/RR/L2/

geotransformfile = 'europe.tif'# 
http://www.eea.europa.eu/data-and-maps/data/world-digital-elevation-model-etopo5/zipped-dem-geotiff-raster-geographic-tag-image-file
-format-raster-data/

# ----- Open source and destination datasets -----#
if 0:
         # This works
         src_ds = gdal.Open(GCPfile)
         dst_ds = gdal.Open(geotransformfile)
else:
         # This does not work
         src_ds = gdal.Open(geotransformfile)
         dst_ds = gdal.Open(GCPfile)

# ----- Make transformers -----#

# To tranform from pixel/line of src-image to pixel/line on dst-image:
T_full = gdal.Transformer(src_ds, dst_ds, [''])

# To tranform between pixel/line and coordinates on src-image
T_src = gdal.Transformer(src_ds, None, [''])

# To tranform between pixel/line and coordinates on dst-image
T_dst = gdal.Transformer(dst_ds, None, [''])

# ----- Test transformers -----#
src_rowcol = (100, 100)
coords = T_src.TransformPoint(0, src_rowcol[0], src_rowcol[1])[1]
print 'Pixel ' + str(src_rowcol) + ' in src image has coordinates: ' + 
str(coords)

dst_rowcol = T_dst.TransformPoint(1, coords[0], coords[1])[1];
print 'These lon/lat-values corresponds to pixels in destination image: 
' + str(dst_rowcol)

print 'Direct transformation: ' + str(T_full.TransformPoint(0, 
src_rowcol[0], src_rowcol[1]))



From jukka.rahkonen at mmmtike.fi  Wed Jan 18 15:25:02 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Jan 18 15:25:37 2012
Subject: [gdal-dev] 
	Ogr2ogr, Mapinfo, Spatialite and mixed line geometrytypes
Message-ID: <loom.20120118T210605-136@post.gmane.org>

Hi,

I received an Mapinfo TAB file which contains both linestings and
multilinestrings. Addind data into Spatialite as a new layer with the following
command fails

ogr2ogr -f SQLite -update -gt 2048 -t_srs epsg:3067 tab_test.sqlite l_jrata.TAB 

Error is 
ERROR 1: sqlite3_step() failed:
  SQL logic error or missing database
ERROR 1: ROLLBACK transaction failed: cannot rollback - no transaction
is active

ERROR 1: Terminating translation prematurely after failed
translation of layer l_jrata (use -skipfailures to skip errors) 

Conversion is successful if I set the geometrytype of the new layer into
multilinestring with the -nlt option. However, this is not necessary when having
a mixture of polygons and multipolygons. In that case the conversion succeeds
and the result is a Spatialite table of general geometry type.

Orginfo lists with this dataset that the geometrytype is Line String. Are there
other means for detecting the multilinestrings beforehand than list all features
with ogrinfo and pipe them through find/grep?

A small dataset is available here for testing
http://latuviitta.org/documents/L_JRATA.ZIP 

Regards,

-Jukka Rahkonen-



From sigfrido at tiscali.it  Thu Jan 19 04:05:31 2012
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Thu Jan 19 04:11:41 2012
Subject: [gdal-dev]  Ogr2ogr, Mapinfo, Spatialite and mixed line
	geometrytypes
In-Reply-To: <loom.20120118T210605-136@post.gmane.org>
References: <loom.20120118T210605-136@post.gmane.org>
Message-ID: <1326963931.2331.39.camel@GOLEM>


Hi Jukka,

unfortunately MapInfo does not have the ability to enforce the geometric
type of a table, to the extent that you could also mix polygons, points
and linestrings in the same table!

Moreover, MapInfo does not make a formal distinction between linestring
and multilinestring, nor between polygon and multipolygon. And in
MapInfo tab format, once you get a poligon with more than one ring you
cannot immediately say which ring is a hole and which is a polygon
exterior ring, so you have to write code to figure out if a given
polygon is single or multi.

Lacking this support in the TAB format, the problem creeps into ogr. The
only way to figure out which geometries are you dealing with is reading
all the features and analyzing them.

I usually use -nlt option to force to multilinestring or multipolygon,
and then post-process data in PostGIS.


Hope this helps

All the best

Sig

Il giorno mer, 18/01/2012 alle 20.25 +0000, Jukka Rahkonen ha scritto:
> Hi,
> 
> I received an Mapinfo TAB file which contains both linestings and
> multilinestrings. Addind data into Spatialite as a new layer with the following
> command fails
> 
> ogr2ogr -f SQLite -update -gt 2048 -t_srs epsg:3067 tab_test.sqlite l_jrata.TAB 
> 
> Error is 
> ERROR 1: sqlite3_step() failed:
>   SQL logic error or missing database
> ERROR 1: ROLLBACK transaction failed: cannot rollback - no transaction
> is active
> 
> ERROR 1: Terminating translation prematurely after failed
> translation of layer l_jrata (use -skipfailures to skip errors) 
> 
> Conversion is successful if I set the geometrytype of the new layer into
> multilinestring with the -nlt option. However, this is not necessary when having
> a mixture of polygons and multipolygons. In that case the conversion succeeds
> and the result is a Spatialite table of general geometry type.
> 
> Orginfo lists with this dataset that the geometrytype is Line String. Are there
> other means for detecting the multilinestrings beforehand than list all features
> with ogrinfo and pipe them through find/grep?
> 
> A small dataset is available here for testing
> http://latuviitta.org/documents/L_JRATA.ZIP 
> 
> Regards,
> 
> -Jukka Rahkonen-
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jukka.rahkonen at mmmtike.fi  Thu Jan 19 04:48:51 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Jan 19 04:49:44 2012
Subject: [gdal-dev] MapInfo TAB with WindowsLatin1 into Spatialite
Message-ID: <loom.20120119T103553-384@post.gmane.org>

Hi,

My MapInfo TAB files have attributes with WindowsLatin1 encoding. Direct
conversion with ogr2ogr from Mapinfo formta into Spatialite seems to give wrong
encoding in the Spatialite database. I have not discoverd any direct way for
changing the encoding into utf-8 with GDAL yet. However, I feel that this way I
have reached a correct result:

- Convert from MapInfo into GML with ogr2ogr by using the configuration option
--config OGR_FORCE_ASCII=no
- Hand edit the resulting GML file and change it to have encoding="iso-8859-1"
- Convert this edited GML file into Spatialite.

Is this the correct way for handling this case? 

-Jukka Rahkonen-

From jukka.rahkonen at mmmtike.fi  Thu Jan 19 05:34:05 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Jan 19 05:34:57 2012
Subject: [gdal-dev] Launder=yes and Spatialite driver
Message-ID: <loom.20120119T110122-886@post.gmane.org>

Hi,

Spatialite driver document http://gdal.org/ogr/drv_sqlite.html says about Layer
Creation Option LAUNDER

LAUNDER=yes/no: Controls whether layer and field names will be laundered for
easier use in SQLite. Laundered names will be convered to lower case and some
special characters will be changed to underscores. 

What are the special characters which are laundered? It looks like the
Scandinavian characters ?????? are not on the list. Here is a litte Spatialite
database which is created with the -lco LAUNDER=yes option. Attributes names
which ?????? characters does not look the same any longer but they do not have
underscores either. Database can be used with GDAL without problems as it is,
but Spatialite-gui is showing those attribute names as empty.

http://latuviitta.org/documents/gdal_launder_test.sqlite

I solved the problem this time by editing the column names in the source data
but it might be good to know in the future what gets laundered and what not.

-Jukka Rahkonen-

From sigfrido at tiscali.it  Thu Jan 19 09:10:00 2012
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Thu Jan 19 09:10:10 2012
Subject: [gdal-dev] MapInfo TAB with WindowsLatin1 into Spatialite
In-Reply-To: <loom.20120119T103553-384@post.gmane.org>
References: <loom.20120119T103553-384@post.gmane.org>
Message-ID: <1326982200.5041.23.camel@GOLEM>

Hi Jukka,

for handling similar cases with MapInfo to PostGIS, there is an
environment variable suitable for setting the client character encoding:

export PGCLIENTENCODING=LATIN1

So maybe there is something similar for SQLite? I don't know.

Otherwise try the following workaround, which does not require manual
edits:

. convert the TAB in MIF/MID via ogr2ogr
. encode the .MID file in UTF8 using iconv
. load the resulting MIF/MID file into SQLite

Sig

Il giorno gio, 19/01/2012 alle 09.48 +0000, Jukka Rahkonen ha scritto:
> Hi,
> 
> My MapInfo TAB files have attributes with WindowsLatin1 encoding. Direct
> conversion with ogr2ogr from Mapinfo formta into Spatialite seems to give wrong
> encoding in the Spatialite database. I have not discoverd any direct way for
> changing the encoding into utf-8 with GDAL yet. However, I feel that this way I
> have reached a correct result:
> 
> - Convert from MapInfo into GML with ogr2ogr by using the configuration option
> --config OGR_FORCE_ASCII=no
> - Hand edit the resulting GML file and change it to have encoding="iso-8859-1"
> - Convert this edited GML file into Spatialite.
> 
> Is this the correct way for handling this case? 
> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From dan.putler at sauder.ubc.ca  Thu Jan 19 10:27:13 2012
From: dan.putler at sauder.ubc.ca (Dan Putler)
Date: Thu Jan 19 10:33:30 2012
Subject: [gdal-dev] MapInfo TAB with WindowsLatin1 into Spatialite
In-Reply-To: <loom.20120119T103553-384@post.gmane.org>
References: <loom.20120119T103553-384@post.gmane.org>
Message-ID: <4F183651.7080703@sauder.ubc.ca>

Hi Jukka,

I think you need to get it to a text form, which GML does. However, 
rather than hand edit the file, I would run it through recode to convert 
the character encoding. It would be faster, and not be as error prone as 
doing by hand. The link to the recode product is: 
http://recode.progiciels-bpi.ca/index.html

Dan

On 01/19/2012 01:48 AM, Jukka Rahkonen wrote:
> Hi,
>
> My MapInfo TAB files have attributes with WindowsLatin1 encoding. Direct
> conversion with ogr2ogr from Mapinfo formta into Spatialite seems to give wrong
> encoding in the Spatialite database. I have not discoverd any direct way for
> changing the encoding into utf-8 with GDAL yet. However, I feel that this way I
> have reached a correct result:
>
> - Convert from MapInfo into GML with ogr2ogr by using the configuration option
> --config OGR_FORCE_ASCII=no
> - Hand edit the resulting GML file and change it to have encoding="iso-8859-1"
> - Convert this edited GML file into Spatialite.
>
> Is this the correct way for handling this case?
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jorg7788 at yahoo.com  Fri Jan 20 02:02:36 2012
From: jorg7788 at yahoo.com (blueriver)
Date: Fri Jan 20 02:03:29 2012
Subject: [gdal-dev] GDAL/OGR 1.9.0 Released
In-Reply-To: <4F0BE699.1010109@pobox.com>
References: <4F0BE699.1010109@pobox.com>
Message-ID: <1327042956385-3882754.post@n6.nabble.com>

Are there plans to include FileGDB capability in the source files? 
Recompiling is outside our current abilities.

I don't know if the is the appropriate place to ask, but when will this
version be included as the GDAL/OGR for QGIS?

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-GDAL-OGR-1-9-0-Released-tp3742164p3882754.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Fri Jan 20 02:11:15 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 20 02:11:46 2012
Subject: [gdal-dev] GDAL/OGR 1.9.0 Released
In-Reply-To: <1327042956385-3882754.post@n6.nabble.com>
References: <4F0BE699.1010109@pobox.com>
	<1327042956385-3882754.post@n6.nabble.com>
Message-ID: <4F191393.4010406@pobox.com>

On 12-01-19 11:02 PM, blueriver wrote:
> Are there plans to include FileGDB capability in the source files?
> Recompiling is outside our current abilities.
>
> I don't know if the is the appropriate place to ask, but when will this
> version be included as the GDAL/OGR for QGIS?

Blue River,

The FileGDB driver is already part of the source distribution, but you
need to have the appropriate SDK from ESRI to build it.  We have not
produced a formal 1.9.0 set of binaries for GDAL but Tamas does
maintain a wide set of builds for windows.  I presume those don't
include FileGDB support for licensing reasons.

Note that FileGDB based backported to 1.8 in December (or November?)
sufficiently to produce a FileGDB package for OSGeo4W.  So you could
use that if you don't need any recent fixes.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From jukka.rahkonen at mmmtike.fi  Fri Jan 20 04:09:07 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Jan 20 04:09:41 2012
Subject: [gdal-dev] Re: MapInfo TAB with WindowsLatin1 into Spatialite
References: <loom.20120119T103553-384@post.gmane.org>
	<4F183651.7080703@sauder.ubc.ca>
Message-ID: <loom.20120120T100553-612@post.gmane.org>

Dan Putler <dan.putler <at> sauder.ubc.ca> writes:

> 
> Hi Jukka,
> 
> I think you need to get it to a text form, which GML does. However, 
> rather than hand edit the file, I would run it through recode to convert 
> the character encoding. It would be faster, and not be as error prone as 
> doing by hand. The link to the recode product is: 
> http://recode.progiciels-bpi.ca/index.html
> 

Hi,

I do not need to convert the contents of the GML file that is created with
ogr2ogr. The only trouble is that ogr2ogr writes always into the first 
line ofGML file as

<?xml version="1.0" encoding="utf-8" ?>

This is more or or less clearly documented in the GML driver page "the driver
expects UTF-8 content to be passed in" and so is expects also that UTF-8 is
passed out.

However, the encoding is actually the same than the one used in the original
Mapinfo file, in this case iso-8859-1. But because I know it I can just
correct the first line to be

<?xml version="1.0" encoding="iso-8859-1" ?>

The GML driver itself does support a few different encodings and iso-8859-1
is one of those as documented in http://gdal.org/ogr/drv_gml.html. Therefore
once the encoding parameter in the GML file is corrected GDAL will have 
no trouble in converting GML into Spatialite and from iso-8859-1 into utf-8.

Making conversion through interim GML file is not so hard thing to do but 
it is one more trick to remember and therefore not most convenient. I 
believe that if I will have only one or two files to convert next time I 
will use Quantum GIS. It gives a possibility to select the encoding when 
opening MapInfo files.

I believe it should not be impossible for MapInfo driver to recognise 
encoding automatically because it is written in plain text in the Mapinfo
.TAB file but perhaps ogr generally does not know what to do for the 
encoding even it was known.

-Jukka Rahkonen-

From darren.carman at infoterra-global.com  Fri Jan 20 04:56:34 2012
From: darren.carman at infoterra-global.com (Carman, Darren)
Date: Fri Jan 20 04:57:57 2012
Subject: [gdal-dev] DWGDirect and Teigha failing to compile
Message-ID: <715BFDBEEEDA5245AF02E1C1DCE01C370777628E@SV025.infoterra-global.com>

Hi,

 

I am having problems installing GDAL 1.8.1 using the Open Design
Alliance Teigha v3 software. We run Red Hat EL6.1 64bit which used gcc
4.4. The Teigha distribution contains prebuilt libraries for this
compiler, so no source code.

 

The servers we are upgrading from were Red Hat EL4.8 32bit running GDAL
1.4.5 and ODA 2.5 (pre Teigha branding and changes). This works fine.

 

I am unsure if this is still supported and did notice the extra dxf and
dwg directories under ogrsf_frmts, but am unsure whether they are meant
to replace this or use different technologies. I don't see them
mentioned in the configure help.

 

So far I have:

a)      Downloaded the dxfdwg directory and modified GNUMakefile,
ogr_dwg.h, OdFileBuf.cpp and OdFileBuf.h to reflect changes in ODA
function names and allow it to build.

b)      Modified GDALmake.opt.in to use new ODA library naming (and new
libraries).

 

My problem is at the end of the build when the GDAL binaries are being
built. I end up with undefined references and am unsure what libraries
need to be included, ODA or otherwise, or even if I just need extra
changes to GDALmake.opt.in.

 

I am hoping someone else has been down this road and knows what I am
missing. Any help is greatly appreciated and thanks in advance to anyone
who can solve my problem.

 

Regards,

Darren

 

The undefined references:

 

echo 'CONFIG_VERSION="'`cat ../VERSION`'"' >> gdal-config

echo 'CONFIG_OGR_ENABLED=yes' >> gdal-config

echo 'CONFIG_FORMATS="gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211
xpm sdts raw dted mem jdem envisat elas fit vrt usgsdem l1b nitf bmp
pcidsk airsar rs2 ilwis rmf leveller sgi srtmhgt idrisi gsg ingr ers
jaxapalsar dimap gff cosar pds adrg coasp tsx terragen blx msgn til r
northwood saga xyz hf2 kmlsuperoverlay ozi wcs wms grib bsb ecw jpeg2000
gif jpeg png pcraster  rik postgisraster"' >> gdal-config

cat gdal-config.in >> gdal-config

chmod a+x gdal-config

/bin/sh gdal-1.8.1/libtool --mode=link    g++  gdalinfo.lo
gdal-1.8.1/libgdal.la -o gdalinfo

libtool: link: g++ .libs/gdalinfo.o -o .libs/gdalinfo
gdal-1.8.1/.libs/libgdal.so 

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeCachingCurve3d::originalCurve() const'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeTess2::OptimizedHolder::~OptimizedHolder()'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeTess2::Contour::breakToConvex(unsigned int, double)'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeOffsetCurve3d::curve() const'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeRay2d::OdGeRay2d(OdGePoint2d const&, OdGeVector2d const&)'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeTess2::Contour::create(void const*, bool,
OdGeTess2::MemoryHolder&)'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeLengthScaledCurve3d::OdGeLengthScaledCurve3d(OdGeCurve3d const*,
double)'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeTess2::Contour::addVertex(int, unsigned int)'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeQuaternion::kOrigin'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeTess2::OptimizedHolder::OptimizedHolder(unsigned int, unsigned
int)'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeCompositeCurve3d::getCurveList(OdArray<OdSharedPtr<OdGeCurve3d>,
OdObjectsAllocator<OdSharedPtr<OdGeCurve3d> > >&) const'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeOffsetCurve3d::OdGeOffsetCurve3d(OdGeCurve3d const&, OdGeVector3d
const&, double)'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeSphere::radius() const'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeCompositeCurve3d::globalToLocalParam(double, int&) const'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeSphere::center() const'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeCachingCurve3d::OdGeCachingCurve3d(OdGeCurve3d const*, double)'

gdal-1.8.1/.libs/libgdal.so: undefined reference to
`OdGeCompositeCurve3d::OdGeCompositeCurve3d(OdArray<OdSharedPtr<OdGeCurv
e3d>, OdObjectsAllocator<OdSharedPtr<OdGeCurve3d> > > const&)'

collect2: ld returned 1 exit status

make[1]: *** [gdalinfo] Error 1

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120120/e7663b28/attachment.html
From jluis at ualg.pt  Fri Jan 20 21:21:43 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri Jan 20 21:22:34 2012
Subject: [gdal-dev] Is this vsi* behavior intended?
Message-ID: <4F1A2137.2030502@ualg.pt>

Hi,

I'm puzzled with this behavior of the vsi* functions

The first call that uses vsigzip because file is gzipped 
/vsigzip/vsicurl/http:.../...30S.ACE2.gz gives an error. However, if I 
remove the the '/vsigzip' than the command runs fine and I'm able to 
access the file.

Is this intended (it took me quite a while to figure this out)?

Joaquim

gdalinfo 
/vsigzip/vsicurl/http://tethys.eaprs.cse.dmu.ac.uk/ACE2/links/ACE2_30_SECONDS/ACE2_30S_BOTH/30N015W_BOTH_30S.ACE2.gz
ERROR 4: 
`/vsigzip/vsicurl/http://tethys.eaprs.cse.dmu.ac.uk/ACE2/links/ACE2_30_SECONDS/ACE2_30S_BOTH/30N015W_BOTH_30S.ACE2.gz' 
does not exist in the file system,
and is not recognised as a supported dataset name.

gdalinfo failed - unable to open 
'/vsigzip/vsicurl/http://tethys.eaprs.cse.dmu.ac.uk/ACE2/links/ACE2_30_SECONDS/ACE2_30S_BOTH/30N015W_BOTH_30S.ACE2.gz'.


This works fine:

gdalinfo 
/vsicurl/http://tethys.eaprs.cse.dmu.ac.uk/ACE2/links/ACE2_30_SECONDS/ACE2_30S_BOTH/30N015W_BOTH_30S.ACE2.gz
Driver: ACE2/ACE2
Files: 
/vsicurl/http://tethys.eaprs.cse.dmu.ac.uk/ACE2/links/ACE2_30_SECONDS/ACE2_30S_BOTH/30N015W_BOTH_30S.ACE2.gz
Size is 1800, 1800
Coordinate System is:
GEOGCS["WGS 84",
....
From even.rouault at mines-paris.org  Sat Jan 21 03:35:25 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 21 03:35:49 2012
Subject: [gdal-dev] Is this vsi* behavior intended?
In-Reply-To: <4F1A2137.2030502@ualg.pt>
References: <4F1A2137.2030502@ualg.pt>
Message-ID: <201201210935.26021.even.rouault@mines-paris.org>

Le samedi 21 janvier 2012 03:21:43, Joaquim Luis a ?crit :
> Hi,
> 
> I'm puzzled with this behavior of the vsi* functions
> 
> The first call that uses vsigzip because file is gzipped
> /vsigzip/vsicurl/http:.../...30S.ACE2.gz gives an error. However, if I
> remove the the '/vsigzip' than the command runs fine and I'm able to
> access the file.
> 
> Is this intended (it took me quite a while to figure this out)?

Several points :

* the correct syntax when combining /vsi.../ domains is to have a double slash 
between them :  /vsigzip//vsicurl/http:.../...30S.ACE2.gz
* there was a typo in the ACE2 driver that prevented the above to work. The fix 
has been now commited
* there is a autodetection mechanism in the ACE2 driver to automatically 
prepend /vsigzip/ in front of the filename if /vsigzip/ isn't already there and 
that the extension is .ace2.gz

Hope that it explains everything.

Best regards,

Eve,
From even.rouault at mines-paris.org  Sat Jan 21 03:50:55 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 21 03:51:16 2012
Subject: [gdal-dev] Launder=yes and Spatialite driver
In-Reply-To: <loom.20120119T110122-886@post.gmane.org>
References: <loom.20120119T110122-886@post.gmane.org>
Message-ID: <201201210950.55704.even.rouault@mines-paris.org>

Le jeudi 19 janvier 2012 11:34:05, Jukka Rahkonen a ?crit :
> Hi,
> 
> Spatialite driver document http://gdal.org/ogr/drv_sqlite.html says about
> Layer Creation Option LAUNDER
> 
> LAUNDER=yes/no: Controls whether layer and field names will be laundered
> for easier use in SQLite. Laundered names will be convered to lower case
> and some special characters will be changed to underscores.

I've added in the doc that the default value for this option is YES.

> 
> What are the special characters which are laundered? It looks like the
> Scandinavian characters ?????? are not on the list.

The special characters currently laundered are : single quote ('), minus (-), 
sharp (#). As far as converting to lower case, it is done by the tolower() C 
function which in most cases will only work for the ASCII set of characters. 
It is definitely not UTF8 ready. So the scandinavian characters will probably 
be not changed as you have noted it.

> Here is a litte
> Spatialite database which is created with the -lco LAUNDER=yes option.
> Attributes names which ?????? characters does not look the same any longer
> but they do not have underscores either. Database can be used with GDAL
> without problems as it is, but Spatialite-gui is showing those attribute
> names as empty.
> 
> http://latuviitta.org/documents/gdal_launder_test.sqlite
> 
> I solved the problem this time by editing the column names in the source
> data but it might be good to know in the future what gets laundered and
> what not.

I guess this is due to the column names not being UTF-8 (I see 
randomvesist?_nimi_s with ogrinfo in the console).

On which OS did you create that database ? I've just tested the following on 
Linux :

ogr2ogr test.sqlite -f sqlite poly.shp -sql "select '??' as '??' from poly" -
dsco SPATIALITE=YES

(where poly.shp is a random shapefile)

The UTF-8 characters are not laundered and are correctly displayed in 
spatialite_gui.

If you tried on Windows, I guess you are affected by the encoding issues you 
have already experimented with the WFS driver.

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Sat Jan 21 03:57:24 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 21 03:58:05 2012
Subject: [gdal-dev] MapInfo TAB with WindowsLatin1 into Spatialite
In-Reply-To: <loom.20120119T103553-384@post.gmane.org>
References: <loom.20120119T103553-384@post.gmane.org>
Message-ID: <201201210957.24842.even.rouault@mines-paris.org>

Le jeudi 19 janvier 2012 10:48:51, Jukka Rahkonen a ?crit :
> Hi,
> 
> My MapInfo TAB files have attributes with WindowsLatin1 encoding. Direct
> conversion with ogr2ogr from Mapinfo formta into Spatialite seems to give
> wrong encoding in the Spatialite database. I have not discoverd any direct
> way for changing the encoding into utf-8 with GDAL yet. However, I feel
> that this way I have reached a correct result:
> 
> - Convert from MapInfo into GML with ogr2ogr by using the configuration
> option --config OGR_FORCE_ASCII=no
> - Hand edit the resulting GML file and change it to have
> encoding="iso-8859-1" - Convert this edited GML file into Spatialite.
> 
> Is this the correct way for handling this case?

There is no handing of charset in the MITAB driver for now, so your above 
procedure is one way to workaround it.

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Sat Jan 21 04:13:08 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 21 04:13:54 2012
Subject: [gdal-dev] OGR2OGR seem lost the field with primary key . ex
	[OGR2OGR seem last ...]
In-Reply-To: <4F12E0B0.9010201@gmail.com>
References: <4F108E9A.4010807@gmail.com>
	<CAMKgpOZB4RYHiP-9__hmHtavDQXH7ejGy=xGq=4ZYNxn_ZYkUw@mail.gmail.com>
	<4F12E0B0.9010201@gmail.com>
Message-ID: <201201211013.08716.even.rouault@mines-paris.org>

Le dimanche 15 janvier 2012 15:20:32, aperi2007 a ?crit :
>  > The integer primary column might be going into the sqlite datasource
>  >
>  >as
>  >
>  > the FID.
> 
> Hi Chaitanya,
> 
> unfortunatelly seem no.
> 
> To have a more test I try to export from PG to shapefile.
> I can confirm that the integer primary key field is lost in exportation.
> 
> I notice also that this happened only if I ask to ogr2ogr to export to
> shapefile a full schema.
> Instead if I ask to ogr2ogr to export only one table using the -sql
> "select * from table_test" , the primary key integer is correctly exported.

I'm not sure why you see a difference of behaviour between the 2 syntax. 
Perhaps it is due to the way the primary key has been defined. It might be that 
when given by layer name, OGR detects the primary key column, whereas it 
doesn't when passed with -sql. Could you paste the schema of the table ?

Otherwise, FID are special columns in OGR. If you want to preserve them with 
ogr2ogr, you need to add the -preserve_fid option in the ogr2ogr command line.

> 
> Andrea.
> 
> Il 14/01/2012 11:59, Chaitanya kumar CH ha scritto:
> > Andrea,
> > 
> > The integer primary column might be going into the sqlite datasource as
> > the FID.
> > 
> > On Sat, Jan 14, 2012 at 1:35 AM, aperi2007 <aperi2007@gmail.com
> > 
> > <mailto:aperi2007@gmail.com>> wrote:
> >     Hi,
> >     
> >     I notice that try-ing exporting from Postgres using ogr2ogr.exe
> >     It lost completely the primary key filed if that is a integer field.
> >     Instead it don't lost the same primary key field if it is a varchar
> >     type.
> >     
> >     Is a know bug this ?
> >     
> >     I'm use the gdal 1.9.
> >     
> >     I try exporting to a spatialite or to a shapefile.
> >     Both report the lost of the field PK.
> >     
> >     The sintax I'm using is this:
> >     
> >     ogr2ogr.exe --config PG_LIST_ALL_TABLES YES --config PG_SKIP_VIEWS
> >     YES -f "SQLite" prova.sqlite -progress PG:"dbname='test'
> >     active_schema=work schemas=work host='local' port='5432'
> >     user='postgres'
> >     password='postgres' " -overwrite -lco LAUNDER=yes -dsco
> >     SPATIALITE=yes -lco SPATIAL_INDEX=yes -gt 65536
> >     
> >     Thx,
> >     
> >     Andrea.
> >     
> >     _________________________________________________
> >     gdal-dev mailing list
> >     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
> >     http://lists.osgeo.org/__mailman/listinfo/gdal-dev
> >     <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
> > 
> > --
> > Best regards,
> > Chaitanya kumar CH.
> > 
> > +91-9494447584
> > 17.2416N 80.1426E
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Sat Jan 21 04:17:45 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 21 04:17:59 2012
Subject: [gdal-dev] DWGDirect and Teigha failing to compile
In-Reply-To: <715BFDBEEEDA5245AF02E1C1DCE01C370777628E@SV025.infoterra-global.com>
References: <715BFDBEEEDA5245AF02E1C1DCE01C370777628E@SV025.infoterra-global.com>
Message-ID: <201201211017.45582.even.rouault@mines-paris.org>

Le vendredi 20 janvier 2012 10:56:34, Carman, Darren a ?crit :
> Hi,
> 
> 
> 
> I am having problems installing GDAL 1.8.1 using the Open Design
> Alliance Teigha v3 software. We run Red Hat EL6.1 64bit which used gcc
> 4.4. The Teigha distribution contains prebuilt libraries for this
> compiler, so no source code.
> 
> 
> 
> The servers we are upgrading from were Red Hat EL4.8 32bit running GDAL
> 1.4.5 and ODA 2.5 (pre Teigha branding and changes). This works fine.
> 
> 
> 
> I am unsure if this is still supported and did notice the extra dxf and
> dwg directories under ogrsf_frmts, but am unsure whether they are meant
> to replace this or use different technologies. I don't see them
> mentioned in the configure help.
> 
> 
> 
> So far I have:
> 
> a)      Downloaded the dxfdwg directory and modified GNUMakefile,
> ogr_dwg.h, OdFileBuf.cpp and OdFileBuf.h to reflect changes in ODA
> function names and allow it to build.

The dxfdwg directory from http://trac.osgeo.org/gdal/browser/spike/dxfdwg ? 
This is really unsupported stuff now. Frank Warmerdam has written a new DWG 
driver in GDAL 1.9.0 that relies on the Teigha libraries. See 
http://gdal.org/ogr/drv_dwg.html . So I'd suggest you to upgrade to 1.9.0
From aperi2007 at gmail.com  Sat Jan 21 05:32:08 2012
From: aperi2007 at gmail.com (aperi2007)
Date: Sat Jan 21 05:32:25 2012
Subject: [gdal-dev] OGR2OGR seem lost the field with primary key . ex
	[OGR2OGR seem last ...]
In-Reply-To: <201201211013.08716.even.rouault@mines-paris.org>
References: <4F108E9A.4010807@gmail.com>
	<CAMKgpOZB4RYHiP-9__hmHtavDQXH7ejGy=xGq=4ZYNxn_ZYkUw@mail.gmail.com>
	<4F12E0B0.9010201@gmail.com>
	<201201211013.08716.even.rouault@mines-paris.org>
Message-ID: <4F1A9428.5030902@gmail.com>

Hi Even,

 > I'm not sure why you see a difference of behaviour between the 2
 >syntax.
 > Perhaps it is due to the way the primary key has been defined. It 
 >might be that
 > when given by layer name, OGR detects the primary key column, whereas >it
 > doesn't when passed with -sql.
Yes,
but the issue is more complex.

In the first way (export all the schema) with this sintax:

  ogr2ogr.exe --config PG_LIST_ALL_TABLES YES --config PG_SKIP_VIEWS YES
  -f "SQLite" prova.sqlite -progress PG:"dbname='test' active_schema=work
  schemas=work host='local' port='5432' user='postgres'
  password='postgres' " -overwrite -lco LAUNDER=yes -dsco SPATIALITE=yes
  -lco SPATIAL_INDEX=yes -gt 65536

ogr2ogr probably is unable to understand what is the primary key, but 
this don't explain why if the primary-key was defined on an alphanumeric 
field, that field is correctly exported, and, instead, if the primary 
key was defined on an integer field, that field is surely ignored and 
don't exported.
If the issue was only "don't able to understand what is the PK" it 
should lost the pk field also when it is defined on an alphanumeric field.

In the second way:
if I ask to export every single table each by each
using a sintax like this:

ogr2ogr.exe --config PG_LIST_ALL_TABLES YES --config PG_SKIP_VIEWS YES 
-f "SQLite" prova.sqlite -progress PG:"dbname='test' active_schema=work 
schemas=work,public host='localhost' port='5432' user='postgres' 
password='postgres' " -overwrite -lco GEOMETRY_NAME=geom -dsco 
SPATIALITE=yes -lco SPATIAL_INDEX=yes -gt 65536  -sql "select * from 
work.accesso"

All the filed are correctly exported indipendently if they are primary 
key of integer type or primary key of alphanumeric type.

 >Could you paste the schema of the >table ?

surely I can paste you a table schema however I tested it with many 
table schema also this was tested with others Database .
It seem a systematic question.

I can give you this simple case test:

using this very simple script sql:
(the sintax is for the new postgis 2.0)

-------------------------------------------------
-------------------------------------------------
drop schema if exists testing cascade;
create schema testing;

create table testing.table1 (id integer primary key, field_2 
varchar(10), field_3 integer, geometry geometry(Point,4326));

insert into testing.table1 (id, field_2, field_3,geometry) 
values(1,'aaa',3, ST_GeomFromText('POINT(1 1)',4326));

create table testing.table2 (id varchar(10) primary key, field_2 
varchar(10), field_3 integer, geometry geometry(Point,4326));

insert into testing.table2 (id, field_2, field_3,geometry) 
values('1','aaa',3,ST_GeomFromText('POINT(1 1)',4326))
-------------------------------------------------
-------------------------------------------------

it will create a "testing" schema and populate it with two tables 
(table1 and table2) and add to each a single record .
The first table has an integer pk, menawhile the second table has an 
alphanumeric pk.

after this if I try lo export this schema in shapefile using:

ogr2ogr.exe -f "ESRI Shapefile" folder_name -progress PG:"dbname='test' 
active_schema=testing schemas=testing host='localhost' port='5432' 
user='user' password='pwd' " -overwrite

In a folder named "folder".
I can see the two shapefile where the table-1 shapefile has lost the 
field "id" instead the table-2 shapefile has the id field (the table-2 
has an alphanumeric id).

Regards,

Andrea.






Il 21/01/2012 10:13, Even Rouault ha scritto:
> Le dimanche 15 janvier 2012 15:20:32, aperi2007 a ?crit :
>>   >  The integer primary column might be going into the sqlite datasource
>>   >
>>   >as
>>   >
>>   >  the FID.
>>
>> Hi Chaitanya,
>>
>> unfortunatelly seem no.
>>
>> To have a more test I try to export from PG to shapefile.
>> I can confirm that the integer primary key field is lost in exportation.
>>
>> I notice also that this happened only if I ask to ogr2ogr to export to
>> shapefile a full schema.
>> Instead if I ask to ogr2ogr to export only one table using the -sql
>> "select * from table_test" , the primary key integer is correctly exported.
>
> I'm not sure why you see a difference of behaviour between the 2 syntax.
> Perhaps it is due to the way the primary key has been defined. It might be that
> when given by layer name, OGR detects the primary key column, whereas it
> doesn't when passed with -sql. Could you paste the schema of the table ?
>
> Otherwise, FID are special columns in OGR. If you want to preserve them with
> ogr2ogr, you need to add the -preserve_fid option in the ogr2ogr command line.
>
>>
>> Andrea.
>>
>> Il 14/01/2012 11:59, Chaitanya kumar CH ha scritto:
>>> Andrea,
>>>
>>> The integer primary column might be going into the sqlite datasource as
>>> the FID.
>>>
>>> On Sat, Jan 14, 2012 at 1:35 AM, aperi2007<aperi2007@gmail.com
>>>
>>> <mailto:aperi2007@gmail.com>>  wrote:
>>>      Hi,
>>>
>>>      I notice that try-ing exporting from Postgres using ogr2ogr.exe
>>>      It lost completely the primary key filed if that is a integer field.
>>>      Instead it don't lost the same primary key field if it is a varchar
>>>      type.
>>>
>>>      Is a know bug this ?
>>>
>>>      I'm use the gdal 1.9.
>>>
>>>      I try exporting to a spatialite or to a shapefile.
>>>      Both report the lost of the field PK.
>>>
>>>      The sintax I'm using is this:
>>>
>>>      ogr2ogr.exe --config PG_LIST_ALL_TABLES YES --config PG_SKIP_VIEWS
>>>      YES -f "SQLite" prova.sqlite -progress PG:"dbname='test'
>>>      active_schema=work schemas=work host='local' port='5432'
>>>      user='postgres'
>>>      password='postgres' " -overwrite -lco LAUNDER=yes -dsco
>>>      SPATIALITE=yes -lco SPATIAL_INDEX=yes -gt 65536
>>>
>>>      Thx,
>>>
>>>      Andrea.
>>>
>>>      _________________________________________________
>>>      gdal-dev mailing list
>>>      gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
>>>      http://lists.osgeo.org/__mailman/listinfo/gdal-dev
>>>      <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From even.rouault at mines-paris.org  Sat Jan 21 06:28:08 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 21 06:28:49 2012
Subject: [gdal-dev] OGR2OGR seem lost the field with primary key . ex
	[OGR2OGR seem last ...]
In-Reply-To: <4F1A9428.5030902@gmail.com>
References: <4F108E9A.4010807@gmail.com>
	<201201211013.08716.even.rouault@mines-paris.org>
	<4F1A9428.5030902@gmail.com>
Message-ID: <201201211228.08335.even.rouault@mines-paris.org>

Andrea,

Several points :
1) in the OGR data model, there is the concept of feature ID. According to 
http://gdal.org/ogr/ogr_arch.html :
"""The feature id (FID) of a feature is intended to be a unique identifier for 
the feature within the layer it is a member of. Freestanding features, or 
features not yet written to a layer may have a null (OGRNullFID) feature id. 
The feature ids are modelled in OGR as a long integer; however, this is not 
sufficiently expressive to model the natural feature ids in some formats. For 
instance, the GML feature id is a string, and the row id in Oracle is larger 
than 4 bytes."""

In the case of the PG driver, 
* when examining a OGR layer resulting from a PG table (which is the case when 
you only pass the name of the PG datasource to ogrinfo/ogr2ogr, or pass the 
name of one or several of its layers directly, i.e *without* a -sql 
statement), it will query the PG system tables to look for a primary key 
column of type int2, int4 or serial for the table. If found, this will be 
considered as the FID column. If it's of another type (like varchar), the 
column will be seen as a regular column.
* when examining a  OGRlayer resulting from the result of a -sql request, it 
will only identify a FID column if the column is named "ogc_fid".

All the above explains what you observe on the below samples :

* table1 has a integer primary key.

If you try :

ogrinfo PG:dbname=xxxx testing.table1

you'll see : FID Column = id  and the id column will not be listed as a 
regular field. The values of the FID are given at the end of each of the lines 
beginning by OGRFeature(testing.table1), like OGRFeature(testing.table1):1

If you try :

ogrinfo PG:dbname=xxxx -sql "select * from testing.table1"

you won't see a FID Column line, but the id column will be listed as a regular 
field (its name is not ogc_fid). In the case, OGR will create a fake FID, and 
you'll see OGRFeature(sql_statement):0

* table2 has a varchar primary key. In both cases (directly providing 
testing.table2 or via a -sql statement), this will be considered as a regular 
field by OGR.

When translating to shapefiles, FIDs cannot be preserved directly (the FID of a 
shapefile is a sequential number). You must transform the FID column as a 
regular column with a -sql statement.

But when translating to sqlite DBs, they can be preserved with the -
preserve_fid option of ogr2ogr.

For example :

1) Create a table with a feature whose primary key is 10

drop schema if exists testing cascade;
create schema testing;
create table testing.table1 (id integer primary key, field_2 varchar(10), 
field_3 integer, geometry geometry(Point,4326));
insert into testing.table1 (id, field_2, field_3,geometry) values(10,'aaa',3, 
ST_GeomFromText('POINT(1 1)',4326));

2) Check with ogrinfo that the FID is correctly identified :

$ ogrinfo pg:dbname=autotest-postgis2.0 testing.table1
INFO: Open of `pg:dbname=autotest-postgis2.0'
      using driver `PostgreSQL' successful.

Layer name: testing.table1
Geometry: Point
Feature Count: 1
Extent: (1.000000, 1.000000) - (1.000000, 1.000000)
Layer SRS WKT:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.01745329251994328,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"]]
FID Column = id
Geometry Column = geometry
field_2: String (10.0)
field_3: Integer (0.0)
OGRFeature(testing.table1):10
  field_2 (String) = aaa
  field_3 (Integer) = 3
  POINT (1 1)

3) Translate to SQLite db with -preserve_fid option :

$ ogr2ogr table1.sqlite pg:dbname=autotest-postgis2.0 testing.table1 -f sqlite 
-preserve_fid -nln table1 -dsco SPATIALITE=YES

4) Check the DB with ogrinfo :

INFO: Open of `table1.sqlite'
      using driver `SQLite' successful.

Layer name: table1
Geometry: Point
Feature Count: 1
Extent: (1.000000, 1.000000) - (1.000000, 1.000000)
Layer SRS WKT:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"]]
FID Column = OGC_FID
Geometry Column = GEOMETRY
field_2: String (0.0)
field_3: Integer (0.0)
OGRFeature(table1):10
  field_2 (String) = aaa
  field_3 (Integer) = 3
  POINT (1 1)

5) You can retrieve it as a regular field with :
$ ogrinfo table1.sqlite -sql "select *, ogc_fid as id from table1"
INFO: Open of `table1.sqlite'
      using driver `SQLite' successful.

Layer name: SELECT
Geometry: Unknown (any)
Feature Count: 1
Extent: (1.000000, 1.000000) - (1.000000, 1.000000)
Layer SRS WKT:
(unknown)
Geometry Column = GEOMETRY
field_2: String (0.0)
field_3: Integer (0.0)
id: Integer (0.0)
OGRFeature(SELECT):0
  field_2 (String) = aaa
  field_3 (Integer) = 3
  id (Integer) = 10
  POINT (1 1)



Best regards,

Even
From jluis at ualg.pt  Sat Jan 21 15:59:40 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat Jan 21 16:00:48 2012
Subject: [gdal-dev] Is this vsi* behavior intended?
In-Reply-To: <201201210935.26021.even.rouault@mines-paris.org>
References: <4F1A2137.2030502@ualg.pt>
	<201201210935.26021.even.rouault@mines-paris.org>
Message-ID: <4F1B273C.7070405@ualg.pt>

On 21-01-2012 08:35, Even Rouault wrote:
> Le samedi 21 janvier 2012 03:21:43, Joaquim Luis a ?crit :
>> Hi,
>>
>> I'm puzzled with this behavior of the vsi* functions
>>
>> The first call that uses vsigzip because file is gzipped
>> /vsigzip/vsicurl/http:.../...30S.ACE2.gz gives an error. However, if I
>> remove the the '/vsigzip' than the command runs fine and I'm able to
>> access the file.
>>
>> Is this intended (it took me quite a while to figure this out)?
> Several points :
>
> * the correct syntax when combining /vsi.../ domains is to have a double slash
> between them :  /vsigzip//vsicurl/http:.../...30S.ACE2.gz
> * there was a typo in the ACE2 driver that prevented the above to work. The fix
> has been now commited
> * there is a autodetection mechanism in the ACE2 driver to automatically
> prepend /vsigzip/ in front of the filename if /vsigzip/ isn't already there and
> that the extension is .ace2.gz
>
> Hope that it explains everything.

Even,

Thanks for the explanation + fix but I was not aware that the correct 
syntax is to use a double slash. The docs does not sate that and in fact 
the examples there http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip 
show (for example)

ogrinfo -ro -al -so 
/vsizip/vsicurl/http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.zip

BTW, be careful using the ACE2 data. There are LOTS of inventions at 
sea. See example below made from 30N015W_BOTH_30S.ACE2.gz

Cheers

Joaquim

-------------- next part --------------
A non-text attachment was scrubbed...
Name: ace2.jpg
Type: image/jpeg
Size: 32714 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120121/c09f89fe/ace2-0001.jpg
From even.rouault at mines-paris.org  Sat Jan 21 16:15:18 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 21 16:16:01 2012
Subject: [gdal-dev] Is this vsi* behavior intended?
In-Reply-To: <4F1B239C.1010407@ualg.pt>
References: <4F1A2137.2030502@ualg.pt>
	<201201210935.26021.even.rouault@mines-paris.org>
	<4F1B239C.1010407@ualg.pt>
Message-ID: <201201212215.18690.even.rouault@mines-paris.org>

> Even,
> 
> Thanks for the explanation + fix but I was not aware that the correct
> syntax is to use a double slash. The docs does not sate that and in fact
> the examples there http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip
> show (for example)
> 
> ogrinfo -ro -al -so
> /vsizip/vsicurl/http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.zip

Yes, there is syntax sugar for combining /vsizip/ and /vsicurl/ where you are 
not obliged to repeat twice the slash between them, but however it seems not 
to exist for /vsigzip/ and /vsicurl/.
From jluis at ualg.pt  Sat Jan 21 17:17:07 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat Jan 21 17:17:49 2012
Subject: [gdal-dev] Is this vsi* behavior intended?
In-Reply-To: <201201212215.18690.even.rouault@mines-paris.org>
References: <4F1A2137.2030502@ualg.pt>
	<201201210935.26021.even.rouault@mines-paris.org>
	<4F1B239C.1010407@ualg.pt>
	<201201212215.18690.even.rouault@mines-paris.org>
Message-ID: <4F1B3963.8010908@ualg.pt>

On 21-01-2012 21:15, Even Rouault wrote:
>> Even,
>>
>> Thanks for the explanation + fix but I was not aware that the correct
>> syntax is to use a double slash. The docs does not sate that and in fact
>> the examples there http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip
>> show (for example)
>>
>> ogrinfo -ro -al -so
>> /vsizip/vsicurl/http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.zip
> Yes, there is syntax sugar for combining /vsizip/ and /vsicurl/ where you are
> not obliged to repeat twice the slash between them, but however it seems not
> to exist for /vsigzip/ and /vsicurl/.

Ah, and will there be a 'gzsugarizing' op?

Also, I forgot ask before. The ACE2 driver says that elevation data is 
return as float but what is the 'NoDataValue' for this?

From even.rouault at mines-paris.org  Sat Jan 21 17:49:42 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 21 17:50:27 2012
Subject: [gdal-dev] Is this vsi* behavior intended?
In-Reply-To: <4F1B3963.8010908@ualg.pt>
References: <4F1A2137.2030502@ualg.pt>
	<201201212215.18690.even.rouault@mines-paris.org>
	<4F1B3963.8010908@ualg.pt>
Message-ID: <201201212349.42541.even.rouault@mines-paris.org>

Le samedi 21 janvier 2012 23:17:07, Joaquim Luis a ?crit :
> On 21-01-2012 21:15, Even Rouault wrote:
> >> Even,
> >> 
> >> Thanks for the explanation + fix but I was not aware that the correct
> >> syntax is to use a double slash. The docs does not sate that and in fact
> >> the examples there http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip
> >> show (for example)
> >> 
> >> ogrinfo -ro -al -so
> >> /vsizip/vsicurl/http://svn.osgeo.org/gdal/trunk/autotest/ogr/data/poly.z
> >> ip
> > 
> > Yes, there is syntax sugar for combining /vsizip/ and /vsicurl/ where you
> > are not obliged to repeat twice the slash between them, but however it
> > seems not to exist for /vsigzip/ and /vsicurl/.
> 
> Ah, and will there be a 'gzsugarizing' op?

Not sure it is worth the effort as /vsigzip and /vsicurl combined are not so 
common.

> 
> Also, I forgot ask before. The ACE2 driver says that elevation data is
> return as float but what is the 'NoDataValue' for this?

I don't know if there's an explicit nodata, but you can perhaps derive it from 
the source/quality/confidence layer datasets ?

For example :

gdalinfo 
/vsigzip//vsicurl/http://tethys.eaprs.cse.dmu.ac.uk/ACE2/links/ACE2_30_SECONDS/ACE2_30S_SOURCE/30N015W_SOURCE_30S.ACE2.gz 
-hist -stats

From jluis at ualg.pt  Sat Jan 21 18:50:44 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat Jan 21 18:51:44 2012
Subject: [gdal-dev] Is this vsi* behavior intended?
In-Reply-To: <201201212349.42541.even.rouault@mines-paris.org>
References: <4F1A2137.2030502@ualg.pt>
	<201201212215.18690.even.rouault@mines-paris.org>
	<4F1B3963.8010908@ualg.pt>
	<201201212349.42541.even.rouault@mines-paris.org>
Message-ID: <4F1B4F54.50809@ualg.pt>


>> Also, I forgot ask before. The ACE2 driver says that elevation data is
>> return as float but what is the 'NoDataValue' for this?
> I don't know if there's an explicit nodata, but you can perhaps derive it from
> the source/quality/confidence layer datasets ?
>
> For example :
>
> gdalinfo
> /vsigzip//vsicurl/http://tethys.eaprs.cse.dmu.ac.uk/ACE2/links/ACE2_30_SECONDS/ACE2_30S_SOURCE/30N015W_SOURCE_30S.ACE2.gz
> -hist -stats

Thanks, but I think the quality of marine data (lousy) cooled down my 
interest for this dataset.

Joaquim
From aperi2007 at gmail.com  Sun Jan 22 05:06:36 2012
From: aperi2007 at gmail.com (aperi2007)
Date: Sun Jan 22 05:06:48 2012
Subject: [gdal-dev] OGR2OGR seem lost the field with primary key . ex
	[OGR2OGR seem last ...]
In-Reply-To: <201201211228.08335.even.rouault@mines-paris.org>
References: <4F108E9A.4010807@gmail.com>
	<201201211013.08716.even.rouault@mines-paris.org>
	<4F1A9428.5030902@gmail.com>
	<201201211228.08335.even.rouault@mines-paris.org>
Message-ID: <4F1BDFAC.2020501@gmail.com>

Hi, Even

thx for you full explanation . :)

It is really useful for me.

Andrea.


Il 21/01/2012 12:28, Even Rouault ha scritto:
> Andrea,
>
> Several points :
> 1) in the OGR data model, there is the concept of feature ID. According to
> http://gdal.org/ogr/ogr_arch.html :
> """The feature id (FID) of a feature is intended to be a unique identifier for
> the feature within the layer it is a member of. Freestanding features, or
> features not yet written to a layer may have a null (OGRNullFID) feature id.
> The feature ids are modelled in OGR as a long integer; however, this is not
> sufficiently expressive to model the natural feature ids in some formats. For
> instance, the GML feature id is a string, and the row id in Oracle is larger
> than 4 bytes."""
>
> In the case of the PG driver,
> * when examining a OGR layer resulting from a PG table (which is the case when
> you only pass the name of the PG datasource to ogrinfo/ogr2ogr, or pass the
> name of one or several of its layers directly, i.e *without* a -sql
> statement), it will query the PG system tables to look for a primary key
> column of type int2, int4 or serial for the table. If found, this will be
> considered as the FID column. If it's of another type (like varchar), the
> column will be seen as a regular column.
> * when examining a  OGRlayer resulting from the result of a -sql request, it
> will only identify a FID column if the column is named "ogc_fid".
>
> All the above explains what you observe on the below samples :
>
> * table1 has a integer primary key.
>
> If you try :
>
> ogrinfo PG:dbname=xxxx testing.table1
>
> you'll see : FID Column = id  and the id column will not be listed as a
> regular field. The values of the FID are given at the end of each of the lines
> beginning by OGRFeature(testing.table1), like OGRFeature(testing.table1):1
>
> If you try :
>
> ogrinfo PG:dbname=xxxx -sql "select * from testing.table1"
>
> you won't see a FID Column line, but the id column will be listed as a regular
> field (its name is not ogc_fid). In the case, OGR will create a fake FID, and
> you'll see OGRFeature(sql_statement):0
>
> * table2 has a varchar primary key. In both cases (directly providing
> testing.table2 or via a -sql statement), this will be considered as a regular
> field by OGR.
>
> When translating to shapefiles, FIDs cannot be preserved directly (the FID of a
> shapefile is a sequential number). You must transform the FID column as a
> regular column with a -sql statement.
>
> But when translating to sqlite DBs, they can be preserved with the -
> preserve_fid option of ogr2ogr.
>
> For example :
>
> 1) Create a table with a feature whose primary key is 10
>
> drop schema if exists testing cascade;
> create schema testing;
> create table testing.table1 (id integer primary key, field_2 varchar(10),
> field_3 integer, geometry geometry(Point,4326));
> insert into testing.table1 (id, field_2, field_3,geometry) values(10,'aaa',3,
> ST_GeomFromText('POINT(1 1)',4326));
>
> 2) Check with ogrinfo that the FID is correctly identified :
>
> $ ogrinfo pg:dbname=autotest-postgis2.0 testing.table1
> INFO: Open of `pg:dbname=autotest-postgis2.0'
>        using driver `PostgreSQL' successful.
>
> Layer name: testing.table1
> Geometry: Point
> Feature Count: 1
> Extent: (1.000000, 1.000000) - (1.000000, 1.000000)
> Layer SRS WKT:
> GEOGCS["WGS 84",
>      DATUM["WGS_1984",
>          SPHEROID["WGS 84",6378137,298.257223563,
>              AUTHORITY["EPSG","7030"]],
>          AUTHORITY["EPSG","6326"]],
>      PRIMEM["Greenwich",0,
>          AUTHORITY["EPSG","8901"]],
>      UNIT["degree",0.01745329251994328,
>          AUTHORITY["EPSG","9122"]],
>      AUTHORITY["EPSG","4326"]]
> FID Column = id
> Geometry Column = geometry
> field_2: String (10.0)
> field_3: Integer (0.0)
> OGRFeature(testing.table1):10
>    field_2 (String) = aaa
>    field_3 (Integer) = 3
>    POINT (1 1)
>
> 3) Translate to SQLite db with -preserve_fid option :
>
> $ ogr2ogr table1.sqlite pg:dbname=autotest-postgis2.0 testing.table1 -f sqlite
> -preserve_fid -nln table1 -dsco SPATIALITE=YES
>
> 4) Check the DB with ogrinfo :
>
> INFO: Open of `table1.sqlite'
>        using driver `SQLite' successful.
>
> Layer name: table1
> Geometry: Point
> Feature Count: 1
> Extent: (1.000000, 1.000000) - (1.000000, 1.000000)
> Layer SRS WKT:
> GEOGCS["WGS 84",
>      DATUM["WGS_1984",
>          SPHEROID["WGS 84",6378137,298.257223563,
>              AUTHORITY["EPSG","7030"]],
>          AUTHORITY["EPSG","6326"]],
>      PRIMEM["Greenwich",0,
>          AUTHORITY["EPSG","8901"]],
>      UNIT["degree",0.0174532925199433,
>          AUTHORITY["EPSG","9122"]],
>      AUTHORITY["EPSG","4326"]]
> FID Column = OGC_FID
> Geometry Column = GEOMETRY
> field_2: String (0.0)
> field_3: Integer (0.0)
> OGRFeature(table1):10
>    field_2 (String) = aaa
>    field_3 (Integer) = 3
>    POINT (1 1)
>
> 5) You can retrieve it as a regular field with :
> $ ogrinfo table1.sqlite -sql "select *, ogc_fid as id from table1"
> INFO: Open of `table1.sqlite'
>        using driver `SQLite' successful.
>
> Layer name: SELECT
> Geometry: Unknown (any)
> Feature Count: 1
> Extent: (1.000000, 1.000000) - (1.000000, 1.000000)
> Layer SRS WKT:
> (unknown)
> Geometry Column = GEOMETRY
> field_2: String (0.0)
> field_3: Integer (0.0)
> id: Integer (0.0)
> OGRFeature(SELECT):0
>    field_2 (String) = aaa
>    field_3 (Integer) = 3
>    id (Integer) = 10
>    POINT (1 1)
>
>
>
> Best regards,
>
> Even
>

From aperi2007 at gmail.com  Sun Jan 22 05:14:22 2012
From: aperi2007 at gmail.com (aperi2007)
Date: Sun Jan 22 05:14:55 2012
Subject: [gdal-dev] How create a spatial index for shapefiles
Message-ID: <4F1BE17E.50901@gmail.com>

Hi,

I'm try-ing to export from spatialite to shapefile using ogr2ogr.
it work but I like to procude also the spatial-index file .qix.
I don't find any option to do this for shapefile.

Is this possible ?

Thx,

Andrea.
From even.rouault at mines-paris.org  Sun Jan 22 05:18:05 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jan 22 05:18:41 2012
Subject: [gdal-dev] How create a spatial index for shapefiles
In-Reply-To: <4F1BE17E.50901@gmail.com>
References: <4F1BE17E.50901@gmail.com>
Message-ID: <201201221118.05202.even.rouault@mines-paris.org>

Le dimanche 22 janvier 2012 11:14:22, aperi2007 a ?crit :
> Hi,
> 
> I'm try-ing to export from spatialite to shapefile using ogr2ogr.
> it work but I like to procude also the spatial-index file .qix.
> I don't find any option to do this for shapefile.
> 
> Is this possible ?

Yes, see the "Spatial and attribute indexing" section of 
http://gdal.org/ogr/drv_shapefile.html

> 
> Thx,
> 
> Andrea.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jukka.rahkonen at mmmtike.fi  Sun Jan 22 06:03:02 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun Jan 22 06:03:53 2012
Subject: [gdal-dev] Different result from GML with .xsd and .gfs
Message-ID: <loom.20120122T115335-249@post.gmane.org>

Hi,

I have been doing conversions from Mapinfo files with iso-8859-1 encoding into
Spatialite by using GML format as an interim format. I have noticed that in I
let ogr2ogr to create .xsd file the conversion of attribute names with 
non-ascii characterd does not go in a righ way even if I edit both the .gml 
and .xsd fileto have correct encoding in the header line. But if I do not 
have .xsd file at all and ogr2ogr creates .gfs file when doing the GML ->
Spatialite conversion the result seems to be correct.

This can be tested with this Mapinfo file
http://latuviitta.org/documents/m_asalue.zip

1. ogr2ogr -f GML testi.gml m_asalue.tab
2. edit encoding header of testi.gml and testi.xsd into iso-8859-1
3. ogr2ogr -f SQLite -dsco spatialite=yes -a_srs epsg:2392 test_1.sqlite 
   test.gml
4. delete testi.xsd file
5. ogr2ogr -f SQLite -dsco spatialite=yes -a_srs epssg:2392 test_2.sqlite 
   test.gml

When I open testi_1.sqlite with Spatialite-gui it shows one attribute name 
in a wrong way but it looks correct in testi_2.sqlite. 

-Jukka Rahkonen-

From chaitanya.ch at gmail.com  Sun Jan 22 06:04:54 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Jan 22 06:05:39 2012
Subject: [gdal-dev] How create a spatial index for shapefiles
In-Reply-To: <201201221118.05202.even.rouault@mines-paris.org>
References: <4F1BE17E.50901@gmail.com>
	<201201221118.05202.even.rouault@mines-paris.org>
Message-ID: <CAMKgpOYk=2Z4wLmui-RYcLLvNiB87X=Je4UOGcLaz9BNJsAAYQ@mail.gmail.com>

The SQL command to create a spatial index can be given through ogrinfo.

ogrinfo -sql "CREATE SPATIAL INDEX ON file1 [DEPTH N]" file1.shp


On Sun, Jan 22, 2012 at 3:48 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le dimanche 22 janvier 2012 11:14:22, aperi2007 a ?crit :
> > Hi,
> >
> > I'm try-ing to export from spatialite to shapefile using ogr2ogr.
> > it work but I like to procude also the spatial-index file .qix.
> > I don't find any option to do this for shapefile.
> >
> > Is this possible ?
>
> Yes, see the "Spatial and attribute indexing" section of
> http://gdal.org/ogr/drv_shapefile.html
>
> >
> > Thx,
> >
> > Andrea.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120122/75bfd83a/attachment-0001.html
From even.rouault at mines-paris.org  Sun Jan 22 06:16:36 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jan 22 06:16:59 2012
Subject: [gdal-dev] Different result from GML with .xsd and .gfs
In-Reply-To: <loom.20120122T115335-249@post.gmane.org>
References: <loom.20120122T115335-249@post.gmane.org>
Message-ID: <201201221216.36385.even.rouault@mines-paris.org>

Le dimanche 22 janvier 2012 12:03:02, Jukka Rahkonen a ?crit :
> Hi,
> 
> I have been doing conversions from Mapinfo files with iso-8859-1 encoding
> into Spatialite by using GML format as an interim format. I have noticed
> that in I let ogr2ogr to create .xsd file the conversion of attribute
> names with non-ascii characterd does not go in a righ way even if I edit
> both the .gml and .xsd fileto have correct encoding in the header line.
> But if I do not have .xsd file at all and ogr2ogr creates .gfs file when
> doing the GML -> Spatialite conversion the result seems to be correct.
> 
> This can be tested with this Mapinfo file
> http://latuviitta.org/documents/m_asalue.zip
> 
> 1. ogr2ogr -f GML testi.gml m_asalue.tab
> 2. edit encoding header of testi.gml and testi.xsd into iso-8859-1
> 3. ogr2ogr -f SQLite -dsco spatialite=yes -a_srs epsg:2392 test_1.sqlite
>    test.gml
> 4. delete testi.xsd file
> 5. ogr2ogr -f SQLite -dsco spatialite=yes -a_srs epssg:2392 test_2.sqlite
>    test.gml
> 
> When I open testi_1.sqlite with Spatialite-gui it shows one attribute name
> in a wrong way but it looks correct in testi_2.sqlite.

Yes, this is due to the XML mini parser directly integrated to GDAL that is 
used to parse the .xsd. It doesn't understand the XML encoding header, so 
assumes the content to be always utf-8.

As suggested by someone in a previous related bost, you'd better use iconv 
instead of editing the files.

1) ogr2ogr -f GML testi.gml m_asalue.tab
2) iconv -f iso-8859-1 -t utf-8 < testi.gml > testi_utf8.gml
3) iconv -f iso-8859-1 -t utf-8 < testi.xsd > testi_utf8.xsd
4) ogr2ogr -f SQLite -dsco spatialite=yes -a_srs epsg:2392 test.sqlite 
testi_utf8.gml

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From aperi2007 at gmail.com  Sun Jan 22 06:48:33 2012
From: aperi2007 at gmail.com (aperi2007)
Date: Sun Jan 22 06:49:15 2012
Subject: [gdal-dev] How create a spatial index for shapefiles
In-Reply-To: <CAMKgpOYk=2Z4wLmui-RYcLLvNiB87X=Je4UOGcLaz9BNJsAAYQ@mail.gmail.com>
References: <4F1BE17E.50901@gmail.com>
	<201201221118.05202.even.rouault@mines-paris.org>
	<CAMKgpOYk=2Z4wLmui-RYcLLvNiB87X=Je4UOGcLaz9BNJsAAYQ@mail.gmail.com>
Message-ID: <4F1BF791.6090803@gmail.com>

thx for hint.

I wrongly try to use the ogr2ogr. :)

Andrea.

Il 22/01/2012 12:04, Chaitanya kumar CH ha scritto:
> The SQL command to create a spatial index can be given through ogrinfo.
>
> ogrinfo -sql"CREATE SPATIAL INDEX ON file1 [DEPTH N]"  file1.shp
>
>
> On Sun, Jan 22, 2012 at 3:48 PM, Even Rouault
> <even.rouault@mines-paris.org <mailto:even.rouault@mines-paris.org>> wrote:
>
>     Le dimanche 22 janvier 2012 11:14:22, aperi2007 a ?crit :
>      > Hi,
>      >
>      > I'm try-ing to export from spatialite to shapefile using ogr2ogr.
>      > it work but I like to procude also the spatial-index file .qix.
>      > I don't find any option to do this for shapefile.
>      >
>      > Is this possible ?
>
>     Yes, see the "Spatial and attribute indexing" section of
>     http://gdal.org/ogr/drv_shapefile.html
>
>      >
>      > Thx,
>      >
>      > Andrea.
>      > _______________________________________________
>      > gdal-dev mailing list
>      > gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>      > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E

From jukka.rahkonen at mmmtike.fi  Sun Jan 22 07:18:03 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun Jan 22 07:18:50 2012
Subject: [gdal-dev] Re: Different result from GML with .xsd and .gfs
References: <loom.20120122T115335-249@post.gmane.org>
	<201201221216.36385.even.rouault@mines-paris.org>
Message-ID: <loom.20120122T130729-391@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

...
> 
> Yes, this is due to the XML mini parser directly integrated to GDAL that is 
> used to parse the .xsd. It doesn't understand the XML encoding header, so 
> assumes the content to be always utf-8.
> 
> As suggested by someone in a previous related bost, you'd better use iconv 
> instead of editing the files.
> 
> 1) ogr2ogr -f GML testi.gml m_asalue.tab
> 2) iconv -f iso-8859-1 -t utf-8 < testi.gml > testi_utf8.gml
> 3) iconv -f iso-8859-1 -t utf-8 < testi.xsd > testi_utf8.xsd
> 4) ogr2ogr -f SQLite -dsco spatialite=yes -a_srs epsg:2392 test.sqlite 
> testi_utf8.gml

Perhaps worth mentioning this in the GML driver document? Now it gives a feeling
that encoding support is general for both .gml and .xsd.

Encoding issues
Expat library supports reading the following built-in encodings :

    US-ASCII
    UTF-8
    UTF-16
    ISO-8859-1

How about adding something like:
" However, the .xsd schema files are parsed with the integrated minidriver which
does not understand different XML encodings. It expects encoding to be always
utf-8. If attribute names in the schema file contains non-ascii characters it is
better to use external iconv utility and convert both the .gml and .xsd file
into utf-8 encoding first. "

-Jukka Rahkonen-




From even.rouault at mines-paris.org  Sun Jan 22 07:39:13 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jan 22 07:39:12 2012
Subject: [gdal-dev] Re: Different result from GML with .xsd and .gfs
In-Reply-To: <loom.20120122T130729-391@post.gmane.org>
References: <loom.20120122T115335-249@post.gmane.org>
	<201201221216.36385.even.rouault@mines-paris.org>
	<loom.20120122T130729-391@post.gmane.org>
Message-ID: <201201221339.13428.even.rouault@mines-paris.org>

> Perhaps worth mentioning this in the GML driver document? 

Done. Thanks. I've also filed http://trac.osgeo.org/gdal/ticket/4461 because 
the current situation isn't really ideal.

> 
> -Jukka Rahkonen-
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From newmanw10 at gmail.com  Sun Jan 22 11:16:28 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Sun Jan 22 11:17:28 2012
Subject: [gdal-dev] Support for VPF (vector product format) files with OGDI
Message-ID: <CAD34qgmBpnhUg3Z=FDS1=2qJfx9GOMgtyP4Q3yaEm5Hym-TbDg@mail.gmail.com>

I am trying to read VPF files like VMAP0 and having some problems.  Far as
I can tell the only way to read VPF using gdal is to compile OGDI.

I compiled on Redhat EL version 5.6 64 bit, gcc 4.2.x

When trying to run ogrinfo (pulled directly from examples). VMAP files are
on
my local box.

ogrinfo gltp:/vrf/imagery/v0eur/vmaplv0/eurnasia 'watrcrsl@hydro(*)_line'

I get the following error Parse_data_definition: malloc
failed.Parse_data_definition: malloc failed.FAILURE:
Unable to open datasource 'gltp:/vrf/imagery/v0eur/vmaplv0/eurnasia' with
the
following drivers:

<list of drivers>

I followed the build instructions here:
http://ogdi.sourceforge.net/build.html.

Has anyone else had success reading VPF files?

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120122/632a750f/attachment.html
From Martin.Spott at mgras.net  Sun Jan 22 12:26:36 2012
From: Martin.Spott at mgras.net (Martin Spott)
Date: Sun Jan 22 12:27:20 2012
Subject: [gdal-dev] Support for VPF (vector product format) files with OGDI
References: <CAD34qgmBpnhUg3Z=FDS1=2qJfx9GOMgtyP4Q3yaEm5Hym-TbDg@mail.gmail.com>
Message-ID: <jfhgsc$i04g$1@osprey.mgras.de>

Billy Newman wrote:

> I compiled on Redhat EL version 5.6 64 bit, gcc 4.2.x

Last time I tried direct access to VMap0 I reverted back to a 32 bit
platform from my 64 bit setup (both Linux Debian).  I don't remember
the exact reason but your message sounds somewhat familiar.  The first
thing I did was to convert all the stuff into Shapefiles ....

If it helps and it you don't bother waiting a few days (the server is
currently down), then I'll make the files publicly available.  I've put
everything into a file name nomenclature of "eur_hydro-inwatera-area"
and the like, thus the various features should be easy to identify.

Cheers,
        Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------
From darren.carman at infoterra-global.com  Mon Jan 23 04:08:51 2012
From: darren.carman at infoterra-global.com (Carman, Darren)
Date: Mon Jan 23 04:09:19 2012
Subject: [gdal-dev] DWGDirect and Teigha failing to compile
In-Reply-To: <201201211017.45582.even.rouault@mines-paris.org>
References: <715BFDBEEEDA5245AF02E1C1DCE01C370777628E@SV025.infoterra-global.com>
	<201201211017.45582.even.rouault@mines-paris.org>
Message-ID: <715BFDBEEEDA5245AF02E1C1DCE01C370777659C@SV025.infoterra-global.com>

Thanks Even. I will give that a go.

Darren Carman
Senior Software Engineer
GEO-Information Services

Astrium Services
Tel +44 (0)1252 362138
http://www.infoterra.co.uk

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: 21 January 2012 09:18
To: gdal-dev@lists.osgeo.org
Cc: Carman, Darren
Subject: Re: [gdal-dev] DWGDirect and Teigha failing to compile

Le vendredi 20 janvier 2012 10:56:34, Carman, Darren a ?crit :
> Hi,
> 
> 
> 
> I am having problems installing GDAL 1.8.1 using the Open Design
> Alliance Teigha v3 software. We run Red Hat EL6.1 64bit which used gcc
> 4.4. The Teigha distribution contains prebuilt libraries for this
> compiler, so no source code.
> 
> 
> 
> The servers we are upgrading from were Red Hat EL4.8 32bit running GDAL
> 1.4.5 and ODA 2.5 (pre Teigha branding and changes). This works fine.
> 
> 
> 
> I am unsure if this is still supported and did notice the extra dxf and
> dwg directories under ogrsf_frmts, but am unsure whether they are meant
> to replace this or use different technologies. I don't see them
> mentioned in the configure help.
> 
> 
> 
> So far I have:
> 
> a)      Downloaded the dxfdwg directory and modified GNUMakefile,
> ogr_dwg.h, OdFileBuf.cpp and OdFileBuf.h to reflect changes in ODA
> function names and allow it to build.

The dxfdwg directory from http://trac.osgeo.org/gdal/browser/spike/dxfdwg ? 
This is really unsupported stuff now. Frank Warmerdam has written a new DWG 
driver in GDAL 1.9.0 that relies on the Teigha libraries. See 
http://gdal.org/ogr/drv_dwg.html . So I'd suggest you to upgrade to 1.9.0

Infoterra Ltd. Is part of the Astrium GEO-Information Services Division and a wholly owned subsidiary of Astrium, Europe's leading space systems and services specialist.

Disclaimer. The information contained in this e-mail and its attachments are confidential and intended only for the use of the named addressee(s). If you are not the intended addressee, please do not read, copy, use or disclose this message or its attachments. If you have received this message in error, please notify the sender immediately and delete or destroy all copies of this message and attachments in all media. Any views or opinions expressed are solely those of the author and do not necessarily represent those of Infoterra Ltd and shall not form part of any binding agreement.

Infoterra Limited a company registered in England under number 2359955 and having its registered office at Atlas House, 41 Wembley Road, Leicester, LE3 1UT. VAT number GB 476 0468 27. 

P Before printing, think about the environment 

From daniele.romagnoli at geo-solutions.it  Mon Jan 23 12:12:14 2012
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Mon Jan 23 12:12:44 2012
Subject: [gdal-dev] GDAL 1.7.3 java bindings on Centos 5 (64 bit)
In-Reply-To: <CAJaHrDzm-55RULbL8J8N-B4vCzFrvspMft4k9VtwnMX8eo0wPA@mail.gmail.com>
References: <CAJaHrDzm-55RULbL8J8N-B4vCzFrvspMft4k9VtwnMX8eo0wPA@mail.gmail.com>
Message-ID: <CAJaHrDyZ3dEVDSOYF1yoo328J-dLSUsbeznNbMPXSOCH7wjmSQ@mail.gmail.com>

Hi list,
Does anyone have any experience about the reported topic?

I have downloaded GDAL 1.7.3 on my Centos 5.7 (64) machine and built it
(with only base drivers and with threads support).
Utilities are working fine (gdalinfo, gdal_translate, ...)

Then, I have installed SWIG 1.3.36 (I know, it's quite old but testing
1.3.4X or 2.x in the past, I got several JVM crashes or other types of
issues) and I have created java bindings for it.
Once I have configured LD_LIBRARY_PATH to use all SOs it needs, I have
started running some ImageIO-Ext tests with maven and JVM is crashing.

In case someone don't know it, ImageIO-Ext mainly allows to bridge Java's
ImageIO (ImageReaders/writers/SPI) to GDAL format drivers.
On several Ubuntu (8, 9, 10, 11) I never had similar problems. We regularly
use ImageIO-Ext 1.1.2 built on top of GDAL 1.7.3 on projects like GeoTools,
GeoServer, Udig, ... Therefore I guess it's not a problem on the
ImageIO-Ext caller side. I think it could be related to the SWIG-JNI
counterpart which isn't working properly or something odd with the memory
usage.

Does anyone have any feedback on this? (supported/never tested/won't
work/need some CXX flags/... anything)
I'm pasting the hs_err_pid Log in case you find anything interesting.
[1]: http://pastebin.com/WQkfnutJ

Thanks in advance and best regards,
Daniele

ERROR: native gdal on centos 64 bit

 -------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running it.geosolutions.imageio.plugins.arcgrid.ArcGridReadTest
Jan 23, 2012 11:42:45 AM it.geosolutions.imageio.gdalframework.GDALUtilities
loadGDAL
INFO: GDAL Native Library loaded (version: 1.7.3)
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00002b15a3ba7037, pid=9169, tid=1106860352
#
# JRE version: 6.0_29-b11
# Java VM: Java HotSpot(TM) 64-Bit Server VM (20.4-b02 mixed mode
linux-amd64 compressed oops)
# Problematic frame:
# V  [libjvm.so+0x4e1037]  java_lang_String::utf8_length(oopDesc*)+0x67
#
# An error report file with more information is saved as:
# /root/tests/imageio1.1.2/plugin/gdal/gdalarcgrid/hs_err_pid9169.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#
/bin/sh: line 1:  9169 Aborted
/usr/lib/jvm/jdk1.6.0_29/jre/bin/java
-Xmx512M -enableassertions -Dtest.extensive=false -Dtest.interactive=false
-jar /tmp/surefirebooter8850919397384240961.jar
/tmp/surefire7943635768826345743tmp
/tmp/surefire4074398420042204599tmp


-- 
-------------------------------------------------------
Ing. Daniele Romagnoli
GeoSolutions S.A.S.
Software Engineer

Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy

phone: +39 0584 962313
fax:      +39 0584 962313

http://www.geo-solutions.it
http://geo-solutions.blogspot.com/
http://www.youtube.com/user/GeoSolutionsIT
http://it.linkedin.com/in/danieleromagnoli


-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120123/37792dc9/attachment.html
From nhatzop at gmail.com  Mon Jan 23 13:12:35 2012
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Mon Jan 23 13:12:59 2012
Subject: [gdal-dev] GDAL 1.7.3 java bindings on Centos 5 (64 bit)
In-Reply-To: <CAJaHrDyZ3dEVDSOYF1yoo328J-dLSUsbeznNbMPXSOCH7wjmSQ@mail.gmail.com>
References: <CAJaHrDzm-55RULbL8J8N-B4vCzFrvspMft4k9VtwnMX8eo0wPA@mail.gmail.com>
	<CAJaHrDyZ3dEVDSOYF1yoo328J-dLSUsbeznNbMPXSOCH7wjmSQ@mail.gmail.com>
Message-ID: <CALDJGKD-b-Ctp=PkUqdvdmX9Cm8UZKbQU+ym_v_E01ug=iMUiA@mail.gmail.com>

http://elgis.argeo.org/

this repo has java bindings if that helps

--Nikos Hatzopoulos

On Mon, Jan 23, 2012 at 9:12 AM, Daniele Romagnoli <
daniele.romagnoli@geo-solutions.it> wrote:

> Hi list,
> Does anyone have any experience about the reported topic?
>
> I have downloaded GDAL 1.7.3 on my Centos 5.7 (64) machine and built it
> (with only base drivers and with threads support).
> Utilities are working fine (gdalinfo, gdal_translate, ...)
>
> Then, I have installed SWIG 1.3.36 (I know, it's quite old but testing
> 1.3.4X or 2.x in the past, I got several JVM crashes or other types of
> issues) and I have created java bindings for it.
> Once I have configured LD_LIBRARY_PATH to use all SOs it needs, I have
> started running some ImageIO-Ext tests with maven and JVM is crashing.
>
> In case someone don't know it, ImageIO-Ext mainly allows to bridge Java's
> ImageIO (ImageReaders/writers/SPI) to GDAL format drivers.
> On several Ubuntu (8, 9, 10, 11) I never had similar problems. We
> regularly use ImageIO-Ext 1.1.2 built on top of GDAL 1.7.3 on projects like
> GeoTools, GeoServer, Udig, ... Therefore I guess it's not a problem on the
> ImageIO-Ext caller side. I think it could be related to the SWIG-JNI
> counterpart which isn't working properly or something odd with the memory
> usage.
>
> Does anyone have any feedback on this? (supported/never tested/won't
> work/need some CXX flags/... anything)
> I'm pasting the hs_err_pid Log in case you find anything interesting.
> [1]: http://pastebin.com/WQkfnutJ
>
> Thanks in advance and best regards,
> Daniele
>
> ERROR: native gdal on centos 64 bit
>
>  -------------------------------------------------------
>  T E S T S
> -------------------------------------------------------
> Running it.geosolutions.imageio.plugins.arcgrid.ArcGridReadTest
> Jan 23, 2012 11:42:45 AM it.geosolutions.imageio.gdalframework.GDALUtilities
> loadGDAL
> INFO: GDAL Native Library loaded (version: 1.7.3)
> #
> # A fatal error has been detected by the Java Runtime Environment:
> #
> #  SIGSEGV (0xb) at pc=0x00002b15a3ba7037, pid=9169, tid=1106860352
> #
> # JRE version: 6.0_29-b11
> # Java VM: Java HotSpot(TM) 64-Bit Server VM (20.4-b02 mixed mode
> linux-amd64 compressed oops)
> # Problematic frame:
> # V  [libjvm.so+0x4e1037]  java_lang_String::utf8_length(oopDesc*)+0x67
> #
> # An error report file with more information is saved as:
> # /root/tests/imageio1.1.2/plugin/gdal/gdalarcgrid/hs_err_pid9169.log
> #
> # If you would like to submit a bug report, please visit:
> #   http://java.sun.com/webapps/bugreport/crash.jsp
> #
> /bin/sh: line 1:  9169 Aborted
> /usr/lib/jvm/jdk1.6.0_29/jre/bin/java -Xmx512M -enableassertions
> -Dtest.extensive=false -Dtest.interactive=false -jar /tmp/
> surefirebooter8850919397384240961.jar /tmp/surefire7943635768826345743tmp
> /tmp/surefire4074398420042204599tmp
>
>
> --
> -------------------------------------------------------
> Ing. Daniele Romagnoli
> GeoSolutions S.A.S.
> Software Engineer
>
> Via Poggio alle Viti 1187
> 55054  Massarosa (LU)
> Italy
>
> phone: +39 0584 962313
> fax:      +39 0584 962313
>
> http://www.geo-solutions.it
> http://geo-solutions.blogspot.com/
> http://www.youtube.com/user/GeoSolutionsIT
> http://it.linkedin.com/in/danieleromagnoli
>
>
> -------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120123/07033f74/attachment.html
From Martin.Spott at mgras.net  Mon Jan 23 14:09:55 2012
From: Martin.Spott at mgras.net (Martin Spott)
Date: Mon Jan 23 14:10:09 2012
Subject: [gdal-dev] Support for VPF (vector product format) files with OGDI
In-Reply-To: <39A0539D-B916-4E6F-88E0-2B56EB952686@gmail.com>
References: <CAD34qgmBpnhUg3Z=FDS1=2qJfx9GOMgtyP4Q3yaEm5Hym-TbDg@mail.gmail.com>
	<jfhgsc$i04g$1@osprey.mgras.de>
	<39A0539D-B916-4E6F-88E0-2B56EB952686@gmail.com>
Message-ID: <20120123190955.GA20948@jive.mgras.de>

On Sun, Jan 22, 2012 at 01:32:04PM -0700, Billy Newman wrote:

> 1. What command did you use to covert the vmap files to shapefiles,
> ogrinfo or ogdi_info?  And can you give me a quick example to make
> sure I am doing it correctly.

  http://mapserver.flightgear.org/git/gitweb.pl?p=terragear-cs;a=blob;f=gisscripts/grassVMap01convert.sh

> 2.  Is there any way to discover all the data sets within vmap0.

Yes, I ran ogrinfo on all available features via some obscure, very
long Bash command.  The above is what I think should represent the
entire dataset.  Use at own risk  ;-)

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------
From even.rouault at mines-paris.org  Mon Jan 23 14:12:33 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan 23 14:12:48 2012
Subject: [gdal-dev] GDAL 1.7.3 java bindings on Centos 5 (64 bit)
In-Reply-To: <CAJaHrDyZ3dEVDSOYF1yoo328J-dLSUsbeznNbMPXSOCH7wjmSQ@mail.gmail.com>
References: <CAJaHrDzm-55RULbL8J8N-B4vCzFrvspMft4k9VtwnMX8eo0wPA@mail.gmail.com>
	<CAJaHrDyZ3dEVDSOYF1yoo328J-dLSUsbeznNbMPXSOCH7wjmSQ@mail.gmail.com>
Message-ID: <201201232012.33621.even.rouault@mines-paris.org>

Le lundi 23 janvier 2012 18:12:14, Daniele Romagnoli a ?crit :
> Hi list,
> Does anyone have any experience about the reported topic?
> 
> I have downloaded GDAL 1.7.3 on my Centos 5.7 (64) machine and built it
> (with only base drivers and with threads support).
> Utilities are working fine (gdalinfo, gdal_translate, ...)
> 
> Then, I have installed SWIG 1.3.36 (I know, it's quite old but testing
> 1.3.4X or 2.x in the past, I got several JVM crashes or other types of
> issues) and I have created java bindings for it.
> Once I have configured LD_LIBRARY_PATH to use all SOs it needs, I have
> started running some ImageIO-Ext tests with maven and JVM is crashing.
> 
> In case someone don't know it, ImageIO-Ext mainly allows to bridge Java's
> ImageIO (ImageReaders/writers/SPI) to GDAL format drivers.
> On several Ubuntu (8, 9, 10, 11) I never had similar problems. We regularly
> use ImageIO-Ext 1.1.2 built on top of GDAL 1.7.3 on projects like GeoTools,
> GeoServer, Udig, ... Therefore I guess it's not a problem on the
> ImageIO-Ext caller side. I think it could be related to the SWIG-JNI
> counterpart which isn't working properly or something odd with the memory
> usage.
> 
> Does anyone have any feedback on this? (supported/never tested/won't
> work/need some CXX flags/... anything)
> I'm pasting the hs_err_pid Log in case you find anything interesting.
> [1]: http://pastebin.com/WQkfnutJ

Hi Daniele,

I've never used ImageIO-Ext myself. Looking at the traces, the problem arise 
in GetMetadata_List() (but this may be just a consequence of an issue 
elsewhere). Do you have a simple code and associate data that could be used to 
reproduce the problem ?

I've tested the following code :

import org.gdal.gdal.*;

public class testgetmetadatalist
{
    public static void main(String[] args)
    {
        gdal.AllRegister();
        Dataset ds = gdal.Open(args[0]);
        for(int i=0;i<1000;i++)
        {
            System.out.println(ds.GetMetadata_List());
            System.out.println(ds.GetMetadata_List("IMAGE_STRUCTURE"));
            System.out.println(ds.GetRasterBand(1).GetMetadata_List());
        }
    }
}

with 
http://trac.osgeo.org/gdal/export/23788/trunk/autotest/gcore/data/byte.tif and 
http://trac.osgeo.org/gdal/export/23788/trunk/autotest/gcore/data/byte.img

and it runs without any problem on my system (Ubuntu 10.04 64bit). I've only 
tested with GDAL trunk, but I'm not aware of significant fixes in the Java 
bindings since 1.7.3 that could explain a difference in behaviour.

I've run it under Valgrind too ( valgrind --trace-children=yes java -
Djava.library.path=. -cp gdal.jar:. testgetmetadatalist byte.tif), and didn't 
see anything alarming (you can see a bunch of warnings due to the JVM inner 
working, but nothing from GDAL code). You need Valgrind 3.6.1 at least AFAIR 
so that valgrind works correctly with a 64bit JVM.

Could you test that on your end ?

As far as swig version is concerned, I believe we have used 1.3.36 in the past 
so that shouldn't be a problem. Perhaps you could retry with 1.3.40 that is 
the one I use currently ?

Another track: perhaps you could try to recompile the lib*jni.so without the -
O2 flag and see if it makes a difference. There was at a time a problem with the 
swig generated code that has caused the  -fno-strict-aliasing to be added in 
swig/java/GNUmakefile and that has solved the problem (I've checked that the fix 
is well in 1.7.3), but perhaps there's something else with the compiler 
version you are using.

Best regards,

Even
From Martin.Spott at mgras.net  Mon Jan 23 16:10:53 2012
From: Martin.Spott at mgras.net (Martin Spott)
Date: Mon Jan 23 16:11:01 2012
Subject: [gdal-dev] Support for VPF (vector product format) files with OGDI
References: <CAD34qgmBpnhUg3Z=FDS1=2qJfx9GOMgtyP4Q3yaEm5Hym-TbDg@mail.gmail.com>
	<20120123190955.GA20948@jive.mgras.de>
Message-ID: <jfkict$bo7q$1@osprey.mgras.de>

Martin Spott wrote:

> Yes, I ran ogrinfo on all available features via some obscure, very
> long Bash command.

Something like this:

martin@sphere:~$ for VMAP_URL in v0eur_5/vmaplv0/eurnasia v0noa_5/vmaplv0/noamer v0sas_5/vmaplv0/sasaus v0soa_5/vmaplv0/soamafr; do
    /opt/GRASS.32/bin/ogrinfo gltp:/vrf/home/martin/live/vmap0/${VMAP_URL}
done 2>&1 |egrep \^"[0-9]"|awk '{print $2}'|sort|uniq


Have fun,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------
From osgeo.mailinglist at gmail.com  Mon Jan 23 20:32:05 2012
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Mon Jan 23 20:32:38 2012
Subject: [gdal-dev] Problem to compile in Lucid with Spatialite 3.0 and gdal
	1.9
Message-ID: <CACPZzQ2iD=fywLRu0J5htxRmGw8faiibOqF+MxVdbtcyL2nsDQ@mail.gmail.com>

Hello all,

I've done some tests to build gdal 1.9.0 in Ubuntu 10.04 (Lucid)
I've build proj 3.3.2, Sqlite 3.3.10, Free XL 1.0.0b, libspatialite
amalgation 3.0.0, spatialite-tools 3.0.0
No problem with sqlite alone.

#####################################################
My main problem is when I compile gdal for spatialite support.
#####################################################

I do

./configure --with-geos=yes --with-python --with-spatialite=yes
--with-sqlite3=yes --with-curl=/usr/bin/
--with-pg=/usr/lib/postgresql/9.0/bin/pg_config
make

and I get

...
libtool: link: g++ .libs/gdalinfo.o -o .libs/gdalinfo
/home/thomas/compile/gdal-1.9.0/.libs/libgdal.so -L/usr/local/lib
-L/usr/lib /usr/lib/libodbc.so /usr/lib/libodbcinst.so /usr/lib/libexpat.so
-lxerces-c /usr/lib/libNCSEcw.so /usr/lib/libNCSEcwC.so
/usr/lib/libNCSCnet.so /usr/lib/libNCSUtil.so /usr/lib/libjasper.so
-lnetcdf /usr/lib/libhdf5.so /usr/lib/libmfhdfalt.so /usr/lib/libdfalt.so
-logdi /usr/lib/libgif.so /usr/lib/libjpeg.so -lpng -lpq -lz -lrt
/usr/local/lib/libspatialite.so -lpthread -ldl /usr/local/lib/libfreexl.so
/usr/local/lib/libgeos_c.so /usr/local/lib/libgeos.so /usr/lib/libproj.so
-lm /usr/lib/libcurl-gnutls.so
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_int'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_double'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_exec'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_text'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_double'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_blob'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_step'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_get_table'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_open'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_free_table'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_reset'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_vfs_find'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_bytes'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_clear_bindings'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_blob'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_vfs_unregister'
gdal-1.9.0/.libs/libgdal.so: undefined reference to
`sqlite3_last_insert_rowid'
gdal-1.9.0/.libs/libgdal.so: undefined reference to
`sqlite3_libversion_number'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_name'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_prepare'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_vfs_register'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_int'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_prepare_v2'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_finalize'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_text'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_count'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_close'
gdal-1.9.0/.libs/libgdal.so: undefined reference to
`sqlite3_column_decltype'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_type'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_errmsg'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_null'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_free'
gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_open_v2'

With the ./configure, the return was
SQLite support:            yes
SpatiaLite support:        yes

Doing

ldd /home/thomas/compile/gdal-1.9.0/.libs/libgdal.so|grep lite
return
libspatialite.so.2 => /usr/local/lib/libspatialite.so.2 (0x012ec000)


#############################################################
The same case without --with-spatialite=yes
no problem in the make, but no spatialite support
#############################################################

./configure --with-geos=yes --with-python --with-sqlite3=yes
--with-curl=/usr/bin/ --with-pg=/usr/lib/postgresql/9.0/bin/pg_config
make

Doing

ldd /home/thomas/compile/gdal-1.9.0/.libs/libgdal.so|grep lite
return
libsqlite3.so.0 => /usr/local/lib/libsqlite3.so.0 (0x0040f000)

########
Question
########

I suppose the list of
"gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_*" is sent
because of the missing
libsqlite3.so.0 => /usr/local/lib/libsqlite3.so.0 (0x0040f000)
but why the libgdal.so doesn't reference libsqlite3.so too when building
using --with-spatialite=yes
For information, I've used ldconfig after each build of each lib.
Any clue is welcome, maybe I miss something obvious.

Thanks

ThomasG
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120124/e9859b11/attachment.html
From etourigny.dev at gmail.com  Mon Jan 23 21:25:26 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon Jan 23 21:26:02 2012
Subject: [gdal-dev] easiest way to merge commits from trunk to a branch?
Message-ID: <CA+TxYvNx25Xg-tuFzYK8SUhPgdPvmiCx64n6u8C3gSuU=7mPFQ@mail.gmail.com>

Hi devs,

what is the preferred way to apply a fix to a branch, given a specific
commit to trunk?

I have tried from within the branch root directory  the command 'svn
merge  -c 23794 ../../../trunk/gdal/ .', which works but generates a
few non-related diffs like:

Property changes on: apps/gdaldem.cpp
___________________________________________________________________
Modified: svn:mergeinfo
   Merged /trunk/gdal/apps/gdaldem.cpp:r23794


Is there a way to get rid of these diffs permanently, or is there
another command I should use? I would prefer not to have to save and
then apply diffs each time.

regards,
Etienne
From brfr at metrico.lu  Tue Jan 24 02:39:59 2012
From: brfr at metrico.lu (Frank Broniewski)
Date: Tue Jan 24 02:40:17 2012
Subject: [gdal-dev] Problem to compile in Lucid with Spatialite 3.0 and
	gdal 1.9
In-Reply-To: <CACPZzQ2iD=fywLRu0J5htxRmGw8faiibOqF+MxVdbtcyL2nsDQ@mail.gmail.com>
References: <CACPZzQ2iD=fywLRu0J5htxRmGw8faiibOqF+MxVdbtcyL2nsDQ@mail.gmail.com>
Message-ID: <4F1E604F.5040709@metrico.lu>

Just a quick guesst: Did you install the development files for sqlite?


Am 24.01.2012 02:32, schrieb Thomas Gratier:
> Hello all,
>
> I've done some tests to build gdal 1.9.0 in Ubuntu 10.04 (Lucid)
> I've build proj 3.3.2, Sqlite 3.3.10, Free XL 1.0.0b, libspatialite
> amalgation 3.0.0, spatialite-tools 3.0.0
> No problem with sqlite alone.
>
> #####################################################
> My main problem is when I compile gdal for spatialite support.
> #####################################################
>
> I do
>
> ./configure --with-geos=yes --with-python --with-spatialite=yes
> --with-sqlite3=yes --with-curl=/usr/bin/
> --with-pg=/usr/lib/postgresql/9.0/bin/pg_config
> make
>
> and I get
>
> ...
> libtool: link: g++ .libs/gdalinfo.o -o .libs/gdalinfo
> /home/thomas/compile/gdal-1.9.0/.libs/libgdal.so -L/usr/local/lib
> -L/usr/lib /usr/lib/libodbc.so /usr/lib/libodbcinst.so /usr/lib/libexpat.so
> -lxerces-c /usr/lib/libNCSEcw.so /usr/lib/libNCSEcwC.so
> /usr/lib/libNCSCnet.so /usr/lib/libNCSUtil.so /usr/lib/libjasper.so
> -lnetcdf /usr/lib/libhdf5.so /usr/lib/libmfhdfalt.so /usr/lib/libdfalt.so
> -logdi /usr/lib/libgif.so /usr/lib/libjpeg.so -lpng -lpq -lz -lrt
> /usr/local/lib/libspatialite.so -lpthread -ldl /usr/local/lib/libfreexl.so
> /usr/local/lib/libgeos_c.so /usr/local/lib/libgeos.so /usr/lib/libproj.so
> -lm /usr/lib/libcurl-gnutls.so
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_int'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_double'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_exec'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_text'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_double'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_blob'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_step'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_get_table'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_open'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_free_table'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_reset'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_vfs_find'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_bytes'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_clear_bindings'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_blob'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_vfs_unregister'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to
> `sqlite3_last_insert_rowid'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to
> `sqlite3_libversion_number'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_name'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_prepare'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_vfs_register'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_int'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_prepare_v2'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_finalize'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_text'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_count'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_close'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to
> `sqlite3_column_decltype'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_type'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_errmsg'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_null'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_free'
> gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_open_v2'
>
> With the ./configure, the return was
> SQLite support:            yes
> SpatiaLite support:        yes
>
> Doing
>
> ldd /home/thomas/compile/gdal-1.9.0/.libs/libgdal.so|grep lite
> return
> libspatialite.so.2 =>  /usr/local/lib/libspatialite.so.2 (0x012ec000)
>
>
> #############################################################
> The same case without --with-spatialite=yes
> no problem in the make, but no spatialite support
> #############################################################
>
> ./configure --with-geos=yes --with-python --with-sqlite3=yes
> --with-curl=/usr/bin/ --with-pg=/usr/lib/postgresql/9.0/bin/pg_config
> make
>
> Doing
>
> ldd /home/thomas/compile/gdal-1.9.0/.libs/libgdal.so|grep lite
> return
> libsqlite3.so.0 =>  /usr/local/lib/libsqlite3.so.0 (0x0040f000)
>
> ########
> Question
> ########
>
> I suppose the list of
> "gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_*" is sent
> because of the missing
> libsqlite3.so.0 =>  /usr/local/lib/libsqlite3.so.0 (0x0040f000)
> but why the libgdal.so doesn't reference libsqlite3.so too when building
> using --with-spatialite=yes
> For information, I've used ldconfig after each build of each lib.
> Any clue is welcome, maybe I miss something obvious.
>
> Thanks
>
> ThomasG
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From even.rouault at mines-paris.org  Tue Jan 24 03:17:40 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 24 03:18:42 2012
Subject: [gdal-dev] Problem to compile in Lucid with Spatialite 3.0 and
	gdal 1.9
In-Reply-To: <4F1E604F.5040709@metrico.lu>
References: <CACPZzQ2iD=fywLRu0J5htxRmGw8faiibOqF+MxVdbtcyL2nsDQ@mail.gmail.com>
	<4F1E604F.5040709@metrico.lu>
Message-ID: <1327393060.4f1e69245f8f8@imp.free.fr>

Thomas,

Your issue reminds me something that Tamas Szerekeres also hit when switching to
spatialite 3.0 on Windows.

There has been a change in spatialite 3.0 w.r.t spatialite 2.X regarding to how
its "amalgamation" is done.

In spatialite 3.0, the sqlite3.h that is included redefines the sqlite3_XXXX
symbols as SPLite_XXXX (previously it did no do this). So the libspatialite.so
(resulting from amalgamation) does no longer contain sqlite3_XXXX symbols but
SPLite_XXXX .

What happens here is that the GDAL compilation must fetch the standard sqlite3.h
header (not the one from spatialite), and then expect the regular symbol names.

My recommandation :
1) Don't use spatialite-amalgamation (as recommanded by Sandro) on Linux, but
the regular libspatialite built against external libsqlite3. AFAIU,
spatialite-amalgamation is mainly aimed at making Windows users life easier.
2) Why do you use sqlite 3.3.10 on Ubuntu 10.04, whereas it ships with sqlite
3.6 in its default configuration ?

Alternatively (but not recommanded), if you still want to use
spatialite-amalgamation, 2 possibilities :
    * Make sure that the standard sqlite3.h isn't found in the include path when
compiling GDAL, and that the spatialite one is always used
    * OR (but really not recommanded) also add -lsqlite3 in the linking line,
but that's going to be messy to have 2 versions of sqlite. I'm not sure what
would happen then, but potentially bad things if the sqlite versions of the
external sqlite and spatialite's embeded one are different.

Best regards,

Even

>
> Am 24.01.2012 02:32, schrieb Thomas Gratier:
> > Hello all,
> >
> > I've done some tests to build gdal 1.9.0 in Ubuntu 10.04 (Lucid)
> > I've build proj 3.3.2, Sqlite 3.3.10, Free XL 1.0.0b, libspatialite
> > amalgation 3.0.0, spatialite-tools 3.0.0
> > No problem with sqlite alone.
> >
> > #####################################################
> > My main problem is when I compile gdal for spatialite support.
> > #####################################################
> >
> > I do
> >
> > ./configure --with-geos=yes --with-python --with-spatialite=yes
> > --with-sqlite3=yes --with-curl=/usr/bin/
> > --with-pg=/usr/lib/postgresql/9.0/bin/pg_config
> > make
> >
> > and I get
> >
> > ...
> > libtool: link: g++ .libs/gdalinfo.o -o .libs/gdalinfo
> > /home/thomas/compile/gdal-1.9.0/.libs/libgdal.so -L/usr/local/lib
> > -L/usr/lib /usr/lib/libodbc.so /usr/lib/libodbcinst.so /usr/lib/libexpat.so
> > -lxerces-c /usr/lib/libNCSEcw.so /usr/lib/libNCSEcwC.so
> > /usr/lib/libNCSCnet.so /usr/lib/libNCSUtil.so /usr/lib/libjasper.so
> > -lnetcdf /usr/lib/libhdf5.so /usr/lib/libmfhdfalt.so /usr/lib/libdfalt.so
> > -logdi /usr/lib/libgif.so /usr/lib/libjpeg.so -lpng -lpq -lz -lrt
> > /usr/local/lib/libspatialite.so -lpthread -ldl /usr/local/lib/libfreexl.so
> > /usr/local/lib/libgeos_c.so /usr/local/lib/libgeos.so /usr/lib/libproj.so
> > -lm /usr/lib/libcurl-gnutls.so
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_int'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_double'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_exec'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_text'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_double'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_blob'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_step'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_get_table'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_open'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_free_table'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_reset'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_vfs_find'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_bytes'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to
> `sqlite3_clear_bindings'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_blob'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to
> `sqlite3_vfs_unregister'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to
> > `sqlite3_last_insert_rowid'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to
> > `sqlite3_libversion_number'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_name'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_prepare'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_vfs_register'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_int'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_prepare_v2'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_finalize'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_text'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_count'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_close'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to
> > `sqlite3_column_decltype'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_column_type'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_errmsg'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_bind_null'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_free'
> > gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_open_v2'
> >
> > With the ./configure, the return was
> > SQLite support:            yes
> > SpatiaLite support:        yes
> >
> > Doing
> >
> > ldd /home/thomas/compile/gdal-1.9.0/.libs/libgdal.so|grep lite
> > return
> > libspatialite.so.2 =>  /usr/local/lib/libspatialite.so.2 (0x012ec000)
> >
> >
> > #############################################################
> > The same case without --with-spatialite=yes
> > no problem in the make, but no spatialite support
> > #############################################################
> >
> > ./configure --with-geos=yes --with-python --with-sqlite3=yes
> > --with-curl=/usr/bin/ --with-pg=/usr/lib/postgresql/9.0/bin/pg_config
> > make
> >
> > Doing
> >
> > ldd /home/thomas/compile/gdal-1.9.0/.libs/libgdal.so|grep lite
> > return
> > libsqlite3.so.0 =>  /usr/local/lib/libsqlite3.so.0 (0x0040f000)
> >
> > ########
> > Question
> > ########
> >
> > I suppose the list of
> > "gdal-1.9.0/.libs/libgdal.so: undefined reference to `sqlite3_*" is sent
> > because of the missing
> > libsqlite3.so.0 =>  /usr/local/lib/libsqlite3.so.0 (0x0040f000)
> > but why the libgdal.so doesn't reference libsqlite3.so too when building
> > using --with-spatialite=yes
> > For information, I've used ldconfig after each build of each lib.
> > Any clue is welcome, maybe I miss something obvious.
> >
> > Thanks
> >
> > ThomasG
> >
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> --
> Frank BRONIEWSKI
>
> METRICO s.? r.l.
> g?om?tres
> technologies d'information g?ographique
> rue des Romains 36
> L-5433 NIEDERDONVEN
>
> t?l.: +352 26 74 94 - 28
> fax.: +352 26 74 94 99
> http://www.metrico.lu
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From a.furieri at lqt.it  Tue Jan 24 04:22:08 2012
From: a.furieri at lqt.it (a.furieri@lqt.it)
Date: Tue Jan 24 04:39:26 2012
Subject: [gdal-dev] Problem to compile in Lucid with Spatialite 3.0 and
	gdal 1.9
In-Reply-To: <1327393060.4f1e69245f8f8@imp.free.fr>
References: <CACPZzQ2iD=fywLRu0J5htxRmGw8faiibOqF+MxVdbtcyL2nsDQ@mail.gmail.com>
	<4F1E604F.5040709@metrico.lu>
	<1327393060.4f1e69245f8f8@imp.free.fr>
Message-ID: <20120124091944.M57602@lqt.it>

HI Frank and Even,

I confirm that Even is absolutely right: using the "amalgamation"
on Linux is strongly discouraged, and may pose several problems
if not properly handled. Just few technical clarifications:
a) libspatialite expects to link an external lisqlite3; there
   is absolutely nothing extraordinary in this, it's the standard
   behavior expected on Linux.
b) on the other side, libspatialite-amalgamation internally includes
   a private copy of the most recent sqlite sources: but in order to 
   avoid any obnoxious interference with the "system" libsqlite, any 
   link symbol exported by this "internal private copy" is purposely 
   masked (renamed).
   
Please note well:
1) when the "external/system" libsqlite is intended to be used, C/C++ 
   sources must include the corresponding standard header-file:
   #include <sqlite3.h>
   
2) but when the "private/internal" libsqlite is intended to be used,
   C/C++ sources must absolutely include the header-file installed by 
   libspatialite, and not the "standard" one:
   #include <spatialite/sqlite3.h>
   
A -DSPATIALITE_AMALGAMATION conditional macro is usually supported by 
any spatialite-aware package, in order to make configuration as painless 
as possible: and GDAL/OGR supports this SPATIALITE_AMALGAMATION macro.

So, if for any good reason you absolutely want to build GDAL on Linux 
using the "amalgamation" (a strongly discouraged option IMHO), you can 
try using the following recipe:

export "CPPFLAGS=-DSPATIALITE_AMALGAMATION=1"
./configure --with-spatialite=/usr/local
make

bye Sandro
From daniele.romagnoli at geo-solutions.it  Tue Jan 24 06:38:48 2012
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Tue Jan 24 06:39:06 2012
Subject: [gdal-dev] GDAL 1.7.3 java bindings on Centos 5 (64 bit)
In-Reply-To: <201201232012.33621.even.rouault@mines-paris.org>
References: <CAJaHrDzm-55RULbL8J8N-B4vCzFrvspMft4k9VtwnMX8eo0wPA@mail.gmail.com>
	<CAJaHrDyZ3dEVDSOYF1yoo328J-dLSUsbeznNbMPXSOCH7wjmSQ@mail.gmail.com>
	<201201232012.33621.even.rouault@mines-paris.org>
Message-ID: <CAJaHrDw1TRAgBs_4=EADZ_zZiBcXD-Rr+3k6tFA270UqgwvS8g@mail.gmail.com>

Hi Even,
We was able to get it working using GDAL 1.8.1 and SWIG 1.3.40.
Not sure which part fixed it (GDAL 1.8.1 or SWIG 1.3.40).
Thanks for your suggestions. (In case we have some free time, we will
probably try GDAL 1.7.3 with SWIG 1.3.40 just to understand which component
fixed our issues).

Best Regards,
Daniele


On Mon, Jan 23, 2012 at 8:12 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le lundi 23 janvier 2012 18:12:14, Daniele Romagnoli a ?crit :
> > Hi list,
> > Does anyone have any experience about the reported topic?
> >
> > I have downloaded GDAL 1.7.3 on my Centos 5.7 (64) machine and built it
> > (with only base drivers and with threads support).
> > Utilities are working fine (gdalinfo, gdal_translate, ...)
> >
> > Then, I have installed SWIG 1.3.36 (I know, it's quite old but testing
> > 1.3.4X or 2.x in the past, I got several JVM crashes or other types of
> > issues) and I have created java bindings for it.
> > Once I have configured LD_LIBRARY_PATH to use all SOs it needs, I have
> > started running some ImageIO-Ext tests with maven and JVM is crashing.
> >
> > In case someone don't know it, ImageIO-Ext mainly allows to bridge Java's
> > ImageIO (ImageReaders/writers/SPI) to GDAL format drivers.
> > On several Ubuntu (8, 9, 10, 11) I never had similar problems. We
> regularly
> > use ImageIO-Ext 1.1.2 built on top of GDAL 1.7.3 on projects like
> GeoTools,
> > GeoServer, Udig, ... Therefore I guess it's not a problem on the
> > ImageIO-Ext caller side. I think it could be related to the SWIG-JNI
> > counterpart which isn't working properly or something odd with the memory
> > usage.
> >
> > Does anyone have any feedback on this? (supported/never tested/won't
> > work/need some CXX flags/... anything)
> > I'm pasting the hs_err_pid Log in case you find anything interesting.
> > [1]: http://pastebin.com/WQkfnutJ
>
> Hi Daniele,
>
> I've never used ImageIO-Ext myself. Looking at the traces, the problem
> arise
> in GetMetadata_List() (but this may be just a consequence of an issue
> elsewhere). Do you have a simple code and associate data that could be
> used to
> reproduce the problem ?
>
> I've tested the following code :
>
> import org.gdal.gdal.*;
>
> public class testgetmetadatalist
> {
>    public static void main(String[] args)
>    {
>        gdal.AllRegister();
>        Dataset ds = gdal.Open(args[0]);
>        for(int i=0;i<1000;i++)
>        {
>            System.out.println(ds.GetMetadata_List());
>            System.out.println(ds.GetMetadata_List("IMAGE_STRUCTURE"));
>            System.out.println(ds.GetRasterBand(1).GetMetadata_List());
>        }
>    }
> }
>
> with
> http://trac.osgeo.org/gdal/export/23788/trunk/autotest/gcore/data/byte.tifand
> http://trac.osgeo.org/gdal/export/23788/trunk/autotest/gcore/data/byte.img
>
> and it runs without any problem on my system (Ubuntu 10.04 64bit). I've
> only
> tested with GDAL trunk, but I'm not aware of significant fixes in the Java
> bindings since 1.7.3 that could explain a difference in behaviour.
>
> I've run it under Valgrind too ( valgrind --trace-children=yes java -
> Djava.library.path=. -cp gdal.jar:. testgetmetadatalist byte.tif), and
> didn't
> see anything alarming (you can see a bunch of warnings due to the JVM inner
> working, but nothing from GDAL code). You need Valgrind 3.6.1 at least
> AFAIR
> so that valgrind works correctly with a 64bit JVM.
>
> Could you test that on your end ?
>
> As far as swig version is concerned, I believe we have used 1.3.36 in the
> past
> so that shouldn't be a problem. Perhaps you could retry with 1.3.40 that is
> the one I use currently ?
>
> Another track: perhaps you could try to recompile the lib*jni.so without
> the -
> O2 flag and see if it makes a difference. There was at a time a problem
> with the
> swig generated code that has caused the  -fno-strict-aliasing to be added
> in
> swig/java/GNUmakefile and that has solved the problem (I've checked that
> the fix
> is well in 1.7.3), but perhaps there's something else with the compiler
> version you are using.
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Ing. Daniele Romagnoli
GeoSolutions S.A.S.
Software Engineer

Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy

phone: +39 0584 962313
fax:      +39 0584 962313

http://www.geo-solutions.it
http://geo-solutions.blogspot.com/
http://www.youtube.com/user/GeoSolutionsIT
http://it.linkedin.com/in/danieleromagnoli


-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120124/c332b742/attachment.html
From Christopher.Pouliot at state.mn.us  Tue Jan 24 10:48:08 2012
From: Christopher.Pouliot at state.mn.us (Pouliot, Christopher (DNR))
Date: Tue Jan 24 11:04:11 2012
Subject: [gdal-dev] Saving waypoints, tracks, and routes to a GPX file
Message-ID: <074A014435F2E543B1FD97E729C76E4D059B4D@055-CH1MPN1-012.055d.mgd.msft.net>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 25792 bytes
Desc: image001.png
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120124/f466806a/image001-0001.png
From even.rouault at mines-paris.org  Tue Jan 24 11:20:16 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 24 11:21:05 2012
Subject: [gdal-dev] Saving waypoints, tracks, and routes to a GPX file
In-Reply-To: <074A014435F2E543B1FD97E729C76E4D059B4D@055-CH1MPN1-012.055d.mgd.msft.net>
References: <074A014435F2E543B1FD97E729C76E4D059B4D@055-CH1MPN1-012.055d.mgd.msft.net>
Message-ID: <1327422016.4f1eda40a789b@webmail.free.fr>

Selon "Pouliot, Christopher (DNR)" <Christopher.Pouliot@state.mn.us>:

There are elements in http://gdal.org/ogr/drv_gpx.html

Bascially, you need to create different layers for each geometry types you want
to write. And you need to create (and populate them) in the order described :
waypoints, routes and tracks

> Hello,
>
> I'm working in C# using the gdal c# wrappers and am trying to write multiple
> gps shape types (waypoints AND tracks AND routes) to a single GPX file.  When
> creating a GPX layer I am required to define an shape type:
>
> layer = ds.CreateLayer(outputLayerName,
> sr,wkbGeometryType.wkbMultiLineString25D, new string[] { });
>
> But if I do that then I can only write a single gps shape type to that file,
> otherwise I get an error:  "ogr_csharp - Features without geometry or with
> non-ponctual geomemetries not supported by GPX writer in waypoints layer."
>
> [cid:image001.png@01CCDA7D.45A462B0]
>
> Does anyone know what I may be doing wrong?
>
> Thanks,
>
> CHris
>
>
>
> Chris Pouliot
> GIS Application Developer
> Minnesota Department of Natural Resources
> christopher.pouliot@state.mn.us
> (651) 259-5491
>
>


From Christopher.Pouliot at state.mn.us  Tue Jan 24 11:39:04 2012
From: Christopher.Pouliot at state.mn.us (Pouliot, Christopher (DNR))
Date: Tue Jan 24 11:39:11 2012
Subject: [gdal-dev] Saving waypoints, tracks, and routes to a GPX file
In-Reply-To: <1327422016.4f1eda40a789b@webmail.free.fr>
References: <074A014435F2E543B1FD97E729C76E4D059B4D@055-CH1MPN1-012.055d.mgd.msft.net>
	<1327422016.4f1eda40a789b@webmail.free.fr>
Message-ID: <074A014435F2E543B1FD97E729C76E4D059BF1@055-CH1MPN1-012.055d.mgd.msft.net>

Excellent.  That worked.  Thanks Even!

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Tuesday, January 24, 2012 10:20 AM
To: Pouliot, Christopher (DNR)
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Saving waypoints, tracks, and routes to a GPX file

Selon "Pouliot, Christopher (DNR)" <Christopher.Pouliot@state.mn.us>:

There are elements in http://gdal.org/ogr/drv_gpx.html

Bascially, you need to create different layers for each geometry types you want
to write. And you need to create (and populate them) in the order described :
waypoints, routes and tracks

> Hello,
>
> I'm working in C# using the gdal c# wrappers and am trying to write multiple
> gps shape types (waypoints AND tracks AND routes) to a single GPX file.  When
> creating a GPX layer I am required to define an shape type:
>
> layer = ds.CreateLayer(outputLayerName,
> sr,wkbGeometryType.wkbMultiLineString25D, new string[] { });
>
> But if I do that then I can only write a single gps shape type to that file,
> otherwise I get an error:  "ogr_csharp - Features without geometry or with
> non-ponctual geomemetries not supported by GPX writer in waypoints layer."
>
> [cid:image001.png@01CCDA7D.45A462B0]
>
> Does anyone know what I may be doing wrong?
>
> Thanks,
>
> CHris
>
>
>
> Chris Pouliot
> GIS Application Developer
> Minnesota Department of Natural Resources
> christopher.pouliot@state.mn.us
> (651) 259-5491
>
>




From osgeo.mailinglist at gmail.com  Tue Jan 24 14:07:57 2012
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Tue Jan 24 14:09:03 2012
Subject: [gdal-dev] Problem to compile in Lucid with Spatialite 3.0 and
	gdal 1.9
In-Reply-To: <20120124091944.M57602@lqt.it>
References: <CACPZzQ2iD=fywLRu0J5htxRmGw8faiibOqF+MxVdbtcyL2nsDQ@mail.gmail.com>
	<4F1E604F.5040709@metrico.lu> <1327393060.4f1e69245f8f8@imp.free.fr>
	<20120124091944.M57602@lqt.it>
Message-ID: <CACPZzQ3yhg0F1a38XRDeaBNazQ2NfTRwLZLj9aOVPnwC+D6vKQ@mail.gmail.com>

Hello,

Even, concerning the sqlite, it was a mistake from me when writing. The
version was the 3.7.10 (and not the 3.3.10)
It was done to check if a more recent of sqlite3 could solve my problem.

At the end, the choosen solution I've done was the one recommended by Sandro

I've reverted sqlite to version 3.6.22 default package
I've compiled libspatialite
doing
./configure --disable-geocallbacks
After, it was smooth for all the other libs e.g spatialite-tools 3.0.0 and
gdal 1.9.0 and the related python bindings
I now know that amalgation is "bad" under Linux.

Thanks all for your answers

Regards

ThomasG
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120124/7a3946a2/attachment.html
From warmerdam at pobox.com  Tue Jan 24 14:49:28 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 24 14:50:01 2012
Subject: [gdal-dev] Motion: Commit Rights for Dmitry Barishnikov (aka bishop)
Message-ID: <CA+YzLBdiEuibviSBL70wX9ArVuj5nLviNdwYXNK=-dHwpmcYNw@mail.gmail.com>

Motion: GDAL/OGR Commit rights are extended to Dmitry Barishnikov
/??????? ?????????? (userid: bishop).

---

Folks,

Dmitry has been providing patches for GDAL/OGR for several years
now and has, in my opinion, demonstrated good understanding of
the GDAL code base, and norms.  I think it would be helpful for him
to have commit access.   You can see some of his past contributions at:

  http://trac.osgeo.org/gdal/search?q=bishop

Dmitry, could you publically reply to this message indicating your
willingness to follow RFC3?

  http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I'll start the voting with my support.

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From estrada.adam at gmail.com  Tue Jan 24 15:27:03 2012
From: estrada.adam at gmail.com (Adam Estrada)
Date: Tue Jan 24 15:27:10 2012
Subject: [gdal-dev] ElasticSearch Driver
Message-ID: <CAA-HW2oqFevS61B4bp1j7h1=1F=t1bJaLDPWuUCACgjch0Rd0Q@mail.gmail.com>

All,

I have been using ElasticSearch as a way to perform some advanced analysis
on feature attribute data. From my work with ElasticSearch came the
ogr2elasticsearch GDAL driver. The code can be found here.
http://code.google.com/p/ogr2elasticsearch/

Every time I rebuild GDAL I have to add this driver back to the build path
so that I can take advantage of it which is unfavorable. What would it take
to get this driver included in to trunk GDAL?

Thanks in advance,
Adam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120124/8d5da1d5/attachment.html
From warmerdam at pobox.com  Tue Jan 24 15:49:21 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 24 15:49:48 2012
Subject: [gdal-dev] ElasticSearch Driver
In-Reply-To: <CAA-HW2oqFevS61B4bp1j7h1=1F=t1bJaLDPWuUCACgjch0Rd0Q@mail.gmail.com>
References: <CAA-HW2oqFevS61B4bp1j7h1=1F=t1bJaLDPWuUCACgjch0Rd0Q@mail.gmail.com>
Message-ID: <CA+YzLBe62dBCUcr36noUEQB2Zcp=xWG4tUJbN54SojBy_fJwmg@mail.gmail.com>

On Tue, Jan 24, 2012 at 12:27 PM, Adam Estrada <estrada.adam@gmail.com> wrote:
> All,
>
> I have been using ElasticSearch as a way to perform some advanced analysis
> on feature attribute data. From my work with ElasticSearch came the
> ogr2elasticsearch GDAL driver. The code can be found
> here.?http://code.google.com/p/ogr2elasticsearch/
>
> Every time I rebuild GDAL I have to add this driver back to the build path
> so that I can take advantage of it which is unfavorable. What would it take
> to get this driver included in to trunk GDAL?

Adam,

My suggestion is that you file a ticket with a patch or even just a zip
of the relavent code.  I notice your driver uses the jsonc library.  It
would be helpful to ensure this code is not duplicated between the
elastic search and geojson driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Tue Jan 24 16:13:31 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 24 16:13:26 2012
Subject: [gdal-dev] ElasticSearch Driver
In-Reply-To: <CAA-HW2oqFevS61B4bp1j7h1=1F=t1bJaLDPWuUCACgjch0Rd0Q@mail.gmail.com>
References: <CAA-HW2oqFevS61B4bp1j7h1=1F=t1bJaLDPWuUCACgjch0Rd0Q@mail.gmail.com>
Message-ID: <201201242213.31460.even.rouault@mines-paris.org>

Le mardi 24 janvier 2012 21:27:03, Adam Estrada a ?crit :
> All,
> 
> I have been using ElasticSearch as a way to perform some advanced analysis
> on feature attribute data. From my work with ElasticSearch came the
> ogr2elasticsearch GDAL driver. The code can be found here.
> http://code.google.com/p/ogr2elasticsearch/
> 
> Every time I rebuild GDAL I have to add this driver back to the build path
> so that I can take advantage of it which is unfavorable. What would it take
> to get this driver included in to trunk GDAL?

* Make sure that it works with the json-c already in 
ogr/ogrsf_frmts/geojson/jsonc
* Write a drv_elasticsearch.html page (but I see you have the material for 
that on the google project). Perhaps make it clearer that it is a write-only 
driver. Out of curiousity, any plan to add a read operation (if that makes 
sense. I've never used elasticsearch). Also mentions that the geometry written 
in ElasticSearch is the center of the bounding box of the geometry (for linear 
or polygonal geometries).
* in OGRElasticDataSource constructor, I suspect bUseExtension is from another 
driver and should be removed. Same for bWriteHeaderAndFooter. And removed from 
the header file too
* in OGRElasticDataSource::Create() :
	- you should make a copy of the return of CPLGetConfigOption() for 
psWriteMap and psMetaFile. The reason is that if their values is changed later 
the pointer might become invalid. By the way, the standard hungarian notation 
for char* is psz. Ah and you should make sure they are initialized in the 
constructor and freed in the destructor of the class.
        - actually, I see that psMetafile is only used in Create(). So why make 
it a member variable of the class ?
        - there's a missing fclose(fp)
        - psMapping (which should be pszMapping) is never freed apparently ?
* in ogr_elastic.h : 
*in OGRElasticLayer definition :
	- nTotalFeatureCount should likely be removed. It is null-initialized, 
incremented in CreateFeature() but never used elsewhere
	- poFeature should be removed. It is null-initialized in the constructor 
and deleted in the destructor, but never initialized to something else.
* in OGRElasticLayer::~OGRElasticLayer(), poFeatureDefn->Release() should be 
uncommented, otherwise you're leaking it
* in OGRElasticLayer::BuildMap(), the comment // The attribute's were freed 
from the deletion of the map object and the nullifying of pAttributes are 
strange. I can see pAttributes being initialized in CreateField(), but never 
destroyed.
* in OGRElasticLayer::CreateFeature(), :
     - you dereference poFeature->GetGeometryRef(), assuming that it is always 
non NULL. Which might not be always the case...
     - in the loop iterating over field, you should likely test IsFieldSet(i) 
before calling GetFieldAs...() in the case the field is unset/null.
     - GetFieldAsInteger(), GetFieldAsDouble() and GetFieldAsInteger() can 
accept the index also as an argument : this will make the code shorter (and 
also a bit faster)

And after that and checking that it still works, attach a patch in Trac ;-)

> 
> Thanks in advance,
> Adam
From even.rouault at mines-paris.org  Tue Jan 24 16:51:34 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 24 16:51:49 2012
Subject: [gdal-dev] Motion: Commit Rights for Dmitry Barishnikov (aka
	bishop)
In-Reply-To: <CA+YzLBdiEuibviSBL70wX9ArVuj5nLviNdwYXNK=-dHwpmcYNw@mail.gmail.com>
References: <CA+YzLBdiEuibviSBL70wX9ArVuj5nLviNdwYXNK=-dHwpmcYNw@mail.gmail.com>
Message-ID: <201201242251.34227.even.rouault@mines-paris.org>

Le mardi 24 janvier 2012 20:49:28, Frank Warmerdam a ?crit :
> Motion: GDAL/OGR Commit rights are extended to Dmitry Barishnikov
> /??????? ?????????? (userid: bishop).

+1. I have integrated quite a few of Dmitry's patches in the past.

I'd just like to invite him to discuss potentially non trivial changes with 
the authors/mainteners of the areas he will hack into or, for broader changes, 
with the PSC. 

For example, looking at http://trac.osgeo.org/gdal/search?q=bishop , I see  :
* http://trac.osgeo.org/gdal/attachment/ticket/3557/ogr_mi_vsil.patch make 
changes in the MITAB library, whose GDAL is a downstream. The usual process is 
to make sure that the changes are pushed first in upstream MITAB CVS
* http://trac.osgeo.org/gdal/ticket/4463 : internal'izing an external library 
is something to assess carefully. This introduces additionnal maintenance 
issues (security fixes, refresh policy&process, potential issues of symbol 
conflicts when an application link both to GDAL and the library, etc...)

> 
> ---
> 
> Folks,
> 
> Dmitry has been providing patches for GDAL/OGR for several years
> now and has, in my opinion, demonstrated good understanding of
> the GDAL code base, and norms.  I think it would be helpful for him
> to have commit access.   You can see some of his past contributions at:
> 
>   http://trac.osgeo.org/gdal/search?q=bishop
> 
> Dmitry, could you publically reply to this message indicating your
> willingness to follow RFC3?
> 
>   http://trac.osgeo.org/gdal/wiki/rfc3_commiters
> 
> I'll start the voting with my support.
> 
> +1 Frank
From eduardo.kanegae at gmail.com  Wed Jan 25 04:56:25 2012
From: eduardo.kanegae at gmail.com (Eduardo Kanegae)
Date: Wed Jan 25 04:57:45 2012
Subject: [gdal-dev] How to export STYLE from Mapinfo to Shapefile?
Message-ID: <CAF_a5SJ3PsFqhcwUgLo=raTTZ-oD4ZEO2VCukYvRWQByzp8+DQ@mail.gmail.com>

hi there,

I need to read mapinfo data from a file but:
* when opening the mapinfo file using QGIS only ID field is displayed
within attributes table
* the attribute I need is set at STYLE property at mapinfo file

The result of an ogrinfo line dump is:
 OGRFeature(TESTE_NUMERACAO):1536
   ID (Integer) = 244106
   *Style* = LABEL(t:"335",a:295.100000,s:2.759527g,c:#000000,p:1,f:"Arial")
   POINT (288636.59898806165 7465166.827180054)

I need Style->Label->t value to be converted to a shapefile column (335 value).

Is there any parameter to use with ogr2ogr to export this value?

thanks in advance

Eduardo Patto Kanegae
http://www.webmapit.com?| @webmapit
From polimax at mail.ru  Wed Jan 25 07:15:37 2012
From: polimax at mail.ru (=?UTF-8?B?0JTQvNC40YLRgNC40Lkg0JHQsNGA0YvRiNC90LjQutC+0LI=?=)
Date: Wed Jan 25 07:18:18 2012
Subject: [gdal-dev] Motion: Commit Rights for Dmitry Barishnikov (aka bishop)
Message-ID: <4F1FF269.7020008@mail.ru>

Frank Warmerdam writes

    Dmitry, could you publically reply to this message indicating your
    willingness to follow RFC3?

       http://trac.osgeo.org/gdal/wiki/rfc3_commiters


I have read the commiter guidelines and try my best to follow them.
Also I can reply for this topics:

    For example, looking at http://trac.osgeo.org/gdal/search?q=bishop ,
    I see  :
    *
    http://trac.osgeo.org/gdal/attachment/ticket/3557/ogr_mi_vsil.patch
    make
    changes in the MITAB library, whose GDAL is a downstream. The usual
    process is
    to make sure that the changes are pushed first in upstream MITAB CVS


This is subject to discuss and some guidance is welcome.

    * http://trac.osgeo.org/gdal/ticket/4463 : internal'izing an
    external library
    is something to assess carefully. This introduces additionnal
    maintenance
    issues (security fixes, refresh policy&process, potential issues of
    symbol
    conflicts when an application link both to GDAL and the library, etc...)


The last release of libkml version 1.2 was on Feb 2010. The 1.3 version 
of libkml was announced on Mar 2010 but not released yet.
There is a problem to get libkml v.1.3 for gdal users 
(http://code.google.com/p/libkml/issues/detail?id=173#c0).
But I see, that it may be potential problems with maintenance. This is 
subject to discuss too.

Best regards,
        Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120125/8665cfe4/attachment-0001.html
From szekerest at gmail.com  Wed Jan 25 08:16:19 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Jan 25 08:17:03 2012
Subject: [gdal-dev] Motion: Commit Rights for Dmitry Barishnikov (aka
	bishop)
In-Reply-To: <CA+YzLBdiEuibviSBL70wX9ArVuj5nLviNdwYXNK=-dHwpmcYNw@mail.gmail.com>
References: <CA+YzLBdiEuibviSBL70wX9ArVuj5nLviNdwYXNK=-dHwpmcYNw@mail.gmail.com>
Message-ID: <CACALY+TyBjG9zsDO3qzZd498JVRte7AETEKZUXCG9Y83w9MSiQ@mail.gmail.com>

+1

Tamas


2012/1/24 Frank Warmerdam <warmerdam@pobox.com>

> Motion: GDAL/OGR Commit rights are extended to Dmitry Barishnikov
> /??????? ?????????? (userid: bishop).
>
> ---
>
> Folks,
>
> Dmitry has been providing patches for GDAL/OGR for several years
> now and has, in my opinion, demonstrated good understanding of
> the GDAL code base, and norms.  I think it would be helpful for him
> to have commit access.   You can see some of his past contributions at:
>
>  http://trac.osgeo.org/gdal/search?q=bishop
>
> Dmitry, could you publically reply to this message indicating your
> willingness to follow RFC3?
>
>  http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the voting with my support.
>
> +1 Frank
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120125/0eba24dc/attachment.html
From dmorissette at mapgears.com  Wed Jan 25 08:23:34 2012
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Jan 25 08:23:53 2012
Subject: [gdal-dev] Motion: Commit Rights for Dmitry Barishnikov (aka
	bishop)
In-Reply-To: <CA+YzLBdiEuibviSBL70wX9ArVuj5nLviNdwYXNK=-dHwpmcYNw@mail.gmail.com>
References: <CA+YzLBdiEuibviSBL70wX9ArVuj5nLviNdwYXNK=-dHwpmcYNw@mail.gmail.com>
Message-ID: <4F200256.9080803@mapgears.com>

+1

Daniel

On 12-01-24 2:49 PM, Frank Warmerdam wrote:
> Motion: GDAL/OGR Commit rights are extended to Dmitry Barishnikov
> /??????? ?????????? (userid: bishop).
>
> ---
>
> Folks,
>
> Dmitry has been providing patches for GDAL/OGR for several years
> now and has, in my opinion, demonstrated good understanding of
> the GDAL code base, and norms.  I think it would be helpful for him
> to have commit access.   You can see some of his past contributions at:
>
>    http://trac.osgeo.org/gdal/search?q=bishop
>
> Dmitry, could you publically reply to this message indicating your
> willingness to follow RFC3?
>
>    http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start the voting with my support.
>
> +1 Frank
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From tyler.mitchell at actian.com  Wed Jan 25 10:13:40 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Wed Jan 25 10:14:10 2012
Subject: [gdal-dev] Ingres driver on Windows
Message-ID: <A3919B0B-D17E-4F97-A5BC-D831F6014FE0@actian.com>

Hi Frank and all,  hope your winter (or summer) is treating you well, things are going well at my end.  I'm getting my head into the OGR Ingres driver these days and happy to have it building well on Linux.  :)

On Windows I'm not having so much fun though and could use a tip or two.  That's mostly because I'm new to how nmake (VS2010) expects things, having barely used it before.

While setting INGRES_LIB and INGRES_INC as env vars pointing to the right folders on Linux, it was enough for it to figure itself out.  But on Windows does it require a pointer to a specific file instead?  My build's failing as it tries to open a strange permutation of INGRES_LIB:
LINK : fatal error LNK1181: cannot open input file 'C:\Users\admin\src\ingres\lib\.obj'  If I set it to point to any files, then it builds without errors but not with any Ingres support.

Perhaps the windows makefile needs to be updated to handle Ingres?  I'm grasping at straws, I know :)

Any tips for an nmake n00b? :)  I don't assume anyone other than Frank has kicked the Ingres tires much, but would appreciate any suggestions.

Best wishes and thanks!
Tyler



From eduardo.kanegae at gmail.com  Wed Jan 25 11:06:00 2012
From: eduardo.kanegae at gmail.com (Eduardo Kanegae)
Date: Wed Jan 25 11:07:18 2012
Subject: [gdal-dev] Re: How to export STYLE from Mapinfo to Shapefile?
In-Reply-To: <CAF_a5SJ3PsFqhcwUgLo=raTTZ-oD4ZEO2VCukYvRWQByzp8+DQ@mail.gmail.com>
References: <CAF_a5SJ3PsFqhcwUgLo=raTTZ-oD4ZEO2VCukYvRWQByzp8+DQ@mail.gmail.com>
Message-ID: <CAF_a5SKvv6VcXE+NCCAUGFvcRNvu66VpAQy+ewrFtqHtLifknA@mail.gmail.com>

hi,

By now the only solution I can think is

* dump ogrinfo ouput to a txt file
* use Notepad++ and/or spreadsheet ( ou something like grep/sed/cut )
to generate a CSV file
* join the CSV with mapinfo in QGIS
* export the join to shp and then transform it back to mapinfo

Eduardo


2012/1/25 Eduardo Kanegae <eduardo.kanegae@gmail.com>
>
> hi there,
>
> I need to read mapinfo data from a file but:
> * when opening the mapinfo file using QGIS only ID field is displayed
> within attributes table
> * the attribute I need is set at STYLE property at mapinfo file
>
> The result of an ogrinfo line dump is:
> ?OGRFeature(TESTE_NUMERACAO):1536
> ? ID (Integer) = 244106
> ? *Style* = LABEL(t:"335",a:295.100000,s:2.759527g,c:#000000,p:1,f:"Arial")
> ? POINT (288636.59898806165 7465166.827180054)
>
> I need Style->Label->t value to be converted to a shapefile column (335 value).
>
> Is there any parameter to use with ogr2ogr to export this value?
>
> thanks in advance
>
> Eduardo Patto Kanegae
> http://www.webmapit.com?| @webmapit
From Ralf.Suhr at itc-halle.de  Wed Jan 25 11:45:28 2012
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Wed Jan 25 11:45:42 2012
Subject: [gdal-dev] How to export STYLE from Mapinfo to Shapefile?
In-Reply-To: <CAF_a5SJ3PsFqhcwUgLo=raTTZ-oD4ZEO2VCukYvRWQByzp8+DQ@mail.gmail.com>
References: <CAF_a5SJ3PsFqhcwUgLo=raTTZ-oD4ZEO2VCukYvRWQByzp8+DQ@mail.gmail.com>
Message-ID: <201201251745.28915.Ralf.Suhr@itc-halle.de>

Hi Eduardo,

you can get the style information by using the sql-option of ogr2ogr.

-sql "SELECT *, OGR_STYLE FROM TESTE_NUMERACAO"


Gr
Ralf

On Mittwoch 25 Januar 2012 10:56:25 Eduardo Kanegae wrote:
> hi there,
> 
> I need to read mapinfo data from a file but:
> * when opening the mapinfo file using QGIS only ID field is displayed
> within attributes table
> * the attribute I need is set at STYLE property at mapinfo file
> 
> The result of an ogrinfo line dump is:
>  OGRFeature(TESTE_NUMERACAO):1536
>    ID (Integer) = 244106
>    *Style* =
> LABEL(t:"335",a:295.100000,s:2.759527g,c:#000000,p:1,f:"Arial") POINT
> (288636.59898806165 7465166.827180054)
> 
> I need Style->Label->t value to be converted to a shapefile column (335
> value).
> 
> Is there any parameter to use with ogr2ogr to export this value?
> 
> thanks in advance
> 
> Eduardo Patto Kanegae
> http://www.webmapit.com | @webmapit
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120125/21de0b17/attachment.html
From warmerdam at pobox.com  Wed Jan 25 13:41:58 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 25 13:42:02 2012
Subject: [gdal-dev] Ingres driver on Windows
In-Reply-To: <A3919B0B-D17E-4F97-A5BC-D831F6014FE0@actian.com>
References: <A3919B0B-D17E-4F97-A5BC-D831F6014FE0@actian.com>
Message-ID: <CA+YzLBeZCeq_usvXR25mNZh5o1H0=uHFMuStn7xzg2hGi_YQ8Q@mail.gmail.com>

On Wed, Jan 25, 2012 at 7:13 AM, Tyler Mitchell
<tyler.mitchell@actian.com> wrote:
> Hi Frank and all, ?hope your winter (or summer) is treating you well, things are going well at my end. ?I'm getting my head into the OGR Ingres driver these days and happy to have it building well on Linux. ?:)
>
> On Windows I'm not having so much fun though and could use a tip or two. ?That's mostly because I'm new to how nmake (VS2010) expects things, having barely used it before.
>
> While setting INGRES_LIB and INGRES_INC as env vars pointing to the right folders on Linux, it was enough for it to figure itself out. ?But on Windows does it require a pointer to a specific file instead? ?My build's failing as it tries to open a strange permutation of INGRES_LIB:
> LINK : fatal error LNK1181: cannot open input file 'C:\Users\admin\src\ingres\lib\.obj' ?If I set it to point to any files, then it builds without errors but not with any Ingres support.
>
> Perhaps the windows makefile needs to be updated to handle Ingres? ?I'm grasping at straws, I know :)
>
> Any tips for an nmake n00b? :) ?I don't assume anyone other than Frank has kicked the Ingres tires much, but would appreciate any suggestions.

Tyler,

Skimming gdal\nmake.opt and looking in gdal\ogr\ogrsf_frmts\ingres for
a makefile.vc it appears that I never built the ingres driver on windows so
I'm guessing you have added INGRES_LIB/INGRES_INC yourself and set
up vc makefiles?   If you come up with changes make sure to file a ticket
with them to incorporate.  If you need a hand building things on windows
point me to ingres windows libraries and I'll try it in a VM.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From tyler.mitchell at actian.com  Wed Jan 25 14:23:55 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Wed Jan 25 14:24:43 2012
Subject: [gdal-dev] Ingres driver on Windows
In-Reply-To: <CA+YzLBeZCeq_usvXR25mNZh5o1H0=uHFMuStn7xzg2hGi_YQ8Q@mail.gmail.com>
References: <A3919B0B-D17E-4F97-A5BC-D831F6014FE0@actian.com>
	<CA+YzLBeZCeq_usvXR25mNZh5o1H0=uHFMuStn7xzg2hGi_YQ8Q@mail.gmail.com>
Message-ID: <99BFE4E3-F6CF-4B21-BC7D-F1802EF73F55@actian.com>


On 2012-01-25, at 10:41 AM, Frank Warmerdam wrote:

> On Wed, Jan 25, 2012 at 7:13 AM, Tyler Mitchell
> <tyler.mitchell@actian.com> wrote:
>> Hi Frank and all,  hope your winter (or summer) is treating you well, things are going well at my end.  I'm getting my head into the OGR Ingres driver these days and happy to have it building well on Linux.  :)
>> 
>> On Windows I'm not having so much fun though and could use a tip or two.  That's mostly because I'm new to how nmake (VS2010) expects things, having barely used it before.
>> 
>> While setting INGRES_LIB and INGRES_INC as env vars pointing to the right folders on Linux, it was enough for it to figure itself out.  But on Windows does it require a pointer to a specific file instead?  My build's failing as it tries to open a strange permutation of INGRES_LIB:
>> LINK : fatal error LNK1181: cannot open input file 'C:\Users\admin\src\ingres\lib\.obj'  If I set it to point to any files, then it builds without errors but not with any Ingres support.
>> 
>> Perhaps the windows makefile needs to be updated to handle Ingres?  I'm grasping at straws, I know :)
>> 
>> Any tips for an nmake n00b? :)  I don't assume anyone other than Frank has kicked the Ingres tires much, but would appreciate any suggestions.
> 
> Tyler,
> 
> Skimming gdal\nmake.opt and looking in gdal\ogr\ogrsf_frmts\ingres for
> a makefile.vc it appears that I never built the ingres driver on windows so
> I'm guessing you have added INGRES_LIB/INGRES_INC yourself and set
> up vc makefiles?   If you come up with changes make sure to file a ticket
> with them to incorporate.  

Thank you for looking Frank!  I have only been setting the variables myself
and don't know enough about vc makefiles to much more at this point.  I'll
definitely get this written up if you can get it building.  I'm stuck though so far.

> If you need a hand building things on windows
> point me to ingres windows libraries and I'll try it in a VM.

I've bundled together just the basics that I think are needed.

http://db.tt/0LtX9YvL

Linux variables seem to look for:
INGRES_LIB -> ingres\lib
INGRES_INC -> ingres\files

They aren't officially distributed separately as a library package, so I might have missed
something doing it ad-hoc.

I'd be thrilled if you get a chance to peek at it.  I'll be in IRC if you have 
thoughts to share or things I should try.

Thank you,
Tyler

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120125/4f07dd8c/attachment.html
From dvdov at yahoo.com  Wed Jan 25 23:04:42 2012
From: dvdov at yahoo.com (David Ortiz)
Date: Wed Jan 25 23:05:41 2012
Subject: [gdal-dev] HDF-EOS AIRS CO2 images without georeference using
	gdal_translate
Message-ID: <1327550682.65931.YahooMailNeo@web112018.mail.gq1.yahoo.com>

Hi Everyone, greetings.

I am working with AIRS images, specifically CO2 products (AIRX2STC,AIRX2SPC) and i am trying to convert a couple of subdataset from .hdf files to other format as GTiff or .img so that can be handled on some open source GIS but using gdal_translate there are problems, mainly a lack of georeference in processed images.

?The file is?AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf downloadable from
?ttp://mirador.gsfc.nasa.gov/cgi-bin/mirador/homepageAlt.pl?keyword=AIRX2SPC??for 2008-03-12 date.A special feature of this kind of files is geolocations fields "latitude" and "longitude" ?have some values =-9999 where respective pixel doesn't have information about co2 amounts.

* When I?do gdalinfo I get?:

gdalinfo /home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf
Size is 512, 512
Coordinate System is `'
Metadata:
? ? ? ? ? ? ? ? ? ? ?...

? ? ? ? ? ? ? ? ? ? ? ...
? GROUP ? ? ? ? ? ? ? ? ?= SPATIALDOMAINCONTAINER

? ? GROUP ? ? ? ? ? ? ? ? ?= HORIZONTALSPATIALDOMAINCONTAINER

? ? ? GROUP ? ? ? ? ? ? ? ? ?= BOUNDINGRECTANGLE

? ? ? ? OBJECT ? ? ? ? ? ? ? ? = EASTBOUNDINGCOORDINATE

? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= -133.537399291992
? ? ? ? END_OBJECT ? ? ? ? ? ? = EASTBOUNDINGCOORDINATE
? ? ? ? OBJECT ? ? ? ? ? ? ? ? = WESTBOUNDINGCOORDINATE

? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= -157.941314697266
? ? ? ? END_OBJECT ? ? ? ? ? ? = WESTBOUNDINGCOORDINATE
? ? ? ? OBJECT ? ? ? ? ? ? ? ? = SOUTHBOUNDINGCOORDINATE

? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= 22.2317676544189
? ? ? ? END_OBJECT ? ? ? ? ? ? = SOUTHBOUNDINGCOORDINATE
? ? ? ? OBJECT ? ? ? ? ? ? ? ? = NORTHBOUNDINGCOORDINATE

? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= 45.889762878418
? ? ? ? END_OBJECT ? ? ? ? ? ? = NORTHBOUNDINGCOORDINATE

? ? ? END_GROUP ? ? ? ? ? ? ?= BOUNDINGRECTANGLE
? ? ? ? ? ? ? ? ? ? ?...
? ? ? ? ? ? ? ? ? ? ?...
??HDFEOSVersion=HDFEOS_V2.12
? ProductGenerationHostInformation=alpha.jpl.nasa.gov Linux 2.6.9-78.0.22.ELsmp #1_SMP_Thu_Apr_30_19:17:40_EDT_2009 x86_64
? VersionRetrieval=5.2.2.0
Subdatasets:
?? ? ? ? ? ? ? ? ? ? ...

?SUBDATASET_8_NAME=HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret

? SUBDATASET_8_DESC=[22x15] CO2ret CO2 (32-bit floating-point)
??? ? ? ? ? ? ? ? ? ? ?...
? SUBDATASET_11_DESC=[22x15x100] AvgKern CO2 (32-bit floating-point)
?SUBDATASET_12_NAME=HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":0
?? ? ? ? ? ? ? ? ? ? ...

SUBDATASET_19_NAME=HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":7
? SUBDATASET_19_DESC=[22x15] CO2ret (32-bit floating-point)
?? ? ? ? ? ? ? ? ? ? ?...???? SUBDATASET_23_NAME=HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":11
? SUBDATASET_23_DESC=[22x15] Latitude (32-bit floating-point)
? SUBDATASET_24_NAME=HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":12
? SUBDATASET_24_DESC=[22x15] Longitude (32-bit floating-point)

Corner Coordinates:
Upper Left ?( ? ?0.0, ? ?0.0)
Lower Left ?( ? ?0.0, ?512.0)
Upper Right ( ?512.0, ? ?0.0)
Lower Right ( ?512.0, ?512.0)
Center ? ? ?( ?256.0, ?256.0)


* I need "CO2ret" subdataset. Using gdalinfo:

root@debian:/home/david# gdalinfo HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret
Driver: HDF4Image/HDF4 Dataset
Files: /home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf
Size is 15, 22
Coordinate System is `'
GCP[ ?0]: Id=, Info=
? ? ? ? ? (0.5,0.5) -> (-9999,-9999,0)
GCP[ ?3]: Id=, Info=

? ? ? ? ? (3.5,0.5) -> (-145.229995727539,23.3500003814697,0)
GCP[ ?4]: Id=, Info=
? ? ? ? ? (4.5,0.5) -> (-9999,-9999,0)
?? ? ? ? ? ? ? ? ? ? ...

? ? ? ? ? ? ? ? ? ? ?...??
GCP[329]: Id=, Info=
? ? ? ? ? (14.5,21.5) -> (-9999,-9999,0)
?? ? ? ? ? ? ? ? ? ? ...

? ? ? ? ? ? ? ? ? ? ?...
Geolocation:

? LINE_OFFSET=0
? LINE_STEP=1
? PIXEL_OFFSET=0
? PIXEL_STEP=1
? X_BAND=1
? X_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:Longitude
? Y_BAND=1
? Y_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:Latitude
Corner Coordinates:
Upper Left ?( ? ?0.0, ? ?0.0)
Lower Left ?( ? ?0.0, ? 22.0)
Upper Right ( ? 15.0, ? ?0.0)
Lower Right ( ? 15.0, ? 22.0)
Center ? ? ?( ? ?7.5, ? 11.0)
Band 1 Block=15x22 Type=Float32, ColorInterp=Gray
? NoData Value=-9999

* I tried create an .img file but the image doesn't spatial reference:

rgdal_translate -of HFA HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret ?/home/david/Descargas/pruebas/CO2_sup_img_EOS.img

* with Geotiff format there is not georeference and all pixels have value =0 :

gdal_translate -of GTiff HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret ?/home/david/Descargas/pruebas/CO2_sup_Gtiff_EOS_traslate.tif
Input file size is 15, 22
0Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.
Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.
...10...20...30...40...50...60...70...80...90...100 - done.

* I tried with gdalwarp but the file doesn't have geographical reference and co2 info:

?gdalwarp HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret ?/home/david/Descargas/pruebas/CO2_sup_Gtiff_EOS_warp.tif
Creating output file that is 141P x 144L.
Processing input file HDF4_EOS:EOS_SWATH:/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf:CO2:CO2ret.
Using internal nodata values (eg. -9999) for image HDF4_EOS:EOS_SWATH:/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf:CO2:CO2ret.
0...10...20...30...40...50...60...70...80...90...100 - done.


* SO, i did the same with subdataset name?HDF4_SDS:UNKNOWN? :

?gdalinfo HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":7
Driver: HDF4Image/HDF4 Dataset
Files: /home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf
Size is 15, 22
Coordinate System is `'
?? ? ? ? ? ? ? ? ? ? ...

? ? ? ? ? ? ? ? ? ? ?...?
Geolocation:
? LINE_OFFSET=0
? LINE_STEP=1
? PIXEL_OFFSET=0
? PIXEL_STEP=1
? SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
? X_BAND=1
? X_DATASET=HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":12
? Y_BAND=1
? Y_DATASET=HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":11
Corner Coordinates:
Upper Left ?( ? ?0.0, ? ?0.0)
Lower Left ?( ? ?0.0, ? 22.0)
Upper Right ( ? 15.0, ? ?0.0)
Lower Right ( ? 15.0, ? 22.0)
Center ? ? ?( ? ?7.5, ? 11.0)
Band 1 Block=15x22 Type=Float32, ColorInterp=Gray

?gdal_translate -of HFA HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":7 /home/david/Descargas/pruebas/CO2_sup_img_UNKNOWN_traslate.img

?gdal_translate -of GTiff HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":7 /home/david/Descargas/pruebas/CO2_sup_Gtiff_UNKNOWN_traslate.tif
Input file size is 15, 22
0Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.
Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.
...10...20...30...40...50...60...70...80...90...100 - done.

gdalwarp HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":7 /home/david/Descargas/pruebas/CO2_sup_Gtiff_UNKNOWN_warp.tif
Creating output file that is 70P x 72L.
Processing input file HDF4_SDS:UNKNOWN:/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf:7.
ERROR 1: Too many points (441 out of 441) failed to transform,
unable to compute output bounds.
0...10...20...30...40...50...60...70...80...90...100 - done


* but none of images have geographical reference. When i use HEGTool with AIRS radiances (AIRIBRAD products), for example, the Geotiff have WGS84 coordinates.The problem is HEG doesn't support CO2 products.

1. How can i generate ?images with spatial reference?
2. Should i replace -9999 values from latitude and longitude?fields?with other value? How can i do this?

The gdal version is 1.9 built from source with hdf4 support:
./configure --with-hdf4=/home/david/Descargas/gdal_grass_R/hdf-4.2.6-linux --without-grass --without-libgrass?
make
make install




I really?appreciate?your help and?advice

Best Regards


David A. Ortiz V.
UD - ICG
Bogota D.C.?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120125/3f9fa8dd/attachment-0001.html
From chaitanya.ch at gmail.com  Thu Jan 26 02:34:07 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan 26 02:34:46 2012
Subject: [gdal-dev] HDF-EOS AIRS CO2 images without georeference using
	gdal_translate
In-Reply-To: <1327550682.65931.YahooMailNeo@web112018.mail.gq1.yahoo.com>
References: <1327550682.65931.YahooMailNeo@web112018.mail.gq1.yahoo.com>
Message-ID: <CAMKgpOYTDPdc+KtBFV-oAesu_onM_p1mqbByjwEkAoMY3=1E0w@mail.gmail.com>

David,

I used gdal_translate to convert
HDF4_EOS:EOS_SWATH:"AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret
into .img and TIFF format. I didn't get zeros nor did they lose the
coordinate info. I did this with gdal version 1.8 and the latest trunk.

Check your input and output images with "gdalinfo -stats".

On Thu, Jan 26, 2012 at 9:34 AM, David Ortiz <dvdov@yahoo.com> wrote:

> Hi Everyone, greetings.
>
> I am working with AIRS images, specifically CO2 products
> (AIRX2STC,AIRX2SPC) and i am trying to convert a couple of subdataset from
> .hdf files to other format as GTiff or .img so that can be handled on some
> open source GIS but using gdal_translate there are problems, mainly a lack
> of georeference in processed images.
>
>  The file is AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf
> downloadable from
>  ttp://
> mirador.gsfc.nasa.gov/cgi-bin/mirador/homepageAlt.pl?keyword=AIRX2SPC  for
> 2008-03-12 date.A special feature of this kind of files is geolocations
> fields "latitude" and "longitude"  have some values =-9999 where respective
> pixel doesn't have information about co2 amounts.
>
> * When I do gdalinfo I get :
>
> gdalinfo
> /home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf
> Size is 512, 512
> Coordinate System is `'
> Metadata:
>                      ...
>                       ...
>   GROUP                  = SPATIALDOMAINCONTAINER
>     GROUP                  = HORIZONTALSPATIALDOMAINCONTAINER
>       GROUP                  = BOUNDINGRECTANGLE
>         OBJECT                 = EASTBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = -133.537399291992
>         END_OBJECT             = EASTBOUNDINGCOORDINATE
>         OBJECT                 = WESTBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = -157.941314697266
>         END_OBJECT             = WESTBOUNDINGCOORDINATE
>         OBJECT                 = SOUTHBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = 22.2317676544189
>         END_OBJECT             = SOUTHBOUNDINGCOORDINATE
>         OBJECT                 = NORTHBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = 45.889762878418
>         END_OBJECT             = NORTHBOUNDINGCOORDINATE
>
>       END_GROUP              = BOUNDINGRECTANGLE
>                      ...
>                      ...
>   HDFEOSVersion=HDFEOS_V2.12
>   ProductGenerationHostInformation=alpha.jpl.nasa.gov Linux
> 2.6.9-78.0.22.ELsmp #1_SMP_Thu_Apr_30_19:17:40_EDT_2009 x86_64
>   VersionRetrieval=5.2.2.0
> Subdatasets:
>                      ...
>
>  SUBDATASET_8_NAME=HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret
>   SUBDATASET_8_DESC=[22x15] CO2ret CO2 (32-bit floating-point)
>                        ...
>   SUBDATASET_11_DESC=[22x15x100] AvgKern CO2 (32-bit floating-point)
>
>  SUBDATASET_12_NAME=HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":0
>                      ...
>
> SUBDATASET_19_NAME=HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":7
>   SUBDATASET_19_DESC=[22x15] CO2ret (32-bit floating-point)
>                       ...
> SUBDATASET_23_NAME=HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":11
>   SUBDATASET_23_DESC=[22x15] Latitude (32-bit floating-point)
>
> SUBDATASET_24_NAME=HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":12
>   SUBDATASET_24_DESC=[22x15] Longitude (32-bit floating-point)
>
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  512.0)
> Upper Right (  512.0,    0.0)
> Lower Right (  512.0,  512.0)
> Center      (  256.0,  256.0)
>
>
> * I need "CO2ret" subdataset. Using gdalinfo:
>
> root@debian:/home/david# gdalinfo
> HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret
> Driver: HDF4Image/HDF4 Dataset
> Files:
> /home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf
> Size is 15, 22
> Coordinate System is `'
> GCP[  0]: Id=, Info=
>           (0.5,0.5) -> (-9999,-9999,0)
> GCP[  3]: Id=, Info=
>           (3.5,0.5) -> (-145.229995727539,23.3500003814697,0)
> GCP[  4]: Id=, Info=
>           (4.5,0.5) -> (-9999,-9999,0)
>                      ...
>                      ...
> GCP[329]: Id=, Info=
>           (14.5,21.5) -> (-9999,-9999,0)
>                      ...
>                      ...
> Geolocation:
>   LINE_OFFSET=0
>   LINE_STEP=1
>   PIXEL_OFFSET=0
>   PIXEL_STEP=1
>   X_BAND=1
>
> X_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:Longitude
>   Y_BAND=1
>
> Y_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:Latitude
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,   22.0)
> Upper Right (   15.0,    0.0)
> Lower Right (   15.0,   22.0)
> Center      (    7.5,   11.0)
> Band 1 Block=15x22 Type=Float32, ColorInterp=Gray
>   NoData Value=-9999
>
> * I tried create an .img file but the image doesn't spatial reference:
>
> rgdal_translate -of HFA
> HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret
>  /home/david/Descargas/pruebas/CO2_sup_img_EOS.img
>
> * with Geotiff format there is not georeference and all pixels have value
> =0 :
>
> gdal_translate -of GTiff
> HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret
>  /home/david/Descargas/pruebas/CO2_sup_Gtiff_EOS_traslate.tif
> Input file size is 15, 22
> 0Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.
> Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.
> ...10...20...30...40...50...60...70...80...90...100 - done.
>
> * I tried with gdalwarp but the file doesn't have geographical reference
> and co2 info:
>
>  gdalwarp
> HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret
>  /home/david/Descargas/pruebas/CO2_sup_Gtiff_EOS_warp.tif
> Creating output file that is 141P x 144L.
> Processing input file
> HDF4_EOS:EOS_SWATH:/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf:CO2:CO2ret.
> Using internal nodata values (eg. -9999) for image
> HDF4_EOS:EOS_SWATH:/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf:CO2:CO2ret.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
>
> * SO, i did the same with subdataset name HDF4_SDS:UNKNOWN  :
>
>  gdalinfo
> HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":7
> Driver: HDF4Image/HDF4 Dataset
> Files:
> /home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf
> Size is 15, 22
> Coordinate System is `'
>                      ...
>                      ...
> Geolocation:
>   LINE_OFFSET=0
>   LINE_STEP=1
>   PIXEL_OFFSET=0
>   PIXEL_STEP=1
>   SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
>   X_BAND=1
>
> X_DATASET=HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":12
>   Y_BAND=1
>
> Y_DATASET=HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":11
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,   22.0)
> Upper Right (   15.0,    0.0)
> Lower Right (   15.0,   22.0)
> Center      (    7.5,   11.0)
> Band 1 Block=15x22 Type=Float32, ColorInterp=Gray
>
>  gdal_translate -of HFA
> HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":7
> /home/david/Descargas/pruebas/CO2_sup_img_UNKNOWN_traslate.img
>
>  gdal_translate -of GTiff
> HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":7
> /home/david/Descargas/pruebas/CO2_sup_Gtiff_UNKNOWN_traslate.tif
> Input file size is 15, 22
> 0Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.
> Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.
> ...10...20...30...40...50...60...70...80...90...100 - done.
>
> gdalwarp
> HDF4_SDS:UNKNOWN:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":7
> /home/david/Descargas/pruebas/CO2_sup_Gtiff_UNKNOWN_warp.tif
> Creating output file that is 70P x 72L.
> Processing input file
> HDF4_SDS:UNKNOWN:/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf:7.
> ERROR 1: Too many points (441 out of 441) failed to transform,
> unable to compute output bounds.
> 0...10...20...30...40...50...60...70...80...90...100 - done
>
>
> * but none of images have geographical reference. When i use HEGTool with
> AIRS radiances (AIRIBRAD products), for example, the Geotiff have WGS84
> coordinates.The problem is HEG doesn't support CO2 products.
>
> 1. How can i generate  images with spatial reference?
> 2. Should i replace -9999 values from latitude and longitude fields with
> other value? How can i do this?
>
> The gdal version is 1.9 built from source with hdf4 support:
> ./configure --with-hdf4=/home/david/Descargas/gdal_grass_R/hdf-4.2.6-linux
> --without-grass --without-libgrass
> make
> make install
>
>
>
>
> I really appreciate your help and advice
>
> Best Regards
>
>
> David A. Ortiz V.
> UD - ICG
> Bogota D.C.
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120126/316ae3fe/attachment-0001.html
From warmerdam at pobox.com  Thu Jan 26 04:03:11 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 26 04:03:48 2012
Subject: [gdal-dev] Ingres driver on Windows
In-Reply-To: <99BFE4E3-F6CF-4B21-BC7D-F1802EF73F55@actian.com>
References: <A3919B0B-D17E-4F97-A5BC-D831F6014FE0@actian.com>
	<CA+YzLBeZCeq_usvXR25mNZh5o1H0=uHFMuStn7xzg2hGi_YQ8Q@mail.gmail.com>
	<99BFE4E3-F6CF-4B21-BC7D-F1802EF73F55@actian.com>
Message-ID: <4F2116CF.3010107@pobox.com>

On 12-01-25 11:23 AM, Tyler Mitchell wrote:
> I've bundled together just the basics that I think are needed.
>
> http://db.tt/0LtX9YvL

Tyler,

Cool, that seemed to have what I needed.

> Linux variables seem to look for:
> INGRES_LIB -> ingres\lib
> INGRES_INC -> ingres\files

There was no build support on windows.  I've added it in trunk:

   http://trac.osgeo.org/gdal/changeset/23805
   http://trac.osgeo.org/gdal/changeset/23806

You can see in the nmake.opt an example of what needs to be set.  Note
there is no precise correspondence between windows builds and unix
builds with regard to variables needed.  So on windows they are
slightly different.

I was able to build and link, but I didn't try running since I don't
have a windows instance.

> They aren't officially distributed separately as a library package, so I might
> have missed
> something doing it ad-hoc.
>
> I'd be thrilled if you get a chance to peek at it. I'll be in IRC if you have
> thoughts to share or things I should try.

If you svn update from gdal trunk you should be able to build.  I'm also
interested in trying an OSGeo4W package for INGRES support but it is
getting a bit late tonight to push on that.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From verena.diewald at wheregroup.com  Thu Jan 26 09:02:37 2012
From: verena.diewald at wheregroup.com (Verena Diewald)
Date: Thu Jan 26 09:44:56 2012
Subject: [gdal-dev] Creating DXF with ogr2ogr
Message-ID: <4F215CFD.7080105@wheregroup.com>

Hi all,


I'm trying to create DXF files from a PostgreSQL database using ogr2ogr:

|ogr2ogr -nln my_data -a_srs EPSG||:25832 -s_srs EPSG:25832 -t_srs EPSG:25832 -f "DXF" my_data.dxf PG:'host||=localhost password=xxx user=xxx dbname=MYDB' -sql "SELECT * FROM my_data||"


|

It works fine with point data, but I get an invalid dxf file for polygon 
data. Opening the polygon dxf file results in the following error:

The following error was encountered while reading
in HATCH starting at line 1546:
Error: expected group code 10
Invalid or incomplete DXF input -- drawing discarded.



Do I have to pass any more options to ogr2ogr when creating a polygon 
dxf? What did I do wrong?
Does anyone have an idea about that?

Greetings,

Verena

||||


|||||
|



-- 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120126/9d213c45/attachment.html
From darren.carman at infoterra-global.com  Thu Jan 26 10:00:01 2012
From: darren.carman at infoterra-global.com (Carman, Darren)
Date: Thu Jan 26 10:00:12 2012
Subject: [gdal-dev] Creating DXF with ogr2ogr
In-Reply-To: <4F215CFD.7080105@wheregroup.com>
References: <4F215CFD.7080105@wheregroup.com>
Message-ID: <715BFDBEEEDA5245AF02E1C1DCE01C37077E63E5@SV025.infoterra-global.com>

Try adding -nlt POLYGON (also has POINT and LINESTRING options).

 

We have this option on an older version that used the ODA libraries
directly, so can't guarantee it's still the same.

 

Darren

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Verena Diewald
Sent: 26 January 2012 14:03
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Creating DXF with ogr2ogr

 

Hi all,


I'm trying to create DXF files from a PostgreSQL database using ogr2ogr:



ogr2ogr -nln my_data -a_srs EPSG:25832 -s_srs EPSG:25832 -t_srs
EPSG:25832 -f "DXF" my_data.dxf PG:'host=localhost password=xxx user=xxx
dbname=MYDB' -sql "SELECT * FROM my_data"
 
 

It works fine with point data, but I get an invalid dxf file for polygon
data. Opening the polygon dxf file results in the following error:



The following error was encountered while reading
in HATCH starting at line 1546:
Error: expected group code 10
Invalid or incomplete DXF input -- drawing discarded.
 
 

Do I have to pass any more options to ogr2ogr when creating a polygon
dxf? What did I do wrong?
Does anyone have an idea about that?

Greetings,

Verena








 






-- 
 

Infoterra Ltd. Is part of the Astrium GEO-Information Services Division and a wholly owned subsidiary of Astrium, Europe's leading space systems and services specialist.

Disclaimer. The information contained in this e-mail and its attachments are confidential and intended only for the use of the named addressee(s). If you are not the intended addressee, please do not read, copy, use or disclose this message or its attachments. If you have received this message in error, please notify the sender immediately and delete or destroy all copies of this message and attachments in all media. Any views or opinions expressed are solely those of the author and do not necessarily represent those of Infoterra Ltd and shall not form part of any binding agreement.

Infoterra Limited a company registered in England under number 2359955 and having its registered office at Atlas House, 41 Wembley Road, Leicester, LE3 1UT. VAT number GB 476 0468 27. 

P Before printing, think about the environment 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120126/b1cc5690/attachment.html
From verena.diewald at wheregroup.com  Thu Jan 26 10:56:48 2012
From: verena.diewald at wheregroup.com (Verena Diewald)
Date: Thu Jan 26 10:57:42 2012
Subject: [gdal-dev] Creating DXF with ogr2ogr
In-Reply-To: <715BFDBEEEDA5245AF02E1C1DCE01C37077E63E5@SV025.infoterra-global.com>
References: <4F215CFD.7080105@wheregroup.com>
	<715BFDBEEEDA5245AF02E1C1DCE01C37077E63E5@SV025.infoterra-global.com>
Message-ID: <4F2177C0.8060308@wheregroup.com>

Hi Darren,


I tried that option, but the error still remains.
Does anyone have another idea?


Greetings,

Verena



Am 26.01.2012 16:00, schrieb Carman, Darren:
>
> Try adding -nlt POLYGON (also has POINT and LINESTRING options).
>
> We have this option on an older version that used the ODA libraries 
> directly, so can't guarantee it's still the same.
>
> Darren
>
> *From:*gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Verena Diewald
> *Sent:* 26 January 2012 14:03
> *To:* gdal-dev@lists.osgeo.org
> *Subject:* [gdal-dev] Creating DXF with ogr2ogr
>
> Hi all,
>
>
> I'm trying to create DXF files from a PostgreSQL database using ogr2ogr:
>
> |ogr2ogr -nln my_data -a_srs EPSG:25832 -s_srs EPSG:25832 -t_srs EPSG:25832 -f "DXF" my_data.dxf PG:'host=localhost password=xxx user=xxx dbname=MYDB' -sql "SELECT * FROM my_data"|
> |  |
> |  |
>
> It works fine with point data, but I get an invalid dxf file for 
> polygon data. Opening the polygon dxf file results in the following error:
>
> The following error was encountered while reading
> in HATCH starting at line 1546:
> Error: expected group code 10
> Invalid or incomplete DXF input -- drawing discarded.
>   
>   
>
> Do I have to pass any more options to ogr2ogr when creating a polygon 
> dxf? What did I do wrong?
> Does anyone have an idea about that?
>
> Greetings,
>
> Verena
>
>
>
>
> |  |
>
>
>
>
> -- 
>   
>
> Infoterra Ltd. Is part of the Astrium GEO-Information Services 
> Division and a wholly owned subsidiary of Astrium, Europe's leading 
> space systems and services specialist.
>
> Disclaimer. The information contained in this e-mail and its 
> attachments are confidential and intended only for the use of the 
> named addressee(s). If you are not the intended addressee, please do 
> not read, copy, use or disclose this message or its attachments. If 
> you have received this message in error, please notify the sender 
> immediately and delete or destroy all copies of this message and 
> attachments in all media. Any views or opinions expressed are solely 
> those of the author and do not necessarily represent those of 
> Infoterra Ltd and shall not form part of any binding agreement.
>
> Infoterra Limited a company registered in England under number 2359955 
> and having its registered office at Atlas House, 41 Wembley Road, 
> Leicester, LE3 1UT. VAT number GB 476 0468 27.
>
> P Before printing, think about the environment
>
>

-- 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120126/02236185/attachment-0001.html
From Ralf.Suhr at itc-halle.de  Thu Jan 26 11:20:29 2012
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Thu Jan 26 11:20:43 2012
Subject: [gdal-dev] Creating DXF with ogr2ogr
In-Reply-To: <4F2177C0.8060308@wheregroup.com>
References: <4F215CFD.7080105@wheregroup.com>
	<715BFDBEEEDA5245AF02E1C1DCE01C37077E63E5@SV025.infoterra-global.com>
	<4F2177C0.8060308@wheregroup.com>
Message-ID: <201201261720.29598.Ralf.Suhr@itc-halle.de>

Hi Verena,

can you provide more information. What software version did you use (gdal, 
postgis). What kind of geometries is in the database.
psql -d mydb -c "SELECT DISTINCT GeometryType( geom_column ) FROM my_data"

What happend if you select only one geometrytype from database.

ogr2ogr -f "DXF" -sql "SELECT * FROM my_data WHERE GeometryType( geom_column ) 
= 'POLYGON'" my_data.dxf PG:'host=localhost password=xxx user=xxx dbname=MYDB'


Gr
Ralf

On Donnerstag 26 Januar 2012 16:56:48 Verena Diewald wrote:
> Hi Darren,
> 
> 
> I tried that option, but the error still remains.
> Does anyone have another idea?
> 
> 
> Greetings,
> 
> Verena
> 
> Am 26.01.2012 16:00, schrieb Carman, Darren:
> > Try adding -nlt POLYGON (also has POINT and LINESTRING options).
> > 
> > We have this option on an older version that used the ODA libraries
> > directly, so can't guarantee it's still the same.
> > 
> > Darren
> > 
> > *From:*gdal-dev-bounces@lists.osgeo.org
> > [mailto:gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Verena Diewald
> > *Sent:* 26 January 2012 14:03
> > *To:* gdal-dev@lists.osgeo.org
> > *Subject:* [gdal-dev] Creating DXF with ogr2ogr
> > 
> > Hi all,
> > 
> > I'm trying to create DXF files from a PostgreSQL database using ogr2ogr:
> > |ogr2ogr -nln my_data -a_srs EPSG:25832 -s_srs EPSG:25832 -t_srs
> > |EPSG:25832 -f "DXF" my_data.dxf PG:'host=localhost password=xxx
> > |user=xxx dbname=MYDB' -sql "SELECT * FROM my_data"|
> > 
> > It works fine with point data, but I get an invalid dxf file for
> > polygon data. Opening the polygon dxf file results in the following
> > error:
> > 
> > The following error was encountered while reading
> > in HATCH starting at line 1546:
> > Error: expected group code 10
> > Invalid or incomplete DXF input -- drawing discarded.
> > 
> > 
> > 
> > Do I have to pass any more options to ogr2ogr when creating a polygon
> > dxf? What did I do wrong?
> > Does anyone have an idea about that?
> > 
> > Greetings,
> > 
> > Verena
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > Infoterra Ltd. Is part of the Astrium GEO-Information Services
> > Division and a wholly owned subsidiary of Astrium, Europe's leading
> > space systems and services specialist.
> > 
> > Disclaimer. The information contained in this e-mail and its
> > attachments are confidential and intended only for the use of the
> > named addressee(s). If you are not the intended addressee, please do
> > not read, copy, use or disclose this message or its attachments. If
> > you have received this message in error, please notify the sender
> > immediately and delete or destroy all copies of this message and
> > attachments in all media. Any views or opinions expressed are solely
> > those of the author and do not necessarily represent those of
> > Infoterra Ltd and shall not form part of any binding agreement.
> > 
> > Infoterra Limited a company registered in England under number 2359955
> > and having its registered office at Atlas House, 41 Wembley Road,
> > Leicester, LE3 1UT. VAT number GB 476 0468 27.
> > 
> > P Before printing, think about the environment
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120126/75baaf78/attachment.html
From jburnson at yahoo.com  Thu Jan 26 12:01:32 2012
From: jburnson at yahoo.com (J. Burnson)
Date: Thu Jan 26 12:03:39 2012
Subject: [gdal-dev] Re-loading non-spatial data using OGR2OGR
Message-ID: <1327597292.2643.YahooMailClassic@web180902.mail.ne1.yahoo.com>






Hi,
I am trying to load a non-spatial CSV file into Oracle using ogr2ogr (GDAL 1.8.1).?It works on the first attempt (when no destination table exists) but in later attempts, I get "name is already used by an existing object".
?
ogr2ogr -append -f OCI OCI:user/password@db -nln r_sign_ogr X:/R_Sign.csv -nlt NONE
?
I have tried every combination of overwrite/append/update that I can think of, as well as using?"-nlt NONE". I do not have trouble re-populating spatial tables.
?
Any suggestions would be welcome! Thank you,
John
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120126/c14d06c3/attachment.html
From Tyler.Mitchell at actian.com  Thu Jan 26 13:07:07 2012
From: Tyler.Mitchell at actian.com (Tyler Mitchell)
Date: Thu Jan 26 13:07:34 2012
Subject: [gdal-dev] Ingres driver on Windows
In-Reply-To: <4F2116CF.3010107@pobox.com>
References: <A3919B0B-D17E-4F97-A5BC-D831F6014FE0@actian.com>
	<CA+YzLBeZCeq_usvXR25mNZh5o1H0=uHFMuStn7xzg2hGi_YQ8Q@mail.gmail.com>
	<99BFE4E3-F6CF-4B21-BC7D-F1802EF73F55@actian.com>
	<4F2116CF.3010107@pobox.com>
Message-ID: <AA2EB452-F582-423C-991E-E8E81A2360B1@actian.com>

Awesome, I'm going to check it out today for sure!

Thanks a lot!
Tyler

On 2012-01-26, at 1:03 AM, Frank Warmerdam wrote:

> On 12-01-25 11:23 AM, Tyler Mitchell wrote:
>> I've bundled together just the basics that I think are needed.
>> 
>> http://db.tt/0LtX9YvL
> 
> Tyler,
> 
> Cool, that seemed to have what I needed.
> 
>> Linux variables seem to look for:
>> INGRES_LIB -> ingres\lib
>> INGRES_INC -> ingres\files
> 
> There was no build support on windows.  I've added it in trunk:
> 
>  http://trac.osgeo.org/gdal/changeset/23805
>  http://trac.osgeo.org/gdal/changeset/23806
> 
> You can see in the nmake.opt an example of what needs to be set.  Note
> there is no precise correspondence between windows builds and unix
> builds with regard to variables needed.  So on windows they are
> slightly different.
> 
> I was able to build and link, but I didn't try running since I don't
> have a windows instance.
> 
>> They aren't officially distributed separately as a library package, so I might
>> have missed
>> something doing it ad-hoc.
>> 
>> I'd be thrilled if you get a chance to peek at it. I'll be in IRC if you have
>> thoughts to share or things I should try.
> 
> If you svn update from gdal trunk you should be able to build.  I'm also
> interested in trying an OSGeo4W package for INGRES support but it is
> getting a bit late tonight to push on that.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://home.gdal.org/warmerda
> and watch the world go round - Rush    | Geospatial Software Developer
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120126/b1cdc70d/attachment.html
From chaitanya.ch at gmail.com  Thu Jan 26 13:10:24 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan 26 13:11:04 2012
Subject: [gdal-dev] Re-loading non-spatial data using OGR2OGR
In-Reply-To: <1327597292.2643.YahooMailClassic@web180902.mail.ne1.yahoo.com>
References: <1327597292.2643.YahooMailClassic@web180902.mail.ne1.yahoo.com>
Message-ID: <CAMKgpOZCKW28sNocWFUMHamWr3AeyL803TZ9AFu5pds=66bc0w@mail.gmail.com>

John,
Try setting the layer creation option MULTI_LOAD to NO using -lco with
ogr2ogr and the configuration option CPL_DEBUG  to OFF [1]. I hope to get
at least a more usable error message.

[1]: http://trac.osgeo.org/gdal/wiki/ConfigOptions

On Thu, Jan 26, 2012 at 10:31 PM, J. Burnson <jburnson@yahoo.com> wrote:

>   Hi,
> I am trying to load a non-spatial CSV file into Oracle using ogr2ogr (GDAL
> 1.8.1). It works on the first attempt (when no destination table exists)
> but in later attempts, I get "name is already used by an existing object".
>
> ogr2ogr -append -f OCI OCI:user/password@db -nln r_sign_ogr X:/R_Sign.csv
> -nlt NONE
>
> I have tried every combination of overwrite/append/update that I can think
> of, as well as using "-nlt NONE". I do not have trouble re-populating
> spatial tables.
>
> Any suggestions would be welcome! Thank you,
> John
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120126/f647da13/attachment.html
From jburnson at yahoo.com  Thu Jan 26 13:59:29 2012
From: jburnson at yahoo.com (J. Burnson)
Date: Thu Jan 26 14:02:28 2012
Subject: [gdal-dev] Re-loading non-spatial data using OGR2OGR
In-Reply-To: <CAMKgpOZCKW28sNocWFUMHamWr3AeyL803TZ9AFu5pds=66bc0w@mail.gmail.com>
Message-ID: <1327604369.24670.YahooMailClassic@web180908.mail.ne1.yahoo.com>

Hi,
Did?you mean?CPL_DEBUG ON? Here is the output:
?
OCI: Prepare(CREATE TABLE "R_SIGN_OGR" ( OGR_FID INTEGER))
ERROR 1: ORA-00955: name is already used by an existing object?in CREATE TABLE "R_SIGN_OGR" ( OGR_FID INTEGER)
ERROR 1: Terminating translation prematurely after failed translation of layer R_Sign (use -skipfailures to skip errors)
?
For reference, here is the table that ogr2ogr created on?the first pass:


SQL> desc r_sign_ogr
?Name????????????????????????????????????? Null???? Type
?----------------------------------------- -------- ----------------------------
?OGR_FID??????????????????????????????????????????? NUMBER(38)
?field_1??????????????????????????????????????????? VARCHAR2(2047 CHAR)
?field_2??????????????????????????????????????????? VARCHAR2(2047 CHAR)

Adding MULTI_LOAD=NO had no discernible effect.
John

--- On Thu, 1/26/12, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:


From: Chaitanya kumar CH <chaitanya.ch@gmail.com>
Subject: Re: [gdal-dev] Re-loading non-spatial data using OGR2OGR
To: "J. Burnson" <jburnson@yahoo.com>
Cc: gdal-dev@lists.osgeo.org
Date: Thursday, January 26, 2012, 12:10 PM


John,
Try setting the layer creation option MULTI_LOAD to NO using -lco with ogr2ogr and the configuration option CPL_DEBUG? to OFF [1]. I hope to get at least a more usable error message.

[1]: http://trac.osgeo.org/gdal/wiki/ConfigOptions


On Thu, Jan 26, 2012 at 10:31 PM, J. Burnson <jburnson@yahoo.com> wrote:











Hi,
I am trying to load a non-spatial CSV file into Oracle using ogr2ogr (GDAL 1.8.1).?It works on the first attempt (when no destination table exists) but in later attempts, I get "name is already used by an existing object".
?
ogr2ogr -append -f OCI OCI:user/password@db -nln r_sign_ogr X:/R_Sign.csv -nlt NONE
?
I have tried every combination of overwrite/append/update that I can think of, as well as using?"-nlt NONE". I do not have trouble re-populating spatial tables.
?
Any suggestions would be welcome! Thank you,
John
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120126/15404e4f/attachment.html
From chaitanya.ch at gmail.com  Thu Jan 26 14:07:57 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan 26 14:08:25 2012
Subject: [gdal-dev] Re-loading non-spatial data using OGR2OGR
In-Reply-To: <1327604369.24670.YahooMailClassic@web180908.mail.ne1.yahoo.com>
References: <CAMKgpOZCKW28sNocWFUMHamWr3AeyL803TZ9AFu5pds=66bc0w@mail.gmail.com>
	<1327604369.24670.YahooMailClassic@web180908.mail.ne1.yahoo.com>
Message-ID: <CAMKgpOaGn7vp+3cXr1bOnVod0mnMogPuf45x87csF2kwVSw4nA@mail.gmail.com>

John,

Check if it works if you replace "-nln r_sign_ogr" with "-nln R_SIGN_OGR"

On Fri, Jan 27, 2012 at 12:29 AM, J. Burnson <jburnson@yahoo.com> wrote:

> Hi,
> Did you mean CPL_DEBUG ON? Here is the output:
>
> OCI: Prepare(CREATE TABLE "R_SIGN_OGR" ( OGR_FID INTEGER))
> ERROR 1: ORA-00955: name is already used by an existing object in CREATE
> TABLE "R_SIGN_OGR" ( OGR_FID INTEGER)
> ERROR 1: Terminating translation prematurely after failed translation of
> layer R_Sign (use -skipfailures to skip errors)
>
> For reference, here is the table that ogr2ogr created on the first pass:
>
> SQL> desc r_sign_ogr
>  Name                                      Null?    Type
>  ----------------------------------------- --------
> ----------------------------
>  OGR_FID                                            NUMBER(38)
>  field_1                                            VARCHAR2(2047 CHAR)
>  field_2                                            VARCHAR2(2047 CHAR)
> Adding MULTI_LOAD=NO had no discernible effect.
> John
>
> --- On *Thu, 1/26/12, Chaitanya kumar CH <chaitanya.ch@gmail.com>* wrote:
>
>
> From: Chaitanya kumar CH <chaitanya.ch@gmail.com>
> Subject: Re: [gdal-dev] Re-loading non-spatial data using OGR2OGR
> To: "J. Burnson" <jburnson@yahoo.com>
> Cc: gdal-dev@lists.osgeo.org
> Date: Thursday, January 26, 2012, 12:10 PM
>
>
> John,
> Try setting the layer creation option MULTI_LOAD to NO using -lco with
> ogr2ogr and the configuration option CPL_DEBUG  to OFF [1]. I hope to get
> at least a more usable error message.
>
> [1]: http://trac.osgeo.org/gdal/wiki/ConfigOptions
>
> On Thu, Jan 26, 2012 at 10:31 PM, J. Burnson <jburnson@yahoo.com<http://us.mc1809.mail.yahoo.com/mc/compose?to=jburnson@yahoo.com>
> > wrote:
>
>      Hi,
> I am trying to load a non-spatial CSV file into Oracle using ogr2ogr (GDAL
> 1.8.1). It works on the first attempt (when no destination table exists)
> but in later attempts, I get "name is already used by an existing object".
>
> ogr2ogr -append -f OCI OCI:user/password@db -nln r_sign_ogr X:/R_Sign.csv
> -nlt NONE
>
> I have tried every combination of overwrite/append/update that I can think
> of, as well as using "-nlt NONE". I do not have trouble re-populating
> spatial tables.
>
> Any suggestions would be welcome! Thank you,
> John
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org<http://us.mc1809.mail.yahoo.com/mc/compose?to=gdal-dev@lists.osgeo.org>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120127/708f121e/attachment-0001.html
From jburnson at yahoo.com  Thu Jan 26 14:15:26 2012
From: jburnson at yahoo.com (J. Burnson)
Date: Thu Jan 26 14:16:21 2012
Subject: [gdal-dev] Re-loading non-spatial data using OGR2OGR
In-Reply-To: <CAMKgpOZCKW28sNocWFUMHamWr3AeyL803TZ9AFu5pds=66bc0w@mail.gmail.com>
Message-ID: <1327605326.95260.YahooMailClassic@web180904.mail.ne1.yahoo.com>

Hi,
?
Later?tests suggest that ogr2ogr is checking ALL_SDO_GEOM_METADATA for this table, even though?the table is non-spatial (and declared as such). The?lack of a record there?is a trigger for ogr?to create the table de novo.
?
I?am able to?trick the program by manually registering a (fictitious)?shape column for the table?in SDO_GEOM_METADATA. Thereafter, ogr2ogr has no trouble loading and re-loading.?Not ideal but progress of a sort!
?
John

--- On Thu, 1/26/12, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:


From: Chaitanya kumar CH <chaitanya.ch@gmail.com>
Subject: Re: [gdal-dev] Re-loading non-spatial data using OGR2OGR
To: "J. Burnson" <jburnson@yahoo.com>
Cc: gdal-dev@lists.osgeo.org
Date: Thursday, January 26, 2012, 12:10 PM


John,
Try setting the layer creation option MULTI_LOAD to NO using -lco with ogr2ogr and the configuration option CPL_DEBUG? to OFF [1]. I hope to get at least a more usable error message.

[1]: http://trac.osgeo.org/gdal/wiki/ConfigOptions


On Thu, Jan 26, 2012 at 10:31 PM, J. Burnson <jburnson@yahoo.com> wrote:











Hi,
I am trying to load a non-spatial CSV file into Oracle using ogr2ogr (GDAL 1.8.1).?It works on the first attempt (when no destination table exists) but in later attempts, I get "name is already used by an existing object".
?
ogr2ogr -append -f OCI OCI:user/password@db -nln r_sign_ogr X:/R_Sign.csv -nlt NONE
?
I have tried every combination of overwrite/append/update that I can think of, as well as using?"-nlt NONE". I do not have trouble re-populating spatial tables.
?
Any suggestions would be welcome! Thank you,
John
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120126/8b50c7ca/attachment.html
From warmerdam at pobox.com  Thu Jan 26 17:49:15 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 26 17:49:19 2012
Subject: [gdal-dev] Re: Motion: Commit Rights for Dmitry Barishnikov (aka
	bishop)
In-Reply-To: <CA+YzLBdiEuibviSBL70wX9ArVuj5nLviNdwYXNK=-dHwpmcYNw@mail.gmail.com>
References: <CA+YzLBdiEuibviSBL70wX9ArVuj5nLviNdwYXNK=-dHwpmcYNw@mail.gmail.com>
Message-ID: <CA+YzLBeLUcKyrY7Xav4hWSqKw77u=-W9Wq163nT9zk33vRXddA@mail.gmail.com>

2012/1/24 Frank Warmerdam <warmerdam@pobox.com>:
> Motion: GDAL/OGR Commit rights are extended to Dmitry Barishnikov
> /??????? ?????????? (userid: bishop).
>

Folks,

I declare this motion passed with support from myself, Even, Daniel,
and Tamas.  Welcome to the team Dmitri!  As a first test of commit
access, please add yourself to the gdal/COMMITERS file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From mathuin at gmail.com  Thu Jan 26 18:39:50 2012
From: mathuin at gmail.com (John Twilley)
Date: Thu Jan 26 18:40:09 2012
Subject: [gdal-dev] gdalwarp makes landcover files blocky when shrinking
	pixel size
Message-ID: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>

I am working with elevation and landcover data downloaded from the
USGS. ?I use gdalwarp to convert the data to a much smaller pixel. The
elevation data works very nicely with cubic resampling, but the only
resampling that works at all for the landcover data is
nearest-neighbor and that's very blocky. ?When I last worked with
landcover data, I used a majority algorithm which produced smoother
output -- but that algorithm is not implemented in gdalwarp.
I am looking over the source to gdalwarp to see how hard it is to add
a new algorithm. ?Other than that, though, what options are available
to me? ?Thanks in advance!
Jack.--
mathuin at gmail dot com
From chaitanya.ch at gmail.com  Thu Jan 26 22:49:03 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan 26 22:49:47 2012
Subject: [gdal-dev] HDF-EOS AIRS CO2 images without georeference using
	gdal_translate
In-Reply-To: <1327629389.90404.YahooMailNeo@web112016.mail.gq1.yahoo.com>
References: <1327550682.65931.YahooMailNeo@web112018.mail.gq1.yahoo.com>
	<CAMKgpOYTDPdc+KtBFV-oAesu_onM_p1mqbByjwEkAoMY3=1E0w@mail.gmail.com>
	<1327629389.90404.YahooMailNeo@web112016.mail.gq1.yahoo.com>
Message-ID: <CAMKgpObCagKV9qpK==5na=fhskFBybfVzYL8Nr1nN7KkO==bBg@mail.gmail.com>

David,

I checked the images I created now. The GCPs were not considered. So, I
made sure they were used with gdalwarp.
gdalwarp -s_srs "EPSG:4326" -t_srs "EPSG:4326" -refine_gcps 200 10 -of
GTiff
HDF4_EOS:EOS_SWATH:"AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret
CO2_sup_Gtiff_EOS_warp.tif
I used the -refine_gcps. It will help in excluding the dummy gcps pointing
to (-9999,-9999,0). In this option, the number of minimum_gcps had to be
given. I chose the number 10 based on the number of usable GCPs available.
It should not be more than the number of usable GCPs. If I did not exclude
the dummy gcps, I got black image.

Also note that the output image dimensions changed.

On Fri, Jan 27, 2012 at 7:26 AM, David Ortiz <dvdov@yahoo.com> wrote:

> Hi Chaitanya
>
>
> Applying gdalinfo -stats to input and output images i get coherent values
>  for statistics in both .img  and GTiff  images. The problem was in data
> display in GIS since QGIS show a Gtiff image with all pixel values equal to
> zero when i use "identify spatial objects" tool and ArcGIS  doesn't display
> it correctly , just two lines and no data, but gvSIG  allows see the
> appropriate values of CO2 amounts.
>
> However, neither the .img nor GTiff have geographical spatial reference in
> WGS84 datum coordinates. Even opening  subdatasets directly from hdf file with
> ArcGis , the images are missing georeference. As it is seen below, hdf
> image is between -133.57, -157.94 longitudes and 22.23, 45.88 latitudes. I
> mentioned HDF_SDS:UNKNOWN datasets on previous post because it have some
> info about coordinate reference system:
> SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
> Actually , when i load Geotiff generated with HEGTool (with other AIRS
> products) in any gis software , automatically have wgs84 Datum coordinates
>
> Here the results of gdalinfo command:
> 1. Input image
>
> gdalinfo -stats
> HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret
> Driver: HDF4Image/HDF4 Dataset
>                    ...
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,   22.0)
> Upper Right (   15.0,    0.0)
> Lower Right (   15.0,   22.0)
> Center      (    7.5,   11.0)
> Band 1 Block=15x22 Type=Float32, ColorInterp=Gray
>   Min=379.197 Max=393.697
>   Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>   NoData Value=-9999
>   Metadata:
>     STATISTICS_MAXIMUM=393.6969909668
>     STATISTICS_MEAN=386.46261742001
>     STATISTICS_MINIMUM=379.1969909668
>     STATISTICS_STDDEV=3.0709672735453
>
> 2.  with Geotiff output  image :
> gdalinfo -stats
>  /home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif
> Driver: GTiff/GeoTIFF
> Files: /home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif
>
>  /home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif.aux.xml
> Size is 15, 22
> Coordinate System is `'
> GCP Projection =
> GCP[  0]: Id=1, Info=
>           (0.5,0.5) -> (-9999,-9999,0)
> GCP[  1]: Id=2, Info=
>           (1.5,0.5) -> (-9999,-9999,0)
> GCP[  2]: Id=3, Info=
>           (2.5,0.5) -> (-9999,-9999,0)
> GCP[  3]: Id=4, Info=
>           (3.5,0.5) -> (-145.229995727539,23.3500003814697,0)
> GCP[  4]: Id=5, Info=
>           (4.5,0.5) -> (-9999,-9999,0)
>                ...
> GROUP                  = HORIZONTALSPATIALDOMAINCONTAINER
>       GROUP                  = BOUNDINGRECTANGLE
>         OBJECT                 = EASTBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = -133.537399291992
>         END_OBJECT             = EASTBOUNDINGCOORDINATE
>         OBJECT                 = WESTBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = -157.941314697266
>         END_OBJECT             = WESTBOUNDINGCOORDINATE
>         OBJECT                 = SOUTHBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = 22.2317676544189
>         END_OBJECT             = SOUTHBOUNDINGCOORDINATE
>         OBJECT                 = NORTHBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = 45.889762878418
>         END_OBJECT             = NORTHBOUNDINGCOORDINATE
>       END_GROUP              = BOUNDINGRECTANGLE
>                ...
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,   22.0)
> Upper Right (   15.0,    0.0)
> Lower Right (   15.0,   22.0)
> Center      (    7.5,   11.0)
> Band 1 Block=15x22 Type=Float32, ColorInterp=Gray
>   Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>   NoData Value=-9999
>   Metadata:
>     STATISTICS_MAXIMUM=393.6969909668
>     STATISTICS_MEAN=386.46261742001
>     STATISTICS_MINIMUM=379.1969909668
>     STATISTICS_STDDEV=3.0709672735453
>
> 3. .img image :
>
> gdalinfo -stats /home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img
> Driver: HFA/Erdas Imagine Images (.img)
> Files: /home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img
>        /home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img.aux.xml
> Size is 15, 22
> Coordinate System is `'
>                ...
> GROUP                  = SPATIALDOMAINCONTAINER
>     GROUP                  = HORIZONTALSPATIALDOMAINCONTAINER
>       GROUP                  = BOUNDINGRECTANGLE
>         OBJECT                 = EASTBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = -133.537399291992
>         END_OBJECT             = EASTBOUNDINGCOORDINATE
>         OBJECT                 = WESTBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = -157.941314697266
>         END_OBJECT             = WESTBOUNDINGCOORDINATE
>         OBJECT                 = SOUTHBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = 22.2317676544189
>         END_OBJECT             = SOUTHBOUNDINGCOORDINATE
>         OBJECT                 = NORTHBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = 45.889762878418
>         END_OBJECT             = NORTHBOUNDINGCOORDINATE
>       END_GROUP              = BOUNDINGRECTANGLE
>                ...
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,   22.0)
> Upper Right (   15.0,    0.0)
> Lower Right (   15.0,   22.0)
> Center      (    7.5,   11.0)
> Band 1 Block=64x64 Type=Float32, ColorInterp=Undefined
>   Description = Layer_1
>   Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>   NoData Value=-9999
>   Metadata:
>     LAYER_TYPE=athematic
>     STATISTICS_MAXIMUM=393.6969909668
>     STATISTICS_MEAN=386.46261742001
>     STATISTICS_MINIMUM=379.1969909668
>     STATISTICS_STDDEV=3.0709672735453
>
>
>
> What is wrong?. I tried with gdal 1.8 and 1.9 with hdf4 support.
>
>
> Best regards.
> --
>
> David Ortiz V.
>
>
-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120127/f30781b4/attachment-0001.html
From chaitanya.ch at gmail.com  Thu Jan 26 23:01:26 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan 26 23:01:58 2012
Subject: [gdal-dev] gdalwarp makes landcover files blocky when shrinking
	pixel size
In-Reply-To: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
References: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
Message-ID: <CAMKgpOZiEDFbYQiLGY0pWDF40sg8EYHUvh2JgLaQYVuhd2eBbA@mail.gmail.com>

John,

Try gdaladdo [1] with the resampling algo set to 'mode'. If you use the -ro
option, it will create an external overview. Check your output with
different combinations of levels.

[1]: http://www.gdal.org/gdaladdo.html

On Fri, Jan 27, 2012 at 5:09 AM, John Twilley <mathuin@gmail.com> wrote:

> I am working with elevation and landcover data downloaded from the
> USGS.  I use gdalwarp to convert the data to a much smaller pixel. The
> elevation data works very nicely with cubic resampling, but the only
> resampling that works at all for the landcover data is
> nearest-neighbor and that's very blocky.  When I last worked with
> landcover data, I used a majority algorithm which produced smoother
> output -- but that algorithm is not implemented in gdalwarp.
> I am looking over the source to gdalwarp to see how hard it is to add
> a new algorithm.  Other than that, though, what options are available
> to me?  Thanks in advance!
> Jack.--
> mathuin at gmail dot com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120127/5ffa90cd/attachment.html
From polimax at mail.ru  Fri Jan 27 01:49:19 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Fri Jan 27 01:50:02 2012
Subject: [gdal-dev] gdalwarp makes landcover files blocky when shrinking
	pixel size
In-Reply-To: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
References: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
Message-ID: <4F2248EF.8010104@mail.ru>

27.01.2012 3:39, John Twilley ?????:
> I am working with elevation and landcover data downloaded from the
> USGS.  I use gdalwarp to convert the data to a much smaller pixel. The
> elevation data works very nicely with cubic resampling, but the only
> resampling that works at all for the landcover data is
> nearest-neighbor and that's very blocky.  When I last worked with
> landcover data, I used a majority algorithm which produced smoother
> output -- but that algorithm is not implemented in gdalwarp.
> I am looking over the source to gdalwarp to see how hard it is to add
> a new algorithm.  Other than that, though, what options are available
> to me?  Thanks in advance!
> Jack.--
> mathuin at gmail dot com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
Hi John,

That is your command line string for gdalwarp?

Best regards,
Dmitry
From polimax at mail.ru  Fri Jan 27 01:58:27 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Fri Jan 27 01:58:47 2012
Subject: [gdal-dev] Re: Motion: Commit Rights for Dmitry Barishnikov (aka
	bishop)
In-Reply-To: <CA+YzLBeLUcKyrY7Xav4hWSqKw77u=-W9Wq163nT9zk33vRXddA@mail.gmail.com>
References: <CA+YzLBdiEuibviSBL70wX9ArVuj5nLviNdwYXNK=-dHwpmcYNw@mail.gmail.com>
	<CA+YzLBeLUcKyrY7Xav4hWSqKw77u=-W9Wq163nT9zk33vRXddA@mail.gmail.com>
Message-ID: <4F224B13.8000209@mail.ru>

27.01.2012 2:49, Frank Warmerdam ?????:
> 2012/1/24 Frank Warmerdam<warmerdam@pobox.com>:
>> Motion: GDAL/OGR Commit rights are extended to Dmitry Barishnikov
>> /??????? ?????????? (userid: bishop).
>>
> Folks,
>
> I declare this motion passed with support from myself, Even, Daniel,
> and Tamas.  Welcome to the team Dmitri!  As a first test of commit
> access, please add yourself to the gdal/COMMITERS file.
>
> Best regards,
Thank you very much Frank!

Best regards,
   Dmitry
From verena.diewald at wheregroup.com  Fri Jan 27 03:12:15 2012
From: verena.diewald at wheregroup.com (Verena Diewald)
Date: Fri Jan 27 03:12:28 2012
Subject: [gdal-dev] Creating DXF with ogr2ogr
In-Reply-To: <201201261720.29598.Ralf.Suhr@itc-halle.de>
References: <4F215CFD.7080105@wheregroup.com>
	<715BFDBEEEDA5245AF02E1C1DCE01C37077E63E5@SV025.infoterra-global.com>
	<4F2177C0.8060308@wheregroup.com>
	<201201261720.29598.Ralf.Suhr@itc-halle.de>
Message-ID: <4F225C5F.8000506@wheregroup.com>

Hi Ralf,


Am 26.01.2012 17:20, schrieb Ralf Suhr:
>
> Hi Verena,
>
> can you provide more information. What software version did you use 
> (gdal, postgis).
>
PostgreSQL 9.0.4
PostGIS 1.5
GDAL 1.9dev
>
> What kind of geometries is in the database.
>
> psql -d mydb -c "SELECT DISTINCT GeometryType( geom_column ) FROM my_data"
>
POLYGON
>
> What happend if you select only one geometrytype from database.
>
> ogr2ogr -f "DXF" -sql "SELECT * FROM my_data WHERE GeometryType( 
> geom_column ) = 'POLYGON'" my_data.dxf PG:'host=localhost password=xxx 
> user=xxx dbname=MYDB'
>
Every dxf file I create only contains one single geometrytype.


Best regards,

Verena
>
> Gr
>
> Ralf
>
> On Donnerstag 26 Januar 2012 16:56:48 Verena Diewald wrote:
>
> > Hi Darren,
>
> >
>
> >
>
> > I tried that option, but the error still remains.
>
> > Does anyone have another idea?
>
> >
>
> >
>
> > Greetings,
>
> >
>
> > Verena
>
> >
>
> > Am 26.01.2012 16:00, schrieb Carman, Darren:
>
> > > Try adding -nlt POLYGON (also has POINT and LINESTRING options).
>
> > >
>
> > > We have this option on an older version that used the ODA libraries
>
> > > directly, so can't guarantee it's still the same.
>
> > >
>
> > > Darren
>
> > >
>
> > > *From:*gdal-dev-bounces@lists.osgeo.org
>
> > > [mailto:gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Verena 
> Diewald
>
> > > *Sent:* 26 January 2012 14:03
>
> > > *To:* gdal-dev@lists.osgeo.org
>
> > > *Subject:* [gdal-dev] Creating DXF with ogr2ogr
>
> > >
>
> > > Hi all,
>
> > >
>
> > > I'm trying to create DXF files from a PostgreSQL database using 
> ogr2ogr:
>
> > > |ogr2ogr -nln my_data -a_srs EPSG:25832 -s_srs EPSG:25832 -t_srs
>
> > > |EPSG:25832 -f "DXF" my_data.dxf PG:'host=localhost password=xxx
>
> > > |user=xxx dbname=MYDB' -sql "SELECT * FROM my_data"|
>
> > >
>
> > > It works fine with point data, but I get an invalid dxf file for
>
> > > polygon data. Opening the polygon dxf file results in the following
>
> > > error:
>
> > >
>
> > > The following error was encountered while reading
>
> > > in HATCH starting at line 1546:
>
> > > Error: expected group code 10
>
> > > Invalid or incomplete DXF input -- drawing discarded.
>
> > >
>
> > >
>
> > >
>
> > > Do I have to pass any more options to ogr2ogr when creating a polygon
>
> > > dxf? What did I do wrong?
>
> > > Does anyone have an idea about that?
>
> > >
>
> > > Greetings,
>
> > >
>
> > > Verena
>
> > >
>
> > >
>
> > >
>
> > >
>
> > >
>
> > >
>
> > >
>
> > >
>
> > >
>
> > >
>
> > > Infoterra Ltd. Is part of the Astrium GEO-Information Services
>
> > > Division and a wholly owned subsidiary of Astrium, Europe's leading
>
> > > space systems and services specialist.
>
> > >
>
> > > Disclaimer. The information contained in this e-mail and its
>
> > > attachments are confidential and intended only for the use of the
>
> > > named addressee(s). If you are not the intended addressee, please do
>
> > > not read, copy, use or disclose this message or its attachments. If
>
> > > you have received this message in error, please notify the sender
>
> > > immediately and delete or destroy all copies of this message and
>
> > > attachments in all media. Any views or opinions expressed are solely
>
> > > those of the author and do not necessarily represent those of
>
> > > Infoterra Ltd and shall not form part of any binding agreement.
>
> > >
>
> > > Infoterra Limited a company registered in England under number 2359955
>
> > > and having its registered office at Atlas House, 41 Wembley Road,
>
> > > Leicester, LE3 1UT. VAT number GB 476 0468 27.
>
> > >
>
> > > P Before printing, think about the environment
>

-- 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120127/89c9cf3f/attachment.html
From Ralf.Suhr at itc-halle.de  Fri Jan 27 04:02:11 2012
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Fri Jan 27 04:02:23 2012
Subject: [gdal-dev] Creating DXF with ogr2ogr
In-Reply-To: <4F225C5F.8000506@wheregroup.com>
References: <4F215CFD.7080105@wheregroup.com>
	<201201261720.29598.Ralf.Suhr@itc-halle.de>
	<4F225C5F.8000506@wheregroup.com>
Message-ID: <201201271002.11346.Ralf.Suhr@itc-halle.de>

Hi Verena,

I'm using gdal 1.8.1 for the same task. ArcGIS, "Free DWG Viewer" and DWG True 
View 2012 are able to open all gdal output without any error messages.


Gr
Ralf

On Freitag 27 Januar 2012 09:12:15 Verena Diewald wrote:
> Hi Ralf,
> 
> Am 26.01.2012 17:20, schrieb Ralf Suhr:
> > Hi Verena,
> > 
> > can you provide more information. What software version did you use
> > (gdal, postgis).
> 
> PostgreSQL 9.0.4
> PostGIS 1.5
> GDAL 1.9dev
> 
> > What kind of geometries is in the database.
> > 
> > psql -d mydb -c "SELECT DISTINCT GeometryType( geom_column ) FROM
> > my_data"
> 
> POLYGON
> 
> > What happend if you select only one geometrytype from database.
> > 
> > ogr2ogr -f "DXF" -sql "SELECT * FROM my_data WHERE GeometryType(
> > geom_column ) = 'POLYGON'" my_data.dxf PG:'host=localhost password=xxx
> > user=xxx dbname=MYDB'
> 
> Every dxf file I create only contains one single geometrytype.
> 
> 
> Best regards,
> 
> Verena
> 
> > Gr
> > 
> > Ralf
> > 
> > On Donnerstag 26 Januar 2012 16:56:48 Verena Diewald wrote:
> > > Hi Darren,
> > > 
> > > 
> > > 
> > > 
> > > 
> > > I tried that option, but the error still remains.
> > > 
> > > Does anyone have another idea?
> > > 
> > > 
> > > 
> > > 
> > > 
> > > Greetings,
> > > 
> > > 
> > > 
> > > Verena
> > > 
> > > Am 26.01.2012 16:00, schrieb Carman, Darren:
> > > > Try adding -nlt POLYGON (also has POINT and LINESTRING options).
> > > > 
> > > > 
> > > > 
> > > > We have this option on an older version that used the ODA libraries
> > > > 
> > > > directly, so can't guarantee it's still the same.
> > > > 
> > > > 
> > > > 
> > > > Darren
> > > > 
> > > > 
> > > > 
> > > > *From:*gdal-dev-bounces@lists.osgeo.org
> > > > 
> > > > [mailto:gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Verena
> > 
> > Diewald
> > 
> > > > *Sent:* 26 January 2012 14:03
> > > > 
> > > > *To:* gdal-dev@lists.osgeo.org
> > > > 
> > > > *Subject:* [gdal-dev] Creating DXF with ogr2ogr
> > > > 
> > > > 
> > > > 
> > > > Hi all,
> > > > 
> > > > 
> > > > 
> > > > I'm trying to create DXF files from a PostgreSQL database using
> > 
> > ogr2ogr:
> > > > |ogr2ogr -nln my_data -a_srs EPSG:25832 -s_srs EPSG:25832 -t_srs
> > > > |
> > > > |EPSG:25832 -f "DXF" my_data.dxf PG:'host=localhost password=xxx
> > > > |
> > > > |user=xxx dbname=MYDB' -sql "SELECT * FROM my_data"|
> > > > 
> > > > It works fine with point data, but I get an invalid dxf file for
> > > > 
> > > > polygon data. Opening the polygon dxf file results in the following
> > > > 
> > > > error:
> > > > 
> > > > 
> > > > 
> > > > The following error was encountered while reading
> > > > 
> > > > in HATCH starting at line 1546:
> > > > 
> > > > Error: expected group code 10
> > > > 
> > > > Invalid or incomplete DXF input -- drawing discarded.
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > Do I have to pass any more options to ogr2ogr when creating a polygon
> > > > 
> > > > dxf? What did I do wrong?
> > > > 
> > > > Does anyone have an idea about that?
> > > > 
> > > > 
> > > > 
> > > > Greetings,
> > > > 
> > > > 
> > > > 
> > > > Verena
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > Infoterra Ltd. Is part of the Astrium GEO-Information Services
> > > > 
> > > > Division and a wholly owned subsidiary of Astrium, Europe's leading
> > > > 
> > > > space systems and services specialist.
> > > > 
> > > > 
> > > > 
> > > > Disclaimer. The information contained in this e-mail and its
> > > > 
> > > > attachments are confidential and intended only for the use of the
> > > > 
> > > > named addressee(s). If you are not the intended addressee, please do
> > > > 
> > > > not read, copy, use or disclose this message or its attachments. If
> > > > 
> > > > you have received this message in error, please notify the sender
> > > > 
> > > > immediately and delete or destroy all copies of this message and
> > > > 
> > > > attachments in all media. Any views or opinions expressed are solely
> > > > 
> > > > those of the author and do not necessarily represent those of
> > > > 
> > > > Infoterra Ltd and shall not form part of any binding agreement.
> > > > 
> > > > 
> > > > 
> > > > Infoterra Limited a company registered in England under number
> > > > 2359955
> > > > 
> > > > and having its registered office at Atlas House, 41 Wembley Road,
> > > > 
> > > > Leicester, LE3 1UT. VAT number GB 476 0468 27.
> > > > 
> > > > 
> > > > 
> > > > P Before printing, think about the environment
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120127/fddb35a6/attachment-0001.html
From jukka.rahkonen at mmmtike.fi  Fri Jan 27 04:28:24 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Jan 27 04:28:49 2012
Subject: [gdal-dev] Re: How create a spatial index for shapefiles
References: <4F1BE17E.50901@gmail.com>
	<201201221118.05202.even.rouault@mines-paris.org>
	<CAMKgpOYk=2Z4wLmui-RYcLLvNiB87X=Je4UOGcLaz9BNJsAAYQ@mail.gmail.com>
Message-ID: <loom.20120127T102505-11@post.gmane.org>

Chaitanya kumar CH <chaitanya.ch <at> gmail.com> writes:

> 
> 
> The SQL command to create a spatial index can be given through ogrinfo.ogrinfo
-sql "CREATE SPATIAL INDEX ON file1 [DEPTH N]" file1.shp

Good to know. I would suggest adding this example into shapefile driver page
http://gdal.org/ogr/drv_shapefile.html. I would have never guessed to use
ogrinfo for that.

-Jukka Rahkonen-

From jukka.rahkonen at mmmtike.fi  Fri Jan 27 05:09:00 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Jan 27 05:10:03 2012
Subject: [gdal-dev] OpenJPEG fails with ERDAS JPEG2000 file
Message-ID: <loom.20120127T105318-652@post.gmane.org>

Hi,

Here is a link to JPEG2000 image that is created by ERDAS Imagine with
default settings

http://latuviitta.org/documents/openjump_jpeg2000_erdas.jp2 (30 MB)

It is created with ECW JPEG 2000 SDK v4.2.0.64
There is nothing odd in the JPEG2000 parameters and Kakadu and a few other
program I tried are opening the image. Kakadu can also expand the 
image into tiff. 

GDAL 1.9 with OpenJPEG driver shows the image metadata correctly. However,
gdal_translate gives this error and two others.

opj_read_tile_header() failed

-Jukka Rahkonen-

From verena.diewald at wheregroup.com  Fri Jan 27 05:16:07 2012
From: verena.diewald at wheregroup.com (Verena Diewald)
Date: Fri Jan 27 05:16:28 2012
Subject: [gdal-dev] Creating DXF with ogr2ogr
In-Reply-To: <201201271002.11346.Ralf.Suhr@itc-halle.de>
References: <4F215CFD.7080105@wheregroup.com>
	<201201261720.29598.Ralf.Suhr@itc-halle.de>
	<4F225C5F.8000506@wheregroup.com>
	<201201271002.11346.Ralf.Suhr@itc-halle.de>
Message-ID: <4F227967.7090703@wheregroup.com>

Hi Ralf,

do you use the same ogr2ogr command to create dxf from polygon data as I 
did? Or do you work with additional configure options?

Greetings,

Verena


Am 27.01.2012 10:02, schrieb Ralf Suhr:
>
> Hi Verena,
>
> I'm using gdal 1.8.1 for the same task. ArcGIS, "Free DWG Viewer" and 
> DWG True View 2012 are able to open all gdal output without any error 
> messages.
>
> Gr
>
> Ralf
>
> On Freitag 27 Januar 2012 09:12:15 Verena Diewald wrote:
>
> > Hi Ralf,
>
> >
>
> > Am 26.01.2012 17:20, schrieb Ralf Suhr:
>
> > > Hi Verena,
>
> > >
>
> > > can you provide more information. What software version did you use
>
> > > (gdal, postgis).
>
> >
>
> > PostgreSQL 9.0.4
>
> > PostGIS 1.5
>
> > GDAL 1.9dev
>
> >
>
> > > What kind of geometries is in the database.
>
> > >
>
> > > psql -d mydb -c "SELECT DISTINCT GeometryType( geom_column ) FROM
>
> > > my_data"
>
> >
>
> > POLYGON
>
> >
>
> > > What happend if you select only one geometrytype from database.
>
> > >
>
> > > ogr2ogr -f "DXF" -sql "SELECT * FROM my_data WHERE GeometryType(
>
> > > geom_column ) = 'POLYGON'" my_data.dxf PG:'host=localhost password=xxx
>
> > > user=xxx dbname=MYDB'
>
> >
>
> > Every dxf file I create only contains one single geometrytype.
>
> >
>
> >
>
> > Best regards,
>
> >
>
> > Verena
>
> >
>
> > > Gr
>
> > >
>
> > > Ralf
>
> > >
>
> > > On Donnerstag 26 Januar 2012 16:56:48 Verena Diewald wrote:
>
> > > > Hi Darren,
>
> > > >
>
> > > >
>
> > > >
>
> > > >
>
> > > >
>
> > > > I tried that option, but the error still remains.
>
> > > >
>
> > > > Does anyone have another idea?
>
> > > >
>
> > > >
>
> > > >
>
> > > >
>
> > > >
>
> > > > Greetings,
>
> > > >
>
> > > >
>
> > > >
>
> > > > Verena
>
> > > >
>
> > > > Am 26.01.2012 16:00, schrieb Carman, Darren:
>
> > > > > Try adding -nlt POLYGON (also has POINT and LINESTRING options).
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > > We have this option on an older version that used the ODA 
> libraries
>
> > > > >
>
> > > > > directly, so can't guarantee it's still the same.
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > > Darren
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > > *From:*gdal-dev-bounces@lists.osgeo.org
>
> > > > >
>
> > > > > [mailto:gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Verena
>
> > >
>
> > > Diewald
>
> > >
>
> > > > > *Sent:* 26 January 2012 14:03
>
> > > > >
>
> > > > > *To:* gdal-dev@lists.osgeo.org
>
> > > > >
>
> > > > > *Subject:* [gdal-dev] Creating DXF with ogr2ogr
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > > Hi all,
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > > I'm trying to create DXF files from a PostgreSQL database using
>
> > >
>
> > > ogr2ogr:
>
> > > > > |ogr2ogr -nln my_data -a_srs EPSG:25832 -s_srs EPSG:25832 -t_srs
>
> > > > > |
>
> > > > > |EPSG:25832 -f "DXF" my_data.dxf PG:'host=localhost password=xxx
>
> > > > > |
>
> > > > > |user=xxx dbname=MYDB' -sql "SELECT * FROM my_data"|
>
> > > > >
>
> > > > > It works fine with point data, but I get an invalid dxf file for
>
> > > > >
>
> > > > > polygon data. Opening the polygon dxf file results in the 
> following
>
> > > > >
>
> > > > > error:
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > > The following error was encountered while reading
>
> > > > >
>
> > > > > in HATCH starting at line 1546:
>
> > > > >
>
> > > > > Error: expected group code 10
>
> > > > >
>
> > > > > Invalid or incomplete DXF input -- drawing discarded.
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > > Do I have to pass any more options to ogr2ogr when creating a 
> polygon
>
> > > > >
>
> > > > > dxf? What did I do wrong?
>
> > > > >
>
> > > > > Does anyone have an idea about that?
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > > Greetings,
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > > Verena
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > > Infoterra Ltd. Is part of the Astrium GEO-Information Services
>
> > > > >
>
> > > > > Division and a wholly owned subsidiary of Astrium, Europe's 
> leading
>
> > > > >
>
> > > > > space systems and services specialist.
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > > Disclaimer. The information contained in this e-mail and its
>
> > > > >
>
> > > > > attachments are confidential and intended only for the use of the
>
> > > > >
>
> > > > > named addressee(s). If you are not the intended addressee, 
> please do
>
> > > > >
>
> > > > > not read, copy, use or disclose this message or its 
> attachments. If
>
> > > > >
>
> > > > > you have received this message in error, please notify the sender
>
> > > > >
>
> > > > > immediately and delete or destroy all copies of this message and
>
> > > > >
>
> > > > > attachments in all media. Any views or opinions expressed are 
> solely
>
> > > > >
>
> > > > > those of the author and do not necessarily represent those of
>
> > > > >
>
> > > > > Infoterra Ltd and shall not form part of any binding agreement.
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > > Infoterra Limited a company registered in England under number
>
> > > > > 2359955
>
> > > > >
>
> > > > > and having its registered office at Atlas House, 41 Wembley Road,
>
> > > > >
>
> > > > > Leicester, LE3 1UT. VAT number GB 476 0468 27.
>
> > > > >
>
> > > > >
>
> > > > >
>
> > > > > P Before printing, think about the environment
>

-- 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120127/958d29df/attachment-0001.html
From mathuin at gmail.com  Fri Jan 27 11:19:33 2012
From: mathuin at gmail.com (John Twilley)
Date: Fri Jan 27 11:19:49 2012
Subject: [gdal-dev] gdalwarp makes landcover files blocky when shrinking
	pixel size
In-Reply-To: <4F2248EF.8010104@mail.ru>
References: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
	<4F2248EF.8010104@mail.ru>
Message-ID: <CAEUMa-fWxpzdNbU3g=Zti7MRLL91YGAU6khu4WkpHFe477f2mA@mail.gmail.com>

After retrieving the files and building VRTs from them, I run the
following gdalwarp commands:

gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
+lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -te
2002944 2271744 2016768 2288640 \
 -srcnodata -340282346638528859811704183484516925440 -dstnodata 0
ND302HT.vrt ND302HT.tif
gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
+lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -te
2002944 2271744 2016768 2288640 \
 -srcnodata 255 -dstnodata 11 L0102HT.vrt L0102HT.tif

The only differences between the lines are the nodata values.

Jack.
--
mathuin at gmail dot com



On Thu, Jan 26, 2012 at 22:49, Dmitry Baryshnikov <polimax@mail.ru> wrote:
> 27.01.2012 3:39, John Twilley ?????:
>>
>> I am working with elevation and landcover data downloaded from the
>> USGS. ?I use gdalwarp to convert the data to a much smaller pixel. The
>> elevation data works very nicely with cubic resampling, but the only
>> resampling that works at all for the landcover data is
>> nearest-neighbor and that's very blocky. ?When I last worked with
>> landcover data, I used a majority algorithm which produced smoother
>> output -- but that algorithm is not implemented in gdalwarp.
>> I am looking over the source to gdalwarp to see how hard it is to add
>> a new algorithm. ?Other than that, though, what options are available
>> to me? ?Thanks in advance!
>> Jack.--
>> mathuin at gmail dot com
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
> Hi John,
>
> That is your command line string for gdalwarp?
>
> Best regards,
> Dmitry
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mathuin at gmail.com  Fri Jan 27 13:00:55 2012
From: mathuin at gmail.com (John Twilley)
Date: Fri Jan 27 13:01:44 2012
Subject: [gdal-dev] gdalwarp makes landcover files blocky when shrinking
	pixel size
In-Reply-To: <CAMKgpOZiEDFbYQiLGY0pWDF40sg8EYHUvh2JgLaQYVuhd2eBbA@mail.gmail.com>
References: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
	<CAMKgpOZiEDFbYQiLGY0pWDF40sg8EYHUvh2JgLaQYVuhd2eBbA@mail.gmail.com>
Message-ID: <CAEUMa-cP_Y3ZV-g8OwyJ4y+snVSMQS82weGGeq-SDtgxUhjFjw@mail.gmail.com>

I've never seen gdaladdo -- neat command!  Alas, the overviews are the
wrong way 'round -- I don't need to zoom out, I need to zoom in.
gdaladdo doesn't handle fractional scale values well, so I can't make
something bigger out of something smaller like I can with gdalwarp.

Jack.
--
mathuin at gmail dot com



On Thu, Jan 26, 2012 at 20:01, Chaitanya kumar CH
<chaitanya.ch@gmail.com> wrote:
> John,
>
> Try gdaladdo [1] with the resampling algo set to 'mode'. If you use the -ro
> option, it will create an external overview. Check your output with
> different combinations of levels.
>
> [1]: http://www.gdal.org/gdaladdo.html
>
> On Fri, Jan 27, 2012 at 5:09 AM, John Twilley <mathuin@gmail.com> wrote:
>>
>> I am working with elevation and landcover data downloaded from the
>> USGS. ?I use gdalwarp to convert the data to a much smaller pixel. The
>> elevation data works very nicely with cubic resampling, but the only
>> resampling that works at all for the landcover data is
>> nearest-neighbor and that's very blocky. ?When I last worked with
>> landcover data, I used a majority algorithm which produced smoother
>> output -- but that algorithm is not implemented in gdalwarp.
>> I am looking over the source to gdalwarp to see how hard it is to add
>> a new algorithm. ?Other than that, though, what options are available
>> to me? ?Thanks in advance!
>> Jack.--
>> mathuin at gmail dot com
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
From polimax at mail.ru  Fri Jan 27 14:23:26 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Fri Jan 27 14:23:45 2012
Subject: [gdal-dev] gdalwarp makes landcover files blocky when shrinking
	pixel size
In-Reply-To: <CAEUMa-fWxpzdNbU3g=Zti7MRLL91YGAU6khu4WkpHFe477f2mA@mail.gmail.com>
References: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
	<4F2248EF.8010104@mail.ru>
	<CAEUMa-fWxpzdNbU3g=Zti7MRLL91YGAU6khu4WkpHFe477f2mA@mail.gmail.com>
Message-ID: <4F22F9AE.2020502@mail.ru>

27.01.2012 20:19, John Twilley ?????:
> After retrieving the files and building VRTs from them, I run the
> following gdalwarp commands:
>
> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -te
> 2002944 2271744 2016768 2288640 \
>   -srcnodata -340282346638528859811704183484516925440 -dstnodata 0
> ND302HT.vrt ND302HT.tif
> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -te
> 2002944 2271744 2016768 2288640 \
>   -srcnodata 255 -dstnodata 11 L0102HT.vrt L0102HT.tif
>
> The only differences between the lines are the nodata values.
>
> Jack.
> --
> mathuin at gmail dot com
>
>
>
> On Thu, Jan 26, 2012 at 22:49, Dmitry Baryshnikov<polimax@mail.ru>  wrote:
>> 27.01.2012 3:39, John Twilley ?????:
>>> I am working with elevation and landcover data downloaded from the
>>> USGS.  I use gdalwarp to convert the data to a much smaller pixel. The
>>> elevation data works very nicely with cubic resampling, but the only
>>> resampling that works at all for the landcover data is
>>> nearest-neighbor and that's very blocky.  When I last worked with
>>> landcover data, I used a majority algorithm which produced smoother
>>> output -- but that algorithm is not implemented in gdalwarp.
>>> I am looking over the source to gdalwarp to see how hard it is to add
>>> a new algorithm.  Other than that, though, what options are available
>>> to me?  Thanks in advance!
>>> Jack.--
>>> mathuin at gmail dot com
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>> Hi John,
>>
>> That is your command line string for gdalwarp?
>>
>> Best regards,
>> Dmitry
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi John,

Try to add "-r cubic" command parameter
For example:

gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
+lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -r cubic -te
2002944 2271744 2016768 2288640 \
  -srcnodata -340282346638528859811704183484516925440 -dstnodata 0
ND302HT.vrt ND302HT.tif

You can found additional parameters description here: http://www.gdal.org/gdalwarp.html
I have tested -r parameter and it works.

Best regards,
Dmitry


From chaitanya.ch at gmail.com  Fri Jan 27 14:27:41 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jan 27 14:28:10 2012
Subject: [gdal-dev] gdalwarp makes landcover files blocky when shrinking
	pixel size
In-Reply-To: <CAEUMa-cP_Y3ZV-g8OwyJ4y+snVSMQS82weGGeq-SDtgxUhjFjw@mail.gmail.com>
References: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
	<CAMKgpOZiEDFbYQiLGY0pWDF40sg8EYHUvh2JgLaQYVuhd2eBbA@mail.gmail.com>
	<CAEUMa-cP_Y3ZV-g8OwyJ4y+snVSMQS82weGGeq-SDtgxUhjFjw@mail.gmail.com>
Message-ID: <CAMKgpObRgVFzTNPBkuoC8HmxY38PZvOi4OeOPqRLvvhCWUr5Zg@mail.gmail.com>

John,

You are right. gdaladdo is not for creating higher resolution images. I
thought you needed the opposite.
I assume your landcover data is a classified raster. Classified data is
usually zoomed in with nearest neighbor interpolation. Unless you fiddle
with the interpolation window, the majority algorithm is pretty much the
nearest neighbor while zooming in.

If you want, you can convert the image into an RGB using pct2rgb.py and
work with the RGB image.

On Fri, Jan 27, 2012 at 11:30 PM, John Twilley <mathuin@gmail.com> wrote:

> I've never seen gdaladdo -- neat command!  Alas, the overviews are the
> wrong way 'round -- I don't need to zoom out, I need to zoom in.
> gdaladdo doesn't handle fractional scale values well, so I can't make
> something bigger out of something smaller like I can with gdalwarp.
>
> Jack.
> --
> mathuin at gmail dot com
>
>
>
> On Thu, Jan 26, 2012 at 20:01, Chaitanya kumar CH
> <chaitanya.ch@gmail.com> wrote:
> > John,
> >
> > Try gdaladdo [1] with the resampling algo set to 'mode'. If you use the
> -ro
> > option, it will create an external overview. Check your output with
> > different combinations of levels.
> >
> > [1]: http://www.gdal.org/gdaladdo.html
> >
> > On Fri, Jan 27, 2012 at 5:09 AM, John Twilley <mathuin@gmail.com> wrote:
> >>
> >> I am working with elevation and landcover data downloaded from the
> >> USGS.  I use gdalwarp to convert the data to a much smaller pixel. The
> >> elevation data works very nicely with cubic resampling, but the only
> >> resampling that works at all for the landcover data is
> >> nearest-neighbor and that's very blocky.  When I last worked with
> >> landcover data, I used a majority algorithm which produced smoother
> >> output -- but that algorithm is not implemented in gdalwarp.
> >> I am looking over the source to gdalwarp to see how hard it is to add
> >> a new algorithm.  Other than that, though, what options are available
> >> to me?  Thanks in advance!
> >> Jack.--
> >> mathuin at gmail dot com
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> >
> > +91-9494447584
> > 17.2416N 80.1426E
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120128/67b31a23/attachment.html
From mathuin at gmail.com  Fri Jan 27 14:30:11 2012
From: mathuin at gmail.com (John Twilley)
Date: Fri Jan 27 14:30:48 2012
Subject: [gdal-dev] gdalwarp makes landcover files blocky when shrinking
	pixel size
In-Reply-To: <4F22F9AE.2020502@mail.ru>
References: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
	<4F2248EF.8010104@mail.ru>
	<CAEUMa-fWxpzdNbU3g=Zti7MRLL91YGAU6khu4WkpHFe477f2mA@mail.gmail.com>
	<4F22F9AE.2020502@mail.ru>
Message-ID: <CAEUMa-d53Nty-EXunTimw_PiTCZ3Z6TG7LW2C8n0HEx_TisUpQ@mail.gmail.com>

Cubic is fine for the elevation, but it doesn't work on the landcover.
which is the problem I originally mentioned.

Jack.
--
mathuin at gmail dot com



2012/1/27 Dmitry Baryshnikov <polimax@mail.ru>:
> 27.01.2012 20:19, John Twilley ?????:
>
>> After retrieving the files and building VRTs from them, I run the
>> following gdalwarp commands:
>>
>> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
>> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -te
>> 2002944 2271744 2016768 2288640 \
>> ?-srcnodata -340282346638528859811704183484516925440 -dstnodata 0
>> ND302HT.vrt ND302HT.tif
>> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
>> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -te
>> 2002944 2271744 2016768 2288640 \
>> ?-srcnodata 255 -dstnodata 11 L0102HT.vrt L0102HT.tif
>>
>> The only differences between the lines are the nodata values.
>>
>> Jack.
>> --
>> mathuin at gmail dot com
>>
>>
>>
>> On Thu, Jan 26, 2012 at 22:49, Dmitry Baryshnikov<polimax@mail.ru> ?wrote:
>>>
>>> 27.01.2012 3:39, John Twilley ?????:
>>>>
>>>> I am working with elevation and landcover data downloaded from the
>>>> USGS. ?I use gdalwarp to convert the data to a much smaller pixel. The
>>>> elevation data works very nicely with cubic resampling, but the only
>>>> resampling that works at all for the landcover data is
>>>> nearest-neighbor and that's very blocky. ?When I last worked with
>>>> landcover data, I used a majority algorithm which produced smoother
>>>> output -- but that algorithm is not implemented in gdalwarp.
>>>> I am looking over the source to gdalwarp to see how hard it is to add
>>>> a new algorithm. ?Other than that, though, what options are available
>>>> to me? ?Thanks in advance!
>>>> Jack.--
>>>> mathuin at gmail dot com
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>> Hi John,
>>>
>>> That is your command line string for gdalwarp?
>>>
>>> Best regards,
>>> Dmitry
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> Hi John,
>
> Try to add "-r cubic" command parameter
> For example:
>
>
> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -r cubic
> -te
>
> 2002944 2271744 2016768 2288640 \
> ?-srcnodata -340282346638528859811704183484516925440 -dstnodata 0
> ND302HT.vrt ND302HT.tif
>
> You can found additional parameters description here:
> http://www.gdal.org/gdalwarp.html
> I have tested -r parameter and it works.
>
>
> Best regards,
> Dmitry
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From tyler.mitchell at actian.com  Fri Jan 27 14:39:15 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Fri Jan 27 14:39:30 2012
Subject: [gdal-dev] Ingres driver on Windows
In-Reply-To: <4F2116CF.3010107@pobox.com>
References: <A3919B0B-D17E-4F97-A5BC-D831F6014FE0@actian.com>
	<CA+YzLBeZCeq_usvXR25mNZh5o1H0=uHFMuStn7xzg2hGi_YQ8Q@mail.gmail.com>
	<99BFE4E3-F6CF-4B21-BC7D-F1802EF73F55@actian.com>
	<4F2116CF.3010107@pobox.com>
Message-ID: <ACE79FE1-8D52-4276-81EB-3AA11A269337@actian.com>

> If you svn update from gdal trunk you should be able to build.  I'm also
> interested in trying an OSGeo4W package for INGRES support but it is
> getting a bit late tonight to push on that.

Some great news, it's working!

I pulled from SVN, uncommented the INGRES variables in nmake.opt,
and I pointed to the exact same lib sources that I put up for you.

Built without a hitch and ogrinfo worked perfectly!  Just trying out 
ogr2ogr now and having success too.

I'd love to get this ingres support built into 
whatever versions we can get it into.  OSGeo4W would be great of course
but any chance for having in other default builds?  Happy to help make
it happen however I can.

Thanks again!!

Tyler


From polimax at mail.ru  Fri Jan 27 14:50:54 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Fri Jan 27 14:51:02 2012
Subject: [gdal-dev] gdalwarp makes landcover files blocky when shrinking
	pixel size
In-Reply-To: <CAEUMa-d53Nty-EXunTimw_PiTCZ3Z6TG7LW2C8n0HEx_TisUpQ@mail.gmail.com>
References: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
	<4F2248EF.8010104@mail.ru>
	<CAEUMa-fWxpzdNbU3g=Zti7MRLL91YGAU6khu4WkpHFe477f2mA@mail.gmail.com>
	<4F22F9AE.2020502@mail.ru>
	<CAEUMa-d53Nty-EXunTimw_PiTCZ3Z6TG7LW2C8n0HEx_TisUpQ@mail.gmail.com>
Message-ID: <4F23001E.1030806@mail.ru>

27.01.2012 23:30, John Twilley ?????:
> Cubic is fine for the elevation, but it doesn't work on the landcover.
> which is the problem I originally mentioned.
>
> Jack.
> --
> mathuin at gmail dot com
>
>
>
> 2012/1/27 Dmitry Baryshnikov<polimax@mail.ru>:
>> 27.01.2012 20:19, John Twilley ?????:
>>
>>> After retrieving the files and building VRTs from them, I run the
>>> following gdalwarp commands:
>>>
>>> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
>>> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -te
>>> 2002944 2271744 2016768 2288640 \
>>>   -srcnodata -340282346638528859811704183484516925440 -dstnodata 0
>>> ND302HT.vrt ND302HT.tif
>>> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
>>> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -te
>>> 2002944 2271744 2016768 2288640 \
>>>   -srcnodata 255 -dstnodata 11 L0102HT.vrt L0102HT.tif
>>>
>>> The only differences between the lines are the nodata values.
>>>
>>> Jack.
>>> --
>>> mathuin at gmail dot com
>>>
>>>
>>>
>>> On Thu, Jan 26, 2012 at 22:49, Dmitry Baryshnikov<polimax@mail.ru>    wrote:
>>>> 27.01.2012 3:39, John Twilley ?????:
>>>>> I am working with elevation and landcover data downloaded from the
>>>>> USGS.  I use gdalwarp to convert the data to a much smaller pixel. The
>>>>> elevation data works very nicely with cubic resampling, but the only
>>>>> resampling that works at all for the landcover data is
>>>>> nearest-neighbor and that's very blocky.  When I last worked with
>>>>> landcover data, I used a majority algorithm which produced smoother
>>>>> output -- but that algorithm is not implemented in gdalwarp.
>>>>> I am looking over the source to gdalwarp to see how hard it is to add
>>>>> a new algorithm.  Other than that, though, what options are available
>>>>> to me?  Thanks in advance!
>>>>> Jack.--
>>>>> mathuin at gmail dot com
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>>
>>>> Hi John,
>>>>
>>>> That is your command line string for gdalwarp?
>>>>
>>>> Best regards,
>>>> Dmitry
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> Hi John,
>>
>> Try to add "-r cubic" command parameter
>> For example:
>>
>>
>> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
>> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -r cubic
>> -te
>>
>> 2002944 2271744 2016768 2288640 \
>>   -srcnodata -340282346638528859811704183484516925440 -dstnodata 0
>> ND302HT.vrt ND302HT.tif
>>
>> You can found additional parameters description here:
>> http://www.gdal.org/gdalwarp.html
>> I have tested -r parameter and it works.
>>
>>
>> Best regards,
>> Dmitry
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
Hi John,
You can use resampling methods:
near: nearest neighbour resampling (default, fastest algorithm, worst 
interpolation quality).
bilinear: bilinear resampling.
cubic: cubic resampling.
cubicspline: cubic spline resampling.
lanczos: Lanczos windowed sinc resampling.

And what method do you need?

Best regards,
     Dmitry
From mathuin at gmail.com  Fri Jan 27 14:58:04 2012
From: mathuin at gmail.com (John Twilley)
Date: Fri Jan 27 14:58:27 2012
Subject: [gdal-dev] gdalwarp makes landcover files blocky when shrinking
	pixel size
In-Reply-To: <4F23001E.1030806@mail.ru>
References: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
	<4F2248EF.8010104@mail.ru>
	<CAEUMa-fWxpzdNbU3g=Zti7MRLL91YGAU6khu4WkpHFe477f2mA@mail.gmail.com>
	<4F22F9AE.2020502@mail.ru>
	<CAEUMa-d53Nty-EXunTimw_PiTCZ3Z6TG7LW2C8n0HEx_TisUpQ@mail.gmail.com>
	<4F23001E.1030806@mail.ru>
Message-ID: <CAEUMa-cjoJrhYO0jZWmt3StLi5qUvYoPrH1UakBDgDiX9ZjK3g@mail.gmail.com>

None of those resampling methods are well-suited to classified rasters
as far as I can tell.

The method that has worked best in the past was to take the majority
of a number of the nearest neighbors.  The 'mode' algorithm in
gdaladdo may do that, but I haven't checked the source code.

Jack.
--
mathuin at gmail dot com



2012/1/27 Dmitry Baryshnikov <polimax@mail.ru>:
> 27.01.2012 23:30, John Twilley ?????:
>
>> Cubic is fine for the elevation, but it doesn't work on the landcover.
>> which is the problem I originally mentioned.
>>
>> Jack.
>> --
>> mathuin at gmail dot com
>>
>>
>>
>> 2012/1/27 Dmitry Baryshnikov<polimax@mail.ru>:
>>>
>>> 27.01.2012 20:19, John Twilley ?????:
>>>
>>>> After retrieving the files and building VRTs from them, I run the
>>>> following gdalwarp commands:
>>>>
>>>> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
>>>> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -te
>>>> 2002944 2271744 2016768 2288640 \
>>>> ?-srcnodata -340282346638528859811704183484516925440 -dstnodata 0
>>>> ND302HT.vrt ND302HT.tif
>>>> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
>>>> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -te
>>>> 2002944 2271744 2016768 2288640 \
>>>> ?-srcnodata 255 -dstnodata 11 L0102HT.vrt L0102HT.tif
>>>>
>>>> The only differences between the lines are the nodata values.
>>>>
>>>> Jack.
>>>> --
>>>> mathuin at gmail dot com
>>>>
>>>>
>>>>
>>>> On Thu, Jan 26, 2012 at 22:49, Dmitry Baryshnikov<polimax@mail.ru>
>>>> ?wrote:
>>>>>
>>>>> 27.01.2012 3:39, John Twilley ?????:
>>>>>>
>>>>>> I am working with elevation and landcover data downloaded from the
>>>>>> USGS. ?I use gdalwarp to convert the data to a much smaller pixel. The
>>>>>> elevation data works very nicely with cubic resampling, but the only
>>>>>> resampling that works at all for the landcover data is
>>>>>> nearest-neighbor and that's very blocky. ?When I last worked with
>>>>>> landcover data, I used a majority algorithm which produced smoother
>>>>>> output -- but that algorithm is not implemented in gdalwarp.
>>>>>> I am looking over the source to gdalwarp to see how hard it is to add
>>>>>> a new algorithm. ?Other than that, though, what options are available
>>>>>> to me? ?Thanks in advance!
>>>>>> Jack.--
>>>>>> mathuin at gmail dot com
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>>
>>>>> Hi John,
>>>>>
>>>>> That is your command line string for gdalwarp?
>>>>>
>>>>> Best regards,
>>>>> Dmitry
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> Hi John,
>>>
>>> Try to add "-r cubic" command parameter
>>> For example:
>>>
>>>
>>> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
>>> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -r cubic
>>> -te
>>>
>>> 2002944 2271744 2016768 2288640 \
>>> ?-srcnodata -340282346638528859811704183484516925440 -dstnodata 0
>>> ND302HT.vrt ND302HT.tif
>>>
>>> You can found additional parameters description here:
>>> http://www.gdal.org/gdalwarp.html
>>> I have tested -r parameter and it works.
>>>
>>>
>>> Best regards,
>>> Dmitry
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
> Hi John,
> You can use resampling methods:
> near: nearest neighbour resampling (default, fastest algorithm, worst
> interpolation quality).
> bilinear: bilinear resampling.
> cubic: cubic resampling.
> cubicspline: cubic spline resampling.
> lanczos: Lanczos windowed sinc resampling.
>
> And what method do you need?
>
>
> Best regards,
> ? ?Dmitry
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mathuin at gmail.com  Fri Jan 27 15:07:12 2012
From: mathuin at gmail.com (John Twilley)
Date: Fri Jan 27 15:07:17 2012
Subject: [gdal-dev] gdalwarp makes landcover files blocky when shrinking
	pixel size
In-Reply-To: <488056EF78251143A31B3840ECA8628B0DDCEC7219@scomp0537.wurnet.nl>
References: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
	<4F2248EF.8010104@mail.ru>
	<CAEUMa-fWxpzdNbU3g=Zti7MRLL91YGAU6khu4WkpHFe477f2mA@mail.gmail.com>
	<4F22F9AE.2020502@mail.ru>
	<CAEUMa-d53Nty-EXunTimw_PiTCZ3Z6TG7LW2C8n0HEx_TisUpQ@mail.gmail.com>
	<4F23001E.1030806@mail.ru>
	<CAEUMa-cjoJrhYO0jZWmt3StLi5qUvYoPrH1UakBDgDiX9ZjK3g@mail.gmail.com>
	<488056EF78251143A31B3840ECA8628B0DDCEC7219@scomp0537.wurnet.nl>
Message-ID: <CAEUMa-d38EJnsjNi3uO_UU2w9SLbuFg5WLyh-+1=GGKOtVuCiw@mail.gmail.com>

Lo?c, this sounds sorta like what I was doing in my code poorly, which
is why I turned to the command-line tools.  Do you know whether any of
the GDAL command-line tools can apply a majority filter with a large
moving window?

Jack.
--
mathuin at gmail dot com



On Fri, Jan 27, 2012 at 12:05, Dutrieux, Lo?c <loic.dutrieux@wur.nl> wrote:
> Hi John,
>
> If I may add a bit to the discussion, applying resampling algorithm other than nearest neighbor to thematic layers such as land cover classification is not really recommended.
> However, if you want to smoothen the edges of your resampling output, I would suggest a two steps approach:
> - Resample using nearest neighbor.
> - Apply a majority filter with a large moving window.
>
> I cannot guarantee the result, but I guess it should work.
>
> Best regards,
>
> Lo?c
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of John Twilley
> Sent: vendredi 27 janvier 2012 20:58
> To: Dmitry Baryshnikov
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] gdalwarp makes landcover files blocky when shrinking pixel size
>
> None of those resampling methods are well-suited to classified rasters as far as I can tell.
>
> The method that has worked best in the past was to take the majority of a number of the nearest neighbors. ?The 'mode' algorithm in gdaladdo may do that, but I haven't checked the source code.
>
> Jack.
> --
> mathuin at gmail dot com
>
>
>
> 2012/1/27 Dmitry Baryshnikov <polimax@mail.ru>:
>> 27.01.2012 23:30, John Twilley ?????:
>>
>>> Cubic is fine for the elevation, but it doesn't work on the landcover.
>>> which is the problem I originally mentioned.
>>>
>>> Jack.
>>> --
>>> mathuin at gmail dot com
>>>
>>>
>>>
>>> 2012/1/27 Dmitry Baryshnikov<polimax@mail.ru>:
>>>>
>>>> 27.01.2012 20:19, John Twilley ?????:
>>>>
>>>>> After retrieving the files and building VRTs from them, I run the
>>>>> following gdalwarp commands:
>>>>>
>>>>> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
>>>>> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6
>>>>> +-te
>>>>> 2002944 2271744 2016768 2288640 \
>>>>> ?-srcnodata -340282346638528859811704183484516925440 -dstnodata 0
>>>>> ND302HT.vrt ND302HT.tif gdalwarp -q -multi -t_srs "+proj=aea
>>>>> +datum=NAD83 +lat_1=29.5
>>>>> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6
>>>>> +-te
>>>>> 2002944 2271744 2016768 2288640 \
>>>>> ?-srcnodata 255 -dstnodata 11 L0102HT.vrt L0102HT.tif
>>>>>
>>>>> The only differences between the lines are the nodata values.
>>>>>
>>>>> Jack.
>>>>> --
>>>>> mathuin at gmail dot com
>>>>>
>>>>>
>>>>>
>>>>> On Thu, Jan 26, 2012 at 22:49, Dmitry Baryshnikov<polimax@mail.ru>
>>>>> ?wrote:
>>>>>>
>>>>>> 27.01.2012 3:39, John Twilley ?????:
>>>>>>>
>>>>>>> I am working with elevation and landcover data downloaded from
>>>>>>> the USGS. ?I use gdalwarp to convert the data to a much smaller
>>>>>>> pixel. The elevation data works very nicely with cubic
>>>>>>> resampling, but the only resampling that works at all for the
>>>>>>> landcover data is nearest-neighbor and that's very blocky. ?When
>>>>>>> I last worked with landcover data, I used a majority algorithm
>>>>>>> which produced smoother output -- but that algorithm is not implemented in gdalwarp.
>>>>>>> I am looking over the source to gdalwarp to see how hard it is to
>>>>>>> add a new algorithm. ?Other than that, though, what options are
>>>>>>> available to me? ?Thanks in advance!
>>>>>>> Jack.--
>>>>>>> mathuin at gmail dot com
>>>>>>> _______________________________________________
>>>>>>> gdal-dev mailing list
>>>>>>> gdal-dev@lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>>
>>>>>>>
>>>>>> Hi John,
>>>>>>
>>>>>> That is your command line string for gdalwarp?
>>>>>>
>>>>>> Best regards,
>>>>>> Dmitry
>>>>>>
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>> Hi John,
>>>>
>>>> Try to add "-r cubic" command parameter For example:
>>>>
>>>>
>>>> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
>>>> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -r cubic
>>>> -te
>>>>
>>>> 2002944 2271744 2016768 2288640 \
>>>> ?-srcnodata -340282346638528859811704183484516925440 -dstnodata 0
>>>> ND302HT.vrt ND302HT.tif
>>>>
>>>> You can found additional parameters description here:
>>>> http://www.gdal.org/gdalwarp.html
>>>> I have tested -r parameter and it works.
>>>>
>>>>
>>>> Best regards,
>>>> Dmitry
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>> Hi John,
>> You can use resampling methods:
>> near: nearest neighbour resampling (default, fastest algorithm, worst
>> interpolation quality).
>> bilinear: bilinear resampling.
>> cubic: cubic resampling.
>> cubicspline: cubic spline resampling.
>> lanczos: Lanczos windowed sinc resampling.
>>
>> And what method do you need?
>>
>>
>> Best regards,
>> ? ?Dmitry
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From loic.dutrieux at wur.nl  Fri Jan 27 15:05:25 2012
From: loic.dutrieux at wur.nl (=?utf-8?B?RHV0cmlldXgsIExvw69j?=)
Date: Fri Jan 27 15:10:37 2012
Subject: [gdal-dev] gdalwarp makes landcover files blocky when shrinking
	pixel size
In-Reply-To: <CAEUMa-cjoJrhYO0jZWmt3StLi5qUvYoPrH1UakBDgDiX9ZjK3g@mail.gmail.com>
References: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
	<4F2248EF.8010104@mail.ru>
	<CAEUMa-fWxpzdNbU3g=Zti7MRLL91YGAU6khu4WkpHFe477f2mA@mail.gmail.com>
	<4F22F9AE.2020502@mail.ru>
	<CAEUMa-d53Nty-EXunTimw_PiTCZ3Z6TG7LW2C8n0HEx_TisUpQ@mail.gmail.com>
	<4F23001E.1030806@mail.ru>
	<CAEUMa-cjoJrhYO0jZWmt3StLi5qUvYoPrH1UakBDgDiX9ZjK3g@mail.gmail.com>
Message-ID: <488056EF78251143A31B3840ECA8628B0DDCEC7219@scomp0537.wurnet.nl>

Hi John,

If I may add a bit to the discussion, applying resampling algorithm other than nearest neighbor to thematic layers such as land cover classification is not really recommended.
However, if you want to smoothen the edges of your resampling output, I would suggest a two steps approach:
- Resample using nearest neighbor.
- Apply a majority filter with a large moving window.

I cannot guarantee the result, but I guess it should work.

Best regards,

Lo?c

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of John Twilley
Sent: vendredi 27 janvier 2012 20:58
To: Dmitry Baryshnikov
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdalwarp makes landcover files blocky when shrinking pixel size

None of those resampling methods are well-suited to classified rasters as far as I can tell.

The method that has worked best in the past was to take the majority of a number of the nearest neighbors.  The 'mode' algorithm in gdaladdo may do that, but I haven't checked the source code.

Jack.
--
mathuin at gmail dot com



2012/1/27 Dmitry Baryshnikov <polimax@mail.ru>:
> 27.01.2012 23:30, John Twilley ?????:
>
>> Cubic is fine for the elevation, but it doesn't work on the landcover.
>> which is the problem I originally mentioned.
>>
>> Jack.
>> --
>> mathuin at gmail dot com
>>
>>
>>
>> 2012/1/27 Dmitry Baryshnikov<polimax@mail.ru>:
>>>
>>> 27.01.2012 20:19, John Twilley ?????:
>>>
>>>> After retrieving the files and building VRTs from them, I run the 
>>>> following gdalwarp commands:
>>>>
>>>> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
>>>> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 
>>>> +-te
>>>> 2002944 2271744 2016768 2288640 \
>>>> ?-srcnodata -340282346638528859811704183484516925440 -dstnodata 0 
>>>> ND302HT.vrt ND302HT.tif gdalwarp -q -multi -t_srs "+proj=aea 
>>>> +datum=NAD83 +lat_1=29.5
>>>> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 
>>>> +-te
>>>> 2002944 2271744 2016768 2288640 \
>>>> ?-srcnodata 255 -dstnodata 11 L0102HT.vrt L0102HT.tif
>>>>
>>>> The only differences between the lines are the nodata values.
>>>>
>>>> Jack.
>>>> --
>>>> mathuin at gmail dot com
>>>>
>>>>
>>>>
>>>> On Thu, Jan 26, 2012 at 22:49, Dmitry Baryshnikov<polimax@mail.ru>
>>>> ?wrote:
>>>>>
>>>>> 27.01.2012 3:39, John Twilley ?????:
>>>>>>
>>>>>> I am working with elevation and landcover data downloaded from 
>>>>>> the USGS. ?I use gdalwarp to convert the data to a much smaller 
>>>>>> pixel. The elevation data works very nicely with cubic 
>>>>>> resampling, but the only resampling that works at all for the 
>>>>>> landcover data is nearest-neighbor and that's very blocky. ?When 
>>>>>> I last worked with landcover data, I used a majority algorithm 
>>>>>> which produced smoother output -- but that algorithm is not implemented in gdalwarp.
>>>>>> I am looking over the source to gdalwarp to see how hard it is to 
>>>>>> add a new algorithm. ?Other than that, though, what options are 
>>>>>> available to me? ?Thanks in advance!
>>>>>> Jack.--
>>>>>> mathuin at gmail dot com
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>>
>>>>> Hi John,
>>>>>
>>>>> That is your command line string for gdalwarp?
>>>>>
>>>>> Best regards,
>>>>> Dmitry
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> Hi John,
>>>
>>> Try to add "-r cubic" command parameter For example:
>>>
>>>
>>> gdalwarp -q -multi -t_srs "+proj=aea +datum=NAD83 +lat_1=29.5
>>> +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +units=m" -tr 6 6 -r cubic
>>> -te
>>>
>>> 2002944 2271744 2016768 2288640 \
>>> ?-srcnodata -340282346638528859811704183484516925440 -dstnodata 0
>>> ND302HT.vrt ND302HT.tif
>>>
>>> You can found additional parameters description here:
>>> http://www.gdal.org/gdalwarp.html
>>> I have tested -r parameter and it works.
>>>
>>>
>>> Best regards,
>>> Dmitry
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
> Hi John,
> You can use resampling methods:
> near: nearest neighbour resampling (default, fastest algorithm, worst
> interpolation quality).
> bilinear: bilinear resampling.
> cubic: cubic resampling.
> cubicspline: cubic spline resampling.
> lanczos: Lanczos windowed sinc resampling.
>
> And what method do you need?
>
>
> Best regards,
> ? ?Dmitry
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mathuin at gmail.com  Fri Jan 27 15:15:31 2012
From: mathuin at gmail.com (John Twilley)
Date: Fri Jan 27 15:16:08 2012
Subject: [gdal-dev] gdalwarp makes landcover files blocky when shrinking
	pixel size
In-Reply-To: <CAMKgpObRgVFzTNPBkuoC8HmxY38PZvOi4OeOPqRLvvhCWUr5Zg@mail.gmail.com>
References: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
	<CAMKgpOZiEDFbYQiLGY0pWDF40sg8EYHUvh2JgLaQYVuhd2eBbA@mail.gmail.com>
	<CAEUMa-cP_Y3ZV-g8OwyJ4y+snVSMQS82weGGeq-SDtgxUhjFjw@mail.gmail.com>
	<CAMKgpObRgVFzTNPBkuoC8HmxY38PZvOi4OeOPqRLvvhCWUr5Zg@mail.gmail.com>
Message-ID: <CAEUMa-f+8a95rdR9Ao0PtjRDd8DCwpTZbj0kZt-8ZF5uYgz0ew@mail.gmail.com>

I believe my landcover data is a classified raster.  It has a color
table and uses values like 11 for water and 12 for ice.

The majority algorithm I implemented that looked okay in the old code
used a number of the nearest neighbors.  Taking just one nearest
neighbor made the blocky images I described in my original message.
If gdalwarp had gdaladdo's mode algorithm, would that do a better job
than the nearest-neighbor algorithm?

When I tried using pct2rgb.py on the VRT, then running the gdalwarp
with a variety of resampling methods, then using rgb2pct.py on the
resulting output (referencing the VRT for the palette), the output was
filled with speckles.  For example, when a finger of sand poked out
into the water, the various methods created many tiny one-pixel lakes
and islands.  Not quite right.

Jack.
--
mathuin at gmail dot com



On Fri, Jan 27, 2012 at 11:27, Chaitanya kumar CH
<chaitanya.ch@gmail.com> wrote:
> John,
>
> You are right. gdaladdo is not for creating higher resolution images. I
> thought you needed the opposite.
> I assume your landcover data is a classified raster. Classified data is
> usually zoomed in with nearest neighbor interpolation. Unless you fiddle
> with the interpolation window, the majority algorithm is pretty much the
> nearest neighbor while zooming in.
>
> If you want, you can convert the image into an RGB using pct2rgb.py and work
> with the RGB image.
>
>
> On Fri, Jan 27, 2012 at 11:30 PM, John Twilley <mathuin@gmail.com> wrote:
>>
>> I've never seen gdaladdo -- neat command! ?Alas, the overviews are the
>> wrong way 'round -- I don't need to zoom out, I need to zoom in.
>> gdaladdo doesn't handle fractional scale values well, so I can't make
>> something bigger out of something smaller like I can with gdalwarp.
>>
>> Jack.
>> --
>> mathuin at gmail dot com
>>
>>
>>
>> On Thu, Jan 26, 2012 at 20:01, Chaitanya kumar CH
>> <chaitanya.ch@gmail.com> wrote:
>> > John,
>> >
>> > Try gdaladdo [1] with the resampling algo set to 'mode'. If you use the
>> > -ro
>> > option, it will create an external overview. Check your output with
>> > different combinations of levels.
>> >
>> > [1]: http://www.gdal.org/gdaladdo.html
>> >
>> > On Fri, Jan 27, 2012 at 5:09 AM, John Twilley <mathuin@gmail.com> wrote:
>> >>
>> >> I am working with elevation and landcover data downloaded from the
>> >> USGS. ?I use gdalwarp to convert the data to a much smaller pixel. The
>> >> elevation data works very nicely with cubic resampling, but the only
>> >> resampling that works at all for the landcover data is
>> >> nearest-neighbor and that's very blocky. ?When I last worked with
>> >> landcover data, I used a majority algorithm which produced smoother
>> >> output -- but that algorithm is not implemented in gdalwarp.
>> >> I am looking over the source to gdalwarp to see how hard it is to add
>> >> a new algorithm. ?Other than that, though, what options are available
>> >> to me? ?Thanks in advance!
>> >> Jack.--
>> >> mathuin at gmail dot com
>> >> _______________________________________________
>> >> gdal-dev mailing list
>> >> gdal-dev@lists.osgeo.org
>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> >
>> >
>> >
>> > --
>> > Best regards,
>> > Chaitanya kumar CH.
>> >
>> > +91-9494447584
>> > 17.2416N 80.1426E
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
From etourigny.dev at gmail.com  Fri Jan 27 15:48:16 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Jan 27 15:48:51 2012
Subject: [gdal-dev] gdalwarp makes landcover files blocky when shrinking
	pixel size
In-Reply-To: <CAEUMa-f+8a95rdR9Ao0PtjRDd8DCwpTZbj0kZt-8ZF5uYgz0ew@mail.gmail.com>
References: <CAEUMa-fMEECunh0pn5Ak=r1H+GX+MCeBMM84-mYjb81NhA+QJA@mail.gmail.com>
	<CAMKgpOZiEDFbYQiLGY0pWDF40sg8EYHUvh2JgLaQYVuhd2eBbA@mail.gmail.com>
	<CAEUMa-cP_Y3ZV-g8OwyJ4y+snVSMQS82weGGeq-SDtgxUhjFjw@mail.gmail.com>
	<CAMKgpObRgVFzTNPBkuoC8HmxY38PZvOi4OeOPqRLvvhCWUr5Zg@mail.gmail.com>
	<CAEUMa-f+8a95rdR9Ao0PtjRDd8DCwpTZbj0kZt-8ZF5uYgz0ew@mail.gmail.com>
Message-ID: <CA+TxYvN4xu+8sxUBPTtuxuyqZLusRWzBobr+UJO8F4Tji-qcbQ@mail.gmail.com>

In my opinion the "mode" (majority) algorithm should be implemented
into gdalwarp, as it would solve re-gridding (to finer or coarser
grids) of thematic/discrete data.

The gdaladdo work-around (for coarser grids) is not very intuitive,
and does not work for finer re-gridding.

As there is existing code for gdaladdo, how hard would it be to adapt
it to warping operations?

I am not sure that the other gdaladdo methods are worth using in
gdalwarp though...

gdaladdo: nearest
(default),average,gauss,cubic,average_mp,average_magphase,mode:
gdalwarp: near (default), bilinear, cubic, cubicspline, lanczos:

regards,
Etienne

On Fri, Jan 27, 2012 at 6:15 PM, John Twilley <mathuin@gmail.com> wrote:
> I believe my landcover data is a classified raster. ?It has a color
> table and uses values like 11 for water and 12 for ice.
>
> The majority algorithm I implemented that looked okay in the old code
> used a number of the nearest neighbors. ?Taking just one nearest
> neighbor made the blocky images I described in my original message.
> If gdalwarp had gdaladdo's mode algorithm, would that do a better job
> than the nearest-neighbor algorithm?
>
> When I tried using pct2rgb.py on the VRT, then running the gdalwarp
> with a variety of resampling methods, then using rgb2pct.py on the
> resulting output (referencing the VRT for the palette), the output was
> filled with speckles. ?For example, when a finger of sand poked out
> into the water, the various methods created many tiny one-pixel lakes
> and islands. ?Not quite right.
>
> Jack.
> --
> mathuin at gmail dot com
>
>
>
> On Fri, Jan 27, 2012 at 11:27, Chaitanya kumar CH
> <chaitanya.ch@gmail.com> wrote:
>> John,
>>
>> You are right. gdaladdo is not for creating higher resolution images. I
>> thought you needed the opposite.
>> I assume your landcover data is a classified raster. Classified data is
>> usually zoomed in with nearest neighbor interpolation. Unless you fiddle
>> with the interpolation window, the majority algorithm is pretty much the
>> nearest neighbor while zooming in.
>>
>> If you want, you can convert the image into an RGB using pct2rgb.py and work
>> with the RGB image.
>>
>>
>> On Fri, Jan 27, 2012 at 11:30 PM, John Twilley <mathuin@gmail.com> wrote:
>>>
>>> I've never seen gdaladdo -- neat command! ?Alas, the overviews are the
>>> wrong way 'round -- I don't need to zoom out, I need to zoom in.
>>> gdaladdo doesn't handle fractional scale values well, so I can't make
>>> something bigger out of something smaller like I can with gdalwarp.
>>>
>>> Jack.
>>> --
>>> mathuin at gmail dot com
>>>
>>>
>>>
>>> On Thu, Jan 26, 2012 at 20:01, Chaitanya kumar CH
>>> <chaitanya.ch@gmail.com> wrote:
>>> > John,
>>> >
>>> > Try gdaladdo [1] with the resampling algo set to 'mode'. If you use the
>>> > -ro
>>> > option, it will create an external overview. Check your output with
>>> > different combinations of levels.
>>> >
>>> > [1]: http://www.gdal.org/gdaladdo.html
>>> >
>>> > On Fri, Jan 27, 2012 at 5:09 AM, John Twilley <mathuin@gmail.com> wrote:
>>> >>
>>> >> I am working with elevation and landcover data downloaded from the
>>> >> USGS. ?I use gdalwarp to convert the data to a much smaller pixel. The
>>> >> elevation data works very nicely with cubic resampling, but the only
>>> >> resampling that works at all for the landcover data is
>>> >> nearest-neighbor and that's very blocky. ?When I last worked with
>>> >> landcover data, I used a majority algorithm which produced smoother
>>> >> output -- but that algorithm is not implemented in gdalwarp.
>>> >> I am looking over the source to gdalwarp to see how hard it is to add
>>> >> a new algorithm. ?Other than that, though, what options are available
>>> >> to me? ?Thanks in advance!
>>> >> Jack.--
>>> >> mathuin at gmail dot com
>>> >> _______________________________________________
>>> >> gdal-dev mailing list
>>> >> gdal-dev@lists.osgeo.org
>>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> >
>>> >
>>> >
>>> >
>>> > --
>>> > Best regards,
>>> > Chaitanya kumar CH.
>>> >
>>> > +91-9494447584
>>> > 17.2416N 80.1426E
>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Fri Jan 27 16:19:28 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan 27 16:19:35 2012
Subject: [gdal-dev] OpenJPEG fails with ERDAS JPEG2000 file
In-Reply-To: <loom.20120127T105318-652@post.gmane.org>
References: <loom.20120127T105318-652@post.gmane.org>
Message-ID: <201201272219.28583.even.rouault@mines-paris.org>

Le vendredi 27 janvier 2012 11:09:00, Jukka Rahkonen a ?crit :
> Hi,
> 
> Here is a link to JPEG2000 image that is created by ERDAS Imagine with
> default settings
> 
> http://latuviitta.org/documents/openjump_jpeg2000_erdas.jp2 (30 MB)
> 
> It is created with ECW JPEG 2000 SDK v4.2.0.64
> There is nothing odd in the JPEG2000 parameters and Kakadu and a few other
> program I tried are opening the image. Kakadu can also expand the
> image into tiff.
> 
> GDAL 1.9 with OpenJPEG driver shows the image metadata correctly. However,
> gdal_translate gives this error and two others.
> 
> opj_read_tile_header() failed

The full errors are :
ERROR 1: Cannot read data with no size known, giving up
ERROR 1: Marker is not compliant with its position

Those errors come from openjpeg lib directly. Perhaps worth reporting to 
http://groups.google.com/group/openjpeg . Note that the openjpeg v2 branch is 
being merged in the openjpeg trunk, so perhaps this has been fixed in there, 
but I've not verified.

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From luc.vanlinden at gmail.com  Fri Jan 27 18:55:32 2012
From: luc.vanlinden at gmail.com (lucvanlinden)
Date: Fri Jan 27 18:55:44 2012
Subject: [gdal-dev] gdal_rasterize update access mode for EHdr/Bil file
Message-ID: <1327708532879-4344727.post@n6.nabble.com>

Hi

I successfully created an EHdr / Bil file using gdal_grid 400 by 400 pixels
with 1 band from a series of preprocessed 3D vertices/points read from
Postgis.

In a second stage I would like to add 3D polygons to that same bil file
using gdal_rasterize.
These source polygons are in the same SRS and in the same postgis database.

>From reading the documentation this should be feasible using gdal_rasterize.
However it seems not be able to update this bil file, as the gdal_rasterize
returns:

'-tr xres yes' or '-ts xsize ysize' is required

Here is the gdal_rasterize command: 

gdal_rasterize -3d -l test_3d  -a_srs EPSG:31370 -ot Int32 -of EHdr 
PG:"dbname='postgis' host='localhost' port='5432' user='postgres'
password='postgis' tables=test_3d"  target.bil

These -tr or -ts are 2 options that should only be required for creating a
new target file.
Which if feasible but obviously it completely overwrites the original bil
file (from the gdal_grid)

On the bottom of the documentation page I read : 

"The GDAL supported output file. Must support update mode access"

Questions:

1. is an EHdr / Bil file considered as supporting update mode access?
2. is there an overview of this?
3. will the gdal_rasterize come with a message it is not supported for this
type of file?
4. if it supports update mode access, what could be the cause of not being
able to do the update (getting the message '-tr xres yes' or '-ts xsize
ysize' is required?

Thanks for your time and help.

Regards

Luc


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-rasterize-update-access-mode-for-EHdr-Bil-file-tp4344727p4344727.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Fri Jan 27 19:03:40 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan 27 19:03:40 2012
Subject: [gdal-dev] gdal_rasterize update access mode for EHdr/Bil file
In-Reply-To: <1327708532879-4344727.post@n6.nabble.com>
References: <1327708532879-4344727.post@n6.nabble.com>
Message-ID: <201201280103.41023.even.rouault@mines-paris.org>

Le samedi 28 janvier 2012 00:55:32, lucvanlinden a ?crit :
> Hi
> 
> I successfully created an EHdr / Bil file using gdal_grid 400 by 400 pixels
> with 1 band from a series of preprocessed 3D vertices/points read from
> Postgis.
> 
> In a second stage I would like to add 3D polygons to that same bil file
> using gdal_rasterize.
> These source polygons are in the same SRS and in the same postgis database.
> 
> >From reading the documentation this should be feasible using
> >gdal_rasterize.
> 
> However it seems not be able to update this bil file, as the gdal_rasterize
> returns:
> 
> '-tr xres yes' or '-ts xsize ysize' is required
> 
> Here is the gdal_rasterize command:
> 
> gdal_rasterize -3d -l test_3d  -a_srs EPSG:31370 -ot Int32 -of EHdr
> PG:"dbname='postgis' host='localhost' port='5432' user='postgres'
> password='postgis' tables=test_3d"  target.bil

Try removing the -a_srs, -ot and -of options : when gdal_rasterize sees one of 
those, it assumes you want to create a new file. 

EHdr supports updating. If you issue a "gdalinfo --format ehdr" , you will see 
"Supports: Create() - Create writeable dataset.". This also imply update 
support.

From dvdov at yahoo.com  Fri Jan 27 20:27:49 2012
From: dvdov at yahoo.com (David Ortiz)
Date: Fri Jan 27 20:28:49 2012
Subject: [gdal-dev] HDF-EOS AIRS CO2 images without georeference using
	gdal_translate
In-Reply-To: <CAMKgpObCagKV9qpK==5na=fhskFBybfVzYL8Nr1nN7KkO==bBg@mail.gmail.com>
References: <1327550682.65931.YahooMailNeo@web112018.mail.gq1.yahoo.com>
	<CAMKgpOYTDPdc+KtBFV-oAesu_onM_p1mqbByjwEkAoMY3=1E0w@mail.gmail.com>
	<1327629389.90404.YahooMailNeo@web112016.mail.gq1.yahoo.com>
	<CAMKgpObCagKV9qpK==5na=fhskFBybfVzYL8Nr1nN7KkO==bBg@mail.gmail.com>
Message-ID: <1327714069.10294.YahooMailNeo@web112014.mail.gq1.yahoo.com>

Chaitanya,


This image have 329 GCPs and 41 of them are not outliers , can i put?-refine_gcps 329 41 in the command ?



--
David A. Ortiz V







________________________________
 De: Chaitanya kumar CH <chaitanya.ch@gmail.com>
Para: David Ortiz <dvdov@yahoo.com> 
CC: "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org> 
Enviado: Jueves, enero 26, 2012 10:49 P.M.
Asunto: Re: [gdal-dev] HDF-EOS AIRS CO2 images without georeference using gdal_translate
 

David,

I checked the images I created now. The GCPs were not considered. So, I made sure they were used with gdalwarp.
gdalwarp -s_srs "EPSG:4326" -t_srs "EPSG:4326" -refine_gcps 200 10 -of GTiff HDF4_EOS:EOS_SWATH:"AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret? CO2_sup_Gtiff_EOS_warp.tif
I used the -refine_gcps. It will help in excluding the dummy gcps 
pointing to (-9999,-9999,0). In this option, the number of minimum_gcps 
had to be given. I chose the number 10 based on the number of usable 
GCPs available. It should not be more than the number of usable GCPs. If I did not exclude the dummy gcps, I got black image.

Also note that the output image dimensions changed.


On Fri, Jan 27, 2012 at 7:26 AM, David Ortiz <dvdov@yahoo.com> wrote:

Hi Chaitanya
>
>
>
>
>Applying?gdalinfo -stats to input and output images i get coherent values ?for statistics in both .img ?and GTiff ?images. The problem was in data display in GIS since QGIS show a Gtiff image with all pixel values equal to zero when i use "identify spatial objects" tool and ArcGIS ?doesn't display it correctly , just two lines and no data, but?gvSIG ?allows see the?appropriate?values of CO2 amounts.
>
>
>However, neither the .img nor GTiff have geographical spatial reference in WGS84 datum coordinates. Even opening ?subdatasets directly?from hdf file?with ArcGis , the images are missing georeference. As it is seen below, hdf image is between -133.57, -157.94 longitudes and 22.23, 45.88 latitudes. I mentioned HDF_SDS:UNKNOWN datasets on previous post because it have some info about coordinate reference system:
>SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
>
>Actually , when i load Geotiff generated with HEGTool?(with other AIRS products)?in any gis software , automatically have wgs84 Datum coordinates
>
>
>
>Here the results of gdalinfo command:
>1. Input image
>
>
>
>gdalinfo -stats HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret?
>Driver: HDF4Image/HDF4 Dataset
>? ? ? ? ? ? ? ? ? ?...
>Corner Coordinates:
>Upper Left ?( ? ?0.0, ? ?0.0)
>Lower Left ?( ? ?0.0, ? 22.0)
>Upper Right ( ? 15.0, ? ?0.0)
>Lower Right ( ? 15.0, ? 22.0)
>Center ? ? ?( ? ?7.5, ? 11.0)
>Band 1 Block=15x22 Type=Float32, ColorInterp=Gray
>? Min=379.197 Max=393.697?
>? Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>? NoData Value=-9999
>? Metadata:
>? ? STATISTICS_MAXIMUM=393.6969909668
>? ? STATISTICS_MEAN=386.46261742001
>? ? STATISTICS_MINIMUM=379.1969909668
>? ? STATISTICS_STDDEV=3.0709672735453
>
>
>2. ?with?Geotiff?output ?image :?
>gdalinfo -stats ?/home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif
>Driver: GTiff/GeoTIFF
>Files: /home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif
>? ? ? ?/home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif.aux.xml
>Size is 15, 22
>Coordinate System is `'
>GCP Projection =?
>GCP[ ?0]: Id=1, Info=
>? ? ? ? ? (0.5,0.5) -> (-9999,-9999,0)
>GCP[ ?1]: Id=2, Info=
>? ? ? ? ? (1.5,0.5) -> (-9999,-9999,0)
>GCP[ ?2]: Id=3, Info=
>? ? ? ? ? (2.5,0.5) -> (-9999,-9999,0)
>GCP[ ?3]: Id=4, Info=
>? ? ? ? ? (3.5,0.5) -> (-145.229995727539,23.3500003814697,0)
>GCP[ ?4]: Id=5, Info=
>? ? ? ? ? (4.5,0.5) -> (-9999,-9999,0)
>? ? ? ? ? ? ? ?...?
>GROUP ? ? ? ? ? ? ? ? ?= HORIZONTALSPATIALDOMAINCONTAINER
>? ? ? GROUP ? ? ? ? ? ? ? ? ?= BOUNDINGRECTANGLE
>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = EASTBOUNDINGCOORDINATE
>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= -133.537399291992
>? ? ? ? END_OBJECT ? ? ? ? ? ? = EASTBOUNDINGCOORDINATE
>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = WESTBOUNDINGCOORDINATE
>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= -157.941314697266
>? ? ? ? END_OBJECT ? ? ? ? ? ? = WESTBOUNDINGCOORDINATE
>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = SOUTHBOUNDINGCOORDINATE
>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= 22.2317676544189
>? ? ? ? END_OBJECT ? ? ? ? ? ? = SOUTHBOUNDINGCOORDINATE
>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = NORTHBOUNDINGCOORDINATE
>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= 45.889762878418
>? ? ? ? END_OBJECT ? ? ? ? ? ? = NORTHBOUNDINGCOORDINATE
>? ? ? END_GROUP ? ? ? ? ? ? ?= BOUNDINGRECTANGLE
>? ? ? ? ? ? ? ?...?
>? INTERLEAVE=BAND
>Corner Coordinates:
>Upper Left ?( ? ?0.0, ? ?0.0)
>Lower Left ?( ? ?0.0, ? 22.0)
>Upper Right ( ? 15.0, ? ?0.0)
>Lower Right ( ? 15.0, ? 22.0)
>Center ? ? ?( ? ?7.5, ? 11.0)
>Band 1 Block=15x22 Type=Float32, ColorInterp=Gray
>? Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>? NoData Value=-9999
>? Metadata:
>? ? STATISTICS_MAXIMUM=393.6969909668
>? ? STATISTICS_MEAN=386.46261742001
>? ? STATISTICS_MINIMUM=379.1969909668
>? ? STATISTICS_STDDEV=3.0709672735453
>? ? ? ? ? ? ??
>3. .img image :
>
>
>gdalinfo -stats /home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img
>Driver: HFA/Erdas Imagine Images (.img)
>Files: /home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img
>? ? ? ?/home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img.aux.xml
>Size is 15, 22
>Coordinate System is `'
>? ? ? ? ? ? ? ?...?
>GROUP ? ? ? ? ? ? ? ? ?= SPATIALDOMAINCONTAINER
>? ? GROUP ? ? ? ? ? ? ? ? ?= HORIZONTALSPATIALDOMAINCONTAINER
>? ? ? GROUP ? ? ? ? ? ? ? ? ?= BOUNDINGRECTANGLE
>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = EASTBOUNDINGCOORDINATE
>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= -133.537399291992
>? ? ? ? END_OBJECT ? ? ? ? ? ? = EASTBOUNDINGCOORDINATE
>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = WESTBOUNDINGCOORDINATE
>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= -157.941314697266
>? ? ? ? END_OBJECT ? ? ? ? ? ? = WESTBOUNDINGCOORDINATE
>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = SOUTHBOUNDINGCOORDINATE
>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= 22.2317676544189
>? ? ? ? END_OBJECT ? ? ? ? ? ? = SOUTHBOUNDINGCOORDINATE
>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = NORTHBOUNDINGCOORDINATE
>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= 45.889762878418
>? ? ? ? END_OBJECT ? ? ? ? ? ? = NORTHBOUNDINGCOORDINATE
>? ? ? END_GROUP ? ? ? ? ? ? ?= BOUNDINGRECTANGLE
>? ? ? ? ? ? ? ?...?
>Corner Coordinates:
>Upper Left ?( ? ?0.0, ? ?0.0)
>Lower Left ?( ? ?0.0, ? 22.0)
>Upper Right ( ? 15.0, ? ?0.0)
>Lower Right ( ? 15.0, ? 22.0)
>Center ? ? ?( ? ?7.5, ? 11.0)
>Band 1 Block=64x64 Type=Float32, ColorInterp=Undefined
>? Description = Layer_1
>? Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>? NoData Value=-9999
>? Metadata:
>? ? LAYER_TYPE=athematic
>? ? STATISTICS_MAXIMUM=393.6969909668
>? ? STATISTICS_MEAN=386.46261742001
>? ? STATISTICS_MINIMUM=379.1969909668
>? ? STATISTICS_STDDEV=3.0709672735453
>
>
>
>
>
>
>What is wrong?. I tried with gdal 1.8 and 1.9 with hdf4 support.
>
>
>
>
>Best regards.--
>
>
>David Ortiz V.
>
>
-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120127/f757421b/attachment-0001.html
From sabjap at gmail.com  Fri Jan 27 21:50:48 2012
From: sabjap at gmail.com (jjap)
Date: Fri Jan 27 21:51:12 2012
Subject: [gdal-dev] Some tables from mdb not exported to PostGIS
Message-ID: <1327719048548-4344999.post@n6.nabble.com>

Greetings,
ogr2ogr has allowed me to successfully convert an ESRI personnal geodatabase
from a Windows XP computer to an Ubuntu server 11.04 running PostGIS 1.5
with proper encoding . The tables containing the blob/shapefiles all made it
but not the others. Am I right to presume I'll have to migrate those other
tables by hand and rebuild references? 
Am I missing some options which would have allowed me to do it in one fell
swoop? Any hints appreciated.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Some-tables-from-mdb-not-exported-to-PostGIS-tp4344999p4344999.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Fri Jan 27 23:09:06 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jan 27 23:09:37 2012
Subject: [gdal-dev] HDF-EOS AIRS CO2 images without georeference using
	gdal_translate
In-Reply-To: <1327714069.10294.YahooMailNeo@web112014.mail.gq1.yahoo.com>
References: <1327550682.65931.YahooMailNeo@web112018.mail.gq1.yahoo.com>
	<CAMKgpOYTDPdc+KtBFV-oAesu_onM_p1mqbByjwEkAoMY3=1E0w@mail.gmail.com>
	<1327629389.90404.YahooMailNeo@web112016.mail.gq1.yahoo.com>
	<CAMKgpObCagKV9qpK==5na=fhskFBybfVzYL8Nr1nN7KkO==bBg@mail.gmail.com>
	<1327714069.10294.YahooMailNeo@web112014.mail.gq1.yahoo.com>
Message-ID: <CAMKgpOY5sHyWXY87HydmUAJ=qP9m--Q1epffhZGSuSGpwhVe5A@mail.gmail.com>

David,

gdalwarp should stop eliminating outliers when it can't find any more. But
to be sure you can pass the minimum number of GCPs. Also, the argument *
tolerance* is the tolerance in GCP's SRS units. Since the outliers are
indicated by (-9999,-9999) and our GCPs can go between -180 and 180,
anything between 360 and 9000 can be given as tolerance.

BTW, there is no need for -s_srs because we are using GCPs.

Do let us know how it goes.

On Sat, Jan 28, 2012 at 6:57 AM, David Ortiz <dvdov@yahoo.com> wrote:

> Chaitanya,
>
> This image have 329 GCPs and 41 of them are not outliers , can i put  -refine_gcps
> 329 41 in the command ?
>
>
>
> --
> David A. Ortiz V
>
>
>   ------------------------------
> *De:* Chaitanya kumar CH <chaitanya.ch@gmail.com>
> *Para:* David Ortiz <dvdov@yahoo.com>
> *CC:* "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org>
> *Enviado:* Jueves, enero 26, 2012 10:49 P.M.
>
> *Asunto:* Re: [gdal-dev] HDF-EOS AIRS CO2 images without georeference
> using gdal_translate
>
> David,
>
> I checked the images I created now. The GCPs were not considered. So, I
> made sure they were used with gdalwarp.
> gdalwarp -s_srs "EPSG:4326" -t_srs "EPSG:4326" -refine_gcps 200 10 -of
> GTiff
> HDF4_EOS:EOS_SWATH:"AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret
> CO2_sup_Gtiff_EOS_warp.tif
> I used the -refine_gcps. It will help in excluding the dummy gcps pointing
> to (-9999,-9999,0). In this option, the number of minimum_gcps had to be
> given. I chose the number 10 based on the number of usable GCPs available.
> It should not be more than the number of usable GCPs. If I did not exclude
> the dummy gcps, I got black image.
>
> Also note that the output image dimensions changed.
>
> On Fri, Jan 27, 2012 at 7:26 AM, David Ortiz <dvdov@yahoo.com> wrote:
>
> Hi Chaitanya
>
>
> Applying gdalinfo -stats to input and output images i get coherent values
>  for statistics in both .img  and GTiff  images. The problem was in data
> display in GIS since QGIS show a Gtiff image with all pixel values equal to
> zero when i use "identify spatial objects" tool and ArcGIS  doesn't display
> it correctly , just two lines and no data, but gvSIG  allows see the
> appropriate values of CO2 amounts.
>
> However, neither the .img nor GTiff have geographical spatial reference in
> WGS84 datum coordinates. Even opening  subdatasets directly from hdf file with
> ArcGis , the images are missing georeference. As it is seen below, hdf
> image is between -133.57, -157.94 longitudes and 22.23, 45.88 latitudes. I
> mentioned HDF_SDS:UNKNOWN datasets on previous post because it have some
> info about coordinate reference system:
> SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
> Actually , when i load Geotiff generated with HEGTool (with other AIRS
> products) in any gis software , automatically have wgs84 Datum coordinates
>
> Here the results of gdalinfo command:
> 1. Input image
>
> gdalinfo -stats
> HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret
> Driver: HDF4Image/HDF4 Dataset
>                    ...
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,   22.0)
> Upper Right (   15.0,    0.0)
> Lower Right (   15.0,   22.0)
> Center      (    7.5,   11.0)
> Band 1 Block=15x22 Type=Float32, ColorInterp=Gray
>   Min=379.197 Max=393.697
>   Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>   NoData Value=-9999
>   Metadata:
>     STATISTICS_MAXIMUM=393.6969909668
>     STATISTICS_MEAN=386.46261742001
>     STATISTICS_MINIMUM=379.1969909668
>     STATISTICS_STDDEV=3.0709672735453
>
> 2.  with Geotiff output  image :
> gdalinfo -stats
>  /home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif
> Driver: GTiff/GeoTIFF
> Files: /home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif
>
>  /home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif.aux.xml
> Size is 15, 22
> Coordinate System is `'
> GCP Projection =
> GCP[  0]: Id=1, Info=
>           (0.5,0.5) -> (-9999,-9999,0)
> GCP[  1]: Id=2, Info=
>           (1.5,0.5) -> (-9999,-9999,0)
> GCP[  2]: Id=3, Info=
>           (2.5,0.5) -> (-9999,-9999,0)
> GCP[  3]: Id=4, Info=
>           (3.5,0.5) -> (-145.229995727539,23.3500003814697,0)
> GCP[  4]: Id=5, Info=
>           (4.5,0.5) -> (-9999,-9999,0)
>                ...
> GROUP                  = HORIZONTALSPATIALDOMAINCONTAINER
>       GROUP                  = BOUNDINGRECTANGLE
>         OBJECT                 = EASTBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = -133.537399291992
>         END_OBJECT             = EASTBOUNDINGCOORDINATE
>         OBJECT                 = WESTBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = -157.941314697266
>         END_OBJECT             = WESTBOUNDINGCOORDINATE
>         OBJECT                 = SOUTHBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = 22.2317676544189
>         END_OBJECT             = SOUTHBOUNDINGCOORDINATE
>         OBJECT                 = NORTHBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = 45.889762878418
>         END_OBJECT             = NORTHBOUNDINGCOORDINATE
>       END_GROUP              = BOUNDINGRECTANGLE
>                ...
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,   22.0)
> Upper Right (   15.0,    0.0)
> Lower Right (   15.0,   22.0)
> Center      (    7.5,   11.0)
> Band 1 Block=15x22 Type=Float32, ColorInterp=Gray
>   Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>   NoData Value=-9999
>   Metadata:
>     STATISTICS_MAXIMUM=393.6969909668
>     STATISTICS_MEAN=386.46261742001
>     STATISTICS_MINIMUM=379.1969909668
>     STATISTICS_STDDEV=3.0709672735453
>
> 3. .img image :
>
> gdalinfo -stats /home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img
> Driver: HFA/Erdas Imagine Images (.img)
> Files: /home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img
>        /home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img.aux.xml
> Size is 15, 22
> Coordinate System is `'
>                ...
> GROUP                  = SPATIALDOMAINCONTAINER
>     GROUP                  = HORIZONTALSPATIALDOMAINCONTAINER
>       GROUP                  = BOUNDINGRECTANGLE
>         OBJECT                 = EASTBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = -133.537399291992
>         END_OBJECT             = EASTBOUNDINGCOORDINATE
>         OBJECT                 = WESTBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = -157.941314697266
>         END_OBJECT             = WESTBOUNDINGCOORDINATE
>         OBJECT                 = SOUTHBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = 22.2317676544189
>         END_OBJECT             = SOUTHBOUNDINGCOORDINATE
>         OBJECT                 = NORTHBOUNDINGCOORDINATE
>           NUM_VAL              = 1
>           VALUE                = 45.889762878418
>         END_OBJECT             = NORTHBOUNDINGCOORDINATE
>       END_GROUP              = BOUNDINGRECTANGLE
>                ...
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,   22.0)
> Upper Right (   15.0,    0.0)
> Lower Right (   15.0,   22.0)
> Center      (    7.5,   11.0)
> Band 1 Block=64x64 Type=Float32, ColorInterp=Undefined
>   Description = Layer_1
>   Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>   NoData Value=-9999
>   Metadata:
>     LAYER_TYPE=athematic
>     STATISTICS_MAXIMUM=393.6969909668
>     STATISTICS_MEAN=386.46261742001
>     STATISTICS_MINIMUM=379.1969909668
>     STATISTICS_STDDEV=3.0709672735453
>
>
>
> What is wrong?. I tried with gdal 1.8 and 1.9 with hdf4 support.
>
>
> Best regards.
> --
>
> David Ortiz V.
>
>
>

-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120128/6527483e/attachment.html
From timchab at yahoo.com  Sat Jan 28 16:41:38 2012
From: timchab at yahoo.com (AksakTimur)
Date: Sat Jan 28 16:42:02 2012
Subject: [gdal-dev] Problem with reading OziExplorer .map world files
Message-ID: <1327786898860-4346806.post@n6.nabble.com>

Hey,

I'm new to GDAL and I have a problem when I try to open a raster file with a
.map worldfile(OziExplorer Map Data File):

...
double AdfGeoTransform[6];

pDataset->GetGeoTransform( AdfGeoTransform ) *returs CE_Failure!*
...

Also, I've tried GDALLoadOziMapFile(..) and GDALReadOziMapFile(...):

CString sMapFile = sFileName.Left(sFileName.GetLength() - 3)+_T("map");
	
const char* pszFileName = CStringToCharUTF8(sMapFile );
char*     pszWKT;
int       nGCPCount;
GDAL_GCP* pasGCPs;

double AdfGeoTransform[6];
	
//GDALLoadOziMapFile(pszFileName , AdfGeoTransform
,&pszWKT,&nGCPCount,&pasGCPs);
GDALReadOziMapFile(pszFileName , AdfGeoTransform
,&pszWKT,&nGCPCount,&pasGCPs);

I get  :

pszWKT = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]]

nGCPCount = 1;

but AdfGeoTransform[0] =-1.#QNAN00000000000, etc.

I've tried a number of different .map worldfiles. Didn't work. 
May be there is no support for .map worldfiles?
Any idea what' s wrong?

Regards

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Problem-with-reading-OziExplorer-map-world-files-tp4346806p4346806.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From dvdov at yahoo.com  Sat Jan 28 22:59:55 2012
From: dvdov at yahoo.com (David Ortiz)
Date: Sat Jan 28 23:00:18 2012
Subject: [gdal-dev] HDF-EOS AIRS CO2 images without georeference using
	gdal_translate
In-Reply-To: <CAMKgpOY5sHyWXY87HydmUAJ=qP9m--Q1epffhZGSuSGpwhVe5A@mail.gmail.com>
References: <1327550682.65931.YahooMailNeo@web112018.mail.gq1.yahoo.com>
	<CAMKgpOYTDPdc+KtBFV-oAesu_onM_p1mqbByjwEkAoMY3=1E0w@mail.gmail.com>
	<1327629389.90404.YahooMailNeo@web112016.mail.gq1.yahoo.com>
	<CAMKgpObCagKV9qpK==5na=fhskFBybfVzYL8Nr1nN7KkO==bBg@mail.gmail.com>
	<1327714069.10294.YahooMailNeo@web112014.mail.gq1.yahoo.com>
	<CAMKgpOY5sHyWXY87HydmUAJ=qP9m--Q1epffhZGSuSGpwhVe5A@mail.gmail.com>
Message-ID: <1327809595.51509.YahooMailNeo@web112012.mail.gq1.yahoo.com>

Chaitanya,

i ?used gdalwarp with several values for tolerance and minimum_gcps respectively?:
-refine_gcps 1 10, ?1 35, 1 41, 200 10, 200 35, 200 41, 329 10, 329 35, 329 41, 9000 10, 9000 41?

and loaded the images in Gis software with layer of points whose coordinates are from geolocation fields (Latitude, Longitude) in hdf file in order to compare
pixels against points.

when parameters are 1 41, 200 41, 329 41,9000 41, 9000 10 , most of points fall within its corresponding pixel. for other values, the images have a displacement towards west. Then,images with 1 10, 200 10, 329 10 values for parameters??are overlapped as well as images with 1 35, 200 35, 329 35, and 1 41, 200 41, 329 41, 9000 10, 9000 41. ? ? ? ???? ? ? ? ? ? ? ? ? ?








________________________________
 De: Chaitanya kumar CH <chaitanya.ch@gmail.com>
Para: David Ortiz <dvdov@yahoo.com> 
CC: "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org> 
Enviado: Viernes, enero 27, 2012 11:09 P.M.
Asunto: Re: [gdal-dev] HDF-EOS AIRS CO2 images without georeference using gdal_translate
 

David,

gdalwarp should stop eliminating outliers when it can't find any more. But to be sure you can pass the minimum number of GCPs. Also, the argument tolerance is the tolerance in GCP's SRS units. Since the outliers are indicated by (-9999,-9999) and our GCPs can go between -180 and 180, anything between 360 and 9000 can be given as tolerance.

BTW, there is no need for -s_srs because we are using GCPs.

Do let us know how it goes.


On Sat, Jan 28, 2012 at 6:57 AM, David Ortiz <dvdov@yahoo.com> wrote:

Chaitanya,
>
>
>
>This image have 329 GCPs and 41 of them are not outliers , can i put? -refine_gcps 329 41 in the command ?
>
>
>
>
>
>
>--
>David A. Ortiz V
>
>
>
>
>
>________________________________
> De: Chaitanya kumar CH <chaitanya.ch@gmail.com>
>Para: David Ortiz <dvdov@yahoo.com> 
>CC: "gdal-dev@lists.osgeo.org" <gdal-dev@lists.osgeo.org> 
>Enviado: Jueves, enero 26, 2012 10:49 P.M.
>
>Asunto: Re: [gdal-dev] HDF-EOS AIRS CO2 images without georeference using gdal_translate
> 
>
>
>David,
>
>I checked the images I created now. The GCPs were not considered. So, I made sure they were used with gdalwarp.
>gdalwarp -s_srs "EPSG:4326" -t_srs "EPSG:4326" -refine_gcps 200 10 -of GTiff HDF4_EOS:EOS_SWATH:"AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret? CO2_sup_Gtiff_EOS_warp.tif
>I used the -refine_gcps. It will help in excluding the dummy gcps 
pointing to (-9999,-9999,0). In this option, the number of minimum_gcps 
had to be given. I chose the number 10 based on the number of usable 
GCPs available. It should not be more than the number of usable GCPs. If I did not exclude the dummy gcps, I got black image.
>
>Also note that the output image dimensions changed.
>
>
>On Fri, Jan 27, 2012 at 7:26 AM, David Ortiz <dvdov@yahoo.com> wrote:
>
>Hi Chaitanya
>>
>>
>>
>>
>>Applying?gdalinfo -stats to input and output images i get coherent values ?for statistics in both .img ?and GTiff ?images. The problem was in data display in GIS since QGIS show a Gtiff image with all pixel values equal to zero when i use "identify spatial objects" tool and ArcGIS ?doesn't display it correctly , just two lines and no data, but?gvSIG ?allows see the?appropriate?values of CO2 amounts.
>>
>>
>>However, neither the .img nor GTiff have geographical spatial reference in WGS84 datum coordinates. Even opening ?subdatasets directly?from hdf file?with ArcGis , the images are missing georeference. As it is seen below, hdf image is between -133.57, -157.94 longitudes and 22.23, 45.88 latitudes. I mentioned HDF_SDS:UNKNOWN datasets on previous post because it have some info about coordinate reference system:
>>SRS=GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
>>
>>Actually , when i load Geotiff generated with HEGTool?(with other AIRS products)?in any gis software , automatically have wgs84 Datum coordinates
>>
>>
>>
>>Here the results of gdalinfo command:
>>1. Input image
>>
>>
>>
>>gdalinfo -stats HDF4_EOS:EOS_SWATH:"/home/david/Descargas/pruebas/AIRS.2008.03.12.228.L2.CO2_Sup.v5.4.11.0.CO2.T09254115637.hdf":CO2:CO2ret?
>>Driver: HDF4Image/HDF4 Dataset
>>? ? ? ? ? ? ? ? ? ?...
>>Corner Coordinates:
>>Upper Left ?( ? ?0.0, ? ?0.0)
>>Lower Left ?( ? ?0.0, ? 22.0)
>>Upper Right ( ? 15.0, ? ?0.0)
>>Lower Right ( ? 15.0, ? 22.0)
>>Center ? ? ?( ? ?7.5, ? 11.0)
>>Band 1 Block=15x22 Type=Float32, ColorInterp=Gray
>>? Min=379.197 Max=393.697?
>>? Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>>? NoData Value=-9999
>>? Metadata:
>>? ? STATISTICS_MAXIMUM=393.6969909668
>>? ? STATISTICS_MEAN=386.46261742001
>>? ? STATISTICS_MINIMUM=379.1969909668
>>? ? STATISTICS_STDDEV=3.0709672735453
>>
>>
>>2. ?with?Geotiff?output ?image :?
>>gdalinfo -stats ?/home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif
>>Driver: GTiff/GeoTIFF
>>Files: /home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif
>>? ? ? ?/home/david/Descargas/pruebas/EOS/CO2_sup_Gtiff_EOS_traslate.tif.aux.xml
>>Size is 15, 22
>>Coordinate System is `'
>>GCP Projection =?
>>GCP[ ?0]: Id=1, Info=
>>? ? ? ? ? (0.5,0.5) -> (-9999,-9999,0)
>>GCP[ ?1]: Id=2, Info=
>>? ? ? ? ? (1.5,0.5) -> (-9999,-9999,0)
>>GCP[ ?2]: Id=3, Info=
>>? ? ? ? ? (2.5,0.5) -> (-9999,-9999,0)
>>GCP[ ?3]: Id=4, Info=
>>? ? ? ? ? (3.5,0.5) -> (-145.229995727539,23.3500003814697,0)
>>GCP[ ?4]: Id=5, Info=
>>? ? ? ? ? (4.5,0.5) -> (-9999,-9999,0)
>>? ? ? ? ? ? ? ?...?
>>GROUP ? ? ? ? ? ? ? ? ?= HORIZONTALSPATIALDOMAINCONTAINER
>>? ? ? GROUP ? ? ? ? ? ? ? ? ?= BOUNDINGRECTANGLE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = EASTBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= -133.537399291992
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = EASTBOUNDINGCOORDINATE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = WESTBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= -157.941314697266
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = WESTBOUNDINGCOORDINATE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = SOUTHBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= 22.2317676544189
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = SOUTHBOUNDINGCOORDINATE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = NORTHBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= 45.889762878418
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = NORTHBOUNDINGCOORDINATE
>>? ? ? END_GROUP ? ? ? ? ? ? ?= BOUNDINGRECTANGLE
>>? ? ? ? ? ? ? ?...?
>>? INTERLEAVE=BAND
>>Corner Coordinates:
>>Upper Left ?( ? ?0.0, ? ?0.0)
>>Lower Left ?( ? ?0.0, ? 22.0)
>>Upper Right ( ? 15.0, ? ?0.0)
>>Lower Right ( ? 15.0, ? 22.0)
>>Center ? ? ?( ? ?7.5, ? 11.0)
>>Band 1 Block=15x22 Type=Float32, ColorInterp=Gray
>>? Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>>? NoData Value=-9999
>>? Metadata:
>>? ? STATISTICS_MAXIMUM=393.6969909668
>>? ? STATISTICS_MEAN=386.46261742001
>>? ? STATISTICS_MINIMUM=379.1969909668
>>? ? STATISTICS_STDDEV=3.0709672735453
>>? ? ? ? ? ? ??
>>3. .img image :
>>
>>
>>gdalinfo -stats /home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img
>>Driver: HFA/Erdas Imagine Images (.img)
>>Files: /home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img
>>? ? ? ?/home/david/Descargas/pruebas/EOS/CO2_sup_img_EOS.img.aux.xml
>>Size is 15, 22
>>Coordinate System is `'
>>? ? ? ? ? ? ? ?...?
>>GROUP ? ? ? ? ? ? ? ? ?= SPATIALDOMAINCONTAINER
>>? ? GROUP ? ? ? ? ? ? ? ? ?= HORIZONTALSPATIALDOMAINCONTAINER
>>? ? ? GROUP ? ? ? ? ? ? ? ? ?= BOUNDINGRECTANGLE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = EASTBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= -133.537399291992
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = EASTBOUNDINGCOORDINATE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = WESTBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= -157.941314697266
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = WESTBOUNDINGCOORDINATE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = SOUTHBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= 22.2317676544189
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = SOUTHBOUNDINGCOORDINATE
>>? ? ? ? OBJECT ? ? ? ? ? ? ? ? = NORTHBOUNDINGCOORDINATE
>>? ? ? ? ? NUM_VAL ? ? ? ? ? ? ?= 1
>>? ? ? ? ? VALUE ? ? ? ? ? ? ? ?= 45.889762878418
>>? ? ? ? END_OBJECT ? ? ? ? ? ? = NORTHBOUNDINGCOORDINATE
>>? ? ? END_GROUP ? ? ? ? ? ? ?= BOUNDINGRECTANGLE
>>? ? ? ? ? ? ? ?...?
>>Corner Coordinates:
>>Upper Left ?( ? ?0.0, ? ?0.0)
>>Lower Left ?( ? ?0.0, ? 22.0)
>>Upper Right ( ? 15.0, ? ?0.0)
>>Lower Right ( ? 15.0, ? 22.0)
>>Center ? ? ?( ? ?7.5, ? 11.0)
>>Band 1 Block=64x64 Type=Float32, ColorInterp=Undefined
>>? Description = Layer_1
>>? Minimum=379.197, Maximum=393.697, Mean=386.463, StdDev=3.071
>>? NoData Value=-9999
>>? Metadata:
>>? ? LAYER_TYPE=athematic
>>? ? STATISTICS_MAXIMUM=393.6969909668
>>? ? STATISTICS_MEAN=386.46261742001
>>? ? STATISTICS_MINIMUM=379.1969909668
>>? ? STATISTICS_STDDEV=3.0709672735453
>>
>>
>>
>>
>>
>>
>>What is wrong?. I tried with gdal 1.8 and 1.9 with hdf4 support.
>>
>>
>>
>>
>>Best regards.--
>>
>>
>>David Ortiz V.
>>
>>
>

-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120128/eaa8ca57/attachment-0001.html
From etourigny.dev at gmail.com  Sun Jan 29 15:40:21 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun Jan 29 15:41:05 2012
Subject: [gdal-dev] Problem with reading OziExplorer .map world files
In-Reply-To: <1327786898860-4346806.post@n6.nabble.com>
References: <1327786898860-4346806.post@n6.nabble.com>
Message-ID: <CA+TxYvOGNxTt2kyj_-1=i7iv0qwhs8N2i-gQnObVemNn9NKT6A@mail.gmail.com>

does gdalinfo work with the file(s) in question? Is the appropriate
driver built into your gdal installation (try gdalinfo --formats)?

Etienne

On Sat, Jan 28, 2012 at 7:41 PM, AksakTimur <timchab@yahoo.com> wrote:
> Hey,
>
> I'm new to GDAL and I have a problem when I try to open a raster file with a
> .map worldfile(OziExplorer Map Data File):
>
> ...
> double AdfGeoTransform[6];
>
> pDataset->GetGeoTransform( AdfGeoTransform ) *returs CE_Failure!*
> ...
>
> Also, I've tried GDALLoadOziMapFile(..) and GDALReadOziMapFile(...):
>
> CString sMapFile = sFileName.Left(sFileName.GetLength() - 3)+_T("map");
>
> const char* pszFileName = CStringToCharUTF8(sMapFile );
> char* ? ? pszWKT;
> int ? ? ? nGCPCount;
> GDAL_GCP* pasGCPs;
>
> double AdfGeoTransform[6];
>
> //GDALLoadOziMapFile(pszFileName , AdfGeoTransform
> ,&pszWKT,&nGCPCount,&pasGCPs);
> GDALReadOziMapFile(pszFileName , AdfGeoTransform
> ,&pszWKT,&nGCPCount,&pasGCPs);
>
> I get ?:
>
> pszWKT = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]]
>
> nGCPCount = 1;
>
> but AdfGeoTransform[0] =-1.#QNAN00000000000, etc.
>
> I've tried a number of different .map worldfiles. Didn't work.
> May be there is no support for .map worldfiles?
> Any idea what' s wrong?
>
> Regards
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Problem-with-reading-OziExplorer-map-world-files-tp4346806p4346806.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From timchab at yahoo.com  Sun Jan 29 16:19:00 2012
From: timchab at yahoo.com (AksakTimur)
Date: Sun Jan 29 16:19:20 2012
Subject: [gdal-dev] Re: Problem with reading OziExplorer .map world files
In-Reply-To: <CA+TxYvOGNxTt2kyj_-1=i7iv0qwhs8N2i-gQnObVemNn9NKT6A@mail.gmail.com>
References: <1327786898860-4346806.post@n6.nabble.com>
	<CA+TxYvOGNxTt2kyj_-1=i7iv0qwhs8N2i-gQnObVemNn9NKT6A@mail.gmail.com>
Message-ID: <1327871940798-4349081.post@n6.nabble.com>

Yes, the files that I try to open are jpgs and bmps.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Problem-with-reading-OziExplorer-map-world-files-tp4346806p4349081.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From zhenchen17 at gmail.com  Mon Jan 30 01:53:31 2012
From: zhenchen17 at gmail.com (chen zhen)
Date: Mon Jan 30 01:53:49 2012
Subject: [gdal-dev] Building Improvment for Ingres driver in Windows
Message-ID: <!&!AAAAAAAAAAAYAAAAAAAAACB7n0ju325JjVt71UKe9THCgAAAEAAAAMN+wseAPN9Ev+tBaimGlj0BAAAAAA==@gmail.com>

Hi all,

It is great to know the Ingres driver pulled from SVN has been compiled successfully.

However it is not flexible enough or in other word, a little improvement should be applied:

1. One switch for turn on/off the Ingres definition. Currently by uncomment several definitions in nmake.opt is a little complex. Also the header files and library files directories must be specified by hand. After Installing the Ingres database, the locations of this file are fixed. It would be better to set the default path related to a variable such as $(ING_HOME). ING_HOME variable could be set to II_SYSTEM previously and let it detected automatically. If the ING_HOME is set, then Ingres driver will be involved.

# nmake.opt
---------------------------------------------------------------------
   # INGRES Libraries
   # Uncomment the following to enable Ingres format.
   # INGRES_HOME = $(II_SYSTEM)
   !ifdef INGRES_HOME
   INGRES_INC_DIR = $(INGRES_DIR)\files
   INGRES_LIB = $(INGRES_DIR)\lib\iilibapi.lib \
??$(INGRES_DIR)\lib\iilibutil.lib \
 $(INGRES_DIR)\lib\libingres.lib
   !endif
 
2. Building Ingres driver as a plugin library. It is not necessary but provides more flexibility especially for Ingres that needs a number of dependent libraries.
The Ingres_Plgin flag is set to check which mode would it be. 
??
??# nmake.opt
??---------------------------------------------------------------------
??# INGRES Libraries
??# Uncomment the following to enable Ingres format.
??# INGRES_HOME = $(II_SYSTEM)
??# Uncomment the following if you prefer to build Ingres support as a plugin.
??# INGRES_PLUGIN = YES
??!ifdef INGRES_HOME
??INGRES_INC_DIR = $(INGRES_DIR)\files
??INGRES_LIB = $(INGRES_DIR)\lib\iilibapi.lib \
??$(INGRES_DIR)\lib\iilibutil.lib \
??$(INGRES_DIR)\lib\libingres.lib
 !endif


Any idea?

zhen

From jrepetto at free.fr  Mon Jan 30 02:15:32 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Jan 30 02:16:12 2012
Subject: [gdal-dev] Problem with reading OziExplorer .map world files
In-Reply-To: <1327786898860-4346806.post@n6.nabble.com>
References: <1327786898860-4346806.post@n6.nabble.com>
Message-ID: <4F264394.5030308@free.fr>

On 01/28/12 22:41, AksakTimur wrote:
> Hey,
>
> I'm new to GDAL and I have a problem when I try to open a raster file with a
> .map worldfile(OziExplorer Map Data File):

Hello,
Can you post the .map file ?


From jukka.rahkonen at mmmtike.fi  Mon Jan 30 02:22:40 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Jan 30 02:38:04 2012
Subject: [gdal-dev] Re: Problem with reading OziExplorer .map world files
References: <1327786898860-4346806.post@n6.nabble.com>
	<CA+TxYvOGNxTt2kyj_-1=i7iv0qwhs8N2i-gQnObVemNn9NKT6A@mail.gmail.com>
	<1327871940798-4349081.post@n6.nabble.com>
Message-ID: <loom.20120130T081830-836@post.gmane.org>

AksakTimur <timchab <at> yahoo.com> writes:

> 
> Yes, the files that I try to open are jpgs and bmps.
> 
> --
> View this message in context:
http://osgeo-org.1560.n6.nabble.com/Problem-with-reading-OziExplorer-map-world-files-tp4346806p4349081.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> 

Hi,

I would guess that GDAL does not support .map files generally but only with the
OZF file format. http://gdal.org/frmt_ozi.html

You can have a try by converting a test image to OZF format with the Oziexploret
Image to Ozf tool. Perhaps GDAL finds georeferencing then.

-Jukka Rahkonen-

From polimax at mail.ru  Mon Jan 30 02:46:30 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Mon Jan 30 02:47:09 2012
Subject: [gdal-dev] Building Improvment for Ingres driver in Windows
In-Reply-To: <!&!AAAAAAAAAAAYAAAAAAAAACB7n0ju325JjVt71UKe9THCgAAAEAAAAMN+wseAPN9Ev+tBaimGlj0BAAAAAA==@gmail.com>
References: <!&!AAAAAAAAAAAYAAAAAAAAACB7n0ju325JjVt71UKe9THCgAAAEAAAAMN+wseAPN9Ev+tBaimGlj0BAAAAAA==@gmail.com>
Message-ID: <4F264AD6.60306@mail.ru>

30.01.2012 10:53, chen zhen ?????:
> Hi all,
>
> It is great to know the Ingres driver pulled from SVN has been compiled successfully.
>
> However it is not flexible enough or in other word, a little improvement should be applied:
>
> 1. One switch for turn on/off the Ingres definition. Currently by uncomment several definitions in nmake.opt is a little complex. Also the header files and library files directories must be specified by hand. After Installing the Ingres database, the locations of this file are fixed. It would be better to set the default path related to a variable such as $(ING_HOME). ING_HOME variable could be set to II_SYSTEM previously and let it detected automatically. If the ING_HOME is set, then Ingres driver will be involved.
>
> # nmake.opt
> ---------------------------------------------------------------------
>     # INGRES Libraries
>     # Uncomment the following to enable Ingres format.
>     # INGRES_HOME = $(II_SYSTEM)
>     !ifdef INGRES_HOME
>     INGRES_INC_DIR = $(INGRES_DIR)\files
>     INGRES_LIB = $(INGRES_DIR)\lib\iilibapi.lib \
> ??$(INGRES_DIR)\lib\iilibutil.lib \
>   $(INGRES_DIR)\lib\libingres.lib
>     !endif
>
> 2. Building Ingres driver as a plugin library. It is not necessary but provides more flexibility especially for Ingres that needs a number of dependent libraries.
> The Ingres_Plgin flag is set to check which mode would it be.
> ??
> ??# nmake.opt
> ??---------------------------------------------------------------------
> ??# INGRES Libraries
> ??# Uncomment the following to enable Ingres format.
> ??# INGRES_HOME = $(II_SYSTEM)
> ??# Uncomment the following if you prefer to build Ingres support as a plugin.
> ??# INGRES_PLUGIN = YES
> ??!ifdef INGRES_HOME
> ??INGRES_INC_DIR = $(INGRES_DIR)\files
> ??INGRES_LIB = $(INGRES_DIR)\lib\iilibapi.lib \
> ??$(INGRES_DIR)\lib\iilibutil.lib \
> ??$(INGRES_DIR)\lib\libingres.lib
>   !endif
>
>
> Any idea?
>
> zhen
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
By my opinion, the cmake will more flexible in path searching and 
setting all necessary definitions.
I'm playing with cmake building of gdal (but not final version yet). 
What do you think about cmake building of GDAL?

Best regards,
   Dmitry
From tyler.mitchell at actian.com  Mon Jan 30 03:03:21 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Mon Jan 30 03:04:09 2012
Subject: [gdal-dev] Building Improvment for Ingres driver in Windows
In-Reply-To: <4F264AD6.60306@mail.ru>
References: <!&!AAAAAAAAAAAYAAAAAAAAACB7n0ju325JjVt71UKe9THCgAAAEAAAAMN+wseAPN9Ev+tBaimGlj0BAAAAAA==@gmail.com>
	<4F264AD6.60306@mail.ru>
Message-ID: <453A1FA0-5AE5-481C-8125-EB8B5618EB12@actian.com>

On 2012-01-29, at 11:46 PM, Dmitry Baryshnikov wrote:

> By my opinion, the cmake will more flexible in path searching and setting all necessary definitions.
> I'm playing with cmake building of gdal (but not final version yet). What do you think about cmake building of GDAL?

I enjoy using cmake on other projects but haven't used it before on Windows.  Are you thinking of cmake for GDAL on Windows?

Thanks for the ideas, both of you, keep them coming and I encourage anyone with thoughts to speak up :)

Tyler
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120130/f352b09f/attachment.html
From polimax at mail.ru  Mon Jan 30 03:20:04 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Mon Jan 30 03:20:56 2012
Subject: [gdal-dev] Building Improvment for Ingres driver in Windows
In-Reply-To: <453A1FA0-5AE5-481C-8125-EB8B5618EB12@actian.com>
References: <!&!AAAAAAAAAAAYAAAAAAAAACB7n0ju325JjVt71UKe9THCgAAAEAAAAMN+wseAPN9Ev+tBaimGlj0BAAAAAA==@gmail.com>
	<4F264AD6.60306@mail.ru>
	<453A1FA0-5AE5-481C-8125-EB8B5618EB12@actian.com>
Message-ID: <4F2652B4.3010005@mail.ru>

30.01.2012 12:03, Tyler Mitchell ?????:
> On 2012-01-29, at 11:46 PM, Dmitry Baryshnikov wrote:
>
>> By my opinion, the cmake will more flexible in path searching and 
>> setting all necessary definitions.
>> I'm playing with cmake building of gdal (but not final version yet). 
>> What do you think about cmake building of GDAL?
>
> I enjoy using cmake on other projects but haven't used it before on 
> Windows.  Are you thinking of cmake for GDAL on Windows?
Yes I am. The cmake on Windows is rather simple and it has GUI. There 
are some problems of automatic dependency search, but anybody can set it 
via open file/folder dialogues.
>
> Thanks for the ideas, both of you, keep them coming and I encourage 
> anyone with thoughts to speak up :)
>
> Tyler
Best regards,
   Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120130/6e2827b8/attachment-0001.html
From jukka.rahkonen at mmmtike.fi  Mon Jan 30 04:28:17 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Jan 30 04:28:47 2012
Subject: [gdal-dev] What to do if JPEG2000 GML metadata is wrong?
Message-ID: <loom.20120130T101648-757@post.gmane.org>

Hi,

I received an JPEG2000 image which contains wrong georeferencing as embedded
GML. I know that origin in this
<gml:origin>
   <gml:Point gml:id="P0001" srsName="urn:ogc:def:crs:EPSG::3067">
     <gml:pos>320000.0000000000000 6953999.5000000000000</gml:pos>
   </gml:Point>
</gml:origin>
should actually be 320000.250 6953999.750

Does GDAL offer any means for correcting the metadata? Are there other open
source tools for this purpose?

-Jukka Rahkonen-

From jrepetto at free.fr  Mon Jan 30 04:33:25 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Jan 30 04:34:05 2012
Subject: [gdal-dev] Re: Problem with reading OziExplorer .map world files
In-Reply-To: <loom.20120130T081830-836@post.gmane.org>
References: <1327786898860-4346806.post@n6.nabble.com>
	<CA+TxYvOGNxTt2kyj_-1=i7iv0qwhs8N2i-gQnObVemNn9NKT6A@mail.gmail.com>
	<1327871940798-4349081.post@n6.nabble.com>
	<loom.20120130T081830-836@post.gmane.org>
Message-ID: <4F2663E5.3080804@free.fr>

Le 30/01/2012 08:22, Jukka Rahkonen a ?crit :
> AksakTimur<timchab<at>  yahoo.com>  writes:
>
>>
>> Yes, the files that I try to open are jpgs and bmps.
>
> I would guess that GDAL does not support .map files generally but only with the
> OZF file format. http://gdal.org/frmt_ozi.html

GDAL supports only Ozi .map files associated with GIF and OZF2/OZFx3 
image files.

I opened an enhancement ticket about this problem two years ago :
http://trac.osgeo.org/gdal/ticket/3380

To solve it, in late 2010 I started the implementation of a new GDAL 
driver, that would consider .map files not as calibration files, but as 
virtual raster files (since they contain the paths of the image files).
That way, the driver would support any raster format already supported 
by GDAL (JPEG, PNG, GIF, ECW, BSB, ...).

I planned to submit several small patches for inclusion of this driver 
in GDAL trunk. The first one has been sent in this ticket :
http://trac.osgeo.org/gdal/ticket/3929

Unfortunately, this patch is still waiting in Trac. I'll wait until it 
is accepted before continuing my work.

Jean-Claude
From jukka.rahkonen at mmmtike.fi  Mon Jan 30 05:13:34 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Jan 30 05:14:08 2012
Subject: [gdal-dev] Re: What to do if JPEG2000 GML metadata is wrong?
References: <loom.20120130T101648-757@post.gmane.org>
Message-ID: <loom.20120130T105116-166@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:
> Hi,
> 
> I received an JPEG2000 image which contains wrong georeferencing as 
embedded
> GML. I know that origin in this
> <gml:origin>
>    <gml:Point gml:id="P0001" srsName="urn:ogc:def:crs:EPSG::3067">
>      <gml:pos>320000.0000000000000 6953999.5000000000000</gml:pos>
>    </gml:Point>
> </gml:origin>
> should actually be 320000.250 6953999.750
> 
> Does GDAL offer any means for correcting the metadata? Are there other open
> source tools for this purpose?

Andrew Brooks suggested to use a binary/hex editor and it worked perfectly
for me in this case. Metadata is correct and the image itself remained 
readable.

GDAL has five different JPEG2000 drivers. Do they have any common 
georeferencing metadata format which they all could read and write, 
and also have a common interpretation about how it is done correctly?
By a quick look it seems that not all of them can write GeoJP2
nor OGC-GML and perhaps not even world files.

-Jukka Rahkonen-

From jukka.rahkonen at mmmtike.fi  Mon Jan 30 06:39:10 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Jan 30 06:40:11 2012
Subject: [gdal-dev] Create GMLJP2 metadata option for JPEG2000 drivers?
Message-ID: <loom.20120130T123013-434@post.gmane.org>

Hi,

It might be good to have a common option for all GDAL JPEG2000 drivers for
writing out the GMLJP2 style metadata into external GML file. There seems to be
a free special tool from j2k-codec which can add GML box into existing JPEG2000
file [1] and perhaps some day GDAL will have a similar tool.

[1] http://www.j2k-codec.com/mde.html

-Jukka Rahkonen-

From alfreale74 at gmail.com  Mon Jan 30 08:28:19 2012
From: alfreale74 at gmail.com (Alfredo Alessandrini)
Date: Mon Jan 30 08:28:29 2012
Subject: [gdal-dev] plate caree and EPSG:4326
Message-ID: <1327930099451-4350647.post@n6.nabble.com>

Hi,

I'm trying to reproject the VGT-P product with the gdal libraries.

The metafile is reported below.

It's right to assume the EPSG 4326 code as source spatial reference set? 


Thanks,

Alfredo


MAP_PROJ_NAME             PLATE_CARREE_1KMG nom provisoirement egal au code
MAP_PROJ_FAMILY           UNPROJECTED
MAP_PROJ_CODE             PLATE_CARREE_1KMG
MAP_PROJ_UNIT             DEGREES
MAP_PROJ_RESOLUTION       0.0089285714
GEODETIC_SYST_NAME        WGS 1984
GEODETIC_SYST_CODE        WG84
HORIZ_DATUM               WGS 1984
MERIDIAN_NAME             GREENWICH
MERIDIAN_ORIGIN           +000.000
SPHEROID_NAME             WGS 1984
SPHEROID_SEMI_MAJ_AXIS    6378137.000
SPHEROID_SEMI_MIN_AXIS    6356752.314
CARTO_UPPER_LEFT_X          91.267857
CARTO_UPPER_LEFT_Y          72.232143
CARTO_UPPER_RIGHT_X        154.160714
CARTO_UPPER_RIGHT_Y         72.232143
CARTO_LOWER_RIGHT_X        154.160714
CARTO_LOWER_RIGHT_Y         -8.241071
CARTO_LOWER_LEFT_X          91.267857
CARTO_LOWER_LEFT_Y          -8.241071


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/plate-caree-and-EPSG-4326-tp4350647p4350647.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jgomezdans at gmail.com  Mon Jan 30 09:05:54 2012
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Mon Jan 30 09:06:34 2012
Subject: [gdal-dev] plate caree and EPSG:4326
In-Reply-To: <1327930099451-4350647.post@n6.nabble.com>
References: <1327930099451-4350647.post@n6.nabble.com>
Message-ID: <CAMWde5rwHFMytJKp0UPFdkyC9RBB0h0sqi9K8GDwqGCf6WXczg@mail.gmail.com>

Hi



On 30 January 2012 13:28, Alfredo Alessandrini <alfreale74@gmail.com> wrote:

> Hi,
>
> I'm trying to reproject the VGT-P product with the gdal libraries.
> It's right to assume the EPSG 4326 code as source spatial reference set?


I don't think they are the same. Plate Carree is an equidistance
cylindrical projection. I used a different EPSG (32662) for this same data
with success, although it shows are "deprecated"...:
http://spatialreference.org/ref/epsg/32662/

Hope that helps
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120130/bae36aa5/attachment.html
From jrepetto at free.fr  Mon Jan 30 09:18:19 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Jan 30 09:18:53 2012
Subject: [gdal-dev] plate caree and EPSG:4326
In-Reply-To: <1327930099451-4350647.post@n6.nabble.com>
References: <1327930099451-4350647.post@n6.nabble.com>
Message-ID: <4F26A6AB.3030005@free.fr>

Le 30/01/2012 14:28, Alfredo Alessandrini a ?crit :
> Hi,
>
> I'm trying to reproject the VGT-P product with the gdal libraries.
>
> The metafile is reported below.
>
> It's right to assume the EPSG 4326 code as source spatial reference set?
>

Yes, I think so. But it is not a Plate Carr?e projection, since the 
units would have been meters, not degrees. It is sometimes called 
"Geodetic Projection" (see http://www.dme.nt.gov.au/IWSDoc/html/295.htm ).

Jean-Claude
From jrepetto at free.fr  Mon Jan 30 09:18:41 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Jan 30 09:19:14 2012
Subject: [gdal-dev] plate caree and EPSG:4326
In-Reply-To: <CAMWde5rwHFMytJKp0UPFdkyC9RBB0h0sqi9K8GDwqGCf6WXczg@mail.gmail.com>
References: <1327930099451-4350647.post@n6.nabble.com>
	<CAMWde5rwHFMytJKp0UPFdkyC9RBB0h0sqi9K8GDwqGCf6WXczg@mail.gmail.com>
Message-ID: <4F26A6C1.4080003@free.fr>

Le 30/01/2012 15:05, Jose Gomez-Dans a ?crit :
>
> I don't think they are the same. Plate Carree is an equidistance
> cylindrical projection. I used a different EPSG (32662) for this same
> data with success, although it shows are "deprecated"...:
> http://spatialreference.org/ref/epsg/32662/
>
> Jose
>

spatialreference.org says it has been replaced by EPSG:32663 .

From jmckenna at gatewaygeomatics.com  Mon Jan 30 09:22:38 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon Jan 30 09:23:16 2012
Subject: [gdal-dev] Building Improvment for Ingres driver in Windows
In-Reply-To: <4F2652B4.3010005@mail.ru>
References: <!&!AAAAAAAAAAAYAAAAAAAAACB7n0ju325JjVt71UKe9THCgAAAEAAAAMN+wseAPN9Ev+tBaimGlj0BAAAAAA==@gmail.com>
	<4F264AD6.60306@mail.ru>
	<453A1FA0-5AE5-481C-8125-EB8B5618EB12@actian.com>
	<4F2652B4.3010005@mail.ru>
Message-ID: <4F26A7AE.5040809@gatewaygeomatics.com>

As you all travel down this path, I think it's important to document the 
Windows build steps on the GDAL wiki: http://trac.osgeo.org/gdal/wiki/Ingres

Thank you!

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From hobu.inc at gmail.com  Mon Jan 30 09:25:56 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon Jan 30 09:26:48 2012
Subject: [gdal-dev] CMake for GDAL (was: Building Improvment for Ingres
	driver in Windows)
In-Reply-To: <4F2652B4.3010005@mail.ru>
References: <!&!AAAAAAAAAAAYAAAAAAAAACB7n0ju325JjVt71UKe9THCgAAAEAAAAMN+wseAPN9Ev+tBaimGlj0BAAAAAA==@gmail.com>
	<4F264AD6.60306@mail.ru>
	<453A1FA0-5AE5-481C-8125-EB8B5618EB12@actian.com>
	<4F2652B4.3010005@mail.ru>
Message-ID: <142F4B05-047F-4690-95EE-2A47E5708CB5@gmail.com>


On Jan 30, 2012, at 2:20 AM, Dmitry Baryshnikov wrote:

> 30.01.2012 12:03, Tyler Mitchell ?????:
>> On 2012-01-29, at 11:46 PM, Dmitry Baryshnikov wrote:
>> 
>>> By my opinion, the cmake will more flexible in path searching and setting all necessary definitions.
>>> I'm playing with cmake building of gdal (but not final version yet). What do you think about cmake building of GDAL?
>> 
>> I enjoy using cmake on other projects but haven't used it before on Windows.  Are you thinking of cmake for GDAL on Windows?
> Yes I am. The cmake on Windows is rather simple and it has GUI. There are some problems of automatic dependency search, but anybody can set it via open file/folder dialogues.
>> 
>> Thanks for the ideas, both of you, keep them coming and I encourage anyone with thoughts to speak up :)
>> 
>> Tyler

All,

A CMake configuration for GDAL is underway, but I do not know its current status at this time, however.  Jayesh, is there any chance you can give an update of where things on this effort are at, and is it ready for volunteers to start testing and stretching it out more?

Howard

From alfreale74 at gmail.com  Mon Jan 30 09:19:43 2012
From: alfreale74 at gmail.com (Alfredo Alessandrini)
Date: Mon Jan 30 09:27:56 2012
Subject: [gdal-dev] plate caree and EPSG:4326
In-Reply-To: <CAMWde5rwHFMytJKp0UPFdkyC9RBB0h0sqi9K8GDwqGCf6WXczg@mail.gmail.com>
References: <1327930099451-4350647.post@n6.nabble.com>
	<CAMWde5rwHFMytJKp0UPFdkyC9RBB0h0sqi9K8GDwqGCf6WXczg@mail.gmail.com>
Message-ID: <CA+GC7G4f+7TXvG0oC57u_HHbkgc+j9DJAyiEvypm6ed68rnGDg@mail.gmail.com>

Hi,

the EPSG (32662) code is projected and in meters. But my metafile is
in degrees.


Alfredo

2012/1/30 Jose Gomez-Dans <jgomezdans@gmail.com>:
> Hi
>
>
>
> On 30 January 2012 13:28, Alfredo Alessandrini <alfreale74@gmail.com> wrote:
>>
>> Hi,
>>
>> I'm trying to reproject the VGT-P product with the gdal libraries.
>> It's right to assume the EPSG 4326 code as source spatial reference set?
>
>
> I don't think they are the same. Plate Carree is an equidistance cylindrical
> projection. I used a different EPSG (32662) for this same data with success,
> although it shows are "deprecated"...:
> http://spatialreference.org/ref/epsg/32662/
>
> Hope that helps
> Jose
From jukka.rahkonen at mmmtike.fi  Mon Jan 30 09:46:24 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Jan 30 09:46:52 2012
Subject: [gdal-dev] What to do if source data has already ogc_fid?
Message-ID: <loom.20120130T154213-3@post.gmane.org>

Hi,

What to do for avoiding this error when reading data from WFS into Spatialite?
Using -preserve_fid was the only thing that came into my mind but it did not
help. I am not sure if this error is critical, though.

ogr2ogr -f SQLite -dsco spatialite=yes -preserve_fid -dsco init_with_epsg=yes
-nln tilastoalupisteet -nlt point  uusi_spatialite.sqlite 
WFS:http://hip.latuviitta.org/cgi-bin/tinyows lv:pks_tilastoalue_piste

ERROR 1: Failed to add field ogc_fid to table tilastoalupisteet:
 duplicate column name: ogc_fid

-Jukka Rahkonen-

From Tyler.Mitchell at actian.com  Mon Jan 30 12:52:18 2012
From: Tyler.Mitchell at actian.com (Tyler Mitchell)
Date: Mon Jan 30 12:52:38 2012
Subject: [gdal-dev] Building Improvment for Ingres driver in Windows
In-Reply-To: <4F26A7AE.5040809@gatewaygeomatics.com>
References: <!&!AAAAAAAAAAAYAAAAAAAAACB7n0ju325JjVt71UKe9THCgAAAEAAAAMN+wseAPN9Ev+tBaimGlj0BAAAAAA==@gmail.com>
	<4F264AD6.60306@mail.ru>
	<453A1FA0-5AE5-481C-8125-EB8B5618EB12@actian.com>
	<4F2652B4.3010005@mail.ru> <4F26A7AE.5040809@gatewaygeomatics.com>
Message-ID: <CA7CE42E-E96D-40F6-BD14-DFF3B8467C04@actian.com>

Hi Jeff,

Good point, will do - fortunately we don't doing any magic :)  I'll definitely get that updated though!

Thanks,
Tyler

On 2012-01-30, at 6:22 AM, Jeff McKenna wrote:

> As you all travel down this path, I think it's important to document the Windows build steps on the GDAL wiki: http://trac.osgeo.org/gdal/wiki/Ingres
> 
> Thank you!
> 
> -jeff
> 
> 
> 
> 
> -- 
> Jeff McKenna
> MapServer Consulting and Training Services
> http://www.gatewaygeomatics.com/
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



Tyler Mitchell
Engineering Director 
Actian Corporation
tyler.mitchell@actian.com

MOBILE 250-303-1831
SKYPE spatialguru
www.actian.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120130/4035e9db/attachment.html
From mathuin at gmail.com  Mon Jan 30 16:17:16 2012
From: mathuin at gmail.com (John Twilley)
Date: Mon Jan 30 16:18:01 2012
Subject: [gdal-dev] gdalbuildvrt changes data when building VRT
Message-ID: <CAEUMa-cTFG1xQYrJmUmM5Dnow9mRUeiGZD2OC86dAS67smBXUg@mail.gmail.com>

I'm using gdalbuildvrt as a simple way to merge adjoining data files.
Unfortunately, I'm noticing that some values change.  I've created a
simple test case where I make a VRT from a single GeoTIFF and compare
histograms before and after, and I've attached it to this message.
Can someone tell me why this is happening and how to avoid it?
Thanks!

Jack.
--
mathuin at gmail dot com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: typescript
Type: application/octet-stream
Size: 5298 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120130/b4d887f9/typescript.obj
From Tyler.Mitchell at actian.com  Mon Jan 30 20:00:20 2012
From: Tyler.Mitchell at actian.com (Tyler Mitchell)
Date: Mon Jan 30 20:00:39 2012
Subject: [gdal-dev] Re: Building Improvment for Ingres driver in Windows
In-Reply-To: <!&!AAAAAAAAAAAYAAAAAAAAACB7n0ju325JjVt71UKe9THCgAAAEAAAAMN+wseAPN9Ev+tBaimGlj0BAAAAAA==@gmail.com>
References: <!&!AAAAAAAAAAAYAAAAAAAAACB7n0ju325JjVt71UKe9THCgAAAEAAAAMN+wseAPN9Ev+tBaimGlj0BAAAAAA==@gmail.com>
Message-ID: <9B3E31AF-5FB6-4526-8F42-A80A6C3F15C2@actian.com>


On 2012-01-29, at 10:53 PM, chen zhen wrote:

> 1. One switch for turn on/off the Ingres definition.
> 
> 2. Building Ingres driver as a plugin library. 

I certainly like both suggestions and I see many formats are built using #1
and several with #2. 

Frank et al, do you have an opinion about an improved approach we could
consider taking?

Tyler
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120130/32ba9afc/attachment.html
From warmerdam at pobox.com  Mon Jan 30 20:23:18 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 30 20:24:06 2012
Subject: [gdal-dev] gdalbuildvrt changes data when building VRT
In-Reply-To: <CAEUMa-cTFG1xQYrJmUmM5Dnow9mRUeiGZD2OC86dAS67smBXUg@mail.gmail.com>
References: <CAEUMa-cTFG1xQYrJmUmM5Dnow9mRUeiGZD2OC86dAS67smBXUg@mail.gmail.com>
Message-ID: <CA+YzLBdip-vnHsDqWw2KgjDEKMRcyiQg9NZfqNZKa9kDH7e-7g@mail.gmail.com>

On Mon, Jan 30, 2012 at 1:17 PM, John Twilley <mathuin@gmail.com> wrote:
> I'm using gdalbuildvrt as a simple way to merge adjoining data files.
> Unfortunately, I'm noticing that some values change. ?I've created a
> simple test case where I make a VRT from a single GeoTIFF and compare
> histograms before and after, and I've attached it to this message.
> Can someone tell me why this is happening and how to avoid it?
> Thanks!

John,

It looks like your source TIFF file was generated by gdal_translate
on an HDF file (or perhaps it has an .aux or .aux.xml file associated
with it) and thus it has "built in" knowledge of the histogram which is
getting used whether it reflects the reality of the image or not.

This sort of histogram and statistics metadata is not copied to the
VRT by gdalcreatevrt so a request for it ends up in recomputing from
the imagery data.  I'd assume then that the information from the
destination file are right, and the source is wrong though it is hard
to confirm this without having the imagery at hand to test.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From Christopher.Pouliot at state.mn.us  Tue Jan 31 06:52:26 2012
From: Christopher.Pouliot at state.mn.us (Pouliot, Christopher (DNR))
Date: Tue Jan 31 06:52:36 2012
Subject: [gdal-dev] writing encoding into GPX files
Message-ID: <074A014435F2E543B1FD97E729C76E4D06372E@055-CH1MPN1-013.055d.mgd.msft.net>

Hello all,

I'm writing GPX files with OGR and the documentation states:  "The content returned by OGR will be encoded in UTF-8, after the conversion from the encoding mentionned in the file header is."

When my GPX file is written out it does not include the  encoding="UTF-8" in the head tag.  Is there a way to have it be written?
This is what I get:  <?xml version="1.0"?>
This is what I'd like:  <?xml version="1.0" encoding="UTF-8"?>

I'm using GPSBabel to upload these GPX files to GPS units and it is not reading my GPX files unless the encoding is specified.

Thanks!

Chris

Chris Pouliot
GIS Application Developer
Minnesota Department of Natural Resources
christopher.pouliot@state.mn.us
(651) 259-5491

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120131/0ed48def/attachment-0001.html
From aperi2007 at gmail.com  Tue Jan 31 07:54:18 2012
From: aperi2007 at gmail.com (Andrea Peri)
Date: Tue Jan 31 07:54:24 2012
Subject: [gdal-dev] read a catalog is slower then directly the raster ?
Message-ID: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>

Hi,
using qgis I notice that it is more slow to open some raster from a
catalog.vrt rather than opening the same raster directly.
The slow is so big that when the catalog has many raster qgis take many
time to open the catalog.

Because qgis use gdal to read raster and also to read a catalog.
I guess this is not an issue for qgis. But is a question of gdal.

Before to start to do some test I like to know if there is some know issue
on this.

Thx,

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120131/14b3425a/attachment.html
From zoltans at geograph.co.za  Tue Jan 31 08:46:33 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Tue Jan 31 09:02:24 2012
Subject: [gdal-dev] ogr to convert 3D to 2D with height as attribute
Message-ID: <4F27F0B9.1010901@geograph.co.za>

Hi,
I've got a few 3D DGN files that wont successfully read into a 
proprietary GIS prog, but do read into QGIS (ie: ogr sub-engine) 
successfully.
I have tried using ogr to convert the DGN to a DXF file, but that also 
fails to import into this GIS package.

I could write something to  pick through the DXF file, but I wouldn't 
want to re-invent the wheel.......

The DGN (hence also the qgis DXF) contains 3D lines. All I need is the 
line level and colour numbers, and all the vertice XYZ values as line 
strings.


TIA,
Zoltan

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

From polimax at mail.ru  Tue Jan 31 09:14:51 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Tue Jan 31 09:15:07 2012
Subject: [gdal-dev] read a catalog is slower then directly the raster
 ?
In-Reply-To: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>
References: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>
Message-ID: <4F27F75B.5020405@mail.ru>

31.01.2012 16:54, Andrea Peri ?????:
> Hi,
> using qgis I notice that it is more slow to open some raster from a 
> catalog.vrt rather than opening the same raster directly.
> The slow is so big that when the catalog has many raster qgis take 
> many time to open the catalog.
>
> Because qgis use gdal to read raster and also to read a catalog.
> I guess this is not an issue for qgis. But is a question of gdal.
>
> Before to start to do some test I like to know if there is some know 
> issue on this.
>
> Thx,
>
> -- 
> -----------------
> Andrea Peri
> . . . . . . . . .
> qwerty ?????
> -----------------
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
I think this bug are mentioned in such tickets 
http://trac.osgeo.org/gdal/ticket/2076 and 
http://trac.osgeo.org/gdal/ticket/3482
QGIS more slow because it warp image (if it from VRT or have some 
rotation in meta and etc.) and have no overviews. You can see if image 
is warped in layer properties metadata tab -> driver.

Best regards,
     Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120131/a0cde3d9/attachment.html
From even.rouault at mines-paris.org  Tue Jan 31 09:29:11 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 31 09:29:24 2012
Subject: [gdal-dev] writing encoding into GPX files
In-Reply-To: <074A014435F2E543B1FD97E729C76E4D06372E@055-CH1MPN1-013.055d.mgd.msft.net>
References: <074A014435F2E543B1FD97E729C76E4D06372E@055-CH1MPN1-013.055d.mgd.msft.net>
Message-ID: <1328020151.4f27fab7a9809@imp.free.fr>

Selon "Pouliot, Christopher (DNR)" <Christopher.Pouliot@state.mn.us>:

> Hello all,
>
> I'm writing GPX files with OGR and the documentation states:  "The content
> returned by OGR will be encoded in UTF-8, after the conversion from the
> encoding mentionned in the file header is."

Note that the quoted sentence mentions what happens when reading a GPX file.
Here you are interested by the writing part of the driver, for which the doc
also says "When writing a GPX file, the driver expects UTF-8 content to be
passed in." ;-)

>
> When my GPX file is written out it does not include the  encoding="UTF-8" in
> the head tag.  Is there a way to have it be written?

Short answer : no. Longer answer below.

> This is what I get:  <?xml version="1.0"?>
> This is what I'd like:  <?xml version="1.0" encoding="UTF-8"?>
>
> I'm using GPSBabel to upload these GPX files to GPS units and it is not
> reading my GPX files unless the encoding is specified.

My understanding of http://www.w3.org/TR/REC-xml/#NT-EncodingDecl and
particularly the following sentence ("""In the absence of information provided
by an external transport protocol (e.g. HTTP or MIME), it is a fatal error for
an entity including an encoding declaration to be presented to the XML processor
in an encoding other than that named in the declaration, or for an entity which
begins with neither a Byte Order Mark nor an encoding declaration to use an
encoding other than UTF-8.""") is that if encoding is not specified then the
encoding is assumed to be UTF-8.

So if my understanding of the spec is correct, I'd suggest you to file :
- one ticket for GPSBabel so that it can accepts the files without the encoding
attribute,
- and an enhancement ticket in GDAL Trac so that it explicitely writes the UTF-8
encoding to avoid ambiguities.

In the meantime, you text editor is your best friend.


>
> Thanks!
>
> Chris
>
> Chris Pouliot
> GIS Application Developer
> Minnesota Department of Natural Resources
> christopher.pouliot@state.mn.us
> (651) 259-5491
>
>




a
From even.rouault at mines-paris.org  Tue Jan 31 09:32:23 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 31 09:32:49 2012
Subject: [gdal-dev] read a catalog is slower then directly the raster ?
In-Reply-To: <4F27F75B.5020405@mail.ru>
References: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>
	<4F27F75B.5020405@mail.ru>
Message-ID: <1328020343.4f27fb77ba632@imp.free.fr>

Selon Dmitry Baryshnikov <polimax@mail.ru>:

> 31.01.2012 16:54, Andrea Peri ?????:
> > Hi,
> > using qgis I notice that it is more slow to open some raster from a
> > catalog.vrt rather than opening the same raster directly.
> > The slow is so big that when the catalog has many raster qgis take
> > many time to open the catalog.
> >
> > Because qgis use gdal to read raster and also to read a catalog.
> > I guess this is not an issue for qgis. But is a question of gdal.
> >
> > Before to start to do some test I like to know if there is some know
> > issue on this.

> I think this bug are mentioned in such tickets
> http://trac.osgeo.org/gdal/ticket/2076 and
> http://trac.osgeo.org/gdal/ticket/3482
> QGIS more slow because it warp image (if it from VRT or have some
> rotation in meta and etc.) and have no overviews. You can see if image
> is warped in layer properties metadata tab -> driver.

Yes that's one possibility. A more pragmatic way would be to run qgis under
GDB/DDD, and when it is stuck, Ctrl+C to see in which GDAL function it is
stuck... That should give some hints.

>
> Best regards,
>      Dmitry
>


From polimax at mail.ru  Tue Jan 31 10:10:10 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Tue Jan 31 10:10:50 2012
Subject: [gdal-dev] read a catalog is slower then directly the raster
 ?
In-Reply-To: <1328020343.4f27fb77ba632@imp.free.fr>
References: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>
	<4F27F75B.5020405@mail.ru> <1328020343.4f27fb77ba632@imp.free.fr>
Message-ID: <4F280452.2090806@mail.ru>

31.01.2012 18:32, Even Rouault ?????:
> Selon Dmitry Baryshnikov<polimax@mail.ru>:
>
>> 31.01.2012 16:54, Andrea Peri ?????:
>>> Hi,
>>> using qgis I notice that it is more slow to open some raster from a
>>> catalog.vrt rather than opening the same raster directly.
>>> The slow is so big that when the catalog has many raster qgis take
>>> many time to open the catalog.
>>>
>>> Because qgis use gdal to read raster and also to read a catalog.
>>> I guess this is not an issue for qgis. But is a question of gdal.
>>>
>>> Before to start to do some test I like to know if there is some know
>>> issue on this.
>> I think this bug are mentioned in such tickets
>> http://trac.osgeo.org/gdal/ticket/2076 and
>> http://trac.osgeo.org/gdal/ticket/3482
>> QGIS more slow because it warp image (if it from VRT or have some
>> rotation in meta and etc.) and have no overviews. You can see if image
>> is warped in layer properties metadata tab ->  driver.
> Yes that's one possibility. A more pragmatic way would be to run qgis under
> GDB/DDD, and when it is stuck, Ctrl+C to see in which GDAL function it is
> stuck... That should give some hints.
>
>> Best regards,
>>       Dmitry
>>
>
>
>
Hi, Even

I faced this problem before. I checked under debugger and saw that vrt 
sources were not creating overviews. So, gdal was making long RasterIO 
executions to the source raster, but not overviews. I provided a patch 
which took the overviews from origin raster and wrapped them too. May be 
this is not so elegant solution, but it works and speed up work with 
wrapped rasters considerably.

I don't thik that qgis under GDB/DDD will give any additional 
information (one will just see long RasterIO executions).

But I can still try to use GDB if you think this might help.

Best regards,
Dmitry
From even.rouault at mines-paris.org  Tue Jan 31 10:20:21 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 31 10:20:55 2012
Subject: [gdal-dev] read a catalog is slower then directly the raster ?
In-Reply-To: <4F280452.2090806@mail.ru>
References: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>
	<4F27F75B.5020405@mail.ru> <1328020343.4f27fb77ba632@imp.free.fr>
	<4F280452.2090806@mail.ru>
Message-ID: <1328023221.4f2806b5a3924@imp.free.fr>

> >
> Hi, Even
>
> I faced this problem before. I checked under debugger and saw that vrt
> sources were not creating overviews. So, gdal was making long RasterIO
> executions to the source raster, but not overviews. I provided a patch
> which took the overviews from origin raster and wrapped them too. May be
> this is not so elegant solution, but it works and speed up work with
> wrapped rasters considerably.
>
> I don't thik that qgis under GDB/DDD will give any additional
> information (one will just see long RasterIO executions).
>
> But I can still try to use GDB if you think this might help.
>

Dmitry,

I don't deny the problem you describe. And your solution sounds reasonable. But
without more precise context from Andrea, I just wanted to be sure that it was
the precise case that Andrea ran into. There might be other issues involved
(like histogram or statistics computations that can take a long time, but
admitedly, I wouldn't expect the VRT overhead to be significant) and displaying
the stack can show which first GDAL API call is involved.


From chaitanya.ch at gmail.com  Tue Jan 31 10:23:42 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jan 31 10:24:19 2012
Subject: [gdal-dev] ogr to convert 3D to 2D with height as attribute
In-Reply-To: <4F27F0B9.1010901@geograph.co.za>
References: <4F27F0B9.1010901@geograph.co.za>
Message-ID: <CAMKgpObUwa1Mpqm4byAf94aF1+V0GjMs1RrTh+BwCPEHgXuWJg@mail.gmail.com>

Zoltan,

ogr2ogr allows using OGR SQL [1]. You can access the geometry in WKT format
and use the SUBSTR function to make reasonable modifications. There are
many more functionalities to OGR SQL. Check out the OGR SQL page and see if
they help.

[1]: http://www.gdal.org/ogr/ogr_sql.html

On Tue, Jan 31, 2012 at 7:16 PM, Zoltan Szecsei <zoltans@geograph.co.za>wrote:

> Hi,
> I've got a few 3D DGN files that wont successfully read into a proprietary
> GIS prog, but do read into QGIS (ie: ogr sub-engine) successfully.
> I have tried using ogr to convert the DGN to a DXF file, but that also
> fails to import into this GIS package.
>
> I could write something to  pick through the DXF file, but I wouldn't want
> to re-invent the wheel.......
>
> The DGN (hence also the qgis DXF) contains 3D lines. All I need is the
> line level and colour numbers, and all the vertice XYZ values as line
> strings.
>
>
> TIA,
> Zoltan
>
> --
>
> ==============================**=============
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323     www.geograph.co.za
> ==============================**=============
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120131/fc6e0540/attachment-0001.html
From polimax at mail.ru  Tue Jan 31 15:03:22 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Tue Jan 31 15:03:35 2012
Subject: [gdal-dev] read a catalog is slower then directly the raster
 ?
In-Reply-To: <1328023221.4f2806b5a3924@imp.free.fr>
References: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>
	<4F27F75B.5020405@mail.ru> <1328020343.4f27fb77ba632@imp.free.fr>
	<4F280452.2090806@mail.ru> <1328023221.4f2806b5a3924@imp.free.fr>
Message-ID: <4F28490A.1050303@mail.ru>

31.01.2012 19:20, Even Rouault ?????:
>> Hi, Even
>>
>> I faced this problem before. I checked under debugger and saw that vrt
>> sources were not creating overviews. So, gdal was making long RasterIO
>> executions to the source raster, but not overviews. I provided a patch
>> which took the overviews from origin raster and wrapped them too. May be
>> this is not so elegant solution, but it works and speed up work with
>> wrapped rasters considerably.
>>
>> I don't thik that qgis under GDB/DDD will give any additional
>> information (one will just see long RasterIO executions).
>>
>> But I can still try to use GDB if you think this might help.
>>
> Dmitry,
>
> I don't deny the problem you describe. And your solution sounds reasonable. But
> without more precise context from Andrea, I just wanted to be sure that it was
> the precise case that Andrea ran into. There might be other issues involved
> (like histogram or statistics computations that can take a long time, but
> admitedly, I wouldn't expect the VRT overhead to be significant) and displaying
> the stack can show which first GDAL API call is involved.
>
>
>
>
Hello Even,

We have tested as you said. Also we added some code to check execution 
time of GDALRasterIO. We used two rasters in QGIS. First 
ftp://ftp.remotesensing.org/pub/geotiff/samples/misc/tjpeg.tif have 
rotation and warpped in QGIS, second - without rotation 
http://gis-lab.info/data/samples/tjpeg-unroated.7z (the same raster with 
removed rotation)

For first raster there was such situation (just only for one raster block):
GDALRasterIO time (ms): 18874

For second raster:
GDALRasterIO time (ms): 2

If you need more test, don't hesitate to say.
My be, it worth thinking to apply my patch.

Best regards,
Dmitry
From even.rouault at mines-paris.org  Tue Jan 31 15:25:53 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 31 15:25:22 2012
Subject: [gdal-dev] read a catalog is slower then directly the raster?
In-Reply-To: <4F28490A.1050303@mail.ru>
References: <CABqTJk9StWs+swsmA745em_81JMWQx6ymW19SHDCMBYfm7doEQ@mail.gmail.com>
	<1328023221.4f2806b5a3924@imp.free.fr> <4F28490A.1050303@mail.ru>
Message-ID: <201201312125.54073.even.rouault@mines-paris.org>


> 
> Hello Even,
> 
> We have tested as you said. Also we added some code to check execution
> time of GDALRasterIO. We used two rasters in QGIS. First
> ftp://ftp.remotesensing.org/pub/geotiff/samples/misc/tjpeg.tif have
> rotation and warpped in QGIS, second - without rotation
> http://gis-lab.info/data/samples/tjpeg-unroated.7z (the same raster with
> removed rotation)
> 
> For first raster there was such situation (just only for one raster block):
> GDALRasterIO time (ms): 18874
> 
> For second raster:
> GDALRasterIO time (ms): 2
> 
> If you need more test, don't hesitate to say.
> My be, it worth thinking to apply my patch.

Dmitry,

I don't intend to work directly on that issue, but now you are a GDAL 
committer, you can make appropriate use of your rights :-)

I hadn't reviewed in deep details your patch, but as I remember it was a non 
trivial one, I'd encourage you to check that the GDAL python autotest suite 
still passes in your local tree. And possibly to extend it to trigger your new 
code.

Best regards,

Even
From questions.anon at gmail.com  Tue Jan 31 19:38:30 2012
From: questions.anon at gmail.com (questions anon)
Date: Tue Jan 31 19:38:51 2012
Subject: [gdal-dev] numpy array to raster
Message-ID: <CAN_=ogu_uZdrdUygUi5SSsA_Mqbfqx4gXPN71ooD3BW6vsJErw@mail.gmail.com>

I need to output my numpy array as a raster so that someone else can access
the data in ArcGIS. So basically the steps I need are:
read numpy array into gdal
convert to raster
use latitude and longitude and array size to set projection

I am really struggling with gdal because I can't seem to find enough
documentation about each step to understand what it is doing.
Here are some of the steps I think I need:

myarray=myarray
#the extent and shape of my array
xmin,ymin,xmax,ymax=[139.8,-39.2,150.0,-33.6]
ncols,nrows=[193,106]
xres=(xmax-xmin)/float(ncols)
yres=(ymax-ymin)/float(nrows)
geotransform=(xmin,xres,0,ymax,0, -yres)

from osgeo import gdal
from osgeo import gdal_array

src_ds=gdal_array.OpenArray(myarray)

dst_ds =
gdal.GetDriverByName('GTiff').Create('E:/test/rasterise/mynewraster.tif',ncols,
nrows, 1 ,gdal.GDT_Byte)
dst_rb = dst_ds.GetRasterBand(0)
dst_ds.SetGeoTransform(geotransform)
output = gdal.RasterizeLayer(dst_ds)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120201/1020cb5f/attachment.html
From warmerdam at pobox.com  Tue Jan 31 20:07:05 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 31 20:07:21 2012
Subject: [gdal-dev] numpy array to raster
In-Reply-To: <CAN_=ogu_uZdrdUygUi5SSsA_Mqbfqx4gXPN71ooD3BW6vsJErw@mail.gmail.com>
References: <CAN_=ogu_uZdrdUygUi5SSsA_Mqbfqx4gXPN71ooD3BW6vsJErw@mail.gmail.com>
Message-ID: <CA+YzLBcncztkVQyak4srbtYWTtLGt+voL+D70XjQJ8H8dRXrvg@mail.gmail.com>

On Tue, Jan 31, 2012 at 4:38 PM, questions anon
<questions.anon@gmail.com> wrote:
> I need to output my numpy array as a raster so that someone else can access
> the data in ArcGIS. So basically the steps I need are:
> read numpy array into gdal
> convert to raster
> use latitude and longitude and array size to set projection
>
> I am really struggling with gdal because I can't seem to find enough
> documentation about each step to understand what it is doing.
> Here are some of the steps I think I need:
>
> myarray=myarray
> #the extent and shape of my array
> xmin,ymin,xmax,ymax=[139.8,-39.2,150.0,-33.6]
> ncols,nrows=[193,106]
> xres=(xmax-xmin)/float(ncols)
> yres=(ymax-ymin)/float(nrows)
> geotransform=(xmin,xres,0,ymax,0, -yres)
>
> from osgeo import gdal
> from osgeo import gdal_array
>
> src_ds=gdal_array.OpenArray(myarray)
>
> dst_ds =
> gdal.GetDriverByName('GTiff').Create('E:/test/rasterise/mynewraster.tif',ncols,
> nrows, 1 ,gdal.GDT_Byte)
> dst_rb = dst_ds.GetRasterBand(0)
> dst_ds.SetGeoTransform(geotransform)
> output = gdal.RasterizeLayer(dst_ds)

Dear "Questions Anon",

There are a variety of Python related information at:

  http://trac.osgeo.org/gdal/wiki/GdalOgrInPython

One serious issue with the above is that "gdal.RasterizeLayer()" is used to
turn vector data into raster data - for instance to rasterize polygon features
into an existing raster file.  I think you want to write your array into a
raster file.  I think you can just call "dst_ds.WriteArray(myarray)".

Alternatively if that method does not exist on the dataset, you
can write the one band like:

  dst_ds.GetRasterBand(1).WriteArray(myarray)

Some of the samples referenced from the GdalOgrInPython should be
helpful though I understand it can be hard to know where to look.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From questions.anon at gmail.com  Tue Jan 31 21:20:05 2012
From: questions.anon at gmail.com (questions anon)
Date: Tue Jan 31 21:20:12 2012
Subject: [gdal-dev] numpy array to raster
In-Reply-To: <CA+YzLBcncztkVQyak4srbtYWTtLGt+voL+D70XjQJ8H8dRXrvg@mail.gmail.com>
References: <CAN_=ogu_uZdrdUygUi5SSsA_Mqbfqx4gXPN71ooD3BW6vsJErw@mail.gmail.com>
	<CA+YzLBcncztkVQyak4srbtYWTtLGt+voL+D70XjQJ8H8dRXrvg@mail.gmail.com>
Message-ID: <CAN_=ogtJURjhDyz8HfMnWttv4MVpKsB6CX7aZc93_T7VXNq=Vg@mail.gmail.com>

thanks Frank, following your instructions with:
src_ds=gdal_array.OpenArray(myarray)
dst_ds =
gdal.GetDriverByName('GTiff').Create('E:/test/rasterise/mynewraster.tif',ncols,
nrows, 1 ,gdal.GDT_Byte)
dst_ds.SetGeoTransform(geotransform)
dst_ds.GetRasterBand(1).WriteArray(myarray)

I do not receive any error messages but the tiff produced are all just
zeros. Is there a step I am missing?
thanks

On Wed, Feb 1, 2012 at 12:07 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> On Tue, Jan 31, 2012 at 4:38 PM, questions anon
> <questions.anon@gmail.com> wrote:
> > I need to output my numpy array as a raster so that someone else can
> access
> > the data in ArcGIS. So basically the steps I need are:
> > read numpy array into gdal
> > convert to raster
> > use latitude and longitude and array size to set projection
> >
> > I am really struggling with gdal because I can't seem to find enough
> > documentation about each step to understand what it is doing.
> > Here are some of the steps I think I need:
> >
> > myarray=myarray
> > #the extent and shape of my array
> > xmin,ymin,xmax,ymax=[139.8,-39.2,150.0,-33.6]
> > ncols,nrows=[193,106]
> > xres=(xmax-xmin)/float(ncols)
> > yres=(ymax-ymin)/float(nrows)
> > geotransform=(xmin,xres,0,ymax,0, -yres)
> >
> > from osgeo import gdal
> > from osgeo import gdal_array
> >
> > src_ds=gdal_array.OpenArray(myarray)
> >
> > dst_ds =
> >
> gdal.GetDriverByName('GTiff').Create('E:/test/rasterise/mynewraster.tif',ncols,
> > nrows, 1 ,gdal.GDT_Byte)
> > dst_rb = dst_ds.GetRasterBand(0)
> > dst_ds.SetGeoTransform(geotransform)
> > output = gdal.RasterizeLayer(dst_ds)
>
> Dear "Questions Anon",
>
> There are a variety of Python related information at:
>
>  http://trac.osgeo.org/gdal/wiki/GdalOgrInPython
>
> One serious issue with the above is that "gdal.RasterizeLayer()" is used to
> turn vector data into raster data - for instance to rasterize polygon
> features
> into an existing raster file.  I think you want to write your array into a
> raster file.  I think you can just call "dst_ds.WriteArray(myarray)".
>
> Alternatively if that method does not exist on the dataset, you
> can write the one band like:
>
>  dst_ds.GetRasterBand(1).WriteArray(myarray)
>
> Some of the samples referenced from the GdalOgrInPython should be
> helpful though I understand it can be hard to know where to look.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120201/c9e01243/attachment.html
From ksshannon at gmail.com  Tue Jan 31 21:25:32 2012
From: ksshannon at gmail.com (Kyle Shannon)
Date: Tue Jan 31 21:26:10 2012
Subject: [gdal-dev] numpy array to raster
In-Reply-To: <CAN_=ogtJURjhDyz8HfMnWttv4MVpKsB6CX7aZc93_T7VXNq=Vg@mail.gmail.com>
References: <CAN_=ogu_uZdrdUygUi5SSsA_Mqbfqx4gXPN71ooD3BW6vsJErw@mail.gmail.com>
	<CA+YzLBcncztkVQyak4srbtYWTtLGt+voL+D70XjQJ8H8dRXrvg@mail.gmail.com>
	<CAN_=ogtJURjhDyz8HfMnWttv4MVpKsB6CX7aZc93_T7VXNq=Vg@mail.gmail.com>
Message-ID: <CAJ0mEz1=m+vHj_c9gG23_M+sua4wCc6+pkL9tCy_8Dx0Qg4dsA@mail.gmail.com>

Is 'myarray' full of zeros?

/**
 *
 * Kyle Shannon
 * ksshannon@gmail.com
 *
 */



On Tue, Jan 31, 2012 at 19:20, questions anon <questions.anon@gmail.com>wrote:

> thanks Frank, following your instructions with:
>
> src_ds=gdal_array.OpenArray(myarray)
> dst_ds =
> gdal.GetDriverByName('GTiff').Create('E:/test/rasterise/mynewraster.tif',ncols,
> nrows, 1 ,gdal.GDT_Byte)
>  dst_ds.SetGeoTransform(geotransform)
> dst_ds.GetRasterBand(1).WriteArray(myarray)
>
> I do not receive any error messages but the tiff produced are all just
> zeros. Is there a step I am missing?
> thanks
>
>
> On Wed, Feb 1, 2012 at 12:07 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:
>
>> On Tue, Jan 31, 2012 at 4:38 PM, questions anon
>> <questions.anon@gmail.com> wrote:
>> > I need to output my numpy array as a raster so that someone else can
>> access
>> > the data in ArcGIS. So basically the steps I need are:
>> > read numpy array into gdal
>> > convert to raster
>> > use latitude and longitude and array size to set projection
>> >
>> > I am really struggling with gdal because I can't seem to find enough
>> > documentation about each step to understand what it is doing.
>> > Here are some of the steps I think I need:
>> >
>> > myarray=myarray
>> > #the extent and shape of my array
>> > xmin,ymin,xmax,ymax=[139.8,-39.2,150.0,-33.6]
>> > ncols,nrows=[193,106]
>> > xres=(xmax-xmin)/float(ncols)
>> > yres=(ymax-ymin)/float(nrows)
>> > geotransform=(xmin,xres,0,ymax,0, -yres)
>> >
>> > from osgeo import gdal
>> > from osgeo import gdal_array
>> >
>> > src_ds=gdal_array.OpenArray(myarray)
>> >
>> > dst_ds =
>> >
>> gdal.GetDriverByName('GTiff').Create('E:/test/rasterise/mynewraster.tif',ncols,
>> > nrows, 1 ,gdal.GDT_Byte)
>> > dst_rb = dst_ds.GetRasterBand(0)
>> > dst_ds.SetGeoTransform(geotransform)
>> > output = gdal.RasterizeLayer(dst_ds)
>>
>> Dear "Questions Anon",
>>
>> There are a variety of Python related information at:
>>
>>  http://trac.osgeo.org/gdal/wiki/GdalOgrInPython
>>
>> One serious issue with the above is that "gdal.RasterizeLayer()" is used
>> to
>> turn vector data into raster data - for instance to rasterize polygon
>> features
>> into an existing raster file.  I think you want to write your array into a
>> raster file.  I think you can just call "dst_ds.WriteArray(myarray)".
>>
>> Alternatively if that method does not exist on the dataset, you
>> can write the one band like:
>>
>>  dst_ds.GetRasterBand(1).WriteArray(myarray)
>>
>> Some of the samples referenced from the GdalOgrInPython should be
>> helpful though I understand it can be hard to know where to look.
>>
>> Best regards,
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120131/d20a6531/attachment-0001.html
From questions.anon at gmail.com  Tue Jan 31 21:31:13 2012
From: questions.anon at gmail.com (questions anon)
Date: Tue Jan 31 21:31:54 2012
Subject: [gdal-dev] numpy array to raster
In-Reply-To: <CAJ0mEz1=m+vHj_c9gG23_M+sua4wCc6+pkL9tCy_8Dx0Qg4dsA@mail.gmail.com>
References: <CAN_=ogu_uZdrdUygUi5SSsA_Mqbfqx4gXPN71ooD3BW6vsJErw@mail.gmail.com>
	<CA+YzLBcncztkVQyak4srbtYWTtLGt+voL+D70XjQJ8H8dRXrvg@mail.gmail.com>
	<CAN_=ogtJURjhDyz8HfMnWttv4MVpKsB6CX7aZc93_T7VXNq=Vg@mail.gmail.com>
	<CAJ0mEz1=m+vHj_c9gG23_M+sua4wCc6+pkL9tCy_8Dx0Qg4dsA@mail.gmail.com>
Message-ID: <CAN_=ogvX1Tu5hc-tSVqbhY-OZbXd2nZvwAMLY-abHa-Tv5eFdQ@mail.gmail.com>

no I quickly checked that!
myarray is:
[[ 16.15035553  16.14380074  16.15581551 ...,  18.06388149  18.08930645
   18.08825245]
 [ 16.2154911   16.21180592  16.23977184 ...,  18.1085537   18.12040272
   18.12342682]
 [ 16.32851467  16.29202938  16.28964043 ...,  18.16753635  18.14905453
   18.16632977]
 ...,
 [ 30.50812759  30.58384018  30.66707535 ...,  26.31020527  26.47789459
   27.11495361]
 [ 30.76499577  30.76497536  30.79138317 ...,  26.45928288  26.64059887
   27.03641129]
 [ 31.01263275  30.96269417  30.9933857  ...,  26.78247185  26.77845631
   26.97975636]]

On Wed, Feb 1, 2012 at 1:25 PM, Kyle Shannon <ksshannon@gmail.com> wrote:

> Is 'myarray' full of zeros?
>
> /**
>  *
>  * Kyle Shannon
>  * ksshannon@gmail.com
>  *
>  */
>
>
>
> On Tue, Jan 31, 2012 at 19:20, questions anon <questions.anon@gmail.com>wrote:
>
>> thanks Frank, following your instructions with:
>>
>> src_ds=gdal_array.OpenArray(myarray)
>> dst_ds =
>> gdal.GetDriverByName('GTiff').Create('E:/test/rasterise/mynewraster.tif',ncols,
>> nrows, 1 ,gdal.GDT_Byte)
>>  dst_ds.SetGeoTransform(geotransform)
>> dst_ds.GetRasterBand(1).WriteArray(myarray)
>>
>> I do not receive any error messages but the tiff produced are all just
>> zeros. Is there a step I am missing?
>> thanks
>>
>>
>> On Wed, Feb 1, 2012 at 12:07 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:
>>
>>> On Tue, Jan 31, 2012 at 4:38 PM, questions anon
>>> <questions.anon@gmail.com> wrote:
>>> > I need to output my numpy array as a raster so that someone else can
>>> access
>>> > the data in ArcGIS. So basically the steps I need are:
>>> > read numpy array into gdal
>>> > convert to raster
>>> > use latitude and longitude and array size to set projection
>>> >
>>> > I am really struggling with gdal because I can't seem to find enough
>>> > documentation about each step to understand what it is doing.
>>> > Here are some of the steps I think I need:
>>> >
>>> > myarray=myarray
>>> > #the extent and shape of my array
>>> > xmin,ymin,xmax,ymax=[139.8,-39.2,150.0,-33.6]
>>> > ncols,nrows=[193,106]
>>> > xres=(xmax-xmin)/float(ncols)
>>> > yres=(ymax-ymin)/float(nrows)
>>> > geotransform=(xmin,xres,0,ymax,0, -yres)
>>> >
>>> > from osgeo import gdal
>>> > from osgeo import gdal_array
>>> >
>>> > src_ds=gdal_array.OpenArray(myarray)
>>> >
>>> > dst_ds =
>>> >
>>> gdal.GetDriverByName('GTiff').Create('E:/test/rasterise/mynewraster.tif',ncols,
>>> > nrows, 1 ,gdal.GDT_Byte)
>>> > dst_rb = dst_ds.GetRasterBand(0)
>>> > dst_ds.SetGeoTransform(geotransform)
>>> > output = gdal.RasterizeLayer(dst_ds)
>>>
>>> Dear "Questions Anon",
>>>
>>> There are a variety of Python related information at:
>>>
>>>  http://trac.osgeo.org/gdal/wiki/GdalOgrInPython
>>>
>>> One serious issue with the above is that "gdal.RasterizeLayer()" is used
>>> to
>>> turn vector data into raster data - for instance to rasterize polygon
>>> features
>>> into an existing raster file.  I think you want to write your array into
>>> a
>>> raster file.  I think you can just call "dst_ds.WriteArray(myarray)".
>>>
>>> Alternatively if that method does not exist on the dataset, you
>>> can write the one band like:
>>>
>>>  dst_ds.GetRasterBand(1).WriteArray(myarray)
>>>
>>> Some of the samples referenced from the GdalOgrInPython should be
>>> helpful though I understand it can be hard to know where to look.
>>>
>>> Best regards,
>>> --
>>>
>>> ---------------------------------------+--------------------------------------
>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>> warmerdam@pobox.com
>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>> and watch the world go round - Rush    | Geospatial Software Developer
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120201/7335ee74/attachment.html
From questions.anon at gmail.com  Tue Jan 31 23:40:50 2012
From: questions.anon at gmail.com (questions anon)
Date: Tue Jan 31 23:40:55 2012
Subject: [gdal-dev] empty Gtiff from Python
In-Reply-To: <4335.1319790184@vdputte.nl>
References: <4335.1319790184@vdputte.nl>
Message-ID: <CAN_=ogs8tzgWPOb0Xg+azQ1fTdK6PxRLfFHkpSOwNxWKWZtRzg@mail.gmail.com>

Was this problem solved?
I have tried both
dst_ds.GetRasterBand(1).WriteArray(myarray)
gdal.Band.WriteArray(dst_ds.GetRasterBand(1), myarray)
but my tiff still results in zeros.
Any feedback will be greatly appreciated.

On Fri, Oct 28, 2011 at 7:23 PM, Tom van der Putte <tom@vdputte.nl> wrote:

> Hi List,
>
> I'm trying to save a numpy array to a GTiff, which should be quite
> straightforward, considering all the examples available on the web.
> However, I get an file that is not readable by Qgis, is regarded by ArcMap
> to have only 0 and gdalinfo displays nothing on the values.
>
> I start with a ndarray, dtype = int32, shape = ( 10,10). It has integer
> values between 1 and 10. The code is as follows:
>
> import numpy as np
> from osgeo import gdal
> from osgeo import osr
>
> #np array
> a = np.ones((10,10))
>
> #coord-system
> sr_str = 'LOCAL_CS["arbitrary"]'
> sr = osr.SpatialReference( sr_str )
>
> #driver
> driver = gdal.GetDriverByName("GTiff")
>
> #dataset
> ds = driver.Create("D:\\temp\\output.tif", 10, 10, 1, gdal.GDT_Byte)
> ds.SetProjection( sr_str )
> ds.SetGeoTransform((0, 1, 0,0, 0,1))
>
> #write and close
> ds.GetRasterBand(1).WriteArray(a)
> ds = None
>
> The corresponding gdalinfo is:
> *********
> Raster dataset parameters:
>   Projection:
> LOCAL_CS["arbitrary",UNIT["metre",1,AUTHORITY["EPSG","9001"]]]
>   RasterCount: 1
>   RasterSize (10,10)
> Using driver GeoTIFF
>   Metadata:
>     0:  AREA_OR_POINT=Area
>
>   Image Structure Metadata:
>     0:  INTERLEAVE=BAND
>
> Corner Coordinates:
>   Upper Left (0, 0)
>   Lower Left (0, 10)
>   Upper Right (10, 0)
>   Lower Right (10, 10)
>   Center (5, 5)
>
> Coordinate System is:
> LOCAL_CS["arbitrary",
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
> Band 1 :
>    DataType: Byte
>    ColorInterpretation: Gray
>    Description:
>    Size (10,10)
>    BlockSize (10,10)
> *********
>
> I have tried both version 1.6.3 (I'm trying to make a Qgis plugin, and
> thus restricted to 1.6.3) as well as 1.8.1. I have also tried ds =
> driver.Create("D:\\temp\\output.tif", 10, 10, 1, gdal.GDT_Int32), but that
> didn't make much difference.
>
> I tried to make a Surfer grid (GSBG), and this somewhat worked: it gave a
> nice picture, but the values were off the charts.
>
> Any clues as to what I'm missing here? Cheers,
>
> Tom van der Putte
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120201/6738f0c6/attachment.html
