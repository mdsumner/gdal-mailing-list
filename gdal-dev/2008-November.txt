From williampaul28 at yahoo.com  Sat Nov  1 08:31:54 2008
From: williampaul28 at yahoo.com (william paul)
Date: Sat Nov  1 08:31:57 2008
Subject: [gdal-dev] gdal_merge
Message-ID: <905093.59535.qm@web38404.mail.mud.yahoo.com>

Thank you Frank:

It solved my problem :)

Best regards,

William




________________________________
From: Frank Warmerdam <warmerdam@pobox.com>
To: william paul <williampaul28@yahoo.com>
Cc: gdal-dev@lists.osgeo.org
Sent: Friday, October 31, 2008 3:12:07 PM
Subject: Re: [gdal-dev] gdal_merge

william paul wrote:
>? 
> Hello to everybody:
>? 
> I want to use gdal_merge.py to mosaic four images. The images have the 
> same size, but the content of the images overlaps only in some areas. 
> The value for each images is something like : 1, 2, 3, 4
> I want to mosaic all the files, but I want to be able to specify which 
> image will overlap what image, for example, the order of overlapping 
> should be: 1 covers 2, 2 covers 3, 3 covers 4 without no blending 
> (opaque), so the final image will have values 1, 2, 3, 4, each values 
> corresponding to its position in the overlapping images
>? 
> I have tried with: gdal_merge.py -0 merge.tif -of GTiff image1.tif 
> image2.tif image3.tif image4.tif, but I get the merge images with 0 
> values on most of the image and a 4 value on the position of the last image
>? 
> Please, may I receive and example for doing this?

William,

No the four images include regions that should be considered "nodata"?? That
is areas that should not be copied into the destination image?? Would the
pixel value in these areas happen to be zero?? If so, try adding the
switch "-n 0" to the command.

eg.
gdal_merge.py -0 merge.tif -of GTiff -n 0 \
? ? ? ? image1.tif image2.tif image3.tif image4.tif

By the way, to get the order of precidence you want you should also reverse
the order of the input images so that image1.tif is last (overlayed to top
of everything else).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081101/f23d6e2d/attachment.html
From ari.jolma at tkk.fi  Sat Nov  1 12:29:17 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Sat Nov  1 12:29:22 2008
Subject: [gdal-dev] MSYS buildslave
In-Reply-To: <4909DB0E.8040809@noaa.gov>
References: <4908515C.1000700@tkk.fi> <20081030143842.GA21961@ak4719.spb.edu>
	<4909DB0E.8040809@noaa.gov>
Message-ID: <490C83DD.9000603@tkk.fi>

The wrappers seemed to build with Python 2.4 without other changes than 
uncommenting libraries = gdal in setup.cfg. setup.py seems to set gdal_i 
by default in windows.

The autotest dumps core in usgsdem.py test 4 (the culprit is memcpy in 
MEMRasterBand::IReadBlock), but I'm not sure if I have the most recent 
gdal right now.

These are not yet in the buildslave, which currently is failing because 
I have something running there which keeps the swig/python directory 
undeleteable - damn windows!

Ari

Christopher Barker kirjoitti:
> Andrey Kiselev wrote:
>> Otherwise of that bug Python stuff should be perfectly compilable and
>> usable with the official binary Python distribution.
>
> At least with python2.5 I'm not sure about 2.6, but earlier pythons 
> required some patching to work with MingGW binaries.
>
> -Chris
>
>
>
>


-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi


From even.rouault at mines-paris.org  Sat Nov  1 12:45:50 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Nov  1 12:46:15 2008
Subject: [gdal-dev] MSYS buildslave
In-Reply-To: <490C83DD.9000603@tkk.fi>
References: <4908515C.1000700@tkk.fi> <4909DB0E.8040809@noaa.gov>
	<490C83DD.9000603@tkk.fi>
Message-ID: <200811011745.51602.even.rouault@mines-paris.org>

Ari,

fopr the crash in MEMRasterBand::IReadBlock(), I would suspect that 
CPLScanPointer doesn't do its job rightly when compiled in MSYS environment.

The function looks currently like :

/* -------------------------------------------------------------------- */
/*      On MSVC we have to scanf pointer values without the 0x          */
/*      prefix.                                                         */
/* -------------------------------------------------------------------- */
    if( EQUALN(szTemp,"0x",2) )
    {
        pResult = NULL;

#if defined(WIN32) && defined(_MSC_VER)
        sscanf( szTemp+2, "%p", &pResult );
#else
        sscanf( szTemp, "%p", &pResult );
#endif
    }

I'd guess we probably don't need the defined(_MSC_VER) test


Le Saturday 01 November 2008 17:29:17 Ari Jolma, vous avez ?crit?:
> The wrappers seemed to build with Python 2.4 without other changes than
> uncommenting libraries = gdal in setup.cfg. setup.py seems to set gdal_i
> by default in windows.
>
> The autotest dumps core in usgsdem.py test 4 (the culprit is memcpy in
> MEMRasterBand::IReadBlock), but I'm not sure if I have the most recent
> gdal right now.
>
> These are not yet in the buildslave, which currently is failing because
> I have something running there which keeps the swig/python directory
> undeleteable - damn windows!
>
> Ari
>
> Christopher Barker kirjoitti:
> > Andrey Kiselev wrote:
> >> Otherwise of that bug Python stuff should be perfectly compilable and
> >> usable with the official binary Python distribution.
> >
> > At least with python2.5 I'm not sure about 2.6, but earlier pythons
> > required some patching to work with MingGW binaries.
> >
> > -Chris


From ari.jolma at tkk.fi  Sat Nov  1 13:13:20 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Sat Nov  1 13:13:24 2008
Subject: [gdal-dev] CPLScanPointer doesn't do its job rightly when compiled
	in MSYS environment
Message-ID: <490C8E30.30205@tkk.fi>

Even Rouault kirjoitti:
> Ari,
>
> fopr the crash in MEMRasterBand::IReadBlock(), I would suspect that 
> CPLScanPointer doesn't do its job rightly when compiled in MSYS environment.
>
> The function looks currently like :
>
> /* -------------------------------------------------------------------- */
> /*      On MSVC we have to scanf pointer values without the 0x          */
> /*      prefix.                                                         */
> /* -------------------------------------------------------------------- */
>     if( EQUALN(szTemp,"0x",2) )
>     {
>         pResult = NULL;
>
> #if defined(WIN32) && defined(_MSC_VER)
>         sscanf( szTemp+2, "%p", &pResult );
> #else
>         sscanf( szTemp, "%p", &pResult );
> #endif
>     }
>
> I'd guess we probably don't need the defined(_MSC_VER) test
>   

I can confirm this. A simple copy to memory raster causes a segfault:

$tst = Geo::GDAL::Open('gdal-autotest/gdrivers/data/39079G6_truncated.dem');
$tst->GetDriver->Copy('MEM',$tst);

but when removing the above test, this code works fine. szTemp contains 
prefix "0x" in MSYS.

A ticket and a bug fix is probably in order.

Regards,

Ari

-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi


From spluque at gmail.com  Sat Nov  1 15:46:01 2008
From: spluque at gmail.com (Seb)
Date: Sat Nov  1 16:18:36 2008
Subject: [gdal-dev] maintain resolution with gdalwarp
Message-ID: <877i7ni4ja.fsf@patagonia.sebmags.homelinux.org>

Hi,

Does one need to set a the -tr (resolution of output) argument to
gdalwarp to ensure the resolution of the input is maintained in the
output?  I have a GeoTIFF image in UTM (+proj=utm +no_defs +zone=20
+a=6378137 +rf=298.257222101 +towgs84=0.000,0.000,0.000) with square
raster cells that I want to project to latlong WGS84, *maintaining* the
same resolution.  My call is currently:

gdalwarp -s_srs ${GEOTIFFFILE}.prj -t_srs 'EPSG:4326' \
    -tps -r cubicspline ${GEOTIFFFILE}.tif ${GEOTIFFFILE}_geo.tif

However, the resulting image also has square cells, which I don't expect
if the resolution were to be maintained.  Is there some formula one can
use to calculate an optimal resolution for the -tr argument?

I realize this is probably more of a general GIS question, since I have
encountered this situation in the past and have just gone about it
through trial and error.


Cheers,

-- 
Seb

From szekerest at gmail.com  Sat Nov  1 19:40:17 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Nov  1 19:40:20 2008
Subject: [gdal-dev] GDAL reference counting is thread unsafe
Message-ID: <f3b73b7d0811011640x4b93077cvd71d06f7cfc6f4fc@mail.gmail.com>

Folks,

I've found the following issue with the current refcounting
implementation in GDAL:
http://trac.osgeo.org/gdal/ticket/2648

Do you have idea whether we could handle this problem possibly for the
next release?


Best regards,

Tamas
From even.rouault at mines-paris.org  Sat Nov  1 19:47:29 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Nov  1 19:47:33 2008
Subject: [gdal-dev] Preliminary GDAL 1.6.0 NEWS
Message-ID: <200811020047.30087.even.rouault@mines-paris.org>

Folks,

I've prepared a preliminary GDAL 1.6.0 NEWS document : 
http://trac.osgeo.org/gdal/wiki/Release/1.6.0-News

Feel free to edit. I especially call for SWIG developers to carefully review 
and edit their own part.

That news doc is 800 lines long... far less than the 11 000 lines from the svn 
log --verbose -r13414:r15679 that served as a base. It could be made shorter 
I guess. It also mentions all the fixes that have been backported to 1.5 
branch from 1.5.0 release.

Best regards,
Even
From mchapman at fortifieddatacom.com  Sat Nov  1 22:53:08 2008
From: mchapman at fortifieddatacom.com (Martin Chapman)
Date: Sat Nov  1 23:13:37 2008
Subject: [gdal-dev] GDAL reference counting is thread unsafe
In-Reply-To: <f3b73b7d0811011640x4b93077cvd71d06f7cfc6f4fc@mail.gmail.com>
References: <f3b73b7d0811011640x4b93077cvd71d06f7cfc6f4fc@mail.gmail.com>
Message-ID: <000001c93c96$2357fe20$6a07fa60$@com>

If anyone is interested the following code has been used safely on Windows
and Linux for thread safe reference counting.  You can paste it into a
header file if you want, or use it as a guide.  It uses pthreads on Linux
and the Win32 thread functions on Windows with InterlockedIncrement() and
InterlockedDecrement().

Best regards,
Martin


#ifndef Increment_h
#define Increment_h

#define _WINDOWS_

#ifndef _WINDOWS_
#include <pthread.h>
#include <bits/pthreadtypes.h>
#endif

class CIncrement
{
public: 

	#ifdef _WINDOWS_
	CRITICAL_SECTION m_CS;
	#endif

CIncrement()
{
	#ifndef _WINDOWS_
	pthread_mutex_init(&m_Mutex, NULL);
	#endif
    
	#ifdef _WINDOWS_
	InitializeCriticalSection(&m_CS);
	#endif

	#ifdef _WINDOWS_
	EnterCriticalSection(&m_CS);
	#endif

	m_nVal = 0;

	#ifdef _WINDOWS_
	LeaveCriticalSection(&m_CS);
	#endif
}

~CIncrement()
{
	#ifndef _WINDOWS_
	pthread_mutex_destroy (&m_Mutex);
	#endif

	#ifdef _WINDOWS_
	DeleteCriticalSection(&m_CS);
	#endif
}

CIncrement& operator=(const CIncrement& thread)
{
    if (this == &thread)
        return *this;

	#ifndef _WINDOWS_
    pthread_mutex_lock(&m_Mutex);
    #endif

	#ifdef _WINDOWS_
	EnterCriticalSection(&m_CS);
	#endif

    m_nVal = thread.m_nVal;

	#ifdef _WINDOWS_
	DeleteCriticalSection(&m_CS);
	#endif
    
    #ifndef _WINDOWS_
    pthread_mutex_unlock(&m_Mutex);
    #endif
    
    return *this;
}   

int operator++(int nVal)
{
    return Add(1, true);
}

int operator++()
{
    return Add(1, false);
}
    
int operator--(int nVal)
{
    return Add(-1, true);
}

int operator--()
{
    return Add(-1, false);
}
    
bool operator==(const int nVal)
{
    #ifndef _WINDOWS_
    pthread_mutex_lock(&m_Mutex);
    #endif

	#ifdef _WINDOWS_
	EnterCriticalSection(&m_CS);
	#endif
    
    bool bReturn = (m_nVal == nVal);

	#ifdef _WINDOWS_
	LeaveCriticalSection(&m_CS);
	#endif

    #ifndef _WINDOWS_
    pthread_mutex_unlock(&m_Mutex);
    #endif
    
    return bReturn;
}

int Add(int nNum, bool bReturnNew)
{
    int rtn = 0;
    #ifdef _WINDOWS_
    return nNum > 0 ? InterlockedIncrement((volatile LONG*) &m_nVal)
					: InterlockedDecrement((volatile
LONG*) &m_nVal);

    #else
    pthread_mutex_lock(&m_Mutex);
    int oVal = m_nVal;
    m_nVal += nNum;
    rtn = bReturnNew ? m_nVal : oVal;
    pthread_mutex_unlock(&m_Mutex);
    #endif
    
    return rtn;
}

protected:
	int m_nVal;

	#ifdef _WINDOWS_
	void* m_Mutex;
	#else
	pthread_mutex_t m_Mutex;
	#endif
};

#endif











-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Tamas Szekeres
Sent: Saturday, November 01, 2008 5:40 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] GDAL reference counting is thread unsafe

Folks,

I've found the following issue with the current refcounting
implementation in GDAL:
http://trac.osgeo.org/gdal/ticket/2648

Do you have idea whether we could handle this problem possibly for the
next release?


Best regards,

Tamas
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From szekerest at gmail.com  Sun Nov  2 08:33:25 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Nov  2 08:33:27 2008
Subject: [gdal-dev] GDAL reference counting is thread unsafe
In-Reply-To: <000001c93c96$2357fe20$6a07fa60$@com>
References: <f3b73b7d0811011640x4b93077cvd71d06f7cfc6f4fc@mail.gmail.com>
	<000001c93c96$2357fe20$6a07fa60$@com>
Message-ID: <f3b73b7d0811020533x4dbf1492qa4d653eca81d02d7@mail.gmail.com>

Martin,

Seems reasonable, however I expect we could avoid using critical
sections in the windows code in this particular case using the
Interlocked function would be quite enough.
I'm uncertain how the windows headers are included in your code, but
it looks like simply including <windows.h> in some places may
interfere with other
declaration in GDAL in other places easily.

Best regards,

Tamas


2008/11/2 Martin Chapman <mchapman@fortifieddatacom.com>:
> If anyone is interested the following code has been used safely on Windows
> and Linux for thread safe reference counting.  You can paste it into a
> header file if you want, or use it as a guide.  It uses pthreads on Linux
> and the Win32 thread functions on Windows with InterlockedIncrement() and
> InterlockedDecrement().
>
> Best regards,
> Martin
>
>
> #ifndef Increment_h
> #define Increment_h
>
> #define _WINDOWS_
>
> #ifndef _WINDOWS_
> #include <pthread.h>
> #include <bits/pthreadtypes.h>
> #endif
>
> class CIncrement
> {
> public:
>
>        #ifdef _WINDOWS_
>        CRITICAL_SECTION m_CS;
>        #endif
>
> CIncrement()
> {
>        #ifndef _WINDOWS_
>        pthread_mutex_init(&m_Mutex, NULL);
>        #endif
>
>        #ifdef _WINDOWS_
>        InitializeCriticalSection(&m_CS);
>        #endif
>
>        #ifdef _WINDOWS_
>        EnterCriticalSection(&m_CS);
>        #endif
>
>        m_nVal = 0;
>
>        #ifdef _WINDOWS_
>        LeaveCriticalSection(&m_CS);
>        #endif
> }
>
> ~CIncrement()
> {
>        #ifndef _WINDOWS_
>        pthread_mutex_destroy (&m_Mutex);
>        #endif
>
>        #ifdef _WINDOWS_
>        DeleteCriticalSection(&m_CS);
>        #endif
> }
>
> CIncrement& operator=(const CIncrement& thread)
> {
>    if (this == &thread)
>        return *this;
>
>        #ifndef _WINDOWS_
>    pthread_mutex_lock(&m_Mutex);
>    #endif
>
>        #ifdef _WINDOWS_
>        EnterCriticalSection(&m_CS);
>        #endif
>
>    m_nVal = thread.m_nVal;
>
>        #ifdef _WINDOWS_
>        DeleteCriticalSection(&m_CS);
>        #endif
>
>    #ifndef _WINDOWS_
>    pthread_mutex_unlock(&m_Mutex);
>    #endif
>
>    return *this;
> }
>
> int operator++(int nVal)
> {
>    return Add(1, true);
> }
>
> int operator++()
> {
>    return Add(1, false);
> }
>
> int operator--(int nVal)
> {
>    return Add(-1, true);
> }
>
> int operator--()
> {
>    return Add(-1, false);
> }
>
> bool operator==(const int nVal)
> {
>    #ifndef _WINDOWS_
>    pthread_mutex_lock(&m_Mutex);
>    #endif
>
>        #ifdef _WINDOWS_
>        EnterCriticalSection(&m_CS);
>        #endif
>
>    bool bReturn = (m_nVal == nVal);
>
>        #ifdef _WINDOWS_
>        LeaveCriticalSection(&m_CS);
>        #endif
>
>    #ifndef _WINDOWS_
>    pthread_mutex_unlock(&m_Mutex);
>    #endif
>
>    return bReturn;
> }
>
> int Add(int nNum, bool bReturnNew)
> {
>    int rtn = 0;
>    #ifdef _WINDOWS_
>    return nNum > 0 ? InterlockedIncrement((volatile LONG*) &m_nVal)
>                                        : InterlockedDecrement((volatile
> LONG*) &m_nVal);
>
>    #else
>    pthread_mutex_lock(&m_Mutex);
>    int oVal = m_nVal;
>    m_nVal += nNum;
>    rtn = bReturnNew ? m_nVal : oVal;
>    pthread_mutex_unlock(&m_Mutex);
>    #endif
>
>    return rtn;
> }
>
> protected:
>        int m_nVal;
>
>        #ifdef _WINDOWS_
>        void* m_Mutex;
>        #else
>        pthread_mutex_t m_Mutex;
>        #endif
> };
>
> #endif
>
>
>
>
>
>
>
>
>
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Tamas Szekeres
> Sent: Saturday, November 01, 2008 5:40 PM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] GDAL reference counting is thread unsafe
>
> Folks,
>
> I've found the following issue with the current refcounting
> implementation in GDAL:
> http://trac.osgeo.org/gdal/ticket/2648
>
> Do you have idea whether we could handle this problem possibly for the
> next release?
>
>
> Best regards,
>
> Tamas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
From neteler at osgeo.org  Sun Nov  2 08:54:41 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Sun Nov  2 08:54:43 2008
Subject: [gdal-dev] maintain resolution with gdalwarp
In-Reply-To: <877i7ni4ja.fsf@patagonia.sebmags.homelinux.org>
References: <877i7ni4ja.fsf@patagonia.sebmags.homelinux.org>
Message-ID: <86782b610811020554o30ec18d6y412b6d5db2c7eb4@mail.gmail.com>

On Sat, Nov 1, 2008 at 8:46 PM, Seb <spluque@gmail.com> wrote:
> Hi,
>
> Does one need to set a the -tr (resolution of output) argument to
> gdalwarp to ensure the resolution of the input is maintained in the
> output?

See also
"gdalwarp: suggestion for '-kr' (keep resolution) flag"
http://trac.osgeo.org/gdal/ticket/511

Would be a nice-to-have...

Markus
From woklist at kyngchaos.com  Sun Nov  2 21:06:42 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun Nov  2 21:06:47 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Beta 1 Available
In-Reply-To: <4909234D.2090408@pobox.com>
References: <4909234D.2090408@pobox.com>
Message-ID: <4E4E1F77-4A1F-4618-8735-77E0CFCC915B@kyngchaos.com>

One bug that hasn't had any action taken:

http://trac.osgeo.org/gdal/ticket/1242

I wonder - I build OGDI with proj support.  For use only in GDAL, is  
that necessary?  If not, then I could remove PROJ from my OGDI and  
this bug will be meaningless, to me at least.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy


From nikos.alexandris at felis.uni-freiburg.de  Sun Nov  2 21:22:20 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Sun Nov  2 21:22:09 2008
Subject: [gdal-dev] [Fwd: Re: [GRASS-user] Tips for setting up an new
	FOSS-GEO-linux-box]
Message-ID: <1225678940.16156.7.camel@vertical>

My apologies for the "off-topic" post.

I started an osgeo-wikipage (see attached message). It would be
extremely useful if experienced users/developers would contribute by
sharing some of their secrets on how to best setup an osgeo GIS
workstation.

Kind regards, Nikos
-------------- next part --------------
An embedded message was scrubbed...
From: Nikos Alexandris <nikos.alexandris@felis.uni-freiburg.de>
Subject: Re: [GRASS-user] Tips for setting up an new FOSS-GEO-linux-box
Date: Mon, 03 Nov 2008 03:13:43 +0100
Size: 3412
Url: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081103/1f0a48d8/attachment.mht
From ari.jolma at tkk.fi  Mon Nov  3 07:41:26 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Mon Nov  3 07:41:38 2008
Subject: [gdal-dev] MSYS buildslave
In-Reply-To: <20081030143842.GA21961@ak4719.spb.edu>
References: <4908515C.1000700@tkk.fi> <20081030143842.GA21961@ak4719.spb.edu>
Message-ID: <490EF176.902@tkk.fi>

Andrey Kiselev kirjoitti:
> On Wed, Oct 29, 2008 at 02:04:44PM +0200, Ari Jolma wrote:
>   
>> I've set up a buildslave, which builds GDAL from a fresh checkout of
>> the trunk in Windows using the MSYS environment. Currently the build
>> is quite lean and only Perl bindings are built in addition to the core
>> dll and apps. Only Perl tests are run.
>>     
>
> Ari,
>
> If you are planning to extend a build to include NG Python bindings note
> that there is one problem. For some reason module built from 
> swig/python/extensions/gdalconst_wrap.c cannot be loaded by the stock
> Python binaries (built with MSVS 2003). I have ended up renaming that
> file in gdalconst_wrap.cpp with the appropriate change in
> swig/python/setup.py and everything works fine after that. The problem
> is weird and I failed to pin it down, so the above workaround.
>
> Otherwise of that bug Python stuff should be perfectly compilable and
> usable with the official binary Python distribution.
>   

Here's the first output from autotest run:

http://buildbot.osgeo.org:8500/builders/ajolma-msys/builds/29/steps/autotest/logs/stdio

I've already changed the tester so that it won't die because it can't 
find libpq.dll, but I assume it won't help much without something 
prepared in the database.

The GDAL itself is also patched locally to fix #2649: 
http://trac.osgeo.org/gdal/ticket/2649

Ari

> Best regards,
> Andrey
>
>   


-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi



From neteler at osgeo.org  Mon Nov  3 08:48:06 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Mon Nov  3 08:48:08 2008
Subject: [gdal-dev] converting KML to CSV
In-Reply-To: <4832DF65.2050107@pobox.com>
References: <loom.20080520T133500-248@post.gmane.org>
	<4832DF65.2050107@pobox.com>
Message-ID: <86782b610811030548x26ffb0flaa7f9edfea1741ea@mail.gmail.com>

On Tue, May 20, 2008 at 3:25 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Tim Michelsen wrote:
>>
>> Hello,
>> I'd like to convert KML back to CSV.
>>
>> When I issue
>> ogr2ogr -f CSV out.csv in.kml
>>
>> there are no coordinates written to the CSV file. Only the placemark names
>> are
>> written.
>>
>> How can I get ogr2ogr to create a file like
>> Latitude,Longitude,Name
>> 48.1,0.25,"First point"
>> 49.2,1.1,"Second point"
>> 47.5,0.75,"Third point"
>
> Tim,
>
> The CSV driver does not support writing geometries, though I can see some
> support for this might be desirable.

Frank,

I would need the same... is there any work-around (or would it be a
pain to add that)?

Best
Markus
From woklist at kyngchaos.com  Mon Nov  3 09:50:30 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Nov  3 09:50:33 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Beta 1 Available
In-Reply-To: <4E4E1F77-4A1F-4618-8735-77E0CFCC915B@kyngchaos.com>
References: <4909234D.2090408@pobox.com>
	<4E4E1F77-4A1F-4618-8735-77E0CFCC915B@kyngchaos.com>
Message-ID: <D3A47F56-994D-40EA-BCDA-6F5D6C880E36@kyngchaos.com>

On Nov 2, 2008, at 8:06 PM, William Kyngesburye wrote:

> One bug that hasn't had any action taken:
>
> http://trac.osgeo.org/gdal/ticket/1242
>
> I wonder - I build OGDI with proj support.  For use only in GDAL, is  
> that necessary?  If not, then I could remove PROJ from my OGDI and  
> this bug will be meaningless, to me at least.
>
OK, reviewing the OGDI configuration, I see that PROJ is required.   
Can't build without it.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy


From even.rouault at mines-paris.org  Mon Nov  3 15:39:34 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Nov  3 15:40:16 2008
Subject: [gdal-dev] converting KML to CSV
In-Reply-To: <86782b610811030548x26ffb0flaa7f9edfea1741ea@mail.gmail.com>
References: <loom.20080520T133500-248@post.gmane.org>
	<4832DF65.2050107@pobox.com>
	<86782b610811030548x26ffb0flaa7f9edfea1741ea@mail.gmail.com>
Message-ID: <200811032139.35528.even.rouault@mines-paris.org>

Markus,

this turned out not to be too difficult to implement. So here it is, in r15684

Extract from the updated doc :
"
Layer Creation options: 
- GEOMETRY (From GDAL 1.6.0): By default, the geometry of a feature written to 
a .csv file is discarded. It is possible to export the geometry in its WKT 
representation by specifying GEOMETRY=AS_WKT. It is also possible to export 
point geometries into their X,Y,Z components (different columns in the csv 
file) by specifying GEOMETRY=AS_XYZ, GEOMETRY=AS_XY or GEOMETRY=AS_YX. The 
geometry column(s) will be prepended to the columns with the attributes 
values.
"

Regards,
Even

Le Monday 03 November 2008 14:48:06 Markus Neteler, vous avez ?crit?:
> On Tue, May 20, 2008 at 3:25 PM, Frank Warmerdam <warmerdam@pobox.com> 
wrote:
> > Tim Michelsen wrote:
> >> Hello,
> >> I'd like to convert KML back to CSV.
> >>
> >> When I issue
> >> ogr2ogr -f CSV out.csv in.kml
> >>
> >> there are no coordinates written to the CSV file. Only the placemark
> >> names are
> >> written.
> >>
> >> How can I get ogr2ogr to create a file like
> >> Latitude,Longitude,Name
> >> 48.1,0.25,"First point"
> >> 49.2,1.1,"Second point"
> >> 47.5,0.75,"Third point"
> >
> > Tim,
> >
> > The CSV driver does not support writing geometries, though I can see some
> > support for this might be desirable.
>
> Frank,
>
> I would need the same... is there any work-around (or would it be a
> pain to add that)?
>
> Best
> Markus
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From pgao at esri.com  Mon Nov  3 17:11:45 2008
From: pgao at esri.com (Peng Gao)
Date: Mon Nov  3 17:11:46 2008
Subject: [gdal-dev] GDAL 1.6.0 GDALValidateCreationOptions
In-Reply-To: <451453C181B199458A55B2B1723FAC00014E0C22@SAGE.forestry.oregonstate.edu>
References: <451453C181B199458A55B2B1723FAC00014E0C22@SAGE.forestry.oregonstate.edu>
Message-ID: <A383B271E8D0DF47B51972FCEB438DC70992BDCE@twistedwire.esri.com>

Hi All,

Create()/CreateCopy() now validates the creation options using 
GDALValidateCreationOptions(). GDALValidateCreationOptions() generates
a warning if any of creation options is not supported by the driver.
Create()/CreateCopy() fails if there is a warning.

This seems to be too harsh. My app breaks now since it always includes
a "TFW" creation option.

Can the validation be optional?

Regards,
Gao, Peng
From even.rouault at mines-paris.org  Mon Nov  3 17:43:03 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Nov  3 17:43:09 2008
Subject: [gdal-dev] GDAL 1.6.0 GDALValidateCreationOptions
In-Reply-To: <A383B271E8D0DF47B51972FCEB438DC70992BDCE@twistedwire.esri.com>
References: <451453C181B199458A55B2B1723FAC00014E0C22@SAGE.forestry.oregonstate.edu>
	<A383B271E8D0DF47B51972FCEB438DC70992BDCE@twistedwire.esri.com>
Message-ID: <200811032343.03902.even.rouault@mines-paris.org>

Hi,

Create()/CreateCopy() shouldn't fail if there's a warning due to 
GDALValidateCreationOptions(). At least, I don't understand how this can 
happen. Do you notice that behaviour with a specific driver ? I couldn't 
reproduce a failure.

For example, something like:
gdal_translate foo.tif bar.tif -co BAD_OPTION=YES

just emits "Warning 6: Driver GTiff does not support BAD_OPTION creation 
option" but the translation is done correctly.

As far as avoiding the warning itself, there's always the possibility of 
querying the GDAL_DMD_CREATIONOPTIONLIST metadata item on the driver and look 
for the "TFW" string in it to see if the option is supported or not.

What would be your idea to make it optional ? At compilation time ? Run time ? 

Regards,
Even

Le Monday 03 November 2008 23:11:45 Peng Gao, vous avez ?crit?:
> Hi All,
>
> Create()/CreateCopy() now validates the creation options using
> GDALValidateCreationOptions(). GDALValidateCreationOptions() generates
> a warning if any of creation options is not supported by the driver.
> Create()/CreateCopy() fails if there is a warning.
>
> This seems to be too harsh. My app breaks now since it always includes
> a "TFW" creation option.
>
> Can the validation be optional?
>
> Regards,
> Gao, Peng
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From lran at unc.edu  Mon Nov  3 14:12:29 2008
From: lran at unc.edu (Limei Ran)
Date: Mon Nov  3 19:29:45 2008
Subject: [gdal-dev] ogr2ogr
Message-ID: <490F4D1D.7090104@unc.edu>

Hi:

I am trying to project a shapefile from WGS84 to NAD83 using the 
following command:
ogr2ogr -s_srs "+proj=latlong +datum=WGS84"  -t_srs "+proj=aea 
+lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 
+datum=NAD83 +units=m +no_defs "   temp_des.shp temp_src.shp

Could you tell me whether there is datum transformation from WGS84 to 
NAD83 in the projection?  I checked the two shapefiles at very high 
scale.  I did not see any diffference.  I am wondering whether the datum 
transformation happened in this command.  If not, how can I make it happen?

Thank you,

Limei
From pgao at esri.com  Mon Nov  3 19:53:32 2008
From: pgao at esri.com (Peng Gao)
Date: Mon Nov  3 19:53:34 2008
Subject: [gdal-dev] GDAL 1.6.0 GDALValidateCreationOptions
In-Reply-To: <200811032343.03902.even.rouault@mines-paris.org>
References: <451453C181B199458A55B2B1723FAC00014E0C22@SAGE.forestry.oregonstate.edu>
	<A383B271E8D0DF47B51972FCEB438DC70992BDCE@twistedwire.esri.com>
	<200811032343.03902.even.rouault@mines-paris.org>
Message-ID: <A383B271E8D0DF47B51972FCEB438DC70992C09D@twistedwire.esri.com>

Hi Even,
I got the failure when converting a 3 band img to a BMP image. I think converting 
a tiff to BMP will reproduce as well.
I was thinking to make validation optional at run time by setting, e.g.
config value.


Thanks,
Gao, Peng

> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org] 
> Sent: Monday, November 03, 2008 2:43 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Peng Gao
> Subject: Re: [gdal-dev] GDAL 1.6.0 GDALValidateCreationOptions
> 
> Hi,
> 
> Create()/CreateCopy() shouldn't fail if there's a warning due 
> to GDALValidateCreationOptions(). At least, I don't 
> understand how this can happen. Do you notice that behaviour 
> with a specific driver ? I couldn't reproduce a failure.
> 
> For example, something like:
> gdal_translate foo.tif bar.tif -co BAD_OPTION=YES
> 
> just emits "Warning 6: Driver GTiff does not support 
> BAD_OPTION creation option" but the translation is done correctly.
> 
> As far as avoiding the warning itself, there's always the 
> possibility of querying the GDAL_DMD_CREATIONOPTIONLIST 
> metadata item on the driver and look for the "TFW" string in 
> it to see if the option is supported or not.
> 
> What would be your idea to make it optional ? At compilation 
> time ? Run time ? 
> 
> Regards,
> Even
> 
> Le Monday 03 November 2008 23:11:45 Peng Gao, vous avez ?crit?:
> > Hi All,
> >
> > Create()/CreateCopy() now validates the creation options using 
> > GDALValidateCreationOptions(). 
> GDALValidateCreationOptions() generates 
> > a warning if any of creation options is not supported by the driver.
> > Create()/CreateCopy() fails if there is a warning.
> >
> > This seems to be too harsh. My app breaks now since it 
> always includes 
> > a "TFW" creation option.
> >
> > Can the validation be optional?
> >
> > Regards,
> > Gao, Peng
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> 
From neteler at osgeo.org  Tue Nov  4 02:16:16 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Tue Nov  4 02:16:19 2008
Subject: [gdal-dev] converting KML to CSV
In-Reply-To: <200811032139.35528.even.rouault@mines-paris.org>
References: <loom.20080520T133500-248@post.gmane.org>
	<4832DF65.2050107@pobox.com>
	<86782b610811030548x26ffb0flaa7f9edfea1741ea@mail.gmail.com>
	<200811032139.35528.even.rouault@mines-paris.org>
Message-ID: <86782b610811032316u78df04dfq11d34544160a291a@mail.gmail.com>

Even,

On Mon, Nov 3, 2008 at 9:39 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Markus,
>
> this turned out not to be too difficult to implement. So here it is, in r15684
>
> Extract from the updated doc :
> "
> Layer Creation options:
> - GEOMETRY (From GDAL 1.6.0): By default, the geometry of a feature written to
> a .csv file is discarded. It is possible to export the geometry in its WKT
> representation by specifying GEOMETRY=AS_WKT. It is also possible to export
> point geometries into their X,Y,Z components (different columns in the csv
> file) by specifying GEOMETRY=AS_XYZ, GEOMETRY=AS_XY or GEOMETRY=AS_YX.
> The geometry column(s) will be prepended to the columns with the attributes
> values.
> "

Fantastic - works well! I tested:
ogr2ogr -f CSV out it_mountains.shp -lco GEOMETRY=AS_XYZ

thanks a lot,
Markus
From michele.sanges at gmail.com  Tue Nov  4 06:23:47 2008
From: michele.sanges at gmail.com (Michele Sanges)
Date: Tue Nov  4 06:23:49 2008
Subject: [gdal-dev] data resampling at runtime
Message-ID: <1b62eaf70811040323j6dd2a0e2r90b3d0f9552898d2@mail.gmail.com>

Is there a way to resampling at runtime (i.e., when the map is drawn) the
data of a raster map from full resolution to an another fixed resolution
without reopen the dataset (i.e. without using the rasterio method)?
Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081104/dc9fe613/attachment.html
From even.rouault at mines-paris.org  Tue Nov  4 14:40:19 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov  4 14:40:23 2008
Subject: [gdal-dev] ogr2ogr
In-Reply-To: <490F4D1D.7090104@unc.edu>
References: <490F4D1D.7090104@unc.edu>
Message-ID: <200811042040.20177.even.rouault@mines-paris.org>

Hi,

My understanding about the WGS84 vs NAD83 issue is that for most practical 
usages they are pretty much the same, and I believe that PROJ.4 makes that 
assumption. So, there's no datum transformation.

See http://www.mentorsoftwareinc.com/resource/Nad83.htm, 
http://www.geod.nrcan.gc.ca/faq_e.php#23, 
http://n2.nabble.com/Proj4-datum-transform-assumption-Question-td1111052.html 
for others references on the subject.

Le Monday 03 November 2008 20:12:29 Limei Ran, vous avez ?crit?:
> Hi:
>
> I am trying to project a shapefile from WGS84 to NAD83 using the
> following command:
> ogr2ogr -s_srs "+proj=latlong +datum=WGS84"  -t_srs "+proj=aea
> +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80
> +datum=NAD83 +units=m +no_defs "   temp_des.shp temp_src.shp
>
> Could you tell me whether there is datum transformation from WGS84 to
> NAD83 in the projection?  I checked the two shapefiles at very high
> scale.  I did not see any diffference.  I am wondering whether the datum
> transformation happened in this command.  If not, how can I make it happen?
>
> Thank you,
>
> Limei
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From matt.wilkie at gov.yk.ca  Tue Nov  4 15:02:15 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Nov  4 15:02:19 2008
Subject: [gdal-dev] gdal_merge
In-Reply-To: <490B0427.8050006@pobox.com>
References: <405306.77178.qm@web38407.mail.mud.yahoo.com>
	<490B0427.8050006@pobox.com>
Message-ID: <4910AA47.4080001@gov.yk.ca>

> By the way, to get the order of precidence you want you should also
> reverse the order of the input images so that image1.tif is last
> (overlayed to top of everything else).

Thanks for clarifying this Frank.

Is there way to do the same with gdalwarp? I ask because I sometimes 
need to stack images rather than blend them, but also want to use 
bilinear or cubic resampling.

cheers,

matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From even.rouault at mines-paris.org  Tue Nov  4 16:17:03 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov  4 16:17:36 2008
Subject: [gdal-dev] GDAL 1.6.0 GDALValidateCreationOptions
In-Reply-To: <A383B271E8D0DF47B51972FCEB438DC70992C09D@twistedwire.esri.com>
References: <451453C181B199458A55B2B1723FAC00014E0C22@SAGE.forestry.oregonstate.edu>
	<200811032343.03902.even.rouault@mines-paris.org>
	<A383B271E8D0DF47B51972FCEB438DC70992C09D@twistedwire.esri.com>
Message-ID: <200811042217.04794.even.rouault@mines-paris.org>

Gao,

I've tried gdal_translate on a 3 band TIFF to a BMP image and it works. Well, 
I get the warning twice because the BMP driver doesn't implement the 
CreateCopy() method, but apart the warning, the resulting image is correct.
I'd be interested if you could find some code snippet that reproduces the 
problem.

Anyway, I've added as you suggested a configuration option to skip the call to 
GDALValidateCreationOptions(). Just define GDAL_VALIDATE_CREATION_OPTIONS=NO. 
The default is YES, which I believe is the most sensible value for most 
usages. I personnaly find it usefull to be reminded that I pass wrong options 
due to typo, etc..

See http://trac.osgeo.org/gdal/changeset/15685

Regards,
Even

Le Tuesday 04 November 2008 01:53:32 Peng Gao, vous avez ?crit?:
> Hi Even,
> I got the failure when converting a 3 band img to a BMP image. I think
> converting a tiff to BMP will reproduce as well.
> I was thinking to make validation optional at run time by setting, e.g.
> config value.
>
>
> Thanks,
> Gao, Peng
>
> > -----Original Message-----
> > From: Even Rouault [mailto:even.rouault@mines-paris.org]
> > Sent: Monday, November 03, 2008 2:43 PM
> > To: gdal-dev@lists.osgeo.org
> > Cc: Peng Gao
> > Subject: Re: [gdal-dev] GDAL 1.6.0 GDALValidateCreationOptions
> >
> > Hi,
> >
> > Create()/CreateCopy() shouldn't fail if there's a warning due
> > to GDALValidateCreationOptions(). At least, I don't
> > understand how this can happen. Do you notice that behaviour
> > with a specific driver ? I couldn't reproduce a failure.
> >
> > For example, something like:
> > gdal_translate foo.tif bar.tif -co BAD_OPTION=YES
> >
> > just emits "Warning 6: Driver GTiff does not support
> > BAD_OPTION creation option" but the translation is done correctly.
> >
> > As far as avoiding the warning itself, there's always the
> > possibility of querying the GDAL_DMD_CREATIONOPTIONLIST
> > metadata item on the driver and look for the "TFW" string in
> > it to see if the option is supported or not.
> >
> > What would be your idea to make it optional ? At compilation
> > time ? Run time ?
> >
> > Regards,
> > Even
> >
> > Le Monday 03 November 2008 23:11:45 Peng Gao, vous avez ?crit?:
> > > Hi All,
> > >
> > > Create()/CreateCopy() now validates the creation options using
> > > GDALValidateCreationOptions().
> >
> > GDALValidateCreationOptions() generates
> >
> > > a warning if any of creation options is not supported by the driver.
> > > Create()/CreateCopy() fails if there is a warning.
> > >
> > > This seems to be too harsh. My app breaks now since it
> >
> > always includes
> >
> > > a "TFW" creation option.
> > >
> > > Can the validation be optional?
> > >
> > > Regards,
> > > Gao, Peng
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev


From pgao at esri.com  Tue Nov  4 17:13:40 2008
From: pgao at esri.com (Peng Gao)
Date: Tue Nov  4 17:13:46 2008
Subject: [gdal-dev] GDAL 1.6.0 GDALValidateCreationOptions
In-Reply-To: <200811042217.04794.even.rouault@mines-paris.org>
References: <451453C181B199458A55B2B1723FAC00014E0C22@SAGE.forestry.oregonstate.edu>
	<200811032343.03902.even.rouault@mines-paris.org>
	<A383B271E8D0DF47B51972FCEB438DC70992C09D@twistedwire.esri.com>
	<200811042217.04794.even.rouault@mines-paris.org>
Message-ID: <A383B271E8D0DF47B51972FCEB438DC7099B8280@twistedwire.esri.com>

Even,

Thanks for the fix. 

I use bStrict = 1 when calling CreateCopy(). This could be why I see the error. I think
gdal_translate uses bStrict = FALSE by default.


        if( !bStrict )
        {
            CPLPopErrorHandler();
            CPLErrorReset();
        }
        else 
            eErr = CPLGetLastErrorType();  <---------- eErr get CE_Warning here.
        }

> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org] 
> Sent: Tuesday, November 04, 2008 1:17 PM
> To: Peng Gao
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] GDAL 1.6.0 GDALValidateCreationOptions
> 
> Gao,
> 
> I've tried gdal_translate on a 3 band TIFF to a BMP image and 
> it works. Well, I get the warning twice because the BMP 
> driver doesn't implement the
> CreateCopy() method, but apart the warning, the resulting 
> image is correct.
> I'd be interested if you could find some code snippet that 
> reproduces the problem.
> 
> Anyway, I've added as you suggested a configuration option to 
> skip the call to GDALValidateCreationOptions(). Just define 
> GDAL_VALIDATE_CREATION_OPTIONS=NO. 
> The default is YES, which I believe is the most sensible 
> value for most usages. I personnaly find it usefull to be 
> reminded that I pass wrong options due to typo, etc..
> 
> See http://trac.osgeo.org/gdal/changeset/15685
> 
> Regards,
> Even
> 
> Le Tuesday 04 November 2008 01:53:32 Peng Gao, vous avez ?crit?:
> > Hi Even,
> > I got the failure when converting a 3 band img to a BMP 
> image. I think 
> > converting a tiff to BMP will reproduce as well.
> > I was thinking to make validation optional at run time by 
> setting, e.g.
> > config value.
> >
> >
> > Thanks,
> > Gao, Peng
> >
> > > -----Original Message-----
> > > From: Even Rouault [mailto:even.rouault@mines-paris.org]
> > > Sent: Monday, November 03, 2008 2:43 PM
> > > To: gdal-dev@lists.osgeo.org
> > > Cc: Peng Gao
> > > Subject: Re: [gdal-dev] GDAL 1.6.0 GDALValidateCreationOptions
> > >
> > > Hi,
> > >
> > > Create()/CreateCopy() shouldn't fail if there's a warning due to 
> > > GDALValidateCreationOptions(). At least, I don't 
> understand how this 
> > > can happen. Do you notice that behaviour with a specific 
> driver ? I 
> > > couldn't reproduce a failure.
> > >
> > > For example, something like:
> > > gdal_translate foo.tif bar.tif -co BAD_OPTION=YES
> > >
> > > just emits "Warning 6: Driver GTiff does not support BAD_OPTION 
> > > creation option" but the translation is done correctly.
> > >
> > > As far as avoiding the warning itself, there's always the 
> > > possibility of querying the GDAL_DMD_CREATIONOPTIONLIST metadata 
> > > item on the driver and look for the "TFW" string in it to 
> see if the 
> > > option is supported or not.
> > >
> > > What would be your idea to make it optional ? At 
> compilation time ? 
> > > Run time ?
> > >
> > > Regards,
> > > Even
> > >
> > > Le Monday 03 November 2008 23:11:45 Peng Gao, vous avez ?crit?:
> > > > Hi All,
> > > >
> > > > Create()/CreateCopy() now validates the creation options using 
> > > > GDALValidateCreationOptions().
> > >
> > > GDALValidateCreationOptions() generates
> > >
> > > > a warning if any of creation options is not supported 
> by the driver.
> > > > Create()/CreateCopy() fails if there is a warning.
> > > >
> > > > This seems to be too harsh. My app breaks now since it
> > >
> > > always includes
> > >
> > > > a "TFW" creation option.
> > > >
> > > > Can the validation be optional?
> > > >
> > > > Regards,
> > > > Gao, Peng
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev@lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> 
From dharris at regisresources.com  Wed Nov  5 00:39:32 2008
From: dharris at regisresources.com (Dale Harris)
Date: Wed Nov  5 00:40:40 2008
Subject: [gdal-dev] Mapinfo TAB Files and DateTime
Message-ID: <B1C193A9DE5B6D41833793DE100B5AB3233B0E@regisdc01.perth.regis.local>

I am using GDAL 1.6 Beta with VB.NET (through ogr_csharp) to read a TAB
file with a Date or a Date Time field and I can't use the following to
get the date values (they are all 0):

 

.GetFeature(x).GetFieldAsDateTime(33, myyear, mymonth, myday, myhour,
mymin, mysec, mytz)

 

However if I use:

 

.GetFeature(x).GetFieldAsString(33)

 

I get "2008102600000".

 

Also if I try to create a new file with a datetime field it builds ok
but the field has no values assigned to it.

 

Is this due to the csharp wrapper not yet supporting datetime fields in
Mapinfo?

 

Cheers,

Dale Harris
GIS Manager

Regis Resources
Ground Floor 
62 Colin Street
West Perth WA 6005
Direct Line (08) 9442 2207
Fax: (08) 9442 2290
Email: dharris@regisresources.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081105/3d19a857/attachment.html
From klandrus at progeny.net  Wed Nov  5 09:22:05 2008
From: klandrus at progeny.net (Kurt Landrus)
Date: Wed Nov  5 09:22:09 2008
Subject: [gdal-dev] Saving data to the TRE domain NITF
Message-ID: <6D2B806B-16E0-46B0-860D-50D45BA2FEEE@progeny.net>

What about TRE domain data, does the NITF driver support saving data  
to the TRE domain?
I've tried the following code to save tre data, but there is not TRE  
segment in the new file, and
the error code returned is 0.

         err = GDALSetMetadataItem(dataset, tre, treValue, "TRE");
         IFDBG printf( "  saved TRE %s= %s\n errcode=%i\n", tre,  
treValue, err);


Kurt Landrus
Progeny Systems Corp.
klandrus@progeny.net
Office: 	703-368-6107 x424
Lab: 	703-368-6107 x520



From Kai-Behncke at gmx.de  Wed Nov  5 10:18:00 2008
From: Kai-Behncke at gmx.de (Kai Behncke)
Date: Wed Nov  5 10:18:07 2008
Subject: [gdal-dev] Question to Gdalinfo result
Message-ID: <20081105151800.265550@gmx.net>

Dear users, I have an aerial image and did a "gdalinfo" to it:


The result is (extract):
--------------------------------------------
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (8.028439291266251,52.303510658986561)
Pixel Size = (0.000004896399317,-0.000004896399317)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (   8.0284393,  52.3035107) (  8d 1'42.38"E, 52d18'12.64"N)
Lower Left  (   8.0284393,  52.2664645) (  8d 1'42.38"E, 52d15'59.27"N)
Upper Right (   8.0498072,  52.3035107) (  8d 2'59.31"E, 52d18'12.64"N)
Lower Right (   8.0498072,  52.2664645) (  8d 2'59.31"E, 52d15'59.27"N)
Center      (   8.0391232,  52.2849876) (  8d 2'20.84"E, 52d17'5.96"N)
-----------------------------

All right, the most seems very clear to me, but does anybody know what:

            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],

    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]

mean??
Thank you very much in advance, Kai


-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser
From dmorissette at mapgears.com  Wed Nov  5 10:14:28 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov  5 10:28:45 2008
Subject: [gdal-dev] Mapinfo TAB Files and DateTime
In-Reply-To: <B1C193A9DE5B6D41833793DE100B5AB3233B0E@regisdc01.perth.regis.local>
References: <B1C193A9DE5B6D41833793DE100B5AB3233B0E@regisdc01.perth.regis.local>
Message-ID: <4911B854.3010601@mapgears.com>

Looks like the problem may be in the MITAB driver itself: DateTime 
support has been added for writing only but has been skipped for reading.

I have reopened ticket 2585 about this, but it will be at least a couple 
of days before we have time to work on it:

   http://trac.osgeo.org/gdal/ticket/2585

Daniel


Dale Harris wrote:
> I am using GDAL 1.6 Beta with VB.NET (through ogr_csharp) to read a TAB 
> file with a Date or a Date Time field and I can?t use the following to 
> get the date values (they are all 0):
> 
>  
> 
> .GetFeature(x).GetFieldAsDateTime(33, myyear, mymonth, myday, myhour, 
> mymin, mysec, mytz)
> 
>  
> 
> However if I use:
> 
>  
> 
> .GetFeature(x).GetFieldAsString(33)
> 
>  
> 
> I get ?2008102600000?.
> 
>  
> 
> Also if I try to create a new file with a datetime field it builds ok 
> but the field has no values assigned to it.
> 
>  
> 
> Is this due to the csharp wrapper not yet supporting datetime fields in 
> Mapinfo?
> 
>  
> 
> Cheers,
> 
> **Dale Harris***
> *GIS Manager
> 
> **Regis Resources***
> *Ground Floor
> 62 Colin Street
> West Perth WA 6005
> Direct Line (08) 9442 2207
> Fax: (08) 9442 2290
> Email: dharris@regisresources.com <mailto:dharris@regisresources.com>
> 
>  
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/
From guillaume.huby.lists at gmail.com  Wed Nov  5 10:39:42 2008
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov  5 10:39:47 2008
Subject: [gdal-dev] DIMAP driver fail to get some meta data
Message-ID: <ddc797c30811050739y6214592dye7096f0881af3ec9@mail.gmail.com>

I have some trouble getting some meta data using DIMAP Driver.

gdalinfo --version
> GDAL 1.6.0dev, FWTools 2.2.8, released 2008/10/29
>

Sample data can be found here :
ftp://ftp.dmcii.com/samples/32m_MS_L1R/DN000340T_L1R.zip

The meta data file contains this data :

...
> <Image_Interpretation>
>         <Spectral_Band_Info>
>             <BAND_INDEX>1</BAND_INDEX>
>             <BAND_DESCRIPTION>NIR</BAND_DESCRIPTION>
>             <PHYSICAL_GAIN>0.6376299283778701</PHYSICAL_GAIN>
>             <PHYSICAL_BIAS>0.0642515909964508</PHYSICAL_BIAS>
>             <PHYSICAL_UNIT>W/m2/sr/m-6</PHYSICAL_UNIT>
>         </Spectral_Band_Info>
>         <Spectral_Band_Info>
>             <BAND_INDEX>2</BAND_INDEX>
>             <BAND_DESCRIPTION>RED</BAND_DESCRIPTION>
>             <PHYSICAL_GAIN>0.6190674084836884</PHYSICAL_GAIN>
>             <PHYSICAL_BIAS>0.0666344554873623</PHYSICAL_BIAS>
>             <PHYSICAL_UNIT>W/m2/sr/m-6</PHYSICAL_UNIT>
>         </Spectral_Band_Info>
>         <Spectral_Band_Info>
>             <BAND_INDEX>3</BAND_INDEX>
>             <BAND_DESCRIPTION>GREEN</BAND_DESCRIPTION>
>             <PHYSICAL_GAIN>0.717558361863802</PHYSICAL_GAIN>
>             <PHYSICAL_BIAS>0.019273652406175568</PHYSICAL_BIAS>
>             <PHYSICAL_UNIT>W/m2/sr/m-6</PHYSICAL_UNIT>
>         </Spectral_Band_Info>
>     </Image_Interpretation>
> ...
>

And gdalinfo outputs :

>gdalinfo DN000340T_L1R.dim
> Driver: DIMAP/SPOT DIMAP
> ...
> Metadata:
>   ...
>   SPECTRAL_BAND_INDEX=1
>   SPECTRAL_BAND_DESCRIPTION=NIR
>   SPECTRAL_PHYSICAL_GAIN=0.6376299283778701
>   SPECTRAL_PHYSICAL_BIAS=0.0642515909964508
>   SPECTRAL_PHYSICAL_UNIT=W/m2/sr/m-6
> ...
>

The problem is that there is spectral info only for first band. I would like
to see the data for each band.

I also made a C++ program using the API ( GDALDataset::GetMetadata and
GDALRasterBand::GetMetadata )giving no more results.

Is there some turn-around to get the meta-data using the driver ?
Should I submit a bug ?

Thank you for your reply.

Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081105/7f3e190b/attachment.html
From bgrinstead at iavo-rs.com  Wed Nov  5 11:01:00 2008
From: bgrinstead at iavo-rs.com (Brad Grinstead)
Date: Wed Nov  5 11:31:05 2008
Subject: [gdal-dev] OGR DeleteFeature throws memory exception
Message-ID: <F6ED569B-9718-4B14-84B3-983818ECDF94@iavo-rs.com>

I am wondering if someone has experienced a memory access violation when attempting to delete OGRFeatures.  I am running the latest build off the trunk and have been able to find no information regarding this error.

Basically, I am following the OGR API tutorial format, with a wrapper for the OGR functionality.  The code looks like this:

 
for (int j = 0; j < featureCount; j++)
{
    if ((feature = layer.GetNextFeature()) == null)
        continue;
    geometry = feature.GetGeometry();
    if (geometry != null)
    {
        geoType = geometry.GetGeometryType();
        
        //PROCESS GEOMETRY
    }
 
    feature.Dispose();
}
 
 
 
and the dispose function for the feature's wrapper is:
 
!Feature()
{
	if (disposed)
		return;
 
	try 
	{
		OGRFeature::DestroyFeature(this->feat);
	}
	catch (System::Exception^)
	{
		Console::WriteLine("AVE:Feature");
	}
	disposed = true;
}


On some shapefiles (not all) the DestroyFeature function throws an AccessViolationException.  When run through the ingestion loop, a number of these are thrown before the application crashes.  If I comment out the DestroyFeature call, the ingestion succeeds, but I think it is opening a hole for memory leaks.  Sort of a "damned if you do, damned if you don't" situation.
 


Thanks in advance,

Brad G.



From greenberg at ucdavis.edu  Wed Nov  5 12:18:47 2008
From: greenberg at ucdavis.edu (Jonathan Greenberg)
Date: Wed Nov  5 12:19:51 2008
Subject: [gdal-dev] Using RGDAL to "copy" header information...
Message-ID: <4911D577.2050300@ucdavis.edu>

R-geographers...

I'm trying to solve a problem to implement a line-by-line tiled 
processing using RGDAL (read 1 line of an image, process the one line, 
write one line of the image to a binary file).  Everything except for 
the final step I'm able to do using a combination of RGDAL and r-base 
commands.  Below is the basic structure, the input file "elev" can be 
any image file GDAL supports -- the code below just "copies" the image 
one line at a time:

###

library(rgdal)
infile='elev'
outfile_base='testout'
outfile_ext='.bil'
outfile=paste(outfile_base,outfile_ext,sep='')
outcon <- file(outfile, "wb")

infile_info=GDALinfo(infile)
nl=infile_info[[1]]
ns=infile_info[[2]]

for (row in 1:nl) {
    templine <- readGDAL(infile,region.dim=c(1,ns),offset=c(row-1,0))
    writeBin(templine[[1]], outcon,size=4)
}
close(outcon)
# Below doesn't work
# writeGDAL(templine,outfile_base,drivername='EHdr',type="Float32")

###

The issue is this: I need to be able to effectively copy the 
geographic/header information from the input file (the last line almost 
works, but as you can see it sets the line #s to 1, not "ns"), and parse 
it over to the output file (which is some form of a flat binary file -- 
in this case, an Arc Binary Raster, but an ENVI binary output would also 
be good) -- ideally I'd like to be able to modify this header, 
particularly the number type (e.g. if the input file is an integer, and 
I'm writing out a floating point binary, I need that reflected in the 
output header).  I can do this by *manually* creating the output header 
via a series of ascii-writes, but I was wondering if there is a more 
effective way of doing this using RGDAL that might apply generically to 
the header of any binary image file I might write?  Thanks!

--j


-- 

Jonathan A. Greenberg, PhD
Postdoctoral Scholar
Center for Spatial Technologies and Remote Sensing (CSTARS)
University of California, Davis
One Shields Avenue
The Barn, Room 250N
Davis, CA 95616
Cell: 415-794-5043
AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
From ekanegae at gmail.com  Wed Nov  5 19:06:29 2008
From: ekanegae at gmail.com (Eduardo Kanegae)
Date: Wed Nov  5 19:06:32 2008
Subject: [gdal-dev] Error building gdal_wrap.cpp / GDAL 1.5.3
Message-ID: <ce13c0ca0811051606x63ea46d2l776ff2aae60e7c0f@mail.gmail.com>

Hi folks,

during the "make" process of building GDAL 1.5.3 under CentOS 5 I?m
getting the following error:
-------------
[2]: Entering directory `/usr/src/mypacks/gdal-1.5.3/swig/php'
swig -Wall -I../include -I../include/php -I../include/php/docs
-I/usr/src/mypacks/gdal-1.5.3 -c++ -php -o gdal_wrap.cpp gdal.i
../include/Band.i:140: Warning(453): Can't apply
(IF_ERROR_RETURN_NONE). No typemaps are defined.
g++ -I../../port -I../../gcore -I../../alg -I../../ogr `php-config
--includes` -fpic -c gdal_wrap.cpp
gdal_wrap.cpp:1051: error: ?zend_property_reference? was not declared
in this scope
gdal_wrap.cpp:1051: error: ?property_reference? was not declared in this scope
gdal_wrap.cpp:1051: error: expected primary-expression before ?*? token
gdal_wrap.cpp:1051: error: ?value? was not declared in this scope
----- [ lot of error lines ] ------
gdal_wrap.cpp:1053: error: ?pval _wrap_propget_MajorObject? previously
declared here
gdal_wrap.cpp:3143: error: ?zend_property_reference? was not declared
in this scope
gdal_wrap.cpp:3143: error: ?property_reference? was not declared in this scope
make[2]: *** [gdal_wrap.o] Error 1
make[2]: Leaving directory `/usr/src/mypacks/gdal-1.5.3/swig/php'
make[1]: *** [build] Error 2
make[1]: Leaving directory `/usr/src/mypacks/gdal-1.5.3/swig'
-------

My configure script was ( using OpenMPI 1.2.8 compilers):

CC=/usr/local/bin/mpicc CXX=/usr/local/bin/mpicxx  ./configure
--with-threads --with-libz=internal --with-pg=/usr/bin/pg_config
--with-pcraster=internal --with-netcdf=/usr --with-png=internal
--with-libtiff=internal --with-geotiff=internal --with-jpeg=internal
--with-gif=internal --with-ogdi=/usr --with-hdf5=/usr
--with-jasper=/usr --with-ecw=/usr/local --with-ogr
--with-mysql=/usr/bin/mysql_config --with-xerces=yes
--with-xerces-inc=/usr/local/include/xercesc --with-xerces-lib=/usr
--with-expat=yes --with-expat-inc=/usr --with-expat-lib=/lib
--with-odbc=/usr --with-curl=/usr/bin/curl-config --with-sqlite3=yes
--with-geos=/usr/local/bin/geos-config --with-perl --with-php
--without-ruby --with-python 2>&1 | tee configure.log

Does anybody has any suggestion?

best regards.

-- 
Eduardo Kanegae
http://anthologis.com
From Roger.Bivand at nhh.no  Thu Nov  6 03:10:29 2008
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu Nov  6 03:11:36 2008
Subject: [gdal-dev] Re: [R-sig-Geo] Using RGDAL to "copy" header
	information...
In-Reply-To: <4911D577.2050300@ucdavis.edu>
References: <4911D577.2050300@ucdavis.edu>
Message-ID: <Pine.LNX.4.64.0811060855420.8340@reclus.nhh.no>

On Wed, 5 Nov 2008, Jonathan Greenberg wrote:

> R-geographers...
>
> I'm trying to solve a problem to implement a line-by-line tiled processing 
> using RGDAL (read 1 line of an image, process the one line, write one line of 
> the image to a binary file).  Everything except for the final step I'm able 
> to do using a combination of RGDAL and r-base commands.  Below is the basic 
> structure, the input file "elev" can be any image file GDAL supports -- the 
> code below just "copies" the image one line at a time:
>
> ###
>
> library(rgdal)
> infile='elev'
> outfile_base='testout'
> outfile_ext='.bil'
> outfile=paste(outfile_base,outfile_ext,sep='')
> outcon <- file(outfile, "wb")
>
> infile_info=GDALinfo(infile)
> nl=infile_info[[1]]
> ns=infile_info[[2]]
>
> for (row in 1:nl) {
>    templine <- readGDAL(infile,region.dim=c(1,ns),offset=c(row-1,0))
>    writeBin(templine[[1]], outcon,size=4)
> }
> close(outcon)
> #  Below doesn't work
> #  writeGDAL(templine,outfile_base,drivername='EHdr',type="Float32")
>
> ###
>
> The issue is this: I need to be able to effectively copy the 
> geographic/header information from the input file (the last line almost 
> works, but as you can see it sets the line #s to 1, not "ns"), and parse it 
> over to the output file (which is some form of a flat binary file -- in this 
> case, an Arc Binary Raster, but an ENVI binary output would also be good) -- 
> ideally I'd like to be able to modify this header, particularly the number 
> type (e.g. if the input file is an integer, and I'm writing out a floating 
> point binary, I need that reflected in the output header).  I can do this by 
> *manually* creating the output header via a series of ascii-writes, but I was 
> wondering if there is a more effective way of doing this using RGDAL that 
> might apply generically to the header of any binary image file I might write? 
> Thanks!

It is the internals of writeGDAL() and create2GDAL() without the bands:

data(meuse.grid)
gridded(meuse.grid) <- ~x+y

d.drv <- new("GDALDriver", "EHdr")

gp <- gridparameters(meuse.grid)
cellsize <- gp$cellsize
offset <- gp$cellcentre.offset
dims <- gp$cells.dim

nbands <- 1
tds.out <- new("GDALTransientDataset", driver = d.drv, rows = dims[2],
   cols = dims[1], bands = nbands, type = "Float32")

gt <- c(offset[1] - 0.5 * cellsize[1], cellsize[1], 0.0,
   offset[2] + (dims[2] -0.5) * cellsize[2], 0.0, -cellsize[2])
.Call("RGDAL_SetGeoTransform", tds.out, gt, PACKAGE = "rgdal")

list.files(tempdir())

fn <- tempfile()

saveDataset(tds.out, fn)

list.files(tempdir())

GDAL.close(tds.out)

list.files(tempdir())

However, the driver does commit the data file too, so you'd need to run 
the above code to produce the header so as not to overwrite your output 
data. The key thing is to get the input grid parameters right, but you've 
got them anyway. If you want the projection information out too, look in 
create2GDAL for the .Call() you need. Note that passing unchecked 
variables through .Call may crash your session - going through 
GridTopology should make sure that they are stored correctly.

Hope this helps,

Roger


>
> --j
>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From jukka.rahkonen at mmmtike.fi  Thu Nov  6 08:33:53 2008
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Nov  6 08:34:02 2008
Subject: [gdal-dev] Re: gdal_merge
References: <405306.77178.qm@web38407.mail.mud.yahoo.com>
	<490B0427.8050006@pobox.com> <4910AA47.4080001@gov.yk.ca>
Message-ID: <loom.20081106T132636-215@post.gmane.org>

Matt Wilkie <matt.wilkie <at> gov.yk.ca> writes:

> 
> > By the way, to get the order of precidence you want you should also
> > reverse the order of the input images so that image1.tif is last
> > (overlayed to top of everything else).
> 
> Thanks for clarifying this Frank.
> 
> Is there way to do the same with gdalwarp? I ask because I sometimes 
> need to stack images rather than blend them, but also want to use 
> bilinear or cubic resampling.

Hi,

It's simple, just give an existing file as output image file.  If you start
making the mosaic from beginning then give the desired image extents of the
final mosaic when warping the first image tile by using [-te xmin ymin xmax
ymax] [-tr xres yres]. File formats like uncompressed tiff of .img are best for
this usage.  

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Thu Nov  6 14:17:31 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Nov  6 14:17:40 2008
Subject: [gdal-dev] DIMAP driver fail to get some meta data
In-Reply-To: <ddc797c30811050739y6214592dye7096f0881af3ec9@mail.gmail.com>
References: <ddc797c30811050739y6214592dye7096f0881af3ec9@mail.gmail.com>
Message-ID: <200811062017.32105.even.rouault@mines-paris.org>

Guillaume,

yes, what you've observed is consistant with the source code of the driver.

To improve the situation, I've added in r15687 support for setting metadata at 
the raster band level (that is to say with GDALRasterBand::GetMetadata)

Here's the new output :

$ apps/gdalinfo dimap/DN000340T_L1R.dim 
Driver: DIMAP/SPOT DIMAP
Files: dimap/DN000340T_L1R.dim
       dimap/DN000340T_L1R.tif
....
Metadata:
  DATASET_PRODUCER_NAME=DMC International Imaging Ltd.
  DATASET_PRODUCTION_DATE=2006-06-08
  MISSION=NIGERIASAT
  IMAGING_DATE=2006-01-30
  IMAGING_TIME=09:18:22
  GEOMETRIC_PROCESSING=1R
  RADIOMETRIC_PROCESSING=Cubic convolution
  SPECTRAL_BAND_INDEX=1
  SPECTRAL_BAND_DESCRIPTION=NIR
  SPECTRAL_PHYSICAL_GAIN=0.6376299283778701
  SPECTRAL_PHYSICAL_BIAS=0.0642515909964508
  SPECTRAL_PHYSICAL_UNIT=W/m2/sr/m-6
....
Band 1 Block=6703x8 Type=Byte, ColorInterp=Red
  Metadata:
    BAND_DESCRIPTION=NIR
    PHYSICAL_GAIN=0.6376299283778701
    PHYSICAL_BIAS=0.0642515909964508
    PHYSICAL_UNIT=W/m2/sr/m-6
Band 2 Block=6703x8 Type=Byte, ColorInterp=Green
  Metadata:
    BAND_DESCRIPTION=RED
    PHYSICAL_GAIN=0.6190674084836884
    PHYSICAL_BIAS=0.0666344554873623
    PHYSICAL_UNIT=W/m2/sr/m-6
Band 3 Block=6703x8 Type=Byte, ColorInterp=Blue
  Metadata:
    BAND_DESCRIPTION=GREEN
    PHYSICAL_GAIN=0.717558361863802
    PHYSICAL_BIAS=0.019273652406175568
    PHYSICAL_UNIT=W/m2/sr/m-6

In case someone relied on the SPECTRAL_xxx metadata items in the dataset 
metadata, I've kept them but they should be considered as a deprecated way of 
getting the metadata at the raster band level.

Best regards,
Even

Le Wednesday 05 November 2008 16:39:42 guillaume huby, vous avez ?crit?:
> I have some trouble getting some meta data using DIMAP Driver.
>
> gdalinfo --version
>
> > GDAL 1.6.0dev, FWTools 2.2.8, released 2008/10/29
>
> Sample data can be found here :
> ftp://ftp.dmcii.com/samples/32m_MS_L1R/DN000340T_L1R.zip
>
> The meta data file contains this data :
>
> ...
>
> > <Image_Interpretation>
> >         <Spectral_Band_Info>
> >             <BAND_INDEX>1</BAND_INDEX>
> >             <BAND_DESCRIPTION>NIR</BAND_DESCRIPTION>
> >             <PHYSICAL_GAIN>0.6376299283778701</PHYSICAL_GAIN>
> >             <PHYSICAL_BIAS>0.0642515909964508</PHYSICAL_BIAS>
> >             <PHYSICAL_UNIT>W/m2/sr/m-6</PHYSICAL_UNIT>
> >         </Spectral_Band_Info>
> >         <Spectral_Band_Info>
> >             <BAND_INDEX>2</BAND_INDEX>
> >             <BAND_DESCRIPTION>RED</BAND_DESCRIPTION>
> >             <PHYSICAL_GAIN>0.6190674084836884</PHYSICAL_GAIN>
> >             <PHYSICAL_BIAS>0.0666344554873623</PHYSICAL_BIAS>
> >             <PHYSICAL_UNIT>W/m2/sr/m-6</PHYSICAL_UNIT>
> >         </Spectral_Band_Info>
> >         <Spectral_Band_Info>
> >             <BAND_INDEX>3</BAND_INDEX>
> >             <BAND_DESCRIPTION>GREEN</BAND_DESCRIPTION>
> >             <PHYSICAL_GAIN>0.717558361863802</PHYSICAL_GAIN>
> >             <PHYSICAL_BIAS>0.019273652406175568</PHYSICAL_BIAS>
> >             <PHYSICAL_UNIT>W/m2/sr/m-6</PHYSICAL_UNIT>
> >         </Spectral_Band_Info>
> >     </Image_Interpretation>
> > ...
>
> And gdalinfo outputs :
> >gdalinfo DN000340T_L1R.dim
> > Driver: DIMAP/SPOT DIMAP
> > ...
> > Metadata:
> >   ...
> >   SPECTRAL_BAND_INDEX=1
> >   SPECTRAL_BAND_DESCRIPTION=NIR
> >   SPECTRAL_PHYSICAL_GAIN=0.6376299283778701
> >   SPECTRAL_PHYSICAL_BIAS=0.0642515909964508
> >   SPECTRAL_PHYSICAL_UNIT=W/m2/sr/m-6
> > ...
>
> The problem is that there is spectral info only for first band. I would
> like to see the data for each band.
>
> I also made a C++ program using the API ( GDALDataset::GetMetadata and
> GDALRasterBand::GetMetadata )giving no more results.
>
> Is there some turn-around to get the meta-data using the driver ?
> Should I submit a bug ?
>
> Thank you for your reply.
>
> Guillaume.


From bfraser at geoanalytic.com  Thu Nov  6 18:08:51 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Nov  6 18:09:00 2008
Subject: [gdal-dev] resampling artifacts
Message-ID: <49137903.8020907@geoanalytic.com>


Has anyone experienced resampling artifacts using gdalwarp?

    I'm using v1.5.2, and with lanczos or cubicspline resampling, I get a vertical line and a horizontal line of seemingly random pixels about 6 pixels wide running through the center of the output image.  

    I'm resampling a 16-bit tif image from 12.5 meters to 200 meters.  The other resampling methods result in an ok output image.

I've attached a png to illustrate the effect.   I thought I'd ask before filing a bug report...

Thanks!
Brent Fraser
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 20080731_400m_cs.png
Type: image/png
Size: 26119 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081106/d7f24faf/20080731_400m_cs-0001.png
From even.rouault at mines-paris.org  Thu Nov  6 18:14:56 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Nov  6 18:15:01 2008
Subject: [gdal-dev] resampling artifacts
In-Reply-To: <49137903.8020907@geoanalytic.com>
References: <49137903.8020907@geoanalytic.com>
Message-ID: <200811070014.57474.even.rouault@mines-paris.org>

Brent,

Have you tried with GDAL 1.6.0 beta ? Much work has been done in that area and 
those artifacts should have disappeared and people. See 
http://trac.osgeo.org/gdal/ticket/2627

Le Friday 07 November 2008 00:08:51 Brent Fraser, vous avez ?crit?:
> Has anyone experienced resampling artifacts using gdalwarp?
>
>     I'm using v1.5.2, and with lanczos or cubicspline resampling, I get a
> vertical line and a horizontal line of seemingly random pixels about 6
> pixels wide running through the center of the output image.
>
>     I'm resampling a 16-bit tif image from 12.5 meters to 200 meters.  The
> other resampling methods result in an ok output image.
>
> I've attached a png to illustrate the effect.   I thought I'd ask before
> filing a bug report...
>
> Thanks!
> Brent Fraser


From matt.wilkie at gov.yk.ca  Thu Nov  6 19:06:13 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Thu Nov  6 19:06:16 2008
Subject: [gdal-dev] ogr2ogr: why only inserting the first file?
Message-ID: <49138675.1070606@gov.yk.ca>

Hello world,

I'm trying to merge a bunch of shapefiles using the syntax below. I 
could have sworn this was working for me last year, but maybe I just 
didn't look closely enough at the time.

1. Download 2 or more of these files, unpack somewhere:
http://ftp2.cits.rncan.gc.ca/pub/canvec/50k_gml/094/a/

2. Create shapefile containers from the first GML file:
    ogr2ogr shp-out 094a01_3_0.gml

3. Append the rest:
    ogr2ogr shp-out -append 094a02_3_0.gml 094a03_3_0.gml ...

However only data from the first file are present. Why doesn't this work?

I'm using ogr utiltiies from "GDAL 1.5.3, released 2008/09/09" Osgeo4w 
(as reported by "gdalinfo --version". I couldn't figure out how to get 
ogr to report it's number).

I also tried to merge into gml, but the output file was <1kb and empty:
   ogr2ogr -f gml test-merge.gml 094a01_3_0.gml 094a02_3_0.gml



thanks in advance for your time,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------
From even.rouault at mines-paris.org  Fri Nov  7 04:04:22 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov  7 04:04:28 2008
Subject: [gdal-dev] ogr2ogr: why only inserting the first file?
In-Reply-To: <49138675.1070606@gov.yk.ca>
References: <49138675.1070606@gov.yk.ca>
Message-ID: <200811071004.23647.even.rouault@mines-paris.org>

Matt,

I doubt very much that specifying more than 1 source file to ogr2ogr has ever 
worked. I've checked up to GDAL 1.4.0 source code and ogr2ogr has only taken 
one source dataset at a time.

I also tried (with GDAL 1.6.0beta):
ogr2ogr -f gml test-merge.gml 094a01_3_0.gml
ogr2ogr -append -f gml test-merge.gml 094a02_3_0.gml

and the resulting test-merge.gml is not empty. However it contains only the 
features and layers of 094a02_3_0.gml (but I'm not that surprised as GML is a 
text format, so it doesn't support very well random access, merging, etc), 
whereas doing the same operations to shapefile output worked fine.
From klandrus at progeny.net  Fri Nov  7 07:46:28 2008
From: klandrus at progeny.net (Kurt Landrus)
Date: Fri Nov  7 07:46:32 2008
Subject: (nwl)  Re: [gdal-dev] Saving data to the TEXT domain NITF
In-Reply-To: <49061DB4.3050707@pobox.com>
References: <3ABD474B-9F88-4F9C-9B83-BB3F1D9BCC4C@progeny.net>
	<49061DB4.3050707@pobox.com>
Message-ID: <13EE5196-9150-4A31-AC3F-1EB6D83FC6AE@progeny.net>

What about TRE domain data, does the NITF driver support saving data  
to the TRE domain?
I've tried the following code to save tre data, but there is not TRE  
segment in the new file, and
the error code returned is 0.

        err = GDALSetMetadataItem(dataset, tre, treValue, "TRE");
        IFDBG printf( "  saved TRE %s= %s\n errcode=%i\n", tre,  
treValue, err);


Kurt Landrus
Progeny Systems Corp.
klandrus@progeny.net
Office: 	703-368-6107 x424
Lab: 	703-368-6107 x520



On Oct 27, 2008, at 3:59 PM, Frank Warmerdam wrote:

> Kurt Landrus wrote:
>> Hello;
>> I working with GDAL to support NITF imagery, I'm having a problem  
>> with trying to save text data to the I can read data from the Text  
>> segment just fine. However when I try to save data back to the nitf  
>> in the TEXT segment using the call
>> below,  I receive no err, but the data doesn't get saved.
>> // save text segment to dataset.
>> err = GDALSetMetadataItem(dataset, "DATA_0", tmp3, "TEXT");
>> When I try to verify the text in the TEXT segment using gdalinfo,  
>> there is no TEXT segment data contained in the NITF file.
>> Is there other calls required to set up this,  what I am doing wrong.
>> Thanks;
>
> Kurt,
>
> I believe that at this time the GDAL NITF driver does not support  
> writing
> out text segments.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
>

From bclay at ball.com  Fri Nov  7 08:46:00 2008
From: bclay at ball.com (Clay, Bruce)
Date: Fri Nov  7 08:46:03 2008
Subject: [gdal-dev] Is GDAL reentrant
Message-ID: <C482FF98AE985A47B8C982FD429C9E3402970DC4@daytonmsg2k3.AERO.BALL.COM>

I have a Microsoft application with multiple tabs / property pages.
Each tab is controlled by a separate class.  I have a separate instance
of GDAL in each class.  I also had an instance in a popup that I used to
connect to the database.  After the user logins and the popup window
goes away it seems that I have to reregister the OGR drivers in the tabs
as if the OGRCleanupAll in the destructor of the popup was being applied
to the instances in the tabs as well.

 

Is GDAL / OGR reentrant?  Can we have multiple instances that act
independently?

 

 

Bruce

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081107/2fd03a21/attachment.html
From bfraser at geoanalytic.com  Fri Nov  7 10:54:39 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Fri Nov  7 10:54:56 2008
Subject: [gdal-dev] resampling artifacts
In-Reply-To: <200811070014.57474.even.rouault@mines-paris.org>
References: <49137903.8020907@geoanalytic.com>
	<200811070014.57474.even.rouault@mines-paris.org>
Message-ID: <491464BF.7030402@geoanalytic.com>

Thanks Even, I'll try the 1.6.0 beta.

Even Rouault wrote:
> Brent,
> 
> Have you tried with GDAL 1.6.0 beta ? Much work has been done in that area and 
> those artifacts should have disappeared and people. See 
> http://trac.osgeo.org/gdal/ticket/2627
> 
> Le Friday 07 November 2008 00:08:51 Brent Fraser, vous avez ?crit :
>> Has anyone experienced resampling artifacts using gdalwarp?
>>
>>     I'm using v1.5.2, and with lanczos or cubicspline resampling, I get a
>> vertical line and a horizontal line of seemingly random pixels about 6
>> pixels wide running through the center of the output image.
>>
>>     I'm resampling a 16-bit tif image from 12.5 meters to 200 meters.  The
>> other resampling methods result in an ok output image.
>>
>> I've attached a png to illustrate the effect.   I thought I'd ask before
>> filing a bug report...
>>
>> Thanks!
>> Brent Fraser
> 
> 
> 
From woodbri at swoodbridge.com  Fri Nov  7 12:21:09 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Nov  7 12:20:26 2008
Subject: [gdal-dev] JPEG2000 issues
Message-ID: <49147905.7070207@swoodbridge.com>

Hi Frank, et al,

I'm working with GDAL 1.5.3, released 2008/09/09 built with libjasper so 
I can process some DOQQ composites and chop them into smaller tiles.

Below is a typical image but I get a bunch of errors in gdalinfo. The 
system has like 6 GB of memory and only about 1.5GB of swap. The 
compressed image is huge at 538MB. I tried 3-4 images in the directory 
and got the same report on all of them.

Any thoughts on this?
Is this a real problem, ie. I will not be able to access these images.
Other options solutions?

We also have JP2MrSID support, is there a way to force it to use this 
driver instead of the JPEG2000 driver and see if that works any better?

Thanks,
   -Steve

$ ls -lh /var/data/raw_data/indiana/ortho_1-1_1m_j_in175_2008_1.jp2
-rw-rw-r--  1 dallen users 563M Oct 20 16:17 
/var/data/raw_data/indiana/ortho_1-1_1m_j_in175_2008_1.jp2

$ gdalinfo /var/data/raw_data/indiana/ortho_1-1_1m_j_in175_2008_1.jp2
Driver: JPEG2000/JPEG-2000 part 1 (ISO/IEC 15444-1)
Files: /var/data/raw_data/indiana/ortho_1-1_1m_j_in175_2008_1.jp2
Size is 44462, 49524
Coordinate System is:
PROJCS["NAD83 / UTM zone 16N",
     GEOGCS["NAD83",
         DATUM["North_American_Datum_1983",
             SPHEROID["GRS 1980",6378137,298.2572221010042,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6269"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4269"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",-87],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","26916"]]
Origin = (559388.000000000000000,4296871.000000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Corner Coordinates:
Upper Left  (  559388.000, 4296871.000) ( 86d18'57.27"W, 38d49'7.03"N)
Lower Left  (  559388.000, 4247347.000) ( 86d19'12.47"W, 38d22'20.43"N)
Upper Right (  603850.000, 4296871.000) ( 85d48'13.79"W, 38d48'52.19"N)
Lower Right (  603850.000, 4247347.000) ( 85d48'40.36"W, 38d22'5.82"N)
Center      (  581619.000, 4272109.000) ( 86d 3'45.98"W, 38d35'37.38"N)
error: cannot decode code stream
Band 1 Block=256x256 Type=Byte, ColorInterp=Undefined
error: expecting signature box
   Metadata:
     LAYER_TYPE=athematic
error: cannot get box
<GDALRasterAttributeTable/>

error: cannot get box
Band 2 Block=256x256 Type=Byte, ColorInterp=Undefined
error: cannot get box
   Metadata:
     LAYER_TYPE=athematic
error: cannot get box
error: cannot get box
Band 3 Block=256x256 Type=Byte, ColorInterp=Undefined
error: cannot get box
   Metadata:
     LAYER_TYPE=athematic
error: cannot get box
error: cannot get box
Band 4 Block=256x256 Type=Byte, ColorInterp=Undefined
   Metadata:
     LAYER_TYPE=athematic
error: cannot get box

From woodbri at swoodbridge.com  Fri Nov  7 12:32:21 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Nov  7 12:31:39 2008
Subject: [gdal-dev] JPEG2000 issues
In-Reply-To: <49147905.7070207@swoodbridge.com>
References: <49147905.7070207@swoodbridge.com>
Message-ID: <49147BA5.3010504@swoodbridge.com>

Stephen Woodbridge wrote:
> Hi Frank, et al,
> 
> I'm working with GDAL 1.5.3, released 2008/09/09 built with libjasper so 
> I can process some DOQQ composites and chop them into smaller tiles.
> 
> Below is a typical image but I get a bunch of errors in gdalinfo. The 
> system has like 6 GB of memory and only about 1.5GB of swap. The 
> compressed image is huge at 538MB. I tried 3-4 images in the directory 
> and got the same report on all of them.
> 
> Any thoughts on this?
> Is this a real problem, ie. I will not be able to access these images.
> Other options solutions?
> 
> We also have JP2MrSID support, is there a way to force it to use this 
> driver instead of the JPEG2000 driver and see if that works any better?
> 
> Thanks,
>   -Steve
> 
> $ ls -lh /var/data/raw_data/indiana/ortho_1-1_1m_j_in175_2008_1.jp2
> -rw-rw-r--  1 dallen users 563M Oct 20 16:17 
> /var/data/raw_data/indiana/ortho_1-1_1m_j_in175_2008_1.jp2
> 
> $ gdalinfo /var/data/raw_data/indiana/ortho_1-1_1m_j_in175_2008_1.jp2
> Driver: JPEG2000/JPEG-2000 part 1 (ISO/IEC 15444-1)
> Files: /var/data/raw_data/indiana/ortho_1-1_1m_j_in175_2008_1.jp2
> Size is 44462, 49524
> Coordinate System is:
> PROJCS["NAD83 / UTM zone 16N",
>     GEOGCS["NAD83",
>         DATUM["North_American_Datum_1983",
>             SPHEROID["GRS 1980",6378137,298.2572221010042,
>                 AUTHORITY["EPSG","7019"]],
>             AUTHORITY["EPSG","6269"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4269"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-87],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","26916"]]
> Origin = (559388.000000000000000,4296871.000000000000000)
> Pixel Size = (1.000000000000000,-1.000000000000000)
> Corner Coordinates:
> Upper Left  (  559388.000, 4296871.000) ( 86d18'57.27"W, 38d49'7.03"N)
> Lower Left  (  559388.000, 4247347.000) ( 86d19'12.47"W, 38d22'20.43"N)
> Upper Right (  603850.000, 4296871.000) ( 85d48'13.79"W, 38d48'52.19"N)
> Lower Right (  603850.000, 4247347.000) ( 85d48'40.36"W, 38d22'5.82"N)
> Center      (  581619.000, 4272109.000) ( 86d 3'45.98"W, 38d35'37.38"N)
> error: cannot decode code stream
> Band 1 Block=256x256 Type=Byte, ColorInterp=Undefined
> error: expecting signature box
>   Metadata:
>     LAYER_TYPE=athematic
> error: cannot get box
> <GDALRasterAttributeTable/>
> 
> error: cannot get box
> Band 2 Block=256x256 Type=Byte, ColorInterp=Undefined
> error: cannot get box
>   Metadata:
>     LAYER_TYPE=athematic
> error: cannot get box
> error: cannot get box
> Band 3 Block=256x256 Type=Byte, ColorInterp=Undefined
> error: cannot get box
>   Metadata:
>     LAYER_TYPE=athematic
> error: cannot get box
> error: cannot get box
> Band 4 Block=256x256 Type=Byte, ColorInterp=Undefined
>   Metadata:
>     LAYER_TYPE=athematic
> error: cannot get box
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

I must be a Zen thing that I always find answers after a give up looking 
and post to the list. So, to reply to myself, I was about to use the 
JP2MrSID driver like the following and without any error. So, I'll try 
to move forward using this more of access. I'm still interested in any 
other thoughts you have on the above issues.

Thanks,
   -Steve

$ GDAL_SKIP=JPEG2000  gdalinfo 
/var/data/raw_data/indiana/ortho_1-1_1m_j_in175_2008_1.jp2
Driver: JP2MrSID/MrSID JPEG2000
Files: /var/data/raw_data/indiana/ortho_1-1_1m_j_in175_2008_1.jp2
Size is 44462, 49524
Coordinate System is:
PROJCS["NAD83 / UTM zone 16N",
     GEOGCS["NAD83",
         DATUM["North_American_Datum_1983",
             SPHEROID["GRS 1980",6378137,298.2572221010002,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6269"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4269"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",-87],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","26916"]]
Origin = (559388.000000000000000,4296871.000000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Metadata:
   IMAGE__ENCODING_APPLICATION=GeoExpress 7.0.0.2052
   IMAGE__INPUT_FILE_SIZE=9095986793.000000
   IMAGE__INPUT_FORMAT=TIFF w/ World File
 
IMAGE__INPUT_NAME=O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\BECKS 
MILL NE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\BECKS 
MILL NW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\BECKS 
MILL SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\BECKS 
MILL SW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\BORDEN 
NW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\BORDEN 
SW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\CAMPBELLSBURG 
NE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\CAMPBELLSBURG 
SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\FREDERICKSBURG 
NE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\FREDERICKSBURG 
NW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\FREDERICKSBURG 
SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\FREDERICKSBURG 
SW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\HARDINSBURG 
NE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\HARDINSBURG 
SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\HENRYVILLE 
NW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\HENRYVILLE 
SW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\KOSSUTH 
NE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\KOSSUTH 
NW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\KOSSUTH 
SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\KOSSUTH 
SW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\LITTLE 
YORK NE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\LITTLE 
YORK NW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\LITTLE 
YORK SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\LITTLE 
YORK SW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\LIVONIA 
NE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\LIVONIA 
SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\MEDORA 
SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\MEDORA 
SW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\PALMYRA 
NE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\PALMYRA 
NW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\PALMYRA 
SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\PALMYRA 
SW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\SALEM 
NE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\SALEM 
NW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\SALEM 
SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\SALEM 
SW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\SMEDLEY 
NE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\SMEDLEY 
NW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\SMEDLEY 
SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\SMEDLEY 
SW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\SOUTH 
BOSTON NE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\SOUTH 
BOSTON NW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\SOUTH 
BOSTON SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\SOUTH 
BOSTON SW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\TAMPICO 
SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\TAMPICO 
SW.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\TUNNELTON 
SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\VALLONIA 
SE.tif, 
O:\DMC_Output\13a\projects\5835-031_IN08\South_sheets_4edit\new_QQs\2-7_10-13_16-18\gtif\finals\Washington_IN_18175_49\VALLONIA 
SW.tif
   IMAGE__X_ROTATION=0.000000
   IMAGE__Y_ROTATION=0.000000
   GEOTIFF_NUM__1024__GTModelTypeGeoKey=1
   GEOTIFF_CHAR__GTModelTypeGeoKey=ModelTypeProjected
   GEOTIFF_NUM__1025__GTRasterTypeGeoKey=1
   GEOTIFF_CHAR__GTRasterTypeGeoKey=RasterPixelIsArea
   GEOTIFF_NUM__2050__GeogGeodeticDatumGeoKey=6269
   GEOTIFF_CHAR__GeogGeodeticDatumGeoKey=Datum_North_American_Datum_1983
   GEOTIFF_NUM__2056__GeogEllipsoidGeoKey=7019
   GEOTIFF_CHAR__GeogEllipsoidGeoKey=Ellipse_GRS_1980
   GEOTIFF_NUM__3072__ProjectedCSTypeGeoKey=26916
   GEOTIFF_CHAR__ProjectedCSTypeGeoKey=PCS_NAD83_UTM_zone_16N
   GEOTIFF_NUM__3073__PCSCitationGeoKey=Universal Transverse Mercator; 
North American 1983; GRS80
   GEOTIFF_NUM__3076__ProjLinearUnitsGeoKey=9001
   GEOTIFF_CHAR__ProjLinearUnitsGeoKey=Linear_Meter
   GEOTIFF_NUM__3080__ProjNatOriginLongGeoKey=-87.000000
   GEOTIFF_NUM__3081__ProjNatOriginLatGeoKey=0.000000
   GEOTIFF_NUM__3082__ProjFalseEastingGeoKey=500000.000000
   GEOTIFF_NUM__3083__ProjFalseNorthingGeoKey=0.000000
   GEOTIFF_NUM__3092__ProjScaleAtNatOriginGeoKey=0.999600
   IMAGE__BITS_PER_SAMPLE=8
   IMAGE__WIDTH=44462
   IMAGE__HEIGHT=49524
   IMAGE__COLOR_SCHEME=10
   IMAGE__DATA_TYPE=0
   IMAGE__DYNAMIC_RANGE_WINDOW=256.000000
   IMAGE__DYNAMIC_RANGE_LEVEL=127.500000
   IMAGE__NO_DATA_VALUE=0,0,0,0
   IMAGE__TRANSPARENT_DATA_VALUE=0,0,0,0
   IMAGE__XY_ORIGIN=559388.500000,4296870.500000
   IMAGE__X_RESOLUTION=1.000000
   IMAGE__Y_RESOLUTION=1.000000
   IMAGE__WKT=PROJCS["NAD83 / UTM zone 
16N",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS 
1980",6378137,298.2572221010002,AUTHORITY["EPSG","7019"]],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4269"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-87],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","26916"]]
Corner Coordinates:
Upper Left  (  559388.000, 4296871.000) ( 86d18'57.27"W, 38d49'7.03"N)
Lower Left  (  559388.000, 4247347.000) ( 86d19'12.47"W, 38d22'20.43"N)
Upper Right (  603850.000, 4296871.000) ( 85d48'13.79"W, 38d48'52.19"N)
Lower Right (  603850.000, 4247347.000) ( 85d48'40.36"W, 38d22'5.82"N)
Center      (  581619.000, 4272109.000) ( 86d 3'45.98"W, 38d35'37.38"N)
Band 1 Block=1024x128 Type=Byte, ColorInterp=Undefined
   Minimum=0.000, Maximum=194.000, Mean=83.074, StdDev=36.912
   Overviews: 22231x24762, 11116x12381, 5558x6191, 2779x3096, 1390x1548, 
695x774, 348x387, 174x194, 87x97, 44x49, 22x25, 11x13, 6x7, 3x4
   Metadata:
     LAYER_TYPE=athematic
<GDALRasterAttributeTable/>

Band 2 Block=1024x128 Type=Byte, ColorInterp=Undefined
   Minimum=0.000, Maximum=187.000, Mean=99.809, StdDev=40.469
   Overviews: 22231x24762, 11116x12381, 5558x6191, 2779x3096, 1390x1548, 
695x774, 348x387, 174x194, 87x97, 44x49, 22x25, 11x13, 6x7, 3x4
   Metadata:
     LAYER_TYPE=athematic
Band 3 Block=1024x128 Type=Byte, ColorInterp=Undefined
   Minimum=0.000, Maximum=166.000, Mean=102.323, StdDev=40.042
   Overviews: 22231x24762, 11116x12381, 5558x6191, 2779x3096, 1390x1548, 
695x774, 348x387, 174x194, 87x97, 44x49, 22x25, 11x13, 6x7, 3x4
   Metadata:
     LAYER_TYPE=athematic
Band 4 Block=1024x128 Type=Byte, ColorInterp=Undefined
   Minimum=0.000, Maximum=225.000, Mean=165.243, StdDev=63.705
   Overviews: 22231x24762, 11116x12381, 5558x6191, 2779x3096, 1390x1548, 
695x774, 348x387, 174x194, 87x97, 44x49, 22x25, 11x13, 6x7, 3x4
   Metadata:
     LAYER_TYPE=athematic

From Sebastien.Donnet at amec.com  Fri Nov  7 12:39:35 2008
From: Sebastien.Donnet at amec.com (Donnet, Sebastien)
Date: Fri Nov  7 12:54:44 2008
Subject: [gdal-dev] S-57 layers export to ASCII
Message-ID: <D688BDE22B02984496332260B9E36A8F09F836E8@ATT1-EX1.am.int.amec.com>


Hi,
 
I'm not sure I'm in the right spot to post this, but I couldn't find a
better place, forgive me if it is not. 
 
I'm trying to export 2 layers from a S-57 ENC (Electronic Nautical
Chart) into a "human readable" format, such as an ASCII or text file
like: X,Y,Z coordinates.
 
Basically, the "end-goal" is to create a DEM (Digital Elevation Model)
of the sea-floor to run numerical models (such as waves and currents) on
it. 
 
To get this, what I needed was to extract the layers "COALNE" and
"SOUNDG" from my S-57 nautical chart, and have them as 2 ASCII or text
files with : X and Y coordinates (for the coastline) and X, Y and Z
coordinates (for the depth or sounding).
 
The way I went was to first extract all the layers of the S-57 file into
shapefiles like this:
 
>ogr2ogr -skipfailure outshp mys57file.000
 
and then to convert the COALNE.shp and SOUNDG.shp into GMT ascii like
this:
 
>ogr2ogr -f "GMT" SOUNDG.gmt SOUNDG.shp
>ogr2ogr -f "GMT" COALNE.gmt COALNE.shp
 
That worked pretty well, since I can relatively easily read the field of
the gmt files, and I got what I was looking for... 
but ! it is not a very "sexy" way I found, and I was wondering if there
where no better ways to achieve this...
 
I tried several things such as: 
 
>ogr2ogr -skipfailure -f "GMT" outgmt mys57file.000
ERROR 1: Features without geometry not supported by GMT writer.
ERROR 1: Terminating translation prematurely after failed
translation of layer DSID
 
or: 
 
>ogr2ogr -select "COALNE,SOUNDG" -f  "GMT" outgmt mys57file.000
Field 'COALNE' not found in source layer.
ERROR 1 : Terminating translation prematurely after failed
translation of layer DSID
 
or also tried with CSV file type (better files for me to read) such as:
 
>ogr2ogr -f "CSV" SOUNDG.csv SOUNDG.shp -nlt GEOMETRY=AS_XYZ
-nlt GEOMETRY=AS_XYZ: type not recognised
 
 
Some of those attempt might look a little stupid and I may have made
some writing errors, but please forgive me, I'm quite a beginner with
OGR and GDAL great library tools.
 
Any idea or suggestion will be appreciated, :-)
 
thanks,
 
 
S.


The information contained in this e-mail is intended only for the individual or entity to whom it is addressed. 
Its contents (including any attachments) may contain confidential and/or privileged information. 
If you are not an intended recipient you must not use, disclose, disseminate, copy or print its contents. 
If you receive this e-mail in error, please notify the sender by reply e-mail and delete and destroy the message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081107/957c45bf/attachment-0001.html
From neteler at osgeo.org  Fri Nov  7 13:20:34 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Fri Nov  7 13:20:36 2008
Subject: [gdal-dev] Question to Gdalinfo result
In-Reply-To: <20081105151800.265550@gmx.net>
References: <20081105151800.265550@gmx.net>
Message-ID: <86782b610811071020j68712398o68979900c854f1ee@mail.gmail.com>

On Wed, Nov 5, 2008 at 4:18 PM, Kai Behncke <Kai-Behncke@gmx.de> wrote:
> Dear users, I have an aerial image and did a "gdalinfo" to it:
>
>
> The result is (extract):
> --------------------------------------------
> Coordinate System is:
> GEOGCS["WGS 84",
>    DATUM["WGS_1984",
>        SPHEROID["WGS 84",6378137,298.2572235630016,
>            AUTHORITY["EPSG","7030"]],
>        AUTHORITY["EPSG","6326"]],
>    PRIMEM["Greenwich",0],
>    UNIT["degree",0.0174532925199433],
>    AUTHORITY["EPSG","4326"]]
> Origin = (8.028439291266251,52.303510658986561)
> Pixel Size = (0.000004896399317,-0.000004896399317)
> Metadata:
>  AREA_OR_POINT=Area
> Image Structure Metadata:
>  INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (   8.0284393,  52.3035107) (  8d 1'42.38"E, 52d18'12.64"N)
> Lower Left  (   8.0284393,  52.2664645) (  8d 1'42.38"E, 52d15'59.27"N)
> Upper Right (   8.0498072,  52.3035107) (  8d 2'59.31"E, 52d18'12.64"N)
> Lower Right (   8.0498072,  52.2664645) (  8d 2'59.31"E, 52d15'59.27"N)
> Center      (   8.0391232,  52.2849876) (  8d 2'20.84"E, 52d17'5.96"N)
> -----------------------------
>
> All right, the most seems very clear to me, but does anybody know what:
>
>            AUTHORITY["EPSG","7030"]],
>        AUTHORITY["EPSG","6326"]],
>
>    UNIT["degree",0.0174532925199433],
>    AUTHORITY["EPSG","4326"]]
>
> mean??

See
 http://www.epsg-registry.org/
 -> retrieve by code
    -> 6326
      ->  "World Geodetic System 1984
	    ... Code: EPSG::6326
	    ..."
           -> View

Like this you can look up these authoritative codes.
In GDAL they are used in lookup-tables etc.

Markus
From bclay at ball.com  Fri Nov  7 14:48:52 2008
From: bclay at ball.com (Clay, Bruce)
Date: Fri Nov  7 14:48:56 2008
Subject: [gdal-dev] KML problem
Message-ID: <C482FF98AE985A47B8C982FD429C9E3402970E5D@daytonmsg2k3.AERO.BALL.COM>

I am using OGR to create both a shapefile and a KML file.  The data in
the shapefile looks good and the values in the KML are the same as in
the shapefile but they are shifted up by 2 places.  There are 2 extra
attributes in the KML file (Name and Description). My "Longitude" value
appears in the "Description" field.

 

I tried to use CSLSetNameValue( ogrOptions, "DescriptionField", "None");
to eliminate the Description field but it did not work.

 

Is there any way to eliminate the Name and Description fields since I
don't have any values to set for them?

 

Bruce

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081107/6a3a3b53/attachment.html
From woodbri at swoodbridge.com  Fri Nov  7 14:57:19 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Nov  7 14:56:37 2008
Subject: [gdal-dev] How do I select 3 of 5 bands for output?
Message-ID: <49149D9F.70605@swoodbridge.com>

Hi again,

I have a script that was processing MrSID files and need to convert it 
to support jp2 files also. It seems pretty straight forward except the 
jp2 files have bands R,G,B,IR and I need to chop these into GeoTif tiles 
with only R,G,B bands.

The script was iterating over the src image and chopping it into tiles 
using the following command:

system("gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:$epsg 
-t_srs EPSG:4326 -te $xm $ym $xx $yx -rb -wm 250 --config 
GDAL_ONE_BIG_READ ON -co "TILED=YES" $infile $work/$outd/$outf\n");

1) How does this behave with R,G,B,IR as input and how can I get R,G,B 
only into the GeoTif?

2) Is the option -rb still valid? or should I change this to "-r bilinear"?

Thanks for the help,
   -Steve
From ivan.lucena at pmldnet.com  Fri Nov  7 15:11:48 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Fri Nov  7 15:11:50 2008
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gSG93IGRvIEkgc2VsZWN0IDMgb2YgNSBiYW5kcyBmb3Igb3V0cHV0Pw==?=
Message-ID: <20081107201148.7886.qmail@s466.sureserver.com>

Hi Steve,

>  I have a script that was processing MrSID files and need to convert it
>  to support jp2 files also. It seems pretty straight forward except the
>  jp2 files have bands R,G,B,IR and I need to chop these into GeoTif tiles
>  with only R,G,B bands.
>  
>  The script was iterating over the src image and chopping it into tiles
>  using the following command:
>  
>  system("gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:$epsg
>  -t_srs EPSG:4326 -te $xm $ym $xx $yx -rb -wm 250 --config
>  GDAL_ONE_BIG_READ ON -co "TILED=YES" $infile $work/$outd/$outf\n");
>  
>  1) How does this behave with R,G,B,IR as input and how can I get R,G,B
>  only into the GeoTif?

I would add one call to gdal_translate with "-b 1 -b 2 -b 3" first to build a VRT and then call gdalwarp from the VRT.

{
  system("gdaltranslate $infile -b 1 -b 2 -b 3 tmp.vrt");
  system("gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:$epsg -t_srs EPSG:4326 -te $xm $ym $xx $yx -rb -
wm 250 --config GDAL_ONE_BIG_READ ON -co "TILED=YES" tmp.vrt $work/$outd/$outf\n");
}
system("gdalmanage delete tmp.vrt");

Regards,

Ivan

From condit at sdsc.edu  Fri Nov  7 16:02:17 2008
From: condit at sdsc.edu (Christopher Condit)
Date: Fri Nov  7 16:02:21 2008
Subject: [gdal-dev] KML problem
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E3402970E5D@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E3402970E5D@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <845AADAC1106E44996327D62097E4C6B011A8559@et.ad.sdsc.edu>

Hi Bruce-
>I am using OGR to create both a shapefile and a KML file.? The data in the shapefile looks good and the >values in the KML are the same as in the shapefile but they are shifted up by 2 places.? There are 2 >extra attributes in the KML file (Name and Description). My "Longitude" value ?appears in the >"Description" field.
>I tried to use CSLSetNameValue( ogrOptions, "DescriptionField", "None"); to eliminate the Description >field but it did not work.

I need to look into this. Can you either:
1) File a defect on trac and include the shapefile
2) Email me the shapefile and I'll create the defect

Thanks,

-Chris

Christopher Condit
San Diego Supercomputer Center
858-822-5483
condit@sdsc.edu



From woodbri at swoodbridge.com  Fri Nov  7 17:44:41 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Nov  7 17:44:01 2008
Subject: [gdal-dev] How do I select 3 of 5 bands for output?
In-Reply-To: <20081107201148.7886.qmail@s466.sureserver.com>
References: <20081107201148.7886.qmail@s466.sureserver.com>
Message-ID: <4914C4D9.7070408@swoodbridge.com>

Lucena, Ivan wrote:
> Hi Steve,
> 
>>  I have a script that was processing MrSID files and need to convert it
>>  to support jp2 files also. It seems pretty straight forward except the
>>  jp2 files have bands R,G,B,IR and I need to chop these into GeoTif tiles
>>  with only R,G,B bands.
>>  
>>  The script was iterating over the src image and chopping it into tiles
>>  using the following command:
>>  
>>  system("gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:$epsg
>>  -t_srs EPSG:4326 -te $xm $ym $xx $yx -rb -wm 250 --config
>>  GDAL_ONE_BIG_READ ON -co "TILED=YES" $infile $work/$outd/$outf\n");
>>  
>>  1) How does this behave with R,G,B,IR as input and how can I get R,G,B
>>  only into the GeoTif?
> 
> I would add one call to gdal_translate with "-b 1 -b 2 -b 3" first to build a VRT and then call gdalwarp from the VRT.
> 
> {
>   system("gdaltranslate $infile -b 1 -b 2 -b 3 tmp.vrt");
>   system("gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:$epsg -t_srs EPSG:4326 -te $xm $ym $xx $yx -rb -
> wm 250 --config GDAL_ONE_BIG_READ ON -co "TILED=YES" tmp.vrt $work/$outd/$outf\n");
> }
> system("gdalmanage delete tmp.vrt");

OK, this might work, but it is incredibly slow. Then again probably 
doing much of anything with these images will be slow because they are 
HUGE. So looking for ways to speed this up. It looks like the .vrt file 
is really a GeoTif would it help later if the .vrt was made with -co 
"TILED=YES", can you do this with a .vrt file. I think the uncompressed 
3 band geoTif will be in the ballpark of 10GB, is this being made as a 
BigTiff? or will I run into problems when I hit the 2GB limit?

Anyway to get this to go faster? CPU is at 101%, 78MB of memory is being 
used, I have LOTS more if I can get gdal to use it.

-Steve
From woodbri at swoodbridge.com  Fri Nov  7 22:36:26 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Nov  7 22:35:48 2008
Subject: [gdal-dev] How do I select 3 of 5 bands for output?
Message-ID: <4915093A.3090005@swoodbridge.com>

Stephen Woodbridge wrote:
> Lucena, Ivan wrote:
>> Hi Steve,
>>
>>>  I have a script that was processing MrSID files and need to convert it
>>>  to support jp2 files also. It seems pretty straight forward except the
>>>  jp2 files have bands R,G,B,IR and I need to chop these into GeoTif 
>>> tiles
>>>  with only R,G,B bands.
>>>  
>>>  The script was iterating over the src image and chopping it into tiles
>>>  using the following command:
>>>  
>>>  system("gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:$epsg
>>>  -t_srs EPSG:4326 -te $xm $ym $xx $yx -rb -wm 250 --config
>>>  GDAL_ONE_BIG_READ ON -co "TILED=YES" $infile $work/$outd/$outf\n");
>>>  
>>>  1) How does this behave with R,G,B,IR as input and how can I get R,G,B
>>>  only into the GeoTif?
>>
>> I would add one call to gdal_translate with "-b 1 -b 2 -b 3" first to 
>> build a VRT and then call gdalwarp from the VRT.
>>
>> {
>>   system("gdaltranslate $infile -b 1 -b 2 -b 3 tmp.vrt");
>>   system("gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:$epsg 
>> -t_srs EPSG:4326 -te $xm $ym $xx $yx -rb -
>> wm 250 --config GDAL_ONE_BIG_READ ON -co "TILED=YES" tmp.vrt 
>> $work/$outd/$outf\n");
>> }
>> system("gdalmanage delete tmp.vrt");
> 
> OK, this might work, but it is incredibly slow. Then again probably 
> doing much of anything with these images will be slow because they are 
> HUGE. So looking for ways to speed this up. It looks like the .vrt file 
> is really a GeoTif would it help later if the .vrt was made with -co 
> "TILED=YES", can you do this with a .vrt file. I think the uncompressed 
> 3 band geoTif will be in the ballpark of 10GB, is this being made as a 
> BigTiff? or will I run into problems when I hit the 2GB limit?
> 
> Anyway to get this to go faster? CPU is at 101%, 78MB of memory is being 
> used, I have LOTS more if I can get gdal to use it.

OK, it took 2 hr 10 min to run:

GDAL_SKIP=JPEG2000 gdal_translate
/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2  -b 1 -b 2
-b 3 tmp.vrt

and the output file is 5.0 GB. And on top of this I still need to
gdalwarp this VRT file a bunch of times to chop it into smaller tiles. I
have hundreds of files to process. Any thoughts on how to speed this up?

-Steve

From ivan.lucena at pmldnet.com  Sat Nov  8 05:47:22 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Sat Nov  8 05:47:24 2008
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gSG93IGRvIEkgc2VsZWN0IDMgb2YgNSBiYW5kcyBmb3Igb3V0cHV0Pw==?=
Message-ID: <20081108104722.6163.qmail@s466.sureserver.com>

Hi Steve,

No, VRT files are not Geotiff, see [1], and they should not take more than a bunch of Kbytes. The problem is that in *our* gdal_translate command line *we* forgot "-of vrt" and the default format is Geotiff.

   system("gdaltranslate -OF VRT $infile -b 1 -b 2 -b 3 tmp.vrt");

Good luck,

Ivan

[1]: http://www.gdal.org/gdal_vrttut.html

>  -------Original Message-------
>  From: Stephen Woodbridge <woodbri@swoodbridge.com>
>  Subject: Re: [gdal-dev] How do I select 3 of 5 bands for output?
>  Sent: Nov 08 '08 03:36
>  
>  Stephen Woodbridge wrote:
>  > Lucena, Ivan wrote:
>  >> Hi Steve,
>  >>
>  >>>??I have a script that was processing MrSID files and need to convert it
>  >>>??to support jp2 files also. It seems pretty straight forward except the
>  >>>??jp2 files have bands R,G,B,IR and I need to chop these into GeoTif
>  >>> tiles
>  >>>??with only R,G,B bands.
>  >>>??
>  >>>??The script was iterating over the src image and chopping it into tiles
>  >>>??using the following command:
>  >>>??
>  >>>??system("gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:$epsg
>  >>>??-t_srs EPSG:4326 -te $xm $ym $xx $yx -rb -wm 250 --config
>  >>>??GDAL_ONE_BIG_READ ON -co "TILED=YES" $infile $work/$outd/$outf\n");
>  >>>??
>  >>>??1) How does this behave with R,G,B,IR as input and how can I get R,G,B
>  >>>??only into the GeoTif?
>  >>
>  >> I would add one call to gdal_translate with "-b 1 -b 2 -b 3" first to
>  >> build a VRT and then call gdalwarp from the VRT.
>  >>
>  >> {
>  >>?? system("gdaltranslate $infile -b 1 -b 2 -b 3 tmp.vrt");
>  >>?? system("gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:$epsg
>  >> -t_srs EPSG:4326 -te $xm $ym $xx $yx -rb -
>  >> wm 250 --config GDAL_ONE_BIG_READ ON -co "TILED=YES" tmp.vrt
>  >> $work/$outd/$outf\n");
>  >> }
>  >> system("gdalmanage delete tmp.vrt");
>  >
>  > OK, this might work, but it is incredibly slow. Then again probably
>  > doing much of anything with these images will be slow because they are
>  > HUGE. So looking for ways to speed this up. It looks like the .vrt file
>  > is really a GeoTif would it help later if the .vrt was made with -co
>  > "TILED=YES", can you do this with a .vrt file. I think the uncompressed
>  > 3 band geoTif will be in the ballpark of 10GB, is this being made as a
>  > BigTiff? or will I run into problems when I hit the 2GB limit?
>  >
>  > Anyway to get this to go faster? CPU is at 101%, 78MB of memory is being
>  > used, I have LOTS more if I can get gdal to use it.
>  
>  OK, it took 2 hr 10 min to run:
>  
>  GDAL_SKIP=JPEG2000 gdal_translate
>  /var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2??-b 1 -b 2
>  -b 3 tmp.vrt
>  
>  and the output file is 5.0 GB. And on top of this I still need to
>  gdalwarp this VRT file a bunch of times to chop it into smaller tiles. I
>  have hundreds of files to process. Any thoughts on how to speed this up?
>  
>  -Steve
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From paar at lenne3d.com  Sat Nov  8 10:39:42 2008
From: paar at lenne3d.com (Philip Paar)
Date: Sat Nov  8 10:54:55 2008
Subject: [gdal-dev] JPEG2000 ECW Issue
Message-ID: <59b28d1762654e2e9f08bcdfa6f06685@h1215603.SERVERKOMPETENZ.NET>

Hi,
I found a pixel depth/ECW issue with gdal_translate and JEPG2000 support (using FWTools 2.2.8. Win) . My input .IMG is 16bit signed while the resulting JP2 file looses 8 bit.

>compress_terrain 12_03_1_5_-32768.tif_-12_1588_.img
Input file size is 1000, 1000
Warning 1: ECW only supports Byte pixel data type, ignoring r
0...10...20...30...40...50...60...70...80...90...100 - done.

gdal_translate works fine with an older version, e.g.
GDAL 1.5dev, FWTools 1.3.9, released 2007/10/11

>compress_terrain 12_03_1_5_-32768.tif_-12_1588_.img
Input file size is 1000, 1000
0...10...20...30...40...50...60...70...80...90...100 - done.

Thanks for the help,
-Philip
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081108/8612f92d/attachment.html
From paar at lenne3d.com  Sat Nov  8 12:16:22 2008
From: paar at lenne3d.com (Philip Paar)
Date: Sat Nov  8 12:16:23 2008
Subject: [gdal-dev] JPEG2000 ECW Issue
Message-ID: <dd2b9faec8034152bf4caacff7720f5e@h1215603.SERVERKOMPETENZ.NET>

1. JPEG2000 ECW Issue (Philip Paar)

The whole command is:
gdal_translate -of jp2ecw -ot int16 -co "TARGET=0" -co "LARGE_OK=yes" %1 
%1.jp2

-Philip
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081108/3934f8aa/attachment.html
From woodbri at swoodbridge.com  Sat Nov  8 14:30:33 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sat Nov  8 14:30:06 2008
Subject: [gdal-dev] How do I select 3 of 5 bands for output?
In-Reply-To: <20081108104722.6163.qmail@s466.sureserver.com>
References: <20081108104722.6163.qmail@s466.sureserver.com>
Message-ID: <4915E8D9.6090804@swoodbridge.com>

Ahh, thank you for the link to the vrttut. This has got me going in the 
right direction. I actually did try the -of VRT but didn't know it was 
supposed to be a XML file so discounted it when the file was small.

So, my next problem is that when I run gdalwarp on the VRT file I get 
assertion errors like the following on about half of the tiles I try to 
create.

$ cat a
gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:26916 -t_srs 
EPSG:4326 -te -86.25 38.3125 -86.1875 38.375 -rb -wm 250 --config 
GDAL_ONE_BIG_READ ON -co "TILED=YES" 
/var/data/tiler-tiffs/11234-1226164462/src/tmp.vrt a.tif

$ sh a
Creating output file that is 6150P x 6150L.
Processing input file /var/data/tiler-tiffs/11234-1226164462/src/tmp.vrt.
gdalwarp: ../compressed/compressed.cpp:1724: bool 
kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' failed.
a: line 1: 11502 Aborted                 gdalwarp -srcnodata 0 
-dstnodata 0 -s_srs +init=epsg:26916 -t_srs EPSG:4326 -te -86.25 38.3125 
-86.1875 38.375 -rb -wm 250 --config GDAL_ONE_BIG_READ ON -co 
"TILED=YES" /var/data/tiler-tiffs/11234-1226164462/src/tmp.vrt a.tif

Is this because the tile extends outside the source image?

+-----------------+
|  src_image      |
|            +----------+
|            |  tile    |
|            |          |
|            +----------+
|                 |
+-----------------+

Or something similar to this? Any thoughts on the cause(s) and workarounds?

Thanks again for all the help.

-Steve

Lucena, Ivan wrote:
> Hi Steve,
> 
> No, VRT files are not Geotiff, see [1], and they should not take more than a bunch of Kbytes. The problem is that in *our* gdal_translate command line *we* forgot "-of vrt" and the default format is Geotiff.
> 
>    system("gdaltranslate -OF VRT $infile -b 1 -b 2 -b 3 tmp.vrt");
> 
> Good luck,
> 
> Ivan
> 
> [1]: http://www.gdal.org/gdal_vrttut.html
> 
>>  -------Original Message-------
>>  From: Stephen Woodbridge <woodbri@swoodbridge.com>
>>  Subject: Re: [gdal-dev] How do I select 3 of 5 bands for output?
>>  Sent: Nov 08 '08 03:36
>>  
>>  Stephen Woodbridge wrote:
>>  > Lucena, Ivan wrote:
>>  >> Hi Steve,
>>  >>
>>  >>>  I have a script that was processing MrSID files and need to convert it
>>  >>>  to support jp2 files also. It seems pretty straight forward except the
>>  >>>  jp2 files have bands R,G,B,IR and I need to chop these into GeoTif
>>  >>> tiles
>>  >>>  with only R,G,B bands.
>>  >>>  
>>  >>>  The script was iterating over the src image and chopping it into tiles
>>  >>>  using the following command:
>>  >>>  
>>  >>>  system("gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:$epsg
>>  >>>  -t_srs EPSG:4326 -te $xm $ym $xx $yx -rb -wm 250 --config
>>  >>>  GDAL_ONE_BIG_READ ON -co "TILED=YES" $infile $work/$outd/$outf\n");
>>  >>>  
>>  >>>  1) How does this behave with R,G,B,IR as input and how can I get R,G,B
>>  >>>  only into the GeoTif?
>>  >>
>>  >> I would add one call to gdal_translate with "-b 1 -b 2 -b 3" first to
>>  >> build a VRT and then call gdalwarp from the VRT.
>>  >>
>>  >> {
>>  >>   system("gdaltranslate $infile -b 1 -b 2 -b 3 tmp.vrt");
>>  >>   system("gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:$epsg
>>  >> -t_srs EPSG:4326 -te $xm $ym $xx $yx -rb -
>>  >> wm 250 --config GDAL_ONE_BIG_READ ON -co "TILED=YES" tmp.vrt
>>  >> $work/$outd/$outf\n");
>>  >> }
>>  >> system("gdalmanage delete tmp.vrt");
>>  >
>>  > OK, this might work, but it is incredibly slow. Then again probably
>>  > doing much of anything with these images will be slow because they are
>>  > HUGE. So looking for ways to speed this up. It looks like the .vrt file
>>  > is really a GeoTif would it help later if the .vrt was made with -co
>>  > "TILED=YES", can you do this with a .vrt file. I think the uncompressed
>>  > 3 band geoTif will be in the ballpark of 10GB, is this being made as a
>>  > BigTiff? or will I run into problems when I hit the 2GB limit?
>>  >
>>  > Anyway to get this to go faster? CPU is at 101%, 78MB of memory is being
>>  > used, I have LOTS more if I can get gdal to use it.
>>  
>>  OK, it took 2 hr 10 min to run:
>>  
>>  GDAL_SKIP=JPEG2000 gdal_translate
>>  /var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2  -b 1 -b 2
>>  -b 3 tmp.vrt
>>  
>>  and the output file is 5.0 GB. And on top of this I still need to
>>  gdalwarp this VRT file a bunch of times to chop it into smaller tiles. I
>>  have hundreds of files to process. Any thoughts on how to speed this up?
>>  
>>  -Steve
>>  
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>  

From ivan.lucena at pmldnet.com  Sat Nov  8 23:34:37 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Sat Nov  8 23:34:44 2008
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gSG93IGRvIEkgc2VsZWN0IDMgb2YgNSBiYW5kcyBmb3Igb3V0cHV0Pw==?=
Message-ID: <20081109043437.22739.qmail@s466.sureserver.com>

Steve,

I have no experience with "Mr.SID". I don't know the gentleman :).

I don't know if that is a bug or a limitation of this driver.

Best regards,

Ivan

>  -------Original Message-------
>  From: Stephen Woodbridge <woodbri@swoodbridge.com>
>  Subject: Re: [gdal-dev] How do I select 3 of 5 bands for output?
>  Sent: Nov 08 '08 19:30
>  
>  Ahh, thank you for the link to the vrttut. This has got me going in the
>  right direction. I actually did try the -of VRT but didn't know it was
>  supposed to be a XML file so discounted it when the file was small.
>  
>  So, my next problem is that when I run gdalwarp on the VRT file I get
>  assertion errors like the following on about half of the tiles I try to
>  create.
>  
>  $ cat a
>  gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:26916 -t_srs
>  EPSG:4326 -te -86.25 38.3125 -86.1875 38.375 -rb -wm 250 --config
>  GDAL_ONE_BIG_READ ON -co "TILED=YES"
>  /var/data/tiler-tiffs/11234-1226164462/src/tmp.vrt a.tif
>  
>  $ sh a
>  Creating output file that is 6150P x 6150L.
>  Processing input file /var/data/tiler-tiffs/11234-1226164462/src/tmp.vrt.
>  gdalwarp: ../compressed/compressed.cpp:1724: bool
>  kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' failed.
>  a: line 1: 11502 Aborted???????????????? gdalwarp -srcnodata 0
>  -dstnodata 0 -s_srs +init=epsg:26916 -t_srs EPSG:4326 -te -86.25 38.3125
>  -86.1875 38.375 -rb -wm 250 --config GDAL_ONE_BIG_READ ON -co
>  "TILED=YES" /var/data/tiler-tiffs/11234-1226164462/src/tmp.vrt a.tif
>  
>  Is this because the tile extends outside the source image?
>  
>  +-----------------+
>  |??src_image??????|
>  |????????????+----------+
>  |????????????|??tile????|
>  |????????????|??????????|
>  |????????????+----------+
>  |???????????????? |
>  +-----------------+
>  
>  Or something similar to this? Any thoughts on the cause(s) and workarounds?
>  
>  Thanks again for all the help.
>  
>  -Steve
>  
>  Lucena, Ivan wrote:
>  > Hi Steve,
>  >
>  > No, VRT files are not Geotiff, see [1], and they should not take more than a bunch of Kbytes. The problem is that in *our* gdal_translate command line *we* forgot "-of vrt" and the default format is Geotiff.
>  >
>  >????system("gdaltranslate -OF VRT $infile -b 1 -b 2 -b 3 tmp.vrt");
>  >
>  > Good luck,
>  >
>  > Ivan
>  >
>  > [1]: http://www.gdal.org/gdal_vrttut.html
>  >
>  >>??-------Original Message-------
>  >>??From: Stephen Woodbridge <woodbri@swoodbridge.com>
>  >>??Subject: Re: [gdal-dev] How do I select 3 of 5 bands for output?
>  >>??Sent: Nov 08 '08 03:36
>  >>??
>  >>??Stephen Woodbridge wrote:
>  >>??> Lucena, Ivan wrote:
>  >>??>> Hi Steve,
>  >>??>>
>  >>??>>>??I have a script that was processing MrSID files and need to convert it
>  >>??>>>??to support jp2 files also. It seems pretty straight forward except the
>  >>??>>>??jp2 files have bands R,G,B,IR and I need to chop these into GeoTif
>  >>??>>> tiles
>  >>??>>>??with only R,G,B bands.
>  >>??>>>??
>  >>??>>>??The script was iterating over the src image and chopping it into tiles
>  >>??>>>??using the following command:
>  >>??>>>??
>  >>??>>>??system("gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:$epsg
>  >>??>>>??-t_srs EPSG:4326 -te $xm $ym $xx $yx -rb -wm 250 --config
>  >>??>>>??GDAL_ONE_BIG_READ ON -co "TILED=YES" $infile $work/$outd/$outf\n");
>  >>??>>>??
>  >>??>>>??1) How does this behave with R,G,B,IR as input and how can I get R,G,B
>  >>??>>>??only into the GeoTif?
>  >>??>>
>  >>??>> I would add one call to gdal_translate with "-b 1 -b 2 -b 3" first to
>  >>??>> build a VRT and then call gdalwarp from the VRT.
>  >>??>>
>  >>??>> {
>  >>??>>?? system("gdaltranslate $infile -b 1 -b 2 -b 3 tmp.vrt");
>  >>??>>?? system("gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:$epsg
>  >>??>> -t_srs EPSG:4326 -te $xm $ym $xx $yx -rb -
>  >>??>> wm 250 --config GDAL_ONE_BIG_READ ON -co "TILED=YES" tmp.vrt
>  >>??>> $work/$outd/$outf\n");
>  >>??>> }
>  >>??>> system("gdalmanage delete tmp.vrt");
>  >>??>
>  >>??> OK, this might work, but it is incredibly slow. Then again probably
>  >>??> doing much of anything with these images will be slow because they are
>  >>??> HUGE. So looking for ways to speed this up. It looks like the .vrt file
>  >>??> is really a GeoTif would it help later if the .vrt was made with -co
>  >>??> "TILED=YES", can you do this with a .vrt file. I think the uncompressed
>  >>??> 3 band geoTif will be in the ballpark of 10GB, is this being made as a
>  >>??> BigTiff? or will I run into problems when I hit the 2GB limit?
>  >>??>
>  >>??> Anyway to get this to go faster? CPU is at 101%, 78MB of memory is being
>  >>??> used, I have LOTS more if I can get gdal to use it.
>  >>??
>  >>??OK, it took 2 hr 10 min to run:
>  >>??
>  >>??GDAL_SKIP=JPEG2000 gdal_translate
>  >>??/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2??-b 1 -b 2
>  >>??-b 3 tmp.vrt
>  >>??
>  >>??and the output file is 5.0 GB. And on top of this I still need to
>  >>??gdalwarp this VRT file a bunch of times to chop it into smaller tiles. I
>  >>??have hundreds of files to process. Any thoughts on how to speed this up?
>  >>??
>  >>??-Steve
>  >>??
>  >>??_______________________________________________
>  >>??gdal-dev mailing list
>  >>??gdal-dev@lists.osgeo.org
>  >>??http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >>??
>  
>  
From Tom.Kralidis at ec.gc.ca  Mon Nov 10 07:25:54 2008
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Mon Nov 10 07:31:02 2008
Subject: [gdal-dev] problems building Perl swig
In-Reply-To: <dd2b9faec8034152bf4caacff7720f5e@h1215603.SERVERKOMPETENZ.NET>
References: <dd2b9faec8034152bf4caacff7720f5e@h1215603.SERVERKOMPETENZ.NET>
Message-ID: <DDA8F0C2655CB14DA8C7B84CDC6759A617C06B17@dowexch2.ontario.int.ec.gc.ca>


Using svn trunk on fc9:

$ ./configure --with-png --with-libtiff=internal --with-geotiff=internal
--with-jpeg --with-xerces --with-geos=no --with-pg=/usr/bin/pg_config
--with-mysql=/usr/bin/mysql_config --with-sqlite
--with-curl=/usr/bin/curl-config --with-python --with-expat --with-perl
...


$ make
...

make[2]: Entering directory
`/home/tkralidi/foss4g/gdal/trunk/gdal/swig/perl'
perl Makefile.PL
Building in GDAL distro tree
GDAL version (1.6.0) and module version () do not match at Makefile.PL
line 50.
make[2]: *** [Makefile_Geo__GDAL] Error 255
make[2]: Leaving directory
`/home/tkralidi/foss4g/gdal/trunk/gdal/swig/perl'
make[1]: *** [build] Error 2
make[1]: Leaving directory `/home/tkralidi/foss4g/gdal/trunk/gdal/swig'
make: *** [swig-modules] Error 2

When I omit --with-perl in ./configure, all builds and installs without
issue.

Any advice or suggestions are valued.

Thanks

..Tom
From warmerdam at pobox.com  Mon Nov 10 08:47:22 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Nov 10 08:47:46 2008
Subject: [gdal-dev] JPEG2000 issues
In-Reply-To: <49147BA5.3010504@swoodbridge.com>
References: <49147905.7070207@swoodbridge.com>
	<49147BA5.3010504@swoodbridge.com>
Message-ID: <49183B6A.9050904@pobox.com>

Stephen Woodbridge wrote:
> Stephen Woodbridge wrote:
>> Hi Frank, et al,
>>
>> I'm working with GDAL 1.5.3, released 2008/09/09 built with libjasper 
>> so I can process some DOQQ composites and chop them into smaller tiles.
>>
>> Below is a typical image but I get a bunch of errors in gdalinfo. The 
>> system has like 6 GB of memory and only about 1.5GB of swap. The 
>> compressed image is huge at 538MB. I tried 3-4 images in the directory 
>> and got the same report on all of them.
>>
>> Any thoughts on this?
>> Is this a real problem, ie. I will not be able to access these images.
>> Other options solutions?

Steve,

I'm not familiar with the "cannot get box" error you are seeing, but
generally speaking the JasPer based JPEG2000 driver is not suitable for
use on large images due to it's decode-the-whole-image-in-memory model
of imagery access.

Best regards,

>> Band 1 Block=256x256 Type=Byte, ColorInterp=Undefined
>> error: expecting signature box
>>   Metadata:
>>     LAYER_TYPE=athematic
>> error: cannot get box
>> <GDALRasterAttributeTable/>
>>
>> error: cannot get box
>
> I must be a Zen thing that I always find answers after a give up looking 
> and post to the list. So, to reply to myself, I was about to use the 
> JP2MrSID driver like the following and without any error. So, I'll try 
> to move forward using this more of access. I'm still interested in any 
> other thoughts you have on the above issues.

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Nov 10 08:53:52 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Nov 10 08:54:13 2008
Subject: [gdal-dev] Is GDAL reentrant
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E3402970DC4@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E3402970DC4@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <49183CF0.3080400@pobox.com>

Clay, Bruce wrote:
> I have a Microsoft application with multiple tabs / property pages. 
>  Each tab is controlled by a separate class.  I have a separate instance 
> of GDAL in each class.  I also had an instance in a popup that I used to 
> connect to the database.  After the user logins and the popup window 
> goes away it seems that I have to reregister the OGR drivers in the tabs 
> as if the OGRCleanupAll in the destructor of the popup was being applied 
> to the instances in the tabs as well.
> 
>  
> 
> Is GDAL / OGR reentrant?  Can we have multiple instances that act 
> independently?

Bruce,

GDAL/OGR is endeavors to achieve some forms of re-entrancy.  In particular
it should be possible to have distinct threads accessing distinct
GDALDataset objects in read-only mode for "well behaved" drivers.  This
is also generally true of OGRDataSource objects.

However, a call to OGRCleanupAll() or other similar funcitions that
tear down the environment should only generally be done on application
exit, not cleanup of a single thread.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Nov 10 11:47:44 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Nov 10 11:48:21 2008
Subject: [gdal-dev] OGR DeleteFeature throws memory exception
In-Reply-To: <F6ED569B-9718-4B14-84B3-983818ECDF94@iavo-rs.com>
References: <F6ED569B-9718-4B14-84B3-983818ECDF94@iavo-rs.com>
Message-ID: <491865B0.2070503@pobox.com>

Brad Grinstead wrote:
> I am wondering if someone has experienced a memory access violation when
> attempting to delete OGRFeatures.  I am running the latest build off the
> trunk and have been able to find no information regarding this error.

Brad,

Can you confirm that you are operating using the C# bindings for OGR?
Your code looks ok to me, but I'm not completely clear on the built-in
disposal logic for features in C#.

Also, you don't seem to have mentioned the GDAL/OGR version which could
be important to diagnosing the problem.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From woodbri at swoodbridge.com  Mon Nov 10 11:52:28 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon Nov 10 11:51:23 2008
Subject: [gdal-dev] JP2MRSID Issues
Message-ID: <491866CC.8020101@swoodbridge.com>

Hello,

I posted this buried in another thread and thought it should be reposted 
in its own thread. A short history, I have a lot of USDA county 
composite DOQQs that have been assembled into JPEG2000 files that are 
about 500MB each. I am trying to chop these back into DOQQ GeoTiffs. I 
have a script that does the chopping, it just automates the process and 
issues commands to do the work.

I have abandon using the JPEG2000 driver and an now using the JP2MRSID 
driver. This is working better, but I'm still having problems like this:

I create a VRT file as follows for each jp2 file:

mkdir -p /home/swoodbridge/tiler-tiffs/30430-1226332146/src
gdal_translate -of VRT 
/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2 -b 1 -b 2 
-b 3 /home/swoodbridge/tiler-tiffs/30430-1226332146/src/tmp.vrt

then the VRT file is iterated over to extract the tiles with commands like:

gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:26915 -t_srs 
EPSG:4326 -te -93.5 43.8125 -93.4375 43.875 -rb -wm 250 --config 
GDAL_ONE_BIG_READ ON -co "TILED=YES" 
/home/swoodbridge/tiler-tiffs/30430-1226332146/src/tmp.vrt 
/home/swoodbridge/tiler-tiffs/30430-1226332146/B-93_43/B-93_43_041.tif

gdalwarp: ../compressed/compressed.cpp:1724: bool 
kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' failed.
Creating output file that is 6029P x 6029L.

This does not happen on all image tiles that I try to extract, but does 
happen on a significant number of them like nearly 50% in one case. I 
looked at the pattern of failures and it looks like failures happen 
within a row of the jp2, so extracted tiles are G=good, X=bad, .=empty

................
..GGGGGGGGG.....
..GGGGGGGGG.....
..GGGGGGGGG.....
..GXXXXXXXG.....
..GGGGGGGGG.....


..GXXXXXXXG.....
..GXXXXXXXG.....
..GXXXXXXXG.....
..GXXXXXXXG.....
...GXXXXXXXG....
................

Any thoughts on this?
Is there a way to verify its compression integrity?

I have try two different jp2 files of the 300+ friles that need to to be 
chopped up and gotten similar results.

Thanks,
   -Steve
From arb at sat.dundee.ac.uk  Mon Nov 10 14:11:04 2008
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Mon Nov 10 14:11:13 2008
Subject: [gdal-dev] gdal_rasterize usage problems
Message-ID: <op.uke3kqipqw3wu1@titan>

Hello

I'm trying to overlay coastlines on an image using gdal_rasterize but
can't get it to do anything at all.

% gdal_rasterize gshhs_land.shp warped.tif
Usage: gdal_rasterize [-b band] [-i]
       [-burn value] | [-a attribute_name] | [-3d]
       [-l layername]* [-where expression] [-sql select_statement]
       <src_datasource> <dst_filename>

The files are ok:

% ogrinfo gshhs_land.shp
INFO: Open of `gshhs_land.shp'  using driver `ESRI Shapefile' successful.
1: gshhs_land (Polygon)

% gdalinfo warped.tif
Driver: GTiff/GeoTIFF
Size is 396, 396
Coordinate System is: PROJCS["OSGB 1936 / British National Grid", ...
Band 1 Block=396x10 Type=UInt16, ColorInterp=Gray

Andrew

P.S. Unrelated to this problem there's also another problem:

% gdal_rasterize -l gshhs_land gshhs_land.shp warped.tif
To many of -3d, -burn and -a specified.

"To" should be "Too", but since I've not specified any of -3d,
-burn or -a then I'm not sure what it's complaining about...

From bgrinstead at iavo-rs.com  Mon Nov 10 15:03:54 2008
From: bgrinstead at iavo-rs.com (Brad Grinstead)
Date: Mon Nov 10 15:04:10 2008
Subject: [gdal-dev] OGR DeleteFeature throws memory exception
In-Reply-To: <491865B0.2070503@pobox.com>
Message-ID: <0B88BDF2-53C5-4BE9-8979-E0193F0A1712@iavo-rs.com>

Frank,

I appreciate the response, but I finally found out that certain OGR-specific variables were not being handled correctly, which caused a latent memory leak leading to the problem I reported.  I think those have all been tracked down now.

Brad G.


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Monday, November 10, 2008 11:48 AM
To: bgrinstead@iavo-rs.com
Cc: gdal-dev
Subject: Re: [gdal-dev] OGR DeleteFeature throws memory exception

Brad Grinstead wrote:
> I am wondering if someone has experienced a memory access violation 
> when attempting to delete OGRFeatures.  I am running the latest build 
> off the trunk and have been able to find no information regarding this error.

Brad,

Can you confirm that you are operating using the C# bindings for OGR?
Your code looks ok to me, but I'm not completely clear on the built-in disposal logic for features in C#.

Also, you don't seem to have mentioned the GDAL/OGR version which could be important to diagnosing the problem.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Nov 10 16:10:45 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Nov 10 16:11:21 2008
Subject: [gdal-dev] converting KML to CSV
In-Reply-To: <86782b610811030548x26ffb0flaa7f9edfea1741ea@mail.gmail.com>
References: <loom.20080520T133500-248@post.gmane.org>
	<4832DF65.2050107@pobox.com>
	<86782b610811030548x26ffb0flaa7f9edfea1741ea@mail.gmail.com>
Message-ID: <4918A355.7040508@pobox.com>

Markus Neteler wrote:
> On Tue, May 20, 2008 at 3:25 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>> Tim Michelsen wrote:
>>> Hello,
>>> I'd like to convert KML back to CSV.
>>>
>>> When I issue
>>> ogr2ogr -f CSV out.csv in.kml
>>>
>>> there are no coordinates written to the CSV file. Only the placemark names
>>> are
>>> written.
>>>
>>> How can I get ogr2ogr to create a file like
>>> Latitude,Longitude,Name
>>> 48.1,0.25,"First point"
>>> 49.2,1.1,"Second point"
>>> 47.5,0.75,"Third point"
>> Tim,
>>
>> The CSV driver does not support writing geometries, though I can see some
>> support for this might be desirable.
> 
> Frank,
> 
> I would need the same... is there any work-around (or would it be a
> pain to add that)?

Markus,

As a workaround you could write a script that would essentially .csv with
a WKT column.  It would not be hard to add directly in the .csv driver but
I'm not all that keen on doing it myself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From randre at gmail.com  Mon Nov 10 16:43:02 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Mon Nov 10 16:43:03 2008
Subject: [gdal-dev] gdal_rasterize usage problems
In-Reply-To: <op.uke3kqipqw3wu1@titan>
References: <op.uke3kqipqw3wu1@titan>
Message-ID: <9c2015090811101343s7b45c4bfrb353d75454c115ab@mail.gmail.com>

Andrew,

I believe your syntax is incorrect.  Assuming that you are trying to exclude
water from your image, it should be something like this:
% gdal_rasterize -b 1 -b 2 -b 3 -i -burn 0 -burn 0 -burn 0 -l gshhs_land
gshhs_land.shp warped.tif

Have a look at http://www.gdal.org/gdal_rasterize.html for a list of all the
options.

Roger
--





On Mon, Nov 10, 2008 at 11:11 AM, Andrew Brooks <arb@sat.dundee.ac.uk>wrote:

> Hello
>
> I'm trying to overlay coastlines on an image using gdal_rasterize but
> can't get it to do anything at all.
>
> % gdal_rasterize gshhs_land.shp warped.tif
> Usage: gdal_rasterize [-b band] [-i]
>       [-burn value] | [-a attribute_name] | [-3d]
>       [-l layername]* [-where expression] [-sql select_statement]
>       <src_datasource> <dst_filename>
>
> The files are ok:
>
> % ogrinfo gshhs_land.shp
> INFO: Open of `gshhs_land.shp'  using driver `ESRI Shapefile' successful.
> 1: gshhs_land (Polygon)
>
> % gdalinfo warped.tif
> Driver: GTiff/GeoTIFF
> Size is 396, 396
> Coordinate System is: PROJCS["OSGB 1936 / British National Grid", ...
> Band 1 Block=396x10 Type=UInt16, ColorInterp=Gray
>
> Andrew
>
> P.S. Unrelated to this problem there's also another problem:
>
> % gdal_rasterize -l gshhs_land gshhs_land.shp warped.tif
> To many of -3d, -burn and -a specified.
>
> "To" should be "Too", but since I've not specified any of -3d,
> -burn or -a then I'm not sure what it's complaining about...
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081110/a688a7cb/attachment.html
From bfraser at geoanalytic.com  Mon Nov 10 17:41:01 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Mon Nov 10 17:41:16 2008
Subject: [gdal-dev] resampling artifacts
In-Reply-To: <200811070014.57474.even.rouault@mines-paris.org>
References: <49137903.8020907@geoanalytic.com>
	<200811070014.57474.even.rouault@mines-paris.org>
Message-ID: <4918B87D.7090702@geoanalytic.com>

Even,

  It is fixed in v1.6 Beta.  Thanks!

Brent

Even Rouault wrote:
> Brent,
> 
> Have you tried with GDAL 1.6.0 beta ? Much work has been done in that area and 
> those artifacts should have disappeared and people. See 
> http://trac.osgeo.org/gdal/ticket/2627
> 
> Le Friday 07 November 2008 00:08:51 Brent Fraser, vous avez ?crit :
>> Has anyone experienced resampling artifacts using gdalwarp?
>>
>>     I'm using v1.5.2, and with lanczos or cubicspline resampling, I get a
>> vertical line and a horizontal line of seemingly random pixels about 6
>> pixels wide running through the center of the output image.
>>
>>     I'm resampling a 16-bit tif image from 12.5 meters to 200 meters.  The
>> other resampling methods result in an ok output image.
>>
>> I've attached a png to illustrate the effect.   I thought I'd ask before
>> filing a bug report...
>>
>> Thanks!
>> Brent Fraser
> 
> 
> 
From woodbri at swoodbridge.com  Mon Nov 10 23:50:57 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon Nov 10 23:49:57 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <491866CC.8020101@swoodbridge.com>
References: <491866CC.8020101@swoodbridge.com>
Message-ID: <49190F31.8090705@swoodbridge.com>

As a follow up on this issue, if I remove the -of VRT on the 
gdal_translate it will create a geotif and then ALL the tiles are 
extracted without any errors. So this looks like a bug in gdalwarp or in 
the JP2MRSID driver since the jp2 can be converted to a geotif without 
errors and gdalwarp will work with it, but has trouble when you try to 
extract sub-zones from the jp2 image.

Currently, I only have 500MB jp2 files to work with, I will look through 
the files and see if I can find a smaller one that exhibits the same 
behavior.

Does anyone else have any of these large county composite jp2 images 
that they can try and confirm this issue with?

-Steve

Stephen Woodbridge wrote:
> Hello,
> 
> I posted this buried in another thread and thought it should be reposted 
> in its own thread. A short history, I have a lot of USDA county 
> composite DOQQs that have been assembled into JPEG2000 files that are 
> about 500MB each. I am trying to chop these back into DOQQ GeoTiffs. I 
> have a script that does the chopping, it just automates the process and 
> issues commands to do the work.
> 
> I have abandon using the JPEG2000 driver and an now using the JP2MRSID 
> driver. This is working better, but I'm still having problems like this:
> 
> I create a VRT file as follows for each jp2 file:
> 
> mkdir -p /home/swoodbridge/tiler-tiffs/30430-1226332146/src
> gdal_translate -of VRT 
> /var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2 -b 1 -b 2 
> -b 3 /home/swoodbridge/tiler-tiffs/30430-1226332146/src/tmp.vrt
> 
> then the VRT file is iterated over to extract the tiles with commands like:
> 
> gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:26915 -t_srs 
> EPSG:4326 -te -93.5 43.8125 -93.4375 43.875 -rb -wm 250 --config 
> GDAL_ONE_BIG_READ ON -co "TILED=YES" 
> /home/swoodbridge/tiler-tiffs/30430-1226332146/src/tmp.vrt 
> /home/swoodbridge/tiler-tiffs/30430-1226332146/B-93_43/B-93_43_041.tif
> 
> gdalwarp: ../compressed/compressed.cpp:1724: bool 
> kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' 
> failed.
> Creating output file that is 6029P x 6029L.
> 
> This does not happen on all image tiles that I try to extract, but does 
> happen on a significant number of them like nearly 50% in one case. I 
> looked at the pattern of failures and it looks like failures happen 
> within a row of the jp2, so extracted tiles are G=good, X=bad, .=empty
> 
> ................
> ..GGGGGGGGG.....
> ..GGGGGGGGG.....
> ..GGGGGGGGG.....
> ..GXXXXXXXG.....
> ..GGGGGGGGG.....
> 
> 
> ..GXXXXXXXG.....
> ..GXXXXXXXG.....
> ..GXXXXXXXG.....
> ..GXXXXXXXG.....
> ...GXXXXXXXG....
> ................
> 
> Any thoughts on this?
> Is there a way to verify its compression integrity?
> 
> I have try two different jp2 files of the 300+ friles that need to to be 
> chopped up and gotten similar results.
> 
> Thanks,
>   -Steve
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From neteler at osgeo.org  Tue Nov 11 05:08:57 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Tue Nov 11 05:08:59 2008
Subject: [gdal-dev] gdal_rasterize usage problems
In-Reply-To: <9c2015090811101343s7b45c4bfrb353d75454c115ab@mail.gmail.com>
References: <op.uke3kqipqw3wu1@titan>
	<9c2015090811101343s7b45c4bfrb353d75454c115ab@mail.gmail.com>
Message-ID: <86782b610811110208j643e5eb6s4b7fbbff0fe1e6c5@mail.gmail.com>

On Mon, Nov 10, 2008 at 10:43 PM, Roger Andr? <randre@gmail.com> wrote:
> Andrew,
>
> I believe your syntax is incorrect.  Assuming that you are trying to exclude
> water from your image, it should be something like this:
> % gdal_rasterize -b 1 -b 2 -b 3 -i -burn 0 -burn 0 -burn 0 -l gshhs_land
> gshhs_land.shp warped.tif
>
> Have a look at http://www.gdal.org/gdal_rasterize.html for a list of all the
> options.

Roger,

it fails also for me (using recent trunk).

Markus
From randre at gmail.com  Tue Nov 11 12:43:13 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Tue Nov 11 12:43:15 2008
Subject: [gdal-dev] gdal_rasterize usage problems
In-Reply-To: <86782b610811110208j643e5eb6s4b7fbbff0fe1e6c5@mail.gmail.com>
References: <op.uke3kqipqw3wu1@titan>
	<9c2015090811101343s7b45c4bfrb353d75454c115ab@mail.gmail.com>
	<86782b610811110208j643e5eb6s4b7fbbff0fe1e6c5@mail.gmail.com>
Message-ID: <9c2015090811110943k6448dcc4kd7828b01faa41a1d@mail.gmail.com>

Hi Markus,

A friend of mine just tried this out on r15709 and reports that it works
fine.  Are you referring to the syntax in the original email not working, or
what I advised Andrew to try?  If it's the latter, please send the command
you're using, so we can dissect it.

Thanks,

Roger
--

On Tue, Nov 11, 2008 at 2:08 AM, Markus Neteler <neteler@osgeo.org> wrote:

> On Mon, Nov 10, 2008 at 10:43 PM, Roger Andr? <randre@gmail.com> wrote:
> > Andrew,
> >
> > I believe your syntax is incorrect.  Assuming that you are trying to
> exclude
> > water from your image, it should be something like this:
> > % gdal_rasterize -b 1 -b 2 -b 3 -i -burn 0 -burn 0 -burn 0 -l gshhs_land
> > gshhs_land.shp warped.tif
> >
> > Have a look at http://www.gdal.org/gdal_rasterize.html for a list of all
> the
> > options.
>
> Roger,
>
> it fails also for me (using recent trunk).
>
> Markus
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081111/39bd69ce/attachment.html
From ari.jolma at tkk.fi  Wed Nov 12 04:26:13 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 12 04:26:29 2008
Subject: [gdal-dev] The use of geometry_columns of the Pg driver
Message-ID: <491AA135.8030202@tkk.fi>

The Pg driver consults geometry_columns for the list of layers in the 
database and for the geometry type of a layer. But it does not consult 
it for the geometry column itself. For example:

I have a table "points", which is created with shp2psql and it is fine 
with OGR. Then I decide to add another geometry column, which will 
contain the points transformed somehow. I can now either add this as a 
new entry in the geometry_columns table or edit the existing entry to 
have the new column name. In either scenario OGR is by default a bit 
lost. I need to use SQL to get an OGR layer of the points with the new, 
alternative coordinates.

Should this disregard of column names in geometry_columns be considered 
a bug or feature?

Best regards,

Ari

From ari.jolma at tkk.fi  Wed Nov 12 04:38:28 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 12 04:38:48 2008
Subject: [gdal-dev] The use of geometry_columns of the Pg driver
In-Reply-To: <491AA135.8030202@tkk.fi>
References: <491AA135.8030202@tkk.fi>
Message-ID: <491AA414.6060607@tkk.fi>

Open ticket 1476 seems to be discussing this issue.  
http://trac.osgeo.org/gdal/ticket/1476

Ari

Ari Jolma wrote:
> The Pg driver consults geometry_columns for the list of layers in the 
> database and for the geometry type of a layer. But it does not consult 
> it for the geometry column itself. For example:
>
> I have a table "points", which is created with shp2psql and it is fine 
> with OGR. Then I decide to add another geometry column, which will 
> contain the points transformed somehow. I can now either add this as a 
> new entry in the geometry_columns table or edit the existing entry to 
> have the new column name. In either scenario OGR is by default a bit 
> lost. I need to use SQL to get an OGR layer of the points with the 
> new, alternative coordinates.
>
> Should this disregard of column names in geometry_columns be 
> considered a bug or feature?
>
> Best regards,
>
> Ari
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From arb at sat.dundee.ac.uk  Wed Nov 12 05:50:06 2008
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Wed Nov 12 05:50:13 2008
Subject: [gdal-dev] gdal_rasterize usage problems
In-Reply-To: <9c2015090811101343s7b45c4bfrb353d75454c115ab@mail.gmail.com>
References: <op.uke3kqipqw3wu1@titan>
	<9c2015090811101343s7b45c4bfrb353d75454c115ab@mail.gmail.com>
Message-ID: <op.ukh5psykqw3wu1@titan>

On Mon, 10 Nov 2008 21:43:02 -0000, Roger Andr? <randre@gmail.com> wrote:
>
> I believe your syntax is incorrect.

The manual implies that the -b and -burn options are optional but they appear
to be mandatory.  Giving just a source and destination results in the usage
message.  The only option noted as mandatory is -l but if only -l is used then
the misspelled and confusing message is "To many of -3d, -burn and -a specified".
That is issued even when none of the mentioned options have been specified.
So, just minor usage and documentation issues really.  Thanks for your help.

I'm having other problems trying to overlay a coastline onto an image with
vectors taken from a different part of the world being smeared across it
but that's for a subsequent message ;-)

Andrew

From even.rouault at mines-paris.org  Wed Nov 12 06:46:37 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 12 06:46:46 2008
Subject: [gdal-dev] KML problem
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E3402970E5D@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E3402970E5D@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <200811121246.40054.even.rouault@mines-paris.org>

Bruce,

I think what you see is due to an inappropriate use of OGR API rather than a 
bug in OGR itself. I'd encourage you to browse that ticket 
http://trac.osgeo.org/gdal/ticket/2653 which is about GPX, but I think you're 
hitting the same scenario with KML as output.

Le Friday 07 November 2008 20:48:52 Clay, Bruce, vous avez ?crit?:
> I am using OGR to create both a shapefile and a KML file.  The data in
> the shapefile looks good and the values in the KML are the same as in
> the shapefile but they are shifted up by 2 places.  There are 2 extra
> attributes in the KML file (Name and Description). My "Longitude" value
> appears in the "Description" field.
>
>
>
> I tried to use CSLSetNameValue( ogrOptions, "DescriptionField", "None");
> to eliminate the Description field but it did not work.
>
>
>
> Is there any way to eliminate the Name and Description fields since I
> don't have any values to set for them?
>
>
>
> Bruce
>
>
>
>
>
>
> This message and any enclosures are intended only for the addressee. 
> Please notify the sender by email if you are not the intended recipient. 
> If you are not the intended recipient, you may not use, copy, disclose, or
> distribute this message or its contents or enclosures to any other person
> and any such actions may be unlawful.  Ball reserves the right to monitor
> and review all messages and enclosures sent to or from this email address.


From matej at matnet.net  Wed Nov 12 08:49:58 2008
From: matej at matnet.net (Matej)
Date: Wed Nov 12 08:57:46 2008
Subject: [gdal-dev] Problem with gdal-1.5.3 and FreeBSD 6.2
Message-ID: <3A3433309F494801BE7B1AD87A3777EE@Leeml>

Hi,

I have a problem with getting gdal to compile on FreeBSD 6.2. My problem is exactly the same as the one described here http://lists.osgeo.org/pipermail/gdal-dev/2007-November/014763.html.

I run configure with:./configure --with-pg=/usr/local/pgsql/bin/pg_config


My configure ouput is
...
GDAL is now configured for i386-unknown-freebsd6.2

  Installation directory:    /usr/local
  C compiler:                gcc -g -O2
  C++ compiler:              g++ -g -O2

  LIBTOOL support:           yes

  LIBZ support:              external
  GRASS support:             no
  CFITSIO support:           no
  PCRaster support:          internal
  NetCDF support:            no
  LIBPNG support:            internal
  LIBTIFF support:           internal (BigTIFF=yes)
  LIBGEOTIFF support:        internal
  LIBJPEG support:           internal
  LIBGIF support:            internal
  OGDI support:              no
  HDF4 support:              no
  HDF5 support:              no
  Kakadu support:            no
  JasPer support:            no
  ECW support:               no
  MrSID support:             no
  GRIB support:              no
  cURL support (wms/wcs/...):yes
  PostgreSQL support:        no
  MySQL support:             no
  Xerces-C support:            no
  Expat support:             yes
  ODBC support:              no
  PGeo support:              no
  OCI support:               no
  SDE support:               no
  DODS support:              no
  SQLite support:            no
  DWGdirect support          no
  PANORAMA GIS support:      no
  INFORMIX DataBlade support:no
  GEOS support:              yes


  Old-gen python          no
  SWIG Bindings:          no

  Statically link PROJ.4:    no
  enable OGR building:       yes
  enable pthread support:    no
  hide internal symbols:     no


When building I get a couple of :not found errors, which look like these:
/bin/sh /home/matej/mapserver/gdal-1.5.3/libtool --mode=link    g++  gdalinfo.o  \
                /home/matej/mapserver/gdal-1.5.3/libgdal.la -o gdalinfo
libtool_args+=: not found
compile_command+=: not found
finalize_command+=: not found
libtool_args+=: not found
libtool_args+=: not found
compile_command+=: not found
finalize_command+=: not found
libtool_args+=: not found
compile_command+=: not found
finalize_command+=: not found
libtool: link: g++  /home/matej/mapserver/gdal-1.5.3/.libs/libgdal.so -L/usr/local/lib /usr/local/lib/libgeos_c.so /usr/local/lib/libgeos.so /usr/local/lib/libexpat.so /usr/local/lib/libcurl.so -lssl -lcrypto -lz -Wl,-rpath -Wl,/usr/local/lib
/usr/lib/crt1.o(.text+0x72): In function `_start':
: undefined reference to `main'
gmake[1]: *** [gdalinfo] Error 1


I can't find any useful idea, I need libtool but I was able to get it to work long time ago on a FreeBSD 6.2 machine. 

I had libtool 1.5 installed and now have 2.2.6, but the error is the same.

I would be very glad for any help whatsoever,
thank you in advance, Matej Serc
matej@matnet.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081112/acc338a2/attachment.html
From warmerdam at pobox.com  Wed Nov 12 09:06:01 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 12 09:07:02 2008
Subject: [gdal-dev] gdal_rasterize usage problems
In-Reply-To: <op.ukh5psykqw3wu1@titan>
References: <op.uke3kqipqw3wu1@titan>
	<9c2015090811101343s7b45c4bfrb353d75454c115ab@mail.gmail.com>
	<op.ukh5psykqw3wu1@titan>
Message-ID: <491AE2C9.5000204@pobox.com>

Andrew Brooks wrote:
> On Mon, 10 Nov 2008 21:43:02 -0000, Roger Andr? <randre@gmail.com> wrote:
>> I believe your syntax is incorrect.
> 
> The manual implies that the -b and -burn options are optional but they appear
> to be mandatory. 

Andrew,

One of -3d, -burn or -a are required.   I have not found anything in the
manual that seems to imply they are optional.

> Giving just a source and destination results in the usage
> message.  The only option noted as mandatory is -l but if only -l is used then
> the misspelled and confusing message is "To many of -3d, -burn and -a specified".

I have corrected the message to indicate that one of these is required.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From klandrus at progeny.net  Wed Nov 12 11:40:14 2008
From: klandrus at progeny.net (Kurt Landrus)
Date: Wed Nov 12 11:40:16 2008
Subject: [gdal-dev] NITF TRE support
Message-ID: <70A19B90-E0F0-4377-9F13-60E11A5FEC3A@progeny.net>


Ok, I was looking through nithfile.c,  am I correct in understanding  
that the only TRE supported for saving is BLOCKA, and that each  
additional TRE needs to be handled
individually?

I need to add support for the following TREs.  But I don't really need  
to add new SDE headers, but preserve the original values as read
using GDALGetMetadataItem.

SENSRA
AIMIDB
ACFTB

Is there an easy way to save back an TRE that was read using GDAL (/0  
escaped string)
or should I pull out all the fields from the string, and then  
reassemble them in a function as is done for BLOCKA?

Kurt Landrus
Progeny Systems Corp.
klandrus@progeny.net
Office: 	703-368-6107 x424
Lab: 	703-368-6107 x520



From even.rouault at mines-paris.org  Wed Nov 12 12:26:18 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 12 12:26:52 2008
Subject: [gdal-dev] S-57 layers export to ASCII
In-Reply-To: <D688BDE22B02984496332260B9E36A8F09F836E8@ATT1-EX1.am.int.amec.com>
References: <D688BDE22B02984496332260B9E36A8F09F836E8@ATT1-EX1.am.int.amec.com>
Message-ID: <200811121826.18861.even.rouault@mines-paris.org>

The command line switch to use for GEOMETRY=AS_XYZ is -lco and not -nlt

ogr2ogr -f "CSV" SOUNDG.csv SOUNDG.shp -lco GEOMETRY=AS_XYZ

And it will only work with a version of GDAL built from very recent sources 
(it will come in GDAL 1.6.0)

Le Friday 07 November 2008 18:39:35 Donnet, Sebastien, vous avez ?crit?:
> Hi,
>
> I'm not sure I'm in the right spot to post this, but I couldn't find a
> better place, forgive me if it is not.
>
> I'm trying to export 2 layers from a S-57 ENC (Electronic Nautical
> Chart) into a "human readable" format, such as an ASCII or text file
> like: X,Y,Z coordinates.
>
> Basically, the "end-goal" is to create a DEM (Digital Elevation Model)
> of the sea-floor to run numerical models (such as waves and currents) on
> it.
>
> To get this, what I needed was to extract the layers "COALNE" and
> "SOUNDG" from my S-57 nautical chart, and have them as 2 ASCII or text
> files with : X and Y coordinates (for the coastline) and X, Y and Z
> coordinates (for the depth or sounding).
>
> The way I went was to first extract all the layers of the S-57 file into
>
> shapefiles like this:
> >ogr2ogr -skipfailure outshp mys57file.000
>
> and then to convert the COALNE.shp and SOUNDG.shp into GMT ascii like
>
> this:
> >ogr2ogr -f "GMT" SOUNDG.gmt SOUNDG.shp
> >ogr2ogr -f "GMT" COALNE.gmt COALNE.shp
>
> That worked pretty well, since I can relatively easily read the field of
> the gmt files, and I got what I was looking for...
> but ! it is not a very "sexy" way I found, and I was wondering if there
> where no better ways to achieve this...
>
> I tried several things such as:
> >ogr2ogr -skipfailure -f "GMT" outgmt mys57file.000
>
> ERROR 1: Features without geometry not supported by GMT writer.
> ERROR 1: Terminating translation prematurely after failed
> translation of layer DSID
>
> or:
> >ogr2ogr -select "COALNE,SOUNDG" -f  "GMT" outgmt mys57file.000
>
> Field 'COALNE' not found in source layer.
> ERROR 1 : Terminating translation prematurely after failed
> translation of layer DSID
>
> or also tried with CSV file type (better files for me to read) such as:
> >ogr2ogr -f "CSV" SOUNDG.csv SOUNDG.shp -nlt GEOMETRY=AS_XYZ
>
> -nlt GEOMETRY=AS_XYZ: type not recognised
>
>
> Some of those attempt might look a little stupid and I may have made
> some writing errors, but please forgive me, I'm quite a beginner with
> OGR and GDAL great library tools.
>
> Any idea or suggestion will be appreciated, :-)
>
> thanks,
>
>
> S.
>
>
> The information contained in this e-mail is intended only for the
> individual or entity to whom it is addressed. Its contents (including any
> attachments) may contain confidential and/or privileged information. If you
> are not an intended recipient you must not use, disclose, disseminate, copy
> or print its contents. If you receive this e-mail in error, please notify
> the sender by reply e-mail and delete and destroy the message.


From even.rouault at mines-paris.org  Wed Nov 12 13:19:37 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 12 13:20:24 2008
Subject: [gdal-dev] The use of geometry_columns of the Pg driver
In-Reply-To: <491AA414.6060607@tkk.fi>
References: <491AA135.8030202@tkk.fi> <491AA414.6060607@tkk.fi>
Message-ID: <200811121919.37448.even.rouault@mines-paris.org>

For those interested, I've commited code based on Ari's patch to support 
tables with multiple geometry columns. See ticket 1476 and/or updated PG 
driver documentation for the details 

Le Wednesday 12 November 2008 10:38:28 Ari Jolma, vous avez ?crit?:
> Open ticket 1476 seems to be discussing this issue.
> http://trac.osgeo.org/gdal/ticket/1476
>
> Ari
>
> Ari Jolma wrote:
> > The Pg driver consults geometry_columns for the list of layers in the
> > database and for the geometry type of a layer. But it does not consult
> > it for the geometry column itself. For example:
> >
> > I have a table "points", which is created with shp2psql and it is fine
> > with OGR. Then I decide to add another geometry column, which will
> > contain the points transformed somehow. I can now either add this as a
> > new entry in the geometry_columns table or edit the existing entry to
> > have the new column name. In either scenario OGR is by default a bit
> > lost. I need to use SQL to get an OGR layer of the points with the
> > new, alternative coordinates.
> >
> > Should this disregard of column names in geometry_columns be
> > considered a bug or feature?
> >
> > Best regards,
> >
> > Ari
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From debeaudette at ucdavis.edu  Wed Nov 12 13:34:16 2008
From: debeaudette at ucdavis.edu (Dylan Beaudette)
Date: Wed Nov 12 13:33:03 2008
Subject: [gdal-dev] The use of geometry_columns of the Pg driver
In-Reply-To: <200811121919.37448.even.rouault@mines-paris.org>
References: <491AA135.8030202@tkk.fi> <491AA414.6060607@tkk.fi>
	<200811121919.37448.even.rouault@mines-paris.org>
Message-ID: <200811121034.16432.dylan.beaudette@gmail.com>

On Wednesday 12 November 2008, Even Rouault wrote:
> For those interested, I've commited code based on Ari's patch to support
> tables with multiple geometry columns. See ticket 1476 and/or updated PG
> driver documentation for the details

This would be a very useful addition for my work!

Thanks!

Dylan

>
> Le Wednesday 12 November 2008 10:38:28 Ari Jolma, vous avez ?crit?:
> > Open ticket 1476 seems to be discussing this issue.
> > http://trac.osgeo.org/gdal/ticket/1476
> >
> > Ari
> >
> > Ari Jolma wrote:
> > > The Pg driver consults geometry_columns for the list of layers in the
> > > database and for the geometry type of a layer. But it does not consult
> > > it for the geometry column itself. For example:
> > >
> > > I have a table "points", which is created with shp2psql and it is fine
> > > with OGR. Then I decide to add another geometry column, which will
> > > contain the points transformed somehow. I can now either add this as a
> > > new entry in the geometry_columns table or edit the existing entry to
> > > have the new column name. In either scenario OGR is by default a bit
> > > lost. I need to use SQL to get an OGR layer of the points with the
> > > new, alternative coordinates.
> > >
> > > Should this disregard of column names in geometry_columns be
> > > considered a bug or feature?
> > >
> > > Best regards,
> > >
> > > Ari
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Dylan Beaudette
Soil Resource Laboratory
http://casoilresource.lawr.ucdavis.edu/
University of California at Davis
530.754.7341
From oliver.eichler at gmx.de  Wed Nov 12 14:23:14 2008
From: oliver.eichler at gmx.de (Oliver Eichler)
Date: Wed Nov 12 14:23:15 2008
Subject: [gdal-dev] Get a rough overview image via RasterIO
Message-ID: <200811122023.14828.oliver.eichler@gmx.de>

Hi,

zooming out of a raster map is always a very resource hungry task as a large 
area of points have to be read and reduced to the viewport size. 

For a steady map RasterIO does the perfect job. However if the user zooms out 
of a map very fast via mouse wheel RasterIO eats up too much time to allow a 
smooth zoom. 

Thus my question: Is there a way in GDAL to get a quick overview picture for 
smooth zooming.

Oliver
From neteler at osgeo.org  Wed Nov 12 14:26:38 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Wed Nov 12 14:26:40 2008
Subject: [gdal-dev] gdal_rasterize usage problems
In-Reply-To: <9c2015090811101343s7b45c4bfrb353d75454c115ab@mail.gmail.com>
References: <op.uke3kqipqw3wu1@titan>
	<9c2015090811101343s7b45c4bfrb353d75454c115ab@mail.gmail.com>
Message-ID: <86782b610811121126t62a7848cq42b546464778d47e@mail.gmail.com>

Roger,

On Mon, Nov 10, 2008 at 10:43 PM, Roger Andr? <randre@gmail.com> wrote:
> Andrew,
>
> I believe your syntax is incorrect.  Assuming that you are trying to exclude
> water from your image, it should be something like this:
> % gdal_rasterize -b 1 -b 2 -b 3 -i -burn 0 -burn 0 -burn 0 -l gshhs_land
> gshhs_land.shp warped.tif

I used
gdal_rasterize -i -b 1 -b 2 -b 3  -burn 255 -burn 255 -burn 255 -l
ammprv03 ammprv03.shp ortho.tif

and it didn't have an effect on the raster map (posted to
 http://trac.osgeo.org/gdal/ticket/1458
).

I observe that the -i position is different. If that matters, please add
a related warning into http://www.gdal.org/gdal_rasterize.html .

thanks,
Markus
From jaadfoo at gmail.com  Wed Nov 12 14:36:25 2008
From: jaadfoo at gmail.com (Jamie Adams)
Date: Wed Nov 12 14:36:27 2008
Subject: [gdal-dev] gdal_rasterize usage problems
In-Reply-To: <op.uke3kqipqw3wu1@titan>
References: <op.uke3kqipqw3wu1@titan>
Message-ID: <f4339510811121136p7a97f819nef680ee71f1fe802@mail.gmail.com>

Hey Andrew,

Are your files in the same projection?  I know gshhs is projected in wgs84
by default, and I see your raster is in British National Grid.  AFAIK,
gdal_rasterize assumes the vector & raster data sets are in the same
projection.

-Jamie

On Mon, Nov 10, 2008 at 11:11 AM, Andrew Brooks <arb@sat.dundee.ac.uk>wrote:

> Hello
>
> I'm trying to overlay coastlines on an image using gdal_rasterize but
> can't get it to do anything at all.
>
> % gdal_rasterize gshhs_land.shp warped.tif
> Usage: gdal_rasterize [-b band] [-i]
>       [-burn value] | [-a attribute_name] | [-3d]
>       [-l layername]* [-where expression] [-sql select_statement]
>       <src_datasource> <dst_filename>
>
> The files are ok:
>
> % ogrinfo gshhs_land.shp
> INFO: Open of `gshhs_land.shp'  using driver `ESRI Shapefile' successful.
> 1: gshhs_land (Polygon)
>
> % gdalinfo warped.tif
> Driver: GTiff/GeoTIFF
> Size is 396, 396
> Coordinate System is: PROJCS["OSGB 1936 / British National Grid", ...
> Band 1 Block=396x10 Type=UInt16, ColorInterp=Gray
>
> Andrew
>
> P.S. Unrelated to this problem there's also another problem:
>
> % gdal_rasterize -l gshhs_land gshhs_land.shp warped.tif
> To many of -3d, -burn and -a specified.
>
> "To" should be "Too", but since I've not specified any of -3d,
> -burn or -a then I'm not sure what it's complaining about...
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081112/22c8dd4b/attachment.html
From armin.burger at gmx.net  Wed Nov 12 14:48:50 2008
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Nov 12 14:49:55 2008
Subject: [gdal-dev] GDAL and numpy, masking arrays
Message-ID: <491B3322.90407@gmx.net>

Hi everybody

maybe someone on this list has some experience using numpy in 
combination with GDAL/Python and could give me some advice.

I wanted to try to use GDAL/Python/numpy to caculate the difference 
between 2 images. The images are vegetation indexes for different dates. 
The direct difference can be easily calculated after reading both images 
into an array and substract one from the other.

The problem is that both images can contain clouds or snow that have 
predefined pixel values (252,253). And I of course would like to exclude 
these parts in both images from the calculation because they would cause 
wrong results. So I wanted to mask the non wanted areas.

Does anybody know if this is possible and how to perform it? Looking 
through the numpy docs I was not able to identify required methods or 
functions for this. There is something like 'masked arrays' but I have 
not understood if this could be used for my purpose.

Thanks in advance for any help.

Best regards, Armin
From Chris.Barker at noaa.gov  Wed Nov 12 15:27:15 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 12 15:26:20 2008
Subject: [gdal-dev] GDAL and numpy, masking arrays
In-Reply-To: <491B3322.90407@gmx.net>
References: <491B3322.90407@gmx.net>
Message-ID: <491B3C23.2070302@noaa.gov>

Armin Burger wrote:
> maybe someone on this list has some experience using numpy in 
> combination with GDAL/Python and could give me some advice.

For further questions about numpy, the numpy list is very helpful.


> difference can be easily calculated after reading both images 
> into an array and substract one from the other.

> The problem is that both images can contain clouds or snow that have 
> predefined pixel values (252,253).

> Does anybody know if this is possible and how to perform it?

yep.

> Looking 
> through the numpy docs I was not able to identify required methods or 
> functions for this. There is something like 'masked arrays' but I have 
> not understood if this could be used for my purpose.

This is exactly the kind of thing masked arrays are for. Yu can create a 
masked array out of your data with something like:

 >>> a
array([ 1,  2,  3,  4,  5,  6,  3,  4, 67,  4,  3,  5,  6,  7])

#a regular array

 >>> import numpy.ma as ma

# create a masked array with the mask set at all elements with a value of 3:
 >>> a = ma.masked_values(a, 3)
 >>> a
masked_array(data = [1 2 -- 4 5 6 -- 4 67 4 -- 5 6 7],
       mask = [False False  True False False False  True False False 
False  True False
  False False],
       fill_value=3)

#another one:
 >>> b = np.array((1,3,4,2,4,7,4,5,23,5,7,3,8,5))
 >>> b = ma.masked_values(b, 3)
 >>> b
masked_array(data = [1 -- 4 2 4 7 4 5 23 5 7 -- 8 5],
       mask = [False  True False False False False False False False 
False False  True
  False False],
       fill_value=3)


add them together:
 >>> c = a+b
 >>> c
masked_array(data = [2 -- -- 6 9 13 -- 9 90 9 -- -- 14 12],
       mask = [False  True  True False False False  True False False 
False  True  True
  False False],
       fill_value=3)


If your values are Floating Point, then Another option would be to 
replace all the "cloud" values with NaN:

 >>> a = np.array((1,2,3,4,5,6,3,4,67,4,3,5,6,7), dtype=np.float)
 >>> a[a==3] = np.nan
 >>> a
array([  1.,   2.,  NaN,   4.,   5.,   6.,  NaN,   4.,  67.,   4.,  NaN,
          5.,   6.,   7.])
 >>> b = np.array((1,3,4,2,4,7,4,5,23,5,7,3,8,5), dtype=np.float)
 >>> b[b==3] = np.nan
 >>> b
array([  1.,  NaN,   4.,   2.,   4.,   7.,   4.,   5.,  23.,   5.,   7.,
         NaN,   8.,   5.])
 >>> a+b
array([  2.,  NaN,  NaN,   6.,   9.,  13.,  NaN,   9.,  90.,   9.,  NaN,
         NaN,  14.,  12.])


-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From warmerdam at pobox.com  Wed Nov 12 15:31:27 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 12 15:31:59 2008
Subject: [gdal-dev] Get a rough overview image via RasterIO
In-Reply-To: <200811122023.14828.oliver.eichler@gmx.de>
References: <200811122023.14828.oliver.eichler@gmx.de>
Message-ID: <491B3D1F.9080908@pobox.com>

Oliver Eichler wrote:
> Hi,
> 
> zooming out of a raster map is always a very resource hungry task as a large 
> area of points have to be read and reduced to the viewport size. 
> 
> For a steady map RasterIO does the perfect job. However if the user zooms out 
> of a map very fast via mouse wheel RasterIO eats up too much time to allow a 
> smooth zoom. 
> 
> Thus my question: Is there a way in GDAL to get a quick overview picture for 
> smooth zooming.

Oliver,

Generally speaking you can't read data from GDAL and display it fast enough
to provide smooth zooming.  The usual approach is to preload raster data into
textures and then re-render those frequently for fast, smooth zoom.  This
is what OpenEV does.  And it just reloads the textures from more appropriate
resolution levels when things don't seem busy.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From armin.burger at gmx.net  Wed Nov 12 15:54:50 2008
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Nov 12 15:55:54 2008
Subject: [gdal-dev] GDAL and numpy, masking arrays
In-Reply-To: <491B3C23.2070302@noaa.gov>
References: <491B3322.90407@gmx.net> <491B3C23.2070302@noaa.gov>
Message-ID: <491B429A.6070501@gmx.net>

Chris

thanks a lot for the quick and very helpful explanations. Is there a 
possibility to reset the masked values '--' after the calculation to a 
special value?

Best regards

Armin

On 12/11/2008 21:27, Christopher Barker wrote:
> Armin Burger wrote:
>> maybe someone on this list has some experience using numpy in 
>> combination with GDAL/Python and could give me some advice.
> 
> For further questions about numpy, the numpy list is very helpful.
> 
> 
>> difference can be easily calculated after reading both images into an 
>> array and substract one from the other.
> 
>> The problem is that both images can contain clouds or snow that have 
>> predefined pixel values (252,253).
> 
>> Does anybody know if this is possible and how to perform it?
> 
> yep.
> 
>> Looking through the numpy docs I was not able to identify required 
>> methods or functions for this. There is something like 'masked arrays' 
>> but I have not understood if this could be used for my purpose.
> 
> This is exactly the kind of thing masked arrays are for. Yu can create a 
> masked array out of your data with something like:
> 
>  >>> a
> array([ 1,  2,  3,  4,  5,  6,  3,  4, 67,  4,  3,  5,  6,  7])
> 
> #a regular array
> 
>  >>> import numpy.ma as ma
> 
> # create a masked array with the mask set at all elements with a value 
> of 3:
>  >>> a = ma.masked_values(a, 3)
>  >>> a
> masked_array(data = [1 2 -- 4 5 6 -- 4 67 4 -- 5 6 7],
>       mask = [False False  True False False False  True False False 
> False  True False
>  False False],
>       fill_value=3)
> 
> #another one:
>  >>> b = np.array((1,3,4,2,4,7,4,5,23,5,7,3,8,5))
>  >>> b = ma.masked_values(b, 3)
>  >>> b
> masked_array(data = [1 -- 4 2 4 7 4 5 23 5 7 -- 8 5],
>       mask = [False  True False False False False False False False 
> False False  True
>  False False],
>       fill_value=3)
> 
> 
> add them together:
>  >>> c = a+b
>  >>> c
> masked_array(data = [2 -- -- 6 9 13 -- 9 90 9 -- -- 14 12],
>       mask = [False  True  True False False False  True False False 
> False  True  True
>  False False],
>       fill_value=3)
> 
> 
> If your values are Floating Point, then Another option would be to 
> replace all the "cloud" values with NaN:
> 
>  >>> a = np.array((1,2,3,4,5,6,3,4,67,4,3,5,6,7), dtype=np.float)
>  >>> a[a==3] = np.nan
>  >>> a
> array([  1.,   2.,  NaN,   4.,   5.,   6.,  NaN,   4.,  67.,   4.,  NaN,
>          5.,   6.,   7.])
>  >>> b = np.array((1,3,4,2,4,7,4,5,23,5,7,3,8,5), dtype=np.float)
>  >>> b[b==3] = np.nan
>  >>> b
> array([  1.,  NaN,   4.,   2.,   4.,   7.,   4.,   5.,  23.,   5.,   7.,
>         NaN,   8.,   5.])
>  >>> a+b
> array([  2.,  NaN,  NaN,   6.,   9.,  13.,  NaN,   9.,  90.,   9.,  NaN,
>         NaN,  14.,  12.])
> 
> 
> -Chris
> 
> 
> 
From woodbri at swoodbridge.com  Wed Nov 12 16:11:51 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 12 16:11:09 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <49190F31.8090705@swoodbridge.com>
References: <491866CC.8020101@swoodbridge.com>
	<49190F31.8090705@swoodbridge.com>
Message-ID: <491B4697.6070105@swoodbridge.com>

Frank, anyone,

Thoughts on this issue?
Thoughts on how to better diagnose the issue?
I can talk to the client about making an image available to someone if 
that would help.

I'm totally stuck on this one, converting 300+ images to tif first at 
2-3 hours per image is not going to hack it.

Thanks,
   -Steve


Stephen Woodbridge wrote:
> As a follow up on this issue, if I remove the -of VRT on the 
> gdal_translate it will create a geotif and then ALL the tiles are 
> extracted without any errors. So this looks like a bug in gdalwarp or in 
> the JP2MRSID driver since the jp2 can be converted to a geotif without 
> errors and gdalwarp will work with it, but has trouble when you try to 
> extract sub-zones from the jp2 image.
> 
> Currently, I only have 500MB jp2 files to work with, I will look through 
> the files and see if I can find a smaller one that exhibits the same 
> behavior.
> 
> Does anyone else have any of these large county composite jp2 images 
> that they can try and confirm this issue with?
> 
> -Steve
> 
> Stephen Woodbridge wrote:
>> Hello,
>>
>> I posted this buried in another thread and thought it should be 
>> reposted in its own thread. A short history, I have a lot of USDA 
>> county composite DOQQs that have been assembled into JPEG2000 files 
>> that are about 500MB each. I am trying to chop these back into DOQQ 
>> GeoTiffs. I have a script that does the chopping, it just automates 
>> the process and issues commands to do the work.
>>
>> I have abandon using the JPEG2000 driver and an now using the JP2MRSID 
>> driver. This is working better, but I'm still having problems like this:
>>
>> I create a VRT file as follows for each jp2 file:
>>
>> mkdir -p /home/swoodbridge/tiler-tiffs/30430-1226332146/src
>> gdal_translate -of VRT 
>> /var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2 -b 1 -b 2 
>> -b 3 /home/swoodbridge/tiler-tiffs/30430-1226332146/src/tmp.vrt
>>
>> then the VRT file is iterated over to extract the tiles with commands 
>> like:
>>
>> gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:26915 -t_srs 
>> EPSG:4326 -te -93.5 43.8125 -93.4375 43.875 -rb -wm 250 --config 
>> GDAL_ONE_BIG_READ ON -co "TILED=YES" 
>> /home/swoodbridge/tiler-tiffs/30430-1226332146/src/tmp.vrt 
>> /home/swoodbridge/tiler-tiffs/30430-1226332146/B-93_43/B-93_43_041.tif
>>
>> gdalwarp: ../compressed/compressed.cpp:1724: bool 
>> kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' 
>> failed.
>> Creating output file that is 6029P x 6029L.
>>
>> This does not happen on all image tiles that I try to extract, but 
>> does happen on a significant number of them like nearly 50% in one 
>> case. I looked at the pattern of failures and it looks like failures 
>> happen within a row of the jp2, so extracted tiles are G=good, X=bad, 
>> .=empty
>>
>> ................
>> ..GGGGGGGGG.....
>> ..GGGGGGGGG.....
>> ..GGGGGGGGG.....
>> ..GXXXXXXXG.....
>> ..GGGGGGGGG.....
>>
>>
>> ..GXXXXXXXG.....
>> ..GXXXXXXXG.....
>> ..GXXXXXXXG.....
>> ..GXXXXXXXG.....
>> ...GXXXXXXXG....
>> ................
>>
>> Any thoughts on this?
>> Is there a way to verify its compression integrity?
>>
>> I have try two different jp2 files of the 300+ friles that need to to 
>> be chopped up and gotten similar results.
>>
>> Thanks,
>>   -Steve
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From armin.burger at gmx.net  Wed Nov 12 16:50:45 2008
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Nov 12 16:51:50 2008
Subject: [gdal-dev] GDAL and numpy, masking arrays
In-Reply-To: <491B429A.6070501@gmx.net>
References: <491B3322.90407@gmx.net> <491B3C23.2070302@noaa.gov>
	<491B429A.6070501@gmx.net>
Message-ID: <491B4FB5.8020507@gmx.net>

I guess I found it, looks like the function
filled(c, 255)
does this.

Armin

On 12/11/2008 21:54, Armin Burger wrote:
> Chris
> 
> thanks a lot for the quick and very helpful explanations. Is there a 
> possibility to reset the masked values '--' after the calculation to a 
> special value?
> 
> Best regards
> 
> Armin
> 
> On 12/11/2008 21:27, Christopher Barker wrote:
>> Armin Burger wrote:
>>> maybe someone on this list has some experience using numpy in 
>>> combination with GDAL/Python and could give me some advice.
>>
>> For further questions about numpy, the numpy list is very helpful.
>>
>>
>>> difference can be easily calculated after reading both images into an 
>>> array and substract one from the other.
>>
>>> The problem is that both images can contain clouds or snow that have 
>>> predefined pixel values (252,253).
>>
>>> Does anybody know if this is possible and how to perform it?
>>
>> yep.
>>
>>> Looking through the numpy docs I was not able to identify required 
>>> methods or functions for this. There is something like 'masked 
>>> arrays' but I have not understood if this could be used for my purpose.
>>
>> This is exactly the kind of thing masked arrays are for. Yu can create 
>> a masked array out of your data with something like:
>>
>>  >>> a
>> array([ 1,  2,  3,  4,  5,  6,  3,  4, 67,  4,  3,  5,  6,  7])
>>
>> #a regular array
>>
>>  >>> import numpy.ma as ma
>>
>> # create a masked array with the mask set at all elements with a value 
>> of 3:
>>  >>> a = ma.masked_values(a, 3)
>>  >>> a
>> masked_array(data = [1 2 -- 4 5 6 -- 4 67 4 -- 5 6 7],
>>       mask = [False False  True False False False  True False False 
>> False  True False
>>  False False],
>>       fill_value=3)
>>
>> #another one:
>>  >>> b = np.array((1,3,4,2,4,7,4,5,23,5,7,3,8,5))
>>  >>> b = ma.masked_values(b, 3)
>>  >>> b
>> masked_array(data = [1 -- 4 2 4 7 4 5 23 5 7 -- 8 5],
>>       mask = [False  True False False False False False False False 
>> False False  True
>>  False False],
>>       fill_value=3)
>>
>>
>> add them together:
>>  >>> c = a+b
>>  >>> c
>> masked_array(data = [2 -- -- 6 9 13 -- 9 90 9 -- -- 14 12],
>>       mask = [False  True  True False False False  True False False 
>> False  True  True
>>  False False],
>>       fill_value=3)
>>
>>
>> If your values are Floating Point, then Another option would be to 
>> replace all the "cloud" values with NaN:
>>
>>  >>> a = np.array((1,2,3,4,5,6,3,4,67,4,3,5,6,7), dtype=np.float)
>>  >>> a[a==3] = np.nan
>>  >>> a
>> array([  1.,   2.,  NaN,   4.,   5.,   6.,  NaN,   4.,  67.,   4.,  NaN,
>>          5.,   6.,   7.])
>>  >>> b = np.array((1,3,4,2,4,7,4,5,23,5,7,3,8,5), dtype=np.float)
>>  >>> b[b==3] = np.nan
>>  >>> b
>> array([  1.,  NaN,   4.,   2.,   4.,   7.,   4.,   5.,  23.,   5.,   7.,
>>         NaN,   8.,   5.])
>>  >>> a+b
>> array([  2.,  NaN,  NaN,   6.,   9.,  13.,  NaN,   9.,  90.,   9.,  NaN,
>>         NaN,  14.,  12.])
>>
>>
>> -Chris
>>
>>
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From matej at matnet.net  Wed Nov 12 19:38:20 2008
From: matej at matnet.net (Matej)
Date: Wed Nov 12 19:44:39 2008
Subject: [gdal-dev] Problem with gdal-1.5.3 and FreeBSD 6.2
In-Reply-To: <3A3433309F494801BE7B1AD87A3777EE@Leeml>
References: <3A3433309F494801BE7B1AD87A3777EE@Leeml>
Message-ID: <9F19363056CA4F3E80CFB8801ABFF2DC@Leeml>

Hello,

I have just realized that there is a problem with shell - I don't know why /bin/sh is used instead of /bin/bash:
gmake[1]: Entering directory `/usr/home/matej/mapserver/gdal-1.5.3/apps'
/bin/sh /home/matej/mapserver/gdal-1.5.3/libtool --mode=link    g++  gdalinfo.o  \
                /home/matej/mapserver/gdal-1.5.3/libgdal.la -o gdalinfo
libtool_args+=: not found
compile_command+=: not found
finalize_command+=: not found
libtool_args+=: not found
libtool_args+=: not found
compile_command+=: not found
finalize_command+=: not found
libtool_args+=: not found
compile_command+=: not found
finalize_command+=: not found

If I run it with /bin/bash, it works. Now where can I set the default shell used in this and other cases?

Thanks, Matej
matej@matnet.net

  ----- Original Message ----- 
  From: Matej 
  To: gdal-dev@lists.osgeo.org 
  Sent: Wednesday, November 12, 2008 2:49 PM
  Subject: [gdal-dev] Problem with gdal-1.5.3 and FreeBSD 6.2


  Hi,

  I have a problem with getting gdal to compile on FreeBSD 6.2. My problem is exactly the same as the one described here http://lists.osgeo.org/pipermail/gdal-dev/2007-November/014763.html.

  I run configure with:./configure --with-pg=/usr/local/pgsql/bin/pg_config


  My configure ouput is
  ...
  GDAL is now configured for i386-unknown-freebsd6.2

    Installation directory:    /usr/local
    C compiler:                gcc -g -O2
    C++ compiler:              g++ -g -O2

    LIBTOOL support:           yes

    LIBZ support:              external
    GRASS support:             no
    CFITSIO support:           no
    PCRaster support:          internal
    NetCDF support:            no
    LIBPNG support:            internal
    LIBTIFF support:           internal (BigTIFF=yes)
    LIBGEOTIFF support:        internal
    LIBJPEG support:           internal
    LIBGIF support:            internal
    OGDI support:              no
    HDF4 support:              no
    HDF5 support:              no
    Kakadu support:            no
    JasPer support:            no
    ECW support:               no
    MrSID support:             no
    GRIB support:              no
    cURL support (wms/wcs/...):yes
    PostgreSQL support:        no
    MySQL support:             no
    Xerces-C support:            no
    Expat support:             yes
    ODBC support:              no
    PGeo support:              no
    OCI support:               no
    SDE support:               no
    DODS support:              no
    SQLite support:            no
    DWGdirect support          no
    PANORAMA GIS support:      no
    INFORMIX DataBlade support:no
    GEOS support:              yes


    Old-gen python          no
    SWIG Bindings:          no

    Statically link PROJ.4:    no
    enable OGR building:       yes
    enable pthread support:    no
    hide internal symbols:     no


  When building I get a couple of :not found errors, which look like these:
  /bin/sh /home/matej/mapserver/gdal-1.5.3/libtool --mode=link    g++  gdalinfo.o  \
                  /home/matej/mapserver/gdal-1.5.3/libgdal.la -o gdalinfo
  libtool_args+=: not found
  compile_command+=: not found
  finalize_command+=: not found
  libtool_args+=: not found
  libtool_args+=: not found
  compile_command+=: not found
  finalize_command+=: not found
  libtool_args+=: not found
  compile_command+=: not found
  finalize_command+=: not found
  libtool: link: g++  /home/matej/mapserver/gdal-1.5.3/.libs/libgdal.so -L/usr/local/lib /usr/local/lib/libgeos_c.so /usr/local/lib/libgeos.so /usr/local/lib/libexpat.so /usr/local/lib/libcurl.so -lssl -lcrypto -lz -Wl,-rpath -Wl,/usr/local/lib
  /usr/lib/crt1.o(.text+0x72): In function `_start':
  : undefined reference to `main'
  gmake[1]: *** [gdalinfo] Error 1


  I can't find any useful idea, I need libtool but I was able to get it to work long time ago on a FreeBSD 6.2 machine. 

  I had libtool 1.5 installed and now have 2.2.6, but the error is the same.

  I would be very glad for any help whatsoever,
  thank you in advance, Matej Serc
  matej@matnet.net


------------------------------------------------------------------------------


  _______________________________________________
  gdal-dev mailing list
  gdal-dev@lists.osgeo.org
  http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081113/f8d2fba2/attachment-0001.html
From matej at matnet.net  Wed Nov 12 20:15:00 2008
From: matej at matnet.net (Matej)
Date: Wed Nov 12 20:15:08 2008
Subject: [gdal-dev] Problem with gdal-1.5.3 and FreeBSD 6.2
In-Reply-To: <9F19363056CA4F3E80CFB8801ABFF2DC@Leeml>
References: <3A3433309F494801BE7B1AD87A3777EE@Leeml>
	<9F19363056CA4F3E80CFB8801ABFF2DC@Leeml>
Message-ID: <E539B72BCBCD45E2847B640D37C23E17@Leeml>

Hi,

I will reply myself once more (and the last time). I solved the problem with setting the direct path to the bash instead of $(SHELL) in the line 
LIBTOOL =       $(SHELL) $(top_builddir)/libtool

This may help someone else too.

Sorry for reposting on the list,
Matej
matej@matnet.net

  ----- Original Message ----- 
  From: Matej 
  To: gdal-dev@lists.osgeo.org 
  Sent: Thursday, November 13, 2008 1:38 AM
  Subject: Re: [gdal-dev] Problem with gdal-1.5.3 and FreeBSD 6.2


  Hello,

  I have just realized that there is a problem with shell - I don't know why /bin/sh is used instead of /bin/bash:
  gmake[1]: Entering directory `/usr/home/matej/mapserver/gdal-1.5.3/apps'
  /bin/sh /home/matej/mapserver/gdal-1.5.3/libtool --mode=link    g++  gdalinfo.o  \
                  /home/matej/mapserver/gdal-1.5.3/libgdal.la -o gdalinfo
  libtool_args+=: not found
  compile_command+=: not found
  finalize_command+=: not found
  libtool_args+=: not found
  libtool_args+=: not found
  compile_command+=: not found
  finalize_command+=: not found
  libtool_args+=: not found
  compile_command+=: not found
  finalize_command+=: not found

  If I run it with /bin/bash, it works. Now where can I set the default shell used in this and other cases?

  Thanks, Matej
  matej@matnet.net

    ----- Original Message ----- 
    From: Matej 
    To: gdal-dev@lists.osgeo.org 
    Sent: Wednesday, November 12, 2008 2:49 PM
    Subject: [gdal-dev] Problem with gdal-1.5.3 and FreeBSD 6.2


    Hi,

    I have a problem with getting gdal to compile on FreeBSD 6.2. My problem is exactly the same as the one described here http://lists.osgeo.org/pipermail/gdal-dev/2007-November/014763.html.

    I run configure with:./configure --with-pg=/usr/local/pgsql/bin/pg_config


    My configure ouput is
    ...
    GDAL is now configured for i386-unknown-freebsd6.2

      Installation directory:    /usr/local
      C compiler:                gcc -g -O2
      C++ compiler:              g++ -g -O2

      LIBTOOL support:           yes

      LIBZ support:              external
      GRASS support:             no
      CFITSIO support:           no
      PCRaster support:          internal
      NetCDF support:            no
      LIBPNG support:            internal
      LIBTIFF support:           internal (BigTIFF=yes)
      LIBGEOTIFF support:        internal
      LIBJPEG support:           internal
      LIBGIF support:            internal
      OGDI support:              no
      HDF4 support:              no
      HDF5 support:              no
      Kakadu support:            no
      JasPer support:            no
      ECW support:               no
      MrSID support:             no
      GRIB support:              no
      cURL support (wms/wcs/...):yes
      PostgreSQL support:        no
      MySQL support:             no
      Xerces-C support:            no
      Expat support:             yes
      ODBC support:              no
      PGeo support:              no
      OCI support:               no
      SDE support:               no
      DODS support:              no
      SQLite support:            no
      DWGdirect support          no
      PANORAMA GIS support:      no
      INFORMIX DataBlade support:no
      GEOS support:              yes


      Old-gen python          no
      SWIG Bindings:          no

      Statically link PROJ.4:    no
      enable OGR building:       yes
      enable pthread support:    no
      hide internal symbols:     no


    When building I get a couple of :not found errors, which look like these:
    /bin/sh /home/matej/mapserver/gdal-1.5.3/libtool --mode=link    g++  gdalinfo.o  \
                    /home/matej/mapserver/gdal-1.5.3/libgdal.la -o gdalinfo
    libtool_args+=: not found
    compile_command+=: not found
    finalize_command+=: not found
    libtool_args+=: not found
    libtool_args+=: not found
    compile_command+=: not found
    finalize_command+=: not found
    libtool_args+=: not found
    compile_command+=: not found
    finalize_command+=: not found
    libtool: link: g++  /home/matej/mapserver/gdal-1.5.3/.libs/libgdal.so -L/usr/local/lib /usr/local/lib/libgeos_c.so /usr/local/lib/libgeos.so /usr/local/lib/libexpat.so /usr/local/lib/libcurl.so -lssl -lcrypto -lz -Wl,-rpath -Wl,/usr/local/lib
    /usr/lib/crt1.o(.text+0x72): In function `_start':
    : undefined reference to `main'
    gmake[1]: *** [gdalinfo] Error 1


    I can't find any useful idea, I need libtool but I was able to get it to work long time ago on a FreeBSD 6.2 machine. 

    I had libtool 1.5 installed and now have 2.2.6, but the error is the same.

    I would be very glad for any help whatsoever,
    thank you in advance, Matej Serc
    matej@matnet.net


----------------------------------------------------------------------------


    _______________________________________________
    gdal-dev mailing list
    gdal-dev@lists.osgeo.org
    http://lists.osgeo.org/mailman/listinfo/gdal-dev


------------------------------------------------------------------------------


  _______________________________________________
  gdal-dev mailing list
  gdal-dev@lists.osgeo.org
  http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081113/ed8ff526/attachment.html
From warmerdam at pobox.com  Wed Nov 12 21:56:28 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 12 21:56:42 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <491B4697.6070105@swoodbridge.com>
References: <491866CC.8020101@swoodbridge.com>
	<49190F31.8090705@swoodbridge.com> <491B4697.6070105@swoodbridge.com>
Message-ID: <491B975C.6060601@pobox.com>

Stephen Woodbridge wrote:
> Frank, anyone,
> 
> Thoughts on this issue?
> Thoughts on how to better diagnose the issue?
> I can talk to the client about making an image available to someone if 
> that would help.
> 
> I'm totally stuck on this one, converting 300+ images to tif first at 
> 2-3 hours per image is not going to hack it.
...
>>> gdalwarp: ../compressed/compressed.cpp:1724: bool 
>>> kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' 
>>> failed.

Stephen,

As I understand it, the problem you see is that under some access
arrangements you are getting this kd_tile assertion from the JP2MRSID
driver.  Is that right?  I'm not familiar with this error, and it is coming
from deep inside the MrSID SDK (in fact within the subcomponent that is
derived from the Kakadu library as we can see from the names).

My impression is that to make any progress you would need to supply
a sample that demonstrates the problem.  At that point I could try and
diagnose if I'm doing something boneheaded.  If nothing is apparently
someone would need to bounce the issue (hopefully with a narrow example
program operating directly against the MrSID SDK) to Lizardtech for further
evaluation.

No offense to Lizardtech - we have vaguely similar issues with ECW,
and Kakadu too - but it is just hellish to diagnose some of these problems
deep in proprietary and/or complicated sub-libraries.  I find it hard to
bring myself to even dig into such issues unless a paying client makes me
do it, though I'd be willing to make a quick try for you if there was an
easy way for me to try.

PS. My daily download limit via my satellite ISP is 500MB and I don't want
to use it all up on a single jp2 file.  Please try to reproduce the issue
with a small file.

PPS.  I don't understand your point where you seem to suggest that converting
to tiff first is slower than other mechanisms.  Are you suggesting it takes
2-3 hours to convert a 500MB jpeg2000 image to GeoTIFF?  Perhaps you need
to up your GDAL block cache size?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From woodbri at swoodbridge.com  Thu Nov 13 00:46:39 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Thu Nov 13 00:46:01 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <491B975C.6060601@pobox.com>
References: <491866CC.8020101@swoodbridge.com>
	<49190F31.8090705@swoodbridge.com>
	<491B4697.6070105@swoodbridge.com> <491B975C.6060601@pobox.com>
Message-ID: <491BBF3F.4080508@swoodbridge.com>

Frank Warmerdam wrote:
> Stephen Woodbridge wrote:
>> Frank, anyone,
>>
>> Thoughts on this issue?
>> Thoughts on how to better diagnose the issue?
>> I can talk to the client about making an image available to someone if 
>> that would help.
>>
>> I'm totally stuck on this one, converting 300+ images to tif first at 
>> 2-3 hours per image is not going to hack it.
> ...
>>>> gdalwarp: ../compressed/compressed.cpp:1724: bool 
>>>> kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' 
>>>> failed.
> 
> Stephen,
> 
> As I understand it, the problem you see is that under some access
> arrangements you are getting this kd_tile assertion from the JP2MRSID
> driver.  Is that right?  I'm not familiar with this error, and it is coming
> from deep inside the MrSID SDK (in fact within the subcomponent that is
> derived from the Kakadu library as we can see from the names).
> 
> My impression is that to make any progress you would need to supply
> a sample that demonstrates the problem.  At that point I could try and
> diagnose if I'm doing something boneheaded.  If nothing is apparently
> someone would need to bounce the issue (hopefully with a narrow example
> program operating directly against the MrSID SDK) to Lizardtech for further
> evaluation.
> 
> No offense to Lizardtech - we have vaguely similar issues with ECW,
> and Kakadu too - but it is just hellish to diagnose some of these problems
> deep in proprietary and/or complicated sub-libraries.  I find it hard to
> bring myself to even dig into such issues unless a paying client makes me
> do it, though I'd be willing to make a quick try for you if there was an
> easy way for me to try.

Frank,

Thank you for your response. I know you are busy and I really appreciate 
your help and suggestions.

I understand your reluctance on diving into vendor code issues, I feel 
pretty much the same way, but I also feel like I need to offer some 
options to the client. I will discuss having them talk to you about 
funding this if there are no other options.

> PS. My daily download limit via my satellite ISP is 500MB and I don't want
> to use it all up on a single jp2 file.  Please try to reproduce the issue
> with a small file.

I'm still looking for a smaller file that I can reproduce this issue on. 
The smallest file I have at 92MB worked fine, so I need to try a few 
more. The file below at 342MB exhibits the problem. Looking for 
something smaller.

> PPS.  I don't understand your point where you seem to suggest that 
> converting
> to tiff first is slower than other mechanisms.  Are you suggesting it takes
> 2-3 hours to convert a 500MB jpeg2000 image to GeoTIFF?  Perhaps you need
> to up your GDAL block cache size?

Yes, this is exactly my problem it is taking 2-3 hours to run:

GDAL_SKIP=JPEG2000 gdal_translate my.jp2 -b 1 -b 2 -b 3 my.tif

The above was a replacement to for creating a VRT file which was very 
fast using:

GDAL_SKIP=JPEG2000 gdal_translate -of VRT my.jp2 -b 1 -b 2 -b 3 my.vrt

This is a pretty beefy system with 6GB of memory and fast disks, etc.

How do I up the GDAL block cache size? Please give me a hint or point me 
to the right page(s).

I have also tried:

[swoodbridge@booboo ~]$ ls -lh 
/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2
-rw-rw-r--  1 swoodbridgeusers 342M Oct 20 16:49 
/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2

[swoodbridge@booboo ~]$ GDAL_SKIP=JPEG2000 gdal_translate --config 
GDAL_CACHEMAX 500 
/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2 -b 1 -b 2 
-b 3 my.tif
Input file size is 36010, 49447
0...

and it does not seem to be any faster, but I confess to not having 
waited very long 2-5mins max.

I also tried the following which was a little faster at 43 mins:

GDAL_SKIP=JPEG2000 gdalwarp --config GDAL_CACHEMAX 500 -wm 500 -co 
"TILED=YES" my.vrt my.tif
Creating output file that is 36010P x 49447L.
Processing input file my.vrt.
0...10...20...30...40...50...60...70...80...90...100 - done.

Thanks,
   -Steve
From ivan.lucena at pmldnet.com  Wed Nov 12 18:48:40 2008
From: ivan.lucena at pmldnet.com (Ivan Lucena)
Date: Thu Nov 13 06:49:34 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <491BBF3F.4080508@swoodbridge.com>
References: <491866CC.8020101@swoodbridge.com>	<49190F31.8090705@swoodbridge.com>	<491B4697.6070105@swoodbridge.com>
	<491B975C.6060601@pobox.com> <491BBF3F.4080508@swoodbridge.com>
Message-ID: <491B6B58.8020900@pmldnet.com>

Stephen,

It seams like the suggestion to use VRT would be working all right if it 
wasn't for that that problem with MrSID.

Well, you can increase the value on GDAL_CACHEMAX to 500 (mb) or more if 
you have that amount of free memory.

By the way, since the crash on the MrSID driver(s) only happens when you 
select some bands so what if you use "gdal_translate -of MEM", then 
"gdal_translate -of VRT -b 1 -b 2 -b 3" and then "gdalwarp". That will 
put the problem away, since you will be extracting all the bands and the 
access to a MEM should be way faster than a Geotiff file.

Just an idea,

Regards,

Ivan

Stephen Woodbridge wrote:
> Frank Warmerdam wrote:
>> Stephen Woodbridge wrote:
>>> Frank, anyone,
>>>
>>> Thoughts on this issue?
>>> Thoughts on how to better diagnose the issue?
>>> I can talk to the client about making an image available to someone 
>>> if that would help.
>>>
>>> I'm totally stuck on this one, converting 300+ images to tif first 
>>> at 2-3 hours per image is not going to hack it.
>> ...
>>>>> gdalwarp: ../compressed/compressed.cpp:1724: bool 
>>>>> kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 
>>>>> 0' failed.
>>
>> Stephen,
>>
>> As I understand it, the problem you see is that under some access
>> arrangements you are getting this kd_tile assertion from the JP2MRSID
>> driver.  Is that right?  I'm not familiar with this error, and it is 
>> coming
>> from deep inside the MrSID SDK (in fact within the subcomponent that is
>> derived from the Kakadu library as we can see from the names).
>>
>> My impression is that to make any progress you would need to supply
>> a sample that demonstrates the problem.  At that point I could try and
>> diagnose if I'm doing something boneheaded.  If nothing is apparently
>> someone would need to bounce the issue (hopefully with a narrow example
>> program operating directly against the MrSID SDK) to Lizardtech for 
>> further
>> evaluation.
>>
>> No offense to Lizardtech - we have vaguely similar issues with ECW,
>> and Kakadu too - but it is just hellish to diagnose some of these 
>> problems
>> deep in proprietary and/or complicated sub-libraries.  I find it hard to
>> bring myself to even dig into such issues unless a paying client 
>> makes me
>> do it, though I'd be willing to make a quick try for you if there was an
>> easy way for me to try.
>
> Frank,
>
> Thank you for your response. I know you are busy and I really 
> appreciate your help and suggestions.
>
> I understand your reluctance on diving into vendor code issues, I feel 
> pretty much the same way, but I also feel like I need to offer some 
> options to the client. I will discuss having them talk to you about 
> funding this if there are no other options.
>
>> PS. My daily download limit via my satellite ISP is 500MB and I don't 
>> want
>> to use it all up on a single jp2 file.  Please try to reproduce the 
>> issue
>> with a small file.
>
> I'm still looking for a smaller file that I can reproduce this issue 
> on. The smallest file I have at 92MB worked fine, so I need to try a 
> few more. The file below at 342MB exhibits the problem. Looking for 
> something smaller.
>
>> PPS.  I don't understand your point where you seem to suggest that 
>> converting
>> to tiff first is slower than other mechanisms.  Are you suggesting it 
>> takes
>> 2-3 hours to convert a 500MB jpeg2000 image to GeoTIFF?  Perhaps you 
>> need
>> to up your GDAL block cache size?
>
> Yes, this is exactly my problem it is taking 2-3 hours to run:
>
> GDAL_SKIP=JPEG2000 gdal_translate my.jp2 -b 1 -b 2 -b 3 my.tif
>
> The above was a replacement to for creating a VRT file which was very 
> fast using:
>
> GDAL_SKIP=JPEG2000 gdal_translate -of VRT my.jp2 -b 1 -b 2 -b 3 my.vrt
>
> This is a pretty beefy system with 6GB of memory and fast disks, etc.
>
> How do I up the GDAL block cache size? Please give me a hint or point 
> me to the right page(s).
>
> I have also tried:
>
> [swoodbridge@booboo ~]$ ls -lh 
> /var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2
> -rw-rw-r--  1 swoodbridgeusers 342M Oct 20 16:49 
> /var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2
>
> [swoodbridge@booboo ~]$ GDAL_SKIP=JPEG2000 gdal_translate --config 
> GDAL_CACHEMAX 500 
> /var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2 -b 1 -b 2 
> -b 3 my.tif
> Input file size is 36010, 49447
> 0...
>
> and it does not seem to be any faster, but I confess to not having 
> waited very long 2-5mins max.
>
> I also tried the following which was a little faster at 43 mins:
>
> GDAL_SKIP=JPEG2000 gdalwarp --config GDAL_CACHEMAX 500 -wm 500 -co 
> "TILED=YES" my.vrt my.tif
> Creating output file that is 36010P x 49447L.
> Processing input file my.vrt.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> Thanks,
>   -Steve
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From Tom.Kralidis at ec.gc.ca  Thu Nov 13 07:46:54 2008
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Thu Nov 13 07:46:59 2008
Subject: [gdal-dev] problems building Perl swig
In-Reply-To: <DDA8F0C2655CB14DA8C7B84CDC6759A617C06B17@dowexch2.ontario.int.ec.gc.ca>
References: <dd2b9faec8034152bf4caacff7720f5e@h1215603.SERVERKOMPETENZ.NET>
	<DDA8F0C2655CB14DA8C7B84CDC6759A617C06B17@dowexch2.ontario.int.ec.gc.ca>
Message-ID: <DDA8F0C2655CB14DA8C7B84CDC6759A617C06B57@dowexch2.ontario.int.ec.gc.ca>


> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of 
> Kralidis,Tom [Ontario]
> Sent: Monday, November 10, 2008 7:26 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] problems building Perl swig
> 
> 
> Using svn trunk on fc9:
> 
> $ ./configure --with-png --with-libtiff=internal 
> --with-geotiff=internal --with-jpeg --with-xerces 
> --with-geos=no --with-pg=/usr/bin/pg_config 
> --with-mysql=/usr/bin/mysql_config --with-sqlite 
> --with-curl=/usr/bin/curl-config --with-python --with-expat 
> --with-perl ...
> 
> 
> $ make
> ...
> 
> make[2]: Entering directory
> `/home/tkralidi/foss4g/gdal/trunk/gdal/swig/perl'
> perl Makefile.PL
> Building in GDAL distro tree
> GDAL version (1.6.0) and module version () do not match at 
> Makefile.PL line 50.
> make[2]: *** [Makefile_Geo__GDAL] Error 255
> make[2]: Leaving directory
> `/home/tkralidi/foss4g/gdal/trunk/gdal/swig/perl'
> make[1]: *** [build] Error 2
> make[1]: Leaving directory 
> `/home/tkralidi/foss4g/gdal/trunk/gdal/swig'
> make: *** [swig-modules] Error 2
> 
> When I omit --with-perl in ./configure, all builds and 
> installs without issue.
> 
> Any advice or suggestions are valued.
> 


Any update / comments here?

Looking deeper, in swig/perl/Makefile.PL, line 50:

    die "GDAL version ($gdal_version) and module version ($pm_version)
do not match"
        unless $gdal_version eq $pm_version;

- $gdal_version is picked up from CONFIG_VERSION="1.6.0" in
apps/gdal-config

- $pm_version is picked up from GDAL_VERSION in swig/perl/Makefile.PL,
which always fails because it's not in swig/perl/Makefile.PL (or at
least does not get generated into swig/perl/Makefile.PL)

..Tom


From burstain at gmail.com  Thu Nov 13 10:56:29 2008
From: burstain at gmail.com (Eran Burstain)
Date: Thu Nov 13 10:56:31 2008
Subject: [gdal-dev] raw x-y-z height map.
Message-ID: <817db2970811130756i3deab79dub86e7c5508bf0f62@mail.gmail.com>

Hi.
I want to convert a height map (DTED or other format) to simple ASCII file
with X,Y,Z coordinates, supplemental data (datums) should be in separate
file (.vrt), Is there support in such a format ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081113/2cbfc229/attachment.html
From grevedan at hotmail.com  Thu Nov 13 11:41:40 2008
From: grevedan at hotmail.com (Dan Greve)
Date: Thu Nov 13 11:42:42 2008
Subject: [gdal-dev] NITF TRE support
In-Reply-To: <70A19B90-E0F0-4377-9F13-60E11A5FEC3A@progeny.net>
References: <70A19B90-E0F0-4377-9F13-60E11A5FEC3A@progeny.net>
Message-ID: <COL107-W65FE20205DBCE16D518CCAC7170@phx.gbl>


Kurt,
 
I am in the same boat.  I have modified the GDAL driver to read AIMIDB and ACFTB similiar to BLOCKA metdata, but I do not have the capability to write these TREs. The TRE creation option should allow this, but I haven't found a good example of how to do this.  Hopefully the developer can provide feedback here...
 
-- Dan Greve
 
 
> From: klandrus@progeny.net> To: gdal-dev@lists.osgeo.org> Date: Wed, 12 Nov 2008 11:40:14 -0500> Subject: [gdal-dev] NITF TRE support> > > Ok, I was looking through nithfile.c, am I correct in understanding > that the only TRE supported for saving is BLOCKA, and that each > additional TRE needs to be handled> individually?> > I need to add support for the following TREs. But I don't really need > to add new SDE headers, but preserve the original values as read> using GDALGetMetadataItem.> > SENSRA> AIMIDB> ACFTB> > Is there an easy way to save back an TRE that was read using GDAL (/0 > escaped string)> or should I pull out all the fields from the string, and then > reassemble them in a function as is done for BLOCKA?> > Kurt Landrus> Progeny Systems Corp.> klandrus@progeny.net> Office: 703-368-6107 x424> Lab: 703-368-6107 x520> > > > _______________________________________________> gdal-dev mailing list> gdal-dev@lists.osgeo.org> http://lists.osgeo.org/mailman/listinfo/gdal-dev
_________________________________________________________________
Color coding for safety: Windows Live Hotmail alerts you to suspicious email.
http://windowslive.com/Explore/Hotmail?ocid=TXT_TAGLM_WL_hotmail_acq_safety_112008
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081113/19177b21/attachment.html
From mpg at lizardtech.com  Thu Nov 13 11:50:16 2008
From: mpg at lizardtech.com (Michael P. Gerlek)
Date: Thu Nov 13 11:50:18 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <20081113114937.12FC2E0121C@lists.osgeo.org>
References: <20081113114937.12FC2E0121C@lists.osgeo.org>
Message-ID: <DBEC881B4E22D1449F5FAC530E1ADD12CDA6B1@sea-srv-ms3.lizardtech.com>

Stephen, Frank:

Yes, this is indeed a Kakadu error coming from underneath our SDK.  The
error "feels" like the sort of thing that happens when one is requesting
a bounding box that is outside of the legal bounds for the image at that
magnification level: that is, perhaps the scene parameters being
requested by GDAL, or as they are interpreted by the MrSID SDK, are
causing Kakadu to choke.

If you can figure out what the scene parameters being passed into the
MrSID SDK are, we could then call the SDK directly using the mrsiddecode
command line tool and see what happens.

-mpg & the gang

From rigal at rapideye.de  Thu Nov 13 12:09:19 2008
From: rigal at rapideye.de (Matthieu Rigal)
Date: Thu Nov 13 12:09:36 2008
Subject: [gdal-dev] GDAL encounters problem with very small files, part 2
Message-ID: <200811131809.20023.rigal@rapideye.de>

Hi all, hi Frank,

OOoooops, I have forgot to say that I unfortunately have only the version 
1.4.2 of GDAL/OGR here. If it works on your machine, then it may come from 
this out-of-date version....
But please check it also from your side...

Best regards,
Matthieu Rigal



RapidEye AG
Molkenmarkt 30
14776 Brandenburg an der Havel
Germany

Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
Management Board/Vorstand: Wolfgang G. Biedermann
Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: Axel Schmalz
Commercial Register/Handelsregister Potsdam HRB 17 796
Tax Number/Steuernummer: 048/100/00053
VAT-Ident-Number/Ust.-ID: DE 199331235
DIN EN ISO 9001 certified

*************************************************************************
Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
E-Mail irrtuemlich erhalten haben, informieren Sie bitte sofort den
Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie
die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.

The information in this e-mail is intended for the named recipients
only. It may contain privileged and confidential information. If you
have received this communication in error, any use, copying or
dissemination of its contents is strictly prohibited. Please erase all
copies of the message along with any included attachments and notify
RapidEye AG or the sender immediately by telephone at the number
indicated on this page.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: clipped11-8bits.tif
Type: image/tiff
Size: 908 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081113/83857f54/clipped11-8bits.tif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: clipped11.tif
Type: image/tiff
Size: 616 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081113/83857f54/clipped11.tif
From warmerdam at pobox.com  Thu Nov 13 12:13:17 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Nov 13 12:13:47 2008
Subject: [gdal-dev] Re: GDAL encounters problem with very small files
In-Reply-To: <200811131802.17798.rigal@rapideye.de>
References: <20081113114937.2807FE0121D@lists.osgeo.org>
	<200811131802.17798.rigal@rapideye.de>
Message-ID: <491C602D.1050405@pobox.com>

Matthieu Rigal wrote:
> Hi all, hi Frank,
> 
> I am encountering problem with gdal_translate and gdalinfo with very little 
> images. I have for example a 9*16 pixels image, georeferenced, 16bits and 
> 8bits, that I have tested in 2 formats : .pix PCIDSK and .tif GTiff.
> 
> And both times, I get errors :
> gdal_translate: symbol lookup error: gdal_translate: undefined symbol: 
> GDALValidateCreationOptions
> gdalinfo: symbol lookup error: gdalinfo: undefined symbol: GDALGetFileList
> 
> I have attached both tif files in 8bits and 16 bits, with the hope it will 
> help. Notice that these images can be open by software like QGis or PCI 
> Geomatica...
> 
> If you have any ideas or if it is a known bug... let me know !

Matthieu,

I tried gdalinfo on the files and it worked fine.  Your Python looked fine.

The error messages seem to indicate an inappropriate mixture of versions.
Presumably recent Python bindings that are trying to pick up an older
version of GDAL lacking some modern entry points.  Does the same configuration
work fine with larger TIFF files?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From rigal at rapideye.de  Thu Nov 13 12:02:17 2008
From: rigal at rapideye.de (Matthieu Rigal)
Date: Thu Nov 13 12:21:58 2008
Subject: [gdal-dev] GDAL encounters problem with very small files
In-Reply-To: <20081113114937.2807FE0121D@lists.osgeo.org>
References: <20081113114937.2807FE0121D@lists.osgeo.org>
Message-ID: <200811131802.17798.rigal@rapideye.de>

Hi all, hi Frank,

I am encountering problem with gdal_translate and gdalinfo with very little 
images. I have for example a 9*16 pixels image, georeferenced, 16bits and 
8bits, that I have tested in 2 formats : .pix PCIDSK and .tif GTiff.

And both times, I get errors :
gdal_translate: symbol lookup error: gdal_translate: undefined symbol: 
GDALValidateCreationOptions
gdalinfo: symbol lookup error: gdalinfo: undefined symbol: GDALGetFileList

I have attached both tif files in 8bits and 16 bits, with the hope it will 
help. Notice that these images can be open by software like QGis or PCI 
Geomatica...

If you have any ideas or if it is a known bug... let me know !

Best regards,
Matthieu Rigal

PS : it may be related to the bug described before, but just to know, is there 
anything wrong in this portion of Python code :
                    sName = sFile[:-3] + "tif"
                    xImGdal= gdal.Open("%s/%s"%(sImgDir, sFile))
                    driver = gdal.GetDriverByName('GTiff')
                    #ds = driver.CreateDataSource(sName)
                    ds = driver.CopyDataSource(xImGdal, sName)
                    ds.Destroy()


RapidEye AG
Molkenmarkt 30
14776 Brandenburg an der Havel
Germany

Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
Management Board/Vorstand: Wolfgang G. Biedermann
Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: Axel Schmalz
Commercial Register/Handelsregister Potsdam HRB 17 796
Tax Number/Steuernummer: 048/100/00053
VAT-Ident-Number/Ust.-ID: DE 199331235
DIN EN ISO 9001 certified

*************************************************************************
Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
E-Mail irrtuemlich erhalten haben, informieren Sie bitte sofort den
Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie
die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.

The information in this e-mail is intended for the named recipients
only. It may contain privileged and confidential information. If you
have received this communication in error, any use, copying or
dissemination of its contents is strictly prohibited. Please erase all
copies of the message along with any included attachments and notify
RapidEye AG or the sender immediately by telephone at the number
indicated on this page.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: clipped11-8bits.tif
Type: image/tiff
Size: 908 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081113/99d457a2/clipped11-8bits.tif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: clipped11.tif
Type: image/tiff
Size: 616 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081113/99d457a2/clipped11.tif
From gdal at archivideo.com  Thu Nov 13 12:06:28 2008
From: gdal at archivideo.com (Johan Nouvel)
Date: Thu Nov 13 12:28:16 2008
Subject: [gdal-dev] OGR WFS driver
Message-ID: <491C5E94.60105@archivideo.com>

Hello all,

I know GDAL has a WMS  and WCS driver, but no WFS driver.
After looking into the mailing list archives I have found no references 
to a WFS driver.
For my job, we have developped such a driver (in readonly mode, but 
write mode is planned) , based on OGR and its GML driver.

Is it interesting for GDAL/OGR users to have a WFS driver ?  If yes, I 
could spend time to put our code into gdal source (actually it is 
separate from gdal source because of a specific compiling process) and 
then send it  in order to be integrated in the svn trunk.

Regards,
Johan.

-- 
Johan Nouvel, R&D Engineer
http://www.archivideo.com
tel : +33 (0)2 99 86 30 20
ARCHIVIDEO, 40 rue des Veyettes, 35000 RENNES, FRANCE

From warmerdam at pobox.com  Thu Nov 13 12:43:27 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Nov 13 12:43:55 2008
Subject: [gdal-dev] OGR WFS driver
In-Reply-To: <491C5E94.60105@archivideo.com>
References: <491C5E94.60105@archivideo.com>
Message-ID: <491C673F.2010704@pobox.com>

Johan Nouvel wrote:
> Hello all,
> 
> I know GDAL has a WMS  and WCS driver, but no WFS driver.
> After looking into the mailing list archives I have found no references 
> to a WFS driver.
> For my job, we have developped such a driver (in readonly mode, but 
> write mode is planned) , based on OGR and its GML driver.
> 
> Is it interesting for GDAL/OGR users to have a WFS driver ?  If yes, I 
> could spend time to put our code into gdal source (actually it is 
> separate from gdal source because of a specific compiling process) and 
> then send it  in order to be integrated in the svn trunk.

Johan,

We are indeed interested in having a WFS driver for OGR - whether read-only
or read-write.  There has been discussion of doing this in the past but
there was never sufficient resources to pursue it.

I'd suggest preparing the driver code and submitting it as a ticket.  But,
assuming you are willing, I'd like to propose you as a commiter to take
care of final integration and ongoing support.  An existing commiter will
presumably also be involved to do some review and support.

I would like to see such a WFS driver use the existing libcurl interface
(as defined in cpl_http.h) if it doesn't already.

I'm also curious what you do for parsing the GML.  Do you process it through
the existing OGR GML driver?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From smm at rinconres.com  Thu Nov 13 13:29:51 2008
From: smm at rinconres.com (Sarah Mulholland)
Date: Thu Nov 13 13:32:46 2008
Subject: [gdal-dev] (no subject)
Message-ID: <DAF3E4A4518B6C41AE64C13CD76756A3160AE40A@bexchmb2.rinconres.com>

I need to write multiple images to a NITF file.  I notice on the gdal NITF page that gdal only writes one image or raster of data to a file.  On another page, I see that multiple images in a NITF can be read as subdatasets.  Is the documentation up to date that subdatasets in a NITF file are a read-only capability? In there any plan to allow the writing of subdatasets?

What's the usual approach for writing multiple images to a NITF from C and python?  If not gdal, is there some other package that people use?  I looked on the JITC web site, and it seems like most certified packages are parts of large systems, not just NITF libraries.

Any suggestions?  Thanks in advance.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081113/d06d3a17/attachment.html
From warmerdam at pobox.com  Thu Nov 13 13:44:27 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Nov 13 13:44:50 2008
Subject: [gdal-dev] (no subject)
In-Reply-To: <DAF3E4A4518B6C41AE64C13CD76756A3160AE40A@bexchmb2.rinconres.com>
References: <DAF3E4A4518B6C41AE64C13CD76756A3160AE40A@bexchmb2.rinconres.com>
Message-ID: <491C758B.3080302@pobox.com>

Sarah Mulholland wrote:
> I need to write multiple images to a NITF file.  I notice on the gdal 
> NITF page that gdal only writes one image or raster of data to a file.  
> On another page, I see that multiple images in a NITF can be read as 
> subdatasets.  Is the documentation up to date that subdatasets in a NITF 
> file are a read-only capability? In there any plan to allow the writing 
> of subdatasets?

Sarah,

You are correct.  Currently the GDAL NITF writer is quite a bit less
flexible than the reader.  It does not support writing multi-image
files for instance.

> What?s the usual approach for writing multiple images to a NITF from C 
> and python?  If not gdal, is there some other package that people use?  
> I looked on the JITC web site, and it seems like most certified packages 
> are parts of large systems, not just NITF libraries. 

You might want to look into the NITF generation capabilities of OSSIM.

   http://www.ossim.org/

You also might want to look at NITRO-NITF

   http://nitro-nitf.sourceforge.net/

In particlar the NITRO-NITF library is focused on NITF support, and
appears to be fairly flexible though I haven't tried to use it myself
yet.  It might also be useful to the folks asking about TRE writing though
I hope to respond more directly to them soon.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Nov 13 14:02:21 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Nov 13 14:03:05 2008
Subject: [gdal-dev] raw x-y-z height map.
In-Reply-To: <817db2970811130756i3deab79dub86e7c5508bf0f62@mail.gmail.com>
References: <817db2970811130756i3deab79dub86e7c5508bf0f62@mail.gmail.com>
Message-ID: <491C79BD.7020904@pobox.com>

Eran Burstain wrote:
> Hi.
> I want to convert a height map (DTED or other format) to simple ASCII 
> file with X,Y,Z coordinates, supplemental data (datums) should be in 
> separate file (.vrt), Is there support in such a format ?

Eran,

No, there is currently no direct support for such a format in GDAL.

The gdal/swig/python/scripts/gdal2xyz.py script will produce such a file
but it is not then readable with GDAL, nor can it be referenced from a .vrt
file.

I do frequently use the AAIGRID driver to produce easy to read ascii files,
but it does not produce x/y values for each pixel.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From randre at gmail.com  Thu Nov 13 14:22:23 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Thu Nov 13 14:22:26 2008
Subject: [gdal-dev] raw x-y-z height map.
In-Reply-To: <491C79BD.7020904@pobox.com>
References: <817db2970811130756i3deab79dub86e7c5508bf0f62@mail.gmail.com>
	<491C79BD.7020904@pobox.com>
Message-ID: <9c2015090811131122q14d5617dm425e19f19654ef4e@mail.gmail.com>

There is a gmt utility named grd2xyz that you might be able to use for this:
http://gmt.soest.hawaii.edu/gmt/doc/html/grd2xyz.html
--


On Thu, Nov 13, 2008 at 11:02 AM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Eran Burstain wrote:
>
>> Hi.
>> I want to convert a height map (DTED or other format) to simple ASCII file
>> with X,Y,Z coordinates, supplemental data (datums) should be in separate
>> file (.vrt), Is there support in such a format ?
>>
>
> Eran,
>
> No, there is currently no direct support for such a format in GDAL.
>
> The gdal/swig/python/scripts/gdal2xyz.py script will produce such a file
> but it is not then readable with GDAL, nor can it be referenced from a .vrt
> file.
>
> I do frequently use the AAIGRID driver to produce easy to read ascii files,
> but it does not produce x/y values for each pixel.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081113/c2b214d5/attachment.html
From warmerdam at pobox.com  Thu Nov 13 15:18:22 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Nov 13 15:19:13 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 beta2 available
Message-ID: <491C8B8E.8060806@pobox.com>

Folks,

I have prepared a GDAL 1.6.0 beta2 cut last night.  It is available at:

   http://download.osgeo.org/gdal/gdal-1.6.0beta2.tar.gz
   http://download.osgeo.org/gdal/gdal160beta2.zip

There is preliminary (and somewhat verbose) notes on GDAL 1.6.0 at:

   http://trac.osgeo.org/gdal/wiki/Release/1.6.0-News

Please note significant tests in:

   http://trac.osgeo.org/gdal/wiki/TestMatrix160

Please file tickets for any new bugs found.

Developers are encouraged to be cautious about potentially disruptive
bug fixes from now till release.

It is intended that a 1.6.0 release candidate will be produced on
about the 26th of November.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From woodbri at swoodbridge.com  Thu Nov 13 15:24:04 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Thu Nov 13 15:23:33 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <DBEC881B4E22D1449F5FAC530E1ADD12CDA6B1@sea-srv-ms3.lizardtech.com>
References: <20081113114937.12FC2E0121C@lists.osgeo.org>
	<DBEC881B4E22D1449F5FAC530E1ADD12CDA6B1@sea-srv-ms3.lizardtech.com>
Message-ID: <491C8CE4.5050503@swoodbridge.com>

Michael P. Gerlek wrote:
> Stephen, Frank:
> 
> Yes, this is indeed a Kakadu error coming from underneath our SDK.  The
> error "feels" like the sort of thing that happens when one is requesting
> a bounding box that is outside of the legal bounds for the image at that
> magnification level: that is, perhaps the scene parameters being
> requested by GDAL, or as they are interpreted by the MrSID SDK, are
> causing Kakadu to choke.
> 
> If you can figure out what the scene parameters being passed into the
> MrSID SDK are, we could then call the SDK directly using the mrsiddecode
> command line tool and see what happens.
> 
> -mpg & the gang

Frank,

If someone can generate a patch the prints this stuff out, I'll have our 
guys build a version with the patch and I'll run it against one of the 
cases that fails.

There wouldn't happen to be a hidden debug option that might already 
print this out?

Thank you Michael for any assistance from your end also.

-Steve
From jukka.rahkonen at mmmtike.fi  Thu Nov 13 16:48:18 2008
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Nov 13 16:48:33 2008
Subject: [gdal-dev] Re: Gdal Bug?   was: Re: JP2MRSID Issues
References: <491866CC.8020101@swoodbridge.com>
	<49190F31.8090705@swoodbridge.com>
	<491B4697.6070105@swoodbridge.com> <491B975C.6060601@pobox.com>
	<491BBF3F.4080508@swoodbridge.com>
Message-ID: <loom.20081113T214111-96@post.gmane.org>

Stephen Woodbridge <woodbri <at> swoodbridge.com> writes:


> > PPS.  I don't understand your point where you seem to suggest that 
> > converting
> > to tiff first is slower than other mechanisms.  Are you suggesting it takes
> > 2-3 hours to convert a 500MB jpeg2000 image to GeoTIFF?  Perhaps you need
> > to up your GDAL block cache size?
> 
> Yes, this is exactly my problem it is taking 2-3 hours to run:
> 
> GDAL_SKIP=JPEG2000 gdal_translate my.jp2 -b 1 -b 2 -b 3 my.tif
> 

Hi, 

There is absolutely something basically wrong.  For that little files conversion
to GeoTIFF should take perhaps 5 minutes.  Try skipping more drivers and see how
Kakadu driver performs.  If you want to know how fast it can be, download Kakadu
win32 executables from www.kakadusoftware.com and measure how long it takes to
expand your images to GeoTIFFs with kdu_expand.  

From smm at rinconres.com  Thu Nov 13 18:15:40 2008
From: smm at rinconres.com (Sarah Mulholland)
Date: Thu Nov 13 18:13:49 2008
Subject: [gdal-dev] nitf xbands supported?
Message-ID: <DAF3E4A4518B6C41AE64C13CD76756A3160AE424@bexchmb2.rinconres.com>

In looking at the NITF 2.1 spec, I notice that the number of bands (NBANDS) in an image is by default represented by an ascii charactacter '0' to '9'.  There's an XBANDS field that you can use for images with more bands when there are multispectral bands in excess of 9.

I notice that when I call "driver.Create" with more than 9 bands, python seg faults when I call GetRasterBand for the first band.  Would I be correct in assuming that gdal doesn't support the XBANDS feature in the NITF?

Thanks,

Sarah
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081113/39d2f083/attachment.html
From sfkeller at gmail.com  Thu Nov 13 18:29:17 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Thu Nov 13 18:29:19 2008
Subject: [gdal-dev] OGR WFS driver
In-Reply-To: <491C673F.2010704@pobox.com>
References: <491C5E94.60105@archivideo.com> <491C673F.2010704@pobox.com>
Message-ID: <25bc040b0811131529l39a9e667x1eead69e3c0fd076@mail.gmail.com>

Hi Johan,

Nice proposal!

2008/11/13 Frank Warmerdam <warmerdam@pobox.com>:
...
> I'm also curious what you do for parsing the GML.  Do you process it through
> the existing OGR GML driver?

WFS mandates GML but allows others.
So, if yes, would it be difficult to parametrize the response file format?
And I'm also curious how and where you manage metadata needed by
getcapabilities?

-- Stefan
From warmerdam at pobox.com  Thu Nov 13 19:53:21 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Nov 13 19:53:46 2008
Subject: [gdal-dev] nitf xbands supported?
In-Reply-To: <DAF3E4A4518B6C41AE64C13CD76756A3160AE424@bexchmb2.rinconres.com>
References: <DAF3E4A4518B6C41AE64C13CD76756A3160AE424@bexchmb2.rinconres.com>
Message-ID: <491CCC01.7010005@pobox.com>

Sarah Mulholland wrote:
> In looking at the NITF 2.1 spec, I notice that the number of bands 
> (NBANDS) in an image is by default represented by an ascii charactacter 
> ?0? to ?9?.  There?s an XBANDS field that you can use for images with 
> more bands when there are multispectral bands in excess of 9. 
> 
>  
> 
> I notice that when I call ?driver.Create? with more than 9 bands, python 
> seg faults when I call GetRasterBand for the first band.  Would I be 
> correct in assuming that gdal doesn?t support the XBANDS feature in the 
> NITF?

Sarah,

That would appear to be the case.  I encourage you to file a ticket
on the issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Nov 13 20:30:37 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Nov 13 20:31:05 2008
Subject: [gdal-dev] NITF TRE support
In-Reply-To: <70A19B90-E0F0-4377-9F13-60E11A5FEC3A@progeny.net>
References: <70A19B90-E0F0-4377-9F13-60E11A5FEC3A@progeny.net>
Message-ID: <491CD4BD.9010908@pobox.com>

Kurt Landrus wrote:
> 
> Ok, I was looking through nithfile.c,  am I correct in understanding 
> that the only TRE supported for saving is BLOCKA, and that each 
> additional TRE needs to be handled
> individually?
> 
> I need to add support for the following TREs.  But I don't really need 
> to add new SDE headers, but preserve the original values as read
> using GDALGetMetadataItem.
> 
> SENSRA
> AIMIDB
> ACFTB
> 
> Is there an easy way to save back an TRE that was read using GDAL (/0 
> escaped string)
> or should I pull out all the fields from the string, and then reassemble 
> them in a function as is done for BLOCKA?

Kurt,

The GDAL trunk code (ie. 1.6 beta2) does include generic support for
writing *image* TREs.  Each TRE needs to be in the creation options
list as an item with TRE=<trename>=<content of tre> and the content must be
escaped using the BackslashQuotable scheme.

This is exactly the same format the TREs are read into the TRE
metadata domain.

Currently there is no support for writing file TREs.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From rigal at rapideye.de  Fri Nov 14 04:21:43 2008
From: rigal at rapideye.de (Matthieu Rigal)
Date: Fri Nov 14 04:21:55 2008
Subject: [gdal-dev] Re: GDAL encounters problem with very small files
In-Reply-To: <491C602D.1050405@pobox.com>
References: <20081113114937.2807FE0121D@lists.osgeo.org>
	<200811131802.17798.rigal@rapideye.de> <491C602D.1050405@pobox.com>
Message-ID: <200811141021.44087.rigal@rapideye.de>

Hi Frank,

Thanks for your response.
I made the error of mixing one gdal_utility question and a Python-GDAL binding 
question.

The problem I am encountering with gdal_translate and gdalinfo with these very 
little files only happens when I am working on very small images. Else, it is 
working well.
And I use these utilities from the shell, so it should have nothing to do with 
Python.
But as I told you, I have only the version 1.4.2 installed here...

On the other hand I have problems with the Python piece of code I have copied, 
so I just wanted to know if I forgot something in these simple data copying 
code. I will look for that, thanks.

So for the first problem, I will try it again  on other configurations, with 
GDAL 1.5.3 or 1.6 beta and maybe with different libtiff versions...
If you still have other ideas, tell me ;)

Best regards,
Matthieu

On Thursday 13 November 2008 18:13:17 you wrote:
> Matthieu Rigal wrote:
> > Hi all, hi Frank,
> >
> > I am encountering problem with gdal_translate and gdalinfo with very
> > little images. I have for example a 9*16 pixels image, georeferenced,
> > 16bits and 8bits, that I have tested in 2 formats : .pix PCIDSK and .tif
> > GTiff.
> >
> > And both times, I get errors :
> > gdal_translate: symbol lookup error: gdal_translate: undefined symbol:
> > GDALValidateCreationOptions
> > gdalinfo: symbol lookup error: gdalinfo: undefined symbol:
> > GDALGetFileList
> >
> > I have attached both tif files in 8bits and 16 bits, with the hope it
> > will help. Notice that these images can be open by software like QGis or
> > PCI Geomatica...
> >
> > If you have any ideas or if it is a known bug... let me know !
>
> Matthieu,
>
> I tried gdalinfo on the files and it worked fine.  Your Python looked fine.
>
> The error messages seem to indicate an inappropriate mixture of versions.
> Presumably recent Python bindings that are trying to pick up an older
> version of GDAL lacking some modern entry points.  Does the same
> configuration work fine with larger TIFF files?
>
> Best regards,

RapidEye AG
Molkenmarkt 30
14776 Brandenburg an der Havel
Germany

Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
Management Board/Vorstand: Wolfgang G. Biedermann
Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: Axel Schmalz
Commercial Register/Handelsregister Potsdam HRB 17 796
Tax Number/Steuernummer: 048/100/00053
VAT-Ident-Number/Ust.-ID: DE 199331235
DIN EN ISO 9001 certified

*************************************************************************
Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
E-Mail irrtuemlich erhalten haben, informieren Sie bitte sofort den
Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie
die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.

The information in this e-mail is intended for the named recipients
only. It may contain privileged and confidential information. If you
have received this communication in error, any use, copying or
dissemination of its contents is strictly prohibited. Please erase all
copies of the message along with any included attachments and notify
RapidEye AG or the sender immediately by telephone at the number
indicated on this page.
From rigal at rapideye.de  Fri Nov 14 05:58:45 2008
From: rigal at rapideye.de (Matthieu Rigal)
Date: Fri Nov 14 05:59:09 2008
Subject: [gdal-dev] Re: GDAL encounters problem with very small files . FIXED
Message-ID: <200811141158.45789.rigal@rapideye.de>

Hi Frank,

I could find out that this bug was due to an older version of GDAL, v1.4.2 and 
probably bindings to older version of libtiff and so.

On another configuration with GDAL 1.5.1, the problem is not any more 
encountered.

Best regards,
Matthieu

On Thursday 13 November 2008 18:13:17 you wrote:
> Matthieu Rigal wrote:
> > Hi all, hi Frank,
> >
> > I am encountering problem with gdal_translate and gdalinfo with very
> > little images. I have for example a 9*16 pixels image, georeferenced,
> > 16bits and 8bits, that I have tested in 2 formats : .pix PCIDSK and .tif
> > GTiff.
> >
> > And both times, I get errors :
> > gdal_translate: symbol lookup error: gdal_translate: undefined symbol:
> > GDALValidateCreationOptions
> > gdalinfo: symbol lookup error: gdalinfo: undefined symbol:
> > GDALGetFileList
> >
> > I have attached both tif files in 8bits and 16 bits, with the hope it
> > will help. Notice that these images can be open by software like QGis or
> > PCI Geomatica...
> >
> > If you have any ideas or if it is a known bug... let me know !
>
> Matthieu,
>
> I tried gdalinfo on the files and it worked fine.  Your Python looked fine.
>
> The error messages seem to indicate an inappropriate mixture of versions.
> Presumably recent Python bindings that are trying to pick up an older
> version of GDAL lacking some modern entry points.  Does the same
> configuration work fine with larger TIFF files?
>
> Best regards,

RapidEye AG
Molkenmarkt 30
14776 Brandenburg an der Havel
Germany

Head Office/Sitz der Gesellschaft: Brandenburg an der Havel
Management Board/Vorstand: Wolfgang G. Biedermann
Chairman of Supervisory Board/Vorsitzender des Aufsichtsrates: Axel Schmalz
Commercial Register/Handelsregister Potsdam HRB 17 796
Tax Number/Steuernummer: 048/100/00053
VAT-Ident-Number/Ust.-ID: DE 199331235
DIN EN ISO 9001 certified

*************************************************************************
Diese E-Mail enthaelt vertrauliche und/oder rechtlich geschuetzte
Informationen. Wenn Sie nicht der richtige Adressat sind oder diese
E-Mail irrtuemlich erhalten haben, informieren Sie bitte sofort den
Absender und vernichten Sie diese E-Mail. Das unerlaubte Kopieren sowie
die unbefugte Weitergabe dieser E-Mail ist nicht gestattet.

The information in this e-mail is intended for the named recipients
only. It may contain privileged and confidential information. If you
have received this communication in error, any use, copying or
dissemination of its contents is strictly prohibited. Please erase all
copies of the message along with any included attachments and notify
RapidEye AG or the sender immediately by telephone at the number
indicated on this page.
From gdal at archivideo.com  Fri Nov 14 11:13:07 2008
From: gdal at archivideo.com (Johan Nouvel)
Date: Fri Nov 14 11:13:11 2008
Subject: [gdal-dev] OGR WFS driver
In-Reply-To: <25bc040b0811131529l39a9e667x1eead69e3c0fd076@mail.gmail.com>
References: <491C5E94.60105@archivideo.com> <491C673F.2010704@pobox.com>
	<25bc040b0811131529l39a9e667x1eead69e3c0fd076@mail.gmail.com>
Message-ID: <491DA393.3040002@archivideo.com>

Hello,

Some informations about our driver :
- It uses existing OGR GML driver to parse WFS server message and knows only gml 1.0 answer, so you must specified 
answer in gml 1.0 in your requests to the server. It should not be difficult to add zipped gml, but for another format 
(such as shape) it will be a more complex thing to do.
- A specific request is done to get capabilities of a wfs server and a xerces parser is used to scan the answer
- curl is directly used, no call to cpl_http.h, sorry.
- It does not understand WFS style tag.
- In fact, it is used to do geometric request on layers and parse the answer to produce ogr data.

Next week, I will try to build it directly in ogr (for gdal 1.5.3 release) and look into cpl_http.h.

As for being a commiter, I'm sorry but I can't do that during my working time.

Regards,
Johan.


-- 
Johan Nouvel, R&D Engineer
http://www.archivideo.com
tel : +33 (0)2 99 86 30 20
ARCHIVIDEO, 40 rue des Veyettes, 35000 RENNES, FRANCE
From warmerdam at pobox.com  Fri Nov 14 11:52:05 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov 14 11:52:42 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <491C8CE4.5050503@swoodbridge.com>
References: <20081113114937.12FC2E0121C@lists.osgeo.org>
	<DBEC881B4E22D1449F5FAC530E1ADD12CDA6B1@sea-srv-ms3.lizardtech.com>
	<491C8CE4.5050503@swoodbridge.com>
Message-ID: <491DACB5.9070103@pobox.com>

Stephen Woodbridge wrote:
> Frank,
> 
> If someone can generate a patch the prints this stuff out, I'll have our 
> guys build a version with the patch and I'll run it against one of the 
> cases that fails.
> 
> There wouldn't happen to be a hidden debug option that might already 
> print this out?
> 
> Thank you Michael for any assistance from your end also.

Steve,

Skimming through mrsiddataset.cpp, it appears there are already quite extensive
debug statements.  Try enabling debug output when running the failed operation.

For GDAL commandline apps adding "--debug on" to the commandline (without the
quotes) should do the trick.  The debug output all goes to stderr.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From woodbri at swoodbridge.com  Fri Nov 14 11:55:41 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Nov 14 11:54:17 2008
Subject: [gdal-dev] Re: Gdal Bug?   was: Re: JP2MRSID Issues
In-Reply-To: <loom.20081113T214111-96@post.gmane.org>
References: <491866CC.8020101@swoodbridge.com>	<49190F31.8090705@swoodbridge.com>	<491B4697.6070105@swoodbridge.com>
	<491B975C.6060601@pobox.com>	<491BBF3F.4080508@swoodbridge.com>
	<loom.20081113T214111-96@post.gmane.org>
Message-ID: <491DAD8D.40706@swoodbridge.com>

Jukka Rahkonen wrote:
> Stephen Woodbridge <woodbri <at> swoodbridge.com> writes:
> 
> 
>>> PPS.  I don't understand your point where you seem to suggest that 
>>> converting
>>> to tiff first is slower than other mechanisms.  Are you suggesting it takes
>>> 2-3 hours to convert a 500MB jpeg2000 image to GeoTIFF?  Perhaps you need
>>> to up your GDAL block cache size?
>> Yes, this is exactly my problem it is taking 2-3 hours to run:
>>
>> GDAL_SKIP=JPEG2000 gdal_translate my.jp2 -b 1 -b 2 -b 3 my.tif
>>
> 
> Hi, 
> 
> There is absolutely something basically wrong.  For that little files conversion
> to GeoTIFF should take perhaps 5 minutes.  Try skipping more drivers and see how
> Kakadu driver performs.  If you want to know how fast it can be, download Kakadu
> win32 executables from www.kakadusoftware.com and measure how long it takes to
> expand your images to GeoTIFFs with kdu_expand.  

Hi Jukka,

Thank you for that pointer. I grabbed the linux version and kdu_expand 
is really fast!!! 2 mins if the source file is not cached and 55 sec if 
it is cached by the file system. But is only is expanding the first 
band, do you know how I can get it to expand bands 1,2,3 into the tiff 
as r,g,b? If I can do that then I could just use that as an interim step 
to expand the jp2 into a tif and then do the gdalwarp based on that.

-Steve
From wef1 at cec.wustl.edu  Fri Nov 14 12:06:55 2008
From: wef1 at cec.wustl.edu (edfialk)
Date: Fri Nov 14 12:06:57 2008
Subject: [Gdal-dev] problems warping a netcdf file
Message-ID: <20504569.post@talk.nabble.com>


Hello, I'm fairly new to reprojection and my experience with gdal is limited,
so I'll do my best to keep up.  I have tried searching through a number of
messages without finding anything quite like my problem.

I've been completely unsuccessful trying to reproject a netcdf file for some
time now and I'm becoming fairly desperate for some help.  I'm going for
changing "Lambert Conformal with a perfect sphere geoid with earth
radius=6370km centered at 40N, 97W with standard latitudes at 33N, 45N to
geographic lat, long (flat) projection."

First, a little gdal info on one particular subdataset for the netcdf file:
Warning 1: No UNIDATA NC_GLOBAL:Conventions attribute
Driver: netCDF/Network Common Data Format
Size is 148, 112
Coordinate System is `'
...
ad then coordinates, cdate, ctime, xcent, ycent, etc. etc.  I was wondering
if NC_Global or the coordinate system being `' might cause a problem.  

and then, running the command (going to mercator just to get a successful
reprojection, I'll deal with lat/lon later):
gdalwarp -s_srs "+proj=lcc" -t_srs "+proj=merc" NETCDF:"test_0910.nc":PM25
NETCDF:"test_out.nc":PM25

gives me:
Warning 1: No UNIDATA NC_GLOBAL:Conventions attribute
ERROR 1: Unable to compute a transformation between pixel/line
and georeferenced coordinates for NETCDF:test_0910.nc:PM25.
There is no affine transformation and no GCPs.

I'm fairly stuck.  If anyone has any ideas at all, I'd really appreciate it.
Thanks!
-Ed
-- 
View this message in context: http://www.nabble.com/problems-warping-a-netcdf-file-tp20504569p20504569.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From neteler at osgeo.org  Fri Nov 14 12:13:16 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Fri Nov 14 12:13:18 2008
Subject: [Gdal-dev] problems warping a netcdf file
In-Reply-To: <20504569.post@talk.nabble.com>
References: <20504569.post@talk.nabble.com>
Message-ID: <86782b610811140913k102195dcp9752fd335600cad4@mail.gmail.com>

On Fri, Nov 14, 2008 at 6:06 PM, edfialk <wef1@cec.wustl.edu> wrote:
>
> Hello, I'm fairly new to reprojection and my experience with gdal is limited,
> so I'll do my best to keep up.  I have tried searching through a number of
> messages without finding anything quite like my problem.
>
> I've been completely unsuccessful trying to reproject a netcdf file for some
> time now and I'm becoming fairly desperate for some help.  I'm going for
> changing "Lambert Conformal with a perfect sphere geoid with earth
> radius=6370km centered at 40N, 97W with standard latitudes at 33N, 45N to
> geographic lat, long (flat) projection."
>
> First, a little gdal info on one particular subdataset for the netcdf file:
> Warning 1: No UNIDATA NC_GLOBAL:Conventions attribute
> Driver: netCDF/Network Common Data Format
> Size is 148, 112
> Coordinate System is `'
> ...
> ad then coordinates, cdate, ctime, xcent, ycent, etc. etc.  I was wondering
> if NC_Global or the coordinate system being `' might cause a problem.

This has been recently fixed in SVN-trunk, but...

> and then, running the command (going to mercator just to get a successful
> reprojection, I'll deal with lat/lon later):

... gdalwarp still fails. See
 http://trac.osgeo.org/gdal/ticket/2584

Somewhere the coordinates get lost, see last two entries in the
trac report.

best,
Markus
From woodbri at swoodbridge.com  Fri Nov 14 13:40:09 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri Nov 14 13:38:48 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <491DACB5.9070103@pobox.com>
References: <20081113114937.12FC2E0121C@lists.osgeo.org>
	<DBEC881B4E22D1449F5FAC530E1ADD12CDA6B1@sea-srv-ms3.lizardtech.com>
	<491C8CE4.5050503@swoodbridge.com> <491DACB5.9070103@pobox.com>
Message-ID: <491DC609.2040304@swoodbridge.com>

Frank Warmerdam wrote:
> Stephen Woodbridge wrote:
>> Frank,
>>
>> If someone can generate a patch the prints this stuff out, I'll have 
>> our guys build a version with the patch and I'll run it against one of 
>> the cases that fails.
>>
>> There wouldn't happen to be a hidden debug option that might already 
>> print this out?
>>
>> Thank you Michael for any assistance from your end also.
> 
> Steve,
> 
> Skimming through mrsiddataset.cpp, it appears there are already quite 
> extensive
> debug statements.  Try enabling debug output when running the failed 
> operation.
> 
> For GDAL commandline apps adding "--debug on" to the commandline 
> (without the
> quotes) should do the trick.  The debug output all goes to stderr.
> 
> Best regards,

Frank,

Here is what I get from the debug output. I'm a little surprised it is 
trying to extract from zoom 1 instead of zoom 0. I didn't think I was 
scaling this but maybe some rounding is causing that.

Thanks,
   -Steve

[swoodbridge@booboo ~]$ cd tif-test/
[swoodbridge@booboo tif-test]$ GDAL_SKIP=JPEG2000 gdal_translate -of VRT 
/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2 -b 1 -b 2 
-b 3 tmp.vrt
Input file size is 36010, 49447
[swoodbridge@booboo tif-test]$ GDAL_SKIP=JPEG2000 gdalwarp -srcnodata 0 
-dstnodata 0 -s_srs +init=epsg:26915 -t_srs EPSG:4326 -te -93.5 43.8125 
-93.4375 43.875 -rb -wm 250 --config GDAL_ONE_BIG_READ ON -co 
"TILED=YES" tmp.vrt out.tif
Creating output file that is 6029P x 6029L.
Processing input file tmp.vrt.
gdalwarp: ../compressed/compressed.cpp:1724: bool 
kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' failed.
Aborted
[swoodbridge@booboo tif-test]$ GDAL_SKIP=JPEG2000 gdalwarp -srcnodata 0 
-dstnodata 0 -s_srs +init=epsg:26915 -t_srs EPSG:4326 -te -93.5 43.8125 
-93.4375 43.875 -rb -wm 250 --config GDAL_ONE_BIG_READ ON -co 
"TILED=YES" --debug on tmp.vrt out.tif
MrSID: Opened zoom level 1 with size 18005x24724.

MrSID: Opened zoom level 2 with size 9003x12362.

MrSID: Opened zoom level 3 with size 4502x6181.

MrSID: Opened zoom level 4 with size 2251x3091.

MrSID: Opened zoom level 5 with size 1126x1546.

MrSID: Opened zoom level 6 with size 563x773.

MrSID: Opened zoom level 7 with size 282x387.

MrSID: Opened zoom level 8 with size 141x194.

MrSID: Opened zoom level 9 with size 71x97.

MrSID: Opened zoom level 10 with size 36x49.

MrSID: Opened zoom level 0 with size 36010x49447.

MrSID: Opened image: width 36010, height 49447, bands 4
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux) 
succeeds as HFA.
GDAL: 
GDALClose(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux)
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2) 
succeeds as JP2MrSID.
GDAL: GDALOpen(tmp.vrt) succeeds as VRT.
OGRCT: Source: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
OGRCT: Target: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Source: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Target: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
GDAL: GDALClose(tmp.vrt)
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: 
GDALClose(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2)
GDAL: QuietDelete(out.tif) invoking Delete()
ERROR 4: `out.tif' not recognised as a supported file format.

GDAL: GDALDriver::Create(GTiff,out.tif,6029,6029,3,Byte,0x86d1bc0)
MrSID: Opened zoom level 1 with size 18005x24724.

MrSID: Opened zoom level 2 with size 9003x12362.

MrSID: Opened zoom level 3 with size 4502x6181.

MrSID: Opened zoom level 4 with size 2251x3091.

MrSID: Opened zoom level 5 with size 1126x1546.

MrSID: Opened zoom level 6 with size 563x773.

MrSID: Opened zoom level 7 with size 282x387.

MrSID: Opened zoom level 8 with size 141x194.

MrSID: Opened zoom level 9 with size 71x97.

MrSID: Opened zoom level 10 with size 36x49.

MrSID: Opened zoom level 0 with size 36010x49447.

MrSID: Opened image: width 36010, height 49447, bands 4
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux) 
succeeds as HFA.
GDAL: 
GDALClose(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux)
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2) 
succeeds as JP2MrSID.
GDAL: GDALOpen(tmp.vrt) succeeds as VRT.
OGRCT: Source: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
OGRCT: Target: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Source: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Target: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
MrSID: RasterIO() - using optimized dataset level IO.
MrSID: Dataset:IRasterIO(25432,42149 5066x6973 -> 5066x6973 -> 
5066x6973, zoom=1)
gdalwarp: ../compressed/compressed.cpp:1724: bool 
kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' failed.
Creating output file that is 6029P x 6029L.
Processing input file tmp.vrt.

From Jukka.Rahkonen at mmmtike.fi  Fri Nov 14 13:39:53 2008
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Fri Nov 14 13:52:30 2008
Subject: [gdal-dev] Re: Gdal Bug?   was: Re: JP2MRSID Issues
References: <491866CC.8020101@swoodbridge.com>	<49190F31.8090705@swoodbridge.com>	<491B4697.6070105@swoodbridge.com>
	<491B975C.6060601@pobox.com>	<491BBF3F.4080508@swoodbridge.com>
	<loom.20081113T214111-96@post.gmane.org>
	<491DAD8D.40706@swoodbridge.com>
Message-ID: <CC197224AC75CE4DB23F739B16891B86E34050@tikka.haapa.mmm.fi>

Stephen Woodbridge wrote:
 
Jukka Rahkonen wrote:

 
>> Hi, 
>> 
>> There is absolutely something basically wrong.  For that little files conversion
>> to GeoTIFF should take perhaps 5 minutes.  Try skipping more drivers and see how
>> Kakadu driver performs.  If you want to know how fast it can be, download Kakadu
>> win32 executables from www.kakadusoftware.com and measure how long it takes to
>> expand your images to GeoTIFFs with kdu_expand.  

> Hi Jukka,

> Thank you for that pointer. I grabbed the linux version and kdu_expand 
> is really fast!!! 2 mins if the source file is not cached and 55 sec if 
> it is cached by the file system. But is only is expanding the first 
> band, do you know how I can get it to expand bands 1,2,3 into the tiff 
> as r,g,b? If I can do that then I could just use that as an interim step 
> to expand the jp2 into a tif and then do the gdalwarp based on that.

Hi,

Kakadu executables are demonstration programs showing some examples about what can be done with Kakadu SDK. They are working and effective programs but not user friendly and not even meant to be such. Another problem is that jpeg2000 is not extremely easy to understand. At least I consider it complicated. Have a try with reading what you get by giving kdu_compress -usage, or kdu_expand -usage, or by reading the usage_examples.txt file that you probably have now :)

Without knowing how your jpeg2000 original is made it is hard to say how you could take out the three channels you want with kdu_expand.  This might do it channel by channel, but you would need to construct three individual files together to make a colour image:
c:\kakadu60\kdu_expand -raw_components -skip_components 0 -i input.jp2 -o red.tif
c:\kakadu60\kdu_expand -raw_components -skip_components 1 -i input.jp2 -o green.tif
c:\kakadu60\kdu_expand -raw_components -skip_components 2 -i input.jp2 -o blue.tif

But this is gdal-dev mailing list (Kakadu users Yahoo group exists but it is rather quit) and I can say that I have used gdal for converting jpeg2000 images to other formats a lot and for me it has worked fine. Our images are mostly 3-channel aerial photos which are easier to handle than yours 4-channel images, but also 7-band Landsat mosaics. You should be able to do fine with gdal.

If you can show me a place where I could download one of your images I could have a try with it some day.

-Jukka Rahkonen-
From warmerdam at pobox.com  Fri Nov 14 14:07:52 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov 14 14:08:31 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <491DC609.2040304@swoodbridge.com>
References: <20081113114937.12FC2E0121C@lists.osgeo.org>
	<DBEC881B4E22D1449F5FAC530E1ADD12CDA6B1@sea-srv-ms3.lizardtech.com>
	<491C8CE4.5050503@swoodbridge.com> <491DACB5.9070103@pobox.com>
	<491DC609.2040304@swoodbridge.com>
Message-ID: <491DCC88.2040100@pobox.com>

Stephen Woodbridge wrote:
> Frank,
> 
> Here is what I get from the debug output. I'm a little surprised it is 
> trying to extract from zoom 1 instead of zoom 0. I didn't think I was 
> scaling this but maybe some rounding is causing that.
...
> GDAL: GDALDriver::Create(GTiff,out.tif,6029,6029,3,Byte,0x86d1bc0)
> MrSID: Opened zoom level 1 with size 18005x24724.
> 
> MrSID: Opened zoom level 2 with size 9003x12362.
...
> MrSID: Opened zoom level 0 with size 36010x49447.
> 
> MrSID: Opened image: width 36010, height 49447, bands 4

> MrSID: RasterIO() - using optimized dataset level IO.
> MrSID: Dataset:IRasterIO(25432,42149 5066x6973 -> 5066x6973 -> 
> 5066x6973, zoom=1)
> gdalwarp: ../compressed/compressed.cpp:1724: bool 
> kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' 
> failed.

Steve,

I think the zoom level is a red herring.  I believe the zoom=1 is reporting
the zoom level (1:1) in lizardtech terms, and is not directly related to
the earlier reporting of "zoom level 1" which is the 2:1 down sampled layer.

Looking in the code in gdal/frmts/mrsid/mrsiddataset.cpp near this case I see:

     int sceneWidth  = (int)(nXSize * maxWidth / (double)maxWidthAtL0 + 0.99);
     int sceneHeight = (int)(nYSize * maxHeight / (double)maxHeightAtL0 + 0.99);

In this case I believe there might sometimes be a problem with the calculation
of nYSize * maxHeight being done with 32bit integers.  Could you possibly try
changing these two lines to look like:

     int sceneWidth  =
         (int)((nXSize * (GIntBig)maxWidth ) / (double)maxWidthAtL0  + 0.99);
     int sceneHeight =
         (int)((nYSize * (GIntBit)maxHeight) / (double)maxHeightAtL0 + 0.99);

and see if that helps?   If so, I'll get this into 1.6 and 1.5 as a priority
fix.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From garrard.chris at gmail.com  Fri Nov 14 14:13:18 2008
From: garrard.chris at gmail.com (Chris Garrard)
Date: Fri Nov 14 14:13:20 2008
Subject: [gdal-dev] OBus error when writing GeoTiffs
Message-ID: <92022f530811141113i1f59283ane6cd5ecb1271ec4@mail.gmail.com>

Hi,

I've compiled GDAL 1.5.3 on Solaris 10, using internal support for tiff and
gtiff.  When I try to create a new GTiff using gdal_translate, it fails with
"OBus Error".  That's all the information I get.

The problem is only with writing GTiffs, not reading them.  I can convert a
tiff to another format, get information about them with gdalinfo, and am
using them with MapServer built with GDAL support.  I can write to other
formats without a problem.

Any suggestions would be appreciated.

Thanks,
Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081114/906712d4/attachment.html
From jluis at ualg.pt  Fri Nov 14 13:51:23 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri Nov 14 14:23:41 2008
Subject: [Gdal-dev] problems warping a netcdf file
In-Reply-To: <20504569.post@talk.nabble.com>
References: <20504569.post@talk.nabble.com>
Message-ID: <491DC8AB.4090307@ualg.pt>

edfialk wrote:
> Hello, I'm fairly new to reprojection and my experience with gdal is limited,
> so I'll do my best to keep up.  I have tried searching through a number of
> messages without finding anything quite like my problem.
> 
> I've been completely unsuccessful trying to reproject a netcdf file for some
> time now and I'm becoming fairly desperate for some help.  I'm going for
> changing "Lambert Conformal with a perfect sphere geoid with earth
> radius=6370km centered at 40N, 97W with standard latitudes at 33N, 45N to
> geographic lat, long (flat) projection."
> 
> First, a little gdal info on one particular subdataset for the netcdf file:
> Warning 1: No UNIDATA NC_GLOBAL:Conventions attribute
> Driver: netCDF/Network Common Data Format
> Size is 148, 112
> Coordinate System is `'
> ...
> ad then coordinates, cdate, ctime, xcent, ycent, etc. etc.  I was wondering
> if NC_Global or the coordinate system being `' might cause a problem.  
> 
> and then, running the command (going to mercator just to get a successful
> reprojection, I'll deal with lat/lon later):
> gdalwarp -s_srs "+proj=lcc" -t_srs "+proj=merc" NETCDF:"test_0910.nc":PM25
> NETCDF:"test_out.nc":PM25
> 
> gives me:
> Warning 1: No UNIDATA NC_GLOBAL:Conventions attribute
> ERROR 1: Unable to compute a transformation between pixel/line
> and georeferenced coordinates for NETCDF:test_0910.nc:PM25.
> There is no affine transformation and no GCPs.

You can try the GMT program grdproject but I warn you already that it might not be obvious.
Also you can try my front end to grdproject in Mirone. It should be easier but again there will
probably be fine details that one need to adjust.

Joaquim Luis
From warmerdam at pobox.com  Fri Nov 14 14:26:24 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov 14 14:26:56 2008
Subject: [gdal-dev] OBus error when writing GeoTiffs
In-Reply-To: <92022f530811141113i1f59283ane6cd5ecb1271ec4@mail.gmail.com>
References: <92022f530811141113i1f59283ane6cd5ecb1271ec4@mail.gmail.com>
Message-ID: <491DD0E0.7090409@pobox.com>

Chris Garrard wrote:
> Hi,
> 
> I've compiled GDAL 1.5.3 on Solaris 10, using internal support for tiff 
> and gtiff.  When I try to create a new GTiff using gdal_translate, it 
> fails with "OBus Error".  That's all the information I get.
> 
> The problem is only with writing GTiffs, not reading them.  I can 
> convert a tiff to another format, get information about them with 
> gdalinfo, and am using them with MapServer built with GDAL support.  I 
> can write to other formats without a problem.

Chris,

Any chance of running things in gdb or dbx and getting a traceback?

I assume this is Solaris on Sparc?  Often problems on this architecture
are byte order or "double alignment" issues.

Is this a 32bit or 64 bit build?  Are you using the GNU or Sun tool chains?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mpg at lizardtech.com  Fri Nov 14 14:43:44 2008
From: mpg at lizardtech.com (Michael P. Gerlek)
Date: Fri Nov 14 14:44:47 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <20081114192340.745DFE01445@lists.osgeo.org>
References: <20081114192340.745DFE01445@lists.osgeo.org>
Message-ID: <C55473998E248B4DAEC5342D698DFE8508C4307A@sea-srv-mail.lizardtech.com>

> int sceneWidth  = (int)(nXSize * maxWidth / (double)maxWidthAtL0 + 0.99);
> int sceneHeight = (int)(nYSize * maxHeight / (double)maxHeightAtL0 + 0.99);

Ouch, you shouldn't be doing rounding like that.  Use the getDimsAtMag() function to get the exact width/height you need and all will be well.

-mpg

From even.rouault at mines-paris.org  Fri Nov 14 15:25:20 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov 14 15:25:40 2008
Subject: [gdal-dev] OBus error when writing GeoTiffs
In-Reply-To: <491DD0E0.7090409@pobox.com>
References: <92022f530811141113i1f59283ane6cd5ecb1271ec4@mail.gmail.com>
	<491DD0E0.7090409@pobox.com>
Message-ID: <200811142125.20913.even.rouault@mines-paris.org>

Chris,

I'd bet too that you are hitting a problem with unaligned access on Sparc 
architecture when dereferencing some pointers that is present in the 
TIFFWriteDirectorySec function of the internal libtiff in GDAL 1.5.X

(I don't think that the compiler used would make any difference.)

This problem was reported and fixed as 
http://bugzilla.maptools.org/show_bug.cgi?id=1892

Current internal libtiff in GDAL 1.6.0beta has the above fix and should 
hopefully work. 

Le Friday 14 November 2008 20:26:24 Frank Warmerdam, vous avez ?crit?:
> Chris Garrard wrote:
> > Hi,
> >
> > I've compiled GDAL 1.5.3 on Solaris 10, using internal support for tiff
> > and gtiff.  When I try to create a new GTiff using gdal_translate, it
> > fails with "OBus Error".  That's all the information I get.
> >
> > The problem is only with writing GTiffs, not reading them.  I can
> > convert a tiff to another format, get information about them with
> > gdalinfo, and am using them with MapServer built with GDAL support.  I
> > can write to other formats without a problem.
>
> Chris,
>
> Any chance of running things in gdb or dbx and getting a traceback?
>
> I assume this is Solaris on Sparc?  Often problems on this architecture
> are byte order or "double alignment" issues.
>
> Is this a 32bit or 64 bit build?  Are you using the GNU or Sun tool chains?
>
> Best regards,


From gaffigan at sfos.uaf.edu  Fri Nov 14 16:52:21 2008
From: gaffigan at sfos.uaf.edu (Steve Gaffigan)
Date: Fri Nov 14 17:03:51 2008
Subject: [Gdal-dev] problems warping a netcdf file
In-Reply-To: <20504569.post@talk.nabble.com>
References: <20504569.post@talk.nabble.com>
Message-ID: <491DF315.9000102@sfos.uaf.edu>

Ed,

Looking at your gdalwarp call, it seems that you've omitted the 
projection parameters.  Based on your description of the projection, I 
would expect a gdalwarp call such as the following:

gdalwarp -s_srs "+proj=lcc +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97 
+a=6370000 +b=6370000 +x_0=0 +y_0=0" -t_srs "+proj=longlat" 
NETCDF:"test_0910.nc":PM25 test_out.nc

The real problem, however, is related to the GeoTransform of your source 
dataset.  Though you didn't show the full gdalinfo output, based on your 
description of the dataset I expect gdalinfo shows the following under 
"Corner Coordinates":

Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  112.0)
Upper Right (  148.0,    0.0)
Lower Right (  148.0,  112.0)
Center      (  74.0,  56.0)

If this is the case, then it indicates that you'll need to additionally 
provide gdalwarp with the GeoTransform of your dataset, as the above 
shows that gdal doesn't know anything more about your grid than 
column/row (e.g. pixel/line) index values.  There are a number of ways 
to specify both projection and geotransform in the netcdf file itself, 
but maybe the easiest thing at this point would be to create, in the 
directory containing your file, a VRT definition file containing the 
following:

  <VRTDataset rasterXSize="148" rasterYSize="112">
   <SRS>+proj=lcc +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97 +a=6370000 
+b=6370000</SRS>
   <GeoTransform>X0, DX, 0.0, Y0, 0.0, DY</GeoTransform>
   <VRTRasterBand>
     <SimpleSource>
       <SourceFilename 
relativeToVRT="1">NETCDF:test_0910.nc:PM25</SourceFilename>
     </SimpleSource>
   </VRTRasterBand>
</VRTDataset>

In the GeoTransform tag, you'll need to replace X0,DX,Y0,DY with the 
correct values for your dataset.  Sorry if I'm telling you what you 
already know, but X0 and Y0 are the upper left (line=0,column=0) easting 
and northing coordinates of your grid, respectively.  dx and dy are the 
spacings between columns and lines, respectively.  All these parameters 
are in units of meters relative to the native projection of your 
dataset.  You might find these values in file or source metadata. 
Otherwise, if you have the latitude and longitude grids for your source 
dataset, you can calculate the required parameters using known 
projection transformation equations.  There are a number of ways to do 
this, but if you have the proj4 library on your system you can do it on 
the command line as follows:

proj +proj=lcc +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97 +a=6370000 
+b=6370000 <<EOF
LON_0_0 LAT_0_0
LON_ny_nx LAT_ny_nx
EOF

Where you'll need to replace these LON,LAT values with the relevant 
upper left (0,0) and lower right (ny,nx) values.  The output will be two 
lines showing easting,northing values for the corners:

X0 Y0
X1 Y1

 From this you can calculate your dx and dy:

dx=(X1-X0)/147
dy=(Y1-Y0)/111

Then the GeoTransform is:
x0-dx/2, dx, 0, y0-dy/2, dy

Finally, your new gdalwarp call would be:

gdalwarp -t_srs "+proj=longlat" test_0910.vrt test_out.nc

Steve


edfialk wrote:
> Hello, I'm fairly new to reprojection and my experience with gdal is limited,
> so I'll do my best to keep up.  I have tried searching through a number of
> messages without finding anything quite like my problem.
> 
> I've been completely unsuccessful trying to reproject a netcdf file for some
> time now and I'm becoming fairly desperate for some help.  I'm going for
> changing "Lambert Conformal with a perfect sphere geoid with earth
> radius=6370km centered at 40N, 97W with standard latitudes at 33N, 45N to
> geographic lat, long (flat) projection."
> 
> First, a little gdal info on one particular subdataset for the netcdf file:
> Warning 1: No UNIDATA NC_GLOBAL:Conventions attribute
> Driver: netCDF/Network Common Data Format
> Size is 148, 112
> Coordinate System is `'
> ...
> ad then coordinates, cdate, ctime, xcent, ycent, etc. etc.  I was wondering
> if NC_Global or the coordinate system being `' might cause a problem.  
> 
> and then, running the command (going to mercator just to get a successful
> reprojection, I'll deal with lat/lon later):
> gdalwarp -s_srs "+proj=lcc" -t_srs "+proj=merc" NETCDF:"test_0910.nc":PM25
> NETCDF:"test_out.nc":PM25
> 
> gives me:
> Warning 1: No UNIDATA NC_GLOBAL:Conventions attribute
> ERROR 1: Unable to compute a transformation between pixel/line
> and georeferenced coordinates for NETCDF:test_0910.nc:PM25.
> There is no affine transformation and no GCPs.
> 
> I'm fairly stuck.  If anyone has any ideas at all, I'd really appreciate it.
> Thanks!
> -Ed
From arb at sat.dundee.ac.uk  Fri Nov 14 18:19:14 2008
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Fri Nov 14 18:19:20 2008
Subject: [gdal-dev] gdal_rasterize usage problems
In-Reply-To: <f4339510811121136p7a97f819nef680ee71f1fe802@mail.gmail.com>
References: <op.uke3kqipqw3wu1@titan>
	<f4339510811121136p7a97f819nef680ee71f1fe802@mail.gmail.com>
Message-ID: <op.ukmtqcv5qw3wu1@titan>

Thanks for the help everyone, I'll summarise when I get it all working ;-)

Jamie Adams <jaadfoo@gmail.com> wrote:
> 
> Are your files in the same projection?  I know gshhs is projected in wgs84
> by default, and I see your raster is in British National Grid.

To what extent do they need to be in the same projection?  Isn't a change
of datum sufficient?

Firstly, is gdal_rasterize not capable of performing the change of SRS
internally itself?  That would save having to use ogr2ogr to write a new
vector file for every image.

Secondly, how closely do the vector and raster SRS need to match?  Surely
as long as both are WGS84 (for example) that should suffice?  But when I
try to rasterise a WGS84 vector onto a WGS84 Mercator raster it complains
and doesn't work.

Thirdly, when I "reproject" the vector to Mercator first and then rasterize
it does work, to an extent, but it smears random extra vectors across the
raster :-(  It does this for both gshhs_land and v0_landmass so I don't
think the vector itself is the problem.

Andrew

From randre at gmail.com  Fri Nov 14 18:19:24 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Fri Nov 14 18:19:27 2008
Subject: [gdal-dev] Datum grid shift files in FWTools
Message-ID: <9c2015090811141519r2abc2dc3k3c3f5bfedabd45ee@mail.gmail.com>

Is it possible to install the proj-datumgrid-1.4 files in FWTools?

Thanks,

Roger
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081114/20995598/attachment.html
From jaadfoo at gmail.com  Fri Nov 14 18:49:59 2008
From: jaadfoo at gmail.com (Jamie Adams)
Date: Fri Nov 14 18:50:02 2008
Subject: [gdal-dev] gdal_rasterize usage problems
In-Reply-To: <op.ukmtqcv5qw3wu1@titan>
References: <op.uke3kqipqw3wu1@titan>
	<f4339510811121136p7a97f819nef680ee71f1fe802@mail.gmail.com>
	<op.ukmtqcv5qw3wu1@titan>
Message-ID: <f4339510811141549x7c7450f2gad3ced80a988dc7@mail.gmail.com>

The datum change isn't sufficient, as they are using different coordinate
systems.  They actually have to have the same SRS, otherwise gdal_rasterize
will see 2 very different ranges of coordinates (meter vs latlong).

PROJCS["OSGB 1936 / British National Grid",
    GEOGCS["OSGB 1936",
        DATUM["OSGB_1936",
            SPHEROID["Airy 1830",6377563.396,299.3249646,
                AUTHORITY["EPSG","7001"]],
            AUTHORITY["EPSG","6277"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4277"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",49],
    PARAMETER["central_meridian",-2],
    PARAMETER["scale_factor",0.9996012717],
    PARAMETER["false_easting",400000],
    PARAMETER["false_northing",-100000],
    AUTHORITY["EPSG","27700"]]

vs.

GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.01745329251994328,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"]]

As far as the reprojection goes, are you getting errors in the output vector
or only after rasterization?


On Fri, Nov 14, 2008 at 3:19 PM, Andrew Brooks <arb@sat.dundee.ac.uk> wrote:

> Thanks for the help everyone, I'll summarise when I get it all working ;-)
>
> Jamie Adams <jaadfoo@gmail.com> wrote:
> >
> > Are your files in the same projection?  I know gshhs is projected in
> wgs84
> > by default, and I see your raster is in British National Grid.
>
> To what extent do they need to be in the same projection?  Isn't a change
> of datum sufficient?
>
> Firstly, is gdal_rasterize not capable of performing the change of SRS
> internally itself?  That would save having to use ogr2ogr to write a new
> vector file for every image.
>
> Secondly, how closely do the vector and raster SRS need to match?  Surely
> as long as both are WGS84 (for example) that should suffice?  But when I
> try to rasterise a WGS84 vector onto a WGS84 Mercator raster it complains
> and doesn't work.
>
> Thirdly, when I "reproject" the vector to Mercator first and then rasterize
> it does work, to an extent, but it smears random extra vectors across the
> raster :-(  It does this for both gshhs_land and v0_landmass so I don't
> think the vector itself is the problem.
>
> Andrew
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081114/5a30a03c/attachment-0001.html
From garrard.chris at gmail.com  Fri Nov 14 19:13:13 2008
From: garrard.chris at gmail.com (Chris Garrard)
Date: Fri Nov 14 19:13:16 2008
Subject: [gdal-dev] OBus error when writing GeoTiffs
In-Reply-To: <200811142125.20913.even.rouault@mines-paris.org>
References: <92022f530811141113i1f59283ane6cd5ecb1271ec4@mail.gmail.com>
	<491DD0E0.7090409@pobox.com>
	<200811142125.20913.even.rouault@mines-paris.org>
Message-ID: <92022f530811141613w1b3e4e5ep383006b0faabbfe1@mail.gmail.com>

Even,

I compiled the beta and now it works.  Thanks!

For the record, I'm using the GNU tools.

Chris

On Fri, Nov 14, 2008 at 1:25 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Chris,
>
> I'd bet too that you are hitting a problem with unaligned access on Sparc
> architecture when dereferencing some pointers that is present in the
> TIFFWriteDirectorySec function of the internal libtiff in GDAL 1.5.X
>
> (I don't think that the compiler used would make any difference.)
>
> This problem was reported and fixed as
> http://bugzilla.maptools.org/show_bug.cgi?id=1892
>
> Current internal libtiff in GDAL 1.6.0beta has the above fix and should
> hopefully work.
>
> Le Friday 14 November 2008 20:26:24 Frank Warmerdam, vous avez ?crit :
> > Chris Garrard wrote:
> > > Hi,
> > >
> > > I've compiled GDAL 1.5.3 on Solaris 10, using internal support for tiff
> > > and gtiff.  When I try to create a new GTiff using gdal_translate, it
> > > fails with "OBus Error".  That's all the information I get.
> > >
> > > The problem is only with writing GTiffs, not reading them.  I can
> > > convert a tiff to another format, get information about them with
> > > gdalinfo, and am using them with MapServer built with GDAL support.  I
> > > can write to other formats without a problem.
> >
> > Chris,
> >
> > Any chance of running things in gdb or dbx and getting a traceback?
> >
> > I assume this is Solaris on Sparc?  Often problems on this architecture
> > are byte order or "double alignment" issues.
> >
> > Is this a 32bit or 64 bit build?  Are you using the GNU or Sun tool
> chains?
> >
> > Best regards,
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081114/a9f7cd63/attachment.html
From gregor at hostgis.com  Fri Nov 14 19:06:24 2008
From: gregor at hostgis.com (Gregor Mosheh)
Date: Fri Nov 14 19:14:17 2008
Subject: [gdal-dev] WMS-C ?
Message-ID: <491E1280.90307@hostgis.com>

What possibilities exist for WMS-C support in GDAL?

Specifically, we're looking for a mechanism to consume WMS-C via 
MapServer using PHP/MapScript.

Any ideas at all?

-- 
Gregor Mosheh / Greg Allensworth    BS, A+, Network+, Security+, Server+
System Administrator, Lead Programmer
HostGIS development & hosting services, http://www.HostGIS.com/

"Remember that no one cares if you can back up,
  only if you can restore." - AMANDA
From crschmidt at metacarta.com  Fri Nov 14 19:35:41 2008
From: crschmidt at metacarta.com (Christopher Schmidt)
Date: Fri Nov 14 19:35:43 2008
Subject: [gdal-dev] WMS-C ?
In-Reply-To: <491E1280.90307@hostgis.com>
References: <491E1280.90307@hostgis.com>
Message-ID: <20081115003541.GA23127@metacarta.com>

On Fri, Nov 14, 2008 at 04:06:24PM -0800, Gregor Mosheh wrote:
> What possibilities exist for WMS-C support in GDAL?
> 
> Specifically, we're looking for a mechanism to consume WMS-C via 
> MapServer using PHP/MapScript.
> 
> Any ideas at all?

The WMS driver documentation shows consuming a WMS-C service
(labs.metacarta.com/wms-c) in the documentation.

Regards,
-- 
Christopher Schmidt
MetaCarta
From even.rouault at mines-paris.org  Sat Nov 15 10:29:59 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Nov 15 10:30:04 2008
Subject: [gdal-dev] Re: Gdal Bug?   was: Re: JP2MRSID Issues
In-Reply-To: <CC197224AC75CE4DB23F739B16891B86E34050@tikka.haapa.mmm.fi>
References: <491866CC.8020101@swoodbridge.com> <491DAD8D.40706@swoodbridge.com>
	<CC197224AC75CE4DB23F739B16891B86E34050@tikka.haapa.mmm.fi>
Message-ID: <200811151630.00576.even.rouault@mines-paris.org>

A similar problems seems to have been reported in 
http://trac.osgeo.org/gdal/ticket/1231 

Le Friday 14 November 2008 19:39:53 Rahkonen Jukka, vous avez ?crit?:
> Stephen Woodbridge wrote:
>
> Jukka Rahkonen wrote:
> >> Hi,
> >>
> >> There is absolutely something basically wrong.  For that little files
> >> conversion to GeoTIFF should take perhaps 5 minutes.  Try skipping more
> >> drivers and see how Kakadu driver performs.  If you want to know how
> >> fast it can be, download Kakadu win32 executables from
> >> www.kakadusoftware.com and measure how long it takes to expand your
> >> images to GeoTIFFs with kdu_expand.
> >
> > Hi Jukka,
> >
> > Thank you for that pointer. I grabbed the linux version and kdu_expand
> > is really fast!!! 2 mins if the source file is not cached and 55 sec if
> > it is cached by the file system. But is only is expanding the first
> > band, do you know how I can get it to expand bands 1,2,3 into the tiff
> > as r,g,b? If I can do that then I could just use that as an interim step
> > to expand the jp2 into a tif and then do the gdalwarp based on that.
>
> Hi,
>
> Kakadu executables are demonstration programs showing some examples about
> what can be done with Kakadu SDK. They are working and effective programs
> but not user friendly and not even meant to be such. Another problem is
> that jpeg2000 is not extremely easy to understand. At least I consider it
> complicated. Have a try with reading what you get by giving kdu_compress
> -usage, or kdu_expand -usage, or by reading the usage_examples.txt file
> that you probably have now :)
>
> Without knowing how your jpeg2000 original is made it is hard to say how
> you could take out the three channels you want with kdu_expand.  This might
> do it channel by channel, but you would need to construct three individual
> files together to make a colour image: c:\kakadu60\kdu_expand
> -raw_components -skip_components 0 -i input.jp2 -o red.tif
> c:\kakadu60\kdu_expand -raw_components -skip_components 1 -i input.jp2 -o
> green.tif c:\kakadu60\kdu_expand -raw_components -skip_components 2 -i
> input.jp2 -o blue.tif
>
> But this is gdal-dev mailing list (Kakadu users Yahoo group exists but it
> is rather quit) and I can say that I have used gdal for converting jpeg2000
> images to other formats a lot and for me it has worked fine. Our images are
> mostly 3-channel aerial photos which are easier to handle than yours
> 4-channel images, but also 7-band Landsat mosaics. You should be able to do
> fine with gdal.
>
> If you can show me a place where I could download one of your images I
> could have a try with it some day.
>
> -Jukka Rahkonen-
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From woodbri at swoodbridge.com  Sun Nov 16 20:56:24 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sun Nov 16 20:55:36 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <491DCC88.2040100@pobox.com>
References: <20081113114937.12FC2E0121C@lists.osgeo.org>
	<DBEC881B4E22D1449F5FAC530E1ADD12CDA6B1@sea-srv-ms3.lizardtech.com>
	<491C8CE4.5050503@swoodbridge.com> <491DACB5.9070103@pobox.com>
	<491DC609.2040304@swoodbridge.com> <491DCC88.2040100@pobox.com>
Message-ID: <4920CF48.5010104@swoodbridge.com>

Frank Warmerdam wrote:
> Stephen Woodbridge wrote:
>> Frank,
>>
>> Here is what I get from the debug output. I'm a little surprised it is 
>> trying to extract from zoom 1 instead of zoom 0. I didn't think I was 
>> scaling this but maybe some rounding is causing that.
> ...
>> GDAL: GDALDriver::Create(GTiff,out.tif,6029,6029,3,Byte,0x86d1bc0)
>> MrSID: Opened zoom level 1 with size 18005x24724.
>>
>> MrSID: Opened zoom level 2 with size 9003x12362.
> ...
>> MrSID: Opened zoom level 0 with size 36010x49447.
>>
>> MrSID: Opened image: width 36010, height 49447, bands 4
> 
>> MrSID: RasterIO() - using optimized dataset level IO.
>> MrSID: Dataset:IRasterIO(25432,42149 5066x6973 -> 5066x6973 -> 
>> 5066x6973, zoom=1)
>> gdalwarp: ../compressed/compressed.cpp:1724: bool 
>> kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' 
>> failed.
> 
> Steve,
> 
> I think the zoom level is a red herring.  I believe the zoom=1 is reporting
> the zoom level (1:1) in lizardtech terms, and is not directly related to
> the earlier reporting of "zoom level 1" which is the 2:1 down sampled 
> layer.
> 
> Looking in the code in gdal/frmts/mrsid/mrsiddataset.cpp near this case 
> I see:
> 
>     int sceneWidth  = (int)(nXSize * maxWidth / (double)maxWidthAtL0 + 
> 0.99);
>     int sceneHeight = (int)(nYSize * maxHeight / (double)maxHeightAtL0 + 
> 0.99);
> 
> In this case I believe there might sometimes be a problem with the 
> calculation
> of nYSize * maxHeight being done with 32bit integers.  Could you 
> possibly try
> changing these two lines to look like:
> 
>     int sceneWidth  =
>         (int)((nXSize * (GIntBig)maxWidth ) / (double)maxWidthAtL0  + 
> 0.99);
>     int sceneHeight =
>         (int)((nYSize * (GIntBit)maxHeight) / (double)maxHeightAtL0 + 
> 0.99);
> 
> and see if that helps?   If so, I'll get this into 1.6 and 1.5 as a 
> priority
> fix.
> 
> Best regards,

Hi Frank,

Sorry no joy with the patch applied. Here are the results. I had them 
patch and set the prefix /usr/local/swoodbridge/ and then used the 
following script to make sure I pulled in the new executables and libraries.

-Steve

[swoodbridge@booboo tif-test]$ cat test-it
#
PATH=/usr/local/swoodbridge/bin:$PATH
LD_LIBRARY_PATH=/usr/local/swoodbridge/lib:$LD_LIBRARY_PATH

env

gdalinfo --version

ldd /usr/local/swoodbridge/bin/gdalwarp

rm out.tif

GDAL_SKIP=JPEG2000 /usr/local/swoodbridge/bin/gdalwarp -srcnodata 0 
-dstnodata 0 -s_srs +init=epsg:26915 -t_srs EPSG:4326 -te -93.5 43.8125 
-93.4375 43.875 -rb -wm 250 --config GDAL_ONE_BIG_READ ON -co 
"TILED=YES" --debug on tmp.vrt out.tif


[swoodbridge@booboo tif-test]$ ./test-it
HOSTNAME=booboo
SHELL=/bin/bash
TERM=xterm
HISTSIZE=1000
SSH_CLIENT=::ffff:192.168.100.8 33122 22
LIC_ECHO=echo -e
SSH_TTY=/dev/pts/1
USER=swoodbridge
LS_COLORS=no=00:fi=00:di=00;34:ln=00;36:pi=40;33:so=00;35:bd=40;33;01:cd=40;33;01:or=01;05;37;41:mi=01;05;37;41:ex=00;32:*.cmd=00;32:*.exe=00;32:*.com=00;32:*.btm=00;32:*.bat=00;32:*.sh=00;32:*.csh=00;32:*.tar=00;31:*.tgz=00;31:*.arj=00;31:*.taz=00;31:*.lzh=00;31:*.zip=00;31:*.z=00;31:*.Z=00;31:*.gz=00;31:*.bz2=00;31:*.bz=00;31:*.tz=00;31:*.rpm=00;31:*.cpio=00;31:*.jpg=00;35:*.gif=00;35:*.bmp=00;35:*.xbm=00;35:*.xpm=00;35:*.png=00;35:*.tif=00;35:
LD_LIBRARY_PATH=/usr/local/swoodbridge/lib:/opt/CA/SharedComponents/lib
PATH=/usr/local/swoodbridge/bin:/home/swoodbridge/bin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin
MAIL=/var/spool/mail/swoodbridge
PWD=/home/swoodbridge/tif-test
INPUTRC=/etc/inputrc
EDITOR=vi
LANG=en_US.UTF-8
HOME=/home/swoodbridge
SHLVL=2
LOGNAME=swoodbridge
SSH_CONNECTION=::ffff:192.168.100.8 33122 ::ffff:192.168.100.9 22
LESSOPEN=|/usr/bin/lesspipe.sh %s
CASHCOMP=/opt/CA/SharedComponents
CALIB=/opt/CA/SharedComponents/lib
G_BROKEN_FILENAMES=1
_=/bin/env
GDAL 1.5.3, released 2008/09/09
         libgdal.so.1 => /usr/local/swoodbridge/lib/libgdal.so.1 
(0x00111000)
         libgeos_c.so.1 => /usr/lib/libgeos_c.so.1 (0x00809000)
         libgeos.so.2 => /usr/lib/libgeos.so.2 (0x008bd000)
         libpthread.so.0 => /lib/tls/libpthread.so.0 (0x00a1b000)
         libjpeg.so.62 => /usr/lib/libjpeg.so.62 (0x00d0c000)
         libpq.so.4 => /usr/lib/libpq.so.4 (0x00816000)
         librt.so.1 => /lib/tls/librt.so.1 (0x00832000)
         libcurl.so.3 => /usr/lib/libcurl.so.3 (0x00846000)
         libidn.so.11 => /usr/lib/libidn.so.11 (0x00dab000)
         libssl.so.4 => /lib/libssl.so.4 (0x00bc3000)
         libcrypto.so.4 => /lib/libcrypto.so.4 (0x043d6000)
         libgssapi_krb5.so.2 => /usr/lib/libgssapi_krb5.so.2 (0x00b80000)
         libkrb5.so.3 => /usr/lib/libkrb5.so.3 (0x0436f000)
         libcom_err.so.2 => /lib/libcom_err.so.2 (0x00bf9000)
         libk5crypto.so.3 => /usr/lib/libk5crypto.so.3 (0x00ce9000)
         libresolv.so.2 => /lib/libresolv.so.2 (0x00a74000)
         libdl.so.2 => /lib/libdl.so.2 (0x009f0000)
         libz.so.1 => /usr/lib/libz.so.1 (0x00a2f000)
         libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0x00c03000)
         libm.so.6 => /lib/tls/libm.so.6 (0x009f6000)
         libgcc_s.so.1 => /lib/libgcc_s.so.1 (0x00cd0000)
         libc.so.6 => /lib/tls/libc.so.6 (0x00ddb000)
         /lib/ld-linux.so.2 (0x008a5000)
         libcrypt.so.1 => /lib/libcrypt.so.1 (0x00a41000)
         libnsl.so.1 => /lib/libnsl.so.1 (0x00b5f000)
MrSID: Opened zoom level 1 with size 18005x24724.

MrSID: Opened zoom level 2 with size 9003x12362.

MrSID: Opened zoom level 3 with size 4502x6181.

MrSID: Opened zoom level 4 with size 2251x3091.

MrSID: Opened zoom level 5 with size 1126x1546.

MrSID: Opened zoom level 6 with size 563x773.

MrSID: Opened zoom level 7 with size 282x387.

MrSID: Opened zoom level 8 with size 141x194.

MrSID: Opened zoom level 9 with size 71x97.

MrSID: Opened zoom level 10 with size 36x49.

MrSID: Opened zoom level 0 with size 36010x49447.

MrSID: Opened image: width 36010, height 49447, bands 4
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux) 
succeeds as HFA.
GDAL: 
GDALClose(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux)
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2) 
succeeds as JP2MrSID.
GDAL: GDALOpen(tmp.vrt) succeeds as VRT.
OGRCT: Source: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
OGRCT: Target: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Source: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Target: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
GDAL: GDALClose(tmp.vrt)
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: 
GDALClose(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2)
Creating output file that is 6029P x 6029L.
GDAL: QuietDelete(out.tif) invoking Delete()
ERROR 4: `out.tif' not recognised as a supported file format.

GDAL: GDALDriver::Create(GTiff,out.tif,6029,6029,3,Byte,0x80d9c30)
MrSID: Opened zoom level 1 with size 18005x24724.

MrSID: Opened zoom level 2 with size 9003x12362.

MrSID: Opened zoom level 3 with size 4502x6181.

MrSID: Opened zoom level 4 with size 2251x3091.

MrSID: Opened zoom level 5 with size 1126x1546.

MrSID: Opened zoom level 6 with size 563x773.

MrSID: Opened zoom level 7 with size 282x387.

MrSID: Opened zoom level 8 with size 141x194.

MrSID: Opened zoom level 9 with size 71x97.

MrSID: Opened zoom level 10 with size 36x49.

MrSID: Opened zoom level 0 with size 36010x49447.

MrSID: Opened image: width 36010, height 49447, bands 4
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux) 
succeeds as HFA.
GDAL: 
GDALClose(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux)
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2) 
succeeds as JP2MrSID.
GDAL: GDALOpen(tmp.vrt) succeeds as VRT.
Processing input file tmp.vrt.
OGRCT: Source: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
OGRCT: Target: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Source: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Target: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
MrSID: RasterIO() - using optimized dataset level IO.
MrSID: Dataset:IRasterIO(25432,42149 5066x6973 -> 5066x6973 -> 
5066x6973, zoom=1)
gdalwarp: ../compressed/compressed.cpp:1724: bool 
kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' failed.
./test-it: line 13: 19703 Aborted                 GDAL_SKIP=JPEG2000 
gdalwarp -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:26915 -t_srs 
EPSG:4326 -te -93.5 43.8125 -93.4375 43.875 -rb -wm 250 --config 
GDAL_ONE_BIG_READ ON -co "TILED=YES" --debug on tmp.vrt out.tif

From warmerdam at pobox.com  Mon Nov 17 12:17:05 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Nov 17 12:18:16 2008
Subject: [gdal-dev] gdal_rasterize usage problems
In-Reply-To: <op.ukmtqcv5qw3wu1@titan>
References: <op.uke3kqipqw3wu1@titan>
	<f4339510811121136p7a97f819nef680ee71f1fe802@mail.gmail.com>
	<op.ukmtqcv5qw3wu1@titan>
Message-ID: <4921A711.5060702@pobox.com>

Andrew Brooks wrote:
> Thanks for the help everyone, I'll summarise when I get it all working ;-)
> 
> Jamie Adams <jaadfoo@gmail.com> wrote:
>> Are your files in the same projection?  I know gshhs is projected in wgs84
>> by default, and I see your raster is in British National Grid.
> 
> To what extent do they need to be in the same projection?  Isn't a change
> of datum sufficient?
> 
> Firstly, is gdal_rasterize not capable of performing the change of SRS
> internally itself?  That would save having to use ogr2ogr to write a new
> vector file for every image.

Andrew,

While it could be made to do so, gdal_rasterize does not currently reproject
the vectors on the fly.

> Secondly, how closely do the vector and raster SRS need to match?  Surely
> as long as both are WGS84 (for example) that should suffice?  But when I
> try to rasterise a WGS84 vector onto a WGS84 Mercator raster it complains
> and doesn't work.
> 
> Thirdly, when I "reproject" the vector to Mercator first and then rasterize
> it does work, to an extent, but it smears random extra vectors across the
> raster :-(  It does this for both gshhs_land and v0_landmass so I don't
> think the vector itself is the problem.

I'd guess this represents a world wrapping problem but if you can demonstrate
the issue it might be appropriate to file a ticket.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From klandrus at progeny.net  Mon Nov 17 13:19:20 2008
From: klandrus at progeny.net (Kurt Landrus)
Date: Mon Nov 17 13:19:22 2008
Subject: [gdal-dev] NITF TRE support
In-Reply-To: <491CD4BD.9010908@pobox.com>
References: <70A19B90-E0F0-4377-9F13-60E11A5FEC3A@progeny.net>
	<491CD4BD.9010908@pobox.com>
Message-ID: <AC24B9C9-0DA1-46AC-AE63-0F28C032BC61@progeny.net>

Ok thanks for your reply. I downloaded the beta, and updated my code  
to use the options in the create fcn.
I am now getting an error from the driver on the create call, for the  
options.
I am creating the option with the TRE  in the same format as loaded   
using GDAL.

### saving TRE SENSRA = FSBS2    +35.000000-077.000000B+01200f      
+74.998+000.000+014.996+70.000+009.998010.0N0020.0f075.0+1020m
### treContents = TRE=SENSRA,FSBS2    +35.000000-077.000000B 
+01200f      
+74.998+000.000+014.996+70.000+009.998010.0N0020.0f075.0+1020m
ERROR 1: Could not parse creation options SENSRA,FSBS2     
+35.000000-077.000000B+01200f      
+74.998+000.000+014.996+70.000+009.998010.0N0020.0f075.0+1020m

$ gdalinfo  --version
GDAL 1.6.0beta2, released 2008/11/12

Here is the code snippet where this error occurred.

       if (saveOk) {
                 // save TRE segments to dataset.
                 char            *treValue = NULL, *treName = NULL,  
*treContents = NULL;
                 char            *tre = "TRE_SENSRA";
                 char            **options = NULL;

                 parasite = gimp_image_parasite_find (image_ID, tre);
                 if (parasite != NULL) {

                 treValue = (char *) g_strndup(gimp_parasite_data  
(parasite),
                                       gimp_parasite_data_size  
(parasite));
                         gimp_parasite_free (parasite);
                         treName = g_strdup(tre+4);
                         IFDBG printf( "### saving TRE %s = %s\n",  
treName, treValue);

                         treContents = g_strconcat(treName, ",",  
treValue, NULL);
                         options = CSLSetNameValue( options, "TRE",  
treContents );
                         IFDBG printf( "### treContents = %s\n",  
*options);
                 }

                 dataset = GDALCreate( driver, filename, width,  
height, channels,
                                                  GDT_Byte, options );
                 if( dataset == NULL ){
                 g_warning("NITFview error opening dataset\n");
                         saved = FALSE;
         }

Do you have any suggestions why it can't parse the options?

Thanks;

Kurt Landrus
Progeny Systems Corp.
klandrus@progeny.net
Office: 	703-368-6107 x424
Lab: 	703-368-6107 x520



On Nov 13, 2008, at 8:30 PM, Frank Warmerdam wrote:

> Kurt Landrus wrote:
>> Ok, I was looking through nithfile.c,  am I correct in  
>> understanding that the only TRE supported for saving is BLOCKA, and  
>> that each additional TRE needs to be handled
>> individually?
>> I need to add support for the following TREs.  But I don't really  
>> need to add new SDE headers, but preserve the original values as read
>> using GDALGetMetadataItem.
>> SENSRA
>> AIMIDB
>> ACFTB
>> Is there an easy way to save back an TRE that was read using GDAL (/ 
>> 0 escaped string)
>> or should I pull out all the fields from the string, and then  
>> reassemble them in a function as is done for BLOCKA?
>
> Kurt,
>
> The GDAL trunk code (ie. 1.6 beta2) does include generic support for
> writing *image* TREs.  Each TRE needs to be in the creation options
> list as an item with TRE=<trename>=<content of tre> and the content  
> must be
> escaped using the BackslashQuotable scheme.
>
> This is exactly the same format the TREs are read into the TRE
> metadata domain.
>
> Currently there is no support for writing file TREs.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
>

From mauricio.dev at gmail.com  Mon Nov 17 14:20:23 2008
From: mauricio.dev at gmail.com (=?ISO-8859-1?Q?Maur=EDcio_de_Paulo?=)
Date: Mon Nov 17 14:20:26 2008
Subject: [gdal-dev] Personal Geodatabase
Message-ID: <f0f9bf090811171120n441aae2cpd8d8fef1ccaa8e18@mail.gmail.com>

Hi everyone,
I've translated an ESRI Personal Geodatabase to shapefile using ogr2ogr on
linux using fwtools and wine.
The translation required not to use unixodbc so I've installed the package:

mdac25

through winetricks. I don't know about mdac25 licensing and even it's the
only requirement for the translation (because i've installed some packages
earlier), but it works with mdac25 and not with mdac28.

I hope this can help some people who are stuck with arcgis' data.

Regards,
Maur?cio de Paulo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081117/86febe4a/attachment.html
From rene at aufwaerts.info  Mon Nov 17 16:55:32 2008
From: rene at aufwaerts.info (rene@aufwaerts.info)
Date: Mon Nov 17 17:02:18 2008
Subject: [gdal-dev] cygwin Gdal with OCI Support
Message-ID: <20081117225532.yfm11fmuos0o8kw0@webmail.aufwaerts.info>

First I would like to say hello.

I hope to get your help with my problem.
I try to compile gdal 1.5.3 with oci support using cygwin.
My Oracle Database is a 10.2.0.3 so I use the header and libraries for  
this version. Newer Versions didn't fix my problem.

I created in /tmp/gdal-1.5.3/instantclient/sdk following folders:
lib
rdbms/demo
rdbms/public.

The lib-folder contains:

classes12.jar
genezi
libclntsh.a (created with ar -r libclntsh.so)
libclntsh.so -> libclntsh.so.10.1
libnnz10.so
libocci.so -> libocci.so.10.1
libociei.so
libocijdbc10.so
ojdbc14.jar

I run ./configure --with-oci=/tmp/gdal-1.5.3/instantclient/sdk and it  
doesn't find the library files. header files are ok.
Part of the log:

configure:24279: result: no
configure:24419: checking for Oracle OCI headers in  
/tmp/gdal-1.5.3/instantclient/sdk/rdbms/public
configure:24462: g++ -c -g -O2   
-I/tmp/gdal-1.5.3/instantclient/sdk/rdbms/public  
-I/tmp/gdal-1.5.3/instantclient/sdk/rdb
ms/demo conftest.cpp >&5
configure:24468: $? = 0
configure:24481: result: yes
configure:24506: checking for Oracle OCI libraries in  
/tmp/gdal-1.5.3/instantclient/sdk/lib
configure:24542: g++ -o conftest.exe -g -O2   
-I/tmp/gdal-1.5.3/instantclient/sdk/rdbms/public  
-I/tmp/gdal-1.5.3/instantclient/sdk/rdbms/demo   
-L/tmp/gdal-1.5.3/instantclient/sdk/lib -lclntsh conftest.cpp  
-L/usr/lib -lexpat -ljasper -lhdf5 -lgif -ljpeg -lgeotiff -ltiff -lpng  
-lpq -L/usr/lib -lpq -lz  -ldl  >&5
/cygdrive/d/DOKUME~1/MEIENB~1/LOKALE~1/Temp/cc40W1OS.o: In function `main':
/tmp/gdal-1.5.3/conftest.cpp:60: undefined reference to `_OCIEnvCreate'
/tmp/gdal-1.5.3/conftest.cpp:61: undefined reference to `_OCIHandleFree'
collect2: ld returned 1 exit status

I uploaded the complete config.log to
http://www.mesu-it.de/config.log

I did exactly the same thing on my Ubuntu installation and it worked.  
But Ubuntu and Cygwin are not compatible ;-)

Thanks for your help.
Hope to here from you soon. Msg me if you need more information.

Rene
From rchirgwin at ozemail.com.au  Mon Nov 17 17:13:29 2008
From: rchirgwin at ozemail.com.au (Richard Chirgwin)
Date: Mon Nov 17 17:14:33 2008
Subject: [gdal-dev] Compile with ECW: library error
Message-ID: <4921EC89.3010709@ozemail.com.au>

Hi,

I'm a Grass-GIS user with a problem in GDAL 1.5.2.

Folllowing the instructions here:
http://trac.osgeo.org/gdal/wiki/ECW

I added ECW support with the ER Mapper library.

The libecwj2-3.3 configure > make > make install reported no errors.

The GDAL configure using --with-ecw=/usr/local/lib went fine, and in the
"supported formats" output we have:
ECW support:               yes

Make and make install complete successfully.

However, when I try to run anything, a libNCSEcw.lib.so error happens:
gdalinfo --formats|grep ECW

gdalinfo: error while loading shared libraries: libNCSEcw.so.0: cannot
open shared object file: No such file or directory

libNCSEcw.so.0 exists in /usr/local/lib

The machine is on OpenSUSE 10.3.

What did I miss in the configuration?

Richard C
From zither at yeah.net  Mon Nov 17 21:45:30 2008
From: zither at yeah.net (zither)
Date: Mon Nov 17 22:16:10 2008
Subject: [gdal-dev] access of 16-bit GeoTiff image using GDAL
Message-ID: <20008348.306571226976330517.JavaMail.coremail@yeahapp6.yeah.net>

Hi all,


  I'm using GDAL to read some Geotiff files. 
But how I can get the information about little endian or big endian? 
Any method can support to get this ?


Thanks for your help!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081118/97fe259b/attachment.html
From warmerdam at pobox.com  Mon Nov 17 23:00:37 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Nov 17 23:00:55 2008
Subject: [gdal-dev] access of 16-bit GeoTiff image using GDAL
In-Reply-To: <20008348.306571226976330517.JavaMail.coremail@yeahapp6.yeah.net>
References: <20008348.306571226976330517.JavaMail.coremail@yeahapp6.yeah.net>
Message-ID: <49223DE5.5000907@pobox.com>

zither wrote:
> Hi all,
> 
>   I'm using GDAL to read some Geotiff files. 
> But how I can get the information about little endian or big endian? 
> Any method can support to get this ?

Zither,

GDAL does not provide information on the endian-ness of the file, but
it shouldn't matter as data read through GDAL is always returned to
the application in local machine order.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From l_yoni at yahoo.com  Tue Nov 18 06:44:01 2008
From: l_yoni at yahoo.com (yonil)
Date: Tue Nov 18 06:44:04 2008
Subject: [Gdal-dev] Error propagation from GDAL.Dataset.GetGeoTransform() in C#
Message-ID: <20558001.post@talk.nabble.com>


I'm trying to use the following code to detect a possible error caused 
by the GetGeoTransform() call, but it reports no error has occurred, and
does not raise an exception.

Making this call on the same dataset from native C code returns 
CE_Failure from GDALGetGeoTransform().

Here's the C# snippet:

_dataset.GetGeoTransform(temp); // returns normally with default values
OSGeo.GDAL.CPLErr err = Gdal.GetLastErrorType();
if (OSGeo.GDAL.CPLErr.CE_None != err)
{
     throw new ApplicationException("GetGeoTransform() failed.");
}

Am I doing anything wrong, or is it somehow a problem with the C# 
bindings? I've built the C# bindings from the GDAL v1.5.3 release, 
running on Win32.

I've uploaded a small C# project with a sample dataset that is causing this
to occur.
http://www.nabble.com/file/p20558001/GDALWrapTester.rar GDALWrapTester.rar 


-- 
View this message in context: http://www.nabble.com/Error-propagation-from-GDAL.Dataset.GetGeoTransform%28%29-in-C--tp20558001p20558001.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From szekerest at gmail.com  Tue Nov 18 09:06:25 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Nov 18 09:06:27 2008
Subject: [Gdal-dev] Error propagation from GDAL.Dataset.GetGeoTransform()
	in C#
In-Reply-To: <20558001.post@talk.nabble.com>
References: <20558001.post@talk.nabble.com>
Message-ID: <f3b73b7d0811180606m791ac115tac6a848b6a2451f0@mail.gmail.com>

2008/11/18 yonil <l_yoni@yahoo.com>:

> I've uploaded a small C# project with a sample dataset that is causing this
> to occur.
> http://www.nabble.com/file/p20558001/GDALWrapTester.rar GDALWrapTester.rar
>

Hi,

I couldn't download the package from here and got the following response:

"
HTTP ERROR: 410

This file has been deleted.

RequestURI=/file/p20558001/GDALWrapTester.rar

Powered by Jetty://
"


You can send it to me directly by mail if the file is not too large.

Best regards,

Tamas
From Shawn.Gong at drdc-rddc.gc.ca  Tue Nov 18 10:30:39 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Tue Nov 18 10:29:31 2008
Subject: [gdal-dev] gdal 1.5.3 make error - HDF 4 conflicting types for
	`UNKNOWN'
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E12029A@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I am trying to make gdal 1.5.3 on linux (Redhat Enteroprise)
I use HDF4.2 r3 and HDF5 1.8.2.

here is the error message:
	libtool: compile:  g++ -g -O2 -Wall
-I/home/sgong/dev181/gdal-1.5.3/port
-I/home/sgong/dev181/gdal-1.5.3/gcore
-I/home/sgong/dev181/gdal-1.5.3/alg -I/home/sgong/dev181/gdal-1.5.3/ogr
-I/home/sgong/dev181/gdal-1.5.3/ogr/ogrsf_frmts
-I/home/sgong/dev181/dist/include -I/home/sgong/dev181/gdal-1.5.3/ogr
-Ihdf-eos -DOGR_ENABLED -I/home/sgong/dev181/gdal-1.5.3/port
-I/home/sgong/dev181/dist -I/home/sgong/dev181/dist/include -c
hdf4dataset.cpp  -fPIC -DPIC -o ../o/.libs/hdf4dataset.o
	
	In file included from hdf4dataset.cpp:39:
	hdf4dataset.h:55: conflicting types for `UNKNOWN'
	/home/sgong/dev181/dist/include/mfhdfi.h:26: previous
declaration as `
	   hdf_vartype_t UNKNOWN'
	make[2]: *** [../o/hdf4dataset.o] Error 1
	make[2]: Leaving directory
`/home/sgong/dev181/gdal-1.5.3/frmts/hdf4'
	make[1]: *** [hdf4-install-obj] Error 2
	make[1]: Leaving directory `/home/sgong/dev181/gdal-1.5.3/frmts'
	make: *** [frmts-target] Error 2

Should I change the declaration? in which file?

thanks,
Shawn



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081118/123b2a71/attachment.html
From warmerdam at pobox.com  Tue Nov 18 10:58:51 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov 18 10:59:49 2008
Subject: [Gdal-dev] Error propagation from GDAL.Dataset.GetGeoTransform()
	in C#
In-Reply-To: <20558001.post@talk.nabble.com>
References: <20558001.post@talk.nabble.com>
Message-ID: <4922E63B.4000900@pobox.com>

yonil wrote:
> I'm trying to use the following code to detect a possible error caused 
> by the GetGeoTransform() call, but it reports no error has occurred, and
> does not raise an exception.
> 
> Making this call on the same dataset from native C code returns 
> CE_Failure from GDALGetGeoTransform().
> 
> Here's the C# snippet:
> 
> _dataset.GetGeoTransform(temp); // returns normally with default values
> OSGeo.GDAL.CPLErr err = Gdal.GetLastErrorType();
> if (OSGeo.GDAL.CPLErr.CE_None != err)
> {
>      throw new ApplicationException("GetGeoTransform() failed.");
> }
> 
> Am I doing anything wrong, or is it somehow a problem with the C# 
> bindings? I've built the C# bindings from the GDAL v1.5.3 release, 
> running on Win32.

Yonil,

There are some places in the GDAL code that return CE_Failure without
issuing an error via CPLError().  I presume you were expecting
GetLastErrorType() to return something other than CE_None if GetGeoTransform()
returned an error?

If you can provide details of the driver being used I may be able to correct
the code to issue a CPLError before returning CE_Failure but this is a
problem that is fairly widespread in the code.

PS. Doesn't the C# GetGeoTransform() method return the error indicator?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Nov 18 11:43:08 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov 18 11:43:50 2008
Subject: [gdal-dev] gdal 1.5.3 make error - HDF 4 conflicting types for
	`UNKNOWN'
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E12029A@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E12029A@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <4922F09C.1030707@pobox.com>

Gong, Shawn (Contractor) wrote:
> hi list,
> 
> I am trying to make gdal 1.5.3 on linux (Redhat Enteroprise)
> 
> I use HDF4.2 r3 and HDF5 1.8.2.
> 
> here is the error message:
> 
>       libtool: compile:  g++ -g -O2 -Wall
>       -I/home/sgong/dev181/gdal-1.5.3/port
>       -I/home/sgong/dev181/gdal-1.5.3/gcore
>       -I/home/sgong/dev181/gdal-1.5.3/alg
>       -I/home/sgong/dev181/gdal-1.5.3/ogr
>       -I/home/sgong/dev181/gdal-1.5.3/ogr/ogrsf_frmts
>       -I/home/sgong/dev181/dist/include
>       -I/home/sgong/dev181/gdal-1.5.3/ogr -Ihdf-eos -DOGR_ENABLED
>       -I/home/sgong/dev181/gdal-1.5.3/port -I/home/sgong/dev181/dist
>       -I/home/sgong/dev181/dist/include -c hdf4dataset.cpp  -fPIC -DPIC
>       -o ../o/.libs/hdf4dataset.o
> 
>       In file included from hdf4dataset.cpp:39:
> 
>       hdf4dataset.h:55: conflicting types for `UNKNOWN'
> 
>       /home/sgong/dev181/dist/include/mfhdfi.h:26: previous declaration as `
> 
>          hdf_vartype_t UNKNOWN'

Shawn,

This is addressed by ticket #2609:

   http://trac.osgeo.org/gdal/ticket/2609

I would suggest you grab the nightly snapshot of the 1.5 branch and use
that (the gdalsvn-stable-*.tar.gz file):

   http://download.osgeo.org/gdal/daily/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Shawn.Gong at drdc-rddc.gc.ca  Tue Nov 18 12:26:01 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Tue Nov 18 12:27:18 2008
Subject: [gdal-dev] gdal 1.5.3 make error - HDF 4 conflicting types
	for`UNKNOWN'
In-Reply-To: <4922F09C.1030707@pobox.com>
References: <DF1471B5C308B346BF5A2AEA00C5615E12029A@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<4922F09C.1030707@pobox.com>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E12029C@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Thank you Frank and Andrew Brooks.

Following your leads, I went to check the ticket #2609 and the nightly
snapshot of the 1.5 branch.

I have two questions:
1) Is http://download.osgeo.org/gdal/daily/ always the latest update on
the last public release (currently 1.5.3)?
2) I'd like to use latest Rsat2 and TerraSAR-X drivers. Can I overwrite
the 1.5.3 with the drivers from 1.6 beta (by copying the entire
sub-directory)? 

thanks,
Shawn



-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Tuesday, November 18, 2008 11:43 AM
To: Gong, Shawn (Contractor)
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdal 1.5.3 make error - HDF 4 conflicting types
for`UNKNOWN'

Gong, Shawn (Contractor) wrote:
> hi list,
> 
> I am trying to make gdal 1.5.3 on linux (Redhat Enteroprise)
> 
> I use HDF4.2 r3 and HDF5 1.8.2.
> 
> here is the error message:
> 
>       In file included from hdf4dataset.cpp:39:
> 
>       hdf4dataset.h:55: conflicting types for `UNKNOWN'
> 
>       /home/sgong/dev181/dist/include/mfhdfi.h:26: previous
declaration as `
> 
>          hdf_vartype_t UNKNOWN'

Shawn,

This is addressed by ticket #2609:

   http://trac.osgeo.org/gdal/ticket/2609

I would suggest you grab the nightly snapshot of the 1.5 branch and use
that (the gdalsvn-stable-*.tar.gz file):

   http://download.osgeo.org/gdal/daily/

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Tue Nov 18 12:40:47 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov 18 12:41:07 2008
Subject: [gdal-dev] gdal 1.5.3 make error - HDF 4 conflicting types
	for`UNKNOWN'
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E12029C@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E12029A@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<4922F09C.1030707@pobox.com>
	<DF1471B5C308B346BF5A2AEA00C5615E12029C@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <4922FE1F.4080306@pobox.com>

Gong, Shawn (Contractor) wrote:
> Thank you Frank and Andrew Brooks.
> 
> Following your leads, I went to check the ticket #2609 and the nightly
> snapshot of the 1.5 branch.
> 
> I have two questions:
> 1) Is http://download.osgeo.org/gdal/daily/ always the latest update on
> the last public release (currently 1.5.3)?

Shawn,

The trunk and stable branches are captured each night and placed in this
location. So you can always grab essentially the latest code from there.

> 2) I'd like to use latest Rsat2 and TerraSAR-X drivers. Can I overwrite
> the 1.5.3 with the drivers from 1.6 beta (by copying the entire
> sub-directory)? 

This will almost certainly work fine.  But you might also consider just
using the trunk version from svn or the nightly snapshot.  Certainly we
would appreciate your trying it out before the final 1.6 release.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Shawn.Gong at drdc-rddc.gc.ca  Tue Nov 18 13:48:40 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Tue Nov 18 13:47:32 2008
Subject: [gdal-dev] gdal 1.5.3 make - files missing
In-Reply-To: <4922FE1F.4080306@pobox.com>
References: <DF1471B5C308B346BF5A2AEA00C5615E12029A@ottawaex02.Ottawa.drdc-rddc.gc.ca><4922F09C.1030707@pobox.com><DF1471B5C308B346BF5A2AEA00C5615E12029C@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<4922FE1F.4080306@pobox.com>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E12029D@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I have made gdal 1.5.3 using the stable branch
http://download.osgeo.org/gdal/daily/

After "make install", libgdal.so.1.12.3, libgdal.la, libgdal.a were
generated in /local-install/lib/

However compared to my previous gdal 1.4.0, these files are missing
under /local-install/lib/python2.5/site-packages/:
osr.py, ogr.py, gdal.py, gdalconst.py, gdalnumeric.py, _gdalmodule.so,
_gdalmodule.la, _gdalmodule.a

What did I do wrong?

thanks,
Shawn



-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Tuesday, November 18, 2008 12:41 PM
To: Gong, Shawn (Contractor)
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdal 1.5.3 make error - HDF 4 conflicting
typesfor`UNKNOWN'

Gong, Shawn (Contractor) wrote:
> Thank you Frank and Andrew Brooks.
> 
> Following your leads, I went to check the ticket #2609 and the nightly
> snapshot of the 1.5 branch.
> 
> I have two questions:
> 1) Is http://download.osgeo.org/gdal/daily/ always the latest update
on
> the last public release (currently 1.5.3)?

Shawn,

The trunk and stable branches are captured each night and placed in this
location. So you can always grab essentially the latest code from there.

> 2) I'd like to use latest Rsat2 and TerraSAR-X drivers. Can I
overwrite
> the 1.5.3 with the drivers from 1.6 beta (by copying the entire
> sub-directory)? 

This will almost certainly work fine.  But you might also consider just
using the trunk version from svn or the nightly snapshot.  Certainly we
would appreciate your trying it out before the final 1.6 release.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From tvalleau at clarku.edu  Tue Nov 18 15:35:31 2008
From: tvalleau at clarku.edu (Tom V.)
Date: Tue Nov 18 15:35:39 2008
Subject: [gdal-dev] CreateCopy() Not writing ColorInterp Data
Message-ID: <19124.198.151.13.15.1227040531.squirrel@cmail.clarku.edu>

Hey,

I'm using GDAL to read in a NITF image and write it out as either a NITF
or a GeoTiff file, and I'm basically doing it the same way as
gdal_translate but with a few changes.  The reason I'm writing is because
when the GeoTIFF gets written out using CreateCopy(), the ColorInterp data
is gray for the first band and Undefined for the other three bands.  We're
using a stripped down version of GDAL so I can't use the SetAccess()
method to
write out to the file after it's already written.  I tried reading it back
in with the access set as GA_Update.

Has anyone seen anything like this before, or know what the problem could
be?  I'd be happy to answer any questions or go into more detail.

Thanks!

-Tom


From warmerdam at pobox.com  Tue Nov 18 16:03:43 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov 18 16:04:23 2008
Subject: [gdal-dev] CreateCopy() Not writing ColorInterp Data
In-Reply-To: <19124.198.151.13.15.1227040531.squirrel@cmail.clarku.edu>
References: <19124.198.151.13.15.1227040531.squirrel@cmail.clarku.edu>
Message-ID: <49232DAF.5000008@pobox.com>

Tom V. wrote:
> Hey,
> 
> I'm using GDAL to read in a NITF image and write it out as either a NITF
> or a GeoTiff file, and I'm basically doing it the same way as
> gdal_translate but with a few changes.  The reason I'm writing is because
> when the GeoTIFF gets written out using CreateCopy(), the ColorInterp data
> is gray for the first band and Undefined for the other three bands.  We're
> using a stripped down version of GDAL so I can't use the SetAccess()
> method to
> write out to the file after it's already written.  I tried reading it back
> in with the access set as GA_Update.
> 
> Has anyone seen anything like this before, or know what the problem could
> be?  I'd be happy to answer any questions or go into more detail.

Tom,

What does the gdalinfo report on the input dataset to the CreateCopy() look
like?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Nov 18 16:39:48 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov 18 16:40:20 2008
Subject: [gdal-dev] CreateCopy() Not writing ColorInterp Data
In-Reply-To: <54194.198.151.13.15.1227042950.squirrel@cmail.clarku.edu>
References: <19124.198.151.13.15.1227040531.squirrel@cmail.clarku.edu>
	<49232DAF.5000008@pobox.com>
	<54194.198.151.13.15.1227042950.squirrel@cmail.clarku.edu>
Message-ID: <49233624.5080903@pobox.com>

Tom V. wrote:
> Frank, it looks like this:
..

> Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Blue
> Band 2 Block=1024x1024 Type=UInt16, ColorInterp=Green
> Band 3 Block=1024x1024 Type=UInt16, ColorInterp=Red
> Band 4 Block=1024x1024 Type=UInt16, ColorInterp=Undefined


Tom,

The GeoTIFF driver will not default to setting PHOTOMETRIC_RGB for
16bit images.  Try passing the PHOTOMETRIC=RGB creation option to the
GTiff driver CreateCopy() method to force use of RGB photometric mode.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Nov 18 19:10:36 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov 18 19:11:05 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <C55473998E248B4DAEC5342D698DFE8508C4307A@sea-srv-mail.lizardtech.com>
References: <20081114192340.745DFE01445@lists.osgeo.org>
	<C55473998E248B4DAEC5342D698DFE8508C4307A@sea-srv-mail.lizardtech.com>
Message-ID: <4923597C.40305@pobox.com>

Michael P. Gerlek wrote:
>> int sceneWidth  = (int)(nXSize * maxWidth / (double)maxWidthAtL0 + 0.99); 
>> int sceneHeight = (int)(nYSize * maxHeight / (double)maxHeightAtL0 +
>> 0.99);
> 
> Ouch, you shouldn't be doing rounding like that.  Use the getDimsAtMag()
> function to get the exact width/height you need and all will be well.

Michael,

I have reviewed the documentation for LTIImage:getDimsAtMag() and it appears
to just return the size of the whole image at a particular magnification level.
The above calculations are intended to find the size of the RasterIO() request
window at the desired zoom level.  So I don't think it is applicable.

I have filed a ticket on the problem I found (which happens to have also been
responsible for a bug reported by a client this week) and I have committed
a fix in 1.5 and trunk.

   http://trac.osgeo.org/gdal/ticket/2689

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From randre at gmail.com  Tue Nov 18 19:48:17 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Tue Nov 18 19:48:19 2008
Subject: [gdal-dev] Can I change SOURCE_EXTRA setting at compile time?
Message-ID: <9c2015090811181648ia45a6fcjec01fcee17025848@mail.gmail.com>

I've been mercilessly beating a dead horse on a couple of lists about some
weird artifacts that I'm getting when doing reprojections in Mapserver from
epsg:4326 to epsg:900913.  It's recently come to my attention that something
was discussed in an IRC chat that might be pertinent to this issue, and I
was hoping I could test it.  Specifically, it relates to SOURCE_EXTRA, and
although the conversation at the time dealt with issues at the International
dateline, I think it might also manifest itself in other edge cases (literal
edges). ;).

I would like to know if it is possible to set SOURCE_EXTRA to something
other than 1 at compile time?  I do not see it listed as an option in the
configure documentation, but perhaps I could edit a file, or pass in the
flag anyhow?

Thanks in advance,

Roger
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081118/184dce7a/attachment.html
From warmerdam at pobox.com  Tue Nov 18 20:07:35 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov 18 20:08:08 2008
Subject: [gdal-dev] Can I change SOURCE_EXTRA setting at compile time?
In-Reply-To: <9c2015090811181648ia45a6fcjec01fcee17025848@mail.gmail.com>
References: <9c2015090811181648ia45a6fcjec01fcee17025848@mail.gmail.com>
Message-ID: <492366D7.4020505@pobox.com>

Roger Andr? wrote:
> I've been mercilessly beating a dead horse on a couple of lists about 
> some weird artifacts that I'm getting when doing reprojections in 
> Mapserver from epsg:4326 to epsg:900913.  It's recently come to my 
> attention that something was discussed in an IRC chat that might be 
> pertinent to this issue, and I was hoping I could test it.  
> Specifically, it relates to SOURCE_EXTRA, and although the conversation 
> at the time dealt with issues at the International dateline, I think it 
> might also manifest itself in other edge cases (literal edges). ;).
> 
> I would like to know if it is possible to set SOURCE_EXTRA to something 
> other than 1 at compile time?  I do not see it listed as an option in 
> the configure documentation, but perhaps I could edit a file, or pass in 
> the flag anyhow?

Roger,

I haven't followed your problems closely (I recall something about datum
shifts).  The SOURCE_EXTRA only helps with the GDAL warper.  If you wanted
you could modify the following code in gdal/alg/gdalwarpoperation.cpp
and recompile:

/* -------------------------------------------------------------------- */
/*      Allow addition of extra sample pixels to source window to       */
/*      avoid missing pixels due to sampling error.  In fact,           */
/*      fallback to adding a bit to the window if any points failed     */
/*      to transform.                                                   */
/* -------------------------------------------------------------------- */
     if( CSLFetchNameValue( psOptions->papszWarpOptions,
                            "SOURCE_EXTRA" ) != NULL )
     {
         nResWinSize += atoi(
             CSLFetchNameValue( psOptions->papszWarpOptions, "SOURCE_EXTRA" ));
     }
     else if( nFailedCount > 0 )
         nResWinSize += 10;


Perhaps change the nResWinSize += 10 line to nResWinSize += 100 or something
like that.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From randre at gmail.com  Tue Nov 18 20:52:46 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Tue Nov 18 20:52:48 2008
Subject: [gdal-dev] Can I change SOURCE_EXTRA setting at compile time?
In-Reply-To: <492366D7.4020505@pobox.com>
References: <9c2015090811181648ia45a6fcjec01fcee17025848@mail.gmail.com>
	<492366D7.4020505@pobox.com>
Message-ID: <9c2015090811181752y3e79ec53p11c22d62c1856289@mail.gmail.com>

Hi Frank,

I've theorized all sorts of reasons for what I'm seeing.  So far none of
them are right.  Basically, if I take a really high-res epsg:4326 image, and
serve it up through Mapserver in epsg:900913, there are instances where I
get images back which are missing rows of pixels at the bottom of the
image.  If I reduce the resolution of the image the lines go away.  I
haven't yet figured out at what resolution the problem starts to appear.

I just tested the idea of changing the values in the warper code:
First:
nResWinSize += 100;
Then:
nResWinSize += 500;

Then rebuilt gdal.   Didn't seem to make a difference.

Thanks for the info though.

Roger
--

On Tue, Nov 18, 2008 at 5:07 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Roger Andr? wrote:
>
>> I've been mercilessly beating a dead horse on a couple of lists about some
>> weird artifacts that I'm getting when doing reprojections in Mapserver from
>> epsg:4326 to epsg:900913.  It's recently come to my attention that something
>> was discussed in an IRC chat that might be pertinent to this issue, and I
>> was hoping I could test it.  Specifically, it relates to SOURCE_EXTRA, and
>> although the conversation at the time dealt with issues at the International
>> dateline, I think it might also manifest itself in other edge cases (literal
>> edges). ;).
>>
>> I would like to know if it is possible to set SOURCE_EXTRA to something
>> other than 1 at compile time?  I do not see it listed as an option in the
>> configure documentation, but perhaps I could edit a file, or pass in the
>> flag anyhow?
>>
>
> Roger,
>
> I haven't followed your problems closely (I recall something about datum
> shifts).  The SOURCE_EXTRA only helps with the GDAL warper.  If you wanted
> you could modify the following code in gdal/alg/gdalwarpoperation.cpp
> and recompile:
>
> /* -------------------------------------------------------------------- */
> /*      Allow addition of extra sample pixels to source window to       */
> /*      avoid missing pixels due to sampling error.  In fact,           */
> /*      fallback to adding a bit to the window if any points failed     */
> /*      to transform.                                                   */
> /* -------------------------------------------------------------------- */
>    if( CSLFetchNameValue( psOptions->papszWarpOptions,
>                           "SOURCE_EXTRA" ) != NULL )
>    {
>        nResWinSize += atoi(
>            CSLFetchNameValue( psOptions->papszWarpOptions, "SOURCE_EXTRA"
> ));
>    }
>    else if( nFailedCount > 0 )
>        nResWinSize += 10;
>
>
> Perhaps change the nResWinSize += 10 line to nResWinSize += 100 or
> something
> like that.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081118/17d2aa33/attachment.html
From warmerdam at pobox.com  Tue Nov 18 20:58:21 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov 18 20:58:45 2008
Subject: [gdal-dev] Can I change SOURCE_EXTRA setting at compile time?
In-Reply-To: <9c2015090811181752y3e79ec53p11c22d62c1856289@mail.gmail.com>
References: <9c2015090811181648ia45a6fcjec01fcee17025848@mail.gmail.com>
	<492366D7.4020505@pobox.com>
	<9c2015090811181752y3e79ec53p11c22d62c1856289@mail.gmail.com>
Message-ID: <492372BD.20504@pobox.com>

Roger Andr? wrote:
> Hi Frank,
> 
> I've theorized all sorts of reasons for what I'm seeing.  So far none of 
> them are right.  Basically, if I take a really high-res epsg:4326 image, 
> and serve it up through Mapserver in epsg:900913, there are instances 
> where I get images back which are missing rows of pixels at the bottom 
> of the image.  If I reduce the resolution of the image the lines go 
> away.  I haven't yet figured out at what resolution the problem starts 
> to appear.
> 
> I just tested the idea of changing the values in the warper code:
> First:
> nResWinSize += 100;
> Then:
> nResWinSize += 500;
> 
> Then rebuilt gdal.   Didn't seem to make a difference.

Roger,

Are you sure the GDAL warper is being used? If the reprojection is being
done by MapServer it will be using the MapServer warper.

Try changing the +- 1.0 values to larger values in the following code in
mapserver's mapresample.c:

/* -------------------------------------------------------------------- */
/*      Project desired extents out by 2 pixels, and then strip to      */
/*      available data.                                                 */
/* -------------------------------------------------------------------- */
     memcpy( &sOrigSrcExtent, &sSrcExtent, sizeof(sSrcExtent) );

     sSrcExtent.minx = floor(sSrcExtent.minx-1.0);
     sSrcExtent.maxx = ceil (sSrcExtent.maxx+1.0);
     sSrcExtent.miny = floor(sSrcExtent.miny-1.0);
     sSrcExtent.maxy = ceil (sSrcExtent.maxy+1.0);


See if that helps.  Currently there is no processing option that does
what SOURCE_EXTRA does, though it might be worth adding one.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From randre at gmail.com  Tue Nov 18 22:30:05 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Tue Nov 18 22:30:08 2008
Subject: [gdal-dev] Can I change SOURCE_EXTRA setting at compile time?
In-Reply-To: <492372BD.20504@pobox.com>
References: <9c2015090811181648ia45a6fcjec01fcee17025848@mail.gmail.com>
	<492366D7.4020505@pobox.com>
	<9c2015090811181752y3e79ec53p11c22d62c1856289@mail.gmail.com>
	<492372BD.20504@pobox.com>
Message-ID: <9c2015090811181930n742b368doba85e6606ec1080c@mail.gmail.com>

Hi Frank,

You're absolutely right.  Changing those values in mapresample.c to 10
removed the artifacts when using a WMS request.  They're still present when
the request is made via mapscript though.  I need to manually code a
mapscript example though, because right now I'm testing that via TileCache,
and I'm not 100% certain how the image is being requested.  Can you think of
a reason why WMS would be different from a straight read and reproject
through mapscript?

cc'ing TileCache list and mapserver lists as well
--

On Tue, Nov 18, 2008 at 5:58 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Roger Andr? wrote:
>
>> Hi Frank,
>>
>> I've theorized all sorts of reasons for what I'm seeing.  So far none of
>> them are right.  Basically, if I take a really high-res epsg:4326 image, and
>> serve it up through Mapserver in epsg:900913, there are instances where I
>> get images back which are missing rows of pixels at the bottom of the image.
>>  If I reduce the resolution of the image the lines go away.  I haven't yet
>> figured out at what resolution the problem starts to appear.
>>
>> I just tested the idea of changing the values in the warper code:
>> First:
>> nResWinSize += 100;
>> Then:
>> nResWinSize += 500;
>>
>> Then rebuilt gdal.   Didn't seem to make a difference.
>>
>
> Roger,
>
> Are you sure the GDAL warper is being used? If the reprojection is being
> done by MapServer it will be using the MapServer warper.
>
> Try changing the +- 1.0 values to larger values in the following code in
> mapserver's mapresample.c:
>
> /* -------------------------------------------------------------------- */
> /*      Project desired extents out by 2 pixels, and then strip to      */
> /*      available data.                                                 */
> /* -------------------------------------------------------------------- */
>    memcpy( &sOrigSrcExtent, &sSrcExtent, sizeof(sSrcExtent) );
>
>    sSrcExtent.minx = floor(sSrcExtent.minx-1.0);
>    sSrcExtent.maxx = ceil (sSrcExtent.maxx+1.0);
>    sSrcExtent.miny = floor(sSrcExtent.miny-1.0);
>    sSrcExtent.maxy = ceil (sSrcExtent.maxy+1.0);
>
>
> See if that helps.  Currently there is no processing option that does
> what SOURCE_EXTRA does, though it might be worth adding one.
>
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081118/8fd1d423/attachment.html
From roland.ritchi at live.fr  Wed Nov 19 04:40:54 2008
From: roland.ritchi at live.fr (roland ritchi)
Date: Wed Nov 19 04:40:56 2008
Subject: [gdal-dev] =?windows-1256?q?GDAL_with_GML_3=FE?=
Message-ID: <BAY120-W22EF762A7EB28BD4B640EEF0D0@phx.gbl>


Hello, I need to use GDAL with GML 3 :Can I? and can you explain me how I can use GDAL?
Thank you
_________________________________________________________________
In?dit ! Des Emotic?nes D?jant?es! Installez les dans votre Messenger ! 
http://www.ilovemessenger.fr/Emoticones/EmoticonesDejantees.aspx
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081119/95b40468/attachment.html
From jukka.rahkonen at mmmtike.fi  Wed Nov 19 07:42:36 2008
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Nov 19 07:42:49 2008
Subject: [gdal-dev] JP2ECW reversible compression issue with MapServer
Message-ID: <loom.20081119T120401-381@post.gmane.org>

Hi,

I got inspired in making again some tests with jpeg2000. My environment is:

Mapserver MS4W with MapServer version 5.2.0
GDAL 1.5.2, released 2008/05/29

I was measuring MapServer speed with lossless vs.lossy JPEG2000 images and by
using either JP2ECW or JP2MrSID driver. I did not find any improvement in speed,
but accidentally I notised that when I used the JP2ECW driver I can not get full
quality image through MapServer. The output image looks like it were slightly
compressed even the originals are lossless. If I skip the JP2ECW driver and take
JP2MrSID driver Mapserver starts to deliver full quality images which are
identical with the output reached from GeoTIFF originals.

Question 1: Could this issue of getting lossy output from lossless JPEG2000
images be something worth making a trac issue, or is it known already, or do you
suppose I have made just some mistake in my test?

Question 2: MapServer is quite slow with JPEG2000 images. Do gdal developers
have ideas about how to make it faster? Any estimates about how much money would
be needed to make it 100 percent faster?  I believe that it is a realistic goal.




From klandrus at progeny.net  Wed Nov 19 10:00:46 2008
From: klandrus at progeny.net (Kurt Landrus)
Date: Wed Nov 19 10:00:49 2008
Subject: Fwd: [gdal-dev] NITF TRE support
References: <AC24B9C9-0DA1-46AC-AE63-0F28C032BC61@progeny.net>
Message-ID: <C5FBD9C0-E870-481D-92A2-B5F6700180D8@progeny.net>

Ok never-mind, I found the problem was I was using a comma, to delimit  
the tre-name and contents, and Franks note indicated an '=' was needed.
The NITF documentation page needs to be updated to reflect this.
Thanks;

Kurt Landrus
Progeny Systems Corp.
klandrus@progeny.net
Office: 	703-368-6107 x424
Lab: 	703-368-6107 x520



Begin forwarded message:

> From: Kurt Landrus <klandrus@progeny.net>
> Date: November 17, 2008 1:19:20 PM EST
> To: Frank Warmerdam <warmerdam@pobox.com>, gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] NITF TRE support
>
> Ok thanks for your reply. I downloaded the beta, and updated my code  
> to use the options in the create fcn.
> I am now getting an error from the driver on the create call, for  
> the options.
> I am creating the option with the TRE  in the same format as loaded   
> using GDAL.
>
> ### saving TRE SENSRA = FSBS2    +35.000000-077.000000B+01200f      
> +74.998+000.000+014.996+70.000+009.998010.0N0020.0f075.0+1020m
> ### treContents = TRE=SENSRA,FSBS2    +35.000000-077.000000B 
> +01200f      
> +74.998+000.000+014.996+70.000+009.998010.0N0020.0f075.0+1020m
> ERROR 1: Could not parse creation options SENSRA,FSBS2     
> +35.000000-077.000000B+01200f      
> +74.998+000.000+014.996+70.000+009.998010.0N0020.0f075.0+1020m
>
> $ gdalinfo  --version
> GDAL 1.6.0beta2, released 2008/11/12
>
> Here is the code snippet where this error occurred.
>
>      if (saveOk) {
>                // save TRE segments to dataset.
>                char            *treValue = NULL, *treName = NULL,  
> *treContents = NULL;
>                char            *tre = "TRE_SENSRA";
>                char            **options = NULL;
>
>                parasite = gimp_image_parasite_find (image_ID, tre);
>                if (parasite != NULL) {
>
>                treValue = (char *) g_strndup(gimp_parasite_data  
> (parasite),
>                                      gimp_parasite_data_size  
> (parasite));
>                        gimp_parasite_free (parasite);
>                        treName = g_strdup(tre+4);
>                        IFDBG printf( "### saving TRE %s = %s\n",  
> treName, treValue);
>
>                        treContents = g_strconcat(treName, ",",  
> treValue, NULL);
>                        options = CSLSetNameValue( options, "TRE",  
> treContents );
>                        IFDBG printf( "### treContents = %s\n",  
> *options);
>                }
>
>                dataset = GDALCreate( driver, filename, width,  
> height, channels,
>                                                 GDT_Byte, options );
>                if( dataset == NULL ){
>                g_warning("NITFview error opening dataset\n");
>                        saved = FALSE;
>        }
>
> Do you have any suggestions why it can't parse the options?
>
> Thanks;
>
> Kurt Landrus
> Progeny Systems Corp.
> klandrus@progeny.net
> Office: 	703-368-6107 x424
> Lab: 	703-368-6107 x520
>
>
>
> On Nov 13, 2008, at 8:30 PM, Frank Warmerdam wrote:
>
>> Kurt Landrus wrote:
>>> Ok, I was looking through nithfile.c,  am I correct in  
>>> understanding that the only TRE supported for saving is BLOCKA,  
>>> and that each additional TRE needs to be handled
>>> individually?
>>> I need to add support for the following TREs.  But I don't really  
>>> need to add new SDE headers, but preserve the original values as  
>>> read
>>> using GDALGetMetadataItem.
>>> SENSRA
>>> AIMIDB
>>> ACFTB
>>> Is there an easy way to save back an TRE that was read using GDAL  
>>> (/0 escaped string)
>>> or should I pull out all the fields from the string, and then  
>>> reassemble them in a function as is done for BLOCKA?
>>
>> Kurt,
>>
>> The GDAL trunk code (ie. 1.6 beta2) does include generic support for
>> writing *image* TREs.  Each TRE needs to be in the creation options
>> list as an item with TRE=<trename>=<content of tre> and the content  
>> must be
>> escaped using the BackslashQuotable scheme.
>>
>> This is exactly the same format the TREs are read into the TRE
>> metadata domain.
>>
>> Currently there is no support for writing file TREs.
>>
>> Best regards,
>> -- 
>> --------------------------------------- 
>> +--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Programmer for  
>> Rent
>>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081119/92b0b0ff/attachment-0001.html
From warmerdam at pobox.com  Wed Nov 19 12:02:30 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 19 12:03:07 2008
Subject: Fwd: [gdal-dev] NITF TRE support
In-Reply-To: <C5FBD9C0-E870-481D-92A2-B5F6700180D8@progeny.net>
References: <AC24B9C9-0DA1-46AC-AE63-0F28C032BC61@progeny.net>
	<C5FBD9C0-E870-481D-92A2-B5F6700180D8@progeny.net>
Message-ID: <492446A6.7030808@pobox.com>

Kurt Landrus wrote:
> Ok never-mind, I found the problem was I was using a comma, to delimit 
> the tre-name and contents, and Franks note indicated an '=' was needed.
> The NITF documentation page needs to be updated to reflect this.
> Thanks;

Kurt,

Proposed updates are welcome.  Send them directly to me by email, or submit
them as a ticket in Trac.  Isn't it wonderful having the opportunity to
contribute and make the life of those who follow in your footsteps easier?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Nov 19 12:12:12 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 19 12:12:54 2008
Subject: [gdal-dev] JP2ECW reversible compression issue with MapServer
In-Reply-To: <loom.20081119T120401-381@post.gmane.org>
References: <loom.20081119T120401-381@post.gmane.org>
Message-ID: <492448EC.1090305@pobox.com>

Jukka Rahkonen wrote:
> I was measuring MapServer speed with lossless vs.lossy JPEG2000 images and by
> using either JP2ECW or JP2MrSID driver. I did not find any improvement in speed,
> but accidentally I notised that when I used the JP2ECW driver I can not get full
> quality image through MapServer. The output image looks like it were slightly
> compressed even the originals are lossless. If I skip the JP2ECW driver and take
> JP2MrSID driver Mapserver starts to deliver full quality images which are
> identical with the output reached from GeoTIFF originals.
> 
> Question 1: Could this issue of getting lossy output from lossless JPEG2000
> images be something worth making a trac issue, or is it known already, or do you
> suppose I have made just some mistake in my test?

Jukka,

Presumably it would be a GDAL trac issue if you want to submit it.  So I'd
suggest trying to reproduce it with gdal_translate too.  Generally speaking I'm
loath to investigate problems related to the ECW SDK due to painful past
experiences trying to track bugs into it.  So it may get no action for some
time but it would be good to have a ticket in the system on any issue.

> Question 2: MapServer is quite slow with JPEG2000 images. Do gdal developers
> have ideas about how to make it faster? Any estimates about how much money would
> be needed to make it 100 percent faster?  I believe that it is a realistic goal.

The most obvious room for improvement is that RGB images are read from ECW one
band at a time.  Assuming this is reflected in three decodes for each area from
ECW instead of one then there could be substantial room for improvement.  This
would likely be approached as a MapServer change to request all bands at once.
Paul Ramsey has prototyped an effort in this regard though I feel doing it
properly in the mapserver code is a non-trivial effort (perhaps a couple days
to do it right with good testing).

The other thing that can be helpful is to ensure the mapserver map render
is handled as one windowed request on the jpeg2000 file instead of several
smaller chunks.  I imagine this is already working properly but it might
be worth investigation.

Some recent work with the JP2MrSID driver suggest to me this should not
be an issue with it, though it is possible there is still an issue with the
JP2ECW driver.

If we set out reasonably specific parameters I would be interested in
a contract to speed up jpeg2000 access by a factor of two (which I would
refer to as 50% faster - surely 100% faster means instant!).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Nov 19 12:25:08 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 19 12:25:39 2008
Subject: [gdal-dev] GDAL with GML =?windows-1256?Q?3=FE?=
In-Reply-To: <BAY120-W22EF762A7EB28BD4B640EEF0D0@phx.gbl>
References: <BAY120-W22EF762A7EB28BD4B640EEF0D0@phx.gbl>
Message-ID: <49244BF4.5070807@pobox.com>

roland ritchi wrote:
> Hello, I need to use GDAL with GML 3 :Can I? and can you explain me how 
> I can use GDAL?

Roland,

The GDAL/OGR GML driver is primarily aimed at GML 2 format.  It has some,
very limited, support for simple GML 3 files.  You might want to try your
input and see what happens.  If it doesn't work I'd suggest you make your
file avaialble for download and send another email pointing to it and
asking why it doesn't work and how hard it might be to make it work.

I have done some experimental work implementing a driver based on the GML
driver for the GML 3 NAS format and that is working well now but it is not
a regular part of OGR currently.  It is also not all that general - it is
targetted at a particular GML profile.

I am afraid the question "can you explain me how I can use GDAL?" is not
specific enough to act on.  There is a large amount of information on the
GDAL/OGR web site.  I would suggest digesting as much as seems related to
your needs and then asking a much more focused and specific question.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Nov 19 15:12:41 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 19 15:14:07 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <4920CF48.5010104@swoodbridge.com>
References: <20081113114937.12FC2E0121C@lists.osgeo.org>
	<DBEC881B4E22D1449F5FAC530E1ADD12CDA6B1@sea-srv-ms3.lizardtech.com>
	<491C8CE4.5050503@swoodbridge.com> <491DACB5.9070103@pobox.com>
	<491DC609.2040304@swoodbridge.com> <491DCC88.2040100@pobox.com>
	<4920CF48.5010104@swoodbridge.com>
Message-ID: <49247339.7050803@pobox.com>

Stephen Woodbridge wrote:
> Hi Frank,
> 
> Sorry no joy with the patch applied. Here are the results. I had them 
> patch and set the prefix /usr/local/swoodbridge/ and then used the 
> following script to make sure I pulled in the new executables and 
> libraries.
...
> MrSID: RasterIO() - using optimized dataset level IO.
> MrSID: Dataset:IRasterIO(25432,42149 5066x6973 -> 5066x6973 -> 
> 5066x6973, zoom=1)
> gdalwarp: ../compressed/compressed.cpp:1724: bool 
> kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' 
> failed.

Steve,

I confirmed the code I pointed out was buggy, but it does not appear to
be directly responsible for your problem.  I'm not sure what else to tell
you.  We could try and add more detailed debug output in the area of the
IRasterIO() message but what is there seems to suggest the requested area
will be on the database.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From woodbri at swoodbridge.com  Wed Nov 19 15:29:42 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 19 15:28:29 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <49247339.7050803@pobox.com>
References: <20081113114937.12FC2E0121C@lists.osgeo.org>
	<DBEC881B4E22D1449F5FAC530E1ADD12CDA6B1@sea-srv-ms3.lizardtech.com>
	<491C8CE4.5050503@swoodbridge.com> <491DACB5.9070103@pobox.com>
	<491DC609.2040304@swoodbridge.com> <491DCC88.2040100@pobox.com>
	<4920CF48.5010104@swoodbridge.com> <49247339.7050803@pobox.com>
Message-ID: <49247736.1050208@swoodbridge.com>

Frank Warmerdam wrote:
> Stephen Woodbridge wrote:
>> Hi Frank,
>>
>> Sorry no joy with the patch applied. Here are the results. I had them 
>> patch and set the prefix /usr/local/swoodbridge/ and then used the 
>> following script to make sure I pulled in the new executables and 
>> libraries.
> ...
>> MrSID: RasterIO() - using optimized dataset level IO.
>> MrSID: Dataset:IRasterIO(25432,42149 5066x6973 -> 5066x6973 -> 
>> 5066x6973, zoom=1)
>> gdalwarp: ../compressed/compressed.cpp:1724: bool 
>> kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' 
>> failed.
> 
> Steve,
> 
> I confirmed the code I pointed out was buggy, but it does not appear to
> be directly responsible for your problem.  I'm not sure what else to tell
> you.  We could try and add more detailed debug output in the area of the
> IRasterIO() message but what is there seems to suggest the requested area
> will be on the database.
> 
> Best regards,

Frank,

Thank you for looking into this, it is very much appreciated.

While the patch "looks" like it should be getting executed, I'm not 
convinced that it is as I added some addition output and it was not 
being generated and I'm still tring to resolve this with the sysadmin. I 
did copy the svn changset verbatim into my code which was when I added 
more prints and discovered this issue on my end. So, I'm not sure we are 
actually executing the patched code in spite of what my attempts to 
verify it said.

I'll let you know one way or the other once I get a better handle on 
this here.

Thanks again for the follow up.

-Steve
From ari.jolma at tkk.fi  Wed Nov 19 15:41:42 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 19 15:41:46 2008
Subject: [gdal-dev] Re: [SAC] GDAL buildslave on buildtest operational
In-Reply-To: <49230CD6.6080305@pobox.com>
References: <4921E6E2.4060405@tkk.fi> <49230CD6.6080305@pobox.com>
Message-ID: <49247A06.90502@tkk.fi>

Frank Warmerdam kirjoitti:
> Looking at the the buildtest-full configure report I see it does not 
> include,
> but might benefit from, Xerces, HDF4, mysql and geos support.  It might
> also be nice if the configurations for -quick and -full were somewhat
> distinct.  Perhaps -quick could aim for a somewhat minimalist 
> configuration
> and -full could aim to include as many options as practical?  That way we
> can test "graceful fallback" - for instance one with geos, one without.
> One with curl, one without.
>
> I guess these details might be better pursued on the gdal-dev list.

Some background for the gdal-dev list: The telascience_* buildslave is 
replaced with buildtest_* ones, which reside in a separate computer 
(xblade11). "Telascience" slaves (actually slave in xblade14-2) do not 
run any more.

The buildtest machine has now netcdf, hdf4, xerces, geos support. The 
configure is still the same as what was in "telascience" slave and it is 
similar in quick and full builds. The --without flags will be added 
later to the quick build slave.

Xerces is 3.0.0, which causes some problems with autotest: 
http://trac.osgeo.org/gdal/ticket/2617

MySQL and PostGIS (buildtest has PostgreSQL but not PostGIS) support and 
tests will be added later.

Regards,

Ari

>
> Best regards,


-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi


From Shawn.Gong at drdc-rddc.gc.ca  Wed Nov 19 16:39:12 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed Nov 19 16:38:03 2008
Subject: [gdal-dev] gdal program core dump
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E1202A9@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

The gdal 1.4.0 that I built 12 months ago (and were running fine) now
core dumps when I just type "gdalinfo" or "gdalwarp"  Error message:
"Floating exception (core dumped)".
Has anyone seen this kind of problem?

I then built gdal 1.5.3 but still getting the same error.

Note that my Linux OS is Redhat Enterprise (3 yrs old). It has 2 gcc c++
libraries: /usr/lib/libstdc++.so.5 and /usr/local/lib/libstdc++.so.6 
There was a warning during make that libstdc++.so.5/6 and
libcom_err.so.2/3 may conflict.
If we upgrade OS, is Fedora 9 good?

thanks,
Shawn



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081119/2cdca1ae/attachment.html
From even.rouault at mines-paris.org  Wed Nov 19 17:23:38 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 19 17:23:45 2008
Subject: [gdal-dev] gdal program core dump
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E1202A9@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E1202A9@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <200811192323.39745.even.rouault@mines-paris.org>

Mixing different versions of libstdc++ when linking libgdal.so is definitely 
not a good idea and would likely cause runtime crashes. You should do a "ldd 
libgdal.so" to check that it doesn't occur (it could occur for example if the 
GDAL build itself is against one libstdc++ version, and some library that 
GDAL is linking with itself is linked against another libstdc++ version).

It appears more like a bad configuration issue of your OS than a problem with 
GDAL itself.
Other thing to check : are you sure you aren't mixing GDAL binaries and 
libraries of different versions ?

To answer your last question, Fedora 9 should be no problem. GDAL 1.5.3 is 
even packaged in the distribution itself. See 
http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries

Le Wednesday 19 November 2008 22:39:12 Gong, Shawn (Contractor), vous avez 
?crit?:
> hi list,
>
> The gdal 1.4.0 that I built 12 months ago (and were running fine) now
> core dumps when I just type "gdalinfo" or "gdalwarp"  Error message:
> "Floating exception (core dumped)".
> Has anyone seen this kind of problem?
>
> I then built gdal 1.5.3 but still getting the same error.
>
> Note that my Linux OS is Redhat Enterprise (3 yrs old). It has 2 gcc c++
> libraries: /usr/lib/libstdc++.so.5 and /usr/local/lib/libstdc++.so.6
> There was a warning during make that libstdc++.so.5/6 and
> libcom_err.so.2/3 may conflict.
> If we upgrade OS, is Fedora 9 good?
>
> thanks,
> Shawn


From matt.wilkie at gov.yk.ca  Wed Nov 19 17:27:35 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 19 17:27:47 2008
Subject: [gdal-dev] "gdalwarp -te " units of source or target srs?
Message-ID: <492492D7.1010207@gov.yk.ca>

Hello,

With regards to gdalwarp target_extent parameter, are the coords for the 
target coordinate system or the source coordinate system?
from http://www.gdal.org/gdalwarp.html:

    -te xmin ymin xmax ymax:
        set georeferenced extents of output file to be created.

I ask because I'm getting "ERROR 1: Attempt to create 11158x-7438 
dataset is illegal,sizes must be larger than zero." and I don't know 
whether it's because both the source and targe SRS have negative coords 
in their extent or my clipping coords are out of bounds or something else.

gdalwarp -t_srs %dst_proj% in.tif out.tif -te -2949.031, 1322540.680 
1002042.239,  652516.412
Creating output file that is 11158P x -7438L.
ERROR 1: Attempt to create 11158x-7438 dataset is illegal,sizes must be 
larger than zero.

gdalinfo in.tif
...snip
Upper Left  ( -500395.349, 1930874.566) (159d17'52.58"W, 69d54'34.69"N)
Lower Left  ( -500395.349,   -6735.434) (147d27'23.12"W, 53d20'24.33"N)
Upper Right ( 1556734.651, 1930874.566) (104d22'44.55"W, 69d41'49.51"N)
Lower Right ( 1556734.651,   -6735.434) (116d44'4.97"W, 53d13'1.10"N)
Center      (  528169.651,  962069.566) (131d56'26.40"W, 63d 8'54.60"N)

gdalinfo out_tif_template.tif
...snip
Upper Left  (   -3009.232, 1322710.243) (152d 7'23.36"W, 65d59'29.18"N)
Lower Left  (   -3009.232,  652571.483) (150d 2'48.82"W, 60d 3'7.24"N)
Upper Right ( 1002049.121, 1322710.243) (129d53'51.55"W, 65d59'34.53"N)
Lower Right ( 1002049.121,  652571.483) (131d58'12.52"W, 60d 3'11.61"N)
Center      (  499519.945,  987640.863) (141d 0'34.57"W, 63d22'43.99"N)


thanks,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------
From warmerdam at pobox.com  Wed Nov 19 17:32:26 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 19 17:33:25 2008
Subject: [gdal-dev] "gdalwarp -te " units of source or target srs?
In-Reply-To: <492492D7.1010207@gov.yk.ca>
References: <492492D7.1010207@gov.yk.ca>
Message-ID: <492493FA.4000702@pobox.com>

Matt Wilkie wrote:
> Hello,
> 
> With regards to gdalwarp target_extent parameter, are the coords for the 
> target coordinate system or the source coordinate system?
> from http://www.gdal.org/gdalwarp.html:
> 
>    -te xmin ymin xmax ymax:
>        set georeferenced extents of output file to be created.
> 
> I ask because I'm getting "ERROR 1: Attempt to create 11158x-7438 
> dataset is illegal,sizes must be larger than zero." and I don't know 
> whether it's because both the source and targe SRS have negative coords 
> in their extent or my clipping coords are out of bounds or something else.
> 
> gdalwarp -t_srs %dst_proj% in.tif out.tif -te -2949.031, 1322540.680 
> 1002042.239,  652516.412
> Creating output file that is 11158P x -7438L.
> ERROR 1: Attempt to create 11158x-7438 dataset is illegal,sizes must be 
> larger than zero.

Matt,

The -te arguments are in the output file coordinate system.

In your case the ymin value is larger than ymax which is causing
confusion.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From chapmanm at pixia.com  Wed Nov 19 17:50:27 2008
From: chapmanm at pixia.com (chapmanm@pixia.com)
Date: Wed Nov 19 17:36:22 2008
Subject: [gdal-dev] "gdalwarp -te " units of source or target srs?
Message-ID: <1864137292-1227134115-cardhu_decombobulator_blackberry.rim.net-176620081-@bxe139.bisx.prod.on.blackberry>

Matt,

I am guessing here, but negative values for a linear coordinate system sound wrong.  For an angular coordinate system (i.e. Wgs84) that use decimal degrees it would be correct but for a projected system I thought the purpose of a false easting and false northing was to avoid negative values?

Martin

------Original Message------
From: Matt Wilkie
Sender: gdal-dev-bounces@lists.osgeo.org
To: gdal-dev@lists.osgeo.org
Sent: Nov 19, 2008 3:27 PM
Subject: [gdal-dev] "gdalwarp -te " units of source or target srs?

Hello,

With regards to gdalwarp target_extent parameter, are the coords for the 
target coordinate system or the source coordinate system?
from http://www.gdal.org/gdalwarp.html:

    -te xmin ymin xmax ymax:
        set georeferenced extents of output file to be created.

I ask because I'm getting "ERROR 1: Attempt to create 11158x-7438 
dataset is illegal,sizes must be larger than zero." and I don't know 
whether it's because both the source and targe SRS have negative coords 
in their extent or my clipping coords are out of bounds or something else.

gdalwarp -t_srs %dst_proj% in.tif out.tif -te -2949.031, 1322540.680 
1002042.239,  652516.412
Creating output file that is 11158P x -7438L.
ERROR 1: Attempt to create 11158x-7438 dataset is illegal,sizes must be 
larger than zero.

gdalinfo in.tif
...snip
Upper Left  ( -500395.349, 1930874.566) (159d17'52.58"W, 69d54'34.69"N)
Lower Left  ( -500395.349,   -6735.434) (147d27'23.12"W, 53d20'24.33"N)
Upper Right ( 1556734.651, 1930874.566) (104d22'44.55"W, 69d41'49.51"N)
Lower Right ( 1556734.651,   -6735.434) (116d44'4.97"W, 53d13'1.10"N)
Center      (  528169.651,  962069.566) (131d56'26.40"W, 63d 8'54.60"N)

gdalinfo out_tif_template.tif
...snip
Upper Left  (   -3009.232, 1322710.243) (152d 7'23.36"W, 65d59'29.18"N)
Lower Left  (   -3009.232,  652571.483) (150d 2'48.82"W, 60d 3'7.24"N)
Upper Right ( 1002049.121, 1322710.243) (129d53'51.55"W, 65d59'34.53"N)
Lower Right ( 1002049.121,  652571.483) (131d58'12.52"W, 60d 3'11.61"N)
Center      (  499519.945,  987640.863) (141d 0'34.57"W, 63d22'43.99"N)


thanks,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


Sent via BlackBerry by AT&T
From even.rouault at mines-paris.org  Wed Nov 19 17:36:31 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 19 17:36:35 2008
Subject: [gdal-dev] "gdalwarp -te " units of source or target srs?
In-Reply-To: <492492D7.1010207@gov.yk.ca>
References: <492492D7.1010207@gov.yk.ca>
Message-ID: <200811192336.31719.even.rouault@mines-paris.org>

I believe that -te coordinates must be expressed in target coordinate system

And I guess that the reason for the negative height is that you have switched 
ymin and ymax in your command line (1322540.680 > 652516.412).

Le Wednesday 19 November 2008 23:27:35 Matt Wilkie, vous avez ?crit?:
> Hello,
>
> With regards to gdalwarp target_extent parameter, are the coords for the
> target coordinate system or the source coordinate system?
> from http://www.gdal.org/gdalwarp.html:
>
>     -te xmin ymin xmax ymax:
>         set georeferenced extents of output file to be created.
>
> I ask because I'm getting "ERROR 1: Attempt to create 11158x-7438
> dataset is illegal,sizes must be larger than zero." and I don't know
> whether it's because both the source and targe SRS have negative coords
> in their extent or my clipping coords are out of bounds or something else.
>
> gdalwarp -t_srs %dst_proj% in.tif out.tif -te -2949.031, 1322540.680
> 1002042.239,  652516.412
> Creating output file that is 11158P x -7438L.
> ERROR 1: Attempt to create 11158x-7438 dataset is illegal,sizes must be
> larger than zero.
>
> gdalinfo in.tif
> ...snip
> Upper Left  ( -500395.349, 1930874.566) (159d17'52.58"W, 69d54'34.69"N)
> Lower Left  ( -500395.349,   -6735.434) (147d27'23.12"W, 53d20'24.33"N)
> Upper Right ( 1556734.651, 1930874.566) (104d22'44.55"W, 69d41'49.51"N)
> Lower Right ( 1556734.651,   -6735.434) (116d44'4.97"W, 53d13'1.10"N)
> Center      (  528169.651,  962069.566) (131d56'26.40"W, 63d 8'54.60"N)
>
> gdalinfo out_tif_template.tif
> ...snip
> Upper Left  (   -3009.232, 1322710.243) (152d 7'23.36"W, 65d59'29.18"N)
> Lower Left  (   -3009.232,  652571.483) (150d 2'48.82"W, 60d 3'7.24"N)
> Upper Right ( 1002049.121, 1322710.243) (129d53'51.55"W, 65d59'34.53"N)
> Lower Right ( 1002049.121,  652571.483) (131d58'12.52"W, 60d 3'11.61"N)
> Center      (  499519.945,  987640.863) (141d 0'34.57"W, 63d22'43.99"N)
>
>
> thanks,


From matt.wilkie at gov.yk.ca  Wed Nov 19 18:25:18 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 19 18:25:23 2008
Subject: [gdal-dev] "gdalwarp -te " units of source or target srs?
In-Reply-To: <492493FA.4000702@pobox.com>
References: <492492D7.1010207@gov.yk.ca> <492493FA.4000702@pobox.com>
Message-ID: <4924A05E.2070508@gov.yk.ca>

Thanks Even and Frank, you are right I had the order of the coordinate 
pairs backwards, Upper-Left Lower-Right instead of L.Left U.Right. I'm 
used to using gdal_translate -projwin which uses the former. Is there 
any hope of harmonizing the parameters across the utilities so they all 
use the same order?

 > The -te arguments are in the output file coordinate system.

Perhaps this could be added to http://www.gdal.org/gdalwarp.html for 
clarification.


thanks again! (I was really pulling my hair out)


matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


Frank Warmerdam wrote:
> 
> The -te arguments are in the output file coordinate system.
> 
> In your case the ymin value is larger than ymax which is causing
> confusion.
> 
> Best regards,
From Sjur.A.Kolberg at sintef.no  Wed Nov 19 18:34:53 2008
From: Sjur.A.Kolberg at sintef.no (Kolberg Sjur A)
Date: Wed Nov 19 18:35:01 2008
Subject: [gdal-dev] (no subject)
Message-ID: <AC3559779B145744A3FA06C52D00BD0F04196DE8@SINTEFXCH01.sintef.no>

Hello, list,
 
I have a GDAL warp operation creating only missing-values in the target
map, 
suggesting that the area I want to warp to is not covered by the
original image.
 
Trying to to trace the error, I find a strange behaviour of the 
GDALSuggestedWarpOutput() call: The resulting target GeoTransform array
has 
(almost) exactly the same values as the source GeoTransform, even though
the 
projections are different.
 
Using GDAL 1.6.0b1 under Windows, I have the following code
 
void *hTransformArg = GDALCreateGenImgProjTransformer( pSrc, 
 
(LPCTSTR) inWKT, 
 
NULL,
 
(LPCTSTR) outWKT, 
 
FALSE, 0, 1 );
CPLAssert( hTransformArg != NULL );
if (GDALSuggestedWarpOutput( pSrc, // GDALDataset
                                                GDALGenImgProjTransform,
// function
                                                hTransformArg, // void
pointer
                                                adfDstGeoTransform, //
double *
                                                &nPixels, // int *
                                                &nLines ) // int *
!= CE_None ) 
{
    AfxMessageBox("GDALSuggestedWarpOutput failed");
    return NULL;
}
 
Prior to the GDALCreateGenImgProjTransformer() call, inWKT is
 
PROJCS["unnamed",GEOGCS["Normal Sphere (r=6370997)",
DATUM["unknown",SPHEROID["sphere",6370997,0]],
PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],
PROJECTION["Polar_Stereographic"],
PARAMETER["latitude_of_origin",60],
PARAMETER["central_meridian",0],
PARAMETER["scale_factor",1],
PARAMETER["false_easting",0],
PARAMETER["false_northing",0],
UNIT["Meter",1]]
 
whereas outWKT is
 
PROJCS["UTM 32 North (WGS84)",PROJECTION["Transverse_Mercator"],
PARAMETER["latitude_of_origin",0],
PARAMETER["central_meridian",9],
PARAMETER["scale_factor",0.9996],
PARAMETER["false_easting",500000],
PARAMETER["false_northing",0],UNIT["Meter",1]]
 
The source GeoTransform matrix is:
- adfGeoTransform 0x0e3eaf58 double [6]
[0] 255106.00000000000 double
[1] 1000.0000000000000 double
[2] 0.00000000000000000 double
[3] -2511133.0000000000 double
[4] 0.00000000000000000 double
[5] -1000.0000000000000 double
 
while after the GDALSuggestedWarpOutput call, the destination
GeoTransform is:
- adfDstGeoTransform,6 0x042bdd18 double [6]
[0] 255106.00000000000 double
[1] 999.99999999999989 double
[2] 0.00000000000000000 double
[3] -2511133.0000000000 double
[4] 0.00000000000000000 double
[5] -999.99999999999989 double
which is a mere copy of the source numbers.
 
As I afterwards specify the transform I want for the warped image:
- adfDstGeoTransform,6 0x042bdd18 double [6]
[0] 330000.00000000000 double
[1] 1000.0000000000000 double
[2] 0.00000000000000000 double
[3] 7280000.0000000000 double
[4] 0.00000000000000000 double
[5] -1000.0000000000000 double
 
...my specified UL-Y [3] (7280000) is pretty far from the suggested
-2511133.
Can this be a cause to my resulting image being empty?
This has been working up to recently, but I have been working on this
code as well as changing the GDAL version.
 
Any ideas?
Best regards,
 
Sjur K :-)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081120/3d3eb090/attachment-0001.html
From warmerdam at pobox.com  Wed Nov 19 18:39:53 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 19 18:40:30 2008
Subject: [gdal-dev] "gdalwarp -te " units of source or target srs?
In-Reply-To: <4924A05E.2070508@gov.yk.ca>
References: <492492D7.1010207@gov.yk.ca> <492493FA.4000702@pobox.com>
	<4924A05E.2070508@gov.yk.ca>
Message-ID: <4924A3C9.7010102@pobox.com>

Matt Wilkie wrote:
> Thanks Even and Frank, you are right I had the order of the coordinate 
> pairs backwards, Upper-Left Lower-Right instead of L.Left U.Right. I'm 
> used to using gdal_translate -projwin which uses the former. Is there 
> any hope of harmonizing the parameters across the utilities so they all 
> use the same order?

Matt,

I am concerned that the cure (harmonizing) would be worse than the
disease due to breaking existing scripts.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From tomwebster2008 at yahoo.com  Wed Nov 19 19:05:33 2008
From: tomwebster2008 at yahoo.com (Tom Webster)
Date: Wed Nov 19 19:05:36 2008
Subject: [gdal-dev] Gdalwarp error: warping imagery with coordinates across
	the international date line
Message-ID: <359969.30484.qm@web110003.mail.gq1.yahoo.com>

I have an image with UTM coordinates across the international date line (longitude 180E or 180W) - please refer to the header information below, and now I want to convert this to a global projection Geographic WGS84 with GDALWARP. It seems the calculation for the output image size is wrong. Please confirm. Thanks.

X:\gdalinfo A.tif
Driver: GTiff/GeoTIFF
Files: X:\A.tif
Size is 19000, 95
Coordinate System is:
PROJCS["WGS 84 / UTM zone 1N",
??? GEOGCS["WGS 84",
??????? DATUM["WGS_1984",
??????????? SPHEROID["WGS 84",6378137,298.2572235630016,
??????????????? AUTHORITY["EPSG","7030"]],
??????????? AUTHORITY["EPSG","6326"]],
??????? PRIMEM["Greenwich",0],
??????? UNIT["degree",0.0174532925199433],
??????? AUTHORITY["EPSG","4326"]],
??? PROJECTION["Transverse_Mercator"],
??? PARAMETER["latitude_of_origin",0],
??? PARAMETER["central_meridian",-177],
??? PARAMETER["scale_factor",0.9996],
??? PARAMETER["false_easting",500000],
??? PARAMETER["false_northing",0],
??? UNIT["metre",1,
??????? AUTHORITY["EPSG","9001"]],
??? AUTHORITY["EPSG","32601"]]
Origin = (116287.125000000000000,276457.125000000000000)
Pixel Size = (30.000000000000000,-30.000000000000000)
Metadata:
? AREA_OR_POINT=Area
Image Structure Metadata:
? INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left? (? 116287.125,? 276457.125) (179d33'1.82"E,? 2d29'47.84"N)
Lower Left? (? 116287.125,? 273607.125) (179d33'2.06"E,? 2d28'15.19"N)
Upper Right (? 686287.125,? 276457.125) (175d19'28.34"W,? 2d30'0.37"N)
Lower Right (? 686287.125,? 273607.125) (175d19'28.46"W,? 2d28'27.59"N)
Center????? (? 401287.125,? 275032.125) (177d53'16.45"W,? 2d29'16.75"N)
Band 1 Block=19000x1 Type=Byte, ColorInterp=Red
Band 2 Block=19000x1 Type=Byte, ColorInterp=Green
Band 3 Block=19000x1 Type=Byte, ColorInterp=Blue


X:\gdalwarp -t_srs EPSG:4326 -tr 0.000277 0.000277 A.tif B.tif
Creating output file that is 1295087P x 134L.
Processing input file A.tif.
ERROR 1: Too many points (441 out of 441) failed to transform,
unable to compute output bounds.


      Make the switch to the world&#39;s best email. Get Yahoo!7 Mail! http://au.yahoo.com/y7mail
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081119/d5f66e03/attachment.html
From woodbri at swoodbridge.com  Wed Nov 19 21:44:45 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 19 21:43:38 2008
Subject: Gdal Bug?   was: Re: [gdal-dev] JP2MRSID Issues
In-Reply-To: <49247339.7050803@pobox.com>
References: <20081113114937.12FC2E0121C@lists.osgeo.org>
	<DBEC881B4E22D1449F5FAC530E1ADD12CDA6B1@sea-srv-ms3.lizardtech.com>
	<491C8CE4.5050503@swoodbridge.com> <491DACB5.9070103@pobox.com>
	<491DC609.2040304@swoodbridge.com> <491DCC88.2040100@pobox.com>
	<4920CF48.5010104@swoodbridge.com> <49247339.7050803@pobox.com>
Message-ID: <4924CF1D.6060703@swoodbridge.com>

Frank Warmerdam wrote:
> Stephen Woodbridge wrote:
>> Hi Frank,
>>
>> Sorry no joy with the patch applied. Here are the results. I had them 
>> patch and set the prefix /usr/local/swoodbridge/ and then used the 
>> following script to make sure I pulled in the new executables and 
>> libraries.
> ...
>> MrSID: RasterIO() - using optimized dataset level IO.
>> MrSID: Dataset:IRasterIO(25432,42149 5066x6973 -> 5066x6973 -> 
>> 5066x6973, zoom=1)
>> gdalwarp: ../compressed/compressed.cpp:1724: bool 
>> kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' 
>> failed.
> 
> Steve,
> 
> I confirmed the code I pointed out was buggy, but it does not appear to
> be directly responsible for your problem.  I'm not sure what else to tell
> you.  We could try and add more detailed debug output in the area of the
> IRasterIO() message but what is there seems to suggest the requested area
> will be on the database.
> 
> Best regards,

Frank,

Trying to dig a little deeper into this. I have pasted a gdb backtrace 
on the abort that I'm getting. I'm not sure if that will help.

Just a sanity check, here is a simple code change that is not reflected 
in the executable:

[swoodbridge@booboo gdal-1.5.3]$ vi ./frmts/mrsid/mrsiddataset.cpp
> CPLErr MrSIDDataset::IRasterIO( GDALRWFlag eRWFlag,
>                                 int nXOff, int nYOff, int nXSize, int nYSize,
>                                 void * pData, int nBufXSize, int nBufYSize,
>                                 GDALDataType eBufType,
>                                 int nBandCount, int *panBandMap,
>                                 int nPixelSpace, int nLineSpace, int nBandSpace )
> 
> {
> /* -------------------------------------------------------------------- */
> /*      We need various criteria to skip out to block based methods.    */
> /* -------------------------------------------------------------------- */
>     int bUseBlockedIO = bForceCachedIO;
> 
>     if( nYSize == 1 || nXSize * ((double) nYSize) < 100.0 )
>         bUseBlockedIO = TRUE;
> 
>     if( nBufYSize == 1 || nBufXSize * ((double) nBufYSize) < 100.0 )
>         bUseBlockedIO = TRUE;
> 
>     if( CSLTestBoolean( CPLGetConfigOption( "GDAL_ONE_BIG_READ", "NO") ) )
>         bUseBlockedIO = FALSE;
> 
>     CPLDebug( "MrSID", "RasterIO() - bUseBlockedIO=%d", bUseBlockedIO );

########### I added this statement ^
########### I assume this should print with --debug on the command line.

>     if( bUseBlockedIO )
>         return GDALDataset::BlockBasedRasterIO(
>             eRWFlag, nXOff, nYOff, nXSize, nYSize,
>             pData, nBufXSize, nBufYSize, eBufType,
>             nBandCount, panBandMap, nPixelSpace, nLineSpace, nBandSpace );
>     CPLDebug( "MrSID", "RasterIO() - using optimized dataset level IO." );
> 

make
make install

I get new files in PREFIX=/usr/local/swoodbridge/
and ran it as below, but do not get that new line to print! Should this 
line be executing? I ran strace and got:

open("/usr/local/swoodbridge/lib/libgdal.so.1", O_RDONLY) = 3

and checked all the other opens and it looks like the correct files are 
all getting loaded.


gdb /usr/local/swoodbridge/bin/gdalwarp
(gdb) set env LD_LIBRARY_PATH /usr/local/swoodbridge/lib
(gdb) set env GDAL_SKIP JPEG2000
(gdb) break main
(gdb) run -srcnodata 0 -dstnodata 0 -s_srs +init=epsg:26915 -t_srs 
EPSG:4326 -te -93.5 43.8125 -93.4375 43.875 -rb -wm 250 --config 
GDAL_ONE_BIG_READ ON -co "TILED=YES" --debug on tmp.vrt out.tif
[Thread debugging using libthread_db enabled]
[New Thread -1208879424 (LWP 30108)]
[Switching to Thread -1208879424 (LWP 30108)]

Breakpoint 1, main (argc=26, argv=0xbfe4f8c4) at gdalwarp.cpp:107
(gdb) c
Continuing.
MrSID: Opened zoom level 1 with size 18005x24724.

MrSID: Opened zoom level 2 with size 9003x12362.

MrSID: Opened zoom level 3 with size 4502x6181.

MrSID: Opened zoom level 4 with size 2251x3091.

MrSID: Opened zoom level 5 with size 1126x1546.

MrSID: Opened zoom level 6 with size 563x773.

MrSID: Opened zoom level 7 with size 282x387.

MrSID: Opened zoom level 8 with size 141x194.

MrSID: Opened zoom level 9 with size 71x97.

MrSID: Opened zoom level 10 with size 36x49.

MrSID: Opened zoom level 0 with size 36010x49447.

MrSID: Opened image: width 36010, height 49447, bands 4
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux) 
succeeds as HFA.
GDAL: 
GDALClose(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux)
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2) 
succeeds as JP2MrSID.
GDAL: GDALOpen(tmp.vrt) succeeds as VRT.
OGRCT: Source: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
OGRCT: Target: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Source: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Target: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
GDAL: GDALClose(tmp.vrt)
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: GDALClose()
GDAL: 
GDALClose(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2)
Creating output file that is 6029P x 6029L.
GDAL: QuietDelete(out.tif) invoking Delete()
ERROR 4: `out.tif' not recognised as a supported file format.

GDAL: GDALDriver::Create(GTiff,out.tif,6029,6029,3,Byte,0x933ac50)
MrSID: Opened zoom level 1 with size 18005x24724.

MrSID: Opened zoom level 2 with size 9003x12362.

MrSID: Opened zoom level 3 with size 4502x6181.

MrSID: Opened zoom level 4 with size 2251x3091.

MrSID: Opened zoom level 5 with size 1126x1546.

MrSID: Opened zoom level 6 with size 563x773.

MrSID: Opened zoom level 7 with size 282x387.

MrSID: Opened zoom level 8 with size 141x194.

MrSID: Opened zoom level 9 with size 71x97.

MrSID: Opened zoom level 10 with size 36x49.

MrSID: Opened zoom level 0 with size 36010x49447.

MrSID: Opened image: width 36010, height 49447, bands 4
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux) 
succeeds as HFA.
GDAL: 
GDALClose(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.aux)
GDAL: 
GDALOpen(/var/data/raw_data/minnesota/ortho_1-1_1m_j_mn161_2008_1.jp2) 
succeeds as JP2MrSID.
GDAL: GDALOpen(tmp.vrt) succeeds as VRT.
Processing input file tmp.vrt.
OGRCT: Source: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
OGRCT: Target: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Source: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Target: +proj=utm +zone=15 +ellps=GRS80 +datum=NAD83 +units=m 
+no_defs
MrSID: RasterIO() - using optimized dataset level IO.
MrSID: Dataset:IRasterIO(25432,42149 5066x6973 -> 5066x6973 -> 
5066x6973, zoom=1)
gdalwarp: ../compressed/compressed.cpp:1724: bool 
kd_tile::read_tile_part_header(): Assertion `tpart_body_length >= 0' failed.

Program received signal SIGABRT, Aborted.
0x008a57a2 in _dl_sysinfo_int80 () from /lib/ld-linux.so.2
(gdb) bt
#0  0x008a57a2 in _dl_sysinfo_int80 () from /lib/ld-linux.so.2
#1  0x008e6825 in raise () from /lib/tls/libc.so.6
#2  0x008e8289 in abort () from /lib/tls/libc.so.6
#3  0x008dfda1 in __assert_fail () from /lib/tls/libc.so.6
#4  0x005caa29 in kd_tile::read_tile_part_header ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#5  0x005cc28a in kdu_subband::open_block ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#6  0x006206a3 in kd_decoder::decode_row_of_blocks ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#7  0x0062123b in kd_decoder::pull ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#8  0x0061a976 in kd_synthesis::horizontal_synthesis ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#9  0x0061b84d in kd_synthesis::pull ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#10 0x005ff50c in kdsd_tile::process ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#11 0x00600883 in kdu_stripe_decompressor::pull_common ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#12 0x00600a8f in kdu_stripe_decompressor::pull_stripe ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#13 0x005195ec in LizardTech::JPCReader::doDecodeU8 ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#14 0x005197a3 in LizardTech::JPCReader::decodeStrip_kak ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#15 0x005197d8 in LizardTech::JPCReader::decodeStrip ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#16 0x0051de40 in LizardTech::Jpeg2000Reader::decodeStrip ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#17 0x005171ae in LizardTech::J2KImageReader::decodeStrip ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#18 0x0052b2bd in LizardTech::LTIImageStage::readStrip ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#19 0x0052b5d3 in LizardTech::LTIImageStage::read ()
    from /usr/local/swoodbridge/lib/libgdal.so.1
#20 0x0032fe8a in MrSIDDataset::IRasterIO (this=0x93e3d48, eRWFlag=GF_Read,
     nXOff=25432, nYOff=42149, nXSize=5066, nYSize=6973, pData=0xab0fa008,
     nBufXSize=5066, nBufYSize=6973, eBufType=GDT_Byte, nBandCount=1,
     panBandMap=0x93e7d38, nPixelSpace=1, nLineSpace=5066, nBandSpace=0)
     at mrsiddataset.cpp:856
#21 0x0032efd3 in MrSIDRasterBand::IRasterIO (this=0x93e7d20, 
eRWFlag=GF_Read,
     nXOff=25432, nYOff=42149, nXSize=5066, nYSize=6973, pData=0xab0fa008,
     nBufXSize=5066, nBufYSize=6973, eBufType=GDT_Byte, nPixelSpace=1,
     nLineSpace=5066) at mrsiddataset.cpp:523
#22 0x003f3dd4 in GDALRasterBand::RasterIO (this=0x93e7d20, eRWFlag=GF_Read,
     nXOff=25432, nYOff=42149, nXSize=5066, nYSize=6973, pData=0xab0fa008,
     nBufXSize=5066, nBufYSize=6973, eBufType=GDT_Byte, nPixelSpace=6,
     nLineSpace=5066) at gdalrasterband.cpp:235
#23 0x003d4d76 in VRTSimpleSource::RasterIO (this=0x933bcd8, nXOff=25432,
     nYOff=42149, nXSize=5066, nYSize=6973, pData=0xab0fa008, 
nBufXSize=5066,
     nBufYSize=6973, eBufType=GDT_Byte, nPixelSpace=1, nLineSpace=5066)
     at vrtsources.cpp:518
#24 0x003d3144 in VRTSourcedRasterBand::IRasterIO (this=0x933b9d8,
     eRWFlag=GF_Read, nXOff=25432, nYOff=42149, nXSize=5066, nYSize=6973,
---Type <return> to continue, or q <return> to quit---
     pData=0xab0fa008, nBufXSize=5066, nBufYSize=6973, eBufType=GDT_Byte,
     nPixelSpace=1, nLineSpace=5066) at vrtsourcedrasterband.cpp:176
#25 0x003e0712 in GDALDataset::IRasterIO (this=0x933b178, eRWFlag=GF_Read,
     nXOff=25432, nYOff=42149, nXSize=5066, nYSize=6973, pData=0xab0fa008,
     nBufXSize=5066, nBufYSize=6973, eBufType=GDT_Byte, nBandCount=3,
     panBandMap=0x9335888, nPixelSpace=1, nLineSpace=5066, 
nBandSpace=35325218)
     at gdaldataset.cpp:1239
#26 0x003e09f9 in GDALDataset::RasterIO (this=0x933b178, eRWFlag=GF_Read,
     nXOff=25432, nYOff=42149, nXSize=5066, nYSize=6973, pData=0xab0fa008,
     nBufXSize=5066, nBufYSize=6973, eBufType=GDT_Byte, nBandCount=3,
     panBandMap=0x9335888, nPixelSpace=1, nLineSpace=5066, 
nBandSpace=35325218)
     at gdaldataset.cpp:1430
#27 0x003e0a8d in GDALDatasetRasterIO (hDS=0x0, eRWFlag=GF_Read, 
nXOff=25432,
     nYOff=42149, nXSize=5066, nYSize=6973, pData=0xab0fa008, 
nBufXSize=5066,
     nBufYSize=6973, eBufType=GDT_Byte, nBandCount=3, panBandMap=0x9335888,
     nPixelSpace=0, nLineSpace=0, nBandSpace=0) at gdaldataset.cpp:1467
#28 0x00426575 in GDALWarpOperation::WarpRegionToBuffer (this=0xbfe4f750,
     nDstXOff=0, nDstYOff=0, nDstXSize=6029, nDstYSize=6029,
     pDataBuf=0xb160b008, eBufDataType=GDT_Byte, nSrcXOff=25432,
     nSrcYOff=42149, nSrcXSize=30108, nSrcYSize=6) at 
gdalwarpoperation.cpp:1319
#29 0x0042718d in GDALWarpOperation::WarpRegion (this=0xbfe4f750, 
nDstXOff=0,
     nDstYOff=0, nDstXSize=6029, nDstYSize=6029, nSrcXOff=25432,
     nSrcYOff=42149, nSrcXSize=5066, nSrcYSize=6973)
     at gdalwarpoperation.cpp:1151
#30 0x004274d1 in GDALWarpOperation::ChunkAndWarpImage (this=0xbfe4f750,
     nDstXOff=0, nDstYOff=0, nDstXSize=6029, nDstYSize=6029)
     at gdalwarpoperation.cpp:625
#31 0x0804d088 in main (argc=Variable "argc" is not available.
) at gdalwarp.cpp:695

From maphew at gmail.com  Thu Nov 20 01:35:15 2008
From: maphew at gmail.com (Matt Wilkie)
Date: Thu Nov 20 01:35:19 2008
Subject: [gdal-dev] make error: a bug report, mailing list Q, or RTFM?
Message-ID: <c61d98af0811192235pdafc938ud325ed4025b1b807@mail.gmail.com>

Hello,

I'm trying to compile svn gdal on Ubuntu 8.10 in order to take
advantage of some of the recent things in 1.6. I'm getting an error
with make when " --with-unix-stdio-64=yes" is used , pasted below.
Make is successful when I don't use it. Is this kind of thing a bug
report, a question for the mailing list, or so much noise from someone
who really should be using binaries or RTFMing?

thanks,

-matt

svn r15769

$ export CFLAGS="-mtune=athlon64 -O2"

$ auto-apt run ./configure \
  --with-unix-stdio-64=yes \
  --with-libtiff=internal

...snip
GDAL is now configured for x86_64-unknown-linux-gnu

  Installation directory:    /usr/local
  C compiler:                gcc -mtune=athlon64 -O2
  C++ compiler:              g++ -g -O2

  LIBTOOL support:           yes

  LIBZ support:              external
  GRASS support:             no
  CFITSIO support:           no
  PCRaster support:          internal
  NetCDF support:            no
  LIBPNG support:            external
  LIBTIFF support:           internal (BigTIFF=yes)
  LIBGEOTIFF support:        internal
  LIBJPEG support:           external
  LIBGIF support:            external
  OGDI support:              no
  HDF4 support:              no
  HDF5 support:              no
  Kakadu support:            no
  JasPer support:            yes (GeoJP2=yes)
  ECW support:               no
  MrSID support:             no
  MSG support:               no
  GRIB support:              yes
  cURL support (wms/wcs/...):no
  PostgreSQL support:        yes
  MySQL support:             no
  Ingres support:            no
  Xerces-C support:          no
  NAS support:               no
  Expat support:             yes
  ODBC support:              no
  PGeo support:              no
  OCI support:               no
  SDE support:               no
  DODS support:              no
  SQLite support:            yes
  DWGdirect support          no
  PANORAMA GIS support:      no
  INFORMIX DataBlade support:no
  GEOS support:              no


  Old-gen python          no
  SWIG Bindings:          no

  Statically link PROJ.4:    no
  enable OGR building:       yes
  enable pthread support:    no
  hide internal symbols:     no

$ make
...snip
(cd port; make)
make[1]: Entering directory `/usr/local/src/gdal/port'
/bin/sh /usr/local/src/gdal/libtool --mode=compile --tag=CXX g++ -g
-O2  -Wall  -DOGR_ENABLED -I/usr/local/src/gdal/port 	 -I../frmts/zlib
-DHAVE_LIBZ -c -o cpl_vsil_unix_stdio_64.o cpl_vsil_unix_stdio_64.cpp
libtool: compile:  g++ -g -O2 -Wall -DOGR_ENABLED
-I/usr/local/src/gdal/port -I../frmts/zlib -DHAVE_LIBZ -c
cpl_vsil_unix_stdio_64.cpp  -fPIC -DPIC -o
.libs/cpl_vsil_unix_stdio_64.o
cpl_vsil_unix_stdio_64.cpp: In member function 'virtual int
VSIUnixStdioHandle::Seek(vsi_l_offset, int)':
cpl_vsil_unix_stdio_64.cpp:149: error: 'fseek64' was not declared in this scope
cpl_vsil_unix_stdio_64.cpp: In member function 'virtual vsi_l_offset
VSIUnixStdioHandle::Tell()':
cpl_vsil_unix_stdio_64.cpp:188: error: 'ftell64' was not declared in this scope
make[1]: *** [cpl_vsil_unix_stdio_64.o] Error 1
make[1]: Leaving directory `/usr/local/src/gdal/port'
make: *** [port-target] Error 2


-- 
-matt
From j.l.h.hartmann at uva.nl  Thu Nov 20 08:09:55 2008
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu Nov 20 08:10:59 2008
Subject: [gdal-dev] "gdalwarp -te " units of source or target srs?
Message-ID: <492561A3.90600@uva.nl>

It *is* a teaser, though. Considering that in the current situation 
-projwin always has y1 larger than y2, and all other parameters are 
always the reverse, couldn't  you harmonise -projwin by testing for y1 > 
y2 and reversing the y's? This would keep existing scripts working.

Jan

Frank Warmerdam wrote:
 > Matt Wilkie wrote:
 >> Thanks Even and Frank, you are right I had the order of the 
coordinate pairs backwards, Upper-Left Lower-Right instead of L.Left 
U.Right. I'm used to using gdal_translate -projwin which uses the 
former. Is there any hope of harmonizing the parameters across the 
utilities so they all use the same order?
 >
 > Matt,
 >
 > I am concerned that the cure (harmonizing) would be worse than the
 > disease due to breaking existing scripts.
 >
 > Best regards,


From iaelliott at gmail.com  Thu Nov 20 10:43:50 2008
From: iaelliott at gmail.com (Ian Elliott)
Date: Thu Nov 20 10:43:52 2008
Subject: [gdal-dev] Nearest Neighbour resampling
In-Reply-To: <mailman.1195.1227194035.23808.gdal-dev@lists.osgeo.org>
References: <mailman.1195.1227194035.23808.gdal-dev@lists.osgeo.org>
Message-ID: <7765ea640811200743q7db5af22k14924c384fa2c6d5@mail.gmail.com>

Hi,

An error is consistently occurring when I use the nearest neighbour
technique to resample an 8-bit paletted image.

Please see this page for an example:
http://projects.exeter.ac.uk/msel/personnel/iae/gdal/
(The resampling error is shown in image c).

A possible solution I have discovered is to use 'Majority' resampling,
but this is not available in gdal.

Can anyone suggest why this is happening?

Thank you,

Ian
From warmerdam at pobox.com  Thu Nov 20 11:05:53 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Nov 20 11:06:44 2008
Subject: [gdal-dev] Nearest Neighbour resampling
In-Reply-To: <7765ea640811200743q7db5af22k14924c384fa2c6d5@mail.gmail.com>
References: <mailman.1195.1227194035.23808.gdal-dev@lists.osgeo.org>
	<7765ea640811200743q7db5af22k14924c384fa2c6d5@mail.gmail.com>
Message-ID: <49258AE1.8040007@pobox.com>

Ian Elliott wrote:
> Hi,
> 
> An error is consistently occurring when I use the nearest neighbour
> technique to resample an 8-bit paletted image.
> 
> Please see this page for an example:
> http://projects.exeter.ac.uk/msel/personnel/iae/gdal/
> (The resampling error is shown in image c).
> 
> A possible solution I have discovered is to use 'Majority' resampling,
> but this is not available in gdal.
> 
> Can anyone suggest why this is happening?

Ian,

I see the png files on the web site are RGB, and so apparently not the
original source data.  I do not know why nearest neighbour resampling would
give the effect you are seeing.  I think you will need to provide details
on how you accomplished the downsampling (along with the original data)
for me to say more.

There is no majority resampler in gdalwarp or gdal_translate.  GDAL 1.6
does include the MODE resampler for computing overviews with gdaladdo which
I imagine is the same thing as the majority resampler.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Steven.Mullins at dmme.virginia.gov  Thu Nov 20 11:12:43 2008
From: Steven.Mullins at dmme.virginia.gov (Mullins, Steven)
Date: Thu Nov 20 11:13:09 2008
Subject: [gdal-dev] SHP to CSV
Message-ID: <1C6192D3F2755C45A2D0658D6FE5ED8303C237B1@exch2k1.dmmenet.mme.state.va.us>

Using: GDAL 1.6.0dev, FWTools 2.2.1, released 2008/06/17


ogr2ogr -f csv test_geo geology-all.shp -lco GEOMETRY=AS_XY

Dumps a CSV file with the attributes of the shape, but with no
coordinate fields per the "GEOMETRY=AS_XY" options.  The shape 
does have point geometry.  

Any ideas why this would not work?

Thanks,

Steve
From warmerdam at pobox.com  Thu Nov 20 11:13:34 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Nov 20 11:14:28 2008
Subject: [gdal-dev] "gdalwarp -te " units of source or target srs?
In-Reply-To: <492561A3.90600@uva.nl>
References: <492561A3.90600@uva.nl>
Message-ID: <49258CAE.9010004@pobox.com>

Jan Hartmann wrote:
> It *is* a teaser, though. Considering that in the current situation 
> -projwin always has y1 larger than y2, and all other parameters are 
> always the reverse, couldn't  you harmonise -projwin by testing for y1 > 
> y2 and reversing the y's? This would keep existing scripts working.

Jan,

Perhaps.

One thing I'm concerned about is whether things will continue to work if you
have an "upside down" image - one for which the sixth geotransform[] value is
positive instead of the more conventional negative.

Of course, for such images the concept of ymin and ymax will no longer be
strictly accurate either.

I blame it all on the guy who implemented -projwin!  (sorry, that's a bit
of a joke since I think it was Matt).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Nov 20 11:22:18 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Nov 20 11:23:01 2008
Subject: [gdal-dev] SHP to CSV
In-Reply-To: <1C6192D3F2755C45A2D0658D6FE5ED8303C237B1@exch2k1.dmmenet.mme.state.va.us>
References: <1C6192D3F2755C45A2D0658D6FE5ED8303C237B1@exch2k1.dmmenet.mme.state.va.us>
Message-ID: <49258EBA.7060607@pobox.com>

Mullins, Steven wrote:
> Using: GDAL 1.6.0dev, FWTools 2.2.1, released 2008/06/17
> 
> 
> ogr2ogr -f csv test_geo geology-all.shp -lco GEOMETRY=AS_XY
> 
> Dumps a CSV file with the attributes of the shape, but with no
> coordinate fields per the "GEOMETRY=AS_XY" options.  The shape 
> does have point geometry.  
> 
> Any ideas why this would not work?

Steve,

The GEOMETRY=AS_XY support was only implemented within the last couple
weeks and is not in the released FWTools (date June 2008).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From matt.wilkie at gov.yk.ca  Thu Nov 20 13:47:51 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Thu Nov 20 13:47:57 2008
Subject: [gdal-dev] "gdalwarp -te " units of source or target srs?
In-Reply-To: <49258CAE.9010004@pobox.com>
References: <492561A3.90600@uva.nl> <49258CAE.9010004@pobox.com>
Message-ID: <4925B0D7.5020006@gov.yk.ca>

> I blame it all on the guy who implemented -projwin!  (sorry, that's a
> bit of a joke since I think it was Matt).

:):) Let's not carried away now, I *lobbied* for it (another word for 
nagged) pretty hard but didn't write any code. That is still somewhat 
beyond my skillset. Thank you for the kind upward estimation of my 
coding ability though!

cheers,

matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------



From Steven.Mullins at dmme.virginia.gov  Thu Nov 20 15:49:09 2008
From: Steven.Mullins at dmme.virginia.gov (Mullins, Steven)
Date: Thu Nov 20 15:50:09 2008
Subject: [gdal-dev] SHP to CSV
Message-ID: <1C6192D3F2755C45A2D0658D6FE5ED8304C397FF@exch2k1.dmmenet.mme.state.va.us>

Frank,

That makes sense ;).  I just threw a perl script togther (using Geo::GDAL) to do it instead.

Thanks,

Steve

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Thu, November 20, 2008 11:22 AM
To: Mullins, Steven
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] SHP to CSV


Mullins, Steven wrote:
> Using: GDAL 1.6.0dev, FWTools 2.2.1, released 2008/06/17
> 
> 
> ogr2ogr -f csv test_geo geology-all.shp -lco GEOMETRY=AS_XY
> 
> Dumps a CSV file with the attributes of the shape, but with no
> coordinate fields per the "GEOMETRY=AS_XY" options.  The shape 
> does have point geometry.  
> 
> Any ideas why this would not work?

Steve,

The GEOMETRY=AS_XY support was only implemented within the last couple
weeks and is not in the released FWTools (date June 2008).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Tom.Kralidis at ec.gc.ca  Fri Nov 21 07:17:24 2008
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Fri Nov 21 07:17:25 2008
Subject: [gdal-dev] svn trunk build error
Message-ID: <DDA8F0C2655CB14DA8C7B84CDC6759A617C06C14@dowexch2.ontario.int.ec.gc.ca>


using:

./configure --with-png --with-libtiff=internal --with-geotiff=internal
--with-jpeg --with-xerces --with-geos=no --with-pg=/usr/bin/pg_config
--with-mysql=/usr/bin/mysql_config -
-with-sqlite --with-curl=/usr/bin/curl-config --with-python --with-expat

on fc9

Results in:

http://rafb.net/p/hXBZxL17.html

Note that trunk was building successfully previous to this.

..Tom
From guillaume.huby.lists at gmail.com  Fri Nov 21 08:05:53 2008
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Fri Nov 21 08:05:57 2008
Subject: [gdal-dev] Building with Visual Studio Express 2008
Message-ID: <ddc797c30811210505k3f2f0c4doe7147bf7e732dbe4@mail.gmail.com>

Hello,

I am trying to build GDAL 1.6.0 beta2  (same result with 1.5.3) with Visual
Studio Express 2008.

Everything went fine until I get this message :

vb6_support.cpp(35) : fatal error C1083: Impossible to open include file :
> 'atlbase.h' : No such file or directory


Looking on the web I fall on http://www.gdal.org/faq.html and "Can I build
GDAL with MS Visual C++ 2005 Express Edition?".

But the Microsoft SDK no longer provides ATL stuff, thus this trick is no
longer valid.

Has anybody successed building GDAL with Visual Studio Express 2008 ?

Is ther some kown turnaround ?

Thanks for your replies.

Regards,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081121/5aa0367d/attachment.html
From ivan.lucena at pmldnet.com  Fri Nov 21 09:06:54 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Fri Nov 21 09:06:59 2008
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gc3ZuIHRydW5rIGJ1aWxkIGVycm9y?=
Message-ID: <20081121140656.17485.qmail@s466.sureserver.com>

Hey all,

I made a mistake while adding a driver to the main building process on UNIX (GDALmake.opt.in).

I just fixed it and I contacted Tom, who wrote this original thread, and he confirmed the problem is gone.

Sorry for the disturbance,

Best regards,

Ivan


>  -------Original Message-------
>  From: Kralidis,Tom [Ontario] <Tom.Kralidis@ec.gc.ca>
>  Subject: [gdal-dev] svn trunk build error
>  Sent: Nov 21 '08 12:17
>  
>  
>  using:
>  
>  ./configure --with-png --with-libtiff=internal --with-geotiff=internal
>  --with-jpeg --with-xerces --with-geos=no --with-pg=/usr/bin/pg_config
>  --with-mysql=/usr/bin/mysql_config -
>  -with-sqlite --with-curl=/usr/bin/curl-config --with-python --with-expat
>  
>  on fc9
>  
>  Results in:
>  
>  http://rafb.net/p/hXBZxL17.html
>  
>  Note that trunk was building successfully previous to this.
>  
>  ..Tom
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  

From arb at sat.dundee.ac.uk  Fri Nov 21 10:41:25 2008
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Fri Nov 21 10:41:32 2008
Subject: [gdal-dev] gdal_rasterize usage problems
In-Reply-To: <f4339510811141549x7c7450f2gad3ced80a988dc7@mail.gmail.com>
References: <op.uke3kqipqw3wu1@titan>
	<f4339510811121136p7a97f819nef680ee71f1fe802@mail.gmail.com>
	<op.ukmtqcv5qw3wu1@titan>
	<f4339510811141549x7c7450f2gad3ced80a988dc7@mail.gmail.com>
Message-ID: <op.uky67beeqw3wu1@titan>

On Fri, 14 Nov 2008 23:49:59 -0000, Jamie Adams <jaadfoo@gmail.com> wrote:

> The datum change isn't sufficient, as they are using different coordinate
> systems.  They actually have to have the same SRS, otherwise gdal_rasterize
> will see 2 very different ranges of coordinates (meter vs latlong).

This is the reason why I am getting the problems which can be seen in the
first image here:   http://www.sat.dundee.ac.uk/~arb/gdal-bugs/

The "reprojection" of the vectors using ogr2ogr is badly breaking them, so
when I burn them using gdal_rasterize I get spurious lines overlaid (the
smear images on the above page).

Is this a fault of ogr2ogr, or am I using it wrongly, or is there a better
way of burning a coastline onto a raster?

Andrew

P.S. This probably won't solve the current problem but could gdal_rasterise
be enhanced with something like this:

        poCT = OGRCreateCoordinateTransformation( hSrcSRS, hDstSRS );

and then

        hGeom = OGR_G_Clone( OGR_F_GetGeometryRef( hFeat )->transform( poCT ) );

or similar ?

From warmerdam at pobox.com  Fri Nov 21 10:57:31 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov 21 10:58:20 2008
Subject: [gdal-dev] gdal_rasterize usage problems
In-Reply-To: <op.uky67beeqw3wu1@titan>
References: <op.uke3kqipqw3wu1@titan>
	<f4339510811121136p7a97f819nef680ee71f1fe802@mail.gmail.com>
	<op.ukmtqcv5qw3wu1@titan>
	<f4339510811141549x7c7450f2gad3ced80a988dc7@mail.gmail.com>
	<op.uky67beeqw3wu1@titan>
Message-ID: <4926DA6B.6080608@pobox.com>

Andrew Brooks wrote:
> This is the reason why I am getting the problems which can be seen in the
> first image here:   http://www.sat.dundee.ac.uk/~arb/gdal-bugs/
> 
> The "reprojection" of the vectors using ogr2ogr is badly breaking them, so
> when I burn them using gdal_rasterize I get spurious lines overlaid (the
> smear images on the above page).

Andrew,

If you can provide the input gshhs_land dataset and the ogr2ogr commandline
you are using, I could investigate this.

> P.S. This probably won't solve the current problem but could gdal_rasterise
> be enhanced with something like this:
> 
>         poCT = OGRCreateCoordinateTransformation( hSrcSRS, hDstSRS );
> 
> and then
> 
>         hGeom = OGR_G_Clone( OGR_F_GetGeometryRef( hFeat )->transform( poCT ) );
> 
> or similar ?

Yes, something like this could be done.  But there would be need for a
condition where the OGRCreateCoordinateTransformation() fails, perhaps
just because of the common condition of the source or destination not
having properly set SRS information.   It might also be advisable to provide
additional commandline parameters to control the transformation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Nov 21 11:24:53 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov 21 11:25:27 2008
Subject: [gdal-dev] Building with Visual Studio Express 2008
In-Reply-To: <ddc797c30811210505k3f2f0c4doe7147bf7e732dbe4@mail.gmail.com>
References: <ddc797c30811210505k3f2f0c4doe7147bf7e732dbe4@mail.gmail.com>
Message-ID: <4926E0D5.4080201@pobox.com>

guillaume huby wrote:
> Hello,
> 
> I am trying to build GDAL 1.6.0 beta2  (same result with 1.5.3) with 
> Visual Studio Express 2008.
> 
> Everything went fine until I get this message :
> 
>     vb6_support.cpp(35) : fatal error C1083: Impossible to open include
>     file : 'atlbase.h' : No such file or directory 
> 
> 
> Looking on the web I fall on http://www.gdal.org/faq.html and "Can I 
> build GDAL with MS Visual C++ 2005 Express Edition?".
> 
> But the Microsoft SDK no longer provides ATL stuff, thus this trick is 
> no longer valid.
> 
> Has anybody successed building GDAL with Visual Studio Express 2008 ?
> 
> Is ther some kown turnaround ?

Guillaume,

You need to alter MSVC_VER to be 1400 in gdal/nmake.opt.  Then the VB6 still
will be skipped.  Currently building the VB6 stuff with visual studio express.

I have made some updates to the FAQ to address this.  I note you ended up in
the old doxygen FAQ.  I have also deleted that since the official FAQ is now
the one in Trac which anyone can improve.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Shawn.Gong at drdc-rddc.gc.ca  Fri Nov 21 11:36:41 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Fri Nov 21 11:35:30 2008
Subject: [gdal-dev] are libgeos.so and libgeos_c.so needed
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E1202B7@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list, 

Are libgeos.so and libgeos_c.so needed in building gdal and its
dependency libraries?

If they are needed, where can I download the source code to
build/include it in the gdal package?
I am running Linux and Solaris 9.

thanks,
Shawn



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081121/3cde92eb/attachment-0001.html
From warmerdam at pobox.com  Fri Nov 21 11:48:31 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov 21 11:49:12 2008
Subject: [gdal-dev] are libgeos.so and libgeos_c.so needed
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E1202B7@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E1202B7@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <4926E65F.3020907@pobox.com>

Gong, Shawn (Contractor) wrote:
> hi list,
> 
> Are libgeos.so and libgeos_c.so needed in building gdal and its 
> dependency libraries?
> 
> If they are needed, where can I download the source code to 
> build/include it in the gdal package?
> 
> I am running Linux and Solaris 9.

Shawn,

GEOS is not a required dependency of GDAL/OGR; however, a number of additional
capabilities within OGR become available when built with GEOS.  GEOS can be
found at:

   http://geos.osgeo.org/

If you don't know of a specific reason you need it, I'd be inclined to leave
it out.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Shawn.Gong at drdc-rddc.gc.ca  Fri Nov 21 13:48:07 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Fri Nov 21 13:46:58 2008
Subject: [gdal-dev] gdal-1.5.3 build on Linux error (libstdc++.so too old?)
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E1202BB@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I downloaded the gdal overnight stable branch. When I built it, I got
the error messages below.
I searched web and found:
http://www.nabble.com/MrSID-Cross-Compiler-Information-to684614.html#a68
4614

My Linux is Redhat Enterprise and libstdc++.so.5 in /usr/lib is used

Does it mean that I have to use a newer libstdc++.so.6?  There is
libstdc++.so.6 in /usr/local/lib but I was afraid that different
versions will cause problems.  


thanks,
Shawn


... ...
libtool: compile:  gcc -g -O2 -Wall -Wdeclaration-after-statement
-I/home/sgong/dev181/gdal-1.5.3/port -I/
home/sgong/dev181/gdal-1.5.3/gcore -I/home/sgong/dev181/gdal-1.5.3/alg
-I/home/sgong/dev181/gdal-1.5.3/ogr
-I/home/sgong/dev181/gdal-1.5.3/ogr/ogrsf_frmts
-I/home/sgong/dev181/gdal-1.5.3/frmts -DOGR_ENABLED -I/ho
me/sgong/dev181/gdal-1.5.3/port -I/home/sgong/dev181/dist
-I/home/sgong/dev181/dist/include -c gdalinfo.c -o gdalinfo.o >/dev/null
2>&1
/bin/sh /home/sgong/dev181/gdal-1.5.3/libtool --mode=link       g++
gdalinfo.o  \
        /home/sgong/dev181/gdal-1.5.3/libgdal.la -o gdalinfo
libtool: link: g++ gdalinfo.o -o .libs/gdalinfo
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so -L/usr/loc al/lib
-L/home/sgong/dev181/dist/lib -L/home/sgong/dev181/dist -L/usr/lib
-L/usr/kerberos/lib -L/home/mari
nier/gcc-4.2.2-build/i686-pc-linux-gnu/libstdc++-v3/src
-L/home/marinier/gcc-4.2.2-build/i686-pc-linux-gnu
/libstdc++-v3/src/.libs -L/home/marinier/gcc-4.2.2-build/./gcc
/usr/local/lib/libexpat.so /home/sgong/dev1 81/dist/lib/libhdf5.so
/home/sgong/dev181/dist/lib/libsz.so -lmfhdf -ldf
/usr/local/lib/libsz.so -logdi31 /usr/lib/libjpeg.so -lpq -lrt
/usr/local/lib/libcurl.so -lldap -lssl -lcrypto -lgssapi_krb5 -lkrb5
-lcom_e rr -lk5crypto -lresolv -ldl -lz /usr/local/lib/libstdc++.so -lm
-lc -lgcc_s -Wl,-rpath -Wl,/home/sgong/dev 181/dist/lib -Wl,-rpath
-Wl,/usr/local/lib
/usr/bin/ld: warning: libcom_err.so.3, needed by /usr/lib/libssl.so, may
conflict with libcom_err.so.2
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true , 0>::allocate(unsigned int)'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true , 0>::_S_free_list'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true , 0>::_Lock::~_Lock()'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true , 0>::_S_force_new'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true , 0>::_Lock::_Lock()'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::basic_string<char, std::char_ traits<char>, std::allocator<char>
>::_Rep::_S_create(unsigned int, std::allocator<char> const&)'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true , 0>::_S_refill(unsigned int)'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::basic_string<char, std::char_ traits<char>, std::allocator<char>
>::_S_empty_rep_storage'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true , 0>::_S_node_allocator_lock'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true , 0>::deallocate(void*, unsigned
int)'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/home/sgong/dev181/gdal-1.5.3/apps'
make: *** [apps-target] Error 2




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081121/07b7e3a1/attachment.html
From seth at pricepages.org  Fri Nov 21 14:03:57 2008
From: seth at pricepages.org (Seth Price)
Date: Fri Nov 21 14:40:42 2008
Subject: [gdal-dev] Nearest Neighbour resampling
In-Reply-To: <49258AE1.8040007@pobox.com>
References: <mailman.1195.1227194035.23808.gdal-dev@lists.osgeo.org>
	<7765ea640811200743q7db5af22k14924c384fa2c6d5@mail.gmail.com>
	<49258AE1.8040007@pobox.com>
Message-ID: <2171.129.123.22.47.1227294237.squirrel@pricepages.org>

I would also be very interested in seeing the command which produced those
files. It looks like something I would expect to see as a result of
overview building after this patch (and average resampling):
https://trac.osgeo.org/gdal/ticket/2408

~Seth


On Thu, November 20, 2008 10:05 am, Frank Warmerdam wrote:
> Ian Elliott wrote:
>> Hi,
>>
>> An error is consistently occurring when I use the nearest neighbour
>> technique to resample an 8-bit paletted image.
>>
>> Please see this page for an example:
>> http://projects.exeter.ac.uk/msel/personnel/iae/gdal/
>> (The resampling error is shown in image c).
>>
>> A possible solution I have discovered is to use 'Majority' resampling,
>> but this is not available in gdal.
>>
>> Can anyone suggest why this is happening?
>
> Ian,
>
> I see the png files on the web site are RGB, and so apparently not the
> original source data.  I do not know why nearest neighbour resampling
> would
> give the effect you are seeing.  I think you will need to provide details
> on how you accomplished the downsampling (along with the original data)
> for me to say more.
>
> There is no majority resampler in gdalwarp or gdal_translate.  GDAL 1.6
> does include the MODE resampler for computing overviews with gdaladdo
> which
> I imagine is the same thing as the majority resampler.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From ivan.lucena at pmldnet.com  Fri Nov 21 15:04:47 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Fri Nov 21 15:04:48 2008
Subject: [gdal-dev] RedHat build error: `TIFFFreeDirectory' was not declared
	in this scope
Message-ID: <20081121200447.30617.qmail@s466.sureserver.com>

Hi there,

Downloading the nightly source distribution gdal-svn-trunk-2008.11.20.tar.gz on a RedHat Linux,

$ cat /etc/redhat-release
Enterprise Linux Enterprise Linux AS release 4 (October Update 7)

It is resulting in a error on gt_overview

% ./configure --prefix=/home/joe/utils/gdal
% make
...
Error:
 gt_overview.cpp:75: error: `TIFFFreeDirectory' was not declared in this scope
 gt_overview.cpp:75: warning: unused variable 'TIFFFreeDirectory'
 make[2]: *** [../o/gt_overview.o] Error 1
 make[2]: Leaving directory
 `/home/joe/GDAL/gdal-svn-trunk-2008.11.20/frmts/gtiff'
 make[1]: *** [gtiff-install-obj] Error 2
 make[1]: Leaving directory
 `/home/joe/GDAL/gdal-svn-trunk-2008.11.20/frmts'
 make: *** [frmts-target] Error 2

We tried something like that to try to avoid the use of other libtiff on the system:

% ./configure --prefix=/home/joe/utils/gdal --with-libtiff=/home/joe/GDAL/frmts/gtiff/libtiff --with-
geotiff=/home/joe/GDAL/frmts/gtiff/libgeotiff

But that didn't work. Same error.

Does anybody have any idea?

Thanks in advance,

Ivan

From even.rouault at mines-paris.org  Fri Nov 21 15:12:48 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov 21 15:12:52 2008
Subject: [gdal-dev] RedHat build error: `TIFFFreeDirectory' was not
	declared in this scope
In-Reply-To: <20081121200447.30617.qmail@s466.sureserver.com>
References: <20081121200447.30617.qmail@s466.sureserver.com>
Message-ID: <200811212112.48879.even.rouault@mines-paris.org>

Ivan,

See http://n2.nabble.com/get-fmrt-grib-td1313401.html.

I think someone recently reported that issue and if I remember well, RHEL 4 is 
shipped with libtiff 3.6 that doesn't have TIFFFreeDirectory.

So the workaround is 
to ./configure --with-libtiff=internal --with-libgeotiff=internal
(passing the path inside the gdal tree is not supposed to work. The path of 
the --with-libtiff and --with-libgeotiff configure options must point to an 
installed version of those libraries, not a source distribution)

We should probably put libtiff 3.8 as the minimum requirement. See 
http://trac.osgeo.org/gdal/ticket/2668
From ivan.lucena at pmldnet.com  Fri Nov 21 15:32:31 2008
From: ivan.lucena at pmldnet.com (=?utf-8?Q?Lucena,=20Ivan?=)
Date: Fri Nov 21 15:32:33 2008
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gUmVkSGF0IGJ1aWxkIGVycm9yOiBgVElGRkZyZWVEaXJlY3RvcnknIHdhcyBub3QgZGVjbGFyZWQgaW4gdGhpcyBzY29wZQ==?=
Message-ID: <20081121203231.19908.qmail@s466.sureserver.com>

Thanks Even. I am going to try that.


>  -------Original Message-------
>  From: Even Rouault <even.rouault@mines-paris.org>
>  Subject: Re: [gdal-dev] RedHat build error: `TIFFFreeDirectory' was not declared in this scope
>  Sent: Nov 21 '08 20:12
>  
>  Ivan,
>  
>  See http://n2.nabble.com/get-fmrt-grib-td1313401.html.
>  
>  I think someone recently reported that issue and if I remember well, RHEL 4 is
>  shipped with libtiff 3.6 that doesn't have TIFFFreeDirectory.
>  
>  So the workaround is
>  to ./configure --with-libtiff=internal --with-libgeotiff=internal
>  (passing the path inside the gdal tree is not supposed to work. The path of
>  the --with-libtiff and --with-libgeotiff configure options must point to an
>  installed version of those libraries, not a source distribution)
>  
>  We should probably put libtiff 3.8 as the minimum requirement. See
>  http://trac.osgeo.org/gdal/ticket/2668
>  

From warmerdam at pobox.com  Fri Nov 21 15:40:12 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov 21 15:40:35 2008
Subject: [gdal-dev] RedHat build error: `TIFFFreeDirectory' was not
	declared in this scope
In-Reply-To: <20081121200447.30617.qmail@s466.sureserver.com>
References: <20081121200447.30617.qmail@s466.sureserver.com>
Message-ID: <49271CAC.9070606@pobox.com>

Lucena, Ivan wrote:
> ...
> Error:
>  gt_overview.cpp:75: error: `TIFFFreeDirectory' was not declared in this scope
>  gt_overview.cpp:75: warning: unused variable 'TIFFFreeDirectory'
>  make[2]: *** [../o/gt_overview.o] Error 1
>  make[2]: Leaving directory
>  `/home/joe/GDAL/gdal-svn-trunk-2008.11.20/frmts/gtiff'
>  make[1]: *** [gtiff-install-obj] Error 2
>  make[1]: Leaving directory
>  `/home/joe/GDAL/gdal-svn-trunk-2008.11.20/frmts'
>  make: *** [frmts-target] Error 2
> 
> We tried something like that to try to avoid the use of other libtiff on the system:
> 
> % ./configure --prefix=/home/joe/utils/gdal --with-libtiff=/home/joe/GDAL/frmts/gtiff/libtiff --with-
> geotiff=/home/joe/GDAL/frmts/gtiff/libgeotiff

Ivan,

If others haven't already mentioned it, use --with-libtiff=internal.

I have filed a ticket on this issue.  It is my intention that the GTiff
driver should build and mostly work with older libtiff's.

   http://trac.osgeo.org/gdal/ticket/2699

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From wollez at gmx.net  Sat Nov 22 10:37:45 2008
From: wollez at gmx.net (WolfgangZ)
Date: Sat Nov 22 10:37:52 2008
Subject: [gdal-dev] gdal.org down?
Message-ID: <gg9903$1s6$1@ger.gmane.org>

Hi,

is gdal.org down since a few days or is the problem on my side?

Regards
Wolfgang

From warmerdam at pobox.com  Sat Nov 22 12:21:15 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Nov 22 12:21:42 2008
Subject: [gdal-dev] gdal.org down?
In-Reply-To: <gg9903$1s6$1@ger.gmane.org>
References: <gg9903$1s6$1@ger.gmane.org>
Message-ID: <49283F8B.5050903@pobox.com>

WolfgangZ wrote:
> Hi,
> 
> is gdal.org down since a few days or is the problem on my side?

Wolfgang,

The server hosting www.gdal.org (and buildbot.osgeo.org) is down while
a disk is replaced.  I anticipate everything being operational again by
some time on Monday.

SVN, Trac (http://trac.osgeo.org/gdal) and the downloads
(http://download.osgeo.org/gdal) are still operational.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From wollez at gmx.net  Sat Nov 22 12:34:00 2008
From: wollez at gmx.net (WolfgangZ)
Date: Sat Nov 22 12:34:03 2008
Subject: [gdal-dev] Re: gdal.org down?
In-Reply-To: <49283F8B.5050903@pobox.com>
References: <gg9903$1s6$1@ger.gmane.org> <49283F8B.5050903@pobox.com>
Message-ID: <gg9fq1$llm$1@ger.gmane.org>

Frank Warmerdam schrieb:
> WolfgangZ wrote:
>> Hi,
>>
>> is gdal.org down since a few days or is the problem on my side?
> 
> Wolfgang,
> 
> The server hosting www.gdal.org (and buildbot.osgeo.org) is down while
> a disk is replaced.  I anticipate everything being operational again by
> some time on Monday.
> 
> SVN, Trac (http://trac.osgeo.org/gdal) and the downloads
> (http://download.osgeo.org/gdal) are still operational.
> 
> Best regards,


Many thanks for the information.

Good luck with the repairs,
Wolfgang

From pramsey at cleverelephant.ca  Sat Nov 22 15:52:16 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Sat Nov 22 15:52:18 2008
Subject: [gdal-dev] Toronto Code Sprint
Message-ID: <30fe546d0811221252v5fbb22d4rf30a90abd793021e@mail.gmail.com>

All,

We are looking to have a code sprint in Toronto in mid-winter (not
Italy in the springtime, but that's just how we roll up here in the
Great White North).  We are looking particularly at trying to bring C
tribe members together, though other tribes are welcome to crash the
party too.

http://wiki.osgeo.org/wiki/Toronto_Code_Sprint_2009

More info at the link above!

Paul
From anton.patrushev at gmail.com  Sun Nov 23 00:50:11 2008
From: anton.patrushev at gmail.com (Anton Patrushev)
Date: Sun Nov 23 00:50:13 2008
Subject: [gdal-dev] What happened to http://www.gdal.org/ogr?
In-Reply-To: <a0d5dff50811222145j60599492of0f84c2a537a6d96@mail.gmail.com>
References: <a0d5dff50811222145j60599492of0f84c2a537a6d96@mail.gmail.com>
Message-ID: <a0d5dff50811222150kfb70bffs79dbb5981f820739@mail.gmail.com>

Hi there,

I don't know if this is proper place to ask, but what happened to
http://www.gdal.org/ogr?
It responds with 404 error.

Thanks,
Anton.
From woodbri at swoodbridge.com  Sun Nov 23 01:08:49 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sun Nov 23 01:08:15 2008
Subject: [gdal-dev] What happened to http://www.gdal.org/ogr?
In-Reply-To: <a0d5dff50811222150kfb70bffs79dbb5981f820739@mail.gmail.com>
References: <a0d5dff50811222145j60599492of0f84c2a537a6d96@mail.gmail.com>
	<a0d5dff50811222150kfb70bffs79dbb5981f820739@mail.gmail.com>
Message-ID: <4928F371.9030908@swoodbridge.com>

Anton Patrushev wrote:
> Hi there,
> 
> I don't know if this is proper place to ask, but what happened to
> http://www.gdal.org/ogr?
> It responds with 404 error.

Hi Anton,

Frank mentioned in another post that is was down for a disk replacement, 
but would be back up by Monday sometime. He also mentioned that if you 
needed a download in the interim, that you could get it from the osgeo 
servers, sorry, don't have the email handy.

-Steve W
From anton.patrushev at gmail.com  Sun Nov 23 01:16:24 2008
From: anton.patrushev at gmail.com (Anton Patrushev)
Date: Sun Nov 23 01:16:26 2008
Subject: [gdal-dev] What happened to http://www.gdal.org/ogr?
In-Reply-To: <4928F371.9030908@swoodbridge.com>
References: <a0d5dff50811222145j60599492of0f84c2a537a6d96@mail.gmail.com>
	<a0d5dff50811222150kfb70bffs79dbb5981f820739@mail.gmail.com>
	<4928F371.9030908@swoodbridge.com>
Message-ID: <a0d5dff50811222216t1cb59d84h5c30803bab536aeb@mail.gmail.com>

Hi Steve,

Fine! Thanks a lot!
I must be missed that email, sorry.

Anton.

On Sun, Nov 23, 2008 at 3:08 PM, Stephen Woodbridge
<woodbri@swoodbridge.com> wrote:
> Anton Patrushev wrote:
>>
>> Hi there,
>>
>> I don't know if this is proper place to ask, but what happened to
>> http://www.gdal.org/ogr?
>> It responds with 404 error.
>
> Hi Anton,
>
> Frank mentioned in another post that is was down for a disk replacement, but
> would be back up by Monday sometime. He also mentioned that if you needed a
> download in the interim, that you could get it from the osgeo servers,
> sorry, don't have the email handy.
>
> -Steve W
>
From warmerdam at pobox.com  Sun Nov 23 10:19:23 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Nov 23 10:19:41 2008
Subject: [gdal-dev] What happened to http://www.gdal.org/ogr?
In-Reply-To: <4928F371.9030908@swoodbridge.com>
References: <a0d5dff50811222145j60599492of0f84c2a537a6d96@mail.gmail.com>
	<a0d5dff50811222150kfb70bffs79dbb5981f820739@mail.gmail.com>
	<4928F371.9030908@swoodbridge.com>
Message-ID: <4929747B.7090006@pobox.com>

Stephen Woodbridge wrote:
> Anton Patrushev wrote:
>> Hi there,
>>
>> I don't know if this is proper place to ask, but what happened to
>> http://www.gdal.org/ogr?
>> It responds with 404 error.
> 
> Hi Anton,
> 
> Frank mentioned in another post that is was down for a disk replacement, 
> but would be back up by Monday sometime. He also mentioned that if you 
> needed a download in the interim, that you could get it from the osgeo 
> servers, sorry, don't have the email handy.

Folks,

I would just add that I have re-established http://www.gdal.org on another
OSGeo geoserver.  For the time being the nightly snapshots will not be\
refreshed, and buildbot is inactive.  But otherwise things should be normal
now for the GDAL project.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From yann.chemin at gmail.com  Sun Nov 23 22:34:45 2008
From: yann.chemin at gmail.com (Yann Chemin)
Date: Sun Nov 23 22:34:49 2008
Subject: [gdal-dev] loading many files with C API
Message-ID: <4f37eb890811231934n8b9edfekf101f285556be140@mail.gmail.com>

Hello,

I need to load about 400 files with the C API to work on each pixel
temporal dimension.

I would like to make a look to load them but fail so far...

GDALDatasetH hDataset[MAXFILES];
GDALAllRegister();
GDALDriverH hDriver[MAXFILES];
GDALRasterBandH hBand[MAXFILES];
float *pafScanline[MAXFILES];
int nXSize1,nYSize1;

//loading input files
for(i=0;i<n_imgs;i++){
    in[i] = argv[i+1];
    hDataset[i] = GDALOpen(in[i];GA_ReadOnly);
    hDriver[i] = GDALDatasetDriver(hDataset[i]);
    hBand[i] = GDALGetRasterBand(hDataset[i],1);
    nXSize1 = GDALGetRasterBandXSize(hBand[0]);
    pafScanline[i] = (float *) CPLMalloc(sizeof(float)*nXSize1);
}

it mentions error 10: 'hDataset' is NULL in 'GDALGetDatasetDriver'

I suppose my definition of hDataset[ ] is wrong... Could anybody help
out please?
Thanks
Yann

-- 
Yann Chemin
International Rice Research Institute
Office: http://www.irri.org/gis
Perso: http://www.freewebs.com/ychemin
YiKingDo: http://yikingdo.unblog.fr/
From warmerdam at pobox.com  Sun Nov 23 23:35:21 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Nov 23 23:35:42 2008
Subject: [gdal-dev] loading many files with C API
In-Reply-To: <4f37eb890811231934n8b9edfekf101f285556be140@mail.gmail.com>
References: <4f37eb890811231934n8b9edfekf101f285556be140@mail.gmail.com>
Message-ID: <492A2F09.4080003@pobox.com>

Yann Chemin wrote:
> Hello,
> 
> I need to load about 400 files with the C API to work on each pixel
> temporal dimension.
> 
> I would like to make a look to load them but fail so far...
> 
> GDALDatasetH hDataset[MAXFILES];
> GDALAllRegister();
> GDALDriverH hDriver[MAXFILES];
> GDALRasterBandH hBand[MAXFILES];
> float *pafScanline[MAXFILES];
> int nXSize1,nYSize1;
> 
> //loading input files
> for(i=0;i<n_imgs;i++){
>     in[i] = argv[i+1];
>     hDataset[i] = GDALOpen(in[i];GA_ReadOnly);
>     hDriver[i] = GDALDatasetDriver(hDataset[i]);
>     hBand[i] = GDALGetRasterBand(hDataset[i],1);
>     nXSize1 = GDALGetRasterBandXSize(hBand[0]);
>     pafScanline[i] = (float *) CPLMalloc(sizeof(float)*nXSize1);
> }
> 
> it mentions error 10: 'hDataset' is NULL in 'GDALGetDatasetDriver'

Yann,

Is that the first error reported?  Does it occur for i==0 or much later
(perhaps around the 250th file)? Many operating systems have a limit
on the number of files that can be open at once, in some cases around
256.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From yann.chemin at gmail.com  Mon Nov 24 08:10:10 2008
From: yann.chemin at gmail.com (Yann Chemin)
Date: Mon Nov 24 08:10:14 2008
Subject: [gdal-dev] using GDALCreateCopy and changing only the datatype
Message-ID: <4f37eb890811240510v4367b9d2gc299772ddf25bff8@mail.gmail.com>

Hello,

I would like to use GDALCreateCopy and change the datatype from int32
to float32.

        GDALDatasetH hDatasetOut0;
        hDatasetOut0 = GDALCreateCopy( hDriver1, ndviF,
                                hDataset1,FALSE,NULL,NULL,NULL);
        GDALRasterBandH hBandOut0;
        hBandOut0 = GDALGetRasterBand(hDatasetOut0,1);

thanks,
Yann

-- 
Yann Chemin
International Rice Research Institute
Office: http://www.irri.org/gis
Perso: http://www.freewebs.com/ychemin
YiKingDo: http://yikingdo.unblog.fr/
From yann.chemin at gmail.com  Mon Nov 24 08:14:30 2008
From: yann.chemin at gmail.com (Yann Chemin)
Date: Mon Nov 24 08:14:42 2008
Subject: [gdal-dev] loading many files with C API
In-Reply-To: <492B7C10.8030601@pmldnet.com>
References: <4f37eb890811231934n8b9edfekf101f285556be140@mail.gmail.com>
	<492A2F09.4080003@pobox.com> <492B7C10.8030601@pmldnet.com>
Message-ID: <4f37eb890811240514n6cdb2f38ia54fd20af9994ffc@mail.gmail.com>

Hi again,

the first problem was an input output argv[] confusion. I can load 350
files and it is OK. I may have another problem at the pixel level, but
in case i'll start a new thread.

Thank you Ivan for your suggestion, it would be meaningful indeed to do that.

void usage()
{
	printf( "-----------------------------------------------------------\n");
	printf( "--Calculate the frequency of occurrence of an event--------\n");
	printf( "-----------------------------------------------------------\n");
	printf( "./freq outFREQ infile1[ infile2 infile3 ...] \n");
	printf( "-----------------------------------------------------------\n");
	return;
}

int main( int argc, char *argv[] )
{
      	if( argc < 5 ) {
		usage();
		return 1;
	}
	int 	i, row, col;
        char	*in[MAXFILES];
	char	*out;
	int 	imgs_per_year;
	int	n_imgs;
	int 	n_null_pix;
	GDALDatasetH hDataset[MAXFILES+1];
	GDALAllRegister();
	GDALDriverH hDriver[MAXFILES+1];
	GDALRasterBandH hBand[MAXFILES+1];
	float *pafScanline[MAXFILES+1];
	int nXSize1, nYSize1;

	out	 	= argv[1];

	//Loading input files
	n_imgs = argc - 2;
	for (i=0;i<n_imgs;i++){
		printf("%i / %i %s\n",i,n_imgs,argv[i+2]);
		in[i]	= argv[i+2];
		hDataset[i] = GDALOpen(in[i],GA_ReadOnly);
		hDriver[i] = GDALGetDatasetDriver(hDataset[i]);
		hBand[i] = GDALGetRasterBand(hDataset[i],1);
		nXSize1 = GDALGetRasterBandXSize(hBand[0]);
		pafScanline[i] = (float *) CPLMalloc(sizeof(float)*nXSize1);
	}
	printf("Passed 1\n");
	nYSize1 = GDALGetRasterBandYSize(hBand[0]);

	//Creating output file
	hDataset[n_imgs] = GDALCreateCopy( hDriver[0], out,
				hDataset[0],FALSE,NULL,NULL,NULL);
	hBand[n_imgs] = GDALGetRasterBand(hDataset[n_imgs],1);
	pafScanline[n_imgs] = (float *) CPLMalloc(sizeof(float)*nXSize1);
	////////////////// LOAD Pixels and process from there
/////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

Thanks
Yann

2008/11/25 Ivan Lucena <ivan.lucena@pmldnet.com>:
> Yann, Frank,
>
> Another thing to considerer is that any process you might want to do on that
> file storage option will be way much slower than if it was done in a multi
> band, tiled, interleaved by pixel format.
>
> That is my experience,
>
> Ivan
>
> Frank Warmerdam wrote:
>>
>> Yann Chemin wrote:
>>>
>>> Hello,
>>>
>>> I need to load about 400 files with the C API to work on each pixel
>>> temporal dimension.
>>>
>>> I would like to make a look to load them but fail so far...
>>>
>>> GDALDatasetH hDataset[MAXFILES];
>>> GDALAllRegister();
>>> GDALDriverH hDriver[MAXFILES];
>>> GDALRasterBandH hBand[MAXFILES];
>>> float *pafScanline[MAXFILES];
>>> int nXSize1,nYSize1;
>>>
>>> //loading input files
>>> for(i=0;i<n_imgs;i++){
>>>    in[i] = argv[i+1];
>>>    hDataset[i] = GDALOpen(in[i];GA_ReadOnly);
>>>    hDriver[i] = GDALDatasetDriver(hDataset[i]);
>>>    hBand[i] = GDALGetRasterBand(hDataset[i],1);
>>>    nXSize1 = GDALGetRasterBandXSize(hBand[0]);
>>>    pafScanline[i] = (float *) CPLMalloc(sizeof(float)*nXSize1);
>>> }
>>>
>>> it mentions error 10: 'hDataset' is NULL in 'GDALGetDatasetDriver'
>>
>> Yann,
>>
>> Is that the first error reported?  Does it occur for i==0 or much later
>> (perhaps around the 250th file)? Many operating systems have a limit
>> on the number of files that can be open at once, in some cases around
>> 256.
>>
>> Best regards,
>
>



-- 
Yann Chemin
International Rice Research Institute
Office: http://www.irri.org/gis
Perso: http://www.freewebs.com/ychemin
YiKingDo: http://yikingdo.unblog.fr/
From guillaume.huby.lists at gmail.com  Mon Nov 24 08:26:12 2008
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Mon Nov 24 08:26:15 2008
Subject: [gdal-dev] Building with Visual Studio Express 2008
In-Reply-To: <4926E0D5.4080201@pobox.com>
References: <ddc797c30811210505k3f2f0c4doe7147bf7e732dbe4@mail.gmail.com>
	<4926E0D5.4080201@pobox.com>
Message-ID: <ddc797c30811240526t27b6c31bmfabe35683a9ed0a7@mail.gmail.com>

Hello

On Fri, Nov 21, 2008 at 5:24 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> You need to alter MSVC_VER to be 1400 in gdal/nmake.opt.  Then the VB6
> still
> will be skipped.  Currently building the VB6 stuff with visual studio
> express.


Thank you Frank, this worked fine (although it worked in console mode and
not with the .sln files).


> I have made some updates to the FAQ to address this.  I note you ended up
> in
> the old doxygen FAQ.  I have also deleted that since the official FAQ is
> now
> the one in Trac which anyone can improve.


I ended on this page after a search on the archive mail of the gdal-dev list
and did not look any further ... I suggest to keep the page, empty its
content and put a link to the new FAQ instead.

Thanks again.
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081124/ec97ac1b/attachment.html
From Sjur.A.Kolberg at sintef.no  Mon Nov 24 08:52:23 2008
From: Sjur.A.Kolberg at sintef.no (Kolberg Sjur A)
Date: Mon Nov 24 08:52:27 2008
Subject: [gdal-dev] using GDALCreateCopy and changing only the datatype
In-Reply-To: <4f37eb890811240510v4367b9d2gc299772ddf25bff8@mail.gmail.com>
References: <4f37eb890811240510v4367b9d2gc299772ddf25bff8@mail.gmail.com>
Message-ID: <72251B925CE10A478606EEAC6AA683BE10A664@SINTEFEXMBX01.sintef.no>


Hi Yann,

I had this same problem and found no other solution than to switch from CreateCopy() to Create().

Good luck,

Sjur K :-)


Sjur Kolberg
SINTEF Energiforskning A/S
Sem S?lands vei 11
7465 Trondheim
tlf. 73 59 72 78
fax  73 59 72 50


> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Yann Chemin
> Sent: 24 november 2008 14:10
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] using GDALCreateCopy and changing only
> the datatype
>
> Hello,
>
> I would like to use GDALCreateCopy and change the datatype
> from int32 to float32.
>
>         GDALDatasetH hDatasetOut0;
>         hDatasetOut0 = GDALCreateCopy( hDriver1, ndviF,
>                                 hDataset1,FALSE,NULL,NULL,NULL);
>         GDALRasterBandH hBandOut0;
>         hBandOut0 = GDALGetRasterBand(hDatasetOut0,1);
>
> thanks,
> Yann
>
> --
> Yann Chemin
> International Rice Research Institute
> Office: http://www.irri.org/gis
> Perso: http://www.freewebs.com/ychemin
> YiKingDo: http://yikingdo.unblog.fr/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From yann.chemin at gmail.com  Mon Nov 24 08:57:33 2008
From: yann.chemin at gmail.com (Yann Chemin)
Date: Mon Nov 24 08:57:39 2008
Subject: [gdal-dev] using GDALCreateCopy and changing only the datatype
In-Reply-To: <72251B925CE10A478606EEAC6AA683BE10A664@SINTEFEXMBX01.sintef.no>
References: <4f37eb890811240510v4367b9d2gc299772ddf25bff8@mail.gmail.com>
	<72251B925CE10A478606EEAC6AA683BE10A664@SINTEFEXMBX01.sintef.no>
Message-ID: <4f37eb890811240557w7aa7b3eeu785dcf5dc143d6e9@mail.gmail.com>

Hi Sjur,

I found out that in:
hDatasetOut0 = GDALCreateCopy( hDriver1, ndviF, hDataset1,FALSE,NULL,NULL,NULL);

the FALSE argument was there to inhibit strict identity to the parent
dataset it copies. However, when trying to induce it to write in
GDT_Float64 instead of int32, it brings out the file as int32....

so far for allowing change...
Yann

2008/11/24 Kolberg Sjur A <Sjur.A.Kolberg@sintef.no>:
>
> Hi Yann,
>
> I had this same problem and found no other solution than to switch from CreateCopy() to Create().
>
> Good luck,
>
> Sjur K :-)
>
>
> Sjur Kolberg
> SINTEF Energiforskning A/S
> Sem S?lands vei 11
> 7465 Trondheim
> tlf. 73 59 72 78
> fax  73 59 72 50
>
>
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.osgeo.org
>> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Yann Chemin
>> Sent: 24 november 2008 14:10
>> To: gdal-dev@lists.osgeo.org
>> Subject: [gdal-dev] using GDALCreateCopy and changing only
>> the datatype
>>
>> Hello,
>>
>> I would like to use GDALCreateCopy and change the datatype
>> from int32 to float32.
>>
>>         GDALDatasetH hDatasetOut0;
>>         hDatasetOut0 = GDALCreateCopy( hDriver1, ndviF,
>>                                 hDataset1,FALSE,NULL,NULL,NULL);
>>         GDALRasterBandH hBandOut0;
>>         hBandOut0 = GDALGetRasterBand(hDatasetOut0,1);
>>
>> thanks,
>> Yann
>>
>> --
>> Yann Chemin
>> International Rice Research Institute
>> Office: http://www.irri.org/gis
>> Perso: http://www.freewebs.com/ychemin
>> YiKingDo: http://yikingdo.unblog.fr/
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>



-- 
Yann Chemin
International Rice Research Institute
Office: http://www.irri.org/gis
Perso: http://www.freewebs.com/ychemin
YiKingDo: http://yikingdo.unblog.fr/
From Shawn.Gong at drdc-rddc.gc.ca  Mon Nov 24 09:47:04 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Mon Nov 24 09:45:50 2008
Subject: [gdal-dev] gdal 1.5.3 dependencies on Linux
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E1202BC@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I am building gdal 1.5.3 on Linux (RHEL).
I build the dependencies as follows (this was what I used for gdal
1.4.0):

1) glib 1.2.10
2) gtk+ 1.2.10           # stay with gtk 1.3 now, I plan to upgrade to
gtk 2 in near future

3) Mesa 5.0.2 (Mesalib only, no demo, no glut)
4) gtkglarea-1.2.2
5) python 2.5.2

6) pygtk-0.6.12
7) gtk+extra-0.99.17
8) python-gtkextra-0.22    # 6), 7) 8) are for gtk 1.3 

10) proj-4.4.7
11) gdal external format libraries
 11a) zlib-1.2.3
 11b) jpeg-6b
 11c) szip-2.1
 11d) HDF5
 11e) HDF4
12) gdal-1.5.3 (w/ rsat2 driver from 1.6 beta)


Would someone confirm that the above dependencies are right?

another question about gcc, I have been using
/usr/lib/libstdc++.so.5.0.3, is it too old for gdal-1.5.3?

thanks,
Shawn



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081124/5b109b5d/attachment-0001.html
From warmerdam at pobox.com  Mon Nov 24 11:05:18 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Nov 24 11:05:47 2008
Subject: [gdal-dev] gdal 1.5.3 dependencies on Linux
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E1202BC@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E1202BC@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <492AD0BE.9050200@pobox.com>

Gong, Shawn (Contractor) wrote:
> hi list,
> 
> I am building gdal 1.5.3 on Linux (RHEL).
> 
> I build the dependencies as follows (this was what I used for gdal 1.4.0):
> 
> 1) glib 1.2.10
> 
> 2) gtk+ 1.2.10           # stay with gtk 1.3 now, I plan to upgrade to 
> gtk 2 in near future
> 
> 3) Mesa 5.0.2 (Mesalib only, no demo, no glut)
> 
> 4) gtkglarea-1.2.2
> 
> 5) python 2.5.2
> 
> 6) pygtk-0.6.12
> 
> 7) gtk+extra-0.99.17
> 
> 8) python-gtkextra-0.22    # 6), 7) 8) are for gtk 1.3

Shawn,

The above are irrelevant for GDAL - they are OpenEV dependencies.

> 10) proj-4.4.7
> 
> 11) gdal external format libraries
> 
>  11a) zlib-1.2.3
> 
>  11b) jpeg-6b
> 
>  11c) szip-2.1
> 
>  11d) HDF5
> 
>  11e) HDF4
> 
> 12) gdal-1.5.3 (w/ rsat2 driver from 1.6 beta)

The above should generally be fine, though you weren't specific
about versions.  You might want to keep an eye on the
http://trac.osgeo.org/gdal/wiki/BuildHints for some details on
HDF4 and HDF5.

> Would someone confirm that the above dependencies are right?
> 
> another question about gcc, I have been using 
> /usr/lib/libstdc++.so.5.0.3, is it too old for gdal-1.5.3?

I am not aware of any specific dependencies on a libstdc++ version
in GDAL.  Generally the important thing is just to use the regular
versions that is associated with the g++ you are building with and
to avoid mixing or overriding.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Nov 24 11:55:47 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Nov 24 11:56:38 2008
Subject: [gdal-dev] using GDALCreateCopy and changing only the datatype
In-Reply-To: <4f37eb890811240510v4367b9d2gc299772ddf25bff8@mail.gmail.com>
References: <4f37eb890811240510v4367b9d2gc299772ddf25bff8@mail.gmail.com>
Message-ID: <492ADC93.5010305@pobox.com>

Yann Chemin wrote:
> Hello,
> 
> I would like to use GDALCreateCopy and change the datatype from int32
> to float32.
> 
>         GDALDatasetH hDatasetOut0;
>         hDatasetOut0 = GDALCreateCopy( hDriver1, ndviF,
>                                 hDataset1,FALSE,NULL,NULL,NULL);
>         GDALRasterBandH hBandOut0;
>         hBandOut0 = GDALGetRasterBand(hDatasetOut0,1);

Yann,

Generally speaking to do this with CreateCopy() you would need to create
an intermediate virtual dataset with the altered pixel data type.  This is
how the -ot flag of gdal_translate works.   You can review the
gdal_translate.cpp code as an example, though it is somewhat involved.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From randre at gmail.com  Mon Nov 24 13:07:18 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Mon Nov 24 13:07:21 2008
Subject: [gdal-dev] gdal segmentation fault when reading NetCDF grid files
Message-ID: <9c2015090811241007j730e8d7aof400d1b33eda90ed@mail.gmail.com>

Hi everyone,

I'm having some problems getting gdal to read netCDF grid files using
gdal-1.5.2 which I have built from source.  It is running on an Ubuntu 8.04
machine, and was built after the following dependencies were installed:

    $ sudo apt-get install libnetcdf4 libnetcdf-dev netcdfg-dev netcdf-doc
libhdf4g libhdf4g-dev libhdf5-serial-1.6.5-0 libhdf5-serial-1.6.5-0
libhdf5-serial-dev

I built gdal with the following options:

    $ sudo ./configure --with-libz --with-pg=/usr/local/pgsql/bin/pg_config
--with-netcdf --with-png --with-geotiff --with-jpeg --with-gif --with-hdf4
--with-hdf5 --with-jasper --with-geos=/usr/local/bin/geos-config
--with-python

When I try to open the file with gdalinfo, I get the following seg fault in
/var/log/syslog:

    Nov 24 09:42:34 randre-linux kernel: [ 1921.499150] gdalinfo[6971]:
segfault at 00001031 eip b713d886 esp bfefb390 error 4

The same file can be opened with no problem using gdalinfo from
FWTools-2.0.6

Is it possible I am missing some netCDF/HDF fu needed for gdal to work with
these sorts of files?

Thanks in advance for any suggestions,

Roger
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081124/9fa7801d/attachment.html
From even.rouault at mines-paris.org  Mon Nov 24 14:53:33 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Nov 24 14:53:47 2008
Subject: [gdal-dev] gdal segmentation fault when reading NetCDF grid files
In-Reply-To: <9c2015090811241007j730e8d7aof400d1b33eda90ed@mail.gmail.com>
References: <9c2015090811241007j730e8d7aof400d1b33eda90ed@mail.gmail.com>
Message-ID: <200811242053.34241.even.rouault@mines-paris.org>

Hi Roger,

Yes, this is a reccurent issue.

the way libhdf4g is built in Ubuntu (up to here... apparently a solution is in 
Debian experimental, so it should change... after Lenny) is not compatible 
with its use with netcdf. So you should either select one of both formats 
when configuring GDAL, either uninstall Ubuntu libhdf4 package and build it 
at hand by following the instructions given at 
http://trac.osgeo.org/gdal/wiki/HDF

A bit of googling on the issue gives :
http://groups.google.com/group/linux.debian.bugs.dist/browse_thread/thread/1483dd6b712a9566/46be67eeb86be37e?lnk=raot
http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=488086

Regards

Le Monday 24 November 2008 19:07:18 Roger Andr?, vous avez ?crit?:
> Hi everyone,
>
> I'm having some problems getting gdal to read netCDF grid files using
> gdal-1.5.2 which I have built from source.  It is running on an Ubuntu 8.04
> machine, and was built after the following dependencies were installed:
>
>     $ sudo apt-get install libnetcdf4 libnetcdf-dev netcdfg-dev netcdf-doc
> libhdf4g libhdf4g-dev libhdf5-serial-1.6.5-0 libhdf5-serial-1.6.5-0
> libhdf5-serial-dev
>
> I built gdal with the following options:
>
>     $ sudo ./configure --with-libz --with-pg=/usr/local/pgsql/bin/pg_config
> --with-netcdf --with-png --with-geotiff --with-jpeg --with-gif --with-hdf4
> --with-hdf5 --with-jasper --with-geos=/usr/local/bin/geos-config
> --with-python
>
> When I try to open the file with gdalinfo, I get the following seg fault in
> /var/log/syslog:
>
>     Nov 24 09:42:34 randre-linux kernel: [ 1921.499150] gdalinfo[6971]:
> segfault at 00001031 eip b713d886 esp bfefb390 error 4
>
> The same file can be opened with no problem using gdalinfo from
> FWTools-2.0.6
>
> Is it possible I am missing some netCDF/HDF fu needed for gdal to work with
> these sorts of files?
>
> Thanks in advance for any suggestions,
>
> Roger
> --


From randre at gmail.com  Mon Nov 24 14:57:51 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Mon Nov 24 14:57:53 2008
Subject: [gdal-dev] Re: gdal segmentation fault when reading NetCDF grid
	files
In-Reply-To: <9c2015090811241007j730e8d7aof400d1b33eda90ed@mail.gmail.com>
References: <9c2015090811241007j730e8d7aof400d1b33eda90ed@mail.gmail.com>
Message-ID: <9c2015090811241157r2af26f40h1cf67ef5c29df36@mail.gmail.com>

Sorry, should have trolled the Web first.  I see now that this is nothing
new, and is caused by a conflict between libnetcdf and libhdf4/5.  I've
resolved this by doing the following:

1. Removing all hdf libs from my system:
$ sudo apt-get remove libhdf4g libhdf4g-dev libhdf5-serial-1.6.5-0
libhdf5-serial-dev

2. Doing a "sudo make clean" in my /usr/local/gdal dir

3. Doing a new configure with "--with-hdf4=no --with-hdf5=no", then running
make.

Seems to work now,

Thanks.
--

On Mon, Nov 24, 2008 at 10:07 AM, Roger Andr? <randre@gmail.com> wrote:

> Hi everyone,
>
> I'm having some problems getting gdal to read netCDF grid files using
> gdal-1.5.2 which I have built from source.  It is running on an Ubuntu 8.04
> machine, and was built after the following dependencies were installed:
>
>     $ sudo apt-get install libnetcdf4 libnetcdf-dev netcdfg-dev netcdf-doc
> libhdf4g libhdf4g-dev libhdf5-serial-1.6.5-0 libhdf5-serial-1.6.5-0
> libhdf5-serial-dev
>
> I built gdal with the following options:
>
>     $ sudo ./configure --with-libz --with-pg=/usr/local/pgsql/bin/pg_config
> --with-netcdf --with-png --with-geotiff --with-jpeg --with-gif --with-hdf4
> --with-hdf5 --with-jasper --with-geos=/usr/local/bin/geos-config
> --with-python
>
> When I try to open the file with gdalinfo, I get the following seg fault in
> /var/log/syslog:
>
>     Nov 24 09:42:34 randre-linux kernel: [ 1921.499150] gdalinfo[6971]:
> segfault at 00001031 eip b713d886 esp bfefb390 error 4
>
> The same file can be opened with no problem using gdalinfo from
> FWTools-2.0.6
>
> Is it possible I am missing some netCDF/HDF fu needed for gdal to work with
> these sorts of files?
>
> Thanks in advance for any suggestions,
>
> Roger
> --
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081124/3b1687b3/attachment.html
From Shawn.Gong at drdc-rddc.gc.ca  Mon Nov 24 15:12:50 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Mon Nov 24 15:11:36 2008
Subject: [gdal-dev] does gdal support radarsat-2 NITF format ?
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E1202C0@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi list,

Does gdal (1.5.3 or 1.6 beta) support radarsat-2 SLC NITF format?  I
believe it is a 64-bit complex NITF.  if so, should I open the
product.xml or the imagery_HH.ntf?


thanks,
Shawn



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081124/a740bded/attachment.html
From Shawn.Gong at drdc-rddc.gc.ca  Mon Nov 24 16:12:40 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Mon Nov 24 16:11:27 2008
Subject: [gdal-dev] gdal 1.5.3 build error on Linux
In-Reply-To: <492AD0BE.9050200@pobox.com>
References: <DF1471B5C308B346BF5A2AEA00C5615E1202BC@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<492AD0BE.9050200@pobox.com>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E1202C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Thanks Frank.

I have tried to build on gdal 1.5.3 (w/o HDF) and overnight stable
branch. I got the same error message. But libgdal.so.1.12.3 was created
in gdal-1.5.3/.libs/

What is the problem?

========================================
/bin/sh /home/sgong/dev181/gdal-1.5.3/libtool --mode=compile --tag=CC
gcc -g -O2  -Wall -Wdeclaration-after-statement
-I/home/sgong/dev181/gdal-1.5.3/port
-I/home/sgong/dev181/gdal-1.5.3/gcore
-I/home/sgong/dev181/gdal-1.5.3/alg -I/home/sgong/dev181/gdal-1.5.3/ogr
-I/home/sgong/dev181/gdal-1.5.3/ogr/ogrsf_frmts
-I/home/sgong/dev181/gdal-1.5.3/frmts -DOGR_ENABLED
-I/home/sgong/dev181/gdal-1.5.3/port -I/home/sgong/dev181/dist
-I/home/sgong/dev181/dist/include  -c -o gdalinfo.o gdalinfo.c
libtool: compile:  gcc -g -O2 -Wall -Wdeclaration-after-statement
-I/home/sgong/dev181/gdal-1.5.3/port
-I/home/sgong/dev181/gdal-1.5.3/gcore
-I/home/sgong/dev181/gdal-1.5.3/alg -I/home/sgong/dev181/gdal-1.5.3/ogr
-I/home/sgong/dev181/gdal-1.5.3/ogr/ogrsf_frmts
-I/home/sgong/dev181/gdal-1.5.3/frmts -DOGR_ENABLED
-I/home/sgong/dev181/gdal-1.5.3/port -I/home/sgong/dev181/dist
-I/home/sgong/dev181/dist/include -c gdalinfo.c  -fPIC -DPIC -o
.libs/gdalinfo.o
libtool: compile:  gcc -g -O2 -Wall -Wdeclaration-after-statement
-I/home/sgong/dev181/gdal-1.5.3/port
-I/home/sgong/dev181/gdal-1.5.3/gcore
-I/home/sgong/dev181/gdal-1.5.3/alg -I/home/sgong/dev181/gdal-1.5.3/ogr
-I/home/sgong/dev181/gdal-1.5.3/ogr/ogrsf_frmts
-I/home/sgong/dev181/gdal-1.5.3/frmts -DOGR_ENABLED
-I/home/sgong/dev181/gdal-1.5.3/port -I/home/sgong/dev181/dist
-I/home/sgong/dev181/dist/include -c gdalinfo.c -o gdalinfo.o >/dev/null
2>&1
/bin/sh /home/sgong/dev181/gdal-1.5.3/libtool --mode=link       g++
gdalinfo.o  \
        /home/sgong/dev181/gdal-1.5.3/libgdal.la -o gdalinfo
libtool: link: g++ gdalinfo.o -o .libs/gdalinfo
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so -L/usr/local/lib
-L/home/sgong/dev181/dist/lib -L/home/sgong/dev181/dist -L/usr/lib
-L/usr/kerberos/lib
-L/home/marinier/gcc-4.2.2-build/i686-pc-linux-gnu/libstdc++-v3/src
-L/home/marinier/gcc-4.2.2-build/i686-pc-linux-gnu/libstdc++-v3/src/.lib
s -L/home/marinier/gcc-4.2.2-build/./gcc /usr/local/lib/libexpat.so
/home/sgong/dev181/dist/lib/libhdf5.so
/home/sgong/dev181/dist/lib/libsz.so -lmfhdf -ldf
/usr/local/lib/libsz.so -logdi31 /usr/lib/libjpeg.so -lpq -lrt
/usr/local/lib/libcurl.so -lldap -lssl -lcrypto -lgssapi_krb5 -lkrb5
-lcom_err -lk5crypto -lresolv -ldl -lz /usr/local/lib/libstdc++.so -lm
-lc -lgcc_s -Wl,-rpath -Wl,/home/sgong/dev181/dist/lib -Wl,-rpath
-Wl,/usr/local/lib/usr/bin/ld: warning: libcom_err.so.3, needed by
/usr/lib/libssl.so, may conflict with libcom_err.so.2
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::allocate(unsigned int)'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_S_free_list'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_Lock::~_Lock()'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_S_force_new'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_Lock::_Lock()'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::basic_string<char, std::char_traits<char>, std::allocator<char>
>::_Rep::_S_create(unsigned int, std::allocator<char> const&)'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_S_refill(unsigned int)'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::basic_string<char, std::char_traits<char>, std::allocator<char>
>::_S_empty_rep_storage'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_S_node_allocator_lock'
/home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::deallocate(void*, unsigned
int)'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/home/sgong/dev181/gdal-1.5.3/apps'
make: *** [apps-target] Error 2


thanks,
Shawn


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Monday, November 24, 2008 11:05 AM
To: Gong, Shawn (Contractor)
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdal 1.5.3 dependencies on Linux

Gong, Shawn (Contractor) wrote:
> hi list,
> 
> I am building gdal 1.5.3 on Linux (RHEL).
> 
> I build the dependencies as follows (this was what I used for gdal
1.4.0):
> 
> 1) glib 1.2.10
> 
> 2) gtk+ 1.2.10           # stay with gtk 1.3 now, I plan to upgrade to

> gtk 2 in near future
> 
> 3) Mesa 5.0.2 (Mesalib only, no demo, no glut)
> 
> 4) gtkglarea-1.2.2
> 
> 5) python 2.5.2
> 
> 6) pygtk-0.6.12
> 
> 7) gtk+extra-0.99.17
> 
> 8) python-gtkextra-0.22    # 6), 7) 8) are for gtk 1.3

Shawn,

The above are irrelevant for GDAL - they are OpenEV dependencies.

> 10) proj-4.4.7
> 
> 11) gdal external format libraries
> 
>  11a) zlib-1.2.3
> 
>  11b) jpeg-6b
> 
>  11c) szip-2.1
> 
>  11d) HDF5
> 
>  11e) HDF4
> 
> 12) gdal-1.5.3 (w/ rsat2 driver from 1.6 beta)

The above should generally be fine, though you weren't specific
about versions.  You might want to keep an eye on the
http://trac.osgeo.org/gdal/wiki/BuildHints for some details on
HDF4 and HDF5.

> Would someone confirm that the above dependencies are right?
> 
> another question about gcc, I have been using 
> /usr/lib/libstdc++.so.5.0.3, is it too old for gdal-1.5.3?

I am not aware of any specific dependencies on a libstdc++ version
in GDAL.  Generally the important thing is just to use the regular
versions that is associated with the g++ you are building with and
to avoid mixing or overriding.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From tvalleau at clarku.edu  Mon Nov 24 16:16:36 2008
From: tvalleau at clarku.edu (Tom V.)
Date: Mon Nov 24 16:16:43 2008
Subject: [gdal-dev] Slow createCopy()
Message-ID: <25833.198.151.13.15.1227561396.squirrel@cmail.clarku.edu>

Hi,

I'm using gdal 1.4.2 to write out NITF and GeoTiff images.  The
createCopy() call takes only a few minutes to write out a small file, 300
or so mb's, but takes anywhere from 1.5-3 hours to write out a single band
1.2 gb NITF or GeoTiff.  I have not tried a larger multi-spectral image.

The call looks like:
GDALDatasetH hOutDS = GDALCreateCopy( hDriver, pszDest, (GDALDatasetH)
poVDS, false, papszCreateOptions, pfnProgress, NULL );

with papszCreateOptions and pfnProgress being NULL in this case, hDriver
being the appropriate driver and, and poVDS being a vrtdataset.

If anyone has any idea why the larger files would take so long, that would
be awesome!

Thanks!

-Tom
From philippe at cowpig.ca  Mon Nov 24 16:21:12 2008
From: philippe at cowpig.ca (Philippe Vachon)
Date: Mon Nov 24 16:21:18 2008
Subject: [gdal-dev] does gdal support radarsat-2 NITF format ?
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E1202C0@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E1202C0@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <20081124212112.GA32441@cowpig.ca>

Hi Shawn,

I've never seen a NITF RADARSAT-2 image, so the RADARSAT-2 GDAL driver
was not designed to support NITF. Do you know if it's possible to get
some sample datasets in NITF format from somewhere?

At this point, if you want to read the NITF RS2 imagery, it's probably
safest to use the NITF files directly (i.e. use GDAL's support for
NITF).

Cheers,
Phil


On Mon, Nov 24, 2008 at 03:12:50PM -0500, Gong, Shawn (Contractor) wrote:
>    Hi list,
> 
>    Does gdal (1.5.3 or 1.6 beta) support radarsat-2 SLC NITF format?  I
>    believe it is a 64-bit complex NITF.  if so, should I open the product.xml
>    or the imagery_HH.ntf?
> 
>    thanks,
> 
>    Shawn

> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Mon Nov 24 15:39:32 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Nov 24 17:03:05 2008
Subject: [gdal-dev] Re: gdal segmentation fault when reading NetCDF grid
	files
In-Reply-To: <9c2015090811241157r2af26f40h1cf67ef5c29df36@mail.gmail.com>
References: <9c2015090811241007j730e8d7aof400d1b33eda90ed@mail.gmail.com>
	<9c2015090811241157r2af26f40h1cf67ef5c29df36@mail.gmail.com>
Message-ID: <200811242139.33068.even.rouault@mines-paris.org>

Just to mention that you could have kept hdf5 as it is unrelated to the 
netcdf / hdf4 issue

Le Monday 24 November 2008 20:57:51 Roger Andr?, vous avez ?crit?:
> Sorry, should have trolled the Web first.  I see now that this is nothing
> new, and is caused by a conflict between libnetcdf and libhdf4/5.  I've
> resolved this by doing the following:
>
> 1. Removing all hdf libs from my system:
> $ sudo apt-get remove libhdf4g libhdf4g-dev libhdf5-serial-1.6.5-0
> libhdf5-serial-dev
>
> 2. Doing a "sudo make clean" in my /usr/local/gdal dir
>
> 3. Doing a new configure with "--with-hdf4=no --with-hdf5=no", then running
> make.
>
> Seems to work now,
>
> Thanks.
> --
>
> On Mon, Nov 24, 2008 at 10:07 AM, Roger Andr? <randre@gmail.com> wrote:
> > Hi everyone,
> >
> > I'm having some problems getting gdal to read netCDF grid files using
> > gdal-1.5.2 which I have built from source.  It is running on an Ubuntu
> > 8.04 machine, and was built after the following dependencies were
> > installed:
> >
> >     $ sudo apt-get install libnetcdf4 libnetcdf-dev netcdfg-dev
> > netcdf-doc libhdf4g libhdf4g-dev libhdf5-serial-1.6.5-0
> > libhdf5-serial-1.6.5-0 libhdf5-serial-dev
> >
> > I built gdal with the following options:
> >
> >     $ sudo ./configure --with-libz
> > --with-pg=/usr/local/pgsql/bin/pg_config --with-netcdf --with-png
> > --with-geotiff --with-jpeg --with-gif --with-hdf4 --with-hdf5
> > --with-jasper --with-geos=/usr/local/bin/geos-config --with-python
> >
> > When I try to open the file with gdalinfo, I get the following seg fault
> > in /var/log/syslog:
> >
> >     Nov 24 09:42:34 randre-linux kernel: [ 1921.499150] gdalinfo[6971]:
> > segfault at 00001031 eip b713d886 esp bfefb390 error 4
> >
> > The same file can be opened with no problem using gdalinfo from
> > FWTools-2.0.6
> >
> > Is it possible I am missing some netCDF/HDF fu needed for gdal to work
> > with these sorts of files?
> >
> > Thanks in advance for any suggestions,
> >
> > Roger
> > --


From warmerdam at pobox.com  Mon Nov 24 17:10:13 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Nov 24 17:10:41 2008
Subject: [gdal-dev] Slow createCopy()
In-Reply-To: <25833.198.151.13.15.1227561396.squirrel@cmail.clarku.edu>
References: <25833.198.151.13.15.1227561396.squirrel@cmail.clarku.edu>
Message-ID: <492B2645.2030908@pobox.com>

Tom V. wrote:
> Hi,
> 
> I'm using gdal 1.4.2 to write out NITF and GeoTiff images.  The
> createCopy() call takes only a few minutes to write out a small file, 300
> or so mb's, but takes anywhere from 1.5-3 hours to write out a single band
> 1.2 gb NITF or GeoTiff.  I have not tried a larger multi-spectral image.
> 
> The call looks like:
> GDALDatasetH hOutDS = GDALCreateCopy( hDriver, pszDest, (GDALDatasetH)
> poVDS, false, papszCreateOptions, pfnProgress, NULL );
> 
> with papszCreateOptions and pfnProgress being NULL in this case, hDriver
> being the appropriate driver and, and poVDS being a vrtdataset.
> 
> If anyone has any idea why the larger files would take so long, that would
> be awesome!

Tom,

You didn't indicate much about the configuration of the input and output
files.  But I suspect cache thrashing.  If that is the case, upping the
memory cache size will help (dramatically).

Try setting the GDAL_CACHEMAX environment variable to 200 before running,
or call GDALSetCacheMax( 200 ).   This would use up to 200MB for the
intermediate block cache.  This is particular important when going from
scanline oriented formats to tile oriented formats or the other way around.

If this isn't already in the FAQ, it really needs to be!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Mon Nov 24 17:19:09 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Nov 24 17:19:13 2008
Subject: [gdal-dev] Slow createCopy()
In-Reply-To: <492B2645.2030908@pobox.com>
References: <25833.198.151.13.15.1227561396.squirrel@cmail.clarku.edu>
	<492B2645.2030908@pobox.com>
Message-ID: <200811242319.09904.even.rouault@mines-paris.org>

And even if your input and output datasets are scanline oriented, you are 
using a VRT as an intermediate, and VRT has blocks of size 128x128...

Le Monday 24 November 2008 23:10:13 Frank Warmerdam, vous avez ?crit?:
> Tom V. wrote:
> > Hi,
> >
> > I'm using gdal 1.4.2 to write out NITF and GeoTiff images.  The
> > createCopy() call takes only a few minutes to write out a small file, 300
> > or so mb's, but takes anywhere from 1.5-3 hours to write out a single
> > band 1.2 gb NITF or GeoTiff.  I have not tried a larger multi-spectral
> > image.
> >
> > The call looks like:
> > GDALDatasetH hOutDS = GDALCreateCopy( hDriver, pszDest, (GDALDatasetH)
> > poVDS, false, papszCreateOptions, pfnProgress, NULL );
> >
> > with papszCreateOptions and pfnProgress being NULL in this case, hDriver
> > being the appropriate driver and, and poVDS being a vrtdataset.
> >
> > If anyone has any idea why the larger files would take so long, that
> > would be awesome!
>
> Tom,
>
> You didn't indicate much about the configuration of the input and output
> files.  But I suspect cache thrashing.  If that is the case, upping the
> memory cache size will help (dramatically).
>
> Try setting the GDAL_CACHEMAX environment variable to 200 before running,
> or call GDALSetCacheMax( 200 ).   This would use up to 200MB for the
> intermediate block cache.  This is particular important when going from
> scanline oriented formats to tile oriented formats or the other way around.
>
> If this isn't already in the FAQ, it really needs to be!
>
> Best regards,


From mike at stamen.com  Mon Nov 24 17:15:14 2008
From: mike at stamen.com (Michal Migurski)
Date: Mon Nov 24 17:21:56 2008
Subject: [gdal-dev] GDALRasterBand::GetUnitType() is not available in Python
Message-ID: <FB2BEBA4-BCF5-428A-8C1E-CF443D3A53E0@stamen.com>

Hello,

I'm following up on this mail from a few months ago:
	http://lists.osgeo.org/pipermail/gdal-dev/2008-June/017358.html

Have there been any patches or workarounds for this issue? I'm using a  
collection .dem files that mix feet & meters, and I can't see any  
other way to access the unit information.

Thanks,
-mike.

----------------------------------------------------------------
michal migurski- mike@stamen.com
                  415.558.1610



From even.rouault at mines-paris.org  Mon Nov 24 16:49:33 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Nov 24 17:43:46 2008
Subject: [gdal-dev] gdal 1.5.3 build error on Linux
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E1202C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E1202BC@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<492AD0BE.9050200@pobox.com>
	<DF1471B5C308B346BF5A2AEA00C5615E1202C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <200811242249.34037.even.rouault@mines-paris.org>

Shawn,

In the line where gdalinfo is linked, I see both :
-L/home/marinier/gcc-4.2.2-build/i686-pc-linux-gnu/libstdc++-v3/src/.libs
and
/usr/local/lib/libstdc++.so

That looks like a possible mix of libstdc++ versions...

To make some progress by yourself, I think you should really proceed 
step-by-step, that is to say begin by configuring GDAL by disabling all 
external drivers (really I mean all. See 
http://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers), make 
clean and make
And then, add a new external library, one at a time, until you find the 
culprit.

You currently link, explicitely and implicitely, to many external libraries, 
some in /usr/lib (should be no problem theoretically), some 
in /usr/local/lib, some in your home, some in apparently other homes.... :
- curl
- expat
- libz
- libsz
- ogdi
- hdf4
- hdf5
- jpeg

Good luck!

Best regards

Le Monday 24 November 2008 22:12:40, vous avez ?crit?:
> Thanks Frank.
>
> I have tried to build on gdal 1.5.3 (w/o HDF) and overnight stable
> branch. I got the same error message. But libgdal.so.1.12.3 was created
> in gdal-1.5.3/.libs/
>
> What is the problem?
>
> ========================================
> /bin/sh /home/sgong/dev181/gdal-1.5.3/libtool --mode=compile --tag=CC
> gcc -g -O2  -Wall -Wdeclaration-after-statement
> -I/home/sgong/dev181/gdal-1.5.3/port
> -I/home/sgong/dev181/gdal-1.5.3/gcore
> -I/home/sgong/dev181/gdal-1.5.3/alg -I/home/sgong/dev181/gdal-1.5.3/ogr
> -I/home/sgong/dev181/gdal-1.5.3/ogr/ogrsf_frmts
> -I/home/sgong/dev181/gdal-1.5.3/frmts -DOGR_ENABLED
> -I/home/sgong/dev181/gdal-1.5.3/port -I/home/sgong/dev181/dist
> -I/home/sgong/dev181/dist/include  -c -o gdalinfo.o gdalinfo.c
> libtool: compile:  gcc -g -O2 -Wall -Wdeclaration-after-statement
> -I/home/sgong/dev181/gdal-1.5.3/port
> -I/home/sgong/dev181/gdal-1.5.3/gcore
> -I/home/sgong/dev181/gdal-1.5.3/alg -I/home/sgong/dev181/gdal-1.5.3/ogr
> -I/home/sgong/dev181/gdal-1.5.3/ogr/ogrsf_frmts
> -I/home/sgong/dev181/gdal-1.5.3/frmts -DOGR_ENABLED
> -I/home/sgong/dev181/gdal-1.5.3/port -I/home/sgong/dev181/dist
> -I/home/sgong/dev181/dist/include -c gdalinfo.c  -fPIC -DPIC -o
> .libs/gdalinfo.o
> libtool: compile:  gcc -g -O2 -Wall -Wdeclaration-after-statement
> -I/home/sgong/dev181/gdal-1.5.3/port
> -I/home/sgong/dev181/gdal-1.5.3/gcore
> -I/home/sgong/dev181/gdal-1.5.3/alg -I/home/sgong/dev181/gdal-1.5.3/ogr
> -I/home/sgong/dev181/gdal-1.5.3/ogr/ogrsf_frmts
> -I/home/sgong/dev181/gdal-1.5.3/frmts -DOGR_ENABLED
> -I/home/sgong/dev181/gdal-1.5.3/port -I/home/sgong/dev181/dist
> -I/home/sgong/dev181/dist/include -c gdalinfo.c -o gdalinfo.o >/dev/null
> 2>&1
> /bin/sh /home/sgong/dev181/gdal-1.5.3/libtool --mode=link       g++
> gdalinfo.o  \
>         /home/sgong/dev181/gdal-1.5.3/libgdal.la -o gdalinfo
> libtool: link: g++ gdalinfo.o -o .libs/gdalinfo
> /home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so -L/usr/local/lib
> -L/home/sgong/dev181/dist/lib -L/home/sgong/dev181/dist -L/usr/lib
> -L/usr/kerberos/lib
> -L/home/marinier/gcc-4.2.2-build/i686-pc-linux-gnu/libstdc++-v3/src
> -L/home/marinier/gcc-4.2.2-build/i686-pc-linux-gnu/libstdc++-v3/src/.lib
> s -L/home/marinier/gcc-4.2.2-build/./gcc /usr/local/lib/libexpat.so
> /home/sgong/dev181/dist/lib/libhdf5.so
> /home/sgong/dev181/dist/lib/libsz.so -lmfhdf -ldf
> /usr/local/lib/libsz.so -logdi31 /usr/lib/libjpeg.so -lpq -lrt
> /usr/local/lib/libcurl.so -lldap -lssl -lcrypto -lgssapi_krb5 -lkrb5
> -lcom_err -lk5crypto -lresolv -ldl -lz /usr/local/lib/libstdc++.so -lm
> -lc -lgcc_s -Wl,-rpath -Wl,/home/sgong/dev181/dist/lib -Wl,-rpath
> -Wl,/usr/local/lib/usr/bin/ld: warning: libcom_err.so.3, needed by
> /usr/lib/libssl.so, may conflict with libcom_err.so.2
> /home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
> `std::__default_alloc_template<true, 0>::allocate(unsigned int)'
> /home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
> `std::__default_alloc_template<true, 0>::_S_free_list'
> /home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
> `std::__default_alloc_template<true, 0>::_Lock::~_Lock()'
> /home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
> `std::__default_alloc_template<true, 0>::_S_force_new'
> /home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
> `std::__default_alloc_template<true, 0>::_Lock::_Lock()'
> /home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
> `std::basic_string<char, std::char_traits<char>, std::allocator<char>
>
> >::_Rep::_S_create(unsigned int, std::allocator<char> const&)'
>
> /home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
> `std::__default_alloc_template<true, 0>::_S_refill(unsigned int)'
> /home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
> `std::basic_string<char, std::char_traits<char>, std::allocator<char>
>
> >::_S_empty_rep_storage'
>
> /home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
> `std::__default_alloc_template<true, 0>::_S_node_allocator_lock'
> /home/sgong/dev181/gdal-1.5.3/.libs/libgdal.so: undefined reference to
> `std::__default_alloc_template<true, 0>::deallocate(void*, unsigned
> int)'
> collect2: ld returned 1 exit status
> make[1]: *** [gdalinfo] Error 1
> make[1]: Leaving directory `/home/sgong/dev181/gdal-1.5.3/apps'
> make: *** [apps-target] Error 2
>
>
> thanks,
> Shawn
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
> Sent: Monday, November 24, 2008 11:05 AM
> To: Gong, Shawn (Contractor)
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] gdal 1.5.3 dependencies on Linux
>
> Gong, Shawn (Contractor) wrote:
> > hi list,
> >
> > I am building gdal 1.5.3 on Linux (RHEL).
> >
> > I build the dependencies as follows (this was what I used for gdal
>
> 1.4.0):
> > 1) glib 1.2.10
> >
> > 2) gtk+ 1.2.10           # stay with gtk 1.3 now, I plan to upgrade to
> >
> > gtk 2 in near future
> >
> > 3) Mesa 5.0.2 (Mesalib only, no demo, no glut)
> >
> > 4) gtkglarea-1.2.2
> >
> > 5) python 2.5.2
> >
> > 6) pygtk-0.6.12
> >
> > 7) gtk+extra-0.99.17
> >
> > 8) python-gtkextra-0.22    # 6), 7) 8) are for gtk 1.3
>
> Shawn,
>
> The above are irrelevant for GDAL - they are OpenEV dependencies.
>
> > 10) proj-4.4.7
> >
> > 11) gdal external format libraries
> >
> >  11a) zlib-1.2.3
> >
> >  11b) jpeg-6b
> >
> >  11c) szip-2.1
> >
> >  11d) HDF5
> >
> >  11e) HDF4
> >
> > 12) gdal-1.5.3 (w/ rsat2 driver from 1.6 beta)
>
> The above should generally be fine, though you weren't specific
> about versions.  You might want to keep an eye on the
> http://trac.osgeo.org/gdal/wiki/BuildHints for some details on
> HDF4 and HDF5.
>
> > Would someone confirm that the above dependencies are right?
> >
> > another question about gcc, I have been using
> > /usr/lib/libstdc++.so.5.0.3, is it too old for gdal-1.5.3?
>
> I am not aware of any specific dependencies on a libstdc++ version
> in GDAL.  Generally the important thing is just to use the regular
> versions that is associated with the g++ you are building with and
> to avoid mixing or overriding.
>
> Best regards,


From yann.chemin at gmail.com  Mon Nov 24 19:36:09 2008
From: yann.chemin at gmail.com (Yann Chemin)
Date: Mon Nov 24 19:36:12 2008
Subject: [gdal-dev] using GDALCreateCopy and changing only the datatype
In-Reply-To: <492ADC93.5010305@pobox.com>
References: <4f37eb890811240510v4367b9d2gc299772ddf25bff8@mail.gmail.com>
	<492ADC93.5010305@pobox.com>
Message-ID: <4f37eb890811241636g358200fdkd8f7f2fb2ba86e3b@mail.gmail.com>

Yes I can see a bit through it,
and I believe the most involved is getting Projection info through...

For a single output band with ncols(nXSize1) and nrows (nYSize1) in
Float32, I can generate an output.
hDataset[n_imgs] =
GDALCreate(hDriver[0],out,nXSize1,nYSize1,1,GDT_Float32,NULL);
But it is not georeferenced.

need a bit of reading indeed.
Thanks,
Yann


2008/11/25 Frank Warmerdam <warmerdam@pobox.com>:
> Yann Chemin wrote:
>>
>> Hello,
>>
>> I would like to use GDALCreateCopy and change the datatype from int32
>> to float32.
>>
>>        GDALDatasetH hDatasetOut0;
>>        hDatasetOut0 = GDALCreateCopy( hDriver1, ndviF,
>>                                hDataset1,FALSE,NULL,NULL,NULL);
>>        GDALRasterBandH hBandOut0;
>>        hBandOut0 = GDALGetRasterBand(hDatasetOut0,1);
>
> Yann,
>
> Generally speaking to do this with CreateCopy() you would need to create
> an intermediate virtual dataset with the altered pixel data type.  This is
> how the -ot flag of gdal_translate works.   You can review the
> gdal_translate.cpp code as an example, though it is somewhat involved.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>



-- 
Yann Chemin
International Rice Research Institute
Office: http://www.irri.org/gis
Perso: http://www.freewebs.com/ychemin
YiKingDo: http://yikingdo.unblog.fr/
From daniele.romagnoli at geo-solutions.it  Tue Nov 25 05:08:06 2008
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Tue Nov 25 05:08:10 2008
Subject: [gdal-dev] Question about JP2Kakadu driver: read on big images may
	cause "Failed to allocate N byte intermediate decompression
	buffer for jpeg2000"
Message-ID: <7221db410811250208j7b84c311tde08f306be09b7d2@mail.gmail.com>

Hi list,
I have a 3 bands 21600x21600 jp2K image and I wish to read it as a
21600x5400 (doing a 4:1 subsampling along Y). [I'm using GDAL 1.5.3]
When doing this read, the DirectRasterIO method gives this error:
"Failed to allocate 1399680000 byte intermediate decompression buffer for
jpeg2000."

Debugging the code I have noticed this:
Firstly, it looks for a proper number of levels to be discarded to reduce
the amount of data to be read.
In this case, being a request of 1:1 along X, no decomposition levels can be
discarded. Then it needs to read the image at its maximum resolution and
then do a subsampling on it.
This step requires to allocate a buffer where to store original data to be
afterwards subsampled. However, depending on the imagesize, this
preallocation (with VSIMalloc) may fail on very big images (my case).

Is there a solution for this problem?

- I have noticed that using GDAL_FORCE_CACHING will use the block based read
method (IReadBlock) which doesn't use that section of code.
- Maybe, when working on big images, splitting the read in several
kdu_stripe_decompressor.pull_stripe calls (with stripeHeights < imageHeight)
on a reduced buffer to be subsampled for each iteration, could be a
solution.

Any suggestions?

Thank you very much.

Regards,
Daniele

-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081125/9cfb3430/attachment-0001.html
From darius.jocius at gmail.com  Tue Nov 25 09:36:32 2008
From: darius.jocius at gmail.com (Darius Jocius)
Date: Tue Nov 25 09:36:34 2008
Subject: [gdal-dev] Does OGR library supports ESRI file geodatabase?
Message-ID: <5a61c560811250636y3941c337t579bc7127b7265d8@mail.gmail.com>

Hi,
I checked the supported format list and find that OGR library supports
ESRI Personal GeoDatabase format. What about ESRI File GeoDatabase
(older format of ESRI GeoDatabase)? Is there any way to read it
without any ESRI tools?

Thanks a lot,
Darius
From warmerdam at pobox.com  Tue Nov 25 09:51:47 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov 25 09:52:23 2008
Subject: [gdal-dev] Does OGR library supports ESRI file geodatabase?
In-Reply-To: <5a61c560811250636y3941c337t579bc7127b7265d8@mail.gmail.com>
References: <5a61c560811250636y3941c337t579bc7127b7265d8@mail.gmail.com>
Message-ID: <492C1103.8080308@pobox.com>

Darius Jocius wrote:
> Hi,
> I checked the supported format list and find that OGR library supports
> ESRI Personal GeoDatabase format. What about ESRI File GeoDatabase
> (older format of ESRI GeoDatabase)? Is there any way to read it
> without any ESRI tools?

Darius,

ESRI File Geodatabase is a newer format than personal geodatabases.
Currently file geodatabase is not supported by OGR as the format is
not published, and is hard to reverse engineer.  We have reason to hope
that in the coming years ESRI will provide an open access mechanism for
file geodatabase as they have indicated an intention to do so. But that is
unlikely to help you in the short term.

I'd suggest having someone with arcgis convert the file geodatabase to
another easier to access format like shapefiles or even personal geodatabase.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From SimonA at esdm.co.uk  Tue Nov 25 12:05:41 2008
From: SimonA at esdm.co.uk (Simon Allen)
Date: Tue Nov 25 12:34:51 2008
Subject: [gdal-dev] OGR2OGR Personal GeoDatabases Append
Message-ID: <B977CEA3985CE14C9B59AF6FBA22FCE553B534@esdmserver.smallbusiness.local>

Hi

 

I have two PGeoDBs and I wish the output to be a single MapInfo layer.
Is it possible with OGR2OGR to convert a Personal GeoDB to a MapInfo
layer and append the output to an existing MapInfo Layer? 

 

Thanks

 

Simon Allen

CAMS Consultant

exeGesIS SDM Ltd.

 

simona@esdm.co.uk

01874 713076

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081125/a0520fb7/attachment.html
From even.rouault at mines-paris.org  Tue Nov 25 14:13:54 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Nov 25 14:14:04 2008
Subject: [gdal-dev] Slow createCopy()
In-Reply-To: <16930.198.151.13.15.1227615266.squirrel@cmail.clarku.edu>
References: <25833.198.151.13.15.1227561396.squirrel@cmail.clarku.edu>
	<200811242319.09904.even.rouault@mines-paris.org>
	<16930.198.151.13.15.1227615266.squirrel@cmail.clarku.edu>
Message-ID: <200811252013.56127.even.rouault@mines-paris.org>

Tom,

I've created a 1.2 GB NITF image whose characteristics are :
Driver: NITF/National Imagery Transmission Format
Files: big.ntf
Size is 30000, 20000
....
Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Gray

What is the size (width x height) of your input image ?

Then with GDAL 1.4.2, I did : "gdal_translate big.ntf big.tif"

and yes, it was going to take hours due to cache thrashing.

Then I retried with Frank's suggestion :
"gdal_translate --config GDAL_CACHEMAX 200 big.ntf big.tif"

and it took about 1 minute 30'', so I'm not sure why you don't see major 
improvement.

(In fact you just need 30000 (=image width) * 1024 (=block height) * 2 
(sizeof(uint16))~= 60 MB of cache, so 59 causes cache trashing, but 61 not)

The CreateCopy() in GDAL 1.4.X was a bit suboptimal when the input is tiled 
and the output TIFF is scanline oriented. This has been fixed in GDAL 1.5.0 
and later where you don't need a huge cache size.

A workaround would be to tile your resulting GeoTIFF image like :
"gdal_translate big.ntf big.tif -co TILED=YES -co BLOCKXSIZE=1024 -co 
BLOCKYSIZE=1024"

This runs in about 1 minute 30' too.

And with GDAL 1.5.3, "gdal_translate big.ntf big.tif" takes 1 minute 30'' too

Anyway I'd suggest you to retry with a more recent GDAL release (1.5.3 or 
1.6.0beta) to see if it helps improving things. Otherwise you should post a 
more comprehensive code snippet that reproduces your problem. 

You mention the use of a VRT but we don't know what's inside, etc... that's 
probably the difference between the above experiments and your use case.

Best regards,

Even

Le Tuesday 25 November 2008 13:14:26, vous avez ?crit?:
> Thanks for your help, this did help to speed it up, but it's still taking
> 1.5 hours (in debug mode, but still) to put out a 1.2 gb GeoTiff image.
>
> the input image is a one band (Type=UInt16) 1.2 gb NITF, with Band 1 Block
> = 1024X1024.  If there's any other information that would be useful, let
> me know.
>
> Is there anything else that could be choking it up?
>
> > And even if your input and output datasets are scanline oriented, you are
> > using a VRT as an intermediate, and VRT has blocks of size 128x128...
> >
> > Le Monday 24 November 2008 23:10:13 Frank Warmerdam, vous avez ?crit?:
> >> Tom V. wrote:
> >> > Hi,
> >> >
> >> > I'm using gdal 1.4.2 to write out NITF and GeoTiff images.  The
> >> > createCopy() call takes only a few minutes to write out a small file,
> >>
> >> 300
> >>
> >> > or so mb's, but takes anywhere from 1.5-3 hours to write out a single
> >> > band 1.2 gb NITF or GeoTiff.  I have not tried a larger multi-spectral
> >> > image.
> >> >
> >> > The call looks like:
> >> > GDALDatasetH hOutDS = GDALCreateCopy( hDriver, pszDest, (GDALDatasetH)
> >> > poVDS, false, papszCreateOptions, pfnProgress, NULL );
> >> >
> >> > with papszCreateOptions and pfnProgress being NULL in this case,
> >>
> >> hDriver
> >>
> >> > being the appropriate driver and, and poVDS being a vrtdataset.
> >> >
> >> > If anyone has any idea why the larger files would take so long, that
> >> > would be awesome!
> >>
> >> Tom,
> >>
> >> You didn't indicate much about the configuration of the input and output
> >> files.  But I suspect cache thrashing.  If that is the case, upping the
> >> memory cache size will help (dramatically).
> >>
> >> Try setting the GDAL_CACHEMAX environment variable to 200 before
> >> running,
> >> or call GDALSetCacheMax( 200 ).   This would use up to 200MB for the
> >> intermediate block cache.  This is particular important when going from
> >> scanline oriented formats to tile oriented formats or the other way
> >> around.
> >>
> >> If this isn't already in the FAQ, it really needs to be!
> >>
> >> Best regards,


From warmerdam at pobox.com  Tue Nov 25 14:38:08 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Nov 25 14:38:53 2008
Subject: [gdal-dev] does gdal support radarsat-2 NITF format ?
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E1202C0@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E1202C0@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <492C5420.20101@pobox.com>

Gong, Shawn (Contractor) wrote:
> Hi list,
> 
> Does gdal (1.5.3 or 1.6 beta) support radarsat-2 SLC NITF format?  I 
> believe it is a 64-bit complex NITF.  if so, should I open the 
> product.xml or the imagery_HH.ntf?

Shawn,

As mentioned, I don't think the Radarsat 2 product.xml driver supports
NITF though it might by virtue of not really paying attention to the
image format (just using GDAL for it).

However, I believe the NITF driver does not currently support 64bit
complex NITF files.  So a little work may be required in that driver
to get this working.  I don't suppose there are sample files that
can be made available for development purposes?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From wef1 at cec.wustl.edu  Wed Nov 26 11:43:44 2008
From: wef1 at cec.wustl.edu (Edward Fialkowski)
Date: Wed Nov 26 11:43:46 2008
Subject: [Gdal-dev] problems warping a netcdf file
In-Reply-To: <491DF315.9000102@sfos.uaf.edu>
References: <20504569.post@talk.nabble.com> <491DF315.9000102@sfos.uaf.edu>
Message-ID: <f4c7e92f0811260843r2167abddv16e88da9d30d4112@mail.gmail.com>

Steve, that write up was excellent.  Thank you for that.  You
definitely weren't telling me anything I already know.
If I could just get a little more help, I think I'm so close.  My
output file seems to have problems.  The resulting image is 25k, but
it's just black.
Gdalinfo on the resulting geotiff (test.tif):
Driver: GTiff/GeoTIFF
Size is 119, 152
Coordinate System is:
GEOGCS["WGS 84",
   DATUM["unknown",
       SPHEROID["unnamed",6378137,298.2572235630016]],
   PRIMEM["Greenwich",0],
   UNIT["degree",0.0174532925199433]]
Origin = (-113.117651610910784,60.203870178822328)
Pixel Size = (0.135957945826561,-0.135957945826561)
Metadata:
 AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (-113.1176516,  60.2038702) (113d 7'3.55"W, 60d12'13.93"N)
Lower Left  (-113.1176516,  39.5382624) (113d 7'3.55"W, 39d32'17.74"N)
Upper Right ( -96.9386561,  60.2038702) ( 96d56'19.16"W, 60d12'13.93"N)
Lower Right ( -96.9386561,  39.5382624) ( 96d56'19.16"W, 39d32'17.74"N)
Center      (-105.0281538,  49.8710663) (105d 1'41.35"W, 49d52'15.84"N)
Band 1 Block=119x68 Type=Byte, ColorInterp=Gray

(Coordinates look pretty good, just about over US)

I wasn't completely clear on the correct syntax for the proj call, the
first few I tried gave me a 0 dx and dy, so here's the best I got:
proj +proj=lcc +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97 +a=6370000
+b=6370000 <<EOF
> 0_0_0 0_0_0
> 148_ny_nx 112_ny_nx
> EOF
replaced ("LON" with 148 and "LAT" with 112, my lower right point is
148.0,112.0)
which gives me:
10908379.76     1690481.54_0_0 0_0_0
-11877294.73    3954472.04_ny_nx 112_ny_nx

gives me dx=-6591.2583, dy=20396.3108
You said geoTransform is x0-dx/2, dx, 0, y0-dy/2, dy.  I'm hoping x0
and y0 are 0 (upper left?)
<GeoTransform>3295.62915, -6591.2583, 0.0, -10198.1554, 0.0,
20396.3108</GeoTransform>
in form of x0-dx/2, dx, 0, y0-dy/2, 0, dy

I hate to ask you to check all my syntax after such amazing help, but
I would be incredibly grateful.
Thanks again.
-Ed
From wef1 at cec.wustl.edu  Wed Nov 26 16:17:55 2008
From: wef1 at cec.wustl.edu (Edward Fialkowski)
Date: Wed Nov 26 16:17:57 2008
Subject: [Gdal-dev] problems warping a netcdf file
In-Reply-To: <f4c7e92f0811260823q44fabc97m639f7b2df31a596@mail.gmail.com>
References: <20504569.post@talk.nabble.com> <491DF315.9000102@sfos.uaf.edu>
	<f4c7e92f0811260823q44fabc97m639f7b2df31a596@mail.gmail.com>
Message-ID: <f4c7e92f0811261317q63bab6dak16c4ef80070af320@mail.gmail.com>

And that would be what happens when you view a geotiff in a program
that isn't made for geotiffs.  I got my image, it's reprojected, and
rotated a bit so I'm going to look into my numbers, but I think I've
got the process down.

Just wanted to say thanks again to everyone that offered help.
-Ed
From gaffigan at sfos.uaf.edu  Wed Nov 26 16:54:36 2008
From: gaffigan at sfos.uaf.edu (Steve Gaffigan)
Date: Wed Nov 26 17:06:14 2008
Subject: [Gdal-dev] problems warping a netcdf file
In-Reply-To: <f4c7e92f0811260823q44fabc97m639f7b2df31a596@mail.gmail.com>
References: <20504569.post@talk.nabble.com> <491DF315.9000102@sfos.uaf.edu>
	<f4c7e92f0811260823q44fabc97m639f7b2df31a596@mail.gmail.com>
Message-ID: <492DC59C.1090604@sfos.uaf.edu>

Ed,

Glad to hear you're making good progress.  I wasn't clear in describing 
the proj call.  In the GeoTransform, (X0,Y0) is the upper left corner of 
the source grid in coordinates of the source projection.  From the 
lon/lat grids from your source dataset, you can find the lon/lat of the 
upper left corner, (lon0,lat0), and lower right corner (lon1,lat1) of 
your grid.  The question is "what coordinates, (X0,Y0) and (X1,Y1), in 
the source projection correspond to (lon0,lat0) and (lon1,lat1)?"  The 
proj call below answers questions of this form:

proj +proj=lcc +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97 +a=6370000 
+b=6370000 <<EOF
LON0 LAT0
LON1 LAT1
EOF

Where you should replace LON0, LAT0, LON1, LAT1 with the 
upper_left_longitude, upper_left_latitude, lower_right_longitude, and 
lower_right_latitude from your grid, respectively.

Good luck.

Steve


Ed Fialkowski wrote:
> Steve, that write up was excellent.  Thank you for that.  You
> definitely weren't telling me anything I already know.
> If I could just get a little more help, I think I'm so close.  My
> output file seems to have problems.  The resulting image is 25k, but
> it's just black.
> Gdalinfo on the resulting geotiff (test.tif):
> Driver: GTiff/GeoTIFF
> Size is 119, 152
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["unknown",
>         SPHEROID["unnamed",6378137,298.2572235630016]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433]]
> Origin = (-113.117651610910784,60.203870178822328)
> Pixel Size = (0.135957945826561,-0.135957945826561)
> Metadata:
>   AREA_OR_POINT=Area
> Corner Coordinates:
> Upper Left  (-113.1176516,  60.2038702) (113d 7'3.55"W, 60d12'13.93"N)
> Lower Left  (-113.1176516,  39.5382624) (113d 7'3.55"W, 39d32'17.74"N)
> Upper Right ( -96.9386561,  60.2038702) ( 96d56'19.16"W, 60d12'13.93"N)
> Lower Right ( -96.9386561,  39.5382624) ( 96d56'19.16"W, 39d32'17.74"N)
> Center      (-105.0281538,  49.8710663) (105d 1'41.35"W, 49d52'15.84"N)
> Band 1 Block=119x68 Type=Byte, ColorInterp=Gray
> 
> (Coordinates look pretty good, just about over US)
> 
> I wasn't completely clear on the correct syntax for the proj call, the
> first few I tried gave me a 0 dx and dy, so here's the best I got:
> proj +proj=lcc +lat_1=33 +lat_2=45 +lat_0=40 +lon_0=-97 +a=6370000
> +b=6370000 <<EOF
>> 0_0_0 0_0_0
>> 148_ny_nx 112_ny_nx
>> EOF
> replaced ("LON" with 148 and "LAT" with 112, my lower right point is
> 148.0,112.0)
> which gives me:
> 10908379.76     1690481.54_0_0 0_0_0
> -11877294.73    3954472.04_ny_nx 112_ny_nx
> 
> gives me dx=-6591.2583, dy=20396.3108
> You said geoTransform is x0-dx/2, dx, 0, y0-dy/2, dy.  I'm hoping x0
> and y0 are 0 (upper left?)
> <GeoTransform>3295.62915, -6591.2583, 0.0, -10198.1554, 0.0,
> 20396.3108</GeoTransform>
> in form of x0-dx/2, dx, 0, y0-dy/2, 0, dy
> 
> I hate to ask you to check all my syntax after such amazing help, but
> I would be incredibly grateful.
> Thanks again.
> -Ed
From pramsey at cleverelephant.ca  Wed Nov 26 17:43:21 2008
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed Nov 26 17:43:26 2008
Subject: [gdal-dev] Toronto Code Sprint
Message-ID: <30fe546d0811261443y19128a7fg486fe84afa4969fb@mail.gmail.com>

A reminder, if you're interested in joining a winter code sprint in
Toronto, please sign up at the wiki page:

http://wiki.osgeo.org/wiki/Toronto_Code_Sprint_2009

Knowing tentative numbers will help us plan better.  We're also
looking for sponsors to keep the troops fed and watered.

P.
From benjamin.r.welton at wmich.edu  Wed Nov 26 21:10:10 2008
From: benjamin.r.welton at wmich.edu (Benjamin Welton)
Date: Wed Nov 26 21:16:07 2008
Subject: [gdal-dev] Need help converting a geotiff file to jpg/tiff/bmp
Message-ID: <492E0182.9030707@wmich.edu>

Hello everyone,

Im quite new to using GDAL and what i would like to do is convert a 
geotiff file to a standard jpeg/tiff/bmp image file so that it can be 
viewed by any standard image reading software (ideally i would like to 
be able to display said image using wxPython) . Every time i try to 
convert an image it creates ether an image that is not compatible with 
some basic image viewing/editing tools or it creates and image that is 
monochrome and all detail of the image is lost. What would be the best 
way to go about creating a standard jpeg/tiff/bmp so that it can be 
viewed in basic image editing/viewing tools? The geotiff is a int16 
datatype file and i do not really need to keep any of the actual 
georeferencing information contained in the geotiff file.

Here is the python code that i am using to convert the image to a 
standard tiff file:
dataset = gdal.Open( "C:\\Geotiff.tif", GA_ReadOnly )
format = "GTiff"
driver = gdal.GetDriverByName( format )
metadata = driver.GetMetadata()
dst_ds = driver.CreateCopy("C:\\Example.tiff",dataset,0, 
["PROFILE=BASELINE"] )

Any help anyone could provide to me would be great.

Ben
From warmerdam at pobox.com  Wed Nov 26 21:31:36 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 26 21:31:53 2008
Subject: [gdal-dev] Need help converting a geotiff file to jpg/tiff/bmp
In-Reply-To: <492E0182.9030707@wmich.edu>
References: <492E0182.9030707@wmich.edu>
Message-ID: <492E0688.3050307@pobox.com>

Benjamin Welton wrote:
> Hello everyone,
> 
> Im quite new to using GDAL and what i would like to do is convert a 
> geotiff file to a standard jpeg/tiff/bmp image file so that it can be 
> viewed by any standard image reading software (ideally i would like to 
> be able to display said image using wxPython) . Every time i try to 
> convert an image it creates ether an image that is not compatible with 
> some basic image viewing/editing tools or it creates and image that is 
> monochrome and all detail of the image is lost. What would be the best 
> way to go about creating a standard jpeg/tiff/bmp so that it can be 
> viewed in basic image editing/viewing tools? The geotiff is a int16 
> datatype file and i do not really need to keep any of the actual 
> georeferencing information contained in the geotiff file.
> 
> Here is the python code that i am using to convert the image to a 
> standard tiff file:
> dataset = gdal.Open( "C:\\Geotiff.tif", GA_ReadOnly )
> format = "GTiff"
> driver = gdal.GetDriverByName( format )
> metadata = driver.GetMetadata()
> dst_ds = driver.CreateCopy("C:\\Example.tiff",dataset,0, 
> ["PROFILE=BASELINE"] )
> 
> Any help anyone could provide to me would be great.

Ben,

How many bands does the int16 geotiff file have?

Generally, the hard part here is converting the int16 image pixels to
Byte to produce a fairly universal output file.  The proper way to do
this would likely be to create an intermediate virtual file that applies
scaling and a conversion of data type; however, this may be fairly
involved.

I'm also concerned that you have a one band file and that you are hoping
for colorization based on some undefined scheme, but I'll need to know
more about the source file to know the answer to that.

The following VRT file demonstrates using a ComplexSource to rescale
an image from 16bit to 8bit.  You could construct something similar
to use in your Python (substituting in appropriate sizes, extra bands,
etc).

<VRTDataset rasterXSize="512" rasterYSize="512">
   <VRTRasterBand dataType="Byte" band="1">
     <ComplexSource>
       <SourceFilename relativeToVRT="1">utm.tif</SourceFilename>
       <SourceBand>1</SourceBand>
       <SrcRect xOff="0" yOff="0" xSize="512" ySize="512"/>
       <DstRect xOff="0" yOff="0" xSize="512" ySize="512"/>
       <ScaleOffset>0</ScaleOffset>
       <ScaleRatio>0.085</ScaleRatio>
     </ComplexSource>
   </VRTRasterBand>
</VRTDataset>

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From cryan at csse.com.au  Thu Nov 27 19:32:12 2008
From: cryan at csse.com.au (Fodder)
Date: Thu Nov 27 19:32:14 2008
Subject: Re[Gdal-dev] ndering optimization [Re: Looking for huge
	vector dataset]
In-Reply-To: <45F128C5.5080507@openplans.org>
References: <45E9A49B.80201@loskot.net> <45EAE55B.3030708@tkk.fi>
	<45EAEBCC.5000500@loskot.net> <45EB056B.7090105@tkk.fi>
	<45ED347D.4080604@loskot.net> <45ED6165.7090507@tkk.fi>
	<45EE6EA4.4070007@loskot.net>
	<20070308050134.GL15173@vishnu.tridity.org>
	<45F0FE59.8000908@loskot.net> <45F128C5.5080507@openplans.org>
Message-ID: <20727448.post@talk.nabble.com>


Hi Andrea,

With regards to the simplification algorithm you mentioned, do you have an
example of how this might work? or know of any sample code?

I would think this is something that would be well suited to building into
OGR. With the increasing complexity and size of vector datasets, I would
think that SetScale (As Frank suggested) would be just as relevant as
SetSpatialFilter or SetAttributeFilter....


Cheers,
Fodder


aaime wrote:
> 
> My 2 cents from Geotools/Geoserver land. We are using both tecniques in
> fact, that is:
> * our renderer subsystem gathers data from the datastores (the equivalent
>    of OGR data sources) and do generalize them on the fly using a simple
>    distance based algorithm before passing them to the rendering pipeline.
>    This buys us some 30%-50% speedup, more if data needs to be reprojected
>    because we try to generalize before reprojecting
> 
> Hope this helps
> Cheers
> Andrea
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/Looking-for-huge-vector-dataset-tp9287128p20727448.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Thu Nov 27 23:07:04 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Nov 27 23:07:21 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 1
Message-ID: <492F6E68.3040308@pobox.com>

Folks,

I have prepared a GDAL/OGR 1.6.0 release candidate, posted at:

  http://download.osgeo.org/gdal/gdal160RC1.zip - source as a zip
  http://download.osgeo.org/gdal/gdal-1.6.0RC1.tar.gz - source as .tar.gz
  http://download.osgeo.org/gdal/gdalautotest-1.6.0.tar.gz - test suite
  http://download.osgeo.org/gdal/gdalautotest-1.6.0.zip - test suite

On behalf of the GDAL project, I request everyone interested in a high
quality final release do some quick verification of this candidate release.
Depending on immediate feedback, I will call for a PSC vote promoting this as
a final release on Monday (which would take till Wendesday to complete).

Very detailed release news is available at:

  http://trac.osgeo.org/gdal/wiki/Release/1.6.0-News

I hope to prepare binary packages for windows tomorrow as part of OSGeo4W.

I would add that I have also created a 1.6 branch in subversion, and trunk
is now open for GDAL/OGR 1.7 development.  Bug fixes should now be
considered for the 1.6 and 1.5 branches.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Fri Nov 28 12:53:18 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov 28 12:53:23 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 1
In-Reply-To: <492F6E68.3040308@pobox.com>
References: <492F6E68.3040308@pobox.com>
Message-ID: <200811281853.20027.even.rouault@mines-paris.org>

Hi,

a few issues found while running autotests:
- tiff_write_55 fails because of the reordering of the projection parameters 
done in r15834. Just swapping the standard_parallel_1 parameter in the 
expected WKT before false_easting makes it pass.
- osr_esri_10 also fails because we no longer used Plate Carree but 
Equidistant_Cylindrical (r15833)
- osr_ct_proj.py fails on Equirectangular because it needs an up to date 
proj.4 version (4.6.1) supporting the lat_0 parameter for the eqc projection, 
and my system is only 4.6.0. When running against a fresh compiled proj 
4.6.1, the test passes.

Le Friday 28 November 2008 05:07:04, vous avez ?crit?:
> Folks,
>
> I have prepared a GDAL/OGR 1.6.0 release candidate, posted at:
>
>   http://download.osgeo.org/gdal/gdal160RC1.zip - source as a zip
>   http://download.osgeo.org/gdal/gdal-1.6.0RC1.tar.gz - source as .tar.gz
>   http://download.osgeo.org/gdal/gdalautotest-1.6.0.tar.gz - test suite
>   http://download.osgeo.org/gdal/gdalautotest-1.6.0.zip - test suite
>
> On behalf of the GDAL project, I request everyone interested in a high
> quality final release do some quick verification of this candidate release.
> Depending on immediate feedback, I will call for a PSC vote promoting this
> as a final release on Monday (which would take till Wendesday to complete).
>
> Very detailed release news is available at:
>
>   http://trac.osgeo.org/gdal/wiki/Release/1.6.0-News
>
> I hope to prepare binary packages for windows tomorrow as part of OSGeo4W.
>
> I would add that I have also created a 1.6 branch in subversion, and trunk
> is now open for GDAL/OGR 1.7 development.  Bug fixes should now be
> considered for the 1.6 and 1.5 branches.
>
> Best regards,


From warmerdam at pobox.com  Fri Nov 28 13:07:57 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov 28 13:08:39 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 1
In-Reply-To: <200811281853.20027.even.rouault@mines-paris.org>
References: <492F6E68.3040308@pobox.com>
	<200811281853.20027.even.rouault@mines-paris.org>
Message-ID: <4930337D.7010006@pobox.com>

Even Rouault wrote:
> Hi,
> 
> a few issues found while running autotests:
> - tiff_write_55 fails because of the reordering of the projection parameters 
> done in r15834. Just swapping the standard_parallel_1 parameter in the 
> expected WKT before false_easting makes it pass.

Even,

fix committed.

> - osr_esri_10 also fails because we no longer used Plate Carree but 
> Equidistant_Cylindrical (r15833)

fix committed - I had already fixed this but neglected to commit it.

> - osr_ct_proj.py fails on Equirectangular because it needs an up to date 
> proj.4 version (4.6.1) supporting the lat_0 parameter for the eqc projection, 
> and my system is only 4.6.0. When running against a fresh compiled proj 
> 4.6.1, the test passes.

Interesting.  I hadn't realized that lat_0 was new in the eqc projection.
I wonder if Gerald will want to incorporate this addition into libproj4.

None of these is an RC breaker so far in my opinion.  But Ivan also made
a significant change in georaster support that might justify a new RC.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Nov 28 15:17:13 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov 28 15:17:43 2008
Subject: [gdal-dev] GDAL 1.6 Packaged for OSGeo4W
Message-ID: <493051C9.20702@pobox.com>

Folks,

I have prepared the following GDAL/OGR 1.6 packages based on RC1.

   gdal16 - main dll and .exe's
   gdal16-python - python bindings, and python scripts
   gdal16-mrsid - mrsid plugin
   gdal16-autotest - the 1.6 autotest suite.

Similar to the gdal-dev package, you need to run gdal16.bat in the OSGeo4W
command shell in order to use the gdal16 versions of exe's and dlls.

Since GDAL 1.6 will guarantee ABI compatability over the full GDAL 1.6 branch
I plan to prepare additional dependent packages (additional plugins, and
possibly more language bindings).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Nov 28 15:23:32 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Nov 28 15:23:58 2008
Subject: [gdal-dev] Stable Releases
Message-ID: <49305344.70009@pobox.com>

Folks,

I would like to prepare a GDAL 1.4.5 release.  I anticipate this being
the final 1.4.x release.  There have apparently been 15 tickets closed
since the 1.4.4 release that claim to have impacted the 1.4 branch.

Does anyone object to my taking on the role of release manager for a
1.4.5 release?  I will prepare a release candidate for review and voting
by the PSC if there is not.

I would also like to prepare a GDAL 1.5.4 release in the next few days
which would reflect those bug fixes back ported into the 1.5 branch to date.
There are 22 tickets claiming to have been closed since the 1.5.4 release.
While I anticipate backporting of bug fixes into the 1.5.x branch will slow
with the release of 1.6.0, it is likely that there would be at least one
more "cleanup release" for the 1.5 branch in the future.

Does anyone object to make taking on the role of release manager for a
1.5.4 release?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dmorissette at mapgears.com  Fri Nov 28 15:25:58 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri Nov 28 15:26:00 2008
Subject: [gdal-dev] Stable Releases
In-Reply-To: <49305344.70009@pobox.com>
References: <49305344.70009@pobox.com>
Message-ID: <493053D6.3000502@mapgears.com>

Frank Warmerdam wrote:
> 
> Does anyone object to my taking on the role of release manager for a
> 1.4.5 release?  I will prepare a release candidate for review and voting
> by the PSC if there is not.
> 

+1

> 
> Does anyone object to make taking on the role of release manager for a
> 1.5.4 release?
> 

+1

-- 
Daniel Morissette
http://www.mapgears.com/
From even.rouault at mines-paris.org  Fri Nov 28 15:49:53 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov 28 15:49:57 2008
Subject: [gdal-dev] Stable Releases
In-Reply-To: <49305344.70009@pobox.com>
References: <49305344.70009@pobox.com>
Message-ID: <200811282149.54850.even.rouault@mines-paris.org>

Le Friday 28 November 2008 21:23:32 Frank Warmerdam, vous avez ?crit?:
> Folks,
>
> I would like to prepare a GDAL 1.4.5 release.  I anticipate this being
> the final 1.4.x release.  There have apparently been 15 tickets closed
> since the 1.4.4 release that claim to have impacted the 1.4 branch.
>
> Does anyone object to my taking on the role of release manager for a
> 1.4.5 release?  I will prepare a release candidate for review and voting
> by the PSC if there is not.
>

+1

> I would also like to prepare a GDAL 1.5.4 release in the next few days
> which would reflect those bug fixes back ported into the 1.5 branch to
> date. There are 22 tickets claiming to have been closed since the 1.5.4
> release. While I anticipate backporting of bug fixes into the 1.5.x branch 
> will slow with the release of 1.6.0, it is likely that there would be at
> least one more "cleanup release" for the 1.5 branch in the future.
>
> Does anyone object to make taking on the role of release manager for a
> 1.5.4 release?
>

+1

> Best regards,


From didier.richard at ign.fr  Fri Nov 28 16:16:21 2008
From: didier.richard at ign.fr (RICHARD Didier)
Date: Fri Nov 28 16:24:10 2008
Subject: [gdal-dev] Stable Releases
In-Reply-To: <49305344.70009@pobox.com>
References: <49305344.70009@pobox.com>
Message-ID: <34482.87.231.96.39.1227906981.squirrel@webmail.ign.fr>


> Does anyone object to my taking on the role of release manager for a
> 1.4.5 release?  I will prepare a release candidate for review and voting
> by the PSC if there is not.
>

+1

> Does anyone object to make taking on the role of release manager for a
> 1.5.4 release?

+1


didier
-- 
RICHARD Didier - Chef du p?le technique du G?oportail
2/4, avenue Pasteur - 94165 Saint Mand? Cedex
T?l : +33 (0) 1 43 98 83 23

From szekerest at gmail.com  Fri Nov 28 17:22:17 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Nov 28 17:22:19 2008
Subject: [gdal-dev] Stable Releases
In-Reply-To: <49305344.70009@pobox.com>
References: <49305344.70009@pobox.com>
Message-ID: <f3b73b7d0811281422h791c573al6efd8e390aef1fd@mail.gmail.com>

+1 to each of the actions.

Best regards,

Tamas


2008/11/28 Frank Warmerdam <warmerdam@pobox.com>

> Folks,
>
> I would like to prepare a GDAL 1.4.5 release.  I anticipate this being
> the final 1.4.x release.  There have apparently been 15 tickets closed
> since the 1.4.4 release that claim to have impacted the 1.4 branch.
>
> Does anyone object to my taking on the role of release manager for a
> 1.4.5 release?  I will prepare a release candidate for review and voting
> by the PSC if there is not.
>
> I would also like to prepare a GDAL 1.5.4 release in the next few days
> which would reflect those bug fixes back ported into the 1.5 branch to
> date.
> There are 22 tickets claiming to have been closed since the 1.5.4 release.
> While I anticipate backporting of bug fixes into the 1.5.x branch will slow
> with the release of 1.6.0, it is likely that there would be at least one
> more "cleanup release" for the 1.5 branch in the future.
>
> Does anyone object to make taking on the role of release manager for a
> 1.5.4 release?
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20081128/ce2e558c/attachment.html
From even.rouault at mines-paris.org  Fri Nov 28 18:02:21 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Nov 28 18:02:29 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 1
In-Reply-To: <492F6E68.3040308@pobox.com>
References: <492F6E68.3040308@pobox.com>
Message-ID: <200811290002.22692.even.rouault@mines-paris.org>

I've just noticed that swig/python/setup.py was not updated and still says 
gdal_version = '1.6.0beta1'

Le Friday 28 November 2008 05:07:04 Frank Warmerdam, vous avez ?crit?:
> Folks,
>
> I have prepared a GDAL/OGR 1.6.0 release candidate, posted at:
>
>   http://download.osgeo.org/gdal/gdal160RC1.zip - source as a zip
>   http://download.osgeo.org/gdal/gdal-1.6.0RC1.tar.gz - source as .tar.gz
>   http://download.osgeo.org/gdal/gdalautotest-1.6.0.tar.gz - test suite
>   http://download.osgeo.org/gdal/gdalautotest-1.6.0.zip - test suite
>
> On behalf of the GDAL project, I request everyone interested in a high
> quality final release do some quick verification of this candidate release.
> Depending on immediate feedback, I will call for a PSC vote promoting this
> as a final release on Monday (which would take till Wendesday to complete).
>
> Very detailed release news is available at:
>
>   http://trac.osgeo.org/gdal/wiki/Release/1.6.0-News
>
> I hope to prepare binary packages for windows tomorrow as part of OSGeo4W.
>
> I would add that I have also created a 1.6 branch in subversion, and trunk
> is now open for GDAL/OGR 1.7 development.  Bug fixes should now be
> considered for the 1.6 and 1.5 branches.
>
> Best regards,


From warmerdam at pobox.com  Sun Nov 30 12:33:47 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Nov 30 12:34:11 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
Message-ID: <4932CE7B.2010801@pobox.com>

Folks,

There have been a few noteworthy errors identified and corrected since
RC1 was issued.  So I've decided to retract it and prepare an RC2.  RC2
is available at:

  http://download.osgeo.org/gdal/gdal160RC2.zip - source as a zip
  http://download.osgeo.org/gdal/gdal-1.6.0RC2.tar.gz - source as .tar.gz

On behalf of the GDAL project, I request everyone interested in a high
quality final release do some quick verification of this candidate release.
Depending on immediate feedback, I will call for a PSC vote promoting this as
a final release on Monday (which would take till Wednesday to complete).

Very detailed release news is available at:

  http://trac.osgeo.org/gdal/wiki/Release/1.6.0-News

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at kyngchaos.com  Sun Nov 30 13:02:12 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun Nov 30 13:02:16 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <4932CE7B.2010801@pobox.com>
References: <4932CE7B.2010801@pobox.com>
Message-ID: <47CEC7F3-62B6-439F-9397-3F773DB71165@kyngchaos.com>

Ahh, I was just running thru the autotests with RC1.

Any chance of getting http://trac.osgeo.org/gdal/ticket/2661 into  
1.6?  Tested on RC1, no problems.

On Nov 30, 2008, at 11:33 AM, Frank Warmerdam wrote:

> Folks,
>
> There have been a few noteworthy errors identified and corrected since
> RC1 was issued.  So I've decided to retract it and prepare an RC2.   
> RC2
> is available at:
>
> http://download.osgeo.org/gdal/gdal160RC2.zip - source as a zip
> http://download.osgeo.org/gdal/gdal-1.6.0RC2.tar.gz - source  
> as .tar.gz
>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those  
least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy


From woklist at kyngchaos.com  Sun Nov 30 14:01:02 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun Nov 30 14:01:06 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <4932CE7B.2010801@pobox.com>
References: <4932CE7B.2010801@pobox.com>
Message-ID: <249CD742-16E1-44DB-9B22-37E9E43C2CE8@kyngchaos.com>

A couple notes on the autotests while I wait for RC2 to compile:

Still have problems with the DODS test - it always fails to connect to  
the test host.

ECW tests 14 and 15 check for the wrong driver - they are jp2ecw tests  
but check for ecw. (I disabled JP2 in my ECW library build for some  
reason I can't remember.)

The gdalhttp test is trying to use the DODS driver.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin


From warmerdam at pobox.com  Sun Nov 30 14:17:07 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Nov 30 14:17:33 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <47CEC7F3-62B6-439F-9397-3F773DB71165@kyngchaos.com>
References: <4932CE7B.2010801@pobox.com>
	<47CEC7F3-62B6-439F-9397-3F773DB71165@kyngchaos.com>
Message-ID: <4932E6B3.9050805@pobox.com>

William Kyngesburye wrote:
> Ahh, I was just running thru the autotests with RC1.
> 
> Any chance of getting http://trac.osgeo.org/gdal/ticket/2661 into 1.6?  
> Tested on RC1, no problems.

William,

I am not in favor of apply the change for 2661 in the 1.6 branch.  I'm not
opposed to it going into trunk now that 1.6 is settling.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Sun Nov 30 14:21:21 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Nov 30 14:21:26 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <249CD742-16E1-44DB-9B22-37E9E43C2CE8@kyngchaos.com>
References: <4932CE7B.2010801@pobox.com>
	<249CD742-16E1-44DB-9B22-37E9E43C2CE8@kyngchaos.com>
Message-ID: <200811302021.23120.even.rouault@mines-paris.org>

Le Sunday 30 November 2008 20:01:02 William Kyngesburye, vous avez ?crit?:
> A couple notes on the autotests while I wait for RC2 to compile:
>
> Still have problems with the DODS test - it always fails to connect to
> the test host.

The OGR DODS ? It fails for me too : the test must rely on a server which is 
no longer usable. The GDAL DODS test run fine.

>
> ECW tests 14 and 15 check for the wrong driver - they are jp2ecw tests
> but check for ecw. (I disabled JP2 in my ECW library build for some
> reason I can't remember.)

Hum, you're right. Fixed in trunk in r15864

>
> The gdalhttp test is trying to use the DODS driver.

Yes, this is known : see http://trac.osgeo.org/gdal/ticket/2696
There's little we can do to solve that, except maybe change the syntax of the 
connection string for the GDAL DODS driver, to something similar to the OGR 
DODS driver. That's to say something like "DODS:http://...." ?

>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "I ache, therefore I am.  Or in my case - I am, therefore I ache."
>
> - Marvin
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From woklist at kyngchaos.com  Sun Nov 30 15:04:35 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun Nov 30 15:04:38 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <4932E6B3.9050805@pobox.com>
References: <4932CE7B.2010801@pobox.com>
	<47CEC7F3-62B6-439F-9397-3F773DB71165@kyngchaos.com>
	<4932E6B3.9050805@pobox.com>
Message-ID: <22809FE6-1C05-4F34-B67D-AA11CA5AE1EA@kyngchaos.com>

On Nov 30, 2008, at 1:17 PM, Frank Warmerdam wrote:

> William Kyngesburye wrote:
>> Ahh, I was just running thru the autotests with RC1.
>> Any chance of getting http://trac.osgeo.org/gdal/ticket/2661 into  
>> 1.6?  Tested on RC1, no problems.
>
> William,
>
> I am not in favor of apply the change for 2661 in the 1.6 branch.   
> I'm not
> opposed to it going into trunk now that 1.6 is settling.
>
Rats.  So, 1.6.1?

At least I can apply it to my own binary release, to keep 1.5 and 1.6  
plugins separate.


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that the  
past isn't a fiction designed to account for the discrepancy between  
my immediate physical sensations and my state of mind?"

- The Ruler of the Universe


From woklist at kyngchaos.com  Sun Nov 30 17:03:12 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun Nov 30 17:03:16 2008
Subject: [gdal-dev] autotest 1.6 errors - need help
Message-ID: <412A2282-D695-471F-A522-F6B09C9A608C@kyngchaos.com>

I'm working on some autotest errors for 1.6, and I need some help to  
figure out how to fix them.

- ogr_gml

   TEST: ogr_gml_1 ... ERROR 1: <coordinates> element missing value.
fail (blowup)
Traceback (most recent call last):
   File "pymod/gdaltest.py", line 89, in run_tests
     result = func()
   File "./ogr_gml_read.py", line 72, in ogr_gml_1
     if feat.GetField('Name') != 'Aartselaar':
AttributeError: 'NoneType' object has no attribute 'GetField'

and similar errors for tests 2-4

strangely, there is a similar error for test 5 but it succeeds:

  TEST: ogr_gml_5 ... ERROR 1: <coordinates> element missing value.
success

Could it have something to do with Xerces 3?  I can try recompiling  
with Xerces 2.8.


- tiff_write

   TEST: tiff_write_55 ... PROJCS["Equirectangular  
Mars",GEOGCS["GCS_Mars",DATUM["unknown",SPHEROID["unnamed", 
3394813.857975945,0]],PRIMEM["Greenwich",0],UNIT["degree", 
0.0174532925199433]],PROJECTION["Equirectangular"],PARAMETER["latitude_of_origin",-2],PARAMETER["central_meridian",184.4129943847656],PARAMETER["standard_parallel_1",0],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]]]
fail
     failed to preserve Equirectangular projection as expected, old  
libgeotiff?

Well, I'm using geotiff 1.2.5, and I notice that GDAL includes 1.2.4.

It's not saying what the difference is.


- gdrivers/grass

   TEST: grass_2 ...
old =  PROJCS["UTM Zone 18, Northern Hemisphere",
     GEOGCS["grs80",
         DATUM["North_American_Datum_1983",
             SPHEROID["Geodetic_Reference_System_1980", 
6378137,298.257222101],
             TOWGS84[0.000,0.000,0.000]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",-75],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["meter",1]]
new =
fail
     Projections differ

It seems to have completely dropped the projection.  Note that I'm  
using a trimmed down library-only GRASS and may have missed something  
in the dummy grass/etc/ folder.


- mrsid - I've been getting this for a while, even in 1.5.

   TEST: mrsid_1 ...
old =  PROJCS["MER         E000|",
     GEOGCS["NAD27",
         DATUM["North_American_Datum_1927",
             SPHEROID["Clarke 1866",6378206.4,294.9786982139006,
                 AUTHORITY["EPSG","7008"]],
             AUTHORITY["EPSG","6267"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4267"]],
     PROJECTION["Mercator_1SP"],
     PARAMETER["latitude_of_origin",1],
     PARAMETER["central_meridian",1],
     PARAMETER["scale_factor",1],
     PARAMETER["false_easting",1],
     PARAMETER["false_northing",1],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
new =  PROJCS["MER         E000|",
     GEOGCS["NAD27",
         DATUM["North_American_Datum_1927",
             SPHEROID["Clarke 1866",6378206.4,294.9786982139006,
                 AUTHORITY["EPSG","7008"]],
             AUTHORITY["EPSG","6267"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4267"]],
     PROJECTION["Mercator_1SP"],
     PARAMETER["central_meridian",0],
     PARAMETER["scale_factor",1],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
fail
     Projections differ

It's losing most of the parameters or their values.

Then:

   TEST: mrsid_4 ...
old =  (0.0, 255.0, 102.684, 51.613999999999997)
new =  [0.0, 255.0, 103.11236497314, 52.476991490286998]
fail
     Approximate statistics differs.

I think this used to be OK, though I sorta remember seeing it before.


- osr_esri

   TEST: osr_esri_10 ...
Got:        
PROJCS["Sphere_Plate_Carree",GEOGCS["GCS_Sphere",DATUM["D_Sphere",SPHEROID["Sphere",6371000.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.017453292519943295]],PROJECTION["Equidistant_Cylindrical"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],UNIT["Meter",1.0]]
Expected:   
PROJCS["Sphere_Plate_Carree",GEOGCS["GCS_Sphere",DATUM["D_Sphere",SPHEROID["Sphere",6371000.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.017453292519943295]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],UNIT["Meter",1.0]]
fail
     Did not get expected Plate_Caree SRS after morphToESRI


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy


From woklist at kyngchaos.com  Sun Nov 30 17:17:27 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun Nov 30 17:17:31 2008
Subject: [gdal-dev] autotest 1.6 errors - need help
In-Reply-To: <412A2282-D695-471F-A522-F6B09C9A608C@kyngchaos.com>
References: <412A2282-D695-471F-A522-F6B09C9A608C@kyngchaos.com>
Message-ID: <C664E893-A3C2-4146-B806-F71262BC97E1@kyngchaos.com>

On Nov 30, 2008, at 4:03 PM, William Kyngesburye wrote:

> - tiff_write
>
>  TEST: tiff_write_55 ... PROJCS["Equirectangular  
> Mars",GEOGCS["GCS_Mars",DATUM["unknown",SPHEROID["unnamed", 
> 3394813.857975945,0]],PRIMEM["Greenwich",0],UNIT["degree", 
> 0.0174532925199433]],PROJECTION["Equirectangular"],PARAMETER["latitude_of_origin",-2],PARAMETER["central_meridian",184.4129943847656],PARAMETER["standard_parallel_1",0],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]]]
> fail
>    failed to preserve Equirectangular projection as expected, old  
> libgeotiff?
>
> Well, I'm using geotiff 1.2.5, and I notice that GDAL includes 1.2.4.
>
> It's not saying what the difference is.


Tried with internal geotiff, no change.

Also note: I'm using a CVS trunk libtiff from Mar 2008.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed  
robot?

[Marvin]  You think you have problems?  What are you supposed to do if  
you ARE a maniacally depressed robot?  No, don't try and answer, I'm  
50,000 times more intelligent than you and even I don't know the  
answer...

- HitchHiker's Guide to the Galaxy


From seth at pricepages.org  Sun Nov 30 19:52:49 2008
From: seth at pricepages.org (Seth Price)
Date: Sun Nov 30 19:52:53 2008
Subject: [gdal-dev] GDAL/OGR 1.6.0 Release Candidate 2
In-Reply-To: <4932CE7B.2010801@pobox.com>
References: <4932CE7B.2010801@pobox.com>
Message-ID: <E1970840-63FC-4139-8FC2-CE8B5845E6F1@pricepages.org>

Default compile fails due to the bug I reported here:
http://trac.osgeo.org/gdal/ticket/2628
~Seth


On Nov 30, 2008, at 10:33 AM, Frank Warmerdam wrote:

> Folks,
>
> There have been a few noteworthy errors identified and corrected since
> RC1 was issued.  So I've decided to retract it and prepare an RC2.   
> RC2
> is available at:
>
> http://download.osgeo.org/gdal/gdal160RC2.zip - source as a zip
> http://download.osgeo.org/gdal/gdal-1.6.0RC2.tar.gz - source  
> as .tar.gz
>
> On behalf of the GDAL project, I request everyone interested in a high
> quality final release do some quick verification of this candidate  
> release.
> Depending on immediate feedback, I will call for a PSC vote  
> promoting this as
> a final release on Monday (which would take till Wednesday to  
> complete).
>
> Very detailed release news is available at:
>
> http://trac.osgeo.org/gdal/wiki/Release/1.6.0-News
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

