From pedrongvenancio at gmail.com  Wed Jan  2 04:29:51 2019
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Wed, 2 Jan 2019 12:29:51 +0000
Subject: [gdal-dev] GDAL 2.4.0 - Import Error with module _gdal_array
Message-ID: <CAMCJChu2oPdm0tJi08sg07B9BiR7VV7XQTv2MEfyhxWKi5eYBQ@mail.gmail.com>

Hi,

I'm getting an Import Error "No module named _gdal_array" with GDAL 2.4.0,
that does not happened before, with GDAL <= 2.3.2.

C:\>gdalinfo --version
GDAL 2.4.0, released 2018/12/14

C:\>python
Python 2.7.14 (v2.7.14:84471935ed, Sep 16 2017, 20:25:58) [MSC v.1500 64
bit (AMD64)] on win32

>>> from osgeo import gdal_array
RuntimeError: module compiled against API version 0xc but this version of
numpy is 0xa
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\OSGEO4~1\apps\Python27\lib\site-packages\osgeo\gdal_array.py",
line 17, in <module>
    _gdal_array = swig_import_helper()
  File "C:\OSGEO4~1\apps\Python27\lib\site-packages\osgeo\gdal_array.py",
line 16, in swig_import_helper
    return importlib.import_module('_gdal_array')
  File "C:\OSGEO4~1\apps\Python27\lib\importlib\__init__.py", line 37, in
import_module
    __import__(name)
ImportError: No module named _gdal_array

>>> import numpy
>>> numpy.version.version
'1.12.1'


Testing with an old version:

C:\>gdalinfo --version
GDAL 2.2.3, released 2017/11/20

C:\>python
Python 2.7.5 (default, May 15 2013, 22:44:16) [MSC v.1500 64 bit (AMD64)]
on win32

>>> from osgeo import gdal_array

>>> gdal_array
<module 'osgeo.gdal_array' from
'C:\PROGRA~1\QGIS2~1.14\apps\Python27\lib\site-packages\osgeo\gdal_array.py'>

>>> import numpy
>>> numpy.version.version
'1.12.1'

This is happening in a Windows 10 machine, with OSGeo4W 64bits.

Any hint?

Thank you very much!

Best regards,
Pedro Venâncio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190102/40a4e1f6/attachment.html>

From astewart at terragotech.com  Thu Jan  3 13:17:26 2019
From: astewart at terragotech.com (Alan Stewart)
Date: Thu, 3 Jan 2019 21:17:26 +0000
Subject: [gdal-dev] osx compile failure
In-Reply-To: <19583406.D6Ig70h1ma@even-i700>
References: <BY2PR15MB0856948C0990E293382E9FDCC4BD0@BY2PR15MB0856.namprd15.prod.outlook.com>
 <19583406.D6Ig70h1ma@even-i700>
Message-ID: <BN3PR15MB0850EF6F4CA6F50A48B85DF5C48D0@BN3PR15MB0850.namprd15.prod.outlook.com>

Even,

I've been working on this. There were a lot of small source changes across a number of formats, not just plscenes, plus some system-specific details in the scripts, to be resolved. I have a successful build now, but running the ci/travis/osx/script.sh results in:

ImportError while loading conftest '/Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/autotest/conftest.py'.
/usr/local/lib/python2.7/site-packages/six.py:709: in exec_
    exec("""exec _code_ in _globs_, _locs_""")
conftest.py:9: in <module>
    from osgeo import gdal
../gdal/swig/python/build/lib.macosx-10.12-x86_64-2.7/osgeo/__init__.py:21: in <module>
    _gdal = swig_import_helper()
../gdal/swig/python/build/lib.macosx-10.12-x86_64-2.7/osgeo/__init__.py:17: in swig_import_helper
    _mod = imp.load_module('_gdal', fp, pathname, description)
E   ImportError: dlopen(/Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/gdal/swig/python/build/lib.macosx-10.12-x86_64-2.7/osgeo/_gdal.so, 2): Symbol not found: _CPLErrorSetState
E     Referenced from: /Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/gdal/swig/python/build/lib.macosx-10.12-x86_64-2.7/osgeo/_gdal.so
E     Expected in: flat namespace
E    in /Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/gdal/swig/python/build/lib.macosx-10.12-x86_64-2.7/osgeo/_gdal.so

Any thoughts on why CPLErrorSetState would be missing?

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615
 
www.terragotech.com

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com> 
Sent: Tuesday, December 18, 2018 4:20 PM
To: gdal-dev at lists.osgeo.org
Cc: Alan Stewart <astewart at terragotech.com>
Subject: Re: [gdal-dev] osx compile failure

Alan,

your environment is correct, it is just that there are different versions of libjson-c where function signatures have changed. We have had similar issues in the past.

> 
> I doing 'git clone' of master from OSGeo/gdal and running the 
> gdal/ci/travis/osx scripts. The install.sh script terminates because of:
> 
> plmosaicdataset.cpp:1111:30: error: implicit conversion loses integer
> precision: 'size_t' (aka 'unsigned long') to 'const int'
> [-Werror,-Wshorten-64-to-32] const int nMosaics = 
> json_object_array_length(poMosaics);

Could be fixed for all versions by using: const auto

>                   ~~~~~~~~   ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> plmosaicdataset.cpp:1419:30: error: comparison of integers of 
> different
> signs: 'int' and 'size_t' (aka 'unsigned long') 
> [-Werror,-Wsign-compare] for(int i = 0; i < 
> json_object_array_length(poItems); i++ ) ~ ^

I would do
  	 const auto nItemsLength = json_object_array_length(poItems);
    for( decltype(nItemsLength) i = 0; i < nItemsLength; i++ )

Can you submit a pull request with something like the above ?

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com

From even.rouault at spatialys.com  Thu Jan  3 13:40:10 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 03 Jan 2019 22:40:10 +0100
Subject: [gdal-dev] osx compile failure
In-Reply-To: <BN3PR15MB0850EF6F4CA6F50A48B85DF5C48D0@BN3PR15MB0850.namprd15.prod.outlook.com>
References: <BY2PR15MB0856948C0990E293382E9FDCC4BD0@BY2PR15MB0856.namprd15.prod.outlook.com>
 <19583406.D6Ig70h1ma@even-i700>
 <BN3PR15MB0850EF6F4CA6F50A48B85DF5C48D0@BN3PR15MB0850.namprd15.prod.outlook.com>
Message-ID: <3793614.o0MncPkXNM@even-i700>

On jeudi 3 janvier 2019 21:17:26 CET Alan Stewart wrote:
> Even,
> 
> I've been working on this. There were a lot of small source changes across a
> number of formats, not just plscenes, plus some system-specific details in
> the scripts, to be resolved. I have a successful build now, but running the
> ci/travis/osx/script.sh results in:
> 
> ImportError while loading conftest
> '/Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/autotest/con
> ftest.py'. /usr/local/lib/python2.7/site-packages/six.py:709: in exec_
>     exec("""exec _code_ in _globs_, _locs_""")
> conftest.py:9: in <module>
>     from osgeo import gdal
> ../gdal/swig/python/build/lib.macosx-10.12-x86_64-2.7/osgeo/__init__.py:21:
> in <module> _gdal = swig_import_helper()
> ../gdal/swig/python/build/lib.macosx-10.12-x86_64-2.7/osgeo/__init__.py:17:
> in swig_import_helper _mod = imp.load_module('_gdal', fp, pathname,
> description)
> E   ImportError:
> dlopen(/Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/gdal/s
> wig/python/build/lib.macosx-10.12-x86_64-2.7/osgeo/_gdal.so, 2): Symbol not
> found: _CPLErrorSetState E     Referenced from:
> /Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/gdal/swig/pyt
> hon/build/lib.macosx-10.12-x86_64-2.7/osgeo/_gdal.so E     Expected in: flat
> namespace
> E    in
> /Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/gdal/swig/pyt
> hon/build/lib.macosx-10.12-x86_64-2.7/osgeo/_gdal.so
> 
> Any thoughts on why CPLErrorSetState would be missing?

I presume that this is because libgdal.dylib is not found.
Did you source "scripts/setdevenv.sh" that should set up the appropriate 
environment variables ? In that particular case DYLD_LIBRARY_PATH to point to 
libgdal.dylib

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jfburkhart.reg at gmail.com  Fri Jan  4 07:33:58 2019
From: jfburkhart.reg at gmail.com (John Burkhart)
Date: Fri, 4 Jan 2019 10:33:58 -0500
Subject: [gdal-dev] SNODAS format
Message-ID: <CALK26xdmT2=P5PfuL8jyjXWiv+25v82sXU36=3haumVnoEdosg@mail.gmail.com>

Hello,

Trying to open SNODAS datasets from:

server = 'sidads.colorado.edu'
ftp_directory = 'pub/DATASETS/NOAA/G02158/masked/{}/{}'.format(yyyy, m_month)


I have untarred/unzipped the files and have the following files:
$ls
us_ssmv11034tS__T0001TTNATS2019010105HP001.Hdr
us_ssmv11034tS__T0001TTNATS2019010305HP001.Hdr
us_ssmv11034tS__T0001TTNATS2019010105HP001.dat
us_ssmv11034tS__T0001TTNATS2019010305HP001.dat

When I run gdal_translate, I get the following error:

$gdal_translate -of GTiff -a_srs '+proj=longlat +ellps=WGS84 +datum=WGS84
+no_defs' -a_nodata -9999 -a_ullr  -124.73333333 52.87500000 -66.94166667
24.95000000 us_ssmv11034tS__T0001TTNATS2019010105HP001.dat temp.tiff
ERROR 4: `us_ssmv11034tS__T0001TTNATS2019010105HP001.dat' not recognized as
a supported file format.

and if I try with the .Hdr file:
$gdal_translate -of GTiff -a_srs '+proj=longlat +ellps=WGS84 +datum=WGS84
+no_defs' -a_nodata -9999 -a_ullr  -124.73333333 52.87500000 -66.94166667
24.95000000 us_ssmv11034tS__T0001TTNATS2019010105HP001.Hdr temp.tiff
ERROR 1: Maximum number of characters allowed reached.

Do I need to specify the SNODAS driver somehow? I am using gdal version
2.2.4
$gdal_translate --version
GDAL 2.2.4, released 2018/03/19

Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190104/c74ad05b/attachment.html>

From even.rouault at spatialys.com  Fri Jan  4 07:41:26 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 04 Jan 2019 16:41:26 +0100
Subject: [gdal-dev] SNODAS format
In-Reply-To: <CALK26xdmT2=P5PfuL8jyjXWiv+25v82sXU36=3haumVnoEdosg@mail.gmail.com>
References: <CALK26xdmT2=P5PfuL8jyjXWiv+25v82sXU36=3haumVnoEdosg@mail.gmail.com>
Message-ID: <2163125.eJZs0jHjl4@even-i700>

On vendredi 4 janvier 2019 10:33:58 CET John Burkhart wrote:
> Hello,
> 
> Trying to open SNODAS datasets from:
> 
> server = 'sidads.colorado.edu'
> ftp_directory = 'pub/DATASETS/NOAA/G02158/masked/{}/{}'.format(yyyy,
> m_month)
> 
> 
> I have untarred/unzipped the files and have the following files:
> $ls
> us_ssmv11034tS__T0001TTNATS2019010105HP001.Hdr
> us_ssmv11034tS__T0001TTNATS2019010305HP001.Hdr
> us_ssmv11034tS__T0001TTNATS2019010105HP001.dat
> us_ssmv11034tS__T0001TTNATS2019010305HP001.dat
> 
> When I run gdal_translate, I get the following error:
> 
> $gdal_translate -of GTiff -a_srs '+proj=longlat +ellps=WGS84 +datum=WGS84
> +no_defs' -a_nodata -9999 -a_ullr  -124.73333333 52.87500000 -66.94166667
> 24.95000000 us_ssmv11034tS__T0001TTNATS2019010105HP001.dat temp.tiff
> ERROR 4: `us_ssmv11034tS__T0001TTNATS2019010105HP001.dat' not recognized as
> a supported file format.
> 
> and if I try with the .Hdr file:
> $gdal_translate -of GTiff -a_srs '+proj=longlat +ellps=WGS84 +datum=WGS84
> +no_defs' -a_nodata -9999 -a_ullr  -124.73333333 52.87500000 -66.94166667
> 24.95000000 us_ssmv11034tS__T0001TTNATS2019010105HP001.Hdr temp.tiff
> ERROR 1: Maximum number of characters allowed reached.
> 
> Do I need to specify the SNODAS driver somehow? I am using gdal version
> 2.2.4
> $gdal_translate --version
> GDAL 2.2.4, released 2018/03/19

This is a bug of the SNODAS driver in GDAL 2.2.4. It was fixed by GDAL 2.3.0 
or later

Alternatively you may manually edit the .hdr file to avoid lines to be greater 
than 1024 characters

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jfburkhart.reg at gmail.com  Fri Jan  4 08:05:09 2019
From: jfburkhart.reg at gmail.com (John Burkhart)
Date: Fri, 4 Jan 2019 11:05:09 -0500
Subject: [gdal-dev] SNODAS format
In-Reply-To: <2163125.eJZs0jHjl4@even-i700>
References: <CALK26xdmT2=P5PfuL8jyjXWiv+25v82sXU36=3haumVnoEdosg@mail.gmail.com>
 <2163125.eJZs0jHjl4@even-i700>
Message-ID: <CALK26xeDR-B87w6vOy-3F2V59Y=ufNTfdrm996T+BSdCUY+rdg@mail.gmail.com>

Thanks.

On Fri, Jan 4, 2019 at 10:41 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> On vendredi 4 janvier 2019 10:33:58 CET John Burkhart wrote:
> > Hello,
> >
> > Trying to open SNODAS datasets from:
> >
> > server = 'sidads.colorado.edu'
> > ftp_directory = 'pub/DATASETS/NOAA/G02158/masked/{}/{}'.format(yyyy,
> > m_month)
> >
> >
> > I have untarred/unzipped the files and have the following files:
> > $ls
> > us_ssmv11034tS__T0001TTNATS2019010105HP001.Hdr
> > us_ssmv11034tS__T0001TTNATS2019010305HP001.Hdr
> > us_ssmv11034tS__T0001TTNATS2019010105HP001.dat
> > us_ssmv11034tS__T0001TTNATS2019010305HP001.dat
> >
> > When I run gdal_translate, I get the following error:
> >
> > $gdal_translate -of GTiff -a_srs '+proj=longlat +ellps=WGS84 +datum=WGS84
> > +no_defs' -a_nodata -9999 -a_ullr  -124.73333333 52.87500000 -66.94166667
> > 24.95000000 us_ssmv11034tS__T0001TTNATS2019010105HP001.dat temp.tiff
> > ERROR 4: `us_ssmv11034tS__T0001TTNATS2019010105HP001.dat' not recognized
> as
> > a supported file format.
> >
> > and if I try with the .Hdr file:
> > $gdal_translate -of GTiff -a_srs '+proj=longlat +ellps=WGS84 +datum=WGS84
> > +no_defs' -a_nodata -9999 -a_ullr  -124.73333333 52.87500000 -66.94166667
> > 24.95000000 us_ssmv11034tS__T0001TTNATS2019010105HP001.Hdr temp.tiff
> > ERROR 1: Maximum number of characters allowed reached.
> >
> > Do I need to specify the SNODAS driver somehow? I am using gdal version
> > 2.2.4
> > $gdal_translate --version
> > GDAL 2.2.4, released 2018/03/19
>
> This is a bug of the SNODAS driver in GDAL 2.2.4. It was fixed by GDAL
> 2.3.0
> or later
>
> Alternatively you may manually edit the .hdr file to avoid lines to be
> greater
> than 1024 characters
>
> Even
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190104/e5200f24/attachment.html>

From johan.de.braak at eleaf.com  Fri Jan  4 08:20:31 2019
From: johan.de.braak at eleaf.com (Johan de Braak)
Date: Fri, 4 Jan 2019 09:20:31 -0700 (MST)
Subject: [gdal-dev] add -a_scale and -a_offset to gdal.TranslateOptions in
	Python
Message-ID: <1546618831686-0.post@n6.nabble.com>

Hi,

I cannot find an equivalent for -a_scale and -a_offset translate options in
the method gdal.TranslateOptions in Python. Am I missing something or is
this something that should be added?

I know I can use the command line syntax but I would prefer keyword
arguments for these options in Python.

Best,

Johan



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Fri Jan  4 08:24:11 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 04 Jan 2019 17:24:11 +0100
Subject: [gdal-dev] add -a_scale and -a_offset to gdal.TranslateOptions
	in Python
In-Reply-To: <1546618831686-0.post@n6.nabble.com>
References: <1546618831686-0.post@n6.nabble.com>
Message-ID: <2735589.o2RjEBjjjz@even-i700>

On vendredi 4 janvier 2019 09:20:31 CET Johan de Braak wrote:
> Hi,
> 
> I cannot find an equivalent for -a_scale and -a_offset translate options in
> the method gdal.TranslateOptions in Python. Am I missing something or is
> this something that should be added?

This is missing indeed. Contribution welcome

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From philippe.ghesquiere at airbus.com  Fri Jan  4 08:51:04 2019
From: philippe.ghesquiere at airbus.com (Bugbuster)
Date: Fri, 4 Jan 2019 09:51:04 -0700 (MST)
Subject: [gdal-dev] Weird GCPs behavior when flipping an image
 (left-to-right or upside-down)
Message-ID: <1546620664653-0.post@n6.nabble.com>

Dear all,

I would like to flip a "plain TIFF" (no geolocation information) image with
respect to either lines or columns.
After several tests, I finally found out I have two ways to do it :
1) with a temporary TIFF image
First create a temporary TIFF image with 3 GCPs with gdal_translate
Then create the final "plain TIFF" flipped image with gdalwarp
2) with a temporary VRT image
First create a temporary VRT image with 3 GCPs with gdalbuiltvrt 
Then create the final "plain TIFF" flipped image with gdalwarp

Both ways give the same results, although the 2nd one is more efficient with
large images.

However, I bumped into some weird results. Here is a small example to
illustrate :
1) I create a TIFF image with 3 GCPs which simulate the identity
transformation :
*gdal_translate -of GTiff -gcp 0 0 0 0  -gcp 100 0 100 0 -gcp 0 100 0 100
TIF_plain.tif TIF_identity_gcp.tif*
2) I warp the intermediate image with the folowing command :
*gdalwarp -of GTiff -co PROFILE=BASELINE TIF_identity_gcp.tif
TIF_identity_warped.tif*

Surprisingly, the final image image TIF_identity_warped.tif is flipped with
respect to lines (upside-down).

Did I miss something ?

Thanks for your hints
Philippe




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Fri Jan  4 11:57:46 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 04 Jan 2019 20:57:46 +0100
Subject: [gdal-dev] osx compile failure
In-Reply-To: <BN3PR15MB0850E8E5435B0D30A810C37BC48E0@BN3PR15MB0850.namprd15.prod.outlook.com>
References: <BY2PR15MB0856948C0990E293382E9FDCC4BD0@BY2PR15MB0856.namprd15.prod.outlook.com>
 <3793614.o0MncPkXNM@even-i700>
 <BN3PR15MB0850E8E5435B0D30A810C37BC48E0@BN3PR15MB0850.namprd15.prod.outlook.com>
Message-ID: <8058421.SxqkRAGx2T@even-i700>

On vendredi 4 janvier 2019 19:52:36 CET you wrote:
> That script corrupts the PATH environment variable!

Works on Linux at lest. I *believe* it has been tested on Mac by some folks.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gregsmk at protonmail.com  Tue Jan  8 02:04:15 2019
From: gregsmk at protonmail.com (gregsmk)
Date: Tue, 08 Jan 2019 10:04:15 +0000
Subject: [gdal-dev] How to create GeoTiff from image and UTM Coordinates
Message-ID: <hJ5jsSAeyXsPGR1A5jvnQf8Nhx8M0eMrh2GoYVbpaPvXmv-P5I1sETPDzxiP6R8Mee-AMbJPF-DZBFo--Z_6sut0dTtFnKqNu0kJuQxomjg=@protonmail.com>

Hi,

i am a very beginner in GeoTiff and Georeferencing.

_ i have an image in .emf file format.
_ i also have these UTM informations:
Easting,Northing,Zone,Hemisphere
Exemple: 400000,4379520,24,N

How can i use GDAL to create a geotiff from these informations ?
(My GeoTiff need to be in wgs84, epsg:4326)
(i need to use command line tools, no GUI)

i think i need to convert .emf to a file format which can be supported by GDAL such as .bmp ou "standard" .tif. But After ?
Maybe with gdal_translate and/or gdalwarp, but how ?

Note: i am a very beginner.

Regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190108/be11826e/attachment.html>

From guyd at satellogic.com  Tue Jan  8 07:21:43 2019
From: guyd at satellogic.com (Guy Doulberg)
Date: Tue, 8 Jan 2019 17:21:43 +0200
Subject: [gdal-dev] Fwd: Add overviews there is a difference between
	interleave
In-Reply-To: <CAJ18MZrqOdZf3M0nbbCDhk_BkBfFvump-gzahx6AOwVgh5j4Cw@mail.gmail.com>
References: <CAJ18MZrqOdZf3M0nbbCDhk_BkBfFvump-gzahx6AOwVgh5j4Cw@mail.gmail.com>
Message-ID: <CAJ18MZrXipwW1F6LHQ+J6MfR2jCD2WTH7v+Sa8QrV6hJA7i5bg@mail.gmail.com>

Hi guys

I am trying to fix artifacts that the gdaladdo is creating in the overview
I am working on.

The gdal version I am working with is 2.3.2

In general I have a big vrt file (RGB) on top of COGs with internal masks.
There are places in the original rasters that we mask the values.


But when building overviews it seems like that the masked values in some
layers are used, and artifacts are being created.

I was trying to play with many variant to understand these artifacts
creation, the only variant I noticed to have an impact is the INTERLEAVE of
the overviews,

When I set it to PIXEL it runs fast but creates artifacts
When I set it to BAND it runs 3 times longer and there are less artifacts
created.

So far my understanding of the INTERLEAVE configuration was that it affects
the final products block arrangement, I don't understand why it affects the
product values, and the processing time as well


I hope that I am clear enough

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190108/8996209a/attachment.html>

From even.rouault at spatialys.com  Tue Jan  8 07:35:42 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 08 Jan 2019 16:35:42 +0100
Subject: [gdal-dev] Fwd: Add overviews there is a difference between
	interleave
In-Reply-To: <CAJ18MZrXipwW1F6LHQ+J6MfR2jCD2WTH7v+Sa8QrV6hJA7i5bg@mail.gmail.com>
References: <CAJ18MZrqOdZf3M0nbbCDhk_BkBfFvump-gzahx6AOwVgh5j4Cw@mail.gmail.com>
 <CAJ18MZrXipwW1F6LHQ+J6MfR2jCD2WTH7v+Sa8QrV6hJA7i5bg@mail.gmail.com>
Message-ID: <11240249.QUgniUP0sQ@even-i700>

On mardi 8 janvier 2019 17:21:43 CET Guy Doulberg wrote:
> Hi guys
> 
> I am trying to fix artifacts that the gdaladdo is creating in the overview
> I am working on.
> 
> The gdal version I am working with is 2.3.2
> 
> In general I have a big vrt file (RGB) on top of COGs with internal masks.
> There are places in the original rasters that we mask the values.
> 
> 
> But when building overviews it seems like that the masked values in some
> layers are used, and artifacts are being created.
> 
> I was trying to play with many variant to understand these artifacts
> creation, the only variant I noticed to have an impact is the INTERLEAVE of
> the overviews,
> 
> When I set it to PIXEL it runs fast but creates artifacts
> When I set it to BAND it runs 3 times longer and there are less artifacts
> created.
> 
> So far my understanding of the INTERLEAVE configuration was that it affects
> the final products block arrangement, I don't understand why it affects the
> product values, and the processing time as well

Normally the interleaving configuration shouldn't have impacts, unless you use 
a lossy compression in which case the way data is written might have some 
influence. So what you observe is a bug/feature of GDAL not using the same 
code paths internally in the PIXEL case where multi-band processing is done, 
and in the BAND case where bands are processed independantly. Both methods 
normally takes into account source masks, but the code is substantially 
different so there is likely some subtelty occuring here.
The processing time is dependant of those different code paths, as well as the 
interleaving of the source band from which the overviews are created.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrew.bell.ia at gmail.com  Tue Jan  8 08:38:32 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 8 Jan 2019 11:38:32 -0500
Subject: [gdal-dev] Whitespace in WKT
Message-ID: <CACJ51z2aRkHLRD2PPfcb0Pjp=bpyb97qCfpp1rYEOBrxuhCq6w@mail.gmail.com>

Hi,

I have some WKT where point X and Y are separated by newline characters
rather than spaces.  A look at OGRWktReadToken seems to eat spaces and
tabs, but not newlines or other whitespace.  My reading of the OGC simple
feature BNF doesn't help much, as AFAICT, the separator between is an
"implied" space:

OGC 06-103r4

<point z> ::= <x> <y> <z>

I would have expected to see spacing specified something like:

<point z> ::= <x> <space> <y> <space> <z>

So I'm confused.  Are only tabs and spaces allowed?  Only a single
space?  Is this defined somewhere I'm not seeing?

Thanks,

--

Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190108/01eb987a/attachment.html>

From even.rouault at spatialys.com  Tue Jan  8 09:10:35 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 08 Jan 2019 18:10:35 +0100
Subject: [gdal-dev] Whitespace in WKT
In-Reply-To: <CACJ51z2aRkHLRD2PPfcb0Pjp=bpyb97qCfpp1rYEOBrxuhCq6w@mail.gmail.com>
References: <CACJ51z2aRkHLRD2PPfcb0Pjp=bpyb97qCfpp1rYEOBrxuhCq6w@mail.gmail.com>
Message-ID: <1710042.9bWG4kDUkK@even-i700>

On mardi 8 janvier 2019 11:38:32 CET Andrew Bell wrote:
> Hi,
> 
> I have some WKT where point X and Y are separated by newline characters
> rather than spaces.  A look at OGRWktReadToken seems to eat spaces and
> tabs, but not newlines or other whitespace.  My reading of the OGC simple
> feature BNF doesn't help much, as AFAICT, the separator between is an
> "implied" space:
> 
> OGC 06-103r4
> 
> <point z> ::= <x> <y> <z>
> 
> I would have expected to see spacing specified something like:
> 
> <point z> ::= <x> <space> <y> <space> <z>
> 
> So I'm confused.  Are only tabs and spaces allowed?  Only a single
> space?  Is this defined somewhere I'm not seeing?

The BNF mentions only <space> " " // unicode "U+0020" (space)
but indeed doesn't use it in a rigorous way.
SQL/MM Part 3 (at least the draft of it publicly found or the extract at
https://github.com/postgis/postgis/blob/svn-trunk/doc/bnf-wkt.txt ) doesn't 
even mention it...

The general practice in other implementations I've seen (PostGIS, Spatialite), 
on the write side, is to just use a single space to separate the coordinates 
of a tuple. Some implementations might add an extra space between a geometry 
name keyword and the ( parenthesis: "POINT (1 2)" vs "POINT(1 2)". I've never 
seen tabulations or newlines.

That said, from a quick test, PostGIS WKT parser seems to support tabulations 
and newlines, and several occurences of those separators.

Confirmed by
https://github.com/postgis/postgis/blob/
1ba28a8ea39e8be0eabc322c992a315d9c09528e/liblwgeom/lwin_wkt_lex.l#L92

We might we more tolerant on the read side. Can't think right now of potential 
issues in doing so

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From shawn.gong at mdacorporation.com  Tue Jan  8 13:27:54 2019
From: shawn.gong at mdacorporation.com (Gong, Shawn)
Date: Tue, 8 Jan 2019 21:27:54 +0000
Subject: [gdal-dev] gdalwarp -overwrite
Message-ID: <7DCBC135929FF74E8A5488B1814AC6BC5434B8A4@exbermd02.ds.mda.ca>

Hi list,

I am switching from calling gdalwarp to using gdal.Warp( )
One of the gdalwarp parameters is "-overwrite" but I can't find it in gdal.WarpOptions

Do I need it, is it a default option if I don't specify it?


Thanks,
Shawn

This electronic correspondence, including any attachments, is intended solely for the use of the intended recipient(s) and may contain legally privileged, proprietary and/or confidential information. If you are not the intended recipient, please immediately notify the sender by reply e-mail and permanently delete all copies of this electronic correspondence and associated attachments. Any use, disclosure, dissemination, distribution or copying of this electronic correspondence and any attachments for any purposes that have not been specifically authorized by the sender is strictly prohibited.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190108/9a8384d0/attachment.html>

From sean at mapbox.com  Tue Jan  8 14:16:47 2019
From: sean at mapbox.com (Sean Gillies)
Date: Tue, 8 Jan 2019 15:16:47 -0700
Subject: [gdal-dev] Discoverability of the new proj.db and
	GDAL_DATA/PROJ_LIB?
Message-ID: <CADPhZXxcaFP1Pqt7U7oL9MF3mtYcfjGi6bcsfpEBRU5sC0+Nzg@mail.gmail.com>

Hi,

I have a couple questions about discoverability of the new proj.db file and
how I should prepare my Rasterio project for the changes. Background: I am
publishing rasterio wheels on the Python package index that include GDAL
and PROJ shared libraries and the data files so that users can `pip install
rasterio` and get something with batteries included. Rasterio has an Env
class that is to be used as a context manager and it ensures that PROJ_LIB
(the env variable) and GDAL_DATA (the config option, not env variable) are
set to the proper paths, paths within the installed wheel adjacent to
rasterio's Python modules.

It seems like I'll be including proj.db in future wheels, which shouldn't
be a problem.

When proj.db replaces the .csv files in GDAL and PROJ, will the GDAL_DATA
configuration option become obsolete? If so, will there be different
configuration option to point at the proj.db file? I'd prefer not to use an
environment variable only, as far as I'm concerned a Python module should
only patch the environment as a very last recourse.

I've just thought of a question about data file caching that I want to tack
on. I don't think it's widely understood by users, but GDAL caches data
read from the .csv files. For example, you can set GDAL_DATA to a custom
location (like rasterio does), call a function that requires .csv data,
then return and call that function again with GDAL_DATA unset and get the
right answer. This is a good thing, because otherwise we'd be reading from
disk every time. My question is whether or not this will change when we
move over to the new PROJ. Will data be cached or will we need the path to
proj.db to be configured all the time?

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190108/d1b9beb3/attachment.html>

From even.rouault at spatialys.com  Wed Jan  9 01:40:43 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 09 Jan 2019 10:40:43 +0100
Subject: [gdal-dev] gdalwarp -overwrite
In-Reply-To: <7DCBC135929FF74E8A5488B1814AC6BC5434B8A4@exbermd02.ds.mda.ca>
References: <7DCBC135929FF74E8A5488B1814AC6BC5434B8A4@exbermd02.ds.mda.ca>
Message-ID: <2621716.odLT9mes14@even-i700>

On mardi 8 janvier 2019 21:27:54 CET Gong, Shawn wrote:
> Hi list,
> 
> I am switching from calling gdalwarp to using gdal.Warp( )
> One of the gdalwarp parameters is "-overwrite" but I can't find it in
> gdal.WarpOptions
> 
> Do I need it, is it a default option if I don't specify it?

If you use a string for the output filename as the first argument, then it 
will operate in overwrite mode.
If you use a dataset object opened in update mode, then it will operate in 
update mode.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Jan  9 02:04:19 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 09 Jan 2019 11:04:19 +0100
Subject: [gdal-dev] Discoverability of the new proj.db and
	GDAL_DATA/PROJ_LIB?
In-Reply-To: <CADPhZXxcaFP1Pqt7U7oL9MF3mtYcfjGi6bcsfpEBRU5sC0+Nzg@mail.gmail.com>
References: <CADPhZXxcaFP1Pqt7U7oL9MF3mtYcfjGi6bcsfpEBRU5sC0+Nzg@mail.gmail.com>
Message-ID: <10554383.qyOUIH2hYm@even-i700>

On mardi 8 janvier 2019 15:16:47 CET Sean Gillies wrote:
> Hi,
> 
> I have a couple questions about discoverability of the new proj.db file and
> how I should prepare my Rasterio project for the changes. Background: I am
> publishing rasterio wheels on the Python package index that include GDAL
> and PROJ shared libraries and the data files so that users can `pip install
> rasterio` and get something with batteries included. Rasterio has an Env
> class that is to be used as a context manager and it ensures that PROJ_LIB
> (the env variable) and GDAL_DATA (the config option, not env variable) are
> set to the proper paths, paths within the installed wheel adjacent to
> rasterio's Python modules.
> 
> It seems like I'll be including proj.db in future wheels, which shouldn't
> be a problem.

proj.db will be searched in PROJ_LIB if defined, or otherwise in the
${prefix}/share/proj directory if you ./configure --with-prefix=${prefix}
Is the issue that binaries of wheels aren't installed in fix locations ?

PROJ 6 new API has a proj_context_set_database_path() function but I've not 
used/exposed through GDAL for now. It is something per-context (and thus 
potentially per thread since in my new GDAL branch PROJ contexts are per-
thread variables, which are not exposed in GDAL API), and only for proj.db 
itself, not other PROJ resources (such as grid files) normally accessible 
through PROJ_LIB / ${prefix}/share/proj

There's also a related ticket in PROJ tracker:
https://github.com/OSGeo/proj.4/issues/1150
We'd probably need to expose pj_set_searchpath() in the public PROJ API.

> 
> When proj.db replaces the .csv files in GDAL and PROJ, will the GDAL_DATA
> configuration option become obsolete?

GDAL_DATA will still be used by some drivers to retrieve resource files, but 
no longer for CRS related operations.

> 
> I've just thought of a question about data file caching that I want to tack
> on. I don't think it's widely understood by users, but GDAL caches data
> read from the .csv files. For example, you can set GDAL_DATA to a custom
> location (like rasterio does), call a function that requires .csv data,
> then return and call that function again with GDAL_DATA unset and get the
> right answer. 

That's an implementation detail.

> This is a good thing, because otherwise we'd be reading from
> disk every time. My question is whether or not this will change when we
> move over to the new PROJ. Will data be cached or will we need the path to
> proj.db to be configured all the time?

There will be some caching, but on a least-recently-used way, not full 
caching, and not on everything, so access to proj.db might occur at any time.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From shawn.gong at mdacorporation.com  Wed Jan  9 06:48:30 2019
From: shawn.gong at mdacorporation.com (Gong, Shawn)
Date: Wed, 9 Jan 2019 14:48:30 +0000
Subject: [gdal-dev] gdalwarp -overwrite
In-Reply-To: <2621716.odLT9mes14@even-i700>
References: <7DCBC135929FF74E8A5488B1814AC6BC5434B8A4@exbermd02.ds.mda.ca>,
 <2621716.odLT9mes14@even-i700>
Message-ID: <7DCBC135929FF74E8A5488B1814AC6BC5434B8DA@exbermd02.ds.mda.ca>

Thank you Even.

Shawn

________________________________________
From: Even Rouault [even.rouault at spatialys.com]
Sent: January-09-19 4:40 AM
To: gdal-dev at lists.osgeo.org
Cc: Gong, Shawn
Subject: Re: [gdal-dev] gdalwarp -overwrite

On mardi 8 janvier 2019 21:27:54 CET Gong, Shawn wrote:
> Hi list,
>
> I am switching from calling gdalwarp to using gdal.Warp( )
> One of the gdalwarp parameters is "-overwrite" but I can't find it in
> gdal.WarpOptions
>
> Do I need it, is it a default option if I don't specify it?

If you use a string for the output filename as the first argument, then it
will operate in overwrite mode.
If you use a dataset object opened in update mode, then it will operate in
update mode.

Even

--
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Jan  9 07:23:44 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 09 Jan 2019 16:23:44 +0100
Subject: [gdal-dev] RFC 73 (aka gdalsrsbarn) available for review
Message-ID: <11662317.BXslRNNhNX@even-i700>

Hi,

RFC 73 "Integration of PROJ6 for WKT2, late binding capabilities, time-support 
and unified CRS database" is available for your review at:

https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn

The proposed implementation is at:
https://github.com/OSGeo/gdal/pull/1185

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gigas002 at yandex.ru  Wed Jan  9 07:49:18 2019
From: gigas002 at yandex.ru (Gigas002)
Date: Wed, 9 Jan 2019 08:49:18 -0700 (MST)
Subject: [gdal-dev] How to convert shapefile to geojson, using c# binding?
Message-ID: <1547048958252-0.post@n6.nabble.com>

Hello. Does anybody know, if there's a way to convert shapefile to geojson
using c# bindings? I know about ogr2ogr.exe, but I'd still prefer bindings
if it's possible.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Wed Jan  9 10:12:44 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 09 Jan 2019 19:12:44 +0100
Subject: [gdal-dev] Discoverability of the new proj.db and
	GDAL_DATA/PROJ_LIB?
In-Reply-To: <10554383.qyOUIH2hYm@even-i700>
References: <CADPhZXxcaFP1Pqt7U7oL9MF3mtYcfjGi6bcsfpEBRU5sC0+Nzg@mail.gmail.com>
 <10554383.qyOUIH2hYm@even-i700>
Message-ID: <5718093.qA8dnp1kWr@even-i700>

> PROJ 6 new API has a proj_context_set_database_path() function but I've not
> used/exposed through GDAL for now. It is something per-context (and thus
> potentially per thread since in my new GDAL branch PROJ contexts are per-
> thread variables, which are not exposed in GDAL API), and only for proj.db
> itself, not other PROJ resources (such as grid files) normally accessible
> through PROJ_LIB / ${prefix}/share/proj
> 
> There's also a related ticket in PROJ tracker:
> https://github.com/OSGeo/proj.4/issues/1150
> We'd probably need to expose pj_set_searchpath() in the public PROJ API.

I've just submitted a PR https://github.com/OSGeo/proj.4/pull/1218 to add a

proj_context_set_search_paths(
 PJ_CONTEXT *ctx, int count_paths,const char* const* paths)

If called on the default PROJ context (NULL) before GDAL creates it own 
contexts, this should allow you to specify your own search path.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sean at mapbox.com  Wed Jan  9 11:29:22 2019
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 9 Jan 2019 12:29:22 -0700
Subject: [gdal-dev] Discoverability of the new proj.db and
	GDAL_DATA/PROJ_LIB?
In-Reply-To: <5718093.qA8dnp1kWr@even-i700>
References: <CADPhZXxcaFP1Pqt7U7oL9MF3mtYcfjGi6bcsfpEBRU5sC0+Nzg@mail.gmail.com>
 <10554383.qyOUIH2hYm@even-i700> <5718093.qA8dnp1kWr@even-i700>
Message-ID: <CADPhZXzMCXEKFRBYrgpXmaT9eZUkFN1SRybsQL6J0W9PjOQT1A@mail.gmail.com>

On Wed, Jan 9, 2019 at 11:12 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> > PROJ 6 new API has a proj_context_set_database_path() function but I've
> not
> > used/exposed through GDAL for now. It is something per-context (and thus
> > potentially per thread since in my new GDAL branch PROJ contexts are per-
> > thread variables, which are not exposed in GDAL API), and only for
> proj.db
> > itself, not other PROJ resources (such as grid files) normally accessible
> > through PROJ_LIB / ${prefix}/share/proj
> >
> > There's also a related ticket in PROJ tracker:
> > https://github.com/OSGeo/proj.4/issues/1150
> > We'd probably need to expose pj_set_searchpath() in the public PROJ API.
>
> I've just submitted a PR https://github.com/OSGeo/proj.4/pull/1218 to add
> a
>
> proj_context_set_search_paths(
>  PJ_CONTEXT *ctx, int count_paths,const char* const* paths)
>
> If called on the default PROJ context (NULL) before GDAL creates it own
> contexts, this should allow you to specify your own search path.
>

Or I could call pj_set_searchpath?

I'm a little concerned about the need to race GDAL to the default context.
I'm not sure how I'll be able to do this in practice. Even if Rasterio were
to call pj_set_searchpath immediately on import, which I'd like to avoid
for a number of reasons, any user who imported a different module that
loads GDAL (osgeo.gdal, for example) before importing Rasterio would lose
that insurance and may experience some trouble that is hard to diagnose.
Could a GDAL API function that allowed modification of the search path in
GDAL's own context help?

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190109/ff22e337/attachment-0001.html>

From even.rouault at spatialys.com  Wed Jan  9 11:40:35 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 09 Jan 2019 20:40:35 +0100
Subject: [gdal-dev] Discoverability of the new proj.db and
	GDAL_DATA/PROJ_LIB?
In-Reply-To: <CADPhZXzMCXEKFRBYrgpXmaT9eZUkFN1SRybsQL6J0W9PjOQT1A@mail.gmail.com>
References: <CADPhZXxcaFP1Pqt7U7oL9MF3mtYcfjGi6bcsfpEBRU5sC0+Nzg@mail.gmail.com>
 <5718093.qA8dnp1kWr@even-i700>
 <CADPhZXzMCXEKFRBYrgpXmaT9eZUkFN1SRybsQL6J0W9PjOQT1A@mail.gmail.com>
Message-ID: <1792412.gZ8FvuNcCA@even-i700>

> > I've just submitted a PR https://github.com/OSGeo/proj.4/pull/1218 to add
> > a
> > 
> > proj_context_set_search_paths(
> > 
> >  PJ_CONTEXT *ctx, int count_paths,const char* const* paths)
> > 
> > If called on the default PROJ context (NULL) before GDAL creates it own
> > contexts, this should allow you to specify your own search path.
> 
> Or I could call pj_set_searchpath?

It is part of the proj_api.h that will be deprecated in PROJ 6 and eventually 
removed in PROJ 7. Its effect in PROJ 6 will be identifcal to using 
proj_context_set_search_paths() with the default PROJ context.

> 
> I'm a little concerned about the need to race GDAL to the default context.
> I'm not sure how I'll be able to do this in practice. Even if Rasterio were
> to call pj_set_searchpath immediately on import, which I'd like to avoid
> for a number of reasons, any user who imported a different module that
> loads GDAL (osgeo.gdal, for example) before importing Rasterio would lose
> that insurance and may experience some trouble that is hard to diagnose.

> Could a GDAL API function that allowed modification of the search path in
> GDAL's own context help?

ok, I'll probably add a

void CPL_DLL OSRSetPROJSearchPaths( const char* const* papszPaths );

that will internally call proj_context_set_search_paths() on PROJ context 
managed by GDAL (affecting the already created TLS ones, and future ones)

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From shawn.gong at mdacorporation.com  Wed Jan  9 11:47:03 2019
From: shawn.gong at mdacorporation.com (Gong, Shawn)
Date: Wed, 9 Jan 2019 19:47:03 +0000
Subject: [gdal-dev] COSMO SkyMed HDF5 driver problem
Message-ID: <7DCBC135929FF74E8A5488B1814AC6BC5434B919@exbermd02.ds.mda.ca>

Hi list,

I use HDF5 release 1.8.21 in GDAL 2.2.5, and encountered problem with COSMO SkyMed H5:
1) failed to georeference the image,
2) read I and Q as two bands

Previous version of GDAL 1.9 + older HDF5 release 1.8.8 was fine ingesting COSMO SkyMed.

Is this GDAL 2.2.5 issue or HDF5 issue?


Thanks,
Shawn

This electronic correspondence, including any attachments, is intended solely for the use of the intended recipient(s) and may contain legally privileged, proprietary and/or confidential information. If you are not the intended recipient, please immediately notify the sender by reply e-mail and permanently delete all copies of this electronic correspondence and associated attachments. Any use, disclosure, dissemination, distribution or copying of this electronic correspondence and any attachments for any purposes that have not been specifically authorized by the sender is strictly prohibited.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190109/7ad8e4db/attachment.html>

From sean at mapbox.com  Wed Jan  9 11:55:40 2019
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 9 Jan 2019 12:55:40 -0700
Subject: [gdal-dev] Discoverability of the new proj.db and
	GDAL_DATA/PROJ_LIB?
In-Reply-To: <1792412.gZ8FvuNcCA@even-i700>
References: <CADPhZXxcaFP1Pqt7U7oL9MF3mtYcfjGi6bcsfpEBRU5sC0+Nzg@mail.gmail.com>
 <5718093.qA8dnp1kWr@even-i700>
 <CADPhZXzMCXEKFRBYrgpXmaT9eZUkFN1SRybsQL6J0W9PjOQT1A@mail.gmail.com>
 <1792412.gZ8FvuNcCA@even-i700>
Message-ID: <CADPhZXxL+3imi+UEevWvSifHwtrmFnpEGJTit9+q38GA5duD0A@mail.gmail.com>

On Wed, Jan 9, 2019 at 12:40 PM Even Rouault <even.rouault at spatialys.com>
wrote:

...

> > Could a GDAL API function that allowed modification of the search path in
> > GDAL's own context help?
>
> ok, I'll probably add a
>
> void CPL_DLL OSRSetPROJSearchPaths( const char* const* papszPaths );
>
> that will internally call proj_context_set_search_paths() on PROJ context
> managed by GDAL (affecting the already created TLS ones, and future ones)
>
>
Sounds good! I just added a ticket about this:
https://github.com/OSGeo/gdal/issues/1191.

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190109/797b6423/attachment.html>

From bontepaarden at gmail.com  Thu Jan 10 01:15:19 2019
From: bontepaarden at gmail.com (Paul Meems)
Date: Thu, 10 Jan 2019 10:15:19 +0100
Subject: [gdal-dev] How to convert shapefile to geojson,
	using c# binding?
In-Reply-To: <1547048958252-0.post@n6.nabble.com>
References: <1547048958252-0.post@n6.nabble.com>
Message-ID: <CAHNf2YRB3i7-5ww76knHOoe8ARsOGD9MuUD9t8mQr5XVAdtWHQ@mail.gmail.com>

I use it like this:
var options = new[]
{
    "-f", "GeoJSON",
    "-lco", "RFC7946=YES"
};
VectorTranslate(shapefileLocation, output, options);

public void VectorTranslate(string input, string output, string[] options)
{
    if (!input.StartsWith("PG:") && !File.Exists(input))
    {
        throw new FileNotFoundException("Can't find the input file",
            new Exception("Working with " + input));
    }

    using (var ds = Gdal.OpenEx(input, 4, null, null, null))
    {
        if (ds == null)  throw new Exception("Can't open GDAL dataset: " +
input);

        var gdalOptions = new GDALVectorTranslateOptions(options);
        using (var newDs = Gdal.wrapper_GDALVectorTranslateDestName(output,
ds, gdalOptions, null, null))
        {
            if (newDs == null)  throw new Exception("VectorTranslate
failed: " + Gdal.GetLastErrorMsg());
        }
    }
}


Paul

*Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl


*The MapWindow GIS project has a new forum
<https://mapwindow.discourse.group>!*


Download the latest MapWinGIS mapping engine.
<https://github.com/MapWindow/MapWinGIS/releases>

Download the latest MapWindow 5 open source desktop application.
<https://github.com/MapWindow/MapWindow5/releases>



Op wo 9 jan. 2019 om 16:49 schreef Gigas002 <gigas002 at yandex.ru>:

> Hello. Does anybody know, if there's a way to convert shapefile to geojson
> using c# bindings? I know about ogr2ogr.exe, but I'd still prefer bindings
> if it's possible.
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190110/4c338171/attachment.html>

From shawn.gong at mdacorporation.com  Fri Jan 11 09:26:12 2019
From: shawn.gong at mdacorporation.com (Gong, Shawn)
Date: Fri, 11 Jan 2019 17:26:12 +0000
Subject: [gdal-dev] GDAL 1.9 and 2.2 different behaviour when cropping and
 displaying image
Message-ID: <7DCBC135929FF74E8A5488B1814AC6BC5434B989@exbermd02.ds.mda.ca>

Hi list,

I found different behaviour when cropping and displaying image in OpenEV when using GDAL 1.9 and 2.2, that I couldn't explain:

1) 1st crop
output_ds = gdal_array.OpenArray(imageData)
raster_layer=RasterLayer(ds=output_ds)
  which calls __new__ and __init__, and generate self._ds

2) 2nd crop at different spot
output_ds = gdal_array.OpenArray(imageData)  # verified that output_ds and imageData are different than 1st crop
  but  self._ds is generated twice: the first time correctly, second time it took the 1st crop data.

Has it been changes in how gview.GvRasterLayer.__init__ works?


Thanks,
Shawn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190111/24f491a5/attachment.html>

From David.Bekaert at jpl.nasa.gov  Fri Jan 11 13:22:03 2019
From: David.Bekaert at jpl.nasa.gov (Bekaert, David (334H))
Date: Fri, 11 Jan 2019 21:22:03 +0000
Subject: [gdal-dev] vector representation in netcdf 4
Message-ID: <64B7D3B8-7159-4410-B155-939C9FA3BDC5@jpl.nasa.gov>

Dear GDAL developers,

I am looking into adding a wkt compatible polygon into a netcdf (version 4) file which also has raster information in it.
Attached is a sample file generated by Even “mixed.nc” with a wkt polygon enclosed formatted as a string of numpy array.
The sample allows to extract a poly using ogr2ogr as “ogr2ogr mixed.shp mixed.nc poly”

Although QGIS does not seem to catch projection information.
Is there a standard way of storing vector information in netcdf conform CF or would the attached sample be specifically for GDAL only?

Thank you,
David

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190111/a81c1193/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mixed.nc
Type: application/octet-stream
Size: 53440 bytes
Desc: mixed.nc
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190111/a81c1193/attachment-0001.obj>

From sanfilippopablo at gmail.com  Fri Jan 11 13:47:11 2019
From: sanfilippopablo at gmail.com (Pablo Sanfilippo)
Date: Fri, 11 Jan 2019 18:47:11 -0300
Subject: [gdal-dev] Zd
Message-ID: <CAKYLMGZzsbFm-tZo3xfQu=oaLzpYRNEj15Vy9m+TVYKU4fZ4UA@mail.gmail.com>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190111/190eed70/attachment.html>

From even.rouault at spatialys.com  Fri Jan 11 14:11:03 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Jan 2019 23:11:03 +0100
Subject: [gdal-dev] vector representation in netcdf 4
In-Reply-To: <64B7D3B8-7159-4410-B155-939C9FA3BDC5@jpl.nasa.gov>
References: <64B7D3B8-7159-4410-B155-939C9FA3BDC5@jpl.nasa.gov>
Message-ID: <1674637.fSEpH9tVmv@even-i700>

David,

No need to test with QGIS, ogrinfo also shows that the SRS isn't recognized.

This sample files was quickly hand generated with ncdump/ncgen without taking 
much care to the georeferencing. It lacks referencing the transverse_mercator 
variable in the vector fields.

Like:

	char ogc_wkt(record, ogc_wkt_max_width) ;
		ogc_wkt:long_name = "Geometry as ISO WKT" ;
		ogc_wkt:grid_mapping = "transverse_mercator" ;
	double AREA(record) ;
		AREA:long_name = "Field AREA" ;
		AREA:ogr_field_name = "AREA" ;
		AREA:ogr_field_type = "Real" ;
		AREA:ogr_field_width = 12 ;
		AREA:ogr_field_precision = 3 ;
		AREA:grid_mapping = "transverse_mercator" ;
	double EAS_ID(record) ;
		EAS_ID:long_name = "Field EAS_ID" ;
		EAS_ID:ogr_field_name = "EAS_ID" ;
		EAS_ID:ogr_field_type = "Integer64" ;
		EAS_ID:ogr_field_width = 11 ;
		EAS_ID:grid_mapping = "transverse_mercator" ;
	char PRFEDEA(record, PRFEDEA_max_width) ;
		PRFEDEA:long_name = "Field PRFEDEA" ;
		PRFEDEA:ogr_field_name = "PRFEDEA" ;
		PRFEDEA:ogr_field_type = "String" ;
		PRFEDEA:ogr_field_width = 16 ;
		PRFEDEA:grid_mapping = "transverse_mercator" ;

Actually I've just tried adding this and it works now. Modified file attached

Even

> Dear GDAL developers,
> 
> I am looking into adding a wkt compatible polygon into a netcdf (version 4)
> file which also has raster information in it.
 Attached is a sample file
> generated by Even “mixed.nc” with a wkt polygon enclosed formatted as a
> string of numpy array. The sample allows to extract a poly using ogr2ogr as
> “ogr2ogr mixed.shp mixed.nc poly” 
> Although QGIS does not seem to catch projection information.
> Is there a standard way of storing vector information in netcdf conform CF
> or would the attached sample be specifically for GDAL only?
 
> Thank you,
> David
> 


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mixed.nc
Type: application/x-netcdf
Size: 53847 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190111/d9189c29/attachment-0001.nc>

From shayne.tueller at us.af.mil  Fri Jan 11 17:49:47 2019
From: shayne.tueller at us.af.mil (TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC)
Date: Sat, 12 Jan 2019 01:49:47 +0000
Subject: [gdal-dev] GDAL app won't read SRS...
Message-ID: <CY1P111MB013492F3EFF22196A82D4ADCC6860@CY1P111MB0134.NAMP111.PROD.OUTLOOK.COM>

Hello,

I built GDAL 2.3.1 library from source on Windows successfully. To test the library out, I tried running "gdalinfo" on a GeoTIFF file, and it reported the following error...

"ERROR 4: Unable to open EPSG support file gcs.csv. Try setting the GDAL_DATA environment variable to point to the directory containing EPSG csv files." The info for the SRS doesn't print.

I set the GDAL_DATA and the error goes away but I don't want to be dependent upon this setting. In previous binary versions of GDAL, I didn't need to set GDAL_DATA variable in order for gdalinfo to read and print out the SRS. Obviously I'm missing something or some dependency with the library build?

Can anyone shed light on what is going on or what I need to do to get the GDAL library to read the SRS without the need for the GDAL_DATA environment variable?

Thanks.

Shayne

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190112/7438cc76/attachment.html>

From bradh at frogmouth.net  Fri Jan 11 19:20:23 2019
From: bradh at frogmouth.net (bradh at frogmouth.net)
Date: Sat, 12 Jan 2019 14:20:23 +1100
Subject: [gdal-dev] GDAL app won't read SRS...
In-Reply-To: <CY1P111MB013492F3EFF22196A82D4ADCC6860@CY1P111MB0134.NAMP111.PROD.OUTLOOK.COM>
References: <CY1P111MB013492F3EFF22196A82D4ADCC6860@CY1P111MB0134.NAMP111.PROD.OUTLOOK.COM>
Message-ID: <000e01d4aa25$c1e1ce60$45a56b20$@frogmouth.net>

It might help if you can say how you built GDAL. For example, how did you
set up the build-time variables in nmake.opt?

https://github.com/OSGeo/gdal/blob/master/gdal/nmake.opt#L56 

Does the DATADIR there point to the directory that contains the right data?

 

Brad

 

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of TUELLER,
SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC
Sent: Saturday, 12 January 2019 12:50 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] GDAL app won't read SRS...

 

Hello,

 

I built GDAL 2.3.1 library from source on Windows successfully. To test the
library out, I tried running "gdalinfo" on a GeoTIFF file, and it reported
the following error.

 

"ERROR 4: Unable to open EPSG support file gcs.csv. Try setting the
GDAL_DATA environment variable to point to the directory containing EPSG csv
files." The info for the SRS doesn't print.

 

I set the GDAL_DATA and the error goes away but I don't want to be dependent
upon this setting. In previous binary versions of GDAL, I didn't need to set
GDAL_DATA variable in order for gdalinfo to read and print out the SRS.
Obviously I'm missing something or some dependency with the library build?

 

Can anyone shed light on what is going on or what I need to do to get the
GDAL library to read the SRS without the need for the GDAL_DATA environment
variable?

 

Thanks.

 

Shayne

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190112/30029772/attachment.html>

From idan at miara.com  Mon Jan 14 02:00:27 2019
From: idan at miara.com (Idan Miara)
Date: Mon, 14 Jan 2019 12:00:27 +0200
Subject: [gdal-dev] Geoserver/gdal: large tif with multiple overviews - bug
	+ workaround
Message-ID: <CAEDrt3_W3r5qZSZERLCKn5Mmjbq0dP_UAbPukuk-ziFoao8p1g@mail.gmail.com>

Hi,

Due to the following bug:
https://trac.osgeo.org/gdal/ticket/5067
When I need to make multiple overviews for a large tiff I use the suggested
workaround (making tif.ovr, tif.ovr.ovr, tif.ovr.ovr.ovr etc...).
This workaround works well for applications that use gdal (i.e. QGIS) but
Geoserver's internal GeoTiff reader ignores the multiple ovr files (I
assume it reads only the tif+tif.ovr files) thus the performance for this
map is very bad.

Workaround I found: I use the gdal-geoserver plugin and then create a
trivial vrt for the tif and load it in Geoserver with the gdal plugin.
I needed to make a VRT because as far as I can tell Geoserver doesn't
register the GeoTiff format with gdal when the plugin is installed but
still uses the internal GeoTiff reader).

A few questions:
1. Is there a plan to solve that very old gdaladdo bug? (I didn't check
with recent gdal versions but it still not marked as resolved as in 6 years)
2. Is it possible to make Geoserver recognize ovr.ovr files?
3. Can I make geoserver use the gdal plugin for GeoTiff files to avoid the
trivial vrt file ?

Kind regards,
Idan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190114/6d9eac49/attachment.html>

From andrea.aime at geo-solutions.it  Mon Jan 14 02:09:59 2019
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Mon, 14 Jan 2019 11:09:59 +0100
Subject: [gdal-dev] Geoserver/gdal: large tif with multiple overviews -
 bug + workaround
In-Reply-To: <CAEDrt3_W3r5qZSZERLCKn5Mmjbq0dP_UAbPukuk-ziFoao8p1g@mail.gmail.com>
References: <CAEDrt3_W3r5qZSZERLCKn5Mmjbq0dP_UAbPukuk-ziFoao8p1g@mail.gmail.com>
Message-ID: <CA+nxMTv+25MtQL43wydCsAqDMDoEJs6DPmtnXUPHzFC5fOGp0g@mail.gmail.com>

On Mon, Jan 14, 2019 at 11:01 AM Idan Miara <idan at miara.com> wrote:

> 2. Is it possible to make Geoserver recognize ovr.ovr files?
>

You can contribute changes to the code and add support for ovr.ovr files if
you want to, see a guide here:
https://github.com/geoserver/geoserver/wiki/Successfully-requesting-and-integrating-new-features-and-improvements-in-GeoServer
If you want to code the improvement yourself just ask, I can give you
pointers to which classes need to be modified.


> 3. Can I make geoserver use the gdal plugin for GeoTiff files to avoid the
> trivial vrt file ?
>

We'd have the code, but it has been removed years ago as it was source of
unpredictable issues when deployed:
https://osgeo-org.atlassian.net/browse/GEOS-7981

Again, if you're interested, you could spend time looking at the actual
source issue and reinstate the plugin.

Cheers
Andrea

==

GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information. == Ing. Andrea Aime @geowolf Technical Lead
GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa (LU) phone: +39
0584 962313 fax: +39 0584 1660272 mob: +39 339 8844549
http://www.geo-solutions.it http://twitter.com/geosolutions_it
------------------------------------------------------- *Con riferimento
alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 -
Regolamento generale sulla protezione dei dati “GDPR”), si precisa che ogni
circostanza inerente alla presente email (il suo contenuto, gli eventuali
allegati, etc.) è un dato la cui conoscenza è riservata al/i solo/i
destinatario/i indicati dallo scrivente. Se il messaggio Le è giunto per
errore, è tenuta/o a cancellarlo, ogni altra operazione è illecita. Le
sarei comunque grato se potesse darmene notizia. This email is intended
only for the person or entity to which it is addressed and may contain
information that is privileged, confidential or otherwise protected from
disclosure. We remind that - as provided by European Regulation 2016/679
“GDPR” - copying, dissemination or use of this e-mail or the information
herein by anyone other than the intended recipient is prohibited. If you
have received this email by mistake, please notify us immediately by
telephone or e-mail.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190114/1706e9f4/attachment.html>

From idan at miara.com  Mon Jan 14 02:51:28 2019
From: idan at miara.com (Idan Miara)
Date: Mon, 14 Jan 2019 12:51:28 +0200
Subject: [gdal-dev] Geoserver/gdal: large tif with multiple overviews -
 bug + workaround
In-Reply-To: <CA+nxMTv+25MtQL43wydCsAqDMDoEJs6DPmtnXUPHzFC5fOGp0g@mail.gmail.com>
References: <CAEDrt3_W3r5qZSZERLCKn5Mmjbq0dP_UAbPukuk-ziFoao8p1g@mail.gmail.com>
 <CA+nxMTv+25MtQL43wydCsAqDMDoEJs6DPmtnXUPHzFC5fOGp0g@mail.gmail.com>
Message-ID: <CAEDrt38gY_bsmqDhrdLCpsQUM-7kfDP04nJorsG7rxSP2ByyhQ@mail.gmail.com>

Hi Andrea,

Thanks for very prompt reply and for your suggestions!
I'm wondering if it worth the effort to debug the current gdal-geoserver
plugin.
I remember we talked in FOSS4G about the gdal 2.x support in Geoserver, is
there any progress with that?
I could also reproduce the following bug (
https://osgeo-org.atlassian.net/browse/GEOS-8143) for loading a vrt file
but not for the internal GeoTiff loader.

Kind regards,
Idan

On Mon, 14 Jan 2019 at 12:10, Andrea Aime <andrea.aime at geo-solutions.it>
wrote:

> On Mon, Jan 14, 2019 at 11:01 AM Idan Miara <idan at miara.com> wrote:
>
>> 2. Is it possible to make Geoserver recognize ovr.ovr files?
>>
>
> You can contribute changes to the code and add support for ovr.ovr files
> if you want to, see a guide here:
>
> https://github.com/geoserver/geoserver/wiki/Successfully-requesting-and-integrating-new-features-and-improvements-in-GeoServer
> If you want to code the improvement yourself just ask, I can give you
> pointers to which classes need to be modified.
>
>
>> 3. Can I make geoserver use the gdal plugin for GeoTiff files to avoid
>> the trivial vrt file ?
>>
>
> We'd have the code, but it has been removed years ago as it was source of
> unpredictable issues when deployed:
> https://osgeo-org.atlassian.net/browse/GEOS-7981
>
> Again, if you're interested, you could spend time looking at the actual
> source issue and reinstate the plugin.
>
> Cheers
> Andrea
>
> ==
>
> GeoServer Professional Services from the experts! Visit
> http://goo.gl/it488V for more information. == Ing. Andrea Aime @geowolf
> Technical Lead GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa
> (LU) phone: +39 0584 962313 fax: +39 0584 1660272 mob: +39 339 8844549
> http://www.geo-solutions.it http://twitter.com/geosolutions_it
> ------------------------------------------------------- *Con riferimento
> alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 -
> Regolamento generale sulla protezione dei dati “GDPR”), si precisa che ogni
> circostanza inerente alla presente email (il suo contenuto, gli eventuali
> allegati, etc.) è un dato la cui conoscenza è riservata al/i solo/i
> destinatario/i indicati dallo scrivente. Se il messaggio Le è giunto per
> errore, è tenuta/o a cancellarlo, ogni altra operazione è illecita. Le
> sarei comunque grato se potesse darmene notizia. This email is intended
> only for the person or entity to which it is addressed and may contain
> information that is privileged, confidential or otherwise protected from
> disclosure. We remind that - as provided by European Regulation 2016/679
> “GDPR” - copying, dissemination or use of this e-mail or the information
> herein by anyone other than the intended recipient is prohibited. If you
> have received this email by mistake, please notify us immediately by
> telephone or e-mail.*
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190114/6abc3971/attachment.html>

From even.rouault at spatialys.com  Mon Jan 14 02:54:28 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Jan 2019 11:54:28 +0100
Subject: [gdal-dev] Geoserver/gdal: large tif with multiple overviews -
	bug + workaround
In-Reply-To: <CAEDrt3_W3r5qZSZERLCKn5Mmjbq0dP_UAbPukuk-ziFoao8p1g@mail.gmail.com>
References: <CAEDrt3_W3r5qZSZERLCKn5Mmjbq0dP_UAbPukuk-ziFoao8p1g@mail.gmail.com>
Message-ID: <2554791.xFc6arcUvV@even-i700>

On lundi 14 janvier 2019 12:00:27 CET Idan Miara wrote:
> Hi,
> 
> Due to the following bug:
> https://trac.osgeo.org/gdal/ticket/5067
> When I need to make multiple overviews for a large tiff I use the suggested
> workaround (making tif.ovr, tif.ovr.ovr, tif.ovr.ovr.ovr etc...).
> This workaround works well for applications that use gdal (i.e. QGIS) but
> Geoserver's internal GeoTiff reader ignores the multiple ovr files (I
> assume it reads only the tif+tif.ovr files) thus the performance for this
> map is very bad.
> 
> Workaround I found: I use the gdal-geoserver plugin and then create a
> trivial vrt for the tif and load it in Geoserver with the gdal plugin.
> I needed to make a VRT because as far as I can tell Geoserver doesn't
> register the GeoTiff format with gdal when the plugin is installed but
> still uses the internal GeoTiff reader).
> 
> A few questions:
> 1. Is there a plan to solve that very old gdaladdo bug? (I didn't check
> with recent gdal versions but it still not marked as resolved as in 6 years)

That could be very involved to fix that due to how things work in libtiff.

You can use the workaround suggested in the ticket to create a single file 
from all the .tif, .ovr, .ovr.ovr, etc.

gdal_translate process.tif process_with_ovr.tif -co COPY_SRC_OVERVIEWS YES -co 
COMPRESS=DEFLATE 

That will take some time, but not more than really needed.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrea.aime at geo-solutions.it  Mon Jan 14 02:59:04 2019
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Mon, 14 Jan 2019 11:59:04 +0100
Subject: [gdal-dev] Geoserver/gdal: large tif with multiple overviews -
 bug + workaround
In-Reply-To: <CAEDrt38gY_bsmqDhrdLCpsQUM-7kfDP04nJorsG7rxSP2ByyhQ@mail.gmail.com>
References: <CAEDrt3_W3r5qZSZERLCKn5Mmjbq0dP_UAbPukuk-ziFoao8p1g@mail.gmail.com>
 <CA+nxMTv+25MtQL43wydCsAqDMDoEJs6DPmtnXUPHzFC5fOGp0g@mail.gmail.com>
 <CAEDrt38gY_bsmqDhrdLCpsQUM-7kfDP04nJorsG7rxSP2ByyhQ@mail.gmail.com>
Message-ID: <CA+nxMTsSEfH+-eXCck6Ah1UAGd9-oWZYBORO-gNDGpY7tLaA1A@mail.gmail.com>

On Mon, Jan 14, 2019 at 11:52 AM Idan Miara <idan at miara.com> wrote:

> Hi Andrea,
>
> Thanks for very prompt reply and for your suggestions!
> I'm wondering if it worth the effort to debug the current gdal-geoserver
> plugin.
> I remember we talked in FOSS4G about the gdal 2.x support in Geoserver, is
> there any progress with that?
>

Not at the moment, no one has been sponsoring that work.


> I could also reproduce the following bug (
> https://osgeo-org.atlassian.net/browse/GEOS-8143) for loading a vrt file
> but not for the internal GeoTiff loader.
>

Sorry to hear that. Anyone is free to provide a fix or sponsor one.

As Paul Ramsey said (if memory serves me well) "in open source one gets
what everybody else is paying for". Current sponsored activity does not
seem to match your needs, sorry :-)

Cheers
Andrea

==

GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information. == Ing. Andrea Aime @geowolf Technical Lead
GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa (LU) phone: +39
0584 962313 fax: +39 0584 1660272 mob: +39 339 8844549
http://www.geo-solutions.it http://twitter.com/geosolutions_it
------------------------------------------------------- *Con riferimento
alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 -
Regolamento generale sulla protezione dei dati “GDPR”), si precisa che ogni
circostanza inerente alla presente email (il suo contenuto, gli eventuali
allegati, etc.) è un dato la cui conoscenza è riservata al/i solo/i
destinatario/i indicati dallo scrivente. Se il messaggio Le è giunto per
errore, è tenuta/o a cancellarlo, ogni altra operazione è illecita. Le
sarei comunque grato se potesse darmene notizia. This email is intended
only for the person or entity to which it is addressed and may contain
information that is privileged, confidential or otherwise protected from
disclosure. We remind that - as provided by European Regulation 2016/679
“GDPR” - copying, dissemination or use of this e-mail or the information
herein by anyone other than the intended recipient is prohibited. If you
have received this email by mistake, please notify us immediately by
telephone or e-mail.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190114/c8d4cf77/attachment.html>

From kostia.shpuryk at gmail.com  Mon Jan 14 03:02:40 2019
From: kostia.shpuryk at gmail.com (kshpuryk)
Date: Mon, 14 Jan 2019 04:02:40 -0700 (MST)
Subject: [gdal-dev] How to correctly initialize GDAL library in a
 multithreaded environment?
Message-ID: <1547463760662-0.post@n6.nabble.com>

Hi,

I have a multithreaded application that uses GDAL. Generally it works fine,
but sometimes I have a hang when trying to create transformations from
different threads. 

Seems like race condition occures when initializing static CPLMutex
*hConfigMutex located in gdal\port\cpl_conv.cpp file;

I was able to fix the issue by calling a function that initializes the mutex
before calls from different threads(just calling the following code:
CPLGetConfigOption("GDAL_DATA", nullptr);) but it doesn't feel right.

So, my question is: What is the correct way to initialize GDAL library in
multithreaded environment?(if such exists). If there are no such
possibility, maybe some function INITGDAL() can be added that will do the
magic?

Best regards,
KS.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Mon Jan 14 03:16:25 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Jan 2019 12:16:25 +0100
Subject: [gdal-dev] How to correctly initialize GDAL library in a
	multithreaded environment?
In-Reply-To: <1547463760662-0.post@n6.nabble.com>
References: <1547463760662-0.post@n6.nabble.com>
Message-ID: <6005148.2nzBbNP0do@even-i700>

Hi,

> 
> I have a multithreaded application that uses GDAL. Generally it works fine,
> but sometimes I have a hang when trying to create transformations from
> different threads.
> 
> Seems like race condition occures when initializing static CPLMutex
> *hConfigMutex located in gdal\port\cpl_conv.cpp file;

On which operating system and with which GDAL version ?
With recent enough GDAL versions, and on Linux/Unix, I believe that mutex 
creation should now be thread-safe. But there might still be issues on 
Windows. We should be able to fix that more easily with C++11 mutex now.

Please file a ticket about that on
https://github.com/OSGeo/gdal/issues with the above requested details.

> 
> I was able to fix the issue by calling a function that initializes the mutex
> before calls from different threads(just calling the following code:
> CPLGetConfigOption("GDAL_DATA", nullptr);) but it doesn't feel right.

Calling a function like GDALRegisterAll() that involves mutex creation before 
creating any thread has been the historical recommandation

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Jan 14 03:42:08 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Jan 2019 12:42:08 +0100
Subject: [gdal-dev] RFC 73 (aka gdalsrsbarn) available for review
In-Reply-To: <11662317.BXslRNNhNX@even-i700>
References: <11662317.BXslRNNhNX@even-i700>
Message-ID: <2571377.ue8MHfebd5@even-i700>

On mercredi 9 janvier 2019 16:23:44 CET Even Rouault wrote:
> Hi,
> 
> RFC 73 "Integration of PROJ6 for WKT2, late binding capabilities,
> time-support and unified CRS database" is available for your review at:
> 
> https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn
> 

No remarks ? Do people need a bit more time to review ?

Actually I have a question on which I'd like to get some feedback. In the 
current state of the work, gdalinfo and ogrinfo will display the SRS in WKT1 
when possible (consequence of "OGRSpatialReference::exportToWkt() without 
options will report WKT 1 for CRS compatibles of this representation, and 
otherwise use WKT 2:2015 (typically for Geographic 3D CRS)" mentionned in 
"Default WKT version").
I was wondering if we couldn't default to WKT2:2015 in all cases for those 
utilities. One small benefit of this is that for SRS built from EPSG code, the 
WKT would include the area of use, which makes it easier to locate things., 
like

PROJCRS["RT38 5 gon O",
    BASEGEODCRS["RT38",
        DATUM["Stockholm 1938",
            ELLIPSOID["Bessel 1841",6377397.155,299.1528128,
                LENGTHUNIT["metre",1]]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["degree",0.0174532925199433]]],
    CONVERSION["Sweden zone 5 gon O",
        METHOD["Transverse Mercator",
            ID["EPSG",9807]],
        PARAMETER["Latitude of natural origin",0,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8801]],
        PARAMETER["Longitude of natural origin",22.5582777777778,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8802]],
        PARAMETER["Scale factor at natural origin",1,
            SCALEUNIT["unity",1],
            ID["EPSG",8805]],
        PARAMETER["False easting",1500000,
            LENGTHUNIT["metre",1],
            ID["EPSG",8806]],
        PARAMETER["False northing",0,
            LENGTHUNIT["metre",1],
            ID["EPSG",8807]]],
    CS[Cartesian,2],
        AXIS["northing (X)",north,
            ORDER[1],
            LENGTHUNIT["metre",1]],
        AXIS["easting (Y)",east,
            ORDER[2],
            LENGTHUNIT["metre",1]],
    AREA["Sweden - 5 gon E"],
    BBOX[65.24,21.34,68.58,24.17],
    ID["EPSG",3030]]
	
Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kostia.shpuryk at gmail.com  Mon Jan 14 03:57:45 2019
From: kostia.shpuryk at gmail.com (=?UTF-8?B?0JrQvtC90YHRgtCw0L3RgtC40L0g0KjQv9GD0YDQuNC6?=)
Date: Mon, 14 Jan 2019 13:57:45 +0200
Subject: [gdal-dev] How to correctly initialize GDAL library in a
 multithreaded environment?
In-Reply-To: <6005148.2nzBbNP0do@even-i700>
References: <1547463760662-0.post@n6.nabble.com> <6005148.2nzBbNP0do@even-i700>
Message-ID: <CAKUxv=Uu8EW_53shBowXwtJORf+JcgfXjb1i_rp+8ujs1t3Z1g@mail.gmail.com>

Thank you for the quick answer!

The version of GDAL is 2.2.3 and OS is Windows.

I'm using not the latest version, but I've checked the latest code and it
seems like it will still reproduce for Windows for 2.5.0.

Yeah, I've found the ticket, so I'll wait until fixed and will try to
update to latest version.

Thanks,
KS.

On Mon, Jan 14, 2019 at 1:16 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> >
> > I have a multithreaded application that uses GDAL. Generally it works
> fine,
> > but sometimes I have a hang when trying to create transformations from
> > different threads.
> >
> > Seems like race condition occures when initializing static CPLMutex
> > *hConfigMutex located in gdal\port\cpl_conv.cpp file;
>
> On which operating system and with which GDAL version ?
> With recent enough GDAL versions, and on Linux/Unix, I believe that mutex
> creation should now be thread-safe. But there might still be issues on
> Windows. We should be able to fix that more easily with C++11 mutex now.
>
> Please file a ticket about that on
> https://github.com/OSGeo/gdal/issues with the above requested details.
>
> >
> > I was able to fix the issue by calling a function that initializes the
> mutex
> > before calls from different threads(just calling the following code:
> > CPLGetConfigOption("GDAL_DATA", nullptr);) but it doesn't feel right.
>
> Calling a function like GDALRegisterAll() that involves mutex creation
> before
> creating any thread has been the historical recommandation
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190114/9907e922/attachment.html>

From even.rouault at spatialys.com  Mon Jan 14 04:04:49 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Jan 2019 13:04:49 +0100
Subject: [gdal-dev] How to correctly initialize GDAL library in a
	multithreaded environment?
In-Reply-To: <CAKUxv=Uu8EW_53shBowXwtJORf+JcgfXjb1i_rp+8ujs1t3Z1g@mail.gmail.com>
References: <1547463760662-0.post@n6.nabble.com> <6005148.2nzBbNP0do@even-i700>
 <CAKUxv=Uu8EW_53shBowXwtJORf+JcgfXjb1i_rp+8ujs1t3Z1g@mail.gmail.com>
Message-ID: <2550687.ITjX7vbcJI@even-i700>

On lundi 14 janvier 2019 13:57:45 CET Константин Шпурик wrote:
> Thank you for the quick answer!
> 
> The version of GDAL is 2.2.3 and OS is Windows.
> 
> I'm using not the latest version, but I've checked the latest code and it
> seems like it will still reproduce for Windows for 2.5.0.
> 
> Yeah, I've found the ticket,

which one ?

> so I'll wait until fixed and will try to
> update to latest version.
> 
> Thanks,
> KS.
> 
> On Mon, Jan 14, 2019 at 1:16 PM Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Hi,
> > 
> > > I have a multithreaded application that uses GDAL. Generally it works
> > 
> > fine,
> > 
> > > but sometimes I have a hang when trying to create transformations from
> > > different threads.
> > > 
> > > Seems like race condition occures when initializing static CPLMutex
> > > *hConfigMutex located in gdal\port\cpl_conv.cpp file;
> > 
> > On which operating system and with which GDAL version ?
> > With recent enough GDAL versions, and on Linux/Unix, I believe that mutex
> > creation should now be thread-safe. But there might still be issues on
> > Windows. We should be able to fix that more easily with C++11 mutex now.
> > 
> > Please file a ticket about that on
> > https://github.com/OSGeo/gdal/issues with the above requested details.
> > 
> > > I was able to fix the issue by calling a function that initializes the
> > 
> > mutex
> > 
> > > before calls from different threads(just calling the following code:
> > > CPLGetConfigOption("GDAL_DATA", nullptr);) but it doesn't feel right.
> > 
> > Calling a function like GDALRegisterAll() that involves mutex creation
> > before
> > creating any thread has been the historical recommandation
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kostia.shpuryk at gmail.com  Mon Jan 14 04:13:14 2019
From: kostia.shpuryk at gmail.com (=?UTF-8?B?0JrQvtC90YHRgtCw0L3RgtC40L0g0KjQv9GD0YDQuNC6?=)
Date: Mon, 14 Jan 2019 14:13:14 +0200
Subject: [gdal-dev] How to correctly initialize GDAL library in a
 multithreaded environment?
In-Reply-To: <2550687.ITjX7vbcJI@even-i700>
References: <1547463760662-0.post@n6.nabble.com> <6005148.2nzBbNP0do@even-i700>
 <CAKUxv=Uu8EW_53shBowXwtJORf+JcgfXjb1i_rp+8ujs1t3Z1g@mail.gmail.com>
 <2550687.ITjX7vbcJI@even-i700>
Message-ID: <CAKUxv=VdgqkaXZNA-ixWgSyi3SstUc=M6Pd2i9i4kDbxgmmv4w@mail.gmail.com>

Oops, I've misread the mail, I thought it is already posted.(was confused
with this one.. https://github.com/OSGeo/gdal/issues/1108)

Yeah, I'll create the ticket with details.

Regards,
KS.


On Mon, Jan 14, 2019 at 2:04 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> On lundi 14 janvier 2019 13:57:45 CET Константин Шпурик wrote:
> > Thank you for the quick answer!
> >
> > The version of GDAL is 2.2.3 and OS is Windows.
> >
> > I'm using not the latest version, but I've checked the latest code and it
> > seems like it will still reproduce for Windows for 2.5.0.
> >
> > Yeah, I've found the ticket,
>
> which one ?
>
> > so I'll wait until fixed and will try to
> > update to latest version.
> >
> > Thanks,
> > KS.
> >
> > On Mon, Jan 14, 2019 at 1:16 PM Even Rouault <even.rouault at spatialys.com
> >
> >
> > wrote:
> > > Hi,
> > >
> > > > I have a multithreaded application that uses GDAL. Generally it works
> > >
> > > fine,
> > >
> > > > but sometimes I have a hang when trying to create transformations
> from
> > > > different threads.
> > > >
> > > > Seems like race condition occures when initializing static CPLMutex
> > > > *hConfigMutex located in gdal\port\cpl_conv.cpp file;
> > >
> > > On which operating system and with which GDAL version ?
> > > With recent enough GDAL versions, and on Linux/Unix, I believe that
> mutex
> > > creation should now be thread-safe. But there might still be issues on
> > > Windows. We should be able to fix that more easily with C++11 mutex
> now.
> > >
> > > Please file a ticket about that on
> > > https://github.com/OSGeo/gdal/issues with the above requested details.
> > >
> > > > I was able to fix the issue by calling a function that initializes
> the
> > >
> > > mutex
> > >
> > > > before calls from different threads(just calling the following code:
> > > > CPLGetConfigOption("GDAL_DATA", nullptr);) but it doesn't feel right.
> > >
> > > Calling a function like GDALRegisterAll() that involves mutex creation
> > > before
> > > creating any thread has been the historical recommandation
> > >
> > > Even
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190114/bb699dc2/attachment-0001.html>

From astewart at terragotech.com  Mon Jan 14 12:25:42 2019
From: astewart at terragotech.com (Alan Stewart)
Date: Mon, 14 Jan 2019 20:25:42 +0000
Subject: [gdal-dev] osx compile failure
In-Reply-To: <3793614.o0MncPkXNM@even-i700>
References: <BY2PR15MB0856948C0990E293382E9FDCC4BD0@BY2PR15MB0856.namprd15.prod.outlook.com>
 <19583406.D6Ig70h1ma@even-i700>
 <BN3PR15MB0850EF6F4CA6F50A48B85DF5C48D0@BN3PR15MB0850.namprd15.prod.outlook.com>
 <3793614.o0MncPkXNM@even-i700>
Message-ID: <BN3PR15MB0850DCCAA3B97AE9360D13B6C4800@BN3PR15MB0850.namprd15.prod.outlook.com>

Apparently the problems I was having with setdevenv.sh where caused by something trashed in my environment? After being gone for a few das now sourcing the script reports seems to operate normally.

Yes, libgdal.dylib is in the gdal/.libs path, and this path is in DYLD_LIBRARY_PATH. I'm running gdal/ci/travis/osx/script.sh from another script that sources gdal/scripts/setdevenv.sh first. I'm still seeing the same error.

Output snippet:

Sourcing setdevenv.sh...

Setting PATH=/Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/gdal/apps:/Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/gdal/apps/.libs:/Users/astewart/.rvm/gems/ruby-2.5.3/bin:/Users/astewart/.rvm/gems/ruby-2.5.3 at global/bin:/Users/astewart/.rvm/rubies/ruby-2.5.3/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/Applications/VMware Fusion.app/Contents/Public:/Users/astewart/.rvm/bin
Setting DYLD_LIBRARY_PATH=/Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/gdal:/Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/gdal/.libs:
Setting GDAL_DATA=/Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/gdal/data
Setting PYTHONPATH=/Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/gdal/swig/python/build/lib.macosx-10.12-x86_64-2.7:

Testing _gdal.so and libgdal.dylib for presence of CPLErrorSetState is successful.

Is there something besides DYLD_LIBRARY_PATH that needs to be set? Adding gdal/.libs to PATH did not good.

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615
 
www.terragotech.com

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com> 
Sent: Thursday, January 03, 2019 4:40 PM
To: Alan Stewart <astewart at terragotech.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] osx compile failure

On jeudi 3 janvier 2019 21:17:26 CET Alan Stewart wrote:
> Even,
> 
> I've been working on this. There were a lot of small source changes 
> across a number of formats, not just plscenes, plus some 
> system-specific details in the scripts, to be resolved. I have a 
> successful build now, but running the ci/travis/osx/script.sh results in:
> 
> ImportError while loading conftest
> '/Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/autotes
> t/con ftest.py'. /usr/local/lib/python2.7/site-packages/six.py:709: in 
> exec_
>     exec("""exec _code_ in _globs_, _locs_""")
> conftest.py:9: in <module>
>     from osgeo import gdal
> ../gdal/swig/python/build/lib.macosx-10.12-x86_64-2.7/osgeo/__init__.py:21:
> in <module> _gdal = swig_import_helper()
> ../gdal/swig/python/build/lib.macosx-10.12-x86_64-2.7/osgeo/__init__.py:17:
> in swig_import_helper _mod = imp.load_module('_gdal', fp, pathname,
> description)
> E   ImportError:
> dlopen(/Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/g
> dal/s wig/python/build/lib.macosx-10.12-x86_64-2.7/osgeo/_gdal.so, 2): 
> Symbol not
> found: _CPLErrorSetState E     Referenced from:
> /Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/gdal/swig/pyt
> hon/build/lib.macosx-10.12-x86_64-2.7/osgeo/_gdal.so E     Expected in: flat
> namespace
> E    in
> /Users/astewart/Documents/GitHub/alanstewart-terragotech/gdal/gdal/swi
> g/pyt hon/build/lib.macosx-10.12-x86_64-2.7/osgeo/_gdal.so
> 
> Any thoughts on why CPLErrorSetState would be missing?

I presume that this is because libgdal.dylib is not found.
Did you source "scripts/setdevenv.sh" that should set up the appropriate environment variables ? In that particular case DYLD_LIBRARY_PATH to point to libgdal.dylib

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com

From even.rouault at spatialys.com  Mon Jan 14 12:38:00 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Jan 2019 21:38:00 +0100
Subject: [gdal-dev] osx compile failure
In-Reply-To: <BN3PR15MB0850DCCAA3B97AE9360D13B6C4800@BN3PR15MB0850.namprd15.prod.outlook.com>
References: <BY2PR15MB0856948C0990E293382E9FDCC4BD0@BY2PR15MB0856.namprd15.prod.outlook.com>
 <3793614.o0MncPkXNM@even-i700>
 <BN3PR15MB0850DCCAA3B97AE9360D13B6C4800@BN3PR15MB0850.namprd15.prod.outlook.com>
Message-ID: <1815270.rbet226iYG@even-i700>

On lundi 14 janvier 2019 20:25:42 CET Alan Stewart wrote:
> DYLD_LIBRARY_PATH

Maybe an effect of the SIP thing you'd need to disable ?
https://developer.apple.com/library/archive/documentation/Security/Conceptual/System_Integrity_Protection_Guide/RuntimeProtections/RuntimeProtections.html

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From shawn.gong at mdacorporation.com  Mon Jan 14 14:04:02 2019
From: shawn.gong at mdacorporation.com (Gong, Shawn)
Date: Mon, 14 Jan 2019 22:04:02 +0000
Subject: [gdal-dev] Sentinel-1 mosaiced SLC
Message-ID: <7DCBC135929FF74E8A5488B1814AC6BC5434CAC6@exbermd02.ds.mda.ca>

hi list,

Does GDAL support Sentinel-1 mosaiced SLC images?

It seems to only show one (VH+VV) of the three mosaiced images.

S1B_IW_SLC__###.SAFE\measurement\ has 6 images:
s1b-iw1-slc-vh-2018###.tif
s1b-iw1-slc-vv-2018###.tif
s1b-iw2-slc-vh-2018###.tif
s1b-iw2-slc-vv-2018###.tif
s1b-iw3-slc-vh-2018###.tif
s1b-iw3-slc-vv-2018###.tif

GDAL does display mosaiced Sentinel-1 GRD (detected) images.


Thanks,
Shawn

This electronic correspondence, including any attachments, is intended solely for the use of the intended recipient(s) and may contain legally privileged, proprietary and/or confidential information. If you are not the intended recipient, please immediately notify the sender by reply e-mail and permanently delete all copies of this electronic correspondence and associated attachments. Any use, disclosure, dissemination, distribution or copying of this electronic correspondence and any attachments for any purposes that have not been specifically authorized by the sender is strictly prohibited.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190114/fc7146c2/attachment.html>

From andrew.bell.ia at gmail.com  Tue Jan 15 08:31:14 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 15 Jan 2019 11:31:14 -0500
Subject: [gdal-dev] OGRFormatDouble
Message-ID: <CACJ51z2rEaFSxb1x891kQHirm=yxA7wzMswkGqHz7YYkZsBzyw@mail.gmail.com>

Hi,

I'm looking at OGRFormatDouble and trying to understand why it exists, as
such.  It seems to impose its own formatting for double-precision values
that is different from what is standardized in the C/C++ languages.  Other
than imposing consistency where there is variability in the standards
(string representation of infinity, for example), I'm wondering if there is
any specific issue that the code is trying to address.

I don't like changing existing behavior, but in this case, conforming to
existing standards seems to provide more clarity to users, provided that
the OGR-specific formatting doesn't serve a purpose other than satisfying
the desires of a previous developer or working around non-standard
implementations that no longer exist.

Any thoughts appreciated,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190115/b9fb30a2/attachment.html>

From maxime.riche.insa at gmail.com  Tue Jan 15 08:49:53 2019
From: maxime.riche.insa at gmail.com (=?UTF-8?Q?Maxime_Rich=C3=A9?=)
Date: Tue, 15 Jan 2019 09:49:53 -0700 (MST)
Subject: [gdal-dev] gdalwarp doesn't use the VSIL curl cache ?
Message-ID: <1547570993930-0.post@n6.nabble.com>

I am developing a tile server for COGTiff.
When I open a dataset, the COGTiff metadata are cached in the curl cache.
The beginning of the file is only downloaded when the first tile is served
(using the same tiff). This is as I was expecting.

But when I serve several time the same tile (only this one), I can see that
the pixels are downloaded every time (the metadata are cached). The pixels
are not cached by the VSIL curl cache. These pixels are retrieved with
gdalwarp (using a new dataset everytime).
Is that the expected behavior? Is there a way to cache the pixels (selected
by gdalwarp) ?

(
It is not a size problem:; 
        - name: VSI_CACHE_SIZE
          value: "268435456"
        - name: VSI_CACHE
          value: "TRUE"
        - name: CPL_VSIL_CURL_CACHE_SIZE
          value: "268435456"
)

Thanks for the clarifications !

Maxime





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Tue Jan 15 09:01:56 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Jan 2019 18:01:56 +0100
Subject: [gdal-dev] gdalwarp doesn't use the VSIL curl cache ?
In-Reply-To: <1547570993930-0.post@n6.nabble.com>
References: <1547570993930-0.post@n6.nabble.com>
Message-ID: <2219497.Uxk6T820Kl@even-i700>

On mardi 15 janvier 2019 09:49:53 CET Maxime Riché wrote:
> I am developing a tile server for COGTiff.
> When I open a dataset, the COGTiff metadata are cached in the curl cache.
> The beginning of the file is only downloaded when the first tile is served
> (using the same tiff). This is as I was expecting.
> 
> But when I serve several time the same tile (only this one), I can see that
> the pixels are downloaded every time (the metadata are cached). The pixels
> are not cached by the VSIL curl cache. These pixels are retrieved with
> gdalwarp (using a new dataset everytime).
> Is that the expected behavior? Is there a way to cache the pixels (selected
> by gdalwarp) ?
> 
> (
> It is not a size problem:;
>         - name: VSI_CACHE_SIZE
>           value: "268435456"
>         - name: VSI_CACHE
>           value: "TRUE"
>         - name: CPL_VSIL_CURL_CACHE_SIZE
>           value: "268435456"
> )
> 
> Thanks for the clarifications !

That's a particular effect of using /vsicurl/ (or similar network filesystems) 
with the GeoTIFF driver that does a parallel multi-range request. In that 
mode, it bypasses the vsicurl cache since it uses the exact range requests, 
and doesn't round them on multiple of the 16 KB chunk size. That could 
potentially be improved

Two possible workarounds:
- do not close the dataset if you intend to read it several times. The GDAL 
block cache will then be used and will avoid going down to the /vsicurl I/O 
layer. That was the use case for which this multirange parallelized was 
originally developed
- or define the GDAL_HTTP_MULTIRANGE=SERIAL configuration option that will 
decompose the multirange request in a series of single range request and use 
the vsicurl caching.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com


From even.rouault at spatialys.com  Tue Jan 15 09:15:35 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Jan 2019 18:15:35 +0100
Subject: [gdal-dev] OGRFormatDouble
In-Reply-To: <CACJ51z2rEaFSxb1x891kQHirm=yxA7wzMswkGqHz7YYkZsBzyw@mail.gmail.com>
References: <CACJ51z2rEaFSxb1x891kQHirm=yxA7wzMswkGqHz7YYkZsBzyw@mail.gmail.com>
Message-ID: <17008637.qIlfyyrrLU@even-i700>

On mardi 15 janvier 2019 11:31:14 CET Andrew Bell wrote:
> Hi,
> 
> I'm looking at OGRFormatDouble and trying to understand why it exists, as
> such.  It seems to impose its own formatting for double-precision values
> that is different from what is standardized in the C/C++ languages.  Other
> than imposing consistency where there is variability in the standards
> (string representation of infinity, for example), I'm wondering if there is
> any specific issue that the code is trying to address.

Probably users complaining about non-significant decimals that uselessly 
increase the size of the WKT (1.23999999999 instead of 1.24). I agree the 
current implementation is a set of heuristics, not necessarily working in 
every situation.

Digging into history, I see the first implementation of such ad-hoc rounding 
was per bcb5d113ff0d856d0859ef4b9b992a0d8cab08b5 in 2005 without more detail 
about the use case in the commit mssage.
I then enhanced this per b756ec600bc5474d0a99912069e6eab2ba35752a in 2010. 
Unfortunately I didn't provide more context either.

> 
> I don't like changing existing behavior, but in this case, conforming to
> existing standards seems to provide more clarity to users, provided that
> the OGR-specific formatting doesn't serve a purpose other than satisfying
> the desires of a previous developer or working around non-standard
> implementations that no longer exist.

Probably that in the case where the user defines explicitly the desired 
precision, you could disable this. Or, have an option to control if this is 
ad-hoc extra rounding should be done. I see I introduced per 
fae7de26911594333001b62669e50ef4088caeb2 a configuration option for that 
purpose to fix https://trac.osgeo.org/gdal/ticket/7188

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From astewart at terragotech.com  Tue Jan 15 11:00:18 2019
From: astewart at terragotech.com (Alan Stewart)
Date: Tue, 15 Jan 2019 19:00:18 +0000
Subject: [gdal-dev] osx compile failure
In-Reply-To: <1815270.rbet226iYG@even-i700>
References: <BY2PR15MB0856948C0990E293382E9FDCC4BD0@BY2PR15MB0856.namprd15.prod.outlook.com>
 <3793614.o0MncPkXNM@even-i700>
 <BN3PR15MB0850DCCAA3B97AE9360D13B6C4800@BN3PR15MB0850.namprd15.prod.outlook.com>
 <1815270.rbet226iYG@even-i700>
Message-ID: <BY2PR15MB0856E41F3337F7A675D70142C4810@BY2PR15MB0856.namprd15.prod.outlook.com>

Disabling SIP makes no difference.

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615
 
www.terragotech.com

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com> 
Sent: Monday, January 14, 2019 3:38 PM
To: Alan Stewart <astewart at terragotech.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] osx compile failure

On lundi 14 janvier 2019 20:25:42 CET Alan Stewart wrote:
> DYLD_LIBRARY_PATH

Maybe an effect of the SIP thing you'd need to disable ?
https://developer.apple.com/library/archive/documentation/Security/Conceptual/System_Integrity_Protection_Guide/RuntimeProtections/RuntimeProtections.html

--
Spatialys - Geospatial professional services http://www.spatialys.com

From shawn.gong at mdacorporation.com  Tue Jan 15 11:49:54 2019
From: shawn.gong at mdacorporation.com (Gong, Shawn)
Date: Tue, 15 Jan 2019 19:49:54 +0000
Subject: [gdal-dev] Sentinel-1 mosaiced SLC
In-Reply-To: <7DCBC135929FF74E8A5488B1814AC6BC5434CAC6@exbermd02.ds.mda.ca>
References: <7DCBC135929FF74E8A5488B1814AC6BC5434CAC6@exbermd02.ds.mda.ca>
Message-ID: <7DCBC135929FF74E8A5488B1814AC6BC5434CB55@exbermd02.ds.mda.ca>

The Interferometric Wide (IW) swath mode:
https://sentinel.esa.int/web/sentinel/user-guides/sentinel-1-sar/acquisition-modes/interferometric-wide-swathhttps://sentinel.esa.int/web/sentinel/user-guides/sentinel-1-sar/acquisition-modes/interferometric-wide-swath

Only one of three sub-swaths is shown for SLC.
Does anyone knows why? Is this mode supported by GDAL?

Thanks,
Shawn
________________________________
From: gdal-dev [gdal-dev-bounces at lists.osgeo.org] on behalf of Gong, Shawn [shawn.gong at mdacorporation.com]
Sent: January-14-19 5:04 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Sentinel-1 mosaiced SLC

hi list,

Does GDAL support Sentinel-1 mosaiced SLC images?

It seems to only show one (VH+VV) of the three mosaiced images.

S1B_IW_SLC__###.SAFE\measurement\ has 6 images:
s1b-iw1-slc-vh-2018###.tif
s1b-iw1-slc-vv-2018###.tif
s1b-iw2-slc-vh-2018###.tif
s1b-iw2-slc-vv-2018###.tif
s1b-iw3-slc-vh-2018###.tif
s1b-iw3-slc-vv-2018###.tif

GDAL does display mosaiced Sentinel-1 GRD (detected) images.


Thanks,
Shawn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190115/49e3092c/attachment.html>

From shawn.gong at mdacorporation.com  Tue Jan 15 11:57:34 2019
From: shawn.gong at mdacorporation.com (Gong, Shawn)
Date: Tue, 15 Jan 2019 19:57:34 +0000
Subject: [gdal-dev] GDAL2 Python ds.GetDescription() is empty
Message-ID: <7DCBC135929FF74E8A5488B1814AC6BC5434CB64@exbermd02.ds.mda.ca>

Hi list,

I am using Python 2.7
In my work, results are displayed like this:
imageData =
output_ds = gdal_array.OpenArray(imageData)
output_ds.GetDescription()
RasterLayer(ds=output_ds)

in GDAL1.9, output_ds.GetDescription() = 'NUMPY:::027D64D0'
I use that unique name to instantiate a raster layer.
But in GDAL2, output_ds.GetDescription() = ''  # an empty str
Why is that?

Thanks,
Shawn

This electronic correspondence, including any attachments, is intended solely for the use of the intended recipient(s) and may contain legally privileged, proprietary and/or confidential information. If you are not the intended recipient, please immediately notify the sender by reply e-mail and permanently delete all copies of this electronic correspondence and associated attachments. Any use, disclosure, dissemination, distribution or copying of this electronic correspondence and any attachments for any purposes that have not been specifically authorized by the sender is strictly prohibited.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190115/a1f41b68/attachment.html>

From even.rouault at spatialys.com  Tue Jan 15 12:18:25 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Jan 2019 21:18:25 +0100
Subject: [gdal-dev] GDAL2 Python ds.GetDescription() is empty
In-Reply-To: <7DCBC135929FF74E8A5488B1814AC6BC5434CB64@exbermd02.ds.mda.ca>
References: <7DCBC135929FF74E8A5488B1814AC6BC5434CB64@exbermd02.ds.mda.ca>
Message-ID: <4962549.zBQRmVrTl9@even-i700>

Shawn,

> 
> I am using Python 2.7
> In my work, results are displayed like this:
> imageData =
> output_ds = gdal_array.OpenArray(imageData)
> output_ds.GetDescription()
> RasterLayer(ds=output_ds)
> 
> in GDAL1.9, output_ds.GetDescription() = 'NUMPY:::027D64D0'
> I use that unique name to instantiate a raster layer.
> But in GDAL2, output_ds.GetDescription() = ''  # an empty str
> Why is that?

For security reasons. Opening NUMPY:::random_address could crash GDAL

So unless you define GDAL_ARRAY_OPEN_BY_FILENAME=YES as configuration option/
env variable, gdal.Open('NUMPY:::xxxx') won't work anymore.
SetDescription() is indeed no longer set, not sure if I really intended it 
(kind of makes sense, if gdal.Open() doesn't work on it anymore by default). 
Anyway, you can get the connection string with 
gdal_array.GetArrayFilename(imageData).

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrew.bell.ia at gmail.com  Tue Jan 15 14:17:43 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 15 Jan 2019 17:17:43 -0500
Subject: [gdal-dev] Make Issue
Message-ID: <CACJ51z2WzVQNSrLzLLWO_--gm+j6xze6=Nurpi5TirAvAVSZvw@mail.gmail.com>

I'm not terribly familiar with the GDAL build system and I'm having some
issues getting a proper rebuild to occur when a header file is changed in
OGR.  Are dependencies automatically generated or might something manual be
missing?

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190115/829f32ae/attachment.html>

From even.rouault at spatialys.com  Tue Jan 15 14:31:44 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Jan 2019 23:31:44 +0100
Subject: [gdal-dev] Make Issue
In-Reply-To: <CACJ51z2WzVQNSrLzLLWO_--gm+j6xze6=Nurpi5TirAvAVSZvw@mail.gmail.com>
References: <CACJ51z2WzVQNSrLzLLWO_--gm+j6xze6=Nurpi5TirAvAVSZvw@mail.gmail.com>
Message-ID: <11381695.XQbpx67REV@even-i700>

On mardi 15 janvier 2019 17:17:43 CET Andrew Bell wrote:
> I'm not terribly familiar with the GDAL build system and I'm having some
> issues getting a proper rebuild to occur when a header file is changed in
> OGR.  Are dependencies automatically generated or might something manual be
> missing?
> 

No, there is no proper dependency management due to being manual makefiles. In 
case you change prototypes of existing classes / functions / methods, a full 
(or partial if you master the impacts) rebuild "make clean && make" is needed.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From shawn.gong at mdacorporation.com  Tue Jan 15 18:02:43 2019
From: shawn.gong at mdacorporation.com (Gong, Shawn)
Date: Wed, 16 Jan 2019 02:02:43 +0000
Subject: [gdal-dev] GDAL2 Python ds.GetDescription() is empty
In-Reply-To: <4962549.zBQRmVrTl9@even-i700>
References: <7DCBC135929FF74E8A5488B1814AC6BC5434CB64@exbermd02.ds.mda.ca>,
 <4962549.zBQRmVrTl9@even-i700>
Message-ID: <7DCBC135929FF74E8A5488B1814AC6BC5434CB96@exbermd02.ds.mda.ca>

Hi Even,

Yes, 
GDAL_ARRAY_OPEN_BY_FILENAME=YES as configuration option/env variable has made gdal.Open('NUMPY:::xxxx') working for me.
I need this option as many codes were written to display imageData, while not saving imageData on disk.

I am going to do:
output_ds = gdal.Open(gdal_array.GetArrayFilename(imageData))
gdal_array.CopyDatasetInfo(org_dataset, output_ds, offsetX, offsetY)

Thank you!
Shawn

________________________________________
From: Even Rouault [even.rouault at spatialys.com]
Sent: January-15-19 3:18 PM
To: gdal-dev at lists.osgeo.org
Cc: Gong, Shawn
Subject: Re: [gdal-dev] GDAL2 Python ds.GetDescription() is empty

Shawn,

>
> I am using Python 2.7
> In my work, results are displayed like this:
> imageData =
> output_ds = gdal_array.OpenArray(imageData)
> output_ds.GetDescription()
> RasterLayer(ds=output_ds)
>
> in GDAL1.9, output_ds.GetDescription() = 'NUMPY:::027D64D0'
> I use that unique name to instantiate a raster layer.
> But in GDAL2, output_ds.GetDescription() = ''  # an empty str
> Why is that?

For security reasons. Opening NUMPY:::random_address could crash GDAL

So unless you define GDAL_ARRAY_OPEN_BY_FILENAME=YES as configuration option/
env variable, gdal.Open('NUMPY:::xxxx') won't work anymore.
SetDescription() is indeed no longer set, not sure if I really intended it
(kind of makes sense, if gdal.Open() doesn't work on it anymore by default).
Anyway, you can get the connection string with
gdal_array.GetArrayFilename(imageData).

Even


--
Spatialys - Geospatial professional services
http://www.spatialys.com

From David.Bekaert at jpl.nasa.gov  Tue Jan 15 20:24:24 2019
From: David.Bekaert at jpl.nasa.gov (Bekaert, David (334H))
Date: Wed, 16 Jan 2019 04:24:24 +0000
Subject: [gdal-dev] vector representation in netcdf 4
In-Reply-To: <1674637.fSEpH9tVmv@even-i700>
References: <64B7D3B8-7159-4410-B155-939C9FA3BDC5@jpl.nasa.gov>
 <1674637.fSEpH9tVmv@even-i700>
Message-ID: <146CB86B-CCBB-4050-8521-A48F2FCB3E0E@jpl.nasa.gov>

Hi GDAL developers, Even,

Thanks for sharing the updated sample product with srs info included.

I was able to mimic you polygon formatting in the attached TEST.nc file.
Unfortunately I was not able to get the srs info captured in my shape file when applying ogr2ogr.
I am using the same crs I used successful used for 2D rasters in nc4 (longitude latitude).
When I turn the debug mode on it states it looks for a geoTransform when generating the shapefile.
I therefore added a dummy geoTransform to my crs but that did not make a difference.
I am unsure why this would be needed for a polygon, but saw your sample has one in there too.

Any idea what I might be doing incorrectly or should modify in my crs?
Below I include the commandline outputs.

Thank you for your help,
David 


gdalinfo TEST.nc
Warning 1: dimension #1 (ogc_wkt_width) is not a Longitude/X dimension.
Warning 1: dimension #0 (record) is not a Latitude/Y dimension.
Warning 1: 1-pixel width/height files not supported, xdim: 191 ydim: 1
Driver: netCDF/Network Common Data Format
Files: TEST.nc
Size is 191, 1
Coordinate System is `'
Metadata:
  NC_GLOBAL#Conventions=CF-1.6
  NC_GLOBAL#ogr_geometry_field=ogc_wkt
  NC_GLOBAL#ogr_layer_name=poly
  NC_GLOBAL#ogr_layer_type=POLYGON
  ogc_wkt#grid_mapping=crs
  ogc_wkt#long_name=Geometry as ISO WKT
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,    1.0)
Upper Right (  191.0,    0.0)
Lower Right (  191.0,    1.0)
Center      (   95.5,    0.5)
Band 1 Block=191x1 Type=Byte, ColorInterp=Undefined
  NoData Value=0
  Metadata:
    grid_mapping=crs
    long_name=Geometry as ISO WKT
    NETCDF_VARNAME=ogc_wkt




ogr2ogr TEST.shp TEST.nc poly --config CPL_DEBUG on
GDAL_netCDF: driver detected file type=3, libnetcdf detected type=3
GDAL_netCDF: dim_count = 2
GDAL_netCDF: var_count = 2
GDAL_netCDF: 
=====
SetProjectionFromVar( 0)
GDAL_netCDF: got grid_mapping crs
GDAL_netCDF: bIsGdalFile=0 bIsGdalCfFile=0 bBottomUp=1
GDAL_netCDF: got spheroid from CF: (6378137.000000 , 298.257224)
GDAL_netCDF: bGotGeogCS=1 bGotCfSRS=1 bGotCfGT=0 bGotGdalSRS=0 bGotGdalGT=0
GDAL_netCDF: did not get geotransform from CF nor GDAL!
GDAL: GDALOpen(TEST.nc, this=0x7fa035c3b060) succeeds as netCDF.
GDAL: Using ESRI Shapefile driver
GDAL: QuietDelete(TEST.shp) invoking Delete()
GDAL: GDALDriver::Create(ESRI Shapefile,TEST.shp,0,0,0,Unknown,0x0)
Shape: DBF Codepage = LDID/87 for TEST.shp
Shape: Treating as encoding 'ISO-8859-1'.
OGR: Created dummy FID field for shapefile since schema is empty.
GDALVectorTranslate: 1 features written in layer 'TEST'
GDAL: GDALClose(TEST.nc, this=0x7fa035c3b060)
GDAL: GDALClose(TEST.shp, this=0x7fa035c88ed0)



﻿On 1/11/19, 2:11 PM, "Even Rouault" <even.rouault at spatialys.com> wrote:

    David,
    
    No need to test with QGIS, ogrinfo also shows that the SRS isn't recognized.
    
    This sample files was quickly hand generated with ncdump/ncgen without taking 
    much care to the georeferencing. It lacks referencing the transverse_mercator 
    variable in the vector fields.
    
    Like:
    
    	char ogc_wkt(record, ogc_wkt_max_width) ;
    		ogc_wkt:long_name = "Geometry as ISO WKT" ;
    		ogc_wkt:grid_mapping = "transverse_mercator" ;
    	double AREA(record) ;
    		AREA:long_name = "Field AREA" ;
    		AREA:ogr_field_name = "AREA" ;
    		AREA:ogr_field_type = "Real" ;
    		AREA:ogr_field_width = 12 ;
    		AREA:ogr_field_precision = 3 ;
    		AREA:grid_mapping = "transverse_mercator" ;
    	double EAS_ID(record) ;
    		EAS_ID:long_name = "Field EAS_ID" ;
    		EAS_ID:ogr_field_name = "EAS_ID" ;
    		EAS_ID:ogr_field_type = "Integer64" ;
    		EAS_ID:ogr_field_width = 11 ;
    		EAS_ID:grid_mapping = "transverse_mercator" ;
    	char PRFEDEA(record, PRFEDEA_max_width) ;
    		PRFEDEA:long_name = "Field PRFEDEA" ;
    		PRFEDEA:ogr_field_name = "PRFEDEA" ;
    		PRFEDEA:ogr_field_type = "String" ;
    		PRFEDEA:ogr_field_width = 16 ;
    		PRFEDEA:grid_mapping = "transverse_mercator" ;
    
    Actually I've just tried adding this and it works now. Modified file attached
    
    Even
    
    > Dear GDAL developers,
    > 
    > I am looking into adding a wkt compatible polygon into a netcdf (version 4)
    > file which also has raster information in it.
     Attached is a sample file
    > generated by Even “mixed.nc” with a wkt polygon enclosed formatted as a
    > string of numpy array. The sample allows to extract a poly using ogr2ogr as
    > “ogr2ogr mixed.shp mixed.nc poly” 
    > Although QGIS does not seem to catch projection information.
    > Is there a standard way of storing vector information in netcdf conform CF
    > or would the attached sample be specifically for GDAL only?
     
    > Thank you,
    > David
    > 
    
    
    -- 
    Spatialys - Geospatial professional services
    http://www.spatialys.com

-------------- next part --------------
A non-text attachment was scrubbed...
Name: TEST.shp
Type: application/octet-stream
Size: 236 bytes
Desc: TEST.shp
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190116/34c275fc/attachment-0002.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: TEST.nc
Type: application/octet-stream
Size: 13047 bytes
Desc: TEST.nc
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190116/34c275fc/attachment-0003.obj>

From even.rouault at spatialys.com  Wed Jan 16 00:32:07 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Jan 2019 09:32:07 +0100
Subject: [gdal-dev] vector representation in netcdf 4
In-Reply-To: <146CB86B-CCBB-4050-8521-A48F2FCB3E0E@jpl.nasa.gov>
References: <64B7D3B8-7159-4410-B155-939C9FA3BDC5@jpl.nasa.gov>
 <1674637.fSEpH9tVmv@even-i700>
 <146CB86B-CCBB-4050-8521-A48F2FCB3E0E@jpl.nasa.gov>
Message-ID: <1684549.A8mERBuVAx@even-i700>

David,

> 
> Thanks for sharing the updated sample product with srs info included.
> 
> I was able to mimic you polygon formatting in the attached TEST.nc file.
> Unfortunately I was not able to get the srs info captured in my shape file
> when applying ogr2ogr.
> I am using the same crs I used successful used for
> 2D rasters in nc4 (longitude latitude). When I turn the debug mode on it
> states it looks for a geoTransform when generating the shapefile. I
> therefore added a dummy geoTransform to my crs but that did not make a
> difference. I am unsure why this would be needed for a polygon, but saw
> your sample has one in there too. 
> Any idea what I might be doing incorrectly or should modify in my crs?
> Below I include the commandline outputs.

Several remarks:
- for the vector side, use ogrinfo for inspection. gdalinfo doesn't work for 
me with the file you provided, which is expected since it is a vector one and 
not a raster one, with 2.3.0 or above, so I suspect you might use a too old 
version
- it appears the code require the crs variable to have a 'spatial_ref' 
attribute with the WKT string and not 'crs_wkt'. Deducing the SRS from only CF 
attributes (grid_mapping_name, longitude_of_prime_meridian, semi_major_axis, 
inverse_flattening) isn't supported currently in the vector case, since the 
code also expects x and y variables to be present.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From shawn.gong at mdacorporation.com  Wed Jan 16 02:53:28 2019
From: shawn.gong at mdacorporation.com (Gong, Shawn)
Date: Wed, 16 Jan 2019 10:53:28 +0000
Subject: [gdal-dev] how to suppress GDAL error and warning messages
Message-ID: <7DCBC135929FF74E8A5488B1814AC6BC5434E184@exbermd02.ds.mda.ca>

Hi list,

Is there a way to how to suppress GDAL error and warning messages (that were not there in GDAL 1.9)?
Such as ERROR 4, ERROR 5, and "Warning 2: Header data too long. Truncated"

Thanks,
Shawn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190116/975fd159/attachment.html>

From idan at miara.com  Wed Jan 16 02:59:51 2019
From: idan at miara.com (Idan Miara)
Date: Wed, 16 Jan 2019 12:59:51 +0200
Subject: [gdal-dev] Geoserver/gdal: large tif with multiple overviews -
 bug + workaround
In-Reply-To: <CA+nxMTsSEfH+-eXCck6Ah1UAGd9-oWZYBORO-gNDGpY7tLaA1A@mail.gmail.com>
References: <CAEDrt3_W3r5qZSZERLCKn5Mmjbq0dP_UAbPukuk-ziFoao8p1g@mail.gmail.com>
 <CA+nxMTv+25MtQL43wydCsAqDMDoEJs6DPmtnXUPHzFC5fOGp0g@mail.gmail.com>
 <CAEDrt38gY_bsmqDhrdLCpsQUM-7kfDP04nJorsG7rxSP2ByyhQ@mail.gmail.com>
 <CA+nxMTsSEfH+-eXCck6Ah1UAGd9-oWZYBORO-gNDGpY7tLaA1A@mail.gmail.com>
Message-ID: <CAEDrt3-L9hHMxw8aWED3GtvrdHnzUS+8g-FKy_HE6XE5ZVK7AQ@mail.gmail.com>

Even,
Thanks for your pointer!
It does solve the problem for me!

Andrea,
Thanks for you input!
Should I find the time to look into these issues I'll contact you.

I'm working on a python wrapper for gdal translate/wrap/info python
functions.
I'll open source it once it's done, hopefully it will help others with the
issues I encountered.


On Mon, 14 Jan 2019 at 12:59, Andrea Aime <andrea.aime at geo-solutions.it>
wrote:

> On Mon, Jan 14, 2019 at 11:52 AM Idan Miara <idan at miara.com> wrote:
>
>> Hi Andrea,
>>
>> Thanks for very prompt reply and for your suggestions!
>> I'm wondering if it worth the effort to debug the current gdal-geoserver
>> plugin.
>> I remember we talked in FOSS4G about the gdal 2.x support in Geoserver,
>> is there any progress with that?
>>
>
> Not at the moment, no one has been sponsoring that work.
>
>
>> I could also reproduce the following bug (
>> https://osgeo-org.atlassian.net/browse/GEOS-8143) for loading a vrt file
>> but not for the internal GeoTiff loader.
>>
>
> Sorry to hear that. Anyone is free to provide a fix or sponsor one.
>
> As Paul Ramsey said (if memory serves me well) "in open source one gets
> what everybody else is paying for". Current sponsored activity does not
> seem to match your needs, sorry :-)
>
> Cheers
> Andrea
>
> ==
>
> GeoServer Professional Services from the experts! Visit
> http://goo.gl/it488V for more information. == Ing. Andrea Aime @geowolf
> Technical Lead GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa
> (LU) phone: +39 0584 962313 fax: +39 0584 1660272 mob: +39 339 8844549
> http://www.geo-solutions.it http://twitter.com/geosolutions_it
> ------------------------------------------------------- *Con riferimento
> alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 -
> Regolamento generale sulla protezione dei dati “GDPR”), si precisa che ogni
> circostanza inerente alla presente email (il suo contenuto, gli eventuali
> allegati, etc.) è un dato la cui conoscenza è riservata al/i solo/i
> destinatario/i indicati dallo scrivente. Se il messaggio Le è giunto per
> errore, è tenuta/o a cancellarlo, ogni altra operazione è illecita. Le
> sarei comunque grato se potesse darmene notizia. This email is intended
> only for the person or entity to which it is addressed and may contain
> information that is privileged, confidential or otherwise protected from
> disclosure. We remind that - as provided by European Regulation 2016/679
> “GDPR” - copying, dissemination or use of this e-mail or the information
> herein by anyone other than the intended recipient is prohibited. If you
> have received this email by mistake, please notify us immediately by
> telephone or e-mail.*
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190116/0a60a2e9/attachment.html>

From even.rouault at spatialys.com  Wed Jan 16 03:36:07 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Jan 2019 12:36:07 +0100
Subject: [gdal-dev] Geoserver/gdal: large tif with multiple overviews -
	bug + workaround
In-Reply-To: <CAEDrt3-L9hHMxw8aWED3GtvrdHnzUS+8g-FKy_HE6XE5ZVK7AQ@mail.gmail.com>
References: <CAEDrt3_W3r5qZSZERLCKn5Mmjbq0dP_UAbPukuk-ziFoao8p1g@mail.gmail.com>
 <CA+nxMTsSEfH+-eXCck6Ah1UAGd9-oWZYBORO-gNDGpY7tLaA1A@mail.gmail.com>
 <CAEDrt3-L9hHMxw8aWED3GtvrdHnzUS+8g-FKy_HE6XE5ZVK7AQ@mail.gmail.com>
Message-ID: <7442916.HxcOedde8O@even-i700>

On mercredi 16 janvier 2019 12:59:51 CET Idan Miara wrote:
> Even,
> Thanks for your pointer!
> It does solve the problem for me!
> 
> Andrea,
> Thanks for you input!
> Should I find the time to look into these issues I'll contact you.
> 
> I'm working on a python wrapper for gdal translate/wrap/info python
> functions.

Hum, are you aware that they are already such wrappers in recent GDAL versions with the GDAL Python bindings ? gdal.Info(), gdal.Translate(), gdal.Warp() ?

Usage examples:
https://github.com/OSGeo/gdal/blob/master/autotest/utilities/test_gdalinfo_lib.py
https://github.com/OSGeo/gdal/blob/master/autotest/utilities/test_gdal_translate_lib.py
https://github.com/OSGeo/gdal/blob/master/autotest/utilities/test_gdalwarp_lib.py

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From idan at miara.com  Wed Jan 16 03:58:38 2019
From: idan at miara.com (Idan Miara)
Date: Wed, 16 Jan 2019 13:58:38 +0200
Subject: [gdal-dev] Geoserver/gdal: large tif with multiple overviews -
 bug + workaround
In-Reply-To: <7442916.HxcOedde8O@even-i700>
References: <CAEDrt3_W3r5qZSZERLCKn5Mmjbq0dP_UAbPukuk-ziFoao8p1g@mail.gmail.com>
 <CA+nxMTsSEfH+-eXCck6Ah1UAGd9-oWZYBORO-gNDGpY7tLaA1A@mail.gmail.com>
 <CAEDrt3-L9hHMxw8aWED3GtvrdHnzUS+8g-FKy_HE6XE5ZVK7AQ@mail.gmail.com>
 <7442916.HxcOedde8O@even-i700>
Message-ID: <CAEDrt38KZn3qd4fPLrZ4KFnTm7h8B3z6ofVLBDpch68SUmZeew@mail.gmail.com>

I'm using this python API, I didn't know theses tests which do help (as the
python API is not as documented as the c++ API).
I feel we're off topic here so I'll publish it soon in another thread in
the gdal-dev list.
Thanks!

On Wed, 16 Jan 2019 at 13:36, Even Rouault <even.rouault at spatialys.com>
wrote:

> On mercredi 16 janvier 2019 12:59:51 CET Idan Miara wrote:
> > Even,
> > Thanks for your pointer!
> > It does solve the problem for me!
> >
> > Andrea,
> > Thanks for you input!
> > Should I find the time to look into these issues I'll contact you.
> >
> > I'm working on a python wrapper for gdal translate/wrap/info python
> > functions.
>
> Hum, are you aware that they are already such wrappers in recent GDAL
> versions with the GDAL Python bindings ? gdal.Info(), gdal.Translate(),
> gdal.Warp() ?
>
> Usage examples:
>
> https://github.com/OSGeo/gdal/blob/master/autotest/utilities/test_gdalinfo_lib.py
>
> https://github.com/OSGeo/gdal/blob/master/autotest/utilities/test_gdal_translate_lib.py
>
> https://github.com/OSGeo/gdal/blob/master/autotest/utilities/test_gdalwarp_lib.py
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190116/3f489d13/attachment.html>

From ivan.lucena at outlook.com  Wed Jan 16 07:57:22 2019
From: ivan.lucena at outlook.com (Ivan Lucena)
Date: Wed, 16 Jan 2019 15:57:22 +0000
Subject: [gdal-dev] osx compile failure
In-Reply-To: <BY2PR15MB0856E41F3337F7A675D70142C4810@BY2PR15MB0856.namprd15.prod.outlook.com>
References: <BY2PR15MB0856948C0990E293382E9FDCC4BD0@BY2PR15MB0856.namprd15.prod.outlook.com>
 <3793614.o0MncPkXNM@even-i700>
 <BN3PR15MB0850DCCAA3B97AE9360D13B6C4800@BN3PR15MB0850.namprd15.prod.outlook.com>
 <1815270.rbet226iYG@even-i700>,
 <BY2PR15MB0856E41F3337F7A675D70142C4810@BY2PR15MB0856.namprd15.prod.outlook.com>
Message-ID: <BN6PR2201MB12496748114BCB9E0017CA0BF2820@BN6PR2201MB1249.namprd22.prod.outlook.com>

Alan,

Did you used --without-libtool on ./configure?

If you do that, I believe that the file ./apps/gdalinfo and all other executables will be real executables and the makefiles will call "install_name_tool" to register the libgdal.dylib on the executables. In that case DYLD_LIBRARY_PATH will be ignored.

But, if you don't use --without-libtool on ./configure, that means you *do use libtool* and a lot of other interesting things will happen. Like, for example, the files that we think that are executables are not:

$ file apps/gdalinfo
apps/gdalinfo: POSIX shell script text executable, ASCII text
$ more apps/gdalinfo
#! /bin/sh

# gdalinfo - temporary wrapper script for .libs/gdalinfo
# Generated by libtool (GNU libtool) 2.4.6 Debian-2.4.6-0.1
#
# The gdalinfo program cannot be directly executed until all the libtool
# libraries that it depends on are installed.
#
# This wrapper script should never be moved out of the build directory.
# If it is, it will not operate correctly.

# Sed substitution that helps us do robust quoting.  It backslashifies
# metacharacters that are still active within double-quoted strings.
...

This is just the initial comments (whatever they means by "libtool libraries are installed") and there is a lot of lines trying to set and reset DYLD_LIBRARY_PATH. The real executable will be generated on this other folder:

$ file apps/.libs/gdalinfo
apps/.libs/gdalinfo: Mach-O 64-bit executable x86_64

But once you run "make install" the makefiles will generated a "clean" distribution folder where the executable are real executables.

In either way, with or without libtool, the key point is that DYLD_LIBRARY_PATH on MacOS is becoming deprecated or even useless as it is preceded by whatever "install_name_tool" defines.

One tools that you can use to figure out where the executable is getting the shared libraries from is "otool", for example:

$ otool -L apps/.libs/gdalinfo

And then I believe you can use "install_name_path" to delete the rpath that you disagree with. Maybe DYLD_LIBRARY_PATH will work then. If you really need.

That is my experience with setdevenv.sh on MacOS in regard to the DYLD_LIBRARY_PATH variable.

I am sure you can find a lot of discussions on that theme over the web, for example

https://superuser.com/questions/282450/where-do-i-set-dyld-library-path-on-mac-os-x-and-is-it-a-good-idea

https://blogs.oracle.com/dipol/dynamic-libraries,-rpath,-and-mac-os

Good luck,

Ivan







________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Alan Stewart <astewart at terragotech.com>
Sent: Tuesday, January 15, 2019 2:00 PM
To: Even Rouault
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] osx compile failure

Disabling SIP makes no difference.

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<http://www.terragotech.com>

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com>
Sent: Monday, January 14, 2019 3:38 PM
To: Alan Stewart <astewart at terragotech.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] osx compile failure

On lundi 14 janvier 2019 20:25:42 CET Alan Stewart wrote:
> DYLD_LIBRARY_PATH

Maybe an effect of the SIP thing you'd need to disable ?
https://developer.apple.com/library/archive/documentation/Security/Conceptual/System_Integrity_Protection_Guide/RuntimeProtections/RuntimeProtections.html

--
Spatialys - Geospatial professional services http://www.spatialys.com
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190116/f10264ce/attachment-0001.html>

From landa.martin at gmail.com  Wed Jan 16 09:16:47 2019
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 16 Jan 2019 18:16:47 +0100
Subject: [gdal-dev] gml: handle geometry of nested objects
Message-ID: <CA+Ei1OcuPvc0Rmp6VMRWV7wGmOQmXDWxU1Y=LCb0co9_NskS5Q@mail.gmail.com>

Hi,

it seems that GDAL skips geometry when reading nested objects. See [1].

ogrinfo -ro  ~/Downloads/example.gml -al

"""
GRFeature(CIZI_Bod):0
  gml_id (String) = CE-20190114-74D6E69478BD4640AAD0D0E780F28A0C
  OGC_ANGLE (Real) = 0.026859
  OGC_ANGLE_uom (String) = radian
  typ (String) = A
  popis (String) = desc.
  stav (String) = new
  CIZI_BodText|OGC_ANGLE (RealList) = (2:0,0)
  CIZI_BodText|OGC_ANGLE_uom (StringList) = (2:radian,radian)
  OGC_TEXTJUST (StringList) = (2:LB,LB)
  OGC_TEXT (StringList) = (2:TEXT1,TEXT2)
  POINT (-552916.08 -1200482.7)
"""

Two geometries are missing:

"""
            <gml:pos srsDimension="2">-552916.130000 -1200482.680000</gml:pos>
            <gml:pos srsDimension="2">-552916.080000 -1200482.700000</gml:pos>
"""

Thanks in advance for any pointers. Ma

[1] http://geo102.fsv.cvut.cz/~landa/tmp/example.gml

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Wed Jan 16 09:20:27 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Jan 2019 18:20:27 +0100
Subject: [gdal-dev] gml: handle geometry of nested objects
In-Reply-To: <CA+Ei1OcuPvc0Rmp6VMRWV7wGmOQmXDWxU1Y=LCb0co9_NskS5Q@mail.gmail.com>
References: <CA+Ei1OcuPvc0Rmp6VMRWV7wGmOQmXDWxU1Y=LCb0co9_NskS5Q@mail.gmail.com>
Message-ID: <6820228.IhENUFiKG2@even-i700>

Martin,

for complex GML features, use https://www.gdal.org/drv_gmlas.html

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From landa.martin at gmail.com  Wed Jan 16 09:21:25 2019
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 16 Jan 2019 18:21:25 +0100
Subject: [gdal-dev] gml: handle geometry of nested objects
In-Reply-To: <CA+Ei1OcuPvc0Rmp6VMRWV7wGmOQmXDWxU1Y=LCb0co9_NskS5Q@mail.gmail.com>
References: <CA+Ei1OcuPvc0Rmp6VMRWV7wGmOQmXDWxU1Y=LCb0co9_NskS5Q@mail.gmail.com>
Message-ID: <CA+Ei1OcwAQ_xsOf+3x-Cq8ihtF48xNWMCP=eCWWpAS04-yzUXg@mail.gmail.com>

Hi,

st 16. 1. 2019 v 18:16 odesílatel Martin Landa <landa.martin at gmail.com> napsal:
> Two geometries are missing:
>
> """
>             <gml:pos srsDimension="2">-552916.130000 -1200482.680000</gml:pos>
>             <gml:pos srsDimension="2">-552916.080000 -1200482.700000</gml:pos>
> """

Correction, it seems that GDAL takes the last geometry:

  POINT (-552916.08 -1200482.7)

"""
          <gml:pos srsDimension="2">-552915.390000 -1200483.070000</gml:pos>
...
          <gml:pos srsDimension="2">-552915.390000 -1200483.070000</gml:pos>
...
          <gml:pos srsDimension="2">-552916.080000 -1200482.700000</gml:pos>
"""

Ma

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From landa.martin at gmail.com  Wed Jan 16 09:23:36 2019
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 16 Jan 2019 18:23:36 +0100
Subject: [gdal-dev] gml: handle geometry of nested objects
In-Reply-To: <6820228.IhENUFiKG2@even-i700>
References: <CA+Ei1OcuPvc0Rmp6VMRWV7wGmOQmXDWxU1Y=LCb0co9_NskS5Q@mail.gmail.com>
 <6820228.IhENUFiKG2@even-i700>
Message-ID: <CA+Ei1OeYPWH+yPSNb5-HR3NHn1imSiF0mCZjOY4Y2K+qY=baSw@mail.gmail.com>

Hi Even,

st 16. 1. 2019 v 18:20 odesílatel Even Rouault
<even.rouault at spatialys.com> napsal:
> for complex GML features, use https://www.gdal.org/drv_gmlas.html

thanks, will try. Ma

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From andrew.bell.ia at gmail.com  Wed Jan 16 14:41:26 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 16 Jan 2019 17:41:26 -0500
Subject: [gdal-dev] Python/SWIG Build Error
Message-ID: <CACJ51z3jda2Zha_j=3_B6w2a9bEeWL2=McCdxkfyMXSRGgApyw@mail.gmail.com>

I'm trying to build GDAL master branch with the python wrappers and I'm
getting an error on OSX with clang:

--------------------

creating build/temp.macosx-10.7-x86_64-3.6
creating build/temp.macosx-10.7-x86_64-3.6/extensions
gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g
-fwrapv -O3 -Wall -Wstrict-prototypes
-I/Users/acbell/miniconda2/envs/pdal/include
-I/Users/acbell/miniconda2/envs/pdal/include
-Wno-error=unused-command-line-argument-hard-error-in-future
-Wno-error=unused-command-line-argument-hard-error-in-future -I../../port
-I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts -I../../gnm
-I../../apps -I/Users/acbell/miniconda2/envs/pdal/include/python3.6m
-I/Users/acbell/miniconda2/envs/pdal/lib/python3.6/site-packages/numpy/core/include
-I/Users/acbell/gdal/gdal/include -c extensions/gdal_wrap.cpp -o
build/temp.macosx-10.7-x86_64-3.6/extensions/gdal_wrap.o -std=c++11
-I/Users/acbell/gdal/gdal/port -I/Users/acbell/gdal/gdal/gcore
-I/Users/acbell/gdal/gdal/alg -I/Users/acbell/gdal/gdal/ogr
-I/Users/acbell/gdal/gdal/ogr/ogrsf_frmts
-I/Users/acbell/gdal/gdal/frmts/vrt -I/Users/acbell/gdal/gdal/apps

extensions/gdal_wrap.cpp:4087:1: error: unknown type name 'VSIDIR'
VSIDIR* wrapper_VSIOpenDir( const char * utf8_path,
^
extensions/gdal_wrap.cpp:4091:12: error: use of undeclared identifier
      'VSIOpenDir'
    return VSIOpenDir(utf8_path, nRecurseDepth, options);
           ^
extensions/gdal_wrap.cpp:4135:38: error: unknown type name 'VSIDIR'
DirEntry* wrapper_VSIGetNextDirEntry(VSIDIR* dir)
                                     ^
extensions/gdal_wrap.cpp:4137:11: error: unknown type name 'VSIDIREntry'
    const VSIDIREntry* vsiEntry = VSIGetNextDirEntry(dir);

...

-----------------------

It seems like a header file is missing in the swig configuration, but that
seems like something that others would have run into.

Any ideas appreciated,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190116/3a671803/attachment.html>

From even.rouault at spatialys.com  Wed Jan 16 15:22:39 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Jan 2019 00:22:39 +0100
Subject: [gdal-dev] Python/SWIG Build Error
In-Reply-To: <CACJ51z3jda2Zha_j=3_B6w2a9bEeWL2=McCdxkfyMXSRGgApyw@mail.gmail.com>
References: <CACJ51z3jda2Zha_j=3_B6w2a9bEeWL2=McCdxkfyMXSRGgApyw@mail.gmail.com>
Message-ID: <70351480.jlm73lZfLG@even-i700>

On mercredi 16 janvier 2019 17:41:26 CET Andrew Bell wrote:
> I'm trying to build GDAL master branch with the python wrappers and I'm
> getting an error on OSX with clang:
> 
> --------------------
> 
> creating build/temp.macosx-10.7-x86_64-3.6
> creating build/temp.macosx-10.7-x86_64-3.6/extensions
> gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g
> -fwrapv -O3 -Wall -Wstrict-prototypes
> -I/Users/acbell/miniconda2/envs/pdal/include
> -I/Users/acbell/miniconda2/envs/pdal/include
> -Wno-error=unused-command-line-argument-hard-error-in-future
> -Wno-error=unused-command-line-argument-hard-error-in-future -I../../port
> -I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts -I../../gnm
> -I../../apps -I/Users/acbell/miniconda2/envs/pdal/include/python3.6m
> -I/Users/acbell/miniconda2/envs/pdal/lib/python3.6/site-packages/numpy/core/
> include -I/Users/acbell/gdal/gdal/include -c extensions/gdal_wrap.cpp -o
> build/temp.macosx-10.7-x86_64-3.6/extensions/gdal_wrap.o -std=c++11
> -I/Users/acbell/gdal/gdal/port -I/Users/acbell/gdal/gdal/gcore
> -I/Users/acbell/gdal/gdal/alg -I/Users/acbell/gdal/gdal/ogr
> -I/Users/acbell/gdal/gdal/ogr/ogrsf_frmts
> -I/Users/acbell/gdal/gdal/frmts/vrt -I/Users/acbell/gdal/gdal/apps
> 
> extensions/gdal_wrap.cpp:4087:1: error: unknown type name 'VSIDIR'
> VSIDIR* wrapper_VSIOpenDir( const char * utf8_path,
> ^
> extensions/gdal_wrap.cpp:4091:12: error: use of undeclared identifier
>       'VSIOpenDir'
>     return VSIOpenDir(utf8_path, nRecurseDepth, options);
>            ^
> extensions/gdal_wrap.cpp:4135:38: error: unknown type name 'VSIDIR'
> DirEntry* wrapper_VSIGetNextDirEntry(VSIDIR* dir)
>                                      ^
> extensions/gdal_wrap.cpp:4137:11: error: unknown type name 'VSIDIREntry'
>     const VSIDIREntry* vsiEntry = VSIGetNextDirEntry(dir);

It smells like you'd have cpl_xxxx.h files from older GDAL versions in your 
include paths.
/Users/acbell/miniconda2/envs/pdal/include might be a candidate for 
examination.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrew.bell.ia at gmail.com  Wed Jan 16 15:47:32 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 16 Jan 2019 18:47:32 -0500
Subject: [gdal-dev] Python/SWIG Build Error
In-Reply-To: <70351480.jlm73lZfLG@even-i700>
References: <CACJ51z3jda2Zha_j=3_B6w2a9bEeWL2=McCdxkfyMXSRGgApyw@mail.gmail.com>
 <70351480.jlm73lZfLG@even-i700>
Message-ID: <CACJ51z3MD8Fd6nAnOxcwQ_3U=+o1vpowNkaeMHAmv8wcxrx1sg@mail.gmail.com>

Seems strange that configure would place other directories before the
location for the current source tree. Is this by design? Is there a way to
change the behavior?

On Wed, Jan 16, 2019, 6:22 PM Even Rouault <even.rouault at spatialys.com
wrote:

> On mercredi 16 janvier 2019 17:41:26 CET Andrew Bell wrote:
> > I'm trying to build GDAL master branch with the python wrappers and I'm
> > getting an error on OSX with clang:
> >
> > --------------------
> >
> > creating build/temp.macosx-10.7-x86_64-3.6
> > creating build/temp.macosx-10.7-x86_64-3.6/extensions
> > gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g
> > -fwrapv -O3 -Wall -Wstrict-prototypes
> > -I/Users/acbell/miniconda2/envs/pdal/include
> > -I/Users/acbell/miniconda2/envs/pdal/include
> > -Wno-error=unused-command-line-argument-hard-error-in-future
> > -Wno-error=unused-command-line-argument-hard-error-in-future -I../../port
> > -I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts
> -I../../gnm
> > -I../../apps -I/Users/acbell/miniconda2/envs/pdal/include/python3.6m
> >
> -I/Users/acbell/miniconda2/envs/pdal/lib/python3.6/site-packages/numpy/core/
> > include -I/Users/acbell/gdal/gdal/include -c extensions/gdal_wrap.cpp -o
> > build/temp.macosx-10.7-x86_64-3.6/extensions/gdal_wrap.o -std=c++11
> > -I/Users/acbell/gdal/gdal/port -I/Users/acbell/gdal/gdal/gcore
> > -I/Users/acbell/gdal/gdal/alg -I/Users/acbell/gdal/gdal/ogr
> > -I/Users/acbell/gdal/gdal/ogr/ogrsf_frmts
> > -I/Users/acbell/gdal/gdal/frmts/vrt -I/Users/acbell/gdal/gdal/apps
> >
> > extensions/gdal_wrap.cpp:4087:1: error: unknown type name 'VSIDIR'
> > VSIDIR* wrapper_VSIOpenDir( const char * utf8_path,
> > ^
> > extensions/gdal_wrap.cpp:4091:12: error: use of undeclared identifier
> >       'VSIOpenDir'
> >     return VSIOpenDir(utf8_path, nRecurseDepth, options);
> >            ^
> > extensions/gdal_wrap.cpp:4135:38: error: unknown type name 'VSIDIR'
> > DirEntry* wrapper_VSIGetNextDirEntry(VSIDIR* dir)
> >                                      ^
> > extensions/gdal_wrap.cpp:4137:11: error: unknown type name 'VSIDIREntry'
> >     const VSIDIREntry* vsiEntry = VSIGetNextDirEntry(dir);
>
> It smells like you'd have cpl_xxxx.h files from older GDAL versions in
> your
> include paths.
> /Users/acbell/miniconda2/envs/pdal/include might be a candidate for
> examination.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190116/4c767392/attachment.html>

From andrew.bell.ia at gmail.com  Wed Jan 16 19:26:39 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 16 Jan 2019 22:26:39 -0500
Subject: [gdal-dev] Python/SWIG Build Error
In-Reply-To: <CACJ51z3MD8Fd6nAnOxcwQ_3U=+o1vpowNkaeMHAmv8wcxrx1sg@mail.gmail.com>
References: <CACJ51z3jda2Zha_j=3_B6w2a9bEeWL2=McCdxkfyMXSRGgApyw@mail.gmail.com>
 <70351480.jlm73lZfLG@even-i700>
 <CACJ51z3MD8Fd6nAnOxcwQ_3U=+o1vpowNkaeMHAmv8wcxrx1sg@mail.gmail.com>
Message-ID: <CACJ51z1cLNMjkM_yS2dTqGGDP7a4577cVGO9bt=E1qML+zFGjg@mail.gmail.com>

Seems the problem is in the python module build. I think I've been here
before 😥

On Wed, Jan 16, 2019, 6:47 PM Andrew Bell <andrew.bell.ia at gmail.com wrote:

> Seems strange that configure would place other directories before the
> location for the current source tree. Is this by design? Is there a way to
> change the behavior?
>
> On Wed, Jan 16, 2019, 6:22 PM Even Rouault <even.rouault at spatialys.com
> wrote:
>
>> On mercredi 16 janvier 2019 17:41:26 CET Andrew Bell wrote:
>> > I'm trying to build GDAL master branch with the python wrappers and I'm
>> > getting an error on OSX with clang:
>> >
>> > --------------------
>> >
>> > creating build/temp.macosx-10.7-x86_64-3.6
>> > creating build/temp.macosx-10.7-x86_64-3.6/extensions
>> > gcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g
>> > -fwrapv -O3 -Wall -Wstrict-prototypes
>> > -I/Users/acbell/miniconda2/envs/pdal/include
>> > -I/Users/acbell/miniconda2/envs/pdal/include
>> > -Wno-error=unused-command-line-argument-hard-error-in-future
>> > -Wno-error=unused-command-line-argument-hard-error-in-future
>> -I../../port
>> > -I../../gcore -I../../alg -I../../ogr/ -I../../ogr/ogrsf_frmts
>> -I../../gnm
>> > -I../../apps -I/Users/acbell/miniconda2/envs/pdal/include/python3.6m
>> >
>> -I/Users/acbell/miniconda2/envs/pdal/lib/python3.6/site-packages/numpy/core/
>> > include -I/Users/acbell/gdal/gdal/include -c extensions/gdal_wrap.cpp -o
>> > build/temp.macosx-10.7-x86_64-3.6/extensions/gdal_wrap.o -std=c++11
>> > -I/Users/acbell/gdal/gdal/port -I/Users/acbell/gdal/gdal/gcore
>> > -I/Users/acbell/gdal/gdal/alg -I/Users/acbell/gdal/gdal/ogr
>> > -I/Users/acbell/gdal/gdal/ogr/ogrsf_frmts
>> > -I/Users/acbell/gdal/gdal/frmts/vrt -I/Users/acbell/gdal/gdal/apps
>> >
>> > extensions/gdal_wrap.cpp:4087:1: error: unknown type name 'VSIDIR'
>> > VSIDIR* wrapper_VSIOpenDir( const char * utf8_path,
>> > ^
>> > extensions/gdal_wrap.cpp:4091:12: error: use of undeclared identifier
>> >       'VSIOpenDir'
>> >     return VSIOpenDir(utf8_path, nRecurseDepth, options);
>> >            ^
>> > extensions/gdal_wrap.cpp:4135:38: error: unknown type name 'VSIDIR'
>> > DirEntry* wrapper_VSIGetNextDirEntry(VSIDIR* dir)
>> >                                      ^
>> > extensions/gdal_wrap.cpp:4137:11: error: unknown type name 'VSIDIREntry'
>> >     const VSIDIREntry* vsiEntry = VSIGetNextDirEntry(dir);
>>
>> It smells like you'd have cpl_xxxx.h files from older GDAL versions in
>> your
>> include paths.
>> /Users/acbell/miniconda2/envs/pdal/include might be a candidate for
>> examination.
>>
>> Even
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190116/8196a235/attachment.html>

From emiliomayorga at gmail.com  Thu Jan 17 09:38:29 2019
From: emiliomayorga at gmail.com (Emilio Mayorga)
Date: Thu, 17 Jan 2019 09:38:29 -0800
Subject: [gdal-dev] vector representation in netcdf 4
In-Reply-To: <1684549.A8mERBuVAx@even-i700>
References: <64B7D3B8-7159-4410-B155-939C9FA3BDC5@jpl.nasa.gov>
 <1674637.fSEpH9tVmv@even-i700>
 <146CB86B-CCBB-4050-8521-A48F2FCB3E0E@jpl.nasa.gov>
 <1684549.A8mERBuVAx@even-i700>
Message-ID: <CAPfVOv6FhT3DQ-kroH1iG9O1eUkfbf-SAW3a3KDJOpAK-dUSAQ@mail.gmail.com>

FYI, until recently representation of vector geometries in netCDF-CF has
not been standardized. But there's a mature proposal/spec in place for
"simple geometries" that's close to being officially adopted by CF. See:
https://github.com/twhiteaker/netCDF-CF-simple-geometry
https://cf-trac.llnl.gov/trac/ticket/164
https://www.unidata.ucar.edu/mailing_lists/archives/netcdf-java/2018/pdfFEz5anheEE.pdf
(a poster)

I believe there are sample data files and a Python implementation
accessible on the github site.

This spec is implemented on the netcdf classic (netcdf 3) model. So, it
doesn't use features that are specific to netcdf 4.

Cheers,
-Emilio


On Wed, Jan 16, 2019 at 12:32 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> David,
>
> >
> > Thanks for sharing the updated sample product with srs info included.
> >
> > I was able to mimic you polygon formatting in the attached TEST.nc file.
> > Unfortunately I was not able to get the srs info captured in my shape
> file
> > when applying ogr2ogr.
> > I am using the same crs I used successful used for
> > 2D rasters in nc4 (longitude latitude). When I turn the debug mode on it
> > states it looks for a geoTransform when generating the shapefile. I
> > therefore added a dummy geoTransform to my crs but that did not make a
> > difference. I am unsure why this would be needed for a polygon, but saw
> > your sample has one in there too.
> > Any idea what I might be doing incorrectly or should modify in my crs?
> > Below I include the commandline outputs.
>
> Several remarks:
> - for the vector side, use ogrinfo for inspection. gdalinfo doesn't work
> for
> me with the file you provided, which is expected since it is a vector one
> and
> not a raster one, with 2.3.0 or above, so I suspect you might use a too
> old
> version
> - it appears the code require the crs variable to have a 'spatial_ref'
> attribute with the WKT string and not 'crs_wkt'. Deducing the SRS from
> only CF
> attributes (grid_mapping_name, longitude_of_prime_meridian,
> semi_major_axis,
> inverse_flattening) isn't supported currently in the vector case, since
> the
> code also expects x and y variables to be present.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190117/ae67412b/attachment-0001.html>

From even.rouault at spatialys.com  Thu Jan 17 10:27:08 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Jan 2019 19:27:08 +0100
Subject: [gdal-dev] RFC 73 (aka gdalsrsbarn) available for review
In-Reply-To: <2571377.ue8MHfebd5@even-i700>
References: <11662317.BXslRNNhNX@even-i700> <2571377.ue8MHfebd5@even-i700>
Message-ID: <4219647.nQP843QqHh@even-i700>

On lundi 14 janvier 2019 12:42:08 CET Even Rouault wrote:
> On mercredi 9 janvier 2019 16:23:44 CET Even Rouault wrote:
> > Hi,
> > 
> > RFC 73 "Integration of PROJ6 for WKT2, late binding capabilities,
> > time-support and unified CRS database" is available for your review at:
> > 
> > https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn
> 
> No remarks ? Do people need a bit more time to review ?

I intend to submit it to voting beginning of next week. Last chance for 
expressing your remarks.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrew.bell.ia at gmail.com  Thu Jan 17 10:45:27 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 17 Jan 2019 13:45:27 -0500
Subject: [gdal-dev] RFC 73 (aka gdalsrsbarn) available for review
In-Reply-To: <4219647.nQP843QqHh@even-i700>
References: <11662317.BXslRNNhNX@even-i700> <2571377.ue8MHfebd5@even-i700>
 <4219647.nQP843QqHh@even-i700>
Message-ID: <CACJ51z3HXOexTE+16uaaCeMNuv9tkYC-oM4hdPrWRNK_HwD5BA@mail.gmail.com>

What is the logic behind the PROJ symbol renaming?  I remember terrible
things about previous symbol renaming efforts.  Is the expectation that
PROJ will be statically linked in GDAL for some reason?

On Thu, Jan 17, 2019 at 1:27 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> On lundi 14 janvier 2019 12:42:08 CET Even Rouault wrote:
> > On mercredi 9 janvier 2019 16:23:44 CET Even Rouault wrote:
> > > Hi,
> > >
> > > RFC 73 "Integration of PROJ6 for WKT2, late binding capabilities,
> > > time-support and unified CRS database" is available for your review at:
> > >
> > > https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn
> >
> > No remarks ? Do people need a bit more time to review ?
>
> I intend to submit it to voting beginning of next week. Last chance for
> expressing your remarks.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190117/c687fb38/attachment.html>

From even.rouault at spatialys.com  Thu Jan 17 11:08:58 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Jan 2019 20:08:58 +0100
Subject: [gdal-dev] RFC 73 (aka gdalsrsbarn) available for review
In-Reply-To: <CACJ51z3HXOexTE+16uaaCeMNuv9tkYC-oM4hdPrWRNK_HwD5BA@mail.gmail.com>
References: <11662317.BXslRNNhNX@even-i700> <4219647.nQP843QqHh@even-i700>
 <CACJ51z3HXOexTE+16uaaCeMNuv9tkYC-oM4hdPrWRNK_HwD5BA@mail.gmail.com>
Message-ID: <6850806.AyBeMQhnV8@even-i700>

On jeudi 17 janvier 2019 13:45:27 CET Andrew Bell wrote:
> What is the logic behind the PROJ symbol renaming? 

First, it is purely optional and require active decision of the user to build 
PROJ that way. This is only meant to be used by people wanting to mix GDAL 
master + PROJ master + GDAL dependencies built with against old PROJ version. 
This is useful in particular for CI purposes where I want to be able to pull 
GDAL dependencies built against PROJ 4.9.x.
This is meant at managing the transition before all the stack is built against 
PROJ 6

> I remember terrible
> things about previous symbol renaming efforts. 

Really ? Well, they eventually "solved" quite severe issues during the libtiff 
3 -> 4 transition.

> Is the expectation that
> PROJ will be statically linked in GDAL for some reason?

No

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrew.bell.ia at gmail.com  Thu Jan 17 11:38:13 2019
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 17 Jan 2019 14:38:13 -0500
Subject: [gdal-dev] RFC 73 (aka gdalsrsbarn) available for review
In-Reply-To: <6850806.AyBeMQhnV8@even-i700>
References: <11662317.BXslRNNhNX@even-i700> <4219647.nQP843QqHh@even-i700>
 <CACJ51z3HXOexTE+16uaaCeMNuv9tkYC-oM4hdPrWRNK_HwD5BA@mail.gmail.com>
 <6850806.AyBeMQhnV8@even-i700>
Message-ID: <CACJ51z298goqjDHxYXHRRfpTM6sSdKo9NqMmdhe1YtKiBBt2zA@mail.gmail.com>

On Thu, Jan 17, 2019 at 2:09 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> On jeudi 17 janvier 2019 13:45:27 CET Andrew Bell wrote:
> > What is the logic behind the PROJ symbol renaming?
>
> First, it is purely optional and require active decision of the user to
> build
> PROJ that way. This is only meant to be used by people wanting to mix GDAL
> master + PROJ master + GDAL dependencies built with against old PROJ
> version.
> This is useful in particular for CI purposes where I want to be able to
> pull
> GDAL dependencies built against PROJ 4.9.x.
> This is meant at managing the transition before all the stack is built
> against
> PROJ 6
>

I guess this just sounds like a development/test issue rather than
something that should be exposed for users.

> I remember terrible
> > things about previous symbol renaming efforts.
>
> Really ? Well, they eventually "solved" quite severe issues during the
> libtiff
> 3 -> 4 transition.
>

I remember hitting a GDAL with statically-linked libtiff that had renamed
symbols or some such.  It caused problems.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190117/b3ca2f91/attachment.html>

From even.rouault at spatialys.com  Thu Jan 17 11:51:04 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Jan 2019 20:51:04 +0100
Subject: [gdal-dev] RFC 73 (aka gdalsrsbarn) available for review
In-Reply-To: <CACJ51z298goqjDHxYXHRRfpTM6sSdKo9NqMmdhe1YtKiBBt2zA@mail.gmail.com>
References: <11662317.BXslRNNhNX@even-i700> <6850806.AyBeMQhnV8@even-i700>
 <CACJ51z298goqjDHxYXHRRfpTM6sSdKo9NqMmdhe1YtKiBBt2zA@mail.gmail.com>
Message-ID: <2194633.RUtIcRDk0J@even-i700>

> I guess this just sounds like a development/test issue rather than
> something that should be exposed for users.

Mostly. But I can imagine it can be also useful for people tracking GDAL 
master in production, but not wanting to rebuild their whole GIS stack. Beyond 
time and pain to do it, updating to PROJ 6 will break a number of existing 
packages whose it is a dependency, and which are not necessarily ready yet for 
PROJ 6. Thus this solution enables early testing and use of GDAL master. 
That's what one of the use cases I had in mind when developing this.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From astewart at terragotech.com  Thu Jan 17 12:43:18 2019
From: astewart at terragotech.com (Alan Stewart)
Date: Thu, 17 Jan 2019 20:43:18 +0000
Subject: [gdal-dev] osx compile failure
In-Reply-To: <BN6PR2201MB12496748114BCB9E0017CA0BF2820@BN6PR2201MB1249.namprd22.prod.outlook.com>
References: <BY2PR15MB0856948C0990E293382E9FDCC4BD0@BY2PR15MB0856.namprd15.prod.outlook.com>
 <3793614.o0MncPkXNM@even-i700>
 <BN3PR15MB0850DCCAA3B97AE9360D13B6C4800@BN3PR15MB0850.namprd15.prod.outlook.com>
 <1815270.rbet226iYG@even-i700>,
 <BY2PR15MB0856E41F3337F7A675D70142C4810@BY2PR15MB0856.namprd15.prod.outlook.com>
 <BN6PR2201MB12496748114BCB9E0017CA0BF2820@BN6PR2201MB1249.namprd22.prod.outlook.com>
Message-ID: <BYAPR15MB317551D84CF067215C3C2D4AC4830@BYAPR15MB3175.namprd15.prod.outlook.com>

Thanks, Ivan, that's very helpful.



I found that the .so  files in gdal/swig/python/build/lib.macosx-10.12-x86_64-2.7/osgeo/ are reference /usr/local/lib, while gdal/apps/.libs/gdalinfo references ~/install-gdal/lib/. This is so even after a fresh git clone.  That explains why pytest is not working. I see that gdal/ci/travix/osx/install.sh references the ~/install-gdal/lib/ path, so the question is why the swig files are being built with the /usr/local/lib/ path.

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.terragotech.com>

From: Ivan Lucena <ivan.lucena at outlook.com>
Sent: Wednesday, January 16, 2019 10:57 AM
To: Alan Stewart <astewart at terragotech.com>; Even Rouault <even.rouault at spatialys.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] osx compile failure

Alan,

Did you used --without-libtool on ./configure?

If you do that, I believe that the file ./apps/gdalinfo and all other executables will be real executables and the makefiles will call "install_name_tool" to register the libgdal.dylib on the executables. In that case DYLD_LIBRARY_PATH will be ignored.

But, if you don't use --without-libtool on ./configure, that means you *do use libtool* and a lot of other interesting things will happen. Like, for example, the files that we think that are executables are not:

$ file apps/gdalinfo
apps/gdalinfo: POSIX shell script text executable, ASCII text
$ more apps/gdalinfo
#! /bin/sh

# gdalinfo - temporary wrapper script for .libs/gdalinfo
# Generated by libtool (GNU libtool) 2.4.6 Debian-2.4.6-0.1
#
# The gdalinfo program cannot be directly executed until all the libtool
# libraries that it depends on are installed.
#
# This wrapper script should never be moved out of the build directory.
# If it is, it will not operate correctly.

# Sed substitution that helps us do robust quoting.  It backslashifies
# metacharacters that are still active within double-quoted strings.
...

This is just the initial comments (whatever they means by "libtool libraries are installed") and there is a lot of lines trying to set and reset DYLD_LIBRARY_PATH. The real executable will be generated on this other folder:

$ file apps/.libs/gdalinfo
apps/.libs/gdalinfo: Mach-O 64-bit executable x86_64

But once you run "make install" the makefiles will generated a "clean" distribution folder where the executable are real executables.

In either way, with or without libtool, the key point is that DYLD_LIBRARY_PATH on MacOS is becoming deprecated or even useless as it is preceded by whatever "install_name_tool" defines.

One tools that you can use to figure out where the executable is getting the shared libraries from is "otool", for example:

$ otool -L apps/.libs/gdalinfo

And then I believe you can use "install_name_path" to delete the rpath that you disagree with. Maybe DYLD_LIBRARY_PATH will work then. If you really need.

That is my experience with setdevenv.sh on MacOS in regard to the DYLD_LIBRARY_PATH variable.

I am sure you can find a lot of discussions on that theme over the web, for example

https://superuser.com/questions/282450/where-do-i-set-dyld-library-path-on-mac-os-x-and-is-it-a-good-idea

https://blogs.oracle.com/dipol/dynamic-libraries,-rpath,-and-mac-os

Good luck,

Ivan







________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> on behalf of Alan Stewart <astewart at terragotech.com<mailto:astewart at terragotech.com>>
Sent: Tuesday, January 15, 2019 2:00 PM
To: Even Rouault
Cc: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] osx compile failure

Disabling SIP makes no difference.

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<http://www.terragotech.com>

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Sent: Monday, January 14, 2019 3:38 PM
To: Alan Stewart <astewart at terragotech.com<mailto:astewart at terragotech.com>>
Cc: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] osx compile failure

On lundi 14 janvier 2019 20:25:42 CET Alan Stewart wrote:
> DYLD_LIBRARY_PATH

Maybe an effect of the SIP thing you'd need to disable ?
https://developer.apple.com/library/archive/documentation/Security/Conceptual/System_Integrity_Protection_Guide/RuntimeProtections/RuntimeProtections.html

--
Spatialys - Geospatial professional services http://www.spatialys.com
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190117/bcdde0fe/attachment.html>

From jon.c.culver at gmail.com  Fri Jan 18 10:47:29 2019
From: jon.c.culver at gmail.com (Jon Culver)
Date: Fri, 18 Jan 2019 10:47:29 -0800
Subject: [gdal-dev] Updated ESRI FileGDB Instructions for Mac?
Message-ID: <CABRfHz=Kdj-bnnaZLTMh6mEPPQFaFjfMWmyUsvkHy7TeWn-A1w@mail.gmail.com>

Hello,

I'm trying to read ESRI GDB files, and have followed some (dated)
instructions I've found online, but haven't succeed in getting it working
yet. Is anyone aware of up to date instructions on how to go about it?

I'm on macOS Mojave (10.14.2), running GDAL 2.1.3 installed via Homebrew.
I've tried downloading the FileGDB API v1.5 and following the analogous
instructions listed here ( download the FileGDB API; copy it to the right
place, then brew install gdal ), but haven't had any success yet. Running
ogrinfo still doesn't present ESRI Geodatabase as an option.

-
https://gis.stackexchange.com/questions/229884/esri-filegdb-driver-in-qgis-2-18-for-mac
-
https://github.com/nvkelso/geo-how-to/wiki/Installing-Open-Source-Geo-Software:-Mac-Edition
-
https://gis.stackexchange.com/questions/29501/working-with-file-geodatabase-in-qgis-for-mac-osx
- https://github.com/Esri/file-geodatabase-api/tree/master/FileGDB_API_1.5

And, my apologies if this is outside the scope of this mailing list or if
I've missed some more obvious resources; first I tried to create an issue
on GitHub, and it suggested I come here to ask it instead.

Thank you all!

Jon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190118/c92fd384/attachment-0001.html>

From shayne.tueller at us.af.mil  Fri Jan 18 15:44:48 2019
From: shayne.tueller at us.af.mil (TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC)
Date: Fri, 18 Jan 2019 23:44:48 +0000
Subject: [gdal-dev] ogr not reading the prj file
Message-ID: <CY1P111MB0134D434DBC4FAEAACF32E0BC69C0@CY1P111MB0134.NAMP111.PROD.OUTLOOK.COM>

Hello,

I'm using gdal 2.3.1 that I built from source. I run the following command to inspect the contents of a shapefile...

ogrinfo -al circles.shp

When I run this command on the shapefile, I get the SRS information "Layer SRS_WKT" reporting from what is found in the "data" folder and not the SRS information defined in the circles.prj file.

What do I need to do to get the SRS information in the circles.prj file instead? I'm assuming my built library is missing the PROJ4 library?

Thanks.

Shayne
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190118/8511e4a2/attachment.html>

From woklist at kyngchaos.com  Fri Jan 18 17:38:02 2019
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri, 18 Jan 2019 19:38:02 -0600
Subject: [gdal-dev] Updated ESRI FileGDB Instructions for Mac?
In-Reply-To: <CABRfHz=Kdj-bnnaZLTMh6mEPPQFaFjfMWmyUsvkHy7TeWn-A1w@mail.gmail.com>
References: <CABRfHz=Kdj-bnnaZLTMh6mEPPQFaFjfMWmyUsvkHy7TeWn-A1w@mail.gmail.com>
Message-ID: <6D5C4A7E-BCF9-47FF-AF8E-AE97814CD429@kyngchaos.com>

Have you tried my GDAL Complete framework?

The opensource FileGDB driver is included, and I've been using it exclusively for reading/converting FleGDBs for a while.  If there is a reason you need the FileGDB API driver, I could revive my GDAL plugin package.

> On Jan 18, 2019, at 12:47 PM, Jon Culver <jon.c.culver at gmail.com> wrote:
> 
> Hello,
> 
> I'm trying to read ESRI GDB files, and have followed some (dated) instructions I've found online, but haven't succeed in getting it working yet. Is anyone aware of up to date instructions on how to go about it?
> 
> I'm on macOS Mojave (10.14.2), running GDAL 2.1.3 installed via Homebrew. I've tried downloading the FileGDB API v1.5 and following the analogous instructions listed here ( download the FileGDB API; copy it to the right place, then brew install gdal ), but haven't had any success yet. Running ogrinfo still doesn't present ESRI Geodatabase as an option.
> 
> - https://gis.stackexchange.com/questions/229884/esri-filegdb-driver-in-qgis-2-18-for-mac <https://gis.stackexchange.com/questions/229884/esri-filegdb-driver-in-qgis-2-18-for-mac>
> - https://github.com/nvkelso/geo-how-to/wiki/Installing-Open-Source-Geo-Software:-Mac-Edition <https://github.com/nvkelso/geo-how-to/wiki/Installing-Open-Source-Geo-Software:-Mac-Edition>
> - https://gis.stackexchange.com/questions/29501/working-with-file-geodatabase-in-qgis-for-mac-osx <https://gis.stackexchange.com/questions/29501/working-with-file-geodatabase-in-qgis-for-mac-osx>
> - https://github.com/Esri/file-geodatabase-api/tree/master/FileGDB_API_1.5 <https://github.com/Esri/file-geodatabase-api/tree/master/FileGDB_API_1.5>
> 
> And, my apologies if this is outside the scope of this mailing list or if I've missed some more obvious resources; first I tried to create an issue on GitHub, and it suggested I come here to ask it instead.
> 
> Thank you all!
> 
> Jon
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190118/d16e6af8/attachment.html>

From even.rouault at spatialys.com  Sat Jan 19 00:35:55 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 19 Jan 2019 09:35:55 +0100
Subject: [gdal-dev] ogr not reading the prj file
In-Reply-To: <CY1P111MB0134D434DBC4FAEAACF32E0BC69C0@CY1P111MB0134.NAMP111.PROD.OUTLOOK.COM>
References: <CY1P111MB0134D434DBC4FAEAACF32E0BC69C0@CY1P111MB0134.NAMP111.PROD.OUTLOOK.COM>
Message-ID: <11728762.QsyBVCDFoN@even-i700>

On vendredi 18 janvier 2019 23:44:48 CET TUELLER, SHAYNE R CIV USAF AFMC 519 
SMXS/MXDEC wrote:
> Hello,
> 
> I'm using gdal 2.3.1 that I built from source. I run the following command
> to inspect the contents of a shapefile...
> 
> ogrinfo -al circles.shp
> 
> When I run this command on the shapefile, I get the SRS information "Layer
> SRS_WKT" reporting from what is found in the "data" folder and not the SRS
> information defined in the circles.prj file.

For shapefiles, GDAL will try to identify the SRS information from the .prj 
against one known SRS from the EPSG database. In case of a match, it will use 
the later definition, in particular to get the code of the SRS, which is 
practical in many uses.
Is it a case of wrong identification ?
If so, could you share the .prj file ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From nik at nikosalexandris.net  Sat Jan 19 14:26:34 2019
From: nik at nikosalexandris.net (Nikos Alexandris)
Date: Sat, 19 Jan 2019 23:26:34 +0100
Subject: [gdal-dev] Vertical datum conversion for SRTM data
In-Reply-To: <20171121092542.g65hr7odn4ykbmzd@mail.nikosalexandris.net>
References: <20171121092542.g65hr7odn4ykbmzd@mail.nikosalexandris.net>
Message-ID: <20190119222634.fp74ie74vrbjuk7f@imap.dreamhost.com>

* Nikos Alexandris <nik at nikosalexandris.net> [2017-11-21 10:25:42 +0100]:

>Dear list, can GDAL handle the following exercise?
>
>Of interest is the Mean Sea Level, based on NASA’s SRTM. I am new in this
>topic. Is the following equation correct?
>
>SRTM(MSL) = SRTM(WGS84) - MSL(WGS84) [*]

Here https://gitlab.com/NikosAlexandris/mean-sea-level the exercise I
did back then.  I never got to continue on this.

The last three days of the past week, I've been an observer of a
"geomorphometry" meeting. So, I asked someone knowledgeable to get some
feedback.  It seems it's on the right track.  Perhaps it'll be of
interest to some people.

Nikos

[rest deleted]

From gdt at lexort.com  Sat Jan 19 17:52:44 2019
From: gdt at lexort.com (Greg Troxel)
Date: Sat, 19 Jan 2019 20:52:44 -0500
Subject: [gdal-dev] Vertical datum conversion for SRTM data
In-Reply-To: <20190119222634.fp74ie74vrbjuk7f@imap.dreamhost.com> (Nikos
 Alexandris's message of "Sat, 19 Jan 2019 23:26:34 +0100")
References: <20171121092542.g65hr7odn4ykbmzd@mail.nikosalexandris.net>
 <20190119222634.fp74ie74vrbjuk7f@imap.dreamhost.com>
Message-ID: <smuef989jtf.fsf@linuxpal.mit.edu>

Nikos Alexandris <nik at nikosalexandris.net> writes:

> * Nikos Alexandris <nik at nikosalexandris.net> [2017-11-21 10:25:42 +0100]:
>
>>Dear list, can GDAL handle the following exercise?
>>
>>Of interest is the Mean Sea Level, based on NASA’s SRTM. I am new in this
>>topic. Is the following equation correct?
>>
>>SRTM(MSL) = SRTM(WGS84) - MSL(WGS84) [*]
>
> Here https://gitlab.com/NikosAlexandris/mean-sea-level the exercise I
> did back then.  I never got to continue on this.
>
> The last three days of the past week, I've been an observer of a
> "geomorphometry" meeting. So, I asked someone knowledgeable to get some
> feedback.  It seems it's on the right track.  Perhaps it'll be of
> interest to some people.

I would caution that the phrase "mean sea level" is potentially
confusing.  It was used to refer to what was thought to be an
equipotential surface that lead to the Sea Level Datum of 1929, and
later called NGVD 1929 when it was realized that it was not actually an
equipotential surface.

I think you are perhaps talking about an actual mean of sea levels over
some area, where the levels are expressed relative to some particular
geoid.  But that's not clearly inferrable from the words, and I think it
would be helpful to be painfully pedenatically precise about terms.

The phrase "SRTM(WGS84)" does not clearly  distinguish between WGS84
ellipsoidal height, apparently the native measurement and height
relative to the WGS84 geoid.    I also have a hard time understanding
what "MSL(WGS84)" is.

From laasunde at hotmail.com  Mon Jan 21 01:08:36 2019
From: laasunde at hotmail.com (Lars)
Date: Mon, 21 Jan 2019 09:08:36 +0000
Subject: [gdal-dev] gdal data files
Message-ID: <HE1PR03MB3050C0F06B94EB85F0D7F957CA9F0@HE1PR03MB3050.eurprd03.prod.outlook.com>

Hello,

The gdal-2.0.2\data folder contain 58 files and we are attempting to determine which files must be included in installer. Does GDAL contain any documentation that shows relationship between a driver and files in data folder? Some of the files contain a helpful header but it is tedious reading all these files 😊

kind regards, Lars

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190121/6889e203/attachment.html>

From Martin.Franzke at telekom.de  Mon Jan 21 05:31:59 2019
From: Martin.Franzke at telekom.de (Martin.Franzke at telekom.de)
Date: Mon, 21 Jan 2019 13:31:59 +0000
Subject: [gdal-dev] PROJ4 Miller +R_A enforced
Message-ID: <LEJPR01MB098733DD07A90E1D74E127B0E89F0@LEJPR01MB0987.DEUPRD01.PROD.OUTLOOK.DE>

Hi,

trying to transform from a "Miller WGS84" coordinate system, whose exact definition I don't know I found that the following two transformations yield the same result, regardless of whether +R_A is present or not.

$ echo "781046.71 6190010.02" | gdaltransform -s_srs "+proj=mill +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 +units=m +R_A" -t_srs EPSG:31466
2571974.08458298 5649095.03802563 5685.34965490364

$ echo "781046.71 6190010.02" | gdaltransform -s_srs "+proj=mill +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 +units=m" -t_srs EPSG:31466
2571974.08458298 5649095.03802563 5685.34965490364

This is due to https://github.com/OSGeo/gdal/blob/master/gdal/ogr/ogr_srs_proj4.cpp line 1852ff. I wonder, whether this is on purpose or not. At least using QGIS I get 2571781.3732362 5622898.28359721 in the latter case.

Kind regards,
Martin


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190121/1cb9f76e/attachment.html>

From markus.metz.giswork at gmail.com  Mon Jan 21 12:59:33 2019
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Mon, 21 Jan 2019 21:59:33 +0100
Subject: [gdal-dev] RFC 73 (aka gdalsrsbarn) available for review
In-Reply-To: <4219647.nQP843QqHh@even-i700>
References: <11662317.BXslRNNhNX@even-i700> <2571377.ue8MHfebd5@even-i700>
 <4219647.nQP843QqHh@even-i700>
Message-ID: <CAG+h=FELrKx2TRCsEonrWAQzHeDY4NJ5_rSbHixd77S_bf+avg@mail.gmail.com>

On Thu, Jan 17, 2019 at 7:27 PM Even Rouault <even.rouault at spatialys.com>
wrote:
>
> On lundi 14 janvier 2019 12:42:08 CET Even Rouault wrote:
> > On mercredi 9 janvier 2019 16:23:44 CET Even Rouault wrote:
> > > Hi,
> > >
> > > RFC 73 "Integration of PROJ6 for WKT2, late binding capabilities,
> > > time-support and unified CRS database" is available for your review
at:
> > >
> > > https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn
> >
> > No remarks ? Do people need a bit more time to review ?
>
> I intend to submit it to voting beginning of next week. Last chance for
> expressing your remarks.

Regarding WKT2, a remark from a GRASS GIS developer being a user of
GDAL/PROJ:

I understand that WKT2 is long overdue and thus should be pushed as much
and as early as possible. Otherwise it would take a long time and a rather
long and painful transition process to switch to WKT2. My suggestion is to
try to keep the painful transition process as short as possible and switch
to WKT2 ASAP. People like to stick to what they have and what they know, so
if something better is available, some convincing is needed.

Backwards compatibility wrt reading WKT1 needs to be maintained because
already existing datasets must still be readable.

Regarding the BBOX, it should be made clear that the reported extents are a
suggestion, not a limitation.

Markus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190121/c88e6b1d/attachment.html>

From shayne.tueller at us.af.mil  Tue Jan 22 08:56:56 2019
From: shayne.tueller at us.af.mil (TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC)
Date: Tue, 22 Jan 2019 16:56:56 +0000
Subject: [gdal-dev] [Non-DoD Source] Re:  ogr not reading the prj file
In-Reply-To: <11728762.QsyBVCDFoN@even-i700>
References: <CY1P111MB0134D434DBC4FAEAACF32E0BC69C0@CY1P111MB0134.NAMP111.PROD.OUTLOOK.COM>
 <11728762.QsyBVCDFoN@even-i700>
Message-ID: <SN1P111MB03188CBBFF8655BF5135542CC6980@SN1P111MB0318.NAMP111.PROD.OUTLOOK.COM>

Thank you for the reply.

I don't think it's a case of wrong identification because the prj file gets read in just fine with ogrinfo in gdal 1.11. When I use the gdal 2.3.1 I built from source on Windows, it no longer reads the associated prj file that is used with the shapefile. Instead, it grabs whatever is defined in the "data" folder. I think it may have something to do with the way I built the library but I'm not sure.

Here is the contents of the circles.prj associated with the circles.shp file...

GEOGCS["GCS_WGS_1984", DATUM["D_WGS_1984", SPHERIOD["WGS_1984", 6378137, 298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]

Shayne

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com>
Sent: Saturday, January 19, 2019 1:36 AM
To: gdal-dev at lists.osgeo.org
Cc: TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC <shayne.tueller at us.af.mil>
Subject: [Non-DoD Source] Re: [gdal-dev] ogr not reading the prj file

On vendredi 18 janvier 2019 23:44:48 CET TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC wrote:
> Hello,
>
> I'm using gdal 2.3.1 that I built from source. I run the following
> command to inspect the contents of a shapefile...
>
> ogrinfo -al circles.shp
>
> When I run this command on the shapefile, I get the SRS information
> "Layer SRS_WKT" reporting from what is found in the "data" folder and
> not the SRS information defined in the circles.prj file.

For shapefiles, GDAL will try to identify the SRS information from the .prj against one known SRS from the EPSG database. In case of a match, it will use the later definition, in particular to get the code of the SRS, which is practical in many uses.
Is it a case of wrong identification ?
If so, could you share the .prj file ?

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com

From even.rouault at spatialys.com  Tue Jan 22 09:32:12 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 22 Jan 2019 18:32:12 +0100
Subject: [gdal-dev] [Non-DoD Source] Re:  ogr not reading the prj file
In-Reply-To: <SN1P111MB03188CBBFF8655BF5135542CC6980@SN1P111MB0318.NAMP111.PROD.OUTLOOK.COM>
References: <CY1P111MB0134D434DBC4FAEAACF32E0BC69C0@CY1P111MB0134.NAMP111.PROD.OUTLOOK.COM>
 <11728762.QsyBVCDFoN@even-i700>
 <SN1P111MB03188CBBFF8655BF5135542CC6980@SN1P111MB0318.NAMP111.PROD.OUTLOOK.COM>
Message-ID: <2144640.9lKlXFx45j@even-i700>

On mardi 22 janvier 2019 16:56:56 CET TUELLER, SHAYNE R CIV USAF AFMC 519 
SMXS/MXDEC wrote:
> Thank you for the reply.
> 
> I don't think it's a case of wrong identification because the prj file gets
> read in just fine with ogrinfo in gdal 1.11. When I use the gdal 2.3.1 I
> built from source on Windows, it no longer reads the associated prj file
> that is used with the shapefile. Instead, it grabs whatever is defined in
> the "data" folder. I think it may have something to do with the way I built
> the library but I'm not sure.
> 
> Here is the contents of the circles.prj associated with the circles.shp
> file...
> 
> GEOGCS["GCS_WGS_1984", DATUM["D_WGS_1984", SPHERIOD["WGS_1984", 6378137,
> 298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]

ok, so I guess ogrinfo -al -so reports

GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"]]

This is the expected behaviour. The content of a .prj file is WKT with the 
ESRI variant formatting. Newer GDAL versions manage to retrieve the OGC WKT 
definition when the ESRI WKT corresponds to a EPSG code.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From shayne.tueller at us.af.mil  Tue Jan 22 09:34:36 2019
From: shayne.tueller at us.af.mil (TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC)
Date: Tue, 22 Jan 2019 17:34:36 +0000
Subject: [gdal-dev] [Non-DoD Source] Re:  ogr not reading the prj file
In-Reply-To: <11728762.QsyBVCDFoN@even-i700>
References: <CY1P111MB0134D434DBC4FAEAACF32E0BC69C0@CY1P111MB0134.NAMP111.PROD.OUTLOOK.COM>
 <11728762.QsyBVCDFoN@even-i700>
Message-ID: <SN1P111MB03183A836A03BA9A845A35EAC6980@SN1P111MB0318.NAMP111.PROD.OUTLOOK.COM>

I should also mention that when using gdal 1.11, I didn't have to explicitly set the GDAL_DATA environment variable in order for the SRS info to print out. With gdal 2.3.1, if I don't set the GDAL_DATA variable, I get the following error...

ERROR 4: Unable to open EPSG support file gcs.csv. Try setting the GDAL_DATA environment variable to point to the directory containing EPSG csv files.

Not sure why I don't need this dependency in gdal 1.11. With this version it just loads the SRS info found in my prj file which is what I want.

Shayne

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com>
Sent: Saturday, January 19, 2019 1:36 AM
To: gdal-dev at lists.osgeo.org
Cc: TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC <shayne.tueller at us.af.mil>
Subject: [Non-DoD Source] Re: [gdal-dev] ogr not reading the prj file

On vendredi 18 janvier 2019 23:44:48 CET TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC wrote:
> Hello,
>
> I'm using gdal 2.3.1 that I built from source. I run the following
> command to inspect the contents of a shapefile...
>
> ogrinfo -al circles.shp
>
> When I run this command on the shapefile, I get the SRS information
> "Layer SRS_WKT" reporting from what is found in the "data" folder and
> not the SRS information defined in the circles.prj file.

For shapefiles, GDAL will try to identify the SRS information from the .prj against one known SRS from the EPSG database. In case of a match, it will use the later definition, in particular to get the code of the SRS, which is practical in many uses.
Is it a case of wrong identification ?
If so, could you share the .prj file ?

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com

From bjorn.harrtell at gmail.com  Tue Jan 22 09:43:36 2019
From: bjorn.harrtell at gmail.com (=?UTF-8?Q?Bj=C3=B6rn_Harrtell?=)
Date: Tue, 22 Jan 2019 18:43:36 +0100
Subject: [gdal-dev] FlatGeobuf;
	proposal for a new performance oriented vector file format
In-Reply-To: <CANhDX=b8vn-su_1M-H6KmZBNcWs+iTV2Y2OaDmQJ72N349Z2QA@mail.gmail.com>
References: <CANhDX=b8vn-su_1M-H6KmZBNcWs+iTV2Y2OaDmQJ72N349Z2QA@mail.gmail.com>
Message-ID: <CANhDX=b_J2b-vxakyFV7WB8qjzvu3APBT_wTRdan5GjcfBq4YA@mail.gmail.com>

After posting about my experimental format I realized that I lack numbers
on the potential performance, so I tried to make some more or less
scientific measuring. The results was disappointing, reaching similar
performance as shapefile for full sequential reads and so I lost interest
for a while. But recently I found out that my method of measuring was
flawed - I measured the time to read into a new shapefile using ogr2ogr,
but it turns out that can be quite unfair due to the string field length
dynamic resize that ogr2ogr will do if the strings from input feature
attributes are of variable length. I've now made some new measurements
using ogrinfo and the undocumented flag -qq to get a full sequential read.

I've used the shapefiles "gis_osm_buildings_a_free_1" (exploded to single
poly) and "gis_osm_roads_free_1" from Denmark at
http://download.geofabrik.de/europe.html as the source, converted to
respective format, then measured the time it takes to run ogrinfo -qq on
them. Results (average over three runs):

## gis_osm_buildings_a_free_1 (2027890 Polygons)
* SHP: 3800 ms
* GPKG: 2700 ms
* FlatGeobuf: 2200 ms

## gis_osm_roads_free_1 (812547 LineStrings)
* SHP: 1600 ms
* GPKG: 1350 ms
* FlatGeobuf: 800 ms

With that my hope and interest is rekindled. I believe I can fare even
better against the competition with with spatially filtered searches, will
hopefully soon have some results on that too.

/Björn

Den sön 9 dec. 2018 kl 20:36 skrev Björn Harrtell <bjorn.harrtell at gmail.com
>:

> Hi GDAL/OGR folks,
>
> In my spare time I've been working on a vector file format called
> FlatGeobuf (tentatively). The main reason, besides curiosity and learning,
> I'm putting time into it is that I think shapefile still rules the
> read/query static data performance game, which is kind of sad, and probably
> one of the reasons it is still so widely popular. Also, the main competitor
> (GeoPackage) isn't suitable for streaming access (AFAIK) which shapefiles
> also handles surprisingly (?) well.
>
> By using a performance focused write once binary encoding (flatbuffers),
> schema constraint and focusing on read/query performance by clustering on
> an optimal spatial index (Packed Hilbert R-Tree) I hope to be able to beat
> shapefile performance and at the same time be optimal for streaming/cloud
> access.
>
> I think I'm starting to get somewhere, more details and source is at
> https://github.com/bjornharrtell/flatgeobuf and I have an early proof of
> concept driver implementation at
> https://github.com/bjornharrtell/gdal/tree/flatgeobuf and results are
> already quite promising - it can do roundtrip read/write and is already
> quite a bit faster than shapefile. I also have implemented naive read only
> QGIS provider for experimental purposes.
>
> Basically I'm fishing for interest in this effort, hoping that others will
> see potential in it even if it's "yet another format" and far from
> final/stable yet. Any feedback is welcome. As I see it, GDAL is a good
> place for a format specification and reference implementation to incubate.
>
> Some additional food for thought that I've had during the experimentation:
>
> 1. The main in memory representations of geometry/coordinates seem to be
> either separate arrays per dimension (GDAL (partially?) and QGIS) or a
> single array with dimension as stride. I've chosen the latter as of yet but
> I'm still a bit undecided. There is of course a substantial involved in
> transforming between the two representations so the situation with two
> competing models is a bit unfortunate. I'm also not sure about which of
> these models are objectively "better" than the other?
>
> 2. One could get better space efficiency with protobuf instead of
> flatbuffers, but it has a performance cost. I have not gone far into
> investigating how much though and one could even reason about supporting
> both these encodings in a single format specification but it's taking it a
> bit far I think.
>
> 3. Is there a reason to support different packing strategies for the
> R-Tree or is Packed Hilbert a good compromise (besides it being beautifully
> simple to implement)?
>
> 4. FlatGeobuf is perhaps a too technical name, not catchy enough and has a
> bad/boring abbreviation. Other candidates I've considered are OpenGeoFile,
> OpenVectorFile or OpenSpatialFile but I'm undecided. Any ideas? :)
>
> Regards,
>
> Björn Harrtell
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190122/b446cf89/attachment.html>

From shayne.tueller at us.af.mil  Tue Jan 22 09:43:48 2019
From: shayne.tueller at us.af.mil (TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC)
Date: Tue, 22 Jan 2019 17:43:48 +0000
Subject: [gdal-dev] ogr not reading the prj file
Message-ID: <SN1P111MB0318AEABD4C7BE8986866573C6980@SN1P111MB0318.NAMP111.PROD.OUTLOOK.COM>

Yes, that is correct. So, I guess it is working as designed with the newer version of gdal?



Is there any way of forcing it to use the SRS info in my prj file with this newer version or am I stuck?



Shayne



--------------------------------------------------------------------------------------------------



ok, so I guess ogrinfo -al -so reports



GEOGCS["WGS 84",

    DATUM["WGS_1984",

        SPHEROID["WGS 84",6378137,298.257223563,

            AUTHORITY["EPSG","7030"]],

        AUTHORITY["EPSG","6326"]],

    PRIMEM["Greenwich",0,

        AUTHORITY["EPSG","8901"]],

    UNIT["degree",0.0174532925199433,

        AUTHORITY["EPSG","9122"]],

    AUTHORITY["EPSG","4326"]]



This is the expected behaviour. The content of a .prj file is WKT with the ESRI variant formatting. Newer GDAL versions manage to retrieve the OGC WKT definition when the ESRI WKT corresponds to a EPSG code.



--

Spatialys - Geospatial professional services http://www.spatialys.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190122/2d043991/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Jan 22 09:58:49 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 22 Jan 2019 10:58:49 -0700 (MST)
Subject: [gdal-dev] [Non-DoD Source] Re:  ogr not reading the prj file
In-Reply-To: <SN1P111MB03183A836A03BA9A845A35EAC6980@SN1P111MB0318.NAMP111.PROD.OUTLOOK.COM>
References: <CY1P111MB0134D434DBC4FAEAACF32E0BC69C0@CY1P111MB0134.NAMP111.PROD.OUTLOOK.COM>
 <11728762.QsyBVCDFoN@even-i700>
 <SN1P111MB03183A836A03BA9A845A35EAC6980@SN1P111MB0318.NAMP111.PROD.OUTLOOK.COM>
Message-ID: <1548179929094-0.post@n6.nabble.com>

TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC wrote
> I should also mention that when using gdal 1.11, I didn't have to
> explicitly set the GDAL_DATA environment variable in order for the SRS
> info to print out. With gdal 2.3.1, if I don't set the GDAL_DATA variable,
> I get the following error...
> 
> ERROR 4: Unable to open EPSG support file gcs.csv. Try setting the
> GDAL_DATA environment variable to point to the directory containing EPSG
> csv files.
> 
> Not sure why I don't need this dependency in gdal 1.11. With this version
> it just loads the SRS info found in my prj file which is what I want.
> 
> Shayne

Hi,

Please read the previous answers and try to understand what happens.
- ESRI is using its own version of WKT that is slightly different from the
OGC version. With your .prj the main difference is in the name of the DATUM:
"D_WGS_1984".
- GDAL reads the ESRI variant and if it finds corresponding OGC WKT it
prints that by default.
- The older GDAL version probably did not find the hit. You should
experiense the same with GDAL 2.3.1 if you edit your .prj file a bit so that
it will not find corresponding definitions from the EPSG data in GDAL_DATA
directory

GEOGCS["GCS_WGS_FOO", DATUM["FOO_WGS_1984", SPHEROID["WGS_1984", 6378137,
298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]

You did not explain yet what real problem you have due to gdalinfo reporting
OGC WKT instead of ESRI WKT. Both mean just the same for GDAL.

If you want to see the ESRI WKT you can use gdalsrsinfo. I saved your .prj
as test.prj and here is the result. Even "SPHERIOD" is remained.

gdalsrsinfo test.prj -o wkt_esri
GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHERIOD["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From shayne.tueller at us.af.mil  Tue Jan 22 10:20:46 2019
From: shayne.tueller at us.af.mil (TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC)
Date: Tue, 22 Jan 2019 18:20:46 +0000
Subject: [gdal-dev] [Non-DoD Source] Re:  ogr not reading the prj file
In-Reply-To: <1548179929094-0.post@n6.nabble.com>
References: <CY1P111MB0134D434DBC4FAEAACF32E0BC69C0@CY1P111MB0134.NAMP111.PROD.OUTLOOK.COM>
 <11728762.QsyBVCDFoN@even-i700>
 <SN1P111MB03183A836A03BA9A845A35EAC6980@SN1P111MB0318.NAMP111.PROD.OUTLOOK.COM>
 <1548179929094-0.post@n6.nabble.com>
Message-ID: <SN1P111MB031894250D4B226D02BF040FC6980@SN1P111MB0318.NAMP111.PROD.OUTLOOK.COM>

Thanks for the reply. However, this didn't address my question regarding why I don't need GDAL_DATA defined in gdal 1.11 in order for SRS info to print out...

Shayne

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of jratike80
Sent: Tuesday, January 22, 2019 10:59 AM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] [Non-DoD Source] Re: ogr not reading the prj file

TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC wrote
> I should also mention that when using gdal 1.11, I didn't have to
> explicitly set the GDAL_DATA environment variable in order for the SRS
> info to print out. With gdal 2.3.1, if I don't set the GDAL_DATA
> variable, I get the following error...
>
> ERROR 4: Unable to open EPSG support file gcs.csv. Try setting the
> GDAL_DATA environment variable to point to the directory containing
> EPSG csv files.
>
> Not sure why I don't need this dependency in gdal 1.11. With this
> version it just loads the SRS info found in my prj file which is what I want.
>
> Shayne

Hi,

Please read the previous answers and try to understand what happens.
- ESRI is using its own version of WKT that is slightly different from the OGC version. With your .prj the main difference is in the name of the DATUM:
"D_WGS_1984".
- GDAL reads the ESRI variant and if it finds corresponding OGC WKT it prints that by default.
- The older GDAL version probably did not find the hit. You should experiense the same with GDAL 2.3.1 if you edit your .prj file a bit so that it will not find corresponding definitions from the EPSG data in GDAL_DATA directory


You did not explain yet what real problem you have due to gdalinfo reporting OGC WKT instead of ESRI WKT. Both mean just the same for GDAL.

If you want to see the ESRI WKT you can use gdalsrsinfo. I saved your .prj as test.prj and here is the result. Even "SPHERIOD" is remained.

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From astewart at terragotech.com  Tue Jan 22 10:42:23 2019
From: astewart at terragotech.com (Alan Stewart)
Date: Tue, 22 Jan 2019 18:42:23 +0000
Subject: [gdal-dev] OFTStringList
Message-ID: <BYAPR15MB317573EF3BAFDE1DD01FEB41C4980@BYAPR15MB3175.namprd15.prod.outlook.com>

Where is OFTStringList documented?

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.terragotech.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190122/33bfcdf4/attachment.html>

From even.rouault at spatialys.com  Tue Jan 22 10:51:08 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 22 Jan 2019 19:51:08 +0100
Subject: [gdal-dev] [Non-DoD Source] Re:  ogr not reading the prj file
In-Reply-To: <SN1P111MB031894250D4B226D02BF040FC6980@SN1P111MB0318.NAMP111.PROD.OUTLOOK.COM>
References: <CY1P111MB0134D434DBC4FAEAACF32E0BC69C0@CY1P111MB0134.NAMP111.PROD.OUTLOOK.COM>
 <1548179929094-0.post@n6.nabble.com>
 <SN1P111MB031894250D4B226D02BF040FC6980@SN1P111MB0318.NAMP111.PROD.OUTLOOK.COM>
Message-ID: <9329719.o7mj7iVpJS@even-i700>

On mardi 22 janvier 2019 18:20:46 CET TUELLER, SHAYNE R CIV USAF AFMC 519 
SMXS/MXDEC wrote:
> Thanks for the reply. However, this didn't address my question regarding why
> I don't need GDAL_DATA defined in gdal 1.11 in order for SRS info to print
> out...

If software didn't change between versions, there would be no point in 
releasing new versions :-)

So yes since GDAL 2.3, the shapefile driver now needs to access to the GDAL 
resource .csv files for nominal behaviour. (Actually if they are absent, you 
should still get the same, or similar, result as in 1.11)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Jan 22 10:52:29 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 22 Jan 2019 19:52:29 +0100
Subject: [gdal-dev] OFTStringList
In-Reply-To: <BYAPR15MB317573EF3BAFDE1DD01FEB41C4980@BYAPR15MB3175.namprd15.prod.outlook.com>
References: <BYAPR15MB317573EF3BAFDE1DD01FEB41C4980@BYAPR15MB3175.namprd15.prod.outlook.com>
Message-ID: <8238331.NjjXn3myeL@even-i700>

On mardi 22 janvier 2019 18:42:23 CET Alan Stewart wrote:
> OFTStringList

in ogr_core.h: /** Array of strings */

What do you need to know exactly ? The best documentation is probably studying 
the code in ogr/ogrfeature.cpp that deal with this type.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From shayne.tueller at us.af.mil  Tue Jan 22 11:08:15 2019
From: shayne.tueller at us.af.mil (TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC)
Date: Tue, 22 Jan 2019 19:08:15 +0000
Subject: [gdal-dev] [Non-DoD Source] Re:  ogr not reading the prj file
In-Reply-To: <9329719.o7mj7iVpJS@even-i700>
References: <CY1P111MB0134D434DBC4FAEAACF32E0BC69C0@CY1P111MB0134.NAMP111.PROD.OUTLOOK.COM>
 <1548179929094-0.post@n6.nabble.com>
 <SN1P111MB031894250D4B226D02BF040FC6980@SN1P111MB0318.NAMP111.PROD.OUTLOOK.COM>
 <9329719.o7mj7iVpJS@even-i700>
Message-ID: <SN1P111MB03185F605A71AF02C40F7ECDC6980@SN1P111MB0318.NAMP111.PROD.OUTLOOK.COM>

I think your first point is obvious...lol.

I was just trying to understand why GDAL_DATA wasn't required in my older version in order for SRS info to display in the ogrinfo app. You have answered that question. Thank you.

Shayne

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com>
Sent: Tuesday, January 22, 2019 11:51 AM
To: gdal-dev at lists.osgeo.org
Cc: TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC <shayne.tueller at us.af.mil>; jratike80 <jukka.rahkonen at maanmittauslaitos.fi>
Subject: Re: [gdal-dev] [Non-DoD Source] Re: ogr not reading the prj file

On mardi 22 janvier 2019 18:20:46 CET TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC wrote:
> Thanks for the reply. However, this didn't address my question
> regarding why I don't need GDAL_DATA defined in gdal 1.11 in order for
> SRS info to print out...

If software didn't change between versions, there would be no point in releasing new versions :-)

So yes since GDAL 2.3, the shapefile driver now needs to access to the GDAL resource .csv files for nominal behaviour. (Actually if they are absent, you should still get the same, or similar, result as in 1.11)

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com

From even.rouault at spatialys.com  Tue Jan 22 11:49:01 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 22 Jan 2019 20:49:01 +0100
Subject: [gdal-dev] OFTStringList
In-Reply-To: <BYAPR15MB31752A8C373827E4127A39FDC4980@BYAPR15MB3175.namprd15.prod.outlook.com>
References: <BYAPR15MB317573EF3BAFDE1DD01FEB41C4980@BYAPR15MB3175.namprd15.prod.outlook.com>
 <8238331.NjjXn3myeL@even-i700>
 <BYAPR15MB31752A8C373827E4127A39FDC4980@BYAPR15MB3175.namprd15.prod.outlook.com>
Message-ID: <2636285.D9YHxvVhbv@even-i700>

On mardi 22 janvier 2019 19:35:52 CET Alan Stewart wrote:
> I take it then that there are no docs for that. I'm assuming char*[] with a
> final zero value to terminate. Examination of ogrfeature.cpp seems to
> confirm that.

Yes, papszFoo with no explicit list length is used in GDAL with that 
semantics.

I've just improved the doc:
@param papszValues the values to assign. List of NUL-terminated string, ending 
with a NULL pointer.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From shayne.tueller at us.af.mil  Tue Jan 22 12:45:24 2019
From: shayne.tueller at us.af.mil (TUELLER, SHAYNE R CIV USAF AFMC 519 SMXS/MXDEC)
Date: Tue, 22 Jan 2019 20:45:24 +0000
Subject: [gdal-dev] OGRSpatialReference class
Message-ID: <SN1P111MB03186327FAFA5813003C5E13C6980@SN1P111MB0318.NAMP111.PROD.OUTLOOK.COM>

Hello,

In my app, I'm using the OGRSpatialReference class to get the SRS info for a ESRI shapefile by doing the following...

OGRSpatialReference* ogrSRS = layer->GetSpatialRef();

Is there a way to extract the user visible name (the one not used as a key) for the geographic coordinate system as defined in the prj file associated with the shapefile instead?

Thanks.

Shayne
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190122/433af3ad/attachment.html>

From even.rouault at spatialys.com  Tue Jan 22 13:30:55 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 22 Jan 2019 22:30:55 +0100
Subject: [gdal-dev] RFC 73 (aka gdalsrsbarn) available for review
In-Reply-To: <CAG+h=FELrKx2TRCsEonrWAQzHeDY4NJ5_rSbHixd77S_bf+avg@mail.gmail.com>
References: <11662317.BXslRNNhNX@even-i700> <4219647.nQP843QqHh@even-i700>
 <CAG+h=FELrKx2TRCsEonrWAQzHeDY4NJ5_rSbHixd77S_bf+avg@mail.gmail.com>
Message-ID: <1868607.muDMnzQ3XC@even-i700>

Hi Markus,

Thanks for your feedback

> Regarding WKT2, a remark from a GRASS GIS developer being a user of
> GDAL/PROJ:
> 
> I understand that WKT2 is long overdue and thus should be pushed as much
> and as early as possible. Otherwise it would take a long time and a rather
> long and painful transition process to switch to WKT2. My suggestion is to
> try to keep the painful transition process as short as possible and switch
> to WKT2 ASAP. People like to stick to what they have and what they know, so
> if something better is available, some convincing is needed.

So you would be in favor of making OSRExportToWkt() default to WKT2 ? 
(probably WKT2:2018 while we are at it ? Not just the output of gdalinfo / 
ogrinfo utilities.
I was shy in doing so, because it will likely require updating a good deal of 
GDAL autotests, but oh well...

What annoys me a bit more is the case of XML files like GDAL VRT, OGR VRT or 
.aux.xml that contains serialized SRS and that I wanted to be backward 
compatible with older GDAL versions as much as possible.

> 
> Backwards compatibility wrt reading WKT1 needs to be maintained because
> already existing datasets must still be readable.

Yes this is of course done. Export to older WKT versions will likely still be 
needed for some formats too

> Regarding the BBOX, it should be made clear that the reported extents are a
> suggestion, not a limitation.

The semantics is a bit fuzzy. The WKT standard mentions "Extent describes the 
spatial and/or temporal applicability of a CRS, datum, datum ensemble, 
coordinate operation or Bound CRS". For a CRS, you can go beyond depending on 
the numeric stability of the implementation of the projection method (in case 
of a projected CRS). For a coordinate operation, if it involves a grid, the 
BBOX should be interpreted in a rather strict way (that's what PROJ master 
does internally when computing the most appropriate coordinate transformation 
given all the constraints it is given)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From cord.thomas at gmail.com  Wed Jan 23 12:37:56 2019
From: cord.thomas at gmail.com (Cord Thomas)
Date: Wed, 23 Jan 2019 12:37:56 -0800
Subject: [gdal-dev] Field values are applied to incorrect fields in merging
	2 or more Shapefiles
Message-ID: <CAPjKWtbtF8MjxOSKxsa6xdbMb=sztOfnPzHs-cmL8fQXV79chg@mail.gmail.com>

I am merging 2 or more Shapefiles pulled from OpenStreetMap.   In the
merging, the values of fields are getting applied to the wrong output
fields in the merged shapefile.   I have been looking at this code for a
while and cannot figure out the error.  As a note, my downloaded source
files don't all seem to have the exact same list of fields; not sure why.

As an example, the name field value from the source is assigned to the
maxspeed value of the target.  This happens consistently for an entire
source, so not random.

Code:

def copy_feature_attribute_values(inFeature, outLayerDefn, outFeature):
  for i in range(0, outLayerDefn.GetFieldCount()):
    fieldName = outLayerDefn.GetFieldDefn(i).GetNameRef()
    field = inFeature.GetField(i)
    outFeature.SetField(fieldName, field)


*... There is some code here to create the layer from the first of the*

* shapefiles to be merged*

la_streets_osm_layer_defn = la_streets_osm_layer.GetLayerDefn()

for sub_network_key in sub_network_segments:

  sub_network_src = config['SPATIAL']['BASE_STREET_PATH'] + config['SPATIAL'] \
                  ['CA_Street_Centerlines_OSM'] + \
                  sub_network_key + '/edges/edges.shp'

  sub_network_ds = ogr.Open(sub_network_src)
  sub_network_layer = sub_network_ds.GetLayer()

  for sub_network_feature in sub_network_layer:
    outFeature = ogr.Feature(la_streets_osm_layer_defn)

    copy_feature_attribute_values(sub_network_feature,
la_streets_osm_layer_defn, outFeature)
    newGeom = sub_network_feature.GetGeometryRef()
    outFeature.SetGeometry(newGeom.Clone())

    la_streets_osm_layer.CreateFeature(outFeature)
    outFeature = None
    la_streets_osm_layer.SyncToDisk()

ReplyForward
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190123/fcc1ed5c/attachment.html>

From markus.metz.giswork at gmail.com  Wed Jan 23 12:57:44 2019
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Wed, 23 Jan 2019 21:57:44 +0100
Subject: [gdal-dev] RFC 73 (aka gdalsrsbarn) available for review
In-Reply-To: <1868607.muDMnzQ3XC@even-i700>
References: <11662317.BXslRNNhNX@even-i700> <4219647.nQP843QqHh@even-i700>
 <CAG+h=FELrKx2TRCsEonrWAQzHeDY4NJ5_rSbHixd77S_bf+avg@mail.gmail.com>
 <1868607.muDMnzQ3XC@even-i700>
Message-ID: <CAG+h=FGHi7hoya9tGPL5nsG6yyTfkGt1J6CoV_reTe_tWc8=3g@mail.gmail.com>

On Tue, Jan 22, 2019 at 10:30 PM Even Rouault <even.rouault at spatialys.com>
wrote:
>
> Hi Markus,
>
> Thanks for your feedback
>
> > Regarding WKT2, a remark from a GRASS GIS developer being a user of
> > GDAL/PROJ:
> >
> > I understand that WKT2 is long overdue and thus should be pushed as much
> > and as early as possible. Otherwise it would take a long time and a
rather
> > long and painful transition process to switch to WKT2. My suggestion is
to
> > try to keep the painful transition process as short as possible and
switch
> > to WKT2 ASAP. People like to stick to what they have and what they
know, so
> > if something better is available, some convincing is needed.
>
> So you would be in favor of making OSRExportToWkt() default to WKT2 ?
> (probably WKT2:2018 while we are at it ? Not just the output of gdalinfo /
> ogrinfo utilities.

Yes, no half-hearted changes, make WKT2 the default wherever possible.

> I was shy in doing so, because it will likely require updating a good
deal of
> GDAL autotests, but oh well...

These tests need to be updated at some stage anyway, when WKT2 becomes the
default. OTOH, it is also a question of balancing the workload for the
developer(s)...
>
> What annoys me a bit more is the case of XML files like GDAL VRT, OGR VRT
or
> .aux.xml that contains serialized SRS and that I wanted to be backward
> compatible with older GDAL versions as much as possible.

I guess for the time being there needs to be a switch to select WKT1 or
WKT2. With WKT2 being the default, some backward compatibility switch for
WKT1 would be needed. You have already described "an enhanced version of
exportToWkt() [that] accepts options to specify the exact WKT version used,
...". Maybe a generic config option would help users to switch back to WKT1?
>
> > Regarding the BBOX, it should be made clear that the reported extents
are a
> > suggestion, not a limitation.
>
> The semantics is a bit fuzzy. The WKT standard mentions "Extent describes
the
> spatial and/or temporal applicability of a CRS, datum, datum ensemble,
> coordinate operation or Bound CRS". For a CRS, you can go beyond
depending on
> the numeric stability of the implementation of the projection method (in
case
> of a projected CRS). For a coordinate operation, if it involves a grid,
the
> BBOX should be interpreted in a rather strict way (that's what PROJ master
> does internally when computing the most appropriate coordinate
transformation
> given all the constraints it is given)

The "fuzziness" seems appropriate since numeric instability is usually
occurring gradually and not suddenly when you leave the BBOX. Regarding
grids, a strict interpretation makes sense AFAICT. For CRS, users must
decide (as they already do) about the risk of numeric instability. For
example, Germany is covered by two UTM zones, but even official datasets
are happily mapped country-wide into one UTM zone, with the definition of a
UTM zone being pretty clear. Maybe with the help of a suggested BBOX users
become more aware that a selected CRS is not the best choice.

Markus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190123/74ca6144/attachment.html>

From astewart at terragotech.com  Thu Jan 24 15:34:02 2019
From: astewart at terragotech.com (Alan Stewart)
Date: Thu, 24 Jan 2019 23:34:02 +0000
Subject: [gdal-dev] ubuntu_1804
Message-ID: <BYAPR15MB317574EC8F1E8E3B208FE3C9C49A0@BYAPR15MB3175.namprd15.prod.outlook.com>

The raw log for the ubuntu_1804 Travis job (specifically #15454.1) seems to indicate that the OS is Ubuntu 14.04 . From the build name I assumed it would be Ubuntu 18.04?

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.terragotech.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190124/159769b2/attachment.html>

From craig.destigter at koordinates.com  Thu Jan 24 22:02:03 2019
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Fri, 25 Jan 2019 19:02:03 +1300
Subject: [gdal-dev] ubuntu_1804
In-Reply-To: <BYAPR15MB317574EC8F1E8E3B208FE3C9C49A0@BYAPR15MB3175.namprd15.prod.outlook.com>
References: <BYAPR15MB317574EC8F1E8E3B208FE3C9C49A0@BYAPR15MB3175.namprd15.prod.outlook.com>
Message-ID: <CAF1M8pfeSJHGpByExNFf9GFAARv24O3xw0ZEsYJ=NXcgbnkzkg@mail.gmail.com>

I didnt write it but I had to fiddle with the build scripts quite a bit for
the  pytest refactor. Travis only supports Trusty (recently added Xenial,
though I don't think GDAL is using that yet either.)

The ubuntu_1804 job builds an entire Ubuntu 18.04 install in a chroot
(using debootstrap) inside the travis Trusty environment. It's not terribly
elegant but gets the job done. So the kernel is the travis trusty kernel
but the userland is ubuntu 18.04.

Hope that clarifies things.

Craig de Stigter

On Fri, 25 Jan 2019, 12:34 Alan Stewart, <astewart at terragotech.com> wrote:

> The raw log for the ubuntu_1804 Travis job (specifically #15454.1) seems
> to indicate that the OS is Ubuntu 14.04 . From the build name I assumed it
> would be Ubuntu 18.04?
>
>
>
> Alan Stewart
>
> Senior Software Engineer
>
> *Terra**Go **Technologies*
>
> 3200 Windy Hill Road, Suite 1550W
>
> Atlanta, GA 30339 USA
>
> O.  +1 678.391.9615
>
>
>
> www.terragotech.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190125/9afee13c/attachment.html>

From astewart at terragotech.com  Fri Jan 25 04:41:41 2019
From: astewart at terragotech.com (Alan Stewart)
Date: Fri, 25 Jan 2019 12:41:41 +0000
Subject: [gdal-dev] ubuntu_1804
In-Reply-To: <CAF1M8pfeSJHGpByExNFf9GFAARv24O3xw0ZEsYJ=NXcgbnkzkg@mail.gmail.com>
References: <BYAPR15MB317574EC8F1E8E3B208FE3C9C49A0@BYAPR15MB3175.namprd15.prod.outlook.com>,
 <CAF1M8pfeSJHGpByExNFf9GFAARv24O3xw0ZEsYJ=NXcgbnkzkg@mail.gmail.com>
Message-ID: <A3748008-0FB2-4B95-B984-4FDEB0FA0B85@terragotech.com>

Thanks for the clarification.

On Jan 25, 2019, at 1:05 AM, Craig de Stigter <craig.destigter at koordinates.com<mailto:craig.destigter at koordinates.com>> wrote:

I didnt write it but I had to fiddle with the build scripts quite a bit for the  pytest refactor. Travis only supports Trusty (recently added Xenial, though I don't think GDAL is using that yet either.)

The ubuntu_1804 job builds an entire Ubuntu 18.04 install in a chroot (using debootstrap) inside the travis Trusty environment. It's not terribly elegant but gets the job done. So the kernel is the travis trusty kernel but the userland is ubuntu 18.04.

Hope that clarifies things.

Craig de Stigter

On Fri, 25 Jan 2019, 12:34 Alan Stewart, <astewart at terragotech.com<mailto:astewart at terragotech.com>> wrote:
The raw log for the ubuntu_1804 Travis job (specifically #15454.1) seems to indicate that the OS is Ubuntu 14.04 . From the build name I assumed it would be Ubuntu 18.04?

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190125/f3c02ca3/attachment.html>

From cpaulik at vandersat.com  Fri Jan 25 05:36:23 2019
From: cpaulik at vandersat.com (Christoph Paulik)
Date: Fri, 25 Jan 2019 14:36:23 +0100
Subject: [gdal-dev] gdal_translate of VRT file with overlapping files.
	Target pixel value selection.
Message-ID: <CAHtCBng_=526tGTbX89UsF6w5tcfdzqH2xhNuY4v=Cci0tWCFg@mail.gmail.com>

Hi,

We have a VRT file in which some regions overlap. As far as I can tell
a gdal_translate of the VRT into a GTIFF just takes the value of the
first file it encounters for a given target pixel.

Is there a way to specify an averaging method for such cases e.g. take
the mean, max, min etc.?
If not possible yet would that be a feature that would be of interest?

Cheers,
Christoph

-- 
Christoph Paulik // Head of Infrastructure
VanderSat // Satellite observed water data. Globally. Daily.
Wilhelminastraat 43a, 2011 VK, Haarlem (NL), The Netherlands
M  +31 6 18271928 W  www.vandersat.com

--------------------------------------------------------------------------------------

From adr.andre at laposte.net  Fri Jan 25 08:30:17 2019
From: adr.andre at laposte.net (=?UTF-8?Q?Adrien_Andr=c3=a9?=)
Date: Fri, 25 Jan 2019 11:30:17 -0500
Subject: [gdal-dev] How to create GeoTiff from image and UTM Coordinates
In-Reply-To: <hJ5jsSAeyXsPGR1A5jvnQf8Nhx8M0eMrh2GoYVbpaPvXmv-P5I1sETPDzxiP6R8Mee-AMbJPF-DZBFo--Z_6sut0dTtFnKqNu0kJuQxomjg=@protonmail.com>
References: <hJ5jsSAeyXsPGR1A5jvnQf8Nhx8M0eMrh2GoYVbpaPvXmv-P5I1sETPDzxiP6R8Mee-AMbJPF-DZBFo--Z_6sut0dTtFnKqNu0kJuQxomjg=@protonmail.com>
Message-ID: <49ef5786-7bf8-387d-05d6-d4d4aa29b7b6@laposte.net>

Hi,

you need to know your data spatial resolution and the pixel coordinates 
corresponding to (Easting,Northing).

If GDAL cannot read the .emf file, try using ImageMagick:
convert image.emf my_raster.png

Then, you might try to create a worldfile my_raster.wld (See [0]).
The attached example is for a resolution of 10x10m and if 
(Easting,Northing) is for your image upper-left corner.

Then provide source SRS info and warp:
gdalwarp -s_srs EPSG:32624 -t_srs EPSG:4326 my_raster.png my_raster-geo-tif

[0] https://en.wikipedia.org/wiki/World_file

Hope this helps,

regards

Le 19-01-08 à 05 h 04, gregsmk a écrit :
> Hi,
>
> i am a very beginner in GeoTiff and Georeferencing.
>
> _ i have an image in .emf file format.
> _ i also have these UTM informations:
> Easting,Northing,Zone,Hemisphere
> Exemple: 400000,4379520,24,N
>
> How can i use GDAL to create a geotiff from these informations ?
> (My GeoTiff need to be in wgs84, epsg:4326)
> (i need to use command line tools, no GUI)
>
> i think i need to convert .emf to a file format which can be supported 
> by GDAL such as .bmp ou "standard" .tif. But After ?
> Maybe with gdal_translate and/or gdalwarp, but how ?
>
> Note: i am a very beginner.
>
> Regards
-------------- next part --------------
10
0
0
-10
400005
4379515

From even.rouault at spatialys.com  Fri Jan 25 10:58:55 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 25 Jan 2019 19:58:55 +0100
Subject: [gdal-dev] gdal_translate of VRT file with overlapping files.
	Target pixel value selection.
In-Reply-To: <CAHtCBng_=526tGTbX89UsF6w5tcfdzqH2xhNuY4v=Cci0tWCFg@mail.gmail.com>
References: <CAHtCBng_=526tGTbX89UsF6w5tcfdzqH2xhNuY4v=Cci0tWCFg@mail.gmail.com>
Message-ID: <6677637.e9H812LteZ@even-i700>

On vendredi 25 janvier 2019 14:36:23 CET Christoph Paulik wrote:
> Hi,
> 
> We have a VRT file in which some regions overlap. As far as I can tell
> a gdal_translate of the VRT into a GTIFF just takes the value of the
> first file it encounters for a given target pixel.

Actually, this will be the value of the last (as ordered in the VRT) source 
that covers the target pixel.

> 
> Is there a way to specify an averaging method for such cases e.g. take
> the mean, max, min etc.?
> If not possible yet would that be a feature that would be of interest?

You could do that in two steps:
- for each source, create a VRT from it whose extent is the union of the 
extents, and set a nodata value.
- and then create a VRT of thoses VRT using a derived band:
https://www.gdal.org/gdal_vrttut.html#gdal_vrttut_derived_c
The existing default pixel functions do not cover your need, so you could use 
instead a pixel function written in Python:
https://www.gdal.org/gdal_vrttut.html#gdal_vrttut_derived_python

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Jan 25 11:27:04 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 25 Jan 2019 20:27:04 +0100
Subject: [gdal-dev] RFC 73 (aka gdalsrsbarn) available for review
In-Reply-To: <CADPhZXwpxU+BGPDNzY6pyheYHZvBeKx85kgTHee21FC7oiUXqA@mail.gmail.com>
References: <11662317.BXslRNNhNX@even-i700> <2571377.ue8MHfebd5@even-i700>
 <CADPhZXwpxU+BGPDNzY6pyheYHZvBeKx85kgTHee21FC7oiUXqA@mail.gmail.com>
Message-ID: <4598105.avoq2nA3oD@even-i700>

On vendredi 25 janvier 2019 11:59:55 CET Sean Gillies wrote:
> Hi Even,
> 
> What will the impact be on spatial referencing stored in new datasets? For
> example, will users with GDAL 2.5 run gdal_translate and write WKT2 into a
> GeoTIFF, thereby creating data that can't be opened using GDAL 2.4?
> 

Hi Sean,

re-adding the list, as it is of general interest.

GeoTIFF doesn't use WKT internally ([1]), so this will have no impact, and 
datasets should be interoperable between GDAL < or >= 2.5. More generally, 
after exchanges with a few people, I've decided not to change the global 
behaviour of the exportToWKT() method: it will still export WKT1 for now. So 
the formats that currently rely on WKT to store their SRS (including GDAL and 
OGR .vrt, .aux.xml side car) will be little impacted ([2]). In a few years 
when GDAL >= 2.5 is more widespread, we might reconsider this choice.

I've reflected those changes in:
https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn?
action=diff&version=5&old_version=4

Command line utilities gdalinfo, ogrinfo and gdalsrsinfo will report WKT2 by 
default however as a hint that things have changed. gdalinfo and ogrinfo will 
gain a "-wkt_format wkt1" switch to fallback to current behaviour. gdalsrsinfo 
has already a switch to select the WKT variant), as this should have less 
impact.

Even

[1] Except as an extension of a few SRS that can't be encoded with GeoTIFF 
keys. In that case, GDAL uses a ESRI specific trick that consists in exporting 
the SRS as a ESRI WKT1 string. That behaviour will be unchanged.

[2] I write "little" and not "not" on purpose since the WKT1 export will not 
be strictly identical to previous versions. In particular AXIS, compliant with 
the ordering of the defining authority, will be output

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Sat Jan 26 03:46:52 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 26 Jan 2019 12:46:52 +0100
Subject: [gdal-dev] Motion: adopt RFC 73: Integration of PROJ6 for WKT2,
	late binding capabilities, time-support and unified CRS database
Message-ID: <2048893.zW354aWnOc@even-i700>

Hi,

I move to adopt RFC 73: Integration of PROJ6 for WKT2, late binding 
capabilities, time-support and unified CRS database

https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn

It has been minorly edited since the first version to reflect the evolutions 
on the default WKT version:
- exportToWKT() without options, exporting to WKT1 by default (except for 
Geographic3D CRS where WKT2:2018 will be used). Can be overriden by the 
OSR_WKT_FORMAT configuration option
- gdalinfo, ogrinfo, gdalsrsinfo reporting SRS as WKT2:2018 by default

Starting with my +1

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From howard at hobu.co  Sun Jan 27 07:38:16 2019
From: howard at hobu.co (Howard Butler)
Date: Sun, 27 Jan 2019 09:38:16 -0600
Subject: [gdal-dev] Motion: adopt RFC 73: Integration of PROJ6 for WKT2,
 late binding capabilities, time-support and unified CRS database
In-Reply-To: <2048893.zW354aWnOc@even-i700>
References: <2048893.zW354aWnOc@even-i700>
Message-ID: <BC688B37-3389-4BC7-88ED-873C18056BE9@hobu.co>



> On Jan 26, 2019, at 5:46 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Hi,
> 
> I move to adopt RFC 73: Integration of PROJ6 for WKT2, late binding 
> capabilities, time-support and unified CRS database
> 
> https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn
> 
> It has been minorly edited since the first version to reflect the evolutions 
> on the default WKT version:
> - exportToWKT() without options, exporting to WKT1 by default (except for 
> Geographic3D CRS where WKT2:2018 will be used). Can be overriden by the 
> OSR_WKT_FORMAT configuration option
> - gdalinfo, ogrinfo, gdalsrsinfo reporting SRS as WKT2:2018 by default
> 
> Starting with my +1

+1 

Congratulations on such a huge effort!

Hoawrd


From jukka.rahkonen at maanmittauslaitos.fi  Sun Jan 27 12:16:33 2019
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Sun, 27 Jan 2019 13:16:33 -0700 (MST)
Subject: [gdal-dev] Motion: adopt RFC 73: Integration of PROJ6 for WKT2,
 late binding capabilities, time-support and unified CRS database
In-Reply-To: <2048893.zW354aWnOc@even-i700>
References: <2048893.zW354aWnOc@even-i700>
Message-ID: <1548620193833-0.post@n6.nabble.com>

+1

-Jukka Rahkonen-


Even Rouault-2 wrote
> Hi,
> 
> I move to adopt RFC 73: Integration of PROJ6 for WKT2, late binding 
> capabilities, time-support and unified CRS database
> 
> https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn
> 
> It has been minorly edited since the first version to reflect the
> evolutions 
> on the default WKT version:
> - exportToWKT() without options, exporting to WKT1 by default (except for 
> Geographic3D CRS where WKT2:2018 will be used). Can be overriden by the 
> OSR_WKT_FORMAT configuration option
> - gdalinfo, ogrinfo, gdalsrsinfo reporting SRS as WKT2:2018 by default
> 
> Starting with my +1
> 
> Even





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From mwtoews at gmail.com  Sun Jan 27 13:00:04 2019
From: mwtoews at gmail.com (Mike Taves)
Date: Mon, 28 Jan 2019 10:00:04 +1300
Subject: [gdal-dev] How to create GeoTiff from image and UTM Coordinates
In-Reply-To: <49ef5786-7bf8-387d-05d6-d4d4aa29b7b6@laposte.net>
References: <hJ5jsSAeyXsPGR1A5jvnQf8Nhx8M0eMrh2GoYVbpaPvXmv-P5I1sETPDzxiP6R8Mee-AMbJPF-DZBFo--Z_6sut0dTtFnKqNu0kJuQxomjg=@protonmail.com>
 <49ef5786-7bf8-387d-05d6-d4d4aa29b7b6@laposte.net>
Message-ID: <CAM2FmMpP2ZuLKGrMzM+e-V4h9Z2X-4QyqOwAqVV9U7Gmqa45BA@mail.gmail.com>

On Sat, 26 Jan 2019 at 05:50, Adrien André <adr.andre at laposte.net> wrote:
> If GDAL cannot read the .emf file, try using ImageMagick:
> convert image.emf my_raster.png

This is a good approach, however you will also need to pay attention
to convert's -density and -units options [1] to maintain some sort of
meaningful scale between projected meters and whatever resolution is
used with the original vector image. Also, you can directly write a
.tif file instead of .png to start making a GeoTIFF.

> Then, you might try to create a worldfile my_raster.wld (See [0]).
> The attached example is for a resolution of 10x10m and if
> (Easting,Northing) is for your image upper-left corner.

Be aware that a wordfile references the center of the upper-left cell,
not the corner. An alternative tool that can directly modify a raster
is gdal_edit.py [2], e.g. spatial extent, resolution and CRS. This
tool (as well as GDAL) references the corners of cells, as expected.

After making a georeferenced raster in a projected CRS (e.g. UTM),
then you can create a second raster reprojected in WGS84 using
gdalwarp [3], or just allow GIS software to reproject on-the-fly (e.g.
QGIS does this nicely).

[1] https://imagemagick.org/script/command-line-options.php#density
[2] https://www.gdal.org/gdal_edit.html
[3] https://www.gdal.org/gdalwarp.html

From dmorissette at mapgears.com  Sun Jan 27 17:40:36 2019
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Sun, 27 Jan 2019 20:40:36 -0500
Subject: [gdal-dev] Motion: adopt RFC 73: Integration of PROJ6 for WKT2,
 late binding capabilities, time-support and unified CRS database
In-Reply-To: <2048893.zW354aWnOc@even-i700>
References: <2048893.zW354aWnOc@even-i700>
Message-ID: <5dd2e64f-2940-e841-d1b8-23090f30eef6@mapgears.com>

+1

Daniel


On 2019-01-26 6:46 a.m., Even Rouault wrote:
> Hi,
> 
> I move to adopt RFC 73: Integration of PROJ6 for WKT2, late binding
> capabilities, time-support and unified CRS database
> 
> https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn
> 
> It has been minorly edited since the first version to reflect the evolutions
> on the default WKT version:
> - exportToWKT() without options, exporting to WKT1 by default (except for
> Geographic3D CRS where WKT2:2018 will be used). Can be overriden by the
> OSR_WKT_FORMAT configuration option
> - gdalinfo, ogrinfo, gdalsrsinfo reporting SRS as WKT2:2018 by default
> 
> Starting with my +1
> 
> Even
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From me at komzpa.net  Mon Jan 28 04:37:13 2019
From: me at komzpa.net (=?UTF-8?Q?Darafei_=22Kom=D1=8Fpa=22_Praliaskouski?=)
Date: Mon, 28 Jan 2019 15:37:13 +0300
Subject: [gdal-dev] RFC 73 (aka gdalsrsbarn) available for review
In-Reply-To: <11662317.BXslRNNhNX@even-i700>
References: <11662317.BXslRNNhNX@even-i700>
Message-ID: <CAC8Q8tLLgqN1un_-dCyQGKZj5+6YHxUw6iEYvA3xGjR5+YZYaw@mail.gmail.com>

Hello,

I would like to learn more about geographic 3D CRS. There is ad-hoc
solution in PostGIS ("geography") to handle 3D geographies, and I would
like to learn about alternative ways of signaling that calculations are to
be done on curved surface.

On Wed, Jan 9, 2019 at 6:23 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> RFC 73 "Integration of PROJ6 for WKT2, late binding capabilities,
> time-support
> and unified CRS database" is available for your review at:
>
> https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn
>
> The proposed implementation is at:
> https://github.com/OSGeo/gdal/pull/1185
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Darafei Praliaskouski
Support me: http://patreon.com/komzpa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190128/79b41306/attachment.html>

From even.rouault at spatialys.com  Mon Jan 28 05:02:43 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 Jan 2019 14:02:43 +0100
Subject: [gdal-dev] RFC 73 (aka gdalsrsbarn) available for review
In-Reply-To: <CAC8Q8tLLgqN1un_-dCyQGKZj5+6YHxUw6iEYvA3xGjR5+YZYaw@mail.gmail.com>
References: <11662317.BXslRNNhNX@even-i700>
 <CAC8Q8tLLgqN1un_-dCyQGKZj5+6YHxUw6iEYvA3xGjR5+YZYaw@mail.gmail.com>
Message-ID: <3340988.9epmzyKBSR@even-i700>

Darafei,

A Geographic 3D CRS is a CRS, that is based on a geodetic reference frame 
(geodetic datum), and has a coordinate system with 3 axis: latitude, longitude 
and ellipsoidal height. For example EPSG:4979 is the code for the Geographic 
3D CRS corresponding to "WGS 84" (EPSG:4326 is the corresponding Geographic 2D 
CRS).

This is what is described in OGC 08-015r2 "Abstract Specification Topic 2 
Spatial referencing by coordinates"
https://portal.opengeospatial.org/files/?artifact_id=39049 
in "B.1.2.1 Principal subtypes of coordinate reference system" a) under the 
older term of "geodetic CRS using 3D ellipsoidal coodinates".
The newer revision of this document (expected for public release in the next 
weeks/months) will use the term "geographic 3D CRS".

Even

> Hello,
> 
> I would like to learn more about geographic 3D CRS. There is ad-hoc
> solution in PostGIS ("geography") to handle 3D geographies, and I would
> like to learn about alternative ways of signaling that calculations are to
> be done on curved surface.
> 
> On Wed, Jan 9, 2019 at 6:23 PM Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Hi,
> > 
> > RFC 73 "Integration of PROJ6 for WKT2, late binding capabilities,
> > time-support
> > and unified CRS database" is available for your review at:
> > 
> > https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn
> > 
> > The proposed implementation is at:
> > https://github.com/OSGeo/gdal/pull/1185
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Stefan.Moebius at amdocs.com  Mon Jan 28 07:44:19 2019
From: Stefan.Moebius at amdocs.com (Stefan Moebius)
Date: Mon, 28 Jan 2019 15:44:19 +0000
Subject: [gdal-dev] Perforce issue in coordinate transformations with Gdal
	2.3.2
Message-ID: <AM6PR06MB44538C0A98DC1B66C64A5152ED960@AM6PR06MB4453.eurprd06.prod.outlook.com>

Hi,

As we do lots of coordinate transformations in our (Java based) product, we
have the performance test below in our code base. We recently tried to
upgrade from Gdal 1.9 to 2.3.2, and suddenly our coordinate transformation
tests failed, because they took about twice the time as before.

Should we be calling anything differently when using Gdal 2.x?
Anything else we do wrong?
What could be the problem here?

Regards,
Stefan

The code (extracted from our code base, tested with Java 8 and Junit 4):

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.Random;
import java.util.stream.Collectors;
import java.util.stream.Stream;

import org.gdal.osr.SpatialReference;

public class CoordinateTransformationTest
{
	public CoordinateTransformationTest() {}

	static class SpatialCoordinate
	{
	    public final double northing; /// latitude  or northing in
meters
	    public final double easting;  /// longitude or easting in meters

	    public SpatialCoordinate(double northing, double easting)
	    {
	        this.northing = northing;
	        this.easting = easting;
	    }

	    @Override
	    public boolean equals(Object obj)
	    {
	        if (this == obj)  return  true;
	        if (!(obj instanceof SpatialCoordinate))  return  false;
	        SpatialCoordinate  other = (SpatialCoordinate) obj;
	        return (easting == other.easting) && (northing ==
other.northing);
	    }

	    @Override
	    public int hashCode()
	    {
	        return Double.valueOf(northing).hashCode() ^
Integer.rotateLeft(Double.valueOf(easting).hashCode(), 16);
	    }
	}

    static class CoordinateTransformation
    {
        private /*final*/ org.gdal.osr.CoordinateTransformation
coordinateTransformation;

        private CoordinateTransformation(SpatialReference source,
SpatialReference target)
        {
            this.coordinateTransformation = new
org.gdal.osr.CoordinateTransformation(source, target);
        }

        public synchronized SpatialCoordinate transform(SpatialCoordinate
from)
        {
            // the JNI interface expects a 3d array!
            double[] coordinates3D = { from.easting, from.northing, 0.0 };
            coordinateTransformation.TransformPoint(coordinates3D);
            return new SpatialCoordinate(coordinates3D[1],
coordinates3D[0]);
        }

        public List<SpatialCoordinate> transform(List<SpatialCoordinate>
coordinates)
        {
            if (coordinates.isEmpty())
                return Collections.emptyList();

            double[][] eastNorth = new double[coordinates.size()][2];

            for (int i = 0; i < coordinates.size(); i++)
            {
                final SpatialCoordinate coord = coordinates.get(i);
                eastNorth[i][0] = coord.easting;
                eastNorth[i][1] = coord.northing;
            }

            transform(eastNorth);

            final List<SpatialCoordinate> result = new
ArrayList<>(coordinates.size());
            for (int i = 0; i < coordinates.size(); i++)
                result.add(new SpatialCoordinate(eastNorth[i][1],
eastNorth[i][0]));

            return result;
        }

        private synchronized void transform(double[][] coordinates)
        {
            assert (coordinates != null && coordinates.length > 0 &&
coordinates[0] != null && coordinates[0].length >= 2);
            coordinateTransformation.TransformPoints(coordinates);
        }
    }

    static SpatialReference wgs84UtmNorth(final int utm)
    {
        final int epsg = 32600 + utm;
        final int meridian = -177 + 6 * (utm - 1);

        final String wkt = String
                .format(
                        "PROJCS[\"WGS 84 / UTM zone %dN\",GEOGCS[\"WGS
84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS
84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",
\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degre
e\",0.01745329251994328,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4
326\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_origin\"
,0],PARAMETER[\"central_meridian\",%d],PARAMETER[\"scale_factor\",0.9996],PA
RAMETER[\"false_easting\",500000],PARAMETER[\"false_northing\",0],UNIT[\"met
re\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"Easting\",EAST],AXIS[\"Northing\
",NORTH],AUTHORITY[\"EPSG\",\"%d\"]]",
                        utm, meridian, epsg);

        return new SpatialReference(wkt);
    }

    static SpatialReference wgs84()
    {
    	return new SpatialReference("GEOGCS[\"WGS
84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS
84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",
\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degre
e\",0.01745329251994328,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\",\"4
326\"]]");
    }

    static SpatialReference dhdn3()
    {
    	return new SpatialReference("PROJCS[\"DHDN / 3-degree Gauss zone 2
(deprecated)\",GEOGCS[\"DHDN\",DATUM[\"Deutsches_Hauptdreiecksnetz\",SPHEROI
D[\"Bessel
1841\",6377397.155,299.1528128,AUTHORITY[\"EPSG\",\"7004\"]],AUTHORITY[\"EPS
G\",\"6314\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"d
egree\",0.01745329251994328,AUTHORITY[\"EPSG\",\"9122\"]],AUTHORITY[\"EPSG\"
,\"4314\"]],PROJECTION[\"Transverse_Mercator\"],PARAMETER[\"latitude_of_orig
in\",0],PARAMETER[\"central_meridian\",6],PARAMETER[\"scale_factor\",1],PARA
METER[\"false_easting\",2500000],PARAMETER[\"false_northing\",0],UNIT[\"metr
e\",1,AUTHORITY[\"EPSG\",\"9001\"]],AXIS[\"X\",EAST],AXIS[\"Y\",NORTH],AUTHO
RITY[\"EPSG\",\"31462\"]]");
    }

    static void testBulkSpeed(
            SpatialReference source,
            SpatialReference target,
            SpatialCoordinate center,
            double epsilon)
    {
        final CoordinateTransformation ct = new
CoordinateTransformation(source, target);
        final Random rand = new Random();
        final int size = 1024;

        for (int i = 0; i < size; ++i)
        {
            final List<SpatialCoordinate> coords = Stream //
                    .generate(() -> new SpatialCoordinate(center.northing +
(rand.nextDouble() * 2 - 1) * epsilon, //
                                                          center.easting +
(rand.nextDouble() * 2 - 1) * epsilon)) //
                    .limit(size) //
                    .collect(Collectors.toList());

            @SuppressWarnings("unused")
            List<SpatialCoordinate> results = ct.transform(coords);
        }
    }

    @org.junit.Test(timeout=1000)
    public void testGeogToProjBulkSpeed()
    {
    	SpatialReference utm30 = wgs84UtmNorth(30);
    	SpatialReference wgs84 = wgs84();

        testBulkSpeed(wgs84, utm30, new SpatialCoordinate(40.0, -3.0), 360.0
/ 40000000.0);
    }

    @org.junit.Test(timeout=1500)
    public void testProjToGeogBulkSpeed()
    {
    	SpatialReference utm30 = wgs84UtmNorth(30);
    	SpatialReference wgs84 = wgs84();

        testBulkSpeed(utm30, wgs84, new SpatialCoordinate(0.0, 0.0), 1.0);
    }

    @org.junit.Test(timeout=2000)
    public void testProjToProjBulkSpeed()
    {
    	SpatialReference utm30 = wgs84UtmNorth(30);
    	SpatialReference utm31 = wgs84UtmNorth(31);

        testBulkSpeed(utm30, utm31, new SpatialCoordinate(0.0, 0.0), 1.0);
    }

    @org.junit.Test(timeout=3000)
    public void testProjToProjViaToWgs84BulkSpeed()
    {
    	SpatialReference utm32 = wgs84UtmNorth(32);
    	SpatialReference dhdn3 = dhdn3();

        testBulkSpeed(utm32, dhdn3, new SpatialCoordinate(0.0, 0.0), 1.0);
    }
}
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 2526 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190128/4f643e3b/attachment-0001.bin>
-------------- next part --------------
This email and the information contained herein is proprietary and confidential and subject to the Amdocs Email Terms of Service, which you may review at https://www.amdocs.com/about/email-terms-of-service <https://www.amdocs.com/about/email-terms-of-service>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190128/4f643e3b/attachment-0001.html>

From even.rouault at gmail.com  Mon Jan 28 08:38:31 2019
From: even.rouault at gmail.com (Even Rouault)
Date: Mon, 28 Jan 2019 17:38:31 +0100
Subject: [gdal-dev] Perforce issue in coordinate transformations with
	Gdal 2.3.2
In-Reply-To: <AM6PR06MB44538C0A98DC1B66C64A5152ED960@AM6PR06MB4453.eurprd06.prod.outlook.com>
References: <AM6PR06MB44538C0A98DC1B66C64A5152ED960@AM6PR06MB4453.eurprd06.prod.outlook.com>
Message-ID: <CALxNk+kOxFuZpS0rmXDOGesiVzmdmx7EdfxcrDxxF2X9z1-eJA@mail.gmail.com>

Stefan,

I bet you also upgraded your PROJ version in the process ? I can't think of
a reason in GDAL itself for a performance change. But on the PROJ side,
yes, there might be some explanation
The main one I can see is that in PROJ 4.9.3, the Extended Transverse
Mercator is used by default for UTM, which has probably a higher
computation time. If you define the GDAL configuration option /
environmenet variable OSR_USE_ETMERC to NO, then the older Transverse
Mercator method will be used.
PROJ 5.0 has also undergone major changes that might have increased a bit
the computation time, but I wouldn't expect them to cause a 2x slowdown.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190128/17233761/attachment.html>

From diregola at gmail.com  Mon Jan 28 12:31:49 2019
From: diregola at gmail.com (Margherita Di Leo)
Date: Mon, 28 Jan 2019 21:31:49 +0100
Subject: [gdal-dev] Fwd: GSoC 2019 - Call for mentors and ideas
In-Reply-To: <trinity-44efcfed-22a9-4448-9952-6f57135ec369-1548438763677@3c-app-webde-bs50>
References: <trinity-44efcfed-22a9-4448-9952-6f57135ec369-1548438763677@3c-app-webde-bs50>
Message-ID: <CABa=8QofoEbHzTk6uiSftuEofJCxFkBikz7tCOF3J1L0qnb-oA@mail.gmail.com>

FYI

---------- Messaggio inoltrato ---------
Da: Helmut Kudrnovsky <hellik at web.de>
Data: ven 25 gen 2019 alle 18:58
Oggetto: [GRASS-user] GSoC 2019 - Call for mentors and ideas
A: <discuss at lists.osgeo.org>
CC: <grass-user at lists.osgeo.org>, <qgis-developer at lists.osgeo.org>, <
grass-dev at lists.osgeo.org>, <soc at lists.osgeo.org>


Dear OSGeo community,

It is time for *GSoC* [1] this year, so this is our starting information to
get involved!

If you are willing to act as a mentor [2], fill in this form:

< https://goo.gl/forms/njL27YLWBVensZ3m1 >

If you want to participate proposing ideas, you just need
to send us (admins:  <gsoc-admin at osgeo.org>) the URL for your project's
ideas page.

Remember that every idea should indicate:

    • A title
    • A description
    • 2 mentors
    • A test for the students to submit to your evaluation. The test aims
at evaluating if the student is capable for the project, so please design
the test having in mind the skills required to complete the project.

Time is short, we need to collect all URLs by Feb 4. Here the timeline [3].

Thanks and please forward to your project community.

Your OSGeo GSoC admins

[1] https://summerofcode.withgoogle.com/
[2] https://wiki.osgeo.org/wiki/Google_Summer_of_Code_2019_Administrative
[3] https://summerofcode.withgoogle.com/how-it-works/#timeline
_______________________________________________
grass-user mailing list
grass-user at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/grass-user
-- 
Margherita Di Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190128/06de524f/attachment.html>

From knudsen.thomas at gmail.com  Tue Jan 29 03:12:58 2019
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Tue, 29 Jan 2019 12:12:58 +0100
Subject: [gdal-dev] Perforce issue in coordinate transformations with
	Gdal 2.3.2
In-Reply-To: <CALxNk+kOxFuZpS0rmXDOGesiVzmdmx7EdfxcrDxxF2X9z1-eJA@mail.gmail.com>
References: <AM6PR06MB44538C0A98DC1B66C64A5152ED960@AM6PR06MB4453.eurprd06.prod.outlook.com>
 <CALxNk+kOxFuZpS0rmXDOGesiVzmdmx7EdfxcrDxxF2X9z1-eJA@mail.gmail.com>
Message-ID: <CAH0YoEPvQXE_c0eEWS9tGHq7GTqAdkt=hp-KD-DP52c957eeUw@mail.gmail.com>

Prepare/finalize functions were added to pj_inv & pj_fwd  in PROJ PR #731 (
https://github.com/OSGeo/proj.4/pull/731), in order to resolve ticket #700 (
https://github.com/OSGeo/proj.4/issues/700).
These add some overhead as well but IIRC, more like +15% (much depending on
the actual projection) than +100%.

Den man. 28. jan. 2019 kl. 17.38 skrev Even Rouault <even.rouault at gmail.com
>:

> Stefan,
>
> I bet you also upgraded your PROJ version in the process ? I can't think
> of a reason in GDAL itself for a performance change. But on the PROJ side,
> yes, there might be some explanation
> The main one I can see is that in PROJ 4.9.3, the Extended Transverse
> Mercator is used by default for UTM, which has probably a higher
> computation time. If you define the GDAL configuration option /
> environmenet variable OSR_USE_ETMERC to NO, then the older Transverse
> Mercator method will be used.
> PROJ 5.0 has also undergone major changes that might have increased a bit
> the computation time, but I wouldn't expect them to cause a 2x slowdown.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190129/30e24a42/attachment.html>

From idan at miara.com  Tue Jan 29 03:17:48 2019
From: idan at miara.com (Idan Miara)
Date: Tue, 29 Jan 2019 13:17:48 +0200
Subject: [gdal-dev] Automatically creating an Alpha mask for a RGB raster to
 extract the backgound? (magic wand style)
Message-ID: <CAEDrt38iHh+tudkQTRSA5ER2HDHyS+36rP4gm30eehchBETQ4A@mail.gmail.com>

Hi,

I'm looking for an automated/semi-automated way to remove the plain color
background of some (jpeg compressed) Orthophoto RGB rasters without
NoDataValue or an Alpha band.

Usually I get an image of some specific region with the background as a
plain color (usually it's plain white or plain black but it could be also
almost white or almost black or some other color, or a composition of some
patches that each one is a plain color).

The problem begins when when I want to make a mosaic. It could be hard to
remove those plain regions which should be transparent - setting a single
NoDataValue won't do the trick for most cases and it will also remove some
data pixels.
It gets even worse if the outside was not black and then I use gdal-warp to
transform the CRS and I get extra black filling on the outside.

A simple rule to classify the background pixels - a large cluster of pixels
with exactly (or almost exactly) the same value - a human can tell the
background instantly.

Is there an easy way to create an alpha binary mask band to classify the
background?
Afterwards, is there a tool to crop the image so I'll get a minimal frame
of background?

Kind regards,
Idan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190129/769d9a1c/attachment.html>

From idan at miara.com  Tue Jan 29 03:37:52 2019
From: idan at miara.com (Idan Miara)
Date: Tue, 29 Jan 2019 13:37:52 +0200
Subject: [gdal-dev] gdalos - a simple gdal translate/warp/addo python
 wrapper for raster batch processing
Message-ID: <CAEDrt38X3vtkf5YCUvAAPAVE45AMWqkisNz0duevUZ=u8vbFOQ@mail.gmail.com>

Hi,

I would like to share with you the python tool that I developed for batch
translating/warping/adding overviews.
It uses the gdal python interface and on top of it many rules to automate
the batch processing.
I hope some of you might find it useful.

https://github.com/talos-gis/gdalos

Kind regards,
Idan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190129/512d7881/attachment.html>

From even.rouault at spatialys.com  Tue Jan 29 04:48:31 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 29 Jan 2019 13:48:31 +0100
Subject: [gdal-dev] Automatically creating an Alpha mask for a RGB
	raster to extract the backgound? (magic wand style)
In-Reply-To: <CAEDrt38iHh+tudkQTRSA5ER2HDHyS+36rP4gm30eehchBETQ4A@mail.gmail.com>
References: <CAEDrt38iHh+tudkQTRSA5ER2HDHyS+36rP4gm30eehchBETQ4A@mail.gmail.com>
Message-ID: <1583609.mZxyuKuuFB@even-i700>

> I'm looking for an automated/semi-automated way to remove the plain color
> background of some (jpeg compressed) Orthophoto RGB rasters without
> NoDataValue or an Alpha band.

https://www.gdal.org/nearblack.html ?

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From idan at miara.com  Tue Jan 29 05:49:40 2019
From: idan at miara.com (Idan Miara)
Date: Tue, 29 Jan 2019 15:49:40 +0200
Subject: [gdal-dev] Automatically creating an Alpha mask for a RGB
 raster to extract the backgound? (magic wand style)
In-Reply-To: <1583609.mZxyuKuuFB@even-i700>
References: <CAEDrt38iHh+tudkQTRSA5ER2HDHyS+36rP4gm30eehchBETQ4A@mail.gmail.com>
 <1583609.mZxyuKuuFB@even-i700>
Message-ID: <CAEDrt39U2T_OMm6XJzXJ2pokcy=7rSYVDrAAQZC7mrfKwr149Q@mail.gmail.com>

Hi Even,

Thanks! it does solve most of the problem!

The only issue that I think is left is that nearblack scans from the
borders till it reaches a valid data point and stops there.
So in case of diagonal zigzag cutting (or background in holes) there will
be still background left inside the zigzags or holes.

A solution could be to add a parameter for a different scanning mode,
instead of 4 scans from the borders till the first data point, do one or
two scans (horizontal/vertical) and in each scan cover the whole
scanline/row so we won't miss background trapped inside holes.

What do you think?

Kind regards,
Idan

On Tue, 29 Jan 2019 at 14:48, Even Rouault <even.rouault at spatialys.com>
wrote:

> > I'm looking for an automated/semi-automated way to remove the plain color
> > background of some (jpeg compressed) Orthophoto RGB rasters without
> > NoDataValue or an Alpha band.
>
> https://www.gdal.org/nearblack.html ?
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190129/6f7afa44/attachment-0001.html>

From even.rouault at spatialys.com  Tue Jan 29 07:31:30 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 29 Jan 2019 16:31:30 +0100
Subject: [gdal-dev] Automatically creating an Alpha mask for a RGB
	raster to extract the backgound? (magic wand style)
In-Reply-To: <CAEDrt39U2T_OMm6XJzXJ2pokcy=7rSYVDrAAQZC7mrfKwr149Q@mail.gmail.com>
References: <CAEDrt38iHh+tudkQTRSA5ER2HDHyS+36rP4gm30eehchBETQ4A@mail.gmail.com>
 <1583609.mZxyuKuuFB@even-i700>
 <CAEDrt39U2T_OMm6XJzXJ2pokcy=7rSYVDrAAQZC7mrfKwr149Q@mail.gmail.com>
Message-ID: <2596381.Wv7lWXfJTb@even-i700>

On mardi 29 janvier 2019 15:49:40 CET Idan Miara wrote:
> Hi Even,
> 
> Thanks! it does solve most of the problem!
> 
> The only issue that I think is left is that nearblack scans from the
> borders till it reaches a valid data point and stops there.
> So in case of diagonal zigzag cutting (or background in holes) there will
> be still background left inside the zigzags or holes.
> 
> A solution could be to add a parameter for a different scanning mode,
> instead of 4 scans from the borders till the first data point, do one or
> two scans (horizontal/vertical) and in each scan cover the whole
> scanline/row so we won't miss background trapped inside holes.

Yes an additional flag would be needed ("-interior" ?) since there are 
situations where you could have zero values inside the raster (lakes, etc) 
that you don't want to treat as nodata.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrew.terry at centremaps.co.uk  Wed Jan 30 06:18:53 2019
From: andrew.terry at centremaps.co.uk (andrew terry)
Date: Wed, 30 Jan 2019 07:18:53 -0700 (MST)
Subject: [gdal-dev] ogr2ogr dxf extents
Message-ID: <1548857933291-0.post@n6.nabble.com>

Hi,

Using ogr2ogr -f DXF, is there a dsco (or other) variable to set the initial
zoom extents when the resulting cad file is opened?

Thanks

Andy




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From sankin619 at gmail.com  Wed Jan 30 21:48:26 2019
From: sankin619 at gmail.com (san619)
Date: Wed, 30 Jan 2019 22:48:26 -0700 (MST)
Subject: [gdal-dev] Oracle spatial with gdal
Message-ID: <1548913706083-0.post@n6.nabble.com>

I tried to connect to oracle database using gdal.But im getting an error
ERROR 1: Unable to find driver `oci'.
I have oracle instant client in my machine and i have the oracle_home path
set but im unable to connect.I have checked the drivers list in gdal
sdkshell.I found several databases like postgresql,mssql and many.But i
didnt found oracle driver.How can i install the oracle driver in my gdal.How
can i configure and install oracle driver in my GDAL.Please help me with
this.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu Jan 31 01:28:07 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 31 Jan 2019 10:28:07 +0100
Subject: [gdal-dev] Motion: adopt RFC 73: Integration of PROJ6 for WKT2,
	late binding capabilities, time-support and unified CRS database
In-Reply-To: <2048893.zW354aWnOc@even-i700>
References: <2048893.zW354aWnOc@even-i700>
Message-ID: <12299525.3EW5dD3cUG@even-i700>

Hi,

> I move to adopt RFC 73: Integration of PROJ6 for WKT2, late binding
> capabilities, time-support and unified CRS database
> 
> https://trac.osgeo.org/gdal/wiki/rfc73_proj6_wkt2_srsbarn
> 

I declare this motion passed with +1 from PSC members HowardB, JukkaR, DanielM 
and myself.

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jmckenna at gatewaygeomatics.com  Thu Jan 31 04:44:14 2019
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 31 Jan 2019 08:44:14 -0400
Subject: [gdal-dev] Oracle spatial with gdal
In-Reply-To: <1548913706083-0.post@n6.nabble.com>
References: <1548913706083-0.post@n6.nabble.com>
Message-ID: <594188c9-7e30-30ac-4d55-09c9f6e77c33@gatewaygeomatics.com>

If you are on Windows, you can follow these steps to enable Oracle 
connections through GDAL: 
https://ms4w.com/README_INSTALL.html#steps-to-enable-oracle-10g-or-11g-or-12c-support-in-ms4w

-jeff



On 2019-01-31 1:48 AM, san619 wrote:
> I tried to connect to oracle database using gdal.But im getting an error
> ERROR 1: Unable to find driver `oci'.
> I have oracle instant client in my machine and i have the oracle_home path
> set but im unable to connect.I have checked the drivers list in gdal
> sdkshell.I found several databases like postgresql,mssql and many.But i
> didnt found oracle driver.How can i install the oracle driver in my gdal.How
> can i configure and install oracle driver in my GDAL.Please help me with
> this.
> 
> 

-- 
Jeff McKenna
MapServer Consulting and Training Services
https://gatewaygeomatics.com/

From jef at norbit.de  Thu Jan 31 06:32:01 2019
From: jef at norbit.de (=?utf-8?Q?J=C3=BCrgen_E=2E?= Fischer)
Date: Thu, 31 Jan 2019 15:32:01 +0100
Subject: [gdal-dev] Oracle spatial with gdal
In-Reply-To: <1548913706083-0.post@n6.nabble.com>
References: <1548913706083-0.post@n6.nabble.com>
Message-ID: <20190131143201.j22tcdqsidfjmm6i@norbit.de>

Hi,

On Wed, 30. Jan 2019 at 22:48:26 -0700, san619 wrote:
> I tried to connect to oracle database using gdal.But im getting an error
> ERROR 1: Unable to find driver `oci'.

You're probably missing the oci plugin.

You can install gdal-oracle from osgeo4w[0] - it'll also fetch the instant
client (both are also included in the QGIS standalone installer).


Jürgen

[0] http://osgeo4w.osgeo.org

-- 
Jürgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstraße 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden              https://www.norbit.de
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190131/f66b071d/attachment.sig>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Pflichtangaben
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190131/f66b071d/attachment.ksh>

From andrew.terry at centremaps.co.uk  Thu Jan 31 06:34:59 2019
From: andrew.terry at centremaps.co.uk (andrew terry)
Date: Thu, 31 Jan 2019 07:34:59 -0700 (MST)
Subject: [gdal-dev] ogr2ogr dxf multilinestring as block
Message-ID: <1548945299456-0.post@n6.nabble.com>

Hi,

As per the documentation, i'm seeing mulitlinestring being split up into
LWPOLYLINE elements.

I'd like to make them a block and have tried adding a "blockname" column and
given each multilinestring a unique reference.

I've also tried the DXF_INLINE_BLOCKS set to FALSE option.

Is this possible and if so, is there an example anywhere?

Thanks

Andy



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu Jan 31 12:14:01 2019
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 31 Jan 2019 21:14:01 +0100
Subject: [gdal-dev] RFC 73 merged in master / PROJ master required
Message-ID: <1997413.DfpdaUsREb@even-i700>

All,

RFC 73 work has now been merged into master. Currently GDAL build
and runtime now depends on PROJ master

More details of the past month work at:
https://erouault.blogspot.com/2019/01/srs-barn-raising-8th-report-ready-for.html

Let me underline its conclusion:
"""As all those changes done those last months deeply impact SRS related
functionnality in GDAL and PROJ, we rely now on your careful testing to
spot the inevitable issues that have not yet been detected by their
respective automatic regression test suites. The earlier they are detected,
the easier they will be fixable, in particular if they impact the API."""

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From john.c.cartwright at noaa.gov  Thu Jan 31 15:09:40 2019
From: john.c.cartwright at noaa.gov (John Cartwright - NOAA Federal)
Date: Thu, 31 Jan 2019 16:09:40 -0700
Subject: [gdal-dev] error compiling 2.4.0 on RHEL7
Message-ID: <CAKH7ZWyXjKwTgwrGbj2oh9_4PK_Kv26E5=F-qiRM5bM4FLY8bw@mail.gmail.com>

Hello All,

I'm having trouble compiling 2.4.0 on a RHEL 7.6 machine.  Errors like:

linkhash.c:43:1: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’
before ‘unsigned’
 unsigned long lh_char_hash(const void *k)

Compile options are listed below.  Any suggestions?

Thanks!

--john


./configure --prefix=$CONTRIB \
  --with-png=internal \
  --with-libtiff=internal \
  --with-geotiff=internal \
  --with-jpeg=internal \
  --with-gif=internal \
  --with-pg=/usr/bin/pg_config \
  --with-hdf5=$CONTRIB/lib \
  --with-oci=$ORACLE_HOME \
  --with-oci-include=/usr/include/oracle/11.2/client64 \
  --with-oci-lib=$ORACLE_HOME/lib \
  --with-netcdf \
  --with-libjson-c=internal \
  --with-geos=$CONTRIB/bin/geos-config \
  --with-java=yes
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20190131/f409b740/attachment.html>

