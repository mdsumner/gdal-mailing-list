From yutaxsato at gmail.com  Sun Feb  1 07:38:36 2015
From: yutaxsato at gmail.com (yuta sato)
Date: Mon, 2 Feb 2015 00:38:36 +0900
Subject: [gdal-dev] Bands supported
Message-ID: <CAPqnkJQvJrqwQeC-dJdYO+xEy+99tGvWsAgvB4OVWa5OVFpevQ@mail.gmail.com>

What are the maximum number of bands supported by gdal buildvrt with
separate parameter?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150202/c867c1ab/attachment.html>

From even.rouault at spatialys.com  Sun Feb  1 07:44:39 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 1 Feb 2015 16:44:39 +0100
Subject: [gdal-dev] Bands supported
In-Reply-To: <CAPqnkJQvJrqwQeC-dJdYO+xEy+99tGvWsAgvB4OVWa5OVFpevQ@mail.gmail.com>
References: <CAPqnkJQvJrqwQeC-dJdYO+xEy+99tGvWsAgvB4OVWa5OVFpevQ@mail.gmail.com>
Message-ID: <201502011644.39772.even.rouault@spatialys.com>

Le dimanche 01 f?vrier 2015 16:38:36, yuta sato a ?crit :
> What are the maximum number of bands supported by gdal buildvrt with
> separate parameter?

There's no hard coded limit. In practice, the limit will be the amount of 
memory available and size of the VRT. The opening time of the VRT will also 
slow if it gets too big. But I believe with thousands of input files that 
should still be OK.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From yutaxsato at gmail.com  Sun Feb  1 19:26:22 2015
From: yutaxsato at gmail.com (yuta sato)
Date: Mon, 2 Feb 2015 12:26:22 +0900
Subject: [gdal-dev] buildvrt not working
Message-ID: <CAPqnkJTQVXiwnJNuAWQ=+yTxgBxYoBi9km+KCBnErwrmpaO5MQ@mail.gmail.com>

Dear all:

I have two geotiff files each of 5 bands.

I wanted to make one file consisting of 10 bands.

I tried as follows, but I got only 2 bands in the outfile.

buildvrt -separate -input_file_list infile.txt outfile.tif

Please help me.

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150202/86eaf628/attachment.html>

From yutaxsato at gmail.com  Sun Feb  1 19:29:33 2015
From: yutaxsato at gmail.com (yuta sato)
Date: Mon, 2 Feb 2015 12:29:33 +0900
Subject: [gdal-dev] buildvrt not working
In-Reply-To: <CAPqnkJTQVXiwnJNuAWQ=+yTxgBxYoBi9km+KCBnErwrmpaO5MQ@mail.gmail.com>
References: <CAPqnkJTQVXiwnJNuAWQ=+yTxgBxYoBi9km+KCBnErwrmpaO5MQ@mail.gmail.com>
Message-ID: <CAPqnkJRq3+zuAKRwoiTRWbCuVdGTRQ5xuo-32YsUkj2Ockh2oQ@mail.gmail.com>

Sorry, the outfile name I tried is outfile.vrt, but not  outfile.tif.
However, I used gdaltranslate to convert .vrt into .tif

Additionally, when I see the .vrt file only two bands are written there.

On Mon, Feb 2, 2015 at 12:26 PM, yuta sato <yutaxsato at gmail.com> wrote:

> Dear all:
>
> I have two geotiff files each of 5 bands.
>
> I wanted to make one file consisting of 10 bands.
>
> I tried as follows, but I got only 2 bands in the outfile.
>
> buildvrt -separate -input_file_list infile.txt outfile.tif
>
> Please help me.
>
> Thanks
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150202/20b9c4dc/attachment.html>

From even.rouault at spatialys.com  Mon Feb  2 00:43:11 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 2 Feb 2015 09:43:11 +0100
Subject: [gdal-dev] buildvrt not working
In-Reply-To: <CAPqnkJRq3+zuAKRwoiTRWbCuVdGTRQ5xuo-32YsUkj2Ockh2oQ@mail.gmail.com>
References: <CAPqnkJTQVXiwnJNuAWQ=+yTxgBxYoBi9km+KCBnErwrmpaO5MQ@mail.gmail.com>
	<CAPqnkJRq3+zuAKRwoiTRWbCuVdGTRQ5xuo-32YsUkj2Ockh2oQ@mail.gmail.com>
Message-ID: <201502020943.11827.even.rouault@spatialys.com>

Le lundi 02 f?vrier 2015 04:29:33, yuta sato a ?crit :
> Sorry, the outfile name I tried is outfile.vrt, but not  outfile.tif.
> However, I used gdaltranslate to convert .vrt into .tif

currently gdalbuildvrt -separate only operates on the first band of each 
inputfile. So you have to preliminary steps before to isolate each band into a 
separate file. For example :

gdal_translate in1.tif in1_1.vrt -of vrt -b 1
gdal_translate in1.tif in1_2.vrt -of vrt -b 2
gdal_translate in1.tif in1_3.vrt -of vrt -b 3
gdal_translate in1.tif in1_4.vrt -of vrt -b 4
gdal_translate in1.tif in1_5.vrt -of vrt -b 5

gdal_translate in2.tif in2_1.vrt -of vrt -b 1
gdal_translate in2.tif in2_2.vrt -of vrt -b 2
gdal_translate in2.tif in2_3.vrt -of vrt -b 3
gdal_translate in2.tif in2_4.vrt -of vrt -b 4
gdal_translate in2.tif in2_5.vrt -of vrt -b 5

gdalbuildvrt -separate out.vrt \
                   in1_1.vrt in1_2.vrt in1_3.vrt in1_4.vrt in1_5.vrt \
                   in2_1.vrt in2_2.vrt in2_3.vrt in2_4.vrt in2_5.vrt

> 
> Additionally, when I see the .vrt file only two bands are written there.
> 
> On Mon, Feb 2, 2015 at 12:26 PM, yuta sato <yutaxsato at gmail.com> wrote:
> > Dear all:
> > 
> > I have two geotiff files each of 5 bands.
> > 
> > I wanted to make one file consisting of 10 bands.
> > 
> > I tried as follows, but I got only 2 bands in the outfile.
> > 
> > buildvrt -separate -input_file_list infile.txt outfile.tif
> > 
> > Please help me.
> > 
> > Thanks

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From yutaxsato at gmail.com  Mon Feb  2 00:54:26 2015
From: yutaxsato at gmail.com (yuta sato)
Date: Mon, 2 Feb 2015 17:54:26 +0900
Subject: [gdal-dev] buildvrt not working
In-Reply-To: <201502020943.11827.even.rouault@spatialys.com>
References: <CAPqnkJTQVXiwnJNuAWQ=+yTxgBxYoBi9km+KCBnErwrmpaO5MQ@mail.gmail.com>
	<CAPqnkJRq3+zuAKRwoiTRWbCuVdGTRQ5xuo-32YsUkj2Ockh2oQ@mail.gmail.com>
	<201502020943.11827.even.rouault@spatialys.com>
Message-ID: <CAPqnkJSRRF-m3eo8F4cVfEMEwe7OhxSqR8xxotFc0-pwgzRBMA@mail.gmail.com>

thank you Even Rouault.

On Mon, Feb 2, 2015 at 5:43 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le lundi 02 f?vrier 2015 04:29:33, yuta sato a ?crit :
> > Sorry, the outfile name I tried is outfile.vrt, but not  outfile.tif.
> > However, I used gdaltranslate to convert .vrt into .tif
>
> currently gdalbuildvrt -separate only operates on the first band of each
> inputfile. So you have to preliminary steps before to isolate each band
> into a
> separate file. For example :
>
> gdal_translate in1.tif in1_1.vrt -of vrt -b 1
> gdal_translate in1.tif in1_2.vrt -of vrt -b 2
> gdal_translate in1.tif in1_3.vrt -of vrt -b 3
> gdal_translate in1.tif in1_4.vrt -of vrt -b 4
> gdal_translate in1.tif in1_5.vrt -of vrt -b 5
>
> gdal_translate in2.tif in2_1.vrt -of vrt -b 1
> gdal_translate in2.tif in2_2.vrt -of vrt -b 2
> gdal_translate in2.tif in2_3.vrt -of vrt -b 3
> gdal_translate in2.tif in2_4.vrt -of vrt -b 4
> gdal_translate in2.tif in2_5.vrt -of vrt -b 5
>
> gdalbuildvrt -separate out.vrt \
>                    in1_1.vrt in1_2.vrt in1_3.vrt in1_4.vrt in1_5.vrt \
>                    in2_1.vrt in2_2.vrt in2_3.vrt in2_4.vrt in2_5.vrt
>
> >
> > Additionally, when I see the .vrt file only two bands are written there.
> >
> > On Mon, Feb 2, 2015 at 12:26 PM, yuta sato <yutaxsato at gmail.com> wrote:
> > > Dear all:
> > >
> > > I have two geotiff files each of 5 bands.
> > >
> > > I wanted to make one file consisting of 10 bands.
> > >
> > > I tried as follows, but I got only 2 bands in the outfile.
> > >
> > > buildvrt -separate -input_file_list infile.txt outfile.tif
> > >
> > > Please help me.
> > >
> > > Thanks
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150202/880904c5/attachment.html>

From even.rouault at spatialys.com  Mon Feb  2 03:05:47 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 2 Feb 2015 12:05:47 +0100
Subject: [gdal-dev] GDAL 1.11.2 release planning ?
In-Reply-To: <201501231728.38372.even.rouault@spatialys.com>
References: <201501231728.38372.even.rouault@spatialys.com>
Message-ID: <201502021205.47825.even.rouault@spatialys.com>

Le vendredi 23 janvier 2015 17:28:38, Even Rouault a ?crit :
> Hi,
> 
> GDAL 1.11.1 has been released 4 months ago and since then 48 new bug fixes
> (*) have been done in the 1.11 branch, so it might be worth procuding a
> new release.
> 
> What about cutting a RC in 2 weeks ? That should give time to people having
> things in standby to review and act on them, but if you need more time,
> just tell.

Just as a reminder I intend cutting the RC this friday, unless someone needs 
more time.

> 
> I can take care of the release process if nobody else volunteers.
> 
> Even
> 
> (*)
> http://trac.osgeo.org/gdal/query?status=closed&group=resolution&milestone=1
> .11.2

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gdal at aitchison.me.uk  Mon Feb  2 04:01:08 2015
From: gdal at aitchison.me.uk (Andrew C Aitchison)
Date: Mon, 2 Feb 2015 12:01:08 +0000 (GMT)
Subject: [gdal-dev] RawRasterBand and rotated images ?
Message-ID: <alpine.LRH.2.11.1502021138040.1813@warden.aitchison.me.uk>


I'm preparing to write a readonly driver for a file format where the image 
is an array of bytes, so the RawRasterBand helper class seems appropriate.
However the image data starts at the bottom left and each scanline goes 
up; viewing the data in the conventional (for gdal) manner gives west at 
the top.

I see two possible ways around this with RawRasterBand:

1) apply a rotation in the geotransform matrix; or

2) abuse the pixel and line offsets to rotate the data on the fly,
so that we actually read the pixel values in the standard order
but successive memory accesses are a row apart
(I see that ctable2dataset.cpp, gtxdataset.cpp and 
loslasdataset.cpp use a similar trick to reflect on the fly
but don't see any "raw" drivers that rotate).

The files are small; less than a megabyte and under 1000x1000 pixels.

Both methods risk making a mess of any memory caching, but one passes the 
problem up to the application and two passes it down to the RawRasterBand 
implementation.

Does anyone have advice on whether either of these is OK,
or should I write the driver without the RawRasterBand helper class ?

Thanks,

Andrew C Aitchison

From even.rouault at spatialys.com  Mon Feb  2 04:26:12 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 2 Feb 2015 13:26:12 +0100
Subject: [gdal-dev] RawRasterBand and rotated images ?
In-Reply-To: <alpine.LRH.2.11.1502021138040.1813@warden.aitchison.me.uk>
References: <alpine.LRH.2.11.1502021138040.1813@warden.aitchison.me.uk>
Message-ID: <201502021326.12252.even.rouault@spatialys.com>

Le lundi 02 f?vrier 2015 13:01:08, Andrew C Aitchison a ?crit :
> I'm preparing to write a readonly driver for a file format where the image
> is an array of bytes, so the RawRasterBand helper class seems appropriate.
> However the image data starts at the bottom left and each scanline goes
> up; viewing the data in the conventional (for gdal) manner gives west at
> the top.

Andrew,

This reminds me of how data is organized in the DTED format. The DTED format 
exposes blocks of width = 1 and height = raster_height (so column 
organization).

> 
> I see two possible ways around this with RawRasterBand:
> 
> 1) apply a rotation in the geotransform matrix; or
> 
> 2) abuse the pixel and line offsets to rotate the data on the fly,
> so that we actually read the pixel values in the standard order
> but successive memory accesses are a row apart
> (I see that ctable2dataset.cpp, gtxdataset.cpp and
> loslasdataset.cpp use a similar trick to reflect on the fly
> but don't see any "raw" drivers that rotate).
> 
> The files are small; less than a megabyte and under 1000x1000 pixels.
> 
> Both methods risk making a mess of any memory caching, but one passes the
> problem up to the application and two passes it down to the RawRasterBand
> implementation.
> 
> Does anyone have advice on whether either of these is OK,
> or should I write the driver without the RawRasterBand helper class ?

If you use RawRasterBand with appropriate pixel and line offsets value, for 
each line, the whole file will be read. So you will end up reading 1 GB for a 
1000x1000 images. This might be slow.

So if you don't want to use the RawRasterBand approach, you could :
- use the DTED approach with column-shaped blocks. This minimizes the memory 
consumption but is a bit inefficient when processing line by line, although that 
the GDAL cache block will minimize the inefficiency
- or reserve an array for the full raster and fill it at the first pixel access, 
by doing reorganization from column to lines. And then you can expose line-
shaped blocks efficiently

Even

> 
> Thanks,
> 
> Andrew C Aitchison
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From tkeitt at utexas.edu  Mon Feb  2 12:52:08 2015
From: tkeitt at utexas.edu (Tim Keitt)
Date: Mon, 2 Feb 2015 14:52:08 -0600
Subject: [gdal-dev] Documentation regressions
Message-ID: <CANnL8gqz5zi1kYwAnR9U0rx=gbxZSeQx=SPVKH_Wv+JUCaAtoQ@mail.gmail.com>

I was trying to recall the details of the RasterIO function and notice that
the previous documentation is gone. This seems to have happened in the
transition to the v2 interface. Is there a plan to maintain the C API
documentation?

(I was going to look up the handling of no-data values, scale and offset,
and the meaning of x and y offset arguments.)

THK

-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150202/92610e3f/attachment.html>

From even.rouault at spatialys.com  Mon Feb  2 13:07:45 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 2 Feb 2015 22:07:45 +0100
Subject: [gdal-dev] Documentation regressions
In-Reply-To: <CANnL8gqz5zi1kYwAnR9U0rx=gbxZSeQx=SPVKH_Wv+JUCaAtoQ@mail.gmail.com>
References: <CANnL8gqz5zi1kYwAnR9U0rx=gbxZSeQx=SPVKH_Wv+JUCaAtoQ@mail.gmail.com>
Message-ID: <201502022207.45542.even.rouault@spatialys.com>

Le lundi 02 f?vrier 2015 21:52:08, Tim Keitt a ?crit :
> I was trying to recall the details of the RasterIO function and notice that
> the previous documentation is gone. This seems to have happened in the
> transition to the v2 interface. Is there a plan to maintain the C API
> documentation?
> 
> (I was going to look up the handling of no-data values, scale and offset,
> and the meaning of x and y offset arguments.)

Thanks for notifying. Fixed in r28405. Website will be refreshed in a few 
hours.

> 
> THK

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Feb  2 13:11:28 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 2 Feb 2015 22:11:28 +0100
Subject: [gdal-dev] Documentation regressions
In-Reply-To: <201502022207.45542.even.rouault@spatialys.com>
References: <CANnL8gqz5zi1kYwAnR9U0rx=gbxZSeQx=SPVKH_Wv+JUCaAtoQ@mail.gmail.com>
	<201502022207.45542.even.rouault@spatialys.com>
Message-ID: <201502022211.28559.even.rouault@spatialys.com>

Le lundi 02 f?vrier 2015 22:07:45, Even Rouault a ?crit :
> Le lundi 02 f?vrier 2015 21:52:08, Tim Keitt a ?crit :
> > I was trying to recall the details of the RasterIO function and notice
> > that the previous documentation is gone. This seems to have happened in
> > the transition to the v2 interface. Is there a plan to maintain the C
> > API documentation?
> > 
> > (I was going to look up the handling of no-data values, scale and offset,
> > and the meaning of x and y offset arguments.)
> 
> Thanks for notifying. Fixed in r28405. Website will be refreshed in a few
> hours.

By the way, if you're working with GDAL 1.X, a snapshot of the GDAL 1.11 doc 
is available at http://gdal.org/1.11/index.html, but eyes on GDAL 2.0dev docs 
are certainly appreciated.

> 
> > THK

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jorge at cartodb.com  Mon Feb  2 16:02:47 2015
From: jorge at cartodb.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Tue, 03 Feb 2015 01:02:47 +0100
Subject: [gdal-dev] Use gdal2tiles to generate XYZ cache
Message-ID: <54D01027.5030503@cartodb.com>

Hello,

Looks like gdal2tiles is only able to generate TMS caches (OGC 
standard). Or is there any combination of parameters to generate a tile 
cache in XYZ format? (top-left standard). I've tried with all the 
profiles (-p option), but not getting the desired results... Any hints?

Best regards,

-- 
Jorge Ar?valo

CartoDB
http://cartodb.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150203/1a10bed7/attachment.html>

From petr.pridal at klokantech.com  Mon Feb  2 17:24:19 2015
From: petr.pridal at klokantech.com (Petr Pridal - Klokan Technologies GmbH)
Date: Tue, 3 Feb 2015 02:24:19 +0100
Subject: [gdal-dev] Quick question about gdal2tiles
In-Reply-To: <54C935B4.9060100@cartodb.com>
References: <54C935B4.9060100@cartodb.com>
Message-ID: <CAH-RUCSSunOdhvZHQcZiAj4RCc4nHRhCuiad1HdM5ga65egspg@mail.gmail.com>

Hi Jorge,

rendering of your sample file down to zoomlevel 19 would generate over 2
billion tiles - probably tens of terabytes of data. I guess it is not what
you want to do... Typically the overzooming is done on client side in a
JavaScript viewer or on the tileserver hosting.

The tiling utilities suggests you the native zoom level automatically -
based on the raster resolution of the input.

In case you want to render large datasets composed of multiple files
efficiently I would recommend to try our MapTiler Pro command line utility.
It is significantly faster then GDAL2Tiles and produces optimised and
correct tiles, while handling merging of multiple files, solving issues
with dateline crossing, reprojection and merging of data in different srs,
direct output to MBTiles, OGC WMTS compatible export, and many more
features.

The usage on command line is quite easy:

$ maptiler -o merged_output_dir input1.tif input2.tif input3.tif

Input files can be in the original srs - every extra reprojection degrades
visual quality of the output.
Merging with VRT is not recommend - it slow down the tile rendering, as
there are artificial blocks introduced - it is better for performance to
pass the original files directly.

MapTiler is a complete C/C++ reimplementation of my GDAL2Tiles utility.
There are several significant improvements in the merging and internal
tiling process including multi-thread CPU parallelization and automatic
file size optimisation (PNG color quantization and JPEG tweaks).
Installation is possible with the .deb or .rpm packages or binaries for Mac
OS X or Windows or Docker.

The small file, like your sample mentioned above, can be rendered directly
with the MapTiler Free in the graphical user interface which is available
for download at:http://www.maptiler.com/download/

If you drop us an email we send you also the Pro version with command line
for your free testing.

Best regards,

Petr Pridal, PhD
Klokan Technologies GmbH

On Wed, Jan 28, 2015 at 8:17 PM, Jorge Ar?valo <jorge at cartodb.com> wrote:

>  Hi,
>
> I'm working with a patched version of gdal2tiles, which makes use of
> parallelization:
> http://gis.stackexchange.com/questions/7743/performance-of-google-map-tile-creation-processes/74446#74446
>
> I want to create a complete TMS cache from raster imagery. No assumptions
> about SRS of data type for input data.
>
> I want the tiling process to be as fast as possible (gdal2tiles is really
> heavy process), do you have any recomendations about the data or the
> parameters used?
>
> Right now, I'm doing this
>
> Step 1: build vrt from input images
>
> gdal_vrtmerge.py -o merged.vrt <list of input tif files>
>
> Step 2: build tiles from vrt file
>
> gdal2tiles.py -r cubic -s epsg:XXXX -z 0-19 -w all merged.vrt tms_dir
>
> Even with parallelization, process still feels really slow. Would it be
> faster if, for example, I convert all my input files to epsg:3857? Or if I
> scale them to 8-bit? Or if I use near resampling method instead of cubic?
> (I'm using cubic because I'm working with continuous data: satellite
> images, am I doing it right?).
>
> Any other tips?
>
> Many thanks in advance
>
> Best regards
>
>
> --
> Jorge Ar?valo
>
> CartoDB
> http://cartodb.com/
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Petr Pridal, Ph.D.
(managing director)

Klokan Technologies GmbH
Hofnerstrasse 96, 6314 Unterageri, Switzerland
Tel: +41 (0)41 511 26 12
Email: info at klokantech.com
Web: http://www.klokantech.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150203/53a55f2f/attachment.html>

From petr.pridal at klokantech.com  Mon Feb  2 17:26:32 2015
From: petr.pridal at klokantech.com (Petr Pridal - Klokan Technologies GmbH)
Date: Tue, 3 Feb 2015 02:26:32 +0100
Subject: [gdal-dev] Use gdal2tiles to generate XYZ cache
In-Reply-To: <CAH-RUCQQrfmqjf1eBK5dnSvxS7DQt_ASudGLftX16345Cq4ypg@mail.gmail.com>
References: <54D01027.5030503@cartodb.com>
	<CAH-RUCQQrfmqjf1eBK5dnSvxS7DQt_ASudGLftX16345Cq4ypg@mail.gmail.com>
Message-ID: <CAH-RUCSDtugBSrsHKO50f2OmWDGTnyxEtpTkW47zw+R59LPyjg@mail.gmail.com>

Hi there,

MapTiler generates xyz by default, and back-compatible tms with -tms on the
command line or in the GUI with a switcher in the Advanced options dialog.

Regards,

Petr

On Tue, Feb 3, 2015 at 2:20 AM, Klokan Petr Pridal <klokan at klokan.cz> wrote:

> Hi there,
>
> maptiler generates xyz by default, and back-compatible tms with -tms on
> the command line or in the GUI with switcher in advanced options.
>
> Regards,
>
> Petr
>
> On Tue, Feb 3, 2015 at 1:02 AM, Jorge Ar?valo <jorge at cartodb.com> wrote:
>
>>  Hello,
>>
>> Looks like gdal2tiles is only able to generate TMS caches (OGC standard).
>> Or is there any combination of parameters to generate a tile cache in XYZ
>> format? (top-left standard). I've tried with all the profiles (-p option),
>> but not getting the desired results... Any hints?
>>
>> Best regards,
>>
>> --
>> Jorge Ar?valo
>>
>> CartoDB
>> http://cartodb.com/
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> http://blog.klokan.cz/
> http://www.maptiler.org/
> http://www.oldmapsonline.org/
>



-- 
Petr Pridal, Ph.D.
(managing director)

Klokan Technologies GmbH
Hofnerstrasse 96, 6314 Unterageri, Switzerland
Tel: +41 (0)41 511 26 12
Email: info at klokantech.com
Web: http://www.klokantech.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150203/9efab1e5/attachment-0001.html>

From mani.iiit123 at gmail.com  Mon Feb  2 21:57:32 2015
From: mani.iiit123 at gmail.com (Manikanta Kondeti)
Date: Tue, 3 Feb 2015 11:27:32 +0530
Subject: [gdal-dev] Can we combine all layers of kml into single GeoJSON
Message-ID: <CAMxCCEYSJx97haQ4O+Wn1mAh2s5Yh-_oYMyaUzQXHfvL71QByQ@mail.gmail.com>

Hi,

I am trying to figure out if there is way to combine all layers in kml into
a single Geojson object using ogr2ogr?

One way I figured out is to iteratively traverse through all the layers and
create geojson for each layer. Now the issue it to have all json's into a
single json object?


Need some pointers.

Thanks,
Mani
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150203/eb8e7166/attachment.html>

From ljvillarin30 at gmail.com  Mon Feb  2 22:14:58 2015
From: ljvillarin30 at gmail.com (user_name)
Date: Mon, 2 Feb 2015 22:14:58 -0800 (PST)
Subject: [gdal-dev] Changing color of raster images based on their data
	values - gdal
Message-ID: <1422944098399-5185138.post@n6.nabble.com>

Let's say I have 1 band raster images with Gray Color Interpretation and I
want to change their color based on their data values. Data values -1, will
be Blue, -0.5 will be Light Blue, 0 will be Yellow, 0.5 will be Orange and 1
will be Red. If the data values are <-3000, I want to have that colored
Black and if the data values are >3.402, that should be colored White . Will
that be possible in gdal? One of the color ramp available in qgis is the
RdYlBu. That is what I preferred to use. 

Thank You!



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Changing-color-of-raster-images-based-on-their-data-values-gdal-tp5185138.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mohammedrashadkm at gmail.com  Mon Feb  2 23:02:58 2015
From: mohammedrashadkm at gmail.com (Rashad M)
Date: Tue, 3 Feb 2015 08:02:58 +0100
Subject: [gdal-dev] building gdal on msvc with external zlib
Message-ID: <CANNqv9dg7L6tXZxvxza3s5w8PTL+VuSq7qA98Hh-3ahg3rd80Q@mail.gmail.com>

Hello,

Is it possible to use existing libz when building gdal on msvc. On linux I
can pass --with-libz= during configure. But on windows I couldn't find any
options in the be-alike nmake.opt

Also in gdal/port/Makefile.vc there is zlib includes in EXTRAFLAGS which
points to internal zlib from frmts/zlib

Is there any reason I must you internal zlib with windows?

[1] http://svn.osgeo.org/gdal/trunk/gdal/port/makefile.vc
[2] http://svn.osgeo.org/gdal/trunk/gdal/nmake.opt

-- 
Regards,
   Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150203/a389a6c8/attachment.html>

From even.rouault at spatialys.com  Tue Feb  3 00:43:12 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 3 Feb 2015 09:43:12 +0100
Subject: [gdal-dev] Can we combine all layers of kml into single GeoJSON
In-Reply-To: <CAMxCCEYSJx97haQ4O+Wn1mAh2s5Yh-_oYMyaUzQXHfvL71QByQ@mail.gmail.com>
References: <CAMxCCEYSJx97haQ4O+Wn1mAh2s5Yh-_oYMyaUzQXHfvL71QByQ@mail.gmail.com>
Message-ID: <201502030943.12409.even.rouault@spatialys.com>

Le mardi 03 f?vrier 2015 06:57:32, Manikanta Kondeti a ?crit :
> Hi,
> 
> I am trying to figure out if there is way to combine all layers in kml into
> a single Geojson object using ogr2ogr?
> 
> One way I figured out is to iteratively traverse through all the layers and
> create geojson for each layer. Now the issue it to have all json's into a
> single json object?

Mani,

you could use a VRT union layer to merge all layers into a single one. This is 
documented at http://gdal.org/drv_vrt.html

In your case this would be creating a .vrt file like :

<OGRVRTDataSource>
    <OGRVRTUnionLayer name="unionLayer">
        <OGRVRTLayer name="source1">
            <SrcDataSource>source.kml</SrcDataSource>
            <SrcLayer>name_of_first_kml_layer</SrcLayer>
        </OGRVRTLayer>
        <OGRVRTLayer name="source2">
            <SrcDataSource>source.kml</SrcDataSource>
            <SrcLayer>name_of_second_kml_layer</SrcLayer>
        </OGRVRTLayer>
    </OGRVRTUnionLayer>
</OGRVRTDataSource>

and then use ogr2ogr to convert this .vrt into geojson.

Even

> 
> 
> Need some pointers.
> 
> Thanks,
> Mani

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Feb  3 00:43:54 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 3 Feb 2015 09:43:54 +0100
Subject: [gdal-dev] Changing color of raster images based on their data
	values - gdal
In-Reply-To: <1422944098399-5185138.post@n6.nabble.com>
References: <1422944098399-5185138.post@n6.nabble.com>
Message-ID: <201502030943.55361.even.rouault@spatialys.com>

Le mardi 03 f?vrier 2015 07:14:58, user_name a ?crit :
> Let's say I have 1 band raster images with Gray Color Interpretation and I
> want to change their color based on their data values. Data values -1, will
> be Blue, -0.5 will be Light Blue, 0 will be Yellow, 0.5 will be Orange and
> 1 will be Red. If the data values are <-3000, I want to have that colored
> Black and if the data values are >3.402, that should be colored White .
> Will that be possible in gdal? One of the color ramp available in qgis is
> the RdYlBu. That is what I preferred to use.
> 
> Thank You!

"gdaldem color-relief" is what you want. See http://gdal.org/gdaldem.html

Even

> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Changing-color-of-raster-images-based-
> on-their-data-values-gdal-tp5185138.html Sent from the GDAL - Dev mailing
> list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From yutaxsato at gmail.com  Tue Feb  3 00:47:45 2015
From: yutaxsato at gmail.com (yuta sato)
Date: Tue, 3 Feb 2015 17:47:45 +0900
Subject: [gdal-dev] Confused with Pixels/Lines
Message-ID: <CAPqnkJR8UNPvzu9C1nA-PKwXGcr9ZhDG23+WjV3V=L-Nh7cX_w@mail.gmail.com>

In a North-Up Raster Image with GCS:

The Latitudes increases from bottom to top.
The Longitudes increases from right to left.

The Lines increases from bottom to left.
The Pixels increases from right to left.

Are the above fours statements correct? Please guide me CAREFULLY.

I am talking with the Pixels(569P) and Lines(921L) as gdallocationinfo
provides.

gdallocationinfo  -l_srs wgs84 infile.tif longitude_string latitude_string

****************************************************
Report:

  Location: (569P,921L)

  Band 1:

    Value: 12
*****************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150203/70db0f1c/attachment.html>

From even.rouault at spatialys.com  Tue Feb  3 00:47:35 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 3 Feb 2015 09:47:35 +0100
Subject: [gdal-dev] building gdal on msvc with external zlib
In-Reply-To: <CANNqv9dg7L6tXZxvxza3s5w8PTL+VuSq7qA98Hh-3ahg3rd80Q@mail.gmail.com>
References: <CANNqv9dg7L6tXZxvxza3s5w8PTL+VuSq7qA98Hh-3ahg3rd80Q@mail.gmail.com>
Message-ID: <201502030947.35410.even.rouault@spatialys.com>

Le mardi 03 f?vrier 2015 08:02:58, Rashad M a ?crit :
> Hello,
> 
> Is it possible to use existing libz when building gdal on msvc. On linux I
> can pass --with-libz= during configure. But on windows I couldn't find any
> options in the be-alike nmake.opt
> 
> Also in gdal/port/Makefile.vc there is zlib includes in EXTRAFLAGS which
> points to internal zlib from frmts/zlib
> 
> Is there any reason I must you internal zlib with windows?

Rashad,

indeed it seems the option has never been implemented. I cannot think of a 
particular reason why linking against external zlib wouldn't work. This would 
require mostly editing the relevant makefiles (the one you mention and other 
ones such as in frmts/gtiff/libtiff etc...).

Even

> 
> [1] http://svn.osgeo.org/gdal/trunk/gdal/port/makefile.vc
> [2] http://svn.osgeo.org/gdal/trunk/gdal/nmake.opt

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ljvillarin30 at gmail.com  Tue Feb  3 00:52:29 2015
From: ljvillarin30 at gmail.com (user_name)
Date: Tue, 3 Feb 2015 00:52:29 -0800 (PST)
Subject: [gdal-dev] Change the min and max value of raster image in gdal
Message-ID: <1422953549475-5185176.post@n6.nabble.com>

I want to change the min and max value of my raster images since its min and
max values are always negative(e,g. -1, -1; -3.2, -3.2). What if I want to
change that into -1 as the min value and 1 as the max value? Any idea?
Thanks!



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Change-the-min-and-max-value-of-raster-image-in-gdal-tp5185176.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Tue Feb  3 01:00:26 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 3 Feb 2015 10:00:26 +0100
Subject: [gdal-dev] Confused with Pixels/Lines
In-Reply-To: <CAPqnkJR8UNPvzu9C1nA-PKwXGcr9ZhDG23+WjV3V=L-Nh7cX_w@mail.gmail.com>
References: <CAPqnkJR8UNPvzu9C1nA-PKwXGcr9ZhDG23+WjV3V=L-Nh7cX_w@mail.gmail.com>
Message-ID: <201502031000.27030.even.rouault@spatialys.com>

Le mardi 03 f?vrier 2015 09:47:45, yuta sato a ?crit :
> In a North-Up Raster Image with GCS:
> 
> The Latitudes increases from bottom to top. 

Yes

> The Longitudes increases from right to left.

No, they increase from left to right

> 
> The Lines increases from bottom to left.

No, they increase from top to bottom (contrary to latitudes)

> The Pixels increases from right to left.

No, they increase from left to right

> 
> Are the above fours statements correct? Please guide me CAREFULLY.
> 
> I am talking with the Pixels(569P) and Lines(921L) as gdallocationinfo
> provides.
> 
> gdallocationinfo  -l_srs wgs84 infile.tif longitude_string latitude_string
> 
> ****************************************************
> Report:
> 
>   Location: (569P,921L)
> 
>   Band 1:
> 
>     Value: 12
> *****************************************************

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mohammedrashadkm at gmail.com  Tue Feb  3 06:32:19 2015
From: mohammedrashadkm at gmail.com (Rashad M)
Date: Tue, 3 Feb 2015 15:32:19 +0100
Subject: [gdal-dev] building gdal on msvc with external zlib
In-Reply-To: <201502030947.35410.even.rouault@spatialys.com>
References: <CANNqv9dg7L6tXZxvxza3s5w8PTL+VuSq7qA98Hh-3ahg3rd80Q@mail.gmail.com>
	<201502030947.35410.even.rouault@spatialys.com>
Message-ID: <CANNqv9e9pZqYy50QcJ2QNwC-7s3s3cTrpEaHzYSAx9rdVx_EXA@mail.gmail.com>

On Tue, Feb 3, 2015 at 9:47 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mardi 03 f?vrier 2015 08:02:58, Rashad M a ?crit :
> > Hello,
> >
> > Is it possible to use existing libz when building gdal on msvc. On linux
> I
> > can pass --with-libz= during configure. But on windows I couldn't find
> any
> > options in the be-alike nmake.opt
> >
> > Also in gdal/port/Makefile.vc there is zlib includes in EXTRAFLAGS which
> > points to internal zlib from frmts/zlib
> >
> > Is there any reason I must you internal zlib with windows?
>
> Rashad,
>
> indeed it seems the option has never been implemented. I cannot think of a
> particular reason why linking against external zlib wouldn't work. This
> would
> require mostly editing the relevant makefiles (the one you mention and
> other
> ones such as in frmts/gtiff/libtiff etc...).
>

Ok. Here is a patch attached that can use external zlib when compiling gdal
on windows.


Could you have a look at it and let me if anything missing.

I made the diff against 1.11 branch. below is svn info output


Chemin : .
Chemin racine de la copie de travail : C:\Temp\gdal
URL : http://svn.osgeo.org/gdal/branches/1.11/gdal
Racine du d?p?t : http://svn.osgeo.org/gdal
UUID du d?p?t : f0d54148-0727-0410-94bb-9a71ac55c965
R?vision : 28405
Type de noud : r?pertoire
T?che programm?e : normale
Auteur de la derni?re modification : tamas
R?vision de la derni?re modification : 28397
Date de la derni?re modification: 2015-01-31 23:34:06 +0100 (sam. 31 janv.
2015)



Even
>
> >
> > [1] http://svn.osgeo.org/gdal/trunk/gdal/port/makefile.vc
> > [2] http://svn.osgeo.org/gdal/trunk/gdal/nmake.opt
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Regards,
   Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150203/88c4be37/attachment-0001.html>
-------------- next part --------------
Index: nmake.opt
===================================================================
--- nmake.opt	(r?vision 28405)
+++ nmake.opt	(copie de travail)
@@ -228,6 +228,11 @@
 #JPEGDIR = c:/projects/jpeg-6b
 #JPEG_LIB = $(JPEGDIR)/libjpeg.lib
 
+#if using an external zlib library uncomment the follwing lines
+#ZLIB_EXTERNAL_LIB = 1
+#ZLIB_INC = -IC:\zlib_install\include
+#ZLIB_LIB = C:\zlib_install\lib\zlib.lib
+
 #if using an external png library uncomment the follwing lines
 #PNG_EXTERNAL_LIB = 1
 #PNGDIR = c:/projects/libpng-1.0.8
@@ -591,6 +596,14 @@
 INC	=	-I$(GDAL_ROOT)\port -I$(GDAL_ROOT)\ogr -I$(GDAL_ROOT)\gcore \
 		-I$(GDAL_ROOT)\alg -I$(GDAL_ROOT)\ogr\ogrsf_frmts
 
+!IFDEF ZLIB_EXTERNAL_LIB
+ZLIB_CFLAGS	=  $(ZLIB_INC)
+ZLIB_LFLAGS =  $(ZLIB_LIB)
+!ELSE
+ZLIB_CFLAGS	= 	-I$(GDAL_ROOT)\frmts\zlib
+ZLIB_LFLAGS =  $(GDAL_ROOT)/frmts/zlib/*.obj
+!ENDIF
+        
 !IFDEF MSVC_VLD_DIR
 MSVC_VLD_FLAGS=-DMSVC_USE_VLD=1 -I$(MSVC_VLD_DIR)\include
 !IFDEF WIN64
Index: frmts/png/makefile.vc
===================================================================
--- frmts/png/makefile.vc	(r?vision 28405)
+++ frmts/png/makefile.vc	(copie de travail)
@@ -4,12 +4,10 @@
 OBJ	=	\
 	pngdataset.obj
 
-
-#EXTRAFLAGS = 	-I..\zlib -Ilibpng
 !IFDEF PNG_EXTERNAL_LIB
-EXTRAFLAGS = 	-I..\zlib -I$(PNGDIR)
+EXTRAFLAGS = 	$(ZLIB_CFLAGS) -I$(PNGDIR)
 !ELSE
-EXTRAFLAGS = 	-I..\zlib -Ilibpng
+EXTRAFLAGS = 	$(ZLIB_CFLAGS) -Ilibpng
 !ENDIF
 
 default:	$(OBJ)
Index: frmts/png/libpng/makefile.vc
===================================================================
--- frmts/png/libpng/makefile.vc	(r?vision 28405)
+++ frmts/png/libpng/makefile.vc	(copie de travail)
@@ -23,10 +23,11 @@
 
 GDAL_ROOT	=	..\..\..
 
-EXTRAFLAGS = 	-I..\..\zlib
-
 !INCLUDE $(GDAL_ROOT)\nmake.opt
 
+EXTRAFLAGS = 	$(ZLIB_CFLAGS)
+
+
 default:	$(OBJ)
 	xcopy /D  /Y *.obj ..\..\o
 
Index: frmts/gtiff/libtiff/makefile.vc
===================================================================
--- frmts/gtiff/libtiff/makefile.vc	(r?vision 28405)
+++ frmts/gtiff/libtiff/makefile.vc	(copie de travail)
@@ -41,7 +41,7 @@
 
 GDAL_ROOT	=	..\..\..
 
-EXTRAFLAGS = 	-I..\..\zlib -DZIP_SUPPORT -DPIXARLOG_SUPPORT \
+EXTRAFLAGS =  $(ZLIB_CFLAGS) -DZIP_SUPPORT -DPIXARLOG_SUPPORT \
 		$(JPEG_FLAGS) $(JPEG12_FLAGS) $(LZMA_FLAGS) \
 		$(SOFTWARNFLAGS)
 
Index: frmts/ozi/makefile.vc
===================================================================
--- frmts/ozi/makefile.vc	(r?vision 28405)
+++ frmts/ozi/makefile.vc	(copie de travail)
@@ -5,7 +5,7 @@
 
 !INCLUDE $(GDAL_ROOT)\nmake.opt
 
-EXTRAFLAGS      =        -I..\zlib
+EXTRAFLAGS      =   $(ZLIB_CFLAGS)
 
 default:	$(OBJ)
 	xcopy /D  /Y *.obj ..\o
Index: frmts/iso8211/makefile.vc
===================================================================
--- frmts/iso8211/makefile.vc	(r?vision 28405)
+++ frmts/iso8211/makefile.vc	(copie de travail)
@@ -21,22 +21,22 @@
 all:	default 8211view.exe 8211dump.exe 8211createfromxml.exe
 
 iso8211.dll: $(OBJ) $(CPLLIB) 
-	link /dll $(LDEBUG) $(OBJ) $(CPLLIB)  ../zlib/*.obj \
+	link /dll $(LDEBUG) $(OBJ) $(CPLLIB)  $(ZLIB_LFLAGS) \
 		/out:iso8211.dll /implib:iso8211_i.lib
 	if exist $@.manifest mt -manifest $@.manifest -outputresource:$@;1 
 
 8211view.exe:	8211view.obj $(OBJ) $(CPLLIB) 
-	$(CC) $(CFLAGS) 8211view.obj $(OBJ) $(CPLLIB) $(LIBICONV_LIBRARY) $(CURL_LIB) ../zlib/*.obj /link $(LINKER_FLAGS)
+	$(CC) $(CFLAGS) 8211view.obj $(OBJ) $(CPLLIB) $(LIBICONV_LIBRARY) $(CURL_LIB) $(ZLIB_LFLAGS) /link $(LINKER_FLAGS)
 	if exist $@.manifest mt -manifest $@.manifest -outputresource:$@;1 
 	del 8211view.obj
 
 8211dump.exe:	8211dump.obj $(OBJ) $(CPLLIB) 
-	$(CC) $(CFLAGS) 8211dump.obj $(OBJ) $(CPLLIB) $(LIBICONV_LIBRARY) $(CURL_LIB) ../zlib/*.obj  /link $(LINKER_FLAGS)
+	$(CC) $(CFLAGS) 8211dump.obj $(OBJ) $(CPLLIB) $(LIBICONV_LIBRARY) $(CURL_LIB) $(ZLIB_LFLAGS) /link $(LINKER_FLAGS)
 	if exist $@.manifest mt -manifest $@.manifest -outputresource:$@;1 
 	del 8211dump.obj
 
 8211createfromxml.exe:	8211createfromxml.obj $(OBJ) $(CPLLIB) 
-	$(CC) $(CFLAGS) 8211createfromxml.obj $(OBJ) $(CPLLIB) $(LIBICONV_LIBRARY) $(CURL_LIB) ../zlib/*.obj  /link $(LINKER_FLAGS)
+	$(CC) $(CFLAGS) 8211createfromxml.obj $(OBJ) $(CPLLIB) $(LIBICONV_LIBRARY) $(CURL_LIB) $(ZLIB_LFLAGS)  /link $(LINKER_FLAGS)
 	if exist $@.manifest mt -manifest $@.manifest -outputresource:$@;1 
 	del 8211createfromxml.obj
 
Index: frmts/grib/makefile.vc
===================================================================
--- frmts/grib/makefile.vc	(r?vision 28405)
+++ frmts/grib/makefile.vc	(copie de travail)
@@ -29,4 +29,4 @@
 gdal_GRIB.dll: default
 	link /dll $(LDEBUG) /out:gdal_GRIB.dll \
 		$(OBJ) degrib18\degrib\*.obj degrib18\g2clib-1.0.4\*.obj \
-		$(GDAL_ROOT)/gdal_i.lib $(LINK_PNG) ..\zlib\*.obj
+		$(GDAL_ROOT)/gdal_i.lib $(LINK_PNG) $(ZLIB_LFLAGS)
Index: frmts/rik/makefile.vc
===================================================================
--- frmts/rik/makefile.vc	(r?vision 28405)
+++ frmts/rik/makefile.vc	(copie de travail)
@@ -5,7 +5,7 @@
 
 !INCLUDE $(GDAL_ROOT)\nmake.opt
 
-EXTRAFLAGS = 	-I..\zlib
+EXTRAFLAGS = $(ZLIB_CFLAGS)
 
 default:	$(OBJ)
 	xcopy /D  /Y *.obj ..\o
Index: frmts/georaster/makefile.vc
===================================================================
--- frmts/georaster/makefile.vc	(r?vision 28405)
+++ frmts/georaster/makefile.vc	(copie de travail)
@@ -18,7 +18,7 @@
 !ENDIF
 !ENDIF
 
-EXTRAFLAGS = $(OCI_INCLUDE) -I..\zlib $(JPEG_FLAGS)
+EXTRAFLAGS = $(OCI_INCLUDE) $(ZLIB_CFLAGS) $(JPEG_FLAGS)
 
 default: $(OBJ)
 	xcopy /D  /Y *.obj ..\o
@@ -37,7 +37,7 @@
 plugin:	$(PLUGIN_DLL)
 
 $(PLUGIN_DLL): $(OBJ)
-	link /dll $(LDEBUG) /out:$(PLUGIN_DLL) $(OBJ) $(GDALLIB) $(OCI_LIB) ..\zlib\*.obj \
+	link /dll $(LDEBUG) /out:$(PLUGIN_DLL) $(OBJ) $(GDALLIB) $(OCI_LIB) $(ZLIB_LFLAGS) \
 	..\jpeg\vsidataio.obj $(JPEG_LIB)
 	if exist $(PLUGIN_DLL).manifest mt -manifest $(PLUGIN_DLL).manifest -outputresource:$(PLUGIN_DLL);2
 
Index: frmts/mbtiles/makefile.vc
===================================================================
--- frmts/mbtiles/makefile.vc	(r?vision 28405)
+++ frmts/mbtiles/makefile.vc	(copie de travail)
@@ -1,7 +1,7 @@
 
 OBJ	=	mbtilesdataset.obj
 
-EXTRAFLAGS = -I../../ogr -I../../ogr/ogrsf_frmts/geojson -I../../ogr/ogrsf_frmts/geojson/libjson -I../zlib
+EXTRAFLAGS = -I../../ogr -I../../ogr/ogrsf_frmts/geojson -I../../ogr/ogrsf_frmts/geojson/libjson $(ZLIB_CFLAGS)
 
 GDAL_ROOT	=	..\..
 
Index: port/makefile.vc
===================================================================
--- port/makefile.vc	(r?vision 28405)
+++ port/makefile.vc	(copie de travail)
@@ -57,7 +57,7 @@
 
 !INCLUDE ..\nmake.opt
 
-EXTRAFLAGS	= 	 -I..\frmts\zlib -DHAVE_LIBZ
+EXTRAFLAGS	= 	$(ZLIB_CFLAGS) -DHAVE_LIBZ
 
 !IFDEF LIBICONV_INCLUDE
 EXTRAFLAGS =	$(EXTRAFLAGS) -DHAVE_ICONV $(LIBICONV_CFLAGS) $(LIBICONV_INCLUDE)
Index: ogr/makefile.vc
===================================================================
--- ogr/makefile.vc	(r?vision 28405)
+++ ogr/makefile.vc	(copie de travail)
@@ -1,12 +1,13 @@
 
 LINKFLAGS =	/Zi /MTd
-EXTRAFLAGS =	-DWIN32 -I. -Iogrsf_frmts -Iogrsf_frmts\mem -I..\frmts\gtiff\libgeotiff -I..\frmts\zlib \
-		$(PROJ_FLAGS) $(PROJ_INCLUDE) $(GEOS_CFLAGS)
+EXTRAFLAGS =	-DWIN32 -I. -Iogrsf_frmts -Iogrsf_frmts\mem -I..\frmts\gtiff\libgeotiff $(PROJ_FLAGS)  $(PROJ_INCLUDE) $(GEOS_CFLAGS)
 
 GDAL_ROOT = 	..
 
 !INCLUDE ..\nmake.opt
 
+EXTRAFLAGS = $(EXTRAFLAGS) $(ZLIB_CFLAGS)
+
 !IFDEF INCLUDE_OGR_FRMTS
 EXTRAFLAGS = $(EXTRAFLAGS) -DOGR_ENABLED -DHAVE_MITAB
 !ENDIF

From even.rouault at spatialys.com  Tue Feb  3 07:19:39 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 3 Feb 2015 16:19:39 +0100
Subject: [gdal-dev] building gdal on msvc with external zlib
In-Reply-To: <CANNqv9e9pZqYy50QcJ2QNwC-7s3s3cTrpEaHzYSAx9rdVx_EXA@mail.gmail.com>
References: <CANNqv9dg7L6tXZxvxza3s5w8PTL+VuSq7qA98Hh-3ahg3rd80Q@mail.gmail.com>
	<201502030947.35410.even.rouault@spatialys.com>
	<CANNqv9e9pZqYy50QcJ2QNwC-7s3s3cTrpEaHzYSAx9rdVx_EXA@mail.gmail.com>
Message-ID: <201502031619.39974.even.rouault@spatialys.com>

Le mardi 03 f?vrier 2015 15:32:19, Rashad M a ?crit :
> On Tue, Feb 3, 2015 at 9:47 AM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le mardi 03 f?vrier 2015 08:02:58, Rashad M a ?crit :
> > > Hello,
> > > 
> > > Is it possible to use existing libz when building gdal on msvc. On
> > > linux
> > 
> > I
> > 
> > > can pass --with-libz= during configure. But on windows I couldn't find
> > 
> > any
> > 
> > > options in the be-alike nmake.opt
> > > 
> > > Also in gdal/port/Makefile.vc there is zlib includes in EXTRAFLAGS
> > > which points to internal zlib from frmts/zlib
> > > 
> > > Is there any reason I must you internal zlib with windows?
> > 
> > Rashad,
> > 
> > indeed it seems the option has never been implemented. I cannot think of
> > a particular reason why linking against external zlib wouldn't work.
> > This would
> > require mostly editing the relevant makefiles (the one you mention and
> > other
> > ones such as in frmts/gtiff/libtiff etc...).
> 
> Ok. Here is a patch attached that can use external zlib when compiling gdal
> on windows.
> 
> 
> Could you have a look at it and let me if anything missing.

frmts/makefile.vc should also be edited to avoid building frmts/zlib in case of 
an external zlib

> 
> I made the diff against 1.11 branch. below is svn info output

Ultimately you should do it against trunk.

> 
> 
> Chemin : .
> Chemin racine de la copie de travail : C:\Temp\gdal
> URL : http://svn.osgeo.org/gdal/branches/1.11/gdal
> Racine du d?p?t : http://svn.osgeo.org/gdal
> UUID du d?p?t : f0d54148-0727-0410-94bb-9a71ac55c965
> R?vision : 28405
> Type de noud : r?pertoire
> T?che programm?e : normale
> Auteur de la derni?re modification : tamas
> R?vision de la derni?re modification : 28397
> Date de la derni?re modification: 2015-01-31 23:34:06 +0100 (sam. 31 janv.
> 2015)
> 
> 
> 
> Even
> 
> > > [1] http://svn.osgeo.org/gdal/trunk/gdal/port/makefile.vc
> > > [2] http://svn.osgeo.org/gdal/trunk/gdal/nmake.opt
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andre+joost at nurfuerspam.de  Tue Feb  3 07:26:10 2015
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Tue, 03 Feb 2015 16:26:10 +0100
Subject: [gdal-dev] Change the min and max value of raster image in gdal
In-Reply-To: <1422953549475-5185176.post@n6.nabble.com>
References: <1422953549475-5185176.post@n6.nabble.com>
Message-ID: <maqpgl$t1a$1@ger.gmane.org>

Am 03.02.2015 um 09:52 schrieb user_name:
> I want to change the min and max value of my raster images since its min and
> max values are always negative(e,g. -1, -1; -3.2, -3.2). What if I want to
> change that into -1 as the min value and 1 as the max value? Any idea?
> Thanks!

Add 2.1 to all your values, then divide by 1.1.

HTH,
Andr? Joost





From ljvillarin30 at gmail.com  Tue Feb  3 17:23:43 2015
From: ljvillarin30 at gmail.com (user_name)
Date: Tue, 3 Feb 2015 17:23:43 -0800 (PST)
Subject: [gdal-dev] Change the min and max value of raster image in gdal
In-Reply-To: <maqpgl$t1a$1@ger.gmane.org>
References: <1422953549475-5185176.post@n6.nabble.com>
	<maqpgl$t1a$1@ger.gmane.org>
Message-ID: <1423013023051-5185359.post@n6.nabble.com>

How will I do that in gdal?



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Change-the-min-and-max-value-of-raster-image-in-gdal-tp5185176p5185359.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Wed Feb  4 02:25:37 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 4 Feb 2015 11:25:37 +0100
Subject: [gdal-dev] Motion: Adopt RFC 52 - Strict OGR SQL quoting
In-Reply-To: <201501301741.15202.even.rouault@spatialys.com>
References: <201501301741.15202.even.rouault@spatialys.com>
Message-ID: <201502041125.37357.even.rouault@spatialys.com>

> 
> Motion : I move to adopt RFC 52 - Strict OGR SQL quoting
> 
> http://trac.osgeo.org/gdal/wiki/rfc52_strict_sql_quoting
> 
> Starting with my +1

Hi,

I declare this motion passed with support from JukkaR, DanielM, TamasS and 
myself.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andre+joost at nurfuerspam.de  Wed Feb  4 07:48:29 2015
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Wed, 04 Feb 2015 16:48:29 +0100
Subject: [gdal-dev] Change the min and max value of raster image in gdal
In-Reply-To: <1423013023051-5185359.post@n6.nabble.com>
References: <1422953549475-5185176.post@n6.nabble.com>	<maqpgl$t1a$1@ger.gmane.org>
	<1423013023051-5185359.post@n6.nabble.com>
Message-ID: <matf4q$9ds$1@ger.gmane.org>

Am 04.02.2015 um 02:23 schrieb user_name:
> How will I do that in gdal?
>
>


http://www.gdal.org/gdal_calc.html should be the right tool.

HTH,
Andr? Joost



From petr.pridal at klokantech.com  Thu Feb  5 01:09:34 2015
From: petr.pridal at klokantech.com (Petr Pridal - Klokan Technologies GmbH)
Date: Thu, 5 Feb 2015 10:09:34 +0100
Subject: [gdal-dev] GDAL install and run with a single command
Message-ID: <CAH-RUCTnwSWSi395056MDOf4bBcoxiLrTBv_CmUVRFJaJfw6AQ@mail.gmail.com>

Hi everybody,

If you want to use the latest stable GDAL, for example on a newly installed
Linux machine to do some fast raster data processing with the command-line
utilities, and you need drivers like MrSID, ECW or Kakadu JPEG2000, you may
very probably end up compiling everything yourself. It takes time and you
need to install a lot of dev packages extra to deploy the working
environment.

That's why we created a minimal GDAL in Docker container (about 350MB).

On any computer with Docker installed (see
https://docs.docker.com/installation/#installation) you can download and
run any GDAL utility with a single command.

For example gdalinfo on yourfile.tif stored in local directory:

$ docker run -ti --rm -v $(pwd):/data klokantech/gdal gdalinfo yourfile.tif

and similar with other GDAL tools. For more details see:

https://registry.hub.docker.com/u/klokantech/gdal/

and our blog post:

http://blog.klokantech.com/2015/02/gdal-in-docker-install-run-with-single.html

This Docker container has been made to simplify distribution of MapTiler
Pro, the follower of my GDAL2Tiles, which is now available from
http://www.maptiler.com/.

Thanks everybody for the great work on GDAL!

I hope you find our docker container useful.

Regards,

Petr
-- 
Petr Pridal, Ph.D.
(managing director)

Klokan Technologies GmbH
Hofnerstrasse 96, 6314 Unterageri, Switzerland
Tel: +41 (0)41 511 26 12
Email: info at klokantech.com
Web: http://www.klokantech.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/e3d5a81c/attachment.html>

From even.rouault at spatialys.com  Thu Feb  5 02:21:56 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 5 Feb 2015 11:21:56 +0100
Subject: [gdal-dev] GDAL install and run with a single command
In-Reply-To: <CAH-RUCTnwSWSi395056MDOf4bBcoxiLrTBv_CmUVRFJaJfw6AQ@mail.gmail.com>
References: <CAH-RUCTnwSWSi395056MDOf4bBcoxiLrTBv_CmUVRFJaJfw6AQ@mail.gmail.com>
Message-ID: <201502051121.56963.even.rouault@spatialys.com>

Petr,

I can see that the libgdal in the Docker image is linked against /usr/lib/x86_64-linux-gnu/libtiff.so.4
which happens to be 3.9.6-11. GDAL itself contains a copy of libtiff 4.0.X that will get used,
so you can potentially have a mix of libtiff symbols of different ABI that could lead to crashes if an application
links against libgdal and this external libtiff in the wrong order (this isn't a theoretical concern.
The Orfeo Toolbok folks have suffered from that at a time). This linking against system libtiff 3.X
actually comes from libpodofo AFAICS. To be safe in GDAL and avoid any potential symbol clashes,
you'd better add to the configure options of GDAL :
"--with-hide-internal-symbols=yes --with-libtiff=internal --with-rename-internal-libtiff-symbols"

That's what the UbuntuGIS packagers do.
See for example https://launchpad.net/~ubuntugis/+archive/ubuntu/ubuntugis-unstable/+files/gdal_1.11.0%2Bdfsg-1%7Eexp2%7Etrusty2.debian.tar.gz

That doesn't seem to cause problems in that instance, but this is a bit by chance...

Even

> Hi everybody,
> 
> If you want to use the latest stable GDAL, for example on a newly installed
> Linux machine to do some fast raster data processing with the command-line
> utilities, and you need drivers like MrSID, ECW or Kakadu JPEG2000, you may
> very probably end up compiling everything yourself. It takes time and you
> need to install a lot of dev packages extra to deploy the working
> environment.
> 
> That's why we created a minimal GDAL in Docker container (about 350MB).
> 
> On any computer with Docker installed (see
> https://docs.docker.com/installation/#installation) you can download and
> run any GDAL utility with a single command.
> 
> For example gdalinfo on yourfile.tif stored in local directory:
> 
> $ docker run -ti --rm -v $(pwd):/data klokantech/gdal gdalinfo yourfile.tif
> 
> and similar with other GDAL tools. For more details see:
> 
> https://registry.hub.docker.com/u/klokantech/gdal/
> 
> and our blog post:
> 
> http://blog.klokantech.com/2015/02/gdal-in-docker-install-run-with-single.h
> tml
> 
> This Docker container has been made to simplify distribution of MapTiler
> Pro, the follower of my GDAL2Tiles, which is now available from
> http://www.maptiler.com/.
> 
> Thanks everybody for the great work on GDAL!
> 
> I hope you find our docker container useful.
> 
> Regards,
> 
> Petr

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From petr.pridal at klokantech.com  Thu Feb  5 02:36:07 2015
From: petr.pridal at klokantech.com (Petr Pridal - Klokan Technologies GmbH)
Date: Thu, 5 Feb 2015 11:36:07 +0100
Subject: [gdal-dev] GDAL install and run with a single command
In-Reply-To: <201502051121.56963.even.rouault@spatialys.com>
References: <CAH-RUCTnwSWSi395056MDOf4bBcoxiLrTBv_CmUVRFJaJfw6AQ@mail.gmail.com>
	<201502051121.56963.even.rouault@spatialys.com>
Message-ID: <CAH-RUCQosbQWLMSPg9Er+ARpUL=5D_xZ6fQ4-KUQAKmxXPXdNQ@mail.gmail.com>

Even,

thanks for the tip. The binaries are build against the stable debian. We
will adjust the Dockerfile and republish the binaries soon.

Regards,

Petr

On Thu, Feb 5, 2015 at 11:21 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Petr,
>
> I can see that the libgdal in the Docker image is linked against
> /usr/lib/x86_64-linux-gnu/libtiff.so.4
> which happens to be 3.9.6-11. GDAL itself contains a copy of libtiff 4.0.X
> that will get used,
> so you can potentially have a mix of libtiff symbols of different ABI that
> could lead to crashes if an application
> links against libgdal and this external libtiff in the wrong order (this
> isn't a theoretical concern.
> The Orfeo Toolbok folks have suffered from that at a time). This linking
> against system libtiff 3.X
> actually comes from libpodofo AFAICS. To be safe in GDAL and avoid any
> potential symbol clashes,
> you'd better add to the configure options of GDAL :
> "--with-hide-internal-symbols=yes --with-libtiff=internal
> --with-rename-internal-libtiff-symbols"
>
> That's what the UbuntuGIS packagers do.
> See for example
> https://launchpad.net/~ubuntugis/+archive/ubuntu/ubuntugis-unstable/+files/gdal_1.11.0%2Bdfsg-1%7Eexp2%7Etrusty2.debian.tar.gz
>
> That doesn't seem to cause problems in that instance, but this is a bit by
> chance...
>
> Even
>
> > Hi everybody,
> >
> > If you want to use the latest stable GDAL, for example on a newly
> installed
> > Linux machine to do some fast raster data processing with the
> command-line
> > utilities, and you need drivers like MrSID, ECW or Kakadu JPEG2000, you
> may
> > very probably end up compiling everything yourself. It takes time and you
> > need to install a lot of dev packages extra to deploy the working
> > environment.
> >
> > That's why we created a minimal GDAL in Docker container (about 350MB).
> >
> > On any computer with Docker installed (see
> > https://docs.docker.com/installation/#installation) you can download and
> > run any GDAL utility with a single command.
> >
> > For example gdalinfo on yourfile.tif stored in local directory:
> >
> > $ docker run -ti --rm -v $(pwd):/data klokantech/gdal gdalinfo
> yourfile.tif
> >
> > and similar with other GDAL tools. For more details see:
> >
> > https://registry.hub.docker.com/u/klokantech/gdal/
> >
> > and our blog post:
> >
> >
> http://blog.klokantech.com/2015/02/gdal-in-docker-install-run-with-single.h
> > tml
> >
> > This Docker container has been made to simplify distribution of MapTiler
> > Pro, the follower of my GDAL2Tiles, which is now available from
> > http://www.maptiler.com/.
> >
> > Thanks everybody for the great work on GDAL!
> >
> > I hope you find our docker container useful.
> >
> > Regards,
> >
> > Petr
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Petr Pridal, Ph.D.
(managing director)

Klokan Technologies GmbH
Hofnerstrasse 96, 6314 Unterageri, Switzerland
Tel: +41 (0)41 511 26 12
Email: info at klokantech.com
Web: http://www.klokantech.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/a848fdb9/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Feb  5 03:19:19 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Thu, 5 Feb 2015 11:19:19 +0000 (UTC)
Subject: [gdal-dev] Can we combine all layers of kml into single GeoJSON
References: <CAMxCCEYSJx97haQ4O+Wn1mAh2s5Yh-_oYMyaUzQXHfvL71QByQ@mail.gmail.com>
	<201502030943.12409.even.rouault@spatialys.com>
Message-ID: <loom.20150205T121308-252@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:



> Mani,
> 
> you could use a VRT union layer to merge all layers into a single one.
This is 
> documented at http://gdal.org/drv_vrt.html
> 
> In your case this would be creating a .vrt file like :
> 
> <OGRVRTDataSource>
>     <OGRVRTUnionLayer name="unionLayer">
>         <OGRVRTLayer name="source1">
>             <SrcDataSource>source.kml</SrcDataSource>
>             <SrcLayer>name_of_first_kml_layer</SrcLayer>
>         </OGRVRTLayer>
>         <OGRVRTLayer name="source2">
>             <SrcDataSource>source.kml</SrcDataSource>
>             <SrcLayer>name_of_second_kml_layer</SrcLayer>
>         </OGRVRTLayer>
>     </OGRVRTUnionLayer>
> </OGRVRTDataSource>
> 
> and then use ogr2ogr to convert this .vrt into geojson.

Hi,

Just thinking, but wouldn't it be nice to have "ogrbuildvrt" tool that would
take list of OGR supported layers and outputs a simple vrt with one  union
layer like the one in your example?

-Jukka Rahkonen-


From even.rouault at spatialys.com  Thu Feb  5 04:15:31 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 5 Feb 2015 13:15:31 +0100
Subject: [gdal-dev] Call for discussion on RFC 53: OGR not-null constraints
	and default values
Message-ID: <201502051315.32024.even.rouault@spatialys.com>

Hi,

This is a call for discussion on "RFC 53: OGR not-null constraints and default 
values".

http://trac.osgeo.org/gdal/wiki/rfc53_ogr_notnull_default

Summary :

This RFC addresses handling of NOT NULL constraints and DEFAULT values for OGR 
fields. NOT NULL constraints are useful to maintain basic data integrity and 
are handled by most (all?) drivers that have SQL capabilities. Default fields 
values may be used complementary or independantly of NOT NULL constraints to 
specify the value a field must be assigned to if it is not provided when 
inserting a feature into the layer. 

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mani.iiit123 at gmail.com  Thu Feb  5 04:25:21 2015
From: mani.iiit123 at gmail.com (Manikanta Kondeti)
Date: Thu, 5 Feb 2015 17:55:21 +0530
Subject: [gdal-dev] Can we combine all layers of kml into single GeoJSON
In-Reply-To: <loom.20150205T121308-252@post.gmane.org>
References: <CAMxCCEYSJx97haQ4O+Wn1mAh2s5Yh-_oYMyaUzQXHfvL71QByQ@mail.gmail.com>
	<201502030943.12409.even.rouault@spatialys.com>
	<loom.20150205T121308-252@post.gmane.org>
Message-ID: <CAMxCCEYFEX6ft1uKTNeLYjyTDXxpYZO8pMR0arx_KZm_ai+BfQ@mail.gmail.com>

Yeah that ll be pretty awesome :D

On Thu, Feb 5, 2015 at 4:49 PM, Jukka Rahkonen <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Even Rouault <even.rouault <at> spatialys.com> writes:
>
>
>
> > Mani,
> >
> > you could use a VRT union layer to merge all layers into a single one.
> This is
> > documented at http://gdal.org/drv_vrt.html
> >
> > In your case this would be creating a .vrt file like :
> >
> > <OGRVRTDataSource>
> >     <OGRVRTUnionLayer name="unionLayer">
> >         <OGRVRTLayer name="source1">
> >             <SrcDataSource>source.kml</SrcDataSource>
> >             <SrcLayer>name_of_first_kml_layer</SrcLayer>
> >         </OGRVRTLayer>
> >         <OGRVRTLayer name="source2">
> >             <SrcDataSource>source.kml</SrcDataSource>
> >             <SrcLayer>name_of_second_kml_layer</SrcLayer>
> >         </OGRVRTLayer>
> >     </OGRVRTUnionLayer>
> > </OGRVRTDataSource>
> >
> > and then use ogr2ogr to convert this .vrt into geojson.
>
> Hi,
>
> Just thinking, but wouldn't it be nice to have "ogrbuildvrt" tool that
> would
> take list of OGR supported layers and outputs a simple vrt with one  union
> layer like the one in your example?
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/83620b31/attachment-0001.html>

From Julien.Demaria at acri-st.fr  Thu Feb  5 08:10:47 2015
From: Julien.Demaria at acri-st.fr (Julien Demaria)
Date: Thu, 5 Feb 2015 16:10:47 +0000
Subject: [gdal-dev] NetCDF driver improvements (including groups support)
Message-ID: <3B970FB76033264EB34479EC8A365E1101BA31EA11@vwiexc030.acri.local>

Hi GDAL team,

I've implemented several improvements to the NetCDF driver and I would like to provide them to the community.
Main goal of the changes is to add full support of NetCDF-4 including groups.
NetCDF-4 is the future format of ESA Sentinel-3 products (no groups) and NASA Ocean Color team is switching their L2/L3 products to NetCDF-4 with groups (VIIRS has already switched to the new format in December).
With the changes NASA L2 products geolocation is automatically handled as geolocation arrays and can be reprojected using gdalwarp.

I validated with autotests that nothing is broken in tests netcdf.py (excepting test 13 but see my point 5), netcdf_cf.py and hdf5.py, using NetCDF-3 and 4 libraries.
I've also tested the new functionalities on various NetCDF-4 files.
I think the only possible regression could be for marginal cases where a file was seen directly as a dataset and is now seen as multiple subdatasets (for example if a file has only one var in the top group and has nested groups containing variables), but I think this is not very common.

For the moment I have all these changes in local GIT separated commits on the latest gdal-1.11 branch, let me know what changes you want and how can I provide them.

Changes :

1) Implement full support for NetCDF-4 groups on reading:
    - explore recursively all nested groups to create the subdatasets list
    - subdatasets in nested groups use the /group1/group2/.../groupn/var standard
      NetCDF-4 convention, excepting for variables in the root group which do not
      have a leading slash for backward compatibility
    - when accessing a subdataset using NETCDF:$file:$path, the leading slash is optional
    - global attributes of each nested group are also collected in the GDAL dataset
      metadata, using the same convention /group1/group2/.../groupn/NC_GLOBAL#attr_name,
      excepting for the root group which do not have a leading slash for backward compatibility
    - when searching for a variable containing auxiliary information on the selected subdataset,
      like coordinate variables or grid_mapping, we now also search in parent groups (using NCDFResolveVar).
      I now this is something not specified at this time in the CF convention because CF does not know groups,
      but it seems logical to me to support this: NetCDF-4 specifies that dimensions of a group are
      shared to its nested groups, so associated coordinate variables could be defined as the same level of its
      corresponding dimension.
    - reference to coordinate variables using the "coordinates" attribute support now also absolute paths,
      this allow for example to specify coordinate variables located outside the group of the selected variable
      or its parents. Relative paths could be implemented if needed.
      This feature is used to add support for new NASA Ocean Color L2 products.

2) Implement full read/write support for new NetCDF4 types NC_UBYTE, NC_USHORT, NC_UINT and NC_STRING, only if NETCDF_HAS_NC4 is defined (and only if format=NC4 for writing).
    Support implemented for variables and attributes.
    NC_STRING type is supported for reading (scalar and arrays) attributes and is used for writing only for array attributes (scalar are still written as NC_CHAR).
    If NETCDF_HAS_NC4 is not defined or format!=NC4, NC_STRING array attributes are written as a single NC_CHAR string using the GDAL {v1,v2,...} convention.
    Add missing support for NC_BYTE in CreateBandMetadata() and NC_BYTE/SHORT in NCDFPut1DVar().

3) Add support for new NASA Ocean Color L2 products and ESA Sentinel-3 L1 or
    L2 products which use the NetCDF-4 format (with groups for NASA, see
    http://oceancolor.gsfc.nasa.gov/DOCS/FormatChange.html):
    - NASA products: simulate a "coordinates" variable attribute to detect CF
      geolocation arrays, and set bBottomUp to FALSE
    - ESA products: set bBottomUp to FALSE and disable warning on missing
      Conventions attribute

4) Fix bug #4554 with a more generic solution by disabling the installation of the HDF5 atexit() cleanup routine using H5dont_atexit().
    Previous fix was to call GDALExit() (for the moment only defined gdalwarp.cpp) at the end of every program, which is more painful.

5) Fix implementation of GetScale/Offset to not always return pbSuccess=TRUE.
    Fix CopyMetadata to handle bands with only scale or offset.
    ==> WARNING this commit breaks the autotest netcdf_13 (check for scale/offset = 1.0/0.0 if no scale or offset is available), but for me it is not logical to return always pbSuccess=TRUE

6) Optimize IReadBlock() and CheckData() handling of partial blocks in the x axis by re-using the GDAL block buffer instead of allocating a new temporary buffer for each block.

7) Force block size to 1 scanline for bottom-up datasets if nBlockYSize != 1 instead of raising a fatal error
    ==> Solve a recent problem raised on the mailing list

8) Implement Get/SetUnitType using the standard "units" NetCDF attribute

9) Change default block size to 256x256 instead of scanline (only affect file without NetCDF chunking)
    ==> because I think this is better for a random access to the data, but I'm not sure if the community want this change which could impact performances

10) I've also implemented for my needs support for 1D variables by simulating 2D datasets with only one row (dimensionless variables are not supported for the moment),
       but this breaks backward compatibility because files containing only one variable and associated 1D coordinate variables are now seen as multiple sub datasets...
       and maybe this is not the goal of GDAL to give access to not-2D-raster variables (but sometimes it's useful ;-) )

Thanks for GDAL!

Julien


From jlmcgraw at gmail.com  Thu Feb  5 08:23:06 2015
From: jlmcgraw at gmail.com (Jesse McGraw)
Date: Thu, 5 Feb 2015 11:23:06 -0500
Subject: [gdal-dev] gdalwarp -crop_to_cutline produces non-square pixels for
 EPSG:3857 (GDAL 1.10.1, released 2013/08/26)
Message-ID: <CA+XueT28LVkUqJzmiPYOxiY1WOT1PNDR3697CThO1Oub6qJ15w@mail.gmail.com>

I'm not sure whether this is a real issue or not but I thought I'd bring it
up, at the very least I'll learn something

When using "gdalwarp -cutline <shapefile> -crop_to_cutline" on an input
raster that is in EPSG:3857 with square-pixels the output raster, while
still EPSG:3857, now has non-square pixels.

They're aren't terribly non-square but aren't they supposed to be
completely square for EPSG:3857?

(FWIW, I see that there are tickets opened that reference similar issues
but they reference the output being shifted or the origin changing, not the
pixel shape changing)

For example:
#Warp our original .tif to EPSG:3857
$gdalwarp \
        -t_srs EPSG:3857 \
        -dstalpha \
        -co TILED=YES \
        "ENR_L33.tif" \
        "./2.tif"

#See that the output pixels are square
$gdalinfo 2.tif
Origin = (-8577554.996301921084523,5421778.172851986251771)
Pixel Size = (43.677179501975118,-43.677179501975118)


#Now crop the image to a cutline
$gdalwarp \
        -crop_to_cutline \
        -dstalpha \
        -cutline "./ENR_L33.shp" \
        -cblend 10 \
        -co TILED=YES \
        "./2.tif" \
        "./3.tif"

#See that output pixels are not square
$ gdalinfo 3.tif
Origin = (-8480047.445924906060100,5366376.137789577245712)
Pixel Size = (43.678439570399853,-43.675457269061347)


I ran some more tests and without the -crop_to_cutline option the output
pixels remain square

Thanks,
  Jesse
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/a1cbd5f4/attachment.html>

From eadam at co.lincoln.or.us  Thu Feb  5 08:24:24 2015
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Thu, 5 Feb 2015 08:24:24 -0800
Subject: [gdal-dev] Can we combine all layers of kml into single GeoJSON
In-Reply-To: <loom.20150205T121308-252@post.gmane.org>
References: <CAMxCCEYSJx97haQ4O+Wn1mAh2s5Yh-_oYMyaUzQXHfvL71QByQ@mail.gmail.com>
	<201502030943.12409.even.rouault@spatialys.com>
	<loom.20150205T121308-252@post.gmane.org>
Message-ID: <CACqBkM9R5SMBnkVz7A1_1-uuvo3p9EiGT=x-307D9t7DJhPxyg@mail.gmail.com>

>
> Just thinking, but wouldn't it be nice to have "ogrbuildvrt" tool that would
> take list of OGR supported layers and outputs a simple vrt with one  union
> layer like the one in your example?
>

There is this script,
https://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/ogr2vrt.py,
with details here,
http://lists.osgeo.org/pipermail/gdal-dev/2009-October/022522.html.
It might get you part of the way.

Cheers, Eli

From even.rouault at spatialys.com  Thu Feb  5 08:31:56 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 5 Feb 2015 17:31:56 +0100
Subject: [gdal-dev] Can we combine all layers of kml into single GeoJSON
In-Reply-To: <CACqBkM9R5SMBnkVz7A1_1-uuvo3p9EiGT=x-307D9t7DJhPxyg@mail.gmail.com>
References: <CAMxCCEYSJx97haQ4O+Wn1mAh2s5Yh-_oYMyaUzQXHfvL71QByQ@mail.gmail.com>
	<loom.20150205T121308-252@post.gmane.org>
	<CACqBkM9R5SMBnkVz7A1_1-uuvo3p9EiGT=x-307D9t7DJhPxyg@mail.gmail.com>
Message-ID: <201502051731.56372.even.rouault@spatialys.com>

Le jeudi 05 f?vrier 2015 17:24:24, Eli Adam a ?crit :
> > Just thinking, but wouldn't it be nice to have "ogrbuildvrt" tool that
> > would take list of OGR supported layers and outputs a simple vrt with
> > one  union layer like the one in your example?
> 
> There is this script,
> https://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/ogr2vrt.py,
> with details here,
> http://lists.osgeo.org/pipermail/gdal-dev/2009-October/022522.html.
> It might get you part of the way.

It doesn't deal with UnionLayers. Just for single datasource to VRT. But a 
ogrbuildvrt shouldn't be very difficult to do if someone wants to tackle it.

> 
> Cheers, Eli
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Feb  5 08:36:32 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 5 Feb 2015 17:36:32 +0100
Subject: [gdal-dev] gdalwarp -crop_to_cutline produces non-square pixels
	for EPSG:3857 (GDAL 1.10.1, released 2013/08/26)
In-Reply-To: <CA+XueT28LVkUqJzmiPYOxiY1WOT1PNDR3697CThO1Oub6qJ15w@mail.gmail.com>
References: <CA+XueT28LVkUqJzmiPYOxiY1WOT1PNDR3697CThO1Oub6qJ15w@mail.gmail.com>
Message-ID: <201502051736.32866.even.rouault@spatialys.com>

Le jeudi 05 f?vrier 2015 17:23:06, Jesse McGraw a ?crit :
> I'm not sure whether this is a real issue or not but I thought I'd bring it
> up, at the very least I'll learn something
> 
> When using "gdalwarp -cutline <shapefile> -crop_to_cutline" on an input
> raster that is in EPSG:3857 with square-pixels the output raster, while
> still EPSG:3857, now has non-square pixels.
> 
> They're aren't terribly non-square but aren't they supposed to be
> completely square for EPSG:3857?

Perhaps... Actually the effet of -crop_to_cutline is exactly the same as 
manually passing the target extents with -te with the bounding box of the 
cutline.
It is not possible to both preserve the extent extents and pixel size at the 
same time, due to width and height being integer values.
So, in order to preserve pixel square, the extent should be modified a little 
bit. What is more appropriate is a matter of point of view I think.
You can always re-run "gdalwarp tmp.tif out.tif" where tmp.tif is the output 
of first gdalwarp with -crop_to_cutline. And you should get square pixels I 
believe.

> 
> (FWIW, I see that there are tickets opened that reference similar issues
> but they reference the output being shifted or the origin changing, not the
> pixel shape changing)
> 
> For example:
> #Warp our original .tif to EPSG:3857
> $gdalwarp \
>         -t_srs EPSG:3857 \
>         -dstalpha \
>         -co TILED=YES \
>         "ENR_L33.tif" \
>         "./2.tif"
> 
> #See that the output pixels are square
> $gdalinfo 2.tif
> Origin = (-8577554.996301921084523,5421778.172851986251771)
> Pixel Size = (43.677179501975118,-43.677179501975118)
> 
> 
> #Now crop the image to a cutline
> $gdalwarp \
>         -crop_to_cutline \
>         -dstalpha \
>         -cutline "./ENR_L33.shp" \
>         -cblend 10 \
>         -co TILED=YES \
>         "./2.tif" \
>         "./3.tif"
> 
> #See that output pixels are not square
> $ gdalinfo 3.tif
> Origin = (-8480047.445924906060100,5366376.137789577245712)
> Pixel Size = (43.678439570399853,-43.675457269061347)
> 
> 
> I ran some more tests and without the -crop_to_cutline option the output
> pixels remain square
> 
> Thanks,
>   Jesse

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jlmcgraw at gmail.com  Thu Feb  5 08:41:22 2015
From: jlmcgraw at gmail.com (Jesse McGraw)
Date: Thu, 5 Feb 2015 11:41:22 -0500
Subject: [gdal-dev] gdalwarp -crop_to_cutline produces non-square pixels
 for EPSG:3857 (GDAL 1.10.1, released 2013/08/26)
In-Reply-To: <201502051736.32866.even.rouault@spatialys.com>
References: <CA+XueT28LVkUqJzmiPYOxiY1WOT1PNDR3697CThO1Oub6qJ15w@mail.gmail.com>
	<201502051736.32866.even.rouault@spatialys.com>
Message-ID: <CA+XueT2SQev=tXuWVKXL_z9XVUSdoD5i1i1GbJHQaWJTY9zMmw@mail.gmail.com>

Thanks Even.

I did try re-warping the cropped output to 3857 again and it does produce
square pixels but at the expense of an additional warping operation

I'm just curious why the warping that is part of the -crop_to_cutline
process is changing the pixel ratio while a regular, non-cropping warping
makes them square

On Thu, Feb 5, 2015 at 11:36 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le jeudi 05 f?vrier 2015 17:23:06, Jesse McGraw a ?crit :
> > I'm not sure whether this is a real issue or not but I thought I'd bring
> it
> > up, at the very least I'll learn something
> >
> > When using "gdalwarp -cutline <shapefile> -crop_to_cutline" on an input
> > raster that is in EPSG:3857 with square-pixels the output raster, while
> > still EPSG:3857, now has non-square pixels.
> >
> > They're aren't terribly non-square but aren't they supposed to be
> > completely square for EPSG:3857?
>
> Perhaps... Actually the effet of -crop_to_cutline is exactly the same as
> manually passing the target extents with -te with the bounding box of the
> cutline.
> It is not possible to both preserve the extent extents and pixel size at
> the
> same time, due to width and height being integer values.
> So, in order to preserve pixel square, the extent should be modified a
> little
> bit. What is more appropriate is a matter of point of view I think.
> You can always re-run "gdalwarp tmp.tif out.tif" where tmp.tif is the
> output
> of first gdalwarp with -crop_to_cutline. And you should get square pixels I
> believe.
>
> >
> > (FWIW, I see that there are tickets opened that reference similar issues
> > but they reference the output being shifted or the origin changing, not
> the
> > pixel shape changing)
> >
> > For example:
> > #Warp our original .tif to EPSG:3857
> > $gdalwarp \
> >         -t_srs EPSG:3857 \
> >         -dstalpha \
> >         -co TILED=YES \
> >         "ENR_L33.tif" \
> >         "./2.tif"
> >
> > #See that the output pixels are square
> > $gdalinfo 2.tif
> > Origin = (-8577554.996301921084523,5421778.172851986251771)
> > Pixel Size = (43.677179501975118,-43.677179501975118)
> >
> >
> > #Now crop the image to a cutline
> > $gdalwarp \
> >         -crop_to_cutline \
> >         -dstalpha \
> >         -cutline "./ENR_L33.shp" \
> >         -cblend 10 \
> >         -co TILED=YES \
> >         "./2.tif" \
> >         "./3.tif"
> >
> > #See that output pixels are not square
> > $ gdalinfo 3.tif
> > Origin = (-8480047.445924906060100,5366376.137789577245712)
> > Pixel Size = (43.678439570399853,-43.675457269061347)
> >
> >
> > I ran some more tests and without the -crop_to_cutline option the output
> > pixels remain square
> >
> > Thanks,
> >   Jesse
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/e14b5837/attachment-0001.html>

From even.rouault at spatialys.com  Thu Feb  5 08:50:21 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 5 Feb 2015 17:50:21 +0100
Subject: [gdal-dev] gdalwarp -crop_to_cutline produces non-square pixels
	for EPSG:3857 (GDAL 1.10.1, released 2013/08/26)
In-Reply-To: <CA+XueT2SQev=tXuWVKXL_z9XVUSdoD5i1i1GbJHQaWJTY9zMmw@mail.gmail.com>
References: <CA+XueT28LVkUqJzmiPYOxiY1WOT1PNDR3697CThO1Oub6qJ15w@mail.gmail.com>
	<201502051736.32866.even.rouault@spatialys.com>
	<CA+XueT2SQev=tXuWVKXL_z9XVUSdoD5i1i1GbJHQaWJTY9zMmw@mail.gmail.com>
Message-ID: <201502051750.21757.even.rouault@spatialys.com>

Le jeudi 05 f?vrier 2015 17:41:22, Jesse McGraw a ?crit :
> Thanks Even.
> 
> I did try re-warping the cropped output to 3857 again and it does produce
> square pixels but at the expense of an additional warping operation
> 
> I'm just curious why the warping that is part of the -crop_to_cutline
> process is changing the pixel ratio while a regular, non-cropping warping
> makes them square

I think I explained it in my previous answer. This is because -crop_to_cutline 
uses -te internally, which in the general case doesn't allow pixel squares.
And non-cropping warping doesn't necessarily preserve extent of the output to 
be the same as extent of the input (even in non-reprojection cases). You can 
check that actually by comparing gdalinfo on the temporary and final datasets.
There's no fundamental reason why -crop_to_cutline couldn't produce exact 
square pixels, if people are annoyed by that behaviour. Just someone has to do 
it...

> 
> On Thu, Feb 5, 2015 at 11:36 AM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le jeudi 05 f?vrier 2015 17:23:06, Jesse McGraw a ?crit :
> > > I'm not sure whether this is a real issue or not but I thought I'd
> > > bring
> > 
> > it
> > 
> > > up, at the very least I'll learn something
> > > 
> > > When using "gdalwarp -cutline <shapefile> -crop_to_cutline" on an input
> > > raster that is in EPSG:3857 with square-pixels the output raster, while
> > > still EPSG:3857, now has non-square pixels.
> > > 
> > > They're aren't terribly non-square but aren't they supposed to be
> > > completely square for EPSG:3857?
> > 
> > Perhaps... Actually the effet of -crop_to_cutline is exactly the same as
> > manually passing the target extents with -te with the bounding box of the
> > cutline.
> > It is not possible to both preserve the extent extents and pixel size at
> > the
> > same time, due to width and height being integer values.
> > So, in order to preserve pixel square, the extent should be modified a
> > little
> > bit. What is more appropriate is a matter of point of view I think.
> > You can always re-run "gdalwarp tmp.tif out.tif" where tmp.tif is the
> > output
> > of first gdalwarp with -crop_to_cutline. And you should get square pixels
> > I believe.
> > 
> > > (FWIW, I see that there are tickets opened that reference similar
> > > issues but they reference the output being shifted or the origin
> > > changing, not
> > 
> > the
> > 
> > > pixel shape changing)
> > > 
> > > For example:
> > > #Warp our original .tif to EPSG:3857
> > > $gdalwarp \
> > > 
> > >         -t_srs EPSG:3857 \
> > >         -dstalpha \
> > >         -co TILED=YES \
> > >         "ENR_L33.tif" \
> > >         "./2.tif"
> > > 
> > > #See that the output pixels are square
> > > $gdalinfo 2.tif
> > > Origin = (-8577554.996301921084523,5421778.172851986251771)
> > > Pixel Size = (43.677179501975118,-43.677179501975118)
> > > 
> > > 
> > > #Now crop the image to a cutline
> > > $gdalwarp \
> > > 
> > >         -crop_to_cutline \
> > >         -dstalpha \
> > >         -cutline "./ENR_L33.shp" \
> > >         -cblend 10 \
> > >         -co TILED=YES \
> > >         "./2.tif" \
> > >         "./3.tif"
> > > 
> > > #See that output pixels are not square
> > > $ gdalinfo 3.tif
> > > Origin = (-8480047.445924906060100,5366376.137789577245712)
> > > Pixel Size = (43.678439570399853,-43.675457269061347)
> > > 
> > > 
> > > I ran some more tests and without the -crop_to_cutline option the
> > > output pixels remain square
> > > 
> > > Thanks,
> > > 
> > >   Jesse
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jlmcgraw at gmail.com  Thu Feb  5 08:57:02 2015
From: jlmcgraw at gmail.com (Jesse McGraw)
Date: Thu, 5 Feb 2015 11:57:02 -0500
Subject: [gdal-dev] gdalwarp -crop_to_cutline produces non-square pixels
 for EPSG:3857 (GDAL 1.10.1, released 2013/08/26)
In-Reply-To: <201502051750.21757.even.rouault@spatialys.com>
References: <CA+XueT28LVkUqJzmiPYOxiY1WOT1PNDR3697CThO1Oub6qJ15w@mail.gmail.com>
	<201502051736.32866.even.rouault@spatialys.com>
	<CA+XueT2SQev=tXuWVKXL_z9XVUSdoD5i1i1GbJHQaWJTY9zMmw@mail.gmail.com>
	<201502051750.21757.even.rouault@spatialys.com>
Message-ID: <CA+XueT0f10r=Ox4ZOcRGH5sysN5rvL=bgLzDBzU_YjE2OqcSjw@mail.gmail.com>

Thank you, Even.  For now I'll proceed with the additional warping.

Just for my education: are square pixels a requirement for EPSG:3857?

On Thu, Feb 5, 2015 at 11:50 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le jeudi 05 f?vrier 2015 17:41:22, Jesse McGraw a ?crit :
> > Thanks Even.
> >
> > I did try re-warping the cropped output to 3857 again and it does produce
> > square pixels but at the expense of an additional warping operation
> >
> > I'm just curious why the warping that is part of the -crop_to_cutline
> > process is changing the pixel ratio while a regular, non-cropping warping
> > makes them square
>
> I think I explained it in my previous answer. This is because
> -crop_to_cutline
> uses -te internally, which in the general case doesn't allow pixel squares.
> And non-cropping warping doesn't necessarily preserve extent of the output
> to
> be the same as extent of the input (even in non-reprojection cases). You
> can
> check that actually by comparing gdalinfo on the temporary and final
> datasets.
> There's no fundamental reason why -crop_to_cutline couldn't produce exact
> square pixels, if people are annoyed by that behaviour. Just someone has
> to do
> it...
>
> >
> > On Thu, Feb 5, 2015 at 11:36 AM, Even Rouault <
> even.rouault at spatialys.com>
> >
> > wrote:
> > > Le jeudi 05 f?vrier 2015 17:23:06, Jesse McGraw a ?crit :
> > > > I'm not sure whether this is a real issue or not but I thought I'd
> > > > bring
> > >
> > > it
> > >
> > > > up, at the very least I'll learn something
> > > >
> > > > When using "gdalwarp -cutline <shapefile> -crop_to_cutline" on an
> input
> > > > raster that is in EPSG:3857 with square-pixels the output raster,
> while
> > > > still EPSG:3857, now has non-square pixels.
> > > >
> > > > They're aren't terribly non-square but aren't they supposed to be
> > > > completely square for EPSG:3857?
> > >
> > > Perhaps... Actually the effet of -crop_to_cutline is exactly the same
> as
> > > manually passing the target extents with -te with the bounding box of
> the
> > > cutline.
> > > It is not possible to both preserve the extent extents and pixel size
> at
> > > the
> > > same time, due to width and height being integer values.
> > > So, in order to preserve pixel square, the extent should be modified a
> > > little
> > > bit. What is more appropriate is a matter of point of view I think.
> > > You can always re-run "gdalwarp tmp.tif out.tif" where tmp.tif is the
> > > output
> > > of first gdalwarp with -crop_to_cutline. And you should get square
> pixels
> > > I believe.
> > >
> > > > (FWIW, I see that there are tickets opened that reference similar
> > > > issues but they reference the output being shifted or the origin
> > > > changing, not
> > >
> > > the
> > >
> > > > pixel shape changing)
> > > >
> > > > For example:
> > > > #Warp our original .tif to EPSG:3857
> > > > $gdalwarp \
> > > >
> > > >         -t_srs EPSG:3857 \
> > > >         -dstalpha \
> > > >         -co TILED=YES \
> > > >         "ENR_L33.tif" \
> > > >         "./2.tif"
> > > >
> > > > #See that the output pixels are square
> > > > $gdalinfo 2.tif
> > > > Origin = (-8577554.996301921084523,5421778.172851986251771)
> > > > Pixel Size = (43.677179501975118,-43.677179501975118)
> > > >
> > > >
> > > > #Now crop the image to a cutline
> > > > $gdalwarp \
> > > >
> > > >         -crop_to_cutline \
> > > >         -dstalpha \
> > > >         -cutline "./ENR_L33.shp" \
> > > >         -cblend 10 \
> > > >         -co TILED=YES \
> > > >         "./2.tif" \
> > > >         "./3.tif"
> > > >
> > > > #See that output pixels are not square
> > > > $ gdalinfo 3.tif
> > > > Origin = (-8480047.445924906060100,5366376.137789577245712)
> > > > Pixel Size = (43.678439570399853,-43.675457269061347)
> > > >
> > > >
> > > > I ran some more tests and without the -crop_to_cutline option the
> > > > output pixels remain square
> > > >
> > > > Thanks,
> > > >
> > > >   Jesse
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/74172fb9/attachment.html>

From even.rouault at spatialys.com  Thu Feb  5 09:01:05 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 5 Feb 2015 18:01:05 +0100
Subject: [gdal-dev] gdalwarp -crop_to_cutline produces non-square pixels
	for EPSG:3857 (GDAL 1.10.1, released 2013/08/26)
In-Reply-To: <CA+XueT0f10r=Ox4ZOcRGH5sysN5rvL=bgLzDBzU_YjE2OqcSjw@mail.gmail.com>
References: <CA+XueT28LVkUqJzmiPYOxiY1WOT1PNDR3697CThO1Oub6qJ15w@mail.gmail.com>
	<201502051750.21757.even.rouault@spatialys.com>
	<CA+XueT0f10r=Ox4ZOcRGH5sysN5rvL=bgLzDBzU_YjE2OqcSjw@mail.gmail.com>
Message-ID: <201502051801.05765.even.rouault@spatialys.com>

Le jeudi 05 f?vrier 2015 17:57:02, Jesse McGraw a ?crit :
> Thank you, Even.  For now I'll proceed with the additional warping.
> 
> Just for my education: are square pixels a requirement for EPSG:3857?

In the general case, no. But it might be a requirement (or an optimization) 
depending on what you do with your data afterwards. Difficult to give a 
definitive answer on that...

> 
> On Thu, Feb 5, 2015 at 11:50 AM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le jeudi 05 f?vrier 2015 17:41:22, Jesse McGraw a ?crit :
> > > Thanks Even.
> > > 
> > > I did try re-warping the cropped output to 3857 again and it does
> > > produce square pixels but at the expense of an additional warping
> > > operation
> > > 
> > > I'm just curious why the warping that is part of the -crop_to_cutline
> > > process is changing the pixel ratio while a regular, non-cropping
> > > warping makes them square
> > 
> > I think I explained it in my previous answer. This is because
> > -crop_to_cutline
> > uses -te internally, which in the general case doesn't allow pixel
> > squares. And non-cropping warping doesn't necessarily preserve extent of
> > the output to
> > be the same as extent of the input (even in non-reprojection cases). You
> > can
> > check that actually by comparing gdalinfo on the temporary and final
> > datasets.
> > There's no fundamental reason why -crop_to_cutline couldn't produce exact
> > square pixels, if people are annoyed by that behaviour. Just someone has
> > to do
> > it...
> > 
> > > On Thu, Feb 5, 2015 at 11:36 AM, Even Rouault <
> > 
> > even.rouault at spatialys.com>
> > 
> > > wrote:
> > > > Le jeudi 05 f?vrier 2015 17:23:06, Jesse McGraw a ?crit :
> > > > > I'm not sure whether this is a real issue or not but I thought I'd
> > > > > bring
> > > > 
> > > > it
> > > > 
> > > > > up, at the very least I'll learn something
> > > > > 
> > > > > When using "gdalwarp -cutline <shapefile> -crop_to_cutline" on an
> > 
> > input
> > 
> > > > > raster that is in EPSG:3857 with square-pixels the output raster,
> > 
> > while
> > 
> > > > > still EPSG:3857, now has non-square pixels.
> > > > > 
> > > > > They're aren't terribly non-square but aren't they supposed to be
> > > > > completely square for EPSG:3857?
> > > > 
> > > > Perhaps... Actually the effet of -crop_to_cutline is exactly the same
> > 
> > as
> > 
> > > > manually passing the target extents with -te with the bounding box of
> > 
> > the
> > 
> > > > cutline.
> > > > It is not possible to both preserve the extent extents and pixel size
> > 
> > at
> > 
> > > > the
> > > > same time, due to width and height being integer values.
> > > > So, in order to preserve pixel square, the extent should be modified
> > > > a little
> > > > bit. What is more appropriate is a matter of point of view I think.
> > > > You can always re-run "gdalwarp tmp.tif out.tif" where tmp.tif is the
> > > > output
> > > > of first gdalwarp with -crop_to_cutline. And you should get square
> > 
> > pixels
> > 
> > > > I believe.
> > > > 
> > > > > (FWIW, I see that there are tickets opened that reference similar
> > > > > issues but they reference the output being shifted or the origin
> > > > > changing, not
> > > > 
> > > > the
> > > > 
> > > > > pixel shape changing)
> > > > > 
> > > > > For example:
> > > > > #Warp our original .tif to EPSG:3857
> > > > > $gdalwarp \
> > > > > 
> > > > >         -t_srs EPSG:3857 \
> > > > >         -dstalpha \
> > > > >         -co TILED=YES \
> > > > >         "ENR_L33.tif" \
> > > > >         "./2.tif"
> > > > > 
> > > > > #See that the output pixels are square
> > > > > $gdalinfo 2.tif
> > > > > Origin = (-8577554.996301921084523,5421778.172851986251771)
> > > > > Pixel Size = (43.677179501975118,-43.677179501975118)
> > > > > 
> > > > > 
> > > > > #Now crop the image to a cutline
> > > > > $gdalwarp \
> > > > > 
> > > > >         -crop_to_cutline \
> > > > >         -dstalpha \
> > > > >         -cutline "./ENR_L33.shp" \
> > > > >         -cblend 10 \
> > > > >         -co TILED=YES \
> > > > >         "./2.tif" \
> > > > >         "./3.tif"
> > > > > 
> > > > > #See that output pixels are not square
> > > > > $ gdalinfo 3.tif
> > > > > Origin = (-8480047.445924906060100,5366376.137789577245712)
> > > > > Pixel Size = (43.678439570399853,-43.675457269061347)
> > > > > 
> > > > > 
> > > > > I ran some more tests and without the -crop_to_cutline option the
> > > > > output pixels remain square
> > > > > 
> > > > > Thanks,
> > > > > 
> > > > >   Jesse
> > > > 
> > > > --
> > > > Spatialys - Geospatial professional services
> > > > http://www.spatialys.com
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jorge at cartodb.com  Thu Feb  5 09:20:09 2015
From: jorge at cartodb.com (=?UTF-8?B?Sm9yZ2UgQXLDqXZhbG8=?=)
Date: Thu, 05 Feb 2015 18:20:09 +0100
Subject: [gdal-dev] Use gdal2tiles to generate XYZ cache
In-Reply-To: <CAH-RUCQQrfmqjf1eBK5dnSvxS7DQt_ASudGLftX16345Cq4ypg@mail.gmail.com>
References: <54D01027.5030503@cartodb.com>
	<CAH-RUCQQrfmqjf1eBK5dnSvxS7DQt_ASudGLftX16345Cq4ypg@mail.gmail.com>
Message-ID: <54D3A649.4090404@cartodb.com>

Hello Klokan,

Thanks for the info. Yes, we have a maptiler license. It's a great tool 
:-).

Best regards

Jorge

> Klokan Petr Pridal <mailto:klokan at klokan.cz>
> February 3, 2015 at 2:20 AM
> Hi there,
>
> maptiler generates xyz by default, and back-compatible tms with -tms 
> on the command line or in the GUI with switcher in advanced options.
>
> Regards,
>
> Petr
>
>
>
>
> -- 
> http://blog.klokan.cz/
> http://www.maptiler.org/
> http://www.oldmapsonline.org/
> Jorge Ar?valo <mailto:jorge at cartodb.com>
> February 3, 2015 at 1:02 AM
> Hello,
>
> Looks like gdal2tiles is only able to generate TMS caches (OGC 
> standard). Or is there any combination of parameters to generate a 
> tile cache in XYZ format? (top-left standard). I've tried with all the 
> profiles (-p option), but not getting the desired results... Any hints?
>
> Best regards,
>

-- 
Sent with Postbox <http://www.getpostbox.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/12cb059e/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: postbox-contact.jpg
Type: image/jpeg
Size: 1217 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/12cb059e/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: postbox-contact.jpg
Type: image/jpeg
Size: 1187 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/12cb059e/attachment-0003.jpg>

From jorge at cartodb.com  Thu Feb  5 09:59:19 2015
From: jorge at cartodb.com (=?UTF-8?B?Sm9yZ2UgQXLDqXZhbG8=?=)
Date: Thu, 05 Feb 2015 18:59:19 +0100
Subject: [gdal-dev] Quick question about gdal2tiles
In-Reply-To: <CAH-RUCQ5VqVWPa-9x6kbaOrcFduP4rYjZCjdtMUTP8yJs++AwA@mail.gmail.com>
References: <54C935B4.9060100@cartodb.com>
	<201501282128.46180.even.rouault@spatialys.com>
	<54C96B3C.7040109@cartodb.com>
	<201501290027.37537.even.rouault@spatialys.com>
	<CAPRx4nT_M-0YudutRZ7QfxMa2yEPi6+oFxeQOgVcLYVPsCdy6w@mail.gmail.com>
	<CAH-RUCQ5VqVWPa-9x6kbaOrcFduP4rYjZCjdtMUTP8yJs++AwA@mail.gmail.com>
Message-ID: <54D3AF77.3070001@cartodb.com>

Hi,

Thanks for the tips, Klokan. Really useful. We already have a maptiler 
license, and we use it, but we can't use that tool this time.

Best regards,

Jorge
> Klokan Petr Pridal <mailto:klokan at klokan.cz>
> February 3, 2015 at 2:18 AM
> Hi Jorge,
>
> rendering of your sample file down to zoomlevel 19 would generate over 
> 2 billion tiles - probably tens of terabytes of data. I guess it is 
> not what you want to do... Typically the overzooming is done on client 
> side in a JavaScript viewer or on the tileserver hosting.
>
> The tiling utilities suggests you the native zoom level automatically 
> - based on the raster resolution of the input.
>
> In case you want to render large datasets composed of multiple files 
> efficiently I would recommend to try our MapTiler Pro command line 
> utility.
> It is significantly faster then GDAL2Tiles and produces optimised and 
> correct tiles, while handling merging of multiple files, solving 
> issues with dateline crossing, reprojection and merging of data in 
> different srs, direct output to MBTiles, OGC WMTS compatible export, 
> and many more features.
>
> The usage on command line is quite easy:
>
> $ maptiler -o merged_output_dir input1.tif input2.tif input3.tif
>
> Input files can be in the original srs - every extra reprojection 
> degrades visual quality of the output.
> Merging with VRT is not recommend - it slow down the tile rendering, 
> as there are artificial blocks introduced - it is better for 
> performance to pass the original files directly.
>
> MapTiler is a complete C/C++ reimplementation of my GDAL2Tiles 
> utility. There are several significant improvements in the merging and 
> internal tiling process including multi-thread CPU parallelization and 
> automatic file size optimisation (PNG color quantization and JPEG tweaks).
> Installation is possible with the .deb or .rpm packages or binaries 
> for Mac OS X or Windows or Docker.
>
> The small file, like your sample mentioned above, can be rendered 
> directly with the MapTiler Free in the graphical user interface which 
> is available for download at: http://www.maptiler.com/download/
>
> If you drop us an email we send you also the Pro version with command 
> line for your free testing.
>
> Best regards,
>
> Petr Pridal, PhD
> Klokan Technologies GmbH
>
>
>
>
> -- 
> http://blog.klokan.cz/
> http://www.maptiler.org/
> http://www.oldmapsonline.org/
> Jorge Ar?valo <mailto:jorge at cartodb.com>
> January 29, 2015 at 1:13 AM
>
>
> El jueves, 29 de enero de 2015, Even Rouault 
> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> escribi?:
>
>     Le jeudi 29 janvier 2015 00:05:32, Jorge Ar?valo a ?crit :
>     > > Even Rouault <mailto:even.rouault at spatialys.com <javascript:;>>
>     > > January 28, 2015 at 9:28 PM
>     > >
>     > > Le mercredi 28 janvier 2015 20:17:08, Jorge Ar?valo a ?crit :
>     > >> Hi,
>     > >>
>     > >> I'm working with a patched version of gdal2tiles, which makes
>     use of
>     > >> parallelization:
>     > >>
>     http://gis.stackexchange.com/questions/7743/performance-of-google-map-ti
>     > >> le- creation-processes/74446#74446
>     > >>
>     > >> I want to create a complete TMS cache from raster imagery. No
>     > >> assumptions about SRS of data type for input data.
>     > >>
>     > >> I want the tiling process to be as fast as possible
>     (gdal2tiles is
>     > >> really heavy process), do you have any recomendations about
>     the data or
>     > >> the parameters used?
>     > >>
>     > >> Right now, I'm doing this
>     > >>
>     > >> Step 1: build vrt from input images
>     > >>
>     > >> gdal_vrtmerge.py -o merged.vrt<list of input tif files>
>     > >>
>     > >> Step 2: build tiles from vrt file
>     > >>
>     > >> gdal2tiles.py -r cubic -s epsg:XXXX -z 0-19 -w all merged.vrt
>     tms_dir
>     > >>
>     > >> Even with parallelization, process still feels really slow.
>     Would it be
>     > >> faster if, for example, I convert all my input files to
>     epsg:3857? Or if
>     > >> I scale them to 8-bit? Or if I use near resampling method
>     instead of
>     > >> cubic? (I'm using cubic because I'm working with continuous data:
>     > >> satellite images, am I doing it right?).
>     > >>
>     > >  From a quick look at the source, it seems that there's an
>     optimization
>     > >  if the
>     > >
>     > > input SRS == output SRS that avoids going through the warped
>     VRT path.
>     > >
>     > > That said, we definitely need one or several maintainers for
>     gdal2tiles.
>     > > There are quite a faw patches floating around in Trac that
>     would need
>     > > someone to review, test, fix, apply them, as well as writing
>     tests (no
>     > > autotest for gdal2tiles yet), etc...
>     >
>     > Ok. But the applications is taking hours to generate a complete tile
>     > cache (zoom levels 0-19) for a 3MB tiff file, in epsg:3857. A 4
>     cores
>     > machine with 8GB of RAM. The file is this one
>     >
>     >
>     https://dl.dropboxusercontent.com/u/6599273/gis_data/katrina-3857.tif
>     >
>     > Taking so much time for a 3MB file sounds ridiculous. I'm
>     probably doing
>     > something wrong. This is the line
>     >
>     > gdal2tiles.py  -s epsg:3857 -z 0-19 -r cubic katrina-3857.tif
>     tiles_dir
>     >
>     > Do you see something wrong in this approach?
>
>     The performance seems to be deeply impacted by "-r cubic", but
>     even without
>     it, it still sucks. The reason is the zoom level 19. Your dataset
>     has a
>     resolution of 3469 m. zoom 19 corresponds to a resolution of ~ 0.3
>     m. So you
>     basically try to generate a TMS that is rougly 12000 x 12000
>     larger than your
>     source dataset...
>
> Wow, thanks for the enlightment. So, with that resolution, I could 
> easily create TMS cache until levels 5-6, according to this 
> https://msdn.microsoft.com/en-us/library/aa940990.aspx
>
> If I'd want higher zoom levels... That could mean 
> high processing cost. Worse if c?bic resampling method is used.
>
> Conclussion: better guessing the highest zoom level for 
> that resolution using the table on the previous link, and building the 
> TMS cache with that constraint in mind.
>
> Thanks again, Even!
>
>     >
>     > Anyway, if this is a problem of gdal2tiles and it needs fine
>     tunning or
>     > maintenance, we could talk. I don't know if there's any other
>     method to
>     > generate a complete TMS cache using GDAL.
>     >
>     > >> Any other tips?
>     > >>
>     > >> Many thanks in advance
>     > >>
>     > >> Best regards
>
>     --
>     Spatialys - Geospatial professional services
>     http://www.spatialys.com
>
>
>
> -- 
> Jorge Ar?valo
>
> http://cartodb.com/
> Skype ID: jorgecartodb
>
> Even Rouault <mailto:even.rouault at spatialys.com>
> January 29, 2015 at 12:27 AM
> Le jeudi 29 janvier 2015 00:05:32, Jorge Ar?valo a ?crit :
>>> Even Rouault<mailto:even.rouault at spatialys.com>
>>> January 28, 2015 at 9:28 PM
>>>
>>> Le mercredi 28 janvier 2015 20:17:08, Jorge Ar?valo a ?crit :
>>>> Hi,
>>>>
>>>> I'm working with a patched version of gdal2tiles, which makes use of
>>>> parallelization:
>>>> http://gis.stackexchange.com/questions/7743/performance-of-google-map-ti
>>>> le- creation-processes/74446#74446
>>>>
>>>> I want to create a complete TMS cache from raster imagery. No
>>>> assumptions about SRS of data type for input data.
>>>>
>>>> I want the tiling process to be as fast as possible (gdal2tiles is
>>>> really heavy process), do you have any recomendations about the data or
>>>> the parameters used?
>>>>
>>>> Right now, I'm doing this
>>>>
>>>> Step 1: build vrt from input images
>>>>
>>>> gdal_vrtmerge.py -o merged.vrt<list of input tif files>
>>>>
>>>> Step 2: build tiles from vrt file
>>>>
>>>> gdal2tiles.py -r cubic -s epsg:XXXX -z 0-19 -w all merged.vrt tms_dir
>>>>
>>>> Even with parallelization, process still feels really slow. Would it be
>>>> faster if, for example, I convert all my input files to epsg:3857? Or if
>>>> I scale them to 8-bit? Or if I use near resampling method instead of
>>>> cubic? (I'm using cubic because I'm working with continuous data:
>>>> satellite images, am I doing it right?).
>>>>
>>>    From a quick look at the source, it seems that there's an optimization
>>>   if the
>>>
>>> input SRS == output SRS that avoids going through the warped VRT path.
>>>
>>> That said, we definitely need one or several maintainers for gdal2tiles.
>>> There are quite a faw patches floating around in Trac that would need
>>> someone to review, test, fix, apply them, as well as writing tests (no
>>> autotest for gdal2tiles yet), etc...
>> Ok. But the applications is taking hours to generate a complete tile
>> cache (zoom levels 0-19) for a 3MB tiff file, in epsg:3857. A 4 cores
>> machine with 8GB of RAM. The file is this one
>>
>> https://dl.dropboxusercontent.com/u/6599273/gis_data/katrina-3857.tif
>>
>> Taking so much time for a 3MB file sounds ridiculous. I'm probably doing
>> something wrong. This is the line
>>
>> gdal2tiles.py  -s epsg:3857 -z 0-19 -r cubic katrina-3857.tif tiles_dir
>>
>> Do you see something wrong in this approach?
>
> The performance seems to be deeply impacted by "-r cubic", but even without
> it, it still sucks. The reason is the zoom level 19. Your dataset has a
> resolution of 3469 m. zoom 19 corresponds to a resolution of ~ 0.3 m. So you
> basically try to generate a TMS that is rougly 12000 x 12000 larger than your
> source dataset...
>
>> Anyway, if this is a problem of gdal2tiles and it needs fine tunning or
>> maintenance, we could talk. I don't know if there's any other method to
>> generate a complete TMS cache using GDAL.
>>
>>>> Any other tips?
>>>>
>>>> Many thanks in advance
>>>>
>>>> Best regards
>
> Jorge Ar?valo <mailto:jorge at cartodb.com>
> January 29, 2015 at 12:05 AM
>
>
>> Even Rouault <mailto:even.rouault at spatialys.com>
>> January 28, 2015 at 9:28 PM
>> Le mercredi 28 janvier 2015 20:17:08, Jorge Ar?valo a ?crit :
>>> Hi,
>>>
>>> I'm working with a patched version of gdal2tiles, which makes use of
>>> parallelization:
>>> http://gis.stackexchange.com/questions/7743/performance-of-google-map-tile-
>>> creation-processes/74446#74446
>>>
>>> I want to create a complete TMS cache from raster imagery. No
>>> assumptions about SRS of data type for input data.
>>>
>>> I want the tiling process to be as fast as possible (gdal2tiles is
>>> really heavy process), do you have any recomendations about the data or
>>> the parameters used?
>>>
>>> Right now, I'm doing this
>>>
>>> Step 1: build vrt from input images
>>>
>>> gdal_vrtmerge.py -o merged.vrt<list of input tif files>
>>>
>>> Step 2: build tiles from vrt file
>>>
>>> gdal2tiles.py -r cubic -s epsg:XXXX -z 0-19 -w all merged.vrt tms_dir
>>>
>>> Even with parallelization, process still feels really slow. Would it be
>>> faster if, for example, I convert all my input files to epsg:3857? Or if
>>> I scale them to 8-bit? Or if I use near resampling method instead of
>>> cubic? (I'm using cubic because I'm working with continuous data:
>>> satellite images, am I doing it right?).
>>
>> > From a quick look at the source, it seems that there's an optimization if the
>> input SRS == output SRS that avoids going through the warped VRT path.
>>
>> That said, we definitely need one or several maintainers for gdal2tiles. There
>> are quite a faw patches floating around in Trac that would need someone to
>> review, test, fix, apply them, as well as writing tests (no autotest for
>> gdal2tiles yet), etc...
>
> Ok. But the applications is taking hours to generate a complete tile 
> cache (zoom levels 0-19) for a 3MB tiff file, in epsg:3857. A 4 cores 
> machine with 8GB of RAM. The file is this one
>
> https://dl.dropboxusercontent.com/u/6599273/gis_data/katrina-3857.tif
>
> Taking so much time for a 3MB file sounds ridiculous. I'm probably 
> doing something wrong. This is the line
>
> gdal2tiles.py  -s epsg:3857 -z 0-19 -r cubic katrina-3857.tif tiles_dir
>
> Do you see something wrong in this approach?
>
> Anyway, if this is a problem of gdal2tiles and it needs fine tunning 
> or maintenance, we could talk. I don't know if there's any other 
> method to generate a complete TMS cache using GDAL.
>>> Any other tips?
>>>
>>> Many thanks in advance
>>>
>>> Best regards
>>
>
> Even Rouault <mailto:even.rouault at spatialys.com>
> January 28, 2015 at 9:28 PM
> Le mercredi 28 janvier 2015 20:17:08, Jorge Ar?valo a ?crit :
>> Hi,
>>
>> I'm working with a patched version of gdal2tiles, which makes use of
>> parallelization:
>> http://gis.stackexchange.com/questions/7743/performance-of-google-map-tile-
>> creation-processes/74446#74446
>>
>> I want to create a complete TMS cache from raster imagery. No
>> assumptions about SRS of data type for input data.
>>
>> I want the tiling process to be as fast as possible (gdal2tiles is
>> really heavy process), do you have any recomendations about the data or
>> the parameters used?
>>
>> Right now, I'm doing this
>>
>> Step 1: build vrt from input images
>>
>> gdal_vrtmerge.py -o merged.vrt<list of input tif files>
>>
>> Step 2: build tiles from vrt file
>>
>> gdal2tiles.py -r cubic -s epsg:XXXX -z 0-19 -w all merged.vrt tms_dir
>>
>> Even with parallelization, process still feels really slow. Would it be
>> faster if, for example, I convert all my input files to epsg:3857? Or if
>> I scale them to 8-bit? Or if I use near resampling method instead of
>> cubic? (I'm using cubic because I'm working with continuous data:
>> satellite images, am I doing it right?).
>
>  From a quick look at the source, it seems that there's an optimization if the
> input SRS == output SRS that avoids going through the warped VRT path.
>
> That said, we definitely need one or several maintainers for gdal2tiles. There
> are quite a faw patches floating around in Trac that would need someone to
> review, test, fix, apply them, as well as writing tests (no autotest for
> gdal2tiles yet), etc...
>
>> Any other tips?
>>
>> Many thanks in advance
>>
>> Best regards
>

-- 
Sent with Postbox <http://www.getpostbox.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/004d6339/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: postbox-contact.jpg
Type: image/jpeg
Size: 1217 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/004d6339/attachment-0003.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: postbox-contact.jpg
Type: image/jpeg
Size: 1187 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/004d6339/attachment-0004.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: compose-unknown-contact.jpg
Type: image/jpeg
Size: 770 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/004d6339/attachment-0005.jpg>

From jorge at cartodb.com  Thu Feb  5 10:15:41 2015
From: jorge at cartodb.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Thu, 05 Feb 2015 19:15:41 +0100
Subject: [gdal-dev] Are those 2 things possible using gdal2tiles?
Message-ID: <54D3B34D.8090604@cartodb.com>

- Generate JPEG tiles instead of PNG. Tried just replacing the driver's 
name (PNG) with JPEG. Didn't work. Base tiles are generated, but 
overview tiles are not. Getting this error instead: ERROR 1: Buffer too 
small
- Apply a color to nodata value of generated tiles. Tried passing -a 
"200,0,0" to gdal2tiles, but it was ignored.


Log file, with GDAL_DEBUG=On, where you can see the first problem 
(buffer too small): 
https://dl.dropboxusercontent.com/u/6599273/errors/gdal/gdal2tiles_error.log
Modified version of gdal2tiles, to generate xyz caches instead of tms 
ones: 
https://dl.dropboxusercontent.com/u/6599273/errors/gdal/gdal2tiles_modified.py
tif tile for testing (same error with other ones): 
https://dl.dropboxusercontent.com/u/6599273/gis_data/katrina.tif

Many thanks!

-- 
Jorge Ar?valo

CartoDB
http://cartodb.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/1a8e4504/attachment.html>

From even.rouault at spatialys.com  Thu Feb  5 10:21:12 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 5 Feb 2015 19:21:12 +0100
Subject: [gdal-dev] Gdal 1.11.2 and libtiff
In-Reply-To: <CACmBxytbC8L0TQ5CvcqxbSSYmjzPnLhsSpBagQ5derKLgNLceg@mail.gmail.com>
References: <CACmBxytbC8L0TQ5CvcqxbSSYmjzPnLhsSpBagQ5derKLgNLceg@mail.gmail.com>
Message-ID: <201502051921.12984.even.rouault@spatialys.com>

Kurt,

Forwarding this publicly as this is of general interest.

I've created http://trac.osgeo.org/gdal/ticket/5830 and commited :
branches/1.11 r28417 "Internal libtiff: partial upgrade to 4.0.4beta 
(everything, except changes in tif_jpeg.c that are not security related and 
cause differences in output) (#5830)" 

My personal statement would be that people with high security concerns or 
risks should avoid using libtiff, GDAL or more generally most imaging libraries 
on untrusted datasets on non-isolated / non-sandboxed environments. Regarding 
libtiff, disabling codecs that are somewhat esoteric (like NEXT compression 
that has received security fixes in libtiff 4.0.4beta) might be prudent too.
See http://trac.osgeo.org/gdal/wiki/SecurityIssues

Even

Le jeudi 05 f?vrier 2015 18:21:59, Kurt Schwehr a ?crit :
> Sorry this is so last minute, but I suggest that 1.11.2 be held back until
> libtiff is updated.  e.g. to
> ftp://ftp.remotesensing.org/pub/libtiff/tiff-4.0.4beta.tar.gz or head.
> 
> There are a number of issues out in the wild:
> 
> http://www.conostix.com/pub/adv/CVE-2014-8127-LibTIFF-Out-of-bounds_Reads.t
> xt
> 
> http://www.conostix.com/pub/adv/CVE-2014-8128-LibTIFF-Out-of-bounds_Writes.
> txt
> 
> http://www.conostix.com/pub/adv/CVE-2014-8129-LibTIFF-Out-of-bounds_Reads_a
> nd_Writes.txt
> 
> -kurt

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From schwehr at gmail.com  Thu Feb  5 10:26:45 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 5 Feb 2015 10:26:45 -0800
Subject: [gdal-dev] Gdal 1.11.2 and libtiff
In-Reply-To: <201502051921.12984.even.rouault@spatialys.com>
References: <CACmBxytbC8L0TQ5CvcqxbSSYmjzPnLhsSpBagQ5derKLgNLceg@mail.gmail.com>
	<201502051921.12984.even.rouault@spatialys.com>
Message-ID: <CACmBxytJwP25ENFJ2csw5nmSV6snZT7KBTF9AtD51GwuxmVf8w@mail.gmail.com>

Excellent!  Thanks!

-kurt

On Thu, Feb 5, 2015 at 10:21 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Kurt,
>
> Forwarding this publicly as this is of general interest.
>
> I've created http://trac.osgeo.org/gdal/ticket/5830 and commited :
> branches/1.11 r28417 "Internal libtiff: partial upgrade to 4.0.4beta
> (everything, except changes in tif_jpeg.c that are not security related and
> cause differences in output) (#5830)"
>
> My personal statement would be that people with high security concerns or
> risks should avoid using libtiff, GDAL or more generally most imaging
> libraries
> on untrusted datasets on non-isolated / non-sandboxed environments.
> Regarding
> libtiff, disabling codecs that are somewhat esoteric (like NEXT compression
> that has received security fixes in libtiff 4.0.4beta) might be prudent
> too.
> See http://trac.osgeo.org/gdal/wiki/SecurityIssues
>
> Even
>
> Le jeudi 05 f?vrier 2015 18:21:59, Kurt Schwehr a ?crit :
> > Sorry this is so last minute, but I suggest that 1.11.2 be held back
> until
> > libtiff is updated.  e.g. to
> > ftp://ftp.remotesensing.org/pub/libtiff/tiff-4.0.4beta.tar.gz or head.
> >
> > There are a number of issues out in the wild:
> >
> >
> http://www.conostix.com/pub/adv/CVE-2014-8127-LibTIFF-Out-of-bounds_Reads.t
> > xt
> >
> >
> http://www.conostix.com/pub/adv/CVE-2014-8128-LibTIFF-Out-of-bounds_Writes
> .
> > txt
> >
> >
> http://www.conostix.com/pub/adv/CVE-2014-8129-LibTIFF-Out-of-bounds_Reads_a
> > nd_Writes.txt
> >
> > -kurt
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/5524797f/attachment.html>

From even.rouault at spatialys.com  Thu Feb  5 10:30:00 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 5 Feb 2015 19:30:00 +0100
Subject: [gdal-dev] Are those 2 things possible using gdal2tiles?
In-Reply-To: <54D3B34D.8090604@cartodb.com>
References: <54D3B34D.8090604@cartodb.com>
Message-ID: <201502051930.00043.even.rouault@spatialys.com>

Jorge,

> - Generate JPEG tiles instead of PNG. Tried just replacing the driver's
> name (PNG) with JPEG. Didn't work. Base tiles are generated, but
> overview tiles are not. Getting this error instead: ERROR 1: Buffer too
> small

This messages comes from the WriteRaster() Python bindings, when it is passed 
a buffer that isn't large enough regarding the advertized buffer dimensions. 
Perhaps due to the fact that JPEG only supports 3 bands and PNG 4, although 
this is just a guess without deeper inspection.

> - Apply a color to nodata value of generated tiles. Tried passing -a
> "200,0,0" to gdal2tiles, but it was ignored.

The doc of -a suggests that it only applies to the input dataset, not the 
output

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jorge at cartodb.com  Thu Feb  5 10:31:00 2015
From: jorge at cartodb.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Thu, 05 Feb 2015 19:31:00 +0100
Subject: [gdal-dev] Are those 2 things possible using gdal2tiles?
In-Reply-To: <54D3B34D.8090604@cartodb.com>
References: <54D3B34D.8090604@cartodb.com>
Message-ID: <54D3B6E4.2030401@cartodb.com>



> Jorge Ar?valo <mailto:jorge at cartodb.com>
> February 5, 2015 at 7:15 PM
> - Generate JPEG tiles instead of PNG. Tried just replacing the 
> driver's name (PNG) with JPEG. Didn't work. Base tiles are generated, 
> but overview tiles are not. Getting this error instead: ERROR 1: 
> Buffer too small
> - Apply a color to nodata value of generated tiles. Tried passing -a 
> "200,0,0" to gdal2tiles, but it was ignored.
>
>
> Log file, with GDAL_DEBUG=On, where you can see the first problem 
> (buffer too small): 
> https://dl.dropboxusercontent.com/u/6599273/errors/gdal/gdal2tiles_error.log
> Modified version of gdal2tiles, to generate xyz caches instead of tms 
> ones: 
> https://dl.dropboxusercontent.com/u/6599273/errors/gdal/gdal2tiles_modified.py
> tif tile for testing (same error with other ones): 
> https://dl.dropboxusercontent.com/u/6599273/gis_data/katrina.tif
>
> Many thanks!
>

Hint: The problem is in swig/python/extensions/gdal_wrap.cpp, method 
GDALDatasetShadow_WriteRaster, because Buf len = 196608, min buffer size 
= 262144. So, I know the reason, but still doesn't know how to fix this


-- 
Jorge Ar?valo

CartoDB
http://cartodb.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/e3dabf5c/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: postbox-contact.jpg
Type: image/jpeg
Size: 1187 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/e3dabf5c/attachment-0001.jpg>

From jorge at cartodb.com  Thu Feb  5 10:33:55 2015
From: jorge at cartodb.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Thu, 05 Feb 2015 19:33:55 +0100
Subject: [gdal-dev] Are those 2 things possible using gdal2tiles?
In-Reply-To: <201502051930.00043.even.rouault@spatialys.com>
References: <54D3B34D.8090604@cartodb.com>
	<201502051930.00043.even.rouault@spatialys.com>
Message-ID: <54D3B793.7080109@cartodb.com>

Wow, we answered at same time. So, I'll include my findings here

> Even Rouault <mailto:even.rouault at spatialys.com>
> February 5, 2015 at 7:30 PM
> Jorge,
>
>> - Generate JPEG tiles instead of PNG. Tried just replacing the driver's
>> name (PNG) with JPEG. Didn't work. Base tiles are generated, but
>> overview tiles are not. Getting this error instead: ERROR 1: Buffer too
>> small
>
> This messages comes from the WriteRaster() Python bindings, when it is passed
> a buffer that isn't large enough regarding the advertized buffer dimensions.
> Perhaps due to the fact that JPEG only supports 3 bands and PNG 4, although
> this is just a guess without deeper inspection.


The problem is in swig/python/extensions/gdal_wrap.cpp, method 
GDALDatasetShadow_WriteRaster, because Buf len = 196608, min buffer size 
= 262144.

Is there any method to pass a bigger buffer to JPEG driver? Or just 
avoid the 4th band of PNG

>> - Apply a color to nodata value of generated tiles. Tried passing -a
>> "200,0,0" to gdal2tiles, but it was ignored.
>
> The doc of -a suggests that it only applies to the input dataset, not the
> output
Mmmm... ok. Is there a Python method to specify a color for nodata 
pixels when creating an output dataset?


Thanks again, Even!
> Even
>
> Jorge Ar?valo <mailto:jorge at cartodb.com>
> February 5, 2015 at 7:15 PM
> - Generate JPEG tiles instead of PNG. Tried just replacing the 
> driver's name (PNG) with JPEG. Didn't work. Base tiles are generated, 
> but overview tiles are not. Getting this error instead: ERROR 1: 
> Buffer too small
> - Apply a color to nodata value of generated tiles. Tried passing -a 
> "200,0,0" to gdal2tiles, but it was ignored.
>
>
> Log file, with GDAL_DEBUG=On, where you can see the first problem 
> (buffer too small): 
> https://dl.dropboxusercontent.com/u/6599273/errors/gdal/gdal2tiles_error.log
> Modified version of gdal2tiles, to generate xyz caches instead of tms 
> ones: 
> https://dl.dropboxusercontent.com/u/6599273/errors/gdal/gdal2tiles_modified.py
> tif tile for testing (same error with other ones): 
> https://dl.dropboxusercontent.com/u/6599273/gis_data/katrina.tif
>
> Many thanks!
>

-- 
Sent with Postbox <http://www.getpostbox.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/db6f7d2c/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: compose-unknown-contact.jpg
Type: image/jpeg
Size: 770 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/db6f7d2c/attachment.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: postbox-contact.jpg
Type: image/jpeg
Size: 1187 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150205/db6f7d2c/attachment-0001.jpg>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Feb  5 11:15:47 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Thu, 5 Feb 2015 19:15:47 +0000 (UTC)
Subject: [gdal-dev] Are those 2 things possible using gdal2tiles?
References: <54D3B34D.8090604@cartodb.com>
Message-ID: <loom.20150205T201429-883@post.gmane.org>

Jorge Ar?valo <jorge <at> cartodb.com> writes:

> 
> 
> - Generate JPEG tiles instead of PNG. Tried just replacing the driver's 
> name (PNG) with JPEG. Didn't work. Base tiles are generated, but 
> overview tiles are not. Getting this error instead: ERROR 1: Buffer too 
> small

There is a patch included in http://trac.osgeo.org/gdal/ticket/2052. Try and
tell if it is usable.

-Jukka Rahkonen-

From even.rouault at spatialys.com  Thu Feb  5 13:25:04 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 5 Feb 2015 22:25:04 +0100
Subject: [gdal-dev] Are those 2 things possible using gdal2tiles?
In-Reply-To: <loom.20150205T201429-883@post.gmane.org>
References: <54D3B34D.8090604@cartodb.com>
	<loom.20150205T201429-883@post.gmane.org>
Message-ID: <201502052225.04291.even.rouault@spatialys.com>

Le jeudi 05 f?vrier 2015 20:15:47, Jukka Rahkonen a ?crit :
> Jorge Ar?valo <jorge <at> cartodb.com> writes:
> > - Generate JPEG tiles instead of PNG. Tried just replacing the driver's
> > name (PNG) with JPEG. Didn't work. Base tiles are generated, but
> > overview tiles are not. Getting this error instead: ERROR 1: Buffer too
> > small
> 
> There is a patch included in http://trac.osgeo.org/gdal/ticket/2052. Try
> and tell if it is usable.

I just came with a quick&dirty quality patch that works in Jorge's case, that 
I've attached to the ticket.

> 
> -Jukka Rahkonen-
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Feb  5 14:26:17 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 5 Feb 2015 23:26:17 +0100
Subject: [gdal-dev] Tags missing on GitHub mirror
In-Reply-To: <CALFF=ZQNwf02uYA8JyDyAG5v5uz2w1qniz3XXx4WeCSmx7sdaA@mail.gmail.com>
References: <CALFF=ZQ--LDkAOag990aMMcBi_QAK4yyDU0nvXKkFAFfBWaSHA@mail.gmail.com>
	<CALFF=ZSiuBnwfe3UT97T9QUbKq1e0f20+rWnrFbuSdytVF1TYg@mail.gmail.com>
	<CALFF=ZQNwf02uYA8JyDyAG5v5uz2w1qniz3XXx4WeCSmx7sdaA@mail.gmail.com>
Message-ID: <201502052326.17488.even.rouault@spatialys.com>

Le jeudi 05 f?vrier 2015 23:18:30, Leif Gruenwoldt a ?crit :
> I happened to be playing around with this more today and I'm fairly certain
> this isn't just a GitHub UI thing. I'm betting it's svn migration related.
> After cloning a copy of the git repo I noticed the tags don't appear as
> normal tags even from the command line.
> 
> $ git clone  https://github.com/OSGeo/gdal.git
> 
> $ git tag
> 
> Returns nothing, but I would expect to see the list of all tags.
> 
> $ git branch -r | grep 1.4.1
> origin/tags/1.4.1
> 
> Ok so the "tag" for the 1.4.1 release as well as all other tags are showing
> up as remote branches, weird.
> 
> $ git checkout 1.4.1
> error: pathspec '1.4.1' did not match any file(s) known to git.
> 
> That's what I expected, it doesn't see it as a normal tag, I wonder if I
> can check it out with the remote branch name.
> 
> $ git checkout origin/tags/1.4.1
> 
> Yup!
> 
> $ git rev-parse HEAD
> 184230238828f0f31aed7335e4c8443963437b66

The firefox thing was just a UI problem. It seems that tags are created as git 
branches and not as git tags and the name is "tags/1.4.1". Must come from the 
git-svn import configuration used. Looking at mapserver, I don't see a similar 
issue, so yes must be something with how git-svn was configured. Something to 
perhaps reconsider if we officially transition to git some day.

> 
> 
> So at least I can work around this and checkout the tag using the remote
> branch name instead. The SHA1 matches up with what I was expecting so
> that's comforting. Something is definitely fishy though with the tags. I've
> migrated CVS -> git but never svn -> git so I'm not sure if this is a known
> issue.
> 
> On Mon Oct 06 2014 at 1:20:35 PM Leif Gruenwoldt <leifer at gmail.com> wrote:
> > Oh weird.
> > 
> > I decided to go ahead and clone the gdal repo locally, but I don't see
> > the tags there either. Maybe it's something to do with the svn -> git
> > migration...
> > 
> > Worst case I will use the git SHA1
> > (184230238828f0f31aed7335e4c8443963437b66) from the 1.4.1 github URL
> > you shared for configuring my git submodule.
> > 
> > On Mon, Oct 6, 2014 at 12:20 PM, Even Rouault
> > 
> > <even.rouault at spatialys.com> wrote:
> > > Le lundi 06 octobre 2014 18:08:22, Leif Gruenwoldt a ?crit :
> > >> I'm trying to add the gdal repo as a git submodule to one
> > >> of my projects. My project requires a specific older revision of gdal
> > >> (1.4.1) so I want to set the git submodule to that point in time, but
> > 
> > it's
> > 
> > >> hard to do that without the tags in the GitHub mirror.
> > >> 
> > >> Can someone push the git tags to the gdal github mirror?
> > > 
> > > It is already there (but it seems there's a UI problem with the github
> > 
> > with
> > 
> > > Firefox, at least my version. had to use Chrome to display
> > > branches/tags)
> > > 
> > > https://github.com/OSGeo/gdal/tree/tags/1.4.1
> > > 
> > >> https://github.com/OSGeo/gdal
> > >> 
> > >> Cheers
> > >> _______________________________________________
> > >> gdal-dev mailing list
> > >> gdal-dev at lists.osgeo.org
> > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > 
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From dgpiury at gmail.com  Thu Feb  5 15:33:49 2015
From: dgpiury at gmail.com (Carlos Piury)
Date: Fri, 6 Feb 2015 00:33:49 +0100
Subject: [gdal-dev] Where is GDAL 2.0?
Message-ID: <CAHMfM_fySOvWHXJff98QrkTY4dHTcjdURkDA1bsa4XqE+k7j9w@mail.gmail.com>

Hi, I am trying to follow the tutorials posted in
http://www.gdal.org/ogr_apitut.html , but it's made for GDAL 2.0 and I have
the latest stable release GDAL 1.11.1.
I can rewrite the code to GDAL 1.11.1 but the API for this version shows
some functions like deprecated.

So... Where can I get GDAL 2.0?.

Thanks


Carlos I. Piury
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150206/31c02cf4/attachment.html>

From even.rouault at spatialys.com  Thu Feb  5 15:37:27 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 6 Feb 2015 00:37:27 +0100
Subject: [gdal-dev] Where is GDAL 2.0?
In-Reply-To: <CAHMfM_fySOvWHXJff98QrkTY4dHTcjdURkDA1bsa4XqE+k7j9w@mail.gmail.com>
References: <CAHMfM_fySOvWHXJff98QrkTY4dHTcjdURkDA1bsa4XqE+k7j9w@mail.gmail.com>
Message-ID: <201502060037.27412.even.rouault@spatialys.com>

Carlos,

> Hi, I am trying to follow the tutorials posted in
> http://www.gdal.org/ogr_apitut.html , but it's made for GDAL 2.0 and I have
> the latest stable release GDAL 1.11.1.

A snapshot of GDAL 1.11.1 doc is available at http://gdal.org/1.11

> I can rewrite the code to GDAL 1.11.1 but the API for this version shows
> some functions like deprecated.
> 
> So... Where can I get GDAL 2.0?.

It is currently in development, so there's no official package yet. If you want 
to use it, you have to work with the "trunk" of the Subversion repository :

https://svn.osgeo.org/gdal/trunk/gdal

> 
> Thanks
> 
> 
> Carlos I. Piury

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From victor.fomin.1 at gmail.com  Fri Feb  6 01:05:15 2015
From: victor.fomin.1 at gmail.com (vf)
Date: Fri, 6 Feb 2015 01:05:15 -0800 (PST)
Subject: [gdal-dev] GDAL 1.11.0 and Cosmo-skymed L1A imagery
Message-ID: <1423213515651-5185900.post@n6.nabble.com>

Hello GDAL developers,

Recently, I updated GDAL to the version 1.11.0 and found the problem when
read CSK L1A imagery : 
gdalinfo HDF5:"CSK_SCS_TEST_FILE.h5"://S01/SBI shows that image has 2 bands
encoded as Int16

While 1,5 year ago, in the ticket http://trac.osgeo.org/gdal/ticket/4227
there was a patch to interpret CSK L1A imagery as complex data. Similar
example : gdalinfo HDF5:"CSK_SCS_TEST_FILE.h5"://S01/SBI would output 1 band
encoded as CInt16. 

So, my question is whether it is inteded to come back to complex
interpretation of CSK L1A imagery and for which version ?

Thanks

   




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-1-11-0-and-Cosmo-skymed-L1A-imagery-tp5185900.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From hrz at geodata.soton.ac.uk  Fri Feb  6 01:07:29 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Fri, 6 Feb 2015 09:07:29 +0000
Subject: [gdal-dev] Are those 2 things possible using gdal2tiles?
In-Reply-To: <54D3B34D.8090604@cartodb.com>
References: <54D3B34D.8090604@cartodb.com>
Message-ID: <54D48451.8070804@geodata.soton.ac.uk>

Hello Jorge,

If I've got it right the attached VRT should apply the nodata values you 
require
to katrina.tif, assuming you save it in the same directory.

I didn't use gdal2tiles but instead used this VRT with the ctb-tile utility
(which makes heavy use of GDAL -
https://github.com/homme/cesium-terrain-builder#ctb-tile) to generate 
the JPEG
tiles.  Using the docker image you can call it as follows, assuming 
katrina.tif
and katrina.vrt are in the current working directory:

mkdir katrina # for saving the tiles to
docker run -v $(pwd):/data homme/cesium-terrain-builder ctb-tile 
--output-dir /data/katrina --output-format JPEG --profile mercator 
/data/katrina.vrt

Best regards,

Homme

On 05/02/15 18:15, Jorge Ar?valo wrote:
> - Generate JPEG tiles instead  of PNG. Tried just replacing the driver's name (PNG) with JPEG. Didn't 
work. Base tiles are generated, but overview tiles are not. Getting this 
error instead: ERROR 1: Buffer too small
 > - Apply a color to nodata value of generated tiles. Tried passing -a 
"200,0,0" to gdal2tiles, but it was ignored.
 >
 >
 > Log file, with GDAL_DEBUG=On, where you can see the first problem 
(buffer too small): 
https://dl.dropboxusercontent.com/u/6599273/errors/gdal/gdal2tiles_error.log
 > Modified version of gdal2tiles, to generate xyz caches instead of tms 
ones: 
https://dl.dropboxusercontent.com/u/6599273/errors/gdal/gdal2tiles_modified.py
 > tif tile for testing (same error with other ones): 
https://dl.dropboxusercontent.com/u/6599273/gis_data/katrina.tif
 >
 > Many thanks!
 >
 > --
 > Jorge Ar?valo
 >
 > CartoDB
 > http://cartodb.com/
 >
 >
 >
 > _______________________________________________
 > gdal-dev mailing list
 > gdal-dev at lists.osgeo.org
 > http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150206/1b77fdf8/attachment.html>

From even.rouault at spatialys.com  Fri Feb  6 01:28:22 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 6 Feb 2015 10:28:22 +0100
Subject: [gdal-dev] GDAL 1.11.0 and Cosmo-skymed L1A imagery
In-Reply-To: <1423213515651-5185900.post@n6.nabble.com>
References: <1423213515651-5185900.post@n6.nabble.com>
Message-ID: <201502061028.22513.even.rouault@spatialys.com>

Victor,
> 
> Recently, I updated GDAL to the version 1.11.0 and found the problem when
> read CSK L1A imagery :
> gdalinfo HDF5:"CSK_SCS_TEST_FILE.h5"://S01/SBI shows that image has 2 bands
> encoded as Int16
> 
> While 1,5 year ago, in the ticket http://trac.osgeo.org/gdal/ticket/4227
> there was a patch to interpret CSK L1A imagery as complex data. Similar
> example : gdalinfo HDF5:"CSK_SCS_TEST_FILE.h5"://S01/SBI would output 1
> band encoded as CInt16.

No, the patch applied only improved handling of dimensions of CSK-L1A datasets 
that didn't work before. The HDF5 driver has never had code to handle complex 
data with the related GDAL appropriates data types (CInt16, CInt32, CFloat32 
or CFloat64). This would be a further enhancement.

> 
> So, my question is whether it is inteded to come back to complex
> interpretation of CSK L1A imagery and for which version ?

I'm not aware of any pending work on this. As usual, this depends on if people 
contribute patches to improve that or support a developer to do it for them.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From hrz at geodata.soton.ac.uk  Fri Feb  6 01:34:43 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Fri, 6 Feb 2015 09:34:43 +0000
Subject: [gdal-dev] gdal_merge vs gdalbuildvrt
In-Reply-To: <54CA5422.8030901@cartodb.com>
References: <54CA5422.8030901@cartodb.com>
Message-ID: <54D48AB3.7090304@geodata.soton.ac.uk>

Hello Jorge,

I didn't see an answer to this question, so...

On 29/01/15 15:39, Jorge Ar?valo wrote:
> Hello,
 >
 > What's the difference between gdal_merge and gdalbuildvrt? If I'm not 
wrong, gdal_merge actually creates a new dataset, merging the input 
ones. And gdalbuildvrt just creates a VRT file, which works as 
descriptor for a mosaic.

That's correct. Although you can theoretically create VRT files with 
gdal_merge
using the `-of VRT` option, this doesn't appear to work in practice.

> At the end, in both cases we  have a mosaic from several input files (real mosaic vs virtual 
mosaic). So, why would I use gdal_merge instead of gdalbuildvrt? With 
gdal_merge, I'd need more space in disk, in order to generate a merged file.

gdal_merge provides a quick way to provide a mosaic output in a 
transferrable
format (e.g. tiff for checking in an image viewer or serving up via a 
wms).  gdalbuildvrt is a more
powerful tool that provides a virtual raster that acts as a 'window' 
into the
input datasets, potentially with reprojection amidst other options. 
Saving disk
space at the expense of additional CPU processing is useful in data 
processing
pipelines but not generally ideal as a final output.

Best regards,

Homme

> Many thanks in advance.
 >
 > Best regards,
 >
 > --
 > Jorge Ar?valo
 >
 > CartoDB
 > http://cartodb.com/
 >
 >
 >
 > _______________________________________________
 > gdal-dev mailing list
 > gdal-dev at lists.osgeo.org
 > http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150206/2da0ec25/attachment-0001.html>

From even.rouault at spatialys.com  Fri Feb  6 01:38:50 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 6 Feb 2015 10:38:50 +0100
Subject: [gdal-dev] gdal_merge vs gdalbuildvrt
In-Reply-To: <54D48AB3.7090304@geodata.soton.ac.uk>
References: <54CA5422.8030901@cartodb.com>
	<54D48AB3.7090304@geodata.soton.ac.uk>
Message-ID: <201502061038.50996.even.rouault@spatialys.com>

>  gdalbuildvrt is a more
> powerful tool that provides a virtual raster that acts as a 'window'
> into the
> input datasets, potentially with reprojection amidst other options.

Small correction: gdalbuildvrt can only deal with datasets of the same 
projection.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From dgpiury at gmail.com  Fri Feb  6 01:42:04 2015
From: dgpiury at gmail.com (Carlos Piury)
Date: Fri, 6 Feb 2015 10:42:04 +0100
Subject: [gdal-dev] GDAL overrite file error
Message-ID: <CAHMfM_fjSmgsAFqtOj_mZc1HC9D=JdiEj6MckDkJ4S5BmzrfMQ@mail.gmail.com>

Hi, I am trying to create a vector format (i.e. ESRI Shapefile) from laser
file (.las), and it works fine, but when I try to overwrite the file I get
the following error:

ERROR 1: Layer 'output' already exists
terminate called after throwing an instance of 'std::runtime_error'
  what():  output layer creation failed
Aborted (core dumped)

I am using the next code to create the layer:

OGRSFDriverH formatTranslateDriver = OGRGetDriverByName(argFormat->sval[0]);

OGRDataSourceH dataset = OGR_Dr_CreateDataSource(formatTranslateDriver,
argOutput->sval[0], 0);

OGRLayerH layer = OGR_DS_CreateLayer(dataset, layerName.c_str(), 0,
wkbPoint25D, 0);

Any idea about this error?

Thanks.

-- 
Carlos I. Piury

Computer engineer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150206/c29ee33e/attachment.html>

From even.rouault at spatialys.com  Fri Feb  6 02:06:36 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 6 Feb 2015 11:06:36 +0100
Subject: [gdal-dev] GDAL overrite file error
In-Reply-To: <CAHMfM_fjSmgsAFqtOj_mZc1HC9D=JdiEj6MckDkJ4S5BmzrfMQ@mail.gmail.com>
References: <CAHMfM_fjSmgsAFqtOj_mZc1HC9D=JdiEj6MckDkJ4S5BmzrfMQ@mail.gmail.com>
Message-ID: <201502061106.36172.even.rouault@spatialys.com>

Le vendredi 06 f?vrier 2015 10:42:04, Carlos Piury a ?crit :
> Hi, I am trying to create a vector format (i.e. ESRI Shapefile) from laser
> file (.las), and it works fine, but when I try to overwrite the file I get
> the following error:
> 
> ERROR 1: Layer 'output' already exists

--> The message is hopefully clear enough and comes from the implementation of 
CreateLayer() in the shape file driver. You have to destroy the files of the 
shapefile first if they exists. You can use DeleteDataSource() for that.

> terminate called after throwing an instance of 'std::runtime_error'
>   what():  output layer creation failed
> Aborted (core dumped)

Does this come from inside GDAL code or you own code ? Looks like from yours, 
if you transform GDAL errors into C++ exceptions.

> 
> I am using the next code to create the layer:
> 
> OGRSFDriverH formatTranslateDriver =
> OGRGetDriverByName(argFormat->sval[0]);
> 
> OGRDataSourceH dataset = OGR_Dr_CreateDataSource(formatTranslateDriver,
> argOutput->sval[0], 0);
> 
> OGRLayerH layer = OGR_DS_CreateLayer(dataset, layerName.c_str(), 0,
> wkbPoint25D, 0);
> 
> Any idea about this error?
> 
> Thanks.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Fri Feb  6 02:25:01 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 6 Feb 2015 10:25:01 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?gdal=5Fmerge_vs_gdalbuildvrt?=
References: <54CA5422.8030901@cartodb.com>
	<54D48AB3.7090304@geodata.soton.ac.uk>
	<201502061038.50996.even.rouault@spatialys.com>
Message-ID: <loom.20150206T111633-762@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> 
> >  gdalbuildvrt is a more
> > powerful tool that provides a virtual raster that acts as a 'window'
> > into the
> > input datasets, potentially with reprojection amidst other options.
> 
> Small correction: gdalbuildvrt can only deal with datasets of the same 
> projection.

...while gdaltindex utility http://www.gdal.org/gdaltindex.html that is also
a mosaic builder can deal with datasets in different projections. However,
this utility is specially made to create index files for Mapserver.

Hmm, I have loads of tileindex mosaics created with gdaltindex in shapefile
and Spatialite format, would be nice if I could utilize them also directly
with GDAL. I wonder it there is already a feature request about this.

-Jukka Rahkonen-





From hrz at geodata.soton.ac.uk  Fri Feb  6 02:33:38 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Fri, 6 Feb 2015 10:33:38 +0000
Subject: [gdal-dev] gdal_merge vs gdalbuildvrt
In-Reply-To: <loom.20150206T111633-762@post.gmane.org>
References: <54CA5422.8030901@cartodb.com>	<54D48AB3.7090304@geodata.soton.ac.uk>	<201502061038.50996.even.rouault@spatialys.com>
	<loom.20150206T111633-762@post.gmane.org>
Message-ID: <54D49882.1050500@geodata.soton.ac.uk>

Hello Jukka,

On 06/02/15 10:25, Jukka Rahkonen wrote:
> Even Rouault <even.rouault  <at> spatialys.com> writes:
 >
 >>
 >>>  gdalbuildvrt is a more
 >>> powerful tool that provides a virtual raster that acts as a 'window'
 >>> into the
 >>> input datasets, potentially with reprojection amidst other options.
 >>
 >> Small correction: gdalbuildvrt can only deal with datasets of the same
 >> projection.
 >
 > ...while gdaltindex utility http://www.gdal.org/gdaltindex.html that 
is also
 > a mosaic builder can deal with datasets in different projections. 
However,
 > this utility is specially made to create index files for Mapserver.

Can you use these tileindices with the -tileindex option to gdalbuildvrt?
Perhaps not if they are in different projections...

> Hmm, I have loads of tileindex  mosaics created with gdaltindex in shapefile
 > and Spatialite format, would be nice if I could utilize them also 
directly
 > with GDAL. I wonder it there is already a feature request about this.

I agree this would be very useful, almost like having a tile index as a GDAL
data source.  There is a related feature request here
<http://trac.osgeo.org/gdal/ticket/5762>.

Best regards,

Homme

>
 > -Jukka Rahkonen-
 >
 >
 >
 >
 > _______________________________________________
 > gdal-dev mailing list
 > gdal-dev at lists.osgeo.org
 > http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150206/d45adaa1/attachment.html>

From victor.fomin.1 at gmail.com  Fri Feb  6 03:32:22 2015
From: victor.fomin.1 at gmail.com (vf)
Date: Fri, 6 Feb 2015 03:32:22 -0800 (PST)
Subject: [gdal-dev] GDAL 1.11.0 and Cosmo-skymed L1A imagery
In-Reply-To: <201502061028.22513.even.rouault@spatialys.com>
References: <1423213515651-5185900.post@n6.nabble.com>
	<201502061028.22513.even.rouault@spatialys.com>
Message-ID: <1423222342568-5185945.post@n6.nabble.com>

Thank you for the reply, Even

I agree that the patch was firstly to handle correctly dimensions of h5
files : previously it was [width, height, 2] -> nbBands = width. Using
patch, dimensions were correctly interpreted. However, the patch contained
the following code to handle complex data type (see below). Am I
misunderstand something ? 

If I would like to contribute, should I submit a patch to the tracker or
someting else to do ...



/************************************************************************/
/*                            GetDataType()                             */
/*                                                                      */
/*      Transform HDF5 datatype to GDAL datatype                        */
/************************************************************************/

/**
 * Retrieves data type taking to account that file can be CSK Product with
 * complex data
 */
GDALDataType HDF5ImageDataset::GetDataType(hid_t TypeID)
{
    GDALDataType dataType = HDF5Dataset::GetDataType(TypeID);
    if (iSubdatasetType == CSK_PRODUCT)
    {
        // if has 3 dimensions -> complex imagery
        if (ndims == 3)
        {
            if( dataType == GDT_Int16 )
                return GDT_CInt16;
            else if( dataType == GDT_Int32 )
                return GDT_CInt32;
            else if( dataType == GDT_Float32 )
                return GDT_CFloat32;
            else if( dataType == GDT_Float64 )
                return GDT_CFloat64;
        }
    }
    return dataType;
}


/************************************************************************/
/*                          GetDataTypeName()                           */
/*                                                                      */
/*      Return the human readable name of data type                     */
/************************************************************************/

/**
 * Retrieves data type name taking to account that file can be CSK Product
with
 * complex data
 */
const char *HDF5ImageDataset::GetDataTypeName(hid_t TypeID)
{
    GDALDataType dataType = HDF5Dataset::GetDataType(TypeID);
    if (iSubdatasetType == CSK_PRODUCT)
    {
        // if has 3 dimensions -> complex imagery
        if (ndims == 3)
        {
            if( dataType == GDT_Int16 )
                return "Complex 16-bit integer";
            else if( dataType == GDT_Int32 )
                return "Complex 32-bit integer";
            else if( dataType == GDT_Float32 )
                return "Complex 32-bit floating-point";
            else if( dataType == GDT_Float64 )
                return "Complex 64-bit floating-point";
        }
    }

    const char * name = HDF5Dataset::GetDataTypeName( TypeID );
    return name;
}




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-1-11-0-and-Cosmo-skymed-L1A-imagery-tp5185900p5185945.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Fri Feb  6 03:48:57 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 6 Feb 2015 12:48:57 +0100
Subject: [gdal-dev] GDAL 1.11.0 and Cosmo-skymed L1A imagery
In-Reply-To: <1423222342568-5185945.post@n6.nabble.com>
References: <1423213515651-5185900.post@n6.nabble.com>
	<201502061028.22513.even.rouault@spatialys.com>
	<1423222342568-5185945.post@n6.nabble.com>
Message-ID: <201502061248.58021.even.rouault@spatialys.com>

Le vendredi 06 f?vrier 2015 12:32:22, vf a ?crit :
> Thank you for the reply, Even
> 
> I agree that the patch was firstly to handle correctly dimensions of h5
> files : previously it was [width, height, 2] -> nbBands = width. Using
> patch, dimensions were correctly interpreted. However, the patch contained
> the following code to handle complex data type (see below). Am I
> misunderstand something ?

Hum, looking at 
http://trac.osgeo.org/gdal/attachment/ticket/4227/hdf5imagedataset.patch
http://trac.osgeo.org/gdal/attachment/ticket/4227/patchCSK-L1A.diff
http://trac.osgeo.org/gdal/attachment/ticket/4227/hdf5imagedataset.cpp

I can't see the code snippets you mention below... I'm surely missing 
something...

> 
> If I would like to contribute, should I submit a patch to the tracker or
> someting else to do ...

That's the best way yes.

> 
> 
> 
> /************************************************************************/
> /*                            GetDataType()                             */
> /*                                                                      */
> /*      Transform HDF5 datatype to GDAL datatype                        */
> /************************************************************************/
> 
> /**
>  * Retrieves data type taking to account that file can be CSK Product with
>  * complex data
>  */
> GDALDataType HDF5ImageDataset::GetDataType(hid_t TypeID)
> {
>     GDALDataType dataType = HDF5Dataset::GetDataType(TypeID);
>     if (iSubdatasetType == CSK_PRODUCT)
>     {
>         // if has 3 dimensions -> complex imagery
>         if (ndims == 3)
>         {
>             if( dataType == GDT_Int16 )
>                 return GDT_CInt16;
>             else if( dataType == GDT_Int32 )
>                 return GDT_CInt32;
>             else if( dataType == GDT_Float32 )
>                 return GDT_CFloat32;
>             else if( dataType == GDT_Float64 )
>                 return GDT_CFloat64;
>         }
>     }
>     return dataType;
> }
> 
> 
> /************************************************************************/
> /*                          GetDataTypeName()                           */
> /*                                                                      */
> /*      Return the human readable name of data type                     */
> /************************************************************************/
> 
> /**
>  * Retrieves data type name taking to account that file can be CSK Product
> with
>  * complex data
>  */
> const char *HDF5ImageDataset::GetDataTypeName(hid_t TypeID)
> {
>     GDALDataType dataType = HDF5Dataset::GetDataType(TypeID);
>     if (iSubdatasetType == CSK_PRODUCT)
>     {
>         // if has 3 dimensions -> complex imagery
>         if (ndims == 3)
>         {
>             if( dataType == GDT_Int16 )
>                 return "Complex 16-bit integer";
>             else if( dataType == GDT_Int32 )
>                 return "Complex 32-bit integer";
>             else if( dataType == GDT_Float32 )
>                 return "Complex 32-bit floating-point";
>             else if( dataType == GDT_Float64 )
>                 return "Complex 64-bit floating-point";
>         }
>     }
> 
>     const char * name = HDF5Dataset::GetDataTypeName( TypeID );
>     return name;
> }
> 
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/GDAL-1-11-0-and-Cosmo-skymed-L1A-image
> ry-tp5185900p5185945.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From victor.fomin.1 at gmail.com  Fri Feb  6 04:52:15 2015
From: victor.fomin.1 at gmail.com (vf)
Date: Fri, 6 Feb 2015 04:52:15 -0800 (PST)
Subject: [gdal-dev] GDAL 1.11.0 and Cosmo-skymed L1A imagery
In-Reply-To: <201502061248.58021.even.rouault@spatialys.com>
References: <1423213515651-5185900.post@n6.nabble.com>
	<201502061028.22513.even.rouault@spatialys.com>
	<1423222342568-5185945.post@n6.nabble.com>
	<201502061248.58021.even.rouault@spatialys.com>
Message-ID: <1423227135191-5185963.post@n6.nabble.com>

Well, you are right, I do not find neither the code that I pasted before in
the .diff. 
Probably, it should be a local 'patch' used with gdal 1.10.1 to read
correctly CSK imagery. Sorry.

I will look what can be done with this code and gdal 1.11.0 version and put
the patch in the tracker.





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-1-11-0-and-Cosmo-skymed-L1A-imagery-tp5185900p5185963.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Fri Feb  6 08:00:59 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 6 Feb 2015 17:00:59 +0100
Subject: [gdal-dev] GDAL/OGR 1.11.2 RC1 Available for Review
Message-ID: <201502061700.59648.even.rouault@spatialys.com>

Hi,

As announced, I have prepared a GDAL/OGR 1.11.2 release candidate. Please 
review and test.

Peek up an archive among the following ones (by ascending size):

  http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC1.tar.xz
  http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC1.tar.gz
  http://download.osgeo.org/gdal/1.11.2/gdal1112RC1.zip

The gdal-grass plugin has also been regenerated (hasn't been in years!) since 
it has received fixes for GRASS 7.0 compatibility  :

  http://download.osgeo.org/gdal/1.11.2/gdal-grass-1.11.2.tar.gz

A snapshot of the gdalautotest suite is also available :

  http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.tar.gz
  http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.zip

The NEWS file is here :

  http://trac.osgeo.org/gdal/wiki/Release/1.11.2-News

I'll call for a vote promoting it to final at the middle of next week if no 
serious problems are reported before.

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jorge at cartodb.com  Fri Feb  6 10:06:36 2015
From: jorge at cartodb.com (=?UTF-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Fri, 6 Feb 2015 19:06:36 +0100
Subject: [gdal-dev] gdal_merge vs gdalbuildvrt
In-Reply-To: <201502061038.50996.even.rouault@spatialys.com>
References: <54CA5422.8030901@cartodb.com>
	<54D48AB3.7090304@geodata.soton.ac.uk>
	<201502061038.50996.even.rouault@spatialys.com>
Message-ID: <CAPRx4nQnhKu+CvgDqHuSdFL9pymHqrs9c5awxuqurH-FZQuXOw@mail.gmail.com>

Interesting... Thanks for the insights.

And about performance, if I have 1000 JPEG files forming a mosaic, and want
to run gdal tools over that mosaic, which option should I choose?

- Build real merged tif file (gdal_merge)
- Build virtual raster (gdalbuildvrt)

For example, if I want to run gdal_translate over my mosaic, having a
virtual raster would imply reading from 1000 files in disk, while having a
merged tif file would imply reading from just one (much bigger) file.

Which approach would be faster?

On Fri, Feb 6, 2015 at 10:38 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> >  gdalbuildvrt is a more
> > powerful tool that provides a virtual raster that acts as a 'window'
> > into the
> > input datasets, potentially with reprojection amidst other options.
>
> Small correction: gdalbuildvrt can only deal with datasets of the same
> projection.
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Jorge Ar?valo

http://cartodb.com/
Skype ID: jorgecartodb
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150206/93aee0b7/attachment.html>

From mdsumner at gmail.com  Fri Feb  6 17:03:12 2015
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 07 Feb 2015 01:03:12 +0000
Subject: [gdal-dev] NetCDF driver improvements (including groups support)
References: <3B970FB76033264EB34479EC8A365E1101BA31EA11@vwiexc030.acri.local>
Message-ID: <CAAcGz98vQ0a5T5GLX+RmrYhHj292htF33bCnpwcWiH+4viRgOQ@mail.gmail.com>

Hi, this is really interesting to me.

On Fri Feb 06 2015 at 03:11:02 Julien Demaria <Julien.Demaria at acri-st.fr>
wrote:

> Hi GDAL team,
>
> I've implemented several improvements to the NetCDF driver and I would
> like to provide them to the community.
> Main goal of the changes is to add full support of NetCDF-4 including
> groups.
> NetCDF-4 is the future format of ESA Sentinel-3 products (no groups) and
> NASA Ocean Color team is switching their L2/L3 products to NetCDF-4 with
> groups (VIIRS has already switched to the new format in December).
> With the changes NASA L2 products geolocation is automatically handled as
> geolocation arrays and can be reprojected using gdalwarp.
>
>
This sounds great, have you also worked with the L3 binned products? I have
written my own suite of tools in R to read the NASA L3 bin files from the
HDF4 files (using Rcpp), and have made some progress into the  NetCDF4
versions of these. Does your work on the GDAL driver include compound types
like those in the L3 NetCDF4 bin files.  The structure is described here:

http://oceancolor.gsfc.nasa.gov/DOCS/FormatChange.html

I prefer to work with the raw bin values usually rather than always apply a
regridding - but having that capacity via GDAL would be great. I also
wonder if it would be worth providing a vector driver for L3 bins, that
would be my preferred usage ultimately - I need to  apply different
algorithms for chlorophyll-a to the RRS values in the equal-area L3 bins,
my R package is here, it's quite primitive and relies on the Rcpp route for
C++,  but at least does what I need for now.

https://github.com/mdsumner/roc

I'll try to have a closer look at your efforts here soon, but just wanted
to reply now with my perspective.

Thanks!

Cheers, Mike.

I validated with autotests that nothing is broken in tests netcdf.py
> (excepting test 13 but see my point 5), netcdf_cf.py and hdf5.py, using
> NetCDF-3 and 4 libraries.
> I've also tested the new functionalities on various NetCDF-4 files.
> I think the only possible regression could be for marginal cases where a
> file was seen directly as a dataset and is now seen as multiple subdatasets
> (for example if a file has only one var in the top group and has nested
> groups containing variables), but I think this is not very common.
>
> For the moment I have all these changes in local GIT separated commits on
> the latest gdal-1.11 branch, let me know what changes you want and how can
> I provide them.
>
> Changes :
>
> 1) Implement full support for NetCDF-4 groups on reading:
>     - explore recursively all nested groups to create the subdatasets list
>     - subdatasets in nested groups use the /group1/group2/.../groupn/var
> standard
>       NetCDF-4 convention, excepting for variables in the root group which
> do not
>       have a leading slash for backward compatibility
>     - when accessing a subdataset using NETCDF:$file:$path, the leading
> slash is optional
>     - global attributes of each nested group are also collected in the
> GDAL dataset
>       metadata, using the same convention /group1/group2/.../groupn/NC_
> GLOBAL#attr_name,
>       excepting for the root group which do not have a leading slash for
> backward compatibility
>     - when searching for a variable containing auxiliary information on
> the selected subdataset,
>       like coordinate variables or grid_mapping, we now also search in
> parent groups (using NCDFResolveVar).
>       I now this is something not specified at this time in the CF
> convention because CF does not know groups,
>       but it seems logical to me to support this: NetCDF-4 specifies that
> dimensions of a group are
>       shared to its nested groups, so associated coordinate variables
> could be defined as the same level of its
>       corresponding dimension.
>     - reference to coordinate variables using the "coordinates" attribute
> support now also absolute paths,
>       this allow for example to specify coordinate variables located
> outside the group of the selected variable
>       or its parents. Relative paths could be implemented if needed.
>       This feature is used to add support for new NASA Ocean Color L2
> products.
>
> 2) Implement full read/write support for new NetCDF4 types NC_UBYTE,
> NC_USHORT, NC_UINT and NC_STRING, only if NETCDF_HAS_NC4 is defined (and
> only if format=NC4 for writing).
>     Support implemented for variables and attributes.
>     NC_STRING type is supported for reading (scalar and arrays) attributes
> and is used for writing only for array attributes (scalar are still written
> as NC_CHAR).
>     If NETCDF_HAS_NC4 is not defined or format!=NC4, NC_STRING array
> attributes are written as a single NC_CHAR string using the GDAL
> {v1,v2,...} convention.
>     Add missing support for NC_BYTE in CreateBandMetadata() and
> NC_BYTE/SHORT in NCDFPut1DVar().
>
> 3) Add support for new NASA Ocean Color L2 products and ESA Sentinel-3 L1
> or
>     L2 products which use the NetCDF-4 format (with groups for NASA, see
>     http://oceancolor.gsfc.nasa.gov/DOCS/FormatChange.html):
>     - NASA products: simulate a "coordinates" variable attribute to detect
> CF
>       geolocation arrays, and set bBottomUp to FALSE
>     - ESA products: set bBottomUp to FALSE and disable warning on missing
>       Conventions attribute
>
> 4) Fix bug #4554 with a more generic solution by disabling the
> installation of the HDF5 atexit() cleanup routine using H5dont_atexit().
>     Previous fix was to call GDALExit() (for the moment only defined
> gdalwarp.cpp) at the end of every program, which is more painful.
>
> 5) Fix implementation of GetScale/Offset to not always return
> pbSuccess=TRUE.
>     Fix CopyMetadata to handle bands with only scale or offset.
>     ==> WARNING this commit breaks the autotest netcdf_13 (check for
> scale/offset = 1.0/0.0 if no scale or offset is available), but for me it
> is not logical to return always pbSuccess=TRUE
>
> 6) Optimize IReadBlock() and CheckData() handling of partial blocks in the
> x axis by re-using the GDAL block buffer instead of allocating a new
> temporary buffer for each block.
>
> 7) Force block size to 1 scanline for bottom-up datasets if nBlockYSize !=
> 1 instead of raising a fatal error
>     ==> Solve a recent problem raised on the mailing list
>
> 8) Implement Get/SetUnitType using the standard "units" NetCDF attribute
>
> 9) Change default block size to 256x256 instead of scanline (only affect
> file without NetCDF chunking)
>     ==> because I think this is better for a random access to the data,
> but I'm not sure if the community want this change which could impact
> performances
>
> 10) I've also implemented for my needs support for 1D variables by
> simulating 2D datasets with only one row (dimensionless variables are not
> supported for the moment),
>        but this breaks backward compatibility because files containing
> only one variable and associated 1D coordinate variables are now seen as
> multiple sub datasets...
>        and maybe this is not the goal of GDAL to give access to
> not-2D-raster variables (but sometimes it's useful ;-) )
>
> Thanks for GDAL!
>
> Julien
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150207/424c6e7c/attachment.html>

From jluis at ualg.pt  Sat Feb  7 14:57:44 2015
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat, 07 Feb 2015 22:57:44 -0000
Subject: [gdal-dev] NetCDF driver improvements (including groups support)
In-Reply-To: <3B970FB76033264EB34479EC8A365E1101BA31EA11@vwiexc030.acri.local>
References: <3B970FB76033264EB34479EC8A365E1101BA31EA11@vwiexc030.acri.local>
Message-ID: <op.xtpl2il7dbaoe8@macmarilu>

Julian,

Thanks for the offering.
One thing, could you please check if with your improvements the bug #5291  
is fixed?

Thanks

Joaquim


> Hi GDAL team,
>
> I've implemented several improvements to the NetCDF driver and I would  
> like to provide them to the community.
> Main goal of the changes is to add full support of NetCDF-4 including  
> groups.
> NetCDF-4 is the future format of ESA Sentinel-3 products (no groups) and  
> NASA Ocean Color team is switching their L2/L3 products to NetCDF-4 with  
> groups (VIIRS has already switched to the new format in December).
> With the changes NASA L2 products geolocation is automatically handled  
> as geolocation arrays and can be reprojected using gdalwarp.
>
> I validated with autotests that nothing is broken in tests netcdf.py  
> (excepting test 13 but see my point 5), netcdf_cf.py and hdf5.py, using  
> NetCDF-3 and 4 libraries.
> I've also tested the new functionalities on various NetCDF-4 files.
> I think the only possible regression could be for marginal cases where a  
> file was seen directly as a dataset and is now seen as multiple  
> subdatasets (for example if a file has only one var in the top group and  
> has nested groups containing variables), but I think this is not very  
> common.
>
> For the moment I have all these changes in local GIT separated commits  
> on the latest gdal-1.11 branch, let me know what changes you want and  
> how can I provide them.
>
> Changes :
>
> 1) Implement full support for NetCDF-4 groups on reading:
>     - explore recursively all nested groups to create the subdatasets  
> list
>     - subdatasets in nested groups use the /group1/group2/.../groupn/var  
> standard
>       NetCDF-4 convention, excepting for variables in the root group  
> which do not
>       have a leading slash for backward compatibility
>     - when accessing a subdataset using NETCDF:$file:$path, the leading  
> slash is optional
>     - global attributes of each nested group are also collected in the  
> GDAL dataset
>       metadata, using the same convention  
> /group1/group2/.../groupn/NC_GLOBAL#attr_name,
>       excepting for the root group which do not have a leading slash for  
> backward compatibility
>     - when searching for a variable containing auxiliary information on  
> the selected subdataset,
>       like coordinate variables or grid_mapping, we now also search in  
> parent groups (using NCDFResolveVar).
>       I now this is something not specified at this time in the CF  
> convention because CF does not know groups,
>       but it seems logical to me to support this: NetCDF-4 specifies  
> that dimensions of a group are
>       shared to its nested groups, so associated coordinate variables  
> could be defined as the same level of its
>       corresponding dimension.
>     - reference to coordinate variables using the "coordinates"  
> attribute support now also absolute paths,
>       this allow for example to specify coordinate variables located  
> outside the group of the selected variable
>       or its parents. Relative paths could be implemented if needed.
>       This feature is used to add support for new NASA Ocean Color L2  
> products.
>
> 2) Implement full read/write support for new NetCDF4 types NC_UBYTE,  
> NC_USHORT, NC_UINT and NC_STRING, only if NETCDF_HAS_NC4 is defined (and  
> only if format=NC4 for writing).
>     Support implemented for variables and attributes.
>     NC_STRING type is supported for reading (scalar and arrays)  
> attributes and is used for writing only for array attributes (scalar are  
> still written as NC_CHAR).
>     If NETCDF_HAS_NC4 is not defined or format!=NC4, NC_STRING array  
> attributes are written as a single NC_CHAR string using the GDAL  
> {v1,v2,...} convention.
>     Add missing support for NC_BYTE in CreateBandMetadata() and  
> NC_BYTE/SHORT in NCDFPut1DVar().
>
> 3) Add support for new NASA Ocean Color L2 products and ESA Sentinel-3  
> L1 or
>     L2 products which use the NetCDF-4 format (with groups for NASA, see
>     http://oceancolor.gsfc.nasa.gov/DOCS/FormatChange.html):
>     - NASA products: simulate a "coordinates" variable attribute to  
> detect CF
>       geolocation arrays, and set bBottomUp to FALSE
>     - ESA products: set bBottomUp to FALSE and disable warning on missing
>       Conventions attribute
>
> 4) Fix bug #4554 with a more generic solution by disabling the  
> installation of the HDF5 atexit() cleanup routine using H5dont_atexit().
>     Previous fix was to call GDALExit() (for the moment only defined  
> gdalwarp.cpp) at the end of every program, which is more painful.
>
> 5) Fix implementation of GetScale/Offset to not always return  
> pbSuccess=TRUE.
>     Fix CopyMetadata to handle bands with only scale or offset.
>     ==> WARNING this commit breaks the autotest netcdf_13 (check for  
> scale/offset = 1.0/0.0 if no scale or offset is available), but for me  
> it is not logical to return always pbSuccess=TRUE
>
> 6) Optimize IReadBlock() and CheckData() handling of partial blocks in  
> the x axis by re-using the GDAL block buffer instead of allocating a new  
> temporary buffer for each block.
>
> 7) Force block size to 1 scanline for bottom-up datasets if nBlockYSize  
> != 1 instead of raising a fatal error
>     ==> Solve a recent problem raised on the mailing list
>
> 8) Implement Get/SetUnitType using the standard "units" NetCDF attribute
>
> 9) Change default block size to 256x256 instead of scanline (only affect  
> file without NetCDF chunking)
>     ==> because I think this is better for a random access to the data,  
> but I'm not sure if the community want this change which could impact  
> performances
>
> 10) I've also implemented for my needs support for 1D variables by  
> simulating 2D datasets with only one row (dimensionless variables are  
> not supported for the moment),
>        but this breaks backward compatibility because files containing  
> only one variable and associated 1D coordinate variables are now seen as  
> multiple sub datasets...
>        and maybe this is not the goal of GDAL to give access to  
> not-2D-raster variables (but sometimes it's useful ;-) )
>
> Thanks for GDAL!
>
> Julien
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From grb at skogoglandskap.no  Mon Feb  9 07:37:20 2015
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Mon, 9 Feb 2015 15:37:20 +0000
Subject: [gdal-dev] Hidden regression in GDAL 1.11.0 - gdal_rasterize with
 postgis silently fails to render many polygons.
Message-ID: <8E9D3285-35A5-4208-AC21-B962FBD2805A@skogoglandskap.no>



TLDR;

gdal_rasterize has begun silently producing wrong output at least since GDAL 1.11.0. 
Whenever  >500 polygons are present in the database query result (and perhaps under other circumstances), only 500 will be drawn. 


Hi,

I am rasterizing many maps and areas of maps in SRID 25833 using gdal_rasterize with a postgis database. 

When I use GDAL 1.11, the output is missing much of the data, despite gdal_rasterize reporting completing successfully. 
With GDAL 1.09 and GDAL 1.10, the output is correct and complete and identical.

I'm posting here to gather more information about the bug and also to raise an alarm for anyone using postgis/gdal_rasterize (1.11) in their data workflow over the last year. 

Background of bug
--------

Versions:  

POSTGIS="2.1.5 r13152" GEOS="3.4.2-CAPI-1.8.2 r3921" PROJ="Rel. 4.8.0, 6 March 
2012" GDAL="GDAL 1.11.0, released 2014/04/16"    (from EPEL RPM)

A. The source table in postgis is registered in geometry_columns correctly. 

B. I run this command in Centos linux. 

gdal_rasterize -te 1060000 7865000 1120000 7940000 -a jord -init 255 -tr 100 100 -a_nodata 255 -a_srs 'EPSG:25833' -co 'TILED=YES' -co 'BIGTIFF=IF_SAFER' -co 'COMPRESS=PACKBITS' -co 'PREDICTOR=1' -co 'ZLEVEL=1' -ot Byte PG:"host=XXXX'' dbname='XXXX' user='XXXX' password='XXXX' tables='XXXX'" -sql "SELECT xxxx FROM xxxx WHERE st_intersects(geo, ST_GeometryFromText('POLYGON((1060000 7865000,1060000 7940000,1120000 7940000, 1120000 7865000, 1060000 7865000))',25833)) " xxxx.tif

C. The SQL query (-sql), when run directly on postgres with COUNT(), produces this output. 

 count 
-------
  3959
(1 row)

D. GDAL 1.9.2 and GDAL 1.10.0 produce a TIF file of 12238 bytes which is visually complete. 

E. GDAL 1.11.0 produces a TIF file of 10920 bytes which is missing many polygons.

F. Console output from gdal_rasterize in all 3 cases is as follows;
0...10...20...30...40...50...60...70...80...90...100 - done.

G. PG server log output for GDAL 1.9.2 and GDAL 1.10.0

(nothing...)

PG server log output for GDAL 1.11.0

< 2015-02-09 13:52:11.720 CET >STATEMENT:  FETCH 500 in OGRPGLayerReader0xd5ce50
< 2015-02-09 13:52:11.720 CET >ERROR:  cursor "ogrpglayerreader0xd5ce50" does not exist
< 2015-02-09 13:52:11.720 CET >STATEMENT:  CLOSE OGRPGLayerReader0xd5ce50
< 2015-02-09 13:52:18.657 CET >ERROR:  cursor "ogrpglayerreader0x1fd8e50" does not exist

H. Debug mode output for GDAL 1.11.0

OGR: OGROpen(...) succeeded as PostgreSQL.
GDAL: QuietDelete(xxxx.tif) invoking Delete()
GDAL: GDALOpen(xxxx.tif, this=0x259a8f0) succeeds as GTiff.
GDAL: GDALDefaultOverviews::OverviewScan()
GDAL: GDALClose(xxxx.tif, this=0x259a8f0)
GDAL: GDALDriver::Create(GTiff,xxxx.tif,600,750,1,Byte,0x25744e0)
PG: Primary key name (FID): gid
PG: Using column 'gid' as FID for table 'xxxx_25833'
GDAL: Rasterizer operating on 1 swaths of 750 scanlines.
0...10...20...30...40...50...60...70...80...90...100 - done.
PG: 500 features read on layer 'sql_statement'.
GDAL: GDALClose(xxxx.tif, this=0x2598930)

I. Debug mode output for GDAL 1.10.0

OGR: OGROpen(xxxx) succeeded as PostgreSQL.
GDAL: QuietDelete(xxxx) invoking Delete()
GDAL: GDALOpen(xxxx) succeeds as GTiff.
GDAL: GDALDefaultOverviews::OverviewScan()
GDAL: GDALClose(xxxx.tif, this=0xeb5030)
GDAL: GDALDriver::Create(GTiff,xxxx.tif,600,750,1,Byte,0xe8ede0)
PG: Primary key name (FID): gid
PG: Using column 'gid' as FID for table 'dmk_25833'
PG: Layer 'xxxx_25833' geometry type: GEOMETRY:Unknown (any), Dim=2
0...10...20...30...40...50...60...70...80...90...100 - done.
PG: 3959 features read on layer 'sql_statement'.
GDAL: GDALClose(xxxx.tif, this=0xeb2fd0)


As well as local unix sockets I've tested TCP connections to a remote PG database from GDAL1.10 and GDAL1.11 clients, and I've tested with other data layers. Every time, I'm getting the same problem e.g. 500 features out 8000.

Has anyone else experienced anything similar? 

I've spent some time looking through the source but I wasn't able to determine exactly where the problem is occuring. 
It seems to somehow be related to the select page size (500 rows) being used in place of the total feature count; or perhaps some logic mistake causing the reads to finish after 1 page is complete.

Graeme Bell

From even.rouault at spatialys.com  Mon Feb  9 09:01:21 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 9 Feb 2015 18:01:21 +0100
Subject: [gdal-dev] Hidden regression in GDAL 1.11.0 - gdal_rasterize
	with postgis silently fails to render many polygons.
In-Reply-To: <8E9D3285-35A5-4208-AC21-B962FBD2805A@skogoglandskap.no>
References: <8E9D3285-35A5-4208-AC21-B962FBD2805A@skogoglandskap.no>
Message-ID: <201502091801.21361.even.rouault@spatialys.com>

Graeme,

I tried to reproduce your issue as close as possible but couldn't replicate the bug.

I create a postgis layer with 360x180 polygons with the following Python script

~~~~

from osgeo import ogr
from osgeo import osr

ds = ogr.Open('pg:dbname=autotest')
srs = osr.SpatialReference()
srs.ImportFromEPSG(4326)
lyr = ds.CreateLayer('world_diamonds', geom_type = ogr.wkbPolygon, srs = srs, options = ['OVERWRITE=YES'])
lyr.StartTransaction()
for y in range(180):
    for x in range(360):
        f = ogr.Feature(lyr.GetLayerDefn())
        x0 = x - 180 + 0.5
        y0 = 90 - y - 1
        f.SetGeometry(ogr.CreateGeometryFromWkt('POLYGON((%f %f,%f %f,%f %f,%f %f,%f %f))' % (x0,y0,x0-0.5,y0+0.5,x0,y0+1,x0+0.5,y0+0.5,x0,y0)))
        lyr.CreateFeature(f)
lyr.CommitTransaction()

~~~~

So continuous diamond shaped polygons (at the beginning, I created straight
polygons, but for some reason, the rasterizing algorithm doesn't manage to
draw such polygons, but that's a totally unrelated issue)

And then:

 gdal_rasterize -sql "select * from world_diamonds where st_intersects(wkb_geometry, ST_GeometryFromText('POLYGON((-180 -90,-180 90,180 90,180 -90,-180 -90))',4326))"  \
	 "pg:dbname=autotest"  out.tif -burn 255 -ts 4000 2000  -a_srs EPSG:4326 -te -180 -90 180 90

And the output looks good with both gdal 1.11 branch (haven't tested with 1.11.0 but
there was no significant change in the PG driver) and trunk.

Could you try the above ?


Compiled in DEBUG mode, I can see many
"PG: PQexecParams(FETCH 500 in OGRPGLayerReader0x2316c50) = PGRES_TUPLES_OK, ntuples = 500"
traces as expected. I don't understand why in your use case it fails at the first FETCH.

Could you try compiling GDAL with ./configure --enable-debug
so as to have more verbose traces in the PG driver ?


Even


Le lundi 09 f?vrier 2015 16:37:20, Graeme B. Bell a ?crit :
> TLDR;
> 
> gdal_rasterize has begun silently producing wrong output at least since
> GDAL 1.11.0. Whenever  >500 polygons are present in the database query
> result (and perhaps under other circumstances), only 500 will be drawn.
> 
> 
> Hi,
> 
> I am rasterizing many maps and areas of maps in SRID 25833 using
> gdal_rasterize with a postgis database.
> 
> When I use GDAL 1.11, the output is missing much of the data, despite
> gdal_rasterize reporting completing successfully. With GDAL 1.09 and GDAL
> 1.10, the output is correct and complete and identical.
> 
> I'm posting here to gather more information about the bug and also to raise
> an alarm for anyone using postgis/gdal_rasterize (1.11) in their data
> workflow over the last year.
> 
> Background of bug
> --------
> 
> Versions:
> 
> POSTGIS="2.1.5 r13152" GEOS="3.4.2-CAPI-1.8.2 r3921" PROJ="Rel. 4.8.0, 6
> March 2012" GDAL="GDAL 1.11.0, released 2014/04/16"    (from EPEL RPM)
> 
> A. The source table in postgis is registered in geometry_columns correctly.
> 
> B. I run this command in Centos linux.
> 
> gdal_rasterize -te 1060000 7865000 1120000 7940000 -a jord -init 255 -tr
> 100 100 -a_nodata 255 -a_srs 'EPSG:25833' -co 'TILED=YES' -co
> 'BIGTIFF=IF_SAFER' -co 'COMPRESS=PACKBITS' -co 'PREDICTOR=1' -co
> 'ZLEVEL=1' -ot Byte PG:"host=XXXX'' dbname='XXXX' user='XXXX'
> password='XXXX' tables='XXXX'" -sql "SELECT xxxx FROM xxxx WHERE
> st_intersects(geo, ST_GeometryFromText('POLYGON((1060000 7865000,1060000
> 7940000,1120000 7940000, 1120000 7865000, 1060000 7865000))',25833)) "
> xxxx.tif
> 
> C. The SQL query (-sql), when run directly on postgres with COUNT(),
> produces this output.
> 
>  count
> -------
>   3959
> (1 row)
> 
> D. GDAL 1.9.2 and GDAL 1.10.0 produce a TIF file of 12238 bytes which is
> visually complete.
> 
> E. GDAL 1.11.0 produces a TIF file of 10920 bytes which is missing many
> polygons.
> 
> F. Console output from gdal_rasterize in all 3 cases is as follows;
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> G. PG server log output for GDAL 1.9.2 and GDAL 1.10.0
> 
> (nothing...)
> 
> PG server log output for GDAL 1.11.0
> 
> < 2015-02-09 13:52:11.720 CET >STATEMENT:  FETCH 500 in
> OGRPGLayerReader0xd5ce50 < 2015-02-09 13:52:11.720 CET >ERROR:  cursor
> "ogrpglayerreader0xd5ce50" does not exist < 2015-02-09 13:52:11.720 CET
> >STATEMENT:  CLOSE OGRPGLayerReader0xd5ce50 < 2015-02-09 13:52:18.657 CET
> >ERROR:  cursor "ogrpglayerreader0x1fd8e50" does not exist
> 
> H. Debug mode output for GDAL 1.11.0
> 
> OGR: OGROpen(...) succeeded as PostgreSQL.
> GDAL: QuietDelete(xxxx.tif) invoking Delete()
> GDAL: GDALOpen(xxxx.tif, this=0x259a8f0) succeeds as GTiff.
> GDAL: GDALDefaultOverviews::OverviewScan()
> GDAL: GDALClose(xxxx.tif, this=0x259a8f0)
> GDAL: GDALDriver::Create(GTiff,xxxx.tif,600,750,1,Byte,0x25744e0)
> PG: Primary key name (FID): gid
> PG: Using column 'gid' as FID for table 'xxxx_25833'
> GDAL: Rasterizer operating on 1 swaths of 750 scanlines.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> PG: 500 features read on layer 'sql_statement'.
> GDAL: GDALClose(xxxx.tif, this=0x2598930)
> 
> I. Debug mode output for GDAL 1.10.0
> 
> OGR: OGROpen(xxxx) succeeded as PostgreSQL.
> GDAL: QuietDelete(xxxx) invoking Delete()
> GDAL: GDALOpen(xxxx) succeeds as GTiff.
> GDAL: GDALDefaultOverviews::OverviewScan()
> GDAL: GDALClose(xxxx.tif, this=0xeb5030)
> GDAL: GDALDriver::Create(GTiff,xxxx.tif,600,750,1,Byte,0xe8ede0)
> PG: Primary key name (FID): gid
> PG: Using column 'gid' as FID for table 'dmk_25833'
> PG: Layer 'xxxx_25833' geometry type: GEOMETRY:Unknown (any), Dim=2
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> PG: 3959 features read on layer 'sql_statement'.
> GDAL: GDALClose(xxxx.tif, this=0xeb2fd0)
> 
> 
> As well as local unix sockets I've tested TCP connections to a remote PG
> database from GDAL1.10 and GDAL1.11 clients, and I've tested with other
> data layers. Every time, I'm getting the same problem e.g. 500 features
> out 8000.
> 
> Has anyone else experienced anything similar?
> 
> I've spent some time looking through the source but I wasn't able to
> determine exactly where the problem is occuring. It seems to somehow be
> related to the select page size (500 rows) being used in place of the
> total feature count; or perhaps some logic mistake causing the reads to
> finish after 1 page is complete.
> 
> Graeme Bell
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From grb at skogoglandskap.no  Mon Feb  9 09:07:05 2015
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Mon, 9 Feb 2015 17:07:05 +0000
Subject: [gdal-dev] Hidden regression in GDAL 1.11.0 - gdal_rasterize
 with postgis silently fails to render many polygons.
In-Reply-To: <201502091801.21361.even.rouault@spatialys.com>
References: <8E9D3285-35A5-4208-AC21-B962FBD2805A@skogoglandskap.no>
	<201502091801.21361.even.rouault@spatialys.com>
Message-ID: <9D00E8FE-7F3C-42D4-A431-3B74D16FC523@skogoglandskap.no>



>Graeme,

> I tried to reproduce your issue as close as possible but couldn't replicate the bug.

>I create a postgis layer with 360x180 polygons with the following Python script


Hi Even, I'll try that now (as far as I have time today, this has eaten a bit of time to investigate).

It may be helpful to know I'm using Centos 7 with EPEL RPMs. 

gdal.x86_64                  1.11.0-2.el7                        @epel    

I also checked the source of the EPEL SRPM against the GDAL distribution, diff didn't bring up any surprises.





On 09 Feb 2015, at 18:01, Even Rouault <even.rouault at spatialys.com> wrote:

> Graeme,
> 
> I tried to reproduce your issue as close as possible but couldn't replicate the bug.
> 
> I create a postgis layer with 360x180 polygons with the following Python script
> 
> ~~~~
> 
> from osgeo import ogr
> from osgeo import osr
> 
> ds = ogr.Open('pg:dbname=autotest')
> srs = osr.SpatialReference()
> srs.ImportFromEPSG(4326)
> lyr = ds.CreateLayer('world_diamonds', geom_type = ogr.wkbPolygon, srs = srs, options = ['OVERWRITE=YES'])
> lyr.StartTransaction()
> for y in range(180):
>    for x in range(360):
>        f = ogr.Feature(lyr.GetLayerDefn())
>        x0 = x - 180 + 0.5
>        y0 = 90 - y - 1
>        f.SetGeometry(ogr.CreateGeometryFromWkt('POLYGON((%f %f,%f %f,%f %f,%f %f,%f %f))' % (x0,y0,x0-0.5,y0+0.5,x0,y0+1,x0+0.5,y0+0.5,x0,y0)))
>        lyr.CreateFeature(f)
> lyr.CommitTransaction()
> 
> ~~~~
> 
> So continuous diamond shaped polygons (at the beginning, I created straight
> polygons, but for some reason, the rasterizing algorithm doesn't manage to
> draw such polygons, but that's a totally unrelated issue)
> 
> And then:
> 
> gdal_rasterize -sql "select * from world_diamonds where st_intersects(wkb_geometry, ST_GeometryFromText('POLYGON((-180 -90,-180 90,180 90,180 -90,-180 -90))',4326))"  \
> 	 "pg:dbname=autotest"  out.tif -burn 255 -ts 4000 2000  -a_srs EPSG:4326 -te -180 -90 180 90
> 
> And the output looks good with both gdal 1.11 branch (haven't tested with 1.11.0 but
> there was no significant change in the PG driver) and trunk.
> 
> Could you try the above ?
> 
> 
> Compiled in DEBUG mode, I can see many
> "PG: PQexecParams(FETCH 500 in OGRPGLayerReader0x2316c50) = PGRES_TUPLES_OK, ntuples = 500"
> traces as expected. I don't understand why in your use case it fails at the first FETCH.
> 
> Could you try compiling GDAL with ./configure --enable-debug
> so as to have more verbose traces in the PG driver ?
> 
> 
> Even
> 
> 
> Le lundi 09 f?vrier 2015 16:37:20, Graeme B. Bell a ?crit :
>> TLDR;
>> 
>> gdal_rasterize has begun silently producing wrong output at least since
>> GDAL 1.11.0. Whenever  >500 polygons are present in the database query
>> result (and perhaps under other circumstances), only 500 will be drawn.
>> 
>> 
>> Hi,
>> 
>> I am rasterizing many maps and areas of maps in SRID 25833 using
>> gdal_rasterize with a postgis database.
>> 
>> When I use GDAL 1.11, the output is missing much of the data, despite
>> gdal_rasterize reporting completing successfully. With GDAL 1.09 and GDAL
>> 1.10, the output is correct and complete and identical.
>> 
>> I'm posting here to gather more information about the bug and also to raise
>> an alarm for anyone using postgis/gdal_rasterize (1.11) in their data
>> workflow over the last year.
>> 
>> Background of bug
>> --------
>> 
>> Versions:
>> 
>> POSTGIS="2.1.5 r13152" GEOS="3.4.2-CAPI-1.8.2 r3921" PROJ="Rel. 4.8.0, 6
>> March 2012" GDAL="GDAL 1.11.0, released 2014/04/16"    (from EPEL RPM)
>> 
>> A. The source table in postgis is registered in geometry_columns correctly.
>> 
>> B. I run this command in Centos linux.
>> 
>> gdal_rasterize -te 1060000 7865000 1120000 7940000 -a jord -init 255 -tr
>> 100 100 -a_nodata 255 -a_srs 'EPSG:25833' -co 'TILED=YES' -co
>> 'BIGTIFF=IF_SAFER' -co 'COMPRESS=PACKBITS' -co 'PREDICTOR=1' -co
>> 'ZLEVEL=1' -ot Byte PG:"host=XXXX'' dbname='XXXX' user='XXXX'
>> password='XXXX' tables='XXXX'" -sql "SELECT xxxx FROM xxxx WHERE
>> st_intersects(geo, ST_GeometryFromText('POLYGON((1060000 7865000,1060000
>> 7940000,1120000 7940000, 1120000 7865000, 1060000 7865000))',25833)) "
>> xxxx.tif
>> 
>> C. The SQL query (-sql), when run directly on postgres with COUNT(),
>> produces this output.
>> 
>> count
>> -------
>>  3959
>> (1 row)
>> 
>> D. GDAL 1.9.2 and GDAL 1.10.0 produce a TIF file of 12238 bytes which is
>> visually complete.
>> 
>> E. GDAL 1.11.0 produces a TIF file of 10920 bytes which is missing many
>> polygons.
>> 
>> F. Console output from gdal_rasterize in all 3 cases is as follows;
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>> 
>> G. PG server log output for GDAL 1.9.2 and GDAL 1.10.0
>> 
>> (nothing...)
>> 
>> PG server log output for GDAL 1.11.0
>> 
>> < 2015-02-09 13:52:11.720 CET >STATEMENT:  FETCH 500 in
>> OGRPGLayerReader0xd5ce50 < 2015-02-09 13:52:11.720 CET >ERROR:  cursor
>> "ogrpglayerreader0xd5ce50" does not exist < 2015-02-09 13:52:11.720 CET
>>> STATEMENT:  CLOSE OGRPGLayerReader0xd5ce50 < 2015-02-09 13:52:18.657 CET
>>> ERROR:  cursor "ogrpglayerreader0x1fd8e50" does not exist
>> 
>> H. Debug mode output for GDAL 1.11.0
>> 
>> OGR: OGROpen(...) succeeded as PostgreSQL.
>> GDAL: QuietDelete(xxxx.tif) invoking Delete()
>> GDAL: GDALOpen(xxxx.tif, this=0x259a8f0) succeeds as GTiff.
>> GDAL: GDALDefaultOverviews::OverviewScan()
>> GDAL: GDALClose(xxxx.tif, this=0x259a8f0)
>> GDAL: GDALDriver::Create(GTiff,xxxx.tif,600,750,1,Byte,0x25744e0)
>> PG: Primary key name (FID): gid
>> PG: Using column 'gid' as FID for table 'xxxx_25833'
>> GDAL: Rasterizer operating on 1 swaths of 750 scanlines.
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>> PG: 500 features read on layer 'sql_statement'.
>> GDAL: GDALClose(xxxx.tif, this=0x2598930)
>> 
>> I. Debug mode output for GDAL 1.10.0
>> 
>> OGR: OGROpen(xxxx) succeeded as PostgreSQL.
>> GDAL: QuietDelete(xxxx) invoking Delete()
>> GDAL: GDALOpen(xxxx) succeeds as GTiff.
>> GDAL: GDALDefaultOverviews::OverviewScan()
>> GDAL: GDALClose(xxxx.tif, this=0xeb5030)
>> GDAL: GDALDriver::Create(GTiff,xxxx.tif,600,750,1,Byte,0xe8ede0)
>> PG: Primary key name (FID): gid
>> PG: Using column 'gid' as FID for table 'dmk_25833'
>> PG: Layer 'xxxx_25833' geometry type: GEOMETRY:Unknown (any), Dim=2
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>> PG: 3959 features read on layer 'sql_statement'.
>> GDAL: GDALClose(xxxx.tif, this=0xeb2fd0)
>> 
>> 
>> As well as local unix sockets I've tested TCP connections to a remote PG
>> database from GDAL1.10 and GDAL1.11 clients, and I've tested with other
>> data layers. Every time, I'm getting the same problem e.g. 500 features
>> out 8000.
>> 
>> Has anyone else experienced anything similar?
>> 
>> I've spent some time looking through the source but I wasn't able to
>> determine exactly where the problem is occuring. It seems to somehow be
>> related to the select page size (500 rows) being used in place of the
>> total feature count; or perhaps some logic mistake causing the reads to
>> finish after 1 page is complete.
>> 
>> Graeme Bell
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com


From grb at skogoglandskap.no  Mon Feb  9 09:30:09 2015
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Mon, 9 Feb 2015 17:30:09 +0000
Subject: [gdal-dev] Hidden regression in GDAL 1.11.0 - gdal_rasterize
 with postgis silently fails to render many polygons.
In-Reply-To: <201502091801.21361.even.rouault@spatialys.com>
References: <8E9D3285-35A5-4208-AC21-B962FBD2805A@skogoglandskap.no>
	<201502091801.21361.even.rouault@spatialys.com>
Message-ID: <5B05E54E-BEF0-42D0-A313-C6C1A73A804C@skogoglandskap.no>


Hi Even,  thanks very much for this. 

I setup the DB with    createdb autotest; echo "create extension postgis;" | psql autotest

Then I did your test. Annoyingly, it worked fine! 
Then I redid my own tests. They still didn't work. 
So I varied all the parameters between the two examples until I found the one that triggers it.

GOT IT! :-)

It's the tables parameter that triggers it. I have used 'tables' since 2012 to avoid doing a scan of the DB because we have a LOT of tables here (e.g. >1 TB of postgis data).


gdal_rasterize -sql "select * from world_diamonds where st_intersects(wkb_geometry, ST_GeometryFromText('POLYGON((-180 -90,-180 90,180 90,180 -90,-180 -90))',4326))"   "pg:dbname=autotest"  out.tif -burn 255 -ts 4000 2000  -a_srs EPSG:4326 -te -180 -90 180 90 --debug ON

PG: DBName="autotest"
PG: PostgreSQL version string : 'PostgreSQL 9.3.5 on x86_64-unknown-linux-gnu, compiled by gcc (GCC) 4.8.2 20140120 (Red Hat 4.8.2-16), 64-bit'
PG: PostGIS version string : '2.1 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
OGR: OGROpen(pg:dbname=autotest/0x9f65f0) succeeded as PostgreSQL.
GDAL: QuietDelete(out.tif) invoking Delete()
GDAL: GDALOpen(out.tif, this=0xa292e0) succeeds as GTiff.
GDAL: GDALDefaultOverviews::OverviewScan()
GDAL: GDALClose(out.tif, this=0xa292e0)
GDAL: GDALDriver::Create(GTiff,out.tif,4000,2000,1,Float64,(nil))
GDAL: Rasterizer operating on 7 swaths of 312 scanlines.
0...10...20...30...40...50...60...70...80...90...100 - done.
PG: 64800 features read on layer 'sql_statement'.              <-------------
GDAL: GDALClose(out.tif, this=0xa283d0)

whereas

gdal_rasterize -sql "select * from world_diamonds where st_intersects(wkb_geometry, ST_GeometryFromText('POLYGON((-180 -90,-180 90,180 90,180 -90,-180 -90))',4326))"   "pg:dbname=autotest tables='world_diamonds'"  out.tif -burn 255 -ts 4000 2000  -a_srs EPSG:4326 -te -180 -90 180 90 --debug ON

PG: DBName="autotest"
PG: PostgreSQL version string : 'PostgreSQL 9.3.5 on x86_64-unknown-linux-gnu, compiled by gcc (GCC) 4.8.2 20140120 (Red Hat 4.8.2-16), 64-bit'
PG: PostGIS version string : '2.1 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
OGR: OGROpen(pg:dbname=autotest tables='world_diamonds'/0x1668a10) succeeded as PostgreSQL.
GDAL: QuietDelete(out.tif) invoking Delete()
GDAL: GDALOpen(out.tif, this=0x1688b40) succeeds as GTiff.
GDAL: GDALDefaultOverviews::OverviewScan()
GDAL: GDALClose(out.tif, this=0x1688b40)
GDAL: GDALDriver::Create(GTiff,out.tif,36,18,1,Float64,(nil))
PG: Primary key name (FID): ogc_fid
PG: Using column 'ogc_fid' as FID for table 'world_diamonds'
GDAL: Rasterizer operating on 1 swaths of 18 scanlines.
0...10...20...30...40...50...60...70...80...90...100 - done.
PG: 500 features read on layer 'sql_statement'.                <-------------
GDAL: GDALClose(out.tif, this=0x1686720)





Graeme Bell




On 09 Feb 2015, at 18:01, Even Rouault <even.rouault at spatialys.com> wrote:

> Graeme,
> 
> I tried to reproduce your issue as close as possible but couldn't replicate the bug.
> 
> I create a postgis layer with 360x180 polygons with the following Python script
> 
> ~~~~
> 
> from osgeo import ogr
> from osgeo import osr
> 
> ds = ogr.Open('pg:dbname=autotest')
> srs = osr.SpatialReference()
> srs.ImportFromEPSG(4326)
> lyr = ds.CreateLayer('world_diamonds', geom_type = ogr.wkbPolygon, srs = srs, options = ['OVERWRITE=YES'])
> lyr.StartTransaction()
> for y in range(180):
>    for x in range(360):
>        f = ogr.Feature(lyr.GetLayerDefn())
>        x0 = x - 180 + 0.5
>        y0 = 90 - y - 1
>        f.SetGeometry(ogr.CreateGeometryFromWkt('POLYGON((%f %f,%f %f,%f %f,%f %f,%f %f))' % (x0,y0,x0-0.5,y0+0.5,x0,y0+1,x0+0.5,y0+0.5,x0,y0)))
>        lyr.CreateFeature(f)
> lyr.CommitTransaction()
> 
> ~~~~
> 
> So continuous diamond shaped polygons (at the beginning, I created straight
> polygons, but for some reason, the rasterizing algorithm doesn't manage to
> draw such polygons, but that's a totally unrelated issue)
> 
> And then:
> 
> gdal_rasterize -sql "select * from world_diamonds where st_intersects(wkb_geometry, ST_GeometryFromText('POLYGON((-180 -90,-180 90,180 90,180 -90,-180 -90))',4326))"  \
> 	 "pg:dbname=autotest"  out.tif -burn 255 -ts 4000 2000  -a_srs EPSG:4326 -te -180 -90 180 90
> 
> And the output looks good with both gdal 1.11 branch (haven't tested with 1.11.0 but
> there was no significant change in the PG driver) and trunk.
> 
> Could you try the above ?
> 
> 
> Compiled in DEBUG mode, I can see many
> "PG: PQexecParams(FETCH 500 in OGRPGLayerReader0x2316c50) = PGRES_TUPLES_OK, ntuples = 500"
> traces as expected. I don't understand why in your use case it fails at the first FETCH.
> 
> Could you try compiling GDAL with ./configure --enable-debug
> so as to have more verbose traces in the PG driver ?
> 
> 
> Even
> 
> 
> Le lundi 09 f?vrier 2015 16:37:20, Graeme B. Bell a ?crit :
>> TLDR;
>> 
>> gdal_rasterize has begun silently producing wrong output at least since
>> GDAL 1.11.0. Whenever  >500 polygons are present in the database query
>> result (and perhaps under other circumstances), only 500 will be drawn.
>> 
>> 
>> Hi,
>> 
>> I am rasterizing many maps and areas of maps in SRID 25833 using
>> gdal_rasterize with a postgis database.
>> 
>> When I use GDAL 1.11, the output is missing much of the data, despite
>> gdal_rasterize reporting completing successfully. With GDAL 1.09 and GDAL
>> 1.10, the output is correct and complete and identical.
>> 
>> I'm posting here to gather more information about the bug and also to raise
>> an alarm for anyone using postgis/gdal_rasterize (1.11) in their data
>> workflow over the last year.
>> 
>> Background of bug
>> --------
>> 
>> Versions:
>> 
>> POSTGIS="2.1.5 r13152" GEOS="3.4.2-CAPI-1.8.2 r3921" PROJ="Rel. 4.8.0, 6
>> March 2012" GDAL="GDAL 1.11.0, released 2014/04/16"    (from EPEL RPM)
>> 
>> A. The source table in postgis is registered in geometry_columns correctly.
>> 
>> B. I run this command in Centos linux.
>> 
>> gdal_rasterize -te 1060000 7865000 1120000 7940000 -a jord -init 255 -tr
>> 100 100 -a_nodata 255 -a_srs 'EPSG:25833' -co 'TILED=YES' -co
>> 'BIGTIFF=IF_SAFER' -co 'COMPRESS=PACKBITS' -co 'PREDICTOR=1' -co
>> 'ZLEVEL=1' -ot Byte PG:"host=XXXX'' dbname='XXXX' user='XXXX'
>> password='XXXX' tables='XXXX'" -sql "SELECT xxxx FROM xxxx WHERE
>> st_intersects(geo, ST_GeometryFromText('POLYGON((1060000 7865000,1060000
>> 7940000,1120000 7940000, 1120000 7865000, 1060000 7865000))',25833)) "
>> xxxx.tif
>> 
>> C. The SQL query (-sql), when run directly on postgres with COUNT(),
>> produces this output.
>> 
>> count
>> -------
>>  3959
>> (1 row)
>> 
>> D. GDAL 1.9.2 and GDAL 1.10.0 produce a TIF file of 12238 bytes which is
>> visually complete.
>> 
>> E. GDAL 1.11.0 produces a TIF file of 10920 bytes which is missing many
>> polygons.
>> 
>> F. Console output from gdal_rasterize in all 3 cases is as follows;
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>> 
>> G. PG server log output for GDAL 1.9.2 and GDAL 1.10.0
>> 
>> (nothing...)
>> 
>> PG server log output for GDAL 1.11.0
>> 
>> < 2015-02-09 13:52:11.720 CET >STATEMENT:  FETCH 500 in
>> OGRPGLayerReader0xd5ce50 < 2015-02-09 13:52:11.720 CET >ERROR:  cursor
>> "ogrpglayerreader0xd5ce50" does not exist < 2015-02-09 13:52:11.720 CET
>>> STATEMENT:  CLOSE OGRPGLayerReader0xd5ce50 < 2015-02-09 13:52:18.657 CET
>>> ERROR:  cursor "ogrpglayerreader0x1fd8e50" does not exist
>> 
>> H. Debug mode output for GDAL 1.11.0
>> 
>> OGR: OGROpen(...) succeeded as PostgreSQL.
>> GDAL: QuietDelete(xxxx.tif) invoking Delete()
>> GDAL: GDALOpen(xxxx.tif, this=0x259a8f0) succeeds as GTiff.
>> GDAL: GDALDefaultOverviews::OverviewScan()
>> GDAL: GDALClose(xxxx.tif, this=0x259a8f0)
>> GDAL: GDALDriver::Create(GTiff,xxxx.tif,600,750,1,Byte,0x25744e0)
>> PG: Primary key name (FID): gid
>> PG: Using column 'gid' as FID for table 'xxxx_25833'
>> GDAL: Rasterizer operating on 1 swaths of 750 scanlines.
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>> PG: 500 features read on layer 'sql_statement'.
>> GDAL: GDALClose(xxxx.tif, this=0x2598930)
>> 
>> I. Debug mode output for GDAL 1.10.0
>> 
>> OGR: OGROpen(xxxx) succeeded as PostgreSQL.
>> GDAL: QuietDelete(xxxx) invoking Delete()
>> GDAL: GDALOpen(xxxx) succeeds as GTiff.
>> GDAL: GDALDefaultOverviews::OverviewScan()
>> GDAL: GDALClose(xxxx.tif, this=0xeb5030)
>> GDAL: GDALDriver::Create(GTiff,xxxx.tif,600,750,1,Byte,0xe8ede0)
>> PG: Primary key name (FID): gid
>> PG: Using column 'gid' as FID for table 'dmk_25833'
>> PG: Layer 'xxxx_25833' geometry type: GEOMETRY:Unknown (any), Dim=2
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>> PG: 3959 features read on layer 'sql_statement'.
>> GDAL: GDALClose(xxxx.tif, this=0xeb2fd0)
>> 
>> 
>> As well as local unix sockets I've tested TCP connections to a remote PG
>> database from GDAL1.10 and GDAL1.11 clients, and I've tested with other
>> data layers. Every time, I'm getting the same problem e.g. 500 features
>> out 8000.
>> 
>> Has anyone else experienced anything similar?
>> 
>> I've spent some time looking through the source but I wasn't able to
>> determine exactly where the problem is occuring. It seems to somehow be
>> related to the select page size (500 rows) being used in place of the
>> total feature count; or perhaps some logic mistake causing the reads to
>> finish after 1 page is complete.
>> 
>> Graeme Bell
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com


From even.rouault at spatialys.com  Mon Feb  9 10:23:26 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 9 Feb 2015 19:23:26 +0100
Subject: [gdal-dev] Hidden regression in GDAL 1.11.0 - gdal_rasterize
	with postgis silently fails to render many polygons.
In-Reply-To: <5B05E54E-BEF0-42D0-A313-C6C1A73A804C@skogoglandskap.no>
References: <8E9D3285-35A5-4208-AC21-B962FBD2805A@skogoglandskap.no>
	<201502091801.21361.even.rouault@spatialys.com>
	<5B05E54E-BEF0-42D0-A313-C6C1A73A804C@skogoglandskap.no>
Message-ID: <201502091923.26137.even.rouault@spatialys.com>

Graeme,

I confirm. This is the result of a subtile interaction of tables= , SQL request 
and SRS resolving. The PG driver has become quite subtile...
Traced in http://trac.osgeo.org/gdal/ticket/5837 and now fixed.

As a workaround you could use a view that does the the "select * from 
world_diamonds where st_intersects(wkb_geometry, 
ST_GeometryFromText('POLYGON((-180 -90,-180 90,180 90,180 -90,-180 
-90))',4326))" and use the view name with the -l parameter of gdal_rasterize 
(he bug doesn't occur if using a straight layer name)

gdal_rasterize could/should be improved as well to set a spatial filter 
automatically. That way you could just use the layer name.

Anyway I guess this will be a good reason to issue a 1.11.2RC2 with the fix.

Even

> Hi Even,  thanks very much for this.
> 
> I setup the DB with    createdb autotest; echo "create extension postgis;"
> | psql autotest
> 
> Then I did your test. Annoyingly, it worked fine!
> Then I redid my own tests. They still didn't work.
> So I varied all the parameters between the two examples until I found the
> one that triggers it.
> 
> GOT IT! :-)
> 
> It's the tables parameter that triggers it. I have used 'tables' since 2012
> to avoid doing a scan of the DB because we have a LOT of tables here (e.g.
> >1 TB of postgis data).
> 
> 
> gdal_rasterize -sql "select * from world_diamonds where
> st_intersects(wkb_geometry, ST_GeometryFromText('POLYGON((-180 -90,-180
> 90,180 90,180 -90,-180 -90))',4326))"   "pg:dbname=autotest"  out.tif
> -burn 255 -ts 4000 2000  -a_srs EPSG:4326 -te -180 -90 180 90 --debug ON
> 
> PG: DBName="autotest"
> PG: PostgreSQL version string : 'PostgreSQL 9.3.5 on
> x86_64-unknown-linux-gnu, compiled by gcc (GCC) 4.8.2 20140120 (Red Hat
> 4.8.2-16), 64-bit' PG: PostGIS version string : '2.1 USE_GEOS=1 USE_PROJ=1
> USE_STATS=1' OGR: OGROpen(pg:dbname=autotest/0x9f65f0) succeeded as
> PostgreSQL. GDAL: QuietDelete(out.tif) invoking Delete()
> GDAL: GDALOpen(out.tif, this=0xa292e0) succeeds as GTiff.
> GDAL: GDALDefaultOverviews::OverviewScan()
> GDAL: GDALClose(out.tif, this=0xa292e0)
> GDAL: GDALDriver::Create(GTiff,out.tif,4000,2000,1,Float64,(nil))
> GDAL: Rasterizer operating on 7 swaths of 312 scanlines.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> PG: 64800 features read on layer 'sql_statement'.             
> <------------- GDAL: GDALClose(out.tif, this=0xa283d0)
> 
> whereas
> 
> gdal_rasterize -sql "select * from world_diamonds where
> st_intersects(wkb_geometry, ST_GeometryFromText('POLYGON((-180 -90,-180
> 90,180 90,180 -90,-180 -90))',4326))"   "pg:dbname=autotest
> tables='world_diamonds'"  out.tif -burn 255 -ts 4000 2000  -a_srs
> EPSG:4326 -te -180 -90 180 90 --debug ON
> 
> PG: DBName="autotest"
> PG: PostgreSQL version string : 'PostgreSQL 9.3.5 on
> x86_64-unknown-linux-gnu, compiled by gcc (GCC) 4.8.2 20140120 (Red Hat
> 4.8.2-16), 64-bit' PG: PostGIS version string : '2.1 USE_GEOS=1 USE_PROJ=1
> USE_STATS=1' OGR: OGROpen(pg:dbname=autotest
> tables='world_diamonds'/0x1668a10) succeeded as PostgreSQL. GDAL:
> QuietDelete(out.tif) invoking Delete()
> GDAL: GDALOpen(out.tif, this=0x1688b40) succeeds as GTiff.
> GDAL: GDALDefaultOverviews::OverviewScan()
> GDAL: GDALClose(out.tif, this=0x1688b40)
> GDAL: GDALDriver::Create(GTiff,out.tif,36,18,1,Float64,(nil))
> PG: Primary key name (FID): ogc_fid
> PG: Using column 'ogc_fid' as FID for table 'world_diamonds'
> GDAL: Rasterizer operating on 1 swaths of 18 scanlines.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> PG: 500 features read on layer 'sql_statement'.               
> <------------- GDAL: GDALClose(out.tif, this=0x1686720)
> 
> 
> 
> 
> 
> Graeme Bell
> 
> On 09 Feb 2015, at 18:01, Even Rouault <even.rouault at spatialys.com> wrote:
> > Graeme,
> > 
> > I tried to reproduce your issue as close as possible but couldn't
> > replicate the bug.
> > 
> > I create a postgis layer with 360x180 polygons with the following Python
> > script
> > 
> > ~~~~
> > 
> > from osgeo import ogr
> > from osgeo import osr
> > 
> > ds = ogr.Open('pg:dbname=autotest')
> > srs = osr.SpatialReference()
> > srs.ImportFromEPSG(4326)
> > lyr = ds.CreateLayer('world_diamonds', geom_type = ogr.wkbPolygon, srs =
> > srs, options = ['OVERWRITE=YES']) lyr.StartTransaction()
> > 
> > for y in range(180):
> >    for x in range(360):
> >        f = ogr.Feature(lyr.GetLayerDefn())
> >        x0 = x - 180 + 0.5
> >        y0 = 90 - y - 1
> >        f.SetGeometry(ogr.CreateGeometryFromWkt('POLYGON((%f %f,%f %f,%f
> >        %f,%f %f,%f %f))' %
> >        (x0,y0,x0-0.5,y0+0.5,x0,y0+1,x0+0.5,y0+0.5,x0,y0)))
> >        lyr.CreateFeature(f)
> > 
> > lyr.CommitTransaction()
> > 
> > ~~~~
> > 
> > So continuous diamond shaped polygons (at the beginning, I created
> > straight polygons, but for some reason, the rasterizing algorithm
> > doesn't manage to draw such polygons, but that's a totally unrelated
> > issue)
> > 
> > And then:
> > 
> > gdal_rasterize -sql "select * from world_diamonds where
> > st_intersects(wkb_geometry, ST_GeometryFromText('POLYGON((-180 -90,-180
> > 90,180 90,180 -90,-180 -90))',4326))"  \
> > 
> > 	 "pg:dbname=autotest"  out.tif -burn 255 -ts 4000 2000  -a_srs EPSG:4326
> > 	 -te -180 -90 180 90
> > 
> > And the output looks good with both gdal 1.11 branch (haven't tested with
> > 1.11.0 but there was no significant change in the PG driver) and trunk.
> > 
> > Could you try the above ?
> > 
> > 
> > Compiled in DEBUG mode, I can see many
> > "PG: PQexecParams(FETCH 500 in OGRPGLayerReader0x2316c50) =
> > PGRES_TUPLES_OK, ntuples = 500" traces as expected. I don't understand
> > why in your use case it fails at the first FETCH.
> > 
> > Could you try compiling GDAL with ./configure --enable-debug
> > so as to have more verbose traces in the PG driver ?
> > 
> > 
> > Even
> > 
> > Le lundi 09 f?vrier 2015 16:37:20, Graeme B. Bell a ?crit :
> >> TLDR;
> >> 
> >> gdal_rasterize has begun silently producing wrong output at least since
> >> GDAL 1.11.0. Whenever  >500 polygons are present in the database query
> >> result (and perhaps under other circumstances), only 500 will be drawn.
> >> 
> >> 
> >> Hi,
> >> 
> >> I am rasterizing many maps and areas of maps in SRID 25833 using
> >> gdal_rasterize with a postgis database.
> >> 
> >> When I use GDAL 1.11, the output is missing much of the data, despite
> >> gdal_rasterize reporting completing successfully. With GDAL 1.09 and
> >> GDAL 1.10, the output is correct and complete and identical.
> >> 
> >> I'm posting here to gather more information about the bug and also to
> >> raise an alarm for anyone using postgis/gdal_rasterize (1.11) in their
> >> data workflow over the last year.
> >> 
> >> Background of bug
> >> --------
> >> 
> >> Versions:
> >> 
> >> POSTGIS="2.1.5 r13152" GEOS="3.4.2-CAPI-1.8.2 r3921" PROJ="Rel. 4.8.0, 6
> >> March 2012" GDAL="GDAL 1.11.0, released 2014/04/16"    (from EPEL RPM)
> >> 
> >> A. The source table in postgis is registered in geometry_columns
> >> correctly.
> >> 
> >> B. I run this command in Centos linux.
> >> 
> >> gdal_rasterize -te 1060000 7865000 1120000 7940000 -a jord -init 255 -tr
> >> 100 100 -a_nodata 255 -a_srs 'EPSG:25833' -co 'TILED=YES' -co
> >> 'BIGTIFF=IF_SAFER' -co 'COMPRESS=PACKBITS' -co 'PREDICTOR=1' -co
> >> 'ZLEVEL=1' -ot Byte PG:"host=XXXX'' dbname='XXXX' user='XXXX'
> >> password='XXXX' tables='XXXX'" -sql "SELECT xxxx FROM xxxx WHERE
> >> st_intersects(geo, ST_GeometryFromText('POLYGON((1060000 7865000,1060000
> >> 7940000,1120000 7940000, 1120000 7865000, 1060000 7865000))',25833)) "
> >> xxxx.tif
> >> 
> >> C. The SQL query (-sql), when run directly on postgres with COUNT(),
> >> produces this output.
> >> 
> >> count
> >> -------
> >> 
> >>  3959
> >> 
> >> (1 row)
> >> 
> >> D. GDAL 1.9.2 and GDAL 1.10.0 produce a TIF file of 12238 bytes which is
> >> visually complete.
> >> 
> >> E. GDAL 1.11.0 produces a TIF file of 10920 bytes which is missing many
> >> polygons.
> >> 
> >> F. Console output from gdal_rasterize in all 3 cases is as follows;
> >> 0...10...20...30...40...50...60...70...80...90...100 - done.
> >> 
> >> G. PG server log output for GDAL 1.9.2 and GDAL 1.10.0
> >> 
> >> (nothing...)
> >> 
> >> PG server log output for GDAL 1.11.0
> >> 
> >> < 2015-02-09 13:52:11.720 CET >STATEMENT:  FETCH 500 in
> >> OGRPGLayerReader0xd5ce50 < 2015-02-09 13:52:11.720 CET >ERROR:  cursor
> >> "ogrpglayerreader0xd5ce50" does not exist < 2015-02-09 13:52:11.720 CET
> >> 
> >>> STATEMENT:  CLOSE OGRPGLayerReader0xd5ce50 < 2015-02-09 13:52:18.657
> >>> CET ERROR:  cursor "ogrpglayerreader0x1fd8e50" does not exist
> >> 
> >> H. Debug mode output for GDAL 1.11.0
> >> 
> >> OGR: OGROpen(...) succeeded as PostgreSQL.
> >> GDAL: QuietDelete(xxxx.tif) invoking Delete()
> >> GDAL: GDALOpen(xxxx.tif, this=0x259a8f0) succeeds as GTiff.
> >> GDAL: GDALDefaultOverviews::OverviewScan()
> >> GDAL: GDALClose(xxxx.tif, this=0x259a8f0)
> >> GDAL: GDALDriver::Create(GTiff,xxxx.tif,600,750,1,Byte,0x25744e0)
> >> PG: Primary key name (FID): gid
> >> PG: Using column 'gid' as FID for table 'xxxx_25833'
> >> GDAL: Rasterizer operating on 1 swaths of 750 scanlines.
> >> 0...10...20...30...40...50...60...70...80...90...100 - done.
> >> PG: 500 features read on layer 'sql_statement'.
> >> GDAL: GDALClose(xxxx.tif, this=0x2598930)
> >> 
> >> I. Debug mode output for GDAL 1.10.0
> >> 
> >> OGR: OGROpen(xxxx) succeeded as PostgreSQL.
> >> GDAL: QuietDelete(xxxx) invoking Delete()
> >> GDAL: GDALOpen(xxxx) succeeds as GTiff.
> >> GDAL: GDALDefaultOverviews::OverviewScan()
> >> GDAL: GDALClose(xxxx.tif, this=0xeb5030)
> >> GDAL: GDALDriver::Create(GTiff,xxxx.tif,600,750,1,Byte,0xe8ede0)
> >> PG: Primary key name (FID): gid
> >> PG: Using column 'gid' as FID for table 'dmk_25833'
> >> PG: Layer 'xxxx_25833' geometry type: GEOMETRY:Unknown (any), Dim=2
> >> 0...10...20...30...40...50...60...70...80...90...100 - done.
> >> PG: 3959 features read on layer 'sql_statement'.
> >> GDAL: GDALClose(xxxx.tif, this=0xeb2fd0)
> >> 
> >> 
> >> As well as local unix sockets I've tested TCP connections to a remote PG
> >> database from GDAL1.10 and GDAL1.11 clients, and I've tested with other
> >> data layers. Every time, I'm getting the same problem e.g. 500 features
> >> out 8000.
> >> 
> >> Has anyone else experienced anything similar?
> >> 
> >> I've spent some time looking through the source but I wasn't able to
> >> determine exactly where the problem is occuring. It seems to somehow be
> >> related to the select page size (500 rows) being used in place of the
> >> total feature count; or perhaps some logic mistake causing the reads to
> >> finish after 1 page is complete.
> >> 
> >> Graeme Bell
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From grb at skogoglandskap.no  Mon Feb  9 10:30:44 2015
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Mon, 9 Feb 2015 18:30:44 +0000
Subject: [gdal-dev] Hidden regression in GDAL 1.11.0 - gdal_rasterize
 with postgis silently fails to render many polygons.
In-Reply-To: <201502091923.26137.even.rouault@spatialys.com>
References: <8E9D3285-35A5-4208-AC21-B962FBD2805A@skogoglandskap.no>
	<201502091801.21361.even.rouault@spatialys.com>
	<5B05E54E-BEF0-42D0-A313-C6C1A73A804C@skogoglandskap.no>
	<201502091923.26137.even.rouault@spatialys.com>
Message-ID: <56135DFF-22A1-4384-BC23-9CCF942AC7DB@skogoglandskap.no>


Excellent work Even.

Thank you very much for your kind and speedy help with this! :-)

Hoping to see it in 1.11.2, as we prefer to take RPMS from the main repos for our builds here rather than rolling our own. 

For the local workaround I have removed the tables flag for the moment and will accept the speed penalty. 

Graeme. 

On 09 Feb 2015, at 19:23, Even Rouault <even.rouault at spatialys.com> wrote:

> Graeme,
> 
> I confirm. This is the result of a subtile interaction of tables= , SQL request 
> and SRS resolving. The PG driver has become quite subtile...
> Traced in http://trac.osgeo.org/gdal/ticket/5837 and now fixed.
> 
> As a workaround you could use a view that does the the "select * from 
> world_diamonds where st_intersects(wkb_geometry, 
> ST_GeometryFromText('POLYGON((-180 -90,-180 90,180 90,180 -90,-180 
> -90))',4326))" and use the view name with the -l parameter of gdal_rasterize 
> (he bug doesn't occur if using a straight layer name)
> 
> gdal_rasterize could/should be improved as well to set a spatial filter 
> automatically. That way you could just use the layer name.
> 
> Anyway I guess this will be a good reason to issue a 1.11.2RC2 with the fix.
> 
> Even

From Bailey at InsaneGenius.org  Mon Feb  9 11:02:06 2015
From: Bailey at InsaneGenius.org (Scott Bailey)
Date: Mon, 9 Feb 2015 12:02:06 -0700
Subject: [gdal-dev] cmake4gdal?
Message-ID: <CAEePw9jv+cXV+dzoNLVQFkhyXfF9heJXg5Lec0eRgAEHuhNLzQ@mail.gmail.com>

Building GDAL for Linux is a snap, MSVS is OK, but I find myself struggling
to get a compilation with MINGW.

I've cloned the cmake4gdal 1.9 git repo and built that in Linux.  As
expected it was simple.  Haven't had time to play with MINGW, yet.
Never-the-less, I've found CMake based projects less frustrating than
autotools when building with Windows, especially when using MINGW.

What is the status of cmake4gdal?  Is there something I should do to help?

-- 
Scott Bailey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150209/02e02557/attachment.html>

From bishop.dev at gmail.com  Mon Feb  9 12:53:04 2015
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Mon, 09 Feb 2015 23:53:04 +0300
Subject: [gdal-dev] cmake4gdal?
In-Reply-To: <CAEePw9jv+cXV+dzoNLVQFkhyXfF9heJXg5Lec0eRgAEHuhNLzQ@mail.gmail.com>
References: <CAEePw9jv+cXV+dzoNLVQFkhyXfF9heJXg5Lec0eRgAEHuhNLzQ@mail.gmail.com>
Message-ID: <54D91E30.9050205@gmail.com>

Hi Scott,

The latest code is here:
1) https://github.com/nextgis/gdal_svn/tree/cmake4gdal
2) https://github.com/nextgis/gdal_svn/tree/rsmd-reader-dev <-- this my 
current branch
3) https://github.com/nextgis/gdal_svn/tree/wms-ags-dev

There are some problems:
there is no autotest directory in current repo, but it'll be more 
correctly to have the whole fork, not only sources (CTest?).
So I plan to merge this three branches and make the full fork (with 
autotest) of OSGeo/GDAL in github.

Anyhow we need to complete all drivers which is not yet cmaked.
I plan to create wiki page in new repo with table of all GDAL drivers 
and their cmaking status and total percent.

By now we need:
1) More testing and fixing on all platforms
2) Cmaked all drivers and applications, which is not yet cmaked
3) I plan to play with third party libs by cmake mechanism - 
ExternalProject_Add

As for me the 2) is more important.

Best regards,
     Dmitry

09.02.2015 22:02, Scott Bailey ?????:
> Building GDAL for Linux is a snap, MSVS is OK, but I find myself 
> struggling to get a compilation with MINGW.
>
> I've cloned the cmake4gdal 1.9 git repo and built that in Linux.  As 
> expected it was simple.  Haven't had time to play with MINGW, yet.  
> Never-the-less, I've found CMake based projects less frustrating than 
> autotools when building with Windows, especially when using MINGW.
>
> What is the status of cmake4gdal?  Is there something I should do to help?
>
> -- 
> Scott Bailey
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150209/6ee4fdc9/attachment.html>

From Bailey at InsaneGenius.org  Mon Feb  9 15:34:44 2015
From: Bailey at InsaneGenius.org (Scott Bailey)
Date: Mon, 9 Feb 2015 16:34:44 -0700
Subject: [gdal-dev] cmake4gdal?
In-Reply-To: <54D91E30.9050205@gmail.com>
References: <CAEePw9jv+cXV+dzoNLVQFkhyXfF9heJXg5Lec0eRgAEHuhNLzQ@mail.gmail.com>
	<54D91E30.9050205@gmail.com>
Message-ID: <CAEePw9gcC3_ByELKkg5aF5umCcnN7ZSY8Pw=7Qs7sJhvzbezzg@mail.gmail.com>

Dmitry,

Great!  So which drivers need CMake help?

And what is the probability of cmake4gdal replacing autotools?

SB

On Mon, Feb 9, 2015 at 1:53 PM, Dmitriy Baryshnikov <bishop.dev at gmail.com>
wrote:

>  Hi Scott,
>
> The latest code is here:
> 1) https://github.com/nextgis/gdal_svn/tree/cmake4gdal
> 2) https://github.com/nextgis/gdal_svn/tree/rsmd-reader-dev <-- this my
> current branch
> 3) https://github.com/nextgis/gdal_svn/tree/wms-ags-dev
>
> There are some problems:
> there is no autotest directory in current repo, but it'll be more
> correctly to have the whole fork, not only sources (CTest?).
> So I plan to merge this three branches and make the full fork (with
> autotest) of OSGeo/GDAL in github.
>
> Anyhow we need to complete all drivers which is not yet cmaked.
> I plan to create wiki page in new repo with table of all GDAL drivers and
> their cmaking status and total percent.
>
> By now we need:
> 1) More testing and fixing on all platforms
> 2) Cmaked all drivers and applications, which is not yet cmaked
> 3) I plan to play with third party libs by cmake mechanism -
> ExternalProject_Add
>
> As for me the 2) is more important.
>
> Best regards,
>     Dmitry
>
> 09.02.2015 22:02, Scott Bailey ?????:
>
>  Building GDAL for Linux is a snap, MSVS is OK, but I find myself
> struggling to get a compilation with MINGW.
>
>  I've cloned the cmake4gdal 1.9 git repo and built that in Linux.  As
> expected it was simple.  Haven't had time to play with MINGW, yet.
> Never-the-less, I've found CMake based projects less frustrating than
> autotools when building with Windows, especially when using MINGW.
>
>  What is the status of cmake4gdal?  Is there something I should do to help?
>
>  --
> Scott Bailey
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Scott Bailey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150209/d7857354/attachment.html>

From even.rouault at spatialys.com  Mon Feb  9 15:48:21 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Feb 2015 00:48:21 +0100
Subject: [gdal-dev] cmake4gdal?
In-Reply-To: <CAEePw9gcC3_ByELKkg5aF5umCcnN7ZSY8Pw=7Qs7sJhvzbezzg@mail.gmail.com>
References: <CAEePw9jv+cXV+dzoNLVQFkhyXfF9heJXg5Lec0eRgAEHuhNLzQ@mail.gmail.com>
	<54D91E30.9050205@gmail.com>
	<CAEePw9gcC3_ByELKkg5aF5umCcnN7ZSY8Pw=7Qs7sJhvzbezzg@mail.gmail.com>
Message-ID: <201502100048.21911.even.rouault@spatialys.com>

Le mardi 10 f?vrier 2015 00:34:44, Scott Bailey a ?crit :
> Dmitry,
> 
> Great!  So which drivers need CMake help?
> 
> And what is the probability of cmake4gdal replacing autotools?

Scott,

I can imagine that replacing will take a few versions until we are confident 
that the cmake build system is stable enough & embrace all possibilities of 
autotools & windows build systems. In the meantime, there would be coexistence 
of the build systems.

Even

> 
> SB
> 
> On Mon, Feb 9, 2015 at 1:53 PM, Dmitriy Baryshnikov <bishop.dev at gmail.com>
> 
> wrote:
> >  Hi Scott,
> > 
> > The latest code is here:
> > 1) https://github.com/nextgis/gdal_svn/tree/cmake4gdal
> > 2) https://github.com/nextgis/gdal_svn/tree/rsmd-reader-dev <-- this my
> > current branch
> > 3) https://github.com/nextgis/gdal_svn/tree/wms-ags-dev
> > 
> > There are some problems:
> > there is no autotest directory in current repo, but it'll be more
> > correctly to have the whole fork, not only sources (CTest?).
> > So I plan to merge this three branches and make the full fork (with
> > autotest) of OSGeo/GDAL in github.
> > 
> > Anyhow we need to complete all drivers which is not yet cmaked.
> > I plan to create wiki page in new repo with table of all GDAL drivers and
> > their cmaking status and total percent.
> > 
> > By now we need:
> > 1) More testing and fixing on all platforms
> > 2) Cmaked all drivers and applications, which is not yet cmaked
> > 3) I plan to play with third party libs by cmake mechanism -
> > ExternalProject_Add
> > 
> > As for me the 2) is more important.
> > 
> > Best regards,
> > 
> >     Dmitry
> > 
> > 09.02.2015 22:02, Scott Bailey ?????:
> >  Building GDAL for Linux is a snap, MSVS is OK, but I find myself
> > 
> > struggling to get a compilation with MINGW.
> > 
> >  I've cloned the cmake4gdal 1.9 git repo and built that in Linux.  As
> > 
> > expected it was simple.  Haven't had time to play with MINGW, yet.
> > Never-the-less, I've found CMake based projects less frustrating than
> > autotools when building with Windows, especially when using MINGW.
> > 
> >  What is the status of cmake4gdal?  Is there something I should do to
> >  help?
> >  
> >  --
> > 
> > Scott Bailey
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing
> > listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal
> > -dev
> > 
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From demolar at gmail.com  Tue Feb 10 03:10:14 2015
From: demolar at gmail.com (Rebo Ghecin)
Date: Tue, 10 Feb 2015 13:10:14 +0200
Subject: [gdal-dev] Dataset setProjection() method sets PROJCS to "unnamed"
Message-ID: <CAMQ+dLL3bf9QX+7CuXvhT0=2PjEj_WjHDUXL7+n1wqrN=R8XAw@mail.gmail.com>

Hi,

I want to change my Dataset's projection but I have a trouble with it.

I have custom projection like below:

PROJCS["UTM3 Degree ITRF96 DOM39",
  GEOGCS["GCS_ITRF_1996",
    DATUM["D_ITRF_1996",
      SPHEROID["GRS_1980", 6378137.0, 298.257222101]],
    PRIMEM["Greenwich", 0.0],
    UNIT["degree", 0.017453292519943295],
    AXIS["Longitude", EAST],
    AXIS["Latitude", NORTH]],
  PROJECTION["Transverse_Mercator"],
  PARAMETER["central_meridian", 39.0],
  PARAMETER["latitude_of_origin", 0.0],
  PARAMETER["scale_factor", 1.0],
  PARAMETER["false_easting", 500000.0],
  PARAMETER["false_northing", 0.0],
  UNIT["m", 1.0],
  AXIS["x", EAST],
  AXIS["y", NORTH],
  AUTHORITY["EPSG","10103390"]]

and this is how I changed it:

String test = "PROJCS[\"UTM3 Degree ITRF96 DOM39\",
GEOGCS[\"GCS_ITRF_1996\",     DATUM[\"D_ITRF_1996\",
SPHEROID[\"GRS_1980\", 6378137.0, 298.257222101]],
PRIMEM[\"Greenwich\", 0.0],    UNIT[\"degree\", 0.017453292519943295],
 AXIS[\"Longitude\", EAST],    AXIS[\"Latitude\", NORTH]],
 PROJECTION[\"Transverse_Mercator\"],  PARAMETER[\"central_meridian\",
39.0],  PARAMETER[\"latitude_of_origin\", 0.0],
 PARAMETER[\"scale_factor\", 1.0],  PARAMETER[\"false_easting\", 500000.0],
 PARAMETER[\"false_northing\", 0.0],  UNIT[\"m\", 1.0],  AXIS[\"x\", EAST],
 AXIS[\"y\", NORTH],  AUTHORITY[\"EPSG\",\"10103390\"]]";

SpatialReference oSRS = new SpatialReference();
oSRS.ImportFromWkt(test);
inputDataset.SetProjection(oSRS.ExportToWkt());

and it returns

PROJCS["unnamed",
  GEOGCS["GCS Name = GCS_ITRF_1996",
    DATUM["Datum = D_ITRF_1996",
      SPHEROID["Ellipsoid = GRS_1980", 6378137.0, 298.257222101]],
    PRIMEM["Greenwich", 0.0],
    UNIT["degree", 0.017453292519943295],
    AXIS["Geodetic longitude", EAST],
    AXIS["Geodetic latitude", NORTH]],
  PROJECTION["Transverse_Mercator"],
  PARAMETER["central_meridian", 39.0],
  PARAMETER["latitude_of_origin", 0.0],
  PARAMETER["scale_factor", 1.0],
  PARAMETER["false_easting", 500000.0],
  PARAMETER["false_northing", 0.0],
  UNIT["m", 1.0],
  AXIS["Easting", EAST],
  AXIS["Northing", NORTH]]

I have created custom.wkt file and include it in epsg.wkt at "gdal_data"
folder but this is also not working for me.

custom.wkt content:

10103390,PROJCS["UTM3 Derece ITRF96
DOM39",GEOGCS["GCS_ITRF_1996",DATUM["D_ITRF_1996",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",39.0],PARAMETER["Scale_Factor",1.0],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0],
AUTHORITY["EPSG","10103390"]]

Also I tried to set PROJCS like this

oSRS.SetProjCS("My Proj"); but didn't work.

Any idea with this?

Thanks
Rebo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150210/702dbfb5/attachment-0001.html>

From ahmettemiz88 at gmail.com  Tue Feb 10 03:31:30 2015
From: ahmettemiz88 at gmail.com (Ahmet Temiz)
Date: Tue, 10 Feb 2015 13:31:30 +0200
Subject: [gdal-dev] to pick up certain colored areas
Message-ID: <CAJKO1YtmUnB3tk6=C6za9ssjCd-CaGgx9XF8nEHPDM6CtJgNPw@mail.gmail.com>

hello

Is there any way to pick up certain colored areas from tif file and create
a new
?tif file with this selected ?areas ?

regards

-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Planlama ve Zarar Azaltma Dairesi Ba?kanl???


________________________

Ahmet Temiz
Geological Eng.
Information Systems - GIS Group
Disaster and Emergency Management
of Presidency
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150210/8eff90fb/attachment.html>

From even.rouault at spatialys.com  Tue Feb 10 03:36:25 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Feb 2015 12:36:25 +0100
Subject: [gdal-dev] Dataset setProjection() method sets PROJCS to
	"unnamed"
In-Reply-To: <CAMQ+dLL3bf9QX+7CuXvhT0=2PjEj_WjHDUXL7+n1wqrN=R8XAw@mail.gmail.com>
References: <CAMQ+dLL3bf9QX+7CuXvhT0=2PjEj_WjHDUXL7+n1wqrN=R8XAw@mail.gmail.com>
Message-ID: <201502101236.25291.even.rouault@spatialys.com>

Le mardi 10 f?vrier 2015 12:10:14, Rebo Ghecin a ?crit :
> Hi,
> 
> I want to change my Dataset's projection but I have a trouble with it.

Rebo,

you didn't specify which format your dataset is. Depending on format 
capabilities, only parts of the original WKT can be preserved. There's likely 
not much you can do about that.

Even

> 
> I have custom projection like below:
> 
> PROJCS["UTM3 Degree ITRF96 DOM39",
>   GEOGCS["GCS_ITRF_1996",
>     DATUM["D_ITRF_1996",
>       SPHEROID["GRS_1980", 6378137.0, 298.257222101]],
>     PRIMEM["Greenwich", 0.0],
>     UNIT["degree", 0.017453292519943295],
>     AXIS["Longitude", EAST],
>     AXIS["Latitude", NORTH]],
>   PROJECTION["Transverse_Mercator"],
>   PARAMETER["central_meridian", 39.0],
>   PARAMETER["latitude_of_origin", 0.0],
>   PARAMETER["scale_factor", 1.0],
>   PARAMETER["false_easting", 500000.0],
>   PARAMETER["false_northing", 0.0],
>   UNIT["m", 1.0],
>   AXIS["x", EAST],
>   AXIS["y", NORTH],
>   AUTHORITY["EPSG","10103390"]]
> 
> and this is how I changed it:
> 
> String test = "PROJCS[\"UTM3 Degree ITRF96 DOM39\",
> GEOGCS[\"GCS_ITRF_1996\",     DATUM[\"D_ITRF_1996\",
> SPHEROID[\"GRS_1980\", 6378137.0, 298.257222101]],
> PRIMEM[\"Greenwich\", 0.0],    UNIT[\"degree\", 0.017453292519943295],
>  AXIS[\"Longitude\", EAST],    AXIS[\"Latitude\", NORTH]],
>  PROJECTION[\"Transverse_Mercator\"],  PARAMETER[\"central_meridian\",
> 39.0],  PARAMETER[\"latitude_of_origin\", 0.0],
>  PARAMETER[\"scale_factor\", 1.0],  PARAMETER[\"false_easting\", 500000.0],
>  PARAMETER[\"false_northing\", 0.0],  UNIT[\"m\", 1.0],  AXIS[\"x\", EAST],
>  AXIS[\"y\", NORTH],  AUTHORITY[\"EPSG\",\"10103390\"]]";
> 
> SpatialReference oSRS = new SpatialReference();
> oSRS.ImportFromWkt(test);
> inputDataset.SetProjection(oSRS.ExportToWkt());
> 
> and it returns
> 
> PROJCS["unnamed",
>   GEOGCS["GCS Name = GCS_ITRF_1996",
>     DATUM["Datum = D_ITRF_1996",
>       SPHEROID["Ellipsoid = GRS_1980", 6378137.0, 298.257222101]],
>     PRIMEM["Greenwich", 0.0],
>     UNIT["degree", 0.017453292519943295],
>     AXIS["Geodetic longitude", EAST],
>     AXIS["Geodetic latitude", NORTH]],
>   PROJECTION["Transverse_Mercator"],
>   PARAMETER["central_meridian", 39.0],
>   PARAMETER["latitude_of_origin", 0.0],
>   PARAMETER["scale_factor", 1.0],
>   PARAMETER["false_easting", 500000.0],
>   PARAMETER["false_northing", 0.0],
>   UNIT["m", 1.0],
>   AXIS["Easting", EAST],
>   AXIS["Northing", NORTH]]
> 
> I have created custom.wkt file and include it in epsg.wkt at "gdal_data"
> folder but this is also not working for me.
> 
> custom.wkt content:
> 
> 10103390,PROJCS["UTM3 Derece ITRF96
> DOM39",GEOGCS["GCS_ITRF_1996",DATUM["D_ITRF_1996",SPHEROID["GRS_1980",63781
> 37.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.01745329251994
> 33]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",500000.0],
> PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",39.0],PARAMETE
> R["Scale_Factor",1.0],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]
> , AUTHORITY["EPSG","10103390"]]
> 
> Also I tried to set PROJCS like this
> 
> oSRS.SetProjCS("My Proj"); but didn't work.
> 
> Any idea with this?
> 
> Thanks
> Rebo

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From guasqui at actgate.com  Tue Feb 10 03:47:46 2015
From: guasqui at actgate.com (Pierluigi Guasqui)
Date: Tue, 10 Feb 2015 12:47:46 +0100
Subject: [gdal-dev] SQLite dialect in OGRDataSource::ExecuteSQL
Message-ID: <54D9EFE2.3010102@actgate.com>

Hi All!

I am using the GDAL/OGR functions to query a shapefile. This is a sample 
code I have been successfully running so far:

    OGRDataSource *poDS = OGRSFDriverRegistrar::Open(
    "some/path/to/myshapefile.shp" );
    OGRLayer *poLayer = poDS->ExecuteSQL( "select * from myshapefile",
    NULL, NULL );
    // ...
    // fetching result features from "poLayer"
    // ...
    poDS->ReleaseResultSet( poLayer );
    OGRDataSource::DestroyDataSource(poDS);


As you can see, I am currently using the OGR SQL dialect, as I am 
passing NULL as the third parameter of the OGRDataSource::ExecuteSQL 
function.

Now I am trying to extend the SQL syntax to be able to use the OGR 
SQLite dialect. I have successfully recompiled GDAL 1.11.1 with SQLite 
support (version 3.8.5) but when I try to execute the same sample code 
(passing "SQLITE" as the 3rd argument of the OGRDataSource::ExecuteSQL 
function) I am getting the following error:

    In ExecuteSQL(): sqlite3_prepare(select * from myshapefile): no such
    table: myshapefile


What is the table name that contains the shapefile features that I can 
use in my SQL queries?

Thank you!

-- 
Pierluigi Guasqui
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150210/a4c75964/attachment.html>

From even.rouault at spatialys.com  Tue Feb 10 04:18:42 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Feb 2015 13:18:42 +0100
Subject: [gdal-dev] Dataset setProjection() method sets PROJCS to
	"unnamed"
In-Reply-To: <CAMQ+dLJ4MSfiRZtzsJmmS9S9p3F4p38CQ6mmwgewHSW7o6up4g@mail.gmail.com>
References: <CAMQ+dLL3bf9QX+7CuXvhT0=2PjEj_WjHDUXL7+n1wqrN=R8XAw@mail.gmail.com>
	<201502101236.25291.even.rouault@spatialys.com>
	<CAMQ+dLJ4MSfiRZtzsJmmS9S9p3F4p38CQ6mmwgewHSW7o6up4g@mail.gmail.com>
Message-ID: <201502101318.42521.even.rouault@spatialys.com>

Le mardi 10 f?vrier 2015 13:09:00, Rebo Ghecin a ?crit :
> My dataset is raster dataset created from .tif file.

(Re'adding gdal-dev)

With recent GDAL (trunk but likely 1.11 or 1.10 too), I've much more detailed 
preserved:

with your WKT in test.wkt, if I do :
gdal_translate byte.tif byte_custom.tif -a_srs test.wkt

Then gdalinfo byte_custom.tif gives:


PROJCS["UTM3 Degree ITRF96 DOM39",
    GEOGCS["GCS_ITRF_1996",
        DATUM["D_ITRF_1996",
            SPHEROID["GRS_1980",6378137,298.257222101]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",39],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]

So the ProjCS name is preserved.

$ listgeo byte_custom.tif 
Geotiff_Information:
   Version: 1
   Key_Revision: 1.0
   Tagged_Information:
      ModelTiepointTag (2,3):
         0                 0                 0                
         440720            3751320           0                
      ModelPixelScaleTag (1,3):
         60                60                0                
      End_Of_Tags.
   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      GTCitationGeoKey (Ascii,25): "UTM3 Degree ITRF96 DOM39"
      GeographicTypeGeoKey (Short,1): User-Defined
      GeogCitationGeoKey (Ascii,86): "GCS Name = GCS_ITRF_1996|Datum = 
D_ITRF_1996|Ellipsoid = GRS_1980|Primem = Greenwich|"
      GeogGeodeticDatumGeoKey (Short,1): User-Defined
      GeogAngularUnitsGeoKey (Short,1): Angular_Degree
      GeogEllipsoidGeoKey (Short,1): User-Defined
      GeogSemiMajorAxisGeoKey (Double,1): 6378137          
      GeogInvFlatteningGeoKey (Double,1): 298.257222101    
      GeogPrimeMeridianLongGeoKey (Double,1): 0                
      ProjectedCSTypeGeoKey (Short,1): User-Defined
      ProjectionGeoKey (Short,1): User-Defined
      ProjCoordTransGeoKey (Short,1): CT_TransverseMercator
      ProjLinearUnitsGeoKey (Short,1): Linear_Meter
      ProjNatOriginLongGeoKey (Double,1): 39               
      ProjNatOriginLatGeoKey (Double,1): 0                
      ProjFalseEastingGeoKey (Double,1): 500000           
      ProjFalseNorthingGeoKey (Double,1): 0                
      ProjScaleAtNatOriginGeoKey (Double,1): 1                
      End_Of_Keys.
   End_Of_Geotiff.


> 
> On Tue, Feb 10, 2015 at 1:36 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le mardi 10 f?vrier 2015 12:10:14, Rebo Ghecin a ?crit :
> > > Hi,
> > > 
> > > I want to change my Dataset's projection but I have a trouble with it.
> > 
> > Rebo,
> > 
> > you didn't specify which format your dataset is. Depending on format
> > capabilities, only parts of the original WKT can be preserved. There's
> > likely
> > not much you can do about that.
> > 
> > Even
> > 
> > > I have custom projection like below:
> > > 
> > > PROJCS["UTM3 Degree ITRF96 DOM39",
> > > 
> > >   GEOGCS["GCS_ITRF_1996",
> > >   
> > >     DATUM["D_ITRF_1996",
> > >     
> > >       SPHEROID["GRS_1980", 6378137.0, 298.257222101]],
> > >     
> > >     PRIMEM["Greenwich", 0.0],
> > >     UNIT["degree", 0.017453292519943295],
> > >     AXIS["Longitude", EAST],
> > >     AXIS["Latitude", NORTH]],
> > >   
> > >   PROJECTION["Transverse_Mercator"],
> > >   PARAMETER["central_meridian", 39.0],
> > >   PARAMETER["latitude_of_origin", 0.0],
> > >   PARAMETER["scale_factor", 1.0],
> > >   PARAMETER["false_easting", 500000.0],
> > >   PARAMETER["false_northing", 0.0],
> > >   UNIT["m", 1.0],
> > >   AXIS["x", EAST],
> > >   AXIS["y", NORTH],
> > >   AUTHORITY["EPSG","10103390"]]
> > > 
> > > and this is how I changed it:
> > > 
> > > String test = "PROJCS[\"UTM3 Degree ITRF96 DOM39\",
> > > GEOGCS[\"GCS_ITRF_1996\",     DATUM[\"D_ITRF_1996\",
> > > SPHEROID[\"GRS_1980\", 6378137.0, 298.257222101]],
> > > PRIMEM[\"Greenwich\", 0.0],    UNIT[\"degree\", 0.017453292519943295],
> > > 
> > >  AXIS[\"Longitude\", EAST],    AXIS[\"Latitude\", NORTH]],
> > >  PROJECTION[\"Transverse_Mercator\"],  PARAMETER[\"central_meridian\",
> > > 
> > > 39.0],  PARAMETER[\"latitude_of_origin\", 0.0],
> > > 
> > >  PARAMETER[\"scale_factor\", 1.0],  PARAMETER[\"false_easting\",
> > 
> > 500000.0],
> > 
> > >  PARAMETER[\"false_northing\", 0.0],  UNIT[\"m\", 1.0],  AXIS[\"x\",
> > 
> > EAST],
> > 
> > >  AXIS[\"y\", NORTH],  AUTHORITY[\"EPSG\",\"10103390\"]]";
> > > 
> > > SpatialReference oSRS = new SpatialReference();
> > > oSRS.ImportFromWkt(test);
> > > inputDataset.SetProjection(oSRS.ExportToWkt());
> > > 
> > > and it returns
> > > 
> > > PROJCS["unnamed",
> > > 
> > >   GEOGCS["GCS Name = GCS_ITRF_1996",
> > >   
> > >     DATUM["Datum = D_ITRF_1996",
> > >     
> > >       SPHEROID["Ellipsoid = GRS_1980", 6378137.0, 298.257222101]],
> > >     
> > >     PRIMEM["Greenwich", 0.0],
> > >     UNIT["degree", 0.017453292519943295],
> > >     AXIS["Geodetic longitude", EAST],
> > >     AXIS["Geodetic latitude", NORTH]],
> > >   
> > >   PROJECTION["Transverse_Mercator"],
> > >   PARAMETER["central_meridian", 39.0],
> > >   PARAMETER["latitude_of_origin", 0.0],
> > >   PARAMETER["scale_factor", 1.0],
> > >   PARAMETER["false_easting", 500000.0],
> > >   PARAMETER["false_northing", 0.0],
> > >   UNIT["m", 1.0],
> > >   AXIS["Easting", EAST],
> > >   AXIS["Northing", NORTH]]
> > > 
> > > I have created custom.wkt file and include it in epsg.wkt at
> > > "gdal_data" folder but this is also not working for me.
> > > 
> > > custom.wkt content:
> > > 
> > > 10103390,PROJCS["UTM3 Derece ITRF96
> > 
> > DOM39",GEOGCS["GCS_ITRF_1996",DATUM["D_ITRF_1996",SPHEROID["GRS_1980",637
> > 81
> > 
> > 37.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.017453292519
> > 94
> > 
> > 33]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",500000.0
> > ],
> > 
> > PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",39.0],PARAME
> > TE
> > 
> > R["Scale_Factor",1.0],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.
> > 0]
> > 
> > > , AUTHORITY["EPSG","10103390"]]
> > > 
> > > Also I tried to set PROJCS like this
> > > 
> > > oSRS.SetProjCS("My Proj"); but didn't work.
> > > 
> > > Any idea with this?
> > > 
> > > Thanks
> > > Rebo
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Feb 10 04:30:11 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Feb 2015 13:30:11 +0100
Subject: [gdal-dev] GDAL/OGR 1.11.2 RC2 Available for Review
Message-ID: <201502101330.11165.even.rouault@spatialys.com>

Hi,

I have prepared a second GDAL/OGR 1.11.2 release candidate, with the fix for 
the 1.11.0 regression in the PG driver identified yesterday (#5837). Please 
review and test.

Peek up an archive among the following ones (by ascending size):

  http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC2.tar.xz
  http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC2.tar.gz
  http://download.osgeo.org/gdal/1.11.2/gdal1112RC2.zip

The gdal-grass plugin archive hasn't been modified since RC1  :

  http://download.osgeo.org/gdal/1.11.2/gdal-grass-1.11.2.tar.gz

A snapshot of the gdalautotest suite is also available :

  http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.tar.gz
  http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.zip

The NEWS file is here :

  http://trac.osgeo.org/gdal/wiki/Release/1.11.2-News

I'll call for a vote promoting it soon if no serious problems are reported 
before.

Best regards,

Even
-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Feb 10 04:33:34 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Feb 2015 13:33:34 +0100
Subject: [gdal-dev] Call for discussion on RFC 53: OGR not-null
	constraints and default values
In-Reply-To: <201502051315.32024.even.rouault@spatialys.com>
References: <201502051315.32024.even.rouault@spatialys.com>
Message-ID: <201502101333.34612.even.rouault@spatialys.com>

Le jeudi 05 f?vrier 2015 13:15:31, Even Rouault a ?crit :
> Hi,
> 
> This is a call for discussion on "RFC 53: OGR not-null constraints and
> default values".
> 
> http://trac.osgeo.org/gdal/wiki/rfc53_ogr_notnull_default

I'll call for a vote tomorrow if nobody has points to raise.

> 
> Summary :
> 
> This RFC addresses handling of NOT NULL constraints and DEFAULT values for
> OGR fields. NOT NULL constraints are useful to maintain basic data
> integrity and are handled by most (all?) drivers that have SQL
> capabilities. Default fields values may be used complementary or
> independantly of NOT NULL constraints to specify the value a field must be
> assigned to if it is not provided when inserting a feature into the layer.
> 
> Best regards,
> 
> Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Feb 10 04:42:12 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Feb 2015 13:42:12 +0100
Subject: [gdal-dev] SQLite dialect in OGRDataSource::ExecuteSQL
In-Reply-To: <54D9EFE2.3010102@actgate.com>
References: <54D9EFE2.3010102@actgate.com>
Message-ID: <201502101342.12325.even.rouault@spatialys.com>

Le mardi 10 f?vrier 2015 12:47:46, Pierluigi Guasqui a ?crit :
> Hi All!
> 
> I am using the GDAL/OGR functions to query a shapefile. This is a sample
> code I have been successfully running so far:
> 
>     OGRDataSource *poDS = OGRSFDriverRegistrar::Open(
>     "some/path/to/myshapefile.shp" );
>     OGRLayer *poLayer = poDS->ExecuteSQL( "select * from myshapefile",
>     NULL, NULL );
>     // ...
>     // fetching result features from "poLayer"
>     // ...
>     poDS->ReleaseResultSet( poLayer );
>     OGRDataSource::DestroyDataSource(poDS);
> 
> 
> As you can see, I am currently using the OGR SQL dialect, as I am
> passing NULL as the third parameter of the OGRDataSource::ExecuteSQL
> function.
> 
> Now I am trying to extend the SQL syntax to be able to use the OGR
> SQLite dialect. I have successfully recompiled GDAL 1.11.1 with SQLite
> support (version 3.8.5) but when I try to execute the same sample code
> (passing "SQLITE" as the 3rd argument of the OGRDataSource::ExecuteSQL
> function) I am getting the following error:
> 
>     In ExecuteSQL(): sqlite3_prepare(select * from myshapefile): no such
>     table: myshapefile
> 
> 
> What is the table name that contains the shapefile features that I can
> use in my SQL queries?

Pierluigi,

That should work... If you tried to configure GDAL several times, perhaps you 
should do a make clean.

Could you try defining CPL_DEBUG=ON as environment variable and rerun your 
code. You should normally see a statement like the following one to create the 
SQLite virtual table that matches the shapefile layer :

OGR2SQLITE: sqlite3_declare_vtab(CREATE TABLE "poly"("AREA" FLOAT,"EAS_ID" 
FLOAT,"PRFEDEA" VARCHAR(16),OGR_STYLE VARCHAR HIDDEN,"GEOMETRY" 
BLOB_POLYGON_2D_50000))

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From guasqui at actgate.com  Tue Feb 10 06:03:00 2015
From: guasqui at actgate.com (Pierluigi Guasqui)
Date: Tue, 10 Feb 2015 15:03:00 +0100
Subject: [gdal-dev] SQLite dialect in OGRDataSource::ExecuteSQL
In-Reply-To: <201502101342.12325.even.rouault@spatialys.com>
References: <54D9EFE2.3010102@actgate.com>
	<201502101342.12325.even.rouault@spatialys.com>
Message-ID: <54DA0F94.9000500@actgate.com>

Even,

thank you for your quick reply.

I downloaded the GDAL source package from scratch so the compilation 
should have been clean enough.

Related to CPL_DEBUG, that's a good hint! I'll try executing my code 
with that set and see if I find out something.

Thank you!
Pierluigi

Il 10/02/2015 13:42, Even Rouault ha scritto:
> Le mardi 10 f?vrier 2015 12:47:46, Pierluigi Guasqui a ?crit :
>> Hi All!
>>
>> I am using the GDAL/OGR functions to query a shapefile. This is a sample
>> code I have been successfully running so far:
>>
>>      OGRDataSource *poDS = OGRSFDriverRegistrar::Open(
>>      "some/path/to/myshapefile.shp" );
>>      OGRLayer *poLayer = poDS->ExecuteSQL( "select * from myshapefile",
>>      NULL, NULL );
>>      // ...
>>      // fetching result features from "poLayer"
>>      // ...
>>      poDS->ReleaseResultSet( poLayer );
>>      OGRDataSource::DestroyDataSource(poDS);
>>
>>
>> As you can see, I am currently using the OGR SQL dialect, as I am
>> passing NULL as the third parameter of the OGRDataSource::ExecuteSQL
>> function.
>>
>> Now I am trying to extend the SQL syntax to be able to use the OGR
>> SQLite dialect. I have successfully recompiled GDAL 1.11.1 with SQLite
>> support (version 3.8.5) but when I try to execute the same sample code
>> (passing "SQLITE" as the 3rd argument of the OGRDataSource::ExecuteSQL
>> function) I am getting the following error:
>>
>>      In ExecuteSQL(): sqlite3_prepare(select * from myshapefile): no such
>>      table: myshapefile
>>
>>
>> What is the table name that contains the shapefile features that I can
>> use in my SQL queries?
> Pierluigi,
>
> That should work... If you tried to configure GDAL several times, perhaps you
> should do a make clean.
>
> Could you try defining CPL_DEBUG=ON as environment variable and rerun your
> code. You should normally see a statement like the following one to create the
> SQLite virtual table that matches the shapefile layer :
>
> OGR2SQLITE: sqlite3_declare_vtab(CREATE TABLE "poly"("AREA" FLOAT,"EAS_ID"
> FLOAT,"PRFEDEA" VARCHAR(16),OGR_STYLE VARCHAR HIDDEN,"GEOMETRY"
> BLOB_POLYGON_2D_50000))
>
> Even
>

-- 
Pierluigi Guasqui
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com



From Bailey at InsaneGenius.org  Tue Feb 10 06:41:20 2015
From: Bailey at InsaneGenius.org (Scott Bailey)
Date: Tue, 10 Feb 2015 07:41:20 -0700
Subject: [gdal-dev] cmake4gdal?
In-Reply-To: <201502100048.21911.even.rouault@spatialys.com>
References: <CAEePw9jv+cXV+dzoNLVQFkhyXfF9heJXg5Lec0eRgAEHuhNLzQ@mail.gmail.com>
	<54D91E30.9050205@gmail.com>
	<CAEePw9gcC3_ByELKkg5aF5umCcnN7ZSY8Pw=7Qs7sJhvzbezzg@mail.gmail.com>
	<201502100048.21911.even.rouault@spatialys.com>
Message-ID: <CAEePw9g2MaZ8esAeb+CS=cmycChgNpnW7JQ0orbjGvyxH3ve-Q@mail.gmail.com>

Even,

I take it the plan is to replace Autotools with CMake?  Then it's just the
timeline in question?

SB

On Mon, Feb 9, 2015 at 4:48 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mardi 10 f?vrier 2015 00:34:44, Scott Bailey a ?crit :
> > Dmitry,
> >
> > Great!  So which drivers need CMake help?
> >
> > And what is the probability of cmake4gdal replacing autotools?
>
> Scott,
>
> I can imagine that replacing will take a few versions until we are
> confident
> that the cmake build system is stable enough & embrace all possibilities of
> autotools & windows build systems. In the meantime, there would be
> coexistence
> of the build systems.
>
> Even
>
> >
> > SB
> >
> > On Mon, Feb 9, 2015 at 1:53 PM, Dmitriy Baryshnikov <
> bishop.dev at gmail.com>
> >
> > wrote:
> > >  Hi Scott,
> > >
> > > The latest code is here:
> > > 1) https://github.com/nextgis/gdal_svn/tree/cmake4gdal
> > > 2) https://github.com/nextgis/gdal_svn/tree/rsmd-reader-dev <-- this
> my
> > > current branch
> > > 3) https://github.com/nextgis/gdal_svn/tree/wms-ags-dev
> > >
> > > There are some problems:
> > > there is no autotest directory in current repo, but it'll be more
> > > correctly to have the whole fork, not only sources (CTest?).
> > > So I plan to merge this three branches and make the full fork (with
> > > autotest) of OSGeo/GDAL in github.
> > >
> > > Anyhow we need to complete all drivers which is not yet cmaked.
> > > I plan to create wiki page in new repo with table of all GDAL drivers
> and
> > > their cmaking status and total percent.
> > >
> > > By now we need:
> > > 1) More testing and fixing on all platforms
> > > 2) Cmaked all drivers and applications, which is not yet cmaked
> > > 3) I plan to play with third party libs by cmake mechanism -
> > > ExternalProject_Add
> > >
> > > As for me the 2) is more important.
> > >
> > > Best regards,
> > >
> > >     Dmitry
> > >
> > > 09.02.2015 22:02, Scott Bailey ?????:
> > >  Building GDAL for Linux is a snap, MSVS is OK, but I find myself
> > >
> > > struggling to get a compilation with MINGW.
> > >
> > >  I've cloned the cmake4gdal 1.9 git repo and built that in Linux.  As
> > >
> > > expected it was simple.  Haven't had time to play with MINGW, yet.
> > > Never-the-less, I've found CMake based projects less frustrating than
> > > autotools when building with Windows, especially when using MINGW.
> > >
> > >  What is the status of cmake4gdal?  Is there something I should do to
> > >  help?
> > >
> > >  --
> > >
> > > Scott Bailey
> > >
> > >
> > > _______________________________________________
> > > gdal-dev mailing
> > > listgdal-dev at lists.osgeo.orghttp://
> lists.osgeo.org/mailman/listinfo/gdal
> > > -dev
> > >
> > >
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Scott Bailey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150210/e8d71049/attachment.html>

From even.rouault at spatialys.com  Tue Feb 10 06:58:11 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Feb 2015 15:58:11 +0100
Subject: [gdal-dev] cmake4gdal?
In-Reply-To: <CAEePw9g2MaZ8esAeb+CS=cmycChgNpnW7JQ0orbjGvyxH3ve-Q@mail.gmail.com>
References: <CAEePw9jv+cXV+dzoNLVQFkhyXfF9heJXg5Lec0eRgAEHuhNLzQ@mail.gmail.com>
	<201502100048.21911.even.rouault@spatialys.com>
	<CAEePw9g2MaZ8esAeb+CS=cmycChgNpnW7JQ0orbjGvyxH3ve-Q@mail.gmail.com>
Message-ID: <201502101558.11428.even.rouault@spatialys.com>

Le mardi 10 f?vrier 2015 15:41:20, Scott Bailey a ?crit :
> Even,
> 
> I take it the plan is to replace Autotools with CMake?  Then it's just the
> timeline in question?

Scott,

Not being a cmake master myself, it is currently not my personal plan, but if 
we have GDAL committers like Dmitriy to champion the effort and other 
contributors to help, I imagine it can be considered at some point. 

I see that "friends" projects like proj or libgeotiff have both build systems 
currently (actually 3 with the nmake one...). On the other hand, I think 
MapServer did the switch in one step ( 
http://mapserver.org/fr/development/rfc/ms-rfc-92.html ) 

The downside of having an interim period is that during it there's additional 
maintenance needed, but given the big number of potential GDAL dependencies, 
it seems unrealistic to have cmake conf feature-full and production ready, in 
a single step, if it stays in a branch.

Even

> 
> SB
> 
> On Mon, Feb 9, 2015 at 4:48 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le mardi 10 f?vrier 2015 00:34:44, Scott Bailey a ?crit :
> > > Dmitry,
> > > 
> > > Great!  So which drivers need CMake help?
> > > 
> > > And what is the probability of cmake4gdal replacing autotools?
> > 
> > Scott,
> > 
> > I can imagine that replacing will take a few versions until we are
> > confident
> > that the cmake build system is stable enough & embrace all possibilities
> > of autotools & windows build systems. In the meantime, there would be
> > coexistence
> > of the build systems.
> > 
> > Even
> > 
> > > SB
> > > 
> > > On Mon, Feb 9, 2015 at 1:53 PM, Dmitriy Baryshnikov <
> > 
> > bishop.dev at gmail.com>
> > 
> > > wrote:
> > > >  Hi Scott,
> > > > 
> > > > The latest code is here:
> > > > 1) https://github.com/nextgis/gdal_svn/tree/cmake4gdal
> > > > 2) https://github.com/nextgis/gdal_svn/tree/rsmd-reader-dev <-- this
> > 
> > my
> > 
> > > > current branch
> > > > 3) https://github.com/nextgis/gdal_svn/tree/wms-ags-dev
> > > > 
> > > > There are some problems:
> > > > there is no autotest directory in current repo, but it'll be more
> > > > correctly to have the whole fork, not only sources (CTest?).
> > > > So I plan to merge this three branches and make the full fork (with
> > > > autotest) of OSGeo/GDAL in github.
> > > > 
> > > > Anyhow we need to complete all drivers which is not yet cmaked.
> > > > I plan to create wiki page in new repo with table of all GDAL drivers
> > 
> > and
> > 
> > > > their cmaking status and total percent.
> > > > 
> > > > By now we need:
> > > > 1) More testing and fixing on all platforms
> > > > 2) Cmaked all drivers and applications, which is not yet cmaked
> > > > 3) I plan to play with third party libs by cmake mechanism -
> > > > ExternalProject_Add
> > > > 
> > > > As for me the 2) is more important.
> > > > 
> > > > Best regards,
> > > > 
> > > >     Dmitry
> > > > 
> > > > 09.02.2015 22:02, Scott Bailey ?????:
> > > >  Building GDAL for Linux is a snap, MSVS is OK, but I find myself
> > > > 
> > > > struggling to get a compilation with MINGW.
> > > > 
> > > >  I've cloned the cmake4gdal 1.9 git repo and built that in Linux.  As
> > > > 
> > > > expected it was simple.  Haven't had time to play with MINGW, yet.
> > > > Never-the-less, I've found CMake based projects less frustrating than
> > > > autotools when building with Windows, especially when using MINGW.
> > > > 
> > > >  What is the status of cmake4gdal?  Is there something I should do to
> > > >  help?
> > > >  
> > > >  --
> > > > 
> > > > Scott Bailey
> > > > 
> > > > 
> > > > _______________________________________________
> > > > gdal-dev mailing
> > > > listgdal-dev at lists.osgeo.orghttp://
> > 
> > lists.osgeo.org/mailman/listinfo/gdal
> > 
> > > > -dev
> > > > 
> > > > 
> > > > 
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Brendan.DeTracey at dfo-mpo.gc.ca  Tue Feb 10 07:27:54 2015
From: Brendan.DeTracey at dfo-mpo.gc.ca (DeTracey, Brendan)
Date: Tue, 10 Feb 2015 15:27:54 +0000
Subject: [gdal-dev] Wrong number or type of arguments for overloaded
 function 'CoordinateTransformation_TransformPoint'
Message-ID: <22C6A8A4889F0C45B71BF3272671822E820542BC@SVNSBIOMBX01.ENT.dfo-mpo.ca>

Hi,

I am using the GDAL python bindings via Windows 64 bit Anaconda, but I am getting an error when I try to run one of the GDAL sample scripts, tolatlong.py e.g.

E:\parse_cis>python tolatlong.py 0 0 temp.tif
Traceback (most recent call last):
  File "tolatlong.py", line 106, in <module>
    (int, lat, height) = ct.TransformPoint(X, Y)
  File "C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda\lib\site-packages\osgeo\osr.py", line 757, in TransformPoint
    return _osr.CoordinateTransformation_TransformPoint(self, *args)
NotImplementedError: Wrong number or type of arguments for overloaded function 'CoordinateTransformation_TransformPoint'.
  Possible C/C++ prototypes are:
    OSRCoordinateTransformationShadow::TransformPoint(double [3])
    OSRCoordinateTransformationShadow::TransformPoint(double [3],double,double,double)

When I google this error I find it might be related to GDAL not finding Proj (https://github.com/avalentino/gsdview/issues/89). Could someone please verify that this would be the source of this error? I have installed Proj under Anaconda and am trying to rule out whether it is a problem with Anaconda or GDAL.

Thanks,
Brendan

From even.rouault at spatialys.com  Tue Feb 10 07:55:14 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Feb 2015 16:55:14 +0100
Subject: [gdal-dev] Wrong number or type of arguments for overloaded
	function 'CoordinateTransformation_TransformPoint'
In-Reply-To: <22C6A8A4889F0C45B71BF3272671822E820542BC@SVNSBIOMBX01.ENT.dfo-mpo.ca>
References: <22C6A8A4889F0C45B71BF3272671822E820542BC@SVNSBIOMBX01.ENT.dfo-mpo.ca>
Message-ID: <201502101655.14690.even.rouault@spatialys.com>

Le mardi 10 f?vrier 2015 16:27:54, DeTracey, Brendan a ?crit :
> Hi,
> 
> I am using the GDAL python bindings via Windows 64 bit Anaconda, but I am
> getting an error when I try to run one of the GDAL sample scripts,
> tolatlong.py e.g.
> 
> E:\parse_cis>python tolatlong.py 0 0 temp.tif
> Traceback (most recent call last):
>   File "tolatlong.py", line 106, in <module>
>     (int, lat, height) = ct.TransformPoint(X, Y)
>   File
> "C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda\lib\site-packages\osg
> eo\osr.py", line 757, in TransformPoint return
> _osr.CoordinateTransformation_TransformPoint(self, *args)
> NotImplementedError: Wrong number or type of arguments for overloaded
> function 'CoordinateTransformation_TransformPoint'. Possible C/C++
> prototypes are:
>     OSRCoordinateTransformationShadow::TransformPoint(double [3])
>     OSRCoordinateTransformationShadow::TransformPoint(double
> [3],double,double,double)
> 
> When I google this error I find it might be related to GDAL not finding
> Proj (https://github.com/avalentino/gsdview/issues/89). Could someone
> please verify that this would be the source of this error? I have
> installed Proj under Anaconda and am trying to rule out whether it is a
> problem with Anaconda or GDAL.

Yes, it seems very likely this is due to proj missing. Check that proj.dll is 
available in one of the paths in the PATH.

> 
> Thanks,
> Brendan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From guasqui at actgate.com  Tue Feb 10 09:20:12 2015
From: guasqui at actgate.com (Pierluigi Guasqui)
Date: Tue, 10 Feb 2015 18:20:12 +0100
Subject: [gdal-dev] SQLite dialect in OGRDataSource::ExecuteSQL
In-Reply-To: <201502101342.12325.even.rouault@spatialys.com>
References: <54D9EFE2.3010102@actgate.com>
	<201502101342.12325.even.rouault@spatialys.com>
Message-ID: <54DA3DCC.4070707@actgate.com>

Even,

I set the environment variable CPL_DEBUG=ON and rerun my code. I found 
the statement you mentioned:

    SQLITE: OGR style SQLite DB found !
    SQLITE: Spatialite not available. Implementing a few functions
    OGR2SQLITE: sqlite3_declare_vtab(CREATE TABLE
    "xrs_2010jan21_mf2_geometry_polygons"("et" FLOAT,"utc" VARCHAR(25), ...

but then it printed the following error:

    ERROR 1: Cannot create virtual table for layer
    'xrs_2010jan21_mf2_geometry_polygons' : CREATE VIRTUAL: invalid SQL
    statement : CREATE TABLE "xrs_2010jan21_mf2_geometry_polygons"("et"
    FLOAT,"utc" VARCHAR(25), ...
    SQLITE: OGR style SQLite DB found !
    ERROR 1: In ExecuteSQL(): sqlite3_prepare(select * from
    xrs_2010jan21_mf2_geometry_polygons):
       no such table: xrs_2010jan21_mf2_geometry_polygons
    OGR: Unloading VirtualOGR module

Any idea why I am getting this error?

Thank you!
Pierluigi

Il 10/02/2015 13:42, Even Rouault ha scritto:
> Le mardi 10 f?vrier 2015 12:47:46, Pierluigi Guasqui a ?crit :
>> Hi All!
>>
>> I am using the GDAL/OGR functions to query a shapefile. This is a sample
>> code I have been successfully running so far:
>>
>>      OGRDataSource *poDS = OGRSFDriverRegistrar::Open(
>>      "some/path/to/myshapefile.shp" );
>>      OGRLayer *poLayer = poDS->ExecuteSQL( "select * from myshapefile",
>>      NULL, NULL );
>>      // ...
>>      // fetching result features from "poLayer"
>>      // ...
>>      poDS->ReleaseResultSet( poLayer );
>>      OGRDataSource::DestroyDataSource(poDS);
>>
>>
>> As you can see, I am currently using the OGR SQL dialect, as I am
>> passing NULL as the third parameter of the OGRDataSource::ExecuteSQL
>> function.
>>
>> Now I am trying to extend the SQL syntax to be able to use the OGR
>> SQLite dialect. I have successfully recompiled GDAL 1.11.1 with SQLite
>> support (version 3.8.5) but when I try to execute the same sample code
>> (passing "SQLITE" as the 3rd argument of the OGRDataSource::ExecuteSQL
>> function) I am getting the following error:
>>
>>      In ExecuteSQL(): sqlite3_prepare(select * from myshapefile): no such
>>      table: myshapefile
>>
>>
>> What is the table name that contains the shapefile features that I can
>> use in my SQL queries?
> Pierluigi,
>
> That should work... If you tried to configure GDAL several times, perhaps you
> should do a make clean.
>
> Could you try defining CPL_DEBUG=ON as environment variable and rerun your
> code. You should normally see a statement like the following one to create the
> SQLite virtual table that matches the shapefile layer :
>
> OGR2SQLITE: sqlite3_declare_vtab(CREATE TABLE "poly"("AREA" FLOAT,"EAS_ID"
> FLOAT,"PRFEDEA" VARCHAR(16),OGR_STYLE VARCHAR HIDDEN,"GEOMETRY"
> BLOB_POLYGON_2D_50000))
>
> Even
>

-- 
Pierluigi Guasqui
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150210/5326208c/attachment-0001.html>

From even.rouault at spatialys.com  Tue Feb 10 09:49:31 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Feb 2015 18:49:31 +0100
Subject: [gdal-dev] SQLite dialect in OGRDataSource::ExecuteSQL
In-Reply-To: <54DA3DCC.4070707@actgate.com>
References: <54D9EFE2.3010102@actgate.com>
	<201502101342.12325.even.rouault@spatialys.com>
	<54DA3DCC.4070707@actgate.com>
Message-ID: <201502101849.31932.even.rouault@spatialys.com>

Le mardi 10 f?vrier 2015 18:20:12, Pierluigi Guasqui a ?crit :
> Even,
> 
> I set the environment variable CPL_DEBUG=ON and rerun my code. I found
> the statement you mentioned:
> 
>     SQLITE: OGR style SQLite DB found !
>     SQLITE: Spatialite not available. Implementing a few functions
>     OGR2SQLITE: sqlite3_declare_vtab(CREATE TABLE
>     "xrs_2010jan21_mf2_geometry_polygons"("et" FLOAT,"utc" VARCHAR(25), ...
> 
> but then it printed the following error:
> 
>     ERROR 1: Cannot create virtual table for layer
>     'xrs_2010jan21_mf2_geometry_polygons' : CREATE VIRTUAL: invalid SQL
>     statement : CREATE TABLE "xrs_2010jan21_mf2_geometry_polygons"("et"
>     FLOAT,"utc" VARCHAR(25), ...
>     SQLITE: OGR style SQLite DB found !
>     ERROR 1: In ExecuteSQL(): sqlite3_prepare(select * from
>     xrs_2010jan21_mf2_geometry_polygons):
>        no such table: xrs_2010jan21_mf2_geometry_polygons
>     OGR: Unloading VirtualOGR module

Could you paste the full (untruncated) statement ?
And the output of "ogrinfo -al -so yourshapefile.shp" also

> 
> Any idea why I am getting this error?
> 
> Thank you!
> Pierluigi
> 
> Il 10/02/2015 13:42, Even Rouault ha scritto:
> > Le mardi 10 f?vrier 2015 12:47:46, Pierluigi Guasqui a ?crit :
> >> Hi All!
> >> 
> >> I am using the GDAL/OGR functions to query a shapefile. This is a sample
> >> 
> >> code I have been successfully running so far:
> >>      OGRDataSource *poDS = OGRSFDriverRegistrar::Open(
> >>      "some/path/to/myshapefile.shp" );
> >>      OGRLayer *poLayer = poDS->ExecuteSQL( "select * from myshapefile",
> >>      NULL, NULL );
> >>      // ...
> >>      // fetching result features from "poLayer"
> >>      // ...
> >>      poDS->ReleaseResultSet( poLayer );
> >>      OGRDataSource::DestroyDataSource(poDS);
> >> 
> >> As you can see, I am currently using the OGR SQL dialect, as I am
> >> passing NULL as the third parameter of the OGRDataSource::ExecuteSQL
> >> function.
> >> 
> >> Now I am trying to extend the SQL syntax to be able to use the OGR
> >> SQLite dialect. I have successfully recompiled GDAL 1.11.1 with SQLite
> >> support (version 3.8.5) but when I try to execute the same sample code
> >> (passing "SQLITE" as the 3rd argument of the OGRDataSource::ExecuteSQL
> >> 
> >> function) I am getting the following error:
> >>      In ExecuteSQL(): sqlite3_prepare(select * from myshapefile): no
> >>      such table: myshapefile
> >> 
> >> What is the table name that contains the shapefile features that I can
> >> use in my SQL queries?
> > 
> > Pierluigi,
> > 
> > That should work... If you tried to configure GDAL several times, perhaps
> > you should do a make clean.
> > 
> > Could you try defining CPL_DEBUG=ON as environment variable and rerun
> > your code. You should normally see a statement like the following one to
> > create the SQLite virtual table that matches the shapefile layer :
> > 
> > OGR2SQLITE: sqlite3_declare_vtab(CREATE TABLE "poly"("AREA"
> > FLOAT,"EAS_ID" FLOAT,"PRFEDEA" VARCHAR(16),OGR_STYLE VARCHAR
> > HIDDEN,"GEOMETRY"
> > BLOB_POLYGON_2D_50000))
> > 
> > Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From guasqui at actgate.com  Tue Feb 10 10:05:58 2015
From: guasqui at actgate.com (Pierluigi Guasqui)
Date: Tue, 10 Feb 2015 19:05:58 +0100
Subject: [gdal-dev] SQLite dialect in OGRDataSource::ExecuteSQL
In-Reply-To: <201502101849.31932.even.rouault@spatialys.com>
References: <54D9EFE2.3010102@actgate.com>
	<201502101342.12325.even.rouault@spatialys.com>
	<54DA3DCC.4070707@actgate.com>
	<201502101849.31932.even.rouault@spatialys.com>
Message-ID: <54DA4886.4020400@actgate.com>

Even,

here is the complete output:

    Shape: DBF Codepage = LDID/87 for
    D:/act_docs_pierluigi/act_dev/test_gdal_sqlite/xrs_2010jan21_mf2_geometry_polygons.shp
    Shape: Treating as encoding 'ISO-8859-1'.
    OGR:
    OGROpen(D:/act_docs_pierluigi/act_dev/test_gdal_sqlite/xrs_2010jan21_mf2_geometry_polygons.shp/00440BB0)
    succeeded as ESRI Shapefile.
    SQLITE: OGR style SQLite DB found !
    SQLITE: Spatialite not available. Implementing a few functions
    OGR2SQLITE: sqlite3_declare_vtab(CREATE TABLE
    "xrs_2010jan21_mf2_geometry_polygons"("et" FLOAT,"utc"
    VARCHAR(25),"met" VARCHAR(11),"tint" FLOAT,"SunPosX_J2"
    FLOAT,"SunPosY_J2" FLOAT,"SunPosZ_J2" FLOAT,"SCPosX_J2"
    FLOAT,"SCPosY_J2" FLOAT,"SCPosZ_J2" FLOAT,"SCVelX_J2"
    FLOAT,"SCVelY_J2" FLOAT,"SCVelZ_J2" FLOAT,"TargPlanet"
    VARCHAR(22),"TP_PosX_J2" FLOAT,"TP_PosY_J2" FLOAT,"TP_PosZ_J2"
    FLOAT,"TP2SunX_J2" FLOAT,"TP2SunY_J2" FLOAT,"TP2SunZ_J2"
    FLOAT,"TP2SunX_TF" FLOAT,"TP2SunY_TF" FLOAT,"TP2SunZ_TF"
    FLOAT,"TP2SC_x_J2" FLOAT,"TP2SC_y_J2" FLOAT,"TP2SC_z_J2"
    FLOAT,"TP2SC_x_TF" FLOAT,"TP2SC_y_TF" FLOAT,"TP2SC_z_TF"
    FLOAT,"TP_VelX_J2" FLOAT,"TP_VelY_J2" FLOAT,"TP_VelZ_J2"
    FLOAT,"TPtrueAnom" FLOAT,"SC2TPctrD" FLOAT,"SubSCLAT"
    FLOAT,"SubSCLON" FLOAT,"NADIR_ALT" FLOAT,"SubSolLAT"
    FLOAT,"SubSolLON" FLOAT,"sc_inst" VARCHAR(22),"N_BsightV"
    VARCHAR(22),"FOV_0" FLOAT,"BS_x_J20" FLOAT,"BS_y_J20"
    FLOAT,"BS_z_J20" FLOAT,"BS_x_TBF0" FLOAT,"BS_y_TBF0"
    FLOAT,"BS_z_TBF0" FLOAT,"BS_pLon0" FLOAT,"BS_pLat0" FLOAT,"BS_pEmi0"
    FLOAT,"BS_pInc0" FLOAT,"BS_pPha0" FLOAT,"SUN2grnd0" FLOAT,"BS_RA0"
    FLOAT,"BS_Dec0" FLOAT,"BS_twist0" FLOAT,"TangHght0" FLOAT,"TH_Lon0"
    FLOAT,"TH_Lat0" FLOAT,"pNearTBFx0" FLOAT,"pNearTBFy0"
    FLOAT,"pNearTBFz0" FLOAT,"sc2BSdist0" FLOAT,"FOV_1" FLOAT,"BS_x_J21"
    FLOAT,"BS_y_J21" FLOAT,"BS_z_J21" FLOAT,"BS_x_TBF1"
    FLOAT,"BS_y_TBF1" FLOAT,"BS_z_TBF1" FLOAT,"BS_pLon1"
    FLOAT,"BS_pLat1" FLOAT,"BS_pEmi1" FLOAT,"BS_pInc1" FLOAT,"BS_pPha1"
    FLOAT,"SUN2grnd1" FLOAT,"BS_RA1" FLOAT,"BS_Dec1" FLOAT,"BS_twist1"
    FLOAT,"TangHght1" FLOAT,"TH_Lon1" FLOAT,"TH_Lat1" FLOAT,"pNearTBFx1"
    FLOAT,"pNearTBFy1" FLOAT,"pNearTBFz1" FLOAT,"sc2BSdist1"
    FLOAT,"FOV_2" FLOAT,"BS_x_J22" FLOAT,"BS_y_J22" FLOAT,"BS_z_J22"
    FLOAT,"BS_x_TBF2" FLOAT,"BS_y_TBF2" FLOAT,"BS_z_TBF2"
    FLOAT,"BS_pLon2" FLOAT,"BS_pLat2" FLOAT,"BS_pEmi2" FLOAT,"BS_pInc2"
    FLOAT,"BS_pPha2" FLOAT,"SUN2grnd2" FLOAT,"BS_RA2" FLOAT,"BS_Dec2"
    FLOAT,"BS_twist2" FLOAT,"TangHght2" FLOAT,"TH_Lon2" FLOAT,"TH_Lat2"
    FLOAT,"pNearTBFx2" FLOAT,"pNearTBFy2" FLOAT,"pNearTBFz2"
    FLOAT,"sc2BSdist2" FLOAT,"FOV_3" FLOAT,"BS_x_J23" FLOAT,"BS_y_J23"
    FLOAT,"BS_z_J23" FLOAT,"BS_x_TBF3" FLOAT,"BS_y_TBF3"
    FLOAT,"BS_z_TBF3" FLOAT,"BS_pLon3" FLOAT,"BS_pLat3" FLOAT,"BS_pEmi3"
    FLOAT,"BS_pInc3" FLOAT,"BS_pPha3" FLOAT,"SUN2grnd3" FLOAT,"BS_RA3"
    FLOAT,"BS_Dec3" FLOAT,"BS_twist3" FLOAT,"TangHght3" FLOAT,"TH_Lon3"
    FLOAT,"TH_Lat3" FLOAT,"pNearTBFx3" FLOAT,"pNearTBFy3"
    FLOAT,"pNearTBFz3" FLOAT,"sc2BSdist3" FLOAT,"FOV_4" FLOAT,"BS_x_J24"
    FLOAT,"BS_y_J24" FLOAT,"BS_z_J24" FLOAT,"BS_x_TBF4"
    FLOAT,"BS_y_TBF4" FLOAT,"BS_z_TBF4" FLOAT,"BS_pLon4"
    FLOAT,"BS_pLat4" FLOAT,"BS_pEmi4" FLOAT,"BS_pInc4" FLOAT,"BS_pPha4"
    FLOAT,"SUN2grnd4" FLOAT,"BS_RA4" FLOAT,"BS_Dec4" FLOAT,"BS_twist4"
    FLOAT,"TangHght4" FLOAT,"TH_Lon4" FLOAT,"TH_Lat4" FLOAT,"pNearTBFx4"
    FLOAT,"pNearTBFy4" FLOAT,"pNearTBFz4" FLOAT,"sc2BSdist4"
    FLOAT,"FOV_5" FLOAT,"BS_x_J25" FLOAT,"BS_y_J25" FLOAT,"BS_z_J25"
    FLOAT,"BS_x_TBF5" FLOAT,"BS_y_TBF5" FLOAT,"BS_z_TBF5"
    FLOAT,"BS_pLon5" FLOAT,"BS_pLat5" FLOAT,"BS_pEmi5" FLOAT,"BS_pInc5"
    FLOAT,"BS_pPha5" FLOAT,"SUN2grnd5" FLOAT,"BS_RA5" FLOAT,"BS_Dec5"
    FLOAT,"BS_twist5" FLOAT,"TangHght5" FLOAT,"TH_Lon5" FLOAT,"TH_Lat5"
    FLOAT,"pNearTBFx5" FLOAT,"pNearTBFy5" FLOAT,"pNearTBFz5"
    FLOAT,"sc2BSdist5" FLOAT,"FOV_6" FLOAT,"BS_x_J26" FLOAT,"BS_y_J26"
    FLOAT,"BS_z_J26" FLOAT,"BS_x_TBF6" FLOAT,"BS_y_TBF6"
    FLOAT,"BS_z_TBF6" FLOAT,"BS_pLon6" FLOAT,"BS_pLat6" FLOAT,"BS_pEmi6"
    FLOAT,"BS_pInc6" FLOAT,"BS_pPha6" FLOAT,"SUN2grnd6" FLOAT,"BS_RA6"
    FLOAT,"BS_Dec6" FLOAT,"BS_twist6" FLOAT,"TangHght6" FLOAT,"TH_Lon6"
    FLOAT,"TH_Lat6" FLOAT,"pNearTBFx6" FLOAT,"pNearTBFy6"
    FLOAT,"pNearTBFz6" FLOAT,"sc2BSdist6" FLOAT,"BS2SCv_ang"
    FLOAT,"IFOVatrack" FLOAT,"IFOVxtrack" FLOAT,"a-smear"
    FLOAT,"x-smear" FLOAT,"a-azimuth" FLOAT,"BLatStart"
    FLOAT,"BLonStart" FLOAT,"BLatEnd" FLOAT,"BLonEnd" FLOAT,"MET"
    VARCHAR(15),"EDRFILE" VARCHAR(14),OGR_STYLE VARCHAR
    HIDDEN,"GEOMETRY" BLOB_POLYGON_2D))
    ERROR 1: Cannot create virtual table for layer
    'xrs_2010jan21_mf2_geometry_polygons' : CREATE VIRTUAL: invalid SQL
    statement : CREATE TABLE "xrs_2010jan21_mf2_geometry_polygons"("et"
    FLOAT,"utc" VARCHAR(25),"met" VARCHAR(11),"tint" FLOAT,"SunPosX_J2"
    FLOAT,"SunPosY_J2" FLOAT,"SunPosZ_J2" FLOAT,"SCPosX_J2"
    FLOAT,"SCPosY_J2" FLOAT,"SCPosZ_J2" FLOAT,"SCVelX_J2"
    FLOAT,"SCVelY_J2" FLOAT,"SCVelZ_J2" FLOAT,"TargPlanet"
    VARCHAR(22),"TP_PosX_J2" FLOAT,"TP_PosY_J2" FLOAT,"TP_PosZ_J2"
    FLOAT,"TP2SunX_J2" FLOAT,"TP2SunY_J2" FLOAT,"TP2SunZ_J2"
    FLOAT,"TP2SunX_TF" FLOAT,"TP2SunY_TF" FLOAT,"TP2SunZ_TF"
    FLOAT,"TP2SC_x_J2" FLOAT,"TP2SC_y_J2" FLOAT,"TP2SC_z_J2"
    FLOAT,"TP2SC_x_TF" FLOAT,"TP2SC_y_TF" FLOAT,"TP2SC_z_TF"
    FLOAT,"TP_VelX_J2" FLOAT,"TP_VelY_J2" FLOAT,"TP_VelZ_J2"
    FLOAT,"TPtrueAnom" FLOAT,"SC2TPctrD" FLOAT,"SubSCLAT"
    FLOAT,"SubSCLON" FLOAT,"NADIR_ALT" FLOAT,"SubSolLAT"
    FLOAT,"SubSolLON" FLOAT,"sc_inst" VARCHAR(22),"N_BsightV"
    VARCHAR(22),"FOV_0" FLOAT,"BS_x_J20" FLOAT,"BS_y_J20"
    FLOAT,"BS_z_J20" FLOAT,"BS_x_TBF0" FLOAT,"BS_y_TBF0"
    FLOAT,"BS_z_TBF0" FLOAT,"BS_pLon0" FLOAT,"BS_pLat0" FLOAT,"BS_pEmi0"
    FLOAT,"BS_pInc0" FLOAT,"BS_pPha0" FLOAT,"SUN2grnd0" FLOAT,"BS_RA0"
    FLOAT,"BS_Dec0" FLOAT,"BS_twist0" FLOAT,"TangHght0" FLOAT,"TH_Lon0"
    FLOAT,"TH_Lat0" FLOAT,"pNearTBFx0" FLOAT,"pNearTBFy0"
    FLOAT,"pNearTBFz0" FLOAT,"sc2BSdist0" FLOAT,"FOV_1" FLOAT,"BS_x_J21"
    FLOAT,"BS_y_J21" FLOAT,"BS_z_J21" FLOAT,"BS_x_TBF1"
    FLOAT,"BS_y_TBF1" FLOAT,"BS_z_TBF1" FLOAT,"BS_pLon1"
    FLOAT,"BS_pLat1" FLOAT,"BS_pEmi1" FLOAT,"BS_pInc1" FLOAT,"BS_pPha1"
    FLOAT,"SUN2grnd1" FLOAT,"BS_RA1" FLOAT,"BS_Dec1" FLOAT,"BS_twist1"
    FLOAT,"TangHght1" FLOAT,"TH_Lon1" FLOAT,"TH_Lat1" FLOAT,"pNearTBFx1"
    FLOAT,"pNearTBFy1" FLOAT,"pNearTBFz1" FLOAT,"sc2BSdist1"
    FLOAT,"FOV_2" FLOAT,"BS_x_J22" FLOAT,"BS_y_J22" FLOAT,"BS_z_J22"
    FLOAT,"BS_x_TBF2" FLOAT,"BS_y_TBF2" FLOAT,"BS_z_TBF2"
    FLOAT,"BS_pLon2" FLOAT,"BS_pLat2" FLOAT,"BS_pEmi2" FLOAT,"BS_pInc2"
    FLOAT,"BS_pPha2" FLOAT,"SUN2grnd2" FLOAT,"BS_RA2" FLOAT,"BS_Dec2"
    FLOAT,"BS_twist2" FLOAT,"TangHght2" FLOAT,"TH_Lon2" FLOAT,"TH_Lat2"
    FLOAT,"pNearTBFx2" FLOAT,"pNearTBFy2" FLOAT,"pNearTBFz2"
    FLOAT,"sc2BSdist2" FLOAT,"FOV_3" FLOAT,"BS_x_J23" FLOAT,"BS_y_J23"
    FLOAT,"BS_z_J23" FLOAT,"BS_x_TBF3" FLOAT,"BS_y_TBF3"
    FLOAT,"BS_z_TBF3" FLOAT,"BS_pLon3" FLOAT,"BS_pLat3" FLOAT,"BS_pEmi3"
    FLOAT,"BS_pInc3" FLOAT,"BS_pPha3" FLOAT,"SUN2grnd3" FLOAT,"BS_RA3"
    FLOAT,"BS_Dec3" FLOAT,"BS_twist3" FLOAT,"TangHght3" FLOAT,"TH_Lon3"
    FLOAT,"TH_Lat3" FLOAT,"pNearTBFx3" FLOAT,"pNearTBFy3"
    FLOAT,"pNearTBFz3" FLOAT,"sc2BSdist3" FLOAT,"FOV_4" FLOAT,"BS_x_J24"
    FLOAT,"BS_y_J24" FLOAT,"BS_z_J24" FLOAT,"BS_x_TBF4"
    FLOAT,"BS_y_TBF4" FLOAT,"BS_z_TBF4" FLOAT,"BS_pLon4"
    FLOAT,"BS_pLat4" FLOAT,"BS_pEmi4" FLOAT,"BS_pInc4" FLOAT,"BS_pPha4"
    FLOAT,"SUN2grnd4" FLOAT,"BS_RA4" FLOAT,"BS_Dec4" FLOAT,"BS_twist4"
    FLOAT,"TangHght4" FLOAT,"TH_Lon4" FLOAT,"TH_Lat4" FLOAT,"pNearTBFx4"
    FLOAT,"pNearTBFy4" FLOAT,"pNearTBFz4" FLOAT,"sc2BSdist4"
    FLOAT,"FOV_5" FLOAT,"BS_x_J25" FLOAT,"BS_y_J25" FLOAT,"BS_z_J25"
    FLOAT,"BS_x_TBF5" FLOAT,"BS_y_TBF5" FLOAT,"BS_z_TBF5"
    FLOAT,"BS_pLon5" FLOAT,"BS_pLat5" FLOAT,"BS_pEmi5" FLOAT,"BS_pInc5"
    FLOAT,"BS_pPha5" FLOAT,"SUN2grnd5" FLOAT,"BS_RA5" FLOAT,"BS_Dec5"
    FLOAT,"BS_twist5" FLOAT,"TangHght5" FLOAT,"TH_Lon5" FLOAT,"TH_Lat5"
    FLOAT,"pNearTBFx5" FLOAT,"pNearTBFy5" FLOAT,"pNearTBFz5"
    FLOAT,"sc2BSdist5" FLOAT,"FOV_6" FLOAT,"BS_x_J26" FLOAT,"BS_y_J26"
    FLOAT,"BS_z_J26" FLOAT,"BS_x_TBF6" FLOAT,"BS_y_TBF6"
    FLOAT,"BS_z_TBF6" FLOAT,"BS_pLon6" FLOAT,"BS_pLat6" FLOAT,"BS_pEmi6"
    FLOAT,"BS_pInc6" FLOAT,"BS_pPha6" FLOAT,"SUN2grnd6" FLOAT,"BS_RA6"
    FLOAT,"BS_Dec6" FLOAT,"BS_twist6" FLOAT,"TangHght6" FLOAT,"TH_Lon6"
    FLOAT,"TH_Lat6" FLOAT,"pNearTBFx6" FLOAT,"pNearTBFy6"
    FLOAT,"pNearTBFz6" FLOAT,"sc2BSdist6" FLOAT,"BS2SCv_ang"
    FLOAT,"IFOVatrack" FLOAT,"IFOVxtrack" FLOAT,"a-smear"
    FLOAT,"x-smear" FLOAT,"a-azimuth" FLOAT,"BLatStart"
    FLOAT,"BLonStart" FLOAT,"BLatEnd" FLOAT,"BLonEnd" FLOAT,"MET"
    VARCHAR(15),"EDRFILE" VARCHAR(14),OGR_STYLE VARCHAR
    HIDDEN,"GEOMETRY" BLOB_POLYGON_2D)
    SQLITE: OGR style SQLite DB found !
    ERROR 1: In ExecuteSQL(): sqlite3_prepare(select * from
    xrs_2010jan21_mf2_geometry_polygons):
       no such table: xrs_2010jan21_mf2_geometry_polygons
    OGR: Unloading VirtualOGR module
    SQL syntax error: In ExecuteSQL(): sqlite3_prepare(select * from
    xrs_2010jan21_mf2_geometry_polygons):
       no such table: xrs_2010jan21_mf2_geometry_polygons


And this is the output of the "ogrinfo" command:

    Shape: DBF Codepage = LDID/87 for
    xrs_2010jan21_mf2_geometry_polygons.shp
    Shape: Treating as encoding 'ISO-8859-1'.
    OGR: OGROpen(xrs_2010jan21_mf2_geometry_polygons.shp/00FC5F78)
    succeeded as ESRI Shapefile.
    OGR: GetLayerCount() = 1

    INFO: Open of `xrs_2010jan21_mf2_geometry_polygons.shp'
           using driver `ESRI Shapefile' successful.

    Layer name: xrs_2010jan21_mf2_geometry_polygons
    Geometry: Polygon
    Feature Count: 16
    Extent: (-155.072038, -8.925269) - (-28.963009, 6.616499)
    Layer SRS WKT:
    (unknown)
    et: Real (24.15)
    utc: String (25.0)
    met: String (11.0)
    tint: Real (24.15)
    SunPosX_J2: Real (24.15)
    SunPosY_J2: Real (24.15)
    SunPosZ_J2: Real (24.15)
    SCPosX_J2: Real (24.15)
    SCPosY_J2: Real (24.15)
    SCPosZ_J2: Real (24.15)
    SCVelX_J2: Real (24.15)
    SCVelY_J2: Real (24.15)
    SCVelZ_J2: Real (24.15)
    TargPlanet: String (22.0)
    TP_PosX_J2: Real (24.15)
    TP_PosY_J2: Real (24.15)
    TP_PosZ_J2: Real (24.15)
    TP2SunX_J2: Real (24.15)
    TP2SunY_J2: Real (24.15)
    TP2SunZ_J2: Real (24.15)
    TP2SunX_TF: Real (24.15)
    TP2SunY_TF: Real (24.15)
    TP2SunZ_TF: Real (24.15)
    TP2SC_x_J2: Real (24.15)
    TP2SC_y_J2: Real (24.15)
    TP2SC_z_J2: Real (24.15)
    TP2SC_x_TF: Real (24.15)
    TP2SC_y_TF: Real (24.15)
    TP2SC_z_TF: Real (24.15)
    TP_VelX_J2: Real (24.15)
    TP_VelY_J2: Real (24.15)
    TP_VelZ_J2: Real (24.15)
    TPtrueAnom: Real (24.15)
    SC2TPctrD: Real (24.15)
    SubSCLAT: Real (24.15)
    SubSCLON: Real (24.15)
    NADIR_ALT: Real (24.15)
    SubSolLAT: Real (24.15)
    SubSolLON: Real (24.15)
    sc_inst: String (22.0)
    N_BsightV: String (22.0)
    FOV_0: Real (11.0)
    BS_x_J20: Real (24.15)
    BS_y_J20: Real (24.15)
    BS_z_J20: Real (24.15)
    BS_x_TBF0: Real (24.15)
    BS_y_TBF0: Real (24.15)
    BS_z_TBF0: Real (24.15)
    BS_pLon0: Real (24.15)
    BS_pLat0: Real (24.15)
    BS_pEmi0: Real (24.15)
    BS_pInc0: Real (24.15)
    BS_pPha0: Real (24.15)
    SUN2grnd0: Real (24.15)
    BS_RA0: Real (24.15)
    BS_Dec0: Real (24.15)
    BS_twist0: Real (24.15)
    TangHght0: Real (24.15)
    TH_Lon0: Real (24.15)
    TH_Lat0: Real (24.15)
    pNearTBFx0: Real (24.15)
    pNearTBFy0: Real (24.15)
    pNearTBFz0: Real (24.15)
    sc2BSdist0: Real (24.15)
    FOV_1: Real (11.0)
    BS_x_J21: Real (24.15)
    BS_y_J21: Real (24.15)
    BS_z_J21: Real (24.15)
    BS_x_TBF1: Real (24.15)
    BS_y_TBF1: Real (24.15)
    BS_z_TBF1: Real (24.15)
    BS_pLon1: Real (24.15)
    BS_pLat1: Real (24.15)
    BS_pEmi1: Real (24.15)
    BS_pInc1: Real (24.15)
    BS_pPha1: Real (24.15)
    SUN2grnd1: Real (24.15)
    BS_RA1: Real (24.15)
    BS_Dec1: Real (24.15)
    BS_twist1: Real (24.15)
    TangHght1: Real (24.15)
    TH_Lon1: Real (24.15)
    TH_Lat1: Real (24.15)
    pNearTBFx1: Real (24.15)
    pNearTBFy1: Real (24.15)
    pNearTBFz1: Real (24.15)
    sc2BSdist1: Real (24.15)
    FOV_2: Real (11.0)
    BS_x_J22: Real (24.15)
    BS_y_J22: Real (24.15)
    BS_z_J22: Real (24.15)
    BS_x_TBF2: Real (24.15)
    BS_y_TBF2: Real (24.15)
    BS_z_TBF2: Real (24.15)
    BS_pLon2: Real (24.15)
    BS_pLat2: Real (24.15)
    BS_pEmi2: Real (24.15)
    BS_pInc2: Real (24.15)
    BS_pPha2: Real (24.15)
    SUN2grnd2: Real (24.15)
    BS_RA2: Real (24.15)
    BS_Dec2: Real (24.15)
    BS_twist2: Real (24.15)
    TangHght2: Real (24.15)
    TH_Lon2: Real (24.15)
    TH_Lat2: Real (24.15)
    pNearTBFx2: Real (24.15)
    pNearTBFy2: Real (24.15)
    pNearTBFz2: Real (24.15)
    sc2BSdist2: Real (24.15)
    FOV_3: Real (11.0)
    BS_x_J23: Real (24.15)
    BS_y_J23: Real (24.15)
    BS_z_J23: Real (24.15)
    BS_x_TBF3: Real (24.15)
    BS_y_TBF3: Real (24.15)
    BS_z_TBF3: Real (24.15)
    BS_pLon3: Real (24.15)
    BS_pLat3: Real (24.15)
    BS_pEmi3: Real (24.15)
    BS_pInc3: Real (24.15)
    BS_pPha3: Real (24.15)
    SUN2grnd3: Real (24.15)
    BS_RA3: Real (24.15)
    BS_Dec3: Real (24.15)
    BS_twist3: Real (24.15)
    TangHght3: Real (24.15)
    TH_Lon3: Real (24.15)
    TH_Lat3: Real (24.15)
    pNearTBFx3: Real (24.15)
    pNearTBFy3: Real (24.15)
    pNearTBFz3: Real (24.15)
    sc2BSdist3: Real (24.15)
    FOV_4: Real (11.0)
    BS_x_J24: Real (24.15)
    BS_y_J24: Real (24.15)
    BS_z_J24: Real (24.15)
    BS_x_TBF4: Real (24.15)
    BS_y_TBF4: Real (24.15)
    BS_z_TBF4: Real (24.15)
    BS_pLon4: Real (24.15)
    BS_pLat4: Real (24.15)
    BS_pEmi4: Real (24.15)
    BS_pInc4: Real (24.15)
    BS_pPha4: Real (24.15)
    SUN2grnd4: Real (24.15)
    BS_RA4: Real (24.15)
    BS_Dec4: Real (24.15)
    BS_twist4: Real (24.15)
    TangHght4: Real (24.15)
    TH_Lon4: Real (24.15)
    TH_Lat4: Real (24.15)
    pNearTBFx4: Real (24.15)
    pNearTBFy4: Real (24.15)
    pNearTBFz4: Real (24.15)
    sc2BSdist4: Real (24.15)
    FOV_5: Real (11.0)
    BS_x_J25: Real (24.15)
    BS_y_J25: Real (24.15)
    BS_z_J25: Real (24.15)
    BS_x_TBF5: Real (24.15)
    BS_y_TBF5: Real (24.15)
    BS_z_TBF5: Real (24.15)
    BS_pLon5: Real (24.15)
    BS_pLat5: Real (24.15)
    BS_pEmi5: Real (24.15)
    BS_pInc5: Real (24.15)
    BS_pPha5: Real (24.15)
    SUN2grnd5: Real (24.15)
    BS_RA5: Real (24.15)
    BS_Dec5: Real (24.15)
    BS_twist5: Real (24.15)
    TangHght5: Real (24.15)
    TH_Lon5: Real (24.15)
    TH_Lat5: Real (24.15)
    pNearTBFx5: Real (24.15)
    pNearTBFy5: Real (24.15)
    pNearTBFz5: Real (24.15)
    sc2BSdist5: Real (24.15)
    FOV_6: Real (11.0)
    BS_x_J26: Real (24.15)
    BS_y_J26: Real (24.15)
    BS_z_J26: Real (24.15)
    BS_x_TBF6: Real (24.15)
    BS_y_TBF6: Real (24.15)
    BS_z_TBF6: Real (24.15)
    BS_pLon6: Real (24.15)
    BS_pLat6: Real (24.15)
    BS_pEmi6: Real (24.15)
    BS_pInc6: Real (24.15)
    BS_pPha6: Real (24.15)
    SUN2grnd6: Real (24.15)
    BS_RA6: Real (24.15)
    BS_Dec6: Real (24.15)
    BS_twist6: Real (24.15)
    TangHght6: Real (24.15)
    TH_Lon6: Real (24.15)
    TH_Lat6: Real (24.15)
    pNearTBFx6: Real (24.15)
    pNearTBFy6: Real (24.15)
    pNearTBFz6: Real (24.15)
    sc2BSdist6: Real (24.15)
    BS2SCv_ang: Real (24.15)
    IFOVatrack: Real (24.15)
    IFOVxtrack: Real (24.15)
    a-smear: Real (24.15)
    x-smear: Real (24.15)
    a-azimuth: Real (24.15)
    BLatStart: Real (24.15)
    BLonStart: Real (24.15)
    BLatEnd: Real (24.15)
    BLonEnd: Real (24.15)
    MET: String (15.0)
    EDRFILE: String (14.0)


Thanks a lot!
Pierluigi

Il 10/02/2015 18:49, Even Rouault ha scritto:
> Le mardi 10 f?vrier 2015 18:20:12, Pierluigi Guasqui a ?crit :
>> Even,
>>
>> I set the environment variable CPL_DEBUG=ON and rerun my code. I found
>> the statement you mentioned:
>>
>>      SQLITE: OGR style SQLite DB found !
>>      SQLITE: Spatialite not available. Implementing a few functions
>>      OGR2SQLITE: sqlite3_declare_vtab(CREATE TABLE
>>      "xrs_2010jan21_mf2_geometry_polygons"("et" FLOAT,"utc" VARCHAR(25), ...
>>
>> but then it printed the following error:
>>
>>      ERROR 1: Cannot create virtual table for layer
>>      'xrs_2010jan21_mf2_geometry_polygons' : CREATE VIRTUAL: invalid SQL
>>      statement : CREATE TABLE "xrs_2010jan21_mf2_geometry_polygons"("et"
>>      FLOAT,"utc" VARCHAR(25), ...
>>      SQLITE: OGR style SQLite DB found !
>>      ERROR 1: In ExecuteSQL(): sqlite3_prepare(select * from
>>      xrs_2010jan21_mf2_geometry_polygons):
>>         no such table: xrs_2010jan21_mf2_geometry_polygons
>>      OGR: Unloading VirtualOGR module
> Could you paste the full (untruncated) statement ?
> And the output of "ogrinfo -al -so yourshapefile.shp" also
>
>> Any idea why I am getting this error?
>>
>> Thank you!
>> Pierluigi
>>
>> Il 10/02/2015 13:42, Even Rouault ha scritto:
>>> Le mardi 10 f?vrier 2015 12:47:46, Pierluigi Guasqui a ?crit :
>>>> Hi All!
>>>>
>>>> I am using the GDAL/OGR functions to query a shapefile. This is a sample
>>>>
>>>> code I have been successfully running so far:
>>>>       OGRDataSource *poDS = OGRSFDriverRegistrar::Open(
>>>>       "some/path/to/myshapefile.shp" );
>>>>       OGRLayer *poLayer = poDS->ExecuteSQL( "select * from myshapefile",
>>>>       NULL, NULL );
>>>>       // ...
>>>>       // fetching result features from "poLayer"
>>>>       // ...
>>>>       poDS->ReleaseResultSet( poLayer );
>>>>       OGRDataSource::DestroyDataSource(poDS);
>>>>
>>>> As you can see, I am currently using the OGR SQL dialect, as I am
>>>> passing NULL as the third parameter of the OGRDataSource::ExecuteSQL
>>>> function.
>>>>
>>>> Now I am trying to extend the SQL syntax to be able to use the OGR
>>>> SQLite dialect. I have successfully recompiled GDAL 1.11.1 with SQLite
>>>> support (version 3.8.5) but when I try to execute the same sample code
>>>> (passing "SQLITE" as the 3rd argument of the OGRDataSource::ExecuteSQL
>>>>
>>>> function) I am getting the following error:
>>>>       In ExecuteSQL(): sqlite3_prepare(select * from myshapefile): no
>>>>       such table: myshapefile
>>>>
>>>> What is the table name that contains the shapefile features that I can
>>>> use in my SQL queries?
>>> Pierluigi,
>>>
>>> That should work... If you tried to configure GDAL several times, perhaps
>>> you should do a make clean.
>>>
>>> Could you try defining CPL_DEBUG=ON as environment variable and rerun
>>> your code. You should normally see a statement like the following one to
>>> create the SQLite virtual table that matches the shapefile layer :
>>>
>>> OGR2SQLITE: sqlite3_declare_vtab(CREATE TABLE "poly"("AREA"
>>> FLOAT,"EAS_ID" FLOAT,"PRFEDEA" VARCHAR(16),OGR_STYLE VARCHAR
>>> HIDDEN,"GEOMETRY"
>>> BLOB_POLYGON_2D_50000))
>>>
>>> Even

-- 
Pierluigi Guasqui
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150210/fb34b6f6/attachment-0001.html>

From Brendan.DeTracey at dfo-mpo.gc.ca  Tue Feb 10 10:13:52 2015
From: Brendan.DeTracey at dfo-mpo.gc.ca (DeTracey, Brendan)
Date: Tue, 10 Feb 2015 18:13:52 +0000
Subject: [gdal-dev] Wrong number or type of arguments for overloaded
 function 'CoordinateTransformation_TransformPoint'
In-Reply-To: <201502101655.14690.even.rouault@spatialys.com>
References: <22C6A8A4889F0C45B71BF3272671822E820542BC@SVNSBIOMBX01.ENT.dfo-mpo.ca>
	<201502101655.14690.even.rouault@spatialys.com>
Message-ID: <22C6A8A4889F0C45B71BF3272671822E820545CF@SVNSBIOMBX01.ENT.dfo-mpo.ca>

The should be on the path. (Very strange that the Anaconda installer dumped a copy in its root directory.)

C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda>echo %PATH%
C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\MATLAB\R2012a\bin;C:\Program Files (x86)\MATLAB\R2010bSP1\bin;C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda;C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda\Scripts;

C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda>dir proj.*
 Volume in drive C is OSDisk
 Volume Serial Number is 7A59-3F7E

 Directory of C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda

06/02/2015  07:45 AM           369,152 proj.dll
06/02/2015  07:45 AM            19,456 proj.exe
               2 File(s)        388,608 bytes
               0 Dir(s)  76,317,147,136 bytes free

C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda>proj.exe
Rel. 4.8.0, 6 March 2012
usage: proj.exe [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]

I also tried adding to the script :
gdal.SetConfigOption('PROJSO', 'C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda\proj.dll')

This also did not work.


> -----Original Message-----
> From: Even Rouault [mailto:even.rouault at spatialys.com]
> Sent: February-10-15 11:55 AM
> To: gdal-dev at lists.osgeo.org
> Cc: DeTracey, Brendan
> Subject: Re: [gdal-dev] Wrong number or type of arguments for overloaded
> function 'CoordinateTransformation_TransformPoint'
> 
> Le mardi 10 f?vrier 2015 16:27:54, DeTracey, Brendan a ?crit :
> > Hi,
> >
> > I am using the GDAL python bindings via Windows 64 bit Anaconda, but I
> > am getting an error when I try to run one of the GDAL sample scripts,
> > tolatlong.py e.g.
> >
> > E:\parse_cis>python tolatlong.py 0 0 temp.tif Traceback (most recent
> > call last):
> >   File "tolatlong.py", line 106, in <module>
> >     (int, lat, height) = ct.TransformPoint(X, Y)
> >   File
> > "C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda\lib\site-packages
> > \osg eo\osr.py", line 757, in TransformPoint return
> > _osr.CoordinateTransformation_TransformPoint(self, *args)
> > NotImplementedError: Wrong number or type of arguments for overloaded
> > function 'CoordinateTransformation_TransformPoint'. Possible C/C++
> > prototypes are:
> >     OSRCoordinateTransformationShadow::TransformPoint(double [3])
> >     OSRCoordinateTransformationShadow::TransformPoint(double
> > [3],double,double,double)
> >
> > When I google this error I find it might be related to GDAL not
> > finding Proj (https://github.com/avalentino/gsdview/issues/89). Could
> > someone please verify that this would be the source of this error? I
> > have installed Proj under Anaconda and am trying to rule out whether
> > it is a problem with Anaconda or GDAL.
> 
> Yes, it seems very likely this is due to proj missing. Check that proj.dll is
> available in one of the paths in the PATH.
> 
> >
> > Thanks,
> > Brendan
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> --
> Spatialys - Geospatial professional services http://www.spatialys.com

From even.rouault at spatialys.com  Tue Feb 10 10:19:58 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Feb 2015 19:19:58 +0100
Subject: [gdal-dev] SQLite dialect in OGRDataSource::ExecuteSQL
In-Reply-To: <54DA4886.4020400@actgate.com>
References: <54D9EFE2.3010102@actgate.com>
	<201502101849.31932.even.rouault@spatialys.com>
	<54DA4886.4020400@actgate.com>
Message-ID: <201502101919.58601.even.rouault@spatialys.com>

Le mardi 10 f?vrier 2015 19:05:58, Pierluigi Guasqui a ?crit :
> Even,
> 
> here is the complete output:
> 
>     Shape: DBF Codepage = LDID/87 for
>    

That was useful. Pasting the SQL into SQLite3 console shows :
Error: duplicate column name: MET

Indeed there's a "met" and "MET" columns in the shapefile. OGR drivers and core 
rarely handle that properly, and it seems that SQLite3 doesn't like it too. So 
you should rename one of the column, or use for example create a VRT with 
http://svn.osgeo.org/gdal/branches/1.11/gdal/swig/python/samples/ogr2vrt.py 
and hand-edit to do the renaming.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From guasqui at actgate.com  Tue Feb 10 10:29:01 2015
From: guasqui at actgate.com (Pierluigi Guasqui)
Date: Tue, 10 Feb 2015 19:29:01 +0100
Subject: [gdal-dev] SQLite dialect in OGRDataSource::ExecuteSQL
In-Reply-To: <201502101919.58601.even.rouault@spatialys.com>
References: <54D9EFE2.3010102@actgate.com>
	<201502101849.31932.even.rouault@spatialys.com>
	<54DA4886.4020400@actgate.com>
	<201502101919.58601.even.rouault@spatialys.com>
Message-ID: <54DA4DED.2010608@actgate.com>

Even,

oh I didn't realize about the duplicate column name. Since I have been 
successfully able to query that shapefile with OGR SQL dialect I though 
it was something related to the SQLite dialect.

Thanks for catching this issue!

Pierluigi

Il 10/02/2015 19:19, Even Rouault ha scritto:
> Le mardi 10 f?vrier 2015 19:05:58, Pierluigi Guasqui a ?crit :
>> Even,
>>
>> here is the complete output:
>>
>>      Shape: DBF Codepage = LDID/87 for
>>     
> That was useful. Pasting the SQL into SQLite3 console shows :
> Error: duplicate column name: MET
>
> Indeed there's a "met" and "MET" columns in the shapefile. OGR drivers and core
> rarely handle that properly, and it seems that SQLite3 doesn't like it too. So
> you should rename one of the column, or use for example create a VRT with
> http://svn.osgeo.org/gdal/branches/1.11/gdal/swig/python/samples/ogr2vrt.py
> and hand-edit to do the renaming.
>
> Even
>

-- 
Pierluigi Guasqui
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com



From kyle at pobox.com  Tue Feb 10 10:46:23 2015
From: kyle at pobox.com (Kyle Shannon)
Date: Tue, 10 Feb 2015 11:46:23 -0700
Subject: [gdal-dev] Wrong number or type of arguments for overloaded
 function 'CoordinateTransformation_TransformPoint'
In-Reply-To: <22C6A8A4889F0C45B71BF3272671822E820545CF@SVNSBIOMBX01.ENT.dfo-mpo.ca>
References: <22C6A8A4889F0C45B71BF3272671822E820542BC@SVNSBIOMBX01.ENT.dfo-mpo.ca>	<201502101655.14690.even.rouault@spatialys.com>
	<22C6A8A4889F0C45B71BF3272671822E820545CF@SVNSBIOMBX01.ENT.dfo-mpo.ca>
Message-ID: <54DA51FF.3020506@pobox.com>

Brendan,

On 02/10/2015 11:13 AM, DeTracey, Brendan wrote:
> The should be on the path. (Very strange that the Anaconda installer dumped a copy in its root directory.)
>
> C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda>echo %PATH%
> C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\MATLAB\R2012a\bin;C:\Program Files (x86)\MATLAB\R2010bSP1\bin;C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda;C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda\Scripts;
>
> C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda>dir proj.*
>   Volume in drive C is OSDisk
>   Volume Serial Number is 7A59-3F7E
>
>   Directory of C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda
>
> 06/02/2015  07:45 AM           369,152 proj.dll
> 06/02/2015  07:45 AM            19,456 proj.exe
>                 2 File(s)        388,608 bytes
>                 0 Dir(s)  76,317,147,136 bytes free
>
> C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda>proj.exe
> Rel. 4.8.0, 6 March 2012
> usage: proj.exe [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files ]
>
> I also tried adding to the script :
> gdal.SetConfigOption('PROJSO', 'C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda\proj.dll')
>
> This also did not work.
>
>
>> -----Original Message-----
>> From: Even Rouault [mailto:even.rouault at spatialys.com]
>> Sent: February-10-15 11:55 AM
>> To: gdal-dev at lists.osgeo.org
>> Cc: DeTracey, Brendan
>> Subject: Re: [gdal-dev] Wrong number or type of arguments for overloaded
>> function 'CoordinateTransformation_TransformPoint'
>>
>> Le mardi 10 f?vrier 2015 16:27:54, DeTracey, Brendan a ?crit :
>>> Hi,
>>>
>>> I am using the GDAL python bindings via Windows 64 bit Anaconda, but I
>>> am getting an error when I try to run one of the GDAL sample scripts,
>>> tolatlong.py e.g.
>>>
>>> E:\parse_cis>python tolatlong.py 0 0 temp.tif Traceback (most recent
>>> call last):
>>>    File "tolatlong.py", line 106, in <module>
>>>      (int, lat, height) = ct.TransformPoint(X, Y)
>>>    File
>>> "C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda\lib\site-packages
>>> \osg eo\osr.py", line 757, in TransformPoint return
>>> _osr.CoordinateTransformation_TransformPoint(self, *args)
>>> NotImplementedError: Wrong number or type of arguments for overloaded
>>> function 'CoordinateTransformation_TransformPoint'. Possible C/C++
>>> prototypes are:
>>>      OSRCoordinateTransformationShadow::TransformPoint(double [3])
>>>      OSRCoordinateTransformationShadow::TransformPoint(double
>>> [3],double,double,double)
>>>
>>> When I google this error I find it might be related to GDAL not
>>> finding Proj (https://github.com/avalentino/gsdview/issues/89). Could
>>> someone please verify that this would be the source of this error? I
>>> have installed Proj under Anaconda and am trying to rule out whether
>>> it is a problem with Anaconda or GDAL.
>>
>> Yes, it seems very likely this is due to proj missing. Check that proj.dll is
>> available in one of the paths in the PATH.
>>
>>>
>>> Thanks,
>>> Brendan
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> --
>> Spatialys - Geospatial professional services http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

Is GDAL_DATA set?  I seem to remember that error if it was missing. 
Just a guess though...

kss

-- 
Kyle

From schwehr at gmail.com  Tue Feb 10 11:05:52 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 10 Feb 2015 11:05:52 -0800
Subject: [gdal-dev] GDAL/OGR 1.11.2 RC2 Available for Review
In-Reply-To: <201502101330.11165.even.rouault@spatialys.com>
References: <201502101330.11165.even.rouault@spatialys.com>
Message-ID: <CACmBxytnDF-3Us32UFPc8Ufd9Mx0KDG3tKMnb-CpYQGRfjaCDw@mail.gmail.com>

I think it looks okay w.r.t. fink on mac osx 10.9.  autotest failures for
anyone who is interested:
https://gist.github.com/schwehr/757bae6bd28d9a7ffc4d

On Tue, Feb 10, 2015 at 4:30 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I have prepared a second GDAL/OGR 1.11.2 release candidate, with the fix
> for
> the 1.11.0 regression in the PG driver identified yesterday (#5837). Please
> review and test.
>
> Peek up an archive among the following ones (by ascending size):
>
>   http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC2.tar.xz
>   http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC2.tar.gz
>   http://download.osgeo.org/gdal/1.11.2/gdal1112RC2.zip
>
> The gdal-grass plugin archive hasn't been modified since RC1  :
>
>   http://download.osgeo.org/gdal/1.11.2/gdal-grass-1.11.2.tar.gz
>
> A snapshot of the gdalautotest suite is also available :
>
>   http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.tar.gz
>   http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.zip
>
> The NEWS file is here :
>
>   http://trac.osgeo.org/gdal/wiki/Release/1.11.2-News
>
> I'll call for a vote promoting it soon if no serious problems are reported
> before.
>
> Best regards,
>
> Even
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150210/a1adaa36/attachment.html>

From Brendan.DeTracey at dfo-mpo.gc.ca  Tue Feb 10 11:36:27 2015
From: Brendan.DeTracey at dfo-mpo.gc.ca (DeTracey, Brendan)
Date: Tue, 10 Feb 2015 19:36:27 +0000
Subject: [gdal-dev] Wrong number or type of arguments for overloaded
 function 'CoordinateTransformation_TransformPoint'
In-Reply-To: <54DA51FF.3020506@pobox.com>
References: <22C6A8A4889F0C45B71BF3272671822E820542BC@SVNSBIOMBX01.ENT.dfo-mpo.ca>
	<201502101655.14690.even.rouault@spatialys.com>
	<22C6A8A4889F0C45B71BF3272671822E820545CF@SVNSBIOMBX01.ENT.dfo-mpo.ca>
	<54DA51FF.3020506@pobox.com>
Message-ID: <22C6A8A4889F0C45B71BF3272671822E82054686@SVNSBIOMBX01.ENT.dfo-mpo.ca>

Yes, I pass the GDAL_DATA test:

import osr
testSR = osr.SpatialReference()
testSR.ImportFromEPSG(4326)
print testSR.ExportToPrettyWkt()

although I did fail it on my linux laptop last week.

I'll have to try the tolatlong.py script at home on my crappy linux laptop to see if the problem is specific to Windows Anaconda. I have raised an issue on their github. Hopefully it will be resolved there.

Thanks,
Brendan


> Brendan,
> Is GDAL_DATA set?  I seem to remember that error if it was missing.
> Just a guess though...
> 
> kss
> 
> --
> Kyle
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From bishop.dev at gmail.com  Tue Feb 10 12:37:36 2015
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Tue, 10 Feb 2015 23:37:36 +0300
Subject: [gdal-dev] cmake4gdal?
In-Reply-To: <CAEePw9gcC3_ByELKkg5aF5umCcnN7ZSY8Pw=7Qs7sJhvzbezzg@mail.gmail.com>
References: <CAEePw9jv+cXV+dzoNLVQFkhyXfF9heJXg5Lec0eRgAEHuhNLzQ@mail.gmail.com>	<54D91E30.9050205@gmail.com>
	<CAEePw9gcC3_ByELKkg5aF5umCcnN7ZSY8Pw=7Qs7sJhvzbezzg@mail.gmail.com>
Message-ID: <54DA6C10.3060608@gmail.com>

Hi Scott,

I make the table of cmaking the GDAL. 
https://github.com/nextgis/gdal_svn/wiki/cmake-driver-status
May be some drivers that already cmaked I missed and vice versa, but the 
whole picture can be seen.

About "is the probability of cmake4gdal replacing autotools" I agreed 
with Even. We need the full and working system and several releases.
Also, cmake not to influence on gdal sources, so the two build systems 
can live together and one can use the preferable.
Certanly I prefer cmake :)

Also, I forgot to mention, that some checks in autoconf (the C/C++ test 
code) should be add to cmake too.

P.S.
Be free to send your pull request with cmaking of GDAL to our repo.

Best regards,
     Dmitry

10.02.2015 02:34, Scott Bailey ?????:
> Dmitry,
>
> Great!  So which drivers need CMake help?
>
> And what is the probability of cmake4gdal replacing autotools?
>
> SB
>
> On Mon, Feb 9, 2015 at 1:53 PM, Dmitriy Baryshnikov 
> <bishop.dev at gmail.com <mailto:bishop.dev at gmail.com>> wrote:
>
>     Hi Scott,
>
>     The latest code is here:
>     1) https://github.com/nextgis/gdal_svn/tree/cmake4gdal
>     2) https://github.com/nextgis/gdal_svn/tree/rsmd-reader-dev <--
>     this my current branch
>     3) https://github.com/nextgis/gdal_svn/tree/wms-ags-dev
>
>     There are some problems:
>     there is no autotest directory in current repo, but it'll be more
>     correctly to have the whole fork, not only sources (CTest?).
>     So I plan to merge this three branches and make the full fork
>     (with autotest) of OSGeo/GDAL in github.
>
>     Anyhow we need to complete all drivers which is not yet cmaked.
>     I plan to create wiki page in new repo with table of all GDAL
>     drivers and their cmaking status and total percent.
>
>     By now we need:
>     1) More testing and fixing on all platforms
>     2) Cmaked all drivers and applications, which is not yet cmaked
>     3) I plan to play with third party libs by cmake mechanism -
>     ExternalProject_Add
>
>     As for me the 2) is more important.
>
>     Best regards,
>          Dmitry
>
>     09.02.2015 22:02, Scott Bailey ?????:
>>     Building GDAL for Linux is a snap, MSVS is OK, but I find myself
>>     struggling to get a compilation with MINGW.
>>
>>     I've cloned the cmake4gdal 1.9 git repo and built that in Linux. 
>>     As expected it was simple.  Haven't had time to play with MINGW,
>>     yet.  Never-the-less, I've found CMake based projects less
>>     frustrating than autotools when building with Windows, especially
>>     when using MINGW.
>>
>>     What is the status of cmake4gdal?  Is there something I should do
>>     to help?
>>
>>     -- 
>>     Scott Bailey
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Scott Bailey
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150210/29b55668/attachment.html>

From even.rouault at spatialys.com  Wed Feb 11 00:28:06 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 11 Feb 2015 09:28:06 +0100
Subject: [gdal-dev] GDAL/OGR 1.11.2 RC2 Available for Review
In-Reply-To: <CACmBxytnDF-3Us32UFPc8Ufd9Mx0KDG3tKMnb-CpYQGRfjaCDw@mail.gmail.com>
References: <201502101330.11165.even.rouault@spatialys.com>
	<CACmBxytnDF-3Us32UFPc8Ufd9Mx0KDG3tKMnb-CpYQGRfjaCDw@mail.gmail.com>
Message-ID: <201502110928.06824.even.rouault@spatialys.com>

Le mardi 10 f?vrier 2015 20:05:52, Kurt Schwehr a ?crit :
> I think it looks okay w.r.t. fink on mac osx 10.9.  autotest failures for
> anyone who is interested:
> https://gist.github.com/schwehr/757bae6bd28d9a7ffc4d

Kurt,

Some of the output traces that contain "fail" do not necessarily make the step 
a failure, but should skip it. The error message and information printed and 
line reported might be interesting.
Most must be due to a different version of the JPEG or webp lib that must 
produce slightly different results.
The exception stack associated with "TEST: test_gdal_grid_3 ... fail (blowup)" 
would be interesting

Even

> 
> On Tue, Feb 10, 2015 at 4:30 AM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Hi,
> > 
> > I have prepared a second GDAL/OGR 1.11.2 release candidate, with the fix
> > for
> > the 1.11.0 regression in the PG driver identified yesterday (#5837).
> > Please review and test.
> > 
> > Peek up an archive among the following ones (by ascending size):
> >   http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC2.tar.xz
> >   http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC2.tar.gz
> >   http://download.osgeo.org/gdal/1.11.2/gdal1112RC2.zip
> > 
> > The gdal-grass plugin archive hasn't been modified since RC1  :
> >   http://download.osgeo.org/gdal/1.11.2/gdal-grass-1.11.2.tar.gz
> > 
> > A snapshot of the gdalautotest suite is also available :
> >   http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.tar.gz
> >   http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.zip
> > 
> > The NEWS file is here :
> >   http://trac.osgeo.org/gdal/wiki/Release/1.11.2-News
> > 
> > I'll call for a vote promoting it soon if no serious problems are
> > reported before.
> > 
> > Best regards,
> > 
> > Even
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Julien.Demaria at acri-st.fr  Wed Feb 11 00:47:07 2015
From: Julien.Demaria at acri-st.fr (Julien Demaria)
Date: Wed, 11 Feb 2015 08:47:07 +0000
Subject: [gdal-dev] NetCDF driver improvements (including groups support)
In-Reply-To: <op.xtpl2il7dbaoe8@macmarilu>
References: <3B970FB76033264EB34479EC8A365E1101BA31EA11@vwiexc030.acri.local>
	<op.xtpl2il7dbaoe8@macmarilu>
Message-ID: <3B970FB76033264EB34479EC8A365E1101BA31F04B@vwiexc030.acri.local>

Joaquim,

Yes I've checked that my point 7) solve the ticket #5291 (tested on the 3 files of the ticket), and I added the patch (for trunk version) to the ticket.

Julien

-----Message d'origine-----
De?: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Joaquim Luis
Envoy??: samedi 7 f?vrier 2015 23:58
??: gdal-dev at lists.osgeo.org
Objet?: Re: [gdal-dev] NetCDF driver improvements (including groups support)

Julian,

Thanks for the offering.
One thing, could you please check if with your improvements the bug #5291 is fixed?

Thanks

Joaquim


> Hi GDAL team,
>
> I've implemented several improvements to the NetCDF driver and I would 
> like to provide them to the community.
> Main goal of the changes is to add full support of NetCDF-4 including 
> groups.
> NetCDF-4 is the future format of ESA Sentinel-3 products (no groups) 
> and NASA Ocean Color team is switching their L2/L3 products to 
> NetCDF-4 with groups (VIIRS has already switched to the new format in December).
> With the changes NASA L2 products geolocation is automatically handled 
> as geolocation arrays and can be reprojected using gdalwarp.
>
> I validated with autotests that nothing is broken in tests netcdf.py 
> (excepting test 13 but see my point 5), netcdf_cf.py and hdf5.py, 
> using
> NetCDF-3 and 4 libraries.
> I've also tested the new functionalities on various NetCDF-4 files.
> I think the only possible regression could be for marginal cases where 
> a file was seen directly as a dataset and is now seen as multiple 
> subdatasets (for example if a file has only one var in the top group 
> and has nested groups containing variables), but I think this is not 
> very common.
>
> For the moment I have all these changes in local GIT separated commits 
> on the latest gdal-1.11 branch, let me know what changes you want and 
> how can I provide them.
>
> Changes :
>
> 1) Implement full support for NetCDF-4 groups on reading:
>     - explore recursively all nested groups to create the subdatasets 
> list
>     - subdatasets in nested groups use the 
> /group1/group2/.../groupn/var standard
>       NetCDF-4 convention, excepting for variables in the root group 
> which do not
>       have a leading slash for backward compatibility
>     - when accessing a subdataset using NETCDF:$file:$path, the 
> leading slash is optional
>     - global attributes of each nested group are also collected in the 
> GDAL dataset
>       metadata, using the same convention 
> /group1/group2/.../groupn/NC_GLOBAL#attr_name,
>       excepting for the root group which do not have a leading slash 
> for backward compatibility
>     - when searching for a variable containing auxiliary information 
> on the selected subdataset,
>       like coordinate variables or grid_mapping, we now also search in 
> parent groups (using NCDFResolveVar).
>       I now this is something not specified at this time in the CF 
> convention because CF does not know groups,
>       but it seems logical to me to support this: NetCDF-4 specifies 
> that dimensions of a group are
>       shared to its nested groups, so associated coordinate variables 
> could be defined as the same level of its
>       corresponding dimension.
>     - reference to coordinate variables using the "coordinates"  
> attribute support now also absolute paths,
>       this allow for example to specify coordinate variables located 
> outside the group of the selected variable
>       or its parents. Relative paths could be implemented if needed.
>       This feature is used to add support for new NASA Ocean Color L2 
> products.
>
> 2) Implement full read/write support for new NetCDF4 types NC_UBYTE, 
> NC_USHORT, NC_UINT and NC_STRING, only if NETCDF_HAS_NC4 is defined 
> (and only if format=NC4 for writing).
>     Support implemented for variables and attributes.
>     NC_STRING type is supported for reading (scalar and arrays) 
> attributes and is used for writing only for array attributes (scalar 
> are still written as NC_CHAR).
>     If NETCDF_HAS_NC4 is not defined or format!=NC4, NC_STRING array 
> attributes are written as a single NC_CHAR string using the GDAL 
> {v1,v2,...} convention.
>     Add missing support for NC_BYTE in CreateBandMetadata() and 
> NC_BYTE/SHORT in NCDFPut1DVar().
>
> 3) Add support for new NASA Ocean Color L2 products and ESA Sentinel-3
> L1 or
>     L2 products which use the NetCDF-4 format (with groups for NASA, see
>     http://oceancolor.gsfc.nasa.gov/DOCS/FormatChange.html):
>     - NASA products: simulate a "coordinates" variable attribute to 
> detect CF
>       geolocation arrays, and set bBottomUp to FALSE
>     - ESA products: set bBottomUp to FALSE and disable warning on missing
>       Conventions attribute
>
> 4) Fix bug #4554 with a more generic solution by disabling the 
> installation of the HDF5 atexit() cleanup routine using H5dont_atexit().
>     Previous fix was to call GDALExit() (for the moment only defined
> gdalwarp.cpp) at the end of every program, which is more painful.
>
> 5) Fix implementation of GetScale/Offset to not always return 
> pbSuccess=TRUE.
>     Fix CopyMetadata to handle bands with only scale or offset.
>     ==> WARNING this commit breaks the autotest netcdf_13 (check for 
> scale/offset = 1.0/0.0 if no scale or offset is available), but for me 
> it is not logical to return always pbSuccess=TRUE
>
> 6) Optimize IReadBlock() and CheckData() handling of partial blocks in 
> the x axis by re-using the GDAL block buffer instead of allocating a 
> new temporary buffer for each block.
>
> 7) Force block size to 1 scanline for bottom-up datasets if 
> nBlockYSize != 1 instead of raising a fatal error
>     ==> Solve a recent problem raised on the mailing list
>
> 8) Implement Get/SetUnitType using the standard "units" NetCDF 
> attribute
>
> 9) Change default block size to 256x256 instead of scanline (only 
> affect file without NetCDF chunking)
>     ==> because I think this is better for a random access to the 
> data, but I'm not sure if the community want this change which could 
> impact performances
>
> 10) I've also implemented for my needs support for 1D variables by 
> simulating 2D datasets with only one row (dimensionless variables are 
> not supported for the moment),
>        but this breaks backward compatibility because files containing 
> only one variable and associated 1D coordinate variables are now seen 
> as multiple sub datasets...
>        and maybe this is not the goal of GDAL to give access to 
> not-2D-raster variables (but sometimes it's useful ;-) )
>
> Thanks for GDAL!
>
> Julien
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Wed Feb 11 01:21:23 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 11 Feb 2015 10:21:23 +0100
Subject: [gdal-dev] Ideas for GSoc 2015 ?
Message-ID: <201502111021.23652.even.rouault@spatialys.com>

Hi,

I just happen to have noticed an email from Hamish Bowman, who will likely be 
the primary GSoc administrator for OSGeo for this year.

"""
I need to send a separate email to osgeo-discuss about this, but the
main thing we need from our osgeo teams *this week* is for the member
projects to coordinate on their respective dev mailing lists and get
their 2015 ideas pages into shape. That is the primary thing Google
will judge OSGeo's application on and despite past success there is no
guarantee whatsoever that we'll be asked back. If the ideas pages are
weak and simply recycled links to last year's we could be left out in
the cold. They want to see that we have active and interested mentors
and a well developed ideas page is the way to show that.
Follow the guide in the mentors' manual* on how to write up a good
ideas page. We'll link to the various ideas pages from the main osgeo
wiki page as we have in years past.
[*] http://en.flossmanuals.net/GSoCMentoring/making-your-ideas-page/


One thing to discuss about this year is tightening up the application
process to weed out problematic students early on in the process. This
may mean we take less students this year and strongly focus on quality
not quantity. The typical GSoC way of doing that up-front is to
require the students to send a patch to the project's bug tracker for
some bug/feature of their choosing as a component of their
application. This proves they can code(!), forces them to register
with trac or redmine, download, build, and understand the code tree,
learn how to use svn/git and diff+patch tools, and gets them involved
with the community early on. Another way would be to place a limit on
how many total osgeo newbies we take on. Please do share your thoughts
in a new thread.
"""

So if you've ideas and are willing to mentor/co-mentor, please edit 
http://trac.osgeo.org/gdal/wiki/SummerOfCode

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Feb 11 01:29:16 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 11 Feb 2015 10:29:16 +0100
Subject: [gdal-dev] Motion: Adopt RFC 53: OGR not-null constraints and
	default values
Message-ID: <201502111029.16219.even.rouault@spatialys.com>

Hi,

As no points have been raised, 

Motion : I move to adopt RFC 53: OGR not-null constraints and default values

http://trac.osgeo.org/gdal/wiki/rfc53_ogr_notnull_default

Starting with my +1

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Wed Feb 11 01:54:11 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Wed, 11 Feb 2015 09:54:11 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Motion=3A_Adopt_RFC_53=3A_OGR_not-null_const?=
	=?utf-8?q?raints_and=09default_values?=
References: <201502111029.16219.even.rouault@spatialys.com>
Message-ID: <loom.20150211T105338-944@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> 
> Hi,
> 
> As no points have been raised, 
> 
> Motion : I move to adopt RFC 53: OGR not-null constraints and default values
> 
> http://trac.osgeo.org/gdal/wiki/rfc53_ogr_notnull_default
> 
> Starting with my +1

+1

-Jukka Rahkonen-


From Julien.Demaria at acri-st.fr  Wed Feb 11 03:24:15 2015
From: Julien.Demaria at acri-st.fr (Julien Demaria)
Date: Wed, 11 Feb 2015 11:24:15 +0000
Subject: [gdal-dev] NetCDF driver improvements (including groups support)
In-Reply-To: <CAAcGz98vQ0a5T5GLX+RmrYhHj292htF33bCnpwcWiH+4viRgOQ@mail.gmail.com>
References: <3B970FB76033264EB34479EC8A365E1101BA31EA11@vwiexc030.acri.local>
	<CAAcGz98vQ0a5T5GLX+RmrYhHj292htF33bCnpwcWiH+4viRgOQ@mail.gmail.com>
Message-ID: <3B970FB76033264EB34479EC8A365E1101BA31F0A9@vwiexc030.acri.local>

Hi Mike,

Sorry, I?ve written ?full support of NetCDF-4? but in fact NetCDF-4 compound types are not supported by my changes at this time, so NASA L3 binned products are not handled by GDAL.
NASA L3 binned products store pixels in vector of structures (compound types), with my changes GDAL can now list the subdatasets, but the compound types are still not handled and GDAL raise a warning and uses Float32 as default type, which is wrong, see the example below.
Ideally, we could wrap each field of a compound type as a separate GDAL band in the subdataset. But if we want support all cases we have also to handle compound types using other compound types, which is not easy technically, I think.

Note that NASA L3 mapped products are fully supported by GDAL (my changes only add capability to read metadata stored in specific groups, but main variables should be readable without my changes).

Example of NASA L3 binned product:

NetCDF representation of level-3_binned_data group:
group: level-3_binned_data {
  types:
    compound binListType {
      uint bin_num ;
      short nobs ;
      short nscenes ;
      float weights ;
      float time_rec ;
    }; // binListType
    compound binDataType {
      float sum ;
      float sum_squared ;
    }; // binDataType
    compound binIndexType {
      uint start_num ;
      uint begin ;
      uint extent ;
      uint max ;
    }; // binIndexType
  dimensions:
                binListDim = UNLIMITED ; // (1671755 currently)
                binDataDim = UNLIMITED ; // (1671755 currently)
                binIndexDim = UNLIMITED ; // (4320 currently)
  variables:
                binListType BinList(binListDim) ;
               binDataType chlor_a(binDataDim) ;
                binDataType chl_ocx(binDataDim) ;
                binIndexType BinIndex(binIndexDim) ;
  } // group level-3_binned_data

Corresponding GDAL Subdatasets:
  SUBDATASET_1_NAME=NETCDF:"V2015024.L3b_DAY_NPP_CHL.nc":/level-3_binned_data/BinList
  SUBDATASET_1_DESC=[1x1671755] /level-3_binned_data/BinList (x.??)
  SUBDATASET_2_NAME=NETCDF:"V2015024.L3b_DAY_NPP_CHL.nc":/level-3_binned_data/chlor_a
  SUBDATASET_2_DESC=[1x1671755] /level-3_binned_data/chlor_a (x.??)
  SUBDATASET_3_NAME=NETCDF:"V2015024.L3b_DAY_NPP_CHL.nc":/level-3_binned_data/chl_ocx
  SUBDATASET_3_DESC=[1x1671755] /level-3_binned_data/chl_ocx (x.??)
  SUBDATASET_4_NAME=NETCDF:"V2015024.L3b_DAY_NPP_CHL.nc":/level-3_binned_data/BinIndex
  SUBDATASET_4_DESC=[1x4320] /level-3_binned_data/BinIndex (x.??)

Julien

De : Michael Sumner [mailto:mdsumner at gmail.com]
Envoy? : samedi 7 f?vrier 2015 02:03
? : Julien Demaria; gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] NetCDF driver improvements (including groups support)

Hi, this is really interesting to me.
On Fri Feb 06 2015 at 03:11:02 Julien Demaria <Julien.Demaria at acri-st.fr<mailto:Julien.Demaria at acri-st.fr>> wrote:
Hi GDAL team,

I've implemented several improvements to the NetCDF driver and I would like to provide them to the community.
Main goal of the changes is to add full support of NetCDF-4 including groups.
NetCDF-4 is the future format of ESA Sentinel-3 products (no groups) and NASA Ocean Color team is switching their L2/L3 products to NetCDF-4 with groups (VIIRS has already switched to the new format in December).
With the changes NASA L2 products geolocation is automatically handled as geolocation arrays and can be reprojected using gdalwarp.

This sounds great, have you also worked with the L3 binned products? I have written my own suite of tools in R to read the NASA L3 bin files from the HDF4 files (using Rcpp), and have made some progress into the  NetCDF4 versions of these. Does your work on the GDAL driver include compound types like those in the L3 NetCDF4 bin files.  The structure is described here:

http://oceancolor.gsfc.nasa.gov/DOCS/FormatChange.html

I prefer to work with the raw bin values usually rather than always apply a regridding - but having that capacity via GDAL would be great. I also wonder if it would be worth providing a vector driver for L3 bins, that would be my preferred usage ultimately - I need to  apply different algorithms for chlorophyll-a to the RRS values in the equal-area L3 bins, my R package is here, it's quite primitive and relies on the Rcpp route for C++,  but at least does what I need for now.

https://github.com/mdsumner/roc

I'll try to have a closer look at your efforts here soon, but just wanted to reply now with my perspective.

Thanks!

Cheers, Mike.

I validated with autotests that nothing is broken in tests netcdf.py (excepting test 13 but see my point 5), netcdf_cf.py and hdf5.py, using NetCDF-3 and 4 libraries.
I've also tested the new functionalities on various NetCDF-4 files.
I think the only possible regression could be for marginal cases where a file was seen directly as a dataset and is now seen as multiple subdatasets (for example if a file has only one var in the top group and has nested groups containing variables), but I think this is not very common.

For the moment I have all these changes in local GIT separated commits on the latest gdal-1.11 branch, let me know what changes you want and how can I provide them.

Changes :

1) Implement full support for NetCDF-4 groups on reading:
    - explore recursively all nested groups to create the subdatasets list
    - subdatasets in nested groups use the /group1/group2/.../groupn/var standard
      NetCDF-4 convention, excepting for variables in the root group which do not
      have a leading slash for backward compatibility
    - when accessing a subdataset using NETCDF:$file:$path, the leading slash is optional
    - global attributes of each nested group are also collected in the GDAL dataset
      metadata, using the same convention /group1/group2/.../groupn/NC_GLOBAL#attr_name,
      excepting for the root group which do not have a leading slash for backward compatibility
    - when searching for a variable containing auxiliary information on the selected subdataset,
      like coordinate variables or grid_mapping, we now also search in parent groups (using NCDFResolveVar).
      I now this is something not specified at this time in the CF convention because CF does not know groups,
      but it seems logical to me to support this: NetCDF-4 specifies that dimensions of a group are
      shared to its nested groups, so associated coordinate variables could be defined as the same level of its
      corresponding dimension.
    - reference to coordinate variables using the "coordinates" attribute support now also absolute paths,
      this allow for example to specify coordinate variables located outside the group of the selected variable
      or its parents. Relative paths could be implemented if needed.
      This feature is used to add support for new NASA Ocean Color L2 products.

2) Implement full read/write support for new NetCDF4 types NC_UBYTE, NC_USHORT, NC_UINT and NC_STRING, only if NETCDF_HAS_NC4 is defined (and only if format=NC4 for writing).
    Support implemented for variables and attributes.
    NC_STRING type is supported for reading (scalar and arrays) attributes and is used for writing only for array attributes (scalar are still written as NC_CHAR).
    If NETCDF_HAS_NC4 is not defined or format!=NC4, NC_STRING array attributes are written as a single NC_CHAR string using the GDAL {v1,v2,...} convention.
    Add missing support for NC_BYTE in CreateBandMetadata() and NC_BYTE/SHORT in NCDFPut1DVar().

3) Add support for new NASA Ocean Color L2 products and ESA Sentinel-3 L1 or
    L2 products which use the NetCDF-4 format (with groups for NASA, see
    http://oceancolor.gsfc.nasa.gov/DOCS/FormatChange.html):
    - NASA products: simulate a "coordinates" variable attribute to detect CF
      geolocation arrays, and set bBottomUp to FALSE
    - ESA products: set bBottomUp to FALSE and disable warning on missing
      Conventions attribute

4) Fix bug #4554 with a more generic solution by disabling the installation of the HDF5 atexit() cleanup routine using H5dont_atexit().
    Previous fix was to call GDALExit() (for the moment only defined gdalwarp.cpp) at the end of every program, which is more painful.

5) Fix implementation of GetScale/Offset to not always return pbSuccess=TRUE.
    Fix CopyMetadata to handle bands with only scale or offset.
    ==> WARNING this commit breaks the autotest netcdf_13 (check for scale/offset = 1.0/0.0 if no scale or offset is available), but for me it is not logical to return always pbSuccess=TRUE

6) Optimize IReadBlock() and CheckData() handling of partial blocks in the x axis by re-using the GDAL block buffer instead of allocating a new temporary buffer for each block.

7) Force block size to 1 scanline for bottom-up datasets if nBlockYSize != 1 instead of raising a fatal error
    ==> Solve a recent problem raised on the mailing list

8) Implement Get/SetUnitType using the standard "units" NetCDF attribute

9) Change default block size to 256x256 instead of scanline (only affect file without NetCDF chunking)
    ==> because I think this is better for a random access to the data, but I'm not sure if the community want this change which could impact performances

10) I've also implemented for my needs support for 1D variables by simulating 2D datasets with only one row (dimensionless variables are not supported for the moment),
       but this breaks backward compatibility because files containing only one variable and associated 1D coordinate variables are now seen as multiple sub datasets...
       and maybe this is not the goal of GDAL to give access to not-2D-raster variables (but sometimes it's useful ;-) )

Thanks for GDAL!

Julien

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150211/9543b6de/attachment-0001.html>

From even.rouault at spatialys.com  Wed Feb 11 03:37:08 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 11 Feb 2015 12:37:08 +0100
Subject: [gdal-dev] GDAL 2.0 plans/schedule ?
Message-ID: <201502111237.08100.even.rouault@spatialys.com>

Hi,

As I'll give a talk about GDAL 2.0 at FOSS4G-NA next month, I'm curious to 
know if folks have things in their queue for 2.0 that they would wish to be 
mentionned, or more generally they want to discuss here so that we have a 
better picture of what is going on.

As fas as I'm concerned, beyond the already adopted or to-be adopted RFCs, 
I've at least the following points in my queue :
- work on OGR transactions at dataset level rather than at layer level (RFC)
- improvements in a few OGR drivers regarding FID management/options.
- performance improvements in the GDAL block cache w.r.t multithreading
- (to be confirmed) improvements in the JP2OpenJPEG driver regarding compliance 
with Inspire ortho-imagery technical guidelines and some more general purpose 
enhancements (support for alpha band in creation)
- (to be confirmed) addition of a OGR MongoDB driver (loosely derived from the 
existing out-of-tree contribution with significant rework)

I was thinking for a 2.0 beta1 at the end of April. Opinions ?

There have been a few IRC project meetings in the past ( 
https://trac.osgeo.org/gdal/wiki/GovernanceAndCommunity ), mainly at the 
approach of release time. I was wondering if there is or will be a 
need/interest for that.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Brendan.DeTracey at dfo-mpo.gc.ca  Wed Feb 11 05:01:30 2015
From: Brendan.DeTracey at dfo-mpo.gc.ca (DeTracey, Brendan)
Date: Wed, 11 Feb 2015 13:01:30 +0000
Subject: [gdal-dev] Wrong number or type of arguments for overloaded
 function 'CoordinateTransformation_TransformPoint'
In-Reply-To: <54DA51FF.3020506@pobox.com>
References: <22C6A8A4889F0C45B71BF3272671822E820542BC@SVNSBIOMBX01.ENT.dfo-mpo.ca>
	<201502101655.14690.even.rouault@spatialys.com>
	<22C6A8A4889F0C45B71BF3272671822E820545CF@SVNSBIOMBX01.ENT.dfo-mpo.ca>
	<54DA51FF.3020506@pobox.com>
Message-ID: <22C6A8A4889F0C45B71BF3272671822E820548E3@SVNSBIOMBX01.ENT.dfo-mpo.ca>

I found the problem, and wanted to my idiot mistake archived for posterity.  The CoordinateTransformation_TransformPoint error is thrown when a raster has no projection. I was working with a raster that I had created myself from vectors. I finally tried another sample raster and it worked. I am new to this, so my advice to other newbs is that if your product is not working try another known sample before posting questions. And always always always run ogrinfo/gdalinfo on your product to make sure nothing is missing. Once I ran gdalinfo on my geotiff and saw that:
  Coordinate System is `'
I knew I had made a newbie mistake. Exported my source SRS as WKT and set as my raster projection. Problem solved.
 

> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-
> bounces at lists.osgeo.org] On Behalf Of Kyle Shannon
> Sent: February-10-15 2:46 PM
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Wrong number or type of arguments for overloaded
> function 'CoordinateTransformation_TransformPoint'
> 
> Brendan,
> 
> On 02/10/2015 11:13 AM, DeTracey, Brendan wrote:
> > The should be on the path. (Very strange that the Anaconda installer
> > dumped a copy in its root directory.)
> >
> > C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda>echo %PATH%
> >
> C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\
> Sys
> > tem32\WindowsPowerShell\v1.0\;C:\Program
> > Files\MATLAB\R2012a\bin;C:\Program Files
> >
> (x86)\MATLAB\R2010bSP1\bin;C:\Users\DeTraceyB\AppData\Local\Continuum
> \
> > Anaconda;C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda\Scripts;
> >
> > C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda>dir proj.*
> >   Volume in drive C is OSDisk
> >   Volume Serial Number is 7A59-3F7E
> >
> >   Directory of C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda
> >
> > 06/02/2015  07:45 AM           369,152 proj.dll
> > 06/02/2015  07:45 AM            19,456 proj.exe
> >                 2 File(s)        388,608 bytes
> >                 0 Dir(s)  76,317,147,136 bytes free
> >
> > C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda>proj.exe
> > Rel. 4.8.0, 6 March 2012
> > usage: proj.exe [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files
> > ]
> >
> > I also tried adding to the script :
> > gdal.SetConfigOption('PROJSO',
> > 'C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda\proj.dll')
> >
> > This also did not work.
> >
> >
> >> -----Original Message-----
> >> From: Even Rouault [mailto:even.rouault at spatialys.com]
> >> Sent: February-10-15 11:55 AM
> >> To: gdal-dev at lists.osgeo.org
> >> Cc: DeTracey, Brendan
> >> Subject: Re: [gdal-dev] Wrong number or type of arguments for
> >> overloaded function 'CoordinateTransformation_TransformPoint'
> >>
> >> Le mardi 10 f?vrier 2015 16:27:54, DeTracey, Brendan a ?crit :
> >>> Hi,
> >>>
> >>> I am using the GDAL python bindings via Windows 64 bit Anaconda, but
> >>> I am getting an error when I try to run one of the GDAL sample
> >>> scripts, tolatlong.py e.g.
> >>>
> >>> E:\parse_cis>python tolatlong.py 0 0 temp.tif Traceback (most recent
> >>> call last):
> >>>    File "tolatlong.py", line 106, in <module>
> >>>      (int, lat, height) = ct.TransformPoint(X, Y)
> >>>    File
> >>> "C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda\lib\site-packag
> >>> es \osg eo\osr.py", line 757, in TransformPoint return
> >>> _osr.CoordinateTransformation_TransformPoint(self, *args)
> >>> NotImplementedError: Wrong number or type of arguments for
> >>> overloaded function 'CoordinateTransformation_TransformPoint'.
> >>> Possible C/C++ prototypes are:
> >>>      OSRCoordinateTransformationShadow::TransformPoint(double [3])
> >>>      OSRCoordinateTransformationShadow::TransformPoint(double
> >>> [3],double,double,double)
> >>>
> >>> When I google this error I find it might be related to GDAL not
> >>> finding Proj (https://github.com/avalentino/gsdview/issues/89).
> >>> Could someone please verify that this would be the source of this
> >>> error? I have installed Proj under Anaconda and am trying to rule
> >>> out whether it is a problem with Anaconda or GDAL.
> >>
> >> Yes, it seems very likely this is due to proj missing. Check that
> >> proj.dll is available in one of the paths in the PATH.
> >>
> >>>
> >>> Thanks,
> >>> Brendan
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev at lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >> --
> >> Spatialys - Geospatial professional services http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> 
> Is GDAL_DATA set?  I seem to remember that error if it was missing.
> Just a guess though...
> 
> kss
> 
> --
> Kyle
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Wed Feb 11 05:11:05 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 11 Feb 2015 14:11:05 +0100
Subject: [gdal-dev] Wrong number or type of arguments for overloaded
	function 'CoordinateTransformation_TransformPoint'
In-Reply-To: <22C6A8A4889F0C45B71BF3272671822E820548E3@SVNSBIOMBX01.ENT.dfo-mpo.ca>
References: <22C6A8A4889F0C45B71BF3272671822E820542BC@SVNSBIOMBX01.ENT.dfo-mpo.ca>
	<54DA51FF.3020506@pobox.com>
	<22C6A8A4889F0C45B71BF3272671822E820548E3@SVNSBIOMBX01.ENT.dfo-mpo.ca>
Message-ID: <201502111411.05842.even.rouault@spatialys.com>

Brendan,

thanks for the follow-up. I've just committed a fix so that the error report is 
hopefully clearer now:

$ python swig/python/samples/tolatlong.py 0 0 byte.png
ERROR: Cannot import projection ''

Even

Le mercredi 11 f?vrier 2015 14:01:30, DeTracey, Brendan a ?crit :
> I found the problem, and wanted to my idiot mistake archived for posterity.
>  The CoordinateTransformation_TransformPoint error is thrown when a raster
> has no projection. I was working with a raster that I had created myself
> from vectors. I finally tried another sample raster and it worked. I am
> new to this, so my advice to other newbs is that if your product is not
> working try another known sample before posting questions. And always
> always always run ogrinfo/gdalinfo on your product to make sure nothing is
> missing. Once I ran gdalinfo on my geotiff and saw that: Coordinate System
> is `'
> I knew I had made a newbie mistake. Exported my source SRS as WKT and set
> as my raster projection. Problem solved.
> 
> > -----Original Message-----
> > From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-
> > bounces at lists.osgeo.org] On Behalf Of Kyle Shannon
> > Sent: February-10-15 2:46 PM
> > To: gdal-dev at lists.osgeo.org
> > Subject: Re: [gdal-dev] Wrong number or type of arguments for overloaded
> > function 'CoordinateTransformation_TransformPoint'
> > 
> > Brendan,
> > 
> > On 02/10/2015 11:13 AM, DeTracey, Brendan wrote:
> > > The should be on the path. (Very strange that the Anaconda installer
> > > dumped a copy in its root directory.)
> > > 
> > > C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda>echo %PATH%
> > 
> > C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\
> > Sys
> > 
> > > tem32\WindowsPowerShell\v1.0\;C:\Program
> > > Files\MATLAB\R2012a\bin;C:\Program Files
> > 
> > (x86)\MATLAB\R2010bSP1\bin;C:\Users\DeTraceyB\AppData\Local\Continuum
> > \
> > 
> > > Anaconda;C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda\Scripts;
> > > 
> > > C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda>dir proj.*
> > > 
> > >   Volume in drive C is OSDisk
> > >   Volume Serial Number is 7A59-3F7E
> > >   
> > >   Directory of C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda
> > > 
> > > 06/02/2015  07:45 AM           369,152 proj.dll
> > > 06/02/2015  07:45 AM            19,456 proj.exe
> > > 
> > >                 2 File(s)        388,608 bytes
> > >                 0 Dir(s)  76,317,147,136 bytes free
> > > 
> > > C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda>proj.exe
> > > Rel. 4.8.0, 6 March 2012
> > > usage: proj.exe [ -beEfiIlormsStTvVwW [args] ] [ +opts[=arg] ] [ files
> > > ]
> > > 
> > > I also tried adding to the script :
> > > gdal.SetConfigOption('PROJSO',
> > > 'C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda\proj.dll')
> > > 
> > > This also did not work.
> > > 
> > >> -----Original Message-----
> > >> From: Even Rouault [mailto:even.rouault at spatialys.com]
> > >> Sent: February-10-15 11:55 AM
> > >> To: gdal-dev at lists.osgeo.org
> > >> Cc: DeTracey, Brendan
> > >> Subject: Re: [gdal-dev] Wrong number or type of arguments for
> > >> overloaded function 'CoordinateTransformation_TransformPoint'
> > >> 
> > >> Le mardi 10 f?vrier 2015 16:27:54, DeTracey, Brendan a ?crit :
> > >>> Hi,
> > >>> 
> > >>> I am using the GDAL python bindings via Windows 64 bit Anaconda, but
> > >>> I am getting an error when I try to run one of the GDAL sample
> > >>> scripts, tolatlong.py e.g.
> > >>> 
> > >>> E:\parse_cis>python tolatlong.py 0 0 temp.tif Traceback (most recent
> > >>> 
> > >>> call last):
> > >>>    File "tolatlong.py", line 106, in <module>
> > >>>    
> > >>>      (int, lat, height) = ct.TransformPoint(X, Y)
> > >>>    
> > >>>    File
> > >>> 
> > >>> "C:\Users\DeTraceyB\AppData\Local\Continuum\Anaconda\lib\site-packag
> > >>> es \osg eo\osr.py", line 757, in TransformPoint return
> > >>> _osr.CoordinateTransformation_TransformPoint(self, *args)
> > >>> NotImplementedError: Wrong number or type of arguments for
> > >>> overloaded function 'CoordinateTransformation_TransformPoint'.
> > >>> 
> > >>> Possible C/C++ prototypes are:
> > >>>      OSRCoordinateTransformationShadow::TransformPoint(double [3])
> > >>>      OSRCoordinateTransformationShadow::TransformPoint(double
> > >>> 
> > >>> [3],double,double,double)
> > >>> 
> > >>> When I google this error I find it might be related to GDAL not
> > >>> finding Proj (https://github.com/avalentino/gsdview/issues/89).
> > >>> Could someone please verify that this would be the source of this
> > >>> error? I have installed Proj under Anaconda and am trying to rule
> > >>> out whether it is a problem with Anaconda or GDAL.
> > >> 
> > >> Yes, it seems very likely this is due to proj missing. Check that
> > >> proj.dll is available in one of the paths in the PATH.
> > >> 
> > >>> Thanks,
> > >>> Brendan
> > >>> _______________________________________________
> > >>> gdal-dev mailing list
> > >>> gdal-dev at lists.osgeo.org
> > >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >> 
> > >> --
> > >> Spatialys - Geospatial professional services http://www.spatialys.com
> > > 
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > Is GDAL_DATA set?  I seem to remember that error if it was missing.
> > Just a guess though...
> > 
> > kss
> > 
> > --
> > Kyle
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From dmorissette at mapgears.com  Wed Feb 11 05:45:22 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 11 Feb 2015 08:45:22 -0500
Subject: [gdal-dev] Motion: Adopt RFC 53: OGR not-null constraints and
 default values
In-Reply-To: <201502111029.16219.even.rouault@spatialys.com>
References: <201502111029.16219.even.rouault@spatialys.com>
Message-ID: <54DB5CF2.5030902@mapgears.com>

+1

Daniel

On 2015-02-11 4:29 AM, Even Rouault wrote:
> Hi,
>
> As no points have been raised,
>
> Motion : I move to adopt RFC 53: OGR not-null constraints and default values
>
> http://trac.osgeo.org/gdal/wiki/rfc53_ogr_notnull_default
>
> Starting with my +1
>
> Best regards,
>
> Even
>


-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From dncarreira at gmail.com  Wed Feb 11 09:53:58 2015
From: dncarreira at gmail.com (Duarte Carreira)
Date: Wed, 11 Feb 2015 17:53:58 +0000
Subject: [gdal-dev] reading postgis xyzm with ogr2ogr
Message-ID: <CAHE-9zCfhOBtqpeMc8UjkyjUqkkEGeqtGqZ5Rs=oaWkqtvgDag@mail.gmail.com>

Hi there.



I?m trying to figure out how to read xyzm geometries from postgis with
ogr2ogr, if at all possible.



I get the usual "is not supported" error:

ERROR 1: Reading EWKB with 4-dimensional coordinates (XYZM) is not supported



But reading old tickets I get the idea there is a way to read and just
ignore the 4th dimension, instead of getting null geometries.



For instance:

http://trac.osgeo.org/gdal/ticket/1323



>From 8 years ago(!), says:

The problem does not occur if a layer is accessed using
OGRPGDataSource::GetLayerByname()
Then, geometry is read in EWKT form and parsed correctly without any errors
but M coordinate is omitted.

Can this be done using og2ogr?



Thanks,
Duarte
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150211/79515e08/attachment.html>

From pramsey at cleverelephant.ca  Wed Feb 11 09:55:55 2015
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed, 11 Feb 2015 09:55:55 -0800
Subject: [gdal-dev] reading postgis xyzm with ogr2ogr
In-Reply-To: <CAHE-9zCfhOBtqpeMc8UjkyjUqkkEGeqtGqZ5Rs=oaWkqtvgDag@mail.gmail.com>
References: <CAHE-9zCfhOBtqpeMc8UjkyjUqkkEGeqtGqZ5Rs=oaWkqtvgDag@mail.gmail.com>
Message-ID: <etPan.54db97ab.3d1b58ba.88f4@Butterfly.local>

You could use the OGR sql query option to wrap your geometry call in a force2d or force3d function call in PostGIS?

--?
Paul Ramsey
http://cleverelephant.ca
http://postgis.net

On February 11, 2015 at 9:54:07 AM, Duarte Carreira (dncarreira at gmail.com) wrote:

Hi there.

?

I?m trying to figure out how to read xyzm geometries from postgis with ogr2ogr, if at all possible.

?

I get the usual "is not supported" error:

ERROR 1: Reading EWKB with 4-dimensional coordinates (XYZM) is not supported

?

But reading old tickets I get the idea there is a way to read and just ignore the 4th dimension, instead of getting null geometries.

?

For instance:

http://trac.osgeo.org/gdal/ticket/1323

?

From 8 years ago(!), says:

The problem does not occur if a layer is accessed using
OGRPGDataSource::GetLayerByname()
Then, geometry is read in EWKT form and parsed correctly without any errors but M coordinate is omitted.

Can this be done using og2ogr?

?

Thanks,

Duarte
_______________________________________________  
gdal-dev mailing list  
gdal-dev at lists.osgeo.org  
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150211/4c98d970/attachment-0001.html>

From dncarreira at gmail.com  Wed Feb 11 10:23:19 2015
From: dncarreira at gmail.com (Duarte Carreira)
Date: Wed, 11 Feb 2015 18:23:19 +0000
Subject: [gdal-dev] reading postgis xyzm with ogr2ogr
In-Reply-To: <etPan.54db97ab.3d1b58ba.88f4@Butterfly.local>
References: <CAHE-9zCfhOBtqpeMc8UjkyjUqkkEGeqtGqZ5Rs=oaWkqtvgDag@mail.gmail.com>
	<etPan.54db97ab.3d1b58ba.88f4@Butterfly.local>
Message-ID: <CAHE-9zAXrqAd0XvAH1WiAEOSZfr2tScLVaDzDVKcEMOjAZzwNQ@mail.gmail.com>

Thanks Paul.

Yes, but I'm trying to export all tables from a schema, so I don't state
the names of the tables. I think using sql would require 1 comand per
table, right?

So my command is something like this:

ogr2ogr -progress PG:"dbname='postgis'
active_schema=schema1 schemas=schema1 <connectioninfo>" -f "SQLite"
mydb.sqlite   ....

I was hoping for a magic parameter to avoid the xyzm error...



On Wed, Feb 11, 2015 at 5:55 PM, Paul Ramsey <pramsey at cleverelephant.ca>
wrote:

> You could use the OGR sql query option to wrap your geometry call in a
> force2d or force3d function call in PostGIS?
>
>  --
> Paul Ramsey
> http://cleverelephant.ca
> http://postgis.net
>
> On February 11, 2015 at 9:54:07 AM, Duarte Carreira (dncarreira at gmail.com)
> wrote:
>
>  Hi there.
>
>
>
> I?m trying to figure out how to read xyzm geometries from postgis with
> ogr2ogr, if at all possible.
>
>
>
> I get the usual "is not supported" error:
>
> ERROR 1: Reading EWKB with 4-dimensional coordinates (XYZM) is not
> supported
>
>
>
> But reading old tickets I get the idea there is a way to read and just
> ignore the 4th dimension, instead of getting null geometries.
>
>
>
> For instance:
>
> http://trac.osgeo.org/gdal/ticket/1323
>
>
>
> From 8 years ago(!), says:
>
> The problem does not occur if a layer is accessed using
> OGRPGDataSource::GetLayerByname()
> Then, geometry is read in EWKT form and parsed correctly without any
> errors but M coordinate is omitted.
>
> Can this be done using og2ogr?
>
>
>
> Thanks,
> Duarte
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150211/51045eda/attachment.html>

From remi.cura at gmail.com  Thu Feb 12 01:49:57 2015
From: remi.cura at gmail.com (=?UTF-8?Q?R=C3=A9mi_Cura?=)
Date: Thu, 12 Feb 2015 10:49:57 +0100
Subject: [gdal-dev] reading postgis xyzm with ogr2ogr
In-Reply-To: <CAHE-9zAXrqAd0XvAH1WiAEOSZfr2tScLVaDzDVKcEMOjAZzwNQ@mail.gmail.com>
References: <CAHE-9zCfhOBtqpeMc8UjkyjUqkkEGeqtGqZ5Rs=oaWkqtvgDag@mail.gmail.com>
	<etPan.54db97ab.3d1b58ba.88f4@Butterfly.local>
	<CAHE-9zAXrqAd0XvAH1WiAEOSZfr2tScLVaDzDVKcEMOjAZzwNQ@mail.gmail.com>
Message-ID: <CAJvUf_t_PhT3eagcQ9PWSjVmGZFwA=8ArZ5jSwCgvzbArPaArA@mail.gmail.com>

depending on how desperate you are you could :
 - use simple COPY statement to export you LINESTRINGZM from database
 - use python + python-ogr and manually create a X Y Z M file
 - use python + shapely

In all case you can wrap it into a command line executable, liek ogr2ogr.

Cheers,
R?mi-C

2015-02-11 19:23 GMT+01:00 Duarte Carreira <dncarreira at gmail.com>:

> Thanks Paul.
>
> Yes, but I'm trying to export all tables from a schema, so I don't state
> the names of the tables. I think using sql would require 1 comand per
> table, right?
>
> So my command is something like this:
>
> ogr2ogr -progress PG:"dbname='postgis'
> active_schema=schema1 schemas=schema1 <connectioninfo>" -f "SQLite"
> mydb.sqlite   ....
>
> I was hoping for a magic parameter to avoid the xyzm error...
>
>
>
> On Wed, Feb 11, 2015 at 5:55 PM, Paul Ramsey <pramsey at cleverelephant.ca>
> wrote:
>
>> You could use the OGR sql query option to wrap your geometry call in a
>> force2d or force3d function call in PostGIS?
>>
>>  --
>> Paul Ramsey
>> http://cleverelephant.ca
>> http://postgis.net
>>
>> On February 11, 2015 at 9:54:07 AM, Duarte Carreira (dncarreira at gmail.com)
>> wrote:
>>
>>  Hi there.
>>
>>
>>
>> I?m trying to figure out how to read xyzm geometries from postgis with
>> ogr2ogr, if at all possible.
>>
>>
>>
>> I get the usual "is not supported" error:
>>
>> ERROR 1: Reading EWKB with 4-dimensional coordinates (XYZM) is not
>> supported
>>
>>
>>
>> But reading old tickets I get the idea there is a way to read and just
>> ignore the 4th dimension, instead of getting null geometries.
>>
>>
>>
>> For instance:
>>
>> http://trac.osgeo.org/gdal/ticket/1323
>>
>>
>>
>> From 8 years ago(!), says:
>>
>> The problem does not occur if a layer is accessed using
>> OGRPGDataSource::GetLayerByname()
>> Then, geometry is read in EWKT form and parsed correctly without any
>> errors but M coordinate is omitted.
>>
>> Can this be done using og2ogr?
>>
>>
>>
>> Thanks,
>> Duarte
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150212/4b30c5df/attachment.html>

From dncarreira at gmail.com  Thu Feb 12 01:52:57 2015
From: dncarreira at gmail.com (Duarte Carreira)
Date: Thu, 12 Feb 2015 09:52:57 +0000
Subject: [gdal-dev] reading postgis xyzm with ogr2ogr
In-Reply-To: <CAJvUf_t_PhT3eagcQ9PWSjVmGZFwA=8ArZ5jSwCgvzbArPaArA@mail.gmail.com>
References: <CAHE-9zCfhOBtqpeMc8UjkyjUqkkEGeqtGqZ5Rs=oaWkqtvgDag@mail.gmail.com>
	<etPan.54db97ab.3d1b58ba.88f4@Butterfly.local>
	<CAHE-9zAXrqAd0XvAH1WiAEOSZfr2tScLVaDzDVKcEMOjAZzwNQ@mail.gmail.com>
	<CAJvUf_t_PhT3eagcQ9PWSjVmGZFwA=8ArZ5jSwCgvzbArPaArA@mail.gmail.com>
Message-ID: <CAHE-9zDOP+u6OWRTKtZgA2h17CcyrSXChZCmN1WZzkbr4nVd3Q@mail.gmail.com>

Hi. I am not that desperate ;)

I was trying to figure out if the command ogr2ogr could use the hint in the
ticket, by using the ewkt...

Thanks,
Duarte

On Thu, Feb 12, 2015 at 9:49 AM, R?mi Cura <remi.cura at gmail.com> wrote:

> depending on how desperate you are you could :
>  - use simple COPY statement to export you LINESTRINGZM from database
>  - use python + python-ogr and manually create a X Y Z M file
>  - use python + shapely
>
> In all case you can wrap it into a command line executable, liek ogr2ogr.
>
> Cheers,
> R?mi-C
>
> 2015-02-11 19:23 GMT+01:00 Duarte Carreira <dncarreira at gmail.com>:
>
>> Thanks Paul.
>>
>> Yes, but I'm trying to export all tables from a schema, so I don't state
>> the names of the tables. I think using sql would require 1 comand per
>> table, right?
>>
>> So my command is something like this:
>>
>> ogr2ogr -progress PG:"dbname='postgis'
>> active_schema=schema1 schemas=schema1 <connectioninfo>" -f "SQLite"
>> mydb.sqlite   ....
>>
>> I was hoping for a magic parameter to avoid the xyzm error...
>>
>>
>>
>> On Wed, Feb 11, 2015 at 5:55 PM, Paul Ramsey <pramsey at cleverelephant.ca>
>> wrote:
>>
>>> You could use the OGR sql query option to wrap your geometry call in a
>>> force2d or force3d function call in PostGIS?
>>>
>>>  --
>>> Paul Ramsey
>>> http://cleverelephant.ca
>>> http://postgis.net
>>>
>>> On February 11, 2015 at 9:54:07 AM, Duarte Carreira (
>>> dncarreira at gmail.com) wrote:
>>>
>>>  Hi there.
>>>
>>>
>>>
>>> I?m trying to figure out how to read xyzm geometries from postgis with
>>> ogr2ogr, if at all possible.
>>>
>>>
>>>
>>> I get the usual "is not supported" error:
>>>
>>> ERROR 1: Reading EWKB with 4-dimensional coordinates (XYZM) is not
>>> supported
>>>
>>>
>>>
>>> But reading old tickets I get the idea there is a way to read and just
>>> ignore the 4th dimension, instead of getting null geometries.
>>>
>>>
>>>
>>> For instance:
>>>
>>> http://trac.osgeo.org/gdal/ticket/1323
>>>
>>>
>>>
>>> From 8 years ago(!), says:
>>>
>>> The problem does not occur if a layer is accessed using
>>> OGRPGDataSource::GetLayerByname()
>>> Then, geometry is read in EWKT form and parsed correctly without any
>>> errors but M coordinate is omitted.
>>>
>>> Can this be done using og2ogr?
>>>
>>>
>>>
>>> Thanks,
>>> Duarte
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150212/5ef60953/attachment.html>

From simpsonar77 at gmail.com  Thu Feb 12 04:58:30 2015
From: simpsonar77 at gmail.com (Andrew Simpson)
Date: Thu, 12 Feb 2015 07:58:30 -0500
Subject: [gdal-dev] new to gdal, converting projection, need some help
Message-ID: <CAFzrdOwuK0Qea9mkOuRVFHtrSpNL9AshB9oa4zeytvrec_NGfw@mail.gmail.com>

I'm new to learning GDAL (mapping in general).  I have a bunch of tif files
(300+) that are in NAD83, but my mapping application only uses WGS84.  The
tiles are all around 50-75Mb each

I'm able to use gdal warp to convert the projection properly to WGS84, but
the images (tiles) come out skewed.

I tried using bdalbuildvrt first to create the vrt, then gdalwarp with the
following options:  -co TILED=YES -co BIGTIFF=YES -of GTIFF -t_srs
"+proj=longlat +datum=WGS84 + no_defs" input.vrt output.vrt

Ok, so this mostly works, but I have 2 questions/issues:
1.  what is the best way to convert the projection and eliminate the
skewing?
2.  The single .tif produced is now >30GB!  significantly larger.  why does
this occur and how can I keep this file size down?


Thanks for any info!
Andrew Simpson
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150212/4663389a/attachment.html>

From pedromachadomonteiro at gmail.com  Thu Feb 12 07:40:06 2015
From: pedromachadomonteiro at gmail.com (Pedro Machado Monteiro)
Date: Thu, 12 Feb 2015 15:40:06 +0000
Subject: [gdal-dev] GDAL 1.9.0 ogr2ogr. Organize results in destination
	folder.
Message-ID: <CAMzfqQ-HXNe6e1TOQN8JVcHqK3J+LP+QDGijz76G0qtZMqaZbQ@mail.gmail.com>

Hello:



I?m trying to



1. transform coordinates with ogr2ogr, for every shape in folder ?FONTE?
and its subfolders

2. put the results in a destination (sub)folder "Teste"

3. organize automatically the results, in the same manner as in source
?FONTE? (results organized in destination subfolders that have the same
names of the source subfolders)



I succeed in doing operations 1 and 2 with this string:



D:\Es\FONTE>*for /R %f in (*.shp) do* ogr2ogr -s_srs "+proj=tmerc
+lat_0=39.66666666666666 +lon_0

=1 +k=1 +x_0=200000 +y_0=300000 +ellps=intl +pm=lisbon +units=m +no_defs
+nadgrids=DLX_ETRS89_geo.gs

b +wktext" -t_srs "+proj=tmerc +lat_0=39.66825833333333
+lon_0=-8.133108333333334 +k=1 +x_0=0 +y_0=0

 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs" -f "ESRI Shapefile"
*Teste* "%f"



The results go to "Teste", but with no subfolders



How can I include operation 3 in that string?



Between *Teste* and "%f" I?ve tried to include "%~dpf", "%~dpnf" and
"%~dpnf.shp" but always got errors.



From:
http://gis.stackexchange.com/questions/25366/ogr2ogr-convert-all-shapefiles-in-a-directory




Thank you very much

Pedro Monteiro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150212/b5a3e868/attachment-0001.html>

From gdal at stripfamily.net  Thu Feb 12 08:20:16 2015
From: gdal at stripfamily.net (David Strip)
Date: Thu, 12 Feb 2015 09:20:16 -0700
Subject: [gdal-dev] new to gdal, converting projection, need some help
In-Reply-To: <CAFzrdOwuK0Qea9mkOuRVFHtrSpNL9AshB9oa4zeytvrec_NGfw@mail.gmail.com>
References: <CAFzrdOwuK0Qea9mkOuRVFHtrSpNL9AshB9oa4zeytvrec_NGfw@mail.gmail.com>
Message-ID: <54DCD2C0.40200@stripfamily.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150212/9aa0aa2b/attachment.html>

From even.rouault at spatialys.com  Thu Feb 12 09:55:50 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 12 Feb 2015 18:55:50 +0100
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.11.2RC2 for release
Message-ID: <201502121855.51053.even.rouault@spatialys.com>

Hi,

No issue has been reported on RC2, so I invite PSC members to vote on this 
motion after doing your own testing and validation. 
Input from everyone else who can test it is also very welcome.

---

Motion: The GDAL/OGR 1.11.2RC2 package is promoted as the
final GDAL/OGR 1.11.2 release.

+1 Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Brendan.DeTracey at dfo-mpo.gc.ca  Thu Feb 12 11:18:39 2015
From: Brendan.DeTracey at dfo-mpo.gc.ca (DeTracey, Brendan)
Date: Thu, 12 Feb 2015 19:18:39 +0000
Subject: [gdal-dev] SetNoDataValue on Memory Raster
Message-ID: <22C6A8A4889F0C45B71BF3272671822E82054FFC@SVNSBIOMBX01.ENT.dfo-mpo.ca>

Hi,

Using the Python bindings, I am having trouble getting a memory raster to respect SetNoDataValue. It works with a GeoTiff(if I close and then reopen it for reading), I presume because everything gets written when the raster is closed. My code:

conc_band = t_ds.GetRasterBand(1)
conc_band.SetNoDataValue(-32768)
thick_band = t_ds.GetRasterBand(2)
thick_band.SetNoDataValue(-32768)
gdal.RasterizeLayer(t_ds, [1], layer, options=['ATTRIBUTE=CONC'])
gdal.RasterizeLayer(t_ds, [2], layer, options=['ATTRIBUTE=THICK'])
#t_ds.FlushCache()
conc = conc_band.ReadAsArray()
thick = thick_band.ReadAsArray()

When I ReadAsArray, I get a 0 instead of -32768. I tried FlushCache (commented out above) but it did not help. How do I force the raster in memory to update before I reaqd it?

Thanks,
Brendan

From even.rouault at spatialys.com  Thu Feb 12 11:26:22 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 12 Feb 2015 20:26:22 +0100
Subject: [gdal-dev] SetNoDataValue on Memory Raster
In-Reply-To: <22C6A8A4889F0C45B71BF3272671822E82054FFC@SVNSBIOMBX01.ENT.dfo-mpo.ca>
References: <22C6A8A4889F0C45B71BF3272671822E82054FFC@SVNSBIOMBX01.ENT.dfo-mpo.ca>
Message-ID: <201502122026.22444.even.rouault@spatialys.com>

Brendan,

> 
> Using the Python bindings, I am having trouble getting a memory raster to
> respect SetNoDataValue. It works with a GeoTiff(if I close and then reopen
> it for reading), I presume because everything gets written when the raster
> is closed. My code:
> 
> conc_band = t_ds.GetRasterBand(1)
> conc_band.SetNoDataValue(-32768)

SetNoDataValue() only sets a parameter to indicate which value should be 
considered as nodata, but doesn't change the pixel values themselves.
Try adding
conc_band.Fill(-32768)


> thick_band = t_ds.GetRasterBand(2)
> thick_band.SetNoDataValue(-32768)

Idem, add
thick_band.Fill(-32768)

> gdal.RasterizeLayer(t_ds, [1], layer, options=['ATTRIBUTE=CONC'])
> gdal.RasterizeLayer(t_ds, [2], layer, options=['ATTRIBUTE=THICK'])
> #t_ds.FlushCache()
> conc = conc_band.ReadAsArray()
> thick = thick_band.ReadAsArray()
> 
> When I ReadAsArray, I get a 0 instead of -32768. I tried FlushCache
> (commented out above) but it did not help. How do I force the raster in
> memory to update before I reaqd it?
> 

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From schwehr at gmail.com  Thu Feb 12 11:54:42 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 12 Feb 2015 11:54:42 -0800
Subject: [gdal-dev] GDAL/OGR 1.11.2 RC2 Available for Review
In-Reply-To: <201502110928.06824.even.rouault@spatialys.com>
References: <201502101330.11165.even.rouault@spatialys.com>
	<CACmBxytnDF-3Us32UFPc8Ufd9Mx0KDG3tKMnb-CpYQGRfjaCDw@mail.gmail.com>
	<201502110928.06824.even.rouault@spatialys.com>
Message-ID: <CACmBxyvM75C2sMyuTFvNdu8=-MCkwiW+ztvCkv4pEzegWGoO2g@mail.gmail.com>

Here is the full output:

https://gist.github.com/schwehr/c9e9fb595d0370e7eff7

fink list -i libjpeg webp
 i   libjpeg-bin                   9a-2                   Executables for
libjpeg package
 i   libjpeg9                      9a-2                   JPEG image format
handling library
 i   libjpeg9-shlibs               9a-2                   Shared libraries
for libjpeg package
 i   libwebp5                      0.4.0-1                Library for
manipulating WebP format
 i   libwebp5-shlibs               0.4.0-1                Library for
manipulating WebP format

And the details of test_gdal_grid_3:

./test_gdal_grid.py
  TEST: test_gdal_grid_1 ... success
  TEST: test_gdal_grid_2 ... success
  TEST: test_gdal_grid_3 ... ERROR 4: `tmp/grid_invdist.tif' not recognised
as a supported file format.

fail (blowup)
Traceback (most recent call last):
  File "../pymod/gdaltest_python2.py", line 42, in run_func
    result = func()
  File "./test_gdal_grid.py", line 273, in test_gdal_grid_3
    maxdiff = gdaltest.compare_ds(ds, ds_ref, verbose = 0)
  File "../pymod/gdaltest.py", line 1089, in compare_ds
    width = ds1.RasterXSize
AttributeError: 'NoneType' object has no attribute 'RasterXSize'
  TEST: test_gdal_grid_4 ... success
  TEST: test_gdal_grid_5 ... success
  TEST: test_gdal_grid_6 ... success
  TEST: test_gdal_grid_7 ... success
  TEST: test_gdal_grid_8 ... success
  TEST: test_gdal_grid_9 ... success
  TEST: test_gdal_grid_10 ... success
  TEST: test_gdal_grid_cleanup ... ERROR 4: `tmp/grid_invdist.tif' not
recognised as a supported file format.

success

Test Script: test_gdal_grid
Succeeded: 10
Failed:    1 (1 blew exceptions)
Skipped:   0
Expected fail:0
Duration:  1.09s

file tmp/grid_invdist.tif
tmp/grid_invdist.tif: empty


On Wed, Feb 11, 2015 at 12:28 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mardi 10 f?vrier 2015 20:05:52, Kurt Schwehr a ?crit :
> > I think it looks okay w.r.t. fink on mac osx 10.9.  autotest failures for
> > anyone who is interested:
> > https://gist.github.com/schwehr/757bae6bd28d9a7ffc4d
>
> Kurt,
>
> Some of the output traces that contain "fail" do not necessarily make the
> step
> a failure, but should skip it. The error message and information printed
> and
> line reported might be interesting.
> Most must be due to a different version of the JPEG or webp lib that must
> produce slightly different results.
> The exception stack associated with "TEST: test_gdal_grid_3 ... fail
> (blowup)"
> would be interesting
>
> Even
>
> >
> > On Tue, Feb 10, 2015 at 4:30 AM, Even Rouault <
> even.rouault at spatialys.com>
> >
> > wrote:
> > > Hi,
> > >
> > > I have prepared a second GDAL/OGR 1.11.2 release candidate, with the
> fix
> > > for
> > > the 1.11.0 regression in the PG driver identified yesterday (#5837).
> > > Please review and test.
> > >
> > > Peek up an archive among the following ones (by ascending size):
> > >   http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC2.tar.xz
> > >   http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC2.tar.gz
> > >   http://download.osgeo.org/gdal/1.11.2/gdal1112RC2.zip
> > >
> > > The gdal-grass plugin archive hasn't been modified since RC1  :
> > >   http://download.osgeo.org/gdal/1.11.2/gdal-grass-1.11.2.tar.gz
> > >
> > > A snapshot of the gdalautotest suite is also available :
> > >   http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.tar.gz
> > >   http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.zip
> > >
> > > The NEWS file is here :
> > >   http://trac.osgeo.org/gdal/wiki/Release/1.11.2-News
> > >
> > > I'll call for a vote promoting it soon if no serious problems are
> > > reported before.
> > >
> > > Best regards,
> > >
> > > Even
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150212/36cb928a/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Feb 12 12:20:56 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Thu, 12 Feb 2015 20:20:56 +0000 (UTC)
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.11.2RC2 for release
References: <201502121855.51053.even.rouault@spatialys.com>
Message-ID: <loom.20150212T212018-915@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

 
> Motion: The GDAL/OGR 1.11.2RC2 package is promoted as the
> final GDAL/OGR 1.11.2 release.
> 
> +1 Even


+1

-Jukka Rahkonen- 





From dmorissette at mapgears.com  Thu Feb 12 12:22:15 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 12 Feb 2015 15:22:15 -0500
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.11.2RC2 for release
In-Reply-To: <201502121855.51053.even.rouault@spatialys.com>
References: <201502121855.51053.even.rouault@spatialys.com>
Message-ID: <54DD0B77.10609@mapgears.com>

On 2015-02-12 12:55 PM, Even Rouault wrote:
>
> Motion: The GDAL/OGR 1.11.2RC2 package is promoted as the
> final GDAL/OGR 1.11.2 release.
>

+1

Daniel

-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From even.rouault at spatialys.com  Thu Feb 12 12:23:33 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 12 Feb 2015 21:23:33 +0100
Subject: [gdal-dev] GDAL/OGR 1.11.2 RC2 Available for Review
In-Reply-To: <CACmBxyvM75C2sMyuTFvNdu8=-MCkwiW+ztvCkv4pEzegWGoO2g@mail.gmail.com>
References: <201502101330.11165.even.rouault@spatialys.com>
	<201502110928.06824.even.rouault@spatialys.com>
	<CACmBxyvM75C2sMyuTFvNdu8=-MCkwiW+ztvCkv4pEzegWGoO2g@mail.gmail.com>
Message-ID: <201502122123.33830.even.rouault@spatialys.com>

Le jeudi 12 f?vrier 2015 20:54:42, Kurt Schwehr a ?crit :
> Here is the full output:
> 
> https://gist.github.com/schwehr/c9e9fb595d0370e7eff7
> 
> fink list -i libjpeg webp
>  i   libjpeg-bin                   9a-2                   Executables for
> libjpeg package
>  i   libjpeg9                      9a-2                   JPEG image format
> handling library
>  i   libjpeg9-shlibs               9a-2                   Shared libraries
> for libjpeg package
>  i   libwebp5                      0.4.0-1                Library for
> manipulating WebP format
>  i   libwebp5-shlibs               0.4.0-1                Library for
> manipulating WebP format
> 
> And the details of test_gdal_grid_3:
> 
> ./test_gdal_grid.py
>   TEST: test_gdal_grid_1 ... success
>   TEST: test_gdal_grid_2 ... success
>   TEST: test_gdal_grid_3 ... ERROR 4: `tmp/grid_invdist.tif' not recognised
> as a supported file format.
> 
> fail (blowup)
> Traceback (most recent call last):
>   File "../pymod/gdaltest_python2.py", line 42, in run_func
>     result = func()
>   File "./test_gdal_grid.py", line 273, in test_gdal_grid_3
>     maxdiff = gdaltest.compare_ds(ds, ds_ref, verbose = 0)
>   File "../pymod/gdaltest.py", line 1089, in compare_ds
>     width = ds1.RasterXSize
> AttributeError: 'NoneType' object has no attribute 'RasterXSize'
>   TEST: test_gdal_grid_4 ... success
>   TEST: test_gdal_grid_5 ... success
>   TEST: test_gdal_grid_6 ... success
>   TEST: test_gdal_grid_7 ... success
>   TEST: test_gdal_grid_8 ... success
>   TEST: test_gdal_grid_9 ... success
>   TEST: test_gdal_grid_10 ... success
>   TEST: test_gdal_grid_cleanup ... ERROR 4: `tmp/grid_invdist.tif' not
> recognised as a supported file format.
> 
> success

Kurt,

I'm wondering if it wouldn't be an issue with SSE / AVX optimizations.

Could you go into autotest/utilities and run manually the following ?

$ gdal_grid  --debug on -txe 440720.0 441920.0 -tye 3751320.0 3750120.0 \
                 -outsize 20 20 -ot Float64 -l grid \
                -a invdist:power=2.0:smoothing=0.0:radius1=0.0:radius2=0.0:angle=0.0:max_points=0:min_points=0:nodata=0.0 data/grid.vrt out.tif

Here's what I get :

OGR: OGROpen(data/grid.vrt/0x2482e50) succeeded as VRT.
GDAL: GDALDriver::Create(GTiff,out.tif,20,20,1,Float64,(nil))
OGR: OGROpen(data/grid.csv/0x24844c0) succeeded as CSV.
Grid data type is "Float64"
Grid size = (20 20).
Corner coordinates = (440690.000000 3750090.000000)-(441950.000000 3751350.000000).
Grid cell size = (60.000000 -60.000000).
Source point count = 400.
Algorithm name: "invdist".
Options are "power=2.000000:smoothing=0.000000:radius1=0.000000:radius2=0.000000:angle=0.000000:max_points=0:min_points=0:nodata=0.000000"

GDAL_GRID: Work buffer: 20 * 20
GDAL_GRID: Using SSE optimized version
GDAL_GRID: Using 4 threads
0...10...20...30...40...50...60...70...80...90...100 - done.
VRT: 400 features read on layer 'grid'.
CSV: 400 features read on layer 'grid'.
GDAL: GDALClose(out.tif, this=0x24baac0)

If you have issues, you can try adding "--config GDAL_USE_AVX NO" and/or "--config GDAL_USE_SSE NO"
You can also play with the GDAL_NUM_THREADS configuration option.

Does this work with trunk ? There have been some changes by moving SSE specifc code into a specific file.

Even


> 
> Test Script: test_gdal_grid
> Succeeded: 10
> Failed:    1 (1 blew exceptions)
> Skipped:   0
> Expected fail:0
> Duration:  1.09s
> 
> file tmp/grid_invdist.tif
> tmp/grid_invdist.tif: empty
> 
> 
> On Wed, Feb 11, 2015 at 12:28 AM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le mardi 10 f?vrier 2015 20:05:52, Kurt Schwehr a ?crit :
> > > I think it looks okay w.r.t. fink on mac osx 10.9.  autotest failures
> > > for anyone who is interested:
> > > https://gist.github.com/schwehr/757bae6bd28d9a7ffc4d
> > 
> > Kurt,
> > 
> > Some of the output traces that contain "fail" do not necessarily make the
> > step
> > a failure, but should skip it. The error message and information printed
> > and
> > line reported might be interesting.
> > Most must be due to a different version of the JPEG or webp lib that must
> > produce slightly different results.
> > The exception stack associated with "TEST: test_gdal_grid_3 ... fail
> > (blowup)"
> > would be interesting
> > 
> > Even
> > 
> > > On Tue, Feb 10, 2015 at 4:30 AM, Even Rouault <
> > 
> > even.rouault at spatialys.com>
> > 
> > > wrote:
> > > > Hi,
> > > > 
> > > > I have prepared a second GDAL/OGR 1.11.2 release candidate, with the
> > 
> > fix
> > 
> > > > for
> > > > the 1.11.0 regression in the PG driver identified yesterday (#5837).
> > > > Please review and test.
> > > > 
> > > > Peek up an archive among the following ones (by ascending size):
> > > >   http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC2.tar.xz
> > > >   http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC2.tar.gz
> > > >   http://download.osgeo.org/gdal/1.11.2/gdal1112RC2.zip
> > > > 
> > > > The gdal-grass plugin archive hasn't been modified since RC1  :
> > > >   http://download.osgeo.org/gdal/1.11.2/gdal-grass-1.11.2.tar.gz
> > > > 
> > > > A snapshot of the gdalautotest suite is also available :
> > > >   http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.tar.gz
> > > >   http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.zip
> > > > 
> > > > The NEWS file is here :
> > > >   http://trac.osgeo.org/gdal/wiki/Release/1.11.2-News
> > > > 
> > > > I'll call for a vote promoting it soon if no serious problems are
> > > > reported before.
> > > > 
> > > > Best regards,
> > > > 
> > > > Even
> > > > --
> > > > Spatialys - Geospatial professional services
> > > > http://www.spatialys.com
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From szekerest at gmail.com  Thu Feb 12 14:01:04 2015
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 12 Feb 2015 23:01:04 +0100
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.11.2RC2 for release
In-Reply-To: <201502121855.51053.even.rouault@spatialys.com>
References: <201502121855.51053.even.rouault@spatialys.com>
Message-ID: <CACALY+RUPdrthVRu+0c8GV6Ax-jHPF_OkV3kiDPLTxedv6GA6A@mail.gmail.com>

+1

Tamas



2015-02-12 18:55 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:

> Hi,
>
> No issue has been reported on RC2, so I invite PSC members to vote on this
> motion after doing your own testing and validation.
> Input from everyone else who can test it is also very welcome.
>
> ---
>
> Motion: The GDAL/OGR 1.11.2RC2 package is promoted as the
> final GDAL/OGR 1.11.2 release.
>
> +1 Even
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150212/03abc1cd/attachment.html>

From schwehr at gmail.com  Thu Feb 12 18:30:48 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 12 Feb 2015 18:30:48 -0800
Subject: [gdal-dev] GDAL/OGR 1.11.2 RC2 Available for Review
In-Reply-To: <201502122123.33830.even.rouault@spatialys.com>
References: <201502101330.11165.even.rouault@spatialys.com>
	<201502110928.06824.even.rouault@spatialys.com>
	<CACmBxyvM75C2sMyuTFvNdu8=-MCkwiW+ztvCkv4pEzegWGoO2g@mail.gmail.com>
	<201502122123.33830.even.rouault@spatialys.com>
Message-ID: <CACmBxysMZQTd6=uXVFhYYnNcofd2XpG2GypqLMo1p1aunLJBXw@mail.gmail.com>

I'll have to look into this more.

gdal_grid  --debug on -txe 440720.0 441920.0 -tye 3751320.0 3750120.0 \
>                  -outsize 20 20 -ot Float64 -l grid \
>                 -a
invdist:power=2.0:smoothing=0.0:radius1=0.0:radius2=0.0:angle=0.0:max_points=0:min_points=0:nodata=0.0
data/grid.vrt out.tif
OGR: OGROpen(data/grid.vrt/0x7f8c9be00240) succeeded as VRT.
GDAL: GDALDriver::Create(GTiff,out.tif,20,20,1,Float64,0x0)
OGR: OGROpen(data/grid.csv/0x7f8c9bc24350) succeeded as CSV.
Grid data type is "Float64"
Grid size = (20 20).
Corner coordinates = (440690.000000 3750090.000000)-(441950.000000
3751350.000000).
Grid cell size = (60.000000 -60.000000).
Source point count = 400.
Algorithm name: "invdist".
Options are
"power=2.000000:smoothing=0.000000:radius1=0.000000:radius2=0.000000:angle=0.000000:max_points=0:min_points=0:nodata=0.000000"

GDAL_GRID: Work buffer: 20 * 20
GDAL_GRID: Using AVX optimized version
GDAL_GRID: Using 8 threads
Segmentation fault: 11


On Thu, Feb 12, 2015 at 12:23 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le jeudi 12 f?vrier 2015 20:54:42, Kurt Schwehr a ?crit :
> > Here is the full output:
> >
> > https://gist.github.com/schwehr/c9e9fb595d0370e7eff7
> >
> > fink list -i libjpeg webp
> >  i   libjpeg-bin                   9a-2                   Executables for
> > libjpeg package
> >  i   libjpeg9                      9a-2                   JPEG image
> format
> > handling library
> >  i   libjpeg9-shlibs               9a-2                   Shared
> libraries
> > for libjpeg package
> >  i   libwebp5                      0.4.0-1                Library for
> > manipulating WebP format
> >  i   libwebp5-shlibs               0.4.0-1                Library for
> > manipulating WebP format
> >
> > And the details of test_gdal_grid_3:
> >
> > ./test_gdal_grid.py
> >   TEST: test_gdal_grid_1 ... success
> >   TEST: test_gdal_grid_2 ... success
> >   TEST: test_gdal_grid_3 ... ERROR 4: `tmp/grid_invdist.tif' not
> recognised
> > as a supported file format.
> >
> > fail (blowup)
> > Traceback (most recent call last):
> >   File "../pymod/gdaltest_python2.py", line 42, in run_func
> >     result = func()
> >   File "./test_gdal_grid.py", line 273, in test_gdal_grid_3
> >     maxdiff = gdaltest.compare_ds(ds, ds_ref, verbose = 0)
> >   File "../pymod/gdaltest.py", line 1089, in compare_ds
> >     width = ds1.RasterXSize
> > AttributeError: 'NoneType' object has no attribute 'RasterXSize'
> >   TEST: test_gdal_grid_4 ... success
> >   TEST: test_gdal_grid_5 ... success
> >   TEST: test_gdal_grid_6 ... success
> >   TEST: test_gdal_grid_7 ... success
> >   TEST: test_gdal_grid_8 ... success
> >   TEST: test_gdal_grid_9 ... success
> >   TEST: test_gdal_grid_10 ... success
> >   TEST: test_gdal_grid_cleanup ... ERROR 4: `tmp/grid_invdist.tif' not
> > recognised as a supported file format.
> >
> > success
>
> Kurt,
>
> I'm wondering if it wouldn't be an issue with SSE / AVX optimizations.
>
> Could you go into autotest/utilities and run manually the following ?
>
> $ gdal_grid  --debug on -txe 440720.0 441920.0 -tye 3751320.0 3750120.0 \
>                  -outsize 20 20 -ot Float64 -l grid \
>                 -a
> invdist:power=2.0:smoothing=0.0:radius1=0.0:radius2=0.0:angle=0.0:max_points=0:min_points=0:nodata=0.0
> data/grid.vrt out.tif
>
> Here's what I get :
>
> OGR: OGROpen(data/grid.vrt/0x2482e50) succeeded as VRT.
> GDAL: GDALDriver::Create(GTiff,out.tif,20,20,1,Float64,(nil))
> OGR: OGROpen(data/grid.csv/0x24844c0) succeeded as CSV.
> Grid data type is "Float64"
> Grid size = (20 20).
> Corner coordinates = (440690.000000 3750090.000000)-(441950.000000
> 3751350.000000).
> Grid cell size = (60.000000 -60.000000).
> Source point count = 400.
> Algorithm name: "invdist".
> Options are
> "power=2.000000:smoothing=0.000000:radius1=0.000000:radius2=0.000000:angle=0.000000:max_points=0:min_points=0:nodata=0.000000"
>
> GDAL_GRID: Work buffer: 20 * 20
> GDAL_GRID: Using SSE optimized version
> GDAL_GRID: Using 4 threads
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> VRT: 400 features read on layer 'grid'.
> CSV: 400 features read on layer 'grid'.
> GDAL: GDALClose(out.tif, this=0x24baac0)
>
> If you have issues, you can try adding "--config GDAL_USE_AVX NO" and/or
> "--config GDAL_USE_SSE NO"
> You can also play with the GDAL_NUM_THREADS configuration option.
>
> Does this work with trunk ? There have been some changes by moving SSE
> specifc code into a specific file.
>
> Even
>
>
> >
> > Test Script: test_gdal_grid
> > Succeeded: 10
> > Failed:    1 (1 blew exceptions)
> > Skipped:   0
> > Expected fail:0
> > Duration:  1.09s
> >
> > file tmp/grid_invdist.tif
> > tmp/grid_invdist.tif: empty
> >
> >
> > On Wed, Feb 11, 2015 at 12:28 AM, Even Rouault <
> even.rouault at spatialys.com>
> >
> > wrote:
> > > Le mardi 10 f?vrier 2015 20:05:52, Kurt Schwehr a ?crit :
> > > > I think it looks okay w.r.t. fink on mac osx 10.9.  autotest failures
> > > > for anyone who is interested:
> > > > https://gist.github.com/schwehr/757bae6bd28d9a7ffc4d
> > >
> > > Kurt,
> > >
> > > Some of the output traces that contain "fail" do not necessarily make
> the
> > > step
> > > a failure, but should skip it. The error message and information
> printed
> > > and
> > > line reported might be interesting.
> > > Most must be due to a different version of the JPEG or webp lib that
> must
> > > produce slightly different results.
> > > The exception stack associated with "TEST: test_gdal_grid_3 ... fail
> > > (blowup)"
> > > would be interesting
> > >
> > > Even
> > >
> > > > On Tue, Feb 10, 2015 at 4:30 AM, Even Rouault <
> > >
> > > even.rouault at spatialys.com>
> > >
> > > > wrote:
> > > > > Hi,
> > > > >
> > > > > I have prepared a second GDAL/OGR 1.11.2 release candidate, with
> the
> > >
> > > fix
> > >
> > > > > for
> > > > > the 1.11.0 regression in the PG driver identified yesterday
> (#5837).
> > > > > Please review and test.
> > > > >
> > > > > Peek up an archive among the following ones (by ascending size):
> > > > >   http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC2.tar.xz
> > > > >   http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC2.tar.gz
> > > > >   http://download.osgeo.org/gdal/1.11.2/gdal1112RC2.zip
> > > > >
> > > > > The gdal-grass plugin archive hasn't been modified since RC1  :
> > > > >   http://download.osgeo.org/gdal/1.11.2/gdal-grass-1.11.2.tar.gz
> > > > >
> > > > > A snapshot of the gdalautotest suite is also available :
> > > > >   http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.tar.gz
> > > > >   http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.zip
> > > > >
> > > > > The NEWS file is here :
> > > > >   http://trac.osgeo.org/gdal/wiki/Release/1.11.2-News
> > > > >
> > > > > I'll call for a vote promoting it soon if no serious problems are
> > > > > reported before.
> > > > >
> > > > > Best regards,
> > > > >
> > > > > Even
> > > > > --
> > > > > Spatialys - Geospatial professional services
> > > > > http://www.spatialys.com
> > > > > _______________________________________________
> > > > > gdal-dev mailing list
> > > > > gdal-dev at lists.osgeo.org
> > > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150212/d24de3ad/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Feb 13 01:22:22 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 13 Feb 2015 09:22:22 +0000 (UTC)
Subject: [gdal-dev] How to make GDAL to use large VTR faster
Message-ID: <loom.20150213T100558-743@post.gmane.org>

There is some interesting discussion about an issue with a VRT file that
combines very many small images within the comments of this ticket
http://trac.osgeo.org/gdal/ticket/5828

For my mind mailing lists suit usually better for discussions than
Trac/Jira/Github bug trackers and at least by now search engines find hits
more easily from the lists. I hope that this mail can help someone in the
future to find a suggestion to increase GDAL_MAX_DATASET_POOL_SIZE for
improving the performance with a big slow VRT.

-Jukka Rahkonen-






From even.rouault at spatialys.com  Fri Feb 13 03:46:34 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 13 Feb 2015 12:46:34 +0100
Subject: [gdal-dev] Motion: Adopt RFC 53: OGR not-null constraints and
	default values
In-Reply-To: <201502111029.16219.even.rouault@spatialys.com>
References: <201502111029.16219.even.rouault@spatialys.com>
Message-ID: <201502131246.34234.even.rouault@spatialys.com>

Le mercredi 11 f?vrier 2015 10:29:16, vous avez ?crit :
> Hi,
> 
> As no points have been raised,
> 
> Motion : I move to adopt RFC 53: OGR not-null constraints and default
> values
> 
> http://trac.osgeo.org/gdal/wiki/rfc53_ogr_notnull_default
> 
> Starting with my +1

I declare this motion passed with support from JukkaR, DanielM and me.

> 
> Best regards,
> 
> Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Feb 13 04:05:40 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 13 Feb 2015 13:05:40 +0100
Subject: [gdal-dev] [Live-demo] [Board] Retire MapTiler from OSGeo-Live
In-Reply-To: <54DDB38E.3030509@gmail.com>
References: <54D5230A.7000500@gmail.com>
	<CACqBkM_AHkWccH94u=toemjM0GV7KpqABve0eoRBh-2h=E2U3A@mail.gmail.com>
	<54DDB38E.3030509@gmail.com>
Message-ID: <201502131305.40325.even.rouault@spatialys.com>

Hi,

(adding gdal-dev in CC as it is of interest)

As far as I understand (but I may be wrong as I haven't looked deeply at the 
code), maptiler (the open source project) consists of an improved 
gdal2tiles.py + a python gui.
The duplication between gdal2tiles.py in maptiler and GDAL isn't something 
particularly great. Ideally there should be one single version maintained in 
the OSGeo ecosystem.

So there are several possibilities I can imagine :

1) Merge maptiler's gdal2tiles enhancements into GDAL version, and make 
maptiler just a GUI over it

2) Merge maptiler's gdal2tiles enhancements into GDAL version, and also import 
the GUI (I think it is lightweight) if there's no too strong build 
complications involved for GDAL. Would have to be checked

3) Remove gdal2tiles from GDAL so that the reborne maptiler is the reference. 
But there are perhaps fixes in GDAL gdal2tiles that should be merged into 
maptiler one (Python3 compatibility comes to mind)

Any option would need someone to champion it of course...

Even


> Hi Eli, replying to your email, CC OSGeo-Live list (with your permission).
> 
> I agree that we don't want to be promoting a proprietary product from an
> Open Source page.
> 
> I suspect Angelos' subsequent email partially addresses your suggestions:
> 
> On 13/02/2015 10:47 am, Angelos Tzotsos wrote:
> > We have also discussed that in order to remove the project, we request
> > that there is an official source code repository to link to. This way
> > we can prove that the project was open source and can be forked in the
> > future. Unfortunately the main repository of the project was recently
> > deleted.
> > Without this, one can have the impression that OSGeoLive and OSGeo has
> > endorsed and distributed proprietary software.
> > 
> > Also we plan to introduce IceTiler in the next version of OSGeoLive.
> 
> For this OSGeo-Live release we will do what we can achieve within the
> time available.
> 
> On 13/02/2015 11:58 am, Eli Adam wrote:
> > Hi Cameron,
> > 
> > I know that timeline is as big of a challenge as anything else in this
> > case.  I have a marketing/presentation question for you below.
> > 
> > On Thu, Feb 12, 2015 at 2:23 PM, Cameron Shorter
> > 
> > <cameron.shorter at gmail.com> wrote:
> >> Hi Petr, OSGeo-Live team, OSGeo Board,
> >> Is our OSGeoLive meeting, we discussed retiring of MapTiler from
> >> OSGeoLive. CCing OSGeo Board in discussion, in case the board wish to
> >> comment.
> >> 
> >> Summary:
> >> * MapTiler was Open Source, and was included in prior OSGeo-Live
> >> distributions
> >> * Petr, the author, found the Open Source business model was not working
> >> for him, and has since moved future enhancements to a proprietary
> >> model. * The "maptiler" brand name now points to a URL of a proprietary
> >> product. * Petr has requested MapTiler be removed from OSGeo-Live.
> >> * As far as I've noticed, while there has been some disappointment to
> >> loose MapTiler as an Open Source project, we respect Petr's right to
> >> continue development using whatever model works for him. We are now
> >> working out how to cleanly transition.
> >> 
> >> Of note:
> >> * We have prior OSGeo-Live releases and documentation which reference
> >> the previous Open Source Maptiler.
> >> * OSGeo-Live wish to retain our reputation of promoting Open Source
> >> products, both now, and in the past.
> >> 
> >> Proposal for our imminent OSGeo-Live 8.5 release:
> >> * OSGeoLive will add a statement to our contents page [1] stating:
> >> "Maptiler: not included after OSGeo-Live 8.0, after project moved to
> >> proprietary business model"
> 
> On 13/02/2015 11:58 am, Eli Adam wrote:
> > This seems odd to reference proprietary software at all.  The contents
> > page [1] is a wonderful showcase of *open source* software.  Why
> > include an advertisement to go look for a proprietary software that
> > started as open source?  Linking to the last open source code with no
> > name makes more sense to me (I know that isn't possible unless we put
> > the code somewhere).  Or linking to http://gdal.org/gdal2tiles.html
> > which has some similar functionality and common ancestry.  Looks like
> > maybe licenses have varied in different points in time from different
> > sources too.  On the short timeline, there is no fork and no name to
> > link to yet.  If there were a fork and name would you list and link
> > that?  If so would you list or link "MapTiler" too?
> > 
> > You could link (or save all the information from),
> > https://web.archive.org/web/20131216172514/http://www.maptiler.org/
> > The Google Code SVN repo is also accessible through that method.  It
> > appears that google code svn still works, for instance, svn checkout
> > http://maptiler.googlecode.com/svn/trunk/ maptiler-read-only
> > 
> > I'm sure that you'll work it out fine but just wanted you to think
> > about the appearance of that list of *open source* software.  How do
> > you want the main list of open source geo software to appear?  I think
> > that should be the primary purpose (and fits with the OSGeo Live
> > project goals).
> > 
> > Best regards, Eli
> > 
> >> * The Maptiler Project Overview [2] will be updated to explain that
> >> MapTiler was Open Source, but future developments were proprietary. The
> >> Overview will reference the last Open Source version of software
> >> available.
> >> * The Maptiler Quickstart will be removed from docs, (but still
> >> available in subversion)
> >> * The maptiler installer will be disabled so MapTiler will not be
> >> distributed on OSGeo-Live.
> >> 
> >> If anyone has objections or comments, please raise them within 48 hours
> >> (15 Feb 2015) such that we can address them before our release.
> >> 
> >> Most (not all) of the history on this conversation has been copied
> >> below.
> >> 
> >> [1] http://live.osgeo.org/en/overview/overview.html
> >> [2] http://live.osgeo.org/en/overview/maptiler_overview.html
> >> 
> >> On 13/02/2015 4:29 am, Angelos Tzotsos wrote:
> >> 
> >> Hi all,
> >> 
> >> I definitely agree here with Howard.
> >> 
> >> Since Maptiler has been included in OSGeoLive for 5 years now, and Petr
> >> has agreed to follow the OSGeoLive license for his contribution, there
> >> has to be some kind of lineage about this project online. It cannot
> >> just disappear. People would think that OSGeo endorced non-free
> >> software in the past, which is not acceptable in my opinion.
> >> 
> >> We need an "official" public repository including the last version of
> >> the open source code to link to. We should then link to that in our
> >> documents (even if the project is removed). Cameron has already moved
> >> the documents in the "retired" area.
> >> 
> >> I agree that the Maptiler name has to be removed from OSGeoLive in
> >> future versions. But, the request for removal came much after our
> >> official 8.5 code freeze, so I am against removing stuff from 8.5
> >> especially 10 days before release.
> >> I propose we keep the installer for 8.5 (unless Petr provides a new deb
> >> version with a new name).
> >> I also propose to remove the Maptiler documents completely for this
> >> release.
> >> 
> >> Then, as Johan suggested we can fork Maptiler as Icetiler for the next
> >> OSGeoLive 9.0 release and restore the docs.
> >> 
> >> Best,
> >> Angelos
> >> 
> >> PS. I also want to thank Petr for his work on Maptiler, it is much
> >> appreciated.
> >> 
> >> On 02/09/2015 11:46 AM, Johan Van de Wauw wrote:
> >> 
> >> Hi all,
> >> 
> >> First of all I would like to thank Petr for his work on Maptiler. He
> >> has actually spent a lot of unpaid time to develop a tool which is
> >> useful for many users.
> >> Earning a living from open-source is hard - as most people who have
> >> tried will be able to tell you.
> >> 
> >> Second I would like to point out that a project that has many users
> >> and little contributors is not necessarily unsuccessful.  If your tool
> >> is working well, it may not scratch a developers itch[1].
> >> 
> >> Anyway, it seems that by retiring from OsGeo live you did hit many
> >> developers itch, so it seems this may actually be a rebirth of the
> >> project.
> >> 
> >> I think that the request of Petr is fair: the code remains free (which
> >> it should, because there can be many derived works), but he just
> >> requests not to use the name and logo. This leaves room for other
> >> developers to jump in and create a new version. Yesterday on IRC, I
> >> proposed the name "IceTiler" as an alternative, based on the
> >> rebranding done by debian for many mozilla projects [2]. Other
> >> suggestions are welcome :-)
> >> 
> >> Taking all into account I'm +1 on removing this project from OsGeo
> >> live in the current form, but I think we could have "IceTiler" in a
> >> next release if there is sufficient interest.
> >> 
> >> Kind Regards,
> >> Johan
> >> 
> >> [1] http://en.wikipedia.org/wiki/The_Cathedral_and_the_Bazaar
> >> [2]
> >> http://en.wikipedia.org/wiki/Mozilla_Corporation_software_rebranded_by_t
> >> he_Debian_project _______________________________________________
> >> Live-demo mailing list
> >> Live-demo at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/live-demo
> >> http://live.osgeo.org
> >> http://wiki.osgeo.org/wiki/Live_GIS_Disc
> >> .
> >> 
> >> 
> >> 
> >> 
> >> On 9/02/2015 12:09 pm, Jody Garnett wrote:
> >> 
> >> Trademarks is one of those issues we tend to handle off-list with mentor
> >> and project  leadership (and/or the board if required).
> >> 
> >> In this case the author and trademark owner in one in the same (and has
> >> a fairly clear request).
> >> 
> >> My limited understanding is the board will need to care about trademarks
> >> in source code that has been contributed to OSGe (which is not a
> >> requirement of participation). I expect they will only need to care in
> >> the US (since that is where the organization is based) but that is up
> >> to legal council, IANAL etc...
> >> 
> >> It is relatively common for open source projects to be renamed due to TM
> >> conflict. This is a service a software foundation can provide, apache
> >> has strict management of trademarks, eclipse does a trademark check
> >> prior to accepting a project into incubation etc... But it is not clear
> >> cut - Debian for example refuses to include firefox as that name is
> >> trademarked (and not "free" and reusable ),
> >> 
> >> --
> >> Jody Garnett
> >> 
> >> On 7 February 2015 at 17:03, Even Rouault <even.rouault at spatialys.com>
> >> 
> >> wrote:
> >>> Hi,
> >>> 
> >>> (adding incubator@ as it is both of interest I think for OSGeo-Live &
> >>> incubator)
> >>> 
> >>> I will not argue about this particular case, but this does raise an
> >>> interesting question about how we should handle trademark issues
> >>> (perhaps this
> >>> has been discussed in the past, so sorry if I come after the battle)
> >>> 
> >>> The OSGeo incubation application questionnaire
> >>> http://www.osgeo.org/incubator/process/application.html mentions:
> >>> "Is the code free of patents, trademarks, and do you control the
> >>> copyright? "
> >>> 
> >>> It does not address clearly the issue of trademark of the *name of the
> >>> project* (it mentions just the *code*).
> >>> I'm not sure if there should be a policy regarding ownership of the
> >>> trademark
> >>> of the name of a project, but at least it could be asked if there's a
> >>> trademark on the name, and who owns it (and in which countries...) ? As
> >>> the
> >>> below example shows, this can have impact on the future of the project.
> >>> But
> >>> this is likely complex.
> >>> - What if someone from a random country comes and says "eh this project
> >>> conflicts with my trademark in Foobarland" ? Which countries should
> >>> OSGeo care
> >>> about ? Or perhaps this is too complex and the only real answer to
> >>> those questions is when you are assigned to a court ;-)
> >>> - And even if the trademark is owned by someone/an entity which is
> >>> strongly
> >>> related to the project, things can evolve over time. So shouldn't the
> >>> trademark be transfered to OSGeo control to guarantee fairness of use ?
> >>> But
> >>> that would mean that OSGeo would have to pay the costs of registration.
> >>> 
> >>> For the record, I did the exercice of quick searching which OSGeo
> >>> projects are
> >>> trademarked in France ( http://bases-marques.inpi.fr/ ) and it *seems*
> >>> (only a
> >>> search by a specialist in I.P would confirm it) that only QGIS and
> >>> GeoMajas are
> >>> (and both have E.U. wide validity). (There are unrelated matches for
> >>> Geotools,
> >>> Marble and OSSIM). OSGeo itself isn't trademarked. And apparently
> >>> MapTiler neither.
> >>> 
> >>> In the incubating projects, gvSIG is trademarked (E.U wide). Unrelated
> >>> matches
> >>> for "the zoo project" and OTB.  Rasdaman is registered in Germany.
> >>> 
> >>> Even
> >>> 
> >>>> Hi everybody,
> >>>> 
> >>>> Let me clarify the situation:
> >>>> 
> >>>> - The original MapTiler (python + wxWidgets) is discontinued and
> >>>> unfortunately it failed as an open-source project in my eyes. The
> >>>> software
> >>>> attracted quite a lot of end users, but no 3rd party developers. There
> >>>> was
> >>>> not a single commit from any third-party ever to the MapTiler project
> >>>> code
> >>>> itself, probably because the graphical utility was used mostly by
> >>>> non-programmers. The otherwise great project stalled for some time. I
> >>>> have
> >>>> not seen how to move it forward without any financial support, while
> >>>> not being a student anymore - and it made me really sad.
> >>>> 
> >>>> - Since 2011, I work with my team on a completely new implementation
> >>>> of an
> >>>> efficient tiling utility, the new MapTiler usable both from the
> >>>> command-line as well as from the graphical user interface, written in
> >>>> C++
> >>>> and QT. It is significantly faster, merges multiple files in different
> >>>> srs,
> >>>> handles correctly dateline crossing and world maps, tiles in
> >>>> non-mercator
> >>>> grids, it directly produces small and optimized jpg and pngs, it is
> >>>> compatible with OGC WMTS, contains uploader to Amazon S3 and Google
> >>>> Cloud
> >>>> Storage, supports different layers on different zoom levels (see
> >>>> http://goo.gl/TCrGtQ and other tutorials), and it comes with many
> >>>> other new
> >>>> features, with installers, regular updates, support and maintenance.
> >>>> It runs on Win/Lin/Mac - see http://www.maptiler.com/ for more
> >>>> information. With my colleagues we are trying to do our job as good
> >>>> as we can. It is a complete rewrite of the original utility, fixing
> >>>> design flaws and
> >>>> implementation issues of both GDAL2Tiles and original MapTiler. To be
> >>>> able
> >>>> to support the utility and to work on new features we ask for a
> >>>> license fee.
> >>>> 
> >>>> - There was no financial support from Google Summer of Code nor from
> >>>> OSGeo
> >>>> on the original MapTiler.
> >>>> 
> >>>> -  Both my Google SoC in 2007 and 2008 were on the GDAL2TIles
> >>>> command-line
> >>>> utility, lead by Howard.
> >>>> My original GDAL2Tiles from 2007 is available at
> >>>> http://www.klokan.cz/projects/gdal2tiles/ and the version from 2008 is
> >>>> distributed together with GDAL library, with patches and some fixes,
> >>>> mostly
> >>>> from Evan.
> >>>> As Even pointed out - I started to work on the MapTiler during August
> >>>> 2008,
> >>>> after the second SoC. BRGM mentioned in the code of GDAL2Tiles.py
> >>>> supported
> >>>> improvements of GDAL2Tiles, not MapTiler project.
> >>>> 
> >>>> - As the sole author of MapTiler and the owner of the MapTiler
> >>>> trademark I
> >>>> would like to request complete removal of the MapTiler from the OSGeo
> >>>> LiveDVD. I have prepared the existing .deb package as well as supplied
> >>>> the
> >>>> quickstart and installation scripts to the svn about 5 years back.
> >>>> 
> >>>> - If anybody is interested to revive my original open-source project
> >>>> published under an open-source license, he is welcomed to do that -
> >>>> under
> >>>> the conditions of the original license, while preserving the original
> >>>> copyright notice, and under the condition his fork of the project is
> >>>> not anymore called MapTiler and does not use original graphical
> >>>> elements and desktop icon of the original application.
> >>>> 
> >>>> - The existence of the two projects of the same name is confusing the
> >>>> people and I want to avoid it. I hope you respect my decision. The old
> >>>> MapTiler is dead, long live the MapTiler! ;-)
> >>>> 
> >>>> - I continue to work on several other open-source projects and with my
> >>>> team
> >>>> I keep developing, contributing and improving on OL3Cesium, OpenLayers
> >>>> V3,
> >>>> WebGL Earth, EPSG.io, IIPImage, GDAL and other projects. See our
> >>>> github and
> >>>> blog for details: http://www.klokantech.com/.
> >>>> Open-source is indeed very powerful and viable on components and I
> >>>> can't imagine to live without it. Still, there are situations, where
> >>>> it is simply
> >>>> not applicable.
> >>>> 
> >>>> I am proud to be part of OSGeo and I am keen to continue to contribute
> >>>> to
> >>>> the community in future. I admire and honor people like Frank or Evan
> >>>> and
> >>>> others. You have my true respect for what you do and what you have
> >>>> achieved!
> >>>> 
> >>>> Best regards,
> >>>> 
> >>>> Petr Pridal, Ph.D.
> >>>> Klokan Technologies GmbH
> >>>> 
> >>>> P.S.
> >>>> If anybody is interested in even more background of the evolution of
> >>>> MapTiler you can read:
> >>>> https://groups.google.com/d/msg/maptiler/r9Xa8S_S4Z8/7pJoqKR1MM0J
> >>>> 
> >>>> On Fri, Feb 6, 2015 at 9:24 PM, Cameron Shorter
> >>>> <cameron.shorter at gmail.com>
> >>>> 
> >>>> wrote:
> >>>>> I've had a request from the MapTiler project to have it removed from
> >>>>> OSGeo-Live.
> >>>>> 
> >>>>> I've raised a ticket:
> >>>>> https://trac.osgeo.org/osgeo/ticket/1467
> >>>>> 
> >>>>> I'll look after updating the docs.
> >>>>> 
> >>>>> --
> >>>>> Cameron Shorter,
> >>>>> Software and Data Solutions Manager
> >>>>> LISAsoft
> >>>>> Suite 112, Jones Bay Wharf,
> >>>>> 26 - 32 Pirrama Rd, Pyrmont NSW 2009
> >>>>> 
> >>>>> P +61 2 9009 5000,  W www.lisasoft.com,  F +61 2 9009 5099
> >>>>> 
> >>>>> _______________________________________________
> >>>>> Live-demo mailing list
> >>>>> Live-demo at lists.osgeo.org
> >>>>> http://lists.osgeo.org/mailman/listinfo/live-demo
> >>>>> http://live.osgeo.org
> >>>>> http://wiki.osgeo.org/wiki/Live_GIS_Disc
> >>> 
> >>> --
> >>> Spatialys - Geospatial professional services
> >>> http://www.spatialys.com
> >>> _______________________________________________
> >>> Incubator mailing list
> >>> Incubator at lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/incubator
> >> 
> >> _______________________________________________
> >> Incubator mailing list
> >> Incubator at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/incubator
> >> 
> >> 
> >> --
> >> Cameron Shorter,
> >> Software and Data Solutions Manager
> >> LISAsoft
> >> Suite 112, Jones Bay Wharf,
> >> 26 - 32 Pirrama Rd, Pyrmont NSW 2009
> >> 
> >> P +61 2 9009 5000,  W www.lisasoft.com,  F +61 2 9009 5099
> >> 
> >> 
> >> _______________________________________________
> >> Board mailing list
> >> Board at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/board

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Feb 13 04:25:39 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 13 Feb 2015 13:25:39 +0100
Subject: [gdal-dev] GDAL/OGR 1.11.2 RC2 Available for Review
In-Reply-To: <CACmBxysMZQTd6=uXVFhYYnNcofd2XpG2GypqLMo1p1aunLJBXw@mail.gmail.com>
References: <201502101330.11165.even.rouault@spatialys.com>
	<201502122123.33830.even.rouault@spatialys.com>
	<CACmBxysMZQTd6=uXVFhYYnNcofd2XpG2GypqLMo1p1aunLJBXw@mail.gmail.com>
Message-ID: <201502131325.39991.even.rouault@spatialys.com>

Le vendredi 13 f?vrier 2015 03:30:48, Kurt Schwehr a ?crit :
> I'll have to look into this more.
> 
> gdal_grid  --debug on -txe 440720.0 441920.0 -tye 3751320.0 3750120.0 \
> 
> >                  -outsize 20 20 -ot Float64 -l grid \
> >                 
> >                 -a
> 
> invdist:power=2.0:smoothing=0.0:radius1=0.0:radius2=0.0:angle=0.0:max_point
> s=0:min_points=0:nodata=0.0 data/grid.vrt out.tif
> OGR: OGROpen(data/grid.vrt/0x7f8c9be00240) succeeded as VRT.
> GDAL: GDALDriver::Create(GTiff,out.tif,20,20,1,Float64,0x0)
> OGR: OGROpen(data/grid.csv/0x7f8c9bc24350) succeeded as CSV.
> Grid data type is "Float64"
> Grid size = (20 20).
> Corner coordinates = (440690.000000 3750090.000000)-(441950.000000
> 3751350.000000).
> Grid cell size = (60.000000 -60.000000).
> Source point count = 400.
> Algorithm name: "invdist".
> Options are
> "power=2.000000:smoothing=0.000000:radius1=0.000000:radius2=0.000000:angle=
> 0.000000:max_points=0:min_points=0:nodata=0.000000"
> 
> GDAL_GRID: Work buffer: 20 * 20
> GDAL_GRID: Using AVX optimized version
> GDAL_GRID: Using 8 threads
> Segmentation fault: 11

Interesting... In trunk, I've added more verbose messages regarding 
test_gdal_grid_3.

The AVX implementation works on one of my Linux boxes. On the Travis-CI Mac 
instance, the AVX instruction set must not be available at runtime according 
to below traces:
"""
  TEST: test_gdal_grid_3 ... Step 1: Disabling AVX/SSE optimized versions...
Step 1: 2 threads used
Step 2: Trying SSE optimized version...
...SSE optimized version used
Step 3: Trying AVX optimized version...
...AVX optimized version NOT used
"""

The gdalgridavx.cpp file hasn't changed in a significant way in the 1.11 branch 
since GDAL 1.11.0 so it doesn't look like a regression introduced since.

> 
> 
> On Thu, Feb 12, 2015 at 12:23 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le jeudi 12 f?vrier 2015 20:54:42, Kurt Schwehr a ?crit :
> > > Here is the full output:
> > > 
> > > https://gist.github.com/schwehr/c9e9fb595d0370e7eff7
> > > 
> > > fink list -i libjpeg webp
> > > 
> > >  i   libjpeg-bin                   9a-2                   Executables
> > >  for
> > > 
> > > libjpeg package
> > > 
> > >  i   libjpeg9                      9a-2                   JPEG image
> > 
> > format
> > 
> > > handling library
> > > 
> > >  i   libjpeg9-shlibs               9a-2                   Shared
> > 
> > libraries
> > 
> > > for libjpeg package
> > > 
> > >  i   libwebp5                      0.4.0-1                Library for
> > > 
> > > manipulating WebP format
> > > 
> > >  i   libwebp5-shlibs               0.4.0-1                Library for
> > > 
> > > manipulating WebP format
> > > 
> > > And the details of test_gdal_grid_3:
> > > 
> > > ./test_gdal_grid.py
> > > 
> > >   TEST: test_gdal_grid_1 ... success
> > >   TEST: test_gdal_grid_2 ... success
> > >   TEST: test_gdal_grid_3 ... ERROR 4: `tmp/grid_invdist.tif' not
> > 
> > recognised
> > 
> > > as a supported file format.
> > > 
> > > fail (blowup)
> > > 
> > > Traceback (most recent call last):
> > >   File "../pymod/gdaltest_python2.py", line 42, in run_func
> > >   
> > >     result = func()
> > >   
> > >   File "./test_gdal_grid.py", line 273, in test_gdal_grid_3
> > >   
> > >     maxdiff = gdaltest.compare_ds(ds, ds_ref, verbose = 0)
> > >   
> > >   File "../pymod/gdaltest.py", line 1089, in compare_ds
> > >   
> > >     width = ds1.RasterXSize
> > > 
> > > AttributeError: 'NoneType' object has no attribute 'RasterXSize'
> > > 
> > >   TEST: test_gdal_grid_4 ... success
> > >   TEST: test_gdal_grid_5 ... success
> > >   TEST: test_gdal_grid_6 ... success
> > >   TEST: test_gdal_grid_7 ... success
> > >   TEST: test_gdal_grid_8 ... success
> > >   TEST: test_gdal_grid_9 ... success
> > >   TEST: test_gdal_grid_10 ... success
> > >   TEST: test_gdal_grid_cleanup ... ERROR 4: `tmp/grid_invdist.tif' not
> > > 
> > > recognised as a supported file format.
> > > 
> > > success
> > 
> > Kurt,
> > 
> > I'm wondering if it wouldn't be an issue with SSE / AVX optimizations.
> > 
> > Could you go into autotest/utilities and run manually the following ?
> > 
> > $ gdal_grid  --debug on -txe 440720.0 441920.0 -tye 3751320.0 3750120.0 \
> > 
> >                  -outsize 20 20 -ot Float64 -l grid \
> >                 
> >                 -a
> > 
> > invdist:power=2.0:smoothing=0.0:radius1=0.0:radius2=0.0:angle=0.0:max_poi
> > nts=0:min_points=0:nodata=0.0 data/grid.vrt out.tif
> > 
> > Here's what I get :
> > 
> > OGR: OGROpen(data/grid.vrt/0x2482e50) succeeded as VRT.
> > GDAL: GDALDriver::Create(GTiff,out.tif,20,20,1,Float64,(nil))
> > OGR: OGROpen(data/grid.csv/0x24844c0) succeeded as CSV.
> > Grid data type is "Float64"
> > Grid size = (20 20).
> > Corner coordinates = (440690.000000 3750090.000000)-(441950.000000
> > 3751350.000000).
> > Grid cell size = (60.000000 -60.000000).
> > Source point count = 400.
> > Algorithm name: "invdist".
> > Options are
> > "power=2.000000:smoothing=0.000000:radius1=0.000000:radius2=0.000000:angl
> > e=0.000000:max_points=0:min_points=0:nodata=0.000000"
> > 
> > GDAL_GRID: Work buffer: 20 * 20
> > GDAL_GRID: Using SSE optimized version
> > GDAL_GRID: Using 4 threads
> > 0...10...20...30...40...50...60...70...80...90...100 - done.
> > VRT: 400 features read on layer 'grid'.
> > CSV: 400 features read on layer 'grid'.
> > GDAL: GDALClose(out.tif, this=0x24baac0)
> > 
> > If you have issues, you can try adding "--config GDAL_USE_AVX NO" and/or
> > "--config GDAL_USE_SSE NO"
> > You can also play with the GDAL_NUM_THREADS configuration option.
> > 
> > Does this work with trunk ? There have been some changes by moving SSE
> > specifc code into a specific file.
> > 
> > Even
> > 
> > > Test Script: test_gdal_grid
> > > Succeeded: 10
> > > Failed:    1 (1 blew exceptions)
> > > Skipped:   0
> > > Expected fail:0
> > > Duration:  1.09s
> > > 
> > > file tmp/grid_invdist.tif
> > > tmp/grid_invdist.tif: empty
> > > 
> > > 
> > > On Wed, Feb 11, 2015 at 12:28 AM, Even Rouault <
> > 
> > even.rouault at spatialys.com>
> > 
> > > wrote:
> > > > Le mardi 10 f?vrier 2015 20:05:52, Kurt Schwehr a ?crit :
> > > > > I think it looks okay w.r.t. fink on mac osx 10.9.  autotest
> > > > > failures for anyone who is interested:
> > > > > https://gist.github.com/schwehr/757bae6bd28d9a7ffc4d
> > > > 
> > > > Kurt,
> > > > 
> > > > Some of the output traces that contain "fail" do not necessarily make
> > 
> > the
> > 
> > > > step
> > > > a failure, but should skip it. The error message and information
> > 
> > printed
> > 
> > > > and
> > > > line reported might be interesting.
> > > > Most must be due to a different version of the JPEG or webp lib that
> > 
> > must
> > 
> > > > produce slightly different results.
> > > > The exception stack associated with "TEST: test_gdal_grid_3 ... fail
> > > > (blowup)"
> > > > would be interesting
> > > > 
> > > > Even
> > > > 
> > > > > On Tue, Feb 10, 2015 at 4:30 AM, Even Rouault <
> > > > 
> > > > even.rouault at spatialys.com>
> > > > 
> > > > > wrote:
> > > > > > Hi,
> > > > > > 
> > > > > > I have prepared a second GDAL/OGR 1.11.2 release candidate, with
> > 
> > the
> > 
> > > > fix
> > > > 
> > > > > > for
> > > > > > the 1.11.0 regression in the PG driver identified yesterday
> > 
> > (#5837).
> > 
> > > > > > Please review and test.
> > > > > > 
> > > > > > Peek up an archive among the following ones (by ascending size):
> > > > > >   http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC2.tar.xz
> > > > > >   http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2RC2.tar.gz
> > > > > >   http://download.osgeo.org/gdal/1.11.2/gdal1112RC2.zip
> > > > > > 
> > > > > > The gdal-grass plugin archive hasn't been modified since RC1  :
> > > > > >   http://download.osgeo.org/gdal/1.11.2/gdal-grass-1.11.2.tar.gz
> > > > > > 
> > > > > > A snapshot of the gdalautotest suite is also available :
> > > > > >   http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.tar.g
> > > > > >   z http://download.osgeo.org/gdal/1.11.2/gdalautotest-1.11.2.zip
> > > > > > 
> > > > > > The NEWS file is here :
> > > > > >   http://trac.osgeo.org/gdal/wiki/Release/1.11.2-News
> > > > > > 
> > > > > > I'll call for a vote promoting it soon if no serious problems are
> > > > > > reported before.
> > > > > > 
> > > > > > Best regards,
> > > > > > 
> > > > > > Even
> > > > > > --
> > > > > > Spatialys - Geospatial professional services
> > > > > > http://www.spatialys.com
> > > > > > _______________________________________________
> > > > > > gdal-dev mailing list
> > > > > > gdal-dev at lists.osgeo.org
> > > > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > > 
> > > > --
> > > > Spatialys - Geospatial professional services
> > > > http://www.spatialys.com
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gcpp.kalxas at gmail.com  Fri Feb 13 04:54:09 2015
From: gcpp.kalxas at gmail.com (Angelos Tzotsos)
Date: Fri, 13 Feb 2015 14:54:09 +0200
Subject: [gdal-dev] [Live-demo] [Board] Retire MapTiler from OSGeo-Live
In-Reply-To: <201502131305.40325.even.rouault@spatialys.com>
References: <54D5230A.7000500@gmail.com>	<CACqBkM_AHkWccH94u=toemjM0GV7KpqABve0eoRBh-2h=E2U3A@mail.gmail.com>	<54DDB38E.3030509@gmail.com>
	<201502131305.40325.even.rouault@spatialys.com>
Message-ID: <54DDF3F1.4010103@gmail.com>

Hi Even,


On 02/13/2015 02:05 PM, Even Rouault wrote:
> Hi,
>
> (adding gdal-dev in CC as it is of interest)
>
> As far as I understand (but I may be wrong as I haven't looked deeply at the
> code), maptiler (the open source project) consists of an improved
> gdal2tiles.py + a python gui.
> The duplication between gdal2tiles.py in maptiler and GDAL isn't something
> particularly great. Ideally there should be one single version maintained in
> the OSGeo ecosystem.
>
> So there are several possibilities I can imagine :
>
> 1) Merge maptiler's gdal2tiles enhancements into GDAL version, and make
> maptiler just a GUI over it
>
> 2) Merge maptiler's gdal2tiles enhancements into GDAL version, and also import
> the GUI (I think it is lightweight) if there's no too strong build
> complications involved for GDAL. Would have to be checked
>
> 3) Remove gdal2tiles from GDAL so that the reborne maptiler is the reference.
> But there are perhaps fixes in GDAL gdal2tiles that should be merged into
> maptiler one (Python3 compatibility comes to mind)
>
> Any option would need someone to champion it of course...

IMO, the third option should not be considered at all, since gdal2tiles 
is very important tool in gdal and many people (including me) prefer the 
script from any GUI out there. I have also seen an improved version of 
this script dealing with multiple threads.

My preference would be option 1.

Just my 2c :)
> Even
>
>
>> Hi Eli, replying to your email, CC OSGeo-Live list (with your permission).
>>
>> I agree that we don't want to be promoting a proprietary product from an
>> Open Source page.
>>
>> I suspect Angelos' subsequent email partially addresses your suggestions:
>>
>> On 13/02/2015 10:47 am, Angelos Tzotsos wrote:
>>> We have also discussed that in order to remove the project, we request
>>> that there is an official source code repository to link to. This way
>>> we can prove that the project was open source and can be forked in the
>>> future. Unfortunately the main repository of the project was recently
>>> deleted.
>>> Without this, one can have the impression that OSGeoLive and OSGeo has
>>> endorsed and distributed proprietary software.
>>>
>>> Also we plan to introduce IceTiler in the next version of OSGeoLive.
>> For this OSGeo-Live release we will do what we can achieve within the
>> time available.
>>
>> On 13/02/2015 11:58 am, Eli Adam wrote:
>>> Hi Cameron,
>>>
>>> I know that timeline is as big of a challenge as anything else in this
>>> case.  I have a marketing/presentation question for you below.
>>>
>>> On Thu, Feb 12, 2015 at 2:23 PM, Cameron Shorter
>>>
>>> <cameron.shorter at gmail.com> wrote:
>>>> Hi Petr, OSGeo-Live team, OSGeo Board,
>>>> Is our OSGeoLive meeting, we discussed retiring of MapTiler from
>>>> OSGeoLive. CCing OSGeo Board in discussion, in case the board wish to
>>>> comment.
>>>>
>>>> Summary:
>>>> * MapTiler was Open Source, and was included in prior OSGeo-Live
>>>> distributions
>>>> * Petr, the author, found the Open Source business model was not working
>>>> for him, and has since moved future enhancements to a proprietary
>>>> model. * The "maptiler" brand name now points to a URL of a proprietary
>>>> product. * Petr has requested MapTiler be removed from OSGeo-Live.
>>>> * As far as I've noticed, while there has been some disappointment to
>>>> loose MapTiler as an Open Source project, we respect Petr's right to
>>>> continue development using whatever model works for him. We are now
>>>> working out how to cleanly transition.
>>>>
>>>> Of note:
>>>> * We have prior OSGeo-Live releases and documentation which reference
>>>> the previous Open Source Maptiler.
>>>> * OSGeo-Live wish to retain our reputation of promoting Open Source
>>>> products, both now, and in the past.
>>>>
>>>> Proposal for our imminent OSGeo-Live 8.5 release:
>>>> * OSGeoLive will add a statement to our contents page [1] stating:
>>>> "Maptiler: not included after OSGeo-Live 8.0, after project moved to
>>>> proprietary business model"
>> On 13/02/2015 11:58 am, Eli Adam wrote:
>>> This seems odd to reference proprietary software at all.  The contents
>>> page [1] is a wonderful showcase of *open source* software.  Why
>>> include an advertisement to go look for a proprietary software that
>>> started as open source?  Linking to the last open source code with no
>>> name makes more sense to me (I know that isn't possible unless we put
>>> the code somewhere).  Or linking to http://gdal.org/gdal2tiles.html
>>> which has some similar functionality and common ancestry.  Looks like
>>> maybe licenses have varied in different points in time from different
>>> sources too.  On the short timeline, there is no fork and no name to
>>> link to yet.  If there were a fork and name would you list and link
>>> that?  If so would you list or link "MapTiler" too?
>>>
>>> You could link (or save all the information from),
>>> https://web.archive.org/web/20131216172514/http://www.maptiler.org/
>>> The Google Code SVN repo is also accessible through that method.  It
>>> appears that google code svn still works, for instance, svn checkout
>>> http://maptiler.googlecode.com/svn/trunk/ maptiler-read-only
>>>
>>> I'm sure that you'll work it out fine but just wanted you to think
>>> about the appearance of that list of *open source* software.  How do
>>> you want the main list of open source geo software to appear?  I think
>>> that should be the primary purpose (and fits with the OSGeo Live
>>> project goals).
>>>
>>> Best regards, Eli
>>>
>>>> * The Maptiler Project Overview [2] will be updated to explain that
>>>> MapTiler was Open Source, but future developments were proprietary. The
>>>> Overview will reference the last Open Source version of software
>>>> available.
>>>> * The Maptiler Quickstart will be removed from docs, (but still
>>>> available in subversion)
>>>> * The maptiler installer will be disabled so MapTiler will not be
>>>> distributed on OSGeo-Live.
>>>>
>>>> If anyone has objections or comments, please raise them within 48 hours
>>>> (15 Feb 2015) such that we can address them before our release.
>>>>
>>>> Most (not all) of the history on this conversation has been copied
>>>> below.
>>>>
>>>> [1] http://live.osgeo.org/en/overview/overview.html
>>>> [2] http://live.osgeo.org/en/overview/maptiler_overview.html
>>>>
>>>> On 13/02/2015 4:29 am, Angelos Tzotsos wrote:
>>>>
>>>> Hi all,
>>>>
>>>> I definitely agree here with Howard.
>>>>
>>>> Since Maptiler has been included in OSGeoLive for 5 years now, and Petr
>>>> has agreed to follow the OSGeoLive license for his contribution, there
>>>> has to be some kind of lineage about this project online. It cannot
>>>> just disappear. People would think that OSGeo endorced non-free
>>>> software in the past, which is not acceptable in my opinion.
>>>>
>>>> We need an "official" public repository including the last version of
>>>> the open source code to link to. We should then link to that in our
>>>> documents (even if the project is removed). Cameron has already moved
>>>> the documents in the "retired" area.
>>>>
>>>> I agree that the Maptiler name has to be removed from OSGeoLive in
>>>> future versions. But, the request for removal came much after our
>>>> official 8.5 code freeze, so I am against removing stuff from 8.5
>>>> especially 10 days before release.
>>>> I propose we keep the installer for 8.5 (unless Petr provides a new deb
>>>> version with a new name).
>>>> I also propose to remove the Maptiler documents completely for this
>>>> release.
>>>>
>>>> Then, as Johan suggested we can fork Maptiler as Icetiler for the next
>>>> OSGeoLive 9.0 release and restore the docs.
>>>>
>>>> Best,
>>>> Angelos
>>>>
>>>> PS. I also want to thank Petr for his work on Maptiler, it is much
>>>> appreciated.
>>>>
>>>> On 02/09/2015 11:46 AM, Johan Van de Wauw wrote:
>>>>
>>>> Hi all,
>>>>
>>>> First of all I would like to thank Petr for his work on Maptiler. He
>>>> has actually spent a lot of unpaid time to develop a tool which is
>>>> useful for many users.
>>>> Earning a living from open-source is hard - as most people who have
>>>> tried will be able to tell you.
>>>>
>>>> Second I would like to point out that a project that has many users
>>>> and little contributors is not necessarily unsuccessful.  If your tool
>>>> is working well, it may not scratch a developers itch[1].
>>>>
>>>> Anyway, it seems that by retiring from OsGeo live you did hit many
>>>> developers itch, so it seems this may actually be a rebirth of the
>>>> project.
>>>>
>>>> I think that the request of Petr is fair: the code remains free (which
>>>> it should, because there can be many derived works), but he just
>>>> requests not to use the name and logo. This leaves room for other
>>>> developers to jump in and create a new version. Yesterday on IRC, I
>>>> proposed the name "IceTiler" as an alternative, based on the
>>>> rebranding done by debian for many mozilla projects [2]. Other
>>>> suggestions are welcome :-)
>>>>
>>>> Taking all into account I'm +1 on removing this project from OsGeo
>>>> live in the current form, but I think we could have "IceTiler" in a
>>>> next release if there is sufficient interest.
>>>>
>>>> Kind Regards,
>>>> Johan
>>>>
>>>> [1] http://en.wikipedia.org/wiki/The_Cathedral_and_the_Bazaar
>>>> [2]
>>>> http://en.wikipedia.org/wiki/Mozilla_Corporation_software_rebranded_by_t
>>>> he_Debian_project _______________________________________________
>>>> Live-demo mailing list
>>>> Live-demo at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/live-demo
>>>> http://live.osgeo.org
>>>> http://wiki.osgeo.org/wiki/Live_GIS_Disc
>>>> .
>>>>
>>>>
>>>>
>>>>
>>>> On 9/02/2015 12:09 pm, Jody Garnett wrote:
>>>>
>>>> Trademarks is one of those issues we tend to handle off-list with mentor
>>>> and project  leadership (and/or the board if required).
>>>>
>>>> In this case the author and trademark owner in one in the same (and has
>>>> a fairly clear request).
>>>>
>>>> My limited understanding is the board will need to care about trademarks
>>>> in source code that has been contributed to OSGe (which is not a
>>>> requirement of participation). I expect they will only need to care in
>>>> the US (since that is where the organization is based) but that is up
>>>> to legal council, IANAL etc...
>>>>
>>>> It is relatively common for open source projects to be renamed due to TM
>>>> conflict. This is a service a software foundation can provide, apache
>>>> has strict management of trademarks, eclipse does a trademark check
>>>> prior to accepting a project into incubation etc... But it is not clear
>>>> cut - Debian for example refuses to include firefox as that name is
>>>> trademarked (and not "free" and reusable ),
>>>>
>>>> --
>>>> Jody Garnett
>>>>
>>>> On 7 February 2015 at 17:03, Even Rouault <even.rouault at spatialys.com>
>>>>
>>>> wrote:
>>>>> Hi,
>>>>>
>>>>> (adding incubator@ as it is both of interest I think for OSGeo-Live &
>>>>> incubator)
>>>>>
>>>>> I will not argue about this particular case, but this does raise an
>>>>> interesting question about how we should handle trademark issues
>>>>> (perhaps this
>>>>> has been discussed in the past, so sorry if I come after the battle)
>>>>>
>>>>> The OSGeo incubation application questionnaire
>>>>> http://www.osgeo.org/incubator/process/application.html mentions:
>>>>> "Is the code free of patents, trademarks, and do you control the
>>>>> copyright? "
>>>>>
>>>>> It does not address clearly the issue of trademark of the *name of the
>>>>> project* (it mentions just the *code*).
>>>>> I'm not sure if there should be a policy regarding ownership of the
>>>>> trademark
>>>>> of the name of a project, but at least it could be asked if there's a
>>>>> trademark on the name, and who owns it (and in which countries...) ? As
>>>>> the
>>>>> below example shows, this can have impact on the future of the project.
>>>>> But
>>>>> this is likely complex.
>>>>> - What if someone from a random country comes and says "eh this project
>>>>> conflicts with my trademark in Foobarland" ? Which countries should
>>>>> OSGeo care
>>>>> about ? Or perhaps this is too complex and the only real answer to
>>>>> those questions is when you are assigned to a court ;-)
>>>>> - And even if the trademark is owned by someone/an entity which is
>>>>> strongly
>>>>> related to the project, things can evolve over time. So shouldn't the
>>>>> trademark be transfered to OSGeo control to guarantee fairness of use ?
>>>>> But
>>>>> that would mean that OSGeo would have to pay the costs of registration.
>>>>>
>>>>> For the record, I did the exercice of quick searching which OSGeo
>>>>> projects are
>>>>> trademarked in France ( http://bases-marques.inpi.fr/ ) and it *seems*
>>>>> (only a
>>>>> search by a specialist in I.P would confirm it) that only QGIS and
>>>>> GeoMajas are
>>>>> (and both have E.U. wide validity). (There are unrelated matches for
>>>>> Geotools,
>>>>> Marble and OSSIM). OSGeo itself isn't trademarked. And apparently
>>>>> MapTiler neither.
>>>>>
>>>>> In the incubating projects, gvSIG is trademarked (E.U wide). Unrelated
>>>>> matches
>>>>> for "the zoo project" and OTB.  Rasdaman is registered in Germany.
>>>>>
>>>>> Even
>>>>>
>>>>>> Hi everybody,
>>>>>>
>>>>>> Let me clarify the situation:
>>>>>>
>>>>>> - The original MapTiler (python + wxWidgets) is discontinued and
>>>>>> unfortunately it failed as an open-source project in my eyes. The
>>>>>> software
>>>>>> attracted quite a lot of end users, but no 3rd party developers. There
>>>>>> was
>>>>>> not a single commit from any third-party ever to the MapTiler project
>>>>>> code
>>>>>> itself, probably because the graphical utility was used mostly by
>>>>>> non-programmers. The otherwise great project stalled for some time. I
>>>>>> have
>>>>>> not seen how to move it forward without any financial support, while
>>>>>> not being a student anymore - and it made me really sad.
>>>>>>
>>>>>> - Since 2011, I work with my team on a completely new implementation
>>>>>> of an
>>>>>> efficient tiling utility, the new MapTiler usable both from the
>>>>>> command-line as well as from the graphical user interface, written in
>>>>>> C++
>>>>>> and QT. It is significantly faster, merges multiple files in different
>>>>>> srs,
>>>>>> handles correctly dateline crossing and world maps, tiles in
>>>>>> non-mercator
>>>>>> grids, it directly produces small and optimized jpg and pngs, it is
>>>>>> compatible with OGC WMTS, contains uploader to Amazon S3 and Google
>>>>>> Cloud
>>>>>> Storage, supports different layers on different zoom levels (see
>>>>>> http://goo.gl/TCrGtQ and other tutorials), and it comes with many
>>>>>> other new
>>>>>> features, with installers, regular updates, support and maintenance.
>>>>>> It runs on Win/Lin/Mac - see http://www.maptiler.com/ for more
>>>>>> information. With my colleagues we are trying to do our job as good
>>>>>> as we can. It is a complete rewrite of the original utility, fixing
>>>>>> design flaws and
>>>>>> implementation issues of both GDAL2Tiles and original MapTiler. To be
>>>>>> able
>>>>>> to support the utility and to work on new features we ask for a
>>>>>> license fee.
>>>>>>
>>>>>> - There was no financial support from Google Summer of Code nor from
>>>>>> OSGeo
>>>>>> on the original MapTiler.
>>>>>>
>>>>>> -  Both my Google SoC in 2007 and 2008 were on the GDAL2TIles
>>>>>> command-line
>>>>>> utility, lead by Howard.
>>>>>> My original GDAL2Tiles from 2007 is available at
>>>>>> http://www.klokan.cz/projects/gdal2tiles/ and the version from 2008 is
>>>>>> distributed together with GDAL library, with patches and some fixes,
>>>>>> mostly
>>>>>> from Evan.
>>>>>> As Even pointed out - I started to work on the MapTiler during August
>>>>>> 2008,
>>>>>> after the second SoC. BRGM mentioned in the code of GDAL2Tiles.py
>>>>>> supported
>>>>>> improvements of GDAL2Tiles, not MapTiler project.
>>>>>>
>>>>>> - As the sole author of MapTiler and the owner of the MapTiler
>>>>>> trademark I
>>>>>> would like to request complete removal of the MapTiler from the OSGeo
>>>>>> LiveDVD. I have prepared the existing .deb package as well as supplied
>>>>>> the
>>>>>> quickstart and installation scripts to the svn about 5 years back.
>>>>>>
>>>>>> - If anybody is interested to revive my original open-source project
>>>>>> published under an open-source license, he is welcomed to do that -
>>>>>> under
>>>>>> the conditions of the original license, while preserving the original
>>>>>> copyright notice, and under the condition his fork of the project is
>>>>>> not anymore called MapTiler and does not use original graphical
>>>>>> elements and desktop icon of the original application.
>>>>>>
>>>>>> - The existence of the two projects of the same name is confusing the
>>>>>> people and I want to avoid it. I hope you respect my decision. The old
>>>>>> MapTiler is dead, long live the MapTiler! ;-)
>>>>>>
>>>>>> - I continue to work on several other open-source projects and with my
>>>>>> team
>>>>>> I keep developing, contributing and improving on OL3Cesium, OpenLayers
>>>>>> V3,
>>>>>> WebGL Earth, EPSG.io, IIPImage, GDAL and other projects. See our
>>>>>> github and
>>>>>> blog for details: http://www.klokantech.com/.
>>>>>> Open-source is indeed very powerful and viable on components and I
>>>>>> can't imagine to live without it. Still, there are situations, where
>>>>>> it is simply
>>>>>> not applicable.
>>>>>>
>>>>>> I am proud to be part of OSGeo and I am keen to continue to contribute
>>>>>> to
>>>>>> the community in future. I admire and honor people like Frank or Evan
>>>>>> and
>>>>>> others. You have my true respect for what you do and what you have
>>>>>> achieved!
>>>>>>
>>>>>> Best regards,
>>>>>>
>>>>>> Petr Pridal, Ph.D.
>>>>>> Klokan Technologies GmbH
>>>>>>
>>>>>> P.S.
>>>>>> If anybody is interested in even more background of the evolution of
>>>>>> MapTiler you can read:
>>>>>> https://groups.google.com/d/msg/maptiler/r9Xa8S_S4Z8/7pJoqKR1MM0J
>>>>>>
>>>>>> On Fri, Feb 6, 2015 at 9:24 PM, Cameron Shorter
>>>>>> <cameron.shorter at gmail.com>
>>>>>>
>>>>>> wrote:
>>>>>>> I've had a request from the MapTiler project to have it removed from
>>>>>>> OSGeo-Live.
>>>>>>>
>>>>>>> I've raised a ticket:
>>>>>>> https://trac.osgeo.org/osgeo/ticket/1467
>>>>>>>
>>>>>>> I'll look after updating the docs.
>>>>>>>
>>>>>>> --
>>>>>>> Cameron Shorter,
>>>>>>> Software and Data Solutions Manager
>>>>>>> LISAsoft
>>>>>>> Suite 112, Jones Bay Wharf,
>>>>>>> 26 - 32 Pirrama Rd, Pyrmont NSW 2009
>>>>>>>
>>>>>>> P +61 2 9009 5000,  W www.lisasoft.com,  F +61 2 9009 5099
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> Live-demo mailing list
>>>>>>> Live-demo at lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/live-demo
>>>>>>> http://live.osgeo.org
>>>>>>> http://wiki.osgeo.org/wiki/Live_GIS_Disc
>>>>> --
>>>>> Spatialys - Geospatial professional services
>>>>> http://www.spatialys.com
>>>>> _______________________________________________
>>>>> Incubator mailing list
>>>>> Incubator at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/incubator
>>>> _______________________________________________
>>>> Incubator mailing list
>>>> Incubator at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/incubator
>>>>
>>>>
>>>> --
>>>> Cameron Shorter,
>>>> Software and Data Solutions Manager
>>>> LISAsoft
>>>> Suite 112, Jones Bay Wharf,
>>>> 26 - 32 Pirrama Rd, Pyrmont NSW 2009
>>>>
>>>> P +61 2 9009 5000,  W www.lisasoft.com,  F +61 2 9009 5099
>>>>
>>>>
>>>> _______________________________________________
>>>> Board mailing list
>>>> Board at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/board


-- 
Angelos Tzotsos
Remote Sensing Laboratory
National Technical University of Athens
http://users.ntua.gr/tzotsos


From bishop.dev at gmail.com  Fri Feb 13 05:18:52 2015
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Fri, 13 Feb 2015 16:18:52 +0300
Subject: [gdal-dev] [Live-demo] [Board] Retire MapTiler from OSGeo-Live
In-Reply-To: <54DDF3F1.4010103@gmail.com>
References: <54D5230A.7000500@gmail.com>	<CACqBkM_AHkWccH94u=toemjM0GV7KpqABve0eoRBh-2h=E2U3A@mail.gmail.com>	<54DDB38E.3030509@gmail.com>	<201502131305.40325.even.rouault@spatialys.com>
	<54DDF3F1.4010103@gmail.com>
Message-ID: <54DDF9BC.9090400@gmail.com>

I agreed with Angelos.
My +1

Best regards,
     Dmitry

13.02.2015 15:54, Angelos Tzotsos ?????:
> Hi Even,
>
>
> On 02/13/2015 02:05 PM, Even Rouault wrote:
>> Hi,
>>
>> (adding gdal-dev in CC as it is of interest)
>>
>> As far as I understand (but I may be wrong as I haven't looked deeply 
>> at the
>> code), maptiler (the open source project) consists of an improved
>> gdal2tiles.py + a python gui.
>> The duplication between gdal2tiles.py in maptiler and GDAL isn't 
>> something
>> particularly great. Ideally there should be one single version 
>> maintained in
>> the OSGeo ecosystem.
>>
>> So there are several possibilities I can imagine :
>>
>> 1) Merge maptiler's gdal2tiles enhancements into GDAL version, and make
>> maptiler just a GUI over it
>>
>> 2) Merge maptiler's gdal2tiles enhancements into GDAL version, and 
>> also import
>> the GUI (I think it is lightweight) if there's no too strong build
>> complications involved for GDAL. Would have to be checked
>>
>> 3) Remove gdal2tiles from GDAL so that the reborne maptiler is the 
>> reference.
>> But there are perhaps fixes in GDAL gdal2tiles that should be merged 
>> into
>> maptiler one (Python3 compatibility comes to mind)
>>
>> Any option would need someone to champion it of course...
>
> IMO, the third option should not be considered at all, since 
> gdal2tiles is very important tool in gdal and many people (including 
> me) prefer the script from any GUI out there. I have also seen an 
> improved version of this script dealing with multiple threads.
>
> My preference would be option 1.
>
> Just my 2c :)
>> Even
>>
>>
>>> Hi Eli, replying to your email, CC OSGeo-Live list (with your 
>>> permission).
>>>
>>> I agree that we don't want to be promoting a proprietary product 
>>> from an
>>> Open Source page.
>>>
>>> I suspect Angelos' subsequent email partially addresses your 
>>> suggestions:
>>>
>>> On 13/02/2015 10:47 am, Angelos Tzotsos wrote:
>>>> We have also discussed that in order to remove the project, we request
>>>> that there is an official source code repository to link to. This way
>>>> we can prove that the project was open source and can be forked in the
>>>> future. Unfortunately the main repository of the project was recently
>>>> deleted.
>>>> Without this, one can have the impression that OSGeoLive and OSGeo has
>>>> endorsed and distributed proprietary software.
>>>>
>>>> Also we plan to introduce IceTiler in the next version of OSGeoLive.
>>> For this OSGeo-Live release we will do what we can achieve within the
>>> time available.
>>>
>>> On 13/02/2015 11:58 am, Eli Adam wrote:
>>>> Hi Cameron,
>>>>
>>>> I know that timeline is as big of a challenge as anything else in this
>>>> case.  I have a marketing/presentation question for you below.
>>>>
>>>> On Thu, Feb 12, 2015 at 2:23 PM, Cameron Shorter
>>>>
>>>> <cameron.shorter at gmail.com> wrote:
>>>>> Hi Petr, OSGeo-Live team, OSGeo Board,
>>>>> Is our OSGeoLive meeting, we discussed retiring of MapTiler from
>>>>> OSGeoLive. CCing OSGeo Board in discussion, in case the board wish to
>>>>> comment.
>>>>>
>>>>> Summary:
>>>>> * MapTiler was Open Source, and was included in prior OSGeo-Live
>>>>> distributions
>>>>> * Petr, the author, found the Open Source business model was not 
>>>>> working
>>>>> for him, and has since moved future enhancements to a proprietary
>>>>> model. * The "maptiler" brand name now points to a URL of a 
>>>>> proprietary
>>>>> product. * Petr has requested MapTiler be removed from OSGeo-Live.
>>>>> * As far as I've noticed, while there has been some disappointment to
>>>>> loose MapTiler as an Open Source project, we respect Petr's right to
>>>>> continue development using whatever model works for him. We are now
>>>>> working out how to cleanly transition.
>>>>>
>>>>> Of note:
>>>>> * We have prior OSGeo-Live releases and documentation which reference
>>>>> the previous Open Source Maptiler.
>>>>> * OSGeo-Live wish to retain our reputation of promoting Open Source
>>>>> products, both now, and in the past.
>>>>>
>>>>> Proposal for our imminent OSGeo-Live 8.5 release:
>>>>> * OSGeoLive will add a statement to our contents page [1] stating:
>>>>> "Maptiler: not included after OSGeo-Live 8.0, after project moved to
>>>>> proprietary business model"
>>> On 13/02/2015 11:58 am, Eli Adam wrote:
>>>> This seems odd to reference proprietary software at all.  The contents
>>>> page [1] is a wonderful showcase of *open source* software. Why
>>>> include an advertisement to go look for a proprietary software that
>>>> started as open source?  Linking to the last open source code with no
>>>> name makes more sense to me (I know that isn't possible unless we put
>>>> the code somewhere).  Or linking to http://gdal.org/gdal2tiles.html
>>>> which has some similar functionality and common ancestry. Looks like
>>>> maybe licenses have varied in different points in time from different
>>>> sources too.  On the short timeline, there is no fork and no name to
>>>> link to yet.  If there were a fork and name would you list and link
>>>> that?  If so would you list or link "MapTiler" too?
>>>>
>>>> You could link (or save all the information from),
>>>> https://web.archive.org/web/20131216172514/http://www.maptiler.org/
>>>> The Google Code SVN repo is also accessible through that method.  It
>>>> appears that google code svn still works, for instance, svn checkout
>>>> http://maptiler.googlecode.com/svn/trunk/ maptiler-read-only
>>>>
>>>> I'm sure that you'll work it out fine but just wanted you to think
>>>> about the appearance of that list of *open source* software.  How do
>>>> you want the main list of open source geo software to appear?  I think
>>>> that should be the primary purpose (and fits with the OSGeo Live
>>>> project goals).
>>>>
>>>> Best regards, Eli
>>>>
>>>>> * The Maptiler Project Overview [2] will be updated to explain that
>>>>> MapTiler was Open Source, but future developments were 
>>>>> proprietary. The
>>>>> Overview will reference the last Open Source version of software
>>>>> available.
>>>>> * The Maptiler Quickstart will be removed from docs, (but still
>>>>> available in subversion)
>>>>> * The maptiler installer will be disabled so MapTiler will not be
>>>>> distributed on OSGeo-Live.
>>>>>
>>>>> If anyone has objections or comments, please raise them within 48 
>>>>> hours
>>>>> (15 Feb 2015) such that we can address them before our release.
>>>>>
>>>>> Most (not all) of the history on this conversation has been copied
>>>>> below.
>>>>>
>>>>> [1] http://live.osgeo.org/en/overview/overview.html
>>>>> [2] http://live.osgeo.org/en/overview/maptiler_overview.html
>>>>>
>>>>> On 13/02/2015 4:29 am, Angelos Tzotsos wrote:
>>>>>
>>>>> Hi all,
>>>>>
>>>>> I definitely agree here with Howard.
>>>>>
>>>>> Since Maptiler has been included in OSGeoLive for 5 years now, and 
>>>>> Petr
>>>>> has agreed to follow the OSGeoLive license for his contribution, 
>>>>> there
>>>>> has to be some kind of lineage about this project online. It cannot
>>>>> just disappear. People would think that OSGeo endorced non-free
>>>>> software in the past, which is not acceptable in my opinion.
>>>>>
>>>>> We need an "official" public repository including the last version of
>>>>> the open source code to link to. We should then link to that in our
>>>>> documents (even if the project is removed). Cameron has already moved
>>>>> the documents in the "retired" area.
>>>>>
>>>>> I agree that the Maptiler name has to be removed from OSGeoLive in
>>>>> future versions. But, the request for removal came much after our
>>>>> official 8.5 code freeze, so I am against removing stuff from 8.5
>>>>> especially 10 days before release.
>>>>> I propose we keep the installer for 8.5 (unless Petr provides a 
>>>>> new deb
>>>>> version with a new name).
>>>>> I also propose to remove the Maptiler documents completely for this
>>>>> release.
>>>>>
>>>>> Then, as Johan suggested we can fork Maptiler as Icetiler for the 
>>>>> next
>>>>> OSGeoLive 9.0 release and restore the docs.
>>>>>
>>>>> Best,
>>>>> Angelos
>>>>>
>>>>> PS. I also want to thank Petr for his work on Maptiler, it is much
>>>>> appreciated.
>>>>>
>>>>> On 02/09/2015 11:46 AM, Johan Van de Wauw wrote:
>>>>>
>>>>> Hi all,
>>>>>
>>>>> First of all I would like to thank Petr for his work on Maptiler. He
>>>>> has actually spent a lot of unpaid time to develop a tool which is
>>>>> useful for many users.
>>>>> Earning a living from open-source is hard - as most people who have
>>>>> tried will be able to tell you.
>>>>>
>>>>> Second I would like to point out that a project that has many users
>>>>> and little contributors is not necessarily unsuccessful. If your tool
>>>>> is working well, it may not scratch a developers itch[1].
>>>>>
>>>>> Anyway, it seems that by retiring from OsGeo live you did hit many
>>>>> developers itch, so it seems this may actually be a rebirth of the
>>>>> project.
>>>>>
>>>>> I think that the request of Petr is fair: the code remains free 
>>>>> (which
>>>>> it should, because there can be many derived works), but he just
>>>>> requests not to use the name and logo. This leaves room for other
>>>>> developers to jump in and create a new version. Yesterday on IRC, I
>>>>> proposed the name "IceTiler" as an alternative, based on the
>>>>> rebranding done by debian for many mozilla projects [2]. Other
>>>>> suggestions are welcome :-)
>>>>>
>>>>> Taking all into account I'm +1 on removing this project from OsGeo
>>>>> live in the current form, but I think we could have "IceTiler" in a
>>>>> next release if there is sufficient interest.
>>>>>
>>>>> Kind Regards,
>>>>> Johan
>>>>>
>>>>> [1] http://en.wikipedia.org/wiki/The_Cathedral_and_the_Bazaar
>>>>> [2]
>>>>> http://en.wikipedia.org/wiki/Mozilla_Corporation_software_rebranded_by_t 
>>>>>
>>>>> he_Debian_project _______________________________________________
>>>>> Live-demo mailing list
>>>>> Live-demo at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/live-demo
>>>>> http://live.osgeo.org
>>>>> http://wiki.osgeo.org/wiki/Live_GIS_Disc
>>>>> .
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> On 9/02/2015 12:09 pm, Jody Garnett wrote:
>>>>>
>>>>> Trademarks is one of those issues we tend to handle off-list with 
>>>>> mentor
>>>>> and project  leadership (and/or the board if required).
>>>>>
>>>>> In this case the author and trademark owner in one in the same 
>>>>> (and has
>>>>> a fairly clear request).
>>>>>
>>>>> My limited understanding is the board will need to care about 
>>>>> trademarks
>>>>> in source code that has been contributed to OSGe (which is not a
>>>>> requirement of participation). I expect they will only need to 
>>>>> care in
>>>>> the US (since that is where the organization is based) but that is up
>>>>> to legal council, IANAL etc...
>>>>>
>>>>> It is relatively common for open source projects to be renamed due 
>>>>> to TM
>>>>> conflict. This is a service a software foundation can provide, apache
>>>>> has strict management of trademarks, eclipse does a trademark check
>>>>> prior to accepting a project into incubation etc... But it is not 
>>>>> clear
>>>>> cut - Debian for example refuses to include firefox as that name is
>>>>> trademarked (and not "free" and reusable ),
>>>>>
>>>>> -- 
>>>>> Jody Garnett
>>>>>
>>>>> On 7 February 2015 at 17:03, Even Rouault 
>>>>> <even.rouault at spatialys.com>
>>>>>
>>>>> wrote:
>>>>>> Hi,
>>>>>>
>>>>>> (adding incubator@ as it is both of interest I think for 
>>>>>> OSGeo-Live &
>>>>>> incubator)
>>>>>>
>>>>>> I will not argue about this particular case, but this does raise an
>>>>>> interesting question about how we should handle trademark issues
>>>>>> (perhaps this
>>>>>> has been discussed in the past, so sorry if I come after the battle)
>>>>>>
>>>>>> The OSGeo incubation application questionnaire
>>>>>> http://www.osgeo.org/incubator/process/application.html mentions:
>>>>>> "Is the code free of patents, trademarks, and do you control the
>>>>>> copyright? "
>>>>>>
>>>>>> It does not address clearly the issue of trademark of the *name 
>>>>>> of the
>>>>>> project* (it mentions just the *code*).
>>>>>> I'm not sure if there should be a policy regarding ownership of the
>>>>>> trademark
>>>>>> of the name of a project, but at least it could be asked if 
>>>>>> there's a
>>>>>> trademark on the name, and who owns it (and in which 
>>>>>> countries...) ? As
>>>>>> the
>>>>>> below example shows, this can have impact on the future of the 
>>>>>> project.
>>>>>> But
>>>>>> this is likely complex.
>>>>>> - What if someone from a random country comes and says "eh this 
>>>>>> project
>>>>>> conflicts with my trademark in Foobarland" ? Which countries should
>>>>>> OSGeo care
>>>>>> about ? Or perhaps this is too complex and the only real answer to
>>>>>> those questions is when you are assigned to a court ;-)
>>>>>> - And even if the trademark is owned by someone/an entity which is
>>>>>> strongly
>>>>>> related to the project, things can evolve over time. So shouldn't 
>>>>>> the
>>>>>> trademark be transfered to OSGeo control to guarantee fairness of 
>>>>>> use ?
>>>>>> But
>>>>>> that would mean that OSGeo would have to pay the costs of 
>>>>>> registration.
>>>>>>
>>>>>> For the record, I did the exercice of quick searching which OSGeo
>>>>>> projects are
>>>>>> trademarked in France ( http://bases-marques.inpi.fr/ ) and it 
>>>>>> *seems*
>>>>>> (only a
>>>>>> search by a specialist in I.P would confirm it) that only QGIS and
>>>>>> GeoMajas are
>>>>>> (and both have E.U. wide validity). (There are unrelated matches for
>>>>>> Geotools,
>>>>>> Marble and OSSIM). OSGeo itself isn't trademarked. And apparently
>>>>>> MapTiler neither.
>>>>>>
>>>>>> In the incubating projects, gvSIG is trademarked (E.U wide). 
>>>>>> Unrelated
>>>>>> matches
>>>>>> for "the zoo project" and OTB.  Rasdaman is registered in Germany.
>>>>>>
>>>>>> Even
>>>>>>
>>>>>>> Hi everybody,
>>>>>>>
>>>>>>> Let me clarify the situation:
>>>>>>>
>>>>>>> - The original MapTiler (python + wxWidgets) is discontinued and
>>>>>>> unfortunately it failed as an open-source project in my eyes. The
>>>>>>> software
>>>>>>> attracted quite a lot of end users, but no 3rd party developers. 
>>>>>>> There
>>>>>>> was
>>>>>>> not a single commit from any third-party ever to the MapTiler 
>>>>>>> project
>>>>>>> code
>>>>>>> itself, probably because the graphical utility was used mostly by
>>>>>>> non-programmers. The otherwise great project stalled for some 
>>>>>>> time. I
>>>>>>> have
>>>>>>> not seen how to move it forward without any financial support, 
>>>>>>> while
>>>>>>> not being a student anymore - and it made me really sad.
>>>>>>>
>>>>>>> - Since 2011, I work with my team on a completely new 
>>>>>>> implementation
>>>>>>> of an
>>>>>>> efficient tiling utility, the new MapTiler usable both from the
>>>>>>> command-line as well as from the graphical user interface, 
>>>>>>> written in
>>>>>>> C++
>>>>>>> and QT. It is significantly faster, merges multiple files in 
>>>>>>> different
>>>>>>> srs,
>>>>>>> handles correctly dateline crossing and world maps, tiles in
>>>>>>> non-mercator
>>>>>>> grids, it directly produces small and optimized jpg and pngs, it is
>>>>>>> compatible with OGC WMTS, contains uploader to Amazon S3 and Google
>>>>>>> Cloud
>>>>>>> Storage, supports different layers on different zoom levels (see
>>>>>>> http://goo.gl/TCrGtQ and other tutorials), and it comes with many
>>>>>>> other new
>>>>>>> features, with installers, regular updates, support and 
>>>>>>> maintenance.
>>>>>>> It runs on Win/Lin/Mac - see http://www.maptiler.com/ for more
>>>>>>> information. With my colleagues we are trying to do our job as good
>>>>>>> as we can. It is a complete rewrite of the original utility, fixing
>>>>>>> design flaws and
>>>>>>> implementation issues of both GDAL2Tiles and original MapTiler. 
>>>>>>> To be
>>>>>>> able
>>>>>>> to support the utility and to work on new features we ask for a
>>>>>>> license fee.
>>>>>>>
>>>>>>> - There was no financial support from Google Summer of Code nor 
>>>>>>> from
>>>>>>> OSGeo
>>>>>>> on the original MapTiler.
>>>>>>>
>>>>>>> -  Both my Google SoC in 2007 and 2008 were on the GDAL2TIles
>>>>>>> command-line
>>>>>>> utility, lead by Howard.
>>>>>>> My original GDAL2Tiles from 2007 is available at
>>>>>>> http://www.klokan.cz/projects/gdal2tiles/ and the version from 
>>>>>>> 2008 is
>>>>>>> distributed together with GDAL library, with patches and some 
>>>>>>> fixes,
>>>>>>> mostly
>>>>>>> from Evan.
>>>>>>> As Even pointed out - I started to work on the MapTiler during 
>>>>>>> August
>>>>>>> 2008,
>>>>>>> after the second SoC. BRGM mentioned in the code of GDAL2Tiles.py
>>>>>>> supported
>>>>>>> improvements of GDAL2Tiles, not MapTiler project.
>>>>>>>
>>>>>>> - As the sole author of MapTiler and the owner of the MapTiler
>>>>>>> trademark I
>>>>>>> would like to request complete removal of the MapTiler from the 
>>>>>>> OSGeo
>>>>>>> LiveDVD. I have prepared the existing .deb package as well as 
>>>>>>> supplied
>>>>>>> the
>>>>>>> quickstart and installation scripts to the svn about 5 years back.
>>>>>>>
>>>>>>> - If anybody is interested to revive my original open-source 
>>>>>>> project
>>>>>>> published under an open-source license, he is welcomed to do that -
>>>>>>> under
>>>>>>> the conditions of the original license, while preserving the 
>>>>>>> original
>>>>>>> copyright notice, and under the condition his fork of the 
>>>>>>> project is
>>>>>>> not anymore called MapTiler and does not use original graphical
>>>>>>> elements and desktop icon of the original application.
>>>>>>>
>>>>>>> - The existence of the two projects of the same name is 
>>>>>>> confusing the
>>>>>>> people and I want to avoid it. I hope you respect my decision. 
>>>>>>> The old
>>>>>>> MapTiler is dead, long live the MapTiler! ;-)
>>>>>>>
>>>>>>> - I continue to work on several other open-source projects and 
>>>>>>> with my
>>>>>>> team
>>>>>>> I keep developing, contributing and improving on OL3Cesium, 
>>>>>>> OpenLayers
>>>>>>> V3,
>>>>>>> WebGL Earth, EPSG.io, IIPImage, GDAL and other projects. See our
>>>>>>> github and
>>>>>>> blog for details: http://www.klokantech.com/.
>>>>>>> Open-source is indeed very powerful and viable on components and I
>>>>>>> can't imagine to live without it. Still, there are situations, 
>>>>>>> where
>>>>>>> it is simply
>>>>>>> not applicable.
>>>>>>>
>>>>>>> I am proud to be part of OSGeo and I am keen to continue to 
>>>>>>> contribute
>>>>>>> to
>>>>>>> the community in future. I admire and honor people like Frank or 
>>>>>>> Evan
>>>>>>> and
>>>>>>> others. You have my true respect for what you do and what you have
>>>>>>> achieved!
>>>>>>>
>>>>>>> Best regards,
>>>>>>>
>>>>>>> Petr Pridal, Ph.D.
>>>>>>> Klokan Technologies GmbH
>>>>>>>
>>>>>>> P.S.
>>>>>>> If anybody is interested in even more background of the 
>>>>>>> evolution of
>>>>>>> MapTiler you can read:
>>>>>>> https://groups.google.com/d/msg/maptiler/r9Xa8S_S4Z8/7pJoqKR1MM0J
>>>>>>>
>>>>>>> On Fri, Feb 6, 2015 at 9:24 PM, Cameron Shorter
>>>>>>> <cameron.shorter at gmail.com>
>>>>>>>
>>>>>>> wrote:
>>>>>>>> I've had a request from the MapTiler project to have it removed 
>>>>>>>> from
>>>>>>>> OSGeo-Live.
>>>>>>>>
>>>>>>>> I've raised a ticket:
>>>>>>>> https://trac.osgeo.org/osgeo/ticket/1467
>>>>>>>>
>>>>>>>> I'll look after updating the docs.
>>>>>>>>
>>>>>>>> -- 
>>>>>>>> Cameron Shorter,
>>>>>>>> Software and Data Solutions Manager
>>>>>>>> LISAsoft
>>>>>>>> Suite 112, Jones Bay Wharf,
>>>>>>>> 26 - 32 Pirrama Rd, Pyrmont NSW 2009
>>>>>>>>
>>>>>>>> P +61 2 9009 5000,  W www.lisasoft.com,  F +61 2 9009 5099
>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> Live-demo mailing list
>>>>>>>> Live-demo at lists.osgeo.org
>>>>>>>> http://lists.osgeo.org/mailman/listinfo/live-demo
>>>>>>>> http://live.osgeo.org
>>>>>>>> http://wiki.osgeo.org/wiki/Live_GIS_Disc
>>>>>> -- 
>>>>>> Spatialys - Geospatial professional services
>>>>>> http://www.spatialys.com
>>>>>> _______________________________________________
>>>>>> Incubator mailing list
>>>>>> Incubator at lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/incubator
>>>>> _______________________________________________
>>>>> Incubator mailing list
>>>>> Incubator at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/incubator
>>>>>
>>>>>
>>>>> -- 
>>>>> Cameron Shorter,
>>>>> Software and Data Solutions Manager
>>>>> LISAsoft
>>>>> Suite 112, Jones Bay Wharf,
>>>>> 26 - 32 Pirrama Rd, Pyrmont NSW 2009
>>>>>
>>>>> P +61 2 9009 5000,  W www.lisasoft.com,  F +61 2 9009 5099
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> Board mailing list
>>>>> Board at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/board
>
>


From lucadeluge at gmail.com  Fri Feb 13 05:20:09 2015
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Fri, 13 Feb 2015 14:20:09 +0100
Subject: [gdal-dev] [Live-demo] [Board] Retire MapTiler from OSGeo-Live
In-Reply-To: <54DDF9BC.9090400@gmail.com>
References: <54D5230A.7000500@gmail.com>
	<CACqBkM_AHkWccH94u=toemjM0GV7KpqABve0eoRBh-2h=E2U3A@mail.gmail.com>
	<54DDB38E.3030509@gmail.com>
	<201502131305.40325.even.rouault@spatialys.com>
	<54DDF3F1.4010103@gmail.com> <54DDF9BC.9090400@gmail.com>
Message-ID: <CAK4m-3wqFojP5jksCe8mRLb2PtMdHYHVsG4CBZNYOL2Edgf_QA@mail.gmail.com>

On 13 February 2015 at 14:18, Dmitriy Baryshnikov <bishop.dev at gmail.com> wrote:
> I agreed with Angelos.
> My +1
>

I also agree with Angelos, +1 for option 1

> Best regards,
>     Dmitry
>

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From zoltans at geograph.co.za  Fri Feb 13 05:48:29 2015
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Fri, 13 Feb 2015 15:48:29 +0200
Subject: [gdal-dev] [Live-demo] [Board] Retire MapTiler from OSGeo-Live
In-Reply-To: <54DDF3F1.4010103@gmail.com>
References: <54D5230A.7000500@gmail.com>	<CACqBkM_AHkWccH94u=toemjM0GV7KpqABve0eoRBh-2h=E2U3A@mail.gmail.com>	<54DDB38E.3030509@gmail.com>	<201502131305.40325.even.rouault@spatialys.com>
	<54DDF3F1.4010103@gmail.com>
Message-ID: <54DE00AD.6080702@geograph.co.za>


>>
>> 1) Merge maptiler's gdal2tiles enhancements into GDAL version, and make
>> maptiler just a GUI over it
>>
>> 2) Merge maptiler's gdal2tiles enhancements into GDAL version, and 
>> also import
>> the GUI (I think it is lightweight) if there's no too strong build
>> complications involved for GDAL. Would have to be checked
>>
>> 3) Remove gdal2tiles from GDAL so that the reborne maptiler is the 
>> reference.
>> But there are perhaps fixes in GDAL gdal2tiles that should be merged 
>> into
>> maptiler one (Python3 compatibility comes to mind)
>>
>> Any option would need someone to champion it of course...
>
> IMO, the third option should not be considered at all, since 
> gdal2tiles is very important tool in gdal and many people (including 
> me) prefer the script from any GUI out there. I have also seen an 
> improved version of this script dealing with multiple threads.
>
> My preference would be option 1.
>
> Just my 2c :)


Totally agree: cmd-line faaar more useful than GUI, for production jobs.

Regards,
Zoltan


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================


From vesnikos at gmail.com  Fri Feb 13 06:01:39 2015
From: vesnikos at gmail.com (Nick Ves)
Date: Fri, 13 Feb 2015 16:01:39 +0200
Subject: [gdal-dev] [Live-demo] [Board] Retire MapTiler from OSGeo-Live
In-Reply-To: <54DDF3F1.4010103@gmail.com>
References: <54D5230A.7000500@gmail.com>
	<CACqBkM_AHkWccH94u=toemjM0GV7KpqABve0eoRBh-2h=E2U3A@mail.gmail.com>
	<54DDB38E.3030509@gmail.com>
	<201502131305.40325.even.rouault@spatialys.com>
	<54DDF3F1.4010103@gmail.com>
Message-ID: <CADCcPvs0Tx3RG0FuKp1ZKw+khJC-JdfD0wVhaAZbraPJ-ubE2w@mail.gmail.com>

I agree with the significance gdal2tiles. I've used on numerous
occasions and it would a shame to lose it.

On a side note the multitreaded patch [0] was submitted 3 years ago,
and stilll wasn't merged in official channel.


[0] http://trac.osgeo.org/gdal/ticket/4379

On Fri, Feb 13, 2015 at 2:54 PM, Angelos Tzotsos <gcpp.kalxas at gmail.com> wrote:
> Hi Even,
>
>
> On 02/13/2015 02:05 PM, Even Rouault wrote:
>>
>> Hi,
>>
>> (adding gdal-dev in CC as it is of interest)
>>
>> As far as I understand (but I may be wrong as I haven't looked deeply at
>> the
>> code), maptiler (the open source project) consists of an improved
>> gdal2tiles.py + a python gui.
>> The duplication between gdal2tiles.py in maptiler and GDAL isn't something
>> particularly great. Ideally there should be one single version maintained
>> in
>> the OSGeo ecosystem.
>>
>> So there are several possibilities I can imagine :
>>
>> 1) Merge maptiler's gdal2tiles enhancements into GDAL version, and make
>> maptiler just a GUI over it
>>
>> 2) Merge maptiler's gdal2tiles enhancements into GDAL version, and also
>> import
>> the GUI (I think it is lightweight) if there's no too strong build
>> complications involved for GDAL. Would have to be checked
>>
>> 3) Remove gdal2tiles from GDAL so that the reborne maptiler is the
>> reference.
>> But there are perhaps fixes in GDAL gdal2tiles that should be merged into
>> maptiler one (Python3 compatibility comes to mind)
>>
>> Any option would need someone to champion it of course...
>
>
> IMO, the third option should not be considered at all, since gdal2tiles is
> very important tool in gdal and many people (including me) prefer the script
> from any GUI out there. I have also seen an improved version of this script
> dealing with multiple threads.
>
> My preference would be option 1.
>
> Just my 2c :)
>
>> Even
>>
>>
>>> Hi Eli, replying to your email, CC OSGeo-Live list (with your
>>> permission).
>>>
>>> I agree that we don't want to be promoting a proprietary product from an
>>> Open Source page.
>>>
>>> I suspect Angelos' subsequent email partially addresses your suggestions:
>>>
>>> On 13/02/2015 10:47 am, Angelos Tzotsos wrote:
>>>>
>>>> We have also discussed that in order to remove the project, we request
>>>> that there is an official source code repository to link to. This way
>>>> we can prove that the project was open source and can be forked in the
>>>> future. Unfortunately the main repository of the project was recently
>>>> deleted.
>>>> Without this, one can have the impression that OSGeoLive and OSGeo has
>>>> endorsed and distributed proprietary software.
>>>>
>>>> Also we plan to introduce IceTiler in the next version of OSGeoLive.
>>>
>>> For this OSGeo-Live release we will do what we can achieve within the
>>> time available.
>>>
>>> On 13/02/2015 11:58 am, Eli Adam wrote:
>>>>
>>>> Hi Cameron,
>>>>
>>>> I know that timeline is as big of a challenge as anything else in this
>>>> case.  I have a marketing/presentation question for you below.
>>>>
>>>> On Thu, Feb 12, 2015 at 2:23 PM, Cameron Shorter
>>>>
>>>> <cameron.shorter at gmail.com> wrote:
>>>>>
>>>>> Hi Petr, OSGeo-Live team, OSGeo Board,
>>>>> Is our OSGeoLive meeting, we discussed retiring of MapTiler from
>>>>> OSGeoLive. CCing OSGeo Board in discussion, in case the board wish to
>>>>> comment.
>>>>>
>>>>> Summary:
>>>>> * MapTiler was Open Source, and was included in prior OSGeo-Live
>>>>> distributions
>>>>> * Petr, the author, found the Open Source business model was not
>>>>> working
>>>>> for him, and has since moved future enhancements to a proprietary
>>>>> model. * The "maptiler" brand name now points to a URL of a proprietary
>>>>> product. * Petr has requested MapTiler be removed from OSGeo-Live.
>>>>> * As far as I've noticed, while there has been some disappointment to
>>>>> loose MapTiler as an Open Source project, we respect Petr's right to
>>>>> continue development using whatever model works for him. We are now
>>>>> working out how to cleanly transition.
>>>>>
>>>>> Of note:
>>>>> * We have prior OSGeo-Live releases and documentation which reference
>>>>> the previous Open Source Maptiler.
>>>>> * OSGeo-Live wish to retain our reputation of promoting Open Source
>>>>> products, both now, and in the past.
>>>>>
>>>>> Proposal for our imminent OSGeo-Live 8.5 release:
>>>>> * OSGeoLive will add a statement to our contents page [1] stating:
>>>>> "Maptiler: not included after OSGeo-Live 8.0, after project moved to
>>>>> proprietary business model"
>>>
>>> On 13/02/2015 11:58 am, Eli Adam wrote:
>>>>
>>>> This seems odd to reference proprietary software at all.  The contents
>>>> page [1] is a wonderful showcase of *open source* software.  Why
>>>> include an advertisement to go look for a proprietary software that
>>>> started as open source?  Linking to the last open source code with no
>>>> name makes more sense to me (I know that isn't possible unless we put
>>>> the code somewhere).  Or linking to http://gdal.org/gdal2tiles.html
>>>> which has some similar functionality and common ancestry.  Looks like
>>>> maybe licenses have varied in different points in time from different
>>>> sources too.  On the short timeline, there is no fork and no name to
>>>> link to yet.  If there were a fork and name would you list and link
>>>> that?  If so would you list or link "MapTiler" too?
>>>>
>>>> You could link (or save all the information from),
>>>> https://web.archive.org/web/20131216172514/http://www.maptiler.org/
>>>> The Google Code SVN repo is also accessible through that method.  It
>>>> appears that google code svn still works, for instance, svn checkout
>>>> http://maptiler.googlecode.com/svn/trunk/ maptiler-read-only
>>>>
>>>> I'm sure that you'll work it out fine but just wanted you to think
>>>> about the appearance of that list of *open source* software.  How do
>>>> you want the main list of open source geo software to appear?  I think
>>>> that should be the primary purpose (and fits with the OSGeo Live
>>>> project goals).
>>>>
>>>> Best regards, Eli
>>>>
>>>>> * The Maptiler Project Overview [2] will be updated to explain that
>>>>> MapTiler was Open Source, but future developments were proprietary. The
>>>>> Overview will reference the last Open Source version of software
>>>>> available.
>>>>> * The Maptiler Quickstart will be removed from docs, (but still
>>>>> available in subversion)
>>>>> * The maptiler installer will be disabled so MapTiler will not be
>>>>> distributed on OSGeo-Live.
>>>>>
>>>>> If anyone has objections or comments, please raise them within 48 hours
>>>>> (15 Feb 2015) such that we can address them before our release.
>>>>>
>>>>> Most (not all) of the history on this conversation has been copied
>>>>> below.
>>>>>
>>>>> [1] http://live.osgeo.org/en/overview/overview.html
>>>>> [2] http://live.osgeo.org/en/overview/maptiler_overview.html
>>>>>
>>>>> On 13/02/2015 4:29 am, Angelos Tzotsos wrote:
>>>>>
>>>>> Hi all,
>>>>>
>>>>> I definitely agree here with Howard.
>>>>>
>>>>> Since Maptiler has been included in OSGeoLive for 5 years now, and Petr
>>>>> has agreed to follow the OSGeoLive license for his contribution, there
>>>>> has to be some kind of lineage about this project online. It cannot
>>>>> just disappear. People would think that OSGeo endorced non-free
>>>>> software in the past, which is not acceptable in my opinion.
>>>>>
>>>>> We need an "official" public repository including the last version of
>>>>> the open source code to link to. We should then link to that in our
>>>>> documents (even if the project is removed). Cameron has already moved
>>>>> the documents in the "retired" area.
>>>>>
>>>>> I agree that the Maptiler name has to be removed from OSGeoLive in
>>>>> future versions. But, the request for removal came much after our
>>>>> official 8.5 code freeze, so I am against removing stuff from 8.5
>>>>> especially 10 days before release.
>>>>> I propose we keep the installer for 8.5 (unless Petr provides a new deb
>>>>> version with a new name).
>>>>> I also propose to remove the Maptiler documents completely for this
>>>>> release.
>>>>>
>>>>> Then, as Johan suggested we can fork Maptiler as Icetiler for the next
>>>>> OSGeoLive 9.0 release and restore the docs.
>>>>>
>>>>> Best,
>>>>> Angelos
>>>>>
>>>>> PS. I also want to thank Petr for his work on Maptiler, it is much
>>>>> appreciated.
>>>>>
>>>>> On 02/09/2015 11:46 AM, Johan Van de Wauw wrote:
>>>>>
>>>>> Hi all,
>>>>>
>>>>> First of all I would like to thank Petr for his work on Maptiler. He
>>>>> has actually spent a lot of unpaid time to develop a tool which is
>>>>> useful for many users.
>>>>> Earning a living from open-source is hard - as most people who have
>>>>> tried will be able to tell you.
>>>>>
>>>>> Second I would like to point out that a project that has many users
>>>>> and little contributors is not necessarily unsuccessful.  If your tool
>>>>> is working well, it may not scratch a developers itch[1].
>>>>>
>>>>> Anyway, it seems that by retiring from OsGeo live you did hit many
>>>>> developers itch, so it seems this may actually be a rebirth of the
>>>>> project.
>>>>>
>>>>> I think that the request of Petr is fair: the code remains free (which
>>>>> it should, because there can be many derived works), but he just
>>>>> requests not to use the name and logo. This leaves room for other
>>>>> developers to jump in and create a new version. Yesterday on IRC, I
>>>>> proposed the name "IceTiler" as an alternative, based on the
>>>>> rebranding done by debian for many mozilla projects [2]. Other
>>>>> suggestions are welcome :-)
>>>>>
>>>>> Taking all into account I'm +1 on removing this project from OsGeo
>>>>> live in the current form, but I think we could have "IceTiler" in a
>>>>> next release if there is sufficient interest.
>>>>>
>>>>> Kind Regards,
>>>>> Johan
>>>>>
>>>>> [1] http://en.wikipedia.org/wiki/The_Cathedral_and_the_Bazaar
>>>>> [2]
>>>>>
>>>>> http://en.wikipedia.org/wiki/Mozilla_Corporation_software_rebranded_by_t
>>>>> he_Debian_project _______________________________________________
>>>>> Live-demo mailing list
>>>>> Live-demo at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/live-demo
>>>>> http://live.osgeo.org
>>>>> http://wiki.osgeo.org/wiki/Live_GIS_Disc
>>>>> .
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> On 9/02/2015 12:09 pm, Jody Garnett wrote:
>>>>>
>>>>> Trademarks is one of those issues we tend to handle off-list with
>>>>> mentor
>>>>> and project  leadership (and/or the board if required).
>>>>>
>>>>> In this case the author and trademark owner in one in the same (and has
>>>>> a fairly clear request).
>>>>>
>>>>> My limited understanding is the board will need to care about
>>>>> trademarks
>>>>> in source code that has been contributed to OSGe (which is not a
>>>>> requirement of participation). I expect they will only need to care in
>>>>> the US (since that is where the organization is based) but that is up
>>>>> to legal council, IANAL etc...
>>>>>
>>>>> It is relatively common for open source projects to be renamed due to
>>>>> TM
>>>>> conflict. This is a service a software foundation can provide, apache
>>>>> has strict management of trademarks, eclipse does a trademark check
>>>>> prior to accepting a project into incubation etc... But it is not clear
>>>>> cut - Debian for example refuses to include firefox as that name is
>>>>> trademarked (and not "free" and reusable ),
>>>>>
>>>>> --
>>>>> Jody Garnett
>>>>>
>>>>> On 7 February 2015 at 17:03, Even Rouault <even.rouault at spatialys.com>
>>>>>
>>>>> wrote:
>>>>>>
>>>>>> Hi,
>>>>>>
>>>>>> (adding incubator@ as it is both of interest I think for OSGeo-Live &
>>>>>> incubator)
>>>>>>
>>>>>> I will not argue about this particular case, but this does raise an
>>>>>> interesting question about how we should handle trademark issues
>>>>>> (perhaps this
>>>>>> has been discussed in the past, so sorry if I come after the battle)
>>>>>>
>>>>>> The OSGeo incubation application questionnaire
>>>>>> http://www.osgeo.org/incubator/process/application.html mentions:
>>>>>> "Is the code free of patents, trademarks, and do you control the
>>>>>> copyright? "
>>>>>>
>>>>>> It does not address clearly the issue of trademark of the *name of the
>>>>>> project* (it mentions just the *code*).
>>>>>> I'm not sure if there should be a policy regarding ownership of the
>>>>>> trademark
>>>>>> of the name of a project, but at least it could be asked if there's a
>>>>>> trademark on the name, and who owns it (and in which countries...) ?
>>>>>> As
>>>>>> the
>>>>>> below example shows, this can have impact on the future of the
>>>>>> project.
>>>>>> But
>>>>>> this is likely complex.
>>>>>> - What if someone from a random country comes and says "eh this
>>>>>> project
>>>>>> conflicts with my trademark in Foobarland" ? Which countries should
>>>>>> OSGeo care
>>>>>> about ? Or perhaps this is too complex and the only real answer to
>>>>>> those questions is when you are assigned to a court ;-)
>>>>>> - And even if the trademark is owned by someone/an entity which is
>>>>>> strongly
>>>>>> related to the project, things can evolve over time. So shouldn't the
>>>>>> trademark be transfered to OSGeo control to guarantee fairness of use
>>>>>> ?
>>>>>> But
>>>>>> that would mean that OSGeo would have to pay the costs of
>>>>>> registration.
>>>>>>
>>>>>> For the record, I did the exercice of quick searching which OSGeo
>>>>>> projects are
>>>>>> trademarked in France ( http://bases-marques.inpi.fr/ ) and it *seems*
>>>>>> (only a
>>>>>> search by a specialist in I.P would confirm it) that only QGIS and
>>>>>> GeoMajas are
>>>>>> (and both have E.U. wide validity). (There are unrelated matches for
>>>>>> Geotools,
>>>>>> Marble and OSSIM). OSGeo itself isn't trademarked. And apparently
>>>>>> MapTiler neither.
>>>>>>
>>>>>> In the incubating projects, gvSIG is trademarked (E.U wide). Unrelated
>>>>>> matches
>>>>>> for "the zoo project" and OTB.  Rasdaman is registered in Germany.
>>>>>>
>>>>>> Even
>>>>>>
>>>>>>> Hi everybody,
>>>>>>>
>>>>>>> Let me clarify the situation:
>>>>>>>
>>>>>>> - The original MapTiler (python + wxWidgets) is discontinued and
>>>>>>> unfortunately it failed as an open-source project in my eyes. The
>>>>>>> software
>>>>>>> attracted quite a lot of end users, but no 3rd party developers.
>>>>>>> There
>>>>>>> was
>>>>>>> not a single commit from any third-party ever to the MapTiler project
>>>>>>> code
>>>>>>> itself, probably because the graphical utility was used mostly by
>>>>>>> non-programmers. The otherwise great project stalled for some time. I
>>>>>>> have
>>>>>>> not seen how to move it forward without any financial support, while
>>>>>>> not being a student anymore - and it made me really sad.
>>>>>>>
>>>>>>> - Since 2011, I work with my team on a completely new implementation
>>>>>>> of an
>>>>>>> efficient tiling utility, the new MapTiler usable both from the
>>>>>>> command-line as well as from the graphical user interface, written in
>>>>>>> C++
>>>>>>> and QT. It is significantly faster, merges multiple files in
>>>>>>> different
>>>>>>> srs,
>>>>>>> handles correctly dateline crossing and world maps, tiles in
>>>>>>> non-mercator
>>>>>>> grids, it directly produces small and optimized jpg and pngs, it is
>>>>>>> compatible with OGC WMTS, contains uploader to Amazon S3 and Google
>>>>>>> Cloud
>>>>>>> Storage, supports different layers on different zoom levels (see
>>>>>>> http://goo.gl/TCrGtQ and other tutorials), and it comes with many
>>>>>>> other new
>>>>>>> features, with installers, regular updates, support and maintenance.
>>>>>>> It runs on Win/Lin/Mac - see http://www.maptiler.com/ for more
>>>>>>> information. With my colleagues we are trying to do our job as good
>>>>>>> as we can. It is a complete rewrite of the original utility, fixing
>>>>>>> design flaws and
>>>>>>> implementation issues of both GDAL2Tiles and original MapTiler. To be
>>>>>>> able
>>>>>>> to support the utility and to work on new features we ask for a
>>>>>>> license fee.
>>>>>>>
>>>>>>> - There was no financial support from Google Summer of Code nor from
>>>>>>> OSGeo
>>>>>>> on the original MapTiler.
>>>>>>>
>>>>>>> -  Both my Google SoC in 2007 and 2008 were on the GDAL2TIles
>>>>>>> command-line
>>>>>>> utility, lead by Howard.
>>>>>>> My original GDAL2Tiles from 2007 is available at
>>>>>>> http://www.klokan.cz/projects/gdal2tiles/ and the version from 2008
>>>>>>> is
>>>>>>> distributed together with GDAL library, with patches and some fixes,
>>>>>>> mostly
>>>>>>> from Evan.
>>>>>>> As Even pointed out - I started to work on the MapTiler during August
>>>>>>> 2008,
>>>>>>> after the second SoC. BRGM mentioned in the code of GDAL2Tiles.py
>>>>>>> supported
>>>>>>> improvements of GDAL2Tiles, not MapTiler project.
>>>>>>>
>>>>>>> - As the sole author of MapTiler and the owner of the MapTiler
>>>>>>> trademark I
>>>>>>> would like to request complete removal of the MapTiler from the OSGeo
>>>>>>> LiveDVD. I have prepared the existing .deb package as well as
>>>>>>> supplied
>>>>>>> the
>>>>>>> quickstart and installation scripts to the svn about 5 years back.
>>>>>>>
>>>>>>> - If anybody is interested to revive my original open-source project
>>>>>>> published under an open-source license, he is welcomed to do that -
>>>>>>> under
>>>>>>> the conditions of the original license, while preserving the original
>>>>>>> copyright notice, and under the condition his fork of the project is
>>>>>>> not anymore called MapTiler and does not use original graphical
>>>>>>> elements and desktop icon of the original application.
>>>>>>>
>>>>>>> - The existence of the two projects of the same name is confusing the
>>>>>>> people and I want to avoid it. I hope you respect my decision. The
>>>>>>> old
>>>>>>> MapTiler is dead, long live the MapTiler! ;-)
>>>>>>>
>>>>>>> - I continue to work on several other open-source projects and with
>>>>>>> my
>>>>>>> team
>>>>>>> I keep developing, contributing and improving on OL3Cesium,
>>>>>>> OpenLayers
>>>>>>> V3,
>>>>>>> WebGL Earth, EPSG.io, IIPImage, GDAL and other projects. See our
>>>>>>> github and
>>>>>>> blog for details: http://www.klokantech.com/.
>>>>>>> Open-source is indeed very powerful and viable on components and I
>>>>>>> can't imagine to live without it. Still, there are situations, where
>>>>>>> it is simply
>>>>>>> not applicable.
>>>>>>>
>>>>>>> I am proud to be part of OSGeo and I am keen to continue to
>>>>>>> contribute
>>>>>>> to
>>>>>>> the community in future. I admire and honor people like Frank or Evan
>>>>>>> and
>>>>>>> others. You have my true respect for what you do and what you have
>>>>>>> achieved!
>>>>>>>
>>>>>>> Best regards,
>>>>>>>
>>>>>>> Petr Pridal, Ph.D.
>>>>>>> Klokan Technologies GmbH
>>>>>>>
>>>>>>> P.S.
>>>>>>> If anybody is interested in even more background of the evolution of
>>>>>>> MapTiler you can read:
>>>>>>> https://groups.google.com/d/msg/maptiler/r9Xa8S_S4Z8/7pJoqKR1MM0J
>>>>>>>
>>>>>>> On Fri, Feb 6, 2015 at 9:24 PM, Cameron Shorter
>>>>>>> <cameron.shorter at gmail.com>
>>>>>>>
>>>>>>> wrote:
>>>>>>>>
>>>>>>>> I've had a request from the MapTiler project to have it removed from
>>>>>>>> OSGeo-Live.
>>>>>>>>
>>>>>>>> I've raised a ticket:
>>>>>>>> https://trac.osgeo.org/osgeo/ticket/1467
>>>>>>>>
>>>>>>>> I'll look after updating the docs.
>>>>>>>>
>>>>>>>> --
>>>>>>>> Cameron Shorter,
>>>>>>>> Software and Data Solutions Manager
>>>>>>>> LISAsoft
>>>>>>>> Suite 112, Jones Bay Wharf,
>>>>>>>> 26 - 32 Pirrama Rd, Pyrmont NSW 2009
>>>>>>>>
>>>>>>>> P +61 2 9009 5000,  W www.lisasoft.com,  F +61 2 9009 5099
>>>>>>>>
>>>>>>>> _______________________________________________
>>>>>>>> Live-demo mailing list
>>>>>>>> Live-demo at lists.osgeo.org
>>>>>>>> http://lists.osgeo.org/mailman/listinfo/live-demo
>>>>>>>> http://live.osgeo.org
>>>>>>>> http://wiki.osgeo.org/wiki/Live_GIS_Disc
>>>>>>
>>>>>> --
>>>>>> Spatialys - Geospatial professional services
>>>>>> http://www.spatialys.com
>>>>>> _______________________________________________
>>>>>> Incubator mailing list
>>>>>> Incubator at lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/incubator
>>>>>
>>>>> _______________________________________________
>>>>> Incubator mailing list
>>>>> Incubator at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/incubator
>>>>>
>>>>>
>>>>> --
>>>>> Cameron Shorter,
>>>>> Software and Data Solutions Manager
>>>>> LISAsoft
>>>>> Suite 112, Jones Bay Wharf,
>>>>> 26 - 32 Pirrama Rd, Pyrmont NSW 2009
>>>>>
>>>>> P +61 2 9009 5000,  W www.lisasoft.com,  F +61 2 9009 5099
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> Board mailing list
>>>>> Board at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/board
>
>
>
> --
> Angelos Tzotsos
> Remote Sensing Laboratory
> National Technical University of Athens
> http://users.ntua.gr/tzotsos
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Fri Feb 13 06:16:10 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 13 Feb 2015 15:16:10 +0100
Subject: [gdal-dev] [Live-demo] [Board] Retire MapTiler from OSGeo-Live
In-Reply-To: <CADCcPvs0Tx3RG0FuKp1ZKw+khJC-JdfD0wVhaAZbraPJ-ubE2w@mail.gmail.com>
References: <54D5230A.7000500@gmail.com> <54DDF3F1.4010103@gmail.com>
	<CADCcPvs0Tx3RG0FuKp1ZKw+khJC-JdfD0wVhaAZbraPJ-ubE2w@mail.gmail.com>
Message-ID: <201502131516.10750.even.rouault@spatialys.com>

Le vendredi 13 f?vrier 2015 15:01:39, Nick Ves a ?crit :
> I agree with the significance gdal2tiles. I've used on numerous
> occasions and it would a shame to lose it.

Note: my proposal 3) was not about to remove the command line interface. It 
was about to move the script from one package to another one (provided that a 
"icetiler" community emerges). Proposal 1) or 2) would be my preference, 
mainly because it is already delivered with GDAL.

> 
> On a side note the multitreaded patch [0] was submitted 3 years ago,
> and stilll wasn't merged in official channel.

Looking at the last entry in the ticket, it seems the patch has issues on 
Windows.
Anyway, someone who would take care of the maintenance of the utility 
(reviewing&applying patches, maintaining the doc, writing non-regression tests 
: we have none currently... ) would be welcome.

> 
> 
> [0] http://trac.osgeo.org/gdal/ticket/4379
> 
> On Fri, Feb 13, 2015 at 2:54 PM, Angelos Tzotsos <gcpp.kalxas at gmail.com> 
wrote:
> > Hi Even,
> > 
> > On 02/13/2015 02:05 PM, Even Rouault wrote:
> >> Hi,
> >> 
> >> (adding gdal-dev in CC as it is of interest)
> >> 
> >> As far as I understand (but I may be wrong as I haven't looked deeply at
> >> the
> >> code), maptiler (the open source project) consists of an improved
> >> gdal2tiles.py + a python gui.
> >> The duplication between gdal2tiles.py in maptiler and GDAL isn't
> >> something particularly great. Ideally there should be one single
> >> version maintained in
> >> the OSGeo ecosystem.
> >> 
> >> So there are several possibilities I can imagine :
> >> 
> >> 1) Merge maptiler's gdal2tiles enhancements into GDAL version, and make
> >> maptiler just a GUI over it
> >> 
> >> 2) Merge maptiler's gdal2tiles enhancements into GDAL version, and also
> >> import
> >> the GUI (I think it is lightweight) if there's no too strong build
> >> complications involved for GDAL. Would have to be checked
> >> 
> >> 3) Remove gdal2tiles from GDAL so that the reborne maptiler is the
> >> reference.
> >> But there are perhaps fixes in GDAL gdal2tiles that should be merged
> >> into maptiler one (Python3 compatibility comes to mind)
> >> 
> >> Any option would need someone to champion it of course...
> > 
> > IMO, the third option should not be considered at all, since gdal2tiles
> > is very important tool in gdal and many people (including me) prefer the
> > script from any GUI out there. I have also seen an improved version of
> > this script dealing with multiple threads.
> > 
> > My preference would be option 1.
> > 
> > Just my 2c :)
> > 
> >> Even
> >> 
> >>> Hi Eli, replying to your email, CC OSGeo-Live list (with your
> >>> permission).
> >>> 
> >>> I agree that we don't want to be promoting a proprietary product from
> >>> an Open Source page.
> >>> 
> >>> I suspect Angelos' subsequent email partially addresses your
> >>> suggestions:
> >>> 
> >>> On 13/02/2015 10:47 am, Angelos Tzotsos wrote:
> >>>> We have also discussed that in order to remove the project, we request
> >>>> that there is an official source code repository to link to. This way
> >>>> we can prove that the project was open source and can be forked in the
> >>>> future. Unfortunately the main repository of the project was recently
> >>>> deleted.
> >>>> Without this, one can have the impression that OSGeoLive and OSGeo has
> >>>> endorsed and distributed proprietary software.
> >>>> 
> >>>> Also we plan to introduce IceTiler in the next version of OSGeoLive.
> >>> 
> >>> For this OSGeo-Live release we will do what we can achieve within the
> >>> time available.
> >>> 
> >>> On 13/02/2015 11:58 am, Eli Adam wrote:
> >>>> Hi Cameron,
> >>>> 
> >>>> I know that timeline is as big of a challenge as anything else in this
> >>>> case.  I have a marketing/presentation question for you below.
> >>>> 
> >>>> On Thu, Feb 12, 2015 at 2:23 PM, Cameron Shorter
> >>>> 
> >>>> <cameron.shorter at gmail.com> wrote:
> >>>>> Hi Petr, OSGeo-Live team, OSGeo Board,
> >>>>> Is our OSGeoLive meeting, we discussed retiring of MapTiler from
> >>>>> OSGeoLive. CCing OSGeo Board in discussion, in case the board wish to
> >>>>> comment.
> >>>>> 
> >>>>> Summary:
> >>>>> * MapTiler was Open Source, and was included in prior OSGeo-Live
> >>>>> distributions
> >>>>> * Petr, the author, found the Open Source business model was not
> >>>>> working
> >>>>> for him, and has since moved future enhancements to a proprietary
> >>>>> model. * The "maptiler" brand name now points to a URL of a
> >>>>> proprietary product. * Petr has requested MapTiler be removed from
> >>>>> OSGeo-Live. * As far as I've noticed, while there has been some
> >>>>> disappointment to loose MapTiler as an Open Source project, we
> >>>>> respect Petr's right to continue development using whatever model
> >>>>> works for him. We are now working out how to cleanly transition.
> >>>>> 
> >>>>> Of note:
> >>>>> * We have prior OSGeo-Live releases and documentation which reference
> >>>>> the previous Open Source Maptiler.
> >>>>> * OSGeo-Live wish to retain our reputation of promoting Open Source
> >>>>> products, both now, and in the past.
> >>>>> 
> >>>>> Proposal for our imminent OSGeo-Live 8.5 release:
> >>>>> * OSGeoLive will add a statement to our contents page [1] stating:
> >>>>> "Maptiler: not included after OSGeo-Live 8.0, after project moved to
> >>>>> proprietary business model"
> >>> 
> >>> On 13/02/2015 11:58 am, Eli Adam wrote:
> >>>> This seems odd to reference proprietary software at all.  The contents
> >>>> page [1] is a wonderful showcase of *open source* software.  Why
> >>>> include an advertisement to go look for a proprietary software that
> >>>> started as open source?  Linking to the last open source code with no
> >>>> name makes more sense to me (I know that isn't possible unless we put
> >>>> the code somewhere).  Or linking to http://gdal.org/gdal2tiles.html
> >>>> which has some similar functionality and common ancestry.  Looks like
> >>>> maybe licenses have varied in different points in time from different
> >>>> sources too.  On the short timeline, there is no fork and no name to
> >>>> link to yet.  If there were a fork and name would you list and link
> >>>> that?  If so would you list or link "MapTiler" too?
> >>>> 
> >>>> You could link (or save all the information from),
> >>>> https://web.archive.org/web/20131216172514/http://www.maptiler.org/
> >>>> The Google Code SVN repo is also accessible through that method.  It
> >>>> appears that google code svn still works, for instance, svn checkout
> >>>> http://maptiler.googlecode.com/svn/trunk/ maptiler-read-only
> >>>> 
> >>>> I'm sure that you'll work it out fine but just wanted you to think
> >>>> about the appearance of that list of *open source* software.  How do
> >>>> you want the main list of open source geo software to appear?  I think
> >>>> that should be the primary purpose (and fits with the OSGeo Live
> >>>> project goals).
> >>>> 
> >>>> Best regards, Eli
> >>>> 
> >>>>> * The Maptiler Project Overview [2] will be updated to explain that
> >>>>> MapTiler was Open Source, but future developments were proprietary.
> >>>>> The Overview will reference the last Open Source version of software
> >>>>> available.
> >>>>> * The Maptiler Quickstart will be removed from docs, (but still
> >>>>> available in subversion)
> >>>>> * The maptiler installer will be disabled so MapTiler will not be
> >>>>> distributed on OSGeo-Live.
> >>>>> 
> >>>>> If anyone has objections or comments, please raise them within 48
> >>>>> hours (15 Feb 2015) such that we can address them before our
> >>>>> release.
> >>>>> 
> >>>>> Most (not all) of the history on this conversation has been copied
> >>>>> below.
> >>>>> 
> >>>>> [1] http://live.osgeo.org/en/overview/overview.html
> >>>>> [2] http://live.osgeo.org/en/overview/maptiler_overview.html
> >>>>> 
> >>>>> On 13/02/2015 4:29 am, Angelos Tzotsos wrote:
> >>>>> 
> >>>>> Hi all,
> >>>>> 
> >>>>> I definitely agree here with Howard.
> >>>>> 
> >>>>> Since Maptiler has been included in OSGeoLive for 5 years now, and
> >>>>> Petr has agreed to follow the OSGeoLive license for his
> >>>>> contribution, there has to be some kind of lineage about this
> >>>>> project online. It cannot just disappear. People would think that
> >>>>> OSGeo endorced non-free software in the past, which is not
> >>>>> acceptable in my opinion.
> >>>>> 
> >>>>> We need an "official" public repository including the last version of
> >>>>> the open source code to link to. We should then link to that in our
> >>>>> documents (even if the project is removed). Cameron has already moved
> >>>>> the documents in the "retired" area.
> >>>>> 
> >>>>> I agree that the Maptiler name has to be removed from OSGeoLive in
> >>>>> future versions. But, the request for removal came much after our
> >>>>> official 8.5 code freeze, so I am against removing stuff from 8.5
> >>>>> especially 10 days before release.
> >>>>> I propose we keep the installer for 8.5 (unless Petr provides a new
> >>>>> deb version with a new name).
> >>>>> I also propose to remove the Maptiler documents completely for this
> >>>>> release.
> >>>>> 
> >>>>> Then, as Johan suggested we can fork Maptiler as Icetiler for the
> >>>>> next OSGeoLive 9.0 release and restore the docs.
> >>>>> 
> >>>>> Best,
> >>>>> Angelos
> >>>>> 
> >>>>> PS. I also want to thank Petr for his work on Maptiler, it is much
> >>>>> appreciated.
> >>>>> 
> >>>>> On 02/09/2015 11:46 AM, Johan Van de Wauw wrote:
> >>>>> 
> >>>>> Hi all,
> >>>>> 
> >>>>> First of all I would like to thank Petr for his work on Maptiler. He
> >>>>> has actually spent a lot of unpaid time to develop a tool which is
> >>>>> useful for many users.
> >>>>> Earning a living from open-source is hard - as most people who have
> >>>>> tried will be able to tell you.
> >>>>> 
> >>>>> Second I would like to point out that a project that has many users
> >>>>> and little contributors is not necessarily unsuccessful.  If your
> >>>>> tool is working well, it may not scratch a developers itch[1].
> >>>>> 
> >>>>> Anyway, it seems that by retiring from OsGeo live you did hit many
> >>>>> developers itch, so it seems this may actually be a rebirth of the
> >>>>> project.
> >>>>> 
> >>>>> I think that the request of Petr is fair: the code remains free
> >>>>> (which it should, because there can be many derived works), but he
> >>>>> just requests not to use the name and logo. This leaves room for
> >>>>> other developers to jump in and create a new version. Yesterday on
> >>>>> IRC, I proposed the name "IceTiler" as an alternative, based on the
> >>>>> rebranding done by debian for many mozilla projects [2]. Other
> >>>>> suggestions are welcome :-)
> >>>>> 
> >>>>> Taking all into account I'm +1 on removing this project from OsGeo
> >>>>> live in the current form, but I think we could have "IceTiler" in a
> >>>>> next release if there is sufficient interest.
> >>>>> 
> >>>>> Kind Regards,
> >>>>> Johan
> >>>>> 
> >>>>> [1] http://en.wikipedia.org/wiki/The_Cathedral_and_the_Bazaar
> >>>>> [2]
> >>>>> 
> >>>>> http://en.wikipedia.org/wiki/Mozilla_Corporation_software_rebranded_b
> >>>>> y_t he_Debian_project _______________________________________________
> >>>>> Live-demo mailing list
> >>>>> Live-demo at lists.osgeo.org
> >>>>> http://lists.osgeo.org/mailman/listinfo/live-demo
> >>>>> http://live.osgeo.org
> >>>>> http://wiki.osgeo.org/wiki/Live_GIS_Disc
> >>>>> .
> >>>>> 
> >>>>> 
> >>>>> 
> >>>>> 
> >>>>> On 9/02/2015 12:09 pm, Jody Garnett wrote:
> >>>>> 
> >>>>> Trademarks is one of those issues we tend to handle off-list with
> >>>>> mentor
> >>>>> and project  leadership (and/or the board if required).
> >>>>> 
> >>>>> In this case the author and trademark owner in one in the same (and
> >>>>> has a fairly clear request).
> >>>>> 
> >>>>> My limited understanding is the board will need to care about
> >>>>> trademarks
> >>>>> in source code that has been contributed to OSGe (which is not a
> >>>>> requirement of participation). I expect they will only need to care
> >>>>> in the US (since that is where the organization is based) but that
> >>>>> is up to legal council, IANAL etc...
> >>>>> 
> >>>>> It is relatively common for open source projects to be renamed due to
> >>>>> TM
> >>>>> conflict. This is a service a software foundation can provide, apache
> >>>>> has strict management of trademarks, eclipse does a trademark check
> >>>>> prior to accepting a project into incubation etc... But it is not
> >>>>> clear cut - Debian for example refuses to include firefox as that
> >>>>> name is trademarked (and not "free" and reusable ),
> >>>>> 
> >>>>> --
> >>>>> Jody Garnett
> >>>>> 
> >>>>> On 7 February 2015 at 17:03, Even Rouault
> >>>>> <even.rouault at spatialys.com>
> >>>>> 
> >>>>> wrote:
> >>>>>> Hi,
> >>>>>> 
> >>>>>> (adding incubator@ as it is both of interest I think for OSGeo-Live
> >>>>>> & incubator)
> >>>>>> 
> >>>>>> I will not argue about this particular case, but this does raise an
> >>>>>> interesting question about how we should handle trademark issues
> >>>>>> (perhaps this
> >>>>>> has been discussed in the past, so sorry if I come after the battle)
> >>>>>> 
> >>>>>> The OSGeo incubation application questionnaire
> >>>>>> http://www.osgeo.org/incubator/process/application.html mentions:
> >>>>>> "Is the code free of patents, trademarks, and do you control the
> >>>>>> copyright? "
> >>>>>> 
> >>>>>> It does not address clearly the issue of trademark of the *name of
> >>>>>> the project* (it mentions just the *code*).
> >>>>>> I'm not sure if there should be a policy regarding ownership of the
> >>>>>> trademark
> >>>>>> of the name of a project, but at least it could be asked if there's
> >>>>>> a trademark on the name, and who owns it (and in which
> >>>>>> countries...) ? As
> >>>>>> the
> >>>>>> below example shows, this can have impact on the future of the
> >>>>>> project.
> >>>>>> But
> >>>>>> this is likely complex.
> >>>>>> - What if someone from a random country comes and says "eh this
> >>>>>> project
> >>>>>> conflicts with my trademark in Foobarland" ? Which countries should
> >>>>>> OSGeo care
> >>>>>> about ? Or perhaps this is too complex and the only real answer to
> >>>>>> those questions is when you are assigned to a court ;-)
> >>>>>> - And even if the trademark is owned by someone/an entity which is
> >>>>>> strongly
> >>>>>> related to the project, things can evolve over time. So shouldn't
> >>>>>> the trademark be transfered to OSGeo control to guarantee fairness
> >>>>>> of use ?
> >>>>>> But
> >>>>>> that would mean that OSGeo would have to pay the costs of
> >>>>>> registration.
> >>>>>> 
> >>>>>> For the record, I did the exercice of quick searching which OSGeo
> >>>>>> projects are
> >>>>>> trademarked in France ( http://bases-marques.inpi.fr/ ) and it
> >>>>>> *seems* (only a
> >>>>>> search by a specialist in I.P would confirm it) that only QGIS and
> >>>>>> GeoMajas are
> >>>>>> (and both have E.U. wide validity). (There are unrelated matches for
> >>>>>> Geotools,
> >>>>>> Marble and OSSIM). OSGeo itself isn't trademarked. And apparently
> >>>>>> MapTiler neither.
> >>>>>> 
> >>>>>> In the incubating projects, gvSIG is trademarked (E.U wide).
> >>>>>> Unrelated matches
> >>>>>> for "the zoo project" and OTB.  Rasdaman is registered in Germany.
> >>>>>> 
> >>>>>> Even
> >>>>>> 
> >>>>>>> Hi everybody,
> >>>>>>> 
> >>>>>>> Let me clarify the situation:
> >>>>>>> 
> >>>>>>> - The original MapTiler (python + wxWidgets) is discontinued and
> >>>>>>> unfortunately it failed as an open-source project in my eyes. The
> >>>>>>> software
> >>>>>>> attracted quite a lot of end users, but no 3rd party developers.
> >>>>>>> There
> >>>>>>> was
> >>>>>>> not a single commit from any third-party ever to the MapTiler
> >>>>>>> project code
> >>>>>>> itself, probably because the graphical utility was used mostly by
> >>>>>>> non-programmers. The otherwise great project stalled for some time.
> >>>>>>> I have
> >>>>>>> not seen how to move it forward without any financial support,
> >>>>>>> while not being a student anymore - and it made me really sad.
> >>>>>>> 
> >>>>>>> - Since 2011, I work with my team on a completely new
> >>>>>>> implementation of an
> >>>>>>> efficient tiling utility, the new MapTiler usable both from the
> >>>>>>> command-line as well as from the graphical user interface, written
> >>>>>>> in C++
> >>>>>>> and QT. It is significantly faster, merges multiple files in
> >>>>>>> different
> >>>>>>> srs,
> >>>>>>> handles correctly dateline crossing and world maps, tiles in
> >>>>>>> non-mercator
> >>>>>>> grids, it directly produces small and optimized jpg and pngs, it is
> >>>>>>> compatible with OGC WMTS, contains uploader to Amazon S3 and Google
> >>>>>>> Cloud
> >>>>>>> Storage, supports different layers on different zoom levels (see
> >>>>>>> http://goo.gl/TCrGtQ and other tutorials), and it comes with many
> >>>>>>> other new
> >>>>>>> features, with installers, regular updates, support and
> >>>>>>> maintenance. It runs on Win/Lin/Mac - see http://www.maptiler.com/
> >>>>>>> for more information. With my colleagues we are trying to do our
> >>>>>>> job as good as we can. It is a complete rewrite of the original
> >>>>>>> utility, fixing design flaws and
> >>>>>>> implementation issues of both GDAL2Tiles and original MapTiler. To
> >>>>>>> be able
> >>>>>>> to support the utility and to work on new features we ask for a
> >>>>>>> license fee.
> >>>>>>> 
> >>>>>>> - There was no financial support from Google Summer of Code nor
> >>>>>>> from OSGeo
> >>>>>>> on the original MapTiler.
> >>>>>>> 
> >>>>>>> -  Both my Google SoC in 2007 and 2008 were on the GDAL2TIles
> >>>>>>> command-line
> >>>>>>> utility, lead by Howard.
> >>>>>>> My original GDAL2Tiles from 2007 is available at
> >>>>>>> http://www.klokan.cz/projects/gdal2tiles/ and the version from 2008
> >>>>>>> is
> >>>>>>> distributed together with GDAL library, with patches and some
> >>>>>>> fixes, mostly
> >>>>>>> from Evan.
> >>>>>>> As Even pointed out - I started to work on the MapTiler during
> >>>>>>> August 2008,
> >>>>>>> after the second SoC. BRGM mentioned in the code of GDAL2Tiles.py
> >>>>>>> supported
> >>>>>>> improvements of GDAL2Tiles, not MapTiler project.
> >>>>>>> 
> >>>>>>> - As the sole author of MapTiler and the owner of the MapTiler
> >>>>>>> trademark I
> >>>>>>> would like to request complete removal of the MapTiler from the
> >>>>>>> OSGeo LiveDVD. I have prepared the existing .deb package as well
> >>>>>>> as supplied
> >>>>>>> the
> >>>>>>> quickstart and installation scripts to the svn about 5 years back.
> >>>>>>> 
> >>>>>>> - If anybody is interested to revive my original open-source
> >>>>>>> project published under an open-source license, he is welcomed to
> >>>>>>> do that - under
> >>>>>>> the conditions of the original license, while preserving the
> >>>>>>> original copyright notice, and under the condition his fork of the
> >>>>>>> project is not anymore called MapTiler and does not use original
> >>>>>>> graphical elements and desktop icon of the original application.
> >>>>>>> 
> >>>>>>> - The existence of the two projects of the same name is confusing
> >>>>>>> the people and I want to avoid it. I hope you respect my decision.
> >>>>>>> The old
> >>>>>>> MapTiler is dead, long live the MapTiler! ;-)
> >>>>>>> 
> >>>>>>> - I continue to work on several other open-source projects and with
> >>>>>>> my
> >>>>>>> team
> >>>>>>> I keep developing, contributing and improving on OL3Cesium,
> >>>>>>> OpenLayers
> >>>>>>> V3,
> >>>>>>> WebGL Earth, EPSG.io, IIPImage, GDAL and other projects. See our
> >>>>>>> github and
> >>>>>>> blog for details: http://www.klokantech.com/.
> >>>>>>> Open-source is indeed very powerful and viable on components and I
> >>>>>>> can't imagine to live without it. Still, there are situations,
> >>>>>>> where it is simply
> >>>>>>> not applicable.
> >>>>>>> 
> >>>>>>> I am proud to be part of OSGeo and I am keen to continue to
> >>>>>>> contribute
> >>>>>>> to
> >>>>>>> the community in future. I admire and honor people like Frank or
> >>>>>>> Evan and
> >>>>>>> others. You have my true respect for what you do and what you have
> >>>>>>> achieved!
> >>>>>>> 
> >>>>>>> Best regards,
> >>>>>>> 
> >>>>>>> Petr Pridal, Ph.D.
> >>>>>>> Klokan Technologies GmbH
> >>>>>>> 
> >>>>>>> P.S.
> >>>>>>> If anybody is interested in even more background of the evolution
> >>>>>>> of MapTiler you can read:
> >>>>>>> https://groups.google.com/d/msg/maptiler/r9Xa8S_S4Z8/7pJoqKR1MM0J
> >>>>>>> 
> >>>>>>> On Fri, Feb 6, 2015 at 9:24 PM, Cameron Shorter
> >>>>>>> <cameron.shorter at gmail.com>
> >>>>>>> 
> >>>>>>> wrote:
> >>>>>>>> I've had a request from the MapTiler project to have it removed
> >>>>>>>> from OSGeo-Live.
> >>>>>>>> 
> >>>>>>>> I've raised a ticket:
> >>>>>>>> https://trac.osgeo.org/osgeo/ticket/1467
> >>>>>>>> 
> >>>>>>>> I'll look after updating the docs.
> >>>>>>>> 
> >>>>>>>> --
> >>>>>>>> Cameron Shorter,
> >>>>>>>> Software and Data Solutions Manager
> >>>>>>>> LISAsoft
> >>>>>>>> Suite 112, Jones Bay Wharf,
> >>>>>>>> 26 - 32 Pirrama Rd, Pyrmont NSW 2009
> >>>>>>>> 
> >>>>>>>> P +61 2 9009 5000,  W www.lisasoft.com,  F +61 2 9009 5099
> >>>>>>>> 
> >>>>>>>> _______________________________________________
> >>>>>>>> Live-demo mailing list
> >>>>>>>> Live-demo at lists.osgeo.org
> >>>>>>>> http://lists.osgeo.org/mailman/listinfo/live-demo
> >>>>>>>> http://live.osgeo.org
> >>>>>>>> http://wiki.osgeo.org/wiki/Live_GIS_Disc
> >>>>>> 
> >>>>>> --
> >>>>>> Spatialys - Geospatial professional services
> >>>>>> http://www.spatialys.com
> >>>>>> _______________________________________________
> >>>>>> Incubator mailing list
> >>>>>> Incubator at lists.osgeo.org
> >>>>>> http://lists.osgeo.org/mailman/listinfo/incubator
> >>>>> 
> >>>>> _______________________________________________
> >>>>> Incubator mailing list
> >>>>> Incubator at lists.osgeo.org
> >>>>> http://lists.osgeo.org/mailman/listinfo/incubator
> >>>>> 
> >>>>> 
> >>>>> --
> >>>>> Cameron Shorter,
> >>>>> Software and Data Solutions Manager
> >>>>> LISAsoft
> >>>>> Suite 112, Jones Bay Wharf,
> >>>>> 26 - 32 Pirrama Rd, Pyrmont NSW 2009
> >>>>> 
> >>>>> P +61 2 9009 5000,  W www.lisasoft.com,  F +61 2 9009 5099
> >>>>> 
> >>>>> 
> >>>>> _______________________________________________
> >>>>> Board mailing list
> >>>>> Board at lists.osgeo.org
> >>>>> http://lists.osgeo.org/mailman/listinfo/board
> > 
> > --
> > Angelos Tzotsos
> > Remote Sensing Laboratory
> > National Technical University of Athens
> > http://users.ntua.gr/tzotsos
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From astewart at terragotech.com  Fri Feb 13 09:08:39 2015
From: astewart at terragotech.com (Alan Stewart)
Date: Fri, 13 Feb 2015 11:08:39 -0600
Subject: [gdal-dev] bug in ogrct.cpp?
Message-ID: <EE98F556BD204842ADBBC06607DA7FEA66342FBDAD@BHMMBX04.cloudopscenter.net>

I'm building 1.11.0 as a DLL on Windows with CPL_MULTIPROC_WIN32 and
USE_WIN32_MUTEX defined. Everything builds fine, but in my workflow a debug
build always fails while the release build succeeds. I'm using a modified
version of gdalwarp.cpp as a function linked into the DLL instead of as a
standalone executable.

The reason for the debug failure is the sole CPLAssert() in ogrct.cpp. It is commented out in the snippet below. The snippet begins at line 876 of the source file. Once commented out the debug version of my workflow seems to work fine, raising the question of the need for this assertion? I don't  know enough about ogrct.cpp or the CPL mutex to be confident about my decision to ignore it. Can anyone comment?

/* -------------------------------------------------------------------- */
/*      Do the transformation using PROJ.4.                             */
/* -------------------------------------------------------------------- */
    if( !bIdentityTransform && pjctx == NULL )
    {
        /* The mutex has already been created */
        //CPLAssert(hPROJMutex != NULL);
        CPLAcquireMutex(hPROJMutex, 1000.0);
    }

TIA,

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.terragotech.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150213/9bb2b67a/attachment.html>

From even.rouault at spatialys.com  Fri Feb 13 09:34:30 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 13 Feb 2015 18:34:30 +0100
Subject: [gdal-dev] bug in ogrct.cpp?
In-Reply-To: <EE98F556BD204842ADBBC06607DA7FEA66342FBDAD@BHMMBX04.cloudopscenter.net>
References: <EE98F556BD204842ADBBC06607DA7FEA66342FBDAD@BHMMBX04.cloudopscenter.net>
Message-ID: <201502131834.30563.even.rouault@spatialys.com>

Le vendredi 13 f?vrier 2015 18:08:39, Alan Stewart a ?crit :
> I'm building 1.11.0 as a DLL on Windows with CPL_MULTIPROC_WIN32 and
> USE_WIN32_MUTEX defined. Everything builds fine, but in my workflow a debug
> build always fails while the release build succeeds. I'm using a modified
> version of gdalwarp.cpp as a function linked into the DLL instead of as a
> standalone executable.
> 
> The reason for the debug failure is the sole CPLAssert() in ogrct.cpp. It
> is commented out in the snippet below. The snippet begins at line 876 of
> the source file. Once commented out the debug version of my workflow seems
> to work fine, raising the question of the need for this assertion? I don't
>  know enough about ogrct.cpp or the CPL mutex to be confident about my
> decision to ignore it. Can anyone comment?
> 
> /* -------------------------------------------------------------------- */
> /*      Do the transformation using PROJ.4.                             */
> /* -------------------------------------------------------------------- */
>     if( !bIdentityTransform && pjctx == NULL )
>     {
>         /* The mutex has already been created */
>         //CPLAssert(hPROJMutex != NULL);
>         CPLAcquireMutex(hPROJMutex, 1000.0);
>     }
> 

Alan,

This would indicate there's an issue with the mutex not being created, so 
multi-threading is probably not safe. I'm not sure why mutex creation fails 
though.
Why do you define USE_WIN32_MUTEX and not use the default implementation that 
uses critical sections ?

Even


> TIA,
> 
> Alan Stewart
> Senior Software Engineer
> TerraGo Technologies
> 3200 Windy Hill Road, Suite 1550W
> Atlanta, GA 30339 USA
> O.  +1 678.391.9615
> 
> www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www
> .terragotech.com>

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Feb 13 10:50:22 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 13 Feb 2015 19:50:22 +0100
Subject: [gdal-dev] bug in ogrct.cpp?
In-Reply-To: <EE98F556BD204842ADBBC06607DA7FEA66342FBE33@BHMMBX04.cloudopscenter.net>
References: <EE98F556BD204842ADBBC06607DA7FEA66342FBDAD@BHMMBX04.cloudopscenter.net>
	<201502131834.30563.even.rouault@spatialys.com>
	<EE98F556BD204842ADBBC06607DA7FEA66342FBE33@BHMMBX04.cloudopscenter.net>
Message-ID: <201502131950.23050.even.rouault@spatialys.com>

Le vendredi 13 f?vrier 2015 19:43:17, Alan Stewart a ?crit :
> I'm assuming any "*WIN32*" define should be used when building for Windows.
> I'll certainly try without that one.  Is there documentation I have not
> found for GDAL defines? I certainly don't understand the practical
> significance of CPL_MULTIPROC_STUB, CPL_MULTIPROC_WIN32 and
> CPL_MULTIPROC_PTHREADS.

You shouldn't have to mess with any define directly. You just need to look at 
nmake.opt and edit directly into it or create a nmake.local

> 
> Alan Stewart
> Senior Software Engineer
> TerraGo Technologies
> 3200 Windy Hill Road, Suite 1550W
> Atlanta, GA 30339 USA
> O.  +1 678.391.9615
>  
> www.terragotech.com
> 
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault at spatialys.com]
> Sent: Friday, February 13, 2015 12:35 PM
> To: gdal-dev at lists.osgeo.org
> Cc: Alan Stewart
> Subject: Re: [gdal-dev] bug in ogrct.cpp?
> 
> Le vendredi 13 f?vrier 2015 18:08:39, Alan Stewart a ?crit :
> > I'm building 1.11.0 as a DLL on Windows with CPL_MULTIPROC_WIN32 and
> > USE_WIN32_MUTEX defined. Everything builds fine, but in my workflow a
> > debug build always fails while the release build succeeds. I'm using a
> > modified version of gdalwarp.cpp as a function linked into the DLL
> > instead of as a standalone executable.
> > 
> > The reason for the debug failure is the sole CPLAssert() in ogrct.cpp.
> > It is commented out in the snippet below. The snippet begins at line
> > 876 of the source file. Once commented out the debug version of my
> > workflow seems to work fine, raising the question of the need for this
> > assertion? I don't  know enough about ogrct.cpp or the CPL mutex to be
> > confident about my decision to ignore it. Can anyone comment?
> > 
> > /* --------------------------------------------------------------------
> > */ /*      Do the transformation using PROJ.4.                          
> >   */ /*
> > -------------------------------------------------------------------- */
> > 
> >     if( !bIdentityTransform && pjctx == NULL )
> >     {
> >     
> >         /* The mutex has already been created */
> >         //CPLAssert(hPROJMutex != NULL);
> >         CPLAcquireMutex(hPROJMutex, 1000.0);
> >     
> >     }
> 
> Alan,
> 
> This would indicate there's an issue with the mutex not being created, so
> multi-threading is probably not safe. I'm not sure why mutex creation
> fails though. Why do you define USE_WIN32_MUTEX and not use the default
> implementation that uses critical sections ?
> 
> Since we have disabled the main() function in gdalwarp.cpp (before my
> involvement), possibly there is something there that normally causes the
> mutex to be created before this point in the code. I will investigate that
> also.
> 
> Even
> 
> > TIA,
> > 
> > Alan Stewart
> > Senior Software Engineer
> > TerraGo Technologies
> > 3200 Windy Hill Road, Suite 1550W
> > Atlanta, GA 30339 USA
> > O.  +1 678.391.9615
> > 
> > www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B8
> > 9/www
> > .terragotech.com>
> 
> --
> Spatialys - Geospatial professional services http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From simpsonar77 at gmail.com  Fri Feb 13 14:30:36 2015
From: simpsonar77 at gmail.com (Andrew Simpson)
Date: Fri, 13 Feb 2015 22:30:36 +0000
Subject: [gdal-dev] new to gdal, converting projection, need some help
In-Reply-To: <54DCD2C0.40200@stripfamily.net>
References: <CAFzrdOwuK0Qea9mkOuRVFHtrSpNL9AshB9oa4zeytvrec_NGfw@mail.gmail.com>
	<54DCD2C0.40200@stripfamily.net>
Message-ID: <CAFzrdOxiZo2BrycKjQh3G9=NcoX_bWqiNXABtDDDz9P4uE3YFw@mail.gmail.com>

Thanks for the reply.  I've included the input file information below.

I understand that I should see skewing.  What's the best method for
correction of the skew?

I misspoke a bit about the tiles.  I had a few sets of 100 tiles each.  on
each 100 tile set, the output size was 30gb.  The total size of the input
files were only about 7.5GB.  I think what actually is happening is that
when I received the tiles from my source, i did not get the entire set.
Instead I got an "L" shape of actual data.  When I go to build the
vrt/single .tif file, I'm getting a black layer added to the missing
tiles.  In essence, gdal is filling in the missing data with black tiles,
thus increasing the size.  I was also adding pyramids, which is adding some
to the size.  For my application, I do not need the pyramids, so I will
just not at them going forward.

Here is the input info:
PROJCS["NAD_1983_UTM_Zone_12N",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-111],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["meters",1],
    AUTHORITY["EPSG","26912"]]
Origin = (300000.000000000000000,3537000.000000000000000)
Pixel Size = (0.300000000000000,-0.300000000000000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
  TIFFTAG_SOFTWARE=Inpho GmbH
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  300000.000, 3537000.000) (113d 6'57.86"W, 31d57' 4.92"N)
Lower Left  (  300000.000, 3535500.000) (113d 6'56.75"W, 31d56'16.23"N)
Upper Right (  301500.000, 3537000.000) (113d 6' 0.76"W, 31d57' 5.87"N)
Lower Right (  301500.000, 3535500.000) (113d 5'59.65"W, 31d56'17.18"N)
Center      (  300750.000, 3536250.000) (113d 6'28.76"W, 31d56'41.05"N)
Band 1 Block=128x128 Type=Byte, ColorInterp=Red
Band 2 Block=128x128 Type=Byte, ColorInterp=Green
Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
PROJ.4 string is:
'+proj=utm +zone=12 +datum=NAD83 +units=m +no_defs '



Andrew Simpson

On Thu, Feb 12, 2015 at 4:20 PM, David Strip <gdal at stripfamily.net> wrote:

>  While you've shown us your output is in unprojected (lon/lat) WGS84
> coordinates, you haven't told us about your input - only that it's datum is
> NAD83. If the inputs are projected, you should expect to see skewing, since
> a rectangular area in projected coordinates in general does not map to a
> rectangle in lon/lat.
>
> As to size - you took 300 tiles each about 50-75M and made a single file.
> Your input is in the 20GB range, so 30 GB is not out of hand. Are your
> input tiles compressed? Your output is NOT compressed, so that would go a
> long way towards explaining things.
>
>
> On 2/12/2015 5:58 AM, Andrew Simpson wrote:
>
> I'm new to learning GDAL (mapping in general).  I have a bunch of tif
> files (300+) that are in NAD83, but my mapping application only uses
> WGS84.  The tiles are all around 50-75Mb each
>
>  I'm able to use gdal warp to convert the projection properly to WGS84,
> but the images (tiles) come out skewed.
>
>  I tried using bdalbuildvrt first to create the vrt, then gdalwarp with
> the following options:  -co TILED=YES -co BIGTIFF=YES -of GTIFF -t_srs
> "+proj=longlat +datum=WGS84 + no_defs" input.vrt output.vrt
>
>  Ok, so this mostly works, but I have 2 questions/issues:
> 1.  what is the best way to convert the projection and eliminate the
> skewing?
> 2.  The single .tif produced is now >30GB!  significantly larger.  why
> does this occur and how can I keep this file size down?
>
>
>  Thanks for any info!
>  Andrew Simpson
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150213/9f8f22a2/attachment.html>

From hema.yeedunuri at amigooptima.in  Mon Feb 16 01:07:35 2015
From: hema.yeedunuri at amigooptima.in (Hema Yeedunuri)
Date: Mon, 16 Feb 2015 14:37:35 +0530
Subject: [gdal-dev] Delete Feature
Message-ID: <CA+8Q=fCLo2AfPSoZ8GwVQPJZfQ3QhpGEkKmtjePr_GO54E5rPw@mail.gmail.com>

hi all,

I am trying to delete feature from shape layer using feature id.the feature
id is deleted when deleted in order descending order.When trying to delete
randomly it is giving error message
if i delete fid = 1, the below error is shown.

ERROR 1: Attempt to read shape with feature id (2) out of available range.

this is what i am doing

 OGRFeature *delFeatur = poLayer->GetFeature(actualIndex);

 delFeatur->SetGeometryDirectly(NULL);
  poLayer->SetFeature(delFeatur);
  poLayer->DeleteFeature(actualIndex);

  OGRFeature::DestroyFeature( delFeatur );

 QString sql = QString( "REPACK %1" ).arg( poLayer->GetName() );
 reader->ExecuteSQL(sql.toLatin1().data(),NULL,NULL);

poLayer->SyncToDisk();

reader->SyncToDisk();



thanks,

hema
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150216/2a8bad9c/attachment.html>

From even.rouault at spatialys.com  Mon Feb 16 01:17:28 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 16 Feb 2015 10:17:28 +0100
Subject: [gdal-dev] Delete Feature
In-Reply-To: <CA+8Q=fCLo2AfPSoZ8GwVQPJZfQ3QhpGEkKmtjePr_GO54E5rPw@mail.gmail.com>
References: <CA+8Q=fCLo2AfPSoZ8GwVQPJZfQ3QhpGEkKmtjePr_GO54E5rPw@mail.gmail.com>
Message-ID: <201502161017.29011.even.rouault@spatialys.com>

Le lundi 16 f?vrier 2015 10:07:35, Hema Yeedunuri a ?crit :
> hi all,
> 
> I am trying to delete feature from shape layer using feature id.the feature
> id is deleted when deleted in order descending order.When trying to delete
> randomly it is giving error message

Hema,

REPACK will remove destroyed features, so it will modify the feature ids of 
the features after the deleted one(s). This might explain that you get 
failures if you REPACK after each deletion (wich will be inefficient, you should 
do it just after having deleted all features) if you've determined the feature 
ids before.
Note: the below code is more complicated than necessary: you just need to call 
DeleteFeature(actualIndex), no need to NULLify its geometry before.

Even


> if i delete fid = 1, the below error is shown.
> 
> ERROR 1: Attempt to read shape with feature id (2) out of available range.
> 
> this is what i am doing
> 
>  OGRFeature *delFeatur = poLayer->GetFeature(actualIndex);
> 
>  delFeatur->SetGeometryDirectly(NULL);
>   poLayer->SetFeature(delFeatur);
>   poLayer->DeleteFeature(actualIndex);
> 
>   OGRFeature::DestroyFeature( delFeatur );
> 
>  QString sql = QString( "REPACK %1" ).arg( poLayer->GetName() );
>  reader->ExecuteSQL(sql.toLatin1().data(),NULL,NULL);
> 
> poLayer->SyncToDisk();
> 
> reader->SyncToDisk();
> 
> 
> 
> thanks,
> 
> hema

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From nik at nikosalexandris.net  Mon Feb 16 01:23:06 2015
From: nik at nikosalexandris.net (Nikos Alexandris)
Date: Mon, 16 Feb 2015 11:23:06 +0200
Subject: [gdal-dev] HDF support under Gentoo/Funtoo
Message-ID: <304b9b457ab609fbf0b06f46dd016e56@nikosalexandris.net>

Greetings to the list.

I am trying to emerge gdal under Funtoo with support for HDF4 (see 
<http://gpo.zugaina.org/sci-libs/gdal> for the ebuild).  I am not sure 
how to get this done.  There is no USE flag for hdf (only for hdf5). 
Since the system is quite similar with Gentoo, is there anyone out there 
working with gdal and support for HDF4 under Gentoo?

The instructions at <https://trac.osgeo.org/gdal/wiki/HDF> don't help 
me much either. I only understand as a relevant information the part 
about "Incompatibility with NetCDF Libraries".  But I don't request 
support for NetCDF via the respective use flag.

Thank you, Nikos

From hema.yeedunuri at amigooptima.in  Mon Feb 16 04:10:57 2015
From: hema.yeedunuri at amigooptima.in (Hema Yeedunuri)
Date: Mon, 16 Feb 2015 17:40:57 +0530
Subject: [gdal-dev] Delete Feature
In-Reply-To: <201502161017.29011.even.rouault@spatialys.com>
References: <CA+8Q=fCLo2AfPSoZ8GwVQPJZfQ3QhpGEkKmtjePr_GO54E5rPw@mail.gmail.com>
	<201502161017.29011.even.rouault@spatialys.com>
Message-ID: <CA+8Q=fCFU4R3jBka-itos86637RcjU+++Ddbt6Pg6=o3oy5a5A@mail.gmail.com>

all,

If i want to update every time the layer every time how can it be done? I
want to do undo redo operations on adding and deleting features .

thanks,
hema

On Mon, Feb 16, 2015 at 2:47 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le lundi 16 f?vrier 2015 10:07:35, Hema Yeedunuri a ?crit :
> > hi all,
> >
> > I am trying to delete feature from shape layer using feature id.the
> feature
> > id is deleted when deleted in order descending order.When trying to
> delete
> > randomly it is giving error message
>
> Hema,
>
> REPACK will remove destroyed features, so it will modify the feature ids of
> the features after the deleted one(s). This might explain that you get
> failures if you REPACK after each deletion (wich will be inefficient, you
> should
> do it just after having deleted all features) if you've determined the
> feature
> ids before.
> Note: the below code is more complicated than necessary: you just need to
> call
> DeleteFeature(actualIndex), no need to NULLify its geometry before.
>
> Even
>
>
> > if i delete fid = 1, the below error is shown.
> >
> > ERROR 1: Attempt to read shape with feature id (2) out of available
> range.
> >
> > this is what i am doing
> >
> >  OGRFeature *delFeatur = poLayer->GetFeature(actualIndex);
> >
> >  delFeatur->SetGeometryDirectly(NULL);
> >   poLayer->SetFeature(delFeatur);
> >   poLayer->DeleteFeature(actualIndex);
> >
> >   OGRFeature::DestroyFeature( delFeatur );
> >
> >  QString sql = QString( "REPACK %1" ).arg( poLayer->GetName() );
> >  reader->ExecuteSQL(sql.toLatin1().data(),NULL,NULL);
> >
> > poLayer->SyncToDisk();
> >
> > reader->SyncToDisk();
> >
> >
> >
> > thanks,
> >
> > hema
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150216/b7309dec/attachment.html>

From remi.cura at gmail.com  Mon Feb 16 05:13:02 2015
From: remi.cura at gmail.com (=?UTF-8?Q?R=C3=A9mi_Cura?=)
Date: Mon, 16 Feb 2015 14:13:02 +0100
Subject: [gdal-dev] VRT creation from Python,
	adding existing geotiff as bands
Message-ID: <CAJvUf_srqVGpz68Q9ANZVYV0e5g7MtR-aX=+zp3i9f_8OESVmg@mail.gmail.com>

Hey dear list,
this is my first post here,
so sorry if I'm asking something obvious.

(I noticed the 2 previous mail thread regarding python and VRT).

I wrote python functions to convert a numpy structured array to several
gdal rasters.

A numpy structured array is a 2D pixel array, but each pixel has in fact
several values of possibly different type (like band).
For instance a pixel dtype can be [float32,uint16,Float64].

I want to convert this array to raster(s).
First I tried to create one raster with several bands,
but GeoTiff cannot handle bands with different pixel type (or I didn't find
how).

I concluded that I must create several rasters, and put them all as bands
in a VRT.

So far I have been able to create several geoTiff raster of various type
corresponding to the numpy structured array.

Now, I don't know how to create from python the VRT that unites all this
rasters.

When I try to write in a VRT raster band I get errors.

I am well aware that I could create the XML directly from python, but it
feels like a pretty bad architecture idea.

Anybody knows how to do this /and/or has comments about this task?

Many Thanks,
R?mi-C
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150216/5d973e95/attachment.html>

From even.rouault at spatialys.com  Mon Feb 16 05:27:09 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 16 Feb 2015 14:27:09 +0100
Subject: [gdal-dev] VRT creation from Python,
	adding existing geotiff as bands
In-Reply-To: <CAJvUf_srqVGpz68Q9ANZVYV0e5g7MtR-aX=+zp3i9f_8OESVmg@mail.gmail.com>
References: <CAJvUf_srqVGpz68Q9ANZVYV0e5g7MtR-aX=+zp3i9f_8OESVmg@mail.gmail.com>
Message-ID: <201502161427.09851.even.rouault@spatialys.com>

R?mi,

> Hey dear list,
> this is my first post here,
> so sorry if I'm asking something obvious.
> 
> (I noticed the 2 previous mail thread regarding python and VRT).
> 
> I wrote python functions to convert a numpy structured array to several
> gdal rasters.
> 
> A numpy structured array is a 2D pixel array, but each pixel has in fact
> several values of possibly different type (like band).
> For instance a pixel dtype can be [float32,uint16,Float64].
> 
> I want to convert this array to raster(s).
> First I tried to create one raster with several bands,
> but GeoTiff cannot handle bands with different pixel type (or I didn't find
> how).

This is a limitation of the TIFF format, and most formats actually.

> 
> I concluded that I must create several rasters, and put them all as bands
> in a VRT.
> 
> So far I have been able to create several geoTiff raster of various type
> corresponding to the numpy structured array.
> 
> Now, I don't know how to create from python the VRT that unites all this
> rasters.
> 
> When I try to write in a VRT raster band I get errors.

"write" what exactly : the VRT XML/structure or the pixel values ?

You can partially create VRT files with a mix of API and XML. See for example 
the following extract from autotest/gdrivers/vrtderived.py

    filename = 'tmp/derived.vrt'
    vrt_ds = gdal.GetDriverByName('VRT').Create(filename, 50, 50, 0)

    options = [
        'subClass=VRTDerivedRasterBand',  # ==> You would likely need 
VRTSourcedRasterBand heere
    ]
    vrt_ds.AddBand(gdal.GDT_Byte, options)

    simpleSourceXML = '''    <SimpleSource>
      <SourceFilename>data/byte.tif</SourceFilename>
      <SourceBand>1</SourceBand>
    </SimpleSource>'''

    md = {}
    md['source_0'] = simpleSourceXML

    vrt_ds.GetRasterBand(1).SetMetadata(md, 'vrt_sources')
    md_read = vrt_ds.GetRasterBand(1).GetMetadata('vrt_sources')
    vrt_ds = None


This is a bit documented in the VRT tutorial. See 
http://gdal.org/gdal_vrttut.html (search "In this example a virtual dataset is 
created with the Create() method, and adding bands and sources 
programmatically" in the page)

Note that datasets with bands of different datatypes are not always well 
supported in the various algorithms, utilities or API (mostly due to the lack 
of formats that support it and the ensuing lack of testing of such situations)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sebastian.walter at fu-berlin.de  Mon Feb 16 06:33:37 2015
From: sebastian.walter at fu-berlin.de (Sebastian Walter)
Date: Mon, 16 Feb 2015 15:33:37 +0100
Subject: [gdal-dev] HDF support under Gentoo/Funtoo
In-Reply-To: <304b9b457ab609fbf0b06f46dd016e56@nikosalexandris.net>
References: <304b9b457ab609fbf0b06f46dd016e56@nikosalexandris.net>
Message-ID: <54E1FFC1.3050900@fu-berlin.de>

Hi Nikos,

The gentoo ebuild is somehow limited in terms of driver choices in my
opinion (especially if you have additional commercial licenses to
include as, e.g. Kakadu or ECW). What I do is to compile a custom gdal
build and install it to /usr/local. For the current stable 1.11, you
would emerge sci-libs/hdf first, and then configure the downloaded
package like this:

./configure --prefix=/usr/local --with-python

(both HDF libs are found automatically by configure).

Cheers, Sebastian


On 02/16/15 10:23, Nikos Alexandris wrote:
> Greetings to the list.
> 
> I am trying to emerge gdal under Funtoo with support for HDF4 (see
> <http://gpo.zugaina.org/sci-libs/gdal> for the ebuild).  I am not sure
> how to get this done.  There is no USE flag for hdf (only for hdf5).
> Since the system is quite similar with Gentoo, is there anyone out there
> working with gdal and support for HDF4 under Gentoo?
> 
> The instructions at <https://trac.osgeo.org/gdal/wiki/HDF> don't help me
> much either. I only understand as a relevant information the part about
> "Incompatibility with NetCDF Libraries".  But I don't request support
> for NetCDF via the respective use flag.
> 
> Thank you, Nikos
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 5826 bytes
Desc: S/MIME Cryptographic Signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150216/2e4456ec/attachment-0001.bin>

From anton.korosov at nersc.no  Mon Feb 16 06:11:53 2015
From: anton.korosov at nersc.no (Anton Korosov)
Date: Mon, 16 Feb 2015 15:11:53 +0100
Subject: [gdal-dev] VRT creation from Python,
 adding existing geotiff as bands
In-Reply-To: <CAJvUf_srqVGpz68Q9ANZVYV0e5g7MtR-aX=+zp3i9f_8OESVmg@mail.gmail.com>
References: <CAJvUf_srqVGpz68Q9ANZVYV0e5g7MtR-aX=+zp3i9f_8OESVmg@mail.gmail.com>
Message-ID: <54E1FAA9.3050900@nersc.no>

Dear R?mi,

you may want to look at our Python package NANSAT 
(https://github.com/nansencenter/nansat) which we build around the GDAL 
and especially VRT. We even have a separate class VRT() for creating, 
changing and using VRT files.
More specific regarding your question, you can try to use the 
SourceTransferType parameter of the VRT. Search for this keyword at
http://gdal.org/gdal_vrttut.html

Regards!
Anton

On 16/02/15 14:13, R?mi Cura wrote:
> Hey dear list,
> this is my first post here,
> so sorry if I'm asking something obvious.
>
> (I noticed the 2 previous mail thread regarding python and VRT).
>
> I wrote python functions to convert a numpy structured array to several
> gdal rasters.
>
> A numpy structured array is a 2D pixel array, but each pixel has in fact
> several values of possibly different type (like band).
> For instance a pixel dtype can be [float32,uint16,Float64].
>
> I want to convert this array to raster(s).
> First I tried to create one raster with several bands,
> but GeoTiff cannot handle bands with different pixel type (or I didn't
> find how).
>
> I concluded that I must create several rasters, and put them all as
> bands in a VRT.
>
> So far I have been able to create several geoTiff raster of various type
> corresponding to the numpy structured array.
>
> Now, I don't know how to create from python the VRT that unites all this
> rasters.
>
> When I try to write in a VRT raster band I get errors.
>
> I am well aware that I could create the XML directly from python, but it
> feels like a pretty bad architecture idea.
>
> Anybody knows how to do this /and/or has comments about this task?
>
> Many Thanks,
> R?mi-C
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From remi.cura at gmail.com  Mon Feb 16 08:23:49 2015
From: remi.cura at gmail.com (=?UTF-8?Q?R=C3=A9mi_Cura?=)
Date: Mon, 16 Feb 2015 17:23:49 +0100
Subject: [gdal-dev] VRT creation from Python,
	adding existing geotiff as bands
In-Reply-To: <54E1FAA9.3050900@nersc.no>
References: <CAJvUf_srqVGpz68Q9ANZVYV0e5g7MtR-aX=+zp3i9f_8OESVmg@mail.gmail.com>
	<54E1FAA9.3050900@nersc.no>
Message-ID: <CAJvUf_v96JiXHeqx+nVJXLMexWeYNDZhPc12ZsNjXXThCjJLkA@mail.gmail.com>

Thank for the fast answers !

@EvenRouault  : thanks for the snippet, I wasn't aware of this mechanism to
transmit option trough python dictionary.
It should most likely be sufficient for my needs, even if I don't
understand it fully yet.
I had read the tutorial but failed to translate it from C++ to python.
I'm still _very_ reticent to create XML for VRT in python, I don't see how
it could be safe and age well.

@Anton :
thanks for the lib, I'll look into vrt.py
<https://github.com/nansencenter/nansat/blob/master/nansat/vrt.py> to try
to understand how to add an existing tiff file as a band to vrt.
I don't think I need "SourceTransferType", because the type of the vrt band
will be the same as the type of the existing geotiff file.

Cheers,
R?mi-C


2015-02-16 15:11 GMT+01:00 Anton Korosov <anton.korosov at nersc.no>:

> Dear R?mi,
>
> you may want to look at our Python package NANSAT (https://github.com/
> nansencenter/nansat) which we build around the GDAL and especially VRT.
> We even have a separate class VRT() for creating, changing and using VRT
> files.
> More specific regarding your question, you can try to use the
> SourceTransferType parameter of the VRT. Search for this keyword at
> http://gdal.org/gdal_vrttut.html
>
> Regards!
> Anton
>
>
> On 16/02/15 14:13, R?mi Cura wrote:
>
>> Hey dear list,
>> this is my first post here,
>> so sorry if I'm asking something obvious.
>>
>> (I noticed the 2 previous mail thread regarding python and VRT).
>>
>> I wrote python functions to convert a numpy structured array to several
>> gdal rasters.
>>
>> A numpy structured array is a 2D pixel array, but each pixel has in fact
>> several values of possibly different type (like band).
>> For instance a pixel dtype can be [float32,uint16,Float64].
>>
>> I want to convert this array to raster(s).
>> First I tried to create one raster with several bands,
>> but GeoTiff cannot handle bands with different pixel type (or I didn't
>> find how).
>>
>> I concluded that I must create several rasters, and put them all as
>> bands in a VRT.
>>
>> So far I have been able to create several geoTiff raster of various type
>> corresponding to the numpy structured array.
>>
>> Now, I don't know how to create from python the VRT that unites all this
>> rasters.
>>
>> When I try to write in a VRT raster band I get errors.
>>
>> I am well aware that I could create the XML directly from python, but it
>> feels like a pretty bad architecture idea.
>>
>> Anybody knows how to do this /and/or has comments about this task?
>>
>> Many Thanks,
>> R?mi-C
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150216/e03dbc90/attachment.html>

From even.rouault at spatialys.com  Mon Feb 16 08:26:06 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 16 Feb 2015 17:26:06 +0100
Subject: [gdal-dev] Streamable GeoTIFF
Message-ID: <201502161726.06775.even.rouault@spatialys.com>

Hi,

Following a recent discussion on IRC, I've committed changes in the GeoTIFF 
driver (GDAL trunk) to allow streaming in/out TIFF files. This is rather 
advanced and requires care in its use but can probably be usefull sometimes.

More details in this new paragraph of the GeoTIFF driver doc :
"""
Streaming operations

Starting with GDAL 2.0, the GeoTIFF driver can support reading or writing TIFF 
files (with some restrictions detailed below) in a streaming compatible way.

When reading a file from /vsistdin/, a named pipe (on Unix), or if forcing 
streamed reading by setting the TIFF_READ_STREAMING configuration option to 
YES, the GeoTIFF driver will assume that the TIFF Image File Directory (IFD) 
is at the beginning of the file, i.e. at offset 8 for a classical TIFF file or at 
offset 16 for a BigTIFF file. The values of the tags of array type must be 
contained at the beginning of file, after the end of the IFD and before the 
first image strip/tile. The reader must read the strips/tiles in the order they 
are written in the file. For a pixel interleaved file 
(PlanarConfiguration=Contig), the recommended order for a writer, and thus for 
a reader, is from top to bottom for a strip-organized file or from top to 
bottom, which a chunk of a block height, and left to right for a tile-
organized file. For a band organized file (PlanarConfiguration=Separate), the 
above order is recommended with the content of the first band, then the content 
of the second band, etc... Technically this order corresponds to increasing 
offsets in the TileOffsets/StripOffsets tag. This is the order that the GDAL 
raster copy routine will assume.

If the order is not the one described above, the UNORDERED_BLOCKS=YES dataset 
metadata item will be set in the TIFF metadata domain. Each block offset can be 
determined by querying the "BLOCK_OFFSET_[xblock]_[yblock]" band metadata 
items in the TIFF metadata domain (where xblock, yblock is the coordinate of 
the block), and a reader could use that information to determine the 
appropriate reading order for image blocks.

The files that are streamed into the GeoTIFF driver may be compressed, even if 
the GeoTIFF driver cannot produce such files in streamable output mode (regular 
creation of TIFF files will produce such compatible files for streamed reading).

When writing a file to /vsistdout/, a named pipe (on Unix), or when definiting 
the STREAMABLE_OUTPUT=YES creation option, the CreateCopy() method of the 
GeoTIFF driver will generate a file with the above defined constraints (related 
to position of IFD and block order), and this is only supported for a 
uncompressed file. The Create() method also supports creating streamable 
compatible files, but the writer must be careful to set the projection, 
geotransform or metadata before writting image blocks (so that the IFD is 
written at the beginning of the file). And when writing image blocks, the order 
of blocks must be the one of the above paragraph, otherwise errors will be 
reported.

Some examples :

gdal_translate in.tif /vsistdout/ -co TILED=YES | gzip | gunzip | 
gdal_translate /vsistdin/ out.tif -co TILED=YES -co COMPRESS=DEFLATE

or

mkfifo my_fifo
gdalwarp in.tif my_fifo -t_srs EPSG:3857
gdal_translate my_fifo out.png -of PNG

Note: not all utilities are compatible with such input or output streaming 
operations, and even those which may deal with such files may not manage to 
deal with them in all circumstances, for example if the reading driver drived 
by the output file is not compatible with the block order of the streamed 
input. 
"""

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Feb 16 08:32:52 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 16 Feb 2015 17:32:52 +0100
Subject: [gdal-dev] VRT creation from Python,
	adding existing geotiff as bands
In-Reply-To: <CAJvUf_v96JiXHeqx+nVJXLMexWeYNDZhPc12ZsNjXXThCjJLkA@mail.gmail.com>
References: <CAJvUf_srqVGpz68Q9ANZVYV0e5g7MtR-aX=+zp3i9f_8OESVmg@mail.gmail.com>
	<54E1FAA9.3050900@nersc.no>
	<CAJvUf_v96JiXHeqx+nVJXLMexWeYNDZhPc12ZsNjXXThCjJLkA@mail.gmail.com>
Message-ID: <201502161732.52662.even.rouault@spatialys.com>

Le lundi 16 f?vrier 2015 17:23:49, R?mi Cura a ?crit :
> Thank for the fast answers !
> 
> @EvenRouault  : thanks for the snippet, I wasn't aware of this mechanism to
> transmit option trough python dictionary.
> It should most likely be sufficient for my needs, even if I don't
> understand it fully yet.
> I had read the tutorial but failed to translate it from C++ to python.

The Python API is generally close to the C++ one. 
A not-so-pretty doc is available at http://gdal.org/python/

> I'm still _very_ reticent to create XML for VRT in python, I don't see how
> it could be safe and age well.

The XML schema of VRT files is really stable. I can't think of a backward 
incompatible change. The C++ API of the VRT driver allows to build most (but 
not necessarily all) VRT, and it is not exposed to the SWIG bindings.

> 
> @Anton :
> thanks for the lib, I'll look into vrt.py
> <https://github.com/nansencenter/nansat/blob/master/nansat/vrt.py> to try
> to understand how to add an existing tiff file as a band to vrt.
> I don't think I need "SourceTransferType", because the type of the vrt band
> will be the same as the type of the existing geotiff file.
> 
> Cheers,
> R?mi-C
> 
> 2015-02-16 15:11 GMT+01:00 Anton Korosov <anton.korosov at nersc.no>:
> > Dear R?mi,
> > 
> > you may want to look at our Python package NANSAT (https://github.com/
> > nansencenter/nansat) which we build around the GDAL and especially VRT.
> > We even have a separate class VRT() for creating, changing and using VRT
> > files.
> > More specific regarding your question, you can try to use the
> > SourceTransferType parameter of the VRT. Search for this keyword at
> > http://gdal.org/gdal_vrttut.html
> > 
> > Regards!
> > Anton
> > 
> > On 16/02/15 14:13, R?mi Cura wrote:
> >> Hey dear list,
> >> this is my first post here,
> >> so sorry if I'm asking something obvious.
> >> 
> >> (I noticed the 2 previous mail thread regarding python and VRT).
> >> 
> >> I wrote python functions to convert a numpy structured array to several
> >> gdal rasters.
> >> 
> >> A numpy structured array is a 2D pixel array, but each pixel has in fact
> >> several values of possibly different type (like band).
> >> For instance a pixel dtype can be [float32,uint16,Float64].
> >> 
> >> I want to convert this array to raster(s).
> >> First I tried to create one raster with several bands,
> >> but GeoTiff cannot handle bands with different pixel type (or I didn't
> >> find how).
> >> 
> >> I concluded that I must create several rasters, and put them all as
> >> bands in a VRT.
> >> 
> >> So far I have been able to create several geoTiff raster of various type
> >> corresponding to the numpy structured array.
> >> 
> >> Now, I don't know how to create from python the VRT that unites all this
> >> rasters.
> >> 
> >> When I try to write in a VRT raster band I get errors.
> >> 
> >> I am well aware that I could create the XML directly from python, but it
> >> feels like a pretty bad architecture idea.
> >> 
> >> Anybody knows how to do this /and/or has comments about this task?
> >> 
> >> Many Thanks,
> >> R?mi-C
> >> 
> >> 
> >> 
> >> 
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Feb 17 01:00:54 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 17 Feb 2015 10:00:54 +0100
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.11.2RC2 for release
In-Reply-To: <201502121855.51053.even.rouault@spatialys.com>
References: <201502121855.51053.even.rouault@spatialys.com>
Message-ID: <201502171000.54570.even.rouault@spatialys.com>

> 
> Motion: The GDAL/OGR 1.11.2RC2 package is promoted as the
> final GDAL/OGR 1.11.2 release.

I declare this motion as passed with +1 from JukkaR, DanielM, TamasS and me.

I'm going to rename the RC to final and the release announcement will follow 
shortly.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Feb 17 01:14:17 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 17 Feb 2015 10:14:17 +0100
Subject: [gdal-dev] GDAL/OGR 1.11.2 released
Message-ID: <201502171014.17701.even.rouault@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to
announce the release of the GDAL/OGR 1.11.2 bug fix release.  This
release contains more than 60 bug fixes since the October 2014 1.11.1 release.

The source is available at:

  http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2.tar.xz
  http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2.tar.gz
  http://download.osgeo.org/gdal/1.11.2/gdal1112.zip

Details on the the fixes in this release are available at:
  http://trac.osgeo.org/gdal/wiki/Release/1.11.2-News

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Feb 17 01:17:08 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 17 Feb 2015 10:17:08 +0100
Subject: [gdal-dev] GDAL/OGR 1.11.2 released
In-Reply-To: <201502171014.17701.even.rouault@spatialys.com>
References: <201502171014.17701.even.rouault@spatialys.com>
Message-ID: <201502171017.09143.even.rouault@spatialys.com>

I forgot to mention the GDAL GRASS plugin package has also been updated (GRASS 
7.0 compatibility) :

  http://download.osgeo.org/gdal/1.11.2/gdal-grass-1.11.2.tar.gz

> Hi,
> 
> On behalf of the GDAL/OGR development team, I am pleased to
> announce the release of the GDAL/OGR 1.11.2 bug fix release.  This
> release contains more than 60 bug fixes since the October 2014 1.11.1
> release.
> 
> The source is available at:
> 
>   http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2.tar.xz
>   http://download.osgeo.org/gdal/1.11.2/gdal-1.11.2.tar.gz
>   http://download.osgeo.org/gdal/1.11.2/gdal1112.zip
> 
> Details on the the fixes in this release are available at:
>   http://trac.osgeo.org/gdal/wiki/Release/1.11.2-News
> 
> Best regards,
> 
> Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From David.Weiss at ptvgroup.com  Tue Feb 17 05:42:06 2015
From: David.Weiss at ptvgroup.com (=?iso-8859-1?Q?David_Wei=DF?=)
Date: Tue, 17 Feb 2015 14:42:06 +0100
Subject: [gdal-dev] Unusual(?) Callstack for GDAL Rasterdata Plugin
Message-ID: <E8D289FB71C3004B832D1702922D3A2003207E267A@SKA-WN-E25CEX.ptvag.ptv.de>

Hi!

I wrote a basic rasterdata plugin for gdal using the raster driver api. It should provide custom rendered overviews in Quantum GIS, which is not working yet.
When loading the plugin in QGIS, it is displayed as VRT Format, which should not be because I never reference the VRT Dataset or anything related.

Also I noticed that the callstack when rendering an image in QGIS is far different from what I would expect:

>             gdal_RNDd.dll!RNDRasterBand::IRasterIO(GDALRWFlag eRWFlag, int nXOff, int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize, int nBufYSize, GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line 107                 gdal111.dll!GDALRasterBand::RasterIO(GDALRWFlag eRWFlag, int nXOff, int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize, int nBufYSize, GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line 261                 gdal_RNDd.dll!RNDDataset::IRasterIO(GDALRWFlag eRWFlag, int nXOff, int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize, int nBufYSize, GDALDataType eBufType, int nBandCount, int * panBandMap, int nPixelSpace, int nLineSpace, int nBandSpace)  Line 124 + 0x8b bytes
               gdal111.dll!GDALDataset::RasterIO(GDALRWFlag eRWFlag, int nXOff, int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize, int nBufYSize, GDALDataType eBufType, int nBandCount, int * panBandMap, int nPixelSpace, int nLineSpace, int nBandSpace)  Line 1758 + 0xaa bytes
               gdal111.dll!GDALDatasetRasterIO(void * hDS, GDALRWFlag eRWFlag, int nXOff, int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize, int nBufYSize, GDALDataType eBufType, int nBandCount, int * panBandMap, int nPixelSpace, int nLineSpace, int nBandSpace)  Line 1797
               gdal111.dll!GDALWarpOperation::WarpRegionToBuffer(int nDstXOff, int nDstYOff, int nDstXSize, int nDstYSize, void * pDataBuf, GDALDataType eBufDataType, int nSrcXOff, int nSrcYOff, int nSrcXSize, int nSrcYSize, double dfProgressBase, double dfProgressScale)  Line 1527 + 0xe0 bytes
               gdal111.dll!VRTWarpedDataset::ProcessBlock(int iBlockX, int iBlockY)  Line 1180 + 0xbe bytes
               gdal111.dll!VRTWarpedRasterBand::IReadBlock(int nBlockXOff, int nBlockYOff, void * pImage)  Line 1288 + 0x13 bytes
               gdal111.dll!GDALRasterBand::GetLockedBlockRef(int nXBlockOff, int nYBlockOff, int bJustInitialize)  Line 1243 + 0x50 bytes
               gdal111.dll!GDALRasterBand::IRasterIO(GDALRWFlag eRWFlag, int nXOff, int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize, int nBufYSize, GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line 484 + 0x1f bytes
               gdal111.dll!GDALRasterBand::RasterIO(GDALRWFlag eRWFlag, int nXOff, int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize, int nBufYSize, GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line 261
               gdal111.dll!GDALRasterIO(void * hBand, GDALRWFlag eRWFlag, int nXOff, int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize, int nBufYSize, GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line 288
                [....]

Notice that there are VRTWarpedDataset and VRTWarpedRasterBand functions involved which I never used anywhere in my driver source.
I would expect GDALRasterBand::RasterIO (second from bottom) to call my overridden implementation of RNDRasterBand::IrasterIO (top) directly instead of GDALRasterBand::IRasterIO (third from bottom) and all the functions in between.
Here are my class definitions for reference:

class RNDDataset : public GDALDataset
{
    friend class RNDRasterBand;

public:
    virtual ~RNDDataset ();

    virtual CPLErr GetGeoTransform ( double * padfTransform );
    virtual char const * GetProjectionRef();

    static int Identify ( GDALOpenInfo * openInfo );
    static GDALDataset * Open ( GDALOpenInfo * openInfo );

protected:
    RNDDataset ();

    virtual CPLErr IRasterIO ( GDALRWFlag eRWFlag,
        int nXOff, int nYOff, int nXSize, int nYSize,
        void * pData, int nBufXSize, int nBufYSize,
        GDALDataType eBufType,
        int nBandCount, int *panBandMap,
        int nPixelSpace, int nLineSpace, int nBandSpace );
}

class RNDRasterBand : public GDALRasterBand
{
    friend class RNDDataset;

public:
    virtual ~RNDRasterBand ();

    virtual GDALRasterBand * GetOverview ( int a_iOverview );
    virtual int GetOverviewCount ();
    virtual int HasArbitraryOverviews();

protected:
    RNDRasterBand ( RNDDataset * const a_poDS, int const a_nBand, GDALColorInterp const a_eColorInterp, int const a_iOverview );

    virtual CPLErr IReadBlock ( int a_nBlockXOff, int a_nBlockYOff, void * a_pImage );
    virtual CPLErr IRasterIO ( GDALRWFlag eRWFlag,
        int nXOff, int nYOff, int nXSize, int nYSize,
        void * pData, int nBufXSize, int nBufYSize,
        GDALDataType eBufType,
        int nPixelSpace, int nLineSpace );
}

Any advise what I'm missing?

Thank you,

David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150217/27373d51/attachment-0001.html>

From even.rouault at spatialys.com  Tue Feb 17 06:05:41 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 17 Feb 2015 15:05:41 +0100
Subject: [gdal-dev] Unusual(?) Callstack for GDAL Rasterdata Plugin
In-Reply-To: <E8D289FB71C3004B832D1702922D3A2003207E267A@SKA-WN-E25CEX.ptvag.ptv.de>
References: <E8D289FB71C3004B832D1702922D3A2003207E267A@SKA-WN-E25CEX.ptvag.ptv.de>
Message-ID: <201502171505.41251.even.rouault@spatialys.com>

Le mardi 17 f?vrier 2015 14:42:06, David Wei? a ?crit :
> Hi!
> 
> I wrote a basic rasterdata plugin for gdal using the raster driver api. It
> should provide custom rendered overviews in Quantum GIS, which is not
> working yet. When loading the plugin in QGIS, it is displayed as VRT
> Format, which should not be because I never reference the VRT Dataset or
> anything related.

David,

QGIS automatically wraps up GDAL datasets that are not north-up oriented (i.e. 
if geotransform[2] != 0 or geotransform[4] != 0 or geotransform[5] > 0) as a 
warped VRT (with GDALAutoCreateWarpedVRT()) so as to have a north-up oriented 
dataset to handle, which is the likely reason for the stack trace you get.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From David.Weiss at ptvgroup.com  Tue Feb 17 06:10:40 2015
From: David.Weiss at ptvgroup.com (=?utf-8?B?RGF2aWQgV2Vpw58=?=)
Date: Tue, 17 Feb 2015 15:10:40 +0100
Subject: [gdal-dev] Unusual(?) Callstack for GDAL Rasterdata Plugin
In-Reply-To: <201502171505.41251.even.rouault@spatialys.com>
References: <E8D289FB71C3004B832D1702922D3A2003207E267A@SKA-WN-E25CEX.ptvag.ptv.de>
	<201502171505.41251.even.rouault@spatialys.com>
Message-ID: <E8D289FB71C3004B832D1702922D3A2003207E267B@SKA-WN-E25CEX.ptvag.ptv.de>

Hi,

> QGIS automatically wraps up GDAL datasets that are not north-up oriented
> (i.e.
> if geotransform[2] != 0 or geotransform[4] != 0 or geotransform[5] > 0) as a
> warped VRT (with GDALAutoCreateWarpedVRT()) so as to have a north-up
> oriented dataset to handle, which is the likely reason for the stack trace you
> get.

I just figured that out after reading the gdalprovider source from QGIS:

https://github.com/qgis/QGIS/blob/master/src/providers/gdal/qgsgdalprovider.cpp#L2472

My mistake was that I understood the transformation matrix to default to
0 1 0
0 0 1
When it actually is
0 1 0
0 0 -1

I overlooked the -1 in the GeoTranform docs :D

Thanks for your fast response!
 
David

From even.rouault at spatialys.com  Tue Feb 17 06:46:08 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 17 Feb 2015 15:46:08 +0100
Subject: [gdal-dev] Fwd: [SoC] Preparation of ideas pages for GSoC 2015
	(deadline: 18th February!)
Message-ID: <201502171546.08891.even.rouault@spatialys.com>

Hi,

One day left to draft up your ideas on

http://trac.osgeo.org/gdal/wiki/SummerOfCode

Even

----------  Message transmis  ----------

Sujet : [SoC] Preparation of ideas pages for GSoC 2015 (deadline: 18th 
February!)
Date : mercredi 11 f?vrier 2015, 16:24:33
De : Margherita Di Leo <diregola at gmail.com>
? : OSGeo Discussions <discuss at lists.osgeo.org>, "OSGeo-SoC" 
<soc at lists.osgeo.org>

Dear All,

*GSoC 2015* was officially announced earlier this year. The applications
for mentoring organizations are now open and this year Hamish Bowman and
myself will be applying for OSGeo's participation.
The application deadline for mentoring organizations is the 20th of
February, and right after that, Google will proceed examining the
organizations. The showcase for evaluating the applications are the *GSoC
ideas pages* [1], and for this reason, they need to be in perfect shape.
This means that OSGeo teams are required to set up and shape their pages
this week, coordinating their teams through their dev mailing lists. The
pages will then linked to the main GSoC 2015 ideas page on the wiki.
Please bear in mind that there is no guarantee whatsoever of the acceptance
by Google based on the success of previous years, but they will judge the
organizations only on the basis of ideas pages for 2015.
Please forward this email to your project leaders and past GSoC mentors,
and start listing ideas right away!
Please cc soc list with your doubts and questions.

[1] http://en.flossmanuals.net/GSoCMentoring/making-your-ideas-page/


Best regards,

Dr. Margherita DI LEO
Scientific / technical project officer

European Commission - DG JRC
Institute for Environment and Sustainability (IES)
Via Fermi, 2749
I-21027 Ispra (VA) - Italy - TP 261

Tel. +39 0332 78 3600
margherita.di-leo at jrc.ec.europa.eu

Disclaimer: The views expressed are purely those of the writer and may not
in any circumstance be regarded as stating an official position of the
European Commission.

-------------------------------------------------------
-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From David.Weiss at ptvgroup.com  Tue Feb 17 07:11:03 2015
From: David.Weiss at ptvgroup.com (=?iso-8859-1?Q?David_Wei=DF?=)
Date: Tue, 17 Feb 2015 16:11:03 +0100
Subject: [gdal-dev] Patch to improve libjpeg compatibility on gdal 1.11
Message-ID: <E8D289FB71C3004B832D1702922D3A2003207E267C@SKA-WN-E25CEX.ptvag.ptv.de>

Hey,

the attached patch against the 1.11 branch from svn is basically a backport from the 2.0 branch.

It fixes a namespace problem in
frmts/pcidsk/sdk/core/libjpeg_io.cpp
when building gdal against a current libjpeg version (newer than v6b, tested with v9a).

The technical reason is that libjpeg v6b typedefs boolean as int and uses macros for TRUE and FALSE, which is namespace agnostic.
Newer versions of libjpeg typedef boolean as enum with values TRUE and FALSE, which do not propagate into other namespaces.
Therefor, the use of TRUE inside C++ methods fails.

I encountered the problem when trying to build gdal 1.11.1 against libjpeg v9a.

Please review.

Thanks,
David

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150217/0cdec837/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: libjpeg_io.cpp.patch
Type: application/octet-stream
Size: 457 bytes
Desc: libjpeg_io.cpp.patch
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150217/0cdec837/attachment.obj>

From gdal at stripfamily.net  Tue Feb 17 07:54:29 2015
From: gdal at stripfamily.net (David Strip)
Date: Tue, 17 Feb 2015 08:54:29 -0700
Subject: [gdal-dev] Fwd: [SoC] Preparation of ideas pages for GSoC 2015
 (deadline: 18th February!)
In-Reply-To: <201502171546.08891.even.rouault@spatialys.com>
References: <201502171546.08891.even.rouault@spatialys.com>
Message-ID: <54E36435.4070305@stripfamily.net>

Two thoughts for the list:

1. A more robust algorithm for determining EPSG from WKT.

2. This list recently had an exchange regarding the use of
gdalpolygonize (and the underlying algorithm) on country scale data. The
algorithm works well on the sort of data that is typical of ground cover
classification or other raster sources that have a large number of small
(compared to the image) regions. It doesn't work well on images that
have a small number of very large regions. Perhaps development of an
algorithm that is more suited for this case might be of interest.

3. Adding a polygon simplification algorithm to gdal/ogr. This would
especially useful on the output of gdalpolygonize.

Not clear who could mentor these.

From even.rouault at spatialys.com  Tue Feb 17 08:00:03 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 17 Feb 2015 17:00:03 +0100
Subject: [gdal-dev] Patch to improve libjpeg compatibility on gdal 1.11
In-Reply-To: <E8D289FB71C3004B832D1702922D3A2003207E267C@SKA-WN-E25CEX.ptvag.ptv.de>
References: <E8D289FB71C3004B832D1702922D3A2003207E267C@SKA-WN-E25CEX.ptvag.ptv.de>
Message-ID: <201502171700.03140.even.rouault@spatialys.com>

David,

Hum I can see http://trac.osgeo.org/gdal/changeset/27926#file1 was accidentaly 
committed with an unrelated commit (and should probably be related). When 
digging a bit, it was related to experiments I did with libjpegv9 (not 9a) 
which dates back to 2013 whereas 9a is from 2014, and has a different section 
in jmorecfg.h related to boolean/TRUE/FALSE (and I see I also manually edited 
jmorecfg.h of that older version)

Where I'm confused now is that I don't need any patch in the 1.11 branch to 
compile against 9a...

The releavant extract of the output of g++ -E on libjpeg_io.cpp is
{{{
# 309 "/home/even/install-jpeg-9a/include/jmorecfg.h"
typedef int boolean;
}}}

so it doesn't use at all the "typedef enum { FALSE = 0, TRUE = 1 } boolean;" 
thing.

Even

> Hey,
> 
> the attached patch against the 1.11 branch from svn is basically a backport
> from the 2.0 branch.
> 
> It fixes a namespace problem in
> frmts/pcidsk/sdk/core/libjpeg_io.cpp
> when building gdal against a current libjpeg version (newer than v6b,
> tested with v9a).
> 
> The technical reason is that libjpeg v6b typedefs boolean as int and uses
> macros for TRUE and FALSE, which is namespace agnostic. Newer versions of
> libjpeg typedef boolean as enum with values TRUE and FALSE, which do not
> propagate into other namespaces. Therefor, the use of TRUE inside C++
> methods fails.
> 
> I encountered the problem when trying to build gdal 1.11.1 against libjpeg
> v9a.
> 
> Please review.
> 
> Thanks,
> David

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From nik at nikosalexandris.net  Tue Feb 17 10:02:08 2015
From: nik at nikosalexandris.net (Nikos Alexandris)
Date: Tue, 17 Feb 2015 20:02:08 +0200
Subject: [gdal-dev] HDF support under Gentoo/Funtoo
In-Reply-To: <54E1FFC1.3050900@fu-berlin.de>
References: <304b9b457ab609fbf0b06f46dd016e56@nikosalexandris.net>
	<54E1FFC1.3050900@fu-berlin.de>
Message-ID: <0cdb1f710c250411457fe7383dcc1e5b@nikosalexandris.net>

Sebastian Walter wrote:

> The gentoo ebuild is somehow limited in terms of driver choices in my
> opinion (especially if you have additional commercial licenses to
> include as, e.g. Kakadu or ECW). What I do is to compile a custom 
> gdal
> build and install it to /usr/local. For the current stable 1.11, you
> would emerge sci-libs/hdf first, and then configure the downloaded
> package like this:

> ./configure --prefix=/usr/local --with-python
>
> (both HDF libs are found automatically by configure).

[..]

Thanks Sebastian.  I've been doing that many times in the past 
(ex-Ubuntu user) out of curiosity to learn and the attempt/illusion to 
have control over all things.  I just wanted to avoid repeating this 
again.

Anyhow, it works, of course.  I am sure the ebuild can be improved.

Best regards, Nikos

From robert.coup at koordinates.com  Tue Feb 17 15:10:53 2015
From: robert.coup at koordinates.com (Robert Coup)
Date: Wed, 18 Feb 2015 12:10:53 +1300
Subject: [gdal-dev] Fwd: [SoC] Preparation of ideas pages for GSoC 2015
 (deadline: 18th February!)
In-Reply-To: <201502171546.08891.even.rouault@spatialys.com>
References: <201502171546.08891.even.rouault@spatialys.com>
Message-ID: <CAFLLRpJgS+JiDz5xfC2vTVX6HxkrcRRWe_wcynW=2C9ShzR3CA@mail.gmail.com>

Hi Even,

A few comments/ideas:

1. Integration of cpp GDAL utilities into GDAL core library

I like the idea, but I'd be tempted to take the approach of eg.
GDALUtilTranslate(...) taking arguments (structs/params/whatever) that
correspond to each command line argument. I don't think it needs
capabilities like path/wildcard/argument interpolation, it'll be called
from code and the calling code is perfectly capable of listing files
properly -- this avoids weird string escaping and all sorts of other
complexity, and makes it *simpler* to use from other code and easier for
language bindings. That approach would mean the utility apps themselves
parse arguments and then call the GDALUtilX() functions and report progress
& results, rather than doing absolutely nothing. But this is all a design
decision for the student I guess. I'd be happy to co-mentor.

2. Promoting VSI

The VSI code is pretty cool, and is actually useful for a lot of things
outside GDAL. I'm suggesting looking at whether an external project could
be a better place for it to live (even if it's just a separate
build/packaging from code that continues to live in GDAL) -- adding tests &
CI, looking at cross-platform issues, documenting vsi_preload.so, making a
library other apps could utilise for the functionality (libvsi?), and
creating a FUSE implementation that maps onto the VSI code (ala. mount -t
vsi /vsizip/vsicurl/http://example.com/foo.zip foo/). I'm happy to
mentor/co-mentor this.

3. OpenFileGDB Write support

You have a better idea how much work this is, and whether it'd be suitable
for a student to attempt?

4. Tool(s) for performance profiling and option tuning

Some GDAL options can have enormous effects on the performance of some
operations, depending on dataset size/complexity/source and all sorts of
other factors. I'm imagining a tuning tool that looks at which
caches/limits are being "hit" (or not) during an operation (eg. a specific
gdalwarp), where time is being spent (IO, CPU, ...) and suggest better
settings for your datasets & host configuration. Maybe this could be
expanded in future to select better "defaults" automatically. I'm thinking
settings like: GDAL_MAX_DATASET_POOL_SIZE, GDAL_CACHEMAX, GDAL_SWATH_SIZE,
VSI_CACHE, GDAL_DISABLE_READDIR_ON_OPEN, OSM_MAX_TMPFILE_SIZE, warp
memory/threading/options, and possibly per-format options -- for GTiff
things like tiling, interleaving, overviews, GTIFF_VIRTUAL_MEM_IO,
GTIFF_DIRECT_IO.

In terms of reporting I'm thinking something along the lines of MySQLTuner
- see example output at
https://www.thomas-krenn.com/en/wiki/MySQL_Performance_Tuning. Maybe
invocation like "gdalwarp --tune ..." but would also be good if usage via
library/bindings could be profiled in the same way and the output dumped
somewhere for later analysis/reporting (eg. "gdaltune my_warp.gdaltune").
I'm happy to mentor/co-mentor this.

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150218/95ac8b24/attachment.html>

From even.rouault at spatialys.com  Tue Feb 17 17:24:53 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Feb 2015 02:24:53 +0100
Subject: [gdal-dev] Fwd: [SoC] Preparation of ideas pages for GSoC 2015
	(deadline: 18th February!)
In-Reply-To: <CAFLLRpJgS+JiDz5xfC2vTVX6HxkrcRRWe_wcynW=2C9ShzR3CA@mail.gmail.com>
References: <201502171546.08891.even.rouault@spatialys.com>
	<CAFLLRpJgS+JiDz5xfC2vTVX6HxkrcRRWe_wcynW=2C9ShzR3CA@mail.gmail.com>
Message-ID: <201502180224.53217.even.rouault@spatialys.com>

Robert,

> 
> A few comments/ideas:
> 
> 1. Integration of cpp GDAL utilities into GDAL core library
> 
> I like the idea, but I'd be tempted to take the approach of eg.
> GDALUtilTranslate(...) taking arguments (structs/params/whatever) that
> correspond to each command line argument. I don't think it needs
> capabilities like path/wildcard/argument interpolation, it'll be called
> from code and the calling code is perfectly capable of listing files
> properly -- this avoids weird string escaping and all sorts of other
> complexity, and makes it *simpler* to use from other code and easier for
> language bindings. That approach would mean the utility apps themselves
> parse arguments and then call the GDALUtilX() functions and report progress
> & results, rather than doing absolutely nothing. But this is all a design
> decision for the student I guess. I'd be happy to co-mentor.

Yes the actual design can be solved later.

> 
> 2. Promoting VSI
> 
> The VSI code is pretty cool, and is actually useful for a lot of things
> outside GDAL. I'm suggesting looking at whether an external project could
> be a better place for it to live (even if it's just a separate
> build/packaging from code that continues to live in GDAL) -- adding tests &
> CI, looking at cross-platform issues, documenting vsi_preload.so, making a
> library other apps could utilise for the functionality (libvsi?),

I've no strong opinion on this. At first sight, this doesn't seem to give 
obvious advantages to the GDAL project itself, but rather constraints.

> and
> creating a FUSE implementation that maps onto the VSI code (ala. mount -t
> vsi /vsizip/vsicurl/http://example.com/foo.zip foo/).

I would be surprised if there aren't already FUSE modules that do http or zip, 
but I haven't checked

> I'm happy to
> mentor/co-mentor this.
> 
> 3. OpenFileGDB Write support
> 
> You have a better idea how much work this is, and whether it'd be suitable
> for a student to attempt?

Hum, that depends on the perseverance of the student to not give up if some 
proprietary software refuse to read its neat generated geodatabase or crashes, 
whereas it can be read with the openfilegdb read side ;-) That said reaching to 
the point where the openfilegdb can read generated files would be a required 
milestone, even if the rest of the adventure is more wild...

> 
> 4. Tool(s) for performance profiling and option tuning
> 
> Some GDAL options can have enormous effects on the performance of some
> operations, depending on dataset size/complexity/source and all sorts of
> other factors. I'm imagining a tuning tool that looks at which
> caches/limits are being "hit" (or not) during an operation (eg. a specific
> gdalwarp), where time is being spent (IO, CPU, ...) and suggest better
> settings for your datasets & host configuration. Maybe this could be
> expanded in future to select better "defaults" automatically. I'm thinking
> settings like: GDAL_MAX_DATASET_POOL_SIZE, GDAL_CACHEMAX, GDAL_SWATH_SIZE,
> VSI_CACHE, GDAL_DISABLE_READDIR_ON_OPEN, OSM_MAX_TMPFILE_SIZE, warp
> memory/threading/options, and possibly per-format options -- for GTiff
> things like tiling, interleaving, overviews, GTIFF_VIRTUAL_MEM_IO,
> GTIFF_DIRECT_IO.
> 
> In terms of reporting I'm thinking something along the lines of MySQLTuner
> - see example output at
> https://www.thomas-krenn.com/en/wiki/MySQL_Performance_Tuning. Maybe
> invocation like "gdalwarp --tune ..." but would also be good if usage via
> library/bindings could be profiled in the same way and the output dumped
> somewhere for later analysis/reporting (eg. "gdaltune my_warp.gdaltune").

The idea is interesting and I think many people would welcome such a tool. I'm 
not sure however what is involved to reach the goal. Insert timing 
measurements as you suggest ? But that might not be sufficient to give user 
friendly advice of what to tune and to which values. I'd be afraid this might 
be a difficult subject for a student. That likely involves deep knowledge of 
GDAL internals. But if you have a good feeling on how to accomplish this, why 
not.

> I'm happy to mentor/co-mentor this.

Don't hesitate to write up your ideas on the wiki as time is ticking.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From thare at usgs.gov  Tue Feb 17 17:29:15 2015
From: thare at usgs.gov (Hare, Trent)
Date: Tue, 17 Feb 2015 18:29:15 -0700
Subject: [gdal-dev] Fwd: [SoC] Preparation of ideas pages for GSoC 2015
 (deadline: 18th February!)
In-Reply-To: <201502171546.08891.even.rouault@spatialys.com>
References: <201502171546.08891.even.rouault@spatialys.com>
Message-ID: <CAB6t5t9PDsUxFs_qGYsEc4wHc2HQrgg99w8RcAQjfGMbiaq+cQ@mail.gmail.com>

All,
   I added a third idea for SoC (GDAL image stretch/filter utility). Any
comments or edits are welcome.

Regards,
Trent

On Tue, Feb 17, 2015 at 7:46 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> One day left to draft up your ideas on
>
> http://trac.osgeo.org/gdal/wiki/SummerOfCode
>
> Even
>
> ----------  Message transmis  ----------
>
> Sujet : [SoC] Preparation of ideas pages for GSoC 2015 (deadline: 18th
> February!)
> Date : mercredi 11 f?vrier 2015, 16:24:33
> De : Margherita Di Leo <diregola at gmail.com>
> ? : OSGeo Discussions <discuss at lists.osgeo.org>, "OSGeo-SoC"
> <soc at lists.osgeo.org>
>
> Dear All,
>
> *GSoC 2015* was officially announced earlier this year. The applications
> for mentoring organizations are now open and this year Hamish Bowman and
> myself will be applying for OSGeo's participation.
> The application deadline for mentoring organizations is the 20th of
> February, and right after that, Google will proceed examining the
> organizations. The showcase for evaluating the applications are the *GSoC
> ideas pages* [1], and for this reason, they need to be in perfect shape.
> This means that OSGeo teams are required to set up and shape their pages
> this week, coordinating their teams through their dev mailing lists. The
> pages will then linked to the main GSoC 2015 ideas page on the wiki.
> Please bear in mind that there is no guarantee whatsoever of the acceptance
> by Google based on the success of previous years, but they will judge the
> organizations only on the basis of ideas pages for 2015.
> Please forward this email to your project leaders and past GSoC mentors,
> and start listing ideas right away!
> Please cc soc list with your doubts and questions.
>
> [1] http://en.flossmanuals.net/GSoCMentoring/making-your-ideas-page/
>
>
> Best regards,
>
> Dr. Margherita DI LEO
> Scientific / technical project officer
>
> European Commission - DG JRC
> Institute for Environment and Sustainability (IES)
> Via Fermi, 2749
> I-21027 Ispra (VA) - Italy - TP 261
>
> Tel. +39 0332 78 3600
> margherita.di-leo at jrc.ec.europa.eu
>
> Disclaimer: The views expressed are purely those of the writer and may not
> in any circumstance be regarded as stating an official position of the
> European Commission.
>
> -------------------------------------------------------
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150217/a649ced9/attachment.html>

From bishop.dev at gmail.com  Wed Feb 18 00:34:51 2015
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Wed, 18 Feb 2015 11:34:51 +0300
Subject: [gdal-dev] Fwd: [SoC] Preparation of ideas pages for GSoC 2015
 (deadline: 18th February!)
In-Reply-To: <CAFLLRpJgS+JiDz5xfC2vTVX6HxkrcRRWe_wcynW=2C9ShzR3CA@mail.gmail.com>
References: <201502171546.08891.even.rouault@spatialys.com>
	<CAFLLRpJgS+JiDz5xfC2vTVX6HxkrcRRWe_wcynW=2C9ShzR3CA@mail.gmail.com>
Message-ID: <54E44EAB.70206@gmail.com>

Hi all,

the most of ideas (http://trac.osgeo.org/gdal/wiki/SummerOfCode) are 
marked as moderate/hard.

There are some simple task as:
1. Editing GeoJSON. By now there is a write support but it's something 
special as I cannot edit GeoJSON in QGIS.
2. WMS/TMS. There is no support for subdomains i.e. 
http://${a,b,c}.tile.openstreetmap.org/${z}/${x}/${y}.png. Also it'll be 
nice to have progress indication and support to cancel executing RasterIO.
3. Editing GPX - by now the driver support only write to new file and if 
one open points (trk_pnt) the output will be waypoints (wpt). The 
usecase is to get GPX from GPS tracker, fix the track and upload back to 
GPS tracker.
4. Cmaking the estimate drivers apps and etc.
5. Also addition to #5 in list - new VSI sources (7z, RAR, ssh/scp/sftp)

What do you think, can this be the topic for GSoC?
I didn't add this to the ideas page as this is the topic for discuss.

Best regards,
     Dmitry

18.02.2015 02:10, Robert Coup ?????:
> Hi Even,
>
> A few comments/ideas:
>
> 1. Integration of cpp GDAL utilities into GDAL core library
>
> I like the idea, but I'd be tempted to take the approach of eg. 
> GDALUtilTranslate(...) taking arguments (structs/params/whatever) that 
> correspond to each command line argument. I don't think it needs 
> capabilities like path/wildcard/argument interpolation, it'll be 
> called from code and the calling code is perfectly capable of listing 
> files properly -- this avoids weird string escaping and all sorts of 
> other complexity, and makes it /simpler/ to use from other code and 
> easier for language bindings. That approach would mean the utility 
> apps themselves parse arguments and then call the GDALUtilX() 
> functions and report progress & results, rather than doing absolutely 
> nothing. But this is all a design decision for the student I guess. 
> I'd be happy to co-mentor.
>
> 2. Promoting VSI
>
> The VSI code is pretty cool, and is actually useful for a lot of 
> things outside GDAL. I'm suggesting looking at whether an external 
> project could be a better place for it to live (even if it's just a 
> separate build/packaging from code that continues to live in GDAL) -- 
> adding tests & CI, looking at cross-platform issues, documenting 
> vsi_preload.so, making a library other apps could utilise for the 
> functionality (libvsi?), and creating a FUSE implementation that maps 
> onto the VSI code (ala. mount -t vsi 
> /vsizip/vsicurl/http://example.com/foo.zip foo/). I'm happy to 
> mentor/co-mentor this.
>
> 3. OpenFileGDB Write support
>
> You have a better idea how much work this is, and whether it'd be 
> suitable for a student to attempt?
>
> 4. Tool(s) for performance profiling and option tuning
>
> Some GDAL options can have enormous effects on the performance of some 
> operations, depending on dataset size/complexity/source and all sorts 
> of other factors. I'm imagining a tuning tool that looks at which 
> caches/limits are being "hit" (or not) during an operation (eg. a 
> specific gdalwarp), where time is being spent (IO, CPU, ...) and 
> suggest better settings for your datasets & host configuration. Maybe 
> this could be expanded in future to select better "defaults" 
> automatically. I'm thinking settings like: GDAL_MAX_DATASET_POOL_SIZE, 
> GDAL_CACHEMAX, GDAL_SWATH_SIZE, VSI_CACHE, 
> GDAL_DISABLE_READDIR_ON_OPEN, OSM_MAX_TMPFILE_SIZE, warp 
> memory/threading/options, and possibly per-format options -- for GTiff 
> things like tiling, interleaving, overviews, GTIFF_VIRTUAL_MEM_IO, 
> GTIFF_DIRECT_IO.
>
> In terms of reporting I'm thinking something along the lines of 
> MySQLTuner - see example output at 
> https://www.thomas-krenn.com/en/wiki/MySQL_Performance_Tuning. Maybe 
> invocation like "gdalwarp --tune ..." but would also be good if usage 
> via library/bindings could be profiled in the same way and the output 
> dumped somewhere for later analysis/reporting (eg. "gdaltune 
> my_warp.gdaltune"). I'm happy to mentor/co-mentor this.
>
> Rob :)
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150218/1c8e740c/attachment-0001.html>

From even.rouault at spatialys.com  Wed Feb 18 01:50:29 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Feb 2015 10:50:29 +0100
Subject: [gdal-dev] Fwd: [SoC] Preparation of ideas pages for GSoC 2015
	(deadline: 18th February!)
In-Reply-To: <54E44EAB.70206@gmail.com>
References: <201502171546.08891.even.rouault@spatialys.com>
	<CAFLLRpJgS+JiDz5xfC2vTVX6HxkrcRRWe_wcynW=2C9ShzR3CA@mail.gmail.com>
	<54E44EAB.70206@gmail.com>
Message-ID: <201502181050.29645.even.rouault@spatialys.com>

Le mercredi 18 f?vrier 2015 09:34:51, Dmitriy Baryshnikov a ?crit :
> Hi all,
> 
> the most of ideas (http://trac.osgeo.org/gdal/wiki/SummerOfCode) are
> marked as moderate/hard.
> 
> There are some simple task as:
> 1. Editing GeoJSON. By now there is a write support but it's something
> special as I cannot edit GeoJSON in QGIS.

That could be generallized to any datasource that has read-only and write-only 
capabilities but no real editing capabilities (i.e doesn't support 
SetFeature() and DeleteFeature()). Would likely be done though a coupling 
between the memory datasource and the real driver.

> 2. WMS/TMS. There is no support for subdomains i.e.
> http://${a,b,c}.tile.openstreetmap.org/${z}/${x}/${y}.png. Also it'll be
> nice to have progress indication and support to cancel executing RasterIO.
> 3. Editing GPX - by now the driver support only write to new file and if
> one open points (trk_pnt) the output will be waypoints (wpt). The
> usecase is to get GPX from GPS tracker, fix the track and upload back to
> GPS tracker.
> 4. Cmaking the estimate drivers apps and etc.
> 5. Also addition to #5 in list - new VSI sources (7z, RAR, ssh/scp/sftp)
> 
> What do you think, can this be the topic for GSoC?

Mosts sound like usefull additions but perhaps not be substantial enough taken 
individually.

> I didn't add this to the ideas page as this is the topic for discuss.
> 
> Best regards,
>      Dmitry
> 
> 18.02.2015 02:10, Robert Coup ?????:
> > Hi Even,
> > 
> > A few comments/ideas:
> > 
> > 1. Integration of cpp GDAL utilities into GDAL core library
> > 
> > I like the idea, but I'd be tempted to take the approach of eg.
> > GDALUtilTranslate(...) taking arguments (structs/params/whatever) that
> > correspond to each command line argument. I don't think it needs
> > capabilities like path/wildcard/argument interpolation, it'll be
> > called from code and the calling code is perfectly capable of listing
> > files properly -- this avoids weird string escaping and all sorts of
> > other complexity, and makes it /simpler/ to use from other code and
> > easier for language bindings. That approach would mean the utility
> > apps themselves parse arguments and then call the GDALUtilX()
> > functions and report progress & results, rather than doing absolutely
> > nothing. But this is all a design decision for the student I guess.
> > I'd be happy to co-mentor.
> > 
> > 2. Promoting VSI
> > 
> > The VSI code is pretty cool, and is actually useful for a lot of
> > things outside GDAL. I'm suggesting looking at whether an external
> > project could be a better place for it to live (even if it's just a
> > separate build/packaging from code that continues to live in GDAL) --
> > adding tests & CI, looking at cross-platform issues, documenting
> > vsi_preload.so, making a library other apps could utilise for the
> > functionality (libvsi?), and creating a FUSE implementation that maps
> > onto the VSI code (ala. mount -t vsi
> > /vsizip/vsicurl/http://example.com/foo.zip foo/). I'm happy to
> > mentor/co-mentor this.
> > 
> > 3. OpenFileGDB Write support
> > 
> > You have a better idea how much work this is, and whether it'd be
> > suitable for a student to attempt?
> > 
> > 4. Tool(s) for performance profiling and option tuning
> > 
> > Some GDAL options can have enormous effects on the performance of some
> > operations, depending on dataset size/complexity/source and all sorts
> > of other factors. I'm imagining a tuning tool that looks at which
> > caches/limits are being "hit" (or not) during an operation (eg. a
> > specific gdalwarp), where time is being spent (IO, CPU, ...) and
> > suggest better settings for your datasets & host configuration. Maybe
> > this could be expanded in future to select better "defaults"
> > automatically. I'm thinking settings like: GDAL_MAX_DATASET_POOL_SIZE,
> > GDAL_CACHEMAX, GDAL_SWATH_SIZE, VSI_CACHE,
> > GDAL_DISABLE_READDIR_ON_OPEN, OSM_MAX_TMPFILE_SIZE, warp
> > memory/threading/options, and possibly per-format options -- for GTiff
> > things like tiling, interleaving, overviews, GTIFF_VIRTUAL_MEM_IO,
> > GTIFF_DIRECT_IO.
> > 
> > In terms of reporting I'm thinking something along the lines of
> > MySQLTuner - see example output at
> > https://www.thomas-krenn.com/en/wiki/MySQL_Performance_Tuning. Maybe
> > invocation like "gdalwarp --tune ..." but would also be good if usage
> > via library/bindings could be profiled in the same way and the output
> > dumped somewhere for later analysis/reporting (eg. "gdaltune
> > my_warp.gdaltune"). I'm happy to mentor/co-mentor this.
> > 
> > Rob :)
> > 
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From David.Weiss at ptvgroup.com  Wed Feb 18 02:04:32 2015
From: David.Weiss at ptvgroup.com (=?utf-8?B?RGF2aWQgV2Vpw58=?=)
Date: Wed, 18 Feb 2015 11:04:32 +0100
Subject: [gdal-dev] Patch to improve libjpeg compatibility on gdal 1.11
In-Reply-To: <201502171700.03140.even.rouault@spatialys.com>
References: <E8D289FB71C3004B832D1702922D3A2003207E267C@SKA-WN-E25CEX.ptvag.ptv.de>
	<201502171700.03140.even.rouault@spatialys.com>
Message-ID: <E8D289FB71C3004B832D1702922D3A2003207E267D@SKA-WN-E25CEX.ptvag.ptv.de>

Hey Even,

> Where I'm confused now is that I don't need any patch in the 1.11 branch to
> compile against 9a...
> 
> The releavant extract of the output of g++ -E on libjpeg_io.cpp is {{{ # 309
> "/home/even/install-jpeg-9a/include/jmorecfg.h"
> typedef int boolean;
> }}}
> 
> so it doesn't use at all the "typedef enum { FALSE = 0, TRUE = 1 } boolean;"
> thing.

Maybe GCC doesn't because of line 307:
	#if defined FALSE || defined TRUE || defined QGLOBAL_H

But MSVC fails to have one of these defined and thus uses the else-case:
	#else
	typedef enum { FALSE = 0, TRUE = 1 } boolean;

Should have mentioned that the problem occurred building with MS VS 2010.

Blessings,

David

From bishop.dev at gmail.com  Wed Feb 18 02:21:06 2015
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Wed, 18 Feb 2015 13:21:06 +0300
Subject: [gdal-dev] Fwd: [SoC] Preparation of ideas pages for GSoC 2015
 (deadline: 18th February!)
In-Reply-To: <201502181050.29645.even.rouault@spatialys.com>
References: <201502171546.08891.even.rouault@spatialys.com>
	<CAFLLRpJgS+JiDz5xfC2vTVX6HxkrcRRWe_wcynW=2C9ShzR3CA@mail.gmail.com>
	<54E44EAB.70206@gmail.com>
	<201502181050.29645.even.rouault@spatialys.com>
Message-ID: <54E46792.8090308@gmail.com>

Hi Even,

I agree with you that this may not be enough for GSoC. OK, let's take 
this into account next time.

Best regards,
     Dmitry

18.02.2015 12:50, Even Rouault ?????:
> Le mercredi 18 f?vrier 2015 09:34:51, Dmitriy Baryshnikov a ?crit :
>> Hi all,
>>
>> the most of ideas (http://trac.osgeo.org/gdal/wiki/SummerOfCode) are
>> marked as moderate/hard.
>>
>> There are some simple task as:
>> 1. Editing GeoJSON. By now there is a write support but it's something
>> special as I cannot edit GeoJSON in QGIS.
> That could be generallized to any datasource that has read-only and write-only
> capabilities but no real editing capabilities (i.e doesn't support
> SetFeature() and DeleteFeature()). Would likely be done though a coupling
> between the memory datasource and the real driver.
>
>> 2. WMS/TMS. There is no support for subdomains i.e.
>> http://${a,b,c}.tile.openstreetmap.org/${z}/${x}/${y}.png. Also it'll be
>> nice to have progress indication and support to cancel executing RasterIO.
>> 3. Editing GPX - by now the driver support only write to new file and if
>> one open points (trk_pnt) the output will be waypoints (wpt). The
>> usecase is to get GPX from GPS tracker, fix the track and upload back to
>> GPS tracker.
>> 4. Cmaking the estimate drivers apps and etc.
>> 5. Also addition to #5 in list - new VSI sources (7z, RAR, ssh/scp/sftp)
>>
>> What do you think, can this be the topic for GSoC?
> Mosts sound like usefull additions but perhaps not be substantial enough taken
> individually.
>
>> I didn't add this to the ideas page as this is the topic for discuss.
>>
>> Best regards,
>>       Dmitry
>>
>> 18.02.2015 02:10, Robert Coup ?????:
>>> Hi Even,
>>>
>>> A few comments/ideas:
>>>
>>> 1. Integration of cpp GDAL utilities into GDAL core library
>>>
>>> I like the idea, but I'd be tempted to take the approach of eg.
>>> GDALUtilTranslate(...) taking arguments (structs/params/whatever) that
>>> correspond to each command line argument. I don't think it needs
>>> capabilities like path/wildcard/argument interpolation, it'll be
>>> called from code and the calling code is perfectly capable of listing
>>> files properly -- this avoids weird string escaping and all sorts of
>>> other complexity, and makes it /simpler/ to use from other code and
>>> easier for language bindings. That approach would mean the utility
>>> apps themselves parse arguments and then call the GDALUtilX()
>>> functions and report progress & results, rather than doing absolutely
>>> nothing. But this is all a design decision for the student I guess.
>>> I'd be happy to co-mentor.
>>>
>>> 2. Promoting VSI
>>>
>>> The VSI code is pretty cool, and is actually useful for a lot of
>>> things outside GDAL. I'm suggesting looking at whether an external
>>> project could be a better place for it to live (even if it's just a
>>> separate build/packaging from code that continues to live in GDAL) --
>>> adding tests & CI, looking at cross-platform issues, documenting
>>> vsi_preload.so, making a library other apps could utilise for the
>>> functionality (libvsi?), and creating a FUSE implementation that maps
>>> onto the VSI code (ala. mount -t vsi
>>> /vsizip/vsicurl/http://example.com/foo.zip foo/). I'm happy to
>>> mentor/co-mentor this.
>>>
>>> 3. OpenFileGDB Write support
>>>
>>> You have a better idea how much work this is, and whether it'd be
>>> suitable for a student to attempt?
>>>
>>> 4. Tool(s) for performance profiling and option tuning
>>>
>>> Some GDAL options can have enormous effects on the performance of some
>>> operations, depending on dataset size/complexity/source and all sorts
>>> of other factors. I'm imagining a tuning tool that looks at which
>>> caches/limits are being "hit" (or not) during an operation (eg. a
>>> specific gdalwarp), where time is being spent (IO, CPU, ...) and
>>> suggest better settings for your datasets & host configuration. Maybe
>>> this could be expanded in future to select better "defaults"
>>> automatically. I'm thinking settings like: GDAL_MAX_DATASET_POOL_SIZE,
>>> GDAL_CACHEMAX, GDAL_SWATH_SIZE, VSI_CACHE,
>>> GDAL_DISABLE_READDIR_ON_OPEN, OSM_MAX_TMPFILE_SIZE, warp
>>> memory/threading/options, and possibly per-format options -- for GTiff
>>> things like tiling, interleaving, overviews, GTIFF_VIRTUAL_MEM_IO,
>>> GTIFF_DIRECT_IO.
>>>
>>> In terms of reporting I'm thinking something along the lines of
>>> MySQLTuner - see example output at
>>> https://www.thomas-krenn.com/en/wiki/MySQL_Performance_Tuning. Maybe
>>> invocation like "gdalwarp --tune ..." but would also be good if usage
>>> via library/bindings could be profiled in the same way and the output
>>> dumped somewhere for later analysis/reporting (eg. "gdaltune
>>> my_warp.gdaltune"). I'm happy to mentor/co-mentor this.
>>>
>>> Rob :)
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at spatialys.com  Wed Feb 18 02:24:48 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Feb 2015 11:24:48 +0100
Subject: [gdal-dev] Patch to improve libjpeg compatibility on gdal 1.11
In-Reply-To: <E8D289FB71C3004B832D1702922D3A2003207E267D@SKA-WN-E25CEX.ptvag.ptv.de>
References: <E8D289FB71C3004B832D1702922D3A2003207E267C@SKA-WN-E25CEX.ptvag.ptv.de>
	<201502171700.03140.even.rouault@spatialys.com>
	<E8D289FB71C3004B832D1702922D3A2003207E267D@SKA-WN-E25CEX.ptvag.ptv.de>
Message-ID: <201502181124.49046.even.rouault@spatialys.com>

Le mercredi 18 f?vrier 2015 11:04:32, David Wei? a ?crit :
> Hey Even,
> 
> > Where I'm confused now is that I don't need any patch in the 1.11 branch
> > to compile against 9a...
> > 
> > The releavant extract of the output of g++ -E on libjpeg_io.cpp is {{{ #
> > 309 "/home/even/install-jpeg-9a/include/jmorecfg.h"
> > typedef int boolean;
> > }}}
> > 
> > so it doesn't use at all the "typedef enum { FALSE = 0, TRUE = 1 }
> > boolean;" thing.
> 
> Maybe GCC doesn't because of line 307:
> 	#if defined FALSE || defined TRUE || defined QGLOBAL_H
> 
> But MSVC fails to have one of these defined and thus uses the else-case:
> 	#else
> 	typedef enum { FALSE = 0, TRUE = 1 } boolean;
> 
> Should have mentioned that the problem occurred building with MS VS 2010.

David,

Hum, I've tried to replicate a minimalistic version of libjpeg_io.cpp:


"""
namespace PCIDSK
{
};

#include "cpl_port.h"

using namespace PCIDSK;

extern "C" {
typedef enum { FALSE = 0, TRUE = 1 } boolean;
}
"""

The above fails to compile because cpl_port.h contains:
"""
#ifndef FALSE
#  define FALSE 0
#endif

#ifndef TRUE
#  define TRUE  1
#endif
"""

With gcc 4.4 :
test.cc:10: error: expected identifier before numeric constant
test.cc:10: error: expected ?}? before numeric constant
test.cc:10: error: expected unqualified-id before numeric constant
test.cc:10: error: expected constructor, destructor, or type conversion before 
?;? token
test.cc:11: error: expected declaration before ?}? token

With clang 3.2:
test.cc:10:16: error: expected '}'
typedef enum { FALSE = 0, TRUE = 1 } boolean;
               ^
port/cpl_port.h:326:17: note: expanded from macro 'FALSE'
#  define FALSE 0
                ^
test.cc:10:14: note: to match this '{'
typedef enum { FALSE = 0, TRUE = 1 } boolean;
             ^
1 error generated.

With VS 2008:
test.cc(10) : error C2143: syntax error : missing '}' before 'constant'
test.cc(10) : error C2143: syntax error : missing ';' before '}'
test.cc(10) : error C4430: missing type specifier - int assumed. Note: C++ does 
not support default-int
test.cc(11) : error C2059: syntax error : '}'
test.cc(11) : error C2143: syntax error : missing ';' before '}'
test.cc(11) : error C2059: syntax error : '}'


I'm also not completely convinced by the fact that "typedef boolean as enum 
with values TRUE and FALSE, which do not propagate into other namespace"

The following small experiment (with "include cpl_port.h" commented) compiles 
fine :

"""
namespace PCIDSK
{
    int foo();
};

//#include "cpl_port.h"

using namespace PCIDSK;

extern "C" {
typedef enum { FALSE = 0, TRUE = 1 } boolean;
}

int PCIDSK::foo()
{
    return TRUE;
}
"""

I must certainly miss something...

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mani.iiit123 at gmail.com  Wed Feb 18 02:43:10 2015
From: mani.iiit123 at gmail.com (Manikanta Kondeti)
Date: Wed, 18 Feb 2015 16:13:10 +0530
Subject: [gdal-dev] Reg: Getting center coordinates for the attributes in a
	geojson
Message-ID: <CAMxCCEZD9j4-HNr6R_eyyW_=6dr_cS5wizGw_8YOfRVNZbj1Ow@mail.gmail.com>

Hi all,

I'm working on a project which aims  to visualize Spatial Vector Data on a
browser. Using gdal I will convert Shapefiles, kml, gml into geojson and
send it back to the browser.

I want to draw labels(attributes) on the map, using GDAL can I get each
feature's centre coordinates without computing them on the browser side, so
that I can easily draw them  on the map?

Looking forward to your reply.

Thanks,
Mani
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150218/b03d3ccc/attachment.html>

From even.rouault at spatialys.com  Wed Feb 18 02:50:01 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Feb 2015 11:50:01 +0100
Subject: [gdal-dev] Reg: Getting center coordinates for the attributes
	in a geojson
In-Reply-To: <CAMxCCEZD9j4-HNr6R_eyyW_=6dr_cS5wizGw_8YOfRVNZbj1Ow@mail.gmail.com>
References: <CAMxCCEZD9j4-HNr6R_eyyW_=6dr_cS5wizGw_8YOfRVNZbj1Ow@mail.gmail.com>
Message-ID: <201502181150.01522.even.rouault@spatialys.com>

Le mercredi 18 f?vrier 2015 11:43:10, Manikanta Kondeti a ?crit :
> Hi all,
> 
> I'm working on a project which aims  to visualize Spatial Vector Data on a
> browser. Using gdal I will convert Shapefiles, kml, gml into geojson and
> send it back to the browser.
> 
> I want to draw labels(attributes) on the map, using GDAL can I get each
> feature's centre coordinates without computing them on the browser side, so
> that I can easily draw them  on the map?

Mani,

OGR_G_Centroid() /  OGRGeometry::Centroid() should help.

See
http://www.gdal.org/ogr__api_8h.html#a23f5a19a81628af7f9cc59a37378cb2b

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mani.iiit123 at gmail.com  Wed Feb 18 03:02:23 2015
From: mani.iiit123 at gmail.com (Manikanta Kondeti)
Date: Wed, 18 Feb 2015 16:32:23 +0530
Subject: [gdal-dev] Reg: Getting center coordinates for the attributes
 in a geojson
In-Reply-To: <201502181150.01522.even.rouault@spatialys.com>
References: <CAMxCCEZD9j4-HNr6R_eyyW_=6dr_cS5wizGw_8YOfRVNZbj1Ow@mail.gmail.com>
	<201502181150.01522.even.rouault@spatialys.com>
Message-ID: <CAMxCCEbNkLjqm9OCgY=UqnMMe_KN8vd143YBwdVNy1XaMPw0yw@mail.gmail.com>

Hello,

Thanks for the response.  Can I put a flag for the centroid computation?

For eg:  ogr2ogr -f GeoJSON -t_srs crs:84 [name].geojson [name].shp
 (--flag for centroid??)


On Wed, Feb 18, 2015 at 4:20 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mercredi 18 f?vrier 2015 11:43:10, Manikanta Kondeti a ?crit :
> > Hi all,
> >
> > I'm working on a project which aims  to visualize Spatial Vector Data on
> a
> > browser. Using gdal I will convert Shapefiles, kml, gml into geojson and
> > send it back to the browser.
> >
> > I want to draw labels(attributes) on the map, using GDAL can I get each
> > feature's centre coordinates without computing them on the browser side,
> so
> > that I can easily draw them  on the map?
>
> Mani,
>
> OGR_G_Centroid() /  OGRGeometry::Centroid() should help.
>
> See
> http://www.gdal.org/ogr__api_8h.html#a23f5a19a81628af7f9cc59a37378cb2b
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150218/c758680d/attachment-0001.html>

From even.rouault at spatialys.com  Wed Feb 18 03:10:11 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Feb 2015 12:10:11 +0100
Subject: [gdal-dev] Reg: Getting center coordinates for the attributes
	in a geojson
In-Reply-To: <CAMxCCEbNkLjqm9OCgY=UqnMMe_KN8vd143YBwdVNy1XaMPw0yw@mail.gmail.com>
References: <CAMxCCEZD9j4-HNr6R_eyyW_=6dr_cS5wizGw_8YOfRVNZbj1Ow@mail.gmail.com>
	<201502181150.01522.even.rouault@spatialys.com>
	<CAMxCCEbNkLjqm9OCgY=UqnMMe_KN8vd143YBwdVNy1XaMPw0yw@mail.gmail.com>
Message-ID: <201502181210.11110.even.rouault@spatialys.com>

Le mercredi 18 f?vrier 2015 12:02:23, Manikanta Kondeti a ?crit :
> Hello,
> 
> Thanks for the response.  Can I put a flag for the centroid computation?
> 
> For eg:  ogr2ogr -f GeoJSON -t_srs crs:84 [name].geojson [name].shp
>  (--flag for centroid??)

If your GDAL build is configured with spatialite support (and is at least GDAL 
1.10), you can try the ST_Centroid() SQL function with the SQLite dialect ( 
http://www.gdal.org/ogr_sql_sqlite.html )

Something like :

ogr2ogr -f geojson out.json poly.shp \
 -sql "select st_centroid(geometry) as geometry, * from poly" -dialect sqlite

> 
> 
> On Wed, Feb 18, 2015 at 4:20 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le mercredi 18 f?vrier 2015 11:43:10, Manikanta Kondeti a ?crit :
> > > Hi all,
> > > 
> > > I'm working on a project which aims  to visualize Spatial Vector Data
> > > on
> > 
> > a
> > 
> > > browser. Using gdal I will convert Shapefiles, kml, gml into geojson
> > > and send it back to the browser.
> > > 
> > > I want to draw labels(attributes) on the map, using GDAL can I get each
> > > feature's centre coordinates without computing them on the browser
> > > side,
> > 
> > so
> > 
> > > that I can easily draw them  on the map?
> > 
> > Mani,
> > 
> > OGR_G_Centroid() /  OGRGeometry::Centroid() should help.
> > 
> > See
> > http://www.gdal.org/ogr__api_8h.html#a23f5a19a81628af7f9cc59a37378cb2b
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mani.iiit123 at gmail.com  Wed Feb 18 03:20:19 2015
From: mani.iiit123 at gmail.com (Manikanta Kondeti)
Date: Wed, 18 Feb 2015 16:50:19 +0530
Subject: [gdal-dev] Reg: Getting center coordinates for the attributes
 in a geojson
In-Reply-To: <201502181210.11110.even.rouault@spatialys.com>
References: <CAMxCCEZD9j4-HNr6R_eyyW_=6dr_cS5wizGw_8YOfRVNZbj1Ow@mail.gmail.com>
	<201502181150.01522.even.rouault@spatialys.com>
	<CAMxCCEbNkLjqm9OCgY=UqnMMe_KN8vd143YBwdVNy1XaMPw0yw@mail.gmail.com>
	<201502181210.11110.even.rouault@spatialys.com>
Message-ID: <CAMxCCEaDcb_J80T7oinYmEu7T8xHXiNKdKCnWKuKRCoMBcFftA@mail.gmail.com>

That looks pretty awesome. It is giving me a geometry object with
centroidx, centroidy.

But the issue is I lost all the 'coordinates' array in the geometry object.

So what I need is both coordinates and centroid as well.

Thanks,
Mani

On Wed, Feb 18, 2015 at 4:40 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mercredi 18 f?vrier 2015 12:02:23, Manikanta Kondeti a ?crit :
> > Hello,
> >
> > Thanks for the response.  Can I put a flag for the centroid computation?
> >
> > For eg:  ogr2ogr -f GeoJSON -t_srs crs:84 [name].geojson [name].shp
> >  (--flag for centroid??)
>
> If your GDAL build is configured with spatialite support (and is at least
> GDAL
> 1.10), you can try the ST_Centroid() SQL function with the SQLite dialect (
> http://www.gdal.org/ogr_sql_sqlite.html )
>
> Something like :
>
> ogr2ogr -f geojson out.json poly.shp \
>  -sql "select st_centroid(geometry) as geometry, * from poly" -dialect
> sqlite
>
> >
> >
> > On Wed, Feb 18, 2015 at 4:20 PM, Even Rouault <
> even.rouault at spatialys.com>
> >
> > wrote:
> > > Le mercredi 18 f?vrier 2015 11:43:10, Manikanta Kondeti a ?crit :
> > > > Hi all,
> > > >
> > > > I'm working on a project which aims  to visualize Spatial Vector Data
> > > > on
> > >
> > > a
> > >
> > > > browser. Using gdal I will convert Shapefiles, kml, gml into geojson
> > > > and send it back to the browser.
> > > >
> > > > I want to draw labels(attributes) on the map, using GDAL can I get
> each
> > > > feature's centre coordinates without computing them on the browser
> > > > side,
> > >
> > > so
> > >
> > > > that I can easily draw them  on the map?
> > >
> > > Mani,
> > >
> > > OGR_G_Centroid() /  OGRGeometry::Centroid() should help.
> > >
> > > See
> > > http://www.gdal.org/ogr__api_8h.html#a23f5a19a81628af7f9cc59a37378cb2b
> > >
> > > Even
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150218/c6d6e207/attachment.html>

From even.rouault at spatialys.com  Wed Feb 18 03:29:52 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Feb 2015 12:29:52 +0100
Subject: [gdal-dev] Reg: Getting center coordinates for the attributes
	in a geojson
In-Reply-To: <CAMxCCEaDcb_J80T7oinYmEu7T8xHXiNKdKCnWKuKRCoMBcFftA@mail.gmail.com>
References: <CAMxCCEZD9j4-HNr6R_eyyW_=6dr_cS5wizGw_8YOfRVNZbj1Ow@mail.gmail.com>
	<201502181210.11110.even.rouault@spatialys.com>
	<CAMxCCEaDcb_J80T7oinYmEu7T8xHXiNKdKCnWKuKRCoMBcFftA@mail.gmail.com>
Message-ID: <201502181229.52176.even.rouault@spatialys.com>

Le mercredi 18 f?vrier 2015 12:20:19, Manikanta Kondeti a ?crit :
> That looks pretty awesome. It is giving me a geometry object with
> centroidx, centroidy.
> 
> But the issue is I lost all the 'coordinates' array in the geometry object.
> 
> So what I need is both coordinates and centroid as well.

GeoJSON only supports one geometry field per object. The closest you can do is 
to have your original object and the object with centroid.

You can do that into several steps:
- reproject with ogr2ogr your shape into another shape
- with a variation of my previous proposed ogr2ogr with st_centroid, compute 
centroid and reproject into another shape
- create a union VRT as we have discussed recently in
http://lists.osgeo.org/pipermail/gdal-dev/2015-February/040955.html
- convert the union VRT into GeoJSON

~~~~~~

Hum, there's perhaps another simpler solution if you are OK for having the 
centroid coordinates as regular GeoJSON attributes. You can try something like 
:
"select st_x(st_centroid(geometry)) as centroid_x, st_y(st_centroid(geometry)) 
as centroid_y, * from the_shape_layer"

Note: reprojection of the centroid coordinates will not occur with -t_srs. You 
should do it manually with st_transform(). Or just reproject your shapefile 
before.

> 
> Thanks,
> Mani
> 
> On Wed, Feb 18, 2015 at 4:40 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le mercredi 18 f?vrier 2015 12:02:23, Manikanta Kondeti a ?crit :
> > > Hello,
> > > 
> > > Thanks for the response.  Can I put a flag for the centroid
> > > computation?
> > > 
> > > For eg:  ogr2ogr -f GeoJSON -t_srs crs:84 [name].geojson [name].shp
> > > 
> > >  (--flag for centroid??)
> > 
> > If your GDAL build is configured with spatialite support (and is at least
> > GDAL
> > 1.10), you can try the ST_Centroid() SQL function with the SQLite dialect
> > ( http://www.gdal.org/ogr_sql_sqlite.html )
> > 
> > Something like :
> > 
> > ogr2ogr -f geojson out.json poly.shp \
> > 
> >  -sql "select st_centroid(geometry) as geometry, * from poly" -dialect
> > 
> > sqlite
> > 
> > > On Wed, Feb 18, 2015 at 4:20 PM, Even Rouault <
> > 
> > even.rouault at spatialys.com>
> > 
> > > wrote:
> > > > Le mercredi 18 f?vrier 2015 11:43:10, Manikanta Kondeti a ?crit :
> > > > > Hi all,
> > > > > 
> > > > > I'm working on a project which aims  to visualize Spatial Vector
> > > > > Data on
> > > > 
> > > > a
> > > > 
> > > > > browser. Using gdal I will convert Shapefiles, kml, gml into
> > > > > geojson and send it back to the browser.
> > > > > 
> > > > > I want to draw labels(attributes) on the map, using GDAL can I get
> > 
> > each
> > 
> > > > > feature's centre coordinates without computing them on the browser
> > > > > side,
> > > > 
> > > > so
> > > > 
> > > > > that I can easily draw them  on the map?
> > > > 
> > > > Mani,
> > > > 
> > > > OGR_G_Centroid() /  OGRGeometry::Centroid() should help.
> > > > 
> > > > See
> > > > http://www.gdal.org/ogr__api_8h.html#a23f5a19a81628af7f9cc59a37378cb2
> > > > b
> > > > 
> > > > Even
> > > > 
> > > > --
> > > > Spatialys - Geospatial professional services
> > > > http://www.spatialys.com
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From David.Weiss at ptvgroup.com  Wed Feb 18 04:08:38 2015
From: David.Weiss at ptvgroup.com (=?utf-8?B?RGF2aWQgV2Vpw58=?=)
Date: Wed, 18 Feb 2015 13:08:38 +0100
Subject: [gdal-dev] Patch to improve libjpeg compatibility on gdal 1.11
In-Reply-To: <201502181124.49046.even.rouault@spatialys.com>
References: <E8D289FB71C3004B832D1702922D3A2003207E267C@SKA-WN-E25CEX.ptvag.ptv.de>
	<201502171700.03140.even.rouault@spatialys.com>
	<E8D289FB71C3004B832D1702922D3A2003207E267D@SKA-WN-E25CEX.ptvag.ptv.de>
	<201502181124.49046.even.rouault@spatialys.com>
Message-ID: <E8D289FB71C3004B832D1702922D3A2003207E267E@SKA-WN-E25CEX.ptvag.ptv.de>

> Hum, I've tried to replicate a minimalistic version of libjpeg_io.cpp:
> 
> 
> """
> namespace PCIDSK
> {
> };
> 
> #include "cpl_port.h"
> 
> using namespace PCIDSK;
> 
> extern "C" {
> typedef enum { FALSE = 0, TRUE = 1 } boolean; } """
> 
> The above fails to compile because cpl_port.h contains:
> """
> #ifndef FALSE
> #  define FALSE 0
> #endif
> 
> #ifndef TRUE
> #  define TRUE  1
> #endif
> """

The
#include "cpl_port.h"
has not been present in gdal 1.11.1 release, where I first noticed the problem.

Commit 27739 added the include which fixed the problem, because now when jmorecfg.h is included, TRUE is already defined thus triggering the definition of boolean as int and not enum.

Only noticed after trying to reproduce the problem in a clean environment :)
Should have checked for that before submitting a useless patch.

> I'm also not completely convinced by the fact that "typedef boolean as enum
> with values TRUE and FALSE, which do not propagate into other namespace"
> 
> The following small experiment (with "include cpl_port.h" commented)
> compiles
> fine :
> 
> """
> namespace PCIDSK
> {
>     int foo();
> };
> 
> //#include "cpl_port.h"
> 
> using namespace PCIDSK;
> 
> extern "C" {
> typedef enum { FALSE = 0, TRUE = 1 } boolean;
> }
> 
> int PCIDSK::foo()
> {
>     return TRUE;
> }
> """
> 
> I must certainly miss something...

Weird.. at least in VS2010 it didn't work.
I can reproduce it, if I replace
#include "cpl_port.h"
with
#define CPL_UNUSED
(because that will cause other errors..)

cl   /nologo /MD /EHsc /Ox /D_CRT_SECURE_NO_DEPRECATE /D_CRT_NONSTDC_NO_DEPRECATE /DNDEBUG /W4 /wd4127 /wd4251 /wd4275 /wd4786 /wd4100 /wd4245 /wd4206 /wd4018 /wd4389 /DHAVE_SSE_AT_COMPILE_TIME -I..\..\port -I..\..\ogr -I..\..\gcore  -I..\..\alg -I..\..\ogr\ogrsf_frmts  -DOGR_ENABLED  -Isdk -DPCIDSK_INTERNAL -DHAVE_LIBJPEG -I"S:\ext\repo\libjpeg-win-x64-vc10\include" /c sdk\core\libjpeg_io.cpp /Fosdk\core\libjpeg_io.obj
libjpeg_io.cpp
sdk\core\libjpeg_io.cpp(109) : error C2065: 'TRUE' : undeclared identifier
sdk\core\libjpeg_io.cpp(177) : error C2065: 'TRUE' : undeclared identifier
sdk\core\libjpeg_io.cpp(178) : error C2065: 'TRUE' : undeclared identifier
sdk\core\libjpeg_io.cpp(195) : warning C4267: '=' : conversion from 'size_t' to 'int', possible loss of data

> 
> Even
> 
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From jacobmendt at googlemail.com  Wed Feb 18 06:09:14 2015
From: jacobmendt at googlemail.com (Jacob Mendt)
Date: Wed, 18 Feb 2015 15:09:14 +0100
Subject: [gdal-dev] Question to warping images using python-bindings
Message-ID: <000001d04b84$7ab9fd40$702df7c0$@googlemail.com>

Dear Gdal-Team and List,

 

At first I want to thank you for the great work you guys are doing with
GDAL. I really enjoy using this tools. I am especially doing rectification
of unreferenced raster images with the gdal tools. At the beginning I did
the rectification with the gdal_translate and gdalwarp tools. This works
pretty well and allowed me to use different order polynomials and a plate
spline transformer for my image transformation. Also it was possible for me
to use different resampling algorithm for my images.

 

The problem was that I always had to clip the input image (using pixel
coordinates)  first, save the result in a temporally dataset - first I/O
process - and doing than the transformation using gdal_translate (add gcps)
and gdalwarp (transformation and resampling) - second I/O process. In my use
case the most time the processes spent was for the I/O operations. So I
decided to use the python-bindings for processing, in hoping to do some
operations in memory. 

 

This works great for doing a affine transformation (dataset.SetGeotransform)
without resampling and gave a big performance improvement. The improvement
came through reading the file once in memory, doing there the clipping and
adding of the transformation matrix and then writing this to disk. So I got
only once to read the image from the disk and once to write the clipped
image, together with the transformation matrix, back to disk. But I couldn't
figure out how to do for example a plate spline transformation or an order 2
polynomial transformation. After further investigation it seems like this is
not possible with the python bindings, are I am right with this? Also it
seems that the python bindings doesn't allow to do a resampling of an image
without using the gdal.ReprojectImage method, what from my understand would
make sense in my case or?

 

Hope I make my questions clear and somebody could give me some feedback.

 

Kind regards, 

 

JM

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150218/0c290f01/attachment-0001.html>

From yutaxsato at gmail.com  Wed Feb 18 09:02:49 2015
From: yutaxsato at gmail.com (Yuta Sato)
Date: Thu, 19 Feb 2015 02:02:49 +0900
Subject: [gdal-dev] Feature Request: Band Names
Message-ID: <CAPqnkJQqEXV9hC0amYsXsE22Er4nWrUfdrTExOiMujPvwvNZsA@mail.gmail.com>

Dear GDAL Developers:

It would be much easier to deal with multi-band raster image if each band
could be named, and stored in GeoTiff file.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150219/a26b9585/attachment.html>

From even.rouault at spatialys.com  Wed Feb 18 09:20:10 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Feb 2015 18:20:10 +0100
Subject: [gdal-dev] Feature Request: Band Names
In-Reply-To: <CAPqnkJQqEXV9hC0amYsXsE22Er4nWrUfdrTExOiMujPvwvNZsA@mail.gmail.com>
References: <CAPqnkJQqEXV9hC0amYsXsE22Er4nWrUfdrTExOiMujPvwvNZsA@mail.gmail.com>
Message-ID: <201502181820.10871.even.rouault@spatialys.com>

Le mercredi 18 f?vrier 2015 18:02:49, Yuta Sato a ?crit :
> Dear GDAL Developers:
> 
> It would be much easier to deal with multi-band raster image if each band
> could be named, and stored in GeoTiff file.

Yuta,

This is already the case. See:

$ python

from osgeo import gdal
ds = gdal.GetDriverByName('GTiff').Create('test.tif',1,1,2)
ds.GetRasterBand(1).SetDescription('foo')
ds.GetRasterBand(2).SetDescription('bar')
ds = None


$ gdalinfo test.tif
Driver: GTiff/GeoTIFF
Files: test.tif
Size is 1, 1
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,    1.0)
Upper Right (    1.0,    0.0)
Lower Right (    1.0,    1.0)
Center      (    0.5,    0.5)
Band 1 Block=1x1 Type=Byte, ColorInterp=Gray
  Description = foo
Band 2 Block=1x1 Type=Byte, ColorInterp=Undefined
  Description = bar

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Feb 18 10:30:36 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Feb 2015 19:30:36 +0100
Subject: [gdal-dev] Question to warping images using python-bindings
In-Reply-To: <000001d04b84$7ab9fd40$702df7c0$@googlemail.com>
References: <000001d04b84$7ab9fd40$702df7c0$@googlemail.com>
Message-ID: <201502181930.36698.even.rouault@spatialys.com>

Le mercredi 18 f?vrier 2015 15:09:14, Jacob Mendt a ?crit :
> Dear Gdal-Team and List,
> 
> 
> 
> At first I want to thank you for the great work you guys are doing with
> GDAL. I really enjoy using this tools. I am especially doing rectification
> of unreferenced raster images with the gdal tools. At the beginning I did
> the rectification with the gdal_translate and gdalwarp tools. This works
> pretty well and allowed me to use different order polynomials and a plate
> spline transformer for my image transformation. Also it was possible for me
> to use different resampling algorithm for my images.
> 
> 
> 
> The problem was that I always had to clip the input image (using pixel
> coordinates)  first, save the result in a temporally dataset - first I/O
> process - and doing than the transformation using gdal_translate (add gcps)
> and gdalwarp (transformation and resampling) - second I/O process. In my
> use case the most time the processes spent was for the I/O operations. So
> I decided to use the python-bindings for processing, in hoping to do some
> operations in memory.
> 
> 
> 
> This works great for doing a affine transformation
> (dataset.SetGeotransform) without resampling and gave a big performance
> improvement. The improvement came through reading the file once in memory,
> doing there the clipping and adding of the transformation matrix and then
> writing this to disk. So I got only once to read the image from the disk
> and once to write the clipped image, together with the transformation
> matrix, back to disk. But I couldn't figure out how to do for example a
> plate spline transformation or an order 2 polynomial transformation. After
> further investigation it seems like this is not possible with the python
> bindings, are I am right with this? Also it seems that the python bindings
> doesn't allow to do a resampling of an image without using the
> gdal.ReprojectImage method, what from my understand would make sense in my
> case or?

Jacob,

it seems you're right. The C/C++ GDALReprojectImage() has a final argument 
GDALWarpOptions *psOptions whose char **papszWarpOptions member could be used 
to specify the transformation method with METHOD=TPS or MAX_GCP_ORDER=2. 
Unfortunately the GDALWarpOptions structure hasn't been mapped yet into the 
SWIG bindings, so a NULL pointer is currently used for psOptions (2nd order 
polynomial should be used by default if there are 6 or more GCPs defined and no 
geotransform)
I think it shouldn't be too hard to map the structure (at least the relevant 
parts of it, that aren't overriden by GDALReprojectImage()) into SWIG and make 
it usable by gdal.ReprojectImage().

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From hema.yeedunuri at amigooptima.in  Thu Feb 19 01:49:58 2015
From: hema.yeedunuri at amigooptima.in (Hema Yeedunuri)
Date: Thu, 19 Feb 2015 15:19:58 +0530
Subject: [gdal-dev] Delete Feature and update the feature with geometry at
	same feature id
Message-ID: <CA+8Q=fCT88qd=WPvtUo+Efa0XYhRixx4ybCroD9+=93o54abVg@mail.gmail.com>

hi all,

Is it possible to update geometry of the deleted feature .I delete feature
and then at the same deleted feature id i want to setgeometry to it .how
can it be done.

thanks,
hema
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150219/a8699790/attachment.html>

From even.rouault at spatialys.com  Thu Feb 19 06:14:52 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 19 Feb 2015 15:14:52 +0100
Subject: [gdal-dev] Delete Feature and update the feature with geometry
	at same feature id
In-Reply-To: <CA+8Q=fCT88qd=WPvtUo+Efa0XYhRixx4ybCroD9+=93o54abVg@mail.gmail.com>
References: <CA+8Q=fCT88qd=WPvtUo+Efa0XYhRixx4ybCroD9+=93o54abVg@mail.gmail.com>
Message-ID: <201502191514.52840.even.rouault@spatialys.com>

Le jeudi 19 f?vrier 2015 10:49:58, Hema Yeedunuri a ?crit :
> hi all,
> 
> Is it possible to update geometry of the deleted feature .I delete feature
> and then at the same deleted feature id i want to setgeometry to it .how
> can it be done.

Hema,

With the shapefile driver, you can call SetFeature() with a feature whose 
feature id corresponds to a deleted feature id.
(It would be more logical to call CreateFeature() with the FID set, but the 
implementation of CreateFeature() in the shapefile driver currently disregards 
the feature id if set)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mlennert at club.worldonline.be  Thu Feb 19 09:43:06 2015
From: mlennert at club.worldonline.be (Moritz Lennert)
Date: Thu, 19 Feb 2015 18:43:06 +0100
Subject: [gdal-dev] compiling MrSID plugin
Message-ID: <54E620AA.4060202@club.worldonline.be>

Hi,

I do'nt know if this is more an issue for DebianGIS, but I have the 
feeling it is an upstream issue, so I'm posting it here. Please redirect 
me if you think I'm wrong.

I'm trying to activate MrSID support for GDAL.

I downloaded and unpacked MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44.

Then I ran the following on a Debian testing machine:

**
apt-get source gdal
cd gdal-1.10.1+dfsg/
debian/rules gdal-mrsid (which AFAIU basically just creates 
libgdal-mrsid-1.10.1.tar.gz and copies it to the directory above the 
GDAL source directory)
cd ../
tar xvzf libgdal-mrsid-1.10.1.tar.gz
cd libgdal-mrsid-1.10.1/
chmod +x configure
./configure --with-gdal=/usr/bin/gdal-config 
--with-mrsid=/home/mlennert/SRC/MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44/Raster_DSDK 
--with-jp2mrsid=no
make
sudo make install
**

I do not get any error message, but when I run

gdalinfo --formats | grep -i sid

the MrSID format is not listed.

I ran ldd on the plugin .so installed in /usr/lib/gdalplugin

and saw that it couldn't find libltidsdk.so.

So I set

export 
LD_LIBRARY_PATH=/home/mlennert/SRC/MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44/Raster_DSDK/lib/

and now ldd could find the library, but MrSID is still not listed 
amongst the available formats.

I don't know if I completely misunderstand how this should be done, or 
if this a bug of some sorts.

Several questions are open for me:

- Seeing that the SDK seems to have been compiled with gcc44 do I have 
to use that too ? And does that mean I have to use gcc44 to compile gdal 
and all its dependencies manually ?

- The SDK contains libgeos.so files but in a version that seems older 
than the one in Debian Jessie. Could that be a source of conflict that 
keeps GDAL from recognizing the plugin ?

Any hints and pointers would be appreciated.

Thanks !
Moritz

From jmckenna at gatewaygeomatics.com  Thu Feb 19 10:03:51 2015
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 19 Feb 2015 14:03:51 -0400
Subject: [gdal-dev] compiling MrSID plugin
In-Reply-To: <54E620AA.4060202@club.worldonline.be>
References: <54E620AA.4060202@club.worldonline.be>
Message-ID: <54E62587.5040502@gatewaygeomatics.com>

On 2015-02-19 1:43 PM, Moritz Lennert wrote:
> Hi,
>
> I do'nt know if this is more an issue for DebianGIS, but I have the
> feeling it is an upstream issue, so I'm posting it here. Please redirect
> me if you think I'm wrong.
>
> I'm trying to activate MrSID support for GDAL.
>
> I downloaded and unpacked MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44.
>
> Then I ran the following on a Debian testing machine:
>
> **
> apt-get source gdal
> cd gdal-1.10.1+dfsg/
> debian/rules gdal-mrsid (which AFAIU basically just creates
> libgdal-mrsid-1.10.1.tar.gz and copies it to the directory above the
> GDAL source directory)
> cd ../
> tar xvzf libgdal-mrsid-1.10.1.tar.gz
> cd libgdal-mrsid-1.10.1/
> chmod +x configure
> ./configure --with-gdal=/usr/bin/gdal-config
> --with-mrsid=/home/mlennert/SRC/MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44/Raster_DSDK
> --with-jp2mrsid=no
> make
> sudo make install
> **
>
> I do not get any error message, but when I run
>
> gdalinfo --formats | grep -i sid
>
> the MrSID format is not listed.
>
> I ran ldd on the plugin .so installed in /usr/lib/gdalplugin
>
> and saw that it couldn't find libltidsdk.so.
>
> So I set
>
> export
> LD_LIBRARY_PATH=/home/mlennert/SRC/MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44/Raster_DSDK/lib/
>
>
> and now ldd could find the library, but MrSID is still not listed
> amongst the available formats.
>
> I don't know if I completely misunderstand how this should be done, or
> if this a bug of some sorts.
>
> Several questions are open for me:
>
> - Seeing that the SDK seems to have been compiled with gcc44 do I have
> to use that too ? And does that mean I have to use gcc44 to compile gdal
> and all its dependencies manually ?
>
> - The SDK contains libgeos.so files but in a version that seems older
> than the one in Debian Jessie. Could that be a source of conflict that
> keeps GDAL from recognizing the plugin ?
>
> Any hints and pointers would be appreciated.
>
> Thanks !
> Moritz
>


As I travel down the compile path, I always make sure to follow and 
edit/update the BuildHints[1] wiki page for GDAL.  On that page MrSID 
instructions are also listed[2].  For example, for building on Windows I 
always must point to both the RASTER and LIDAR sdk's for this to work 
properly (the equivalent on unix would be --with-mrsid and 
--with-mrsid_lidar)

It would be great if you could update this buildhints page with your own 
hints/advice for others too, during your travels.

-jeff

[1] https://trac.osgeo.org/gdal/wiki/BuildHints
[2] https://trac.osgeo.org/gdal/wiki/MrSID



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/





From even.rouault at spatialys.com  Thu Feb 19 10:57:31 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 19 Feb 2015 19:57:31 +0100
Subject: [gdal-dev] compiling MrSID plugin
In-Reply-To: <54E620AA.4060202@club.worldonline.be>
References: <54E620AA.4060202@club.worldonline.be>
Message-ID: <201502191957.31618.even.rouault@spatialys.com>

Le jeudi 19 f?vrier 2015 18:43:06, Moritz Lennert a ?crit :
> Hi,
> 
> I do'nt know if this is more an issue for DebianGIS, but I have the
> feeling it is an upstream issue, so I'm posting it here. Please redirect
> me if you think I'm wrong.
> 
> I'm trying to activate MrSID support for GDAL.
> 
> I downloaded and unpacked MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44.
> 
> Then I ran the following on a Debian testing machine:
> 
> **
> apt-get source gdal
> cd gdal-1.10.1+dfsg/
> debian/rules gdal-mrsid (which AFAIU basically just creates
> libgdal-mrsid-1.10.1.tar.gz and copies it to the directory above the
> GDAL source directory)
> cd ../
> tar xvzf libgdal-mrsid-1.10.1.tar.gz
> cd libgdal-mrsid-1.10.1/
> chmod +x configure
> ./configure --with-gdal=/usr/bin/gdal-config
> --with-mrsid=/home/mlennert/SRC/MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44/Ra
> ster_DSDK --with-jp2mrsid=no
> make
> sudo make install
> **
> 
> I do not get any error message, but when I run
> 
> gdalinfo --formats | grep -i sid
> 
> the MrSID format is not listed.
> 
> I ran ldd on the plugin .so installed in /usr/lib/gdalplugin
> 
> and saw that it couldn't find libltidsdk.so.
> 
> So I set
> 
> export
> LD_LIBRARY_PATH=/home/mlennert/SRC/MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44
> /Raster_DSDK/lib/
> 
> and now ldd could find the library, but MrSID is still not listed
> amongst the available formats.
> 

Moritz,

If once you've set LD_LIBRARY_PATH, ldd doesn't report any unfound library, 
then you could check if GDAL_DRIVER_PATH is defined and make point it to  
/usr/lib/gdalplugin (although that path should be hardcoded in the GDAL 
library by default)

You can also do "strace gdalinfo 2>&1" and look if gdal_MrSID.so is loaded.

> I don't know if I completely misunderstand how this should be done, or
> if this a bug of some sorts.
> 
> Several questions are open for me:
> 
> - Seeing that the SDK seems to have been compiled with gcc44 do I have
> to use that too ? And does that mean I have to use gcc44 to compile gdal
> and all its dependencies manually ?

No, any gcc 4.X should be fine.

> 
> - The SDK contains libgeos.so files but in a version that seems older
> than the one in Debian Jessie. Could that be a source of conflict that
> keeps GDAL from recognizing the plugin ?

Hum, that might cause problem, or not, but I assume they would appear later 
with crashes or nasty behaviour when actually reading a raster. But that 
shouldn't prevent the plugin from being used.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From adrien.andre at onf.fr  Thu Feb 19 11:42:37 2015
From: adrien.andre at onf.fr (=?UTF-8?B?QWRyaWVuIEFORFLDiQ==?=)
Date: Thu, 19 Feb 2015 16:42:37 -0300
Subject: [gdal-dev] Use Python to open every raster or vector GDAL supported
 datasource under a directory
Message-ID: <54E63CAD.9050206@onf.fr>

Dear list,

i don't really know where to ask this, please forgive me if it's off topic.


Using the GDAL API, preferably the Python one, i'd like to find and open
every raster or vector GDAL supported datasource under a directory.

Is there any existing easy way to achieve this?

My goal is to perform test on datasources, topology correctness, CRS
presence, metadata consistency etc.

I began with trying gdal.Open and ogr.Open on every file returned by os.walk
but i'm surprised opening a .shx file returns no error, for example...


I'd be happy with any link or piece of advice.


Thank you in advance,

Adrien
-------------- next part --------------
A non-text attachment was scrubbed...
Name: adrien_andre.vcf
Type: text/x-vcard
Size: 432 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150219/48cbc117/attachment.vcf>

From even.rouault at spatialys.com  Thu Feb 19 12:24:36 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 19 Feb 2015 21:24:36 +0100
Subject: [gdal-dev] Use Python to open every raster or vector GDAL
	supported datasource under a directory
In-Reply-To: <54E63CAD.9050206@onf.fr>
References: <54E63CAD.9050206@onf.fr>
Message-ID: <201502192124.36630.even.rouault@spatialys.com>

Adrien,

> 
> Using the GDAL API, preferably the Python one, i'd like to find and open
> every raster or vector GDAL supported datasource under a directory.
> 
> Is there any existing easy way to achieve this?
> 
> My goal is to perform test on datasources, topology correctness, CRS
> presence, metadata consistency etc.
> 
> I began with trying gdal.Open and ogr.Open on every file returned by
> os.walk

Sounds good. There are also datasets that consits of directories directly 
(shapefile directory, filegdb, ...)

You could use gdal.IdentifyDriver() as well which might be a bit faster if you 
don't need to know more than the driver that handle the file (which doesn't 
look like being the case given what you mention above) . Note that 
IdentifyDriver() works only on raster datasets in GDAL 1.X and has been 
extended to vector as well in GDAL 2.0


> but i'm surprised opening a .shx file returns no error, for
> example...

Yes, that's a bit odd to accept opening through the .shx file. But you'd have 
the same issue with the .dbf, which is a legitimate entry since the shapefile 
driver can handle pure .dbf files without .shp.

Even
-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mlennert at club.worldonline.be  Fri Feb 20 03:16:55 2015
From: mlennert at club.worldonline.be (Moritz Lennert)
Date: Fri, 20 Feb 2015 12:16:55 +0100
Subject: [gdal-dev] compiling MrSID plugin
In-Reply-To: <201502191957.31618.even.rouault@spatialys.com>
References: <54E620AA.4060202@club.worldonline.be>
	<201502191957.31618.even.rouault@spatialys.com>
Message-ID: <54E717A7.8050507@club.worldonline.be>

On 19/02/15 19:57, Even Rouault wrote:
> Le jeudi 19 f?vrier 2015 18:43:06, Moritz Lennert a ?crit :
>> Hi,
>>
>> I do'nt know if this is more an issue for DebianGIS, but I have the
>> feeling it is an upstream issue, so I'm posting it here. Please redirect
>> me if you think I'm wrong.
>>
>> I'm trying to activate MrSID support for GDAL.
>>
>> I downloaded and unpacked MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44.
>>
>> Then I ran the following on a Debian testing machine:
>>
>> **
>> apt-get source gdal
>> cd gdal-1.10.1+dfsg/
>> debian/rules gdal-mrsid (which AFAIU basically just creates
>> libgdal-mrsid-1.10.1.tar.gz and copies it to the directory above the
>> GDAL source directory)
>> cd ../
>> tar xvzf libgdal-mrsid-1.10.1.tar.gz
>> cd libgdal-mrsid-1.10.1/
>> chmod +x configure
>> ./configure --with-gdal=/usr/bin/gdal-config
>> --with-mrsid=/home/mlennert/SRC/MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44/Ra
>> ster_DSDK --with-jp2mrsid=no
>> make
>> sudo make install
>> **
>>
>> I do not get any error message, but when I run
>>
>> gdalinfo --formats | grep -i sid
>>
>> the MrSID format is not listed.
>>
>> I ran ldd on the plugin .so installed in /usr/lib/gdalplugin
>>
>> and saw that it couldn't find libltidsdk.so.
>>
>> So I set
>>
>> export
>> LD_LIBRARY_PATH=/home/mlennert/SRC/MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44
>> /Raster_DSDK/lib/
>>
>> and now ldd could find the library, but MrSID is still not listed
>> amongst the available formats.
>>
>
> Moritz,
>
> If once you've set LD_LIBRARY_PATH, ldd doesn't report any unfound library,
> then you could check if GDAL_DRIVER_PATH is defined and make point it to
> /usr/lib/gdalplugin (although that path should be hardcoded in the GDAL
> library by default)
>

Setting GDAL_DRIVER_PATH did the trick. Thanks for the hint !

Before adding this info to the wiki as Jeff suggested, I think we should 
investigate why this path is not set by default as you say.

In gcore/gdaldrivermanager.cpp I read:

"There are a few rules for the driver path.  If the GDAL_DRIVER_PATH 
environment variable it set, it is taken to be a list of directories to 
search separated by colons on UNIX, or semi-colons on Windows. 
Otherwise the /usr/local/lib/gdalplugins directory, and (if known) the
lib/gdalplugins subdirectory of the gdal home directory are searched on
UNIX and $(BINDIR)\gdalplugins on Windows."

So, /usr/lib/gdalplugins (which is where the plugin gets installed by 
default using the process I explained) does not seem to be in the list 
of hardcoded paths. So, maybe '/usr/lib/gdalplugins' could be added to 
the search path ? It does seem a fairly standard path...

>
>>
>> - The SDK contains libgeos.so files but in a version that seems older
>> than the one in Debian Jessie. Could that be a source of conflict that
>> keeps GDAL from recognizing the plugin ?
>
> Hum, that might cause problem, or not, but I assume they would appear later
> with crashes or nasty behaviour when actually reading a raster. But that
> shouldn't prevent the plugin from being used.

I'll look out for that. A first reading into QGIS did not show any problems.

Moritz



From mlennert at club.worldonline.be  Fri Feb 20 05:32:09 2015
From: mlennert at club.worldonline.be (Moritz Lennert)
Date: Fri, 20 Feb 2015 14:32:09 +0100
Subject: [gdal-dev] compiling MrSID plugin
In-Reply-To: <54E717A7.8050507@club.worldonline.be>
References: <54E620AA.4060202@club.worldonline.be>	<201502191957.31618.even.rouault@spatialys.com>
	<54E717A7.8050507@club.worldonline.be>
Message-ID: <54E73759.2080309@club.worldonline.be>

On 20/02/15 12:16, Moritz Lennert wrote:
> On 19/02/15 19:57, Even Rouault wrote:
>> Le jeudi 19 f?vrier 2015 18:43:06, Moritz Lennert a ?crit :

>>> - The SDK contains libgeos.so files but in a version that seems older
>>> than the one in Debian Jessie. Could that be a source of conflict that
>>> keeps GDAL from recognizing the plugin ?
>>
>> Hum, that might cause problem, or not, but I assume they would appear later
>> with crashes or nasty behaviour when actually reading a raster. But that
>> shouldn't prevent the plugin from being used.
>
> I'll look out for that. A first reading into QGIS did not show any problems.
>

Bingo ! Reading a vector into QGIS made it crash. But just removing all 
geos-related lib files from the MrSID-SDK directories seems to have 
solved the problem. I can still read the MrSID files, and QGIS doesn't 
bomb out when reading a vector. And the MrSID GDAL plugin now links to 
the system-wide geos libs.

Moritz


From mdsumner at gmail.com  Fri Feb 20 06:42:11 2015
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 20 Feb 2015 14:42:11 +0000
Subject: [gdal-dev] NetCDF driver improvements (including groups support)
References: <3B970FB76033264EB34479EC8A365E1101BA31EA11@vwiexc030.acri.local>
	<CAAcGz98vQ0a5T5GLX+RmrYhHj292htF33bCnpwcWiH+4viRgOQ@mail.gmail.com>
	<3B970FB76033264EB34479EC8A365E1101BA31F0A9@vwiexc030.acri.local>
Message-ID: <CAAcGz9_hTQEuTyZ9BWOfeSUK+z=w4mZ4MvUwOJ6nhPrAumoivA@mail.gmail.com>

Hi Julien, thank you for the clarification - I had missed your reply while
I was involved in things.

It turns out that the L2 products are probably of more interest to us
generally so eventually my L3 adventures might not matter.

I'll email you privately about the sources.

Cheers, Mike.

On Wed Feb 11 2015 at 22:24:17 Julien Demaria <Julien.Demaria at acri-st.fr>
wrote:

>  Hi Mike,
>
>
>
> Sorry, I?ve written ?full support of NetCDF-4? but in fact NetCDF-4
> compound types are not supported by my changes at this time, so NASA L3
> binned products are not handled by GDAL.
>
> NASA L3 binned products store pixels in vector of structures (compound
> types), with my changes GDAL can now list the subdatasets, but the compound
> types are still not handled and GDAL raise a warning and uses Float32 as
> default type, which is wrong, see the example below.
>
> Ideally, we could wrap each field of a compound type as a separate GDAL
> band in the subdataset. But if we want support all cases we have also to
> handle compound types using other compound types, which is not easy
> technically, I think.
>
>
>
> Note that NASA L3 mapped products are fully supported by GDAL (my changes
> only add capability to read metadata stored in specific groups, but main
> variables should be readable without my changes).
>
>
>
> Example of NASA L3 binned product:
>
>
>
> NetCDF representation of level-3_binned_data group:
>
> group: level-3_binned_data {
>
>   types:
>
>     compound binListType {
>
>       uint bin_num ;
>
>       short nobs ;
>
>       short nscenes ;
>
>       float weights ;
>
>       float time_rec ;
>
>     }; // binListType
>
>     compound binDataType {
>
>       float sum ;
>
>       float sum_squared ;
>
>     }; // binDataType
>
>     compound binIndexType {
>
>       uint start_num ;
>
>       uint begin ;
>
>       uint extent ;
>
>       uint max ;
>
>     }; // binIndexType
>
>   dimensions:
>
>                 binListDim = UNLIMITED ; // (1671755 currently)
>
>                 binDataDim = UNLIMITED ; // (1671755 currently)
>
>                 binIndexDim = UNLIMITED ; // (4320 currently)
>
>   variables:
>
>                 binListType BinList(binListDim) ;
>
>                binDataType chlor_a(binDataDim) ;
>
>                 binDataType chl_ocx(binDataDim) ;
>
>                 binIndexType BinIndex(binIndexDim) ;
>
>   } // group level-3_binned_data
>
>
>
> Corresponding GDAL Subdatasets:
>
>   SUBDATASET_1_NAME=NETCDF:"V2015024.L3b_DAY_NPP_CHL.nc
> ":/level-3_binned_data/BinList
>
>   SUBDATASET_1_DESC=[1x1671755] /level-3_binned_data/BinList (x.??)
>
>   SUBDATASET_2_NAME=NETCDF:"V2015024.L3b_DAY_NPP_CHL.nc
> ":/level-3_binned_data/chlor_a
>
>   SUBDATASET_2_DESC=[1x1671755] /level-3_binned_data/chlor_a (x.??)
>
>   SUBDATASET_3_NAME=NETCDF:"V2015024.L3b_DAY_NPP_CHL.nc
> ":/level-3_binned_data/chl_ocx
>
>   SUBDATASET_3_DESC=[1x1671755] /level-3_binned_data/chl_ocx (x.??)
>
>   SUBDATASET_4_NAME=NETCDF:"V2015024.L3b_DAY_NPP_CHL.nc
> ":/level-3_binned_data/BinIndex
>
>   SUBDATASET_4_DESC=[1x4320] /level-3_binned_data/BinIndex (x.??)
>
>
>
> Julien
>
>
>
> *De :* Michael Sumner [mailto:mdsumner at gmail.com]
> *Envoy? :* samedi 7 f?vrier 2015 02:03
> *? :* Julien Demaria; gdal-dev at lists.osgeo.org
>
>
> *Objet :* Re: [gdal-dev] NetCDF driver improvements (including groups
> support)
>
>
>
> Hi, this is really interesting to me.
>
> On Fri Feb 06 2015 at 03:11:02 Julien Demaria <Julien.Demaria at acri-st.fr>
> wrote:
>
> Hi GDAL team,
>
> I've implemented several improvements to the NetCDF driver and I would
> like to provide them to the community.
> Main goal of the changes is to add full support of NetCDF-4 including
> groups.
> NetCDF-4 is the future format of ESA Sentinel-3 products (no groups) and
> NASA Ocean Color team is switching their L2/L3 products to NetCDF-4 with
> groups (VIIRS has already switched to the new format in December).
> With the changes NASA L2 products geolocation is automatically handled as
> geolocation arrays and can be reprojected using gdalwarp.
>
>
>
> This sounds great, have you also worked with the L3 binned products? I
> have written my own suite of tools in R to read the NASA L3 bin files from
> the HDF4 files (using Rcpp), and have made some progress into the  NetCDF4
> versions of these. Does your work on the GDAL driver include compound types
> like those in the L3 NetCDF4 bin files.  The structure is described here:
>
>
>
> http://oceancolor.gsfc.nasa.gov/DOCS/FormatChange.html
>
>
>
> I prefer to work with the raw bin values usually rather than always apply
> a regridding - but having that capacity via GDAL would be great. I also
> wonder if it would be worth providing a vector driver for L3 bins, that
> would be my preferred usage ultimately - I need to  apply different
> algorithms for chlorophyll-a to the RRS values in the equal-area L3 bins,
> my R package is here, it's quite primitive and relies on the Rcpp route for
> C++,  but at least does what I need for now.
>
>
>
> https://github.com/mdsumner/roc
>
>
>
> I'll try to have a closer look at your efforts here soon, but just wanted
> to reply now with my perspective.
>
>
>
> Thanks!
>
>
>
> Cheers, Mike.
>
>
>
> I validated with autotests that nothing is broken in tests netcdf.py
> (excepting test 13 but see my point 5), netcdf_cf.py and hdf5.py, using
> NetCDF-3 and 4 libraries.
> I've also tested the new functionalities on various NetCDF-4 files.
> I think the only possible regression could be for marginal cases where a
> file was seen directly as a dataset and is now seen as multiple subdatasets
> (for example if a file has only one var in the top group and has nested
> groups containing variables), but I think this is not very common.
>
> For the moment I have all these changes in local GIT separated commits on
> the latest gdal-1.11 branch, let me know what changes you want and how can
> I provide them.
>
> Changes :
>
> 1) Implement full support for NetCDF-4 groups on reading:
>     - explore recursively all nested groups to create the subdatasets list
>     - subdatasets in nested groups use the /group1/group2/.../groupn/var
> standard
>       NetCDF-4 convention, excepting for variables in the root group which
> do not
>       have a leading slash for backward compatibility
>     - when accessing a subdataset using NETCDF:$file:$path, the leading
> slash is optional
>     - global attributes of each nested group are also collected in the
> GDAL dataset
>       metadata, using the same convention
> /group1/group2/.../groupn/NC_GLOBAL#attr_name,
>       excepting for the root group which do not have a leading slash for
> backward compatibility
>     - when searching for a variable containing auxiliary information on
> the selected subdataset,
>       like coordinate variables or grid_mapping, we now also search in
> parent groups (using NCDFResolveVar).
>       I now this is something not specified at this time in the CF
> convention because CF does not know groups,
>       but it seems logical to me to support this: NetCDF-4 specifies that
> dimensions of a group are
>       shared to its nested groups, so associated coordinate variables
> could be defined as the same level of its
>       corresponding dimension.
>     - reference to coordinate variables using the "coordinates" attribute
> support now also absolute paths,
>       this allow for example to specify coordinate variables located
> outside the group of the selected variable
>       or its parents. Relative paths could be implemented if needed.
>       This feature is used to add support for new NASA Ocean Color L2
> products.
>
> 2) Implement full read/write support for new NetCDF4 types NC_UBYTE,
> NC_USHORT, NC_UINT and NC_STRING, only if NETCDF_HAS_NC4 is defined (and
> only if format=NC4 for writing).
>     Support implemented for variables and attributes.
>     NC_STRING type is supported for reading (scalar and arrays) attributes
> and is used for writing only for array attributes (scalar are still written
> as NC_CHAR).
>     If NETCDF_HAS_NC4 is not defined or format!=NC4, NC_STRING array
> attributes are written as a single NC_CHAR string using the GDAL
> {v1,v2,...} convention.
>     Add missing support for NC_BYTE in CreateBandMetadata() and
> NC_BYTE/SHORT in NCDFPut1DVar().
>
> 3) Add support for new NASA Ocean Color L2 products and ESA Sentinel-3 L1
> or
>     L2 products which use the NetCDF-4 format (with groups for NASA, see
>     http://oceancolor.gsfc.nasa.gov/DOCS/FormatChange.html):
>     - NASA products: simulate a "coordinates" variable attribute to detect
> CF
>       geolocation arrays, and set bBottomUp to FALSE
>     - ESA products: set bBottomUp to FALSE and disable warning on missing
>       Conventions attribute
>
> 4) Fix bug #4554 with a more generic solution by disabling the
> installation of the HDF5 atexit() cleanup routine using H5dont_atexit().
>     Previous fix was to call GDALExit() (for the moment only defined
> gdalwarp.cpp) at the end of every program, which is more painful.
>
> 5) Fix implementation of GetScale/Offset to not always return
> pbSuccess=TRUE.
>     Fix CopyMetadata to handle bands with only scale or offset.
>     ==> WARNING this commit breaks the autotest netcdf_13 (check for
> scale/offset = 1.0/0.0 if no scale or offset is available), but for me it
> is not logical to return always pbSuccess=TRUE
>
> 6) Optimize IReadBlock() and CheckData() handling of partial blocks in the
> x axis by re-using the GDAL block buffer instead of allocating a new
> temporary buffer for each block.
>
> 7) Force block size to 1 scanline for bottom-up datasets if nBlockYSize !=
> 1 instead of raising a fatal error
>     ==> Solve a recent problem raised on the mailing list
>
> 8) Implement Get/SetUnitType using the standard "units" NetCDF attribute
>
> 9) Change default block size to 256x256 instead of scanline (only affect
> file without NetCDF chunking)
>     ==> because I think this is better for a random access to the data,
> but I'm not sure if the community want this change which could impact
> performances
>
> 10) I've also implemented for my needs support for 1D variables by
> simulating 2D datasets with only one row (dimensionless variables are not
> supported for the moment),
>        but this breaks backward compatibility because files containing
> only one variable and associated 1D coordinate variables are now seen as
> multiple sub datasets...
>        and maybe this is not the goal of GDAL to give access to
> not-2D-raster variables (but sometimes it's useful ;-) )
>
> Thanks for GDAL!
>
> Julien
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150220/4473ffac/attachment-0001.html>

From pedrongvenancio at gmail.com  Fri Feb 20 07:36:34 2015
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Fri, 20 Feb 2015 15:36:34 +0000
Subject: [gdal-dev] gdaltindex produces absolute paths
Message-ID: <CAMCJChtKVm5j0d3uoLnPJFZSPO=CyBytFPaZnc7LExantXVMNw@mail.gmail.com>

Hi,

Some time ago I opened this bug report (http://hub.qgis.org/issues/11428),
because I thought it was a problem of the implementation of gdaltindex in
QGIS, but now I see that it isn't, because it also happens at the command
line.

If I put the command line in the folder where the raster files are located
[0], gdaltindex works well, ie, with -write_absolute_path option, absolute
paths are saved in the attribute table, and without -write_absolute_path
option are saved only the names of files.

But if I reference the input raster files with the absolute paths [1] (for
example, when files are in different folders), the -write_absolute_path
option has no influence, because absolute paths are always recorded in the
attribute table.

This is the desired behavior, or is it a bug?

I'm using gdal 1.11.2 (OSGeo4W), in Windows.

Thank you very much!


Best regards,
Pedro Ven?ncio


[0] D:\test\2013\tiff> gdaltindex -f "ESRI Shapefile"
tile_index_processing_2.shp 171_2_52.tif 171_2_42.tif

[1] D:\> gdaltindex -f "ESRI Shapefile"
D:\test\2013\tiff\tile_index_processing_3.shp
D:\test\2013\tiff\171_2_52.tif D:\test\2013\171_2_42.tif
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150220/086cee09/attachment.html>

From even.rouault at spatialys.com  Fri Feb 20 09:04:51 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 20 Feb 2015 18:04:51 +0100
Subject: [gdal-dev] gdaltindex produces absolute paths
In-Reply-To: <CAMCJChtKVm5j0d3uoLnPJFZSPO=CyBytFPaZnc7LExantXVMNw@mail.gmail.com>
References: <CAMCJChtKVm5j0d3uoLnPJFZSPO=CyBytFPaZnc7LExantXVMNw@mail.gmail.com>
Message-ID: <201502201804.51939.even.rouault@spatialys.com>

Le vendredi 20 f?vrier 2015 16:36:34, Pedro Ven?ncio a ?crit :
> Hi,
> 
> Some time ago I opened this bug report (http://hub.qgis.org/issues/11428),
> because I thought it was a problem of the implementation of gdaltindex in
> QGIS, but now I see that it isn't, because it also happens at the command
> line.
> 
> If I put the command line in the folder where the raster files are located
> [0], gdaltindex works well, ie, with -write_absolute_path option, absolute
> paths are saved in the attribute table, and without -write_absolute_path
> option are saved only the names of files.
> 
> But if I reference the input raster files with the absolute paths [1] (for
> example, when files are in different folders), the -write_absolute_path
> option has no influence, because absolute paths are always recorded in the
> attribute table.
> 
> This is the desired behavior, or is it a bug?

Pedro,

per the usage message of gdaltindex:
"" o Raster filenames will be put in the file exactly as they are specified"
  on the commandline unless the option -write_absolute_path is used.""""

so this is at least the documented behaviour :-)

In your case, you would rather need a "-write_relative_path" that would 
compute the relative path of the referenced paths with respect to the tile 
index location (which can be something that could not succeed for example if 
the files are on different drives on Windows)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Feb 20 09:08:24 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 20 Feb 2015 18:08:24 +0100
Subject: [gdal-dev] compiling MrSID plugin
In-Reply-To: <54E717A7.8050507@club.worldonline.be>
References: <54E620AA.4060202@club.worldonline.be>
	<201502191957.31618.even.rouault@spatialys.com>
	<54E717A7.8050507@club.worldonline.be>
Message-ID: <201502201808.24192.even.rouault@spatialys.com>

Le vendredi 20 f?vrier 2015 12:16:55, Moritz Lennert a ?crit :
> On 19/02/15 19:57, Even Rouault wrote:
> > Le jeudi 19 f?vrier 2015 18:43:06, Moritz Lennert a ?crit :
> >> Hi,
> >> 
> >> I do'nt know if this is more an issue for DebianGIS, but I have the
> >> feeling it is an upstream issue, so I'm posting it here. Please redirect
> >> me if you think I'm wrong.
> >> 
> >> I'm trying to activate MrSID support for GDAL.
> >> 
> >> I downloaded and unpacked MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44.
> >> 
> >> Then I ran the following on a Debian testing machine:
> >> 
> >> **
> >> apt-get source gdal
> >> cd gdal-1.10.1+dfsg/
> >> debian/rules gdal-mrsid (which AFAIU basically just creates
> >> libgdal-mrsid-1.10.1.tar.gz and copies it to the directory above the
> >> GDAL source directory)
> >> cd ../
> >> tar xvzf libgdal-mrsid-1.10.1.tar.gz
> >> cd libgdal-mrsid-1.10.1/
> >> chmod +x configure
> >> ./configure --with-gdal=/usr/bin/gdal-config
> >> --with-mrsid=/home/mlennert/SRC/MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44
> >> /Ra ster_DSDK --with-jp2mrsid=no
> >> make
> >> sudo make install
> >> **
> >> 
> >> I do not get any error message, but when I run
> >> 
> >> gdalinfo --formats | grep -i sid
> >> 
> >> the MrSID format is not listed.
> >> 
> >> I ran ldd on the plugin .so installed in /usr/lib/gdalplugin
> >> 
> >> and saw that it couldn't find libltidsdk.so.
> >> 
> >> So I set
> >> 
> >> export
> >> LD_LIBRARY_PATH=/home/mlennert/SRC/MrSID_DSDK-9.1.0.4045-linux.x86-64.gc
> >> c44 /Raster_DSDK/lib/
> >> 
> >> and now ldd could find the library, but MrSID is still not listed
> >> amongst the available formats.
> > 
> > Moritz,
> > 
> > If once you've set LD_LIBRARY_PATH, ldd doesn't report any unfound
> > library, then you could check if GDAL_DRIVER_PATH is defined and make
> > point it to /usr/lib/gdalplugin (although that path should be hardcoded
> > in the GDAL library by default)
> 
> Setting GDAL_DRIVER_PATH did the trick. Thanks for the hint !
> 
> Before adding this info to the wiki as Jeff suggested, I think we should
> investigate why this path is not set by default as you say.
> 
> In gcore/gdaldrivermanager.cpp I read:
> 
> "There are a few rules for the driver path.  If the GDAL_DRIVER_PATH
> environment variable it set, it is taken to be a list of directories to
> search separated by colons on UNIX, or semi-colons on Windows.
> Otherwise the /usr/local/lib/gdalplugins directory, and (if known) the
> lib/gdalplugins subdirectory of the gdal home directory are searched on
> UNIX and $(BINDIR)\gdalplugins on Windows."
> 
> So, /usr/lib/gdalplugins (which is where the plugin gets installed by
> default using the process I explained) does not seem to be in the list
> of hardcoded paths. So, maybe '/usr/lib/gdalplugins' could be added to
> the search path ? It does seem a fairly standard path...

There's this snippet of code as well:

#ifdef GDAL_PREFIX
        papszSearchPath = CSLAddString( papszSearchPath, 
    #ifdef MACOSX_FRAMEWORK
                                        GDAL_PREFIX "/PlugIns");
    #else
                                        GDAL_PREFIX "/lib/gdalplugins" );
    #endif

If you look at port/cpl_config.h, you'll see a  #define GDAL_PREFIX with the 
installation prefix, so for example /usr if you ran ./configure --prefix=/usr, 
which makes /usr/lib/gdalplugins to be searched.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jgrn at illinois.edu  Fri Feb 20 12:10:31 2015
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Fri, 20 Feb 2015 20:10:31 +0000
Subject: [gdal-dev] Proper algorithms for computing slopes for global/polar
	DEMs?
Message-ID: <CABG0rftV5o813tquY5sdiG1BMd=a4MHsWD+pKm2QdCLh8zmm-g@mail.gmail.com>

GDALers:

We're trying to figure out a good algorithm for computing topographic slope
for Alaska, which is both huge and near the pole.  Our DEM is currently in
geographic coordinates, but we need slope over a fixed distance (change in
elevation vs. horizontal meters).  The issue is, there is no projection to
switch this to to get an accurate set of slope calculations.  Of course
with degrees, the X and Y distances change over the globe -- so the
horizontal distances will be variables from one window to the next.  I have
seen various solutions published, but I wanted to see if someone knows of a
decent coded-up algorithm for this.  Thoughts?

Some background:
http://gis.stackexchange.com/questions/14750/how-to-use-srtm-global-dem-for-slope-calculation/40464#40464
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150220/8e4371e7/attachment.html>

From pedrongvenancio at gmail.com  Sat Feb 21 04:28:22 2015
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Sat, 21 Feb 2015 12:28:22 +0000
Subject: [gdal-dev] gdaltindex produces absolute paths
In-Reply-To: <201502201804.51939.even.rouault@spatialys.com>
References: <CAMCJChtKVm5j0d3uoLnPJFZSPO=CyBytFPaZnc7LExantXVMNw@mail.gmail.com>
	<201502201804.51939.even.rouault@spatialys.com>
Message-ID: <CAMCJChtkmDiEvSAS8qY3+KuGtoYHxqt4KmAefjKoO1=pr2zD+w@mail.gmail.com>

Hi Even,

Yes, you are right! This part confused me

" raster filenames will be put in the file exactly as they are specified "

as talks in filename.


Thank you very much Even!

Best regards,
Pedro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150221/3cb5dbd6/attachment.html>

From tomerlieber at gmail.com  Sun Feb 22 09:57:19 2015
From: tomerlieber at gmail.com (Tomer)
Date: Sun, 22 Feb 2015 09:57:19 -0800 (PST)
Subject: [gdal-dev] Question about ogr2ogr utility
Message-ID: <1424627839047-5189255.post@n6.nabble.com>

Hey,

I use ogr2ogr vector utility in order to extract features which intersects a
given extent.
I found the "-spat" option which gets extent (2 points) as parameters, but i
want to use a file path as parameter.
Is there any way to do it?

Best regards, 
Tomer



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Question-about-ogr2ogr-utility-tp5189255.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at maanmittauslaitos.fi  Sun Feb 22 11:46:52 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Sun, 22 Feb 2015 19:46:52 +0000 (UTC)
Subject: [gdal-dev] Question about ogr2ogr utility
References: <1424627839047-5189255.post@n6.nabble.com>
Message-ID: <loom.20150222T204400-789@post.gmane.org>

Tomer <tomerlieber <at> gmail.com> writes:

> 
> Hey,
> 
> I use ogr2ogr vector utility in order to extract features which intersects a
> given extent.
> I found the "-spat" option which gets extent (2 points) as parameters, but i
> want to use a file path as parameter.
> Is there any way to do it?

What would GDAL find at the end of the file path? A shapefile or some simple
text file or what? Can you give an example?

-Jukka Rahkonen-


From tomerlieber at gmail.com  Sun Feb 22 13:47:42 2015
From: tomerlieber at gmail.com (Tomer)
Date: Sun, 22 Feb 2015 13:47:42 -0800 (PST)
Subject: [gdal-dev] Question about ogr2ogr utility
In-Reply-To: <loom.20150222T204400-789@post.gmane.org>
References: <1424627839047-5189255.post@n6.nabble.com>
	<loom.20150222T204400-789@post.gmane.org>
Message-ID: <1424641662935-5189281.post@n6.nabble.com>

The parameter "file path" that i meant is any supported OGR data source, such
as shape file.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Question-about-ogr2ogr-utility-tp5189255p5189281.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From geodesy99 at gmail.com  Sun Feb 22 19:43:00 2015
From: geodesy99 at gmail.com (Michael Patrick)
Date: Sun, 22 Feb 2015 19:43:00 -0800
Subject: [gdal-dev] Proper algorithms for computing slopes for
	global/polar DEMs?
Message-ID: <CAC54+E5peovFdx=uM4HT0OVn2fOnKeAzwH0JjM1VP6utQ5dPMg@mail.gmail.com>

(This may not be target subject matter for the list)

>
> We're trying to figure out a good algorithm for computing topographic
> slope for Alaska, which is both huge and near the pole.  Our DEM is
> currently in geographic coordinates, but we need slope over a fixed
> distance (change in elevation vs. horizontal meters).  The issue is, there
> is no projection to switch this to to get an accurate set of slope
> calculations.  Of course with degrees, the X and Y distances change over
> the globe -- so the horizontal distances will be variables from one window
> to the next.  I have seen various solutions published, but I wanted to see
> if someone knows of a decent coded-up algorithm for this.  Thoughts?
>

You don't mention specifically what dataset your DEM source is, but read
carefully the accuracy statements in the documentation, and the counter
answers on the Stack Exchange article.  For instance, if you are using
GTOPO30 , see Section 6.1 Data Sources of the Readme
<https://lta.cr.usgs.gov/sites/default/files/GTOPO30_README.doc>

You would probably better off using one of the original sources, rather
than calculate on top of the already considerable distortion. Also there
are DEM collections available for various areas of interest, like the
Stereo-Photogrammetric
Digital Elevation/Surface Model <http://www.pgc.umn.edu/elevation/stereo>
from the Polar Geospatial Center. You don't mention where the AOI or what
scale you are interested, but there are a considerable number of others out
there ( http://nsidc.org/data/dems/datasets.html )

Michael Patrick
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150222/1481c97d/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Sun Feb 22 21:44:59 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Mon, 23 Feb 2015 05:44:59 +0000 (UTC)
Subject: [gdal-dev] Question about ogr2ogr utility
References: <1424627839047-5189255.post@n6.nabble.com>
	<loom.20150222T204400-789@post.gmane.org>
	<1424641662935-5189281.post@n6.nabble.com>
Message-ID: <loom.20150223T062402-197@post.gmane.org>

Tomer <tomerlieber <at> gmail.com> writes:

> 
> The parameter "file path" that i meant is any supported OGR data source, such
> as shape file.

This feels like using ogr2ogr with the -clipsrc option but without clipping.
However, I think it is not possible to disable clipping and use the option
as "Intersects".

-Jukka Rahkonen-



From hema.yeedunuri at amigooptima.in  Sun Feb 22 22:22:39 2015
From: hema.yeedunuri at amigooptima.in (Hema Yeedunuri)
Date: Mon, 23 Feb 2015 11:52:39 +0530
Subject: [gdal-dev] Delete Feature and update the feature with geometry
 at same feature id
In-Reply-To: <201502191514.52840.even.rouault@spatialys.com>
References: <CA+8Q=fCT88qd=WPvtUo+Efa0XYhRixx4ybCroD9+=93o54abVg@mail.gmail.com>
	<201502191514.52840.even.rouault@spatialys.com>
Message-ID: <CA+8Q=fCFp4PGer=vpK8DYpNMfR8fGGHtaEgF2Or=9RA8O0z=XA@mail.gmail.com>

hi all,
I tried the same way i,e deleted feature and then with the same fid i have
created the feature but this is increasing the total fid count.i want to do
undo/redo on adding geometry and delete geometry .
 thanks,
hema


On Thu, Feb 19, 2015 at 7:44 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le jeudi 19 f?vrier 2015 10:49:58, Hema Yeedunuri a ?crit :
> > hi all,
> >
> > Is it possible to update geometry of the deleted feature .I delete
> feature
> > and then at the same deleted feature id i want to setgeometry to it .how
> > can it be done.
>
> Hema,
>
> With the shapefile driver, you can call SetFeature() with a feature whose
> feature id corresponds to a deleted feature id.
> (It would be more logical to call CreateFeature() with the FID set, but the
> implementation of CreateFeature() in the shapefile driver currently
> disregards
> the feature id if set)
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150223/cbad827c/attachment.html>

From landa.martin at gmail.com  Mon Feb 23 02:12:45 2015
From: landa.martin at gmail.com (Martin Landa)
Date: Mon, 23 Feb 2015 11:12:45 +0100
Subject: [gdal-dev] invalid byte sequence for encoding "UTF8": 0xc309
Message-ID: <CA+Ei1OcVXe+0qovYc4AM+gkDW+ojo2KEE5JNq6_OBSCOmXdgNQ@mail.gmail.com>

Hi,

I am having problem to convert VFR file [1] to PostGIS. The command

ogr2ogr -f PostgreSQL PG:dbname=uvoh
/vsicurl/http://vdp.cuzk.cz/vymenny_format/specialni/20150203_ST_UVOH.xml.gz
-overwrite

fails with:

ERROR 1: COPY statement failed.
ERROR:  invalid byte sequence for encoding "UTF8": 0xc309
CONTEXT:  COPY volebniokrsek, line 7416

When I run conversion in INSERT mode, it doesn't fail.

The problem should be on this line:

PG: PQexecParams(INSERT INTO "volebniokrsek" ("definicnibod" ,
"originalnihranice" , "ogc_fid" , "gml_id", "kod", "cislo", "obeckod",
"poznamka", "platiod", "idtransakce", "globalniidn\
avrhuzmeny") VALUES
('01010000208A150000C3F5285C225A22C18FC2F5680E8531C1'::GEOMETRY,
'01060000208A15000001000000010300000001000000900000001F85EB518D5422C1E17A142E528531C18FC2F5A8855422\
C1713D0A97518531C19A999919855422C1295C8FC2578531C17B14AE47855422C152B81EC5658531C15C8FC2F5835422C11F85EB116C8531C1AE47E1FA875422C1E17A14AE758531C11F85EBD1885422C114AE47A1768531C1333333\
33695422C1EC51B8DED88531C1E17A14AE555422C18FC2F5A85D8631C17B14AEC7545422C1AE47E1FA638631C1333333333F5422C17B14AE87A28631C11F85EB51115422C185EB51F8058731C133333333F95322C185EB51B83A8731\
C114AE47E1FF5422C1A4703D4A0C8731C185EB51B8745522C1A4703D0ADE8631C1A4703D8A145622C1666666A68E8631C1AE47E1FA7C5622C1AE47E13A7E8631C1713D0AD7A35622C166666626728631C1B81E85EBD45622C1D7A370\
BD6A8631C1713D0AD7085722C152B81EC5638631C152B81E85595722C15C8FC2F56B8631C15C8FC275955722C185EB51B8768631C152B81E05625822C1666666668F8631C152B81E05745822C15C8FC2757C8631C19A999999AB5822\
C1B81E85EB818631C1F6285C8FE65822C1B81E85AB938631C148E17A94575922C11F85EBD1918631C17B14AEC7845922C148E17A54948631C1713D0A57745A22C1CDCCCC0CBF8631C1F6285C0F8F5A22C17B14AE07AE8631C13D0AD7\
A36B5A22C1295C8FC2758631C17B14AE479E5B22C1333333F3E38531C1E17A142E8E5B22C1AE47E17ADF8531C18FC2F5A8B85B22C17B14AE07B48531C1295C8F42B35B22C1C3F5281CB18531C19A999919EA5B22C1295C8F42988531\
C114AE47E10E5C22C1000000408F8531C1CDCCCC4C705C22C1713D0A175D8531C1EC51B89EC05C22C1295C8F82868531C1713D0A57DD5C22C10AD7A3307A8531C1AE47E1FAEB5C22C1CDCCCC4C828531C1A4703D0AF95C22C1EC51B8\
9E898531C1666666E6085D22C11F85EBD1918531C148E17A140F5D22C10AD7A3F0938531C1F6285C8FFF5C22C1AE47E1FAA68531C11F85EBD1255E22C1AE47E1BA3E8631C1000000802C5E22C18FC2F5683F8631C1B81E856B525E22\
C1713D0AD7388631C1A4703D0A5C5E22C1A4703DCA388631C1F6285C8F875E22C17B14AEC72E8631C19A999999A85E22C166666666238631C18FC2F5A8DF5E22C17B14AEC70B8631C1B81E85EB225F22C1CDCCCC4CF38531C1E17A14\
AE505F22C18FC2F528DC8531C13D0AD7A39B5F22C1295C8F82BC8531C185EB51389D5F22C1A4703D8AA58531C17B14AEC7AB5F22C13D0AD7E38D8531C1713D0AD7BA5F22C1B81E852B438531C114AE4761D55F22C1B81E852B1B8531\
C1C3F5285CDA5F22C1D7A3707D0B8531C1713D0AD7C55F22C1295C8FC2EE8431C185EB5138B45F22C1EC51B85EBC8431C1B81E856BCC5F22C19A999959AF8431C185EB51B8CC5F22C1295C8F82A98431C1D7A370BDB75F22C13D0AD7\
63A78431C18FC2F528A45F22C1EC51B8DE9F8431C1295C8F426E5F22C19A9999592E8431C152B81E853B5F22C1EC51B89E0F8431C1CDCCCC4C115F22C1E17A142ED58331C1F6285C0F865F22C19A999959C78331C1333333B39A5F22\
C1CDCCCCCC048431C17B14AEC7C45F22C19A999919328431C1D7A3703DEC5F22C1295C8F42568431C1E17A142E4D6022C19A999999578431C1666666E6836022C1F6285CCF758431C166666666B36022C11F85EBD15C8431C19A9999\
99E76022C11F85EB51558431C11F85EB51F56022C11F85EBD15F8431C17B14AEC70A6122C11F85EB91808431C114AE4761D96022C17B14AEC7888431C166666666CC6022C114AE4761778431C17B14AE47866022C13D0AD763828431\
C1AE47E1FADD6022C1333333B3048531C152B81E05286122C1A4703D4AF68431C11F85EB51336122C18FC2F528058531C17B14AE47036222C1AE47E17ADD8431C1666666E6EA6122C1F6285C8FBC8431C1F6285C8F1F6222C1D7A370\
FDAE8431C1D7A370BD106222C100000080A18431C17B14AE47FF6122C1E17A14AE928431C1295C8F42D16122C1333333F3998431C10AD7A3F0C56122C1B81E85AB8A8431C1713D0AD7546222C17B14AE07728431C100000080506222\
C1C3F5289C688431C1333333334F6222C15C8FC2354C8431C1AE47E1FA196222C148E17A94548431C1C3F528DCF86122C15C8FC275238431C1295C8FC21F6222C10AD7A3701F8431C13D0AD7A31B6222C1E17A14EE118431C18FC2F5\
281F6222C185EB51B8088431C114AE4761376222C10AD7A3F0098431C100000080486222C18FC2F568018431C1CDCCCCCC0E6222C1713D0AD7F68331C100000080096222C1E17A146EEF8331C17B14AE47056222C152B81E05E88331\
C1295C8F42176222C1A4703DCAE38331C10AD7A3701A6222C148E17A54D28331C185EB51B8316222C152B81E45C88331C133333333286222C1000000C0BE8331C1000000801B6222C1713D0A57AE8331C1CDCCCCCCFC6122C1D7A370\
3D918331C152B81E85E56122C15C8FC2F5798331C1333333B3D66122C13D0AD7236B8331C1666666E6C76122C1295C8F425B8331C148E17A149A6122C1EC51B89E2A8331C1A4703D0A466122C166666666F18231C114AE4761F16022\
C1C3F5285CC78231C1A4703D8AE56022C1C3F5285CCF8231C19A999919C36022C185EB5178D48231C148E17A149F6022C1EC51B89E058331C15C8FC2758E6022C185EB51B8088331C1EC51B89E186022C17B14AE07018331C1295C8F\
427B5F22C1CDCCCC4C0B8331C1295C8FC23A5E22C1E17A14AE248331C1AE47E1FAF05D22C11F85EBD1228331C11F85EBD1545D22C114AE47211A8331C10AD7A3F0EB5C22C1CDCCCC0C1F8331C15C8FC275725C22C1B81E85EB2F8331\
C1C3F528DC485C22C11F85EB91388331C1295C8F42185C22C1EC51B81E368331C18FC2F5A8CC5B22C133333373158331C18FC2F5A8BE5B22C1E17A146E118331C152B81E85B65B22C19A9999D9088331C152B81E059F5B22C148E17A\
94CA8231C185EB51387C5B22C17B14AE47AB8231C19A999999CF5A22C148E17AD4E88231C19A999919485922C11F85EB91768331C11F85EBD1115822C1666666A6E68331C15C8FC2F5C65722C1295C8FC2028431C17B14AEC7235722\
C1333333334F8431C11F85EBD1AC5522C13D0AD7A3F48431C1A4703D8A225522C1A4703D0A318531C18FC2F5A8DB5422C1D7A370BD3F8531C11F85EB518D5422C1E17A142E528531C1'::GEOMETRY,
7416 , 'VO.10079', 10079,\
 6, 583251, 'Volebn? m?stnost: Z?kladn? ?kola Komensk?ho 511/40
(j?delna)', '2014-06-19T00:00:00', 626242, 592268)) = PGRES_COMMAND_OK

Any idea what could be wrong? Thanks in advance! Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Mon Feb 23 02:29:04 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 23 Feb 2015 11:29:04 +0100
Subject: [gdal-dev] invalid byte sequence for encoding "UTF8": 0xc309
In-Reply-To: <CA+Ei1OcVXe+0qovYc4AM+gkDW+ojo2KEE5JNq6_OBSCOmXdgNQ@mail.gmail.com>
References: <CA+Ei1OcVXe+0qovYc4AM+gkDW+ojo2KEE5JNq6_OBSCOmXdgNQ@mail.gmail.com>
Message-ID: <201502231129.04354.even.rouault@spatialys.com>

Le lundi 23 f?vrier 2015 11:12:45, Martin Landa a ?crit :
> Hi,
> 
> I am having problem to convert VFR file [1] to PostGIS. The command
> 
> ogr2ogr -f PostgreSQL PG:dbname=uvoh
> /vsicurl/http://vdp.cuzk.cz/vymenny_format/specialni/20150203_ST_UVOH.xml.g
> z -overwrite
> 
> fails with:
> 
> ERROR 1: COPY statement failed.
> ERROR:  invalid byte sequence for encoding "UTF8": 0xc309
> CONTEXT:  COPY volebniokrsek, line 7416
> 

> Any idea what could be wrong? Thanks in advance! Martin

Martin,

Fixed by http://trac.osgeo.org/gdal/changeset/28539

I'm not sure if people relied on the implicit truncation done by the COPY code 
path, but for now it is better do disable it as it was wrong for UTF-8 
characters.

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From landa.martin at gmail.com  Mon Feb 23 02:36:33 2015
From: landa.martin at gmail.com (Martin Landa)
Date: Mon, 23 Feb 2015 11:36:33 +0100
Subject: [gdal-dev] invalid byte sequence for encoding "UTF8": 0xc309
In-Reply-To: <201502231129.04354.even.rouault@spatialys.com>
References: <CA+Ei1OcVXe+0qovYc4AM+gkDW+ojo2KEE5JNq6_OBSCOmXdgNQ@mail.gmail.com>
	<201502231129.04354.even.rouault@spatialys.com>
Message-ID: <CA+Ei1Odyb9uASuht+auSk_7xkXe1gNfSsNEoadHEQP652QLXiw@mail.gmail.com>

Hi Even,

2015-02-23 11:29 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
> Fixed by http://trac.osgeo.org/gdal/changeset/28539
>
> I'm not sure if people relied on the implicit truncation done by the COPY code
> path, but for now it is better do disable it as it was wrong for UTF-8
> characters.

thanks, I can confirm that solves this problem. Are you planning to
backport to 1.11 branch?

Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Mon Feb 23 03:58:11 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 23 Feb 2015 12:58:11 +0100
Subject: [gdal-dev] invalid byte sequence for encoding "UTF8": 0xc309
In-Reply-To: <CA+Ei1Odyb9uASuht+auSk_7xkXe1gNfSsNEoadHEQP652QLXiw@mail.gmail.com>
References: <CA+Ei1OcVXe+0qovYc4AM+gkDW+ojo2KEE5JNq6_OBSCOmXdgNQ@mail.gmail.com>
	<201502231129.04354.even.rouault@spatialys.com>
	<CA+Ei1Odyb9uASuht+auSk_7xkXe1gNfSsNEoadHEQP652QLXiw@mail.gmail.com>
Message-ID: <201502231258.11978.even.rouault@spatialys.com>

Le lundi 23 f?vrier 2015 11:36:33, Martin Landa a ?crit :
> Hi Even,
> 
> 2015-02-23 11:29 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
> > Fixed by http://trac.osgeo.org/gdal/changeset/28539
> > 
> > I'm not sure if people relied on the implicit truncation done by the COPY
> > code path, but for now it is better do disable it as it was wrong for
> > UTF-8 characters.
> 
> thanks, I can confirm that solves this problem. Are you planning to
> backport to 1.11 branch?

The direct backport wasn't possible since the code had been refactored and 
people could likely depend on truncation for non-UTF8 content.

So I have finally fixed the truncation to work. There was embryonic code, but 
wrong/subobtimal, in the PGDump driver.

Should now be completely fixed in 1.11 and trunk per 
http://trac.osgeo.org/gdal/ticket/5854

> 
> Martin

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From landa.martin at gmail.com  Mon Feb 23 04:04:37 2015
From: landa.martin at gmail.com (Martin Landa)
Date: Mon, 23 Feb 2015 13:04:37 +0100
Subject: [gdal-dev] invalid byte sequence for encoding "UTF8": 0xc309
In-Reply-To: <201502231258.11978.even.rouault@spatialys.com>
References: <CA+Ei1OcVXe+0qovYc4AM+gkDW+ojo2KEE5JNq6_OBSCOmXdgNQ@mail.gmail.com>
	<201502231129.04354.even.rouault@spatialys.com>
	<CA+Ei1Odyb9uASuht+auSk_7xkXe1gNfSsNEoadHEQP652QLXiw@mail.gmail.com>
	<201502231258.11978.even.rouault@spatialys.com>
Message-ID: <CA+Ei1Oc5aGSKZsWvc2etP3XMxYbScANvwZtiTzHGgHoUZJufPA@mail.gmail.com>

Hi Even,

2015-02-23 12:58 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
> The direct backport wasn't possible since the code had been refactored and
> people could likely depend on truncation for non-UTF8 content.
>
> So I have finally fixed the truncation to work. There was embryonic code, but
> wrong/subobtimal, in the PGDump driver.
>
> Should now be completely fixed in 1.11 and trunk per
> http://trac.osgeo.org/gdal/ticket/5854

thanks! Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From tomerlieber at gmail.com  Mon Feb 23 08:27:52 2015
From: tomerlieber at gmail.com (Tomer)
Date: Mon, 23 Feb 2015 08:27:52 -0800 (PST)
Subject: [gdal-dev] Extracting Features
Message-ID: <1424708872114-5189503.post@n6.nabble.com>

Hey,

I'm using the ogr2ogr vector utility, and i want to extract features 
from a data source which intersect the extent of another data source.
How can i do it?

Best regards,
Tomer



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Extracting-Features-tp5189503.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Mon Feb 23 09:23:39 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 23 Feb 2015 18:23:39 +0100
Subject: [gdal-dev] Call for discussion on RFC 54: Dataset transactions
Message-ID: <201502231823.39328.even.rouault@spatialys.com>

Hi,

This is a call for discussion on "RFC 54: Dataset transactions".

http://trac.osgeo.org/gdal/wiki/rfc54_dataset_transactions

Summary :

This RFC introduces an API to offer a transaction mechanism at dataset level 
and uses it in the PostgreSQL, SQLite and GPKG drivers. It also reworks 
significantly how transactions are handled in the PostgreSQL driver. It also 
introduces a generic mechanism to implement an emulation of transactions for 
datasources that would not natively support it, and uses it in the FileGDB 
driver. 

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Feb 23 09:32:17 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 23 Feb 2015 18:32:17 +0100
Subject: [gdal-dev] Extracting Features
In-Reply-To: <1424708872114-5189503.post@n6.nabble.com>
References: <1424708872114-5189503.post@n6.nabble.com>
Message-ID: <201502231832.17529.even.rouault@spatialys.com>

Le lundi 23 f?vrier 2015 17:27:52, Tomer a ?crit :
> Hey,
> 
> I'm using the ogr2ogr vector utility, and i want to extract features
> from a data source which intersect the extent of another data source.
> How can i do it?

Tomer,

Please don't duplicate threads for the same question.

As explained by Jukka, there's no direct way of doing it that, unless you 
accept clipping to occur in which case -clipsrc can be used. It you want to 
extract without clipping, you have to
use -spat xmin ymin xmax ymax, where xmin ymin xmax ymax come from the extent 
reported by ogrinfo on the other datasource (or though the GetExtent() call of 
the OGR API).

Even

> 
> Best regards,
> Tomer
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Extracting-Features-tp5189503.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From perrygeo at gmail.com  Mon Feb 23 10:40:42 2015
From: perrygeo at gmail.com (Matt Perry)
Date: Mon, 23 Feb 2015 10:40:42 -0800
Subject: [gdal-dev] GetFeatures 1-indexed for spatialite?
Message-ID: <CAG-GLBM8u3vRsJZYR-kcRmwZtUXk5b1pWoho9kwEP84TgciYoQ@mail.gmail.com>

I'm running into some strange behavior with the Spatialite driver,
accessing features through the ogr python bindings.

    layer.GetFeature(0) == None
    layer.GetFeature(1) == ...   # first feature

for spatialite layers only; all other drivers appear to be 0-indexed.

More details and code to reproduce:
https://github.com/perrygeo/python-raster-stats/issues/55#issuecomment-75602253

I'm using GDAL 1.11.1 on OS X via homebrew and the latest python
bindings from pypi. Is this a bug or undocumented behavior?

Matt Perry

From patrick.mckendree.young at gmail.com  Mon Feb 23 12:12:50 2015
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Mon, 23 Feb 2015 13:12:50 -0700
Subject: [gdal-dev] gdal.FileFromMemBuffer
Message-ID: <CADXYQQ5D+yHyTix-B2jF-W6vnOGNOmW_On7H9Mo-cL_+uLhkmQ@mail.gmail.com>

Hi all,

I've been playing around a bit with the vsimem stuff in gdal using python,
works great!  Basically, I'm getting a json response from an ArcServer
endpoint and I want to get out of the ESRI world as quick as I can.

My question is, when I do something like this,

r = requests.get(url, params=payload, timeout=timeout)
gdal.FileFromMemBuffer('/vsimem/temp', r.content)

does the buffer get copied to the created virtual file?  I know I need to
clean up with a gdal.Unlink(('/vsimem/temp'), but does something bad happen
when Python frees the r request?

Thanks a ton!
-Patrick
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150223/e8a7b2e8/attachment.html>

From warmerdam at pobox.com  Mon Feb 23 12:21:49 2015
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 23 Feb 2015 12:21:49 -0800
Subject: [gdal-dev] gdal.FileFromMemBuffer
In-Reply-To: <CADXYQQ5D+yHyTix-B2jF-W6vnOGNOmW_On7H9Mo-cL_+uLhkmQ@mail.gmail.com>
References: <CADXYQQ5D+yHyTix-B2jF-W6vnOGNOmW_On7H9Mo-cL_+uLhkmQ@mail.gmail.com>
Message-ID: <CA+YzLBfrfQuuZA123KLXj0pnrDJ2gsVqZtkZ2Z9NFmMVPBh-CA@mail.gmail.com>

Patrick,

After the FileFromMemBuffer() call, the content has been copied to an
internal buffer.  I think the C++ API has a way of avoiding the copy (if
desired) but the python does not.

The good thing is, no need to worry about the lifetime of the request
result object.

Best regards,
Frank


On Mon, Feb 23, 2015 at 12:12 PM, Patrick Young <
patrick.mckendree.young at gmail.com> wrote:

> Hi all,
>
> I've been playing around a bit with the vsimem stuff in gdal using python,
> works great!  Basically, I'm getting a json response from an ArcServer
> endpoint and I want to get out of the ESRI world as quick as I can.
>
> My question is, when I do something like this,
>
> r = requests.get(url, params=payload, timeout=timeout)
> gdal.FileFromMemBuffer('/vsimem/temp', r.content)
>
> does the buffer get copied to the created virtual file?  I know I need to
> clean up with a gdal.Unlink(('/vsimem/temp'), but does something bad happen
> when Python frees the r request?
>
> Thanks a ton!
> -Patrick
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150223/35355c0b/attachment.html>

From even.rouault at spatialys.com  Mon Feb 23 12:46:26 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 23 Feb 2015 21:46:26 +0100
Subject: [gdal-dev] GetFeatures 1-indexed for spatialite?
In-Reply-To: <CAG-GLBM8u3vRsJZYR-kcRmwZtUXk5b1pWoho9kwEP84TgciYoQ@mail.gmail.com>
References: <CAG-GLBM8u3vRsJZYR-kcRmwZtUXk5b1pWoho9kwEP84TgciYoQ@mail.gmail.com>
Message-ID: <201502232146.26941.even.rouault@spatialys.com>

Le lundi 23 f?vrier 2015 19:40:42, Matt Perry a ?crit :
> I'm running into some strange behavior with the Spatialite driver,
> accessing features through the ogr python bindings.
> 
>     layer.GetFeature(0) == None
>     layer.GetFeature(1) == ...   # first feature
> 
> for spatialite layers only; all other drivers appear to be 0-indexed.
> 
> More details and code to reproduce:
> https://github.com/perrygeo/python-raster-stats/issues/55#issuecomment-7560
> 2253
> 
> I'm using GDAL 1.11.1 on OS X via homebrew and the latest python
> bindings from pypi. Is this a bug or undocumented behavior?

Matt,

I'd say driver specific behaviour. Drivers for DBMS should return a feature ID 
that is the value of the integer primary key of the table (generally starting 
at 1). For other drivers shch as shapefile etc, the convention may change 
according to the driver.
Anyway in the general case there might be holes in numbering in case of 
deleted features. So the recommanded way of interating over features is to 
call GetNextFeature(), as GetFeature() might be slow in some drivers due to 
the lack of indexing or proper method to seek to an arbitrary feature.

Even

> 
> Matt Perry
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From perrygeo at gmail.com  Mon Feb 23 13:49:58 2015
From: perrygeo at gmail.com (Matt Perry)
Date: Mon, 23 Feb 2015 13:49:58 -0800
Subject: [gdal-dev] GetFeatures 1-indexed for spatialite?
In-Reply-To: <201502232146.26941.even.rouault@spatialys.com>
References: <CAG-GLBM8u3vRsJZYR-kcRmwZtUXk5b1pWoho9kwEP84TgciYoQ@mail.gmail.com>
	<201502232146.26941.even.rouault@spatialys.com>
Message-ID: <CAG-GLBOPCTa1jx6XYjMFD7YWayGBKtexNR2Ph9Tvygaivq61Hw@mail.gmail.com>

On Mon, Feb 23, 2015 at 12:46 PM, Even Rouault
<even.rouault at spatialys.com> wrote:
> Le lundi 23 f?vrier 2015 19:40:42, Matt Perry a ?crit :
>> I'm running into some strange behavior with the Spatialite driver,
>> accessing features through the ogr python bindings.
>>
>>     layer.GetFeature(0) == None
>>     layer.GetFeature(1) == ...   # first feature
>>
>> for spatialite layers only; all other drivers appear to be 0-indexed.
>>
>> More details and code to reproduce:
>> https://github.com/perrygeo/python-raster-stats/issues/55#issuecomment-7560
>> 2253
>>
>> I'm using GDAL 1.11.1 on OS X via homebrew and the latest python
>> bindings from pypi. Is this a bug or undocumented behavior?
>
> Matt,
>
> I'd say driver specific behaviour. Drivers for DBMS should return a feature ID
> that is the value of the integer primary key of the table (generally starting
> at 1). For other drivers shch as shapefile etc, the convention may change
> according to the driver.
> Anyway in the general case there might be holes in numbering in case of
> deleted features. So the recommanded way of interating over features is to
> call GetNextFeature(), as GetFeature() might be slow in some drivers due to
> the lack of indexing or proper method to seek to an arbitrary feature.
>

Sounds like a good idea to rewrite with GetNextFeaure(). Thanks!

From vesnikos at gmail.com  Wed Feb 25 22:46:34 2015
From: vesnikos at gmail.com (Nick Ves)
Date: Thu, 26 Feb 2015 08:46:34 +0200
Subject: [gdal-dev] Gdal 2.0 and Python Bindings
Message-ID: <CADCcPvucnd3rRH6zUXp2=AVi3GVPP806bjaDS+xYP1TWXTkyCQ@mail.gmail.com>

Hi List,

I am curious about the gdal v2 python bindings state. To be more
specific im wondering if there is going to be any functional wrappings
with an upcoming beta release and if so are there any documentation of
the API or how to migrate exicting code to the new API?

N

From bishop.dev at gmail.com  Wed Feb 25 23:49:23 2015
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Thu, 26 Feb 2015 10:49:23 +0300
Subject: [gdal-dev] Gdal 2.0 and Python Bindings
In-Reply-To: <CADCcPvucnd3rRH6zUXp2=AVi3GVPP806bjaDS+xYP1TWXTkyCQ@mail.gmail.com>
References: <CADCcPvucnd3rRH6zUXp2=AVi3GVPP806bjaDS+xYP1TWXTkyCQ@mail.gmail.com>
Message-ID: <54EED003.80506@gmail.com>

Hi Nick,

As for me, all previous (GDALv1) python bindings works fine.

Best regards,
     Dmitry

26.02.2015 09:46, Nick Ves ?????:
> Hi List,
>
> I am curious about the gdal v2 python bindings state. To be more
> specific im wondering if there is going to be any functional wrappings
> with an upcoming beta release and if so are there any documentation of
> the API or how to migrate exicting code to the new API?
>
> N
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From ari.jolma at gmail.com  Thu Feb 26 01:01:22 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu, 26 Feb 2015 11:01:22 +0200
Subject: [gdal-dev] GDAL 2.0 plans/schedule ?
In-Reply-To: <201502111237.08100.even.rouault@spatialys.com>
References: <201502111237.08100.even.rouault@spatialys.com>
Message-ID: <54EEE0E2.10103@gmail.com>

11.02.2015, 13:37, Even Rouault kirjoitti:
> Hi,
>
> As I'll give a talk about GDAL 2.0 at FOSS4G-NA next month, I'm curious to
> know if folks have things in their queue for 2.0 that they would wish to be
> mentionned, or more generally they want to discuss here so that we have a
> better picture of what is going on.
>
> As fas as I'm concerned, beyond the already adopted or to-be adopted RFCs,
> I've at least the following points in my queue :
> - work on OGR transactions at dataset level rather than at layer level (RFC)
> - improvements in a few OGR drivers regarding FID management/options.
> - performance improvements in the GDAL block cache w.r.t multithreading
> - (to be confirmed) improvements in the JP2OpenJPEG driver regarding compliance
> with Inspire ortho-imagery technical guidelines and some more general purpose
> enhancements (support for alpha band in creation)
> - (to be confirmed) addition of a OGR MongoDB driver (loosely derived from the
> existing out-of-tree contribution with significant rework)

There hasn't been much talk about this. We have of course this

http://trac.osgeo.org/gdal/wiki/GDAL20Changes

and maybe it should be checked for what is going to happen and what not.

I have some free time in the next weeks so I plan to go through the Perl 
API and make some changes, some will break the existing API but those 
will be in areas that have been made by Swig and not touched by me. I'll 
make a list of breaking changes.

One principle I want to enforce is the use of strings for constants 
(like data types, resampling methods etc.) in the API. I may 
discover/invent some other things while I work through the API.

One thing which is what we could do is to do some house keeping in the 
swig/include, which is a horrible mash of #ifdefs etc. Maybe some of the 
language specifics could really be moved to language specific 
subdirectories.



>
> I was thinking for a 2.0 beta1 at the end of April. Opinions ?

Sounds good to me.

Ari

>
> There have been a few IRC project meetings in the past (
> https://trac.osgeo.org/gdal/wiki/GovernanceAndCommunity ), mainly at the
> approach of release time. I was wondering if there is or will be a
> need/interest for that.
>
> Even
>


From even.rouault at spatialys.com  Thu Feb 26 01:23:35 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Feb 2015 10:23:35 +0100
Subject: [gdal-dev] GDAL 2.0 plans/schedule ?
In-Reply-To: <54EEE0E2.10103@gmail.com>
References: <201502111237.08100.even.rouault@spatialys.com>
	<54EEE0E2.10103@gmail.com>
Message-ID: <201502261023.35656.even.rouault@spatialys.com>

Hi Ari,

> There hasn't been much talk about this. We have of course this
> 
> http://trac.osgeo.org/gdal/wiki/GDAL20Changes
> 
> and maybe it should be checked for what is going to happen and what not.

I've updated the status of the implementation of the proposed changes:
http://trac.osgeo.org/gdal/wiki/GDAL20Changes?action=diff&version=34

> 
> I have some free time in the next weeks so I plan to go through the Perl
> API and make some changes, some will break the existing API but those
> will be in areas that have been made by Swig and not touched by me. I'll
> make a list of breaking changes.
> 
> One principle I want to enforce is the use of strings for constants
> (like data types, resampling methods etc.) in the API. I may
> discover/invent some other things while I work through the API.

If there are breaking changes, I encourage you to document them in 
MIGRATION_GUIDE.TXT at the root of the source tree.

> 
> One thing which is what we could do is to do some house keeping in the
> swig/include, which is a horrible mash of #ifdefs etc. Maybe some of the
> language specifics could really be moved to language specific
> subdirectories.

I agree it is getting messy. Sorting that out might not be easy.
One thing that made it messy was linked to RFC 46 with OGR depending on GDAL, 
and this caused issues because of interdependencies between .i files and the 
package namespaces (gdal, ogr). Particularly with CSharp.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Feb 26 01:24:52 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Feb 2015 10:24:52 +0100
Subject: [gdal-dev] Motion: Adopt RFC 54: Dataset transactions
Message-ID: <201502261024.53027.even.rouault@spatialys.com>

Hi,

As no points have been raised, 

Motion : I move to adopt RFC 54: Dataset transactions

http://trac.osgeo.org/gdal/wiki/rfc54_dataset_transactions

Starting with my +1

Best regards,

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mlennert at club.worldonline.be  Thu Feb 26 01:40:14 2015
From: mlennert at club.worldonline.be (Moritz Lennert)
Date: Thu, 26 Feb 2015 10:40:14 +0100
Subject: [gdal-dev] compiling MrSID plugin
In-Reply-To: <201502201808.24192.even.rouault@spatialys.com>
References: <54E620AA.4060202@club.worldonline.be>
	<201502191957.31618.even.rouault@spatialys.com>
	<54E717A7.8050507@club.worldonline.be>
	<201502201808.24192.even.rouault@spatialys.com>
Message-ID: <54EEE9FE.1000400@club.worldonline.be>

On 20/02/15 18:08, Even Rouault wrote:
> Le vendredi 20 f?vrier 2015 12:16:55, Moritz Lennert a ?crit :
>> On 19/02/15 19:57, Even Rouault wrote:
>>> Le jeudi 19 f?vrier 2015 18:43:06, Moritz Lennert a ?crit :
>>>> Hi,
>>>>
>>>> I do'nt know if this is more an issue for DebianGIS, but I have the
>>>> feeling it is an upstream issue, so I'm posting it here. Please redirect
>>>> me if you think I'm wrong.
>>>>
>>>> I'm trying to activate MrSID support for GDAL.
>>>>
>>>> I downloaded and unpacked MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44.
>>>>
>>>> Then I ran the following on a Debian testing machine:
>>>>
>>>> **
>>>> apt-get source gdal
>>>> cd gdal-1.10.1+dfsg/
>>>> debian/rules gdal-mrsid (which AFAIU basically just creates
>>>> libgdal-mrsid-1.10.1.tar.gz and copies it to the directory above the
>>>> GDAL source directory)
>>>> cd ../
>>>> tar xvzf libgdal-mrsid-1.10.1.tar.gz
>>>> cd libgdal-mrsid-1.10.1/
>>>> chmod +x configure
>>>> ./configure --with-gdal=/usr/bin/gdal-config
>>>> --with-mrsid=/home/mlennert/SRC/MrSID_DSDK-9.1.0.4045-linux.x86-64.gcc44
>>>> /Ra ster_DSDK --with-jp2mrsid=no
>>>> make
>>>> sudo make install
>>>> **
>>>>
>>>> I do not get any error message, but when I run
>>>>
>>>> gdalinfo --formats | grep -i sid
>>>>
>>>> the MrSID format is not listed.
>>>>
>>>> I ran ldd on the plugin .so installed in /usr/lib/gdalplugin
>>>>
>>>> and saw that it couldn't find libltidsdk.so.
>>>>
>>>> So I set
>>>>
>>>> export
>>>> LD_LIBRARY_PATH=/home/mlennert/SRC/MrSID_DSDK-9.1.0.4045-linux.x86-64.gc
>>>> c44 /Raster_DSDK/lib/
>>>>
>>>> and now ldd could find the library, but MrSID is still not listed
>>>> amongst the available formats.
>>>
>>> Moritz,
>>>
>>> If once you've set LD_LIBRARY_PATH, ldd doesn't report any unfound
>>> library, then you could check if GDAL_DRIVER_PATH is defined and make
>>> point it to /usr/lib/gdalplugin (although that path should be hardcoded
>>> in the GDAL library by default)
>>
>> Setting GDAL_DRIVER_PATH did the trick. Thanks for the hint !
>>
>> Before adding this info to the wiki as Jeff suggested, I think we should
>> investigate why this path is not set by default as you say.
>>
>> In gcore/gdaldrivermanager.cpp I read:
>>
>> "There are a few rules for the driver path.  If the GDAL_DRIVER_PATH
>> environment variable it set, it is taken to be a list of directories to
>> search separated by colons on UNIX, or semi-colons on Windows.
>> Otherwise the /usr/local/lib/gdalplugins directory, and (if known) the
>> lib/gdalplugins subdirectory of the gdal home directory are searched on
>> UNIX and $(BINDIR)\gdalplugins on Windows."
>>
>> So, /usr/lib/gdalplugins (which is where the plugin gets installed by
>> default using the process I explained) does not seem to be in the list
>> of hardcoded paths. So, maybe '/usr/lib/gdalplugins' could be added to
>> the search path ? It does seem a fairly standard path...
>
> There's this snippet of code as well:
>
> #ifdef GDAL_PREFIX
>          papszSearchPath = CSLAddString( papszSearchPath,
>      #ifdef MACOSX_FRAMEWORK
>                                          GDAL_PREFIX "/PlugIns");
>      #else
>                                          GDAL_PREFIX "/lib/gdalplugins" );
>      #endif
>
> If you look at port/cpl_config.h, you'll see a  #define GDAL_PREFIX with the
> installation prefix, so for example /usr if you ran ./configure --prefix=/usr,
> which makes /usr/lib/gdalplugins to be searched.
>

Sorry for the delay in replying:

port/cpl_config.h shows this:

/* --prefix directory for GDAL install */
#define GDAL_PREFIX "/usr"

so does, obviously 'gdal-config --prefix'.

So it's a bit mysterious to me why I have to set GDAL_DRIVER_PATH...

Moritz

From jukka.rahkonen at maanmittauslaitos.fi  Thu Feb 26 02:08:42 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Thu, 26 Feb 2015 10:08:42 +0000 (UTC)
Subject: [gdal-dev] Motion: Adopt RFC 54: Dataset transactions
References: <201502261024.53027.even.rouault@spatialys.com>
Message-ID: <loom.20150226T110743-707@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> Hi,
> 
> As no points have been raised, 
> 
> Motion : I move to adopt RFC 54: Dataset transactions
> 
> http://trac.osgeo.org/gdal/wiki/rfc54_dataset_transactions
> 
> Starting with my +1


+1

-Jukka Rahkonen-


From kris_nich at hotmail.co.uk  Fri Feb 27 03:28:01 2015
From: kris_nich at hotmail.co.uk (Dusted)
Date: Fri, 27 Feb 2015 03:28:01 -0800 (PST)
Subject: [gdal-dev] GDAL GeoTiff Corrupt on Write (C++ )
Message-ID: <1425036481903-5190440.post@n6.nabble.com>

I'm getting corrupt output when writing a GeoTiff using GDAL API (v1.10 -
C++). The raster geotransform is correct, the block is written in the
correct position but the pixels are written at random positions and values
within the block.

Example:  http://i.imgur.com/mntnAfK.png <http://i.imgur.com/mntnAfK.png>  

Method: Open a GDAL Raster --> copy projection info & size --> create output
GeoTiff --> write a block from array at offset.

Code:

//Open the input DEM
const char* demFName = "/Users/mount.dem";
const char* outFName = "/Users/geodata/out_test.tif";
auto poDataset = ioUtils::openDem(demFName);
double adfGeoTransform[6];
poDataset->GetGeoTransform( adfGeoTransform );

//Setup driver
const char *pszFormat = "GTiff";
GDALDriver *poDriver;
poDriver = GetGDALDriverManager()->GetDriverByName(pszFormat);
char *pszSRS_WKT = NULL;
GDALRasterBand *poBand;
//Get size from input Raster
int xSize = poDataset->GetRasterXSize();
int ySize = poDataset->GetRasterYSize();

//Set output Dataset
GDALDataset *poDstDS;
char **papszOptions = NULL;

//Create output geotiff
poDstDS = poDriver->Create( outFName, xSize, ySize, 1, GDT_Byte,
papszOptions );

//Get the geotrans from the input geotrans
poDataset->GetGeoTransform( adfGeoTransform );
poDstDS->SetGeoTransform( adfGeoTransform );
poDstDS->SetProjection( poDataset->GetProjectionRef() );

//Create some data to write
unsigned char rData[512*512];
//Assign some values other than 0
for (int col=0; col < 512; col++){
    for (int row=0; row < 512; row++){
        rData[col*row] = 50;
    }
}

//Write some data
poBand = poDstDS->GetRasterBand(1);
poBand->RasterIO( GF_Write, 200, 200, 512, 512,
                  rData, 512, 512, GDT_Byte, 0, 0 );

//Close
GDALClose( (GDALDatasetH) poDstDS );
std::cout << "Done" << std::endl;


Any pointers / help much appreciated!

Chris



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-GeoTiff-Corrupt-on-Write-C-tp5190440.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Fri Feb 27 03:34:06 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 27 Feb 2015 12:34:06 +0100
Subject: [gdal-dev] GDAL GeoTiff Corrupt on Write (C++ )
In-Reply-To: <1425036481903-5190440.post@n6.nabble.com>
References: <1425036481903-5190440.post@n6.nabble.com>
Message-ID: <201502271234.06971.even.rouault@spatialys.com>

Le vendredi 27 f?vrier 2015 12:28:01, Dusted a ?crit :
> I'm getting corrupt output when writing a GeoTiff using GDAL API (v1.10 -
> C++). The raster geotransform is correct, the block is written in the
> correct position but the pixels are written at random positions and values
> within the block.
> 
> Example:  http://i.imgur.com/mntnAfK.png <http://i.imgur.com/mntnAfK.png>
> 
> Method: Open a GDAL Raster --> copy projection info & size --> create
> output GeoTiff --> write a block from array at offset.
> 
> Code:
> 
> //Open the input DEM
> const char* demFName = "/Users/mount.dem";
> const char* outFName = "/Users/geodata/out_test.tif";
> auto poDataset = ioUtils::openDem(demFName);
> double adfGeoTransform[6];
> poDataset->GetGeoTransform( adfGeoTransform );
> 
> //Setup driver
> const char *pszFormat = "GTiff";
> GDALDriver *poDriver;
> poDriver = GetGDALDriverManager()->GetDriverByName(pszFormat);
> char *pszSRS_WKT = NULL;
> GDALRasterBand *poBand;
> //Get size from input Raster
> int xSize = poDataset->GetRasterXSize();
> int ySize = poDataset->GetRasterYSize();
> 
> //Set output Dataset
> GDALDataset *poDstDS;
> char **papszOptions = NULL;
> 
> //Create output geotiff
> poDstDS = poDriver->Create( outFName, xSize, ySize, 1, GDT_Byte,
> papszOptions );
> 
> //Get the geotrans from the input geotrans
> poDataset->GetGeoTransform( adfGeoTransform );
> poDstDS->SetGeoTransform( adfGeoTransform );
> poDstDS->SetProjection( poDataset->GetProjectionRef() );
> 
> //Create some data to write
> unsigned char rData[512*512];
> //Assign some values other than 0
> for (int col=0; col < 512; col++){
>     for (int row=0; row < 512; row++){
>         rData[col*row] = 50;

==> rData[row*512+col] = 50

And for efficiency with the CPU caches, you should switch the order of the for 
loops.

>     }
> }
> 
> //Write some data
> poBand = poDstDS->GetRasterBand(1);
> poBand->RasterIO( GF_Write, 200, 200, 512, 512,
>                   rData, 512, 512, GDT_Byte, 0, 0 );
> 
> //Close
> GDALClose( (GDALDatasetH) poDstDS );
> std::cout << "Done" << std::endl;
> 
> 
> Any pointers / help much appreciated!
> 
> Chris
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/GDAL-GeoTiff-Corrupt-on-Write-C-tp5190
> 440.html Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kris_nich at hotmail.co.uk  Fri Feb 27 03:56:09 2015
From: kris_nich at hotmail.co.uk (Dusted)
Date: Fri, 27 Feb 2015 03:56:09 -0800 (PST)
Subject: [gdal-dev] GDAL GeoTiff Corrupt on Write (C++ )
In-Reply-To: <201502271234.06971.even.rouault@spatialys.com>
References: <1425036481903-5190440.post@n6.nabble.com>
	<201502271234.06971.even.rouault@spatialys.com>
Message-ID: <1425038169392-5190448.post@n6.nabble.com>

Thanks Evan - knew it was something trivial but couldn't see it for looking!

Chris



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-GeoTiff-Corrupt-on-Write-C-tp5190440p5190448.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From kumarsandeep2357 at gmail.com  Sat Feb 28 07:20:10 2015
From: kumarsandeep2357 at gmail.com (sandeep kumar)
Date: Sat, 28 Feb 2015 20:50:10 +0530
Subject: [gdal-dev] Participation in GSoC - 2015
Message-ID: <CAKxdox=vrz+Gc2oqY1sYz-5AHaoySpd=2thQ96ND_vjWQEBGfw@mail.gmail.com>

Hi,

    I am sandeep from IIIT Hyderabad. I am pursuing MS by Research in the
field of Spatial Informatics. I have collaborated with gvSIG as part of
GSoC - 2013 on the idea "Add Raster Format to Scripting in gvSIG" [1] under
the guidance of Joaquin del cerro.

    I would like to participate in GSoC - 2015 by working on the idea "GDAL
image stretch/filter utility". I have experience in image processing
techniques. Moreover, my MS work is about Object Based Image Analysis. I
need guidance to get more idea about the problem.


[1] - Add Raster Format to Scripting in gvSIG
<https://www.google-melange.com/gsoc/project/details/google/gsoc2013/kumarsandeep2357/5698390809640960>

Note: I am also trying to work on one idea from gvSIG and Opticks. I am
just exploring the ideas that are more close to my work.

Thanks,
Sandeep Kumar,
MS by Research,
Lab for Spatial Informatics,
IIIT Hyderabad.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150228/ddd01d40/attachment.html>

From yutaxsato at gmail.com  Sat Feb 28 08:51:47 2015
From: yutaxsato at gmail.com (Yuta Sato)
Date: Sun, 1 Mar 2015 01:51:47 +0900
Subject: [gdal-dev] gdallocationinfo.exe multiple access
Message-ID: <CAPqnkJQtcQ6LU_24NbFcpryE4-dBKRjX036-x2_1dTqqjY4c0g@mail.gmail.com>

I have a list of longitudes and latitudes for which I extract the pixel
values using gdallocationinfo.exe one by one for each pairs of longitudes
and latitudes using for loop.

How I simultaneously get pixel values for all the list of longitudes and
latitudes?
My list is large, so I want faster retrieval.
I am using python and outputting the pixel values into text file.
Is it possible?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150301/663c8a69/attachment.html>

From even.rouault at spatialys.com  Sat Feb 28 09:05:32 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 28 Feb 2015 18:05:32 +0100
Subject: [gdal-dev] gdallocationinfo.exe multiple access
In-Reply-To: <CAPqnkJQtcQ6LU_24NbFcpryE4-dBKRjX036-x2_1dTqqjY4c0g@mail.gmail.com>
References: <CAPqnkJQtcQ6LU_24NbFcpryE4-dBKRjX036-x2_1dTqqjY4c0g@mail.gmail.com>
Message-ID: <201502281805.32870.even.rouault@spatialys.com>

Le samedi 28 f?vrier 2015 17:51:47, Yuta Sato a ?crit :
> I have a list of longitudes and latitudes for which I extract the pixel
> values using gdallocationinfo.exe one by one for each pairs of longitudes
> and latitudes using for loop.
> 
> How I simultaneously get pixel values for all the list of longitudes and
> latitudes?
> My list is large, so I want faster retrieval.
> I am using python and outputting the pixel values into text file.
> Is it possible?

Yuka,

you can pipe into gdallocationinfo several tuples of coordinates:

$ printf "0 0\n0 1\n" | gdallocationinfo byte.tif
Report:
  Location: (0P,0L)
  Band 1:
    Value: 107
Report:
  Location: (0P,1L)
  Band 1:
    Value: 115

But I think it would be easier/faster to just do that fully in Python. The 
following script has likely everything you need to do that:

http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/val_at_coord.py

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Sat Feb 28 09:42:42 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 28 Feb 2015 18:42:42 +0100
Subject: [gdal-dev] gdallocationinfo.exe multiple access
In-Reply-To: <CAPqnkJQ6xcKX=vJinO-CMewNMf5FVXBTgf_yP8QK2KaRF4GHEw@mail.gmail.com>
References: <CAPqnkJQtcQ6LU_24NbFcpryE4-dBKRjX036-x2_1dTqqjY4c0g@mail.gmail.com>
	<201502281805.32870.even.rouault@spatialys.com>
	<CAPqnkJQ6xcKX=vJinO-CMewNMf5FVXBTgf_yP8QK2KaRF4GHEw@mail.gmail.com>
Message-ID: <201502281842.42600.even.rouault@spatialys.com>

Le samedi 28 f?vrier 2015 18:29:01, Yuta Sato a ?crit :
> Dear Even Rouault:
> 
> Thanks for you quick response.
> Unfortunately, I do not know how to pipe using python script.
> I just know to use as follows:
> 
> for x, y in zip(lons, lats):
>         vals = subprocess.check_output([gdallocationinfo, '-valonly',
> '-l_srs', 'wgs84', image, str(x), str(y)])
> 
> The input lons and lats are in the text file.

As I suggested, you'd better extract the gist of  
http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/val_at_coord.py

So something like

from osgeo import gdal
from osgeo import osr

ds = gdal.Open( image )

srs = osr.SpatialReference()
srs.ImportFromWkt(ds.GetProjection())

srs_wgs84 = osr.SpatialReference()
srs_wgs84.SetFromUserInput('WGS84')

ct = osr.CoordinateTransformation(srs_wgs84, srs)

for lon, lat in zip(lons, lats):

	(X, Y, _) = ct.TransformPoint(lon, lat)

	geomatrix = ds.GetGeoTransform()
	(success, inv_geometrix) = gdal.InvGeoTransform(geomatrix)
	x = int(inv_geometrix[0] + inv_geometrix[1] * X + inv_geometrix[2] * Y)
	y = int(inv_geometrix[3] + inv_geometrix[4] * X + inv_geometrix[5] * Y)

	vals = ds.ReadAsArray(x,y,1,1)



> 
> Can you help me?
> <https://plus.google.com/u/0/106381021255842353792?prsrc=4>
> 
> On Sun, Mar 1, 2015 at 2:05 AM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le samedi 28 f?vrier 2015 17:51:47, Yuta Sato a ?crit :
> > > I have a list of longitudes and latitudes for which I extract the pixel
> > > values using gdallocationinfo.exe one by one for each pairs of
> > > longitudes and latitudes using for loop.
> > > 
> > > How I simultaneously get pixel values for all the list of longitudes
> > > and latitudes?
> > > My list is large, so I want faster retrieval.
> > > I am using python and outputting the pixel values into text file.
> > > Is it possible?
> > 
> > Yuka,
> > 
> > you can pipe into gdallocationinfo several tuples of coordinates:
> > 
> > $ printf "0 0\n0 1\n" | gdallocationinfo byte.tif
> > 
> > Report:
> >   Location: (0P,0L)
> >   
> >   Band 1:
> >     Value: 107
> > 
> > Report:
> >   Location: (0P,1L)
> >   
> >   Band 1:
> >     Value: 115
> > 
> > But I think it would be easier/faster to just do that fully in Python.
> > The following script has likely everything you need to do that:
> > 
> > http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/val_at_coord.py
> > 
> > Even
> > 
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Sat Feb 28 10:11:31 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 28 Feb 2015 19:11:31 +0100
Subject: [gdal-dev] gdallocationinfo.exe multiple access
In-Reply-To: <CAPqnkJQq1ZwwETyRbYrN9ADQTsD3Q3WV9E7cZgZJSKx=5Z4Okw@mail.gmail.com>
References: <CAPqnkJQtcQ6LU_24NbFcpryE4-dBKRjX036-x2_1dTqqjY4c0g@mail.gmail.com>
	<201502281842.42600.even.rouault@spatialys.com>
	<CAPqnkJQq1ZwwETyRbYrN9ADQTsD3Q3WV9E7cZgZJSKx=5Z4Okw@mail.gmail.com>
Message-ID: <201502281911.31066.even.rouault@spatialys.com>

Le samedi 28 f?vrier 2015 19:03:21, Yuta Sato a ?crit :
> Dear Even Rouault:
> Thanks for full Python script. I understood this.
> 
> However, since my lons and lats are thousands, it is taking days to extract
> the values. So, my question is how can I sped up it. Is it possible to call
> several tuples of lons and lats simultaneously? For loop is doing one by
> one right?

Days for just thousands of values ? I hope not...
If you suffer from bad performance, you can try to sort the values by 
decreasing latitudes (and for equal latitude, by increasing longitude), so as 
to be nice with the typical organization of raster files and with the GDAL 
block cache. Alternatively/complementarily you can increase the maximum size 
of the GDAL block cache. The default value is 40 MB. If you call 
gdal.SetConfigOption('GDAL_CACHEMAX', '500'), you'll increase it to 500 MB.
Otherwise if the dataset can entirely fit into memory, you can read it fully 
with ds.ReadAsArray(), and read directly from the returned array with the 
(x,y) computed as below.
Parallel python could be a solution if you really need parallized processing. 
But I guess the complication would only be worth if you must deal with 
millions or billions of coordinate pairs.

> 
> On Sun, Mar 1, 2015 at 2:42 AM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le samedi 28 f?vrier 2015 18:29:01, Yuta Sato a ?crit :
> > > Dear Even Rouault:
> > > 
> > > Thanks for you quick response.
> > > Unfortunately, I do not know how to pipe using python script.
> > > I just know to use as follows:
> > > 
> > > for x, y in zip(lons, lats):
> > >         vals = subprocess.check_output([gdallocationinfo, '-valonly',
> > > 
> > > '-l_srs', 'wgs84', image, str(x), str(y)])
> > > 
> > > The input lons and lats are in the text file.
> > 
> > As I suggested, you'd better extract the gist of
> > http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/val_at_coord.py
> > 
> > So something like
> > 
> > from osgeo import gdal
> > from osgeo import osr
> > 
> > ds = gdal.Open( image )
> > 
> > srs = osr.SpatialReference()
> > srs.ImportFromWkt(ds.GetProjection())
> > 
> > srs_wgs84 = osr.SpatialReference()
> > srs_wgs84.SetFromUserInput('WGS84')
> > 
> > ct = osr.CoordinateTransformation(srs_wgs84, srs)
> > 
> > for lon, lat in zip(lons, lats):
> >         (X, Y, _) = ct.TransformPoint(lon, lat)
> >         
> >         geomatrix = ds.GetGeoTransform()
> >         (success, inv_geometrix) = gdal.InvGeoTransform(geomatrix)
> >         x = int(inv_geometrix[0] + inv_geometrix[1] * X +
> >         inv_geometrix[2]
> > 
> > * Y)
> > 
> >         y = int(inv_geometrix[3] + inv_geometrix[4] * X +
> >         inv_geometrix[5]
> > 
> > * Y)
> > 
> >         vals = ds.ReadAsArray(x,y,1,1)
> > > 
> > > Can you help me?
> > > <https://plus.google.com/u/0/106381021255842353792?prsrc=4>
> > > 
> > > On Sun, Mar 1, 2015 at 2:05 AM, Even Rouault
> > > <even.rouault at spatialys.com
> > > 
> > > wrote:
> > > > Le samedi 28 f?vrier 2015 17:51:47, Yuta Sato a ?crit :
> > > > > I have a list of longitudes and latitudes for which I extract the
> > 
> > pixel
> > 
> > > > > values using gdallocationinfo.exe one by one for each pairs of
> > > > > longitudes and latitudes using for loop.
> > > > > 
> > > > > How I simultaneously get pixel values for all the list of
> > > > > longitudes and latitudes?
> > > > > My list is large, so I want faster retrieval.
> > > > > I am using python and outputting the pixel values into text file.
> > > > > Is it possible?
> > > > 
> > > > Yuka,
> > > > 
> > > > you can pipe into gdallocationinfo several tuples of coordinates:
> > > > 
> > > > $ printf "0 0\n0 1\n" | gdallocationinfo byte.tif
> > > > 
> > > > Report:
> > > >   Location: (0P,0L)
> > > >   
> > > >   Band 1:
> > > >     Value: 107
> > > > 
> > > > Report:
> > > >   Location: (0P,1L)
> > > >   
> > > >   Band 1:
> > > >     Value: 115
> > > > 
> > > > But I think it would be easier/faster to just do that fully in
> > > > Python.
> > 
> > > > The following script has likely everything you need to do that:
> > http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/val_at_coord.py
> > 
> > > > Even
> > > > 
> > > > 
> > > > --
> > > > Spatialys - Geospatial professional services
> > > > http://www.spatialys.com
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

