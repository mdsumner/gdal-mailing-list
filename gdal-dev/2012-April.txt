From lhomme.xavier at gmail.com  Mon Apr  2 08:53:16 2012
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Mon Apr  2 08:53:57 2012
Subject: [gdal-dev] Apply Spatial Operator
Message-ID: <CACqzBMyv1t3dc=v9Pu05QpPwL=MVHFpDWC5un8Dg5aN6cunEyA@mail.gmail.com>

Hi

 I'm connected to a WFS Source. I want to filter with a polygon and
specific spatial operators like contains , touches, intersects,...
 In the API the layer has the SpatialFilter function where we could set the
Geometry but I dont find any function for setting the spatial operator.
 Do I need to filter after obtenaing the Geometry with GetFeature ?

Thanks in advance

xav
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120402/3fda036c/attachment.html
From oyvind.idland at gmail.com  Mon Apr  2 09:34:54 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Mon Apr  2 09:35:24 2012
Subject: [gdal-dev] Most optimal way of using tiles ?
Message-ID: <CAEVk4t1Rb+JWzc5O28nht7U1udemm6YGS0Pb0Gd3Y-1+HYWA2w@mail.gmail.com>

Hello,

I got a huge dataset consisting of about 100 uncompressed TIFF's, each with
size 12599 X 9449 pixels with RGB bands.
Note, that the TIFF's are not georef'ed, instead there are .tfw's following
each file. Also, since they are about 350 MB each,
I guess converting them to a compressed format could speed things up (I/O).

The "normal" approach would probably be to make a VRT dataset, and build
overviews. However, building a an
overview based on the entire VRT index seems a bit heavy in this case.

Is it possible in some way to create compressed overviews (using gdaladdo)
for each file, and
then build a VRT based on these ? Will the VRT dataset utilize the
generated overviews ?


- oyvind
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120402/ba2d69b1/attachment.html
From saad.hessane at gmail.com  Mon Apr  2 09:57:27 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Mon Apr  2 09:58:18 2012
Subject: Fwd: [gdal-dev] Most optimal way of using tiles ?
In-Reply-To: <CAEcp1tBHvFnFTGeaqeSdg=9zgDQjrjBVGPgd4vqqqOBsgSXP-w@mail.gmail.com>
References: <CAEVk4t1Rb+JWzc5O28nht7U1udemm6YGS0Pb0Gd3Y-1+HYWA2w@mail.gmail.com>
	<CAEcp1tBHvFnFTGeaqeSdg=9zgDQjrjBVGPgd4vqqqOBsgSXP-w@mail.gmail.com>
Message-ID: <CAEcp1tBw5jg95Ax1H13D_HOe97m4QVd6vaoaFJsr6usB0n6WUA@mail.gmail.com>

---------- Forwarded message ----------
From: Sa?d HESSANE <saad.hessane@gmail.com>
Date: Mon, 2 Apr 2012 15:56:27 +0200
Subject: Re: [gdal-dev] Most optimal way of using tiles ?
To: Oyvind Idland <oyvind.idland@gmail.com>

Hy,

you can use "gdaladdo --config COMPRESS_OVERVIEW [DEFLATE | JPEG]" to
create compressed overview.
And then you can use gdalbuildvrt or gdaltindex to build an index of the files.

2012/4/2, Oyvind Idland <oyvind.idland@gmail.com>:
> Hello,
>
> I got a huge dataset consisting of about 100 uncompressed TIFF's, each with
> size 12599 X 9449 pixels with RGB bands.
> Note, that the TIFF's are not georef'ed, instead there are .tfw's following
> each file. Also, since they are about 350 MB each,
> I guess converting them to a compressed format could speed things up (I/O).
>
> The "normal" approach would probably be to make a VRT dataset, and build
> overviews. However, building a an
> overview based on the entire VRT index seems a bit heavy in this case.
>
> Is it possible in some way to create compressed overviews (using gdaladdo)
> for each file, and
> then build a VRT based on these ? Will the VRT dataset utilize the
> generated overviews ?
>
>
> - oyvind
>
From jukka.rahkonen at mmmtike.fi  Mon Apr  2 10:43:18 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Apr  2 10:44:18 2012
Subject: [gdal-dev] Re: Apply Spatial Operator
References: <CACqzBMyv1t3dc=v9Pu05QpPwL=MVHFpDWC5un8Dg5aN6cunEyA@mail.gmail.com>
Message-ID: <loom.20120402T162745-747@post.gmane.org>

xavier lhomme <lhomme.xavier <at> gmail.com> writes:

> 
> Hi?I'm connected to a WFS Source. I want to filter with a polygon and specific
spatial operators like contains , touches, intersects,... ?In the API the layer
has the SpatialFilter function where we could set the Geometry but I dont find
any function for setting the spatial operator. 
> ?Do I need to filter after obtenaing the Geometry with GetFeature ? Thanks in
advance xav

Hi,

How about learning to use the OGC Filter Encoding system, send WFS queries with
wget or curl and store the result as GML and continue with GDAL? There are some
examples on this page http://latuviitta.org/Http-POST-ja-Filter.php

Right now the target server seems to be down. I sent a request for reboot so
sooner or later the server will work again.

Page is in Finnish but you can try the examples with Firefox and Poster
extension. Use this as the server base URL
http://hip.latuviitta.org/cgi-bin/tinyows

and then just copy and paste the <wfs:GetFeature stuff into Poster and send.

Kosmo GIS is pretty good with spatial filters even the way to make them is a bit
tricky. After the server is rebooted this link will show a short video about
that example http://188.64.1.61/Kosmo_WFS_3.swf 

-Jukka Rahkonen-



From warmerdam at pobox.com  Mon Apr  2 16:24:49 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Apr  2 16:25:10 2012
Subject: [gdal-dev] Re: Motion: Contract Chaitanya as GDAL Maintainer
In-Reply-To: <CA+YzLBf_zk54NVufRfcY8kx9ko54Resg7NJwmS=i2KP714NOyw@mail.gmail.com>
References: <CA+YzLBf_zk54NVufRfcY8kx9ko54Resg7NJwmS=i2KP714NOyw@mail.gmail.com>
Message-ID: <CA+YzLBd=MLAs=+tFjT+ouGZkdf9C8VVUbi00aT-12cSnOMJ73g@mail.gmail.com>

On Thu, Mar 22, 2012 at 1:49 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Motion: Frank Warmerdam is authorized to negotiate a paid maintainer
> contract with Chaitanya Kumar CH for up to $5200 USD at $13USD/hr
> over five months, and would be acting as supervisor, operating under
> the terms of RFC 9 (GDAL Paid Maintainer Guidelines).

Folks,

Somewhat belatedly I declare the above motion passed with
support from Frank, Howard, Even, Daniel, Tamas and a
non-PSC vote of confidence from Kyle.

I'd complete the contractual arrangements and but I believe
we can consider Chaitanya "on the job" now.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From chaitanya.ch at gmail.com  Mon Apr  2 21:53:54 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Apr  2 21:54:37 2012
Subject: [gdal-dev] Re: Motion: Contract Chaitanya as GDAL Maintainer
In-Reply-To: <CA+YzLBd=MLAs=+tFjT+ouGZkdf9C8VVUbi00aT-12cSnOMJ73g@mail.gmail.com>
References: <CA+YzLBf_zk54NVufRfcY8kx9ko54Resg7NJwmS=i2KP714NOyw@mail.gmail.com>
	<CA+YzLBd=MLAs=+tFjT+ouGZkdf9C8VVUbi00aT-12cSnOMJ73g@mail.gmail.com>
Message-ID: <CAMKgpObX8XmpaU2n3pk9JEc23E-ogY2ECT2+s=5XMqp+Cht4+A@mail.gmail.com>

Thanks Frank and others for your votes.

On Tue, Apr 3, 2012 at 1:54 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> On Thu, Mar 22, 2012 at 1:49 PM, Frank Warmerdam <warmerdam@pobox.com>
> wrote:
> > Motion: Frank Warmerdam is authorized to negotiate a paid maintainer
> > contract with Chaitanya Kumar CH for up to $5200 USD at $13USD/hr
> > over five months, and would be acting as supervisor, operating under
> > the terms of RFC 9 (GDAL Paid Maintainer Guidelines).
>
> Folks,
>
> Somewhat belatedly I declare the above motion passed with
> support from Frank, Howard, Even, Daniel, Tamas and a
> non-PSC vote of confidence from Kyle.
>
> I'd complete the contractual arrangements and but I believe
> we can consider Chaitanya "on the job" now.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120403/4309075f/attachment.html
From massimo.costantini at gmail.com  Tue Apr  3 03:08:44 2012
From: massimo.costantini at gmail.com (Massimo Costantini)
Date: Tue Apr  3 03:09:13 2012
Subject: [gdal-dev] problem with gdal 1.9 and libkml 1.2
Message-ID: <CAO_q5tsfo3p2pWko09b8P2VusbFGGVV_1i2E3LsRUtGrw6SRvg@mail.gmail.com>

Hi,

I try to compile gdal 1.9.0 with libkml 1.2.0 but I have some problem. G++
write out this error:

ogrlibkmldatasource.cpp: In member function 'int
OGRLIBKMLDataSource::OpenKml(const char*, int)':
ogrlibkmldatasource.cpp:817: warning: converting to non-pointer type 'int'
from NULL
ogrlibkmldatasource.cpp: In member function 'int
OGRLIBKMLDataSource::OpenKmz(const char*, int)':
ogrlibkmldatasource.cpp:914: warning: converting to non-pointer type 'int'
from NULL
ogrlibkmldatasource.cpp: In member function 'OGRErr
OGRLIBKMLDataSource::DeleteLayerKml(int)':
ogrlibkmldatasource.cpp:1536: error: 'class kmldom::Container' has no
member named 'DeleteFeatureAt'
ogrlibkmldatasource.cpp: In member function 'OGRErr
OGRLIBKMLDataSource::DeleteLayerKmz(int)':
ogrlibkmldatasource.cpp:1597: error: 'class kmldom::Container' has no
member named 'DeleteFeatureAt'
ogrlibkmldatasource.cpp: In member function 'void
OGRLIBKMLDataSource::SetStyleTable2Kml(OGRStyleTable*)':
ogrlibkmldatasource.cpp:1848: error: 'class kmldom::Document' has no member
named 'DeleteStyleSelectorAt'
make[3]: *** [../o/ogrlibkmldatasource.lo] Error 1
make[3]: Leaving directory `/home/user/gdal-1.9.0/ogr/ogrsf_frmts/libkml'
make[2]: *** [libkml-target] Error 2
make[2]: Leaving directory `/home/user/gdal-1.9.0/ogr/ogrsf_frmts'
make[1]: *** [sublibs] Error 2
make[1]: Leaving directory `/home/user/gdal-1.9.0/ogr'
make: *** [ogr-target] Error 2

Someone can tell me how resolve?


Massimo Costantini
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120403/42aed63a/attachment.html
From polimax at mail.ru  Tue Apr  3 03:39:51 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Tue Apr  3 03:44:13 2012
Subject: [gdal-dev] problem with gdal 1.9 and libkml 1.2
In-Reply-To: <CAO_q5tsfo3p2pWko09b8P2VusbFGGVV_1i2E3LsRUtGrw6SRvg@mail.gmail.com>
References: <CAO_q5tsfo3p2pWko09b8P2VusbFGGVV_1i2E3LsRUtGrw6SRvg@mail.gmail.com>
Message-ID: <4F7AA947.9050706@mail.ru>

03.04.2012 11:08, Massimo Costantini ???????:
> Hi,
>
> I try to compile gdal 1.9.0 with libkml 1.2.0 but I have some problem. 
> G++ write out this error:
>
> ogrlibkmldatasource.cpp: In member function 'int 
> OGRLIBKMLDataSource::OpenKml(const char*, int)':
> ogrlibkmldatasource.cpp:817: warning: converting to non-pointer type 
> 'int' from NULL
> ogrlibkmldatasource.cpp: In member function 'int 
> OGRLIBKMLDataSource::OpenKmz(const char*, int)':
> ogrlibkmldatasource.cpp:914: warning: converting to non-pointer type 
> 'int' from NULL
> ogrlibkmldatasource.cpp: In member function 'OGRErr 
> OGRLIBKMLDataSource::DeleteLayerKml(int)':
> ogrlibkmldatasource.cpp:1536: error: 'class kmldom::Container' has no 
> member named 'DeleteFeatureAt'
> ogrlibkmldatasource.cpp: In member function 'OGRErr 
> OGRLIBKMLDataSource::DeleteLayerKmz(int)':
> ogrlibkmldatasource.cpp:1597: error: 'class kmldom::Container' has no 
> member named 'DeleteFeatureAt'
> ogrlibkmldatasource.cpp: In member function 'void 
> OGRLIBKMLDataSource::SetStyleTable2Kml(OGRStyleTable*)':
> ogrlibkmldatasource.cpp:1848: error: 'class kmldom::Document' has no 
> member named 'DeleteStyleSelectorAt'
> make[3]: *** [../o/ogrlibkmldatasource.lo] Error 1
> make[3]: Leaving directory `/home/user/gdal-1.9.0/ogr/ogrsf_frmts/libkml'
> make[2]: *** [libkml-target] Error 2
> make[2]: Leaving directory `/home/user/gdal-1.9.0/ogr/ogrsf_frmts'
> make[1]: *** [sublibs] Error 2
> make[1]: Leaving directory `/home/user/gdal-1.9.0/ogr'
> make: *** [ogr-target] Error 2
>
> Someone can tell me how resolve?
>
>
> Massimo Costantini
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
As I know, libkml 1.3 is needed. By now the 1.3 version is on trunk 
only. You have to get source code from svn and compile it before 
building GDAL with libkml

Regards,
     Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120403/8648f0b9/attachment.html
From mateusz at loskot.net  Tue Apr  3 05:15:41 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Apr  3 05:16:42 2012
Subject: [gdal-dev] problem with gdal 1.9 and libkml 1.2
In-Reply-To: <CAO_q5tsfo3p2pWko09b8P2VusbFGGVV_1i2E3LsRUtGrw6SRvg@mail.gmail.com>
References: <CAO_q5tsfo3p2pWko09b8P2VusbFGGVV_1i2E3LsRUtGrw6SRvg@mail.gmail.com>
Message-ID: <CABUeae8LDmJLVNFKN7q2y4hJMrNcFR6_E=Ux+RyxYhN6YFnAEQ@mail.gmail.com>

On 3 April 2012 08:08, Massimo Costantini <massimo.costantini@gmail.com> wrote:
> Hi,
>
> I try to compile gdal 1.9.0 with libkml 1.2.0

http://trac.osgeo.org/gdal/wiki/LibKML

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From oyvind.idland at gmail.com  Tue Apr  3 07:48:48 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Tue Apr  3 07:49:30 2012
Subject: [gdal-dev] Most optimal way of using tiles ?
In-Reply-To: <CAEcp1tBw5jg95Ax1H13D_HOe97m4QVd6vaoaFJsr6usB0n6WUA@mail.gmail.com>
References: <CAEVk4t1Rb+JWzc5O28nht7U1udemm6YGS0Pb0Gd3Y-1+HYWA2w@mail.gmail.com>
	<CAEcp1tBHvFnFTGeaqeSdg=9zgDQjrjBVGPgd4vqqqOBsgSXP-w@mail.gmail.com>
	<CAEcp1tBw5jg95Ax1H13D_HOe97m4QVd6vaoaFJsr6usB0n6WUA@mail.gmail.com>
Message-ID: <CAEVk4t2bEtWSDahhbxNxByic_BoXDaoyRKzXnLL7KTGYtDwRNw@mail.gmail.com>

That works, thank you !

-- oyvind

On Mon, Apr 2, 2012 at 3:57 PM, Sa?d HESSANE <saad.hessane@gmail.com> wrote:

> ---------- Forwarded message ----------
> From: Sa?d HESSANE <saad.hessane@gmail.com>
> Date: Mon, 2 Apr 2012 15:56:27 +0200
> Subject: Re: [gdal-dev] Most optimal way of using tiles ?
> To: Oyvind Idland <oyvind.idland@gmail.com>
>
> Hy,
>
> you can use "gdaladdo --config COMPRESS_OVERVIEW [DEFLATE | JPEG]" to
> create compressed overview.
> And then you can use gdalbuildvrt or gdaltindex to build an index of the
> files.
>
> 2012/4/2, Oyvind Idland <oyvind.idland@gmail.com>:
> > Hello,
> >
> > I got a huge dataset consisting of about 100 uncompressed TIFF's, each
> with
> > size 12599 X 9449 pixels with RGB bands.
> > Note, that the TIFF's are not georef'ed, instead there are .tfw's
> following
> > each file. Also, since they are about 350 MB each,
> > I guess converting them to a compressed format could speed things up
> (I/O).
> >
> > The "normal" approach would probably be to make a VRT dataset, and build
> > overviews. However, building a an
> > overview based on the entire VRT index seems a bit heavy in this case.
> >
> > Is it possible in some way to create compressed overviews (using
> gdaladdo)
> > for each file, and
> > then build a VRT based on these ? Will the VRT dataset utilize the
> > generated overviews ?
> >
> >
> > - oyvind
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120403/f97e94c5/attachment-0001.html
From oyvind.idland at gmail.com  Tue Apr  3 07:56:01 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Tue Apr  3 07:56:17 2012
Subject: [gdal-dev] Masking issue
Message-ID: <CAEVk4t0_6Wjzb0TnNPpDHvVdNO3ESdNQHZWHzmGWSRsTnSKihw@mail.gmail.com>

Hello,


I got one problem: I have a bunch of uncompressed TIFF tiles, which I am
converting to compressed GeoTiff. I would
like to mask away the rgb(0,0,0) values.

However, when I use NODATA on my VRT dataset, there are JPEG artifacts
around the edges when rendering.

Is it possible to generate a transparency mask based on NDATA before
compressing, or is there any other/better way of
doing this ?

thanks,

- oyvind
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120403/488fba6d/attachment.html
From chaitanya.ch at gmail.com  Tue Apr  3 13:35:17 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr  3 13:35:50 2012
Subject: [gdal-dev] Masking issue
In-Reply-To: <CAEVk4t0_6Wjzb0TnNPpDHvVdNO3ESdNQHZWHzmGWSRsTnSKihw@mail.gmail.com>
References: <CAEVk4t0_6Wjzb0TnNPpDHvVdNO3ESdNQHZWHzmGWSRsTnSKihw@mail.gmail.com>
Message-ID: <CAMKgpOZO8Q32oHR-eNVeV7qA=mntOuUatuJz8FBYooY+w8qq2Q@mail.gmail.com>

Oyvind,

One easy method is to create a vrt file with an alpha band for the original
tiff. You can use this to create a compressed raster file that will be
transparent at nodata pixels.

gdalbuildvrt -addalpha

http://www.gdal.org/gdalbuildvrt.html

On Tue, Apr 3, 2012 at 5:26 PM, Oyvind Idland <oyvind.idland@gmail.com>wrote:

> Hello,
>
>
> I got one problem: I have a bunch of uncompressed TIFF tiles, which I am
> converting to compressed GeoTiff. I would
> like to mask away the rgb(0,0,0) values.
>
> However, when I use NODATA on my VRT dataset, there are JPEG artifacts
> around the edges when rendering.
>
> Is it possible to generate a transparency mask based on NDATA before
> compressing, or is there any other/better way of
> doing this ?
>
> thanks,
>
> - oyvind
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120403/9e33b519/attachment.html
From giuseppe.amatulli at gmail.com  Tue Apr  3 13:39:23 2012
From: giuseppe.amatulli at gmail.com (Giuseppe Amatulli)
Date: Tue Apr  3 13:40:08 2012
Subject: [gdal-dev] gdal error in multi-core process
In-Reply-To: <CAKoiDH+iVJQ9PGP=BByBySym3b0F1OdZdphvAXLzX3FHrYxSkA@mail.gmail.com>
References: <CAKoiDH+iVJQ9PGP=BByBySym3b0F1OdZdphvAXLzX3FHrYxSkA@mail.gmail.com>
Message-ID: <CAKoiDHJzEk_UJSzxW8XYW=fesiNqV=iGc65d3D-yvemKmQcA4w@mail.gmail.com>

> HI
> i'm trying to use gdal* ? in multi-core pc, running the same script
> for 2 in pendent folders containing several geotif ?files.
> The script return no error if it run in one terminal ( for file in
> 2002/*.tif ?2007/*.tif ?; do ?bash myscript.sh ?$file ; done ?)
> Instead ?It gives the down reported error if run in two independent terminals
> 1 terminal
> ( for file in 2002/*.tif ?; do ?bash myscript.sh ?$file ; done ?)
> 2 terminal
> ( for file in 2007/*.tif ?; do ?bash myscript.sh ?$file ; done ?)
>
> Seems to me that gdal fails when it used in the same moment from 2
> independent terminal (cores)
> Should i compile gdal in a different way or should i make some tricks
> in the script to avoid the error.
>
> I have
> GDAL 1.9.0
> at
> Red Hat Enterprise Linux Server release 5.7
>
> Thanks in advance
> Giuseppe Amatulli
>
>
> Error which happen in a random way.
>
> NDVI_TOA
> Input file size is 5000, 5000
> 0...10...20...30...40...50...60...70...80...ERROR 1:
> TIFFFillStrip:Read error at scanline 4479; got 2040 bytes, expected
> 10000
> ERROR 1: TIFFReadEncodedStrip() failed.
>
> ERROR 1: temp.tif, band 1: IReadBlock failed at X offset 0, Y offset 4480
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 4480
> Input file size is 5000, 5000
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> Band61_TOA_BT
>
>
> --
> Giuseppe Amatulli
> Web: www.spatial-ecology.net



-- 
Giuseppe Amatulli
Web: www.spatial-ecology.net
From ptittmann at gmail.com  Tue Apr  3 13:49:26 2012
From: ptittmann at gmail.com (Peter Tittmann)
Date: Tue Apr  3 13:49:59 2012
Subject: [gdal-dev] Warning 1: Multi-column primary key in
 &apos;raster_columns&apos; detected but not supported.
Message-ID: <555AB92E17894CF9A7781641CAE4C285@gmail.com>

Hi,

Using PostGIS 2 and gdal 1.7.3

Trying to run a simple ogr2ogr:

ogr2ogr -skipfailures -f "PostgreSQL" PG:"dbname=afri" us9805_dni.shp

returns:

Warning 1: Multi-column primary key in 'raster_columns' detected but not supported.
ERROR 1: AddGeometryColumn failed for layer us9805_dni, layer creation has failed.

Any suggestions would be welcome.

Thanks! 

-- 
Peter Tittmann

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120403/702c9dec/attachment.html
From warmerdam at pobox.com  Tue Apr  3 14:21:52 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr  3 14:22:36 2012
Subject: [gdal-dev] gdal error in multi-core process
In-Reply-To: <CAKoiDHJzEk_UJSzxW8XYW=fesiNqV=iGc65d3D-yvemKmQcA4w@mail.gmail.com>
References: <CAKoiDH+iVJQ9PGP=BByBySym3b0F1OdZdphvAXLzX3FHrYxSkA@mail.gmail.com>
	<CAKoiDHJzEk_UJSzxW8XYW=fesiNqV=iGc65d3D-yvemKmQcA4w@mail.gmail.com>
Message-ID: <CA+YzLBcv-WW977xyDHzh3o6Zf5h_Lm4jfDDx-aEh0fxreKW_ig@mail.gmail.com>

On Tue, Apr 3, 2012 at 10:39 AM, Giuseppe Amatulli
<giuseppe.amatulli@gmail.com> wrote:
>> Error which happen in a random way.
>>
>> NDVI_TOA
>> Input file size is 5000, 5000
>> 0...10...20...30...40...50...60...70...80...ERROR 1:
>> TIFFFillStrip:Read error at scanline 4479; got 2040 bytes, expected
>> 10000
>> ERROR 1: TIFFReadEncodedStrip() failed.
>>
>> ERROR 1: temp.tif, band 1: IReadBlock failed at X offset 0, Y offset 4480
>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 4480
>> Input file size is 5000, 5000
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>>
>> Band61_TOA_BT

Giuseppe,

You haven't offered too much detail of what myscript.sh does, but
I'm guessing you use a fixed name for temporary files (ie. temp.tif)
and you have two different scripts interfering with each other.  Try
embedding the script process id into the temporary file name or
some similar approach to avoid conflicts.

I don't think this is a GDAL problem.

But, you might want to be aware that GDAL is not going to
react well if you have multiple processes updating one output
file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From oyvind.idland at gmail.com  Tue Apr  3 15:01:52 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Tue Apr  3 15:02:17 2012
Subject: [gdal-dev] Masking issue
In-Reply-To: <CAMKgpOZO8Q32oHR-eNVeV7qA=mntOuUatuJz8FBYooY+w8qq2Q@mail.gmail.com>
References: <CAEVk4t0_6Wjzb0TnNPpDHvVdNO3ESdNQHZWHzmGWSRsTnSKihw@mail.gmail.com>
	<CAMKgpOZO8Q32oHR-eNVeV7qA=mntOuUatuJz8FBYooY+w8qq2Q@mail.gmail.com>
Message-ID: <CAEVk4t0OtFZNiWrvnXSCU7JYR0QuzSPT0kDOt4=YqAFwFr93hg@mail.gmail.com>

Hi Chaitanya,

thanks, i'll try that when I get back to it tomorrow.

But: I guess I will have to add -vrtnodata aswell, hopefully it will add
pixels to the mask ?

I have already converted all the source TIFFs to lossless compressed
GeoTiff (which don't
produce undesired JPEG artifacts), and made a VRT that tiles them together
using -vrtnodata
(suggestion from Michael Smith).

This works well, but having compression with JPEG + mask would be nice.
Some of the files
are still quite large (including gdaladdo overviews)

-- Oyvind



On Tue, Apr 3, 2012 at 7:35 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Oyvind,
>
> One easy method is to create a vrt file with an alpha band for the
> original tiff. You can use this to create a compressed raster file that
> will be
> transparent at nodata pixels.
>
> gdalbuildvrt -addalpha
>
> http://www.gdal.org/gdalbuildvrt.html
>
> On Tue, Apr 3, 2012 at 5:26 PM, Oyvind Idland <oyvind.idland@gmail.com>wrote:
>
>> Hello,
>>
>>
>> I got one problem: I have a bunch of uncompressed TIFF tiles, which I am
>> converting to compressed GeoTiff. I would
>> like to mask away the rgb(0,0,0) values.
>>
>> However, when I use NODATA on my VRT dataset, there are JPEG artifacts
>> around the edges when rendering.
>>
>> Is it possible to generate a transparency mask based on NDATA before
>> compressing, or is there any other/better way of
>> doing this ?
>>
>> thanks,
>>
>> - oyvind
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120403/541f417a/attachment.html
From giuseppe.amatulli at gmail.com  Tue Apr  3 16:16:54 2012
From: giuseppe.amatulli at gmail.com (Giuseppe Amatulli)
Date: Tue Apr  3 16:17:01 2012
Subject: [gdal-dev] gdal error in multi-core process
In-Reply-To: <CA+YzLBcv-WW977xyDHzh3o6Zf5h_Lm4jfDDx-aEh0fxreKW_ig@mail.gmail.com>
References: <CAKoiDH+iVJQ9PGP=BByBySym3b0F1OdZdphvAXLzX3FHrYxSkA@mail.gmail.com>
	<CAKoiDHJzEk_UJSzxW8XYW=fesiNqV=iGc65d3D-yvemKmQcA4w@mail.gmail.com>
	<CA+YzLBcv-WW977xyDHzh3o6Zf5h_Lm4jfDDx-aEh0fxreKW_ig@mail.gmail.com>
Message-ID: <CAKoiDHLYkZ7i2j0N12=PxSrjJbyc0=jNzCCDGp5j9_HA6fGdPg@mail.gmail.com>

Hi thanks
for the fast replay.
yes my mistake, there was the same  temp.tif file in read/write from
the different processors.
Thanks
Ciao Ciao

>
> Giuseppe,
>
> You haven't offered too much detail of what myscript.sh does, but
> I'm guessing you use a fixed name for temporary files (ie. temp.tif)
> and you have two different scripts interfering with each other. ?Try
> embedding the script process id into the temporary file name or
> some similar approach to avoid conflicts.
>
> I don't think this is a GDAL problem.
>
> But, you might want to be aware that GDAL is not going to
> react well if you have multiple processes updating one output
> file.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer



-- 
Giuseppe Amatulli
Web: www.spatial-ecology.net
From gavin at afrispatial.co.za  Tue Apr  3 17:07:51 2012
From: gavin at afrispatial.co.za (Gavin Fleming)
Date: Tue Apr  3 17:07:50 2012
Subject: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue
Message-ID: <4F7B66A7.1010907@afrispatial.co.za>

Hi

I've just upgraded to gdal 1.9 on Ubuntu 11.10. When I tried to compile 
MrSID support (which was working fine in 1.8) I get this:

checking for XTIFFClientOpen in -lgeotiff... no
configure: error: libgeotiff is required to build GDAL MrSID driver

with both these MrSID versions:

gdal-mrsid-build 
/usr/local/MrSID_DSDK-8.5.0.3422-linux.x86-64.gcc44/Raster_DSDK/
(for this I also had to disable jp2mrsid in the gdal-mrsid-build script)

and

gdal-mrsid-build /usr/local/Geo_DSDK-7.0.0.2167/

I have libgeotiff 1.3 and 1.2.5 installed.

Anyone had the same experience?

-- 
regards

Gavin

Gavin Fleming
http://afrispatial.co.za
t: 0218620670
c: 0845965680
f: 0866164820

From warmerdam at pobox.com  Tue Apr  3 17:22:33 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr  3 17:22:50 2012
Subject: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue
In-Reply-To: <4F7B66A7.1010907@afrispatial.co.za>
References: <4F7B66A7.1010907@afrispatial.co.za>
Message-ID: <CA+YzLBeLb7i9Bo6z7uEwyV=AW8PxD8Xev7Fq5oJi8y0maYanmg@mail.gmail.com>

On Tue, Apr 3, 2012 at 2:07 PM, Gavin Fleming <gavin@afrispatial.co.za> wrote:
> Hi
>
> I've just upgraded to gdal 1.9 on Ubuntu 11.10. When I tried to compile
> MrSID support (which was working fine in 1.8) I get this:
>
> checking for XTIFFClientOpen in -lgeotiff... no
> configure: error: libgeotiff is required to build GDAL MrSID driver

Gavin,

I'm using MrSID 8.0 successfully on Ubuntu 10.04 successfully.

Could you search for "XTIFFClientOpen" in config.log after the
configure failure?  Often there details in there on why the probe
failed.

I haven't run into the problem you report but I have run into
problems before where the system libgeotiff is incompatible
with the one built into the MrSID SDK.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Tue Apr  3 17:31:05 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr  3 17:31:40 2012
Subject: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue
In-Reply-To: <4F7B66A7.1010907@afrispatial.co.za>
References: <4F7B66A7.1010907@afrispatial.co.za>
Message-ID: <201204032331.05641.even.rouault@mines-paris.org>

Le mardi 03 avril 2012 23:07:51, Gavin Fleming a ?crit :
> Hi
> 
> I've just upgraded to gdal 1.9 on Ubuntu 11.10. When I tried to compile
> MrSID support (which was working fine in 1.8) I get this:
> 
> checking for XTIFFClientOpen in -lgeotiff... no
> configure: error: libgeotiff is required to build GDAL MrSID driver
> 
> with both these MrSID versions:
> 
> gdal-mrsid-build
> /usr/local/MrSID_DSDK-8.5.0.3422-linux.x86-64.gcc44/Raster_DSDK/
> (for this I also had to disable jp2mrsid in the gdal-mrsid-build script)
> 
> and
> 
> gdal-mrsid-build /usr/local/Geo_DSDK-7.0.0.2167/
> 
> I have libgeotiff 1.3 and 1.2.5 installed.
> 
> Anyone had the same experience?

Hum, this should be something to report to the ubuntugis team. This build 
script isn't maintained by the GDAL project itself.

Looking at the symbols needed by libltidsdk.so from the 8.0.0 SDK, there's no 
reason from requiring libgeotiff to build the MrSID SDK.

I'm wondering if this error doesn't come from the fact that GDAL 1.9.0 in 
ubuntugis is now built with versionned symbols now.
From etourigny.dev at gmail.com  Tue Apr  3 18:15:20 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Apr  3 18:16:00 2012
Subject: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue
In-Reply-To: <201204032331.05641.even.rouault@mines-paris.org>
References: <4F7B66A7.1010907@afrispatial.co.za>
	<201204032331.05641.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvNNe1s2aA4X6R+_vU7yc8h91cQ+4Z1Nvezxf5qcjJ_iHg@mail.gmail.com>

I am able to compile MrSID SDK with gdal-1.9 (custom install, not
ubuntugis) in Ubuntu 11.10, so probably something different in the
ubuntugis install of gdal, as suggested bu Even.

On Tue, Apr 3, 2012 at 6:31 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le mardi 03 avril 2012 23:07:51, Gavin Fleming a ?crit :
>> Hi
>>
>> I've just upgraded to gdal 1.9 on Ubuntu 11.10. When I tried to compile
>> MrSID support (which was working fine in 1.8) I get this:
>>
>> checking for XTIFFClientOpen in -lgeotiff... no
>> configure: error: libgeotiff is required to build GDAL MrSID driver
>>
>> with both these MrSID versions:
>>
>> gdal-mrsid-build
>> /usr/local/MrSID_DSDK-8.5.0.3422-linux.x86-64.gcc44/Raster_DSDK/
>> (for this I also had to disable jp2mrsid in the gdal-mrsid-build script)
>>
>> and
>>
>> gdal-mrsid-build /usr/local/Geo_DSDK-7.0.0.2167/
>>
>> I have libgeotiff 1.3 and 1.2.5 installed.
>>
>> Anyone had the same experience?
>
> Hum, this should be something to report to the ubuntugis team. This build
> script isn't maintained by the GDAL project itself.
>
> Looking at the symbols needed by libltidsdk.so from the 8.0.0 SDK, there's no
> reason from requiring libgeotiff to build the MrSID SDK.
>
> I'm wondering if this error doesn't come from the fact that GDAL 1.9.0 in
> ubuntugis is now built with versionned symbols now.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From chaitanya.ch at gmail.com  Tue Apr  3 22:53:31 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr  3 22:53:38 2012
Subject: [gdal-dev] Warning 1: Multi-column primary key in
	&apos;raster_columns&apos; detected but not supported.
In-Reply-To: <555AB92E17894CF9A7781641CAE4C285@gmail.com>
References: <555AB92E17894CF9A7781641CAE4C285@gmail.com>
Message-ID: <CAMKgpOaMBpCqE9pwifDFXct+h3id3x0t=b5n3_cVTEK=5zjsTA@mail.gmail.com>

Peter,

Perhaps you don't have permissions to write to the geometry_columns table.
Unfortunately the PG driver does not convey the error message from the
database.

On Tue, Apr 3, 2012 at 11:19 PM, Peter Tittmann <ptittmann@gmail.com> wrote:

>  Hi,
>
> Using PostGIS 2 and gdal 1.7.3
>
> Trying to run a simple ogr2ogr:
>
> ogr2ogr -skipfailures -f "PostgreSQL" PG:"dbname=afri" us9805_dni.shp
>
> returns:
>
> Warning 1: Multi-column primary key in 'raster_columns' detected but not
> supported.
> ERROR 1: AddGeometryColumn failed for layer us9805_dni, layer creation has
> failed.
>
> Any suggestions would be welcome.
>
> Thanks!
>
> --
> Peter Tittmann
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120404/1baca41f/attachment.html
From oyvind.idland at gmail.com  Wed Apr  4 08:57:44 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Wed Apr  4 08:58:25 2012
Subject: [gdal-dev] VRT and overviews
Message-ID: <CAEVk4t1k7_OL65LXaeyQFWuY3nxHAoZ8ZFKcJ+82Q4FWv6o+zw@mail.gmail.com>

How do I get overviews to work with VRT datasets ?

What I do is
 - creating a .vrt with additional alpha band + nodata using gdalbuildvrt
(wrapping an existing TIFF)
 - creating overviews using gdaladdo. I then get an external .ovr file.
 - creating a new TIFF from the VRT

First, it seems that the .vrt does not get updated, as there is no
<Overview> tags. I then tried to manually add <Overview> for each band,
but the output TIFF does not have overviews in it.. just the original
bitmap and a mask for it.

Example:

gdalbuildvrt _r-32-2-4776-64728.vrt -overwrite -addalpha -srcnodata 0
-vrtnodata 0 r-32-2-4776-64728.tif

gdaladdo _r-32-2-4776-64728.vrt 2 4 8 16 32 64

gdal_translate -of GTiff -co COMPRESS=JPEG -co JPEG_QUALITY=80 -co
PHOTOMETRIC=YCBCR -b 1 -b 2 -b 3 -mask 4 -co COPY_SRC_OVERVIEWS=YES
--config GDAL_TIFF_INTERNAL_MASK YES _r-32-2-4776-64728.vrt
output\r-32-2-4776-64728.tif


Also, I tried to add overviews embedded inside the source tiff (wrapped in
the same .vrt), but still no overviews in the output.

Note, that what I'm really trying to do, is to create TIFF with JPEG
compression, and adding a mask that is not "contaminated" with jpeg
artifacts.

What am I doing wrong ? :)


-- oyvind
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120404/c17014a8/attachment.html
From polimax at mail.ru  Wed Apr  4 09:24:43 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Wed Apr  4 09:25:20 2012
Subject: [gdal-dev] VRT and overviews
In-Reply-To: <CAEVk4t1k7_OL65LXaeyQFWuY3nxHAoZ8ZFKcJ+82Q4FWv6o+zw@mail.gmail.com>
References: <CAEVk4t1k7_OL65LXaeyQFWuY3nxHAoZ8ZFKcJ+82Q4FWv6o+zw@mail.gmail.com>
Message-ID: <4F7C4B9B.3070302@mail.ru>

04.04.2012 16:57, Oyvind Idland ???????:
> How do I get overviews to work with VRT datasets ?
>
> What I do is
>  - creating a .vrt with additional alpha band + nodata using 
> gdalbuildvrt (wrapping an existing TIFF)
>  - creating overviews using gdaladdo. I then get an external .ovr file.
>  - creating a new TIFF from the VRT
>
> First, it seems that the .vrt does not get updated, as there is no 
> <Overview> tags. I then tried to manually add <Overview> for each band,
> but the output TIFF does not have overviews in it.. just the original 
> bitmap and a mask for it.
>
> Example:
>
> gdalbuildvrt _r-32-2-4776-64728.vrt -overwrite -addalpha -srcnodata 0 
> -vrtnodata 0 r-32-2-4776-64728.tif
>
> gdaladdo _r-32-2-4776-64728.vrt 2 4 8 16 32 64
>
> gdal_translate -of GTiff -co COMPRESS=JPEG -co JPEG_QUALITY=80 -co 
> PHOTOMETRIC=YCBCR -b 1 -b 2 -b 3 -mask 4 -co COPY_SRC_OVERVIEWS=YES 
> --config GDAL_TIFF_INTERNAL_MASK YES _r-32-2-4776-64728.vrt 
> output\r-32-2-4776-64728.tif
>
>
> Also, I tried to add overviews embedded inside the source tiff 
> (wrapped in the same .vrt), but still no overviews in the output.
>
> Note, that what I'm really trying to do, is to create TIFF with JPEG 
> compression, and adding a mask that is not "contaminated" with jpeg 
> artifacts.
>
> What am I doing wrong ? :)
>
>
> -- oyvind
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
This is the bug and I'm working to fix it.
I think this bug are mentioned in such tickets 
http://trac.osgeo.org/gdal/ticket/2076 and 
http://trac.osgeo.org/gdal/ticket/3482

Regards,
     Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120404/db6c7ed8/attachment.html
From oyvind.idland at gmail.com  Wed Apr  4 11:05:21 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Wed Apr  4 11:05:33 2012
Subject: [gdal-dev] VRT and overviews
In-Reply-To: <4F7C4B9B.3070302@mail.ru>
References: <CAEVk4t1k7_OL65LXaeyQFWuY3nxHAoZ8ZFKcJ+82Q4FWv6o+zw@mail.gmail.com>
	<4F7C4B9B.3070302@mail.ru>
Message-ID: <CAEVk4t1x2suefVW+JdXg_tSnXf2QPNB2u6o20fjS+BJed-fxRQ@mail.gmail.com>

Ok, thanks, good to know.

-- oyvind

On Wed, Apr 4, 2012 at 3:24 PM, Dmitry Baryshnikov <polimax@mail.ru> wrote:

>  04.04.2012 16:57, Oyvind Idland ???????:
>
> How do I get overviews to work with VRT datasets ?
>
> What I do is
>  - creating a .vrt with additional alpha band + nodata using gdalbuildvrt
> (wrapping an existing TIFF)
>  - creating overviews using gdaladdo. I then get an external .ovr file.
>  - creating a new TIFF from the VRT
>
> First, it seems that the .vrt does not get updated, as there is no
> <Overview> tags. I then tried to manually add <Overview> for each band,
> but the output TIFF does not have overviews in it.. just the original
> bitmap and a mask for it.
>
> Example:
>
> gdalbuildvrt _r-32-2-4776-64728.vrt -overwrite -addalpha -srcnodata 0
> -vrtnodata 0 r-32-2-4776-64728.tif
>
> gdaladdo _r-32-2-4776-64728.vrt 2 4 8 16 32 64
>
> gdal_translate -of GTiff -co COMPRESS=JPEG -co JPEG_QUALITY=80 -co
> PHOTOMETRIC=YCBCR -b 1 -b 2 -b 3 -mask 4 -co COPY_SRC_OVERVIEWS=YES
> --config GDAL_TIFF_INTERNAL_MASK YES _r-32-2-4776-64728.vrt
> output\r-32-2-4776-64728.tif
>
>
> Also, I tried to add overviews embedded inside the source tiff (wrapped in
> the same .vrt), but still no overviews in the output.
>
> Note, that what I'm really trying to do, is to create TIFF with JPEG
> compression, and adding a mask that is not "contaminated" with jpeg
> artifacts.
>
> What am I doing wrong ? :)
>
>
> -- oyvind
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>  This is the bug and I'm working to fix it.
> I think this bug are mentioned in such tickets
> http://trac.osgeo.org/gdal/ticket/2076 and
> http://trac.osgeo.org/gdal/ticket/3482
>
> Regards,
>     Dmitry
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120404/3898fed5/attachment-0001.html
From jukka.rahkonen at mmmtike.fi  Wed Apr  4 12:37:05 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Apr  4 12:37:28 2012
Subject: [gdal-dev] Slow writing into Spatialite with -skipfailures
Message-ID: <loom.20120404T173702-751@post.gmane.org>

Hi,

I had to write a million polygon shapefile into Spatialite with -skipfailures
and I noticed that it was very many times slower that without -skipfailures. Is
there some logical reason for that or could it be due to a bug or something?
Only thing that comes into my mind is that if the -gt parameter is taken into
account or not.

-Jukka Rahkonen-

From even.rouault at mines-paris.org  Wed Apr  4 12:39:26 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  4 12:40:02 2012
Subject: [gdal-dev] Slow writing into Spatialite with -skipfailures
In-Reply-To: <loom.20120404T173702-751@post.gmane.org>
References: <loom.20120404T173702-751@post.gmane.org>
Message-ID: <1333557566.4f7c793ee7188@webmail.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:

> Hi,
>
> I had to write a million polygon shapefile into Spatialite with -skipfailures
> and I noticed that it was very many times slower that without -skipfailures.
> Is
> there some logical reason for that or could it be due to a bug or something?
> Only thing that comes into my mind is that if the -gt parameter is taken into
> account or not.

This is expected. When you use -skipfailures, the -gt parameter is ignored and
virtually set to 1 so that transactions only take into account one single
feature at a time.

>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From Jukka.Rahkonen at mmmtike.fi  Wed Apr  4 13:16:34 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Wed Apr  4 13:18:30 2012
Subject: [gdal-dev] Slow writing into Spatialite with -skipfailures
In-Reply-To: <1333557566.4f7c793ee7188@webmail.free.fr>
References: <loom.20120404T173702-751@post.gmane.org>,
	<1333557566.4f7c793ee7188@webmail.free.fr>
Message-ID: <84446DEF76453C439E9E97E438E13A63148E1E@suutari.haapa.mmm.fi>


Even Rouault wrote:

>Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:

>> Hi,
>>
>> I had to write a million polygon shapefile into Spatialite with -skipfailures
>> and I noticed that it was very many times slower that without -skipfailures.
>> Is
>> there some logical reason for that or could it be due to a bug or something?
>> Only thing that comes into my mind is that if the -gt parameter is taken into
>> account or not.

> This is expected. When you use -skipfailures, the -gt parameter is ignored and
> virtually set to 1 so that transactions only take into account one single
> feature at a time.

Well, doing 1.1 million transactions for Spatialite db is too slow. Any suggestions about how to clean the shapefile fast and effectively beforehand? The shapefile is created by ogr2ogr, from Oracle table into shapefile. I have used -nlt multipolygon in both runs (Oracle -> shapefile, shape ->Spatialite).

-Jukka Rahkonen-
From even.rouault at mines-paris.org  Wed Apr  4 13:28:23 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  4 13:28:40 2012
Subject: [gdal-dev] Slow writing into Spatialite with -skipfailures
In-Reply-To: <84446DEF76453C439E9E97E438E13A63148E1E@suutari.haapa.mmm.fi>
References: <loom.20120404T173702-751@post.gmane.org>
	<1333557566.4f7c793ee7188@webmail.free.fr>
	<84446DEF76453C439E9E97E438E13A63148E1E@suutari.haapa.mmm.fi>
Message-ID: <201204041928.23447.even.rouault@mines-paris.org>

Le mercredi 04 avril 2012 19:16:34, Rahkonen Jukka a ?crit :
> Even Rouault wrote:
> >Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:
> >> Hi,
> >> 
> >> I had to write a million polygon shapefile into Spatialite with
> >> -skipfailures and I noticed that it was very many times slower that
> >> without -skipfailures. Is
> >> there some logical reason for that or could it be due to a bug or
> >> something? Only thing that comes into my mind is that if the -gt
> >> parameter is taken into account or not.
> > 
> > This is expected. When you use -skipfailures, the -gt parameter is
> > ignored and virtually set to 1 so that transactions only take into
> > account one single feature at a time.
> 
> Well, doing 1.1 million transactions for Spatialite db is too slow. Any
> suggestions about how to clean the shapefile fast and effectively
> beforehand? The shapefile is created by ogr2ogr, from Oracle table into
> shapefile. I have used -nlt multipolygon in both runs (Oracle ->
> shapefile, shape ->Spatialite).

What is the error reported when inserting features into the Spatialite DB that 
makes the use of -skipfailures necessary ?

> 
> -Jukka Rahkonen-_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From chapmanm at pixia.com  Wed Apr  4 15:01:29 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Wed Apr  4 15:02:05 2012
Subject: [gdal-dev] Slow writing into Spatialite with -skipfailures
In-Reply-To: <loom.20120404T173702-751@post.gmane.org>
References: <loom.20120404T173702-751@post.gmane.org>
Message-ID: <d47d2556.0000113c.0000005b@CHAPMANM7S>

Try to execute this query before you start inserting:

"PRAGMA synchronous = 0;"

It turns synchronous writes off for sqlite and give a big performance
increase.  I don't know if that will work for spatialite but it might.
You need to read about the ramifications on the sqlite web site first
though so you understand the trade-offs.  Also, it may have no effect when
using it via gdal.  I can't answer that one.

Martin

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jukka Rahkonen
Sent: Wednesday, April 04, 2012 10:37 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Slow writing into Spatialite with -skipfailures

Hi,

I had to write a million polygon shapefile into Spatialite with
-skipfailures and I noticed that it was very many times slower that
without -skipfailures. Is there some logical reason for that or could it
be due to a bug or something?
Only thing that comes into my mind is that if the -gt parameter is taken
into account or not.

-Jukka Rahkonen-

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Apr  4 15:11:39 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr  4 15:11:43 2012
Subject: [gdal-dev] Slow writing into Spatialite with -skipfailures
In-Reply-To: <d47d2556.0000113c.0000005b@CHAPMANM7S>
References: <loom.20120404T173702-751@post.gmane.org>
	<d47d2556.0000113c.0000005b@CHAPMANM7S>
Message-ID: <201204042111.39993.even.rouault@mines-paris.org>

Le mercredi 04 avril 2012 21:01:29, Martin Chapman a ?crit :
> Try to execute this query before you start inserting:
> 
> "PRAGMA synchronous = 0;"
> 
> It turns synchronous writes off for sqlite and give a big performance
> increase.  I don't know if that will work for spatialite but it might.
> You need to read about the ramifications on the sqlite web site first
> though so you understand the trade-offs.  Also, it may have no effect when
> using it via gdal.  I can't answer that one.

Good suggestion. Actually this can be used with GDAL by setting the 
OGR_SQLITE_SYNCHRONOUS configuration option to OFF. See 
http://gdal.org/ogr/drv_sqlite.html

> 
> Martin
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jukka Rahkonen
> Sent: Wednesday, April 04, 2012 10:37 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] Slow writing into Spatialite with -skipfailures
> 
> Hi,
> 
> I had to write a million polygon shapefile into Spatialite with
> -skipfailures and I noticed that it was very many times slower that
> without -skipfailures. Is there some logical reason for that or could it
> be due to a bug or something?
> Only thing that comes into my mind is that if the -gt parameter is taken
> into account or not.
> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From chapmanm at pixia.com  Wed Apr  4 16:21:43 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Wed Apr  4 16:22:33 2012
Subject: [gdal-dev] Slow writing into Spatialite with -skipfailures
In-Reply-To: <201204042111.39993.even.rouault@mines-paris.org>
References: <loom.20120404T173702-751@post.gmane.org>
	<d47d2556.0000113c.0000005b@CHAPMANM7S>
	<201204042111.39993.even.rouault@mines-paris.org>
Message-ID: <54294e69.0000113c.0000005f@CHAPMANM7S>

Oh sweet.  I never knew that option existed in OGR!  Thanks for the info
Even.

Marty

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org]
Sent: Wednesday, April 04, 2012 1:12 PM
To: gdal-dev@lists.osgeo.org
Cc: Martin Chapman; 'Jukka Rahkonen'
Subject: Re: [gdal-dev] Slow writing into Spatialite with -skipfailures

Le mercredi 04 avril 2012 21:01:29, Martin Chapman a ?crit :
> Try to execute this query before you start inserting:
>
> "PRAGMA synchronous = 0;"
>
> It turns synchronous writes off for sqlite and give a big performance
> increase.  I don't know if that will work for spatialite but it might.
> You need to read about the ramifications on the sqlite web site first
> though so you understand the trade-offs.  Also, it may have no effect
> when using it via gdal.  I can't answer that one.

Good suggestion. Actually this can be used with GDAL by setting the
OGR_SQLITE_SYNCHRONOUS configuration option to OFF. See
http://gdal.org/ogr/drv_sqlite.html

>
> Martin
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jukka Rahkonen
> Sent: Wednesday, April 04, 2012 10:37 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] Slow writing into Spatialite with -skipfailures
>
> Hi,
>
> I had to write a million polygon shapefile into Spatialite with
> -skipfailures and I noticed that it was very many times slower that
> without -skipfailures. Is there some logical reason for that or could
> it be due to a bug or something?
> Only thing that comes into my mind is that if the -gt parameter is
> taken into account or not.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From nicholas.g.lawrence at tmr.qld.gov.au  Wed Apr  4 22:03:24 2012
From: nicholas.g.lawrence at tmr.qld.gov.au (nicholas.g.lawrence@tmr.qld.gov.au)
Date: Wed Apr  4 22:19:47 2012
Subject: [gdal-dev] adf to ascii X,Y,Z
Message-ID: <OFE938D595.916AD687-ON4A2579D7.000B20D1-4A2579D7.000B4B82@tmr.qld.gov.au>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120405/b2f4af31/attachment.html
From Luke.Pinner at environment.gov.au  Wed Apr  4 22:28:54 2012
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Wed Apr  4 22:44:46 2012
Subject: [gdal-dev] adf to ascii X,Y,Z [SEC=UNCLASSIFIED]
In-Reply-To: <OFE938D595.916AD687-ON4A2579D7.000B20D1-4A2579D7.000B4B82@tmr.qld.gov.au>
References: <OFE938D595.916AD687-ON4A2579D7.000B20D1-4A2579D7.000B4B82@tmr.qld.gov.au>
Message-ID: <08A7084C05C8C94A9EA11656A36D3EE10B920442@PVAC01EXMX01.internal.govt>

Something like:
gdal_translate ?of xyz ingrid outfile.txt

I don?t think MapInfo grids (*.mig) are supported, I couldn?t see that format listed in http://www.gdal.org/formats_list.html

Luke

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of nicholas.g.lawrence@tmr.qld.gov.au
Sent: Thursday, 5 April 2012 12:03 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] adf to ascii X,Y,Z


Hello,

I have the latest gdal for windows.

What would be the DOS command for conferting a .adf file into an ascii x,y,z file?

or alternatively, a Mapinfo Grid file?



If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments.

Please consider the environment before printing this email.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120405/82b34bce/attachment-0001.html
From jukka.rahkonen at mmmtike.fi  Thu Apr  5 02:17:24 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Apr  5 02:18:23 2012
Subject: [gdal-dev] Re: Slow writing into Spatialite with -skipfailures
References: <loom.20120404T173702-751@post.gmane.org>
	<1333557566.4f7c793ee7188@webmail.free.fr>
	<84446DEF76453C439E9E97E438E13A63148E1E@suutari.haapa.mmm.fi>
	<201204041928.23447.even.rouault@mines-paris.org>
Message-ID: <loom.20120405T081213-888@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Le mercredi 04 avril 2012 19:16:34, Rahkonen Jukka a ?crit :
> > Even Rouault wrote:
> > >Selon Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi>:
> > >> Hi,
> > >> 
> > >> I had to write a million polygon shapefile into Spatialite with
> > >> -skipfailures and I noticed that it was very many times slower that
> > >> without -skipfailures. Is
> > >> there some logical reason for that or could it be due to a bug or
> > >> something? Only thing that comes into my mind is that if the -gt
> > >> parameter is taken into account or not.
> > > 
> > > This is expected. When you use -skipfailures, the -gt parameter is
> > > ignored and virtually set to 1 so that transactions only take into
> > > account one single feature at a time.
> > 
> > Well, doing 1.1 million transactions for Spatialite db is too slow. Any
> > suggestions about how to clean the shapefile fast and effectively
> > beforehand? The shapefile is created by ogr2ogr, from Oracle table into
> > shapefile. I have used -nlt multipolygon in both runs (Oracle ->
> > shapefile, shape ->Spatialite).
> 
> What is the error reported when inserting features into the Spatialite DB that 
> makes the use of -skipfailures necessary ?


The error is this one:
ERROR 1: sqlite3_step() failed:
  parcel.GEOMETRY violates Geometry constraint [geom-type or SRID not allowed] (
19)


Ogr2ogr managed to insert only 273886 polygons in 13 hours into spatialite db so
I canceled the job instead of letting it run the remaining 40 hours.  I will try
the effect of OGR_SQLITE_SYNCHRONOUS=OFF.

-Jukka Rahkonen-



From gavin at afrispatial.co.za  Thu Apr  5 04:31:22 2012
From: gavin at afrispatial.co.za (Gavin Fleming)
Date: Thu Apr  5 04:31:52 2012
Subject: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue
In-Reply-To: <201204032331.05641.even.rouault@mines-paris.org>
References: <4F7B66A7.1010907@afrispatial.co.za>
	<201204032331.05641.even.rouault@mines-paris.org>
Message-ID: <4F7D585A.8080101@afrispatial.co.za>

On 03/04/2012 23:31, Even Rouault wrote:
> Le mardi 03 avril 2012 23:07:51, Gavin Fleming a ?crit :
>> Hi
>>
>> I've just upgraded to gdal 1.9 on Ubuntu 11.10. When I tried to compile
>> MrSID support (which was working fine in 1.8) I get this:
>>
>> checking for XTIFFClientOpen in -lgeotiff... no
>> configure: error: libgeotiff is required to build GDAL MrSID driver
>>
>> with both these MrSID versions:
>>
>> gdal-mrsid-build
>> /usr/local/MrSID_DSDK-8.5.0.3422-linux.x86-64.gcc44/Raster_DSDK/
>> (for this I also had to disable jp2mrsid in the gdal-mrsid-build script)
>>
>> and
>>
>> gdal-mrsid-build /usr/local/Geo_DSDK-7.0.0.2167/
>>
>> I have libgeotiff 1.3 and 1.2.5 installed.
>>
>> Anyone had the same experience?
> Hum, this should be something to report to the ubuntugis team. This build
> script isn't maintained by the GDAL project itself.
>
> Looking at the symbols needed by libltidsdk.so from the 8.0.0 SDK, there's no
> reason from requiring libgeotiff to build the MrSID SDK.
>
> I'm wondering if this error doesn't come from the fact that GDAL 1.9.0 in
> ubuntugis is now built with versionned symbols now.
Thanks Even, Frank

1) I've created a ticket on UbuntuGIS for this issue 
(http://trac.osgeo.org/ubuntugis/ticket/21).

I got around it by checking out trunk and doing

./configure --with-threads --with-geotiff=internal 
--with-mrsid=/usr/local/Geo_DSDK-7.0.0.2167 --with-python

then ldconfig after installing.

$ gdalinfo --formats | grep MrSID
   MrSID (rov): Multi-resolution Seamless Image Database (MrSID)
   JP2MrSID (rov): MrSID JPEG2000


2) This however did not work on another Ubuntu 11.10 box (where I really 
need it to work):

2a)

./configure --with-geotiff=internal 
--with-mrsid=/usr/local/Geo_DSDK-7.0.0.2167 --with-threads --with-python

/bin/bash /home/gavin/src/gdal/libtool --mode=link    --tag=LD    g++  
gdalinfo.lo  /home/gavin/src/gdal/libgdal.la -o gdalinfo
libtool: link: ignoring unknown tag LD
libtool: link: g++ .libs/gdalinfo.o -o .libs/gdalinfo  
/home/gavin/src/gdal/.libs/libgdal.so -L/usr/lib 
-L/usr/lib/x86_64-linux-gnu 
-L/usr/local/Geo_DSDK-7.0.0.2167/3rd-party/lib/Release 
-L/usr/local/Geo_DSDK-7.0.0.2167/lib/Release -lgeos_c 
/usr/lib/x86_64-linux-gnu/libsqlite3.so /usr/lib/libodbc.so 
/usr/lib/libodbcinst.so /usr/lib/x86_64-linux-gnu/libexpat.so -lxerces-c 
-lNCSEcw -lNCSEcwC -lNCSCnet -lNCSUtil 
/usr/lib/x86_64-linux-gnu/libjasper.so -lnetcdf /usr/lib/libhdf5.so 
/usr/lib/libmfhdfalt.so /usr/lib/libdfalt.so /usr/lib/libgif.so 
/usr/lib/x86_64-linux-gnu/libjpeg.so -lpng -lpq -lz -lm -lrt -ldl 
/usr/lib/x86_64-linux-gnu/libcurl-gnutls.so -lltidsdk -lpthread 
-llt_kakadu -pthread
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to 
`LizardTech::MrSIDImageReaderInterface::getMrSIDGeneration(unsigned char 
const*, unsigned char&, bool&)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to 
`LizardTech::LTISceneBuffer::LTISceneBuffer(LizardTech::LTIPixel const&, 
unsigned int, unsigned int, void**, unsigned int)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to 
`LizardTech::LTISceneBuffer::LTISceneBuffer(LizardTech::LTIPixel const&, 
unsigned int, unsigned int, void**, unsigned int)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to 
`LizardTech::J2KImageReader::initialize(LizardTech::LTIOStreamInf&, 
bool, float, bool)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to 
`LizardTech::LTISceneBuffer::getBandData(unsigned short) const'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/home/gavin/src/gdal/apps'
make: *** [apps-target] Error 2

2b)

./configure 
--with-mrsid=/usr/local/MrSID_DSDK-8.5.0.3422-linux.x86-64.gcc44/Raster_DSDK 
--with-geotiff=internal --with-threads --with-python
make
make install
ldconfig
gdalinfo
gdalinfo: error while loading shared libraries: libltidsdk.so: cannot 
open shared object file: No such file or directory


From jukka.rahkonen at mmmtike.fi  Thu Apr  5 08:30:09 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Apr  5 08:30:44 2012
Subject: [gdal-dev] Re: Slow writing into Spatialite with -skipfailures
References: <loom.20120404T173702-751@post.gmane.org>
	<1333557566.4f7c793ee7188@webmail.free.fr>
	<84446DEF76453C439E9E97E438E13A63148E1E@suutari.haapa.mmm.fi>
	<201204041928.23447.even.rouault@mines-paris.org>
	<loom.20120405T081213-888@post.gmane.org>
Message-ID: <loom.20120405T142247-601@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:


> The error is this one:
> ERROR 1: sqlite3_step() failed:
>   parcel.GEOMETRY violates Geometry constraint [geom-type or SRID 
not allowed] (
> 19)
> 
> Ogr2ogr managed to insert only 273886 polygons in 13 hours into spatialite
 db so
> I canceled the job instead of letting it run the remaining 40 hours.  
I will try
> the effect of OGR_SQLITE_SYNCHRONOUS=OFF.
> 
> -Jukka Rahkonen-

It took about two hours to insert 1.2 million polygons with -skipfailures and
OGR_SQLITE_SYNCHRONOUS=OFF. Increase from 21000 per hour into one million per
hour so it was fifty times faster with SYNCHRONOUS=OFF.

-Jukka Rahkonen-




From even.rouault at mines-paris.org  Thu Apr  5 14:54:06 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr  5 14:54:32 2012
Subject: [gdal-dev] Re: Slow writing into Spatialite with -skipfailures
In-Reply-To: <loom.20120405T081213-888@post.gmane.org>
References: <loom.20120404T173702-751@post.gmane.org>
	<201204041928.23447.even.rouault@mines-paris.org>
	<loom.20120405T081213-888@post.gmane.org>
Message-ID: <201204052054.06938.even.rouault@mines-paris.org>


> > What is the error reported when inserting features into the Spatialite DB
> > that makes the use of -skipfailures necessary ?
> 
> The error is this one:
> ERROR 1: sqlite3_step() failed:
>   parcel.GEOMETRY violates Geometry constraint [geom-type or SRID not
> allowed] ( 19)

Hum, would be interesting to have a sample to examine one of the geometry that 
triggers the error. The SRID hypothesis seems unlikely, and as far as the 
geometry type is concerned, it is weird because you have specified -nlt 
MULTIPOLYGON ...

I imagine once the reason for the error(s) is more clearly identified, the 
possibility for a prefiltering in ogr2ogr could be studied to avoid trying to 
insert such features, and thus benefiting for transactions.

> 
> 
> Ogr2ogr managed to insert only 273886 polygons in 13 hours into spatialite
> db so I canceled the job instead of letting it run the remaining 40 hours.
>  I will try the effect of OGR_SQLITE_SYNCHRONOUS=OFF.

Another possibility (combined with the synchronous=off) would be to try 
specifying -skip_failures -gt 0 *in that order * (because -skipfailures 
implicitely sets gt to 1, so -gt 0 placed afterwards on the command line will 
change that to 0) and see if it makes any difference. I'm not sure of the real 
benefit of transactions when inserting independant features with the sqlite DB 
backend.

> 
> -Jukka Rahkonen-
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From refriguy68 at yahoo.com  Thu Apr  5 23:43:34 2012
From: refriguy68 at yahoo.com (Robert Zermeno)
Date: Thu Apr  5 23:46:52 2012
Subject: [gdal-dev] JPEG2000 decoding using OpenJpeg linking errors
Message-ID: <1333683814.8086.YahooMailClassic@web161002.mail.bf1.yahoo.com>

Ladies and Gents,

I have downloaded the v2 branch of openjpeg from the svn yesterday while using CMAKE to construct VS2005 static library projects.? All went well to build the static library.? I linked the static library via modifying nmake.opt to point to the path location of the library (.lib) file and the include file (openjpeg.h).

I issue the command via VS2005 command prompt:

nmake /f makefile.vc debug=1

GDAL can compile successfully, but when it tries to create gdal_i.lib, I get LNK2019 errors for all references to openjpeg library (file openjpegdataset.obj).? The first two LNK2019 are in? IReadBlock? of 
opj_end_decompress@8
opj_decode_tile_header@40

What steps do I have to take to make it work?? Have I forgotten a step?? This is what I have in nmake.opt:

OPENJPEG_ENABLED?=?YES
OPENJPEG_CFLAGS?=?-IC:\openjpeg\libopenjpeg
OPENJPEG_LIB?=?C:\openjpeg\bin\Release\openjpeg.lib
CFLAGS should point to openjpeg.h and LIB should point to the openjpeg.lib file.? It should work but I am puzzled?? Any advice?? Do I need to provide more information?? Has anyone experienced this problem?

FYI, I have performed a dumpbin.exe /SYMBOLS to verify the contents of the .lib file does have the requested functions to be used statically.
Robert

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120405/b0611605/attachment.html
From chapmanm at pixia.com  Fri Apr  6 14:01:05 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Fri Apr  6 14:01:15 2012
Subject: [gdal-dev] JPEG2000 decoding using OpenJpeg linking errors
In-Reply-To: <1333683814.8086.YahooMailClassic@web161002.mail.bf1.yahoo.com>
References: <1333683814.8086.YahooMailClassic@web161002.mail.bf1.yahoo.com>
Message-ID: <3fb57c03.00000300.00000022@CHAPMANM7S>

Robert,

 

If it makes you feel any better I tried to do the same thing recently only
using VS2010 (GDAL 1.9) and had the same issue.  I think the main issue is
that the v2 branch is still in development and has morphed from the time
when the gdal driver was implemented.  That was my best guess at the time
and I gave up on it eventually and resorted to using the LizardTech DSDK
for jp2 instead.  You can only do that for dev purposes though without a
DSDK license.  I wish the OpenJpeg driver worked though because it appears
to be the only real viable option for JP2 because of its license.

 

If you happen to solve the problem please post the solution for the rest
of us.

 

Best regards,

Martin

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Robert Zermeno
Sent: Thursday, April 05, 2012 9:44 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] JPEG2000 decoding using OpenJpeg linking errors

 


Ladies and Gents,

I have downloaded the v2 branch of openjpeg from the svn yesterday while
using CMAKE to construct VS2005 static library projects.  All went well to
build the static library.  I linked the static library via modifying
nmake.opt to point to the path location of the library (.lib) file and the
include file (openjpeg.h).

I issue the command via VS2005 command prompt:

nmake /f makefile.vc debug=1

GDAL can compile successfully, but when it tries to create gdal_i.lib, I
get LNK2019 errors for all references to openjpeg library (file
openjpegdataset.obj).  The first two LNK2019 are in  IReadBlock  of 
opj_end_decompress@8
opj_decode_tile_header@40

What steps do I have to take to make it work?  Have I forgotten a step?
This is what I have in nmake.opt:

OPENJPEG_ENABLED = YES
OPENJPEG_CFLAGS = -IC:\openjpeg\libopenjpeg
OPENJPEG_LIB = C:\openjpeg\bin\Release\openjpeg.lib

 

CFLAGS should point to openjpeg.h and LIB should point to the openjpeg.lib
file.  It should work but I am puzzled?  Any advice?  Do I need to provide
more information?  Has anyone experienced this problem?

 

FYI, I have performed a dumpbin.exe /SYMBOLS to verify the contents of the
.lib file does have the requested functions to be used statically.

 

Robert

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120406/a947e9b1/attachment.html
From even.rouault at mines-paris.org  Fri Apr  6 14:59:24 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr  6 15:00:05 2012
Subject: [gdal-dev] JPEG2000 decoding using OpenJpeg linking errors
In-Reply-To: <3fb57c03.00000300.00000022@CHAPMANM7S>
References: <1333683814.8086.YahooMailClassic@web161002.mail.bf1.yahoo.com>
	<3fb57c03.00000300.00000022@CHAPMANM7S>
Message-ID: <201204062059.24627.even.rouault@mines-paris.org>

Le vendredi 06 avril 2012 20:01:05, Martin Chapman a ?crit :
> Robert,
> 
> 
> 
> If it makes you feel any better I tried to do the same thing recently only
> using VS2010 (GDAL 1.9) and had the same issue.  I think the main issue is
> that the v2 branch is still in development and has morphed from the time
> when the gdal driver was implemented.  That was my best guess at the time
> and I gave up on it eventually and resorted to using the LizardTech DSDK
> for jp2 instead.  You can only do that for dev purposes though without a
> DSDK license.  I wish the OpenJpeg driver worked though because it appears
> to be the only real viable option for JP2 because of its license.
> 
> 
> 
> If you happen to solve the problem please post the solution for the rest
> of us.

I don't know what Tamas did specifically, but he managed to make it link 
properly on his Windows slave bots. You can fetch one of the SDKs at 
http://vbkto.dyndns.org/sdk/ 

> 
> 
> 
> Best regards,
> 
> Martin
> 
> 
> 
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Robert Zermeno
> Sent: Thursday, April 05, 2012 9:44 PM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] JPEG2000 decoding using OpenJpeg linking errors
> 
> 
> 
> 
> Ladies and Gents,
> 
> I have downloaded the v2 branch of openjpeg from the svn yesterday while
> using CMAKE to construct VS2005 static library projects.  All went well to
> build the static library.  I linked the static library via modifying
> nmake.opt to point to the path location of the library (.lib) file and the
> include file (openjpeg.h).
> 
> I issue the command via VS2005 command prompt:
> 
> nmake /f makefile.vc debug=1
> 
> GDAL can compile successfully, but when it tries to create gdal_i.lib, I
> get LNK2019 errors for all references to openjpeg library (file
> openjpegdataset.obj).  The first two LNK2019 are in  IReadBlock  of
> opj_end_decompress@8
> opj_decode_tile_header@40
> 
> What steps do I have to take to make it work?  Have I forgotten a step?
> This is what I have in nmake.opt:
> 
> OPENJPEG_ENABLED = YES
> OPENJPEG_CFLAGS = -IC:\openjpeg\libopenjpeg
> OPENJPEG_LIB = C:\openjpeg\bin\Release\openjpeg.lib
> 
> 
> 
> CFLAGS should point to openjpeg.h and LIB should point to the openjpeg.lib
> file.  It should work but I am puzzled?  Any advice?  Do I need to provide
> more information?  Has anyone experienced this problem?
> 
> 
> 
> FYI, I have performed a dumpbin.exe /SYMBOLS to verify the contents of the
> .lib file does have the requested functions to be used statically.
> 
> 
> 
> Robert
From claire.porter at gmail.com  Sat Apr  7 16:08:59 2012
From: claire.porter at gmail.com (Claire Porter)
Date: Sat Apr  7 16:09:14 2012
Subject: [gdal-dev] RPC Transform Error: ERROR 1: latitude or longitude
	exceeded limits
In-Reply-To: <CAOr40Ca=CSnVZzVZix-SS4j_jzFYhjmh1zdkRj0ah9cb9jmB9A@mail.gmail.com>
References: <CAOr40Ca=CSnVZzVZix-SS4j_jzFYhjmh1zdkRj0ah9cb9jmB9A@mail.gmail.com>
Message-ID: <CAOr40Ca0YSdToWzxnSG3sJhmYTiM3BH85XJKAvcCOsPhmCA7qg@mail.gmail.com>

I sometimes get the error message "ERROR 1: latitude or longitude exceeded
limits" when using gdalwarp with Quickbird, Worldview and Geoeye images
using RPCs, both with and without a DEM.  Sometimes I also get the error
message "ERROR 1: Too many points (441 out of 441) failed to transform,
unable to compute output bounds".  Both errors suggest that the RPC
transformations are not working, sometimes often enough for the process to
completely fail and sometimes enough only to make the output extent really
bogus.

Using the config option CHECK_WITH_INVERT_PROJ=TRUE does not help.  Nor
does setting the center long with the CENTER_LONG config option.  Nor does
using WGS84 as the target coordinate system.  When I run gdalwarp with
--debug on, I get up to 88,000 lines like these:

RPC: Iterations 10: Got: 153.057,-43.5705  Offset=-88416.5,407.11
RPC: Iterations 10: Got: 34.9369,156.643  Offset=-328767,-402.914
ERROR 1: latitude or longitude exceeded limits

I am a python coder, not a C++ guru, but looking through the underlying
code it seems that even after the maximum 10 iterations the RPC inverse
transform cannot get close to the correct pixel/line value (see the
function RPCInverseTransformPoint).  Any ideas what is wrong with these
RPCs?

My images are almost entirely in polar regions (above 60 and below -60),
but not near the poles themselves.  Only about 5% of the images fail.  I am
running on both the 1.8 gdal build for OSGeo4w and also on a 1.9 linux
build made by our Sys Admin.  Both builds have the same error.   The images
will orthorectify correctly using ERDAS.  I can provide debug output files
and sample images if necessary.

Example syntax: gdalwarp --debug ON -t_srs EPSG:3031 -rpc -to
"RPC_DEM=y:/dem/RAMPv2_osu91a200m.tif"
QB02_05OCT222204548-M1BS-10100100049A4300.ntf QB02_10oct22_3031.tif

Thank you,
Claire

-- 
Claire Porter
Remote Sensing Scientist
Polar Geospatial Center
University of Minnesota
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120407/4f6629ec/attachment.html
From polimax at mail.ru  Sat Apr  7 16:30:54 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Sat Apr  7 16:31:44 2012
Subject: [gdal-dev] RPC Transform Error: ERROR 1: latitude or longitude
	exceeded limits
In-Reply-To: <CAOr40Ca0YSdToWzxnSG3sJhmYTiM3BH85XJKAvcCOsPhmCA7qg@mail.gmail.com>
References: <CAOr40Ca=CSnVZzVZix-SS4j_jzFYhjmh1zdkRj0ah9cb9jmB9A@mail.gmail.com>
	<CAOr40Ca0YSdToWzxnSG3sJhmYTiM3BH85XJKAvcCOsPhmCA7qg@mail.gmail.com>
Message-ID: <4F80A3FE.1070309@mail.ru>

08.04.2012 0:08, Claire Porter ???????:
> I sometimes get the error message "ERROR 1: latitude or longitude 
> exceeded limits" when using gdalwarp with Quickbird, Worldview and 
> Geoeye images using RPCs, both with and without a DEM.  Sometimes I 
> also get the error message "ERROR 1: Too many points (441 out of 441) 
> failed to transform, unable to compute output bounds".  Both errors 
> suggest that the RPC transformations are not working, sometimes often 
> enough for the process to completely fail and sometimes enough only to 
> make the output extent really bogus.
>
> Using the config option CHECK_WITH_INVERT_PROJ=TRUE does not help.  
> Nor does setting the center long with the CENTER_LONG config option.  
> Nor does using WGS84 as the target coordinate system.  When I run 
> gdalwarp with --debug on, I get up to 88,000 lines like these:
>
> RPC: Iterations 10: Got: 153.057,-43.5705  Offset=-88416.5,407.11
> RPC: Iterations 10: Got: 34.9369,156.643  Offset=-328767,-402.914
> ERROR 1: latitude or longitude exceeded limits
>
> I am a python coder, not a C++ guru, but looking through the 
> underlying code it seems that even after the maximum 10 iterations the 
> RPC inverse transform cannot get close to the correct pixel/line value 
> (see the function RPCInverseTransformPoint).  Any ideas what is wrong 
> with these RPCs?
>
> My images are almost entirely in polar regions (above 60 and below 
> -60), but not near the poles themselves.  Only about 5% of the images 
> fail.  I am running on both the 1.8 gdal build for OSGeo4w and also on 
> a 1.9 linux build made by our Sys Admin.  Both builds have the same 
> error.   The images will orthorectify correctly using ERDAS.  I can 
> provide debug output files and sample images if necessary.
>
> Example syntax: gdalwarp --debug ON -t_srs EPSG:3031 -rpc -to 
> "RPC_DEM=y:/dem/RAMPv2_osu91a200m.tif" 
> QB02_05OCT222204548-M1BS-10100100049A4300.ntf QB02_10oct22_3031.tif
>
> Thank you,
> Claire
>
> -- 
> Claire Porter
> Remote Sensing Scientist
> Polar Geospatial Center
> University of Minnesota
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Try to play with *-wo *paremeters 
(http://gdal.org/structGDALWarpOptions.html#a0ed77f9917bb96c7a9aabd73d4d06e08 
<http://gdal.org/structGDALWarpOptions.html#a0ed77f9917bb96c7a9aabd73d4d06e08>)

gdalwarp --debug ON -t_srs EPSG:3031 -rpc -to 
"RPC_DEM=y:/dem/RAMPv2_osu91a200m.tif"-wo SOURCE_EXTRA=5 -wo 
SAMPLE_STEPS=101 QB02_05OCT222204548-M1BS-10100100049A4300.ntf 
QB02_10oct22_3031.tif

Regards,
Dmitry

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120408/2c1f042a/attachment.html
From jdmorgan at unca.edu  Sun Apr  8 21:26:11 2012
From: jdmorgan at unca.edu (Derek Morgan)
Date: Sun Apr  8 21:26:43 2012
Subject: [gdal-dev] bring through shapefile attribute in gdal_rasterize
Message-ID: <CA+N3S5pxZRdCcPiHfMA0ZfFv+LFj_UOc8eCLt8iidbxCDDPrDg@mail.gmail.com>

Hello GDAL colleagues,

This may be a simple question for most of you but I thought I would
ask it anyhow as I am at an impasse.  I have a Counties shape file.  I
am attempting to convert it to raster utilizing gdal_rasterize, and
this does work.  However, I am attempting to carry into the output
file the county name preferably e.g. Orange County, or at least a
county identify of some kind.  I have utilized a command similar to
the following:

gdal_rasterize -a COUNTY  -l -sql "select COUNTY, * from Counties"
Counties Counties.shp CountiesRaster.tif

However, when I open the resulting raster file in ArcGIS and click on
one of the pixel to identify it I don?t see the county name. Is the
county name there and I am just not seeing it in ArcGIS indentify.  I
realize there are probably more GDAL intensive ways to check for the
data, but I am still learning. I was hoping to someone could explain
to me what I am doing incorrectly.

Thanks,
Derek
From chaitanya.ch at gmail.com  Sun Apr  8 23:11:35 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Apr  8 23:12:03 2012
Subject: [gdal-dev] bring through shapefile attribute in gdal_rasterize
In-Reply-To: <CA+N3S5pxZRdCcPiHfMA0ZfFv+LFj_UOc8eCLt8iidbxCDDPrDg@mail.gmail.com>
References: <CA+N3S5pxZRdCcPiHfMA0ZfFv+LFj_UOc8eCLt8iidbxCDDPrDg@mail.gmail.com>
Message-ID: <CAMKgpOYMdj1+-Fw-vDvtTM8k8z4+ksPGshoks8ERLU1n+RBo+Q@mail.gmail.com>

Derek,

gdal_rasterize does not support showing labels on the features. Try quantum
gis. You can customize the output in countless different ways.

On Mon, Apr 9, 2012 at 6:56 AM, Derek Morgan <jdmorgan@unca.edu> wrote:

> Hello GDAL colleagues,
>
> This may be a simple question for most of you but I thought I would
> ask it anyhow as I am at an impasse.  I have a Counties shape file.  I
> am attempting to convert it to raster utilizing gdal_rasterize, and
> this does work.  However, I am attempting to carry into the output
> file the county name preferably e.g. Orange County, or at least a
> county identify of some kind.  I have utilized a command similar to
> the following:
>
> gdal_rasterize -a COUNTY  -l -sql "select COUNTY, * from Counties"
> Counties Counties.shp CountiesRaster.tif
>
> However, when I open the resulting raster file in ArcGIS and click on
> one of the pixel to identify it I don?t see the county name. Is the
> county name there and I am just not seeing it in ArcGIS indentify.  I
> realize there are probably more GDAL intensive ways to check for the
> data, but I am still learning. I was hoping to someone could explain
> to me what I am doing incorrectly.
>
> Thanks,
> Derek
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120409/0871ff52/attachment.html
From srikanth1947 at gmail.com  Mon Apr  9 00:45:39 2012
From: srikanth1947 at gmail.com (Srikanth)
Date: Mon Apr  9 00:46:30 2012
Subject: [gdal-dev] Polygon to Polyline
Message-ID: <CAPZ5UyWO=nWBu282R5ir2Rh92H6_MpDpNqCmpo-Om949Y6LyzQ@mail.gmail.com>

Dear All,

I would like to convert the polygon shape file to polyline shape file.
Is there any routine for carrying out this operation ? Please guide
me.

-- 
Regards,
Srikanth
From chaitanya.ch at gmail.com  Mon Apr  9 00:52:32 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Apr  9 00:52:35 2012
Subject: [gdal-dev] Polygon to Polyline
In-Reply-To: <CAPZ5UyWO=nWBu282R5ir2Rh92H6_MpDpNqCmpo-Om949Y6LyzQ@mail.gmail.com>
References: <CAPZ5UyWO=nWBu282R5ir2Rh92H6_MpDpNqCmpo-Om949Y6LyzQ@mail.gmail.com>
Message-ID: <CAMKgpOZUQTYXY2_vYFazbXS+fOXinF290u9-L7Zr=11UbqgDfg@mail.gmail.com>

Srikanth,

Use ogr2ogr with the option -nlt MULTILINESTRING

http://www.gdal.org/ogr2ogr.html

On Mon, Apr 9, 2012 at 10:15 AM, Srikanth <srikanth1947@gmail.com> wrote:

> Dear All,
>
> I would like to convert the polygon shape file to polyline shape file.
> Is there any routine for carrying out this operation ? Please guide
> me.
>
> --
> Regards,
> Srikanth
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120409/d009f463/attachment.html
From claire.porter at gmail.com  Mon Apr  9 10:12:28 2012
From: claire.porter at gmail.com (Claire Porter)
Date: Mon Apr  9 10:13:20 2012
Subject: [gdal-dev] RPC Transform Error: ERROR 1: latitude or longitude
	exceeded limits
In-Reply-To: <CAOr40Ca0YSdToWzxnSG3sJhmYTiM3BH85XJKAvcCOsPhmCA7qg@mail.gmail.com>
References: <CAOr40Ca=CSnVZzVZix-SS4j_jzFYhjmh1zdkRj0ah9cb9jmB9A@mail.gmail.com>
	<CAOr40Ca0YSdToWzxnSG3sJhmYTiM3BH85XJKAvcCOsPhmCA7qg@mail.gmail.com>
Message-ID: <CAOr40Cby-TQgTRx9pdAduxgC-vBnjGH09zJ+Qug07WAAKgwXDg@mail.gmail.com>

Dmitry (and the list),

Using the warp options you suggested does not make a difference.  Even
SAMPLE_GRID does not significantly change the output.  I also tried using
wgs84 as the output coordinate system in case it was an issue of being
projected into Polar Stereographic: no luck.

I copied the relevant functions from gdal_rpc.cpp into python order to test
the RPC calculations independant of the warping functions and any
projection system.  I used a sampling grid over the whole extent of
whatever test image and found that the RPCs do not converge for any part of
the error-prone images  In fact, with each iteration the offset from the
original pixel gets further and further from zero (alternating sign each
iteration).

>From these tests, I am guessing that the issue is not the sampling or the
projection system.  Since other software packages can handle these images,
I assume then that the issue is in how gdal is managing the RPCs.  Any
ideas?

Many thanks,
Claire
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120409/27d3952d/attachment.html
From eadam at co.lincoln.or.us  Mon Apr  9 10:49:54 2012
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Mon Apr  9 10:50:11 2012
Subject: [gdal-dev] bring through shapefile attribute in gdal_rasterize
In-Reply-To: <CA+N3S5pxZRdCcPiHfMA0ZfFv+LFj_UOc8eCLt8iidbxCDDPrDg@mail.gmail.com>
References: <CA+N3S5pxZRdCcPiHfMA0ZfFv+LFj_UOc8eCLt8iidbxCDDPrDg@mail.gmail.com>
Message-ID: <CACqBkM93GvUSLLESOStZnyf+j10+DeS-3A2HmF-xq_sLszqOkQ@mail.gmail.com>

Derek,

> This may be a simple question for most of you but I thought I would
> ask it anyhow as I am at an impasse. ?I have a Counties shape file. ?I
> am attempting to convert it to raster utilizing gdal_rasterize, and
> this does work. ?However, I am attempting to carry into the output
> file the county name preferably e.g. Orange County, or at least a
> county identify of some kind. ?I have utilized a command similar to
> the following:
>
> gdal_rasterize -a COUNTY ?-l -sql "select COUNTY, * from Counties"
> Counties Counties.shp CountiesRaster.tif

I think that -l should specify the layer name from the source dataset
not the field.  Typically in a shapefile there is only one layer and
it is the same as the shapefile name.  Try dropping the -l stuff all
together.

gdal_rasterize -a COUNTY Counties.shp CountiesRaster.tif

or if you use it, use it like this:

gdal_rasterize -a COUNTY -l Counties Counties.shp CountiesRaster.tif

>
> However, when I open the resulting raster file in ArcGIS and click on
> one of the pixel to identify it I don?t see the county name. Is the
> county name there and I am just not seeing it in ArcGIS indentify. ?I
> realize there are probably more GDAL intensive ways to check for the
> data, but I am still learning. I was hoping to someone could explain
> to me what I am doing incorrectly.

You can get information from a raster in GDAL with gdallocationinfo.

HTH, Eli

>
> Thanks,
> Derek
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From etourigny.dev at gmail.com  Mon Apr  9 11:04:42 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon Apr  9 11:04:55 2012
Subject: [gdal-dev] RPC Transform Error: ERROR 1: latitude or longitude
	exceeded limits
In-Reply-To: <CAOr40Cby-TQgTRx9pdAduxgC-vBnjGH09zJ+Qug07WAAKgwXDg@mail.gmail.com>
References: <CAOr40Ca=CSnVZzVZix-SS4j_jzFYhjmh1zdkRj0ah9cb9jmB9A@mail.gmail.com>
	<CAOr40Ca0YSdToWzxnSG3sJhmYTiM3BH85XJKAvcCOsPhmCA7qg@mail.gmail.com>
	<CAOr40Cby-TQgTRx9pdAduxgC-vBnjGH09zJ+Qug07WAAKgwXDg@mail.gmail.com>
Message-ID: <CA+TxYvMYNc83iSy+t4_4dF+_DAj2aUTphkjw0D8X+s5QsCoqXg@mail.gmail.com>

Claire,

You may have to set the output extents manually with the -te option.

This has been the solution to many problems with gdalwarp.

Etienne


On Mon, Apr 9, 2012 at 11:12 AM, Claire Porter <claire.porter@gmail.com> wrote:
> Dmitry (and the list),
>
> Using the warp options you suggested does not make a difference.? Even
> SAMPLE_GRID does not significantly change the output.? I also tried using
> wgs84 as the output coordinate system in case it was an issue of being
> projected into Polar Stereographic: no luck.
>
> I copied the relevant functions from gdal_rpc.cpp into python order to test
> the RPC calculations independant of the warping functions and any projection
> system.? I used a sampling grid over the whole extent of whatever test image
> and found that the RPCs do not converge for any part of the error-prone
> images? In fact, with each iteration the offset from the original pixel gets
> further and further from zero (alternating sign each iteration).
>
> From these tests, I am guessing that the issue is not the sampling or the
> projection system.? Since other software packages can handle these images, I
> assume then that the issue is in how gdal is managing the RPCs.? Any ideas?
>
> Many thanks,
> Claire
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From claire.porter at gmail.com  Mon Apr  9 12:57:22 2012
From: claire.porter at gmail.com (Claire Porter)
Date: Mon Apr  9 12:58:08 2012
Subject: [gdal-dev] RPC Transform Error: ERROR 1: latitude or longitude
	exceeded limits
In-Reply-To: <CA+TxYvMYNc83iSy+t4_4dF+_DAj2aUTphkjw0D8X+s5QsCoqXg@mail.gmail.com>
References: <CAOr40Ca=CSnVZzVZix-SS4j_jzFYhjmh1zdkRj0ah9cb9jmB9A@mail.gmail.com>
	<CAOr40Ca0YSdToWzxnSG3sJhmYTiM3BH85XJKAvcCOsPhmCA7qg@mail.gmail.com>
	<CAOr40Cby-TQgTRx9pdAduxgC-vBnjGH09zJ+Qug07WAAKgwXDg@mail.gmail.com>
	<CA+TxYvMYNc83iSy+t4_4dF+_DAj2aUTphkjw0D8X+s5QsCoqXg@mail.gmail.com>
Message-ID: <CAN07go-oPzi=7vZKgisJisDyeSe46Zeo0b3OY-fjto_Y3qWcYg@mail.gmail.com>

Etienne,

When I set the extents using -te, I get an output of size 0.  I think
the problem is not in the warping itself, but in the transformation
using the RPCs.

Thanks,
Claire


On Mon, Apr 9, 2012 at 10:04 AM, Etienne Tourigny
<etourigny.dev@gmail.com> wrote:
> Claire,
>
> You may have to set the output extents manually with the -te option.
>
> This has been the solution to many problems with gdalwarp.
>
> Etienne
>
>
> On Mon, Apr 9, 2012 at 11:12 AM, Claire Porter <claire.porter@gmail.com> wrote:
>> Dmitry (and the list),
>>
>> Using the warp options you suggested does not make a difference.? Even
>> SAMPLE_GRID does not significantly change the output.? I also tried using
>> wgs84 as the output coordinate system in case it was an issue of being
>> projected into Polar Stereographic: no luck.
>>
>> I copied the relevant functions from gdal_rpc.cpp into python order to test
>> the RPC calculations independant of the warping functions and any projection
>> system.? I used a sampling grid over the whole extent of whatever test image
>> and found that the RPCs do not converge for any part of the error-prone
>> images? In fact, with each iteration the offset from the original pixel gets
>> further and further from zero (alternating sign each iteration).
>>
>> From these tests, I am guessing that the issue is not the sampling or the
>> projection system.? Since other software packages can handle these images, I
>> assume then that the issue is in how gdal is managing the RPCs.? Any ideas?
>>
>> Many thanks,
>> Claire
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From etourigny.dev at gmail.com  Mon Apr  9 14:02:50 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon Apr  9 14:02:56 2012
Subject: [gdal-dev] RPC Transform Error: ERROR 1: latitude or longitude
	exceeded limits
In-Reply-To: <CAN07go-oPzi=7vZKgisJisDyeSe46Zeo0b3OY-fjto_Y3qWcYg@mail.gmail.com>
References: <CAOr40Ca=CSnVZzVZix-SS4j_jzFYhjmh1zdkRj0ah9cb9jmB9A@mail.gmail.com>
	<CAOr40Ca0YSdToWzxnSG3sJhmYTiM3BH85XJKAvcCOsPhmCA7qg@mail.gmail.com>
	<CAOr40Cby-TQgTRx9pdAduxgC-vBnjGH09zJ+Qug07WAAKgwXDg@mail.gmail.com>
	<CA+TxYvMYNc83iSy+t4_4dF+_DAj2aUTphkjw0D8X+s5QsCoqXg@mail.gmail.com>
	<CAN07go-oPzi=7vZKgisJisDyeSe46Zeo0b3OY-fjto_Y3qWcYg@mail.gmail.com>
Message-ID: <CA+TxYvN2bSLBDZn3Hz3wLGdujT=rcPTmVanrnwjSWE4aUOKbpQ@mail.gmail.com>

The error you get can usually be avoided when you set the output
bounds correctly. Are you sure the -te options you use are correct?

ERROR 1: Too many points (441 out of 441) failed to transform, unable
to compute output bounds



On Mon, Apr 9, 2012 at 1:57 PM, Claire Porter <claire.porter@gmail.com> wrote:
> Etienne,
>
> When I set the extents using -te, I get an output of size 0. ?I think
> the problem is not in the warping itself, but in the transformation
> using the RPCs.
>
> Thanks,
> Claire
>
>
> On Mon, Apr 9, 2012 at 10:04 AM, Etienne Tourigny
> <etourigny.dev@gmail.com> wrote:
>> Claire,
>>
>> You may have to set the output extents manually with the -te option.
>>
>> This has been the solution to many problems with gdalwarp.
>>
>> Etienne
>>
>>
>> On Mon, Apr 9, 2012 at 11:12 AM, Claire Porter <claire.porter@gmail.com> wrote:
>>> Dmitry (and the list),
>>>
>>> Using the warp options you suggested does not make a difference.? Even
>>> SAMPLE_GRID does not significantly change the output.? I also tried using
>>> wgs84 as the output coordinate system in case it was an issue of being
>>> projected into Polar Stereographic: no luck.
>>>
>>> I copied the relevant functions from gdal_rpc.cpp into python order to test
>>> the RPC calculations independant of the warping functions and any projection
>>> system.? I used a sampling grid over the whole extent of whatever test image
>>> and found that the RPCs do not converge for any part of the error-prone
>>> images? In fact, with each iteration the offset from the original pixel gets
>>> further and further from zero (alternating sign each iteration).
>>>
>>> From these tests, I am guessing that the issue is not the sampling or the
>>> projection system.? Since other software packages can handle these images, I
>>> assume then that the issue is in how gdal is managing the RPCs.? Any ideas?
>>>
>>> Many thanks,
>>> Claire
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From claire.porter at gmail.com  Mon Apr  9 15:07:55 2012
From: claire.porter at gmail.com (Claire Porter)
Date: Mon Apr  9 15:08:09 2012
Subject: [gdal-dev] RPC Transform Error: ERROR 1: latitude or longitude
	exceeded limits
In-Reply-To: <CA+TxYvN2bSLBDZn3Hz3wLGdujT=rcPTmVanrnwjSWE4aUOKbpQ@mail.gmail.com>
References: <CAOr40Ca=CSnVZzVZix-SS4j_jzFYhjmh1zdkRj0ah9cb9jmB9A@mail.gmail.com>
	<CAOr40Ca0YSdToWzxnSG3sJhmYTiM3BH85XJKAvcCOsPhmCA7qg@mail.gmail.com>
	<CAOr40Cby-TQgTRx9pdAduxgC-vBnjGH09zJ+Qug07WAAKgwXDg@mail.gmail.com>
	<CA+TxYvMYNc83iSy+t4_4dF+_DAj2aUTphkjw0D8X+s5QsCoqXg@mail.gmail.com>
	<CAN07go-oPzi=7vZKgisJisDyeSe46Zeo0b3OY-fjto_Y3qWcYg@mail.gmail.com>
	<CA+TxYvN2bSLBDZn3Hz3wLGdujT=rcPTmVanrnwjSWE4aUOKbpQ@mail.gmail.com>
Message-ID: <CAN07go-GDuPy4zniQ2xXCfHYUhq65C08dMhRepBTSOdT64-GNw@mail.gmail.com>

Yes, I am sure I entered the -te parameters correctly.  When I also
use -tr to specify the output pixel size, I get the correct result in
this one test case.  Is there no other option than this work around?
It seems like some sort of systematic issue with RPCs that would be
good to address at the source.

I will test some more and let you know if the work around fails in any cases.

Thanks,
Claire


On Mon, Apr 9, 2012 at 1:02 PM, Etienne Tourigny
<etourigny.dev@gmail.com> wrote:
> The error you get can usually be avoided when you set the output
> bounds correctly. Are you sure the -te options you use are correct?
>
> ERROR 1: Too many points (441 out of 441) failed to transform, unable
> to compute output bounds
>
>
>
> On Mon, Apr 9, 2012 at 1:57 PM, Claire Porter <claire.porter@gmail.com> wrote:
>> Etienne,
>>
>> When I set the extents using -te, I get an output of size 0. ?I think
>> the problem is not in the warping itself, but in the transformation
>> using the RPCs.
>>
>> Thanks,
>> Claire
>>
>>
>> On Mon, Apr 9, 2012 at 10:04 AM, Etienne Tourigny
>> <etourigny.dev@gmail.com> wrote:
>>> Claire,
>>>
>>> You may have to set the output extents manually with the -te option.
>>>
>>> This has been the solution to many problems with gdalwarp.
>>>
>>> Etienne
>>>
>>>
>>> On Mon, Apr 9, 2012 at 11:12 AM, Claire Porter <claire.porter@gmail.com> wrote:
>>>> Dmitry (and the list),
>>>>
>>>> Using the warp options you suggested does not make a difference.? Even
>>>> SAMPLE_GRID does not significantly change the output.? I also tried using
>>>> wgs84 as the output coordinate system in case it was an issue of being
>>>> projected into Polar Stereographic: no luck.
>>>>
>>>> I copied the relevant functions from gdal_rpc.cpp into python order to test
>>>> the RPC calculations independant of the warping functions and any projection
>>>> system.? I used a sampling grid over the whole extent of whatever test image
>>>> and found that the RPCs do not converge for any part of the error-prone
>>>> images? In fact, with each iteration the offset from the original pixel gets
>>>> further and further from zero (alternating sign each iteration).
>>>>
>>>> From these tests, I am guessing that the issue is not the sampling or the
>>>> projection system.? Since other software packages can handle these images, I
>>>> assume then that the issue is in how gdal is managing the RPCs.? Any ideas?
>>>>
>>>> Many thanks,
>>>> Claire
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From noura.salem.shamsi at gmail.com  Tue Apr 10 01:26:39 2012
From: noura.salem.shamsi at gmail.com (len lee)
Date: Tue Apr 10 01:27:22 2012
Subject: [gdal-dev] requesting tiles according to my dteds data c++
Message-ID: <CAJ2iEgySE0gWuzkgQcCBQ6OP7D2pHHQFTTOHKcuVA36k9yt=9w@mail.gmail.com>

hello;
i downloaded dted data dt0 from raster roam website and there are 3 folders
e055, e056 and e057 and within each folder there are 3 dted files and i
guess each dted file here represent a tile within my terrain. now what am
trying to do is requesting the terrain tiles according to my dted data ..
any idea how can i do that with gdal lib?
i tried this:
poDataset = (GDALDataset *) GDALOpen( "
http://tile.openstreetmap.org/15/23687/15190.png", GA_ReadOnly );

to request a specific tile from openstreetmap server but as you can see i
need to know the exact coordinate system for that tile ...

please all what i need is to understand the process of requesting the tiles
according to my dteds files;

i will appreciate any help;
thanks in advance;
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120410/bcda7d64/attachment.html
From saad.hessane at gmail.com  Tue Apr 10 04:47:59 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Tue Apr 10 04:48:02 2012
Subject: [gdal-dev] requesting tiles according to my dteds data c++
In-Reply-To: <CAJ2iEgySE0gWuzkgQcCBQ6OP7D2pHHQFTTOHKcuVA36k9yt=9w@mail.gmail.com>
References: <CAJ2iEgySE0gWuzkgQcCBQ6OP7D2pHHQFTTOHKcuVA36k9yt=9w@mail.gmail.com>
Message-ID: <CAEcp1tAh4BYxcr95T3O-Nf8PA785pA1AiHmNPtqthKk606v-Tg@mail.gmail.com>

DTED files are really simple to undertand. A DTED CD-ROM is organized like
this :

   - *dted (folder)*
      - *D### (folder)*
         - H##.dt# (file)
         - H##.dt# (file)
         - ...*
         *
      - *D### (folder)*
      - *...
      *
   - *gazette (folder)
   *
   - *text (folder)
   *
   - dmed (file)

# : digit
D : The direction of the tiles E for East and W for West
H : The hemispher of the tile : N for North and S for South


A DTED file represent data elevation of a square of 1?x1?. So the folder
"e055" contain dted files that have longitude 55E. If the folder contain
the file "n33.dt0", that mean the file contain data elevations of a 1?x1?
square starting at 55E 33N (ending at 56E 34N).

Note about DTED specification :

   - The DTED specification don't tell if the lettre have to be in capital
   lettre or not. So you can have "n33.dt0" or "N33.dt0". Be careful with that.
   - The specification don't tell to have contigu file or folder. So you
   can have a folder E055 and E060 without the folder between 55 and 60.


I hope I answerd your question.





2012/4/10 len lee <noura.salem.shamsi@gmail.com>

> hello;
> i downloaded dted data dt0 from raster roam website and there are 3
> folders e055, e056 and e057 and within each folder there are 3 dted files
> and i guess each dted file here represent a tile within my terrain. now
> what am trying to do is requesting the terrain tiles according to my dted
> data .. any idea how can i do that with gdal lib?
> i tried this:
> poDataset = (GDALDataset *) GDALOpen( "
> http://tile.openstreetmap.org/15/23687/15190.png", GA_ReadOnly );
>
> to request a specific tile from openstreetmap server but as you can see i
> need to know the exact coordinate system for that tile ...
>
> please all what i need is to understand the process of requesting the
> tiles according to my dteds files;
>
> i will appreciate any help;
> thanks in advance;
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120410/a555919d/attachment.html
From chaitanya.ch at gmail.com  Tue Apr 10 04:51:42 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr 10 04:51:56 2012
Subject: [gdal-dev] requesting tiles according to my dteds data c++
In-Reply-To: <CAEcp1tAh4BYxcr95T3O-Nf8PA785pA1AiHmNPtqthKk606v-Tg@mail.gmail.com>
References: <CAJ2iEgySE0gWuzkgQcCBQ6OP7D2pHHQFTTOHKcuVA36k9yt=9w@mail.gmail.com>
	<CAEcp1tAh4BYxcr95T3O-Nf8PA785pA1AiHmNPtqthKk606v-Tg@mail.gmail.com>
Message-ID: <CAMKgpOYNMm1PUF51DrksaNe5=LjfXGaTjy3qaEVnW=MEOJJ57Q@mail.gmail.com>

Noura,

First, note that osm tiles are presented in EPSG:900913 reference system.

The usual way of requesting the tiles is based on the extent coordinates.
GDAL's WMS driver[1] can be used to access it. For that you need an XML
file[2] specifying the service.

Once you obtain the coordinates like Sa?d explained, convert them to
EPSG:900913 and use it obtain the tiles.

[1]: http://www.gdal.org/frmt_wms.html
[2]: http://www.gdal.org/frmt_wms_openstreetmap_tms.xml

On Tue, Apr 10, 2012 at 2:17 PM, Sa?d HESSANE <saad.hessane@gmail.com>wrote:

> DTED files are really simple to undertand. A DTED CD-ROM is organized like
> this :
>
>    - *dted (folder)*
>       - *D### (folder)*
>          - H##.dt# (file)
>          - H##.dt# (file)
>          - ...*
>          *
>       - *D### (folder)*
>       - *...
>       *
>    - *gazette (folder)
>    *
>    - *text (folder)
>    *
>    - dmed (file)
>
> # : digit
> D : The direction of the tiles E for East and W for West
> H : The hemispher of the tile : N for North and S for South
>
>
> A DTED file represent data elevation of a square of 1?x1?. So the folder
> "e055" contain dted files that have longitude 55E. If the folder contain
> the file "n33.dt0", that mean the file contain data elevations of a 1?x1?
> square starting at 55E 33N (ending at 56E 34N).
>
> Note about DTED specification :
>
>    - The DTED specification don't tell if the lettre have to be in
>    capital lettre or not. So you can have "n33.dt0" or "N33.dt0". Be careful
>    with that.
>    - The specification don't tell to have contigu file or folder. So you
>    can have a folder E055 and E060 without the folder between 55 and 60.
>
>
> I hope I answerd your question.
>
>
>
>
>
> 2012/4/10 len lee <noura.salem.shamsi@gmail.com>
>
>> hello;
>> i downloaded dted data dt0 from raster roam website and there are 3
>> folders e055, e056 and e057 and within each folder there are 3 dted files
>> and i guess each dted file here represent a tile within my terrain. now
>> what am trying to do is requesting the terrain tiles according to my dted
>> data .. any idea how can i do that with gdal lib?
>> i tried this:
>> poDataset = (GDALDataset *) GDALOpen( "
>> http://tile.openstreetmap.org/15/23687/15190.png", GA_ReadOnly );
>>
>> to request a specific tile from openstreetmap server but as you can see i
>> need to know the exact coordinate system for that tile ...
>>
>> please all what i need is to understand the process of requesting the
>> tiles according to my dteds files;
>>
>> i will appreciate any help;
>> thanks in advance;
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120410/931f8178/attachment-0001.html
From gavin at afrispatial.co.za  Tue Apr 10 06:49:47 2012
From: gavin at afrispatial.co.za (Gavin Fleming)
Date: Tue Apr 10 06:49:31 2012
Subject: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue
In-Reply-To: <201204032331.05641.even.rouault@mines-paris.org>
References: <4F7B66A7.1010907@afrispatial.co.za>
	<201204032331.05641.even.rouault@mines-paris.org>
Message-ID: <4F84104B.7030109@afrispatial.co.za>

This worked on one Ubuntu 11.10 box but not on another (where I really 
need it to work). I'd be grateful for any help:

--with MrSID SDK 7:

./configure --with-geotiff=internal 
--with-mrsid=/usr/local/Geo_DSDK-7.0.0.2167 --with-threads --with-python

/bin/bash /home/gavin/src/gdal/libtool --mode=link    --tag=LD    g++ 
gdalinfo.lo  /home/gavin/src/gdal/libgdal.la -o gdalinfo
libtool: link: ignoring unknown tag LD
libtool: link: g++ .libs/gdalinfo.o -o .libs/gdalinfo 
/home/gavin/src/gdal/.libs/libgdal.so -L/usr/lib 
-L/usr/lib/x86_64-linux-gnu 
-L/usr/local/Geo_DSDK-7.0.0.2167/3rd-party/lib/Release 
-L/usr/local/Geo_DSDK-7.0.0.2167/lib/Release -lgeos_c 
/usr/lib/x86_64-linux-gnu/libsqlite3.so /usr/lib/libodbc.so 
/usr/lib/libodbcinst.so /usr/lib/x86_64-linux-gnu/libexpat.so -lxerces-c 
-lNCSEcw -lNCSEcwC -lNCSCnet -lNCSUtil 
/usr/lib/x86_64-linux-gnu/libjasper.so -lnetcdf /usr/lib/libhdf5.so 
/usr/lib/libmfhdfalt.so /usr/lib/libdfalt.so /usr/lib/libgif.so 
/usr/lib/x86_64-linux-gnu/libjpeg.so -lpng -lpq -lz -lm -lrt -ldl 
/usr/lib/x86_64-linux-gnu/libcurl-gnutls.so -lltidsdk -lpthread 
-llt_kakadu -pthread
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to 
`LizardTech::MrSIDImageReaderInterface::getMrSIDGeneration(unsigned char 
const*, unsigned char&, bool&)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to 
`LizardTech::LTISceneBuffer::LTISceneBuffer(LizardTech::LTIPixel const&, 
unsigned int, unsigned int, void**, unsigned int)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to 
`LizardTech::LTISceneBuffer::LTISceneBuffer(LizardTech::LTIPixel const&, 
unsigned int, unsigned int, void**, unsigned int)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to 
`LizardTech::J2KImageReader::initialize(LizardTech::LTIOStreamInf&, 
bool, float, bool)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to 
`LizardTech::LTISceneBuffer::getBandData(unsigned short) const'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/home/gavin/src/gdal/apps'
make: *** [apps-target] Error 2

----------------------------------------------------
--with MrSID SDK 8:

./configure 
--with-mrsid=/usr/local/MrSID_DSDK-8.5.0.3422-linux.x86-64.gcc44/Raster_DSDK 
--with-geotiff=internal --with-threads --with-python
make
make install
ldconfig
gdalinfo
gdalinfo: error while loading shared libraries: libltidsdk.so: cannot 
open shared object file: No such file or directory


From gavin at afrispatial.co.za  Tue Apr 10 07:58:10 2012
From: gavin at afrispatial.co.za (Gavin Fleming)
Date: Tue Apr 10 07:58:24 2012
Subject: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue
In-Reply-To: <CA+YzLBeLb7i9Bo6z7uEwyV=AW8PxD8Xev7Fq5oJi8y0maYanmg@mail.gmail.com>
References: <4F7B66A7.1010907@afrispatial.co.za>
	<CA+YzLBeLb7i9Bo6z7uEwyV=AW8PxD8Xev7Fq5oJi8y0maYanmg@mail.gmail.com>
Message-ID: <4F842052.6020501@afrispatial.co.za>

On 03/04/2012 23:22, Frank Warmerdam wrote:
> Could you search for "XTIFFClientOpen" in config.log after the
> configure failure?  Often there details in there on why the probe
> failed

root@study:/tmp/libgdal-mrsid-build.1b1ICV/libgdal-mrsid-1.9.0# grep 
XTIFF config.log
configure:3490: checking for XTIFFClientOpen in -lgeotiff
| char XTIFFClientOpen ();
| return XTIFFClientOpen ();
ac_cv_lib_geotiff_XTIFFClientOpen=no
From ao at t-kartor.se  Tue Apr 10 07:52:25 2012
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Tue Apr 10 07:59:06 2012
Subject: [gdal-dev] OGR support for VPF DNC?
Message-ID: <4F841EF9.9010606@t-kartor.se>

I cannot make OGR work with VPF DNC data.
ogrinfo and ogr2ogr crashes when trying to read data from any level 
inside the VPF structure. DHT and LAT files do exist.
OGR does work for standard VMAP0 and VMAP1 data.
Is this a known limitation?
Does DNC require some special syntax?
I have used e.g. ogrinfo gltp:/vrf/C:\xxx and ogrinfo gltp:/vrf/C:/xxx

Tested version:
1.7.0b2 as included in FWTools 2.4.7 on Windows

I noted that only FME seems to be able to always correctly read the DNC 
data we have available. For example vpfview, nimamuse and ArcGIS do have 
various issues.

Best Regards

-- 
Andreas Oxenstierna
T-Kartan Produkt AB
mobile: +46 733 206831
mailto: ao@t-kartor.se
http://www.t-kartor.com

From refriguy68 at yahoo.com  Tue Apr 10 09:14:54 2012
From: refriguy68 at yahoo.com (Robert Zermeno)
Date: Tue Apr 10 09:15:22 2012
Subject: [gdal-dev] OpenJpegDataset IReadBlock question
Message-ID: <1334063694.38837.YahooMailClassic@web161005.mail.bf1.yahoo.com>

Ladies and Gents,

I have yet to properly configure GDAL to compile with a repository OpenJpeg V2, but I wanted to see how GDAL uses openjpeg tile request.? I created my own project and modified IReadBlock() to be standalone to view a tile request.

I am using a sample data file provided by openjpeg data folder named p1_04.j2k.? How is the data retrieved from opj_decode_tile_data() is being stored in the buffer?? To access pixel 0, is it just buffer[0] or is there another way?
For some reason, my request for Tile (0,0) of length 128x128 returns an image that looks masked.? The image is mostly black and white with no depth of shading (i.e. missing information).? 
This image also uses 12 bits-per-pixel which I do not see where GDAL truncates the image data down to 8 bits-per-pixel.? Does GDAL return the raw 12 bits-per-pixel forcing the user to truncate the data properly for every pixel or is it handled by GDAL (If so, where)?

I hope to figure out why GDAL does not link properly to openjpeg V2 for others use this option again.? I hope someone can provide me the answers to the questions I have asked.

Thanks,

John
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120410/bb537afc/attachment.html
From even.rouault at mines-paris.org  Tue Apr 10 09:41:08 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 10 09:41:44 2012
Subject: [gdal-dev] OpenJpegDataset IReadBlock question
In-Reply-To: <1334063694.38837.YahooMailClassic@web161005.mail.bf1.yahoo.com>
References: <1334063694.38837.YahooMailClassic@web161005.mail.bf1.yahoo.com>
Message-ID: <1334065268.4f84387448f5d@webmail.free.fr>

>
> I am using a sample data file provided by openjpeg data folder named
> p1_04.j2k.? How is the data retrieved from opj_decode_tile_data() is being
> stored in the buffer?? To access pixel 0, is it just buffer[0] or is there
> another way?
> For some reason, my request for Tile (0,0) of length 128x128 returns an image
> that looks masked.? The image is mostly black and white with no depth of
> shading (i.e. missing information).?
> This image also uses 12 bits-per-pixel which I do not see where GDAL
> truncates the image data down to 8 bits-per-pixel.? Does GDAL return the raw
> 12 bits-per-pixel forcing the user to truncate the data properly for every
> pixel or is it handled by GDAL (If so, where)?

Depending on the precision information given by the JPEG2000 metadata, the
buffer will contain data of type 8 bit (GDT_Byte), 16 bits (GDT_Int16 or
GDT_UInt16) or 32 bits (GDT_Int32 or GDT_UInt32). For 12 bits per pixels, the
immediate upper type will be selected to store the data, thus GDT_Int16.

There's at least one regression test for the OpenJpeg driver that testes 16 bit
images.
From jukka.rahkonen at mmmtike.fi  Tue Apr 10 09:51:42 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Apr 10 09:52:06 2012
Subject: [gdal-dev] Re: Slow writing into Spatialite with -skipfailures
References: <loom.20120404T173702-751@post.gmane.org>
	<201204041928.23447.even.rouault@mines-paris.org>
	<loom.20120405T081213-888@post.gmane.org>
	<201204052054.06938.even.rouault@mines-paris.org>
Message-ID: <loom.20120410T152259-727@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> Hum, would be interesting to have a sample to examine one of the 
geometry that 
> triggers the error. The SRID hypothesis seems unlikely, and as far 
as the 
> geometry type is concerned, it is weird because you have specified -nlt 
> MULTIPOLYGON ...
> 
> I imagine once the reason for the error(s) is more clearly identified, 
the 
> possibility for a prefiltering in ogr2ogr could be studied to avoid
 trying to 
> insert such features, and thus benefiting for transactions.

I managed to trap one problematic case but there is something weird 
going on. The feature comes originally from Oracle and it is for sure 
a polygon there (GTYPE=2003). I have converted it into shapefile with 
GDAL 1.6 and OCI plugin from OSGeo4W because for some reason I have 
not managed to connect our Oracle with more recent versions.

Now GDAL 1.6 that I used for converting polygon from Oracle into
shapefile tells that geometry is a polygon, while GDAL 1.9 claims 
that it is a multipolygon.

Ogr2ogr of GDAL 1.9 with this shapefile created by GDAL 1.6 leads 
to an error:

ogr2ogr -f SQLite -dsco spatialite=yes -dsco init_with_epsg=yes
-a_srs epsg:2393  multi.sqlite multi.shp

ERROR 1: sqlite3_step() failed:
  multi.GEOMETRY violates Geometry constraint 
[geom-type or SRID not allowed] (19)
ERROR 1: ROLLBACK transaction failed: cannot rollback - no 
transaction is active

ERROR 1: Terminating translation prematurely after failed
translation of layer multi (use -skipfailures to skip errors)

The error is the same even if I use -nlt multipolygon.

If I convert the GDAL 1.6 shapefile into a new shapefile with GDAL 1.9 the
geometry is reported to be of type POLYGON and conversion into spatialite is
successful. I cannot say if the problem is in GDAL 1.6 or in the Oracle OCI
driver or what but anyway I believe that the shapefile is somehow corrupted or
at least GDAL 1.9 thinks so.

The one-feature shapefile (multi?)polygon shapefile created by 
GDAL 1.6+OCI is here
http://latuviitta.org/documents/multi.zip

-Jukka Rahkonen-

From chaitanya.ch at gmail.com  Tue Apr 10 10:13:50 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr 10 10:14:26 2012
Subject: [gdal-dev] OGR support for VPF DNC?
In-Reply-To: <4F841EF9.9010606@t-kartor.se>
References: <4F841EF9.9010606@t-kartor.se>
Message-ID: <CAMKgpOY2CxRoLEAD_a2F2Fc68T3pVCLrpTh9CWcb2stgGFuuRw@mail.gmail.com>

Andreas,

Could you first test your data with the latest version of GDAL? The latest
Windows binaries can be obtained through the OSGeo4W installer.

In any case, I couldn't find any reference to DNC in the OGDI library,
which is used by OGR to read VPF files.

On Tue, Apr 10, 2012 at 5:22 PM, Andreas Oxenstierna <ao@t-kartor.se> wrote:

> I cannot make OGR work with VPF DNC data.
> ogrinfo and ogr2ogr crashes when trying to read data from any level inside
> the VPF structure. DHT and LAT files do exist.
> OGR does work for standard VMAP0 and VMAP1 data.
> Is this a known limitation?
> Does DNC require some special syntax?
> I have used e.g. ogrinfo gltp:/vrf/C:\xxx and ogrinfo gltp:/vrf/C:/xxx
>
> Tested version:
> 1.7.0b2 as included in FWTools 2.4.7 on Windows
>
> I noted that only FME seems to be able to always correctly read the DNC
> data we have available. For example vpfview, nimamuse and ArcGIS do have
> various issues.
>
> Best Regards
>
> --
> Andreas Oxenstierna
> T-Kartan Produkt AB
> mobile: +46 733 206831
> mailto: ao@t-kartor.se
> http://www.t-kartor.com
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120410/4dc57f78/attachment.html
From even.rouault at mines-paris.org  Tue Apr 10 10:23:48 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 10 10:24:14 2012
Subject: [gdal-dev] OGR support for VPF DNC?
In-Reply-To: <CAMKgpOY2CxRoLEAD_a2F2Fc68T3pVCLrpTh9CWcb2stgGFuuRw@mail.gmail.com>
References: <4F841EF9.9010606@t-kartor.se>
	<CAMKgpOY2CxRoLEAD_a2F2Fc68T3pVCLrpTh9CWcb2stgGFuuRw@mail.gmail.com>
Message-ID: <1334067828.4f844274686fa@webmail.free.fr>

Selon Chaitanya kumar CH <chaitanya.ch@gmail.com>:

> Andreas,
>
> Could you first test your data with the latest version of GDAL? The latest
> Windows binaries can be obtained through the OSGeo4W installer.
>
> In any case, I couldn't find any reference to DNC in the OGDI library,
> which is used by OGR to read VPF files.

OGDI should be able to read DNC files. See
http://osdir.com/ml/mapserver-users-gis/2006-01/msg00235.html

But that particular dataset might trigger bugs in the OGDI VPF driver.

>
> On Tue, Apr 10, 2012 at 5:22 PM, Andreas Oxenstierna <ao@t-kartor.se> wrote:
>
> > I cannot make OGR work with VPF DNC data.
> > ogrinfo and ogr2ogr crashes when trying to read data from any level inside
> > the VPF structure. DHT and LAT files do exist.
> > OGR does work for standard VMAP0 and VMAP1 data.
> > Is this a known limitation?
> > Does DNC require some special syntax?
> > I have used e.g. ogrinfo gltp:/vrf/C:\xxx and ogrinfo gltp:/vrf/C:/xxx
> >
> > Tested version:
> > 1.7.0b2 as included in FWTools 2.4.7 on Windows
> >
> > I noted that only FME seems to be able to always correctly read the DNC
> > data we have available. For example vpfview, nimamuse and ArcGIS do have
> > various issues.
> >
> > Best Regards
> >
> > --
> > Andreas Oxenstierna
> > T-Kartan Produkt AB
> > mobile: +46 733 206831
> > mailto: ao@t-kartor.se
> > http://www.t-kartor.com
> >
> > ______________________________**_________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> >
>
http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
> >
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>


From jluis at ualg.pt  Tue Apr 10 12:08:42 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Apr 10 11:10:55 2012
Subject: [gdal-dev] OpenJpegDataset IReadBlock question
In-Reply-To: <1334063694.38837.YahooMailClassic@web161005.mail.bf1.yahoo.com>
References: <1334063694.38837.YahooMailClassic@web161005.mail.bf1.yahoo.com>
Message-ID: <4F845B0A.50908@ualg.pt>

On 10-04-2012 13:14, Robert Zermeno wrote:
> Ladies and Gents,
>
> I have yet to properly configure GDAL to compile with a repository 
> OpenJpeg V2, but I wanted to see how GDAL uses openjpeg tile request.  
> I created my own project and modified IReadBlock() to be standalone to 
> view a tile request.
>

This is probably not of much help because I did nothing special to build 
GDAL with OpenJpeg V2 on Windows using VS2010. I compiled OpenJpeg with 
the help of the CMake scripts and than linked as explained on nmake.opt.
I did not do any particular testing, but for example running with this 
test file looks fine

C:\programs\GDALtrunk\gdalautotest-1.8.0\gdrivers\data>gdalinfo byte.jp2
Driver: JP2OpenJPEG/JPEG-2000 driver based on OpenJPEG library
Files: byte.jp2
Size is 100, 100
Coordinate System is:
PROJCS["NAD27 / UTM zone 11N",
...

Joaquim

>
> I am using a sample data file provided by openjpeg data folder named 
> p1_04.j2k.  How is the data retrieved from opj_decode_tile_data() is 
> being stored in the buffer?  To access pixel 0, is it just buffer[0] 
> or is there another way?
> For some reason, my request for Tile (0,0) of length 128x128 returns 
> an image that looks masked.  The image is mostly black and white with 
> no depth of shading (i.e. missing information).
> This image also uses 12 bits-per-pixel which I do not see where GDAL 
> truncates the image data down to 8 bits-per-pixel.  Does GDAL return 
> the raw 12 bits-per-pixel forcing the user to truncate the data 
> properly for every pixel or is it handled by GDAL (If so, where)?
>
> I hope to figure out why GDAL does not link properly to openjpeg V2 
> for others use this option again.  I hope someone can provide me the 
> answers to the questions I have asked.
>
> Thanks,
>
> John
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120410/67c7d8a0/attachment.html
From kmckelvey at lizardtech.com  Tue Apr 10 12:06:53 2012
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Tue Apr 10 12:08:43 2012
Subject: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue
In-Reply-To: <4F84104B.7030109@afrispatial.co.za>
References: <4F7B66A7.1010907@afrispatial.co.za>
	<201204032331.05641.even.rouault@mines-paris.org>
	<4F84104B.7030109@afrispatial.co.za>
Message-ID: <C55473998E248B4DAEC5342D698DFE8501295D011A@sea-srv-mail.lizardtech.com>

The undefined references you are seeing with MrSID SDK v7 should not be getting compiled for v7, e.g.:

#if defined(LTI_SDK_MAJOR) && LTI_SDK_MAJOR >= 8
    lt_uint8 gen;
    bool raster;
    LT_STATUS eStat =
        MrSIDImageReaderInterface::getMrSIDGeneration(poOpenInfo->pabyHeader, gen, raster);
    if (!LT_SUCCESS(eStat) || !raster)
       return FALSE;
#endif

It seems like you are linking against MrSID SDK v7 after having compiled against MrSID SDK v8?  Make sure you are rebuilding the MrSID driver(s) after reconfiguring for v7.

Re. problem finding the .so w/ MrSID SDK v8.5 let me spin up a build and see if I can repro.

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Gavin Fleming
Sent: mardi 10 avril 2012 05:50
To: gdal-dev
Subject: Re: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue

This worked on one Ubuntu 11.10 box but not on another (where I really need it to work). I'd be grateful for any help:

--with MrSID SDK 7:

./configure --with-geotiff=internal
--with-mrsid=/usr/local/Geo_DSDK-7.0.0.2167 --with-threads --with-python

/bin/bash /home/gavin/src/gdal/libtool --mode=link    --tag=LD    g++ 
gdalinfo.lo  /home/gavin/src/gdal/libgdal.la -o gdalinfo
libtool: link: ignoring unknown tag LD
libtool: link: g++ .libs/gdalinfo.o -o .libs/gdalinfo /home/gavin/src/gdal/.libs/libgdal.so -L/usr/lib -L/usr/lib/x86_64-linux-gnu -L/usr/local/Geo_DSDK-7.0.0.2167/3rd-party/lib/Release
-L/usr/local/Geo_DSDK-7.0.0.2167/lib/Release -lgeos_c /usr/lib/x86_64-linux-gnu/libsqlite3.so /usr/lib/libodbc.so /usr/lib/libodbcinst.so /usr/lib/x86_64-linux-gnu/libexpat.so -lxerces-c -lNCSEcw -lNCSEcwC -lNCSCnet -lNCSUtil /usr/lib/x86_64-linux-gnu/libjasper.so -lnetcdf /usr/lib/libhdf5.so /usr/lib/libmfhdfalt.so /usr/lib/libdfalt.so /usr/lib/libgif.so /usr/lib/x86_64-linux-gnu/libjpeg.so -lpng -lpq -lz -lm -lrt -ldl /usr/lib/x86_64-linux-gnu/libcurl-gnutls.so -lltidsdk -lpthread -llt_kakadu -pthread
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::MrSIDImageReaderInterface::getMrSIDGeneration(unsigned char const*, unsigned char&, bool&)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::LTISceneBuffer(LizardTech::LTIPixel const&, unsigned int, unsigned int, void**, unsigned int)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::LTISceneBuffer(LizardTech::LTIPixel const&, unsigned int, unsigned int, void**, unsigned int)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::J2KImageReader::initialize(LizardTech::LTIOStreamInf&,
bool, float, bool)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::getBandData(unsigned short) const'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/home/gavin/src/gdal/apps'
make: *** [apps-target] Error 2

----------------------------------------------------
--with MrSID SDK 8:

./configure
--with-mrsid=/usr/local/MrSID_DSDK-8.5.0.3422-linux.x86-64.gcc44/Raster_DSDK
--with-geotiff=internal --with-threads --with-python make make install ldconfig gdalinfo
gdalinfo: error while loading shared libraries: libltidsdk.so: cannot open shared object file: No such file or directory


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From kmckelvey at lizardtech.com  Tue Apr 10 14:47:16 2012
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Tue Apr 10 14:47:52 2012
Subject: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue
In-Reply-To: <C55473998E248B4DAEC5342D698DFE8501295D011A@sea-srv-mail.lizardtech.com>
References: <4F7B66A7.1010907@afrispatial.co.za>
	<201204032331.05641.even.rouault@mines-paris.org>
	<4F84104B.7030109@afrispatial.co.za>
	<C55473998E248B4DAEC5342D698DFE8501295D011A@sea-srv-mail.lizardtech.com>
Message-ID: <C55473998E248B4DAEC5342D698DFE8501295D0166@sea-srv-mail.lizardtech.com>

Gavin,

I was confused by the formatting of your output snippet.  It looks to me like your MrSID SDK v8 build succeeded, however the "make install" does not actually install the mrsid library.  Should just be a matter of copying libltidsdk.so into your gdal/lib directory and you are good to go.  Or if not, post more details and I'm happy to take a look.

Cheers,

Kirk.

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Kirk McKelvey
Sent: mardi 10 avril 2012 11:07
To: Gavin Fleming; gdal-dev
Subject: RE: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue

The undefined references you are seeing with MrSID SDK v7 should not be getting compiled for v7, e.g.:

#if defined(LTI_SDK_MAJOR) && LTI_SDK_MAJOR >= 8
    lt_uint8 gen;
    bool raster;
    LT_STATUS eStat =
        MrSIDImageReaderInterface::getMrSIDGeneration(poOpenInfo->pabyHeader, gen, raster);
    if (!LT_SUCCESS(eStat) || !raster)
       return FALSE;
#endif

It seems like you are linking against MrSID SDK v7 after having compiled against MrSID SDK v8?  Make sure you are rebuilding the MrSID driver(s) after reconfiguring for v7.

Re. problem finding the .so w/ MrSID SDK v8.5 let me spin up a build and see if I can repro.

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Gavin Fleming
Sent: mardi 10 avril 2012 05:50
To: gdal-dev
Subject: Re: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue

This worked on one Ubuntu 11.10 box but not on another (where I really need it to work). I'd be grateful for any help:

--with MrSID SDK 7:

./configure --with-geotiff=internal
--with-mrsid=/usr/local/Geo_DSDK-7.0.0.2167 --with-threads --with-python

/bin/bash /home/gavin/src/gdal/libtool --mode=link    --tag=LD    g++ 
gdalinfo.lo  /home/gavin/src/gdal/libgdal.la -o gdalinfo
libtool: link: ignoring unknown tag LD
libtool: link: g++ .libs/gdalinfo.o -o .libs/gdalinfo /home/gavin/src/gdal/.libs/libgdal.so -L/usr/lib -L/usr/lib/x86_64-linux-gnu -L/usr/local/Geo_DSDK-7.0.0.2167/3rd-party/lib/Release
-L/usr/local/Geo_DSDK-7.0.0.2167/lib/Release -lgeos_c /usr/lib/x86_64-linux-gnu/libsqlite3.so /usr/lib/libodbc.so /usr/lib/libodbcinst.so /usr/lib/x86_64-linux-gnu/libexpat.so -lxerces-c -lNCSEcw -lNCSEcwC -lNCSCnet -lNCSUtil /usr/lib/x86_64-linux-gnu/libjasper.so -lnetcdf /usr/lib/libhdf5.so /usr/lib/libmfhdfalt.so /usr/lib/libdfalt.so /usr/lib/libgif.so /usr/lib/x86_64-linux-gnu/libjpeg.so -lpng -lpq -lz -lm -lrt -ldl /usr/lib/x86_64-linux-gnu/libcurl-gnutls.so -lltidsdk -lpthread -llt_kakadu -pthread
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::MrSIDImageReaderInterface::getMrSIDGeneration(unsigned char const*, unsigned char&, bool&)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::LTISceneBuffer(LizardTech::LTIPixel const&, unsigned int, unsigned int, void**, unsigned int)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::LTISceneBuffer(LizardTech::LTIPixel const&, unsigned int, unsigned int, void**, unsigned int)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::J2KImageReader::initialize(LizardTech::LTIOStreamInf&,
bool, float, bool)'
/home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::getBandData(unsigned short) const'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/home/gavin/src/gdal/apps'
make: *** [apps-target] Error 2

----------------------------------------------------
--with MrSID SDK 8:

./configure
--with-mrsid=/usr/local/MrSID_DSDK-8.5.0.3422-linux.x86-64.gcc44/Raster_DSDK
--with-geotiff=internal --with-threads --with-python make make install ldconfig gdalinfo
gdalinfo: error while loading shared libraries: libltidsdk.so: cannot open shared object file: No such file or directory


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ivan.lucena at pmldnet.com  Tue Apr 10 15:50:39 2012
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Apr 10 15:51:12 2012
Subject: [gdal-dev] Problem with GDAL data folder in 1.9
Message-ID: <20120410195039.10847.qmail@s466.sureserver.com>

Hi There,

I am getting some weird results from a simple geotiff file and it seems to be a problem with the data folder.

If I run gdalinfo using GDAL 1.9 or 1.8 with the data folder installed from 1.8 the WKT comes with no EPSG Authority code:

D:\> set GDAL_DATA=D:\GDAL-1.9\data
D:\> gdalinfo sf1.gtif
PROJCS["NAD_1983_StatePlane_California_III_FIPS_0403",
    GEOGCS["GCS_North_American_1983",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS_1980",6378137,298.257222101]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.0174532925199432955]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["False_Easting",2000000],
    PARAMETER["False_Northing",500000],
    PARAMETER["Central_Meridian",-120.5],
    PARAMETER["Standard_Parallel_1",37.06666666666667],
    PARAMETER["Standard_Parallel_2",38.43333333333333],
    PARAMETER["Latitude_Of_Origin",36.5],
    UNIT["Meter",1]]

Even tough listgeo shows:

PCS = 26943 (NAD83 / California zone 3)
Projection = 10433 (SPCS83 California zone 3 (meters))
Projection Method: CT_LambertConfConic_2SP
   ProjFalseOriginLatGeoKey: 36.500000 ( 36d30' 0.00"N)
   ProjFalseOriginLongGeoKey: -120.500000 (120d30' 0.00"W)
   ProjStdParallel1GeoKey: 38.433333 ( 38d26' 0.00"N)
   ProjStdParallel2GeoKey: 37.066667 ( 37d 4' 0.00"N)
   ProjFalseEastingGeoKey: 2000000.000000 m
   ProjFalseNorthingGeoKey: 500000.000000 m
GCS: 4269/NAD83
Datum: 6269/North American Datum 1983
Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
Prime Meridian: 8901/Greenwich (0.000000/  0d 0' 0.00"E)
Projection Linear Units: 9001/metre (1.000000m)

But if I use gdalinfo 1.8 or 1.9 with the data folder from 1.8 the WKT appears to be better.

D:\> set GDAL_DATA=D:\GDAL-1.8\data
D:\> gdalinfo sf1.gtif
PROJCS["NAD83 / California zone 3",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",38.43333333333333],
    PARAMETER["standard_parallel_2",37.06666666666667],
    PARAMETER["latitude_of_origin",36.5],
    PARAMETER["central_meridian",-120.5],
    PARAMETER["false_easting",2000000],
    PARAMETER["false_northing",500000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26943"]]

The authority code are correct and standard_parallel_1, standard_parallel_2 are identical to listgeo information.

I got this files from the SVN branch 1.8 and 1.9 and I compiled and install it myself but I also tried that same steps with the OSGeo4W environment and got the same results. 

Does it means that there is something wrong with the data folder in 1.9 or is that part of a new approach of dealing with that particular kind of projection?

Regards,

Ivan



From etourigny.dev at gmail.com  Tue Apr 10 16:04:33 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Apr 10 16:05:10 2012
Subject: [gdal-dev] Problem with GDAL data folder in 1.9
In-Reply-To: <20120410195039.10847.qmail@s466.sureserver.com>
References: <20120410195039.10847.qmail@s466.sureserver.com>
Message-ID: <CA+TxYvMzGPLdSF_wCTE3FDo2AD13Q1=c1smg-9_SguRK27WN9g@mail.gmail.com>

Your email is slightly contradictory, you say you use data from 1.8 in
both tests.

you definitely should not be mixing gdal version with associated data.
You chould be getting correct results when not mixing them, is that
the case?

Can you try using 'gdalsrsinfo EPSG:26943' with gdal 1.9 and
associated data dir?

Here a straight install from ubuntugis reveals a correct WKT:
gdalsrsinfo EPSG:26943

PROJ.4 : '+proj=lcc +lat_1=38.43333333333333 +lat_2=37.06666666666667
+lat_0=36.5 +lon_0=-120.5 +x_0=2000000 +y_0=500000 +ellps=GRS80
+towgs84=0,0,0,0,0,0,0 +units=m +no_defs '

OGC WKT :
PROJCS["NAD83 / California zone 3",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",38.43333333333333],
    PARAMETER["standard_parallel_2",37.06666666666667],
    PARAMETER["latitude_of_origin",36.5],
    PARAMETER["central_meridian",-120.5],
    PARAMETER["false_easting",2000000],
    PARAMETER["false_northing",500000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["X",EAST],
    AXIS["Y",NORTH],
    AUTHORITY["EPSG","26943"]]




On Tue, Apr 10, 2012 at 4:50 PM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
> Hi There,
>
> I am getting some weird results from a simple geotiff file and it seems to be a problem with the data folder.
>
> If I run gdalinfo using GDAL 1.9 or 1.8 with the data folder installed from 1.8 the WKT comes with no EPSG Authority code:
>
> D:\> set GDAL_DATA=D:\GDAL-1.9\data
> D:\> gdalinfo sf1.gtif
> PROJCS["NAD_1983_StatePlane_California_III_FIPS_0403",
> ? ?GEOGCS["GCS_North_American_1983",
> ? ? ? ?DATUM["North_American_Datum_1983",
> ? ? ? ? ? ?SPHEROID["GRS_1980",6378137,298.257222101]],
> ? ? ? ?PRIMEM["Greenwich",0],
> ? ? ? ?UNIT["Degree",0.0174532925199432955]],
> ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
> ? ?PARAMETER["False_Easting",2000000],
> ? ?PARAMETER["False_Northing",500000],
> ? ?PARAMETER["Central_Meridian",-120.5],
> ? ?PARAMETER["Standard_Parallel_1",37.06666666666667],
> ? ?PARAMETER["Standard_Parallel_2",38.43333333333333],
> ? ?PARAMETER["Latitude_Of_Origin",36.5],
> ? ?UNIT["Meter",1]]
>
> Even tough listgeo shows:
>
> PCS = 26943 (NAD83 / California zone 3)
> Projection = 10433 (SPCS83 California zone 3 (meters))
> Projection Method: CT_LambertConfConic_2SP
> ? ProjFalseOriginLatGeoKey: 36.500000 ( 36d30' 0.00"N)
> ? ProjFalseOriginLongGeoKey: -120.500000 (120d30' 0.00"W)
> ? ProjStdParallel1GeoKey: 38.433333 ( 38d26' 0.00"N)
> ? ProjStdParallel2GeoKey: 37.066667 ( 37d 4' 0.00"N)
> ? ProjFalseEastingGeoKey: 2000000.000000 m
> ? ProjFalseNorthingGeoKey: 500000.000000 m
> GCS: 4269/NAD83
> Datum: 6269/North American Datum 1983
> Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
> Prime Meridian: 8901/Greenwich (0.000000/ ?0d 0' 0.00"E)
> Projection Linear Units: 9001/metre (1.000000m)
>
> But if I use gdalinfo 1.8 or 1.9 with the data folder from 1.8 the WKT appears to be better.
>
> D:\> set GDAL_DATA=D:\GDAL-1.8\data
> D:\> gdalinfo sf1.gtif
> PROJCS["NAD83 / California zone 3",
> ? ?GEOGCS["NAD83",
> ? ? ? ?DATUM["North_American_Datum_1983",
> ? ? ? ? ? ?SPHEROID["GRS 1980",6378137,298.2572221010002,
> ? ? ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
> ? ? ? ? ? ?AUTHORITY["EPSG","6269"]],
> ? ? ? ?PRIMEM["Greenwich",0],
> ? ? ? ?UNIT["degree",0.0174532925199433],
> ? ? ? ?AUTHORITY["EPSG","4269"]],
> ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
> ? ?PARAMETER["standard_parallel_1",38.43333333333333],
> ? ?PARAMETER["standard_parallel_2",37.06666666666667],
> ? ?PARAMETER["latitude_of_origin",36.5],
> ? ?PARAMETER["central_meridian",-120.5],
> ? ?PARAMETER["false_easting",2000000],
> ? ?PARAMETER["false_northing",500000],
> ? ?UNIT["metre",1,
> ? ? ? ?AUTHORITY["EPSG","9001"]],
> ? ?AUTHORITY["EPSG","26943"]]
>
> The authority code are correct and standard_parallel_1, standard_parallel_2 are identical to listgeo information.
>
> I got this files from the SVN branch 1.8 and 1.9 and I compiled and install it myself but I also tried that same steps with the OSGeo4W environment and got the same results.
>
> Does it means that there is something wrong with the data folder in 1.9 or is that part of a new approach of dealing with that particular kind of projection?
>
> Regards,
>
> Ivan
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Tue Apr 10 16:05:50 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 10 16:06:28 2012
Subject: [gdal-dev] Problem with GDAL data folder in 1.9
In-Reply-To: <20120410195039.10847.qmail@s466.sureserver.com>
References: <20120410195039.10847.qmail@s466.sureserver.com>
Message-ID: <CA+YzLBcN1EJTvkJnAY9mUTSyuD5-guHHHqX4-m0MpLtekSY7Zg@mail.gmail.com>

Ivan,

I don't see any *errors* in the new results. The order of the
standard parallels is arbitrary.  But it is odd how different the
PCS name is and that the EPSG authority code is not preserved.

I will note that gdalsrsinfo against 1.9 for EPSG:26943 reports:

... Ah Etienne already beat me to this.

In any event, I think you would need to file a ticket and provide a
sample file demonstrating the issue for us to track through.  It
could be something specific about the geotiff driver.

Best regards,



On Tue, Apr 10, 2012 at 12:50 PM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
> Hi There,
>
> I am getting some weird results from a simple geotiff file and it seems to be a problem with the data folder.
>
> If I run gdalinfo using GDAL 1.9 or 1.8 with the data folder installed from 1.8 the WKT comes with no EPSG Authority code:
>
> D:\> set GDAL_DATA=D:\GDAL-1.9\data
> D:\> gdalinfo sf1.gtif
> PROJCS["NAD_1983_StatePlane_California_III_FIPS_0403",
> ? ?GEOGCS["GCS_North_American_1983",
> ? ? ? ?DATUM["North_American_Datum_1983",
> ? ? ? ? ? ?SPHEROID["GRS_1980",6378137,298.257222101]],
> ? ? ? ?PRIMEM["Greenwich",0],
> ? ? ? ?UNIT["Degree",0.0174532925199432955]],
> ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
> ? ?PARAMETER["False_Easting",2000000],
> ? ?PARAMETER["False_Northing",500000],
> ? ?PARAMETER["Central_Meridian",-120.5],
> ? ?PARAMETER["Standard_Parallel_1",37.06666666666667],
> ? ?PARAMETER["Standard_Parallel_2",38.43333333333333],
> ? ?PARAMETER["Latitude_Of_Origin",36.5],
> ? ?UNIT["Meter",1]]
>
> Even tough listgeo shows:
>
> PCS = 26943 (NAD83 / California zone 3)
> Projection = 10433 (SPCS83 California zone 3 (meters))
> Projection Method: CT_LambertConfConic_2SP
> ? ProjFalseOriginLatGeoKey: 36.500000 ( 36d30' 0.00"N)
> ? ProjFalseOriginLongGeoKey: -120.500000 (120d30' 0.00"W)
> ? ProjStdParallel1GeoKey: 38.433333 ( 38d26' 0.00"N)
> ? ProjStdParallel2GeoKey: 37.066667 ( 37d 4' 0.00"N)
> ? ProjFalseEastingGeoKey: 2000000.000000 m
> ? ProjFalseNorthingGeoKey: 500000.000000 m
> GCS: 4269/NAD83
> Datum: 6269/North American Datum 1983
> Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
> Prime Meridian: 8901/Greenwich (0.000000/ ?0d 0' 0.00"E)
> Projection Linear Units: 9001/metre (1.000000m)
>
> But if I use gdalinfo 1.8 or 1.9 with the data folder from 1.8 the WKT appears to be better.
>
> D:\> set GDAL_DATA=D:\GDAL-1.8\data
> D:\> gdalinfo sf1.gtif
> PROJCS["NAD83 / California zone 3",
> ? ?GEOGCS["NAD83",
> ? ? ? ?DATUM["North_American_Datum_1983",
> ? ? ? ? ? ?SPHEROID["GRS 1980",6378137,298.2572221010002,
> ? ? ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
> ? ? ? ? ? ?AUTHORITY["EPSG","6269"]],
> ? ? ? ?PRIMEM["Greenwich",0],
> ? ? ? ?UNIT["degree",0.0174532925199433],
> ? ? ? ?AUTHORITY["EPSG","4269"]],
> ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
> ? ?PARAMETER["standard_parallel_1",38.43333333333333],
> ? ?PARAMETER["standard_parallel_2",37.06666666666667],
> ? ?PARAMETER["latitude_of_origin",36.5],
> ? ?PARAMETER["central_meridian",-120.5],
> ? ?PARAMETER["false_easting",2000000],
> ? ?PARAMETER["false_northing",500000],
> ? ?UNIT["metre",1,
> ? ? ? ?AUTHORITY["EPSG","9001"]],
> ? ?AUTHORITY["EPSG","26943"]]
>
> The authority code are correct and standard_parallel_1, standard_parallel_2 are identical to listgeo information.
>
> I got this files from the SVN branch 1.8 and 1.9 and I compiled and install it myself but I also tried that same steps with the OSGeo4W environment and got the same results.
>
> Does it means that there is something wrong with the data folder in 1.9 or is that part of a new approach of dealing with that particular kind of projection?
>
> Regards,
>
> Ivan
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From ivan.lucena at pmldnet.com  Tue Apr 10 16:41:35 2012
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Apr 10 16:41:40 2012
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUHJvYmxlbSB3aXRoIEdEQUwgZGF0YSBmb2xkZXIgaW4gMS45?=
In-Reply-To: <CA+TxYvMzGPLdSF_wCTE3FDo2AD13Q1=c1smg-9_SguRK27WN9g@mail.gmail.com>
References: <20120410195039.10847.qmail@s466.sureserver.com>
	<CA+TxYvMzGPLdSF_wCTE3FDo2AD13Q1=c1smg-9_SguRK27WN9g@mail.gmail.com>
Message-ID: <20120410204135.25113.qmail@s466.sureserver.com>

Hi Etienne,

OK, let's keep the focus on 1.9. I did what you said:

>  Can you try using 'gdalsrsinfo EPSG:26943' with gdal 1.9 and
>  associated data dir?

And I got the same result from gdalsrsinfo as you did (using only 1.9) but I still getting a different result from gdalinfo with a image that clearly has that same EPSG code as we could see by the listgeo.

Coordinate System is:
PROJCS["NAD_1983_StatePlane_California_III_FIPS_0403",
    GEOGCS["GCS_North_American_1983",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS_1980",6378137,298.257222101]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.0174532925199432955]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["False_Easting",2000000],
    PARAMETER["False_Northing",500000],
    PARAMETER["Central_Meridian",-120.5],
    PARAMETER["Standard_Parallel_1",37.06666666666667],
    PARAMETER["Standard_Parallel_2",38.43333333333333],
    PARAMETER["Latitude_Of_Origin",36.5],
    UNIT["Meter",1]]

PCS = 26943 (NAD83 / California zone 3)
Projection = 10433 (SPCS83 California zone 3 (meters))
Projection Method: CT_LambertConfConic_2SP
   ProjFalseOriginLatGeoKey: 36.500000 ( 36d30' 0.00"N)
   ProjFalseOriginLongGeoKey: -120.500000 (120d30' 0.00"W)
   ProjStdParallel1GeoKey: 38.433333 ( 38d26' 0.00"N)
   ProjStdParallel2GeoKey: 37.066667 ( 37d 4' 0.00"N)
   ProjFalseEastingGeoKey: 2000000.000000 m
   ProjFalseNorthingGeoKey: 500000.000000 m
GCS: 4269/NAD83
Datum: 6269/North American Datum 1983
Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
Prime Meridian: 8901/Greenwich (0.000000/  0d 0' 0.00"E)
Projection Linear Units: 9001/metre (1.000000m)

It seems to me that the GTIFF driver tries to interprets the WKT instead of just pass it on. Is that right? It doesn't seems to be doing it right.

Thanks,

Ivan




From warmerdam at pobox.com  Tue Apr 10 16:53:34 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 10 16:54:21 2012
Subject: [gdal-dev] Problem with GDAL data folder in 1.9
In-Reply-To: <20120410204135.25113.qmail@s466.sureserver.com>
References: <20120410195039.10847.qmail@s466.sureserver.com>
	<CA+TxYvMzGPLdSF_wCTE3FDo2AD13Q1=c1smg-9_SguRK27WN9g@mail.gmail.com>
	<20120410204135.25113.qmail@s466.sureserver.com>
Message-ID: <CA+YzLBdHjc1FJ-4uc4Obs13y7DJJcZtd0SQu_8=-nfg9EYiJNA@mail.gmail.com>

On Tue, Apr 10, 2012 at 1:41 PM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
> It seems to me that the GTIFF driver tries to interprets the WKT instead of just pass it on. Is that right? It doesn't seems to be doing it right.

Ivan,

When the GeoTIFF file contains parameters in addition to the PCS code,
it is likely that the coordinate system is being composed from the
parameters instead of being derived from the PCS code.  Basically the
geotiff file is overspecified and the driver makes a choice not to
trust the PCS code.  For instance, sometimes folks change the linear
units and trusting the PCS code would lead to wrong results.

The final coordinate system seems correct if a bit different in
details (like PCS name) from what you might expect.

Ideally we would compare all the parameters to the ones from the PCS
and if everything matches we would actually use the PCS code and
attach it as an authority code.   So if you file a ticket on this issue that
would be the features I'd hope to implement.  That might be a bit hard
though.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From ivan.lucena at pmldnet.com  Tue Apr 10 16:59:59 2012
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Apr 10 17:00:16 2012
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUHJvYmxlbSB3aXRoIEdEQUwgZGF0YSBmb2xkZXIgaW4gMS45?=
In-Reply-To: <CA+YzLBcN1EJTvkJnAY9mUTSyuD5-guHHHqX4-m0MpLtekSY7Zg@mail.gmail.com>
References: <20120410195039.10847.qmail@s466.sureserver.com>
	<CA+YzLBcN1EJTvkJnAY9mUTSyuD5-guHHHqX4-m0MpLtekSY7Zg@mail.gmail.com>
Message-ID: <20120410205959.9847.qmail@s466.sureserver.com>

Hi Frank,

Yes, we can say that there is nothing wrong with the WKT, but the EPSG notation is quite important for me and that is missing.  And yes, we could say that there is probably something wrong with the GTIFF driver. But - Don't let Ethiene knows that I did again ;) - I ran the 1.9 gdalinfo with the 1.8 GDAL_DATA folder and the problem diapers. The WKT is complete. Weird right?

Anyway, I will prepare a small sample of that file and attach it to a ticket.

Thanks,

Ivan


>  -------Original Message-------
>  From: Frank Warmerdam <warmerdam@pobox.com>
>  To: Ivan Lucena <ivan.lucena@pmldnet.com>
>  Cc: gdal-dev@lists.osgeo.org <gdal-dev@lists.osgeo.org>
>  Subject: Re: [gdal-dev] Problem with GDAL data folder in 1.9
>  Sent: Apr 10 '12 15:05
>  
>  Ivan,
>  
>  I don't see any *errors* in the new results. The order of the
>  standard parallels is arbitrary.??But it is odd how different the
>  PCS name is and that the EPSG authority code is not preserved.
>  
>  I will note that gdalsrsinfo against 1.9 for EPSG:26943 reports:
>  
>  ... Ah Etienne already beat me to this.
>  
>  In any event, I think you would need to file a ticket and provide a
>  sample file demonstrating the issue for us to track through.??It
>  could be something specific about the geotiff driver.
>  
>  Best regards,
>  
>  
>  
>  On Tue, Apr 10, 2012 at 12:50 PM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
>  > Hi There,
>  >
>  > I am getting some weird results from a simple geotiff file and it seems to be a problem with the data folder.
>  >
>  > If I run gdalinfo using GDAL 1.9 or 1.8 with the data folder installed from 1.8 the WKT comes with no EPSG Authority code:
>  >
>  > D:\> set GDAL_DATA=D:\GDAL-1.9\data
>  > D:\> gdalinfo sf1.gtif
>  > PROJCS["NAD_1983_StatePlane_California_III_FIPS_0403",
>  > ? ?GEOGCS["GCS_North_American_1983",
>  > ? ? ? ?DATUM["North_American_Datum_1983",
>  > ? ? ? ? ? ?SPHEROID["GRS_1980",6378137,298.257222101]],
>  > ? ? ? ?PRIMEM["Greenwich",0],
>  > ? ? ? ?UNIT["Degree",0.0174532925199432955]],
>  > ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
>  > ? ?PARAMETER["False_Easting",2000000],
>  > ? ?PARAMETER["False_Northing",500000],
>  > ? ?PARAMETER["Central_Meridian",-120.5],
>  > ? ?PARAMETER["Standard_Parallel_1",37.06666666666667],
>  > ? ?PARAMETER["Standard_Parallel_2",38.43333333333333],
>  > ? ?PARAMETER["Latitude_Of_Origin",36.5],
>  > ? ?UNIT["Meter",1]]
>  >
>  > Even tough listgeo shows:
>  >
>  > PCS = 26943 (NAD83 / California zone 3)
>  > Projection = 10433 (SPCS83 California zone 3 (meters))
>  > Projection Method: CT_LambertConfConic_2SP
>  > ? ProjFalseOriginLatGeoKey: 36.500000 ( 36d30' 0.00"N)
>  > ? ProjFalseOriginLongGeoKey: -120.500000 (120d30' 0.00"W)
>  > ? ProjStdParallel1GeoKey: 38.433333 ( 38d26' 0.00"N)
>  > ? ProjStdParallel2GeoKey: 37.066667 ( 37d 4' 0.00"N)
>  > ? ProjFalseEastingGeoKey: 2000000.000000 m
>  > ? ProjFalseNorthingGeoKey: 500000.000000 m
>  > GCS: 4269/NAD83
>  > Datum: 6269/North American Datum 1983
>  > Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
>  > Prime Meridian: 8901/Greenwich (0.000000/ ?0d 0' 0.00"E)
>  > Projection Linear Units: 9001/metre (1.000000m)
>  >
>  > But if I use gdalinfo 1.8 or 1.9 with the data folder from 1.8 the WKT appears to be better.
>  >
>  > D:\> set GDAL_DATA=D:\GDAL-1.8\data
>  > D:\> gdalinfo sf1.gtif
>  > PROJCS["NAD83 / California zone 3",
>  > ? ?GEOGCS["NAD83",
>  > ? ? ? ?DATUM["North_American_Datum_1983",
>  > ? ? ? ? ? ?SPHEROID["GRS 1980",6378137,298.2572221010002,
>  > ? ? ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
>  > ? ? ? ? ? ?AUTHORITY["EPSG","6269"]],
>  > ? ? ? ?PRIMEM["Greenwich",0],
>  > ? ? ? ?UNIT["degree",0.0174532925199433],
>  > ? ? ? ?AUTHORITY["EPSG","4269"]],
>  > ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
>  > ? ?PARAMETER["standard_parallel_1",38.43333333333333],
>  > ? ?PARAMETER["standard_parallel_2",37.06666666666667],
>  > ? ?PARAMETER["latitude_of_origin",36.5],
>  > ? ?PARAMETER["central_meridian",-120.5],
>  > ? ?PARAMETER["false_easting",2000000],
>  > ? ?PARAMETER["false_northing",500000],
>  > ? ?UNIT["metre",1,
>  > ? ? ? ?AUTHORITY["EPSG","9001"]],
>  > ? ?AUTHORITY["EPSG","26943"]]
>  >
>  > The authority code are correct and standard_parallel_1, standard_parallel_2 are identical to listgeo information.
>  >
>  > I got this files from the SVN branch 1.8 and 1.9 and I compiled and install it myself but I also tried that same steps with the OSGeo4W environment and got the same results.
>  >
>  > Does it means that there is something wrong with the data folder in 1.9 or is that part of a new approach of dealing with that particular kind of projection?
>  >
>  > Regards,
>  >
>  > Ivan
>  >
>  >
>  >
>  > _______________________________________________
>  > gdal-dev mailing list
>  > gdal-dev@lists.osgeo.org
>  > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
>  
>  
>  --
>  ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush? ? | Geospatial Software Developer
>  
From etourigny.dev at gmail.com  Tue Apr 10 17:00:09 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Apr 10 17:00:28 2012
Subject: [gdal-dev] Problem with GDAL data folder in 1.9
In-Reply-To: <20120410204135.25113.qmail@s466.sureserver.com>
References: <20120410195039.10847.qmail@s466.sureserver.com>
	<CA+TxYvMzGPLdSF_wCTE3FDo2AD13Q1=c1smg-9_SguRK27WN9g@mail.gmail.com>
	<20120410204135.25113.qmail@s466.sureserver.com>
Message-ID: <CA+TxYvPcAChsiVx8_vHkGZJTrSfkxJkC2rQrPRQx7mqR_F=HRg@mail.gmail.com>

I suspect you get "expected" results if you force the crs like this:

gdal_translate -a_srs EPSG:26943 in.tif out.tif
gdalinfo out.tif

On Tue, Apr 10, 2012 at 5:41 PM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
> Hi Etienne,
>
> OK, let's keep the focus on 1.9. I did what you said:
>
>> ?Can you try using 'gdalsrsinfo EPSG:26943' with gdal 1.9 and
>> ?associated data dir?
>
> And I got the same result from gdalsrsinfo as you did (using only 1.9) but I still getting a different result from gdalinfo with a image that clearly has that same EPSG code as we could see by the listgeo.
>
> Coordinate System is:
> PROJCS["NAD_1983_StatePlane_California_III_FIPS_0403",
> ? ?GEOGCS["GCS_North_American_1983",
> ? ? ? ?DATUM["North_American_Datum_1983",
> ? ? ? ? ? ?SPHEROID["GRS_1980",6378137,298.257222101]],
> ? ? ? ?PRIMEM["Greenwich",0],
> ? ? ? ?UNIT["Degree",0.0174532925199432955]],
> ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
> ? ?PARAMETER["False_Easting",2000000],
> ? ?PARAMETER["False_Northing",500000],
> ? ?PARAMETER["Central_Meridian",-120.5],
> ? ?PARAMETER["Standard_Parallel_1",37.06666666666667],
> ? ?PARAMETER["Standard_Parallel_2",38.43333333333333],
> ? ?PARAMETER["Latitude_Of_Origin",36.5],
> ? ?UNIT["Meter",1]]
>
> PCS = 26943 (NAD83 / California zone 3)
> Projection = 10433 (SPCS83 California zone 3 (meters))
> Projection Method: CT_LambertConfConic_2SP
> ? ProjFalseOriginLatGeoKey: 36.500000 ( 36d30' 0.00"N)
> ? ProjFalseOriginLongGeoKey: -120.500000 (120d30' 0.00"W)
> ? ProjStdParallel1GeoKey: 38.433333 ( 38d26' 0.00"N)
> ? ProjStdParallel2GeoKey: 37.066667 ( 37d 4' 0.00"N)
> ? ProjFalseEastingGeoKey: 2000000.000000 m
> ? ProjFalseNorthingGeoKey: 500000.000000 m
> GCS: 4269/NAD83
> Datum: 6269/North American Datum 1983
> Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
> Prime Meridian: 8901/Greenwich (0.000000/ ?0d 0' 0.00"E)
> Projection Linear Units: 9001/metre (1.000000m)
>
> It seems to me that the GTIFF driver tries to interprets the WKT instead of just pass it on. Is that right? It doesn't seems to be doing it right.
>
> Thanks,
>
> Ivan
>
>
>
>
From ivan.lucena at pmldnet.com  Tue Apr 10 17:05:17 2012
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Apr 10 17:05:46 2012
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUHJvYmxlbSB3aXRoIEdEQUwgZGF0YSBmb2xkZXIgaW4gMS45?=
In-Reply-To: <CA+TxYvPcAChsiVx8_vHkGZJTrSfkxJkC2rQrPRQx7mqR_F=HRg@mail.gmail.com>
References: <20120410195039.10847.qmail@s466.sureserver.com>
	<CA+TxYvMzGPLdSF_wCTE3FDo2AD13Q1=c1smg-9_SguRK27WN9g@mail.gmail.com>
	<20120410204135.25113.qmail@s466.sureserver.com>
	<CA+TxYvPcAChsiVx8_vHkGZJTrSfkxJkC2rQrPRQx7mqR_F=HRg@mail.gmail.com>
Message-ID: <20120410210517.26171.qmail@s466.sureserver.com>

That was my first suggestion to the guy who call me about that problem. He tried and then he sent me the file and I tried and that did not work. I was really surprised.

>  -------Original Message-------
>  From: Etienne Tourigny <etourigny.dev@gmail.com>
>  To: Ivan Lucena <ivan.lucena@pmldnet.com>
>  Cc: gdal-dev@lists.osgeo.org <gdal-dev@lists.osgeo.org>
>  Subject: Re: [gdal-dev] Problem with GDAL data folder in 1.9
>  Sent: Apr 10 '12 16:00
>  
>  I suspect you get "expected" results if you force the crs like this:
>  
>  gdal_translate -a_srs EPSG:26943 in.tif out.tif
>  gdalinfo out.tif
>  
>  On Tue, Apr 10, 2012 at 5:41 PM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
>  > Hi Etienne,
>  >
>  > OK, let's keep the focus on 1.9. I did what you said:
>  >
>  >> ?Can you try using 'gdalsrsinfo EPSG:26943' with gdal 1.9 and
>  >> ?associated data dir?
>  >
>  > And I got the same result from gdalsrsinfo as you did (using only 1.9) but I still getting a different result from gdalinfo with a image that clearly has that same EPSG code as we could see by the listgeo.
>  >
>  > Coordinate System is:
>  > PROJCS["NAD_1983_StatePlane_California_III_FIPS_0403",
>  > ? ?GEOGCS["GCS_North_American_1983",
>  > ? ? ? ?DATUM["North_American_Datum_1983",
>  > ? ? ? ? ? ?SPHEROID["GRS_1980",6378137,298.257222101]],
>  > ? ? ? ?PRIMEM["Greenwich",0],
>  > ? ? ? ?UNIT["Degree",0.0174532925199432955]],
>  > ? ?PROJECTION["Lambert_Conformal_Conic_2SP"],
>  > ? ?PARAMETER["False_Easting",2000000],
>  > ? ?PARAMETER["False_Northing",500000],
>  > ? ?PARAMETER["Central_Meridian",-120.5],
>  > ? ?PARAMETER["Standard_Parallel_1",37.06666666666667],
>  > ? ?PARAMETER["Standard_Parallel_2",38.43333333333333],
>  > ? ?PARAMETER["Latitude_Of_Origin",36.5],
>  > ? ?UNIT["Meter",1]]
>  >
>  > PCS = 26943 (NAD83 / California zone 3)
>  > Projection = 10433 (SPCS83 California zone 3 (meters))
>  > Projection Method: CT_LambertConfConic_2SP
>  > ? ProjFalseOriginLatGeoKey: 36.500000 ( 36d30' 0.00"N)
>  > ? ProjFalseOriginLongGeoKey: -120.500000 (120d30' 0.00"W)
>  > ? ProjStdParallel1GeoKey: 38.433333 ( 38d26' 0.00"N)
>  > ? ProjStdParallel2GeoKey: 37.066667 ( 37d 4' 0.00"N)
>  > ? ProjFalseEastingGeoKey: 2000000.000000 m
>  > ? ProjFalseNorthingGeoKey: 500000.000000 m
>  > GCS: 4269/NAD83
>  > Datum: 6269/North American Datum 1983
>  > Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
>  > Prime Meridian: 8901/Greenwich (0.000000/ ?0d 0' 0.00"E)
>  > Projection Linear Units: 9001/metre (1.000000m)
>  >
>  > It seems to me that the GTIFF driver tries to interprets the WKT instead of just pass it on. Is that right? It doesn't seems to be doing it right.
>  >
>  > Thanks,
>  >
>  > Ivan
>  >
>  >
>  >
>  >
>  
From gavin at afrispatial.co.za  Tue Apr 10 17:08:59 2012
From: gavin at afrispatial.co.za (Gavin Fleming)
Date: Tue Apr 10 17:09:14 2012
Subject: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue
In-Reply-To: <C55473998E248B4DAEC5342D698DFE8501295D011A@sea-srv-mail.lizardtech.com>
References: <4F7B66A7.1010907@afrispatial.co.za>
	<201204032331.05641.even.rouault@mines-paris.org>
	<4F84104B.7030109@afrispatial.co.za>
	<C55473998E248B4DAEC5342D698DFE8501295D011A@sea-srv-mail.lizardtech.com>
Message-ID: <4F84A16B.5090802@afrispatial.co.za>

Thanks Kirk, that did the trick

On 10/04/2012 18:06, Kirk McKelvey wrote:
> The undefined references you are seeing with MrSID SDK v7 should not be getting compiled for v7, e.g.:
>
> #if defined(LTI_SDK_MAJOR)&&  LTI_SDK_MAJOR>= 8
>      lt_uint8 gen;
>      bool raster;
>      LT_STATUS eStat =
>          MrSIDImageReaderInterface::getMrSIDGeneration(poOpenInfo->pabyHeader, gen, raster);
>      if (!LT_SUCCESS(eStat) || !raster)
>         return FALSE;
> #endif
>
> It seems like you are linking against MrSID SDK v7 after having compiled against MrSID SDK v8?  Make sure you are rebuilding the MrSID driver(s) after reconfiguring for v7.
I did a make clean and then recompiled.
>
> Re. problem finding the .so w/ MrSID SDK v8.5 let me spin up a build and see if I can repro.

As per your next email it does seem that make install is not putting the 
.so in the right place with v8.5. But I haven't tested by copying it 
there manually as I'm running smoothly with v7.
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Gavin Fleming
> Sent: mardi 10 avril 2012 05:50
> To: gdal-dev
> Subject: Re: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue
>
> This worked on one Ubuntu 11.10 box but not on another (where I really need it to work). I'd be grateful for any help:
>
> --with MrSID SDK 7:
>
> ./configure --with-geotiff=internal
> --with-mrsid=/usr/local/Geo_DSDK-7.0.0.2167 --with-threads --with-python
>
> /bin/bash /home/gavin/src/gdal/libtool --mode=link    --tag=LD    g++
> gdalinfo.lo  /home/gavin/src/gdal/libgdal.la -o gdalinfo
> libtool: link: ignoring unknown tag LD
> libtool: link: g++ .libs/gdalinfo.o -o .libs/gdalinfo /home/gavin/src/gdal/.libs/libgdal.so -L/usr/lib -L/usr/lib/x86_64-linux-gnu -L/usr/local/Geo_DSDK-7.0.0.2167/3rd-party/lib/Release
> -L/usr/local/Geo_DSDK-7.0.0.2167/lib/Release -lgeos_c /usr/lib/x86_64-linux-gnu/libsqlite3.so /usr/lib/libodbc.so /usr/lib/libodbcinst.so /usr/lib/x86_64-linux-gnu/libexpat.so -lxerces-c -lNCSEcw -lNCSEcwC -lNCSCnet -lNCSUtil /usr/lib/x86_64-linux-gnu/libjasper.so -lnetcdf /usr/lib/libhdf5.so /usr/lib/libmfhdfalt.so /usr/lib/libdfalt.so /usr/lib/libgif.so /usr/lib/x86_64-linux-gnu/libjpeg.so -lpng -lpq -lz -lm -lrt -ldl /usr/lib/x86_64-linux-gnu/libcurl-gnutls.so -lltidsdk -lpthread -llt_kakadu -pthread
> /home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::MrSIDImageReaderInterface::getMrSIDGeneration(unsigned char const*, unsigned char&, bool&)'
> /home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::LTISceneBuffer(LizardTech::LTIPixel const&, unsigned int, unsigned int, void**, unsigned int)'
> /home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::LTISceneBuffer(LizardTech::LTIPixel const&, unsigned int, unsigned int, void**, unsigned int)'
> /home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::J2KImageReader::initialize(LizardTech::LTIOStreamInf&,
> bool, float, bool)'
> /home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::getBandData(unsigned short) const'
> collect2: ld returned 1 exit status
> make[1]: *** [gdalinfo] Error 1
> make[1]: Leaving directory `/home/gavin/src/gdal/apps'
> make: *** [apps-target] Error 2
>
> ----------------------------------------------------
> --with MrSID SDK 8:
>
> ./configure
> --with-mrsid=/usr/local/MrSID_DSDK-8.5.0.3422-linux.x86-64.gcc44/Raster_DSDK
> --with-geotiff=internal --with-threads --with-python make make install ldconfig gdalinfo
> gdalinfo: error while loading shared libraries: libltidsdk.so: cannot open shared object file: No such file or directory
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
regards

Gavin

Gavin Fleming
http://afrispatial.co.za
t: 0218620670
c: 0845965680
f: 0866164820

From kmckelvey at lizardtech.com  Tue Apr 10 17:09:28 2012
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Tue Apr 10 17:10:15 2012
Subject: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue
In-Reply-To: <4F84A16B.5090802@afrispatial.co.za>
References: <4F7B66A7.1010907@afrispatial.co.za>
	<201204032331.05641.even.rouault@mines-paris.org>
	<4F84104B.7030109@afrispatial.co.za>
	<C55473998E248B4DAEC5342D698DFE8501295D011A@sea-srv-mail.lizardtech.com>
	<4F84A16B.5090802@afrispatial.co.za>
Message-ID: <C55473998E248B4DAEC5342D698DFE8501295D0198@sea-srv-mail.lizardtech.com>

As far as I know none of the drivers install their dependent DLLs.  But I could be wrong.

Glad you are up and running.

-----Original Message-----
From: Gavin Fleming [mailto:gavin@afrispatial.co.za] 
Sent: mardi 10 avril 2012 16:09
To: Kirk McKelvey
Cc: gdal-dev
Subject: Re: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff issue

Thanks Kirk, that did the trick

On 10/04/2012 18:06, Kirk McKelvey wrote:
> The undefined references you are seeing with MrSID SDK v7 should not be getting compiled for v7, e.g.:
>
> #if defined(LTI_SDK_MAJOR)&&  LTI_SDK_MAJOR>= 8
>      lt_uint8 gen;
>      bool raster;
>      LT_STATUS eStat =
>          MrSIDImageReaderInterface::getMrSIDGeneration(poOpenInfo->pabyHeader, gen, raster);
>      if (!LT_SUCCESS(eStat) || !raster)
>         return FALSE;
> #endif
>
> It seems like you are linking against MrSID SDK v7 after having compiled against MrSID SDK v8?  Make sure you are rebuilding the MrSID driver(s) after reconfiguring for v7.
I did a make clean and then recompiled.
>
> Re. problem finding the .so w/ MrSID SDK v8.5 let me spin up a build and see if I can repro.

As per your next email it does seem that make install is not putting the .so in the right place with v8.5. But I haven't tested by copying it there manually as I'm running smoothly with v7.
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Gavin Fleming
> Sent: mardi 10 avril 2012 05:50
> To: gdal-dev
> Subject: Re: [gdal-dev] MrSID won't compile with GDAL 1.9 - libgeotiff 
> issue
>
> This worked on one Ubuntu 11.10 box but not on another (where I really need it to work). I'd be grateful for any help:
>
> --with MrSID SDK 7:
>
> ./configure --with-geotiff=internal
> --with-mrsid=/usr/local/Geo_DSDK-7.0.0.2167 --with-threads 
> --with-python
>
> /bin/bash /home/gavin/src/gdal/libtool --mode=link    --tag=LD    g++
> gdalinfo.lo  /home/gavin/src/gdal/libgdal.la -o gdalinfo
> libtool: link: ignoring unknown tag LD
> libtool: link: g++ .libs/gdalinfo.o -o .libs/gdalinfo 
> /home/gavin/src/gdal/.libs/libgdal.so -L/usr/lib 
> -L/usr/lib/x86_64-linux-gnu 
> -L/usr/local/Geo_DSDK-7.0.0.2167/3rd-party/lib/Release
> -L/usr/local/Geo_DSDK-7.0.0.2167/lib/Release -lgeos_c 
> /usr/lib/x86_64-linux-gnu/libsqlite3.so /usr/lib/libodbc.so 
> /usr/lib/libodbcinst.so /usr/lib/x86_64-linux-gnu/libexpat.so 
> -lxerces-c -lNCSEcw -lNCSEcwC -lNCSCnet -lNCSUtil 
> /usr/lib/x86_64-linux-gnu/libjasper.so -lnetcdf /usr/lib/libhdf5.so 
> /usr/lib/libmfhdfalt.so /usr/lib/libdfalt.so /usr/lib/libgif.so 
> /usr/lib/x86_64-linux-gnu/libjpeg.so -lpng -lpq -lz -lm -lrt -ldl 
> /usr/lib/x86_64-linux-gnu/libcurl-gnutls.so -lltidsdk -lpthread 
> -llt_kakadu -pthread
> /home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::MrSIDImageReaderInterface::getMrSIDGeneration(unsigned char const*, unsigned char&, bool&)'
> /home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::LTISceneBuffer(LizardTech::LTIPixel const&, unsigned int, unsigned int, void**, unsigned int)'
> /home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::LTISceneBuffer(LizardTech::LTIPixel const&, unsigned int, unsigned int, void**, unsigned int)'
> /home/gavin/src/gdal/.libs/libgdal.so: undefined reference to 
> `LizardTech::J2KImageReader::initialize(LizardTech::LTIOStreamInf&,
> bool, float, bool)'
> /home/gavin/src/gdal/.libs/libgdal.so: undefined reference to `LizardTech::LTISceneBuffer::getBandData(unsigned short) const'
> collect2: ld returned 1 exit status
> make[1]: *** [gdalinfo] Error 1
> make[1]: Leaving directory `/home/gavin/src/gdal/apps'
> make: *** [apps-target] Error 2
>
> ----------------------------------------------------
> --with MrSID SDK 8:
>
> ./configure
> --with-mrsid=/usr/local/MrSID_DSDK-8.5.0.3422-linux.x86-64.gcc44/Raste
> r_DSDK --with-geotiff=internal --with-threads --with-python make make 
> install ldconfig gdalinfo
> gdalinfo: error while loading shared libraries: libltidsdk.so: cannot 
> open shared object file: No such file or directory
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--
regards

Gavin

Gavin Fleming
http://afrispatial.co.za
t: 0218620670
c: 0845965680
f: 0866164820

From starsareblueandfaraway at gmail.com  Tue Apr 10 17:49:02 2012
From: starsareblueandfaraway at gmail.com (Roy Hyunjin Han)
Date: Tue Apr 10 17:49:30 2012
Subject: [gdal-dev] Are unicode field values supported in the Python
	bindings for GDAL?
Message-ID: <CABScDVsCdCCiYvxhW7UzWhrWo9XdUCDaFi3=pJf3sKQUZa4BEg@mail.gmail.com>

In GDAL 1.9.0 and Python 2.7.2,

    feature.SetField(0, u'xxx')

raises the following exception

    NotImplementedError: Wrong number of arguments for overloaded
function 'Feature_SetField'.
    Possible C/C++ prototypes are:
        SetField(OGRFeatureShadow *,int,char const *)
        SetField(OGRFeatureShadow *,char const *,char const *)
        SetField(OGRFeatureShadow *,int,int)
        SetField(OGRFeatureShadow *,char const *,int)
        SetField(OGRFeatureShadow *,int,double)
        SetField(OGRFeatureShadow *,char const *,double)
        SetField(OGRFeatureShadow *,int,int,int,int,int,int,int,int)
        SetField(OGRFeatureShadow *,char const *,int,int,int,int,int,int,int)

Rouault mentioned the same error.
http://lists.osgeo.org/pipermail/gdal-dev/2010-September/026156.html

Are unicode field values supported in the Python bindings for GDAL?
From ao at t-kartor.se  Wed Apr 11 02:56:00 2012
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Wed Apr 11 02:54:16 2012
Subject: [gdal-dev] OGR support for VPF DNC?
In-Reply-To: <CAMKgpOY2CxRoLEAD_a2F2Fc68T3pVCLrpTh9CWcb2stgGFuuRw@mail.gmail.com>
References: <4F841EF9.9010606@t-kartor.se>
	<CAMKgpOY2CxRoLEAD_a2F2Fc68T3pVCLrpTh9CWcb2stgGFuuRw@mail.gmail.com>
Message-ID: <4F852B00.6010608@t-kartor.se>

Chaitanya,

Same result with 1.8.0
With some effort we can test with 1.9, as we have not found any 
OGDI-compiled OGR for 1.9
Then also I assume we can insert debug-flags to maybe get more 
information. We have experimented with the Java bindings (jar) as we 
will integrate OGR with a Java servlet.

Best Regards

Andreas

> Andreas,
>
> Could you first test your data with the latest version of GDAL? The 
> latest Windows binaries can be obtained through the OSGeo4W installer.
>
> In any case, I couldn't find any reference to DNC in the OGDI library, 
> which is used by OGR to read VPF files.
>
> On Tue, Apr 10, 2012 at 5:22 PM, Andreas Oxenstierna <ao@t-kartor.se 
> <mailto:ao@t-kartor.se>> wrote:
>
>     I cannot make OGR work with VPF DNC data.
>     ogrinfo and ogr2ogr crashes when trying to read data from any
>     level inside the VPF structure. DHT and LAT files do exist.
>     OGR does work for standard VMAP0 and VMAP1 data.
>     Is this a known limitation?
>     Does DNC require some special syntax?
>     I have used e.g. ogrinfo gltp:/vrf/C:\xxx and ogrinfo gltp:/vrf/C:/xxx
>
>     Tested version:
>     1.7.0b2 as included in FWTools 2.4.7 on Windows
>
>     I noted that only FME seems to be able to always correctly read
>     the DNC data we have available. For example vpfview, nimamuse and
>     ArcGIS do have various issues.
>
>     Best Regards
>
>     -- 
>     Andreas Oxenstierna
>     T-Kartan Produkt AB
>     mobile: +46 733 206831 <tel:%2B46%20733%20206831>
>     mailto: ao@t-kartor.se <mailto:ao@t-kartor.se>
>     http://www.t-kartor.com
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E


-- 
Andreas Oxenstierna
T-Kartan Produkt AB
mobile: +46 733 206831
mailto: ao@t-kartor.se
http://www.t-kartor.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120411/84284399/attachment.html
From pcorti at gmail.com  Wed Apr 11 03:38:33 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Wed Apr 11 03:39:25 2012
Subject: [gdal-dev] Are unicode field values supported in the Python
	bindings for GDAL?
In-Reply-To: <CABScDVsCdCCiYvxhW7UzWhrWo9XdUCDaFi3=pJf3sKQUZa4BEg@mail.gmail.com>
References: <CABScDVsCdCCiYvxhW7UzWhrWo9XdUCDaFi3=pJf3sKQUZa4BEg@mail.gmail.com>
Message-ID: <CAHXrU-+Ho7YOf0-j=kY-J2A+XEC7NPCeCu_x574K_LG-95rhrA@mail.gmail.com>

On Tue, Apr 10, 2012 at 11:49 PM, Roy Hyunjin Han
<starsareblueandfaraway@gmail.com> wrote:
> In GDAL 1.9.0 and Python 2.7.2,
>
> ? ?feature.SetField(0, u'xxx')
>
> raises the following exception
>
> ? ?NotImplementedError: Wrong number of arguments for overloaded
> function 'Feature_SetField'.
> ? ?Possible C/C++ prototypes are:
> ? ? ? ?SetField(OGRFeatureShadow *,int,char const *)
> ? ? ? ?SetField(OGRFeatureShadow *,char const *,char const *)
> ? ? ? ?SetField(OGRFeatureShadow *,int,int)
> ? ? ? ?SetField(OGRFeatureShadow *,char const *,int)
> ? ? ? ?SetField(OGRFeatureShadow *,int,double)
> ? ? ? ?SetField(OGRFeatureShadow *,char const *,double)
> ? ? ? ?SetField(OGRFeatureShadow *,int,int,int,int,int,int,int,int)
> ? ? ? ?SetField(OGRFeatureShadow *,char const *,int,int,int,int,int,int,int)
>

this will work:
feat.SetField(0, u'xxx'.encode('utf-8'))

p

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti
From oyvind.idland at gmail.com  Wed Apr 11 03:57:41 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Wed Apr 11 03:58:12 2012
Subject: [gdal-dev] VRT - using 8BPP palettized tiles
Message-ID: <CAEVk4t3MOVnH_UuFq95xEZMqTbepaffAzQtj13m+qdvH0orTnw@mail.gmail.com>

Hello,

I am fiddling with some old scanned (handmade) maps. In order to reduce the
size of the data, and since
the maps has a limited amount of colors, i figured that using palettized
8BPP tiffs would be suitable in this
case.

I got several tiles that make up the whole area, using rgb(0,0,0) as nodata
(making JPEG compression
unsuitable)

The idea was to use VRT to join these together, but since they all have
different color tables,
this is not possible.

Would it be an idea to implement support for an "expand option" in VRT, e.g
expanding to rgb/rgba ?

Not sure how many would need this feature though.


-- oyvind
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120411/35a61ec6/attachment.html
From zoltans at geograph.co.za  Wed Apr 11 04:16:02 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Wed Apr 11 04:36:52 2012
Subject: [gdal-dev] version mixup on ubuntu 10.04
Message-ID: <4F853DC2.40502@geograph.co.za>

Hi,
I seem to have a mixup with different versions of gdal

> ogr2ogr --version
> ogr2ogr: /usr/local/lib/libgdal.so.1: no version information available 
> (required by ogr2ogr)
> ERROR 1: ogr2ogr was compiled against GDAL 1.9 but current library 
> version is 1.8
>
> zls@gs0:~$ which ogr2ogr
> /usr/bin/ogr2ogr

I think some time back I installed QGIS, etc.
More recently I downloaded gdal 1.9 and compiled it, only to get the 
above problem.
I then used apt-get remove to clean up, re-installed gdal 1.9 and still 
the same problem.

How do I clean up entirely, so that I can get a clean install?

If I re-install QGIS etc, using apt, can I then upgrade the gdal part of 
this install to 1.9?

Or do I uninstall QGIS totally and then run only with gdal.
(I hardly ever use QGIS in Linux, but often use the gdal/ogr command 
line utilities)

TIA,
Zoltan



-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

From chaitanya.ch at gmail.com  Wed Apr 11 04:55:14 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Apr 11 04:55:31 2012
Subject: [gdal-dev] VRT - using 8BPP palettized tiles
In-Reply-To: <CAEVk4t3MOVnH_UuFq95xEZMqTbepaffAzQtj13m+qdvH0orTnw@mail.gmail.com>
References: <CAEVk4t3MOVnH_UuFq95xEZMqTbepaffAzQtj13m+qdvH0orTnw@mail.gmail.com>
Message-ID: <CAMKgpOb3=xELW0SwEQ=6cDVQwonqR4s9aO=QmYxdy2kDYiNmhw@mail.gmail.com>

Oyvind,

VRT does support colortable expansion.
Check out the ComplexSource sub-topic in the vrt doc page[1].
>
> From the The ComplexSource supports fetching a color component from a
> source raster band that has a color table. The ColorTableComponent value is
> the index of the color component to extract : 1 for the red band, 2 for the
> green band, 3 for the blue band or 4 for the alpha band.
>

[1]: http://www.gdal.org/gdal_vrttut.html

On Wed, Apr 11, 2012 at 1:27 PM, Oyvind Idland <oyvind.idland@gmail.com>wrote:

> Hello,
>
> I am fiddling with some old scanned (handmade) maps. In order to reduce
> the size of the data, and since
> the maps has a limited amount of colors, i figured that using palettized
> 8BPP tiffs would be suitable in this
> case.
>
> I got several tiles that make up the whole area, using rgb(0,0,0) as
> nodata (making JPEG compression
> unsuitable)
>
> The idea was to use VRT to join these together, but since they all have
> different color tables,
> this is not possible.
>
> Would it be an idea to implement support for an "expand option" in VRT,
> e.g expanding to rgb/rgba ?
>
> Not sure how many would need this feature though.
>
>
> -- oyvind
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120411/31dd6ed6/attachment-0001.html
From jukka.rahkonen at mmmtike.fi  Wed Apr 11 05:27:51 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Apr 11 05:28:18 2012
Subject: [gdal-dev] Re: Slow writing into Spatialite with -skipfailures
References: <loom.20120404T173702-751@post.gmane.org>
	<201204041928.23447.even.rouault@mines-paris.org>
	<loom.20120405T081213-888@post.gmane.org>
	<201204052054.06938.even.rouault@mines-paris.org>
	<loom.20120410T152259-727@post.gmane.org>
Message-ID: <loom.20120411T112457-794@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:


> I managed to trap one problematic case but there is something weird 
> going on. The feature comes originally from Oracle and it is for sure 
> a polygon there (GTYPE=2003). I have converted it into shapefile with 
> GDAL 1.6 and OCI plugin from OSGeo4W because for some reason I have 
> not managed to connect our Oracle with more recent versions.
> 
> Now GDAL 1.6 that I used for converting polygon from Oracle into
> shapefile tells that geometry is a polygon, while GDAL 1.9 claims 
> that it is a multipolygon.

They made a working GDAL 1.9 Oracle plugin for OSGeo4W yesterday and when I use
that one this trouble is gone.

-Jukka Rahkonen-

From oyvind.idland at gmail.com  Wed Apr 11 05:33:09 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Wed Apr 11 05:33:46 2012
Subject: [gdal-dev] VRT - using 8BPP palettized tiles
In-Reply-To: <CAMKgpOb3=xELW0SwEQ=6cDVQwonqR4s9aO=QmYxdy2kDYiNmhw@mail.gmail.com>
References: <CAEVk4t3MOVnH_UuFq95xEZMqTbepaffAzQtj13m+qdvH0orTnw@mail.gmail.com>
	<CAMKgpOb3=xELW0SwEQ=6cDVQwonqR4s9aO=QmYxdy2kDYiNmhw@mail.gmail.com>
Message-ID: <CAEVk4t3ANgkBo0en7=DqiXY_VBzFMWWpT4bQDfx=GAZuTNb5Qg@mail.gmail.com>

Thanks Chaitanya,

i forgot to add, that I was refering to an option in gdalbuildvrt, there is
no way of specifying expansion there ?
(otherwise, there is a lot of manual work to do in the XML)

Let me know if I am wrong !

I solved my problem by
  1) Creating a VRT on the original RGB tiles
  2) Creating a 20% size "sample.tif" RGB tiff from the VRT
  3) running rgp2pct on sample.tif
  4) running a new rgb2pct on all the tiles, using the result from 3) as
-pct option

That way I get the same colour table on all tiles, and it looks acceptable.


- oyvind


On Wed, Apr 11, 2012 at 10:55 AM, Chaitanya kumar CH <chaitanya.ch@gmail.com
> wrote:

> Oyvind,
>
> VRT does support colortable expansion.
> Check out the ComplexSource sub-topic in the vrt doc page[1].
>>
>> From the The ComplexSource supports fetching a color component from a
>> source raster band that has a color table. The ColorTableComponent value is
>> the index of the color component to extract : 1 for the red band, 2 for the
>> green band, 3 for the blue band or 4 for the alpha band.
>>
>
> [1]: http://www.gdal.org/gdal_vrttut.html
>
> On Wed, Apr 11, 2012 at 1:27 PM, Oyvind Idland <oyvind.idland@gmail.com>wrote:
>
>> Hello,
>>
>> I am fiddling with some old scanned (handmade) maps. In order to reduce
>> the size of the data, and since
>> the maps has a limited amount of colors, i figured that using palettized
>> 8BPP tiffs would be suitable in this
>> case.
>>
>> I got several tiles that make up the whole area, using rgb(0,0,0) as
>> nodata (making JPEG compression
>> unsuitable)
>>
>> The idea was to use VRT to join these together, but since they all have
>> different color tables,
>> this is not possible.
>>
>> Would it be an idea to implement support for an "expand option" in VRT,
>> e.g expanding to rgb/rgba ?
>>
>> Not sure how many would need this feature though.
>>
>>
>> -- oyvind
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120411/3e957e3c/attachment.html
From saad.hessane at gmail.com  Wed Apr 11 05:50:54 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Wed Apr 11 05:51:41 2012
Subject: [gdal-dev] Apply filter on VRT
Message-ID: <CAEcp1tBXVZ7diGzYJiLLaYJ2jtAyavwpZouae=3D9YgZ4N3bVw@mail.gmail.com>

Hy all,

I have a VRT file generated with buildvrt utility :

<VRTDataset rasterXSize="52436" rasterYSize="32400">
>   <SRS>...</SRS>
>   <GeoTransform>...</GeoTransform>
>   <VRTRasterBand dataType="UInt16" band="1">
>     <NoDataValue>0</NoDataValue>
>     <ColorInterp>Gray</ColorInterp>
>     <ComplexSource>
>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>       <NODATA>0</NODATA>
>     </ComplexSource>
>     <ComplexSource>
>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>       <NODATA>0</NODATA>
>     </ComplexSource>
>   </VRTRasterBand>
> </VRTDataset>
>

It's work fine with a gdal_translate.
Now I want to apply a filter kernel to the VRT. I have to use the
KernelFilteredSource.
The gdal api say that VRTKernelFilteredSource is a sub-class of
VRTComplexSource. So a VRTKernelFilteredSource *is *a VRTComplexSource.
But if I replace VRTComplexSource by VRTKernelFilteredSource,
gdal_translate crash. This is the new VRT :

<VRTDataset rasterXSize="52436" rasterYSize="32400">
>   <SRS>...</SRS>
>   <GeoTransform>...</GeoTransform>
>   <VRTRasterBand dataType="UInt16" band="1">
>     <NoDataValue>0</NoDataValue>
>     <ColorInterp>Gray</ColorInterp>
>     <KernelFilteredSource>
>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>       <NODATA>0</NODATA>
>     </KernelFilteredSource>
>     <KernelFilteredSource>
>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>       <NODATA>0</NODATA>
>     </KernelFilteredSource>
>   </VRTRasterBand>
> </VRTDataset>
>

It's weird, I expected a polymorphism between VRTComplexSource and
VRTKernelFilteredSource.
So the question : how can I apply a filter to a VRT?
Thank you !
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120411/721a6940/attachment.html
From starsareblueandfaraway at gmail.com  Wed Apr 11 06:43:06 2012
From: starsareblueandfaraway at gmail.com (Roy Hyunjin Han)
Date: Wed Apr 11 06:43:29 2012
Subject: [gdal-dev] Are unicode field values supported in the Python
	bindings for GDAL?
In-Reply-To: <CAHXrU-+Ho7YOf0-j=kY-J2A+XEC7NPCeCu_x574K_LG-95rhrA@mail.gmail.com>
References: <CABScDVsCdCCiYvxhW7UzWhrWo9XdUCDaFi3=pJf3sKQUZa4BEg@mail.gmail.com>
	<CAHXrU-+Ho7YOf0-j=kY-J2A+XEC7NPCeCu_x574K_LG-95rhrA@mail.gmail.com>
Message-ID: <CABScDVszPfMf4BXNVPU=U8R6L91=bN8Jknnf7B4vDD_WLH1_YQ@mail.gmail.com>

Le 11 avril 2012 03:38, Paolo Corti <pcorti@gmail.com> a ?crit :
> this will work:
> feat.SetField(0, u'xxx'.encode('utf-8'))

Yes, but you can't decode it after saving the file.

    feature.SetField2() forces conversion using str()
    feature.SetField() tries to convert unicode to latin-1

git clone git@github.com:invisibleroads/geometryIO.git  # Uses
feature.SetField2()
cd geometryIO

    from geometryIO import save, load, proj4LL
    from osgeo import ogr
    from shapely.geometry import Point

    WORD = '???????'.decode('utf-8')

    # Raises exception because feature.SetField2() uses str()
    save('test.shp', proj4LL, [Point(0,0)], [(WORD,)], [('String',
ogr.OFTString)])
    # UnicodeEncodeError: 'ascii' codec can't encode characters in
position 0-6: ordinal not in range(128)

git checkout 5344d867a6d665cf3961c795aa771f357f5f3275 # Uses feature.SetField()

    from geometryIO import save, load, proj4LL
    from osgeo import ogr
    from shapely.geometry import Point

    WORD = '???????'.decode('utf-8')

    # Raises exception because feature.SetField() does not recognize unicode
    save('test.shp', proj4LL, [Point(0,0)], [(WORD,)], [('String',
ogr.OFTString)])
    # NotImplementedError: Wrong number of arguments for overloaded
function 'Feature_SetField'

    # Emits warning that characters cannot be converted to latin-1
    save('test.shp', proj4LL, [Point(0,0)], [(WORD.encode('utf-8'),)],
[('String', ogr.OFTString)])
    # Warning 1: One or several characters couldn't be converted
correctly from UTF-8 to ISO-8859-1.
    print load('test.shp')[2][0][0]
    #  '???????'
    print load('test.shp')[2][0][0].decode('utf-8')
    #  '???????'
    print load('test.shp')[2][0][0].decode('latin-1')
    #  '???????'

    # Some characters cannot be converted to latin-1
    WORD.encode('latin-1')
    # UnicodeEncodeError: 'latin-1' codec can't encode characters in
position 0-6: ordinal not in range(256)
From pcorti at gmail.com  Wed Apr 11 08:02:11 2012
From: pcorti at gmail.com (Paolo Corti)
Date: Wed Apr 11 08:03:30 2012
Subject: [gdal-dev] Are unicode field values supported in the Python
	bindings for GDAL?
In-Reply-To: <CABScDVszPfMf4BXNVPU=U8R6L91=bN8Jknnf7B4vDD_WLH1_YQ@mail.gmail.com>
References: <CABScDVsCdCCiYvxhW7UzWhrWo9XdUCDaFi3=pJf3sKQUZa4BEg@mail.gmail.com>
	<CAHXrU-+Ho7YOf0-j=kY-J2A+XEC7NPCeCu_x574K_LG-95rhrA@mail.gmail.com>
	<CABScDVszPfMf4BXNVPU=U8R6L91=bN8Jknnf7B4vDD_WLH1_YQ@mail.gmail.com>
Message-ID: <CAHXrU-Keo6s8v7-UTBMm+9d9N+SXL6PQrqCZEJ7HOtPbbbiQVQ@mail.gmail.com>

On Wed, Apr 11, 2012 at 12:43 PM, Roy Hyunjin Han
<starsareblueandfaraway@gmail.com> wrote:
>
> ? ?WORD = '???????'.decode('utf-8')
>
> ? ?# UnicodeEncodeError: 'ascii' codec can't encode characters in
> position 0-6: ordinal not in range(128)
>
> ? ?WORD = '???????'.decode('utf-8')
>
> ? ?# Some characters cannot be converted to latin-1
> ? ?WORD.encode('latin-1')
> ? ?# UnicodeEncodeError: 'latin-1' codec can't encode characters in
> position 0-6: ordinal not in range(256)

Not sure what you are trying to do, and pretty sure that this is
definitely obvious for you and not related at all to GDAL, but it
seems to me that you are trying to encode in latin1 and ascii a string
that contains characters not present in those encodings:

>>> '???????'.encode('ascii')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeDecodeError: 'ascii' codec can't decode byte 0xd0 in position
0: ordinal not in range(128)
>>> '???????'.encode('latin-1')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeDecodeError: 'ascii' codec can't decode byte 0xd0 in position
0: ordinal not in range(128)
>>> 'simple characters'.encode('ascii')
'simple characters'
>>> 'simple characters'.encode('latin-1')
'simple characters'

p

-- 
Paolo Corti
Geospatial software developer
web: http://www.paolocorti.net
twitter: @capooti
skype: capooti
From jukka.rahkonen at mmmtike.fi  Wed Apr 11 08:21:09 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Apr 11 08:22:18 2012
Subject: [gdal-dev] Adding GMLJP2 metadata into existing JPEG2000 file
Message-ID: <loom.20120411T141237-487@post.gmane.org>

Hi,

Do we have anything that could be used for injecting GMLJP2 georeferencing
metadata from a text file into an existing JPEG2000 image? I found a tool
called "JP2 Meta Editor" by a company j2k-codec which is usable for individual
images. However, only way to use it is through GUI and I have a need to run a
large batch. Hints about suitable tools for this task, free or commercial,
are welcome.

-Jukka Rahkonen-

From starsareblueandfaraway at gmail.com  Wed Apr 11 08:31:26 2012
From: starsareblueandfaraway at gmail.com (Roy Hyunjin Han)
Date: Wed Apr 11 08:32:01 2012
Subject: [gdal-dev] Are unicode field values supported in the Python
	bindings for GDAL?
In-Reply-To: <CAHXrU-Keo6s8v7-UTBMm+9d9N+SXL6PQrqCZEJ7HOtPbbbiQVQ@mail.gmail.com>
References: <CABScDVsCdCCiYvxhW7UzWhrWo9XdUCDaFi3=pJf3sKQUZa4BEg@mail.gmail.com>
	<CAHXrU-+Ho7YOf0-j=kY-J2A+XEC7NPCeCu_x574K_LG-95rhrA@mail.gmail.com>
	<CABScDVszPfMf4BXNVPU=U8R6L91=bN8Jknnf7B4vDD_WLH1_YQ@mail.gmail.com>
	<CAHXrU-Keo6s8v7-UTBMm+9d9N+SXL6PQrqCZEJ7HOtPbbbiQVQ@mail.gmail.com>
Message-ID: <CABScDVupEUz61sL6ZS1mJ2iA3SbbJsXy96zE=S+C71ObD9ADgQ@mail.gmail.com>

Le 11 avril 2012 08:02, Paolo Corti <pcorti@gmail.com> a ?crit :
> Not sure what you are trying to do, and pretty sure that this is
> definitely obvious for you and not related at all to GDAL, but it
> seems to me that you are trying to encode in latin1 and ascii a string
> that contains characters not present in those encodings:

Thanks, Paolo.

Since the status of RFC 5 is still under development, I will assume
that GDAL does not yet support native unicode, at least for the Python
bindings.
http://trac.osgeo.org/gdal/wiki/rfc5_unicode

Cross-reference:
http://lists.osgeo.org/pipermail/gdal-dev/2010-September/026156.html
From starsareblueandfaraway at gmail.com  Wed Apr 11 08:36:12 2012
From: starsareblueandfaraway at gmail.com (Roy Hyunjin Han)
Date: Wed Apr 11 08:37:02 2012
Subject: [gdal-dev] Are unicode field values supported in the Python
	bindings for GDAL?
In-Reply-To: <CABScDVupEUz61sL6ZS1mJ2iA3SbbJsXy96zE=S+C71ObD9ADgQ@mail.gmail.com>
References: <CABScDVsCdCCiYvxhW7UzWhrWo9XdUCDaFi3=pJf3sKQUZa4BEg@mail.gmail.com>
	<CAHXrU-+Ho7YOf0-j=kY-J2A+XEC7NPCeCu_x574K_LG-95rhrA@mail.gmail.com>
	<CABScDVszPfMf4BXNVPU=U8R6L91=bN8Jknnf7B4vDD_WLH1_YQ@mail.gmail.com>
	<CAHXrU-Keo6s8v7-UTBMm+9d9N+SXL6PQrqCZEJ7HOtPbbbiQVQ@mail.gmail.com>
	<CABScDVupEUz61sL6ZS1mJ2iA3SbbJsXy96zE=S+C71ObD9ADgQ@mail.gmail.com>
Message-ID: <CABScDVuNruAR6apOBxD9bKM8HoNnOn3y99fyBX-YGPw3Fw+qTA@mail.gmail.com>

Hi Andrey,

Do you know what is the status of native unicode/utf-8 support in GDAL?
http://trac.osgeo.org/gdal/wiki/rfc5_unicode

RHH




Currently, using the Python SWIG bindings for GDAL 1.9.0,

   feature.SetField(0, u'xxx')

raises the following exception

   NotImplementedError: Wrong number of arguments for overloaded
function 'Feature_SetField'
From starsareblueandfaraway at gmail.com  Wed Apr 11 08:52:55 2012
From: starsareblueandfaraway at gmail.com (Roy Hyunjin Han)
Date: Wed Apr 11 08:52:58 2012
Subject: [gdal-dev] Re: Are unicode field values supported in the Python
	bindings for GDAL?
In-Reply-To: <CABScDVsCdCCiYvxhW7UzWhrWo9XdUCDaFi3=pJf3sKQUZa4BEg@mail.gmail.com>
References: <CABScDVsCdCCiYvxhW7UzWhrWo9XdUCDaFi3=pJf3sKQUZa4BEg@mail.gmail.com>
Message-ID: <CABScDVsi9cS=9PecxXGwPmb_mAtzE-zfhjp49LMdniHYo1J9-Q@mail.gmail.com>

I submitted a ticket to address this issue.
http://trac.osgeo.org/gdal/ticket/4608

RHH



"""
Currently, using the Python SWIG bindings for GDAL 1.9.0,

  feature.SetField(0, u'xxx')

  feature.SetField(0, '???????'.decode('utf-8'))

raise the following exception

  NotImplementedError: Wrong number of arguments for overloaded
function 'Feature_SetField'

Meanwhile, feature.SetField2() forcibly converts the string to ascii
using str().

Ideally,

  SetField() should accept native unicode

  SetField2() should accept native unicode

  GetField() should return native unicode

  GetFieldAsString() should return native unicode

References:

  http://lists.osgeo.org/pipermail/gdal-dev/2010-September/026156.html

  http://trac.osgeo.org/gdal/wiki/rfc5_unicode
"""
From ari.jolma at gmail.com  Wed Apr 11 10:01:08 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Apr 11 10:01:35 2012
Subject: [gdal-dev] Are unicode field values supported in the Python
	bindings for GDAL?
In-Reply-To: <CABScDVuNruAR6apOBxD9bKM8HoNnOn3y99fyBX-YGPw3Fw+qTA@mail.gmail.com>
References: <CABScDVsCdCCiYvxhW7UzWhrWo9XdUCDaFi3=pJf3sKQUZa4BEg@mail.gmail.com>
	<CAHXrU-+Ho7YOf0-j=kY-J2A+XEC7NPCeCu_x574K_LG-95rhrA@mail.gmail.com>
	<CABScDVszPfMf4BXNVPU=U8R6L91=bN8Jknnf7B4vDD_WLH1_YQ@mail.gmail.com>
	<CAHXrU-Keo6s8v7-UTBMm+9d9N+SXL6PQrqCZEJ7HOtPbbbiQVQ@mail.gmail.com>
	<CABScDVupEUz61sL6ZS1mJ2iA3SbbJsXy96zE=S+C71ObD9ADgQ@mail.gmail.com>
	<CABScDVuNruAR6apOBxD9bKM8HoNnOn3y99fyBX-YGPw3Fw+qTA@mail.gmail.com>
Message-ID: <4F858EA4.8060906@gmail.com>

For the record,

In the Perl bindings all strings going to GDAL internals are upgraded 
from Perl internal format to utf-8 and all strings coming from GDAL 
internals are marked for Perl to be utf-8.

This is done in the Perl typemaps after a change last November (#23405).

I don't see a similar problem in the Perl bindings as below. However 
utf-8 strings are handled in Python differently from Perl.

Ari

On 04/11/2012 03:36 PM, Roy Hyunjin Han wrote:
> Hi Andrey,
>
> Do you know what is the status of native unicode/utf-8 support in GDAL?
> http://trac.osgeo.org/gdal/wiki/rfc5_unicode
>
> RHH
>
>
>
>
> Currently, using the Python SWIG bindings for GDAL 1.9.0,
>
>     feature.SetField(0, u'xxx')
>
> raises the following exception
>
>     NotImplementedError: Wrong number of arguments for overloaded
> function 'Feature_SetField'
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From kmichael.aye at gmail.com  Wed Apr 11 10:31:14 2012
From: kmichael.aye at gmail.com (K.-Michael Aye)
Date: Wed Apr 11 10:32:00 2012
Subject: [gdal-dev] python downsample API?
Message-ID: <jm44ji$l4g$1@dough.gmane.org>

Dear all,

is there a Python API for downsampling a huge dataset?
What I would like to do:

* get my dataset
* read out RasterXSize and RasterYSize
* calculate how many lines and rows I need to skip to get a quick 
overview image, e.g. 10 lines to skip.
* Have a ReadAsArray interface where I can say something like this:
** data = ds.ReadAsArray(xoffset, yoffset, 10000, 10000, skipping=10)

which in numpy terms would give me every 10nth line like this: array[:,:,10]

I really don't need quality at all, just speed, for a rough overview 
for further zooming in with lassos, as the images I deal with sometimes 
have more than 200 MPixels.

Is this possible in Python?
I was thinking now, maybe one could use numpy's memmap somehow for 
this, don't know much about it, though?

Thanks for any hints!

Best regards,
Michael


From anton.korosov at nersc.no  Wed Apr 11 11:10:23 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Wed Apr 11 11:18:45 2012
Subject: [gdal-dev] python downsample API?
In-Reply-To: <jm44ji$l4g$1@dough.gmane.org>
References: <jm44ji$l4g$1@dough.gmane.org>
Message-ID: <4F859EDF.1090003@nersc.no>

Hi Michael,

I do that maybe in an awkward way but it saves time.

1. I create a VRT file (e.g. using CreateCopy) and open it using 
xml.etree.ElementTree.XML
2. I decrease rasterXSize and rasterYSize attributes of the VRTDataset tag
3. I also decrease xSize and ySize attributes of the DstRect tag
4. Then I save the VRT and open it again using gdal.Open
5. When I use ReadAsArray it downscales the matrix automatically

Unfortunately I cannot provide the code in a single piece - it is 
dissolved in a large package.

Anton

On 04/11/2012 04:31 PM, K.-Michael Aye wrote:
> Dear all,
>
> is there a Python API for downsampling a huge dataset?
> What I would like to do:
>
> * get my dataset
> * read out RasterXSize and RasterYSize
> * calculate how many lines and rows I need to skip to get a quick
> overview image, e.g. 10 lines to skip.
> * Have a ReadAsArray interface where I can say something like this:
> ** data = ds.ReadAsArray(xoffset, yoffset, 10000, 10000, skipping=10)
>
> which in numpy terms would give me every 10nth line like this:
> array[:,:,10]
>
> I really don't need quality at all, just speed, for a rough overview for
> further zooming in with lassos, as the images I deal with sometimes have
> more than 200 MPixels.
>
> Is this possible in Python?
> I was thinking now, maybe one could use numpy's memmap somehow for this,
> don't know much about it, though?
>
> Thanks for any hints!
>
> Best regards,
> Michael
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From etourigny.dev at gmail.com  Wed Apr 11 11:28:17 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Apr 11 11:28:35 2012
Subject: [gdal-dev] python downsample API?
In-Reply-To: <jm44ji$l4g$1@dough.gmane.org>
References: <jm44ji$l4g$1@dough.gmane.org>
Message-ID: <CA+TxYvMWx-WJTCrpbOQ8VCQbgwDkqNXFiA2qRAweSRg1_hivnA@mail.gmail.com>

This might be overkill, but would using gdal to create an overview be
suitable for you?

You could call gdaladdo or use the API (BuildOverviews)
http://www.gdal.org/classGDALDataset.html#a2aa6f88b3bbc840a5696236af11dde15

Etienne
On Wed, Apr 11, 2012 at 11:31 AM, K.-Michael Aye <kmichael.aye@gmail.com> wrote:
> Dear all,
>
> is there a Python API for downsampling a huge dataset?
> What I would like to do:
>
> * get my dataset
> * read out RasterXSize and RasterYSize
> * calculate how many lines and rows I need to skip to get a quick overview
> image, e.g. 10 lines to skip.
> * Have a ReadAsArray interface where I can say something like this:
> ** data = ds.ReadAsArray(xoffset, yoffset, 10000, 10000, skipping=10)
>
> which in numpy terms would give me every 10nth line like this: array[:,:,10]
>
> I really don't need quality at all, just speed, for a rough overview for
> further zooming in with lassos, as the images I deal with sometimes have
> more than 200 MPixels.
>
> Is this possible in Python?
> I was thinking now, maybe one could use numpy's memmap somehow for this,
> don't know much about it, though?
>
> Thanks for any hints!
>
> Best regards,
> Michael
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From zoltans at geograph.co.za  Wed Apr 11 12:37:22 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Wed Apr 11 12:38:20 2012
Subject: [gdal-dev] version mixup on ubuntu 10.04 - Solved
In-Reply-To: <4F853DC2.40502@geograph.co.za>
References: <4F853DC2.40502@geograph.co.za>
Message-ID: <4F85B342.4060209@geograph.co.za>

On 2012/04/11 10:16, Zoltan Szecsei wrote:
> Hi,
> I seem to have a mixup with different versions of gdal
>
>> ogr2ogr --version
>> ogr2ogr: /usr/local/lib/libgdal.so.1: no version information 
>> available (required by ogr2ogr)
>> ERROR 1: ogr2ogr was compiled against GDAL 1.9 but current library 
>> version is 1.8
>>
>> zls@gs0:~$ which ogr2ogr
>> /usr/bin/ogr2ogr
>
> I think some time back I installed QGIS, etc.
> More recently I downloaded gdal 1.9 and compiled it, only to get the 
> above problem.
> I then used apt-get remove to clean up, re-installed gdal 1.9 and 
> still the same problem.
>
> How do I clean up entirely, so that I can get a clean install?
>
> If I re-install QGIS etc, using apt, can I then upgrade the gdal part 
> of this install to 1.9?
>
> Or do I uninstall QGIS totally and then run only with gdal.
> (I hardly ever use QGIS in Linux, but often use the gdal/ogr command 
> line utilities)
>
> TIA,
> Zoltan


I just ditched QGIS, recompiled gdal, and all's good.

Thanks,
Zoltan

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

From saarko at alaska.edu  Wed Apr 11 14:17:56 2012
From: saarko at alaska.edu (Scott Arko)
Date: Wed Apr 11 14:18:15 2012
Subject: [gdal-dev] python downsample API?
In-Reply-To: <jm44ji$l4g$1@dough.gmane.org>
References: <jm44ji$l4g$1@dough.gmane.org>
Message-ID: <CAFCnYQNvAMn_oNRO=yxhccYWdz9Q1UZVejeWLk+BVeLNvdgiug@mail.gmail.com>

Hi Michael,


I may be missing your question, but why aren't you just using ReadAsArray?
 It has an option to return a smaller array from the input array.  Now, I'm
not sure how it does the resampling (you could look to see), but you can
make a call like

data =
banddata.ReadAsArray(0,0,filehandle.RasterXSize,filehandle.RasterYSize,xsize,ysize)

where xsize and ysize are smaller than the true RasterXSize or RasterYSize.
 I haven't looked at this in a while, but I'm pretty sure this will work.
 Did I miss the point of what you were asking?


Thanks,
Scott


On Wed, Apr 11, 2012 at 6:31 AM, K.-Michael Aye <kmichael.aye@gmail.com>wrote:

> Dear all,
>
> is there a Python API for downsampling a huge dataset?
> What I would like to do:
>
> * get my dataset
> * read out RasterXSize and RasterYSize
> * calculate how many lines and rows I need to skip to get a quick overview
> image, e.g. 10 lines to skip.
> * Have a ReadAsArray interface where I can say something like this:
> ** data = ds.ReadAsArray(xoffset, yoffset, 10000, 10000, skipping=10)
>
> which in numpy terms would give me every 10nth line like this:
> array[:,:,10]
>
> I really don't need quality at all, just speed, for a rough overview for
> further zooming in with lassos, as the images I deal with sometimes have
> more than 200 MPixels.
>
> Is this possible in Python?
> I was thinking now, maybe one could use numpy's memmap somehow for this,
> don't know much about it, though?
>
> Thanks for any hints!
>
> Best regards,
> Michael
>
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120411/0a748615/attachment.html
From hans.jonsson at metria.se  Wed Apr 11 14:41:14 2012
From: hans.jonsson at metria.se (Hans Jonsson)
Date: Wed Apr 11 14:42:43 2012
Subject: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work
Message-ID: <91BFDFF237DD994E8D3302118D210B7A567AEDA9@Z62SXC001.Z62.tconet.net>

CPL string something

/Hans
From warmerdam at pobox.com  Wed Apr 11 14:55:35 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 11 14:56:20 2012
Subject: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work
In-Reply-To: <91BFDFF237DD994E8D3302118D210B7A567AEDA9@Z62SXC001.Z62.tconet.net>
References: <91BFDFF237DD994E8D3302118D210B7A567AEDA9@Z62SXC001.Z62.tconet.net>
Message-ID: <CA+YzLBc8E-UqvKos-fs1SrHROgKi7tum7_xmTwet5c6mpAcx1w@mail.gmail.com>

Hans,

If you can't be more specific I don't think you should be mailing such
a broad mailing list!

Please capture the first actual build error, and provide notes on
anything unusual about how you are building, tools, etc.

I'm pretty sure I've build GDAL 1.9 with the makefiles and VS2010, so
the devil will be in the details.

Best regards,
Frank

On Wed, Apr 11, 2012 at 11:41 AM, Hans Jonsson <hans.jonsson@metria.se> wrote:
> CPL string something
>
> /Hans_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From chandlersterling1 at gmail.com  Wed Apr 11 15:05:52 2012
From: chandlersterling1 at gmail.com (Chandler Sterling)
Date: Wed Apr 11 15:06:21 2012
Subject: [gdal-dev] GDAL now supported on PythonAnywhere
Message-ID: <CAJRbg_xOGs6pAC9wYDW9Yut4a-PbZ_nQrkep8qtR7xtWiKO-oQ@mail.gmail.com>

GDAL is now supported on PythonAnywhere (http://www.pythonanywhere.com/)

-Chandler Sterling
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120411/f4d6c9a7/attachment.html
From dshean at uw.edu  Wed Apr 11 15:17:27 2012
From: dshean at uw.edu (David Shean)
Date: Wed Apr 11 15:22:06 2012
Subject: [gdal-dev] python downsample API?
In-Reply-To: <CAFCnYQNvAMn_oNRO=yxhccYWdz9Q1UZVejeWLk+BVeLNvdgiug@mail.gmail.com>
References: <jm44ji$l4g$1@dough.gmane.org>
	<CAFCnYQNvAMn_oNRO=yxhccYWdz9Q1UZVejeWLk+BVeLNvdgiug@mail.gmail.com>
Message-ID: <4E471CA8-10B4-476A-A22E-853E74E96F48@uw.edu>

Michael,
Scott is right.  Not sure if this is the preferred approach, but I accomplished this for large datasets by specifying buffer sizes for ReadAsArray.  The doc I consulted is here: http://gdal.org/python/osgeo.gdal_array-module.html#BandReadAsArray.  
I used masked arrays to exclude nodata values - you may not need to worry about with this.
-David

Excerpt from my script:

src_ds = gdal.Open(src_fn, gdal.GA_ReadOnly)
b = src_ds.GetRasterBand(1)
ndv = b.GetNoDataValue()
ns = src_ds.RasterXSize
nl = src_ds.RasterYSize

#Don't want to load the entire dataset for stats computation
#This is maximum dimension for reduced resolution array
max_dim = 1024.

scale_ns = ns/max_dim
scale_nl = nl/max_dim
scale_max = max(scale_ns, scale_nl)

if scale_max > 1:
    nl = round(nl/scale_max)
    ns = round(ns/scale_max)

#The buf_size parameters determine the final array dimensions
bm = numpy.ma.masked_equal(numpy.array(b.ReadAsArray(buf_xsize=ns, buf_ysize=nl)), ndv)


On Apr 11, 2012, at 11:17 AM, Scott Arko wrote:

> Hi Michael,
> 
> 
> I may be missing your question, but why aren't you just using ReadAsArray?  It has an option to return a smaller array from the input array.  Now, I'm not sure how it does the resampling (you could look to see), but you can make a call like
> 
> data = banddata.ReadAsArray(0,0,filehandle.RasterXSize,filehandle.RasterYSize,xsize,ysize)
> 
> where xsize and ysize are smaller than the true RasterXSize or RasterYSize.  I haven't looked at this in a while, but I'm pretty sure this will work.  Did I miss the point of what you were asking?
> 
> 
> Thanks,
> Scott
> 
> 
> On Wed, Apr 11, 2012 at 6:31 AM, K.-Michael Aye <kmichael.aye@gmail.com> wrote:
> Dear all,
> 
> is there a Python API for downsampling a huge dataset?
> What I would like to do:
> 
> * get my dataset
> * read out RasterXSize and RasterYSize
> * calculate how many lines and rows I need to skip to get a quick overview image, e.g. 10 lines to skip.
> * Have a ReadAsArray interface where I can say something like this:
> ** data = ds.ReadAsArray(xoffset, yoffset, 10000, 10000, skipping=10)
> 
> which in numpy terms would give me every 10nth line like this: array[:,:,10]
> 
> I really don't need quality at all, just speed, for a rough overview for further zooming in with lassos, as the images I deal with sometimes have more than 200 MPixels.
> 
> Is this possible in Python?
> I was thinking now, maybe one could use numpy's memmap somehow for this, don't know much about it, though?
> 
> Thanks for any hints!
> 
> Best regards,
> Michael
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120411/edcc4cbf/attachment.html
From kmichael.aye at gmail.com  Wed Apr 11 16:50:23 2012
From: kmichael.aye at gmail.com (K.-Michael Aye)
Date: Wed Apr 11 16:51:15 2012
Subject: [gdal-dev] Re: python downsample API?
References: <jm44ji$l4g$1@dough.gmane.org>
	<CAFCnYQNvAMn_oNRO=yxhccYWdz9Q1UZVejeWLk+BVeLNvdgiug@mail.gmail.com>
	<4E471CA8-10B4-476A-A22E-853E74E96F48@uw.edu>
Message-ID: <jm4qqf$h4e$1@dough.gmane.org>

On 2012-04-11 19:17:27 +0000, David Shean said:

> Michael,
> Scott is right. ?Not sure if this is the preferred approach, but I 
> accomplished this for large datasets by specifying buffer sizes for 
> ReadAsArray. ?The doc I consulted is here: 
> http://gdal.org/python/osgeo.gdal_array-module.html#BandReadAsArray. ?
> I used masked arrays to exclude nodata values - you may not need to 
> worry about with this.
> -David
> 
> Excerpt from my script:
> 
> src_ds = gdal.Open(src_fn, gdal.GA_ReadOnly)
> b = src_ds.GetRasterBand(1)
> ndv = b.GetNoDataValue()
> ns = src_ds.RasterXSize
> nl = src_ds.RasterYSize
> 
> #Don't want to load the entire dataset for stats computation
> #This is maximum dimension for reduced resolution array
> max_dim = 1024.
> 
> scale_ns = ns/max_dim
> scale_nl = nl/max_dim
> scale_max = max(scale_ns, scale_nl)
> 
> if scale_max > 1:
> ? ? nl = round(nl/scale_max)
> ? ? ns = round(ns/scale_max)
> 
> #The buf_size parameters determine the final array dimensions
> bm = numpy.ma.masked_equal(numpy.array(b.ReadAsArray(buf_xsize=ns, 
> buf_ysize=nl)), ndv)


Holy excrements. I didn't know about this functionality, most likely 
because I only have one-banded datasets and the ds.ReadAsArray does not 
offer buf_xsize and buf_ysize!
I just tried it out and it's so endlessly fast? My compliments to the 
GDAL team!
And muchas gracias to you and Scott for pointing it out to me.

This will be a happy summer when I finally implement my private fast 
image viewer? ;)

Best regards,
Michael


> 
> On Apr 11, 2012, at 11:17 AM, Scott Arko wrote:
> Hi Michael,
> 
> 
> I may be missing your question, but why aren't you just using 
> ReadAsArray? ?It has an option to return a smaller array from the input 
> array. ?Now, I'm not sure how it does the resampling (you could look to 
> see), but you can make a call like
> 
> data = 
> banddata.ReadAsArray(0,0,filehandle.RasterXSize,filehandle.RasterYSize,xsize,ysize) 
> 
> 
> where xsize and ysize are smaller than the true RasterXSize or 
> RasterYSize. ?I haven't looked at this in a while, but I'm pretty sure 
> this will work. ?Did I miss the point of what you were asking?
> 
> 
> Thanks,
> Scott
> 
> 
> On Wed, Apr 11, 2012 at 6:31 AM, K.-Michael Aye <kmichael.aye@gmail.com> wrote:
> Dear all,
> 
> is there a Python API for downsampling a huge dataset?
> What I would like to do:
> 
> * get my dataset
> * read out RasterXSize and RasterYSize
> * calculate how many lines and rows I need to skip to get a quick 
> overview image, e.g. 10 lines to skip.
> * Have a ReadAsArray interface where I can say something like this:
> ** data = ds.ReadAsArray(xoffset, yoffset, 10000, 10000, skipping=10)
> 
> which in numpy terms would give me every 10nth line like this: array[:,:,10]
> 
> I really don't need quality at all, just speed, for a rough overview 
> for further zooming in with lassos, as the images I deal with sometimes 
> have more than 200 MPixels.
> 
> Is this possible in Python?
> I was thinking now, maybe one could use numpy's memmap somehow for 
> this, don't know much about it, though?
> 
> Thanks for any hints!
> 
> Best regards,
> Michael
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From chapmanm at pixia.com  Wed Apr 11 16:55:54 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Wed Apr 11 16:56:38 2012
Subject: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work
In-Reply-To: <CA+YzLBc8E-UqvKos-fs1SrHROgKi7tum7_xmTwet5c6mpAcx1w@mail.gmail.com>
References: <91BFDFF237DD994E8D3302118D210B7A567AEDA9@Z62SXC001.Z62.tconet.net>
	<CA+YzLBc8E-UqvKos-fs1SrHROgKi7tum7_xmTwet5c6mpAcx1w@mail.gmail.com>
Message-ID: <2c9f8905.00000894.00000002@CHAPMANM7S>

Microsoft VS 2010 - build of GDAL 1.9 64 and 32 bit works for me.

Best regards,
Martin

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Wednesday, April 11, 2012 12:56 PM
To: Hans Jonsson
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not
work

Hans,

If you can't be more specific I don't think you should be mailing such a
broad mailing list!

Please capture the first actual build error, and provide notes on anything
unusual about how you are building, tools, etc.

I'm pretty sure I've build GDAL 1.9 with the makefiles and VS2010, so the
devil will be in the details.

Best regards,
Frank

On Wed, Apr 11, 2012 at 11:41 AM, Hans Jonsson <hans.jonsson@metria.se>
wrote:
> CPL string something
>
> /Hans_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up?? | Frank Warmerdam,
warmerdam@pobox.com light and sound - activate the windows |
http://pobox.com/~warmerdam and watch the world go round - Rush? ? |
Geospatial Software Developer
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From m at rtijn.org  Thu Apr 12 01:13:23 2012
From: m at rtijn.org (Martijn van Exel)
Date: Thu Apr 12 01:14:13 2012
Subject: [gdal-dev] postgis: strange behavior when 'public' schema does not
	exist
Message-ID: <CAGCum_6BgUY7WSG71JKXLjc5UABn+wksjYxrP3_qO-yL617RTA@mail.gmail.com>

Hi all,

I had trouble extracting a shape file from a PostGIS table using ogr2ogr
(1.9.0 on Ubuntu 10.04 64 bit). Debug output from ogr2ogr:

mvexel@lima:/osm/tmp/candidates$ ogr2ogr -overwrite -f "ESRI Shapefile"
--debug on candidates PG:"dbname=osmus active_schema=us user=osm
password=osm" candidates
PG: DBName="osmus"
ERROR 1: ERROR:  invalid value for parameter "search_path": "us, public"
DETAIL:  schema "public" does not exist

FAILURE:
Unable to open datasource `PG:dbname=osmus active_schema=us user=osm
password=osm' with the following drivers.

What I think happens is that ogr implies that schema public exists (which
is not a requirement for PostgreSQL) and appends that to the schemas list
to feed to search_path. SET search_path then fails, and the active_schema
is not set. Consequently, the table is not found and ogr2ogr is not able to
connect.

Adding a 'public' schema to the database remedied the situation.

Is this a bug? Do you need more information?

Best,
-- 
martijn van exel
geospatial omnivore
1109 1st ave #2
salt lake city, ut 84103
801-550-5815
http://oegeo.wordpress.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120411/15cf2b09/attachment.html
From chaitanya.ch at gmail.com  Thu Apr 12 02:26:04 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr 12 02:26:18 2012
Subject: [gdal-dev] postgis: strange behavior when 'public' schema does
	not exist
In-Reply-To: <CAGCum_6BgUY7WSG71JKXLjc5UABn+wksjYxrP3_qO-yL617RTA@mail.gmail.com>
References: <CAGCum_6BgUY7WSG71JKXLjc5UABn+wksjYxrP3_qO-yL617RTA@mail.gmail.com>
Message-ID: <CAMKgpOZHLrTMuX79wm3UpKaLT6KhVO3FRsxpFbUhckOLr7MR9Q@mail.gmail.com>

Martijn,

Thanks for the excellent error report.
I couldn't find any statement for or against the requirement for the public
schema. Can you provide a reference to this?

On Thu, Apr 12, 2012 at 10:43 AM, Martijn van Exel <m@rtijn.org> wrote:

> Hi all,
>
> I had trouble extracting a shape file from a PostGIS table using ogr2ogr
> (1.9.0 on Ubuntu 10.04 64 bit). Debug output from ogr2ogr:
>
> mvexel@lima:/osm/tmp/candidates$ ogr2ogr -overwrite -f "ESRI Shapefile"
> --debug on candidates PG:"dbname=osmus active_schema=us user=osm
> password=osm" candidates
> PG: DBName="osmus"
> ERROR 1: ERROR:  invalid value for parameter "search_path": "us, public"
> DETAIL:  schema "public" does not exist
>
> FAILURE:
> Unable to open datasource `PG:dbname=osmus active_schema=us user=osm
> password=osm' with the following drivers.
>
> What I think happens is that ogr implies that schema public exists (which
> is not a requirement for PostgreSQL) and appends that to the schemas list
> to feed to search_path. SET search_path then fails, and the active_schema
> is not set. Consequently, the table is not found and ogr2ogr is not able to
> connect.
>
> Adding a 'public' schema to the database remedied the situation.
>
> Is this a bug? Do you need more information?
>
> Best,
> --
> martijn van exel
> geospatial omnivore
> 1109 1st ave #2
> salt lake city, ut 84103
> 801-550-5815
> http://oegeo.wordpress.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120412/9e8f17cf/attachment.html
From m at rtijn.org  Thu Apr 12 02:29:50 2012
From: m at rtijn.org (Martijn van Exel)
Date: Thu Apr 12 02:30:33 2012
Subject: [gdal-dev] postgis: strange behavior when 'public' schema does
	not exist
In-Reply-To: <CAMKgpOZHLrTMuX79wm3UpKaLT6KhVO3FRsxpFbUhckOLr7MR9Q@mail.gmail.com>
References: <CAGCum_6BgUY7WSG71JKXLjc5UABn+wksjYxrP3_qO-yL617RTA@mail.gmail.com>
	<CAMKgpOZHLrTMuX79wm3UpKaLT6KhVO3FRsxpFbUhckOLr7MR9Q@mail.gmail.com>
Message-ID: <CAGCum_6tfYb_iUK=yXuB35i7Zwd01OvOQq92=+iyE=aH3iO9HA@mail.gmail.com>

On Thu, Apr 12, 2012 at 12:26 AM, Chaitanya kumar CH <chaitanya.ch@gmail.com
> wrote:

> Martijn,
>
> Thanks for the excellent error report.
> I couldn't find any statement for or against the requirement for the
> public schema. Can you provide a reference to this?
>
>
>
It's in 5.7.3 of the PostgreSQL documentation:
http://www.postgresql.org/docs/9.1/static/ddl-schemas.html

'There is nothing special about the public schema except that it exists by
default. It can be dropped, too.'


-- 
martijn van exel
geospatial omnivore
1109 1st ave #2
salt lake city, ut 84103
801-550-5815
http://oegeo.wordpress.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120412/ba0bedd9/attachment.html
From chaitanya.ch at gmail.com  Thu Apr 12 02:58:56 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr 12 02:59:12 2012
Subject: [gdal-dev] postgis: strange behavior when 'public' schema does
	not exist
In-Reply-To: <CAGCum_6tfYb_iUK=yXuB35i7Zwd01OvOQq92=+iyE=aH3iO9HA@mail.gmail.com>
References: <CAGCum_6BgUY7WSG71JKXLjc5UABn+wksjYxrP3_qO-yL617RTA@mail.gmail.com>
	<CAMKgpOZHLrTMuX79wm3UpKaLT6KhVO3FRsxpFbUhckOLr7MR9Q@mail.gmail.com>
	<CAGCum_6tfYb_iUK=yXuB35i7Zwd01OvOQq92=+iyE=aH3iO9HA@mail.gmail.com>
Message-ID: <CAMKgpObFyVvU+xi7+dU25x2PB2GBNsm0APx-yUoErxJzUXe9gw@mail.gmail.com>

Thanks Martijn,

I missed the sentence "It can be dropped, too" when I first read it.
I opened a ticket for this issue.

http://trac.osgeo.org/gdal/ticket/4611

On Thu, Apr 12, 2012 at 11:59 AM, Martijn van Exel <m@rtijn.org> wrote:

> On Thu, Apr 12, 2012 at 12:26 AM, Chaitanya kumar CH <
> chaitanya.ch@gmail.com> wrote:
>
>> Martijn,
>>
>> Thanks for the excellent error report.
>> I couldn't find any statement for or against the requirement for the
>> public schema. Can you provide a reference to this?
>>
>>
>>
> It's in 5.7.3 of the PostgreSQL documentation:
> http://www.postgresql.org/docs/9.1/static/ddl-schemas.html
>
> 'There is nothing special about the public schema except that it exists by
> default. It can be dropped, too.'
>
>
> --
> martijn van exel
> geospatial omnivore
> 1109 1st ave #2
> salt lake city, ut 84103
> 801-550-5815
> http://oegeo.wordpress.com
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120412/73544d8e/attachment.html
From hans.jonsson at metria.se  Thu Apr 12 04:03:37 2012
From: hans.jonsson at metria.se (Hans Jonsson)
Date: Thu Apr 12 04:03:50 2012
Subject: SV: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work
In-Reply-To: <2c9f8905.00000894.00000002@CHAPMANM7S>
References: <91BFDFF237DD994E8D3302118D210B7A567AEDA9@Z62SXC001.Z62.tconet.net>
	<CA+YzLBc8E-UqvKos-fs1SrHROgKi7tum7_xmTwet5c6mpAcx1w@mail.gmail.com>
	<2c9f8905.00000894.00000002@CHAPMANM7S>
Message-ID: <91BFDFF237DD994E8D3302118D210B7A567AEE8E@Z62SXC001.Z62.tconet.net>

Hi,

The compile phase seems to work, but when it comes to the linking there is something missing:

1>Link:
1>  zlib.lib(crc32.obj) : MSIL .netmodule or module compiled with /GL found; restarting link with /LTCG; add /LTCG to the link command line to improve linker performance
1>     Creating library Release_DLL\gdal_i-vc10.lib and object Release_DLL\gdal_i-vc10.exp
1>rasterio.obj : error LNK2001: unresolved external symbol "public: int __thiscall CPLStringList::Count(void)const " (?Count@CPLStringList@@QBEHXZ)
1>gdalproxypool.obj : error LNK2001: unresolved external symbol "public: int __thiscall CPLStringList::Count(void)const " (?Count@CPLStringList@@QBEHXZ)
1>gdalrasterband.obj : error LNK2001: unresolved external symbol "public: int __thiscall CPLStringList::Count(void)const " (?Count@CPLStringList@@QBEHXZ)
1>gdalrasterblock.obj : error LNK2001: unresolved external symbol "public: int __thiscall CPLStringList::Count(void)const " (?Count@CPLStringList@@QBEHXZ)
1>overview.obj : error LNK2001: unresolved external symbol "public: int __thiscall CPLStringList::Count(void)const " (?Count@CPLStringList@@QBEHXZ)
1>gdalpamdataset.obj : error LNK2001: unresolved external symbol "public: int __thiscall CPLStringList::Count(void)const " (?Count@CPLStringList@@QBEHXZ)
1>gdalpamproxydb.obj : error LNK2001: unresolved external symbol "public: int __thiscall CPLStringList::Count(void)const " (?Count@CPLStringList@@QBEHXZ)
1>gdalpamrasterband.obj : error LNK2001: unresolved external symbol "public: int __thiscall CPLStringList::Count(void)const " (?Count@CPLStringList@@QBEHXZ)
1>gdalproxydataset.obj : error LNK2001: unresolved external symbol "public: int __thiscall CPLStringList::Count(void)const " (?Count@CPLStringList@@QBEHXZ)
...

And so on until it breaks.

CPLStringlist should require gdal_priv.h which resides in directory "D:\MsVS2010\Projects\gdal-1.9.0\gcore", but it makes no difference if I add it to "Additional Include Directories"

Regards

/Hans

-----Ursprungligt meddelande-----
Fr?n: Martin Chapman [mailto:chapmanm@pixia.com] 
Skickat: den 11 april 2012 22:56
Till: 'Frank Warmerdam'; Hans Jonsson
Kopia: gdal-dev@lists.osgeo.org
?mne: RE: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work

Microsoft VS 2010 - build of GDAL 1.9 64 and 32 bit works for me.

Best regards,
Martin

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Wednesday, April 11, 2012 12:56 PM
To: Hans Jonsson
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Microsoft VS 2010 - build of GDAL 1.9 does not work

Hans,

If you can't be more specific I don't think you should be mailing such a broad mailing list!

Please capture the first actual build error, and provide notes on anything unusual about how you are building, tools, etc.

I'm pretty sure I've build GDAL 1.9 with the makefiles and VS2010, so the devil will be in the details.

Best regards,
Frank

On Wed, Apr 11, 2012 at 11:41 AM, Hans Jonsson <hans.jonsson@metria.se>
wrote:
> CPL string something
>
> /Hans_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com light and sound - activate the windows | http://pobox.com/~warmerdam and watch the world go round - Rush? ? | Geospatial Software Developer _______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From starsareblueandfaraway at gmail.com  Thu Apr 12 07:04:31 2012
From: starsareblueandfaraway at gmail.com (Roy Hyunjin Han)
Date: Thu Apr 12 07:04:53 2012
Subject: [gdal-dev] Are unicode field values supported in the Python
	bindings for GDAL?
In-Reply-To: <4F858EA4.8060906@gmail.com>
References: <CABScDVsCdCCiYvxhW7UzWhrWo9XdUCDaFi3=pJf3sKQUZa4BEg@mail.gmail.com>
	<CAHXrU-+Ho7YOf0-j=kY-J2A+XEC7NPCeCu_x574K_LG-95rhrA@mail.gmail.com>
	<CABScDVszPfMf4BXNVPU=U8R6L91=bN8Jknnf7B4vDD_WLH1_YQ@mail.gmail.com>
	<CAHXrU-Keo6s8v7-UTBMm+9d9N+SXL6PQrqCZEJ7HOtPbbbiQVQ@mail.gmail.com>
	<CABScDVupEUz61sL6ZS1mJ2iA3SbbJsXy96zE=S+C71ObD9ADgQ@mail.gmail.com>
	<CABScDVuNruAR6apOBxD9bKM8HoNnOn3y99fyBX-YGPw3Fw+qTA@mail.gmail.com>
	<4F858EA4.8060906@gmail.com>
Message-ID: <CABScDVuMJK9VxAe9GZ-zhuKkS+Sk5gqyuwVCWNoeO0_3NgekPg@mail.gmail.com>

Le 11 avril 2012 10:01, Ari Jolma <ari.jolma@gmail.com> a ?crit :
> In the Perl bindings all strings going to GDAL internals are upgraded from
> Perl internal format to utf-8 and all strings coming from GDAL internals are
> marked for Perl to be utf-8.
>
> This is done in the Perl typemaps after a change last November.
> http://trac.osgeo.org/gdal/changeset/23405
>
> I don't see a similar problem in the Perl bindings as below. However utf-8
> strings are handled in Python differently from Perl.

Thank you for this information, Ari.  If the GDAL Perl bindings
support unicode, then GDAL supports unicode and the issue may be in
the Python bindings.
From vonengel at gmail.com  Thu Apr 12 07:39:23 2012
From: vonengel at gmail.com (vonengel)
Date: Thu Apr 12 07:39:55 2012
Subject: [gdal-dev] gdal_translate custom binary image format
Message-ID: <1334230763680-4851982.post@n6.nabble.com>

Hi folks,

I am quite new with gdal, and I am using it (or to be precise gdal2tiles) to
create a quadtree representation of large panoramic images (for further
out-of-core rendering). I now got a large dataset (300000x30000) in a simple
binary format (The 8bit RGB information is simply stored in sequential
order).
Is it possible to use gdal_translate to read and process the data?
Thanks for your help!

Cheers,
David


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-custom-binary-image-format-tp4851982p4851982.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Thu Apr 12 08:09:06 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr 12 08:09:41 2012
Subject: [gdal-dev] gdal_translate custom binary image format
In-Reply-To: <1334230763680-4851982.post@n6.nabble.com>
References: <1334230763680-4851982.post@n6.nabble.com>
Message-ID: <CAMKgpOaWJyRrmYCZRFwVPCHwdxrLnQmgNOftnRuQ9RVncKcY0w@mail.gmail.com>

David,

GDAL's vrt driver supports defining a raw file's structure in an xml file.
You should define the VRTRawRasterBand subclass.
http://www.gdal.org/gdal_vrttut.html

On Thu, Apr 12, 2012 at 5:09 PM, vonengel <vonengel@gmail.com> wrote:

> Hi folks,
>
> I am quite new with gdal, and I am using it (or to be precise gdal2tiles)
> to
> create a quadtree representation of large panoramic images (for further
> out-of-core rendering). I now got a large dataset (300000x30000) in a
> simple
> binary format (The 8bit RGB information is simply stored in sequential
> order).
> Is it possible to use gdal_translate to read and process the data?
> Thanks for your help!
>
> Cheers,
> David
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-translate-custom-binary-image-format-tp4851982p4851982.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120412/72fcd5f5/attachment.html
From jluis at ualg.pt  Thu Apr 12 08:44:08 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Apr 12 08:44:18 2012
Subject: [gdal-dev] broken trunk build on Win
Message-ID: <4F86CE18.4080502@ualg.pt>

Hi,

I made some false reports in the past about the build failures that 
ended up being caused by no starting by a "make clean", but that is not 
the case this time.

I'm getting these errors on linking the current head.

Joaquim

LIBCMT.lib(dosmap.obj) : error LNK2005: _errno already defined in 
MSVCRT.lib(MSVCR100.dll)
LIBCMT.lib(crt0dat.obj) : error LNK2005: _initterm_e already defined in 
MSVCRT.lib(MSVCR100.dll)
LIBCMT.lib(crt0dat.obj) : error LNK2005: exit already defined in 
MSVCRT.lib(MSVCR100.dll)
LIBCMT.lib(crt0dat.obj) : error LNK2005: _amsg_exit already defined in 
MSVCRT.lib(MSVCR100.dll)
LIBCMT.lib(tidtable.obj) : error LNK2005: _encoded_null already defined 
in MSVCRT.lib(MSVCR100.dll)
LIBCMT.lib(crtheap.obj) : error LNK2005: _malloc_crt already defined in 
MSVCRT.lib(MSVCR100.dll)
LIBCMT.lib(mlock.obj) : error LNK2005: _unlock already defined in 
MSVCRT.lib(MSVCR100.dll)
LIBCMT.lib(mlock.obj) : error LNK2005: _lock already defined in 
MSVCRT.lib(MSVCR100.dll)
LIBCMT.lib(hooks.obj) : error LNK2005: "void __cdecl terminate(void)" 
(?terminate@@YAXXZ) already defined in MSVCRT.lib(MSVCR100.dll)
LIBCMT.lib(crt0init.obj) : error LNK2005: __xi_a already defined in 
MSVCRT.lib(cinitexe.obj)
LIBCMT.lib(crt0init.obj) : error LNK2005: __xi_z already defined in 
MSVCRT.lib(cinitexe.obj)
LIBCMT.lib(crt0init.obj) : error LNK2005: __xc_a already defined in 
MSVCRT.lib(cinitexe.obj)
LIBCMT.lib(crt0init.obj) : error LNK2005: __xc_z already defined in 
MSVCRT.lib(cinitexe.obj)
LIBCMT.lib(mbctype.obj) : error LNK2005: _getmbcp already defined in 
MSVCRT.lib(MSVCR100.dll)
LIBCMT.lib(winxfltr.obj) : error LNK2005: __CppXcptFilter already 
defined in MSVCRT.lib(MSVCR100.dll)
LIBCMT.lib(lconv.obj) : error LNK2005: localeconv already defined in 
MSVCRT.lib(MSVCR100.dll)
MSVCRT.lib(MSVCR100.dll) : error LNK2005: _setmode already defined in 
LIBCMT.lib(setmode.obj)
MSVCRT.lib(MSVCR100.dll) : error LNK2005: _close already defined in 
LIBCMT.lib(close.obj)
MSVCRT.lib(MSVCR100.dll) : error LNK2005: _open already defined in 
LIBCMT.lib(open.obj)
    Creating library gdal_i.lib and object gdal_i.exp
LINK : warning LNK4098: defaultlib 'MSVCRT' conflicts with use of other 
libs; use /NODEFAULTLIB:library
LINK : warning LNK4098: defaultlib 'LIBCMT' conflicts with use of other 
libs; use /NODEFAULTLIB:library
LIBCMT.lib(crt0.obj) : error LNK2019: unresolved external symbol main 
referenced in function __tmainCRTStartup
gdal_w64.dll : fatal error LNK1120: 1 unresolved externals
From saarko at alaska.edu  Thu Apr 12 08:48:41 2012
From: saarko at alaska.edu (Scott Arko)
Date: Thu Apr 12 08:49:00 2012
Subject: [gdal-dev] gdal_translate custom binary image format
In-Reply-To: <1334230763680-4851982.post@n6.nabble.com>
References: <1334230763680-4851982.post@n6.nabble.com>
Message-ID: <CAFCnYQP0vqntmiBFvV6PYfiXkhjrYf5d5kJqv8JQqxqSh0VpVw@mail.gmail.com>

Hi David,


I have done a similar thing in the past by using the ENVI format driver.
 The ENVI format is just raw binary with a very simple text header file.
 You can easily create the header and then gdal will read your data.

You can find information on ENVI headers at
http://geol.hu/data/online_help/ENVI_Header_Format.html

Not all fields are required, so you only need to define the bare basics for
your data set. The vrt path is probably the more rigorous solution, but
this might be easier.

Thanks,
Scott



On Thu, Apr 12, 2012 at 3:39 AM, vonengel <vonengel@gmail.com> wrote:

> Hi folks,
>
> I am quite new with gdal, and I am using it (or to be precise gdal2tiles)
> to
> create a quadtree representation of large panoramic images (for further
> out-of-core rendering). I now got a large dataset (300000x30000) in a
> simple
> binary format (The 8bit RGB information is simply stored in sequential
> order).
> Is it possible to use gdal_translate to read and process the data?
> Thanks for your help!
>
> Cheers,
> David
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-translate-custom-binary-image-format-tp4851982p4851982.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120412/42559d1f/attachment.html
From chaitanya.ch at gmail.com  Thu Apr 12 08:54:04 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr 12 08:54:49 2012
Subject: [gdal-dev] Apply filter on VRT
In-Reply-To: <CAEcp1tBXVZ7diGzYJiLLaYJ2jtAyavwpZouae=3D9YgZ4N3bVw@mail.gmail.com>
References: <CAEcp1tBXVZ7diGzYJiLLaYJ2jtAyavwpZouae=3D9YgZ4N3bVw@mail.gmail.com>
Message-ID: <CAMKgpOYUC14tii9GUHTnhvC9oGDVEznEnuFx_iaJdZcU2ViP=g@mail.gmail.com>

Sa?d,

There should be a Kernel element in a KernelFilteredSource.
FYI, all the pixels whose kernel has a nodata pixel will be reported as a
nodata pixel.

On Wed, Apr 11, 2012 at 3:20 PM, Sa?d HESSANE <saad.hessane@gmail.com>wrote:

> Hy all,
>
> I have a VRT file generated with buildvrt utility :
>
> <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>   <SRS>...</SRS>
>>   <GeoTransform>...</GeoTransform>
>>   <VRTRasterBand dataType="UInt16" band="1">
>>     <NoDataValue>0</NoDataValue>
>>     <ColorInterp>Gray</ColorInterp>
>>     <ComplexSource>
>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>       <SourceBand>1</SourceBand>
>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>       <NODATA>0</NODATA>
>>     </ComplexSource>
>>     <ComplexSource>
>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>       <SourceBand>1</SourceBand>
>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>       <NODATA>0</NODATA>
>>     </ComplexSource>
>>   </VRTRasterBand>
>> </VRTDataset>
>>
>
> It's work fine with a gdal_translate.
> Now I want to apply a filter kernel to the VRT. I have to use the
> KernelFilteredSource.
> The gdal api say that VRTKernelFilteredSource is a sub-class of
> VRTComplexSource. So a VRTKernelFilteredSource *is *a VRTComplexSource.
> But if I replace VRTComplexSource by VRTKernelFilteredSource,
> gdal_translate crash. This is the new VRT :
>
> <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>   <SRS>...</SRS>
>>   <GeoTransform>...</GeoTransform>
>>   <VRTRasterBand dataType="UInt16" band="1">
>>     <NoDataValue>0</NoDataValue>
>>     <ColorInterp>Gray</ColorInterp>
>>     <KernelFilteredSource>
>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>       <SourceBand>1</SourceBand>
>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>       <NODATA>0</NODATA>
>>     </KernelFilteredSource>
>>     <KernelFilteredSource>
>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>       <SourceBand>1</SourceBand>
>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>       <NODATA>0</NODATA>
>>     </KernelFilteredSource>
>>   </VRTRasterBand>
>> </VRTDataset>
>>
>
> It's weird, I expected a polymorphism between VRTComplexSource and
> VRTKernelFilteredSource.
> So the question : how can I apply a filter to a VRT?
> Thank you !
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120412/da204eb3/attachment-0001.html
From even.rouault at mines-paris.org  Thu Apr 12 09:07:19 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr 12 09:07:57 2012
Subject: [gdal-dev] broken trunk build on Win
In-Reply-To: <4F86CE18.4080502@ualg.pt>
References: <4F86CE18.4080502@ualg.pt>
Message-ID: <1334236039.4f86d3877187a@webmail.free.fr>

Selon Joaquim Luis <jluis@ualg.pt>:

> Hi,
>
> I made some false reports in the past about the build failures that
> ended up being caused by no starting by a "make clean", but that is not
> the case this time.
>
> I'm getting these errors on linking the current head.

There must be something particular in your setup. I can see that MSVC2010 on
Win64 builds fine on Tamas Szekeres daily builds. See
http://www.gisinternals.com/sdk . Your errors look like something with linking
options.
From jluis at ualg.pt  Thu Apr 12 09:15:37 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Apr 12 09:15:49 2012
Subject: [gdal-dev] broken trunk build on Win
In-Reply-To: <1334236039.4f86d3877187a@webmail.free.fr>
References: <4F86CE18.4080502@ualg.pt>
	<1334236039.4f86d3877187a@webmail.free.fr>
Message-ID: <4F86D579.9070108@ualg.pt>

On 12-04-2012 13:07, Even Rouault wrote:
> Selon Joaquim Luis<jluis@ualg.pt>:
>
>> Hi,
>>
>> I made some false reports in the past about the build failures that
>> ended up being caused by no starting by a "make clean", but that is not
>> the case this time.
>>
>> I'm getting these errors on linking the current head.
> There must be something particular in your setup. I can see that MSVC2010 on
> Win64 builds fine on Tamas Szekeres daily builds. See
> http://www.gisinternals.com/sdk . Your errors look like something with linking
> options.

Well, I built GDAL last time on 29 Mars 2012 and haven't change anything 
on the setup after that. Only a svn update

From mateusz at loskot.net  Thu Apr 12 09:26:05 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Apr 12 09:27:09 2012
Subject: [gdal-dev] broken trunk build on Win
In-Reply-To: <4F86D579.9070108@ualg.pt>
References: <4F86CE18.4080502@ualg.pt>
	<1334236039.4f86d3877187a@webmail.free.fr>
	<4F86D579.9070108@ualg.pt>
Message-ID: <CABUeae8g74XkALexkD2OObmcc7TgQZ9KJ6HtS4yhdU5X35-a0A@mail.gmail.com>

On 12 April 2012 14:15, Joaquim Luis <jluis@ualg.pt> wrote:
> On 12-04-2012 13:07, Even Rouault wrote:
>> Selon Joaquim Luis<jluis@ualg.pt>:
>>
>>> Hi,
>>>
>>> I made some false reports in the past about the build failures that
>>> ended up being caused by no starting by a "make clean", but that is not
>>> the case this time.
>>>
>>> I'm getting these errors on linking the current head.
>>
>> There must be something particular in your setup. I can see that MSVC2010
>> on
>> Win64 builds fine on Tamas Szekeres daily builds. See
>> http://www.gisinternals.com/sdk . Your errors look like something with
>> linking
>> options.
>
>
> Well, I built GDAL last time on 29 Mars 2012 and haven't change anything on
> the setup after that.
>
> Only a svn update
.............^^^^^^^^^^^^^^

Clean and rebuild GDAL.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From jluis at ualg.pt  Thu Apr 12 09:34:35 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Apr 12 09:35:00 2012
Subject: [gdal-dev] broken trunk build on Win
In-Reply-To: <CABUeae8g74XkALexkD2OObmcc7TgQZ9KJ6HtS4yhdU5X35-a0A@mail.gmail.com>
References: <4F86CE18.4080502@ualg.pt>
	<1334236039.4f86d3877187a@webmail.free.fr>
	<4F86D579.9070108@ualg.pt>
	<CABUeae8g74XkALexkD2OObmcc7TgQZ9KJ6HtS4yhdU5X35-a0A@mail.gmail.com>
Message-ID: <4F86D9EB.90207@ualg.pt>


>>>> I made some false reports in the past about the build failures that
>>>> ended up being caused by no starting by a "make clean", but that is not
>>>> the case this time.

> .............^^^^^^^^^^^^^^
>
> Clean and rebuild GDAL.

As I first said ...
From vonengel at gmail.com  Thu Apr 12 09:43:44 2012
From: vonengel at gmail.com (vonengel)
Date: Thu Apr 12 09:44:34 2012
Subject: [gdal-dev] Re: gdal_translate custom binary image format
In-Reply-To: <CAMKgpOaWJyRrmYCZRFwVPCHwdxrLnQmgNOftnRuQ9RVncKcY0w@mail.gmail.com>
References: <1334230763680-4851982.post@n6.nabble.com>
	<CAMKgpOaWJyRrmYCZRFwVPCHwdxrLnQmgNOftnRuQ9RVncKcY0w@mail.gmail.com>
Message-ID: <1334238224068-4854974.post@n6.nabble.com>

Hi folks,

thank you for you hints!
It is working and I am waiting for the gdal2tiles script to build my 25GB
quadtree. :-)

Cheers,
David

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-translate-custom-binary-image-format-tp4851982p4854974.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From saad.hessane at gmail.com  Thu Apr 12 09:51:25 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Thu Apr 12 09:51:42 2012
Subject: [gdal-dev] Apply filter on VRT
In-Reply-To: <CAMKgpOYUC14tii9GUHTnhvC9oGDVEznEnuFx_iaJdZcU2ViP=g@mail.gmail.com>
References: <CAEcp1tBXVZ7diGzYJiLLaYJ2jtAyavwpZouae=3D9YgZ4N3bVw@mail.gmail.com>
	<CAMKgpOYUC14tii9GUHTnhvC9oGDVEznEnuFx_iaJdZcU2ViP=g@mail.gmail.com>
Message-ID: <CAEcp1tBqjZ7o8L3YU0C7GnCmmWMNmbpuE3Qr8L4dpjKYfCNUPA@mail.gmail.com>

Thank you Chaitanya for the answer,

I do the test with the kenel element like the documentation :


> <Kernel normalized="1">
>     <Size>3</Size>
>     <Coefs>0.11111111 0.11111111 0.11111111 0.11111111 0.11111111
> 0.11111111 0.11111111 0.11111111 0.11111111</Coefs>
> </Kernel>
>
It's the same probleme, gdal_translate crash. But if the VRTRasterBand have
just one KernelFilteredSource element, gdal_translate work fine and apply
the filtre correctely.

The poblem appears if there are more than one KernelFilteredSource element
in the VRTRasterBand.



2012/4/12 Chaitanya kumar CH <chaitanya.ch@gmail.com>

> Sa?d,
>
> There should be a Kernel element in a KernelFilteredSource.
> FYI, all the pixels whose kernel has a nodata pixel will be reported as a
> nodata pixel.
>
>  On Wed, Apr 11, 2012 at 3:20 PM, Sa?d HESSANE <saad.hessane@gmail.com>wrote:
>
>>  Hy all,
>>
>> I have a VRT file generated with buildvrt utility :
>>
>> <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>>   <SRS>...</SRS>
>>>   <GeoTransform>...</GeoTransform>
>>>   <VRTRasterBand dataType="UInt16" band="1">
>>>     <NoDataValue>0</NoDataValue>
>>>     <ColorInterp>Gray</ColorInterp>
>>>     <ComplexSource>
>>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>>       <SourceBand>1</SourceBand>
>>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>>       <NODATA>0</NODATA>
>>>     </ComplexSource>
>>>     <ComplexSource>
>>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>>       <SourceBand>1</SourceBand>
>>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>>       <NODATA>0</NODATA>
>>>     </ComplexSource>
>>>   </VRTRasterBand>
>>> </VRTDataset>
>>>
>>
>> It's work fine with a gdal_translate.
>> Now I want to apply a filter kernel to the VRT. I have to use the
>> KernelFilteredSource.
>> The gdal api say that VRTKernelFilteredSource is a sub-class of
>> VRTComplexSource. So a VRTKernelFilteredSource *is *a VRTComplexSource.
>> But if I replace VRTComplexSource by VRTKernelFilteredSource,
>> gdal_translate crash. This is the new VRT :
>>
>> <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>>   <SRS>...</SRS>
>>>   <GeoTransform>...</GeoTransform>
>>>   <VRTRasterBand dataType="UInt16" band="1">
>>>     <NoDataValue>0</NoDataValue>
>>>     <ColorInterp>Gray</ColorInterp>
>>>     <KernelFilteredSource>
>>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>>       <SourceBand>1</SourceBand>
>>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>>       <NODATA>0</NODATA>
>>>     </KernelFilteredSource>
>>>     <KernelFilteredSource>
>>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>>       <SourceBand>1</SourceBand>
>>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>>       <NODATA>0</NODATA>
>>>     </KernelFilteredSource>
>>>   </VRTRasterBand>
>>> </VRTDataset>
>>>
>>
>> It's weird, I expected a polymorphism between VRTComplexSource and
>> VRTKernelFilteredSource.
>> So the question : how can I apply a filter to a VRT?
>> Thank you !
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120412/699819f7/attachment.html
From chaitanya.ch at gmail.com  Thu Apr 12 09:56:58 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Apr 12 09:57:36 2012
Subject: [gdal-dev] Apply filter on VRT
In-Reply-To: <CAEcp1tBqjZ7o8L3YU0C7GnCmmWMNmbpuE3Qr8L4dpjKYfCNUPA@mail.gmail.com>
References: <CAEcp1tBXVZ7diGzYJiLLaYJ2jtAyavwpZouae=3D9YgZ4N3bVw@mail.gmail.com>
	<CAMKgpOYUC14tii9GUHTnhvC9oGDVEznEnuFx_iaJdZcU2ViP=g@mail.gmail.com>
	<CAEcp1tBqjZ7o8L3YU0C7GnCmmWMNmbpuE3Qr8L4dpjKYfCNUPA@mail.gmail.com>
Message-ID: <CAMKgpOa0QTA09_9Smvbe9Fv3ved5244R=3C_p_TxjwzrzdBhHA@mail.gmail.com>

Sa?d,

Can you provide the vrt file causing the crash? Also, please show me the
error messages you got.

On Thu, Apr 12, 2012 at 7:21 PM, Sa?d HESSANE <saad.hessane@gmail.com>wrote:

> Thank you Chaitanya for the answer,
>
> I do the test with the kenel element like the documentation :
>
>
>> <Kernel normalized="1">
>>     <Size>3</Size>
>>     <Coefs>0.11111111 0.11111111 0.11111111 0.11111111 0.11111111
>> 0.11111111 0.11111111 0.11111111 0.11111111</Coefs>
>> </Kernel>
>>
> It's the same probleme, gdal_translate crash. But if the VRTRasterBand
> have just one KernelFilteredSource element, gdal_translate work fine and
> apply the filtre correctely.
>
> The poblem appears if there are more than one KernelFilteredSource element
> in the VRTRasterBand.
>
>
>
> 2012/4/12 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>
>> Sa?d,
>>
>> There should be a Kernel element in a KernelFilteredSource.
>> FYI, all the pixels whose kernel has a nodata pixel will be reported as a
>> nodata pixel.
>>
>>  On Wed, Apr 11, 2012 at 3:20 PM, Sa?d HESSANE <saad.hessane@gmail.com>wrote:
>>
>>>  Hy all,
>>>
>>> I have a VRT file generated with buildvrt utility :
>>>
>>> <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>>>   <SRS>...</SRS>
>>>>   <GeoTransform>...</GeoTransform>
>>>>   <VRTRasterBand dataType="UInt16" band="1">
>>>>     <NoDataValue>0</NoDataValue>
>>>>     <ColorInterp>Gray</ColorInterp>
>>>>     <ComplexSource>
>>>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>>>       <SourceBand>1</SourceBand>
>>>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>>>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>>>       <NODATA>0</NODATA>
>>>>     </ComplexSource>
>>>>     <ComplexSource>
>>>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>>>       <SourceBand>1</SourceBand>
>>>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>>>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>>>       <NODATA>0</NODATA>
>>>>     </ComplexSource>
>>>>   </VRTRasterBand>
>>>> </VRTDataset>
>>>>
>>>
>>> It's work fine with a gdal_translate.
>>> Now I want to apply a filter kernel to the VRT. I have to use the
>>> KernelFilteredSource.
>>> The gdal api say that VRTKernelFilteredSource is a sub-class of
>>> VRTComplexSource. So a VRTKernelFilteredSource *is *a VRTComplexSource.
>>> But if I replace VRTComplexSource by VRTKernelFilteredSource,
>>> gdal_translate crash. This is the new VRT :
>>>
>>> <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>>>   <SRS>...</SRS>
>>>>   <GeoTransform>...</GeoTransform>
>>>>   <VRTRasterBand dataType="UInt16" band="1">
>>>>     <NoDataValue>0</NoDataValue>
>>>>     <ColorInterp>Gray</ColorInterp>
>>>>     <KernelFilteredSource>
>>>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>>>       <SourceBand>1</SourceBand>
>>>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>>>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>>>       <NODATA>0</NODATA>
>>>>     </KernelFilteredSource>
>>>>     <KernelFilteredSource>
>>>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>>>       <SourceBand>1</SourceBand>
>>>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>>>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>>>       <NODATA>0</NODATA>
>>>>     </KernelFilteredSource>
>>>>   </VRTRasterBand>
>>>> </VRTDataset>
>>>>
>>>
>>> It's weird, I expected a polymorphism between VRTComplexSource and
>>> VRTKernelFilteredSource.
>>> So the question : how can I apply a filter to a VRT?
>>> Thank you !
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120412/1bc86579/attachment-0001.html
From mateusz at loskot.net  Thu Apr 12 10:06:59 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Apr 12 10:07:45 2012
Subject: [gdal-dev] broken trunk build on Win
In-Reply-To: <4F86D9EB.90207@ualg.pt>
References: <4F86CE18.4080502@ualg.pt>
	<1334236039.4f86d3877187a@webmail.free.fr>
	<4F86D579.9070108@ualg.pt>
	<CABUeae8g74XkALexkD2OObmcc7TgQZ9KJ6HtS4yhdU5X35-a0A@mail.gmail.com>
	<4F86D9EB.90207@ualg.pt>
Message-ID: <CABUeae9ihupHt8xopdJWwqvJu-+Es0PDQkdxoDJRXSYzGhQpNw@mail.gmail.com>

On 12 April 2012 14:34, Joaquim Luis <jluis@ualg.pt> wrote:
>
>>>>> I made some false reports in the past about the build failures that
>>>>> ended up being caused by no starting by a "make clean", but that is not
>>>>> the case this time.
>
>
>> .............^^^^^^^^^^^^^^
>>
>> Clean and rebuild GDAL.
>
>
> As I first said ...

GDAL builds with Visual C++ 10.0 without problems (log attached)

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal-r24219-msvc100-x64.zip
Type: application/zip
Size: 23803 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120412/9f2f678c/gdal-r24219-msvc100-x64-0001.zip
From saad.hessane at gmail.com  Thu Apr 12 10:47:08 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Thu Apr 12 10:47:16 2012
Subject: [gdal-dev] Apply filter on VRT
In-Reply-To: <CAMKgpOa0QTA09_9Smvbe9Fv3ved5244R=3C_p_TxjwzrzdBhHA@mail.gmail.com>
References: <CAEcp1tBXVZ7diGzYJiLLaYJ2jtAyavwpZouae=3D9YgZ4N3bVw@mail.gmail.com>
	<CAMKgpOYUC14tii9GUHTnhvC9oGDVEznEnuFx_iaJdZcU2ViP=g@mail.gmail.com>
	<CAEcp1tBqjZ7o8L3YU0C7GnCmmWMNmbpuE3Qr8L4dpjKYfCNUPA@mail.gmail.com>
	<CAMKgpOa0QTA09_9Smvbe9Fv3ved5244R=3C_p_TxjwzrzdBhHA@mail.gmail.com>
Message-ID: <CAEcp1tBbQeyevG2tZmNEv9v0QYqkLS5Aw62mAd-rZ=itfS8_Fw@mail.gmail.com>

Yes of course :

>  <VRTDataset rasterXSize="52436" rasterYSize="32400">
>   <SRS>...</SRS>
>   <GeoTransform>...</GeoTransform>
>   <VRTRasterBand dataType="UInt16" band="1">
>     <NoDataValue>0</NoDataValue>
>     <ColorInterp>Gray</ColorInterp>
>     <KernelFilteredSource>
>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>       <NODATA>0</NODATA>
>     </KernelFilteredSource>
>     <KernelFilteredSource>
>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>       <NODATA>0</NODATA>
>     </KernelFilteredSource>
>   </VRTRasterBand>
> </VRTDataset>


It's really simple to reproduce the problem : do a "buildvrt" on a set of
raster ( > 1 raster ). Edit the vrt file and rename "ComplexSource" tag
with "KernelFilteredSource". add if you want the kernel definition.
Now you can do a gdal_translate to write a tiff file.

There's no error in the terminale.
gdal_translate crash and a windows error dialog appears saying that the the
program has encountered an error and have to be close (the error is in
frensh sorry for my bad english...).
I'm using gdal 1.9 x64 onto Win 7 x64.



2012/4/12 Chaitanya kumar CH <chaitanya.ch@gmail.com>

> Sa?d,
>
> Can you provide the vrt file causing the crash? Also, please show me the
> error messages you got.
>
>
> On Thu, Apr 12, 2012 at 7:21 PM, Sa?d HESSANE <saad.hessane@gmail.com>wrote:
>
>> Thank you Chaitanya for the answer,
>>
>> I do the test with the kenel element like the documentation :
>>
>>
>>> <Kernel normalized="1">
>>>     <Size>3</Size>
>>>     <Coefs>0.11111111 0.11111111 0.11111111 0.11111111 0.11111111
>>> 0.11111111 0.11111111 0.11111111 0.11111111</Coefs>
>>> </Kernel>
>>>
>> It's the same probleme, gdal_translate crash. But if the VRTRasterBand
>> have just one KernelFilteredSource element, gdal_translate work fine and
>> apply the filtre correctely.
>>
>> The poblem appears if there are more than one KernelFilteredSource
>> element in the VRTRasterBand.
>>
>>
>>
>> 2012/4/12 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>>
>>> Sa?d,
>>>
>>> There should be a Kernel element in a KernelFilteredSource.
>>> FYI, all the pixels whose kernel has a nodata pixel will be reported as
>>> a nodata pixel.
>>>
>>>  On Wed, Apr 11, 2012 at 3:20 PM, Sa?d HESSANE <saad.hessane@gmail.com>wrote:
>>>
>>>>  Hy all,
>>>>
>>>> I have a VRT file generated with buildvrt utility :
>>>>
>>>> <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>>>>   <SRS>...</SRS>
>>>>>   <GeoTransform>...</GeoTransform>
>>>>>   <VRTRasterBand dataType="UInt16" band="1">
>>>>>     <NoDataValue>0</NoDataValue>
>>>>>     <ColorInterp>Gray</ColorInterp>
>>>>>     <ComplexSource>
>>>>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>>>>       <SourceBand>1</SourceBand>
>>>>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>>>>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>>>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>>>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>>>>       <NODATA>0</NODATA>
>>>>>     </ComplexSource>
>>>>>     <ComplexSource>
>>>>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>>>>       <SourceBand>1</SourceBand>
>>>>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>>>>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>>>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>>>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>>>>       <NODATA>0</NODATA>
>>>>>     </ComplexSource>
>>>>>   </VRTRasterBand>
>>>>> </VRTDataset>
>>>>>
>>>>
>>>> It's work fine with a gdal_translate.
>>>> Now I want to apply a filter kernel to the VRT. I have to use the
>>>> KernelFilteredSource.
>>>> The gdal api say that VRTKernelFilteredSource is a sub-class of
>>>> VRTComplexSource. So a VRTKernelFilteredSource *is *a VRTComplexSource.
>>>> But if I replace VRTComplexSource by VRTKernelFilteredSource,
>>>> gdal_translate crash. This is the new VRT :
>>>>
>>>> <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>>>>   <SRS>...</SRS>
>>>>>   <GeoTransform>...</GeoTransform>
>>>>>   <VRTRasterBand dataType="UInt16" band="1">
>>>>>     <NoDataValue>0</NoDataValue>
>>>>>     <ColorInterp>Gray</ColorInterp>
>>>>>     <KernelFilteredSource>
>>>>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>>>>       <SourceBand>1</SourceBand>
>>>>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>>>>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>>>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>>>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>>>>       <NODATA>0</NODATA>
>>>>>     </KernelFilteredSource>
>>>>>     <KernelFilteredSource>
>>>>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>>>>       <SourceBand>1</SourceBand>
>>>>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>>>>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>>>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>>>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>>>>       <NODATA>0</NODATA>
>>>>>     </KernelFilteredSource>
>>>>>   </VRTRasterBand>
>>>>> </VRTDataset>
>>>>>
>>>>
>>>> It's weird, I expected a polymorphism between VRTComplexSource and
>>>> VRTKernelFilteredSource.
>>>> So the question : how can I apply a filter to a VRT?
>>>> Thank you !
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120412/a2e38622/attachment.html
From ivan.lucena at pmldnet.com  Thu Apr 12 11:00:21 2012
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu Apr 12 11:01:11 2012
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gYnJva2VuIHRydW5rIGJ1aWxkIG9uIFdpbg==?=
In-Reply-To: <CABUeae9ihupHt8xopdJWwqvJu-+Es0PDQkdxoDJRXSYzGhQpNw@mail.gmail.com>
References: <4F86CE18.4080502@ualg.pt>
	<1334236039.4f86d3877187a@webmail.free.fr>
	<4F86D579.9070108@ualg.pt>
	<CABUeae8g74XkALexkD2OObmcc7TgQZ9KJ6HtS4yhdU5X35-a0A@mail.gmail.com>
	<4F86D9EB.90207@ualg.pt>
	<CABUeae9ihupHt8xopdJWwqvJu-+Es0PDQkdxoDJRXSYzGhQpNw@mail.gmail.com>
Message-ID: <20120412150021.30707.qmail@s466.sureserver.com>

Ol? Joaquim,

Sometimes a SVN update bring things that require a complete clean up before we can rebuild it again, so you need to run:

nmake -f makefile.vc clean
nmake -f makefile.vc
nmake -f makefile.vc install

If you use one of those .vcproj generated by makegdal_gen.bat you can just click Crtl+Alt+F7 or go to the Build menu and "Rebuild solution". That is going to do do the same calls to nmake on the same makefile.vc.

You should do the same if you make change to your own class definition on .hpp files. If you don't you will see crazy bugs that doesn't make any sense just because thing are not in memory where they supposed to.

The GDAL makefile are not very automatic as we would expected of makefiles that checks for changes and act on it.

Boa Sorte!

Ivan





>  -------Original Message-------
>  From: Mateusz Loskot <mateusz@loskot.net>
>  To: Joaquim Luis <jluis@ualg.pt>
>  Cc: gdal <gdal-dev@lists.osgeo.org>
>  Subject: Re: [gdal-dev] broken trunk build on Win
>  Sent: Apr 12 '12 09:06
>  
>  On 12 April 2012 14:34, Joaquim Luis <jluis@ualg.pt> wrote:
>  >
>  >>>>> I made some false reports in the past about the build failures that
>  >>>>> ended up being caused by no starting by a "make clean", but that is not
>  >>>>> the case this time.
>  >
>  >
>  >> .............^^^^^^^^^^^^^^
>  >>
>  >> Clean and rebuild GDAL.
>  >
>  >
>  > As I first said ...
>  
>  GDAL builds with Visual C++ 10.0 without problems (log attached)
>  
>  Best regards,
>  --
>  Mateusz Loskot, http://mateusz.loskot.net
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jmckenna at gatewaygeomatics.com  Thu Apr 12 11:24:10 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu Apr 12 11:24:45 2012
Subject: [gdal-dev] broken trunk build on Win
In-Reply-To: <4F86CE18.4080502@ualg.pt>
References: <4F86CE18.4080502@ualg.pt>
Message-ID: <4F86F39A.5070503@gatewaygeomatics.com>

Hi Joaquim,

I've definitely been in a similar situation before.  Most of the time,
when I get those 'LIBCMT' or 'MSVCRT' conflict messages, it is because I
built a dependent library with the /MT option by mistake, causing the
GDAL built to try to include LIBCMT.lib (but GDAL and all of its
dependecies are built with /MD).

As an aside, for everyone reading: I'm kind of surprised to read that
many GDAL-win devs are using MSVC2010 now, I use MSVC2008 because so
many of GDAL's libraries barely 'support' that older version, let alone
the latest.  I guess I should look at upgrading to MSVC2010, but I'm
extremely scared about if/how I'll be able to compile some of those
trickier/barely-supported windows dependencies with the new version.

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/





On 12-04-12 9:44 AM, Joaquim Luis wrote:
> Hi,
> 
> I made some false reports in the past about the build failures that
> ended up being caused by no starting by a "make clean", but that is not
> the case this time.
> 
> I'm getting these errors on linking the current head.
> 
> Joaquim
> 
> LIBCMT.lib(dosmap.obj) : error LNK2005: _errno already defined in
> MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(crt0dat.obj) : error LNK2005: _initterm_e already defined in
> MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(crt0dat.obj) : error LNK2005: exit already defined in
> MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(crt0dat.obj) : error LNK2005: _amsg_exit already defined in
> MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(tidtable.obj) : error LNK2005: _encoded_null already defined
> in MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(crtheap.obj) : error LNK2005: _malloc_crt already defined in
> MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(mlock.obj) : error LNK2005: _unlock already defined in
> MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(mlock.obj) : error LNK2005: _lock already defined in
> MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(hooks.obj) : error LNK2005: "void __cdecl terminate(void)"
> (?terminate@@YAXXZ) already defined in MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(crt0init.obj) : error LNK2005: __xi_a already defined in
> MSVCRT.lib(cinitexe.obj)
> LIBCMT.lib(crt0init.obj) : error LNK2005: __xi_z already defined in
> MSVCRT.lib(cinitexe.obj)
> LIBCMT.lib(crt0init.obj) : error LNK2005: __xc_a already defined in
> MSVCRT.lib(cinitexe.obj)
> LIBCMT.lib(crt0init.obj) : error LNK2005: __xc_z already defined in
> MSVCRT.lib(cinitexe.obj)
> LIBCMT.lib(mbctype.obj) : error LNK2005: _getmbcp already defined in
> MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(winxfltr.obj) : error LNK2005: __CppXcptFilter already
> defined in MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(lconv.obj) : error LNK2005: localeconv already defined in
> MSVCRT.lib(MSVCR100.dll)
> MSVCRT.lib(MSVCR100.dll) : error LNK2005: _setmode already defined in
> LIBCMT.lib(setmode.obj)
> MSVCRT.lib(MSVCR100.dll) : error LNK2005: _close already defined in
> LIBCMT.lib(close.obj)
> MSVCRT.lib(MSVCR100.dll) : error LNK2005: _open already defined in
> LIBCMT.lib(open.obj)
>    Creating library gdal_i.lib and object gdal_i.exp
> LINK : warning LNK4098: defaultlib 'MSVCRT' conflicts with use of other
> libs; use /NODEFAULTLIB:library
> LINK : warning LNK4098: defaultlib 'LIBCMT' conflicts with use of other
> libs; use /NODEFAULTLIB:library
> LIBCMT.lib(crt0.obj) : error LNK2019: unresolved external symbol main
> referenced in function __tmainCRTStartup
> gdal_w64.dll : fatal error LNK1120: 1 unresolved externals
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From jluis at ualg.pt  Thu Apr 12 12:00:49 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Apr 12 12:37:34 2012
Subject: [gdal-dev] broken trunk build on Win
In-Reply-To: <4F86F39A.5070503@gatewaygeomatics.com>
References: <4F86CE18.4080502@ualg.pt> <4F86F39A.5070503@gatewaygeomatics.com>
Message-ID: <4F86FC31.4000304@ualg.pt>

On 12-04-2012 16:24, Jeff McKenna wrote:
> Hi Joaquim,
>
> I've definitely been in a similar situation before.  Most of the time,
> when I get those 'LIBCMT' or 'MSVCRT' conflict messages, it is because I
> built a dependent library with the /MT option by mistake, causing the
> GDAL built to try to include LIBCMT.lib (but GDAL and all of its
> dependecies are built with /MD).

Jeff,

Thanks for the input. I have not yet time to check one thing that I 
might have change in the last week and could eventually explain the errors.
Someone complained to me that GMT (that uses the GDAL dlls prepared by 
me) was not running on a XP64. It turned out that it was and option in 
libcurl build. I made one hand change to an header and I think that I 
did not rebuild after having reverted the change.
It will be strange that it is the culprit but otherwise I have no idea 
on what it is, and I build GDAL on Win for a couple of years now.

> As an aside, for everyone reading: I'm kind of surprised to read that
> many GDAL-win devs are using MSVC2010 now, I use MSVC2008 because so
> many of GDAL's libraries barely 'support' that older version, let alone
> the latest.  I guess I should look at upgrading to MSVC2010, but I'm
> extremely scared about if/how I'll be able to compile some of those
> trickier/barely-supported windows dependencies with the new version.

Well, if you build the dependencies your self is a bit of a work, but 
most of them have CMake scripts now which greatly simplify the job.

This is probably not yet widely spread out, but one of the GMT 
developers (Florian Wobbe) made a CMake build for netCDF4.1.3.
See instructions on
http://gmtrac.soest.hawaii.edu/projects/gmt/wiki/BuildingGMT

Joaquim



From jgrn at illinois.edu  Thu Apr 12 15:40:43 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Thu Apr 12 15:40:54 2012
Subject: [gdal-dev] NITF to ENVI format failure
Message-ID: <CABG0rfsjf7ZNTvqX=aEiEZmtz5p4h-BzuCQQ6HR7y9Rv4anuPQ@mail.gmail.com>

GDALers:

I've got some DigitalGlobe Worldview-2 files in NITF format, but I'm
not able to convert it from NITF to ENVI:

> gdal_translate -of ENVI 11MAY05170702-M1BS-052548267010_01_P001.NTF 11MAY05170702-M1BS-052548267010_01_P001.envi
[some time passes]
Input file size is 9216, 6144
0ERROR 4: Attempt to create file
`11MAY05170702-M1BS-052548267010_01_P001.envi' failed.
[a bit more time passes]
> [back to command line]

Any ideas?

--j

-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307, Skype: jgrn3007
http://www.geog.illinois.edu/people/JonathanGreenberg.html
From warmerdam at pobox.com  Thu Apr 12 15:47:34 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 12 15:48:10 2012
Subject: [gdal-dev] NITF to ENVI format failure
In-Reply-To: <CABG0rfsjf7ZNTvqX=aEiEZmtz5p4h-BzuCQQ6HR7y9Rv4anuPQ@mail.gmail.com>
References: <CABG0rfsjf7ZNTvqX=aEiEZmtz5p4h-BzuCQQ6HR7y9Rv4anuPQ@mail.gmail.com>
Message-ID: <CA+YzLBeka_h14BKYMgTAan7ryPrNr-zBrbrR96VN8+zJ7da=tw@mail.gmail.com>

On Thu, Apr 12, 2012 at 12:40 PM, Jonathan Greenberg <jgrn@illinois.edu> wrote:
> GDALers:
>
> I've got some DigitalGlobe Worldview-2 files in NITF format, but I'm
> not able to convert it from NITF to ENVI:
>
>> gdal_translate -of ENVI 11MAY05170702-M1BS-052548267010_01_P001.NTF 11MAY05170702-M1BS-052548267010_01_P001.envi
> [some time passes]
> Input file size is 9216, 6144
> 0ERROR 4: Attempt to create file
> `11MAY05170702-M1BS-052548267010_01_P001.envi' failed.
> [a bit more time passes]
>> [back to command line]
>
> Any ideas?
>

Jonathan,

Well, that is sort of lame error reporting out of gdal_translate.  Can you
make the input file available for testing?  If not, perhaps try running
with debug on?

ie.
gdal_translate --debug on ...

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From jgrn at illinois.edu  Thu Apr 12 15:54:36 2012
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Thu Apr 12 15:54:40 2012
Subject: [gdal-dev] NITF to ENVI format failure
In-Reply-To: <CA+YzLBeka_h14BKYMgTAan7ryPrNr-zBrbrR96VN8+zJ7da=tw@mail.gmail.com>
References: <CABG0rfsjf7ZNTvqX=aEiEZmtz5p4h-BzuCQQ6HR7y9Rv4anuPQ@mail.gmail.com>
	<CA+YzLBeka_h14BKYMgTAan7ryPrNr-zBrbrR96VN8+zJ7da=tw@mail.gmail.com>
Message-ID: <CABG0rfsEdLW5Kuc97eUp1PmBG2D7kbdmuGwyHfqLGUUfzwQOaQ@mail.gmail.com>

Here's it with debug ON:

> gdal_translate -of ENVI 11MAY05170702-P1BS-052548267010_01_P001.NTF 11MAY05170702-P1BS-052548267010_01_P001.envi --debug ON
GDAL: GDALOpen(/vsisubfile/3884_395220981,11MAY05170702-P1BS-052548267010_01_P001.NTF,
this=0x66a420) succeeds as JPEG2000.
GDAL: NITFDataset::Open() wasn't able to derive a first order
geotransform.  It will be returned as GCPs.
GDAL: GDALOpen(11MAY05170702-P1BS-052548267010_01_P001.NTF,
this=0x669450) succeeds as NITF.
Input file size is 35840, 24576
0GDAL: Using default GDALDriver::CreateCopy implementation.
GDAL: GDALDriver::Create(ENVI,11MAY05170702-P1BS-052548267010_01_P001.envi,35840,24576,1,UInt16,(nil))
ERROR 4: Attempt to create file
`11MAY05170702-P1BS-052548267010_01_P001.envi' failed.

GDAL: GDALClose(/vsisubfile/3884_395220981,11MAY05170702-P1BS-052548267010_01_P001.NTF,
this=0x66a420)
GDAL: GDALClose(11MAY05170702-P1BS-052548267010_01_P001.NTF, this=0x669450)

--j


On Thu, Apr 12, 2012 at 2:47 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On Thu, Apr 12, 2012 at 12:40 PM, Jonathan Greenberg <jgrn@illinois.edu> wrote:
>> GDALers:
>>
>> I've got some DigitalGlobe Worldview-2 files in NITF format, but I'm
>> not able to convert it from NITF to ENVI:
>>
>>> gdal_translate -of ENVI 11MAY05170702-M1BS-052548267010_01_P001.NTF 11MAY05170702-M1BS-052548267010_01_P001.envi
>> [some time passes]
>> Input file size is 9216, 6144
>> 0ERROR 4: Attempt to create file
>> `11MAY05170702-M1BS-052548267010_01_P001.envi' failed.
>> [a bit more time passes]
>>> [back to command line]
>>
>> Any ideas?
>>
>
> Jonathan,
>
> Well, that is sort of lame error reporting out of gdal_translate. ?Can you
> make the input file available for testing? ?If not, perhaps try running
> with debug on?
>
> ie.
> gdal_translate --debug on ...
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer



-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307, Skype: jgrn3007
http://www.geog.illinois.edu/people/JonathanGreenberg.html
From etourigny.dev at gmail.com  Thu Apr 12 16:06:08 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Apr 12 16:06:58 2012
Subject: [gdal-dev] NITF to ENVI format failure
In-Reply-To: <CABG0rfsEdLW5Kuc97eUp1PmBG2D7kbdmuGwyHfqLGUUfzwQOaQ@mail.gmail.com>
References: <CABG0rfsjf7ZNTvqX=aEiEZmtz5p4h-BzuCQQ6HR7y9Rv4anuPQ@mail.gmail.com>
	<CA+YzLBeka_h14BKYMgTAan7ryPrNr-zBrbrR96VN8+zJ7da=tw@mail.gmail.com>
	<CABG0rfsEdLW5Kuc97eUp1PmBG2D7kbdmuGwyHfqLGUUfzwQOaQ@mail.gmail.com>
Message-ID: <CA+TxYvNP4yFkSQantQNuuJ6sQg1wrkWYe=ix46_fqN31QaGM0w@mail.gmail.com>

looks to me like you do not have write permissions for that directory.

If on linux try 'cp 11MAY05170702-P1BS-052548267010_01_P001.NTF tmp1.NTF'

On Thu, Apr 12, 2012 at 4:54 PM, Jonathan Greenberg <jgrn@illinois.edu> wrote:
> Here's it with debug ON:
>
>> gdal_translate -of ENVI 11MAY05170702-P1BS-052548267010_01_P001.NTF 11MAY05170702-P1BS-052548267010_01_P001.envi --debug ON
> GDAL: GDALOpen(/vsisubfile/3884_395220981,11MAY05170702-P1BS-052548267010_01_P001.NTF,
> this=0x66a420) succeeds as JPEG2000.
> GDAL: NITFDataset::Open() wasn't able to derive a first order
> geotransform. ?It will be returned as GCPs.
> GDAL: GDALOpen(11MAY05170702-P1BS-052548267010_01_P001.NTF,
> this=0x669450) succeeds as NITF.
> Input file size is 35840, 24576
> 0GDAL: Using default GDALDriver::CreateCopy implementation.
> GDAL: GDALDriver::Create(ENVI,11MAY05170702-P1BS-052548267010_01_P001.envi,35840,24576,1,UInt16,(nil))
> ERROR 4: Attempt to create file
> `11MAY05170702-P1BS-052548267010_01_P001.envi' failed.
>
> GDAL: GDALClose(/vsisubfile/3884_395220981,11MAY05170702-P1BS-052548267010_01_P001.NTF,
> this=0x66a420)
> GDAL: GDALClose(11MAY05170702-P1BS-052548267010_01_P001.NTF, this=0x669450)
>
> --j
>
>
> On Thu, Apr 12, 2012 at 2:47 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>> On Thu, Apr 12, 2012 at 12:40 PM, Jonathan Greenberg <jgrn@illinois.edu> wrote:
>>> GDALers:
>>>
>>> I've got some DigitalGlobe Worldview-2 files in NITF format, but I'm
>>> not able to convert it from NITF to ENVI:
>>>
>>>> gdal_translate -of ENVI 11MAY05170702-M1BS-052548267010_01_P001.NTF 11MAY05170702-M1BS-052548267010_01_P001.envi
>>> [some time passes]
>>> Input file size is 9216, 6144
>>> 0ERROR 4: Attempt to create file
>>> `11MAY05170702-M1BS-052548267010_01_P001.envi' failed.
>>> [a bit more time passes]
>>>> [back to command line]
>>>
>>> Any ideas?
>>>
>>
>> Jonathan,
>>
>> Well, that is sort of lame error reporting out of gdal_translate. ?Can you
>> make the input file available for testing? ?If not, perhaps try running
>> with debug on?
>>
>> ie.
>> gdal_translate --debug on ...
>>
>> Best regards,
>> --
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush? ? | Geospatial Software Developer
>
>
>
> --
> Jonathan A. Greenberg, PhD
> Assistant Professor
> Department of Geography and Geographic Information Science
> University of Illinois at Urbana-Champaign
> 607 South Mathews Avenue, MC 150
> Urbana, IL 61801
> Phone: 415-763-5476
> AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307, Skype: jgrn3007
> http://www.geog.illinois.edu/people/JonathanGreenberg.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jluis at ualg.pt  Thu Apr 12 17:09:01 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Apr 12 17:09:24 2012
Subject: [gdal-dev] broken trunk build on Win
In-Reply-To: <20120412150021.30707.qmail@s466.sureserver.com>
References: <4F86CE18.4080502@ualg.pt>
	<1334236039.4f86d3877187a@webmail.free.fr>
	<4F86D579.9070108@ualg.pt>
	<CABUeae8g74XkALexkD2OObmcc7TgQZ9KJ6HtS4yhdU5X35-a0A@mail.gmail.com>
	<4F86D9EB.90207@ualg.pt>
	<CABUeae9ihupHt8xopdJWwqvJu-+Es0PDQkdxoDJRXSYzGhQpNw@mail.gmail.com>
	<20120412150021.30707.qmail@s466.sureserver.com>
Message-ID: <4F87446D.3010204@ualg.pt>

On 12-04-2012 16:00, Ivan Lucena wrote:
> Ol? Joaquim,
>
> Sometimes a SVN update bring things that require a complete clean up before we can rebuild it again, so you need to run:
>
> nmake -f makefile.vc clean
> nmake -f makefile.vc
> nmake -f makefile.vc install

Ivan, obrigado but ... I wish it was that simple.
After a good number of rebuilds starting with a no-depencies and 
incrementally add the old ones I found the culprit. It was the "WEBP" 
driver, actually one of the few that I didn't build myself but used the 
"libwebp-0.1.3-windows-x86.zip" downloaded from the web site. I still 
don't understand how it worked before but removing it from the 
dependencies solved my problem. So here stays the warning for future 
victims.

Incidentally while scanning my building options I found a note that may 
be very well related to the problem recently reported by people who want 
to use the OpenJpeg driver. My note says that I had to use the 
preprocessor directive "USE_OPJ_DEPRECATED" for building the OpenJpeg 
library.

While at this, could I make a small request that VERSION variable in 
nmake.opt be wrapped in a IFNDEF so that we can optionally set it inside 
nmake.local? It would be something like

# Version number embedded in DLL name.
!IFNDEF VERSION_DLL
VERSION =    19
!ENDIF

Joaquim

From warmerdam at pobox.com  Thu Apr 12 17:31:30 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 12 17:31:54 2012
Subject: [gdal-dev] broken trunk build on Win
In-Reply-To: <4F87446D.3010204@ualg.pt>
References: <4F86CE18.4080502@ualg.pt>
	<1334236039.4f86d3877187a@webmail.free.fr>
	<4F86D579.9070108@ualg.pt>
	<CABUeae8g74XkALexkD2OObmcc7TgQZ9KJ6HtS4yhdU5X35-a0A@mail.gmail.com>
	<4F86D9EB.90207@ualg.pt>
	<CABUeae9ihupHt8xopdJWwqvJu-+Es0PDQkdxoDJRXSYzGhQpNw@mail.gmail.com>
	<20120412150021.30707.qmail@s466.sureserver.com>
	<4F87446D.3010204@ualg.pt>
Message-ID: <CA+YzLBesbS7LZwou3QyceKXQ-zzbhekfO9wH8HSU3x3E6RPrEQ@mail.gmail.com>

On Thu, Apr 12, 2012 at 2:09 PM, Joaquim Luis <jluis@ualg.pt> wrote:
> While at this, could I make a small request that VERSION variable in
> nmake.opt be wrapped in a IFNDEF so that we can optionally set it inside
> nmake.local? It would be something like
>
> # Version number embedded in DLL name.
> !IFNDEF VERSION_DLL
> VERSION = ? ?19
> !ENDIF

As requested, done in trunk:

  http://trac.osgeo.org/gdal/changeset/24222

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From warmerdam at pobox.com  Thu Apr 12 17:32:32 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 12 17:33:00 2012
Subject: [gdal-dev] broken trunk build on Win
In-Reply-To: <CA+YzLBesbS7LZwou3QyceKXQ-zzbhekfO9wH8HSU3x3E6RPrEQ@mail.gmail.com>
References: <4F86CE18.4080502@ualg.pt>
	<1334236039.4f86d3877187a@webmail.free.fr>
	<4F86D579.9070108@ualg.pt>
	<CABUeae8g74XkALexkD2OObmcc7TgQZ9KJ6HtS4yhdU5X35-a0A@mail.gmail.com>
	<4F86D9EB.90207@ualg.pt>
	<CABUeae9ihupHt8xopdJWwqvJu-+Es0PDQkdxoDJRXSYzGhQpNw@mail.gmail.com>
	<20120412150021.30707.qmail@s466.sureserver.com>
	<4F87446D.3010204@ualg.pt>
	<CA+YzLBesbS7LZwou3QyceKXQ-zzbhekfO9wH8HSU3x3E6RPrEQ@mail.gmail.com>
Message-ID: <CA+YzLBf7sg7S3t1azRKeAdPUnwqW72oCeDf4SyW6Luj-FCPi_Q@mail.gmail.com>

On Thu, Apr 12, 2012 at 2:31 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On Thu, Apr 12, 2012 at 2:09 PM, Joaquim Luis <jluis@ualg.pt> wrote:
>> While at this, could I make a small request that VERSION variable in
>> nmake.opt be wrapped in a IFNDEF so that we can optionally set it inside
>> nmake.local? It would be something like
>>
>> # Version number embedded in DLL name.
>> !IFNDEF VERSION_DLL
>> VERSION = ? ?19
>> !ENDIF
>
> As requested, done in trunk:
>
> ?http://trac.osgeo.org/gdal/changeset/24222

Before anyone else points it out, I have fixed the above change.


http://trac.osgeo.org/gdal/changeset/24223

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Thu Apr 12 17:35:29 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr 12 17:35:12 2012
Subject: [gdal-dev] Adding GMLJP2 metadata into existing JPEG2000 file
In-Reply-To: <loom.20120411T141237-487@post.gmane.org>
References: <loom.20120411T141237-487@post.gmane.org>
Message-ID: <201204122335.29400.even.rouault@mines-paris.org>

Le mercredi 11 avril 2012 14:21:09, Jukka Rahkonen a ?crit :
> Hi,
> 
> Do we have anything that could be used for injecting GMLJP2 georeferencing
> metadata from a text file into an existing JPEG2000 image? I found a tool
> called "JP2 Meta Editor" by a company j2k-codec which is usable for
> individual images. However, only way to use it is through GUI and I have a
> need to run a large batch. Hints about suitable tools for this task, free
> or commercial, are welcome.

Jukka,

Your question made me look more closely at the capabilities of the JP2Box 
support in GDAL, and I discovered that I had to write just a few lines of code 
to add support for writing georeferencing in the existing openjpeg driver. See 
http://trac.osgeo.org/gdal/changeset/24220#file2 . Basically you just need to 
write the boxes at the end of the existing file.

So adding georeferencing to a new file should be easily done by a small 
standalone utility using GDAL, not necessarily requiring to have support for 
JPEG2000 itself, or adding an implementation of SetGeoTransform() / 
SetProjection() methods in one of the existing JPEG2000 drivers.

As far as updating an existing georeferencing is concerned, this might be more 
complex because it might require invalidating the existing GMLJP2 or GeoJP2 
boxes.

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jluis at ualg.pt  Thu Apr 12 17:44:02 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Apr 12 17:44:26 2012
Subject: [gdal-dev] broken trunk build on Win
In-Reply-To: <CA+YzLBf7sg7S3t1azRKeAdPUnwqW72oCeDf4SyW6Luj-FCPi_Q@mail.gmail.com>
References: <4F86CE18.4080502@ualg.pt>
	<1334236039.4f86d3877187a@webmail.free.fr>
	<4F86D579.9070108@ualg.pt>
	<CABUeae8g74XkALexkD2OObmcc7TgQZ9KJ6HtS4yhdU5X35-a0A@mail.gmail.com>
	<4F86D9EB.90207@ualg.pt>
	<CABUeae9ihupHt8xopdJWwqvJu-+Es0PDQkdxoDJRXSYzGhQpNw@mail.gmail.com>
	<20120412150021.30707.qmail@s466.sureserver.com>
	<4F87446D.3010204@ualg.pt>
	<CA+YzLBesbS7LZwou3QyceKXQ-zzbhekfO9wH8HSU3x3E6RPrEQ@mail.gmail.com>
	<CA+YzLBf7sg7S3t1azRKeAdPUnwqW72oCeDf4SyW6Luj-FCPi_Q@mail.gmail.com>
Message-ID: <4F874CA2.4040800@ualg.pt>

On 12-04-2012 22:32, Frank Warmerdam wrote:
> On Thu, Apr 12, 2012 at 2:31 PM, Frank Warmerdam<warmerdam@pobox.com>  wrote:
>> On Thu, Apr 12, 2012 at 2:09 PM, Joaquim Luis<jluis@ualg.pt>  wrote:
>>> While at this, could I make a small request that VERSION variable in
>>> nmake.opt be wrapped in a IFNDEF so that we can optionally set it inside
>>> nmake.local? It would be something like
>>>
>>> # Version number embedded in DLL name.
>>> !IFNDEF VERSION_DLL
>>> VERSION =    19
>>> !ENDIF
>> As requested, done in trunk:
>>
>>   http://trac.osgeo.org/gdal/changeset/24222
> Before anyone else points it out, I have fixed the above change.
>
>
> http://trac.osgeo.org/gdal/changeset/24223
>

Thanks,

Joaquim
From bellengj at gmail.com  Thu Apr 12 18:29:18 2012
From: bellengj at gmail.com (Jim Bellenger)
Date: Thu Apr 12 18:29:30 2012
Subject: [gdal-dev] GDAL 2.0 Output of Vector Geospatial PDF
Message-ID: <CAGtt-46iniEmd4kZTui9sMHW1SVE2PEicLa3syPCecK+bDeGVw@mail.gmail.com>

The http://www.gdal.org/frmt_pdf.html page talks about georeferencing
PDF files using the OGC best practice and the ISO standard so I was
wondering if GDAL or OGR can be used georeference existing vector
based PDF files.  I have vector PDF files that I know the
georeferencing but I don't know how to add the correct tags.  Also, I
want to avoid using TerraGo and GeoPDF.

Jim Bellenger
From even.rouault at mines-paris.org  Thu Apr 12 19:07:48 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr 12 19:07:37 2012
Subject: [gdal-dev] GDAL 2.0 Output of Vector Geospatial PDF
In-Reply-To: <CAGtt-46iniEmd4kZTui9sMHW1SVE2PEicLa3syPCecK+bDeGVw@mail.gmail.com>
References: <CAGtt-46iniEmd4kZTui9sMHW1SVE2PEicLa3syPCecK+bDeGVw@mail.gmail.com>
Message-ID: <201204130107.48671.even.rouault@mines-paris.org>

Le vendredi 13 avril 2012 00:29:18, Jim Bellenger a ?crit :
> The http://www.gdal.org/frmt_pdf.html page talks about georeferencing
> PDF files using the OGC best practice and the ISO standard so I was
> wondering if GDAL or OGR can be used georeference existing vector
> based PDF files.  I have vector PDF files that I know the
> georeferencing but I don't know how to add the correct tags.  Also, I
> want to avoid using TerraGo and GeoPDF.

Yes, the GDAL PDF driver can be used to add georeferencing info to an existing 
PDF file. This is for example used in MapServer developement version in its PDF 
output. This is a matter of opening the file in update mode, and setting the 
appropriate info with the SetGeoTransform() and SetProjection() methods.

> 
> Jim Bellenger
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From adam.brown at arcitecta.com  Thu Apr 12 20:53:23 2012
From: adam.brown at arcitecta.com (ahbrown)
Date: Thu Apr 12 20:54:12 2012
Subject: [gdal-dev] Very large time difference using gdal_translate from
 Jpeg2000 to different formats using JP2KAK driver
Message-ID: <1334278403286-4874129.post@n6.nabble.com>

Hi,

I am wondering why there is such a large difference in the time to convert a
large O(250MB) Jpeg2000 image to GeoTiff format in comparison with
conversion to other formats (e.g. jpeg, png)?

I am using the Kakadu Jpeg2000 driver. With a 43221 x 36021 Jpeg2000 image.

Results of timed conversions are as follows:



Using RasterIO directly (via the Java wrapper) the conversion takes around 6
seconds.

Any insights are appreciated.

Thanks,


Adam

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Very-large-time-difference-using-gdal-translate-from-Jpeg2000-to-different-formats-using-JP2KAK-drivr-tp4874129p4874129.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Jukka.Rahkonen at mmmtike.fi  Fri Apr 13 00:32:14 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Fri Apr 13 00:32:56 2012
Subject: [gdal-dev] Adding GMLJP2 metadata into existing JPEG2000 file
In-Reply-To: <201204122335.29400.even.rouault@mines-paris.org>
References: <loom.20120411T141237-487@post.gmane.org>,
	<201204122335.29400.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A6314A066@suutari.haapa.mmm.fi>

Even Rouault wrote:

> Le mercredi 11 avril 2012 14:21:09, Jukka Rahkonen a ?crit :
>> Hi,
>>
>> Do we have anything that could be used for injecting GMLJP2 georeferencing
>> metadata from a text file into an existing JPEG2000 image? I found a tool
>> called "JP2 Meta Editor" by a company j2k-codec which is usable for
>> individual images. However, only way to use it is through GUI and I have a
>> need to run a large batch. Hints about suitable tools for this task, free
>> or commercial, are welcome.

> Jukka,

> Your question made me look more closely at the capabilities of the JP2Box
> support in GDAL, and I discovered that I had to write just a few lines of code
> to add support for writing georeferencing in the existing openjpeg driver. See
> http://trac.osgeo.org/gdal/changeset/24220#file2 . Basically you just need to
> write the boxes at the end of the existing file.

> So adding georeferencing to a new file should be easily done by a small
> standalone utility using GDAL, not necessarily requiring to have support for
> JPEG2000 itself, or adding an implementation of SetGeoTransform() /
> SetProjection() methods in one of the existing JPEG2000 drivers.

> As far as updating an existing georeferencing is concerned, this might be more
> complex because it might require invalidating the existing GMLJP2 or GeoJP2
> boxes.

Hi,

Alex Sevaliev from j2k-codec.com already wrote such a tool for us. It can be used
in a fast mode when new GML boxes are written at the end of the JPEG2000 file
and then it is super fast even with however big files. In a normal mode it is checking 
if there is a GML box already. If yes, then it is replecing it, if not, then it adds the
boxes. Because of possible box replace the app always rewrites the whole JPEG2000
so it is slower. Then it is also placing the GML box before the image codestream 
because I thought that one JPEG2000 application I use was not able to read the boxes 
which were placed after the codestream. It is absolutely OK according to JPEG2000 
standard and I now believe that there was something else wrong with my test and
that application did not really had troubles with the boxes at the end of file.

GML metadata standard allows to insert several GML boxes into JPEG2000 file
inside upper level ASOC boxes. I told Alex not even to try to handle such complicated
cases with the new tiny application.

Alex may publish the tool as freeware in a future but it would be nice to have same 
kind of GDAL tool. Our need came from Inspire rules which will demand to include 
GML metadata if orthophotos are in JPEG2000 format.

-Jukka Rahkonen-

From even.rouault at mines-paris.org  Fri Apr 13 04:30:12 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr 13 04:30:47 2012
Subject: [gdal-dev] Adding GMLJP2 metadata into existing JPEG2000 file
In-Reply-To: <84446DEF76453C439E9E97E438E13A6314A066@suutari.haapa.mmm.fi>
References: <loom.20120411T141237-487@post.gmane.org>,
	<201204122335.29400.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A6314A066@suutari.haapa.mmm.fi>
Message-ID: <1334305812.4f87e414dc65b@webmail.free.fr>

> Hi,
>
> Alex Sevaliev from j2k-codec.com already wrote such a tool for us. It can be
> used
> in a fast mode when new GML boxes are written at the end of the JPEG2000 file
> and then it is super fast even with however big files.

Yes, in fact, if the GML file to insert is already generated, the tool to insert
the GMLJP2 box might likely be written in a few dozains of lines of any
programming/scripting language, and that doesn't require to know how to decode
JPEG2000 streams, nor link with GDAL.

> In a normal mode it is
> checking
> if there is a GML box already. If yes, then it is replecing it, if not, then
> it adds the
> boxes. Because of possible box replace the app always rewrites the whole
> JPEG2000
> so it is slower. Then it is also placing the GML box before the image
> codestream
> because I thought that one JPEG2000 application I use was not able to read
> the boxes
> which were placed after the codestream. It is absolutely OK according to
> JPEG2000
> standard and I now believe that there was something else wrong with my test
> and
> that application did not really had troubles with the boxes at the end of
> file.

This is interesting. I tested the new capability of the openjpeg driver to add
the georeferencing box and my first tests with GlobalMapper seemed to show that
it doesn't recognize the georeferencing. I was wondering too if it wasn't due to
the fact that the box is written at the end of the file, because with another
JPEG2000 file not produced by GDAL where the box is before the codestream, it
was able to recognize the georeferencing. I'll try to test if placing them
before the codestream doesn't help.

>
> GML metadata standard allows to insert several GML boxes into JPEG2000 file
> inside upper level ASOC boxes. I told Alex not even to try to handle such
> complicated
> cases with the new tiny application.
>
> Alex may publish the tool as freeware in a future but it would be nice to
> have same
> kind of GDAL tool. Our need came from Inspire rules which will demand to
> include
> GML metadata if orthophotos are in JPEG2000 format.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From oyvind.idland at gmail.com  Fri Apr 13 05:47:37 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Fri Apr 13 05:48:09 2012
Subject: [gdal-dev] Fastest way of reprojecting from VRT ?
Message-ID: <CAEVk4t2JQnFC_qVVgTOBX7At8Nimm9XUXfiFOMC+3paF2j2cbQ@mail.gmail.com>

I am currently using GDAL 1.8.0, and have found that reprojecting VRT
datasets can be incredibly
slow (several minutes in my case). I believe there are bugs/tickets related
to this issue.

I am only interested in reprojecting arbitrary datasets (or portions of it)
into a screen size window, on the fly.
What is the most optimal way of doing this ?

Should I read the desired window first, and then reproject it ?

- Oyvind
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120413/1b2f59a7/attachment.html
From even.rouault at mines-paris.org  Fri Apr 13 07:36:30 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr 13 07:37:18 2012
Subject: [gdal-dev] Fastest way of reprojecting from VRT ?
In-Reply-To: <CAEVk4t2JQnFC_qVVgTOBX7At8Nimm9XUXfiFOMC+3paF2j2cbQ@mail.gmail.com>
References: <CAEVk4t2JQnFC_qVVgTOBX7At8Nimm9XUXfiFOMC+3paF2j2cbQ@mail.gmail.com>
Message-ID: <1334316990.4f880fbe1855c@webmail.free.fr>

Selon Oyvind Idland <oyvind.idland@gmail.com>:

> I am currently using GDAL 1.8.0, and have found that reprojecting VRT
> datasets can be incredibly
> slow (several minutes in my case). I believe there are bugs/tickets related
> to this issue.
>
> I am only interested in reprojecting arbitrary datasets (or portions of it)
> into a screen size window, on the fly.
> What is the most optimal way of doing this ?
>
> Should I read the desired window first, and then reproject it ?

There are many potential causes that could explain an excessive slowness.
Without precise facts, it is hard to tell which strategy could improve that.

>
> - Oyvind
>


From oyvind.idland at gmail.com  Fri Apr 13 08:04:14 2012
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Fri Apr 13 08:04:49 2012
Subject: [gdal-dev] Fastest way of reprojecting from VRT ?
In-Reply-To: <1334316990.4f880fbe1855c@webmail.free.fr>
References: <CAEVk4t2JQnFC_qVVgTOBX7At8Nimm9XUXfiFOMC+3paF2j2cbQ@mail.gmail.com>
	<1334316990.4f880fbe1855c@webmail.free.fr>
Message-ID: <CAEVk4t0GU3x_GNRdyCgc-SqWO1vz4PbLzBAW-XUxqG-3XnwLNw@mail.gmail.com>

In my case, I got a VRT consisting of about 20 GeoTIFFs, where each tile
has overviews in them.

I did write some sandbox code, and tried the gdalwarp tool. Both are
equally slow.

There are earlier posts related to this aswell.
Den 13. apr. 2012 13:36 skrev "Even Rouault" <even.rouault@mines-paris.org>
f?lgende:

> Selon Oyvind Idland <oyvind.idland@gmail.com>:
>
> > I am currently using GDAL 1.8.0, and have found that reprojecting VRT
> > datasets can be incredibly
> > slow (several minutes in my case). I believe there are bugs/tickets
> related
> > to this issue.
> >
> > I am only interested in reprojecting arbitrary datasets (or portions of
> it)
> > into a screen size window, on the fly.
> > What is the most optimal way of doing this ?
> >
> > Should I read the desired window first, and then reproject it ?
>
> There are many potential causes that could explain an excessive slowness.
> Without precise facts, it is hard to tell which strategy could improve
> that.
>
> >
> > - Oyvind
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120413/511736fd/attachment-0001.html
From saad.hessane at gmail.com  Fri Apr 13 08:09:49 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Fri Apr 13 08:10:38 2012
Subject: [gdal-dev] Apply filter on VRT
In-Reply-To: <CAEcp1tBbQeyevG2tZmNEv9v0QYqkLS5Aw62mAd-rZ=itfS8_Fw@mail.gmail.com>
References: <CAEcp1tBXVZ7diGzYJiLLaYJ2jtAyavwpZouae=3D9YgZ4N3bVw@mail.gmail.com>
	<CAMKgpOYUC14tii9GUHTnhvC9oGDVEznEnuFx_iaJdZcU2ViP=g@mail.gmail.com>
	<CAEcp1tBqjZ7o8L3YU0C7GnCmmWMNmbpuE3Qr8L4dpjKYfCNUPA@mail.gmail.com>
	<CAMKgpOa0QTA09_9Smvbe9Fv3ved5244R=3C_p_TxjwzrzdBhHA@mail.gmail.com>
	<CAEcp1tBbQeyevG2tZmNEv9v0QYqkLS5Aw62mAd-rZ=itfS8_Fw@mail.gmail.com>
Message-ID: <CAEcp1tA199BH-up=86VYY06ZQMfPREpu5Z9W2ok9r6ay-Y=onQ@mail.gmail.com>

Hy list,

Has anyone reproduce the bug?

Thank you.



2012/4/12 Sa?d HESSANE <saad.hessane@gmail.com>

> Yes of course :
>
>>  <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>   <SRS>...</SRS>
>>   <GeoTransform>...</GeoTransform>
>>   <VRTRasterBand dataType="UInt16" band="1">
>>     <NoDataValue>0</NoDataValue>
>>     <ColorInterp>Gray</ColorInterp>
>>     <KernelFilteredSource>
>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>       <SourceBand>1</SourceBand>
>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>       <NODATA>0</NODATA>
>>     </KernelFilteredSource>
>>     <KernelFilteredSource>
>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>       <SourceBand>1</SourceBand>
>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>       <NODATA>0</NODATA>
>>     </KernelFilteredSource>
>>   </VRTRasterBand>
>> </VRTDataset>
>
>
> It's really simple to reproduce the problem : do a "buildvrt" on a set of
> raster ( > 1 raster ). Edit the vrt file and rename "ComplexSource" tag
> with "KernelFilteredSource". add if you want the kernel definition.
> Now you can do a gdal_translate to write a tiff file.
>
> There's no error in the terminale.
> gdal_translate crash and a windows error dialog appears saying that the
> the program has encountered an error and have to be close (the error is in
> frensh sorry for my bad english...).
> I'm using gdal 1.9 x64 onto Win 7 x64.
>
>
>
> 2012/4/12 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>
>> Sa?d,
>>
>> Can you provide the vrt file causing the crash? Also, please show me the
>> error messages you got.
>>
>>
>> On Thu, Apr 12, 2012 at 7:21 PM, Sa?d HESSANE <saad.hessane@gmail.com>wrote:
>>
>>> Thank you Chaitanya for the answer,
>>>
>>> I do the test with the kenel element like the documentation :
>>>
>>>
>>>> <Kernel normalized="1">
>>>>     <Size>3</Size>
>>>>     <Coefs>0.11111111 0.11111111 0.11111111 0.11111111 0.11111111
>>>> 0.11111111 0.11111111 0.11111111 0.11111111</Coefs>
>>>> </Kernel>
>>>>
>>> It's the same probleme, gdal_translate crash. But if the VRTRasterBand
>>> have just one KernelFilteredSource element, gdal_translate work fine and
>>> apply the filtre correctely.
>>>
>>> The poblem appears if there are more than one KernelFilteredSource
>>> element in the VRTRasterBand.
>>>
>>>
>>>
>>> 2012/4/12 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>>>
>>>> Sa?d,
>>>>
>>>> There should be a Kernel element in a KernelFilteredSource.
>>>> FYI, all the pixels whose kernel has a nodata pixel will be reported as
>>>> a nodata pixel.
>>>>
>>>>  On Wed, Apr 11, 2012 at 3:20 PM, Sa?d HESSANE <saad.hessane@gmail.com>wrote:
>>>>
>>>>>  Hy all,
>>>>>
>>>>> I have a VRT file generated with buildvrt utility :
>>>>>
>>>>> <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>>>>>   <SRS>...</SRS>
>>>>>>   <GeoTransform>...</GeoTransform>
>>>>>>   <VRTRasterBand dataType="UInt16" band="1">
>>>>>>     <NoDataValue>0</NoDataValue>
>>>>>>     <ColorInterp>Gray</ColorInterp>
>>>>>>     <ComplexSource>
>>>>>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>>>>>       <SourceBand>1</SourceBand>
>>>>>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>>>>>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>>>>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>>>>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>>>>>       <NODATA>0</NODATA>
>>>>>>     </ComplexSource>
>>>>>>     <ComplexSource>
>>>>>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>>>>>       <SourceBand>1</SourceBand>
>>>>>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>>>>>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>>>>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>>>>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>>>>>       <NODATA>0</NODATA>
>>>>>>     </ComplexSource>
>>>>>>   </VRTRasterBand>
>>>>>> </VRTDataset>
>>>>>>
>>>>>
>>>>> It's work fine with a gdal_translate.
>>>>> Now I want to apply a filter kernel to the VRT. I have to use the
>>>>> KernelFilteredSource.
>>>>> The gdal api say that VRTKernelFilteredSource is a sub-class of
>>>>> VRTComplexSource. So a VRTKernelFilteredSource *is *a
>>>>> VRTComplexSource.
>>>>> But if I replace VRTComplexSource by VRTKernelFilteredSource,
>>>>> gdal_translate crash. This is the new VRT :
>>>>>
>>>>> <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>>>>>   <SRS>...</SRS>
>>>>>>   <GeoTransform>...</GeoTransform>
>>>>>>   <VRTRasterBand dataType="UInt16" band="1">
>>>>>>     <NoDataValue>0</NoDataValue>
>>>>>>     <ColorInterp>Gray</ColorInterp>
>>>>>>     <KernelFilteredSource>
>>>>>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>>>>>       <SourceBand>1</SourceBand>
>>>>>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>>>>>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>>>>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>>>>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>>>>>       <NODATA>0</NODATA>
>>>>>>     </KernelFilteredSource>
>>>>>>     <KernelFilteredSource>
>>>>>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>>>>>       <SourceBand>1</SourceBand>
>>>>>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>>>>>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>>>>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>>>>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>>>>>       <NODATA>0</NODATA>
>>>>>>     </KernelFilteredSource>
>>>>>>   </VRTRasterBand>
>>>>>> </VRTDataset>
>>>>>>
>>>>>
>>>>> It's weird, I expected a polymorphism between VRTComplexSource and
>>>>> VRTKernelFilteredSource.
>>>>> So the question : how can I apply a filter to a VRT?
>>>>> Thank you !
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>>
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120413/a3bcce77/attachment.html
From jukka.rahkonen at mmmtike.fi  Fri Apr 13 09:30:44 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Apr 13 09:31:08 2012
Subject: [gdal-dev] Re: Adding GMLJP2 metadata into existing JPEG2000 file
References: <loom.20120411T141237-487@post.gmane.org>
	<201204122335.29400.even.rouault@mines-paris.org>
Message-ID: <loom.20120413T150838-132@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> 
> Jukka,
> 
> Your question made me look more closely at the capabilities of the JP2Box 
> support in GDAL, and I discovered that I had to write just a few lines of code 
> to add support for writing georeferencing in the existing openjpeg driver. See 
> http://trac.osgeo.org/gdal/changeset/24220#file2 . Basically you just need to 
> write the boxes at the end of the existing file.

I checked with Kakadu kdu_show and J2K-codec JP Metadata Editor that the GML
boxes look good. However, there is probably something wrong with the GeoJP2 UUID
box. It might be good to correct also into
trunk/gdal/frmts/openjpeg/frmt_jp2openjpeg.html  that the GeoJP2 box is really
UUID box and not GML box.

-Jukka Rahkonen-

From gdal at stripfamily.net  Fri Apr 13 13:00:51 2012
From: gdal at stripfamily.net (David Strip)
Date: Fri Apr 13 13:01:27 2012
Subject: [gdal-dev] GDALDataSet::GetRasterXSize vs. GDALRasterBand::GetXSize
Message-ID: <4F885BC3.6080608@stripfamily.net>

are there conditions under which these two values are not the same? It 
seems to me they should match, but maybe I'm missing something.
Thanks

From warmerdam at pobox.com  Fri Apr 13 13:38:38 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 13 13:39:21 2012
Subject: [gdal-dev] GDALDataSet::GetRasterXSize vs.
	GDALRasterBand::GetXSize
In-Reply-To: <4F885BC3.6080608@stripfamily.net>
References: <4F885BC3.6080608@stripfamily.net>
Message-ID: <CA+YzLBes6fyCamjY=mn+vMW+_7autBcU2xJCR2J_z56BoJ+=rA@mail.gmail.com>

On Fri, Apr 13, 2012 at 10:00 AM, David Strip <gdal@stripfamily.net> wrote:
> are there conditions under which these two values are not the same? It seems
> to me they should match, but maybe I'm missing something.

David,

The XSize of a dataset should always match the xsize of the bands
fetched with GetRasterBand() on the dataset.

However, bands for overviews, fetched with GetOverview() on the
band will not have the same size as the base band or the dataset
they are loosely associated with.  In some cases the overviews
actually are directly owned by a sort of hidden dataset but that may
not always be the case.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From ealpert at digitalglobe.com  Fri Apr 13 13:53:41 2012
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Fri Apr 13 13:59:25 2012
Subject: [gdal-dev] Problem with garbage bytes of data after EOI marker in
	single band JPEG
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB2330961BFA6@COMAIL01.digitalglobe.com>

I have a very old GDAL based tool I wrote that creates JPEG thumbnails
for GeoTiff's. Since the GeoTiff's can be any size and I used a perl
script to compute the aspect ratio so I can center a reduced size image
in a square thumbnail.

 

I'm looking for any suggestions as to how I can look into the problem
which is described below.

 

 

 

This has been running for years. Recently a customer who receives these
started scanning the JPG's for security threats. Turns out that the
JPG's I've been writing have garbage data after the JPEG EOI marker.

 

Since our production system has a very old version I upgraded GDAL to
1.8.1 and have observed the same problem. Turns out it appears to be VRT
related and only happens with single band (black/white imagery).

 

If I use gdal_tranlsate to just translate the image to JPEG I get a
properly placed EOI (d9ff):

 

[ealpert@sbsenoklgmt07] PACK $  gdal_translate -of JPEG
1020010016BB5500.tif 1020010016BB5500_new.jpg

Input file size is 1356, 7444

0...10...20...30...40...50...60...70...80...90...100 - done.

ealpert@sbsenoklgmt07] PACK $ od -t x2 1020010016BB5500_new.jpg | tail

10610460 288a 8aa2 a228 288a 8aa2 a228 288a 8aa2

10610500 a228 288a 8aa2 a228 288a 8aa2 a228 288a

10610520 8aa2 a228 288a 8aa2 a228 288a 8aa2 a228

10610540 288a 8aa2 a228 288a 8aa2 a228 288a 8aa2

10610560 a228 288a 8aa2 a228 288a 8aa2 a228 288a

10610600 8aa2 a228 288a 8aa2 a228 288a 8aa2 a228

10610620 288a 8aa2 a228 288a 8aa2 a228 288a 8aa2

10610640 a228 288a 8aa2 a228 288a 8aa2 a228 2b8a

10610660 d9ff

 

 

 

If I create a VRT to center the image then use gdal_translate to convert
I get the following error message and the JPEG has garbage at the end
but can still be viewed without any problems in all applications:

 

ERROR:

 

bit length overflow

code 3 bits 6->7


VRT: 

<VRTDataset rasterXSize="1024" rasterYSize="1024">

  <NoDataValue>255</NoDataValue>

  <VRTRasterBand dataType="Byte" band="1">

   <ColorInterp>Gray</ColorInterp>

    <NoDataValue>255</NoDataValue>

    <ComplexSource>

      <NODATA>0</NODATA>

      <SourceFilename
relativeToVRT="1">./1020010016BB5500.tif</SourceFilename>

      <SourceBand>1</SourceBand>

      <SrcRect xOff="0" yOff="0" xSize="1356" ySize="7444"/>

      <DstRect xOff="419" yOff="0" xSize="186" ySize="1024"/>

    </ComplexSource>

  </VRTRasterBand>

</VRTDataset>

 

[ealpert@sbsenoklgmt07] PACK $ gdal_translate -of JPEG test.vrt test.jpg

Input file size is 1024, 1024

0...10...20...30...40...50...60...70...80...90...100 - done.

 

bit length overflow

code 3 bits 6->7

[ealpert@sbsenoklgmt07] PACK $ od -t x2 test.jpg | tail

0231300 90bb 1db7 3ee6 d116 d6fe f50c a157 126c

0231320 ff32 6f98 fb44 9a7f 1f57 7db8 9f90 99ff

0231340 047e 65ce b9f3 fe78 cdcf 4137 e390 105f

0231360 bfaf f372 1fed bd27 a8fe 002b 6c9d bbff

0231400 163d 637d bfe7 b716 ebfe ff7a f6a6 97c3

0231420 fad2 fb37 16fa f160 b7fe ebab 2e5f f985

0231440 ef6f f9b1 b347 293b 1037 9fbe 416f 697b

0231460 b1fd 84ea 8b9b 690b 13ff 5707 07fc df17

0231500 ef84 087f 870e e51b 0127 0000

 

Note there is no EOI marker. 

 

 


This electronic communication and any attachments may contain confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee 
responsible for delivering this communication to the intended recipient, or if you have received 
this communication in error, please do not print, copy, retransmit, disseminate or 
otherwise use the information. Please indicate to the sender that you have received this 
communication in error, and delete the copy you received. DigitalGlobe reserves the 
right to monitor any electronic communication sent or received by its employees, agents 
or representatives.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120413/bbe19c33/attachment.html
From even.rouault at mines-paris.org  Fri Apr 13 15:04:14 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr 13 15:03:40 2012
Subject: [gdal-dev] Re: Adding GMLJP2 metadata into existing JPEG2000 file
In-Reply-To: <loom.20120413T150838-132@post.gmane.org>
References: <loom.20120411T141237-487@post.gmane.org>
	<201204122335.29400.even.rouault@mines-paris.org>
	<loom.20120413T150838-132@post.gmane.org>
Message-ID: <201204132104.15011.even.rouault@mines-paris.org>

Le vendredi 13 avril 2012 15:30:44, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> mines-paris.org> writes:
> > Jukka,
> > 
> > Your question made me look more closely at the capabilities of the JP2Box
> > support in GDAL, and I discovered that I had to write just a few lines of
> > code to add support for writing georeferencing in the existing openjpeg
> > driver. See http://trac.osgeo.org/gdal/changeset/24220#file2 . Basically
> > you just need to write the boxes at the end of the existing file.
> 
> I checked with Kakadu kdu_show and J2K-codec JP Metadata Editor that the
> GML boxes look good. However, there is probably something wrong with the
> GeoJP2 UUID box. 

Actually, there was a problem in the length written in the box header. After 
fixing it, it works fine, even when located after the codestream.

> It might be good to correct also into
> trunk/gdal/frmts/openjpeg/frmt_jp2openjpeg.html  that the GeoJP2 box is
> really UUID box and not GML box.

That was actually a copy&paste of the doc of the jp2ecw driver. Also fixed now. 
Thanks

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From gdal at stripfamily.net  Fri Apr 13 15:07:37 2012
From: gdal at stripfamily.net (David Strip)
Date: Fri Apr 13 15:08:35 2012
Subject: [gdal-dev] NODATA value in rasters
Message-ID: <4F887979.2010605@stripfamily.net>

What data formats besides geotiff  support a NODATA value? Is there a 
uniform GDAL approach to determining the NODATA value or otherwise 
determining if a pixel is a NODATA pixel? I know that this value is 
stored in a geotiff tag, but that won't work for other formats.



From even.rouault at mines-paris.org  Fri Apr 13 15:12:57 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr 13 15:12:51 2012
Subject: [gdal-dev] Problem with garbage bytes of data after EOI marker in
	single band JPEG
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB2330961BFA6@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB2330961BFA6@COMAIL01.digitalglobe.com>
Message-ID: <201204132112.57569.even.rouault@mines-paris.org>

Le vendredi 13 avril 2012 19:53:41, Ethan Alpert a ?crit :
> 
> This has been running for years. Recently a customer who receives these
> started scanning the JPG's for security threats. Turns out that the
> JPG's I've been writing have garbage data after the JPEG EOI marker.
>

This is not garbage, but mask data appended after the JPEG data stream, as 
documented in the JPEG driver doc : 
"""The driver also supports the "zlib compressed mask appended to the file" 
approach used by a few data providers to add a bitmask to identify pixels that 
are not valid data."""

The mask is due to the advertized nodata value in the VRT. You can likely 
remove it by adding <HideNoDataValue>1</HideNoDataValue> in the VRT file under 
the VRTRasterBand element.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120413/86babb27/attachment-0001.html
From matt.gregory at oregonstate.edu  Fri Apr 13 15:09:41 2012
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Fri Apr 13 15:18:25 2012
Subject: [gdal-dev] create mosaic using mask bands
Message-ID: <1D673F86DDA00841A1216F04D1CE70D647115FE077@EXCH2.nws.oregonstate.edu>

Hi all,

I don't think I'm understanding correctly how to use masking bands.  My goal is to create a mosaic between two adjacent rasters using mask bands on each raster to define the valid data.  As a test, I have two single band GeoTiffs (north.tif and south.tif) that overlap by about 400 rows.  I use the following Python script to create a small mask at the top center of the south image which creates the desired .msk file:

  from osgeo import gdal, gdalconst
  ds = gdal.Open('south.tif', gdalconst.GA_ReadOnly)
  ds.CreateMaskBand(2)
  rb = ds.GetRasterBand(1)
  mask = rb.GetMaskBand()
  data = mask.ReadAsArray()
  data[:] = 255
  data[0:500,2500:3000] = 0
  mask.WriteArray(data)
  ds = None

Then I try to merge the two images together:

  gdal_merge.py -o merge.tif -of GTiff -createonly north.tif south.tif
  gdalwarp north.tif south.tif merge.tif

I was expecting that the masked pixels from south.tif would be considered NODATA allowing the north.tif pixels to 'shine through' in that location.  Instead the original pixel values from south.tif also show up in the mosaic.

thanks, matt
From etourigny.dev at gmail.com  Fri Apr 13 15:22:06 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Apr 13 15:22:35 2012
Subject: [gdal-dev] create mosaic using mask bands
In-Reply-To: <1D673F86DDA00841A1216F04D1CE70D647115FE077@EXCH2.nws.oregonstate.edu>
References: <1D673F86DDA00841A1216F04D1CE70D647115FE077@EXCH2.nws.oregonstate.edu>
Message-ID: <CA+TxYvPHxpBuV2m7afGNJmOnprJ-BW2cP8=Tkf4=t1QR43ocrQ@mail.gmail.com>

You should use gdalwarp only, no ned for gdal_merge.py.

The order of input datasets is important, so in your case you should use
gdalwarp south.tif north.tif  merge.tif

Plus you don't need a mask, the last input file will override the first one.

Etienne

On Fri, Apr 13, 2012 at 4:09 PM, Gregory, Matthew
<matt.gregory@oregonstate.edu> wrote:
> Hi all,
>
> I don't think I'm understanding correctly how to use masking bands. ?My goal is to create a mosaic between two adjacent rasters using mask bands on each raster to define the valid data. ?As a test, I have two single band GeoTiffs (north.tif and south.tif) that overlap by about 400 rows. ?I use the following Python script to create a small mask at the top center of the south image which creates the desired .msk file:
>
> ?from osgeo import gdal, gdalconst
> ?ds = gdal.Open('south.tif', gdalconst.GA_ReadOnly)
> ?ds.CreateMaskBand(2)
> ?rb = ds.GetRasterBand(1)
> ?mask = rb.GetMaskBand()
> ?data = mask.ReadAsArray()
> ?data[:] = 255
> ?data[0:500,2500:3000] = 0
> ?mask.WriteArray(data)
> ?ds = None
>
> Then I try to merge the two images together:
>
> ?gdal_merge.py -o merge.tif -of GTiff -createonly north.tif south.tif
> ?gdalwarp north.tif south.tif merge.tif
>
> I was expecting that the masked pixels from south.tif would be considered NODATA allowing the north.tif pixels to 'shine through' in that location. ?Instead the original pixel values from south.tif also show up in the mosaic.
>
> thanks, matt
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From matt.gregory at oregonstate.edu  Fri Apr 13 15:43:22 2012
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Fri Apr 13 15:43:28 2012
Subject: [gdal-dev] create mosaic using mask bands
In-Reply-To: <CA+TxYvPHxpBuV2m7afGNJmOnprJ-BW2cP8=Tkf4=t1QR43ocrQ@mail.gmail.com>
References: <1D673F86DDA00841A1216F04D1CE70D647115FE077@EXCH2.nws.oregonstate.edu>
	<CA+TxYvPHxpBuV2m7afGNJmOnprJ-BW2cP8=Tkf4=t1QR43ocrQ@mail.gmail.com>
Message-ID: <1D673F86DDA00841A1216F04D1CE70D647115FE089@EXCH2.nws.oregonstate.edu>

Hi Etienne,

Etienne Tourigny wrote:
> You should use gdalwarp only, no ned for gdal_merge.py.

Thanks for that.  So noted.
 
> The order of input datasets is important, so in your case you should use
> gdalwarp south.tif north.tif  merge.tif
> 
> Plus you don't need a mask, the last input file will override the first
> one.

Although I actually want south.tif to be on top, so I think I need to specify that last, correct?  But I do want the mask incorporated into south.tif to represent the areas of NODATA for the south.tif raster, so in those pixels, north.tif pixels should be in the output image.

My use case is dealing with Landsat TM scenes that have '0' as background values as a 'collar' to the scene, but 0 is also a valid value within the scene.  The -srcnodata argument to gdalwarp therefore doesn't work.  I have external tif files representing the valid pixels of the scene that I intend to copy into the mask band of a dataset.

Sorry if I was unclear.

matt
From warmerdam at pobox.com  Fri Apr 13 15:50:03 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 13 15:50:30 2012
Subject: [gdal-dev] NODATA value in rasters
In-Reply-To: <4F887979.2010605@stripfamily.net>
References: <4F887979.2010605@stripfamily.net>
Message-ID: <CA+YzLBfHvwVqNepxYsVRVMog6xTEZ_2d58FD2iR7nX6pk+=qqw@mail.gmail.com>

David,

Some formats support identifying a particular pixel value as nodata
and some do not.
When they don't and you write nodata, we usually try to store the
information in an
.aux.xml file (auxilary metadata) which at least GDAL based applications would
recognise.

Best regards,
Frank

On Fri, Apr 13, 2012 at 12:07 PM, David Strip <gdal@stripfamily.net> wrote:
> What data formats besides geotiff ?support a NODATA value? Is there a
> uniform GDAL approach to determining the NODATA value or otherwise
> determining if a pixel is a NODATA pixel? I know that this value is stored
> in a geotiff tag, but that won't work for other formats.
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From cgodkin at gmail.com  Fri Apr 13 15:50:08 2012
From: cgodkin at gmail.com (Carl Godkin)
Date: Fri Apr 13 15:50:35 2012
Subject: [gdal-dev] NODATA value in rasters
In-Reply-To: <4F887979.2010605@stripfamily.net>
References: <4F887979.2010605@stripfamily.net>
Message-ID: <CAE=8km=6psB9P3VdNR-u52x+xPfj9w960vBczfTTGaRr=mJkkg@mail.gmail.com>

On Fri, Apr 13, 2012 at 12:07 PM, David Strip <gdal@stripfamily.net> wrote:

> What data formats besides geotiff  support a NODATA value? Is there a
> uniform GDAL approach to determining the NODATA value or otherwise
> determining if a pixel is a NODATA pixel? I know that this value is stored
> in a geotiff tag, but that won't work for other formats.
>
>
>
>
I think a lot of formats support the concept of NODATA.  The GDAL API has
functions for checking for this in the GDALRasterBand class, for instance,
as
double GDALRasterBand::GetNoDataValue() in the C++ or in the C API
as GDALGetRasterNoDataValue().

I've found that this sometimes works, but not always.  What I do is to read
the raster data and change everything outside the minimum to maximum range
(returned by two other API functions) to my own software's NODATA value.

Hope that helps,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120413/b67b8cc1/attachment.html
From ealpert at digitalglobe.com  Fri Apr 13 17:31:43 2012
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Fri Apr 13 17:31:59 2012
Subject: [gdal-dev] Problem with garbage bytes of data after EOI marker in
	single band JPEG
In-Reply-To: <201204132112.57569.even.rouault@mines-paris.org>
References: <8B319E5A30FF4A48BE7EEAAF609DB2330961BFA6@COMAIL01.digitalglobe.com>
	<201204132112.57569.even.rouault@mines-paris.org>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB2330961C055@COMAIL01.digitalglobe.com>

Ok why does this not happen with multi band jpgs?

 

From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Friday, April 13, 2012 1:13 PM
To: gdal-dev@lists.osgeo.org
Cc: Ethan Alpert
Subject: Re: [gdal-dev] Problem with garbage bytes of data after EOI marker in single band JPEG

 

Le vendredi 13 avril 2012 19:53:41, Ethan Alpert a ?crit :

> 

> This has been running for years. Recently a customer who receives these

> started scanning the JPG's for security threats. Turns out that the

> JPG's I've been writing have garbage data after the JPEG EOI marker.

> 

This is not garbage, but mask data appended after the JPEG data stream, as documented in the JPEG driver doc : 

"""The driver also supports the "zlib compressed mask appended to the file" 

approach used by a few data providers to add a bitmask to identify pixels that 

are not valid data."""

The mask is due to the advertized nodata value in the VRT. You can likely remove it by adding <HideNoDataValue>1</HideNoDataValue> in the VRT file under the VRTRasterBand element.


This electronic communication and any attachments may contain confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee 
responsible for delivering this communication to the intended recipient, or if you have received 
this communication in error, please do not print, copy, retransmit, disseminate or 
otherwise use the information. Please indicate to the sender that you have received this 
communication in error, and delete the copy you received. DigitalGlobe reserves the 
right to monitor any electronic communication sent or received by its employees, agents 
or representatives.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120413/f15c31f2/attachment-0001.html
From warmerdam at pobox.com  Fri Apr 13 17:34:53 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 13 17:35:16 2012
Subject: [gdal-dev] Problem with garbage bytes of data after EOI marker in
	single band JPEG
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB2330961C055@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB2330961BFA6@COMAIL01.digitalglobe.com>
	<201204132112.57569.even.rouault@mines-paris.org>
	<8B319E5A30FF4A48BE7EEAAF609DB2330961C055@COMAIL01.digitalglobe.com>
Message-ID: <CA+YzLBe0Xjc96dJQVSEtb3aVopZ8hu6on=5o5daNkgWUguAUBw@mail.gmail.com>

Ethan,

It only happens if there appears to be a valid mask on the source
image that gets copied by gdal_translate in a CreateCopy() call to the
jpeg driver.  There are various reasons a source might or might not
have a mask.

Best regards,
Frank

On Fri, Apr 13, 2012 at 2:31 PM, Ethan Alpert <ealpert@digitalglobe.com> wrote:
> Ok why does this not happen with multi band jpgs?
>
>
>
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Friday, April 13, 2012 1:13 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Ethan Alpert
> Subject: Re: [gdal-dev] Problem with garbage bytes of data after EOI marker
> in single band JPEG
>
>
>
> Le vendredi 13 avril 2012 19:53:41, Ethan Alpert a ?crit?:
>
>>
>
>> This has been running for years. Recently a customer who receives these
>
>> started scanning the JPG's for security threats. Turns out that the
>
>> JPG's I've been writing have garbage data after the JPEG EOI marker.
>
>>
>
> This is not garbage, but mask data appended after the JPEG data stream, as
> documented in the JPEG driver doc :
>
> """The driver also supports the "zlib compressed mask appended to the file"
>
> approach used by a few data providers to add a bitmask to identify pixels
> that
>
> are not valid data."""
>
> The mask is due to the advertized nodata value in the VRT. You can likely
> remove it by adding <HideNoDataValue>1</HideNoDataValue> in the VRT file
> under the VRTRasterBand element.
>
> This electronic communication and any attachments may contain confidential
> and proprietary
> information of DigitalGlobe, Inc. If you are not the intended recipient, or
> an agent or employee
> responsible for delivering this communication to the intended recipient, or
> if you have received
> this communication in error, please do not print, copy, retransmit,
> disseminate or
> otherwise use the information. Please indicate to the sender that you have
> received this
> communication in error, and delete the copy you received. DigitalGlobe
> reserves the
> right to monitor any electronic communication sent or received by its
> employees, agents
> or representatives.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From gdal at stripfamily.net  Fri Apr 13 18:56:23 2012
From: gdal at stripfamily.net (David Strip)
Date: Fri Apr 13 18:57:31 2012
Subject: [gdal-dev] NODATA value in rasters
In-Reply-To: <CAE=8km=6psB9P3VdNR-u52x+xPfj9w960vBczfTTGaRr=mJkkg@mail.gmail.com>
References: <4F887979.2010605@stripfamily.net>
	<CAE=8km=6psB9P3VdNR-u52x+xPfj9w960vBczfTTGaRr=mJkkg@mail.gmail.com>
Message-ID: <4F88AF17.60504@stripfamily.net>

On 4/13/2012 1:50 PM, Carl Godkin wrote:
> I think a lot of formats support the concept of NODATA.  The GDAL API 
> has functions for checking for this in the GDALRasterBand class, for 
> instance, as
> double GDALRasterBand::GetNoDataValue() in the C++ or in the C API 
> as GDALGetRasterNoDataValue().
>
> I've found that this sometimes works, but not always.  What I do is to 
> read the raster data and change everything outside the minimum to 
> maximum range (returned by two other API functions) to my own 
> software's NODATA value.
>
> Hope that helps,
>
> carl

Yes, that helps a lot. I'm not sure how I missed 
GDALRasterBand::GetNoDataValue() in my searches, but at least now I know 
how to address the problem I was dealing with.
Thanks.

From faux.black.francis at gmail.com  Fri Apr 13 19:48:13 2012
From: faux.black.francis at gmail.com (Charles Thompson)
Date: Fri Apr 13 19:48:22 2012
Subject: [gdal-dev] using gdalwarp to reproject swath data
Message-ID: <CADTEmorSAOvm+6aTh1ueW1QvXfZbEEwpcX2k0dETiT-ntAON8Q@mail.gmail.com>

I am a new GDAL user and have been trying to use gdalwarp to reproject a 2D
array of swath-based (satellite) floating-point data values (no projection)
that reside in a flat binary file.  I also have the corresponding
floating-point geolocation binary files that are the same dimensions as the
data array.  Data extent ranges from 19.0 to 58.0 longitude and -61.0 and
-40.0 latitude.  All missing data values are set to -9999.0.  From poring
over various postings I came across, I created three .vrt files, the
contents which are posted below.  Question: assuming these .vrt files are
correct, what is the gdalwarp command command to reproject this data to a
basic geographic lon-lat grid, retaining the floating-point values in a
flat binary file?  I've had very limited success so far, and that has only
occurred when I convert the data values to byte.  Even then, something
doesn't look exactly correct.  This is an example of the gdalwarp command
I've tried to use:

*gdalwarp -geoloc -te 19.0 -61.0 58.0 -40.0 data_values.vrt out_proj.raw*

Any help appreciated, thank you.

Charles


*VRT file (data_values.vrt) for data array stored in file data_values.raw:*

<VRTDataset rasterXSize="1354" rasterYSize="2030">
  <Metadata domain="GEOLOCATION">
    <MDI key="LINE_OFFSET">5416</MDI>
    <MDI key="LINE_STEP">1</MDI>
    <MDI key="PIXEL_OFFSET">4</MDI>
    <MDI key="PIXEL_STEP">1</MDI>
    <MDI key="X_BAND">1</MDI>
    <MDI key="X_DATASET">longitudes.vrt</MDI>
    <MDI key="Y_BAND">1</MDI>
    <MDI key="Y_DATASET">latitudes.vrt</MDI>
  </Metadata>
  <VRTRasterBand dataType="Float32" band="1" subClass="VRTRawRasterBand">
    <NoDataValue>-9999.0</NoDataValue>
    <SourceFilename relativeToVRT="1">data_values.raw</SourceFilename>
    <ImageOffset>0</ImageOffset>
    <PixelOffset>4</PixelOffset>
    <LineOffset>5416</LineOffset>
    <ByteOrder>LSB</ByteOrder>
  </VRTRasterBand>
</VRTDataset>

*VRT file (longitudes.vrt) for longitude array stored in file
longitudes.raw:

*<VRTDataset rasterXSize="1354" rasterYSize="2030">
  <VRTRasterBand dataType="Float32" band="1" subClass="VRTRawRasterBand">
    <SourceFilename relativetoVRT="1">longitudes.raw</SourceFilename>
    <ImageOffset>0</ImageOffset>
    <PixelOffset>4</PixelOffset>
    <LineOffset>5416</LineOffset>
    <ByteOrder>LSB</ByteOrder>
    <NoDataValue>-9999.0</NoDataValue>
  </VRTRasterBand>
</VRTDataset>

*VRT file (latitudes.vrt)  for latitude array stored in file latitudes.raw:

*<VRTDataset rasterXSize="1354" rasterYSize="2030">
  <VRTRasterBand dataType="Float32" band="1" subClass="VRTRawRasterBand">
    <SourceFilename relativetoVRT="1">latitudes.raw</SourceFilename>
    <ImageOffset>0</ImageOffset>
    <PixelOffset>4</PixelOffset>
    <LineOffset>5416</LineOffset>
    <ByteOrder>LSB</ByteOrder>
    <NoDataValue>-9999.0</NoDataValue>
  </VRTRasterBand>
</VRTDataset>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120413/a6e280fe/attachment.html
From chaitanya.ch at gmail.com  Sat Apr 14 01:43:56 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Apr 14 01:44:12 2012
Subject: [gdal-dev] Apply filter on VRT
In-Reply-To: <CAEcp1tA199BH-up=86VYY06ZQMfPREpu5Z9W2ok9r6ay-Y=onQ@mail.gmail.com>
References: <CAEcp1tBXVZ7diGzYJiLLaYJ2jtAyavwpZouae=3D9YgZ4N3bVw@mail.gmail.com>
	<CAMKgpOYUC14tii9GUHTnhvC9oGDVEznEnuFx_iaJdZcU2ViP=g@mail.gmail.com>
	<CAEcp1tBqjZ7o8L3YU0C7GnCmmWMNmbpuE3Qr8L4dpjKYfCNUPA@mail.gmail.com>
	<CAMKgpOa0QTA09_9Smvbe9Fv3ved5244R=3C_p_TxjwzrzdBhHA@mail.gmail.com>
	<CAEcp1tBbQeyevG2tZmNEv9v0QYqkLS5Aw62mAd-rZ=itfS8_Fw@mail.gmail.com>
	<CAEcp1tA199BH-up=86VYY06ZQMfPREpu5Z9W2ok9r6ay-Y=onQ@mail.gmail.com>
Message-ID: <CAMKgpObTHLvLXoMk71fsS+0sPzu2DeSNn-sWvdQgoGYb5zRx9A@mail.gmail.com>

Sa?d,

I too got errors.
The only way to avoid them for now it to run the individual rasters through
their own filter vrt files.

I am going to dig deeper in the ticket #4616.
http://trac.osgeo.org/gdal/ticket/4616

On Fri, Apr 13, 2012 at 5:39 PM, Sa?d HESSANE <saad.hessane@gmail.com>wrote:

> Hy list,
>
> Has anyone reproduce the bug?
>
> Thank you.
>
>
>
>
> 2012/4/12 Sa?d HESSANE <saad.hessane@gmail.com>
>
>> Yes of course :
>>
>>>  <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>>   <SRS>...</SRS>
>>>   <GeoTransform>...</GeoTransform>
>>>   <VRTRasterBand dataType="UInt16" band="1">
>>>     <NoDataValue>0</NoDataValue>
>>>     <ColorInterp>Gray</ColorInterp>
>>>     <KernelFilteredSource>
>>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>>       <SourceBand>1</SourceBand>
>>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>>       <NODATA>0</NODATA>
>>>     </KernelFilteredSource>
>>>     <KernelFilteredSource>
>>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>>       <SourceBand>1</SourceBand>
>>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>>       <NODATA>0</NODATA>
>>>     </KernelFilteredSource>
>>>   </VRTRasterBand>
>>> </VRTDataset>
>>
>>
>> It's really simple to reproduce the problem : do a "buildvrt" on a set of
>> raster ( > 1 raster ). Edit the vrt file and rename "ComplexSource" tag
>> with "KernelFilteredSource". add if you want the kernel definition.
>> Now you can do a gdal_translate to write a tiff file.
>>
>> There's no error in the terminale.
>> gdal_translate crash and a windows error dialog appears saying that the
>> the program has encountered an error and have to be close (the error is in
>> frensh sorry for my bad english...).
>> I'm using gdal 1.9 x64 onto Win 7 x64.
>>
>>
>>
>> 2012/4/12 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>>
>>> Sa?d,
>>>
>>> Can you provide the vrt file causing the crash? Also, please show me the
>>> error messages you got.
>>>
>>>
>>> On Thu, Apr 12, 2012 at 7:21 PM, Sa?d HESSANE <saad.hessane@gmail.com>wrote:
>>>
>>>> Thank you Chaitanya for the answer,
>>>>
>>>> I do the test with the kenel element like the documentation :
>>>>
>>>>
>>>>> <Kernel normalized="1">
>>>>>     <Size>3</Size>
>>>>>     <Coefs>0.11111111 0.11111111 0.11111111 0.11111111 0.11111111
>>>>> 0.11111111 0.11111111 0.11111111 0.11111111</Coefs>
>>>>> </Kernel>
>>>>>
>>>> It's the same probleme, gdal_translate crash. But if the VRTRasterBand
>>>> have just one KernelFilteredSource element, gdal_translate work fine and
>>>> apply the filtre correctely.
>>>>
>>>> The poblem appears if there are more than one KernelFilteredSource
>>>> element in the VRTRasterBand.
>>>>
>>>>
>>>>
>>>> 2012/4/12 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>>>>
>>>>> Sa?d,
>>>>>
>>>>> There should be a Kernel element in a KernelFilteredSource.
>>>>> FYI, all the pixels whose kernel has a nodata pixel will be reported
>>>>> as a nodata pixel.
>>>>>
>>>>>  On Wed, Apr 11, 2012 at 3:20 PM, Sa?d HESSANE <saad.hessane@gmail.com
>>>>> > wrote:
>>>>>
>>>>>>  Hy all,
>>>>>>
>>>>>> I have a VRT file generated with buildvrt utility :
>>>>>>
>>>>>> <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>>>>>>   <SRS>...</SRS>
>>>>>>>   <GeoTransform>...</GeoTransform>
>>>>>>>   <VRTRasterBand dataType="UInt16" band="1">
>>>>>>>     <NoDataValue>0</NoDataValue>
>>>>>>>     <ColorInterp>Gray</ColorInterp>
>>>>>>>     <ComplexSource>
>>>>>>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>>>>>>       <SourceBand>1</SourceBand>
>>>>>>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>>>>>>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>>>>>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>>>>>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>>>>>>       <NODATA>0</NODATA>
>>>>>>>     </ComplexSource>
>>>>>>>     <ComplexSource>
>>>>>>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>>>>>>       <SourceBand>1</SourceBand>
>>>>>>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>>>>>>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>>>>>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>>>>>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>>>>>>       <NODATA>0</NODATA>
>>>>>>>     </ComplexSource>
>>>>>>>   </VRTRasterBand>
>>>>>>> </VRTDataset>
>>>>>>>
>>>>>>
>>>>>> It's work fine with a gdal_translate.
>>>>>> Now I want to apply a filter kernel to the VRT. I have to use the
>>>>>> KernelFilteredSource.
>>>>>> The gdal api say that VRTKernelFilteredSource is a sub-class of
>>>>>> VRTComplexSource. So a VRTKernelFilteredSource *is *a
>>>>>> VRTComplexSource.
>>>>>> But if I replace VRTComplexSource by VRTKernelFilteredSource,
>>>>>> gdal_translate crash. This is the new VRT :
>>>>>>
>>>>>> <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>>>>>>   <SRS>...</SRS>
>>>>>>>   <GeoTransform>...</GeoTransform>
>>>>>>>   <VRTRasterBand dataType="UInt16" band="1">
>>>>>>>     <NoDataValue>0</NoDataValue>
>>>>>>>     <ColorInterp>Gray</ColorInterp>
>>>>>>>     <KernelFilteredSource>
>>>>>>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>>>>>>       <SourceBand>1</SourceBand>
>>>>>>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>>>>>>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>>>>>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>>>>>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>>>>>>       <NODATA>0</NODATA>
>>>>>>>     </KernelFilteredSource>
>>>>>>>     <KernelFilteredSource>
>>>>>>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>>>>>>       <SourceBand>1</SourceBand>
>>>>>>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>>>>>>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>>>>>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>>>>>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>>>>>>       <NODATA>0</NODATA>
>>>>>>>     </KernelFilteredSource>
>>>>>>>   </VRTRasterBand>
>>>>>>> </VRTDataset>
>>>>>>>
>>>>>>
>>>>>> It's weird, I expected a polymorphism between VRTComplexSource and
>>>>>> VRTKernelFilteredSource.
>>>>>> So the question : how can I apply a filter to a VRT?
>>>>>> Thank you !
>>>>>>
>>>>>>
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Best regards,
>>>>> Chaitanya kumar CH.
>>>>>
>>>>> +91-9494447584
>>>>> 17.2416N 80.1426E
>>>>>
>>>>
>>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>>
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>
>>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120414/2bfa0c50/attachment-0001.html
From ari.jolma at gmail.com  Sat Apr 14 07:35:51 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat Apr 14 07:36:17 2012
Subject: [gdal-dev] Fields
Message-ID: <4F896117.7080208@gmail.com>

Folks,

While extending the method set of Geo::OGR::Layer in the Perl bindings I 
noticed that it is perfectly possible to create two fields with the same 
name into a layer. This seems too relaxed. Or are there use cases where 
one would like to have more than one field which has the same name?

Ari

From even.rouault at mines-paris.org  Sat Apr 14 16:11:27 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr 14 16:11:04 2012
Subject: [gdal-dev] Call for discussion for "RFC38 - OGR Faster Open"
Message-ID: <201204142211.28009.even.rouault@mines-paris.org>

Hi,

This is a call for discussion for "RFC38 - OGR Faster Open" :

http://trac.osgeo.org/gdal/wiki/rfc38_ogr_faster_open

Summary
---------------

It is proposed that the OGR datasource opening mechanism relies on the 
GDALOpenInfo class, already used by GDAL drivers, to speed-up datasource 
opening. The speed-up is due to the fact that the file passed to OGROpen() will 
be opened and stat'ed only once, whereas currently, it is opened and closed as 
many times as there are OGR drivers. This should be particularly beneficial for 
network filesystems, or when trying to open a file that is not a OGR datasource 
at all.

E.g., trying to open a file that is not a OGR datasource currently requires 45 
file opening or stat operations :

$ strace ogrinfo -ro NEWS 2>&1 | grep NEWS | wc -l
45

It is expected that if/once all drivers are migrated, it will decrease to 2 
operations only. 

Best regards,

Even
From even.rouault at mines-paris.org  Sat Apr 14 16:16:33 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr 14 16:15:33 2012
Subject: [gdal-dev] Fields
In-Reply-To: <4F896117.7080208@gmail.com>
References: <4F896117.7080208@gmail.com>
Message-ID: <201204142216.33439.even.rouault@mines-paris.org>

Le samedi 14 avril 2012 13:35:51, Ari Jolma a ?crit :
> Folks,
> 
> While extending the method set of Geo::OGR::Layer in the Perl bindings I
> noticed that it is perfectly possible to create two fields with the same
> name into a layer. This seems too relaxed. Or are there use cases where
> one would like to have more than one field which has the same name?

Ari,

I doubt there are really valid use cases where this would make sense, and I 
know that for instance, ogr2ogr will not be able to correctly deal with that 
(it will only keep one field for several fields with same name).

However it would require quite a bit of effort to guarantee field name 
uniqueness, because all drivers should be updated to implement the logic to 
avoid that.

Even

> 
> Ari
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Sat Apr 14 16:21:53 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Apr 14 16:22:26 2012
Subject: [gdal-dev] Call for discussion for "RFC38 - OGR Faster Open"
In-Reply-To: <201204142211.28009.even.rouault@mines-paris.org>
References: <201204142211.28009.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBdH0zNvsPJhWiPWx2ET9_O4B+XEkQ4isdu1ZiSHvE0ncw@mail.gmail.com>

Even,

I am generally in favor of this, but I aspire in GDAL 2.0 to migrate
OGR to using GDALDriver mechanisms which would include being based
around GDALOpenInfo.  I am not sure if it is better to make the
GDALOpenInfo change as part of that broader effort or as a distinct
RFC and work item.

Best regards,
Frank

On Sat, Apr 14, 2012 at 1:11 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Hi,
>
> This is a call for discussion for "RFC38 - OGR Faster Open" :
>
> http://trac.osgeo.org/gdal/wiki/rfc38_ogr_faster_open
>
> Summary
> ---------------
>
> It is proposed that the OGR datasource opening mechanism relies on the
> GDALOpenInfo class, already used by GDAL drivers, to speed-up datasource
> opening. The speed-up is due to the fact that the file passed to OGROpen() will
> be opened and stat'ed only once, whereas currently, it is opened and closed as
> many times as there are OGR drivers. This should be particularly beneficial for
> network filesystems, or when trying to open a file that is not a OGR datasource
> at all.
>
> E.g., trying to open a file that is not a OGR datasource currently requires 45
> file opening or stat operations :
>
> $ strace ogrinfo -ro NEWS 2>&1 | grep NEWS | wc -l
> 45
>
> It is expected that if/once all drivers are migrated, it will decrease to 2
> operations only.
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Sat Apr 14 16:36:24 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr 14 16:35:43 2012
Subject: [gdal-dev] Call for discussion for "RFC38 - OGR Faster Open"
In-Reply-To: <CA+YzLBdH0zNvsPJhWiPWx2ET9_O4B+XEkQ4isdu1ZiSHvE0ncw@mail.gmail.com>
References: <201204142211.28009.even.rouault@mines-paris.org>
	<CA+YzLBdH0zNvsPJhWiPWx2ET9_O4B+XEkQ4isdu1ZiSHvE0ncw@mail.gmail.com>
Message-ID: <201204142236.24879.even.rouault@mines-paris.org>

Le samedi 14 avril 2012 22:21:53, Frank Warmerdam a ?crit :
> Even,
> 
> I am generally in favor of this, but I aspire in GDAL 2.0 to migrate
> OGR to using GDALDriver mechanisms which would include being based
> around GDALOpenInfo.  I am not sure if it is better to make the
> GDALOpenInfo change as part of that broader effort or as a distinct
> RFC and work item.

What do you call "using GDALDriver mechanisms" exactly ?

Because I don't see how we can make OGRSFDriver extend GDALDriver if that's 
what you have in mind... 
From warmerdam at pobox.com  Sat Apr 14 16:40:05 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Apr 14 16:40:46 2012
Subject: [gdal-dev] Call for discussion for "RFC38 - OGR Faster Open"
In-Reply-To: <201204142236.24879.even.rouault@mines-paris.org>
References: <201204142211.28009.even.rouault@mines-paris.org>
	<CA+YzLBdH0zNvsPJhWiPWx2ET9_O4B+XEkQ4isdu1ZiSHvE0ncw@mail.gmail.com>
	<201204142236.24879.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBfZBcvC=eN9tkMZTN=ymnSgYfoXx8DP7E9CBDBRC1-E8A@mail.gmail.com>

On Sat, Apr 14, 2012 at 1:36 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le samedi 14 avril 2012 22:21:53, Frank Warmerdam a ?crit :
>> Even,
>>
>> I am generally in favor of this, but I aspire in GDAL 2.0 to migrate
>> OGR to using GDALDriver mechanisms which would include being based
>> around GDALOpenInfo. ?I am not sure if it is better to make the
>> GDALOpenInfo change as part of that broader effort or as a distinct
>> RFC and work item.
>
> What do you call "using GDALDriver mechanisms" exactly ?
>
> Because I don't see how we can make OGRSFDriver extend GDALDriver if that's
> what you have in mind...

Even,

My intention is that OGRSFDriver would go away and
OGR drivers would be registered with GDALDriverManager
the same way GDAL drivers are.  This would go along with
changes to OGRDataSource, possibly making it a subclass
of GDALDataset or perhaps a new super class of GDALDataset.

Well, my thinking on this is all still half baked, but the goal is
that OGR will have all the benefits of GDAL's metadata and
driver manager and I even dream of being able ot have one
dataset object with raster bands and vector layers for
things like a PCIDSK file.

Of course there will be some disruption - I think particularly
on the OGR side which is why I have waited for 2.0.

I hope to prepare some sort of roadmap for this in coming
weeks.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From chaitanya.ch at gmail.com  Sun Apr 15 00:37:59 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Apr 15 00:38:45 2012
Subject: [gdal-dev] Very large time difference using gdal_translate from
	Jpeg2000 to different formats using JP2KAK driver
In-Reply-To: <1334278403286-4874129.post@n6.nabble.com>
References: <1334278403286-4874129.post@n6.nabble.com>
Message-ID: <CAMKgpOZwjCTu_cPJaX3W3z_eXZ8himo7GvYGDY-+17XmLRjhig@mail.gmail.com>

Adam,

The kakadu library is very fast compared to many others. Each
format/library has it's own advantages and disadvantages regarding speed,
file size, data loss, license cost, compatibility with raster data types,
etc.

Could you provide some statistics of the times taken to encode/decode with
various drivers/formats? Your results may not be the true speeds but they
will give a basis for comparison to many users.

On Friday, April 13, 2012, ahbrown wrote:

> Hi,
>
> I am wondering why there is such a large difference in the time to convert
> a
> large O(250MB) Jpeg2000 image to GeoTiff format in comparison with
> conversion to other formats (e.g. jpeg, png)?
>
> I am using the Kakadu Jpeg2000 driver. With a 43221 x 36021 Jpeg2000 image.
>
> Results of timed conversions are as follows:
>
>
>
> Using RasterIO directly (via the Java wrapper) the conversion takes around
> 6
> seconds.
>
> Any insights are appreciated.
>
> Thanks,
>
>
> Adam
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Very-large-time-difference-using-gdal-translate-from-Jpeg2000-to-different-formats-using-JP2KAK-drivr-tp4874129p4874129.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org <javascript:;>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120415/ec608fe9/attachment.html
From warmerdam at pobox.com  Sun Apr 15 00:48:54 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Apr 15 00:49:32 2012
Subject: [gdal-dev] Very large time difference using gdal_translate from
	Jpeg2000 to different formats using JP2KAK driver
In-Reply-To: <1334278403286-4874129.post@n6.nabble.com>
References: <1334278403286-4874129.post@n6.nabble.com>
Message-ID: <4F8A5336.4070701@pobox.com>

On 12-04-12 05:53 PM, ahbrown wrote:
> Hi,
>
> I am wondering why there is such a large difference in the time to convert a
> large O(250MB) Jpeg2000 image to GeoTiff format in comparison with
> conversion to other formats (e.g. jpeg, png)?
>
> I am using the Kakadu Jpeg2000 driver. With a 43221 x 36021 Jpeg2000 image.
>
> Results of timed conversions are as follows:
>
>
>
> Using RasterIO directly (via the Java wrapper) the conversion takes around 6
> seconds.

Adam,

Many drivers implement the CreateCopy() rather than Create() method. In these
cases the input dataset is passed to the output driver and they pull data in
whatever way is convenient.

The PNG and JPEG drivers are "CreateCopy" drivers and likely request data
one scanline at a time.  In this situation the JP2KAK driver actually gets
asked for the data in moderate sized tiles which turns out not to be very
efficient for the Kakadu library as there is a high setup cost for each
windowed read.

The GeoTIFF format support Create(), so gdal_translate is able to more
closely manage the chunking of reads and writes and tries to do it in
large chunks.  The JP2KAK driver handles large reads through IRasterIO()
as single windowed reads which are more efficient than the smaller tile
reads.

So I think the bulk of the difference in performance is related to different
IO strategies that apply against the JP2KAK driver.  The variation between
JPEG and PNG times is likely different costs on the compression side.

PS. it appears posts through nabble do not preserve some components, like
the fixed font timings text.  I encourage direct use of the mailing list
for posts.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From ari.jolma at gmail.com  Sun Apr 15 03:11:59 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sun Apr 15 03:12:49 2012
Subject: [gdal-dev] Fields
In-Reply-To: <201204142216.33439.even.rouault@mines-paris.org>
References: <4F896117.7080208@gmail.com>
	<201204142216.33439.even.rouault@mines-paris.org>
Message-ID: <4F8A74BF.3040904@gmail.com>

On 04/14/2012 11:16 PM, Even Rouault wrote:
> Le samedi 14 avril 2012 13:35:51, Ari Jolma a ?crit :
>> Folks,
>>
>> While extending the method set of Geo::OGR::Layer in the Perl bindings I
>> noticed that it is perfectly possible to create two fields with the same
>> name into a layer. This seems too relaxed. Or are there use cases where
>> one would like to have more than one field which has the same name?
> Ari,
>
> I doubt there are really valid use cases where this would make sense, and I
> know that for instance, ogr2ogr will not be able to correctly deal with that
> (it will only keep one field for several fields with same name).
>
> However it would require quite a bit of effort to guarantee field name
> uniqueness, because all drivers should be updated to implement the logic to
> avoid that.

Hm. I thought that only as an interface issue with methods such as 
Layer::CreateField and Layer::AlterField. As I usually consider 
interactive use, I try to build in checks against common mistakes - and 
I was wondering is it always a mistake. The database theory usually 
assumes an unordered set of attributes identified by names. I'm 
wondering is there a reason for the user to even know about the indexes 
of the fields.

The broader issue is that I'm trying to think about and build support 
for "complete" algebra for feature layers - a bit similar to raster 
algebra. I think the fundamental object the user works with is a Layer. 
There is for example a method "Union" in ArcObjects and QGIS has 
something too. BTW, does anybody know about any theoretical work on this 
issue?

Ari

>
> Even
>
>> Ari
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From saad.hessane at gmail.com  Sun Apr 15 04:35:15 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Sun Apr 15 04:35:24 2012
Subject: [gdal-dev] Apply filter on VRT
In-Reply-To: <CAMKgpObTHLvLXoMk71fsS+0sPzu2DeSNn-sWvdQgoGYb5zRx9A@mail.gmail.com>
References: <CAEcp1tBXVZ7diGzYJiLLaYJ2jtAyavwpZouae=3D9YgZ4N3bVw@mail.gmail.com>
	<CAMKgpOYUC14tii9GUHTnhvC9oGDVEznEnuFx_iaJdZcU2ViP=g@mail.gmail.com>
	<CAEcp1tBqjZ7o8L3YU0C7GnCmmWMNmbpuE3Qr8L4dpjKYfCNUPA@mail.gmail.com>
	<CAMKgpOa0QTA09_9Smvbe9Fv3ved5244R=3C_p_TxjwzrzdBhHA@mail.gmail.com>
	<CAEcp1tBbQeyevG2tZmNEv9v0QYqkLS5Aw62mAd-rZ=itfS8_Fw@mail.gmail.com>
	<CAEcp1tA199BH-up=86VYY06ZQMfPREpu5Z9W2ok9r6ay-Y=onQ@mail.gmail.com>
	<CAMKgpObTHLvLXoMk71fsS+0sPzu2DeSNn-sWvdQgoGYb5zRx9A@mail.gmail.com>
Message-ID: <CAEcp1tDXhZcb6tH1iAHjQLyGCvXYYJvzTgt4QViaOdLF_q_DOQ@mail.gmail.com>

Thank you !


2012/4/14 Chaitanya kumar CH <chaitanya.ch@gmail.com>

> Sa?d,
>
> I too got errors.
> The only way to avoid them for now it to run the individual rasters
> through their own filter vrt files.
>
> I am going to dig deeper in the ticket #4616.
> http://trac.osgeo.org/gdal/ticket/4616
>
>
> On Fri, Apr 13, 2012 at 5:39 PM, Sa?d HESSANE <saad.hessane@gmail.com>wrote:
>
>> Hy list,
>>
>> Has anyone reproduce the bug?
>>
>> Thank you.
>>
>>
>>
>>
>> 2012/4/12 Sa?d HESSANE <saad.hessane@gmail.com>
>>
>>> Yes of course :
>>>
>>>>  <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>>>   <SRS>...</SRS>
>>>>   <GeoTransform>...</GeoTransform>
>>>>   <VRTRasterBand dataType="UInt16" band="1">
>>>>     <NoDataValue>0</NoDataValue>
>>>>     <ColorInterp>Gray</ColorInterp>
>>>>     <KernelFilteredSource>
>>>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>>>       <SourceBand>1</SourceBand>
>>>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>>>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>>>       <NODATA>0</NODATA>
>>>>     </KernelFilteredSource>
>>>>     <KernelFilteredSource>
>>>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>>>       <SourceBand>1</SourceBand>
>>>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>>>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407" />
>>>>       <NODATA>0</NODATA>
>>>>     </KernelFilteredSource>
>>>>   </VRTRasterBand>
>>>> </VRTDataset>
>>>
>>>
>>> It's really simple to reproduce the problem : do a "buildvrt" on a set
>>> of raster ( > 1 raster ). Edit the vrt file and rename "ComplexSource" tag
>>> with "KernelFilteredSource". add if you want the kernel definition.
>>> Now you can do a gdal_translate to write a tiff file.
>>>
>>> There's no error in the terminale.
>>> gdal_translate crash and a windows error dialog appears saying that the
>>> the program has encountered an error and have to be close (the error is in
>>> frensh sorry for my bad english...).
>>> I'm using gdal 1.9 x64 onto Win 7 x64.
>>>
>>>
>>>
>>> 2012/4/12 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>>>
>>>> Sa?d,
>>>>
>>>> Can you provide the vrt file causing the crash? Also, please show me
>>>> the error messages you got.
>>>>
>>>>
>>>> On Thu, Apr 12, 2012 at 7:21 PM, Sa?d HESSANE <saad.hessane@gmail.com>wrote:
>>>>
>>>>> Thank you Chaitanya for the answer,
>>>>>
>>>>> I do the test with the kenel element like the documentation :
>>>>>
>>>>>
>>>>>> <Kernel normalized="1">
>>>>>>     <Size>3</Size>
>>>>>>     <Coefs>0.11111111 0.11111111 0.11111111 0.11111111 0.11111111
>>>>>> 0.11111111 0.11111111 0.11111111 0.11111111</Coefs>
>>>>>> </Kernel>
>>>>>>
>>>>> It's the same probleme, gdal_translate crash. But if the VRTRasterBand
>>>>> have just one KernelFilteredSource element, gdal_translate work fine and
>>>>> apply the filtre correctely.
>>>>>
>>>>> The poblem appears if there are more than one KernelFilteredSource
>>>>> element in the VRTRasterBand.
>>>>>
>>>>>
>>>>>
>>>>> 2012/4/12 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>>>>>
>>>>>> Sa?d,
>>>>>>
>>>>>> There should be a Kernel element in a KernelFilteredSource.
>>>>>> FYI, all the pixels whose kernel has a nodata pixel will be reported
>>>>>> as a nodata pixel.
>>>>>>
>>>>>>  On Wed, Apr 11, 2012 at 3:20 PM, Sa?d HESSANE <
>>>>>> saad.hessane@gmail.com> wrote:
>>>>>>
>>>>>>>  Hy all,
>>>>>>>
>>>>>>> I have a VRT file generated with buildvrt utility :
>>>>>>>
>>>>>>> <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>>>>>>>   <SRS>...</SRS>
>>>>>>>>   <GeoTransform>...</GeoTransform>
>>>>>>>>   <VRTRasterBand dataType="UInt16" band="1">
>>>>>>>>     <NoDataValue>0</NoDataValue>
>>>>>>>>     <ColorInterp>Gray</ColorInterp>
>>>>>>>>     <ComplexSource>
>>>>>>>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>>>>>>>       <SourceBand>1</SourceBand>
>>>>>>>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>>>>>>>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>>>>>>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>>>>>>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>>>>>>>       <NODATA>0</NODATA>
>>>>>>>>     </ComplexSource>
>>>>>>>>     <ComplexSource>
>>>>>>>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>>>>>>>       <SourceBand>1</SourceBand>
>>>>>>>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>>>>>>>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>>>>>>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>>>>>>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407"
>>>>>>>> />
>>>>>>>>       <NODATA>0</NODATA>
>>>>>>>>     </ComplexSource>
>>>>>>>>   </VRTRasterBand>
>>>>>>>> </VRTDataset>
>>>>>>>>
>>>>>>>
>>>>>>> It's work fine with a gdal_translate.
>>>>>>> Now I want to apply a filter kernel to the VRT. I have to use the
>>>>>>> KernelFilteredSource.
>>>>>>> The gdal api say that VRTKernelFilteredSource is a sub-class of
>>>>>>> VRTComplexSource. So a VRTKernelFilteredSource *is *a
>>>>>>> VRTComplexSource.
>>>>>>> But if I replace VRTComplexSource by VRTKernelFilteredSource,
>>>>>>> gdal_translate crash. This is the new VRT :
>>>>>>>
>>>>>>> <VRTDataset rasterXSize="52436" rasterYSize="32400">
>>>>>>>>   <SRS>...</SRS>
>>>>>>>>   <GeoTransform>...</GeoTransform>
>>>>>>>>   <VRTRasterBand dataType="UInt16" band="1">
>>>>>>>>     <NoDataValue>0</NoDataValue>
>>>>>>>>     <ColorInterp>Gray</ColorInterp>
>>>>>>>>     <KernelFilteredSource>
>>>>>>>>       <SourceFilename relativeToVRT="1">1.tif</SourceFilename>
>>>>>>>>       <SourceBand>1</SourceBand>
>>>>>>>>       <SourceProperties RasterXSize="8449" RasterYSize="6429"
>>>>>>>> DataType="UInt16" BlockXSize="8449" BlockYSize="1" />
>>>>>>>>       <SrcRect xOff="0" yOff="0" xSize="8449" ySize="6429" />
>>>>>>>>       <DstRect xOff="0" yOff="0" xSize="10721" ySize="8158" />
>>>>>>>>       <NODATA>0</NODATA>
>>>>>>>>     </KernelFilteredSource>
>>>>>>>>     <KernelFilteredSource>
>>>>>>>>       <SourceFilename relativeToVRT="1">2.tif</SourceFilename>
>>>>>>>>       <SourceBand>1</SourceBand>
>>>>>>>>       <SourceProperties RasterXSize="8772" RasterYSize="6407"
>>>>>>>> DataType="UInt16" BlockXSize="8772" BlockYSize="1" />
>>>>>>>>       <SrcRect xOff="0" yOff="0" xSize="8772" ySize="6407" />
>>>>>>>>       <DstRect xOff="43664" yOff="25993" xSize="8772" ySize="6407"
>>>>>>>> />
>>>>>>>>       <NODATA>0</NODATA>
>>>>>>>>     </KernelFilteredSource>
>>>>>>>>   </VRTRasterBand>
>>>>>>>> </VRTDataset>
>>>>>>>>
>>>>>>>
>>>>>>> It's weird, I expected a polymorphism between VRTComplexSource and
>>>>>>> VRTKernelFilteredSource.
>>>>>>> So the question : how can I apply a filter to a VRT?
>>>>>>> Thank you !
>>>>>>>
>>>>>>>
>>>>>>> _______________________________________________
>>>>>>> gdal-dev mailing list
>>>>>>> gdal-dev@lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>> --
>>>>>> Best regards,
>>>>>> Chaitanya kumar CH.
>>>>>>
>>>>>> +91-9494447584
>>>>>> 17.2416N 80.1426E
>>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>>
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>
>>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120415/5904bb53/attachment.html
From thomas at silentwings.no  Sun Apr 15 10:28:48 2012
From: thomas at silentwings.no (tseval)
Date: Sun Apr 15 10:29:05 2012
Subject: [gdal-dev] GDAL/C++ Cut out and possibly reproject a sub-image
Message-ID: <1334500128570-4883738.post@n6.nabble.com>

Hi folks,

I am programming an application where I want to produce small tiles in a
given projection from a lot of input image files. The input files may be
different projections and resolutions. 

I have read the API tutorials and looked through the GDAL documentation, and
searched this mailing list, but I'm still a bit uncertain as to how I should
implement this. Hopefully someone can give me a few pointers to get started
:-)

I suppose I should use the Warp API to do the actual reprojection and
cutting of the images. And I think I should use a VRT dataset to represent
all the input images?

If I understand correctly, a VRT dataset is a virtual dataset that
represents several input files. I have however not figured out how to
programatically add input files to my dataset? I was looking for something
along the lines of an AddFile() method, but couldn't find any?

Am I wrong in assuming that a VRT is the best way to represent my input
data?

Can I have a target GDALDataset that exists only in memory? I do not need to
store the output image on disk , and it will always be quite small
(typically 256x256 pixels), so I can not see any reason that it needs to be
stored for of out of memory operations either.

Also, I can't exactly see how I should set up the WarpOperation to reproject
and cut only a sub-image of the large VRT dataset?

Any help on this would be greatly appreciated!

Cheers,
Thomas

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/GDAL-C-Cut-out-and-possibly-reproject-a-sub-image-tp4883738p4883738.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sun Apr 15 13:31:24 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 15 13:30:18 2012
Subject: [gdal-dev] Adding GMLJP2 metadata into existing JPEG2000 file
In-Reply-To: <1334305812.4f87e414dc65b@webmail.free.fr>
References: <loom.20120411T141237-487@post.gmane.org>
	<84446DEF76453C439E9E97E438E13A6314A066@suutari.haapa.mmm.fi>
	<1334305812.4f87e414dc65b@webmail.free.fr>
Message-ID: <201204151931.24547.even.rouault@mines-paris.org>

Le vendredi 13 avril 2012 10:30:12, Even Rouault a ?crit :
> > Hi,
> > 
> > Alex Sevaliev from j2k-codec.com already wrote such a tool for us. It can
> > be used
> > in a fast mode when new GML boxes are written at the end of the JPEG2000
> > file and then it is super fast even with however big files.
> 
> Yes, in fact, if the GML file to insert is already generated, the tool to
> insert the GMLJP2 box might likely be written in a few dozains of lines of
> any programming/scripting language, and that doesn't require to know how
> to decode JPEG2000 streams, nor link with GDAL.

As an illustration of the above, you can try the append_gmljp2_box.py script 
that I've linked to http://even.rouault.free.fr/
From Sjur.A.Kolberg at sintef.no  Sun Apr 15 18:28:48 2012
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Sun Apr 15 18:30:58 2012
Subject: [gdal-dev] Call for discussion for "RFC38 - OGR Faster Open"
In-Reply-To: <CA+YzLBfZBcvC=eN9tkMZTN=ymnSgYfoXx8DP7E9CBDBRC1-E8A@mail.gmail.com>
References: <201204142211.28009.even.rouault@mines-paris.org>
	<CA+YzLBdH0zNvsPJhWiPWx2ET9_O4B+XEkQ4isdu1ZiSHvE0ncw@mail.gmail.com>
	<201204142236.24879.even.rouault@mines-paris.org>
	<CA+YzLBfZBcvC=eN9tkMZTN=ymnSgYfoXx8DP7E9CBDBRC1-E8A@mail.gmail.com>
Message-ID: <72251B925CE10A478606EEAC6AA683BE5973564D18@SINTEFEXMBX01.sintef.no>

For what it's worth...

I'd be happy to see a development towards GDALDataset and OGRDataSource inheriting from the same superclass.

This is due to writing process modelling algorithms that can operate on several geometries.

Sjur K :-)


> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
> bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
> Sent: 14. april 2012 22:40
> To: Even Rouault
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Call for discussion for "RFC38 - OGR Faster Open"
> 
> On Sat, Apr 14, 2012 at 1:36 PM, Even Rouault <even.rouault@mines-paris.org>
> wrote:
> > Le samedi 14 avril 2012 22:21:53, Frank Warmerdam a ?crit :
> >> Even,
> >>
> >> I am generally in favor of this, but I aspire in GDAL 2.0 to migrate
> >> OGR to using GDALDriver mechanisms which would include being based
> >> around GDALOpenInfo. ?I am not sure if it is better to make the
> >> GDALOpenInfo change as part of that broader effort or as a distinct
> >> RFC and work item.
> >
> > What do you call "using GDALDriver mechanisms" exactly ?
> >
> > Because I don't see how we can make OGRSFDriver extend GDALDriver if
> > that's what you have in mind...
> 
> Even,
> 
> My intention is that OGRSFDriver would go away and OGR drivers would be
> registered with GDALDriverManager the same way GDAL drivers are.  This would
> go along with changes to OGRDataSource, possibly making it a subclass of
> GDALDataset or perhaps a new super class of GDALDataset.
> 
> Well, my thinking on this is all still half baked, but the goal is that OGR
> will have all the benefits of GDAL's metadata and driver manager and I even
> dream of being able ot have one dataset object with raster bands and vector
> layers for things like a PCIDSK file.
> 
> Of course there will be some disruption - I think particularly on the OGR side
> which is why I have waited for 2.0.
> 
> I hope to prepare some sort of roadmap for this in coming weeks.
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------
> ---------------------------------------+------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam and watch
> the world go round - Rush? ? | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Sun Apr 15 19:33:42 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Apr 15 19:33:56 2012
Subject: [gdal-dev] Summer of Code
Message-ID: <4F8B5AD6.6040104@pobox.com>

Folks,

There is one proposed OSGeo/Google SoC project proposed related to GDAL:

Correlator in GDAL

 
http://www.google-melange.com/gsoc/proposal/review/google/gsoc2012/king_of_defeat/1

Part of the procedure is that the project (ie. GDAL) is supposed to return
a ranked list of projects they support to Anne (our admin) by Tuesday.

This isn't quite time for a formal motion so I'm suggesting this is a call
for objections and/or volunteers to mentor.

I'm interested in mentoring this project but the normal practice is to have
two co-mentors to ensure availability for the student.

So does anyone object to the above project proceeding?

Does anyone want to co-mentor?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From chaitanya.ch at gmail.com  Mon Apr 16 02:56:16 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Apr 16 02:57:04 2012
Subject: [gdal-dev] Summer of Code
In-Reply-To: <4F8B5AD6.6040104@pobox.com>
References: <4F8B5AD6.6040104@pobox.com>
Message-ID: <CAMKgpOYRrHx8H9f85x2u3iQe_sUvt4A=uOVpDt-SicgqVwsfRw@mail.gmail.com>

Frank,

I have used this kind of tool in GIMP to stitch partial scans of a large
paper map.
IMHO, this tool is more appropriate in a desktop gis tool with gui instead
of gdal. But having it in GDAL could be useful to more users.

I can be a mentor if there is a shortage.

On Mon, Apr 16, 2012 at 5:03 AM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Folks,
>
> There is one proposed OSGeo/Google SoC project proposed related to GDAL:
>
> Correlator in GDAL
>
>
> http://www.google-melange.com/**gsoc/proposal/review/google/**
> gsoc2012/king_of_defeat/1<http://www.google-melange.com/gsoc/proposal/review/google/gsoc2012/king_of_defeat/1>
>
> Part of the procedure is that the project (ie. GDAL) is supposed to return
> a ranked list of projects they support to Anne (our admin) by Tuesday.
>
> This isn't quite time for a formal motion so I'm suggesting this is a call
> for objections and/or volunteers to mentor.
>
> I'm interested in mentoring this project but the normal practice is to have
> two co-mentors to ensure availability for the student.
>
> So does anyone object to the above project proceeding?
>
> Does anyone want to co-mentor?
>
> Best regards,
> --
> ------------------------------**---------+--------------------**
> ------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://home.gdal.org/warmerda
> and watch the world go round - Rush    | Geospatial Software Developer
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120416/75e7c98e/attachment.html
From polimax at mail.ru  Mon Apr 16 03:50:26 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Mon Apr 16 03:50:56 2012
Subject: [gdal-dev] Summer of Code
In-Reply-To: <CAMKgpOYRrHx8H9f85x2u3iQe_sUvt4A=uOVpDt-SicgqVwsfRw@mail.gmail.com>
References: <4F8B5AD6.6040104@pobox.com>
	<CAMKgpOYRrHx8H9f85x2u3iQe_sUvt4A=uOVpDt-SicgqVwsfRw@mail.gmail.com>
Message-ID: <4F8BCF42.1010207@mail.ru>

16.04.2012 10:56, Chaitanya kumar CH ???????:
> Frank,
>
> I have used this kind of tool in GIMP to stitch partial scans of a 
> large paper map.
> IMHO, this tool is more appropriate in a desktop gis tool with gui 
> instead of gdal. But having it in GDAL could be useful to more users.
>
> I can be a mentor if there is a shortage.
>
> On Mon, Apr 16, 2012 at 5:03 AM, Frank Warmerdam <warmerdam@pobox.com 
> <mailto:warmerdam@pobox.com>> wrote:
>
>     Folks,
>
>     There is one proposed OSGeo/Google SoC project proposed related to
>     GDAL:
>
>     Correlator in GDAL
>
>
>     http://www.google-melange.com/gsoc/proposal/review/google/gsoc2012/king_of_defeat/1
>
>     Part of the procedure is that the project (ie. GDAL) is supposed
>     to return
>     a ranked list of projects they support to Anne (our admin) by Tuesday.
>
>     This isn't quite time for a formal motion so I'm suggesting this
>     is a call
>     for objections and/or volunteers to mentor.
>
>     I'm interested in mentoring this project but the normal practice
>     is to have
>     two co-mentors to ensure availability for the student.
>
>     So does anyone object to the above project proceeding?
>
>     Does anyone want to co-mentor?
>
>     Best regards,
>     -- 
>     ---------------------------------------+--------------------------------------
>     I set the clouds in motion - turn up   | Frank Warmerdam,
>     warmerdam@pobox.com <mailto:warmerdam@pobox.com>
>     light and sound - activate the windows | http://home.gdal.org/warmerda
>     and watch the world go round - Rush    | Geospatial Software Developer
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi,

As this is the student which I mentioned in IRC, I would like to be the 
co-mentor. What I have to do to become the co-mentor?

Best regards,
      Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120416/7ea7877a/attachment.html
From deshpande.gh at gmail.com  Mon Apr 16 05:34:13 2012
From: deshpande.gh at gmail.com (Girish Deshpande)
Date: Mon Apr 16 05:34:32 2012
Subject: [gdal-dev] S57 Viewer Application Using MFC
Message-ID: <CAJXNG3Kn8HqUGbBRL18czniPPEym_xF=7z0PHaUX+DeKf8C7Zw@mail.gmail.com>

Hi,

I want to develop my own S57 Chart Displaying Application using MFC. Please
provide me technical help in this regards with some sample code.

-- 
Thanks & Regards,
Girish Deshpande
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120416/92408739/attachment.html
From chaitanya.ch at gmail.com  Mon Apr 16 05:55:44 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Apr 16 05:56:30 2012
Subject: [gdal-dev] S57 Viewer Application Using MFC
In-Reply-To: <CAJXNG3Kn8HqUGbBRL18czniPPEym_xF=7z0PHaUX+DeKf8C7Zw@mail.gmail.com>
References: <CAJXNG3Kn8HqUGbBRL18czniPPEym_xF=7z0PHaUX+DeKf8C7Zw@mail.gmail.com>
Message-ID: <CAMKgpOZj6ypg1tjd2qBE4VOzcPC+TByGEQZg2URjnrJ+mc89SA@mail.gmail.com>

Girish,

GDAL supports reading of IHO S-57 datasets.
You should start with the GDAL Data model[1], GDAL API tutorial[2] and the
S-57 driver page[3].

[1]:  http://www.gdal.org/gdal_datamodel.html
[2]:  http://www.gdal.org/gdal_tutorial.html
[3]:  http://www.gdal.org/ogr/drv_s57.html

On Mon, Apr 16, 2012 at 3:04 PM, Girish Deshpande <deshpande.gh@gmail.com>wrote:

> Hi,
>
> I want to develop my own S57 Chart Displaying Application using MFC.
> Please provide me technical help in this regards with some sample code.
>
> --
> Thanks & Regards,
> Girish Deshpande
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120416/12325586/attachment-0001.html
From anton.korosov at nersc.no  Mon Apr 16 06:12:47 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Mon Apr 16 06:13:29 2012
Subject: [gdal-dev] Magic number 441?
Message-ID: <4F8BF09F.5080507@nersc.no>

Dear list,

what does the annoying error 'ERROR 1: Too many points (441 out of 441) 
failed to transform' mean?

When I try to warp a MODIS image directly into tif it works perfect:

gdalwarp -t_srs '+proj=latlong' -of GTiff -geoloc -te -4 51 14 66 -ts 
900 1400 HDF4_SDS:UNKNOWN:"/data/A2012101111000.L2_LAC.NorthSea.hdf":15 
modis_geoloc.tif

But when I try to make the VRT file first it fails with this error:
Commands:

gdalwarp -t_srs '+proj=latlong' -of VRT -geoloc -te -4 51 14 66 -ts 900 
1400 HDF4_SDS:UNKNOWN:"/data/A2012101111000.L2_LAC.NorthSea.hdf":15 
modis_geoloc.vrt

gdal_translate modis_geoloc.vrt modis_geoloc.vrt.tif

Output:

Input file size is 900, 1400
0ERROR 1: Too many points (441 out of 441) failed to transform,
unable to compute output bounds.
ERROR 1: modis_geoloc.vrt, band 1: IReadBlock failed at X offset 0, Y 
offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0


What makes me crazy is that if the output file is smaller (say 500 x 
500) it works via the VRT also fine. WHY?!


The VRT file (w/o metadata) is below. The source file (4 MB) is here:
http://hab.nersc.no/NorthSea/A2012101111000.L2_LAC.NorthSea.hdf.bz2

Thank you very much for any hint.
Anton

<VRTDataset rasterXSize="900" rasterYSize="1400" 
subClass="VRTWarpedDataset">
   <SRS>GEOGCS["WGS 
84",DATUM["unknown",SPHEROID["WGS84",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]</SRS>
   <GeoTransform> -4.0000000000000000e+00,  2.0000000000000000e-02, 
0.0000000000000000e+00,  6.6000000000000000e+01, 
0.0000000000000000e+00, -1.0714285714285714e-02</GeoTransform>
   <Metadata>
     <MDI key="bad_value_scaled">-32767</MDI>
   </Metadata>
   <VRTRasterBand dataType="Int16" band="1" subClass="VRTWarpedRasterBand">
     <ColorInterp>Gray</ColorInterp>
   </VRTRasterBand>
   <BlockXSize>512</BlockXSize>
   <BlockYSize>128</BlockYSize>
   <GDALWarpOptions>
     <WarpMemoryLimit>6.71089e+07</WarpMemoryLimit>
     <ResampleAlg>NearestNeighbour</ResampleAlg>
     <WorkingDataType>Int16</WorkingDataType>
     <Option name="INIT_DEST">0</Option>
     <SourceDataset 
relativeToVRT="1">HDF4_SDS:UNKNOWN:/data/A2012101111000.L2_LAC.NorthSea.hdf:15</SourceDataset>
     <Transformer>
       <ApproxTransformer>
         <MaxError>0.125</MaxError>
         <BaseTransformer>
           <GenImgProjTransformer>
             <SrcGeoLocTransformer>
               <GeoLocTransformer>
                 <Reversed>0</Reversed>
                 <Metadata>
                   <MDI key="LINE_OFFSET">0</MDI>
                   <MDI key="LINE_STEP">1</MDI>
                   <MDI key="PIXEL_OFFSET">0</MDI>
                   <MDI key="PIXEL_STEP">1</MDI>
                   <MDI key="SRS">GEOGCS["WGS 
84",DATUM["WGS_1984",SPHEROID["WGS 
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]</MDI>
                   <MDI key="X_BAND">1</MDI>
                   <MDI 
key="X_DATASET">HDF4_SDS:UNKNOWN:"/data/A2012101111000.L2_LAC.NorthSea.hdf":11</MDI>
                   <MDI key="Y_BAND">1</MDI>
                   <MDI 
key="Y_DATASET">HDF4_SDS:UNKNOWN:"/data/A2012101111000.L2_LAC.NorthSea.hdf":12</MDI>
                 </Metadata>
               </GeoLocTransformer>
             </SrcGeoLocTransformer>
 
<DstGeoTransform>-4,0.02,0,66,0,-0.01071428571428571</DstGeoTransform>
 
<DstInvGeoTransform>200,49.99999999999999,0,6159.999999999999,0,-93.33333333333333</DstInvGeoTransform>
             <ReprojectTransformer>
               <ReprojectionTransformer>
                 <SourceSRS>GEOGCS["WGS 
84",DATUM["WGS_1984",SPHEROID["WGS 
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]</SourceSRS>
                 <TargetSRS>GEOGCS["WGS 
84",DATUM["unknown",SPHEROID["WGS84",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]</TargetSRS>
               </ReprojectionTransformer>
             </ReprojectTransformer>
           </GenImgProjTransformer>
         </BaseTransformer>
       </ApproxTransformer>
     </Transformer>
     <BandList>
       <BandMapping src="1" dst="1" />
     </BandList>
   </GDALWarpOptions>
</VRTDataset>

From even.rouault at mines-paris.org  Mon Apr 16 11:05:31 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Apr 16 11:06:27 2012
Subject: [gdal-dev] Multi image segments in NITF file
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0C7E04DB489@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0C7E04DB489@MAILBOXSERVER.rf.local>
Message-ID: <1334588731.4f8c353b83149@webmail.free.fr>

Selon Livneh Yehiyam <yehil@rafael.co.il>:

>
> Hi Even and list
> Regarding the creation of NITF image segments (see below):
> We've added this functionality as you suggested using the creation options.
> For our purpose it works great. We are now able to create an NITF file with
> multiple image segments (each with a different size, color format, etc.).
> We have made the changes against the 1.8.1 version (not trunk or 1.9) since
> this is what we currently use.
> Do you think it is something you will be interested in adding to GDAL? If so,
> what do you need? Will a patch against the 1.8.1 version is enough?

Hi Livneh,

A ticket against trunk would be preferable for easier integration, but a patch
against 1.8.1 is better than nothing, at least for the reviewing step. Please
create a ticket in Trac so it doesn't get lost.

Thanks,

Even
From yehil at rafael.co.il  Mon Apr 16 11:24:44 2012
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Mon Apr 16 11:24:58 2012
Subject: [gdal-dev] Multi image segments in NITF file
In-Reply-To: <1334588731.4f8c353b83149@webmail.free.fr>
References: <C5D1974ECA44D2429ECBC64B967C34C0C7E04DB489@MAILBOXSERVER.rf.local><1334588731.4f8c353b83149@webmail.free.fr>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0C7E04DB4A3@MAILBOXSERVER.rf.local>

Even
I will create a ticket and patch tomorrow.
Thanks

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org]
Sent: Monday, April 16, 2012 6:06 PM
To: Livneh Yehiyam
Cc: gdal-dev; Even Rouault; Livneh Yehiyam
Subject: Re: [gdal-dev] Multi image segments in NITF file

Selon Livneh Yehiyam <yehil@rafael.co.il><table align='center'><tr><td></td></tr></table>:

>
> Hi Even and list
> Regarding the creation of NITF image segments (see below):
> We've added this functionality as you suggested using the creation options.
> For our purpose it works great. We are now able to create an NITF file with
> multiple image segments (each with a different size, color format, etc.).
> We have made the changes against the 1.8.1 version (not trunk or 1.9) since
> this is what we currently use.
> Do you think it is something you will be interested in adding to GDAL? If so,
> what do you need? Will a patch against the 1.8.1 version is enough?

Hi Livneh,

A ticket against trunk would be preferable for easier integration, but a patch
against 1.8.1 is better than nothing, at least for the reviewing step. Please
create a ticket in Trac so it doesn't get lost.

Thanks,

Even
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************

From hilmekrhu at gmail.com  Mon Apr 16 17:42:48 2012
From: hilmekrhu at gmail.com (Petr Kitashov)
Date: Mon Apr 16 17:44:14 2012
Subject: [gdal-dev] Building GDAL from source for android under cygwin
Message-ID: <CAP9804KnaVwP4ESbaESADz1w2K=sC687fw1zdYoPzks_Oj7o8A@mail.gmail.com>

Hi everyone,

Some reason, I needed to build gdal for android on windows, so I'll be glad
if this helps someone - it's not very obvious.
I don't like the script, which edits libgdal.la file, but due to the lack
of experience with libtool I don't know, how to do it in a better way.

This procedure was developed on a Windows 7 system using Android NDK r7c
and is based on information from this manual:
http://trac.osgeo.org/gdal/wiki/BuildingForAndroid

We need:
 - Android NDK r7c (I think, all the versions from r5b will fit fine, but
didn't test it)
 - Cygwin 1.7 or higher
 - Gdal 1.9.0


1. NDK preparation
It's useful to have "PATH=$PATH:<path/to/android-ndk-r7c>" in your cygwin
.profile, but you can add it manually as the first step after ndk unzip:
$ export PATH=$PATH:/cygdrive/c/dev/Android/android-ndk-r7c

As in linux, we should create a standalone toolchain somewhere, i made it
from the "/cygdrive/c/dev/Android/" directory
$ android-ndk-r7c/build/tools/make-standalone-toolchain.sh
--platform=android-8 --install-dir=android-8-toolchain

Add toolchain bin directory to PATH:
$ export PATH=$PATH:/cygdrive/c/dev/Android/android-8-toolchain/bin

Since android g++ or gcc can't understand cygwin path like
/cygdrive/c/path/to, we need to correct them. Create a file and fill it
with:

#! /bin/sh

#Notice space at the end
RUN_COMMAND="/bin/sh "

if [[ "$1" == "" ]]
then exit
fi

for x in "$@"
do
    if [[ ${x: -7} == "libtool" ]]
        then
    RUN_COMMAND=$RUN_COMMAND' '$x

else
if [[ ${x: -11} == "/libgdal.la" ]]
    then
sed -i.bak 's/libgdal.so.1.16.0 libgdal.so.1 libgdal.so/libgdal.so libgdal.so.1
libgdal.so.1.16.0/' $x
fi
RUN_COMMAND=$RUN_COMMAND' '${x/\/cygdrive\/c\//C:\/}

    fi
done

$RUN_COMMAND

I placed this file in "/cygdrive/c/dev/Android/android-8-toolchain/bin" as
it's already in the PATH. Script will turn all the "/cygdrive/c/" into
"C:/" except libtool invoke command. The sed command will be explained a
bit later.


2. Gdal configure
Go to gdal 1.9.0 source directory. Ndk-build, in future, expect your ndk
gdal module to be in path/to/<tag>/, where <tag> is gdal for us, so we use
something like "/cygdrive/c/dev/lib/gdal-1.9.0/gdal" as the prefix for our
build:
$ CFLAGS="-mthumb" CXXFLAGS="-mthumb" ./configure
--host=arm-linux-androideabi --prefix=/cygdrive/c/dev/lib/gdal-1.9.0/gdal

Note, that we don't need to mention -lstdc++ or -lsupc++. Btw, the last one
is not placed in the toolchain since ndk-7 release (it's a known bug).

Now we need to edit GDALMake.opt:
After "SHELL    =   /bin/sh" line add this: "CORRECT = correct_path".
Two lines down, change "LIBTOOL = $(SHELL) $(top_builddir)/libtool"
to "LIBTOOL = $(CORRECT) $(top_builddir)/libtool"

Now simply make:
$ make

There is a problem with generated libtool.la file - it has line:
"library_names='libgdal.so.1.16.0 libgdal.so.1 libgdal.so'", so libgdal.so
will be passed to g++. It will fail, but the sed command in the script
changes this line to "library_names='libgdal.so libgdal.so.1
libgdal.so.1.16.0'" and it links fine.

Now, just install:
$ make install


3. Creaing Android application.

Now just set path to gdal module (path must contain 'gdal' folder - tag
name):

$ export NDK_MODULE_PATH=/cygdrive/c/dev/lib/gdal-1.9.0

In the gdal-tag module directory ($NDK_MODULE_PATH/gdal) create an
Android.mk file:

LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := gdal
LOCAL_SRC_FILES := lib/libgdal.a
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/include
LOCAL_EXPORT_LDLIBS := -lz
include $(PREBUILT_STATIC_LIBRARY)


Create some android app, let it be HelloGdal.
In the project's jni directory, create hello-jdal.cpp with the following
contents:

#include <jni.h>
#include <ogr_api.h>
#include <sstream>

extern "C" {
JNIEXPORT jstring
JNICALL Java_org_gdal_HelloGdal_stringFromGDAL(JNIEnv*env, jobject thiz);
}

JNIEXPORT jstring
JNICALL Java_org_gdal_HelloGdal_stringFromGDAL(JNIEnv* env, jobject thiz)
{
OGRRegisterAll();
std::ostringstream drivers;
drivers << "OGR Drivers:\n";
for (int i = 0; i < OGRGetDriverCount(); ++i)
drivers << "\t" << OGR_Dr_GetName(OGRGetDriver(i)) << "\n";

return env->NewStringUTF(drivers.str().c_str());
}


The corresponding Android.mk, which should be placed in the same folder:

LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := hello-gdal
LOCAL_SRC_FILES := hello-gdal.cpp
LOCAL_STATIC_LIBRARIES := gdal

include $(BUILD_SHARED_LIBRARY)
$(call import-module,gdal)


You should also create Application.mk with a single line inside:
APP_STL := gnustl_shared

Now, from the jni directory simply run ndk build:
$ ndk-build

Two libraries - libgnustl_shared.so and libhello-gdal.so will be created as
result.

Java code of the app:

package org.gdal;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class HelloGdal extends Activity
{
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        TextView tv = new TextView(this);
        tv.setText( stringFromGDAL() );
        setContentView(tv);
    }

    public native String stringFromGDAL();

    static { System.loadLibrary("hello-gdal"); }
}

-- 
Best Regards,
Petr Kitashov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120417/95d73c2c/attachment.html
From yehil at rafael.co.il  Tue Apr 17 03:39:21 2012
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Tue Apr 17 03:40:05 2012
Subject: [gdal-dev] Multi image segments in NITF file
In-Reply-To: <1334588731.4f8c353b83149@webmail.free.fr>
References: <C5D1974ECA44D2429ECBC64B967C34C0C7E04DB489@MAILBOXSERVER.rf.local><1334588731.4f8c353b83149@webmail.free.fr>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0C7E04DB5E2@MAILBOXSERVER.rf.local>

Even
I've created a ticket (#4619) for this enhancement, with the patch.
Thanks,
Yehiyam Livneh

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org]
Sent: Monday, April 16, 2012 6:06 PM
To: Livneh Yehiyam
Cc: gdal-dev; Even Rouault; Livneh Yehiyam
Subject: Re: [gdal-dev] Multi image segments in NITF file

Selon Livneh Yehiyam <yehil@rafael.co.il><table align='center'><tr><td></td></tr></table>:

>
> Hi Even and list
> Regarding the creation of NITF image segments (see below):
> We've added this functionality as you suggested using the creation options.
> For our purpose it works great. We are now able to create an NITF file with
> multiple image segments (each with a different size, color format, etc.).
> We have made the changes against the 1.8.1 version (not trunk or 1.9) since
> this is what we currently use.
> Do you think it is something you will be interested in adding to GDAL? If so,
> what do you need? Will a patch against the 1.8.1 version is enough?

Hi Livneh,

A ticket against trunk would be preferable for easier integration, but a patch
against 1.8.1 is better than nothing, at least for the reviewing step. Please
create a ticket in Trac so it doesn't get lost.

Thanks,

Even
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************

From stefano.iacovella at gmail.com  Tue Apr 17 05:00:08 2012
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Tue Apr 17 05:01:12 2012
Subject: [gdal-dev] Configure error with Oracle instantclient 11.2.0.3
Message-ID: <CAG9OqYqfEkfMEav91eSQPF9D01MiGTHiGmJejY8ueyrO54RnAw@mail.gmail.com>

Hello

I'm try to build gdal 1.9.0 on ubuntu server 11.10 32 bit.
I read the help at http://trac.osgeo.org/gdal/wiki/BuildingOnUnix and
also this thread on OTN forum:

https://forums.oracle.com/forums/thread.jspa?messageID=4570333

I downloaded the tree files for instantclient 11.2.0.3:

instantclient-basic-linux-11.2.0.3.0.zip
instantclient-sqlplus-linux-11.2.0.3.0.zip
instantclient-sdk-linux-11.2.0.3.0.zip

and unzip them in /home/stefano/oracle

then I made the soft links for libraries and added then
network/admin/tnsnames.ora file
I added at .bashrc:

ORACLE_HOME=/home/stefano/oracle/instantclient_11_2
PATH=/usr/local/pgsql/bin:$ORACLE_HOME:$PATH
LD_LIBRARY_PATH=/usr/local/pgsql/lib:$ORACLE_HOME:$LD_LIBRARY_PATH

and added also /etc/ld.so.conf/oracle.conf file containing:

/home/stefano/oracle/instantclient_11_2

My ORACLE_HOME folder looks like:

stefano@ubuntu1110vmsrv:~/oracle/instantclient_11_2$ ls -lh
total 171M
-rwxrwxr-x 1 stefano stefano  22K 2011-09-19 01:11 adrci
-rw-rw-r-- 1 stefano stefano  437 2011-09-19 01:11 BASIC_README
-rwxrwxr-x 1 stefano stefano  38K 2011-09-19 01:11 genezi
-r--r--r-- 1 stefano stefano  368 2011-09-19 01:12 glogin.sql
lrwxrwxrwx 1 stefano stefano   17 2012-04-16 18:06 libclntsh.so ->
libclntsh.so.11.1
-rwxrwxr-x 1 stefano stefano  42M 2011-09-19 01:11 libclntsh.so.11.1
-r-xr-xr-x 1 stefano stefano 6.8M 2011-09-19 01:11 libnnz11.so
lrwxrwxrwx 1 stefano stefano   15 2012-04-16 18:06 libocci.so -> libocci.so.11.1
-rwxrwxr-x 1 stefano stefano 1.8M 2011-09-19 01:11 libocci.so.11.1
-rwxrwxr-x 1 stefano stefano 113M 2011-09-19 01:11 libociei.so
-r-xr-xr-x 1 stefano stefano 149K 2011-09-19 01:11 libocijdbc11.so
-r-xr-xr-x 1 stefano stefano 1.5M 2011-09-19 01:12 libsqlplusic.so
-r-xr-xr-x 1 stefano stefano 1.2M 2011-09-19 01:12 libsqlplus.so
drwxrwxr-x 3 stefano stefano 4.0K 2012-04-17 09:21 network
-r--r--r-- 1 stefano stefano 2.0M 2011-09-19 01:11 ojdbc5.jar
-r--r--r-- 1 stefano stefano 2.6M 2011-09-19 01:11 ojdbc6.jar
drwxrwxr-x 4 stefano stefano 4.0K 2011-09-19 01:12 sdk
-r-xr-xr-x 1 stefano stefano 6.8K 2011-09-19 01:12 sqlplus
-rw-rw-r-- 1 stefano stefano  441 2011-09-19 01:12 SQLPLUS_README
-rwxrwxr-x 1 stefano stefano 157K 2011-09-19 01:11 uidrvci
-rw-rw-r-- 1 stefano stefano  66K 2011-09-19 01:11 xstreams.jar



I tried sqlplus successfully

stefano@ubuntu1110vmsrv:~$ sqlplus engis@ENGIS

SQL*Plus: Release 11.2.0.3.0 Production on Tue Apr 17 10:47:30 2012

Copyright (c) 1982, 2011, Oracle.  All rights reserved.

Enter password:

Connected to:
Oracle Database 10g Enterprise Edition Release 10.2.0.3.0 - 64bit Production
With the Partitioning, Real Application Clusters, OLAP and Data Mining
Scoring Engine options

SQL>


Then I ran the configure script:

stefano@ubuntu1110vmsrv:~/sources/gdal-1.9.0$ ./configure
--with-oci-include=/home/stefano/oracle/instantclient_11_2/sdk/include
--with-oci-lib=/home/stefano/oracle/instantclient_11_2

and here I get a library not found error

checking for Oracle OCI headers in
/home/stefano/oracle/instantclient_11_2/sdk/include... yes
checking for Oracle OCI libraries in
/home/stefano/oracle/instantclient_11_2... library not found
checking if Oracle support is enabled... no

Looking at the config.log I found this:

configure:22404: checking for Oracle OCI libraries in
/home/stefano/oracle/instantclient_11_2
configure:22430: g++ -o conftest -g -O2
-I/home/stefano/oracle/instantclient_11_2/sdk/include
-L/home/stefano/oracle/instantclient_11_2 -lclntsh conftest.cpp
-L/usr/local/pgsql/lib -lpq -lz -lpthread -lm -lrt -ldl  >&5
/tmp/ccijFcU1.o: In function `main':
/home/stefano/sources/gdal-1.9.0/conftest.cpp:71: undefined reference
to `OCIEnvCreate'
/home/stefano/sources/gdal-1.9.0/conftest.cpp:72: undefined reference
to `OCIHandleFree'
collect2: ld returned 1 exit status
configure:22430: $? = 1
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE_URL ""
| #define STDC_HEADERS 1
| #define HAVE_SYS_TYPES_H 1
| #define HAVE_SYS_STAT_H 1
| #define HAVE_STDLIB_H 1
| #define HAVE_STRING_H 1
| #define HAVE_MEMORY_H 1
| #define HAVE_STRINGS_H 1
| #define HAVE_INTTYPES_H 1
| #define HAVE_STDINT_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_DLFCN_H 1
| #define LT_OBJDIR ".libs/"
| #define HAVE_LIBDL 1
| #define HAVE_LIBRT 1
| #define HAVE_LIBM 1
| #define STDC_HEADERS 1
| #define HAVE_ASSERT_H 1
| #define HAVE_FCNTL_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_DLFCN_H 1
| #define HAVE_STDINT_H 1
| #define HAVE_LIMITS_H 1
| #define HAVE_LOCALE_H 1
| #define HAVE_VALUES_H 1
| #define HAVE_FLOAT_H 1
| #define HAVE_ERRNO_H 1
| #define HAVE_LONG_LONG 1
| #define UNIX_STDIO_64 1
| #define VSI_LARGE_API_SUPPORTED 1
| #define VSI_FTELL64 ftello64
| #define VSI_FSEEK64 fseeko64
| #define VSI_STAT64 stat64
| #define VSI_STAT64_T stat64
| #define VSI_FOPEN64 fopen64
| #define VSI_FTRUNCATE64 ftruncate64
| #define SIZEOF_INT 4
| #define SIZEOF_UNSIGNED_LONG 4
| #define SIZEOF_VOIDP 4
| #define HAVE_IEEEFP 1
| #define HOST_FILLORDER FILLORDER_LSB2MSB
| #define HAVE_VPRINTF 1
| #define HAVE_SNPRINTF 1
| #define HAVE_VSNPRINTF 1
| #define HAVE_ATOLL 1
| #define HAVE_STRTOF 1
| #define HAVE_GETCWD 1
| #define HAVE_DECL_STRTOF 1
| #define HAVE_READLINK 1
| #define HAVE_GCC_ATOMIC_BUILTINS 1
| #define HAVE_PTHREAD_MUTEX_RECURSIVE 1
| #define CPL_MULTIPROC_PTHREAD 1
| #define HAVE_ICONV 1
| #define ICONV_CONST
| #define ICONV_CPP_CONST
| #define HAVE_LIBPQ 1
| /* end confdefs.h.  */
|
|                 #include <oci.h>
| int
| main ()
| {
|
| OCIEnv* envh = 0;
| OCIEnvCreate(&envh, OCI_DEFAULT, 0, 0, 0, 0, 0, 0);
| if (envh) OCIHandleFree(envh, OCI_HTYPE_ENV);
|
|
|   ;
|   return 0;
| }
configure:22440: result: library not found
configure:22527: checking if Oracle support is enabled
configure:22541: result: no

Do you have any hint about the problem?

Thanks in advance for your help

Stefano
---------------------------------------------------
41.95581N 12.52854E


http://www.linkedin.com/in/stefanoiacovella

http://twitter.com/#!/Iacovellas
From woklist at kyngchaos.com  Tue Apr 17 13:47:30 2012
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Apr 17 13:47:45 2012
Subject: [gdal-dev] FID in a vrt
Message-ID: <A3C0F02B-03F3-42D0-92EB-F3E3490C4051@kyngchaos.com>

I'm having trouble getting the FID option to work in a vrt.  The help is not clear on how to do this.  I've tried

<FID>feature_id</FID>

and

<FID name="feature_id" />

but ogrinfo will not show the FID column info.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"We are at war with them. Neither in hatred nor revenge and with no particular pleasure I shall kill every ___ I can until the war is over. That is my duty."

"Don't you even hate 'em?"

"What good would it do if I did? If all the many millions of people of the allied nations devoted an entire year exclusively to hating the ____ it wouldn't kill one ___ nor shorten the war one day."

<Ha, ha> "And it might give 'em all stomach ulcers."

- Tarzan, on war

From warmerdam at pobox.com  Tue Apr 17 13:49:48 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 17 13:50:11 2012
Subject: [gdal-dev] Summer of Code
In-Reply-To: <4F8BCF42.1010207@mail.ru>
References: <4F8B5AD6.6040104@pobox.com>
	<CAMKgpOYRrHx8H9f85x2u3iQe_sUvt4A=uOVpDt-SicgqVwsfRw@mail.gmail.com>
	<4F8BCF42.1010207@mail.ru>
Message-ID: <CA+YzLBdZvg84MXXxcQPCJBc5gLuL7ym6mZ9mQ2nmKLOR7e-+Nw@mail.gmail.com>

Dmitry,

I'll let Anne Ghisla know that you would like to mentor too.  There should be
some information on:

  http://wiki.osgeo.org/wiki/Google_Summer_of_Code_2012_Administrative

Best regards,
Frank

On Mon, Apr 16, 2012 at 12:50 AM, Dmitry Baryshnikov <polimax@mail.ru> wrote:
> 16.04.2012 10:56, Chaitanya kumar CH ???????:
>
> Frank,
>
> I have used this kind of tool in GIMP to stitch partial scans of a large
> paper map.
> IMHO, this tool is more appropriate in a desktop gis tool with gui instead
> of gdal. But having it in GDAL could be useful to more users.
>
> I can be a mentor if there is a shortage.
>
> On Mon, Apr 16, 2012 at 5:03 AM, Frank Warmerdam <warmerdam@pobox.com>
> wrote:
>>
>> Folks,
>>
>> There is one proposed OSGeo/Google SoC project proposed related to GDAL:
>>
>> Correlator in GDAL
>>
>>
>>
>> http://www.google-melange.com/gsoc/proposal/review/google/gsoc2012/king_of_defeat/1
>>
>> Part of the procedure is that the project (ie. GDAL) is supposed to return
>> a ranked list of projects they support to Anne (our admin) by Tuesday.
>>
>> This isn't quite time for a formal motion so I'm suggesting this is a call
>> for objections and/or volunteers to mentor.
>>
>> I'm interested in mentoring this project but the normal practice is to
>> have
>> two co-mentors to ensure availability for the student.
>>
>> So does anyone object to the above project proceeding?
>>
>> Does anyone want to co-mentor?
>>
>> Best regards,
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up ? | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://home.gdal.org/warmerda
>> and watch the world go round - Rush ? ?| Geospatial Software Developer
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> Hi,
>
> As this is the student which I mentioned in IRC, I would like to be the
> co-mentor. What I have to do to become the co-mentor?
>
> Best regards,
> ???? Dmitry
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From giuseppe.amatulli at gmail.com  Tue Apr 17 15:48:02 2012
From: giuseppe.amatulli at gmail.com (Giuseppe Amatulli)
Date: Tue Apr 17 15:48:12 2012
Subject: [gdal-dev] gdal python script to calculate categories statistic
Message-ID: <CAKoiDHKB63pwDix7QfXBM3n15Tfv80hE0AULfd+A-A3u-p9uWw@mail.gmail.com>

Hi,
I'm new in python and i would like to start in the hard way by modify
an already existing script.

In particular, I'm searching for a python script that is computing
statistic of a raster base on another existing category raster.
Something similar to r.statistics in grass.
The out put has to be a raster with the statistical value of each
categorise and also the summarized text file.

Probably the most easy one is to modify is the gdal_calc.py but i'm
open to other suggestions.
Thanks in advance

-- 
Giuseppe Amatulli
Web: www.spatial-ecology.net
From refriguy68 at yahoo.com  Tue Apr 17 15:51:15 2012
From: refriguy68 at yahoo.com (Robert Zermeno)
Date: Tue Apr 17 15:53:52 2012
Subject: [gdal-dev] Kakadu linking errors for MSVC 2010
Message-ID: <1334692275.18696.YahooMailClassic@web161005.mail.bf1.yahoo.com>

GDAL folks,
?
I am upgrading my program from VS 2005 to VS 2010 and attempted to build GDAL with Kakadu support using 4-15-2012 trunk version (FYI, GDAL can compile cleanly without adding Kakadu support).? I get the following build errors:

args.obj : error LNK2038: mismatch detected for ' __ITERATOR_DEBUG_LEVEL' : value '2' doesn't match value '0' in cplkeywordparser.obj
palette.obj : error LNK2038: mismatch detected for ' __ITERATOR_DEBUG_LEVEL' : value '2' doesn't match value '0' in cplkeywordparser.obj
roi_sources.obj : error LNK2038: mismatch detected for ' __ITERATOR_DEBUG_LEVEL' : value '2' doesn't match value '0' in cplkeywordparser.obj
?
I looked online and all suggest I might be mixing built libraries (want Debug and supplied some in release mode).? So, I recompiled Kakadu in debug mode to make sure and still get these errors.
Has anyone seen them?? I am puzzled because I have no problems using MSVC 2005 edition GDAL with Kakadu.
?
John
?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120417/952b0177/attachment.html
From ari.jolma at gmail.com  Tue Apr 17 17:42:51 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue Apr 17 17:43:34 2012
Subject: [gdal-dev] Layer operations, a proposal
Message-ID: <4F8DE3DB.80607@gmail.com>

Folks,

I propose a set of new methods for OGR layers (see the PDF). I took the 
basic ideas from page 
http://courses.washington.edu/gis250/lessons/Model_Builder/ which seems 
rather comprehensive. I wrote the pseudo code myself quickly (thus it 
may not be optimal and may contain bugs - improvement suggestions are of 
course welcome).

I was considering to write these in Perl (on top of the Perl bindings) 
but probably they could also be in OGR core. Code-wise they would 
probably go into ogrlayer.cpp.

If there is support/interest, I assume I should submit this as a RFC 
(with a patch)?

Best regards,

Ari

-------------- next part --------------
A non-text attachment was scrubbed...
Name: layer operations.pdf
Type: application/pdf
Size: 24372 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120418/3af8de8a/layeroperations-0001.pdf
From Jennings.Jay at geoeye.com  Tue Apr 17 18:11:30 2012
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Tue Apr 17 18:13:03 2012
Subject: [gdal-dev] gdal_translate crash on certain filenames
Message-ID: <ADE7627990BC2E4AB2112FF812FB5C8E16778DD6@EEXCHMB01THN.geoeye.com>

Hi List,
We have encountered something really strange in our GDAL build (1.9.0, built from source on Windows 7 64-bit).   It appears that "gdal_translate" crashes (i.e. Windows popup dialog that says "gdal_translate has stopped working...") when the output filename starts with certain strings.  It seems that the input file can be a random GeoTiff with a random name and path - the killer seems to be the *output* filename.

--- These commands result in the crash:
gdal_translate  -of  GTiff  -co  tiled=yes  F:\PreIngest\junk2.tif  C:\Temp\TSX1_SAR.tif
gdal_translate  -of  GTiff  -co  tiled=yes  F:\PreIngest\junk2.tif  C:\Temp\TDX1_SAR.tif

Whereas that same command finishes without a problem, if the output filename is changed to "TAX1_SAR.tif" or "TDX2_SAR.tif" or "TDX1_SA.tif"

Our experiments indicate the command will fail anytime the output filename starts with the strings "TDX1_SAR" or "TSX1_SAR".  Can anyone out there duplicate this ?  In general, GDAL has been quite reliable for us - this is probably the strangest thing we've seen.
.........................................................
Jay Jennings
Senior Software Developer
GeoEye, Inc.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120417/75ca0e58/attachment.html
From Michael.Smith at usace.army.mil  Tue Apr 17 18:17:27 2012
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Tue Apr 17 18:17:31 2012
Subject: [gdal-dev] gdal_translate crash on certain filenames
In-Reply-To: <ADE7627990BC2E4AB2112FF812FB5C8E16778DD6@EEXCHMB01THN.geoeye.com>
Message-ID: <CBB36410.254AC%michael.smith@usace.army.mil>

Looks like its a specific driver getting in the way

http://trac.osgeo.org/gdal/ticket/4390

M

From: Jay Jennings <Jennings.Jay@geoeye.com<mailto:Jennings.Jay@geoeye.com>>
Date: Tuesday, April 17, 2012 6:11 PM
To: "gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>" <gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>>
Subject: [gdal-dev] gdal_translate crash on certain filenames

Hi List,
We have encountered something really strange in our GDAL build (1.9.0, built from source on Windows 7 64-bit).   It appears that ?gdal_translate? crashes (i.e. Windows popup dialog that says ?gdal_translate has stopped working??) when the output filename starts with certain strings.  It seems that the input file can be a random GeoTiff with a random name and path ? the killer seems to be the *output* filename.

--- These commands result in the crash:
gdal_translate  -of  GTiff  -co  tiled=yes  F:\PreIngest\junk2.tif  C:\Temp\TSX1_SAR.tif
gdal_translate  -of  GTiff  -co  tiled=yes  F:\PreIngest\junk2.tif  C:\Temp\TDX1_SAR.tif

Whereas that same command finishes without a problem, if the output filename is changed to ?TAX1_SAR.tif? or ?TDX2_SAR.tif? or ?TDX1_SA.tif?

Our experiments indicate the command will fail anytime the output filename starts with the strings ?TDX1_SAR? or ?TSX1_SAR?.  Can anyone out there duplicate this ?  In general, GDAL has been quite reliable for us ? this is probably the strangest thing we?ve seen.
.........................................................
Jay Jennings
Senior Software Developer
GeoEye, Inc.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120417/7a5b5f05/attachment.html
From even.rouault at mines-paris.org  Tue Apr 17 18:37:01 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 17 18:35:47 2012
Subject: [gdal-dev] gdal_translate crash on certain filenames
In-Reply-To: <CBB36410.254AC%michael.smith@usace.army.mil>
References: <CBB36410.254AC%michael.smith@usace.army.mil>
Message-ID: <201204180037.01462.even.rouault@mines-paris.org>

Le mercredi 18 avril 2012 00:17:27, Smith, Michael ERDC-CRREL-NH a ?crit :
> Looks like its a specific driver getting in the way
> 
> http://trac.osgeo.org/gdal/ticket/4390

Good catch Michael, actually the crash dates back to a previous commit. Now 
fixed per http://trac.osgeo.org/gdal/ticket/4622
From warmerdam at pobox.com  Tue Apr 17 19:32:08 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Apr 17 19:32:12 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <4F8DE3DB.80607@gmail.com>
References: <4F8DE3DB.80607@gmail.com>
Message-ID: <CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>

Ari,

I think this would be an interesting addition.   Would you be willing
to write up an RFC?

I think the layer creation step should be a different call than the
feature processing step to maximize the chance that folks who need to
do something very format specific at layer creation can do so and
still use the generic algorithm for processing the features.

Your operations appear to be focused on spatial relationships, but
I've also heard a lot of interest in feature joins on attribute
fields.  One case is just merging features from a layer with a common
attribute value.  Another case would be some sort of attribute based
join between layers.  Hopefully we can use a reasonably similar
approach for a variety of operations.

I'm curious how you plan to handle the spatial relationships
efficiently?  An in memory spatial index?  I'd like have the API
overly constrain how we implement this as I can imagine the internal
operation implementation evolving over time, and perhaps taking
different strategies for different styles of input data.  For instance
an in-memory spatial index might not make much sense for large numbers
of very simple point features while it would be good for heavy polygon
features.


Best regards,
Frank

On Tue, Apr 17, 2012 at 2:42 PM, Ari Jolma <ari.jolma@gmail.com> wrote:
> Folks,
>
> I propose a set of new methods for OGR layers (see the PDF). I took the
> basic ideas from page
> http://courses.washington.edu/gis250/lessons/Model_Builder/ which seems
> rather comprehensive. I wrote the pseudo code myself quickly (thus it may
> not be optimal and may contain bugs - improvement suggestions are of course
> welcome).
>
> I was considering to write these in Perl (on top of the Perl bindings) but
> probably they could also be in OGR core. Code-wise they would probably go
> into ogrlayer.cpp.
>
> If there is support/interest, I assume I should submit this as a RFC (with a
> patch)?
>
> Best regards,
>
> Ari
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From jason.roberts at duke.edu  Tue Apr 17 20:07:18 2012
From: jason.roberts at duke.edu (Jason Roberts)
Date: Tue Apr 17 20:11:00 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
Message-ID: <011c01cd1cf7$38ac53d0$aa04fb70$@roberts@duke.edu>

As I have mentioned previously
(http://lists.osgeo.org/pipermail/gdal-dev/2010-January/023089.html) I think
something like this would be a great addition to OGR. No doubt it would be a
huge job--basically turning OGR into a GIS--but if it could be done well,
with sufficient performance and in the core API, then many systems could
potentially leverage it, instead of everybody implementing their own
versions of Ari's pseudocode.

Best,
Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Tuesday, April 17, 2012 7:32 PM
To: Ari Jolma
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Layer operations, a proposal

Ari,

I think this would be an interesting addition.   Would you be willing
to write up an RFC?

I think the layer creation step should be a different call than the feature
processing step to maximize the chance that folks who need to do something
very format specific at layer creation can do so and still use the generic
algorithm for processing the features.

Your operations appear to be focused on spatial relationships, but I've also
heard a lot of interest in feature joins on attribute fields.  One case is
just merging features from a layer with a common attribute value.  Another
case would be some sort of attribute based join between layers.  Hopefully
we can use a reasonably similar approach for a variety of operations.

I'm curious how you plan to handle the spatial relationships efficiently?
An in memory spatial index?  I'd like have the API overly constrain how we
implement this as I can imagine the internal operation implementation
evolving over time, and perhaps taking different strategies for different
styles of input data.  For instance an in-memory spatial index might not
make much sense for large numbers of very simple point features while it
would be good for heavy polygon features.


Best regards,
Frank

On Tue, Apr 17, 2012 at 2:42 PM, Ari Jolma <ari.jolma@gmail.com> wrote:
> Folks,
>
> I propose a set of new methods for OGR layers (see the PDF). I took 
> the basic ideas from page 
> http://courses.washington.edu/gis250/lessons/Model_Builder/ which 
> seems rather comprehensive. I wrote the pseudo code myself quickly 
> (thus it may not be optimal and may contain bugs - improvement 
> suggestions are of course welcome).
>
> I was considering to write these in Perl (on top of the Perl bindings) 
> but probably they could also be in OGR core. Code-wise they would 
> probably go into ogrlayer.cpp.
>
> If there is support/interest, I assume I should submit this as a RFC 
> (with a patch)?
>
> Best regards,
>
> Ari
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up?? | Frank Warmerdam,
warmerdam@pobox.com light and sound - activate the windows |
http://pobox.com/~warmerdam and watch the world go round - Rush? ? |
Geospatial Software Developer
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ngarel at micromine.com  Tue Apr 17 22:24:12 2012
From: ngarel at micromine.com (Nicolas Garel)
Date: Tue Apr 17 22:27:24 2012
Subject: [gdal-dev] MSSQL Spatial and 3D issue
Message-ID: <125F609FE1635548AF411AFA01558DFA3EEF637F22@per-srv-em1>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: mm_corp_emailsig_perth.gif
Type: image/gif
Size: 17375 bytes
Desc: mm_corp_emailsig_perth.gif
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120418/52b214bc/mm_corp_emailsig_perth-0001.gif
From cgodkin at gmail.com  Tue Apr 17 23:09:11 2012
From: cgodkin at gmail.com (Carl Godkin)
Date: Tue Apr 17 23:09:22 2012
Subject: [gdal-dev] Kakadu linking errors for MSVC 2010
In-Reply-To: <1334692275.18696.YahooMailClassic@web161005.mail.bf1.yahoo.com>
References: <1334692275.18696.YahooMailClassic@web161005.mail.bf1.yahoo.com>
Message-ID: <CAE=8kmnUMDOjuXHgLkoJrcFn2PQ=CKuSkwzat1WHL31tsq1gcg@mail.gmail.com>

On Tue, Apr 17, 2012 at 12:51 PM, Robert Zermeno <refriguy68@yahoo.com>wrote:

> GDAL folks,
>
> I am upgrading my program from VS 2005 to VS 2010 and attempted to build
> GDAL with Kakadu support using 4-15-2012 trunk version (FYI, GDAL can
> compile cleanly without adding Kakadu support).  I get the following build
> errors:
>
> args.obj : error LNK2038: mismatch detected for ' __ITERATOR_DEBUG_LEVEL'
> : value '2' doesn't match value '0' in cplkeywordparser.obj
> palette.obj : error LNK2038: mismatch detected for '
> __ITERATOR_DEBUG_LEVEL' : value '2' doesn't match value '0' in
> cplkeywordparser.obj
> roi_sources.obj : error LNK2038: mismatch detected for '
> __ITERATOR_DEBUG_LEVEL' : value '2' doesn't match value '0' in
> cplkeywordparser.obj
>
> I looked online and all suggest I might be mixing built libraries (want
> Debug and supplied some in release mode).  So, I recompiled Kakadu in debug
> mode to make sure and still get these errors.
> Has anyone seen them?  I am puzzled because I have no problems using MSVC
> 2005 edition GDAL with Kakadu.
>
>
>
I have not built GDAL with Kakadu, but what you're seeing definitely
represents a mismatch
in release vs debug compilation levels for VS 2010.  It looks to me like
cplkeywordparser.obj
was built for release (0) but palette.obj and args.obj were built for debug
(2).

I'm pretty sure that this iterator debug business is built-in C++ checks on
STL iterators and
is generally very useful.  Good luck,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120417/a40a110e/attachment.html
From adam.brown at arcitecta.com  Wed Apr 18 01:04:27 2012
From: adam.brown at arcitecta.com (Adam Brown)
Date: Wed Apr 18 01:11:41 2012
Subject: [gdal-dev] Very large time difference using gdal_translate from
	Jpeg2000 to different formats using JP2KAK driver
In-Reply-To: <4F8A5336.4070701@pobox.com>
References: <1334278403286-4874129.post@n6.nabble.com>
	<4F8A5336.4070701@pobox.com>
Message-ID: <4F8E4B5B.3000005@arcitecta.com>

On 15/04/12 2:48 PM, Frank Warmerdam wrote:
> On 12-04-12 05:53 PM, ahbrown wrote:
>> Hi,
>>
>> I am wondering why there is such a large difference in the time to 
>> convert a
>> large O(250MB) Jpeg2000 image to GeoTiff format in comparison with
>> conversion to other formats (e.g. jpeg, png)?
>>
>> I am using the Kakadu Jpeg2000 driver. With a 43221 x 36021 Jpeg2000 
>> image.
>>
>> Results of timed conversions are as follows:
>>
>>
>>
>> Using RasterIO directly (via the Java wrapper) the conversion takes 
>> around 6
>> seconds.
>
> Adam,
>
> Many drivers implement the CreateCopy() rather than Create() method. 
> In these
> cases the input dataset is passed to the output driver and they pull 
> data in
> whatever way is convenient.
>
> The PNG and JPEG drivers are "CreateCopy" drivers and likely request data
> one scanline at a time.  In this situation the JP2KAK driver actually 
> gets
> asked for the data in moderate sized tiles which turns out not to be very
> efficient for the Kakadu library as there is a high setup cost for each
> windowed read.
>
> The GeoTIFF format support Create(), so gdal_translate is able to more
> closely manage the chunking of reads and writes and tries to do it in
> large chunks.  The JP2KAK driver handles large reads through IRasterIO()
> as single windowed reads which are more efficient than the smaller tile
> reads.
>
> So I think the bulk of the difference in performance is related to 
> different
> IO strategies that apply against the JP2KAK driver.  The variation 
> between
> JPEG and PNG times is likely different costs on the compression side.
>
> PS. it appears posts through nabble do not preserve some components, like
> the fixed font timings text.  I encourage direct use of the mailing list
> for posts.
>
> Best regards,
Hi Frank and Chaitanya,

Thanks for the quick response.

What doesn't make sense to me is that I can perform the same JP2->PNG translation benchmarked below in a little over 6 seconds using the GDAL Java wrappers.
Most of this is spent in the read/subsample operation. The write to the 200x200 png takes only 20 ms.

So gdal_translate is adding 8-12s of overhead somewhere.

I've posted the timings again below as they were stripped out from the original post:

time gdal_translate -of GTiff -outsize 200 200 master_original.jp2 master_original.tif
real	0m2.325s

time gdal_translate -of JPEG -outsize 200 200 master_original.jp2 master_original.jpg
real	0m18.317s

time gdal_translate -of PNG -outsize 200 200 master_original.jp2 master_original.png
user	0m14.588s

GDAL Java wrapper (same JP2 to 200x200 PNG): approx 6s

Regards,


Adam



From warmerdam at pobox.com  Wed Apr 18 01:31:24 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 18 01:32:00 2012
Subject: [gdal-dev] Very large time difference using gdal_translate from
	Jpeg2000 to different formats using JP2KAK driver
In-Reply-To: <4F8E4B5B.3000005@arcitecta.com>
References: <1334278403286-4874129.post@n6.nabble.com>
	<4F8A5336.4070701@pobox.com> <4F8E4B5B.3000005@arcitecta.com>
Message-ID: <CA+YzLBd+c7X7EACUKQmLEQcF-PHT-U1=6x9K-puFjHK=zRR5DQ@mail.gmail.com>

On Tue, Apr 17, 2012 at 10:04 PM, Adam Brown <adam.brown@arcitecta.com> wrote:
> On 15/04/12 2:48 PM, Frank Warmerdam wrote:
>>
>> On 12-04-12 05:53 PM, ahbrown wrote:
>>>
>>> Hi,
>>>
>>> I am wondering why there is such a large difference in the time to
>>> convert a
>>> large O(250MB) Jpeg2000 image to GeoTiff format in comparison with
>>> conversion to other formats (e.g. jpeg, png)?
>>>
>>> I am using the Kakadu Jpeg2000 driver. With a 43221 x 36021 Jpeg2000
>>> image.
>>>
>>> Results of timed conversions are as follows:
>>>
>>>
>>>
>>> Using RasterIO directly (via the Java wrapper) the conversion takes
>>> around 6
>>> seconds.
>>
>>
>> Adam,
>>
>> Many drivers implement the CreateCopy() rather than Create() method. In
>> these
>> cases the input dataset is passed to the output driver and they pull data
>> in
>> whatever way is convenient.
>>
>> The PNG and JPEG drivers are "CreateCopy" drivers and likely request data
>> one scanline at a time. ?In this situation the JP2KAK driver actually gets
>> asked for the data in moderate sized tiles which turns out not to be very
>> efficient for the Kakadu library as there is a high setup cost for each
>> windowed read.
>>
>> The GeoTIFF format support Create(), so gdal_translate is able to more
>> closely manage the chunking of reads and writes and tries to do it in
>> large chunks. ?The JP2KAK driver handles large reads through IRasterIO()
>> as single windowed reads which are more efficient than the smaller tile
>> reads.
>>
>> So I think the bulk of the difference in performance is related to
>> different
>> IO strategies that apply against the JP2KAK driver. ?The variation between
>> JPEG and PNG times is likely different costs on the compression side.
>>
>> PS. it appears posts through nabble do not preserve some components, like
>> the fixed font timings text. ?I encourage direct use of the mailing list
>> for posts.
>>
>> Best regards,
>
> Hi Frank and Chaitanya,
>
> Thanks for the quick response.
>
> What doesn't make sense to me is that I can perform the same JP2->PNG
> translation benchmarked below in a little over 6 seconds using the GDAL Java
> wrappers.
> Most of this is spent in the read/subsample operation. The write to the
> 200x200 png takes only 20 ms.
>
> So gdal_translate is adding 8-12s of overhead somewhere.
>
> I've posted the timings again below as they were stripped out from the
> original post:
>
> time gdal_translate -of GTiff -outsize 200 200 master_original.jp2
> master_original.tif
> real ? ?0m2.325s
>
> time gdal_translate -of JPEG -outsize 200 200 master_original.jp2
> master_original.jpg
> real ? ?0m18.317s
>
> time gdal_translate -of PNG -outsize 200 200 master_original.jp2
> master_original.png
> user ? ?0m14.588s
>
> GDAL Java wrapper (same JP2 to 200x200 PNG): approx 6s

Adam,

Completely different mechanisms are being used.  I imagine in your
Java case you are doing a 200x200 read from the source file and
writing that to PNG, right?  gdal_translate is creating a VRT wrapper
for the downsampling and letting the PNG driver pull from it scanline
by scanline.

Anyways you haven't been specific about what you are doing, but the
devil is in the details.

Best regards,
Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From anton.korosov at nersc.no  Wed Apr 18 02:37:14 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Wed Apr 18 02:38:03 2012
Subject: [gdal-dev] gdal python script to calculate categories statistic
In-Reply-To: <CAKoiDHKB63pwDix7QfXBM3n15Tfv80hE0AULfd+A-A3u-p9uWw@mail.gmail.com>
References: <CAKoiDHKB63pwDix7QfXBM3n15Tfv80hE0AULfd+A-A3u-p9uWw@mail.gmail.com>
Message-ID: <4F8E611A.8030207@nersc.no>

Hi Giuseppe,

gdal_calc is built on operations with matrices using the Python module 
'numpy' http://numpy.scipy.org/

Instead of digging into it I would suggest to study numpy functionality 
a bit. The following simple script somewhat solves your problem:

import numpy as np

"""
you may data from GDAL dataset using e.g.:
ds = gdal.Open('filename_with_values_and_categories.tif')
valuesRaster = ds.GetRasterBand(1).b.ReadAsArray()
categoryRaster = ds.GetRasterBand(2).b.ReadAsArray()
but below I just suggest arrays with random values
"""
# array with FLOAT random values normally distributed
valuesRaster = np.random.randn(100, 300)
# array with INT random number uniformly distributed within [0, 9]
categoryRaster = np.uint8(np.random.random(valuesRaster.shape) * 10)
# list of all possible categories values
categories = np.unique(categoryRaster)
# loop over all categories
for category in categories:
     # take subsample from array with values based on array with categories
     subSample = valuesRaster[categoryRaster == category]
     # calculate statistics
     sumVal = np.sum(subSample)
     countVal = len(subSample)
     meanVal = np.mean(subSample)
     stdVal = np.std(subSample)
     # print to screen
     print 'Stats for category %d : %f %d %f %f' % (category, sumVal, 
countVal, meanVal, stdVal)


Anton

On 04/17/2012 09:48 PM, Giuseppe Amatulli wrote:
> Hi,
> I'm new in python and i would like to start in the hard way by modify
> an already existing script.
>
> In particular, I'm searching for a python script that is computing
> statistic of a raster base on another existing category raster.
> Something similar to r.statistics in grass.
> The out put has to be a raster with the statistical value of each
> categorise and also the summarized text file.
>
> Probably the most easy one is to modify is the gdal_calc.py but i'm
> open to other suggestions.
> Thanks in advance
>
From ari.jolma at gmail.com  Wed Apr 18 02:41:18 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Apr 18 02:41:34 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
Message-ID: <4F8E620E.1030709@gmail.com>

On 04/18/2012 02:32 AM, Frank Warmerdam wrote:
> Ari,
>
> I think this would be an interesting addition.   Would you be willing
> to write up an RFC?

Yes, but I probably want to include a working patch.

>
> I think the layer creation step should be a different call than the
> feature processing step to maximize the chance that folks who need to
> do something very format specific at layer creation can do so and
> still use the generic algorithm for processing the features.

Yes, I think it's best to bring in an empty layer. The attributes need 
some thought too. For example maybe it should be considered an error to 
union two layers with attributes that have the same name but different type.

>
> Your operations appear to be focused on spatial relationships, but
> I've also heard a lot of interest in feature joins on attribute
> fields.  One case is just merging features from a layer with a common
> attribute value.  Another case would be some sort of attribute based
> join between layers.  Hopefully we can use a reasonably similar
> approach for a variety of operations.

Hm.

C = A.Plus(B)

C would contain all features from A and B but obeying the current 
spatial and attribute filters in both layers. The filters could be in 
effect also in the spatial operations. C would have both the fields in A 
and in B.

It does not make much sense to compare the attributes of A and B because 
the join is not spatial in the first place.

>
> I'm curious how you plan to handle the spatial relationships
> efficiently?  An in memory spatial index?  I'd like have the API
> overly constrain how we implement this as I can imagine the internal
> operation implementation evolving over time, and perhaps taking
> different strategies for different styles of input data.  For instance
> an in-memory spatial index might not make much sense for large numbers
> of very simple point features while it would be good for heavy polygon
> features.

I didn't give much thought to it yet and I hope it could be kept 
internal (and why not?). My use case is interactive use where the layers 
do not have so many features or at least one of them has only few. All 
inner loops have the intersects constraint and for that we could compute 
the extent only once.

Regards,

Ari

>
>
> Best regards,
> Frank
>
> On Tue, Apr 17, 2012 at 2:42 PM, Ari Jolma<ari.jolma@gmail.com>  wrote:
>> Folks,
>>
>> I propose a set of new methods for OGR layers (see the PDF). I took the
>> basic ideas from page
>> http://courses.washington.edu/gis250/lessons/Model_Builder/ which seems
>> rather comprehensive. I wrote the pseudo code myself quickly (thus it may
>> not be optimal and may contain bugs - improvement suggestions are of course
>> welcome).
>>
>> I was considering to write these in Perl (on top of the Perl bindings) but
>> probably they could also be in OGR core. Code-wise they would probably go
>> into ogrlayer.cpp.
>>
>> If there is support/interest, I assume I should submit this as a RFC (with a
>> patch)?
>>
>> Best regards,
>>
>> Ari
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From ngarel at micromine.com  Wed Apr 18 03:04:03 2012
From: ngarel at micromine.com (ngarel)
Date: Wed Apr 18 03:04:46 2012
Subject: [gdal-dev] MSSQL Spatial and 3D issue
In-Reply-To: <125F609FE1635548AF411AFA01558DFA3EEF637F22@per-srv-em1>
References: <125F609FE1635548AF411AFA01558DFA3EEF637F22@per-srv-em1>
Message-ID: <1334732643179-4893132.post@n6.nabble.com>

It looks like the format needs to be changed in
OGRMSSQLSpatialTableLayer::BuildFields()

something like 

if (poDS->GetGeometryFormat() == MSSQLGEOMETRY_NATIVE)
{
    osFieldList += "].*AsTextZM*() as [";
    osFieldList += pszGeomColumn;
}

However the format should be handled properly after the data is being
received.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-MSSQL-Spatial-and-3D-issue-tp4892552p4893132.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Wed Apr 18 04:41:39 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Apr 18 04:42:39 2012
Subject: [gdal-dev] MSSQL Spatial and 3D issue
In-Reply-To: <125F609FE1635548AF411AFA01558DFA3EEF637F22@per-srv-em1>
References: <125F609FE1635548AF411AFA01558DFA3EEF637F22@per-srv-em1>
Message-ID: <CACALY+STi42iFO2cRQi3JVUGU3vHFtuNH59vkP+taegj9yLvcw@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 17375 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120418/91ad85de/attachment-0001.gif
From anton.korosov at nersc.no  Wed Apr 18 09:18:10 2012
From: anton.korosov at nersc.no (Anton Korosov)
Date: Wed Apr 18 09:18:33 2012
Subject: [gdal-dev] Magic number 441?
In-Reply-To: <4F8BF09F.5080507@nersc.no>
References: <4F8BF09F.5080507@nersc.no>
Message-ID: <4F8EBF12.2020402@nersc.no>

Dear list, thank you for not replying - it made me happier when I 
discovered the error myself ;)

If gdalwarp is used with '-geoloc' and '-off VRT' and SRC image covers 
only part of the DST image and block size is small enough to allow one 
of the blocks to be completely outside the SRC image then gdaltranslate 
of the generated VRT file fails. That's obviously an error and I will 
create a ticket with examples and debugging output.

So the solution for the problem is to set the BlockSize to the image size.

With best regards!
Anton

On 04/16/2012 12:12 PM, Anton Korosov wrote:
> Dear list,
>
> what does the annoying error 'ERROR 1: Too many points (441 out of 441)
> failed to transform' mean?
>
> When I try to warp a MODIS image directly into tif it works perfect:
>
> gdalwarp -t_srs '+proj=latlong' -of GTiff -geoloc -te -4 51 14 66 -ts
> 900 1400 HDF4_SDS:UNKNOWN:"/data/A2012101111000.L2_LAC.NorthSea.hdf":15
> modis_geoloc.tif
>
> But when I try to make the VRT file first it fails with this error:
> Commands:
>
> gdalwarp -t_srs '+proj=latlong' -of VRT -geoloc -te -4 51 14 66 -ts 900
> 1400 HDF4_SDS:UNKNOWN:"/data/A2012101111000.L2_LAC.NorthSea.hdf":15
> modis_geoloc.vrt
>
> gdal_translate modis_geoloc.vrt modis_geoloc.vrt.tif
>
> Output:
>
> Input file size is 900, 1400
> 0ERROR 1: Too many points (441 out of 441) failed to transform,
> unable to compute output bounds.
> ERROR 1: modis_geoloc.vrt, band 1: IReadBlock failed at X offset 0, Y
> offset 0
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
>
>
> What makes me crazy is that if the output file is smaller (say 500 x
> 500) it works via the VRT also fine. WHY?!
>
>
> The VRT file (w/o metadata) is below. The source file (4 MB) is here:
> http://hab.nersc.no/NorthSea/A2012101111000.L2_LAC.NorthSea.hdf.bz2
>
> Thank you very much for any hint.
> Anton
>
> <VRTDataset rasterXSize="900" rasterYSize="1400"
> subClass="VRTWarpedDataset">
> <SRS>GEOGCS["WGS
> 84",DATUM["unknown",SPHEROID["WGS84",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]</SRS>
>
> <GeoTransform> -4.0000000000000000e+00, 2.0000000000000000e-02,
> 0.0000000000000000e+00, 6.6000000000000000e+01, 0.0000000000000000e+00,
> -1.0714285714285714e-02</GeoTransform>
> <Metadata>
> <MDI key="bad_value_scaled">-32767</MDI>
> </Metadata>
> <VRTRasterBand dataType="Int16" band="1" subClass="VRTWarpedRasterBand">
> <ColorInterp>Gray</ColorInterp>
> </VRTRasterBand>
> <BlockXSize>512</BlockXSize>
> <BlockYSize>128</BlockYSize>
> <GDALWarpOptions>
> <WarpMemoryLimit>6.71089e+07</WarpMemoryLimit>
> <ResampleAlg>NearestNeighbour</ResampleAlg>
> <WorkingDataType>Int16</WorkingDataType>
> <Option name="INIT_DEST">0</Option>
> <SourceDataset
> relativeToVRT="1">HDF4_SDS:UNKNOWN:/data/A2012101111000.L2_LAC.NorthSea.hdf:15</SourceDataset>
>
> <Transformer>
> <ApproxTransformer>
> <MaxError>0.125</MaxError>
> <BaseTransformer>
> <GenImgProjTransformer>
> <SrcGeoLocTransformer>
> <GeoLocTransformer>
> <Reversed>0</Reversed>
> <Metadata>
> <MDI key="LINE_OFFSET">0</MDI>
> <MDI key="LINE_STEP">1</MDI>
> <MDI key="PIXEL_OFFSET">0</MDI>
> <MDI key="PIXEL_STEP">1</MDI>
> <MDI key="SRS">GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]</MDI>
>
> <MDI key="X_BAND">1</MDI>
> <MDI
> key="X_DATASET">HDF4_SDS:UNKNOWN:"/data/A2012101111000.L2_LAC.NorthSea.hdf":11</MDI>
>
> <MDI key="Y_BAND">1</MDI>
> <MDI
> key="Y_DATASET">HDF4_SDS:UNKNOWN:"/data/A2012101111000.L2_LAC.NorthSea.hdf":12</MDI>
>
> </Metadata>
> </GeoLocTransformer>
> </SrcGeoLocTransformer>
>
> <DstGeoTransform>-4,0.02,0,66,0,-0.01071428571428571</DstGeoTransform>
>
> <DstInvGeoTransform>200,49.99999999999999,0,6159.999999999999,0,-93.33333333333333</DstInvGeoTransform>
>
> <ReprojectTransformer>
> <ReprojectionTransformer>
> <SourceSRS>GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]</SourceSRS>
>
> <TargetSRS>GEOGCS["WGS
> 84",DATUM["unknown",SPHEROID["WGS84",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]</TargetSRS>
>
> </ReprojectionTransformer>
> </ReprojectTransformer>
> </GenImgProjTransformer>
> </BaseTransformer>
> </ApproxTransformer>
> </Transformer>
> <BandList>
> <BandMapping src="1" dst="1" />
> </BandList>
> </GDALWarpOptions>
> </VRTDataset>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From hobu.inc at gmail.com  Wed Apr 18 10:28:05 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Apr 18 10:29:02 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <4F8DE3DB.80607@gmail.com>
References: <4F8DE3DB.80607@gmail.com>
Message-ID: <D6B032C5-8D22-4005-82F6-31D42581D33C@gmail.com>


On Apr 17, 2012, at 4:42 PM, Ari Jolma wrote:

> Folks,
> 
> I propose a set of new methods for OGR layers (see the PDF). I took the basic ideas from page http://courses.washington.edu/gis250/lessons/Model_Builder/ which seems rather comprehensive. I wrote the pseudo code myself quickly (thus it may not be optimal and may contain bugs - improvement suggestions are of course welcome).
> 
> I was considering to write these in Perl (on top of the Perl bindings) but probably they could also be in OGR core. Code-wise they would probably go into ogrlayer.cpp.
> 
> If there is support/interest, I assume I should submit this as a RFC (with a patch)?
> 
> Best regards,

Ari,

I'm excited by the functionality, but skeptical about having this specific functionality in OGR's core.  I don't want to be discouraging, but this seems like giant scope creep for OGR.  It would seem as though there are tons of cases where things would degenerate quite quickly, especially with regard to doing these kinds of operations on data sources that variably support different access patterns. More bugs about pathological geometry overlay problems would become our responsibility. Also, this functionality already exists in GRASS almost verbatim, correct?

Is it reasonable for this to start out as a commandline utility (ogralgebra or something) and see if some of the sharp points can be smoothed over before rolling this into core? I suppose this goes counter to your desire of having it accessible for SWIG languages though.

In short, I can see how this is a great functionality boon for us, but I can also see that we might suffer for it a bit in terms of maintenance and headache associated with doing stuff that is not so much our forte.

Howard
From jmckenna at gatewaygeomatics.com  Wed Apr 18 10:56:05 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed Apr 18 11:03:35 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <D6B032C5-8D22-4005-82F6-31D42581D33C@gmail.com>
References: <4F8DE3DB.80607@gmail.com>
	<D6B032C5-8D22-4005-82F6-31D42581D33C@gmail.com>
Message-ID: <4F8ED605.7060300@gatewaygeomatics.com>

I guess my initial reaction to this is similar to Howard's: excellent,
but aren't these operations covered by GEOS, which is already part of
the GDAL-C stack?  I guess I may not understand the relationship between
GDAL and GEOS correctly.

-jeff




From ari.jolma at gmail.com  Wed Apr 18 11:09:15 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Apr 18 11:09:44 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <D6B032C5-8D22-4005-82F6-31D42581D33C@gmail.com>
References: <4F8DE3DB.80607@gmail.com>
	<D6B032C5-8D22-4005-82F6-31D42581D33C@gmail.com>
Message-ID: <4F8ED91B.9090608@gmail.com>

On 04/18/2012 05:28 PM, Howard Butler wrote:
> I'm excited by the functionality, but skeptical about having this specific functionality in OGR's core.  I don't want to be discouraging, but this seems like giant scope creep for OGR.

I agree that we disagree on the scope of GDAL ;) -- or at least think 
about it differently. My point of view to GDAL has always been more on 
the data abstraction (or common data model) side and I've seen the 
formats that drivers bring in a bonus basically. But of course it may be 
more valid to think about GDAL as a data access (and store) library - if 
I interpret your concern correctly.

GDAL's (GDAL+OGR) scope may indeed already be too broad (just think 
about how the algorithm side could be expanded).


>    It would seem as though there are tons of cases where things would degenerate quite quickly, especially with regard to doing these kinds of operations on data sources that variably support different access patterns. More bugs about pathological geometry overlay problems would become our responsibility. Also, this functionality already exists in GRASS almost verbatim, correct?

Basically I think these are pretty simple and generic algorithms and if 
it brings some issues to the surface with regard to data sources 
(drivers) then shouldn't that be a good thing (when thinking about the 
general quality of the code)? I'm pretty ignorant about the driver 
development but I'm a bit worried about the contract between drivers and 
the core - in my experience the capabilities and others are not always 
reported and implemented very methodologically. See for example this, 
which I stumbled upon just by working interactively: #4620

I'm looking at this from the point of view of interacting with data and 
especially enabling new tools. Maybe the best tool for this kind of 
analytical work would be PostGIS, and surely GRASS and QGIS and others 
have much of this too.


>
> Is it reasonable for this to start out as a commandline utility (ogralgebra or something) and see if some of the sharp points can be smoothed over before rolling this into core? I suppose this goes counter to your desire of having it accessible for SWIG languages though.

Yes, the basic (and sole) wish for me is to use it from Perl. In fact, I 
don't think that putting it into the core would be much better 
performance-wise, just availability-wise.

Putting this to the Perl bindings - although I don't assume it to be 
much code - is also kind of stretching the limits (there already is a 
few methods in there that do not exist in other bindings).

>
> In short, I can see how this is a great functionality boon for us, but I can also see that we might suffer for it a bit in terms of maintenance and headache associated with doing stuff that is not so much our forte.

Well, I think I'll make them anyway and publish the patch so that people 
can take a look and think. It would be a RFC anyway if and when it gets 
there.

Jeff, these are layer level methods and GEOS covers similar issues on 
geometry level, thus these are kind of one or two conceptual level 
higher and build on what GEOS delivers.

Best regards,

Ari

>
> Howard

From stefano.iacovella at gmail.com  Wed Apr 18 11:22:58 2012
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Wed Apr 18 11:23:52 2012
Subject: [gdal-dev] Fwd: Configure error with Oracle instantclient 11.2.0.3
In-Reply-To: <CAG9OqYqfEkfMEav91eSQPF9D01MiGTHiGmJejY8ueyrO54RnAw@mail.gmail.com>
References: <CAG9OqYqfEkfMEav91eSQPF9D01MiGTHiGmJejY8ueyrO54RnAw@mail.gmail.com>
Message-ID: <CAG9OqYrTuaOYq6jyq-O2uc7VcOzn_2igqo_J6J7A-OvjPDEJZg@mail.gmail.com>

As I can't understand what I'm doing wrong with the configuration of
instantclient I made I tried on an other linux box and It was
successfull.
As I made exactly the same step in both machines I'll guess the devils
should be in some release of gcc, make and other base build utils.

The box where I got the error is an ubuntu server 11.10 32 bit kernel
3.0.0-17 with gcc 4.6.1 and Gnu make 3.81

The other machine is a debian 6 32 bit kernel 2.6.32-5 with gcc 4.4.5
and Gnu make 3.81

Is there anything I can search in both config.log to explain the error?

thank you

Stefano



---------- Forwarded message ----------
From: Stefano Iacovella <stefano.iacovella@gmail.com>
Date: 2012/4/17
Subject: Configure error with Oracle instantclient 11.2.0.3
To: gdal-dev <gdal-dev@lists.osgeo.org>


Hello

I'm try to build gdal 1.9.0 on ubuntu server 11.10 32 bit.
I read the help at http://trac.osgeo.org/gdal/wiki/BuildingOnUnix and
also this thread on OTN forum:

https://forums.oracle.com/forums/thread.jspa?messageID=4570333

I downloaded the tree files for instantclient 11.2.0.3:

instantclient-basic-linux-11.2.0.3.0.zip
instantclient-sqlplus-linux-11.2.0.3.0.zip
instantclient-sdk-linux-11.2.0.3.0.zip

and unzip them in /home/stefano/oracle

then I made the soft links for libraries and added then
network/admin/tnsnames.ora file
I added at .bashrc:

ORACLE_HOME=/home/stefano/oracle/instantclient_11_2
PATH=/usr/local/pgsql/bin:$ORACLE_HOME:$PATH
LD_LIBRARY_PATH=/usr/local/pgsql/lib:$ORACLE_HOME:$LD_LIBRARY_PATH

and added also /etc/ld.so.conf/oracle.conf file containing:

/home/stefano/oracle/instantclient_11_2

My ORACLE_HOME folder looks like:

stefano@ubuntu1110vmsrv:~/oracle/instantclient_11_2$ ls -lh
total 171M
-rwxrwxr-x 1 stefano stefano ?22K 2011-09-19 01:11 adrci
-rw-rw-r-- 1 stefano stefano ?437 2011-09-19 01:11 BASIC_README
-rwxrwxr-x 1 stefano stefano ?38K 2011-09-19 01:11 genezi
-r--r--r-- 1 stefano stefano ?368 2011-09-19 01:12 glogin.sql
lrwxrwxrwx 1 stefano stefano ? 17 2012-04-16 18:06 libclntsh.so ->
libclntsh.so.11.1
-rwxrwxr-x 1 stefano stefano ?42M 2011-09-19 01:11 libclntsh.so.11.1
-r-xr-xr-x 1 stefano stefano 6.8M 2011-09-19 01:11 libnnz11.so
lrwxrwxrwx 1 stefano stefano ? 15 2012-04-16 18:06 libocci.so -> libocci.so.11.1
-rwxrwxr-x 1 stefano stefano 1.8M 2011-09-19 01:11 libocci.so.11.1
-rwxrwxr-x 1 stefano stefano 113M 2011-09-19 01:11 libociei.so
-r-xr-xr-x 1 stefano stefano 149K 2011-09-19 01:11 libocijdbc11.so
-r-xr-xr-x 1 stefano stefano 1.5M 2011-09-19 01:12 libsqlplusic.so
-r-xr-xr-x 1 stefano stefano 1.2M 2011-09-19 01:12 libsqlplus.so
drwxrwxr-x 3 stefano stefano 4.0K 2012-04-17 09:21 network
-r--r--r-- 1 stefano stefano 2.0M 2011-09-19 01:11 ojdbc5.jar
-r--r--r-- 1 stefano stefano 2.6M 2011-09-19 01:11 ojdbc6.jar
drwxrwxr-x 4 stefano stefano 4.0K 2011-09-19 01:12 sdk
-r-xr-xr-x 1 stefano stefano 6.8K 2011-09-19 01:12 sqlplus
-rw-rw-r-- 1 stefano stefano ?441 2011-09-19 01:12 SQLPLUS_README
-rwxrwxr-x 1 stefano stefano 157K 2011-09-19 01:11 uidrvci
-rw-rw-r-- 1 stefano stefano ?66K 2011-09-19 01:11 xstreams.jar



I tried sqlplus successfully

stefano@ubuntu1110vmsrv:~$ sqlplus engis@ENGIS

SQL*Plus: Release 11.2.0.3.0 Production on Tue Apr 17 10:47:30 2012

Copyright (c) 1982, 2011, Oracle. ?All rights reserved.

Enter password:

Connected to:
Oracle Database 10g Enterprise Edition Release 10.2.0.3.0 - 64bit Production
With the Partitioning, Real Application Clusters, OLAP and Data Mining
Scoring Engine options

SQL>


Then I ran the configure script:

stefano@ubuntu1110vmsrv:~/sources/gdal-1.9.0$ ./configure
--with-oci-include=/home/stefano/oracle/instantclient_11_2/sdk/include
--with-oci-lib=/home/stefano/oracle/instantclient_11_2

and here I get a library not found error

checking for Oracle OCI headers in
/home/stefano/oracle/instantclient_11_2/sdk/include... yes
checking for Oracle OCI libraries in
/home/stefano/oracle/instantclient_11_2... library not found
checking if Oracle support is enabled... no

Looking at the config.log I found this:

configure:22404: checking for Oracle OCI libraries in
/home/stefano/oracle/instantclient_11_2
configure:22430: g++ -o conftest -g -O2
-I/home/stefano/oracle/instantclient_11_2/sdk/include
-L/home/stefano/oracle/instantclient_11_2 -lclntsh conftest.cpp
-L/usr/local/pgsql/lib -lpq -lz -lpthread -lm -lrt -ldl ?>&5
/tmp/ccijFcU1.o: In function `main':
/home/stefano/sources/gdal-1.9.0/conftest.cpp:71: undefined reference
to `OCIEnvCreate'
/home/stefano/sources/gdal-1.9.0/conftest.cpp:72: undefined reference
to `OCIHandleFree'
collect2: ld returned 1 exit status
configure:22430: $? = 1
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE_URL ""
| #define STDC_HEADERS 1
| #define HAVE_SYS_TYPES_H 1
| #define HAVE_SYS_STAT_H 1
| #define HAVE_STDLIB_H 1
| #define HAVE_STRING_H 1
| #define HAVE_MEMORY_H 1
| #define HAVE_STRINGS_H 1
| #define HAVE_INTTYPES_H 1
| #define HAVE_STDINT_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_DLFCN_H 1
| #define LT_OBJDIR ".libs/"
| #define HAVE_LIBDL 1
| #define HAVE_LIBRT 1
| #define HAVE_LIBM 1
| #define STDC_HEADERS 1
| #define HAVE_ASSERT_H 1
| #define HAVE_FCNTL_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_DLFCN_H 1
| #define HAVE_STDINT_H 1
| #define HAVE_LIMITS_H 1
| #define HAVE_LOCALE_H 1
| #define HAVE_VALUES_H 1
| #define HAVE_FLOAT_H 1
| #define HAVE_ERRNO_H 1
| #define HAVE_LONG_LONG 1
| #define UNIX_STDIO_64 1
| #define VSI_LARGE_API_SUPPORTED 1
| #define VSI_FTELL64 ftello64
| #define VSI_FSEEK64 fseeko64
| #define VSI_STAT64 stat64
| #define VSI_STAT64_T stat64
| #define VSI_FOPEN64 fopen64
| #define VSI_FTRUNCATE64 ftruncate64
| #define SIZEOF_INT 4
| #define SIZEOF_UNSIGNED_LONG 4
| #define SIZEOF_VOIDP 4
| #define HAVE_IEEEFP 1
| #define HOST_FILLORDER FILLORDER_LSB2MSB
| #define HAVE_VPRINTF 1
| #define HAVE_SNPRINTF 1
| #define HAVE_VSNPRINTF 1
| #define HAVE_ATOLL 1
| #define HAVE_STRTOF 1
| #define HAVE_GETCWD 1
| #define HAVE_DECL_STRTOF 1
| #define HAVE_READLINK 1
| #define HAVE_GCC_ATOMIC_BUILTINS 1
| #define HAVE_PTHREAD_MUTEX_RECURSIVE 1
| #define CPL_MULTIPROC_PTHREAD 1
| #define HAVE_ICONV 1
| #define ICONV_CONST
| #define ICONV_CPP_CONST
| #define HAVE_LIBPQ 1
| /* end confdefs.h. ?*/
|
| ? ? ? ? ? ? ? ? #include <oci.h>
| int
| main ()
| {
|
| OCIEnv* envh = 0;
| OCIEnvCreate(&envh, OCI_DEFAULT, 0, 0, 0, 0, 0, 0);
| if (envh) OCIHandleFree(envh, OCI_HTYPE_ENV);
|
|
| ? ;
| ? return 0;
| }
configure:22440: result: library not found
configure:22527: checking if Oracle support is enabled
configure:22541: result: no

Do you have any hint about the problem?

Thanks in advance for your help

Stefano
---------------------------------------------------
41.95581N 12.52854E


http://www.linkedin.com/in/stefanoiacovella

http://twitter.com/#!/Iacovellas
From Tyler.Mitchell at actian.com  Wed Apr 18 11:48:27 2012
From: Tyler.Mitchell at actian.com (Tyler Mitchell)
Date: Wed Apr 18 11:54:59 2012
Subject: [gdal-dev] Layer operations, a proposal
References: <4F8DE3DB.80607@gmail.com><D6B032C5-8D22-4005-82F6-31D42581D33C@gmail.com>
	<4F8ED91B.9090608@gmail.com>
Message-ID: <ABB90CDC9A08FF49851AC42557795A1808A7CA4C@USINVMAILB01.ingres.prv>

Hi Ari,

For what it's worth, I'd sure love to see this functionality - essentially ArcInfo workstation like capabilities.  I don't have any opinion on whether it's core or not in GDAL, but when I started doing something similar with Python (a couple years ago) I found that GEOS didn't play nicely with GDAL so I gave up.  

It was probably my own fault (or the bindings?), but I mention it because even a set of Python scripts would be remarkably useful - and keeping them outside of GRASS or other apps lowers the bar for adoption.

My two cents,
Tyler 


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org on behalf of Ari Jolma
Sent: Wed 4/18/2012 8:09 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Layer operations, a proposal
 
On 04/18/2012 05:28 PM, Howard Butler wrote:
> I'm excited by the functionality, but skeptical about having this specific functionality in OGR's core.  I don't want to be discouraging, but this seems like giant scope creep for OGR.

I agree that we disagree on the scope of GDAL ;) -- or at least think 
about it differently. My point of view to GDAL has always been more on 
the data abstraction (or common data model) side and I've seen the 
formats that drivers bring in a bonus basically. But of course it may be 
more valid to think about GDAL as a data access (and store) library - if 
I interpret your concern correctly.

GDAL's (GDAL+OGR) scope may indeed already be too broad (just think 
about how the algorithm side could be expanded).


>    It would seem as though there are tons of cases where things would degenerate quite quickly, especially with regard to doing these kinds of operations on data sources that variably support different access patterns. More bugs about pathological geometry overlay problems would become our responsibility. Also, this functionality already exists in GRASS almost verbatim, correct?

Basically I think these are pretty simple and generic algorithms and if 
it brings some issues to the surface with regard to data sources 
(drivers) then shouldn't that be a good thing (when thinking about the 
general quality of the code)? I'm pretty ignorant about the driver 
development but I'm a bit worried about the contract between drivers and 
the core - in my experience the capabilities and others are not always 
reported and implemented very methodologically. See for example this, 
which I stumbled upon just by working interactively: #4620

I'm looking at this from the point of view of interacting with data and 
especially enabling new tools. Maybe the best tool for this kind of 
analytical work would be PostGIS, and surely GRASS and QGIS and others 
have much of this too.


>
> Is it reasonable for this to start out as a commandline utility (ogralgebra or something) and see if some of the sharp points can be smoothed over before rolling this into core? I suppose this goes counter to your desire of having it accessible for SWIG languages though.

Yes, the basic (and sole) wish for me is to use it from Perl. In fact, I 
don't think that putting it into the core would be much better 
performance-wise, just availability-wise.

Putting this to the Perl bindings - although I don't assume it to be 
much code - is also kind of stretching the limits (there already is a 
few methods in there that do not exist in other bindings).

>
> In short, I can see how this is a great functionality boon for us, but I can also see that we might suffer for it a bit in terms of maintenance and headache associated with doing stuff that is not so much our forte.

Well, I think I'll make them anyway and publish the patch so that people 
can take a look and think. It would be a RFC anyway if and when it gets 
there.

Jeff, these are layer level methods and GEOS covers similar issues on 
geometry level, thus these are kind of one or two conceptual level 
higher and build on what GEOS delivers.

Best regards,

Ari

>
> Howard

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120418/786f2f28/attachment-0001.html
From ari.jolma at gmail.com  Wed Apr 18 12:00:17 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Apr 18 12:01:08 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <ABB90CDC9A08FF49851AC42557795A1808A7CA4C@USINVMAILB01.ingres.prv>
References: <4F8DE3DB.80607@gmail.com><D6B032C5-8D22-4005-82F6-31D42581D33C@gmail.com>
	<4F8ED91B.9090608@gmail.com>
	<ABB90CDC9A08FF49851AC42557795A1808A7CA4C@USINVMAILB01.ingres.prv>
Message-ID: <4F8EE511.6080001@gmail.com>

On 04/18/2012 06:48 PM, Tyler Mitchell wrote:
>
> Hi Ari,
>
> For what it's worth, I'd sure love to see this functionality - 
> essentially ArcInfo workstation like capabilities.  I don't have any 
> opinion on whether it's core or not in GDAL, but when I started doing 
> something similar with Python (a couple years ago) I found that GEOS 
> didn't play nicely with GDAL so I gave up.
>

Tyler,

What exactly do you mean by that? Is that something that could be fixed? 
To me it seems that the only problems could be that not all GEOS is 
exposed to GDAL and maybe in huge problems the use of WKB between GDAL 
and GEOS might be a bottle neck - but these haven't been problems to me.

Regards,

Ari

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120418/fe4d1eab/attachment.html
From Tyler.Mitchell at actian.com  Wed Apr 18 12:01:38 2012
From: Tyler.Mitchell at actian.com (Tyler Mitchell)
Date: Wed Apr 18 12:04:15 2012
Subject: [gdal-dev] Layer operations, a proposal
References: <4F8DE3DB.80607@gmail.com><D6B032C5-8D22-4005-82F6-31D42581D33C@gmail.com><4F8ED91B.9090608@gmail.com><ABB90CDC9A08FF49851AC42557795A1808A7CA4C@USINVMAILB01.ingres.prv>
	<4F8EE511.6080001@gmail.com>
Message-ID: <ABB90CDC9A08FF49851AC42557795A1808A7CA4D@USINVMAILB01.ingres.prv>

> What exactly do you mean by that? Is that something that could be fixed? 
> To me it seems that the only problems could be that not all GEOS is 
> exposed to GDAL and maybe in huge problems the use of WKB between GDAL 
> and GEOS might be a bottle neck - but these haven't been problems to me.

Sorry, it was a while ago and I was only trying it out in my spare time, so 
I didn't dig into it any further.  My point is just that I'm interested in
following any scripts you've created too, esp. in Python! :)

Tyler


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org on behalf of Ari Jolma
Sent: Wed 4/18/2012 9:00 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Layer operations, a proposal
 
On 04/18/2012 06:48 PM, Tyler Mitchell wrote:
>
> Hi Ari,
>
> For what it's worth, I'd sure love to see this functionality - 
> essentially ArcInfo workstation like capabilities.  I don't have any 
> opinion on whether it's core or not in GDAL, but when I started doing 
> something similar with Python (a couple years ago) I found that GEOS 
> didn't play nicely with GDAL so I gave up.
>

Tyler,

What exactly do you mean by that? Is that something that could be fixed? 
To me it seems that the only problems could be that not all GEOS is 
exposed to GDAL and maybe in huge problems the use of WKB between GDAL 
and GEOS might be a bottle neck - but these haven't been problems to me.

Regards,

Ari


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120418/37adbf5e/attachment.html
From ari.jolma at gmail.com  Wed Apr 18 12:44:51 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Apr 18 12:45:23 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <4f8e05b8.0416650a.4309.14fcSMTPIN_ADDED@mx.google.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4f8e05b8.0416650a.4309.14fcSMTPIN_ADDED@mx.google.com>
Message-ID: <4F8EEF83.3040800@gmail.com>

On 04/18/2012 03:07 AM, Jason Roberts wrote:
> As I have mentioned previously
> (http://lists.osgeo.org/pipermail/gdal-dev/2010-January/023089.html)

Thanks for pointing this out.

>   I think
> something like this would be a great addition to OGR. No doubt it would be a
> huge job--basically turning OGR into a GIS--but if it could be done well,
> with sufficient performance and in the core API, then many systems could
> potentially leverage it, instead of everybody implementing their own
> versions of Ari's pseudocode.

I don't think it would be a huge job. Maybe I'm missing something but I 
see the basic implementation very simple and generic. Perhaps there is a 
performance problem somewhere (looping through 1 million features within 
a loop of 1 million features and using shapefiles) but for common cases 
it should be ok, especially if the layers fit into memory.

Once I get something done (currently testing the 2nd algorithm), it 
would be interesting to do some benchmarking with available datasets.

Best regards,

Ari

>
> Best,
> Jason
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
> Sent: Tuesday, April 17, 2012 7:32 PM
> To: Ari Jolma
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Layer operations, a proposal
>
> Ari,
>
> I think this would be an interesting addition.   Would you be willing
> to write up an RFC?
>
> I think the layer creation step should be a different call than the feature
> processing step to maximize the chance that folks who need to do something
> very format specific at layer creation can do so and still use the generic
> algorithm for processing the features.
>
> Your operations appear to be focused on spatial relationships, but I've also
> heard a lot of interest in feature joins on attribute fields.  One case is
> just merging features from a layer with a common attribute value.  Another
> case would be some sort of attribute based join between layers.  Hopefully
> we can use a reasonably similar approach for a variety of operations.
>
> I'm curious how you plan to handle the spatial relationships efficiently?
> An in memory spatial index?  I'd like have the API overly constrain how we
> implement this as I can imagine the internal operation implementation
> evolving over time, and perhaps taking different strategies for different
> styles of input data.  For instance an in-memory spatial index might not
> make much sense for large numbers of very simple point features while it
> would be good for heavy polygon features.
>
>
> Best regards,
> Frank
>
> On Tue, Apr 17, 2012 at 2:42 PM, Ari Jolma<ari.jolma@gmail.com>  wrote:
>> Folks,
>>
>> I propose a set of new methods for OGR layers (see the PDF). I took
>> the basic ideas from page
>> http://courses.washington.edu/gis250/lessons/Model_Builder/ which
>> seems rather comprehensive. I wrote the pseudo code myself quickly
>> (thus it may not be optimal and may contain bugs - improvement
>> suggestions are of course welcome).
>>
>> I was considering to write these in Perl (on top of the Perl bindings)
>> but probably they could also be in OGR core. Code-wise they would
>> probably go into ogrlayer.cpp.
>>
>> If there is support/interest, I assume I should submit this as a RFC
>> (with a patch)?
>>
>> Best regards,
>>
>> Ari
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From warmerdam at pobox.com  Wed Apr 18 14:36:42 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 18 14:36:47 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <D6B032C5-8D22-4005-82F6-31D42581D33C@gmail.com>
References: <4F8DE3DB.80607@gmail.com>
	<D6B032C5-8D22-4005-82F6-31D42581D33C@gmail.com>
Message-ID: <CA+YzLBcRa2PDw_ZuakSSbdcH7MvxONfzGQQo05SpV_LDXtRU8g@mail.gmail.com>

On Wed, Apr 18, 2012 at 7:28 AM, Howard Butler <hobu.inc@gmail.com> wrote:
> I'm excited by the functionality, but skeptical about having this specific functionality in OGR's core. ?I don't want to be discouraging, but this seems like giant scope creep for OGR.

Howard,

It is scope creep for OGR, though it is a kind of scope creep that
happened long ago for raster with warping, and various other
operations in the alg directory so I don't see a fundamental reason we
shouldn't do some of this for OGR as well.

>It would seem as though there are tons of cases where things would degenerate quite quickly, especially with regard to doing these kinds of operations on data sources that variably support different access patterns.  More bugs about pathological geometry overlay problems would become our responsibility. Also, this functionality already exists in GRASS almost verbatim, correct?

Well, the geometry specific issues should still be GEOSes problem and
OGR isn't an entirely unreasonable place to put stuff that might need
to understand different access patterns for different drivers
(hopefully driving by capabilities and such).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From jason.roberts at duke.edu  Wed Apr 18 16:06:00 2012
From: jason.roberts at duke.edu (Jason Roberts)
Date: Wed Apr 18 16:06:59 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <4F8EEF83.3040800@gmail.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4f8e05b8.0416650a.4309.14fcSMTPIN_ADDED@mx.google.com>
	<4F8EEF83.3040800@gmail.com>
Message-ID: <01ae01cd1d9e$ae82d320$0b887960$@roberts@duke.edu>

I agree that there are many scenarios small numbers of features, and for
these it is "fast enough" to do something like make a call to GEOS for all
pair-wise combinations of features. A layer or collection of scripts on top
of OGR would work fine here.

For scenarios involving large numbers of features, I suspect it is much
harder to do it fast and within available memory. It is probably necessary
to do a multi-pass approach, where the first step operates only on the
spatial indexes of the layers involved. It is probably too slow--or at least
very suboptimal--to even read all of the features into memory, much less
call GEOS on them; all of that would happen in a later pass, when a subset
of features was identified via the spatial index pass. I suspect all of this
must be implemented in the core OGR code, where it is possible to quickly
and selectively probe spatial indexes, unless OGR wants to expose an
abstraction allowing higher level code to do that. I could definitely
appreciate the view that either of these approaches is significant scope
creep.

In any case, I appreciate that OGR developers are considering this
functionality, even if it is ultimately only for the small case. I hope you
are able to develop something.

Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ari Jolma
Sent: Wednesday, April 18, 2012 12:45 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Layer operations, a proposal

On 04/18/2012 03:07 AM, Jason Roberts wrote:
> As I have mentioned previously
> (http://lists.osgeo.org/pipermail/gdal-dev/2010-January/023089.html)

Thanks for pointing this out.

>   I think
> something like this would be a great addition to OGR. No doubt it 
> would be a huge job--basically turning OGR into a GIS--but if it could 
> be done well, with sufficient performance and in the core API, then 
> many systems could potentially leverage it, instead of everybody 
> implementing their own versions of Ari's pseudocode.

I don't think it would be a huge job. Maybe I'm missing something but I see
the basic implementation very simple and generic. Perhaps there is a
performance problem somewhere (looping through 1 million features within a
loop of 1 million features and using shapefiles) but for common cases it
should be ok, especially if the layers fit into memory.

Once I get something done (currently testing the 2nd algorithm), it would be
interesting to do some benchmarking with available datasets.

Best regards,

Ari

>
> Best,
> Jason
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
> Sent: Tuesday, April 17, 2012 7:32 PM
> To: Ari Jolma
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Layer operations, a proposal
>
> Ari,
>
> I think this would be an interesting addition.   Would you be willing
> to write up an RFC?
>
> I think the layer creation step should be a different call than the 
> feature processing step to maximize the chance that folks who need to 
> do something very format specific at layer creation can do so and 
> still use the generic algorithm for processing the features.
>
> Your operations appear to be focused on spatial relationships, but 
> I've also heard a lot of interest in feature joins on attribute 
> fields.  One case is just merging features from a layer with a common 
> attribute value.  Another case would be some sort of attribute based 
> join between layers.  Hopefully we can use a reasonably similar approach
for a variety of operations.
>
> I'm curious how you plan to handle the spatial relationships efficiently?
> An in memory spatial index?  I'd like have the API overly constrain 
> how we implement this as I can imagine the internal operation 
> implementation evolving over time, and perhaps taking different 
> strategies for different styles of input data.  For instance an 
> in-memory spatial index might not make much sense for large numbers of 
> very simple point features while it would be good for heavy polygon
features.
>
>
> Best regards,
> Frank
>
> On Tue, Apr 17, 2012 at 2:42 PM, Ari Jolma<ari.jolma@gmail.com>  wrote:
>> Folks,
>>
>> I propose a set of new methods for OGR layers (see the PDF). I took 
>> the basic ideas from page 
>> http://courses.washington.edu/gis250/lessons/Model_Builder/ which 
>> seems rather comprehensive. I wrote the pseudo code myself quickly 
>> (thus it may not be optimal and may contain bugs - improvement 
>> suggestions are of course welcome).
>>
>> I was considering to write these in Perl (on top of the Perl 
>> bindings) but probably they could also be in OGR core. Code-wise they 
>> would probably go into ogrlayer.cpp.
>>
>> If there is support/interest, I assume I should submit this as a RFC 
>> (with a patch)?
>>
>> Best regards,
>>
>> Ari
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Tyler.Mitchell at actian.com  Wed Apr 18 20:26:46 2012
From: Tyler.Mitchell at actian.com (Tyler Mitchell)
Date: Wed Apr 18 20:31:33 2012
Subject: [gdal-dev] Layer operations, a proposal
References: <4F8DE3DB.80607@gmail.com><CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com><4f8e05b8.0416650a.4309.14fcSMTPIN_ADDED@mx.google.com><4F8EEF83.3040800@gmail.com>
	<01ae01cd1d9e$ae82d320$0b887960$@roberts@duke.edu>
Message-ID: <ABB90CDC9A08FF49851AC42557795A1808A7CA55@USINVMAILB01.ingres.prv>



Jason Roberts wrote:
...
> For scenarios involving large numbers of features, I suspect it is much
> harder to do it fast and within available memory. It is probably necessary
> to do a multi-pass approach, where the first step operates only on the
> spatial indexes of the layers involved. It is probably too slow--or at least
> very suboptimal--to even read all of the features into memory, much less
> call GEOS on them; all of that would happen in a later pass, when a subset
> of features was identified via the spatial index pass....

I was intrigued to read the earlier thread you pointed out Jason, and to see also
Jan's comment about spatial index handling.  I would really love to see a common
approach to adding spatial index files to my files (and even database connections
done via a VRT) - and then having OGR understand how to use those indexes.

That'd be pretty awesome in my opinion... not that I'm able to implement anything
myself, but thought I'd raise a cheer around the idea ;-)

Tyler

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120418/32a4e0bc/attachment-0001.html
From ngarel at micromine.com  Wed Apr 18 20:35:25 2012
From: ngarel at micromine.com (ngarel)
Date: Wed Apr 18 20:36:00 2012
Subject: [gdal-dev] Re: MSSQL Spatial and 3D issue
In-Reply-To: <CACALY+STi42iFO2cRQi3JVUGU3vHFtuNH59vkP+taegj9yLvcw@mail.gmail.com>
References: <125F609FE1635548AF411AFA01558DFA3EEF637F22@per-srv-em1>
	<CACALY+STi42iFO2cRQi3JVUGU3vHFtuNH59vkP+taegj9yLvcw@mail.gmail.com>
Message-ID: <1334795725040-4896281.post@n6.nabble.com>

Ticket created:
http://trac.osgeo.org/gdal/ticket/4626


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-MSSQL-Spatial-and-3D-issue-tp4892552p4896281.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From hi181904665 at msn.com  Wed Apr 18 21:57:45 2012
From: hi181904665 at msn.com (chenliang wang)
Date: Wed Apr 18 21:58:41 2012
Subject: [gdal-dev] available opensource geoprocessing code based on GDAL
Message-ID: <BLU0-SMTP51AC26E3D9B1D0F9D331A6F43D0@phx.gbl>

Hi,all:
I am going to write a platform to process some geospatial data based on
GDAL. But I noticed I need to write so many geoprocessing code by
myself. Is there any availabe GDAL geoprocessing codes that is similar
with ArcGIs geoprocessing tools? Thanks



Chen-Liang Wang
From hi181904665 at msn.com  Wed Apr 18 22:28:58 2012
From: hi181904665 at msn.com (chenliang wang)
Date: Wed Apr 18 22:29:37 2012
Subject: [gdal-dev] available opensource geoprocessing code based on GDAL
In-Reply-To: <CALGBukwzvwqEVVYc0+N6GiWz663W5ArF8-EtkjRnF9ztX0GnmA@mail.gmail.com>
References: <BLU0-SMTP51AC26E3D9B1D0F9D331A6F43D0@phx.gbl>
	<CALGBukwzvwqEVVYc0+N6GiWz663W5ArF8-EtkjRnF9ztX0GnmA@mail.gmail.com>
Message-ID: <BLU0-SMTP442CCEC72090FEEE666DE53F43D0@phx.gbl>

Thanks a lot . GeoTrellis is real powerful. What a pity that the 
platform I want to buid is just an desktop application without web 
services. I  want to find some geoprocessing scripts including map 
algebra , zonal computation, reclassifity , vector operation and so on . 
After all ,GeoTrellis is real cool!

? 2012-4-19 10:05, Josh Marcus ??:
>
> Hello there,
>
> What are you trying to do specifically?  I work on another open source 
> project, GeoTrellis, you might find useful.
>
> github.com/azavea/geotrellis <http://github.com/azavea/geotrellis>
>
> On Apr 18, 2012 9:57 PM, "chenliang wang" <hi181904665@msn.com 
> <mailto:hi181904665@msn.com>> wrote:
>
>     Hi,all:
>     I am going to write a platform to process some geospatial data
>     based on
>     GDAL. But I noticed I need to write so many geoprocessing code by
>     myself. Is there any availabe GDAL geoprocessing codes that is similar
>     with ArcGIs geoprocessing tools? Thanks
>
>
>
>     Chen-Liang Wang
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120419/a07df764/attachment.html
From ari.jolma at gmail.com  Thu Apr 19 03:03:14 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Apr 19 03:03:22 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <4f8f1eb7.4387e50a.159b.053aSMTPIN_ADDED@mx.google.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4f8e05b8.0416650a.4309.14fcSMTPIN_ADDED@mx.google.com>
	<4F8EEF83.3040800@gmail.com>
	<4f8f1eb7.4387e50a.159b.053aSMTPIN_ADDED@mx.google.com>
Message-ID: <4F8FB8B2.3000309@gmail.com>

On 04/18/2012 11:06 PM, Jason Roberts wrote:
> For scenarios involving large numbers of features, I suspect it is much
> harder to do it fast and within available memory. It is probably necessary
> to do a multi-pass approach, where the first step operates only on the
> spatial indexes of the layers involved. It is probably too slow--or at least
> very suboptimal--to even read all of the features into memory, much less
> call GEOS on them; all of that would happen in a later pass, when a subset
> of features was identified via the spatial index pass. I suspect all of this
> must be implemented in the core OGR code, where it is possible to quickly
> and selectively probe spatial indexes, unless OGR wants to expose an
> abstraction allowing higher level code to do that. I could definitely
> appreciate the view that either of these approaches is significant scope
> creep.

I agree that having a spatial index in OGR would be useful in many 
cases. Regarding the methods I propose the index would help of course, 
but IMO the index is not their responsibility. The algorithms usually 
simply do this (with variations - and I don't see much possibilities for 
speed ups) for a method C = A->method(B):

iterate trough all features x of A // the spatial filter of A may be in 
effect
     set (or include) x.geom into the spatial filter of B
     iterate trough all features y of B // the spatial filter of B is in 
effect

Thus the key issue is to have the index help the iteration. A 
possibility would be to have a pair of layer methods:

InstallSpatialIndex() // iterate through all features and build the 
index into memory
UninstallSpatialIndex() // remove the index

There are free R-tree implementations which could be used (for example 
http://www.superliminal.com/sources/sources.htm#C%20&%20C++%20Code) and 
if available those methods would then use that. They could also be 
simple no-ops if R-tree or something else is not available. The 
GetNextFeature method would then use the spatial index if available.

Hm. The validity of the index is of course an issue - all changes to 
features and their geometries either need to be recorded into it or 
invalidate it. I would probably assume that the index is valid only the 
minimal time - basically leave it up to the user to recreate it.

After I get working examples of the layer methods I propose, I may look 
into that.

Cheers,

Ari

From even.rouault at mines-paris.org  Thu Apr 19 04:02:59 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr 19 04:03:59 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <ABB90CDC9A08FF49851AC42557795A1808A7CA55@USINVMAILB01.ingres.prv>
References: <4F8DE3DB.80607@gmail.com><CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com><4f8e05b8.0416650a.4309.14fcSMTPIN_ADDED@mx.google.com><4F8EEF83.3040800@gmail.com>
	<01ae01cd1d9e$ae82d320$0b887960$@roberts@duke.edu>
	<ABB90CDC9A08FF49851AC42557795A1808A7CA55@USINVMAILB01.ingres.prv>
Message-ID: <1334822579.4f8fc6b3b4c4e@imp.free.fr>

Selon Tyler Mitchell <Tyler.Mitchell@actian.com>:

>
>
> Jason Roberts wrote:
> ...
> > For scenarios involving large numbers of features, I suspect it is much
> > harder to do it fast and within available memory. It is probably necessary
> > to do a multi-pass approach, where the first step operates only on the
> > spatial indexes of the layers involved. It is probably too slow--or at
> least
> > very suboptimal--to even read all of the features into memory, much less
> > call GEOS on them; all of that would happen in a later pass, when a subset
> > of features was identified via the spatial index pass....
>
> I was intrigued to read the earlier thread you pointed out Jason, and to see
> also
> Jan's comment about spatial index handling.  I would really love to see a
> common
> approach to adding spatial index files to my files (and even database
> connections
> done via a VRT) -

FYI : if the VRT just wraps the underlying datasource, the underlying spatial
index should already currently be used when setting a spatial filter. You could
verify than easily with a VRT with an anderlying shapefile with a .qix, or a
postgis DB with a spatial index.

> and then having OGR understand how to use those indexes.
>
> That'd be pretty awesome in my opinion... not that I'm able to implement
> anything
> myself, but thought I'd raise a cheer around the idea ;-)

As far as a general spatial indexing for any OGR datasource, I don't know how it
would be possible because a spatial index only makes sense if you can have
random access to the features. And a lot of OGR formats currently don't support
(efficient) random access, due to the nature of the storage (any text based
format for example). Or it would require significant work in drivers so they are
able to partially parse the file given a file offset (would be difficult for XML
parsers).

So if you want a spatial index to be efficient, the easiest whay would be to
store the features themselves in RAM (which doesn't scale), or transform into a
format/storage that natively support random feature access.

>
> Tyler
>
>

From blaa_katt at yahoo.co.jp  Thu Apr 19 04:15:24 2012
From: blaa_katt at yahoo.co.jp (blaa_katt@yahoo.co.jp)
Date: Thu Apr 19 04:16:14 2012
Subject: [gdal-dev] How to change variable names in netCDF?
Message-ID: <303334.15608.qm@web4314.mail.ogk.yahoo.co.jp>

Hello everybody,

I have a question about netCDF creation.
I am using GDAL 1.9.0 in python.

Creation Issues in http://www.gdal.org/frmt_netcdf.html mentions
?each variable array is names Band1, Band2,? ?.

I would like to change the names.
Can anyone give me ideas?

Thank you for your time.

Kind regards,

Asuka
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120419/fe9a0d95/attachment.html
From ari.jolma at gmail.com  Thu Apr 19 05:04:37 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Apr 19 05:05:20 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
Message-ID: <4F8FD525.3030903@gmail.com>

On 04/18/2012 02:32 AM, Frank Warmerdam wrote:
> Ari,
>
> I think this would be an interesting addition.   Would you be willing
> to write up an RFC?

http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra

In there I call for discussion on the method names. They are now:

Intersection, Union, Identity, Update, Clip, Erase

all require three layers (self (or A), B and C). A is the "input layer", 
B is the "method layer" and C is the result layer. C should be empty 
from features and have no fields in input. I think A and B should not 
have conflicting field names but that is not crucial.

The names are from 
http://courses.washington.edu/gis250/lessons/Model_Builder/ (thus the 
names ArcInfo uses), except Intersect, which is Intersection in my 
patch. There are also illustrations how the methods should work on the page.

In addition Append (not spatial, just add all features from B according 
to current filters) and Buffer (buffer all geometries) could be included 
(not in the patch).

I have not checked the patch for memory leaks. I have tested the patch 
with Perl bindings in a graphical environment but not extensively.

Best regards,

Ari

From etourigny.dev at gmail.com  Thu Apr 19 07:51:29 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Apr 19 07:52:06 2012
Subject: [gdal-dev] How to change variable names in netCDF?
In-Reply-To: <303334.15608.qm@web4314.mail.ogk.yahoo.co.jp>
References: <303334.15608.qm@web4314.mail.ogk.yahoo.co.jp>
Message-ID: <CA+TxYvODoL+mhVpyFeOKLkTp5NL_p4OmZ2-=na8Syou-jAYzEA@mail.gmail.com>

If you use gdal-1.9 the driver will use the variable name from the
original netcdf file (if any).

for example, if you use the following command the original filename
will be preserved.
gdal_translate -of netcdf in.nc out.nc

However, if copying from other formats (such as gtiff), or creating a
new netcdf file, there is no way to change the variable name with
gdal.

You can use other tools such as:
NCO -> nco.sourceforge.net/
cdo ->https://code.zmaw.de/projects/cdo

Etienne

On Thu, Apr 19, 2012 at 5:15 AM,  <blaa_katt@yahoo.co.jp> wrote:
> Hello everybody,
>
> I have a question about netCDF creation.
> I am using GDAL 1.9.0 in python.
>
> Creation Issues in http://www.gdal.org/frmt_netcdf.html mentions
> ?each variable array is names Band1, Band2,? ?.
>
> I would like to change the names.
> Can anyone give me ideas?
>
> Thank you for your time.
>
> Kind regards,
>
> Asuka
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Thu Apr 19 08:04:42 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr 19 08:05:21 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <4F8FD525.3030903@gmail.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com>
Message-ID: <1334837082.4f8fff5a07c35@imp.free.fr>

> http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra
>

Ari,

I have reviewed your proposal and it looks interesting. Here are my observations
:

1) Argument order. A.Operation(B, C) where C is the target layer doesn't seem
very intuitive, but I'm not sure I have something fundamentally better to
propose. An alternate solution would be to make the operations static methods,
and have OGRLayer::Operation(output_layer, input_layer, method_layer) ? I'd
suggest at least to rename B as method_layer and C as result_layer to be more
explicit on the role of each argument.

2) It would perhaps be prudent to add a char** papszOptions argument as a
provision for future needs.

3) I'm wondering if it would not be more appropriate to separate the creation of
fields of the output layer in a separate method that might be called, or not,
before the real operation. For example IdentifyPrepare() for Identity(). Of
course this would complicate a bit the implementation of the operation because
it will need to look for which fields exist in the output layer and how the
input and method layer fields map to those fields. But the establishment of the
mapping and the setting of the output feature from the fields of the input and
method features could be made in common methods like the following (untested) :

  int* ComputeFieldMapping(OGRFeatureDefn* outputDefn, OGRFeatureDefn*
inputDefn)
  {
      int *panInputToOuputMap = (int*)CPLMalloc(sizeof(int) *
inputDefn->GetFieldCount());
      for( int iField = 0; iField < inputDefn->GetFieldCount(); iField++ )
      {
          panInputToOutputMap[iField] =
outputDefn->GetFieldIndex(inputDefn->GetFieldDefn(iField)->GetNameRef());
      }
      return panInputToOutputMap;
  }

  where panInputToOutput gives for each field of inputDefn the index of the
field in outputDefn that matches (or -1 if there's no match).

  And for the copying you would have :

  void SetFieldsFrom(OGRFeature* outputFeat, OGRFeature* inputFeat, int*
panInputToOutputMap)
  {
      for( int iField = 0; iField < poSrcFeature->GetFieldCount(); iField++ )
      {
        iDstField = panInputToOutputMap[iField];
        if( iDstField < 0 )
            continue;
        set_field(outputFeat, iDstField, inputFeat, iField);
      }
  }

   CopyFields() is a simplified version of the existingOGRFeature::SetFrom(
OGRFeature * poSrcFeature, int *panMap , int bForgiving ) which doesn't try to
copy the geometry, style or FID. But I see from the set_field() method that you
likely had already a look at this method ;-)

   This way the XXXXXPrepare() would not need to check that CreateField()
succeeds because XXXX() could work with an output layer with no fields at all.
Checking that there are not fields with same name would not be necessary (in
that case the value from B would override the value from A).

4) It would be nice to able to provide a progress callback to get progress
report (and also being able to interrupt) for such potentially long operations.

5) A few remarks on the implementation itself (only code review, no actual
testing). You can likely wait for comments from others before heading to fix
them...

a) CreateField() and CreateFeature() return code should be tested and acted
upon. Likely interrupt the whole process ? (not strictly necessary for
CreateField() is you adopt the idea developed in point 3))

b) I think there's something wrong with OGRGeometry *Bfilter =
B->GetSpatialFilter(). When you later do
B->SetSpatialFilter(x_geom->Intersection(Bfilter)), I believe it will destroy
the previous installed filter, and thus Bfilter will point to a garbage object.
You likely need to clone the initial spatial filter (and delete it after
restoring it at the end of the method)

c) Each time you do a new OGRFeature(), you need do delete it (after the call to
CreateFeature()).

d) GetGeometryRef() can return NULL (even for spatial layers). Currently it is
never checked, and there are a few places where it is dereferenced.

e) Lines like x_geom_diff = x_geom_diff->Difference(y_geom) (or geom =
geom->Union(y_geom)) will leak the initial x_geom_diff object. You likely need
to do :
	OGRGeometry* x_geom_diff_new = x_geom_diff->Difference(y_geom);
	delete x_geom_diff;
	x_geom_diff = x_geom_diff_new;

f) The object returned by GetNextFeature() should be deleted after use.

g) You should be careful with SetGeometryDirectly(). You cannot pass directly
the geometry belonging to another feature because this will segfault when you
free the said feature.

The following is OK :

OGRFeature *x = GetNextFeature()
OGRGeometry *geom = ...
OGRGeometry *x_geom = x->GetGeometryRef();
z->SetGeometryDirectly(x_geom->Difference(geom));
delete x;
delete geom;

But not :

OGRFeature *x = GetNextFeature()
OGRGeometry *x_geom = x->GetGeometryRef();
z->SetGeometryDirectly(x_geom); // use z->SetGeometry(x_geom) instead
delete x;


h) Nothing wrong, but calls to UnsetField() are unnecessary for a feature that
was just created and never set before (all the lines z->UnsetField(...) )

Well, enough for now ;-)

Best regards,

Even
From ari.jolma at gmail.com  Thu Apr 19 09:05:04 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Apr 19 09:05:44 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <1334837082.4f8fff5a07c35@imp.free.fr>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com> <1334837082.4f8fff5a07c35@imp.free.fr>
Message-ID: <4F900D80.6030204@gmail.com>

On 04/19/2012 03:04 PM, Even Rouault wrote:
>> http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra
>>
>
> 3) I'm wondering if it would not be more appropriate to separate the creation of
> fields of the output layer in a separate method that might be called, or not,
> before the real operation. For example IdentifyPrepare() for Identity().

I don't understand your reasoning behind this. I get the point of 
separating the field map computations, but don't see why or how that 
would necessitate the *Prepare methods.


> This way the XXXXXPrepare() would not need to check that CreateField()
> succeeds because XXXX() could work with an output layer with no fields at all.
> Checking that there are not fields with same name would not be necessary (in
> that case the value from B would override the value from A).

It is possible to have fields with same names in OGR. Having a field 
with same name does not mean that they are semantically same. Probably 
more often not. I think the method could be easier to understand if 
there is no value override. Simpler the better. The only thing I'd check 
is that the result layer does not have any fields before the method.

Other comments are fine, thanks.

Ari

From even.rouault at mines-paris.org  Thu Apr 19 09:20:53 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Apr 19 09:21:36 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <4F900D80.6030204@gmail.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com> <1334837082.4f8fff5a07c35@imp.free.fr>
	<4F900D80.6030204@gmail.com>
Message-ID: <1334841653.4f901135356c6@imp.free.fr>

Selon Ari Jolma <ari.jolma@gmail.com>:

> On 04/19/2012 03:04 PM, Even Rouault wrote:
> >> http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra
> >>
> >
> > 3) I'm wondering if it would not be more appropriate to separate the
> creation of
> > fields of the output layer in a separate method that might be called, or
> not,
> > before the real operation. For example IdentifyPrepare() for Identity().
>
> I don't understand your reasoning behind this. I get the point of
> separating the field map computations, but don't see why or how that
> would necessitate the *Prepare methods.

The rationale was that people could be interested in just a few fields from
input and/or method layers, and thus prefer to create them manually instead of
XXXX() doing it for them.

>
>
> > This way the XXXXXPrepare() would not need to check that CreateField()
> > succeeds because XXXX() could work with an output layer with no fields at
> all.
> > Checking that there are not fields with same name would not be necessary
> (in
> > that case the value from B would override the value from A).
>
> It is possible to have fields with same names in OGR. Having a field
> with same name does not mean that they are semantically same. Probably
> more often not. I think the method could be easier to understand if
> there is no value override.

True. In that case, one could imagine to add an option one day to provide the
mapping of the fields from the input and/or method layers to the fields of the
output layer to avoid any ambiguities, but that seems unnecessary for now.

For example, let's suppose that input and method layer have both a field F.
The user would create manually in C, 2 fields F1 and F2
And he would provide an option "FIELD_MAPPING=F1:input.F,F2:method.F"

Well, in a first step, we can perhaps take your proposal, and the above
suggestion would then skip the field creation step.

>
> Other comments are fine, thanks.
>
> Ari
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From aucoinsj at gmail.com  Thu Apr 19 09:22:58 2012
From: aucoinsj at gmail.com (Steven AuCoin)
Date: Thu Apr 19 09:23:39 2012
Subject: [gdal-dev] available opensource geoprocessing code based on GDAL
In-Reply-To: <BLU0-SMTP51AC26E3D9B1D0F9D331A6F43D0@phx.gbl>
References: <BLU0-SMTP51AC26E3D9B1D0F9D331A6F43D0@phx.gbl>
Message-ID: <CAOqrXJAZz0OVoLHGFh7cbZPfjRARxV0eH7U=cKcCYuYid1mOAQ@mail.gmail.com>

 Have you examined the Grass or Qgis development pages. They have plenty of
scripting examples.
http://grass.osgeo.org/wiki/Development
just a thought :)


2012/4/18 chenliang wang <hi181904665@msn.com>

> Hi,all:
> I am going to write a platform to process some geospatial data based on
> GDAL. But I noticed I need to write so many geoprocessing code by
> myself. Is there any availabe GDAL geoprocessing codes that is similar
> with ArcGIs geoprocessing tools? Thanks
>
>
>
> Chen-Liang Wang
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120419/4895c23b/attachment.html
From jason.roberts at duke.edu  Thu Apr 19 09:40:49 2012
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Apr 19 09:40:57 2012
Subject: [gdal-dev] Layer operations, a proposal
In-Reply-To: <1334822579.4f8fc6b3b4c4e@imp.free.fr>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4f8e05b8.0416650a.4309.14fcSMTPIN_ADDED@mx.google.com>
	<4F8EEF83.3040800@gmail.com>
	<01ae01cd1d9e$ae82d320$0b887960$%roberts@duke.edu>
	<ABB90CDC9A08FF49851AC42557795A1808A7CA55@USINVMAILB01.ingres.prv>
	<1334822579.4f8fc6b3b4c4e@imp.free.fr>
Message-ID: <01c101cd1e32$08b414b0$1a1c3e10$@roberts@duke.edu>

> As far as a general spatial indexing for any OGR datasource, I don't know
how it would be possible because a spatial index only makes sense if you can
have random access to the features. And a lot of OGR formats currently don't
support (efficient) random access, due to the nature of the storage (any
text based format for example). Or it would require significant work in
drivers so they are able to partially parse the file given a file offset
(would be difficult for XML parsers).

Yeah, without random access there is less value. But it still may be
worthwhile. In many kinds of operations between two layers (intersect, etc)
it might be faster to iterate through all features (order n*m loop) and
compare their bounding boxes before proceeding to a full GEOS call to try
the intersection. Exposing the spatial index to the code that is doing the
iteration would facilitate that optimization, especially if the code could
probe a spatial index tree rather than iterate through all bounding boxes
each time it checking which features in layer B intersected a feature from
layer A. It might also use less memory, as the index would probably have a
smaller footprint than the features themselves.

But I don't really know how GEOS works, or exactly how OGR and GOES work
together. Assuming all features could fit in memory, a decent optimization
could be achieved by having OGR or GEOS cache the bounding box the first
time an intersection is attempted, and on all further calls first consider
the bounding box. This would not be as fast as probing a spatial index
tree--you still have the order n*m loop--but each iteration should be fast
when features do not actually intersect.

Best,
Jason

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Thursday, April 19, 2012 4:03 AM
To: Tyler Mitchell
Cc: Jason Roberts; gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Layer operations, a proposal

Selon Tyler Mitchell <Tyler.Mitchell@actian.com>:

>
>
> Jason Roberts wrote:
> ...
> > For scenarios involving large numbers of features, I suspect it is 
> > much harder to do it fast and within available memory. It is 
> > probably necessary to do a multi-pass approach, where the first step 
> > operates only on the spatial indexes of the layers involved. It is 
> > probably too slow--or at
> least
> > very suboptimal--to even read all of the features into memory, much 
> > less call GEOS on them; all of that would happen in a later pass, 
> > when a subset of features was identified via the spatial index pass....
>
> I was intrigued to read the earlier thread you pointed out Jason, and 
> to see also Jan's comment about spatial index handling.  I would 
> really love to see a common approach to adding spatial index files to 
> my files (and even database connections done via a VRT) -

FYI : if the VRT just wraps the underlying datasource, the underlying
spatial index should already currently be used when setting a spatial
filter. You could verify than easily with a VRT with an anderlying shapefile
with a .qix, or a postgis DB with a spatial index.

> and then having OGR understand how to use those indexes.
>
> That'd be pretty awesome in my opinion... not that I'm able to 
> implement anything myself, but thought I'd raise a cheer around the 
> idea ;-)

As far as a general spatial indexing for any OGR datasource, I don't know
how it would be possible because a spatial index only makes sense if you can
have random access to the features. And a lot of OGR formats currently don't
support
(efficient) random access, due to the nature of the storage (any text based
format for example). Or it would require significant work in drivers so they
are able to partially parse the file given a file offset (would be difficult
for XML parsers).

So if you want a spatial index to be efficient, the easiest whay would be to
store the features themselves in RAM (which doesn't scale), or transform
into a format/storage that natively support random feature access.

>
> Tyler
>
>


From blaa_katt at yahoo.co.jp  Thu Apr 19 10:09:36 2012
From: blaa_katt at yahoo.co.jp (blaa_katt@yahoo.co.jp)
Date: Thu Apr 19 10:10:28 2012
Subject: [gdal-dev] How to change variable names in netCDF?
In-Reply-To: <CA+TxYvODoL+mhVpyFeOKLkTp5NL_p4OmZ2-=na8Syou-jAYzEA@mail.gmail.com>
Message-ID: <25404.53715.qm@web4303.mail.ogk.yahoo.co.jp>

Normal  0          false  false  false    EN-US  JA  X-NONE                                          MicrosoftInternetExplorer4                                                                                                                                                                                                                                                                                                                          /* Style Definitions */ table.MsoNormalTable	{mso-style-name:"Table Normal";	mso-tstyle-rowband-size:0;	mso-tstyle-colband-size:0;	mso-style-noshow:yes;	mso-style-priority:99;	mso-style-qformat:yes;	mso-style-parent:"";	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;	mso-para-margin-top:0cm;	mso-para-margin-right:0cm;	mso-para-margin-bottom:10.0pt;	mso-para-margin-left:0cm;	line-height:115%;	mso-pagination:widow-orphan;	font-size:11.0pt;	font-family:"Calibri","sans-serif";	mso-ascii-font-family:Calibri;
	mso-ascii-theme-font:minor-latin;	mso-hansi-font-family:Calibri;	mso-hansi-theme-font:minor-latin;	mso-bidi-font-family:"Times New Roman";	mso-bidi-theme-font:minor-bidi;}

Hello,




Thank you for the reply, Etienne.





If it is impossible with the gdal 1.9.0,I would like to implement some modifications.

We found netCDF constructor in netcdfdataset.cpp.

I think it is possible to modify the names by setting pszBandNameas shown follows:

---------------------------------------------------




    if (!pszBandName || EQUAL(pszBandName,"")  )

        sprintf( szTemp, "Band%d", nBand );

    else 

        strcpy( szTemp, pszBandName );

            CPLDebug( "GDAL_netCDF","nc_def_var(%d,%s,%d)",

                      cdfid, szTemp,nc_datatype );

            status = nc_def_var( cdfid, szTemp,nc_datatype, 


                         NCDF_NBDIM,anBandDims, &nZId );








But the course of the modification is unclear for me.

Can anyone give me any advice which way is better,  (e.g. parsing of names through string options,making reserved metadata with a name, modification of Python APIs, etc)?




Kind regards,




Asuka




Etienne Tourigny <etourigny.dev@gmail.com> wrote:

If you use gdal-1.9 the driver will use the variable name from the
original netcdf file (if any).

for example, if you use the following command the original filename
will be preserved.
gdal_translate -of netcdf in.nc out.nc

However, if copying from other formats (such as gtiff), or creating a
new netcdf file, there is no way to change the variable name with
gdal.

You can use other tools such as:
NCO -> nco.sourceforge.net/
cdo ->https://code.zmaw.de/projects/cdo

Etienne

On Thu, Apr 19, 2012 at 5:15 AM,  <blaa_katt@yahoo.co.jp> wrote:
> Hello everybody,
>
> I have a question about netCDF creation.
> I am using GDAL 1.9.0 in python.
>
> Creation Issues in http://www.gdal.org/frmt_netcdf.html mentions
> ?each variable array is names Band1, Band2,? ?.
>
> I would like to change the names.
> Can anyone give me ideas?
>
> Thank you for your time.
>
> Kind regards,
>
> Asuka
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120419/46095166/attachment-0001.html
From polimax at mail.ru  Thu Apr 19 13:17:05 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Thu Apr 19 13:17:25 2012
Subject: [gdal-dev] available opensource geoprocessing code based on GDAL
In-Reply-To: <BLU0-SMTP442CCEC72090FEEE666DE53F43D0@phx.gbl>
References: <BLU0-SMTP51AC26E3D9B1D0F9D331A6F43D0@phx.gbl>
	<CALGBukwzvwqEVVYc0+N6GiWz663W5ArF8-EtkjRnF9ztX0GnmA@mail.gmail.com>
	<BLU0-SMTP442CCEC72090FEEE666DE53F43D0@phx.gbl>
Message-ID: <4F904891.2080905@mail.ru>

19.04.2012 6:28, chenliang wang ???????:
> Thanks a lot . GeoTrellis is real powerful. What a pity that the 
> platform I want to buid is just an desktop application without web 
> services. I  want to find some geoprocessing scripts including map 
> algebra , zonal computation, reclassifity , vector operation and so on 
> . After all ,GeoTrellis is real cool!
>
> ? 2012-4-19 10:05, Josh Marcus ??:
>>
>> Hello there,
>>
>> What are you trying to do specifically?  I work on another open 
>> source project, GeoTrellis, you might find useful.
>>
>> github.com/azavea/geotrellis <http://github.com/azavea/geotrellis>
>>
>> On Apr 18, 2012 9:57 PM, "chenliang wang" <hi181904665@msn.com 
>> <mailto:hi181904665@msn.com>> wrote:
>>
>>     Hi,all:
>>     I am going to write a platform to process some geospatial data
>>     based on
>>     GDAL. But I noticed I need to write so many geoprocessing code by
>>     myself. Is there any availabe GDAL geoprocessing codes that is
>>     similar
>>     with ArcGIs geoprocessing tools? Thanks
>>
>>
>>
>>     Chen-Liang Wang
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi,

I developing wxGIS which includes wxGISTooolbox. I think to create some 
similar to ArcToolbox. Now wxGISTooolbox have only a few geoprocessing 
tools. As I focused on Linux version there is a lack of time to write 
more instruments. Any help is welcome.
wxGIS is desktop application. But geoprocessing can be on server side 
(there are some server code in trunk).

Best regards,
     Dmitry

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120419/46aeb702/attachment.html
From etourigny.dev at gmail.com  Thu Apr 19 14:45:25 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Apr 19 14:52:46 2012
Subject: [gdal-dev] How to change variable names in netCDF?
In-Reply-To: <25404.53715.qm@web4303.mail.ogk.yahoo.co.jp>
References: <CA+TxYvODoL+mhVpyFeOKLkTp5NL_p4OmZ2-=na8Syou-jAYzEA@mail.gmail.com>
	<25404.53715.qm@web4303.mail.ogk.yahoo.co.jp>
Message-ID: <CA+TxYvNDMSMBMTC=upDvKHhLsEr1qyJ_NkJ8h+mJD9ndxs8thg@mail.gmail.com>

Asuka,

I do not understand what is your intent - creating files from scratch,
copying from other format, using gdalwarp/gdal_translate?

If you are using the CreateCopy mechanism (like in gdal_translate),
then you can set the variable name in the Band-level metadata
NETCDF_VARNAME.  This is what is done by the driver when it opens a
netcdf file.

See netcdfdataset.cpp line 4477 and 4507:

        /* Get var name from NETCDF_VARNAME */
        tmpMetadata = poSrcBand->GetMetadataItem("NETCDF_VARNAME");
       	if( tmpMetadata != NULL) {
            if( nBands > 1 ) sprintf(szBandName,"%s%d",tmpMetadata,iBand);
            else strcpy( szBandName, tmpMetadata );
            // poSrcBand->SetMetadataItem("NETCDF_VARNAME","");
        }
        else
            szBandName[0]='\0';
[...]
        poBand = new netCDFRasterBand( poDS, eDT, iBand,
                                       bSignedData,
                                       szBandName, szLongName );

However the SetMetadata() function does not work for netcdfdataset,
due to differences between gdal metadata vs. netcdf metadata.

You can always call the netCDFRasterBand constructor with appropriate
arguments, but there is no api for netcdfdataset.

However, if you are creating a netcdf file manually you could always
modify Create() to accept a new creation option like
BAND_NAME=<new_name> but I don't see how you could deal with multiple
bands - maybe separate them like this BAND_NAME=var1,var2,var3

As I said - might be easier to use other tools after creating the file
with gdal.

Etienne

On Thu, Apr 19, 2012 at 11:09 AM,  <blaa_katt@yahoo.co.jp> wrote:
> Hello,
>
> Thank you for the reply, Etienne.
>
> If it is impossible with the gdal 1.9.0, I would like to implement some
> modifications.
> We found netCDF constructor in netcdfdataset.cpp.
> I think it is possible to modify the names by setting pszBandName as shown
> follows:
> ---------------------------------------------------
>
> ??? if ( !pszBandName || EQUAL(pszBandName,"")? )
> ??????? sprintf( szTemp, "Band%d", nBand );
> ??? else
> ??????? strcpy( szTemp, pszBandName );
> ??????????? CPLDebug( "GDAL_netCDF", "nc_def_var(%d,%s,%d)",
> ????????????????????? cdfid, szTemp, nc_datatype );
> ??????????? status = nc_def_var( cdfid, szTemp, nc_datatype,
> ???????????????????????? NCDF_NBDIM, anBandDims, &nZId );
>
>
> But the course of the modification is unclear for me.
> Can anyone give me any advice which way is better, ?(e.g. parsing of names
> through string options, making reserved metadata with a name, modification
> of Python APIs, etc)?
>
> Kind regards,
>
> Asuka
>
>
>
> Etienne Tourigny <etourigny.dev@gmail.com> wrote:
>
> If you use gdal-1.9 the driver will use the variable name from the
> original netcdf file (if any).
>
> for example, if you use the following command the original filename
> will be preserved.
> gdal_translate -of netcdf in.nc out.nc
>
> However, if copying from other formats (such as gtiff), or creating a
> new netcdf file, there is no way to change the variable name with
> gdal.
>
> You can use other tools such as:
> NCO -> nco.sourceforge.net/
> cdo ->https://code.zmaw.de/projects/cdo
>
> Etienne
>
> On Thu, Apr 19, 2012 at 5:15 AM,? <blaa_katt@yahoo.co.jp> wrote:
>> Hello everybody,
>>
>> I have a question about netCDF creation.
>> I am using GDAL 1.9.0 in python.
>>
>> Creation Issues in http://www.gdal.org/frmt_netcdf.html mentions
>> ?each variable array is names Band1, Band2,? ?.
>>
>> I would like to change the names.
>> Can anyone give me ideas?
>>
>> Thank you for your time.
>>
>> Kind regards,
>>
>> Asuka
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From chuck at sharpsteen.net  Thu Apr 19 21:20:51 2012
From: chuck at sharpsteen.net (Charlie Sharpsteen)
Date: Thu Apr 19 21:21:35 2012
Subject: [gdal-dev] Enabling DAP appears to disable several other formats
Message-ID: <CAMEX5szGDYZpbwLgiD3v8TwhdDy+cxjvRW1TJHxtaV24YMw=Ug@mail.gmail.com>

I'm trying to add support for OpenDAP to a build of GDAL on OS X. However,
when I add `--with-dods-root` to my configure arguments,
I inexplicably loose support for Epsilon, cURL, SpatiaLite and FreeXL.

Full configure logs can be found here:

  https://gist.github.com/2425147

The diff between the configure output before and after adding DAP is:

diff --git a/gdal_without_dap.log b/gdal_with_dap.log
index 2eb06b3..405300f 100644
--- a/gdal_without_dap.log
+++ b/gdal_with_dap.log
@@ -244,17 +244,22 @@ checking for Google libkml... yes
 checking if Google libkml version is >= 1.3.0... no
 using odbc library from /usr/local.
 checking if Oracle support is enabled... no
-checking Checking for DODS... disabled
+checking Checking for DODS... libdap < 3.10
+libdap >= 3.9
+setting DODS root directory to /usr/local
         found libcurl version 7.19.7
-checking for curl_global_init in -lcurl... yes
-checking for spatialite_init in -lspatialite... yes
-enabled
+checking for curl_global_init in -lcurl... no
+checking for spatialite_init in -lspatialite... no
+disabled
+checking for sqlite3_open in -lsqlite3... yes
+checking for SQLite3 library >= 3.0.0... yes
 checking Checking for DWGdirect... disabled
 configure: "IBM Informix DataBlade support disabled."
 configure: checking whether we should include ESRI SDE support...
         ESRI SDE support not requested.
 checking for VFK support... yes
-checking for eps_read_block_header in -lepsilon... yes
+checking for eps_read_block_header in -lepsilon... no
+libepsilon not found - EPSILON support disabled
 checking for geos-config... /usr/local/bin/geos-config
 checking for GEOS version >= 2.2.0... yes
 checking for GEOSversion in -lgeos_c... yes
@@ -263,7 +268,10 @@ checking for OpenCL support... no
 checking for FreeXL support... checking freexl.h usability... yes
 checking freexl.h presence... yes
 checking for freexl.h... yes
-checking for freexl_open in -lfreexl... yes
+checking for freexl_open in -lfreexl... no
+checking for freexl_open in -lfreexl... no
+checking for freexl_open in -lfreexl... no
+libfreexl not found - FreeXL support disabled
 checking whether to enable PAM... yes
 checking for poppler... yes
 checking if Catalog::optContent exists... yes
@@ -318,9 +326,9 @@ GDAL is now configured for i386-apple-darwin10.8.0
   MrSID/MG4 Lidar support:   no
   MSG support:               no
   GRIB support:              yes
-  EPSILON support:           yes
+  EPSILON support:           no
   WebP support:              no
-  cURL support (wms/wcs/...):yes
+  cURL support (wms/wcs/...):no
   PostgreSQL support:        yes
   MySQL support:             no
   Ingres support:            no
@@ -337,9 +345,9 @@ GDAL is now configured for i386-apple-darwin10.8.0
   GEORASTER support:         no
   SDE support:               no
   Rasdaman support:          no
-  DODS support:              no
+  DODS support:              yes
   SQLite support:            yes
-  SpatiaLite support:        yes
+  SpatiaLite support:        no
   DWGdirect support          no
   INFORMIX DataBlade support:no
   GEOS support:              yes
@@ -348,7 +356,7 @@ GDAL is now configured for i386-apple-darwin10.8.0
   Podofo support:            no
   OpenCL support:            no
   Armadillo support:         no
-  FreeXL support:            yes
+  FreeXL support:            no

   Mac OS X Framework :       no


Any ideas why providing configure with the info to find one package is
hosing four unrelated packages?

Thanks!


-Charlie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120419/385da75d/attachment.html
From warmerdam at pobox.com  Thu Apr 19 21:40:02 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 19 21:40:19 2012
Subject: [gdal-dev] Enabling DAP appears to disable several other formats
In-Reply-To: <CAMEX5szGDYZpbwLgiD3v8TwhdDy+cxjvRW1TJHxtaV24YMw=Ug@mail.gmail.com>
References: <CAMEX5szGDYZpbwLgiD3v8TwhdDy+cxjvRW1TJHxtaV24YMw=Ug@mail.gmail.com>
Message-ID: <CA+YzLBcKB3pPKnv3ECcjsoRmCJ8K2_bczC0sA2XmcvFjc8ZT_Q@mail.gmail.com>

Charlie,

The typical reason would be that adding opendap adds stuff into the
libraries list that results in other "test links" failing.  It would
be helpful if you could file a bug and attach the config.log.

Best regards,
Frank

On Thu, Apr 19, 2012 at 6:20 PM, Charlie Sharpsteen
<chuck@sharpsteen.net> wrote:
> I'm trying to add support for OpenDAP to a build of GDAL on OS X. However,
> when I add `--with-dods-root` to my configure arguments,
> I?inexplicably?loose support for Epsilon, cURL, SpatiaLite and FreeXL.
>
> Full configure logs can be found here:
>
> ??https://gist.github.com/2425147
>
> The diff between the configure output before and after adding DAP is:
>
> diff --git a/gdal_without_dap.log b/gdal_with_dap.log
> index 2eb06b3..405300f 100644
> --- a/gdal_without_dap.log
> +++ b/gdal_with_dap.log
> @@ -244,17 +244,22 @@ checking for Google libkml... yes
> ?checking if Google libkml version is >= 1.3.0... no
> ?using odbc library from /usr/local.
> ?checking if Oracle support is enabled... no
> -checking Checking for DODS... disabled
> +checking Checking for DODS... libdap < 3.10
> +libdap >= 3.9
> +setting DODS root directory to /usr/local
> ? ? ? ? ?found libcurl version 7.19.7
> -checking for curl_global_init in -lcurl... yes
> -checking for spatialite_init in -lspatialite... yes
> -enabled
> +checking for curl_global_init in -lcurl... no
> +checking for spatialite_init in -lspatialite... no
> +disabled
> +checking for sqlite3_open in -lsqlite3... yes
> +checking for SQLite3 library >= 3.0.0... yes
> ?checking Checking for DWGdirect... disabled
> ?configure: "IBM Informix DataBlade support disabled."
> ?configure: checking whether we should include ESRI SDE support...
> ? ? ? ? ?ESRI SDE support not requested.
> ?checking for VFK support... yes
> -checking for eps_read_block_header in -lepsilon... yes
> +checking for eps_read_block_header in -lepsilon... no
> +libepsilon not found - EPSILON support disabled
> ?checking for geos-config... /usr/local/bin/geos-config
> ?checking for GEOS version >= 2.2.0... yes
> ?checking for GEOSversion in -lgeos_c... yes
> @@ -263,7 +268,10 @@ checking for OpenCL support... no
> ?checking for FreeXL support... checking freexl.h usability... yes
> ?checking freexl.h presence... yes
> ?checking for freexl.h... yes
> -checking for freexl_open in -lfreexl... yes
> +checking for freexl_open in -lfreexl... no
> +checking for freexl_open in -lfreexl... no
> +checking for freexl_open in -lfreexl... no
> +libfreexl not found - FreeXL support disabled
> ?checking whether to enable PAM... yes
> ?checking for poppler... yes
> ?checking if Catalog::optContent exists... yes
> @@ -318,9 +326,9 @@ GDAL is now configured for i386-apple-darwin10.8.0
> ? ?MrSID/MG4 Lidar support: ? no
> ? ?MSG support: ? ? ? ? ? ? ? no
> ? ?GRIB support: ? ? ? ? ? ? ?yes
> - ?EPSILON support: ? ? ? ? ? yes
> + ?EPSILON support: ? ? ? ? ? no
> ? ?WebP support: ? ? ? ? ? ? ?no
> - ?cURL support (wms/wcs/...):yes
> + ?cURL support (wms/wcs/...):no
> ? ?PostgreSQL support: ? ? ? ?yes
> ? ?MySQL support: ? ? ? ? ? ? no
> ? ?Ingres support: ? ? ? ? ? ?no
> @@ -337,9 +345,9 @@ GDAL is now configured for i386-apple-darwin10.8.0
> ? ?GEORASTER support: ? ? ? ? no
> ? ?SDE support: ? ? ? ? ? ? ? no
> ? ?Rasdaman support: ? ? ? ? ?no
> - ?DODS support: ? ? ? ? ? ? ?no
> + ?DODS support: ? ? ? ? ? ? ?yes
> ? ?SQLite support: ? ? ? ? ? ?yes
> - ?SpatiaLite support: ? ? ? ?yes
> + ?SpatiaLite support: ? ? ? ?no
> ? ?DWGdirect support ? ? ? ? ?no
> ? ?INFORMIX DataBlade support:no
> ? ?GEOS support: ? ? ? ? ? ? ?yes
> @@ -348,7 +356,7 @@ GDAL is now configured for i386-apple-darwin10.8.0
> ? ?Podofo support: ? ? ? ? ? ?no
> ? ?OpenCL support: ? ? ? ? ? ?no
> ? ?Armadillo support: ? ? ? ? no
> - ?FreeXL support: ? ? ? ? ? ?yes
> + ?FreeXL support: ? ? ? ? ? ?no
>
> ? ?Mac OS X Framework : ? ? ? no
>
>
> Any ideas why?providing?configure with the info to find one package is
> hosing four unrelated packages?
>
> Thanks!
>
>
> -Charlie
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From chuck at sharpsteen.net  Thu Apr 19 21:48:06 2012
From: chuck at sharpsteen.net (Charlie Sharpsteen)
Date: Thu Apr 19 21:49:35 2012
Subject: [gdal-dev] Enabling DAP appears to disable several other formats
In-Reply-To: <CA+YzLBcKB3pPKnv3ECcjsoRmCJ8K2_bczC0sA2XmcvFjc8ZT_Q@mail.gmail.com>
References: <CAMEX5szGDYZpbwLgiD3v8TwhdDy+cxjvRW1TJHxtaV24YMw=Ug@mail.gmail.com>
	<CA+YzLBcKB3pPKnv3ECcjsoRmCJ8K2_bczC0sA2XmcvFjc8ZT_Q@mail.gmail.com>
Message-ID: <CAMEX5szq+xATn_D7hZY3Ut+6_Qs-6cO2uuiq=CqRb8a6majGwg@mail.gmail.com>

On Thu, Apr 19, 2012 at 6:40 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Charlie,
>
> The typical reason would be that adding opendap adds stuff into the
> libraries list that results in other "test links" failing.  It would
> be helpful if you could file a bug and attach the config.log.
>
> Best regards,
> Frank


I looked through the config.log a little closer, and in all four cases the
following argument was added to the compiler flags:

    -arch x86_64 i386 ppc

This is bad for two reasons:

  - I'm not trying to build a universal binary and all of my components are
x86_64 only.

  - `-arch x86_64 i386 ppc` isn't even a valid compiler flag. The proper
thing to pass would be `-arch x86_64 -arch i386 -arch ppc`, so the compiler
would error out even if I had the universal binaries to support a 3-way
build.

I've traced the offending flags to `dap-config` so it looks like this is an
OpenDAP bug now, not a GDAL bug.

Apologies for the noise.


-Charlie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120419/73b4cced/attachment.html
From pi_ml at sourcepole.com  Fri Apr 20 07:33:02 2012
From: pi_ml at sourcepole.com (Pirmin Kalberer)
Date: Fri Apr 20 07:48:41 2012
Subject: [gdal-dev] available opensource geoprocessing code based on GDAL
In-Reply-To: <BLU0-SMTP51AC26E3D9B1D0F9D331A6F43D0@phx.gbl>
References: <BLU0-SMTP51AC26E3D9B1D0F9D331A6F43D0@phx.gbl>
Message-ID: <201204201333.02726.pi_ml@sourcepole.com>

Hi,

Am Donnerstag, 19. April 2012, 03.57:45 schrieb chenliang wang:
> Hi,all:
> I am going to write a platform to process some geospatial data based on
> GDAL. But I noticed I need to write so many geoprocessing code by
> myself. Is there any availabe GDAL geoprocessing codes that is similar
> with ArcGIs geoprocessing tools? Thanks

QGIS with the brand new SEXTANTE processing framework plugin might be what you 
are looking for. You can add your own processing steps based on the Python 
GDAL interface.

Regards
Pirmin

-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com
From SGONG at mdacorporation.com  Fri Apr 20 12:20:59 2012
From: SGONG at mdacorporation.com (Shawn Gong)
Date: Fri Apr 20 12:22:58 2012
Subject: [gdal-dev] gdal_translate alters NITF's metadata
Message-ID: <33584A1DEF4341428D15C1273466D3230221E1AED9@EVSYVR1.ds.mda.ca>

Hi list,

I use gdal 1.9.0 

I have a NITF image that has 12 bands. The first 8 are I and Q of a quad-pol complex.
I ran "gdal_translate -of NITF -b 9 -b 12 -b 10 -b 11 pp1.NTF test" to get rid of them and keep the last 4 magnitude bands.

However the NITF tags are altered, e.g. the NITF_ISORCE and NITF_IDATIM

Have you seen this? 
I also see "Warning 1: FHDR=NITF02.1 not supported, switching to NITF02.10."  Can this be the cause?

Thanks,
Shawn
-------------- next part --------------
Driver: NITF/National Imagery Transmission Format
Files: test
Size is 4337, 2980
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
Origin = (-76.105048143450176,45.520048161202489)
Pixel Size = (0.000096286900369,-0.000096322404983)
Metadata:
  NITF_ABPP=32
  NITF_CCS_COLUMN=0
  NITF_CCS_ROW=0
  NITF_CLEVEL=05
  NITF_ENCRYP=0
  NITF_FBKGC=  0,  0,  0
  NITF_FDT=20021216151629
  NITF_FHDR=NITF02.10
  NITF_FSCATP=
  NITF_FSCAUT=
  NITF_FSCLAS=U
  NITF_FSCLSY=
  NITF_FSCLTX=
  NITF_FSCODE=
  NITF_FSCOP=00000
  NITF_FSCPYS=00000
  NITF_FSCRSN=
  NITF_FSCTLH=
  NITF_FSCTLN=
  NITF_FSDCDT=
  NITF_FSDCTP=
  NITF_FSDCXM=
  NITF_FSDG=
  NITF_FSDGDT=
  NITF_FSREL=
  NITF_FSSRDT=
  NITF_FTITLE=
  NITF_IALVL=0
  NITF_IC=NC
  NITF_ICAT=VIS
  NITF_ICORDS=G
  NITF_IDATIM=20021216151629
  NITF_IDLVL=1
  NITF_IGEOLO=453112N0760618W453112N0754115W451359N0754115W451359N0760618W
  NITF_IID1=Missing
  NITF_IID2=
  NITF_ILOC_COLUMN=0
  NITF_ILOC_ROW=0
  NITF_IMAG=1.0 
  NITF_IMODE=B
  NITF_IREP=MONO
  NITF_ISCATP=
  NITF_ISCAUT=
  NITF_ISCLAS=U
  NITF_ISCLSY=
  NITF_ISCLTX=
  NITF_ISCODE=
  NITF_ISCRSN=
  NITF_ISCTLH=
  NITF_ISCTLN=
  NITF_ISDCDT=
  NITF_ISDCTP=
  NITF_ISDCXM=
  NITF_ISDG=
  NITF_ISDGDT=
  NITF_ISORCE=Unknown
  NITF_ISREL=
  NITF_ISSRDT=
  NITF_ONAME=
  NITF_OPHONE=
  NITF_OSTAID=GDAL
  NITF_PJUST=R
  NITF_PVTYPE=R
  NITF_STYPE=BF01
  NITF_TGTID=
Corner Coordinates:
Upper Left  ( -76.1050481,  45.5200482) ( 76d 6'18.17"W, 45d31'12.17"N)
Lower Left  ( -76.1050481,  45.2330074) ( 76d 6'18.17"W, 45d13'58.83"N)
Upper Right ( -75.6874519,  45.5200482) ( 75d41'14.83"W, 45d31'12.17"N)
Lower Right ( -75.6874519,  45.2330074) ( 75d41'14.83"W, 45d13'58.83"N)
Center      ( -75.8962500,  45.3765278) ( 75d53'46.50"W, 45d22'35.50"N)
Band 1 Block=4337x1 Type=Float32, ColorInterp=Gray
Band 2 Block=4337x1 Type=Float32, ColorInterp=Gray
Band 3 Block=4337x1 Type=Float32, ColorInterp=Gray
Band 4 Block=4337x1 Type=Float32, ColorInterp=Gray
-------------- next part --------------
Driver: NITF/National Imagery Transmission Format
Files: pp1.ntf
Size is 4337, 2980
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
Origin = (-76.105048143450176,45.520048161202489)
Pixel Size = (0.000096286900369,-0.000096322404983)
Metadata:
  NITF_ABPP=32
  NITF_CCS_COLUMN=0
  NITF_CCS_ROW=0
  NITF_CLEVEL=05
  NITF_ENCRYP=0
  NITF_FBKGC= 48, 48, 48
  NITF_FDT=20120420094325
  NITF_FHDR=NITF02.10
  NITF_FSCATP=
  NITF_FSCAUT=
  NITF_FSCLAS=U
  NITF_FSCLSY=
  NITF_FSCLTX=
  NITF_FSCODE=
  NITF_FSCOP=00001
  NITF_FSCPYS=00001
  NITF_FSCRSN=
  NITF_FSCTLH=
  NITF_FSCTLN=
  NITF_FSDCDT=
  NITF_FSDCTP=
  NITF_FSDCXM=
  NITF_FSDG=
  NITF_FSDGDT=
  NITF_FSREL=
  NITF_FSSRDT=
  NITF_FTITLE=
  NITF_IALVL=0
  NITF_IC=NC
  NITF_ICAT=MS
  NITF_ICORDS=G
  NITF_IDATIM=20080526112157
  NITF_IDLVL=1
  NITF_IGEOLO=453112N0760618W453112N0754115W451359N0754115W451359N0760618W
  NITF_IID1=0000000001
  NITF_IID2=
  NITF_ILOC_COLUMN=0
  NITF_ILOC_ROW=0
  NITF_IMAG=1.0 
  NITF_IMODE=B
  NITF_IREP=MULTI
  NITF_ISCATP=
  NITF_ISCAUT=
  NITF_ISCLAS=U
  NITF_ISCLSY=
  NITF_ISCLTX=
  NITF_ISCODE=
  NITF_ISCRSN=
  NITF_ISCTLH=
  NITF_ISCTLN=
  NITF_ISDCDT=
  NITF_ISDCTP=
  NITF_ISDCXM=
  NITF_ISDG=
  NITF_ISDGDT=
  NITF_ISORCE=RADARSAT-2
  NITF_ISREL=
  NITF_ISSRDT=
  NITF_ONAME=PCI Geomatics
  NITF_OPHONE=+1(905)764-0614
  NITF_OSTAID=0000000001
  NITF_PJUST=R
  NITF_PVTYPE=R
  NITF_STYPE=BF01
  NITF_TGTID=
Corner Coordinates:
Upper Left  ( -76.1050481,  45.5200482) ( 76d 6'18.17"W, 45d31'12.17"N)
Lower Left  ( -76.1050481,  45.2330074) ( 76d 6'18.17"W, 45d13'58.83"N)
Upper Right ( -75.6874519,  45.5200482) ( 75d41'14.83"W, 45d31'12.17"N)
Lower Right ( -75.6874519,  45.2330074) ( 75d41'14.83"W, 45d13'58.83"N)
Center      ( -75.8962500,  45.3765278) ( 75d53'46.50"W, 45d22'35.50"N)
Band 1 Block=4337x1 Type=Float32, ColorInterp=Undefined
Band 2 Block=4337x1 Type=Float32, ColorInterp=Undefined
Band 3 Block=4337x1 Type=Float32, ColorInterp=Undefined
Band 4 Block=4337x1 Type=Float32, ColorInterp=Undefined
Band 5 Block=4337x1 Type=Float32, ColorInterp=Undefined
Band 6 Block=4337x1 Type=Float32, ColorInterp=Undefined
Band 7 Block=4337x1 Type=Float32, ColorInterp=Undefined
Band 8 Block=4337x1 Type=Float32, ColorInterp=Undefined
Band 9 Block=4337x1 Type=Float32, ColorInterp=Undefined
Band 10 Block=4337x1 Type=Float32, ColorInterp=Undefined
Band 11 Block=4337x1 Type=Float32, ColorInterp=Undefined
Band 12 Block=4337x1 Type=Float32, ColorInterp=Undefined
From warmerdam at pobox.com  Fri Apr 20 12:35:07 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 20 12:35:48 2012
Subject: [gdal-dev] gdal_translate alters NITF's metadata
In-Reply-To: <33584A1DEF4341428D15C1273466D3230221E1AED9@EVSYVR1.ds.mda.ca>
References: <33584A1DEF4341428D15C1273466D3230221E1AED9@EVSYVR1.ds.mda.ca>
Message-ID: <CA+YzLBfA6_fgA6tJ3Deksdh=ewmw9BebqU=bKf-u0wWRXu_cXQ@mail.gmail.com>

Shawn,

I see the values you get for NITF_ISORCE and NITF_IDATIM
are the default ones in the NITF Create code.  Looking through
the NITFCreateCopy() code in nitfdataset.cpp, it only seems to
copy a few selective metadata items from the source dataset to be
creation options when creating the header of the new one.  ISORCE
and IDATIM are not amoung them.   I'm not sure why it is so selective.

I'd suggest we open up this loop to copy more header values:

/* -------------------------------------------------------------------- */
/*      Copy over other source metadata items as creation options       */
/*      that seem useful.                                               */
/* -------------------------------------------------------------------- */
     char **papszSrcMD = poSrcDS->GetMetadata();
    int iMD;

    for( iMD = 0; papszSrcMD && papszSrcMD[iMD]; iMD++ )
    {
        if( EQUALN(papszSrcMD[iMD],"NITF_BLOCKA",11)
            || EQUALN(papszSrcMD[iMD],"NITF_FHDR",9) )
        {
            char *pszName = NULL;
            const char *pszValue = CPLParseNameValue( papszSrcMD[iMD],
                                                      &pszName );
            if( CSLFetchNameValue( papszFullOptions, pszName+5 ) == NULL )
                papszFullOptions =
                    CSLSetNameValue( papszFullOptions, pszName+5, pszValue );
            CPLFree(pszName);
        }
    }

Perhaps you could prepare a patch and test it and then submit it?

Best regards,
Frank

On Fri, Apr 20, 2012 at 9:20 AM, Shawn Gong <SGONG@mdacorporation.com> wrote:
> Hi list,
>
> I use gdal 1.9.0
>
> I have a NITF image that has 12 bands. The first 8 are I and Q of a quad-pol complex.
> I ran "gdal_translate -of NITF -b 9 -b 12 -b 10 -b 11 pp1.NTF test" to get rid of them and keep the last 4 magnitude bands.
>
> However the NITF tags are altered, e.g. the NITF_ISORCE and NITF_IDATIM
>
> Have you seen this?
> I also see "Warning 1: FHDR=NITF02.1 not supported, switching to NITF02.10." ?Can this be the cause?
>
> Thanks,
> Shawn
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From chuck at sharpsteen.net  Fri Apr 20 12:51:26 2012
From: chuck at sharpsteen.net (Charlie Sharpsteen)
Date: Fri Apr 20 12:52:54 2012
Subject: [gdal-dev] Enabling DAP appears to disable several other formats
In-Reply-To: <CAMEX5szq+xATn_D7hZY3Ut+6_Qs-6cO2uuiq=CqRb8a6majGwg@mail.gmail.com>
References: <CAMEX5szGDYZpbwLgiD3v8TwhdDy+cxjvRW1TJHxtaV24YMw=Ug@mail.gmail.com>
	<CA+YzLBcKB3pPKnv3ECcjsoRmCJ8K2_bczC0sA2XmcvFjc8ZT_Q@mail.gmail.com>
	<CAMEX5szq+xATn_D7hZY3Ut+6_Qs-6cO2uuiq=CqRb8a6majGwg@mail.gmail.com>
Message-ID: <CAMEX5szxJw33NAiy-oxB49aGtF3XmKF=HgCk1NE4cGuroyX+7w@mail.gmail.com>

On Thu, Apr 19, 2012 at 6:48 PM, Charlie Sharpsteen <chuck@sharpsteen.net>wrote:

> On Thu, Apr 19, 2012 at 6:40 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:
>
>> Charlie,
>>
>> The typical reason would be that adding opendap adds stuff into the
>> libraries list that results in other "test links" failing.  It would
>> be helpful if you could file a bug and attach the config.log.
>>
>> Best regards,
>> Frank
>
>
> I looked through the config.log a little closer, and in all four cases the
> following argument was added to the compiler flags:
>
>     -arch x86_64 i386 ppc
>
> This is bad for two reasons:
>
>   - I'm not trying to build a universal binary and all of my components
> are x86_64 only.
>
>   - `-arch x86_64 i386 ppc` isn't even a valid compiler flag. The proper
> thing to pass would be `-arch x86_64 -arch i386 -arch ppc`, so the compiler
> would error out even if I had the universal binaries to support a 3-way
> build.
>
> I've traced the offending flags to `dap-config` so it looks like this is
> an OpenDAP bug now, not a GDAL bug.
>
> Apologies for the noise.
>
>
> -Charlie
>


A final followup on this situation for anyone else who is trying to build
GDAL with libdap support on OS X.

The root cause of the problem came down to bad pkg-config files shipped
with OS X 10.6 and 10.5. When libdap builds, information on curl is
requested from `pkg-config` using the following:

    pkg-config --static --libs libcurl


On Snow Leopard, the default `libcurl.pc` file will return the following in
answer to the above query:

    -Wl,-weak-lldap -dynamic -arch x86_64 i386 ppc -Os -pipe -g0
-Wno-system-headers -Wl,-search_paths_first -Wl,-weak-lgssapi_krb5
-Wl,-weak-lkrb5 -Wl,-weak-lk5crypto -Wl,-weak-lcom_err -Wl,-weak-lresolv
-lcurl -lssl -lcrypto -lz


As you can see, this contains the string `-arch x86_64 i386 ppc` which is
both troublesome (forces universal binary builds when you don't want them)
and illegal (each architecture _must_ be proceeded by a new -arch flag).
The flags returned by `pkg-config` are also stored in the `dap-config`
script and from there they contamination spreads to other packages like
GDAL. The `libcurl.pc` file shipped with OS X 10.7 is much more sane and
does not suffer from these problems.


Solution:

When configuring libdap on Leopard or Snow Leopard, always pass
"--with-curl=/usr" if you want to build against the system curl. Providing
information on curl will cause the configure script to avoid querying
pkg-config and receiving bad flags.


Hope this helps anyone else who runs into this problem!

-Charlie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120420/9d31fd53/attachment.html
From warmerdam at pobox.com  Fri Apr 20 12:53:15 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 20 12:53:21 2012
Subject: [gdal-dev] Libgeotiff 1.4.0 Released
Message-ID: <CA+YzLBfPf7UH1-eEZpj=QjUJw774kZv=YFtg0ML8cOYWbKFAMg@mail.gmail.com>

Folks,

I am pleased to announce the release of libgeotiff 1.4.0.  There
are no changes since 1.4.0RC2.  This release includes:

 * An upgrade of EPSG support files to EPSG 7.9.
 * Support for Cylindrical Equal Area.
 * Fix for serious issues with false easting/northing units handling.
 * Added GeogTOWGS84 tag to hold TOWGS84 transforms (not
   part of the GeoTIFF Specification)
 * A variety of bug fixes, full details in the ChangeLog

Note that this release is binary *incompatible* with libgeotiff 1.3.0
due to changes in the layout of the public GTIFDefn structure.

  http://download.osgeo.org/geotiff/libgeotiff/libgeotiff-1.4.0.tar.gz
  http://download.osgeo.org/geotiff/libgeotiff/libgeotiff-1.4.0.zip

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From etourigny.dev at gmail.com  Fri Apr 20 13:06:01 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Apr 20 13:06:42 2012
Subject: [gdal-dev] Libgeotiff 1.4.0 Released
In-Reply-To: <CA+YzLBfPf7UH1-eEZpj=QjUJw774kZv=YFtg0ML8cOYWbKFAMg@mail.gmail.com>
References: <CA+YzLBfPf7UH1-eEZpj=QjUJw774kZv=YFtg0ML8cOYWbKFAMg@mail.gmail.com>
Message-ID: <CA+TxYvMd=SGGzXYx8GhgyLTQxaCgevfE5C5zG1JKY51t+-M+bQ@mail.gmail.com>

Frank - i believe that this version is also in gdal trunk right?

Etienne

On Fri, Apr 20, 2012 at 1:53 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Folks,
>
> I am pleased to announce the release of libgeotiff 1.4.0. ?There
> are no changes since 1.4.0RC2. ?This release includes:
>
> ?* An upgrade of EPSG support files to EPSG 7.9.
> ?* Support for Cylindrical Equal Area.
> ?* Fix for serious issues with false easting/northing units handling.
> ?* Added GeogTOWGS84 tag to hold TOWGS84 transforms (not
> ? part of the GeoTIFF Specification)
> ?* A variety of bug fixes, full details in the ChangeLog
>
> Note that this release is binary *incompatible* with libgeotiff 1.3.0
> due to changes in the layout of the public GTIFDefn structure.
>
> ?http://download.osgeo.org/geotiff/libgeotiff/libgeotiff-1.4.0.tar.gz
> ?http://download.osgeo.org/geotiff/libgeotiff/libgeotiff-1.4.0.zip
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From etourigny.dev at gmail.com  Fri Apr 20 13:08:12 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Apr 20 13:08:57 2012
Subject: [gdal-dev] Enabling DAP appears to disable several other formats
In-Reply-To: <CAMEX5szxJw33NAiy-oxB49aGtF3XmKF=HgCk1NE4cGuroyX+7w@mail.gmail.com>
References: <CAMEX5szGDYZpbwLgiD3v8TwhdDy+cxjvRW1TJHxtaV24YMw=Ug@mail.gmail.com>
	<CA+YzLBcKB3pPKnv3ECcjsoRmCJ8K2_bczC0sA2XmcvFjc8ZT_Q@mail.gmail.com>
	<CAMEX5szq+xATn_D7hZY3Ut+6_Qs-6cO2uuiq=CqRb8a6majGwg@mail.gmail.com>
	<CAMEX5szxJw33NAiy-oxB49aGtF3XmKF=HgCk1NE4cGuroyX+7w@mail.gmail.com>
Message-ID: <CA+TxYvN6ckCmxCYRro_TyVHLCi6iqjzTX_ADHHELk0O0rJjNxQ@mail.gmail.com>

can you please update the relevant wiki page?  All you need is an osgeo id

http://trac.osgeo.org/gdal/wiki/BuildingOnMac

Etienne

On Fri, Apr 20, 2012 at 1:51 PM, Charlie Sharpsteen
<chuck@sharpsteen.net> wrote:
> On Thu, Apr 19, 2012 at 6:48 PM, Charlie Sharpsteen <chuck@sharpsteen.net>
> wrote:
>>
>> On Thu, Apr 19, 2012 at 6:40 PM, Frank Warmerdam <warmerdam@pobox.com>
>> wrote:
>>>
>>> Charlie,
>>>
>>> The typical reason would be that adding opendap adds stuff into the
>>> libraries list that results in other "test links" failing. ?It would
>>> be helpful if you could file a bug and attach the config.log.
>>>
>>> Best regards,
>>> Frank
>>
>>
>> I looked through the config.log a little closer, and in all four cases the
>> following argument was added to the compiler flags:
>>
>> ? ? -arch x86_64 i386 ppc
>>
>> This is bad for two reasons:
>>
>> ? - I'm not trying to build a universal binary and all of my components
>> are x86_64 only.
>>
>> ? - `-arch x86_64 i386 ppc` isn't even a valid compiler flag. The proper
>> thing to pass would be `-arch x86_64 -arch i386 -arch ppc`, so the compiler
>> would error out even if I had the universal binaries to support a 3-way
>> build.
>>
>> I've traced the offending flags to `dap-config` so it looks like this is
>> an OpenDAP bug now, not a GDAL bug.
>>
>> Apologies for the noise.
>>
>>
>> -Charlie
>
>
>
> A final followup on this situation for anyone else who is trying to build
> GDAL with libdap support on OS X.
>
> The root cause of the problem came down to bad pkg-config files shipped with
> OS X 10.6 and 10.5. When libdap builds, information on curl is requested
> from `pkg-config` using the following:
>
> ? ? pkg-config --static --libs libcurl
>
>
> On Snow Leopard, the default `libcurl.pc` file will return the following in
> answer to the above query:
>
> ? ??-Wl,-weak-lldap -dynamic -arch x86_64 i386 ppc -Os -pipe -g0
> -Wno-system-headers -Wl,-search_paths_first -Wl,-weak-lgssapi_krb5
> -Wl,-weak-lkrb5 -Wl,-weak-lk5crypto -Wl,-weak-lcom_err -Wl,-weak-lresolv
> -lcurl -lssl -lcrypto -lz
>
>
> As you can see, this contains the string `-arch x86_64 i386 ppc` which is
> both troublesome (forces universal binary builds when you don't want them)
> and illegal (each architecture _must_ be proceeded by a new -arch flag). The
> flags returned by `pkg-config` are also stored in the `dap-config` script
> and from there they contamination spreads to other packages like GDAL. The
> `libcurl.pc` file shipped with OS X 10.7 is much more sane and does not
> suffer from these problems.
>
>
> Solution:
>
> When configuring libdap on Leopard or Snow Leopard, always pass
> "--with-curl=/usr" if you want to build against the system curl. Providing
> information on curl will cause the configure script to avoid querying
> pkg-config and?receiving?bad flags.
>
>
> Hope this helps anyone else who runs into this problem!
>
> -Charlie
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From SGONG at mdacorporation.com  Fri Apr 20 17:28:05 2012
From: SGONG at mdacorporation.com (Shawn Gong)
Date: Fri Apr 20 17:30:31 2012
Subject: [gdal-dev] gdal_translate alters NITF's metadata
In-Reply-To: <CA+YzLBfA6_fgA6tJ3Deksdh=ewmw9BebqU=bKf-u0wWRXu_cXQ@mail.gmail.com>
References: <33584A1DEF4341428D15C1273466D3230221E1AED9@EVSYVR1.ds.mda.ca>,
	<CA+YzLBfA6_fgA6tJ3Deksdh=ewmw9BebqU=bKf-u0wWRXu_cXQ@mail.gmail.com>
Message-ID: <33584A1DEF4341428D15C1273466D3230221E1AEDA@EVSYVR1.ds.mda.ca>

Thanks Frank.

We also find that NITFCreateCopy() doesn't copy the 4 corner GCPs, only the geotransform.
We'll take a look at your suggestion and report back.

Shawn
________________________________________
From: fwarmerdam@gmail.com [fwarmerdam@gmail.com] On Behalf Of Frank Warmerdam [warmerdam@pobox.com]
Sent: April 20, 2012 12:35 PM
To: Shawn Gong
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdal_translate alters NITF's metadata

Shawn,

I see the values you get for NITF_ISORCE and NITF_IDATIM
are the default ones in the NITF Create code.  Looking through
the NITFCreateCopy() code in nitfdataset.cpp, it only seems to
copy a few selective metadata items from the source dataset to be
creation options when creating the header of the new one.  ISORCE
and IDATIM are not amoung them.   I'm not sure why it is so selective.

I'd suggest we open up this loop to copy more header values:

/* -------------------------------------------------------------------- */
/*      Copy over other source metadata items as creation options       */
/*      that seem useful.                                               */
/* -------------------------------------------------------------------- */
     char **papszSrcMD = poSrcDS->GetMetadata();
    int iMD;

    for( iMD = 0; papszSrcMD && papszSrcMD[iMD]; iMD++ )
    {
        if( EQUALN(papszSrcMD[iMD],"NITF_BLOCKA",11)
            || EQUALN(papszSrcMD[iMD],"NITF_FHDR",9) )
        {
            char *pszName = NULL;
            const char *pszValue = CPLParseNameValue( papszSrcMD[iMD],
                                                      &pszName );
            if( CSLFetchNameValue( papszFullOptions, pszName+5 ) == NULL )
                papszFullOptions =
                    CSLSetNameValue( papszFullOptions, pszName+5, pszValue );
            CPLFree(pszName);
        }
    }

Perhaps you could prepare a patch and test it and then submit it?

Best regards,
Frank

On Fri, Apr 20, 2012 at 9:20 AM, Shawn Gong <SGONG@mdacorporation.com> wrote:
> Hi list,
>
> I use gdal 1.9.0
>
> I have a NITF image that has 12 bands. The first 8 are I and Q of a quad-pol complex.
> I ran "gdal_translate -of NITF -b 9 -b 12 -b 10 -b 11 pp1.NTF test" to get rid of them and keep the last 4 magnitude bands.
>
> However the NITF tags are altered, e.g. the NITF_ISORCE and NITF_IDATIM
>
> Have you seen this?
> I also see "Warning 1: FHDR=NITF02.1 not supported, switching to NITF02.10."  Can this be the cause?
>
> Thanks,
> Shawn
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
From even.rouault at mines-paris.org  Fri Apr 20 17:36:01 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr 20 17:34:18 2012
Subject: [gdal-dev] gdal_translate alters NITF's metadata
In-Reply-To: <33584A1DEF4341428D15C1273466D3230221E1AEDA@EVSYVR1.ds.mda.ca>
References: <33584A1DEF4341428D15C1273466D3230221E1AED9@EVSYVR1.ds.mda.ca>
	<CA+YzLBfA6_fgA6tJ3Deksdh=ewmw9BebqU=bKf-u0wWRXu_cXQ@mail.gmail.com>
	<33584A1DEF4341428D15C1273466D3230221E1AEDA@EVSYVR1.ds.mda.ca>
Message-ID: <201204202336.01529.even.rouault@mines-paris.org>

Le vendredi 20 avril 2012 23:28:05, Shawn Gong a ?crit :
> Thanks Frank.
> 
> We also find that NITFCreateCopy() doesn't copy the 4 corner GCPs, only the
> geotransform. We'll take a look at your suggestion and report back.

Support for copying GCPs has been added recently in trunk. See 
http://trac.osgeo.org/gdal/changeset/23997

> 
> Shawn
> ________________________________________
> From: fwarmerdam@gmail.com [fwarmerdam@gmail.com] On Behalf Of Frank
> Warmerdam [warmerdam@pobox.com] Sent: April 20, 2012 12:35 PM
> To: Shawn Gong
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] gdal_translate alters NITF's metadata
> 
> Shawn,
> 
> I see the values you get for NITF_ISORCE and NITF_IDATIM
> are the default ones in the NITF Create code.  Looking through
> the NITFCreateCopy() code in nitfdataset.cpp, it only seems to
> copy a few selective metadata items from the source dataset to be
> creation options when creating the header of the new one.  ISORCE
> and IDATIM are not amoung them.   I'm not sure why it is so selective.
> 
> I'd suggest we open up this loop to copy more header values:
> 
> /* -------------------------------------------------------------------- */
> /*      Copy over other source metadata items as creation options       */
> /*      that seem useful.                                               */
> /* -------------------------------------------------------------------- */
>      char **papszSrcMD = poSrcDS->GetMetadata();
>     int iMD;
> 
>     for( iMD = 0; papszSrcMD && papszSrcMD[iMD]; iMD++ )
>     {
>         if( EQUALN(papszSrcMD[iMD],"NITF_BLOCKA",11)
> 
>             || EQUALN(papszSrcMD[iMD],"NITF_FHDR",9) )
> 
>         {
>             char *pszName = NULL;
>             const char *pszValue = CPLParseNameValue( papszSrcMD[iMD],
>                                                       &pszName );
>             if( CSLFetchNameValue( papszFullOptions, pszName+5 ) == NULL )
>                 papszFullOptions =
>                     CSLSetNameValue( papszFullOptions, pszName+5, pszValue
> ); CPLFree(pszName);
>         }
>     }
> 
> Perhaps you could prepare a patch and test it and then submit it?
> 
> Best regards,
> Frank
> 
> On Fri, Apr 20, 2012 at 9:20 AM, Shawn Gong <SGONG@mdacorporation.com> 
wrote:
> > Hi list,
> > 
> > I use gdal 1.9.0
> > 
> > I have a NITF image that has 12 bands. The first 8 are I and Q of a
> > quad-pol complex. I ran "gdal_translate -of NITF -b 9 -b 12 -b 10 -b 11
> > pp1.NTF test" to get rid of them and keep the last 4 magnitude bands.
> > 
> > However the NITF tags are altered, e.g. the NITF_ISORCE and NITF_IDATIM
> > 
> > Have you seen this?
> > I also see "Warning 1: FHDR=NITF02.1 not supported, switching to
> > NITF02.10."  Can this be the cause?
> > 
> > Thanks,
> > Shawn
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> --
> ---------------------------------------+-----------------------------------
> --- I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com light and sound - activate the windows |
> http://pobox.com/~warmerdam and watch the world go round - Rush    |
> Geospatial Software
> Developer_______________________________________________ gdal-dev mailing
> list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From SGONG at mdacorporation.com  Fri Apr 20 22:23:51 2012
From: SGONG at mdacorporation.com (Shawn Gong)
Date: Fri Apr 20 22:24:43 2012
Subject: [gdal-dev] gdal_translate alters NITF's metadata
In-Reply-To: <201204202336.01529.even.rouault@mines-paris.org>
References: <33584A1DEF4341428D15C1273466D3230221E1AED9@EVSYVR1.ds.mda.ca>
	<CA+YzLBfA6_fgA6tJ3Deksdh=ewmw9BebqU=bKf-u0wWRXu_cXQ@mail.gmail.com>
	<33584A1DEF4341428D15C1273466D3230221E1AEDA@EVSYVR1.ds.mda.ca>,
	<201204202336.01529.even.rouault@mines-paris.org>
Message-ID: <33584A1DEF4341428D15C1273466D3230221E1AEDB@EVSYVR1.ds.mda.ca>

Thank you, Even.
Good to know that.

Shawn
________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: April 20, 2012 5:36 PM
To: gdal-dev@lists.osgeo.org
Cc: Shawn Gong; Frank Warmerdam
Subject: Re: [gdal-dev] gdal_translate alters NITF's metadata

Le vendredi 20 avril 2012 23:28:05, Shawn Gong a ?crit :
> Thanks Frank.
>
> We also find that NITFCreateCopy() doesn't copy the 4 corner GCPs, only the
> geotransform. We'll take a look at your suggestion and report back.

Support for copying GCPs has been added recently in trunk. See
http://trac.osgeo.org/gdal/changeset/23997

>
> Shawn
> ________________________________________
> From: fwarmerdam@gmail.com [fwarmerdam@gmail.com] On Behalf Of Frank
> Warmerdam [warmerdam@pobox.com] Sent: April 20, 2012 12:35 PM
> To: Shawn Gong
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] gdal_translate alters NITF's metadata
>
> Shawn,
>
> I see the values you get for NITF_ISORCE and NITF_IDATIM
> are the default ones in the NITF Create code.  Looking through
> the NITFCreateCopy() code in nitfdataset.cpp, it only seems to
> copy a few selective metadata items from the source dataset to be
> creation options when creating the header of the new one.  ISORCE
> and IDATIM are not amoung them.   I'm not sure why it is so selective.
>
> I'd suggest we open up this loop to copy more header values:
>
> /* -------------------------------------------------------------------- */
> /*      Copy over other source metadata items as creation options       */
> /*      that seem useful.                                               */
> /* -------------------------------------------------------------------- */
>      char **papszSrcMD = poSrcDS->GetMetadata();
>     int iMD;
>
>     for( iMD = 0; papszSrcMD && papszSrcMD[iMD]; iMD++ )
>     {
>         if( EQUALN(papszSrcMD[iMD],"NITF_BLOCKA",11)
>
>             || EQUALN(papszSrcMD[iMD],"NITF_FHDR",9) )
>
>         {
>             char *pszName = NULL;
>             const char *pszValue = CPLParseNameValue( papszSrcMD[iMD],
>                                                       &pszName );
>             if( CSLFetchNameValue( papszFullOptions, pszName+5 ) == NULL )
>                 papszFullOptions =
>                     CSLSetNameValue( papszFullOptions, pszName+5, pszValue
> ); CPLFree(pszName);
>         }
>     }
>
> Perhaps you could prepare a patch and test it and then submit it?
>
> Best regards,
> Frank
>
> On Fri, Apr 20, 2012 at 9:20 AM, Shawn Gong <SGONG@mdacorporation.com>
wrote:
> > Hi list,
> >
> > I use gdal 1.9.0
> >
> > I have a NITF image that has 12 bands. The first 8 are I and Q of a
> > quad-pol complex. I ran "gdal_translate -of NITF -b 9 -b 12 -b 10 -b 11
> > pp1.NTF test" to get rid of them and keep the last 4 magnitude bands.
> >
> > However the NITF tags are altered, e.g. the NITF_ISORCE and NITF_IDATIM
> >
> > Have you seen this?
> > I also see "Warning 1: FHDR=NITF02.1 not supported, switching to
> > NITF02.10."  Can this be the cause?
> >
> > Thanks,
> > Shawn
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> ---------------------------------------+-----------------------------------
> --- I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com light and sound - activate the windows |
> http://pobox.com/~warmerdam and watch the world go round - Rush    |
> Geospatial Software
> Developer_______________________________________________ gdal-dev mailing
> list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jukka.rahkonen at mmmtike.fi  Sat Apr 21 06:41:49 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat Apr 21 06:42:08 2012
Subject: [gdal-dev] Performance of reading large polygons with holes
References: <CA+YzLBfPf7UH1-eEZpj=QjUJw774kZv=YFtg0ML8cOYWbKFAMg@mail.gmail.com>
Message-ID: <loom.20120421T123601-663@post.gmane.org>

Hi,

Martin Davis started this thread on OpenJUMP-dev list
http://thread.gmane.org/gmane.comp.gis.jump.devel/11119
Perhaps someone would like to test how OGR performs with such data?
Link to dataset is mentioned in the discussion.

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Sat Apr 21 07:59:29 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr 21 07:57:34 2012
Subject: [gdal-dev] Performance of reading large polygons with holes
In-Reply-To: <loom.20120421T123601-663@post.gmane.org>
References: <CA+YzLBfPf7UH1-eEZpj=QjUJw774kZv=YFtg0ML8cOYWbKFAMg@mail.gmail.com>
	<loom.20120421T123601-663@post.gmane.org>
Message-ID: <201204211359.30255.even.rouault@mines-paris.org>

Le samedi 21 avril 2012 12:41:49, Jukka Rahkonen a ?crit :
> Hi,
> 
> Martin Davis started this thread on OpenJUMP-dev list
> http://thread.gmane.org/gmane.comp.gis.jump.devel/11119
> Perhaps someone would like to test how OGR performs with such data?
> Link to dataset is mentioned in the discussion.

I suppose that dataset you mention is : 
http://maps.cmparks.net/geoserver/metroparks/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=metroparks:tpi_1&outputFormat=SHAPE-
ZIP ?

If so, on my box, the whole shapefile (~ 390 MB for the .shp / ~1 million 
features) can be read in about 4 seconds with a simplified version of ogrinfo 
that just loops on all the features. The algorithm that assembles the rings of 
polygon shapes into polygons that conform to Simple Features has been pretty 
improved during the last years. It is in the 
OGRGeometryFactory::organizePolygons() method ( see 
http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrgeometryfactory.cpp#L1015 
) . For shapefiles, there's a shortcut that save a lot of computations w.r.t. 
the general algorithm, because the shapefile specification states that outer 
rings should be described clockwise , whereas inner rings should be described 
counter-clockwise.

> 
> -Jukka Rahkonen-
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Jukka.Rahkonen at mmmtike.fi  Sat Apr 21 08:24:06 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Sat Apr 21 08:24:47 2012
Subject: [gdal-dev] Performance of reading large polygons with holes
In-Reply-To: <201204211359.30255.even.rouault@mines-paris.org>
References: <CA+YzLBfPf7UH1-eEZpj=QjUJw774kZv=YFtg0ML8cOYWbKFAMg@mail.gmail.com>
	<loom.20120421T123601-663@post.gmane.org>,
	<201204211359.30255.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A6314B135@suutari.haapa.mmm.fi>

Even Rouault wrote:

> Le samedi 21 avril 2012 12:41:49, Jukka Rahkonen a ?crit :
>> Hi,
>>
>> Martin Davis started this thread on OpenJUMP-dev list
>> http://thread.gmane.org/gmane.comp.gis.jump.devel/11119
>> Perhaps someone would like to test how OGR performs with such data?
>> Link to dataset is mentioned in the discussion.

> I suppose that dataset you mention is :
> http://maps.cmparks.net/geoserver/metroparks/ows?service=WFS&version=1.0.0&request=GetFeature&>typeName=metroparks:tpi_1&outputFormat=SHAPE-
ZIP ?

Exactly.

> If so, on my box, the whole shapefile (~ 390 MB for the .shp / ~1 million
> features) can be read in about 4 seconds with a simplified version of ogrinfo
> that just loops on all the features. The algorithm that assembles the rings of
> polygon shapes into polygons that conform to Simple Features has been pretty
> improved during the last years. It is in the
> OGRGeometryFactory::organizePolygons() method ( see
> http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrgeometryfactory.cpp#L1015
> ) . For shapefiles, there's a shortcut that save a lot of computations w.r.t.
> the general algorithm, because the shapefile specification states that outer
> rings should be described clockwise , whereas inner rings should be described
> counter-clockwise.

Thus it is 4 seconds vs. 32 seconds measured by Martin. It is a considerable difference but perhaps Martin is not doing exactly the same thing.  Anyway, speed of OGR seems to be excellent.

-Jukka Rahkonen-
From warmerdam at pobox.com  Sat Apr 21 11:30:10 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Apr 21 11:30:18 2012
Subject: [gdal-dev] Libgeotiff 1.4.0 Released
In-Reply-To: <CA+TxYvMd=SGGzXYx8GhgyLTQxaCgevfE5C5zG1JKY51t+-M+bQ@mail.gmail.com>
References: <CA+YzLBfPf7UH1-eEZpj=QjUJw774kZv=YFtg0ML8cOYWbKFAMg@mail.gmail.com>
	<CA+TxYvMd=SGGzXYx8GhgyLTQxaCgevfE5C5zG1JKY51t+-M+bQ@mail.gmail.com>
Message-ID: <4F92D282.6030005@pobox.com>

On 12-04-20 10:06 AM, Etienne Tourigny wrote:
> Frank - i believe that this version is also in gdal trunk right?

Etienne,

Yes, gdal trunk generally tracks libgeotiff trunk and so GDAL 1.9 was
released with *essentially* the same as libgeotiff 1.4.0.  It is the fact
that GDAL tracks trunk for libgeotiff and libtiff that undermines my
resolve to actually push out releases for libtiff and libgeotiff.  :-)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From mateusz at loskot.net  Sat Apr 21 20:03:06 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Apr 21 20:03:55 2012
Subject: [gdal-dev] Proposing json-c update to pre-0.10
Message-ID: <CABUeae_agw3-K27=d1hE8yF-DCHoLYtT6RqsQf6vScP-yyTaxQ@mail.gmail.com>

Folks,

Currently, GDAL uses json-c 0.9 (with some GDAL-specific fixes).
The json-c development has progressed and numerous bugs has been fixed.

I wonder if I could update to json-c from its current Git master which
states the pre-0.10 version, it is: https://github.com/json-c

Comments?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From jukka.rahkonen at mmmtike.fi  Sun Apr 22 04:53:22 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun Apr 22 04:54:25 2012
Subject: [gdal-dev] Re: Performance of reading large polygons with holes
References: <CA+YzLBfPf7UH1-eEZpj=QjUJw774kZv=YFtg0ML8cOYWbKFAMg@mail.gmail.com>
	<loom.20120421T123601-663@post.gmane.org>,
	<201204211359.30255.even.rouault@mines-paris.org>
	<84446DEF76453C439E9E97E438E13A6314B135@suutari.haapa.mmm.fi>
Message-ID: <loom.20120422T105100-279@post.gmane.org>

Rahkonen Jukka <Jukka.Rahkonen <at> mmmtike.fi> writes:


> Thus it is 4 seconds vs. 32 seconds measured by Martin. It is a considerable
difference but perhaps Martin is
> not doing exactly the same thing.  Anyway, speed of OGR seems to be excellent.

I am acting as a man-in-a-middle and Martin writes now as follows:

"Since the claimed 4 s for OGR seems suspiciously fast, I played around
with some scenarios intended to ensure that OGR was actually reading and
constructing every geometry.  I eventually settle on computing the
maximum area of the polygons, since this was the simplest query I could
come up with that would guarantee building the polygons.  On the Java
side I used JEQL, since I could easily replicate this query, it's using
more or less the same shapefile code as OJ, and it was the source of the
32 s number I gave earlier.

The result suprised me:  OGR: ~40s, JEQL ~20s.

The details, in case anyone wants to retry this:

OGR:

ogrinfo -sql "select max(OGR_GEOM_AREA) from tpi_1" tpi_1.shp

Result:    max_OGR_GEOM_AREA (Real) = 68476900073.166

JEQL:

ShapefileReader t file: "tpi_1.shp";
t = select max(Geom.area(GEOMETRY)) from t;
Print t;

Result:

col0:Double
68476900073.13647
Run completed in 19.015 s

(Good to see that the areas are within 0.03 m^2!)

So either the OGR area routine is slow, or else the reader is pretty
smart and only builds geometries when it really has to.  On the JEQL
side, the read time of 32 s I quoted before was actually based on a
query which was computing the maximum number of points in the geometries
(again, to force reading the geometries, since JEQL uses lazy
evaluation). So for some reason counting the max number of points is
slow, which is peculiar. More research required to track down why that
is.  But I think the area-based result is valid."

-Jukka Rahkonen-





From even.rouault at mines-paris.org  Sun Apr 22 07:23:00 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 22 07:21:24 2012
Subject: [gdal-dev] Re: Performance of reading large polygons with holes
In-Reply-To: <loom.20120422T105100-279@post.gmane.org>
References: <CA+YzLBfPf7UH1-eEZpj=QjUJw774kZv=YFtg0ML8cOYWbKFAMg@mail.gmail.com>
	<84446DEF76453C439E9E97E438E13A6314B135@suutari.haapa.mmm.fi>
	<loom.20120422T105100-279@post.gmane.org>
Message-ID: <201204221323.01005.even.rouault@mines-paris.org>

Le dimanche 22 avril 2012 10:53:22, Jukka Rahkonen a ?crit :
> Rahkonen Jukka <Jukka.Rahkonen <at> mmmtike.fi> writes:
> > Thus it is 4 seconds vs. 32 seconds measured by Martin. It is a
> > considerable
> 
> difference but perhaps Martin is
> 
> > not doing exactly the same thing.  Anyway, speed of OGR seems to be
> > excellent.
> 
> I am acting as a man-in-a-middle and Martin writes now as follows:
> 
> "Since the claimed 4 s for OGR seems suspiciously fast, I played around
> with some scenarios intended to ensure that OGR was actually reading and
> constructing every geometry.  I eventually settle on computing the
> maximum area of the polygons, since this was the simplest query I could
> come up with that would guarantee building the polygons.  On the Java
> side I used JEQL, since I could easily replicate this query, it's using
> more or less the same shapefile code as OJ, and it was the source of the
> 32 s number I gave earlier.
> 
> The result suprised me:  OGR: ~40s, JEQL ~20s.
> 
> The details, in case anyone wants to retry this:
> 
> OGR:
> 
> ogrinfo -sql "select max(OGR_GEOM_AREA) from tpi_1" tpi_1.shp
> 
> Result:    max_OGR_GEOM_AREA (Real) = 68476900073.166
> 
> JEQL:
> 
> ShapefileReader t file: "tpi_1.shp";
> t = select max(Geom.area(GEOMETRY)) from t;
> Print t;
> 
> Result:
> 
> col0:Double
> 68476900073.13647
> Run completed in 19.015 s
> 
> (Good to see that the areas are within 0.03 m^2!)
> 
> So either the OGR area routine is slow, or else the reader is pretty
> smart and only builds geometries when it really has to.  On the JEQL
> side, the read time of 32 s I quoted before was actually based on a
> query which was computing the maximum number of points in the geometries
> (again, to force reading the geometries, since JEQL uses lazy
> evaluation). So for some reason counting the max number of points is
> slow, which is peculiar. More research required to track down why that
> is.  But I think the area-based result is valid."
> 

Hi,

Ok, this is interesting for several reasons :

1) Trying to run the 'ogrinfo -sql "select max(OGR_GEOM_AREA) from tpi_1" 
tpi_1.shp' showed that a badly written optimization in OGR 1.9.0 broke such a 
query. Now fixed per http://trac.osgeo.org/gdal/ticket/4633

2) Width GDAL trunk, 1.9, 1.8 and 1.7, I never get Martin's result. I always 
get :

  MAX_OGR_GEOM_AREA (Real) = 70726589354.8597

Reached on shape index = 289 (first shape is index = 0):

OGRFeature(tpi_1):289
  id (Real) = 904743.0000000000000000000000000000000
  gridcode (Real) = 4.0000000000000000000000000000000
  class_name (String) = Plains or Open Slopes

I though it could come from a compiler issue, but I get the same results with 
GCC 4.4.3 in debug and optimized mode,  and also with MSVC 2008

3) This runs in about ~ 5 seconds on all those versions on my machine (after 
several runs so that the I/O cache is hot)

OS: Ubuntu 10.04 64bit
CPU : Intel(R) Core(TM) i5 CPU 750  @ 2.67GHz
RAM : 4 GB

Best regards,

Even
From noura.salem.shamsi at gmail.com  Sun Apr 22 08:06:25 2012
From: noura.salem.shamsi at gmail.com (len lee)
Date: Sun Apr 22 08:07:01 2012
Subject: [gdal-dev] geoTiff to tiles
Message-ID: <CAJ2iEgwQWQmABOg4x=kZRuvz0izoQ-1L8GqR2qJrFc9CVqAj_Q@mail.gmail.com>

I am working with 2gb large geotiff image.I need convert the large geoTiff
to tiles (about 250x250 pixels) with c++ language;

i dont wanna read the whole geotiff file since it is gonna be real slow ..
i want to get the tiles according to geographic position and

i am not sure exactly how to do it or what sort of utilities i should use
within gdal;

I'm neither an expert on GeoTIFFs nor GDAL, and I greatly appreciate the
assistance!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120422/7867a3fa/attachment.html
From even.rouault at mines-paris.org  Sun Apr 22 08:12:19 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 22 08:10:55 2012
Subject: [gdal-dev] Re: Performance of reading large polygons with holes
In-Reply-To: <201204221323.01005.even.rouault@mines-paris.org>
References: <CA+YzLBfPf7UH1-eEZpj=QjUJw774kZv=YFtg0ML8cOYWbKFAMg@mail.gmail.com>
	<loom.20120422T105100-279@post.gmane.org>
	<201204221323.01005.even.rouault@mines-paris.org>
Message-ID: <201204221412.20023.even.rouault@mines-paris.org>

> Hi,
> 
> Ok, this is interesting for several reasons :
> 
> 1) Trying to run the 'ogrinfo -sql "select max(OGR_GEOM_AREA) from tpi_1"
> tpi_1.shp' showed that a badly written optimization in OGR 1.9.0 broke such
> a query. Now fixed per http://trac.osgeo.org/gdal/ticket/4633
> 
> 2) Width GDAL trunk, 1.9, 1.8 and 1.7, I never get Martin's result. I
> always get :
> 
>   MAX_OGR_GEOM_AREA (Real) = 70726589354.8597
> 
> Reached on shape index = 289 (first shape is index = 0):
> 
> OGRFeature(tpi_1):289
>   id (Real) = 904743.0000000000000000000000000000000
>   gridcode (Real) = 4.0000000000000000000000000000000
>   class_name (String) = Plains or Open Slopes
> 
> I though it could come from a compiler issue, but I get the same results
> with GCC 4.4.3 in debug and optimized mode,  and also with MSVC 2008
> 
> 3) This runs in about ~ 5 seconds on all those versions on my machine
> (after several runs so that the I/O cache is hot)
> 
> OS: Ubuntu 10.04 64bit
> CPU : Intel(R) Core(TM) i5 CPU 750  @ 2.67GHz
> RAM : 4 GB

I've just tried with http://tsusiatsoftware.net/jeql/files/jeql-0.11.zip and I 
get the following results :

time java -cp commons-
lang-2.6.jar:h2.jar:javaproj-1.0.6.jar:jcommon-1.0.16.jar:jeql-0.11.jar:jfreechart-1.0.13.jar:jts-1.12.jar:jtsio-1.12.jar:proj4j-0.1.0.jar:stax2-2.1.jar:stax-
api-1.0.1.jar:wstx-lgpl-3.2.7.jar -Xms256M -Xmx1024M jeql.JeqlCmd script.jql
col0:Double 
70726589354,85522

real	8m30.478s
user	8m29.480s
sys	0m0.530s

I've also inserted that shape into a Spatialite and PostGIS DB and they also 
return very close areas with their ST_Area() implementation.

So I'm not sure that Martin and I are working on the same shapefile...

Here is mine :

-rw-r--r--   1 even even  322589721 2012-04-21 06:52 tpi_1.dbf
-rw-r--r--   1 even even        893 2012-04-21 07:03 tpi_1.prj
-rw-r--r--   1 even even  389028108 2012-04-21 06:53 tpi_1.shp
-rw-r--r--   1 even even    8039716 2012-04-21 06:52 tpi_1.shx

$ md5sum tpi_1.shp
c50c502cae5b172e270dc02e8562c69c  tpi_1.shp


> 
> Best regards,
> 
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mateusz at loskot.net  Sun Apr 22 08:19:15 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Apr 22 08:20:01 2012
Subject: [gdal-dev] Request to Visual Studio 2008+ users
Message-ID: <CABUeae_38-qGX_41f-qriZJ=77=JG3qDW483zN1WNErL9e4TKg@mail.gmail.com>

Folks,

I'm looking for a but of assistance from GDAL hackers
who use Visual Studio 2008 or later.
I'd be thankful if someone could conduct the following test for me
against the current GDAL trunk:

0) Grab sources from GDAL from SVN trunk or *clean* the sources tree thoroughly,
so cpl_config.h as well as all intermediate, .obj and output binaries
are wiped out

1) Create nmake.local

2) Put the following 6 lines in nmake.local

!IFNDEF DEBUG
OPTFLAGS= $(CXX_ANALYZE_FLAGS) /nologo /MD /EHsc /Ox
/D_CRT_SECURE_NO_DEPRECATE /D_CRT_NONSTDC_NO_DEPRECATE /DNDEBUG
!ELSE
OPTFLAGS= $(CXX_ANALYZE_FLAGS) /nologo /MDd /EHsc /Zi
/D_CRT_SECURE_NO_DEPRECATE /D_CRT_NONSTDC_NO_DEPRECATE
/Fd$(GDAL_ROOT)\gdal$(VERSION).pdb /DDEBUG
!ENDIF

3) nmake /f makefile.vc MSVC_VER=XXXX DEBUG-1

where XXXX is 1500 (VS2008) or 1600 (VS2010).

4) Does GDAL build successfully for you?
If not, what errors are reported.

Thanks in advance!

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From mateusz at loskot.net  Sun Apr 22 08:20:50 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Apr 22 08:21:38 2012
Subject: [gdal-dev] Re: Request to Visual Studio 2008+ users
In-Reply-To: <CABUeae_38-qGX_41f-qriZJ=77=JG3qDW483zN1WNErL9e4TKg@mail.gmail.com>
References: <CABUeae_38-qGX_41f-qriZJ=77=JG3qDW483zN1WNErL9e4TKg@mail.gmail.com>
Message-ID: <CABUeae_HqzHhheTofo521vpG2eZM7rJV+VSmoDVXuOT5SM8j8A@mail.gmail.com>

On 22 April 2012 13:19, Mateusz Loskot <mateusz@loskot.net> wrote:
>
> 3) nmake /f makefile.vc MSVC_VER=XXXX DEBUG-1

Correction, s/-/=/ so the command reads

nmake /f makefile.vc MSVC_VER=XXXX DEBUG=1

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From even.rouault at mines-paris.org  Sun Apr 22 08:28:55 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 22 08:27:34 2012
Subject: [gdal-dev] Proposing json-c update to pre-0.10
In-Reply-To: <CABUeae_agw3-K27=d1hE8yF-DCHoLYtT6RqsQf6vScP-yyTaxQ@mail.gmail.com>
References: <CABUeae_agw3-K27=d1hE8yF-DCHoLYtT6RqsQf6vScP-yyTaxQ@mail.gmail.com>
Message-ID: <201204221428.55502.even.rouault@mines-paris.org>

Le dimanche 22 avril 2012 02:03:06, Mateusz Loskot a ?crit :
> Folks,
> 
> Currently, GDAL uses json-c 0.9 (with some GDAL-specific fixes).
> The json-c development has progressed and numerous bugs has been fixed.
> 
> I wonder if I could update to json-c from its current Git master which
> states the pre-0.10 version, it is: https://github.com/json-c
> 
> Comments?

Hi Mateusz,

No objections from me, but be careful in the merge not to loose GDAL's 
customizations. See 
http://trac.osgeo.org/gdal/log/trunk/gdal/ogr/ogrsf_frmts/geojson/jsonc

Best regards,

Even
From even.rouault at mines-paris.org  Sun Apr 22 09:19:55 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 22 09:18:05 2012
Subject: [gdal-dev] Re: Request to Visual Studio 2008+ users
In-Reply-To: <CABUeae_HqzHhheTofo521vpG2eZM7rJV+VSmoDVXuOT5SM8j8A@mail.gmail.com>
References: <CABUeae_38-qGX_41f-qriZJ=77=JG3qDW483zN1WNErL9e4TKg@mail.gmail.com>
	<CABUeae_HqzHhheTofo521vpG2eZM7rJV+VSmoDVXuOT5SM8j8A@mail.gmail.com>
Message-ID: <201204221519.55831.even.rouault@mines-paris.org>

Le dimanche 22 avril 2012 14:20:50, Mateusz Loskot a ?crit :
> On 22 April 2012 13:19, Mateusz Loskot <mateusz@loskot.net> wrote:
> > 3) nmake /f makefile.vc MSVC_VER=XXXX DEBUG-1
> 
> Correction, s/-/=/ so the command reads
> 
> nmake /f makefile.vc MSVC_VER=XXXX DEBUG=1

I just did your scenario with VS 2008 Express Edition and it builds just fine.

> 
> Best regards,
From mateusz at loskot.net  Sun Apr 22 09:23:41 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Apr 22 09:24:45 2012
Subject: [gdal-dev] Re: Request to Visual Studio 2008+ users
In-Reply-To: <201204221519.55831.even.rouault@mines-paris.org>
References: <CABUeae_38-qGX_41f-qriZJ=77=JG3qDW483zN1WNErL9e4TKg@mail.gmail.com>
	<CABUeae_HqzHhheTofo521vpG2eZM7rJV+VSmoDVXuOT5SM8j8A@mail.gmail.com>
	<201204221519.55831.even.rouault@mines-paris.org>
Message-ID: <CABUeae94ALFRnp=jVy-A8OZ8QbJtFwzpxnUta43KQYJC3ZxxoA@mail.gmail.com>

On 22 April 2012 14:19, Even Rouault <even.rouault@mines-paris.org> wrote:
> Le dimanche 22 avril 2012 14:20:50, Mateusz Loskot a ?crit :
>> On 22 April 2012 13:19, Mateusz Loskot <mateusz@loskot.net> wrote:
>> > 3) nmake /f makefile.vc MSVC_VER=XXXX DEBUG-1
>>
>> Correction, s/-/=/ so the command reads
>>
>> nmake /f makefile.vc MSVC_VER=XXXX DEBUG=1
>
> I just did your scenario with VS 2008 Express Edition and it builds just fine.

Thanks Even!

Could you please check if you have Windows SDK installed?
It is somewhere like ...\Microsoft SDKs\windows\v7.0a\

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From alexander.bruy at gmail.com  Sun Apr 22 09:24:38 2012
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Sun Apr 22 09:25:21 2012
Subject: [gdal-dev] Request to Visual Studio 2008+ users
In-Reply-To: <CABUeae_38-qGX_41f-qriZJ=77=JG3qDW483zN1WNErL9e4TKg@mail.gmail.com>
References: <CABUeae_38-qGX_41f-qriZJ=77=JG3qDW483zN1WNErL9e4TKg@mail.gmail.com>
Message-ID: <CALuHMPC7vB1x1_s3LDE7VJXfXyaaFahn9JKeg4Ngx2dpR2Yymw@mail.gmail.com>

Hi,

just finished compiling using your instructions and it compiles
fine

2012/4/22 Mateusz Loskot <mateusz@loskot.net>:
> Folks,
>
> I'm looking for a but of assistance from GDAL hackers
> who use Visual Studio 2008 or later.
> I'd be thankful if someone could conduct the following test for me
> against the current GDAL trunk:
>
> 0) Grab sources from GDAL from SVN trunk or *clean* the sources tree thoroughly,
> so cpl_config.h as well as all intermediate, .obj and output binaries
> are wiped out
>
> 1) Create nmake.local
>
> 2) Put the following 6 lines in nmake.local
>
> !IFNDEF DEBUG
> OPTFLAGS= $(CXX_ANALYZE_FLAGS) /nologo /MD /EHsc /Ox
> /D_CRT_SECURE_NO_DEPRECATE /D_CRT_NONSTDC_NO_DEPRECATE /DNDEBUG
> !ELSE
> OPTFLAGS= $(CXX_ANALYZE_FLAGS) /nologo /MDd /EHsc /Zi
> /D_CRT_SECURE_NO_DEPRECATE /D_CRT_NONSTDC_NO_DEPRECATE
> /Fd$(GDAL_ROOT)\gdal$(VERSION).pdb /DDEBUG
> !ENDIF
>
> 3) nmake /f makefile.vc MSVC_VER=XXXX DEBUG-1
>
> where XXXX is 1500 (VS2008) or 1600 (VS2010).
>
> 4) Does GDAL build successfully for you?
> If not, what errors are reported.
>
> Thanks in advance!
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net

-- 
Alexander Bruy
From mateusz at loskot.net  Sun Apr 22 09:25:33 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Apr 22 09:26:46 2012
Subject: [gdal-dev] Request to Visual Studio 2008+ users
In-Reply-To: <CALuHMPC7vB1x1_s3LDE7VJXfXyaaFahn9JKeg4Ngx2dpR2Yymw@mail.gmail.com>
References: <CABUeae_38-qGX_41f-qriZJ=77=JG3qDW483zN1WNErL9e4TKg@mail.gmail.com>
	<CALuHMPC7vB1x1_s3LDE7VJXfXyaaFahn9JKeg4Ngx2dpR2Yymw@mail.gmail.com>
Message-ID: <CABUeae8UnLqKZia3vMo-cNXGuKc_TT7+ok0msKW=emJ+8k43=Q@mail.gmail.com>

On 22 April 2012 14:24, Alexander Bruy <alexander.bruy@gmail.com> wrote:
> Hi,
>
> just finished compiling using your instructions and it compiles fine

Would you mine sharing details of Visual Studio version you use?
Thanks!

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From even.rouault at mines-paris.org  Sun Apr 22 09:30:08 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 22 09:28:52 2012
Subject: [gdal-dev] Re: Request to Visual Studio 2008+ users
In-Reply-To: <CABUeae94ALFRnp=jVy-A8OZ8QbJtFwzpxnUta43KQYJC3ZxxoA@mail.gmail.com>
References: <CABUeae_38-qGX_41f-qriZJ=77=JG3qDW483zN1WNErL9e4TKg@mail.gmail.com>
	<201204221519.55831.even.rouault@mines-paris.org>
	<CABUeae94ALFRnp=jVy-A8OZ8QbJtFwzpxnUta43KQYJC3ZxxoA@mail.gmail.com>
Message-ID: <201204221530.08791.even.rouault@mines-paris.org>

Le dimanche 22 avril 2012 15:23:41, Mateusz Loskot a ?crit :
> On 22 April 2012 14:19, Even Rouault <even.rouault@mines-paris.org> wrote:
> > Le dimanche 22 avril 2012 14:20:50, Mateusz Loskot a ?crit :
> >> On 22 April 2012 13:19, Mateusz Loskot <mateusz@loskot.net> wrote:
> >> > 3) nmake /f makefile.vc MSVC_VER=XXXX DEBUG-1
> >> 
> >> Correction, s/-/=/ so the command reads
> >> 
> >> nmake /f makefile.vc MSVC_VER=XXXX DEBUG=1
> > 
> > I just did your scenario with VS 2008 Express Edition and it builds just
> > fine.
> 
> Thanks Even!
> 
> Could you please check if you have Windows SDK installed?
> It is somewhere like ...\Microsoft SDKs\windows\v7.0a\

I've a c:\program files\Microsoft SDKs\windows\v6.0A\ 

> 
> Best regards,
From alexander.bruy at gmail.com  Sun Apr 22 11:15:11 2012
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Sun Apr 22 11:16:01 2012
Subject: [gdal-dev] Request to Visual Studio 2008+ users
In-Reply-To: <CABUeae8UnLqKZia3vMo-cNXGuKc_TT7+ok0msKW=emJ+8k43=Q@mail.gmail.com>
References: <CABUeae_38-qGX_41f-qriZJ=77=JG3qDW483zN1WNErL9e4TKg@mail.gmail.com>
	<CALuHMPC7vB1x1_s3LDE7VJXfXyaaFahn9JKeg4Ngx2dpR2Yymw@mail.gmail.com>
	<CABUeae8UnLqKZia3vMo-cNXGuKc_TT7+ok0msKW=emJ+8k43=Q@mail.gmail.com>
Message-ID: <CALuHMPAD+9nd3baMpRf9YOKMkL-N6c9Gsf2LdzPckmVgFYsG5g@mail.gmail.com>

2012/4/22 Mateusz Loskot <mateusz@loskot.net>:
> On 22 April 2012 14:24, Alexander Bruy <alexander.bruy@gmail.com> wrote:
>> Hi,
>>
>> just finished compiling using your instructions and it compiles fine
>
> Would you mine sharing details of Visual Studio version you use?
I use Microsoft Visual Studio 2008 Version 9.0.30729.1 SP (Express
Edition). Also I have Windows Server 2003 R2 Platform SDK installed.

-- 
Alexander Bruy
From jukka.rahkonen at mmmtike.fi  Mon Apr 23 02:10:45 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Apr 23 02:13:11 2012
Subject: [gdal-dev] Re: geoTiff to tiles
References: <CAJ2iEgwQWQmABOg4x=kZRuvz0izoQ-1L8GqR2qJrFc9CVqAj_Q@mail.gmail.com>
Message-ID: <loom.20120423T080939-988@post.gmane.org>

len lee <noura.salem.shamsi <at> gmail.com> writes:

> 
> I am working with 2gb large geotiff image.I need convert the large geoTiff to
tiles  (about 250x250 pixels) with c++ language;i dont wanna read the whole
geotiff file since it is gonna be real slow .. i want to get the tiles according
to geographic position and i am not sure exactly how to do it or what sort of
utilities i should use within gdal;I'm neither an expert on GeoTIFFs nor GDAL,
and I greatly appreciate the assistance!

Perhaps gdal2tiles could give you some inspiration
http://gdal.org/gdal2tiles.html

-Jukka Rahkonen-

From ajuvolkov at mail.ru  Mon Apr 23 02:40:07 2012
From: ajuvolkov at mail.ru (ajuvolkov)
Date: Mon Apr 23 02:40:37 2012
Subject: [gdal-dev] <MaskBand>...</MaskBand> Usage in vrt files.
Message-ID: <1335163207055-4909325.post@n6.nabble.com>

Hello. I can't find any information about the using mask bands in virtual
datasets of Gdal (*.vrt files).
I wan't to mask region in my source dataset.

For example, I have the Earth map in Plate Carree projection. Map resolution
is 1000x500 pixels. I want to define a valid area inside the rectangle: x =
400, y = 200, width = 100, height = 50, and reproject all map to another
projection. 
I found this article:
http://www.gdal.org/gdal_vrttut.html, that says that I should use the
<MaskBand> options.

I wrote a vrt file:

<VRTDataset rasterXSize="1000" rasterYSize="500">
   <SRS>GEOGCS[...]</SRS>
   <GeoTransform>...</GeoTransform>
   <VRTRasterBand dataType="Byte" band="1">
   ...
   </VRTRasterBand>
   <VRTRasterBand dataType="Byte" band="2">
   ...
   </VRTRasterBand>
   <VRTRasterBand dataType="Byte" band="3">
   ...
   </VRTRasterBand>
   <MaskBand>
    <VRTRasterBand dataType="Byte">
      <SimpleSource>
        <SourceFilename relativeToVRT="1">plate.png</SourceFilename>
        <SourceBand>mask,1</SourceBand>
        <SrcRect xOff="0" yOff="0" xSize="1000" ySize="500" />
        <DstRect xOff="0" yOff="0" xSize="1000" ySize="500" />
      </SimpleSource>
    </VRTRasterBand>
  </MaskBand>  
</VRTDataset>

What does it mean?:
<SrcRect xOff="0" yOff="0" xSize="1000" ySize="500" />
<DstRect xOff="0" yOff="0" xSize="1000" ySize="500" />

What I should past to this parameters? If I write 
<SrcRect xOff="400" yOff="200" xSize="100" ySize="50" />
I got unexpected results.


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/MaskBand-MaskBand-Usage-in-vrt-files-tp4909325p4909325.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jukka.rahkonen at mmmtike.fi  Mon Apr 23 03:36:04 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Apr 23 03:36:25 2012
Subject: [gdal-dev] Gdaltindex fails
Message-ID: <loom.20120423T092209-161@post.gmane.org>

Hi,

We moved orthophotos to a new file system and after that gdaltindex became very
unreliable, actually unusable. It may be a coincidence but old file system does
not exist any more and I cannot verify if problem is really due to the new file
storage.

What happens now is that only a part of tiff are added to the tileindex
shapefile. For the rest of tiffs I get mostly this kind of error messages
Unable to open 431204B.tif, skipping.
ERROR 4: `431209D.tif' not recognised as a supported file format.

Occasionally I get also lines like this
ERROR 1: TIFFFetchDirectory:431404B.tif: Can not read TIFF directory count
ERROR 1: TIFFReadDirectory:Failed to read directory at offset 110179622
Unable to open 431404B.tif, skipping.

Gdalinfo gives normal output from the failing image files and they are also
behaving well in WMS service.

I were using gdaltindex from FWTools 2.4.2 which I have been used some years for
this same purpose on the same server without troubles. Any advise about where to
look at the error and how to fix it?

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Mon Apr 23 04:09:52 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Apr 23 04:10:15 2012
Subject: [gdal-dev] Gdaltindex fails
In-Reply-To: <loom.20120423T092209-161@post.gmane.org>
References: <loom.20120423T092209-161@post.gmane.org>
Message-ID: <1335168592.4f950e5092dd9@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:

> Hi,
>
> We moved orthophotos to a new file system and after that gdaltindex became
> very
> unreliable, actually unusable. It may be a coincidence but old file system
> does
> not exist any more and I cannot verify if problem is really due to the new
> file
> storage.
>
> What happens now is that only a part of tiff are added to the tileindex
> shapefile. For the rest of tiffs I get mostly this kind of error messages
> Unable to open 431204B.tif, skipping.
> ERROR 4: `431209D.tif' not recognised as a supported file format.
>
> Occasionally I get also lines like this
> ERROR 1: TIFFFetchDirectory:431404B.tif: Can not read TIFF directory count
> ERROR 1: TIFFReadDirectory:Failed to read directory at offset 110179622
> Unable to open 431404B.tif, skipping.
>
> Gdalinfo gives normal output from the failing image files and they are also
> behaving well in WMS service.
>
> I were using gdaltindex from FWTools 2.4.2 which I have been used some years
> for
> this same purpose on the same server without troubles. Any advise about where
> to
> look at the error and how to fix it?

A bit weird that gdaltindex reports errors and not gdalinfo ? I assume you are
using FWTools for both ?

Anyway, FWTools 2.4.2 is obsolete, so I'd encourage you trying with a more
recent build.

>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From Jukka.Rahkonen at mmmtike.fi  Mon Apr 23 04:45:44 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Mon Apr 23 04:46:27 2012
Subject: [gdal-dev] Gdaltindex fails
In-Reply-To: <1335168592.4f950e5092dd9@imp.free.fr>
References: <loom.20120423T092209-161@post.gmane.org>
	<1335168592.4f950e5092dd9@imp.free.fr>
Message-ID: <84446DEF76453C439E9E97E438E13A6314B3B5@suutari.haapa.mmm.fi>

Even Rouault 

> Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:
> 
> > Hi,
> >
> > We moved orthophotos to a new file system and after that 
> gdaltindex became
> > very
> > unreliable, actually unusable. It may be a coincidence but 
> old file system
> > does
> > not exist any more and I cannot verify if problem is really 
> due to the new
> > file
> > storage.
> >
> > What happens now is that only a part of tiff are added to 
> the tileindex
> > shapefile. For the rest of tiffs I get mostly this kind of 
> error messages
> > Unable to open 431204B.tif, skipping.
> > ERROR 4: `431209D.tif' not recognised as a supported file format.
> >
> > Occasionally I get also lines like this
> > ERROR 1: TIFFFetchDirectory:431404B.tif: Can not read TIFF 
> directory count
> > ERROR 1: TIFFReadDirectory:Failed to read directory at 
> offset 110179622
> > Unable to open 431404B.tif, skipping.
> >
> > Gdalinfo gives normal output from the failing image files 
> and they are also
> > behaving well in WMS service.
> >
> > I were using gdaltindex from FWTools 2.4.2 which I have 
> been used some years
> > for
> > this same purpose on the same server without troubles. Any 
> advise about where
> > to
> > look at the error and how to fix it?
> 
> A bit weird that gdaltindex reports errors and not gdalinfo ? 
> I assume you are
> using FWTools for both ?
> 
> Anyway, FWTools 2.4.2 is obsolete, so I'd encourage you 
> trying with a more
> recent build.

I have bunch of scripts using that FWTools package (which does not have a big difference to the last one that exists, 2.4.7) and despite the disk units we have not changed anything. I still had a try with GDAL-dev from gisinternals, compiled at 4/23/2012 5:52 AM. Result is the same with lots of "not recognised as a supported file format" errors but gdalinfo giving a normal report of the same images. The server is running Windows 2003 Server but I do not know details of the new disk unit yet.

-Jukka-
From jr.morreale at enoreth.net  Mon Apr 23 09:55:26 2012
From: jr.morreale at enoreth.net (jr.morreale@enoreth.net)
Date: Mon Apr 23 10:01:09 2012
Subject: [gdal-dev] how to convert UInt16 Tiff
Message-ID: <91ddc3b54358e4e43febb6b06a2f74d0@enoreth.net>

Hi,

I've a few thousand aerial uncompressed tiff photography that I would 
like to convert to tiff with jpeg compression, unfortunatly I can't 
figure the right options to set to overcome the following error :

gdal_translate -of Gtiff -co "COMPRESS=JPEG" 
"D:\uncompressed_original.tif" "D:\tiff_jpeg_copy.tif"

ERROR 1: JPEGSetupEncode:BitsPerSample 16 not allowed for JPEG
ERROR 1: An error occured while writing a dirty block
ERROR 1: JPEGSetupEncode:BitsPerSample 16 not allowed for JPEG

I've tried to use -co NBITS without success (gdal 1.9), the output 
becomes a paletted file.

gdalinfo :

Driver: GTiff/GeoTIFF
Files: D:\uncompressed_original.tif
Size is 8159, 10092
[...]
Pixel Size = (0.250000000000000,-0.250000000000000)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=BAND
[...]
Band 1 Block=8159x1 Type=UInt16, ColorInterp=Gray

Regards,

MORREALE Jean-Roc
From even.rouault at mines-paris.org  Mon Apr 23 10:54:10 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Apr 23 10:54:55 2012
Subject: [gdal-dev] how to convert UInt16 Tiff
In-Reply-To: <91ddc3b54358e4e43febb6b06a2f74d0@enoreth.net>
References: <91ddc3b54358e4e43febb6b06a2f74d0@enoreth.net>
Message-ID: <1335192850.4f956d12385a6@imp.free.fr>

Selon jr.morreale@enoreth.net:

> Hi,
>
> I've a few thousand aerial uncompressed tiff photography that I would
> like to convert to tiff with jpeg compression, unfortunatly I can't
> figure the right options to set to overcome the following error :
>
> gdal_translate -of Gtiff -co "COMPRESS=JPEG"
> "D:\uncompressed_original.tif" "D:\tiff_jpeg_copy.tif"
>
> ERROR 1: JPEGSetupEncode:BitsPerSample 16 not allowed for JPEG
> ERROR 1: An error occured while writing a dirty block
> ERROR 1: JPEGSetupEncode:BitsPerSample 16 not allowed for JPEG
>
> I've tried to use -co NBITS without success (gdal 1.9), the output
> becomes a paletted file.

Did you try -co BITS=12 ? JPEG compression only supports 8 or 12 bits. (For 12
bit support, you must have a build of GDAL configured with its internal libtiff
and internal libjpeg compiled with 12 bit support)

>
> gdalinfo :
>
> Driver: GTiff/GeoTIFF
> Files: D:\uncompressed_original.tif
> Size is 8159, 10092
> [...]
> Pixel Size = (0.250000000000000,-0.250000000000000)
> Metadata:
>    AREA_OR_POINT=Area
> Image Structure Metadata:
>    INTERLEAVE=BAND
> [...]
> Band 1 Block=8159x1 Type=UInt16, ColorInterp=Gray
>
> Regards,
>
> MORREALE Jean-Roc
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From jluis at ualg.pt  Mon Apr 23 12:01:19 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Apr 23 12:01:52 2012
Subject: [gdal-dev] Request to Visual Studio 2008+ users
In-Reply-To: <CABUeae_38-qGX_41f-qriZJ=77=JG3qDW483zN1WNErL9e4TKg@mail.gmail.com>
References: <CABUeae_38-qGX_41f-qriZJ=77=JG3qDW483zN1WNErL9e4TKg@mail.gmail.com>
Message-ID: <4F957CCF.4050400@ualg.pt>

It also built fine with VS2010 (32 bits) but one need to put 
continuation characters on OPTFLAG= ...

Joaquim

> Folks,
>
> I'm looking for a but of assistance from GDAL hackers
> who use Visual Studio 2008 or later.
> I'd be thankful if someone could conduct the following test for me
> against the current GDAL trunk:
>
> 0) Grab sources from GDAL from SVN trunk or *clean* the sources tree thoroughly,
> so cpl_config.h as well as all intermediate, .obj and output binaries
> are wiped out
>
> 1) Create nmake.local
>
> 2) Put the following 6 lines in nmake.local
>
> !IFNDEF DEBUG
> OPTFLAGS= $(CXX_ANALYZE_FLAGS) /nologo /MD /EHsc /Ox
> /D_CRT_SECURE_NO_DEPRECATE /D_CRT_NONSTDC_NO_DEPRECATE /DNDEBUG
> !ELSE
> OPTFLAGS= $(CXX_ANALYZE_FLAGS) /nologo /MDd /EHsc /Zi
> /D_CRT_SECURE_NO_DEPRECATE /D_CRT_NONSTDC_NO_DEPRECATE
> /Fd$(GDAL_ROOT)\gdal$(VERSION).pdb /DDEBUG
> !ENDIF
>
> 3) nmake /f makefile.vc MSVC_VER=XXXX DEBUG-1
>
> where XXXX is 1500 (VS2008) or 1600 (VS2010).
>
> 4) Does GDAL build successfully for you?
> If not, what errors are reported.
>
> Thanks in advance!
>
> Best regards,

From woklist at kyngchaos.com  Mon Apr 23 12:09:11 2012
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Apr 23 12:10:05 2012
Subject: [gdal-dev] FID in a vrt
In-Reply-To: <A3C0F02B-03F3-42D0-92EB-F3E3490C4051@kyngchaos.com>
References: <A3C0F02B-03F3-42D0-92EB-F3E3490C4051@kyngchaos.com>
Message-ID: <2609611E-2817-4FE9-A014-51B6CBA7EC6D@kyngchaos.com>

Any ideas on how I can get this to work?  Or is it a limitation of the source csv format?

On Apr 17, 2012, at 12:47 PM, William Kyngesburye wrote:

> I'm having trouble getting the FID option to work in a vrt.  The help is not clear on how to do this.  I've tried
> 
> <FID>feature_id</FID>
> 
> and
> 
> <FID name="feature_id" />
> 
> but ogrinfo will not show the FID column info.
> 

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin


From jluis at ualg.pt  Mon Apr 23 12:19:16 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Apr 23 12:19:41 2012
Subject: [gdal-dev] Win build issues
Message-ID: <4F958104.8040406@ualg.pt>

Hi again,

A couple of weeks ago I referred to a problem building the Win version 
and at the end thought the problem was due to the WEBP driver. But now 
I'm getting the same type of errors with another driver and, ... one nuance

To remember, the errors are are of the type

LIBCMT.lib(dosmap.obj) : error LNK2005: __errno already defined in 
MSVCRT.lib(MSVCR100.dll)
LIBCMT.lib(crt0dat.obj) : error LNK2005: __initterm_e already defined in 
MSVCRT.lib(MSVCR100.dll)
LIBCMT.lib(crt0dat.obj) : error LNK2005: _exit already defined in 
MSVCRT.lib(MSVCR100.dll)

but now they occur when I build also with the poppler (0.19) driver, 
which uses a static lib (that's what CMake produces). I used to be able 
to build with this same configuration so something has changed that now 
causes this errors. But there is more. If I do a first build WITHOUT the 
poppler driver and than run the building again but switching on the the 
linking with the poppler driver the build process runs without any 
linking error.

Joaquim
From even.rouault at mines-paris.org  Mon Apr 23 12:28:07 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Apr 23 12:28:20 2012
Subject: [gdal-dev] Win build issues
In-Reply-To: <4F958104.8040406@ualg.pt>
References: <4F958104.8040406@ualg.pt>
Message-ID: <1335198487.4f958317f2d7a@imp.free.fr>

Selon Joaquim Luis <jluis@ualg.pt>:

> Hi again,
>
> A couple of weeks ago I referred to a problem building the Win version
> and at the end thought the problem was due to the WEBP driver. But now
> I'm getting the same type of errors with another driver and, ... one nuance
>
> To remember, the errors are are of the type
>
> LIBCMT.lib(dosmap.obj) : error LNK2005: __errno already defined in
> MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(crt0dat.obj) : error LNK2005: __initterm_e already defined in
> MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(crt0dat.obj) : error LNK2005: _exit already defined in
> MSVCRT.lib(MSVCR100.dll)
>
> but now they occur when I build also with the poppler (0.19) driver,
> which uses a static lib (that's what CMake produces). I used to be able
> to build with this same configuration so something has changed that now
> causes this errors. But there is more. If I do a first build WITHOUT the
> poppler driver and than run the building again but switching on the the
> linking with the poppler driver the build process runs without any
> linking error.

Hum, I have had similar error messages yesterday in a VS 2008 Express with
various third libraries configured. I finally solved them by changing the
LINKER_FLAGS in nmake.opt to

LINKER_FLAGS = /NODEFAULTLIB:LIBCMT

I'm not sure why this is necessary. I found that workaround by seaching on the
Net and this came up. I suspect indeed that it is due to some static build of a
third party lib that contains a version of the standard library. Might not be a
very safe option though.

>
> Joaquim
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From jmckenna at gatewaygeomatics.com  Mon Apr 23 12:51:05 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon Apr 23 12:58:37 2012
Subject: [gdal-dev] Win build issues
In-Reply-To: <4F958104.8040406@ualg.pt>
References: <4F958104.8040406@ualg.pt>
Message-ID: <4F958879.2050607@gatewaygeomatics.com>

On 12-04-23 1:19 PM, Joaquim Luis wrote:
> Hi again,
> 
> A couple of weeks ago I referred to a problem building the Win version
> and at the end thought the problem was due to the WEBP driver. But now
> I'm getting the same type of errors with another driver and, ... one nuance
> 
> To remember, the errors are are of the type
> 
> LIBCMT.lib(dosmap.obj) : error LNK2005: __errno already defined in
> MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(crt0dat.obj) : error LNK2005: __initterm_e already defined in
> MSVCRT.lib(MSVCR100.dll)
> LIBCMT.lib(crt0dat.obj) : error LNK2005: _exit already defined in
> MSVCRT.lib(MSVCR100.dll)
> 
> but now they occur when I build also with the poppler (0.19) driver,
> which uses a static lib (that's what CMake produces). I used to be able
> to build with this same configuration so something has changed that now
> causes this errors. But there is more. If I do a first build WITHOUT the
> poppler driver and than run the building again but switching on the the
> linking with the poppler driver the build process runs without any
> linking error.

Hello Joaquim,

Yes in fact I did reply regarding this issue earlier to you on this
list.  I did suggest the way to solve this.  (and yes I've used the way
around this error that Even suggested, but I really don't recommend
this, as soon you'll keep adding more drivers with different compile
options that I mentioned in my previous post).

/me someone who's been in this situation many times before

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From jluis at ualg.pt  Mon Apr 23 13:03:12 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Apr 23 13:03:38 2012
Subject: [gdal-dev] Win build issues
In-Reply-To: <1335198487.4f958317f2d7a@imp.free.fr>
References: <4F958104.8040406@ualg.pt> <1335198487.4f958317f2d7a@imp.free.fr>
Message-ID: <4F958B50.8000604@ualg.pt>

On 23-04-2012 17:28, Even Rouault wrote:
> Selon Joaquim Luis<jluis@ualg.pt>:
>
>> Hi again,
>>
>> A couple of weeks ago I referred to a problem building the Win version
>> and at the end thought the problem was due to the WEBP driver. But now
>> I'm getting the same type of errors with another driver and, ... one nuance
>>
>> To remember, the errors are are of the type
>>
>> LIBCMT.lib(dosmap.obj) : error LNK2005: __errno already defined in
>> MSVCRT.lib(MSVCR100.dll)
>> LIBCMT.lib(crt0dat.obj) : error LNK2005: __initterm_e already defined in
>> MSVCRT.lib(MSVCR100.dll)
>> LIBCMT.lib(crt0dat.obj) : error LNK2005: _exit already defined in
>> MSVCRT.lib(MSVCR100.dll)
>>
>> but now they occur when I build also with the poppler (0.19) driver,
>> which uses a static lib (that's what CMake produces). I used to be able
>> to build with this same configuration so something has changed that now
>> causes this errors. But there is more. If I do a first build WITHOUT the
>> poppler driver and than run the building again but switching on the the
>> linking with the poppler driver the build process runs without any
>> linking error.
> Hum, I have had similar error messages yesterday in a VS 2008 Express with
> various third libraries configured. I finally solved them by changing the
> LINKER_FLAGS in nmake.opt to
>
> LINKER_FLAGS = /NODEFAULTLIB:LIBCMT
>
> I'm not sure why this is necessary. I found that workaround by seaching on the
> Net and this came up. I suspect indeed that it is due to some static build of a
> third party lib that contains a version of the standard library. Might not be a
> very safe option though.
Thanks, Even

Indeed that solved the linking issue, but while I am at this I have to refer to still another problem.
For quite some time that build the mrsid driver (Geo_DSDK-7.0.0.2167) but now it errors with.

However, shouldn't it be trying to link against lti_dsdk_dll.lib instead of lti_dsdk.lib?
Again it seams be a 'static' thing that is coming in the way.


lti_dsdk.lib(MrSIDEncrypt.obj) : error LNK2019: unresolved external symbol "__declspec(dllimport) public: class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char>  >::const_iterator __thiscall std::basic_string<char,struct std::char_traits<char>,class std::allocator<char>  >::end(void)const " (__imp_?end@?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QBE?AVconst_iterator@12@XZ) referenced in function "public: static bool __cdecl
LizardTech::MrSIDEncrypt::keyMatchesLock(char const *,class LizardTech::Encryption const&)" (?keyMatchesLock@MrSIDEncrypt@LizardTech@@SA_NPBDABVEncryption@2@@Z)


From jluis at ualg.pt  Mon Apr 23 13:16:54 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon Apr 23 13:17:11 2012
Subject: [gdal-dev] Win build issues
In-Reply-To: <4F958B50.8000604@ualg.pt>
References: <4F958104.8040406@ualg.pt> <1335198487.4f958317f2d7a@imp.free.fr>
	<4F958B50.8000604@ualg.pt>
Message-ID: <4F958E86.9030007@ualg.pt>


> Indeed that solved the linking issue, but while I am at this I have to 
> refer to still another problem.
> For quite some time that build the mrsid driver (Geo_DSDK-7.0.0.2167) 
> but now it errors with.
>
> However, shouldn't it be trying to link against lti_dsdk_dll.lib 
> instead of lti_dsdk.lib?
> Again it seams be a 'static' thing that is coming in the way.
>
>
> lti_dsdk.lib(MrSIDEncrypt.obj) : error LNK2019: unresolved external 
> symbol "__declspec(dllimport) public: class 
> std::basic_string<char,struct std::char_traits<char>,class 
> std::allocator<char> >::const_iterator __thiscall 
> std::basic_string<char,struct std::char_traits<char>,class 
> std::allocator<char> >::end(void)const " 
> (__imp_?end@?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QBE?AVconst_iterator@12@XZ) 
> referenced in function "public: static bool __cdecl
> LizardTech::MrSIDEncrypt::keyMatchesLock(char const *,class 
> LizardTech::Encryption const&)" 
> (?keyMatchesLock@MrSIDEncrypt@LizardTech@@SA_NPBDABVEncryption@2@@Z)
>

For the record, after adding
MRSID_RDLLBUILD = YES
to nmake.opt it built fine again

From warmerdam at pobox.com  Mon Apr 23 13:20:02 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Apr 23 13:20:29 2012
Subject: [gdal-dev] FID in a vrt
In-Reply-To: <2609611E-2817-4FE9-A014-51B6CBA7EC6D@kyngchaos.com>
References: <A3C0F02B-03F3-42D0-92EB-F3E3490C4051@kyngchaos.com>
	<2609611E-2817-4FE9-A014-51B6CBA7EC6D@kyngchaos.com>
Message-ID: <CA+YzLBcr2MntsvDEhFNdU-SG7NuURqV-bdMNWTvkzOr1a0ajPA@mail.gmail.com>

William,

The correct formlation appears to be:

  <FID>Fieldname</FID>

There are a few examples in:

  autotest/ogr/data/vrt_test.vrt

Given that you already seem to have tried this I don't know why it
isn't working.  If you can construct a simple case and file a ticket
it could perhaps be investigated.

Best regards,
Frank

On Mon, Apr 23, 2012 at 9:09 AM, William Kyngesburye
<woklist@kyngchaos.com> wrote:
> Any ideas on how I can get this to work? ?Or is it a limitation of the source csv format?
>
> On Apr 17, 2012, at 12:47 PM, William Kyngesburye wrote:
>
>> I'm having trouble getting the FID option to work in a vrt. ?The help is not clear on how to do this. ?I've tried
>>
>> <FID>feature_id</FID>
>>
>> and
>>
>> <FID name="feature_id" />
>>
>> but ogrinfo will not show the FID column info.
>>
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "I ache, therefore I am. ?Or in my case - I am, therefore I ache."
>
> - Marvin
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From mateusz at loskot.net  Mon Apr 23 13:35:45 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Apr 23 13:36:42 2012
Subject: [gdal-dev] Win build issues
In-Reply-To: <4F958E86.9030007@ualg.pt>
References: <4F958104.8040406@ualg.pt> <1335198487.4f958317f2d7a@imp.free.fr>
	<4F958B50.8000604@ualg.pt> <4F958E86.9030007@ualg.pt>
Message-ID: <CABUeae8pwJzDWmsr05ppqWd3iHFUXusp37n4Egq8d2SzwDRMzQ@mail.gmail.com>

On 23 April 2012 18:16, Joaquim Luis <jluis@ualg.pt> wrote:
>> However, shouldn't it be trying to link against lti_dsdk_dll.lib instead
>> of lti_dsdk.lib?
>> Again it seams be a 'static' thing that is coming in the way.
>>
>>
>> lti_dsdk.lib(MrSIDEncrypt.obj) : error LNK2019: unresolved external symbol
>> "__declspec(dllimport) public: class std::basic_string<char,struct
>> std::char_traits<char>,class std::allocator<char> >::const_iterator
>> __thiscall std::basic_string<char,struct std::char_traits<char>,class
>> std::allocator<char> >::end(void)const "
>> (__imp_?end@?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QBE?AVconst_iterator@12@XZ)
>> referenced in function "public: static bool __cdecl
>> LizardTech::MrSIDEncrypt::keyMatchesLock(char const *,class
>> LizardTech::Encryption const&)"
>> (?keyMatchesLock@MrSIDEncrypt@LizardTech@@SA_NPBDABVEncryption@2@@Z)
>>
>
> For the record, after adding
> MRSID_RDLLBUILD = YES
> to nmake.opt it built fine again

The Wiki might be worth updating then

http://trac.osgeo.org/gdal/wiki/MrSID

Best regards,,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From even.rouault at mines-paris.org  Mon Apr 23 14:46:45 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Apr 23 14:44:31 2012
Subject: [gdal-dev] Win build issues
In-Reply-To: <4F958E86.9030007@ualg.pt>
References: <4F958104.8040406@ualg.pt> <4F958B50.8000604@ualg.pt>
	<4F958E86.9030007@ualg.pt>
Message-ID: <201204232046.46237.even.rouault@mines-paris.org>

Le lundi 23 avril 2012 19:16:54, Joaquim Luis a ?crit :
> > Indeed that solved the linking issue, but while I am at this I have to
> > refer to still another problem.
> > For quite some time that build the mrsid driver (Geo_DSDK-7.0.0.2167)
> > but now it errors with.
> > 
> > However, shouldn't it be trying to link against lti_dsdk_dll.lib
> > instead of lti_dsdk.lib?
> > Again it seams be a 'static' thing that is coming in the way.
> > 
> > 
> > lti_dsdk.lib(MrSIDEncrypt.obj) : error LNK2019: unresolved external
> > symbol "__declspec(dllimport) public: class
> > std::basic_string<char,struct std::char_traits<char>,class
> > std::allocator<char> >::const_iterator __thiscall
> > std::basic_string<char,struct std::char_traits<char>,class
> > std::allocator<char> >::end(void)const "
> > (__imp_?end@?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@
> > QBE?AVconst_iterator@12@XZ) referenced in function "public: static bool
> > __cdecl
> > LizardTech::MrSIDEncrypt::keyMatchesLock(char const *,class
> > LizardTech::Encryption const&)"
> > (?keyMatchesLock@MrSIDEncrypt@LizardTech@@SA_NPBDABVEncryption@2@@Z)
> 
> For the record, after adding
> MRSID_RDLLBUILD = YES
> to nmake.opt it built fine again

frmts/mrsid/nmake.opt says that :

#   MRSID_RDLLBUILD=(YES|NO) - Some versions of the MrSID SDK shipped with
#      both static and dynamic libraries.  Use this macro to choose between
#      static and dynamic linkage for the Raster SDK, if both are available.
#      By default, your SDK will be inspected and the appropriate library
#      used, with a preference for the DLL if both are found.

So you shouldn't have to explicitely set it. CC'ing Kirk that might have some 
clues of why it was necessary for you to define that.

From woklist at kyngchaos.com  Mon Apr 23 21:18:04 2012
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon Apr 23 21:18:46 2012
Subject: [gdal-dev] FID in a vrt
In-Reply-To: <CA+YzLBcr2MntsvDEhFNdU-SG7NuURqV-bdMNWTvkzOr1a0ajPA@mail.gmail.com>
References: <A3C0F02B-03F3-42D0-92EB-F3E3490C4051@kyngchaos.com>
	<2609611E-2817-4FE9-A014-51B6CBA7EC6D@kyngchaos.com>
	<CA+YzLBcr2MntsvDEhFNdU-SG7NuURqV-bdMNWTvkzOr1a0ajPA@mail.gmail.com>
Message-ID: <ABFC1450-DFAD-4F21-8B02-358B4589B00B@kyngchaos.com>

As I worked on a test case and fiddled around with a few other ideas, I think I found the error of my ways.

The computer I was doing the conversion from vrt to PostGIS has GDAL 1.8.  In my test case, GDAL 1.9 correctly preserves the FIDs.  Was -preserve_fid broken in 1.8?  I see the option listed in the help for 1.8, but not described (it is described in the 1.9 help).

But, neither version reports the FID column info on a vrt.  Though it does on the PostGIS table.

On Apr 23, 2012, at 12:20 PM, Frank Warmerdam wrote:

> William,
> 
> The correct formlation appears to be:
> 
>  <FID>Fieldname</FID>
> 
> There are a few examples in:
> 
>  autotest/ogr/data/vrt_test.vrt
> 
> Given that you already seem to have tried this I don't know why it
> isn't working.  If you can construct a simple case and file a ticket
> it could perhaps be investigated.
> 
> Best regards,
> Frank
> 
> On Mon, Apr 23, 2012 at 9:09 AM, William Kyngesburye
> <woklist@kyngchaos.com> wrote:
>> Any ideas on how I can get this to work?  Or is it a limitation of the source csv format?
>> 
>> On Apr 17, 2012, at 12:47 PM, William Kyngesburye wrote:
>> 
>>> I'm having trouble getting the FID option to work in a vrt.  The help is not clear on how to do this.  I've tried
>>> 
>>> <FID>feature_id</FID>
>>> 
>>> and
>>> 
>>> <FID name="feature_id" />
>>> 
>>> but ogrinfo will not show the FID column info.
>>> 
>> 
>> -----
>> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>> http://www.kyngchaos.com/
>> 
>> "I ache, therefore I am.  Or in my case - I am, therefore I ache."
>> 
>> - Marvin
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying, fighting, and all for things that the beasts of the jungle would not deign to possess - money to purchase the effeminate pleasures of weaklings.  And yet withal bound down by silly customs that make them slaves to their unhappy lot while firm in the belief that they be the lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From jr.morreale at enoreth.net  Tue Apr 24 02:35:09 2012
From: jr.morreale at enoreth.net (jr.morreale@enoreth.net)
Date: Tue Apr 24 02:35:45 2012
Subject: [gdal-dev] how to convert UInt16 Tiff
In-Reply-To: <1335192850.4f956d12385a6@imp.free.fr>
References: <91ddc3b54358e4e43febb6b06a2f74d0@enoreth.net>
	<1335192850.4f956d12385a6@imp.free.fr>
Message-ID: <380606cf3843abb31b9027b185655340@enoreth.net>

On Mon, 23 Apr 2012 16:54:10 +0200, Even Rouault wrote:
> Selon jr.morreale@enoreth.net:
>
>> Hi,
>>
>> I've a few thousand aerial uncompressed tiff photography that I 
>> would
>> like to convert to tiff with jpeg compression, unfortunatly I can't
>> figure the right options to set to overcome the following error :
>>
>> gdal_translate -of Gtiff -co "COMPRESS=JPEG"
>> "D:\uncompressed_original.tif" "D:\tiff_jpeg_copy.tif"
>>
>> ERROR 1: JPEGSetupEncode:BitsPerSample 16 not allowed for JPEG
>> ERROR 1: An error occured while writing a dirty block
>> ERROR 1: JPEGSetupEncode:BitsPerSample 16 not allowed for JPEG
>>
>> I've tried to use -co NBITS without success (gdal 1.9), the output
>> becomes a paletted file.
>
> Did you try -co BITS=12 ? JPEG compression only supports 8 or 12
> bits. (For 12
> bit support, you must have a build of GDAL configured with its
> internal libtiff
> and internal libjpeg compiled with 12 bit support)

thanks for the reply, I did try with NBITS=8 and 12 with osgeo4w's gdal 
and tamas' nightly build but the output results are incorrect

Here is a sample file (93Mo) :
http://dl.free.fr/iFT4hH3Yj

I'll try to rebuild gdal on my linux box with the internal libs
From even.rouault at mines-paris.org  Tue Apr 24 03:32:06 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 24 03:32:35 2012
Subject: [gdal-dev] FID in a vrt
In-Reply-To: <ABFC1450-DFAD-4F21-8B02-358B4589B00B@kyngchaos.com>
References: <A3C0F02B-03F3-42D0-92EB-F3E3490C4051@kyngchaos.com>
	<2609611E-2817-4FE9-A014-51B6CBA7EC6D@kyngchaos.com>
	<CA+YzLBcr2MntsvDEhFNdU-SG7NuURqV-bdMNWTvkzOr1a0ajPA@mail.gmail.com>
	<ABFC1450-DFAD-4F21-8B02-358B4589B00B@kyngchaos.com>
Message-ID: <1335252726.4f9656f6989d5@imp.free.fr>

Selon William Kyngesburye <woklist@kyngchaos.com>:

> As I worked on a test case and fiddled around with a few other ideas, I think
> I found the error of my ways.
>
> The computer I was doing the conversion from vrt to PostGIS has GDAL 1.8.  In
> my test case, GDAL 1.9 correctly preserves the FIDs.  Was -preserve_fid
> broken in 1.8?

Not that I'm aware of. -preserve_fid job is pretty stupid. I'd bet more on a
difference in another place, perhaps in the VRT driver.

>  I see the option listed in the help for 1.8, but not
> described (it is described in the 1.9 help).
>
> But, neither version reports the FID column info on a vrt.  Though it does on
> the PostGIS table.

Ah ok, I see what you mean. The VRT driver does not currently report that it
does use the source FID if it is specified. It is a matter of implementing the
GetFIDColumn() method. Would you mind opening a ticket about that ?
From even.rouault at mines-paris.org  Tue Apr 24 03:38:44 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 24 03:39:35 2012
Subject: [gdal-dev] how to convert UInt16 Tiff
In-Reply-To: <380606cf3843abb31b9027b185655340@enoreth.net>
References: <91ddc3b54358e4e43febb6b06a2f74d0@enoreth.net>
	<1335192850.4f956d12385a6@imp.free.fr>
	<380606cf3843abb31b9027b185655340@enoreth.net>
Message-ID: <1335253124.4f965884834b1@imp.free.fr>

>
> thanks for the reply, I did try with NBITS=8 and 12 with osgeo4w's gdal
> and tamas' nightly build but the output results are incorrect
>
> Here is a sample file (93Mo) :
> http://dl.free.fr/iFT4hH3Yj
>
> I'll try to rebuild gdal on my linux box with the internal libs

I haven't looked at your result image, but you cannot just specify NBITS=8 or
12, if the range of the values in the original file is full 16 bits.

You need to rescale the values, otherwise they will get clamped to [0, 255] or
[0, 4096].

So you can look for the min/max reported by gdalinfo -mm
uncompressed_original.tif

and then try :

gdal_translate -co "COMPRESS=JPEG" uncompressed_original.tif compressed.tif
-scale min max 0 255 -ot Byte

or

gdal_translate -co "COMPRESS=JPEG" uncompressed_original.tif compressed.tif
-scale min max 0 4095 -co NBITS=12

From jr.morreale at enoreth.net  Tue Apr 24 04:53:00 2012
From: jr.morreale at enoreth.net (jr.morreale@enoreth.net)
Date: Tue Apr 24 04:53:33 2012
Subject: [gdal-dev] how to convert UInt16 Tiff
In-Reply-To: <1335253124.4f965884834b1@imp.free.fr>
References: <91ddc3b54358e4e43febb6b06a2f74d0@enoreth.net>
	<1335192850.4f956d12385a6@imp.free.fr>
	<380606cf3843abb31b9027b185655340@enoreth.net>
	<1335253124.4f965884834b1@imp.free.fr>
Message-ID: <d838afbd7b4ce7a5f51befaffaec9907@enoreth.net>

On Tue, 24 Apr 2012 09:38:44 +0200, Even Rouault wrote:
>>
>> thanks for the reply, I did try with NBITS=8 and 12 with osgeo4w's 
>> gdal
>> and tamas' nightly build but the output results are incorrect
>>
>> Here is a sample file (93Mo) :
>> http://dl.free.fr/iFT4hH3Yj
>>
>> I'll try to rebuild gdal on my linux box with the internal libs
>
> I haven't looked at your result image, but you cannot just specify 
> NBITS=8 or
> 12, if the range of the values in the original file is full 16 bits.
>
> You need to rescale the values, otherwise they will get clamped to
> [0, 255] or
> [0, 4096].
>
> So you can look for the min/max reported by gdalinfo -mm
> uncompressed_original.tif
>
> and then try :
>
> gdal_translate -co "COMPRESS=JPEG" uncompressed_original.tif 
> compressed.tif
> -scale min max 0 255 -ot Byte
>
> or
>
> gdal_translate -co "COMPRESS=JPEG" uncompressed_original.tif 
> compressed.tif
> -scale min max 0 4095 -co NBITS=12

Thanks, I didn't knew that !

The man says that you can omit the input min max scale so gdal computes 
it for each source, however I can't find how to write that correctly
From even.rouault at mines-paris.org  Tue Apr 24 05:05:50 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Apr 24 05:06:17 2012
Subject: [gdal-dev] how to convert UInt16 Tiff
In-Reply-To: <d838afbd7b4ce7a5f51befaffaec9907@enoreth.net>
References: <91ddc3b54358e4e43febb6b06a2f74d0@enoreth.net>
	<1335192850.4f956d12385a6@imp.free.fr>
	<380606cf3843abb31b9027b185655340@enoreth.net>
	<1335253124.4f965884834b1@imp.free.fr>
	<d838afbd7b4ce7a5f51befaffaec9907@enoreth.net>
Message-ID: <1335258350.4f966ceea3536@imp.free.fr>

Selon jr.morreale@enoreth.net:

> On Tue, 24 Apr 2012 09:38:44 +0200, Even Rouault wrote:
> >>
> >> thanks for the reply, I did try with NBITS=8 and 12 with osgeo4w's
> >> gdal
> >> and tamas' nightly build but the output results are incorrect
> >>
> >> Here is a sample file (93Mo) :
> >> http://dl.free.fr/iFT4hH3Yj
> >>
> >> I'll try to rebuild gdal on my linux box with the internal libs
> >
> > I haven't looked at your result image, but you cannot just specify
> > NBITS=8 or
> > 12, if the range of the values in the original file is full 16 bits.
> >
> > You need to rescale the values, otherwise they will get clamped to
> > [0, 255] or
> > [0, 4096].
> >
> > So you can look for the min/max reported by gdalinfo -mm
> > uncompressed_original.tif
> >
> > and then try :
> >
> > gdal_translate -co "COMPRESS=JPEG" uncompressed_original.tif
> > compressed.tif
> > -scale min max 0 255 -ot Byte
> >
> > or
> >
> > gdal_translate -co "COMPRESS=JPEG" uncompressed_original.tif
> > compressed.tif
> > -scale min max 0 4095 -co NBITS=12
>
> Thanks, I didn't knew that !
>
> The man says that you can omit the input min max scale so gdal computes
> it for each source, however I can't find how to write that correctly

Actually, the manual says :

-scale [src_min src_max [dst_min dst_max]]:
    Rescale the input pixels values from the range src_min to src_max to the
range dst_min to dst_max. If omitted the output range is 0 to 255. If omitted
the input range is automatically computed from the source data.

In other words, you can use it in 3 ways :
* -scale : in which case src_min and src_max are automatically computed from the
source data.  And dst_min and dst_max will be set to 0 and 255
* -scale src_min src_max : the user specified values for src_min and src_max are
used, and dst_min and dst_max will be set to 0 and 255
* -scale src_min src_max dst_min dst_max : all user specified values are used

There's no syntax to just specify dst_min and dst_max and let src_min and
src_max be computed.

In the case where you want to convert to 8 bits /byte, you could actually just
do : gdal_translate -co "COMPRESS=JPEG" uncompressed_original.tif compressed.tif
-ot Byte -scale

For the 12 bits case, you must specify the whole set of values for -scale.

>


From weixj2003ld at 163.com  Tue Apr 24 07:06:11 2012
From: weixj2003ld at 163.com (weixj)
Date: Tue Apr 24 07:21:49 2012
Subject: [gdal-dev] How to read part of the tiff data and generate a new
	tiff file
Message-ID: <17b76f66.29bc1.136e407b25d.Coremail.weixj2003ld@163.com>

I have a tiff file and four points' coordination(and they are in the range of the min and max value of the coordination of the tiff file,I want to generate a new tiff file,and the edge of it is constructed by the four points.
 
Thank you  in advance.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120424/6b0e47b5/attachment.html
From chaitanya.ch at gmail.com  Tue Apr 24 07:36:11 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Apr 24 07:36:30 2012
Subject: [gdal-dev] How to read part of the tiff data and generate a new
	tiff file
In-Reply-To: <17b76f66.29bc1.136e407b25d.Coremail.weixj2003ld@163.com>
References: <17b76f66.29bc1.136e407b25d.Coremail.weixj2003ld@163.com>
Message-ID: <CAMKgpOb3Ai=JM5CPq_RC77yKH0Tri+qbOg1wURUowZk_a6cJnQ@mail.gmail.com>

weixj,

You can use the -projwin option of gdal_translate utility.

http://www.gdal.org/gdal_translate.html

2012/4/24 weixj <weixj2003ld@163.com>

> I have a tiff file and four points' coordination(and they are in the range
> of the min and max value of the coordination of the tiff file,I want to
> generate a new tiff file,and the edge of it is constructed by the four
> points.
>
> Thank you  in advance.
>
>
> ------------------------------
> ??Lofter??????????? <http://www.lofter.com>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120424/fb37f305/attachment-0001.html
From bfraser at geoanalytic.com  Tue Apr 24 09:55:12 2012
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Tue Apr 24 09:55:45 2012
Subject: [gdal-dev] how to convert UInt16 Tiff
In-Reply-To: <d838afbd7b4ce7a5f51befaffaec9907@enoreth.net>
References: <91ddc3b54358e4e43febb6b06a2f74d0@enoreth.net>
	<1335192850.4f956d12385a6@imp.free.fr>
	<380606cf3843abb31b9027b185655340@enoreth.net>
	<1335253124.4f965884834b1@imp.free.fr>
	<d838afbd7b4ce7a5f51befaffaec9907@enoreth.net>
Message-ID: <4F96B0C0.3040202@geoanalytic.com>

Another alternative is GINA's 
(http://www.gina.alaska.edu/projects/gina-tools/) gdal_contrast_stretch:

Usage: gdal_contrast_stretch.exe <src.tif> <dst.tif>
   { { -linear-stretch <target_avg> <target_stddev> } |
     { -percentile-range <from: 0.0-1.0> <to: 0.0-1.0> } |
     { -histeq <target_stddev> } }
   [ -ndv <no_data_val> ]
Input must be either 8-bit or 16-bit.  Output is 8-bit.

I think the input can be any GDAL supported raster type.

Best Regards,
Brent Fraser


On 4/24/2012 2:53 AM, jr.morreale@enoreth.net wrote:
> On Tue, 24 Apr 2012 09:38:44 +0200, Even Rouault wrote:
>>>
>>> thanks for the reply, I did try with NBITS=8 and 12 with osgeo4w's gdal
>>> and tamas' nightly build but the output results are incorrect
>>>
>>> Here is a sample file (93Mo) :
>>> http://dl.free.fr/iFT4hH3Yj
>>>
>>> I'll try to rebuild gdal on my linux box with the internal libs
>>
>> I haven't looked at your result image, but you cannot just specify 
>> NBITS=8 or
>> 12, if the range of the values in the original file is full 16 bits.
>>
>> You need to rescale the values, otherwise they will get clamped to
>> [0, 255] or
>> [0, 4096].
>>
>> So you can look for the min/max reported by gdalinfo -mm
>> uncompressed_original.tif
>>
>> and then try :
>>
>> gdal_translate -co "COMPRESS=JPEG" uncompressed_original.tif 
>> compressed.tif
>> -scale min max 0 255 -ot Byte
>>
>> or
>>
>> gdal_translate -co "COMPRESS=JPEG" uncompressed_original.tif 
>> compressed.tif
>> -scale min max 0 4095 -co NBITS=12
>
> Thanks, I didn't knew that !
>
> The man says that you can omit the input min max scale so gdal 
> computes it for each source, however I can't find how to write that 
> correctly
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120424/92c82b49/attachment.html
From ari.jolma at gmail.com  Wed Apr 25 09:32:42 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Apr 25 09:33:10 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <1334837082.4f8fff5a07c35@imp.free.fr>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com> <1334837082.4f8fff5a07c35@imp.free.fr>
Message-ID: <4F97FCFA.7060905@gmail.com>

Folks,

I'll start a new thread for this RFC.

I've uploaded a new patch, which hopefully corrects the issues Even 
brought up. Below are comments.

I've not added the Append or Buffer methods, which basically work on 
just one layer. I believe such functionality is simple enough to create 
using feature iteration.

Ari

the patch: 
http://trac.osgeo.org/gdal/attachment/wiki/rfc39_ogr_layer_algebra/rfc39.patch


On 04/19/2012 02:04 PM, Even Rouault wrote:
>> http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra
>>
> Ari,
>
> I have reviewed your proposal and it looks interesting. Here are my observations
> :
>
> 1) Argument order. A.Operation(B, C) where C is the target layer doesn't seem
> very intuitive, but I'm not sure I have something fundamentally better to
> propose. An alternate solution would be to make the operations static methods,
> and have OGRLayer::Operation(output_layer, input_layer, method_layer) ? I'd
> suggest at least to rename B as method_layer and C as result_layer to be more
> explicit on the role of each argument.


I've changed the names to Input, Method and Output. For example the 
layer object pointers are pLayerInput etc.



> 2) It would perhaps be prudent to add a char** papszOptions argument as a
> provision for future needs.

I've added it.


> 3) I'm wondering if it would not be more appropriate to separate the creation of
> fields of the output layer in a separate method that might be called, or not,
> before the real operation. For example IdentifyPrepare() for Identity(). Of
> course this would complicate a bit the implementation of the operation because
> it will need to look for which fields exist in the output layer and how the
> input and method layer fields map to those fields. But the establishment of the
> mapping and the setting of the output feature from the fields of the input and
> method features could be made in common methods
>
>     This way the XXXXXPrepare() would not need to check that CreateField()
> succeeds because XXXX() could work with an output layer with no fields at all.
> Checking that there are not fields with same name would not be necessary (in
> that case the value from B would override the value from A).


I've created a new method into Feature class: SetFieldsFrom, which uses 
a map. It is similar to SetFrom, which uses a map. (thus the field copy 
could be optimized into one function)

The layer methods now first check the existence of fields in the result 
layer. If there are fields, it is assumed that that is what the user 
wants. If there are no fields, a complete set of fields are created for 
fields in input and method layers (in some cases only input layer). This 
behavior could later be overridden with options.


> 4) It would be nice to able to provide a progress callback to get progress
> report (and also being able to interrupt) for such potentially long operations.


I agree. I've added these to the API, but I've not yet added the calls. 
This requires for example the inclusion of gdal.h into ogr_api.h.


> 5) A few remarks on the implementation itself (only code review, no actual
> testing). You can likely wait for comments from others before heading to fix
> them...
>
> a) CreateField() and CreateFeature() return code should be tested and acted
> upon. Likely interrupt the whole process ? (not strictly necessary for
> CreateField() is you adopt the idea developed in point 3))


I've added tests. I've used the "goto done;" style, where done is a 
label just before the release of used resources and exit from the 
method. I've tried to be careful to leave no memory leaks.


> b) I think there's something wrong with OGRGeometry *Bfilter =
> B->GetSpatialFilter(). When you later do
> B->SetSpatialFilter(x_geom->Intersection(Bfilter)), I believe it will destroy
> the previous installed filter, and thus Bfilter will point to a garbage object.
> You likely need to clone the initial spatial filter (and delete it after
> restoring it at the end of the method)


Yes. I checked all calls to GetSpatialFilter and now clone the initial 
one and destroy it at the end.


> c) Each time you do a new OGRFeature(), you need do delete it (after the call to
> CreateFeature()).

They are now deleted.

> d) GetGeometryRef() can return NULL (even for spatial layers). Currently it is
> never checked, and there are a few places where it is dereferenced.

The validity of the geometry is checked. If there is no geometry, the 
next feature is fetched.

> e) Lines like x_geom_diff = x_geom_diff->Difference(y_geom) (or geom =
> geom->Union(y_geom)) will leak the initial x_geom_diff object. You likely need
> to do :
> 	OGRGeometry* x_geom_diff_new = x_geom_diff->Difference(y_geom);
> 	delete x_geom_diff;
> 	x_geom_diff = x_geom_diff_new;

Fixed.

> f) The object returned by GetNextFeature() should be deleted after use.

It is deleted, even if the iteration is continued.

> g) You should be careful with SetGeometryDirectly(). You cannot pass directly
> the geometry belonging to another feature because this will segfault when you
> free the said feature.

Fixed

> h) Nothing wrong, but calls to UnsetField() are unnecessary for a feature that
> was just created and never set before (all the lines z->UnsetField(...) )

The unnecessary code is removed.

From alexandre.gacon+gdal at gmail.com  Wed Apr 25 09:47:59 2012
From: alexandre.gacon+gdal at gmail.com (Alexandre Gacon)
Date: Wed Apr 25 09:48:25 2012
Subject: [gdal-dev] OGR and Postgis : use simpler request to determine the
	spatial projection
Message-ID: <CAFJaAp6M4fKdhKjFJwmnRRy0EPUJMvQHzUm2bKRtUcpFc4fi_w@mail.gmail.com>

Hi,

We use currently GDAL/OGR C++ API to execute complicated requests on a
postgis database. Apparently, GDAL executes the request also to find the
spatial reference of the result. Is it possible to bypass this behavior and
thus to avoid the execution of our request ?

-- 
Alexandre Gacon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120425/f42daf26/attachment.html
From even.rouault at mines-paris.org  Wed Apr 25 10:00:13 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr 25 10:00:29 2012
Subject: [gdal-dev] OGR and Postgis : use simpler request to determine the
	spatial projection
In-Reply-To: <CAFJaAp6M4fKdhKjFJwmnRRy0EPUJMvQHzUm2bKRtUcpFc4fi_w@mail.gmail.com>
References: <CAFJaAp6M4fKdhKjFJwmnRRy0EPUJMvQHzUm2bKRtUcpFc4fi_w@mail.gmail.com>
Message-ID: <1335362413.4f98036dc53c3@imp.free.fr>

Selon Alexandre Gacon <alexandre.gacon+gdal@gmail.com>:

> Hi,
>
> We use currently GDAL/OGR C++ API to execute complicated requests on a
> postgis database. Apparently, GDAL executes the request also to find the
> spatial reference of the result. Is it possible to bypass this behavior and
> thus to avoid the execution of our request ?

I suppose you are talking about a layer returned by ExecuteSQL() ? Ok, I see
indeed in OGRPGResultLayer::OGRPGResultLayer(...) the request that does the
getsrid(). I agree that it might be indeed not desirable. I don't see an obvious
way to disable that. Well, perhaps if you remove the getsrid() function from
your PostGIS DB, the request might fail at the beginning, but I'm not even sure
(and it might have side effect if you depend on it for other uses)

Would you mind opening a ticket in GDAL Trac about this ? At the very least, the
current code could be moved to an implementation of GetSpatialRef(), so it is
not triggered systematically.

>
> --
> Alexandre Gacon
>


From even.rouault at mines-paris.org  Wed Apr 25 10:31:19 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr 25 10:31:36 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <4F97FCFA.7060905@gmail.com>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com> <1334837082.4f8fff5a07c35@imp.free.fr>
	<4F97FCFA.7060905@gmail.com>
Message-ID: <1335364279.4f980ab764b03@imp.free.fr>

Hi Ari,

> I've uploaded a new patch, which hopefully corrects the issues Even
> brought up. Below are comments.

I've reviewed quickly and the new version seems to address my comments well.

>
> I've not added the Append or Buffer methods, which basically work on
> just one layer. I believe such functionality is simple enough to create
> using feature iteration.
>
> Ari
>
> the patch:
> http://trac.osgeo.org/gdal/attachment/wiki/rfc39_ogr_layer_algebra/rfc39.patch
>

Hum, I'm surprised that it has survived your testing ;-) : GetSpatialFilter()
might return NULL (in fact, in the general case, it will), so
GetSpatialFilter()->clone() should segfault.

CPLMalloc() cannot return NULL. Internally, it will abort if the memory
allocation failed. So you can just remove the if (!mapInput) // if (!mapMethod)
tests afterwards, or use VSIMalloc() instead. For consistency, memory allocated
with CPLMalloc()/VSIMalloc() should be freed with CPLFree()/VSIFree(), and not
free(). (There's an alternate memory allocator that does consistency checking
that can be enabled by defining #define DEBUG_VSIMALLOC in
port/cpl_vsisimple.cpp)

For the final implementation, the new methods that are the object of the RFC
will need Doxygen doc.

I don't see a strong reason to publish OGR_F_SetFieldsFromWithMap() in the C
API. This is mostly usefull for internal purposes for now.

About SetFieldsFrom(), it also changes SetFID() and SetStyleString(). This is a
bit counter-intuitive. It will be indeed interesting to make SetFeatureFrom()
call SetFeatureFrom() to avoid code duplication.

As far as the RFC is concerned, do you intend writing tests in the autotest
suite for the new methods ?

Best regards,

Even

From ari.jolma at gmail.com  Wed Apr 25 11:11:17 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Apr 25 11:12:19 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <1335364279.4f980ab764b03@imp.free.fr>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com> <1334837082.4f8fff5a07c35@imp.free.fr>
	<4F97FCFA.7060905@gmail.com> <1335364279.4f980ab764b03@imp.free.fr>
Message-ID: <4F981415.2000701@gmail.com>

On 04/25/2012 04:31 PM, Even Rouault wrote:
> Hi Ari,
>
> Hum, I'm surprised that it has survived your testing ;-) : GetSpatialFilter()
> might return NULL (in fact, in the general case, it will), so
> GetSpatialFilter()->clone() should segfault.

I've not yet tested this one at all :) -- I only made sure it compiles.

I'll address the issues below later.

The autotests are in Python, I believe. Any volunteers for writing those?

Ari

hm, seems I failed to start a new thread since at least Thunderbird puts 
this into the old one.

>
> CPLMalloc() cannot return NULL. Internally, it will abort if the memory
> allocation failed. So you can just remove the if (!mapInput) // if (!mapMethod)
> tests afterwards, or use VSIMalloc() instead. For consistency, memory allocated
> with CPLMalloc()/VSIMalloc() should be freed with CPLFree()/VSIFree(), and not
> free(). (There's an alternate memory allocator that does consistency checking
> that can be enabled by defining #define DEBUG_VSIMALLOC in
> port/cpl_vsisimple.cpp)
>
> For the final implementation, the new methods that are the object of the RFC
> will need Doxygen doc.
>
> I don't see a strong reason to publish OGR_F_SetFieldsFromWithMap() in the C
> API. This is mostly usefull for internal purposes for now.
>
> About SetFieldsFrom(), it also changes SetFID() and SetStyleString(). This is a
> bit counter-intuitive. It will be indeed interesting to make SetFeatureFrom()
> call SetFeatureFrom() to avoid code duplication.
>
> As far as the RFC is concerned, do you intend writing tests in the autotest
> suite for the new methods ?
>
> Best regards,
>
> Even
>

From david.hodo at gmail.com  Wed Apr 25 14:32:28 2012
From: david.hodo at gmail.com (David Hodo)
Date: Wed Apr 25 14:33:15 2012
Subject: [gdal-dev] Python 3 on Ubuntu 11.10
Message-ID: <CAJEHYXS+XRhx16zMw-Jccg8nqxvzgN_jea9DtZ_Wun75CTL1BA@mail.gmail.com>

I'm trying to install GDAL for Python 3 on Ubuntu 11.10 and having some
problems.  I installed GDAL 1.7.0 and the header files from with Synaptic.
 I initially tried installing the Python bindings with 'sudo easy_install
GDAL'.  This worked for me, but the installed version does not work with
Python 3.

I then tried downloading the latest version from the website and installing
with 'python3.2 setup.py build', but the command fails with the error:

running build
running build_py
running build_ext
building 'osgeo._gdal' extension
gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC
-I../../port -I../../gcore -I../../alg -I../../ogr/ -I/usr/include/gdal/
-I/usr/include/python3.2mu -I. -I/usr/include -c extensions/gdal_wrap.cpp
-o build/temp.linux-x86_64-3.2/extensions/gdal_wrap.o
cc1plus: warning: command line option ?-Wstrict-prototypes? is valid for
Ada/C/ObjC but not for C++ [enabled by default]
extensions/gdal_wrap.cpp: In function ?void
SWIG_Python_SetModule(swig_module_info*)?:
extensions/gdal_wrap.cpp:2535:22: warning: unused variable
?swig_empty_runtime_method_table? [-Wunused-variable]
extensions/gdal_wrap.cpp: At global scope:
extensions/gdal_wrap.cpp:2999:67: error: ?VSILFILE? has not been declared
extensions/gdal_wrap.cpp: In function ?int wrapper_VSIFReadL(void**, int,
int, int*)?:
extensions/gdal_wrap.cpp:3018:72: error: cannot convert ?int*? to ?FILE*
{aka _IO_FILE*}? for argument ?4? to ?size_t VSIFReadL(void*, size_t,
size_t, FILE*)?
extensions/gdal_wrap.cpp: In function ?int PyProgressProxy(double, const
char*, void*)?:
extensions/gdal_wrap.cpp:3236:2: warning: the address of ?_Py_NoneStruct?
will never be NULL [-Waddress]
extensions/gdal_wrap.cpp: In function ?int wrapper_VSIStatL(const char*,
StatBuf*, int)?:
extensions/gdal_wrap.cpp:3457:52: error: ?VSIStatExL? was not declared in
this scope
extensions/gdal_wrap.cpp: At global scope:
extensions/gdal_wrap.cpp:3465:67: error: ?VSILFILE? has not been declared
extensions/gdal_wrap.cpp: In function ?int wrapper_VSIFWriteL(int, char*,
int, int, int*)?:
extensions/gdal_wrap.cpp:3472:42: error: cannot convert ?int*? to ?FILE*
{aka _IO_FILE*}? for argument ?4? to ?size_t VSIFWriteL(const void*,
size_t, size_t, FILE*)?
extensions/gdal_wrap.cpp: At global scope:
extensions/gdal_wrap.cpp:3801:5: error: ?GDALAsyncReaderH? does not name a
type
extensions/gdal_wrap.cpp:3807:8: error: ?GDALAsyncReaderH? does not name a
type
extensions/gdal_wrap.cpp: In function ?void
DeleteAsyncReaderWrapper(GDALAsyncReaderWrapperH)?:
extensions/gdal_wrap.cpp:3826:20: error: ?struct GDALAsyncReaderWrapper?
has no member named ?hAsyncReader?
....

There are another 10 or 15 errors mostly related to VSILFILE not being
declared.

Any suggestions on how to get GDAL working for Python3?

Thanks,

David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120425/b94e0d27/attachment.html
From even.rouault at mines-paris.org  Wed Apr 25 14:39:22 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Apr 25 14:36:59 2012
Subject: [gdal-dev] Python 3 on Ubuntu 11.10
In-Reply-To: <CAJEHYXS+XRhx16zMw-Jccg8nqxvzgN_jea9DtZ_Wun75CTL1BA@mail.gmail.com>
References: <CAJEHYXS+XRhx16zMw-Jccg8nqxvzgN_jea9DtZ_Wun75CTL1BA@mail.gmail.com>
Message-ID: <201204252039.22978.even.rouault@mines-paris.org>

Le mercredi 25 avril 2012 20:32:28, David Hodo a ?crit :
> I'm trying to install GDAL for Python 3 on Ubuntu 11.10 and having some
> problems.  I installed GDAL 1.7.0 and the header files from with Synaptic.
>  I initially tried installing the Python bindings with 'sudo easy_install
> GDAL'.  This worked for me, but the installed version does not work with
> Python 3.
> 
> I then tried downloading the latest version from the website and installing
> with 'python3.2 setup.py build', but the command fails with the error:
> 
> running build
> running build_py
> running build_ext
> building 'osgeo._gdal' extension
> gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC
> -I../../port -I../../gcore -I../../alg -I../../ogr/ -I/usr/include/gdal/
> -I/usr/include/python3.2mu -I. -I/usr/include -c extensions/gdal_wrap.cpp
> -o build/temp.linux-x86_64-3.2/extensions/gdal_wrap.o
> cc1plus: warning: command line option ?-Wstrict-prototypes? is valid for
> Ada/C/ObjC but not for C++ [enabled by default]
> extensions/gdal_wrap.cpp: In function ?void
> SWIG_Python_SetModule(swig_module_info*)?:
> extensions/gdal_wrap.cpp:2535:22: warning: unused variable
> ?swig_empty_runtime_method_table? [-Wunused-variable]
> extensions/gdal_wrap.cpp: At global scope:
> extensions/gdal_wrap.cpp:2999:67: error: ?VSILFILE? has not been declared
> extensions/gdal_wrap.cpp: In function ?int wrapper_VSIFReadL(void**, int,
> int, int*)?:
> extensions/gdal_wrap.cpp:3018:72: error: cannot convert ?int*? to ?FILE*
> {aka _IO_FILE*}? for argument ?4? to ?size_t VSIFReadL(void*, size_t,
> size_t, FILE*)?
> extensions/gdal_wrap.cpp: In function ?int PyProgressProxy(double, const
> char*, void*)?:
> extensions/gdal_wrap.cpp:3236:2: warning: the address of ?_Py_NoneStruct?
> will never be NULL [-Waddress]
> extensions/gdal_wrap.cpp: In function ?int wrapper_VSIStatL(const char*,
> StatBuf*, int)?:
> extensions/gdal_wrap.cpp:3457:52: error: ?VSIStatExL? was not declared in
> this scope
> extensions/gdal_wrap.cpp: At global scope:
> extensions/gdal_wrap.cpp:3465:67: error: ?VSILFILE? has not been declared
> extensions/gdal_wrap.cpp: In function ?int wrapper_VSIFWriteL(int, char*,
> int, int, int*)?:
> extensions/gdal_wrap.cpp:3472:42: error: cannot convert ?int*? to ?FILE*
> {aka _IO_FILE*}? for argument ?4? to ?size_t VSIFWriteL(const void*,
> size_t, size_t, FILE*)?
> extensions/gdal_wrap.cpp: At global scope:
> extensions/gdal_wrap.cpp:3801:5: error: ?GDALAsyncReaderH? does not name a
> type
> extensions/gdal_wrap.cpp:3807:8: error: ?GDALAsyncReaderH? does not name a
> type
> extensions/gdal_wrap.cpp: In function ?void
> DeleteAsyncReaderWrapper(GDALAsyncReaderWrapperH)?:
> extensions/gdal_wrap.cpp:3826:20: error: ?struct GDALAsyncReaderWrapper?
> has no member named ?hAsyncReader?
> ....
> 
> There are another 10 or 15 errors mostly related to VSILFILE not being
> declared.
> 
> Any suggestions on how to get GDAL working for Python3?

Did you make a full build of GDAL before trying to build the python bindings ? 
And I also somehow suspect you have GDAL headers from an older version 
somewhere in your include path, likely in /usr/include or /usr/local/include

> 
> Thanks,
> 
> David
From david.hodo at gmail.com  Wed Apr 25 16:35:32 2012
From: david.hodo at gmail.com (David Hodo)
Date: Wed Apr 25 16:36:18 2012
Subject: [gdal-dev] Python 3 on Ubuntu 11.10
In-Reply-To: <201204252039.22978.even.rouault@mines-paris.org>
References: <CAJEHYXS+XRhx16zMw-Jccg8nqxvzgN_jea9DtZ_Wun75CTL1BA@mail.gmail.com>
	<201204252039.22978.even.rouault@mines-paris.org>
Message-ID: <00e101cd2322$f7246470$e56d2d50$@gmail.com>

I had installed GDAL from a synaptic package, not source.  I removed the synaptic version and installed 1.9 from source and everything works now.  

Thanks,

David

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Wednesday, April 25, 2012 1:39 PM
To: gdal-dev@lists.osgeo.org
Cc: David Hodo
Subject: Re: [gdal-dev] Python 3 on Ubuntu 11.10

Le mercredi 25 avril 2012 20:32:28, David Hodo a ?crit :
> I'm trying to install GDAL for Python 3 on Ubuntu 11.10 and having 
> some problems.  I installed GDAL 1.7.0 and the header files from with Synaptic.
>  I initially tried installing the Python bindings with 'sudo 
> easy_install GDAL'.  This worked for me, but the installed version 
> does not work with Python 3.
> 
> I then tried downloading the latest version from the website and 
> installing with 'python3.2 setup.py build', but the command fails with the error:
> 
> running build
> running build_py
> running build_ext
> building 'osgeo._gdal' extension
> gcc -pthread -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC 
> -I../../port -I../../gcore -I../../alg -I../../ogr/ 
> -I/usr/include/gdal/ -I/usr/include/python3.2mu -I. -I/usr/include -c 
> extensions/gdal_wrap.cpp -o 
> build/temp.linux-x86_64-3.2/extensions/gdal_wrap.o
> cc1plus: warning: command line option ?-Wstrict-prototypes? is valid 
> for Ada/C/ObjC but not for C++ [enabled by default]
> extensions/gdal_wrap.cpp: In function ?void
> SWIG_Python_SetModule(swig_module_info*)?:
> extensions/gdal_wrap.cpp:2535:22: warning: unused variable 
> ?swig_empty_runtime_method_table? [-Wunused-variable]
> extensions/gdal_wrap.cpp: At global scope:
> extensions/gdal_wrap.cpp:2999:67: error: ?VSILFILE? has not been 
> declared
> extensions/gdal_wrap.cpp: In function ?int wrapper_VSIFReadL(void**, 
> int, int, int*)?:
> extensions/gdal_wrap.cpp:3018:72: error: cannot convert ?int*? to 
> ?FILE* {aka _IO_FILE*}? for argument ?4? to ?size_t VSIFReadL(void*, 
> size_t, size_t, FILE*)?
> extensions/gdal_wrap.cpp: In function ?int PyProgressProxy(double, 
> const char*, void*)?:
> extensions/gdal_wrap.cpp:3236:2: warning: the address of ?_Py_NoneStruct?
> will never be NULL [-Waddress]
> extensions/gdal_wrap.cpp: In function ?int wrapper_VSIStatL(const 
> char*, StatBuf*, int)?:
> extensions/gdal_wrap.cpp:3457:52: error: ?VSIStatExL? was not declared 
> in this scope
> extensions/gdal_wrap.cpp: At global scope:
> extensions/gdal_wrap.cpp:3465:67: error: ?VSILFILE? has not been 
> declared
> extensions/gdal_wrap.cpp: In function ?int wrapper_VSIFWriteL(int, 
> char*, int, int, int*)?:
> extensions/gdal_wrap.cpp:3472:42: error: cannot convert ?int*? to 
> ?FILE* {aka _IO_FILE*}? for argument ?4? to ?size_t VSIFWriteL(const 
> void*, size_t, size_t, FILE*)?
> extensions/gdal_wrap.cpp: At global scope:
> extensions/gdal_wrap.cpp:3801:5: error: ?GDALAsyncReaderH? does not 
> name a type
> extensions/gdal_wrap.cpp:3807:8: error: ?GDALAsyncReaderH? does not 
> name a type
> extensions/gdal_wrap.cpp: In function ?void
> DeleteAsyncReaderWrapper(GDALAsyncReaderWrapperH)?:
> extensions/gdal_wrap.cpp:3826:20: error: ?struct GDALAsyncReaderWrapper?
> has no member named ?hAsyncReader?
> ....
> 
> There are another 10 or 15 errors mostly related to VSILFILE not being 
> declared.
> 
> Any suggestions on how to get GDAL working for Python3?

Did you make a full build of GDAL before trying to build the python bindings ? 
And I also somehow suspect you have GDAL headers from an older version somewhere in your include path, likely in /usr/include or /usr/local/include

> 
> Thanks,
> 
> David

From woklist at kyngchaos.com  Wed Apr 25 20:38:22 2012
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Apr 25 20:38:28 2012
Subject: [gdal-dev] DBF indexing?
Message-ID: <C4824F26-B973-4619-A5E8-B714F68040E2@kyngchaos.com>

Is it possible to index fields in a DBF, and does GDAL support that for a JOIN?

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy


From Michael.Smith at usace.army.mil  Wed Apr 25 20:53:16 2012
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Wed Apr 25 20:54:07 2012
Subject: [gdal-dev] DBF indexing?
In-Reply-To: <C4824F26-B973-4619-A5E8-B714F68040E2@kyngchaos.com>
Message-ID: <CBBE1458.264C8%michael.smith@usace.army.mil>

CREATE INDEX

Some OGR SQL drivers support creating of attribute indexes. Currently this
includes the Shapefile driver. An index accelerates very simple attribute
queries of the form fieldname = value, which is what is used by the JOIN
capability. To create an attribute index on the nation_id field of the
nation table a command like this would be used:
CREATE INDEX ON nation USING nation_id

Index Limitations
1. Indexes are not maintained dynamically when new features are added to
or removed from a layer.
2. Very long strings (longer than 256 characters?) cannot currently be
indexed.
3. To recreate an index it is necessary to drop all indexes on a layer and
then recreate all the indexes.
4. Indexes are not used in any complex queries. Currently the only query
the will accelerate is a simple "field = value" query.


http://gdal.org/ogr/ogr_sql.html






On 4/25/12 8:38 PM, "William Kyngesburye" <woklist@kyngchaos.com> wrote:

>Is it possible to index fields in a DBF, and does GDAL support that for a
>JOIN?
>
>-----
>William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>http://www.kyngchaos.com/
>
>"Those people who most want to rule people are, ipso-facto, those least
>suited to do it."
>
>- A rule of the universe, from the HitchHiker's Guide to the Galaxy
>
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev@lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Wed Apr 25 20:53:57 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Apr 25 20:54:48 2012
Subject: [gdal-dev] DBF indexing?
In-Reply-To: <C4824F26-B973-4619-A5E8-B714F68040E2@kyngchaos.com>
References: <C4824F26-B973-4619-A5E8-B714F68040E2@kyngchaos.com>
Message-ID: <CA+YzLBf+T05=cDk7NanpJT_F1Yp-2wwyGg2RdjnAFd38f3TAnA@mail.gmail.com>

William,

Yes, but only in a very restricted fashion.  The shapefile driver docs says:

"""Currently the OGR Shapefile driver only supports attribute indexes
for looking up specific values in a unique key column. To create an
attribute index for a column issue an SQL command of the form "CREATE
INDEX ON tablename USING fieldname". To drop the attribute indexes
issue a command of the form "DROP INDEX ON tablename". The attribute
index will accelerate WHERE clause searches of the form "fieldname =
value". The attribute index is actually stored as a mapinfo format
index and is not compatible with any other shapefile applications."""

I think that is still accurate.

Best regards,
Frank



On Wed, Apr 25, 2012 at 5:38 PM, William Kyngesburye
<woklist@kyngchaos.com> wrote:
> Is it possible to index fields in a DBF, and does GDAL support that for a JOIN?
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "Those people who most want to rule people are, ipso-facto, those least suited to do it."
>
> - A rule of the universe, from the HitchHiker's Guide to the Galaxy
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From woklist at kyngchaos.com  Wed Apr 25 21:13:33 2012
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Apr 25 21:13:55 2012
Subject: [gdal-dev] DBF indexing?
In-Reply-To: <CA+YzLBf+T05=cDk7NanpJT_F1Yp-2wwyGg2RdjnAFd38f3TAnA@mail.gmail.com>
References: <C4824F26-B973-4619-A5E8-B714F68040E2@kyngchaos.com>
	<CA+YzLBf+T05=cDk7NanpJT_F1Yp-2wwyGg2RdjnAFd38f3TAnA@mail.gmail.com>
Message-ID: <636D1DED-344D-489E-854E-E25D6BE5EDFC@kyngchaos.com>

Cool, I didn't think to look at the shapefile help for DBF info.  Makes sense.

I was able to index the DBF and the join processed in seconds, which was running for hours before without finishing.  Sweet.

On Apr 25, 2012, at 7:53 PM, Frank Warmerdam wrote:

> William,
> 
> Yes, but only in a very restricted fashion.  The shapefile driver docs says:
> 
> """Currently the OGR Shapefile driver only supports attribute indexes
> for looking up specific values in a unique key column. To create an
> attribute index for a column issue an SQL command of the form "CREATE
> INDEX ON tablename USING fieldname". To drop the attribute indexes
> issue a command of the form "DROP INDEX ON tablename". The attribute
> index will accelerate WHERE clause searches of the form "fieldname =
> value". The attribute index is actually stored as a mapinfo format
> index and is not compatible with any other shapefile applications."""
> 
> I think that is still accurate.
> 
> Best regards,
> Frank
> 
> 
> 
> On Wed, Apr 25, 2012 at 5:38 PM, William Kyngesburye
> <woklist@kyngchaos.com> wrote:
>> Is it possible to index fields in a DBF, and does GDAL support that for a JOIN?
>> 

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy


From radim.blazek at gmail.com  Thu Apr 26 06:03:42 2012
From: radim.blazek at gmail.com (Radim Blazek)
Date: Thu Apr 26 06:03:57 2012
Subject: [gdal-dev] WCS response CRS
Message-ID: <CAEMrtYpOe01RX_Tbs7EbmZimc3Q1yfPXXVSg9taacWfkHL6CxA@mail.gmail.com>

I cannot find an option to specify response CRS for WCS driver.
Is it the <GetCoverageExtra> with RESPONSE_CRS the only way?

Radim
From ari.jolma at gmail.com  Thu Apr 26 06:33:31 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Apr 26 06:33:47 2012
Subject: [gdal-dev] RFC 39
In-Reply-To: <1335364279.4f980ab764b03@imp.free.fr>
References: <4F8DE3DB.80607@gmail.com>
	<CA+YzLBcBQ9R56KJXFTQxfMiTK5hMQHuwVp_uKnaWzKt07=yUuQ@mail.gmail.com>
	<4F8FD525.3030903@gmail.com> <1334837082.4f8fff5a07c35@imp.free.fr>
	<4F97FCFA.7060905@gmail.com> <1335364279.4f980ab764b03@imp.free.fr>
Message-ID: <4F99247B.9030807@gmail.com>

On 04/25/2012 04:31 PM, Even Rouault wrote:
> Hum, I'm surprised that it has survived your testing ;-) : GetSpatialFilter()
> might return NULL (in fact, in the general case, it will), so
> GetSpatialFilter()->clone() should segfault.


Fixed


>
> CPLMalloc() cannot return NULL. Internally, it will abort if the memory
> allocation failed. So you can just remove the if (!mapInput) // if (!mapMethod)
> tests afterwards, or use VSIMalloc() instead. For consistency, memory allocated
> with CPLMalloc()/VSIMalloc() should be freed with CPLFree()/VSIFree(), and not
> free(). (There's an alternate memory allocator that does consistency checking
> that can be enabled by defining #define DEBUG_VSIMALLOC in
> port/cpl_vsisimple.cpp)


I changed to using VSIMalloc and VSIFree. Also fixed the case when there 
are no fields. BTW, there are still some memory allocations (new 
objects) that are not checked.


>
> For the final implementation, the new methods that are the object of the RFC
> will need Doxygen doc.


to be done


>
> I don't see a strong reason to publish OGR_F_SetFieldsFromWithMap() in the C
> API. This is mostly usefull for internal purposes for now.


Removed


>
> About SetFieldsFrom(), it also changes SetFID() and SetStyleString(). This is a
> bit counter-intuitive. It will be indeed interesting to make SetFeatureFrom()
> call SetFeatureFrom() to avoid code duplication.


Removed and made SetFrom (with map) to call SetFieldsFrom.


>
> As far as the RFC is concerned, do you intend writing tests in the autotest
> suite for the new methods ?


I attached to the wiki page an initial test. For that I needed to add 
the methods to the Python bindings (actually, to make them work). For 
that I needed to do a similar thing as I did for Perl, i.e., put the 
callback bindings code into a separate file. I also had to fix a bit the 
Python progress function typemaps.

The initial test just tests simple cases for geometries. But enough to 
raise concern if the Clip method is implemented correctly. It seems to 
me that it should clip out areas from the input layer that are not 
covered by *any* feature in method layer. This still needs to be looked 
into.

Thus the to do list:

- docs
- check the logic of Clip and possibly other methods
- the progress calls

The page: http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra

Ari

>
> Best regards,
>
> Even
>

From richardnicoll at gmail.com  Thu Apr 26 13:42:42 2012
From: richardnicoll at gmail.com (Richard Nicoll)
Date: Thu Apr 26 13:50:28 2012
Subject: [gdal-dev] gdaladdo level values
Message-ID: <-6682906652905154333@unknownmsgid>

Hi guys

I am new to using GDAL so apologies if this is a silly question!

When using the gdaladdo to create GeoTIFF pyramid layers (overviews),
can the levels values be decimal values, or do they have to be
integers?  I have tried using decimals (e.g. 4.3) since this will
produce an overview at the exact required scale for the viewing app,
however GDAL appears to be rounding up/down to the closest whole
number!

Does anyone more experienced have any advice please?

Thanks,
Richard
From warmerdam at pobox.com  Thu Apr 26 14:01:25 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Apr 26 14:02:03 2012
Subject: [gdal-dev] gdaladdo level values
In-Reply-To: <-6682906652905154333@unknownmsgid>
References: <-6682906652905154333@unknownmsgid>
Message-ID: <CA+YzLBccMH+_TEfVaP-JwSS-9Wf49mf_dbVnypHg8j0rz3CvZA@mail.gmail.com>

On Thu, Apr 26, 2012 at 10:42 AM, Richard Nicoll
<richardnicoll@gmail.com> wrote:
> Hi guys
>
> I am new to using GDAL so apologies if this is a silly question!
>
> When using the gdaladdo to create GeoTIFF pyramid layers (overviews),
> can the levels values be decimal values, or do they have to be
> integers? ?I have tried using decimals (e.g. 4.3) since this will
> produce an overview at the exact required scale for the viewing app,
> however GDAL appears to be rounding up/down to the closest whole
> number!

Richard,

I can confirm that the BuildOverviews() api only supports
integer overview levels.   I do believe that GDAL can support
reading overviews, even at non-integer overview levels, but not
create them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From akshaygupta202 at gmail.com  Fri Apr 27 03:45:26 2012
From: akshaygupta202 at gmail.com (akshay gupta)
Date: Fri Apr 27 03:46:24 2012
Subject: [gdal-dev] Problem reading JPEG image format
Message-ID: <CAB_qc70E+F0KJ5cWoaGUN-DqnGLPZK3-UCzMcdOj98URdpnxPA@mail.gmail.com>

Hi all,

I am having problems trying to read .jpg images using gdal. Using GDAL I
am  able to read jpg images using GA_ReadOnly mode but  in GA_Update mode
its giving errors. Can any one tell me what might be the problem, and
suggest me a turnaround to open jpg image in update mode.

Thanks in advance,
Akhy H?ckelheim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120427/06d2cde8/attachment.html
From fibbi at lamma.rete.toscana.it  Fri Apr 27 06:09:22 2012
From: fibbi at lamma.rete.toscana.it (Luca Fibbi)
Date: Fri Apr 27 06:09:27 2012
Subject: [gdal-dev] Fwd: Configure error with Oracle instantclient 11.2.0.3
In-Reply-To: <CAG9OqYrTuaOYq6jyq-O2uc7VcOzn_2igqo_J6J7A-OvjPDEJZg@mail.gmail.com>
References: <CAG9OqYqfEkfMEav91eSQPF9D01MiGTHiGmJejY8ueyrO54RnAw@mail.gmail.com>
	<CAG9OqYrTuaOYq6jyq-O2uc7VcOzn_2igqo_J6J7A-OvjPDEJZg@mail.gmail.com>
Message-ID: <1335521362619-4933492.post@n6.nabble.com>

There has been a change to the build tools in ubuntu 11.10 The ??as-needed?
flag is now passed to the linker. This primarily has implications for
dynamic library linking but it also affects the order that libraries appear
on the command line even for static linking.
I solved the problem by exporting the following environment variable before
running configure:
LDFLAGS = "-Wl, - no-as-needed"
But they are not able to fully understand the reasons why the functions
which appear undefined and OCIEnvCreate OCIHandleFree are defined in $
ORACLE_HOME / lib / libclntsh.so as seen by running the following command:

$ nm $ ORACLE_HOME / lib / libclntsh.so | grep-E "OCIEnvCreate |
OCIHandleFree"
000000000044817e T OCIEnvCreate
00000000004481f6 T OCIHandleFree


Best regards

Luca

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Configure-error-with-Oracle-instantclient-11-2-0-3-tp4889509p4933492.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Fri Apr 27 07:06:48 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Apr 27 07:07:28 2012
Subject: [gdal-dev] Problem reading JPEG image format
In-Reply-To: <CAB_qc70E+F0KJ5cWoaGUN-DqnGLPZK3-UCzMcdOj98URdpnxPA@mail.gmail.com>
References: <CAB_qc70E+F0KJ5cWoaGUN-DqnGLPZK3-UCzMcdOj98URdpnxPA@mail.gmail.com>
Message-ID: <CAMKgpOaGofNUJh8EKzJrngfQwyyFoz+jmwzzAZCb469w_02rMw@mail.gmail.com>

Akshay,

Please provide some more details including the error messages and the
driver you used, etc. Setting the CPL_DEBUG env variable before running the
process can provide more details.

On Fri, Apr 27, 2012 at 1:15 PM, akshay gupta <akshaygupta202@gmail.com>wrote:

> Hi all,
>
> I am having problems trying to read .jpg images using gdal. Using GDAL I
> am  able to read jpg images using GA_ReadOnly mode but  in GA_Update mode
> its giving errors. Can any one tell me what might be the problem, and
> suggest me a turnaround to open jpg image in update mode.
>
> Thanks in advance,
> Akhy H?ckelheim
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120427/f2c12a01/attachment.html
From even.rouault at mines-paris.org  Fri Apr 27 08:24:43 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr 27 08:25:39 2012
Subject: [gdal-dev] Problem reading JPEG image format
In-Reply-To: <CAB_qc70E+F0KJ5cWoaGUN-DqnGLPZK3-UCzMcdOj98URdpnxPA@mail.gmail.com>
References: <CAB_qc70E+F0KJ5cWoaGUN-DqnGLPZK3-UCzMcdOj98URdpnxPA@mail.gmail.com>
Message-ID: <1335529483.4f9a900b931b1@imp.free.fr>

Selon akshay gupta <akshaygupta202@gmail.com>:

> Hi all,
>
> I am having problems trying to read .jpg images using gdal. Using GDAL I
> am  able to read jpg images using GA_ReadOnly mode but  in GA_Update mode
> its giving errors. Can any one tell me what might be the problem, and
> suggest me a turnaround to open jpg image in update mode.

It is expected and there is no support for opening a JPEG image in update mode.
The JPEG format is essentially read-only or write-only. You cannot modify the
imagery in place without regenerating a full file. You can use the CreateCopy()
method of the JPEG driver for that.

>
> Thanks in advance,
> Akhy H?ckelheim
>


From ari.jolma at gmail.com  Fri Apr 27 08:39:32 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri Apr 27 08:40:28 2012
Subject: [gdal-dev] RFC 39
Message-ID: <4F9A9384.3090804@gmail.com>

Folks,

I've added a new patch to the RFC 39 page. The attached files (the 
latest patch and the autotest code) contain now

- new methods in OGRFeature and especially the new overlay methods in 
OGRLayer
- additions to the C API
- additions to the swig bindings
- documentation of the new overlay methods
- initial test code for the methods, written in Python in the general 
autotest style
- the methods make progress calls

The methods still need some testing, especially the corner cases and of 
all features (attributes, progress functions etc), but I'm rather happy 
with the logics now. However, the API and the logic of the methods could 
still be discussed.

There are four helper functions and maybe some of them could go into the 
C++ API.

Thus, basically all the pieces are in there. Even pointed out several 
issues with the code, and I've attended to all of them. However, the 
code could use some review still - also from the style point of view. 
There a some comments in the code, but in general - also because of the 
helper functions - I would say that they are quite ok IMO.

What would it take to adopt this RFC?

Ari

From stefano.iacovella at gmail.com  Fri Apr 27 09:29:21 2012
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Fri Apr 27 09:29:58 2012
Subject: [gdal-dev] Fwd: Configure error with Oracle instantclient 11.2.0.3
In-Reply-To: <1335521362619-4933492.post@n6.nabble.com>
References: <CAG9OqYqfEkfMEav91eSQPF9D01MiGTHiGmJejY8ueyrO54RnAw@mail.gmail.com>
	<CAG9OqYrTuaOYq6jyq-O2uc7VcOzn_2igqo_J6J7A-OvjPDEJZg@mail.gmail.com>
	<1335521362619-4933492.post@n6.nabble.com>
Message-ID: <CAG9OqYr=NyK9b_tc7Q3RTQaXabDBbSs_4v18dX3pk=23mofi=g@mail.gmail.com>

Thank you Luca

the setting you suggested actually solved my issue.

export LDFLAGS="-Wl,--no-as-needed"
./configure

I succeded compiling 1.9.0 with OCI support using the Instantclient.

Regards

Stefano

2012/4/27 Luca Fibbi <fibbi@lamma.rete.toscana.it>:
> There has been a change to the build tools in ubuntu 11.10 The ??as-needed?
> flag is now passed to the linker. This primarily has implications for
> dynamic library linking but it also affects the order that libraries appear
> on the command line even for static linking.
> I solved the problem by exporting the following environment variable before
> running configure:
> LDFLAGS = "-Wl, - no-as-needed"
> But they are not able to fully understand the reasons why the functions
> which appear undefined and OCIEnvCreate OCIHandleFree are defined in $
> ORACLE_HOME / lib / libclntsh.so as seen by running the following command:
>
> $ nm $ ORACLE_HOME / lib / libclntsh.so | grep-E "OCIEnvCreate |
> OCIHandleFree"
> 000000000044817e T OCIEnvCreate
> 00000000004481f6 T OCIHandleFree
>
>
> Best regards
>
> Luca
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Configure-error-with-Oracle-instantclient-11-2-0-3-tp4889509p4933492.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ari.jolma at gmail.com  Fri Apr 27 09:39:13 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri Apr 27 09:40:06 2012
Subject: [gdal-dev] aux/lyr/rrd raster dataset?
Message-ID: <4F9AA181.5010104@gmail.com>

Hi,

I got some data in files which have aux, lyr and rrd extensions. I 
believe they are raster datasets in some ESRI or ERDAS formats.

My GDAL did not recognize them immediately. Can somebody explain a bit 
what do I have?

Cheers,

Ari

From diego.gnesi at gmail.com  Fri Apr 27 09:44:42 2012
From: diego.gnesi at gmail.com (diegogb)
Date: Fri Apr 27 09:44:57 2012
Subject: [gdal-dev] OFTReal values truncated to integer
Message-ID: <1335534282078-4933952.post@n6.nabble.com>

I have a problem on storing double values on shapefiles fields.
If I execute this code:

//...
OGRFieldDefn zField("Elev", OFTReal);
layer->CreateField(&zField);
//...
OGRFeature *pointFeature = OGRFeature::CreateFeature(layer->GetLayerDefn());
OGRPoint thePoint;
thePoint.setX(1);
thePoint.setY(1);
thePoint.setZ(1);
pointFeature->SetGeometry(&thePoint);
double myVal = 1.3;
pointFeature->SetField("Elev", myVal);
layer->CreateFeature(pointFeature);
OGRFeature::DestroyFeature(pointFeature);
// Close data source etc.

When I open with Quantum GIS the file created by my program, the field
"Elev" does not contains 1.3 but 1. Why?!?
If i edit the file on QGIS, i can write 1.3 instead of 1, so the field type
is real and not integer...
I'm a GDAL newbie, but the code is so simple that i can't figure where is
the problem!

Thanks.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/OFTReal-values-truncated-to-integer-tp4933952p4933952.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Fri Apr 27 09:57:39 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr 27 09:57:53 2012
Subject: [gdal-dev] aux/lyr/rrd raster dataset?
In-Reply-To: <4F9AA181.5010104@gmail.com>
References: <4F9AA181.5010104@gmail.com>
Message-ID: <1335535059.4f9aa5d3d60e0@imp.free.fr>

Selon Ari Jolma <ari.jolma@gmail.com>:

> Hi,
>
> I got some data in files which have aux, lyr and rrd extensions. I
> believe they are raster datasets in some ESRI or ERDAS formats.
>
> My GDAL did not recognize them immediately. Can somebody explain a bit
> what do I have?

Ari,

.aux and .rrd files are companion files of ERDAS Imagine datasets (whose main
files are .img). GDAL is also able to read/generate .aux/.rrd as overviews of
other raster formats.

.lyr files are ESRI specific stuff (A search lead me to
http://www.lib.ncsu.edu/gis/formats.html ) and GDAL/OGR has no driver for that
one. Would be more the equivalent of a MapServer mapfile, or a QGIS project
file.

Best regards,

Even

From Michael.Smith at maine.gov  Fri Apr 27 09:42:18 2012
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Fri Apr 27 09:59:33 2012
Subject: [gdal-dev] aux/lyr/rrd raster dataset?
In-Reply-To: <4F9AA181.5010104@gmail.com>
References: <4F9AA181.5010104@gmail.com>
Message-ID: <4EFF8BB964547748A07CA32961810C041D2A7198@SOM-TEAQASMAIL1.som.w2k.state.me.us>

They are all extra things that GDAL does not need:

LYR is an ArcGIS layer file, it just stores symbology and so on about
how to represent data in ArcMap.
AUX is an auxiliary statistics file which ArcGIS generates for doing
stretches, histograms, etc
RRD is a pyramid file which ArcGIS generates to display raster data
faster at various scales

These files by themselves are not raster data - they will accompany
something else, i.e. a TIFF file or something like that.

======================================
Michael Smith
State GIS Manager, Maine Office of GIS
State of Maine, Office of Information Technology
michael.smith _at_ maine.gov
207-215-5530

Board Member, Maine GeoLibrary
Board Member, Maine GIS Users Group
State Rep, National States Geographic Information Council

| MEGIS | GeoLibrary | MEGUG | NSGIC |

State House Station 174
264 Civic Center Drive
Augusta, ME 04333-0174

69 o 47' 49.5"W   44 o 20' 54.5"N 

Confidentiality Notice: This email message, including any attachments,
is for the sole use of the intended recipients and may contain
confidential and privileged information. If you are not the intended
recipient, or an authorized agent of the intended recipient, please
immediately contact the sender by reply email and destroy/delete all
copies of the original message. Any unauthorized review, use, copying,
forwarding, disclosure, or distribution by other than the intended
recipient or authorized agent is prohibited.

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ari Jolma
Sent: Friday, April 27, 2012 9:39 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] aux/lyr/rrd raster dataset?

Hi,

I got some data in files which have aux, lyr and rrd extensions. I 
believe they are raster datasets in some ESRI or ERDAS formats.

My GDAL did not recognize them immediately. Can somebody explain a bit 
what do I have?

Cheers,

Ari

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Fri Apr 27 10:26:53 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Apr 27 10:27:03 2012
Subject: [gdal-dev] OFTReal values truncated to integer
In-Reply-To: <1335534282078-4933952.post@n6.nabble.com>
References: <1335534282078-4933952.post@n6.nabble.com>
Message-ID: <1335536813.4f9aacadc5bd2@imp.free.fr>

Selon diegogb <diego.gnesi@gmail.com>:

> I have a problem on storing double values on shapefiles fields.
> If I execute this code:
>
> //...
> OGRFieldDefn zField("Elev", OFTReal);
> layer->CreateField(&zField);
> //...
> OGRFeature *pointFeature = OGRFeature::CreateFeature(layer->GetLayerDefn());
> OGRPoint thePoint;
> thePoint.setX(1);
> thePoint.setY(1);
> thePoint.setZ(1);
> pointFeature->SetGeometry(&thePoint);
> double myVal = 1.3;
> pointFeature->SetField("Elev", myVal);
> layer->CreateFeature(pointFeature);
> OGRFeature::DestroyFeature(pointFeature);
> // Close data source etc.
>
> When I open with Quantum GIS the file created by my program, the field
> "Elev" does not contains 1.3 but 1. Why?!?
> If i edit the file on QGIS, i can write 1.3 instead of 1, so the field type
> is real and not integer...
> I'm a GDAL newbie, but the code is so simple that i can't figure where is
> the problem!

Nothing strikes me as wrong in your code snippet. I'm pretty sure this should
work. Perhaps it is an issue with your locale setting, for example if the
decimal separator is comma instead of point. Perhaps you could open the .dbf
file with an hexadecimal editor and look for your 1.3 value in it (it should be
readable in ASCII characters after the binary header).

>
> Thanks.
>
> --
> View this message in context:
>
http://osgeo-org.1560.n6.nabble.com/OFTReal-values-truncated-to-integer-tp4933952p4933952.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From warmerdam at pobox.com  Fri Apr 27 15:04:32 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Apr 27 15:04:57 2012
Subject: [gdal-dev] 1.9.1 Release Soon
Message-ID: <CA+YzLBf8idG2n7o7MvGCfZtzvyJOhjx+s8whTTzr3W3dT3UCbQ@mail.gmail.com>

Folks,

I'm interesting in pushing out a 1.9.1 release in the next week.
Is there anything we should make sure makes it in?  From my
perspective the one item I want to address first is:

  http://trac.osgeo.org/gdal/ticket/4607 - geotiff epsg code preservation

If I don't hear otherwise I'll hopefully prepare an RC over the weekend.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From diego.gnesi at gmail.com  Fri Apr 27 19:15:55 2012
From: diego.gnesi at gmail.com (diegogb)
Date: Fri Apr 27 19:16:46 2012
Subject: [gdal-dev] Re: OFTReal values truncated to integer
In-Reply-To: <1335536813.4f9aacadc5bd2@imp.free.fr>
References: <1335534282078-4933952.post@n6.nabble.com>
	<1335536813.4f9aacadc5bd2@imp.free.fr>
Message-ID: <1335568555237-4935426.post@n6.nabble.com>

When I open the dbf file with LibreOffice Calc, the value of the Elev field
is 1.
*If I open the same file with GHex, the value, represented in ASCII, is
"1,3"*, so I think that you're right and GDAL uses my local settings and
writes reals using the comma to separate the decimal digits from the integer
part.
If the supposition is correct, it's a serious serious bug, because an
Italian user could execute a program based on gdal and get approximated
results with no error or warnings!
Tomorrow I'll make experiments changing my local settings.
Are there some Italian users who experimented the same issue?

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/OFTReal-values-truncated-to-integer-tp4933952p4935426.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From diego.gnesi at gmail.com  Fri Apr 27 19:21:16 2012
From: diego.gnesi at gmail.com (diegogb)
Date: Fri Apr 27 19:21:34 2012
Subject: [gdal-dev] Re: OFTReal values truncated to integer
In-Reply-To: <1335568555237-4935426.post@n6.nabble.com>
References: <1335534282078-4933952.post@n6.nabble.com>
	<1335536813.4f9aacadc5bd2@imp.free.fr>
	<1335568555237-4935426.post@n6.nabble.com>
Message-ID: <1335568876050-4935441.post@n6.nabble.com>

In addiction to what I previously wrote, I noticed that the problem does not
affect the x and y coordinates of the point.
I'm using the last version of the Linux Mint OS.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/OFTReal-values-truncated-to-integer-tp4933952p4935441.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From sfkeller at gmail.com  Fri Apr 27 19:23:59 2012
From: sfkeller at gmail.com (Stefan Keller)
Date: Fri Apr 27 19:24:24 2012
Subject: [gdal-dev] OGR ESRI ArcSDE driver tested with ArcSDE 10 (Windows)?
Message-ID: <CAFcOn2_SzbL56+TwxxxC440AL=NGxFG9Uw7G+iQfvxxOG5RcFQ@mail.gmail.com>

The OGR doc here http://www.gdal.org/ogr/drv_sde.html says:
> The driver has been tested with ArcSDE 9.x, and should work with newer versions

Has anybody tested it with ArcSDE 10.x (especially under Windows)?

Yours, S.
From egoddard1010 at gmail.com  Sat Apr 28 00:47:03 2012
From: egoddard1010 at gmail.com (Eric Goddard)
Date: Sat Apr 28 00:47:30 2012
Subject: [gdal-dev] compiling gdal 1.9 with FGDB support
Message-ID: <CAMM2+YpuLJj5LoXCtKffbWyS=C=vs-uiBgvbKUJchRtCYj0tSQ@mail.gmail.com>

Hello everyone,

I'm attempting to compile gdal 1.9 with fgdb support on kubuntu 12.04. I've
downloaded the FileGDB api and have it set it up in /usr/local. Running the
samples from the FileGDB folder completes successfully.

I'm configuring gdal with the following options:
 ./configure --with-geos=yes --with-sqlite3
--with-fgdb=/usr/local/FileGDB_API --with-python --with-spatialite
--with-curl

The summary says the fgdb support has been enabled, but make ends with the
following error:

/usr/bin/ld: cannot find -lfgdblinuxrtl
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/home/eric/Downloads/gdal-1.9.0'
make: *** [check-lib] Error 2

Does anyone know why this might be happening? I've added a conf file to
/etc/ld.so.conf.d/ with the path to the FileGDB_API folder and ran
ldconfig. Both the fgdblinuxrtl.so and filegdbapi.so are in the
FileGDB_API/lib folder.

Thanks,
Eric
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120427/45ef4f9e/attachment.html
From even.rouault at mines-paris.org  Sat Apr 28 06:56:07 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr 28 06:53:35 2012
Subject: [gdal-dev] compiling gdal 1.9 with FGDB support
In-Reply-To: <CAMM2+YpuLJj5LoXCtKffbWyS=C=vs-uiBgvbKUJchRtCYj0tSQ@mail.gmail.com>
References: <CAMM2+YpuLJj5LoXCtKffbWyS=C=vs-uiBgvbKUJchRtCYj0tSQ@mail.gmail.com>
Message-ID: <201204281256.07469.even.rouault@mines-paris.org>

Le samedi 28 avril 2012 06:47:03, Eric Goddard a ?crit :
> Hello everyone,
> 
> I'm attempting to compile gdal 1.9 with fgdb support on kubuntu 12.04. I've
> downloaded the FileGDB api and have it set it up in /usr/local. Running the
> samples from the FileGDB folder completes successfully.
> 
> I'm configuring gdal with the following options:
>  ./configure --with-geos=yes --with-sqlite3
> --with-fgdb=/usr/local/FileGDB_API --with-python --with-spatialite
> --with-curl
> 
> The summary says the fgdb support has been enabled, but make ends with the
> following error:
> 
> /usr/bin/ld: cannot find -lfgdblinuxrtl
> collect2: ld returned 1 exit status
> make[1]: *** [libgdal.la] Error 1
> make[1]: Leaving directory `/home/eric/Downloads/gdal-1.9.0'
> make: *** [check-lib] Error 2
> 
> Does anyone know why this might be happening? I've added a conf file to
> /etc/ld.so.conf.d/ with the path to the FileGDB_API folder and ran
> ldconfig. Both the fgdblinuxrtl.so and filegdbapi.so are in the
> FileGDB_API/lib folder.

In the /etc/l.so.conf.d/ you must point to /usr/local/FileGDB_API/lib, not 
/usr/local/FileGDB_API

> 
> Thanks,
> Eric
From jp4work at gmail.com  Sat Apr 28 07:49:15 2012
From: jp4work at gmail.com (JIA Pei)
Date: Sat Apr 28 07:49:25 2012
Subject: [gdal-dev] gdal with CMake?
Message-ID: <CADh8Q_W_z7O7V11MDPhHXNCvVDTm6swRWge5Y8YhtFWQ7x2SJw@mail.gmail.com>

Hi, all:

I'm just wondering if gdal is going to be using cmake, instead of current

./configure
make
make install ?

What's more, after "./configure", I got a bunch of "no"s which seem not
required by gdal. For instance:

checking direct.h usability... no
checking direct.h presence... no
checking for direct.h... no
...
checking for int8... no
checking for int16... no
checking for int32... no
...
checking for G_gisinit_2 in -lgrass5... no
checking for ffopen in -lcfitsio... no
libcfitsio not found - FITS support disabled
checking for Mopen in -lcsf... no
checking csf.h usability... no
checking csf.h presence... no
checking for csf.h... no
...
checking for gta_version in -lgta... no
...
checking ecs.h usability... no
checking ecs.h presence... no
checking for ecs.h... no
...
checking for FMEObjects... no
...
checking for OpenGeodatabase in -lFileGDBAPI... no
checking for NCScbmOpenFileView in -lNCSEcw... no
checking for NCScbmOpenFileView in -lecwj2... no
checking for Kakadu JPEG2000 support... not requested.
configure: MrSID support disabled.
configure: MrSID/MG4 Lidar support disabled.
checking for MSG... not requested
...
checking for OpenCL support... no
checking for FreeXL support... checking freexl.h usability... no
checking freexl.h presence... no
checking for freexl.h... no
checking for freexl_open in -lfreexl... no
checking for freexl_open in -lfreexl... no
checking for freexl_open in -lfreexl... no
...
checking for poppler... disabled
checking for podofo... disabled
...
checking for perl bindings... disabled
checking for php bindings... disabled
checking for ruby bindings... disabled
checking for python bindings... disabled
checking whether we should include Java support... no
checking whether we should include MDB support... no
configure: checking whether we should include rasdaman support...
        rasdaman support not requested.
checking whether we should include Armadillo support... no


Just want to know what are these files for? which packages are these files
corresponding to?


Cheers
Pei



-- 

Pei JIA

Email: jp4work@gmail.com
cell:    +1 604-362-5816

Welcome to Vision Open
http://www.visionopen.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120428/aaf941d6/attachment.html
From polimax at mail.ru  Sat Apr 28 08:04:56 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Sat Apr 28 08:05:20 2012
Subject: [gdal-dev] gdal with CMake?
In-Reply-To: <CADh8Q_W_z7O7V11MDPhHXNCvVDTm6swRWge5Y8YhtFWQ7x2SJw@mail.gmail.com>
References: <CADh8Q_W_z7O7V11MDPhHXNCvVDTm6swRWge5Y8YhtFWQ7x2SJw@mail.gmail.com>
Message-ID: <4F9BDCE8.9060708@mail.ru>

28.04.2012 15:49, JIA Pei ???????:
>
> Hi, all:
>
> I'm just wondering if gdal is going to be using cmake, instead of current
>
> ./configure
> make
> make install ?
>
> What's more, after "./configure", I got a bunch of "no"s which seem 
> not required by gdal. For instance:
>
> checking direct.h usability... no
> checking direct.h presence... no
> checking for direct.h... no
> ...
> checking for int8... no
> checking for int16... no
> checking for int32... no
> ...
> checking for G_gisinit_2 in -lgrass5... no
> checking for ffopen in -lcfitsio... no
> libcfitsio not found - FITS support disabled
> checking for Mopen in -lcsf... no
> checking csf.h usability... no
> checking csf.h presence... no
> checking for csf.h... no
> ...
> checking for gta_version in -lgta... no
> ...
> checking ecs.h usability... no
> checking ecs.h presence... no
> checking for ecs.h... no
> ...
> checking for FMEObjects... no
> ...
> checking for OpenGeodatabase in -lFileGDBAPI... no
> checking for NCScbmOpenFileView in -lNCSEcw... no
> checking for NCScbmOpenFileView in -lecwj2... no
> checking for Kakadu JPEG2000 support... not requested.
> configure: MrSID support disabled.
> configure: MrSID/MG4 Lidar support disabled.
> checking for MSG... not requested
> ...
> checking for OpenCL support... no
> checking for FreeXL support... checking freexl.h usability... no
> checking freexl.h presence... no
> checking for freexl.h... no
> checking for freexl_open in -lfreexl... no
> checking for freexl_open in -lfreexl... no
> checking for freexl_open in -lfreexl... no
> ...
> checking for poppler... disabled
> checking for podofo... disabled
> ...
> checking for perl bindings... disabled
> checking for php bindings... disabled
> checking for ruby bindings... disabled
> checking for python bindings... disabled
> checking whether we should include Java support... no
> checking whether we should include MDB support... no
> configure: checking whether we should include rasdaman support...
>         rasdaman support not requested.
> checking whether we should include Armadillo support... no
>
>
> Just want to know what are these files for? which packages are these 
> files corresponding to?
>
>
> Cheers
> Pei
>
>
>
> -- 
>
> Pei JIA
>
> Email: jp4work@gmail.com <mailto:jp4work@gmail.com>
> cell:    +1 604-362-5816
>
> Welcome to Vision Open
> http://www.visionopen.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi,
The work on GDAL CMake is going on.

Best regards,
     Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120428/c42a64ea/attachment-0001.html
From mateusz at loskot.net  Sat Apr 28 08:09:35 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Apr 28 08:10:25 2012
Subject: [gdal-dev] Question about json-c mods in changeset r18545
Message-ID: <CABUeae_d2vb3i_fNyKBSvuy_XrsgxcO_StwN-gXn9cxqaMnhcA@mail.gmail.com>

Even, Folks,

I noticed your commit r18545 in json-c version maintained in GDAL tree [1].

It says: "bug fix submitted to jsonc maintener now"
I don't know the details who, how and where this was submitted to the
upstream, but
quick investigation [2] I've made suggests this change hasn't made it
to the json-c sources,
I tried to re-submit, but has been rejected by the json-c maintainer.

So, I want to figure out if this change is still required by GDAL
users, especially those
using MinGW to build GDAL. If not, that's cool.
If it is required, I will likely have to apply fix suggested by Eric [2].

I do not use MinGW, but could you or anyone who is concerned about MinGW support
try the following test and report any errors occurred?

https://gist.github.com/2518402

(copy at http://codepad.org/users/mloskot)

The json-c has been updated and improved significantly between 0.9 and
the upcoming 1.0.
My aim is to push as many GDAL-derived json-c fixes as possible to the json-c
upstream, then update json-c in GDAL with the upstream.

[1] http://trac.osgeo.org/gdal/changeset/18545/trunk/gdal/ogr/ogrsf_frmts/geojson/jsonc?rev=18545
[2] https://groups.google.com/forum/?fromgroups#!topic/json-c/2w3zoKbPwJU

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From mateusz at loskot.net  Sat Apr 28 08:23:57 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Apr 28 08:24:42 2012
Subject: [gdal-dev] gdal with CMake?
In-Reply-To: <CADh8Q_W_z7O7V11MDPhHXNCvVDTm6swRWge5Y8YhtFWQ7x2SJw@mail.gmail.com>
References: <CADh8Q_W_z7O7V11MDPhHXNCvVDTm6swRWge5Y8YhtFWQ7x2SJw@mail.gmail.com>
Message-ID: <CABUeae_Y87LAEzboNz1urfgWGVb5gWmAkrCC1mXJdTxCfgFadA@mail.gmail.com>

On 28 April 2012 12:49, JIA Pei <jp4work@gmail.com> wrote:
> Hi, all:
>
> I'm just wondering if gdal is going to be using cmake, instead of current
> [..]

Check the News section at http://trac.osgeo.org/gdal/wiki/CMake
Be patient.
Stay tuned.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From even.rouault at mines-paris.org  Sat Apr 28 08:40:30 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr 28 08:37:54 2012
Subject: [gdal-dev] gdal with CMake?
In-Reply-To: <CADh8Q_W_z7O7V11MDPhHXNCvVDTm6swRWge5Y8YhtFWQ7x2SJw@mail.gmail.com>
References: <CADh8Q_W_z7O7V11MDPhHXNCvVDTm6swRWge5Y8YhtFWQ7x2SJw@mail.gmail.com>
Message-ID: <201204281440.31125.even.rouault@mines-paris.org>

Le samedi 28 avril 2012 13:49:15, JIA Pei a ?crit :
> Hi, all:
> 
> I'm just wondering if gdal is going to be using cmake, instead of current
> 
> ./configure
> make
> make install ?
> 
> What's more, after "./configure", I got a bunch of "no"s which seem not
> required by gdal. For instance:
> 
> 
> Just want to know what are these files for? which packages are these files
> corresponding to?

If the configure outputs a nice log at the end, then you don't have to worry. 
GDAL has many many optional dependencies (look at ./configure --help), so it is 
expected that various no/disabled messages appear in the output of configure 
when doing a default build.

> 
> 
> Cheers
> Pei
From even.rouault at mines-paris.org  Sat Apr 28 09:07:15 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr 28 09:04:24 2012
Subject: [gdal-dev] Question about json-c mods in changeset r18545
In-Reply-To: <CABUeae_d2vb3i_fNyKBSvuy_XrsgxcO_StwN-gXn9cxqaMnhcA@mail.gmail.com>
References: <CABUeae_d2vb3i_fNyKBSvuy_XrsgxcO_StwN-gXn9cxqaMnhcA@mail.gmail.com>
Message-ID: <201204281507.15060.even.rouault@mines-paris.org>

Le samedi 28 avril 2012 14:09:35, Mateusz Loskot a ?crit :
> Even, Folks,
> 
> I noticed your commit r18545 in json-c version maintained in GDAL tree [1].
> 
> It says: "bug fix submitted to jsonc maintener now"
> I don't know the details who, how and where this was submitted to the
> upstream,

Well, I submitted it, but I don't recall if I followed if it was accepted or

> 
> I do not use MinGW, but could you or anyone who is concerned about MinGW
> support try the following test and report any errors occurred?
> 
> https://gist.github.com/2518402

I've tried with 2 mingw versions, and with both the %lf %lg don't work well 
(although the output is a bit different)

$ gcc --version
gcc.exe (GCC) 3.4.5 (mingw-vista special r3)
Copyright (C) 2004 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ ./test.exe
n1=-1375090688, n2=302
dnum=1.3e+012, dden=1.99989e+012, dpercent=65.00
(l) ldnum=-3.07944e-196, ldden=-9.36335e-097, ldpercent=0.00
(L) ldnum=-3.07944e-196, ldden=-9.36335e-097, ldpercent=0.00



$ /e/mingw-new/bin/gcc --version
gcc.exe (GCC) 4.5.0
Copyright (C) 2010 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ PATH=/e/MinGW-new/bin:$PATH gcc test.c -O2 -Wall -o test.exe
test.c: In function 'main':
test.c:16:1: warning: format '%ld' expects type 'long int', but argument 2 has 
type 'int64_t'
test.c:16:1: warning: format '%ld' expects type 'long int', but argument 3 has 
type 'int64_t'
test.c:18:1: warning: format '%lg' expects type 'double', but argument 2 has 
type 'long double'
test.c:18:1: warning: format '%lg' expects type 'double', but argument 3 has 
type 'long double'
test.c:18:1: warning: format '%4.2lf' expects type 'double', but argument 4 
has type 'long double'
test.c:19:1: warning: unknown conversion type character 'L' in format
test.c:19:1: warning: unknown conversion type character 'L' in format
test.c:19:1: warning: unknown conversion type character 'L' in format
test.c:19:1: warning: too many arguments for format

$ ./test.exe
n1=-1375090688, n2=302
dnum=1.3e+012, dden=1.99989e+012, dpercent=65.00
(l) ldnum=-3.07944e-196, ldden=-9.36336e-097, ldpercent=65.00
(L) ldnum=-3.07944e-196, ldden=-9.36336e-097, ldpercent=65.00

My conclusion is that %lf or %lg is unnecessary (and unspecified by the 
standards) when passing a double. When you specify %f in printf, the compiler 
naturally expects a double (and if you provide a float, due to the fact that it 
is a varags, it is automatically promoted to double). There is often 
confusion, because in sscanf, %f expects a pointer to a float, whereas %lf 
expects a pointer to a double. But printf is different...

> 
> (copy at http://codepad.org/users/mloskot)
> 
> The json-c has been updated and improved significantly between 0.9 and
> the upcoming 1.0.
> My aim is to push as many GDAL-derived json-c fixes as possible to the
> json-c upstream, then update json-c in GDAL with the upstream.
> 
> [1]
> http://trac.osgeo.org/gdal/changeset/18545/trunk/gdal/ogr/ogrsf_frmts/geoj
> son/jsonc?rev=18545 [2]
> https://groups.google.com/forum/?fromgroups#!topic/json-c/2w3zoKbPwJU
> 
> Best regards,
From egoddard1010 at gmail.com  Sat Apr 28 11:14:56 2012
From: egoddard1010 at gmail.com (Eric Goddard)
Date: Sat Apr 28 11:15:24 2012
Subject: [gdal-dev] compiling gdal 1.9 with FGDB support
In-Reply-To: <201204281256.07469.even.rouault@mines-paris.org>
References: <CAMM2+YpuLJj5LoXCtKffbWyS=C=vs-uiBgvbKUJchRtCYj0tSQ@mail.gmail.com>
	<201204281256.07469.even.rouault@mines-paris.org>
Message-ID: <CAMM2+YrsHr45BG5mK8Jq=zW-brOTfNyQjYEGaZcNawiaa=zCkg@mail.gmail.com>

Thanks for the response, Even. I updated the ld path and ran ldconfig, and
reran configure and make with the same options as before, but I received
this error message again:

/usr/bin/ld: cannot find -lfgdblinuxrtl
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/home/eric/Downloads/gdal-1.9.0'
make: *** [check-lib] Error 2

Running ldconfig -v outputs:
/usr/local/FileGDB_API/lib:
    libFileGDBAPI.so -> libFileGDBAPI.so
    libfgdbunixrtl.so -> libfgdbunixrtl.so

So it looks like ld finds libfgdbunixrtl.so...






On Sat, Apr 28, 2012 at 5:56 AM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le samedi 28 avril 2012 06:47:03, Eric Goddard a ?crit :
> > Hello everyone,
> >
> > I'm attempting to compile gdal 1.9 with fgdb support on kubuntu 12.04.
> I've
> > downloaded the FileGDB api and have it set it up in /usr/local. Running
> the
> > samples from the FileGDB folder completes successfully.
> >
> > I'm configuring gdal with the following options:
> >  ./configure --with-geos=yes --with-sqlite3
> > --with-fgdb=/usr/local/FileGDB_API --with-python --with-spatialite
> > --with-curl
> >
> > The summary says the fgdb support has been enabled, but make ends with
> the
> > following error:
> >
> > /usr/bin/ld: cannot find -lfgdblinuxrtl
> > collect2: ld returned 1 exit status
> > make[1]: *** [libgdal.la] Error 1
> > make[1]: Leaving directory `/home/eric/Downloads/gdal-1.9.0'
> > make: *** [check-lib] Error 2
> >
> > Does anyone know why this might be happening? I've added a conf file to
> > /etc/ld.so.conf.d/ with the path to the FileGDB_API folder and ran
> > ldconfig. Both the fgdblinuxrtl.so and filegdbapi.so are in the
> > FileGDB_API/lib folder.
>
> In the /etc/l.so.conf.d/ you must point to /usr/local/FileGDB_API/lib, not
> /usr/local/FileGDB_API
>
> >
> > Thanks,
> > Eric
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120428/844043b4/attachment.html
From even.rouault at mines-paris.org  Sat Apr 28 11:22:01 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr 28 11:19:49 2012
Subject: [gdal-dev] compiling gdal 1.9 with FGDB support
In-Reply-To: <CAMM2+YrsHr45BG5mK8Jq=zW-brOTfNyQjYEGaZcNawiaa=zCkg@mail.gmail.com>
References: <CAMM2+YpuLJj5LoXCtKffbWyS=C=vs-uiBgvbKUJchRtCYj0tSQ@mail.gmail.com>
	<201204281256.07469.even.rouault@mines-paris.org>
	<CAMM2+YrsHr45BG5mK8Jq=zW-brOTfNyQjYEGaZcNawiaa=zCkg@mail.gmail.com>
Message-ID: <201204281722.01280.even.rouault@mines-paris.org>

Le samedi 28 avril 2012 17:14:56, Eric Goddard a ?crit :
> Thanks for the response, Even. I updated the ld path and ran ldconfig, and
> reran configure and make with the same options as before, but I received
> this error message again:
> 
> /usr/bin/ld: cannot find -lfgdblinuxrtl
> collect2: ld returned 1 exit status
> make[1]: *** [libgdal.la] Error 1
> make[1]: Leaving directory `/home/eric/Downloads/gdal-1.9.0'
> make: *** [check-lib] Error 2
> 
> Running ldconfig -v outputs:
> /usr/local/FileGDB_API/lib:
>     libFileGDBAPI.so -> libFileGDBAPI.so
>     libfgdbunixrtl.so -> libfgdbunixrtl.so
> 
> So it looks like ld finds libfgdbunixrtl.so...

Ah, I guess you use FileGDB API 1.2. There was a change in ESRI delivery 
between FileGDB API 1.1 and 1.2. They renamed libgdblinuxrtl.so into  
libfgdbunixrtl.so. Support for FileGDB API 1.2 will be fixed in next-to-be-
released 1.9.1 (see http://trac.osgeo.org/gdal/ticket/4570 ). In the meantime, 
you can create a symlink, like that :

sudo ln -s /usr/local/FileGDB_API/lib/libfgdbunixrtl.so 
/usr/local/FileGDB_API/lib/libfgdblinuxrtl.so
From egoddard1010 at gmail.com  Sat Apr 28 11:47:33 2012
From: egoddard1010 at gmail.com (Eric Goddard)
Date: Sat Apr 28 11:48:06 2012
Subject: [gdal-dev] compiling gdal 1.9 with FGDB support
In-Reply-To: <201204281722.01280.even.rouault@mines-paris.org>
References: <CAMM2+YpuLJj5LoXCtKffbWyS=C=vs-uiBgvbKUJchRtCYj0tSQ@mail.gmail.com>
	<201204281256.07469.even.rouault@mines-paris.org>
	<CAMM2+YrsHr45BG5mK8Jq=zW-brOTfNyQjYEGaZcNawiaa=zCkg@mail.gmail.com>
	<201204281722.01280.even.rouault@mines-paris.org>
Message-ID: <CAMM2+Yo6_Nt4GnnABPDQ6btbUqYXYWFGeqApOREjy4Jbh9ohuQ@mail.gmail.com>

Thanks again Even, it worked that time. I should've specified which version
of the FGDB API I'm using. The library names were so similar I didn't even
notice the difference in the error message.

Eric

On Sat, Apr 28, 2012 at 10:22 AM, Even Rouault <even.rouault@mines-paris.org
> wrote:

> Le samedi 28 avril 2012 17:14:56, Eric Goddard a ?crit :
> > Thanks for the response, Even. I updated the ld path and ran ldconfig,
> and
> > reran configure and make with the same options as before, but I received
> > this error message again:
> >
> > /usr/bin/ld: cannot find -lfgdblinuxrtl
> > collect2: ld returned 1 exit status
> > make[1]: *** [libgdal.la] Error 1
> > make[1]: Leaving directory `/home/eric/Downloads/gdal-1.9.0'
> > make: *** [check-lib] Error 2
> >
> > Running ldconfig -v outputs:
> > /usr/local/FileGDB_API/lib:
> >     libFileGDBAPI.so -> libFileGDBAPI.so
> >     libfgdbunixrtl.so -> libfgdbunixrtl.so
> >
> > So it looks like ld finds libfgdbunixrtl.so...
>
> Ah, I guess you use FileGDB API 1.2. There was a change in ESRI delivery
> between FileGDB API 1.1 and 1.2. They renamed libgdblinuxrtl.so into
> libfgdbunixrtl.so. Support for FileGDB API 1.2 will be fixed in next-to-be-
> released 1.9.1 (see http://trac.osgeo.org/gdal/ticket/4570 ). In the
> meantime,
> you can create a symlink, like that :
>
> sudo ln -s /usr/local/FileGDB_API/lib/libfgdbunixrtl.so
> /usr/local/FileGDB_API/lib/libfgdblinuxrtl.so
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120428/36c16889/attachment.html
From diego.gnesi at gmail.com  Sat Apr 28 13:16:37 2012
From: diego.gnesi at gmail.com (diegogb)
Date: Sat Apr 28 13:17:05 2012
Subject: [gdal-dev] Re: OFTReal values truncated to integer
In-Reply-To: <1335568876050-4935441.post@n6.nabble.com>
References: <1335534282078-4933952.post@n6.nabble.com>
	<1335536813.4f9aacadc5bd2@imp.free.fr>
	<1335568555237-4935426.post@n6.nabble.com>
	<1335568876050-4935441.post@n6.nabble.com>
Message-ID: <1335633397295-4936894.post@n6.nabble.com>

Ok, I executed many tests and I found something strange.
I tried:

- QT Creator,
- CodeLite,
- Python

I wrote the following programs;

// C++ CodeLite version.
#include "gdal/ogrsf_frmts.h"

int main(int argc, char *argv[])
{
    OGRRegisterAll();
    OGRSFDriver *driver =
OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName("ESRI Shapefile");
    OGRDataSource *dSource =
driver->CreateDataSource("/home/diego/Documenti/P2/test.shp", NULL);
    OGRLayer *layer = dSource->CreateLayer("TestLayer", NULL, wkbPoint,
NULL);
    OGRFieldDefn elevField("Elev", OFTReal);
    layer->CreateField(&elevField);
    OGRFeature *pointFeature =
OGRFeature::CreateFeature(layer->GetLayerDefn());
    OGRPoint thePoint;
    double x=1.1, y=1.2, z=1.3;
    thePoint.setX(x);
    thePoint.setY(y);
    thePoint.setZ(z);
    pointFeature->SetGeometry(&thePoint);
    pointFeature->SetField("Elev", z);
    layer->CreateFeature(pointFeature);
    OGRFeature::DestroyFeature(pointFeature);
    OGRDataSource::DestroyDataSource(dSource);
    return 0;
}



//C++ Qt Creator version.
// (same code as above, but written as implementation of the class method
AltConverter.createFile().
#include "altconverter.h"
#include "gdal/ogrsf_frmts.h"

void AltConverter::createFile() {
        OGRRegisterAll();
        OGRSFDriver *driver =
OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName("ESRI Shapefile");
        OGRDataSource *dSource =
driver->CreateDataSource("/home/diego/Documenti/P2/test.shp", NULL);
        OGRLayer *layer = dSource->CreateLayer("TestLayer", NULL, wkbPoint,
NULL);
        OGRFieldDefn elevField("Elev", OFTReal);
        layer->CreateField(&elevField);
        OGRFeature *pointFeature =
OGRFeature::CreateFeature(layer->GetLayerDefn());
        OGRPoint thePoint;
        double x=1.1, y=1.2, z=1.3;
        thePoint.setX(x);
        thePoint.setY(y);
        thePoint.setZ(z);
        pointFeature->SetGeometry(&thePoint);
        pointFeature->SetField("Elev", z);
        layer->CreateFeature(pointFeature);
        OGRFeature::DestroyFeature(pointFeature);
        OGRDataSource::DestroyDataSource(dSource);
}



#! /usr/bin/python
# Python version.
import osgeo.ogr, osgeo.osr

driver = osgeo.ogr.GetDriverByName('ESRI Shapefile')
dSource = driver.CreateDataSource ('sample.shp')
layer = dSource.CreateLayer('TestLayer',  geom_type=osgeo.ogr.wkbPoint)
fieldDefn = osgeo.ogr.FieldDefn('Elev',  osgeo.ogr.OFTReal)
layer.CreateField(fieldDefn)
layerDefn = layer.GetLayerDefn()
newPoint = osgeo.ogr.Geometry(osgeo.ogr.wkbPoint)
newPoint.SetPoint(0, 1.1,  1.2)
newFeature = osgeo.ogr.Feature(layer.GetLayerDefn())
newFeature.SetGeometry(newPoint)
newFeature.SetField('Elev',  1.3)
layer.CreateFeature(newFeature)
newFeature.Destroy()
dSource.Destroy()


*Now, Python and CodeLite code work fine, and produce the value 1.3 for the
Elev field, Qt Creator code don't and the saved value is read as 1 (because
is codified as "1,3" and not as "1.3")!!!*

Now, I took a look inside the source code of the GDAL library.
The method that writes real values to the dbf file is
DBFWriteDoubleAttribute (inside the ogr/ogr_frmts/shape/dbfopen.c file).
I think that there must be a sprintf that writes values using local settings
while it shouldn't, but I don't know the library and I'm not able to check.
I think it's a bug to correct.

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/OFTReal-values-truncated-to-integer-tp4933952p4936894.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Sat Apr 28 13:26:22 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Apr 28 13:26:35 2012
Subject: [gdal-dev] Re: OFTReal values truncated to integer
In-Reply-To: <1335633397295-4936894.post@n6.nabble.com>
References: <1335534282078-4933952.post@n6.nabble.com>
	<1335536813.4f9aacadc5bd2@imp.free.fr>
	<1335568555237-4935426.post@n6.nabble.com>
	<1335568876050-4935441.post@n6.nabble.com>
	<1335633397295-4936894.post@n6.nabble.com>
Message-ID: <CAMKgpOZ0L2y1rbCe35YUCcYNpCU4Pz_=ErFnG_PKcUUvF7szrA@mail.gmail.com>

diegogb,

I too got a similar error, but with python code. I am working on a patch
for this.

On Sat, Apr 28, 2012 at 10:46 PM, diegogb <diego.gnesi@gmail.com> wrote:

> Ok, I executed many tests and I found something strange.
> I tried:
>
> - QT Creator,
> - CodeLite,
> - Python
>
> I wrote the following programs;
>
> // C++ CodeLite version.
> #include "gdal/ogrsf_frmts.h"
>
> int main(int argc, char *argv[])
> {
>    OGRRegisterAll();
>    OGRSFDriver *driver =
> OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName("ESRI Shapefile");
>    OGRDataSource *dSource =
> driver->CreateDataSource("/home/diego/Documenti/P2/test.shp", NULL);
>    OGRLayer *layer = dSource->CreateLayer("TestLayer", NULL, wkbPoint,
> NULL);
>    OGRFieldDefn elevField("Elev", OFTReal);
>    layer->CreateField(&elevField);
>     OGRFeature *pointFeature =
> OGRFeature::CreateFeature(layer->GetLayerDefn());
>    OGRPoint thePoint;
>     double x=1.1, y=1.2, z=1.3;
>    thePoint.setX(x);
>    thePoint.setY(y);
>    thePoint.setZ(z);
>    pointFeature->SetGeometry(&thePoint);
>    pointFeature->SetField("Elev", z);
>    layer->CreateFeature(pointFeature);
>    OGRFeature::DestroyFeature(pointFeature);
>    OGRDataSource::DestroyDataSource(dSource);
>    return 0;
> }
>
>
>
> //C++ Qt Creator version.
> // (same code as above, but written as implementation of the class method
> AltConverter.createFile().
> #include "altconverter.h"
> #include "gdal/ogrsf_frmts.h"
>
> void AltConverter::createFile() {
>        OGRRegisterAll();
>        OGRSFDriver *driver =
> OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName("ESRI Shapefile");
>        OGRDataSource *dSource =
> driver->CreateDataSource("/home/diego/Documenti/P2/test.shp", NULL);
>        OGRLayer *layer = dSource->CreateLayer("TestLayer", NULL, wkbPoint,
> NULL);
>        OGRFieldDefn elevField("Elev", OFTReal);
>        layer->CreateField(&elevField);
>         OGRFeature *pointFeature =
> OGRFeature::CreateFeature(layer->GetLayerDefn());
>        OGRPoint thePoint;
>         double x=1.1, y=1.2, z=1.3;
>        thePoint.setX(x);
>        thePoint.setY(y);
>        thePoint.setZ(z);
>        pointFeature->SetGeometry(&thePoint);
>        pointFeature->SetField("Elev", z);
>        layer->CreateFeature(pointFeature);
>        OGRFeature::DestroyFeature(pointFeature);
>        OGRDataSource::DestroyDataSource(dSource);
> }
>
>
>
> #! /usr/bin/python
> # Python version.
> import osgeo.ogr, osgeo.osr
>
> driver = osgeo.ogr.GetDriverByName('ESRI Shapefile')
> dSource = driver.CreateDataSource ('sample.shp')
> layer = dSource.CreateLayer('TestLayer',  geom_type=osgeo.ogr.wkbPoint)
> fieldDefn = osgeo.ogr.FieldDefn('Elev',  osgeo.ogr.OFTReal)
> layer.CreateField(fieldDefn)
> layerDefn = layer.GetLayerDefn()
> newPoint = osgeo.ogr.Geometry(osgeo.ogr.wkbPoint)
> newPoint.SetPoint(0, 1.1,  1.2)
> newFeature = osgeo.ogr.Feature(layer.GetLayerDefn())
> newFeature.SetGeometry(newPoint)
> newFeature.SetField('Elev',  1.3)
> layer.CreateFeature(newFeature)
> newFeature.Destroy()
> dSource.Destroy()
>
>
> *Now, Python and CodeLite code work fine, and produce the value 1.3 for the
> Elev field, Qt Creator code don't and the saved value is read as 1 (because
> is codified as "1,3" and not as "1.3")!!!*
>
> Now, I took a look inside the source code of the GDAL library.
> The method that writes real values to the dbf file is
> DBFWriteDoubleAttribute (inside the ogr/ogr_frmts/shape/dbfopen.c file).
> I think that there must be a sprintf that writes values using local
> settings
> while it shouldn't, but I don't know the library and I'm not able to check.
> I think it's a bug to correct.
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/OFTReal-values-truncated-to-integer-tp4933952p4936894.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120428/de31de93/attachment.html
From even.rouault at mines-paris.org  Sat Apr 28 13:53:48 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr 28 13:51:34 2012
Subject: [gdal-dev] Re: OFTReal values truncated to integer
In-Reply-To: <1335633397295-4936894.post@n6.nabble.com>
References: <1335534282078-4933952.post@n6.nabble.com>
	<1335568876050-4935441.post@n6.nabble.com>
	<1335633397295-4936894.post@n6.nabble.com>
Message-ID: <201204281953.49082.even.rouault@mines-paris.org>

> *Now, Python and CodeLite code work fine, and produce the value 1.3 for the
> Elev field, Qt Creator code don't and the saved value is read as 1 (because
> is codified as "1,3" and not as "1.3")!!!*
> 
> Now, I took a look inside the source code of the GDAL library.
> The method that writes real values to the dbf file is
> DBFWriteDoubleAttribute (inside the ogr/ogr_frmts/shape/dbfopen.c file).
> I think that there must be a sprintf that writes values using local
> settings while it shouldn't, but I don't know the library and I'm not able
> to check. I think it's a bug to correct.

There are likely many places in GDAL where we unfortunately use locale 
sensitive rountines and we shouldn't. You can workaround this at your side by 
including cpl_conv.h and adding a "CPLLocaleC oLocaleCForcer;" before calling 
GDAL code. This will switch to the C locale temporarily and restore the 
original locale afterwards (at the end of the block where the object is 
declared).

> 
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/OFTReal-values-truncated-to-integer-tp
> 4933952p4936894.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From diego.gnesi at gmail.com  Sat Apr 28 18:09:41 2012
From: diego.gnesi at gmail.com (diegogb)
Date: Sat Apr 28 18:10:25 2012
Subject: [gdal-dev] Re: OFTReal values truncated to integer
In-Reply-To: <201204281953.49082.even.rouault@mines-paris.org>
References: <1335534282078-4933952.post@n6.nabble.com>
	<1335536813.4f9aacadc5bd2@imp.free.fr>
	<1335568555237-4935426.post@n6.nabble.com>
	<1335568876050-4935441.post@n6.nabble.com>
	<1335633397295-4936894.post@n6.nabble.com>
	<201204281953.49082.even.rouault@mines-paris.org>
Message-ID: <1335650981360-4937411.post@n6.nabble.com>

If I include "gdal/cpl_conv.h", code completition works, but I get a
compilation error:

undefined reference to `CPLLocaleC::CPLLocaleC()'

I searched in the source files of my GDAL library version (1.7.0) and the
CPLLocaleC class definition exists. I'm sorry for asking again you help!

My compilation instructions are:

g++ -c  "/home/diego/.codelite/test/main.cpp" -g  -o ./Debug/main.o "-I."
"-I." 
g++ -o ./Debug/CreateShapeFile ./Debug/main.o  "-L."  -lgdal1.7.0

--
View this message in context: http://osgeo-org.1560.n6.nabble.com/OFTReal-values-truncated-to-integer-tp4933952p4937411.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mateusz at loskot.net  Sat Apr 28 18:21:37 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Apr 28 18:22:35 2012
Subject: [gdal-dev] Question about json-c mods in changeset r18545
In-Reply-To: <201204281507.15060.even.rouault@mines-paris.org>
References: <CABUeae_d2vb3i_fNyKBSvuy_XrsgxcO_StwN-gXn9cxqaMnhcA@mail.gmail.com>
	<201204281507.15060.even.rouault@mines-paris.org>
Message-ID: <CABUeae--iUU6Tv514xzwzr0QGdGRPeRni3NyY_Aq2BdEicc9fg@mail.gmail.com>

On 28 April 2012 14:07, Even Rouault <even.rouault@mines-paris.org> wrote:
> Le samedi 28 avril 2012 14:09:35, Mateusz Loskot a ?crit :
>> I do not use MinGW, but could you or anyone who is concerned about MinGW
>> support try the following test and report any errors occurred?
>>
>> https://gist.github.com/2518402
>
> I've tried with 2 mingw versions, and with both the %lf %lg don't work well
> (although the output is a bit different)
> [...]

Even,

Big thanks for testing it for me.

> My conclusion is that %lf or %lg is unnecessary (and unspecified by the
> standards) when passing a double.

That's not really like that.

Given the current C99 (I use N1256 draft), the rules depend on the
function kind:
fprintf (printf, sprintf, ...) or scanf.

"Foreword
(...)
This second edition cancels and replaces the first edition, ISO/IEC
9899:1990, as
amended and corrected by ISO/IEC 9899/COR1:1994, ISO/IEC 9899/AMD1:1995, and
ISO/IEC 9899/COR2:1996. Major changes from the previous edition include:
(...)
%lf conversion specifier allowed in printf
(...)"

7.19.6.1 The fprintf function
   7 The length modifiers and their meanings are:
      l (ell) Specifies that (...) has no effect on a following a, A,
e, E, f, F, g, or G conversion
specifier.
      L Specifies that a following a, A, e, E, f, F, g, or G
conversion specifier
applies to a long double argument.

7.19.6.2 The fscanf function

   11 The length modifiers and their meanings are:
      l (ell) Specifies that (...) that a following a, A, e, E, f, F,
g, or G conversion specifier applies to
an argument with type pointer to double;
      L Specifies that a following a, A, e, E, f, F, g, or G
conversion specifier
applies to an argument with type pointer to long double.

   12 The conversion specifiers and their meanings are:
      a,e,f,g Matches an optionally signed floating-point number, (...)

   14 The conversion specifiers A, E, F, G, and X are also valid and
behave the same as,
respectively, a, e, f, g, and x.

Long story short, for printf:
%f -> double
%Lf -> for long double.

for scanf::
%f -> float
%lf -> double
%Lf -> for long double.

Or, I'm misunderstanding the C99 document.
If I'm correct, then all C99 compilers should printf using %Lf
but not %lf, thus json-c is incorrect and I have the basis to suggest
the json-c maintainers to fix it.

Even, would you agree?

> When you specify %f in printf, the compiler
> naturally expects a double (and if you provide a float, due to the fact that it
> is a varags, it is automatically promoted to double). There is often
> confusion, because in sscanf, %f expects a pointer to a float, whereas %lf
> expects a pointer to a double. But printf is different...

Yes, but the difference is important.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From even.rouault at mines-paris.org  Sat Apr 28 18:38:20 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Apr 28 18:35:39 2012
Subject: [gdal-dev] Question about json-c mods in changeset r18545
In-Reply-To: <CABUeae--iUU6Tv514xzwzr0QGdGRPeRni3NyY_Aq2BdEicc9fg@mail.gmail.com>
References: <CABUeae_d2vb3i_fNyKBSvuy_XrsgxcO_StwN-gXn9cxqaMnhcA@mail.gmail.com>
	<201204281507.15060.even.rouault@mines-paris.org>
	<CABUeae--iUU6Tv514xzwzr0QGdGRPeRni3NyY_Aq2BdEicc9fg@mail.gmail.com>
Message-ID: <201204290038.21112.even.rouault@mines-paris.org>

> 
> Long story short, for printf:
> %f -> double
> %Lf -> for long double.
> 
> for scanf::
> %f -> float
> %lf -> double
> %Lf -> for long double.
> 
> Or, I'm misunderstanding the C99 document.
> If I'm correct, then all C99 compilers should printf using %Lf
> but not %lf, thus json-c is incorrect and I have the basis to suggest
> the json-c maintainers to fix it.
> 
> Even, would you agree?

yes, in json-c, long double isn't used, so "%f" should be sufficient. With 
mingw, using "%lf" is dangerous since apparently it triggers a bad interaction 
between a Microsoft extension and possibly a bad implementation in mingw. I'm 
not yet sure to have understood what really happens though.
From tyler.mitchell at actian.com  Sat Apr 28 23:22:58 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Sat Apr 28 23:23:21 2012
Subject: [gdal-dev] Propose Chen Zhen as committer
Message-ID: <F3878937-6588-4E2B-A456-7A5165FA0E1C@actian.com>

Chen Zhen (zhenchen17) has been instrumental at tweaking our Ingres driver in OGR 
and he hopes for further contributions in the future (backporting and other improvements).

At Frank's suggestion I'm proposing that Chen is set up to do commits to
his area of focus directly.  Having him with commit access will really
help streamline support and improvements over the longer term.

I've sent him the reference to the RFC for committers guidelines and requirements and
he is interested.

Thanks,
Tyler

Tyler Mitchell
Engineering Director 
Actian Corporation
tyler.mitchell@actian.com

MOBILE 250-303-1831
SKYPE spatialguru
www.actian.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120428/904a809e/attachment.html
From saad.hessane at gmail.com  Sun Apr 29 06:39:20 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Sun Apr 29 06:39:42 2012
Subject: [gdal-dev] Building minimalist gdal on Windows x64
Message-ID: <CAEcp1tAWygF9OPviKNkUZAJ-TTU5psRmQbTs932MBcHibU9KPg@mail.gmail.com>

Hi list,

I would like to compile gdal 1.9 with minimalist driver list (I need just
VRT and GeoTIFF with LZW compression support). I think the only dependance
in this case is the proj4 library (linked dynamicly).
There is a simple way to do it like Linux autoconf : --without-gif
--without-png ... ?

Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120429/52239b42/attachment.html
From diego.gnesi at gmail.com  Sun Apr 29 06:54:38 2012
From: diego.gnesi at gmail.com (diegogb)
Date: Sun Apr 29 06:54:51 2012
Subject: [gdal-dev] Re: OFTReal values truncated to integer
In-Reply-To: <1335650981360-4937411.post@n6.nabble.com>
References: <1335534282078-4933952.post@n6.nabble.com>
	<1335536813.4f9aacadc5bd2@imp.free.fr>
	<1335568555237-4935426.post@n6.nabble.com>
	<1335568876050-4935441.post@n6.nabble.com>
	<1335633397295-4936894.post@n6.nabble.com>
	<201204281953.49082.even.rouault@mines-paris.org>
	<1335650981360-4937411.post@n6.nabble.com>
Message-ID: <1335696878569-4938340.post@n6.nabble.com>

Uh, ok, I forgot to add () after the variable name:

CPLLocaleC oLocaleCForcer();

For future readers, I also specify that this declaration must be placed
*after* the "OGRRegisterAll();" line to take effect.
For completeness, does anyone know how to do the same hack in Python code?

Thank you all, I appreciated the support that this community gave me.


--
View this message in context: http://osgeo-org.1560.n6.nabble.com/OFTReal-values-truncated-to-integer-tp4933952p4938340.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mateusz at loskot.net  Sun Apr 29 15:28:01 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Apr 29 15:28:27 2012
Subject: [gdal-dev] Question about json-c mods in changeset r18545
In-Reply-To: <201204290038.21112.even.rouault@mines-paris.org>
References: <CABUeae_d2vb3i_fNyKBSvuy_XrsgxcO_StwN-gXn9cxqaMnhcA@mail.gmail.com>
	<201204281507.15060.even.rouault@mines-paris.org>
	<CABUeae--iUU6Tv514xzwzr0QGdGRPeRni3NyY_Aq2BdEicc9fg@mail.gmail.com>
	<201204290038.21112.even.rouault@mines-paris.org>
Message-ID: <CABUeae8LbgcM6XhEvE+en5C5F5e6Ymn-Wtke9HpD=-iWuaHFXA@mail.gmail.com>

On 28 April 2012 23:38, Even Rouault <even.rouault@mines-paris.org> wrote:
>>
>> Long story short, for printf:
>> %f -> double
>> %Lf -> for long double.
>>
>> for scanf::
>> %f -> float
>> %lf -> double
>> %Lf -> for long double.
>>
>> Or, I'm misunderstanding the C99 document.
>> If I'm correct, then all C99 compilers should printf using %Lf
>> but not %lf, thus json-c is incorrect and I have the basis to suggest
>> the json-c maintainers to fix it.
>>
>> Even, would you agree?
>
> yes, in json-c, long double isn't used, so "%f" should be sufficient. With
> mingw, using "%lf" is dangerous since apparently it triggers a bad interaction
> between a Microsoft extension and possibly a bad implementation in mingw. I'm
> not yet sure to have understood what really happens though.

OK, the proposed fix has been accepted into the json-c and will be
released in json-c 1.0

https://github.com/json-c/json-c/commit/0cc1db6459035fd071371281daff030e5a0e9b8e

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From mateusz at loskot.net  Sun Apr 29 17:50:31 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Apr 29 17:51:17 2012
Subject: [gdal-dev] Proposing json-c update to pre-0.10
In-Reply-To: <201204221428.55502.even.rouault@mines-paris.org>
References: <CABUeae_agw3-K27=d1hE8yF-DCHoLYtT6RqsQf6vScP-yyTaxQ@mail.gmail.com>
	<201204221428.55502.even.rouault@mines-paris.org>
Message-ID: <CABUeae_JVDZJVS-q=tEbAMgwGR8yhMOE8a1X09E_ZoQ5rZGUrg@mail.gmail.com>

On 22 April 2012 13:28, Even Rouault <even.rouault@mines-paris.org> wrote:
> Le dimanche 22 avril 2012 02:03:06, Mateusz Loskot a ?crit :
>> Folks,
>>
>> Currently, GDAL uses json-c 0.9 (with some GDAL-specific fixes).
>> The json-c development has progressed and numerous bugs has been fixed.
>>
>> I wonder if I could update to json-c from its current Git master which
>> states the pre-0.10 version, it is: https://github.com/json-c
>>
>> Comments?
>
> Hi Mateusz,
>
> No objections from me, but be careful in the merge not to loose GDAL's
> customizations. See
> http://trac.osgeo.org/gdal/log/trunk/gdal/ogr/ogrsf_frmts/geojson/jsonc

Even,

I think I have ported GDAL modifications to the current json-c upstream.
Here is Git repo with branch called gdal-modification:

https://github.com/mloskot/json-c

I have tested it on Windows 7 with Visual Studio 2010 and
seem to work fine. I don't have access to any Linux machine at the moment,
so I will wait a bit with merging this branch into json-c in GDAL trunk
until I have a moment to get Linux env running.

Meanwhile, if anyone would want to give it a try and test, I will appreciate.

Cheers,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From even.rouault at mines-paris.org  Sun Apr 29 18:04:15 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 29 18:01:07 2012
Subject: [gdal-dev] Building minimalist gdal on Windows x64
In-Reply-To: <CAEcp1tAWygF9OPviKNkUZAJ-TTU5psRmQbTs932MBcHibU9KPg@mail.gmail.com>
References: <CAEcp1tAWygF9OPviKNkUZAJ-TTU5psRmQbTs932MBcHibU9KPg@mail.gmail.com>
Message-ID: <201204300004.15437.even.rouault@mines-paris.org>

Le dimanche 29 avril 2012 12:39:20, Sa?d HESSANE a ?crit :
> Hi list,
> 
> I would like to compile gdal 1.9 with minimalist driver list (I need just
> VRT and GeoTIFF with LZW compression support). I think the only dependance
> in this case is the proj4 library (linked dynamicly).
> There is a simple way to do it like Linux autoconf : --without-gif
> --without-png ... ?

You can hand edit frmts/makefile.vc and remove the formats you don't need in 
EXTRAFLAGS. Be warned : there are some hidden dependencies. GDAL's core 
depends on the presence of HFA. And VRT depends on the presence of RAW. You 
could get rid of those dependencies by editing code though, but that may be a 
bit overkill unless you really want the smallest possible lib.

> 
> Thank you.
From even.rouault at mines-paris.org  Sun Apr 29 18:04:55 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Apr 29 18:01:52 2012
Subject: [gdal-dev] Propose Chen Zhen as committer
In-Reply-To: <F3878937-6588-4E2B-A456-7A5165FA0E1C@actian.com>
References: <F3878937-6588-4E2B-A456-7A5165FA0E1C@actian.com>
Message-ID: <201204300004.55813.even.rouault@mines-paris.org>

Le dimanche 29 avril 2012 05:22:58, Tyler Mitchell a ?crit :
> Chen Zhen (zhenchen17) has been instrumental at tweaking our Ingres driver
> in OGR and he hopes for further contributions in the future (backporting
> and other improvements).
> 
> At Frank's suggestion I'm proposing that Chen is set up to do commits to
> his area of focus directly.  Having him with commit access will really
> help streamline support and improvements over the longer term.
> 
> I've sent him the reference to the RFC for committers guidelines and
> requirements and he is interested.

+1

Even
From warmerdam at pobox.com  Sun Apr 29 18:33:20 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Apr 29 18:33:42 2012
Subject: [gdal-dev] VersionInfo BUILD_INFO
Message-ID: <4F9DC1B0.5020009@pobox.com>

Folks,

We have a GDALVersionInfo() function which takes an argument about what
type of version information we want to get back.  I have added a new
possible type which is "BUILD_INFO".  The intention is that this would
return build time information that might be useful to scripts or applications
using GDAL to adjust behavior.   I'm imagining this as a NAME=VALUE pair
per line. I have exposed it via the --build commandline switch to GDAL
applications.

eg.
warmerda@gdal65[3]% gdalinfo --build
PAM_ENABLED=YES
OGR_ENABLED=YES

Note that this isn't intended to capture all the formats that are configured.
This is already accessable via --formats.  But it can capture other things.

Feel free to add new items in the function in gdal/gcore/gdal_misc.cpp.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From aperi2007 at gmail.com  Mon Apr 30 08:09:17 2012
From: aperi2007 at gmail.com (Andrea Peri)
Date: Mon Apr 30 08:09:43 2012
Subject: [gdal-dev] How create a simplified raster from an uge raster dataset
Message-ID: <CABqTJk867j=SN_ckhm4pxdXywK0T02wFNk22XJ2O3sO8Jf9Mmg@mail.gmail.com>

Hi,
I have a huge set of tiffs rasters.
Any single tiff is a geotiff tiled (256x256) and as an internal overview.

To can use this raster dataset to lower scales (full extension) I need to
create a single simplified tiff raster of all this dataset.
Now I need to create a single simplified tiff raster .

I don't know how is the better way to produce this simplified raster.
This because the original huge set of rasters are about 2 TB. Every raster
is about 15000 x 15000 px.

SO I start creating a catalog named "cat_fogli.vrt" using gdalbuildvrt.
And after this was create, I tryed to produce an external overview of this
catalog.
using this command:

gdaladdo -r average -ro --config BIGTIFF_OVERVIEW YES cat_fogli.vrt 256 512
1024 2048 4096

Unfortunately gdaladdo seem to be lock. It is take really many time and is
always on 0%.

I don't know if is only a bug time due to the huge size of original raster
dataset or I'm using the wrong way.

Thx,

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120430/d5f280e6/attachment.html
From saad.hessane at gmail.com  Mon Apr 30 08:26:19 2012
From: saad.hessane at gmail.com (=?ISO-8859-1?Q?Sa=E2d_HESSANE?=)
Date: Mon Apr 30 08:26:53 2012
Subject: [gdal-dev] How create a simplified raster from an uge raster
	dataset
In-Reply-To: <CABqTJk867j=SN_ckhm4pxdXywK0T02wFNk22XJ2O3sO8Jf9Mmg@mail.gmail.com>
References: <CABqTJk867j=SN_ckhm4pxdXywK0T02wFNk22XJ2O3sO8Jf9Mmg@mail.gmail.com>
Message-ID: <CAEcp1tDaXuxJXPa3af=+QKmXtHWNXureY4Rd3DrrLW2UkQtgqQ@mail.gmail.com>

Hi,

Try build a tileindex : http://www.gdal.org/gdaltindex.html
It's really useful with big tiled dataset.

Best regards.


2012/4/30 Andrea Peri <aperi2007@gmail.com>

> Hi,
> I have a huge set of tiffs rasters.
> Any single tiff is a geotiff tiled (256x256) and as an internal overview.
>
> To can use this raster dataset to lower scales (full extension) I need to
> create a single simplified tiff raster of all this dataset.
> Now I need to create a single simplified tiff raster .
>
> I don't know how is the better way to produce this simplified raster.
> This because the original huge set of rasters are about 2 TB. Every raster
> is about 15000 x 15000 px.
>
> SO I start creating a catalog named "cat_fogli.vrt" using gdalbuildvrt.
> And after this was create, I tryed to produce an external overview of this
> catalog.
> using this command:
>
> gdaladdo -r average -ro --config BIGTIFF_OVERVIEW YES cat_fogli.vrt 256
> 512 1024 2048 4096
>
> Unfortunately gdaladdo seem to be lock. It is take really many time and is
> always on 0%.
>
> I don't know if is only a bug time due to the huge size of original raster
> dataset or I'm using the wrong way.
>
> Thx,
>
> --
> -----------------
> Andrea Peri
> . . . . . . . . .
> qwerty ?????
> -----------------
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120430/f75ca5b5/attachment.html
From even.rouault at mines-paris.org  Mon Apr 30 09:42:53 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Apr 30 09:43:37 2012
Subject: [gdal-dev] How create a simplified raster from an uge raster
	dataset
In-Reply-To: <CABqTJk867j=SN_ckhm4pxdXywK0T02wFNk22XJ2O3sO8Jf9Mmg@mail.gmail.com>
References: <CABqTJk867j=SN_ckhm4pxdXywK0T02wFNk22XJ2O3sO8Jf9Mmg@mail.gmail.com>
Message-ID: <1335793373.4f9e96dd7035d@imp.free.fr>

Selon Andrea Peri <aperi2007@gmail.com>:

> Hi,
> I have a huge set of tiffs rasters.
> Any single tiff is a geotiff tiled (256x256) and as an internal overview.
>
> To can use this raster dataset to lower scales (full extension) I need to
> create a single simplified tiff raster of all this dataset.
> Now I need to create a single simplified tiff raster .
>
> I don't know how is the better way to produce this simplified raster.
> This because the original huge set of rasters are about 2 TB. Every raster
> is about 15000 x 15000 px.
>
> SO I start creating a catalog named "cat_fogli.vrt" using gdalbuildvrt.
> And after this was create, I tryed to produce an external overview of this
> catalog.
> using this command:
>
> gdaladdo -r average -ro --config BIGTIFF_OVERVIEW YES cat_fogli.vrt 256 512
> 1024 2048 4096
>
> Unfortunately gdaladdo seem to be lock. It is take really many time and is
> always on 0%.
>
> I don't know if is only a bug time due to the huge size of original raster
> dataset or I'm using the wrong way.

I might not be surprised that it would really take a lot of time. You might want
to increase significatively the block cache to hopefully speed up things. You
can do that by specifying --config GDAL_CACHEMAX some_value_in_megabytes. See
http://trac.osgeo.org/gdal/wiki/ConfigOptions#GDAL_CACHEMAX for more details.
Note that if you want to use more than 2 gigabytes of RAM, you need a 64-bit
build of GDAL.

Another factor which might explain the slowness is the value of 256 as the first
overview level, which is really a huge value. Computing a block of 256x256 of
that level requires processing 65536x65536 pixels of the base image ! So I would
recommand specifying much lower values before reaching 256. For example 4 16 64.

I'm also skeptical on the fact that computing such huge overview levels will
lead to a visually acceptable result. Sometimes you want to use other source of
data than the high resolution data when displaying low resolution overviews.

(Ah, and using gdaltindex will not help for your use case. gdaltindex output is
only used by MapServer AFAIK.)

Best regards,

Even
From aperi2007 at gmail.com  Mon Apr 30 12:31:02 2012
From: aperi2007 at gmail.com (Andrea Peri)
Date: Mon Apr 30 12:31:29 2012
Subject: [gdal-dev] How create a simplified raster from an uge raster
	dataset
In-Reply-To: <1335793373.4f9e96dd7035d@imp.free.fr>
References: <CABqTJk867j=SN_ckhm4pxdXywK0T02wFNk22XJ2O3sO8Jf9Mmg@mail.gmail.com>
	<1335793373.4f9e96dd7035d@imp.free.fr>
Message-ID: <CABqTJk_8cv+wETPyeHoTDTE6gvE927JDT3JvEqsEJZMn=JBcsQ@mail.gmail.com>

Hi Rouault ,

thx for response.

>Note that if you want to use more than 2 gigabytes of RAM, you need a
64-bit
>build of GDAL.

I'm use gdal compiled to 64 bit and has 8GB ram, so I can try to use 4GB as
cachemax)

I change my settings and try this configuration:

gdaladdo -r average -ro --config BIGTIFF_OVERVIEW YES --config
GDAL_CACHEMAX 4096 catalog.vrt 4 16 64 256 1024 4096

>I'm also skeptical on the fact that computing such huge overview levels
will
>lead to a visually acceptable result. Sometimes you want to use other
source of
>data than the high resolution data when displaying low resolution
overviews.

Are you guessing that was better to apply before a gdalwarp to create a new
set of starting raster with a lower resolution and only after
calculate the overview from this low resolution set of rasters ?

Andrea.

2012/4/30 Even Rouault <even.rouault@mines-paris.org>

> Selon Andrea Peri <aperi2007@gmail.com>:
>
> > Hi,
> > I have a huge set of tiffs rasters.
> > Any single tiff is a geotiff tiled (256x256) and as an internal overview.
> >
> > To can use this raster dataset to lower scales (full extension) I need to
> > create a single simplified tiff raster of all this dataset.
> > Now I need to create a single simplified tiff raster .
> >
> > I don't know how is the better way to produce this simplified raster.
> > This because the original huge set of rasters are about 2 TB. Every
> raster
> > is about 15000 x 15000 px.
> >
> > SO I start creating a catalog named "cat_fogli.vrt" using gdalbuildvrt.
> > And after this was create, I tryed to produce an external overview of
> this
> > catalog.
> > using this command:
> >
> > gdaladdo -r average -ro --config BIGTIFF_OVERVIEW YES cat_fogli.vrt 256
> 512
> > 1024 2048 4096
> >
> > Unfortunately gdaladdo seem to be lock. It is take really many time and
> is
> > always on 0%.
> >
> > I don't know if is only a bug time due to the huge size of original
> raster
> > dataset or I'm using the wrong way.
>
> I might not be surprised that it would really take a lot of time. You
> might want
> to increase significatively the block cache to hopefully speed up things.
> You
> can do that by specifying --config GDAL_CACHEMAX some_value_in_megabytes.
> See
> http://trac.osgeo.org/gdal/wiki/ConfigOptions#GDAL_CACHEMAX for more
> details.
> Note that if you want to use more than 2 gigabytes of RAM, you need a
> 64-bit
> build of GDAL.
>
> Another factor which might explain the slowness is the value of 256 as the
> first
> overview level, which is really a huge value. Computing a block of 256x256
> of
> that level requires processing 65536x65536 pixels of the base image ! So I
> would
> recommand specifying much lower values before reaching 256. For example 4
> 16 64.
>
> I'm also skeptical on the fact that computing such huge overview levels
> will
> lead to a visually acceptable result. Sometimes you want to use other
> source of
> data than the high resolution data when displaying low resolution
> overviews.
>
> (Ah, and using gdaltindex will not help for your use case. gdaltindex
> output is
> only used by MapServer AFAIK.)
>
> Best regards,
>
> Even
>



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20120430/04ecc4d2/attachment.html
