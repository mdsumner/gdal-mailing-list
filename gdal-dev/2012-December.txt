From even.rouault at mines-paris.org  Sat Dec  1 01:32:17 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 1 Dec 2012 10:32:17 +0100
Subject: [gdal-dev] TIFF overviews issue
In-Reply-To: <50B8CF17.2060601@eox.at>
References: <50B8CF17.2060601@eox.at>
Message-ID: <201212011032.17240.even.rouault@mines-paris.org>

Le vendredi 30 novembre 2012 16:21:59, Fabian Schindler a ?crit :
> Dear devs,
> 
> I'm experiencing an strange issue concerning overviews when I try to add
> overviews via Python. Essentially I want to create overviews for
> Greyscale images encoded in RGB, but on one overview level I always get
> colored pixels in a specific rectangle area of the image.
> 
> I created the boiled down test script to demonstrate what I am doing
> (create RGB grey image of certain size, save it to disk and apply
> overviews) which is available in the attachment. The script is called
> like that: `python test_overviews.py out.tif`
> 
> In my case I could see the colorfull overviews in QGIS (or MapServer
> WMS) if I zoomed out a little. A screenshot of QGIS with the image can
> be found in the attachment.
> 
> Strangely, I only have this issue on CentOS 6.3 (gdal 1.9.1, libgeotiff
> 1.4.0, libtiff 3.9.4) but not on my host Ubuntu 12.10 system (gdal
> 1.9.2, libgeotiff2 1.3.0, libtiff 4.0.2).
> 
> I tried different interpolation methods for the `BuildOverviews`
> function, with no effect. If I remove the level `2` or `4` from my level
> list, the effect does *not* show. A different image size results in a
> different colour and position of the rectangle and sometimes the
> rectangle is not visible at all.
> 
> The issue is the same when I use `gdaladdo out_no_ovr.tif 2 4 8 16`.
> 
> Any idea on this?

I can also reproduce with libtiff 3.9.2. libtiff 3.X suffers sometimes from some 
problems when generating overviews in a interleaved way, as it is done by 
BuildOverviews("NEAREST", [2,4,8,16]). Those problems have been corrected in 
libtiff 4.0

A way to workaround this is to generate each overview level one after another 
one, like this :

out_ds.BuildOverviews("NEAREST", [ 2 ])
out_ds.BuildOverviews("NEAREST", [ 4 ])
out_ds.BuildOverviews("NEAREST", [ 8 ])
out_ds.BuildOverviews("NEAREST", [ 16 ])

This will work on both libtiff 3.X and libtiff 4.0. Note that it might perform a 
little less than generating all the levels in a single instruction, since the 
source data must be read several times.

> 
> Regards,
> Fabian

From even.rouault at mines-paris.org  Sat Dec  1 02:37:40 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 1 Dec 2012 11:37:40 +0100
Subject: [gdal-dev] TIFF overviews issue
In-Reply-To: <201212011032.17240.even.rouault@mines-paris.org>
References: <50B8CF17.2060601@eox.at>
	<201212011032.17240.even.rouault@mines-paris.org>
Message-ID: <201212011137.40440.even.rouault@mines-paris.org>


> I can also reproduce with libtiff 3.9.2. libtiff 3.X suffers sometimes from
> some problems when generating overviews in a interleaved way, as it is
> done by BuildOverviews("NEAREST", [2,4,8,16]). Those problems have been
> corrected in libtiff 4.0
> 
> A way to workaround this is to generate each overview level one after
> another one, like this :
> 
> out_ds.BuildOverviews("NEAREST", [ 2 ])
> out_ds.BuildOverviews("NEAREST", [ 4 ])
> out_ds.BuildOverviews("NEAREST", [ 8 ])
> out_ds.BuildOverviews("NEAREST", [ 16 ])
> 
> This will work on both libtiff 3.X and libtiff 4.0. Note that it might
> perform a little less than generating all the levels in a single
> instruction, since the source data must be read several times.

In the libtiff 3.X case, I've just implemented in GDAL trunk the workaround in 
the GTiff driver

From jukka.rahkonen at mmmtike.fi  Sun Dec  2 10:05:09 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 2 Dec 2012 18:05:09 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?PDF_OGR=5FLINK=5FFIELD_not_known?=
Message-ID: <loom.20121202T185628-868@post.gmane.org>

Hi,

I was testing some new features in PDF driver with GDAL r25277 from
gisinternals. JAVASCRIPT_FILE (changeset 25275) works ok but OGR_LINK_FIELD
(changeset 25276) gives an error
Warning 6: Driver PDF does not support OGR_LINK_FIELD creation option

I tried to use it as -co OGR_LINK_FIELD=link


-Jukka Rahkonen-


From even.rouault at mines-paris.org  Sun Dec  2 10:16:16 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 2 Dec 2012 19:16:16 +0100
Subject: [gdal-dev] PDF OGR_LINK_FIELD not known
In-Reply-To: <loom.20121202T185628-868@post.gmane.org>
References: <loom.20121202T185628-868@post.gmane.org>
Message-ID: <201212021916.16986.even.rouault@mines-paris.org>

Le dimanche 02 d?cembre 2012 19:05:09, Jukka Rahkonen a ?crit :
> Hi,
> 
> I was testing some new features in PDF driver with GDAL r25277 from
> gisinternals. JAVASCRIPT_FILE (changeset 25275) works ok but OGR_LINK_FIELD
> (changeset 25276) gives an error
> Warning 6: Driver PDF does not support OGR_LINK_FIELD creation option
> 
> I tried to use it as -co OGR_LINK_FIELD=link

Ah, I see it wasn't declared as a valid creation option (fixed now), but you 
can ignore the warning. The option should work despite the warning.

> 
> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From nikhil.parupalli at iictechnologies.com  Sun Dec  2 22:40:32 2012
From: nikhil.parupalli at iictechnologies.com (Nikhil Sai Parupalli)
Date: Mon, 3 Dec 2012 06:40:32 +0000
Subject: [gdal-dev] (no subject)
Message-ID: <139560E1825F4648BDA4F32853B530A78CBF701B@IICEXHCM.iictechnologies.local>

Hi All,

With the some useful tips and code from  gdal-dev at lists.osgeo.org  I could successfully complete a huge task to validate S58 checks .

Next up is developing a software where it creates a S57 data set .
Please give me any information pertaining to S57 data set creation

Thanks and Regards
Nikhil Sai Parupalli



Note: Do not print this email until and unless it is really required. Save paper , stay Green
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121203/0f919e08/attachment.html>

From fabian.schindler at eox.at  Mon Dec  3 01:23:37 2012
From: fabian.schindler at eox.at (Fabian Schindler)
Date: Mon, 03 Dec 2012 10:23:37 +0100
Subject: [gdal-dev] TIFF overviews issue
In-Reply-To: <201212011137.40440.even.rouault@mines-paris.org>
References: <50B8CF17.2060601@eox.at>
	<201212011032.17240.even.rouault@mines-paris.org>
	<201212011137.40440.even.rouault@mines-paris.org>
Message-ID: <50BC6F99.9090206@eox.at>

Perfect, your workaround works for me.
As I'm mostly dealing with small fairly small images, the performance 
decrease may not be a concern for me. I'll stick with this solution 
until I can definitely say that the target system has libtiff 4.0.

Thanks Even!


On 12/01/2012 11:37 AM, Even Rouault wrote:
>> I can also reproduce with libtiff 3.9.2. libtiff 3.X suffers sometimes from
>> some problems when generating overviews in a interleaved way, as it is
>> done by BuildOverviews("NEAREST", [2,4,8,16]). Those problems have been
>> corrected in libtiff 4.0
>>
>> A way to workaround this is to generate each overview level one after
>> another one, like this :
>>
>> out_ds.BuildOverviews("NEAREST", [ 2 ])
>> out_ds.BuildOverviews("NEAREST", [ 4 ])
>> out_ds.BuildOverviews("NEAREST", [ 8 ])
>> out_ds.BuildOverviews("NEAREST", [ 16 ])
>>
>> This will work on both libtiff 3.X and libtiff 4.0. Note that it might
>> perform a little less than generating all the levels in a single
>> instruction, since the source data must be read several times.
> In the libtiff 3.X case, I've just implemented in GDAL trunk the workaround in
> the GTiff driver
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From srikanth1947 at gmail.com  Mon Dec  3 02:10:57 2012
From: srikanth1947 at gmail.com (Srikanth)
Date: Mon, 3 Dec 2012 15:40:57 +0530
Subject: [gdal-dev] OGR modify feature
Message-ID: <CAPZ5UyWfgQXyg=Kcj8beL+TaaEi_BFxratZy114YTTjP2oHJxQ@mail.gmail.com>

Hi,


I am updating the feature of OGRFeature using  poFeature->SetGeometry(
newGeometry ). I want the attribute information to be retained while
updating the geometry. Is there any way to do so or do i need to fetch the
information and set it back.

-- 
Regards,
Srikanth
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121203/6d98759d/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Dec  3 02:18:44 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 3 Dec 2012 10:18:44 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?PDF_OGR=5FLINK=5FFIELD_not_known?=
References: <loom.20121202T185628-868@post.gmane.org>
	<201212021916.16986.even.rouault@mines-paris.org>
Message-ID: <loom.20121203T110902-528@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Le dimanche 02 d?cembre 2012 19:05:09, Jukka Rahkonen a ?crit :
> > Hi,
> > 
> > I was testing some new features in PDF driver with GDAL r25277 from
> > gisinternals. JAVASCRIPT_FILE (changeset 25275) works ok but OGR_LINK_FIELD
> > (changeset 25276) gives an error
> > Warning 6: Driver PDF does not support OGR_LINK_FIELD creation option
> > 
> > I tried to use it as -co OGR_LINK_FIELD=link
> 
> Ah, I see it wasn't declared as a valid creation option (fixed now), but you 
> can ignore the warning. The option should work despite the warning.

Yes, it did work. The howto
http://latuviitta.org/documents/Geospatial_PDF_maps_from_OSM_with_GDAL.pdf
and sample map
http://latuviitta.org/documents/Advanced_geospatial_PDF_made_with_GDAL.pdf
are updated to demonstrate also the usage of JAVASCRIPT_FILE, EXTRA_IMAGES with
link URL, and OGR_LINK_FIELD. I guess that the links will be heavily utilized in
the FOSS4G 2013 conference map (hint).

-Jukka-


From lhomme.xavier at gmail.com  Tue Dec  4 01:01:08 2012
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Tue, 4 Dec 2012 10:01:08 +0100
Subject: [gdal-dev] WFS DefaultSRS OtherSRS
In-Reply-To: <201211282045.22541.even.rouault@mines-paris.org>
References: <CACqzBMxe_+-n2dNJ-mfm1PM61ysOAD7P1sjBoNZzXYds9BERKQ@mail.gmail.com>
	<201211282045.22541.even.rouault@mines-paris.org>
Message-ID: <CACqzBMx3KneEpNo49HF-SqQ=CY8_FJzBNt+Rtb6jZTUp-82hRA@mail.gmail.com>

Hi
 I added this option &SRSNAME=urn:ogc:def:crs:EPSG:6.9:4326 to the WFS
connexion string on my datasource and it works.
 but I tried on another datasource and the connexion failed with this
option. (whereas it works if you do not put the option at the end of the
connexion string);

 I checked the GetCapabilities and I found that the datasource has some
layers with null extent (case)::


- <wfs:FeatureType>

  <wfs:Name>BigMap:AquedctP</wfs:Name>

  <wfs:Title>AquedctP</wfs:Title>

  <wfs:DefaultSRS>urn:ogc:def:crs:EPSG:6.9:4326</wfs:DefaultSRS>

- <wfs:OutputFormats>

  <wfs:Format>text/xml;
subType=gml/3.1.1/profiles/gmlsf/1.0.0/0</wfs:Format>

  </wfs:OutputFormats>

- <ows:WGS84BoundingBox>

  <ows:LowerCorner>NaN NaN</ows:LowerCorner>

  <ows:UpperCorner>NaN NaN</ows:UpperCorner>

  </ows:WGS84BoundingBox>

  </wfs:FeatureType>




2012/11/28 Even Rouault <even.rouault at mines-paris.org>

>
> > How the wfs driver handles the OtherSRS ?
> >  Is he handles only the DefaultSRS ?
>
> It will select the DefaultSRS, unless you add as an option like
> &SRSNAME=urn:ogc:def:crs:EPSG:6.9:4326 to the WFS connexion string.
>
> > berst regards
> > xavier
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121204/abb6b093/attachment.html>

From s.r.kriishna at gmail.com  Tue Dec  4 03:53:01 2012
From: s.r.kriishna at gmail.com (SIVA RAMA KRISHNA)
Date: Tue, 4 Dec 2012 17:23:01 +0530
Subject: [gdal-dev] creating a shape from another with attributes and values
Message-ID: <CAP-zkzdgMU_Vapa3yCWxNAdRhL93VN2_LHtog4XuU4Bi1HQGLg@mail.gmail.com>

To All,

I am using the following code  for creating a shape file from another with
the attributes value;
i am unable to fetch attribute values from source and change the features
from newly created
shape files



Any Sort of help is greatly appriciated















#include "main.h"
#include<QList>
#include<QStringList>
#include<QDebug>
//OGRFeature* TranslateFeature(OGRFeature* poSrcFeature,OGRFeatureDefn
*poFeatureDefn);
OGRLayer            *poSrcLayer;
OGRLayer            *poDstLayer;
OGRDataSource       *poDS;
OGRDataSource       *poODS=NULL;
OGRFeature           *poDstFeature;
OGRFeature           *poSrcFeature;
OGRFeatureDefn       *poFeatureDefn;

int main()
{

     int iField;
      const char *pszDriverName = "ESRI Shapefile";
       OGRSFDriver *poDriver;

       OGRRegisterAll();
       QList<double>fieldid;
       QList<QString>fieldname;
       const char* str="indiaaa" ;

       poDriver = OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(
                   pszDriverName );
       if( poDriver == NULL )
       {
           printf( "%s driver not available.\n", pszDriverName );
           exit( 1 );
       }

       poDS = poDriver->Open( "/home/support/Images/IND_adm
(3)/IND_adm1.shp" );
       poSrcLayer=poDS->GetLayerByName("IND_adm1");
       poDriver->DeleteDataSource("firsts1.shp");
       poODS = poDriver->CreateDataSource( "firsts1.shp", NULL );
       poDstLayer = poODS->CreateLayer( "firsts1",NULL,wkbPolygon);
       poSrcLayer->ResetReading();
       int i;
       OGRGeometry *poGeometry;
      // OGRGeometry *bufferGeometry;
       poDstFeature = OGRFeature::CreateFeature(poDstLayer->GetLayerDefn());
       poDstLayer->CreateFeature(poDstFeature);
       poSrcFeature=poSrcLayer->GetNextFeature();
        do{
            i=1;

           OGRFeatureDefn *poFDefn = poSrcLayer->GetLayerDefn();
                  int iField;

                  for( iField = 0; iField < poFDefn->GetFieldCount();
iField++ )
                  {
                      qDebug()<<"fieldcount"<<poFDefn->GetFieldCount();
                      printf("\n");
                      OGRFieldDefn *poFieldDefn = poFDefn->GetFieldDefn(
iField );

                    if( poFieldDefn->GetType() == OFTInteger )
                      {
                          printf( "%d,", poSrcFeature->GetFieldAsInteger(
iField ) );


                       }
                      else if( poFieldDefn->GetType() == OFTReal )
                      {
                          printf( "%.3f,",
poSrcFeature->GetFieldAsDouble(iField) );
                          fieldid.append(poSrcFeature->GetFieldAsDouble(
iField ));

                       }
                      else if( poFieldDefn->GetType() == OFTString )
                      {
                          printf( "%s, Name",
poSrcFeature->GetFieldAsString(iField) );

fieldname.append(poSrcFeature->GetFieldAsString(iField));

                       }
                      else
                    {
                          printf( "%s,name1",
poSrcFeature->GetFieldAsString(iField) );

fieldname.append(poSrcFeature->GetFieldAsString(iField));

                      }
                  }
                  poGeometry=poSrcFeature->GetGeometryRef();
                  poDstFeature->SetGeometryDirectly(poGeometry);
                  poDstLayer->CreateFeature(poDstFeature);
                  poDstFeature->SetFID(100);
//                  poDstFeature->SetField(i,str); // this is not modifying
//                  i++;
//                  //poDstFeature->SetFrom(poSrcFeature,true);


     }while( (poSrcFeature = poSrcLayer->GetNextFeature()) != NULL );



           poDstLayer->ResetReading();

           qDebug()<<"size"<<fieldname.size();

             OGRDataSource::DestroyDataSource(poODS);
     }
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121204/077ffc91/attachment.html>

From eduardo.kanegae at gmail.com  Tue Dec  4 04:56:51 2012
From: eduardo.kanegae at gmail.com (Eduardo Kanegae)
Date: Tue, 4 Dec 2012 10:56:51 -0200
Subject: [gdal-dev] GDAL 1.9.2 still looking for GEOS 3.3.5 after geos
	upgrade
Message-ID: <CAF_a5SL6qDNByGLkQAejCQSZ2tRk1KykXLhcMKZGFx4a5OxWJg@mail.gmail.com>

hi,

After upgrading from geos 3.3.5 to 3.3.6, I'm trying to upgrade from
GDAL 1.9.1 to 1.9.2.

Compiling process is done, but when trying to run any gdal* executable
I got the error:

***
gdalinfo: error while loading shared libraries: libgeos-3.3.5.so:
cannot open shared object file: No such file or directory
***

At /usr/local/lib I got:

-rwxr-xr-x. 1 root /root  18M Dez  3 08:36 /usr/local/lib/libgeos-3.3.6.so
-rw-r--r--. 1 root /root  48M Dez  3 08:36 /usr/local/lib/libgeos.a
-rw-r--r--. 1 root /root 1,9M Dez  3 08:36 /usr/local/lib/libgeos_c.a
-rwxr-xr-x. 1 root /root  979 Dez  3 08:36 /usr/local/lib/libgeos_c.la
lrwxrwxrwx. 1 root /root   18 Dez  3 08:36 /usr/local/lib/libgeos_c.so
-> libgeos_c.so.1.7.6
lrwxrwxrwx. 1 root /root   18 Dez  3 08:36
/usr/local/lib/libgeos_c.so.1 -> libgeos_c.so.1.7.6
-rwxr-xr-x. 1 root /root 907K Dez  3 08:36 /usr/local/lib/libgeos_c.so.1.7.6
-rwxr-xr-x. 1 root /root  947 Dez  3 08:36 /usr/local/lib/libgeos.la
lrwxrwxrwx. 1 root /root   16 Dez  3 08:36 /usr/local/lib/libgeos.so
-> libgeos-3.3.6.so

Is there any special hint I'm missing here?

Eduardo Patto Kanegae
http://www.webmapit.com | @webmapit

From bfraser at geoanalytic.com  Tue Dec  4 07:42:12 2012
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Tue, 04 Dec 2012 08:42:12 -0700
Subject: [gdal-dev] creating a shape from another with attributes and
 values
In-Reply-To: <CAP-zkzdgMU_Vapa3yCWxNAdRhL93VN2_LHtog4XuU4Bi1HQGLg@mail.gmail.com>
References: <CAP-zkzdgMU_Vapa3yCWxNAdRhL93VN2_LHtog4XuU4Bi1HQGLg@mail.gmail.com>
Message-ID: <50BE19D4.907@geoanalytic.com>

You need to do a CreateField() on your destination, something like:

     poFDefn = poLayer->GetLayerDefn();
     for( int iField = 0; iField < poFDefn->GetFieldCount(); iField++ ){
         OGRFieldDefn *poFieldDefn = poFDefn->GetFieldDefn( iField );

         if( poDstLayer->CreateField( poFieldDefn ) != OGRERR_NONE ){
             printf( "Creation of field failed.\n" );
         }
}

Best Regards,
Brent Fraser

On 12/4/2012 4:53 AM, SIVA RAMA KRISHNA wrote:
> To All,
>
> I am using the following code  for creating a shape file from another 
> with the attributes value;
> i am unable to fetch attribute values from source and change the 
> features from newly created
> shape files
>
>
>
> Any Sort of help is greatly appriciated
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> #include "main.h"
> #include<QList>
> #include<QStringList>
> #include<QDebug>
> //OGRFeature* TranslateFeature(OGRFeature* poSrcFeature,OGRFeatureDefn 
> *poFeatureDefn);
> OGRLayer            *poSrcLayer;
> OGRLayer            *poDstLayer;
> OGRDataSource       *poDS;
> OGRDataSource       *poODS=NULL;
> OGRFeature           *poDstFeature;
> OGRFeature           *poSrcFeature;
> OGRFeatureDefn       *poFeatureDefn;
>
> int main()
> {
>
>      int iField;
>       const char *pszDriverName = "ESRI Shapefile";
>        OGRSFDriver *poDriver;
>
>        OGRRegisterAll();
>        QList<double>fieldid;
>        QList<QString>fieldname;
>        const char* str="indiaaa" ;
>
>        poDriver = OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(
>                    pszDriverName );
>        if( poDriver == NULL )
>        {
>            printf( "%s driver not available.\n", pszDriverName );
>            exit( 1 );
>        }
>
>        poDS = poDriver->Open( "/home/support/Images/IND_adm 
> (3)/IND_adm1.shp" );
>        poSrcLayer=poDS->GetLayerByName("IND_adm1");
>        poDriver->DeleteDataSource("firsts1.shp");
>        poODS = poDriver->CreateDataSource( "firsts1.shp", NULL );
>        poDstLayer = poODS->CreateLayer( "firsts1",NULL,wkbPolygon);
>        poSrcLayer->ResetReading();
>        int i;
>        OGRGeometry *poGeometry;
>       // OGRGeometry *bufferGeometry;
>        poDstFeature = 
> OGRFeature::CreateFeature(poDstLayer->GetLayerDefn());
>        poDstLayer->CreateFeature(poDstFeature);
>        poSrcFeature=poSrcLayer->GetNextFeature();
>         do{
>             i=1;
>
>            OGRFeatureDefn *poFDefn = poSrcLayer->GetLayerDefn();
>                   int iField;
>
>                   for( iField = 0; iField < poFDefn->GetFieldCount(); 
> iField++ )
>                   {
> qDebug()<<"fieldcount"<<poFDefn->GetFieldCount();
>                       printf("\n");
>                       OGRFieldDefn *poFieldDefn = 
> poFDefn->GetFieldDefn( iField );
>
>                     if( poFieldDefn->GetType() == OFTInteger )
>                       {
>                           printf( "%d,", 
> poSrcFeature->GetFieldAsInteger( iField ) );
>
>
>                        }
>                       else if( poFieldDefn->GetType() == OFTReal )
>                       {
>                           printf( "%.3f,", 
> poSrcFeature->GetFieldAsDouble(iField) );
> fieldid.append(poSrcFeature->GetFieldAsDouble( iField ));
>
>                        }
>                       else if( poFieldDefn->GetType() == OFTString )
>                       {
>                           printf( "%s, Name", 
> poSrcFeature->GetFieldAsString(iField) );
> fieldname.append(poSrcFeature->GetFieldAsString(iField));
>
>                        }
>                       else
>                     {
>                           printf( "%s,name1", 
> poSrcFeature->GetFieldAsString(iField) );
> fieldname.append(poSrcFeature->GetFieldAsString(iField));
>
>                       }
>                   }
>                   poGeometry=poSrcFeature->GetGeometryRef();
> poDstFeature->SetGeometryDirectly(poGeometry);
>                   poDstLayer->CreateFeature(poDstFeature);
>                   poDstFeature->SetFID(100);
> //                  poDstFeature->SetField(i,str); // this is not 
> modifying
> //                  i++;
> //                  //poDstFeature->SetFrom(poSrcFeature,true);
>
>
>      }while( (poSrcFeature = poSrcLayer->GetNextFeature()) != NULL );
>
>
>
>            poDstLayer->ResetReading();
>
>            qDebug()<<"size"<<fieldname.size();
>
>              OGRDataSource::DestroyDataSource(poODS);
>      }
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121204/6ceedd84/attachment-0001.html>

From nixanz at nixanz.com  Tue Dec  4 18:53:33 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Wed, 5 Dec 2012 13:53:33 +1100
Subject: [gdal-dev] "Too many points" for GDALSuggestedWarpOutput with Ozi
	.map
Message-ID: <BA18D87C-406D-405C-BD58-30366E4AF569@nixanz.com>

Hi GDAL devs,

I have a problem with GDALSuggestedWarpOutput producing an error.  It works for most of the files I've thrown at it, but I have one file that a user has sent me for which the error occurs.  The file in question can be downloaded for testing at:  https://dl.dropbox.com/u/12436846/715lkmaps.zip

My code and the output are below.  GDALSuggestedWarpOutput produces the error:

"ERROR 1: Too many points (13924 out of 13924) failed to transform, unable to compute output bounds."

Could somebody please explain how I can avoid this problem and warp the image correctly?

Thanks,
Nik.



CODE:
------------------------------------
		OSRImportFromEPSG(dstSRS, 3857 );
		OSRExportToWkt( dstSRS, (char **)&pszDstWKT );

		void *hTransformArg = GDALCreateGenImgProjTransformer( hSrcDS, pszSrcWKT, NULL, pszDstWKT, FALSE, 0, 1 );
		double adfDstGeoTransform[6];
		int nPixels=0, nLines=0;
		
		if ( GDALSuggestedWarpOutput( hSrcDS, GDALGenImgProjTransform, hTransformArg, adfDstGeoTransform, &nPixels, &nLines ) != CE_None )
		{
			NSLog(@"Failed to get suggested warp output.");
			return NO;
		}
------------------------------------

OUTPUT:
------------------------------------
ERROR 1: Too many points (13924 out of 13924) failed to transform,
unable to compute output bounds.
Failed to get suggested warp output.
------------------------------------


From jrepetto at free.fr  Tue Dec  4 23:06:48 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed, 05 Dec 2012 08:06:48 +0100
Subject: [gdal-dev] "Too many points" for GDALSuggestedWarpOutput with
 Ozi .map
In-Reply-To: <BA18D87C-406D-405C-BD58-30366E4AF569@nixanz.com>
References: <BA18D87C-406D-405C-BD58-30366E4AF569@nixanz.com>
Message-ID: <50BEF288.1090507@free.fr>

On 05/12/2012 03:53, Nik Sands wrote:
> Hi GDAL devs,
> 
> I have a problem with GDALSuggestedWarpOutput producing an error.  It works for most of the files I've thrown at it, but I have one file that a user has sent me for which the error occurs.  The file in question can be downloaded for testing at:  https://dl.dropbox.com/u/12436846/715lkmaps.zip

The projection declared in the .map file is wrong.

Jean-Claude

From jukka.rahkonen at mmmtike.fi  Wed Dec  5 01:48:56 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 5 Dec 2012 09:48:56 +0000 (UTC)
Subject: [gdal-dev] WFS DefaultSRS OtherSRS
References: <CACqzBMxe_+-n2dNJ-mfm1PM61ysOAD7P1sjBoNZzXYds9BERKQ@mail.gmail.com>
Message-ID: <loom.20121205T103833-406@post.gmane.org>

xavier lhomme <lhomme.xavier <at> gmail.com> writes:

....
> 
> How the wfs driver handles the OtherSRS ??Is he handles only the DefaultSRS
?berst regards xavier 


Usually you can simply use the DefaultSRS and tell OGR to re-project the result
into something else with -t_srs parameter. Sometimes it can still be better to
use the OtherSRS from the server. For example, because of deformations OGR gives
1-2 meter local conversion errors when doing transformations between EPSG:2393
and EPSG:3067. The WFS server may do the conversion with some more accurate
method and then it would be better to use &SRSNAME= in the ORG connection.

-Jukka Rahkonen-


From ckling at upcmail.nl  Wed Dec  5 02:11:21 2012
From: ckling at upcmail.nl (Kees Kling)
Date: Wed, 05 Dec 2012 11:11:21 +0100
Subject: [gdal-dev] projection issue with GDALCreateGenImgProjTransformer
Message-ID: <50BF1DC9.1010208@upcmail.nl>

Hi all,

I'm trying to reproject an image.

source projection = `+proj=stere +lat_0=90.0 +lon_0=0.0 +lat_ts=60.0 
+a=6378.388'
I already used this projection in other parts of my project, but then in 
combination with OGR. Here I don't have problems, but if I use it with 
gdal in the function  GDALCreateGenImgProjTransformer, I'm getting the 
error:

ERROR 1: Failed to import coordinate system `+proj=stere +lat_0=90.0 
+lon_0=0.0 +lat_ts=60.0 +a=6378.388'

What am I doing wrong

Regards

Kees Kling

From thare at usgs.gov  Wed Dec  5 09:17:22 2012
From: thare at usgs.gov (Hare, Trent)
Date: Wed, 5 Dec 2012 10:17:22 -0700
Subject: [gdal-dev] projection issue with GDALCreateGenImgProjTransformer
In-Reply-To: <50BF1DC9.1010208@upcmail.nl>
References: <50BF1DC9.1010208@upcmail.nl>
Message-ID: <CAB6t5t9eVeMkzcVv6q9ngQjkfhmQWsxLq34D9vRCwPq7vcPBHA@mail.gmail.com>

Kees,
   Just an initial guess. It looks like you are using a km radius when it
should in meters - +a=6378388.0

-Trent


On Wed, Dec 5, 2012 at 3:11 AM, Kees Kling <ckling at upcmail.nl> wrote:

> Hi all,
>
> I'm trying to reproject an image.
>
> source projection = `+proj=stere +lat_0=90.0 +lon_0=0.0 +lat_ts=60.0
> +a=6378.388'
> I already used this projection in other parts of my project, but then in
> combination with OGR. Here I don't have problems, but if I use it with gdal
> in the function  GDALCreateGenImgProjTransforme**r, I'm getting the error:
>
> ERROR 1: Failed to import coordinate system `+proj=stere +lat_0=90.0
> +lon_0=0.0 +lat_ts=60.0 +a=6378.388'
>
> What am I doing wrong
>
> Regards
>
> Kees Kling
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121205/6f552a72/attachment.html>

From cavicchi at ferrara.linux.it  Wed Dec  5 09:48:30 2012
From: cavicchi at ferrara.linux.it (Mario Cavicchi)
Date: Wed, 05 Dec 2012 18:48:30 +0100
Subject: [gdal-dev] frmt_wms_googlemaps_tms.xml help ...
Message-ID: <50BF88EE.9050203@ferrara.linux.it>

Hi folks,
Maybe this question is old, but I don't find an answer on Internet.
If I perform this command:

gdal_translate -outsize 50% 50% -of GTiff -projwin 1299378.2102987265 
5588829.1661406181 1299486.6170906540 5588715.6742054483 
frmt_wms_googlemaps_tms.xml tempfile.tif

the image obtained is perfect in term of area of interest, but the 
georeference is wrong if I open the image with ENVI.
I think that it is caused for the "Google Maps Global Mercator", but I 
don't know how I can convert the projection to (for example) an UTM 
projection or something else. I tried to reproject using gdalwarp:

gdalwarp -t_srs "+proj=utm +zone=32 +datum=wgs84" tempfile.tif 
tempfile-warp.tif

but, still wrong georeference.

Someone can help me?

-- 
Ciao,
         Mario

[ Web Info: http://members.ferrara.linux.it/cavicchi ]

From nixanz at nixanz.com  Wed Dec  5 13:19:23 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Thu, 6 Dec 2012 08:19:23 +1100
Subject: [gdal-dev] "Too many points" for GDALSuggestedWarpOutput with
	Ozi .map
In-Reply-To: <50BEF288.1090507@free.fr>
References: <BA18D87C-406D-405C-BD58-30366E4AF569@nixanz.com>
	<50BEF288.1090507@free.fr>
Message-ID: <C4A22538-F12A-4067-B639-063AFDBA83A9@nixanz.com>

Thanks for the reply.  Just to clarify though, can you tell me what it is that is wrong about it?

I expect the user might come back to me and say, "but it works fine in OziExplorer", which I don't have to test with. The projection "Latitude/Longitude" appears to be a valid Ozi projection, so I'm guessing that you mean it doesn't fit with the other data in the file?



On 05/12/2012, at 6:06 PM, Jean-Claude Repetto <jrepetto at free.fr> wrote:

> On 05/12/2012 03:53, Nik Sands wrote:
>> Hi GDAL devs,
>> 
>> I have a problem with GDALSuggestedWarpOutput producing an error.  It works for most of the files I've thrown at it, but I have one file that a user has sent me for which the error occurs.  The file in question can be downloaded for testing at:  https://dl.dropbox.com/u/12436846/715lkmaps.zip
> 
> The projection declared in the .map file is wrong.
> 
> Jean-Claude


From jrepetto at free.fr  Wed Dec  5 14:22:46 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed, 05 Dec 2012 23:22:46 +0100
Subject: [gdal-dev] "Too many points" for GDALSuggestedWarpOutput with
 Ozi .map
In-Reply-To: <C4A22538-F12A-4067-B639-063AFDBA83A9@nixanz.com>
References: <BA18D87C-406D-405C-BD58-30366E4AF569@nixanz.com>
	<50BEF288.1090507@free.fr>
	<C4A22538-F12A-4067-B639-063AFDBA83A9@nixanz.com>
Message-ID: <50BFC936.4020307@free.fr>

On 05/12/2012 22:19, Nik Sands wrote:
> Thanks for the reply.  Just to clarify though, can you tell me what it is that is wrong about it?
> 
The GCP coordinates look like UTM coordinates (UTM zone 36) :
Point01,xy,3051,328,in,deg,,0,N,,0,E, grid, 36, 673750, 3572910,N

So the projection is UTM, not Lat/Lon.
gdalinfo reports an error (Invalid angle) :

$ OZI_APPROX_GEOTRANSFORM=YES gdalinfo -noct IL50K-0715_ozf.map
Driver: MAP/OziExplorer .MAP
Files: IL50K-0715_ozf.map
       IL50K-0715.ozf2
Size is 5860, 5860
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"]]
GeoTransform =
  647690.1672605723, 8.519190252396545, 0.1802216446798053
  3575200.856193653, 0.2040104927636261, -8.558172983414893
Corner Coordinates:
Upper Left  (  647690.167, 3575200.856) (Invalid angle,Invalid angle)
Lower Left  (  648746.266, 3525049.963) (Invalid angle,Invalid angle)
Upper Right (  697612.622, 3576396.358) (Invalid angle,Invalid angle)
Lower Right (  698668.721, 3526245.464) (Invalid angle,Invalid angle)
Center      (  673179.444, 3550723.160) (Invalid angle,Invalid angle)
Band 1 Block=64x64 Type=Byte, ColorInterp=Palette
  Overviews: 1465x1465, 586x586, 293x293, 146x146, 59x59
  Color Table (RGB with 256 entries)


If you put the right projection in the .map file, it works :

$ OZI_APPROX_GEOTRANSFORM=YES gdalinfo -noct IL50K-0715_ozf.map
Driver: MAP/OziExplorer .MAP
Files: IL50K-0715_ozf.map
Size is 5860, 5860
Coordinate System is:
PROJCS["UTM Zone 36, Northern Hemisphere",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",33],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
GeoTransform =
  647690.1672605723, 8.519190252396545, 0.1802216446798053
  3575200.856193653, 0.2040104927636261, -8.558172983414893
Corner Coordinates:
Upper Left  (  647690.167, 3575200.856) ( 34d34' 7.35"E, 32d18'14.00"N)
Lower Left  (  648746.266, 3525049.963) ( 34d34'19.78"E, 31d51' 5.30"N)
Upper Right (  697612.622, 3576396.358) ( 35d 5'56.21"E, 32d18'25.07"N)
Lower Right (  698668.721, 3526245.464) ( 35d 5'59.25"E, 31d51'16.70"N)
Center      (  673179.444, 3550723.160) ( 34d50' 5.64"E, 32d 4'46.28"N)
Band 1 Block=64x64 Type=Byte, ColorInterp=Palette
  Overviews: 1465x1465, 586x586, 293x293, 146x146, 59x59
  Color Table (RGB with 256 entries)

From warmerdam at pobox.com  Wed Dec  5 16:18:16 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 05 Dec 2012 16:18:16 -0800
Subject: [gdal-dev] EPSG 8.0 Upgrade
Message-ID: <50BFE448.5070409@pobox.com>

Folks,

At the request of Howard Butler, I have upgraded PROJ.4, libgeotiff, and
GDAL to use the EPSG 8.0 database in development "trunk".

This was accomplished, as usual based on the process described here:

   http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/README

Amoung other things this will result in some datums having new preferred
datum shift solutions.  Upgrade with care.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer


From ckling at upcmail.nl  Thu Dec  6 00:27:48 2012
From: ckling at upcmail.nl (Kees Kling)
Date: Thu, 06 Dec 2012 09:27:48 +0100
Subject: [gdal-dev] projection issue with GDALCreateGenImgProjTransformer
In-Reply-To: <CAB6t5t9eVeMkzcVv6q9ngQjkfhmQWsxLq34D9vRCwPq7vcPBHA@mail.gmail.com>
References: <50BF1DC9.1010208@upcmail.nl>
	<CAB6t5t9eVeMkzcVv6q9ngQjkfhmQWsxLq34D9vRCwPq7vcPBHA@mail.gmail.com>
Message-ID: <50C05704.4010303@upcmail.nl>

Hi Trent,

I also tried it in meters and of course I also need a +b as minor 
radius, but that also doesn't work

Regards
kees


On 12/05/2012 06:17 PM, Hare, Trent wrote:
> Kees,
>    Just an initial guess. It looks like you are using a km radius when 
> it should in meters - +a=6378388.0
>
> -Trent
>
>
> On Wed, Dec 5, 2012 at 3:11 AM, Kees Kling <ckling at upcmail.nl 
> <mailto:ckling at upcmail.nl>> wrote:
>
>     Hi all,
>
>     I'm trying to reproject an image.
>
>     source projection = `+proj=stere +lat_0=90.0 +lon_0=0.0
>     +lat_ts=60.0 +a=6378.388'
>     I already used this projection in other parts of my project, but
>     then in combination with OGR. Here I don't have problems, but if I
>     use it with gdal in the function  GDALCreateGenImgProjTransformer,
>     I'm getting the error:
>
>     ERROR 1: Failed to import coordinate system `+proj=stere
>     +lat_0=90.0 +lon_0=0.0 +lat_ts=60.0 +a=6378.388'
>
>     What am I doing wrong
>
>     Regards
>
>     Kees Kling
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121206/3c1c3344/attachment.html>

From Martin.Sommer at cassidian.com  Thu Dec  6 01:00:34 2012
From: Martin.Sommer at cassidian.com (Sommer, Martin)
Date: Thu, 6 Dec 2012 10:00:34 +0100
Subject: [gdal-dev] Reading ISequentialStream object in memory
Message-ID: <4AF8778B5747C44783C6D046C9819B6C02DCF80A@GSX703A.mxchg.m.corp>

Hello,

is there a way to read a COM-object "ISequentialStream" into a GDAL/OGR
datasource?

Stream : public ISequentialStream {
};

I would like to create no other copy of the existing stream and no
temporary file on disk.
Example for shape-file (pseudo code):

CComPtr<IStream> _stream;
VSIFCloseL( VSIFileFromMemBuffer( "vsimem/test.shp", ?_stream?, 0, FALSE
) );


Regards,
Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121206/e87ff63c/attachment.html>

From cavicchi at ferrara.linux.it  Thu Dec  6 01:15:57 2012
From: cavicchi at ferrara.linux.it (Mario Cavicchi)
Date: Thu, 06 Dec 2012 10:15:57 +0100
Subject: [gdal-dev] frmt_wms_googlemaps_tms.xml help ...
In-Reply-To: <CALtm4h1=c6bf7RvuLSNcxhodi0CYrQfxQUn8ZX8ZVepJggaDKg@mail.gmail.com>
References: <50BF88EE.9050203@ferrara.linux.it>
	<CALtm4h1=c6bf7RvuLSNcxhodi0CYrQfxQUn8ZX8ZVepJggaDKg@mail.gmail.com>
Message-ID: <50C0624D.1020802@ferrara.linux.it>

The contents of the frmt_wms_googlemaps_tms.xml:

<GDAL_WMS>
     <Service name="TMS">

<ServerUrl>http://mt.google.com/vt/lyrs=s&amp;x=${x}&amp;y=${y}&amp;z=${z}</ServerUrl>
     </Service>
     <DataWindow>
         <UpperLeftX>-20037508.34</UpperLeftX>
         <UpperLeftY>20037508.34</UpperLeftY>
         <LowerRightX>20037508.34</LowerRightX>
         <LowerRightY>-20037508.34</LowerRightY>
         <TileLevel>20</TileLevel>
         <TileCountX>1</TileCountX>
         <TileCountY>1</TileCountY>
         <YOrigin>top</YOrigin>
     </DataWindow>
     <Projection>EPSG:900913</Projection>
     <BlockSizeX>256</BlockSizeX>
     <BlockSizeY>256</BlockSizeY>
     <BandsCount>3</BandsCount>
     <MaxConnections>5</MaxConnections>
     <Cache />
</GDAL_WMS>

the gdalinfo:

Driver: GTiff/GeoTIFF
Files: tempfile.tif
Size is 363, 380
Coordinate System is:
PROJCS["Google Maps Global Mercator",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Mercator_1SP"],
     PARAMETER["central_meridian",0],
     PARAMETER["scale_factor",1],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
Origin = (1299378.124538742238656,5588829.177167181856930)
Pixel Size = (0.298582141697407,-0.298582141697407)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  ( 1299378.125, 5588829.177) ( 11d40'21.04"E, 44d59' 3.39"N)
Lower Left  ( 1299378.125, 5588715.716) ( 11d40'21.04"E, 44d59' 0.79"N)
Upper Right ( 1299486.510, 5588829.177) ( 11d40'24.55"E, 44d59' 3.39"N)
Lower Right ( 1299486.510, 5588715.716) ( 11d40'24.55"E, 44d59' 0.79"N)
Center      ( 1299432.317, 5588772.447) ( 11d40'22.80"E, 44d59' 2.09"N)
Band 1 Block=363x7 Type=Byte, ColorInterp=Red
Band 2 Block=363x7 Type=Byte, ColorInterp=Green
Band 3 Block=363x7 Type=Byte, ColorInterp=Blue


Regards,
Mario


On 12/05/2012 09:51 PM, Travis Kirstine wrote:
> what do the contents of the frmt_wms_googlemaps_tms.xml and the output
> of gdalinfo tempfile.tif look like
>
>
> On 5 December 2012 12:48, Mario Cavicchi <cavicchi at ferrara.linux.it
> <mailto:cavicchi at ferrara.linux.it>> wrote:
>
>     Hi folks,
>     Maybe this question is old, but I don't find an answer on Internet.
>     If I perform this command:
>
>     gdal_translate -outsize 50% 50% -of GTiff -projwin
>     1299378.2102987265 5588829.1661406181 1299486.6170906540
>     5588715.6742054483 frmt_wms_googlemaps_tms.xml tempfile.tif
>
>     the image obtained is perfect in term of area of interest, but the
>     georeference is wrong if I open the image with ENVI.
>     I think that it is caused for the "Google Maps Global Mercator", but
>     I don't know how I can convert the projection to (for example) an
>     UTM projection or something else. I tried to reproject using gdalwarp:
>
>     gdalwarp -t_srs "+proj=utm +zone=32 +datum=wgs84" tempfile.tif
>     tempfile-warp.tif
>
>     but, still wrong georeference.
>
>     Someone can help me?
>
>     --
>     Ciao,
>              Mario
>
>     [ Web Info: http://members.ferrara.linux.__it/cavicchi
>     <http://members.ferrara.linux.it/cavicchi> ]
>     _________________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/__mailman/listinfo/gdal-dev
>     <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>


-- 
Ciao,
         Mario

[ Web Info: http://members.ferrara.linux.it/cavicchi ]

From j.l.h.hartmann at uva.nl  Thu Dec  6 02:13:15 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 06 Dec 2012 11:13:15 +0100
Subject: [gdal-dev] EPSG 8.0 Upgrade
In-Reply-To: <50BFE448.5070409@pobox.com>
References: <50BFE448.5070409@pobox.com>
Message-ID: <50C06FBB.5020503@uva.nl>

Hi Frank, where do I find which datums have new datum shift solutions?

Jan

On 12/06/2012 01:18 AM, Frank Warmerdam wrote:
> Folks,
>
> At the request of Howard Butler, I have upgraded PROJ.4, libgeotiff, and
> GDAL to use the EPSG 8.0 database in development "trunk".
>
> This was accomplished, as usual based on the process described here:
>
>   http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/README
>
> Amoung other things this will result in some datums having new preferred
> datum shift solutions.  Upgrade with care.
>
> Best regards,

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121206/0607940b/attachment.html>

From traviskirstine at gmail.com  Thu Dec  6 06:25:48 2012
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Thu, 6 Dec 2012 09:25:48 -0500
Subject: [gdal-dev] frmt_wms_googlemaps_tms.xml help ...
In-Reply-To: <50C0624D.1020802@ferrara.linux.it>
References: <50BF88EE.9050203@ferrara.linux.it>
	<CALtm4h1=c6bf7RvuLSNcxhodi0CYrQfxQUn8ZX8ZVepJggaDKg@mail.gmail.com>
	<50C0624D.1020802@ferrara.linux.it>
Message-ID: <CALtm4h01CVax0CnHMjtQO4Vb-YBsX4+aLYxgm_TVyBE5PQe2iw@mail.gmail.com>

Mario,

>From what I can tell the output of the gdalinfo is fine, I'm guessing that
it is the correct mercator / dms coords of the bounding box?

Upper Left  ( 1299378.125, 5588829.177) ( 11d40'21.04"E, 44d59' 3.39"N)
Lower Left  ( 1299378.125, 5588715.716) ( 11d40'21.04"E, 44d59' 0.79"N)
Upper Right ( 1299486.510, 5588829.177) ( 11d40'24.55"E, 44d59' 3.39"N)
Lower Right ( 1299486.510, 5588715.716) ( 11d40'24.55"E, 44d59' 0.79"N)


I would try the gdalwarp using the -s_srs flag

gdalwarp -s_srs EPSG:900913 -t_srs "+proj=utm +zone=32 +datum=wgs84"
tempfile.tif tempfile-warp.tif

or

gdalwarp -s_srs EPSG:3857 -t_srs "+proj=utm +zone=32 +datum=wgs84"
tempfile.tif tempfile-warp.tif

Regards



On 6 December 2012 04:15, Mario Cavicchi <cavicchi at ferrara.linux.it> wrote:

> The contents of the frmt_wms_googlemaps_tms.xml:
>
> <GDAL_WMS>
>     <Service name="TMS">
>
> <ServerUrl>http://mt.google.**com/vt/lyrs=s&amp;x=${x}&amp;**
> y=${y}&amp;z=${z}<http://mt.google.com/vt/lyrs=s&x=$%7Bx%7D&y=$%7By%7D&z=$%7Bz%7D>
> </ServerUrl>
>     </Service>
>     <DataWindow>
>         <UpperLeftX>-20037508.34</**UpperLeftX>
>         <UpperLeftY>20037508.34</**UpperLeftY>
>         <LowerRightX>20037508.34</**LowerRightX>
>         <LowerRightY>-20037508.34</**LowerRightY>
>         <TileLevel>20</TileLevel>
>         <TileCountX>1</TileCountX>
>         <TileCountY>1</TileCountY>
>         <YOrigin>top</YOrigin>
>     </DataWindow>
>     <Projection>EPSG:900913</**Projection>
>     <BlockSizeX>256</BlockSizeX>
>     <BlockSizeY>256</BlockSizeY>
>     <BandsCount>3</BandsCount>
>     <MaxConnections>5</**MaxConnections>
>     <Cache />
> </GDAL_WMS>
>
> the gdalinfo:
>
> Driver: GTiff/GeoTIFF
> Files: tempfile.tif
> Size is 363, 380
> Coordinate System is:
> PROJCS["Google Maps Global Mercator",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.**0174532925199433],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Mercator_1SP"],
>     PARAMETER["central_meridian",**0],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
> Origin = (1299378.124538742238656,**5588829.177167181856930)
> Pixel Size = (0.298582141697407,-0.**298582141697407)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  ( 1299378.125, 5588829.177) ( 11d40'21.04"E, 44d59' 3.39"N)
> Lower Left  ( 1299378.125, 5588715.716) ( 11d40'21.04"E, 44d59' 0.79"N)
> Upper Right ( 1299486.510, 5588829.177) ( 11d40'24.55"E, 44d59' 3.39"N)
> Lower Right ( 1299486.510, 5588715.716) ( 11d40'24.55"E, 44d59' 0.79"N)
> Center      ( 1299432.317, 5588772.447) ( 11d40'22.80"E, 44d59' 2.09"N)
> Band 1 Block=363x7 Type=Byte, ColorInterp=Red
> Band 2 Block=363x7 Type=Byte, ColorInterp=Green
> Band 3 Block=363x7 Type=Byte, ColorInterp=Blue
>
>
> Regards,
> Mario
>
>
> On 12/05/2012 09:51 PM, Travis Kirstine wrote:
>
>> what do the contents of the frmt_wms_googlemaps_tms.xml and the output
>> of gdalinfo tempfile.tif look like
>>
>>
>> On 5 December 2012 12:48, Mario Cavicchi <cavicchi at ferrara.linux.it
>> <mailto:cavicchi at ferrara.**linux.it <cavicchi at ferrara.linux.it>>> wrote:
>>
>>     Hi folks,
>>     Maybe this question is old, but I don't find an answer on Internet.
>>     If I perform this command:
>>
>>     gdal_translate -outsize 50% 50% -of GTiff -projwin
>>     1299378.2102987265 5588829.1661406181 1299486.6170906540
>>     5588715.6742054483 frmt_wms_googlemaps_tms.xml tempfile.tif
>>
>>     the image obtained is perfect in term of area of interest, but the
>>     georeference is wrong if I open the image with ENVI.
>>     I think that it is caused for the "Google Maps Global Mercator", but
>>     I don't know how I can convert the projection to (for example) an
>>     UTM projection or something else. I tried to reproject using gdalwarp:
>>
>>     gdalwarp -t_srs "+proj=utm +zone=32 +datum=wgs84" tempfile.tif
>>     tempfile-warp.tif
>>
>>     but, still wrong georeference.
>>
>>     Someone can help me?
>>
>>     --
>>     Ciao,
>>              Mario
>>
>>     [ Web Info: http://members.ferrara.linux._**_it/cavicchi
>>     <http://members.ferrara.linux.**it/cavicchi<http://members.ferrara.linux.it/cavicchi>>
>> ]
>>     ______________________________**___________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.**org<gdal-dev at lists.osgeo.org>
>> >
>>     http://lists.osgeo.org/__**mailman/listinfo/gdal-dev<http://lists.osgeo.org/__mailman/listinfo/gdal-dev>
>>     <http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>> >
>>
>>
>>
>
> --
> Ciao,
>         Mario
>
> [ Web Info: http://members.ferrara.linux.**it/cavicchi<http://members.ferrara.linux.it/cavicchi>]
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121206/ae90e648/attachment.html>

From JPalmer at linz.govt.nz  Thu Dec  6 10:12:10 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Fri, 7 Dec 2012 07:12:10 +1300
Subject: [gdal-dev] EPSG 8.0 Upgrade
In-Reply-To: <50BFE448.5070409@pobox.com>
References: <50BFE448.5070409@pobox.com>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0EDDB848DE@prdlsmmsg01.ad.linz.govt.nz>

HI Frank,

Thanks that's great news. Has this upgrade now started supporting data shift grids, such as NZGD2000<->NZGD1949?

Cheers
Jeremy
________________________________________
From: gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org] On Behalf Of Frank Warmerdam [warmerdam at pobox.com]
Sent: Thursday, 6 December 2012 1:18 p.m.
To: PROJ.4 and general Projections Discussions; GeoTIFF; gdal-dev; metacrs at lists.osgeo.org
Subject: [gdal-dev] EPSG 8.0 Upgrade

Folks,

At the request of Howard Butler, I have upgraded PROJ.4, libgeotiff, and
GDAL to use the EPSG 8.0 database in development "trunk".

This was accomplished, as usual based on the process described here:

   http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/README

Amoung other things this will result in some datums having new preferred
datum shift solutions.  Upgrade with care.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From kfw4 at cornell.edu  Thu Dec  6 09:57:03 2012
From: kfw4 at cornell.edu (Kevin F Webb)
Date: Thu, 6 Dec 2012 17:57:03 +0000
Subject: [gdal-dev] v1.9.2 throws ERROR 4 exception, v1.6.1 does not
Message-ID: <3ECC41DAF493D643AB69EE50D2508FFD0977D583@MBXA-02.exchange.cornell.edu>

Hi folks,
I have a curious situation with v1.9.2 generating ERROR 4 exceptions on an HDF4 file, and v1.6.1 does not (same machine, same HDF4 library, same HDF file, both versions compiled today). The output below demonstrates the conundrum.

Any ideas?

KFW



[kfw4 at columba ~]$ file /mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.2012264183744.hdf
/mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.2012264183744.hdf: Hierarchical Data Format (version 4) data


[kfw4 at columba apps]$ ./gdalinfo --version
GDAL 1.6.1, released 2009/05/11
[kfw4 at columba apps]$ ./gdalinfo --formats | fgrep -i hdf
  HDF4 (ro): Hierarchical Data Format Release 4
  HDF4Image (rw+): HDF4 Dataset
  HDF5 (ro): Hierarchical Data Format Release 5
  HDF5Image (ro): HDF5 Dataset
[kfw4 at columba apps]$ ./gdalinfo /mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.2012264183744.hdf
Driver: HDF4/Hierarchical Data Format Release 4
Files: /mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.2012264183744.hdf
Size is 512, 512
Coordinate System is `'
Metadata:
  HDFEOSVersion=HDFEOS_V2.9
  REPROCESSINGPLANNED=further update is anticipated
  REPROCESSINGACTUAL=reprocessed
  LOCALGRANULEID=MCD12Q1.A2011001.h33v07.051.2012264183744.hdf
...



[kfw4 at columba ~]$ gdalinfo --version
GDAL 1.9.2, released 2012/10/08
[kfw4 at columba ~]$ gdalinfo --formats | fgrep -i hdf
  HDF4 (ro): Hierarchical Data Format Release 4
  HDF4Image (rw+): HDF4 Dataset
  HDF5 (ro): Hierarchical Data Format Release 5
  HDF5Image (ro): HDF5 Dataset
[kfw4 at columba ~]$ gdalinfo /mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.2012264183744.hdf
ERROR 4: `/mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.2012264183744.hdf' not recognised as a supported file format.

gdalinfo failed - unable to open '/mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.2012264183744.hdf'.





From even.rouault at mines-paris.org  Thu Dec  6 10:35:33 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 6 Dec 2012 19:35:33 +0100
Subject: [gdal-dev] v1.9.2 throws ERROR 4 exception, v1.6.1 does not
In-Reply-To: <3ECC41DAF493D643AB69EE50D2508FFD0977D583@MBXA-02.exchange.cornell.edu>
References: <3ECC41DAF493D643AB69EE50D2508FFD0977D583@MBXA-02.exchange.cornell.edu>
Message-ID: <201212061935.34204.even.rouault@mines-paris.org>

Kevin,

could you share the file ?

Le jeudi 06 d?cembre 2012 18:57:03, Kevin F Webb a ?crit :
> Hi folks,
> I have a curious situation with v1.9.2 generating ERROR 4 exceptions on an
> HDF4 file, and v1.6.1 does not (same machine, same HDF4 library, same HDF
> file, both versions compiled today). The output below demonstrates the
> conundrum.
> 
> Any ideas?
> 
> KFW
> 
> 
> 
> [kfw4 at columba ~]$ file
> /mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.201
> 2264183744.hdf
> /mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.201
> 2264183744.hdf: Hierarchical Data Format (version 4) data
> 
> 
> [kfw4 at columba apps]$ ./gdalinfo --version
> GDAL 1.6.1, released 2009/05/11
> [kfw4 at columba apps]$ ./gdalinfo --formats | fgrep -i hdf
>   HDF4 (ro): Hierarchical Data Format Release 4
>   HDF4Image (rw+): HDF4 Dataset
>   HDF5 (ro): Hierarchical Data Format Release 5
>   HDF5Image (ro): HDF5 Dataset
> [kfw4 at columba apps]$ ./gdalinfo
> /mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.201
> 2264183744.hdf Driver: HDF4/Hierarchical Data Format Release 4
> Files:
> /mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.201
> 2264183744.hdf Size is 512, 512
> Coordinate System is `'
> Metadata:
>   HDFEOSVersion=HDFEOS_V2.9
>   REPROCESSINGPLANNED=further update is anticipated
>   REPROCESSINGACTUAL=reprocessed
>   LOCALGRANULEID=MCD12Q1.A2011001.h33v07.051.2012264183744.hdf
> ...
> 
> 
> 
> [kfw4 at columba ~]$ gdalinfo --version
> GDAL 1.9.2, released 2012/10/08
> [kfw4 at columba ~]$ gdalinfo --formats | fgrep -i hdf
>   HDF4 (ro): Hierarchical Data Format Release 4
>   HDF4Image (rw+): HDF4 Dataset
>   HDF5 (ro): Hierarchical Data Format Release 5
>   HDF5Image (ro): HDF5 Dataset
> [kfw4 at columba ~]$ gdalinfo
> /mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.201
> 2264183744.hdf ERROR 4:
> `/mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.20
> 12264183744.hdf' not recognised as a supported file format.
> 
> gdalinfo failed - unable to open
> '/mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.20
> 12264183744.hdf'.
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Thu Dec  6 10:53:41 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 6 Dec 2012 19:53:41 +0100
Subject: [gdal-dev] v1.9.2 throws ERROR 4 exception, v1.6.1 does not
In-Reply-To: <3ECC41DAF493D643AB69EE50D2508FFD0977D653@MBXA-02.exchange.cornell.edu>
References: <3ECC41DAF493D643AB69EE50D2508FFD0977D583@MBXA-02.exchange.cornell.edu>
	<201212061935.34204.even.rouault@mines-paris.org>
	<3ECC41DAF493D643AB69EE50D2508FFD0977D653@MBXA-02.exchange.cornell.edu>
Message-ID: <201212061953.41947.even.rouault@mines-paris.org>

Le jeudi 06 d?cembre 2012 19:48:34, Kevin F Webb a ?crit :
> attached
> 
> Thanks Even!

Your file works me for both GDAL trunk and GDAL 1.9.0, so I suspect there is 
something wrong in your setup, or something else ...

From kfw4 at cornell.edu  Thu Dec  6 10:59:05 2012
From: kfw4 at cornell.edu (Kevin F Webb)
Date: Thu, 6 Dec 2012 18:59:05 +0000
Subject: [gdal-dev] v1.9.2 throws ERROR 4 exception, v1.6.1 does not
In-Reply-To: <201212061953.41947.even.rouault@mines-paris.org>
References: <3ECC41DAF493D643AB69EE50D2508FFD0977D583@MBXA-02.exchange.cornell.edu>
	<201212061935.34204.even.rouault@mines-paris.org>
	<3ECC41DAF493D643AB69EE50D2508FFD0977D653@MBXA-02.exchange.cornell.edu>,
	<201212061953.41947.even.rouault@mines-paris.org>
Message-ID: <3ECC41DAF493D643AB69EE50D2508FFD0977D66B@MBXA-02.exchange.cornell.edu>

Any suggestions Even? Permissions aren't an issue, same user executed all commands, LD_LIBRARY_PATH is identical, ld.so.conf was updated before the 2 builds, and ldd shows that the link files are all locatable.
________________________________________
From: Even Rouault [even.rouault at mines-paris.org]
Sent: Thursday, December 06, 2012 1:53 PM
To: Kevin F Webb
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] v1.9.2 throws ERROR 4 exception, v1.6.1 does not

Le jeudi 06 d?cembre 2012 19:48:34, Kevin F Webb a ?crit :
> attached
>
> Thanks Even!

Your file works me for both GDAL trunk and GDAL 1.9.0, so I suspect there is
something wrong in your setup, or something else ...

From turgay.osna at netcad.com.tr  Thu Dec  6 23:29:55 2012
From: turgay.osna at netcad.com.tr (netcadturgay)
Date: Thu, 6 Dec 2012 23:29:55 -0800 (PST)
Subject: [gdal-dev] Gdal C# Async Read
Message-ID: <1354865395505-5021363.post@n6.nabble.com>

Is there any solution for reading a file with multi-thread access? Also every
thread will read a different area.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Gdal-C-Async-Read-tp5021363.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From hrz at geodata.soton.ac.uk  Fri Dec  7 02:57:07 2012
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Fri, 7 Dec 2012 10:57:07 +0000
Subject: [gdal-dev] v1.9.2 throws ERROR 4 exception, v1.6.1 does not
In-Reply-To: <3ECC41DAF493D643AB69EE50D2508FFD0977D66B@MBXA-02.exchange.cornell.edu>
References: <3ECC41DAF493D643AB69EE50D2508FFD0977D583@MBXA-02.exchange.cornell.edu>
	<201212061935.34204.even.rouault@mines-paris.org>
	<201212061953.41947.even.rouault@mines-paris.org>
	<3ECC41DAF493D643AB69EE50D2508FFD0977D66B@MBXA-02.exchange.cornell.edu>
Message-ID: <20121207105707.GA21389@sarah.geodata.soton.ac.uk>

Running `strace` might yield a little more information:

strace gdalinfo /mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.2012264183744.hdf

Homme

On Thu, Dec 06, 2012 at 06:59:05PM +0000, Kevin F Webb wrote:
> Any suggestions Even? Permissions aren't an issue, same user executed all commands, LD_LIBRARY_PATH is identical, ld.so.conf was updated before the 2 builds, and ldd shows that the link files are all locatable.
> ________________________________________
> From: Even Rouault [even.rouault at mines-paris.org]
> Sent: Thursday, December 06, 2012 1:53 PM
> To: Kevin F Webb
> Cc: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] v1.9.2 throws ERROR 4 exception, v1.6.1 does not
> 
> Le jeudi 06 d?cembre 2012 19:48:34, Kevin F Webb a ?crit :
> > attached
> >
> > Thanks Even!
> 
> Your file works me for both GDAL trunk and GDAL 1.9.0, so I suspect there is
> something wrong in your setup, or something else ...
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Homme Zwaagstra
GeoData Institute
University of Southampton

Tel: +44(0)2380 59 8709

From kfw4 at cornell.edu  Fri Dec  7 06:43:37 2012
From: kfw4 at cornell.edu (Kevin F Webb)
Date: Fri, 7 Dec 2012 14:43:37 +0000
Subject: [gdal-dev] v1.9.2 throws ERROR 4 exception, v1.6.1 does not
In-Reply-To: <20121207105707.GA21389@sarah.geodata.soton.ac.uk>
References: <3ECC41DAF493D643AB69EE50D2508FFD0977D583@MBXA-02.exchange.cornell.edu>
	<201212061935.34204.even.rouault@mines-paris.org>
	<201212061953.41947.even.rouault@mines-paris.org>
	<3ECC41DAF493D643AB69EE50D2508FFD0977D66B@MBXA-02.exchange.cornell.edu>,
	<20121207105707.GA21389@sarah.geodata.soton.ac.uk>
Message-ID: <3ECC41DAF493D643AB69EE50D2508FFD0977DC65@MBXA-02.exchange.cornell.edu>

Excellent suggestion Homme!

I can clearly see where the successful version takes off and the "failure" occurs, but no clear indication, to me at least, what the cause of the "failure" is. The library set is more complex than I've shown here, but the key libs should be those I've listed. I will attempt to instrument the 1.9.2 version to get further insight what is causing the problem.

Thanks for your suggestion.

KFW



--GOOD--
...
open("/home/kfw4/software/gis/gdal-1.6.1/.libs/libgdal.so.1", O_RDONLY) = 3
...
open("/usr/local/HDF4.2r4/lib/libmfhdf.so.0", O_RDONLY) = 3
...
open("/usr/local/HDF4.2r4/lib/libdf.so.0", O_RDONLY) = 3
...
read(4, "\20\0\33Land_Cover_Type_1_Secondary\0\6"..., 4096) = 4096
lseek(4, 0, SEEK_SET)                   = 0
read(4, "\16\3\23\1\0\310\5~\354\370\0\36\0\1\0\0\tj\0\0\0\\\7\255\0\3\0\0\t\306\0\0"..., 4096) = 4096
lseek(4, 92196864, SEEK_SET)            = 92196864
read(4, "\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377\377"..., 409\
6) = 4096
lseek(4, 92200960, SEEK_SET)            = 92200960
lseek(4, 92200960, SEEK_SET)            = 92200960
lseek(4, 92200960, SEEK_SET)            = 92200960
...
write(1, "Driver: HDF4/Hierarchical Data F"..., 48Driver: HDF4/Hierarchical Data Format Release 4
...


--BAD--
open("/usr/local/lib/libgdal.so.1", O_RDONLY) = 3
...
open("/usr/local/HDF4.2r4/lib/libmfhdf.so.0", O_RDONLY) = 3
...
open("/usr/local/HDF4.2r4/lib/libdf.so.0", O_RDONLY) = 3
...
read(4, "\20\0\33Land_Cover_Type_1_Secondary\0\6"..., 4096) = 4096
lseek(4, 0, SEEK_SET)                   = 0
read(4, "\16\3\23\1\0\310\5~\354\370\0\36\0\1\0\0\tj\0\0\0\\\7\255\0\3\0\0\t\306\0\0"..., 4096)\
 = 4096
close(4)                                = 0
munmap(0x2b669213d000, 4096)            = 0
open("/mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.2012264183744.hdf"\
, O_RDONLY) = 4
fstat(4, {st_mode=S_IFREG|0664, st_size=92268717, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x2b669213d000
read(4, "\16\3\23\1\0\310\5~\354\370\0\36\0\1\0\0\tj\0\0\0\\\7\255\0\3\0\0\t\306\0\0"..., 4096)\
 = 4096
close(4)                                = 0
munmap(0x2b669213d000, 4096)            = 0
brk(0x1c7f4000)                         = 0x1c7f4000
open("/mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.2012264183744.hdf"\
, O_RDONLY) = 4
fstat(4, {st_mode=S_IFREG|0664, st_size=92268717, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x2b669213d000
read(4, "\16\3\23\1\0\310\5~\354\370\0\36\0\1\0\0\tj\0\0\0\\\7\255\0\3\0\0\t\306\0\0"..., 4096)\
 = 4096
close(4)                                = 0
munmap(0x2b669213d000, 4096)            = 0
mmap(NULL, 528384, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x2b6696fd0000
munmap(0x2b6696fd0000, 528384)          = 0
close(3)                                = 0
munmap(0x2b669213c000, 4096)            = 0
write(2, "ERROR 4: `/mnt/stemdata02/kfw4/m"..., 144ERROR 4: `/mnt/stemdata02/kfw4/modis_landcov\
er/tiles/MCD12Q1.A2011001.h33v07.051.2012264183744.hdf' not recognised as a supported file form\
at.



________________________________________
From: Homme Zwaagstra [hrz at geodata.soton.ac.uk]
Sent: Friday, December 07, 2012 5:57 AM
To: Kevin F Webb
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] v1.9.2 throws ERROR 4 exception, v1.6.1 does not

Running `strace` might yield a little more information:

strace gdalinfo /mnt/stemdata02/kfw4/modis_landcover/tiles/MCD12Q1.A2011001.h33v07.051.2012264183744.hdf

Homme

On Thu, Dec 06, 2012 at 06:59:05PM +0000, Kevin F Webb wrote:
> Any suggestions Even? Permissions aren't an issue, same user executed all commands, LD_LIBRARY_PATH is identical, ld.so.conf was updated before the 2 builds, and ldd shows that the link files are all locatable.
> ________________________________________
> From: Even Rouault [even.rouault at mines-paris.org]
> Sent: Thursday, December 06, 2012 1:53 PM
> To: Kevin F Webb
> Cc: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] v1.9.2 throws ERROR 4 exception, v1.6.1 does not
>
> Le jeudi 06 d?cembre 2012 19:48:34, Kevin F Webb a ?crit :
> > attached
> >
> > Thanks Even!
>
> Your file works me for both GDAL trunk and GDAL 1.9.0, so I suspect there is
> something wrong in your setup, or something else ...
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--
Homme Zwaagstra
GeoData Institute
University of Southampton

Tel: +44(0)2380 59 8709

From even.rouault at mines-paris.org  Fri Dec  7 06:55:13 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 07 Dec 2012 15:55:13 +0100
Subject: [gdal-dev] v1.9.2 throws ERROR 4 exception, v1.6.1 does not
In-Reply-To: <3ECC41DAF493D643AB69EE50D2508FFD0977DC65@MBXA-02.exchange.cornell.edu>
References: <3ECC41DAF493D643AB69EE50D2508FFD0977D583@MBXA-02.exchange.cornell.edu>
	<201212061935.34204.even.rouault@mines-paris.org>
	<201212061953.41947.even.rouault@mines-paris.org>
	<3ECC41DAF493D643AB69EE50D2508FFD0977D66B@MBXA-02.exchange.cornell.edu>,
	<20121207105707.GA21389@sarah.geodata.soton.ac.uk>
	<3ECC41DAF493D643AB69EE50D2508FFD0977DC65@MBXA-02.exchange.cornell.edu>
Message-ID: <1354892113.50c20351cfa13@imp.free.fr>

Selon Kevin F Webb <kfw4 at cornell.edu>:

> Excellent suggestion Homme!
>
> I can clearly see where the successful version takes off and the "failure"
> occurs, but no clear indication, to me at least, what the cause of the
> "failure" is. The library set is more complex than I've shown here, but the
> key libs should be those I've listed. I will attempt to instrument the 1.9.2
> version to get further insight what is causing the problem.

If you compile a version with debug symbols, I'd suggest that you just set a
breakpoint in HDF4Dataset::Open and then step line by line to figure out what
happens.

From kfw4 at cornell.edu  Fri Dec  7 07:41:00 2012
From: kfw4 at cornell.edu (Kevin F Webb)
Date: Fri, 7 Dec 2012 15:41:00 +0000
Subject: [gdal-dev] v1.9.2 throws ERROR 4 exception, v1.6.1 does not
In-Reply-To: <1354892113.50c20351cfa13@imp.free.fr>
References: <3ECC41DAF493D643AB69EE50D2508FFD0977D583@MBXA-02.exchange.cornell.edu>
	<201212061935.34204.even.rouault@mines-paris.org>
	<201212061953.41947.even.rouault@mines-paris.org>
	<3ECC41DAF493D643AB69EE50D2508FFD0977D66B@MBXA-02.exchange.cornell.edu>,
	<20121207105707.GA21389@sarah.geodata.soton.ac.uk>
	<3ECC41DAF493D643AB69EE50D2508FFD0977DC65@MBXA-02.exchange.cornell.edu>,
	<1354892113.50c20351cfa13@imp.free.fr>
Message-ID: <3ECC41DAF493D643AB69EE50D2508FFD0977DD06@MBXA-02.exchange.cornell.edu>

Another excellent suggestion!

Merci Even.
________________________________________
From: Even Rouault [even.rouault at mines-paris.org]
Sent: Friday, December 07, 2012 9:55 AM
To: Kevin F Webb
Cc: Homme Zwaagstra; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] v1.9.2 throws ERROR 4 exception, v1.6.1 does not

Selon Kevin F Webb <kfw4 at cornell.edu>:

> Excellent suggestion Homme!
>
> I can clearly see where the successful version takes off and the "failure"
> occurs, but no clear indication, to me at least, what the cause of the
> "failure" is. The library set is more complex than I've shown here, but the
> key libs should be those I've listed. I will attempt to instrument the 1.9.2
> version to get further insight what is causing the problem.

If you compile a version with debug symbols, I'd suggest that you just set a
breakpoint in HDF4Dataset::Open and then step line by line to figure out what
happens.

From warmerdam at pobox.com  Fri Dec  7 10:53:28 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 7 Dec 2012 10:53:28 -0800
Subject: [gdal-dev] EPSG 8.0 Upgrade
In-Reply-To: <50C06FBB.5020503@uva.nl>
References: <50BFE448.5070409@pobox.com>
	<50C06FBB.5020503@uva.nl>
Message-ID: <CA+YzLBeDxjs8gXSAM9Gjz3LjFPpufdQuq45hGnQucfrYV3DtRg@mail.gmail.com>

Jan,

I think the easiest place to see them highlighted is in the changeset
applied to the PROJ.4 epsg init file:

  http://trac.osgeo.org/proj/changeset/2294

Best regards,
Frank


On Thu, Dec 6, 2012 at 2:13 AM, Jan Hartmann <j.l.h.hartmann at uva.nl> wrote:

>  Hi Frank, where do I find which datums have new datum shift solutions?
>
> Jan
>
>  On 12/06/2012 01:18 AM, Frank Warmerdam wrote:
>
> Folks,
>
> At the request of Howard Butler, I have upgraded PROJ.4, libgeotiff, and
> GDAL to use the EPSG 8.0 database in development "trunk".
>
> This was accomplished, as usual based on the process described here:
>
>   http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/README
>
> Amoung other things this will result in some datums having new preferred
> datum shift solutions.  Upgrade with care.
>
> Best regards,
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121207/1270baee/attachment.html>

From warmerdam at pobox.com  Fri Dec  7 11:03:05 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 7 Dec 2012 11:03:05 -0800
Subject: [gdal-dev] EPSG 8.0 Upgrade
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0EDDB848DE@prdlsmmsg01.ad.linz.govt.nz>
References: <50BFE448.5070409@pobox.com>
	<666FB8D75E95AE42965A0E76A5E5337E0EDDB848DE@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <CA+YzLBcvEKynLuC6=v6n5MM0Mms01phUUydxHkvUdDCTyzHFvw@mail.gmail.com>

Jeremy,

Unfortunately I do not automatically pickup references to grid shift files
from the EPSG database.  To the extent these are supported it is
accomplished by special hackery. In fact skimming the epsg file, I think
the only datum for which grid shift files are used *by default* is NAD27.
Perhaps this would be a good time for me to review how to utilize at least
the grid shift files we are distributing with PROJ.4 like ntf_r93.gsb and
nzgd2kgrid0005.gsb.

Hmm, I am getting the impression that nzgd2kgrid0005.grd is actually the
transformation between NZGD2000 and WGS84 and that we would actually need
another file - possibly something like Nzgd49ToNzgd2K.gdc to support
NZGD1949 - is that right?

I'd suggest you file a ticket in the PROJ.4 Trac on this issue with
suggestions on how to proceed.

Best regards,
Frank



On Thu, Dec 6, 2012 at 10:12 AM, Jeremy Palmer <JPalmer at linz.govt.nz> wrote:

> HI Frank,
>
> Thanks that's great news. Has this upgrade now started supporting data
> shift grids, such as NZGD2000<->NZGD1949?
>
> Cheers
> Jeremy
> ________________________________________
> From: gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org]
> On Behalf Of Frank Warmerdam [warmerdam at pobox.com]
> Sent: Thursday, 6 December 2012 1:18 p.m.
> To: PROJ.4 and general Projections Discussions; GeoTIFF; gdal-dev;
> metacrs at lists.osgeo.org
> Subject: [gdal-dev] EPSG 8.0 Upgrade
>
> Folks,
>
> At the request of Howard Butler, I have upgraded PROJ.4, libgeotiff, and
> GDAL to use the EPSG 8.0 database in development "trunk".
>
> This was accomplished, as usual based on the process described here:
>
>    http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/README
>
> Amoung other things this will result in some datums having new preferred
> datum shift solutions.  Upgrade with care.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://home.gdal.org/warmerda
> and watch the world go round - Rush    | Geospatial Software Developer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> This message contains information, which is confidential and may be
> subject to legal privilege. If you are not the intended recipient, you must
> not peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ. Thank You.
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121207/fa512b33/attachment-0001.html>

From seth at pricepages.org  Fri Dec  7 15:02:24 2012
From: seth at pricepages.org (Seth Price)
Date: Fri, 7 Dec 2012 16:02:24 -0700
Subject: [gdal-dev] GDALSimpleSURF improvements
Message-ID: <784a58fdf47940519eedefe12fb9e1a8.squirrel@pricepages.org>

I've worked the FLANN library into GDALSimpleSURF for a massive speedup
and made some other minor speed improvements mainly related to setting
constants as the right type and moving invariants outside of loops.

You can grab the updated source here. Please add it to whatever repository
is appropriate.
http://seth1.bluezone.usu.edu/flann_surf.tgz

Thanks,
Seth


From polimax at mail.ru  Sat Dec  8 02:21:58 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Sat, 08 Dec 2012 14:21:58 +0400
Subject: [gdal-dev] GDALSimpleSURF improvements
In-Reply-To: <784a58fdf47940519eedefe12fb9e1a8.squirrel@pricepages.org>
References: <784a58fdf47940519eedefe12fb9e1a8.squirrel@pricepages.org>
Message-ID: <50C314C6.3050606@mail.ru>

Hi Seth,

I'll test our code and try to patch GDAL if it possible.

Regards,
Dmitry

08.12.2012 3:02, Seth Price ?????:
> I've worked the FLANN library into GDALSimpleSURF for a massive speedup
> and made some other minor speed improvements mainly related to setting
> constants as the right type and moving invariants outside of loops.
>
> You can grab the updated source here. Please add it to whatever repository
> is appropriate.
> http://seth1.bluezone.usu.edu/flann_surf.tgz
>
> Thanks,
> Seth
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From Roger.Bivand at nhh.no  Sun Dec  9 00:32:13 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sun, 9 Dec 2012 00:32:13 -0800 (PST)
Subject: [gdal-dev] EPSG 8.0 Upgrade
In-Reply-To: <CA+YzLBeDxjs8gXSAM9Gjz3LjFPpufdQuq45hGnQucfrYV3DtRg@mail.gmail.com>
References: <50BFE448.5070409@pobox.com> <50C06FBB.5020503@uva.nl>
	<CA+YzLBeDxjs8gXSAM9Gjz3LjFPpufdQuq45hGnQucfrYV3DtRg@mail.gmail.com>
Message-ID: <1355041933016-5021645.post@n6.nabble.com>

Frank

Would it be possible to document which version of EPSG is being used by
setting #define (s) somewhere? It would be very helpful to be able to inform
users that a change may occur, and give them access to the version of the
installed copy? I'll look at thinking of a way, but I think this would make
results more reproducible?

Best wishes,

Roger


Frank Warmerdam wrote
> Jan,
> 
> I think the easiest place to see them highlighted is in the changeset
> applied to the PROJ.4 epsg init file:
> 
>   http://trac.osgeo.org/proj/changeset/2294
> 
> Best regards,
> Frank
> 
> 
> On Thu, Dec 6, 2012 at 2:13 AM, Jan Hartmann &lt;

> j.l.h.hartmann@

> &gt; wrote:
> 
>>  Hi Frank, where do I find which datums have new datum shift solutions?
>>
>> Jan
>>
>>  On 12/06/2012 01:18 AM, Frank Warmerdam wrote:
>>
>> Folks,
>>
>> At the request of Howard Butler, I have upgraded PROJ.4, libgeotiff, and
>> GDAL to use the EPSG 8.0 database in development "trunk".
>>
>> This was accomplished, as usual based on the process described here:
>>
>>   http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/README
>>
>> Amoung other things this will result in some datums having new preferred
>> datum shift solutions.  Upgrade with care.
>>
>> Best regards,
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> 

> gdal-dev at .osgeo

>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> 
> 
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,

> warmerdam@

> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> http://lists.osgeo.org/mailman/listinfo/gdal-dev





-----
Roger Bivand
NHH Norwegian School of Economics, Bergen, Norway
--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-EPSG-8-0-Upgrade-tp5021086p5021645.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From pcreso at pcreso.com  Sun Dec  9 01:17:51 2012
From: pcreso at pcreso.com (pcreso at pcreso.com)
Date: Sun, 9 Dec 2012 01:17:51 -0800 (PST)
Subject: [gdal-dev] EPSG 8.0 Upgrade
In-Reply-To: <1355041933016-5021645.post@n6.nabble.com>
Message-ID: <1355044671.12963.YahooMailClassic@web122004.mail.ne1.yahoo.com>

Extending this slightly - so it can more easily be discovered by less technically capable users, & in binary distributions of GDAL.

Is it possible to have a command line parameter for GDAL/Proj (etc) that tells the user what EPSG version is installed? Perhaps include this information in the -version option?

gdalinfo --version
GDAL 1.9.1, released 2012/05/15 - using EPSG vX.X

Thanks...

?? Brent Wood

--- On Sun, 12/9/12, Roger Bivand <Roger.Bivand at nhh.no> wrote:

From: Roger Bivand <Roger.Bivand at nhh.no>
Subject: Re: [gdal-dev] EPSG 8.0 Upgrade
To: gdal-dev at lists.osgeo.org
Date: Sunday, December 9, 2012, 9:32 PM

Frank

Would it be possible to document which version of EPSG is being used by
setting #define (s) somewhere? It would be very helpful to be able to inform
users that a change may occur, and give them access to the version of the
installed copy? I'll look at thinking of a way, but I think this would make
results more reproducible?

Best wishes,

Roger


Frank Warmerdam wrote
> Jan,
> 
> I think the easiest place to see them highlighted is in the changeset
> applied to the PROJ.4 epsg init file:
> 
>???http://trac.osgeo.org/proj/changeset/2294
> 
> Best regards,
> Frank
> 
> 
> On Thu, Dec 6, 2012 at 2:13 AM, Jan Hartmann &lt;

> j.l.h.hartmann@

> &gt; wrote:
> 
>>? Hi Frank, where do I find which datums have new datum shift solutions?
>>
>> Jan
>>
>>? On 12/06/2012 01:18 AM, Frank Warmerdam wrote:
>>
>> Folks,
>>
>> At the request of Howard Butler, I have upgraded PROJ.4, libgeotiff, and
>> GDAL to use the EPSG 8.0 database in development "trunk".
>>
>> This was accomplished, as usual based on the process described here:
>>
>>???http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/README
>>
>> Amoung other things this will result in some datums having new preferred
>> datum shift solutions.? Upgrade with care.
>>
>> Best regards,
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> 

> gdal-dev at .osgeo

>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> 
> 
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up???| Frank Warmerdam,

> warmerdam@

> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> http://lists.osgeo.org/mailman/listinfo/gdal-dev





-----
Roger Bivand
NHH Norwegian School of Economics, Bergen, Norway
--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-EPSG-8-0-Upgrade-tp5021086p5021645.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121209/a3f23717/attachment.html>

From lcelati at latitude-geosystems.com  Sun Dec  9 09:07:11 2012
From: lcelati at latitude-geosystems.com (laurent celati)
Date: Sun, 9 Dec 2012 09:07:11 -0800 (PST)
Subject: [gdal-dev] Gdal 1.9.2 : Which version of Gdal postgis driver?
Message-ID: <1355072831945-5021691.post@n6.nabble.com>

Hello,

As you know, significant updates have been made at the end of August 2012
regarding the postgis gdal driver. Can you tell me if the latest version of
gdal (version 1.9.2) released in october took into consideration these
updates? Thank you in advance to throw light for me.

Regards.




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Gdal-1-9-2-Which-version-of-Gdal-postgis-driver-tp5021691.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From admin at michiganwxsystem.com  Sun Dec  9 09:13:55 2012
From: admin at michiganwxsystem.com (Jeff Lake)
Date: Sun, 09 Dec 2012 12:13:55 -0500
Subject: [gdal-dev] Gdal 1.9.2 : Which version of Gdal postgis driver?
In-Reply-To: <1355072831945-5021691.post@n6.nabble.com>
References: <1355072831945-5021691.post@n6.nabble.com>
Message-ID: <50C4C6D3.6090000@michiganwxsystem.com>

I haven't seen any conflicts/problems
running postGIS 2.0.2 and GDAL 1.9.2 on CentOS 6.3

-Jeff Lake
MichiganWxSystem.com
AllisonHouse.com
TheWeatherCenter.net
GRLevelXStuff.com

On 12/9/2012 12:07, laurent celati wrote:
> Hello,
>
> As you know, significant updates have been made at the end of August 2012
> regarding the postgis gdal driver. Can you tell me if the latest version of
> gdal (version 1.9.2) released in october took into consideration these
> updates? Thank you in advance to throw light for me.
>
> Regards.
>
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Gdal-1-9-2-Which-version-of-Gdal-postgis-driver-tp5021691.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From lcelati at latitude-geosystems.com  Sun Dec  9 09:43:31 2012
From: lcelati at latitude-geosystems.com (laurent celati)
Date: Sun, 9 Dec 2012 09:43:31 -0800 (PST)
Subject: [gdal-dev] Gdal 1.9.2 : Which version of Gdal postgis driver?
In-Reply-To: <50C4C6D3.6090000@michiganwxsystem.com>
References: <1355072831945-5021691.post@n6.nabble.com>
	<50C4C6D3.6090000@michiganwxsystem.com>
Message-ID: <1355075011480-5021695.post@n6.nabble.com>

Dear Jeff, 

Sorry if my last post was not clear. Up to this summer, i noticed problems
with the gdal postgis driver (display slowness). Fortunalty, our dear Jorge
Averalo has brought several sigificant updates at the end of August . Please
read this following web page deals with these updates. 

 http://libregis.org/2012/08/25/updating-gdal-postgis-raster-driver/


I would know if the last version of gdal releases in october (1.9.2) take
into considerations these updates. 

Thank you. 

Regards. 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Gdal-1-9-2-Which-version-of-Gdal-postgis-driver-tp5021691p5021695.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Sun Dec  9 09:47:29 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 9 Dec 2012 18:47:29 +0100
Subject: [gdal-dev] Gdal 1.9.2 : Which version of Gdal postgis driver?
In-Reply-To: <1355075011480-5021695.post@n6.nabble.com>
References: <1355072831945-5021691.post@n6.nabble.com>
	<50C4C6D3.6090000@michiganwxsystem.com>
	<1355075011480-5021695.post@n6.nabble.com>
Message-ID: <201212091847.30101.even.rouault@mines-paris.org>

Le dimanche 09 d?cembre 2012 18:43:31, laurent celati a ?crit :
> Dear Jeff,
> 
> Sorry if my last post was not clear. Up to this summer, i noticed problems
> with the gdal postgis driver (display slowness). Fortunalty, our dear Jorge
> Averalo has brought several sigificant updates at the end of August .
> Please read this following web page deals with these updates.
> 
>  http://libregis.org/2012/08/25/updating-gdal-postgis-raster-driver/
> 
> 
> I would know if the last version of gdal releases in october (1.9.2) take
> into considerations these updates.

As far as I know, the major changes have been done in GDAL trunk, 1.10dev, 
which hopefully should be released within a few weeks.

> 
> Thank you.
> 
> Regards.
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Gdal-1-9-2-Which-version-of-Gdal-postg
> is-driver-tp5021691p5021695.html Sent from the GDAL - Dev mailing list
> archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From seth at pricepages.org  Sun Dec  9 14:31:13 2012
From: seth at pricepages.org (Seth Price)
Date: Sun, 9 Dec 2012 14:31:13 -0800
Subject: [gdal-dev] GDALSimpleSURF improvements
In-Reply-To: <50C314C6.3050606@mail.ru>
References: <784a58fdf47940519eedefe12fb9e1a8.squirrel@pricepages.org>
	<50C314C6.3050606@mail.ru>
Message-ID: <9DBC8E47-D6D1-4B75-A4A1-99CC3A53A27B@pricepages.org>

I just found some bugs and made some algorithm improvements. New code can be downloaded from the same location.
~Seth


via iPhone

On Dec 8, 2012, at 2:21 AM, Dmitry Baryshnikov <polimax at mail.ru> wrote:

> Hi Seth,
> 
> I'll test our code and try to patch GDAL if it possible.
> 
> Regards,
> Dmitry
> 
> 08.12.2012 3:02, Seth Price ?????:
>> I've worked the FLANN library into GDALSimpleSURF for a massive speedup
>> and made some other minor speed improvements mainly related to setting
>> constants as the right type and moving invariants outside of loops.
>> 
>> You can grab the updated source here. Please add it to whatever repository
>> is appropriate.
>> http://seth1.bluezone.usu.edu/flann_surf.tgz
>> 
>> Thanks,
>> Seth
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From hobu.inc at gmail.com  Sun Dec  9 17:59:58 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Sun, 9 Dec 2012 19:59:58 -0600
Subject: [gdal-dev] GDALSimpleSURF improvements
In-Reply-To: <9DBC8E47-D6D1-4B75-A4A1-99CC3A53A27B@pricepages.org>
References: <784a58fdf47940519eedefe12fb9e1a8.squirrel@pricepages.org>
	<50C314C6.3050606@mail.ru>
	<9DBC8E47-D6D1-4B75-A4A1-99CC3A53A27B@pricepages.org>
Message-ID: <7423D0D1-B3DF-4BB2-8B54-94948AE43B20@gmail.com>

Any chance you could generate a patch or (even better) a pull request for this from http://github.com/OSGeo/GDAL ?

GDAL 1.10 is coming quite quickly, and I'd be happy to do some of the configuration effort to integrate this if there's a clean pull request to merge.

Thanks,

Howard

On Dec 9, 2012, at 4:31 PM, Seth Price <seth at pricepages.org> wrote:

> I just found some bugs and made some algorithm improvements. New code can be downloaded from the same location.
> ~Seth
> 
> 
> via iPhone
> 
> On Dec 8, 2012, at 2:21 AM, Dmitry Baryshnikov <polimax at mail.ru> wrote:
> 
>> Hi Seth,
>> 
>> I'll test our code and try to patch GDAL if it possible.
>> 
>> Regards,
>> Dmitry
>> 
>> 08.12.2012 3:02, Seth Price ?????:
>>> I've worked the FLANN library into GDALSimpleSURF for a massive speedup
>>> and made some other minor speed improvements mainly related to setting
>>> constants as the right type and moving invariants outside of loops.
>>> 
>>> You can grab the updated source here. Please add it to whatever repository
>>> is appropriate.
>>> http://seth1.bluezone.usu.edu/flann_surf.tgz
>>> 
>>> Thanks,
>>> Seth
>>> 
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From hari.0516 at gmail.com  Mon Dec 10 03:15:01 2012
From: hari.0516 at gmail.com (HariPrasad)
Date: Mon, 10 Dec 2012 03:15:01 -0800 (PST)
Subject: [gdal-dev] GDAL Overviews selection
Message-ID: <1355138101222-5021862.post@n6.nabble.com>

Iam writing a custom GDAL driver (RBD format). I was able to display the base
image (overview no = -1) but for a big image(5 GB) it takes huge amount of
time. 
So i was displaying its overview (ex; image has 3 overviews and i always
displays the last overview). In this case ArcGIS 10 displays image fastly
since its a overview.

But i require help on dynamically displaying the overviews (i.e 0,1,2 or 3)
when the overview image is Zoomed in/out.

IReadBlock() gets invoked only for the first time when displaying the
overview image. 
Here is the code written in IReadBlock()

CPLErr RBDRasterBand::IReadBlock( int nBlockXOff, int nBlockYOff, void *
pImage )
{
	RBDDataset *poGDS = (RBDDataset *) poDS;
	long nBand = 0, nOVNumber = 0;
	unsigned long nMinX = 0, nMaxX = 0, nMinY = 0, nMaxY = 0;
	long nTileSizeX = 0, nTileSizeY = 0;
	long nBandFlag;
	long nBufferSize;
	ICTM *pICTM;

	pICTM = poGDS->pziiFile->pICTM;
	nOVNumber = poGDS ->pziiFile ->nNumberOfOVs - 1;  // if it has overviews
0,1,2 it dispalys 2 Ov.
	nBand = this->nBand;

	if(-1 == nOVNumber)
	{
		nTileSizeX = poGDS->pziiFile->nXTileSize;
		nTileSizeY = poGDS->pziiFile->nYTileSize;
	}
	else
	{
		nTileSizeX = poGDS->pziiFile->pzii_LayerOVInfo[nOVNumber]->nXTileSize;
		nTileSizeY = poGDS->pziiFile->pzii_LayerOVInfo[nOVNumber]->nYTileSize;
	}

	//Get the RowMin, RowMax, ColMin and ColMax values
	nMinX = nBlockXOff * nTileSizeX;
	nMinY = nBlockYOff * nTileSizeY;
	nMaxX = nMinX + nTileSizeX-1;//Zero Index
	nMaxY = nMinY + nTileSizeY-1;//Zero Index

	//Set the band flag
	if(nBand == 1)
		nBandFlag = RED_FLAG;
	else if(nBand == 2)
		nBandFlag = GREEN_FLAG;
	else if(nBand == 3)
		nBandFlag = BLUE_FLAG;

	//Calculate buffer size
	nBufferSize = (nMaxX + 1 - nMinX) * (nMaxY + 1 - nMinY) *
poGDS->pziiFile->nNumberOfBytesPerBand;

	////Call RenderRequestByOV on CTM object - it is our 3 part method which
fills the image buffer.

pICTM->RenderRequestByOV(nOVNumber,nBandFlag,nMinX,nMinY,nMaxX,nMaxY,&nBufferSize,(unsigned
char*)pImage,FALSE,0);
	return CE_None ;




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/GDAL-Overviews-selection-tp5021862.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From hari.0516 at gmail.com  Mon Dec 10 03:19:25 2012
From: hari.0516 at gmail.com (HariPrasad)
Date: Mon, 10 Dec 2012 03:19:25 -0800 (PST)
Subject: [gdal-dev] Dynamically displaying the Overviews
Message-ID: <1355138365823-5021867.post@n6.nabble.com>

Iam writing a custom GDAL driver (RBD format). I was able to display the base
image (overview no = -1) but for a big image(5 GB) it takes huge amount of
time. 
So i was displaying its overview (ex; image has 3 overviews and i always
displays the last overview). In this case ArcGIS 10 displays image fastly
since its a overview. 

But i require help on dynamically displaying the overviews (i.e 0,1,2 or 3)
when the overview image is Zoomed in/out. 

IReadBlock() gets invoked only for the first time when displaying the
overview image. 
Here is the code written in IReadBlock() 

CPLErr RBDRasterBand::IReadBlock( int nBlockXOff, int nBlockYOff, void *
pImage ) 
{ 
        RBDDataset *poGDS = (RBDDataset *) poDS; 
        long nBand = 0, nOVNumber = 0; 
        unsigned long nMinX = 0, nMaxX = 0, nMinY = 0, nMaxY = 0; 
        long nTileSizeX = 0, nTileSizeY = 0; 
        long nBandFlag; 
        long nBufferSize; 
        ICTM *pICTM; 

        pICTM = poGDS->pziiFile->pICTM; 
        nOVNumber = poGDS ->pziiFile ->nNumberOfOVs - 1;  // if it has
overviews 0,1,2 it dispalys 2 Ov. 
        nBand = this->nBand; 

        if(-1 == nOVNumber) 
        { 
                nTileSizeX = poGDS->pziiFile->nXTileSize; 
                nTileSizeY = poGDS->pziiFile->nYTileSize; 
        } 
        else 
        { 
                nTileSizeX =
poGDS->pziiFile->pzii_LayerOVInfo[nOVNumber]->nXTileSize; 
                nTileSizeY =
poGDS->pziiFile->pzii_LayerOVInfo[nOVNumber]->nYTileSize; 
        } 

        //Get the RowMin, RowMax, ColMin and ColMax values 
        nMinX = nBlockXOff * nTileSizeX; 
        nMinY = nBlockYOff * nTileSizeY; 
        nMaxX = nMinX + nTileSizeX-1;//Zero Index 
        nMaxY = nMinY + nTileSizeY-1;//Zero Index 

        //Set the band flag 
        if(nBand == 1) 
                nBandFlag = RED_FLAG; 
        else if(nBand == 2) 
                nBandFlag = GREEN_FLAG; 
        else if(nBand == 3) 
                nBandFlag = BLUE_FLAG; 

        //Calculate buffer size 
        nBufferSize = (nMaxX + 1 - nMinX) * (nMaxY + 1 - nMinY) *
poGDS->pziiFile->nNumberOfBytesPerBand; 

        ////Call RenderRequestByOV on CTM object - it is our 3 part method
which fills the image buffer. 
       
pICTM->RenderRequestByOV(nOVNumber,nBandFlag,nMinX,nMinY,nMaxX,nMaxY,&nBufferSize,(unsigned
char*)pImage,FALSE,0); 
        return CE_None ; 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Dynamically-displaying-the-Overviews-tp5021867.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From marco at sourcepole.ch  Mon Dec 10 05:22:30 2012
From: marco at sourcepole.ch (Marco Hugentobler)
Date: Mon, 10 Dec 2012 14:22:30 +0100
Subject: [gdal-dev] Multiple pens in OGR feature style
In-Reply-To: <50C5DE0C.2030206@sourcepole.ch>
References: <50C5DE0C.2030206@sourcepole.ch>
Message-ID: <50C5E216.3030509@sourcepole.ch>


Hi

I'm currently implementing support for OGR feature styles in the QGIS
vector layer export. In QGIS symbology, there is the possibility to
compose a symbol with multiple symbol layers, e.g. a broad black line
with a thin white line on top of it for a road symbol. Is this supported
by the OGR feature styles to have multiple pens / brushes in the same
symbol string?
I tried the style string
'PEN(c:#008000,w:3mm,l:1);PEN(c:#ff0000,w:2mm,l:2)'. However, in a kml
export, only the first style seems to be picked up. So I wonder if there
is something wrong with my style string or if it is not supported by the
feature style mechanism.

Thanks for any hints,
Marco

-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee




From even.rouault at mines-paris.org  Mon Dec 10 06:29:44 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 10 Dec 2012 15:29:44 +0100
Subject: [gdal-dev] Multiple pens in OGR feature style
In-Reply-To: <50C5E216.3030509@sourcepole.ch>
References: <50C5DE0C.2030206@sourcepole.ch> <50C5E216.3030509@sourcepole.ch>
Message-ID: <1355149784.50c5f1d8c5e18@imp.free.fr>

Selon Marco Hugentobler <marco at sourcepole.ch>:

>
> Hi
>
> I'm currently implementing support for OGR feature styles in the QGIS
> vector layer export. In QGIS symbology, there is the possibility to
> compose a symbol with multiple symbol layers, e.g. a broad black line
> with a thin white line on top of it for a road symbol. Is this supported
> by the OGR feature styles to have multiple pens / brushes in the same
> symbol string?
> I tried the style string
> 'PEN(c:#008000,w:3mm,l:1);PEN(c:#ff0000,w:2mm,l:2)'. However, in a kml
> export, only the first style seems to be picked up. So I wonder if there
> is something wrong with my style string or if it is not supported by the
> feature style mechanism.

Marco,

I was surprised that multiple pens were allowed, but yes, there doesn't seem to
be any limitation on multiple instanciations of the same style tool in the spec
or the generic code of the OGR FeatureStyle implementation. However I'd be
surprised that many drivers (and formats) can handle that properly.

Looking at addstylestring2kml() in ogr/ogrsf_frmts/libkml/ogrlibkmlstyle.cpp, I
can see that only one PEN instance will be taken into account (looking at the
coulde, I would have said that it would be the last occurence...). And it seems
that it is a limitation of LIBKML itself, since the Style class seems to accept
only one line style.

http://code.google.com/searchframe#y2CS_eJ3ink/trunk/src/kml/dom/style.h&q=style.h%20package:libkml\.googlecode\.com

Best regards,

Even

From marco at sourcepole.ch  Mon Dec 10 08:19:44 2012
From: marco at sourcepole.ch (Marco Hugentobler)
Date: Mon, 10 Dec 2012 17:19:44 +0100
Subject: [gdal-dev] Multiple pens in OGR feature style
In-Reply-To: <1355149784.50c5f1d8c5e18@imp.free.fr>
References: <50C5DE0C.2030206@sourcepole.ch> <50C5E216.3030509@sourcepole.ch>
	<1355149784.50c5f1d8c5e18@imp.free.fr>
Message-ID: <50C60BA0.5080604@sourcepole.ch>

Hi Even



Ok, so it seems to depend on the format properties.

Hi Even

You are right, it seems to depend on the output driver/format. Actually 
my main interest is the dxf format, it seems that one takes the first 
element of the style. Don't know if there are drivers which handle 
multiple pens / brushes. So probably I'll write everything into the 
style string and let the driver do what's best for the concrete format.

Thanks,
Marco

On 10.12.2012 15:29, Even Rouault wrote:
> Selon Marco Hugentobler <marco at sourcepole.ch>:
>
>> Hi
>>
>> I'm currently implementing support for OGR feature styles in the QGIS
>> vector layer export. In QGIS symbology, there is the possibility to
>> compose a symbol with multiple symbol layers, e.g. a broad black line
>> with a thin white line on top of it for a road symbol. Is this supported
>> by the OGR feature styles to have multiple pens / brushes in the same
>> symbol string?
>> I tried the style string
>> 'PEN(c:#008000,w:3mm,l:1);PEN(c:#ff0000,w:2mm,l:2)'. However, in a kml
>> export, only the first style seems to be picked up. So I wonder if there
>> is something wrong with my style string or if it is not supported by the
>> feature style mechanism.
> Marco,
>
> I was surprised that multiple pens were allowed, but yes, there doesn't seem to
> be any limitation on multiple instanciations of the same style tool in the spec
> or the generic code of the OGR FeatureStyle implementation. However I'd be
> surprised that many drivers (and formats) can handle that properly.
>
> Looking at addstylestring2kml() in ogr/ogrsf_frmts/libkml/ogrlibkmlstyle.cpp, I
> can see that only one PEN instance will be taken into account (looking at the
> coulde, I would have said that it would be the last occurence...). And it seems
> that it is a limitation of LIBKML itself, since the Style class seems to accept
> only one line style.
>
> http://code.google.com/searchframe#y2CS_eJ3ink/trunk/src/kml/dom/style.h&q=style.h%20package:libkml\.googlecode\.com
>
> Best regards,
>
> Even


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee


From gdal at stripfamily.net  Mon Dec 10 08:34:21 2012
From: gdal at stripfamily.net (David Strip)
Date: Mon, 10 Dec 2012 09:34:21 -0700
Subject: [gdal-dev] Multiple pens in OGR feature style
In-Reply-To: <1355149784.50c5f1d8c5e18@imp.free.fr>
References: <50C5DE0C.2030206@sourcepole.ch> <50C5E216.3030509@sourcepole.ch>
	<1355149784.50c5f1d8c5e18@imp.free.fr>
Message-ID: <50C60F0D.9040206@stripfamily.net>

On 12/10/2012 7:29 AM, Even Rouault wrote:
> Looking at addstylestring2kml() in ogr/ogrsf_frmts/libkml/ogrlibkmlstyle.cpp, I
> can see that only one PEN instance will be taken into account (looking at the
> coulde, I would have said that it would be the last occurence...). And it seems
> that it is a limitation of LIBKML itself, since the Style class seems to accept
> only one line style.
If I'm reading the docs right, KML doesn't support multi-pen lines. 
Google Earth extensions to KML, however, do allow a two-color line, so 
it makes sense that LIBKML would not allow this.

From a.neumann at carto.net  Mon Dec 10 10:31:20 2012
From: a.neumann at carto.net (Andreas Neumann)
Date: Mon, 10 Dec 2012 19:31:20 +0100
Subject: [gdal-dev] Multiple pens in OGR feature style
In-Reply-To: <50C60BA0.5080604@sourcepole.ch>
References: <50C5DE0C.2030206@sourcepole.ch> <50C5E216.3030509@sourcepole.ch>
	<1355149784.50c5f1d8c5e18@imp.free.fr>
	<50C60BA0.5080604@sourcepole.ch>
Message-ID: <50C62A78.2000209@carto.net>

Hi Marco and others,

If the (DXF) writer does not support multiple strokes - can you perhaps
export the same feature multiple times using the corresponding OGR
features styles? Ideally, this would honour the symbol levels, if
defined, in QGIS to get the same symbology.

Do you think this is possible?

Thanks,
Andreas



Am 10.12.2012 17:19, schrieb Marco Hugentobler:
> Hi Even
> 
> 
> 
> Ok, so it seems to depend on the format properties.
> 
> Hi Even
> 
> You are right, it seems to depend on the output driver/format. Actually
> my main interest is the dxf format, it seems that one takes the first
> element of the style. Don't know if there are drivers which handle
> multiple pens / brushes. So probably I'll write everything into the
> style string and let the driver do what's best for the concrete format.
> 
> Thanks,
> Marco
> 
> On 10.12.2012 15:29, Even Rouault wrote:
>> Selon Marco Hugentobler <marco at sourcepole.ch>:
>>
>>> Hi
>>>
>>> I'm currently implementing support for OGR feature styles in the QGIS
>>> vector layer export. In QGIS symbology, there is the possibility to
>>> compose a symbol with multiple symbol layers, e.g. a broad black line
>>> with a thin white line on top of it for a road symbol. Is this supported
>>> by the OGR feature styles to have multiple pens / brushes in the same
>>> symbol string?
>>> I tried the style string
>>> 'PEN(c:#008000,w:3mm,l:1);PEN(c:#ff0000,w:2mm,l:2)'. However, in a kml
>>> export, only the first style seems to be picked up. So I wonder if there
>>> is something wrong with my style string or if it is not supported by the
>>> feature style mechanism.
>> Marco,
>>
>> I was surprised that multiple pens were allowed, but yes, there
>> doesn't seem to
>> be any limitation on multiple instanciations of the same style tool in
>> the spec
>> or the generic code of the OGR FeatureStyle implementation. However
>> I'd be
>> surprised that many drivers (and formats) can handle that properly.
>>
>> Looking at addstylestring2kml() in
>> ogr/ogrsf_frmts/libkml/ogrlibkmlstyle.cpp, I
>> can see that only one PEN instance will be taken into account (looking
>> at the
>> coulde, I would have said that it would be the last occurence...). And
>> it seems
>> that it is a limitation of LIBKML itself, since the Style class seems
>> to accept
>> only one line style.
>>
>> http://code.google.com/searchframe#y2CS_eJ3ink/trunk/src/kml/dom/style.h&q=style.h%20package:libkml\.googlecode\.com
>>
>>
>> Best regards,
>>
>> Even
> 
> 


From rush at winkey.org  Mon Dec 10 19:40:25 2012
From: rush at winkey.org (Brian Case)
Date: Mon, 10 Dec 2012 19:40:25 -0800
Subject: [gdal-dev] Multiple pens in OGR feature style
In-Reply-To: <50C60F0D.9040206@stripfamily.net>
References: <50C5DE0C.2030206@sourcepole.ch>
	<50C5E216.3030509@sourcepole.ch> <1355149784.50c5f1d8c5e18@imp.free.fr>
	<50C60F0D.9040206@stripfamily.net>
Message-ID: <1355197225.26711.46.camel@localhost>

i never considered this possibility when writing the libkml driver.

perhaps check what mapserver does?.

there is not a lot that uses featurestyle. perhaps a clarification of
this in the spec is in order?

brian

On Mon, 2012-12-10 at 09:34 -0700, David Strip wrote:
> On 12/10/2012 7:29 AM, Even Rouault wrote:
> > Looking at addstylestring2kml() in ogr/ogrsf_frmts/libkml/ogrlibkmlstyle.cpp, I
> > can see that only one PEN instance will be taken into account (looking at the
> > coulde, I would have said that it would be the last occurence...). And it seems
> > that it is a limitation of LIBKML itself, since the Style class seems to accept
> > only one line style.
> If I'm reading the docs right, KML doesn't support multi-pen lines. 
> Google Earth extensions to KML, however, do allow a two-color line, so 
> it makes sense that LIBKML would not allow this.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Brian Case
KF7WPK
rush at winkey.org



From tyler.mitchell at actian.com  Mon Dec 10 21:05:40 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Mon, 10 Dec 2012 21:05:40 -0800
Subject: [gdal-dev] doxygen updates
Message-ID: <1251B32E-7732-4F49-A9CB-2B74560B8F79@actian.com>

Hi guys, I'm just doing some review of the gdal/ogr utility docs and occassionally finding some typos, etc.  So if I want to fix them is updating the gdal_utlilities.dox / ogr_utilities.dox file the right place to do it?  

I thought there was some sort of magic dox stuff stuck into the API, but I don't see it now.  Are these files simply updated manually?

Thanks!

Tyler

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121210/f6e7cd1c/attachment.html>

From even.rouault at mines-paris.org  Mon Dec 10 23:10:48 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 11 Dec 2012 08:10:48 +0100
Subject: [gdal-dev] doxygen updates
In-Reply-To: <1251B32E-7732-4F49-A9CB-2B74560B8F79@actian.com>
References: <1251B32E-7732-4F49-A9CB-2B74560B8F79@actian.com>
Message-ID: <201212110810.48688.even.rouault@mines-paris.org>

Le mardi 11 d?cembre 2012 06:05:40, Tyler Mitchell a ?crit :
> Hi guys, I'm just doing some review of the gdal/ogr utility docs and
> occassionally finding some typos, etc.  So if I want to fix them is
> updating the gdal_utlilities.dox / ogr_utilities.dox file the right place
> to do it?
> 
> I thought there was some sort of magic dox stuff stuck into the API, but I
> don't see it now.  Are these files simply updated manually?

No special magix. The dox files are the source documents to edit.

> 
> Thanks!
> 
> Tyler

From nikhil.parupalli at iictechnologies.com  Mon Dec 10 23:22:07 2012
From: nikhil.parupalli at iictechnologies.com (Nikhil Sai Parupalli)
Date: Tue, 11 Dec 2012 07:22:07 +0000
Subject: [gdal-dev] FIDN-issue
Message-ID: <139560E1825F4648BDA4F32853B530A78CC00AF6@IICEXHCM.iictechnologies.local>

Hi ,

In my application I am fetching S57 data set where it is fetching FIDN with negative value which is wrong  because FIDN should be in Range: 1 to 2 power 32-1
Is there any instance that any one got the same issue.
If the same data source is loaded in Caris Easy view it is showing some other legal value.

Please load the sample data with any application in open source it will show the same as mentioned above

Thanks and Regards
Nikhil Sai Parupalli

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121211/6aef7b24/attachment.html>

From hari.0516 at gmail.com  Tue Dec 11 04:58:33 2012
From: hari.0516 at gmail.com (HariPrasad)
Date: Tue, 11 Dec 2012 04:58:33 -0800 (PST)
Subject: [gdal-dev] Overviews using GDAL
Message-ID: <1355230713797-5022226.post@n6.nabble.com>

Iam beginner to GDAL.

I have an Image which has internal overviews in it. I am able to display
each overview separately, but i want to dynamically select the corresponding
overview when that image is zoomed in/out. Which method i need to use in
GDAL to achieve this functionality.  And how does ArcEditor 10 understand
which overview to display.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Overviews-using-GDAL-tp5022226.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From polimax at mail.ru  Tue Dec 11 06:01:34 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Tue, 11 Dec 2012 18:01:34 +0400
Subject: [gdal-dev] Overviews using GDAL
In-Reply-To: <1355230713797-5022226.post@n6.nabble.com>
References: <1355230713797-5022226.post@n6.nabble.com>
Message-ID: <50C73CBE.9080906@mail.ru>

Hi,

When you use RasterIO 
(http://www.gdal.org/classGDALDataset.html#ae077c53268d2272eebed10b891a05743) 
GDAL automatically switch to right overview based on input parameters. I 
think ArcGIS do it the same way.

Regards,
Dmitry

11.12.2012 16:58, HariPrasad ?????:
> Iam beginner to GDAL.
>
> I have an Image which has internal overviews in it. I am able to display
> each overview separately, but i want to dynamically select the corresponding
> overview when that image is zoomed in/out. Which method i need to use in
> GDAL to achieve this functionality.  And how does ArcEditor 10 understand
> which overview to display.
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Overviews-using-GDAL-tp5022226.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From sylvain_duclos at yahoo.com  Tue Dec 11 08:00:49 2012
From: sylvain_duclos at yahoo.com (s duclos)
Date: Tue, 11 Dec 2012 08:00:49 -0800 (PST)
Subject: [gdal-dev] FIDN-issue
In-Reply-To: <139560E1825F4648BDA4F32853B530A78CBFE19E@IICEXHCM.iictechnologies.local>
References: <139560E1825F4648BDA4F32853B530A78CBFE19E@IICEXHCM.iictechnologies.local>
Message-ID: <1355241649.50390.YahooMailNeo@web110803.mail.gq1.yahoo.com>

Nikhil,


I loaded your S57. Here's a typical output for FIDN in US500001.000

S52.c:2719 in S52_loadLayer(): LOADING LAYER NAME: LIGHTS
S57ogr.c:81 in _setAtt(): FIDN:44884
S57ogr.c:81 in _setAtt(): FIDN:44877
S57ogr.c:81 in _setAtt(): FIDN:44885
S57ogr.c:81 in _setAtt(): FIDN:1521038204???? // --> 44886 !
S57ogr.c:81 in _setAtt(): FIDN:-1257713504??? // --> 44887 !
S57ogr.c:81 in _setAtt(): FIDN:-72495485??????? // --> 44888 !
S57ogr.c:81 in _setAtt(): FIDN:-2048579800??? // --> 44889 !
S57ogr.c:81 in _setAtt(): FIDN:44880
S57ogr.c:81 in _setAtt(): FIDN:44872
S57ogr.c:81 in _setAtt(): FIDN:44881
S57ogr.c:81 in _setAtt(): FIDN:44873
S57ogr.c:81 in _setAtt(): FIDN:44882
S57ogr.c:81 in _setAtt(): FIDN:44874
S57ogr.c:81 in _setAtt(): FIDN:44883
S57ogr.c:81 in _setAtt(): FIDN:44875
S57ogr.c:81 in _setAtt(): FIDN:44876
S57ogr.c:81 in _setAtt(): FIDN:44879
S57ogr.c:81 in _setAtt(): FIDN:44878
S57ogr.c:81 in _setAtt(): FIDN:44886
S57ogr.c:81 in _setAtt(): FIDN:44887
S57ogr.c:81 in _setAtt(): FIDN:2054113595??? // --> 44888 !



This chart is in the Indian Ocean in the middle of nowhere !

Sound like a chart you've made yourself. That lead me to think
that the culprit might be the soft that made this S57.

Most of your FIDN seem consistent but, for example, the 4th line:

1521038204 should be 44886



Sound like a rollover or something like that ..


rgds,

Sylvain.



>________________________________
> From: Nikhil Sai Parupalli <nikhil.parupalli at iictechnologies.com>
>To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org> 
>Cc: 'Frank Warmerdam' <warmerdam at pobox.com>; 's duclos' <sylvain_duclos at yahoo.com> 
>Sent: Tuesday, December 11, 2012 2:19:26 AM
>Subject: FIDN-issue
> 
>
> 
>Hi ,
>?
>In my application I am fetching S57 data set where it is fetching FIDN with negative value which is wrong ?because FIDN should be in Range: 1 to 2 power 32-1
>Is there any instance that any one got the same issue.
>If the same data source is loaded in Caris Easy view it is showing some other legal value.
>?
>Please load the sample data with any application in open source it will show the same as mentioned above
>?
>?
>?
>?
>?
>Thanks and Regards
>Nikhil Sai Parupalli
>?
>
>

From JPalmer at linz.govt.nz  Tue Dec 11 11:34:12 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed, 12 Dec 2012 08:34:12 +1300
Subject: [gdal-dev] EPSG 8.0 Upgrade
In-Reply-To: <CA+YzLBcvEKynLuC6=v6n5MM0Mms01phUUydxHkvUdDCTyzHFvw@mail.gmail.com>
References: <50BFE448.5070409@pobox.com>
	<666FB8D75E95AE42965A0E76A5E5337E0EDDB848DE@prdlsmmsg01.ad.linz.govt.nz>,
	<CA+YzLBcvEKynLuC6=v6n5MM0Mms01phUUydxHkvUdDCTyzHFvw@mail.gmail.com>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0EDDB848F7@prdlsmmsg01.ad.linz.govt.nz>

Hi Frank,

Yes it would be great if grid shifts are supported in proj.4 by default, but for more importantly for us within Qgis. Currently I see QGIS builds it's CRS database using crssync which relies on GDAL OSRExportToProj4 for creating proj.4 strings. Does that mean that the gdal CSV files also need to support the grid shift? Before I raise any tickets it would be good to know where to actually fix the problem.

nzgd2kgrid0005.grd is the transformation between NZGD1949 and NZGD2000, not WGS84 and NZGD2000. See more information here http://www.linz.govt.nz/geodetic/software-downloads#distortiongrid. nzgd2kgrid0005.grd is created from the ASCII file which can be downloaded here http://www.linz.govt.nz/sites/default/files/geodetic/software-downloads/nzgd2kgrid9911.zip

Cheers,
Jeremy
 
________________________________________
From: fwarmerdam at gmail.com [fwarmerdam at gmail.com] On Behalf Of Frank Warmerdam [warmerdam at pobox.com]
Sent: Saturday, 8 December 2012 8:03 a.m.
To: Jeremy Palmer
Cc: gdal-dev; metacrs at lists.osgeo.org
Subject: Re: [gdal-dev] EPSG 8.0 Upgrade

Jeremy,

Unfortunately I do not automatically pickup references to grid shift files from the EPSG database.  To the extent these are supported it is accomplished by special hackery. In fact skimming the epsg file, I think the only datum for which grid shift files are used *by default* is NAD27.   Perhaps this would be a good time for me to review how to utilize at least the grid shift files we are distributing with PROJ.4 like ntf_r93.gsb and nzgd2kgrid0005.gsb.

Hmm, I am getting the impression that nzgd2kgrid0005.grd is actually the transformation between NZGD2000 and WGS84 and that we would actually need another file - possibly something like Nzgd49ToNzgd2K.gdc to support NZGD1949 - is that right?

I'd suggest you file a ticket in the PROJ.4 Trac on this issue with suggestions on how to proceed.

Best regards,
Frank



On Thu, Dec 6, 2012 at 10:12 AM, Jeremy Palmer <JPalmer at linz.govt.nz<mailto:JPalmer at linz.govt.nz>> wrote:
HI Frank,

Thanks that's great news. Has this upgrade now started supporting data shift grids, such as NZGD2000<->NZGD1949?

Cheers
Jeremy
________________________________________
From: gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org> [gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>] On Behalf Of Frank Warmerdam [warmerdam at pobox.com<mailto:warmerdam at pobox.com>]
Sent: Thursday, 6 December 2012 1:18 p.m.
To: PROJ.4 and general Projections Discussions; GeoTIFF; gdal-dev; metacrs at lists.osgeo.org<mailto:metacrs at lists.osgeo.org>
Subject: [gdal-dev] EPSG 8.0 Upgrade

Folks,

At the request of Howard Butler, I have upgraded PROJ.4, libgeotiff, and
GDAL to use the EPSG 8.0 database in development "trunk".

This was accomplished, as usual based on the process described here:

   http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/README

Amoung other things this will result in some datums having new preferred
datum shift solutions.  Upgrade with care.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com<mailto:warmerdam at pobox.com>
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz<mailto:info at linz.govt.nz>) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.



--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com<mailto:warmerdam at pobox.com>
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From jsimpson at wxtrends.com  Tue Dec 11 13:45:09 2012
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Tue, 11 Dec 2012 15:45:09 -0600
Subject: [gdal-dev] gdalwarp -ts issue when output size is too large.
Message-ID: <CACC0xJ+ywRJBGcN4tvHU1Oui0ONA0=psP_-P8FJgR7d=ieKfiQ@mail.gmail.com>

I'm having an issue using gdalwarp to interpolate over some data to smooth
it out.
gdalwarp --version
GDAL 1.9.1, released 2012/05/16

I have a dataset that's rather small:
gdalinfo shows:

Size is 360, 181
Coordinate System is `'
Origin = (-0.500000000000000,90.500000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Size is 360, 181
Coordinate System is `'
Origin = (-0.500000000000000,90.500000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)

For testing I'm using
gdalwarp -of netCDF -r cubicspline -ts WIDTH 0 in.nc out.nc

Everything is great, until I get the WIDTH >= 5765

My data goes from 0-360.  When I'm below 5765, I see the full set of data
when I use ncview or gdaldem to view results.  When I am at or above 5765,
however, I only see the data from 180-360.

Exactly half the data is missing, and it's always missing from 0-180.
File size is 64Mb, so it's not an issue with being over the 2Gb limit.

gdalinfo on the warped image is:
Size is 5765, 2899
Coordinate System is `'
Origin = (-0.500000000000000,90.500000000000000)
Pixel Size = (0.062445793581960,-0.062445793581960)

Does anyone have an insight as to what might be going on?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121211/fe76783d/attachment.html>

From lcelati at latitude-geosystems.com  Tue Dec 11 15:48:01 2012
From: lcelati at latitude-geosystems.com (image)
Date: Tue, 11 Dec 2012 15:48:01 -0800 (PST)
Subject: [gdal-dev] image Compilation of Qgis 1.8 with gdal svn
	(Windows7_64bits)
Message-ID: <1355269681541-5022355.post@n6.nabble.com>

Hello,

I need to use qgis 1.8 with the last gdal svn 1.10.0 on my Windows 7 64 bits
station.I know that i'm obliged to compile in a 1st time gdal svn & in a 2nd
time qgis targetting the gdal svn version. Up to now, i succeed in compiling
gdal svn thanks to "TortoiseSvn" & Visual Studio. Now, i 'm trying to
compile Qgis1.8 thanks to this following "help install_api" :
 http://www.qgis.org/api/INSTALL.html#toc13

I 'm following the 4th part of this webpage called "Building on windows". I
have chosen to use Visual C++ Express edition rather than MinGW. Up to now,
i installed :*Cmake/Flex/Bison/SVN/GIT/OSGeo4W. For information, i have not
installed  the "Microsoft Windows Server? 2003 R2 Platform SDK" (Core
SDK/Build environment(x86 32 bits).
Then, thanks to OSGeo4W(advanced_installation), i installed
:*expat/fcgi/gdal/grass/gsl-devel/iconv/pyqt4/qt4-devel/qwt5-devel-qt4/sip/spatialite/libspatialindex-devel/python-qscintilla.
For information, i chosen "Gdal_dev 1.8-Pre6"  even if i want the last
version of gdal dev called "1.10.0", unselectable via this OSGeo4W_setup.
Then, i pasted the file unistd.h from "GnuWin32\include" toward VC\include
directory of my Visual C++ installation.

Now, i'm at the step 4.1.3 called 'Setting up the Visual Studio project with
CMake'. I do not understand the instructions and how to create the batch
file.

1/ Do you think the method that I opted is adapted to my goal (use qgis with
the last version of gdal svn that i have already compiled) ? This method is
really the easiest and most viable?

2/Could you give me details in order i succeed  in creating the batch file.

3/How to ensure that  the building take into account the gdal svn that i
have already compiled?

In advance, thank you to throw light for me.
With kind regards.  

IMAGE 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/image-Compilation-of-Qgis-1-8-with-gdal-svn-Windows7-64bits-tp5022355.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From pcreso at pcreso.com  Tue Dec 11 20:14:18 2012
From: pcreso at pcreso.com (pcreso at pcreso.com)
Date: Tue, 11 Dec 2012 20:14:18 -0800 (PST)
Subject: [gdal-dev] [Qgis-developer]  EPSG 8.0 Upgrade
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0EDDB848F7@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <1355285658.25333.YahooMailClassic@web122006.mail.ne1.yahoo.com>

On a sort of related topic, (another NZ projection :-)

EPSG:3994 supercedes EPSG:3752, as EPSG got the initial specification wrong. This is a projection used for the wider region around NZ, rather than the NZ mainland, and this projection is used primarily in ESRI to avoid 180 meridian issues.

I assume once QGIS picks up the new GDAL which picks up the current EPSG list, it will natively support 3994 instead of 3752.

I was also wondering if there is any reason that http://www.spatialreference.org/ref/epsg/3994/ does not include a Postgis, Mapserver or Proj.4 definition, and if there is any way the map there could show the area covered by the coordinate system rather than the longitudes not covered?

Thanks,

? Brent Wood



--- On Wed, 12/12/12, Jeremy Palmer <JPalmer at linz.govt.nz> wrote:

From: Jeremy Palmer <JPalmer at linz.govt.nz>
Subject: Re: [Qgis-developer] [gdal-dev] EPSG 8.0 Upgrade
To: "Frank Warmerdam" <warmerdam at pobox.com>
Cc: "gdal-dev" <gdal-dev at lists.osgeo.org>, "qgis-developer at lists.osgeo.org" <qgis-developer at lists.osgeo.org>
Date: Wednesday, December 12, 2012, 8:34 AM

Hi Frank,

Yes it would be great if grid shifts are supported in proj.4 by default, but for more importantly for us within Qgis. Currently I see QGIS builds it's CRS database using crssync which relies on GDAL OSRExportToProj4 for creating proj.4 strings. Does that mean that the gdal CSV files also need to support the grid shift? Before I raise any tickets it would be good to know where to actually fix the problem.

nzgd2kgrid0005.grd is the transformation between NZGD1949 and NZGD2000, not WGS84 and NZGD2000. See more information here http://www.linz.govt.nz/geodetic/software-downloads#distortiongrid. nzgd2kgrid0005.grd is created from the ASCII file which can be downloaded here http://www.linz.govt.nz/sites/default/files/geodetic/software-downloads/nzgd2kgrid9911.zip

Cheers,
Jeremy
 
________________________________________
From: fwarmerdam at gmail.com [fwarmerdam at gmail.com] On Behalf Of Frank Warmerdam [warmerdam at pobox.com]
Sent: Saturday, 8 December 2012 8:03 a.m.
To: Jeremy Palmer
Cc: gdal-dev; metacrs at lists.osgeo.org
Subject: Re: [gdal-dev] EPSG 8.0 Upgrade

Jeremy,

Unfortunately I do not automatically pickup references to grid shift files from the EPSG database.? To the extent these are supported it is accomplished by special hackery. In fact skimming the epsg file, I think the only datum for which grid shift files are used *by default* is NAD27.???Perhaps this would be a good time for me to review how to utilize at least the grid shift files we are distributing with PROJ.4 like ntf_r93.gsb and nzgd2kgrid0005.gsb.

Hmm, I am getting the impression that nzgd2kgrid0005.grd is actually the transformation between NZGD2000 and WGS84 and that we would actually need another file - possibly something like Nzgd49ToNzgd2K.gdc to support NZGD1949 - is that right?

I'd suggest you file a ticket in the PROJ.4 Trac on this issue with suggestions on how to proceed.

Best regards,
Frank



On Thu, Dec 6, 2012 at 10:12 AM, Jeremy Palmer <JPalmer at linz.govt.nz<mailto:JPalmer at linz.govt.nz>> wrote:
HI Frank,

Thanks that's great news. Has this upgrade now started supporting data shift grids, such as NZGD2000<->NZGD1949?

Cheers
Jeremy
________________________________________
From: gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org> [gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>] On Behalf Of Frank Warmerdam [warmerdam at pobox.com<mailto:warmerdam at pobox.com>]
Sent: Thursday, 6 December 2012 1:18 p.m.
To: PROJ.4 and general Projections Discussions; GeoTIFF; gdal-dev; metacrs at lists.osgeo.org<mailto:metacrs at lists.osgeo.org>
Subject: [gdal-dev] EPSG 8.0 Upgrade

Folks,

At the request of Howard Butler, I have upgraded PROJ.4, libgeotiff, and
GDAL to use the EPSG 8.0 database in development "trunk".

This was accomplished, as usual based on the process described here:

???http://svn.osgeo.org/metacrs/geotiff/trunk/libgeotiff/csv/README

Amoung other things this will result in some datums having new preferred
datum shift solutions.? Upgrade with care.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up???| Frank Warmerdam, warmerdam at pobox.com<mailto:warmerdam at pobox.com>
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush? ? | Geospatial Software Developer

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz<mailto:info at linz.govt.nz>) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.



--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up???| Frank Warmerdam, warmerdam at pobox.com<mailto:warmerdam at pobox.com>
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
_______________________________________________
Qgis-developer mailing list
Qgis-developer at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/qgis-developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121211/4ed8e2e6/attachment.html>

From knutfrodesoppel at hotmail.com  Wed Dec 12 04:12:49 2012
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Wed, 12 Dec 2012 13:12:49 +0100
Subject: [gdal-dev] gdalwarp performance with many GCPs
Message-ID: <ka9sc3$dil$1@ger.gmane.org>

Hi list,

When warping images with many GCPs, the -tps switch (Thin Plate Spline) 
is found to be necessary to get decent accuracy. This makes however 
warping very slow. The only method I found to increase speed is the -et 
switch, but at cost of spatial accuracy.


Below some comments about the other tries which did not help:

- compiling GDAL with armadillo support had no effect on speed.
Btw, to compile with armadillo I had to manually insert -llapack in the 
following line in configure:
if test -z "`${CXX} testarmadillo.cpp -o testarmadillo -larmadillo 
2>&1`" ; then .....
Perhaps ${LIBS} should be added permanently to this line in trunk?

- compiling GDAL with OpenCL had also no effect. At first surprising, 
but looking at the opencl warp kernel it seems that it only makes a 
difference for other resampling algorithms than nearest neighbour?

- Increasing  memory with -wm had no effect

- Using several threads (-multi -wo NUM_THREADS=ALL_CPUS) actually 
increased computing time significantly (my proj version is 4.7.1).

 From the debug output, a lot of the time is apparently spent on:
"WARP: Copying metadata from first source to destination dataset"
Is this an indication that much time is simply spent on reading and 
writing the GCPs to/from file? If so, we could perhaps expect improved 
performance if Geolocation Arrays could be used instead (not possible 
due to http://trac.osgeo.org/gdal/ticket/4907).


The tests are made with the following file and command on Ubuntu:
http://dl.dropbox.com/u/15885758/testgcp.tif  (3212 GCPs and 2048x2511 
pixels covering Southern Europe)

time gdalwarp --debug on -et 5 -tps -t_srs '+proj=merc' testgcp.tif 
out.tif  (+ other swithces mentioned above)


Best regards from Knut-Frode


From j.l.h.hartmann at uva.nl  Wed Dec 12 04:24:02 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed, 12 Dec 2012 13:24:02 +0100
Subject: [gdal-dev] gdalwarp performance with many GCPs
In-Reply-To: <ka9sc3$dil$1@ger.gmane.org>
References: <ka9sc3$dil$1@ger.gmane.org>
Message-ID: <50C87762.4000509@uva.nl>

Hi Knut,

What do you mean by "very slow"? I regularly use gdalwarp -tps on much 
larger rasters with a few thousand gcp-s, and never noticed unacceptable 
delays. Do you have very little physical memory, or many parallel 
processes running?

Jan

On 12/12/2012 01:12 PM, Knut-Frode Dagestad wrote:
> Hi list,
>
> When warping images with many GCPs, the -tps switch (Thin Plate 
> Spline) is found to be necessary to get decent accuracy. This makes 
> however warping very slow. The only method I found to increase speed 
> is the -et switch, but at cost of spatial accuracy.
>
>
> Below some comments about the other tries which did not help:
>
> - compiling GDAL with armadillo support had no effect on speed.
> Btw, to compile with armadillo I had to manually insert -llapack in 
> the following line in configure:
> if test -z "`${CXX} testarmadillo.cpp -o testarmadillo -larmadillo 
> 2>&1`" ; then .....
> Perhaps ${LIBS} should be added permanently to this line in trunk?
>
> - compiling GDAL with OpenCL had also no effect. At first surprising, 
> but looking at the opencl warp kernel it seems that it only makes a 
> difference for other resampling algorithms than nearest neighbour?
>
> - Increasing  memory with -wm had no effect
>
> - Using several threads (-multi -wo NUM_THREADS=ALL_CPUS) actually 
> increased computing time significantly (my proj version is 4.7.1).
>
> From the debug output, a lot of the time is apparently spent on:
> "WARP: Copying metadata from first source to destination dataset"
> Is this an indication that much time is simply spent on reading and 
> writing the GCPs to/from file? If so, we could perhaps expect improved 
> performance if Geolocation Arrays could be used instead (not possible 
> due to http://trac.osgeo.org/gdal/ticket/4907).
>
>
> The tests are made with the following file and command on Ubuntu:
> http://dl.dropbox.com/u/15885758/testgcp.tif  (3212 GCPs and 2048x2511 
> pixels covering Southern Europe)
>
> time gdalwarp --debug on -et 5 -tps -t_srs '+proj=merc' testgcp.tif 
> out.tif  (+ other swithces mentioned above)
>
>
> Best regards from Knut-Frode
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121212/9617a560/attachment.html>

From knutfrodesoppel at hotmail.com  Wed Dec 12 04:27:40 2012
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Wed, 12 Dec 2012 13:27:40 +0100
Subject: [gdal-dev] gdalwarp performance with many GCPs
In-Reply-To: <50C87762.4000509@uva.nl>
References: <ka9sc3$dil$1@ger.gmane.org> <50C87762.4000509@uva.nl>
Message-ID: <ka9t7u$lpq$1@ger.gmane.org>

Hi Jan,

That sounds interesting and promising.

For the mentioned file it takes about 2 minutes with "-et 5" (low 
accuracy), and 12 minutes without this switch. Without -tps it takes 
less than 0.5 seconds.
The machine is quite decent with 16 GB memory and SSD disk.

Best regards from Knut-Frode



On 12. des. 2012 13:24, Jan Hartmann wrote:
> Hi Knut,
>
> What do you mean by "very slow"? I regularly use gdalwarp -tps on much
> larger rasters with a few thousand gcp-s, and never noticed unacceptable
> delays. Do you have very little physical memory, or many parallel
> processes running?
>
> Jan
>
> On 12/12/2012 01:12 PM, Knut-Frode Dagestad wrote:
>> Hi list,
>>
>> When warping images with many GCPs, the -tps switch (Thin Plate
>> Spline) is found to be necessary to get decent accuracy. This makes
>> however warping very slow. The only method I found to increase speed
>> is the -et switch, but at cost of spatial accuracy.
>>
>>
>> Below some comments about the other tries which did not help:
>>
>> - compiling GDAL with armadillo support had no effect on speed.
>> Btw, to compile with armadillo I had to manually insert -llapack in
>> the following line in configure:
>> if test -z "`${CXX} testarmadillo.cpp -o testarmadillo -larmadillo
>> 2>&1`" ; then .....
>> Perhaps ${LIBS} should be added permanently to this line in trunk?
>>
>> - compiling GDAL with OpenCL had also no effect. At first surprising,
>> but looking at the opencl warp kernel it seems that it only makes a
>> difference for other resampling algorithms than nearest neighbour?
>>
>> - Increasing  memory with -wm had no effect
>>
>> - Using several threads (-multi -wo NUM_THREADS=ALL_CPUS) actually
>> increased computing time significantly (my proj version is 4.7.1).
>>
>> From the debug output, a lot of the time is apparently spent on:
>> "WARP: Copying metadata from first source to destination dataset"
>> Is this an indication that much time is simply spent on reading and
>> writing the GCPs to/from file? If so, we could perhaps expect improved
>> performance if Geolocation Arrays could be used instead (not possible
>> due to http://trac.osgeo.org/gdal/ticket/4907).
>>
>>
>> The tests are made with the following file and command on Ubuntu:
>> http://dl.dropbox.com/u/15885758/testgcp.tif  (3212 GCPs and 2048x2511
>> pixels covering Southern Europe)
>>
>> time gdalwarp --debug on -et 5 -tps -t_srs '+proj=merc' testgcp.tif
>> out.tif  (+ other swithces mentioned above)
>>
>>
>> Best regards from Knut-Frode
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From j.l.h.hartmann at uva.nl  Wed Dec 12 04:40:28 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed, 12 Dec 2012 13:40:28 +0100
Subject: [gdal-dev] gdalwarp performance with many GCPs
In-Reply-To: <ka9t7u$lpq$1@ger.gmane.org>
References: <ka9sc3$dil$1@ger.gmane.org> <50C87762.4000509@uva.nl>
	<ka9t7u$lpq$1@ger.gmane.org>
Message-ID: <50C87B3C.6070704@uva.nl>

No, this is unaaceptable, but I cannot reproduce it. The only problem I 
had was with control points that were too close together. Are yours 
evenly distributed? Can you do tests with subsets of control points?

On 12/12/2012 01:27 PM, Knut-Frode Dagestad wrote:
> Hi Jan,
>
> That sounds interesting and promising.
>
> For the mentioned file it takes about 2 minutes with "-et 5" (low 
> accuracy), and 12 minutes without this switch. Without -tps it takes 
> less than 0.5 seconds.
> The machine is quite decent with 16 GB memory and SSD disk.
>
> Best regards from Knut-Frode
>
>
>
> On 12. des. 2012 13:24, Jan Hartmann wrote:
>> Hi Knut,
>>
>> What do you mean by "very slow"? I regularly use gdalwarp -tps on much
>> larger rasters with a few thousand gcp-s, and never noticed unacceptable
>> delays. Do you have very little physical memory, or many parallel
>> processes running?
>>
>> Jan
>>
>> On 12/12/2012 01:12 PM, Knut-Frode Dagestad wrote:
>>> Hi list,
>>>
>>> When warping images with many GCPs, the -tps switch (Thin Plate
>>> Spline) is found to be necessary to get decent accuracy. This makes
>>> however warping very slow. The only method I found to increase speed
>>> is the -et switch, but at cost of spatial accuracy.
>>>
>>>
>>> Below some comments about the other tries which did not help:
>>>
>>> - compiling GDAL with armadillo support had no effect on speed.
>>> Btw, to compile with armadillo I had to manually insert -llapack in
>>> the following line in configure:
>>> if test -z "`${CXX} testarmadillo.cpp -o testarmadillo -larmadillo
>>> 2>&1`" ; then .....
>>> Perhaps ${LIBS} should be added permanently to this line in trunk?
>>>
>>> - compiling GDAL with OpenCL had also no effect. At first surprising,
>>> but looking at the opencl warp kernel it seems that it only makes a
>>> difference for other resampling algorithms than nearest neighbour?
>>>
>>> - Increasing  memory with -wm had no effect
>>>
>>> - Using several threads (-multi -wo NUM_THREADS=ALL_CPUS) actually
>>> increased computing time significantly (my proj version is 4.7.1).
>>>
>>> From the debug output, a lot of the time is apparently spent on:
>>> "WARP: Copying metadata from first source to destination dataset"
>>> Is this an indication that much time is simply spent on reading and
>>> writing the GCPs to/from file? If so, we could perhaps expect improved
>>> performance if Geolocation Arrays could be used instead (not possible
>>> due to http://trac.osgeo.org/gdal/ticket/4907).
>>>
>>>
>>> The tests are made with the following file and command on Ubuntu:
>>> http://dl.dropbox.com/u/15885758/testgcp.tif  (3212 GCPs and 2048x2511
>>> pixels covering Southern Europe)
>>>
>>> time gdalwarp --debug on -et 5 -tps -t_srs '+proj=merc' testgcp.tif
>>> out.tif  (+ other swithces mentioned above)
>>>
>>>
>>> Best regards from Knut-Frode
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121212/49c187e7/attachment.html>

From knutfrodesoppel at hotmail.com  Wed Dec 12 04:54:33 2012
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Wed, 12 Dec 2012 13:54:33 +0100
Subject: [gdal-dev] gdalwarp performance with many GCPs
In-Reply-To: <50C87B3C.6070704@uva.nl>
References: <ka9sc3$dil$1@ger.gmane.org> <50C87762.4000509@uva.nl>
	<ka9t7u$lpq$1@ger.gmane.org> <50C87B3C.6070704@uva.nl>
Message-ID: <50C87E89.6080103@hotmail.com>

The GCPs are completely regular, every 40 pixel in each direction. 
Warping quality is very good (only slow), so the GCPs are probably also ok.

I would appreciate very much if you could download this file and test 
the command below:
http://dl.dropbox.com/u/15885758/testgcp.tif

time gdalwarp -tps -t_srs '+proj=merc' testgcp.tif out.tif

If it works fast for you, the problem should be related to my local GDAL 
build (1.10).


On 12. des. 2012 13:40, Jan Hartmann wrote:
> No, this is unaaceptable, but I cannot reproduce it. The only problem I
> had was with control points that were too close together. Are yours
> evenly distributed? Can you do tests with subsets of control points?
>
> On 12/12/2012 01:27 PM, Knut-Frode Dagestad wrote:
>> Hi Jan,
>>
>> That sounds interesting and promising.
>>
>> For the mentioned file it takes about 2 minutes with "-et 5" (low
>> accuracy), and 12 minutes without this switch. Without -tps it takes
>> less than 0.5 seconds.
>> The machine is quite decent with 16 GB memory and SSD disk.
>>
>> Best regards from Knut-Frode
>>
>>
>>
>> On 12. des. 2012 13:24, Jan Hartmann wrote:
>>> Hi Knut,
>>>
>>> What do you mean by "very slow"? I regularly use gdalwarp -tps on much
>>> larger rasters with a few thousand gcp-s, and never noticed unacceptable
>>> delays. Do you have very little physical memory, or many parallel
>>> processes running?
>>>
>>> Jan
>>>
>>> On 12/12/2012 01:12 PM, Knut-Frode Dagestad wrote:
>>>> Hi list,
>>>>
>>>> When warping images with many GCPs, the -tps switch (Thin Plate
>>>> Spline) is found to be necessary to get decent accuracy. This makes
>>>> however warping very slow. The only method I found to increase speed
>>>> is the -et switch, but at cost of spatial accuracy.
>>>>
>>>>
>>>> Below some comments about the other tries which did not help:
>>>>
>>>> - compiling GDAL with armadillo support had no effect on speed.
>>>> Btw, to compile with armadillo I had to manually insert -llapack in
>>>> the following line in configure:
>>>> if test -z "`${CXX} testarmadillo.cpp -o testarmadillo -larmadillo
>>>> 2>&1`" ; then .....
>>>> Perhaps ${LIBS} should be added permanently to this line in trunk?
>>>>
>>>> - compiling GDAL with OpenCL had also no effect. At first surprising,
>>>> but looking at the opencl warp kernel it seems that it only makes a
>>>> difference for other resampling algorithms than nearest neighbour?
>>>>
>>>> - Increasing  memory with -wm had no effect
>>>>
>>>> - Using several threads (-multi -wo NUM_THREADS=ALL_CPUS) actually
>>>> increased computing time significantly (my proj version is 4.7.1).
>>>>
>>>> From the debug output, a lot of the time is apparently spent on:
>>>> "WARP: Copying metadata from first source to destination dataset"
>>>> Is this an indication that much time is simply spent on reading and
>>>> writing the GCPs to/from file? If so, we could perhaps expect improved
>>>> performance if Geolocation Arrays could be used instead (not possible
>>>> due to http://trac.osgeo.org/gdal/ticket/4907).
>>>>
>>>>
>>>> The tests are made with the following file and command on Ubuntu:
>>>> http://dl.dropbox.com/u/15885758/testgcp.tif  (3212 GCPs and 2048x2511
>>>> pixels covering Southern Europe)
>>>>
>>>> time gdalwarp --debug on -et 5 -tps -t_srs '+proj=merc' testgcp.tif
>>>> out.tif  (+ other swithces mentioned above)
>>>>
>>>>
>>>> Best regards from Knut-Frode
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From j.l.h.hartmann at uva.nl  Wed Dec 12 05:16:38 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed, 12 Dec 2012 14:16:38 +0100
Subject: [gdal-dev] gdalwarp performance with many GCPs
In-Reply-To: <50C87E89.6080103@hotmail.com>
References: <ka9sc3$dil$1@ger.gmane.org> <50C87762.4000509@uva.nl>
	<ka9t7u$lpq$1@ger.gmane.org> <50C87B3C.6070704@uva.nl>
	<50C87E89.6080103@hotmail.com>
Message-ID: <50C883B6.6070407@uva.nl>


On 12/12/2012 01:54 PM, Knut-Frode Dagestad wrote:
> The GCPs are completely regular, every 40 pixel in each direction. 
> Warping quality is very good (only slow), so the GCPs are probably 
> also ok.
>
> I would appreciate very much if you could download this file and test 
> the command below:
> http://dl.dropbox.com/u/15885758/testgcp.tif
>
> time gdalwarp -tps -t_srs '+proj=merc' testgcp.tif out.tif
>
> If it works fast for you, the problem should be related to my local 
> GDAL build (1.10).
>
It's far too slow here too, so it's not your build.

I see that the warp itself doesn't start but after a very long time, so 
the problem lies in the initial computation of the transformation 
matrix. It must have something to do with the distribution of points, 
perhaps too close together, so as to cause singularities. The target 
coordinates are latlon-values, very close numerically. I see two testing 
possibilities:

1) Try to warp with subsets of points
2) Multiply all target coordinates with (e.g.) 1000. You'll get an 
impossible georeference, but if this goes much faster, you know where 
the problem lies.

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121212/65c872bf/attachment-0001.html>

From knutfrodesoppel at hotmail.com  Wed Dec 12 06:38:16 2012
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Wed, 12 Dec 2012 15:38:16 +0100
Subject: [gdal-dev] gdalwarp performance with many GCPs
In-Reply-To: <50C883B6.6070407@uva.nl>
References: <ka9sc3$dil$1@ger.gmane.org> <50C87762.4000509@uva.nl>
	<ka9t7u$lpq$1@ger.gmane.org> <50C87B3C.6070704@uva.nl>
	<50C87E89.6080103@hotmail.com> <50C883B6.6070407@uva.nl>
Message-ID: <50C896D8.5070002@hotmail.com>

On 12. des. 2012 14:16, Jan Hartmann wrote:

> It's far too slow here too, so it's not your build.
>
> I see that the warp itself doesn't start but after a very long time, so
> the problem lies in the initial computation of the transformation
> matrix. It must have something to do with the distribution of points,
> perhaps too close together, so as to cause singularities. The target
> coordinates are latlon-values, very close numerically. I see two testing
> possibilities:
>
> 1) Try to warp with subsets of points
> 2) Multiply all target coordinates with (e.g.) 1000. You'll get an
> impossible georeference, but if this goes much faster, you know where
> the problem lies.
>
> Jan
>

Scaling lon and lat with 1000 did not help, but when using only every 
5th GCP in each direction it is very fast (3 seconds with -tps) and 
still with good accuracy (as long as I keep the border GCPs).
So thank you, Jan, for spotting the problem!

It might be useful with a -decrease-GCP-density-factor switch which the 
user could fine-tune for performance, or ideally that the warping 
routines would calculate the optimal factor directly.


Another thing: I originally wanted to warp using Python API 
(AutoCreateWarpedVRT), but it seems to have no option to use -tps (?) - 
so therefore I have to call gdalwarp as system command.

Knut-Frode


From jluis at ualg.pt  Wed Dec 12 06:53:44 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed, 12 Dec 2012 14:53:44 +0000
Subject: [gdal-dev] image Compilation of Qgis 1.8 with gdal svn
	(Windows7_64bits)
In-Reply-To: <1355269681541-5022355.post@n6.nabble.com>
References: <1355269681541-5022355.post@n6.nabble.com>
Message-ID: <50C89A78.1090004@ualg.pt>

Do you really need to rebuild qgis?
I think replacing the old gdal dll by the new one will be (almost) 
enough. In practice things are a bit more complicated because of the 
gdal.dll dependencies, but nothing that a good hunt with "Dependency 
Walker" cannot solve (and still much easier than rebuild qgis).

Joaquim

> Hello,
>
> I need to use qgis 1.8 with the last gdal svn 1.10.0 on my Windows 7 64 bits
> station.I know that i'm obliged to compile in a 1st time gdal svn&  in a 2nd
> time qgis targetting the gdal svn version. Up to now, i succeed in compiling
> gdal svn thanks to "TortoiseSvn"&  Visual Studio. Now, i 'm trying to
> compile Qgis1.8 thanks to this following "help install_api" :
>   http://www.qgis.org/api/INSTALL.html#toc13
>
> I 'm following the 4th part of this webpage called "Building on windows". I
> have chosen to use Visual C++ Express edition rather than MinGW. Up to now,
> i installed :*Cmake/Flex/Bison/SVN/GIT/OSGeo4W. For information, i have not
> installed  the "Microsoft Windows Server? 2003 R2 Platform SDK" (Core
> SDK/Build environment(x86 32 bits).
> Then, thanks to OSGeo4W(advanced_installation), i installed
> :*expat/fcgi/gdal/grass/gsl-devel/iconv/pyqt4/qt4-devel/qwt5-devel-qt4/sip/spatialite/libspatialindex-devel/python-qscintilla.
> For information, i chosen "Gdal_dev 1.8-Pre6"  even if i want the last
> version of gdal dev called "1.10.0", unselectable via this OSGeo4W_setup.
> Then, i pasted the file unistd.h from "GnuWin32\include" toward VC\include
> directory of my Visual C++ installation.
>
> Now, i'm at the step 4.1.3 called 'Setting up the Visual Studio project with
> CMake'. I do not understand the instructions and how to create the batch
> file.
>
> 1/ Do you think the method that I opted is adapted to my goal (use qgis with
> the last version of gdal svn that i have already compiled) ? This method is
> really the easiest and most viable?
>
> 2/Could you give me details in order i succeed  in creating the batch file.
>
> 3/How to ensure that  the building take into account the gdal svn that i
> have already compiled?
>
> In advance, thank you to throw light for me.
> With kind regards.
>
> IMAGE
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/image-Compilation-of-Qgis-1-8-with-gdal-svn-Windows7-64bits-tp5022355.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Wed Dec 12 07:12:41 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 12 Dec 2012 16:12:41 +0100
Subject: [gdal-dev] gdalwarp performance with many GCPs
In-Reply-To: <ka9sc3$dil$1@ger.gmane.org>
References: <ka9sc3$dil$1@ger.gmane.org>
Message-ID: <1355325161.50c89ee980fab@imp.free.fr>

Selon Knut-Frode Dagestad <knutfrodesoppel at hotmail.com>:

> Hi list,
>
> When warping images with many GCPs, the -tps switch (Thin Plate Spline)
> is found to be necessary to get decent accuracy. This makes however
> warping very slow. The only method I found to increase speed is the -et
> switch, but at cost of spatial accuracy.
>
>
> Below some comments about the other tries which did not help:
>
> - compiling GDAL with armadillo support had no effect on speed.
> Btw, to compile with armadillo I had to manually insert -llapack in the
> following line in configure:
> if test -z "`${CXX} testarmadillo.cpp -o testarmadillo -larmadillo
> 2>&1`" ; then .....
> Perhaps ${LIBS} should be added permanently to this line in trunk?
>

Could you file a ticket about that ?

> - compiling GDAL with OpenCL had also no effect. At first surprising,
> but looking at the opencl warp kernel it seems that it only makes a
> difference for other resampling algorithms than nearest neighbour?

The OpenCL warper was designed to speed-up computational intensive algorithms,
such as lanczos resampling. For nearest resampling, most of the time is spent in
I/O, or reprojection.

>
> - Increasing  memory with -wm had no effect

Yes, it depends on particular configuration of source and target datasets,
particularly if they're tiled or not. Tuning this might be non obvious.

>
> - Using several threads (-multi -wo NUM_THREADS=ALL_CPUS) actually
> increased computing time significantly (my proj version is 4.7.1).

As underlined in
http://osgeo-org.1560.n6.nabble.com/gdal-dev-NEW-Multi-threaded-warping-td4980252.html
, you need proj 4.8.0 for lock-less reprojection. Older versions have a global
mutex that will prevent efficient parallism.

From turgay.osna at netcad.com.tr  Wed Dec 12 07:21:47 2012
From: turgay.osna at netcad.com.tr (netcadturgay)
Date: Wed, 12 Dec 2012 07:21:47 -0800 (PST)
Subject: [gdal-dev] Gdal 1.9 read problem
Message-ID: <1355325707637-5022521.post@n6.nabble.com>

I want to tile a file as scale independent. Also because output projection
may not be as same as source projection, I use to the AutoCreateWarpedVRT
function. But it reads the file very slow. Can you help me about this
problem? Or is there any other solution?

*Example Code:*
*Fast:*
Dataset ds = Gdal.Open("")
ds.ReadRaster(0, 0, ds.RasterXSize, ds.RasterYSize, buffer1, bufSize,
bufSize, 3, new int[] { 3, 2, 1 }, 0, 0, 0);

*Slow:*
Dataset dsWarp = Gdal.AutoCreateWarpedVRT(ds, ds.GetProjection(), wktWgs84,
ResampleAlg.GRA_Bilinear, 0);
dsWarp.ReadRaster(0, 0, dsWarp.RasterXSize, dsWarp.RasterYSize, buffer2,
bufSize, bufSize, 3, new int[] { 3, 2, 1 }, 0, 0, 0);



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Gdal-1-9-read-problem-tp5022521.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From otrov at hush.ai  Wed Dec 12 16:21:27 2012
From: otrov at hush.ai (deb)
Date: Thu, 13 Dec 2012 01:21:27 +0100
Subject: [gdal-dev] Problem re-projecting shapefile by using ogr2ogr
Message-ID: <20121213002128.15FCE6F443@smtp.hushmail.com>

Hi,

I want to re-project shapefile from current projection (whatever that is) to ESPG:4326.
My example layer (misc.shp) is in EPSG:31227:

    > ogrinfo -al -so misc.shp
    INFO: Open of `misc.shp'
          using driver `ESRI Shapefile' successful.
    
    Layer name: misc
    Geometry: Line String
    Feature Count: 10
    Extent: (21.267388, 42.015857) - (21.270225, 42.017470)
    Layer SRS WKT:
    PROJCS["MGI_Balkans_zone_7_deprecated",
        GEOGCS["GCS_MGI",
            DATUM["Militar_Geographische_Institute",
                SPHEROID["Bessel_1841",6377397.155,299.1528128]],
            PRIMEM["Greenwich",0],
            UNIT["Degree",0.017453292519943295]],
        PROJECTION["Transverse_Mercator"],
        PARAMETER["latitude_of_origin",0],
        PARAMETER["central_meridian",21],
        PARAMETER["scale_factor",0.9999],
        PARAMETER["false_easting",7500000],
        PARAMETER["false_northing",0],
        UNIT["Meter",1]]
    id: Integer (10.0)


As suggested by couple of sources from Google search results, I used this:

    > ogr2ogr -t_srs EPSG:4326 misc_re.shp misc.shp


And then investigate metadata of newly creates vector:

    > ogrinfo -al -so misc_re.shp
    INFO: Open of `misc_re.shp'
          using driver `ESRI Shapefile' successful.
    
    Layer name: misc_re
    Geometry: Line String
    Feature Count: 10
    Extent: (-34.004490, 0.000230) - (-34.004490, 0.000230)
    Layer SRS WKT:
    GEOGCS["GCS_WGS_1984",
        DATUM["WGS_1984",
            SPHEROID["WGS_84",6378137,298.257223563]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]]
    id: Integer (10.0)


There is no projection (PROJCS) in metadata and coordinates are different from source vector.
I then tried various EPSG codes, and I get PROJCS metadata, but Extent values are totally different for each projection, so even if I assume some units issue, there can't be that different units in existence.

Can anyone give me a pointer where I did wrong?

Thanks


From otrov at hush.ai  Wed Dec 12 16:48:57 2012
From: otrov at hush.ai (deb)
Date: Thu, 13 Dec 2012 01:48:57 +0100
Subject: [gdal-dev] Problem re-projecting shapefile by using ogr2ogr
In-Reply-To: <20121213002128.15FCE6F443@smtp.hushmail.com>
Message-ID: <20121213004857.A6B6B6F443@smtp.hushmail.com>

Hi again,

sorry to say, but I just realized where I did wrong.

ogr2ogr can't "re-project" - that is apply transformation - it can only set/change it. But not after this ticked was closed: http://trac.osgeo.org/gdal/ticket/4604
New -gcp switch can re-project - transform coordinates from one projection to another

I feel sorry because I already asked similar question, when I wanted to georeference vector file with ogr, and I was pointed to this resolved ticket


Cheers


From JPalmer at linz.govt.nz  Wed Dec 12 17:24:40 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Thu, 13 Dec 2012 14:24:40 +1300
Subject: [gdal-dev] FileGDB -preserve_fid
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0EDEEFBA21@prdlsmmsg01.ad.linz.govt.nz>

Hi,

I'm trying to copy data from PostgreSQL to FileGDB. My PostgreSQL table has a primary key column and ogr indenties it as the FID e.g

CREATE TABLE public.test_fileGDB (
    id INTEGER PRIMARY KEY,
    data1 TEXT,
    shape GEOMETRY(POINT, 4167)
);

INSERT INTO public.test_fileGDB (id, data1, shape) VALUES (100, 'FileGDB test record', ST_SetSrid(ST_MakePoint(160, -40), 4167));

ogrinfo PG:'dbname=my_db' public.test_filegdb
INFO: Open of `PG:dbname=my_db'
      using driver `PostgreSQL' successful.

Layer name: test_filegdb
Geometry: Point
Feature Count: 1
Extent: (160.000000, -40.000000) - (160.000000, -40.000000)
Layer SRS WKT:
GEOGCS["NZGD2000",
    DATUM["New_Zealand_Geodetic_Datum_2000",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6167"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4167"]]
FID Column = id
Geometry Column = shape
data1: String (0.0)

OGRFeature(test_filegdb):100
  data1 (String) = FileGDB test record
  POINT (160 -40)

However when I try to copy it into a FileGDB the FID data is lost:

ogr2ogr -preserve_fid --config FGDB_BULK_LOAD YES -f FileGDB test.gdb PG:'dbname=my_db' public.test_filegdb -nln test_filegdb

ogrinfo test.gdb test_filegdb
INFO: Open of `test.gdb'
      using driver `FileGDB' successful.

Layer name: test_filegdb
Geometry: Point
Feature Count: 1
Extent: (160.000000, -40.000000) - (160.000000, -40.000000)
Layer SRS WKT:
GEOGCS["NZGD2000",
    DATUM["New_Zealand_Geodetic_Datum_2000",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6167"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4167"]]
FID Column = OBJECTID
Geometry Column = SHAPE
data1: String (0.0)
OGRFeature(test_filegdb):1
  data1 (String) = FileGDB test record
  POINT (160 -40)


Is this a bug or did I use the wrong ogr2ogr options?

Cheers,
Jeremy


This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From otrov at hush.ai  Wed Dec 12 17:36:39 2012
From: otrov at hush.ai (deb)
Date: Thu, 13 Dec 2012 02:36:39 +0100
Subject: [gdal-dev] Problem re-projecting shapefile by using ogr2ogr
In-Reply-To: <CACqBkM8nS8A+3cjgD+qgBAB5quQrkEQnFa39N9tXcrV1ZYRU+A@mail.gmail.com>
References: <20121213002128.15FCE6F443@smtp.hushmail.com>
	<20121213004857.A6B6B6F443@smtp.hushmail.com><CACqBkM8nS8A+3cjgD+qgBAB5quQrkEQnFa39N9tXcrV1ZYRU+A@mail.gmail.com>
Message-ID: <20121213013639.693816F443@smtp.hushmail.com>

You are right. What I wrote doesn't make any sense. It just solved my initial problem, which blinded me to think that I solved my more general problem, and that is how to deal with all these projections and reference systems. I'm very new to GIS

New ground control point feature solved my problem, but also `-a_srs` switch could have solved it the same way, as I apparently didn't needed re-projecting but just assigning new projection.

My initial problem was that I was working in one projection, and then wanted to check the result in different projection (physical google maps)
Any use of `-t_srs` switch did change to shapefile itself, but vector did not overlay as coordinates were different.
What -gcp switch did, and even more simpler `-a_srs` does, is just change .prj file from shapefile, while shapefile itself is intact. Result seems correct and I take it as is, until I understand how projections and reference systems works.


Cheers


13.12.2012 at 2:02 AM, "Eli Adam" wrote:
>
>> ogr2ogr can't "re-project" - that is apply transformation - it 
>can only set/change it.
>
>I'm not sure that I understand your above wording.  But I think 
>that
>ogr2ogr can reproject data (prior to #4602 as well). On the help 
>page,
>http://gdal.org/ogr2ogr.html, you may want to look at:
>
>-a_srs srs_def:
>    Assign an output SRS
>-t_srs srs_def:
>    Reproject/transform to this SRS on output
>-s_srs srs_def:
>    Override source SRS
>
> (the example at the bottom of the help page which has been there 
>for
>along time does a reprojection).
>
>The help page and searching the email list (nabble for instance,
>http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html) are 
>often
>better resources to try before a general web search.


From even.rouault at mines-paris.org  Thu Dec 13 00:14:51 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 13 Dec 2012 09:14:51 +0100
Subject: [gdal-dev] FileGDB -preserve_fid
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0EDEEFBA21@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0EDEEFBA21@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <201212130914.51941.even.rouault@mines-paris.org>

Le jeudi 13 d?cembre 2012 02:24:40, Jeremy Palmer a ?crit :
> Hi,
> 
> I'm trying to copy data from PostgreSQL to FileGDB. My PostgreSQL table has
> a primary key column and ogr indenties it as the FID e.g
> 
> CREATE TABLE public.test_fileGDB (
>     id INTEGER PRIMARY KEY,
>     data1 TEXT,
>     shape GEOMETRY(POINT, 4167)
> );
> 
> INSERT INTO public.test_fileGDB (id, data1, shape) VALUES (100, 'FileGDB
> test record', ST_SetSrid(ST_MakePoint(160, -40), 4167));
> 
> ogrinfo PG:'dbname=my_db' public.test_filegdb
> INFO: Open of `PG:dbname=my_db'
>       using driver `PostgreSQL' successful.
> 
> Layer name: test_filegdb
> Geometry: Point
> Feature Count: 1
> Extent: (160.000000, -40.000000) - (160.000000, -40.000000)
> Layer SRS WKT:
> GEOGCS["NZGD2000",
>     DATUM["New_Zealand_Geodetic_Datum_2000",
>         SPHEROID["GRS 1980",6378137,298.257222101,
>             AUTHORITY["EPSG","7019"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6167"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9122"]],
>     AUTHORITY["EPSG","4167"]]
> FID Column = id
> Geometry Column = shape
> data1: String (0.0)
> 
> OGRFeature(test_filegdb):100
>   data1 (String) = FileGDB test record
>   POINT (160 -40)
> 
> However when I try to copy it into a FileGDB the FID data is lost:
> 
> ogr2ogr -preserve_fid --config FGDB_BULK_LOAD YES -f FileGDB test.gdb
> PG:'dbname=my_db' public.test_filegdb -nln test_filegdb
> 
> ogrinfo test.gdb test_filegdb
> INFO: Open of `test.gdb'
>       using driver `FileGDB' successful.
> 
> Layer name: test_filegdb
> Geometry: Point
> Feature Count: 1
> Extent: (160.000000, -40.000000) - (160.000000, -40.000000)
> Layer SRS WKT:
> GEOGCS["NZGD2000",
>     DATUM["New_Zealand_Geodetic_Datum_2000",
>         SPHEROID["GRS 1980",6378137,298.257222101,
>             AUTHORITY["EPSG","7019"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6167"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9122"]],
>     AUTHORITY["EPSG","4167"]]
> FID Column = OBJECTID
> Geometry Column = SHAPE
> data1: String (0.0)
> OGRFeature(test_filegdb):1
>   data1 (String) = FileGDB test record
>   POINT (160 -40)
> 
> 
> Is this a bug or did I use the wrong ogr2ogr options?

At first sight, I would say it is a limitation of the FileGDB API.

In FGdbLayer::CreateFeature( OGRFeature *poFeature ),

you can see the following commented code :

    /* Cannot write to FID field - it is managed by GDB*/
    //std::wstring wfield_name = StringToWString(m_strOIDFieldName);
    //hr = fgdb_row.SetInteger(wfield_name, poFeature->GetFID());

So there was an attempt made of preserving the FID, but apparently it doesn't 
work.

Looking at Row.h in the FileGDB API include files, I can see that there's a 
public GetOID() method, but SetOID() is private. So it seems that the FileGDB 
API manages itself the OID.

Even

From stefano.iacovella at gmail.com  Thu Dec 13 00:19:23 2012
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Thu, 13 Dec 2012 09:19:23 +0100
Subject: [gdal-dev] Problem re-projecting shapefile by using ogr2ogr
In-Reply-To: <20121213002128.15FCE6F443@smtp.hushmail.com>
References: <20121213002128.15FCE6F443@smtp.hushmail.com>
Message-ID: <CAG9OqYqgLWyqRp-jYVHrFKavVdNo5O9+MKG1dsBBEqBwAoGC4Q@mail.gmail.com>

2012/12/13 deb <otrov at hush.ai>:
> Hi,
>
> I want to re-project shapefile from current projection (whatever that is) to ESPG:4326.
> My example layer (misc.shp) is in EPSG:31227:
>
>     > ogrinfo -al -so misc.shp
>     INFO: Open of `misc.shp'
>           using driver `ESRI Shapefile' successful.
>
>     Layer name: misc
>     Geometry: Line String
>     Feature Count: 10
>     Extent: (21.267388, 42.015857) - (21.270225, 42.017470)
>     Layer SRS WKT:
>     PROJCS["MGI_Balkans_zone_7_deprecated",
>         GEOGCS["GCS_MGI",
>             DATUM["Militar_Geographische_Institute",
>                 SPHEROID["Bessel_1841",6377397.155,299.1528128]],
>             PRIMEM["Greenwich",0],
>             UNIT["Degree",0.017453292519943295]],
>         PROJECTION["Transverse_Mercator"],
>         PARAMETER["latitude_of_origin",0],
>         PARAMETER["central_meridian",21],
>         PARAMETER["scale_factor",0.9999],
>         PARAMETER["false_easting",7500000],
>         PARAMETER["false_northing",0],
>         UNIT["Meter",1]]
>     id: Integer (10.0)
>
>
> As suggested by couple of sources from Google search results, I used this:
>
>     > ogr2ogr -t_srs EPSG:4326 misc_re.shp misc.shp
>
>
> And then investigate metadata of newly creates vector:
>
>     > ogrinfo -al -so misc_re.shp
>     INFO: Open of `misc_re.shp'
>           using driver `ESRI Shapefile' successful.
>
>     Layer name: misc_re
>     Geometry: Line String
>     Feature Count: 10
>     Extent: (-34.004490, 0.000230) - (-34.004490, 0.000230)
>     Layer SRS WKT:
>     GEOGCS["GCS_WGS_1984",
>         DATUM["WGS_1984",
>             SPHEROID["WGS_84",6378137,298.257223563]],
>         PRIMEM["Greenwich",0],
>         UNIT["Degree",0.017453292519943295]]
>     id: Integer (10.0)
>
>
> There is no projection (PROJCS) in metadata and coordinates are different from source vector.
> I then tried various EPSG codes, and I get PROJCS metadata, but Extent values are totally different for each projection, so even if I assume some units issue, there can't be that different units in existence.
>
There is no PROJCS as your target SRS is a geographic one. Indeeed you
can see the GEOGCS label.
 EPSG:31227 is not only deprecated, it was removed from EPSG database,
looking at epsg-registry.org I can't find it.
Anyway as the WKT states is a Transverse Mercator flavour the extent
sounds quite strange to me.

May be it is EPSG:3909?

For a gentle introduction to SRS, maps and projections you may have a look at

http://www.progonos.com/furuti/MapProj/Normal/TOC/cartTOC.html

---------------------------------------------------
41.95581N 12.52854E


http://www.linkedin.com/in/stefanoiacovella

http://twitter.com/#!/Iacovellas

From JPalmer at linz.govt.nz  Thu Dec 13 00:56:14 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Thu, 13 Dec 2012 21:56:14 +1300
Subject: [gdal-dev] FileGDB -preserve_fid
In-Reply-To: <201212130914.51941.even.rouault@mines-paris.org>
References: <666FB8D75E95AE42965A0E76A5E5337E0EDEEFBA21@prdlsmmsg01.ad.linz.govt.nz>,
	<201212130914.51941.even.rouault@mines-paris.org>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0EDDB84902@prdlsmmsg01.ad.linz.govt.nz>


>
> At first sight, I would say it is a limitation of the FileGDB API.
>
> In FGdbLayer::CreateFeature( OGRFeature *poFeature ),
>
> you can see the following commented code :
>
>   /* Cannot write to FID field - it is managed by GDB*/
>    //std::wstring wfield_name = StringToWString(m_strOIDFieldName);
>    //hr = fgdb_row.SetInteger(wfield_name, poFeature->GetFID());
>
> So there was an attempt made of preserving the FID, but apparently it doesn't
> work.
>
> Looking at Row.h in the FileGDB API include files, I can see that there's a
> public GetOID() method, but SetOID() is private. So it seems that the FileGDB
> API manages itself the OID.
>
> Even

Thanks for the info. So what are the options to get the source FID data into FileGDB? I found if I remove the primary key from the Postgresql table that works. However this is a less than desirable option.

Cheers
Jeremy

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From otrov at hush.ai  Thu Dec 13 01:48:36 2012
From: otrov at hush.ai (deb)
Date: Thu, 13 Dec 2012 10:48:36 +0100
Subject: [gdal-dev] Problem re-projecting shapefile by using ogr2ogr
In-Reply-To: <CAG9OqYqgLWyqRp-jYVHrFKavVdNo5O9+MKG1dsBBEqBwAoGC4Q@mail.gmail.com>
References: <20121213002128.15FCE6F443@smtp.hushmail.com><CAG9OqYqgLWyqRp-jYVHrFKavVdNo5O9+MKG1dsBBEqBwAoGC4Q@mail.gmail.com>
Message-ID: <20121213094836.51A926F443@smtp.hushmail.com>

Thanks for your reply, Stefano

>There is no PROJCS as your target SRS is a geographic one. Indeeed 
>you can see the GEOGCS label.

I think I understand what you are saying. If specific SRS has WGS84 system then there is no projection.


> EPSG:31227 is not only deprecated, it was removed from EPSG 
>database, looking at epsg-registry.org I can't find it.
>Anyway as the WKT states is a Transverse Mercator flavour the 
>extent sounds quite strange to me.
>
>May be it is EPSG:3909?

This projection is indexed at SR: http://spatialreference.org/ref/epsg/31277/
I'm tracing old military topological map which was printed in that projection. I'm doing this mainly because I want to learn about GIS by practice and there isn't public data at that level of details available. Indeed I think I learned about a lot of tools and terms, but obviously projections and geographic systems did confuse me from the start.


>For a gentle introduction to SRS, maps and projections you may 
>have a look at
>
>http://www.progonos.com/furuti/MapProj/Normal/TOC/cartTOC.html

Thanks, I'll look closely just after I send this message


>---------------------------------------------------
>41.95581N 12.52854E

Ciao :)


From lran at email.unc.edu  Thu Dec 13 05:51:43 2012
From: lran at email.unc.edu (Ran, Limei)
Date: Thu, 13 Dec 2012 13:51:43 +0000
Subject: [gdal-dev] Configure GDAL 1.9.1 with GEOS 3.3.6
Message-ID: <58477023A73D04479CCD057E4888A8464C545116@ITS-MSXMBS4M.ad.unc.edu>

Hello,

I compiled GEOS 3.3.6 on our Linux server and I used the following configure for GDAL 1.9.1 with GEOS installed dir:

./configure --prefix=/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/gdal-1.9.1/local --with-static-proj4=/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/proj-4.8.0/local --with-geos=/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local --with-libtiff=internal --with-png=internal --with-jpeg=internal --with-libz=internal --enable-linux-lfs --enable-static --without-curl --without-expat --without-mysql --without-dwgdirect --without-odbc --without-python --without-oci --without-sqlite3 --without-oci-include --without-oci-lib --without-ld-shared

But, I got GEOS support no at the end.
..
SQLite support:            no
  SpatiaLite support:        no
  DWGdirect support          no
  INFORMIX DataBlade support:no
  GEOS support:              no
  VFK support:               yes
  Poppler support:           no
  Podofo support:            no
....

I have:
...
config.status:S["GEOS_CONFIG"]="no"
config.status:S["GEOS_VERSION"]=""
config.status:S["HAVE_GEOS"]=""
config.status:S["GEOS_CFLAGS"]=""
config.status:S["GEOS_LIBS"]="/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local/lib"
...

I did uncomment the following:
...
nmake.opt:# Uncomment for GEOS support
nmake.opt:GEOS_DIR=/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6
nmake.opt:GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/source/headers -DHAVE_GEOS
nmake.opt:GEOS_LIB     = $(GEOS_DIR)/local/lib/geos_c_i.lib
...

Could you tell me where the problem could be?

Thanks,

Limei


From even.rouault at mines-paris.org  Thu Dec 13 10:54:10 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 13 Dec 2012 19:54:10 +0100
Subject: [gdal-dev] Configure GDAL 1.9.1 with GEOS 3.3.6
In-Reply-To: <58477023A73D04479CCD057E4888A8464C545116@ITS-MSXMBS4M.ad.unc.edu>
References: <58477023A73D04479CCD057E4888A8464C545116@ITS-MSXMBS4M.ad.unc.edu>
Message-ID: <201212131954.10684.even.rouault@mines-paris.org>

Le jeudi 13 d?cembre 2012 14:51:43, Ran, Limei a ?crit :
> Hello,
> 
> I compiled GEOS 3.3.6 on our Linux server and I used the following
> configure for GDAL 1.9.1 with GEOS installed dir:
> 
> ./configure
> --prefix=/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/gdal-1.9.1/local
> --with-static-proj4=/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/proj-4.8.
> 0/local
> --with-geos=/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local
> --with-libtiff=internal --with-png=internal --with-jpeg=internal
> --with-libz=internal --enable-linux-lfs --enable-static --without-curl
> --without-expat --without-mysql --without-dwgdirect --without-odbc
> --without-python --without-oci --without-sqlite3 --without-oci-include
> --without-oci-lib --without-ld-shared

You must specify the full filename of geos-config in --with-geos (that is to say 
with geos-config at the the end)

--with-geos=/the/path/to/geos-config

From even.rouault at mines-paris.org  Thu Dec 13 10:55:42 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 13 Dec 2012 19:55:42 +0100
Subject: [gdal-dev] FileGDB -preserve_fid
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0EDDB84902@prdlsmmsg01.ad.linz.govt.nz>
References: <666FB8D75E95AE42965A0E76A5E5337E0EDEEFBA21@prdlsmmsg01.ad.linz.govt.nz>
	<201212130914.51941.even.rouault@mines-paris.org>
	<666FB8D75E95AE42965A0E76A5E5337E0EDDB84902@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <201212131955.42447.even.rouault@mines-paris.org>

Le jeudi 13 d?cembre 2012 09:56:14, Jeremy Palmer a ?crit :
> > At first sight, I would say it is a limitation of the FileGDB API.
> > 
> > In FGdbLayer::CreateFeature( OGRFeature *poFeature ),
> > 
> > you can see the following commented code :
> >   /* Cannot write to FID field - it is managed by GDB*/
> >   
> >    //std::wstring wfield_name = StringToWString(m_strOIDFieldName);
> >    //hr = fgdb_row.SetInteger(wfield_name, poFeature->GetFID());
> > 
> > So there was an attempt made of preserving the FID, but apparently it
> > doesn't work.
> > 
> > Looking at Row.h in the FileGDB API include files, I can see that there's
> > a public GetOID() method, but SetOID() is private. So it seems that the
> > FileGDB API manages itself the OID.
> > 
> > Even
> 
> Thanks for the info. So what are the options to get the source FID data
> into FileGDB? I found if I remove the primary key from the Postgresql
> table that works. However this is a less than desirable option.

Try with a SQL statement that will rename the primary key into another name, 
for example : -sql "select *, ogc_fid as the_fid from poly"

From jorgearevalo at libregis.org  Thu Dec 13 10:58:50 2012
From: jorgearevalo at libregis.org (Jorge Arevalo)
Date: Thu, 13 Dec 2012 19:58:50 +0100
Subject: [gdal-dev] Modifying a raster pixel by pixel with GDAL
Message-ID: <CAMhtMNNt8EDfnggD912wXg_MX61koovppQLAxxuyh8BDnf011g@mail.gmail.com>

Hello,

I want to modify every single pixel of a 1 band GeoTiff file,
following a formula (multiply each pixel for a value and then add
another value).

output_pixel[i][j] = input_pixel[i][j] * K[i][j] + C[i][j]

I can't apply a linear scale (it would be as easier as -scale option
in gdal_translate). Sounds more like applying a mask to the band's
data.

My first approach is to get every data block of the raster (IReadBlock
call), apply the transformation to every single pixel ( = apply a mask
to the data block), and put the block in the output raster.

Is there any other faster/smarter approach?

Many thanks in advance,

--
Jorge Arevalo
http://www.krop.com/jorgearevalo

From lran at email.unc.edu  Thu Dec 13 11:01:45 2012
From: lran at email.unc.edu (Ran, Limei)
Date: Thu, 13 Dec 2012 19:01:45 +0000
Subject: [gdal-dev] Configure GDAL 1.9.1 with GEOS 3.3.6
In-Reply-To: <201212131954.10684.even.rouault@mines-paris.org>
References: <58477023A73D04479CCD057E4888A8464C545116@ITS-MSXMBS4M.ad.unc.edu>
	<201212131954.10684.even.rouault@mines-paris.org>
Message-ID: <58477023A73D04479CCD057E4888A8464C545267@ITS-MSXMBS4M.ad.unc.edu>

Hello Even,

My GEOS configured path is:
nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/local

The proj4 is specified in the same way and PROJ4 works. But, not GEOS.

Thank you very much,

Limei 

-----Original Message-----
From: Even Rouault [mailto:even.rouault at mines-paris.org] 
Sent: Thursday, December 13, 2012 1:54 PM
To: gdal-dev at lists.osgeo.org
Cc: Ran, Limei
Subject: Re: [gdal-dev] Configure GDAL 1.9.1 with GEOS 3.3.6

Le jeudi 13 d?cembre 2012 14:51:43, Ran, Limei a ?crit :
> Hello,
> 
> I compiled GEOS 3.3.6 on our Linux server and I used the following 
> configure for GDAL 1.9.1 with GEOS installed dir:
> 
> ./configure
> --prefix=/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/gdal-1.9.1/local
> --with-static-proj4=/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/proj-4.8.
> 0/local
> --with-geos=/nas01/depts/ie/cempd/SA/sa_06_2009/src/libs/geos-3.3.6/lo
> cal --with-libtiff=internal --with-png=internal --with-jpeg=internal 
> --with-libz=internal --enable-linux-lfs --enable-static --without-curl 
> --without-expat --without-mysql --without-dwgdirect --without-odbc 
> --without-python --without-oci --without-sqlite3 --without-oci-include 
> --without-oci-lib --without-ld-shared

You must specify the full filename of geos-config in --with-geos (that is to say with geos-config at the the end)

--with-geos=/the/path/to/geos-config

From even.rouault at mines-paris.org  Thu Dec 13 11:06:24 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 13 Dec 2012 20:06:24 +0100
Subject: [gdal-dev] Modifying a raster pixel by pixel with GDAL
In-Reply-To: <CAMhtMNNt8EDfnggD912wXg_MX61koovppQLAxxuyh8BDnf011g@mail.gmail.com>
References: <CAMhtMNNt8EDfnggD912wXg_MX61koovppQLAxxuyh8BDnf011g@mail.gmail.com>
Message-ID: <201212132006.24227.even.rouault@mines-paris.org>

Le jeudi 13 d?cembre 2012 19:58:50, Jorge Arevalo a ?crit :
> Hello,
> 
> I want to modify every single pixel of a 1 band GeoTiff file,
> following a formula (multiply each pixel for a value and then add
> another value).
> 
> output_pixel[i][j] = input_pixel[i][j] * K[i][j] + C[i][j]
> 
> I can't apply a linear scale (it would be as easier as -scale option
> in gdal_translate). Sounds more like applying a mask to the band's
> data.
> 
> My first approach is to get every data block of the raster (IReadBlock
> call), apply the transformation to every single pixel ( = apply a mask
> to the data block), and put the block in the output raster.
> 
> Is there any other faster/smarter approach?

I would follow exactly the same approach. If you don't do in-place update, be 
carefull that the source and target rasters have exactly the same block size 
and data type if you want to use directly ReadBlock() / WriteBlock(). If not, 
you must use ReadBlock() / RasterIO(GF_Write, ....)

From ragi at burhum.com  Thu Dec 13 11:40:59 2012
From: ragi at burhum.com (rburhum)
Date: Thu, 13 Dec 2012 11:40:59 -0800 (PST)
Subject: [gdal-dev] FileGDB -preserve_fid
In-Reply-To: <201212130914.51941.even.rouault@mines-paris.org>
References: <666FB8D75E95AE42965A0E76A5E5337E0EDEEFBA21@prdlsmmsg01.ad.linz.govt.nz>
	<201212130914.51941.even.rouault@mines-paris.org>
Message-ID: <1355427659321-5022833.post@n6.nabble.com>

Although FileGDB does have programmatic ways to preserve the FID, these are
not exposed through the FileGDB API yet. What people normally do in these
cases is to copy the fid to the target dataset as a non-primary key value. I
guess we could add something along these lines as an enhancement request to
the FileGDB driver.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-FileGDB-preserve-fid-tp5022615p5022833.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From Juergen at Weichand.de  Thu Dec 13 11:35:36 2012
From: Juergen at Weichand.de (=?UTF-8?B?SsO8cmdlbiBXZWljaGFuZA==?=)
Date: Thu, 13 Dec 2012 20:35:36 +0100
Subject: [gdal-dev] OGR-Driver GML axis order handling (GDAL, QGIS)
Message-ID: <50CA2E08.7090305@Weichand.de>

Hello List,

By default the OGR-Driver will swap the axis order to longitude, 
latitude for geographic coordinate systems.

"Since OGR 1.8.0, the GML driver has coordinate system support. This is 
only reported when all the geometries of a layer have a srsName 
attribute, whose value is the same for all geometries. For srsName such 
as "urn:ogc:def:crs:EPSG:", for geographic coordinate systems (as 
returned by WFS 1.1.0 for example), the axis order should be (latitude, 
longitude) as required by the standards, but this is unusual and can 
cause issues with applications unaware of axis order. So by default, the 
driver will swap the coordinates so that they are in the (longitude, 
latitude) order and report a SRS without axis order specified."
http://www.gdal.org/ogr/drv_gml.html


Example (1): urn:ogc:def:crs:EPSG::4326 - GML 3.2 (WGS 84)
Lat / Lon is swapped to Lon / Lat by the driver (result: correct import 
into QGIS).
http://www.weichand.de/tmp/wfs20gml32_epsg4326.gml

Example (2): urn:ogc:def:crs:EPSG::31468 - GML 3.2 (Gau? Kr?ger 12?)
North / East is NOT swapped to East / North (result: incorrect import 
into QGIS).
http://www.weichand.de/tmp/wfs20gml32_epsg31468.gml

Example (3): urn:ogc:def:crs:EPSG::25832 - GML 3.2 (ETRS89 UTM 32N)
Default: East / North (result: correct import into QGIS).
http://www.weichand.de/tmp/wfs20gml32_epsg25832.gml


Is there any reason why OGR 1.9.2 don?t swap the coordinates of 
projected systems (to East / North)?

Thanks in advance!
Juergen



Original Post @ 
http://gis.stackexchange.com/questions/43896/ogr-driver-gml-axis-order-handling-gdal-qgis

From even.rouault at mines-paris.org  Thu Dec 13 11:56:27 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 13 Dec 2012 20:56:27 +0100
Subject: [gdal-dev] OGR-Driver GML axis order handling (GDAL, QGIS)
In-Reply-To: <50CA2E08.7090305@Weichand.de>
References: <50CA2E08.7090305@Weichand.de>
Message-ID: <201212132056.27708.even.rouault@mines-paris.org>

Le jeudi 13 d?cembre 2012 20:35:36, J?rgen Weichand a ?crit :
> Hello List,
> 
> By default the OGR-Driver will swap the axis order to longitude,
> latitude for geographic coordinate systems.
> 
> "Since OGR 1.8.0, the GML driver has coordinate system support. This is
> only reported when all the geometries of a layer have a srsName
> attribute, whose value is the same for all geometries. For srsName such
> as "urn:ogc:def:crs:EPSG:", for geographic coordinate systems (as
> returned by WFS 1.1.0 for example), the axis order should be (latitude,
> longitude) as required by the standards, but this is unusual and can
> cause issues with applications unaware of axis order. So by default, the
> driver will swap the coordinates so that they are in the (longitude,
> latitude) order and report a SRS without axis order specified."
> http://www.gdal.org/ogr/drv_gml.html
> 
> 
> Example (1): urn:ogc:def:crs:EPSG::4326 - GML 3.2 (WGS 84)
> Lat / Lon is swapped to Lon / Lat by the driver (result: correct import
> into QGIS).
> http://www.weichand.de/tmp/wfs20gml32_epsg4326.gml
> 
> Example (2): urn:ogc:def:crs:EPSG::31468 - GML 3.2 (Gau? Kr?ger 12?)
> North / East is NOT swapped to East / North (result: incorrect import
> into QGIS).
> http://www.weichand.de/tmp/wfs20gml32_epsg31468.gml
> 
> Example (3): urn:ogc:def:crs:EPSG::25832 - GML 3.2 (ETRS89 UTM 32N)
> Default: East / North (result: correct import into QGIS).
> http://www.weichand.de/tmp/wfs20gml32_epsg25832.gml
> 
> 
> Is there any reason why OGR 1.9.2 don?t swap the coordinates of
> projected systems (to East / North)?

Yes, the reason is that it is not implemented...

There's a patch in http://trac.osgeo.org/gdal/ticket/4329 that should address 
this, but I'm not sure if this still applies cleanly to trunk, because it has 
perhaps rotten a bit.

I didn't apply since I was midly satisfied with the duplication of symbols. The 
ideal would be to have a single function that would address both 
oSRS.EPSGTreatsAsLatLong() and oSRS.EPSGTreatsAsNorthingEasting()  to avoid 
testing them in each area of the code that want to mess with axis ordering.

> 
> Thanks in advance!
> Juergen
> 
> 
> 
> Original Post @
> http://gis.stackexchange.com/questions/43896/ogr-driver-gml-axis-order-hand
> ling-gdal-qgis _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jorgearevalo at libregis.org  Thu Dec 13 12:49:26 2012
From: jorgearevalo at libregis.org (Jorge Arevalo)
Date: Thu, 13 Dec 2012 21:49:26 +0100
Subject: [gdal-dev] Modifying a raster pixel by pixel with GDAL
In-Reply-To: <201212132006.24227.even.rouault@mines-paris.org>
References: <CAMhtMNNt8EDfnggD912wXg_MX61koovppQLAxxuyh8BDnf011g@mail.gmail.com>
	<201212132006.24227.even.rouault@mines-paris.org>
Message-ID: <CAMhtMNOu7w8fniUzQ8c1ohBnY=p33Zt6rc-oQsU1vHwzFd2uxA@mail.gmail.com>

Thanks for the response and the wise advice, Even. I'll do it in that way.

On Thu, Dec 13, 2012 at 8:06 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le jeudi 13 d?cembre 2012 19:58:50, Jorge Arevalo a ?crit :
>> Hello,
>>
>> I want to modify every single pixel of a 1 band GeoTiff file,
>> following a formula (multiply each pixel for a value and then add
>> another value).
>>
>> output_pixel[i][j] = input_pixel[i][j] * K[i][j] + C[i][j]
>>
>> I can't apply a linear scale (it would be as easier as -scale option
>> in gdal_translate). Sounds more like applying a mask to the band's
>> data.
>>
>> My first approach is to get every data block of the raster (IReadBlock
>> call), apply the transformation to every single pixel ( = apply a mask
>> to the data block), and put the block in the output raster.
>>
>> Is there any other faster/smarter approach?
>
> I would follow exactly the same approach. If you don't do in-place update, be
> carefull that the source and target rasters have exactly the same block size
> and data type if you want to use directly ReadBlock() / WriteBlock(). If not,
> you must use ReadBlock() / RasterIO(GF_Write, ....)



-- 
Jorge Arevalo
http://www.krop.com/jorgearevalo

From JPalmer at linz.govt.nz  Thu Dec 13 15:36:31 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Fri, 14 Dec 2012 12:36:31 +1300
Subject: [gdal-dev] FileGDB -preserve_fid
In-Reply-To: <1355427659321-5022833.post@n6.nabble.com>
References: <666FB8D75E95AE42965A0E76A5E5337E0EDEEFBA21@prdlsmmsg01.ad.linz.govt.nz>
	<201212130914.51941.even.rouault@mines-paris.org>
	<1355427659321-5022833.post@n6.nabble.com>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0EDEEFC206@prdlsmmsg01.ad.linz.govt.nz>

Great thanks.

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of rburhum
Sent: Friday, 14 December 2012 8:41 a.m.
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] FileGDB -preserve_fid

Although FileGDB does have programmatic ways to preserve the FID, these are not exposed through the FileGDB API yet. What people normally do in these cases is to copy the fid to the target dataset as a non-primary key value. I guess we could add something along these lines as an enhancement request to the FileGDB driver.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-FileGDB-preserve-fid-tp5022615p5022833.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From JPalmer at linz.govt.nz  Thu Dec 13 17:10:38 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Fri, 14 Dec 2012 14:10:38 +1300
Subject: [gdal-dev] FileGDB -preserve_fid
In-Reply-To: <201212131955.42447.even.rouault@mines-paris.org>
References: <666FB8D75E95AE42965A0E76A5E5337E0EDEEFBA21@prdlsmmsg01.ad.linz.govt.nz>
	<201212130914.51941.even.rouault@mines-paris.org>
	<666FB8D75E95AE42965A0E76A5E5337E0EDDB84902@prdlsmmsg01.ad.linz.govt.nz>
	<201212131955.42447.even.rouault@mines-paris.org>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0EDEF7F7B3@prdlsmmsg01.ad.linz.govt.nz>

Thanks Even.

It seems that just using the -sql options works nicely - you don't even need to do the column rename :)


-----Original Message-----
From: Even Rouault [mailto:even.rouault at mines-paris.org]
Sent: Friday, 14 December 2012 7:56 a.m.
To: Jeremy Palmer
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] FileGDB -preserve_fid

Le jeudi 13 d?cembre 2012 09:56:14, Jeremy Palmer a ?crit :
> > At first sight, I would say it is a limitation of the FileGDB API.
> >
> > In FGdbLayer::CreateFeature( OGRFeature *poFeature ),
> >
> > you can see the following commented code :
> >   /* Cannot write to FID field - it is managed by GDB*/
> >
> >    //std::wstring wfield_name = StringToWString(m_strOIDFieldName);
> >    //hr = fgdb_row.SetInteger(wfield_name, poFeature->GetFID());
> >
> > So there was an attempt made of preserving the FID, but apparently
> > it doesn't work.
> >
> > Looking at Row.h in the FileGDB API include files, I can see that
> > there's a public GetOID() method, but SetOID() is private. So it
> > seems that the FileGDB API manages itself the OID.
> >
> > Even
>
> Thanks for the info. So what are the options to get the source FID
> data into FileGDB? I found if I remove the primary key from the
> Postgresql table that works. However this is a less than desirable option.

Try with a SQL statement that will rename the primary key into another name, for example : -sql "select *, ogc_fid as the_fid from poly"

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From hari.0516 at gmail.com  Thu Dec 13 23:24:14 2012
From: hari.0516 at gmail.com (HariPrasad)
Date: Thu, 13 Dec 2012 23:24:14 -0800 (PST)
Subject: [gdal-dev] Overviews using GDAL
In-Reply-To: <50C73CBE.9080906@mail.ru>
References: <1355230713797-5022226.post@n6.nabble.com>
	<50C73CBE.9080906@mail.ru>
Message-ID: <1355469854703-5022926.post@n6.nabble.com>

Thanks Dmitry  for your replay.

I did that using IRasterIO(), but non of the IRasterIO() parameters has
which overview its displaying. (i.e overview number). How can i know which
overview it has displayed? 

I used GetOverview(int). I was able to get the overview numbers. But when i
zoomed to maximum the base image has to be displayed instead of overview if
i am not wrong, which i am not getting the base image number.

am iam thinking in right direction?



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Overviews-using-GDAL-tp5022226p5022926.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From pepijn at vaneeckhoudt.net  Fri Dec 14 00:19:11 2012
From: pepijn at vaneeckhoudt.net (Pepijn Van Eeckhoudt)
Date: Fri, 14 Dec 2012 09:19:11 +0100
Subject: [gdal-dev] WKT for epsg:3857 generated by epsg_tr.py
Message-ID: <50CAE0FF.6090701@vaneeckhoudt.net>

When running 'epsg_tr.py -wkt 3857', gdal produces the WKT listed below. 
I believe the projection that is stated in the WKT is incorrect though. 
The combination of WGS 84 as base geogcs with Mercator_1SP as projection 
means that the regular ellipsoidal Mercator projection will be used 
which is not correct for web mercator.

In the EPSG database 3857 is defined as using the projection 'Popular 
Visualisation Pseudo Mercator' projection which is distinct from the 
regular mercator projection. It's equivalent to 'apply spherical 
mercator to ellipsoidal coordinates'. To indicate this distinction in 
the WKT I think the projection should be something different than 
'Mercator_1SP'. Mercator_1SP_Spherical, Mercator_1SP_Google or 
Popular_Visualisation_Pseudo_Mercator for instance.

Is my understanding of this correct?

Pepijn Van Eeckhoudt

PROJCS["WGS 84 / Pseudo-Mercator",
     GEOGCS["WGS 84",
         DATUM["WGS_1984", SPHEROID["WGS 
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]], 
AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Mercator_1SP"],
     PARAMETER["central_meridian",0],
     PARAMETER["scale_factor",1],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AXIS["X",EAST],
     AXIS["Y",NORTH],
     AUTHORITY["EPSG","3857"]]

From even.rouault at mines-paris.org  Fri Dec 14 01:10:05 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Dec 2012 10:10:05 +0100
Subject: [gdal-dev] WKT for epsg:3857 generated by epsg_tr.py
In-Reply-To: <50CAE0FF.6090701@vaneeckhoudt.net>
References: <50CAE0FF.6090701@vaneeckhoudt.net>
Message-ID: <1355476205.50caeced13fa1@imp.free.fr>

Selon Pepijn Van Eeckhoudt <pepijn at vaneeckhoudt.net>:

> When running 'epsg_tr.py -wkt 3857', gdal produces the WKT listed below.
> I believe the projection that is stated in the WKT is incorrect though.
> The combination of WGS 84 as base geogcs with Mercator_1SP as projection
> means that the regular ellipsoidal Mercator projection will be used
> which is not correct for web mercator.
>
> In the EPSG database 3857 is defined as using the projection 'Popular
> Visualisation Pseudo Mercator' projection which is distinct from the
> regular mercator projection. It's equivalent to 'apply spherical
> mercator to ellipsoidal coordinates'. To indicate this distinction in
> the WKT I think the projection should be something different than
> 'Mercator_1SP'. Mercator_1SP_Spherical, Mercator_1SP_Google or
> Popular_Visualisation_Pseudo_Mercator for instance.
>
> Is my understanding of this correct?

I also believe that the current WKT definition is known to be a bit hackish (is
there some official/generally agreed name for the projection that should be used
?). But you are probably using not the most recent version of GDAL, since recent
versions include a PROJ4 EXTENSION node that will have the correct definition
for EPSG:3857 (which has been hardcoded)

With current trunk (and likely 1.9, but I haven't checked) :

C:gdal_trunkgdal>python swigpythonscriptsepsg_tr.py 3857
PROJCS["WGS 84 / Pseudo-Mercator",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["X",EAST],
    AXIS["Y",NORTH],
    EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +
x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"],
    AUTHORITY["EPSG","3857"]]








From pepijn at vaneeckhoudt.net  Fri Dec 14 01:18:55 2012
From: pepijn at vaneeckhoudt.net (Pepijn Van Eeckhoudt)
Date: Fri, 14 Dec 2012 10:18:55 +0100
Subject: [gdal-dev] WKT for epsg:3857 generated by epsg_tr.py
In-Reply-To: <1355476205.50caeced13fa1@imp.free.fr>
References: <50CAE0FF.6090701@vaneeckhoudt.net>
	<1355476205.50caeced13fa1@imp.free.fr>
Message-ID: <50CAEEFF.2070103@vaneeckhoudt.net>

On 14-12-12 10:10, Even Rouault wrote:
> Selon Pepijn Van Eeckhoudt <pepijn at vaneeckhoudt.net>:
> I also believe that the current WKT definition is known to be a bit hackish (is
> there some official/generally agreed name for the projection that should be used
> ?). But you are probably using not the most recent version of GDAL, since recent
> versions include a PROJ4 EXTENSION node that will have the correct definition
> for EPSG:3857 (which has been hardcoded)
I was using gdal 1.9.0. I snipped out the extension bit for brevity. 
Didn't make much difference in the end so I probably shouldn't have done 
that.

The 'official' name in the EPSG database is 'Popular Visualisation 
Pseudo Mercator' (method EPSG:1024). Geotoolkit apparently uses this 
name [1]. The OSM wiki tells you to use 'Mercator_1SP_Google' [2]

Pepijn


[1] http://lists.osgeo.org/pipermail/geotoolkit/2011-March/000544.html
[2] http://wiki.openstreetmap.org/wiki/Mercator#PostGIS_.2F_SQL


From pepijn at vaneeckhoudt.net  Fri Dec 14 01:26:35 2012
From: pepijn at vaneeckhoudt.net (Pepijn Van Eeckhoudt)
Date: Fri, 14 Dec 2012 10:26:35 +0100
Subject: [gdal-dev] WKT for epsg:3857 generated by epsg_tr.py
In-Reply-To: <1355476205.50caeced13fa1@imp.free.fr>
References: <50CAE0FF.6090701@vaneeckhoudt.net>
	<1355476205.50caeced13fa1@imp.free.fr>
Message-ID: <50CAF0CB.7030602@vaneeckhoudt.net>

On 14-12-12 10:10, Even Rouault wrote:
> I also believe that the current WKT definition is known to be a bit hackish (is
> there some official/generally agreed name for the projection that should be used
> ?). But you are probably using not the most recent version of GDAL, since recent
> versions include a PROJ4 EXTENSION node that will have the correct definition
> for EPSG:3857 (which has been hardcoded)
BTW, the problem is not that I'm getting incorrect results with GDAL. 
The library I work on uses wkt, not proj4 parameter strings. I'm getting 
this particular wkt string from a spatialite database which uses GDAL 
(and epsg_tr.py) to generate the wkt strings. Since the wkt is telling 
our software to use 'mercator_1sp/wgs-84' I'm getting incorrect results.

Pepijn


From ealpert at digitalglobe.com  Fri Dec 14 06:14:44 2012
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Fri, 14 Dec 2012 07:14:44 -0700
Subject: [gdal-dev] Can GDAL be configured to do direct I/O? (bypass cache,
	control blocksize, etc)
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB2330B7814E5@COMAIL01.digitalglobe.com>

I'm running in to a situation where I believe the filesystem cache
settings are screwing things up. Based on iozone tests I'm not getting
near the throughput I should for large 4gb+ files with multiple writing
processes. It is a complex interaction of the number of dirty pages in
filesystem cache in combination with small blocksize of the filesystem.
I'm still trying to figure this out but I can now get these machines to
tip over with just iozone. 

 

 

I'm actively working on how to refactor this code base to use GDAL
WriteBlock but in absence of a solution there I'm wondering if there's
anyway to get GDAL writing using O_DIRECT?

 

Thanks,

 

-ethan


This electronic communication and any attachments may contain confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee 
responsible for delivering this communication to the intended recipient, or if you have received 
this communication in error, please do not print, copy, retransmit, disseminate or 
otherwise use the information. Please indicate to the sender that you have received this 
communication in error, and delete the copy you received. DigitalGlobe reserves the 
right to monitor any electronic communication sent or received by its employees, agents 
or representatives.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121214/40130a00/attachment-0001.html>

From ivan.lucena at princeton-ma.us  Fri Dec 14 06:30:50 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri, 14 Dec 2012 09:30:50 -0500
Subject: [gdal-dev]
	=?iso-8859-1?q?Can_GDAL_be_configured_to_do_direct_I/O?=
	=?iso-8859-1?q?=3F_=28bypass_cache=2C_control_blocksize=2C_etc=29?=
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB2330B7814E5@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB2330B7814E5@COMAIL01.digitalglobe.com>
Message-ID: <20121214143050.11009.qmail@s466.sureserver.com>

Interesting: http://www.centos.org/docs/4/html/rh-gfs-en-6.1/s1-manage-direct-io.html

>  -------Original Message-------
>  From: Ethan Alpert <ealpert at digitalglobe.com>
>  To: gdal-dev at lists.osgeo.org
>  Subject: [gdal-dev] Can GDAL be configured to do direct I/O? (bypass cache, control blocksize, etc)
>  Sent: Dec 14 '12 09:14
>  
>  I?m running in to a situation where I believe the filesystem cache
>  settings are screwing things up. Based on iozone tests I?m not
>  getting near the throughput I should for large 4gb+ files with multiple
>  writing processes. It is a complex interaction of the number of dirty pages
>  in filesystem cache in combination with small blocksize of the filesystem.
>  I?m still trying to figure this out but I can now get these machines
>  to tip over with just iozone.
>  
>  
>  I?m actively working on how to refactor this code base to use GDAL
>  WriteBlock but in absence of a solution there I?m wondering if
>  there?s anyway to get GDAL writing using O_DIRECT?
>  
>  
>  Thanks,
>  
>  
>  -ethan
>  
>  This electronic communication and any attachments may contain confidential
>  and proprietary  information of DigitalGlobe, Inc. If you are not the
>  intended recipient, or an agent or employee  responsible for delivering
>  this communication to the intended recipient, or if you have received  this
>  communication in error, please do not print, copy, retransmit, disseminate
>  or  otherwise use the information. Please indicate to the sender that you
>  have received this  communication in error, and delete the copy you
>  received. DigitalGlobe reserves the  right to monitor any electronic
>  communication sent or received by its employees, agents  or
>  representatives.
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev at lists.osgeo.org] gdal-dev at lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Fri Dec 14 06:35:33 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Dec 2012 15:35:33 +0100
Subject: [gdal-dev] Can GDAL be configured to do direct I/O? (bypass
	cache, control blocksize, etc)
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB2330B7814E5@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB2330B7814E5@COMAIL01.digitalglobe.com>
Message-ID: <1355495733.50cb39353d07f@imp.free.fr>

Selon Ethan Alpert <ealpert at digitalglobe.com>:

> I'm running in to a situation where I believe the filesystem cache
> settings are screwing things up. Based on iozone tests I'm not getting
> near the throughput I should for large 4gb+ files with multiple writing
> processes. It is a complex interaction of the number of dirty pages in
> filesystem cache in combination with small blocksize of the filesystem.
> I'm still trying to figure this out but I can now get these machines to
> tip over with just iozone.
>
>
>
>
>
> I'm actively working on how to refactor this code base to use GDAL
> WriteBlock but in absence of a solution there I'm wondering if there's
> anyway to get GDAL writing using O_DIRECT?

You can also use regularly GDALFlushCacheBlock() to force dirty GDAL cached
blocks to be written. But a few drivers also have internal caching (for example
GTiff for pixel interleaved rasters), so you might also want to combine that
with GDALFlushCache(hDS).

To use O_DIRECT, you would need to change the implementation of
cpl_vsi_unix_stdio_64.cpp to use the open(), read(), etc.. API instead of
fopen(), fread(), etc... Unless there's a way to set O_DIRECT on FILE* ?

You cannot generally control the GDAL block size, unless this is offered as a
creation option by the format driver like the TILED, BLOCKXSIZE, BLOCKYSIZE
options of the GTiff driver.

Even

From alexandre.leroux at ec.gc.ca  Fri Dec 14 07:48:22 2012
From: alexandre.leroux at ec.gc.ca (Alexandre Leroux)
Date: Fri, 14 Dec 2012 15:48:22 +0000
Subject: [gdal-dev] Working with gdalwarp -dstalpha to add transparency to a
	GeoTIFF
Message-ID: <50CB4A46.90105@ec.gc.ca>

Hi list,

This should simple, but I failed to make it work. I simply want a black 
pixels in a RGB GeoTIFF to become transparent or white. Using GDAL 1.6.3.

I'm trying
	gdalwarp -srcnodata 0 -dstalpha in.tif out.tif

I also tried (since it's RGB)
	gdalwarp -srcnodata "0 0 0" -dstalpha in.tif out.tif

I always get
0...10...20...30...40...50...60...70...80...90...100 - done.
but no transparency is actually added to the output tif.

References:
http://www.gdal.org/gdalwarp.html
http://lists.maptools.org/pipermail/fwtools/2007-February/000691.html

Any clue what's missing?

Thanks a lot!

Alex
-- 
Alexandre Leroux, M.Sc., ing.
MSC Data Management Section /
Section de gestion des donn?es du SMC
Environment Canada / Environnement Canada
alexandre.leroux at ec.gc.ca - (514) 421-5024

From polimax at mail.ru  Fri Dec 14 10:22:48 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Fri, 14 Dec 2012 22:22:48 +0400
Subject: [gdal-dev] Overviews using GDAL
In-Reply-To: <1355469854703-5022926.post@n6.nabble.com>
References: <1355230713797-5022226.post@n6.nabble.com>
	<50C73CBE.9080906@mail.ru>
	<1355469854703-5022926.post@n6.nabble.com>
Message-ID: <50CB6E78.3040406@mail.ru>

Hi,

GDALDataset::RasterIO pass the  request off to each band objects 
rasterio methods with appropriate arguments
In  GDALRasterBand::RasterIO 
(http://www.gdal.org/classGDALRasterBand.html#a5497e8d29e743ee9177202cb3f61c3c7)

"Some formats may efficiently implement decimation into a buffer by 
reading from lower resolution overview images."

So you don't need to choose the right overview level by yourself. 
Usually it selected automatically. You can inspect GDAL sources for how 
it chosen. GDAL don't have the special function to find out which 
overview level is chosen.

Best regards,
     Dmitry

14.12.2012 11:24, HariPrasad ?????:
> Thanks Dmitry  for your replay.
>
> I did that using IRasterIO(), but non of the IRasterIO() parameters has
> which overview its displaying. (i.e overview number). How can i know which
> overview it has displayed?
>
> I used GetOverview(int). I was able to get the overview numbers. But when i
> zoomed to maximum the base image has to be displayed instead of overview if
> i am not wrong, which i am not getting the base image number.
>
> am iam thinking in right direction?
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Overviews-using-GDAL-tp5022226p5022926.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121214/0ffce068/attachment.html>

From Michael.Smith at maine.gov  Fri Dec 14 10:17:07 2012
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Fri, 14 Dec 2012 18:17:07 +0000
Subject: [gdal-dev] how to gdalwarp 4-band orthoimagery
Message-ID: <8927DBC1C0E7CB4A9823B7478829091D113813@OIT-TEAQEXMBX01.som.w2k.state.me.us>

Seems like this is a straightforward issue but finding it difficult to solve online.



I have a new crop of 4-band orthoimages, as GeoTIFFs.  I want to create mosaics of some tiles.  There is a slight pixel overlap at the edges.  When I run gdalwarp it always treats the 4th band as alpha, which causes the overlap edges to be lighter than everything else in the mosaic, creating an odd grid pattern were these edges were (when viewing the CIR bands 4-1-2).



How can I disable this treatment of the 4th band as alpha?



===============================
Michael Smith MS GISP
State GIS Manager, Maine Office of GIS
State of Maine, Office of Information Technology
michael.smith _at_ maine.gov
207-215-5530

Board Member, Maine GeoLibrary
Board Member, Maine GIS Users Group
State Rep, National States Geographic Information Council
[cid:image001.png at 01CDD9FD.50D40D40][icons]

***NOTE NEW ADDRESS***

State House Station 145
51 Commerce Drive
Augusta, ME 04333-0145
69o 47' 58.9"W  44o 21' 54.8"N


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121214/b857a116/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 198 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121214/b857a116/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 9032 bytes
Desc: image002.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121214/b857a116/attachment-0001.jpg>

From even.rouault at mines-paris.org  Fri Dec 14 10:48:12 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Dec 2012 19:48:12 +0100
Subject: [gdal-dev] how to gdalwarp 4-band orthoimagery
In-Reply-To: <8927DBC1C0E7CB4A9823B7478829091D113813@OIT-TEAQEXMBX01.som.w2k.state.me.us>
References: <8927DBC1C0E7CB4A9823B7478829091D113813@OIT-TEAQEXMBX01.som.w2k.state.me.us>
Message-ID: <201212141948.12495.even.rouault@mines-paris.org>

Le vendredi 14 d?cembre 2012 19:17:07, Smith, Michael a ?crit :
> Seems like this is a straightforward issue but finding it difficult to
> solve online.
> 
> 
> 
> I have a new crop of 4-band orthoimages, as GeoTIFFs.  I want to create
> mosaics of some tiles.  There is a slight pixel overlap at the edges. 
> When I run gdalwarp it always treats the 4th band as alpha, which causes
> the overlap edges to be lighter than everything else in the mosaic,
> creating an odd grid pattern were these edges were (when viewing the CIR
> bands 4-1-2).
> 
> 
> 
> How can I disable this treatment of the 4th band as alpha?

gdal_translate src.tif tmp.vrt -of VRT

and edit tmp.vrt to remove the   <ColorInterp>Alpha</ColorInterp> on the 4th 
band

or edit apps/gdalwarp.cpp and disable the following lines :


/* -------------------------------------------------------------------- */
/*      Do we have a source alpha band?                                 */
/* -------------------------------------------------------------------- */
        if( GDALGetRasterColorInterpretation( 
                GDALGetRasterBand(hSrcDS,GDALGetRasterCount(hSrcDS)) ) 
            == GCI_AlphaBand 
            && !bEnableSrcAlpha )
        {
            bEnableSrcAlpha = TRUE;
            if( !bQuiet )
                printf( "Using band %d of source image as alpha.\n", 
                        GDALGetRasterCount(hSrcDS) );
        }


> 
> 
> 
> ===============================
> Michael Smith MS GISP
> State GIS Manager, Maine Office of GIS
> State of Maine, Office of Information Technology
> michael.smith _at_ maine.gov
> 207-215-5530
> 
> Board Member, Maine GeoLibrary
> Board Member, Maine GIS Users Group
> State Rep, National States Geographic Information Council
> [cid:image001.png at 01CDD9FD.50D40D40][icons]
> 
> ***NOTE NEW ADDRESS***
> 
> State House Station 145
> 51 Commerce Drive
> Augusta, ME 04333-0145
> 69o 47' 58.9"W  44o 21' 54.8"N

From Michael.Smith at maine.gov  Fri Dec 14 12:33:42 2012
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Fri, 14 Dec 2012 20:33:42 +0000
Subject: [gdal-dev] how to gdalwarp 4-band orthoimagery
In-Reply-To: <201212141948.12495.even.rouault@mines-paris.org>
References: <8927DBC1C0E7CB4A9823B7478829091D113813@OIT-TEAQEXMBX01.som.w2k.state.me.us>
	<201212141948.12495.even.rouault@mines-paris.org>
Message-ID: <8927DBC1C0E7CB4A9823B7478829091D113952@OIT-TEAQEXMBX01.som.w2k.state.me.us>

Thanks Evan

BUT

Firstly in my binaries-only install I don't see any .cpp files

And secondly the other method (using VRTs) how would one then automate that (to do, say 1000 tiles in a script).  The editing of the VRT would be the tricky part.

======================================
Michael Smith MS GISP
State GIS Manager, Maine Office of GIS
State of Maine, Office of Information Technology
michael.smith _at_ maine.gov
207-215-5530

Board Member, Maine GeoLibrary
Board Member, Maine GIS Users Group
State Rep, National States Geographic Information Council

| MEGIS | GeoLibrary | MEGUG | NSGIC |

***NOTE NEW ADDRESS***

State House Station 145
51 Commerce Drive
Augusta, ME 04333-0145

69d 47' 58.9"W   44d 21' 54.8"N
-----Original Message-----
From: Even Rouault [mailto:even.rouault at mines-paris.org] 
Sent: Friday, December 14, 2012 1:48 PM
To: gdal-dev at lists.osgeo.org
Cc: Smith, Michael
Subject: Re: [gdal-dev] how to gdalwarp 4-band orthoimagery

Le vendredi 14 d?cembre 2012 19:17:07, Smith, Michael a ?crit :
> Seems like this is a straightforward issue but finding it difficult to
> solve online.
> 
> 
> 
> I have a new crop of 4-band orthoimages, as GeoTIFFs.  I want to create
> mosaics of some tiles.  There is a slight pixel overlap at the edges. 
> When I run gdalwarp it always treats the 4th band as alpha, which causes
> the overlap edges to be lighter than everything else in the mosaic,
> creating an odd grid pattern were these edges were (when viewing the CIR
> bands 4-1-2).
> 
> 
> 
> How can I disable this treatment of the 4th band as alpha?

gdal_translate src.tif tmp.vrt -of VRT

and edit tmp.vrt to remove the   <ColorInterp>Alpha</ColorInterp> on the 4th 
band

or edit apps/gdalwarp.cpp and disable the following lines :


/* -------------------------------------------------------------------- */
/*      Do we have a source alpha band?                                 */
/* -------------------------------------------------------------------- */
        if( GDALGetRasterColorInterpretation( 
                GDALGetRasterBand(hSrcDS,GDALGetRasterCount(hSrcDS)) ) 
            == GCI_AlphaBand 
            && !bEnableSrcAlpha )
        {
            bEnableSrcAlpha = TRUE;
            if( !bQuiet )
                printf( "Using band %d of source image as alpha.\n", 
                        GDALGetRasterCount(hSrcDS) );
        }


> 
> 
> 
> ===============================
> Michael Smith MS GISP
> State GIS Manager, Maine Office of GIS
> State of Maine, Office of Information Technology
> michael.smith _at_ maine.gov
> 207-215-5530
> 
> Board Member, Maine GeoLibrary
> Board Member, Maine GIS Users Group
> State Rep, National States Geographic Information Council
> [cid:image001.png at 01CDD9FD.50D40D40][icons]
> 
> ***NOTE NEW ADDRESS***
> 
> State House Station 145
> 51 Commerce Drive
> Augusta, ME 04333-0145
> 69o 47' 58.9"W  44o 21' 54.8"N

From even.rouault at mines-paris.org  Fri Dec 14 13:41:29 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Dec 2012 22:41:29 +0100
Subject: [gdal-dev] how to gdalwarp 4-band orthoimagery
In-Reply-To: <8927DBC1C0E7CB4A9823B7478829091D113952@OIT-TEAQEXMBX01.som.w2k.state.me.us>
References: <8927DBC1C0E7CB4A9823B7478829091D113813@OIT-TEAQEXMBX01.som.w2k.state.me.us>
	<201212141948.12495.even.rouault@mines-paris.org>
	<8927DBC1C0E7CB4A9823B7478829091D113952@OIT-TEAQEXMBX01.som.w2k.state.me.us>
Message-ID: <201212142241.29265.even.rouault@mines-paris.org>


> 
> And secondly the other method (using VRTs) how would one then automate that
> (to do, say 1000 tiles in a script).  The editing of the VRT would be the
> tricky part.

sed "s/<ColorInterp>Alpha<\/ColorInterp>//" should do it

But actually I think that if you just want to mosaic files in the same 
projection you could also use gdalbuildvrt

From tyler.mitchell at actian.com  Fri Dec 14 13:53:47 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Fri, 14 Dec 2012 13:53:47 -0800
Subject: [gdal-dev] Geosoft format?
Message-ID: <D49B2347-A26D-406F-8DFD-EB0519567061@actian.com>

Anyone looked at the trying to read in the geosoft.com file formats (.gdb) used in their mineral and oil/gas exploration software.  
They already have ERMapper and ArcGIS extensions as well as an SDK, though I don't know how deep it goes..

http://www.geosoft.com/support/downloads/developer-resources/gx-developer-toolkit

(May be based on some sort of CBD "mapbrowser" vector format?)

Sample available if you want to have a peek:
http://geo-demo.actian.com/maps/bell_gdb.zip

Tyler

Tyler Mitchell
Engineering Director 
Actian Corporation
tyler.mitchell at actian.com

MOBILE 250-303-1831
SKYPE spatialguru
www.actian.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121214/54f96121/attachment.html>

From ivan.lucena at princeton-ma.us  Fri Dec 14 16:21:55 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri, 14 Dec 2012 19:21:55 -0500
Subject: [gdal-dev] =?iso-8859-1?q?how_to_gdalwarp_4-band_orthoimagery?=
In-Reply-To: <8927DBC1C0E7CB4A9823B7478829091D113952@OIT-TEAQEXMBX01.som.w2k.state.me.us>
References: <8927DBC1C0E7CB4A9823B7478829091D113813@OIT-TEAQEXMBX01.som.w2k.state.me.us>
	<201212141948.12495.even.rouault@mines-paris.org>
	<8927DBC1C0E7CB4A9823B7478829091D113952@OIT-TEAQEXMBX01.som.w2k.state.me.us>
Message-ID: <20121215002155.23159.qmail@s466.sureserver.com>


gdal_translate -of VRT input.tif output.vrt -b 1 -b 2 -b 3

Mike, you can try to adapt that call to a for loop if it does what you expect.

>  -------Original Message-------
>  From: Smith, Michael <Michael.Smith at maine.gov>
>  To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
>  Subject: Re: [gdal-dev] how to gdalwarp 4-band orthoimagery
>  Sent: Dec 14 '12 15:33
>  
>  Thanks Evan
>  
>  BUT
>  
>  Firstly in my binaries-only install I don't see any .cpp files
>  
>  And secondly the other method (using VRTs) how would one then automate that (to do, 
say 1000 tiles in a script).??The editing of the VRT would be the tricky part.
>  
>  ======================================
>  Michael Smith MS GISP
>  State GIS Manager, Maine Office of GIS
>  State of Maine, Office of Information Technology
>  michael.smith _at_ maine.gov
>  207-215-5530
>  
>  Board Member, Maine GeoLibrary
>  Board Member, Maine GIS Users Group
>  State Rep, National States Geographic Information Council
>  
>  | MEGIS | GeoLibrary | MEGUG | NSGIC |
>  
>  ***NOTE NEW ADDRESS***
>  
>  State House Station 145
>  51 Commerce Drive
>  Augusta, ME 04333-0145
>  
>  69d 47' 58.9"W?? 44d 21' 54.8"N
>  -----Original Message-----
>  From: Even Rouault [mailto:even.rouault at mines-paris.org]
>  Sent: Friday, December 14, 2012 1:48 PM
>  To: gdal-dev at lists.osgeo.org
>  Cc: Smith, Michael
>  Subject: Re: [gdal-dev] how to gdalwarp 4-band orthoimagery
>  
>  Le vendredi 14 d?cembre 2012 19:17:07, Smith, Michael a ?crit :
>  > Seems like this is a straightforward issue but finding it difficult to
>  > solve online.
>  >
>  >
>  >
>  > I have a new crop of 4-band orthoimages, as GeoTIFFs.??I want to create
>  > mosaics of some tiles.??There is a slight pixel overlap at the edges.
>  > When I run gdalwarp it always treats the 4th band as alpha, which causes
>  > the overlap edges to be lighter than everything else in the mosaic,
>  > creating an odd grid pattern were these edges were (when viewing the CIR
>  > bands 4-1-2).
>  >
>  >
>  >
>  > How can I disable this treatment of the 4th band as alpha?
>  
>  gdal_translate src.tif tmp.vrt -of VRT
>  
>  and edit tmp.vrt to remove the?? <ColorInterp>Alpha</ColorInterp> on the 4th
>  band
>  
>  or edit apps/gdalwarp.cpp and disable the following lines :
>  
>  
>  /* -------------------------------------------------------------------- */
>  /*??????Do we have a source alpha band????????????????????????????????? */
>  /* -------------------------------------------------------------------- */
>  ????????if( GDALGetRasterColorInterpretation(
>  ????????????????GDALGetRasterBand(hSrcDS,GDALGetRasterCount(hSrcDS)) )
>  ????????????== GCI_AlphaBand
>  ????????????&& !bEnableSrcAlpha )
>  ????????{
>  ????????????bEnableSrcAlpha = TRUE;
>  ????????????if( !bQuiet )
>  ????????????????printf( "Using band %d of source image as alpha.\n",
>  ????????????????????????GDALGetRasterCount(hSrcDS) );
>  ????????}
>  
>  
>  >
>  >
>  >
>  > ===============================
>  > Michael Smith MS GISP
>  > State GIS Manager, Maine Office of GIS
>  > State of Maine, Office of Information Technology
>  > michael.smith _at_ maine.gov
>  > 207-215-5530
>  >
>  > Board Member, Maine GeoLibrary
>  > Board Member, Maine GIS Users Group
>  > State Rep, National States Geographic Information Council
>  > [cid:image001.png at 01CDD9FD.50D40D40][icons]
>  >
>  > ***NOTE NEW ADDRESS***
>  >
>  > State House Station 145
>  > 51 Commerce Drive
>  > Augusta, ME 04333-0145
>  > 69o 47' 58.9"W??44o 21' 54.8"N
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev at lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jan.heckman at gmail.com  Sat Dec 15 06:50:56 2012
From: jan.heckman at gmail.com (janhec)
Date: Sat, 15 Dec 2012 06:50:56 -0800 (PST)
Subject: [gdal-dev] GDAL GML driver and .xsd schema mapping
In-Reply-To: <loom.20111114T224104-692@post.gmane.org>
References: <84446DEF76453C439E9E97E438E13A6303C392@suutari.haapa.mmm.fi>
	<201111142025.10056.even.rouault@mines-paris.org>
	<loom.20111114T224104-692@post.gmane.org>
Message-ID: <1355583056740-5023212.post@n6.nabble.com>

Rahkonen Jukka wrote
> Even Rouault 
> <even.rouault <at>
>  mines-paris.org> writes:
> 
> ....
>> Hopefully the following should be enough :
>> 
>> r23378 /trunk/gdal/ogr/ogrsf_frmts/gml/ogrgmldatasource.cpp: GML: add
>> debug
> information to know if we use/generate .gfs file while there's a .xsd we
> ignore
>> 
>> I'm not sure it is a good idea to make it more verbose than a debug
>> trace.
> 
> Thanks, it will be enough for me. I am awaiting samples of other ready
> defined
> Inspire data products, they can be more painful than this authorative
> units
> dataset which has after all rather simple structure. 
> 
> -Jukka Rahkonen-

I had to use the debugger to discover that parsexsd.cpp breaks off when an
attribute has no explicit type assigned to it. I seem to remember that there
is a default (xsd:string) and suggest implementing this in the xsd parser.
Line 264 (1.9.1) could be:
if (pszType == NULL) pszType = "xsd:string";
if (pszType != NULL)
{
......

Of course, the NULL check could then be removed.
Jan Heckman



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-GDAL-GML-driver-and-xsd-schema-mapping-tp3742789p5023212.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jan.heckman at gmail.com  Sat Dec 15 10:28:06 2012
From: jan.heckman at gmail.com (janhec)
Date: Sat, 15 Dec 2012 10:28:06 -0800 (PST)
Subject: [gdal-dev] GDAL GML driver and .xsd schema mapping
In-Reply-To: <1355583056740-5023212.post@n6.nabble.com>
References: <84446DEF76453C439E9E97E438E13A6303C392@suutari.haapa.mmm.fi>
	<201111142025.10056.even.rouault@mines-paris.org>
	<loom.20111114T224104-692@post.gmane.org>
	<1355583056740-5023212.post@n6.nabble.com>
Message-ID: <1355596086756-5023229.post@n6.nabble.com>

janhec wrote
> I had to use the debugger to discover that parsexsd.cpp breaks off when an
> attribute has no explicit type assigned to it. I seem to remember that
> there is a default (xsd:string) and suggest implementing this in the xsd
> parser. Line 264 (1.9.1) could be:
> if (pszType == NULL) pszType = "xsd:string";
> if (pszType != NULL)
> {
> ......
> 
> Of course, the NULL check could then be removed.
> Jan Heckman

The above is somewhat misleading/incomplete.
Here is a diff (base 1.9.1) that checks envvar GML_DEFAULTFIELDTYPE for
assigning a default fieldtype if type is not specified in the schema. E.G.
GML_DEFAULTFIELDTYPE=STRING. Do not prefix, the code already does.
--------------------------start diff (winmerge)--------------------------
246c246,251
<     for( psAttrDef = psAttrSeq->psChild;
---
>     char *pszDefaultType=new char [48];
> 	sprintf(pszDefaultType,"xsd:%s",CPLGetConfigOption(
> "GML_DEFAULTFIELDTYPE", ""));
> 	if (pszDefaultType[4]=='\0') { delete [] pszDefaultType;
> pszDefaultType=NULL; }
> 	else CPLStrlwr(pszDefaultType);
> 
> 	for( psAttrDef = psAttrSeq->psChild;
260c265
<         /* MapServer WFS writes element type as an attribute of element */
---
> 		/* MapServer WFS writes element type as an attribute of element */
263a269
> 		if (pszElementName!=NULL && pszType == NULL) pszType=pszDefaultType;
-------------------end diff-------------------------



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-GDAL-GML-driver-and-xsd-schema-mapping-tp3742789p5023229.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From katieessadro at gmail.com  Sat Dec 15 11:09:54 2012
From: katieessadro at gmail.com (Katie Essadro)
Date: Sat, 15 Dec 2012 11:09:54 -0800 (PST)
Subject: [gdal-dev] gdal_retile.py bugs
Message-ID: <1355598594985-5023235.post@n6.nabble.com>

I believe I have found 2 bugs in gdale_retile.py:

1. It appears that gdal_retile.py does not honor alpha bands for masking
when merging images. At this link is an image which shows my two images
loaded separately as tiffs into google earth:

http://imgur.com/9HcFh

At this link is an image of the output of running gdal_retile.py on my two
images to form an image pyramid:

http://imgur.com/AuDOO

Here are the commands I run on the images to make the image pyramid:

gdal_translate -expand rgba 12Jun29_1643-f-17.tif
output12Jun29_1643-f-17.tif
gdal_translate -expand rgba 12Jun29_1643-f-18.tif
output12Jun29_1643-f-18.tif
gdalwarp output12Jun29_1643-f-17.tif finaloutput12Jun29_1643-f-17.tif
gdalwarp output12Jun29_1643-f-18.tif finaloutput12Jun29_1643-f-18.tif
gdal_retile.py -v -r bilinear -levels 4 -ps 2048 2048 -co "tiled=YES"
-targetDir testpyramid --optfile files.txt

If I explicitly mosaic the images first, and then feed the mosaic into
gdal_retile.py that will work, but this solution does not scale well.


2. gdal_retile.py expects that images are north-up, thus why I run the
gdalwarp on them before gdal_retile.py. 


Is this the correct forum for posting these bugs?

Thanks



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-retile-py-bugs-tp5023235.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From dlverbyla at alaska.edu  Sun Dec 16 05:30:06 2012
From: dlverbyla at alaska.edu (David Verbyla)
Date: Sun, 16 Dec 2012 04:30:06 -0900
Subject: [gdal-dev] OSR Python: SR.ImportFromEPSG(4326),
 SR.ImportFromESRI(strPrj) return null values
Message-ID: <CAJpuGQf5zJiTm3A1i_YiTwxbJSSBOuWXrzwKd5r0Y+frmdjG2A@mail.gmail.com>

I am a newbie to OGR/OSR using Python 2.7.2, please excuse my ignorance:

I'm having problems creating spatial reference using either .ImportFromEPSG
or .ImportFromESRI(prjfile string).
Yet .SetWellKnownGeogCS works fine.

from osgeo import ogr
import osr,os
testSR = osr.SpatialReference()
testSR.SetWellKnownGeogCS("WGS84")
print testSR.ExportToPrettyWkt()
#returns
#GEOGCS["WGS 84",
 #   DATUM["WGS_1984",
#....and so on...

testSR.ImportFromEPSG(4326)#returns 6
print testSR.ExportToPrettyWkt() #returns zero length string

prjFile = open('c:/test/GCS_WGS84.prj')
 strPrj  = prjFile.readline() #returns string with len 145
 testSR.ImportFromESRI(strPrj)#returns 5
 print testSR.ExportToPrettyWkt() #returns zero length string
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121216/f55beb7f/attachment.html>

From even.rouault at mines-paris.org  Sun Dec 16 05:49:05 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 16 Dec 2012 14:49:05 +0100
Subject: [gdal-dev] OSR Python: SR.ImportFromEPSG(4326),
	SR.ImportFromESRI(strPrj) return null values
In-Reply-To: <CAJpuGQf5zJiTm3A1i_YiTwxbJSSBOuWXrzwKd5r0Y+frmdjG2A@mail.gmail.com>
References: <CAJpuGQf5zJiTm3A1i_YiTwxbJSSBOuWXrzwKd5r0Y+frmdjG2A@mail.gmail.com>
Message-ID: <201212161449.06015.even.rouault@mines-paris.org>

Le dimanche 16 d?cembre 2012 14:30:06, David Verbyla a ?crit :
> I am a newbie to OGR/OSR using Python 2.7.2, please excuse my ignorance:
> 
> I'm having problems creating spatial reference using either .ImportFromEPSG
> or .ImportFromESRI(prjfile string).
> Yet .SetWellKnownGeogCS works fine.
> 
> from osgeo import ogr
> import osr,os
> testSR = osr.SpatialReference()
> testSR.SetWellKnownGeogCS("WGS84")
> print testSR.ExportToPrettyWkt()
> #returns
> #GEOGCS["WGS 84",
>  #   DATUM["WGS_1984",
> #....and so on...
> 
> testSR.ImportFromEPSG(4326)#returns 6

Works for me. My bet is that, in your configuration, the GDAL_DATA environement 
variable does not point to the path where the GDAL .csv files are stored.

> print testSR.ExportToPrettyWkt() #returns zero length string
> 
> prjFile = open('c:/test/GCS_WGS84.prj')
>  strPrj  = prjFile.readline() #returns string with len 145
>  testSR.ImportFromESRI(strPrj)#returns 5

Yes, ImportFromESRI() has a particular interface. It takes an array of 
strings, not a string.

So use  testSR.ImportFromESRI([strPrj])

>  print testSR.ExportToPrettyWkt() #returns zero length string

From volkmar.herbst at agricon.de  Mon Dec 17 04:13:14 2012
From: volkmar.herbst at agricon.de (Volkmar  Herbst Agricon)
Date: Mon, 17 Dec 2012 13:13:14 +0100
Subject: [gdal-dev] using gdal from c#
Message-ID: <016f01cddc4f$e403bdf0$ac0b39d0$@herbst@agricon.de>

Dear all,
I have a problem using gdal libraries (fwtools247) in .Net. I do need to
reference the library in .net 4.0. It works in 3.5 but not with framework
4.0. Is there any way to use the libs in 4.0? Or could you give us some
other suggestions how to overcome this problem?
Thanks in advance
Volkmar  

Volkmar Herbst
Datenportal
--------------------------------------------------------------??




From bontepaarden at gmail.com  Mon Dec 17 05:02:56 2012
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon, 17 Dec 2012 14:02:56 +0100
Subject: [gdal-dev] Unions shapefiles using ogr
Message-ID: <CAHNf2YTNHV-j3GBR+qqBQ_Yyss3Fgd=UBeSs0HGNt5Vdt5WpyA@mail.gmail.com>

Hi all,

How can I union several shapefiles into one using ogr?
I tried using the OGR Virtual Format and created a XML file similar to this:

<OGRVRTDataSource>
    <OGRVRTUnionLayer name="unionLayer">
        <OGRVRTLayer name="source1">
            <SrcDataSource>source1.shp</SrcDataSource>
        </OGRVRTLayer>
        <OGRVRTLayer name="source2">
            <SrcDataSource>source2.shp</SrcDataSource>
        </OGRVRTLayer>
    </OGRVRTUnionLayer>
</OGRVRTDataSource>

My next step was to call ogr2ogr to created the new file.
The above XML merges all shapes instead of performing an union.
How can I do a proper union using ogr?

Thanks,

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121217/dea865f2/attachment.html>

From even.rouault at mines-paris.org  Mon Dec 17 05:51:58 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 17 Dec 2012 14:51:58 +0100
Subject: [gdal-dev] Unions shapefiles using ogr
In-Reply-To: <CAHNf2YTNHV-j3GBR+qqBQ_Yyss3Fgd=UBeSs0HGNt5Vdt5WpyA@mail.gmail.com>
References: <CAHNf2YTNHV-j3GBR+qqBQ_Yyss3Fgd=UBeSs0HGNt5Vdt5WpyA@mail.gmail.com>
Message-ID: <1355752318.50cf237eac91d@imp.free.fr>

Selon Paul Meems <bontepaarden at gmail.com>:

> Hi all,
>
> How can I union several shapefiles into one using ogr?
> I tried using the OGR Virtual Format and created a XML file similar to this:
>
> <OGRVRTDataSource>
>     <OGRVRTUnionLayer name="unionLayer">
>         <OGRVRTLayer name="source1">
>             <SrcDataSource>source1.shp</SrcDataSource>
>         </OGRVRTLayer>
>         <OGRVRTLayer name="source2">
>             <SrcDataSource>source2.shp</SrcDataSource>
>         </OGRVRTLayer>
>     </OGRVRTUnionLayer>
> </OGRVRTDataSource>
>
> My next step was to call ogr2ogr to created the new file.
> The above XML merges all shapes instead of performing an union.

This depends on how you define union. In the OGR VRT, the UNION is similar to
the SQL UNION keyword, that is to say that the features of source2 will be
appended after the features of source1

> How can I do a proper union using ogr?

If you rather need a geometrical union ( ST_Union() ), then you can have a look
at Spatialite (through SQL SQLite dialect for example :
http://www.gdal.org/ogr/ogr_sql_sqlite.html ), or use the new OGR layer algebra
operations (see
http://www.gdal.org/ogr/ogr__api_8h.html#ac8edb8696c2b046370e29efdd73787f7 )

>
> Thanks,
>
> Paul
>



From bontepaarden at gmail.com  Mon Dec 17 05:57:56 2012
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon, 17 Dec 2012 14:57:56 +0100
Subject: [gdal-dev] Unions shapefiles using ogr
In-Reply-To: <1355752318.50cf237eac91d@imp.free.fr>
References: <CAHNf2YTNHV-j3GBR+qqBQ_Yyss3Fgd=UBeSs0HGNt5Vdt5WpyA@mail.gmail.com>
	<1355752318.50cf237eac91d@imp.free.fr>
Message-ID: <CAHNf2YQUfsMM1zUg15wToB=xpgVWVMALhsP2LS7Tag_E5OOq-Q@mail.gmail.com>

Thanks Even.

So this means I need to write my own application using the Union() from
GEOS and I cannot use it on the command line using OGR VRT?
That is OK, I can do that. Using existing utilities on the command line
seemed easier ;)

Thanks,
Paul




2012/12/17 Even Rouault <even.rouault at mines-paris.org>

> Selon Paul Meems <bontepaarden at gmail.com>:
>
> > Hi all,
> >
> > How can I union several shapefiles into one using ogr?
> > I tried using the OGR Virtual Format and created a XML file similar to
> this:
> >
> > <OGRVRTDataSource>
> >     <OGRVRTUnionLayer name="unionLayer">
> >         <OGRVRTLayer name="source1">
> >             <SrcDataSource>source1.shp</SrcDataSource>
> >         </OGRVRTLayer>
> >         <OGRVRTLayer name="source2">
> >             <SrcDataSource>source2.shp</SrcDataSource>
> >         </OGRVRTLayer>
> >     </OGRVRTUnionLayer>
> > </OGRVRTDataSource>
> >
> > My next step was to call ogr2ogr to created the new file.
> > The above XML merges all shapes instead of performing an union.
>
> This depends on how you define union. In the OGR VRT, the UNION is similar
> to
> the SQL UNION keyword, that is to say that the features of source2 will be
> appended after the features of source1
>
> > How can I do a proper union using ogr?
>
> If you rather need a geometrical union ( ST_Union() ), then you can have a
> look
> at Spatialite (through SQL SQLite dialect for example :
> http://www.gdal.org/ogr/ogr_sql_sqlite.html ), or use the new OGR layer
> algebra
> operations (see
> http://www.gdal.org/ogr/ogr__api_8h.html#ac8edb8696c2b046370e29efdd73787f7)
>
> >
> > Thanks,
> >
> > Paul
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121217/9b9893a9/attachment.html>

From even.rouault at mines-paris.org  Mon Dec 17 06:39:49 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 17 Dec 2012 15:39:49 +0100
Subject: [gdal-dev] Unions shapefiles using ogr
In-Reply-To: <CAHNf2YQUfsMM1zUg15wToB=xpgVWVMALhsP2LS7Tag_E5OOq-Q@mail.gmail.com>
References: <CAHNf2YTNHV-j3GBR+qqBQ_Yyss3Fgd=UBeSs0HGNt5Vdt5WpyA@mail.gmail.com>
	<1355752318.50cf237eac91d@imp.free.fr>
	<CAHNf2YQUfsMM1zUg15wToB=xpgVWVMALhsP2LS7Tag_E5OOq-Q@mail.gmail.com>
Message-ID: <1355755189.50cf2eb524f85@imp.free.fr>

Selon Paul Meems <bontepaarden at gmail.com>:

> Thanks Even.
>
> So this means I need to write my own application using the Union() from
> GEOS and I cannot use it on the command line using OGR VRT?
> That is OK, I can do that. Using existing utilities on the command line
> seemed easier ;)

You don't necesserarily need to write an application. You can use ogr2ogr -sql
"SELECT ST_Union(....)" -dialect sqlite if you have GDAL built with spatialite
support.

or if you can use Python for example, the OGR Layer algebra operations are
available. See
http://trac.osgeo.org/gdal/browser/trunk/autotest/ogr/ogr_layer_algebra.py for
example around line 119 (err = A.Union( B, C )). Writing a script that would use
those operations would be a good contribution if you are interested in.

From lcelati at latitude-geosystems.com  Mon Dec 17 09:53:51 2012
From: lcelati at latitude-geosystems.com (image)
Date: Mon, 17 Dec 2012 09:53:51 -0800 (PST)
Subject: [gdal-dev] image Compilation of Qgis 1.8 with gdal svn
	(Windows7_64bits)
In-Reply-To: <50C89A78.1090004@ualg.pt>
References: <1355269681541-5022355.post@n6.nabble.com>
	<50C89A78.1090004@ualg.pt>
Message-ID: <1355766831605-5023584.post@n6.nabble.com>

Hello,

Thank you for your message. I'll try to replace the dll files.
For information, i have wanted to rebuild qgis 1.8 with the last gdal
version in order to use the gdal postgis raster updates only availbales with
gdal from trunk (or gdal svn).
Developpers of gdal postgis raster told me that i am obliged to compile in a
first time gdal, then qgis targetting the gdal version.

Indeed Qgis compilation seems difficult and i can try to replace *dll files.
But could you tell me which files i can repla ? I send you by attachment a
SS representing the gdal postgis raster directory of my gdal svn version
already compiled. Moreover, i send you by attachement a SS representing the
directory of my qgis /bin. 

Thank you to throw light for me. Regards. 

Image.

gdal_svn_postgis_raster.JPG
<http://osgeo-org.1560.n6.nabble.com/file/n5023584/gdal_svn_postgis_raster.JPG>  
SS_qgis_gdal.jpeg.dll
<http://osgeo-org.1560.n6.nabble.com/file/n5023584/SS_qgis_gdal.jpeg.dll>  



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Compilation-of-Qgis-1-8-with-gdal-svn-Windows7-64bits-tp5022355p5023584.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From woodbri at swoodbridge.com  Mon Dec 17 11:50:27 2012
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon, 17 Dec 2012 14:50:27 -0500
Subject: [gdal-dev] Q: on gdalwarp of ecw file
Message-ID: <50CF7783.5030608@swoodbridge.com>

Hi all,

I have an ECW file, see gdal info below.  I need to reproject this into 
EPSG:900913 or EPSG:3857

Do I need a key to make the output file ECW?

The performance vs size when zooming out is impressive with ECW, but it 
does not look like I have ability to create ECW. Are there better 
formats then GTif in the list below?


$ gdalwarp -t_srs EPSG:900913 -of GTiff -co TILED=YES -co COMPRESS=JPEG 
Saraji_South.ecw Saraji_South-900913.tif
Creating output file that is 34551P x 32332L.
Processing input file Saraji_South.ecw.
0...10...

This seems to be working, I suspect this will bulk up after I add overviews.

Thanks,
   -Steve

$ gdalinfo --formats | grep ECW
   ECW (rw): ERDAS Compressed Wavelets (SDK 3.x)
   JP2ECW (rw+v): ERDAS JPEG2000 (SDK 3.x)

i$ gdalwarp -t_srs EPSG:900913 -of ECW Saraji_South.ecw 
Saraji_South-900913.ecw
Output driver `ECW' not recognised or does not support
direct output file creation.  The following format drivers are configured
and support direct output:
   VRT: Virtual Raster
   GTiff: GeoTIFF
   NITF: National Imagery Transmission Format
   HFA: Erdas Imagine Images (.img)
   ELAS: ELAS
   MEM: In Memory Raster
   BMP: MS Windows Device Independent Bitmap
   PCIDSK: PCIDSK Database File
   ILWIS: ILWIS Raster Map
   SGI: SGI Image File Format 1.0
   Leveller: Leveller heightfield
   Terragen: Terragen heightfield
   netCDF: Network Common Data Format
   HDF4Image: HDF4 Dataset
   ISIS2: USGS Astrogeology ISIS cube (Version 2)
   ERS: ERMapper .ers Labelled
   JP2ECW: ERDAS JPEG2000 (SDK 3.x)
   RMF: Raster Matrix Format
   RST: Idrisi Raster A.1
   INGR: Intergraph Raster
   GSBG: Golden Software Binary Grid (.grd)
   PNM: Portable Pixmap Format (netpbm)
   ENVI: ENVI .hdr Labelled
   EHdr: ESRI .hdr Labelled
   PAux: PCI .aux Labelled
   MFF: Vexcel MFF Raster
   MFF2: Vexcel MFF2 (HKV) Raster
   BT: VTP .bt (Binary Terrain) 1.3 Format
   LAN: Erdas .LAN/.GIS
   IDA: Image Data and Analysis
   GTX: NOAA Vertical Datum .GTX
   NTv2: NTv2 Datum Grid Shift
   ADRG: ARC Digitized Raster Graphics
   SAGA: SAGA GIS Binary Grid (.sdat)


$ gdalinfo Saraji_South.ecw
Driver: ECW/ERDAS Compressed Wavelets (SDK 3.x)
Files: Saraji_South.ecw
        Saraji_South.eww
Size is 34361, 31930
Coordinate System is:
PROJCS["SUTM55",
     GEOGCS["AUSTRALIAN GEODETIC",
         DATUM["AGD66",
             SPHEROID["ANS",6378160,298.25]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",147],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",10000000],
     UNIT["Meter",1]]
Origin = (627267.025999999954365,7521500.000000000000000)
Pixel Size = (0.500000000000000,-0.500000000000000)
Corner Coordinates:
Upper Left  (  627267.026, 7521500.000) (148d14'11.23"E, 22d24'28.15"S)
Lower Left  (  627267.026, 7505535.000) (148d14'15.84"E, 22d33' 7.25"S)
Upper Right (  644447.526, 7521500.000) (148d24'11.99"E, 22d24'23.24"S)
Lower Right (  644447.526, 7505535.000) (148d24'17.23"E, 22d33' 2.31"S)
Center      (  635857.276, 7513517.500) (148d19'14.07"E, 22d28'45.31"S)
Band 1 Block=34361x1 Type=Byte, ColorInterp=Red
   Overviews: 17180x15965, 8590x7982, 4295x3991, 2147x1995, 1073x997, 
536x498, 268x249
Band 2 Block=34361x1 Type=Byte, ColorInterp=Green
   Overviews: 17180x15965, 8590x7982, 4295x3991, 2147x1995, 1073x997, 
536x498, 268x249
Band 3 Block=34361x1 Type=Byte, ColorInterp=Blue
   Overviews: 17180x15965, 8590x7982, 4295x3991, 2147x1995, 1073x997, 
536x498, 268x249

From even.rouault at mines-paris.org  Mon Dec 17 12:14:41 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 17 Dec 2012 21:14:41 +0100
Subject: [gdal-dev] Q: on gdalwarp of ecw file
In-Reply-To: <50CF7783.5030608@swoodbridge.com>
References: <50CF7783.5030608@swoodbridge.com>
Message-ID: <201212172114.41805.even.rouault@mines-paris.org>

Le lundi 17 d?cembre 2012 20:50:27, Stephen Woodbridge a ?crit :
> Hi all,
> 
> I have an ECW file, see gdal info below.  I need to reproject this into
> EPSG:900913 or EPSG:3857
> 
> Do I need a key to make the output file ECW?

If you use SDK 4.x, yes. With SDK 3.X if the image was < 500 MB, you didn't 
need a licence.

> 
> The performance vs size when zooming out is impressive with ECW, but it
> does not look like I have ability to create ECW. Are there better
> formats then GTif in the list below?

JPEG2000 or MrSID are somewhat similar to ECW.

> 
> 
> $ gdalwarp -t_srs EPSG:900913 -of GTiff -co TILED=YES -co COMPRESS=JPEG
> Saraji_South.ecw Saraji_South-900913.tif
> Creating output file that is 34551P x 32332L.
> Processing input file Saraji_South.ecw.
> 0...10...

I'd recommand also adding -co PHOTOMETRIC=YCBCR that will make the resulting 
file typically 2 to 3 times smaller (at the expense of some quality loss of 
course)

See "About JPEG compression of RGB images" section of 
http://gdal.org/frmt_gtiff.html

> 
> This seems to be working, I suspect this will bulk up after I add
> overviews.

Yes, with overviews you should have good performance.

From lcelati at latitude-geosystems.com  Mon Dec 17 13:33:38 2012
From: lcelati at latitude-geosystems.com (image)
Date: Mon, 17 Dec 2012 13:33:38 -0800 (PST)
Subject: [gdal-dev] image Compilation of Qgis 1.8 with gdal svn
	(Windows7_64bits)
In-Reply-To: <1355766831605-5023584.post@n6.nabble.com>
References: <1355269681541-5022355.post@n6.nabble.com>
	<50C89A78.1090004@ualg.pt>
	<1355766831605-5023584.post@n6.nabble.com>
Message-ID: <1355780018226-5023624.post@n6.nabble.com>

Hello,

Thank you for your reply. For information, The currently qgis version has
been installed
via OSGeo4W_install (advanced install).

1.Ok i installed the "Dependency Walker"
2.I loaded in the Dependency walker the qgis.exe located in
C:\OSGeo4W\apps\qgis\bin. I
have a few error messages when i load the file. Please find in attachment
the SS
representing the interface & error messages.As you know  this qgis version
has been
installed via OSGeo4W_install (advanced install). If this method of
installation may
explain those error meessages, i can uninstall it & install again qgis this
time with the
classic install (binaries) way if it's necessary...?
3. I found the nmake.opt at C:\OSGeo4W\usr\src\src\gdal-1.9.2. I send you by
attachment
this file. Sorry but i have a doubt regarding the edition of the file. Could
you give me
details regarding this step please?


Thank you to throw light for me.
Regards.

SS_error_message_dependance_walker.JPG
<http://osgeo-org.1560.n6.nabble.com/file/n5023624/SS_error_message_dependance_walker.JPG>  
nmake.opt <http://osgeo-org.1560.n6.nabble.com/file/n5023624/nmake.opt>  





--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Compilation-of-Qgis-1-8-with-gdal-svn-Windows7-64bits-tp5022355p5023624.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From woodbri at swoodbridge.com  Mon Dec 17 13:35:08 2012
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon, 17 Dec 2012 16:35:08 -0500
Subject: [gdal-dev] Q: on gdalwarp of ecw file
In-Reply-To: <201212172114.41805.even.rouault@mines-paris.org>
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
Message-ID: <50CF900C.1060003@swoodbridge.com>

On 12/17/2012 3:14 PM, Even Rouault wrote:
> Le lundi 17 d?cembre 2012 20:50:27, Stephen Woodbridge a ?crit :
>> Hi all,
>>
>> I have an ECW file, see gdal info below.  I need to reproject this into
>> EPSG:900913 or EPSG:3857
>>
>> Do I need a key to make the output file ECW?
>
> If you use SDK 4.x, yes. With SDK 3.X if the image was < 500 MB, you didn't
> need a licence.

OK, So it looks like I have SDK 3.x:

$ gdalinfo --formats | grep ECW
   ECW (rw): ERDAS Compressed Wavelets (SDK 3.x)
   JP2ECW (rw+v): ERDAS JPEG2000 (SDK 3.x)

So this implies I have rw capabilities, but when I try:

$ gdalwarp -t_srs EPSG:900913 -of ECW Saraji_South.ecw 
Saraji_South-900913.ecw                                    Output driver 
`ECW' not recognised or does not support
direct output file creation.  The following format drivers are configured
and support direct output:
...
JP2ECW: ERDAS JPEG2000 (SDK 3.x)
...

but ECW is not in the list. Am I doing this wrong?

If I try this on my file:

ls -lh Saraji_South.ecw
-rw-r--r-- 1 woodbri woodbri 220M 2012-12-17 10:47 Saraji_South.ecw

$ gdalwarp -t_srs EPSG:900913 -of JP2ECW Saraji_South.ecw 
Saraji_South-900913.jp2
Creating output file that is 34551P x 32332L.
Processing input file Saraji_South.ecw.
0ERROR 1: ECW SDK 500MB compress limit exceeded.
ERROR 1: ECW SDK 500MB compress limit exceeded.
ERROR 1: ECW SDK 500MB compress limit exceeded.
ERROR 1: An error occured while writing a dirty block
ERROR 1: Saraji_South-900913.jp2, band 2: An error occured while writing 
a dirty block
ERROR 1: Saraji_South-900913.jp2, band 3: An error occured while writing 
a dirty block

ok, so this must mean the uncompressed file needs to be less than 500MB.

Second problem, when I try to convert it to a tif it always dies like this:

$ gdalwarp -t_srs EPSG:900913 -of GTiff -co TILED=YES -co COMPRESS=JPEG 
-co PHOTOMETRIC=YCBCR Saraji_South.ecw Saraji_South-900913.tif
Creating output file that is 34551P x 32332L.
Processing input file Saraji_South.ecw.
0...10...20..ERROR 1: Could not perform Read/Write on file

$ gdalinfo --version
GDAL 1.9.0, released 2011/12/29


Any thoughts on this?

Thanks,
   -Steve

>>
>> The performance vs size when zooming out is impressive with ECW, but it
>> does not look like I have ability to create ECW. Are there better
>> formats then GTif in the list below?
>
> JPEG2000 or MrSID are somewhat similar to ECW.
>
>>
>>
>> $ gdalwarp -t_srs EPSG:900913 -of GTiff -co TILED=YES -co COMPRESS=JPEG
>> Saraji_South.ecw Saraji_South-900913.tif
>> Creating output file that is 34551P x 32332L.
>> Processing input file Saraji_South.ecw.
>> 0...10...
>
> I'd recommand also adding -co PHOTOMETRIC=YCBCR that will make the resulting
> file typically 2 to 3 times smaller (at the expense of some quality loss of
> course)
>
> See "About JPEG compression of RGB images" section of
> http://gdal.org/frmt_gtiff.html
>
>>
>> This seems to be working, I suspect this will bulk up after I add
>> overviews.
>
> Yes, with overviews you should have good performance.
>


From even.rouault at mines-paris.org  Mon Dec 17 13:54:13 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 17 Dec 2012 22:54:13 +0100
Subject: [gdal-dev] Q: on gdalwarp of ecw file
In-Reply-To: <50CF900C.1060003@swoodbridge.com>
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
	<50CF900C.1060003@swoodbridge.com>
Message-ID: <201212172254.13746.even.rouault@mines-paris.org>

> 
> $ gdalwarp -t_srs EPSG:900913 -of ECW Saraji_South.ecw
> Saraji_South-900913.ecw                                    Output driver
> `ECW' not recognised or does not support
> direct output file creation.  The following format drivers are configured
> and support direct output:
> ...
> JP2ECW: ERDAS JPEG2000 (SDK 3.x)
> ...
> 
> but ECW is not in the list. Am I doing this wrong?

Nothing, but ECW does not support the Create() interface needed by gdalwarp. 
You could gdalwarp to a VRT file and then gdal_translate it into ECW

> 
> If I try this on my file:
> 
> ls -lh Saraji_South.ecw
> -rw-r--r-- 1 woodbri woodbri 220M 2012-12-17 10:47 Saraji_South.ecw
> 
> $ gdalwarp -t_srs EPSG:900913 -of JP2ECW Saraji_South.ecw
> Saraji_South-900913.jp2
> Creating output file that is 34551P x 32332L.
> Processing input file Saraji_South.ecw.
> 0ERROR 1: ECW SDK 500MB compress limit exceeded.
> ERROR 1: ECW SDK 500MB compress limit exceeded.
> ERROR 1: ECW SDK 500MB compress limit exceeded.
> ERROR 1: An error occured while writing a dirty block
> ERROR 1: Saraji_South-900913.jp2, band 2: An error occured while writing
> a dirty block
> ERROR 1: Saraji_South-900913.jp2, band 3: An error occured while writing
> a dirty block
> 
> ok, so this must mean the uncompressed file needs to be less than 500MB.

Yes, and using JP2ECW driver with .ecw extension probably confuses the driver 
on whether you want ECW or JPEG2000

> 
> Second problem, when I try to convert it to a tif it always dies like this:
> 
> $ gdalwarp -t_srs EPSG:900913 -of GTiff -co TILED=YES -co COMPRESS=JPEG
> -co PHOTOMETRIC=YCBCR Saraji_South.ecw Saraji_South-900913.tif
> Creating output file that is 34551P x 32332L.
> Processing input file Saraji_South.ecw.
> 0...10...20..ERROR 1: Could not perform Read/Write on file

Hum, did you check if you have enough disk space ?

From woodbri at swoodbridge.com  Mon Dec 17 14:02:44 2012
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon, 17 Dec 2012 17:02:44 -0500
Subject: [gdal-dev] Q: on gdalwarp of ecw file
In-Reply-To: <201212172254.13746.even.rouault@mines-paris.org>
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
	<50CF900C.1060003@swoodbridge.com>
	<201212172254.13746.even.rouault@mines-paris.org>
Message-ID: <50CF9684.90108@swoodbridge.com>

On 12/17/2012 4:54 PM, Even Rouault wrote:
>>
>> $ gdalwarp -t_srs EPSG:900913 -of ECW Saraji_South.ecw
>> Saraji_South-900913.ecw                                    Output driver
>> `ECW' not recognised or does not support
>> direct output file creation.  The following format drivers are configured
>> and support direct output:
>> ...
>> JP2ECW: ERDAS JPEG2000 (SDK 3.x)
>> ...
>>
>> but ECW is not in the list. Am I doing this wrong?
>
> Nothing, but ECW does not support the Create() interface needed by gdalwarp.
> You could gdalwarp to a VRT file and then gdal_translate it into ECW
>
>>
>> If I try this on my file:
>>
>> ls -lh Saraji_South.ecw
>> -rw-r--r-- 1 woodbri woodbri 220M 2012-12-17 10:47 Saraji_South.ecw
>>
>> $ gdalwarp -t_srs EPSG:900913 -of JP2ECW Saraji_South.ecw
>> Saraji_South-900913.jp2
>> Creating output file that is 34551P x 32332L.
>> Processing input file Saraji_South.ecw.
>> 0ERROR 1: ECW SDK 500MB compress limit exceeded.
>> ERROR 1: ECW SDK 500MB compress limit exceeded.
>> ERROR 1: ECW SDK 500MB compress limit exceeded.
>> ERROR 1: An error occured while writing a dirty block
>> ERROR 1: Saraji_South-900913.jp2, band 2: An error occured while writing
>> a dirty block
>> ERROR 1: Saraji_South-900913.jp2, band 3: An error occured while writing
>> a dirty block
>>
>> ok, so this must mean the uncompressed file needs to be less than 500MB.
>
> Yes, and using JP2ECW driver with .ecw extension probably confuses the driver
> on whether you want ECW or JPEG2000
>
>>
>> Second problem, when I try to convert it to a tif it always dies like this:
>>
>> $ gdalwarp -t_srs EPSG:900913 -of GTiff -co TILED=YES -co COMPRESS=JPEG
>> -co PHOTOMETRIC=YCBCR Saraji_South.ecw Saraji_South-900913.tif
>> Creating output file that is 34551P x 32332L.
>> Processing input file Saraji_South.ecw.
>> 0...10...20..ERROR 1: Could not perform Read/Write on file
>
> Hum, did you check if you have enough disk space ?
>
target disk has 200GB but maybe the /tmp is small, is there a way to set 
an environment variable to open tmp file elsewhere?

-Steve

From woodbri at swoodbridge.com  Mon Dec 17 14:54:23 2012
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon, 17 Dec 2012 17:54:23 -0500
Subject: [gdal-dev] Q: on gdalwarp of ecw file
In-Reply-To: <50CF9684.90108@swoodbridge.com>
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
	<50CF900C.1060003@swoodbridge.com>
	<201212172254.13746.even.rouault@mines-paris.org>
	<50CF9684.90108@swoodbridge.com>
Message-ID: <50CFA29F.4090808@swoodbridge.com>

On 12/17/2012 5:02 PM, Stephen Woodbridge wrote:
> On 12/17/2012 4:54 PM, Even Rouault wrote:
>>>
>>> Second problem, when I try to convert it to a tif it always dies like
>>> this:
>>>
>>> $ gdalwarp -t_srs EPSG:900913 -of GTiff -co TILED=YES -co COMPRESS=JPEG
>>> -co PHOTOMETRIC=YCBCR Saraji_South.ecw Saraji_South-900913.tif
>>> Creating output file that is 34551P x 32332L.
>>> Processing input file Saraji_South.ecw.
>>> 0...10...20..ERROR 1: Could not perform Read/Write on file
>>
>> Hum, did you check if you have enough disk space ?
>>
> target disk has 200GB but maybe the /tmp is small, is there a way to set
> an environment variable to open tmp file elsewhere?

Hi Even,

This is not related to disk space. I just monitored with df and there 
were no problems, and not even a close call on space.

gdalwarp creates the file and actually writes some to it:

$ gdalwarp --config CPL_TMPDIR . -t_srs EPSG:900913 -of GTiff -co 
TILED=YES -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR Saraji_South.ecw 
Saraji_South-900913.tif
Creating output file that is 34551P x 32332L.
Processing input file Saraji_South.ecw.
0...10...20..ERROR 1: Could not perform Read/Write on file

ls -l Saraji_South-900913.tif
-rw-r--r--  1 woodbri woodbri  57130007 2012-12-17 17:43 
Saraji_South-900913.tif


I renamed the file and run the command again, it creates another file of 
exactly the same size.

-rw-r--r-- 1 woodbri woodbri  57130007 2012-12-17 17:57 
Saraji_South-900913a.tif
-rw-r--r-- 1 woodbri woodbri  57130007 2012-12-17 17:43 
Saraji_South-900913.tif

And they appear to byte for byte identical using cmp.

Thanks,
   -Steve

From even.rouault at mines-paris.org  Mon Dec 17 15:06:01 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 18 Dec 2012 00:06:01 +0100
Subject: [gdal-dev] Q: on gdalwarp of ecw file
In-Reply-To: <50CFA29F.4090808@swoodbridge.com>
References: <50CF7783.5030608@swoodbridge.com> <50CF9684.90108@swoodbridge.com>
	<50CFA29F.4090808@swoodbridge.com>
Message-ID: <201212180006.01114.even.rouault@mines-paris.org>

> 
> $ gdalwarp --config CPL_TMPDIR . -t_srs EPSG:900913 -of GTiff -co
> TILED=YES -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR Saraji_South.ecw
> Saraji_South-900913.tif
> Creating output file that is 34551P x 32332L.
> Processing input file Saraji_South.ecw.
> 0...10...20..ERROR 1: Could not perform Read/Write on file

A grep in the ECW SDK code source shows that thhis error messages actuallys 
comes from it. So it is indeed not related to the write side of the operation. 
Are you sure that the ecw file is not corrupted ?

From woodbri at swoodbridge.com  Mon Dec 17 15:39:29 2012
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon, 17 Dec 2012 18:39:29 -0500
Subject: [gdal-dev] Q: on gdalwarp of ecw file
In-Reply-To: <201212180006.01114.even.rouault@mines-paris.org>
References: <50CF7783.5030608@swoodbridge.com> <50CF9684.90108@swoodbridge.com>
	<50CFA29F.4090808@swoodbridge.com>
	<201212180006.01114.even.rouault@mines-paris.org>
Message-ID: <50CFAD31.9030406@swoodbridge.com>

On 12/17/2012 6:06 PM, Even Rouault wrote:
>>
>> $ gdalwarp --config CPL_TMPDIR . -t_srs EPSG:900913 -of GTiff -co
>> TILED=YES -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR Saraji_South.ecw
>> Saraji_South-900913.tif
>> Creating output file that is 34551P x 32332L.
>> Processing input file Saraji_South.ecw.
>> 0...10...20..ERROR 1: Could not perform Read/Write on file
>
> A grep in the ECW SDK code source shows that thhis error messages actuallys
> comes from it. So it is indeed not related to the write side of the operation.
> Are you sure that the ecw file is not corrupted ?
>

I am coming to the conclusion that it is indeed corrupt.

$ gdal_translate -of GTiff -co TILED=YES Saraji_South.ecw Saraji_South.tif
Input file size is 34361, 31930
0...10...20...30ERROR 1: Could not perform Read/Write on file

this got a little farther but died also.

Thanks you for looking into this. I appreciate the support. I'll request 
a new image. and see if that will work.

Thanks again,
   -Steve

From jluis at ualg.pt  Mon Dec 17 18:29:33 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue, 18 Dec 2012 02:29:33 +0000
Subject: [gdal-dev] image Compilation of Qgis 1.8 with gdal svn
	(Windows7_64bits)
In-Reply-To: <1355780018226-5023624.post@n6.nabble.com>
References: <1355269681541-5022355.post@n6.nabble.com>
	<50C89A78.1090004@ualg.pt>
	<1355766831605-5023584.post@n6.nabble.com>
	<1355780018226-5023624.post@n6.nabble.com>
Message-ID: <50CFD50D.9010607@ualg.pt>


2. The errors shown at this step are not really errors. They show up 
like that because the Dependency could not find them since the directory 
where they reside is not on your system's path (qgis works because a 
batch file sets the path before calling the qgis.exe). So basically, 
don't worry about them

3. Sorry, this is more difficult. You said in your first mail that you 
had built the GDAL dev and to do that one must know how to change the 
nmake.opt file. Not that it's difficult, but are you able to build the 
GDAL SVN (dev)? Because if you didn't this whole exercise is pointless.
(but to answer the question, just set
VERSION = 19
)

> Hello,
>
> Thank you for your reply. For information, The currently qgis version has
> been installed
> via OSGeo4W_install (advanced install).
>
> 1.Ok i installed the "Dependency Walker"
> 2.I loaded in the Dependency walker the qgis.exe located in
> C:\OSGeo4W\apps\qgis\bin. I
> have a few error messages when i load the file. Please find in attachment
> the SS
> representing the interface&  error messages.As you know  this qgis version
> has been
> installed via OSGeo4W_install (advanced install). If this method of
> installation may
> explain those error meessages, i can uninstall it&  install again qgis this
> time with the
> classic install (binaries) way if it's necessary...?
> 3. I found the nmake.opt at C:\OSGeo4W\usr\src\src\gdal-1.9.2. I send you by
> attachment
> this file. Sorry but i have a doubt regarding the edition of the file. Could
> you give me
> details regarding this step please?
>
>
> Thank you to throw light for me.
> Regards.
>
> SS_error_message_dependance_walker.JPG
> <http://osgeo-org.1560.n6.nabble.com/file/n5023624/SS_error_message_dependance_walker.JPG>
> nmake.opt<http://osgeo-org.1560.n6.nabble.com/file/n5023624/nmake.opt>
>
>
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Compilation-of-Qgis-1-8-with-gdal-svn-Windows7-64bits-tp5022355p5023624.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From j.l.h.hartmann at uva.nl  Tue Dec 18 01:26:30 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 18 Dec 2012 10:26:30 +0100
Subject: [gdal-dev] Q: on gdalwarp of ecw file
In-Reply-To: <201212172114.41805.even.rouault@mines-paris.org>
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
Message-ID: <50D036C6.2080406@uva.nl>


On 12/17/2012 09:14 PM, Even Rouault wrote:
> The performance vs size when zooming out is impressive with ECW, but it
> does not look like I have ability to create ECW. Are there better
> formats then GTif in the list below?
> JPEG2000 or MrSID are somewhat similar to ECW.
>
>
Hi Even, are there any benchmarks to compare (uncompressed) gtif with 
the three formats above? My production maps are always tiled to 
2000*2000 pixels, all zoomlevels precomputed. Very efficient with 
uncompresssed gtif, but they take lots of space. How much slower are 
these formats?

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121218/6813fa60/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Dec 18 03:33:21 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 18 Dec 2012 11:33:21 +0000 (UTC)
Subject: [gdal-dev] Q: on gdalwarp of ecw file
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
	<50D036C6.2080406@uva.nl>
Message-ID: <loom.20121218T115628-779@post.gmane.org>

Jan Hartmann <j.l.h.hartmann <at> uva.nl> writes:


>     Hi Even, are there any
>       benchmarks to compare (uncompressed) gtif with the three formats
>       above? My production maps are always tiled to 2000*2000 pixels,
>       all zoomlevels precomputed. Very efficient with uncompresssed
>       gtif, but they take lots of space. How much slower are these
>       formats?
>       Jan 

Hi,

Here are some 6 years old numbers from some Mapserver tests:
http://permalink.gmane.org/gmane.comp.gis.mapserver.user/23540

The speed feels now rather slow compared with the feeling I have from our recent
services but differences may be alike. Or then they are not because drivers are
not the same anymore and new hardware can suit better for one than for another.

We are using aerial images mostly as JPEG compressed tiffs now but I have not
bothered to do any timings lately. They save 90-95% of disk space, they are not
much slower and users have not noticed the difference in quality so for us the
choice was pretty easy.

It is usually too simplified to say that some file format is slower that some
other because there are so many other factors also in play. JPEG200O is an
infamous example. It is a complicated file format and many software are very
slow with big geospatial JPEG2000 images, but there are applications which can
handle them very fast. Sluggish software does not necessarily mean that the
format itself is slow. Six year old numbers 270/120/24 images per minute for
tiff, ECW, and JPG2000 with Kakadu prove mainly that there must have been
something wrong in how Kakadu and GDAL were working together at that time.

You can get the best information about the real speed in your environment by
making your own tests. Others will praise you later if you make controlled tests
and publish the arrangement and results somewhere for future references.
Unfortunately I do not remember myself how I did my own tests but I believe I
was using FWTools 2.0.4 binaries. 




From j.l.h.hartmann at uva.nl  Tue Dec 18 03:47:02 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 18 Dec 2012 12:47:02 +0100
Subject: [gdal-dev] Q: on gdalwarp of ecw file
In-Reply-To: <loom.20121218T115628-779@post.gmane.org>
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
	<50D036C6.2080406@uva.nl> <loom.20121218T115628-779@post.gmane.org>
Message-ID: <50D057B6.5060001@uva.nl>

Thanks Jukka, very informative. I'll start with jpeg compressed tiffs 
and will do additional tests next year. I'm on a Cloud environment 
nowadays, so it's easy to set up clean VMs for testing. Any suggestions 
for experiments with different raster formats would be very welcome.

Jan

On 12/18/2012 12:33 PM, Jukka Rahkonen wrote:
> Jan Hartmann <j.l.h.hartmann <at> uva.nl> writes:
>
>
>>      Hi Even, are there any
>>        benchmarks to compare (uncompressed) gtif with the three formats
>>        above? My production maps are always tiled to 2000*2000 pixels,
>>        all zoomlevels precomputed. Very efficient with uncompresssed
>>        gtif, but they take lots of space. How much slower are these
>>        formats?
>>        Jan
> Hi,
>
> Here are some 6 years old numbers from some Mapserver tests:
> http://permalink.gmane.org/gmane.comp.gis.mapserver.user/23540
>
> The speed feels now rather slow compared with the feeling I have from our recent
> services but differences may be alike. Or then they are not because drivers are
> not the same anymore and new hardware can suit better for one than for another.
>
> We are using aerial images mostly as JPEG compressed tiffs now but I have not
> bothered to do any timings lately. They save 90-95% of disk space, they are not
> much slower and users have not noticed the difference in quality so for us the
> choice was pretty easy.
>
> It is usually too simplified to say that some file format is slower that some
> other because there are so many other factors also in play. JPEG200O is an
> infamous example. It is a complicated file format and many software are very
> slow with big geospatial JPEG2000 images, but there are applications which can
> handle them very fast. Sluggish software does not necessarily mean that the
> format itself is slow. Six year old numbers 270/120/24 images per minute for
> tiff, ECW, and JPG2000 with Kakadu prove mainly that there must have been
> something wrong in how Kakadu and GDAL were working together at that time.
>
> You can get the best information about the real speed in your environment by
> making your own tests. Others will praise you later if you make controlled tests
> and publish the arrangement and results somewhere for future references.
> Unfortunately I do not remember myself how I did my own tests but I believe I
> was using FWTools 2.0.4 binaries.
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121218/735ea955/attachment.html>

From Michael.Smith at erdc.dren.mil  Tue Dec 18 03:59:00 2012
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Tue, 18 Dec 2012 11:59:00 +0000
Subject: [gdal-dev] Q: on gdalwarp of ecw file
In-Reply-To: <50D057B6.5060001@uva.nl>
Message-ID: <CCF5B66A.460AC%michael.smith@erdc.dren.mil>

I've found setting PHOTOMETRIC=YCBCR to allow much higher compression when using jpeg compression in gtifs.

Mike

--
Michael Smith
US Army Corps
Remote Sensing GIS/Center

From: Jan Hartmann <j.l.h.hartmann at uva.nl<mailto:j.l.h.hartmann at uva.nl>>
Date: Tuesday, December 18, 2012 5:47 AM
To: Jukka Rahkonen <jukka.rahkonen at mmmtike.fi<mailto:jukka.rahkonen at mmmtike.fi>>
Cc: "gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>" <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: Re: [gdal-dev] Q: on gdalwarp of ecw file
Resent-From: Michael Smith <michael.smith at usace.army.mil<mailto:michael.smith at usace.army.mil>>

Thanks Jukka, very informative. I'll start with jpeg compressed tiffs and will do additional tests next year. I'm on a Cloud environment nowadays, so it's easy to set up clean VMs for testing. Any suggestions for experiments with different raster formats would be very welcome.

Jan

On 12/18/2012 12:33 PM, Jukka Rahkonen wrote:

Jan Hartmann <j.l.h.hartmann <at> uva.nl> writes:




    Hi Even, are there any
      benchmarks to compare (uncompressed) gtif with the three formats
      above? My production maps are always tiled to 2000*2000 pixels,
      all zoomlevels precomputed. Very efficient with uncompresssed
      gtif, but they take lots of space. How much slower are these
      formats?
      Jan


Hi,

Here are some 6 years old numbers from some Mapserver tests:
http://permalink.gmane.org/gmane.comp.gis.mapserver.user/23540

The speed feels now rather slow compared with the feeling I have from our recent
services but differences may be alike. Or then they are not because drivers are
not the same anymore and new hardware can suit better for one than for another.

We are using aerial images mostly as JPEG compressed tiffs now but I have not
bothered to do any timings lately. They save 90-95% of disk space, they are not
much slower and users have not noticed the difference in quality so for us the
choice was pretty easy.

It is usually too simplified to say that some file format is slower that some
other because there are so many other factors also in play. JPEG200O is an
infamous example. It is a complicated file format and many software are very
slow with big geospatial JPEG2000 images, but there are applications which can
handle them very fast. Sluggish software does not necessarily mean that the
format itself is slow. Six year old numbers 270/120/24 images per minute for
tiff, ECW, and JPG2000 with Kakadu prove mainly that there must have been
something wrong in how Kakadu and GDAL were working together at that time.

You can get the best information about the real speed in your environment by
making your own tests. Others will praise you later if you make controlled tests
and publish the arrangement and results somewhere for future references.
Unfortunately I do not remember myself how I did my own tests but I believe I
was using FWTools 2.0.4 binaries.



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121218/a9423055/attachment.html>

From j.l.h.hartmann at uva.nl  Tue Dec 18 04:12:41 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 18 Dec 2012 13:12:41 +0100
Subject: [gdal-dev] Q: on gdalwarp of ecw file
In-Reply-To: <CCF5B66A.460AC%michael.smith@erdc.dren.mil>
References: <CCF5B66A.460AC%michael.smith@erdc.dren.mil>
Message-ID: <50D05DB9.9020402@uva.nl>

Any ideas why this should be so, Mike? Is this the case for all images? 
I found a few pointers with Google, like the one below, but I am still 
unsure about the reasons.

http://boatfloater.wordpress.com/2012/02/13/photometric-rgb-ycbcr/


On 12/18/2012 12:59 PM, Smith, Michael ERDC-RDE-CRREL-NH wrote:
> I've found setting PHOTOMETRIC=YCBCR to allow much higher compression 
> when using jpeg compression in gtifs.
>
> Mike
>
> -- 
> Michael Smith
> US Army Corps
> Remote Sensing GIS/Center
>
> From: Jan Hartmann <j.l.h.hartmann at uva.nl <mailto:j.l.h.hartmann at uva.nl>>
> Date: Tuesday, December 18, 2012 5:47 AM
> To: Jukka Rahkonen <jukka.rahkonen at mmmtike.fi 
> <mailto:jukka.rahkonen at mmmtike.fi>>
> Cc: "gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>" 
> <gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>>
> Subject: Re: [gdal-dev] Q: on gdalwarp of ecw file
> Resent-From: Michael Smith <michael.smith at usace.army.mil 
> <mailto:michael.smith at usace.army.mil>>
>
> Thanks Jukka, very informative. I'll start with jpeg compressed tiffs 
> and will do additional tests next year. I'm on a Cloud environment 
> nowadays, so it's easy to set up clean VMs for testing. Any 
> suggestions for experiments with different raster formats would be 
> very welcome.
>
> Jan
>
> On 12/18/2012 12:33 PM, Jukka Rahkonen wrote:
>> Jan Hartmann <j.l.h.hartmann <at> uva.nl> writes:
>>
>>
>>>      Hi Even, are there any
>>>        benchmarks to compare (uncompressed) gtif with the three formats
>>>        above? My production maps are always tiled to 2000*2000 pixels,
>>>        all zoomlevels precomputed. Very efficient with uncompresssed
>>>        gtif, but they take lots of space. How much slower are these
>>>        formats?
>>>        Jan
>> Hi,
>>
>> Here are some 6 years old numbers from some Mapserver tests:
>> http://permalink.gmane.org/gmane.comp.gis.mapserver.user/23540
>>
>> The speed feels now rather slow compared with the feeling I have from our recent
>> services but differences may be alike. Or then they are not because drivers are
>> not the same anymore and new hardware can suit better for one than for another.
>>
>> We are using aerial images mostly as JPEG compressed tiffs now but I have not
>> bothered to do any timings lately. They save 90-95% of disk space, they are not
>> much slower and users have not noticed the difference in quality so for us the
>> choice was pretty easy.
>>
>> It is usually too simplified to say that some file format is slower that some
>> other because there are so many other factors also in play. JPEG200O is an
>> infamous example. It is a complicated file format and many software are very
>> slow with big geospatial JPEG2000 images, but there are applications which can
>> handle them very fast. Sluggish software does not necessarily mean that the
>> format itself is slow. Six year old numbers 270/120/24 images per minute for
>> tiff, ECW, and JPG2000 with Kakadu prove mainly that there must have been
>> something wrong in how Kakadu and GDAL were working together at that time.
>>
>> You can get the best information about the real speed in your environment by
>> making your own tests. Others will praise you later if you make controlled tests
>> and publish the arrangement and results somewhere for future references.
>> Unfortunately I do not remember myself how I did my own tests but I believe I
>> was using FWTools 2.0.4 binaries.
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121218/fa24beb1/attachment-0001.html>

From Michael.Smith at erdc.dren.mil  Tue Dec 18 04:16:16 2012
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Tue, 18 Dec 2012 12:16:16 +0000
Subject: [gdal-dev] Q: on gdalwarp of ecw file
In-Reply-To: <50D05DB9.9020402@uva.nl>
Message-ID: <CCF5BA90.460B6%michael.smith@erdc.dren.mil>

Jan,

Its in the docs (http://gdal.org/frmt_gtiff.html)

About JPEG compression of RGB images

When translating a RGB image to JPEG-In-TIFF, using PHOTOMETRIC=YCBCR can make the size of the image typically 2 to 3 times smaller than the default photometric value (RGB). When using PHOTOMETRIC=YCBCR, the INTERLEAVE option must be kept to its default value (PIXEL), otherwise libtiff will fail to compress the data.

Note also that the dimensions of the tiles or strips must be a multiple of 8 for PHOTOMETRIC=RGB or 16 for PHOTOMETRIC=YCBCR


From: Jan Hartmann <j.l.h.hartmann at uva.nl<mailto:j.l.h.hartmann at uva.nl>>
Date: Tuesday, December 18, 2012 6:12 AM
To: Michael Smith <michael.smith at erdc.dren.mil<mailto:michael.smith at erdc.dren.mil>>
Cc: Jukka Rahkonen <jukka.rahkonen at mmmtike.fi<mailto:jukka.rahkonen at mmmtike.fi>>, "gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>" <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: Re: [gdal-dev] Q: on gdalwarp of ecw file

Any ideas why this should be so, Mike? Is this the case for all images? I found a few pointers with Google, like the one below, but I am still unsure about the reasons.

http://boatfloater.wordpress.com/2012/02/13/photometric-rgb-ycbcr/


On 12/18/2012 12:59 PM, Smith, Michael ERDC-RDE-CRREL-NH wrote:
I've found setting PHOTOMETRIC=YCBCR to allow much higher compression when using jpeg compression in gtifs.

Mike

--
Michael Smith
US Army Corps
Remote Sensing GIS/Center

From: Jan Hartmann <j.l.h.hartmann at uva.nl<mailto:j.l.h.hartmann at uva.nl>>
Date: Tuesday, December 18, 2012 5:47 AM
To: Jukka Rahkonen <jukka.rahkonen at mmmtike.fi<mailto:jukka.rahkonen at mmmtike.fi>>
Cc: "gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>" <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: Re: [gdal-dev] Q: on gdalwarp of ecw file
Resent-From: Michael Smith <michael.smith at usace.army.mil<mailto:michael.smith at usace.army.mil>>

Thanks Jukka, very informative. I'll start with jpeg compressed tiffs and will do additional tests next year. I'm on a Cloud environment nowadays, so it's easy to set up clean VMs for testing. Any suggestions for experiments with different raster formats would be very welcome.

Jan

On 12/18/2012 12:33 PM, Jukka Rahkonen wrote:

Jan Hartmann <j.l.h.hartmann <at> uva.nl> writes:




    Hi Even, are there any
      benchmarks to compare (uncompressed) gtif with the three formats
      above? My production maps are always tiled to 2000*2000 pixels,
      all zoomlevels precomputed. Very efficient with uncompresssed
      gtif, but they take lots of space. How much slower are these
      formats?
      Jan


Hi,

Here are some 6 years old numbers from some Mapserver tests:
http://permalink.gmane.org/gmane.comp.gis.mapserver.user/23540

The speed feels now rather slow compared with the feeling I have from our recent
services but differences may be alike. Or then they are not because drivers are
not the same anymore and new hardware can suit better for one than for another.

We are using aerial images mostly as JPEG compressed tiffs now but I have not
bothered to do any timings lately. They save 90-95% of disk space, they are not
much slower and users have not noticed the difference in quality so for us the
choice was pretty easy.

It is usually too simplified to say that some file format is slower that some
other because there are so many other factors also in play. JPEG200O is an
infamous example. It is a complicated file format and many software are very
slow with big geospatial JPEG2000 images, but there are applications which can
handle them very fast. Sluggish software does not necessarily mean that the
format itself is slow. Six year old numbers 270/120/24 images per minute for
tiff, ECW, and JPG2000 with Kakadu prove mainly that there must have been
something wrong in how Kakadu and GDAL were working together at that time.

You can get the best information about the real speed in your environment by
making your own tests. Others will praise you later if you make controlled tests
and publish the arrangement and results somewhere for future references.
Unfortunately I do not remember myself how I did my own tests but I believe I
was using FWTools 2.0.4 binaries.



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121218/5beec5ed/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Dec 18 04:16:11 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 18 Dec 2012 12:16:11 +0000 (UTC)
Subject: [gdal-dev] Q: on gdalwarp of ecw file
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
	<50D036C6.2080406@uva.nl> <loom.20121218T115628-779@post.gmane.org>
	<50D057B6.5060001@uva.nl>
Message-ID: <loom.20121218T125506-187@post.gmane.org>

Jan Hartmann <j.l.h.hartmann <at> uva.nl> writes:

> 
> 
>     Thanks Jukka, very
>       informative. I'll start with jpeg compressed tiffs and will do
>       additional tests next year. I'm on a Cloud environment nowadays,
>       so it's easy to set up clean VMs for testing. Any suggestions for
>       experiments with different raster formats would be very welcome.
>       Jan


Here is a fresh table comparing resampling methods and cgi vs. fast-cgi with
Mapserver and with raster map data. 
http://latuviitta.org/Apps4Finland-2012/documents/Taustakartta_WMS_kapasiteetti.html

Titles are in Finnish but you can make it with this lexicon
n?ytteit?=samples
vasteaika=response time
keskiarvo=mean
kuvaa/sek=images per second (800x600 pixels)

Thus you can get either 17.3 images per second or 63.7 from the same source data
just be changing Mapserver/GDAL options. Naturally the quality is not the same
which is another prove for considering the whole system instead of optimizing a
single piece of it.  By the way, numbers show that "cgi slow-fast-cgi fast" is
not the whole truth either. If there is lot of computing with bilinear or
average resampling the difference in speed is nominal and cgi is much more
stable - look at then maximum response time field.

-Jukka-


From j.l.h.hartmann at uva.nl  Tue Dec 18 04:27:34 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue, 18 Dec 2012 13:27:34 +0100
Subject: [gdal-dev] Q: on gdalwarp of ecw file
In-Reply-To: <loom.20121218T125506-187@post.gmane.org>
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
	<50D036C6.2080406@uva.nl> <loom.20121218T115628-779@post.gmane.org>
	<50D057B6.5060001@uva.nl> <loom.20121218T125506-187@post.gmane.org>
Message-ID: <50D06136.30407@uva.nl>

Thanks Jukka, I always wanted to learn Finnish :-). Almost as difficult 
as Dutch.

Cheers,

Jan

On 12/18/2012 01:16 PM, Jukka Rahkonen wrote:
>
> Here is a fresh table comparing resampling methods and cgi vs. fast-cgi with
> Mapserver and with raster map data.
> http://latuviitta.org/Apps4Finland-2012/documents/Taustakartta_WMS_kapasiteetti.html
>
> Titles are in Finnish but you can make it with this lexicon
> n?ytteit?=samples
> vasteaika=response time
> keskiarvo=mean
> kuvaa/sek=images per second (800x600 pixels)
>
> Thus you can get either 17.3 images per second or 63.7 from the same source data
> just be changing Mapserver/GDAL options. Naturally the quality is not the same
> which is another prove for considering the whole system instead of optimizing a
> single piece of it.  By the way, numbers show that "cgi slow-fast-cgi fast" is
> not the whole truth either. If there is lot of computing with bilinear or
> average resampling the difference in speed is nominal and cgi is much more
> stable - look at then maximum response time field.
>
> -Jukka-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121218/be435c50/attachment.html>

From woodbri at swoodbridge.com  Tue Dec 18 06:24:35 2012
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Tue, 18 Dec 2012 09:24:35 -0500
Subject: [gdal-dev] Q: on gdalwarp of ecw file
In-Reply-To: <50D06136.30407@uva.nl>
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
	<50D036C6.2080406@uva.nl> <loom.20121218T115628-779@post.gmane.org>
	<50D057B6.5060001@uva.nl> <loom.20121218T125506-187@post.gmane.org>
	<50D06136.30407@uva.nl>
Message-ID: <50D07CA3.8050303@swoodbridge.com>

Here are some performance numbers in a presentation by Frank:
http://www.fosslc.org/drupal/content/tuning-gdal-raster-performance

I found this very informative.

-Steve W

On 12/18/2012 7:27 AM, Jan Hartmann wrote:
> Thanks Jukka, I always wanted to learn Finnish :-). Almost as difficult
> as Dutch.
>
> Cheers,
>
> Jan
>
> On 12/18/2012 01:16 PM, Jukka Rahkonen wrote:
>> Here is a fresh table comparing resampling methods and cgi vs. fast-cgi with
>> Mapserver and with raster map data.
>> http://latuviitta.org/Apps4Finland-2012/documents/Taustakartta_WMS_kapasiteetti.html
>>
>> Titles are in Finnish but you can make it with this lexicon
>> n?ytteit?=samples
>> vasteaika=response time
>> keskiarvo=mean
>> kuvaa/sek=images per second (800x600 pixels)
>>
>> Thus you can get either 17.3 images per second or 63.7 from the same source data
>> just be changing Mapserver/GDAL options. Naturally the quality is not the same
>> which is another prove for considering the whole system instead of optimizing a
>> single piece of it.  By the way, numbers show that "cgi slow-fast-cgi fast" is
>> not the whole truth either. If there is lot of computing with bilinear or
>> average resampling the difference in speed is nominal and cgi is much more
>> stable - look at then maximum response time field.
>>
>> -Jukka-
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From fabian.schindler at eox.at  Tue Dec 18 07:06:53 2012
From: fabian.schindler at eox.at (Fabian Schindler)
Date: Tue, 18 Dec 2012 16:06:53 +0100
Subject: [gdal-dev] GCP reprojection
Message-ID: <50D0868D.9040106@eox.at>

Hey devs,

I've spent a full day to find a solution to this, but unfortunately was 
not able to solve it, so you are my last hope :)

I'm trying to reproject an image with GCPs to a CRS specified by WKT.

I used  `gdal.AutoCreateWarpedVRT` to retrieve the output image size + 
geotransform in conjunction with `gdal.ReprojectImage` to reproject the 
image. This worked well unless I have really few GCPs at my disposal 
(i.e: 6), then I just get the error "Failed to compute GCP transform: 
Transform is not solvable". (Funnily it works with only 4 GCPs).

I created a small C function to get the size and geotransform from an 
image with few GCPs (basically a small, Python callable wrapper for 
GDALSuggestedWarpOutput) with `order = 1` which helped me around the 
`gdal.AutoCreateWarpedVRT` error. But now I'm stuck with the 
`gdal.ReprojectImage`, which gives me the exact same error as above. 
("Failed to compute GCP transform: Transform is not solvable"). I've 
also tried to create a wrapper here to use `order=1` but this time it 
did not help and the error stayed.

My raster image size is 605x595 and I want to apply the following GCPs:

pixel      line          lon       lat

0.000000   0.000000   -> 16.100000 48.500000

604.000000 0.000000   -> 16.168000 48.503300

604.000000 297.000000 -> 16.168035 48.483500

604.000000 594.000000 -> 16.168040 48.463600

0.000000   594.000000 -> 16.100100 48.460000

0.000000   297.000000 -> 16.100000 48.480000

0.000000   0.000000   -> 16.100000 48.500000


Is there any (C) function I can use instead? Or any other method to 
reproject images with few GCPs?

Thanks,
Fabian

P.S: I'm using GDAL 1.9.1 on CentOS 6.

From fabian.schindler at eox.at  Tue Dec 18 07:12:17 2012
From: fabian.schindler at eox.at (Fabian Schindler)
Date: Tue, 18 Dec 2012 16:12:17 +0100
Subject: [gdal-dev] GCP reprojection
In-Reply-To: <50D0868D.9040106@eox.at>
References: <50D0868D.9040106@eox.at>
Message-ID: <50D087D1.1010402@eox.at>

Sorry for the traffic, just forgot to say that with the command line 
utilities it works as expected:

gdal_translate -gcp 0 0 16.1 48.5 -gcp 604 0 16.168 48.5033 -gcp 604 297 
16.168035 48.4835 -gcp 604 594 16.16804 48.4636 -gcp 0 594 16.1001 48.46 
-gcp 0 297 16.1 48.48 input.jpg tmp.tif
gdalwarp -order 1 tmp.tif output.tif

Thanks,
Fabian

On 12/18/2012 04:06 PM, Fabian Schindler wrote:
> Hey devs,
>
> I've spent a full day to find a solution to this, but unfortunately 
> was not able to solve it, so you are my last hope :)
>
> I'm trying to reproject an image with GCPs to a CRS specified by WKT.
>
> I used  `gdal.AutoCreateWarpedVRT` to retrieve the output image size + 
> geotransform in conjunction with `gdal.ReprojectImage` to reproject 
> the image. This worked well unless I have really few GCPs at my 
> disposal (i.e: 6), then I just get the error "Failed to compute GCP 
> transform: Transform is not solvable". (Funnily it works with only 4 
> GCPs).
>
> I created a small C function to get the size and geotransform from an 
> image with few GCPs (basically a small, Python callable wrapper for 
> GDALSuggestedWarpOutput) with `order = 1` which helped me around the 
> `gdal.AutoCreateWarpedVRT` error. But now I'm stuck with the 
> `gdal.ReprojectImage`, which gives me the exact same error as above. 
> ("Failed to compute GCP transform: Transform is not solvable"). I've 
> also tried to create a wrapper here to use `order=1` but this time it 
> did not help and the error stayed.
>
> My raster image size is 605x595 and I want to apply the following GCPs:
>
> pixel      line          lon       lat
>
> 0.000000   0.000000   -> 16.100000 48.500000
>
> 604.000000 0.000000   -> 16.168000 48.503300
>
> 604.000000 297.000000 -> 16.168035 48.483500
>
> 604.000000 594.000000 -> 16.168040 48.463600
>
> 0.000000   594.000000 -> 16.100100 48.460000
>
> 0.000000   297.000000 -> 16.100000 48.480000
>
> 0.000000   0.000000   -> 16.100000 48.500000
>
>
> Is there any (C) function I can use instead? Or any other method to 
> reproject images with few GCPs?
>
> Thanks,
> Fabian
>
> P.S: I'm using GDAL 1.9.1 on CentOS 6.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From lran at email.unc.edu  Tue Dec 18 12:21:21 2012
From: lran at email.unc.edu (Ran, Limei)
Date: Tue, 18 Dec 2012 20:21:21 +0000
Subject: [gdal-dev] point within polygon c++ API problem
Message-ID: <58477023A73D04479CCD057E4888A8464C545BAB@ITS-MSXMBS4M.ad.unc.edu>

Hello,

I am working on a C++ codes which reads polygon from polygon shapefile to see whether a point is within a polygon.  But, I got segmentation fault for pt.within (poGeometry).  Could you tell me where I may have errors.


1.      GDAL 1.9.1 is compiled with currect GEOS 3.3.6

2.      My c++ program compiled with GDAL.

3.      Here are my codes:

......
      float x = grid.x[col];
       float y = grid.y[row];

       OGRPoint pt;
        pt.setX( x );
        pt.setY( y );

        printf ("\tSet point\n");

        OGRFeature *poFeature;
        poLayer->ResetReading();

        while( (poFeature = poLayer->GetNextFeature()) != NULL )
        {
           OGRFeatureDefn *poFDefn = poLayer->GetLayerDefn();
           int iField;

           OGRGeometry *poGeometry;

           poGeometry = poFeature->GetGeometryRef();
           if( poGeometry != NULL && ( poGeometry->getGeometryType() ) == wkbPolygon )
           {
              printf ("\tGot polygon\n");

              if ( pt.Within ( poGeometry ) )
              {  //find the polygon where point is within and get item values

                 printf ("\tpoint in polygon\n");
.........

I got segmentation fault when processing gets:  if ( pt.Within ( poGeometry ) )


Thank you,

Limei

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121218/bbb23095/attachment.html>

From jrepetto at free.fr  Tue Dec 18 12:41:05 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue, 18 Dec 2012 21:41:05 +0100
Subject: [gdal-dev] using gdal from c#
In-Reply-To: <016f01cddc4f$e403bdf0$ac0b39d0$@herbst@agricon.de>
References: <016f01cddc4f$e403bdf0$ac0b39d0$@herbst@agricon.de>
Message-ID: <50D0D4E1.7030703@free.fr>

On 17/12/2012 13:13, Volkmar Herbst Agricon wrote:
> Dear all,
> I have a problem using gdal libraries (fwtools247) in .Net. I do need to
> reference the library in .net 4.0. It works in 3.5 but not with framework
> 4.0. Is there any way to use the libs in 4.0? Or could you give us some
> other suggestions how to overcome this problem?
> Thanks in advance
> Volkmar  


Hello,

May be you should try a more recent version of GDAL (FWTools for Windows
is obsolete). Current version is 1.9.2 .

Jean-Claude

From toefftoeff1 at gmx.net  Wed Dec 19 00:20:34 2012
From: toefftoeff1 at gmx.net (Christoph Appel)
Date: Wed, 19 Dec 2012 09:20:34 +0100
Subject: [gdal-dev] using gdal from c#
In-Reply-To: <016f01cddc4f$e403bdf0$ac0b39d0$@herbst@agricon.de>
References: <016f01cddc4f$e403bdf0$ac0b39d0$@herbst@agricon.de>
Message-ID: <50D178D2.9060002@gmx.net>

Volkmar,

for pre-build images, one could refer to
http://www.gisinternals.com/sdk/.

IIRC, Visual Studio version reflects a specific .NET version.

Kind regards,

   Christoph

Am 17.12.2012 13:13, schrieb Volkmar Herbst Agricon:
> Dear all,
> I have a problem using gdal libraries (fwtools247) in .Net. I do need to
> reference the library in .net 4.0. It works in 3.5 but not with framework
> 4.0. Is there any way to use the libs in 4.0? Or could you give us some
> other suggestions how to overcome this problem?
> Thanks in advance
> Volkmar
>
> Volkmar Herbst
> Datenportal
> --------------------------------------------------------------
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From Roger.Bivand at nhh.no  Wed Dec 19 02:05:21 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 19 Dec 2012 02:05:21 -0800 (PST)
Subject: [gdal-dev] CPLFreeConfig() in port/cpl_conv.cpp
Message-ID: <1355911521467-5023867.post@n6.nabble.com>

Hi,

I can get and set ConfigOptions using functions in port/cpl_conv.cpp, but I
have not found a way of unsetting a ConfigOption, only CPLFreeConfig() which
NULLs them all. I can also not see how to query which keys are set, so that
I could store their values, and re-instate them after blowing away all
options. In the long-running setting of rgdal in R, when GDAL/OGR may be
running for a whole session, it would be useful to have better control of
the ConfigOptions on the GDAL side. Am I missing something?

Grateful for pointers,

Roger



-----
Roger Bivand
NHH Norwegian School of Economics, Bergen, Norway
--
View this message in context: http://osgeo-org.1560.n6.nabble.com/CPLFreeConfig-in-port-cpl-conv-cpp-tp5023867.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Wed Dec 19 02:19:34 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 19 Dec 2012 11:19:34 +0100
Subject: [gdal-dev] CPLFreeConfig() in port/cpl_conv.cpp
In-Reply-To: <1355911521467-5023867.post@n6.nabble.com>
References: <1355911521467-5023867.post@n6.nabble.com>
Message-ID: <1355912374.50d194b6aeb0b@imp.free.fr>

Selon Roger Bivand <Roger.Bivand at nhh.no>:

> Hi,
>
> I can get and set ConfigOptions using functions in port/cpl_conv.cpp, but I
> have not found a way of unsetting a ConfigOption, only CPLFreeConfig() which
> NULLs them all. I can also not see how to query which keys are set, so that
> I could store their values, and re-instate them after blowing away all
> options. In the long-running setting of rgdal in R, when GDAL/OGR may be
> running for a whole session, it would be useful to have better control of
> the ConfigOptions on the GDAL side. Am I missing something?

Yes, to clear a config option, just CPLSetConfigOption(key, NULL). See
http://www.gdal.org/cpl__conv_8h.html#aa0cd1a68fe4f2fc7874cd2da605c36ce

However, there's no public way of getting which config options are defined
though, partly because config option can be either defined with
CPLSetConfigOption() or just obtained from the environmenet through getenv().

>
> Grateful for pointers,
>
> Roger
>
>
>
> -----
> Roger Bivand
> NHH Norwegian School of Economics, Bergen, Norway
> --
> View this message in context:
>
http://osgeo-org.1560.n6.nabble.com/CPLFreeConfig-in-port-cpl-conv-cpp-tp5023867.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From Roger.Bivand at nhh.no  Wed Dec 19 02:24:46 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed, 19 Dec 2012 11:24:46 +0100
Subject: [gdal-dev] CPLFreeConfig() in port/cpl_conv.cpp
In-Reply-To: <1355912374.50d194b6aeb0b@imp.free.fr>
References: <1355911521467-5023867.post@n6.nabble.com>
	<1355912374.50d194b6aeb0b@imp.free.fr>
Message-ID: <alpine.LRH.2.02.1212191122290.7564@reclus.nhh.no>

On Wed, 19 Dec 2012, Even Rouault wrote:

> Selon Roger Bivand <Roger.Bivand at nhh.no>:
>
>> Hi,
>>
>> I can get and set ConfigOptions using functions in port/cpl_conv.cpp, but I
>> have not found a way of unsetting a ConfigOption, only CPLFreeConfig() which
>> NULLs them all. I can also not see how to query which keys are set, so that
>> I could store their values, and re-instate them after blowing away all
>> options. In the long-running setting of rgdal in R, when GDAL/OGR may be
>> running for a whole session, it would be useful to have better control of
>> the ConfigOptions on the GDAL side. Am I missing something?
>
> Yes, to clear a config option, just CPLSetConfigOption(key, NULL). See
> http://www.gdal.org/cpl__conv_8h.html#aa0cd1a68fe4f2fc7874cd2da605c36ce

Fine, thanks - I was reading the code, rather than the documentation, 
which does answer my question (even in the header).

Roger

>
> However, there's no public way of getting which config options are defined
> though, partly because config option can be either defined with
> CPLSetConfigOption() or just obtained from the environmenet through getenv().
>
>>
>> Grateful for pointers,
>>
>> Roger
>>
>>
>>
>> -----
>> Roger Bivand
>> NHH Norwegian School of Economics, Bergen, Norway
>> --
>> View this message in context:
>>
> http://osgeo-org.1560.n6.nabble.com/CPLFreeConfig-in-port-cpl-conv-cpp-tp5023867.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From lran at email.unc.edu  Wed Dec 19 12:18:55 2012
From: lran at email.unc.edu (Ran, Limei)
Date: Wed, 19 Dec 2012 20:18:55 +0000
Subject: [gdal-dev] FW: point within polygon c++ API problem
Message-ID: <58477023A73D04479CCD057E4888A8464C545E13@ITS-MSXMBS4M.ad.unc.edu>

Hello Even,

Since you helped me on GEOS compiling with GDAL, I think you may have ideas on what went wrong with my codes in the following.  Could you tell me what you think on my segmentation fault error?

Thank you,

Limei


From: Ran, Limei
Sent: Tuesday, December 18, 2012 3:21 PM
To: gdal-dev at lists.osgeo.org
Subject: point within polygon c++ API problem

Hello,

I am working on a C++ codes which reads polygon from polygon shapefile to see whether a point is within a polygon.  But, I got segmentation fault for pt.within (poGeometry).  Could you tell me where I may have errors.


1.      GDAL 1.9.1 is compiled with currect GEOS 3.3.6

2.      My c++ program compiled with GDAL.

3.      Here are my codes:

......
      float x = grid.x[col];
       float y = grid.y[row];

       OGRPoint pt;
        pt.setX( x );
        pt.setY( y );

        printf ("\tSet point\n");

        OGRFeature *poFeature;
        poLayer->ResetReading();

        while( (poFeature = poLayer->GetNextFeature()) != NULL )
        {
           OGRFeatureDefn *poFDefn = poLayer->GetLayerDefn();
           int iField;

           OGRGeometry *poGeometry;

           poGeometry = poFeature->GetGeometryRef();
           if( poGeometry != NULL && ( poGeometry->getGeometryType() ) == wkbPolygon )
           {
              printf ("\tGot polygon\n");

              if ( pt.Within ( poGeometry ) )
              {  //find the polygon where point is within and get item values

                 printf ("\tpoint in polygon\n");
.........

I got segmentation fault when processing gets:  if ( pt.Within ( poGeometry ) )


Thank you,

Limei


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121219/8a36d87c/attachment.html>

From etourigny.dev at gmail.com  Wed Dec 19 13:27:18 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 19 Dec 2012 19:27:18 -0200
Subject: [gdal-dev] using gdal from c#
In-Reply-To: <50D0D4E1.7030703@free.fr>
References: <50D0D4E1.7030703@free.fr>
Message-ID: <CA+TxYvPLtmv-XJT61mOqcVxZrFGazOb0y63oNmaWvxLGcw28yg@mail.gmail.com>

Speaking of which - wouldn't it be time to retire the links to fwtools
from the wiki download page? Or perhaps move it to a separate page
with a link to it?

Seems to me there are quite a few issues, and people are frequently
suggested not to use fwtools any more, since it's quite old.

Etienne

On Tue, Dec 18, 2012 at 6:41 PM, Jean-Claude Repetto <jrepetto at free.fr> wrote:
> On 17/12/2012 13:13, Volkmar Herbst Agricon wrote:
>> Dear all,
>> I have a problem using gdal libraries (fwtools247) in .Net. I do need to
>> reference the library in .net 4.0. It works in 3.5 but not with framework
>> 4.0. Is there any way to use the libs in 4.0? Or could you give us some
>> other suggestions how to overcome this problem?
>> Thanks in advance
>> Volkmar
>
>
> Hello,
>
> May be you should try a more recent version of GDAL (FWTools for Windows
> is obsolete). Current version is 1.9.2 .
>
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From geoff at tritonimaginginc.com  Wed Dec 19 15:00:35 2012
From: geoff at tritonimaginginc.com (Geoff Shipton)
Date: Wed, 19 Dec 2012 15:00:35 -0800
Subject: [gdal-dev] GDAL contour
Message-ID: <025601cdde3c$a986a4f0$fc93eed0$@com>

I am considering using GDAL contour as a way to generate bathymetry
contours.

 

Can anyone point me to a bit more information than is available here:

 

http://www.gdal.org/gdal_contour.html

 

For example what is available as file types for <src_filename>?  It seems to
work just fine for .TIF images are there any other file types?

 

The  -f option supports .DXF outputs, are there others? (apart from
shapefiles)

 

Many thanks and happy Christmas!

Geoff Shipton,
Triton Imaging Inc.
Customer Support.
Capitola CA.
 <mailto:geoff at tritonimaginginc.com> geoff at tritonimaginginc.com

The information contained in this message may be privileged or confidential
information intended solely for the use of the addressee(s).  Any views or
opinions presented in this communication do not necessarily represent those
of Triton Imaging, Inc.  If the reader of this message is not the intended
recipient, you are hereby notified that any dissemination, distribution or
copying of this communication is strictly prohibited.  If you have received
this communication in error, please immediately notify me and you are hereby
instructed to delete all electronic copies and destroy all printed copies.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121219/240c2d24/attachment.html>

From warmerdam at pobox.com  Wed Dec 19 15:12:49 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 19 Dec 2012 15:12:49 -0800
Subject: [gdal-dev] GDAL contour
In-Reply-To: <025601cdde3c$a986a4f0$fc93eed0$@com>
References: <025601cdde3c$a986a4f0$fc93eed0$@com>
Message-ID: <CA+YzLBfieOR-DrGRczWvREwUQdj_srtLRVFxT0_Q8p5FF0puRw@mail.gmail.com>

On Wed, Dec 19, 2012 at 3:00 PM, Geoff Shipton
<geoff at tritonimaginginc.com> wrote:
> I am considering using GDAL contour as a way to generate bathymetry
> contours.
>
>
>
> Can anyone point me to a bit more information than is available here:
>
>
>
> http://www.gdal.org/gdal_contour.html
>
>
>
> For example what is available as file types for <src_filename>?  It seems to
> work just fine for .TIF images are there any other file types?

Geoff,

Any GDAL supported raster format should work for the input.

> The  -f option supports .DXF outputs, are there others? (apart from
> shapefiles)

In theory any of the formats listed at the following URL with "Yes" in
the creation column, but in practice some formats will be
inappropriate.

  http://www.gdal.org/ogr/ogr_formats.html

Keep in mind that gdal_contour produces approximately one
segment in the polygon edges per pixel crossed.  You will often
want to perform some sort of simplification after contour
generation.  I'm not sure what the best way is to do that.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From lcelati at latitude-geosystems.com  Wed Dec 19 16:55:44 2012
From: lcelati at latitude-geosystems.com (image)
Date: Wed, 19 Dec 2012 16:55:44 -0800 (PST)
Subject: [gdal-dev] image Compilation of Qgis 1.8 with gdal svn
	(Windows7_64bits)
In-Reply-To: <50CFD50D.9010607@ualg.pt>
References: <1355269681541-5022355.post@n6.nabble.com>
	<50C89A78.1090004@ualg.pt>
	<1355766831605-5023584.post@n6.nabble.com>
	<1355780018226-5023624.post@n6.nabble.com>
	<50CFD50D.9010607@ualg.pt>
Message-ID: <1355964944004-5023996.post@n6.nabble.com>

Hello,

3*Thank you for your reply. I just edit the nmake.opt in adding these
following sentences :
!IFNDEF VERSION
VERSION =    19
!ENDIF

I place its at the end of section called "########### END OF STUFF THAT
NORMALLY NEEDS TO BE UPDATED ################## "

Can you tell me if I put these sentences in the right place in the file?

I send you the new nmake.opt.

4* Indeed, i succeed in compiling gdal svn version thanks to  tortoise svn &
visual studio. For information , i send you the web link of this gdal svn
version already compiled : https://svn.osgeo.org/gdal/

So I will compile again this version of gdal svn as soon as a little some
time.

Thank to throw light for me.

With kind regards.

IMAGE. 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Compilation-of-Qgis-1-8-with-gdal-svn-Windows7-64bits-tp5022355p5023996.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From tyler.mitchell at actian.com  Wed Dec 19 17:08:01 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Wed, 19 Dec 2012 17:08:01 -0800
Subject: [gdal-dev] OGR XYZ -> GDAL VRT?
Message-ID: <14811516-BB09-4C52-9122-FE065431285E@actian.com>

Hi all, does anyone know a way to put up a GDAL VRT fed by an OGR datasource that has data in XYZ format (regular gridded) . 

It doesn't have to ultimately be a VRT, just some similar on-the-fly raster format method, so I can share raster data directly from the OGR datasource.  I've been digging around and saw wkt raster/postgis raster but it's really a little different than this approach as it doesn't use arrays.  

I can share more but thought I'd keep it simple first ;-)

Any tips?
Tyler


Tyler Mitchell
Engineering Director 
Actian Corporation
tyler.mitchell at actian.com

MOBILE 250-303-1831
SKYPE spatialguru
www.actian.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121219/76d9e51f/attachment.html>

From even.rouault at mines-paris.org  Wed Dec 19 22:54:45 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 20 Dec 2012 07:54:45 +0100
Subject: [gdal-dev] OGR XYZ -> GDAL VRT?
In-Reply-To: <14811516-BB09-4C52-9122-FE065431285E@actian.com>
References: <14811516-BB09-4C52-9122-FE065431285E@actian.com>
Message-ID: <201212200754.45461.even.rouault@mines-paris.org>

Le jeudi 20 d?cembre 2012 02:08:01, vous avez ?crit :
> Hi all, does anyone know a way to put up a GDAL VRT fed by an OGR
> datasource that has data in XYZ format (regular gridded) .
> 
> It doesn't have to ultimately be a VRT, just some similar on-the-fly raster
> format method, so I can share raster data directly from the OGR
> datasource.  I've been digging around and saw wkt raster/postgis raster
> but it's really a little different than this approach as it doesn't use
> arrays.
> 
> I can share more but thought I'd keep it simple first ;-)

Tyler,

There's a GDAL XYZ driver, but it has very strict requirements : 
http://gdal.org/frmt_xyz.html

Otherwise you can use the OGR CSV driver (make sure the file extension is 
.csv), wrap it in a OGR VRT, and then ingest that in gdal_grid to produce a 
raster. But that's not really on-the-fly.

Even

From tyler.mitchell at actian.com  Wed Dec 19 23:50:28 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Wed, 19 Dec 2012 23:50:28 -0800
Subject: [gdal-dev] OGR XYZ -> GDAL VRT?
In-Reply-To: <201212200754.45461.even.rouault@mines-paris.org>
References: <14811516-BB09-4C52-9122-FE065431285E@actian.com>
	<201212200754.45461.even.rouault@mines-paris.org>
Message-ID: <B65F5EE8-6941-4ADB-88A8-1C97831739DF@actian.com>


On 2012-12-19, at 10:54 PM, Even Rouault wrote:
> Le jeudi 20 d?cembre 2012 02:08:01, vous avez ?crit :
>> Hi all, does anyone know a way to put up a GDAL VRT fed by an OGR
>> datasource that has data in XYZ format (regular gridded) .
>> 
>> It doesn't have to ultimately be a VRT, just some similar on-the-fly raster
>> format method, so I can share raster data directly from the OGR
>> datasource.  I've been digging around and saw wkt raster/postgis raster
>> but it's really a little different than this approach as it doesn't use
>> arrays.
>> 
>> I can share more but thought I'd keep it simple first ;-)
> 
> Tyler,
> 
> There's a GDAL XYZ driver, but it has very strict requirements : 
> http://gdal.org/frmt_xyz.html
> 
> Otherwise you can use the OGR CSV driver (make sure the file extension is 
> .csv), wrap it in a OGR VRT, and then ingest that in gdal_grid to produce a 
> raster. But that's not really on-the-fly.

Hi Even,
Thanks for the tips

I'm so close .. thanks to the XYZ driver which I've been using a lot lately, since 
I can input/output CSV and both GDAL and OGR can read it, but yeah, GDAL can't
read it directly from the db source.

My challenge is now to make it pull the CSV from the db in real-time via a VRT.

(Actually I'm sure I can do it with a SQL statement in a VRT, my db is just not 
cooperating at the moment, since it's a non-spatial version of the Ingres db 
and the OGR driver is looking for geometry_columns table and bails out.)

But, yeah it's still not on-the-fly from a GDAL raster perspective.  I assume some
of the other drivers (DODS?) do have a similar mechanism to deal with grids in
databases?

Isn't there some fancy bash scripting that can be done to masquerade an OGR
VRT/script as a virtual file - e.g. it looks like a data file but it's really a realtime script
inside it.  Which leads me to wonder if there are ways to pipe CSV data into gdalinfo/translate?

Hm... thanks again, I'll keep pick away on it when I have time.  A generic gdal-ogr 
CSV bridge driver would be cool!

Some for rambling, it's getting late ;)

Tyler


From obe at IVV-AACHEN.DE  Thu Dec 20 02:54:12 2012
From: obe at IVV-AACHEN.DE (Felix Obermaier)
Date: Thu, 20 Dec 2012 11:54:12 +0100
Subject: [gdal-dev] Tamas' GDAL/OGR windows installer as NuGet package
Message-ID: <941E09AD62CA6F41913924A35EA3985E13C4065A57@ivv-mx.ivv-aachen.de>

Hello everyone,

I just wanted to let the dotNet developers know that I've packaged the binaries provided by Tamas Szekeres (http://www.gisinternals.com/sdk) for use with NuGet (http://www.nuget.org/).

You can get the package following the instructions provided here: http://nuget.org/packages/GDAL. Don't let the version number confuse you, the content of the package is GDAL v1.9.1.
There is also a GDAL.Plugins package available. The packages contain both x86 and x64 unmanaged binaries, the managed assemblies are taken from the x64 compilation since they target AnyCPU.

To Use the package you have to call GdalConfiguration.ConfigureGdal() or GdalConfiguration.ConfigureOgr() prior to using the wrapper classes. Depending on IntPtr.Size the configuration code points to either directory. It sets up the whole GDAL environment (as I've needed it so far).

Comments, suggestions are most certainly welcome.
Enjoy

Felix Obermaier


From bfraser at geoanalytic.com  Thu Dec 20 07:34:47 2012
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu, 20 Dec 2012 08:34:47 -0700
Subject: [gdal-dev] OGR XYZ -> GDAL VRT?
In-Reply-To: <B65F5EE8-6941-4ADB-88A8-1C97831739DF@actian.com>
References: <14811516-BB09-4C52-9122-FE065431285E@actian.com>
	<201212200754.45461.even.rouault@mines-paris.org>
	<B65F5EE8-6941-4ADB-88A8-1C97831739DF@actian.com>
Message-ID: <50D33017.1000304@geoanalytic.com>

Tyler,

  A while back I had a need to access (by Mapserver) points stored in a 
non-spatial SQL Server database.  I was able to use OGR's VRT to access 
the data, and while the example below shows a datasource connection of 
ODBC, you may be able to use an Oracle OCI connection instead:

     <OGRVRTDataSource>
         <OGRVRTLayer name='wells'>
<SrcDataSource>ODBC:auser/apass at dsname,Wells_view</SrcDataSource>
                <SrcSQL>SELECT * FROM  Wells_view WHERE
                 SurfaceLongitude &gt; -117.684 AND SurfaceLongitude 
&lt; -117.682 AND
                 SurfaceLatitude &gt; 52.499 AND SurfaceLatitude &lt; 
52.5</SrcSQL>
             <GeometryType>wkbPoint</GeometryType>
             <LayerSRS>NAD83</LayerSRS>
             <GeometryField encoding='PointFromColumns' 
y='SurfaceLatitude'  x='SurfaceLongitude'/>
         </OGRVRTLayer>
     </OGRVRTDataSource>

Actually, I'm a little confused by the GeometryType and GeometryField 
tags in the above example; you may need to experiment.

I've also constructed views in the database, basically reformatting the 
lat/lon columns into WKT format to do:

     <OGRVRTDataSource>
         <OGRVRTLayer name='vWM_UserGraphics'>
<SrcDataSource>ODBC:auser/apass at dsname,vWM_UserGraphics</SrcDataSource>
             <SrcSQL>SELECT 
WKT,PropertyID,GeomType,GeomID,LayerName,ClassName,Label FROM 
vWM_UserGraphics
                     WHERE  PropertyID=%PropertyID%
                     AND    GeomType = 0
             </SrcSQL>
             <FID>geomID</FID>
             <GeometryType>wkbLineString</GeometryType>
             <LayerSRS>NAD83</LayerSRS>
             <GeometryField encoding='WKT' field='WKT'/>
         </OGRVRTLayer>
     </OGRVRTDataSource>

Note the "%PropertyID%" string is a Mapserver runtime substitution done 
before OGR gets the VRT definition so not very useful in your case (but 
it might give you a few ideas).

Hopefully I've understood at least some of what you are trying to 
accomplish.  At first I thought you wanted a GDAL VRT that defines a 
raster, referencing an OGR VRT as the source data and defining a method 
of producing a grid.  Yikes!

Best Regards,
Brent Fraser

On 12/20/2012 12:50 AM, Tyler Mitchell wrote:
> On 2012-12-19, at 10:54 PM, Even Rouault wrote:
>> Le jeudi 20 d?cembre 2012 02:08:01, vous avez ?crit :
>>> Hi all, does anyone know a way to put up a GDAL VRT fed by an OGR
>>> datasource that has data in XYZ format (regular gridded) .
>>>
>>> It doesn't have to ultimately be a VRT, just some similar on-the-fly raster
>>> format method, so I can share raster data directly from the OGR
>>> datasource.  I've been digging around and saw wkt raster/postgis raster
>>> but it's really a little different than this approach as it doesn't use
>>> arrays.
>>>
>>> I can share more but thought I'd keep it simple first ;-)
>> Tyler,
>>
>> There's a GDAL XYZ driver, but it has very strict requirements :
>> http://gdal.org/frmt_xyz.html
>>
>> Otherwise you can use the OGR CSV driver (make sure the file extension is
>> .csv), wrap it in a OGR VRT, and then ingest that in gdal_grid to produce a
>> raster. But that's not really on-the-fly.
> Hi Even,
> Thanks for the tips
>
> I'm so close .. thanks to the XYZ driver which I've been using a lot lately, since
> I can input/output CSV and both GDAL and OGR can read it, but yeah, GDAL can't
> read it directly from the db source.
>
> My challenge is now to make it pull the CSV from the db in real-time via a VRT.
>
> (Actually I'm sure I can do it with a SQL statement in a VRT, my db is just not
> cooperating at the moment, since it's a non-spatial version of the Ingres db
> and the OGR driver is looking for geometry_columns table and bails out.)
>
> But, yeah it's still not on-the-fly from a GDAL raster perspective.  I assume some
> of the other drivers (DODS?) do have a similar mechanism to deal with grids in
> databases?
>
> Isn't there some fancy bash scripting that can be done to masquerade an OGR
> VRT/script as a virtual file - e.g. it looks like a data file but it's really a realtime script
> inside it.  Which leads me to wonder if there are ways to pipe CSV data into gdalinfo/translate?
>
> Hm... thanks again, I'll keep pick away on it when I have time.  A generic gdal-ogr
> CSV bridge driver would be cool!
>
> Some for rambling, it's getting late ;)
>
> Tyler
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From Greg.Moffatt at amec.com  Thu Dec 20 07:45:07 2012
From: Greg.Moffatt at amec.com (Moffatt, Greg)
Date: Thu, 20 Dec 2012 10:45:07 -0500
Subject: [gdal-dev] GML Invalid exterior ring
Message-ID: <6105664C4DC4AA4FA4D728662762382F03ED75B910@ATT1-MBX3.global.amec.com>

Hi all,



I've tried this query on the ms4w and mapserver lists without luck, so please forgive my cross-post.  I think the issue is somehow related to GDAL/OGR, so I'm hoping someone on this list can shed some light.



I have a GML file that's generated by SQL Server that contains one or more polygons.  It used to work, but since I've upgraded the ms4w installation on my web server, any requests to MapServer for that layer fail with the message: msOGRFileNextShape(): OGR error. Invalid exterior ring.



An example of the GML is attached, along with a .map file.  The GML opens fine in the Gaia and Snowflake GML viewers.  A recent version of ogrinfo returns:



ERROR 1: Unrecognised geometry type <ms>.

ERROR 1: Invalid exterior ring

Had to open data source read-only.

INFO: Open of `warnings_en-CA.gml'

      using driver `GML' successful.

1: Warnings



I've worked my way back through the ms4w versions, and have found that a change between 3.0.3 and 3.0.4-beta1 may be the culprit:



ms4w 3.0.3 - Works

ms4w 3.0.4-beta1 - Invalid exterior ring

ms4w 3.0.5 - Invalid exterior ring

ms4w 3.0.6 - Invalid exterior ring



GDAL changed from 1.8.1RC2 to 1.9.0 in that step.  I've looked through the GDAL release notes, but nothing is jumping out at me.



Any idea why MapServer (or OGR specifically) might balk at the GML?



A million thanks,

Greg

________________________________
The information contained in this e-mail is intended only for the individual or entity to whom it is addressed.
Its contents (including any attachments) may contain confidential and/or privileged information.
If you are not an intended recipient you must not use, disclose, disseminate, copy or print its contents.
If you receive this e-mail in error, please notify the sender by reply e-mail and delete and destroy the message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121220/c5398bc1/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Warnings_en-CA.gml
Type: application/octet-stream
Size: 5158 bytes
Desc: Warnings_en-CA.gml
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121220/c5398bc1/attachment-0001.obj>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Map.map.map
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121220/c5398bc1/attachment-0001.ksh>

From even.rouault at mines-paris.org  Thu Dec 20 08:52:44 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 20 Dec 2012 17:52:44 +0100
Subject: [gdal-dev] GML Invalid exterior ring
In-Reply-To: <6105664C4DC4AA4FA4D728662762382F03ED75B910@ATT1-MBX3.global.amec.com>
References: <6105664C4DC4AA4FA4D728662762382F03ED75B910@ATT1-MBX3.global.amec.com>
Message-ID: <1356022364.50d3425ccdb31@imp.free.fr>

Selon "Moffatt, Greg" <Greg.Moffatt at amec.com>:

> Hi all,
>
>
>
> I've tried this query on the ms4w and mapserver lists without luck, so please
> forgive my cross-post.  I think the issue is somehow related to GDAL/OGR, so
> I'm hoping someone on this list can shed some light.
>
>
>
> I have a GML file that's generated by SQL Server that contains one or more
> polygons.  It used to work, but since I've upgraded the ms4w installation on
> my web server, any requests to MapServer for that layer fail with the
> message: msOGRFileNextShape(): OGR error. Invalid exterior ring.
>
>
> GDAL changed from 1.8.1RC2 to 1.9.0 in that step.  I've looked through the
> GDAL release notes, but nothing is jumping out at me.
>
>
>
> Any idea why MapServer (or OGR specifically) might balk at the GML?

ok, I've reproduced the issue with your sample. Would you mind opening a ticket
at http://trac.osgeo.org/gdal/newticket about that ?

The issue is due that newer OGR versions now preserve the XML attributes of the
geometry elements of the GML, but the original parser of the GML geometries
isn't robust to ignoring attributes it doesn't know how to deal with. Namely in
your example the issue is with :

<gml:outerBoundaryIs xmlns:ms="http://mapserver.gis.umn.edu/mapserver"
xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogr="http://www.opengis.net/ogr"
xmlns:gml="http://www.opengis.net/gml">

If you remove all the attributes that define namespaces, it will work :
<gml:outerBoundaryIs>

I'll make the parser more robust, since the GML is well valid (but very verbose
! : why repeating the namespaces on all nodes ?)

Best regards,

Even

From tyler.mitchell at actian.com  Thu Dec 20 09:38:32 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Thu, 20 Dec 2012 09:38:32 -0800
Subject: [gdal-dev] OGR XYZ -> GDAL VRT?
In-Reply-To: <50D33017.1000304@geoanalytic.com>
References: <14811516-BB09-4C52-9122-FE065431285E@actian.com>
	<201212200754.45461.even.rouault@mines-paris.org>
	<B65F5EE8-6941-4ADB-88A8-1C97831739DF@actian.com>
	<50D33017.1000304@geoanalytic.com>
Message-ID: <2F910EAA-099F-4AA8-B0FC-E84F4AEFD6BB@actian.com>


On 2012-12-20, at 7:34 AM, Brent Fraser wrote:

> I've also constructed views in the database, basically reformatting the lat/lon columns into WKT format to do:

Hi Brent, you gave some good examples, thanks.  This has been the approach I took so far, but is not precisely what I'm after.

> Hopefully I've understood at least some of what you are trying to accomplish.  At first I thought you wanted a GDAL VRT that defines a raster, referencing an OGR VRT as the source data and defining a method of producing a grid.  Yikes!

Yeah, that's the ticket actually :)  Think of it as poor-man's raster-in-db solution - a table with X, Y, Z columns - I'm looking for the best way to let GDAL pull that data out and re-assemble it as a raster.  I can do it programatically but want to do it on the fly, so MapServer, QGIS, etc. can simply use it.

Thanks again,
Tyler

From Greg.Moffatt at amec.com  Thu Dec 20 11:23:58 2012
From: Greg.Moffatt at amec.com (Moffatt, Greg)
Date: Thu, 20 Dec 2012 14:23:58 -0500
Subject: [gdal-dev] GML Invalid exterior ring
In-Reply-To: <1356022364.50d3425ccdb31@imp.free.fr>
References: <6105664C4DC4AA4FA4D728662762382F03ED75B910@ATT1-MBX3.global.amec.com>
	<1356022364.50d3425ccdb31@imp.free.fr>
Message-ID: <6105664C4DC4AA4FA4D728662762382F03ED838ED0@ATT1-MBX3.global.amec.com>

I think my response to Even didn't make it to the list; apologies, Even, for the redundant e-mail.

Even, thank you so much.  I have logged a ticket on the issue (#4934).  You're right - the XML is far more verbose than it needs to be, although that seems to be a trait of SQL Server's FOR XML clause.

In the meantime, I stripped the redundant attributes from the XML by casting it to a varchar(max), replacing the namespace attributes with nothing, and then replacing the root tag with one containing the attributes.  Casted that varchar back to XML and voila - everything works again.

Not the most eloquent solution, but it works.

Happy holidays to all,
Greg



-----Original Message-----
From: Even Rouault [mailto:even.rouault at mines-paris.org]
Sent: December-20-12 11:53 AM
To: Moffatt, Greg
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] GML Invalid exterior ring

Selon "Moffatt, Greg" <Greg.Moffatt at amec.com>:

> Hi all,
>
>
>
> I've tried this query on the ms4w and mapserver lists without luck, so please
> forgive my cross-post.  I think the issue is somehow related to GDAL/OGR, so
> I'm hoping someone on this list can shed some light.
>
>
>
> I have a GML file that's generated by SQL Server that contains one or more
> polygons.  It used to work, but since I've upgraded the ms4w installation on
> my web server, any requests to MapServer for that layer fail with the
> message: msOGRFileNextShape(): OGR error. Invalid exterior ring.
>
>
> GDAL changed from 1.8.1RC2 to 1.9.0 in that step.  I've looked through the
> GDAL release notes, but nothing is jumping out at me.
>
>
>
> Any idea why MapServer (or OGR specifically) might balk at the GML?

ok, I've reproduced the issue with your sample. Would you mind opening a ticket
at http://trac.osgeo.org/gdal/newticket about that ?

The issue is due that newer OGR versions now preserve the XML attributes of the
geometry elements of the GML, but the original parser of the GML geometries
isn't robust to ignoring attributes it doesn't know how to deal with. Namely in
your example the issue is with :

<gml:outerBoundaryIs xmlns:ms="http://mapserver.gis.umn.edu/mapserver"
xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogr="http://www.opengis.net/ogr"
xmlns:gml="http://www.opengis.net/gml">

If you remove all the attributes that define namespaces, it will work :
<gml:outerBoundaryIs>

I'll make the parser more robust, since the GML is well valid (but very verbose
! : why repeating the namespaces on all nodes ?)

Best regards,

Even

The information contained in this e-mail is intended only for the individual or entity to whom it is addressed.
Its contents (including any attachments) may contain confidential and/or privileged information.
If you are not an intended recipient you must not use, disclose, disseminate, copy or print its contents.
If you receive this e-mail in error, please notify the sender by reply e-mail and delete and destroy the message.

From bfraser at geoanalytic.com  Thu Dec 20 13:37:27 2012
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu, 20 Dec 2012 14:37:27 -0700
Subject: [gdal-dev] OGR XYZ -> GDAL VRT?
In-Reply-To: <2F910EAA-099F-4AA8-B0FC-E84F4AEFD6BB@actian.com>
References: <14811516-BB09-4C52-9122-FE065431285E@actian.com>
	<201212200754.45461.even.rouault@mines-paris.org>
	<B65F5EE8-6941-4ADB-88A8-1C97831739DF@actian.com>
	<50D33017.1000304@geoanalytic.com>
	<2F910EAA-099F-4AA8-B0FC-E84F4AEFD6BB@actian.com>
Message-ID: <50D38517.1080609@geoanalytic.com>

Hmmm.  You need the GDAL-VRT format to have the same data-source 
flexibility currently in the OGR-VRT. Could be a useful enhancement with 
the growing interest in storing rasters in a RDBMs...

Best Regards,
Brent Fraser

On 12/20/2012 10:38 AM, Tyler Mitchell wrote:
> On 2012-12-20, at 7:34 AM, Brent Fraser wrote:
>
>> I've also constructed views in the database, basically reformatting the lat/lon columns into WKT format to do:
> Hi Brent, you gave some good examples, thanks.  This has been the approach I took so far, but is not precisely what I'm after.
>
>> Hopefully I've understood at least some of what you are trying to accomplish.  At first I thought you wanted a GDAL VRT that defines a raster, referencing an OGR VRT as the source data and defining a method of producing a grid.  Yikes!
> Yeah, that's the ticket actually :)  Think of it as poor-man's raster-in-db solution - a table with X, Y, Z columns - I'm looking for the best way to let GDAL pull that data out and re-assemble it as a raster.  I can do it programatically but want to do it on the fly, so MapServer, QGIS, etc. can simply use it.
>
> Thanks again,
> Tyler



From dlverbyla at alaska.edu  Thu Dec 20 20:36:09 2012
From: dlverbyla at alaska.edu (David Verbyla)
Date: Thu, 20 Dec 2012 19:36:09 -0900
Subject: [gdal-dev] Layer.GetNextFeature() does not seem to get the next
 feature (Python 2.7.2, GDAL1.9.2
Message-ID: <CAJpuGQeEuXchfBDwYg+OxKUx3ETnzDhFpa7gbis9hBC-S7O6QA@mail.gmail.com>

I have a layer of 15 polygons from a shapefile.  I can access the features
using Layer.GetFeature(i),
but not using Layer.GetNextFeature().

For example:
>>> polyFeature = pondsLayer.GetFeature(0)
>>> print polyFeature.GetFID()
0
>>> polyFeature = pondsLayer.GetFeature(1)
>>> print polyFeature.GetFID()
1

>>> polyFeature = pondsLayer.GetFeature(0)
>>> print polyFeature.GetFID()
0
>>> polyFeature = pondsLayer.GetNextFeature()
>>> print polyFeature.GetFID()
Traceback (most recent call last):
  File "<pyshell#23>", line 1, in <module>
    print polyFeature.GetFID()
AttributeError: 'NoneType' object has no attribute 'GetFID'

Any suggestions?

Thanks.

Dave Verbyla
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121220/4931c72c/attachment.html>

From even.rouault at mines-paris.org  Thu Dec 20 22:56:04 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 21 Dec 2012 07:56:04 +0100
Subject: [gdal-dev] Layer.GetNextFeature() does not seem to get the next
	feature (Python 2.7.2, GDAL1.9.2
In-Reply-To: <CAJpuGQeEuXchfBDwYg+OxKUx3ETnzDhFpa7gbis9hBC-S7O6QA@mail.gmail.com>
References: <CAJpuGQeEuXchfBDwYg+OxKUx3ETnzDhFpa7gbis9hBC-S7O6QA@mail.gmail.com>
Message-ID: <201212210756.04299.even.rouault@mines-paris.org>

Le vendredi 21 d?cembre 2012 05:36:09, David Verbyla a ?crit :
> I have a layer of 15 polygons from a shapefile.  I can access the features
> using Layer.GetFeature(i),
> but not using Layer.GetNextFeature().
> 
> For example:
> >>> polyFeature = pondsLayer.GetFeature(0)
> >>> print polyFeature.GetFID()
> 
> 0
> 
> >>> polyFeature = pondsLayer.GetFeature(1)
> >>> print polyFeature.GetFID()
> 
> 1
> 
> >>> polyFeature = pondsLayer.GetFeature(0)
> >>> print polyFeature.GetFID()
> 
> 0
> 
> >>> polyFeature = pondsLayer.GetNextFeature()
> >>> print polyFeature.GetFID()
> 
> Traceback (most recent call last):
>   File "<pyshell#23>", line 1, in <module>
>     print polyFeature.GetFID()
> AttributeError: 'NoneType' object has no attribute 'GetFID'
> 
> Any suggestions?

Note that the feature retrieved by GetNextFeature() isn't influenced by 
previous calls to GetFeature(), but just by previous calls to 
GetNextFeature(), ResetReading(), SetNextByIndex(), and sometimes 
GetFeatureCount().
Perhaps you have installed a spatial and/or attribute filters that would result 
in an empty answer ?

> 
> Thanks.
> 
> Dave Verbyla

From marco at sourcepole.ch  Fri Dec 21 00:16:13 2012
From: marco at sourcepole.ch (Marco Hugentobler)
Date: Fri, 21 Dec 2012 09:16:13 +0100
Subject: [gdal-dev] Feature styles units in dxf export
Message-ID: <50D41ACD.3060504@sourcepole.ch>

Hi

Exporting vector symbology from QGIS, I encountered problems with (line 
width) units in the dxf export.
Setting a style string in mm (e.g.  'PEN(c:#0000ff,w:5mm'), the dxf 
driver converts the 5 mm to 0.005 ground units, then multiplies that by 
100 (most likely because in dxf, one width unit is 1/100 mm). This seems 
strange to me, shouldn't the driver treat mm as paper units (instead as 
ground units) and just multiply the mm by 100?

Thanks,
Marco

From jef at norbit.de  Fri Dec 21 00:55:30 2012
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Fri, 21 Dec 2012 09:55:30 +0100
Subject: [gdal-dev] Feature styles units in dxf export
In-Reply-To: <50D41ACD.3060504@sourcepole.ch>
References: <50D41ACD.3060504@sourcepole.ch>
Message-ID: <20121221085530.GA18729@norbit.de>

Hi Marco,

On Fri, 21. Dec 2012 at 09:16:13 +0100, Marco Hugentobler wrote:
> Setting a style string in mm (e.g.  'PEN(c:#0000ff,w:5mm'), the dxf  
> driver converts the 5 mm to 0.005 ground units, then multiplies that by  
> 100 (most likely because in dxf, one width unit is 1/100 mm). This seems  
> strange to me, shouldn't the driver treat mm as paper units (instead as  
> ground units) and just multiply the mm by 100?

Didn't look at any code - but the units in DXF are configurable.  So the driver
should do that only if it knowns the current units.  It might assume running
with the DXF header shipped with GDAL (assuming there is one) and you are using
another one?


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
committ(ed|ing) to Quantum GIS                         IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From marco at sourcepole.ch  Fri Dec 21 01:56:31 2012
From: marco at sourcepole.ch (Marco Hugentobler)
Date: Fri, 21 Dec 2012 10:56:31 +0100
Subject: [gdal-dev] Feature styles units in dxf export
In-Reply-To: <20121221085530.GA18729@norbit.de>
References: <50D41ACD.3060504@sourcepole.ch> <20121221085530.GA18729@norbit.de>
Message-ID: <50D4324F.6060600@sourcepole.ch>

Hi J?rgen

 >It might assume running
 >with the DXF header shipped with GDAL (assuming there is one) and you 
are using
 >another one?

I'm using the header that comes with OGR. Don't know if there is a 
possibility to change the header via OGR (but my dxf knowledge is very 
limited, so I'd prefer to go with the default).

Regards,
Marco


On 21.12.2012 09:55, J?rgen E. Fischer wrote:
> Hi Marco,
>
> On Fri, 21. Dec 2012 at 09:16:13 +0100, Marco Hugentobler wrote:
>> Setting a style string in mm (e.g.  'PEN(c:#0000ff,w:5mm'), the dxf
>> driver converts the 5 mm to 0.005 ground units, then multiplies that by
>> 100 (most likely because in dxf, one width unit is 1/100 mm). This seems
>> strange to me, shouldn't the driver treat mm as paper units (instead as
>> ground units) and just multiply the mm by 100?
> Didn't look at any code - but the units in DXF are configurable.  So the driver
> should do that only if it knowns the current units.  It might assume running
> with the DXF header shipped with GDAL (assuming there is one) and you are using
> another one?
>
>
> J?rgen
>


-- 
Dr. Marco Hugentobler
Sourcepole -  Linux & Open Source Solutions
Weberstrasse 5, CH-8004 Z?rich, Switzerland
marco.hugentobler at sourcepole.ch http://www.sourcepole.ch
Technical Advisor QGIS Project Steering Committee


From reinaldo at geodesign.com.br  Fri Dec 21 05:44:01 2012
From: reinaldo at geodesign.com.br (reinaldo at geodesign.com.br)
Date: Fri, 21 Dec 2012 11:44:01 -0200 (BRST)
Subject: [gdal-dev] ESRI TFW Introduction Date
Message-ID: <jkk81mv.509a0d12258062c0f74168d02fbff19f@webmail.geodesign.com.br>

Gdal Users,

Does anybody by any chance know when approx. ESRI originally introduced the
tif + .tfw?

Thanks,
------------------------------------
 Reinaldo Escada Chohfi
 S?cio Gerente
 GeoDesign Internacional
 www.geodesign.com.br (http://www.geodesign.com.br)
 Tel./Fax: (12) 3153-5115
 Intelig?ncia e Tecnologia Espacial de Ponta

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121221/e07205d2/attachment.html>

From fabian.schindler at eox.at  Fri Dec 21 05:55:15 2012
From: fabian.schindler at eox.at (Fabian Schindler)
Date: Fri, 21 Dec 2012 14:55:15 +0100
Subject: [gdal-dev] GCP reprojection
In-Reply-To: <50D087D1.1010402@eox.at>
References: <50D0868D.9040106@eox.at> <50D087D1.1010402@eox.at>
Message-ID: <50D46A43.9020105@eox.at>

Hi devs,

Sorry for the noise, I figured it out. Seems like it worked all along 
with order 1, but I was just to blind to see.

Regards,
Fabian

On 12/18/2012 04:12 PM, Fabian Schindler wrote:
> Sorry for the traffic, just forgot to say that with the command line 
> utilities it works as expected:
>
> gdal_translate -gcp 0 0 16.1 48.5 -gcp 604 0 16.168 48.5033 -gcp 604 
> 297 16.168035 48.4835 -gcp 604 594 16.16804 48.4636 -gcp 0 594 16.1001 
> 48.46 -gcp 0 297 16.1 48.48 input.jpg tmp.tif
> gdalwarp -order 1 tmp.tif output.tif
>
> Thanks,
> Fabian
>
> On 12/18/2012 04:06 PM, Fabian Schindler wrote:
>> Hey devs,
>>
>> I've spent a full day to find a solution to this, but unfortunately 
>> was not able to solve it, so you are my last hope :)
>>
>> I'm trying to reproject an image with GCPs to a CRS specified by WKT.
>>
>> I used  `gdal.AutoCreateWarpedVRT` to retrieve the output image size 
>> + geotransform in conjunction with `gdal.ReprojectImage` to reproject 
>> the image. This worked well unless I have really few GCPs at my 
>> disposal (i.e: 6), then I just get the error "Failed to compute GCP 
>> transform: Transform is not solvable". (Funnily it works with only 4 
>> GCPs).
>>
>> I created a small C function to get the size and geotransform from an 
>> image with few GCPs (basically a small, Python callable wrapper for 
>> GDALSuggestedWarpOutput) with `order = 1` which helped me around the 
>> `gdal.AutoCreateWarpedVRT` error. But now I'm stuck with the 
>> `gdal.ReprojectImage`, which gives me the exact same error as above. 
>> ("Failed to compute GCP transform: Transform is not solvable"). I've 
>> also tried to create a wrapper here to use `order=1` but this time it 
>> did not help and the error stayed.
>>
>> My raster image size is 605x595 and I want to apply the following GCPs:
>>
>> pixel      line          lon       lat
>>
>> 0.000000   0.000000   -> 16.100000 48.500000
>>
>> 604.000000 0.000000   -> 16.168000 48.503300
>>
>> 604.000000 297.000000 -> 16.168035 48.483500
>>
>> 604.000000 594.000000 -> 16.168040 48.463600
>>
>> 0.000000   594.000000 -> 16.100100 48.460000
>>
>> 0.000000   297.000000 -> 16.100000 48.480000
>>
>> 0.000000   0.000000   -> 16.100000 48.500000
>>
>>
>> Is there any (C) function I can use instead? Or any other method to 
>> reproject images with few GCPs?
>>
>> Thanks,
>> Fabian
>>
>> P.S: I'm using GDAL 1.9.1 on CentOS 6.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From ivan.lucena at princeton-ma.us  Fri Dec 21 06:03:51 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri, 21 Dec 2012 09:03:51 -0500
Subject: [gdal-dev] =?iso-8859-1?q?ESRI_TFW_Introduction_Date?=
In-Reply-To: <jkk81mv.509a0d12258062c0f74168d02fbff19f@webmail.geodesign.com.br>
References: <jkk81mv.509a0d12258062c0f74168d02fbff19f@webmail.geodesign.com.br>
Message-ID: <20121221140351.13874.qmail@s466.sureserver.com>

What an interesting question Reinaldo in a day like today.

If you look here [http://en.wikipedia.org/wiki/World_file] you going to find some more useful information about the World Files. From there you can follow the link to ESRI forum and maybe find the information you want there or post a question yourself.

Boa Sorte!


>  -------Original Message-------
>  From: reinaldo at geodesign.com.br
>  To: Frank Warmerdam <warmerdam at pobox.com>, gdal-dev <gdal-dev at lists.osgeo.org>
>  Subject: [gdal-dev] ESRI TFW Introduction Date
>  Sent: Dec 21 '12 08:44
>  
>  Gdal Users,
>  
>  Does anybody by any chance know when approx. ESRI originally introduced the
>  .tif + .tfw?
>  
>  Thanks,
>  
>  
>  --------------------
>  
>  Reinaldo Escada Chohfi
>  S?cio Gerente
>  GeoDesign Internacional
>  [LINK: http://www.geodesign.com.br] www.geodesign.com.br
>  Tel./Fax: (12) 3153-5115
>  
>  Intelig?ncia e Tecnologia Espacial de Ponta
>  
>  
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev at lists.osgeo.org] gdal-dev at lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev

From reinaldo at geodesign.com.br  Fri Dec 21 06:36:02 2012
From: reinaldo at geodesign.com.br (reinaldo at geodesign.com.br)
Date: Fri, 21 Dec 2012 12:36:02 -0200 (BRST)
Subject: [gdal-dev] ESRI TFW Introduction Date
Message-ID: <rs353o6.1a39d0374221ff243f32929df59e87c6@webmail.geodesign.com.br>

Ivan,

I did look it up: wikipedea, ESRI Forum, etc. But, I can not find a reference date and/or approx. year.

Thanks,

R.

------------------------------------
 Reinaldo Escada Chohfi
 S?cio Gerente
 GeoDesign Internacional
 www.geodesign.com.br (http://www.geodesign.com.br)
 Tel./Fax: (12) 3153-5115
 Intelig?ncia e Tecnologia Espacial de Ponta

>---- Original Message ----
>From: "Ivan Lucena" <ivan.lucena at princeton-ma.us>
>To: reinaldo at geodesign.com.br, "Frank Warmerdam" <warmerdam at pobox.com>, "gdal-dev" <gdal-dev at lists.osgeo.org>
>Sent: Sex, Dez 21, 2012, 12:03 PM
>Subject: Re: [gdal-dev] ESRI TFW Introduction Date
>
>What an interesting question Reinaldo in a day like today.
>
>If you look here [http://en.wikipedia.org/wiki/World_file] you going to find some more useful information about the World Files. From there you can follow the link to ESRI forum and maybe find the information you want there or post a question yourself.
>
>Boa Sorte!
>
>
>>  -------Original Message-------
>>  From: reinaldo at geodesign.com.br
>>  To: Frank Warmerdam <warmerdam at pobox.com>, gdal-dev <gdal-dev at lists.osgeo.org>
>>  Subject: [gdal-dev] ESRI TFW Introduction Date
>>  Sent: Dec 21 '12 08:44
>>  
>>  Gdal Users,
>>  
>>  Does anybody by any chance know when approx. ESRI originally introduced the
>>  .tif + .tfw?
>>  
>>  Thanks,
>>  
>>  
>>  --------------------
>>  
>>  Reinaldo Escada Chohfi
>>  S?cio Gerente
>>  GeoDesign Internacional
>>  [LINK: http://www.geodesign.com.br] www.geodesign.com.br
>>  Tel./Fax: (12) 3153-5115
>>  
>>  Intelig?ncia e Tecnologia Espacial de Ponta
>>  
>>  
>>  --------------------
>>  _______________________________________________
>>  gdal-dev mailing list
>>  [LINK: compose.php?to=gdal-dev at lists.osgeo.org] gdal-dev at lists.osgeo.org
>>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev


From reinaldo at geodesign.com.br  Fri Dec 21 06:49:13 2012
From: reinaldo at geodesign.com.br (reinaldo at geodesign.com.br)
Date: Fri, 21 Dec 2012 12:49:13 -0200 (BRST)
Subject: [gdal-dev] GeoTiff ProjectedCSTypeGeoKey SIRGAS2000 31983
Message-ID: <rs353o6.3901cd62172dd38bd2a93ed3715fdde3@webmail.geodesign.com.br>

Ivan,

Do you know the correct specification of GeoTiff's ProjectedCSTypeGeoKey
for SIRGAS2000 EPSG: 31983?

I get Unknown-31983 with gdal utility programs.

Thanks,
------------------------------------
 Reinaldo Escada Chohfi
 S?cio Gerente
 GeoDesign Internacional
 www.geodesign.com.br (http://www.geodesign.com.br)
 Tel./Fax: (12) 3153-5115
 Intelig?ncia e Tecnologia Espacial de Ponta

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121221/e3d6a11e/attachment.html>

From ao at t-kartor.se  Fri Dec 21 06:52:54 2012
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Fri, 21 Dec 2012 15:52:54 +0100
Subject: [gdal-dev] ESRI TFW Introduction Date
In-Reply-To: <rs353o6.1a39d0374221ff243f32929df59e87c6@webmail.geodesign.com.br>
References: <rs353o6.1a39d0374221ff243f32929df59e87c6@webmail.geodesign.com.br>
Message-ID: <50D477C6.4060503@t-kartor.se>

A loong time ago - my first contact with world files was at latest in 
early 90's when using the REGISTER command in ArcInfo workstation.
Which I think was developed by ERDAS so maybe it was 1986 according to 
http://field-guide.blogspot.se/2009/04/brief-history-of-erdas-imagine.html.

with nostalgia

Andreas

> Ivan,
>
> I did look it up: wikipedea, ESRI Forum, etc. But, I can not find a reference date and/or approx. year.
>
> Thanks,
>
> R.
>
> ------------------------------------
>   Reinaldo Escada Chohfi
>   S?cio Gerente
>   GeoDesign Internacional
>   www.geodesign.com.br (http://www.geodesign.com.br)
>   Tel./Fax: (12) 3153-5115
>   Intelig?ncia e Tecnologia Espacial de Ponta
>
>> ---- Original Message ----
>> From: "Ivan Lucena" <ivan.lucena at princeton-ma.us>
>> To: reinaldo at geodesign.com.br, "Frank Warmerdam" <warmerdam at pobox.com>, "gdal-dev" <gdal-dev at lists.osgeo.org>
>> Sent: Sex, Dez 21, 2012, 12:03 PM
>> Subject: Re: [gdal-dev] ESRI TFW Introduction Date
>>
>> What an interesting question Reinaldo in a day like today.
>>
>> If you look here [http://en.wikipedia.org/wiki/World_file] you going to find some more useful information about the World Files. From there you can follow the link to ESRI forum and maybe find the information you want there or post a question yourself.
>>
>> Boa Sorte!
>>
>>
>>>   -------Original Message-------
>>>   From: reinaldo at geodesign.com.br
>>>   To: Frank Warmerdam <warmerdam at pobox.com>, gdal-dev <gdal-dev at lists.osgeo.org>
>>>   Subject: [gdal-dev] ESRI TFW Introduction Date
>>>   Sent: Dec 21 '12 08:44
>>>   
>>>   Gdal Users,
>>>   
>>>   Does anybody by any chance know when approx. ESRI originally introduced the
>>>   .tif + .tfw?
>>>   
>>>   Thanks,
>>>   
>>>   
>>>   --------------------
>>>   
>>>   Reinaldo Escada Chohfi
>>>   S?cio Gerente
>>>   GeoDesign Internacional
>>>   [LINK: http://www.geodesign.com.br] www.geodesign.com.br
>>>   Tel./Fax: (12) 3153-5115
>>>   
>>>   Intelig?ncia e Tecnologia Espacial de Ponta
>>>   
>>>   
>>>   --------------------
>>>   _______________________________________________
>>>   gdal-dev mailing list
>>>   [LINK: compose.php?to=gdal-dev at lists.osgeo.org] gdal-dev at lists.osgeo.org
>>>   [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>>>   http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Best Regards

Andreas Oxenstierna
T-Kartan Produkt AB
mobile: +46 733 206831
mailto: ao at t-kartor.se
http://www.t-kartor.com


From ivan.lucena at princeton-ma.us  Fri Dec 21 07:28:27 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri, 21 Dec 2012 10:28:27 -0500
Subject: [gdal-dev]
	=?iso-8859-1?q?GeoTiff_ProjectedCSTypeGeoKey_SIRGAS200?=
	=?iso-8859-1?q?0_31983?=
In-Reply-To: <rs353o6.3901cd62172dd38bd2a93ed3715fdde3@webmail.geodesign.com.br>
References: <rs353o6.3901cd62172dd38bd2a93ed3715fdde3@webmail.geodesign.com.br>
Message-ID: <20121221152828.26345.qmail@s466.sureserver.com>

Have you look at [http://spatialreference.org/ref/epsg/31983/] ?


>  -------Original Message-------
>  From: reinaldo at geodesign.com.br
>  To: Ivan Lucena <ivan.lucena at princeton-ma.us>, gdal-dev <gdal-dev at lists.osgeo.org>
>  Subject: GeoTiff ProjectedCSTypeGeoKey SIRGAS2000 31983
>  Sent: Dec 21 '12 09:49
>  
>  Ivan,
>  
>  Do you know the correct specification of GeoTiff's ProjectedCSTypeGeoKey
>  for SIRGAS2000 EPSG: 31983?
>  
>  I get Unknown-31983 with gdal utility programs.
>  
>  Thanks,
>  
>  
>  --------------------
>  
>  Reinaldo Escada Chohfi
>  S?cio Gerente
>  GeoDesign Internacional
>  [LINK: http://www.geodesign.com.br] www.geodesign.com.br
>  Tel./Fax: (12) 3153-5115
>  
>  Intelig?ncia e Tecnologia Espacial de Ponta

From jrepetto at free.fr  Fri Dec 21 10:09:48 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Fri, 21 Dec 2012 19:09:48 +0100
Subject: [gdal-dev] GeoTiff ProjectedCSTypeGeoKey SIRGAS2000 31983
In-Reply-To: <rs353o6.3901cd62172dd38bd2a93ed3715fdde3@webmail.geodesign.com.br>
References: <rs353o6.3901cd62172dd38bd2a93ed3715fdde3@webmail.geodesign.com.br>
Message-ID: <50D4A5EC.6000800@free.fr>

On 21/12/2012 15:49, reinaldo at geodesign.com.br wrote:
> Ivan,
> 
> Do you know the correct specification of GeoTiff's ProjectedCSTypeGeoKey
> for SIRGAS2000 EPSG: 31983?
> 
> I get Unknown-31983 with gdal utility programs.
> 
> Thanks,

GDAL knows this system :

$ epsg_tr.py 31983
PROJCS["SIRGAS 2000 / UTM zone 23S",
    GEOGCS["SIRGAS 2000",
        DATUM["Sistema_de_Referencia_Geocentrico_para_las_AmericaS_2000",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6674"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4674"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-45],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",10000000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH],
    AUTHORITY["EPSG","31983"]]

From warmerdam at pobox.com  Fri Dec 21 10:20:57 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 21 Dec 2012 10:20:57 -0800
Subject: [gdal-dev] GeoTiff ProjectedCSTypeGeoKey SIRGAS2000 31983
In-Reply-To: <rs353o6.3901cd62172dd38bd2a93ed3715fdde3@webmail.geodesign.com.br>
References: <rs353o6.3901cd62172dd38bd2a93ed3715fdde3@webmail.geodesign.com.br>
Message-ID: <CA+YzLBdFFxD1BOhD3u-2gbFnqc1knP77emOStCeMbgScSwY5iQ@mail.gmail.com>

Reinaldo,

It is a known system, at least in trunk.  Possibly your libgeotiff
support files are somewhat antique or not being found?

Best regards,
Frank

On Fri, Dec 21, 2012 at 6:49 AM,  <reinaldo at geodesign.com.br> wrote:
> Ivan,
>
> Do you know the correct specification of GeoTiff's ProjectedCSTypeGeoKey for
> SIRGAS2000 EPSG: 31983?
>
> I get Unknown-31983 with gdal utility programs.
>
> Thanks,
>
>
> ________________________________
>
> Reinaldo Escada Chohfi
> S?cio Gerente
> GeoDesign Internacional
> www.geodesign.com.br
> Tel./Fax: (12) 3153-5115
>
> Intelig?ncia e Tecnologia Espacial de Ponta
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From dlverbyla at alaska.edu  Sat Dec 22 08:17:38 2012
From: dlverbyla at alaska.edu (David Verbyla)
Date: Sat, 22 Dec 2012 07:17:38 -0900
Subject: [gdal-dev] OSR Python: nearest polygon distance from each point
	feature?
Message-ID: <CAJpuGQdZ0yKmG7FpZXamkuffgt2E80+rEo8McUbrws8R=aFDZg@mail.gmail.com>

> I am a newbie to OGR/OSR using Python 2.7.2, please excuse my ignorance:
> I am trying to find the distance to the closest polygon for each point.
> Is there a more efficient way than simply computing the distance to all
> polygons for each point?  For example:
>

nPts = pointsLayer.GetFeatureCount()
nPolys = polysLayer.GetFeatureCount()

for pt in range(0,nPts):
      minDist = 1000000
      pointFeature = pointsLayer.GetFeature(pt)
      for poly in range(0,nPolys):
            polyFeature = polysLayer.GetFeature(poly)
            Dist = pointFeature.GetGeometryRef().Distance(
polyFeature.GetGeometryRef() )
            if (Dist < minDist):
                  minDist = Dist
      print (pt,minDist)

Thank you.

Dave Verbyla
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121222/2af2a619/attachment.html>

From alobolistas at gmail.com  Sun Dec 23 05:40:59 2012
From: alobolistas at gmail.com (Agustin Lobo)
Date: Sun, 23 Dec 2012 14:40:59 +0100
Subject: [gdal-dev] write pseudocolor raster
Message-ID: <CAG4NReKicgJ6fv_=qM9j1JpSNNw+6neqbKXYjDry4XQ6_1+-SQ@mail.gmail.com>

I have some 1-band raster layers that I  would like to write as
pseudocolor files. Is it
possible to use gdal_traslate or another gdal utility to write the
raster using the color palette
of another file?
I've seen the procedure described in
http://trac.osgeo.org/gdal/wiki/FAQRaster#Howtocreateormodifyanimagecolortable
but I  would like no having to edit the vrt file manually.

Thanks

Agus

From even.rouault at mines-paris.org  Sun Dec 23 14:14:54 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 23 Dec 2012 23:14:54 +0100
Subject: [gdal-dev] write pseudocolor raster
In-Reply-To: <CAG4NReKicgJ6fv_=qM9j1JpSNNw+6neqbKXYjDry4XQ6_1+-SQ@mail.gmail.com>
References: <CAG4NReKicgJ6fv_=qM9j1JpSNNw+6neqbKXYjDry4XQ6_1+-SQ@mail.gmail.com>
Message-ID: <201212232314.54533.even.rouault@mines-paris.org>

Le dimanche 23 d?cembre 2012 14:40:59, Agustin Lobo a ?crit :
> I have some 1-band raster layers that I  would like to write as
> pseudocolor files. Is it
> possible to use gdal_traslate or another gdal utility to write the
> raster using the color palette
> of another file?
> I've seen the procedure described in
> http://trac.osgeo.org/gdal/wiki/FAQRaster#Howtocreateormodifyanimagecolorta
> ble but I  would like no having to edit the vrt file manually.

You can use the following GDAL Python script :

http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples/attachpct.py

> 
> Thanks
> 
> Agus
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Sun Dec 23 14:19:53 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 23 Dec 2012 23:19:53 +0100
Subject: [gdal-dev] OSR Python: nearest polygon distance from each point
	feature?
In-Reply-To: <CAJpuGQdZ0yKmG7FpZXamkuffgt2E80+rEo8McUbrws8R=aFDZg@mail.gmail.com>
References: <CAJpuGQdZ0yKmG7FpZXamkuffgt2E80+rEo8McUbrws8R=aFDZg@mail.gmail.com>
Message-ID: <201212232319.53857.even.rouault@mines-paris.org>

Le samedi 22 d?cembre 2012 17:17:38, David Verbyla a ?crit :
> > I am a newbie to OGR/OSR using Python 2.7.2, please excuse my ignorance:
> > I am trying to find the distance to the closest polygon for each point.
> > Is there a more efficient way than simply computing the distance to all
> 
> > polygons for each point?  For example:
> nPts = pointsLayer.GetFeatureCount()
> nPolys = polysLayer.GetFeatureCount()
> 
> for pt in range(0,nPts):
>       minDist = 1000000
>       pointFeature = pointsLayer.GetFeature(pt)
>       for poly in range(0,nPolys):
>             polyFeature = polysLayer.GetFeature(poly)
>             Dist = pointFeature.GetGeometryRef().Distance(
> polyFeature.GetGeometryRef() )
>             if (Dist < minDist):
>                   minDist = Dist
>       print (pt,minDist)

Several points to keep in mind : GetFeature() is not always efficiently 
implemented depending on the capability of the format and/or driver. For 
shapefiles, it is OK, but for some other formats, GetFeature() might be slow. 
If you need to iterate over all the features of a layer, using 
GetNextFeature() is recommanded.

If the layer you're querying has a spatial index ( PostGIS database with 
spatial index, shapefiles with .qix files), you could try to set a spatial filter 
around the target point. But you might need to have a strategy where you start 
with a small radius and increase it until the spatial query isn't empty.

> 
> Thank you.
> 
> Dave Verbyla

From solisgb at gmail.com  Sun Dec 23 23:37:58 2012
From: solisgb at gmail.com (Luis Solis)
Date: Mon, 24 Dec 2012 08:37:58 +0100
Subject: [gdal-dev] GDAL, Python and PyQt4 bindings on windows
Message-ID: <CAFm_kvS5G9LSgAM+em+p+PgoexwDwwLToapmh4U83qr23q+G_A@mail.gmail.com>

Hi

I've installed GDAL and python bindings (py 2.7) on win xp sp3 using Tamas
Szekeres's binaries.

All the environmental variables are ok (path, gdal_data and pythonpath).

path2gdal is the first in the list of directories in the PATH(PATH=c:\gdal;...)

I've tried with a simple test

    try:
       from osgeo import ogr
    except:
       import ogr

If I run the script from command line all is ok

I'm using Eric IDE. Eric uses PyQt4. If I try to run the script from Eric,
the test throws the error message

ImportError: DLL load failed

I don't know what I can do

-- 
Luis Sol?s
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121224/5db2e1c7/attachment.html>

From yehil at rafael.co.il  Mon Dec 24 06:04:26 2012
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Mon, 24 Dec 2012 16:04:26 +0200
Subject: [gdal-dev] Multithreaded GDAL
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0C8B076753E@MAILBOXSERVER.rf.local>

Hi all
I've tried searching for an answer online, but the most recent information I found is more than 3 years old.
We have method that reads pixels from one data-source, performs some manipulation, and writes it to another.
Reading is done with the Band.ReadRaster C# API.
Writing is done with the Band.WriteRaster c# API.

I'd like to process several data-sets in parallel on multiple threads.
>From what I could understand from http://trac.osgeo.org/gdal/wiki/FAQMiscellaneous and other online sources, "no threads can be writing to GDAL while others are reading".
Has this changed in recent versions? Is it now possible to read and write on different threads (from different data-sets)?

Thanks
Yehiyam
**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121224/17ff71b3/attachment.html>

From chapmanm at pixia.com  Mon Dec 24 09:17:41 2012
From: chapmanm at pixia.com (Martin Chapman)
Date: Mon, 24 Dec 2012 12:17:41 -0500 (EST)
Subject: [gdal-dev] Multithreaded GDAL
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0C8B076753E@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0C8B076753E@MAILBOXSERVER.rf.local>
Message-ID: <1ad95f20.00001390.00000008@CHAPMANM7S>

Yehiyam,

 

You can read from different threads concurrently if each thread has its
own, unique GDALDataset handle.  That means call GDALOpen() from each
thread on the same file path.  Writing should be done from one thread.  

 

Best regards,

Martin

 

 

From: gdal-dev-bounces at lists.osgeo.org
[mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Livneh Yehiyam
Sent: Monday, December 24, 2012 7:04 AM
To: gdal-dev
Subject: [gdal-dev] Multithreaded GDAL

 

Hi all

I've tried searching for an answer online, but the most recent information
I found is more than 3 years old.

We have method that reads pixels from one data-source, performs some
manipulation, and writes it to another.

Reading is done with the Band.ReadRaster C# API. 

Writing is done with the Band.WriteRaster c# API.

 

I'd like to process several data-sets in parallel on multiple threads. 

>From what I could understand from
http://trac.osgeo.org/gdal/wiki/FAQMiscellaneous and other online sources,
"no threads can be writing to GDAL while others are reading".

Has this changed in recent versions? Is it now possible to read and write
on different threads (from different data-sets)?

 

Thanks

Yehiyam

  _____  

This message (including any attachments) issued by RAFAEL- ADVANCED
DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential
information intended for a specific individual and purpose, may constitute
information that is privileged or confidential or otherwise protected from
disclosure. If you are not the intended recipient, you should contact us
immediately and thereafter delete this message from your system. You are
hereby notified that any disclosure, copying, dissemination, distribution
or forwarding of this message, or the taking of any action based on it, is
strictly prohibited. If you have received this e-mail in error, please
notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely
delete or destroy any and all electronic or other copies of the original
message and any attachments thereof. 

  _____  

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121224/7406612c/attachment.html>

From hari.0516 at gmail.com  Tue Dec 25 21:16:02 2012
From: hari.0516 at gmail.com (HariPrasad)
Date: Tue, 25 Dec 2012 21:16:02 -0800 (PST)
Subject: [gdal-dev] Overviews using GDAL
In-Reply-To: <50CB6E78.3040406@mail.ru>
References: <1355230713797-5022226.post@n6.nabble.com>
	<50C73CBE.9080906@mail.ru>
	<1355469854703-5022926.post@n6.nabble.com>
	<50CB6E78.3040406@mail.ru>
Message-ID: <1356498962396-5024588.post@n6.nabble.com>

Hi Dmitry

I was inspecting various GDAL sources
(http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts). I was bit confused
how to implement RasterIO method. Which format to look for better idea.

Should i call IRasterIO() method in IReadBlock? 

/CPLErr RBDRasterBand::IReadBlock( int nBlockXOff, int nBlockYOff, void *
pImage )
{
  return IRasterIO( GF_Read, nBlockXOff, nBlockYOff, nBlockXSize,
nBlockYSize, 
	                      pImage, nBlockXSize, nBlockYSize, eDataType, 
	                      GDALGetDataTypeSize(eDataType)/8, 0 );
}/

/CPLErr RBDRasterBand::IRasterIO( GDALRWFlag eRWFlag,
	                                 int nBlockXOff, int nBlockYOff, int
nXSize, int nYSize,
	                                 void * pData, int nBufXSize, int
nBufYSize,
	                                 GDALDataType eBufType,
	                                 int nPixelSpace, int nLineSpace )
{
    //my logic
}/


Earlier we were using ERDAS method to get the handle
/long LayerRasterRead( void *lHandle, unsigned long bRow, unsigned long
bCol,
			            unsigned char **pixels )
{
//logic
}/

Is there any method similar to get the handle in GDAL?





--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Overviews-using-GDAL-tp5022226p5024588.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From srikanth.sidduri at iictechnologies.com  Tue Dec 25 22:25:58 2012
From: srikanth.sidduri at iictechnologies.com (srikanthsidduri)
Date: Tue, 25 Dec 2012 22:25:58 -0800 (PST)
Subject: [gdal-dev] EXCEPTION HAS BEEN THROWN BY TARGET OF INVOCATION
Message-ID: <1356503158166-5024593.post@n6.nabble.com>

Hi,

While loading the map for a big ENC datasets, I am getting this exception,

"EXCEPTION HAS BEEN THROWN BY TARGET OF INVOCATION".

And the the inner message for this is,
 
"Not enough storage is available to process this command".

And my code to loading the map is,

DotSpatial.Topology.Coordinate c = null;
DotSpatial.Data.IFeature currentFeature=null;
DotSpatial.Topology.Point p=null;
 c = new
DotSpatial.Topology.Coordinate(Convert.ToDouble(arrCoordinatesX[k]),
Convert.ToDouble(arrCoordinatesY[k]));
 p = new DotSpatial.Topology.Point(c);
currentFeature = fs.AddFeature(p);
                                                                                           
pointLayer = (DotSpatial.Controls.MapPointLayer)mgr.Layers.Add(fs);  <------
Here  I am getting Exception..



Thanks & Regards 
Srikanth Rao Sidduri



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/EXCEPTION-HAS-BEEN-THROWN-BY-TARGET-OF-INVOCATION-tp5024593.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From brett.walker at geometryit.com  Wed Dec 26 00:11:36 2012
From: brett.walker at geometryit.com (Brett Walker)
Date: Wed, 26 Dec 2012 19:11:36 +1100
Subject: [gdal-dev] EXCEPTION HAS BEEN THROWN BY TARGET OF INVOCATION
In-Reply-To: <1356503158166-5024593.post@n6.nabble.com>
References: <1356503158166-5024593.post@n6.nabble.com>
Message-ID: <4B95BC7335A13A42AD0D23462F91AE6F616D303760@echo.geometryit.com>

Sounds like you have run out of memory or disk space but you have probably investigated this possibility

Brett Walker

________________________________________
From: gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org] On Behalf Of srikanthsidduri [srikanth.sidduri at iictechnologies.com]
Sent: Wednesday, 26 December 2012 5:25 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] EXCEPTION HAS BEEN THROWN BY TARGET OF INVOCATION

Hi,

While loading the map for a big ENC datasets, I am getting this exception,

"EXCEPTION HAS BEEN THROWN BY TARGET OF INVOCATION".

And the the inner message for this is,

"Not enough storage is available to process this command".

And my code to loading the map is,

DotSpatial.Topology.Coordinate c = null;
DotSpatial.Data.IFeature currentFeature=null;
DotSpatial.Topology.Point p=null;
 c = new
DotSpatial.Topology.Coordinate(Convert.ToDouble(arrCoordinatesX[k]),
Convert.ToDouble(arrCoordinatesY[k]));
 p = new DotSpatial.Topology.Point(c);
currentFeature = fs.AddFeature(p);

pointLayer = (DotSpatial.Controls.MapPointLayer)mgr.Layers.Add(fs);  <------
Here  I am getting Exception..



Thanks & Regards
Srikanth Rao Sidduri



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/EXCEPTION-HAS-BEEN-THROWN-BY-TARGET-OF-INVOCATION-tp5024593.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From srikanth.sidduri at iictechnologies.com  Wed Dec 26 00:41:06 2012
From: srikanth.sidduri at iictechnologies.com (srikanthsidduri)
Date: Wed, 26 Dec 2012 00:41:06 -0800 (PST)
Subject: [gdal-dev] EXCEPTION HAS BEEN THROWN BY TARGET OF INVOCATION
In-Reply-To: <4B95BC7335A13A42AD0D23462F91AE6F616D303760@echo.geometryit.com>
References: <1356503158166-5024593.post@n6.nabble.com>
	<4B95BC7335A13A42AD0D23462F91AE6F616D303760@echo.geometryit.com>
Message-ID: <1356511266018-5024602.post@n6.nabble.com>

Hi,


I am getting the InnerException as the operation completed successfully.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/EXCEPTION-HAS-BEEN-THROWN-BY-TARGET-OF-INVOCATION-tp5024593p5024602.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From srikanth.sidduri at iictechnologies.com  Wed Dec 26 00:42:09 2012
From: srikanth.sidduri at iictechnologies.com (srikanthsidduri)
Date: Wed, 26 Dec 2012 00:42:09 -0800 (PST)
Subject: [gdal-dev] EXCEPTION HAS BEEN THROWN BY TARGET OF INVOCATION
In-Reply-To: <1356511266018-5024602.post@n6.nabble.com>
References: <1356503158166-5024593.post@n6.nabble.com>
	<4B95BC7335A13A42AD0D23462F91AE6F616D303760@echo.geometryit.com>
	<1356511266018-5024602.post@n6.nabble.com>
Message-ID: <1356511329811-5024603.post@n6.nabble.com>

<http://osgeo-org.1560.n6.nabble.com/file/n5024603/Exception.png> 




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/EXCEPTION-HAS-BEEN-THROWN-BY-TARGET-OF-INVOCATION-tp5024593p5024603.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From srikanth.sidduri at iictechnologies.com  Wed Dec 26 01:05:33 2012
From: srikanth.sidduri at iictechnologies.com (srikanthsidduri)
Date: Wed, 26 Dec 2012 01:05:33 -0800 (PST)
Subject: [gdal-dev] Layer/Object colors on Map
Message-ID: <1356512733787-5024604.post@n6.nabble.com>

Hi,
 
 How can we set specific colors to the layers based on their attribute
values.
Here I am getting different colors for all layers(getting different colors
when I reloading the same dataset)
Here is the sample map.

<http://osgeo-org.1560.n6.nabble.com/file/n5024604/MapColor.jpg> 

The colors given in the map are not relavent to the objects.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Layer-Object-colors-on-Map-tp5024604.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From bishop.dev at gmail.com  Wed Dec 26 01:48:38 2012
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Wed, 26 Dec 2012 13:48:38 +0400
Subject: [gdal-dev] Overviews using GDAL
In-Reply-To: <1356498962396-5024588.post@n6.nabble.com>
References: <1355230713797-5022226.post@n6.nabble.com>
	<50C73CBE.9080906@mail.ru>
	<1355469854703-5022926.post@n6.nabble.com>
	<50CB6E78.3040406@mail.ru>
	<1356498962396-5024588.post@n6.nabble.com>
Message-ID: <50DAC7F6.1040805@gmail.com>

Hi Hari,

26.12.2012 9:16, HariPrasad ?????:
> Hi Dmitry
>
> I was inspecting various GDAL sources
> (http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts). I was bit confused
> how to implement RasterIO method. Which format to look for better idea.
By my opinion the best format is geotiff
> Should i call IRasterIO() method in IReadBlock?
>
> /CPLErr RBDRasterBand::IReadBlock( int nBlockXOff, int nBlockYOff, void *
> pImage )
> {
>    return IRasterIO( GF_Read, nBlockXOff, nBlockYOff, nBlockXSize,
> nBlockYSize,
> 	                      pImage, nBlockXSize, nBlockYSize, eDataType,
> 	                      GDALGetDataTypeSize(eDataType)/8, 0 );
> }/
>
> /CPLErr RBDRasterBand::IRasterIO( GDALRWFlag eRWFlag,
> 	                                 int nBlockXOff, int nBlockYOff, int
> nXSize, int nYSize,
> 	                                 void * pData, int nBufXSize, int
> nBufYSize,
> 	                                 GDALDataType eBufType,
> 	                                 int nPixelSpace, int nLineSpace )
> {
>      //my logic
> }/
>
>
> Earlier we were using ERDAS method to get the handle
> /long LayerRasterRead( void *lHandle, unsigned long bRow, unsigned long
> bCol,
> 			            unsigned char **pixels )
> {
> //logic
> }/
>
> Is there any method similar to get the handle in GDAL?
The best starting point is http://gdal.org/gdal_tutorial.html but in 
example shown reading of one line of the image.
Reading the whole image will looks like this:

     int nPixelSpace(0);
     int nLineSpace(0);
     int nBandSpace(0);
     if(nBandCount > 1)
     {
         int nDataSize = GDALGetDataTypeSize(eDT) / 8;
         nPixelSpace = nDataSize * nBandCount;
         nLineSpace = nBufXSize * nPixelSpace;
         nBandSpace = nDataSize;
     }
     void*    data = CPLMalloc (nWidth * nHeight * nDataSize * 
nBandCount); //allocate memory for pixels
     pGDALRaster->RasterIO( GF_Read, nXOff, nYOff, nXSize, nYSize, data, 
nWidth, nHeight, eDT, nBandCount, panBandList, nPixelSpace, nLineSpace, 
nBandSpace);
Details: 
http://gdal.org/classGDALRasterBand.html#a5497e8d29e743ee9177202cb3f61c3c7

If nWidth != nXSize and nYSize != nHeight the closest overview will be 
used for fast access to pixel data.

If eDT == /GDT_Byte/you can write: unsigned char* pixels = (unsigned 
char*)   data;
> --
> View this message in context:http://osgeo-org.1560.n6.nabble.com/Overviews-using-GDAL-tp5022226p5024588.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
Best regards,
     Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121226/9d3216e7/attachment.html>

From jukka.rahkonen at mmmtike.fi  Wed Dec 26 06:48:31 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 26 Dec 2012 14:48:31 +0000 (UTC)
Subject: [gdal-dev] Layer/Object colors on Map
References: <1356512733787-5024604.post@n6.nabble.com>
Message-ID: <loom.20121226T154036-553@post.gmane.org>

srikanthsidduri <srikanth.sidduri <at> iictechnologies.com> writes:

> 
> Hi,
> 
>  How can we set specific colors to the layers based on their attribute
> values.
> Here I am getting different colors for all layers(getting different colors
> when I reloading the same dataset)
> Here is the sample map.
> 
> <http://osgeo-org.1560.n6.nabble.com/file/n5024604/MapColor.jpg> 
> 
> The colors given in the map are not relavent to the objects.

You can set colors with OGR Feature Styles
http://www.gdal.org/ogr/ogr_feature_style.html

It is another thing if your client can utilize the stores colors. Mapserver does
http://mapserver.org/development/rfc/ms-rfc-61.html. GDAL PDF driver has also a
limited support and you can read a bit about that from this how-to 
http://latuviitta.org/documents/Geospatial_PDF_maps_from_OSM_with_GDAL.pdf

I do not know which GDAL/OGR drivers clients support reading/writing/converting
OGR styles but such a list would be nice to have.

-Jukka Rahkonen-




From j.l.h.hartmann at uva.nl  Thu Dec 27 04:38:50 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 27 Dec 2012 13:38:50 +0100
Subject: [gdal-dev] Compression artifacts
In-Reply-To: <50D06136.30407@uva.nl>
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
	<50D036C6.2080406@uva.nl> <loom.20121218T115628-779@post.gmane.org>
	<50D057B6.5060001@uva.nl> <loom.20121218T125506-187@post.gmane.org>
	<50D06136.30407@uva.nl>
Message-ID: <50DC415A.30401@uva.nl>

Can anyone tell me wath is happening here? I have a large three-band 
raster (3.8G) looking like this:

http://mapserver.sara.nl/map2a.png

I compress it (from information from this list a few days ago) with:

gdal_translate -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR big.tif small.tif
gdaladdo --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW 
YCBCR -ro -r gauss small.tif 2 4 8 16 32 64

and get a file of 37M, which is nice. However, the map has all kinds of 
rubbish at the borders. It looks like this:

http://mapserver.sara.nl/map2b.png

The equivalent pictures of a small part of the map look like this:

http://mapserver.sara.nl/map1a.png
http://mapserver.sara.nl/map1b.png

Can anyone help me?

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121227/f84b4e33/attachment.html>

From bishop.dev at gmail.com  Thu Dec 27 04:44:27 2012
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Thu, 27 Dec 2012 16:44:27 +0400
Subject: [gdal-dev] Compression artifacts
In-Reply-To: <50DC415A.30401@uva.nl>
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
	<50D036C6.2080406@uva.nl> <loom.20121218T115628-779@post.gmane.org>
	<50D057B6.5060001@uva.nl> <loom.20121218T125506-187@post.gmane.org>
	<50D06136.30407@uva.nl> <50DC415A.30401@uva.nl>
Message-ID: <50DC42AB.40202@gmail.com>

Hi Jan,

You can cut result raster with the geometry (shape file) using gdalwarp 
with cutline option (http://gdal.org/gdalwarp.html).

Best regards,
     Dmitry

27.12.2012 16:38, Jan Hartmann ?????:
> Can anyone tell me wath is happening here? I have a large three-band 
> raster (3.8G) looking like this:
>
> http://mapserver.sara.nl/map2a.png
>
> I compress it (from information from this list a few days ago) with:
>
> gdal_translate -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR big.tif small.tif
> gdaladdo --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW 
> YCBCR -ro -r gauss small.tif 2 4 8 16 32 64
>
> and get a file of 37M, which is nice. However, the map has all kinds 
> of rubbish at the borders. It looks like this:
>
> http://mapserver.sara.nl/map2b.png
>
> The equivalent pictures of a small part of the map look like this:
>
> http://mapserver.sara.nl/map1a.png
> http://mapserver.sara.nl/map1b.png
>
> Can anyone help me?
>
> Jan
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121227/8c5dd49b/attachment.html>

From j.l.h.hartmann at uva.nl  Thu Dec 27 04:59:49 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 27 Dec 2012 13:59:49 +0100
Subject: [gdal-dev] Compression artifacts
In-Reply-To: <50DC42AB.40202@gmail.com>
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
	<50D036C6.2080406@uva.nl> <loom.20121218T115628-779@post.gmane.org>
	<50D057B6.5060001@uva.nl> <loom.20121218T125506-187@post.gmane.org>
	<50D06136.30407@uva.nl> <50DC415A.30401@uva.nl>
	<50DC42AB.40202@gmail.com>
Message-ID: <50DC4645.1090005@uva.nl>

That would be an option. Am I right that the datasource of the -cutline 
option is a closed polygon, and that everything outside the polygon will 
be clipped?

However, I would prefer not to add extra steps. These are large maps and 
there are lots of them (about 17.000 for the whole of the Netherlands). 
It takes a lot of organisation to georeference them and display them 
efficiently over the web. Every additional processing step is a 
potential source of problems. So, although I am happy there is at least 
a workable solution, do you know what is happening here, and whether 
these artifacts can be prevented?

On 12/27/2012 01:44 PM, Dmitry Baryshnikov wrote:
> Hi Jan,
>
> You can cut result raster with the geometry (shape file) using 
> gdalwarp with cutline option (http://gdal.org/gdalwarp.html).
>
> Best regards,
>     Dmitry
>
> 27.12.2012 16:38, Jan Hartmann ?????:
>> Can anyone tell me wath is happening here? I have a large three-band 
>> raster (3.8G) looking like this:
>>
>> http://mapserver.sara.nl/map2a.png
>>
>> I compress it (from information from this list a few days ago) with:
>>
>> gdal_translate -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR big.tif small.tif
>> gdaladdo --config COMPRESS_OVERVIEW JPEG --config 
>> PHOTOMETRIC_OVERVIEW YCBCR -ro -r gauss small.tif 2 4 8 16 32 64
>>
>> and get a file of 37M, which is nice. However, the map has all kinds 
>> of rubbish at the borders. It looks like this:
>>
>> http://mapserver.sara.nl/map2b.png
>>
>> The equivalent pictures of a small part of the map look like this:
>>
>> http://mapserver.sara.nl/map1a.png
>> http://mapserver.sara.nl/map1b.png
>>
>> Can anyone help me?
>>
>> Jan
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121227/906997de/attachment.html>

From even.rouault at mines-paris.org  Thu Dec 27 05:27:19 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 27 Dec 2012 14:27:19 +0100
Subject: [gdal-dev] Compression artifacts
In-Reply-To: <50DC415A.30401@uva.nl>
References: <50CF7783.5030608@swoodbridge.com> <50D06136.30407@uva.nl>
	<50DC415A.30401@uva.nl>
Message-ID: <201212271427.19647.even.rouault@mines-paris.org>

Le jeudi 27 d?cembre 2012 13:38:50, Jan Hartmann a ?crit :
> Can anyone tell me wath is happening here? I have a large three-band
> raster (3.8G) looking like this:
> 
> http://mapserver.sara.nl/map2a.png
> 
> I compress it (from information from this list a few days ago) with:
> 
> gdal_translate -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR big.tif small.tif
> gdaladdo --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
> YCBCR -ro -r gauss small.tif 2 4 8 16 32 64
> 
> and get a file of 37M, which is nice. However, the map has all kinds of
> rubbish at the borders. It looks like this:
> 
> http://mapserver.sara.nl/map2b.png
> 
> The equivalent pictures of a small part of the map look like this:
> 
> http://mapserver.sara.nl/map1a.png
> http://mapserver.sara.nl/map1b.png
> 
> Can anyone help me?

The artifacts are due to the lossy characteristics of JPEG compression that 
are particularly visible on borders between nodata pixel and valid pixels. An 
option would be to use nearblack to create a .msk mask file :

nearblack -setmask -o big_with_mask.tif big.tif -of gtiff

(I'm not sure if your original image has black or white nodata areas. If it is 
white, then add -white to the previous command line)

And then do the gdal_translate with big_with_mask.tif as input (you should 
perhaps consider adding "-co TILED=YES" too), and then gdaladdo. I've just 
pushed a fix since building overviews with "--config COMPRESS_OVERVIEW JPEG --
config PHOTOMETRIC_OVERVIEW
YCBCR" when there's a .msk didn't work.

MapServer should be able to use the mask file as a transparency mask.

> 
> Jan

From j.l.h.hartmann at uva.nl  Thu Dec 27 05:37:49 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 27 Dec 2012 14:37:49 +0100
Subject: [gdal-dev] Compression artifacts
In-Reply-To: <201212271427.19647.even.rouault@mines-paris.org>
References: <50CF7783.5030608@swoodbridge.com> <50D06136.30407@uva.nl>
	<50DC415A.30401@uva.nl>
	<201212271427.19647.even.rouault@mines-paris.org>
Message-ID: <50DC4F2D.3030908@uva.nl>


On 12/27/2012 02:27 PM, Even Rouault wrote:
> The artifacts are due to the lossy characteristics of JPEG compression that
> are particularly visible on borders between nodata pixel and valid pixels. An
> option would be to use nearblack to create a .msk mask file :
>
> nearblack -setmask -o big_with_mask.tif big.tif -of gtiff
>
> (I'm not sure if your original image has black or white nodata areas. If it is
> white, then add -white to the previous command line)
>
> And then do the gdal_translate with big_with_mask.tif as input (you should
> perhaps consider adding "-co TILED=YES" too), and then gdaladdo. I've just
> pushed a fix since building overviews with "--config COMPRESS_OVERVIEW JPEG --
> config PHOTOMETRIC_OVERVIEW
> YCBCR" when there's a .msk didn't work.
>
> MapServer should be able to use the mask file as a transparency mask.
>
>
OK Even, thanks. This means that I should use gdal-svn?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121227/fbb098c4/attachment.html>

From even.rouault at mines-paris.org  Thu Dec 27 05:41:34 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 27 Dec 2012 14:41:34 +0100
Subject: [gdal-dev] Compression artifacts
In-Reply-To: <50DC4F2D.3030908@uva.nl>
References: <50CF7783.5030608@swoodbridge.com>
	<201212271427.19647.even.rouault@mines-paris.org>
	<50DC4F2D.3030908@uva.nl>
Message-ID: <201212271441.34759.even.rouault@mines-paris.org>

Le jeudi 27 d?cembre 2012 14:37:49, Jan Hartmann a ?crit :
> On 12/27/2012 02:27 PM, Even Rouault wrote:
> > The artifacts are due to the lossy characteristics of JPEG compression
> > that are particularly visible on borders between nodata pixel and valid
> > pixels. An option would be to use nearblack to create a .msk mask file :
> > 
> > nearblack -setmask -o big_with_mask.tif big.tif -of gtiff
> > 
> > (I'm not sure if your original image has black or white nodata areas. If
> > it is white, then add -white to the previous command line)
> > 
> > And then do the gdal_translate with big_with_mask.tif as input (you
> > should perhaps consider adding "-co TILED=YES" too), and then gdaladdo.
> > I've just pushed a fix since building overviews with "--config
> > COMPRESS_OVERVIEW JPEG -- config PHOTOMETRIC_OVERVIEW
> > YCBCR" when there's a .msk didn't work.
> > 
> > MapServer should be able to use the mask file as a transparency mask.
> 
> OK Even, thanks. This means that I should use gdal-svn?

Not necessarily. I think you can workaround the issue by manually building the 
overview on the .msk file as a post-processing step :

gdaladdo -ro --config COMPRESS_OVERVIEW DEFLATE small.tif.msk 2 4 8 16 32 64

From j.l.h.hartmann at uva.nl  Thu Dec 27 06:11:23 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 27 Dec 2012 15:11:23 +0100
Subject: [gdal-dev] Compression artifacts
In-Reply-To: <201212271441.34759.even.rouault@mines-paris.org>
References: <50CF7783.5030608@swoodbridge.com>
	<201212271427.19647.even.rouault@mines-paris.org>
	<50DC4F2D.3030908@uva.nl>
	<201212271441.34759.even.rouault@mines-paris.org>
Message-ID: <50DC570B.7010104@uva.nl>


On 12/27/2012 02:41 PM, Even Rouault wrote:
> I've just pushed a fix since building overviews with "--config
> COMPRESS_OVERVIEW JPEG -- config PHOTOMETRIC_OVERVIEW
> YCBCR" when there's a .msk didn't work.
>
>
>> OK Even, thanks. This means that I should use gdal-svn?
> Not necessarily. I think you can workaround the issue by manually building the
> overview on the .msk file as a post-processing step :
>
> gdaladdo -ro --config COMPRESS_OVERVIEW DEFLATE small.tif.msk 2 4 8 16 32 64
Do you mean I should use DEFLATE instead of JPEG as compression for 
overviews for the time being? What is the difference in compression ratio?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121227/84fe7d95/attachment-0001.html>

From even.rouault at mines-paris.org  Thu Dec 27 06:11:44 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 27 Dec 2012 15:11:44 +0100
Subject: [gdal-dev] Compression artifacts
In-Reply-To: <50DC570B.7010104@uva.nl>
References: <50CF7783.5030608@swoodbridge.com>
	<201212271441.34759.even.rouault@mines-paris.org>
	<50DC570B.7010104@uva.nl>
Message-ID: <201212271511.44289.even.rouault@mines-paris.org>

Le jeudi 27 d?cembre 2012 15:11:23, Jan Hartmann a ?crit :
> On 12/27/2012 02:41 PM, Even Rouault wrote:
> > I've just pushed a fix since building overviews with "--config
> > COMPRESS_OVERVIEW JPEG -- config PHOTOMETRIC_OVERVIEW
> > YCBCR" when there's a .msk didn't work.
> > 
> >> OK Even, thanks. This means that I should use gdal-svn?
> > 
> > Not necessarily. I think you can workaround the issue by manually
> > building the overview on the .msk file as a post-processing step :
> > 
> > gdaladdo -ro --config COMPRESS_OVERVIEW DEFLATE small.tif.msk 2 4 8 16 32
> > 64
> 
> Do you mean I should use DEFLATE instead of JPEG as compression for
> overviews for the time being? What is the difference in compression ratio?

Use DEFLATE only for the mask file (see small.tif.msk in the above command 
line), as it is a lossless compression, which is needed for a mask. JPEG is 
fine for the imagery itself


From j.l.h.hartmann at uva.nl  Thu Dec 27 06:35:25 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 27 Dec 2012 15:35:25 +0100
Subject: [gdal-dev] Compression artifacts
In-Reply-To: <201212271511.44289.even.rouault@mines-paris.org>
References: <50CF7783.5030608@swoodbridge.com>
	<201212271441.34759.even.rouault@mines-paris.org>
	<50DC570B.7010104@uva.nl>
	<201212271511.44289.even.rouault@mines-paris.org>
Message-ID: <50DC5CAD.2060405@uva.nl>


On 12/27/2012 03:11 PM, Even Rouault wrote:
> Le jeudi 27 d?cembre 2012 15:11:23, Jan Hartmann a ?crit :
>> On 12/27/2012 02:41 PM, Even Rouault wrote:
>>> I've just pushed a fix since building overviews with "--config
>>> COMPRESS_OVERVIEW JPEG -- config PHOTOMETRIC_OVERVIEW
>>> YCBCR" when there's a .msk didn't work.
>>>
>>>> OK Even, thanks. This means that I should use gdal-svn?
>>> Not necessarily. I think you can workaround the issue by manually
>>> building the overview on the .msk file as a post-processing step :
>>>
>>> gdaladdo -ro --config COMPRESS_OVERVIEW DEFLATE small.tif.msk 2 4 8 16 32
>>> 64
>> Do you mean I should use DEFLATE instead of JPEG as compression for
>> overviews for the time being? What is the difference in compression ratio?
> Use DEFLATE only for the mask file (see small.tif.msk in the above command
> line), as it is a lossless compression, which is needed for a mask. JPEG is
> fine for the imagery itself
Sorry, I don't understand. Where does that small.tif.msk come from? 
Until now I had:
- the original raster (big.tif)
- the raster masked with nearblack (big_with_mask.tif)
- the compressed raster (gdal_translate -co...)
- the overviews built with gdaladdo

The mask is part of the raster file, isn't  it?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121227/4f72fe48/attachment.html>

From even.rouault at mines-paris.org  Thu Dec 27 06:36:31 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 27 Dec 2012 15:36:31 +0100
Subject: [gdal-dev] Compression artifacts
In-Reply-To: <50DC5CAD.2060405@uva.nl>
References: <50CF7783.5030608@swoodbridge.com>
	<201212271511.44289.even.rouault@mines-paris.org>
	<50DC5CAD.2060405@uva.nl>
Message-ID: <201212271536.31478.even.rouault@mines-paris.org>

Le jeudi 27 d?cembre 2012 15:35:25, Jan Hartmann a ?crit :
> On 12/27/2012 03:11 PM, Even Rouault wrote:
> > Le jeudi 27 d?cembre 2012 15:11:23, Jan Hartmann a ?crit :
> >> On 12/27/2012 02:41 PM, Even Rouault wrote:
> >>> I've just pushed a fix since building overviews with "--config
> >>> COMPRESS_OVERVIEW JPEG -- config PHOTOMETRIC_OVERVIEW
> >>> YCBCR" when there's a .msk didn't work.
> >>> 
> >>>> OK Even, thanks. This means that I should use gdal-svn?
> >>> 
> >>> Not necessarily. I think you can workaround the issue by manually
> >>> building the overview on the .msk file as a post-processing step :
> >>> 
> >>> gdaladdo -ro --config COMPRESS_OVERVIEW DEFLATE small.tif.msk 2 4 8 16
> >>> 32 64
> >> 
> >> Do you mean I should use DEFLATE instead of JPEG as compression for
> >> overviews for the time being? What is the difference in compression
> >> ratio?
> > 
> > Use DEFLATE only for the mask file (see small.tif.msk in the above
> > command line), as it is a lossless compression, which is needed for a
> > mask. JPEG is fine for the imagery itself
> 
> Sorry, I don't understand. Where does that small.tif.msk come from?
> Until now I had:
> - the original raster (big.tif)
> - the raster masked with nearblack (big_with_mask.tif)

There should be a big_with_mask.tif.msk generated at that step, alongside 
big_with_mask.tif

> - the compressed raster (gdal_translate -co...)

And gdal_translate should also generate a small.tif.msk, as the input had a 
.msk file.

> - the overviews built with gdaladdo
> 
> The mask is part of the raster file, isn't  it?

From thare at usgs.gov  Thu Dec 27 08:18:53 2012
From: thare at usgs.gov (Hare, Trent)
Date: Thu, 27 Dec 2012 09:18:53 -0700
Subject: [gdal-dev] Compression artifacts
In-Reply-To: <50DC415A.30401@uva.nl>
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
	<50D036C6.2080406@uva.nl> <loom.20121218T115628-779@post.gmane.org>
	<50D057B6.5060001@uva.nl> <loom.20121218T125506-187@post.gmane.org>
	<50D06136.30407@uva.nl> <50DC415A.30401@uva.nl>
Message-ID: <CAB6t5t-tnvv71VaCSHwew0vFb30eXLrdyf2zHQ8FPcekv=2fGg@mail.gmail.com>

Jan,
   Jpeg is a lossy compression and thus the collar will not be maintained
perfectly as black (or 0). You will not get as much compression, but you
can try a lossless method like LZW or Packbits. If you are getting close to
the 4GB limit you might need to add "-co bigtiff=if_safer".

Good luck,
Trent



On Thu, Dec 27, 2012 at 5:38 AM, Jan Hartmann <j.l.h.hartmann at uva.nl> wrote:

>  Can anyone tell me wath is happening here? I have a large three-band
> raster (3.8G) looking like this:
>
> http://mapserver.sara.nl/map2a.png
>
> I compress it (from information from this list a few days ago) with:
>
> gdal_translate -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR big.tif small.tif
> gdaladdo --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
> YCBCR -ro -r gauss small.tif 2 4 8 16 32 64
>
> and get a file of 37M, which is nice. However, the map has all kinds of
> rubbish at the borders. It looks like this:
>
> http://mapserver.sara.nl/map2b.png
>
> The equivalent pictures of a small part of the map look like this:
>
> http://mapserver.sara.nl/map1a.png
> http://mapserver.sara.nl/map1b.png
>
> Can anyone help me?
>
> Jan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121227/4fa2b500/attachment.html>

From j.l.h.hartmann at uva.nl  Thu Dec 27 10:09:02 2012
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu, 27 Dec 2012 19:09:02 +0100
Subject: [gdal-dev] Compression artifacts
In-Reply-To: <CAB6t5t-tnvv71VaCSHwew0vFb30eXLrdyf2zHQ8FPcekv=2fGg@mail.gmail.com>
References: <50CF7783.5030608@swoodbridge.com>
	<201212172114.41805.even.rouault@mines-paris.org>
	<50D036C6.2080406@uva.nl> <loom.20121218T115628-779@post.gmane.org>
	<50D057B6.5060001@uva.nl> <loom.20121218T125506-187@post.gmane.org>
	<50D06136.30407@uva.nl> <50DC415A.30401@uva.nl>
	<CAB6t5t-tnvv71VaCSHwew0vFb30eXLrdyf2zHQ8FPcekv=2fGg@mail.gmail.com>
Message-ID: <50DC8EBE.8010409@uva.nl>

Thanks Trent, I tried it out:

original:                          3.886.894.126b
compressed DEFLATE:    266.046.034b
compressed LZW:             372.085.756b
compressed JPEG:             90.055.344b

Although DEFLATE and LZW give very good results, JPEG compression is so 
much better that I need to go for it. The base raster is the cadastral 
map of Amsterdam in 1832 with a resolution of 30 cm. This is only the 
low-resolution scan, the base scan has a resolution of 15 cm, slightly 
better than Google Satellite. We are trying to set things up for the 
whole of the Netherlands, and with this sort of precision even a small 
country generates an awful lot of raster scans, and needs unbelievable 
amounts of processing, even with the Cloud system we have available now.

That means, I'll have to clip the maps. It can be done as Dmitry 
suggested (gdalwarp -cutline), or alternatively using gdal-rasterize. I 
do have the bounding polygons. It can also be done with nearblack, as 
Even suggested. I guess the last method will take somewhat more time, as 
the area of the map has to be computed.

Thanks for all your suggestions, they made me see where the problem 
lies. And a happy New Year to all.

Jan

On 12/27/2012 05:18 PM, Hare, Trent wrote:
> Jan,
>    Jpeg is a lossy compression and thus the collar will not be 
> maintained perfectly as black (or 0). You will not get as much 
> compression, but you can try a lossless method like LZW or Packbits. 
> If you are getting close to the 4GB limit you might need to add "-co 
> bigtiff=if_safer".
>
> Good luck,
> Trent
>
>
>
> On Thu, Dec 27, 2012 at 5:38 AM, Jan Hartmann <j.l.h.hartmann at uva.nl 
> <mailto:j.l.h.hartmann at uva.nl>> wrote:
>
>     Can anyone tell me wath is happening here? I have a large
>     three-band raster (3.8G) looking like this:
>
>     http://mapserver.sara.nl/map2a.png
>
>     I compress it (from information from this list a few days ago) with:
>
>     gdal_translate -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR big.tif
>     small.tif
>     gdaladdo --config COMPRESS_OVERVIEW JPEG --config
>     PHOTOMETRIC_OVERVIEW YCBCR -ro -r gauss small.tif 2 4 8 16 32 64
>
>     and get a file of 37M, which is nice. However, the map has all
>     kinds of rubbish at the borders. It looks like this:
>
>     http://mapserver.sara.nl/map2b.png
>
>     The equivalent pictures of a small part of the map look like this:
>
>     http://mapserver.sara.nl/map1a.png
>     http://mapserver.sara.nl/map1b.png
>
>     Can anyone help me?
>
>     Jan
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121227/7ca1477a/attachment-0001.html>

From apsmith2367 at gmail.com  Thu Dec 27 11:14:40 2012
From: apsmith2367 at gmail.com (Andrew Smith)
Date: Thu, 27 Dec 2012 14:14:40 -0500
Subject: [gdal-dev] GDAL_GRID Dateline Issue
Message-ID: <CAEgGcFZpz5EwJKQeLEz9RrwSWQ_7h9r6HYJzbjsM=ajP5YYyfA@mail.gmail.com>

Hi,

I am trying to use gdal_grid to interpolate some data and I am having
trouble making gdal_grid treat spatial data (WGS84 lat/lon coordinates) as
points on a continuous plane.  It seems to be ignoring the dateline so for
example values at 45, 179 are not properly interacting with values at 45,
-179 and so on.  I'm using the following gdal_grid command:

gdal_grid -l bath bath.vrt bath.tif -outsize 4000 4000 -txe -180 180 -tye
-90 90

bath.vrt contents are as follows:

<OGRVRTDataSource>
    <OGRVRTLayer name="bath">
    <SrcDataSource>bath.csv</SrcDataSource>
    <GeometryType>wkbPoint</GeometryType>
    <GeometryField encoding="PointFromColumns" x="LON" y="LAT" z="DEPTH"/>
    <LayerSRS>WGS84</LayerSRS>
    </OGRVRTLayer>
</OGRVRTDataSource>

bath.csv contents are:
LAT, LON, DEPTH
0, 0, 3100
-25, -120, 4200
35, 150, 5000
37, 152, 5900
38, 158, 6900
-60, 30, 2500
-62, 29, 2300
-60, 20, 1200
-80, -150, 500
80, 140, 700


I can see when I plot these values using mapserver that the points near the
dateline don't seem to be "wrapping" properly.  Here's the image that I'm
creating:

http://i1025.photobucket.com/albums/y315/deuce2367/bath_zps7434f8d2.png

Embedded link:  <a href="
http://s1025.beta.photobucket.com/user/deuce2367/media/bath_zps7434f8d2.png.html"
target="_blank"><img src="
http://i1025.photobucket.com/albums/y315/deuce2367/bath_zps7434f8d2.png"
border="0" alt="Photobucket"/></a>

Any help with this issue is greatly appreciated!!

Thanks,

-Andy Smith
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121227/262678d5/attachment.html>

From even.rouault at mines-paris.org  Thu Dec 27 11:22:56 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 27 Dec 2012 20:22:56 +0100
Subject: [gdal-dev] GDAL_GRID Dateline Issue
In-Reply-To: <CAEgGcFZpz5EwJKQeLEz9RrwSWQ_7h9r6HYJzbjsM=ajP5YYyfA@mail.gmail.com>
References: <CAEgGcFZpz5EwJKQeLEz9RrwSWQ_7h9r6HYJzbjsM=ajP5YYyfA@mail.gmail.com>
Message-ID: <201212272022.56590.even.rouault@mines-paris.org>

Le jeudi 27 d?cembre 2012 20:14:40, Andrew Smith a ?crit :
> Hi,
> 
> I am trying to use gdal_grid to interpolate some data and I am having
> trouble making gdal_grid treat spatial data (WGS84 lat/lon coordinates) as
> points on a continuous plane.  It seems to be ignoring the dateline so for
> example values at 45, 179 are not properly interacting with values at 45,
> -179 and so on.  I'm using the following gdal_grid command:
> 

Yes gdal_grid is completely unaware of dateline issues. One way to fix this is 
to duplicate the lines of your csv file by adding 360 to the longitude of the 
original lines.

From jluis at ualg.pt  Thu Dec 27 11:44:10 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu, 27 Dec 2012 19:44:10 +0000
Subject: [gdal-dev] GDAL_GRID Dateline Issue
In-Reply-To: <201212272022.56590.even.rouault@mines-paris.org>
References: <CAEgGcFZpz5EwJKQeLEz9RrwSWQ_7h9r6HYJzbjsM=ajP5YYyfA@mail.gmail.com>
	<201212272022.56590.even.rouault@mines-paris.org>
Message-ID: <50DCA50A.2060000@ualg.pt>

On 27-12-2012 19:22, Even Rouault wrote:
> Le jeudi 27 d?cembre 2012 20:14:40, Andrew Smith a ?crit :
>> Hi,
>>
>> I am trying to use gdal_grid to interpolate some data and I am having
>> trouble making gdal_grid treat spatial data (WGS84 lat/lon coordinates) as
>> points on a continuous plane.  It seems to be ignoring the dateline so for
>> example values at 45, 179 are not properly interacting with values at 45,
>> -179 and so on.  I'm using the following gdal_grid command:
>>
> Yes gdal_grid is completely unaware of dateline issues. One way to fix this is
> to duplicate the lines of your csv file by adding 360 to the longitude of the
> original lines.
>


GMT is well aware that the Earth is round and will take care of this 
problem. If you are creating a grid (floats) try 'surface' or one of the 
other interpolator.

Joaquim

From pcreso at pcreso.com  Thu Dec 27 13:39:12 2012
From: pcreso at pcreso.com (pcreso at pcreso.com)
Date: Thu, 27 Dec 2012 13:39:12 -0800 (PST)
Subject: [gdal-dev] GDAL_GRID Dateline Issue
In-Reply-To: <201212272022.56590.even.rouault@mines-paris.org>
Message-ID: <1356644352.9854.YahooMailClassic@web122004.mail.ne1.yahoo.com>



> Hi,
> 
> I am trying to use gdal_grid to interpolate some data and I am having
> trouble making gdal_grid treat spatial data (WGS84 lat/lon coordinates) as
> points on a continuous plane.? It seems to be ignoring the dateline so for
> example values at 45, 179 are not properly interacting with values at 45,
> -179 and so on.? I'm using the following gdal_grid command:
> 

Hi Andrew, 

A common problem for us in New Zealand :-)

convert your data to 0-360 longitudinal space instead of +-180, it moves the problem to the other side of the world. Add 360 to all negative longitudes. One easy way, given that you'll have proj.4 installed with gdal:

Proj.4 supports the parameter "+lon_wrap" (ignored by proj, but supported in cs2cs) which assigns any given central meridian to the output coords, & you want a central meridian of 180 instead of 0. 

eg:
echo "179 -45 -179 -45" | cs2cs +proj=longlat +datum=WGS84 +to +proj=longlat +datum=WGS84+lon_wrap=180 -f '%0.6f'
179.000000????? -45.000000 0.000000
181.000000????? -45.000000 0.000000

Documented at:
http://trac.osgeo.org/proj/wiki/GenParms#lon_wrapover-LongitudeWrapping

HTH,

?? Brent Wood
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121227/0c340ff4/attachment.html>

From matt.gregory at oregonstate.edu  Thu Dec 27 15:31:50 2012
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Thu, 27 Dec 2012 23:31:50 +0000
Subject: [gdal-dev] gdalwarp - trouble projecting from EPSG:4326 to EPSG:3857
Message-ID: <7C48E40C135D314BA03D6471A6E389780DC5FE@EX1.oregonstate.edu>

Hi all,

I'm trying to project a raster from EPSG:4326 to EPSG:3857 and I get the following error:

> gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 -of GTiff 
  -dstnodata 255 vc_2006.tif vc_2006_2.tif

ERROR 1: failed to load NAD27-83 correction file
ERROR 1: GDALSuggestedWarpOutput() failed because the passed
  transformer failed.

I've seen many threads that have this same error and, from what I've seen, the common problems are an incorrect/missing PROJ.4 library or the PROJ_LIB env. variable not being set.  But I've been able to use gdalwarp to convert between many other PCSs, including ones that have include NAD27/NAD83 in their definition.  I'm unclear why this error would appear given that the NAD27-83 correction shouldn't even impact this particular projection?

I'm on Windows 7 64-bit, using gdal 1.7 branch (r19510) and proj 4.4.6 so it's a bit old - could that be an issue?  Or am I not understanding how this projection should work.  Note that I get the same problem using EPSG:3785.

Thanks for any help.
matt 

From selimnairb at gmail.com  Fri Dec 28 07:43:07 2012
From: selimnairb at gmail.com (Brian Miles)
Date: Fri, 28 Dec 2012 10:43:07 -0500
Subject: [gdal-dev] GDAL 1.9.2 python swig-modules build fails on OS X Lion
Message-ID: <24F9B901-AA0B-48FF-84DF-7E0A5E5B8638@gmail.com>


Hello,

I'm getting the following error when building python modules for GDAL 1.9.2 on OS X Lion:

> for dir in python ; do (cd $dir; make build) || exit; done
> python setup.py build
> running build
> running build_py
> creating build
> creating build/lib.macosx-10.7-intel-2.7
> copying gdal.py -> build/lib.macosx-10.7-intel-2.7
> copying ogr.py -> build/lib.macosx-10.7-intel-2.7
> copying osr.py -> build/lib.macosx-10.7-intel-2.7
> copying gdalconst.py -> build/lib.macosx-10.7-intel-2.7
> copying gdalnumeric.py -> build/lib.macosx-10.7-intel-2.7
> creating build/lib.macosx-10.7-intel-2.7/osgeo
> copying osgeo/__init__.py -> build/lib.macosx-10.7-intel-2.7/osgeo
> copying osgeo/gdal.py -> build/lib.macosx-10.7-intel-2.7/osgeo
> copying osgeo/gdal_array.py -> build/lib.macosx-10.7-intel-2.7/osgeo
> copying osgeo/gdalconst.py -> build/lib.macosx-10.7-intel-2.7/osgeo
> copying osgeo/gdalnumeric.py -> build/lib.macosx-10.7-intel-2.7/osgeo
> copying osgeo/ogr.py -> build/lib.macosx-10.7-intel-2.7/osgeo
> copying osgeo/osr.py -> build/lib.macosx-10.7-intel-2.7/osgeo
> running build_ext
> building 'osgeo._gdal' extension
> creating build/temp.macosx-10.7-intel-2.7
> creating build/temp.macosx-10.7-intel-2.7/extensions
> llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -I../../port -I../../gcore -I../../alg -I../../ogr/ -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I/Library/Python/2.7/site-packages/numpy-override/numpy/core/include -I/usr/local/src/gdal-1.9.2/include -c extensions/gdal_wrap.cpp -o build/temp.macosx-10.7-intel-2.7/extensions/gdal_wrap.o
> cc1plus: error: unrecognized command line option "-arch"
> cc1plus: error: unrecognized command line option "-arch"
> cc1plus: warning: command line option "-Wstrict-prototypes" is valid for Ada/C/ObjC but not for C++
> error: command 'llvm-gcc-4.2' failed with exit status 1
> make[2]: *** [build] Error 1
> make[1]: *** [build] Error 2
> make: *** [swig-modules] Error 2

I'm using the following configure:

> CC=clang CXX=clang++ ./configure --prefix=/opt/local --with-threads --disable-static --with-grass=/Applications/GRASS-6.4.app/Contents/MacOS --without-pg --with-jasper=/opt/local --with-libtiff=/opt/local --with-jpeg=/opt/local --with-gif=/opt/local --with-png=/opt/local --with-geotiff=internal --with-sqlite3=/Library/Frameworks/SQLite3.framework/unix --with-odbc --with-pcraster=internal --with-geos=/Library/Frameworks/GEOS.framework/unix/bin/geos-config --with-static-proj4=/Library/Frameworks/PROJ.framework/unix --with-expat=/usr/local --with-curl --with-python --with-macosx-framework=yes CFLAGS="-Os -arch x86_64" CXXFLAGS="-Os -arch x86_64" LDFLAGS="-arch x86_64"



Any help would be appreciated.

Sincerely,

Brian








-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121228/1647a99f/attachment-0001.html>

From landa.martin at gmail.com  Fri Dec 28 08:09:16 2012
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 28 Dec 2012 17:09:16 +0100
Subject: [gdal-dev] OGR-VFK in 1.9
In-Reply-To: <CA+TxYvMa0Jr0uLcxZkmjgyKtKnr36wtk4KB6F0M2Y9BW5x6uLA@mail.gmail.com>
References: <CA+Ei1OdT2y5sB14Ro11RNZWv5hMOTtUUJOGj9aQvchiG5mLYhw@mail.gmail.com>
	<CA+TxYvMK7JGnUXeD1UMhBY5OHtccPkB3zizjm+7p6WUsspHARg@mail.gmail.com>
	<CA+Ei1Oce71j8AzSH2rAQPGP2Avf4jQuOTMCQ9vsZ_HwH-9L-bQ@mail.gmail.com>
	<CA+Ei1OdqmMxrdArgEEnU-0Qx2vVuZBGgVA0rTxzan6VbUJt5OQ@mail.gmail.com>
	<1352108999.50978bc72014d@imp.free.fr>
	<CA+TxYvMa0Jr0uLcxZkmjgyKtKnr36wtk4KB6F0M2Y9BW5x6uLA@mail.gmail.com>
Message-ID: <CA+Ei1OeFDSShVkOpVch2Sog5mmo=V+H7ByivJhmZHZ7m2dLrKg@mail.gmail.com>

Hi,

2012/11/5 Etienne Tourigny <etourigny.dev at gmail.com>:
> e, the vfk driver would be optional (or at least could be
> disabled), so should not create any problems for people that do not
> compile it, right?

there is `--without-vfk` to disable VFk driver if needed.

Martin

-- 
Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa

From drmamidi at rothwellgroup.com  Fri Dec 28 13:20:36 2012
From: drmamidi at rothwellgroup.com (Dheeraj Reddy Mamidi)
Date: Fri, 28 Dec 2012 14:20:36 -0700
Subject: [gdal-dev] Creating Raster using Spatial Coordinates
Message-ID: <CAAU4rM_mTfgQ_3xf-cxQW4d5j-eEnB=Cv8XnL2R4Wgf8Wt94zg@mail.gmail.com>

 Hi,

 I am trying to create a raster (.img format or any other) using some
 spatial information (using set of points with latitude and longitude).
Each point
 is associated with a value. I need to create a raster file with only those
 points setting some defined boundary using GDAL (C#). I am new to using
 GDAL. Can some one help me achieve this?

 Thanks.
-- 
Dheeraj Reddy Mamidi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121228/add17902/attachment.html>

From lcelati at latitude-geosystems.com  Fri Dec 28 14:24:47 2012
From: lcelati at latitude-geosystems.com (image)
Date: Fri, 28 Dec 2012 14:24:47 -0800 (PST)
Subject: [gdal-dev] gdal 1.10 & osgeo4w
Message-ID: <1356733487536-5024954.post@n6.nabble.com>

Hello,

As you know, gdal 1.10 will release as version stable 2012/12/31. Could you
tell me when gdal 1.10 will be available and selectable via osgeo4w_setup
please?

Thank you to throw light for me.

With kind regards.

IMAGE 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-1-10-osgeo4w-tp5024954.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Fri Dec 28 14:28:18 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 28 Dec 2012 23:28:18 +0100
Subject: [gdal-dev] gdal 1.10 & osgeo4w
In-Reply-To: <1356733487536-5024954.post@n6.nabble.com>
References: <1356733487536-5024954.post@n6.nabble.com>
Message-ID: <201212282328.19332.even.rouault@mines-paris.org>

Le vendredi 28 d?cembre 2012 23:24:47, image a ?crit :
> Hello,
> 
> As you know, gdal 1.10 will release as version stable 2012/12/31.

Huh, and how did you determine that... ? The beta phase hasn't even yet 
started, so the release will not occur likely before end of January 2013.

> Could you
> tell me when gdal 1.10 will be available and selectable via osgeo4w_setup
> please?

Depends on volunteer's effort...


From lcelati at latitude-geosystems.com  Fri Dec 28 14:41:15 2012
From: lcelati at latitude-geosystems.com (image)
Date: Fri, 28 Dec 2012 14:41:15 -0800 (PST)
Subject: [gdal-dev] gdal 1.10 & osgeo4w
In-Reply-To: <201212282328.19332.even.rouault@mines-paris.org>
References: <1356733487536-5024954.post@n6.nabble.com>
	<201212282328.19332.even.rouault@mines-paris.org>
Message-ID: <1356734475594-5024958.post@n6.nabble.com>

Hello,

1/I thought that gdal would released as stable version 2012/12/31 because i
saw this information of the bottom of the following forum :

http://libregis.org/2012/08/25/updating-gdal-postgis-raster-driver/

2/Would it be possible to select gdal 1.10 beta via osgeo4w soon (during
January)?


Regards. 

Laurent Celati.




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-1-10-osgeo4w-tp5024954p5024958.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From kyle at pobox.com  Fri Dec 28 14:45:50 2012
From: kyle at pobox.com (Kyle Shannon)
Date: Fri, 28 Dec 2012 15:45:50 -0700
Subject: [gdal-dev] gdal 1.10 & osgeo4w
In-Reply-To: <1356734475594-5024958.post@n6.nabble.com>
References: <1356733487536-5024954.post@n6.nabble.com>
	<201212282328.19332.even.rouault@mines-paris.org>
	<1356734475594-5024958.post@n6.nabble.com>
Message-ID: <CAJ0mEz21Goh8xiXnUo8e2OeW3Auj9U6QiSSbsLFQd36aO2GJKQ@mail.gmail.com>

Even, the Roadmap page in the wiki shows the end of the year, I
imagine that is where the date came from.

kss

On Fri, Dec 28, 2012 at 3:41 PM, image <lcelati at latitude-geosystems.com> wrote:
> Hello,
>
> 1/I thought that gdal would released as stable version 2012/12/31 because i
> saw this information of the bottom of the following forum :
>
> http://libregis.org/2012/08/25/updating-gdal-postgis-raster-driver/
>
> 2/Would it be possible to select gdal 1.10 beta via osgeo4w soon (during
> January)?
>
>
> Regards.
>
> Laurent Celati.
>
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-1-10-osgeo4w-tp5024954p5024958.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jluis at ualg.pt  Sat Dec 29 07:42:37 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat, 29 Dec 2012 15:42:37 +0000
Subject: [gdal-dev] gdal 1.10 & osgeo4w
In-Reply-To: <1356734475594-5024958.post@n6.nabble.com>
References: <1356733487536-5024954.post@n6.nabble.com>
	<201212282328.19332.even.rouault@mines-paris.org>
	<1356734475594-5024958.post@n6.nabble.com>
Message-ID: <50DF0F6D.9030604@ualg.pt>

On 28-12-2012 22:41, image wrote:
> Hello,
>
> 1/I thought that gdal would released as stable version 2012/12/31 because i
> saw this information of the bottom of the following forum :
>
> http://libregis.org/2012/08/25/updating-gdal-postgis-raster-driver/
>
> 2/Would it be possible to select gdal 1.10 beta via osgeo4w soon (during
> January)?
>
>
> Regards.
>
> Laurent Celati.

Just to inform that my idea of building the current trunk version and 
under the name of 'gdal19.dll' and sticking it place of the 
C:\OSGeo4W\bin one works. I got only a error about an error about a 
openlayers plugin, probably because my build doesn't have the needed 
dependency for that plugin.
Things we much easy for me because all my dependencies have kind of 
private names so I really only had to replace the gdal19.dll. Within a 
more 'standard' organization the fishing of the right dependencies would 
be a bit more trickier.

Happy New year

Joaquim


From selimnairb at gmail.com  Sat Dec 29 14:01:47 2012
From: selimnairb at gmail.com (Brian Miles)
Date: Sat, 29 Dec 2012 17:01:47 -0500
Subject: [gdal-dev] GDAL 1.9.2 python swig-modules build fails on OS X
	Lion
In-Reply-To: <mailman.1952.1356709395.1079.gdal-dev@lists.osgeo.org>
References: <mailman.1952.1356709395.1079.gdal-dev@lists.osgeo.org>
Message-ID: <702A8573-ADB5-4ECF-91A2-9226DBDFBB0E@gmail.com>


It looks like GDAL was being built with clang/clang++, but the Python module was being build with llvm-gcc-4.2 and CFLAGS configured via a previous configure run.

I re-extracted the GDAL source from the archive, re-ran configure, and was able to "make" and "make install" without problem.

Brian

On Dec 28, 2012, at 10:43 AM, gdal-dev-request at lists.osgeo.org wrote:

> Date: Fri, 28 Dec 2012 10:43:07 -0500
> From: Brian Miles <selimnairb at gmail.com>
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] GDAL 1.9.2 python swig-modules build fails on OS X
> 	Lion
> Message-ID: <24F9B901-AA0B-48FF-84DF-7E0A5E5B8638 at gmail.com>
> Content-Type: text/plain; charset="us-ascii"
> 
> 
> Hello,
> 
> I'm getting the following error when building python modules for GDAL 1.9.2 on OS X Lion:
> 
>> for dir in python ; do (cd $dir; make build) || exit; done
>> python setup.py build
>> running build
>> running build_py
>> creating build
>> creating build/lib.macosx-10.7-intel-2.7
>> copying gdal.py -> build/lib.macosx-10.7-intel-2.7
>> copying ogr.py -> build/lib.macosx-10.7-intel-2.7
>> copying osr.py -> build/lib.macosx-10.7-intel-2.7
>> copying gdalconst.py -> build/lib.macosx-10.7-intel-2.7
>> copying gdalnumeric.py -> build/lib.macosx-10.7-intel-2.7
>> creating build/lib.macosx-10.7-intel-2.7/osgeo
>> copying osgeo/__init__.py -> build/lib.macosx-10.7-intel-2.7/osgeo
>> copying osgeo/gdal.py -> build/lib.macosx-10.7-intel-2.7/osgeo
>> copying osgeo/gdal_array.py -> build/lib.macosx-10.7-intel-2.7/osgeo
>> copying osgeo/gdalconst.py -> build/lib.macosx-10.7-intel-2.7/osgeo
>> copying osgeo/gdalnumeric.py -> build/lib.macosx-10.7-intel-2.7/osgeo
>> copying osgeo/ogr.py -> build/lib.macosx-10.7-intel-2.7/osgeo
>> copying osgeo/osr.py -> build/lib.macosx-10.7-intel-2.7/osgeo
>> running build_ext
>> building 'osgeo._gdal' extension
>> creating build/temp.macosx-10.7-intel-2.7
>> creating build/temp.macosx-10.7-intel-2.7/extensions
>> llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -I../../port -I../../gcore -I../../alg -I../../ogr/ -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I/Library/Python/2.7/site-packages/numpy-override/numpy/core/include -I/usr/local/src/gdal-1.9.2/include -c extensions/gdal_wrap.cpp -o build/temp.macosx-10.7-intel-2.7/extensions/gdal_wrap.o
>> cc1plus: error: unrecognized command line option "-arch"
>> cc1plus: error: unrecognized command line option "-arch"
>> cc1plus: warning: command line option "-Wstrict-prototypes" is valid for Ada/C/ObjC but not for C++
>> error: command 'llvm-gcc-4.2' failed with exit status 1
>> make[2]: *** [build] Error 1
>> make[1]: *** [build] Error 2
>> make: *** [swig-modules] Error 2
> 
> I'm using the following configure:
> 
>> CC=clang CXX=clang++ ./configure --prefix=/opt/local --with-threads --disable-static --with-grass=/Applications/GRASS-6.4.app/Contents/MacOS --without-pg --with-jasper=/opt/local --with-libtiff=/opt/local --with-jpeg=/opt/local --with-gif=/opt/local --with-png=/opt/local --with-geotiff=internal --with-sqlite3=/Library/Frameworks/SQLite3.framework/unix --with-odbc --with-pcraster=internal --with-geos=/Library/Frameworks/GEOS.framework/unix/bin/geos-config --with-static-proj4=/Library/Frameworks/PROJ.framework/unix --with-expat=/usr/local --with-curl --with-python --with-macosx-framework=yes CFLAGS="-Os -arch x86_64" CXXFLAGS="-Os -arch x86_64" LDFLAGS="-arch x86_64"
> 
> 
> 
> Any help would be appreciated.
> 
> Sincerely,
> 
> Brian

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121229/4b03257d/attachment.html>

From even.rouault at mines-paris.org  Sun Dec 30 00:44:31 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 30 Dec 2012 09:44:31 +0100
Subject: [gdal-dev] A geocoding client API in GDAL/OGR
Message-ID: <201212300944.31241.even.rouault@mines-paris.org>

Hi all,

A new API has been added to GDAL/OGR to use geocoding services, such as 
OpenStreetMap Nominatim, MapQuest Nominatim, Yahoo! PlaceFinder, GeoNames or 
Bing.

For more details, see
http://erouault.blogspot.fr/2012/12/a-geocoding-client-api-in-gdalogr.html

Best regards,

Even

From nik at nikosalexandris.net  Sun Dec 30 04:05:43 2012
From: nik at nikosalexandris.net (Nikos Alexandris)
Date: Sun, 30 Dec 2012 14:05:43 +0200
Subject: [gdal-dev] On compiling Proj4: Why does checkinstall complain about
	--pkgname?
Message-ID: <3819136.CV8kWtKfXa@vertikal>

Hi!

(apologies for cross-posting)

I am trying to get a grip on the use of checkinstall in compiling Proj4, GEOS, 
GDAL.  My long-term goal is to build a (custom) script to automate the 
compilation of the above plus GRASS, plus GDAL's GRASS-driver plugin.

In general, checkinstall builds and isntalls the above just fine (I guess!).  
However, I wonder why several parameters are not read correctly.  I am in the 
testing-phase, feeding checkinstall with parameters, e.g.

# manually instruct checkinstall
src/proj$ sudo checkinstall -D --maintainer=nik at nikosalexandris.net --
pkgname=proj4 --pkgversion=`date +%F` -A "amd64" --pkglicense "MIT License, 
Copyright (c) 2000, Frank Warmerdam" --pkgsource "/geo/osgeo/src/proj/" --
pkgaltsource "http://svn.osgeo.org/metacrs/proj/branches/4.8/proj/" --provides 
"proj48" --replaces "proj-bin" --gzman --strip=no --stripso=no --
pakdir=$HOME/src/checkinstall_pakdir --deldoc=yes --deldesc=yes --delspec=yes 
--backup=no


The outcome is:

--%<---
checkinstall 1.6.2, Copyright 2009 Felipe Eduardo Sanchez Diaz Duran
           This software is released under the GNU GPL.

/usr/bin/checkinstall: eval: line 553: syntax error near unexpected token `('
/usr/bin/checkinstall: eval: line 553: `echo MIT License, Copyright (c) 2000, 
Frank Warmerdam'


*****************************************
**** Debian package creation selected ***
*****************************************

*** Warning: The package name "%PACKAGE_NAME" contains upper case
*** Warning: letters. dpkg might not like that so I changed
*** Warning: them to lower case.

*** Warning: The package name "%package_name" does not start with
*** Warning: an alphanumetic character. dpkg might not like that so I prefixed
*** Warning: it with a number 0.

*** Warning: The package name "0%package_name" contains illegal
*** Warning: characters. dpkg might not like that so I changed
*** Warning: them to dashes.

*** Warning: The package version "%PACKAGE_VERSION" is not a
*** Warning: debian policy compliant one. Please specify an alternate one
--->%--


I press "Enter" here and then:

--%<---
This package will be built according to these values: 

0 -  Maintainer: [ nik at nikosalexandris.net ]
1 -  Summary: [ Cartographic projection software ]
2 -  Name:    [ 0-package-name ]
3 -  Version: [  ]
4 -  Release: [ 1 ]
5 -  License: [ MIT License, Copyright (c) 2000, Frank Warmerdam ]
6 -  Group:   [ Applications/GIS ]
7 -  Architecture: [ amd64 ]
8 -  Source location: [ /geo/osgeo/src/proj/ ]
9 -  Alternate source location: [ 
http://svn.osgeo.org/metacrs/proj/branches/4.8/proj/ ]
10 - Requires: [  ]
11 - Provides: [ 0-package-name ]
12 - Conflicts: [  ]
13 - Replaces: [ proj-bin ]

Enter a number to change any of them or press ENTER to continue:
--->%--


Grepping some stuff lead me to the proj.spec file.  Stuff like "%PACKAGE_NAME" 
and "%PACKAGE_VERSION" are obviously not meant for bash, right?  Why does 
checkinstall picks this up?  What is the correct way to use checkinstall here?

Thank you, Nikos
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 230 bytes
Desc: This is a digitally signed message part.
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121230/04198714/attachment.pgp>

From nik at nikosalexandris.net  Sun Dec 30 05:21:30 2012
From: nik at nikosalexandris.net (Nikos Alexandris)
Date: Sun, 30 Dec 2012 15:21:30 +0200
Subject: [gdal-dev] On compiling Proj4: Why does checkinstall complain
	about --pkgname?
In-Reply-To: <20121230235647.3a8518dc@dougshost.douglaidlaw.net>
References: <2021350.1zRTaLYpLX@vertikal>
	<20121230235647.3a8518dc@dougshost.douglaidlaw.net>
Message-ID: <33117152.r0o2NdENFP@vertikal>

Doug:

> Checkinstall seems to be dead.  Felipe was the only one maintaining
> it.  You may have better luck using alien from a .deb version of the
> applications.

What a pity it would be if such a wonderful project is really un-maintained...
 
> (Come on, Felipe. Prove me wrong.)
> 
> The unexpected '(' sounds like an error in checkinstall's own code.

Thanks, Nikos

[rest deleted]
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 230 bytes
Desc: This is a digitally signed message part.
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121230/4bdc28f0/attachment.pgp>

From silyko at gmail.com  Sun Dec 30 16:07:33 2012
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Mon, 31 Dec 2012 01:07:33 +0100
Subject: [gdal-dev] GDAL, Python and PyQt4 bindings on windows
In-Reply-To: <CAFm_kvS5G9LSgAM+em+p+PgoexwDwwLToapmh4U83qr23q+G_A@mail.gmail.com>
References: <CAFm_kvS5G9LSgAM+em+p+PgoexwDwwLToapmh4U83qr23q+G_A@mail.gmail.com>
Message-ID: <CANzGYpQk8hgd5Y7uXRROVnperwVSNOJnt033-APVXRtqdhc2FA@mail.gmail.com>

Hi Luis,

   I have encountered a similar issue on my machine (win xp sp3 too). I
think what I saw was due to PyQt4 using a version of libmysql.dll, which
gdal is also linked against (dll included in the binaries from Tamas), and
it is crucial which version is found first by windows. Notice that windows
will look in the "current directory" and the directory of the running
application before using the PATH variable. So if ERIC is using a path,
where the PyQt4 version of libmysql.dll is found first, that might cause
the problem. Also it is possible that ERIC manipulates the PATH env.
variable (try to type os.environ["PATH"]) in order to locate the right
dll's in its own context.

  Cheers.
  Simon


On Mon, Dec 24, 2012 at 8:37 AM, Luis Solis <solisgb at gmail.com> wrote:

> Hi
>
> I've installed GDAL and python bindings (py 2.7) on win xp sp3 using Tamas
> Szekeres's binaries.
>
> All the environmental variables are ok (path, gdal_data and pythonpath).
>
> path2gdal is the first in the list of directories in the PATH(PATH=c:\gdal;...)
>
> I've tried with a simple test
>
>     try:
>        from osgeo import ogr
>     except:
>        import ogr
>
> If I run the script from command line all is ok
>
> I'm using Eric IDE. Eric uses PyQt4. If I try to run the script from Eric,
> the test throws the error message
>
> ImportError: DLL load failed
>
> I don't know what I can do
>
> --
> Luis Sol?s
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121231/8db93665/attachment.html>

From ben at vterrain.org  Sun Dec 30 22:06:03 2012
From: ben at vterrain.org (Ben Discoe)
Date: Sun, 30 Dec 2012 22:06:03 -0800
Subject: [gdal-dev] bug in OGRGeometryTypeToName
Message-ID: <03c301cde71c$ea431da0$bec958e0$@vterrain.org>

Unless there's something I'm not understanding, it seems there is a highly
visible bug in OGRGeometryTypeToName() in GDAL 1.9.2.  Namely, it says that
all 3D types are 2D, and 2D types are 3D.  See ogrgeometry.cpp:

    bool b25D = wkbFlatten(eType) != eType;
    switch( wkbFlatten(eType) )
    {
      case wkbUnknown:
        if( b25D )
            return "Unknown (any)";
        else
            return "3D Unknown (any)";

See how it returns "3D" in the non-b25D case.

This can be easily demonstrated with ogrinfo on a 2D file (in this case
wkbLineString):

ogrinfo Contour.shp
INFO: Open of ` Contour.shp'
      using driver `ESRI Shapefile' successful.
1: Contour (3D Line String)

Maybe this bug is already fixed in HEAD?

Thanks,
Ben



From even.rouault at mines-paris.org  Mon Dec 31 02:33:42 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 31 Dec 2012 11:33:42 +0100
Subject: [gdal-dev] bug in OGRGeometryTypeToName
In-Reply-To: <03c301cde71c$ea431da0$bec958e0$@vterrain.org>
References: <03c301cde71c$ea431da0$bec958e0$@vterrain.org>
Message-ID: <201212311133.42877.even.rouault@mines-paris.org>

> Maybe this bug is already fixed in HEAD?

Yes, and 1.9 branch too. See http://trac.osgeo.org/gdal/ticket/4871

> 
> Thanks,
> Ben
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From tyler.mitchell at actian.com  Mon Dec 31 11:44:07 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Mon, 31 Dec 2012 11:44:07 -0800
Subject: [gdal-dev] Ignore geometry_columns table in VRT
Message-ID: <2A457CFE-C34E-41E6-A018-F9B15377B231@actian.com>

Hi all,
I'm building a VRT that connects to an Ingres db to grab some WKT text from a text column.  I can run ogrinfo against it just fine, though it complains about not finding geometry_columns table (this is a non-spatial db example), it still returns all the detailed records.  But in MapServer when I connect it actually fails and throws a blocking error.  I did find, though, that it worked fine for my point and line layers - but failed on my polygon layers.  

I'm assuming this is a function of the Ingres driver, but thought I'd ask in case someone could recommend a way to override the driver an NOT automatically look for a geometry_columns table, since it isn't using it anyway.

Tips?

From even.rouault at mines-paris.org  Mon Dec 31 12:05:58 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 31 Dec 2012 21:05:58 +0100
Subject: [gdal-dev] Ignore geometry_columns table in VRT
In-Reply-To: <2A457CFE-C34E-41E6-A018-F9B15377B231@actian.com>
References: <2A457CFE-C34E-41E6-A018-F9B15377B231@actian.com>
Message-ID: <201212312105.58470.even.rouault@mines-paris.org>

Le lundi 31 d?cembre 2012 20:44:07, Tyler Mitchell a ?crit :
> Hi all,
> I'm building a VRT that connects to an Ingres db to grab some WKT text from
> a text column.  I can run ogrinfo against it just fine, though it
> complains about not finding geometry_columns table (this is a non-spatial
> db example), it still returns all the detailed records.  But in MapServer
> when I connect it actually fails and throws a blocking error.  I did find,
> though, that it worked fine for my point and line layers - but failed on
> my polygon layers.
> 
> I'm assuming this is a function of the Ingres driver, but thought I'd ask
> in case someone could recommend a way to override the driver an NOT
> automatically look for a geometry_columns table, since it isn't using it
> anyway.

Just from code looking, I see that the geometry_columns table is queried from 
OGRIngresLayer::FetchSRSId(OGRFeatureDefn *poDefn), which is called by 
OGRIngresTableLayer::ReadTableDefinition(). There's no way (apart changing the 
code of course!) to disable that query. But I'm not clear why a failure of it 
would cause MapServer to misbehave if ogrinfo works.

> 
> Tips?
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From woodbri at swoodbridge.com  Mon Dec 31 12:17:30 2012
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon, 31 Dec 2012 15:17:30 -0500
Subject: [gdal-dev] Ignore geometry_columns table in VRT
In-Reply-To: <201212312105.58470.even.rouault@mines-paris.org>
References: <2A457CFE-C34E-41E6-A018-F9B15377B231@actian.com>
	<201212312105.58470.even.rouault@mines-paris.org>
Message-ID: <50E1F2DA.8060207@swoodbridge.com>

On 12/31/2012 3:05 PM, Even Rouault wrote:
> Le lundi 31 d?cembre 2012 20:44:07, Tyler Mitchell a ?crit :
>> Hi all,
>> I'm building a VRT that connects to an Ingres db to grab some WKT text from
>> a text column.  I can run ogrinfo against it just fine, though it
>> complains about not finding geometry_columns table (this is a non-spatial
>> db example), it still returns all the detailed records.  But in MapServer
>> when I connect it actually fails and throws a blocking error.  I did find,
>> though, that it worked fine for my point and line layers - but failed on
>> my polygon layers.
>>
>> I'm assuming this is a function of the Ingres driver, but thought I'd ask
>> in case someone could recommend a way to override the driver an NOT
>> automatically look for a geometry_columns table, since it isn't using it
>> anyway.
>
> Just from code looking, I see that the geometry_columns table is queried from
> OGRIngresLayer::FetchSRSId(OGRFeatureDefn *poDefn), which is called by
> OGRIngresTableLayer::ReadTableDefinition(). There's no way (apart changing the
> code of course!) to disable that query. But I'm not clear why a failure of it
> would cause MapServer to misbehave if ogrinfo works.

I think Mapserver checks this to see if it needs to reproject the data. 
You might be able to get around it by adding or removing "using srid 
xxxx" clause from the sql. Basically you want to trick mapserver into 
thinking that it does not need to do a reprojection then it might not 
make the check that is failing. Mind you this is only my intuition, I 
have not looked at the code.

-Steve


From tyler.mitchell at actian.com  Mon Dec 31 13:04:06 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Mon, 31 Dec 2012 13:04:06 -0800
Subject: [gdal-dev] Ignore geometry_columns table in VRT
In-Reply-To: <50E1F2DA.8060207@swoodbridge.com>
References: <2A457CFE-C34E-41E6-A018-F9B15377B231@actian.com>
	<201212312105.58470.even.rouault@mines-paris.org>
	<50E1F2DA.8060207@swoodbridge.com>
Message-ID: <A9C66659-33E4-4DEE-A579-74ABF22B512C@actian.com>

On 2012-12-31, at 12:17 PM, Stephen Woodbridge wrote:
>> Just from code looking, I see that the geometry_columns table is queried from
>> OGRIngresLayer::FetchSRSId(OGRFeatureDefn *poDefn), which is called by
>> OGRIngresTableLayer::ReadTableDefinition(). There's no way (apart changing the
>> code of course!) to disable that query. But I'm not clear why a failure of it
>> would cause MapServer to misbehave if ogrinfo works.
> 
> I think Mapserver checks this to see if it needs to reproject the data. You might be able to get around it by adding or removing "using srid xxxx" clause from the sql. Basically you want to trick mapserver into thinking that it does not need to do a reprojection then it might not make the check that is failing. Mind you this is only my intuition, I have not looked at the code.

Thanks guys, I'll give it a whirl.  Obviously I need to tweak our Ingres driver so it can work better too :)
The weirdest part was having different behaviour between points/lines and the polygons.. but I've found a workaround for now - just used a spatially enabled db instead heh.

Tyler

From matt.gregory at oregonstate.edu  Mon Dec 31 14:03:39 2012
From: matt.gregory at oregonstate.edu (Matt Gregory)
Date: Mon, 31 Dec 2012 14:03:39 -0800
Subject: [gdal-dev] gdalwarp - trouble projecting from EPSG:4326 to
	EPSG:3857
In-Reply-To: <7C48E40C135D314BA03D6471A6E389780DC5FE@EX1.oregonstate.edu>
References: <7C48E40C135D314BA03D6471A6E389780DC5FE@EX1.oregonstate.edu>
Message-ID: <kbt234$dv7$1@ger.gmane.org>

On 12/27/2012 3:31 PM, Gregory, Matthew wrote:
> I'm trying to project a raster from EPSG:4326 to EPSG:3857 and I get the following error:
>
>> gdalwarp -s_srs EPSG:4326 -t_srs EPSG:3857 -of GTiff
>    -dstnodata 255 vc_2006.tif vc_2006_2.tif
>
> ERROR 1: failed to load NAD27-83 correction file
> ERROR 1: GDALSuggestedWarpOutput() failed because the passed
>    transformer failed.
>
> I've seen many threads that have this same error and, from what I've seen, the common problems are an incorrect/missing PROJ.4 library or the PROJ_LIB env. variable not being set.  But I've been able to use gdalwarp to convert between many other PCSs, including ones that have include NAD27/NAD83 in their definition.  I'm unclear why this error would appear given that the NAD27-83 correction shouldn't even impact this particular projection?
>
> I'm on Windows 7 64-bit, using gdal 1.7 branch (r19510) and proj 4.4.6 so it's a bit old - could that be an issue?  Or am I not understanding how this projection should work.  Note that I get the same problem using EPSG:3785.

It turns out that my old version of PROJ.4 (specifically proj.dll) was 
to blame.  I updated to 4.8.0 (from OSGEO4W) and it works fine against 
GDAL 1.7.2 and 1.7.3.

(I did note that the last Windows binaries built for PROJ.4 on the 
webpage are version 4.4.6 which causes the error.  Is there a better 
place to get the binaries and/or should a new set of binaries be built?)

FWIW, matt



From bfraser at geoanalytic.com  Mon Dec 31 14:03:50 2012
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Mon, 31 Dec 2012 15:03:50 -0700
Subject: [gdal-dev] Ignore geometry_columns table in VRT
In-Reply-To: <A9C66659-33E4-4DEE-A579-74ABF22B512C@actian.com>
References: <2A457CFE-C34E-41E6-A018-F9B15377B231@actian.com>
	<201212312105.58470.even.rouault@mines-paris.org>
	<50E1F2DA.8060207@swoodbridge.com>
	<A9C66659-33E4-4DEE-A579-74ABF22B512C@actian.com>
Message-ID: <50E20BC6.6040106@geoanalytic.com>

Tyler,

   So using

<GeometryField encoding='WKT' field='myWKT'/>

in the VRT doesn't work when used with Mapserver?

Best Regards,
Brent Fraser

On 12/31/2012 2:04 PM, Tyler Mitchell wrote:
> On 2012-12-31, at 12:17 PM, Stephen Woodbridge wrote:
>>> Just from code looking, I see that the geometry_columns table is queried from
>>> OGRIngresLayer::FetchSRSId(OGRFeatureDefn *poDefn), which is called by
>>> OGRIngresTableLayer::ReadTableDefinition(). There's no way (apart changing the
>>> code of course!) to disable that query. But I'm not clear why a failure of it
>>> would cause MapServer to misbehave if ogrinfo works.
>> I think Mapserver checks this to see if it needs to reproject the data. You might be able to get around it by adding or removing "using srid xxxx" clause from the sql. Basically you want to trick mapserver into thinking that it does not need to do a reprojection then it might not make the check that is failing. Mind you this is only my intuition, I have not looked at the code.
> Thanks guys, I'll give it a whirl.  Obviously I need to tweak our Ingres driver so it can work better too :)
> The weirdest part was having different behaviour between points/lines and the polygons.. but I've found a workaround for now - just used a spatially enabled db instead heh.
>
> Tyler
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From tyler.mitchell at actian.com  Mon Dec 31 14:59:48 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Mon, 31 Dec 2012 14:59:48 -0800
Subject: [gdal-dev] Ignore geometry_columns table in VRT
In-Reply-To: <50E20BC6.6040106@geoanalytic.com>
References: <2A457CFE-C34E-41E6-A018-F9B15377B231@actian.com>
	<201212312105.58470.even.rouault@mines-paris.org>
	<50E1F2DA.8060207@swoodbridge.com>
	<A9C66659-33E4-4DEE-A579-74ABF22B512C@actian.com>
	<50E20BC6.6040106@geoanalytic.com>
Message-ID: <355739D2-0C82-44F7-844E-B02540A8628B@actian.com>


On 2012-12-31, at 2:03 PM, Brent Fraser wrote:

> Tyler,
> 
>  So using
> 
> <GeometryField encoding='WKT' field='myWKT'/>
> 
> in the VRT doesn't work when used with Mapserver?

Hi Brent,
Sort of yes, more or less, but upstreams errors from my OGR driver are somehow stopping it.
The main issue is with using a spatial db driver, on a non-spatial db - OGR wants to read the
geometry_columns table but it doesn't exist.  That's the error that's stopping me.  So I'll chalk it
up to a bad driver and work on fixing it that way.

Thanks!
Tyler

From bfraser at geoanalytic.com  Mon Dec 31 17:14:12 2012
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Mon, 31 Dec 2012 18:14:12 -0700
Subject: [gdal-dev] Ignore geometry_columns table in VRT
In-Reply-To: <355739D2-0C82-44F7-844E-B02540A8628B@actian.com>
References: <2A457CFE-C34E-41E6-A018-F9B15377B231@actian.com>
	<201212312105.58470.even.rouault@mines-paris.org>
	<50E1F2DA.8060207@swoodbridge.com>
	<A9C66659-33E4-4DEE-A579-74ABF22B512C@actian.com>
	<50E20BC6.6040106@geoanalytic.com>
	<355739D2-0C82-44F7-844E-B02540A8628B@actian.com>
Message-ID: <50E23864.2090506@geoanalytic.com>

Tyler,

   Hmm.  I did the same thing with spatial data in a non-spatial version 
of SQL Server (via ODBC), using a VRT within a .map file. Not sure if I 
had any polygons; maybe just points and lines. Must be a bug....

Best Regards,
Brent Fraser

On 12/31/2012 3:59 PM, Tyler Mitchell wrote:
> On 2012-12-31, at 2:03 PM, Brent Fraser wrote:
>
>> Tyler,
>>
>>   So using
>>
>> <GeometryField encoding='WKT' field='myWKT'/>
>>
>> in the VRT doesn't work when used with Mapserver?
> Hi Brent,
> Sort of yes, more or less, but upstreams errors from my OGR driver are somehow stopping it.
> The main issue is with using a spatial db driver, on a non-spatial db - OGR wants to read the
> geometry_columns table but it doesn't exist.  That's the error that's stopping me.  So I'll chalk it
> up to a bad driver and work on fixing it that way.
>
> Thanks!
> Tyler



