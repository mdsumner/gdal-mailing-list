From hmorkemo at gmail.com  Thu Jul  1 04:00:03 2010
From: hmorkemo at gmail.com (Helge Morkemo)
Date: Thu Jul  1 04:00:06 2010
Subject: [gdal-dev] Bigtiff
Message-ID: <AANLkTimqq6XaDa2dmMfeKj-TMxhBL5HSGTmkmHFxOki0@mail.gmail.com>

Hi
I'm creating a huge bigtiff file, it's 169000x151000 pixels (23.77
Gigapixels, rgb) from .net using WriteRaster.

In the beginning it seemed to be producing output with good performance, but
it is getting slower and slower.
The production time seems to be increasing in steps.
Is there a caching problem for huge files?

The first percent of the file was produced in 2 minutes. Acceptable.
>From 10 % to 11 % took 5 minutes
>From 37 % to 38 % also took 5 minutes
>From 38 % to 39 % took 50! minutes
>From 48 % to 49 % took 46 mminutes
>From 49.4% to 50.4 % (That's where I am right now) took 9 hours, 29 minutes.

Any hints? Am I doing something wrong (I just create the dataset and start
writing), or is the caching mechanism not suited for huge files?

-
Helge
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100701/f34374bd/attachment.html
From warmerdam at pobox.com  Thu Jul  1 04:08:16 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jul  1 04:08:19 2010
Subject: [gdal-dev] Bigtiff
In-Reply-To: <AANLkTimqq6XaDa2dmMfeKj-TMxhBL5HSGTmkmHFxOki0@mail.gmail.com>
References: <AANLkTimqq6XaDa2dmMfeKj-TMxhBL5HSGTmkmHFxOki0@mail.gmail.com>
Message-ID: <AANLkTik1TZDX1oqW1Cdd4q-2yCegm7YtG1o97OoiCstJ@mail.gmail.com>

On Thu, Jul 1, 2010 at 10:00 AM, Helge Morkemo <hmorkemo@gmail.com> wrote:
> Hi
> I'm creating a?huge bigtiff file, it's 169000x151000 pixels (23.77
> Gigapixels, rgb)?from .net using WriteRaster.
>
> In the beginning it seemed to be producing output with good performance, but
> it is getting slower and slower.
> The production time seems to be increasing in steps.
> Is there a caching problem for huge files?
>
> The first percent of the file was produced in 2 minutes. Acceptable.
> From 10 % to 11 % took 5 minutes
> From 37 % to 38 % also took 5 minutes
> From 38 % to 39 % took 50! minutes
> From 48 % to 49 % took 46 mminutes
> From 49.4% to 50.4 % (That's where I am right now) took 9 hours, 29 minutes.
>
> Any hints? Am I doing something wrong (I just create the dataset and start
> writing), or is the caching mechanism not suited for huge files?

Helge,

Is the output file using a blocksize which is one scanline?  Are you
calling WriteRaster() on scanline sized chunks?

GDAL caches some number of blocks based on the
cache size which can make the first few block writes seem
to go very fast since they are not getting flushed to disk
till later.  But that would not relate to your performance
oddities since you are well past the internal caching within
the first few percent of completion.

I really don't know why you are seeing the issue you are
encountering.  Is there any sign that the process is getting
very large in memory use - possibly due to some sort of
memory leak?

In a C++ program I'm able to write such sized files without
such an apparent loss of performance.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From Jez.Walters at ipl.com  Thu Jul  1 05:49:09 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Thu Jul  1 05:49:27 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <201006302053.41216.even.rouault@mines-paris.org>
References: <1277908276440-5237796.post@n2.nabble.com>
	<AANLkTilN3fdceYtIz47aXu2A_PTGhZ-Sx3AE_HLQO5Wg@mail.gmail.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980C7D84F@GOOFY.iplbath.com>
	<201006302053.41216.even.rouault@mines-paris.org>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A02980C7D8D4@GOOFY.iplbath.com>

Even,


This is precisely the fix I came up with yesterday, but I was wondering if there was a more "official" solution instead of editing the GML?


Warm regards,


Jez


-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Wednesday 30 June 2010 19:54
To: gdal-dev@lists.osgeo.org
Cc: Jez Walters; 'Frank Warmerdam'
Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap

Jez,

the reason for the orientation field to be recognize in the CartographicSymbol 
layer and not in the CartographicText layer lies in the structure of the GML 
file and limitations of the OGR GML driver and/or OGR data model.

Namely OGR only supports a "flat" organization of fields whereas GML (being 
XML based) supports a tree-like organization. In the CartographicSymbol 
layer, the orientation element is at the first level, whereas in the 
CartographicText, it is included inside the <textRendering> element, and then 
is ignored (see below examples)

<osgb:CartographicSymbol fid='osgb1000000729439973'>
	<osgb:featureCode>10165</osgb:featureCode>
	<osgb:version>1</osgb:version>
	<osgb:versionDate>2001-11-11</osgb:versionDate>
	<osgb:theme>Rail</osgb:theme>
	<osgb:changeHistory>
		<osgb:changeDate>2001-03-12</osgb:changeDate>
		<osgb:reasonForChange>New</osgb:reasonForChange>
	</osgb:changeHistory>
	<osgb:descriptiveGroup>Rail</osgb:descriptiveGroup>
	<osgb:descriptiveTerm>Switch</osgb:descriptiveTerm>
	<osgb:orientation>3009</osgb:orientation>
	<osgb:physicalLevel>50</osgb:physicalLevel>
	<osgb:point>
		<gml:Point srsName='osgb:BNG'>
			<gml:coordinates>291781.470,92943.570</gml:coordinates>
		</gml:Point>
	</osgb:point>
</osgb:CartographicSymbol>

<osgb:CartographicText fid='osgb1000000729439996'>
	<osgb:featureCode>10026</osgb:featureCode>
	<osgb:version>1</osgb:version>
	<osgb:versionDate>2001-11-11</osgb:versionDate>
	<osgb:theme>Buildings</osgb:theme>
	<osgb:anchorPoint>
	<gml:Point srsName='osgb:BNG'>
		<gml:coordinates>291636.850,92668.150</gml:coordinates>
		</gml:Point>
	</osgb:anchorPoint>
	<osgb:changeHistory>
		<osgb:changeDate>1987-12-01</osgb:changeDate>
		<osgb:reasonForChange>New</osgb:reasonForChange>
	</osgb:changeHistory>
	<osgb:descriptiveGroup>Buildings Or Structure</osgb:descriptiveGroup>
	<osgb:make>Manmade</osgb:make>
	<osgb:physicalLevel>50</osgb:physicalLevel>
	<osgb:textRendering>
		<osgb:anchorPosition>3</osgb:anchorPosition>
		<osgb:font>2</osgb:font>
		<osgb:height>1.500</osgb:height>
		<osgb:orientation>545</osgb:orientation>
	</osgb:textRendering>
	<osgb:textString>44</osgb:textString>
</osgb:CartographicText>

We could imagine an enhancement of the GML driver to try to "flatten" the 
attributes. For example to return textRendering_anchorPosition, 
textRendering_font, .... But it doesn't look trivial to add.

To workaround this, you can open the GML with your favorite text editor (or 
sed ;-)) and replace <osgb:textRendering> and </osgb:textRendering> by 
nothing

This works nicely ;-)

Best regards,

Even

Le Wednesday 30 June 2010 17:17:12 Jez Walters, vous avez ?crit?:
> Frank,
>
>
> Thanks for looking in to this!  I've just repeated the problem with the
> Ordnance Survey sample MasterMap, which is available from here:
>
> http://www.ordnancesurvey.co.uk/oswebsite/products/innovations/sampledata/O
>SMasterMap_Topo/58116-SX9192-2c1.gz
>
> I tried converting the above GML to ESRI shapefile using the following
> command:
>
> ogr2ogr SX9192 58116-SX9192-2c1
>
> One thing I've noticed is that the schema referenced in the GML
> (http://www.ordnancesurvey.co.uk/xml/schema/v7/OSDNFFeatures.xsd) defines a
> number of elements called "complexType".  The "complexType" element with a
> name of "CartographicTextType" is defined like this:
>
> <complexType name="CartographicTextType">
> 	<complexContent>
> 		<extension base="osgb:AbstractFeatureType">
> 			<sequence>
> 				<element name="anchorPoint" type="gml:PointPropertyType"/>
> 				<element name="changeHistory" type="osgb:changeHistoryType"
> maxOccurs="unbounded"/> <element name="descriptiveGroup"
> type="osgb:descriptiveGroupType" minOccurs="0" maxOccurs="unbounded"/>
> <element name="descriptiveTerm" type="string" minOccurs="0"
> maxOccurs="unbounded"/> <element name="make" type="osgb:makeType"
> minOccurs="0"/>
> 				<element name="physicalLevel" type="osgb:physicalLevelType"/>
> 				<element name="physicalPresence" type="osgb:physicalPresenceType"
> minOccurs="0"/> <element name="textRendering"
> type="osgb:textRenderingType"/>
> 				<element name="textString" type="string"/>
> 			</sequence>
> 		</extension>
> 	</complexContent>
> </complexType>
>
> >From which I conclude that the orientation is actually part of the
> > "textRendering" element.  I'm sure I'm on to something with this, but I'm
> > not sure how to proceed from here!
>
> Warm regards,
>
>
> Jez
>
>
> -----Original Message-----
> From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of Frank
> Warmerdam Sent: Wednesday 30 June 2010 15:38
> To: Jez Walters
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
> MasterMap
>
> Jez,
>
> Can you provide a mastermap file I can test with?
>
> Best regards,
>
> On Wed, Jun 30, 2010 at 4:31 PM, Jez Walters <jez.walters@ipl.com> wrote:
> > Not quite sure if I've got the right forum, but I'm having trouble using
> > the 'ogr2ogr' utility (part of GDAL 1.7.2) to convert Ordnance Survey GML
> > into ESRI shapefiles.
> >
> > The 'orientation' field is being ignored when I convert the
> > CartographicText layer, although this field gets successfully translated
> > for the
> > CartographicSymbol layer. ?All the other CartographicText layer fields
> > appear just fine in the generated '.dbf' file.
> >
> > Is there a way of forcing ogr2ogr to recognise the orientation field?
> > ?Can anyone suggest an alternative Open Source conversion utility? ?I'm
> > fairly new to GIS systems, so I might be making an obvious mistake, but
> > any advice is very gratefully received! ?:-)
> > --
> > View this message in context:
> > http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-problem-converting-UK-Ordn
> >ance-Survey-MasterMap-tp5237796p5237796.html Sent from the GDAL - Dev
> > mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev


The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

From monshi at home.se  Thu Jul  1 06:02:20 2010
From: monshi at home.se (Tomas R)
Date: Thu Jul  1 06:02:34 2010
Subject: [gdal-dev] C# bindings compile error VSE 2010
Message-ID: <i0hp3d$mof$1@dough.gmane.org>

  Back again trying to compile gdal and the C# interface. This time with 
VSE 2010, Gdal 1.7.2 and Swig 2.0.0 on a Vista32 machine

Gdal compiles fine, no problems, but the C# bindings fail with the 
following error when using nmake:

         csc /platform:x86  /target:library /out:gdal_csharp.dll 
/r:ogr_csharp.dl
l gdal\*.cs AssemblyInfo.cs
Microsoft (R) Visual C# 2010 Compiler version 4.0.30319.1
Copyright (C) Microsoft Corporation. All rights reserved.

gdal\Band.cs(17,79): error CS0117: 'OSGeo.GDAL.GdalPINVOKE' does not 
contain a
         definition for 'BandUpcast'
gdal\Dataset.cs(17,82): error CS0117: 'OSGeo.GDAL.GdalPINVOKE' does not 
contain
         a definition for 'DatasetUpcast'
gdal\Driver.cs(17,81): error CS0117: 'OSGeo.GDAL.GdalPINVOKE' does not 
contain a
         definition for 'DriverUpcast'
NMAKE : fatal error U1077: 
'C:\Windows\Microsoft.NET\Framework\v4.0.30319\csc.EX
E' : return code '0x1'
Stop.

Since I am, and always will be, a newbie on C++ compilation I have no 
idea what to do to fix it or if I can fix it.

And since I am asking here I throw in another Q - I want to target the 
C# bindings to the .Net2 platform. How/where can I control this via the 
commandline compiler, via the nmake command?

Yours
Tomas



From szekerest at gmail.com  Thu Jul  1 06:41:57 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jul  1 06:42:03 2010
Subject: [gdal-dev] C# bindings compile error VSE 2010
In-Reply-To: <i0hp3d$mof$1@dough.gmane.org>
References: <i0hp3d$mof$1@dough.gmane.org>
Message-ID: <AANLkTinDW0SUFpl2jD2BQkPGvAPC1302URdqBcTGn7k-@mail.gmail.com>

Tomas,

You should use SWIG 1.3.39. The bindings haven't been tested with SWIG
2.0.0. Upgrading SWIG always cause much of pain...


Best regards,

Tamas



2010/7/1 Tomas R <monshi@home.se>

>  Back again trying to compile gdal and the C# interface. This time with VSE
> 2010, Gdal 1.7.2 and Swig 2.0.0 on a Vista32 machine
>
> Gdal compiles fine, no problems, but the C# bindings fail with the
> following error when using nmake:
>
>        csc /platform:x86  /target:library /out:gdal_csharp.dll
> /r:ogr_csharp.dl
> l gdal\*.cs AssemblyInfo.cs
> Microsoft (R) Visual C# 2010 Compiler version 4.0.30319.1
> Copyright (C) Microsoft Corporation. All rights reserved.
>
> gdal\Band.cs(17,79): error CS0117: 'OSGeo.GDAL.GdalPINVOKE' does not
> contain a
>        definition for 'BandUpcast'
> gdal\Dataset.cs(17,82): error CS0117: 'OSGeo.GDAL.GdalPINVOKE' does not
> contain
>        a definition for 'DatasetUpcast'
> gdal\Driver.cs(17,81): error CS0117: 'OSGeo.GDAL.GdalPINVOKE' does not
> contain a
>        definition for 'DriverUpcast'
> NMAKE : fatal error U1077:
> 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\csc.EX
> E' : return code '0x1'
> Stop.
>
> Since I am, and always will be, a newbie on C++ compilation I have no idea
> what to do to fix it or if I can fix it.
>
> And since I am asking here I throw in another Q - I want to target the C#
> bindings to the .Net2 platform. How/where can I control this via the
> commandline compiler, via the nmake command?
>
> Yours
> Tomas
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100701/3d925100/attachment.html
From nikosdu1980 at gmail.com  Thu Jul  1 06:50:30 2010
From: nikosdu1980 at gmail.com (Nikos Dumakis)
Date: Thu Jul  1 06:58:23 2010
Subject: [gdal-dev] Defining spatial resolution with gdalwarp
Message-ID: <AANLkTil_JDPAZj3kvODhmGDrFRaQn3xL5zs5njzKmodb@mail.gmail.com>

Hi there

I'm using gdalwarp do some reprojection of Globcover images from
LatLong-WGS84 for a specific UTM EPSG. The thing is that gdalwarp's changed
my original Spatial resolution. Shall I use -tr? if so, I just need to add
the units? e.g. -tr 300 300 ?

Thanks
Nikos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100701/7b9226e1/attachment-0001.html
From monicabuescu1985 at gmail.com  Thu Jul  1 06:35:31 2010
From: monicabuescu1985 at gmail.com (Monica Buescu)
Date: Thu Jul  1 06:59:14 2010
Subject: [gdal-dev] Re: Error while using gdalwarp- Values become Zero
Message-ID: <AANLkTimlAjZCD0JtGE3CqcOCJ8lwpqNBTKgBKcCYSmcU@mail.gmail.com>

Hi there

Regarding Hermann's answer:

> Could it be that the top right corner of final.tif is simply outside the
> extent of translate.tif and filled with 0, during warping?
>

What exacly that means? Because I have a 3x4 matrix and this means that I'm
loosing a pixel in top right...

I tested a different approach. Instead of gdal_translating I directly
gdal_warp it and I got the same error.

And I tested with other EPSG (WGS84 UTM 29N: 32629). And the same thing
happens. How can I avoid this?

Thanks
Monica
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100701/0ebec786/attachment.html
From monshi at home.se  Thu Jul  1 07:01:11 2010
From: monshi at home.se (Tomas R)
Date: Thu Jul  1 07:01:34 2010
Subject: [gdal-dev] Re: C# bindings compile error VSE 2010
In-Reply-To: <AANLkTinDW0SUFpl2jD2BQkPGvAPC1302URdqBcTGn7k-@mail.gmail.com>
References: <i0hp3d$mof$1@dough.gmane.org>
	<AANLkTinDW0SUFpl2jD2BQkPGvAPC1302URdqBcTGn7k-@mail.gmail.com>
Message-ID: <i0hsho$380$1@dough.gmane.org>

  Ok, will download that version.... done... and it compiled ok. As 
simple as that :)

How about the target platform? Should be easy to set it to .Net2 but 
how?  Now it compiles to .Net4.The version on dyndns is also targeted at 
.Net4 I notice.

Thanks

/tomas
Tamas Szekeres skrev 2010-07-01 12:41:
> Tomas,
>
> You should use SWIG 1.3.39. The bindings haven't been tested with SWIG 
> 2.0.0. Upgrading SWIG always cause much of pain...
>
>
> Best regards,
>
> Tamas
>
>
>
> 2010/7/1 Tomas R <monshi@home.se <mailto:monshi@home.se>>
>
>      Back again trying to compile gdal and the C# interface. This time
>     with VSE 2010, Gdal 1.7.2 and Swig 2.0.0 on a Vista32 machine
>
>     Gdal compiles fine, no problems, but the C# bindings fail with the
>     following error when using nmake:
>
>            csc /platform:x86  /target:library /out:gdal_csharp.dll
>     /r:ogr_csharp.dl
>     l gdal\*.cs AssemblyInfo.cs
>     Microsoft (R) Visual C# 2010 Compiler version 4.0.30319.1
>     Copyright (C) Microsoft Corporation. All rights reserved.
>
>     gdal\Band.cs(17,79): error CS0117: 'OSGeo.GDAL.GdalPINVOKE' does
>     not contain a
>            definition for 'BandUpcast'
>     gdal\Dataset.cs(17,82): error CS0117: 'OSGeo.GDAL.GdalPINVOKE'
>     does not contain
>            a definition for 'DatasetUpcast'
>     gdal\Driver.cs(17,81): error CS0117: 'OSGeo.GDAL.GdalPINVOKE' does
>     not contain a
>            definition for 'DriverUpcast'
>     NMAKE : fatal error U1077:
>     'C:\Windows\Microsoft.NET\Framework\v4.0.30319\csc.EX
>     E' : return code '0x1'
>     Stop.
>
>     Since I am, and always will be, a newbie on C++ compilation I have
>     no idea what to do to fix it or if I can fix it.
>
>     And since I am asking here I throw in another Q - I want to target
>     the C# bindings to the .Net2 platform. How/where can I control
>     this via the commandline compiler, via the nmake command?
>
>     Yours
>     Tomas
>
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From chaitanya.ch at gmail.com  Thu Jul  1 07:15:54 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jul  1 07:23:26 2010
Subject: [gdal-dev] Defining spatial resolution with gdalwarp
In-Reply-To: <AANLkTil_JDPAZj3kvODhmGDrFRaQn3xL5zs5njzKmodb@mail.gmail.com>
References: <AANLkTil_JDPAZj3kvODhmGDrFRaQn3xL5zs5njzKmodb@mail.gmail.com>
Message-ID: <AANLkTik-I7PEyCHd8CXcijRKabyUWSsVZ-4atKuTdNnl@mail.gmail.com>

Nikos,

If you are not sure what values to use for the resolution, you can try the
-ts option.

On Thu, Jul 1, 2010 at 4:20 PM, Nikos Dumakis <nikosdu1980@gmail.com> wrote:

> Hi there
>
> I'm using gdalwarp do some reprojection of Globcover images from
> LatLong-WGS84 for a specific UTM EPSG. The thing is that gdalwarp's changed
> my original Spatial resolution. Shall I use -tr? if so, I just need to add
> the units? e.g. -tr 300 300 ?
>
> Thanks
> Nikos
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100701/533c8d94/attachment.html
From monshi at home.se  Thu Jul  1 10:13:49 2010
From: monshi at home.se (Tomas R)
Date: Thu Jul  1 10:14:06 2010
Subject: [gdal-dev] Re: C# bindings compile error VSE 2010
In-Reply-To: <i0hsho$380$1@dough.gmane.org>
References: <i0hp3d$mof$1@dough.gmane.org>	<AANLkTinDW0SUFpl2jD2BQkPGvAPC1302URdqBcTGn7k-@mail.gmail.com>
	<i0hsho$380$1@dough.gmane.org>
Message-ID: <i0i7qv$ee5$1@dough.gmane.org>

  Set
@SET FrameworkVersion=v2.0.50727
in vcvars32.bat seems to work...

Yours
Tomas

Tomas R skrev 2010-07-01 13:01:
>  Ok, will download that version.... done... and it compiled ok. As 
> simple as that :)
>
> How about the target platform? Should be easy to set it to .Net2 but 
> how?  Now it compiles to .Net4.The version on dyndns is also targeted 
> at .Net4 I notice.
>
> Thanks
>
> /tomas
> Tamas Szekeres skrev 2010-07-01 12:41:
>> Tomas,
>>
>> You should use SWIG 1.3.39. The bindings haven't been tested with 
>> SWIG 2.0.0. Upgrading SWIG always cause much of pain...
>>
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>> 2010/7/1 Tomas R <monshi@home.se <mailto:monshi@home.se>>
>>
>>      Back again trying to compile gdal and the C# interface. This time
>>     with VSE 2010, Gdal 1.7.2 and Swig 2.0.0 on a Vista32 machine
>>
>>     Gdal compiles fine, no problems, but the C# bindings fail with the
>>     following error when using nmake:
>>
>>            csc /platform:x86  /target:library /out:gdal_csharp.dll
>>     /r:ogr_csharp.dl
>>     l gdal\*.cs AssemblyInfo.cs
>>     Microsoft (R) Visual C# 2010 Compiler version 4.0.30319.1
>>     Copyright (C) Microsoft Corporation. All rights reserved.
>>
>>     gdal\Band.cs(17,79): error CS0117: 'OSGeo.GDAL.GdalPINVOKE' does
>>     not contain a
>>            definition for 'BandUpcast'
>>     gdal\Dataset.cs(17,82): error CS0117: 'OSGeo.GDAL.GdalPINVOKE'
>>     does not contain
>>            a definition for 'DatasetUpcast'
>>     gdal\Driver.cs(17,81): error CS0117: 'OSGeo.GDAL.GdalPINVOKE' does
>>     not contain a
>>            definition for 'DriverUpcast'
>>     NMAKE : fatal error U1077:
>>     'C:\Windows\Microsoft.NET\Framework\v4.0.30319\csc.EX
>>     E' : return code '0x1'
>>     Stop.
>>
>>     Since I am, and always will be, a newbie on C++ compilation I have
>>     no idea what to do to fix it or if I can fix it.
>>
>>     And since I am asking here I throw in another Q - I want to target
>>     the C# bindings to the .Net2 platform. How/where can I control
>>     this via the commandline compiler, via the nmake command?
>>
>>     Yours
>>     Tomas
>>
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From P.Halls at york.ac.uk  Thu Jul  1 10:55:35 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Thu Jul  1 10:55:41 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
Message-ID: <4C2CAC67.40109@york.ac.uk>

Jez, Even,

    there are actually several issues relating to using GDAL/OGR to read
Ordnance Survey of Great Britain (OSGB) GML files distributed as their Mastermap
product.  One of these I reported as bug #1604 - I now find that this was
against GDAL-1.4.0 - which concerns handling 'duplicate' tokens: OGR ignores
Namespace and so treats <osgb:point> as the starter and fouls on the following
<gml:point> which contains the geometry.  There is a similar problem with
polygon objects.

    The data Jez describes below is simpler than much of the data in the file -
perhaps this next point is not an issue for him.  Several of the tokens are
described in the schema snippet as 'unbounded': this means that there can be
several instances

  	<osgb:changeHistory>
  		<osgb:changeDate>2004-12-19</osgb:changeDate>
  		<osgb:reasonForChange>Revised</osgb:reasonForChange>
  		<osgb:changeDate>2002-09-07</osgb:changeDate>
  		<osgb:reasonForChange>Revised</osgb:reasonForChange>
  		<osgb:changeDate>2001-03-12</osgb:changeDate>
  		<osgb:reasonForChange>New</osgb:reasonForChange>
  	</osgb:changeHistory>

    Here it is not only GDAL/OGR that has a problem!  Currently, I know of no
importer that can handle this construct, other than the tool (from Snowflake)
used by OSGB to generate it - and there is also the question of onwards storage.
  OSGB use Oracle internally and so I presume that these data are stored as
VARRAYs or 'Nested Tables' - complex objects that have no equivalent in many
other data structures.  GDAL/OGR has support in the OCI driver for VARRAYs, but
only in the context of the Geometry column; GDAL/OGR has a data structure for a
string array, but this is not supported in the OCI driver.  Whilst many of us
may be happy to ignore the change history and descriptive term data in the
example Jez provides, according to the OSGB Mastermap User Guide (Reference
Section) OSGB use unbounded multiple instances for:

theme                      )
changeHistory              )
descriptiveGroup           )  present in all Mastermap layers
descriptiveTerm            )

referenceToFeature            CartographicSymbol layer

networkMember              )
referenceToTopgraphicArea  )
referenceToNetwork         )
dateTimeQualifier          )  ITN layer; the qualifiers contain critical data
vehicleQualifier           )
environmentQualifier       )
subsectionDistance         )
subsectionPoint            )

Also in the ITN layer, directedNode is a two-part structure.

    Even notes that XML permits the specification of a hierarchical dataset,
whilst GDAL/OGR's approach is linear.  Surely to comply with the OGC
specification, a gml reader must be able to handle an hierarchical structure?
GML appears to be defined in that way (see Lake, et al, 2004, Geography Markup
Language, Chichester: John Wiley & Sons).  I do not know whether the GDAL/OGR
GML driver was designed primarily for writing gml rather than for reading: maybe.

    Where does this leave us?  As I mentioned, there are also problems with most
other gml readers: this is not solely an issue with GDAL/OGR.  I have an
immediate need for the ITN data and have written my own parser to extract the
information from the gml source: so far, so good.  However, as I mentioned,
there is now the problem of how to store these data: shapefiles use the dBaseIV
format and have no structure for handling these multiple attributes.  In a
sample dataset, I have a record with 49 changeHistory records, for example; some
other multiple constructs have several thousand entries.  I happen to have
access to Oracle, although to use GDAL/OGR to write to it requires that I do
some significant work on the oci driver: I've been trying to understand the code
of that to assess what I can reasonably do.  Alternatively, I could use oci
directly and bypass GDAL/OGR entirely.  All this, however, is non-trivial and
holding me back from doing what I am supposed to be doing ... but does seem to
be the only way forward, having exhausted FME, etc.

     Please do not take this as a rant or criticism: that is far from my
intention.  Frank and team do an extremely good job but, with the best will in
the world, they cannot be expected to do everything.  What I am trying to do is
report the problem that I raised a while back (but had not then realised how big
the task was) and which has now been raised by Jez.  If GDAL/OGR is to be
extended to handle these OSGB data, then it is going to require a group of us to
work together to design and deliver: OSGB must be a low priority for the core
team as it can only be of national interest.

Best wishes,

Peter
(sorry that's so long, but there is a lot of information there ...)


Jez Walters wrote:
> Even,
> 
> 
> This is precisely the fix I came up with yesterday, but I was wondering if there was a more "official" solution instead of editing the GML?
> 
> 
> Warm regards,
> 
> 
> Jez
> 
> 
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org] 
> Sent: Wednesday 30 June 2010 19:54
> To: gdal-dev@lists.osgeo.org
> Cc: Jez Walters; 'Frank Warmerdam'
> Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
> 
> Jez,
> 
> the reason for the orientation field to be recognize in the CartographicSymbol 
> layer and not in the CartographicText layer lies in the structure of the GML 
> file and limitations of the OGR GML driver and/or OGR data model.
> 
> Namely OGR only supports a "flat" organization of fields whereas GML (being 
> XML based) supports a tree-like organization. In the CartographicSymbol 
> layer, the orientation element is at the first level, whereas in the 
> CartographicText, it is included inside the <textRendering> element, and then 
> is ignored (see below examples)
> 
> <osgb:CartographicSymbol fid='osgb1000000729439973'>
> 	<osgb:featureCode>10165</osgb:featureCode>
> 	<osgb:version>1</osgb:version>
> 	<osgb:versionDate>2001-11-11</osgb:versionDate>
> 	<osgb:theme>Rail</osgb:theme>
> 	<osgb:changeHistory>
> 		<osgb:changeDate>2001-03-12</osgb:changeDate>
> 		<osgb:reasonForChange>New</osgb:reasonForChange>
> 	</osgb:changeHistory>
> 	<osgb:descriptiveGroup>Rail</osgb:descriptiveGroup>
> 	<osgb:descriptiveTerm>Switch</osgb:descriptiveTerm>
> 	<osgb:orientation>3009</osgb:orientation>
> 	<osgb:physicalLevel>50</osgb:physicalLevel>
> 	<osgb:point>
> 		<gml:Point srsName='osgb:BNG'>
> 			<gml:coordinates>291781.470,92943.570</gml:coordinates>
> 		</gml:Point>
> 	</osgb:point>
> </osgb:CartographicSymbol>
> 
> <osgb:CartographicText fid='osgb1000000729439996'>
> 	<osgb:featureCode>10026</osgb:featureCode>
> 	<osgb:version>1</osgb:version>
> 	<osgb:versionDate>2001-11-11</osgb:versionDate>
> 	<osgb:theme>Buildings</osgb:theme>
> 	<osgb:anchorPoint>
> 	<gml:Point srsName='osgb:BNG'>
> 		<gml:coordinates>291636.850,92668.150</gml:coordinates>
> 		</gml:Point>
> 	</osgb:anchorPoint>
> 	<osgb:changeHistory>
> 		<osgb:changeDate>1987-12-01</osgb:changeDate>
> 		<osgb:reasonForChange>New</osgb:reasonForChange>
> 	</osgb:changeHistory>
> 	<osgb:descriptiveGroup>Buildings Or Structure</osgb:descriptiveGroup>
> 	<osgb:make>Manmade</osgb:make>
> 	<osgb:physicalLevel>50</osgb:physicalLevel>
> 	<osgb:textRendering>
> 		<osgb:anchorPosition>3</osgb:anchorPosition>
> 		<osgb:font>2</osgb:font>
> 		<osgb:height>1.500</osgb:height>
> 		<osgb:orientation>545</osgb:orientation>
> 	</osgb:textRendering>
> 	<osgb:textString>44</osgb:textString>
> </osgb:CartographicText>
> 
> We could imagine an enhancement of the GML driver to try to "flatten" the 
> attributes. For example to return textRendering_anchorPosition, 
> textRendering_font, .... But it doesn't look trivial to add.
> 
> To workaround this, you can open the GML with your favorite text editor (or 
> sed ;-)) and replace <osgb:textRendering> and </osgb:textRendering> by 
> nothing
> 
> This works nicely ;-)
> 
> Best regards,
> 
> Even
> 
> Le Wednesday 30 June 2010 17:17:12 Jez Walters, vous avez ?crit :
>> Frank,
>>
>>
>> Thanks for looking in to this!  I've just repeated the problem with the
>> Ordnance Survey sample MasterMap, which is available from here:
>>
>> http://www.ordnancesurvey.co.uk/oswebsite/products/innovations/sampledata/O
>> SMasterMap_Topo/58116-SX9192-2c1.gz
>>
>> I tried converting the above GML to ESRI shapefile using the following
>> command:
>>
>> ogr2ogr SX9192 58116-SX9192-2c1
>>
>> One thing I've noticed is that the schema referenced in the GML
>> (http://www.ordnancesurvey.co.uk/xml/schema/v7/OSDNFFeatures.xsd) defines a
>> number of elements called "complexType".  The "complexType" element with a
>> name of "CartographicTextType" is defined like this:
>>
>> <complexType name="CartographicTextType">
>> 	<complexContent>
>> 		<extension base="osgb:AbstractFeatureType">
>> 			<sequence>
>> 				<element name="anchorPoint" type="gml:PointPropertyType"/>
>> 				<element name="changeHistory" type="osgb:changeHistoryType"
>> maxOccurs="unbounded"/> <element name="descriptiveGroup"
>> type="osgb:descriptiveGroupType" minOccurs="0" maxOccurs="unbounded"/>
>> <element name="descriptiveTerm" type="string" minOccurs="0"
>> maxOccurs="unbounded"/> <element name="make" type="osgb:makeType"
>> minOccurs="0"/>
>> 				<element name="physicalLevel" type="osgb:physicalLevelType"/>
>> 				<element name="physicalPresence" type="osgb:physicalPresenceType"
>> minOccurs="0"/> <element name="textRendering"
>> type="osgb:textRenderingType"/>
>> 				<element name="textString" type="string"/>
>> 			</sequence>
>> 		</extension>
>> 	</complexContent>
>> </complexType>
>>
>> >From which I conclude that the orientation is actually part of the
>>> "textRendering" element.  I'm sure I'm on to something with this, but I'm
>>> not sure how to proceed from here!
>> Warm regards,
>>
>>
>> Jez
>>
>>
>> -----Original Message-----
>> From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of Frank
>> Warmerdam Sent: Wednesday 30 June 2010 15:38
>> To: Jez Walters
>> Cc: gdal-dev@lists.osgeo.org
>> Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
>> MasterMap
>>
>> Jez,
>>
>> Can you provide a mastermap file I can test with?
>>
>> Best regards,
>>
>> On Wed, Jun 30, 2010 at 4:31 PM, Jez Walters <jez.walters@ipl.com> wrote:
>>> Not quite sure if I've got the right forum, but I'm having trouble using
>>> the 'ogr2ogr' utility (part of GDAL 1.7.2) to convert Ordnance Survey GML
>>> into ESRI shapefiles.
>>>
>>> The 'orientation' field is being ignored when I convert the
>>> CartographicText layer, although this field gets successfully translated
>>> for the
>>> CartographicSymbol layer.  All the other CartographicText layer fields
>>> appear just fine in the generated '.dbf' file.
>>>
>>> Is there a way of forcing ogr2ogr to recognise the orientation field?
>>>  Can anyone suggest an alternative Open Source conversion utility?  I'm
>>> fairly new to GIS systems, so I might be making an obvious mistake, but
>>> any advice is very gratefully received!  :-)
>>> --
>>> View this message in context:
>>> http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-problem-converting-UK-Ordn
>>> ance-Survey-MasterMap-tp5237796p5237796.html Sent from the GDAL - Dev
>>> mailing list archive at Nabble.com.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> The information transmitted is intended only for the person
> or entity to which it is addressed and may contain
> confidential and/or privileged material. If you are not the
> addressee, any disclosure, reproduction, copying,
> distribution, or other dissemination or use of this
> communication is strictly prohibited. If you have received
> this transmission in error please notify the sender
> immediately and then delete this email.
> 
> Any representations or commitments expressed in this email
> are subject to contract.
> 
> This message has been scanned for viruses and dangerous
> content. However, it is essential that the recipient also
> checks this message using commercially available mail
> scanning and anti-virus software. IPL Information Processing
> Limited accepts no liability for any loss or damage resulting
> from any virus or other dangerous content in this message.
> 
> IPL Information Processing Limited is registered in England
> and Wales under company registration number 1418818.
> Registration took place at Cardiff on 10 May 1979. IPL
> Information Processing Limited's registered office and
> normal place of business is Eveleigh House, Grove Street,
> Bath, BA1 5LR, United Kingdom. IPL is also registered for
> Value Added Tax (VAT) under registration number GB 601 2931 83.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From ivan.lucena at pmldnet.com  Thu Jul  1 10:59:45 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu Jul  1 10:59:47 2010
Subject: =?iso-8859-1?B?UkU6IFtnZGFsLWRldl0gUmFzdGVyL3ZlY3RvciBpbnRlcnNlY3Rpb25zIGluIFBvc3RHSVMgV0tUIFJhc3Rlcg==?=
Message-ID: <20100701145945.24823.qmail@s466.sureserver.com>

Pierre,

>  >Now, going back to the WKT Raster. I have loaded Raster on PostGIS before using TerraLib and I believe
>  >there is a very large project called TerraAmazon using that combination. In terms of query and
>  >functionality I know that TerraLib also does raster/vector intersection too but I am wondering how the
>  >overall raster performance comparison looks like; loading time, query time, limitations, etc.
>  
>  You can do raster/vector intersection in SQL using TerraLib? Really? Please tell me how. Does TerraLib provide a SQL API for manipulating raster?

Did I said that? No, it doesn't. Not in SQL. Sorry for the misunderstanding. A raster object in TerraLib is an subtype of Geometry inheriting attributes and functionality (query). But the APIs are in C++ and PHP, I believe. I haven't look into it lately.

>  As far as I can see from the TerraLib doc, TerraLib implemented an Oracle like relational schema for raster: one table for the raster and one table for the associated tiles. WKT Raster is more simple and flexible in that everything is stored in one table. It is very similar to the PostGIS geometry schema: each raster tile, like a geometry, has its own identity and georeference.

Yes, I believe those feature are unique to WKT Raster. I mean, each tile having its own identity. That's what make me curious about performance. I guess I would need to try it myself.

Great Job, Congrats!

Ivan
From luisapena1979 at gmail.com  Thu Jul  1 12:45:59 2010
From: luisapena1979 at gmail.com (=?ISO-8859-1?Q?Luisa_Pe=F1a?=)
Date: Thu Jul  1 12:46:02 2010
Subject: [gdal-dev] Processing GRIB data to ASCII or text file
Message-ID: <AANLkTik2C4853kI0ivNADGRtEE4oKyZeiH8zX6fNWb70@mail.gmail.com>

Hi there

I have several GRIB files and I wanted to do some statistical processing. To
do so, I wanted to convert them to ASCII or text file. Is it possible using
GDAL?

Thanks

Best regards,
Luisa
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100701/5df1a01f/attachment.html
From John.Axline at ngc.com  Thu Jul  1 13:12:17 2010
From: John.Axline at ngc.com (Axline, John)
Date: Thu Jul  1 13:12:22 2010
Subject: [gdal-dev] Bigtiff
Message-ID: <B880349D6D262044B47D4FF6CF33F3C3063A32B4@XMBTX133.northgrum.com>

It looks like  WriteRaster [or some other component in the process] has
used all available memory and now has to do massive amounts of churning
between the last snippet of memory and your hard drive. Whether it's a
leak or a 'feature' of some library the author depended on is of course
moot. If you can kill un-needed processes and free some memory (e.g.
using Task Manager) you might get back into the 1 pct/hour range, but
probably would too-soon get back to glacial speed. 

If you don't feel comfortable canceling tasks, you can lower their
priority.  But don't set your WriteRaster job (or anything) to realtime
priority - in that situation your mouse/keyboard becomes so
non-responsive the computer appears to be frozen.

One or more unrelated processes (e.g. an automatic virus scanner) might
also have become active, doing its chore inefficiently because of the
lack of resources. 

You might also try the process on a 64-bit machine with a serious amount
of memory, and a local high-speed disk  or (RAID 0) disk array.  

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100701/0d9d276b/attachment.html
From BCassanova at weather.com  Thu Jul  1 13:14:10 2010
From: BCassanova at weather.com (Cassanova, Bill)
Date: Thu Jul  1 13:30:04 2010
Subject: [gdal-dev] Processing GRIB data to ASCII or text file
In-Reply-To: <AANLkTik2C4853kI0ivNADGRtEE4oKyZeiH8zX6fNWb70@mail.gmail.com>
References: <AANLkTik2C4853kI0ivNADGRtEE4oKyZeiH8zX6fNWb70@mail.gmail.com>
Message-ID: <1D5F4E64B8C04F4C868B94AC9A532AF80DCE52BD@ATLMAIL01.corp.weather.com>

Take a look at wgrib (http://www.cpc.noaa.gov/products/wesley/wgrib.html ) and wgrib2 (http://www.cpc.noaa.gov/products/wesley/wgrib2/) depending on the type of grib file you are trying to dump.

 

Specifically you can pass the "-text" option to wgrib2 ( and I assume wgrib ) to dump the data to a text file.  

 

 

 

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Luisa Pe?a
Sent: Thursday, July 01, 2010 12:46 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Processing GRIB data to ASCII or text file

 

Hi there

 

I have several GRIB files and I wanted to do some statistical processing. To do so, I wanted to convert them to ASCII or text file. Is it possible using GDAL? 

 

Thanks


Best regards,

Luisa

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100701/4dc4b7ed/attachment.html
From chaitanya.ch at gmail.com  Thu Jul  1 13:31:12 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jul  1 13:31:15 2010
Subject: [gdal-dev] Processing GRIB data to ASCII or text file
In-Reply-To: <AANLkTik2C4853kI0ivNADGRtEE4oKyZeiH8zX6fNWb70@mail.gmail.com>
References: <AANLkTik2C4853kI0ivNADGRtEE4oKyZeiH8zX6fNWb70@mail.gmail.com>
Message-ID: <AANLkTiliA4pYNSr5tFvT0qNf0qeScYCFl6w0geEwWClV@mail.gmail.com>

Luisa,

You can try the "ASCII Gridded XYZ" format (http://gdal.org/frmt_xyz.html).
Just convert your GRIB files to the format "XYZ" using gdal_translate.
However, this is only available from GDAL 1.8. You will have to compile GDAL
trunk for this. (http://trac.osgeo.org/gdal/wiki/DownloadSource#Subversion)

On Thu, Jul 1, 2010 at 10:15 PM, Luisa Pe?a <luisapena1979@gmail.com> wrote:

> Hi there
>
> I have several GRIB files and I wanted to do some statistical processing.
> To do so, I wanted to convert them to ASCII or text file. Is it possible
> using GDAL?
>
> Thanks
>
> Best regards,
> Luisa
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100701/f6fbd5c3/attachment.html
From hmorkemo at gmail.com  Thu Jul  1 13:57:51 2010
From: hmorkemo at gmail.com (Helge Morkemo)
Date: Thu Jul  1 13:57:55 2010
Subject: [gdal-dev] Bigtiff
In-Reply-To: <B880349D6D262044B47D4FF6CF33F3C3063A32B4@XMBTX133.northgrum.com>
References: <B880349D6D262044B47D4FF6CF33F3C3063A32B4@XMBTX133.northgrum.com>
Message-ID: <AANLkTilAzB2ce86ddz9XwdN6xRDZnw5DC8Mq4XmhuMvb@mail.gmail.com>

Hi all

I've been testing.
Seems like something happens when I set tilesize (BLOCKXSIZE/BLOCKYSIZE) to
256 or bigger.
My test program (VisualBasic2010) produced an untiled file of 100000x100000
pixels in 324 seconds. (Uncompressed, no overviews) I can live with that.

With tilesize 128 it takes 1586 seconds.
With tilesize 256 it takes forever (1.5 sec/ROW for the first 20)

Are there any caching options that I can set? Cache buffer size? Total cache
size? Other?
Will the performance be better if I write tiles instead of scanlines?

Best regards
Helge

On Thu, Jul 1, 2010 at 19:12, Axline, John <John.Axline@ngc.com> wrote:

>  It looks like  WriteRaster [or some other component in the process] hasused all available memory and now
> has to do massive amounts of churning between the last snippet of memory and
> your hard drive. Whether it?s a leak or a ?feature? of some library the
> author depended on is of course moot. If you can kill un-needed processes and
> free some memory (e.g. using Task Manager) you might get back into the 1
> pct/hour range, but probably would too-soon get back to glacial speed.
>
> If you don?t feel comfortable canceling tasks, you can lower their
> priority.  But don?t set your WriteRaster job (or anything) to realtime
> priority ? in that situation your mouse/keyboard becomes so non-responsive
> the computer appears to be frozen.
>
> One or more unrelated processes (e.g. an automatic virus scanner) might
> also have become active, doing its chore inefficiently because of the lack
> of resources.
>
> You might also try the process on a 64-bit machine with a serious amount
> of memory, and a local high-speed disk  or (RAID 0) disk array.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100701/62268977/attachment-0001.html
From szekerest at gmail.com  Thu Jul  1 14:31:58 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jul  1 14:32:01 2010
Subject: [gdal-dev] Re: C# bindings compile error VSE 2010
In-Reply-To: <i0i7qv$ee5$1@dough.gmane.org>
References: <i0hp3d$mof$1@dough.gmane.org>
	<AANLkTinDW0SUFpl2jD2BQkPGvAPC1302URdqBcTGn7k-@mail.gmail.com>
	<i0hsho$380$1@dough.gmane.org> <i0i7qv$ee5$1@dough.gmane.org>
Message-ID: <AANLkTilKQvgxkDThK4C4gOpORH3iCgCsvivm7xhGnMVR@mail.gmail.com>

Good to hear it's working. The dyndns builds use the default framework
version per compiler.

Best regards,

Tamas



2010/7/1 Tomas R <monshi@home.se>

>  Set
> @SET FrameworkVersion=v2.0.50727
> in vcvars32.bat seems to work...
>
> Yours
> Tomas
>
> Tomas R skrev 2010-07-01 13:01:
>
>   Ok, will download that version.... done... and it compiled ok. As simple
>> as that :)
>>
>> How about the target platform? Should be easy to set it to .Net2 but how?
>>  Now it compiles to .Net4.The version on dyndns is also targeted at .Net4 I
>> notice.
>>
>> Thanks
>>
>> /tomas
>> Tamas Szekeres skrev 2010-07-01 12:41:
>>
>>> Tomas,
>>>
>>> You should use SWIG 1.3.39. The bindings haven't been tested with SWIG
>>> 2.0.0. Upgrading SWIG always cause much of pain...
>>>
>>>
>>> Best regards,
>>>
>>> Tamas
>>>
>>>
>>>
>>> 2010/7/1 Tomas R <monshi@home.se <mailto:monshi@home.se>>
>>>
>>>     Back again trying to compile gdal and the C# interface. This time
>>>    with VSE 2010, Gdal 1.7.2 and Swig 2.0.0 on a Vista32 machine
>>>
>>>    Gdal compiles fine, no problems, but the C# bindings fail with the
>>>    following error when using nmake:
>>>
>>>           csc /platform:x86  /target:library /out:gdal_csharp.dll
>>>    /r:ogr_csharp.dl
>>>    l gdal\*.cs AssemblyInfo.cs
>>>    Microsoft (R) Visual C# 2010 Compiler version 4.0.30319.1
>>>    Copyright (C) Microsoft Corporation. All rights reserved.
>>>
>>>    gdal\Band.cs(17,79): error CS0117: 'OSGeo.GDAL.GdalPINVOKE' does
>>>    not contain a
>>>           definition for 'BandUpcast'
>>>    gdal\Dataset.cs(17,82): error CS0117: 'OSGeo.GDAL.GdalPINVOKE'
>>>    does not contain
>>>           a definition for 'DatasetUpcast'
>>>    gdal\Driver.cs(17,81): error CS0117: 'OSGeo.GDAL.GdalPINVOKE' does
>>>    not contain a
>>>           definition for 'DriverUpcast'
>>>    NMAKE : fatal error U1077:
>>>    'C:\Windows\Microsoft.NET\Framework\v4.0.30319\csc.EX
>>>    E' : return code '0x1'
>>>    Stop.
>>>
>>>    Since I am, and always will be, a newbie on C++ compilation I have
>>>    no idea what to do to fix it or if I can fix it.
>>>
>>>    And since I am asking here I throw in another Q - I want to target
>>>    the C# bindings to the .Net2 platform. How/where can I control
>>>    this via the commandline compiler, via the nmake command?
>>>
>>>    Yours
>>>    Tomas
>>>
>>>
>>>
>>>    _______________________________________________
>>>    gdal-dev mailing list
>>>    gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>>    http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100701/e8ea4d42/attachment.html
From rush at winkey.org  Thu Jul  1 15:18:29 2010
From: rush at winkey.org (brian)
Date: Thu Jul  1 15:18:33 2010
Subject: [gdal-dev] Processing GRIB data to ASCII or text file
In-Reply-To: <AANLkTik2C4853kI0ivNADGRtEE4oKyZeiH8zX6fNWb70@mail.gmail.com>
References: <AANLkTik2C4853kI0ivNADGRtEE4oKyZeiH8zX6fNWb70@mail.gmail.com>
Message-ID: <1278011909.16097.6033.camel@winkey.org>

Luisa,

There is also the option of translateing to GMT datasets and using GMT's
grdmath app, this is what i do to proccess u/v wind grids to get dir or
velocity

Brian

On Thu, 2010-07-01 at 17:45 +0100, Luisa Pe?a wrote:
> Hi there
> 
> 
> I have several GRIB files and I wanted to do some statistical
> processing. To do so, I wanted to convert them to ASCII or text file.
> Is it possible using GDAL? 
> 
> 
> Thanks
> 
> Best regards,
> Luisa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From DCarreira at edia.pt  Thu Jul  1 19:26:29 2010
From: DCarreira at edia.pt (Duarte Carreira)
Date: Thu Jul  1 19:37:10 2010
Subject: [gdal-dev] new DWG specifications made public by ODA
Message-ID: <58C383B0A191E747BE79503F3EEA22BF5E85F061F3@beja012.edia.pt>

I haven't seen this anywhere else so maybe it went unnoticed...

Announcement here:
http://www.opendesign.com/ODANEWS020610

Download here:
http://www.opendesign.com/guestfiles

It seems the document is open to all... not just members...

Duarte
From warmerdam at pobox.com  Thu Jul  1 23:27:36 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jul  1 23:27:38 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey 
	MasterMap
In-Reply-To: <4C2CAC67.40109@york.ac.uk>
References: <4C2CAC67.40109@york.ac.uk>
Message-ID: <AANLkTil10mf85ePP-b7C4OBDObttNG9VufAbZyIZVZP4@mail.gmail.com>

On Thu, Jul 1, 2010 at 4:55 PM, Peter J Halls <P.Halls@york.ac.uk> wrote:
> Jez, Even,
>
> ? there are actually several issues relating to using GDAL/OGR to read
> Ordnance Survey of Great Britain (OSGB) GML files distributed as their
> Mastermap
> product. ?One of these I reported as bug #1604 - I now find that this was
> against GDAL-1.4.0 - which concerns handling 'duplicate' tokens: OGR ignores
> Namespace and so treats <osgb:point> as the starter and fouls on the
> following
> <gml:point> which contains the geometry. ?There is a similar problem with
> polygon objects.

Peter,

Ouch, the namespace stripping issue is unfortunate.  I'm not sure
of a cheap fix.

> ? The data Jez describes below is simpler than much of the data in the file

I did implement some degree of "complex structure flattening" when
I worked on the custom NAS (german GML profile) reader.  I thought
perhaps it had made it into the mainline GML reader, but perhaps not.
If so, I think it could be ported.

If someone files a ticket specifically on this issue I can try to address
this or perhaps more likely have Chaitanya do it as he is now getting
quite familiar with the GML driver.

> perhaps this next point is not an issue for him. ?Several of the tokens are
> described in the schema snippet as 'unbounded': this means that there can be
> several instances
>
> ? ? ? ?<osgb:changeHistory>
> ? ? ? ? ? ? ? ?<osgb:changeDate>2004-12-19</osgb:changeDate>
> ? ? ? ? ? ? ? ?<osgb:reasonForChange>Revised</osgb:reasonForChange>
> ? ? ? ? ? ? ? ?<osgb:changeDate>2002-09-07</osgb:changeDate>
> ? ? ? ? ? ? ? ?<osgb:reasonForChange>Revised</osgb:reasonForChange>
> ? ? ? ? ? ? ? ?<osgb:changeDate>2001-03-12</osgb:changeDate>
> ? ? ? ? ? ? ? ?<osgb:reasonForChange>New</osgb:reasonForChange>
> ? ? ? ?</osgb:changeHistory>

Hmm, that is also somewhat ugly.  OGR has the concept of a
string list field type, so in theory this could be reduced to two
string list fields:

changeHistory_changeData: 2004-12-19, 2002-09-07,...
changeHistory_reasonForChange: Revised, Revised

I also thought I had done something like this for the NAS driver,
but perhaps it did not make it back into the mainstream GML
driver.

Likewise, if a focused ticket is filed, I'll turn this over to
Chaitanya.

> ?I do not know whether the
> GDAL/OGR
> GML driver was designed primarily for writing gml rather than for reading:
> maybe.
>
> ? Where does this leave us? ?As I mentioned, there are also problems with
> most
> other gml readers: this is not solely an issue with GDAL/OGR. ?I have an
> immediate need for the ITN data and have written my own parser to extract
> the
> information from the gml source: so far, so good. ?However, as I mentioned,
> there is now the problem of how to store these data: shapefiles use the
> dBaseIV
> format and have no structure for handling these multiple attributes. ?In a
> sample dataset, I have a record with 49 changeHistory records, for example;
> some
> other multiple constructs have several thousand entries. ?I happen to have
> access to Oracle, although to use GDAL/OGR to write to it requires that I do
> some significant work on the oci driver: I've been trying to understand the
> code
> of that to assess what I can reasonably do. ?Alternatively, I could use oci
> directly and bypass GDAL/OGR entirely. ?All this, however, is non-trivial
> and
> holding me back from doing what I am supposed to be doing ... but does seem
> to
> be the only way forward, having exhausted FME, etc.

Even if we do the stringlist and related stuff you are quite
right that there aren't many output formats that will support
the esoteric arrangement well.  OGR was really intended
to read *simplistic* GML files that match existing GIS
type conventions (flat, non-repeating).  I am interested in
extending it somewhat to read important GML profiles
reasonably well, but there are limits to how much of this
can be done without a fundamental rewrite.

I really do try to discourage GML generators from using
some of these more esoteric practices.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From P.Halls at york.ac.uk  Fri Jul  2 02:56:44 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Fri Jul  2 02:56:51 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
In-Reply-To: <AANLkTil10mf85ePP-b7C4OBDObttNG9VufAbZyIZVZP4@mail.gmail.com>
References: <4C2CAC67.40109@york.ac.uk>
	<AANLkTil10mf85ePP-b7C4OBDObttNG9VufAbZyIZVZP4@mail.gmail.com>
Message-ID: <4C2D8DAC.40602@york.ac.uk>

Thanks, Frank.  I am pleased to hear that I have probably not missed much in my 
analysis of the current GDAL/OGR facilities.  I have not yet moved to 1.7, so it 
may be that there is a little more in the driver now than I have seen in 1.6.3.

I started out thinking that I could concatenate these multiple objects into 
simple strings ... until I discovered how long these could be.  Admittedly I 
opted to include the date along with the reason in the same string, but at 20 or 
so characters per entry - and some of the other multiples involve rather more 
characters per entry - I realised this was not realistic.  In my sample dataset 
and, eventually, I need to work with national coverage, I have objects 
comprising several thousand 20 character entries - yes, they could be processed 
to become long long integers but that is the same as holding the numeric part as 
text!  I decided that it would be easier to write a parser than to meddle with 
the GML driver ... I think it probably was.

I do not mind admitting that, over the past couple of years, I have spent 
several months effort evaluating apparently promising solutions for ingesting 
Mastermap.  Snowflake's products are out of our budget.  The crunch came this 
spring when advice from Safe Software's support team suggested that I could only 
solve the problems by using the FME API to extend the FME product's capability 
to handle these multiple objects.  It seemed to me that if I had to code my own 
solution, I might as well use an API with which I was already familiar: writing 
interfaces is not my main job!

I think that we need a strategic assessment of whether the OSGB usage of GML is 
likely to be a 'one off' or whether others may also exploit the power of GML in 
a similar fashion.  Certainly in Europe where the INSPIRE Directive is beginning 
to take effect and requires the delivery of interoperable data services there is 
the possibility of others following suit: I am not familiar with the German NAS 
work, so do not know how that might relate, if at all.  If OSGB is a 'one off', 
then the amount of work that would appear to be involved for GDAL/OGR is 
possibly a show stopper; if, however, there is a need for a generic solution 
which will solve the OSGB issues and support a range of other products, such 
that there is a reasonably widespread application, then it is probably worth at 
least a proper assessment of the effort involved.

Best wishes,

Peter

PS my sample gml dataset covers just 50 km square and comes in at 2.8Gb: editing 
constructs to avoid their being processed is not easy with files of that size!

Frank Warmerdam wrote:
> On Thu, Jul 1, 2010 at 4:55 PM, Peter J Halls <P.Halls@york.ac.uk> wrote:
>> Jez, Even,
>>
>>   there are actually several issues relating to using GDAL/OGR to read
>> Ordnance Survey of Great Britain (OSGB) GML files distributed as their
>> Mastermap
>> product.  One of these I reported as bug #1604 - I now find that this was
>> against GDAL-1.4.0 - which concerns handling 'duplicate' tokens: OGR ignores
>> Namespace and so treats <osgb:point> as the starter and fouls on the
>> following
>> <gml:point> which contains the geometry.  There is a similar problem with
>> polygon objects.
> 
> Peter,
> 
> Ouch, the namespace stripping issue is unfortunate.  I'm not sure
> of a cheap fix.
> 
>>   The data Jez describes below is simpler than much of the data in the file
> 
> I did implement some degree of "complex structure flattening" when
> I worked on the custom NAS (german GML profile) reader.  I thought
> perhaps it had made it into the mainline GML reader, but perhaps not.
> If so, I think it could be ported.
> 
> If someone files a ticket specifically on this issue I can try to address
> this or perhaps more likely have Chaitanya do it as he is now getting
> quite familiar with the GML driver.
> 
>> perhaps this next point is not an issue for him.  Several of the tokens are
>> described in the schema snippet as 'unbounded': this means that there can be
>> several instances
>>
>>        <osgb:changeHistory>
>>                <osgb:changeDate>2004-12-19</osgb:changeDate>
>>                <osgb:reasonForChange>Revised</osgb:reasonForChange>
>>                <osgb:changeDate>2002-09-07</osgb:changeDate>
>>                <osgb:reasonForChange>Revised</osgb:reasonForChange>
>>                <osgb:changeDate>2001-03-12</osgb:changeDate>
>>                <osgb:reasonForChange>New</osgb:reasonForChange>
>>        </osgb:changeHistory>
> 
> Hmm, that is also somewhat ugly.  OGR has the concept of a
> string list field type, so in theory this could be reduced to two
> string list fields:
> 
> changeHistory_changeData: 2004-12-19, 2002-09-07,...
> changeHistory_reasonForChange: Revised, Revised
> 
> I also thought I had done something like this for the NAS driver,
> but perhaps it did not make it back into the mainstream GML
> driver.
> 
> Likewise, if a focused ticket is filed, I'll turn this over to
> Chaitanya.
> 
>>  I do not know whether the
>> GDAL/OGR
>> GML driver was designed primarily for writing gml rather than for reading:
>> maybe.
>>
>>   Where does this leave us?  As I mentioned, there are also problems with
>> most
>> other gml readers: this is not solely an issue with GDAL/OGR.  I have an
>> immediate need for the ITN data and have written my own parser to extract
>> the
>> information from the gml source: so far, so good.  However, as I mentioned,
>> there is now the problem of how to store these data: shapefiles use the
>> dBaseIV
>> format and have no structure for handling these multiple attributes.  In a
>> sample dataset, I have a record with 49 changeHistory records, for example;
>> some
>> other multiple constructs have several thousand entries.  I happen to have
>> access to Oracle, although to use GDAL/OGR to write to it requires that I do
>> some significant work on the oci driver: I've been trying to understand the
>> code
>> of that to assess what I can reasonably do.  Alternatively, I could use oci
>> directly and bypass GDAL/OGR entirely.  All this, however, is non-trivial
>> and
>> holding me back from doing what I am supposed to be doing ... but does seem
>> to
>> be the only way forward, having exhausted FME, etc.
> 
> Even if we do the stringlist and related stuff you are quite
> right that there aren't many output formats that will support
> the esoteric arrangement well.  OGR was really intended
> to read *simplistic* GML files that match existing GIS
> type conventions (flat, non-repeating).  I am interested in
> extending it somewhat to read important GML profiles
> reasonably well, but there are limits to how much of this
> can be done without a fundamental rewrite.
> 
> I really do try to discourage GML generators from using
> some of these more esoteric practices.
> 
> Best regards,

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From Martin.Daly at cadcorp.com  Fri Jul  2 03:04:38 2010
From: Martin.Daly at cadcorp.com (Martin Daly)
Date: Fri Jul  2 03:17:09 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <4C2CAC67.40109@york.ac.uk>
References: <4C2CAC67.40109@york.ac.uk>
Message-ID: <11A8567A97B15648846060F5CD818EB842E7DB43D8@DEV001EX.Dev.cadcorp.net>

>     Here it is not only GDAL/OGR that has a problem!  Currently, I know of no
> importer that can handle this construct, other than the tool (from Snowflake)
> used by OSGB to generate it - and there is also the question of onwards
> storage.

Not even close, I'm afraid.

There are plenty of tools to read (all parts of) OS MM:

http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/information/technical/software.html

e.g. (an excellent one, at a very reasonable price...)

http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/information/technical/software/cadcorp.html

Also, as far as I am aware, OS GB use in-house software to generate the data.

Martin
****************************************************************************
This email is confidential and may be privileged and should not be used, read
or copied by anyone who is not the  original intended recipient. If you have
received this email in error  please inform the sender and delete it from
your mailbox or any other storage mechanism. Unless specifically stated,
nothing in this email constitutes an offer by Cadcorp and Cadcorp does not
warrant that any information contained in this email is accurate.
Cadcorp cannot accept liability for any statements made which are clearly the
sender's own and not expressly made on behalf of Cadcorp or one of its agents.
Please rely on your own virus check. No responsibility is taken by Cadcorp
for any damage arising out of any bug or virus infection.
****************************************************************************

From ahmettemiz88 at gmail.com  Fri Jul  2 07:27:10 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Fri Jul  2 07:27:13 2010
Subject: [gdal-dev] in gdal-java - initialize the driver manager
Message-ID: <AANLkTimydaOlqRc4IUIgQPG1fNyvdt93hb_mMbSTFNUh@mail.gmail.com>

hello

as a new gdal-java user

I am wondering how we can initialize the driver manager?

regards
From chaitanya.ch at gmail.com  Fri Jul  2 09:16:16 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jul  2 09:16:18 2010
Subject: [gdal-dev] in gdal-java - initialize the driver manager
In-Reply-To: <AANLkTimydaOlqRc4IUIgQPG1fNyvdt93hb_mMbSTFNUh@mail.gmail.com>
References: <AANLkTimydaOlqRc4IUIgQPG1fNyvdt93hb_mMbSTFNUh@mail.gmail.com>
Message-ID: <AANLkTik0O3RQ-hrjS5jl7fgLklNgoy9DKGNSunPxBDPb@mail.gmail.com>

Ahmet,

The method AllRegister() in org.gdal.gdal.gdal takes care of that.

On Fri, Jul 2, 2010 at 11:27 AM, ahmet temiz <ahmettemiz88@gmail.com> wrote:

> hello
>
> as a new gdal-java user
>
> I am wondering how we can initialize the driver manager?
>
> regards
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100702/7c822e78/attachment.html
From fieliesm at gmail.com  Fri Jul  2 09:11:29 2010
From: fieliesm at gmail.com (Francois Maass)
Date: Fri Jul  2 09:17:22 2010
Subject: [gdal-dev] GetProjectionRef returns ' '
Message-ID: <000001cb19e8$1b47aba0$51d702e0$@com>

Hello everyone!

 

I have as input, two satellite images, one in .pix format and the other in
.TIF format. 
I am trying to do projections between these two images, and have a function
which contains the following:

 

if( gdalDataset->GetProjectionRef
<http://www.gdal.org/classGDALDataset.html#a42537e1062ce254d124b29ff3ebe857>
()  != NULL )
        printf( "Projection is `%s'\n", gdalDataset->GetProjectionRef
<http://www.gdal.org/classGDALDataset.html#a42537e1062ce254d124b29ff3ebe857>
() );

 

 

When I call this function with the .pix image as parameter, I get the entire
projection definition string, but when I pass the .TIF image as parameter, I
get "Projection is ' '".

Can anyone tell me why this happens?

 

Thank you for your time!

Francois

 

Francois Maass

B.IT

University of Pretoria

Cell: 072 397 0294

Email: fieliesm@gmail.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100702/2edadec1/attachment.html
From warmerdam at pobox.com  Fri Jul  2 09:21:46 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jul  2 09:21:49 2010
Subject: [gdal-dev] GetProjectionRef returns ' '
In-Reply-To: <000001cb19e8$1b47aba0$51d702e0$@com>
References: <000001cb19e8$1b47aba0$51d702e0$@com>
Message-ID: <AANLkTilfyczVz9rB18_X1sBnMUYVrR9QA2xjveX3qpPg@mail.gmail.com>

On Fri, Jul 2, 2010 at 3:11 PM, Francois Maass <fieliesm@gmail.com> wrote:
> Hello everyone!
>
>
>
> I have as input, two satellite images, one in .pix format and the other in
> .TIF format.
> I am trying to do projections between these two images, and have a function
> which contains the following:
>
>
>
> if( gdalDataset->GetProjectionRef()? != NULL )
>
> ??????? printf( "Projection is `%s'\n", gdalDataset->GetProjectionRef() );
>
>
>
>
>
> When I call this function with the .pix image as parameter, I get the entire
> projection definition string, but when I pass the .TIF image as parameter, I
> get ?Projection is ? ??.
>

Francois,

I believe that GetProjectionRef() is supposed to return an empty string
rather than NULL when there is no coordinate system.  It would appear
the GeoTIFF lacks any coordinate system definition or it was completely
not recognizable to the driver.

If you are convinced the file should have a coordinate system already,
you might try examining it with the listgeo utility (from the libgeotiff
distribution) and it will show the internal geotiff details.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From fongjd at gmail.com  Fri Jul  2 12:31:24 2010
From: fongjd at gmail.com (Jed Fong)
Date: Fri Jul  2 12:31:48 2010
Subject: [gdal-dev] Reprojecting Blue Marble Data
Message-ID: <AANLkTimsNYhFMLmawd3IZ17sTnP-vXvTT6-a2-vzRpt0@mail.gmail.com>

I am currently working on a web project in which I need to be able to show
global imagery in different projections using OpenLayers.  I plan to use the
Blue Marble data that is available from NASA.  I have a few questions for
those who have worked with this data before.

1. How hard is it to convert a non-geolocated Cylindrical Equidistant image
to a projection such as Polar Stereographic North (GeoTiff format)?  Does
anyone have an example of this being done?
2. Does anyone know whether GeoServer or MapServer is better for serving up
data in different projections?  Can either of them reproject raster data
on-the-fly (Ex: Lambert Conformal Conic requesting data based on
tangent/secant lines)?

I would appreciate any help or direction that can be given.

Thanks,
Jed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100702/7dee3709/attachment.html
From bryan at ideotrope.org  Fri Jul  2 13:07:07 2010
From: bryan at ideotrope.org (Bryan Keith)
Date: Fri Jul  2 13:28:04 2010
Subject: [gdal-dev] ogr: linestring2d to linestring3d?
Message-ID: <2366.64.15.96.66.1278090427.squirrel@ideotrope.org>

Hello,

I have a linestring shapefile with an elevation attribute.  Is there a way
using ogr2ogr (or some other command line tool) to write out a
linestring3d shapefile which transfers the values of that attribute to the
z value of each point in the line?

Bryan

From bryan at ideotrope.org  Fri Jul  2 13:31:06 2010
From: bryan at ideotrope.org (Bryan Keith)
Date: Fri Jul  2 13:31:08 2010
Subject: [gdal-dev] ogr: linestring2d to linestring3d?
In-Reply-To: <2366.64.15.96.66.1278090427.squirrel@ideotrope.org>
References: <2366.64.15.96.66.1278090427.squirrel@ideotrope.org>
Message-ID: <2450.64.15.96.66.1278091866.squirrel@ideotrope.org>

Haha, I asked the same thing 3.5 years ago:

http://www.osgeo.org/pipermail/gdal-dev/2007-January/011546.html

and apparently I wrote a script which I'm unable to find at this point. 
Anyone have anything handy?

Bryan

> Hello,
>
> I have a linestring shapefile with an elevation attribute.  Is there a way
> using ogr2ogr (or some other command line tool) to write out a
> linestring3d shapefile which transfers the values of that attribute to the
> z value of each point in the line?
>
> Bryan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From bryan at ideotrope.org  Fri Jul  2 13:40:29 2010
From: bryan at ideotrope.org (Bryan Keith)
Date: Fri Jul  2 13:40:31 2010
Subject: [gdal-dev] ogr: linestring2d to linestring3d?
In-Reply-To: <2450.64.15.96.66.1278091866.squirrel@ideotrope.org>
References: <2366.64.15.96.66.1278090427.squirrel@ideotrope.org>
	<2450.64.15.96.66.1278091866.squirrel@ideotrope.org>
Message-ID: <2457.64.15.96.66.1278092429.squirrel@ideotrope.org>

Oh, even better.  I found my old code.  Thanks for listening while I
answer my own questions.

Bryan
now happy camper, improving notes on local wiki...

> Haha, I asked the same thing 3.5 years ago:
>
> http://www.osgeo.org/pipermail/gdal-dev/2007-January/011546.html
>
> and apparently I wrote a script which I'm unable to find at this point.
> Anyone have anything handy?
>
> Bryan
>
>> Hello,
>>
>> I have a linestring shapefile with an elevation attribute.  Is there a
>> way
>> using ogr2ogr (or some other command line tool) to write out a
>> linestring3d shapefile which transfers the values of that attribute to
>> the
>> z value of each point in the line?
>>
>> Bryan
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From chaitanya.ch at gmail.com  Fri Jul  2 13:59:53 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jul  2 13:59:56 2010
Subject: [gdal-dev] ogr: linestring2d to linestring3d?
In-Reply-To: <2457.64.15.96.66.1278092429.squirrel@ideotrope.org>
References: <2366.64.15.96.66.1278090427.squirrel@ideotrope.org>
	<2450.64.15.96.66.1278091866.squirrel@ideotrope.org>
	<2457.64.15.96.66.1278092429.squirrel@ideotrope.org>
Message-ID: <AANLkTik9P0RJcsRTzsGj9CxZBtlQh-rz-nbg_9atxSoF@mail.gmail.com>

Bryan,

Perhaps you could share that script with us.

On Fri, Jul 2, 2010 at 5:40 PM, Bryan Keith <bryan@ideotrope.org> wrote:

> Oh, even better.  I found my old code.  Thanks for listening while I
> answer my own questions.
>
> Bryan
> now happy camper, improving notes on local wiki...
>
> > Haha, I asked the same thing 3.5 years ago:
> >
> > http://www.osgeo.org/pipermail/gdal-dev/2007-January/011546.html
> >
> > and apparently I wrote a script which I'm unable to find at this point.
> > Anyone have anything handy?
> >
> > Bryan
> >
> >> Hello,
> >>
> >> I have a linestring shapefile with an elevation attribute.  Is there a
> >> way
> >> using ogr2ogr (or some other command line tool) to write out a
> >> linestring3d shapefile which transfers the values of that attribute to
> >> the
> >> z value of each point in the line?
> >>
> >> Bryan
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100702/f03a554f/attachment.html
From matt.wilkie at gov.yk.ca  Fri Jul  2 14:16:30 2010
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Fri Jul  2 14:16:36 2010
Subject: [gdal-dev] [off-topic] Help build GIS specific Stack Exchange
Message-ID: <4C2E2CFE.7050407@gov.yk.ca>

Hello Folks,

It's just a proposal right now, but with your help it could become a 
reality, a vendor neutral /"Q&A site for programmers, DBAs, 
Cartographers, Geographers and anyone interested in GIS professionally"/ 
Come aboard and help build an information-rich community based gis 
technical support site, a GIS specific site on Stack Exchange 
<http://area51.stackexchange.com/proposals/1425/geographic-information-systems?referrer=C9f1tb1_LSB3hJ0vc5L2Fg2>. 
((use this link instead 
http://area51.stackexchange.com/proposals/1425/geographic-information-systems 
if you don't want to give me any referrer karma ;-))

What is Stack Exchange? Who better to answer than the founders,/ 
"//...we?ve gotten used to the clean, fast, reliable answers that you 
get from Stack Overflow, so whenever we try to get an answer to a tax 
question, or a Siberian Husky question, or an iPhone question, it?s 
incredibly frustrating to find old conversations, trapped in forum and 
discussion software, instead of answers. Forums are optimized for 
conversation and shooting the breeze, not for getting answers, so they 
suck when you actually need some information./" (full post 
<http://blog.stackoverflow.com/2010/04/changes-to-stack-exchange/>) By 
and large, they've risen to the challenge better than anyone else in my 
experience.

Anyway, check out the proposal, see what you think, and if you agree 
throw your weight behind it.

cheers,

-matt
From bryan at ideotrope.org  Fri Jul  2 15:46:39 2010
From: bryan at ideotrope.org (Bryan Keith)
Date: Fri Jul  2 15:46:41 2010
Subject: [gdal-dev] ogr: linestring2d to linestring3d?
In-Reply-To: <AANLkTik9P0RJcsRTzsGj9CxZBtlQh-rz-nbg_9atxSoF@mail.gmail.com>
References: <2366.64.15.96.66.1278090427.squirrel@ideotrope.org>
	<2450.64.15.96.66.1278091866.squirrel@ideotrope.org>
	<2457.64.15.96.66.1278092429.squirrel@ideotrope.org>
	<AANLkTik9P0RJcsRTzsGj9CxZBtlQh-rz-nbg_9atxSoF@mail.gmail.com>
Message-ID: <2642.64.15.96.66.1278099999.squirrel@ideotrope.org>

Sure.  Sent in a separate e-mail since I doubt gdal-dev takes attachments.
 If you improve it (it certainly could be cleaned up and made more
robust), send me the improvements please.

Bryan

> Bryan,
>
> Perhaps you could share that script with us.
>
> On Fri, Jul 2, 2010 at 5:40 PM, Bryan Keith <bryan@ideotrope.org> wrote:
>
>> Oh, even better.  I found my old code.  Thanks for listening while I
>> answer my own questions.
>>
>> Bryan
>> now happy camper, improving notes on local wiki...
>>
>> > Haha, I asked the same thing 3.5 years ago:
>> >
>> > http://www.osgeo.org/pipermail/gdal-dev/2007-January/011546.html
>> >
>> > and apparently I wrote a script which I'm unable to find at this
>> point.
>> > Anyone have anything handy?
>> >
>> > Bryan
>> >
>> >> Hello,
>> >>
>> >> I have a linestring shapefile with an elevation attribute.  Is there
>> a
>> >> way
>> >> using ogr2ogr (or some other command line tool) to write out a
>> >> linestring3d shapefile which transfers the values of that attribute
>> to
>> >> the
>> >> z value of each point in the line?
>> >>
>> >> Bryan
>> >>
>> >> _______________________________________________
>> >> gdal-dev mailing list
>> >> gdal-dev@lists.osgeo.org
>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >>
>> >
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t??a??????nj??/ /k??m??r/
> +91-9494447584
> 17.2416N 80.1426E
>


From fmarkham at gmail.com  Fri Jul  2 22:40:03 2010
From: fmarkham at gmail.com (Francis Markham)
Date: Fri Jul  2 22:40:25 2010
Subject: [gdal-dev] Writing non-ASCII characters to shapefile
Message-ID: <AANLkTimsdGpbI4AUsVhjXhVGD-1QJluHjYRFbKltO5Cz@mail.gmail.com>

Hi there,

I'm trying to write data from a Microsoft Excel .xls file into a
shapefile, using OGR's Python bindings in Python 2.6.  This is going
well, but I am having some problems when I try to write values that
contain so-called "smart quotes".  Smart quotes are special
characters, defined as characters 0x91 through 0x94 in Windows-1252 (
see http://msdn.microsoft.com/en-au/goglobal/cc305145.aspx ).

What is the best way to save this data to a shapefile using OGR?  I
need the shapefile to be interoperable with other programs, including
but not limited to ESRI products. While I assume I could simply
translate these characters to standard ASCII, I would prefer not to if
possible.  I also haven't tested the shapefiles with data from other
character encodings.

I have heard that the use of UTF-8 in shapefiles is not portable.  I
am also aware that shapefile.cpg can store a shapefile's codepage.  I
don't know how to put these pieces together to create a portable
solution, however.

Apologies if this is a newbie question, but I can't find answers on the web.

Thanks,

Francis Markham
From warmerdam at pobox.com  Sat Jul  3 09:26:13 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jul  3 09:26:19 2010
Subject: [gdal-dev] ogr: linestring2d to linestring3d?
In-Reply-To: <2366.64.15.96.66.1278090427.squirrel@ideotrope.org>
References: <2366.64.15.96.66.1278090427.squirrel@ideotrope.org>
Message-ID: <4C2F3A75.5090904@pobox.com>

Bryan Keith wrote:
> Hello,
> 
> I have a linestring shapefile with an elevation attribute.  Is there a way
> using ogr2ogr (or some other command line tool) to write out a
> linestring3d shapefile which transfers the values of that attribute to the
> z value of each point in the line?

Bryan,

I am not aware of a way to accomplish this with the existing commandline
tools.  It could be done with scripting or adjusting ogr2ogr of course.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gregcoats at mac.com  Sat Jul  3 09:53:52 2010
From: gregcoats at mac.com (Greg Coats)
Date: Sat Jul  3 09:53:55 2010
Subject: [gdal-dev] gdal_translate -a_srs
In-Reply-To: <4C2F3A75.5090904@pobox.com>
References: <2366.64.15.96.66.1278090427.squirrel@ideotrope.org>
	<4C2F3A75.5090904@pobox.com>
Message-ID: <C87EC9CB-1284-4F1D-BF79-6450576BD796@mac.com>

gdal_translate -a_srs provides for the output file to be in a different projection than the input file.
What is the syntax for telling gdal_translate -a_srs to use the projection shown by gdalinfo to be used in the GeoTiff below, which is NAD 1983, UTM Zone 18N?
Greg

$ gdalinfo dcua_reduce7.tif 
Driver: GTiff/GeoTIFF
Files: /Users/gregcoats/gis/dcua_reduce4_04_8GB/Mosaics/dcua_reduce7.tif
Size is 2032, 1524
Coordinate System is:
PROJCS["NAD83 / UTM zone 18N",
   GEOGCS["NAD83",
       DATUM["North_American_Datum_1983",
           SPHEROID["GRS 1980",6378137,298.2572221010002,
               AUTHORITY["EPSG","7019"]],
           AUTHORITY["EPSG","6269"]],
       PRIMEM["Greenwich",0],
       UNIT["degree",0.0174532925199433],
       AUTHORITY["EPSG","4269"]],
   PROJECTION["Transverse_Mercator"],
   PARAMETER["latitude_of_origin",0],
   PARAMETER["central_meridian",-75],
   PARAMETER["scale_factor",0.9996],
   PARAMETER["false_easting",500000],
   PARAMETER["false_northing",0],
   UNIT["metre",1,
       AUTHORITY["EPSG","9001"]],
   AUTHORITY["EPSG","26918"]]
Origin = (271500.000000000000000,4335000.000000000000000)
Pixel Size = (38.385826771653548,-38.385826771653548)
Metadata:
 TIFFTAG_XRESOLUTION=100
 TIFFTAG_YRESOLUTION=100
 TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm)
 AREA_OR_POINT=Area
Image Structure Metadata:
 INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  271500.000, 4335000.000) ( 77d38'37.06"W, 39d 8'3.20"N)
Lower Left  (  271500.000, 4276500.000) ( 77d37'27.05"W, 38d36'27.38"N)
Upper Right (  349500.000, 4335000.000) ( 76d44'30.12"W, 39d 9'4.32"N)
Lower Right (  349500.000, 4276500.000) ( 76d43'43.95"W, 38d37'27.36"N)
Center      (  310500.000, 4305750.000) ( 77d11'4.69"W, 38d52'48.70"N)
Band 1 Block=128x128 Type=Byte, ColorInterp=Red
Band 2 Block=128x128 Type=Byte, ColorInterp=Green
Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
From warmerdam at pobox.com  Sat Jul  3 10:10:18 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jul  3 10:10:23 2010
Subject: [gdal-dev] gdal_translate -a_srs
In-Reply-To: <C87EC9CB-1284-4F1D-BF79-6450576BD796@mac.com>
References: <2366.64.15.96.66.1278090427.squirrel@ideotrope.org>
	<4C2F3A75.5090904@pobox.com>
	<C87EC9CB-1284-4F1D-BF79-6450576BD796@mac.com>
Message-ID: <4C2F44CA.3070003@pobox.com>

Greg Coats wrote:
> gdal_translate -a_srs provides for the output file to be in a different projection than the input file.
> What is the syntax for telling gdal_translate -a_srs to use the projection shown by gdalinfo to be used in the GeoTiff below, which is NAD 1983, UTM Zone 18N?

Greg,

One approach is to just copy the coordinate system portion, as
below into a text file, perhaps "desired.wkt" and then
do:

gdal_translate -a_srs desired.wkt in.tif out.tif

PROJCS["NAD83 / UTM zone 18N",
     GEOGCS["NAD83",
         DATUM["North_American_Datum_1983",
             SPHEROID["GRS 1980",6378137,298.2572221010002,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6269"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4269"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",-75],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","26918"]]

You can also pass the entire WKT string on the commandline but that tends to
be difficult to quote and to remove the newlines.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gregcoats at mac.com  Sat Jul  3 13:16:05 2010
From: gregcoats at mac.com (Greg Coats)
Date: Sat Jul  3 13:16:10 2010
Subject: [gdal-dev] gdal_translate -a_srs
In-Reply-To: <4C2F44CA.3070003@pobox.com>
References: <2366.64.15.96.66.1278090427.squirrel@ideotrope.org>
	<4C2F3A75.5090904@pobox.com>
	<C87EC9CB-1284-4F1D-BF79-6450576BD796@mac.com>
	<4C2F44CA.3070003@pobox.com>
Message-ID: <91A097B9-9ADB-4477-838E-18631BE6AD41@mac.com>

Frank, I did that, and now gdalinfo shows the gdal_translate output GeoTiff does have the same values as those of the GeoTiff with the desired UTM projection for PROJCS to AUTHORITY
Coordinate System is:
PROJCS["NAD83 / UTM zone 18N",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-75],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26918"]]

then gdalinfo shows on the next 2 lines of its report that while the GeoTiff in the desired UTM projection has reasonable values for Origin and Pixel size, the gdal_translate output GeoTiff apparently still has its Origin and Pixel size values in latitude and longitude, which is apparently preventing Qgis from displaying the gdal_translate output GeoTiff. 
gdalinfo report for input GeoTiff
Origin = (271500.000000000000000,4335000.000000000000000)
Pixel Size = (38.385826771653548,-38.385826771653548)

gdalinfo report for gdal_translate output GeoTiff
Origin = (-78.000555555559998,40.000555555555515)
Pixel Size = (0.000092592592593,-0.000092592592593)
Is there another necessary step? Greg

On Jul 3, 2010, at 10:10 AM, Frank Warmerdam wrote:

> Greg Coats wrote:
>> gdal_translate -a_srs provides for the output file to be in a different projection than the input file.
>> What is the syntax for telling gdal_translate -a_srs to use the projection shown by gdalinfo to be used in the GeoTiff below, which is NAD 1983, UTM Zone 18N?
> 
> Greg,
> 
> One approach is to just copy the coordinate system portion, as
> below into a text file, perhaps "desired.wkt" and then
> do:
> 
> gdal_translate -a_srs desired.wkt in.tif out.tif
> 
> PROJCS["NAD83 / UTM zone 18N",
>    GEOGCS["NAD83",
>        DATUM["North_American_Datum_1983",
>            SPHEROID["GRS 1980",6378137,298.2572221010002,
>                AUTHORITY["EPSG","7019"]],
>            AUTHORITY["EPSG","6269"]],
>        PRIMEM["Greenwich",0],
>        UNIT["degree",0.0174532925199433],
>        AUTHORITY["EPSG","4269"]],
>    PROJECTION["Transverse_Mercator"],
>    PARAMETER["latitude_of_origin",0],
>    PARAMETER["central_meridian",-75],
>    PARAMETER["scale_factor",0.9996],
>    PARAMETER["false_easting",500000],
>    PARAMETER["false_northing",0],
>    UNIT["metre",1,
>        AUTHORITY["EPSG","9001"]],
>    AUTHORITY["EPSG","26918"]]
> 
> You can also pass the entire WKT string on the commandline but that tends to
> be difficult to quote and to remove the newlines.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100703/5a2347d8/attachment.html
From ahmettemiz88 at gmail.com  Sun Jul  4 12:30:58 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Sun Jul  4 12:31:03 2010
Subject: [gdal-dev] Exception -- gdalJNI.AllRegister()
Message-ID: <AANLkTik_cSbQDtil3ucE5AV_kj26jYBuDaS_J1S5r48N@mail.gmail.com>

hello

in gdal-java application

I received this error message:

java.lang.UnsatisfiedLinkError: org.gdal.gdal.gdalJNI.AllRegister()


I checked whether gdal-1.6.jar in library build path. It looks ok.

--what are the possible reason of this problem ?

--where can I find gdal.jar ?

regards
From even.rouault at mines-paris.org  Sun Jul  4 12:40:55 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jul  4 12:41:06 2010
Subject: [gdal-dev] Exception -- gdalJNI.AllRegister()
In-Reply-To: <AANLkTik_cSbQDtil3ucE5AV_kj26jYBuDaS_J1S5r48N@mail.gmail.com>
References: <AANLkTik_cSbQDtil3ucE5AV_kj26jYBuDaS_J1S5r48N@mail.gmail.com>
Message-ID: <201007041840.55744.even.rouault@mines-paris.org>

A quick search for UnsatisfiedLinkError in a search engine shows : 
http://java.sun.com/j2se/1.4.2/docs/api/java/lang/UnsatisfiedLinkError.html

It means that the JVM cannot find the native libraries in the PATH. So make 
sure to have gdalXXX.dll (where XXX is the appropriate version number) and 
its dependencies, gdaljni.dll, ogrjni.dll, gdalconstjni.dll and osrjni.dll 
(or the equivalent .so if you're on Linux) in the PATH.

Le Sunday 04 July 2010 18:30:58 ahmet temiz, vous avez ?crit?:
> UnsatisfiedLinkError


From Sjur.A.Kolberg at sintef.no  Sun Jul  4 17:37:42 2010
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Sun Jul  4 17:38:51 2010
Subject: [gdal-dev] Integration of GDAL and OGR?
Message-ID: <72251B925CE10A478606EEAC6AA683BE196978B93A@SINTEFEXMBX01.sintef.no>


Dear list,

Has there been any discussion about a tighter integration of the GDAL and OGR class hierarchies?

Why I ask: Over the last years, we have been developing a framework for implementing spatio-temporal simulation models. This has been motivated by distributed hydrological modelling, but is also appliccable to other fields. All the variables in these models are GIS data sets that change through time, but there might be both raster and vector data sets, even mixed with scalars.

We started this before knowing of GDAL, and have a data structure where the different GIS data classes (at present raster, point-vector and scalar) inherits a common superclass containing metadata not specific to any one GIS data type. This is advantageous for the model framework, which can list and handle all the model variables as one common type.

Now Statkraft (the hydropower company that financed the development) has decided to go Open Source with this project. We have not started the process, but I am guessing that getting rid of MFC and other Windows/Microsoft specifics will increase the number of potential users.

Finally coming to the point: My existing CGisData superclass is an MFC derivative, and thus needs a new parent class. It is tempting to look for a possible solution in the well established GDAL/OGR libraries, which might also provide a shortcut to adding line and polygon covers to the list of acceptable data types. But the ability to implement a model or subroutine for "any" data type is something I would like to preserve.

So: Does anybody else see any advantage of making GDALMajorObject a subclass of OGRGeometry; or giving the two a common superclass?

Best regards,

Sjur K :-)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100704/e7aea4b0/attachment.html
From woodbri at swoodbridge.com  Sun Jul  4 23:21:14 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sun Jul  4 23:23:37 2010
Subject: [gdal-dev] ERROR 1: Too many points (441 out of 441) failed to
	transform, , unable to compute output bounds.
In-Reply-To: <201006092018.49057.even.rouault@mines-paris.org>
References: <4C0E78E6.3050809@swoodbridge.com>
	<201006082218.15727.even.rouault@mines-paris.org>
	<4C0F8FFA.2030508@swoodbridge.com>
	<201006092018.49057.even.rouault@mines-paris.org>
Message-ID: <4C314FAA.3010406@swoodbridge.com>

Even or anyone,

I have made some progress, I think, in that all of the northern 
hemisphere files have been translated without error, but until I can get 
it working in mapserver to assess the results, I wont be sure.

But all of the southern hemisphere files now generate this error 
regardless of using --config CENTER_LONG 180 or not.

So what is the "standard" if there is one way of assessing how to deal 
with files like this. I have 882 .sid files 286 in the south and 596 in 
the north. I can script the conversion, but I'm not sure what I need to 
look for and what I need to do for any random file, like setting 
--config CENTER_LONG 180 or doing something else.

It seems like having a tool like this would make sense and be useful to 
others.

So here is the info on the first of the southern files:

+ rm -f /geotiff/GeoCover2000TIF//s-01-00.tif
+ gdal_translate -a_srs EPSG:32701 -of VRT 
/geotiff/GeoCover2000/s-01-00.sid -b 1 -b 2 -b 3 
/geotiff/GeoCover2000TIF/tmp.vrt
Input file size is 26981, 38945
+ gdalwarp -srcnodata 0 -dstnodata 0 -s_srs EPSG:32701 -t_srs EPSG:4326 
-rb -wm 250 --config GDAL_CACHEMAX 250 --config GDAL_ONE_BIG_READ ON -co 
TILED=YES /geotiff/GeoCover2000TIF/tmp.vrt 
/geotiff/GeoCover2000TIF//s-01-00.tif
ERROR 1: Too many points (440 out of 441) failed to transform,
unable to compute output bounds.


  gdalinfo /geotiff/GeoCover2000TIF/tmp.vrt
Driver: VRT/Virtual Raster
Files: /geotiff/GeoCover2000TIF/tmp.vrt
        /geotiff/GeoCover2000/s-01-00.sid
Size is 26981, 38945
Coordinate System is:
PROJCS["WGS 84 / UTM zone 1S",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.01745329251994328,
             AUTHORITY["EPSG","9122"]],
         AUTHORITY["EPSG","4326"]],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",-177],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",10000000],
     AUTHORITY["EPSG","32701"],
     AXIS["Easting",EAST],
     AXIS["Northing",NORTH]]
Origin = (499498.125000000000000,1011.750000000000000)
Pixel Size = (14.250000000000000,-14.250000000000000)
Metadata:
 
IMAGE__INPUT_NAME=/dbuy/l7/outputs/mosaics742/S-01-0/locals/S-01-00_lr_742_2000.tif, 
/dbuy/l7/outputs/mosaics742/S-01-0/locals/S-01-00_ur_742_2000.tif
   IMAGE__INPUT_FILE_SIZE=3164295044.000000
   IMAGE__COMPRESSION_VERSION=1,6,3
   IMAGE__TARGET_COMPRESSION_RATIO=29.999998
   IMAGE__COMPRESSION_NLEV=8
   IMAGE__COMPRESSION_WEIGHT=2.000000
   IMAGE__COMPRESSION_GAMMA=1.000000
   IMAGE__COMPRESSION_BLOCK_SIZE=4096
   IMAGE__CREATION_DATE=Mon Sep 22 13:29:44 2003

   VERSION=MG2
Corner Coordinates:
Upper Left  (  499498.125,    1011.750) (177d 0'0.00"W, 90d 0'0.00"S)
Lower Left  (  499498.125, -553954.500) (177d 0'0.00"W, 90d 0'0.00"S)
Upper Right (  883977.375,    1011.750) (177d 0'0.00"W, 90d 0'0.00"S)
Lower Right (  883977.375, -553954.500) (177d 0'0.00"W, 90d 0'0.00"S)
Center      (  691737.750, -276471.375) (177d 0'0.00"W, 90d 0'0.00"S)
Band 1 Block=128x128 Type=Byte, ColorInterp=Red
Band 2 Block=128x128 Type=Byte, ColorInterp=Green
Band 3 Block=128x128 Type=Byte, ColorInterp=Blue

Thanks,
   -Steve

Even Rouault wrote:
>> So does --config CENTER_LONG 180 impact processing of files that are in
>> other UTM Zones? ie: can I just always use this or will if mess up other
>> files in some way?
> 
> No, I'd advise against always using --config CENTER_LONG 180 if you want to be 
> able to deal with what lies at the west of the Greenwich meridian... (That 
> would probably work but the longitudes would not fit in the [-180,180] 
> interval as expected)
> 
> Here's why (ogr/ogrct.cpp) :
> 
>                     if( x[i] < dfTargetWrapLong - 180.0 )
>                         x[i] += 360.0;
>                     else if( x[i] > dfTargetWrapLong + 180 )
>                         x[i] -= 360.0;
>                 }
> 
> So, if the coordinates are too far (more than 180 deg) from the center 
> longitude, 360 is added or substracted. That helps when you're warping from 
> UTM 1 to EPSG:4326 as part of the target coordinates are > 179 and part  
> < -179. The +360 will correct the ones < -179 so that they end up being at 
> the east of the ones > 179. 
> 
> I imagine that some heuristics could be added to gdalwarp to detect your 
> situation and automatically add the --config CENTER_LONG 180, but there's 
> always the risk to break other working use cases, and anyway people should be 
> aware that there's probably some post-processing needed to deal with the fact 
> that the result doesn't fit in the [-180,180] interval.
> 
>> Thanks,
>>    -Steve
>>
>> Even Rouault wrote:
>>> Stephen,
>>>
>>> Obviously when dealing with UTM zone 1 or 60, you can expect some issues
>>> :-)
>>>
>>> The spatial extent of your source file is the following :
>>>
>>> Upper Left  (  116009.250,  276735.000) (179d32'52.82"E,  2d29'56.85"N)
>>> Lower Left  (  116009.250,    -997.500) (179d33'4.57"E,  0d 0'32.43"S)
>>> Upper Right (  883970.250,  276735.000) (173d32'53.48"W,  2d29'56.85"N)
>>> Lower Right (  883970.250,    -997.500) (173d33'5.24"W,  0d 0'32.43"S)
>>> Center      (  499989.750,  137868.750) (177d 0'0.33"W,  1d14'50.42"N)
>>>
>>> Which means its crossing the dateline meridian, a never ending source of
>>> problems, in particular for gdalwarp...
>>>
>>> There's luckily a workaround. You can give a hint to the warping
>>> algorithm by specifying the center longitude of the area of interest.
>>>
>>> Try this : gdalwarp --config CENTER_LONG 180 -s_srs EPSG:36001 -t_srs
>>> EPSG:4326 source_dataset out.tif
>>>
>>> The longitude extent of the out.tif will be approx. between 179.55 and
>>> 186.44, which might cause issues in number of applications that would
>>> expect the longitude to be in the [-180,180] range. In that case, you'd
>>> likely need to cut it into 2 pieces, at the west and east of longitude
>>> 180 with gdal_translate.
>>>
>>> (You could also try with CENTER_LONG set at -180, which would leave to
>>> simular results, but with extent centered around -180 ...)
>>>
>>> Best regards,
>>>
>>> Even
> 
> 

From ahmettemiz88 at gmail.com  Mon Jul  5 02:26:16 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Mon Jul  5 02:26:19 2010
Subject: [gdal-dev] Exception -- gdalJNI.AllRegister()
In-Reply-To: <201007041840.55744.even.rouault@mines-paris.org>
References: <AANLkTik_cSbQDtil3ucE5AV_kj26jYBuDaS_J1S5r48N@mail.gmail.com>
	<201007041840.55744.even.rouault@mines-paris.org>
Message-ID: <AANLkTikQl0BA3YUUJtFmGZMIsddQUvXSAQBjzdY8pDzW@mail.gmail.com>

Thank you

It is in Linux- Eclipse.

I rechecked library path in eclipse.

but I still receive this exception.

Is this problem likely to be arise from problematic jar ?

regards



2010/7/4 Even Rouault <even.rouault@mines-paris.org>:
> A quick search for UnsatisfiedLinkError in a search engine shows :
> http://java.sun.com/j2se/1.4.2/docs/api/java/lang/UnsatisfiedLinkError.html
>
> It means that the JVM cannot find the native libraries in the PATH. So make
> sure to have gdalXXX.dll (where XXX is the appropriate version number) and
> its dependencies, gdaljni.dll, ogrjni.dll, gdalconstjni.dll and osrjni.dll
> (or the equivalent .so if you're on Linux) in the PATH.
>
> Le Sunday 04 July 2010 18:30:58 ahmet temiz, vous avez ?crit?:
>> UnsatisfiedLinkError
>
>
>
From monshi at home.se  Mon Jul  5 03:05:55 2010
From: monshi at home.se (Tomas R)
Date: Mon Jul  5 03:06:08 2010
Subject: [gdal-dev] C#: Retrieve boundary of coordinate system
Message-ID: <i0s08k$qee$1@dough.gmane.org>

  Attacking GDAL via the C# interface and I have a question

Have set up two (Osr) SpatialReferences  and transformations to and form 
both. One system is WGS84 and the other is unknown.

To get a consistent behaviour I need to retrieve the boundary, in WGS84 
coordinates, of the unknown system. If known I can fallback on WGS84 
when calls outside the scope of the coordinates system are made.
  Should be easy to read of some attribute of the SpatialReference or 
alike. But which/how?

Any suggestions?

Or how should I solve it - in general words:
My application maps coordinates from and to WGS84 and serves them to 
another via calls like PixelToGPS and GPSToPixel. The originating 
coordinate system is always WGS84. Need to handle calls made outside the 
scope of the coordinate system and my approach, to get a consisting 
behaviour of the two functions, is to revert to WGS84 which is defined 
at all possible points.


Yours
Tomas



From fmarkham at gmail.com  Mon Jul  5 05:18:52 2010
From: fmarkham at gmail.com (Francis Markham)
Date: Mon Jul  5 05:25:02 2010
Subject: [gdal-dev] Re: Writing non-ASCII characters to shapefile
In-Reply-To: <4C31A143.8070502@gmx.eu>
References: <AANLkTimsdGpbI4AUsVhjXhVGD-1QJluHjYRFbKltO5Cz@mail.gmail.com> 
	<4C31A143.8070502@gmx.eu>
Message-ID: <AANLkTilNJvj5hPeDGyh-HUbP7TJFEnR8oVl7tREyWcmv@mail.gmail.com>

At the bottom of this page, for one:
http://resources.arcgis.com/content/kbase?fa=articleShow&d=21106

But honestly I've found hard to find  information about this.  I'd be
very happy to be corrected if this is not the case!

Cheers,

Francis

On 5 July 2010 19:09, Hermann Peifer <peifer@gmx.eu> wrote:
> Francis, you wrote:
>
>> > I have heard that the use of UTF-8 in shapefiles is not portable.
>
> Where did you hear this?
>
> Regards, Hermann
>
>
> On 03/07/2010 04:40, Francis Markham wrote:
>>
>> Hi there,
>>
>> I'm trying to write data from a Microsoft Excel .xls file into a
>> shapefile, using OGR's Python bindings in Python 2.6. ?This is going
>> well, but I am having some problems when I try to write values that
>> contain so-called "smart quotes". ?Smart quotes are special
>> characters, defined as characters 0x91 through 0x94 in Windows-1252 (
>> see http://msdn.microsoft.com/en-au/goglobal/cc305145.aspx ).
>>
>> What is the best way to save this data to a shapefile using OGR? ?I
>> need the shapefile to be interoperable with other programs, including
>> but not limited to ESRI products. While I assume I could simply
>> translate these characters to standard ASCII, I would prefer not to if
>> possible. ?I also haven't tested the shapefiles with data from other
>> character encodings.
>>
>> I have heard that the use of UTF-8 in shapefiles is not portable. ?I
>> am also aware that shapefile.cpg can store a shapefile's codepage. ?I
>> don't know how to put these pieces together to create a portable
>> solution, however.
>>
>> Apologies if this is a newbie question, but I can't find answers on the
>> web.
>>
>> Thanks,
>>
>> Francis Markham
>
>
From peter.hopfgartner at r3-gis.com  Mon Jul  5 07:53:03 2010
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Mon Jul  5 08:01:52 2010
Subject: [gdal-dev] Re: Writing non-ASCII characters to shapefile
In-Reply-To: <AANLkTilNJvj5hPeDGyh-HUbP7TJFEnR8oVl7tREyWcmv@mail.gmail.com>
References: <AANLkTimsdGpbI4AUsVhjXhVGD-1QJluHjYRFbKltO5Cz@mail.gmail.com>
	<4C31A143.8070502@gmx.eu>
	<AANLkTilNJvj5hPeDGyh-HUbP7TJFEnR8oVl7tREyWcmv@mail.gmail.com>
Message-ID: <1278330783.2281.14.camel@peter-laptop>

Hi Francis,

what does not portable mean? ArcMap handles UTF-8 fine, if the correct
encoding is written into the .cpg file. Recent shapelib should handle
this fine, too. If there is any problem with a specific GIS program, a
bug report for that GIS program might be the right thing to do.

Regards,

Peter

On Mon, 2010-07-05 at 19:18 +1000, Francis Markham wrote:
> At the bottom of this page, for one:
> http://resources.arcgis.com/content/kbase?fa=articleShow&d=21106
> 
> But honestly I've found hard to find  information about this.  I'd be
> very happy to be corrected if this is not the case!
> 
> Cheers,
> 
> Francis
> 
> On 5 July 2010 19:09, Hermann Peifer <peifer@gmx.eu> wrote:
> > Francis, you wrote:
> >
> >> > I have heard that the use of UTF-8 in shapefiles is not portable.
> >
> > Where did you hear this?
> >
> > Regards, Hermann
> >
> >
> > On 03/07/2010 04:40, Francis Markham wrote:
> >>
> >> Hi there,
> >>
> >> I'm trying to write data from a Microsoft Excel .xls file into a
> >> shapefile, using OGR's Python bindings in Python 2.6.  This is going
> >> well, but I am having some problems when I try to write values that
> >> contain so-called "smart quotes".  Smart quotes are special
> >> characters, defined as characters 0x91 through 0x94 in Windows-1252 (
> >> see http://msdn.microsoft.com/en-au/goglobal/cc305145.aspx ).
> >>
> >> What is the best way to save this data to a shapefile using OGR?  I
> >> need the shapefile to be interoperable with other programs, including
> >> but not limited to ESRI products. While I assume I could simply
> >> translate these characters to standard ASCII, I would prefer not to if
> >> possible.  I also haven't tested the shapefiles with data from other
> >> character encodings.
> >>
> >> I have heard that the use of UTF-8 in shapefiles is not portable.  I
> >> am also aware that shapefile.cpg can store a shapefile's codepage.  I
> >> don't know how to put these pieces together to create a portable
> >> solution, however.
> >>
> >> Apologies if this is a newbie question, but I can't find answers on the
> >> web.
> >>
> >> Thanks,
> >>
> >> Francis Markham
> >
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Dott. Peter Hopfgartner

R3 GIS Srl - GmbH
Via Johann Kravogl-Str. 2
I-39012 Meran/Merano (BZ)
Email: peter.hopfgartner@r3-gis.com
Tel. : +39 0473 494949
Fax  : +39 0473 069902
www  : http://www.r3-gis.com

XING : http://www.xing.com/go/invita/8917535

From monicabuescu1985 at gmail.com  Mon Jul  5 08:53:19 2010
From: monicabuescu1985 at gmail.com (Monica Buescu)
Date: Mon Jul  5 08:53:22 2010
Subject: [gdal-dev] Re: gdal_translate -a_srs
Message-ID: <AANLkTim-3dkz2xH9c3k2AdVW2q5uvN6dVIFfRkUu4N30@mail.gmail.com>

Hi

I don't want to interrupt or disturb the conversation but, wouldn't it be
much better to just use EPSG code for NAD 1983, UTM Zone 18N?
Best Regards
Monica
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100705/84b27b77/attachment.html
From m.stelluti at gmail.com  Mon Jul  5 09:51:31 2010
From: m.stelluti at gmail.com (Marco Stelluti)
Date: Mon Jul  5 09:51:36 2010
Subject: [gdal-dev] Modify an image color table? ---SOLVED----
Message-ID: <AANLkTin5gdz6-uBhgjilAHLauW1a8RJ_-OhFEuGTtEbX@mail.gmail.com>

Modify an image color table?
-- SOLVED --

Thanks a lot Frank and Luke.

This is the solution of my problem:
1) I built *.vrt file from ASCII file;
2) I used the <LUT> command like this:

----------------------------------------------------------------------------------------------------------
  <VRTRasterBand dataType="Byte" band="1">
   <ColorInterp>Red</ColorInterp>
    <ComplexSource>
      <SourceFilename relativeToVRT="1">file.asc</SourceFilename>
      <SourceBand>1</SourceBand>
     <LUT>
-9999:0,
-31:99,
-30:99,
-29:99,
-28:99,
-27:99,
-26:99,
-25:99,
-24:99,
-23:99,
-22:99,
-21:99,
-20:99,
-19:99,
-18:99,
-17:99,
-16:99,
-15:20,
-14:20,
-13:20,
-12:20,
-11:20,
-10:8,
-9:8,
-8:8,
-7:8,
-6:8,
-5:5,
-4:5,
-3:5,
-2:5,
-1:5,
0:3,
1:3,
2:3,
3:3,
4:3,
5:1,
6:1,
7:1,
8:1,
9:1,
10:1,
11:1,
12:1,
13:1,
14:1,
15:30,
16:30,
17:30,
18:30,
19:30,
20:52,
21:52,
22:52,
23:52,
24:52,
25:72,
26:72,
27:72,
28:72,
29:72,
30:94,
31:94,
32:94,
33:94,
34:94,
35:100,
36:100,
37:100,
38:100,
39:100,
40:100,
41:100,
42:100,
43:100,
44:100,
45:100,
46:100,
47:100,
48:100,
49:100,
50:100,
51:100,
52:100,
53:100,
54:100,
55:100,
56:100,
57:100,
58:100,
59:100,
60:90,
61:90,
62:90,
63:90,
64:90,
65:82
     </LUT>
    </ComplexSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="2">
   <ColorInterp>Green</ColorInterp>
    <ComplexSource>
      <SourceFilename relativeToVRT="1">file.asc</SourceFilename>
      <SourceBand>1</SourceBand>
     <LUT>
-9999:0,
-31:99,
-30:99,
-29:99,
-28:99,
-27:99,
-26:99,
-25:99,
-24:99,
-23:99,
-22:99,
-21:99,
-20:99,
-19:99,
-18:99,
-17:99,
-16:99,
-15:8,
-14:8,
-13:8,
-12:8,
-11:8,
-10:22,
-9:22,
-8:22,
-7:22,
-6:22,
-5:33,
-4:33,
-3:33,
-2:33,
-1:33,
0:42,
1:42,
2:42,
3:42,
4:42,
5:60,
6:60,
7:60,
8:60,
9:60,
10:67,
11:67,
12:67,
13:67,
14:67,
15:87,
16:87,
17:87,
18:87,
19:87,
20:91,
21:91,
22:91,
23:91,
24:91,
25:95,
26:95,
27:95,
28:95,
29:95,
30:99,
31:99,
32:99,
33:99,
34:99,
35:90,
36:90,
37:90,
38:90,
39:90,
40:79,
41:79,
42:79,
43:79,
44:79,
45:65,
46:65,
47:65,
48:65,
49:65,
50:50,
51:50,
52:50,
53:50,
54:50,
55:20,
56:20,
57:20,
58:20,
59:20,
60:1,
61:1,
62:1,
63:1,
64:1,
65:1
     </LUT>
    </ComplexSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="3">
   <ColorInterp>Blue</ColorInterp>
    <ComplexSource>
      <SourceFilename relativeToVRT="1">file.asc</SourceFilename>
      <SourceBand>1</SourceBand>
     <LUT>
-9999:0,
-31:99,
-30:99,
-29:99,
-28:99,
-27:99,
-26:99,
-25:99,
-24:99,
-23:99,
-22:99,
-21:99,
-20:99,
-19:99,
-18:99,
-17:99,
-16:99,
-15:69,
-14:69,
-13:69,
-12:69,
-11:69,
-10:68,
-9:68,
-8:68,
-7:68,
-6:68,
-5:65,
-4:65,
-3:65,
-2:65,
-1:65,
0:64,
1:64,
2:64,
3:64,
4:64,
5:60,
6:60,
7:60,
8:60,
9:60,
10:42,
11:42,
12:42,
13:42,
14:42,
15:1,
16:1,
17:1,
18:1,
19:1,
20:1,
21:1,
22:1,
23:1,
24:1,
25:1,
26:1,
27:1,
28:1,
29:1,
30:1,
31:1,
32:1,
33:1,
34:1,
35:1,
36:1,
37:1,
38:1,
39:1,
40:1,
41:1,
42:1,
43:1,
44:1,
45:1,
46:1,
47:1,
48:1,
49:1,
50:1,
51:1,
52:1,
53:1,
54:1,
55:1,
56:1,
57:1,
58:1,
59:1,
60:20,
61:20,
62:20,
63:20,
64:20,
65:43
     </LUT>
    </ComplexSource>
  </VRTRasterBand>
---------------------------------------------------------------------------------------------------------------------------------------------









2010/6/25 Frank Warmerdam <warmerdam@pobox.com>

> Marco Stelluti wrote:
>
>> Hi,
>> I'm a new gdal user and I've a little problem.
>>
>> I have to modify the color to an ASCII raster.
>>
>> 1_ I converted the raster using gdalbuildvrt;
>> 2_ I modified the file *.vrt adding:
>>    <ColorInterp>Palette</ColorInterp>
>>  <ColorTable>
>> <Entry c1="255" c2="255" c3="255" c4="255"/>
>> <Entry c1="0" c2="0" c3="150" c4="255"/>
>> <Entry c1="0" c2="0" c3="150" c4="255"/>
>> .......
>>  </ColorTable>
>> 3_ I know: "The entries are ordered and will be assumed to start from
>> color table entry 0"
>> 4_ But I have some negative value on the ASCII raster, the range is from
>> -31 to 65.
>> 5_ How I can resolve this problem?
>>
>
> Marco,
>
> Generally speaking GDAL color maps do not have an obvious application
> to negative or non-integer data.  You could use the "raster attribute
> table"
> mechanism to represent color assignments to negative values, but since so
> few applications make use of this data object it is nearly useless to do
> so.
>
> What application do you want the color table to work in?  How you handle
> the situation will depend on the output application.   If preserving the
> original pixel values isn't important you may want to reprocess/rescale
> your
> raster.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100705/1fb9368c/attachment.html
From gregcoats at mac.com  Mon Jul  5 11:39:39 2010
From: gregcoats at mac.com (Greg Coats)
Date: Mon Jul  5 11:39:43 2010
Subject: [gdal-dev] Re: gdal_translate -a_srs
In-Reply-To: <AANLkTim-3dkz2xH9c3k2AdVW2q5uvN6dVIFfRkUu4N30@mail.gmail.com>
References: <AANLkTim-3dkz2xH9c3k2AdVW2q5uvN6dVIFfRkUu4N30@mail.gmail.com>
Message-ID: <13F30583-8CE3-4C32-B6D3-BD8CFB3880A1@mac.com>

What is the EPSG code for NAD 1983, UTM Zone 18N?
Where does one go to lookup the EPSG code for a projection?
Greg

On Jul 5, 2010, at 8:53 AM, Monica Buescu wrote:

> Hi
> I don't want to interrupt or disturb the conversation but, wouldn't it be much better to just use EPSG code for NAD 1983, UTM Zone 18N?
> Best Regards
> Monica
> _______________________________________________
> gdal-dev mailing list


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100705/a9b3e80b/attachment.html
From jrepetto at free.fr  Mon Jul  5 11:50:38 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Mon Jul  5 11:50:45 2010
Subject: [gdal-dev] Re: gdal_translate -a_srs
In-Reply-To: <13F30583-8CE3-4C32-B6D3-BD8CFB3880A1@mac.com>
References: <AANLkTim-3dkz2xH9c3k2AdVW2q5uvN6dVIFfRkUu4N30@mail.gmail.com>
	<13F30583-8CE3-4C32-B6D3-BD8CFB3880A1@mac.com>
Message-ID: <4C31FF4E.2080803@free.fr>

Le 05/07/2010 17:39, Greg Coats a ?crit :
> What is the EPSG code for NAD 1983, UTM Zone 18N?
> Where does one go to lookup the EPSG code for a projection?
> Greg


http://spatialreference.org/ref/epsg/26918/
From dmorissette at mapgears.com  Mon Jul  5 11:42:46 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Jul  5 11:51:19 2010
Subject: [gdal-dev] Re: gdal_translate -a_srs
In-Reply-To: <13F30583-8CE3-4C32-B6D3-BD8CFB3880A1@mac.com>
References: <AANLkTim-3dkz2xH9c3k2AdVW2q5uvN6dVIFfRkUu4N30@mail.gmail.com>
	<13F30583-8CE3-4C32-B6D3-BD8CFB3880A1@mac.com>
Message-ID: <4C31FD76.2000500@mapgears.com>

Greg Coats wrote:
> What is the EPSG code for NAD 1983, UTM Zone 18N?
> Where does one go to lookup the EPSG code for a projection?
> Greg
> 

A useful resource is http://spatialreference.org/

... and for "NAD 1983 UTM Zone 18" it returns:

http://spatialreference.org/ref/?search=NAD+1983+UTM+Zone+18&srtext=Search

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From bfraser at geoanalytic.com  Mon Jul  5 11:51:16 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Mon Jul  5 11:57:14 2010
Subject: [gdal-dev] ERROR 1: Too many points (441 out of 441) failed to
	transform, , unable to compute output bounds.
In-Reply-To: <4C314FAA.3010406@swoodbridge.com>
References: <4C0E78E6.3050809@swoodbridge.com>	<201006082218.15727.even.rouault@mines-paris.org>	<4C0F8FFA.2030508@swoodbridge.com>	<201006092018.49057.even.rouault@mines-paris.org>
	<4C314FAA.3010406@swoodbridge.com>
Message-ID: <4C31FF74.20508@geoanalytic.com>

Stephan,

   Even though the tiles are South of the equator, they are in the UTM North 
coordinate system.  Try

-a_srs EPSG:32601

instead of 32701, for Zone 1.

Brent

Stephen Woodbridge wrote:
> Even or anyone,
> 
> I have made some progress, I think, in that all of the northern 
> hemisphere files have been translated without error, but until I can get 
> it working in mapserver to assess the results, I wont be sure.
> 
> But all of the southern hemisphere files now generate this error 
> regardless of using --config CENTER_LONG 180 or not.
> 
> So what is the "standard" if there is one way of assessing how to deal 
> with files like this. I have 882 .sid files 286 in the south and 596 in 
> the north. I can script the conversion, but I'm not sure what I need to 
> look for and what I need to do for any random file, like setting 
> --config CENTER_LONG 180 or doing something else.
> 
> It seems like having a tool like this would make sense and be useful to 
> others.
> 
> So here is the info on the first of the southern files:
> 
> + rm -f /geotiff/GeoCover2000TIF//s-01-00.tif
> + gdal_translate -a_srs EPSG:32701 -of VRT 
> /geotiff/GeoCover2000/s-01-00.sid -b 1 -b 2 -b 3 
> /geotiff/GeoCover2000TIF/tmp.vrt
> Input file size is 26981, 38945
> + gdalwarp -srcnodata 0 -dstnodata 0 -s_srs EPSG:32701 -t_srs EPSG:4326 
> -rb -wm 250 --config GDAL_CACHEMAX 250 --config GDAL_ONE_BIG_READ ON -co 
> TILED=YES /geotiff/GeoCover2000TIF/tmp.vrt 
> /geotiff/GeoCover2000TIF//s-01-00.tif
> ERROR 1: Too many points (440 out of 441) failed to transform,
> unable to compute output bounds.
> 
> 
>  gdalinfo /geotiff/GeoCover2000TIF/tmp.vrt
> Driver: VRT/Virtual Raster
> Files: /geotiff/GeoCover2000TIF/tmp.vrt
>        /geotiff/GeoCover2000/s-01-00.sid
> Size is 26981, 38945
> Coordinate System is:
> PROJCS["WGS 84 / UTM zone 1S",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.01745329251994328,
>             AUTHORITY["EPSG","9122"]],
>         AUTHORITY["EPSG","4326"]],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-177],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",10000000],
>     AUTHORITY["EPSG","32701"],
>     AXIS["Easting",EAST],
>     AXIS["Northing",NORTH]]
> Origin = (499498.125000000000000,1011.750000000000000)
> Pixel Size = (14.250000000000000,-14.250000000000000)
> Metadata:
> 
> IMAGE__INPUT_NAME=/dbuy/l7/outputs/mosaics742/S-01-0/locals/S-01-00_lr_742_2000.tif, 
> /dbuy/l7/outputs/mosaics742/S-01-0/locals/S-01-00_ur_742_2000.tif
>   IMAGE__INPUT_FILE_SIZE=3164295044.000000
>   IMAGE__COMPRESSION_VERSION=1,6,3
>   IMAGE__TARGET_COMPRESSION_RATIO=29.999998
>   IMAGE__COMPRESSION_NLEV=8
>   IMAGE__COMPRESSION_WEIGHT=2.000000
>   IMAGE__COMPRESSION_GAMMA=1.000000
>   IMAGE__COMPRESSION_BLOCK_SIZE=4096
>   IMAGE__CREATION_DATE=Mon Sep 22 13:29:44 2003
> 
>   VERSION=MG2
> Corner Coordinates:
> Upper Left  (  499498.125,    1011.750) (177d 0'0.00"W, 90d 0'0.00"S)
> Lower Left  (  499498.125, -553954.500) (177d 0'0.00"W, 90d 0'0.00"S)
> Upper Right (  883977.375,    1011.750) (177d 0'0.00"W, 90d 0'0.00"S)
> Lower Right (  883977.375, -553954.500) (177d 0'0.00"W, 90d 0'0.00"S)
> Center      (  691737.750, -276471.375) (177d 0'0.00"W, 90d 0'0.00"S)
> Band 1 Block=128x128 Type=Byte, ColorInterp=Red
> Band 2 Block=128x128 Type=Byte, ColorInterp=Green
> Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
> 
> Thanks,
>   -Steve
> 
> Even Rouault wrote:
>>> So does --config CENTER_LONG 180 impact processing of files that are in
>>> other UTM Zones? ie: can I just always use this or will if mess up other
>>> files in some way?
>>
>> No, I'd advise against always using --config CENTER_LONG 180 if you 
>> want to be able to deal with what lies at the west of the Greenwich 
>> meridian... (That would probably work but the longitudes would not fit 
>> in the [-180,180] interval as expected)
>>
>> Here's why (ogr/ogrct.cpp) :
>>
>>                     if( x[i] < dfTargetWrapLong - 180.0 )
>>                         x[i] += 360.0;
>>                     else if( x[i] > dfTargetWrapLong + 180 )
>>                         x[i] -= 360.0;
>>                 }
>>
>> So, if the coordinates are too far (more than 180 deg) from the center 
>> longitude, 360 is added or substracted. That helps when you're warping 
>> from UTM 1 to EPSG:4326 as part of the target coordinates are > 179 
>> and part  < -179. The +360 will correct the ones < -179 so that they 
>> end up being at the east of the ones > 179.
>> I imagine that some heuristics could be added to gdalwarp to detect 
>> your situation and automatically add the --config CENTER_LONG 180, but 
>> there's always the risk to break other working use cases, and anyway 
>> people should be aware that there's probably some post-processing 
>> needed to deal with the fact that the result doesn't fit in the 
>> [-180,180] interval.
>>
>>> Thanks,
>>>    -Steve
>>>
>>> Even Rouault wrote:
>>>> Stephen,
>>>>
>>>> Obviously when dealing with UTM zone 1 or 60, you can expect some 
>>>> issues
>>>> :-)
>>>>
>>>> The spatial extent of your source file is the following :
>>>>
>>>> Upper Left  (  116009.250,  276735.000) (179d32'52.82"E,  2d29'56.85"N)
>>>> Lower Left  (  116009.250,    -997.500) (179d33'4.57"E,  0d 0'32.43"S)
>>>> Upper Right (  883970.250,  276735.000) (173d32'53.48"W,  2d29'56.85"N)
>>>> Lower Right (  883970.250,    -997.500) (173d33'5.24"W,  0d 0'32.43"S)
>>>> Center      (  499989.750,  137868.750) (177d 0'0.33"W,  1d14'50.42"N)
>>>>
>>>> Which means its crossing the dateline meridian, a never ending 
>>>> source of
>>>> problems, in particular for gdalwarp...
>>>>
>>>> There's luckily a workaround. You can give a hint to the warping
>>>> algorithm by specifying the center longitude of the area of interest.
>>>>
>>>> Try this : gdalwarp --config CENTER_LONG 180 -s_srs EPSG:36001 -t_srs
>>>> EPSG:4326 source_dataset out.tif
>>>>
>>>> The longitude extent of the out.tif will be approx. between 179.55 and
>>>> 186.44, which might cause issues in number of applications that would
>>>> expect the longitude to be in the [-180,180] range. In that case, you'd
>>>> likely need to cut it into 2 pieces, at the west and east of longitude
>>>> 180 with gdal_translate.
>>>>
>>>> (You could also try with CENTER_LONG set at -180, which would leave to
>>>> simular results, but with extent centered around -180 ...)
>>>>
>>>> Best regards,
>>>>
>>>> Even
>>
>>
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From julianbui at gmail.com  Mon Jul  5 14:23:14 2010
From: julianbui at gmail.com (jbu311)
Date: Mon Jul  5 14:23:16 2010
Subject: [gdal-dev] Determining which .img subimage .OVR and .RRD pyramid go
	with
Message-ID: <1278354194880-5257139.post@n2.nabble.com>


Hi all,

I am trying to associate my .OVR (or RRD) pyramid file with its .img
counterpart.  Dealing with subimages is where it gets tricky.

As I understand it, <file_a>.ovr (or .rrd) is the pyramid file for <file_a>. 
So that's simple enough.  

However the problem is dealing with subimages.  My .img file has multiple
subimages.  How do I know which subimage the .ovr file goes with?  In my
particular file, each subimage looks exactly alike and as far as I can tell,
they are all identical.  In this case I might be able to assume the
.ovr/.rrd file can go with each and every subimage.  

But what if the .img file has multiple subimages that are all different? 
How do I know which the .ovr file goes with???

Please help me out.

Thanks in advance.

Julian
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Determining-which-img-subimage-OVR-and-RRD-pyramid-go-with-tp5257139p5257139.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From julianbui at gmail.com  Mon Jul  5 14:34:58 2010
From: julianbui at gmail.com (jbu311)
Date: Mon Jul  5 14:35:01 2010
Subject: [gdal-dev] Pyramid level 1 in OVR pyramid file
Message-ID: <1278354898597-5257173.post@n2.nabble.com>


Hi everyone,

I understand that the first pyramid level (subimage 0) in an OVR pyramid
file is missing because this saves a lot of space compared to how RRD
pyramid files are built.

For those of you who use the pyramid files to display/zoom images, do you
rebuild the first pyramid level or do you zoom out from the source image?  

The problem I have with rebuilding the first pyramid level is that this
level takes the longest to generate.  The point of pyramid files is to save
generation time.  Why would they leave out the level that takes the longest? 
This means I have to spend a lot of time regenerating it, defeating the
entire purpose of pyramids.  The levels > 1 are relatively much quicker to
generate.

Any experience/words of advice in implementing zooming with .ovr files in
level 1 would be appreciated.

Thanks,
Julian 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Pyramid-level-1-in-OVR-pyramid-file-tp5257173p5257173.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From gregcoats at mac.com  Mon Jul  5 15:50:10 2010
From: gregcoats at mac.com (Greg Coats)
Date: Mon Jul  5 15:50:15 2010
Subject: [gdal-dev] gdal_translate -a_srs
In-Reply-To: <91A097B9-9ADB-4477-838E-18631BE6AD41@mac.com>
References: <2366.64.15.96.66.1278090427.squirrel@ideotrope.org>
	<4C2F3A75.5090904@pobox.com>
	<C87EC9CB-1284-4F1D-BF79-6450576BD796@mac.com>
	<4C2F44CA.3070003@pobox.com>
	<91A097B9-9ADB-4477-838E-18631BE6AD41@mac.com>
Message-ID: <BB8858BE-44FD-4C69-B8F2-6B3642CC3F1A@mac.com>

Following Frank's suggestion, and in accordance with the web page GDAL Utilities http://www.gdal.org/gdal_utilities.html Creating New Files
I issued these GDAL commands

$ gdal_translate --version
GDAL 1.7.2, released 2010/04/23
$ gdal_translate -of GTiff -ot Uint16 -a_srs NAD83_UTM18N.wkt in.tif out.tif
$ gdal_translate -of GTiff -ot Uint16 -a_srs EPSG:26918       in.tif out.tif
The two out.tif files created are identical.

gdalinfo shows that out.tif has the expected values for PROJCS through AUTHORITY, including
	UNIT["metre",1,
but gdalinfo shows out.tif still has latitude longitude values for Origin and Pixel Size  
Origin = (-78.000555555559998,40.000555555555515)
Pixel Size = (0.000092592592593,-0.000092592592593)
rather than the expected Origin and Pixel Size values for NAD 1983, UTM Zone 18N of about
Origin = (271500.000000000000000,4335000.000000000000000)
Pixel Size = (38.385826771653548,-38.385826771653548)

This Origin and Pixel Size difference prevents out.tif from being displayed by Qgis along with the original NAD 1983 UTM Zone 18N .tif. It is though the gdal_translate -a_srs process is only partially complete? What additional step is necessary so that out.tif has Origin and Pixel Size values in UTM, rather than lat/long?
Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100705/7eab38c6/attachment.html
From warmerdam at pobox.com  Mon Jul  5 19:25:13 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jul  5 19:25:18 2010
Subject: [gdal-dev] gdal_translate -a_srs
In-Reply-To: <BB8858BE-44FD-4C69-B8F2-6B3642CC3F1A@mac.com>
References: <2366.64.15.96.66.1278090427.squirrel@ideotrope.org>
	<4C2F3A75.5090904@pobox.com>
	<C87EC9CB-1284-4F1D-BF79-6450576BD796@mac.com>
	<4C2F44CA.3070003@pobox.com>
	<91A097B9-9ADB-4477-838E-18631BE6AD41@mac.com>
	<BB8858BE-44FD-4C69-B8F2-6B3642CC3F1A@mac.com>
Message-ID: <4C3269D9.9070000@pobox.com>

Greg Coats wrote:
> Following Frank's suggestion, and in accordance with the web page GDAL 
> Utilities http://www.gdal.org/gdal_utilities.html Creating New Files
> I issued these GDAL commands
> 
> $ gdal_translate --version
> GDAL 1.7.2, released 2010/04/23
> $ gdal_translate -of GTiff -ot Uint16 -a_srs NAD83_UTM18N.wkt in.tif out.tif
> $ gdal_translate -of GTiff -ot Uint16 -a_srs EPSG:26918       in.tif out.tif
> The two out.tif files created are identical.
> 
> gdalinfo shows that out.tif has the expected values for PROJCS through 
> AUTHORITY, including
> UNIT["metre",1,
> but gdalinfo shows out.tif still has latitude longitude values for 
> Origin and Pixel Size  
> Origin = (-78.000555555559998,40.000555555555515)
> Pixel Size = (0.000092592592593,-0.000092592592593)
> rather than the expected Origin and Pixel Size values for NAD 1983, UTM 
> Zone 18N of about
> Origin = (271500.000000000000000,4335000.000000000000000)
> Pixel Size = (38.385826771653548,-38.385826771653548)
> 
> This Origin and Pixel Size difference prevents out.tif from being 
> displayed by Qgis along with the original NAD 1983 UTM Zone 18N .tif. It 
> is though the gdal_translate -a_srs process is only partially complete? 
> What additional step is necessary so that out.tif has Origin and Pixel 
> Size values in UTM, rather than lat/long?

Greg.

The -a_srs switch assigns a new coordinate system.  It does not reproject
the image.  I think you want to use gdalwarp like:

   gdalwarp -t_srs EPSG:26918 in.tif out.tif

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From zuliani at mayachitra.com  Mon Jul  5 20:56:09 2010
From: zuliani at mayachitra.com (Marco Zuliani)
Date: Mon Jul  5 20:56:31 2010
Subject: [gdal-dev] Problem creating geo-tiff from scratch
Message-ID: <AANLkTimFZi7mJbqXQX9ZXH2EqYR96ppuHrxONZyVOkvq@mail.gmail.com>

Dear all,

 I am trying to utilize GDAL to generate a geo-tiff image from scratch. I
have been following the tutorial presented at
http://www.gdal.org/gdal_tutorial.html and I have been reading the
documentation of the functions involved in the process, but so far I have
not beed successfull in accomplishing my goal.

 In the following I will first paste (partially) my routine in the fervent
hope that somebidy can spot my error and help me out. I will denote with
[...] portions of the code that have been omitted because I believe they are
not relevant to my question. After the listing I will present my questions.

 --- CODE BEGINS ---

[...]

    // There is a driver for each supported format. Attempt to register all
known drivers
    // Ensure that GDALAllRegister() has been called before calling
GetDriverByName().
    GDALAllRegister();

    // select the geotiff format for GDAL
    const char *pszFormat = "GTiff";
    GDALDriver *poDriver = GetGDALDriverManager()->GetDriverByName(
pszFormat );

    // make some checks to avoid headaches in the future
    if ( poDriver == NULL )
    {
// take care of the error condition
 [...]
    }

     // get some info regarding the GDAL driver
    char **papszMetadata = poDriver->GetMetadata();

    if ( !CSLFetchBoolean( papszMetadata, GDAL_DCAP_CREATE, FALSE ) )
    {
 // take care of the error condition in case creation is not possible
    }

[...]
 // at this point the some variables used in a while have the following
values
 // width = 251
 // height = 234
 // bands = 4
     // this hosts the list of driver specific control parameters.
    // See http://www.gdal.org/frmt_gtiff.html
    char **papszOptions = NULL;
    papszOptions = CSLSetNameValue( papszOptions, "TWF", "NO" );
    papszOptions = CSLSetNameValue( papszOptions, "TILED", "NO" );

    int height  = FreeImage_GetHeight( I );
    int width   = FreeImage_GetWidth( I );
    // this is the georeferenced image
    const char *options = GDALGetDriverCreationOptionList(poDriver);
    GDALDataset *Ig = poDriver->Create( "test.tif", width, height, bands,
GDT_Byte, papszOptions );
 --- CODE ENDS ---

Questions:

1] The program outputs to the console the following message: "Warning 6:
Driver GTiff does not support TWF creation option". Why? From the
documentation at http://www.gdal.org/frmt_gtiff.html it seems that such
option is supported...

2] From Visual Studio debugger I can see that the values of poDriver are
messed up and also the values of eAccess, nRasterXSize, nRasterYSize, nBands
seem to be scrabled (I would expect nBands = 4, nRasterXsize = 251, etc.).
Does anybody have an idea of what's going on? (Please find below the output
of the debugger Name/Value/Type)

- Ig 0x00000000039fa450 {hTIFF=0x00000000039fa000
ppoActiveDSRef=0x00000000039fa560 poActiveDS=0x00000000039fa450 ...}
GDALDataset
*
+ [GTiffDataset] {hTIFF=0x00000000039fa000 ppoActiveDSRef=0x00000000039fa560
poActiveDS=0x00000000039fa450 ...} GTiffDataset
+ GDALMajorObject {nFlags=33 sDescription={...} oMDMD={...} }
GDALMajorObject
- poDriver 0x000000fb00000001 {pfnOpen=??? pfnCreate=??? pfnDelete=???
...} GDALDriver
*
+ GDALMajorObject {nFlags=??? sDescription={...} oMDMD={...} }
GDALMajorObject
 pfnOpen CXX0030: Error: expression cannot be evaluated
 pfnCreate CXX0030: Error: expression cannot be evaluated
 pfnDelete CXX0030: Error: expression cannot be evaluated
 pfnCreateCopy CXX0030: Error: expression cannot be evaluated
 pDriverData CXX0030: Error: expression cannot be evaluated
 pfnUnloadDriver CXX0030: Error: expression cannot be evaluated
 pfnIdentify CXX0030: Error: expression cannot be evaluated
 pfnRename CXX0030: Error: expression cannot be evaluated
 pfnCopyFiles CXX0030: Error: expression cannot be evaluated
 eAccess 234 GDALAccess
 nRasterXSize 4 int
 nRasterYSize 60761968 int
 nBands 0 int
+ papoBands 0x0000000100000000 GDALRasterBand * *
 bForceCachedIO 0 int
 nRefCount -1163005939 int
 bShared 0 int
+ oOvManager {poDS=0x0000000000000000 poODS=0xbaadf00dbaadf00d
osOvrFilename={...} ...} GDALDefaultOverviews

Thanks in advance for your help,
Marco

Marco Zuliani, Phd

phone: +1 805 967 9828
web: www.mayachitra.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100705/5a344881/attachment-0001.html
From gregcoats at mac.com  Mon Jul  5 21:05:16 2010
From: gregcoats at mac.com (Greg Coats)
Date: Mon Jul  5 21:05:40 2010
Subject: [gdal-dev] gdal_translate -a_srs
In-Reply-To: <4C3269D9.9070000@pobox.com>
References: <2366.64.15.96.66.1278090427.squirrel@ideotrope.org>
	<4C2F3A75.5090904@pobox.com>
	<C87EC9CB-1284-4F1D-BF79-6450576BD796@mac.com>
	<4C2F44CA.3070003@pobox.com>
	<91A097B9-9ADB-4477-838E-18631BE6AD41@mac.com>
	<BB8858BE-44FD-4C69-B8F2-6B3642CC3F1A@mac.com>
	<4C3269D9.9070000@pobox.com>
Message-ID: <9A51256E-2BCC-4178-89D2-F43594481DE7@mac.com>

Frank, Yes! Thank you. Greg

On Jul 5, 2010, at 7:25 PM, Frank Warmerdam wrote:

> Greg Coats wrote:
>> Following Frank's suggestion, and in accordance with the web page GDAL Utilities http://www.gdal.org/gdal_utilities.html Creating New Files
>> I issued these GDAL commands
>> $ gdal_translate --version
>> GDAL 1.7.2, released 2010/04/23
>> $ gdal_translate -of GTiff -ot Uint16 -a_srs NAD83_UTM18N.wkt in.tif out.tif
>> $ gdal_translate -of GTiff -ot Uint16 -a_srs EPSG:26918       in.tif out.tif
>> The two out.tif files created are identical.
>> gdalinfo shows that out.tif has the expected values for PROJCS through AUTHORITY, including
>> UNIT["metre",1,
>> but gdalinfo shows out.tif still has latitude longitude values for Origin and Pixel Size  Origin = (-78.000555555559998,40.000555555555515)
>> Pixel Size = (0.000092592592593,-0.000092592592593)
>> rather than the expected Origin and Pixel Size values for NAD 1983, UTM Zone 18N of about
>> Origin = (271500.000000000000000,4335000.000000000000000)
>> Pixel Size = (38.385826771653548,-38.385826771653548)
>> This Origin and Pixel Size difference prevents out.tif from being displayed by Qgis along with the original NAD 1983 UTM Zone 18N .tif. It is though the gdal_translate -a_srs process is only partially complete? What additional step is necessary so that out.tif has Origin and Pixel Size values in UTM, rather than lat/long?
> 
> Greg.
> 
> The -a_srs switch assigns a new coordinate system.  It does not reproject
> the image.  I think you want to use gdalwarp like:
> 
>  gdalwarp -t_srs EPSG:26918 in.tif out.tif
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 

From fmarkham at gmail.com  Mon Jul  5 22:13:50 2010
From: fmarkham at gmail.com (Francis Markham)
Date: Mon Jul  5 22:14:13 2010
Subject: [gdal-dev] Re: Writing non-ASCII characters to shapefile
In-Reply-To: <1278330783.2281.14.camel@peter-laptop>
References: <AANLkTimsdGpbI4AUsVhjXhVGD-1QJluHjYRFbKltO5Cz@mail.gmail.com> 
	<4C31A143.8070502@gmx.eu>
	<AANLkTilNJvj5hPeDGyh-HUbP7TJFEnR8oVl7tREyWcmv@mail.gmail.com> 
	<1278330783.2281.14.camel@peter-laptop>
Message-ID: <AANLkTike2xzgZbCD4TJQhBkX2ByOr-2X68GBRcWL2Ise@mail.gmail.com>

Okay, I will take that approach then.  Thank you all for your help.

What specific value should I write into the .cpg? The string '65001'
or the string 'utf-8' or something else?

-Francis

On 5 July 2010 21:53, Peter Hopfgartner <peter.hopfgartner@r3-gis.com> wrote:
> Hi Francis,
>
> what does not portable mean? ArcMap handles UTF-8 fine, if the correct
> encoding is written into the .cpg file. Recent shapelib should handle
> this fine, too. If there is any problem with a specific GIS program, a
> bug report for that GIS program might be the right thing to do.
>
> Regards,
>
> Peter
>
> On Mon, 2010-07-05 at 19:18 +1000, Francis Markham wrote:
>> At the bottom of this page, for one:
>> http://resources.arcgis.com/content/kbase?fa=articleShow&d=21106
>>
>> But honestly I've found hard to find ?information about this. ?I'd be
>> very happy to be corrected if this is not the case!
>>
>> Cheers,
>>
>> Francis
>>
>> On 5 July 2010 19:09, Hermann Peifer <peifer@gmx.eu> wrote:
>> > Francis, you wrote:
>> >
>> >> > I have heard that the use of UTF-8 in shapefiles is not portable.
>> >
>> > Where did you hear this?
>> >
>> > Regards, Hermann
>> >
>> >
>> > On 03/07/2010 04:40, Francis Markham wrote:
>> >>
>> >> Hi there,
>> >>
>> >> I'm trying to write data from a Microsoft Excel .xls file into a
>> >> shapefile, using OGR's Python bindings in Python 2.6. ?This is going
>> >> well, but I am having some problems when I try to write values that
>> >> contain so-called "smart quotes". ?Smart quotes are special
>> >> characters, defined as characters 0x91 through 0x94 in Windows-1252 (
>> >> see http://msdn.microsoft.com/en-au/goglobal/cc305145.aspx ).
>> >>
>> >> What is the best way to save this data to a shapefile using OGR? ?I
>> >> need the shapefile to be interoperable with other programs, including
>> >> but not limited to ESRI products. While I assume I could simply
>> >> translate these characters to standard ASCII, I would prefer not to if
>> >> possible. ?I also haven't tested the shapefiles with data from other
>> >> character encodings.
>> >>
>> >> I have heard that the use of UTF-8 in shapefiles is not portable. ?I
>> >> am also aware that shapefile.cpg can store a shapefile's codepage. ?I
>> >> don't know how to put these pieces together to create a portable
>> >> solution, however.
>> >>
>> >> Apologies if this is a newbie question, but I can't find answers on the
>> >> web.
>> >>
>> >> Thanks,
>> >>
>> >> Francis Markham
>> >
>> >
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Dott. Peter Hopfgartner
>
> R3 GIS Srl - GmbH
> Via Johann Kravogl-Str. 2
> I-39012 Meran/Merano (BZ)
> Email: peter.hopfgartner@r3-gis.com
> Tel. : +39 0473 494949
> Fax ?: +39 0473 069902
> www ?: http://www.r3-gis.com
>
> XING : http://www.xing.com/go/invita/8917535
>
>
From chaitanya.ch at gmail.com  Tue Jul  6 00:13:18 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul  6 00:13:21 2010
Subject: [gdal-dev] Problem creating geo-tiff from scratch
In-Reply-To: <AANLkTimFZi7mJbqXQX9ZXH2EqYR96ppuHrxONZyVOkvq@mail.gmail.com>
References: <AANLkTimFZi7mJbqXQX9ZXH2EqYR96ppuHrxONZyVOkvq@mail.gmail.com>
Message-ID: <AANLkTil-RYPl89GwIyyhVmFGpdBCasf2jBsTuzRx1viJ@mail.gmail.com>

Marco,

1. You misspelled the option for world file creation as 'TWF' which should
actually be 'TFW'.
2. The driver did report the error message correctly after processing the
creation options. There may be a bug with the debugger.


On Tue, Jul 6, 2010 at 6:26 AM, Marco Zuliani <zuliani@mayachitra.com>wrote:

> Dear all,
>
>  I am trying to utilize GDAL to generate a geo-tiff image from scratch. I
> have been following the tutorial presented at
> http://www.gdal.org/gdal_tutorial.html and I have been reading the
> documentation of the functions involved in the process, but so far I have
> not beed successfull in accomplishing my goal.
>
>  In the following I will first paste (partially) my routine in the fervent
> hope that somebidy can spot my error and help me out. I will denote with
> [...] portions of the code that have been omitted because I believe they are
> not relevant to my question. After the listing I will present my questions.
>
>  --- CODE BEGINS ---
>
> [...]
>
>     // There is a driver for each supported format. Attempt to register all
> known drivers
>     // Ensure that GDALAllRegister() has been called before calling
> GetDriverByName().
>     GDALAllRegister();
>
>     // select the geotiff format for GDAL
>     const char *pszFormat = "GTiff";
>     GDALDriver *poDriver = GetGDALDriverManager()->GetDriverByName(
> pszFormat );
>
>     // make some checks to avoid headaches in the future
>     if ( poDriver == NULL )
>     {
> // take care of the error condition
>  [...]
>     }
>
>      // get some info regarding the GDAL driver
>     char **papszMetadata = poDriver->GetMetadata();
>
>     if ( !CSLFetchBoolean( papszMetadata, GDAL_DCAP_CREATE, FALSE ) )
>     {
>  // take care of the error condition in case creation is not possible
>     }
>
> [...]
>  // at this point the some variables used in a while have the following
> values
>  // width = 251
>  // height = 234
>  // bands = 4
>      // this hosts the list of driver specific control parameters.
>     // See http://www.gdal.org/frmt_gtiff.html
>     char **papszOptions = NULL;
>     papszOptions = CSLSetNameValue( papszOptions, "TWF", "NO" );
>     papszOptions = CSLSetNameValue( papszOptions, "TILED", "NO" );
>
>     int height  = FreeImage_GetHeight( I );
>     int width   = FreeImage_GetWidth( I );
>     // this is the georeferenced image
>     const char *options = GDALGetDriverCreationOptionList(poDriver);
>     GDALDataset *Ig = poDriver->Create( "test.tif", width, height, bands,
> GDT_Byte, papszOptions );
>  --- CODE ENDS ---
>
> Questions:
>
> 1] The program outputs to the console the following message: "Warning 6:
> Driver GTiff does not support TWF creation option". Why? From the
> documentation at http://www.gdal.org/frmt_gtiff.html it seems that such
> option is supported...
>
> 2] From Visual Studio debugger I can see that the values of poDriver are
> messed up and also the values of eAccess, nRasterXSize, nRasterYSize, nBands
> seem to be scrabled (I would expect nBands = 4, nRasterXsize = 251, etc.).
> Does anybody have an idea of what's going on? (Please find below the output
> of the debugger Name/Value/Type)
>
> - Ig 0x00000000039fa450 {hTIFF=0x00000000039fa000
> ppoActiveDSRef=0x00000000039fa560 poActiveDS=0x00000000039fa450 ...} GDALDataset
> *
> + [GTiffDataset] {hTIFF=0x00000000039fa000
> ppoActiveDSRef=0x00000000039fa560 poActiveDS=0x00000000039fa450 ...}
> GTiffDataset
> + GDALMajorObject {nFlags=33 sDescription={...} oMDMD={...} }
> GDALMajorObject
> - poDriver 0x000000fb00000001 {pfnOpen=??? pfnCreate=??? pfnDelete=???
> ...} GDALDriver *
> + GDALMajorObject {nFlags=??? sDescription={...} oMDMD={...} }
> GDALMajorObject
>  pfnOpen CXX0030: Error: expression cannot be evaluated
>  pfnCreate CXX0030: Error: expression cannot be evaluated
>  pfnDelete CXX0030: Error: expression cannot be evaluated
>  pfnCreateCopy CXX0030: Error: expression cannot be evaluated
>  pDriverData CXX0030: Error: expression cannot be evaluated
>  pfnUnloadDriver CXX0030: Error: expression cannot be evaluated
>  pfnIdentify CXX0030: Error: expression cannot be evaluated
>  pfnRename CXX0030: Error: expression cannot be evaluated
>  pfnCopyFiles CXX0030: Error: expression cannot be evaluated
>  eAccess 234 GDALAccess
>  nRasterXSize 4 int
>  nRasterYSize 60761968 int
>  nBands 0 int
> + papoBands 0x0000000100000000 GDALRasterBand * *
>  bForceCachedIO 0 int
>  nRefCount -1163005939 int
>  bShared 0 int
> + oOvManager {poDS=0x0000000000000000 poODS=0xbaadf00dbaadf00d
> osOvrFilename={...} ...} GDALDefaultOverviews
>
> Thanks in advance for your help,
> Marco
>
> Marco Zuliani, Phd
>
> phone: +1 805 967 9828
> web: www.mayachitra.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100706/524adf94/attachment-0001.html
From peifer at gmx.eu  Tue Jul  6 04:31:37 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Tue Jul  6 04:31:41 2010
Subject: [gdal-dev] Re: Writing non-ASCII characters to shapefile
In-Reply-To: <AANLkTike2xzgZbCD4TJQhBkX2ByOr-2X68GBRcWL2Ise@mail.gmail.com>
References: <AANLkTimsdGpbI4AUsVhjXhVGD-1QJluHjYRFbKltO5Cz@mail.gmail.com>
	<4C31A143.8070502@gmx.eu>
	<AANLkTilNJvj5hPeDGyh-HUbP7TJFEnR8oVl7tREyWcmv@mail.gmail.com>
	<1278330783.2281.14.camel@peter-laptop>
	<AANLkTike2xzgZbCD4TJQhBkX2ByOr-2X68GBRcWL2Ise@mail.gmail.com>
Message-ID: <4C32E9E9.3040907@gmx.eu>

The .cpg files we generate through ArcGIS desktop contain the string: UTF-8

Some time ago, there was a mail on this list about problems in case of 
conflicting information in the .cpg file compared to the Language Driver 
ID (LDID) in the header of a dBASE file, see: 
http://lists.osgeo.org/pipermail/gdal-dev/2010-May/024619.html

Hermann

On 06/07/2010 04:13, Francis Markham wrote:
> Okay, I will take that approach then.  Thank you all for your help.
>
> What specific value should I write into the .cpg? The string '65001'
> or the string 'utf-8' or something else?
>
> -Francis
>
> On 5 July 2010 21:53, Peter Hopfgartner<peter.hopfgartner@r3-gis.com>  wrote:
>    
>> Hi Francis,
>>
>> what does not portable mean? ArcMap handles UTF-8 fine, if the correct
>> encoding is written into the .cpg file. Recent shapelib should handle
>> this fine, too. If there is any problem with a specific GIS program, a
>> bug report for that GIS program might be the right thing to do.
>>
>> Regards,
>>
>> Peter
>>
>> On Mon, 2010-07-05 at 19:18 +1000, Francis Markham wrote:
>>      
>>> At the bottom of this page, for one:
>>> http://resources.arcgis.com/content/kbase?fa=articleShow&d=21106
>>>
>>> But honestly I've found hard to find  information about this.  I'd be
>>> very happy to be corrected if this is not the case!
>>>
>>> Cheers,
>>>
>>> Francis
>>>
>>> On 5 July 2010 19:09, Hermann Peifer<peifer@gmx.eu>  wrote:
>>>        
>>>> Francis, you wrote:
>>>>
>>>>          
>>>>>> I have heard that the use of UTF-8 in shapefiles is not portable.
>>>>>>              
>>>> Where did you hear this?
>>>>
>>>> Regards, Hermann
>>>>
>>>>
>>>> On 03/07/2010 04:40, Francis Markham wrote:
>>>>          
>>>>> Hi there,
>>>>>
>>>>> I'm trying to write data from a Microsoft Excel .xls file into a
>>>>> shapefile, using OGR's Python bindings in Python 2.6.  This is going
>>>>> well, but I am having some problems when I try to write values that
>>>>> contain so-called "smart quotes".  Smart quotes are special
>>>>> characters, defined as characters 0x91 through 0x94 in Windows-1252 (
>>>>> see http://msdn.microsoft.com/en-au/goglobal/cc305145.aspx ).
>>>>>
>>>>> What is the best way to save this data to a shapefile using OGR?  I
>>>>> need the shapefile to be interoperable with other programs, including
>>>>> but not limited to ESRI products. While I assume I could simply
>>>>> translate these characters to standard ASCII, I would prefer not to if
>>>>> possible.  I also haven't tested the shapefiles with data from other
>>>>> character encodings.
>>>>>
>>>>> I have heard that the use of UTF-8 in shapefiles is not portable.  I
>>>>> am also aware that shapefile.cpg can store a shapefile's codepage.  I
>>>>> don't know how to put these pieces together to create a portable
>>>>> solution, however.
>>>>>
>>>>> Apologies if this is a newbie question, but I can't find answers on the
>>>>> web.
>>>>>
>>>>> Thanks,
>>>>>
>>>>> Francis Markham
>>>>>            
>>>>
>>>>          
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>        
>> --
>> Dott. Peter Hopfgartner
>>
>> R3 GIS Srl - GmbH
>> Via Johann Kravogl-Str. 2
>> I-39012 Meran/Merano (BZ)
>> Email: peter.hopfgartner@r3-gis.com
>> Tel. : +39 0473 494949
>> Fax  : +39 0473 069902
>> www  : http://www.r3-gis.com
>>
>> XING : http://www.xing.com/go/invita/8917535
>>
>>
>>      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100706/9f3db87b/attachment.html
From fmarkham at gmail.com  Tue Jul  6 07:04:30 2010
From: fmarkham at gmail.com (Francis Markham)
Date: Tue Jul  6 07:04:53 2010
Subject: [gdal-dev] Re: Writing non-ASCII characters to shapefile
In-Reply-To: <4C32E9E9.3040907@gmx.eu>
References: <AANLkTimsdGpbI4AUsVhjXhVGD-1QJluHjYRFbKltO5Cz@mail.gmail.com> 
	<4C31A143.8070502@gmx.eu>
	<AANLkTilNJvj5hPeDGyh-HUbP7TJFEnR8oVl7tREyWcmv@mail.gmail.com> 
	<1278330783.2281.14.camel@peter-laptop>
	<AANLkTike2xzgZbCD4TJQhBkX2ByOr-2X68GBRcWL2Ise@mail.gmail.com> 
	<4C32E9E9.3040907@gmx.eu>
Message-ID: <AANLkTimb66rEXvw7-r_Yk1llF4zktMjMkK_9g6ZCQH4f@mail.gmail.com>

It appears from
http://lists.osgeo.org/pipermail/gdal-dev/2010-May/024619.html and
http://resources.arcgis.com/content/kbase?fa=articleShow&d=26015  that
ESRI set the LDID to zero to indicate an unknown LDID.  From my
reading of the OGR sourcecode, it seems that OGR uses the shapelib
default LDID of 0x57 (previously it was set to 0x3, or windows-1252).
Is there any way to specify this value using the OGR API, or do I need
to use shapelib directly to create my shapefiles in order to do this?

Cheers,

Francis

On 6 July 2010 18:31, Hermann Peifer <peifer@gmx.eu> wrote:
> The .cpg files we generate through ArcGIS desktop contain the string: UTF-8
>
> Some time ago, there was a mail on this list about problems in case of
> conflicting information in the .cpg file compared to the Language Driver ID
> (LDID) in the header of a dBASE file, see:
> http://lists.osgeo.org/pipermail/gdal-dev/2010-May/024619.html
>
> Hermann
>
> On 06/07/2010 04:13, Francis Markham wrote:
>
> Okay, I will take that approach then.  Thank you all for your help.
>
> What specific value should I write into the .cpg? The string '65001'
> or the string 'utf-8' or something else?
>
> -Francis
>
> On 5 July 2010 21:53, Peter Hopfgartner <peter.hopfgartner@r3-gis.com>
> wrote:
>
>
> Hi Francis,
>
> what does not portable mean? ArcMap handles UTF-8 fine, if the correct
> encoding is written into the .cpg file. Recent shapelib should handle
> this fine, too. If there is any problem with a specific GIS program, a
> bug report for that GIS program might be the right thing to do.
>
> Regards,
>
> Peter
>
> On Mon, 2010-07-05 at 19:18 +1000, Francis Markham wrote:
>
>
> At the bottom of this page, for one:
> http://resources.arcgis.com/content/kbase?fa=articleShow&d=21106
>
> But honestly I've found hard to find ?information about this. ?I'd be
> very happy to be corrected if this is not the case!
>
> Cheers,
>
> Francis
>
> On 5 July 2010 19:09, Hermann Peifer <peifer@gmx.eu> wrote:
>
>
> Francis, you wrote:
>
>
>
> I have heard that the use of UTF-8 in shapefiles is not portable.
>
>
> Where did you hear this?
>
> Regards, Hermann
>
>
> On 03/07/2010 04:40, Francis Markham wrote:
>
>
> Hi there,
>
> I'm trying to write data from a Microsoft Excel .xls file into a
> shapefile, using OGR's Python bindings in Python 2.6. ?This is going
> well, but I am having some problems when I try to write values that
> contain so-called "smart quotes". ?Smart quotes are special
> characters, defined as characters 0x91 through 0x94 in Windows-1252 (
> see http://msdn.microsoft.com/en-au/goglobal/cc305145.aspx ).
>
> What is the best way to save this data to a shapefile using OGR? ?I
> need the shapefile to be interoperable with other programs, including
> but not limited to ESRI products. While I assume I could simply
> translate these characters to standard ASCII, I would prefer not to if
> possible. ?I also haven't tested the shapefiles with data from other
> character encodings.
>
> I have heard that the use of UTF-8 in shapefiles is not portable. ?I
> am also aware that shapefile.cpg can store a shapefile's codepage. ?I
> don't know how to put these pieces together to create a portable
> solution, however.
>
> Apologies if this is a newbie question, but I can't find answers on the
> web.
>
> Thanks,
>
> Francis Markham
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> --
> Dott. Peter Hopfgartner
>
> R3 GIS Srl - GmbH
> Via Johann Kravogl-Str. 2
> I-39012 Meran/Merano (BZ)
> Email: peter.hopfgartner@r3-gis.com
> Tel. : +39 0473 494949
> Fax ?: +39 0473 069902
> www ?: http://www.r3-gis.com
>
> XING : http://www.xing.com/go/invita/8917535
>
>
>
From monshi at home.se  Tue Jul  6 08:16:07 2010
From: monshi at home.se (Tomas R)
Date: Tue Jul  6 08:16:20 2010
Subject: [gdal-dev] Bug(?): RIK-maps with Gdal 1.7.2 do not work
Message-ID: <i0v6qa$q7e$1@dough.gmane.org>

  I have a problem with RIK-maps and Gdal 1.7.2.

If I use Gdal 1.6.1 I have no problem reading the map but doing the same 
with Gdal 1.7.2 my whole plugin/software hangs.

I have identified that Gdal stops at the line

  band.ReadRaster(x, y, width, height, r, width, height, 0, 0);

where x, y, width and height are controlled to be within the image to load.
This line taken from the routine
   private void SaveBitmapPaletteDirect(...)
from the C# samples. I have adapted it to load only a portion of the map 
into a bitmap.

I have compiled Gdal myself, perhaps a problem with the compilation? Do 
I miss the RIK-driver or something? Or is there an error in Gdal?  Or 
perhaps in the file(s)?
I have no problem opening and getting the properties of the file, i.e. 
coordinate system and alike. It is when I try to read the file that Gdal 
hangs.

I get no Exception, it just hangs and eats CPU-time.

I  compile the C# sample GDALReadDirect.cs from Gdal 1.7.2 and adapt it 
to read a portion of a big RIK file (500x500 pixels) and it stops at the 
same point in code. Error in the driver for RIK perhaps? or error in the 
sample code?

Yours
Tomas






From monshi at home.se  Tue Jul  6 09:13:37 2010
From: monshi at home.se (Tomas R)
Date: Tue Jul  6 09:13:52 2010
Subject: [gdal-dev] Re: Bug(?): RIK-maps with Gdal 1.7.2 do not work
In-Reply-To: <i0v6qa$q7e$1@dough.gmane.org>
References: <i0v6qa$q7e$1@dough.gmane.org>
Message-ID: <i0va64$6h8$1@dough.gmane.org>

  I add - perhaps a problem with my comilation of Gdal.  Note when I 
compile the GdalReadDirect.cs as it is and run it the result differs 
from the result of the GdalReadDirect.exe found in Swig\Csharp.
The latter gives the Raster dataset Paramets and runs until an Out of 
memory Exception. Mine hangs and I have to abort it.

What have I done wrong this time?

Will try to recompile gdal and see if anything changes.

Tomas R skrev 2010-07-06 14:16:
>  I have a problem with RIK-maps and Gdal 1.7.2.
>
> If I use Gdal 1.6.1 I have no problem reading the map but doing the 
> same with Gdal 1.7.2 my whole plugin/software hangs.
>
> I have identified that Gdal stops at the line
>
>  band.ReadRaster(x, y, width, height, r, width, height, 0, 0);
>
> where x, y, width and height are controlled to be within the image to 
> load.
> This line taken from the routine
>   private void SaveBitmapPaletteDirect(...)
> from the C# samples. I have adapted it to load only a portion of the 
> map into a bitmap.
>
> I have compiled Gdal myself, perhaps a problem with the compilation? 
> Do I miss the RIK-driver or something? Or is there an error in Gdal?  
> Or perhaps in the file(s)?
> I have no problem opening and getting the properties of the file, i.e. 
> coordinate system and alike. It is when I try to read the file that 
> Gdal hangs.
>
> I get no Exception, it just hangs and eats CPU-time.
>
> I  compile the C# sample GDALReadDirect.cs from Gdal 1.7.2 and adapt 
> it to read a portion of a big RIK file (500x500 pixels) and it stops 
> at the same point in code. Error in the driver for RIK perhaps? or 
> error in the sample code?
>
> Yours
> Tomas

From chaitanya.ch at gmail.com  Tue Jul  6 12:24:46 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul  6 12:24:50 2010
Subject: [gdal-dev] Re: Bug(?): RIK-maps with Gdal 1.7.2 do not work
In-Reply-To: <i0va64$6h8$1@dough.gmane.org>
References: <i0v6qa$q7e$1@dough.gmane.org>
	<i0va64$6h8$1@dough.gmane.org>
Message-ID: <AANLkTin0Soj9hIkuJ2iiJLTH930JFshWbFz2QAMVdp6N@mail.gmail.com>

Tomas,

I don't see any changes that could lead to infinite loops or memory leaks
recently.
If you can provide a sample dataset that gives this error please raise a
ticket at http://trac.osgeo.org/gdal/newticket

On Tue, Jul 6, 2010 at 6:43 PM, Tomas R <monshi@home.se> wrote:

>  I add - perhaps a problem with my comilation of Gdal.  Note when I compile
> the GdalReadDirect.cs as it is and run it the result differs from the result
> of the GdalReadDirect.exe found in Swig\Csharp.
> The latter gives the Raster dataset Paramets and runs until an Out of
> memory Exception. Mine hangs and I have to abort it.
>
> What have I done wrong this time?
>
> Will try to recompile gdal and see if anything changes.
>
> Tomas R skrev 2010-07-06 14:16:
>
>   I have a problem with RIK-maps and Gdal 1.7.2.
>>
>> If I use Gdal 1.6.1 I have no problem reading the map but doing the same
>> with Gdal 1.7.2 my whole plugin/software hangs.
>>
>> I have identified that Gdal stops at the line
>>
>>  band.ReadRaster(x, y, width, height, r, width, height, 0, 0);
>>
>> where x, y, width and height are controlled to be within the image to
>> load.
>> This line taken from the routine
>>  private void SaveBitmapPaletteDirect(...)
>> from the C# samples. I have adapted it to load only a portion of the map
>> into a bitmap.
>>
>> I have compiled Gdal myself, perhaps a problem with the compilation? Do I
>> miss the RIK-driver or something? Or is there an error in Gdal?  Or perhaps
>> in the file(s)?
>> I have no problem opening and getting the properties of the file, i.e.
>> coordinate system and alike. It is when I try to read the file that Gdal
>> hangs.
>>
>> I get no Exception, it just hangs and eats CPU-time.
>>
>> I  compile the C# sample GDALReadDirect.cs from Gdal 1.7.2 and adapt it to
>> read a portion of a big RIK file (500x500 pixels) and it stops at the same
>> point in code. Error in the driver for RIK perhaps? or error in the sample
>> code?
>>
>> Yours
>> Tomas
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100706/822251e3/attachment.html
From peifer at gmx.eu  Tue Jul  6 12:44:32 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Tue Jul  6 12:44:38 2010
Subject: [gdal-dev] Re: Writing non-ASCII characters to shapefile
In-Reply-To: <AANLkTimb66rEXvw7-r_Yk1llF4zktMjMkK_9g6ZCQH4f@mail.gmail.com>
References: <AANLkTimsdGpbI4AUsVhjXhVGD-1QJluHjYRFbKltO5Cz@mail.gmail.com>
	<4C31A143.8070502@gmx.eu>	<AANLkTilNJvj5hPeDGyh-HUbP7TJFEnR8oVl7tREyWcmv@mail.gmail.com>
	<1278330783.2281.14.camel@peter-laptop>	<AANLkTike2xzgZbCD4TJQhBkX2ByOr-2X68GBRcWL2Ise@mail.gmail.com>
	<4C32E9E9.3040907@gmx.eu>
	<AANLkTimb66rEXvw7-r_Yk1llF4zktMjMkK_9g6ZCQH4f@mail.gmail.com>
Message-ID: <4C335D70.40302@gmx.eu>

In the mentioned mail from earlier this year, William Kyngesburye wrote:

 > Maybe GDAL needs a creation option in the shapefile driver
 > to set the LDID or to instead add a cpg file with an encoding value.

As there was no reply to his mail, I assume that there is no GDAL/OGR 
creation option for the LDID and it is unlikely that there will be one 
in the near future.

Hermann


On 06/07/2010 13:04, Francis Markham wrote:
> It appears from
> http://lists.osgeo.org/pipermail/gdal-dev/2010-May/024619.html and
> http://resources.arcgis.com/content/kbase?fa=articleShow&d=26015  that
> ESRI set the LDID to zero to indicate an unknown LDID.  From my
> reading of the OGR sourcecode, it seems that OGR uses the shapelib
> default LDID of 0x57 (previously it was set to 0x3, or windows-1252).
> Is there any way to specify this value using the OGR API, or do I need
> to use shapelib directly to create my shapefiles in order to do this?
>
> Cheers,
>
> Francis
>
> On 6 July 2010 18:31, Hermann Peifer<peifer@gmx.eu>  wrote:
>> The .cpg files we generate through ArcGIS desktop contain the string: UTF-8
>>
>> Some time ago, there was a mail on this list about problems in case of
>> conflicting information in the .cpg file compared to the Language Driver ID
>> (LDID) in the header of a dBASE file, see:
>> http://lists.osgeo.org/pipermail/gdal-dev/2010-May/024619.html
>>
>> Hermann
>>
>> On 06/07/2010 04:13, Francis Markham wrote:
>>
>> Okay, I will take that approach then.  Thank you all for your help.
>>
>> What specific value should I write into the .cpg? The string '65001'
>> or the string 'utf-8' or something else?
>>
>> -Francis
>>
>> On 5 July 2010 21:53, Peter Hopfgartner<peter.hopfgartner@r3-gis.com>
>> wrote:
>>
>>
>> Hi Francis,
>>
>> what does not portable mean? ArcMap handles UTF-8 fine, if the correct
>> encoding is written into the .cpg file. Recent shapelib should handle
>> this fine, too. If there is any problem with a specific GIS program, a
>> bug report for that GIS program might be the right thing to do.
>>
>> Regards,
>>
>> Peter
>>
>> On Mon, 2010-07-05 at 19:18 +1000, Francis Markham wrote:
>>
>>
>> At the bottom of this page, for one:
>> http://resources.arcgis.com/content/kbase?fa=articleShow&d=21106
>>
>> But honestly I've found hard to find  information about this.  I'd be
>> very happy to be corrected if this is not the case!
>>
>> Cheers,
>>
>> Francis
>>
>> On 5 July 2010 19:09, Hermann Peifer<peifer@gmx.eu>  wrote:
>>
>>
>> Francis, you wrote:
>>
>>
>>
>> I have heard that the use of UTF-8 in shapefiles is not portable.
>>
>>
>> Where did you hear this?
>>
>> Regards, Hermann
>>
>>
>> On 03/07/2010 04:40, Francis Markham wrote:
>>
>>
>> Hi there,
>>
>> I'm trying to write data from a Microsoft Excel .xls file into a
>> shapefile, using OGR's Python bindings in Python 2.6.  This is going
>> well, but I am having some problems when I try to write values that
>> contain so-called "smart quotes".  Smart quotes are special
>> characters, defined as characters 0x91 through 0x94 in Windows-1252 (
>> see http://msdn.microsoft.com/en-au/goglobal/cc305145.aspx ).
>>
>> What is the best way to save this data to a shapefile using OGR?  I
>> need the shapefile to be interoperable with other programs, including
>> but not limited to ESRI products. While I assume I could simply
>> translate these characters to standard ASCII, I would prefer not to if
>> possible.  I also haven't tested the shapefiles with data from other
>> character encodings.
>>
>> I have heard that the use of UTF-8 in shapefiles is not portable.  I
>> am also aware that shapefile.cpg can store a shapefile's codepage.  I
>> don't know how to put these pieces together to create a portable
>> solution, however.
>>
>> Apologies if this is a newbie question, but I can't find answers on the
>> web.
>>
>> Thanks,
>>
>> Francis Markham
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>> --
>> Dott. Peter Hopfgartner
>>
>> R3 GIS Srl - GmbH
>> Via Johann Kravogl-Str. 2
>> I-39012 Meran/Merano (BZ)
>> Email: peter.hopfgartner@r3-gis.com
>> Tel. : +39 0473 494949
>> Fax  : +39 0473 069902
>> www  : http://www.r3-gis.com
>>
>> XING : http://www.xing.com/go/invita/8917535
>>
>>
>>

From zuliani at mayachitra.com  Tue Jul  6 12:49:05 2010
From: zuliani at mayachitra.com (Marco Zuliani)
Date: Tue Jul  6 12:49:28 2010
Subject: [gdal-dev] Problem creating geo-tiff from scratch
In-Reply-To: <AANLkTil-RYPl89GwIyyhVmFGpdBCasf2jBsTuzRx1viJ@mail.gmail.com>
References: <AANLkTimFZi7mJbqXQX9ZXH2EqYR96ppuHrxONZyVOkvq@mail.gmail.com> 
	<AANLkTil-RYPl89GwIyyhVmFGpdBCasf2jBsTuzRx1viJ@mail.gmail.com>
Message-ID: <AANLkTikblXIrM-Ch_o8sXTeVm-ks7V7nIrkFZcBHJ-Vv@mail.gmail.com>

Dear Chaitanya,

 thanks a lot for your response. As you pointed out the metadata tag was
misspelled. Correcting it fixed the first problem. However I still have the
second problem The inspection of Ig with the debugger shows non consistent
values for the member variables of the GDALDataset class (see a snapshot at
the bottom of the email). You suggest that there may be a bug with the
debugger, but I doubt this is the case. In fact if I continue with the
execution of the code, the instruction:

[...]
GDALRasterBand *poBand = Ig->GetRasterBand( b );
[...]

returns a NULL pointer when b is zero, and this seems to be consistent with
the fact that the debugger says that Ig is composed of 0 bands (nBands  =
0). I would appreciate if you or anybody else have some suggestion to
understand and solve this problem.

Thanks,
Marco

--- DEBUGGER OUTPUT BEGINS ---

- Ig 0x0000000003d43b90 {hTIFF=0x0000000003d434c0
ppoActiveDSRef=0x0000000003d43ca0 poActiveDS=0x0000000003d43b90 ...}
GDALDataset
*
+ [GTiffDataset] {hTIFF=0x0000000003d434c0 ppoActiveDSRef=0x0000000003d43ca0
poActiveDS=0x0000000003d43b90 ...} GTiffDataset
+ GDALMajorObject {nFlags=33 sDescription={...} oMDMD={...} }
GDALMajorObject
+ poDriver 0x000000fb00000001 {pfnOpen=??? pfnCreate=??? pfnDelete=???
...} GDALDriver
*
 eAccess 234 GDALAccess
 nRasterXSize 4 int
 nRasterYSize 64236080 int
 nBands 0 int
+ papoBands 0x0000000100000000 GDALRasterBand * *
 bForceCachedIO 0 int
 nRefCount -1163005939 int
 bShared 0 int
+ oOvManager {poDS=0x0000000000000000 poODS=0xbaadf00dbaadf00d
osOvrFilename={...} ...} GDALDefaultOverviews

--- DEBUGGER OUTPUT ENDS ---

On Mon, Jul 5, 2010 at 9:13 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Marco,
>
> 1. You misspelled the option for world file creation as 'TWF' which should
> actually be 'TFW'.
> 2. The driver did report the error message correctly after processing the
> creation options. There may be a bug with the debugger.
>
>
> On Tue, Jul 6, 2010 at 6:26 AM, Marco Zuliani <zuliani@mayachitra.com>wrote:
>
>> Dear all,
>>
>>  I am trying to utilize GDAL to generate a geo-tiff image from scratch. I
>> have been following the tutorial presented at
>> http://www.gdal.org/gdal_tutorial.html and I have been reading the
>> documentation of the functions involved in the process, but so far I have
>> not beed successfull in accomplishing my goal.
>>
>>  In the following I will first paste (partially) my routine in the fervent
>> hope that somebidy can spot my error and help me out. I will denote with
>> [...] portions of the code that have been omitted because I believe they are
>> not relevant to my question. After the listing I will present my questions.
>>
>>  --- CODE BEGINS ---
>>
>> [...]
>>
>>     // There is a driver for each supported format. Attempt to register
>> all known drivers
>>     // Ensure that GDALAllRegister() has been called before calling
>> GetDriverByName().
>>     GDALAllRegister();
>>
>>     // select the geotiff format for GDAL
>>     const char *pszFormat = "GTiff";
>>     GDALDriver *poDriver = GetGDALDriverManager()->GetDriverByName(
>> pszFormat );
>>
>>     // make some checks to avoid headaches in the future
>>     if ( poDriver == NULL )
>>     {
>> // take care of the error condition
>>  [...]
>>     }
>>
>>      // get some info regarding the GDAL driver
>>     char **papszMetadata = poDriver->GetMetadata();
>>
>>     if ( !CSLFetchBoolean( papszMetadata, GDAL_DCAP_CREATE, FALSE ) )
>>     {
>>  // take care of the error condition in case creation is not possible
>>     }
>>
>> [...]
>>  // at this point the some variables used in a while have the following
>> values
>>  // width = 251
>>  // height = 234
>>  // bands = 4
>>      // this hosts the list of driver specific control parameters.
>>     // See http://www.gdal.org/frmt_gtiff.html
>>     char **papszOptions = NULL;
>>     papszOptions = CSLSetNameValue( papszOptions, "TWF", "NO" );
>>     papszOptions = CSLSetNameValue( papszOptions, "TILED", "NO" );
>>
>>     int height  = FreeImage_GetHeight( I );
>>     int width   = FreeImage_GetWidth( I );
>>     // this is the georeferenced image
>>     const char *options = GDALGetDriverCreationOptionList(poDriver);
>>     GDALDataset *Ig = poDriver->Create( "test.tif", width, height, bands,
>> GDT_Byte, papszOptions );
>>  --- CODE ENDS ---
>>
>> Questions:
>>
>> 1] The program outputs to the console the following message: "Warning 6:
>> Driver GTiff does not support TWF creation option". Why? From the
>> documentation at http://www.gdal.org/frmt_gtiff.html it seems that such
>> option is supported...
>>
>> 2] From Visual Studio debugger I can see that the values of poDriver are
>> messed up and also the values of eAccess, nRasterXSize, nRasterYSize, nBands
>> seem to be scrabled (I would expect nBands = 4, nRasterXsize = 251, etc.).
>> Does anybody have an idea of what's going on? (Please find below the output
>> of the debugger Name/Value/Type)
>>
>> - Ig 0x00000000039fa450 {hTIFF=0x00000000039fa000
>> ppoActiveDSRef=0x00000000039fa560 poActiveDS=0x00000000039fa450 ...} GDALDataset
>> *
>> + [GTiffDataset] {hTIFF=0x00000000039fa000
>> ppoActiveDSRef=0x00000000039fa560 poActiveDS=0x00000000039fa450 ...}
>> GTiffDataset
>> + GDALMajorObject {nFlags=33 sDescription={...} oMDMD={...} }
>> GDALMajorObject
>> - poDriver 0x000000fb00000001 {pfnOpen=??? pfnCreate=??? pfnDelete=???
>> ...} GDALDriver *
>> + GDALMajorObject {nFlags=??? sDescription={...} oMDMD={...} }
>> GDALMajorObject
>>  pfnOpen CXX0030: Error: expression cannot be evaluated
>>  pfnCreate CXX0030: Error: expression cannot be evaluated
>>  pfnDelete CXX0030: Error: expression cannot be evaluated
>>  pfnCreateCopy CXX0030: Error: expression cannot be evaluated
>>  pDriverData CXX0030: Error: expression cannot be evaluated
>>  pfnUnloadDriver CXX0030: Error: expression cannot be evaluated
>>  pfnIdentify CXX0030: Error: expression cannot be evaluated
>>  pfnRename CXX0030: Error: expression cannot be evaluated
>>  pfnCopyFiles CXX0030: Error: expression cannot be evaluated
>>  eAccess 234 GDALAccess
>>  nRasterXSize 4 int
>>  nRasterYSize 60761968 int
>>  nBands 0 int
>> + papoBands 0x0000000100000000 GDALRasterBand * *
>>  bForceCachedIO 0 int
>>  nRefCount -1163005939 int
>>  bShared 0 int
>> + oOvManager {poDS=0x0000000000000000 poODS=0xbaadf00dbaadf00d
>> osOvrFilename={...} ...} GDALDefaultOverviews
>>
>> Thanks in advance for your help,
>> Marco
>>
>> Marco Zuliani, Phd
>>
>> phone: +1 805 967 9828
>> web: www.mayachitra.com
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100706/f2f86110/attachment-0001.html
From monshi at home.se  Tue Jul  6 13:18:56 2010
From: monshi at home.se (Tomas R)
Date: Tue Jul  6 13:19:09 2010
Subject: [gdal-dev] Re: Bug(?): RIK-maps with Gdal 1.7.2 do not work
In-Reply-To: <AANLkTin0Soj9hIkuJ2iiJLTH930JFshWbFz2QAMVdp6N@mail.gmail.com>
References: <i0v6qa$q7e$1@dough.gmane.org>	<i0va64$6h8$1@dough.gmane.org>
	<AANLkTin0Soj9hIkuJ2iiJLTH930JFshWbFz2QAMVdp6N@mail.gmail.com>
Message-ID: <i0vohv$3vu$1@dough.gmane.org>

  The reason for the out of memory exception was because the RIK-map I  
tested with i wasfar to big to be read into a bitmap. I have now created 
a smaller sample.

With the small RIK-fil I can reproduce the problem with the precompiled 
binaries from dyndns so problem is not only on my part. Using the small 
map (1000x750 pixels) the demo app from Gdal 1.6.1 works as it should. 
1.7.2 hangs with no exception given.

See ticket http://trac.osgeo.org/gdal/ticket/3674

The post you answered  I tried to delete and somewhat succeeded... I 
happened to compile the wrong file. When I thought I was compiling the 
GDALReadDirect.cs I instead compiled the GDALRead.cs.

Yours
Tomas

Chaitanya kumar CH skrev 2010-07-06 18:24:
> Tomas,
>
> I don't see any changes that could lead to infinite loops or memory 
> leaks recently.
> If you can provide a sample dataset that gives this error please raise 
> a ticket at http://trac.osgeo.org/gdal/newticket
>
> On Tue, Jul 6, 2010 at 6:43 PM, Tomas R <monshi@home.se 
> <mailto:monshi@home.se>> wrote:
>
>      I add - perhaps a problem with my comilation of Gdal.  Note when
>     I compile the GdalReadDirect.cs as it is and run it the result
>     differs from the result of the GdalReadDirect.exe found in
>     Swig\Csharp.
>     The latter gives the Raster dataset Paramets and runs until an Out
>     of memory Exception. Mine hangs and I have to abort it.
>
>     What have I done wrong this time?
>
>     Will try to recompile gdal and see if anything changes.
>
>     Tomas R skrev 2010-07-06 14:16:
>
>          I have a problem with RIK-maps and Gdal 1.7.2.
>
>         If I use Gdal 1.6.1 I have no problem reading the map but
>         doing the same with Gdal 1.7.2 my whole plugin/software hangs.
>
>         I have identified that Gdal stops at the line
>
>          band.ReadRaster(x, y, width, height, r, width, height, 0, 0);
>
>         where x, y, width and height are controlled to be within the
>         image to load.
>         This line taken from the routine
>          private void SaveBitmapPaletteDirect(...)
>         from the C# samples. I have adapted it to load only a portion
>         of the map into a bitmap.
>
>         I have compiled Gdal myself, perhaps a problem with the
>         compilation? Do I miss the RIK-driver or something? Or is
>         there an error in Gdal?  Or perhaps in the file(s)?
>         I have no problem opening and getting the properties of the
>         file, i.e. coordinate system and alike. It is when I try to
>         read the file that Gdal hangs.
>
>         I get no Exception, it just hangs and eats CPU-time.
>
>         I  compile the C# sample GDALReadDirect.cs from Gdal 1.7.2 and
>         adapt it to read a portion of a big RIK file (500x500 pixels)
>         and it stops at the same point in code. Error in the driver
>         for RIK perhaps? or error in the sample code?
>
>         Yours
>         Tomas
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Tue Jul  6 13:46:24 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jul  6 13:46:35 2010
Subject: [gdal-dev] Re: Bug(?): RIK-maps with Gdal 1.7.2 do not work
In-Reply-To: <i0vohv$3vu$1@dough.gmane.org>
References: <i0v6qa$q7e$1@dough.gmane.org>
	<AANLkTin0Soj9hIkuJ2iiJLTH930JFshWbFz2QAMVdp6N@mail.gmail.com>
	<i0vohv$3vu$1@dough.gmane.org>
Message-ID: <201007061946.25719.even.rouault@mines-paris.org>

Chaitanya,

Actually I think I've spotted the regression in
http://trac.osgeo.org/gdal/changeset/17398, which was a 1.7 change.

Namely the change from

int i;
for( i = 0; i < LZW_CLEAR; i++ )
	character[i] = i; 

to

GByte j; 
for( j = 0; j < LZW_CLEAR; j++ ) 
	character[j] = j; 

The issue is that LZW_CLEAR = 256, so as j is an unsigned char - restricted 
from 0 to 255 -, the j < LZW_CLEAR condition is always true, thus the 
infinite loop...

This part should be reverted. If you really want to shut up the compiler 
warning character[i] = (GByte)i but in an ideal world, the compiler should be 
clever enough to see that there's no risk of data loss as i does fit in a 
GByte... 

Best regards,

Even

Le Tuesday 06 July 2010 19:18:56 Tomas R, vous avez ?crit?:
>   The reason for the out of memory exception was because the RIK-map I
> tested with i wasfar to big to be read into a bitmap. I have now created
> a smaller sample.
>
> With the small RIK-fil I can reproduce the problem with the precompiled
> binaries from dyndns so problem is not only on my part. Using the small
> map (1000x750 pixels) the demo app from Gdal 1.6.1 works as it should.
> 1.7.2 hangs with no exception given.
>
> See ticket http://trac.osgeo.org/gdal/ticket/3674
>
> The post you answered  I tried to delete and somewhat succeeded... I
> happened to compile the wrong file. When I thought I was compiling the
> GDALReadDirect.cs I instead compiled the GDALRead.cs.
>
> Yours
> Tomas
>
> Chaitanya kumar CH skrev 2010-07-06 18:24:
> > Tomas,
> >
> > I don't see any changes that could lead to infinite loops or memory
> > leaks recently.
> > If you can provide a sample dataset that gives this error please raise
> > a ticket at http://trac.osgeo.org/gdal/newticket
> >
> > On Tue, Jul 6, 2010 at 6:43 PM, Tomas R <monshi@home.se
> > <mailto:monshi@home.se>> wrote:
> >
> >      I add - perhaps a problem with my comilation of Gdal.  Note when
> >     I compile the GdalReadDirect.cs as it is and run it the result
> >     differs from the result of the GdalReadDirect.exe found in
> >     Swig\Csharp.
> >     The latter gives the Raster dataset Paramets and runs until an Out
> >     of memory Exception. Mine hangs and I have to abort it.
> >
> >     What have I done wrong this time?
> >
> >     Will try to recompile gdal and see if anything changes.
> >
> >     Tomas R skrev 2010-07-06 14:16:
> >
> >          I have a problem with RIK-maps and Gdal 1.7.2.
> >
> >         If I use Gdal 1.6.1 I have no problem reading the map but
> >         doing the same with Gdal 1.7.2 my whole plugin/software hangs.
> >
> >         I have identified that Gdal stops at the line
> >
> >          band.ReadRaster(x, y, width, height, r, width, height, 0, 0);
> >
> >         where x, y, width and height are controlled to be within the
> >         image to load.
> >         This line taken from the routine
> >          private void SaveBitmapPaletteDirect(...)
> >         from the C# samples. I have adapted it to load only a portion
> >         of the map into a bitmap.
> >
> >         I have compiled Gdal myself, perhaps a problem with the
> >         compilation? Do I miss the RIK-driver or something? Or is
> >         there an error in Gdal?  Or perhaps in the file(s)?
> >         I have no problem opening and getting the properties of the
> >         file, i.e. coordinate system and alike. It is when I try to
> >         read the file that Gdal hangs.
> >
> >         I get no Exception, it just hangs and eats CPU-time.
> >
> >         I  compile the C# sample GDALReadDirect.cs from Gdal 1.7.2 and
> >         adapt it to read a portion of a big RIK file (500x500 pixels)
> >         and it stops at the same point in code. Error in the driver
> >         for RIK perhaps? or error in the sample code?
> >
> >         Yours
> >         Tomas
> >
> >
> >     _______________________________________________
> >     gdal-dev mailing list
> >     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
> >     http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> > /t?a???nj?/ /k?m?r/
> > +91-9494447584
> > 17.2416N 80.1426E
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From zuliani at mayachitra.com  Tue Jul  6 13:48:56 2010
From: zuliani at mayachitra.com (Marco Zuliani)
Date: Tue Jul  6 13:49:18 2010
Subject: [gdal-dev] Problem creating geo-tiff from scratch
In-Reply-To: <AANLkTikblXIrM-Ch_o8sXTeVm-ks7V7nIrkFZcBHJ-Vv@mail.gmail.com>
References: <AANLkTimFZi7mJbqXQX9ZXH2EqYR96ppuHrxONZyVOkvq@mail.gmail.com> 
	<AANLkTil-RYPl89GwIyyhVmFGpdBCasf2jBsTuzRx1viJ@mail.gmail.com> 
	<AANLkTikblXIrM-Ch_o8sXTeVm-ks7V7nIrkFZcBHJ-Vv@mail.gmail.com>
Message-ID: <AANLkTindiOiZsZejp9tI38Uy-UScZhz5CWRvHRhvL9ag@mail.gmail.com>

I noticed that I made another mistake: the band number starts from 1
according to the documentation... So that fixes the NULL problem. Now I am
just puzzled by the behavior of the debugger, even though this is not that
crucial at this point.

Thanks,

Marco Zuliani, Phd

phone: +1 805 967 9828
web: www.mayachitra.com


On Tue, Jul 6, 2010 at 9:49 AM, Marco Zuliani <zuliani@mayachitra.com>wrote:

> Dear Chaitanya,
>
>  thanks a lot for your response. As you pointed out the metadata tag was
> misspelled. Correcting it fixed the first problem. However I still have the
> second problem The inspection of Ig with the debugger shows non consistent
> values for the member variables of the GDALDataset class (see a snapshot at
> the bottom of the email). You suggest that there may be a bug with the
> debugger, but I doubt this is the case. In fact if I continue with the
> execution of the code, the instruction:
>
> [...]
> GDALRasterBand *poBand = Ig->GetRasterBand( b );
> [...]
>
> returns a NULL pointer when b is zero, and this seems to be consistent with
> the fact that the debugger says that Ig is composed of 0 bands (nBands  =
> 0). I would appreciate if you or anybody else have some suggestion to
> understand and solve this problem.
>
> Thanks,
> Marco
>
> --- DEBUGGER OUTPUT BEGINS ---
>
> - Ig 0x0000000003d43b90 {hTIFF=0x0000000003d434c0
> ppoActiveDSRef=0x0000000003d43ca0 poActiveDS=0x0000000003d43b90 ...} GDALDataset
> *
> + [GTiffDataset] {hTIFF=0x0000000003d434c0
> ppoActiveDSRef=0x0000000003d43ca0 poActiveDS=0x0000000003d43b90 ...}
> GTiffDataset
>  + GDALMajorObject {nFlags=33 sDescription={...} oMDMD={...} }
> GDALMajorObject
> + poDriver 0x000000fb00000001 {pfnOpen=??? pfnCreate=??? pfnDelete=???
> ...} GDALDriver *
>  eAccess 234 GDALAccess
>  nRasterXSize 4 int
>  nRasterYSize 64236080 int
>  nBands 0 int
> + papoBands 0x0000000100000000 GDALRasterBand * *
>  bForceCachedIO 0 int
>  nRefCount -1163005939 int
>  bShared 0 int
> + oOvManager {poDS=0x0000000000000000 poODS=0xbaadf00dbaadf00d
> osOvrFilename={...} ...} GDALDefaultOverviews
>
> --- DEBUGGER OUTPUT ENDS ---
>
>
> On Mon, Jul 5, 2010 at 9:13 PM, Chaitanya kumar CH <chaitanya.ch@gmail.com
> > wrote:
>
>> Marco,
>>
>> 1. You misspelled the option for world file creation as 'TWF' which should
>> actually be 'TFW'.
>> 2. The driver did report the error message correctly after processing the
>> creation options. There may be a bug with the debugger.
>>
>>
>> On Tue, Jul 6, 2010 at 6:26 AM, Marco Zuliani <zuliani@mayachitra.com>wrote:
>>
>>> Dear all,
>>>
>>>  I am trying to utilize GDAL to generate a geo-tiff image from scratch. I
>>> have been following the tutorial presented at
>>> http://www.gdal.org/gdal_tutorial.html and I have been reading the
>>> documentation of the functions involved in the process, but so far I have
>>> not beed successfull in accomplishing my goal.
>>>
>>>  In the following I will first paste (partially) my routine in the
>>> fervent hope that somebidy can spot my error and help me out. I will denote
>>> with [...] portions of the code that have been omitted because I believe
>>> they are not relevant to my question. After the listing I will present my
>>> questions.
>>>
>>>  --- CODE BEGINS ---
>>>
>>> [...]
>>>
>>>     // There is a driver for each supported format. Attempt to register
>>> all known drivers
>>>     // Ensure that GDALAllRegister() has been called before calling
>>> GetDriverByName().
>>>     GDALAllRegister();
>>>
>>>     // select the geotiff format for GDAL
>>>     const char *pszFormat = "GTiff";
>>>     GDALDriver *poDriver = GetGDALDriverManager()->GetDriverByName(
>>> pszFormat );
>>>
>>>     // make some checks to avoid headaches in the future
>>>     if ( poDriver == NULL )
>>>     {
>>> // take care of the error condition
>>>  [...]
>>>     }
>>>
>>>      // get some info regarding the GDAL driver
>>>     char **papszMetadata = poDriver->GetMetadata();
>>>
>>>     if ( !CSLFetchBoolean( papszMetadata, GDAL_DCAP_CREATE, FALSE ) )
>>>     {
>>>  // take care of the error condition in case creation is not possible
>>>     }
>>>
>>> [...]
>>>  // at this point the some variables used in a while have the following
>>> values
>>>  // width = 251
>>>  // height = 234
>>>  // bands = 4
>>>      // this hosts the list of driver specific control parameters.
>>>     // See http://www.gdal.org/frmt_gtiff.html
>>>     char **papszOptions = NULL;
>>>     papszOptions = CSLSetNameValue( papszOptions, "TWF", "NO" );
>>>     papszOptions = CSLSetNameValue( papszOptions, "TILED", "NO" );
>>>
>>>     int height  = FreeImage_GetHeight( I );
>>>     int width   = FreeImage_GetWidth( I );
>>>     // this is the georeferenced image
>>>     const char *options = GDALGetDriverCreationOptionList(poDriver);
>>>     GDALDataset *Ig = poDriver->Create( "test.tif", width, height, bands,
>>> GDT_Byte, papszOptions );
>>>  --- CODE ENDS ---
>>>
>>> Questions:
>>>
>>> 1] The program outputs to the console the following message: "Warning 6:
>>> Driver GTiff does not support TWF creation option". Why? From the
>>> documentation at http://www.gdal.org/frmt_gtiff.html it seems that such
>>> option is supported...
>>>
>>> 2] From Visual Studio debugger I can see that the values of poDriver are
>>> messed up and also the values of eAccess, nRasterXSize, nRasterYSize, nBands
>>> seem to be scrabled (I would expect nBands = 4, nRasterXsize = 251, etc.).
>>> Does anybody have an idea of what's going on? (Please find below the output
>>> of the debugger Name/Value/Type)
>>>
>>> - Ig 0x00000000039fa450 {hTIFF=0x00000000039fa000
>>> ppoActiveDSRef=0x00000000039fa560 poActiveDS=0x00000000039fa450 ...} GDALDataset
>>> *
>>> + [GTiffDataset] {hTIFF=0x00000000039fa000
>>> ppoActiveDSRef=0x00000000039fa560 poActiveDS=0x00000000039fa450 ...}
>>> GTiffDataset
>>> + GDALMajorObject {nFlags=33 sDescription={...} oMDMD={...} }
>>> GDALMajorObject
>>> - poDriver 0x000000fb00000001 {pfnOpen=??? pfnCreate=??? pfnDelete=???
>>> ...} GDALDriver *
>>> + GDALMajorObject {nFlags=??? sDescription={...} oMDMD={...} }
>>> GDALMajorObject
>>>  pfnOpen CXX0030: Error: expression cannot be evaluated
>>>  pfnCreate CXX0030: Error: expression cannot be evaluated
>>>  pfnDelete CXX0030: Error: expression cannot be evaluated
>>>  pfnCreateCopy CXX0030: Error: expression cannot be evaluated
>>>  pDriverData CXX0030: Error: expression cannot be evaluated
>>>  pfnUnloadDriver CXX0030: Error: expression cannot be evaluated
>>>  pfnIdentify CXX0030: Error: expression cannot be evaluated
>>>  pfnRename CXX0030: Error: expression cannot be evaluated
>>>  pfnCopyFiles CXX0030: Error: expression cannot be evaluated
>>>  eAccess 234 GDALAccess
>>>  nRasterXSize 4 int
>>>  nRasterYSize 60761968 int
>>>  nBands 0 int
>>> + papoBands 0x0000000100000000 GDALRasterBand * *
>>>  bForceCachedIO 0 int
>>>  nRefCount -1163005939 int
>>>  bShared 0 int
>>> + oOvManager {poDS=0x0000000000000000 poODS=0xbaadf00dbaadf00d
>>> osOvrFilename={...} ...} GDALDefaultOverviews
>>>
>>> Thanks in advance for your help,
>>> Marco
>>>
>>> Marco Zuliani, Phd
>>>
>>> phone: +1 805 967 9828
>>> web: www.mayachitra.com
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>> /t?a???nj?/ /k?m?r/
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100706/c01c1d3a/attachment-0001.html
From monshi at home.se  Tue Jul  6 14:02:55 2010
From: monshi at home.se (Tomas R)
Date: Tue Jul  6 14:03:06 2010
Subject: [gdal-dev] Re: Bug(?): RIK-maps with Gdal 1.7.2 do not work
In-Reply-To: <201007061946.25719.even.rouault@mines-paris.org>
References: <i0v6qa$q7e$1@dough.gmane.org>	<AANLkTin0Soj9hIkuJ2iiJLTH930JFshWbFz2QAMVdp6N@mail.gmail.com>	<i0vohv$3vu$1@dough.gmane.org>
	<201007061946.25719.even.rouault@mines-paris.org>
Message-ID: <i0vr4e$en8$1@dough.gmane.org>

  So a solution/a fix is available when 1.7.3 is released somewhere in 
the future? That somewhere might occur when?

If you are correct that is. But of course you are....

:)

/Tomas

Even Rouault skrev 2010-07-06 19:46:
> Chaitanya,
>
> Actually I think I've spotted the regression in
> http://trac.osgeo.org/gdal/changeset/17398, which was a 1.7 change.
>
> Namely the change from
>
> int i;
> for( i = 0; i<  LZW_CLEAR; i++ )
> 	character[i] = i;
>
> to
>
> GByte j;
> for( j = 0; j<  LZW_CLEAR; j++ )
> 	character[j] = j;
>
> The issue is that LZW_CLEAR = 256, so as j is an unsigned char - restricted
> from 0 to 255 -, the j<  LZW_CLEAR condition is always true, thus the
> infinite loop...
>
> This part should be reverted. If you really want to shut up the compiler
> warning character[i] = (GByte)i but in an ideal world, the compiler should be
> clever enough to see that there's no risk of data loss as i does fit in a
> GByte...
>
> Best regards,
>
> Even
>
> Le Tuesday 06 July 2010 19:18:56 Tomas R, vous avez ?crit :
>>    The reason for the out of memory exception was because the RIK-map I
>> tested with i wasfar to big to be read into a bitmap. I have now created
>> a smaller sample.
>>
>> With the small RIK-fil I can reproduce the problem with the precompiled
>> binaries from dyndns so problem is not only on my part. Using the small
>> map (1000x750 pixels) the demo app from Gdal 1.6.1 works as it should.
>> 1.7.2 hangs with no exception given.
>>
>> See ticket http://trac.osgeo.org/gdal/ticket/3674
>>
>> The post you answered  I tried to delete and somewhat succeeded... I
>> happened to compile the wrong file. When I thought I was compiling the
>> GDALReadDirect.cs I instead compiled the GDALRead.cs.
>>
>> Yours
>> Tomas
>>
>> Chaitanya kumar CH skrev 2010-07-06 18:24:
>>> Tomas,
>>>
>>> I don't see any changes that could lead to infinite loops or memory
>>> leaks recently.
>>> If you can provide a sample dataset that gives this error please raise
>>> a ticket at http://trac.osgeo.org/gdal/newticket
>>>
>>> On Tue, Jul 6, 2010 at 6:43 PM, Tomas R<monshi@home.se
>>> <mailto:monshi@home.se>>  wrote:
>>>
>>>       I add - perhaps a problem with my comilation of Gdal.  Note when
>>>      I compile the GdalReadDirect.cs as it is and run it the result
>>>      differs from the result of the GdalReadDirect.exe found in
>>>      Swig\Csharp.
>>>      The latter gives the Raster dataset Paramets and runs until an Out
>>>      of memory Exception. Mine hangs and I have to abort it.
>>>
>>>      What have I done wrong this time?
>>>
>>>      Will try to recompile gdal and see if anything changes.
>>>
>>>      Tomas R skrev 2010-07-06 14:16:
>>>
>>>           I have a problem with RIK-maps and Gdal 1.7.2.
>>>
>>>          If I use Gdal 1.6.1 I have no problem reading the map but
>>>          doing the same with Gdal 1.7.2 my whole plugin/software hangs.
>>>
>>>          I have identified that Gdal stops at the line
>>>
>>>           band.ReadRaster(x, y, width, height, r, width, height, 0, 0);
>>>
>>>          where x, y, width and height are controlled to be within the
>>>          image to load.
>>>          This line taken from the routine
>>>           private void SaveBitmapPaletteDirect(...)
>>>          from the C# samples. I have adapted it to load only a portion
>>>          of the map into a bitmap.
>>>
>>>          I have compiled Gdal myself, perhaps a problem with the
>>>          compilation? Do I miss the RIK-driver or something? Or is
>>>          there an error in Gdal?  Or perhaps in the file(s)?
>>>          I have no problem opening and getting the properties of the
>>>          file, i.e. coordinate system and alike. It is when I try to
>>>          read the file that Gdal hangs.
>>>
>>>          I get no Exception, it just hangs and eats CPU-time.
>>>
>>>          I  compile the C# sample GDALReadDirect.cs from Gdal 1.7.2 and
>>>          adapt it to read a portion of a big RIK file (500x500 pixels)
>>>          and it stops at the same point in code. Error in the driver
>>>          for RIK perhaps? or error in the sample code?
>>>
>>>          Yours
>>>          Tomas
>>>
>>>
>>>      _______________________________________________
>>>      gdal-dev mailing list
>>>      gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
>>>      http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>>
>>> --
>>> Best regards,
>>> Chaitanya kumar CH.
>>> /t?a???nj?/ /k?m?r/
>>> +91-9494447584
>>> 17.2416N 80.1426E
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ragi at burhum.com  Tue Jul  6 19:33:22 2010
From: ragi at burhum.com (Ragi Burhum)
Date: Tue Jul  6 19:33:25 2010
Subject: [gdal-dev] highly compressed vector format for points
Message-ID: <AANLkTilljydg-X1fEB43v5BdQtJbdQvw5EX8j9bVKhNg@mail.gmail.com>

Hello there,

The other day I got a question from someone that wanted to store a
relatively small amount of point features (~31K) that are close to each
other in a 'highly compressed' format. He wants to be able to query features
by proximity using coords. The reason for this requirement is that he wants
to be able to use it in embedded devices with limited memory. Yes I know
memory is cheap and keeps getting cheaper, but I still thought it was an
interesting question.

I can think of many ways to create a custom binary format to do such a
thing, but I wanted to check the brain collective to hear what people
thought. Of course spatialite and their new "compressed geometries" feature
will come up in this conversation. I already sent an e-mail to that group
for details about that :)

I want to be able to avoid reinventing the wheel, so what are your thoughts
on this?

Thanks,

- Ragi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100706/59da798c/attachment.html
From fmarkham at gmail.com  Tue Jul  6 22:56:49 2010
From: fmarkham at gmail.com (Francis Markham)
Date: Tue Jul  6 22:57:11 2010
Subject: [gdal-dev] Re: Writing non-ASCII characters to shapefile
In-Reply-To: <4C335D70.40302@gmx.eu>
References: <AANLkTimsdGpbI4AUsVhjXhVGD-1QJluHjYRFbKltO5Cz@mail.gmail.com> 
	<4C31A143.8070502@gmx.eu>
	<AANLkTilNJvj5hPeDGyh-HUbP7TJFEnR8oVl7tREyWcmv@mail.gmail.com> 
	<1278330783.2281.14.camel@peter-laptop>
	<AANLkTike2xzgZbCD4TJQhBkX2ByOr-2X68GBRcWL2Ise@mail.gmail.com> 
	<4C32E9E9.3040907@gmx.eu>
	<AANLkTimb66rEXvw7-r_Yk1llF4zktMjMkK_9g6ZCQH4f@mail.gmail.com> 
	<4C335D70.40302@gmx.eu>
Message-ID: <AANLkTik1Zdd_-Zg2_eju_5_k3uFP1lEoxbw0DofszQXn@mail.gmail.com>

Obviously it is easy enough to write the .CPG and overwrite a byte in
the DBF in application code.  However, I would rather use the OGR API
for this.  Would a patch providing this functionality be welcomed?

If I were to implement this, would a "dataset creation option" in the
shapefile driver be the appropriate API for this?  All it would need
do is expose the existing functionality in shapelib.

Regards,

Francis

On 7 July 2010 02:44, Hermann Peifer <peifer@gmx.eu> wrote:
> In the mentioned mail from earlier this year, William Kyngesburye wrote:
>
>> Maybe GDAL needs a creation option in the shapefile driver
>> to set the LDID or to instead add a cpg file with an encoding value.
>
> As there was no reply to his mail, I assume that there is no GDAL/OGR
> creation option for the LDID and it is unlikely that there will be one in
> the near future.
>
> Hermann
>
>
> On 06/07/2010 13:04, Francis Markham wrote:
>>
>> It appears from
>> http://lists.osgeo.org/pipermail/gdal-dev/2010-May/024619.html and
>> http://resources.arcgis.com/content/kbase?fa=articleShow&d=26015 ?that
>> ESRI set the LDID to zero to indicate an unknown LDID. ?From my
>> reading of the OGR sourcecode, it seems that OGR uses the shapelib
>> default LDID of 0x57 (previously it was set to 0x3, or windows-1252).
>> Is there any way to specify this value using the OGR API, or do I need
>> to use shapelib directly to create my shapefiles in order to do this?
>>
>> Cheers,
>>
>> Francis
>>
>> On 6 July 2010 18:31, Hermann Peifer<peifer@gmx.eu> ?wrote:
>>>
>>> The .cpg files we generate through ArcGIS desktop contain the string:
>>> UTF-8
>>>
>>> Some time ago, there was a mail on this list about problems in case of
>>> conflicting information in the .cpg file compared to the Language Driver
>>> ID
>>> (LDID) in the header of a dBASE file, see:
>>> http://lists.osgeo.org/pipermail/gdal-dev/2010-May/024619.html
>>>
>>> Hermann
>>>
>>> On 06/07/2010 04:13, Francis Markham wrote:
>>>
>>> Okay, I will take that approach then. ?Thank you all for your help.
>>>
>>> What specific value should I write into the .cpg? The string '65001'
>>> or the string 'utf-8' or something else?
>>>
>>> -Francis
>>>
>>> On 5 July 2010 21:53, Peter Hopfgartner<peter.hopfgartner@r3-gis.com>
>>> wrote:
>>>
>>>
>>> Hi Francis,
>>>
>>> what does not portable mean? ArcMap handles UTF-8 fine, if the correct
>>> encoding is written into the .cpg file. Recent shapelib should handle
>>> this fine, too. If there is any problem with a specific GIS program, a
>>> bug report for that GIS program might be the right thing to do.
>>>
>>> Regards,
>>>
>>> Peter
>>>
>>> On Mon, 2010-07-05 at 19:18 +1000, Francis Markham wrote:
>>>
>>>
>>> At the bottom of this page, for one:
>>> http://resources.arcgis.com/content/kbase?fa=articleShow&d=21106
>>>
>>> But honestly I've found hard to find ?information about this. ?I'd be
>>> very happy to be corrected if this is not the case!
>>>
>>> Cheers,
>>>
>>> Francis
>>>
>>> On 5 July 2010 19:09, Hermann Peifer<peifer@gmx.eu> ?wrote:
>>>
>>>
>>> Francis, you wrote:
>>>
>>>
>>>
>>> I have heard that the use of UTF-8 in shapefiles is not portable.
>>>
>>>
>>> Where did you hear this?
>>>
>>> Regards, Hermann
>>>
>>>
>>> On 03/07/2010 04:40, Francis Markham wrote:
>>>
>>>
>>> Hi there,
>>>
>>> I'm trying to write data from a Microsoft Excel .xls file into a
>>> shapefile, using OGR's Python bindings in Python 2.6. ?This is going
>>> well, but I am having some problems when I try to write values that
>>> contain so-called "smart quotes". ?Smart quotes are special
>>> characters, defined as characters 0x91 through 0x94 in Windows-1252 (
>>> see http://msdn.microsoft.com/en-au/goglobal/cc305145.aspx ).
>>>
>>> What is the best way to save this data to a shapefile using OGR? ?I
>>> need the shapefile to be interoperable with other programs, including
>>> but not limited to ESRI products. While I assume I could simply
>>> translate these characters to standard ASCII, I would prefer not to if
>>> possible. ?I also haven't tested the shapefiles with data from other
>>> character encodings.
>>>
>>> I have heard that the use of UTF-8 in shapefiles is not portable. ?I
>>> am also aware that shapefile.cpg can store a shapefile's codepage. ?I
>>> don't know how to put these pieces together to create a portable
>>> solution, however.
>>>
>>> Apologies if this is a newbie question, but I can't find answers on the
>>> web.
>>>
>>> Thanks,
>>>
>>> Francis Markham
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>> --
>>> Dott. Peter Hopfgartner
>>>
>>> R3 GIS Srl - GmbH
>>> Via Johann Kravogl-Str. 2
>>> I-39012 Meran/Merano (BZ)
>>> Email: peter.hopfgartner@r3-gis.com
>>> Tel. : +39 0473 494949
>>> Fax ?: +39 0473 069902
>>> www ?: http://www.r3-gis.com
>>>
>>> XING : http://www.xing.com/go/invita/8917535
>>>
>>>
>>>
>
>
From P.Halls at york.ac.uk  Wed Jul  7 02:18:02 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Wed Jul  7 02:18:10 2010
Subject: [gdal-dev] highly compressed vector format for points
In-Reply-To: <AANLkTilljydg-X1fEB43v5BdQtJbdQvw5EX8j9bVKhNg@mail.gmail.com>
References: <AANLkTilljydg-X1fEB43v5BdQtJbdQvw5EX8j9bVKhNg@mail.gmail.com>
Message-ID: <4C341C1A.6070106@york.ac.uk>

Ragi,

    ESRI implemented something on these lines in the Personal Geodatabase, in an 
attempt to overcome data value restrictions in Access: they scaled the values 
into integers.  This approach would work for the application you describe, but 
loses precision further from the origin.  The scaling factor is stored separately.

    For some work I did, many years ago now, when working with a graphics 
package that could only handle 16bit coordinate values, I held the most 
significant part of the eastings and northings separately, subtracting it from 
the actual coordinates and adding it back on when I required the full value. 
This is simple and would work well for your application.

Best wishes,

Peter

Ragi Burhum wrote:
> Hello there,
> 
> The other day I got a question from someone that wanted to store a
> relatively small amount of point features (~31K) that are close to each
> other in a 'highly compressed' format. He wants to be able to query features
> by proximity using coords. The reason for this requirement is that he wants
> to be able to use it in embedded devices with limited memory. Yes I know
> memory is cheap and keeps getting cheaper, but I still thought it was an
> interesting question.
> 
> I can think of many ways to create a custom binary format to do such a
> thing, but I wanted to check the brain collective to hear what people
> thought. Of course spatialite and their new "compressed geometries" feature
> will come up in this conversation. I already sent an e-mail to that group
> for details about that :)
> 
> I want to be able to avoid reinventing the wheel, so what are your thoughts
> on this?
> 
> Thanks,
> 
> - Ragi
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From ole.nielsen at aifdr.org  Wed Jul  7 03:56:28 2010
From: ole.nielsen at aifdr.org (Ole Nielsen)
Date: Wed Jul  7 03:54:03 2010
Subject: [gdal-dev] Which contour is which?
Message-ID: <01744CEB055A2D46A1C0E02E68F90DCB01D973F36EE5@Exchange.aifdr.org>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 16939 bytes
Desc: image001.jpg
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100707/e618f6b4/image001-0001.jpg
From chaitanya.ch at gmail.com  Wed Jul  7 04:26:54 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jul  7 04:26:58 2010
Subject: [gdal-dev] Which contour is which?
In-Reply-To: <01744CEB055A2D46A1C0E02E68F90DCB01D973F36EE5@Exchange.aifdr.org>
References: <01744CEB055A2D46A1C0E02E68F90DCB01D973F36EE5@Exchange.aifdr.org>
Message-ID: <AANLkTikJaiQD49QK2LSzjCpD3cyW28ZOqSBvHR_5_vaX@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 16939 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100707/31065bef/attachment-0001.jpe
From Alexander.Plum at cae.de  Wed Jul  7 04:47:37 2010
From: Alexander.Plum at cae.de (Alexander Plum)
Date: Wed Jul  7 04:50:01 2010
Subject: [gdal-dev] Identification of neighbouring OGRGeometries
Message-ID: <74C7EC991D7DFB41A525D22BFD4E090805B09C7A9E@sdestex2>

Hello there,

is it possible to identify the two neighbouring OGRGeometries of another OGRGeometry??
Therefore I miss an adequate function in the GDAL-API.

Greets,
Alex

-- 
This email was Anti Virus checked by CAE
From ole.nielsen at aifdr.org  Wed Jul  7 05:12:11 2010
From: ole.nielsen at aifdr.org (Ole Nielsen)
Date: Wed Jul  7 05:08:40 2010
Subject: [gdal-dev] Which contour is which?
In-Reply-To: <AANLkTikJaiQD49QK2LSzjCpD3cyW28ZOqSBvHR_5_vaX@mail.gmail.com>
References: <01744CEB055A2D46A1C0E02E68F90DCB01D973F36EE5@Exchange.aifdr.org>
	<AANLkTikJaiQD49QK2LSzjCpD3cyW28ZOqSBvHR_5_vaX@mail.gmail.com>
Message-ID: <01744CEB055A2D46A1C0E02E68F90DCB01D973F36EFA@Exchange.aifdr.org>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 16939 bytes
Desc: image001.jpg
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100707/23bcc82a/image001-0001.jpg
From chaitanya.ch at gmail.com  Wed Jul  7 07:10:49 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jul  7 07:10:52 2010
Subject: [gdal-dev] Which contour is which?
In-Reply-To: <01744CEB055A2D46A1C0E02E68F90DCB01D973F36EFA@Exchange.aifdr.org>
References: <01744CEB055A2D46A1C0E02E68F90DCB01D973F36EE5@Exchange.aifdr.org>
	<AANLkTikJaiQD49QK2LSzjCpD3cyW28ZOqSBvHR_5_vaX@mail.gmail.com>
	<01744CEB055A2D46A1C0E02E68F90DCB01D973F36EFA@Exchange.aifdr.org>
Message-ID: <AANLkTimf6NP85xo2zhbvG2Pdyiv_1NJDWrbEN_bsA18i@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 16939 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100707/9e24294e/attachment-0001.jpe
From chaitanya.ch at gmail.com  Wed Jul  7 07:19:20 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jul  7 07:19:23 2010
Subject: [gdal-dev] Identification of neighbouring OGRGeometries
In-Reply-To: <74C7EC991D7DFB41A525D22BFD4E090805B09C7A9E@sdestex2>
References: <74C7EC991D7DFB41A525D22BFD4E090805B09C7A9E@sdestex2>
Message-ID: <AANLkTim5c-7Ja7vEcnpI7V4ZBS5lqtILetubKJli4hkL@mail.gmail.com>

Alex,

If I understand you correctly, the method OGRGeometry::Touches() can help
you.
You can see it's description and similar functions at
http://gdal.org/ogr/classOGRGeometry.html


On Wed, Jul 7, 2010 at 2:17 PM, Alexander Plum <Alexander.Plum@cae.de>wrote:

> Hello there,
>
> is it possible to identify the two neighbouring OGRGeometries of another
> OGRGeometry??
> Therefore I miss an adequate function in the GDAL-API.
>
> Greets,
> Alex
>
> --
> This email was Anti Virus checked by CAE
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100707/e7fa0573/attachment.html
From Alexander.Plum at cae.de  Wed Jul  7 07:46:08 2010
From: Alexander.Plum at cae.de (Alexander Plum)
Date: Wed Jul  7 07:46:48 2010
Subject: AW: [gdal-dev] Identification of neighbouring OGRGeometries
In-Reply-To: <74C7EC991D7DFB41A525D22BFD4E090805B09C7AA2@sdestex2>
References: <74C7EC991D7DFB41A525D22BFD4E090805B09C7A9E@sdestex2>,
	<AANLkTim5c-7Ja7vEcnpI7V4ZBS5lqtILetubKJli4hkL@mail.gmail.com>,
	<74C7EC991D7DFB41A525D22BFD4E090805B09C7AA2@sdestex2>
Message-ID: <74C7EC991D7DFB41A525D22BFD4E090805B09C7AA3@sdestex2>

Look,

I am working on a function which paints OGRGeometries representing highlines.
Before painting them I want to make sure wether the new OGRGeometry should be painted or not. If the distance to the two neighbours is too near to its both neighbours, the
new highlinie should not be painted. I am looking foward to employ the function OGR_G_Distance() for this case.
But first of all I want to identify the new highline's two neighbours...

Best regards,
Alex
________________________________________
Von: Chaitanya kumar CH [chaitanya.ch@gmail.com]
Gesendet: Mittwoch, 7. Juli 2010 13:19
An: Alexander Plum
Cc: gdal-dev@lists.osgeo.org
Betreff: Re: [gdal-dev] Identification of neighbouring OGRGeometries

Alex,

If I understand you correctly, the method OGRGeometry::Touches() can help you.
You can see it's description and similar functions at http://gdal.org/ogr/classOGRGeometry.html


On Wed, Jul 7, 2010 at 2:17 PM, Alexander Plum <Alexander.Plum@cae.de<mailto:Alexander.Plum@cae.de>> wrote:
Hello there,

is it possible to identify the two neighbouring OGRGeometries of another OGRGeometry??
Therefore I miss an adequate function in the GDAL-API.

Greets,
Alex

--
This email was Anti Virus checked by CAE
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
From tejas.gajera at gmail.com  Wed Jul  7 11:53:06 2010
From: tejas.gajera at gmail.com (Gajera Tejas)
Date: Wed Jul  7 11:53:28 2010
Subject: [gdal-dev] Convert huge PNG file to JP2
Message-ID: <AANLkTimBB83_oCE7h1tw345qFCWFCKxmSH1tZTJgYYkN@mail.gmail.com>

Hi All,

Can I convert huge PNG image to JP2 using GDAL.
Thanks in advance.

Best,
Tejas
From warmerdam at pobox.com  Wed Jul  7 12:28:04 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jul  7 12:28:10 2010
Subject: [gdal-dev] Convert huge PNG file to JP2
In-Reply-To: <AANLkTimBB83_oCE7h1tw345qFCWFCKxmSH1tZTJgYYkN@mail.gmail.com>
References: <AANLkTimBB83_oCE7h1tw345qFCWFCKxmSH1tZTJgYYkN@mail.gmail.com>
Message-ID: <4C34AB14.9010704@pobox.com>

Gajera Tejas wrote:
> Hi All,
> 
> Can I convert huge PNG image to JP2 using GDAL.
> Thanks in advance.

Tejas,

Yes, assuming you have a JPEG2000 driver enabled in GDAL (there are none
in a default build). For instance, if you have built against the Kakadu
library you could do:

  gdal_translate -of JP2KAK in.png out.jp2

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ragi at burhum.com  Wed Jul  7 12:52:17 2010
From: ragi at burhum.com (Ragi Burhum)
Date: Wed Jul  7 12:52:19 2010
Subject: [gdal-dev] highly compressed vector format for points
In-Reply-To: <4C341C1A.6070106@york.ac.uk>
References: <AANLkTilljydg-X1fEB43v5BdQtJbdQvw5EX8j9bVKhNg@mail.gmail.com>
	<4C341C1A.6070106@york.ac.uk>
Message-ID: <AANLkTikT6pdTPTMp9UeqTHNVvI2nu3DOmPlj54sNz9jN@mail.gmail.com>

Hello Peter,

The approach of scaling values into integers, if I recall correctly, is also
used in the transfer protocol for ArcSDE. I have considered this as an
option and was wondering if any of the non-ESRI datasources used that
approach.

I have seen the second method you describe being used for avoiding "small
feature shakiness" (yes, I made that word up) in 3D globes when zoomed-in
too close.

Thank you Peter for the response - I will definitely keep these options in
the bag of tricks if I end up having to implement a new datasource.

Thanks,

- Ragi



On Tue, Jul 6, 2010 at 11:18 PM, Peter J Halls <P.Halls@york.ac.uk> wrote:

> Ragi,
>
>   ESRI implemented something on these lines in the Personal Geodatabase, in
> an attempt to overcome data value restrictions in Access: they scaled the
> values into integers.  This approach would work for the application you
> describe, but loses precision further from the origin.  The scaling factor
> is stored separately.
>
>   For some work I did, many years ago now, when working with a graphics
> package that could only handle 16bit coordinate values, I held the most
> significant part of the eastings and northings separately, subtracting it
> from the actual coordinates and adding it back on when I required the full
> value. This is simple and would work well for your application.
>
> Best wishes,
>
> Peter
>
> Ragi Burhum wrote:
>
>> Hello there,
>>
>> The other day I got a question from someone that wanted to store a
>> relatively small amount of point features (~31K) that are close to each
>> other in a 'highly compressed' format. He wants to be able to query
>> features
>> by proximity using coords. The reason for this requirement is that he
>> wants
>> to be able to use it in embedded devices with limited memory. Yes I know
>> memory is cheap and keeps getting cheaper, but I still thought it was an
>> interesting question.
>>
>> I can think of many ways to create a custom binary format to do such a
>> thing, but I wanted to check the brain collective to hear what people
>> thought. Of course spatialite and their new "compressed geometries"
>> feature
>> will come up in this conversation. I already sent an e-mail to that group
>> for details about that :)
>>
>> I want to be able to avoid reinventing the wheel, so what are your
>> thoughts
>> on this?
>>
>> Thanks,
>>
>> - Ragi
>>
>>
>>
>> ------------------------------------------------------------------------
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> --
>
> --------------------------------------------------------------------------------
> Peter J Halls, GIS Advisor, University of York
> Telephone: 01904 433806     Fax: 01904 433740
> Snail mail: Computing Service, University of York, Heslington, York YO10
> 5DD
> This message has the status of a private and personal communication
>
> --------------------------------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100707/1671b47b/attachment.html
From monshi at home.se  Wed Jul  7 12:58:45 2010
From: monshi at home.se (Tomas R)
Date: Wed Jul  7 12:59:01 2010
Subject: [gdal-dev] Re: Bug(?): RIK-maps with Gdal 1.7.2 do not work
In-Reply-To: <i0vr4e$en8$1@dough.gmane.org>
References: <i0v6qa$q7e$1@dough.gmane.org>	<AANLkTin0Soj9hIkuJ2iiJLTH930JFshWbFz2QAMVdp6N@mail.gmail.com>	<i0vohv$3vu$1@dough.gmane.org>	<201007061946.25719.even.rouault@mines-paris.org>
	<i0vr4e$en8$1@dough.gmane.org>
Message-ID: <i12bo6$ajn$1@dough.gmane.org>

  The fix in
http://trac.osgeo.org/gdal/changeset/19985
I can download and replace the file in the 1.7.2 version of gdal I have 
and compile gdal again and it will work?

Or should I wait for 1.7.3?

Yours
Tomas



Tomas R skrev 2010-07-06 20:02:
>  So a solution/a fix is available when 1.7.3 is released somewhere in 
> the future? That somewhere might occur when?
>
> If you are correct that is. But of course you are....
>
> :)
>
> /Tomas
>
> Even Rouault skrev 2010-07-06 19:46:
>> Chaitanya,
>>
>> Actually I think I've spotted the regression in
>> http://trac.osgeo.org/gdal/changeset/17398, which was a 1.7 change.
>>
>> Namely the change from
>>
>> int i;
>> for( i = 0; i<  LZW_CLEAR; i++ )
>>     character[i] = i;
>>
>> to
>>
>> GByte j;
>> for( j = 0; j<  LZW_CLEAR; j++ )
>>     character[j] = j;
>>
>> The issue is that LZW_CLEAR = 256, so as j is an unsigned char - 
>> restricted
>> from 0 to 255 -, the j<  LZW_CLEAR condition is always true, thus the
>> infinite loop...
>>
>> This part should be reverted. If you really want to shut up the compiler
>> warning character[i] = (GByte)i but in an ideal world, the compiler 
>> should be
>> clever enough to see that there's no risk of data loss as i does fit 
>> in a
>> GByte...
>>
>> Best regards,
>>
>> Even
>>
>> Le Tuesday 06 July 2010 19:18:56 Tomas R, vous avez ?crit :
>>>    The reason for the out of memory exception was because the RIK-map I
>>> tested with i wasfar to big to be read into a bitmap. I have now 
>>> created
>>> a smaller sample.
>>>
>>> With the small RIK-fil I can reproduce the problem with the precompiled
>>> binaries from dyndns so problem is not only on my part. Using the small
>>> map (1000x750 pixels) the demo app from Gdal 1.6.1 works as it should.
>>> 1.7.2 hangs with no exception given.
>>>
>>> See ticket http://trac.osgeo.org/gdal/ticket/3674
>>>
>>> The post you answered  I tried to delete and somewhat succeeded... I
>>> happened to compile the wrong file. When I thought I was compiling the
>>> GDALReadDirect.cs I instead compiled the GDALRead.cs.
>>>
>>> Yours
>>> Tomas
>>>
>>> Chaitanya kumar CH skrev 2010-07-06 18:24:
>>>> Tomas,
>>>>
>>>> I don't see any changes that could lead to infinite loops or memory
>>>> leaks recently.
>>>> If you can provide a sample dataset that gives this error please raise
>>>> a ticket at http://trac.osgeo.org/gdal/newticket
>>>>
>>>> On Tue, Jul 6, 2010 at 6:43 PM, Tomas R<monshi@home.se
>>>> <mailto:monshi@home.se>>  wrote:
>>>>
>>>>       I add - perhaps a problem with my comilation of Gdal.  Note when
>>>>      I compile the GdalReadDirect.cs as it is and run it the result
>>>>      differs from the result of the GdalReadDirect.exe found in
>>>>      Swig\Csharp.
>>>>      The latter gives the Raster dataset Paramets and runs until an 
>>>> Out
>>>>      of memory Exception. Mine hangs and I have to abort it.
>>>>
>>>>      What have I done wrong this time?
>>>>
>>>>      Will try to recompile gdal and see if anything changes.
>>>>
>>>>      Tomas R skrev 2010-07-06 14:16:
>>>>
>>>>           I have a problem with RIK-maps and Gdal 1.7.2.
>>>>
>>>>          If I use Gdal 1.6.1 I have no problem reading the map but
>>>>          doing the same with Gdal 1.7.2 my whole plugin/software 
>>>> hangs.
>>>>
>>>>          I have identified that Gdal stops at the line
>>>>
>>>>           band.ReadRaster(x, y, width, height, r, width, height, 0, 
>>>> 0);
>>>>
>>>>          where x, y, width and height are controlled to be within the
>>>>          image to load.
>>>>          This line taken from the routine
>>>>           private void SaveBitmapPaletteDirect(...)
>>>>          from the C# samples. I have adapted it to load only a portion
>>>>          of the map into a bitmap.
>>>>
>>>>          I have compiled Gdal myself, perhaps a problem with the
>>>>          compilation? Do I miss the RIK-driver or something? Or is
>>>>          there an error in Gdal?  Or perhaps in the file(s)?
>>>>          I have no problem opening and getting the properties of the
>>>>          file, i.e. coordinate system and alike. It is when I try to
>>>>          read the file that Gdal hangs.
>>>>
>>>>          I get no Exception, it just hangs and eats CPU-time.
>>>>
>>>>          I  compile the C# sample GDALReadDirect.cs from Gdal 1.7.2 
>>>> and
>>>>          adapt it to read a portion of a big RIK file (500x500 pixels)
>>>>          and it stops at the same point in code. Error in the driver
>>>>          for RIK perhaps? or error in the sample code?
>>>>
>>>>          Yours
>>>>          Tomas
>>>>
>>>>
>>>>      _______________________________________________
>>>>      gdal-dev mailing list
>>>>      gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
>>>>      http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>>>
>>>>
>>>> -- 
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>> /t?a???nj?/ /k?m?r/
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From woodbri at swoodbridge.com  Wed Jul  7 13:28:02 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Jul  7 13:30:20 2010
Subject: [gdal-dev] highly compressed vector format for points
In-Reply-To: <AANLkTikT6pdTPTMp9UeqTHNVvI2nu3DOmPlj54sNz9jN@mail.gmail.com>
References: <AANLkTilljydg-X1fEB43v5BdQtJbdQvw5EX8j9bVKhNg@mail.gmail.com>	<4C341C1A.6070106@york.ac.uk>
	<AANLkTikT6pdTPTMp9UeqTHNVvI2nu3DOmPlj54sNz9jN@mail.gmail.com>
Message-ID: <4C34B922.7030806@swoodbridge.com>

RoadMap http://roadmap.sourceforge.net/

uses a similar compression trick of storing data in spatial "squares"
Each square has an origin of x,y, and all coordinates within the square 
are stored relative to the square origin. So depending on your needed 
resolution you might be able to compress an arbitrary x,y into a 
reference to a square and 2 ints for x,y position in the square. If all 
data the is fullly in the square is maintained in a list, then you only 
need to store the reference to the square once for the list.

-Steve

Ragi Burhum wrote:
> Hello Peter,
> 
> The approach of scaling values into integers, if I recall correctly, is 
> also used in the transfer protocol for ArcSDE. I have considered this as 
> an option and was wondering if any of the non-ESRI datasources used that 
> approach. 
> 
> I have seen the second method you describe being used for avoiding 
> "small feature shakiness" (yes, I made that word up) in 3D globes when 
> zoomed-in too close.
> 
> Thank you Peter for the response - I will definitely keep these options 
> in the bag of tricks if I end up having to implement a new datasource.
> 
> Thanks,
> 
> - Ragi
> 
> 
> 
> On Tue, Jul 6, 2010 at 11:18 PM, Peter J Halls <P.Halls@york.ac.uk 
> <mailto:P.Halls@york.ac.uk>> wrote:
> 
>     Ragi,
> 
>       ESRI implemented something on these lines in the Personal
>     Geodatabase, in an attempt to overcome data value restrictions in
>     Access: they scaled the values into integers.  This approach would
>     work for the application you describe, but loses precision further
>     from the origin.  The scaling factor is stored separately.
> 
>       For some work I did, many years ago now, when working with a
>     graphics package that could only handle 16bit coordinate values, I
>     held the most significant part of the eastings and northings
>     separately, subtracting it from the actual coordinates and adding it
>     back on when I required the full value. This is simple and would
>     work well for your application.
> 
>     Best wishes,
> 
>     Peter
> 
>     Ragi Burhum wrote:
> 
>         Hello there,
> 
>         The other day I got a question from someone that wanted to store a
>         relatively small amount of point features (~31K) that are close
>         to each
>         other in a 'highly compressed' format. He wants to be able to
>         query features
>         by proximity using coords. The reason for this requirement is
>         that he wants
>         to be able to use it in embedded devices with limited memory.
>         Yes I know
>         memory is cheap and keeps getting cheaper, but I still thought
>         it was an
>         interesting question.
> 
>         I can think of many ways to create a custom binary format to do
>         such a
>         thing, but I wanted to check the brain collective to hear what
>         people
>         thought. Of course spatialite and their new "compressed
>         geometries" feature
>         will come up in this conversation. I already sent an e-mail to
>         that group
>         for details about that :)
> 
>         I want to be able to avoid reinventing the wheel, so what are
>         your thoughts
>         on this?
> 
>         Thanks,
> 
>         - Ragi
> 
> 
> 
>         ------------------------------------------------------------------------
> 
> 
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
>     -- 
>     --------------------------------------------------------------------------------
>     Peter J Halls, GIS Advisor, University of York
>     Telephone: 01904 433806     Fax: 01904 433740
>     Snail mail: Computing Service, University of York, Heslington, York
>     YO10 5DD
>     This message has the status of a private and personal communication
>     --------------------------------------------------------------------------------
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From chaitanya.ch at gmail.com  Wed Jul  7 13:52:05 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jul  7 13:52:09 2010
Subject: [gdal-dev] Re: Bug(?): RIK-maps with Gdal 1.7.2 do not work
In-Reply-To: <i12bo6$ajn$1@dough.gmane.org>
References: <i0v6qa$q7e$1@dough.gmane.org>
	<AANLkTin0Soj9hIkuJ2iiJLTH930JFshWbFz2QAMVdp6N@mail.gmail.com>
	<i0vohv$3vu$1@dough.gmane.org>
	<201007061946.25719.even.rouault@mines-paris.org>
	<i0vr4e$en8$1@dough.gmane.org> <i12bo6$ajn$1@dough.gmane.org>
Message-ID: <AANLkTikS3cKYwPBN8SKe4VtHyp7FDmkyog2PTVz0r6i9@mail.gmail.com>

Tomas,

Yes, you can patch the file rikdataset.cpp in 1.7.2 using
http://trac.osgeo.org/gdal/changeset/19986 and compile it.
There have been no other changes.

On Wed, Jul 7, 2010 at 10:28 PM, Tomas R <monshi@home.se> wrote:

>  The fix in
> http://trac.osgeo.org/gdal/changeset/19985
> I can download and replace the file in the 1.7.2 version of gdal I have and
> compile gdal again and it will work?
>
> Or should I wait for 1.7.3?
>
> Yours
> Tomas
>
>
>
> Tomas R skrev 2010-07-06 20:02:
>
>   So a solution/a fix is available when 1.7.3 is released somewhere in the
>> future? That somewhere might occur when?
>>
>> If you are correct that is. But of course you are....
>>
>> :)
>>
>> /Tomas
>>
>> Even Rouault skrev 2010-07-06 19:46:
>>
>>> Chaitanya,
>>>
>>> Actually I think I've spotted the regression in
>>> http://trac.osgeo.org/gdal/changeset/17398, which was a 1.7 change.
>>>
>>> Namely the change from
>>>
>>> int i;
>>> for( i = 0; i<  LZW_CLEAR; i++ )
>>>    character[i] = i;
>>>
>>> to
>>>
>>> GByte j;
>>> for( j = 0; j<  LZW_CLEAR; j++ )
>>>    character[j] = j;
>>>
>>> The issue is that LZW_CLEAR = 256, so as j is an unsigned char -
>>> restricted
>>> from 0 to 255 -, the j<  LZW_CLEAR condition is always true, thus the
>>> infinite loop...
>>>
>>> This part should be reverted. If you really want to shut up the compiler
>>> warning character[i] = (GByte)i but in an ideal world, the compiler
>>> should be
>>> clever enough to see that there's no risk of data loss as i does fit in a
>>> GByte...
>>>
>>> Best regards,
>>>
>>> Even
>>>
>>> Le Tuesday 06 July 2010 19:18:56 Tomas R, vous avez ?crit :
>>>
>>>>   The reason for the out of memory exception was because the RIK-map I
>>>> tested with i wasfar to big to be read into a bitmap. I have now created
>>>> a smaller sample.
>>>>
>>>> With the small RIK-fil I can reproduce the problem with the precompiled
>>>> binaries from dyndns so problem is not only on my part. Using the small
>>>> map (1000x750 pixels) the demo app from Gdal 1.6.1 works as it should.
>>>> 1.7.2 hangs with no exception given.
>>>>
>>>> See ticket http://trac.osgeo.org/gdal/ticket/3674
>>>>
>>>> The post you answered  I tried to delete and somewhat succeeded... I
>>>> happened to compile the wrong file. When I thought I was compiling the
>>>> GDALReadDirect.cs I instead compiled the GDALRead.cs.
>>>>
>>>> Yours
>>>> Tomas
>>>>
>>>> Chaitanya kumar CH skrev 2010-07-06 18:24:
>>>>
>>>>> Tomas,
>>>>>
>>>>> I don't see any changes that could lead to infinite loops or memory
>>>>> leaks recently.
>>>>> If you can provide a sample dataset that gives this error please raise
>>>>> a ticket at http://trac.osgeo.org/gdal/newticket
>>>>>
>>>>> On Tue, Jul 6, 2010 at 6:43 PM, Tomas R<monshi@home.se
>>>>> <mailto:monshi@home.se>>  wrote:
>>>>>
>>>>>      I add - perhaps a problem with my comilation of Gdal.  Note when
>>>>>     I compile the GdalReadDirect.cs as it is and run it the result
>>>>>     differs from the result of the GdalReadDirect.exe found in
>>>>>     Swig\Csharp.
>>>>>     The latter gives the Raster dataset Paramets and runs until an Out
>>>>>     of memory Exception. Mine hangs and I have to abort it.
>>>>>
>>>>>     What have I done wrong this time?
>>>>>
>>>>>     Will try to recompile gdal and see if anything changes.
>>>>>
>>>>>     Tomas R skrev 2010-07-06 14:16:
>>>>>
>>>>>          I have a problem with RIK-maps and Gdal 1.7.2.
>>>>>
>>>>>         If I use Gdal 1.6.1 I have no problem reading the map but
>>>>>         doing the same with Gdal 1.7.2 my whole plugin/software hangs.
>>>>>
>>>>>         I have identified that Gdal stops at the line
>>>>>
>>>>>          band.ReadRaster(x, y, width, height, r, width, height, 0, 0);
>>>>>
>>>>>         where x, y, width and height are controlled to be within the
>>>>>         image to load.
>>>>>         This line taken from the routine
>>>>>          private void SaveBitmapPaletteDirect(...)
>>>>>         from the C# samples. I have adapted it to load only a portion
>>>>>         of the map into a bitmap.
>>>>>
>>>>>         I have compiled Gdal myself, perhaps a problem with the
>>>>>         compilation? Do I miss the RIK-driver or something? Or is
>>>>>         there an error in Gdal?  Or perhaps in the file(s)?
>>>>>         I have no problem opening and getting the properties of the
>>>>>         file, i.e. coordinate system and alike. It is when I try to
>>>>>         read the file that Gdal hangs.
>>>>>
>>>>>         I get no Exception, it just hangs and eats CPU-time.
>>>>>
>>>>>         I  compile the C# sample GDALReadDirect.cs from Gdal 1.7.2 and
>>>>>         adapt it to read a portion of a big RIK file (500x500 pixels)
>>>>>         and it stops at the same point in code. Error in the driver
>>>>>         for RIK perhaps? or error in the sample code?
>>>>>
>>>>>         Yours
>>>>>         Tomas
>>>>>
>>>>>
>>>>>     _______________________________________________
>>>>>     gdal-dev mailing list
>>>>>     gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
>>>>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Best regards,
>>>>> Chaitanya kumar CH.
>>>>> /t?a???nj?/ /k?m?r/
>>>>> +91-9494447584
>>>>> 17.2416N 80.1426E
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100707/5466695c/attachment-0001.html
From even.rouault at mines-paris.org  Wed Jul  7 13:52:57 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jul  7 13:53:20 2010
Subject: [gdal-dev] Re: Bug(?): RIK-maps with Gdal 1.7.2 do not work
In-Reply-To: <i12bo6$ajn$1@dough.gmane.org>
References: <i0v6qa$q7e$1@dough.gmane.org> <i0vr4e$en8$1@dough.gmane.org>
	<i12bo6$ajn$1@dough.gmane.org>
Message-ID: <201007071953.02363.even.rouault@mines-paris.org>

Le Wednesday 07 July 2010 18:58:45 Tomas R, vous avez ?crit?:
>   The fix in
> http://trac.osgeo.org/gdal/changeset/19985
> I can download and replace the file in the 1.7.2 version of gdal I have
> and compile gdal again and it will work?

Yes it should work just fine
From monshi at home.se  Wed Jul  7 14:29:37 2010
From: monshi at home.se (Tomas R)
Date: Wed Jul  7 14:29:52 2010
Subject: [gdal-dev] Re: Bug(?): RIK-maps with Gdal 1.7.2 do not work
In-Reply-To: <201007071953.02363.even.rouault@mines-paris.org>
References: <i0v6qa$q7e$1@dough.gmane.org>
	<i0vr4e$en8$1@dough.gmane.org>	<i12bo6$ajn$1@dough.gmane.org>
	<201007071953.02363.even.rouault@mines-paris.org>
Message-ID: <i12h2i$ud0$1@dough.gmane.org>

  nice :)

thanks.

Even Rouault skrev 2010-07-07 19:52:
> Le Wednesday 07 July 2010 18:58:45 Tomas R, vous avez ?crit :
>>    The fix in
>> http://trac.osgeo.org/gdal/changeset/19985
>> I can download and replace the file in the 1.7.2 version of gdal I have
>> and compile gdal again and it will work?
> Yes it should work just fine

From monshi at home.se  Wed Jul  7 16:33:02 2010
From: monshi at home.se (Tomas R)
Date: Wed Jul  7 16:33:17 2010
Subject: [gdal-dev] Re: Bug(?): RIK-maps with Gdal 1.7.2 do not work
In-Reply-To: <i12h2i$ud0$1@dough.gmane.org>
References: <i0v6qa$q7e$1@dough.gmane.org>	<i0vr4e$en8$1@dough.gmane.org>	<i12bo6$ajn$1@dough.gmane.org>	<201007071953.02363.even.rouault@mines-paris.org>
	<i12h2i$ud0$1@dough.gmane.org>
Message-ID: <i12o9u$oh9$1@dough.gmane.org>

  and it works, as expected, as it should.

Thanks.

Tomas R skrev 2010-07-07 20:29:
>  nice :)
>
> thanks.
>
> Even Rouault skrev 2010-07-07 19:52:
>> Le Wednesday 07 July 2010 18:58:45 Tomas R, vous avez ?crit :
>>>    The fix in
>>> http://trac.osgeo.org/gdal/changeset/19985
>>> I can download and replace the file in the 1.7.2 version of gdal I have
>>> and compile gdal again and it will work?
>> Yes it should work just fine

From chaitanya.ch at gmail.com  Thu Jul  8 01:56:40 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jul  8 01:56:42 2010
Subject: [gdal-dev] Re: histogram
In-Reply-To: <9615241D-46EC-4314-8411-0C36CFCB4BB7@mac.com>
References: <i0v6qa$q7e$1@dough.gmane.org>
	<AANLkTin0Soj9hIkuJ2iiJLTH930JFshWbFz2QAMVdp6N@mail.gmail.com>
	<i0vohv$3vu$1@dough.gmane.org>
	<201007061946.25719.even.rouault@mines-paris.org>
	<i0vr4e$en8$1@dough.gmane.org> <i12bo6$ajn$1@dough.gmane.org>
	<AANLkTikS3cKYwPBN8SKe4VtHyp7FDmkyog2PTVz0r6i9@mail.gmail.com>
	<9615241D-46EC-4314-8411-0C36CFCB4BB7@mac.com>
Message-ID: <AANLkTimCLQ9wYURyOgzmtFtmesOaLDVjevE9HUuw19De@mail.gmail.com>

Greg,

Histogram for each band of a raster can be viewed using the '-hist' option
with gdalinfo. However, the display is not pretty and will be slow.

On Thu, Jul 8, 2010 at 3:30 AM, Greg Coats <gregcoats@mac.com> wrote:

> http://www.gdal.org/classGDALRasterBand.html indicates that there is
> support within GDAL for image histograms.
> But I do not see a GDAL utility command at
> http://www.gdal.org/gdal_utilities.html to ask for either a statistical or
> graphic image histogram. Is there a command to ask for a histogram to be
> computed? Greg
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100708/6ede6c9d/attachment.html
From monshi at home.se  Thu Jul  8 02:01:10 2010
From: monshi at home.se (Tomas R)
Date: Thu Jul  8 02:01:22 2010
Subject: [gdal-dev] Re: C#: Retrieve boundary of coordinate system
In-Reply-To: <i0s08k$qee$1@dough.gmane.org>
References: <i0s08k$qee$1@dough.gmane.org>
Message-ID: <i13pj7$c23$1@dough.gmane.org>

  No one?

Ok, I guess then that there are no common function/method of doing this. 
My approach will the be trial and error. From WGS 84 transform to the 
local coordinate system and back again to WGS84 and check if the result 
seems valid.

Should work or any expert here have another solution?

Yours
Tomas

Tomas R skrev 2010-07-05 09:05:
>  Attacking GDAL via the C# interface and I have a question
>
> Have set up two (Osr) SpatialReferences  and transformations to and 
> form both. One system is WGS84 and the other is unknown.
>
> To get a consistent behaviour I need to retrieve the boundary, in 
> WGS84 coordinates, of the unknown system. If known I can fallback on 
> WGS84 when calls outside the scope of the coordinates system are made.
>  Should be easy to read of some attribute of the SpatialReference or 
> alike. But which/how?
>
> Any suggestions?
>
> Or how should I solve it - in general words:
> My application maps coordinates from and to WGS84 and serves them to 
> another via calls like PixelToGPS and GPSToPixel. The originating 
> coordinate system is always WGS84. Need to handle calls made outside 
> the scope of the coordinate system and my approach, to get a 
> consisting behaviour of the two functions, is to revert to WGS84 which 
> is defined at all possible points.
>
>
> Yours
> Tomas

From fmarkham at gmail.com  Thu Jul  8 02:14:10 2010
From: fmarkham at gmail.com (Francis Markham)
Date: Thu Jul  8 02:14:36 2010
Subject: [gdal-dev] Re: C#: Retrieve boundary of coordinate system
In-Reply-To: <i13pj7$c23$1@dough.gmane.org>
References: <i0s08k$qee$1@dough.gmane.org> <i13pj7$c23$1@dough.gmane.org>
Message-ID: <AANLkTim0xmQjRI4GB8zzbvaSwtuTIRvI8tNInCu7aKU8@mail.gmail.com>

I think the EPSG dictionary defines areas of validity for the defined
coordinate systems.  That could be a starting point, although there
may be a better solution

-Francis

On 8 July 2010 16:01, Tomas R <monshi@home.se> wrote:
> ?No one?
>
> Ok, I guess then that there are no common function/method of doing this. My
> approach will the be trial and error. From WGS 84 transform to the local
> coordinate system and back again to WGS84 and check if the result seems
> valid.
>
> Should work or any expert here have another solution?
>
> Yours
> Tomas
>
> Tomas R skrev 2010-07-05 09:05:
>>
>> ?Attacking GDAL via the C# interface and I have a question
>>
>> Have set up two (Osr) SpatialReferences ?and transformations to and form
>> both. One system is WGS84 and the other is unknown.
>>
>> To get a consistent behaviour I need to retrieve the boundary, in WGS84
>> coordinates, of the unknown system. If known I can fallback on WGS84 when
>> calls outside the scope of the coordinates system are made.
>> ?Should be easy to read of some attribute of the SpatialReference or
>> alike. But which/how?
>>
>> Any suggestions?
>>
>> Or how should I solve it - in general words:
>> My application maps coordinates from and to WGS84 and serves them to
>> another via calls like PixelToGPS and GPSToPixel. The originating coordinate
>> system is always WGS84. Need to handle calls made outside the scope of the
>> coordinate system and my approach, to get a consisting behaviour of the two
>> functions, is to revert to WGS84 which is defined at all possible points.
>>
>>
>> Yours
>> Tomas
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From Alexander.Plum at cae.de  Thu Jul  8 02:24:25 2010
From: Alexander.Plum at cae.de (Alexander Plum)
Date: Thu Jul  8 02:24:31 2010
Subject: AW: [gdal-dev] Identification of neighbouring OGRGeometries
In-Reply-To: <AANLkTin429zrdxpmTm50jBEZtROxFmazXiKXcSbTU7VF@mail.gmail.com>
References: <74C7EC991D7DFB41A525D22BFD4E090805B09C7A9E@sdestex2>
	<AANLkTim5c-7Ja7vEcnpI7V4ZBS5lqtILetubKJli4hkL@mail.gmail.com>
	<74C7EC991D7DFB41A525D22BFD4E090805B09C7AA2@sdestex2>,
	<AANLkTin429zrdxpmTm50jBEZtROxFmazXiKXcSbTU7VF@mail.gmail.com>
Message-ID: <74C7EC991D7DFB41A525D22BFD4E090805B09C7AA7@sdestex2>

Hi,

first of all I'm collecting OGRGeometries from OGRFeatures. The OGRFeatures exist in a OGRLayer in which the function 'GDALContourGenerate' has written.
I put these OGRGeometries (these geometries should later be painted) into a std::vector. Before putting the next OGRGeometry into this vector it shall be checked
which neighbouring OGRGeometries the current OGRGeometry possesses. But I do not know how I get these (two) neighbouring OGRGeometries.
Later on the distance to both OGRGeometries shall be calculated with help of the function 'OGR_G_Distance'. If the distance is too small the current OGRGeometry will not be put
into the vector collecting OGRGeometries.

I hope you can get me and thanks for your support,

Alex
________________________________________
Von: Chaitanya kumar CH [chaitanya.ch@gmail.com]
Gesendet: Mittwoch, 7. Juli 2010 20:05
An: Alexander Plum
Betreff: Re: [gdal-dev] Identification of neighbouring OGRGeometries

Alex,

Can you explain me what 'highline' means?

On Wed, Jul 7, 2010 at 5:01 PM, Alexander Plum <Alexander.Plum@cae.de<mailto:Alexander.Plum@cae.de>> wrote:
Look,

I am working on a function which paints OGRGeometries representing highlines.
Before painting them I want to make sure wether the new OGRGeometry should be painted or not. If the distance to the two neighbours is too near to its both neighbours, the
new highlinie should not be painted. I am looking foward to employ the function OGR_G_Distance() for this case.
But first of all I want to identify the new highline's two neighbours...

Best regards,
Alex
________________________________________
Von: Chaitanya kumar CH [chaitanya.ch<http://chaitanya.ch>@gmail.com<http://gmail.com>]
Gesendet: Mittwoch, 7. Juli 2010 13:19
An: Alexander Plum
Cc: gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
Betreff: Re: [gdal-dev] Identification of neighbouring OGRGeometries

Alex,

If I understand you correctly, the method OGRGeometry::Touches() can help you.
You can see it's description and similar functions at http://gdal.org/ogr/classOGRGeometry.html


On Wed, Jul 7, 2010 at 2:17 PM, Alexander Plum <Alexander.Plum@cae.de<mailto:Alexander.Plum@cae.de><mailto:Alexander.Plum@cae.de<mailto:Alexander.Plum@cae.de>>> wrote:
Hello there,

is it possible to identify the two neighbouring OGRGeometries of another OGRGeometry??
Therefore I miss an adequate function in the GDAL-API.

Greets,
Alex

--
This email was Anti Virus checked by CAE
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org><mailto:gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
From monshi at home.se  Thu Jul  8 02:53:52 2010
From: monshi at home.se (Tomas R)
Date: Thu Jul  8 02:54:09 2010
Subject: [gdal-dev] Re: C#: Retrieve boundary of coordinate system
In-Reply-To: <AANLkTim0xmQjRI4GB8zzbvaSwtuTIRvI8tNInCu7aKU8@mail.gmail.com>
References: <i0s08k$qee$1@dough.gmane.org> <i13pj7$c23$1@dough.gmane.org>
	<AANLkTim0xmQjRI4GB8zzbvaSwtuTIRvI8tNInCu7aKU8@mail.gmail.com>
Message-ID: <i13sm1$kai$1@dough.gmane.org>

  You mean
  area_of_use_code="2847"
which gives
<Area area_code="2847" area_name="Sweden - 2.5 gon W" 
area_of_use="Sweden. For medium and small scale applications:- all 
country. For large scale applications:- communes between approximately 
14 deg 40 min and 16 deg 55 min East. See information source for map." 
information_source="Lantmateriverket (National Land Survey of Sweden). 
http://www.lm.se/geodesi/refsys/rt/rt_projections.html" 
data_source="EPSG" revision_date="2003-06-27" deprecated="0"/>


Or is it from this line
<3021> +proj=tmerc +lat_0=0 +lon_0=15.80827777777778 +k=1.000000 
+x_0=1500000 +y_0=0 +ellps=bessel +units=m +no_defs <>

or from the WKT
PROJCS["RT90 2.5 gon 
V",GEOGCS["RT90",DATUM["Rikets_koordinatsystem_1990",SPHEROID["Bessel 
1841",6377397.155,299.1528128,AUTHORITY["EPSG","7004"]],TOWGS84[414.1055246174,41.3265500042,603.0582474221,-0.8551163377,2.1413174055,-7.0227298286,0],AUTHORITY["EPSG","6124"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.01745329251994328,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4124"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",15.80827777777778],PARAMETER["scale_factor",1],PARAMETER["false_easting",1500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","3021"]]

or some other file/source?
All data regarding the Swedish RT90 2.5 V  where only the WKT is 
complete with toWGS84 parameters.
A not so easy task, and not reliable, to retrieve the info from there I 
would guess.

My goal is not to be 100% accurate at all points in the world, my goal 
is to be consistent in the answers to the calls I get. That is the 
functions PixelToGPS and GPSToPixel should return "compatible" results 
at all parts in the world so that the main application won't have any 
risk of getting confused and run into infinite loops or alike.
not to hard to step from (in WGS84) 180 to -180 and +85 to -85 and check 
for every  fifth degree, or so, if the transformation is valid.  When 
transformation not valid the plan is to switch to WGS84 which seems to 
work even though results can be interesting in the boundary between the 
coordinate systems.

But still, if the info already exists somewhere why not use it but I do 
not know if that info exist in the data I have available.

Thanks anyway
Tomas

Francis Markham skrev 2010-07-08 08:14:
> I think the EPSG dictionary defines areas of validity for the defined
> coordinate systems.  That could be a starting point, although there
> may be a better solution
>
> -Francis
>
> On 8 July 2010 16:01, Tomas R<monshi@home.se>  wrote:
>>   No one?
>>
>> Ok, I guess then that there are no common function/method of doing this. My
>> approach will the be trial and error. From WGS 84 transform to the local
>> coordinate system and back again to WGS84 and check if the result seems
>> valid.
>>
>> Should work or any expert here have another solution?
>>
>> Yours
>> Tomas
>>
>> Tomas R skrev 2010-07-05 09:05:
>>>   Attacking GDAL via the C# interface and I have a question
>>>
>>> Have set up two (Osr) SpatialReferences  and transformations to and form
>>> both. One system is WGS84 and the other is unknown.
>>>
>>> To get a consistent behaviour I need to retrieve the boundary, in WGS84
>>> coordinates, of the unknown system. If known I can fallback on WGS84 when
>>> calls outside the scope of the coordinates system are made.
>>>   Should be easy to read of some attribute of the SpatialReference or
>>> alike. But which/how?
>>>
>>> Any suggestions?
>>>
>>> Or how should I solve it - in general words:
>>> My application maps coordinates from and to WGS84 and serves them to
>>> another via calls like PixelToGPS and GPSToPixel. The originating coordinate
>>> system is always WGS84. Need to handle calls made outside the scope of the
>>> coordinate system and my approach, to get a consisting behaviour of the two
>>> functions, is to revert to WGS84 which is defined at all possible points.
>>>
>>>
>>> Yours
>>> Tomas
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>

From chaitanya.ch at gmail.com  Thu Jul  8 03:25:03 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jul  8 03:25:06 2010
Subject: [gdal-dev] Identification of neighbouring OGRGeometries
In-Reply-To: <74C7EC991D7DFB41A525D22BFD4E090805B09C7AA7@sdestex2>
References: <74C7EC991D7DFB41A525D22BFD4E090805B09C7A9E@sdestex2>
	<AANLkTim5c-7Ja7vEcnpI7V4ZBS5lqtILetubKJli4hkL@mail.gmail.com>
	<74C7EC991D7DFB41A525D22BFD4E090805B09C7AA2@sdestex2>
	<AANLkTin429zrdxpmTm50jBEZtROxFmazXiKXcSbTU7VF@mail.gmail.com>
	<74C7EC991D7DFB41A525D22BFD4E090805B09C7AA7@sdestex2>
Message-ID: <AANLkTikxi1bXFwRM7XdZk3conyFo6FmX_vP7SheFIJu4@mail.gmail.com>

Alex,

There can be more than two neighbours for an isohypse (elevation contour
line). However, all the neighbours will have the same elevation or one
elevation interval up or down. So, if you created elevation contours for
every 10 meters, a contour at elevation 40 can have neighbours with
elevation 30, 40 and 50 meters. You may have to search for proximity with
all these contours.

IMO, an easier and faster way to guess this is by comparing the minimum and
maximum elevation values in the raster's area. This will also give a better
idea of the terrain's topology.

On Thu, Jul 8, 2010 at 11:54 AM, Alexander Plum <Alexander.Plum@cae.de>wrote:

> Hi,
>
> first of all I'm collecting OGRGeometries from OGRFeatures. The OGRFeatures
> exist in a OGRLayer in which the function 'GDALContourGenerate' has written.
> I put these OGRGeometries (these geometries should later be painted) into a
> std::vector. Before putting the next OGRGeometry into this vector it shall
> be checked
> which neighbouring OGRGeometries the current OGRGeometry possesses. But I
> do not know how I get these (two) neighbouring OGRGeometries.
> Later on the distance to both OGRGeometries shall be calculated with help
> of the function 'OGR_G_Distance'. If the distance is too small the current
> OGRGeometry will not be put
> into the vector collecting OGRGeometries.
>
> I hope you can get me and thanks for your support,
>
> Alex
> ________________________________________
> Von: Chaitanya kumar CH [chaitanya.ch@gmail.com]
> Gesendet: Mittwoch, 7. Juli 2010 20:05
> An: Alexander Plum
> Betreff: Re: [gdal-dev] Identification of neighbouring OGRGeometries
>
> Alex,
>
> Can you explain me what 'highline' means?
>
> On Wed, Jul 7, 2010 at 5:01 PM, Alexander Plum <Alexander.Plum@cae.de
> <mailto:Alexander.Plum@cae.de>> wrote:
> Look,
>
> I am working on a function which paints OGRGeometries representing
> highlines.
> Before painting them I want to make sure wether the new OGRGeometry should
> be painted or not. If the distance to the two neighbours is too near to its
> both neighbours, the
> new highlinie should not be painted. I am looking foward to employ the
> function OGR_G_Distance() for this case.
> But first of all I want to identify the new highline's two neighbours...
>
> Best regards,
> Alex
> ________________________________________
> Von: Chaitanya kumar CH [chaitanya.ch<http://chaitanya.ch>@gmail.com<
> http://gmail.com>]
> Gesendet: Mittwoch, 7. Juli 2010 13:19
> An: Alexander Plum
> Cc: gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
> Betreff: Re: [gdal-dev] Identification of neighbouring OGRGeometries
>
> Alex,
>
> If I understand you correctly, the method OGRGeometry::Touches() can help
> you.
> You can see it's description and similar functions at
> http://gdal.org/ogr/classOGRGeometry.html
>
>
> On Wed, Jul 7, 2010 at 2:17 PM, Alexander Plum <Alexander.Plum@cae.de
> <mailto:Alexander.Plum@cae.de><mailto:Alexander.Plum@cae.de<mailto:
> Alexander.Plum@cae.de>>> wrote:
> Hello there,
>
> is it possible to identify the two neighbouring OGRGeometries of another
> OGRGeometry??
> Therefore I miss an adequate function in the GDAL-API.
>
> Greets,
> Alex
>
> --
> This email was Anti Virus checked by CAE
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org><mailto:
> gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100708/33658231/attachment.html
From fmarkham at gmail.com  Thu Jul  8 04:25:05 2010
From: fmarkham at gmail.com (Francis Markham)
Date: Thu Jul  8 04:25:36 2010
Subject: [gdal-dev] Re: C#: Retrieve boundary of coordinate system
In-Reply-To: <i13sm1$kai$1@dough.gmane.org>
References: <i0s08k$qee$1@dough.gmane.org> <i13pj7$c23$1@dough.gmane.org> 
	<AANLkTim0xmQjRI4GB8zzbvaSwtuTIRvI8tNInCu7aKU8@mail.gmail.com> 
	<i13sm1$kai$1@dough.gmane.org>
Message-ID: <AANLkTilLPvKE1w9FTyFCZ9E0dczsY_bNOK1YzQeQe_k6@mail.gmail.com>

Yeah, I mean the "area of use" as EPSG call it.  You can download the
EPSG database which contains a table with areas of use from
http://www.epsg.org/Geodetic.html and extract that for use in your
application if that is going to be helpful for you.

-F

On 8 July 2010 16:53, Tomas R <monshi@home.se> wrote:
> ?You mean
> ?area_of_use_code="2847"
> which gives
> <Area area_code="2847" area_name="Sweden - 2.5 gon W" area_of_use="Sweden.
> For medium and small scale applications:- all country. For large scale
> applications:- communes between approximately 14 deg 40 min and 16 deg 55
> min East. See information source for map."
> information_source="Lantmateriverket (National Land Survey of Sweden).
> http://www.lm.se/geodesi/refsys/rt/rt_projections.html" data_source="EPSG"
> revision_date="2003-06-27" deprecated="0"/>
>
>
> Or is it from this line
> <3021> +proj=tmerc +lat_0=0 +lon_0=15.80827777777778 +k=1.000000
> +x_0=1500000 +y_0=0 +ellps=bessel +units=m +no_defs <>
>
> or from the WKT
> PROJCS["RT90 2.5 gon
> V",GEOGCS["RT90",DATUM["Rikets_koordinatsystem_1990",SPHEROID["Bessel
> 1841",6377397.155,299.1528128,AUTHORITY["EPSG","7004"]],TOWGS84[414.1055246174,41.3265500042,603.0582474221,-0.8551163377,2.1413174055,-7.0227298286,0],AUTHORITY["EPSG","6124"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.01745329251994328,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4124"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",15.80827777777778],PARAMETER["scale_factor",1],PARAMETER["false_easting",1500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","3021"]]
>
> or some other file/source?
> All data regarding the Swedish RT90 2.5 V ?where only the WKT is complete
> with toWGS84 parameters.
> A not so easy task, and not reliable, to retrieve the info from there I
> would guess.
>
> My goal is not to be 100% accurate at all points in the world, my goal is to
> be consistent in the answers to the calls I get. That is the functions
> PixelToGPS and GPSToPixel should return "compatible" results at all parts in
> the world so that the main application won't have any risk of getting
> confused and run into infinite loops or alike.
> not to hard to step from (in WGS84) 180 to -180 and +85 to -85 and check for
> every ?fifth degree, or so, if the transformation is valid. ?When
> transformation not valid the plan is to switch to WGS84 which seems to work
> even though results can be interesting in the boundary between the
> coordinate systems.
>
> But still, if the info already exists somewhere why not use it but I do not
> know if that info exist in the data I have available.
>
> Thanks anyway
> Tomas
>
> Francis Markham skrev 2010-07-08 08:14:
>>
>> I think the EPSG dictionary defines areas of validity for the defined
>> coordinate systems. ?That could be a starting point, although there
>> may be a better solution
>>
>> -Francis
>>
>> On 8 July 2010 16:01, Tomas R<monshi@home.se> ?wrote:
>>>
>>> ?No one?
>>>
>>> Ok, I guess then that there are no common function/method of doing this.
>>> My
>>> approach will the be trial and error. From WGS 84 transform to the local
>>> coordinate system and back again to WGS84 and check if the result seems
>>> valid.
>>>
>>> Should work or any expert here have another solution?
>>>
>>> Yours
>>> Tomas
>>>
>>> Tomas R skrev 2010-07-05 09:05:
>>>>
>>>> ?Attacking GDAL via the C# interface and I have a question
>>>>
>>>> Have set up two (Osr) SpatialReferences ?and transformations to and form
>>>> both. One system is WGS84 and the other is unknown.
>>>>
>>>> To get a consistent behaviour I need to retrieve the boundary, in WGS84
>>>> coordinates, of the unknown system. If known I can fallback on WGS84
>>>> when
>>>> calls outside the scope of the coordinates system are made.
>>>> ?Should be easy to read of some attribute of the SpatialReference or
>>>> alike. But which/how?
>>>>
>>>> Any suggestions?
>>>>
>>>> Or how should I solve it - in general words:
>>>> My application maps coordinates from and to WGS84 and serves them to
>>>> another via calls like PixelToGPS and GPSToPixel. The originating
>>>> coordinate
>>>> system is always WGS84. Need to handle calls made outside the scope of
>>>> the
>>>> coordinate system and my approach, to get a consisting behaviour of the
>>>> two
>>>> functions, is to revert to WGS84 which is defined at all possible
>>>> points.
>>>>
>>>>
>>>> Yours
>>>> Tomas
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From vizziello at consorzio-innova.it  Thu Jul  8 04:54:48 2010
From: vizziello at consorzio-innova.it (vizziello)
Date: Thu Jul  8 04:54:49 2010
Subject: [gdal-dev] Bug in SetGCPs method of GDALDataset class??
Message-ID: <1278579288292-5269103.post@n2.nabble.com>


I have a problem with SetGCPs method in GDAL python binding. 

My gdal version is 1.6.3.

Seems impossible assigns the passed set of GCPs to dataset:

newdataset.SetGCPs(ngcp, newgcp, gcpProjection)

Where:
     - ngcp      = Number of GCP
     - newgcp  = New gcp list
     - gcpProjection = Gcp projection

I have this error code:

/usr/lib/python2.5/site-packages/osgeo/gdal.pyc in SetGCPs(self, *args)
    584     def SetGCPs(self, *args):
    585         """SetGCPs(self, int nGCPs, char pszGCPProjection) ->
CPLErr"""
--> 586         return _gdal.Dataset_SetGCPs(self, *args)
    587 
    588     def FlushCache(self, *args):

TypeError: Dataset_SetGCPs() takes exactly 3 arguments (4 given)


Is a bug or error in the sample code?

Greets,
Giuseppe

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Bug-in-SetGCPs-method-of-GDALDataset-class-tp5269103p5269103.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Thu Jul  8 05:04:36 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jul  8 05:04:39 2010
Subject: [gdal-dev] Bug in SetGCPs method of GDALDataset class??
In-Reply-To: <1278579288292-5269103.post@n2.nabble.com>
References: <1278579288292-5269103.post@n2.nabble.com>
Message-ID: <AANLkTinaTmdKVpEANyx4atlFFSd4lsqJ4NPO6GvObPvS@mail.gmail.com>

Giuseppe,

Sorry for the confusion but the Python interface doesn't need the first
argument, the number of GCPs.
Examples:
http://trac.osgeo.org/gdal/browser/trunk/autotest/gcore/tiff_write.py#L236
http://trac.osgeo.org/gdal/browser/trunk/autotest/warp/warp.py#L695

On Thu, Jul 8, 2010 at 2:24 PM, vizziello <vizziello@consorzio-innova.it>wrote:

>
> I have a problem with SetGCPs method in GDAL python binding.
>
> My gdal version is 1.6.3.
>
> Seems impossible assigns the passed set of GCPs to dataset:
>
> newdataset.SetGCPs(ngcp, newgcp, gcpProjection)
>
> Where:
>     - ngcp      = Number of GCP
>     - newgcp  = New gcp list
>     - gcpProjection = Gcp projection
>
> I have this error code:
>
> /usr/lib/python2.5/site-packages/osgeo/gdal.pyc in SetGCPs(self, *args)
>    584     def SetGCPs(self, *args):
>    585         """SetGCPs(self, int nGCPs, char pszGCPProjection) ->
> CPLErr"""
> --> 586         return _gdal.Dataset_SetGCPs(self, *args)
>    587
>    588     def FlushCache(self, *args):
>
> TypeError: Dataset_SetGCPs() takes exactly 3 arguments (4 given)
>
>
> Is a bug or error in the sample code?
>
> Greets,
> Giuseppe
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Bug-in-SetGCPs-method-of-GDALDataset-class-tp5269103p5269103.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100708/47a9d025/attachment.html
From vizziello at consorzio-innova.it  Thu Jul  8 05:34:59 2010
From: vizziello at consorzio-innova.it (vizziello)
Date: Thu Jul  8 05:35:01 2010
Subject: [gdal-dev] Re: Bug in SetGCPs method of GDALDataset class??
In-Reply-To: <AANLkTinaTmdKVpEANyx4atlFFSd4lsqJ4NPO6GvObPvS@mail.gmail.com>
References: <1278579288292-5269103.post@n2.nabble.com>
	<AANLkTinaTmdKVpEANyx4atlFFSd4lsqJ4NPO6GvObPvS@mail.gmail.com>
Message-ID: <1278581699432-5269244.post@n2.nabble.com>


Perfect!!

Thank you so much!

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Bug-in-SetGCPs-method-of-GDALDataset-class-tp5269103p5269244.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From monshi at home.se  Thu Jul  8 06:02:12 2010
From: monshi at home.se (Tomas R)
Date: Thu Jul  8 06:02:26 2010
Subject: [gdal-dev] Re: C#: Retrieve boundary of coordinate system
In-Reply-To: <AANLkTilLPvKE1w9FTyFCZ9E0dczsY_bNOK1YzQeQe_k6@mail.gmail.com>
References: <i0s08k$qee$1@dough.gmane.org> <i13pj7$c23$1@dough.gmane.org>
	<AANLkTim0xmQjRI4GB8zzbvaSwtuTIRvI8tNInCu7aKU8@mail.gmail.com>
	<i13sm1$kai$1@dough.gmane.org>
	<AANLkTilLPvKE1w9FTyFCZ9E0dczsY_bNOK1YzQeQe_k6@mail.gmail.com>
Message-ID: <i147n6$nri$1@dough.gmane.org>

  Ah, ok.

Hard to find all details by yourself. :)
Finds in the database, for example, that area 2847 is valid between Lat 
56 S, Lat 68 N, Lon 14 W and Lon 17 E approximately.

Just need to get it to a format my program like, XML will do fine and 
Excel should be able to do it.

Thanks
Tomas




Francis Markham skrev 2010-07-08 10:25:
> Yeah, I mean the "area of use" as EPSG call it.  You can download the
> EPSG database which contains a table with areas of use from
> http://www.epsg.org/Geodetic.html and extract that for use in your
> application if that is going to be helpful for you.
>
> -F
>
> On 8 July 2010 16:53, Tomas R<monshi@home.se>  wrote:
>>   You mean
>>   area_of_use_code="2847"
>> which gives
>> <Area area_code="2847" area_name="Sweden - 2.5 gon W" area_of_use="Sweden.
>> For medium and small scale applications:- all country. For large scale
>> applications:- communes between approximately 14 deg 40 min and 16 deg 55
>> min East. See information source for map."
>> information_source="Lantmateriverket (National Land Survey of Sweden).
>> http://www.lm.se/geodesi/refsys/rt/rt_projections.html" data_source="EPSG"
>> revision_date="2003-06-27" deprecated="0"/>
>>
>>
>> Or is it from this line
>> <3021>  +proj=tmerc +lat_0=0 +lon_0=15.80827777777778 +k=1.000000
>> +x_0=1500000 +y_0=0 +ellps=bessel +units=m +no_defs<>
>>
>> or from the WKT
>> PROJCS["RT90 2.5 gon
>> V",GEOGCS["RT90",DATUM["Rikets_koordinatsystem_1990",SPHEROID["Bessel
>> 1841",6377397.155,299.1528128,AUTHORITY["EPSG","7004"]],TOWGS84[414.1055246174,41.3265500042,603.0582474221,-0.8551163377,2.1413174055,-7.0227298286,0],AUTHORITY["EPSG","6124"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.01745329251994328,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4124"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",15.80827777777778],PARAMETER["scale_factor",1],PARAMETER["false_easting",1500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","3021"]]
>>
>> or some other file/source?
>> All data regarding the Swedish RT90 2.5 V  where only the WKT is complete
>> with toWGS84 parameters.
>> A not so easy task, and not reliable, to retrieve the info from there I
>> would guess.
>>
>> My goal is not to be 100% accurate at all points in the world, my goal is to
>> be consistent in the answers to the calls I get. That is the functions
>> PixelToGPS and GPSToPixel should return "compatible" results at all parts in
>> the world so that the main application won't have any risk of getting
>> confused and run into infinite loops or alike.
>> not to hard to step from (in WGS84) 180 to -180 and +85 to -85 and check for
>> every  fifth degree, or so, if the transformation is valid.  When
>> transformation not valid the plan is to switch to WGS84 which seems to work
>> even though results can be interesting in the boundary between the
>> coordinate systems.
>>
>> But still, if the info already exists somewhere why not use it but I do not
>> know if that info exist in the data I have available.
>>
>> Thanks anyway
>> Tomas
>>
>> Francis Markham skrev 2010-07-08 08:14:
>>> I think the EPSG dictionary defines areas of validity for the defined
>>> coordinate systems.  That could be a starting point, although there
>>> may be a better solution
>>>
>>> -Francis
>>>
>>> On 8 July 2010 16:01, Tomas R<monshi@home.se>    wrote:
>>>>   No one?
>>>>
>>>> Ok, I guess then that there are no common function/method of doing this.
>>>> My
>>>> approach will the be trial and error. From WGS 84 transform to the local
>>>> coordinate system and back again to WGS84 and check if the result seems
>>>> valid.
>>>>
>>>> Should work or any expert here have another solution?
>>>>
>>>> Yours
>>>> Tomas
>>>>
>>>> Tomas R skrev 2010-07-05 09:05:
>>>>>   Attacking GDAL via the C# interface and I have a question
>>>>>
>>>>> Have set up two (Osr) SpatialReferences  and transformations to and form
>>>>> both. One system is WGS84 and the other is unknown.
>>>>>
>>>>> To get a consistent behaviour I need to retrieve the boundary, in WGS84
>>>>> coordinates, of the unknown system. If known I can fallback on WGS84
>>>>> when
>>>>> calls outside the scope of the coordinates system are made.
>>>>>   Should be easy to read of some attribute of the SpatialReference or
>>>>> alike. But which/how?
>>>>>
>>>>> Any suggestions?
>>>>>
>>>>> Or how should I solve it - in general words:
>>>>> My application maps coordinates from and to WGS84 and serves them to
>>>>> another via calls like PixelToGPS and GPSToPixel. The originating
>>>>> coordinate
>>>>> system is always WGS84. Need to handle calls made outside the scope of
>>>>> the
>>>>> coordinate system and my approach, to get a consisting behaviour of the
>>>>> two
>>>>> functions, is to revert to WGS84 which is defined at all possible
>>>>> points.
>>>>>
>>>>>
>>>>> Yours
>>>>> Tomas
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>

From fieliesm at gmail.com  Thu Jul  8 06:12:59 2010
From: fieliesm at gmail.com (Francois Maass)
Date: Thu Jul  8 06:13:02 2010
Subject: [gdal-dev] GDALDataset creation from image subset
Message-ID: <AANLkTin3csm6Ye3EsrhnTu1S-5OqbC2uu88YBCaDIHx1@mail.gmail.com>

Good day list!

I am trying to create a GDALDataset from a certain area or subset of an
Image.
I have the following:
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100708/e823fcdf/attachment.html
From fieliesm at gmail.com  Thu Jul  8 06:17:54 2010
From: fieliesm at gmail.com (Francois Maass)
Date: Thu Jul  8 06:17:56 2010
Subject: [gdal-dev] GDALDataset creation from Image subset
Message-ID: <AANLkTiljm5-mphHk9IT19CnOKq0-QNAbL6DMN_0a3mzg@mail.gmail.com>

Good day list!

I have an image (Tiff or Pix) read into a GDALDataset as well as the
following:
1. The (x,y) coordinates/offset of the top-left corner of a block within the
image,
2. The width and length of the block

I want to create a GDALDataset that only contains this specific block of the
given image.
Simply put, I want to extract a little block or chip from an existing
GDALDataset, and put it into its own GDALDataset.

Can this be done, and how?
Thank you for your time and efforts!

Warm Regards,
Francois Maass
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100708/568ed542/attachment.html
From chaitanya.ch at gmail.com  Thu Jul  8 06:33:10 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jul  8 06:33:13 2010
Subject: [gdal-dev] GDALDataset creation from Image subset
In-Reply-To: <AANLkTiljm5-mphHk9IT19CnOKq0-QNAbL6DMN_0a3mzg@mail.gmail.com>
References: <AANLkTiljm5-mphHk9IT19CnOKq0-QNAbL6DMN_0a3mzg@mail.gmail.com>
Message-ID: <AANLkTinKwOfhjRKWo2V5BVfAY6Lzw5ZbT-Txb3Ar7Hjd@mail.gmail.com>

Francois,

This is what gdal_translate utility does with the '-srcwin' option. You can
see it's code at
http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdal_translate.cpp
You need to translate the projection window according to the block within
the image. For that you have to modify the transformation matrix from
GDALGetGeoTransform() and and set a new one with GDALSetGeoTransform().

On Thu, Jul 8, 2010 at 3:47 PM, Francois Maass <fieliesm@gmail.com> wrote:

> Good day list!
>
> I have an image (Tiff or Pix) read into a GDALDataset as well as the
> following:
> 1. The (x,y) coordinates/offset of the top-left corner of a block within
> the image,
> 2. The width and length of the block
>
> I want to create a GDALDataset that only contains this specific block of
> the given image.
> Simply put, I want to extract a little block or chip from an existing
> GDALDataset, and put it into its own GDALDataset.
>
> Can this be done, and how?
> Thank you for your time and efforts!
>
> Warm Regards,
> Francois Maass
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100708/bf1182a3/attachment.html
From monshi at home.se  Thu Jul  8 07:31:32 2010
From: monshi at home.se (Tomas R)
Date: Thu Jul  8 07:31:46 2010
Subject: [gdal-dev] Re: C#: Retrieve boundary of coordinate system
In-Reply-To: <AANLkTilLPvKE1w9FTyFCZ9E0dczsY_bNOK1YzQeQe_k6@mail.gmail.com>
References: <i0s08k$qee$1@dough.gmane.org> <i13pj7$c23$1@dough.gmane.org>
	<AANLkTim0xmQjRI4GB8zzbvaSwtuTIRvI8tNInCu7aKU8@mail.gmail.com>
	<i13sm1$kai$1@dough.gmane.org>
	<AANLkTilLPvKE1w9FTyFCZ9E0dczsY_bNOK1YzQeQe_k6@mail.gmail.com>
Message-ID: <i14cul$9pj$1@dough.gmane.org>

  Looking at the data - can I from the data in the database maximize the 
amount of transformations I can do? As said I am only interested in 
to/form WGS84, perhaps there is data hidden in that database that can 
help gdal, help me set up gdal, to do the transformation required. The 
data I have now often lacks the toWGS84 components...

Yours
Tomas



Francis Markham skrev 2010-07-08 10:25:
> Yeah, I mean the "area of use" as EPSG call it.  You can download the
> EPSG database which contains a table with areas of use from
> http://www.epsg.org/Geodetic.html and extract that for use in your
> application if that is going to be helpful for you.
>
> -F
>
> On 8 July 2010 16:53, Tomas R<monshi@home.se>  wrote:
>>   You mean
>>   area_of_use_code="2847"
>> which gives
>> <Area area_code="2847" area_name="Sweden - 2.5 gon W" area_of_use="Sweden.
>> For medium and small scale applications:- all country. For large scale
>> applications:- communes between approximately 14 deg 40 min and 16 deg 55
>> min East. See information source for map."
>> information_source="Lantmateriverket (National Land Survey of Sweden).
>> http://www.lm.se/geodesi/refsys/rt/rt_projections.html" data_source="EPSG"
>> revision_date="2003-06-27" deprecated="0"/>
>>
>>
>> Or is it from this line
>> <3021>  +proj=tmerc +lat_0=0 +lon_0=15.80827777777778 +k=1.000000
>> +x_0=1500000 +y_0=0 +ellps=bessel +units=m +no_defs<>
>>
>> or from the WKT
>> PROJCS["RT90 2.5 gon
>> V",GEOGCS["RT90",DATUM["Rikets_koordinatsystem_1990",SPHEROID["Bessel
>> 1841",6377397.155,299.1528128,AUTHORITY["EPSG","7004"]],TOWGS84[414.1055246174,41.3265500042,603.0582474221,-0.8551163377,2.1413174055,-7.0227298286,0],AUTHORITY["EPSG","6124"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.01745329251994328,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4124"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",15.80827777777778],PARAMETER["scale_factor",1],PARAMETER["false_easting",1500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","3021"]]
>>
>> or some other file/source?
>> All data regarding the Swedish RT90 2.5 V  where only the WKT is complete
>> with toWGS84 parameters.
>> A not so easy task, and not reliable, to retrieve the info from there I
>> would guess.
>>
>> My goal is not to be 100% accurate at all points in the world, my goal is to
>> be consistent in the answers to the calls I get. That is the functions
>> PixelToGPS and GPSToPixel should return "compatible" results at all parts in
>> the world so that the main application won't have any risk of getting
>> confused and run into infinite loops or alike.
>> not to hard to step from (in WGS84) 180 to -180 and +85 to -85 and check for
>> every  fifth degree, or so, if the transformation is valid.  When
>> transformation not valid the plan is to switch to WGS84 which seems to work
>> even though results can be interesting in the boundary between the
>> coordinate systems.
>>
>> But still, if the info already exists somewhere why not use it but I do not
>> know if that info exist in the data I have available.
>>
>> Thanks anyway
>> Tomas
>>
>> Francis Markham skrev 2010-07-08 08:14:
>>> I think the EPSG dictionary defines areas of validity for the defined
>>> coordinate systems.  That could be a starting point, although there
>>> may be a better solution
>>>
>>> -Francis
>>>
>>> On 8 July 2010 16:01, Tomas R<monshi@home.se>    wrote:
>>>>   No one?
>>>>
>>>> Ok, I guess then that there are no common function/method of doing this.
>>>> My
>>>> approach will the be trial and error. From WGS 84 transform to the local
>>>> coordinate system and back again to WGS84 and check if the result seems
>>>> valid.
>>>>
>>>> Should work or any expert here have another solution?
>>>>
>>>> Yours
>>>> Tomas
>>>>
>>>> Tomas R skrev 2010-07-05 09:05:
>>>>>   Attacking GDAL via the C# interface and I have a question
>>>>>
>>>>> Have set up two (Osr) SpatialReferences  and transformations to and form
>>>>> both. One system is WGS84 and the other is unknown.
>>>>>
>>>>> To get a consistent behaviour I need to retrieve the boundary, in WGS84
>>>>> coordinates, of the unknown system. If known I can fallback on WGS84
>>>>> when
>>>>> calls outside the scope of the coordinates system are made.
>>>>>   Should be easy to read of some attribute of the SpatialReference or
>>>>> alike. But which/how?
>>>>>
>>>>> Any suggestions?
>>>>>
>>>>> Or how should I solve it - in general words:
>>>>> My application maps coordinates from and to WGS84 and serves them to
>>>>> another via calls like PixelToGPS and GPSToPixel. The originating
>>>>> coordinate
>>>>> system is always WGS84. Need to handle calls made outside the scope of
>>>>> the
>>>>> coordinate system and my approach, to get a consisting behaviour of the
>>>>> two
>>>>> functions, is to revert to WGS84 which is defined at all possible
>>>>> points.
>>>>>
>>>>>
>>>>> Yours
>>>>> Tomas
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>

From pasta.bolognese at gmail.com  Thu Jul  8 12:06:46 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Thu Jul  8 12:06:48 2010
Subject: [gdal-dev] Oracle GeoRaster loading problem
Message-ID: <AANLkTinuM4m-srtgSNLJcfm7QnJAinFsT8FsFBf5gy3s@mail.gmail.com>

Hi All,

after loading a raster, I've did the traditional

SELECT id, sdo_geor.validategeoraster(georaster) isvalid from arcviewgrid;

and I've got: 1 13454 (http://ora-13454.ora-code.com/)

therefore I've run

SELECT sdo_geor.schemaValidate(georaster) from arcviewgrid;

ORA-31154: invalid XML document
ORA-19202: Error occurred in XML processing
LSX-00204: extra data at end of complex element
ORA-06512: at "SYS.XMLTYPE", line 354
ORA-06512: at "MDSYS.SDO_GEOR", line 3263
31154. 00000 -  "invalid XML document"
*Cause:    The XML document is invalid with respect to its XML Schema.
*Action:   Fix the errors identified and try again.

that means that GDAL GeoRaster is generating a wrong metadata XML..

Any Ideas ?

thanks !
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100708/61cc7aaa/attachment.html
From ivan.lucena at pmldnet.com  Thu Jul  8 12:11:49 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu Jul  8 12:11:51 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gT3JhY2xlIEdlb1Jhc3RlciBsb2FkaW5nIHByb2JsZW0=?=
Message-ID: <20100708161149.31878.qmail@s466.sureserver.com>

See http://trac.osgeo.org/gdal/ticket/3673

>  -------Original Message-------
>  From: Pasta Bolognese <pasta.bolognese@gmail.com>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] Oracle GeoRaster loading problem
>  Sent: Jul 08 '10 11:06
>  
>  Hi All,
>  
>  after loading a raster, I've did the traditional
>  
>  SELECT id, sdo_geor.validategeoraster(georaster) isvalid from arcviewgrid;
>  
>  and I've got: 1 13454 ([LINK: http://ora-13454.ora-code.com/]
>  http://ora-13454.ora-code.com/)
>  
>  therefore I've run
>  
>  SELECT sdo_geor.schemaValidate(georaster) from arcviewgrid;
>  
>  ORA-31154: invalid XML document
>  ORA-19202: Error occurred in XML processing
>  LSX-00204: extra data at end of complex element
>  ORA-06512: at "SYS.XMLTYPE", line 354
>  ORA-06512: at "MDSYS.SDO_GEOR", line 3263
>  31154. 00000 -  "invalid XML document"
>  *Cause:    The XML document is invalid with respect to its XML Schema.
>  *Action:   Fix the errors identified and try again.
>  
>  that means that GDAL GeoRaster is generating a wrong metadata XML..
>  
>  Any Ideas ?
>  
>  thanks !
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ragi at burhum.com  Thu Jul  8 12:17:31 2010
From: ragi at burhum.com (Ragi Burhum)
Date: Thu Jul  8 12:15:51 2010
Subject: [gdal-dev] highly compressed vector format for points
In-Reply-To: <4C34B922.7030806@swoodbridge.com>
References: <AANLkTilljydg-X1fEB43v5BdQtJbdQvw5EX8j9bVKhNg@mail.gmail.com>
	<4C341C1A.6070106@york.ac.uk>
	<AANLkTikT6pdTPTMp9UeqTHNVvI2nu3DOmPlj54sNz9jN@mail.gmail.com>
	<4C34B922.7030806@swoodbridge.com>
Message-ID: <58856833-279C-494E-96F3-8539AD607958@burhum.com>

Thanks for the info Stephen.

On Jul 7, 2010, at 10:28 AM, Stephen Woodbridge <woodbri@swoodbridge.com> wrote:

> RoadMap http://roadmap.sourceforge.net/
> 
> uses a similar compression trick of storing data in spatial "squares"
> Each square has an origin of x,y, and all coordinates within the square are stored relative to the square origin. So depending on your needed resolution you might be able to compress an arbitrary x,y into a reference to a square and 2 ints for x,y position in the square. If all data the is fullly in the square is maintained in a list, then you only need to store the reference to the square once for the list.
> 
> -Steve
> 
> Ragi Burhum wrote:
>> Hello Peter,
>> The approach of scaling values into integers, if I recall correctly, is also used in the transfer protocol for ArcSDE. I have considered this as an option and was wondering if any of the non-ESRI datasources used that approach. I have seen the second method you describe being used for avoiding "small feature shakiness" (yes, I made that word up) in 3D globes when zoomed-in too close.
>> Thank you Peter for the response - I will definitely keep these options in the bag of tricks if I end up having to implement a new datasource.
>> Thanks,
>> - Ragi
>> On Tue, Jul 6, 2010 at 11:18 PM, Peter J Halls <P.Halls@york.ac.uk <mailto:P.Halls@york.ac.uk>> wrote:
>>    Ragi,
>>      ESRI implemented something on these lines in the Personal
>>    Geodatabase, in an attempt to overcome data value restrictions in
>>    Access: they scaled the values into integers.  This approach would
>>    work for the application you describe, but loses precision further
>>    from the origin.  The scaling factor is stored separately.
>>      For some work I did, many years ago now, when working with a
>>    graphics package that could only handle 16bit coordinate values, I
>>    held the most significant part of the eastings and northings
>>    separately, subtracting it from the actual coordinates and adding it
>>    back on when I required the full value. This is simple and would
>>    work well for your application.
>>    Best wishes,
>>    Peter
>>    Ragi Burhum wrote:
>>        Hello there,
>>        The other day I got a question from someone that wanted to store a
>>        relatively small amount of point features (~31K) that are close
>>        to each
>>        other in a 'highly compressed' format. He wants to be able to
>>        query features
>>        by proximity using coords. The reason for this requirement is
>>        that he wants
>>        to be able to use it in embedded devices with limited memory.
>>        Yes I know
>>        memory is cheap and keeps getting cheaper, but I still thought
>>        it was an
>>        interesting question.
>>        I can think of many ways to create a custom binary format to do
>>        such a
>>        thing, but I wanted to check the brain collective to hear what
>>        people
>>        thought. Of course spatialite and their new "compressed
>>        geometries" feature
>>        will come up in this conversation. I already sent an e-mail to
>>        that group
>>        for details about that :)
>>        I want to be able to avoid reinventing the wheel, so what are
>>        your thoughts
>>        on this?
>>        Thanks,
>>        - Ragi
>>        ------------------------------------------------------------------------
>>        _______________________________________________
>>        gdal-dev mailing list
>>        gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>        http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>    --     --------------------------------------------------------------------------------
>>    Peter J Halls, GIS Advisor, University of York
>>    Telephone: 01904 433806     Fax: 01904 433740
>>    Snail mail: Computing Service, University of York, Heslington, York
>>    YO10 5DD
>>    This message has the status of a private and personal communication
>>    --------------------------------------------------------------------------------
>> ------------------------------------------------------------------------
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From bobc at bluemarblegeo.com  Thu Jul  8 17:02:13 2010
From: bobc at bluemarblegeo.com (Bob Cave)
Date: Thu Jul  8 17:02:16 2010
Subject: [gdal-dev] PGeo: Reading a single table from a .mdb file
Message-ID: <1278622933764-5271962.post@n2.nabble.com>


I am using the PGeo reader in GDAL 1.7.1.  This reader always returns a layer
for every feature class (spatial table) in the personal geodatabase, but I
would like to be able to specify a list of tables to be returned.  The other
OGR spatial database readers have this capability.

Is this something that is likely to be implemented soon?

Thanks,

Bob
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/PGeo-Reading-a-single-table-from-a-mdb-file-tp5271962p5271962.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From michufoc at wp.pl  Thu Jul  8 17:06:38 2010
From: michufoc at wp.pl (michal_drozdz)
Date: Thu Jul  8 17:06:39 2010
Subject: [gdal-dev] Cropping raster by vector files
Message-ID: <1278623198275-5271977.post@n2.nabble.com>


Hi! I have a beginers problem.

How to crop collar from scanned map with GDAL?
I have set of georeferenced topo maps and polygon layer with boundaries of
each sheet. I used gdalwarp with -cutline and -cl parameters and it worked
but as a result I got map with 0 value at the place of collars. So when I
upload maps into QGIS I still have a problem with overlaping collars. How to
remove it "forever":)

Thanks for replys!
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Cropping-raster-by-vector-files-tp5271977p5271977.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From pasta.bolognese at gmail.com  Thu Jul  8 18:35:14 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Thu Jul  8 18:35:16 2010
Subject: [gdal-dev] Oracle GeoRaster loading problem
In-Reply-To: <20100708161149.31878.qmail@s466.sureserver.com>
References: <20100708161149.31878.qmail@s466.sureserver.com>
Message-ID: <AANLkTinjjMmzTjGzqpjGy_LWKqyowIzkOwv6arIe2I42@mail.gmail.com>

ooo... is there any workaround ?

Even any query to run in order to fix the XML... ?

On Thu, Jul 8, 2010 at 5:11 PM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:

> See http://trac.osgeo.org/gdal/ticket/3673
>
> >  -------Original Message-------
> >  From: Pasta Bolognese <pasta.bolognese@gmail.com>
> >  To: gdal-dev@lists.osgeo.org
> >  Subject: [gdal-dev] Oracle GeoRaster loading problem
> >  Sent: Jul 08 '10 11:06
> >
> >  Hi All,
> >
> >  after loading a raster, I've did the traditional
> >
> >  SELECT id, sdo_geor.validategeoraster(georaster) isvalid from
> arcviewgrid;
> >
> >  and I've got: 1 13454 ([LINK: http://ora-13454.ora-code.com/]
> >  http://ora-13454.ora-code.com/)
> >
> >  therefore I've run
> >
> >  SELECT sdo_geor.schemaValidate(georaster) from arcviewgrid;
> >
> >  ORA-31154: invalid XML document
> >  ORA-19202: Error occurred in XML processing
> >  LSX-00204: extra data at end of complex element
> >  ORA-06512: at "SYS.XMLTYPE", line 354
> >  ORA-06512: at "MDSYS.SDO_GEOR", line 3263
> >  31154. 00000 -  "invalid XML document"
> >  *Cause:    The XML document is invalid with respect to its XML Schema.
> >  *Action:   Fix the errors identified and try again.
> >
> >  that means that GDAL GeoRaster is generating a wrong metadata XML..
> >
> >  Any Ideas ?
> >
> >  thanks !
> >  --------------------
> >  _______________________________________________
> >  gdal-dev mailing list
> >  [LINK: compose.php?to=gdal-dev@lists.osgeo.org]
> gdal-dev@lists.osgeo.org
> >  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100708/0920b1e8/attachment.html
From ivan.lucena at pmldnet.com  Thu Jul  8 20:35:07 2010
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Thu Jul  8 20:35:12 2010
Subject: [gdal-dev] Oracle GeoRaster loading problem
In-Reply-To: <AANLkTinjjMmzTjGzqpjGy_LWKqyowIzkOwv6arIe2I42@mail.gmail.com>
References: <20100708161149.31878.qmail@s466.sureserver.com>
	<AANLkTinjjMmzTjGzqpjGy_LWKqyowIzkOwv6arIe2I42@mail.gmail.com>
Message-ID: <4C366EBB.1050106@pmldnet.com>

Yes, if you see on ticket #3673 there is an example of sdo_geor.addNodata() with arrays of value
ranges as nodata but you can do it with just one value as nodata too. That fix will be available
shortly on GDAL trunk.

Pasta Bolognese wrote:
> ooo... is there any workaround ?
>  
> Even any query to run in order to fix the XML... ?
> 
> On Thu, Jul 8, 2010 at 5:11 PM, Ivan Lucena <ivan.lucena@pmldnet.com
> <mailto:ivan.lucena@pmldnet.com>> wrote:
> 
>     See http://trac.osgeo.org/gdal/ticket/3673
> 
>     >  -------Original Message-------
>     >  From: Pasta Bolognese <pasta.bolognese@gmail.com
>     <mailto:pasta.bolognese@gmail.com>>
>     >  To: gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     >  Subject: [gdal-dev] Oracle GeoRaster loading problem
>     >  Sent: Jul 08 '10 11:06
>     >
>     >  Hi All,
>     >
>     >  after loading a raster, I've did the traditional
>     >
>     >  SELECT id, sdo_geor.validategeoraster(georaster) isvalid from
>     arcviewgrid;
>     >
>     >  and I've got: 1 13454 ([LINK: http://ora-13454.ora-code.com/]
>     >  http://ora-13454.ora-code.com/)
>     >
>     >  therefore I've run
>     >
>     >  SELECT sdo_geor.schemaValidate(georaster) from arcviewgrid;
>     >
>     >  ORA-31154: invalid XML document
>     >  ORA-19202: Error occurred in XML processing
>     >  LSX-00204: extra data at end of complex element
>     >  ORA-06512: at "SYS.XMLTYPE", line 354
>     >  ORA-06512: at "MDSYS.SDO_GEOR", line 3263
>     >  31154. 00000 -  "invalid XML document"
>     >  *Cause:    The XML document is invalid with respect to its XML
>     Schema.
>     >  *Action:   Fix the errors identified and try again.
>     >
>     >  that means that GDAL GeoRaster is generating a wrong metadata XML..
>     >
>     >  Any Ideas ?
>     >
>     >  thanks !
>     >  --------------------
>     >  _______________________________________________
>     >  gdal-dev mailing list
>     >  [LINK: compose.php?to=gdal-dev@lists.osgeo.org
>     <mailto:gdal-dev@lists.osgeo.org>] gdal-dev@lists.osgeo.org
>     <mailto:gdal-dev@lists.osgeo.org>
>     >  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>     >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

From chaitanya.ch at gmail.com  Fri Jul  9 02:06:12 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jul  9 02:06:16 2010
Subject: [gdal-dev] Cropping raster by vector files
In-Reply-To: <1278623198275-5271977.post@n2.nabble.com>
References: <1278623198275-5271977.post@n2.nabble.com>
Message-ID: <AANLkTikVILrBaSbGpIx-FTBfjI-RHKsXLcQGdyHXq1nm@mail.gmail.com>

Michal,

I am assuming that by collar you mean border.
WIth gdalwarp, you can set a nodata value using the -dstnodata option or set
an alpha band using the -dstalpha option.

On Fri, Jul 9, 2010 at 2:36 AM, michal_drozdz <michufoc@wp.pl> wrote:

>
> Hi! I have a beginers problem.
>
> How to crop collar from scanned map with GDAL?
> I have set of georeferenced topo maps and polygon layer with boundaries of
> each sheet. I used gdalwarp with -cutline and -cl parameters and it worked
> but as a result I got map with 0 value at the place of collars. So when I
> upload maps into QGIS I still have a problem with overlaping collars. How
> to
> remove it "forever":)
>
> Thanks for replys!
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Cropping-raster-by-vector-files-tp5271977p5271977.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100709/e8ec60a4/attachment-0001.html
From pasta.bolognese at gmail.com  Fri Jul  9 04:15:28 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Fri Jul  9 04:15:32 2010
Subject: [gdal-dev] Oracle GeoRaster loading problem
In-Reply-To: <4C366EBB.1050106@pmldnet.com>
References: <20100708161149.31878.qmail@s466.sureserver.com>
	<AANLkTinjjMmzTjGzqpjGy_LWKqyowIzkOwv6arIe2I42@mail.gmail.com>
	<4C366EBB.1050106@pmldnet.com>
Message-ID: <AANLkTim1UdU31mw53NPF1y4GqeQ_nr55ttzullrezwb4@mail.gmail.com>

I mean, after having loaded the data with the *actual* GDAL, is there any
way to fix the already created XML ? something like:

read XML
fix it
write XML

The reason that I am asking if because I have some urgency in loading maps
and other tools (I have tried FME) wont load georeference data (coordinate
system)..... I guess that if it is fixed in the trunk, in will take "few"
weeks until it gets into OSGeo4W installer.

thanks


On Fri, Jul 9, 2010 at 1:35 AM, Lucena, Ivan <ivan.lucena@pmldnet.com>wrote:

> Yes, if you see on ticket #3673 there is an example of sdo_geor.addNodata()
> with arrays of value
> ranges as nodata but you can do it with just one value as nodata too. That
> fix will be available
> shortly on GDAL trunk.
>
> Pasta Bolognese wrote:
> > ooo... is there any workaround ?
> >
> > Even any query to run in order to fix the XML... ?
> >
> > On Thu, Jul 8, 2010 at 5:11 PM, Ivan Lucena <ivan.lucena@pmldnet.com
> > <mailto:ivan.lucena@pmldnet.com>> wrote:
> >
> >     See http://trac.osgeo.org/gdal/ticket/3673
> >
> >     >  -------Original Message-------
> >     >  From: Pasta Bolognese <pasta.bolognese@gmail.com
>  >     <mailto:pasta.bolognese@gmail.com>>
> >     >  To: gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
> >     >  Subject: [gdal-dev] Oracle GeoRaster loading problem
> >     >  Sent: Jul 08 '10 11:06
> >     >
> >     >  Hi All,
> >     >
> >     >  after loading a raster, I've did the traditional
> >     >
> >     >  SELECT id, sdo_geor.validategeoraster(georaster) isvalid from
> >     arcviewgrid;
> >     >
> >     >  and I've got: 1 13454 ([LINK: http://ora-13454.ora-code.com/]
> >     >  http://ora-13454.ora-code.com/)
> >     >
> >     >  therefore I've run
> >     >
> >     >  SELECT sdo_geor.schemaValidate(georaster) from arcviewgrid;
> >     >
> >     >  ORA-31154: invalid XML document
> >     >  ORA-19202: Error occurred in XML processing
> >     >  LSX-00204: extra data at end of complex element
> >     >  ORA-06512: at "SYS.XMLTYPE", line 354
> >     >  ORA-06512: at "MDSYS.SDO_GEOR", line 3263
> >     >  31154. 00000 -  "invalid XML document"
> >     >  *Cause:    The XML document is invalid with respect to its XML
> >     Schema.
> >     >  *Action:   Fix the errors identified and try again.
> >     >
> >     >  that means that GDAL GeoRaster is generating a wrong metadata
> XML..
> >     >
> >     >  Any Ideas ?
> >     >
> >     >  thanks !
> >     >  --------------------
> >     >  _______________________________________________
> >     >  gdal-dev mailing list
> >     >  [LINK: compose.php?to=gdal-dev@lists.osgeo.org
> >     <mailto:gdal-dev@lists.osgeo.org>] gdal-dev@lists.osgeo.org
> >     <mailto:gdal-dev@lists.osgeo.org>
>  >     >  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
> >     >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100709/0d4e6e17/attachment.html
From peifer at gmx.eu  Fri Jul  9 04:20:32 2010
From: peifer at gmx.eu (Hermann Peifer)
Date: Fri Jul  9 04:20:37 2010
Subject: [gdal-dev] Re: Cropping raster by vector files
In-Reply-To: <1278623198275-5271977.post@n2.nabble.com>
References: <1278623198275-5271977.post@n2.nabble.com>
Message-ID: <4C36DBD0.2020609@gmx.eu>

On 08/07/2010 23:06, michal_drozdz wrote:
>
> Hi! I have a beginers problem.
>
> How to crop collar from scanned map with GDAL?
> I have set of georeferenced topo maps and polygon layer with boundaries of
> each sheet. I used gdalwarp with -cutline and -cl parameters and it worked
> but as a result I got map with 0 value at the place of collars. So when I
> upload maps into QGIS I still have a problem with overlaping collars. How to
> remove it "forever":)
>
> Thanks for replys!

Another option would be to use the coordinates of the polygons as follows:

gdal_translate -projwin ulx uly lrx lry

This would remove the map collars forever. See 
http://www.gdal.org/gdal_translate.html


Hermann
From jamesm at lantic.net  Fri Jul  9 05:17:05 2010
From: jamesm at lantic.net (James Meyer)
Date: Fri Jul  9 05:26:25 2010
Subject: [gdal-dev] In-memory datasets
Message-ID: <4C36E911.3030306@lantic.net>

Hi

I am a new user of GDAL. I have a need for creating small image datasets 
in memory without the use of physical files on disk.

So is it possible to open such a GDALDataset in-memory, and if it is, how?

Thanks,
James
From chaitanya.ch at gmail.com  Fri Jul  9 05:58:14 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jul  9 05:58:16 2010
Subject: [gdal-dev] In-memory datasets
In-Reply-To: <4C36E911.3030306@lantic.net>
References: <4C36E911.3030306@lantic.net>
Message-ID: <AANLkTinD_OG4e7FkEcFNeJBE3Tu9nv8NSHTsWtlkxtmm@mail.gmail.com>

James,

You can use the "In Memory Raster" (Code: MEM) for that.
http://gdal.org/frmt_mem.html

On Fri, Jul 9, 2010 at 2:47 PM, James Meyer <jamesm@lantic.net> wrote:

> Hi
>
> I am a new user of GDAL. I have a need for creating small image datasets in
> memory without the use of physical files on disk.
>
> So is it possible to open such a GDALDataset in-memory, and if it is, how?
>
> Thanks,
> James
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100709/240e38cd/attachment.html
From pasta.bolognese at gmail.com  Fri Jul  9 09:54:15 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Fri Jul  9 09:54:18 2010
Subject: [gdal-dev] Oracle GeoRaster is not setting setModelSRID ?
Message-ID: <AANLkTik7kCMzTMd8YaAHJY-KsKA7JsumcwpxHu49Q9YW@mail.gmail.com>

Hi All,

If I run gdalinfo "C:\mymodel" I can see
...
...
Coordinate System is:
PROJCS["OSGB 1936 / British National Grid",
...
...

then, loading the model into Oracle with

gdal_translate -of georaster "C:\mymodel"
georaster:user/password,db,geoserver.ARCVIEWGRID,georaster -co
"DESCRIPTION=(ID NUMBER, SITE VARCHAR2(45), GEORASTER
MDSYS.SDO_GEORASTER)" -co "INSERT=VALUES(1,'West fields',
SDO_GEOR.INIT())" -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512" -co
"BLOCKBSIZE=3"  -co "INTERLEAVE=PIXEL"

and fixing manually the XML (it is not valid as it has an extra NODATA
in the wrong place)

I've discovered that the ModelSRID has not been set... and therefore I
had to set it manually (sdo_geor.setModelSRID(grobj, 81989); where
81989 is BGN)


is is working as expected ?

is there any way to set it automatically ?

thanks
From warmerdam at pobox.com  Fri Jul  9 10:11:30 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jul  9 10:11:35 2010
Subject: [gdal-dev] PGeo: Reading a single table from a .mdb file
In-Reply-To: <1278622933764-5271962.post@n2.nabble.com>
References: <1278622933764-5271962.post@n2.nabble.com>
Message-ID: <4C372E12.9090006@pobox.com>

Bob Cave wrote:
> I am using the PGeo reader in GDAL 1.7.1.  This reader always returns a layer
> for every feature class (spatial table) in the personal geodatabase, but I
> would like to be able to specify a list of tables to be returned.  The other
> OGR spatial database readers have this capability.
> 
> Is this something that is likely to be implemented soon?

Bob,

This is normally done as a performance optimization for RDBMSes which might
have a lot of tables, and for which initialization time can be significant
especially in a web mapping context.  Is your concern similar with
personal geodatabase?

I don't see any reason not to add such a capability to the PGEO driver,
but I'm not aware of anyone with this on their list of things to do.  A
patch might be well received or of course you could contract someone to
do this.

If it were to be implemented, it would mean extending the PGEO driver
to support multiple connection options, instead of just the .mdb file name.
If this were done, I'd like to see it use the same generic "wrapped options"
style of connection string as the Ingres driver.

eg.
   @driver=pgeo,file="C:\abc.mdb",tables=roads

I really ought to push this approach forward as a variety RFC to:

  http://trac.osgeo.org/gdal/wiki/rfc10_ogropen

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ahmettemiz88 at gmail.com  Fri Jul  9 13:58:21 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Fri Jul  9 13:58:24 2010
Subject: [gdal-dev] projection transformation
Message-ID: <AANLkTimOjDwsOhsUy1dLD0ZaSKe7hRmrB71UMpZKoOrE@mail.gmail.com>

hello

I want to do projection transformation in gdal-java.

from epsg:32636 (UTM) to epsg:4326

which commands should I use ?

regards
From Tom.Kralidis at ec.gc.ca  Fri Jul  9 14:05:24 2010
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Fri Jul  9 14:05:38 2010
Subject: [gdal-dev] projection transformation
In-Reply-To: <AANLkTimOjDwsOhsUy1dLD0ZaSKe7hRmrB71UMpZKoOrE@mail.gmail.com>
References: <AANLkTimOjDwsOhsUy1dLD0ZaSKe7hRmrB71UMpZKoOrE@mail.gmail.com>
Message-ID: <DB58B7551932BF47AE1BF406D287C444010454A8@OntExch3.ontario.int.ec.gc.ca>

 

> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org 
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of ahmet temiz
> Sent: Friday, 09 July 2010 13:58
> To: gdal-dev
> Subject: [gdal-dev] projection transformation
> 
> hello
> 
> I want to do projection transformation in gdal-java.
> 
> from epsg:32636 (UTM) to epsg:4326
> 
> which commands should I use ?
> 

Check out
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java/apps/OSRTransfor
m.java for an example using proj4 defs.  For EPSG codes, you would use
SpatialReference.ImportFromEPSG(code), where code would be the EPSG
code, without the EPSG namespace (i.e. 4326, not 'EPSG:4326').

..Tom
From tom.joseph at awtwater.com  Fri Jul  9 16:25:29 2010
From: tom.joseph at awtwater.com (Thomas Joseph)
Date: Fri Jul  9 18:14:21 2010
Subject: [gdal-dev] MYSQL Spatial Stored Procedure
Message-ID: <65BEB16FA7472A47ADFC80A42BF04FE8F8F61E@awtsbs01>

I am relatively new to gdal.  I have a few spatial tables in MYSQL and I
am currently using ORG as read access to my data for a mapsever layer.
Everything works great with standard select statements however it does
not work when I try to use a stored procedure with the spatial data.
When I use orginfo I get the following error.

 

MySQL error message:PROCEDURE spatial.sp_test can't return a result
setin the given context Description: CALL sp_test(24);

 

Any suggestions would be greatly appreciated ?

 

 

 

 

 

 

 

 

 




--------------------------------------------------
THIS EMAIL IS CONFIDENTIAL.  Its use or disclosure by any person other than the addressee is unauthorised.  Anyone other than the intended recipient must not rely on the content of this email or any attachment to it.  The sender cannot guarantee that this email or any attachment to it is free of computer viruses or other conditions which may damage or interfere with other computer systems.
--------------------------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100710/8072ab20/attachment.html
From ivan.lucena at pmldnet.com  Fri Jul  9 18:42:06 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri Jul  9 18:42:08 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gT3JhY2xlIEdlb1Jhc3RlciBpcyBub3Qgc2V0dGluZyBzZXRNb2RlbFNSSUQgPw==?=
Message-ID: <20100709224206.3450.qmail@s466.sureserver.com>

>  If I run gdalinfo "C:\mymodel" I can see

What format is that or which GDAL driver is reading it?

>  Coordinate System is:
>  PROJCS["OSGB 1936 / British National Grid",

What comes after?

A complete gdalinfo report would help.

>  then, loading the model into Oracle with
>  
>  gdal_translate -of georaster "C:\mymodel"
>  georaster:user/password,db,geoserver.ARCVIEWGRID,georaster -co
>  "DESCRIPTION=(ID NUMBER, SITE VARCHAR2(45), GEORASTER
>  MDSYS.SDO_GEORASTER)" -co "INSERT=VALUES(1,'West fields',
>  SDO_GEOR.INIT())" -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512" -co
>  "BLOCKBSIZE=3"??-co "INTERLEAVE=PIXEL"
>  
>  and fixing manually the XML (it is not valid as it has an extra NODATA
>  in the wrong place)
>  

Did it reported any warning?

>  I've discovered that the ModelSRID has not been set... and therefore I
>  had to set it manually (sdo_geor.setModelSRID(grobj, 81989); where
>  81989 is BGN)
>  
>  is is working as expected ?

That is a trick question. It all depends on the WKT content that comes from the source dataset. If it has EPSG authority code and that code is supported by Oracle Spatial it might work. 

>  
>  is there any way to set it automatically ?

You can use -co SRID=81989 to assigned that SRID to the GeoRaster object.

>  
>  thanks
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From gurpreetsingh.2005 at gmail.com  Sat Jul 10 02:35:27 2010
From: gurpreetsingh.2005 at gmail.com (Gurpreet singh)
Date: Sat Jul 10 02:40:58 2010
Subject: [gdal-dev] Hi want to get gdal.jar
Message-ID: <AANLkTin3B91sbyUOSlHzwrRb8ntZdNUxAgibdIRlyn4N@mail.gmail.com>

Hi,
           Want to know if the JAR file of Gdal is available for
download...    I dont want to make it by swig but if I can get it
directly..

Regards
gurpreet singh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100710/8bc0b22b/attachment.html
From chaitanya.ch at gmail.com  Sat Jul 10 03:31:08 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Jul 10 03:31:11 2010
Subject: Fwd: [gdal-dev] MYSQL Spatial Stored Procedure
In-Reply-To: <65BEB16FA7472A47ADFC80A42BF04FE8F8F621@awtsbs01>
References: <65BEB16FA7472A47ADFC80A42BF04FE8F8F61E@awtsbs01>
	<AANLkTin3FvLOj_5IDJ7HBWzz-Iiq4stjU7XVgtSKviZ7@mail.gmail.com>
	<65BEB16FA7472A47ADFC80A42BF04FE8F8F621@awtsbs01>
Message-ID: <AANLkTil0T-NfXO_8wgMErfqpF2KKAc98ETA_McKI5lpp@mail.gmail.com>

---------- Forwarded message ----------
From: Thomas Joseph <tom.joseph@awtwater.com>
Date: Sat, Jul 10, 2010 at 10:30 AM
Subject: RE: [gdal-dev] MYSQL Spatial Stored Procedure
To: Chaitanya kumar CH <chaitanya.ch@gmail.com>


  Thanks for the rapid response.

The exact command I am using to test this:

ogrinfo.exe MySQL:spatial,host=awtak1s3,user=root,password=pass,port=3306
-sql "CALL sp_test(24);" ?so

the stored procedure is very simple at the moment and looks like

DELIMITER $$

DROP PROCEDURE IF EXISTS `sp_test` $$

CREATE DEFINER=`root`@`%` PROCEDURE `sp_test`(iworkID int)

BEGIN

select shape from GIS_Nodes_WGS84 where workID = iworkID;

END $$

DELIMITER ;

The table GIS_Nodes_WGS84 is just a simple MyISAM table with a few columns,
OGR_FID as primary key, shape as wkb point geometry column, and workId
integer.

If I run orginfo with
MySQL:spatial,host=awtak1s3,user=root,password=pass,port=3306 -sql "select
shape from GIS_Nodes_WGS84 where workID = 24;" ?so

It works as expected and returns info about the spatial data from the select
statement.

I know I could just use select statements but my application is slightly
more complicated and dynamic then the test and it would be good to be able
use a stored procedure so I could pass variables.

I am running windows XP with gdal 1.6.0.3.

I am suppose to post this back to the list ?

Let me know if you require any further information.




 ------------------------------

*From:* Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
*Sent:* Saturday, 10 July 2010 3:44 p.m.
*To:* Thomas Joseph
*Subject:* Re: [gdal-dev] MYSQL Spatial Stored Procedure



Thomas,

Can you give the exact command you used and if possible, a description of
the procedure and tables?

On Sat, Jul 10, 2010 at 1:55 AM, Thomas Joseph <tom.joseph@awtwater.com>
wrote:

I am relatively new to gdal.  I have a few spatial tables in MYSQL and I am
currently using ORG as read access to my data for a mapsever layer.
Everything works great with standard select statements however it does not
work when I try to use a stored procedure with the spatial data.  When I use
orginfo I get the following error.



MySQL error message:PROCEDURE spatial.sp_test can't return a result setin
the given context Description: CALL sp_test(24);



Any suggestions would be greatly appreciated ?




















 ------------------------------

THIS EMAIL IS CONFIDENTIAL.  Its use or disclosure by any person other than
the addressee is unauthorised.  Anyone other than the intended recipient
must not rely on the content of this email or any attachment to it.  The
sender cannot guarantee that this email or any attachment to it is free of
computer viruses or other conditions which may damage or interfere with
other computer systems.
 ------------------------------


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E



------------------------------

THIS EMAIL IS CONFIDENTIAL.  Its use or disclosure by any person other than
the addressee is unauthorised.  Anyone other than the intended recipient
must not rely on the content of this email or any attachment to it.  The
sender cannot guarantee that this email or any attachment to it is free of
computer viruses or other conditions which may damage or interfere with
other computer systems.

------------------------------




-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100710/cf1af09f/attachment-0001.html
From szekerest at gmail.com  Sat Jul 10 06:38:40 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Jul 10 06:38:42 2010
Subject: [gdal-dev] Hi want to get gdal.jar
In-Reply-To: <AANLkTin3B91sbyUOSlHzwrRb8ntZdNUxAgibdIRlyn4N@mail.gmail.com>
References: <AANLkTin3B91sbyUOSlHzwrRb8ntZdNUxAgibdIRlyn4N@mail.gmail.com>
Message-ID: <AANLkTil8tFZd9UT22kifgzL2sDTUROwX7qXkc9FlNQrY@mail.gmail.com>

The Windows binaries found at http://vbkto.dyndns.org/sdk/ should contain
the Java bindings.

Best regards,

Tamas



2010/7/10 Gurpreet singh <gurpreetsingh.2005@gmail.com>

> Hi,
>            Want to know if the JAR file of Gdal is available for
> download...    I dont want to make it by swig but if I can get it
> directly..
>
> Regards
> gurpreet singh
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100710/5ba5344e/attachment.html
From fieliesm at gmail.com  Sat Jul 10 10:07:46 2010
From: fieliesm at gmail.com (Francois Maass)
Date: Sat Jul 10 10:07:53 2010
Subject: [gdal-dev] Projection Definition String
Message-ID: <003401cb2039$4ba74830$e2f5d890$@com>

Good day!

I am trying to set the Projection Definition for a GDALDataset as follows
(from the GDALWarp API):

 

const char *pszDstWKT = NULL;

OGRSpatialReference oSRS;

oSRS.SetUTM( 11, TRUE );

oSRS.SetWellKnownGeogCS( "WGS84" );

oSRS.exportToWkt( &pszDstWKT );

 

if(GDALSetProjection(srcDataset, pszDstWKT) == CE_Failure)

{ //handle failure

{else

{

            const char *defString = srcDataset->GetProjectionRef();

            cout<<?Length: ?<<strlen(defString)<<endl;

cout<<?Projection: ?<<defString<<endl;

};

 

Firstly, I get a compiler error with the oSRS.exportToWKT statement:
invalid conversion from ?const char**? to ?char**?.  

? So I changed the const char* to char*, which bypassed that little error.

? As this was used exactly as the GDALWarp API Tutorial describes, why does
this happen?

 

Secondly, After the GDALSetProjection(
) call succeeds, the projection
information is supposed to be printed out to standard out, along with the
length of the definition string.
However, the output is as follows:
                $ Length: 0

                $ Projection: 

                

Why is the projection string still empty?  

I know that the pszDstWKT contains the projection information as set up,
since when printed out to screen it?s displayed correctly.

 

Thank you in advance!!

 

Warm Regards

Francois Maass

B.IT

University of Pretoria

Cell: 072 397 0294

Email: fieliesm@gmail.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100710/a03f0ca5/attachment.html
From warmerdam at pobox.com  Sat Jul 10 10:36:23 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jul 10 10:36:28 2010
Subject: [gdal-dev] Projection Definition String
In-Reply-To: <003401cb2039$4ba74830$e2f5d890$@com>
References: <003401cb2039$4ba74830$e2f5d890$@com>
Message-ID: <4C388567.2030601@pobox.com>

Francois Maass wrote:
> Good day!
> 
> I am trying to set the Projection Definition for a GDALDataset as 
> follows (from the GDALWarp API):
> 
>  
> 
> /const char *pszDstWKT = NULL;/
> /OGRSpatialReference oSRS;/
> /oSRS.SetUTM( 11, TRUE );/
> /oSRS.SetWellKnownGeogCS( "WGS84" );/
> /oSRS.exportToWkt( &pszDstWKT );/
> / /
> /if(GDALSetProjection(srcDataset, pszDstWKT) == CE_Failure)/
> /{ //handle failure/
> /{else/
> /{/
> /            const char *defString = srcDataset->GetProjectionRef();/
> /            cout<<?Length: ?<<strlen(defString)<<endl;/
> /cout<<?Projection: ?<<defString<<endl;/
> /};/
> 
>  
> 
> Firstly, I get a compiler error with the oSRS.exportToWKT statement:
> invalid conversion from ?const char**? to ?char**?. 

Francois,

exportToWkt() needs to modify pszDstWKT, so it is inappropriate
for the pointer to be const.

> Secondly, After the GDALSetProjection(?) call succeeds, the projection 
> information is supposed to be printed out to standard out, along with 
> the length of the definition string.
> However, the output is as follows:
>                 $ Length: 0
> 
>                 $ Projection:
> 
>                
> 
> Why is the projection string still empty?  

I see you are seeing the projection on the source file (srcDataset).
Are you sure it is open in update mode?   I suspect that either
the source dataset is not updatable because it is open in read-only
mode or due to a limitation of the driver.  It *ought* to return
CE_Failure in either of those conditions but this is not
always completely properly implemented.  It may be appropriate
for you to file a ticket on why CE_Failure is not returned when
the setprojection seems to be failing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fieliesm at gmail.com  Sat Jul 10 11:10:54 2010
From: fieliesm at gmail.com (Francois Maass)
Date: Sat Jul 10 11:11:03 2010
Subject: [gdal-dev] Projection Definition String
In-Reply-To: <4C388567.2030601@pobox.com>
References: <003401cb2039$4ba74830$e2f5d890$@com> <4C388567.2030601@pobox.com>
Message-ID: <003901cb2042$1f778cd0$5e66a670$@com>

Hi Frank

Thank you for your suggestion.
I realized that I opened my dataset with GA_ReadOnly, and now changed it to
GA_Update.

Now another issues presented itself:
When I execute these statements on a .pix image, it works beautifully. 
When I execute these statements on a .TIF image, it still gives an empty
definition string, with the CPLError stil CE_None.

Am I supposed to manually include any additional GeoTiff or Tiff libraries
when I build my application? 

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Saturday, July 10, 2010 4:36 PM
To: Francois Maass
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Projection Definition String

Francois Maass wrote:
> Good day!
> 
> I am trying to set the Projection Definition for a GDALDataset as 
> follows (from the GDALWarp API):
> 
>  
> 
> /const char *pszDstWKT = NULL;/
> /OGRSpatialReference oSRS;/
> /oSRS.SetUTM( 11, TRUE );/
> /oSRS.SetWellKnownGeogCS( "WGS84" );/
> /oSRS.exportToWkt( &pszDstWKT );/
> / /
> /if(GDALSetProjection(srcDataset, pszDstWKT) == CE_Failure)/
> /{ //handle failure/
> /{else/
> /{/
> /            const char *defString = srcDataset->GetProjectionRef();/
> /            cout<<"Length: "<<strlen(defString)<<endl;/
> /cout<<"Projection: "<<defString<<endl;/
> /};/
> 
>  
> 
> Firstly, I get a compiler error with the oSRS.exportToWKT statement:
> invalid conversion from 'const char**' to 'char**'. 

Francois,

exportToWkt() needs to modify pszDstWKT, so it is inappropriate
for the pointer to be const.

> Secondly, After the GDALSetProjection(.) call succeeds, the projection 
> information is supposed to be printed out to standard out, along with 
> the length of the definition string.
> However, the output is as follows:
>                 $ Length: 0
> 
>                 $ Projection:
> 
>                
> 
> Why is the projection string still empty?  

I see you are seeing the projection on the source file (srcDataset).
Are you sure it is open in update mode?   I suspect that either
the source dataset is not updatable because it is open in read-only
mode or due to a limitation of the driver.  It *ought* to return
CE_Failure in either of those conditions but this is not
always completely properly implemented.  It may be appropriate
for you to file a ticket on why CE_Failure is not returned when
the setprojection seems to be failing.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From nikolasergeeee at mail.ru  Sun Jul 11 04:57:58 2010
From: nikolasergeeee at mail.ru (=?koi8-r?Q?=ED=C1=D2=C9=D1_=F3=C5=D2=C7=C5=C5=D7=C1?=)
Date: Sun Jul 11 05:18:33 2010
Subject: [gdal-dev] Hi!
Message-ID: <E1OXsMI-0002q1-00.nikolasergeeee-mail-ru@f24.mail.ru>

Hi 2 all! Good subscrubtion, thx!
________________________________________________
http://stydentkam.ru , http://ekzameny.net , http://referat-na-5.ru , http://hellocafe.ru , http://home-happy.ru , http://samkon.ru , http://scouts-russia.ru , http://bestxenon.ru , http://harmonia-plus.ru , http://kond-galereya.ru , http://divi-media.ru , http://v-peremen.ru , http://tonyfill.ru , http://v-peremen.ru , http://tbcom.ru , http://informkom.ru , http://aidsprint.ru , http://stydentam.ru , http://virtuallight.ru

From even.rouault at mines-paris.org  Sun Jul 11 06:12:25 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jul 11 06:12:50 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <11A8567A97B15648846060F5CD818EB842E7DB43D8@DEV001EX.Dev.cadcorp.net>
References: <4C2CAC67.40109@york.ac.uk>
	<11A8567A97B15648846060F5CD818EB842E7DB43D8@DEV001EX.Dev.cadcorp.net>
Message-ID: <201007111212.32337.even.rouault@mines-paris.org>

Just to inform you that now that the NAS driver is in GDAL trunk, I've been 
able to port its enhancements to the main GML driver. On the few samples I've 
tested, OS Mastermap GML files seem to be read correctly now.

See http://trac.osgeo.org/gdal/ticket/3680

Le Friday 02 July 2010 09:04:38 Martin Daly, vous avez ?crit?:
> >     Here it is not only GDAL/OGR that has a problem!  Currently, I know
> > of no importer that can handle this construct, other than the tool (from
> > Snowflake) used by OSGB to generate it - and there is also the question
> > of onwards storage.
>
> Not even close, I'm afraid.
>
> There are plenty of tools to read (all parts of) OS MM:
>
> http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/information/
>technical/software.html
>
> e.g. (an excellent one, at a very reasonable price...)
>
> http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/information/
>technical/software/cadcorp.html
>
> Also, as far as I am aware, OS GB use in-house software to generate the
> data.
>
> Martin
> ***************************************************************************
>* This email is confidential and may be privileged and should not be used,
> read or copied by anyone who is not the  original intended recipient. If
> you have received this email in error  please inform the sender and delete
> it from your mailbox or any other storage mechanism. Unless specifically
> stated, nothing in this email constitutes an offer by Cadcorp and Cadcorp
> does not warrant that any information contained in this email is accurate.
> Cadcorp cannot accept liability for any statements made which are clearly
> the sender's own and not expressly made on behalf of Cadcorp or one of its
> agents. Please rely on your own virus check. No responsibility is taken by
> Cadcorp for any damage arising out of any bug or virus infection.
> ***************************************************************************
>*
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From davidgshi at yahoo.co.uk  Sun Jul 11 06:54:13 2010
From: davidgshi at yahoo.co.uk (David Shi)
Date: Sun Jul 11 06:54:16 2010
Subject: [gdal-dev] How to load large datasets into memory and manipulate
	them in Python script?
Message-ID: <373344.39891.qm@web26303.mail.ukl.yahoo.com>

?
Does anyone know and have a demo script to load large datasets into memory, 
assign them with names, and manipulate them in Python script?

Loading datasets into memory, saving them as temporary files in the memory, may 
increase the processing speed of datasets, as this will save a lot of processing 
time to read from and write to disk spaces.

Am I right?

Sincerely,

David



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100711/b4404c81/attachment.html
From davidgshi at yahoo.co.uk  Sun Jul 11 06:54:43 2010
From: davidgshi at yahoo.co.uk (David Shi)
Date: Sun Jul 11 06:54:47 2010
Subject: [gdal-dev] In-memory virtual disk space and saving data files into
	in-memory virtual disk space in Python
Message-ID: <995711.39008.qm@web26303.mail.ukl.yahoo.com>

?
Is it possible to create in-memory virtual disk space and saving data files into 
in-memory virtual disk space in Python?

Regards.

David



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100711/020aa483/attachment.html
From pasta.bolognese at gmail.com  Sun Jul 11 09:31:21 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Sun Jul 11 09:31:23 2010
Subject: [gdal-dev] Oracle GeoRaster is not setting setModelSRID ?
In-Reply-To: <20100709224206.3450.qmail@s466.sureserver.com>
References: <20100709224206.3450.qmail@s466.sureserver.com>
Message-ID: <AANLkTik6KOQl0psftF_CTiMmdUs89oHrDi4aGSuxIyGN@mail.gmail.com>

What I mean is that If I can read the coordinate system (BNG), why
then I am forced to set it MANUALLY ? (using -co SRID=81989 to
assigned that SRID to the GeoRaster ob for example)...

I know that I can run a script, get the name of the coordinate system,
query the DB to get its number and then use the -co SRID=81989... But
I wonder, is it working as expected ??

On Fri, Jul 9, 2010 at 11:42 PM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
>> ?If I run gdalinfo "C:\mymodel" I can see
>
> What format is that or which GDAL driver is reading it?
>
>> ?Coordinate System is:
>> ?PROJCS["OSGB 1936 / British National Grid",
>
> What comes after?
>
> A complete gdalinfo report would help.
>
>> ?then, loading the model into Oracle with
>>
>> ?gdal_translate -of georaster "C:\mymodel"
>> ?georaster:user/password,db,geoserver.ARCVIEWGRID,georaster -co
>> ?"DESCRIPTION=(ID NUMBER, SITE VARCHAR2(45), GEORASTER
>> ?MDSYS.SDO_GEORASTER)" -co "INSERT=VALUES(1,'West fields',
>> ?SDO_GEOR.INIT())" -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512" -co
>> ?"BLOCKBSIZE=3"??-co "INTERLEAVE=PIXEL"
>>
>> ?and fixing manually the XML (it is not valid as it has an extra NODATA
>> ?in the wrong place)
>>
>
> Did it reported any warning?
>
>> ?I've discovered that the ModelSRID has not been set... and therefore I
>> ?had to set it manually (sdo_geor.setModelSRID(grobj, 81989); where
>> ?81989 is BGN)
>>
>> ?is is working as expected ?
>
> That is a trick question. It all depends on the WKT content that comes from the source dataset. If it has EPSG authority code and that code is supported by Oracle Spatial it might work.
>
>>
>> ?is there any way to set it automatically ?
>
> You can use -co SRID=81989 to assigned that SRID to the GeoRaster object.
>
>>
>> ?thanks
>> ?_______________________________________________
>> ?gdal-dev mailing list
>> ?gdal-dev@lists.osgeo.org
>> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From chaitanya.ch at gmail.com  Sun Jul 11 09:31:37 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Jul 11 09:31:40 2010
Subject: [gdal-dev] In-memory virtual disk space and saving data files 
	into in-memory virtual disk space in Python
In-Reply-To: <995711.39008.qm@web26303.mail.ukl.yahoo.com>
References: <995711.39008.qm@web26303.mail.ukl.yahoo.com>
Message-ID: <AANLkTikj6phg-KyJiaMBJII2Ig5smBPHWSJf749rjbyX@mail.gmail.com>

David,

GDAL supports holding raster and vector data in memory.
http://www.gdal.org/ogr/ogr_formats.html ->
http://www.gdal.org/ogr/drv_memory.html
http://www.gdal.org/formats_list.html -> http://www.gdal.org/frmt_mem.html

On Sun, Jul 11, 2010 at 4:24 PM, David Shi <davidgshi@yahoo.co.uk> wrote:

>
>   Is it possible to create in-memory virtual disk space and saving data
> files into in-memory virtual disk space in Python?
>
> Regards.
>
> David
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100711/9fcad228/attachment.html
From ivan.lucena at pmldnet.com  Sun Jul 11 19:57:01 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Sun Jul 11 19:57:04 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gT3JhY2xlIEdlb1Jhc3RlciBpcyBub3Qgc2V0dGluZyBzZXRNb2RlbFNSSUQgPw==?=
Message-ID: <20100711235701.9829.qmail@s466.sureserver.com>

>  What I mean is that If I can read the coordinate system (BNG), why
>  then I am forced to set it MANUALLY ? (using -co SRID=81989 to
>  assigned that SRID to the GeoRaster ob for example)...
>
>  I know that I can run a script, get the name of the coordinate system,
>  query the DB to get its number and then use the -co SRID=81989... But
>  I wonder, is it working as expected ??

No, it is certainly not doing what is expected.

>  
>  On Fri, Jul 9, 2010 at 11:42 PM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
>  >> ?If I run gdalinfo "C:\mymodel" I can see
>  >
>  > What format is that or which GDAL driver is reading it?
>  >
>  >> ?Coordinate System is:
>  >> ?PROJCS["OSGB 1936 / British National Grid",
>  >
>  > What comes after?
>  >
>  > A complete gdalinfo report would help.
>  >
>  >> ?then, loading the model into Oracle with
>  >>
>  >> ?gdal_translate -of georaster "C:\mymodel"
>  >> ?georaster:user/password,db,geoserver.ARCVIEWGRID,georaster -co
>  >> ?"DESCRIPTION=(ID NUMBER, SITE VARCHAR2(45), GEORASTER
>  >> ?MDSYS.SDO_GEORASTER)" -co "INSERT=VALUES(1,'West fields',
>  >> ?SDO_GEOR.INIT())" -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512" -co
>  >> ?"BLOCKBSIZE=3"??-co "INTERLEAVE=PIXEL"
>  >>
>  >> ?and fixing manually the XML (it is not valid as it has an extra NODATA
>  >> ?in the wrong place)
>  >>
>  >
>  > Did it reported any warning?
>  >
>  >> ?I've discovered that the ModelSRID has not been set... and therefore I
>  >> ?had to set it manually (sdo_geor.setModelSRID(grobj, 81989); where
>  >> ?81989 is BGN)
>  >>
>  >> ?is is working as expected ?
>  >
>  > That is a trick question. It all depends on the WKT content that comes from the source dataset. If it has EPSG authority code and that code is supported by Oracle Spatial it might work.
>  >
>  >>
>  >> ?is there any way to set it automatically ?
>  >
>  > You can use -co SRID=81989 to assigned that SRID to the GeoRaster object.
>  >
>  >>
>  >> ?thanks
>  >> ?_______________________________________________
>  >> ?gdal-dev mailing list
>  >> ?gdal-dev@lists.osgeo.org
>  >> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >>
>  >
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From seth at pricepages.org  Mon Jul 12 01:23:36 2010
From: seth at pricepages.org (Seth Price)
Date: Mon Jul 12 01:23:41 2010
Subject: [gdal-dev] Help with the makefile
Message-ID: <C6CD903A-2163-4343-8E1D-7D87FD59B76E@pricepages.org>

I've been working on OpenCL for gdalwarp, and I have the majority of  
the code written. However, I'm going to need some help getting the  
compiler flags right. I need to detect an OpenCL install, then add the  
correct compiler flag(s) ("-framework OpenCL" when on the Mac).

How do I get do this? Doing this correctly is way beyond my make  
skills, and anything that I could do would be an ugly hack.

Thanks,
Seth
From pasta.bolognese at gmail.com  Mon Jul 12 04:05:04 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Mon Jul 12 04:05:06 2010
Subject: [gdal-dev] Oracle GeoRaster is not setting setModelSRID ?
In-Reply-To: <20100711235701.9829.qmail@s466.sureserver.com>
References: <20100711235701.9829.qmail@s466.sureserver.com>
Message-ID: <AANLkTinx9bP6A-jtKI0DNo3SmIyTaoj_yqShhLfm0MT9@mail.gmail.com>

In that case, is there any way I can rise a ticket for it ?

On Mon, Jul 12, 2010 at 12:57 AM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
>> ?What I mean is that If I can read the coordinate system (BNG), why
>> ?then I am forced to set it MANUALLY ? (using -co SRID=81989 to
>> ?assigned that SRID to the GeoRaster ob for example)...
>>
>> ?I know that I can run a script, get the name of the coordinate system,
>> ?query the DB to get its number and then use the -co SRID=81989... But
>> ?I wonder, is it working as expected ??
>
> No, it is certainly not doing what is expected.
>
>>
>> ?On Fri, Jul 9, 2010 at 11:42 PM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
>> ?>> ?If I run gdalinfo "C:\mymodel" I can see
>> ?>
>> ?> What format is that or which GDAL driver is reading it?
>> ?>
>> ?>> ?Coordinate System is:
>> ?>> ?PROJCS["OSGB 1936 / British National Grid",
>> ?>
>> ?> What comes after?
>> ?>
>> ?> A complete gdalinfo report would help.
>> ?>
>> ?>> ?then, loading the model into Oracle with
>> ?>>
>> ?>> ?gdal_translate -of georaster "C:\mymodel"
>> ?>> ?georaster:user/password,db,geoserver.ARCVIEWGRID,georaster -co
>> ?>> ?"DESCRIPTION=(ID NUMBER, SITE VARCHAR2(45), GEORASTER
>> ?>> ?MDSYS.SDO_GEORASTER)" -co "INSERT=VALUES(1,'West fields',
>> ?>> ?SDO_GEOR.INIT())" -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512" -co
>> ?>> ?"BLOCKBSIZE=3"??-co "INTERLEAVE=PIXEL"
>> ?>>
>> ?>> ?and fixing manually the XML (it is not valid as it has an extra NODATA
>> ?>> ?in the wrong place)
>> ?>>
>> ?>
>> ?> Did it reported any warning?
>> ?>
>> ?>> ?I've discovered that the ModelSRID has not been set... and therefore I
>> ?>> ?had to set it manually (sdo_geor.setModelSRID(grobj, 81989); where
>> ?>> ?81989 is BGN)
>> ?>>
>> ?>> ?is is working as expected ?
>> ?>
>> ?> That is a trick question. It all depends on the WKT content that comes from the source dataset. If it has EPSG authority code and that code is supported by Oracle Spatial it might work.
>> ?>
>> ?>>
>> ?>> ?is there any way to set it automatically ?
>> ?>
>> ?> You can use -co SRID=81989 to assigned that SRID to the GeoRaster object.
>> ?>
>> ?>>
>> ?>> ?thanks
>> ?>> ?_______________________________________________
>> ?>> ?gdal-dev mailing list
>> ?>> ?gdal-dev@lists.osgeo.org
>> ?>> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> ?>>
>> ?>
>> ?_______________________________________________
>> ?gdal-dev mailing list
>> ?gdal-dev@lists.osgeo.org
>> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From Jez.Walters at ipl.com  Mon Jul 12 05:20:32 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Mon Jul 12 05:24:53 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <201007111212.32337.even.rouault@mines-paris.org>
References: <4C2CAC67.40109@york.ac.uk>
	<11A8567A97B15648846060F5CD818EB842E7DB43D8@DEV001EX.Dev.cadcorp.net>
	<201007111212.32337.even.rouault@mines-paris.org>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A02980EFE196@GOOFY.iplbath.com>

Even,


Please forgive my ignorance, but where can I get the code you are referring to?  I've just looked at http://download.osgeo.org/gdal/ and I still see v1.7.2 as the latest version of the GDAL library.

I've tried using Subversion instead, like this:

svn checkout https://svn.osgeo.org/gdal/trunk gdal

, but I get the error message 'could not connect to server'!  :-(

Apologies if I'm missing something obvious you!


Jez


____________________________________________________________

Jez Walters
Senior Consultant

direct phone: +44 (0)1225 475093
phone: +44 (0)1225 475000
fax: +44 (0)1225 444400
email: jez.walters@ipl.com


IPL Information Processing Limited 
Eveleigh House, Grove Street, Bath, BA1 5LR, UK
www.ipl.com
____________________________________________________________


-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Sunday 11 July 2010 11:12
To: gdal-dev@lists.osgeo.org
Cc: Martin Daly; Peter J Halls; Jez Walters
Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap

Just to inform you that now that the NAS driver is in GDAL trunk, I've been 
able to port its enhancements to the main GML driver. On the few samples I've 
tested, OS Mastermap GML files seem to be read correctly now.

See http://trac.osgeo.org/gdal/ticket/3680

Le Friday 02 July 2010 09:04:38 Martin Daly, vous avez ?crit?:
> >     Here it is not only GDAL/OGR that has a problem!  Currently, I know
> > of no importer that can handle this construct, other than the tool (from
> > Snowflake) used by OSGB to generate it - and there is also the question
> > of onwards storage.
>
> Not even close, I'm afraid.
>
> There are plenty of tools to read (all parts of) OS MM:
>
> http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/information/
>technical/software.html
>
> e.g. (an excellent one, at a very reasonable price...)
>
> http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/information/
>technical/software/cadcorp.html
>
> Also, as far as I am aware, OS GB use in-house software to generate the
> data.
>
> Martin
> ***************************************************************************
>* This email is confidential and may be privileged and should not be used,
> read or copied by anyone who is not the  original intended recipient. If
> you have received this email in error  please inform the sender and delete
> it from your mailbox or any other storage mechanism. Unless specifically
> stated, nothing in this email constitutes an offer by Cadcorp and Cadcorp
> does not warrant that any information contained in this email is accurate.
> Cadcorp cannot accept liability for any statements made which are clearly
> the sender's own and not expressly made on behalf of Cadcorp or one of its
> agents. Please rely on your own virus check. No responsibility is taken by
> Cadcorp for any damage arising out of any bug or virus infection.
> ***************************************************************************
>*
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

From pasta.bolognese at gmail.com  Mon Jul 12 05:33:48 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Mon Jul 12 05:33:50 2010
Subject: [gdal-dev] GeoRaster: problem updating on predefined existing table
Message-ID: <AANLkTimezJaRvCJ1nqhuuNgyfFoMJePv7pQHZmHlGbhb@mail.gmail.com>

Hi All,

following http://www.gdal.org/frmt_georaster.html I've imported a
small immage using:

C:\>gdal_translate -of georaster  c:\tmp\map.png
georaster:geoserver/geoserver,MFDEVDB

and it works well. Then I've imported another immage using the same
command and it worked well too !

Then I have decided to use a predefined table.... and here the problems:

C:\>gdal_translate -of georaster  c:\tmp\map.png
georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta
Input file size is 1014, 863
0...10...20...30...40...50...60...70...80...90...100 - done.
Ouput dataset: (georaster:geoserver,geoserver,MFDEVDB,RDT_33$,33) on
PASTA,RASTER

C:\>gdal_translate -of georaster  c:\tmp\map.png
georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta
Input file size is 1014, 863
ERROR 1: ORA-00955: name is already used by an existing object
ORA-06512: at line 10

ERROR 1: Create Table Error!


any ideas ?

how can I update an existing raster on an existing table ?

thanks
From thomas.hirsch at statkart.no  Mon Jul 12 06:46:04 2010
From: thomas.hirsch at statkart.no (relet)
Date: Mon Jul 12 06:46:06 2010
Subject: [gdal-dev] OGR Driver for Norwegian SOSI standard
Message-ID: <1278931564694-5282431.post@n2.nabble.com>


Dear all,

During the last month, we have developed an OGR driver for the Norwegian
SOSI standard[1]. It has reached a state[2] where it can be used to read and
use the basic features from SOSI files in OGR-enabled application like
mapserver. The standard itself is the national standard for representation
of geographic data. It is quite extensive, up to covering typographic
settings for label placement - hence a full access to all features via OGR
probably won't be possible anyway. 

We would like to contribute the driver to the OGR library, and maybe have
someone review the code from an OGR perspective. What is the best way to
proceed? I could of course append some code to the ticket, but that doesn't
seem to be a long-term solution. :) 

The driver is depending on an external library, FYBA[3] for reading (and
eventually writing) SOSI files. That library is currently released as binary
VC++ DLL only, but is written to support a variety of architectures. I have
ported it to linux, and we are working on releasing the source code.
Hopefully that'll just take some more time. Taking that into account, it
worksforme on both Windows and Linux, and will be continuously extended in
the near future.

Where should I put the code and who wants to read it? 

Best regards, 
Thomas

[1] http://www.statkart.no/nor/SOSI/SOSI_in_English/
[2] http://trac.osgeo.org/gdal/ticket/3638
[3] http://www.statkart.no/nor/SOSI/Program/
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/OGR-Driver-for-Norwegian-SOSI-standard-tp5282431p5282431.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ivan.lucena at pmldnet.com  Mon Jul 12 07:22:16 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon Jul 12 07:22:18 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gT3JhY2xlIEdlb1Jhc3RlciBpcyBub3Qgc2V0dGluZyBzZXRNb2RlbFNSSUQgPw==?=
Message-ID: <20100712112216.13645.qmail@s466.sureserver.com>

Yes, please follow the instruction on that page http://trac.osgeo.org/gdal/ , first bullet "Submit a new bug report (you need to login with an  OSGeo Userid)".

It will help a lot if you can attach a gdalinfo report of your input file and the version of GDAL that you are using.

You can get that information by executing:

# gdalinfo --version
# gdalinfo <name of the file>

Regards.

>  -------Original Message-------
>  From: Pasta Bolognese <pasta.bolognese@gmail.com>
>  To: Ivan Lucena <ivan.lucena@pmldnet.com>
>  Cc: gdal-dev@lists.osgeo.org
>  Subject: Re: [gdal-dev] Oracle GeoRaster is not setting setModelSRID ?
>  Sent: Jul 12 '10 03:05
>  
>  In that case, is there any way I can rise a ticket for it ?
>  
>  On Mon, Jul 12, 2010 at 12:57 AM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
>  >> ?What I mean is that If I can read the coordinate system (BNG), why
>  >> ?then I am forced to set it MANUALLY ? (using -co SRID=81989 to
>  >> ?assigned that SRID to the GeoRaster ob for example)...
>  >>
>  >> ?I know that I can run a script, get the name of the coordinate system,
>  >> ?query the DB to get its number and then use the -co SRID=81989... But
>  >> ?I wonder, is it working as expected ??
>  >
>  > No, it is certainly not doing what is expected.
>  >
>  >>
>  >> ?On Fri, Jul 9, 2010 at 11:42 PM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
>  >> ?>> ?If I run gdalinfo "C:\mymodel" I can see
>  >> ?>
>  >> ?> What format is that or which GDAL driver is reading it?
>  >> ?>
>  >> ?>> ?Coordinate System is:
>  >> ?>> ?PROJCS["OSGB 1936 / British National Grid",
>  >> ?>
>  >> ?> What comes after?
>  >> ?>
>  >> ?> A complete gdalinfo report would help.
>  >> ?>
>  >> ?>> ?then, loading the model into Oracle with
>  >> ?>>
>  >> ?>> ?gdal_translate -of georaster "C:\mymodel"
>  >> ?>> ?georaster:user/password,db,geoserver.ARCVIEWGRID,georaster -co
>  >> ?>> ?"DESCRIPTION=(ID NUMBER, SITE VARCHAR2(45), GEORASTER
>  >> ?>> ?MDSYS.SDO_GEORASTER)" -co "INSERT=VALUES(1,'West fields',
>  >> ?>> ?SDO_GEOR.INIT())" -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512" -co
>  >> ?>> ?"BLOCKBSIZE=3"??-co "INTERLEAVE=PIXEL"
>  >> ?>>
>  >> ?>> ?and fixing manually the XML (it is not valid as it has an extra NODATA
>  >> ?>> ?in the wrong place)
>  >> ?>>
>  >> ?>
>  >> ?> Did it reported any warning?
>  >> ?>
>  >> ?>> ?I've discovered that the ModelSRID has not been set... and therefore I
>  >> ?>> ?had to set it manually (sdo_geor.setModelSRID(grobj, 81989); where
>  >> ?>> ?81989 is BGN)
>  >> ?>>
>  >> ?>> ?is is working as expected ?
>  >> ?>
>  >> ?> That is a trick question. It all depends on the WKT content that comes from the source dataset. If it has EPSG authority code and that code is supported by Oracle Spatial it might work.
>  >> ?>
>  >> ?>>
>  >> ?>> ?is there any way to set it automatically ?
>  >> ?>
>  >> ?> You can use -co SRID=81989 to assigned that SRID to the GeoRaster object.
>  >> ?>
>  >> ?>>
>  >> ?>> ?thanks
>  >> ?>> ?_______________________________________________
>  >> ?>> ?gdal-dev mailing list
>  >> ?>> ?gdal-dev@lists.osgeo.org
>  >> ?>> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >> ?>>
>  >> ?>
>  >> ?_______________________________________________
>  >> ?gdal-dev mailing list
>  >> ?gdal-dev@lists.osgeo.org
>  >> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >>
>  >
>  
From Jez.Walters at ipl.com  Mon Jul 12 07:27:33 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Mon Jul 12 07:30:43 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <AANLkTinOL5TtptntD_AxnGoTB61lIOR1ypKbOhkt0Aij@mail.gmail.com>
References: <4C2CAC67.40109@york.ac.uk>
	<11A8567A97B15648846060F5CD818EB842E7DB43D8@DEV001EX.Dev.cadcorp.net>
	<201007111212.32337.even.rouault@mines-paris.org>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE196@GOOFY.iplbath.com>
	<AANLkTinOL5TtptntD_AxnGoTB61lIOR1ypKbOhkt0Aij@mail.gmail.com>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A02980EFE207@GOOFY.iplbath.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.gif
Type: image/gif
Size: 2737 bytes
Desc: image001.gif
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100712/64add0c5/image001-0001.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.gif
Type: image/gif
Size: 2097 bytes
Desc: image002.gif
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100712/64add0c5/image002-0001.gif
From ivan.lucena at pmldnet.com  Mon Jul 12 07:38:16 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon Jul 12 07:38:18 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gR2VvUmFzdGVyOiBwcm9ibGVtIHVwZGF0aW5nIG9uIHByZWRlZmluZWQgZXhpc3RpbmcgdGFibGU=?=
Message-ID: <20100712113816.12627.qmail@s466.sureserver.com>

>  -------Original Message-------
>  From: Pasta Bolognese <pasta.bolognese@gmail.com>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] GeoRaster: problem updating on predefined existing table
>  Sent: Jul 12 '10 04:33
>  
>  Hi All,
>  
>  following http://www.gdal.org/frmt_georaster.html I've imported a
>  small immage using:
>  
>  C:\>gdal_translate -of georaster??c:\tmp\map.png
>  georaster:geoserver/geoserver,MFDEVDB
>  
>  and it works well. Then I've imported another immage using the same
>  command and it worked well too !

Note that you didn't specify table & column so a table named "GDAL_IMPORT", column "RASTER" was created for you as default.

>  
>  Then I have decided to use a predefined table.... and here the problems:
>  
>  C:\>gdal_translate -of georaster??c:\tmp\map.png
>  georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta

This command is missing the column name after "schema.table" so it is assuming column name "RASTER" as default. Does the table "pasta" existed before that command?

>  Input file size is 1014, 863
>  0...10...20...30...40...50...60...70...80...90...100 - done.
>  Ouput dataset: (georaster:geoserver,geoserver,MFDEVDB,RDT_33$,33) on
>  PASTA,RASTER
>  
>  C:\>gdal_translate -of georaster??c:\tmp\map.png
>  georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta
>  Input file size is 1014, 863
>  ERROR 1: ORA-00955: name is already used by an existing object
>  ORA-06512: at line 10
>  
>  ERROR 1: Create Table Error!
>  

Again, this command is missing the column name too, so I believe it is trying to re-create the table "Pasta" with column "RASTER". Whatever is happening is caused by the error on the command. 

Please, see more info at: http://www.oracle.com/technology/products/spatial/htdocs/spatial_opensource.html

Regards.

>  
>  any ideas ?
>  
>  how can I update an existing raster on an existing table ?
>  
>  thanks
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From mail2vajram at gmail.com  Mon Jul 12 08:07:00 2010
From: mail2vajram at gmail.com (mail2vajram)
Date: Mon Jul 12 08:07:02 2010
Subject: [gdal-dev] how to read the color value of particular pixel
Message-ID: <1278936420654-5282620.post@n2.nabble.com>


i want to know how to read the color value of particular pixel. and
previously i used the following code to read the color table.but now it 
throws null reference exception.why?. My objective is to prepare the Rater
legend control based on pixel values.


 Gdal.AllRegister();
            Dataset ds = Gdal.Open(@"D:\pr.IMG", Access.GA_ReadOnly);
            Band band = ds.GetRasterBand(1);
            ColorTable ct = band.GetRasterColorTable();
            ArrayList arraylist = new ArrayList();
            for (int i = 0; i < ct.GetCount(); i++)
            {
                ColorEntry ce = ct.GetColorEntry(i);
                Color cr1 = Color.FromArgb(ce.c4, ce.c1, ce.c2, ce.c3);
                arraylist.Add(cr1);
            }           
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/how-to-read-the-color-value-of-particular-pixel-tp5282620p5282620.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Mon Jul 12 08:22:48 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jul 12 08:22:53 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey 
	MasterMap
In-Reply-To: <2F7776B4033D3B45BC0301B783F3A8A02980EFE207@GOOFY.iplbath.com>
References: <4C2CAC67.40109@york.ac.uk>
	<11A8567A97B15648846060F5CD818EB842E7DB43D8@DEV001EX.Dev.cadcorp.net>
	<201007111212.32337.even.rouault@mines-paris.org>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE196@GOOFY.iplbath.com>
	<AANLkTinOL5TtptntD_AxnGoTB61lIOR1ypKbOhkt0Aij@mail.gmail.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE207@GOOFY.iplbath.com>
Message-ID: <AANLkTimmEDDZHQzi8MsK4KXaGjsxWpSmbfGnPmR7mSTu@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 2097 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100712/bdae945a/attachment-0002.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 2737 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100712/bdae945a/attachment-0003.gif
From chaitanya.ch at gmail.com  Mon Jul 12 08:26:37 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jul 12 08:26:40 2010
Subject: [gdal-dev] how to read the color value of particular pixel
In-Reply-To: <1278936420654-5282620.post@n2.nabble.com>
References: <1278936420654-5282620.post@n2.nabble.com>
Message-ID: <AANLkTinumS5eO6DtJ2acefPtU7-S240kc9JS0YT_Cj_j@mail.gmail.com>

Vajram,

You should check if the object ct, is null after band.GetRasterColorTable().
Perhaps there is no color table for D:\pr.IMG

On Mon, Jul 12, 2010 at 5:37 PM, mail2vajram <mail2vajram@gmail.com> wrote:

>
> i want to know how to read the color value of particular pixel. and
> previously i used the following code to read the color table.but now it
> throws null reference exception.why?. My objective is to prepare the Rater
> legend control based on pixel values.
>
>
>  Gdal.AllRegister();
>            Dataset ds = Gdal.Open(@"D:\pr.IMG", Access.GA_ReadOnly);
>            Band band = ds.GetRasterBand(1);
>            ColorTable ct = band.GetRasterColorTable();
>            ArrayList arraylist = new ArrayList();
>            for (int i = 0; i < ct.GetCount(); i++)
>            {
>                ColorEntry ce = ct.GetColorEntry(i);
>                Color cr1 = Color.FromArgb(ce.c4, ce.c1, ce.c2, ce.c3);
>                arraylist.Add(cr1);
>            }
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/how-to-read-the-color-value-of-particular-pixel-tp5282620p5282620.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100712/1986481b/attachment.html
From ahmettemiz88 at gmail.com  Mon Jul 12 08:36:19 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Mon Jul 12 08:36:21 2010
Subject: [gdal-dev] Linestring that are within Polygon
Message-ID: <AANLkTik62CM5pyRqnryn6ysCrOgnsS1dIJ9usjf6BEPT@mail.gmail.com>

hello

 have two "shp" files.

One is in linestring geometry, the other is in polygon.

I want to create a new shp file as in linestring that are within polygon.

how can I do that with ogr2ogr ?

regards
From warmerdam at pobox.com  Mon Jul 12 08:59:59 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jul 12 09:00:04 2010
Subject: [gdal-dev] OGR Driver for Norwegian SOSI standard
In-Reply-To: <1278931564694-5282431.post@n2.nabble.com>
References: <1278931564694-5282431.post@n2.nabble.com>
Message-ID: <4C3B11CF.8060504@pobox.com>

relet wrote:
> Dear all,
> 
> During the last month, we have developed an OGR driver for the Norwegian
> SOSI standard[1]. It has reached a state[2] where it can be used to read and
> use the basic features from SOSI files in OGR-enabled application like
> mapserver. The standard itself is the national standard for representation
> of geographic data. It is quite extensive, up to covering typographic
> settings for label placement - hence a full access to all features via OGR
> probably won't be possible anyway. 
> 
> We would like to contribute the driver to the OGR library, and maybe have
> someone review the code from an OGR perspective. What is the best way to
> proceed? I could of course append some code to the ticket, but that doesn't
> seem to be a long-term solution. :) 
> 
> The driver is depending on an external library, FYBA[3] for reading (and
> eventually writing) SOSI files. That library is currently released as binary
> VC++ DLL only, but is written to support a variety of architectures. I have
> ported it to linux, and we are working on releasing the source code.
> Hopefully that'll just take some more time. Taking that into account, it
> worksforme on both Windows and Linux, and will be continuously extended in
> the near future.
> 
> Where should I put the code and who wants to read it? 

Thomas,

I would suggest you go ahead and submit the current code via a ticket.
After a brief review we will hopefully be sufficiently convinced of
your development bona-fides that we can motion for you to become a GDAL
committer.  Once such a motion passes you can takes care of ongoing
maintenance (and perhaps the initial integration) yourself with perhaps
some support for other GDAL/OGR developers.

I would encourage you to review the committer guidelines at:

  http://trac.osgeo.org/gdal/wiki/rfc3_commiters

Once the motion is made, you should respond to it indicating that you
are prepared to abide by these guidelines, assuming that is true.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pasta.bolognese at gmail.com  Mon Jul 12 09:54:49 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Mon Jul 12 10:01:48 2010
Subject: [gdal-dev] GeoRaster: problem updating on predefined existing 
	table
In-Reply-To: <20100712113816.12627.qmail@s466.sureserver.com>
References: <20100712113816.12627.qmail@s466.sureserver.com>
Message-ID: <AANLkTimlt4j9MSVjpfUXPd0JXuHvWwljOv1TpiCHPvMW@mail.gmail.com>

> >
> > ?C:\>gdal_translate -of georaster??c:\tmp\map.png
> > ?georaster:geoserver/geoserver,MFDEVDB
> >
> > ?and it works well. Then I've imported another immage using the same
> > ?command and it worked well too !
>
> Note that you didn't specify table & column so a table named "GDAL_IMPORT", column "RASTER" was created for you as default.

exactly

>
> >
> > ?Then I have decided to use a predefined table.... and here the problems:
> >
> > ?C:\>gdal_translate -of georaster??c:\tmp\map.png
> > ?georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta
>
> This command is missing the column name after "schema.table" so it is assuming column name "RASTER" as default. Does the table "pasta" existed before that command?

exactly. The table PASTA is created automatically by the command itself.

>
> > ?Input file size is 1014, 863
> > ?0...10...20...30...40...50...60...70...80...90...100 - done.
> > ?Ouput dataset: (georaster:geoserver,geoserver,MFDEVDB,RDT_33$,33) on
> > ?PASTA,RASTER
> >

at this point the table is created by GDAL

> > ?C:\>gdal_translate -of georaster??c:\tmp\map.png
> > ?georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta
> > ?Input file size is 1014, 863
> > ?ERROR 1: ORA-00955: name is already used by an existing object
> > ?ORA-06512: at line 10
> >
> > ?ERROR 1: Create Table Error!
> >
>
> Again, this command is missing the column name too, so I believe it is trying to re-create the table "Pasta" with column "RASTER". Whatever is happening is caused by the error on the command.
>

At this point GDAL should add a new line to the same table....

infact even giving the table name and the column name: (again, the
table is created automatically by GDAL)


C:\>gdal_translate -of georaster  c:\tmp\map.png
georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta,raster
Input file size is 1014, 863
0...10...20...30...40...50...60...70...80...90...100 - done.
Ouput dataset: (georaster:geoserver,geoserver,MFDEVDB,RDT_42$,42) on
PASTA,RASTER

C:\>gdal_translate -of georaster  c:\tmp\map.png
georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta,raster
Input file size is 1014, 863
ERROR 1: ORA-00955: name is already used by an existing object
ORA-06512: at line 10

ERROR 1: Create Table Error!
From pasta.bolognese at gmail.com  Mon Jul 12 10:59:06 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Mon Jul 12 10:59:08 2010
Subject: [gdal-dev] GeoRaster: problem updating on predefined existing 
	table
In-Reply-To: <AANLkTimlt4j9MSVjpfUXPd0JXuHvWwljOv1TpiCHPvMW@mail.gmail.com>
References: <20100712113816.12627.qmail@s466.sureserver.com>
	<AANLkTimlt4j9MSVjpfUXPd0JXuHvWwljOv1TpiCHPvMW@mail.gmail.com>
Message-ID: <AANLkTikwXt9R-SP_uoa6_qdcXv60dyDad7ZS5_uTChfE@mail.gmail.com>

doing more experiments it results that the error is given ONLY when
the schema is given.

gdal_translate -of georaster c:\tmp\map.png ^
               georaster:geoserver/geoserver,MFDEVDB,GEOSERVER.PASTA
_RASTERS,raster ^
               -co "INSERT=VALUES(SDO_GEOR.INIT('pasta_rdt_01'))"

It is using the table GEOSERVER.PASTA _RASTERS. It would work only
once. After that it would give the same error ORA-00955)

gdal_translate -of georaster c:\tmp\map.png ^
               georaster:geoserver/geoserver,MFDEVDB,PASTA _RASTERS,raster ^
               -co "INSERT=VALUES(SDO_GEOR.INIT('pasta_rdt_01'))"

It is using the table PASTA _RASTERSThis would work all the time..

Is it working as expected ?

On Mon, Jul 12, 2010 at 2:54 PM, Pasta Bolognese
<pasta.bolognese@gmail.com> wrote:
>> >
>> > ?C:\>gdal_translate -of georaster??c:\tmp\map.png
>> > ?georaster:geoserver/geoserver,MFDEVDB
>> >
>> > ?and it works well. Then I've imported another immage using the same
>> > ?command and it worked well too !
>>
>> Note that you didn't specify table & column so a table named "GDAL_IMPORT", column "RASTER" was created for you as default.
>
> exactly
>
>>
>> >
>> > ?Then I have decided to use a predefined table.... and here the problems:
>> >
>> > ?C:\>gdal_translate -of georaster??c:\tmp\map.png
>> > ?georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta
>>
>> This command is missing the column name after "schema.table" so it is assuming column name "RASTER" as default. Does the table "pasta" existed before that command?
>
> exactly. The table PASTA is created automatically by the command itself.
>
>>
>> > ?Input file size is 1014, 863
>> > ?0...10...20...30...40...50...60...70...80...90...100 - done.
>> > ?Ouput dataset: (georaster:geoserver,geoserver,MFDEVDB,RDT_33$,33) on
>> > ?PASTA,RASTER
>> >
>
> at this point the table is created by GDAL
>
>> > ?C:\>gdal_translate -of georaster??c:\tmp\map.png
>> > ?georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta
>> > ?Input file size is 1014, 863
>> > ?ERROR 1: ORA-00955: name is already used by an existing object
>> > ?ORA-06512: at line 10
>> >
>> > ?ERROR 1: Create Table Error!
>> >
>>
>> Again, this command is missing the column name too, so I believe it is trying to re-create the table "Pasta" with column "RASTER". Whatever is happening is caused by the error on the command.
>>
>
> At this point GDAL should add a new line to the same table....
>
> infact even giving the table name and the column name: (again, the
> table is created automatically by GDAL)
>
>
> C:\>gdal_translate -of georaster ?c:\tmp\map.png
> georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta,raster
> Input file size is 1014, 863
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> Ouput dataset: (georaster:geoserver,geoserver,MFDEVDB,RDT_42$,42) on
> PASTA,RASTER
>
> C:\>gdal_translate -of georaster ?c:\tmp\map.png
> georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta,raster
> Input file size is 1014, 863
> ERROR 1: ORA-00955: name is already used by an existing object
> ORA-06512: at line 10
>
> ERROR 1: Create Table Error!
>
From Jez.Walters at ipl.com  Mon Jul 12 12:09:16 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Mon Jul 12 12:09:24 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <201007111212.32337.even.rouault@mines-paris.org>
References: <4C2CAC67.40109@york.ac.uk>
	<11A8567A97B15648846060F5CD818EB842E7DB43D8@DEV001EX.Dev.cadcorp.net>
	<201007111212.32337.even.rouault@mines-paris.org>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A02980EFE2BA@GOOFY.iplbath.com>

Even,


I've just rebuilt GDAL/OGR using the latest code from the GDAL 'trunk', but now I get the following error using ogr2ogr to convert an OS MasterMap chunk (e.g. http://www.ordnancesurvey.co.uk/oswebsite/products/innovations/sampledata/OSMasterMap_Topo/58116-SX9192-2c1.gz) into ESRI shapefiles:

"ERROR 6: Can't create fields of type StringList on shapefile layers."

The various fields for which this error is reported do not appear to be in the resultant shapefiles. Unfortunately this makes the new GDAL code unusable for me.  :-(

Any thoughts?


Jez


-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org]
Sent: Sunday 11 July 2010 11:12
To: gdal-dev@lists.osgeo.org
Cc: Martin Daly; Peter J Halls; Jez Walters
Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap

Just to inform you that now that the NAS driver is in GDAL trunk, I've been 
able to port its enhancements to the main GML driver. On the few samples I've 
tested, OS Mastermap GML files seem to be read correctly now.

See http://trac.osgeo.org/gdal/ticket/3680

Le Friday 02 July 2010 09:04:38 Martin Daly, vous avez ?crit?:
> >     Here it is not only GDAL/OGR that has a problem!  Currently, I know
> > of no importer that can handle this construct, other than the tool (from
> > Snowflake) used by OSGB to generate it - and there is also the question
> > of onwards storage.
>
> Not even close, I'm afraid.
>
> There are plenty of tools to read (all parts of) OS MM:
>
> http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/information/
>technical/software.html
>
> e.g. (an excellent one, at a very reasonable price...)
>
> http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/information/
>technical/software/cadcorp.html
>
> Also, as far as I am aware, OS GB use in-house software to generate the
> data.
>
> Martin
> ***************************************************************************
>* This email is confidential and may be privileged and should not be used,
> read or copied by anyone who is not the  original intended recipient. If
> you have received this email in error  please inform the sender and delete
> it from your mailbox or any other storage mechanism. Unless specifically
> stated, nothing in this email constitutes an offer by Cadcorp and Cadcorp
> does not warrant that any information contained in this email is accurate.
> Cadcorp cannot accept liability for any statements made which are clearly
> the sender's own and not expressly made on behalf of Cadcorp or one of its
> agents. Please rely on your own virus check. No responsibility is taken by
> Cadcorp for any damage arising out of any bug or virus infection.
> ***************************************************************************
>*
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

From even.rouault at mines-paris.org  Mon Jul 12 14:04:00 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jul 12 14:04:18 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <2F7776B4033D3B45BC0301B783F3A8A02980EFE2BA@GOOFY.iplbath.com>
References: <4C2CAC67.40109@york.ac.uk>
	<201007111212.32337.even.rouault@mines-paris.org>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE2BA@GOOFY.iplbath.com>
Message-ID: <201007122004.01556.even.rouault@mines-paris.org>

Jez,

Yes this is a limitation of the shapefile format (and most drivers, PostgreSQL 
databases being one of the exceptions).

Try adding -fieldTypeToString IntegerList,RealList,StringList to your ogr2ogr 
command line. This will transform any field of those types into a String 
field by concatenating the values into a single string (what you can see with 
ogrinfo). Beware that if the list if longer more than a few items, there will 
be a truncation at 80 characters.

I'm considering to see if it's practical or not to add an option to ogr2ogr to 
split fields of type *List into several fields of simple type. 

Best regards,

Even

PS: For the record, in http://download.osgeo.org/gdal/daily/, you can find 
daily snapshots of the source code of the trunk (1.8.0dev) and the 1.7 stable 
branch.

Le Monday 12 July 2010 18:09:16 Jez Walters, vous avez ?crit?:
> Even,
>
>
> I've just rebuilt GDAL/OGR using the latest code from the GDAL 'trunk', but
> now I get the following error using ogr2ogr to convert an OS MasterMap
> chunk (e.g.
> http://www.ordnancesurvey.co.uk/oswebsite/products/innovations/sampledata/O
>SMasterMap_Topo/58116-SX9192-2c1.gz) into ESRI shapefiles:
>
> "ERROR 6: Can't create fields of type StringList on shapefile layers."
>
> The various fields for which this error is reported do not appear to be in
> the resultant shapefiles. Unfortunately this makes the new GDAL code
> unusable for me.  :-(
>
> Any thoughts?
>
>
> Jez
>
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Sunday 11 July 2010 11:12
> To: gdal-dev@lists.osgeo.org
> Cc: Martin Daly; Peter J Halls; Jez Walters
> Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
> MasterMap
>
> Just to inform you that now that the NAS driver is in GDAL trunk, I've been
> able to port its enhancements to the main GML driver. On the few samples
> I've tested, OS Mastermap GML files seem to be read correctly now.
>
> See http://trac.osgeo.org/gdal/ticket/3680
>
> Le Friday 02 July 2010 09:04:38 Martin Daly, vous avez ?crit?:
> > >     Here it is not only GDAL/OGR that has a problem!  Currently, I know
> > > of no importer that can handle this construct, other than the tool
> > > (from Snowflake) used by OSGB to generate it - and there is also the
> > > question of onwards storage.
> >
> > Not even close, I'm afraid.
> >
> > There are plenty of tools to read (all parts of) OS MM:
> >
> > http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informatio
> >n/ technical/software.html
> >
> > e.g. (an excellent one, at a very reasonable price...)
> >
> > http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informatio
> >n/ technical/software/cadcorp.html
> >
> > Also, as far as I am aware, OS GB use in-house software to generate the
> > data.
> >
> > Martin
> > *************************************************************************
> >** * This email is confidential and may be privileged and should not be
> > used, read or copied by anyone who is not the  original intended
> > recipient. If you have received this email in error  please inform the
> > sender and delete it from your mailbox or any other storage mechanism.
> > Unless specifically stated, nothing in this email constitutes an offer by
> > Cadcorp and Cadcorp does not warrant that any information contained in
> > this email is accurate. Cadcorp cannot accept liability for any
> > statements made which are clearly the sender's own and not expressly made
> > on behalf of Cadcorp or one of its agents. Please rely on your own virus
> > check. No responsibility is taken by Cadcorp for any damage arising out
> > of any bug or virus infection.
> > *************************************************************************
> >** *
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> The information transmitted is intended only for the person
> or entity to which it is addressed and may contain
> confidential and/or privileged material. If you are not the
> addressee, any disclosure, reproduction, copying,
> distribution, or other dissemination or use of this
> communication is strictly prohibited. If you have received
> this transmission in error please notify the sender
> immediately and then delete this email.
>
> Any representations or commitments expressed in this email
> are subject to contract.
>
> This message has been scanned for viruses and dangerous
> content. However, it is essential that the recipient also
> checks this message using commercially available mail
> scanning and anti-virus software. IPL Information Processing
> Limited accepts no liability for any loss or damage resulting
> from any virus or other dangerous content in this message.
>
> IPL Information Processing Limited is registered in England
> and Wales under company registration number 1418818.
> Registration took place at Cardiff on 10 May 1979. IPL
> Information Processing Limited's registered office and
> normal place of business is Eveleigh House, Grove Street,
> Bath, BA1 5LR, United Kingdom. IPL is also registered for
> Value Added Tax (VAT) under registration number GB 601 2931 83.


From even.rouault at mines-paris.org  Mon Jul 12 17:09:18 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jul 12 17:09:30 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <201007122004.01556.even.rouault@mines-paris.org>
References: <4C2CAC67.40109@york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE2BA@GOOFY.iplbath.com>
	<201007122004.01556.even.rouault@mines-paris.org>
Message-ID: <201007122309.20649.even.rouault@mines-paris.org>

Jez,

if you checkout latest GDAL trunk, you'll find a new -splitlistfields option 
for ogr2ogr that will split fields of type IntegerList, RealList or 
StringList into as many subfields of single type as necessary. You can also 
specify -maxsubfields an_integer_value to limit the number of subfields (can 
be usefull if you just want to keep the first element of the list, or to keep 
the number of subfields to a reasonable number, as some features from your 
GML file have a big number of elements in the list)

Even

Le Monday 12 July 2010 20:04:00 Even Rouault, vous avez ?crit?:
> Jez,
>
> Yes this is a limitation of the shapefile format (and most drivers,
> PostgreSQL databases being one of the exceptions).
>
> Try adding -fieldTypeToString IntegerList,RealList,StringList to your
> ogr2ogr command line. This will transform any field of those types into a
> String field by concatenating the values into a single string (what you can
> see with ogrinfo). Beware that if the list if longer more than a few items,
> there will be a truncation at 80 characters.
>
> I'm considering to see if it's practical or not to add an option to ogr2ogr
> to split fields of type *List into several fields of simple type.
>
> Best regards,
>
> Even
>
> PS: For the record, in http://download.osgeo.org/gdal/daily/, you can find
> daily snapshots of the source code of the trunk (1.8.0dev) and the 1.7
> stable branch.
>
> Le Monday 12 July 2010 18:09:16 Jez Walters, vous avez ?crit?:
> > Even,
> >
> >
> > I've just rebuilt GDAL/OGR using the latest code from the GDAL 'trunk',
> > but now I get the following error using ogr2ogr to convert an OS
> > MasterMap chunk (e.g.
> > http://www.ordnancesurvey.co.uk/oswebsite/products/innovations/sampledata
> >/O SMasterMap_Topo/58116-SX9192-2c1.gz) into ESRI shapefiles:
> >
> > "ERROR 6: Can't create fields of type StringList on shapefile layers."
> >
> > The various fields for which this error is reported do not appear to be
> > in the resultant shapefiles. Unfortunately this makes the new GDAL code
> > unusable for me.  :-(
> >
> > Any thoughts?
> >
> >
> > Jez
> >
> >
> > -----Original Message-----
> > From: Even Rouault [mailto:even.rouault@mines-paris.org]
> > Sent: Sunday 11 July 2010 11:12
> > To: gdal-dev@lists.osgeo.org
> > Cc: Martin Daly; Peter J Halls; Jez Walters
> > Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
> > MasterMap
> >
> > Just to inform you that now that the NAS driver is in GDAL trunk, I've
> > been able to port its enhancements to the main GML driver. On the few
> > samples I've tested, OS Mastermap GML files seem to be read correctly
> > now.
> >
> > See http://trac.osgeo.org/gdal/ticket/3680
> >
> > Le Friday 02 July 2010 09:04:38 Martin Daly, vous avez ?crit?:
> > > >     Here it is not only GDAL/OGR that has a problem!  Currently, I
> > > > know of no importer that can handle this construct, other than the
> > > > tool (from Snowflake) used by OSGB to generate it - and there is also
> > > > the question of onwards storage.
> > >
> > > Not even close, I'm afraid.
> > >
> > > There are plenty of tools to read (all parts of) OS MM:
> > >
> > > http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informat
> > >io n/ technical/software.html
> > >
> > > e.g. (an excellent one, at a very reasonable price...)
> > >
> > > http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informat
> > >io n/ technical/software/cadcorp.html
> > >
> > > Also, as far as I am aware, OS GB use in-house software to generate the
> > > data.
> > >
> > > Martin
> > > ***********************************************************************
> > >** ** * This email is confidential and may be privileged and should not
> > > be used, read or copied by anyone who is not the  original intended
> > > recipient. If you have received this email in error  please inform the
> > > sender and delete it from your mailbox or any other storage mechanism.
> > > Unless specifically stated, nothing in this email constitutes an offer
> > > by Cadcorp and Cadcorp does not warrant that any information contained
> > > in this email is accurate. Cadcorp cannot accept liability for any
> > > statements made which are clearly the sender's own and not expressly
> > > made on behalf of Cadcorp or one of its agents. Please rely on your own
> > > virus check. No responsibility is taken by Cadcorp for any damage
> > > arising out of any bug or virus infection.
> > > ***********************************************************************
> > >** ** *
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > The information transmitted is intended only for the person
> > or entity to which it is addressed and may contain
> > confidential and/or privileged material. If you are not the
> > addressee, any disclosure, reproduction, copying,
> > distribution, or other dissemination or use of this
> > communication is strictly prohibited. If you have received
> > this transmission in error please notify the sender
> > immediately and then delete this email.
> >
> > Any representations or commitments expressed in this email
> > are subject to contract.
> >
> > This message has been scanned for viruses and dangerous
> > content. However, it is essential that the recipient also
> > checks this message using commercially available mail
> > scanning and anti-virus software. IPL Information Processing
> > Limited accepts no liability for any loss or damage resulting
> > from any virus or other dangerous content in this message.
> >
> > IPL Information Processing Limited is registered in England
> > and Wales under company registration number 1418818.
> > Registration took place at Cardiff on 10 May 1979. IPL
> > Information Processing Limited's registered office and
> > normal place of business is Eveleigh House, Grove Street,
> > Bath, BA1 5LR, United Kingdom. IPL is also registered for
> > Value Added Tax (VAT) under registration number GB 601 2931 83.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From ivan.lucena at pmldnet.com  Mon Jul 12 21:11:14 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon Jul 12 21:11:16 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gR2VvUmFzdGVyOiBwcm9ibGVtIHVwZGF0aW5nIG9uIHByZWRlZmluZWQgZXhpc3RpbmcgdGFibGU=?=
Message-ID: <20100713011114.20389.qmail@s466.sureserver.com>

I just noticed from your ticket [http://trac.osgeo.org/gdal/ticket/3681] that you are using GDAL 1.6.3. Right? 

A lot has changed since then. I run the same sequence of options as you and everything works fine in GDAL 1.8dev. 

I believe it should work fine with the current released version too. GDAL 1.7.2.

Please update it and try again.

Regards.

>  -------Original Message-------
>  From: Pasta Bolognese <pasta.bolognese@gmail.com>
>  To: Ivan Lucena <ivan.lucena@pmldnet.com>
>  Cc: gdal-dev@lists.osgeo.org
>  Subject: Re: [gdal-dev] GeoRaster: problem updating on predefined existing table
>  Sent: Jul 12 '10 09:59
>  
>  doing more experiments it results that the error is given ONLY when
>  the schema is given.
>  
>  gdal_translate -of georaster c:\tmp\map.png ^
>  ?????????????? georaster:geoserver/geoserver,MFDEVDB,GEOSERVER.PASTA
>  _RASTERS,raster ^
>  ?????????????? -co "INSERT=VALUES(SDO_GEOR.INIT('pasta_rdt_01'))"
>  
>  It is using the table GEOSERVER.PASTA _RASTERS. It would work only
>  once. After that it would give the same error ORA-00955)
>  
>  gdal_translate -of georaster c:\tmp\map.png ^
>  ?????????????? georaster:geoserver/geoserver,MFDEVDB,PASTA _RASTERS,raster ^
>  ?????????????? -co "INSERT=VALUES(SDO_GEOR.INIT('pasta_rdt_01'))"
>  
>  It is using the table PASTA _RASTERSThis would work all the time..
>  
>  Is it working as expected ?
>  
>  On Mon, Jul 12, 2010 at 2:54 PM, Pasta Bolognese
>  <pasta.bolognese@gmail.com> wrote:
>  >> >
>  >> > ?C:\>gdal_translate -of georaster??c:\tmp\map.png
>  >> > ?georaster:geoserver/geoserver,MFDEVDB
>  >> >
>  >> > ?and it works well. Then I've imported another immage using the same
>  >> > ?command and it worked well too !
>  >>
>  >> Note that you didn't specify table & column so a table named "GDAL_IMPORT", column "RASTER" was created for you as default.
>  >
>  > exactly
>  >
>  >>
>  >> >
>  >> > ?Then I have decided to use a predefined table.... and here the problems:
>  >> >
>  >> > ?C:\>gdal_translate -of georaster??c:\tmp\map.png
>  >> > ?georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta
>  >>
>  >> This command is missing the column name after "schema.table" so it is assuming column name "RASTER" as default. Does the table "pasta" existed before that command?
>  >
>  > exactly. The table PASTA is created automatically by the command itself.
>  >
>  >>
>  >> > ?Input file size is 1014, 863
>  >> > ?0...10...20...30...40...50...60...70...80...90...100 - done.
>  >> > ?Ouput dataset: (georaster:geoserver,geoserver,MFDEVDB,RDT_33$,33) on
>  >> > ?PASTA,RASTER
>  >> >
>  >
>  > at this point the table is created by GDAL
>  >
>  >> > ?C:\>gdal_translate -of georaster??c:\tmp\map.png
>  >> > ?georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta
>  >> > ?Input file size is 1014, 863
>  >> > ?ERROR 1: ORA-00955: name is already used by an existing object
>  >> > ?ORA-06512: at line 10
>  >> >
>  >> > ?ERROR 1: Create Table Error!
>  >> >
>  >>
>  >> Again, this command is missing the column name too, so I believe it is trying to re-create the table "Pasta" with column "RASTER". Whatever is happening is caused by the error on the command.
>  >>
>  >
>  > At this point GDAL should add a new line to the same table....
>  >
>  > infact even giving the table name and the column name: (again, the
>  > table is created automatically by GDAL)
>  >
>  >
>  > C:\>gdal_translate -of georaster ?c:\tmp\map.png
>  > georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta,raster
>  > Input file size is 1014, 863
>  > 0...10...20...30...40...50...60...70...80...90...100 - done.
>  > Ouput dataset: (georaster:geoserver,geoserver,MFDEVDB,RDT_42$,42) on
>  > PASTA,RASTER
>  >
>  > C:\>gdal_translate -of georaster ?c:\tmp\map.png
>  > georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta,raster
>  > Input file size is 1014, 863
>  > ERROR 1: ORA-00955: name is already used by an existing object
>  > ORA-06512: at line 10
>  >
>  > ERROR 1: Create Table Error!
>  >
>  
From P.Halls at york.ac.uk  Tue Jul 13 03:16:45 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Tue Jul 13 03:16:53 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <201007122309.20649.even.rouault@mines-paris.org>
References: <4C2CAC67.40109@york.ac.uk>	<2F7776B4033D3B45BC0301B783F3A8A02980EFE2BA@GOOFY.iplbath.com>	<201007122004.01556.even.rouault@mines-paris.org>
	<201007122309.20649.even.rouault@mines-paris.org>
Message-ID: <4C3C12DD.30401@york.ac.uk>

Even, Jez,

    sadly, I am not going to be able to try this out myself for at least a 
couple of weeks, due to other commitments.

    I think Even's solution to split the multiple entries into a large number of 
simple entries is workable, however I do have a couple of caveats.  I think this 
is pragmatic and the only viable approach for the majority of output structures 
which, like Shapefiles / dBase IV, cannot support list columns.  I think that 
this should be adequate for those who require to draw maps from these data - the 
cartographic instructions should be easily handled by this solution; my doubts 
concern the use of these data as inputs to analytic processes.  My caveats are:

1) I would like to know how many such columns are present for each 'list' and 
how many were found.  For example, the limit might be set at 80 but there be 85 
in the source, so I would like to know that for a particular record only a 
subset / the first 'n' have been stored.  This gives the possibility of making 
adjustments to the parameters.  Of course, it also takes up a couple of precious 
columns per list entry, reducing further the proportion of the list that can be 
recorded ...

2) This 'list' structure is used by OS for both 'informational' entries, eg 
changeHistory, and 'data' entries, eg referenceToTopograhicArea (which lists all 
the TOIDS that comprise a complex feature such as, for example, 'Station Road' 
in ITN).    In this case, OS are adopting a similar approach to that used by 
ESRI for the old 'coverage' format, by not repeating the geometry but creating 
the geometry once and then making pointers to those parts of the geometry 
required for a specific purpose.  Here, truncation of the list means that the 
output data may not be usable for the intended purpose.  Unfortunately, other 
than using lists, I cannot see a viable alternative as there can be many 
thousand of these - which can easily exceed the maximum number of columns 
permitted in several of the output formats.  I had originally been considering 
comma separated lists in a single string, but these can quickly exceed the 
maximum string length, which brings us back to the reasons for Even's solution.

This is a form of topology embedded within the OS data and it might be that it 
is desirable to continue with the 'no topology here' principle.  This is another 
of the 'problems', in that many (most today?) spatial data structures are not 
designed to store topology, however topology does have its uses.

3) What to do when a limit is reached.  As I have not had the chance to try 
Even's development yet I do not know what approach has been chosen.  From the 
perspective of using the output, I guess that I want a list of the FIDs (TOIDS) 
which contain truncated data structures: this would permit some measure of 
choice when handling these data ... a sort of 'exceptions list'.  Of course, 
this does not permit the recovery of the lost data ... nor does it allow me to 
differentiate between those columns that do not matter to me and those that do 
but it may be the most practical approach.

Enough: I must try Even's work out for myself ...

Thanks and best wishes,

Peter


Even Rouault wrote:
> Jez,
> 
> if you checkout latest GDAL trunk, you'll find a new -splitlistfields option 
> for ogr2ogr that will split fields of type IntegerList, RealList or 
> StringList into as many subfields of single type as necessary. You can also 
> specify -maxsubfields an_integer_value to limit the number of subfields (can 
> be usefull if you just want to keep the first element of the list, or to keep 
> the number of subfields to a reasonable number, as some features from your 
> GML file have a big number of elements in the list)
> 
> Even
> 
> Le Monday 12 July 2010 20:04:00 Even Rouault, vous avez ?crit :
>> Jez,
>>
>> Yes this is a limitation of the shapefile format (and most drivers,
>> PostgreSQL databases being one of the exceptions).
>>
>> Try adding -fieldTypeToString IntegerList,RealList,StringList to your
>> ogr2ogr command line. This will transform any field of those types into a
>> String field by concatenating the values into a single string (what you can
>> see with ogrinfo). Beware that if the list if longer more than a few items,
>> there will be a truncation at 80 characters.
>>
>> I'm considering to see if it's practical or not to add an option to ogr2ogr
>> to split fields of type *List into several fields of simple type.
>>
>> Best regards,
>>
>> Even
>>
>> PS: For the record, in http://download.osgeo.org/gdal/daily/, you can find
>> daily snapshots of the source code of the trunk (1.8.0dev) and the 1.7
>> stable branch.
>>
>> Le Monday 12 July 2010 18:09:16 Jez Walters, vous avez ?crit :
>>> Even,
>>>
>>>
>>> I've just rebuilt GDAL/OGR using the latest code from the GDAL 'trunk',
>>> but now I get the following error using ogr2ogr to convert an OS
>>> MasterMap chunk (e.g.
>>> http://www.ordnancesurvey.co.uk/oswebsite/products/innovations/sampledata
>>> /O SMasterMap_Topo/58116-SX9192-2c1.gz) into ESRI shapefiles:
>>>
>>> "ERROR 6: Can't create fields of type StringList on shapefile layers."
>>>
>>> The various fields for which this error is reported do not appear to be
>>> in the resultant shapefiles. Unfortunately this makes the new GDAL code
>>> unusable for me.  :-(
>>>
>>> Any thoughts?
>>>
>>>
>>> Jez
>>>
>>>
>>> -----Original Message-----
>>> From: Even Rouault [mailto:even.rouault@mines-paris.org]
>>> Sent: Sunday 11 July 2010 11:12
>>> To: gdal-dev@lists.osgeo.org
>>> Cc: Martin Daly; Peter J Halls; Jez Walters
>>> Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
>>> MasterMap
>>>
>>> Just to inform you that now that the NAS driver is in GDAL trunk, I've
>>> been able to port its enhancements to the main GML driver. On the few
>>> samples I've tested, OS Mastermap GML files seem to be read correctly
>>> now.
>>>
>>> See http://trac.osgeo.org/gdal/ticket/3680
>>>
>>> Le Friday 02 July 2010 09:04:38 Martin Daly, vous avez ?crit :
>>>>>     Here it is not only GDAL/OGR that has a problem!  Currently, I
>>>>> know of no importer that can handle this construct, other than the
>>>>> tool (from Snowflake) used by OSGB to generate it - and there is also
>>>>> the question of onwards storage.
>>>> Not even close, I'm afraid.
>>>>
>>>> There are plenty of tools to read (all parts of) OS MM:
>>>>
>>>> http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informat
>>>> io n/ technical/software.html
>>>>
>>>> e.g. (an excellent one, at a very reasonable price...)
>>>>
>>>> http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informat
>>>> io n/ technical/software/cadcorp.html
>>>>
>>>> Also, as far as I am aware, OS GB use in-house software to generate the
>>>> data.
>>>>
>>>> Martin
>>>> ***********************************************************************
>>>> ** ** * This email is confidential and may be privileged and should not
>>>> be used, read or copied by anyone who is not the  original intended
>>>> recipient. If you have received this email in error  please inform the
>>>> sender and delete it from your mailbox or any other storage mechanism.
>>>> Unless specifically stated, nothing in this email constitutes an offer
>>>> by Cadcorp and Cadcorp does not warrant that any information contained
>>>> in this email is accurate. Cadcorp cannot accept liability for any
>>>> statements made which are clearly the sender's own and not expressly
>>>> made on behalf of Cadcorp or one of its agents. Please rely on your own
>>>> virus check. No responsibility is taken by Cadcorp for any damage
>>>> arising out of any bug or virus infection.
>>>> ***********************************************************************
>>>> ** ** *
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> The information transmitted is intended only for the person
>>> or entity to which it is addressed and may contain
>>> confidential and/or privileged material. If you are not the
>>> addressee, any disclosure, reproduction, copying,
>>> distribution, or other dissemination or use of this
>>> communication is strictly prohibited. If you have received
>>> this transmission in error please notify the sender
>>> immediately and then delete this email.
>>>
>>> Any representations or commitments expressed in this email
>>> are subject to contract.
>>>
>>> This message has been scanned for viruses and dangerous
>>> content. However, it is essential that the recipient also
>>> checks this message using commercially available mail
>>> scanning and anti-virus software. IPL Information Processing
>>> Limited accepts no liability for any loss or damage resulting
>>> from any virus or other dangerous content in this message.
>>>
>>> IPL Information Processing Limited is registered in England
>>> and Wales under company registration number 1418818.
>>> Registration took place at Cardiff on 10 May 1979. IPL
>>> Information Processing Limited's registered office and
>>> normal place of business is Eveleigh House, Grove Street,
>>> Bath, BA1 5LR, United Kingdom. IPL is also registered for
>>> Value Added Tax (VAT) under registration number GB 601 2931 83.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From pasta.bolognese at gmail.com  Tue Jul 13 04:18:44 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Tue Jul 13 04:18:46 2010
Subject: [gdal-dev] GeoRaster: problem updating on predefined existing 
	table
In-Reply-To: <20100713011114.20389.qmail@s466.sureserver.com>
References: <20100713011114.20389.qmail@s466.sureserver.com>
Message-ID: <AANLkTineOZtcHd72-9LS4OsjWsQaVVFFEELP61c3GVd_@mail.gmail.com>

that is a good news ! so now I need just to wait that the OSGeo4W
team add the gdal17-oracle package.

thanks !

On Tue, Jul 13, 2010 at 2:11 AM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
> I just noticed from your ticket [http://trac.osgeo.org/gdal/ticket/3681] that you are using GDAL 1.6.3. Right?
>
> A lot has changed since then. I run the same sequence of options as you and everything works fine in GDAL 1.8dev.
>
> I believe it should work fine with the current released version too. GDAL 1.7.2.
>
> Please update it and try again.
>
> Regards.
>
>> ?-------Original Message-------
>> ?From: Pasta Bolognese <pasta.bolognese@gmail.com>
>> ?To: Ivan Lucena <ivan.lucena@pmldnet.com>
>> ?Cc: gdal-dev@lists.osgeo.org
>> ?Subject: Re: [gdal-dev] GeoRaster: problem updating on predefined existing table
>> ?Sent: Jul 12 '10 09:59
>>
>> ?doing more experiments it results that the error is given ONLY when
>> ?the schema is given.
>>
>> ?gdal_translate -of georaster c:\tmp\map.png ^
>> ??????????????? georaster:geoserver/geoserver,MFDEVDB,GEOSERVER.PASTA
>> ?_RASTERS,raster ^
>> ??????????????? -co "INSERT=VALUES(SDO_GEOR.INIT('pasta_rdt_01'))"
>>
>> ?It is using the table GEOSERVER.PASTA _RASTERS. It would work only
>> ?once. After that it would give the same error ORA-00955)
>>
>> ?gdal_translate -of georaster c:\tmp\map.png ^
>> ??????????????? georaster:geoserver/geoserver,MFDEVDB,PASTA _RASTERS,raster ^
>> ??????????????? -co "INSERT=VALUES(SDO_GEOR.INIT('pasta_rdt_01'))"
>>
>> ?It is using the table PASTA _RASTERSThis would work all the time..
>>
>> ?Is it working as expected ?
>>
>> ?On Mon, Jul 12, 2010 at 2:54 PM, Pasta Bolognese
>> ?<pasta.bolognese@gmail.com> wrote:
>> ?>> >
>> ?>> > ?C:\>gdal_translate -of georaster??c:\tmp\map.png
>> ?>> > ?georaster:geoserver/geoserver,MFDEVDB
>> ?>> >
>> ?>> > ?and it works well. Then I've imported another immage using the same
>> ?>> > ?command and it worked well too !
>> ?>>
>> ?>> Note that you didn't specify table & column so a table named "GDAL_IMPORT", column "RASTER" was created for you as default.
>> ?>
>> ?> exactly
>> ?>
>> ?>>
>> ?>> >
>> ?>> > ?Then I have decided to use a predefined table.... and here the problems:
>> ?>> >
>> ?>> > ?C:\>gdal_translate -of georaster??c:\tmp\map.png
>> ?>> > ?georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta
>> ?>>
>> ?>> This command is missing the column name after "schema.table" so it is assuming column name "RASTER" as default. Does the table "pasta" existed before that command?
>> ?>
>> ?> exactly. The table PASTA is created automatically by the command itself.
>> ?>
>> ?>>
>> ?>> > ?Input file size is 1014, 863
>> ?>> > ?0...10...20...30...40...50...60...70...80...90...100 - done.
>> ?>> > ?Ouput dataset: (georaster:geoserver,geoserver,MFDEVDB,RDT_33$,33) on
>> ?>> > ?PASTA,RASTER
>> ?>> >
>> ?>
>> ?> at this point the table is created by GDAL
>> ?>
>> ?>> > ?C:\>gdal_translate -of georaster??c:\tmp\map.png
>> ?>> > ?georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta
>> ?>> > ?Input file size is 1014, 863
>> ?>> > ?ERROR 1: ORA-00955: name is already used by an existing object
>> ?>> > ?ORA-06512: at line 10
>> ?>> >
>> ?>> > ?ERROR 1: Create Table Error!
>> ?>> >
>> ?>>
>> ?>> Again, this command is missing the column name too, so I believe it is trying to re-create the table "Pasta" with column "RASTER". Whatever is happening is caused by the error on the command.
>> ?>>
>> ?>
>> ?> At this point GDAL should add a new line to the same table....
>> ?>
>> ?> infact even giving the table name and the column name: (again, the
>> ?> table is created automatically by GDAL)
>> ?>
>> ?>
>> ?> C:\>gdal_translate -of georaster ?c:\tmp\map.png
>> ?> georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta,raster
>> ?> Input file size is 1014, 863
>> ?> 0...10...20...30...40...50...60...70...80...90...100 - done.
>> ?> Ouput dataset: (georaster:geoserver,geoserver,MFDEVDB,RDT_42$,42) on
>> ?> PASTA,RASTER
>> ?>
>> ?> C:\>gdal_translate -of georaster ?c:\tmp\map.png
>> ?> georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta,raster
>> ?> Input file size is 1014, 863
>> ?> ERROR 1: ORA-00955: name is already used by an existing object
>> ?> ORA-06512: at line 10
>> ?>
>> ?> ERROR 1: Create Table Error!
>> ?>
>>
>
From thomas.hirsch at statkart.no  Tue Jul 13 05:05:15 2010
From: thomas.hirsch at statkart.no (relet)
Date: Tue Jul 13 05:05:17 2010
Subject: [gdal-dev] Re: OGR Driver for Norwegian SOSI standard
In-Reply-To: <4C3B11CF.8060504@pobox.com>
References: <1278931564694-5282431.post@n2.nabble.com>
	<4C3B11CF.8060504@pobox.com>
Message-ID: <1279011915927-5286583.post@n2.nabble.com>


Thanks Frank.

I have attached the current driver code to the ticket and added a short
explanation
http://trac.osgeo.org/gdal/ticket/3638#comment:1

I hope that works for you. In case there are any questions I'll be glad to
be of assistance to whomever wishes to review the driver, also by chat or
voice if preferred. 

Best regards,
Thomas
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/OGR-Driver-for-Norwegian-SOSI-standard-tp5282431p5286583.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jamesm at lantic.net  Tue Jul 13 06:10:19 2010
From: jamesm at lantic.net (James Meyer)
Date: Tue Jul 13 06:11:25 2010
Subject: [gdal-dev] MEM Datasets
Message-ID: <4C3C3B8B.1050407@lantic.net>

Hi

I am trying to use MEM (In-memory) datasets with GDAL.
However, on trying to close the dataset I get a segmentation fault.
The dataset is created successfully. The handle returned is valid and I 
am able to read and write to it.

Am I not supposed to try and close the handle or am I doing something 
else wrong?

The code is as follows:

//************************************************
  char filename[255];
  int datasize = 100 * 100 * (GDALGetDataTypeSize(GDT_Byte) / 8);

   void* data = malloc(datasize);
   sprintf(filename,
     "MEM:::DATAPOINTER=%p,PIXELS=%d,LINES=%d,BANDS=%d,DATATYPE=%s",
&data, 100, 100, 1, GDALGetDataTypeName(GDT_Byte));


   GDALDatasetH dst = GDALOpen(filename,GA_Update);
   GDALDataset* dest = (GDALDataset*) dst;

   if (! dest )
   {
      printf("Failed to open Dataset");
   }
   GDALClose(dst); //This fails
   free(data);
//**************************************************

Thanks

James
From chaitanya.ch at gmail.com  Tue Jul 13 07:37:35 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 13 07:37:38 2010
Subject: [gdal-dev] MEM Datasets
In-Reply-To: <4C3C3B8B.1050407@lantic.net>
References: <4C3C3B8B.1050407@lantic.net>
Message-ID: <AANLkTilCCZ0Lzb7GwtedcDo27P2K3LKX-2PSDkahC8xD@mail.gmail.com>

James,

You forgot to call GDALAllRegister() before opening the dataset. Then you
will not get a NULL with GDALOpen().
http://www.gdal.org/gdal_tutorial.html

On Tue, Jul 13, 2010 at 3:40 PM, James Meyer <jamesm@lantic.net> wrote:

> Hi
>
> I am trying to use MEM (In-memory) datasets with GDAL.
> However, on trying to close the dataset I get a segmentation fault.
> The dataset is created successfully. The handle returned is valid and I am
> able to read and write to it.
>
> Am I not supposed to try and close the handle or am I doing something else
> wrong?
>
> The code is as follows:
>
> //************************************************
>  char filename[255];
>  int datasize = 100 * 100 * (GDALGetDataTypeSize(GDT_Byte) / 8);
>
>  void* data = malloc(datasize);
>  sprintf(filename,
>    "MEM:::DATAPOINTER=%p,PIXELS=%d,LINES=%d,BANDS=%d,DATATYPE=%s",
> &data, 100, 100, 1, GDALGetDataTypeName(GDT_Byte));
>
>
>  GDALDatasetH dst = GDALOpen(filename,GA_Update);
>  GDALDataset* dest = (GDALDataset*) dst;
>
>  if (! dest )
>  {
>     printf("Failed to open Dataset");
>  }
>  GDALClose(dst); //This fails
>  free(data);
> //**************************************************
>
> Thanks
>
> James
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100713/d8f717f0/attachment.html
From jamesm at lantic.net  Tue Jul 13 08:29:23 2010
From: jamesm at lantic.net (James Meyer)
Date: Tue Jul 13 08:30:37 2010
Subject: [gdal-dev] MEM Datasets
In-Reply-To: <AANLkTilCCZ0Lzb7GwtedcDo27P2K3LKX-2PSDkahC8xD@mail.gmail.com>
References: <4C3C3B8B.1050407@lantic.net>
	<AANLkTilCCZ0Lzb7GwtedcDo27P2K3LKX-2PSDkahC8xD@mail.gmail.com>
Message-ID: <4C3C5C23.7020006@lantic.net>

Hi

Actually I did call it.
Sorry I just didn't include it in the code because it was much earlier 
in the program.

However after some playing around, it seems that the error only occurs 
IF I did a write to the MEM dataset. (Although it occurs WHEN I close it).

The code I am using to test is below line-for-line exact. I basically 
read from an existing dataset (known to be GDT_Byte) into the in-memory 
dataset.

It seems like some sort of buffer overflow, because if I delete the last 
two lines (that frees the buffers) I get a long "stack smash detected" 
printout in stead of a segmenation fault.

Can you see anything I am doing wrong?

Thanks

//************************************************
GDALAllRegister();
  char filename[255];
int sizey = 100;
int sizex = 100;
  int datasize = sizex * sizey * (GDALGetDataTypeSize(GDT_Byte) / 8);

  void* data = malloc(datasize);
  sprintf(filename,
    "MEM:::DATAPOINTER=%p,PIXELS=%d,LINES=%d,BANDS=%d,DATATYPE=%s",
&data, 100, 100, 1, GDALGetDataTypeName(GDT_Byte));

  GDALDatasetH dst = GDALOpen(filename,GA_Update);
  GDALDataset* dest = (GDALDataset*) dst;
  GDALRasterBand * destBand = dest->GetRasterBand(1);

GDALDataset* source = (GDALDataset*) GDALOpen("images/ref.pix", 
GA_ReadOnly);
GDALRasterBand* sourceBand = source->GetRasterBand(1);

  if (! dest || !source )
  {
     printf("Failed to open Dataset");
  }

void* buffer = malloc(sizex*sizey); //For byte data type

   if (CE_Failure == sourceBand->RasterIO(GF_Read, 0, 0,sizex, sizey, 
buffer, sizex, sizey, GDT_Byte ,0,0))
     printf("READ FAILED");

   if (CE_Failure ==destBand->RasterIO(GF_Write, 0, 0,sizex, sizey, 
buffer, sizex, sizey, GDT_Byte,0,0 ))
    printf("WRITE FAILED");

printf("Releasing Resources\n");

  GDALClose(dst);
  free(data);
free(buffer);

//**************************************************
On 13/07/2010 13:37, Chaitanya kumar CH wrote:
> James,
>
> You forgot to call GDALAllRegister() before opening the dataset. Then 
> you will not get a NULL with GDALOpen().
> http://www.gdal.org/gdal_tutorial.html
>
> On Tue, Jul 13, 2010 at 3:40 PM, James Meyer <jamesm@lantic.net 
> <mailto:jamesm@lantic.net>> wrote:
>
>     Hi
>
>     I am trying to use MEM (In-memory) datasets with GDAL.
>     However, on trying to close the dataset I get a segmentation fault.
>     The dataset is created successfully. The handle returned is valid
>     and I am able to read and write to it.
>
>     Am I not supposed to try and close the handle or am I doing
>     something else wrong?
>
>     The code is as follows:
>
>     //************************************************
>      char filename[255];
>      int datasize = 100 * 100 * (GDALGetDataTypeSize(GDT_Byte) / 8);
>
>      void* data = malloc(datasize);
>      sprintf(filename,
>        "MEM:::DATAPOINTER=%p,PIXELS=%d,LINES=%d,BANDS=%d,DATATYPE=%s",
>     &data, 100, 100, 1, GDALGetDataTypeName(GDT_Byte));
>
>
>      GDALDatasetH dst = GDALOpen(filename,GA_Update);
>      GDALDataset* dest = (GDALDataset*) dst;
>
>      if (! dest )
>      {
>         printf("Failed to open Dataset");
>      }
>      GDALClose(dst); //This fails
>      free(data);
>     //**************************************************
>
>     Thanks
>
>     James
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
From warmerdam at pobox.com  Tue Jul 13 08:33:49 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jul 13 08:33:57 2010
Subject: [gdal-dev] MEM Datasets
In-Reply-To: <4C3C5C23.7020006@lantic.net>
References: <4C3C3B8B.1050407@lantic.net>
	<AANLkTilCCZ0Lzb7GwtedcDo27P2K3LKX-2PSDkahC8xD@mail.gmail.com>
	<4C3C5C23.7020006@lantic.net>
Message-ID: <4C3C5D2D.9080205@pobox.com>

James Meyer wrote:
> Hi
> 
> Actually I did call it.
> Sorry I just didn't include it in the code because it was much earlier 
> in the program.
> 
> However after some playing around, it seems that the error only occurs 
> IF I did a write to the MEM dataset. (Although it occurs WHEN I close it).
> 
> The code I am using to test is below line-for-line exact. I basically 
> read from an existing dataset (known to be GDT_Byte) into the in-memory 
> dataset.
> 
> It seems like some sort of buffer overflow, because if I delete the last 
> two lines (that frees the buffers) I get a long "stack smash detected" 
> printout in stead of a segmenation fault.
> 
> Can you see anything I am doing wrong?
...
>>      void* data = malloc(datasize);
>>      sprintf(filename,
>>        "MEM:::DATAPOINTER=%p,PIXELS=%d,LINES=%d,BANDS=%d,DATATYPE=%s",
>>     &data, 100, 100, 1, GDALGetDataTypeName(GDT_Byte));

James,

In the sprintf() you should be passing "data" instead of "&data".  Currently
you are passing the pointer to the pointer "data" on the stack which is only
4-8 bytes long and that is being used, and written past, blowing the stack.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From marc.jacquin at magellium.fr  Tue Jul 13 09:15:47 2010
From: marc.jacquin at magellium.fr (Marc Jacquin)
Date: Tue Jul 13 09:15:52 2010
Subject: [gdal-dev] RGB to gray 8 bits JPEG
Message-ID: <6222B75E25A9413EA5EADAE3B08C1E8C@pp035>

Hi all again,

 

Using the GDAL CSharp binding, I am trying to convert RGB data from a
Dataset (MEM driver) to 8 bits gray scaled JPEG.

 

I create a ColorTable of GPI_Gray interpretation type and populate it with
CreateColorRamp with ColorEntries from 0,0,0 to 255,255,255.

I set the color interpretation for the new (MEM driver) dataset single band
to GCI_GrayIndex.

Then use DitherRGB2PCT and finally CreateCopy with the JPEG driver.

But the output remains empty (1 colour : 0,0,0).

 

I tried to figure out how gdal_translate may do it with the -expand gray
option but it uses a VRTSourcedRasterBand which does not seem to be
available in CSharp.

 

Thanks,

 

Marc

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100713/915cd5e3/attachment-0001.html
From marc.jacquin at magellium.fr  Tue Jul 13 08:48:43 2010
From: marc.jacquin at magellium.fr (Marc Jacquin)
Date: Tue Jul 13 09:29:24 2010
Subject: [gdal-dev] JPEG2K ECW and Erdas ER Viewer
Message-ID: <6AA4EF0A62294AE3ADC2C4A3720A744C@pp035>

Hi all,

 

We are generating JP2 ECW images with GDAL CSharp binding. OpenEV displays
them correctly and the gdalinfo reports correct corner coordinates. However,
Erdas ER Viewer version 10 (formerly ERMapper Viewer) cannot find coordinate
information. Any idea?

 

Thanks,

 

Marc

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100713/2831e00e/attachment.html
From jamesm at lantic.net  Tue Jul 13 09:59:58 2010
From: jamesm at lantic.net (James Meyer)
Date: Tue Jul 13 10:00:12 2010
Subject: [gdal-dev] MEM Datasets
In-Reply-To: <4C3C5D2D.9080205@pobox.com>
References: <4C3C3B8B.1050407@lantic.net>
	<AANLkTilCCZ0Lzb7GwtedcDo27P2K3LKX-2PSDkahC8xD@mail.gmail.com>
	<4C3C5C23.7020006@lantic.net> <4C3C5D2D.9080205@pobox.com>
Message-ID: <4C3C715E.5030509@lantic.net>

Ah yes that's it.

Thanks a lot!

On 7/13/2010 2:33 PM, Frank Warmerdam wrote:
> James Meyer wrote:
>> Hi
>>
>> Actually I did call it.
>> Sorry I just didn't include it in the code because it was much 
>> earlier in the program.
>>
>> However after some playing around, it seems that the error only 
>> occurs IF I did a write to the MEM dataset. (Although it occurs WHEN 
>> I close it).
>>
>> The code I am using to test is below line-for-line exact. I basically 
>> read from an existing dataset (known to be GDT_Byte) into the 
>> in-memory dataset.
>>
>> It seems like some sort of buffer overflow, because if I delete the 
>> last two lines (that frees the buffers) I get a long "stack smash 
>> detected" printout in stead of a segmenation fault.
>>
>> Can you see anything I am doing wrong?
> ...
>>>      void* data = malloc(datasize);
>>>      sprintf(filename,
>>>        "MEM:::DATAPOINTER=%p,PIXELS=%d,LINES=%d,BANDS=%d,DATATYPE=%s",
>>> &data, 100, 100, 1, GDALGetDataTypeName(GDT_Byte));
>
> James,
>
> In the sprintf() you should be passing "data" instead of "&data".  
> Currently
> you are passing the pointer to the pointer "data" on the stack which 
> is only
> 4-8 bytes long and that is being used, and written past, blowing the 
> stack.
>
> Best regards,
From jrepetto at free.fr  Tue Jul 13 10:24:34 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Tue Jul 13 10:25:10 2010
Subject: [gdal-dev] JPEG2K ECW and Erdas ER Viewer
In-Reply-To: <6AA4EF0A62294AE3ADC2C4A3720A744C@pp035>
References: <6AA4EF0A62294AE3ADC2C4A3720A744C@pp035>
Message-ID: <4C3C7722.3050704@free.fr>

Le 13/07/2010 14:48, Marc Jacquin a ?crit :
> Hi all,
>
> We are generating JP2 ECW images with GDAL CSharp binding. OpenEV
> displays them correctly and the gdalinfo reports correct corner
> coordinates. However, Erdas ER Viewer version 10 (formerly ERMapper
> Viewer) cannot find coordinate information. Any idea?
>

Hi Marc,

You can check the datum, projection and coordinates data of your ECW 
file with "ECW Header Editor", available at 
<http://www.erdas.com/Products/ERDASProductInformation/tabid/84/currentid/2508/default.aspx> 
.

Jean-Claude
From warmerdam at pobox.com  Tue Jul 13 10:26:10 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jul 13 10:26:15 2010
Subject: [gdal-dev] JPEG2K ECW and Erdas ER Viewer
In-Reply-To: <6AA4EF0A62294AE3ADC2C4A3720A744C@pp035>
References: <6AA4EF0A62294AE3ADC2C4A3720A744C@pp035>
Message-ID: <4C3C7782.3040404@pobox.com>

Marc Jacquin wrote:
> Hi all,
> 
>  
> 
> We are generating JP2 ECW images with GDAL CSharp binding. OpenEV 
> displays them correctly and the gdalinfo reports correct corner 
> coordinates. However, Erdas ER Viewer version 10 (formerly ERMapper 
> Viewer) cannot find coordinate information. Any idea?

Marc,

After examining the sample file you provided, it seems the geotiff
georeferencing chunk in the .jp2 file does not have a coordinate system.
It may well be that the Erdas ER Viewer "gives up" on reading the
geotiff box if there is no coordinate system, and ignores the coordinates.
I'd suggest also setting a meaningful coordinate system on the file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From marc.jacquin at magellium.fr  Tue Jul 13 10:38:12 2010
From: marc.jacquin at magellium.fr (Marc Jacquin)
Date: Tue Jul 13 10:38:16 2010
Subject: [gdal-dev] JPEG2K ECW and Erdas ER Viewer
In-Reply-To: <4C3C7722.3050704@free.fr>
References: <6AA4EF0A62294AE3ADC2C4A3720A744C@pp035> <4C3C7722.3050704@free.fr>
Message-ID: <CB5E2610784C4406872613AC27404325@pp035>

Sorry guys, forget about it! You have to zoom once in ER Viewer or use the
measure tool once to display coordinate information. Moving the cursor over
the window or panning do not display coordinates in the bottom right area
when the file is opened.

Marc

-----Message d'origine-----
De?: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] De la part de Jean-Claude REPETTO
Envoy??: mardi 13 juillet 2010 16:25
??: gdal-dev@lists.osgeo.org
Objet?: Re: [gdal-dev] JPEG2K ECW and Erdas ER Viewer

Le 13/07/2010 14:48, Marc Jacquin a ?crit :
> Hi all,
>
> We are generating JP2 ECW images with GDAL CSharp binding. OpenEV
> displays them correctly and the gdalinfo reports correct corner
> coordinates. However, Erdas ER Viewer version 10 (formerly ERMapper
> Viewer) cannot find coordinate information. Any idea?
>

Hi Marc,

You can check the datum, projection and coordinates data of your ECW 
file with "ECW Header Editor", available at 
<http://www.erdas.com/Products/ERDASProductInformation/tabid/84/currentid/25
08/default.aspx> 
.

Jean-Claude
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Jez.Walters at ipl.com  Tue Jul 13 11:32:03 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Tue Jul 13 11:32:28 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <201007122309.20649.even.rouault@mines-paris.org>
References: <4C2CAC67.40109@york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE2BA@GOOFY.iplbath.com>
	<201007122004.01556.even.rouault@mines-paris.org>
	<201007122309.20649.even.rouault@mines-paris.org>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A02980EFE44E@GOOFY.iplbath.com>

Even,


My ultimate objective is to read OS MasterMap GML using MapServer, but MapServer skips various fields when reading this GML directly.  I don't know if this is a fault with GDAL/OGR or with how MapServer is calling it.  In order to overcome this restriction, I've been converting the GML to ESRI Shapefiles using ogr2ogr.  Fortunately, MapServer appears to have no difficulty reading ESRI Shapefiles!  :-)

I've been playing with your latest GDAL code and the '-splitlistfields' and '-maxsubfields 1' options let me do this conversion, but it does seem rather slow now.  Please don't misunderstand me, but given that GDAL v1.7.2 works too without these options it's difficult to see the gain for what I am trying to achieve.

Perhaps it would be possible to speed things up by combining the stages that produce the '.resolved.gml' and '.gfs' files?


Jez


-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org]
Sent: Monday 12 July 2010 22:09
To: gdal-dev@lists.osgeo.org
Cc: Jez Walters; 'Martin Daly'
Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap

Jez,

if you checkout latest GDAL trunk, you'll find a new -splitlistfields option for ogr2ogr that will split fields of type IntegerList, RealList or StringList into as many subfields of single type as necessary. You can also specify -maxsubfields an_integer_value to limit the number of subfields (can be usefull if you just want to keep the first element of the list, or to keep the number of subfields to a reasonable number, as some features from your GML file have a big number of elements in the list)

Even

Le Monday 12 July 2010 20:04:00 Even Rouault, vous avez ?crit?:
> Jez,
>
> Yes this is a limitation of the shapefile format (and most drivers,
> PostgreSQL databases being one of the exceptions).
>
> Try adding -fieldTypeToString IntegerList,RealList,StringList to your
> ogr2ogr command line. This will transform any field of those types into a
> String field by concatenating the values into a single string (what you can
> see with ogrinfo). Beware that if the list if longer more than a few items,
> there will be a truncation at 80 characters.
>
> I'm considering to see if it's practical or not to add an option to ogr2ogr
> to split fields of type *List into several fields of simple type.
>
> Best regards,
>
> Even
>
> PS: For the record, in http://download.osgeo.org/gdal/daily/, you can find
> daily snapshots of the source code of the trunk (1.8.0dev) and the 1.7
> stable branch.
>
> Le Monday 12 July 2010 18:09:16 Jez Walters, vous avez ?crit?:
> > Even,
> >
> >
> > I've just rebuilt GDAL/OGR using the latest code from the GDAL 'trunk',
> > but now I get the following error using ogr2ogr to convert an OS
> > MasterMap chunk (e.g.
> > http://www.ordnancesurvey.co.uk/oswebsite/products/innovations/sampledata
> >/O SMasterMap_Topo/58116-SX9192-2c1.gz) into ESRI shapefiles:
> >
> > "ERROR 6: Can't create fields of type StringList on shapefile layers."
> >
> > The various fields for which this error is reported do not appear to be
> > in the resultant shapefiles. Unfortunately this makes the new GDAL code
> > unusable for me.  :-(
> >
> > Any thoughts?
> >
> >
> > Jez
> >
> >
> > -----Original Message-----
> > From: Even Rouault [mailto:even.rouault@mines-paris.org]
> > Sent: Sunday 11 July 2010 11:12
> > To: gdal-dev@lists.osgeo.org
> > Cc: Martin Daly; Peter J Halls; Jez Walters
> > Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
> > MasterMap
> >
> > Just to inform you that now that the NAS driver is in GDAL trunk, I've
> > been able to port its enhancements to the main GML driver. On the few
> > samples I've tested, OS Mastermap GML files seem to be read correctly
> > now.
> >
> > See http://trac.osgeo.org/gdal/ticket/3680
> >
> > Le Friday 02 July 2010 09:04:38 Martin Daly, vous avez ?crit?:
> > > >     Here it is not only GDAL/OGR that has a problem!  Currently, I
> > > > know of no importer that can handle this construct, other than the
> > > > tool (from Snowflake) used by OSGB to generate it - and there is also
> > > > the question of onwards storage.
> > >
> > > Not even close, I'm afraid.
> > >
> > > There are plenty of tools to read (all parts of) OS MM:
> > >
> > > http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informat
> > >io n/ technical/software.html
> > >
> > > e.g. (an excellent one, at a very reasonable price...)
> > >
> > > http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informat
> > >io n/ technical/software/cadcorp.html
> > >
> > > Also, as far as I am aware, OS GB use in-house software to generate the
> > > data.
> > >
> > > Martin


The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

From chaitanya.ch at gmail.com  Tue Jul 13 11:51:07 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 13 11:51:11 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey 
	MasterMap
In-Reply-To: <2F7776B4033D3B45BC0301B783F3A8A02980EFE44E@GOOFY.iplbath.com>
References: <4C2CAC67.40109@york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE2BA@GOOFY.iplbath.com>
	<201007122004.01556.even.rouault@mines-paris.org>
	<201007122309.20649.even.rouault@mines-paris.org>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE44E@GOOFY.iplbath.com>
Message-ID: <AANLkTin-M05sNPbB239OHQCVrVaQdVUDqjD5sSRO3PxL@mail.gmail.com>

Jez,

If you don't have any xlinks in your GML files you can skip a bottle-neck by
setting the configuration option GML_SKIP_RESOLVE_ELEMS to ALL. Please note
that this is a quick and dirty fix. The code will change shortly.

On Tue, Jul 13, 2010 at 9:02 PM, Jez Walters <Jez.Walters@ipl.com> wrote:

> Even,
>
>
> My ultimate objective is to read OS MasterMap GML using MapServer, but
> MapServer skips various fields when reading this GML directly.  I don't know
> if this is a fault with GDAL/OGR or with how MapServer is calling it.  In
> order to overcome this restriction, I've been converting the GML to ESRI
> Shapefiles using ogr2ogr.  Fortunately, MapServer appears to have no
> difficulty reading ESRI Shapefiles!  :-)
>
> I've been playing with your latest GDAL code and the '-splitlistfields' and
> '-maxsubfields 1' options let me do this conversion, but it does seem rather
> slow now.  Please don't misunderstand me, but given that GDAL v1.7.2 works
> too without these options it's difficult to see the gain for what I am
> trying to achieve.
>
> Perhaps it would be possible to speed things up by combining the stages
> that produce the '.resolved.gml' and '.gfs' files?
>
>
> Jez
>
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Monday 12 July 2010 22:09
> To: gdal-dev@lists.osgeo.org
> Cc: Jez Walters; 'Martin Daly'
> Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
> MasterMap
>
> Jez,
>
> if you checkout latest GDAL trunk, you'll find a new -splitlistfields
> option for ogr2ogr that will split fields of type IntegerList, RealList or
> StringList into as many subfields of single type as necessary. You can also
> specify -maxsubfields an_integer_value to limit the number of subfields (can
> be usefull if you just want to keep the first element of the list, or to
> keep the number of subfields to a reasonable number, as some features from
> your GML file have a big number of elements in the list)
>
> Even
>
> Le Monday 12 July 2010 20:04:00 Even Rouault, vous avez ?crit :
> > Jez,
> >
> > Yes this is a limitation of the shapefile format (and most drivers,
> > PostgreSQL databases being one of the exceptions).
> >
> > Try adding -fieldTypeToString IntegerList,RealList,StringList to your
> > ogr2ogr command line. This will transform any field of those types into a
> > String field by concatenating the values into a single string (what you
> can
> > see with ogrinfo). Beware that if the list if longer more than a few
> items,
> > there will be a truncation at 80 characters.
> >
> > I'm considering to see if it's practical or not to add an option to
> ogr2ogr
> > to split fields of type *List into several fields of simple type.
> >
> > Best regards,
> >
> > Even
> >
> > PS: For the record, in http://download.osgeo.org/gdal/daily/, you can
> find
> > daily snapshots of the source code of the trunk (1.8.0dev) and the 1.7
> > stable branch.
> >
> > Le Monday 12 July 2010 18:09:16 Jez Walters, vous avez ?crit :
> > > Even,
> > >
> > >
> > > I've just rebuilt GDAL/OGR using the latest code from the GDAL 'trunk',
> > > but now I get the following error using ogr2ogr to convert an OS
> > > MasterMap chunk (e.g.
> > >
> http://www.ordnancesurvey.co.uk/oswebsite/products/innovations/sampledata
> > >/O SMasterMap_Topo/58116-SX9192-2c1.gz) into ESRI shapefiles:
> > >
> > > "ERROR 6: Can't create fields of type StringList on shapefile layers."
> > >
> > > The various fields for which this error is reported do not appear to be
> > > in the resultant shapefiles. Unfortunately this makes the new GDAL code
> > > unusable for me.  :-(
> > >
> > > Any thoughts?
> > >
> > >
> > > Jez
> > >
> > >
> > > -----Original Message-----
> > > From: Even Rouault [mailto:even.rouault@mines-paris.org]
> > > Sent: Sunday 11 July 2010 11:12
> > > To: gdal-dev@lists.osgeo.org
> > > Cc: Martin Daly; Peter J Halls; Jez Walters
> > > Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
> > > MasterMap
> > >
> > > Just to inform you that now that the NAS driver is in GDAL trunk, I've
> > > been able to port its enhancements to the main GML driver. On the few
> > > samples I've tested, OS Mastermap GML files seem to be read correctly
> > > now.
> > >
> > > See http://trac.osgeo.org/gdal/ticket/3680
> > >
> > > Le Friday 02 July 2010 09:04:38 Martin Daly, vous avez ?crit :
> > > > >     Here it is not only GDAL/OGR that has a problem!  Currently, I
> > > > > know of no importer that can handle this construct, other than the
> > > > > tool (from Snowflake) used by OSGB to generate it - and there is
> also
> > > > > the question of onwards storage.
> > > >
> > > > Not even close, I'm afraid.
> > > >
> > > > There are plenty of tools to read (all parts of) OS MM:
> > > >
> > > >
> http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informat
> > > >io n/ technical/software.html
> > > >
> > > > e.g. (an excellent one, at a very reasonable price...)
> > > >
> > > >
> http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informat
> > > >io n/ technical/software/cadcorp.html
> > > >
> > > > Also, as far as I am aware, OS GB use in-house software to generate
> the
> > > > data.
> > > >
> > > > Martin
>
>
> The information transmitted is intended only for the person
> or entity to which it is addressed and may contain
> confidential and/or privileged material. If you are not the
> addressee, any disclosure, reproduction, copying,
> distribution, or other dissemination or use of this
> communication is strictly prohibited. If you have received
> this transmission in error please notify the sender
> immediately and then delete this email.
>
> Any representations or commitments expressed in this email
> are subject to contract.
>
> This message has been scanned for viruses and dangerous
> content. However, it is essential that the recipient also
> checks this message using commercially available mail
> scanning and anti-virus software. IPL Information Processing
> Limited accepts no liability for any loss or damage resulting
> from any virus or other dangerous content in this message.
>
> IPL Information Processing Limited is registered in England
> and Wales under company registration number 1418818.
> Registration took place at Cardiff on 10 May 1979. IPL
> Information Processing Limited's registered office and
> normal place of business is Eveleigh House, Grove Street,
> Bath, BA1 5LR, United Kingdom. IPL is also registered for
> Value Added Tax (VAT) under registration number GB 601 2931 83.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100713/71a1708b/attachment-0001.html
From pasta.bolognese at gmail.com  Tue Jul 13 12:03:48 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Tue Jul 13 12:03:50 2010
Subject: [gdal-dev] GeoRaster COMPRESS=DEFLATE is not compressing
Message-ID: <AANLkTikzCUkZxFJsrg4Gx-giMHtq-hRuRDd_3d8LAc0o@mail.gmail.com>

Hi All,

to safe space, I'm trying the -co "COMPRESS=DEFLATE". but it is not
compressing !

C:\tmp>gdal_translate -of georaster c:\tmp\map.png ^
More?
georaster:geoserver/geoserver,MFDEVDB,geoserver.pasta_rasters,raster ^
More?                -co "INSERT=VALUES(SDO_GEOR.INIT('pasta_rdt_01'))" ^
More?                -co "COMPRESS=DEFLATE"
Input file size is 1014, 863
0...10...20...30...40...50...60...70...80...90...100 - done.
Ouput dataset: (georaster:geoserver,geoserver,MFDEVDB,PASTA_RDT_01,56)
on PASTA_RASTERS,RASTER

then from SQL

select sdo_geor.calcCompressionRatio(t.raster) from pasta_rasters t;

and I get 1...

infact if I run gdal_translate without COMPRESS, It is using exactly
the same amount of space (select * from user_segments;)

Any Ideas ?

thanks
From Jez.Walters at ipl.com  Tue Jul 13 12:09:41 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Tue Jul 13 12:09:48 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <AANLkTin-M05sNPbB239OHQCVrVaQdVUDqjD5sSRO3PxL@mail.gmail.com>
References: <4C2CAC67.40109@york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE2BA@GOOFY.iplbath.com>
	<201007122004.01556.even.rouault@mines-paris.org>
	<201007122309.20649.even.rouault@mines-paris.org>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE44E@GOOFY.iplbath.com>
	<AANLkTin-M05sNPbB239OHQCVrVaQdVUDqjD5sSRO3PxL@mail.gmail.com>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A02980EFE46F@GOOFY.iplbath.com>

Chaitanya,


Unfortunately (if I?m understanding you correctly) I can?t use the GML_SKIP_RESOLVE_ELEMS option, because the OS MasterMap GML contains lots of elements like this:

<osgb:referenceToFeature xlink:href='#osgb1000001788085778'/>

When you say ?this is a quick and dirty fix?, are you referring to the setting of the GML_SKIP_RESOLVE_ELEMS option, or do you mean that the latest GDAL code is in some sense temporary?


Jez


From: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
Sent: Tuesday 13 July 2010 16:51
To: Jez Walters
Cc: Even Rouault; gdal-dev@lists.osgeo.org; Martin Daly
Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap

Jez,

If you don't have any xlinks in your GML files you can skip a bottle-neck by setting the configuration option GML_SKIP_RESOLVE_ELEMS to ALL. Please note that this is a quick and dirty fix. The code will change shortly.
On Tue, Jul 13, 2010 at 9:02 PM, Jez Walters <Jez.Walters@ipl.com<mailto:Jez.Walters@ipl.com>> wrote:
Even,


My ultimate objective is to read OS MasterMap GML using MapServer, but MapServer skips various fields when reading this GML directly.  I don't know if this is a fault with GDAL/OGR or with how MapServer is calling it.  In order to overcome this restriction, I've been converting the GML to ESRI Shapefiles using ogr2ogr.  Fortunately, MapServer appears to have no difficulty reading ESRI Shapefiles!  :-)

I've been playing with your latest GDAL code and the '-splitlistfields' and '-maxsubfields 1' options let me do this conversion, but it does seem rather slow now.  Please don't misunderstand me, but given that GDAL v1.7.2 works too without these options it's difficult to see the gain for what I am trying to achieve.

Perhaps it would be possible to speed things up by combining the stages that produce the '.resolved.gml' and '.gfs' files?


Jez


-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org<mailto:even.rouault@mines-paris.org>]
Sent: Monday 12 July 2010 22:09
To: gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
Cc: Jez Walters; 'Martin Daly'
Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap

Jez,

if you checkout latest GDAL trunk, you'll find a new -splitlistfields option for ogr2ogr that will split fields of type IntegerList, RealList or StringList into as many subfields of single type as necessary. You can also specify -maxsubfields an_integer_value to limit the number of subfields (can be usefull if you just want to keep the first element of the list, or to keep the number of subfields to a reasonable number, as some features from your GML file have a big number of elements in the list)

Even

Le Monday 12 July 2010 20:04:00 Even Rouault, vous avez ?crit :
> Jez,
>
> Yes this is a limitation of the shapefile format (and most drivers,
> PostgreSQL databases being one of the exceptions).
>
> Try adding -fieldTypeToString IntegerList,RealList,StringList to your
> ogr2ogr command line. This will transform any field of those types into a
> String field by concatenating the values into a single string (what you can
> see with ogrinfo). Beware that if the list if longer more than a few items,
> there will be a truncation at 80 characters.
>
> I'm considering to see if it's practical or not to add an option to ogr2ogr
> to split fields of type *List into several fields of simple type.
>
> Best regards,
>
> Even
>
> PS: For the record, in http://download.osgeo.org/gdal/daily/, you can find
> daily snapshots of the source code of the trunk (1.8.0dev) and the 1.7
> stable branch.
>
> Le Monday 12 July 2010 18:09:16 Jez Walters, vous avez ?crit :
> > Even,
> >
> >
> > I've just rebuilt GDAL/OGR using the latest code from the GDAL 'trunk',
> > but now I get the following error using ogr2ogr to convert an OS
> > MasterMap chunk (e.g.
> > http://www.ordnancesurvey.co.uk/oswebsite/products/innovations/sampledata
> >/O SMasterMap_Topo/58116-SX9192-2c1.gz) into ESRI shapefiles:
> >
> > "ERROR 6: Can't create fields of type StringList on shapefile layers."
> >
> > The various fields for which this error is reported do not appear to be
> > in the resultant shapefiles. Unfortunately this makes the new GDAL code
> > unusable for me.  :-(
> >
> > Any thoughts?
> >
> >
> > Jez
> >
> >
> > -----Original Message-----
> > From: Even Rouault [mailto:even.rouault@mines-paris.org<mailto:even.rouault@mines-paris.org>]
> > Sent: Sunday 11 July 2010 11:12
> > To: gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
> > Cc: Martin Daly; Peter J Halls; Jez Walters
> > Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
> > MasterMap
> >
> > Just to inform you that now that the NAS driver is in GDAL trunk, I've
> > been able to port its enhancements to the main GML driver. On the few
> > samples I've tested, OS Mastermap GML files seem to be read correctly
> > now.
> >
> > See http://trac.osgeo.org/gdal/ticket/3680
> >
> > Le Friday 02 July 2010 09:04:38 Martin Daly, vous avez ?crit :
> > > >     Here it is not only GDAL/OGR that has a problem!  Currently, I
> > > > know of no importer that can handle this construct, other than the
> > > > tool (from Snowflake) used by OSGB to generate it - and there is also
> > > > the question of onwards storage.
> > >
> > > Not even close, I'm afraid.
> > >
> > > There are plenty of tools to read (all parts of) OS MM:
> > >
> > > http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informat
> > >io n/ technical/software.html
> > >
> > > e.g. (an excellent one, at a very reasonable price...)
> > >
> > > http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informat
> > >io n/ technical/software/cadcorp.html
> > >
> > > Also, as far as I am aware, OS GB use in-house software to generate the
> > > data.
> > >
> > > Martin

The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E


The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100713/b89da143/attachment-0001.html
From chaitanya.ch at gmail.com  Tue Jul 13 12:15:31 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 13 12:15:34 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey 
	MasterMap
In-Reply-To: <2F7776B4033D3B45BC0301B783F3A8A02980EFE46F@GOOFY.iplbath.com>
References: <4C2CAC67.40109@york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE2BA@GOOFY.iplbath.com>
	<201007122004.01556.even.rouault@mines-paris.org>
	<201007122309.20649.even.rouault@mines-paris.org>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE44E@GOOFY.iplbath.com>
	<AANLkTin-M05sNPbB239OHQCVrVaQdVUDqjD5sSRO3PxL@mail.gmail.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE46F@GOOFY.iplbath.com>
Message-ID: <AANLkTinWQB6ogMM0bjPQsWYX9eIMyNr8F1I-c9u8mQ6m@mail.gmail.com>

Jez,

I'm afraid xlink resolution is currently a slow process and I am still
working out some kinks in it. But if you want to resolve the xlinks you have
to go through creating the .resolved.gml file.
However, you can still make it faster if you think there are some elements
with xlinks which need not be resolved. You just have to mention them using
that option.
Detailed docs are at http://www.gdal.org/ogr/drv_gml.html.

On Tue, Jul 13, 2010 at 9:39 PM, Jez Walters <Jez.Walters@ipl.com> wrote:

>  Chaitanya,
>
>
>
> Unfortunately (if I?m understanding you correctly) I can?t use the
> GML_SKIP_RESOLVE_ELEMS option, because the OS MasterMap GML contains *lots
> * of elements like this:
>
>
>
> <osgb:referenceToFeature xlink:href='#osgb1000001788085778'/>
>
>
>
> When you say ?this is a quick and dirty fix?, are you referring to the
> setting of the GML_SKIP_RESOLVE_ELEMS option, or do you mean that the latest
> GDAL code is in some sense temporary?
>
>
>
>
>
> Jez
>
>
>
>
>
> *From:* Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
> *Sent:* Tuesday 13 July 2010 16:51
> *To:* Jez Walters
> *Cc:* Even Rouault; gdal-dev@lists.osgeo.org; Martin Daly
>
> *Subject:* Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
> MasterMap
>
>
>
> Jez,
>
> If you don't have any xlinks in your GML files you can skip a bottle-neck
> by setting the configuration option GML_SKIP_RESOLVE_ELEMS to ALL. Please
> note that this is a quick and dirty fix. The code will change shortly.
>
> On Tue, Jul 13, 2010 at 9:02 PM, Jez Walters <Jez.Walters@ipl.com> wrote:
>
> Even,
>
>
> My ultimate objective is to read OS MasterMap GML using MapServer, but
> MapServer skips various fields when reading this GML directly.  I don't know
> if this is a fault with GDAL/OGR or with how MapServer is calling it.  In
> order to overcome this restriction, I've been converting the GML to ESRI
> Shapefiles using ogr2ogr.  Fortunately, MapServer appears to have no
> difficulty reading ESRI Shapefiles!  :-)
>
> I've been playing with your latest GDAL code and the '-splitlistfields' and
> '-maxsubfields 1' options let me do this conversion, but it does seem rather
> slow now.  Please don't misunderstand me, but given that GDAL v1.7.2 works
> too without these options it's difficult to see the gain for what I am
> trying to achieve.
>
> Perhaps it would be possible to speed things up by combining the stages
> that produce the '.resolved.gml' and '.gfs' files?
>
>
>
> Jez
>
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
>
> Sent: Monday 12 July 2010 22:09
> To: gdal-dev@lists.osgeo.org
>
> Cc: Jez Walters; 'Martin Daly'
> Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
> MasterMap
>
> Jez,
>
> if you checkout latest GDAL trunk, you'll find a new -splitlistfields
> option for ogr2ogr that will split fields of type IntegerList, RealList or
> StringList into as many subfields of single type as necessary. You can also
> specify -maxsubfields an_integer_value to limit the number of subfields (can
> be usefull if you just want to keep the first element of the list, or to
> keep the number of subfields to a reasonable number, as some features from
> your GML file have a big number of elements in the list)
>
> Even
>
> Le Monday 12 July 2010 20:04:00 Even Rouault, vous avez ?crit :
> > Jez,
> >
> > Yes this is a limitation of the shapefile format (and most drivers,
> > PostgreSQL databases being one of the exceptions).
> >
> > Try adding -fieldTypeToString IntegerList,RealList,StringList to your
> > ogr2ogr command line. This will transform any field of those types into a
> > String field by concatenating the values into a single string (what you
> can
> > see with ogrinfo). Beware that if the list if longer more than a few
> items,
> > there will be a truncation at 80 characters.
> >
> > I'm considering to see if it's practical or not to add an option to
> ogr2ogr
> > to split fields of type *List into several fields of simple type.
> >
> > Best regards,
> >
> > Even
> >
> > PS: For the record, in http://download.osgeo.org/gdal/daily/, you can
> find
> > daily snapshots of the source code of the trunk (1.8.0dev) and the 1.7
> > stable branch.
> >
> > Le Monday 12 July 2010 18:09:16 Jez Walters, vous avez ?crit :
> > > Even,
> > >
> > >
> > > I've just rebuilt GDAL/OGR using the latest code from the GDAL 'trunk',
> > > but now I get the following error using ogr2ogr to convert an OS
> > > MasterMap chunk (e.g.
> > >
> http://www.ordnancesurvey.co.uk/oswebsite/products/innovations/sampledata
> > >/O SMasterMap_Topo/58116-SX9192-2c1.gz) into ESRI shapefiles:
> > >
> > > "ERROR 6: Can't create fields of type StringList on shapefile layers."
> > >
> > > The various fields for which this error is reported do not appear to be
> > > in the resultant shapefiles. Unfortunately this makes the new GDAL code
> > > unusable for me.  :-(
> > >
> > > Any thoughts?
> > >
> > >
> > > Jez
> > >
> > >
> > > -----Original Message-----
> > > From: Even Rouault [mailto:even.rouault@mines-paris.org]
> > > Sent: Sunday 11 July 2010 11:12
> > > To: gdal-dev@lists.osgeo.org
> > > Cc: Martin Daly; Peter J Halls; Jez Walters
> > > Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
> > > MasterMap
> > >
> > > Just to inform you that now that the NAS driver is in GDAL trunk, I've
> > > been able to port its enhancements to the main GML driver. On the few
> > > samples I've tested, OS Mastermap GML files seem to be read correctly
> > > now.
> > >
> > > See http://trac.osgeo.org/gdal/ticket/3680
> > >
> > > Le Friday 02 July 2010 09:04:38 Martin Daly, vous avez ?crit :
> > > > >     Here it is not only GDAL/OGR that has a problem!  Currently, I
> > > > > know of no importer that can handle this construct, other than the
> > > > > tool (from Snowflake) used by OSGB to generate it - and there is
> also
> > > > > the question of onwards storage.
> > > >
> > > > Not even close, I'm afraid.
> > > >
> > > > There are plenty of tools to read (all parts of) OS MM:
> > > >
> > > >
> http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informat
> > > >io n/ technical/software.html
> > > >
> > > > e.g. (an excellent one, at a very reasonable price...)
> > > >
> > > >
> http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informat
> > > >io n/ technical/software/cadcorp.html
> > > >
> > > > Also, as far as I am aware, OS GB use in-house software to generate
> the
> > > > data.
> > > >
> > > > Martin
>
>    The information transmitted is intended only for the person
> or entity to which it is addressed and may contain
> confidential and/or privileged material. If you are not the
> addressee, any disclosure, reproduction, copying,
> distribution, or other dissemination or use of this
> communication is strictly prohibited. If you have received
> this transmission in error please notify the sender
> immediately and then delete this email.
>
> Any representations or commitments expressed in this email
> are subject to contract.
>
> This message has been scanned for viruses and dangerous
> content. However, it is essential that the recipient also
> checks this message using commercially available mail
> scanning and anti-virus software. IPL Information Processing
> Limited accepts no liability for any loss or damage resulting
> from any virus or other dangerous content in this message.
>
> IPL Information Processing Limited is registered in England
> and Wales under company registration number 1418818.
> Registration took place at Cardiff on 10 May 1979. IPL
> Information Processing Limited's registered office and
> normal place of business is Eveleigh House, Grove Street,
> Bath, BA1 5LR, United Kingdom. IPL is also registered for
> Value Added Tax (VAT) under registration number GB 601 2931 83.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
> The information transmitted is intended only for the person or entity to
> which it is addressed and may contain confidential and/or privileged
> material. If you are not the addressee, any disclosure, reproduction,
> copying, distribution, or other dissemination or use of this communication
> is strictly prohibited. If you have received this transmission in error
> please notify the sender immediately and then delete this email.
>
> Any representations or commitments expressed in this email are subject to
> contract.
>
> This message has been scanned for viruses and dangerous content. However,
> it is essential that the recipient also checks this message using
> commercially available mail scanning and anti-virus software. IPL
> Information Processing Limited accepts no liability for any loss or damage
> resulting from any virus or other dangerous content in this message.
>
> IPL Information Processing Limited is registered in England and Wales under
> company registration number 1418818. Registration took place at Cardiff on
> 10 May 1979. IPL Information Processing Limited's registered office and
> normal place of business is Eveleigh House, Grove Street, Bath, BA1 5LR,
> United Kingdom. IPL is also registered for Value Added Tax (VAT) under
> registration number GB 601 2931 83.
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100713/74f46114/attachment.html
From Jez.Walters at ipl.com  Tue Jul 13 12:28:34 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Tue Jul 13 12:30:58 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <AANLkTinWQB6ogMM0bjPQsWYX9eIMyNr8F1I-c9u8mQ6m@mail.gmail.com>
References: <4C2CAC67.40109@york.ac.uk>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE2BA@GOOFY.iplbath.com>
	<201007122004.01556.even.rouault@mines-paris.org>
	<201007122309.20649.even.rouault@mines-paris.org>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE44E@GOOFY.iplbath.com>
	<AANLkTin-M05sNPbB239OHQCVrVaQdVUDqjD5sSRO3PxL@mail.gmail.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE46F@GOOFY.iplbath.com>
	<AANLkTinWQB6ogMM0bjPQsWYX9eIMyNr8F1I-c9u8mQ6m@mail.gmail.com>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A02980EFE470@GOOFY.iplbath.com>

Chaitanya,


I?m afraid I don?t understand GML enough to know which xlinks need resolving.  :-(  How can I determine this?

Also, you mention having to create the ?.resolved.gml? file, but this file isn?t produced by GDAL v1.7.2 ? or am I missing something?


Jez


From: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
Sent: Tuesday 13 July 2010 17:16
To: Jez Walters
Cc: Even Rouault; gdal-dev@lists.osgeo.org; Martin Daly
Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap

Jez,

I'm afraid xlink resolution is currently a slow process and I am still working out some kinks in it. But if you want to resolve the xlinks you have to go through creating the .resolved.gml file.
However, you can still make it faster if you think there are some elements with xlinks which need not be resolved. You just have to mention them using that option.
Detailed docs are at http://www.gdal.org/ogr/drv_gml.html.
On Tue, Jul 13, 2010 at 9:39 PM, Jez Walters <Jez.Walters@ipl.com<mailto:Jez.Walters@ipl.com>> wrote:
Chaitanya,

Unfortunately (if I?m understanding you correctly) I can?t use the GML_SKIP_RESOLVE_ELEMS option, because the OS MasterMap GML contains lots of elements like this:

<osgb:referenceToFeature xlink:href='#osgb1000001788085778'/>

When you say ?this is a quick and dirty fix?, are you referring to the setting of the GML_SKIP_RESOLVE_ELEMS option, or do you mean that the latest GDAL code is in some sense temporary?


Jez


From: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com<mailto:chaitanya.ch@gmail.com>]
Sent: Tuesday 13 July 2010 16:51
To: Jez Walters
Cc: Even Rouault; gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>; Martin Daly

Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap

Jez,

If you don't have any xlinks in your GML files you can skip a bottle-neck by setting the configuration option GML_SKIP_RESOLVE_ELEMS to ALL. Please note that this is a quick and dirty fix. The code will change shortly.
On Tue, Jul 13, 2010 at 9:02 PM, Jez Walters <Jez.Walters@ipl.com<mailto:Jez.Walters@ipl.com>> wrote:
Even,


My ultimate objective is to read OS MasterMap GML using MapServer, but MapServer skips various fields when reading this GML directly.  I don't know if this is a fault with GDAL/OGR or with how MapServer is calling it.  In order to overcome this restriction, I've been converting the GML to ESRI Shapefiles using ogr2ogr.  Fortunately, MapServer appears to have no difficulty reading ESRI Shapefiles!  :-)

I've been playing with your latest GDAL code and the '-splitlistfields' and '-maxsubfields 1' options let me do this conversion, but it does seem rather slow now.  Please don't misunderstand me, but given that GDAL v1.7.2 works too without these options it's difficult to see the gain for what I am trying to achieve.

Perhaps it would be possible to speed things up by combining the stages that produce the '.resolved.gml' and '.gfs' files?


Jez


-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org<mailto:even.rouault@mines-paris.org>]
Sent: Monday 12 July 2010 22:09
To: gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
Cc: Jez Walters; 'Martin Daly'
Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap

Jez,

if you checkout latest GDAL trunk, you'll find a new -splitlistfields option for ogr2ogr that will split fields of type IntegerList, RealList or StringList into as many subfields of single type as necessary. You can also specify -maxsubfields an_integer_value to limit the number of subfields (can be usefull if you just want to keep the first element of the list, or to keep the number of subfields to a reasonable number, as some features from your GML file have a big number of elements in the list)

Even

Le Monday 12 July 2010 20:04:00 Even Rouault, vous avez ?crit :
> Jez,
>
> Yes this is a limitation of the shapefile format (and most drivers,
> PostgreSQL databases being one of the exceptions).
>
> Try adding -fieldTypeToString IntegerList,RealList,StringList to your
> ogr2ogr command line. This will transform any field of those types into a
> String field by concatenating the values into a single string (what you can
> see with ogrinfo). Beware that if the list if longer more than a few items,
> there will be a truncation at 80 characters.
>
> I'm considering to see if it's practical or not to add an option to ogr2ogr
> to split fields of type *List into several fields of simple type.
>
> Best regards,
>
> Even
>
> PS: For the record, in http://download.osgeo.org/gdal/daily/, you can find
> daily snapshots of the source code of the trunk (1.8.0dev) and the 1.7
> stable branch.
>
> Le Monday 12 July 2010 18:09:16 Jez Walters, vous avez ?crit :
> > Even,
> >
> >
> > I've just rebuilt GDAL/OGR using the latest code from the GDAL 'trunk',
> > but now I get the following error using ogr2ogr to convert an OS
> > MasterMap chunk (e.g.
> > http://www.ordnancesurvey.co.uk/oswebsite/products/innovations/sampledata
> >/O SMasterMap_Topo/58116-SX9192-2c1.gz) into ESRI shapefiles:
> >
> > "ERROR 6: Can't create fields of type StringList on shapefile layers."
> >
> > The various fields for which this error is reported do not appear to be
> > in the resultant shapefiles. Unfortunately this makes the new GDAL code
> > unusable for me.  :-(
> >
> > Any thoughts?
> >
> >
> > Jez
> >
> >
> > -----Original Message-----
> > From: Even Rouault [mailto:even.rouault@mines-paris.org<mailto:even.rouault@mines-paris.org>]
> > Sent: Sunday 11 July 2010 11:12
> > To: gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
> > Cc: Martin Daly; Peter J Halls; Jez Walters
> > Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
> > MasterMap
> >
> > Just to inform you that now that the NAS driver is in GDAL trunk, I've
> > been able to port its enhancements to the main GML driver. On the few
> > samples I've tested, OS Mastermap GML files seem to be read correctly
> > now.
> >
> > See http://trac.osgeo.org/gdal/ticket/3680
> >
> > Le Friday 02 July 2010 09:04:38 Martin Daly, vous avez ?crit :
> > > >     Here it is not only GDAL/OGR that has a problem!  Currently, I
> > > > know of no importer that can handle this construct, other than the
> > > > tool (from Snowflake) used by OSGB to generate it - and there is also
> > > > the question of onwards storage.
> > >
> > > Not even close, I'm afraid.
> > >
> > > There are plenty of tools to read (all parts of) OS MM:
> > >
> > > http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informat
> > >io n/ technical/software.html
> > >
> > > e.g. (an excellent one, at a very reasonable price...)
> > >
> > > http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informat
> > >io n/ technical/software/cadcorp.html
> > >
> > > Also, as far as I am aware, OS GB use in-house software to generate the
> > > data.
> > >
> > > Martin
The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E

The information transmitted is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material. If you are not the addressee, any disclosure, reproduction, copying, distribution, or other dissemination or use of this communication is strictly prohibited. If you have received this transmission in error please notify the sender immediately and then delete this email.

Any representations or commitments expressed in this email are subject to contract.

This message has been scanned for viruses and dangerous content. However, it is essential that the recipient also checks this message using commercially available mail scanning and anti-virus software. IPL Information Processing Limited accepts no liability for any loss or damage resulting from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England and Wales under company registration number 1418818. Registration took place at Cardiff on 10 May 1979. IPL Information Processing Limited's registered office and normal place of business is Eveleigh House, Grove Street, Bath, BA1 5LR, United Kingdom. IPL is also registered for Value Added Tax (VAT) under registration number GB 601 2931 83.



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E


The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100713/69a7c913/attachment-0001.html
From even.rouault at mines-paris.org  Tue Jul 13 13:37:19 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jul 13 13:37:29 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <4C3C12DD.30401@york.ac.uk>
References: <4C2CAC67.40109@york.ac.uk>
	<201007122309.20649.even.rouault@mines-paris.org>
	<4C3C12DD.30401@york.ac.uk>
Message-ID: <201007131937.19507.even.rouault@mines-paris.org>

Peter,

answers below

Le Tuesday 13 July 2010 09:16:45 Peter J Halls, vous avez ?crit?:
> Even, Jez,
>
>     sadly, I am not going to be able to try this out myself for at least a
> couple of weeks, due to other commitments.
>
>     I think Even's solution to split the multiple entries into a large
> number of simple entries is workable, however I do have a couple of
> caveats.  I think this is pragmatic and the only viable approach for the
> majority of output structures which, like Shapefiles / dBase IV, cannot
> support list columns.  I think that this should be adequate for those who
> require to draw maps from these data - the cartographic instructions should
> be easily handled by this solution; my doubts concern the use of these data
> as inputs to analytic processes.  My caveats are:
>
> 1) I would like to know how many such columns are present for each 'list'
> and how many were found.  For example, the limit might be set at 80 but
> there be 85 in the source, so I would like to know that for a particular
> record only a subset / the first 'n' have been stored.  This gives the
> possibility of making adjustments to the parameters.  Of course, it also
> takes up a couple of precious columns per list entry, reducing further the
> proportion of the list that can be recorded ...

if you specify -splitlistfields -maxsubfields n, ogr2ogr will just retain the 
n first items of the list and discard silently any extra items if the list is 
longer. If -maxsubfiles is not specified, it will scan the whole layer to 
compute the maximum number of items availabl and create as many subfields as 
necessary.

There's no API currently to know the maximum number of items for a column of 
StringList, RealList or IntegerList type. This can be done however with 
existing OGR API like I did in the scan phase of ogr2ogr -splitlistfields 
(this could be done via Python scripting also).

>
> 2) This 'list' structure is used by OS for both 'informational' entries, eg
> changeHistory, and 'data' entries, eg referenceToTopograhicArea (which
> lists all the TOIDS that comprise a complex feature such as, for example,
> 'Station Road' in ITN).    In this case, OS are adopting a similar approach
> to that used by ESRI for the old 'coverage' format, by not repeating the
> geometry but creating the geometry once and then making pointers to those
> parts of the geometry required for a specific purpose.  Here, truncation of
> the list means that the output data may not be usable for the intended
> purpose.  Unfortunately, other than using lists, I cannot see a viable
> alternative as there can be many thousand of these - which can easily
> exceed the maximum number of columns permitted in several of the output
> formats.  I had originally been considering comma separated lists in a
> single string, but these can quickly exceed the maximum string length,
> which brings us back to the reasons for Even's solution.
>
> This is a form of topology embedded within the OS data and it might be that
> it is desirable to continue with the 'no topology here' principle.  This is
> another of the 'problems', in that many (most today?) spatial data
> structures are not designed to store topology, however topology does have
> its uses.

I'm afraid your needs are a bit specific and go beyond OGR scope, that isn't 
designed to address topology issues. Keep in mind it's based on the Simple 
Feature model.

>
> 3) What to do when a limit is reached.  As I have not had the chance to try
> Even's development yet I do not know what approach has been chosen.  From
> the perspective of using the output, I guess that I want a list of the FIDs
> (TOIDS) which contain truncated data structures: this would permit some
> measure of choice when handling these data ... a sort of 'exceptions list'.
>  Of course, this does not permit the recovery of the lost data ... nor does
> it allow me to differentiate between those columns that do not matter to me
> and those that do but it may be the most practical approach.

Could be done with OGR coding/scripting. But this becomes a fairly specialized 
need and I don't see how it could take place in an existing OGR utility such 
as ogr2ogr

>
> Enough: I must try Even's work out for myself ...
>
> Thanks and best wishes,
>
> Peter
>
> Even Rouault wrote:
> > Jez,
> >
> > if you checkout latest GDAL trunk, you'll find a new -splitlistfields
> > option for ogr2ogr that will split fields of type IntegerList, RealList
> > or StringList into as many subfields of single type as necessary. You can
> > also specify -maxsubfields an_integer_value to limit the number of
> > subfields (can be usefull if you just want to keep the first element of
> > the list, or to keep the number of subfields to a reasonable number, as
> > some features from your GML file have a big number of elements in the
> > list)
> >
> > Even
> >
> > Le Monday 12 July 2010 20:04:00 Even Rouault, vous avez ?crit :
> >> Jez,
> >>
> >> Yes this is a limitation of the shapefile format (and most drivers,
> >> PostgreSQL databases being one of the exceptions).
> >>
> >> Try adding -fieldTypeToString IntegerList,RealList,StringList to your
> >> ogr2ogr command line. This will transform any field of those types into
> >> a String field by concatenating the values into a single string (what
> >> you can see with ogrinfo). Beware that if the list if longer more than a
> >> few items, there will be a truncation at 80 characters.
> >>
> >> I'm considering to see if it's practical or not to add an option to
> >> ogr2ogr to split fields of type *List into several fields of simple
> >> type.
> >>
> >> Best regards,
> >>
> >> Even
> >>
> >> PS: For the record, in http://download.osgeo.org/gdal/daily/, you can
> >> find daily snapshots of the source code of the trunk (1.8.0dev) and the
> >> 1.7 stable branch.
> >>
> >> Le Monday 12 July 2010 18:09:16 Jez Walters, vous avez ?crit :
> >>> Even,
> >>>
> >>>
> >>> I've just rebuilt GDAL/OGR using the latest code from the GDAL 'trunk',
> >>> but now I get the following error using ogr2ogr to convert an OS
> >>> MasterMap chunk (e.g.
> >>> http://www.ordnancesurvey.co.uk/oswebsite/products/innovations/sampleda
> >>>ta /O SMasterMap_Topo/58116-SX9192-2c1.gz) into ESRI shapefiles:
> >>>
> >>> "ERROR 6: Can't create fields of type StringList on shapefile layers."
> >>>
> >>> The various fields for which this error is reported do not appear to be
> >>> in the resultant shapefiles. Unfortunately this makes the new GDAL code
> >>> unusable for me.  :-(
> >>>
> >>> Any thoughts?
> >>>
> >>>
> >>> Jez
> >>>
> >>>
> >>> -----Original Message-----
> >>> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> >>> Sent: Sunday 11 July 2010 11:12
> >>> To: gdal-dev@lists.osgeo.org
> >>> Cc: Martin Daly; Peter J Halls; Jez Walters
> >>> Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
> >>> MasterMap
> >>>
> >>> Just to inform you that now that the NAS driver is in GDAL trunk, I've
> >>> been able to port its enhancements to the main GML driver. On the few
> >>> samples I've tested, OS Mastermap GML files seem to be read correctly
> >>> now.
> >>>
> >>> See http://trac.osgeo.org/gdal/ticket/3680
> >>>
> >>> Le Friday 02 July 2010 09:04:38 Martin Daly, vous avez ?crit :
> >>>>>     Here it is not only GDAL/OGR that has a problem!  Currently, I
> >>>>> know of no importer that can handle this construct, other than the
> >>>>> tool (from Snowflake) used by OSGB to generate it - and there is also
> >>>>> the question of onwards storage.
> >>>>
> >>>> Not even close, I'm afraid.
> >>>>
> >>>> There are plenty of tools to read (all parts of) OS MM:
> >>>>
> >>>> http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informa
> >>>>t io n/ technical/software.html
> >>>>
> >>>> e.g. (an excellent one, at a very reasonable price...)
> >>>>
> >>>> http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/informa
> >>>>t io n/ technical/software/cadcorp.html
> >>>>
> >>>> Also, as far as I am aware, OS GB use in-house software to generate
> >>>> the data.
> >>>>
> >>>> Martin
> >>>> **********************************************************************
> >>>>* ** ** * This email is confidential and may be privileged and should
> >>>> not be used, read or copied by anyone who is not the  original
> >>>> intended recipient. If you have received this email in error  please
> >>>> inform the sender and delete it from your mailbox or any other storage
> >>>> mechanism. Unless specifically stated, nothing in this email
> >>>> constitutes an offer by Cadcorp and Cadcorp does not warrant that any
> >>>> information contained in this email is accurate. Cadcorp cannot accept
> >>>> liability for any statements made which are clearly the sender's own
> >>>> and not expressly made on behalf of Cadcorp or one of its agents.
> >>>> Please rely on your own virus check. No responsibility is taken by
> >>>> Cadcorp for any damage arising out of any bug or virus infection.
> >>>> **********************************************************************
> >>>>* ** ** *
> >>>>
> >>>> _______________________________________________
> >>>> gdal-dev mailing list
> >>>> gdal-dev@lists.osgeo.org
> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>
> >>> The information transmitted is intended only for the person
> >>> or entity to which it is addressed and may contain
> >>> confidential and/or privileged material. If you are not the
> >>> addressee, any disclosure, reproduction, copying,
> >>> distribution, or other dissemination or use of this
> >>> communication is strictly prohibited. If you have received
> >>> this transmission in error please notify the sender
> >>> immediately and then delete this email.
> >>>
> >>> Any representations or commitments expressed in this email
> >>> are subject to contract.
> >>>
> >>> This message has been scanned for viruses and dangerous
> >>> content. However, it is essential that the recipient also
> >>> checks this message using commercially available mail
> >>> scanning and anti-virus software. IPL Information Processing
> >>> Limited accepts no liability for any loss or damage resulting
> >>> from any virus or other dangerous content in this message.
> >>>
> >>> IPL Information Processing Limited is registered in England
> >>> and Wales under company registration number 1418818.
> >>> Registration took place at Cardiff on 10 May 1979. IPL
> >>> Information Processing Limited's registered office and
> >>> normal place of business is Eveleigh House, Grove Street,
> >>> Bath, BA1 5LR, United Kingdom. IPL is also registered for
> >>> Value Added Tax (VAT) under registration number GB 601 2931 83.
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Tue Jul 13 13:58:54 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jul 13 13:59:12 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <2F7776B4033D3B45BC0301B783F3A8A02980EFE44E@GOOFY.iplbath.com>
References: <4C2CAC67.40109@york.ac.uk>
	<201007122309.20649.even.rouault@mines-paris.org>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFE44E@GOOFY.iplbath.com>
Message-ID: <201007131958.56594.even.rouault@mines-paris.org>

Jez,

Le Tuesday 13 July 2010 17:32:03 Jez Walters, vous avez ?crit?:
> Even,
>
>
> My ultimate objective is to read OS MasterMap GML using MapServer, but
> MapServer skips various fields when reading this GML directly.  I don't
> know if this is a fault with GDAL/OGR or with how MapServer is calling it. 

GDAL 1.7.2 will ignore fields that are seen as StringList by GDAL trunk, so 
that can accound why you don't see them in MapServer

> In order to overcome this restriction, I've been converting the GML to ESRI
> Shapefiles using ogr2ogr.  Fortunately, MapServer appears to have no
> difficulty reading ESRI Shapefiles!  :-)
>
> I've been playing with your latest GDAL code and the '-splitlistfields' and
> '-maxsubfields 1' options let me do this conversion, but it does seem
> rather slow now.

Yes definitely -splitlistfields is bound to be a slow process as it needs a 
full initial scan of the whole layer to figure out the maximum number of 
items for each list field. But your remark about -maxsubfields 1 has made me 
think that there's an easy optimization in that particular case where no scan 
is actually needed. Incorporated in trunk now !

> Please don't misunderstand me, but given that GDAL v1.7.2 
> works too without these options it's difficult to see the gain for what I
> am trying to achieve.

Hum I guess you mean it works with 1.7.2 if you don't care about the ignored 
fields, or you changes the original GML file to 'flatten' it.

>
> Perhaps it would be possible to speed things up by combining the stages
> that produce the '.resolved.gml' and '.gfs' files?

Chaintanya replied on that in a previous post, but the making of .resolved.gml 
and .gfs files is completely different right now. Not sure what Chaintanya's 
future plans are.

>
>
> Jez
>
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Monday 12 July 2010 22:09
> To: gdal-dev@lists.osgeo.org
> Cc: Jez Walters; 'Martin Daly'
> Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
> MasterMap
>
> Jez,
>
> if you checkout latest GDAL trunk, you'll find a new -splitlistfields
> option for ogr2ogr that will split fields of type IntegerList, RealList or
> StringList into as many subfields of single type as necessary. You can also
> specify -maxsubfields an_integer_value to limit the number of subfields
> (can be usefull if you just want to keep the first element of the list, or
> to keep the number of subfields to a reasonable number, as some features
> from your GML file have a big number of elements in the list)
>
> Even
>
> Le Monday 12 July 2010 20:04:00 Even Rouault, vous avez ?crit?:
> > Jez,
> >
> > Yes this is a limitation of the shapefile format (and most drivers,
> > PostgreSQL databases being one of the exceptions).
> >
> > Try adding -fieldTypeToString IntegerList,RealList,StringList to your
> > ogr2ogr command line. This will transform any field of those types into a
> > String field by concatenating the values into a single string (what you
> > can see with ogrinfo). Beware that if the list if longer more than a few
> > items, there will be a truncation at 80 characters.
> >
> > I'm considering to see if it's practical or not to add an option to
> > ogr2ogr to split fields of type *List into several fields of simple type.
> >
> > Best regards,
> >
> > Even
> >
> > PS: For the record, in http://download.osgeo.org/gdal/daily/, you can
> > find daily snapshots of the source code of the trunk (1.8.0dev) and the
> > 1.7 stable branch.
> >
> > Le Monday 12 July 2010 18:09:16 Jez Walters, vous avez ?crit?:
> > > Even,
> > >
> > >
> > > I've just rebuilt GDAL/OGR using the latest code from the GDAL 'trunk',
> > > but now I get the following error using ogr2ogr to convert an OS
> > > MasterMap chunk (e.g.
> > > http://www.ordnancesurvey.co.uk/oswebsite/products/innovations/sampleda
> > >ta /O SMasterMap_Topo/58116-SX9192-2c1.gz) into ESRI shapefiles:
> > >
> > > "ERROR 6: Can't create fields of type StringList on shapefile layers."
> > >
> > > The various fields for which this error is reported do not appear to be
> > > in the resultant shapefiles. Unfortunately this makes the new GDAL code
> > > unusable for me.  :-(
> > >
> > > Any thoughts?
> > >
> > >
> > > Jez
> > >
> > >
> > > -----Original Message-----
> > > From: Even Rouault [mailto:even.rouault@mines-paris.org]
> > > Sent: Sunday 11 July 2010 11:12
> > > To: gdal-dev@lists.osgeo.org
> > > Cc: Martin Daly; Peter J Halls; Jez Walters
> > > Subject: Re: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey
> > > MasterMap
> > >
> > > Just to inform you that now that the NAS driver is in GDAL trunk, I've
> > > been able to port its enhancements to the main GML driver. On the few
> > > samples I've tested, OS Mastermap GML files seem to be read correctly
> > > now.
> > >
> > > See http://trac.osgeo.org/gdal/ticket/3680
> > >
> > > Le Friday 02 July 2010 09:04:38 Martin Daly, vous avez ?crit?:
> > > > >     Here it is not only GDAL/OGR that has a problem!  Currently, I
> > > > > know of no importer that can handle this construct, other than the
> > > > > tool (from Snowflake) used by OSGB to generate it - and there is
> > > > > also the question of onwards storage.
> > > >
> > > > Not even close, I'm afraid.
> > > >
> > > > There are plenty of tools to read (all parts of) OS MM:
> > > >
> > > > http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/inform
> > > >at io n/ technical/software.html
> > > >
> > > > e.g. (an excellent one, at a very reasonable price...)
> > > >
> > > > http://www.ordnancesurvey.co.uk/oswebsite/products/osmastermap/inform
> > > >at io n/ technical/software/cadcorp.html
> > > >
> > > > Also, as far as I am aware, OS GB use in-house software to generate
> > > > the data.
> > > >
> > > > Martin
>
> The information transmitted is intended only for the person
> or entity to which it is addressed and may contain
> confidential and/or privileged material. If you are not the
> addressee, any disclosure, reproduction, copying,
> distribution, or other dissemination or use of this
> communication is strictly prohibited. If you have received
> this transmission in error please notify the sender
> immediately and then delete this email.
>
> Any representations or commitments expressed in this email
> are subject to contract.
>
> This message has been scanned for viruses and dangerous
> content. However, it is essential that the recipient also
> checks this message using commercially available mail
> scanning and anti-virus software. IPL Information Processing
> Limited accepts no liability for any loss or damage resulting
> from any virus or other dangerous content in this message.
>
> IPL Information Processing Limited is registered in England
> and Wales under company registration number 1418818.
> Registration took place at Cardiff on 10 May 1979. IPL
> Information Processing Limited's registered office and
> normal place of business is Eveleigh House, Grove Street,
> Bath, BA1 5LR, United Kingdom. IPL is also registered for
> Value Added Tax (VAT) under registration number GB 601 2931 83.


From alessandro.vanzulli at gmail.com  Tue Jul 13 16:09:13 2010
From: alessandro.vanzulli at gmail.com (Alessandro Vanzulli)
Date: Tue Jul 13 16:09:35 2010
Subject: [gdal-dev] DTED Driver Metadata Enrichment
Message-ID: <AANLkTilLRqSVbOazmyHNS1-xLFFjCcgwzdaQvIri8bvN@mail.gmail.com>

Hi,

in order to understand without any doubt the level of DTED (Level0, Level 1
or Level 2), I've enriched the DTED Driver with the read of NIMA Designator
field that defines inside the header the level of detail.

How can I submit a patch proposal in order to enrich the current development
line of GDAL?

I can submit the patch also here, if needed.

Cheers,

Alessandro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100713/701e243b/attachment.html
From chaitanya.ch at gmail.com  Tue Jul 13 17:14:45 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 13 17:14:50 2010
Subject: [gdal-dev] DTED Driver Metadata Enrichment
In-Reply-To: <AANLkTilLRqSVbOazmyHNS1-xLFFjCcgwzdaQvIri8bvN@mail.gmail.com>
References: <AANLkTilLRqSVbOazmyHNS1-xLFFjCcgwzdaQvIri8bvN@mail.gmail.com>
Message-ID: <AANLkTinByLnTxotZlceMfQZ6fFYDlFQI9yDfZmlvbJ63@mail.gmail.com>

Alessandro,

Thanks for the patch. Please create a new ticket at
http://trac.osgeo.org/gdal/newticket and submit your patch. It will be
reviewed and committed to the GDAL code.

On Wed, Jul 14, 2010 at 1:39 AM, Alessandro Vanzulli <
alessandro.vanzulli@gmail.com> wrote:

> Hi,
>
> in order to understand without any doubt the level of DTED (Level0, Level 1
> or Level 2), I've enriched the DTED Driver with the read of NIMA Designator
> field that defines inside the header the level of detail.
>
> How can I submit a patch proposal in order to enrich the current
> development line of GDAL?
>
> I can submit the patch also here, if needed.
>
> Cheers,
>
> Alessandro
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100714/a6f62dad/attachment-0001.html
From alessandro.vanzulli at gmail.com  Tue Jul 13 17:45:14 2010
From: alessandro.vanzulli at gmail.com (Alessandro Vanzulli)
Date: Tue Jul 13 17:45:38 2010
Subject: [gdal-dev] DTED Driver Metadata Enrichment
In-Reply-To: <AANLkTinByLnTxotZlceMfQZ6fFYDlFQI9yDfZmlvbJ63@mail.gmail.com>
References: <AANLkTilLRqSVbOazmyHNS1-xLFFjCcgwzdaQvIri8bvN@mail.gmail.com> 
	<AANLkTinByLnTxotZlceMfQZ6fFYDlFQI9yDfZmlvbJ63@mail.gmail.com>
Message-ID: <AANLkTikl32mpvMp-nCEDJBvNxiX2nm8ZPPaWb2dMxXx0@mail.gmail.com>

Chaitanya,

thanks a lot for the support.

I've created the ticket and attached the proposed patch.

Cheers,

Alessandro



On Tue, Jul 13, 2010 at 11:14 PM, Chaitanya kumar CH <chaitanya.ch@gmail.com
> wrote:

> Alessandro,
>
> Thanks for the patch. Please create a new ticket at
> http://trac.osgeo.org/gdal/newticket and submit your patch. It will be
> reviewed and committed to the GDAL code.
>
> On Wed, Jul 14, 2010 at 1:39 AM, Alessandro Vanzulli <
> alessandro.vanzulli@gmail.com> wrote:
>
>> Hi,
>>
>> in order to understand without any doubt the level of DTED (Level0, Level
>> 1 or Level 2), I've enriched the DTED Driver with the read of NIMA
>> Designator field that defines inside the header the level of detail.
>>
>> How can I submit a patch proposal in order to enrich the current
>> development line of GDAL?
>>
>> I can submit the patch also here, if needed.
>>
>> Cheers,
>>
>> Alessandro
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100713/c362de57/attachment.html
From SGONG at mdacorporation.com  Tue Jul 13 18:04:03 2010
From: SGONG at mdacorporation.com (Shawn GONG)
Date: Tue Jul 13 18:04:07 2010
Subject: [gdal-dev] WMS and TMS
Message-ID: <33584A1DEF4341428D15C1273466D323018AC499@EVSYVR1.ds.mda.ca>

Hi List,

A quick question: If I want to include WMS (Web Map Services), do I add "--with-wms" in configure?
What about TMS, add "--with-tms"  ?

Thanks,
Shawn
From chaitanya.ch at gmail.com  Tue Jul 13 18:28:38 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 13 18:28:40 2010
Subject: [gdal-dev] WMS and TMS
In-Reply-To: <33584A1DEF4341428D15C1273466D323018AC499@EVSYVR1.ds.mda.ca>
References: <33584A1DEF4341428D15C1273466D323018AC499@EVSYVR1.ds.mda.ca>
Message-ID: <AANLkTimXhKWEqVeqRI-zOV5kNQ-ow1EMjL0zWOLIQ4D4@mail.gmail.com>

Shawn,

If you have libcurl, wms is automatically included.

On Wed, Jul 14, 2010 at 3:34 AM, Shawn GONG <SGONG@mdacorporation.com>wrote:

> Hi List,
>
> A quick question: If I want to include WMS (Web Map Services), do I add
> "--with-wms" in configure?
> What about TMS, add "--with-tms"  ?
>
> Thanks,
> Shawn
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100714/42ed881d/attachment.html
From SGONG at mdacorporation.com  Tue Jul 13 22:09:03 2010
From: SGONG at mdacorporation.com (Shawn GONG)
Date: Tue Jul 13 22:09:40 2010
Subject: [gdal-dev] WMS and TMS
In-Reply-To: <AANLkTimXhKWEqVeqRI-zOV5kNQ-ow1EMjL0zWOLIQ4D4@mail.gmail.com>
References: <33584A1DEF4341428D15C1273466D323018AC499@EVSYVR1.ds.mda.ca>,
	<AANLkTimXhKWEqVeqRI-zOV5kNQ-ow1EMjL0zWOLIQ4D4@mail.gmail.com>
Message-ID: <33584A1DEF4341428D15C1273466D323018AC49A@EVSYVR1.ds.mda.ca>

Thanks Chaitanya 

Shawn

________________________________________
From: Chaitanya kumar CH [chaitanya.ch@gmail.com]
Sent: Tuesday, July 13, 2010 3:28 PM
To: Shawn GONG
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] WMS and TMS

Shawn,

If you have libcurl, wms is automatically included.

On Wed, Jul 14, 2010 at 3:34 AM, Shawn GONG <SGONG@mdacorporation.com<mailto:SGONG@mdacorporation.com>> wrote:
Hi List,

A quick question: If I want to include WMS (Web Map Services), do I add "--with-wms" in configure?
What about TMS, add "--with-tms"  ?

Thanks,
Shawn
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
From fmarkham at gmail.com  Wed Jul 14 01:38:41 2010
From: fmarkham at gmail.com (Francis Markham)
Date: Wed Jul 14 01:39:05 2010
Subject: [gdal-dev] LDID and .CPG in OGR shapefile driver
Message-ID: <AANLkTiklpGeiQOpsKJ02MlG_G46ELnhNFeDR2bBKMqUj@mail.gmail.com>

As discussed in
http://lists.osgeo.org/pipermail/gdal-dev/2010-May/024619.html and
http://lists.osgeo.org/pipermail/gdal-dev/2010-July/025192.html OGR's
shapefile driver does not allow the shapefile's codepage to be set or
retrieved using the DBF LDID byte or an *.cpg file.

This functionality is implemented in recent shapelib releases, when
creating a new shapefile.

Issue #882 http://trac.osgeo.org/gdal/ticket/882 addresses this issue,
but the discussion there largely predates RFCs 5 and 23 (
http://trac.osgeo.org/gdal/wiki/rfc5_unicode and
http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode ).

I would be interested in exposing this shapelib feature in OGR.
However, there are a number of design decisions to make:

1) Should encoding retrieval and setting be an OGR wide feature, or
one specific to the shapefile driver?

2) Should encodings be specified as a string or an enumeration of
well-known encodings?  If encoding retrieval and setting occurs only
at the shapefile driver level, then a string that mimics shapelib's
API might be sensible (if the codepage is set to "LDID/n" and -1 < n <
255 then the ldid byte of the dbf is set to the n, otherwise the whole
codepage string is written to the .CPG file).  Otherwise, commonsense
would suggest a standardised enum of encodings might be the way to go.

3) What should the API be?  A patch at issue #882 creates two new
OGRLayer member functions, GetEncoding() and SetEncoding(), and a
GetEncoding() implementation for shapefiles (although it fails to
allow the encoding to be set, as far as I can see).   As far as I can
see, this has some potential problems:
   a) It exposes these functions for all layers regardless of driver,
which may or may not be desirable.
   b) It assumes that encoding can be set by the layers.  Using
shapelib, the only way to set the encoding is when the DBF is created.
An alternative to the SetEncoding() function might to use a dataset or
layer creation option.  However, given that AFAIK OGR doesn't support
metadata in the same way GDAL does, a means of retrieving the encoding
would need to be paired with this.


Is this the appropriate place to have this discussion?  I would be
happy to provide a patch implementing this feature however it is
deemed most appropriate.


Kind Regards,

Francis Markham
From ahmettemiz88 at gmail.com  Wed Jul 14 03:26:38 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Wed Jul 14 03:26:42 2010
Subject: [gdal-dev] problem in gdal-java compilation
Message-ID: <AANLkTik3Z9Y3Z9ynpmW30YgDNwKyuRzZ3n5ini5BJsir@mail.gmail.com>

hello

as I tried to compile gdal-java, I received error message.


va-6-sun/include/linux -c gdal_wrap.cpp
cc1plus: warning: command line option "-Wdeclaration-after-statement"
is valid for C/ObjC but not for C++
gdal_wrap.cpp: In function ?_jstring*
Java_org_gdal_gdal_gdalJNI_get_1Driver_1ShortName(JNIEnv*, _jclass*,
jlong)?:
gdal_wrap.cpp:4197: error: ?GDALDriverShadow_get_ShortName? was not
declared in this scope
gdal_wrap.cpp: In function ?_jstring*
Java_org_gdal_gdal_gdalJNI_get_1Driver_1LongName(JNIEnv*, _jclass*,
jlong)?:
gdal_wrap.cpp:4214: error: ?GDALDriverShadow_get_LongName? was not
declared in this scope
gdal_wrap.cpp: In function ?_jstring*
Java_org_gdal_gdal_gdalJNI_get_1Driver_1HelpTopic(JNIEnv*, _jclass*,
jlong)?:
gdal_wrap.cpp:4231: error: ?GDALDriverShadow_get_HelpTopic? was not
declared in this scope
gdal_wrap.cpp: In function ?jlong
Java_org_gdal_gdal_gdalJNI_Driver_1CreateCopy(JNIEnv*, _jclass*,
jlong, _jstring*, jlong, jint, _jobject*, _jobject*)?:
gdal_wrap.cpp:4381: error: ?sProgressInfo? was not declared in this scope



how can the problem solved ?

regards
From thlin.box at gmail.com  Wed Jul 14 04:13:14 2010
From: thlin.box at gmail.com (easyl)
Date: Wed Jul 14 04:13:16 2010
Subject: [gdal-dev] ogrtindex take only one feature from a layer
Message-ID: <1279095194720-5291516.post@n2.nabble.com>


I tried ogrtindex on two shapefiles.
Each source shapefile has more than one "Feature Count" in a Polygon layer.

after running "ogrtindex index.shp src/*.shp"
I got index.shp with only two features (one from each source shapefile).
And the Polygon is not the same from the source data.

How exactly should and how I use orgtindex?


> ogrinfo index.shp index
INFO: Open of `index.shp'
      using driver `ESRI Shapefile' successful.

Layer name: index
Geometry: Polygon
Feature Count: 2
Extent: (7.140330, 53.137500) - (8.255000, 53.652667)
Layer SRS WKT:
(unknown)
LOCATION: String (200.0)
OGRFeature(index):0
  LOCATION (String) = src/1.shp,0
  POLYGON ((7.14033 53.621002500000003,7.14033 53.6526675,7.165335
53.6526675,7.165335 53.621002500000003,7.14033 53.621002500000003))

OGRFeature(index):1
  LOCATION (String) = src/2.shp,0
  POLYGON ((8.223832399999999 53.137500000000003,8.223832399999999
53.145000000000003,8.255 53.145000000000003,8.255
53.137500000000003,8.223832399999999 53.137500000000003))

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/ogrtindex-take-only-one-feature-from-a-layer-tp5291516p5291516.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From bontepaarden at gmail.com  Wed Jul 14 05:54:16 2010
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed Jul 14 06:02:34 2010
Subject: [gdal-dev] Need some help with projections
Message-ID: <AANLkTiksPqSHfK1KmV8pHqpyTlQGF--oXdwSheoJHZuI@mail.gmail.com>

Hi list,

I have some data that comes from different sources and are in different
projections.
To use that data I need to reproject them to the same projection.

I'm going to use MapWindow GIS to show the layers.

I've got a XML (not GML) with a lot of info and one of that info is several
coordinates that make up a polygon in epsg:28992 (Dutch RD).
I have a huge data set of shapefiles covering the entire area of The
Netherlands. Those shapefiles are in a custom projection.
And I want to use OpenStreetMap tiles as a background layers.
I have also a GPS receiver connected: WGS84

I'm using this proj4 string for Dutch RD:
+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079
+x_0=155000 +y_0=463000 +ellps=bessel
+towgs84=565.04,49.91,465.84,-0.40939,0.35971,-1.86849,4.0772 +units=m
+no_defs

I'm using this proj4 string for the OSM tiles:
+proj=merc +lon_0=0 +lat_ts=0 +x_0=0 +y_0=0 +a=6378137 +b=6378137 +units=m
+no_defs

My WGS84 proj4 string is:
+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m
+no_defs

The custom projection used with the shapefiles is to line it up with Google
Earth. That might be working but with OSM the shapefiles are about 10m off.
This is the algorithm used to convert the Dutch RD coordinates is:

DPoint rd2LatLongGE(DPoint rd) //shp_order
{
	// corrections for the rd coordinates for a better match with GE
	const double Xc = 17.78369991;
	const double Yc = 40.18290427;
	
	const double Xx = -0.0000749081;

	const double Xy = -0.0000128123;
	const double Yx = -0.0000064425;
	const double Yy = -0.0000846220;

	return rd2LatLongWgs84(
		DPoint(
			rd.first  + Xc + Xx * rd.first + Xy * rd.second
		,	rd.second + Yc + Yx * rd.first + Yy * rd.second

		)
	);
}


I think the best approach is to convert the shapefiles back to Dutch RD
(their original projection) using a reversed version of the above algorithm.
Can I do that using ogr2ogr? What would the proj4 style project string be?
Don't suggest to get the original shapefiles in DutchRD instead. I can't.
People had to go to court to get this version (
https://rejo.zenger.nl/inzicht/geografische-bestand-3d-shapes all in Dutch).

When I've got the shapefiles in Dutch RD I can check if it is aligning
correctly with my Dutch RD polygon. If it is correct I will convert all data
to epsg:900913 (Google Mercator).

So my main question is what is the proj4 style projection string of the
algorithm and can I use it to reproject the shapefiles.

Thanks,

Paul
The Netherlands
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100714/6eb3f5cc/attachment-0001.html
From mail2vajram at gmail.com  Wed Jul 14 07:42:36 2010
From: mail2vajram at gmail.com (mail2vajram)
Date: Wed Jul 14 07:42:37 2010
Subject: [gdal-dev] is it possible to set particular colors to the pixels of
	an image
Message-ID: <1279107756092-5292114.post@n2.nabble.com>


I have an image(LULC classified) which is composed of 1,2,3,4,5,6,7,8 pixel
values. when i open the proper image in ArcMap or Mapwindow it displays the
image in some colors(here in eight colors). Is it possible to set the colors
manually for each pixel.

Help me...
I required it 
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/is-it-possible-to-set-particular-colors-to-the-pixels-of-an-image-tp5292114p5292114.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Wed Jul 14 09:50:50 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jul 14 09:50:54 2010
Subject: [gdal-dev] LDID and .CPG in OGR shapefile driver
In-Reply-To: <AANLkTiklpGeiQOpsKJ02MlG_G46ELnhNFeDR2bBKMqUj@mail.gmail.com>
References: <AANLkTiklpGeiQOpsKJ02MlG_G46ELnhNFeDR2bBKMqUj@mail.gmail.com>
Message-ID: <4C3DC0BA.6040303@pobox.com>

Francis Markham wrote:
> As discussed in
> http://lists.osgeo.org/pipermail/gdal-dev/2010-May/024619.html and
> http://lists.osgeo.org/pipermail/gdal-dev/2010-July/025192.html OGR's
> shapefile driver does not allow the shapefile's codepage to be set or
> retrieved using the DBF LDID byte or an *.cpg file.
> 
> This functionality is implemented in recent shapelib releases, when
> creating a new shapefile.
> 
> Issue #882 http://trac.osgeo.org/gdal/ticket/882 addresses this issue,
> but the discussion there largely predates RFCs 5 and 23 (
> http://trac.osgeo.org/gdal/wiki/rfc5_unicode and
> http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode ).
> 
> I would be interested in exposing this shapelib feature in OGR.
> However, there are a number of design decisions to make:
> 
> 1) Should encoding retrieval and setting be an OGR wide feature, or
> one specific to the shapefile driver?

Francis,

Note that RFC 23 mandates that OGR layers return attributes in UTF-8,
so on "read" the expected action would be for the shapefile driver
to use the cpg and LDID files to identify the incoming encoding and
then use CPLRecode to convert to UTF-8.    So on read there is no
need for an OGR wide change.

On write I would anticipate the output encoding being set with
a layer creation option.  Ideally this layer option could be
the same for any other driver which needs the ability to set the
encoding on export but there is no need for any implementation
beyond the shapefile driver for now.

> 2) Should encodings be specified as a string or an enumeration of
> well-known encodings?  If encoding retrieval and setting occurs only
> at the shapefile driver level, then a string that mimics shapelib's
> API might be sensible (if the codepage is set to "LDID/n" and -1 < n <
> 255 then the ldid byte of the dbf is set to the n, otherwise the whole
> codepage string is written to the .CPG file).  Otherwise, commonsense
> would suggest a standardised enum of encodings might be the way to go.

They should be specified as strings, per RFC 23.  If there is no
apparent mapping to some shapefile output encoding, we might also
want to provide an extra mechanism to specify the encodings directly
as the codes used in the .cpg or LDID field.

> 3) What should the API be?  A patch at issue #882 creates two new
> OGRLayer member functions, GetEncoding() and SetEncoding(), and a
> GetEncoding() implementation for shapefiles (although it fails to
> allow the encoding to be set, as far as I can see).  

In my opinion there is no need for GetEncoding() and SetEncoding()
methods in the OGR API.

> Is this the appropriate place to have this discussion?  I would be
> happy to provide a patch implementing this feature however it is
> deemed most appropriate.

This is a reasonable place to have the discussion.  If you can
provide code implementing RFC 23 for the shapefile driver, with some
test samples to help demonstrate that would be much appreciated.  I'm
happy to have Chaitanya provide support as well.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jrepetto at free.fr  Wed Jul 14 09:50:48 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Wed Jul 14 09:50:56 2010
Subject: [gdal-dev] Need some help with projections
In-Reply-To: <AANLkTiksPqSHfK1KmV8pHqpyTlQGF--oXdwSheoJHZuI@mail.gmail.com>
References: <AANLkTiksPqSHfK1KmV8pHqpyTlQGF--oXdwSheoJHZuI@mail.gmail.com>
Message-ID: <4C3DC0B8.8060304@free.fr>

Hi,

On 07/14/10 11:54, Paul Meems wrote:
>
> I'm using this proj4 string for the OSM tiles:
> +proj=merc +lon_0=0 +lat_ts=0 +x_0=0 +y_0=0 +a=6378137 +b=6378137
> +units=m +no_defs
>

This one is not correct if you want to do a datum transformation : the 
+towgs84 parameter is missing.

Jean-Claude
From tejas.gajera at gmail.com  Wed Jul 14 10:33:24 2010
From: tejas.gajera at gmail.com (Tejas Gajera)
Date: Wed Jul 14 10:33:27 2010
Subject: [gdal-dev] GDAL2Tiles
Message-ID: <1279118004364-5292819.post@n2.nabble.com>


Hi,

I have a Tiff image of around 30GB, and I want to create tiles using
GDAL2Tiles command line utility. If anyone have used GDAL2Tiles command
utility, please let me know how long it takes to generate all tiles?

I have started tilling process two days ago and its still running (under
process). I have no idea how long it going to take.

Please throw anything you know about GDAL2Tiles.

Thanks in advance.

Best,
Tejas Gajera
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL2Tiles-tp5292819p5292819.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From joelodom at gmail.com  Wed Jul 14 10:37:19 2010
From: joelodom at gmail.com (Joel Odom)
Date: Wed Jul 14 10:37:22 2010
Subject: [gdal-dev] Web Site Down
Message-ID: <AANLkTinZdgdCumQaSJ1jPVkaE279oBhZP8nX3gTg0w57@mail.gmail.com>

Heads up.  gdal.org has been down for at least an hour now.  Thanks.



-- 
http://www.operationliberate.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100714/e96532b7/attachment.html
From pasta.bolognese at gmail.com  Wed Jul 14 10:38:26 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Wed Jul 14 10:38:28 2010
Subject: [gdal-dev] GDAL2Tiles
In-Reply-To: <1279118004364-5292819.post@n2.nabble.com>
References: <1279118004364-5292819.post@n2.nabble.com>
Message-ID: <AANLkTikudDvx9Z_k_3xGcgBbuBJyT5xFUnz96bLUUMdI@mail.gmail.com>

Hi Tejas ,

where did you get that 30GB Tiff file from ? I tough that the maximum
size for a Tiff was 4GB...



On Wed, Jul 14, 2010 at 3:33 PM, Tejas Gajera <tejas.gajera@gmail.com> wrote:
>
> Hi,
>
> I have a Tiff image of around 30GB, and I want to create tiles using
> GDAL2Tiles command line utility. If anyone have used GDAL2Tiles command
> utility, please let me know how long it takes to generate all tiles?
>
> I have started tilling process two days ago and its still running (under
> process). I have no idea how long it going to take.
>
> Please throw anything you know about GDAL2Tiles.
>
> Thanks in advance.
>
> Best,
> Tejas Gajera
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL2Tiles-tp5292819p5292819.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From warmerdam at pobox.com  Wed Jul 14 11:04:28 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jul 14 11:04:33 2010
Subject: [gdal-dev] Web Site Down
In-Reply-To: <AANLkTinZdgdCumQaSJ1jPVkaE279oBhZP8nX3gTg0w57@mail.gmail.com>
References: <AANLkTinZdgdCumQaSJ1jPVkaE279oBhZP8nX3gTg0w57@mail.gmail.com>
Message-ID: <4C3DD1FC.1010202@pobox.com>

Joel Odom wrote:
> Heads up.  gdal.org <http://gdal.org> has been down for at least an hour 
> now.  Thanks.

Folks,

OSGeo has suffered a signifcant system compromise and we are migrating
a number of services including download.osgeo.org and www.gdal.org to a
new server.  Buildbot is also down, but it may not be restored for somewhat
longer.

I have setup download.osgeo.org and www.gdal.org on a new server but it
can take several hours for the DNS changes to propogate.  Daily SVN
snapshots of GDAL will likely not be available for several days.

Trac and SVN are unaffected.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Jul 14 11:16:40 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jul 14 11:16:47 2010
Subject: [gdal-dev] GDAL2Tiles
In-Reply-To: <AANLkTikudDvx9Z_k_3xGcgBbuBJyT5xFUnz96bLUUMdI@mail.gmail.com>
References: <1279118004364-5292819.post@n2.nabble.com>
	<AANLkTikudDvx9Z_k_3xGcgBbuBJyT5xFUnz96bLUUMdI@mail.gmail.com>
Message-ID: <4C3DD4D8.9030509@pobox.com>

Pasta Bolognese wrote:
> Hi Tejas ,
> 
> where did you get that 30GB Tiff file from ? I tough that the maximum
> size for a Tiff was 4GB...

Pasta,

This was presumably a GeoBigTIFF.  There was a project in the last few
years to extend the TIFF format to support 64bit addressing and the
resulting format variant is called BigTIFF.  It is supported by
libtiff 4.x (still in beta really), and GDAL 1.7 and on.

In brief, GDAL transparently supports traditional 4GB limited TIFF
and BigTIFF which supports much larger file sizes.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From tejas.gajera at gmail.com  Wed Jul 14 11:29:55 2010
From: tejas.gajera at gmail.com (Gajera Tejas)
Date: Wed Jul 14 11:37:28 2010
Subject: [gdal-dev] GDAL2Tiles
In-Reply-To: <4C3DD4D8.9030509@pobox.com>
References: <1279118004364-5292819.post@n2.nabble.com>
	<AANLkTikudDvx9Z_k_3xGcgBbuBJyT5xFUnz96bLUUMdI@mail.gmail.com> 
	<4C3DD4D8.9030509@pobox.com>
Message-ID: <AANLkTikNsJYcboWXad6l4_7eClug3S_XTq8aKdkqcsa5@mail.gmail.com>

Pasta,

I have used gdalwarp command line utility to warp large georaster
images and it worked well and create a 30GB tiff image.

Thanks,
Tejas Gajera


On Wed, Jul 14, 2010 at 11:16 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Pasta Bolognese wrote:
>>
>> Hi Tejas ,
>>
>> where did you get that 30GB Tiff file from ? I tough that the maximum
>> size for a Tiff was 4GB...
>
> Pasta,
>
> This was presumably a GeoBigTIFF. ?There was a project in the last few
> years to extend the TIFF format to support 64bit addressing and the
> resulting format variant is called BigTIFF. ?It is supported by
> libtiff 4.x (still in beta really), and GDAL 1.7 and on.
>
> In brief, GDAL transparently supports traditional 4GB limited TIFF
> and BigTIFF which supports much larger file sizes.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
>
From gregcoats at mac.com  Wed Jul 14 11:41:32 2010
From: gregcoats at mac.com (Greg Coats)
Date: Wed Jul 14 11:41:41 2010
Subject: [gdal-dev] GDAL2Tiles
In-Reply-To: <AANLkTikudDvx9Z_k_3xGcgBbuBJyT5xFUnz96bLUUMdI@mail.gmail.com>
References: <1279118004364-5292819.post@n2.nabble.com>
	<AANLkTikudDvx9Z_k_3xGcgBbuBJyT5xFUnz96bLUUMdI@mail.gmail.com>
Message-ID: <0C94F5C6-E422-4281-AA6B-9B49DA960A25@mac.com>

Tiff files are composed of either one or more tiles, or one or more stripes. No single tile or stripe can be larger than 2 GB. The original Tiff standard further required that a .tif file not be larger than 4 GB. The BigTiff standard does away with this 4 GB .tif file limit.
GDAL supports BigTiff with 4 create options BIGTIFF=YES/NO/IF_NEEDED/IF_SAFER
http://www.gdal.org/frmt_gtiff.html

I have successfully created tiled 150 GB .tif files in 2 hours with gdal_translate (and gdal_merge.py) like this
gdal_translate -of GTiff -ot Byte --config GDAL_CACHEMAX 1000 \
-co TILED=YES -co BLOCKXSIZE=1024 -co BLOCKYSIZE=1024 \
-co BIGTIFF=YES in.tif out.tif

GDAL indicates it progress like this
0...10...20...30...40...50...60...70...80...90...100 - done.
Greg

On Jul 14, 2010, at 10:38 AM, Pasta Bolognese wrote:

> Hi Tejas ,
> 
> where did you get that 30GB Tiff file from ? I tough that the maximum
> size for a Tiff was 4GB...
> 
> 
> 
> On Wed, Jul 14, 2010 at 3:33 PM, Tejas Gajera <tejas.gajera@gmail.com> wrote:
>> 
>> Hi,
>> 
>> I have a Tiff image of around 30GB, and I want to create tiles using
>> GDAL2Tiles command line utility. If anyone have used GDAL2Tiles command
>> utility, please let me know how long it takes to generate all tiles?
>> 
>> I have started tilling process two days ago and its still running (under
>> process). I have no idea how long it going to take.
>> 
>> Please throw anything you know about GDAL2Tiles.
>> 
>> Thanks in advance.
>> 
>> Best,
>> Tejas Gajera
>> --
>> View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL2Tiles-tp5292819p5292819.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100714/2f3a7ccc/attachment-0001.html
From no-reply at neogeo-online.net  Wed Jul 14 12:59:35 2010
From: no-reply at neogeo-online.net (Guillaume Sueur)
Date: Wed Jul 14 13:40:35 2010
Subject: [gdal-dev] GDAL2Tiles
In-Reply-To: <1279118004364-5292819.post@n2.nabble.com>
References: <1279118004364-5292819.post@n2.nabble.com>
Message-ID: <4C3DECF7.5070007@neogeo-online.net>

Hi,

That can last a bit. It depends on your geo extent and how many base 
tiles will be generated. Gdal2tiles outputs a 10...20... counter, which 
should help you calculate the global time.

Regards

Guillaume

Le 14/07/2010 16:33, Tejas Gajera a ?crit :
>
> Hi,
>
> I have a Tiff image of around 30GB, and I want to create tiles using
> GDAL2Tiles command line utility. If anyone have used GDAL2Tiles command
> utility, please let me know how long it takes to generate all tiles?
>
> I have started tilling process two days ago and its still running (under
> process). I have no idea how long it going to take.
>
> Please throw anything you know about GDAL2Tiles.
>
> Thanks in advance.
>
> Best,
> Tejas Gajera
From tejas.gajera at gmail.com  Wed Jul 14 14:00:57 2010
From: tejas.gajera at gmail.com (Gajera Tejas)
Date: Wed Jul 14 14:09:31 2010
Subject: [gdal-dev] GDAL2Tiles
In-Reply-To: <4C3DECF7.5070007@neogeo-online.net>
References: <1279118004364-5292819.post@n2.nabble.com>
	<4C3DECF7.5070007@neogeo-online.net>
Message-ID: <AANLkTikpnR3jx0jK_abx9u_rktf9cLSB4-svrp0m7CKh@mail.gmail.com>

Guillaume,

I have stated tiles generation process two days ago and counter of
GDAL2Tiles is still on 0 (not even 0...). Do you have any idea how to
improve the process speed?

Regards,
Tejas Gajera


On Wed, Jul 14, 2010 at 12:59 PM, Guillaume Sueur
<no-reply@neogeo-online.net> wrote:
> Hi,
>
> That can last a bit. It depends on your geo extent and how many base tiles
> will be generated. Gdal2tiles outputs a 10...20... counter, which should
> help you calculate the global time.
>
> Regards
>
> Guillaume
>
> Le 14/07/2010 16:33, Tejas Gajera a ?crit :
>>
>> Hi,
>>
>> I have a Tiff image of around 30GB, and I want to create tiles using
>> GDAL2Tiles command line utility. If anyone have used GDAL2Tiles command
>> utility, please let me know how long it takes to generate all tiles?
>>
>> I have started tilling process two days ago and its still running (under
>> process). I have no idea how long it going to take.
>>
>> Please throw anything you know about GDAL2Tiles.
>>
>> Thanks in advance.
>>
>> Best,
>> Tejas Gajera
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From no-reply at neogeo-online.net  Wed Jul 14 17:07:59 2010
From: no-reply at neogeo-online.net (Guillaume Sueur)
Date: Wed Jul 14 17:09:06 2010
Subject: [gdal-dev] GDAL2Tiles
In-Reply-To: <AANLkTikpnR3jx0jK_abx9u_rktf9cLSB4-svrp0m7CKh@mail.gmail.com>
References: <1279118004364-5292819.post@n2.nabble.com>
	<4C3DECF7.5070007@neogeo-online.net>
	<AANLkTikpnR3jx0jK_abx9u_rktf9cLSB4-svrp0m7CKh@mail.gmail.com>
Message-ID: <4C3E272F.60607@neogeo-online.net>

something is probably going wrong.

can you have a look at the ram and cpu usage ? The system may be swapping.

Le 14/07/2010 20:00, Gajera Tejas a ?crit :
> Guillaume,
>
> I have stated tiles generation process two days ago and counter of
> GDAL2Tiles is still on 0 (not even 0...). Do you have any idea how to
> improve the process speed?
>
> Regards,
> Tejas Gajera
>
>
> On Wed, Jul 14, 2010 at 12:59 PM, Guillaume Sueur
> <no-reply@neogeo-online.net>  wrote:
>> Hi,
>>
>> That can last a bit. It depends on your geo extent and how many base tiles
>> will be generated. Gdal2tiles outputs a 10...20... counter, which should
>> help you calculate the global time.
>>
>> Regards
>>
>> Guillaume
>>
>> Le 14/07/2010 16:33, Tejas Gajera a ?crit :
>>>
>>> Hi,
>>>
>>> I have a Tiff image of around 30GB, and I want to create tiles using
>>> GDAL2Tiles command line utility. If anyone have used GDAL2Tiles command
>>> utility, please let me know how long it takes to generate all tiles?
>>>
>>> I have started tilling process two days ago and its still running (under
>>> process). I have no idea how long it going to take.
>>>
>>> Please throw anything you know about GDAL2Tiles.
>>>
>>> Thanks in advance.
>>>
>>> Best,
>>> Tejas Gajera
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
From tejas.gajera at gmail.com  Wed Jul 14 17:26:56 2010
From: tejas.gajera at gmail.com (Gajera Tejas)
Date: Wed Jul 14 17:27:20 2010
Subject: [gdal-dev] GDAL2Tiles
In-Reply-To: <4C3E272F.60607@neogeo-online.net>
References: <1279118004364-5292819.post@n2.nabble.com>
	<4C3DECF7.5070007@neogeo-online.net> 
	<AANLkTikpnR3jx0jK_abx9u_rktf9cLSB4-svrp0m7CKh@mail.gmail.com> 
	<4C3E272F.60607@neogeo-online.net>
Message-ID: <AANLkTikuXhgCJIQ3y-VBQNTRFMaUITMmqPuiKZ2xHTn9@mail.gmail.com>

well, I can see folders which are created by GDAL2Tiles utility.
Moreover, looking at date and time of created folder, it seems utility
is still running.

Meanwhile, I search on internet and seems there is another
functionality called ppgdal2tiles (parallel GDAL2Tiles). I want to try
this command line utility, but I have no idea how to start.

Can you please help me if you have any idea about ppgdal2tiles
(parallel GDAL2Tiles).

Regards,
Tejas Gajera


On Wed, Jul 14, 2010 at 5:07 PM, Guillaume Sueur
<no-reply@neogeo-online.net> wrote:
> something is probably going wrong.
>
> can you have a look at the ram and cpu usage ? The system may be swapping.
>
> Le 14/07/2010 20:00, Gajera Tejas a ?crit :
>>
>> Guillaume,
>>
>> I have stated tiles generation process two days ago and counter of
>> GDAL2Tiles is still on 0 (not even 0...). Do you have any idea how to
>> improve the process speed?
>>
>> Regards,
>> Tejas Gajera
>>
>>
>> On Wed, Jul 14, 2010 at 12:59 PM, Guillaume Sueur
>> <no-reply@neogeo-online.net> ?wrote:
>>>
>>> Hi,
>>>
>>> That can last a bit. It depends on your geo extent and how many base
>>> tiles
>>> will be generated. Gdal2tiles outputs a 10...20... counter, which should
>>> help you calculate the global time.
>>>
>>> Regards
>>>
>>> Guillaume
>>>
>>> Le 14/07/2010 16:33, Tejas Gajera a ?crit :
>>>>
>>>> Hi,
>>>>
>>>> I have a Tiff image of around 30GB, and I want to create tiles using
>>>> GDAL2Tiles command line utility. If anyone have used GDAL2Tiles command
>>>> utility, please let me know how long it takes to generate all tiles?
>>>>
>>>> I have started tilling process two days ago and its still running (under
>>>> process). I have no idea how long it going to take.
>>>>
>>>> Please throw anything you know about GDAL2Tiles.
>>>>
>>>> Thanks in advance.
>>>>
>>>> Best,
>>>> Tejas Gajera
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>
From even.rouault at mines-paris.org  Wed Jul 14 19:30:43 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jul 14 19:30:51 2010
Subject: [gdal-dev] ogrtindex take only one feature from a layer
In-Reply-To: <1279095194720-5291516.post@n2.nabble.com>
References: <1279095194720-5291516.post@n2.nabble.com>
Message-ID: <201007150130.43345.even.rouault@mines-paris.org>

What you describe is the expected behaviour of ogrtindex... It takes the 
spatial extent of the whole source shapefile and add it as an entry in the 
tile index. This is intended to be used by MapServer

I'm not sure what you want to do. Probably merging several shapefiles into 
a single one. Then you need ogr2ogr : http://gdal.org/ogr2ogr.html

Le mercredi 14 juillet 2010 10:13:14, easyl a ?crit :
> I tried ogrtindex on two shapefiles.
> Each source shapefile has more than one "Feature Count" in a Polygon 
layer.
> 
> after running "ogrtindex index.shp src/*.shp"
> I got index.shp with only two features (one from each source shapefile).
> And the Polygon is not the same from the source data.
> 
> How exactly should and how I use orgtindex?
> 
> > ogrinfo index.shp index
> 
> INFO: Open of `index.shp'
>       using driver `ESRI Shapefile' successful.
> 
> Layer name: index
> Geometry: Polygon
> Feature Count: 2
> Extent: (7.140330, 53.137500) - (8.255000, 53.652667)
> Layer SRS WKT:
> (unknown)
> LOCATION: String (200.0)
> OGRFeature(index):0
>   LOCATION (String) = src/1.shp,0
>   POLYGON ((7.14033 53.621002500000003,7.14033 
53.6526675,7.165335
> 53.6526675,7.165335 53.621002500000003,7.14033 
53.621002500000003))
> 
> OGRFeature(index):1
>   LOCATION (String) = src/2.shp,0
>   POLYGON ((8.223832399999999 
53.137500000000003,8.223832399999999
> 53.145000000000003,8.255 53.145000000000003,8.255
> 53.137500000000003,8.223832399999999 53.137500000000003))
From ahmettemiz88 at gmail.com  Thu Jul 15 01:58:49 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Thu Jul 15 01:58:52 2010
Subject: [gdal-dev] gdal compilation problem
Message-ID: <AANLkTimqcGox1DJaaGPT29nL_Btm3nP8lETYwqo7dXxa@mail.gmail.com>

hello

I urgently need to have gdal-java.

But an error arose at compilation in swig-java like this

gdal_wrap.cpp:4381: error: ?sProgressInfo? was not declared in this scope


what might be the wrong ?


regards
From alexbenke at gmail.com  Thu Jul 15 05:04:53 2010
From: alexbenke at gmail.com (kasej)
Date: Thu Jul 15 05:04:54 2010
Subject: [gdal-dev] S-57 New Objects
Message-ID: <1279184693069-5296524.post@n2.nabble.com>


Dear All,

for my project I want to use the OGR-Library. OGR can read S-57 files, 
but only with predefined Objects and Attributens. I want to extend the 
Object- and Attribute list, and add my own Objects and Attributes.
My question is: Which files should I change in the source of 
OGR-Lybrary. Are there only *.csv - files with Objects and Attributes, 
or should I change also something in the source code?


Best Regards, Alex

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/S-57-New-Objects-tp5296524p5296524.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Thu Jul 15 06:50:47 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jul 15 06:50:49 2010
Subject: [gdal-dev] S-57 New Objects
In-Reply-To: <1279184693069-5296524.post@n2.nabble.com>
References: <1279184693069-5296524.post@n2.nabble.com>
Message-ID: <AANLkTilmUwigzZh6jA9bKiAznUqUzTIU3smhidC6iFL6@mail.gmail.com>

Alex,

Refer to the fourth paragraph in http://www.gdal.org/ogr/drv_s57.html on how
to set a directory with your lists.
Also see http://home.gdal.org/projects/s57/index.html

On Thu, Jul 15, 2010 at 2:34 PM, kasej <alexbenke@gmail.com> wrote:

>
> Dear All,
>
> for my project I want to use the OGR-Library. OGR can read S-57 files,
> but only with predefined Objects and Attributens. I want to extend the
> Object- and Attribute list, and add my own Objects and Attributes.
> My question is: Which files should I change in the source of
> OGR-Lybrary. Are there only *.csv - files with Objects and Attributes,
> or should I change also something in the source code?
>
>
> Best Regards, Alex
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/S-57-New-Objects-tp5296524p5296524.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100715/a6570790/attachment.html
From Alexander.Plum at cae.de  Thu Jul 15 09:12:45 2010
From: Alexander.Plum at cae.de (Alexander Plum)
Date: Thu Jul 15 09:12:46 2010
Subject: [gdal-dev] Resizing GDALDatasetH
Message-ID: <74C7EC991D7DFB41A525D22BFD4E090805B09C7AAD@sdestex2>

Hello there,

I'm looking for a function to scale up a GDALDatasetH with further use of 'cubic spline resampling'.
Is there anything I could use? I do not want to employ 'GDALSimpleImageWarp' since the 'cubic spline resampling'-option is missing in this function.

Greets,
Alex
-- 
This email was Anti Virus checked by CAE
From jrepetto at free.fr  Thu Jul 15 10:06:32 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Thu Jul 15 10:07:09 2010
Subject: [gdal-dev] Web Site Down
In-Reply-To: <4C3DD1FC.1010202@pobox.com>
References: <AANLkTinZdgdCumQaSJ1jPVkaE279oBhZP8nX3gTg0w57@mail.gmail.com>
	<4C3DD1FC.1010202@pobox.com>
Message-ID: <4C3F15E8.9070904@free.fr>

Le 14/07/2010 17:04, Frank Warmerdam a ?crit :

>
> OSGeo has suffered a signifcant system compromise and we are migrating
> a number of services including download.osgeo.org and www.gdal.org to a
> new server. Buildbot is also down, but it may not be restored for somewhat
> longer.

Hello,

I don't know if it is related, but www.remotesensing.org is also down at 
this time.

Jean-Claude
From ricardo.garcia.silva at gmail.com  Thu Jul 15 12:35:29 2010
From: ricardo.garcia.silva at gmail.com (Ricardo Filipe Soares Garcia da)
Date: Thu Jul 15 12:35:52 2010
Subject: [gdal-dev] python binding: error opening dataset
Message-ID: <AANLkTimt0sJEVlfvINHzBSlDsUrWlQ4WeTROFgG7tJld@mail.gmail.com>

Hello list

I am using the python bindings to process some hdf5 files.

I have some code that looks aproximately like this:

class TileGeorreferencer(object):
    def __init__(self, fileName, datasetName):
        self.fileName = fileName
        self.datasetName = datasetName
        self.inDriver = gdal.GetDriverByName("HDF5")
        self.inDriver.Register()
        self.outDriver = gdal.GetDriverByName("GTiff")
        self.outDriver.Register()
        self.outFileName = "%s.tif" % self.fileName
    def create_geotiff(self):
        inDs = gdal.Open('HDF5:"%s"://%s' % (self.fileName,
self.datasetName), gdal.GA_ReadOnly)
        cols = inDs.RasterXSize
        rows = inDs.RasterYSize
        originalLayer = inDs.GetRasterBand(1).ReadAsArray()
        outDs = self.outDriver.Create(self.outFileName, cols, rows, 1,
gdal.GDT_Float32)
        outBand = outDs.GetRasterBand(1)
        outBand.WriteArray(originalLayer, 0, 0)
        outBand.FlushCache()
        inDs = None
        outDs = None

t = TileGeorreferencer(filename, "LST")
t.create_geotiff()

My problem is that I can run it just fine through ipython, but when I
add it in with rest of my application I am getting this error:

"in method 'Open', argument 1 of type 'char const *'"

Thanks for helping me out.

-- 
___________________________ ___ __
Ricardo Garcia Silva
From tejas.gajera at gmail.com  Thu Jul 15 13:39:41 2010
From: tejas.gajera at gmail.com (Gajera Tejas)
Date: Thu Jul 15 13:40:03 2010
Subject: [gdal-dev] JP2KAK
Message-ID: <AANLkTilGvuCX3PS_XYtzLhY6maXCncn-qbPcOXTqJqeM@mail.gmail.com>

Hi,

I just want to know what is the limit of JP2KAK. Can I convert bigTiff
(10GB) file in jp2 without any problem on win32 bit machine with 4GB
RAM? Have anyone already tried this kind of conversion?

Also, if anybody have tried this kind of conversion, please let me
know approximately how long it take for large file conversion from
Tiff to Jp2.

Regards,
Tejas Gajera
From chaitanya.ch at gmail.com  Thu Jul 15 13:56:04 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jul 15 13:56:08 2010
Subject: [gdal-dev] JP2KAK
In-Reply-To: <AANLkTilGvuCX3PS_XYtzLhY6maXCncn-qbPcOXTqJqeM@mail.gmail.com>
References: <AANLkTilGvuCX3PS_XYtzLhY6maXCncn-qbPcOXTqJqeM@mail.gmail.com>
Message-ID: <AANLkTilchsLmkB-6P0hvpPEF4BclOvAmZuO4FyCJ6xAF@mail.gmail.com>

Tejas,

There is no limit for the size of a Kakadu compressed jpeg.
If the tiff image is divided into reasonable sized blocks, the conversion is
comparable to diskio speed.
Refer http://www.gdal.org/frmt_jp2kak.html for further info on GDAL's JP2KAK
driver.

On Thu, Jul 15, 2010 at 11:09 PM, Gajera Tejas <tejas.gajera@gmail.com>wrote:

> Hi,
>
> I just want to know what is the limit of JP2KAK. Can I convert bigTiff
> (10GB) file in jp2 without any problem on win32 bit machine with 4GB
> RAM? Have anyone already tried this kind of conversion?
>
> Also, if anybody have tried this kind of conversion, please let me
> know approximately how long it take for large file conversion from
> Tiff to Jp2.
>
> Regards,
> Tejas Gajera
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100715/d613ced0/attachment.html
From bontepaarden at gmail.com  Thu Jul 15 15:18:06 2010
From: bontepaarden at gmail.com (Paul Meems)
Date: Thu Jul 15 15:18:28 2010
Subject: [gdal-dev] Need some help with projections
In-Reply-To: <4C3DC0B8.8060304@free.fr>
References: <AANLkTiksPqSHfK1KmV8pHqpyTlQGF--oXdwSheoJHZuI@mail.gmail.com> 
	<4C3DC0B8.8060304@free.fr>
Message-ID: <AANLkTik3UpVHsapmQczX_6RiK5LECPHCzeKMS2mZnamX@mail.gmail.com>

Thanks Jean-Claude,

I was using EPSG:900913 for the OSM tiles and Googled about it looking for
the +towgs84 parameter but couldn't find anything.
I did find several posts about EPSG:3785 being the same as EPSG:900913 and
that one does have the +towgs84 parameter.
Should I use that proj4 string instead?
+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +a=6378137 +b=6378137
+towgs84=0,0,0,0,0,0,0 +units=m +no_defs

And how about the custom projection? Do you have any idea how to create a
proj4 style string from that?

Thanks,
Paul


2010/7/14 Jean-Claude REPETTO <jrepetto@free.fr>

> Hi,
>
>
> On 07/14/10 11:54, Paul Meems wrote:
>
>>
>> I'm using this proj4 string for the OSM tiles:
>> +proj=merc +lon_0=0 +lat_ts=0 +x_0=0 +y_0=0 +a=6378137 +b=6378137
>> +units=m +no_defs
>>
>>
> This one is not correct if you want to do a datum transformation : the
> +towgs84 parameter is missing.
>
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100715/d45940f9/attachment.html
From szekerest at gmail.com  Thu Jul 15 15:22:49 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jul 15 15:22:55 2010
Subject: [gdal-dev] gdal compilation problem
In-Reply-To: <AANLkTimqcGox1DJaaGPT29nL_Btm3nP8lETYwqo7dXxa@mail.gmail.com>
References: <AANLkTimqcGox1DJaaGPT29nL_Btm3nP8lETYwqo7dXxa@mail.gmail.com>
Message-ID: <AANLkTikJqUECLT5WLeec4ryVlRwyDo6MskcD0fgqSsSO@mail.gmail.com>

2010/7/15 ahmet temiz <ahmettemiz88@gmail.com>

> hello
>
> I urgently need to have gdal-java.
>
>

If you work on Windows, you can obtain complete packages from
http://vbkto.dyndns.org/sdk/



But an error arose at compilation in swig-java like this
>
> gdal_wrap.cpp:4381: error: ?sProgressInfo? was not declared in this scope
>
>
It seems to be working for me. Which version did you try to compile?


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100715/ad032bd6/attachment.html
From szekerest at gmail.com  Thu Jul 15 18:56:43 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jul 15 18:56:46 2010
Subject: [gdal-dev] Enhance attribute index support with OGR SQL queries
	(shapefile and mapinfo format)
Message-ID: <AANLkTilzLm56NWR_WUtAFQK2ksBzUhTZvogXrOD0NjCJ@mail.gmail.com>

Folks,

I've added 2 tickes with working patches to implement reasonable additions
to the current (fairly limited) attribute index support.

Support attribute index scan with the sql 'IN' operator: ticket
3686<http://trac.osgeo.org/gdal/ticket/3686>
Add attribute index support for the sql queries in mapinfo tab format: ticket
3687 <http://trac.osgeo.org/gdal/ticket/3687>


I would largely be interested in applying those changes in trunk or probably
in the stable branch (considering this as a performance bug fix rather than
an enhancement).
Any further ideas/comments would be helpful.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100716/7c1b8b7f/attachment.html
From warmerdam at pobox.com  Thu Jul 15 21:54:03 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jul 15 21:54:19 2010
Subject: [gdal-dev] Enhance attribute index support with OGR SQL queries
	(shapefile and mapinfo format)
In-Reply-To: <AANLkTilzLm56NWR_WUtAFQK2ksBzUhTZvogXrOD0NjCJ@mail.gmail.com>
References: <AANLkTilzLm56NWR_WUtAFQK2ksBzUhTZvogXrOD0NjCJ@mail.gmail.com>
Message-ID: <4C3FBBBB.1090601@pobox.com>

Tamas Szekeres wrote:
> Folks,
> 
> I've added 2 tickes with working patches to implement reasonable 
> additions to the current (fairly limited) attribute index support.
> 
> Support attribute index scan with the sql 'IN' operator: ticket 3686 
> <http://trac.osgeo.org/gdal/ticket/3686>
> Add attribute index support for the sql queries in mapinfo tab format: 
> ticket 3687 <http://trac.osgeo.org/gdal/ticket/3687>
> 
> 
> I would largely be interested in applying those changes in trunk or 
> probably in the stable branch (considering this as a performance bug fix 
> rather than an enhancement).
> Any further ideas/comments would be helpful.

Tamas,

By all means go ahead in trunk.

Applying the change in the stable branch should be done very cautiously (IMHO).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ahmettemiz88 at gmail.com  Fri Jul 16 02:01:51 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Fri Jul 16 02:01:55 2010
Subject: [gdal-dev] gdal compilation problem
In-Reply-To: <AANLkTikJqUECLT5WLeec4ryVlRwyDo6MskcD0fgqSsSO@mail.gmail.com>
References: <AANLkTimqcGox1DJaaGPT29nL_Btm3nP8lETYwqo7dXxa@mail.gmail.com>
	<AANLkTikJqUECLT5WLeec4ryVlRwyDo6MskcD0fgqSsSO@mail.gmail.com>
Message-ID: <AANLkTimLonREpgo2fEMo4-rnpSEkBAfwFtpTCbobOTE2@mail.gmail.com>

hello

and thank you Tamas,

I am using linux ubuntu.
I tried to use gdal-1.7.2.

regards


2010/7/15 Tamas Szekeres <szekerest@gmail.com>:
>
>
> 2010/7/15 ahmet temiz <ahmettemiz88@gmail.com>
>>
>> hello
>>
>> I urgently need to have gdal-java.
>>
>
>
> If you work on Windows, you can obtain complete packages from
> http://vbkto.dyndns.org/sdk/
>
>
>
>> But an error arose at compilation in swig-java like this
>>
>> gdal_wrap.cpp:4381: error: ?sProgressInfo? was not declared in this scope
>>
>
> It seems to be working for me. Which version did you try to compile?
>
>
> Best regards,
>
> Tamas
>
>
From thlin.box at gmail.com  Fri Jul 16 04:11:13 2010
From: thlin.box at gmail.com (easyl)
Date: Fri Jul 16 04:11:16 2010
Subject: [gdal-dev] Re: ogrtindex take only one feature from a layer
In-Reply-To: <1279095194720-5291516.post@n2.nabble.com>
References: <1279095194720-5291516.post@n2.nabble.com>
Message-ID: <1279267873343-5300919.post@n2.nabble.com>


thanks, you are right.
I was looking for something that can "merge" all shapefiles.

But will a huge merged shapeflle take a long time to load in a Mapserver?
since I have really a lot of shapefiles to merge. 

I just thought the ogrtindex may help. :)
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/ogrtindex-take-only-one-feature-from-a-layer-tp5291516p5300919.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Fri Jul 16 08:47:01 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jul 16 08:47:03 2010
Subject: [gdal-dev] Enhance attribute index support with OGR SQL queries 
	(shapefile and mapinfo format)
In-Reply-To: <4C3FBBBB.1090601@pobox.com>
References: <AANLkTilzLm56NWR_WUtAFQK2ksBzUhTZvogXrOD0NjCJ@mail.gmail.com>
	<4C3FBBBB.1090601@pobox.com>
Message-ID: <AANLkTil8VCB2ZgfzkdDF7MwgGUxOjnwW7ATOSI0Yxi7k@mail.gmail.com>

2010/7/16 Frank Warmerdam <warmerdam@pobox.com>

> Tamas Szekeres wrote:
>
>> Folks,
>>
>> I've added 2 tickes with working patches to implement reasonable additions
>> to the current (fairly limited) attribute index support.
>>
>> Support attribute index scan with the sql 'IN' operator: ticket 3686 <
>> http://trac.osgeo.org/gdal/ticket/3686>
>> Add attribute index support for the sql queries in mapinfo tab format:
>> ticket 3687 <http://trac.osgeo.org/gdal/ticket/3687>
>>
>>
>>
>> I would largely be interested in applying those changes in trunk or
>> probably in the stable branch (considering this as a performance bug fix
>> rather than an enhancement).
>> Any further ideas/comments would be helpful.
>>
>
> Tamas,
>
> By all means go ahead in trunk.
>
> Applying the change in the stable branch should be done very cautiously
> (IMHO).
>
>
Will do so, thanks.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100716/be105e30/attachment.html
From jukka.rahkonen at mmmtike.fi  Fri Jul 16 11:19:32 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Jul 16 11:19:45 2010
Subject: [gdal-dev] Re: ogrtindex take only one feature from a layer
References: <1279095194720-5291516.post@n2.nabble.com>
	<1279267873343-5300919.post@n2.nabble.com>
Message-ID: <loom.20100716T165526-58@post.gmane.org>

easyl <thlin.box <at> gmail.com> writes:

> But will a huge merged shapeflle take a long time to load in a Mapserver?
> since I have really a lot of shapefiles to merge. 
> 
> I just thought the ogrtindex may help. :)

Hi,

Ogrtindex can help you. We are having one dataset which contains a few hundred
shapefiles, and because we receive the updates in the same way we prefer keeping
them separate instead of combining all data together. In addition we would be
close to reach the size limit of shapefile, max 4 GB for the .shp part of a
shapefile

What we do is
- run shptree for each shapefile
- run ogrtindex
- run shptree also for the index shapefile if it is big
- use the index shapefile as Mapserver data source. 

Partial data updates are simple to do if data are delivered always in the same
way. Just write the new shapefile and the .qix index over the old files. There
is no need to touch the ogrtindex file 

Mapserver documentation at http://mapserver.org/optimization/tileindex.html is
valid.

I do not believe there is any big difference in speed when using either one big
shapefile or a ogrtileindex layer but it depends a bit on the data. Tileindex
cannot be effective if original shapefiles are overlapping a lot.

-Jukka Rahkonen-

From pasta.bolognese at gmail.com  Fri Jul 16 12:37:21 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Fri Jul 16 12:37:23 2010
Subject: [gdal-dev] building GDAL + OCI on linux
Message-ID: <AANLkTimewhJzKL9oo-qXLghTJXKBBc9DDARrm6Tsno8D@mail.gmail.com>

Hi All,

as OSGeo4W doesn't have the GDAL17 GeoRaster and the 1.6 has some
bugs... I'm trying to build it on a Linux Virtual Box...

The first question is, HOW ???

I do have Oracle, but I dont't have the Linux version (only Windows).
Where can I find all what I need to build GDAL + OCI (GeoRaster)... ?

thanks
From chaitanya.ch at gmail.com  Fri Jul 16 14:12:53 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jul 16 14:12:56 2010
Subject: [gdal-dev] building GDAL + OCI on linux
In-Reply-To: <AANLkTimewhJzKL9oo-qXLghTJXKBBc9DDARrm6Tsno8D@mail.gmail.com>
References: <AANLkTimewhJzKL9oo-qXLghTJXKBBc9DDARrm6Tsno8D@mail.gmail.com>
Message-ID: <AANLkTilKoZh6mHRu73-oLcHZ4xk1yH5gBvqvDtLDpT7L@mail.gmail.com>

Pasta,

Refer to http://trac.osgeo.org/gdal/wiki/BuildingOnUnix for info on building
on Linux. To include OCI in the compilation configure with the options
"--with-oci", "--with-oci-include" and "--with-oci-lib" with appropriate
paths. Run "./configure --help" for more details.

On Fri, Jul 16, 2010 at 10:07 PM, Pasta Bolognese <pasta.bolognese@gmail.com
> wrote:

> Hi All,
>
> as OSGeo4W doesn't have the GDAL17 GeoRaster and the 1.6 has some
> bugs... I'm trying to build it on a Linux Virtual Box...
>
> The first question is, HOW ???
>
> I do have Oracle, but I dont't have the Linux version (only Windows).
> Where can I find all what I need to build GDAL + OCI (GeoRaster)... ?
>
> thanks
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100716/a7c9eb37/attachment.html
From ivan.lucena at pmldnet.com  Fri Jul 16 16:40:12 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri Jul 16 16:40:15 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gYnVpbGRpbmcgR0RBTCArIE9DSSBvbiBsaW51eA==?=
Message-ID: <20100716204012.3164.qmail@s466.sureserver.com>

Here you can download OCI and Geor plugins for GDAL 1.7.2 compatible with OSGeo4W:

http://download.osgeo.org/gdal/win32/1.7/

To build GDAL witn support for OCI and GeoRaster in Linux you need ORACLE_HOME environment variable and --with-oci=yes

The OTN page that I sent previously has more info.

>  -------Original Message-------
>  From: Pasta Bolognese <pasta.bolognese@gmail.com>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] building GDAL + OCI on linux
>  Sent: Jul 16 '10 11:37
>  
>  Hi All,
>  
>  as OSGeo4W doesn't have the GDAL17 GeoRaster and the 1.6 has some
>  bugs... I'm trying to build it on a Linux Virtual Box...
>  
>  The first question is, HOW ???
>  
>  I do have Oracle, but I dont't have the Linux version (only Windows).
>  Where can I find all what I need to build GDAL + OCI (GeoRaster)... ?
>  
>  thanks
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From pasta.bolognese at gmail.com  Fri Jul 16 19:44:01 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Fri Jul 16 19:44:03 2010
Subject: [gdal-dev] building GDAL + OCI on linux
In-Reply-To: <20100716204012.3164.qmail@s466.sureserver.com>
References: <20100716204012.3164.qmail@s466.sureserver.com>
Message-ID: <AANLkTikNqwViKyqB2IvzHc40YwMtxjHj-eke6Wjbq9zn@mail.gmail.com>

thanks for that...

Is there anywhere from where I can download the OCI headers and
Libraries needed to compile GDAL ? I don't have Oracle for Linux (I do
have it for Windows) and buying it just for compile GDAL would not
make sense...

On Fri, Jul 16, 2010 at 9:40 PM, Ivan Lucena <ivan.lucena@pmldnet.com> wrote:
> Here you can download OCI and Geor plugins for GDAL 1.7.2 compatible with OSGeo4W:
>
> http://download.osgeo.org/gdal/win32/1.7/
>
> To build GDAL witn support for OCI and GeoRaster in Linux you need ORACLE_HOME environment variable and --with-oci=yes
>
> The OTN page that I sent previously has more info.
>
>> ?-------Original Message-------
>> ?From: Pasta Bolognese <pasta.bolognese@gmail.com>
>> ?To: gdal-dev@lists.osgeo.org
>> ?Subject: [gdal-dev] building GDAL + OCI on linux
>> ?Sent: Jul 16 '10 11:37
>>
>> ?Hi All,
>>
>> ?as OSGeo4W doesn't have the GDAL17 GeoRaster and the 1.6 has some
>> ?bugs... I'm trying to build it on a Linux Virtual Box...
>>
>> ?The first question is, HOW ???
>>
>> ?I do have Oracle, but I dont't have the Linux version (only Windows).
>> ?Where can I find all what I need to build GDAL + OCI (GeoRaster)... ?
>>
>> ?thanks
>> ?_______________________________________________
>> ?gdal-dev mailing list
>> ?gdal-dev@lists.osgeo.org
>> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From leith at leithalweapon.geek.nz  Fri Jul 16 21:19:58 2010
From: leith at leithalweapon.geek.nz (Leith Bade)
Date: Fri Jul 16 21:20:20 2010
Subject: [gdal-dev] gdal_merge is very slow
Message-ID: <AANLkTinoihyoAzwLwH2eSRz0zH4B0f63bgTFoV-13as7@mail.gmail.com>

Hi,

I am trying to use gdal_merge to mosaic a very large topo GeoTIFF set.

Uncompressed the data set is 60GB, but I keep it stored with DEFLATE
compression which results in a dataset under 10GB.

Mosaicked the uncompressed file will be 125GB because of the large regions
of nodata generated. Unfortunately this is too big to store on my HDD so I
need to apply DEFLATE to it as well.

I am experimenting with only 1/2 the data set at the moment with this
command:
gdal_merge -co COMPRESS=DEFLATE -co ZLEVEL=9 -co BIGTIFF=YES -o NI-50.tif
*-00.tif

On my AMD Phenom II X4 @ 3.2GHz, 64 bit Windows 7, 4GB DDR3 CAS-7 RAM
(basically a decently specced PC gaming machine)
it has been running for 16 hours and so far has only made it 60% (124 of 204
files)

The other issue is so far the file is 54GB so I will likely run out of disc
space before it finished. This indicates that no DEFLATE compression is
happening at all!

It currently maxing only 1 CPU core, so I assume it is trying to run DEFLATE
then somehow failing to compress at all?

Looking at gdal_merge.py I think the major performance issue is the order in
which it copies the data. Currently it copies an entire image at a time (1
colour channel at a time). Thus DEFLATE will not work due to the rather
random write pattern to each scanline.

I think a much faster method would be to calculate the destination
rectangles for each file into some sort of list. Aftter this generate the
destination file 1 scanline at a time, calculating which source images
intersect, and working left to right filling with solid color or copying
scanlines from the source image.

This allows the DEFLATE to work far more effciently as the write pattern is
horizontally linear.

What are your views/suggestions/etc.?

Thanks,
Leith Bade
leith@leithalweapon.geek.nz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100717/70f77a89/attachment.html
From gregcoats at mac.com  Fri Jul 16 22:22:58 2010
From: gregcoats at mac.com (Greg Coats)
Date: Fri Jul 16 22:23:03 2010
Subject: [gdal-dev] gdal_merge is very slow
In-Reply-To: <AANLkTinoihyoAzwLwH2eSRz0zH4B0f63bgTFoV-13as7@mail.gmail.com>
References: <AANLkTinoihyoAzwLwH2eSRz0zH4B0f63bgTFoV-13as7@mail.gmail.com>
Message-ID: <7E9E1D39-281D-4E0D-9445-3A76800BBD39@mac.com>

I do not see that you specified that the output TIFF image be tiled
-co TILED=YES -co BLOCKXSIZE=512 -co BLOCKYSIZE=512
gdal_merge.py supports the -v input option that reports progress as a % for every source image merged into the destination image. 
It is better to do the initial gdal_merge.py uncompressed, and then follow that with a gdal_translate to created a compressed file.
Greg

On Jul 16, 2010, at 9:19 PM, Leith Bade wrote:

> Hi,
> 
> I am trying to use gdal_merge to mosaic a very large topo GeoTIFF set.
> 
> Uncompressed the data set is 60GB, but I keep it stored with DEFLATE compression which results in a dataset under 10GB.
> 
> Mosaicked the uncompressed file will be 125GB because of the large regions of nodata generated. Unfortunately this is too big to store on my HDD so I need to apply DEFLATE to it as well.
> 
> I am experimenting with only 1/2 the data set at the moment with this command:
> gdal_merge -co COMPRESS=DEFLATE -co ZLEVEL=9 -co BIGTIFF=YES -o NI-50.tif *-00.tif
> 
> On my AMD Phenom II X4 @ 3.2GHz, 64 bit Windows 7, 4GB DDR3 CAS-7 RAM (basically a decently specced PC gaming machine)
> it has been running for 16 hours and so far has only made it 60% (124 of 204 files)
> 
> The other issue is so far the file is 54GB so I will likely run out of disc space before it finished. This indicates that no DEFLATE compression is happening at all!
> 
> It currently maxing only 1 CPU core, so I assume it is trying to run DEFLATE then somehow failing to compress at all?
> 
> Looking at gdal_merge.py I think the major performance issue is the order in which it copies the data. Currently it copies an entire image at a time (1 colour channel at a time). Thus DEFLATE will not work due to the rather random write pattern to each scanline.
> 
> I think a much faster method would be to calculate the destination rectangles for each file into some sort of list. Aftter this generate the destination file 1 scanline at a time, calculating which source images intersect, and working left to right filling with solid color or copying scanlines from the source image.
> 
> This allows the DEFLATE to work far more effciently as the write pattern is horizontally linear.
> 
> What are your views/suggestions/etc.?
> 
> Thanks,
> Leith Bade
> leith@leithalweapon.geek.nz
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100716/2cd2289f/attachment.html
From leith at leithalweapon.geek.nz  Fri Jul 16 22:44:56 2010
From: leith at leithalweapon.geek.nz (Leith Bade)
Date: Fri Jul 16 22:45:18 2010
Subject: [gdal-dev] gdal_merge is very slow
In-Reply-To: <7E9E1D39-281D-4E0D-9445-3A76800BBD39@mac.com>
References: <AANLkTinoihyoAzwLwH2eSRz0zH4B0f63bgTFoV-13as7@mail.gmail.com> 
	<7E9E1D39-281D-4E0D-9445-3A76800BBD39@mac.com>
Message-ID: <AANLkTiku6NpunEsJdw9dK9XRTEAVeQL6tIm1Bt-inBRa@mail.gmail.com>

OK I will try the tiling.

The aim of this merge is to generate an input for creating a compressed JPEG
2000 image (either using GDAL, Kakadu tools or the ER Image Compressor).

In the meantime I have installed the 30-day demo of ER Mapper. This program
was able to generate a mosaic in only a few seconds, and is currently
merging the image and compressing it in one step, estimated time is only
30mins.

This is a LOT faster than GDAL, but unfortunately I can't afford the full
licence (this is a small project that I am trying to do for free). If I
can't get GDAL to work nicely I might be forced to use the 30 day demo and
just reinstall it when it expires...

One thing I note is that it doesn't use more than 1 CPU to compress, while
Kakadu will happily use all 4 CPUs and all my memory to get it done in very
short time.

I might end up using ER Mapper to produce a large GTiff for kdu_compress to
work on.

Thanks,
Leith Bade
leith@leithalweapon.geek.nz



On 17 July 2010 14:22, Greg Coats <gregcoats@mac.com> wrote:

> I do not see that you specified that the output TIFF image be tiled
> -co TILED=YES -co BLOCKXSIZE=512 -co BLOCKYSIZE=512
> gdal_merge.py supports the -v input option that reports progress as a % for
> every source image merged into the destination image.
> It is better to do the initial gdal_merge.py uncompressed, and then follow
> that with a gdal_translate to created a compressed file.
> Greg
>
> On Jul 16, 2010, at 9:19 PM, Leith Bade wrote:
>
> Hi,
>
> I am trying to use gdal_merge to mosaic a very large topo GeoTIFF set.
>
> Uncompressed the data set is 60GB, but I keep it stored with DEFLATE
> compression which results in a dataset under 10GB.
>
> Mosaicked the uncompressed file will be 125GB because of the large regions
> of nodata generated. Unfortunately this is too big to store on my HDD so I
> need to apply DEFLATE to it as well.
>
> I am experimenting with only 1/2 the data set at the moment with this
> command:
> gdal_merge -co COMPRESS=DEFLATE -co ZLEVEL=9 -co BIGTIFF=YES -o NI-50.tif
> *-00.tif
>
> On my AMD Phenom II X4 @ 3.2GHz, 64 bit Windows 7, 4GB DDR3 CAS-7 RAM
> (basically a decently specced PC gaming machine)
> it has been running for 16 hours and so far has only made it 60% (124 of
> 204 files)
>
> The other issue is so far the file is 54GB so I will likely run out of disc
> space before it finished. This indicates that no DEFLATE compression is
> happening at all!
>
> It currently maxing only 1 CPU core, so I assume it is trying to run
> DEFLATE then somehow failing to compress at all?
>
> Looking at gdal_merge.py I think the major performance issue is the order
> in which it copies the data. Currently it copies an entire image at a time
> (1 colour channel at a time). Thus DEFLATE will not work due to the rather
> random write pattern to each scanline.
>
> I think a much faster method would be to calculate the destination
> rectangles for each file into some sort of list. Aftter this generate the
> destination file 1 scanline at a time, calculating which source images
> intersect, and working left to right filling with solid color or copying
> scanlines from the source image.
>
> This allows the DEFLATE to work far more effciently as the write pattern is
> horizontally linear.
>
> What are your views/suggestions/etc.?
>
> Thanks,
> Leith Bade
> leith@leithalweapon.geek.nz
>
>  _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100717/be4902bb/attachment-0001.html
From gregcoats at mac.com  Fri Jul 16 23:29:43 2010
From: gregcoats at mac.com (Greg Coats)
Date: Fri Jul 16 23:30:49 2010
Subject: [gdal-dev] gdal_merge is very slow
In-Reply-To: <AANLkTinoihyoAzwLwH2eSRz0zH4B0f63bgTFoV-13as7@mail.gmail.com>
References: <AANLkTinoihyoAzwLwH2eSRz0zH4B0f63bgTFoV-13as7@mail.gmail.com>
Message-ID: <67CC80F8-89B4-42CB-8417-C2E13BCB3CDB@mac.com>

Since you have 4 GB RAM, I suggest overriding the 40 MB GDAL_CACHEMAX default, and increasing it
gdal_merge.py --config GDAL_CACHEMAX 1000 
The maximum possible GDAL_CACHEMAX is
gdal_merge.py --config GDAL_CACHEMAX 2147
Greg

On Jul 16, 2010, at 9:19 PM, Leith Bade wrote:

> Hi,
> 
> I am trying to use gdal_merge to mosaic a very large topo GeoTIFF set.
> 
> Uncompressed the data set is 60GB, but I keep it stored with DEFLATE compression which results in a dataset under 10GB.
> 
> Mosaicked the uncompressed file will be 125GB because of the large regions of nodata generated. Unfortunately this is too big to store on my HDD so I need to apply DEFLATE to it as well.
> 
> I am experimenting with only 1/2 the data set at the moment with this command:
> gdal_merge -co COMPRESS=DEFLATE -co ZLEVEL=9 -co BIGTIFF=YES -o NI-50.tif *-00.tif
> 
> On my AMD Phenom II X4 @ 3.2GHz, 64 bit Windows 7, 4GB DDR3 CAS-7 RAM (basically a decently specced PC gaming machine)
> it has been running for 16 hours and so far has only made it 60% (124 of 204 files)
> 
> The other issue is so far the file is 54GB so I will likely run out of disc space before it finished. This indicates that no DEFLATE compression is happening at all!
> 
> It currently maxing only 1 CPU core, so I assume it is trying to run DEFLATE then somehow failing to compress at all?
> 
> Looking at gdal_merge.py I think the major performance issue is the order in which it copies the data. Currently it copies an entire image at a time (1 colour channel at a time). Thus DEFLATE will not work due to the rather random write pattern to each scanline.
> 
> I think a much faster method would be to calculate the destination rectangles for each file into some sort of list. Aftter this generate the destination file 1 scanline at a time, calculating which source images intersect, and working left to right filling with solid color or copying scanlines from the source image.
> 
> This allows the DEFLATE to work far more effciently as the write pattern is horizontally linear.
> 
> What are your views/suggestions/etc.?
> 
> Thanks,
> Leith Bade
> leith@leithalweapon.geek.nz
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100716/804edbac/attachment.html
From chaitanya.ch at gmail.com  Fri Jul 16 23:40:14 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jul 16 23:40:17 2010
Subject: [gdal-dev] building GDAL + OCI on linux
In-Reply-To: <AANLkTikNqwViKyqB2IvzHc40YwMtxjHj-eke6Wjbq9zn@mail.gmail.com>
References: <20100716204012.3164.qmail@s466.sureserver.com>
	<AANLkTikNqwViKyqB2IvzHc40YwMtxjHj-eke6Wjbq9zn@mail.gmail.com>
Message-ID: <AANLkTiliOslMia7cvttAgr60K5iicgCwB-TIVKG6jHJt@mail.gmail.com>

Pasta,

Oracle provides the software Oracle Instant Client which is, I believe,
free.
Pick your platform here
http://www.oracle.com/technology/tech/oci/instantclient/index.html and
download Basic/BasicLite for running applications and SDK for compiling.

On Sat, Jul 17, 2010 at 5:14 AM, Pasta Bolognese
<pasta.bolognese@gmail.com>wrote:

> thanks for that...
>
> Is there anywhere from where I can download the OCI headers and
> Libraries needed to compile GDAL ? I don't have Oracle for Linux (I do
> have it for Windows) and buying it just for compile GDAL would not
> make sense...
>
> On Fri, Jul 16, 2010 at 9:40 PM, Ivan Lucena <ivan.lucena@pmldnet.com>
> wrote:
> > Here you can download OCI and Geor plugins for GDAL 1.7.2 compatible with
> OSGeo4W:
> >
> > http://download.osgeo.org/gdal/win32/1.7/
> >
> > To build GDAL witn support for OCI and GeoRaster in Linux you need
> ORACLE_HOME environment variable and --with-oci=yes
> >
> > The OTN page that I sent previously has more info.
> >
> >>  -------Original Message-------
> >>  From: Pasta Bolognese <pasta.bolognese@gmail.com>
> >>  To: gdal-dev@lists.osgeo.org
> >>  Subject: [gdal-dev] building GDAL + OCI on linux
> >>  Sent: Jul 16 '10 11:37
> >>
> >>  Hi All,
> >>
> >>  as OSGeo4W doesn't have the GDAL17 GeoRaster and the 1.6 has some
> >>  bugs... I'm trying to build it on a Linux Virtual Box...
> >>
> >>  The first question is, HOW ???
> >>
> >>  I do have Oracle, but I dont't have the Linux version (only Windows).
> >>  Where can I find all what I need to build GDAL + OCI (GeoRaster)... ?
> >>
> >>  thanks
> >>  _______________________________________________
> >>  gdal-dev mailing list
> >>  gdal-dev@lists.osgeo.org
> >>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100717/3219c6d9/attachment.html
From jason.roberts at duke.edu  Sat Jul 17 11:45:43 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Sat Jul 17 11:45:50 2010
Subject: [gdal-dev] Building debug Python bindings (e.g. _gdal.pyd) with MS
	Visual Studio
Message-ID: <000601cb25c7$1e3b3f30$5ab1bd90$@roberts@duke.edu>

This is probably a question for Tamas Szekeres and Howard Butler, but I'm
emailing the whole list in case others are knowledgeable or interested.

 

As part of trying to figure out http://trac.osgeo.org/gdal/ticket/3672, I
would like to step through GDAL's SWIG-generated Python bindings in the
Visual Studio debugger. I downloaded release-1310-dev.zip, started a VS 2003
command line, and ran this:

 

C:\gdal_release-1310-dev> nmake gdal gdal-python DEBUG=YES

 

I noticed that .pdb files were generated for all of the apps such as
ogr2ogr.exe. I noticed that gdal17.dll is now 9 MB rather than 6 MB,
suggesting that it includes debug symbols internally. But the Python
bindings such as _gdal.pyd _gdal_array.pyd are the same size as the release
build and I could not find any .pdb files. I have not tried the debugger yet
but I'm guessing it will not find any symbols.

 

Am I correct? If so, could you please advise me on how to build the Python
bindings with debug symbols? Any other hints for stepping through the GDAL
Python bindings or GDAL library code with Visual Studio?

 

Thanks for your help,

 

Jason

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100717/12b534dc/attachment.html
From hobu.inc at gmail.com  Sat Jul 17 12:14:52 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Sat Jul 17 12:14:58 2010
Subject: [gdal-dev] Building debug Python bindings (e.g. _gdal.pyd) with
	MS Visual Studio
In-Reply-To: <000601cb25c7$1e3b3f30$5ab1bd90$@roberts@duke.edu>
References: <000601cb25c7$1e3b3f30$5ab1bd90$@roberts@duke.edu>
Message-ID: <9F1AB394-6340-4B8D-B21C-7193DDAEC177@gmail.com>


On Jul 17, 2010, at 10:45 AM, Jason Roberts wrote:

> This is probably a question for Tamas Szekeres and Howard Butler, but I?m emailing the whole list in case others are knowledgeable or interested.
>  
> As part of trying to figure out http://trac.osgeo.org/gdal/ticket/3672, I would like to step through GDAL?s SWIG-generated Python bindings in the Visual Studio debugger. I downloaded release-1310-dev.zip, started a VS 2003 command line, and ran this:
>  
> C:\gdal_release-1310-dev> nmake gdal gdal-python DEBUG=YES
>  
> I noticed that .pdb files were generated for all of the apps such as ogr2ogr.exe. I noticed that gdal17.dll is now 9 MB rather than 6 MB, suggesting that it includes debug symbols internally. But the Python bindings such as _gdal.pyd _gdal_array.pyd are the same size as the release build and I could not find any .pdb files. I have not tried the debugger yet but I?m guessing it will not find any symbols.
>  
> Am I correct? If so, could you please advise me on how to build the Python bindings with debug symbols? Any other hints for stepping through the GDAL Python bindings or GDAL library code with Visual Studio?
>  
> Thanks for your help,

You need to build a *Python* with debug symbols as well, and then distutils/setuptools from that debug Python build will build a debug extension.  Otherwise, I think you have to hack distutils/setuptools to override and insert debug symbols, but it's been years since I've fooled with this stuff.  Searching for information about debugging windows python c extensions might get you some general help.  

Sorry I don't know more,

Howard

From jason.roberts at duke.edu  Sat Jul 17 14:37:05 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Sat Jul 17 14:37:12 2010
Subject: [gdal-dev] Building debug Python bindings (e.g. _gdal.pyd) with
	MS Visual Studio
In-Reply-To: <9F1AB394-6340-4B8D-B21C-7193DDAEC177@gmail.com>
References: <000601cb25c7$1e3b3f30$5ab1bd90$%roberts@duke.edu>
	<9F1AB394-6340-4B8D-B21C-7193DDAEC177@gmail.com>
Message-ID: <002201cb25df$0e9dd2f0$2bd978d0$@roberts@duke.edu>

Howard,

Thanks for the hint. I was able to get what appear to be debug versions of
the extension DLLs (e.g. _gdal_d.pyd) along with symbols (e.g. _gdal_d.pdb).
For the record, here is a basic procedure that seemed to work for VS 2003:

1. Download release-1310-dev.zip and extract someplace, e.g.
C:\gdal_release-1310-dev.

2. Copy entire C:\Python25 to C:\gdal_release-1310-dev\Python25.

3. Modify C:\gdal_release-1310-dev\makefile so that PYTHON_DIR is
appropriate.

4. Download Python source and extract someplace, e.g. C:\Python-2.5.4.

5. Follow instructions in C:\Python-2.5.4\PCbuild\readme.txt to build
pythoncore and python projects in VS 2003 with debug.

6. Copy C:\Python-2.5.4\PCbuild\python_d.exe, python_d.pdb, python25_d.dll,
and python25_d.pdb to C:\gdal_release-1310-dev\Python25.

7. Copy C:\Python-2.5.4\PCbuild\python25_d.lib to
C:\gdal_release-1310-dev\Python25\libs.

8. C:\gdal_release-1310-dev> nmake gdal gdal-python DEBUG=YES

9. Search C:\gdal_release-1310-dev for the _*_d.pyd and _*_d.pdb files. They
are in separate places.

I have not tried the debugger yet, but in my past experience, if you can get
the debug symbols you can usually get the debugger working. There might be
some issues with the VC runtime library though.

If anyone has any further hints please let me know...

Thanks,

Jason

-----Original Message-----
From: Howard Butler [mailto:hobu.inc@gmail.com] 
Sent: Saturday, July 17, 2010 12:15 PM
To: Jason Roberts
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Building debug Python bindings (e.g. _gdal.pyd) with
MS Visual Studio


On Jul 17, 2010, at 10:45 AM, Jason Roberts wrote:

> This is probably a question for Tamas Szekeres and Howard Butler, but I'm
emailing the whole list in case others are knowledgeable or interested.
>  
> As part of trying to figure out http://trac.osgeo.org/gdal/ticket/3672, I
would like to step through GDAL's SWIG-generated Python bindings in the
Visual Studio debugger. I downloaded release-1310-dev.zip, started a VS 2003
command line, and ran this:
>  
> C:\gdal_release-1310-dev> nmake gdal gdal-python DEBUG=YES
>  
> I noticed that .pdb files were generated for all of the apps such as
ogr2ogr.exe. I noticed that gdal17.dll is now 9 MB rather than 6 MB,
suggesting that it includes debug symbols internally. But the Python
bindings such as _gdal.pyd _gdal_array.pyd are the same size as the release
build and I could not find any .pdb files. I have not tried the debugger yet
but I'm guessing it will not find any symbols.
>  
> Am I correct? If so, could you please advise me on how to build the Python
bindings with debug symbols? Any other hints for stepping through the GDAL
Python bindings or GDAL library code with Visual Studio?
>  
> Thanks for your help,

You need to build a *Python* with debug symbols as well, and then
distutils/setuptools from that debug Python build will build a debug
extension.  Otherwise, I think you have to hack distutils/setuptools to
override and insert debug symbols, but it's been years since I've fooled
with this stuff.  Searching for information about debugging windows python c
extensions might get you some general help.  

Sorry I don't know more,

Howard


From leith at leithalweapon.geek.nz  Sun Jul 18 00:44:20 2010
From: leith at leithalweapon.geek.nz (Leith Bade)
Date: Sun Jul 18 00:44:43 2010
Subject: [gdal-dev] gdal_merge is very slow
In-Reply-To: <67CC80F8-89B4-42CB-8417-C2E13BCB3CDB@mac.com>
References: <AANLkTinoihyoAzwLwH2eSRz0zH4B0f63bgTFoV-13as7@mail.gmail.com> 
	<67CC80F8-89B4-42CB-8417-C2E13BCB3CDB@mac.com>
Message-ID: <AANLkTim-h9AwTAs0o-to5WVEfHhEg1woJ48tlyHF8DPn@mail.gmail.com>

That seemed to do the trick. It finished overnight, a lot faster than
before.

Final file was 83GB. (Only 1/2 the dataset was used)

Is there a reason GDAL_CACHEMAX 2147 is the maximum? Under 64-bit a 32-bit
process has 4GB of virtual memory rather than 2GB under 32-bit (or 3GB with
the /3GB Windows boot switch).

I was successfully able to use kdu_compress on the result as well so now I
only need 4GB to store the file! (Although kdu_compress also has a memory
limit at 2GB, but you can flush the codestream after every tile to fix
that).

Thanks,
Leith Bade
leith@leithalweapon.geek.nz



On 17 July 2010 15:29, Greg Coats <gregcoats@mac.com> wrote:

> Since you have 4 GB RAM, I suggest overriding the 40 MB GDAL_CACHEMAX
> default, and increasing it
> gdal_merge.py --config GDAL_CACHEMAX 1000
> The maximum possible GDAL_CACHEMAX is
> gdal_merge.py --config GDAL_CACHEMAX 2147
> Greg
>
> On Jul 16, 2010, at 9:19 PM, Leith Bade wrote:
>
> Hi,
>
> I am trying to use gdal_merge to mosaic a very large topo GeoTIFF set.
>
> Uncompressed the data set is 60GB, but I keep it stored with DEFLATE
> compression which results in a dataset under 10GB.
>
> Mosaicked the uncompressed file will be 125GB because of the large regions
> of nodata generated. Unfortunately this is too big to store on my HDD so I
> need to apply DEFLATE to it as well.
>
> I am experimenting with only 1/2 the data set at the moment with this
> command:
> gdal_merge -co COMPRESS=DEFLATE -co ZLEVEL=9 -co BIGTIFF=YES -o NI-50.tif
> *-00.tif
>
> On my AMD Phenom II X4 @ 3.2GHz, 64 bit Windows 7, 4GB DDR3 CAS-7 RAM
> (basically a decently specced PC gaming machine)
> it has been running for 16 hours and so far has only made it 60% (124 of
> 204 files)
>
> The other issue is so far the file is 54GB so I will likely run out of disc
> space before it finished. This indicates that no DEFLATE compression is
> happening at all!
>
> It currently maxing only 1 CPU core, so I assume it is trying to run
> DEFLATE then somehow failing to compress at all?
>
> Looking at gdal_merge.py I think the major performance issue is the order
> in which it copies the data. Currently it copies an entire image at a time
> (1 colour channel at a time). Thus DEFLATE will not work due to the rather
> random write pattern to each scanline.
>
> I think a much faster method would be to calculate the destination
> rectangles for each file into some sort of list. Aftter this generate the
> destination file 1 scanline at a time, calculating which source images
> intersect, and working left to right filling with solid color or copying
> scanlines from the source image.
>
> This allows the DEFLATE to work far more effciently as the write pattern is
> horizontally linear.
>
> What are your views/suggestions/etc.?
>
> Thanks,
> Leith Bade
> leith@leithalweapon.geek.nz
>
>  _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100718/0fc61964/attachment.html
From liliabakova at mail.ru  Sun Jul 18 02:44:14 2010
From: liliabakova at mail.ru (=?koi8-r?Q?=EC=C9=CC=C9=D1_=E2=C1=CB=CF=D7=C1?=)
Date: Sun Jul 18 03:12:27 2010
Subject: [gdal-dev] =?koi8-r?b?W1JFXSDv1NrZ1yDPINLB09PZzMvF?=
Message-ID: <E1OaNbi-0001Zk-00.liliabakova-mail-ru@f161.mail.ru>

?????????, ????????????! ???????? ????????, ?????? ????
_______________
??? ???????: http://eligans.ru  http://lan-electric.ru http://adivas.ru
From even.rouault at mines-paris.org  Sun Jul 18 06:58:23 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jul 18 06:58:38 2010
Subject: [gdal-dev] gdal_merge is very slow
In-Reply-To: <AANLkTim-h9AwTAs0o-to5WVEfHhEg1woJ48tlyHF8DPn@mail.gmail.com>
References: <AANLkTinoihyoAzwLwH2eSRz0zH4B0f63bgTFoV-13as7@mail.gmail.com>
	<67CC80F8-89B4-42CB-8417-C2E13BCB3CDB@mac.com>
	<AANLkTim-h9AwTAs0o-to5WVEfHhEg1woJ48tlyHF8DPn@mail.gmail.com>
Message-ID: <201007181258.23184.even.rouault@mines-paris.org>

Leith,

For the record, I've just made changes in the development version that allow 
specifying more than 2 GB (the effective value might be 2GB or 3GB on 32 bit 
operating systems). See http://trac.osgeo.org/gdal/ticket/3689

And the current limit is 2047, not 2147. (2147 * 1024 * 1024 is a negative 
value, so the effect should be to have a 0-byte cache... This was a typo in the 
doc at http://trac.osgeo.org/gdal/wiki/ConfigOptions)

As you've noticed gdal_merge is not able to merge big images without requiring 
big amount of RAM. You can try gdalwarp instead.

Best regards,

Even

Le dimanche 18 juillet 2010 06:44:20, Leith Bade a ?crit :
> That seemed to do the trick. It finished overnight, a lot faster than
> before.
> 
> Final file was 83GB. (Only 1/2 the dataset was used)
> 
> Is there a reason GDAL_CACHEMAX 2147 is the maximum? Under 64-bit a 32-bit
> process has 4GB of virtual memory rather than 2GB under 32-bit (or 3GB with
> the /3GB Windows boot switch).
> 
> I was successfully able to use kdu_compress on the result as well so now I
> only need 4GB to store the file! (Although kdu_compress also has a memory
> limit at 2GB, but you can flush the codestream after every tile to fix
> that).
> 
> Thanks,
> Leith Bade
> leith@leithalweapon.geek.nz
> 
> On 17 July 2010 15:29, Greg Coats <gregcoats@mac.com> wrote:
> > Since you have 4 GB RAM, I suggest overriding the 40 MB GDAL_CACHEMAX
> > default, and increasing it
> > gdal_merge.py --config GDAL_CACHEMAX 1000
> > The maximum possible GDAL_CACHEMAX is
> > gdal_merge.py --config GDAL_CACHEMAX 2147
> > Greg
> > 
> > On Jul 16, 2010, at 9:19 PM, Leith Bade wrote:
> > 
> > Hi,
> > 
> > I am trying to use gdal_merge to mosaic a very large topo GeoTIFF set.
> > 
> > Uncompressed the data set is 60GB, but I keep it stored with DEFLATE
> > compression which results in a dataset under 10GB.
> > 
> > Mosaicked the uncompressed file will be 125GB because of the large
> > regions of nodata generated. Unfortunately this is too big to store on
> > my HDD so I need to apply DEFLATE to it as well.
> > 
> > I am experimenting with only 1/2 the data set at the moment with this
> > command:
> > gdal_merge -co COMPRESS=DEFLATE -co ZLEVEL=9 -co BIGTIFF=YES -o NI-50.tif
> > *-00.tif
> > 
> > On my AMD Phenom II X4 @ 3.2GHz, 64 bit Windows 7, 4GB DDR3 CAS-7 RAM
> > (basically a decently specced PC gaming machine)
> > it has been running for 16 hours and so far has only made it 60% (124 of
> > 204 files)
> > 
> > The other issue is so far the file is 54GB so I will likely run out of
> > disc space before it finished. This indicates that no DEFLATE
> > compression is happening at all!
> > 
> > It currently maxing only 1 CPU core, so I assume it is trying to run
> > DEFLATE then somehow failing to compress at all?
> > 
> > Looking at gdal_merge.py I think the major performance issue is the order
> > in which it copies the data. Currently it copies an entire image at a
> > time (1 colour channel at a time). Thus DEFLATE will not work due to the
> > rather random write pattern to each scanline.
> > 
> > I think a much faster method would be to calculate the destination
> > rectangles for each file into some sort of list. Aftter this generate the
> > destination file 1 scanline at a time, calculating which source images
> > intersect, and working left to right filling with solid color or copying
> > scanlines from the source image.
> > 
> > This allows the DEFLATE to work far more effciently as the write pattern
> > is horizontally linear.
> > 
> > What are your views/suggestions/etc.?
> > 
> > Thanks,
> > Leith Bade
> > leith@leithalweapon.geek.nz
> > 
> >  _______________________________________________
> > 
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Sun Jul 18 11:13:09 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jul 18 11:13:11 2010
Subject: [gdal-dev] www.gdal.org permanently moved to OSU OSL Projects VM
Message-ID: <4C431A05.6050200@pobox.com>

Folks,

Due to a system compromise on several telascience blades - the previous
home for www.gdal.org - I have permanently migrated the site to the OSGeo
Projects VM at OSU OSL.

This VM supports login for anyone in the "telescience group", as did the old
home.  The site lives in /osgeo/gdal/gdal-web.

I have installed swig 1.3.39 in /usr/local/swig-1.3.39 on this system.  It is
also now used to create the nightly snapshots.  The nightly snapshots now live
in http://www.gdal.org/daily instead of on the download site.  This change was
made because we no longer have ready access to update the download site from
the Projects VM.

Scripts for nightly builds, and updating the web site are in /osgeo/gdal.
Currently everything is owned by me, but I think we will eventually be doing
some magic to make stuff more easily manipulated by other gdal developers.

Lastly, I think www.gdal.org is the best place to make releases as long as
care is taken to have /usr/local/swig-1.3.39/bin in the path to pick up the
correct swig version.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Sun Jul 18 12:12:17 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jul 18 12:12:19 2010
Subject: [gdal-dev] PCIDSK Changes, DXF Updates to come
Message-ID: <4C4327E1.9050701@pobox.com>

Folks,

In the last week or two I have implemented support in the PCIDSK SDK for
writing and updating vector features in PCIDSK format.  I have also updated
the OGR PCIDSK driver to use these features.  This is now all in trunk.

I would add that the PCIDSK driver supports "in place update" with respectable
performance, and thus is suitable as an editable format.  I used the QGIS
vector editing on a PCIDSK file and confirmed that this seems to work ok.

In the coming couple weeks I plan to focus on some upgrades to the OGR DXF
write support described here:

   http://fwarmerdam.blogspot.com/2010/07/ogr-dxf-upgrade.html

I see other new drivers and other developments going on quietly.  I would
encourage the implementors to mention them here.  (ie. gml improvements,
SUA and OpenAir drivers)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gregcoats at mac.com  Sun Jul 18 13:58:22 2010
From: gregcoats at mac.com (Greg Coats)
Date: Sun Jul 18 13:59:17 2010
Subject: [gdal-dev] gdal_merge is very slow
In-Reply-To: <AANLkTim-h9AwTAs0o-to5WVEfHhEg1woJ48tlyHF8DPn@mail.gmail.com>
References: <AANLkTinoihyoAzwLwH2eSRz0zH4B0f63bgTFoV-13as7@mail.gmail.com>
	<67CC80F8-89B4-42CB-8417-C2E13BCB3CDB@mac.com>
	<AANLkTim-h9AwTAs0o-to5WVEfHhEg1woJ48tlyHF8DPn@mail.gmail.com>
Message-ID: <D9DEF05C-C0C1-4C49-A022-ED77AE81319F@mac.com>

On Jul 18, 2010, at 12:44 AM, Leith Bade wrote:

> kdu_compress also has a memory limit at 2 GB


Not true. Based on your comment, I suspect that you are using a version of Kakadu that is more than 3 years old, or that was deliberately compiled for a 32 bit environment.

Since version 6.0, released on 15 Aug 2007 (essentially 3 years ago), Kakadu has included makefiles for 32 and 64 bit environments. Since then, I compile Kakadu with Makefile-MAC-x86-64-gcc, and this builds 64 bit applications, that automatically support and use more than 2 GB RAM.

I suggest that you use Kakadu version 6.4, compiled for 64 bits, because it adds to kdu_compress the -progress option, that allows the user to ask for a progress report, at a user specified interval. For example, every 1000 lines
kdu_compress -i in.tif -o out.jp2 Creversible=yes -progress 1000
Copying Geo  tag info, size =     387
        Progress with current tile row = 20.000000%
        Progress with current tile row = 40.000000%
        Progress with current tile row = 60.000000%
        Progress with current tile row = 80.000000%
        Progress with current tile row = 100.000000%
    Finished processing 1 of 1 tile rows
    Initiating final codestream flush ...
Generated 1 tile-part(s) for a total of 1 tile(s).
Greg
http://homepage.mac.com/gregcoats/jp2.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100718/46f1208e/attachment.html
From leith at leithalweapon.geek.nz  Sun Jul 18 18:09:11 2010
From: leith at leithalweapon.geek.nz (Leith Bade)
Date: Sun Jul 18 18:09:35 2010
Subject: [gdal-dev] gdal_merge is very slow
In-Reply-To: <D9DEF05C-C0C1-4C49-A022-ED77AE81319F@mac.com>
References: <AANLkTinoihyoAzwLwH2eSRz0zH4B0f63bgTFoV-13as7@mail.gmail.com> 
	<67CC80F8-89B4-42CB-8417-C2E13BCB3CDB@mac.com>
	<AANLkTim-h9AwTAs0o-to5WVEfHhEg1woJ48tlyHF8DPn@mail.gmail.com> 
	<D9DEF05C-C0C1-4C49-A022-ED77AE81319F@mac.com>
Message-ID: <AANLkTinX8_XuHXPDbCIFDhDOnPgSw-8WkgxjIroSX3J7@mail.gmail.com>

Unfortunately I can't afford a Kakadu license for personal use so I am using
the precompiled demo binaries. (
http://www.kakadusoftware.com/index.php?option=com_content&task=view&id=26&Itemid=22
)

As you can see they only have a 32-bit build (and it is not even compiled as
Large Address Aware
http://msdn.microsoft.com/en-us/library/wz223b1z%28VS.80%29.aspx - this
would allow 4GB)

Currently if you use them on a large image without setting flush_period
kdu_compress will continue to allocate memory until it reaches the magical
2GB limit at which point the program crashes with the message:
"This application has requested the Runtime to terminate it in an unusual
way."

This is annoying as to use flush_period you need to break the image into
sufficiently small tiles which has a very bad effect on the performance of
the viewer when zoomed out a lot.

I note that the ERDAS ECW SDK has no memory limitation issues and will
happily compress the image into 1 tile, but the quality of the result is not
as nice as kdu_compress.

Would be nice for them to compile the 32bit with the /LARGEADDRESSAWARE
linker flag, and also provide a 64bit version too. But then I am not paying
them for it...

Thanks,
Leith Bade
leith@leithalweapon.geek.nz



On 19 July 2010 05:58, Greg Coats <gregcoats@mac.com> wrote:

> On Jul 18, 2010, at 12:44 AM, Leith Bade wrote:
>
> kdu_compress also has a memory limit at 2 GB
>
>
> Not true. Based on your comment, I suspect that you are using a version of
> Kakadu that is more than 3 years old, or that was deliberately compiled for
> a 32 bit environment.
>
> Since version 6.0, released on 15 Aug 2007 (essentially 3 years ago),
> Kakadu has included makefiles for 32 and 64 bit environments. Since then, I
> compile Kakadu with Makefile-MAC-x86-64-gcc, and this builds 64 bit
> applications, that automatically support and use more than 2 GB RAM.
>
> I suggest that you use Kakadu version 6.4, compiled for 64 bits, because it
> adds to kdu_compress the -progress option, that allows the user to ask for a
> progress report, at a user specified interval. For example, every 1000 lines
> kdu_compress -i in.tif -o out.jp2 Creversible=yes -progress 1000
> Copying Geo  tag info, size =     387
>         Progress with current tile row = 20.000000%
>         Progress with current tile row = 40.000000%
>         Progress with current tile row = 60.000000%
>         Progress with current tile row = 80.000000%
>         Progress with current tile row = 100.000000%
>     Finished processing 1 of 1 tile rows
>     Initiating final codestream flush ...
> Generated 1 tile-part(s) for a total of 1 tile(s).
> Greg
> http://homepage.mac.com/gregcoats/jp2.html
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100719/0441b464/attachment.html
From gregcoats at mac.com  Sun Jul 18 19:03:39 2010
From: gregcoats at mac.com (Greg Coats)
Date: Sun Jul 18 19:03:43 2010
Subject: [gdal-dev] gdal_merge is very slow
In-Reply-To: <AANLkTinX8_XuHXPDbCIFDhDOnPgSw-8WkgxjIroSX3J7@mail.gmail.com>
References: <AANLkTinoihyoAzwLwH2eSRz0zH4B0f63bgTFoV-13as7@mail.gmail.com>
	<67CC80F8-89B4-42CB-8417-C2E13BCB3CDB@mac.com>
	<AANLkTim-h9AwTAs0o-to5WVEfHhEg1woJ48tlyHF8DPn@mail.gmail.com>
	<D9DEF05C-C0C1-4C49-A022-ED77AE81319F@mac.com>
	<AANLkTinX8_XuHXPDbCIFDhDOnPgSw-8WkgxjIroSX3J7@mail.gmail.com>
Message-ID: <F615E0D8-F8D6-4A72-9447-E05E3596BF10@mac.com>

On Jul 18, 2010, at 6:09 PM, Leith Bade wrote:

> they only have a 32-bit build

Not true.
The complaint that Kakadu has never offered 64 bit versions of their command line executables for free is false. The Kakadu web site now offers, for free, version 6.4 for Mac OS X compiled for 32 bit and 64 bit, for Motorola CPU, and Intel CPU. That is 4 sets of executables, all for free. That is because the Kakadu + Mac OS X community actively supports Kakadu, and asked for this. There is nothing else to give away for free, for Mac OS X. Also, the Kakadu based GDAL JP2KAK executable is free. I have given it away for free for Mac OS X on my web site for years. If you are not running Mac OS X, then you can ask for a JP2KAK executable from someone with Kakadu who is using whatever OS you are using.

I sense that what you are saying is that user community for whatever OS you are using is not as active as the Kakadu + Mac OS X community.

A Kakadu license for personal use costs less than Adobe charges for one Photoshop upgrade. You only pay once in your lifetime for the Kakadu source code, but you are expected to pay for a Photoshop upgrade about every year. Greg
From P.Halls at york.ac.uk  Mon Jul 19 04:05:26 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Mon Jul 19 04:05:32 2010
Subject: [gdal-dev] ogr2ogr problem converting UK Ordnance Survey MasterMap
In-Reply-To: <201007131958.56594.even.rouault@mines-paris.org>
References: <4C2CAC67.40109@york.ac.uk>	<201007122309.20649.even.rouault@mines-paris.org>	<2F7776B4033D3B45BC0301B783F3A8A02980EFE44E@GOOFY.iplbath.com>
	<201007131958.56594.even.rouault@mines-paris.org>
Message-ID: <4C440746.4060802@york.ac.uk>

Dear All,

    as a step towards a solution where the output is to Oracle, I have just 
submitted enhancement ticket 3690.  This describes edits to ogrocidatasource and 
ogrocitablelayer to enable the creation of non-spatial tables (ie omitting the 
geomentry column) if a geometry type of wkbNone is specified to CreateFeature. 
I've tested this in 1.6.3.

    Doing this facilitates the use of separate tables for the problematic OS 
data, so, for example, changeHistory entries could be written to a changehistory 
table, specifying the FID of the master record and the change history data (date 
and reason) as three columns.  The result could be joined to the master by means 
of the FID whenever there is interest in these data.  My thanks to Dale Lutz for 
suggesting this type of approach.

    The same approach can be used for storing the contents of an OS Mastermap 
ITN dataset - which comprises a set of spatial and non-spatial datasets, each of 
which may include the problematic columns.  Indeed, handling ITN will be a 
little more complex than with Topography Layer, as there will be a need to 
differentiate between the extra tables comprising such data as changeHistory.

    Note that this in no way breaks the principle that GDAL does not handle 
topology: any joins or inferred relationships between any of these tables is in 
the mind and usage of the programmer / end user.  All I have done is facilitate 
the writing of these data into a simple output format.  I do see other benefits 
in these changes: for example when writing models that must use both spatial and 
non-spatial data: this was easy with Shapelib / DbfLib and means that the 
programmer need only use the OGR api to work with Oracle tables.

Best wishes,

Peter

--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From wonder.sk at gmail.com  Mon Jul 19 08:08:46 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon Jul 19 08:08:49 2010
Subject: [gdal-dev] Optimizing access to shapefiles
Message-ID: <AANLkTinbIpThouL0pFJkc77_opJ6uxwe4PwoGB017xNL@mail.gmail.com>

Hi,

in order to speed up rendering in QGIS as a part of my GSoC project,
I've took some time to profile reading of shapefiles in OGR. From the
results I'd like to suggest some changes that significantly contribute
to the speed of data retrieval. On a test shapefile of a road network
(about 100 thousand polylines), I have seen 3-4 times faster retrieval
when I've implemented the following changes:

1. allow users of OGR library set which fields they really need. Most
of time is wasted by fetching all the attributes, but typically none
or just one attribute is necessary when rendering. For that, I've
added the following call:
OGRLayer::SetDesiredFields(int numFields, int* fields);
The user passes an array of ints, each item tells whether the field
should be fetched (1) or not (0). The numFields tells the size of the
array. If numFields < 0 then the layer will return all fields (default
behavior). The driver implementation then just before fetching a field
checks whether to fetch the field or not. This optimization could be
easily used in any driver, I've implemented it only for shapefiles.
The speedup will vary depending on the size of the attribute table and
number of desired fields. On my test shapefile containing 16 fields,
the data has been fetched up to 3x faster when no fields were set as
desired.

2. reuse allocated memory. When a new shape is going to be read within
shapelib, new OGRShape object and its coordinate arrays are allocated.
By reusing one such temporary OGRShape object within a layer together
with the coordinate arrays (only allowing them to grow - to
accommodate larger shapes), I have obtained further speedup of about
30%.

I'm attaching patch for both cases. I'd like to hear from you if there
is interest in making the OGR library faster using the suggested
strategies. I don't expect the patch to be applied as-is since it is
kind of a quick hack, though I hope it can serve well for a
discussion.

If there is interest, I think of some further optimizations by reusing
OGRFeature instances and possibly also geometries - I expect further
performance improvement of 10-20% in read access to features for all
drivers.

Regards
Martin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: desired_fields_reuse_ogrshape.diff
Type: text/x-diff
Size: 20332 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100719/b35998cd/desired_fields_reuse_ogrshape-0001.bin
From chaitanya.ch at gmail.com  Mon Jul 19 08:38:16 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jul 19 08:38:19 2010
Subject: [gdal-dev] Optimizing access to shapefiles
In-Reply-To: <AANLkTinbIpThouL0pFJkc77_opJ6uxwe4PwoGB017xNL@mail.gmail.com>
References: <AANLkTinbIpThouL0pFJkc77_opJ6uxwe4PwoGB017xNL@mail.gmail.com>
Message-ID: <AANLkTimbodJ63sHzn73XTeAEHvizJly3eQiu2Wul5cxz@mail.gmail.com>

Martin,

These changes look quite promising. Please add two tickets at
http://trac.osgeo.org/gdal/newticket , one for each topic, and attach the
patch.

On Mon, Jul 19, 2010 at 5:38 PM, Martin Dobias <wonder.sk@gmail.com> wrote:

> Hi,
>
> in order to speed up rendering in QGIS as a part of my GSoC project,
> I've took some time to profile reading of shapefiles in OGR. From the
> results I'd like to suggest some changes that significantly contribute
> to the speed of data retrieval. On a test shapefile of a road network
> (about 100 thousand polylines), I have seen 3-4 times faster retrieval
> when I've implemented the following changes:
>
> 1. allow users of OGR library set which fields they really need. Most
> of time is wasted by fetching all the attributes, but typically none
> or just one attribute is necessary when rendering. For that, I've
> added the following call:
> OGRLayer::SetDesiredFields(int numFields, int* fields);
> The user passes an array of ints, each item tells whether the field
> should be fetched (1) or not (0). The numFields tells the size of the
> array. If numFields < 0 then the layer will return all fields (default
> behavior). The driver implementation then just before fetching a field
> checks whether to fetch the field or not. This optimization could be
> easily used in any driver, I've implemented it only for shapefiles.
> The speedup will vary depending on the size of the attribute table and
> number of desired fields. On my test shapefile containing 16 fields,
> the data has been fetched up to 3x faster when no fields were set as
> desired.
>
> 2. reuse allocated memory. When a new shape is going to be read within
> shapelib, new OGRShape object and its coordinate arrays are allocated.
> By reusing one such temporary OGRShape object within a layer together
> with the coordinate arrays (only allowing them to grow - to
> accommodate larger shapes), I have obtained further speedup of about
> 30%.
>
> I'm attaching patch for both cases. I'd like to hear from you if there
> is interest in making the OGR library faster using the suggested
> strategies. I don't expect the patch to be applied as-is since it is
> kind of a quick hack, though I hope it can serve well for a
> discussion.
>
> If there is interest, I think of some further optimizations by reusing
> OGRFeature instances and possibly also geometries - I expect further
> performance improvement of 10-20% in read access to features for all
> drivers.
>
> Regards
> Martin
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100719/1a62f714/attachment.html
From warmerdam at pobox.com  Mon Jul 19 09:46:03 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jul 19 09:46:08 2010
Subject: [gdal-dev] Optimizing access to shapefiles
In-Reply-To: <AANLkTinbIpThouL0pFJkc77_opJ6uxwe4PwoGB017xNL@mail.gmail.com>
References: <AANLkTinbIpThouL0pFJkc77_opJ6uxwe4PwoGB017xNL@mail.gmail.com>
Message-ID: <4C44571B.5000300@pobox.com>

Martin Dobias wrote:
> Hi,
> 
> in order to speed up rendering in QGIS as a part of my GSoC project,
> I've took some time to profile reading of shapefiles in OGR. From the
> results I'd like to suggest some changes that significantly contribute
> to the speed of data retrieval. On a test shapefile of a road network
> (about 100 thousand polylines), I have seen 3-4 times faster retrieval
> when I've implemented the following changes:
> 
> 1. allow users of OGR library set which fields they really need. Most
> of time is wasted by fetching all the attributes, but typically none
> or just one attribute is necessary when rendering. For that, I've
> added the following call:
> OGRLayer::SetDesiredFields(int numFields, int* fields);
> The user passes an array of ints, each item tells whether the field
> should be fetched (1) or not (0). The numFields tells the size of the
> array. If numFields < 0 then the layer will return all fields (default
> behavior). The driver implementation then just before fetching a field
> checks whether to fetch the field or not. This optimization could be
> easily used in any driver, I've implemented it only for shapefiles.
> The speedup will vary depending on the size of the attribute table and
> number of desired fields. On my test shapefile containing 16 fields,
> the data has been fetched up to 3x faster when no fields were set as
> desired.

Martin,

Would GetFeature() still return a feature with a full vector of
fields, but those not desired just being left in the null state?
If so, I think such an approach would be reasonable.  However, it will
require an RFC process to update the core OGR API.  Are you willing
to prepare such an RFC?

> 2. reuse allocated memory. When a new shape is going to be read within
> shapelib, new OGRShape object and its coordinate arrays are allocated.
> By reusing one such temporary OGRShape object within a layer together
> with the coordinate arrays (only allowing them to grow - to
> accommodate larger shapes), I have obtained further speedup of about
> 30%.

As GetFeature() returns a feature instance that becomes owned by the
caller I do not see how this could be made to function without a
fundamental change in the OGR API.  Perhaps you can explain?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From wonder.sk at gmail.com  Mon Jul 19 10:34:40 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon Jul 19 10:34:43 2010
Subject: [gdal-dev] Optimizing access to shapefiles
In-Reply-To: <4C44571B.5000300@pobox.com>
References: <AANLkTinbIpThouL0pFJkc77_opJ6uxwe4PwoGB017xNL@mail.gmail.com>
	<4C44571B.5000300@pobox.com>
Message-ID: <AANLkTilLtLqDCDhx06Smxyhtxp7WSCTAhPGzSy3w0vP7@mail.gmail.com>

Hi Frank

On Mon, Jul 19, 2010 at 3:46 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>> 1. allow users of OGR library set which fields they really need. Most
>> of time is wasted by fetching all the attributes, but typically none
>> or just one attribute is necessary when rendering. For that, I've
>> added the following call:
>> OGRLayer::SetDesiredFields(int numFields, int* fields);
>> The user passes an array of ints, each item tells whether the field
>> should be fetched (1) or not (0). The numFields tells the size of the
>> array. If numFields < 0 then the layer will return all fields (default
>> behavior). The driver implementation then just before fetching a field
>> checks whether to fetch the field or not. This optimization could be
>> easily used in any driver, I've implemented it only for shapefiles.
>> The speedup will vary depending on the size of the attribute table and
>> number of desired fields. On my test shapefile containing 16 fields,
>> the data has been fetched up to 3x faster when no fields were set as
>> desired.
>
> Martin,
>
> Would GetFeature() still return a feature with a full vector of
> fields, but those not desired just being left in the null state?

Yes, that's what the patch does - it only omits fetching the value of
some fields.

> If so, I think such an approach would be reasonable. ?However, it will
> require an RFC process to update the core OGR API. ?Are you willing
> to prepare such an RFC?

Will do.


>> 2. reuse allocated memory. When a new shape is going to be read within
>> shapelib, new OGRShape object and its coordinate arrays are allocated.
>> By reusing one such temporary OGRShape object within a layer together
>> with the coordinate arrays (only allowing them to grow - to
>> accommodate larger shapes), I have obtained further speedup of about
>> 30%.
>
> As GetFeature() returns a feature instance that becomes owned by the
> caller I do not see how this could be made to function without a
> fundamental change in the OGR API. ?Perhaps you can explain?

One note to avoid confusion: the suggestion I've made above relates
only to shapefile driver in OGR and doesn't impose any changes to the
API. The suggested patch reuses OGRShape instances which are passed
between OGR shapefile driver and shapelib. These OGRShape instances
never get to the user, so it's just a matter of internal working of
the shapefile driver. Please take a look at the patch if still
unclear.

Below I explain the further idea which I haven't implemented yet,
which should save allocations/deallocations of OGRFeature instances
and which could boost the speed of retrieval of data from any OGR
driver:

GetFeature() returns a new instance and DestroyFeature() deletes that
instance. My idea is that DestroyFeature() call would save the
instance in a pool (list) of "returned" feature instances. These
returned features could be reused by the GetFeature() - it will take
one from the list instead of creating a new instance. I think this
doesn't make any influence on the public OGR API, because the
semantics will be the same. Only the OGR internals will be modified so
that it will not destroy OGRFeature instance immediately, because it
will assume that more GetFeature() calls will be issued.

If the pool would be specific for each OGRLayer, many
allocations/deallocations of OGRFeature and OGRField instances could
be saved, because the features contain the same fields, they would
only have to be cleaned (but the array would stay as-is). A layer has
usually the same type of geometry for all features, so even geometries
could be kept and only the size of the coordinate array would be
altered between the calls.

Hopefully now it makes more sense.

Regards
Martin
From nathan.raley at stcelectronics.com  Mon Jul 19 10:46:55 2010
From: nathan.raley at stcelectronics.com (nlraley)
Date: Mon Jul 19 10:46:57 2010
Subject: [gdal-dev] Trying to use ogr2ogr conversion in Visual Studio
 Project... Quick question
Message-ID: <1279550815400-5312328.post@n2.nabble.com>


I hope I'm posting in the right group.

I am trying to use the conversion capabilities of ogr2ogr to convert a
shapefile to kml format so I can basically have a user select a shp file and
automatically convert it without having them go to the command prompt and
type out the commands or any of that.

I was handling this by passing commands to the command line to automatically
generate the necessary commands to do this conversion.

My question is, what all do I need to include to be able to use the
ogr2ogr.exe fully?  Or is there a way to include the dll's do handle it
without the use of the command line?  

The reason I was asking was I wanted to give them the bare minimum necessary
to perform the conversions and not have to worry about them having to do a
full blown install and then worry about what directory they placed the files
in and everything of that nature.

I would like to either:
a) Include the ogr2ogr.exe and the dll's it needs to run and then just pass
the commands like I am doing now
or
b) Include the dll's in the project so I can use the conversion without
having to run ogr2ogr.exe through the command prompt.

Any ideas?
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Trying-to-use-ogr2ogr-conversion-in-Visual-Studio-Project-Quick-question-tp5312328p5312328.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Mon Jul 19 12:18:40 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jul 19 12:18:47 2010
Subject: [gdal-dev] Trying to use ogr2ogr conversion in Visual Studio 
	Project... Quick question
In-Reply-To: <1279550815400-5312328.post@n2.nabble.com>
References: <1279550815400-5312328.post@n2.nabble.com>
Message-ID: <AANLkTimHCnACtciG0FDrXAitetGUtXcg91F5J0Gl94Fy@mail.gmail.com>

Nathan,

OGRSFDriver::CopyDataSource() may help you. You won't have all the fancy
options ogr2ogr provides but you will be able to create a copy of the
shapefile.

On Mon, Jul 19, 2010 at 8:16 PM, nlraley <nathan.raley@stcelectronics.com>wrote:

>
> I hope I'm posting in the right group.
>
> I am trying to use the conversion capabilities of ogr2ogr to convert a
> shapefile to kml format so I can basically have a user select a shp file
> and
> automatically convert it without having them go to the command prompt and
> type out the commands or any of that.
>
> I was handling this by passing commands to the command line to
> automatically
> generate the necessary commands to do this conversion.
>
> My question is, what all do I need to include to be able to use the
> ogr2ogr.exe fully?  Or is there a way to include the dll's do handle it
> without the use of the command line?
>
> The reason I was asking was I wanted to give them the bare minimum
> necessary
> to perform the conversions and not have to worry about them having to do a
> full blown install and then worry about what directory they placed the
> files
> in and everything of that nature.
>
> I would like to either:
> a) Include the ogr2ogr.exe and the dll's it needs to run and then just pass
> the commands like I am doing now
> or
> b) Include the dll's in the project so I can use the conversion without
> having to run ogr2ogr.exe through the command prompt.
>
> Any ideas?
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Trying-to-use-ogr2ogr-conversion-in-Visual-Studio-Project-Quick-question-tp5312328p5312328.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100719/88278fd6/attachment.html
From matt.gregory at oregonstate.edu  Mon Jul 19 12:28:39 2010
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Mon Jul 19 12:28:47 2010
Subject: [gdal-dev] snap window with gdalwarp
Message-ID: <1D673F86DDA00841A1216F04D1CE70D641A7BE80F4@EXCH2.nws.oregonstate.edu>

Hi all,

Is there a way to set a 'snap' coordinate for a target dataset in gdalwarp without having to know the target extent?  For example, if I wanted my target dataset to have extent corners that were a multiple of my cellsize, I could specify (0.0, 0.0) as my snap coordinate.  In Arc, this is accomplished as:

  project grid src target projection.prj bilinear 30 0 0

I'm guessing that with gdalwarp you have to first have to figure out what the projected extent is, buffer that out to your desired snapped extent and then run gdalwarp with that calculated extent and the -te option.  Using VRT as the target data format to figure out this information is simple enough.  I just wanted to make sure that there weren't command line flags I was overlooking.

thanks, matt 

From ragi at burhum.com  Mon Jul 19 12:50:20 2010
From: ragi at burhum.com (Ragi Burhum)
Date: Mon Jul 19 12:50:23 2010
Subject: [gdal-dev] Optimizing access to shapefiles
Message-ID: <AANLkTinmgiMUJzl4GyuBOq3U-XhUARUNeC3TF6gTCZ5X@mail.gmail.com>

>
> Date: Mon, 19 Jul 2010 16:34:40 +0200
> From: Martin Dobias <wonder.sk@gmail.com>
> Subject: Re: [gdal-dev] Optimizing access to shapefiles
> To: Frank Warmerdam <warmerdam@pobox.com>
> Cc: gdal-dev@lists.osgeo.org
> Message-ID:
>        <AANLkTilLtLqDCDhx06Smxyhtxp7WSCTAhPGzSy3w0vP7@mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Hi Frank
>
> On Mon, Jul 19, 2010 at 3:46 PM, Frank Warmerdam <warmerdam@pobox.com>
> wrote:
> >> 1. allow users of OGR library set which fields they really need. Most
> >> of time is wasted by fetching all the attributes, but typically none
> >> or just one attribute is necessary when rendering. For that, I've
> >> added the following call:
> >> OGRLayer::SetDesiredFields(int numFields, int* fields);
> >> The user passes an array of ints, each item tells whether the field
> >> should be fetched (1) or not (0). The numFields tells the size of the
> >> array. If numFields < 0 then the layer will return all fields (default
> >> behavior). The driver implementation then just before fetching a field
> >> checks whether to fetch the field or not. This optimization could be
> >> easily used in any driver, I've implemented it only for shapefiles.
> >> The speedup will vary depending on the size of the attribute table and
> >> number of desired fields. On my test shapefile containing 16 fields,
> >> the data has been fetched up to 3x faster when no fields were set as
> >> desired.
>

Would it make sense instead of implementing a SetDesiredFields(..) to
implement a SetSubFields(string fieldnames) where the function
takes a comma delimited list of subfields and then those are parsed by the
shapefile driver to find out which field values to fetch? That way, for
other drivers that have a SQL based underlying datastore, the way they would
implement that fetching behavior would be by putting that content between
the SELECT and the FROM portion.



> >
> > Martin,
> >
> > Would GetFeature() still return a feature with a full vector of
> > fields, but those not desired just being left in the null state?
>
> Yes, that's what the patch does - it only omits fetching the value of
> some fields.
>

Of course if this is a requirement (need to have the full vector of fields)
then there would need to be some extra work done (with the approach I
describe above) to satisfy it.


> > If so, I think such an approach would be reasonable.  However, it will
> > require an RFC process to update the core OGR API.  Are you willing
> > to prepare such an RFC?
>
> Will do.
>
>
> >> 2. reuse allocated memory. When a new shape is going to be read within
> >> shapelib, new OGRShape object and its coordinate arrays are allocated.
> >> By reusing one such temporary OGRShape object within a layer together
> >> with the coordinate arrays (only allowing them to grow - to
> >> accommodate larger shapes), I have obtained further speedup of about
> >> 30%.
> >
> > As GetFeature() returns a feature instance that becomes owned by the
> > caller I do not see how this could be made to function without a
> > fundamental change in the OGR API.  Perhaps you can explain?
>
> One note to avoid confusion: the suggestion I've made above relates
> only to shapefile driver in OGR and doesn't impose any changes to the
> API. The suggested patch reuses OGRShape instances which are passed
> between OGR shapefile driver and shapelib. These OGRShape instances
> never get to the user, so it's just a matter of internal working of
> the shapefile driver. Please take a look at the patch if still
> unclear.
>

IMHO having a way to avoid fetching data would benefit all drivers.


>
> Below I explain the further idea which I haven't implemented yet,
> which should save allocations/deallocations of OGRFeature instances
> and which could boost the speed of retrieval of data from any OGR
> driver:
>
> GetFeature() returns a new instance and DestroyFeature() deletes that
> instance. My idea is that DestroyFeature() call would save the
> instance in a pool (list) of "returned" feature instances. These
> returned features could be reused by the GetFeature() - it will take
> one from the list instead of creating a new instance. I think this
> doesn't make any influence on the public OGR API, because the
> semantics will be the same. Only the OGR internals will be modified so
> that it will not destroy OGRFeature instance immediately, because it
> will assume that more GetFeature() calls will be issued.
>
> If the pool would be specific for each OGRLayer, many
> allocations/deallocations of OGRFeature and OGRField instances could
> be saved, because the features contain the same fields, they would
> only have to be cleaned (but the array would stay as-is). A layer has
> usually the same type of geometry for all features, so even geometries
> could be kept and only the size of the coordinate array would be
> altered between the calls.
>

This is effectively what happens in ArcObjects cursors (recycling vs
non-recycling behavior). All drawing in ArcMap (except when in EditSessions)
use
recycling cursors mixed with a subfields clause since it makes drawing
*much* faster.

My two cents,

- Ragi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100719/9b63c67e/attachment.html
From wonder.sk at gmail.com  Mon Jul 19 13:50:50 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon Jul 19 13:50:53 2010
Subject: [gdal-dev] Optimizing access to shapefiles
In-Reply-To: <AANLkTinmgiMUJzl4GyuBOq3U-XhUARUNeC3TF6gTCZ5X@mail.gmail.com>
References: <AANLkTinmgiMUJzl4GyuBOq3U-XhUARUNeC3TF6gTCZ5X@mail.gmail.com>
Message-ID: <AANLkTilrhu6_E33dUfz6gO2NZaRU4UVRL143tRFUSpE0@mail.gmail.com>

On Mon, Jul 19, 2010 at 6:50 PM, Ragi Burhum <ragi@burhum.com> wrote:
>> >> 1. allow users of OGR library set which fields they really need. Most
>> >> of time is wasted by fetching all the attributes, but typically none
>> >> or just one attribute is necessary when rendering. For that, I've
>> >> added the following call:
>> >> OGRLayer::SetDesiredFields(int numFields, int* fields);
>> >> The user passes an array of ints, each item tells whether the field
>> >> should be fetched (1) or not (0). The numFields tells the size of the
>> >> array. If numFields < 0 then the layer will return all fields (default
>> >> behavior). The driver implementation then just before fetching a field
>> >> checks whether to fetch the field or not. This optimization could be
>> >> easily used in any driver, I've implemented it only for shapefiles.
>> >> The speedup will vary depending on the size of the attribute table and
>> >> number of desired fields. On my test shapefile containing 16 fields,
>> >> the data has been fetched up to 3x faster when no fields were set as
>> >> desired.
>
> Would it make sense instead of implementing a SetDesiredFields(..) to
> implement a SetSubFields(string fieldnames) where the function
> takes a comma delimited list of subfields and then those are parsed by the
> shapefile driver to find out which field values to fetch? That way, for
> other drivers that have a SQL based underlying datastore, the way they would
> implement that fetching behavior would be by putting that content between
> the SELECT and the FROM portion.

Well, I have the impression that passing indexes of the fields is a
more developer friendly. It is easier to construct a comma delimited
list of fields from indexes than finding out field indexes from a
string containing a list of fields (field names can contain commas too
etc.)

>> Below I explain the further idea which I haven't implemented yet,
>> which should save allocations/deallocations of OGRFeature instances
>> and which could boost the speed of retrieval of data from any OGR
>> driver:
>>
>> [...]
>
> This is effectively what happens in ArcObjects cursors (recycling vs
> non-recycling behavior). All drawing in ArcMap (except when in EditSessions)
> use
> recycling cursors mixed with a subfields clause since it makes drawing
> *much* faster.

As I don't use Arc* software, I wasn't aware of that. It's good to
know that others successfully use this technique...

Regards
Martin
From warmerdam at pobox.com  Mon Jul 19 13:54:20 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jul 19 13:54:26 2010
Subject: [gdal-dev] Optimizing access to shapefiles
In-Reply-To: <AANLkTinmgiMUJzl4GyuBOq3U-XhUARUNeC3TF6gTCZ5X@mail.gmail.com>
References: <AANLkTinmgiMUJzl4GyuBOq3U-XhUARUNeC3TF6gTCZ5X@mail.gmail.com>
Message-ID: <4C44914C.5030206@pobox.com>

Ragi Burhum wrote:
> Would it make sense instead of implementing a SetDesiredFields(..) to 
> implement a SetSubFields(string fieldnames) where the function
> takes a comma delimited list of subfields and then those are parsed by 
> the shapefile driver to find out which field values to fetch? That way, 
> for other drivers that have a SQL based underlying datastore, the way 
> they would implement that fetching behavior would be by putting that 
> content between the SELECT and the FROM portion.

Ragi,

I don't get the distinction here.  Why can't the RDBMS based providers
just construct their SELECT clause based on the names of the fields
selected with SetDesiredFields()?  Are you seeking a chance for the
app to insert arbitrary field operations?  If so, ExecuteSQL() is the
right avenue for that (IMHO).

Martin Dobias wrote:
 > One note to avoid confusion: the suggestion I've made above relates
 > only to shapefile driver in OGR and doesn't impose any changes to the
 > API. The suggested patch reuses OGRShape instances which are passed
 > between OGR shapefile driver and shapelib. These OGRShape instances
 > never get to the user, so it's just a matter of internal working of
 > the shapefile driver. Please take a look at the patch if still
 > unclear.

I'm not sure what an OGRShape is.  Perhaps you are referring to
OGRFeature?  Or SHPObject?    If the optimization is to reuse
a SHPObject in repeated calls to Shapelib then this is indeed
something that could be pursued without impact on the broader
OGR API though I'd be amazed to find it makes a really big
difference.

 > GetFeature() returns a new instance and DestroyFeature() deletes that
 > instance. My idea is that DestroyFeature() call would save the
 > instance in a pool (list) of "returned" feature instances. These
 > returned features could be reused by the GetFeature() - it will take
 > one from the list instead of creating a new instance. I think this
 > doesn't make any influence on the public OGR API, because the
 > semantics will be the same. Only the OGR internals will be modified so
 > that it will not destroy OGRFeature instance immediately, because it
 > will assume that more GetFeature() calls will be issued.
 >
 > If the pool would be specific for each OGRLayer, many
 > allocations/deallocations of OGRFeature and OGRField instances could
 > be saved, because the features contain the same fields, they would
 > only have to be cleaned (but the array would stay as-is). A layer has
 > usually the same type of geometry for all features, so even geometries
 > could be kept and only the size of the coordinate array would be
 > altered between the calls.

This seems *possible* but pretty complicated and if not done very
carefully could introduce additional problems.  I can't help but
wonder if you aren't just using a poor heap implementation which
is making allocations and deallocations unnecessarily expensive.
Reworking huge amounts of code around the assumption that
new/delete are terribly expensive does not seem entirely prudent.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Jul 19 14:08:07 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jul 19 14:08:13 2010
Subject: [gdal-dev] snap window with gdalwarp
In-Reply-To: <1D673F86DDA00841A1216F04D1CE70D641A7BE80F4@EXCH2.nws.oregonstate.edu>
References: <1D673F86DDA00841A1216F04D1CE70D641A7BE80F4@EXCH2.nws.oregonstate.edu>
Message-ID: <4C449487.1020502@pobox.com>

Gregory, Matthew wrote:
> Hi all,
> 
> Is there a way to set a 'snap' coordinate for a target dataset in gdalwarp
> without having to know the target extent?  For example, if I wanted my
> target dataset to have extent corners that were a multiple of my cellsize, I
> could specify (0.0, 0.0) as my snap coordinate.  In Arc, this is
> accomplished as:
> 
> project grid src target projection.prj bilinear 30 0 0
> 
> I'm guessing that with gdalwarp you have to first have to figure out what
> the projected extent is, buffer that out to your desired snapped extent and
> then run gdalwarp with that calculated extent and the -te option.  Using VRT
> as the target data format to figure out this information is simple enough.
> I just wanted to make sure that there weren't command line flags I was
> overlooking.

Matthew,

I am not aware of any such capability currently.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ragi at burhum.com  Mon Jul 19 14:19:18 2010
From: ragi at burhum.com (Ragi Burhum)
Date: Mon Jul 19 14:19:23 2010
Subject: [gdal-dev] Optimizing access to shapefiles
In-Reply-To: <4C44914C.5030206@pobox.com>
References: <AANLkTinmgiMUJzl4GyuBOq3U-XhUARUNeC3TF6gTCZ5X@mail.gmail.com>
	<4C44914C.5030206@pobox.com>
Message-ID: <AANLkTimcC-bXCYwpkqLJBpTmPH9r_eQuWi7AsUPyB2Ae@mail.gmail.com>

On Mon, Jul 19, 2010 at 10:54 AM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Ragi Burhum wrote:
>
>> Would it make sense instead of implementing a SetDesiredFields(..) to
>> implement a SetSubFields(string fieldnames) where the function
>> takes a comma delimited list of subfields and then those are parsed by the
>> shapefile driver to find out which field values to fetch? That way, for
>> other drivers that have a SQL based underlying datastore, the way they would
>> implement that fetching behavior would be by putting that content between
>> the SELECT and the FROM portion.
>>
>
> Ragi,
>
> I don't get the distinction here.  Why can't the RDBMS based providers
> just construct their SELECT clause based on the names of the fields
> selected with SetDesiredFields()?


They could. I just though just pushing the string directly would be easier
from an API point of view and from an implementation perspective. Maybe it
is just personal preference and I am mistaken.

Thanks,

- Ragi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100719/32cfc64e/attachment.html
From wonder.sk at gmail.com  Mon Jul 19 14:45:47 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon Jul 19 14:45:49 2010
Subject: [gdal-dev] Optimizing access to shapefiles
In-Reply-To: <4C44914C.5030206@pobox.com>
References: <AANLkTinmgiMUJzl4GyuBOq3U-XhUARUNeC3TF6gTCZ5X@mail.gmail.com>
	<4C44914C.5030206@pobox.com>
Message-ID: <AANLkTil4GoklF-jLFlc_PEGr-pa4oHZE3VPqDXL9eOM9@mail.gmail.com>

On Mon, Jul 19, 2010 at 7:54 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Martin Dobias wrote:
>> One note to avoid confusion: the suggestion I've made above relates
>> only to shapefile driver in OGR and doesn't impose any changes to the
>> API. The suggested patch reuses OGRShape instances which are passed
>> between OGR shapefile driver and shapelib. These OGRShape instances
>> never get to the user, so it's just a matter of internal working of
>> the shapefile driver. Please take a look at the patch if still
>> unclear.
>
> I'm not sure what an OGRShape is. ?Perhaps you are referring to
> OGRFeature? ?Or SHPObject? ? ?If the optimization is to reuse
> a SHPObject in repeated calls to Shapelib then this is indeed
> something that could be pursued without impact on the broader
> OGR API though I'd be amazed to find it makes a really big
> difference.

Ooops, sorry! I meant SHPObject. From my tests, when reusing the
SHPObject (and the coordinate arrays in it), the time of retrieval of
100 thousand line features goes from +-125ms down to +-95ms. For 100
thousand features it saved +- 700 thousand pairs of alloc/free calls.


>> GetFeature() returns a new instance and DestroyFeature() deletes that
>> instance. My idea is that DestroyFeature() call would save the
>> instance in a pool (list) of "returned" feature instances. These
>> returned features could be reused by the GetFeature() - it will take
>> one from the list instead of creating a new instance. I think this
>> doesn't make any influence on the public OGR API, because the
>> semantics will be the same. Only the OGR internals will be modified so
>> that it will not destroy OGRFeature instance immediately, because it
>> will assume that more GetFeature() calls will be issued.
>>
>> If the pool would be specific for each OGRLayer, many
>> allocations/deallocations of OGRFeature and OGRField instances could
>> be saved, because the features contain the same fields, they would
>> only have to be cleaned (but the array would stay as-is). A layer has
>> usually the same type of geometry for all features, so even geometries
>> could be kept and only the size of the coordinate array would be
>> altered between the calls.
>
> This seems *possible* but pretty complicated and if not done very
> carefully could introduce additional problems. ?I can't help but
> wonder if you aren't just using a poor heap implementation which
> is making allocations and deallocations unnecessarily expensive.
> Reworking huge amounts of code around the assumption that
> new/delete are terribly expensive does not seem entirely prudent.

I use stock heap allocator from libc (on ubuntu), nothing fancy.

Anyway, reusing of the objects is not very high on my list, it's just
something worth considering. If I will have some spare time, I will
look into the complexity and the possible gains, but now I'll rather
focus on getting the shapefile driver faster using stuff I have ready.

Regards
Martin
From lkeene at caltech.edu  Mon Jul 19 14:53:25 2010
From: lkeene at caltech.edu (LKeene)
Date: Mon Jul 19 14:53:27 2010
Subject: [gdal-dev] Accessing header info from ENVI files
Message-ID: <1279565605704-5313493.post@n2.nabble.com>


Hi folks, I'm trying to use GDAL in a dll we're writing so that we can forgo
using ENVI to open our data files. I'm able to determine the image data
dimensions and acquire access to the data by doing something like the
following:

	// Read file:
	GDALDataset *fileData = (GDALDataset*)GDALOpen(filePath, GA_ReadOnly);

	int RasterX       = fileData->GetRasterXSize();
	int RasterY       = fileData->GetRasterYSize();
	int NumberOfBands = fileData->GetRasterCount();

	// Acquire pointer to the band:
	GDALRasterBand* bandData = fileData->GetRasterBand(1);

        etc...


However, I'm unsure of how to gain access to the various header file
information that's associated with the data file. The header file is
contained in the same folder as the data file and is stored as a simple text
file. Here's an example of one of our header files:


ENVI
description = {
  Distance dx=4.4352 _dx=4.4352 dy=1.1644 _dy=1.1644 Beginning: Mon Jun 21
  16:56:27 2010 End: Mon Jun 21 20:48:16 2010
Time elapsed: 0 day, 3 hours,
  51 minutes, 49 seconds. [Mon Jun 21 20:48:16 2010]}
samples = 8565
lines   = 6973
bands   = 1
header offset = 0
file type = ENVI Standard
data type = 4
interleave = bsq
sensor type = Unknown
byte order = 0
map info = {UTM, 1.000, 1.000, 425030.000, 4059250.000, 1.0000000000e+001,
1.0000000000e+001, 43, North, WGS-84, units=Meters}
wavelength units = Unknown


GDAL must be reading and parsing this header in order to correctly open the
data file, so the various pieces of information should be encapsulated and
available somewhere in the GDAL class library, no? Anyone know how to get at
it? Thanks in advance
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Accessing-header-info-from-ENVI-files-tp5313493p5313493.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From wonder.sk at gmail.com  Mon Jul 19 15:05:35 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Mon Jul 19 15:05:39 2010
Subject: [gdal-dev] Optimizing access to shapefiles
In-Reply-To: <4C44571B.5000300@pobox.com>
References: <AANLkTinbIpThouL0pFJkc77_opJ6uxwe4PwoGB017xNL@mail.gmail.com>
	<4C44571B.5000300@pobox.com>
Message-ID: <AANLkTimR36X18rpwuOrh1mYKH1x_4ZG7U6Sc8TjTIJV9@mail.gmail.com>

On Mon, Jul 19, 2010 at 3:46 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Would GetFeature() still return a feature with a full vector of
> fields, but those not desired just being left in the null state?
> If so, I think such an approach would be reasonable. ?However, it will
> require an RFC process to update the core OGR API. ?Are you willing
> to prepare such an RFC?

I have created the RFC:

http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields

Let me know if anything important is missing there.

Regards
Martin
From pierre.roudier at gmail.com  Mon Jul 19 19:13:37 2010
From: pierre.roudier at gmail.com (Pierre Roudier)
Date: Mon Jul 19 19:13:39 2010
Subject: [gdal-dev] GDAL bindings with R install fails (following GDAL
 building from source)
Message-ID: <1279581217442-5314489.post@n2.nabble.com>


Dear GDAL gurus,

I'm using GDAL bindings with R through the rgdal package
[http://cran.r-project.org/web/packages/rgdal/index.html]. After I built the
last stable GDAL from source, I'm unfortunately unable to reinstall this
package in R. The rgdal compilation stops and says:

During compilation:
...
checking for pj_init_plus in -lproj... yes
./proj_conf_test: error while loading shared libraries: libgdal.so.1: cannot
open shared object file: No such file or directory
./proj_conf_test: error while loading shared libraries: libgdal.so.1: cannot
open shared object file: No such file or directory
Package CPP flags: -I/usr/local/include
...

At the end of the installation attempt:
Error in dyn.load(file, DLLpath = DLLpath, ...) :
  unable to load shared library '/usr/lib64/R/library/rgdal/libs/rgdal.so':
  libgdal.so.1: cannot open shared object file: No such file or directory

This problem has been posted to the R-sig-geo mailing list
[http://r-sig-geo.2731867.n2.nabble.com/rgdal-install-fails-following-GDAL-building-from-source-td5310883.html#a5310883],
but as it seems to be more related to GDAL, I am allowing myself to post
here. Sorry for the cross-posting.

The source of the problem seems to be a *failed* compilation attempt of the
GDAL GRASS plugin (following the instructions here:
http://www.surfaces.co.il/?p=523).

Here are my configuration and the output of some of my tests:

Fedora 13, on KDE

$uname -a
Linux 2.6.33.6-147.fc13.x86_64 #1 SMP Tue Jul 6 22:32:17 UTC 2010
x86_64 x86_64 x86_64 GNU/Linux

$gdalinfo --version
GDAL 1.7.2, released 2010/04/23

$sessionInfo()
R version 2.11.1 (2010-05-31)
x86_64-redhat-linux-gnu 

$proj
Rel. 4.7.1, 23 September 2009

$ ldd `which proj`
        linux-vdso.so.1 =>  (0x00007fff0b370000)
        libproj.so.0 => /usr/lib64/libproj.so.0 (0x0000003e29000000)
        libm.so.6 => /lib64/libm.so.6 (0x0000003e26800000)
        libc.so.6 => /lib64/libc.so.6 (0x0000003e26400000)
        /lib64/ld-linux-x86-64.so.2 (0x0000003e26000000)

# locate gdalplugins
(no files found, as I deleted the whole folder)

# locate libgdal
...some files in my home from the src package...
/usr/lib64/ogdi/libgdal.so
/usr/local/lib/libgdal.a
/usr/local/lib/libgdal.la
/usr/local/lib/libgdal.so
/usr/local/lib/libgdal.so.1
/usr/local/lib/libgdal.so.1.14.2

# ls -l /usr/local/lib/libgdal*
-rw-r--r--. 1 root root 65383080 Jul 19 17:42 /usr/local/lib/libgdal.a
-rwxr-xr-x. 1 root root     1038 Jul 19 17:42 /usr/local/lib/libgdal.la
lrwxrwxrwx. 1 root root       17 Jul 19 17:42
/usr/local/lib/libgdal.so -> libgdal.so.1.14.2
lrwxrwxrwx. 1 root root       17 Jul 19 17:42
/usr/local/lib/libgdal.so.1 -> libgdal.so.1.14.2
-rwxr-xr-x. 1 root root 29847891 Jul 19 17:42
/usr/local/lib/libgdal.so.1.14.2

The latter command is probably interesting - actually the libgdal.so.1
on my system is a symlink to /usr/local/lib/libgdal.so.1.14.2.
Unfortunately, I don't really understand the meaning of those
different libgdal* 

Any hint on that one would be much appreciated,

Pierre
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-bindings-with-R-install-fails-following-GDAL-building-from-source-tp5314489p5314489.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From pierre.roudier at gmail.com  Mon Jul 19 23:53:50 2010
From: pierre.roudier at gmail.com (Pierre Roudier)
Date: Mon Jul 19 23:53:52 2010
Subject: [gdal-dev] Re: GDAL bindings with R install fails (following GDAL
 building from source)
In-Reply-To: <1279581217442-5314489.post@n2.nabble.com>
References: <1279581217442-5314489.post@n2.nabble.com>
Message-ID: <1279598030336-5315172.post@n2.nabble.com>


Hi all,

I finally got the problem: there was a mistake within my ld.so.conf.d file
that linked the libgdal into the system.

For the record, my mistake was to put the full path to the file:

$ cat /etc/ld.so.conf.d/gdal.conf 
/usr/local/lib/libgdal.so.1

I resolved the problem by modifying /etc/ld.so.conf.d/gdal.conf to
/usr/local/lib, and ldconfig as su.

Cheers,

Pierre

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-bindings-with-R-install-fails-following-GDAL-building-from-source-tp5314489p5315172.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From yvonne.huebner at ptv.de  Tue Jul 20 06:50:50 2010
From: yvonne.huebner at ptv.de (=?iso-8859-1?Q?Yvonne_H=FCbner?=)
Date: Tue Jul 20 07:04:12 2010
Subject: [gdal-dev] Looking for GDAL windows bindings for python 2.6.5
Message-ID: <8BD008FC9041C04FAD36A0BD46AAA69D01017797CF@SKA-WN-E25CEX.ptvag.ptv.de>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.gif
Type: image/gif
Size: 166 bytes
Desc: image001.gif
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100720/a97f6486/image001-0001.gif
From rudivs at gmail.com  Tue Jul 20 07:39:22 2010
From: rudivs at gmail.com (Rudi von Staden)
Date: Tue Jul 20 07:39:51 2010
Subject: [gdal-dev] Looking for GDAL windows bindings for python 2.6.5
In-Reply-To: <8BD008FC9041C04FAD36A0BD46AAA69D01017797CF@SKA-WN-E25CEX.ptvag.ptv.de>
References: <8BD008FC9041C04FAD36A0BD46AAA69D01017797CF@SKA-WN-E25CEX.ptvag.ptv.de>
Message-ID: <4C458AEA.1080005@gmail.com>

Hi Yvonne,

I've just done exactly what you refer to, and had the same challenges 
with links. I ended up using the following setup:

Python 2.6 install:
http://www.python.org/ftp/python/2.6/python-2.6.msi

GDAL bindings for Python 2.6:
http://pypi.python.org/packages/2.6/G/GDAL/GDAL-1.6.1.win32-py2.6.exe#md5=5e48c85a9ace1baad77dc26bb42ab4e1

GDAL
http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip

I'm afraid I don't know about 64 bit versions since it's not relevant to 
me, but I seem to remember there being some 64 bit options for some of 
the packages.

HTH,
Rudi



On 20/07/2010 12:50, Yvonne H?bner wrote:
>
> Hi,
>
> I'm a pretty new user of the GDAL/Osgeo library under Python and 
> Windows. Actually I'm using Python 2.5 and GDAL and I was looking for 
> a GDAL version which is compatible to Python 2.6. I tried GDAL 1.7.1 
> from 
> http://pypi.python.org/pypi/GDAL/^http://wiki.dev.ptv.de/images/icons/linkext7.gif 
> (at the page bottom) but I got an error that it is only working with 
> Python 2.5. On the same page there is a Windows installing description 
> under the headline "Windows". There seems to be a dead link pointing 
> to the Python Bindings at the Cheeseshop. I cannot find the described 
> installer either. When clicking the link it is always returning to the 
> same page.
>
> Does anybody know where I can find GDAL Python Bindings for Python 
> 2.6? And my second question: are there installers in 32 bit and 64 bit 
> available?
>
> Thanks for your help in advance.
>
> Best regards
>
> Yvonne H?bner
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
Skipped content of type multipart/related
From rudivs at gmail.com  Tue Jul 20 07:54:50 2010
From: rudivs at gmail.com (Rudi von Staden)
Date: Tue Jul 20 07:55:16 2010
Subject: [gdal-dev] Tkl/Tk files after running script through py2exe
In-Reply-To: <8BD008FC9041C04FAD36A0BD46AAA69D01017797CF@SKA-WN-E25CEX.ptvag.ptv.de>
References: <8BD008FC9041C04FAD36A0BD46AAA69D01017797CF@SKA-WN-E25CEX.ptvag.ptv.de>
Message-ID: <4C458E8A.2090606@gmail.com>

Hi all,

I've created a small Python script that reads a set of points from a CSV 
file, calculates the area of the outer hull of the points, and writes 
the result to a text file. I would like to call the script from an 
Access database. Since I can't guarantee that the users will have 
Python, I ran the script through py2exe.

1) The resulting distribution folder includes Tcl/Tk files and folders. 
I can only guess that these are used by GDAL in some way - are they 
required?
2) The package is also surprisingly large for such a simple function - 
nearly 30MB. I suppose that's to be expected, but is there a way to 
bring down the footprint, short of translating to C++?

Thanks,
Rudi
From rudivs at gmail.com  Tue Jul 20 08:01:19 2010
From: rudivs at gmail.com (Rudi von Staden)
Date: Tue Jul 20 08:01:47 2010
Subject: [gdal-dev] Looking for GDAL windows bindings for python 2.6.5
In-Reply-To: <4C458AEA.1080005@gmail.com>
References: <8BD008FC9041C04FAD36A0BD46AAA69D01017797CF@SKA-WN-E25CEX.ptvag.ptv.de>
	<4C458AEA.1080005@gmail.com>
Message-ID: <4C45900F.3040509@gmail.com>

I forgot to mention, I found this document very useful in getting my 
setup right:
http://www.gis.usu.edu/~chrisg/python/2009/docs/gdal_win.pdf

Rudi


On 20/07/2010 13:39, Rudi von Staden wrote:
> Hi Yvonne,
>
> I've just done exactly what you refer to, and had the same challenges 
> with links. I ended up using the following setup:
>
> Python 2.6 install:
> http://www.python.org/ftp/python/2.6/python-2.6.msi
>
> GDAL bindings for Python 2.6:
> http://pypi.python.org/packages/2.6/G/GDAL/GDAL-1.6.1.win32-py2.6.exe#md5=5e48c85a9ace1baad77dc26bb42ab4e1
>
> GDAL
> http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip
>
> I'm afraid I don't know about 64 bit versions since it's not relevant 
> to me, but I seem to remember there being some 64 bit options for some 
> of the packages.
>
> HTH,
> Rudi
>
>
>
> On 20/07/2010 12:50, Yvonne H?bner wrote:
>>
>> Hi,
>>
>> I'm a pretty new user of the GDAL/Osgeo library under Python and 
>> Windows. Actually I'm using Python 2.5 and GDAL and I was looking for 
>> a GDAL version which is compatible to Python 2.6. I tried GDAL 1.7.1 
>> from 
>> http://pypi.python.org/pypi/GDAL/^http://wiki.dev.ptv.de/images/icons/linkext7.gif 
>> (at the page bottom) but I got an error that it is only working with 
>> Python 2.5. On the same page there is a Windows installing 
>> description under the headline "Windows". There seems to be a dead 
>> link pointing to the Python Bindings at the Cheeseshop. I cannot find 
>> the described installer either. When clicking the link it is always 
>> returning to the same page.
>>
>> Does anybody know where I can find GDAL Python Bindings for Python 
>> 2.6? And my second question: are there installers in 32 bit and 64 
>> bit available?
>>
>> Thanks for your help in advance.
>>
>> Best regards
>>
>> Yvonne H?bner
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
Skipped content of type multipart/related
From stefano.iacovella at gmail.com  Tue Jul 20 11:22:12 2010
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Tue Jul 20 11:22:35 2010
Subject: [gdal-dev] merging rasters setting opacity
Message-ID: <AANLkTimHjLnqDLz82vJm40qQn6JXlfq8KtWpXSZvRE0l@mail.gmail.com>

Dear all

sorry for the newbie question. I did some experiments with gdal but I was
unable gettint to the target.

I have a DTM in ASCII GRID, I produced an hillshade relief with gdaldem
program and saved the ouput in a tiff file.
What I would like to do now is to merge this tiff with an other tiff
containing the DTM with a color ramp rendering. The merge should be done
setting the opacity of one of the two tiff file to avoid complete
overriding. I wonder if this could be done creating a vrt dataset of the two
files and editing the vrt file.
Any hints?

thanks for your hints

stefano iacovella
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100720/57785085/attachment-0001.html
From KARNOLD at imamuseum.org  Tue Jul 20 11:23:26 2010
From: KARNOLD at imamuseum.org (Kris Arnold)
Date: Tue Jul 20 11:42:59 2010
Subject: [gdal-dev] ogr2ogr truncating data?
Message-ID: <6CC2A46EF3C0AD4C8231F9F4D66CF7BDCA6D7B@MSMAIL.imart.local>

Hello all,
I'm trying to use ogr2ogr to convert a KML file to a shapefile.  Mostly
it works.  But the description data from the kml file is getting
truncated in the shapefile.  It looks like it is creating the attribute
as a text field with only 80 characters.  Any way around this?

imamuseum.org made the following annotations
---------------------------------------------------------------------
FINAL WEEKS  | Tara Donovan: Untitled  | Through August 1 | Become a member and get in free Exhibition made possible by a grant from Eli Lilly and Company Foundation
 
---------------------------------------------------------------------



NOTICE:

Tue Jul 20 2010 11:26:15



This email message is for the sole use of the intended
recipient(s) and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please contact the sender by reply email and destroy all copies of the original message.
---------------------------------------------------------------------

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100720/8a7c6c80/attachment.html
From szekerest at gmail.com  Tue Jul 20 11:58:56 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Jul 20 11:59:01 2010
Subject: [gdal-dev] ogr2ogr truncating data?
In-Reply-To: <6CC2A46EF3C0AD4C8231F9F4D66CF7BDCA6D7B@MSMAIL.imart.local>
References: <6CC2A46EF3C0AD4C8231F9F4D66CF7BDCA6D7B@MSMAIL.imart.local>
Message-ID: <AANLkTinhHg3-z7Xr0EN6FoiW6dg_z3m7yFHz_Ewr3_Jx@mail.gmail.com>

To increase the field size you may use the sql cast operator as described in
the following documents:
http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast
http://www.gdal.org/ogr/ogr_sql.html

Best regards,

Tamas



2010/7/20 Kris Arnold <KARNOLD@imamuseum.org>

>  Hello all,
> I'm trying to use ogr2ogr to convert a KML file to a shapefile.  Mostly it
> works.  But the description data from the kml file is getting truncated in
> the shapefile.  It looks like it is creating the attribute as a text field
> with only 80 characters.  Any way around this?
>
> imamuseum.org made the following annotations
> ---------------------------------------------------------------------
> FINAL WEEKS | Tara Donovan: Untitled
> <http://www.imamuseum.org/art/exhibitions/tara-donovan?utm_source=smtp.imamuseum.org&utm_medium=email_sig>| Through August 1 | Become
> a member and get in free<http://www.imamuseum.org/support/membership#join-or-renew-today>Exhibition made possible by a grant from Eli Lilly and Company Foundation
>
> ---------------------------------------------------------------------
>
> NOTICE:
>
> Tue Jul 20 2010 11:26:15
>
> This email message is for the sole use of the intended recipient(s) and may
> contain confidential and privileged information. Any unauthorized review,
> use, disclosure or distribution is prohibited. If you are not the intended
> recipient, please contact the sender by reply email and destroy all copies
> of the original message.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100720/98b7a4dc/attachment.html
From szekerest at gmail.com  Tue Jul 20 12:02:16 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Jul 20 12:02:19 2010
Subject: [gdal-dev] Looking for GDAL windows bindings for python 2.6.5
In-Reply-To: <8BD008FC9041C04FAD36A0BD46AAA69D01017797CF@SKA-WN-E25CEX.ptvag.ptv.de>
References: <8BD008FC9041C04FAD36A0BD46AAA69D01017797CF@SKA-WN-E25CEX.ptvag.ptv.de>
Message-ID: <AANLkTil4kIfAgCpq0adIIAF4SNVKE7ujdQFIOpQtrhGJ@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 166 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100720/e4df9389/attachment.gif
From ivan at sanchezortega.es  Tue Jul 20 12:13:20 2010
From: ivan at sanchezortega.es (=?utf-8?q?Iv=C3=A1n_S=C3=A1nchez_Ortega?=)
Date: Tue Jul 20 12:13:36 2010
Subject: [gdal-dev] ogr2ogr truncating data?
In-Reply-To: <6CC2A46EF3C0AD4C8231F9F4D66CF7BDCA6D7B@MSMAIL.imart.local>
References: <6CC2A46EF3C0AD4C8231F9F4D66CF7BDCA6D7B@MSMAIL.imart.local>
Message-ID: <201007201813.20992.ivan@sanchezortega.es>

El d?a Tuesday 20 July 2010 17:23:26, Kris Arnold dijo:
> I'm trying to use ogr2ogr to convert a KML file to a shapefile.  Mostly
> it works.  But the description data from the kml file is getting
> truncated in the shapefile.  It looks like it is creating the attribute
> as a text field with only 80 characters.  Any way around this?

Be advised, shapefiles by design can hold text fields of only up to 254 bytes. 
Even if you create the shapefile with the desired fields and then 
do "ogr2ogr -append -update", you just can't put more than 254 bytes of text 
in a field of a shapefile.

-- 
Iv?n S?nchez Ortega <ivan@sanchezortega.es>

Un ordenador no es una televisi?n ni un microondas: es una herramienta 
compleja.
From pygis2010 at yahoo.com  Tue Jul 20 13:51:32 2010
From: pygis2010 at yahoo.com (Python Gis)
Date: Tue Jul 20 13:58:15 2010
Subject: [gdal-dev] python bindings: strange behavior with layer
Message-ID: <149174.32833.qm@web120308.mail.ne1.yahoo.com>

Hi
this is my code:

from osgeo import ogr

def OpenLayer(shape_path, shape_name):
    drv_shp = ogr.GetDriverByName('ESRI Shapefile')
    shp_ds = drv_shp.Open(shape_path, 1)
    layer = shp_ds.GetLayerByName(shape_name)
    print 'Name from method: %s' % layer.GetName()
    return layer;

layer = OpenLayer('output', 'myshapefile')
print 'Name from main: %s' % layer.GetName()

and this is the output:

$ python testogr.py 
Name from method: firenews
Segmentation fault

what can it be?
thanks a lot


      
From hobu.inc at gmail.com  Tue Jul 20 14:00:37 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Jul 20 14:06:13 2010
Subject: [gdal-dev] python bindings: strange behavior with layer
In-Reply-To: <149174.32833.qm@web120308.mail.ne1.yahoo.com>
References: <149174.32833.qm@web120308.mail.ne1.yahoo.com>
Message-ID: <A700D712-DADE-4A1F-BC29-AED0D4C3665C@gmail.com>


On Jul 20, 2010, at 12:51 PM, Python Gis wrote:

> Hi
> this is my code:
> 
> from osgeo import ogr
> 
> def OpenLayer(shape_path, shape_name):
>    drv_shp = ogr.GetDriverByName('ESRI Shapefile')
>    shp_ds = drv_shp.Open(shape_path, 1)
>    layer = shp_ds.GetLayerByName(shape_name)
>    print 'Name from method: %s' % layer.GetName()
>    return layer;
> 
> layer = OpenLayer('output', 'myshapefile')
> print 'Name from main: %s' % layer.GetName()
> 
> and this is the output:
> 
> $ python testogr.py 
> Name from method: firenews
> Segmentation fault
> 
> what can it be?
> thanks a lot
> 

drv_shp and shp_ds are going out of scope.  Use ogr.Open, which will take care of all of this for you.

Howard
From GWALTER at mdacorporation.com  Tue Jul 20 15:05:02 2010
From: GWALTER at mdacorporation.com (Gillian WALTER)
Date: Tue Jul 20 15:05:07 2010
Subject: [gdal-dev] Overviews broken with PAM disabled
Message-ID: <D4ADCF07769283468C6E62E379B5865710370DF5EA@EVSYVR1.ds.mda.ca>

Hi,

I built gdal 1.7.2 with PAM support disabled by default, and found that I could no longer build overviews for many formats.  When I set the environment variable GDAL_PAM_ENABLED=YES, the overviews would build.  I traced the problem down to the following section of GDALPamDataset::IBuildOverviews in gdalpamdataset.cpp:

PamInitialize();
if( psPam == NULL )
    return CE_None;

When I replaced this with:

PamInitialize();
if( psPam == NULL )
    return GDALDataset::IBuildOverviews( pszResampling, 
                                         nOverviews, panOverviewList, 
                                         nListBands, panBandList, 
                                         pfnProgress, pProgressData );

The overviews built again.  However, I don't know much about PAM and haven't ever worked with it enabled (aside from the current troubleshooting effort), so I don't know if this change would mess things up in some cases when PAM is enabled.

Is the above change OK, or should I also be adding a check that pszPamDefault is set to "NO", or something along those lines?

Thanks,

Gillian Walter
Software Developer
Geospatial Services Inc.
57 Auriga Drive - Suite 201
Ottawa, ON K2E 8B2
Telephone:? (613) 727-1087 #245
Facsimile:? (613) 727-5853
Email:? gwalter@mdacorporation.com

This e-mail and any attachments are intended solely for the use of the intended recipient(s) and may contain legally privileged, proprietary and/or confidential information.  Any use, disclosure, dissemination, distribution or copying of this e-mail and any attachments for any purposes that have not been specifically authorized by the sender is strictly prohibited.  If you are not the intended recipient, please immediately notify the sender by reply e-mail and permanently delete all copies and attachments.  The entire content of this e-mail is for "information purposes" only and should not be relied upon by the recipient in any way unless otherwise confirmed in writing by way of letter or facsimile.  

 

From Chris.Barker at noaa.gov  Tue Jul 20 15:21:45 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Jul 20 15:21:48 2010
Subject: [gdal-dev] Tkl/Tk files after running script through py2exe
In-Reply-To: <4C458E8A.2090606@gmail.com>
References: <8BD008FC9041C04FAD36A0BD46AAA69D01017797CF@SKA-WN-E25CEX.ptvag.ptv.de>
	<4C458E8A.2090606@gmail.com>
Message-ID: <4C45F749.7070604@noaa.gov>

Rudi von Staden wrote:
> Since I can't guarantee that the users will have 
> Python, I ran the script through py2exe.
> 
> 1) The resulting distribution folder includes Tcl/Tk files and folders. 
> I can only guess that these are used by GDAL in some way - are they 
> required?

I'd be surprised that GDAL would use it at all, but in any case, if you 
aren't using TK at all, you can probably strip take them out -- try it 
out and see!

> 2) The package is also surprisingly large for such a simple function - 
> nearly 30MB. I suppose that's to be expected, but is there a way to 
> bring down the footprint, short of translating to C++?

You can do what you've done, and look for unnecessary stuff to remove, 
but it'll be pretty big no matter how you slice it.

Fortunately, disk space, memory, and to a lessor extent, bandwidth, are 
pretty cheap these days.

-CHB





-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From massimodisasha at gmail.com  Tue Jul 20 16:10:22 2010
From: massimodisasha at gmail.com (Massimo Di Stefano)
Date: Tue Jul 20 16:09:55 2010
Subject: [gdal-dev] gdal-grass plug-in (grass7 support)
Message-ID: <E2C28ADA-22E0-4CB9-8011-49FF6D861A40@gmail.com>

Hi All,

the gdal-grass plug-in for now don't build with grass7 but only with grass6.x.
I know it is an old issue, we discuss it some month ago,
have you any news about grass7 support inside gdalb (svn) ?

thanks!

Massimo.
From neteler at osgeo.org  Tue Jul 20 16:33:19 2010
From: neteler at osgeo.org (Markus Neteler)
Date: Tue Jul 20 16:33:42 2010
Subject: [gdal-dev] Re: [GRASS-dev] gdal-grass plug-in (grass7 support)
In-Reply-To: <E2C28ADA-22E0-4CB9-8011-49FF6D861A40@gmail.com>
References: <E2C28ADA-22E0-4CB9-8011-49FF6D861A40@gmail.com>
Message-ID: <AANLkTinuA8RRtNvhjcxma3xMysiQ9_AGvPHK2xIlsDkf@mail.gmail.com>

On Tue, Jul 20, 2010 at 10:10 PM, Massimo Di Stefano
<massimodisasha@gmail.com> wrote:
> Hi All,
>
> the gdal-grass plug-in for now don't build with grass7 but only with grass6.x.
> I know it is an old issue, we discuss it some month ago,
> have you any news about grass7 support inside gdalb (svn) ?

For the record:
http://trac.osgeo.org/gdal/ticket/2953

Personally, I have no news but currently I am also not up to date on
this problem.

Markus
From fmarkham at gmail.com  Tue Jul 20 19:30:29 2010
From: fmarkham at gmail.com (Francis Markham)
Date: Tue Jul 20 19:30:52 2010
Subject: [gdal-dev] python bindings: strange behavior with layer
In-Reply-To: <A700D712-DADE-4A1F-BC29-AED0D4C3665C@gmail.com>
References: <149174.32833.qm@web120308.mail.ne1.yahoo.com> 
	<A700D712-DADE-4A1F-BC29-AED0D4C3665C@gmail.com>
Message-ID: <AANLkTinXPIAiemGs8XqNOuovnWmdmqKbCUbnVoYSyhSu@mail.gmail.com>

Is there an FAQ somewhere we can put this?  It bit me when I was
starting with GDAL and Python too.

Cheers,

Francis

On 21 July 2010 04:00, Howard Butler <hobu.inc@gmail.com> wrote:
>
> On Jul 20, 2010, at 12:51 PM, Python Gis wrote:
>
>> Hi
>> this is my code:
>>
>> from osgeo import ogr
>>
>> def OpenLayer(shape_path, shape_name):
>> ? ?drv_shp = ogr.GetDriverByName('ESRI Shapefile')
>> ? ?shp_ds = drv_shp.Open(shape_path, 1)
>> ? ?layer = shp_ds.GetLayerByName(shape_name)
>> ? ?print 'Name from method: %s' % layer.GetName()
>> ? ?return layer;
>>
>> layer = OpenLayer('output', 'myshapefile')
>> print 'Name from main: %s' % layer.GetName()
>>
>> and this is the output:
>>
>> $ python testogr.py
>> Name from method: firenews
>> Segmentation fault
>>
>> what can it be?
>> thanks a lot
>>
>
> drv_shp and shp_ds are going out of scope. ?Use ogr.Open, which will take care of all of this for you.
>
> Howard_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From silyko at gmail.com  Wed Jul 21 01:28:33 2010
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Wed Jul 21 01:28:35 2010
Subject: [gdal-dev] Tkl/Tk files after running script through py2exe
In-Reply-To: <4C458E8A.2090606@gmail.com>
References: <8BD008FC9041C04FAD36A0BD46AAA69D01017797CF@SKA-WN-E25CEX.ptvag.ptv.de>
	<4C458E8A.2090606@gmail.com>
Message-ID: <AANLkTimL38CKW6rj0fsEc9O2Rckw-byYYpgdWsN-j-6E@mail.gmail.com>

Hi Rudi,

  py2exe includes a lot of things into the distribution by default, so
you'll need to extend the "excludes" in your options in the setup script to
get a smaller distribution, see
http://www.py2exe.org/index.cgi/GeneralTipsAndTricks. I've been using gdal
with py2exe, and I guess that if you don't need large libraries like e.g.
matplotlib or wx in your distribution, you should be able to get the size
down to a few (less than 10) MB.

  Cheers,
  Simon

On Tue, Jul 20, 2010 at 1:54 PM, Rudi von Staden <rudivs@gmail.com> wrote:

> Hi all,
>
> I've created a small Python script that reads a set of points from a CSV
> file, calculates the area of the outer hull of the points, and writes the
> result to a text file. I would like to call the script from an Access
> database. Since I can't guarantee that the users will have Python, I ran the
> script through py2exe.
>
> 1) The resulting distribution folder includes Tcl/Tk files and folders. I
> can only guess that these are used by GDAL in some way - are they required?
> 2) The package is also surprisingly large for such a simple function -
> nearly 30MB. I suppose that's to be expected, but is there a way to bring
> down the footprint, short of translating to C++?
>
> Thanks,
> Rudi
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100721/2a9986dd/attachment.html
From pygis2010 at yahoo.com  Wed Jul 21 03:18:36 2010
From: pygis2010 at yahoo.com (Python Gis)
Date: Wed Jul 21 03:18:39 2010
Subject: [gdal-dev] python bindings: strange behavior with layer
In-Reply-To: <A700D712-DADE-4A1F-BC29-AED0D4C3665C@gmail.com>
Message-ID: <649931.55098.qm@web120315.mail.ne1.yahoo.com>

 > drv_shp and shp_ds are going out of scope.? Use
> ogr.Open, which will take care of all of this for you.
> 

Thanks Howard
I am using now ogr.Open but there is still the same problem. Looks like I need to reopen the layer in each method, as far as it seems it cannot exist the layer without its datasource in the same context.
Or am I wrong?

this is my new code:

def getLayer2(shape_fullname):
    ds = ogr.Open(shape_fullname, 0)
    layer = ds.GetLayer(0)
    print 'Name from method: %s' % layer.GetName()
    return layer;

layer = getLayer2('output/myshape.shp')
print 'Name from main: %s' % layer.GetName()

still a segmentation fault in the second print statment
best regards



      
From monshi at home.se  Wed Jul 21 03:25:16 2010
From: monshi at home.se (Tomas R)
Date: Wed Jul 21 03:25:34 2010
Subject: [gdal-dev] Swig-problem, possibly
Message-ID: <i267ct$kdr$1@dough.gmane.org>

  I have a Gdal-plugin for the eminent program SportTracks. This plugin 
gives access to the Gdal libraries for other plugins of the program.
Works great, normally.

But on some, or possibly all, WinXP computers it fails. It fails setting 
up the environment for the plugin, the path.

The plugin is written in C#, targeted at .Net2 and also the bindings and 
Gdal is compiled with .Net2.  Below is the code and the exception I get.
Anyone with an idea why this fails on WinXp? I have confirmed the 
problem on an updated WinXp computer with .Net2 and .Net3.5 installed.


The code is, in short, like this:

path = Environment.GetEnvironmentVariable("PATH");
installPath = 
Path.Combine(Path.GetDirectoryName(this.GetType().Assembly.Location),"Gdalbin") 
;
path = installPath + ";" + path;
Environment.SetEnvironmentVariable("PATH", path);
OSGeo.GDAL.Gdal.SetConfigOption("GDAL_DATA", Path.Combine(installPath, 
"data"));

and it fails on the last line above, it fails to locate/link to the 
correct DLL even though the path is correct and the DLLs exist at the 
end of the path. I have tested with a shorter path and checked the 
framework version of the DLLs at runtime, the managed DLLs that is.

It throws the following exception:

System.TypeInitializationException: The type initializer for 
'OSGeo.GDAL.GdalPINVOKE' threw an exception. ---> 
System.TypeInitializationException: The type initializer for 
'SWIGExceptionHelper' threw an exception. ---> 
System.DllNotFoundException: Unable to load DLL 'gdal_wrap': The 
specified module could not be found. (Exception from HRESULT: 0x8007007E)
at 
OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Gdal(ExceptionDelegate 
applicationDelegate, ExceptionDelegate arithmeticDelegate, 
ExceptionDelegate divideByZeroDelegate, ExceptionDelegate 
indexOutOfRangeDelegate, ExceptionDelegate invalidCastDelegate, 
ExceptionDelegate invalidOperationDelegate, ExceptionDelegate 
ioDelegate, ExceptionDelegate nullReferenceDelegate, ExceptionDelegate 
outOfMemoryDelegate, ExceptionDelegate overflowDelegate, 
ExceptionDelegate systemExceptionDelegate)
at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..cctor()
--- End of inner exception stack trace ---
at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..ctor()
at OSGeo.GDAL.GdalPINVOKE..cctor()
--- End of inner exception stack trace ---
at OSGeo.GDAL.GdalPINVOKE.SetConfigOption(String jarg1, String jarg2)
at OSGeo.GDAL.Gdal.SetConfigOption(String pszKey, String pszValue)
at GDALPlugin.Gdal_Interface..ctor()

please, I am at a loss here.
The path is correct. Is it a framework problem?


From wonder.sk at gmail.com  Wed Jul 21 04:11:14 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Jul 21 04:11:18 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
Message-ID: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>

Hi,

based on the discussion about optimizing the performance of reading
features in OGR few days ago, I've prepared an RFC that proposes API
for limiting which fields will be fetched when reading features:

http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields

Any comments or suggestions are highly welcome.

Regards
Martin
From Alexander.Plum at cae.de  Wed Jul 21 04:39:07 2010
From: Alexander.Plum at cae.de (Alexander Plum)
Date: Wed Jul 21 04:39:04 2010
Subject: [gdal-dev] Changing GDALDataset Pixel Line Resolution
Message-ID: <74C7EC991D7DFB41A525D22BFD4E090805B09C7AB8@sdestex2>

Hello there,

I want to increase the size of a GDALDatasetH which has 1177 lines und 1177 pixels.
It should have 7061 lines and also 7061 pixels but I do not know how to extrapolate the size of the GDALDataset.
The cells of the GDALDatasetH contain elevation values.
The cublicspline algorithm shall furthermore be employed for the extrapolation of the cells.

I would be grateful for any help,
Alex
-- 
This email was Anti Virus checked by CAE
From Jez.Walters at ipl.com  Wed Jul 21 04:43:16 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Wed Jul 21 04:46:21 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A02980EFEC8D@GOOFY.iplbath.com>

Martin,


When I convert Ordnance Survey MasterMap GML to ESRI Shapefiles using ogr2ogr, I'm getting different field numbers for the same field name in different GML chunk files.  Apologies if I have the wrong end of the stick, but wouldn't your proposed interface therefore require me to invoke ogr2ogr differently for each different GML chunk file, in order to accommodate the different field ordering?

Assuming I'm right, wouldn't it be more useable for the interface to use field names rather than numbers?


Regards,


Jez


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Martin Dobias
Sent: Wednesday 21 July 2010 09:11
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields

Hi,

based on the discussion about optimizing the performance of reading features in OGR few days ago, I've prepared an RFC that proposes API
for limiting which fields will be fetched when reading features:

http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields

Any comments or suggestions are highly welcome.

Regards
Martin
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

From chaitanya.ch at gmail.com  Wed Jul 21 05:10:59 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jul 21 05:11:01 2010
Subject: [gdal-dev] Changing GDALDataset Pixel Line Resolution
In-Reply-To: <74C7EC991D7DFB41A525D22BFD4E090805B09C7AB8@sdestex2>
References: <74C7EC991D7DFB41A525D22BFD4E090805B09C7AB8@sdestex2>
Message-ID: <AANLkTimosvinJD_q2XMVLyI1XP66vohlYJHJerWsd8qr@mail.gmail.com>

Alex,

The GDALWarpOperation class gives you extrapolation options. Make sure to
set the variable GDALWarpOptions::eResampleAlg  to GRA_CubicSpline.

On Wed, Jul 21, 2010 at 2:09 PM, Alexander Plum <Alexander.Plum@cae.de>wrote:

> Hello there,
>
> I want to increase the size of a GDALDatasetH which has 1177 lines und 1177
> pixels.
> It should have 7061 lines and also 7061 pixels but I do not know how to
> extrapolate the size of the GDALDataset.
> The cells of the GDALDatasetH contain elevation values.
> The cublicspline algorithm shall furthermore be employed for the
> extrapolation of the cells.
>
> I would be grateful for any help,
> Alex
> --
> This email was Anti Virus checked by CAE
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100721/2146a632/attachment-0001.html
From wonder.sk at gmail.com  Wed Jul 21 05:44:22 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Jul 21 05:44:24 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <2F7776B4033D3B45BC0301B783F3A8A02980EFEC8D@GOOFY.iplbath.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFEC8D@GOOFY.iplbath.com>
Message-ID: <AANLkTimKro-q94-0vOXCcfYiE07PrQ55H-sQ2P1EQPFe@mail.gmail.com>

Hi Jaz

On Wed, Jul 21, 2010 at 10:43 AM, Jez Walters <Jez.Walters@ipl.com> wrote:
> Martin,
>
>
> When I convert Ordnance Survey MasterMap GML to ESRI Shapefiles using ogr2ogr, I'm getting different field numbers for the same field name in different GML chunk files. ?Apologies if I have the wrong end of the stick, but wouldn't your proposed interface therefore require me to invoke ogr2ogr differently for each different GML chunk file, in order to accommodate the different field ordering?

The proposed API addition doesn't affect the behavior of existing
applications such as ogr2ogr.

> Assuming I'm right, wouldn't it be more useable for the interface to use field names rather than numbers?

IMHO for developers it's easier to work with indexes of fields rather
than with their names.

Regards
Martin
From monshi at home.se  Wed Jul 21 06:50:31 2010
From: monshi at home.se (Tomas R)
Date: Wed Jul 21 06:50:52 2010
Subject: [gdal-dev] Re: Swig-problem, possibly
In-Reply-To: <i267ct$kdr$1@dough.gmane.org>
References: <i267ct$kdr$1@dough.gmane.org>
Message-ID: <i26jdo$u1s$1@dough.gmane.org>

  It seem like, after a friend checked the wrap-files with Dependency 
Walker, that there are references to msvcr100.dll and msvp100.dll which, 
as far as I know, are runtime files from Visual Studio 2010.
is that really as it should be? Should really the result depend on files 
from the environment it was compiled in? Must I go back to VSE2008 and 
recompile Gdal to make it work on all machines or is there a setting 
somewhere...


Yours
Tomas

Tomas R skrev 2010-07-21 09:25:
>  I have a Gdal-plugin for the eminent program SportTracks. This plugin 
> gives access to the Gdal libraries for other plugins of the program.
> Works great, normally.
>
> But on some, or possibly all, WinXP computers it fails. It fails 
> setting up the environment for the plugin, the path.
>
> The plugin is written in C#, targeted at .Net2 and also the bindings 
> and Gdal is compiled with .Net2.  Below is the code and the exception 
> I get.
> Anyone with an idea why this fails on WinXp? I have confirmed the 
> problem on an updated WinXp computer with .Net2 and .Net3.5 installed.
>
>
> The code is, in short, like this:
>
> path = Environment.GetEnvironmentVariable("PATH");
> installPath = 
> Path.Combine(Path.GetDirectoryName(this.GetType().Assembly.Location),"Gdalbin") 
> ;
> path = installPath + ";" + path;
> Environment.SetEnvironmentVariable("PATH", path);
> OSGeo.GDAL.Gdal.SetConfigOption("GDAL_DATA", Path.Combine(installPath, 
> "data"));
>
> and it fails on the last line above, it fails to locate/link to the 
> correct DLL even though the path is correct and the DLLs exist at the 
> end of the path. I have tested with a shorter path and checked the 
> framework version of the DLLs at runtime, the managed DLLs that is.
>
> It throws the following exception:
>
> System.TypeInitializationException: The type initializer for 
> 'OSGeo.GDAL.GdalPINVOKE' threw an exception. ---> 
> System.TypeInitializationException: The type initializer for 
> 'SWIGExceptionHelper' threw an exception. ---> 
> System.DllNotFoundException: Unable to load DLL 'gdal_wrap': The 
> specified module could not be found. (Exception from HRESULT: 0x8007007E)
> at 
> OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Gdal(ExceptionDelegate 
> applicationDelegate, ExceptionDelegate arithmeticDelegate, 
> ExceptionDelegate divideByZeroDelegate, ExceptionDelegate 
> indexOutOfRangeDelegate, ExceptionDelegate invalidCastDelegate, 
> ExceptionDelegate invalidOperationDelegate, ExceptionDelegate 
> ioDelegate, ExceptionDelegate nullReferenceDelegate, ExceptionDelegate 
> outOfMemoryDelegate, ExceptionDelegate overflowDelegate, 
> ExceptionDelegate systemExceptionDelegate)
> at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..cctor()
> --- End of inner exception stack trace ---
> at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..ctor()
> at OSGeo.GDAL.GdalPINVOKE..cctor()
> --- End of inner exception stack trace ---
> at OSGeo.GDAL.GdalPINVOKE.SetConfigOption(String jarg1, String jarg2)
> at OSGeo.GDAL.Gdal.SetConfigOption(String pszKey, String pszValue)
> at GDALPlugin.Gdal_Interface..ctor()
>
> please, I am at a loss here.
> The path is correct. Is it a framework problem?

From jef at norbit.de  Wed Jul 21 07:05:07 2010
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Wed Jul 21 07:05:32 2010
Subject: [gdal-dev] Re: Swig-problem, possibly
In-Reply-To: <i26jdo$u1s$1@dough.gmane.org>
References: <i267ct$kdr$1@dough.gmane.org> <i26jdo$u1s$1@dough.gmane.org>
Message-ID: <20100721110507.GA22372@norbit.de>

Hi Tomas,

On Wed, 21. Jul 2010 at 12:50:31 +0200, Tomas R wrote:
> is that really as it should be? Should really the result depend on files  
> from the environment it was compiled in? Must I go back to VSE2008 and  
> recompile Gdal to make it work on all machines or is there a setting  
> somewhere...

I think so.  At least it has been that way since VS2005.

So VSE2008 should have the same problem, although it's more likely to find the
necessary dependencies - ie. a preinstalled redist package - on the target
machine already.   You just need [1], I suppose.


J?rgen 

[1] http://www.microsoft.com/downloads/details.aspx?FamilyID=a7b7a05e-6de6-4d3a-a423-37bf0912db84&displaylang=en

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-20
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502

From Jez.Walters at ipl.com  Wed Jul 21 07:36:32 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Wed Jul 21 07:36:42 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <AANLkTimKro-q94-0vOXCcfYiE07PrQ55H-sQ2P1EQPFe@mail.gmail.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFEC8D@GOOFY.iplbath.com>
	<AANLkTimKro-q94-0vOXCcfYiE07PrQ55H-sQ2P1EQPFe@mail.gmail.com>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A02980EFED18@GOOFY.iplbath.com>

Martin,


Although I take your point about the interface not affecting ogr2ogr, surely the potential speed boost is worth extending to this utility too - or would that be a separate ticket?  I for one would welcome improving the performance of ogr2ogr using the approach you have suggested - when I launch the current trunk development version of ogr2ogr from VBScript it gets stuck in an infinite loop trying to process a 5x5km vector data chunk.

This issue aside, won't the fact that field names are constant but field numbers are not in the OS MasterMap vector data present problems for those that wish to programmatically parse the OS GML using your interface?


Regards,


Jez


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Martin Dobias
Sent: Wednesday 21 July 2010 10:44
To: Jez Walters
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] RFC 29: OGR Set Desired Fields

Hi Jez

On Wed, Jul 21, 2010 at 10:43 AM, Jez Walters <Jez.Walters@ipl.com> wrote:
> Martin,
>
>
> When I convert Ordnance Survey MasterMap GML to ESRI Shapefiles using ogr2ogr, I'm getting different field numbers for the same field name in different GML chunk files. ?Apologies if I have the wrong end of the stick, but wouldn't your proposed interface therefore require me to invoke ogr2ogr differently for each different GML chunk file, in order to accommodate the different field ordering?

The proposed API addition doesn't affect the behaviour of existing applications such as ogr2ogr.

> Assuming I'm right, wouldn't it be more useable for the interface to use field names rather than numbers?

IMHO for developers it's easier to work with indexes of fields rather than with their names.

Regards
Martin
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

From monshi at home.se  Wed Jul 21 07:36:34 2010
From: monshi at home.se (Tomas R)
Date: Wed Jul 21 07:36:50 2010
Subject: [gdal-dev] Re: Swig-problem, possibly
In-Reply-To: <20100721110507.GA22372@norbit.de>
References: <i267ct$kdr$1@dough.gmane.org> <i26jdo$u1s$1@dough.gmane.org>
	<20100721110507.GA22372@norbit.de>
Message-ID: <i26m43$7o7$1@dough.gmane.org>

  Yes, you are correct...

An investigation led me to the same conclusion. I guess most of the 
users of previous version of my plugin, which was compiled with VSE2008, 
had the correct libraries installed.
Same problem was seen even with that version but not so often as now.


Thanks, always nice to learn something new.
Yours
Tomas
J?rgen E. Fischer skrev 2010-07-21 13:05:
> Hi Tomas,
>
> On Wed, 21. Jul 2010 at 12:50:31 +0200, Tomas R wrote:
>> is that really as it should be? Should really the result depend on files
>> from the environment it was compiled in? Must I go back to VSE2008 and
>> recompile Gdal to make it work on all machines or is there a setting
>> somewhere...
> I think so.  At least it has been that way since VS2005.
>
> So VSE2008 should have the same problem, although it's more likely to find the
> necessary dependencies - ie. a preinstalled redist package - on the target
> machine already.   You just need [1], I suppose.
>
>
> J?rgen
>
> [1] http://www.microsoft.com/downloads/details.aspx?FamilyID=a7b7a05e-6de6-4d3a-a423-37bf0912db84&displaylang=en
>

From wonder.sk at gmail.com  Wed Jul 21 08:23:57 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Jul 21 08:23:59 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <2F7776B4033D3B45BC0301B783F3A8A02980EFED18@GOOFY.iplbath.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFEC8D@GOOFY.iplbath.com>
	<AANLkTimKro-q94-0vOXCcfYiE07PrQ55H-sQ2P1EQPFe@mail.gmail.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFED18@GOOFY.iplbath.com>
Message-ID: <AANLkTimXCdXZbGdQ3Wj-1-m1OxToL99KOTFavwDssP5Y@mail.gmail.com>

On Wed, Jul 21, 2010 at 1:36 PM, Jez Walters <Jez.Walters@ipl.com> wrote:
> Although I take your point about the interface not affecting ogr2ogr, surely the potential speed boost is worth extending to this utility too - or would that be a separate ticket? ?I for one would welcome improving the performance of ogr2ogr using the approach you have suggested - when I launch the current trunk development version of ogr2ogr from VBScript it gets stuck in an infinite loop trying to process a 5x5km vector data chunk.

ogr2ogr could probably use the API when "-select" option is used - to
ignore fields which are not being requested. Any other performance
improvements are unrelated to this RFC.


> This issue aside, won't the fact that field names are constant but field numbers are not in the OS MasterMap vector data present problems for those that wish to programmatically parse the OS GML using your interface?

AFAIK once a layer gets open, the indexes of fields for this layer stay fixed.

Regards
Martin
From Jez.Walters at ipl.com  Wed Jul 21 09:31:21 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Wed Jul 21 09:31:27 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <AANLkTimXCdXZbGdQ3Wj-1-m1OxToL99KOTFavwDssP5Y@mail.gmail.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFEC8D@GOOFY.iplbath.com>
	<AANLkTimKro-q94-0vOXCcfYiE07PrQ55H-sQ2P1EQPFe@mail.gmail.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFED18@GOOFY.iplbath.com>
	<AANLkTimXCdXZbGdQ3Wj-1-m1OxToL99KOTFavwDssP5Y@mail.gmail.com>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A02980EFED5A@GOOFY.iplbath.com>

Martin,


I may be misunderstanding how the API works (I'm not actually using it myself), but if someone wants to parse a given layer of the OS MasterMap vector data that is divided into chunks they can't use fixed field numbers, because the field order varies between chunks.

For example, suppose I want to only extract the 'physicalPresence' field from the 'TopographicArea' layer. Using your current proposed API I would have to sometimes specify to extract field 10 and sometimes to extract field 11, depending on which chunk I'm reading.

This CAN be accommodated of course (although it's rather fiddly), but the problem disappears if field names are used, as field names don't change between chunks.


Regards,


Jez


-----Original Message-----
From: Martin Dobias [mailto:wonder.sk@gmail.com]
Sent: Wednesday 21 July 2010 13:24
To: Jez Walters
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] RFC 29: OGR Set Desired Fields

On Wed, Jul 21, 2010 at 1:36 PM, Jez Walters <Jez.Walters@ipl.com> wrote:
> Although I take your point about the interface not affecting ogr2ogr, surely the potential speed boost is worth extending to this utility too - or would that be a separate ticket? ?I for one would welcome improving the performance of ogr2ogr using the approach you have suggested - when I launch the current trunk development version of ogr2ogr from VBScript it gets stuck in an infinite loop trying to process a 5x5km vector data chunk.

ogr2ogr could probably use the API when "-select" option is used - to ignore fields which are not being requested. Any other performance improvements are unrelated to this RFC.


> This issue aside, won't the fact that field names are constant but field numbers are not in the OS MasterMap vector data present problems for those that wish to programmatically parse the OS GML using your interface?

AFAIK once a layer gets open, the indexes of fields for this layer stay fixed.

Regards
Martin


The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

From wonder.sk at gmail.com  Wed Jul 21 09:53:19 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Jul 21 09:53:22 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <2F7776B4033D3B45BC0301B783F3A8A02980EFED5A@GOOFY.iplbath.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFEC8D@GOOFY.iplbath.com>
	<AANLkTimKro-q94-0vOXCcfYiE07PrQ55H-sQ2P1EQPFe@mail.gmail.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFED18@GOOFY.iplbath.com>
	<AANLkTimXCdXZbGdQ3Wj-1-m1OxToL99KOTFavwDssP5Y@mail.gmail.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFED5A@GOOFY.iplbath.com>
Message-ID: <AANLkTikgQVDQD5Y8tm6Lr4qLixhxeEm4-MbFJUtyn9ol@mail.gmail.com>

On Wed, Jul 21, 2010 at 3:31 PM, Jez Walters <Jez.Walters@ipl.com> wrote:
> Martin,
>
>
> I may be misunderstanding how the API works (I'm not actually using it myself), but if someone wants to parse a given layer of the OS MasterMap vector data that is divided into chunks they can't use fixed field numbers, because the field order varies between chunks.
>
> For example, suppose I want to only extract the 'physicalPresence' field from the 'TopographicArea' layer. Using your current proposed API I would have to sometimes specify to extract field 10 and sometimes to extract field 11, depending on which chunk I'm reading.

Well, then this should be probably handled better in the underlying
GML driver...

> This CAN be accommodated of course (although it's rather fiddly), but the problem disappears if field names are used, as field names don't change between chunks.

I think it's rather easy to find out what field index is bound with
each field name. Passing field indexes makes more sense to me as OGR
internally works with field indexes, not field names.

Anyway, if you only use command line tools and do not develop
applications/libraries with OGR API, the proposed RFC doesn't affect
you at all.

Regards
Martin
From thlin.box at gmail.com  Wed Jul 21 09:53:50 2010
From: thlin.box at gmail.com (easyl)
Date: Wed Jul 21 09:53:52 2010
Subject: [gdal-dev] determine real number precision with ogr2ogr
Message-ID: <1279720430540-5321136.post@n2.nabble.com>


How can I let ogr2ogr keep, change or determine real number precision?? when
converting shapefiles.

ogr2ogr changes the representation (or precision) of a numeric attributes.

For example, I use ogr2ogr to convert S-57 files to shapefiles.

The layer "SOUNDG" of S-57 represents the water depth in a nautical map. It
is encoded in a little bit tricky way.
However GDAL can handle "SOUNDG" layer by setting OGR_S57_OPTIONS so that
SOUNDG will be treated as points with generated DEPTH attributes.
    > export OGR_S57_OPTIONS=SPLIT_MULTIPOINT=ON,ADD_SOUNDG_DEPTH=ON

then I use ogrinfo to inspect original data source
    > ogrinfo shape.000 SOUNDG
    ...
    OGRFeature(SOUNDG):7655
      ...
      DEPTH (Real) = 2.1
      POINT (21.8520083 63.593027300000003 2.1)
      ...

DEPTH "2.1" means that the location from (21.8520083 63.593027300000003) has
2.1 meter water depth. 

Now I try to convert it to shapefile (layer: SOUNDG, type: POINT)
    > ogr2ogr -skipfailure -append -f "ESRI Shapefile" out  shape.000 -nlt
POINT SOUNDG

Then I use ogrinfo to inspect converted shapefiles
    > ogrinfo out/SOUNDG.shp SOUNDG 
       ...
    OGRFeature(SOUNDG):0
      ...
      DEPTH (Real) =        2.100000000000000
      POINT (21.8520083 63.593027300000003)
      ...
Here is the problem. The DEPTH attributes has now higher precision. It is
numerically OK.
But when I try to use this attribute in MapServer as LABELITEM, I get a text
"2.100000000000000" instead of "2.1". 

AFAIK, in MapServer the numeric attributes cannot be manipulated for serving
a label text. What I can do is to keep the number representation when
running ogr2ogr.

How can I do that? or any other solution?

Thanks in advance.





-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/determine-real-number-precision-with-ogr2ogr-tp5321136p5321136.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From P.Halls at york.ac.uk  Wed Jul 21 10:31:07 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Wed Jul 21 10:31:13 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <AANLkTikgQVDQD5Y8tm6Lr4qLixhxeEm4-MbFJUtyn9ol@mail.gmail.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>	<2F7776B4033D3B45BC0301B783F3A8A02980EFEC8D@GOOFY.iplbath.com>	<AANLkTimKro-q94-0vOXCcfYiE07PrQ55H-sQ2P1EQPFe@mail.gmail.com>	<2F7776B4033D3B45BC0301B783F3A8A02980EFED18@GOOFY.iplbath.com>	<AANLkTimXCdXZbGdQ3Wj-1-m1OxToL99KOTFavwDssP5Y@mail.gmail.com>	<2F7776B4033D3B45BC0301B783F3A8A02980EFED5A@GOOFY.iplbath.com>
	<AANLkTikgQVDQD5Y8tm6Lr4qLixhxeEm4-MbFJUtyn9ol@mail.gmail.com>
Message-ID: <4C4704AB.3020801@york.ac.uk>

Jez, Martin,

    I am now convinced that the solution is to store these data in separate 
tables, recording the FID of the parent record in each child record for, eg, 
TopographicArea, along with the TopographicArea data.  Ideally, I think the 
parent record could have a TopographicArea_Counnt column, thus recording that 
there are 2 entries in TopograhicArea for record a, 5 for record b, 1 for record 
c, and so on.  To achieve the latter will require changes to the OGR GML driver 
- for the present I am using my own GML parser instead.

Such an approach overcomes the problem of output formats with limits as to row 
width, column counts, etc, and column naming and leaves the user free to 
recombine these data in whatever manner s/he desires.  It also maintains the 
topological neutrality of GDAL/OGR, which has been an issue for some.

This is predicated on being able to create separate, non-spatial tables (driver 
issue).  To this end I submitted an enhancement to the OCI driver to support the 
creation of tables with a feature geometry type of wkbNone, in which no Geometry 
column is inserted.  Some other drivers are already able to do this, explicitly 
with wkbNone or implictly, as with the dbf driver.  I shall shortly be using 
this approach (coding delayed by meetings!) for a project working with large 
amounts of Mastermap ITN data, in which the problem is significant.

Best wishes,

Peter

Martin Dobias wrote:
> On Wed, Jul 21, 2010 at 3:31 PM, Jez Walters <Jez.Walters@ipl.com> wrote:
>> Martin,
>>
>>
>> I may be misunderstanding how the API works (I'm not actually using it myself), but if someone wants to parse a given layer of the OS MasterMap vector data that is divided into chunks they can't use fixed field numbers, because the field order varies between chunks.
>>
>> For example, suppose I want to only extract the 'physicalPresence' field from the 'TopographicArea' layer. Using your current proposed API I would have to sometimes specify to extract field 10 and sometimes to extract field 11, depending on which chunk I'm reading.
> 
> Well, then this should be probably handled better in the underlying
> GML driver...
> 
>> This CAN be accommodated of course (although it's rather fiddly), but the problem disappears if field names are used, as field names don't change between chunks.
> 
> I think it's rather easy to find out what field index is bound with
> each field name. Passing field indexes makes more sense to me as OGR
> internally works with field indexes, not field names.
> 
> Anyway, if you only use command line tools and do not develop
> applications/libraries with OGR API, the proposed RFC doesn't affect
> you at all.
> 
> Regards
> Martin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From ivan at sanchezortega.es  Wed Jul 21 10:36:52 2010
From: ivan at sanchezortega.es (=?iso-8859-1?q?Iv=E1n_S=E1nchez_Ortega?=)
Date: Wed Jul 21 10:37:08 2010
Subject: [gdal-dev] determine real number precision with ogr2ogr
In-Reply-To: <1279720430540-5321136.post@n2.nabble.com>
References: <1279720430540-5321136.post@n2.nabble.com>
Message-ID: <201007211636.53208.ivan@sanchezortega.es>

El d?a Wednesday 21 July 2010 15:53:50, easyl dijo:
> How can I let ogr2ogr keep, change or determine real number precision??
[...]
>     > ogr2ogr -skipfailure -append -f "ESRI Shapefile" out ?shape.000 -nlt

One thing you can do is create an empty shapefile with the desired field types 
and precision, and then do "ogr2ogr -append -update".


> AFAIK, in MapServer the numeric attributes cannot be manipulated for
> serving a label text. What I can do is to keep the number representation
> when running ogr2ogr.

Yeah, known bug. Hopefully it'll be fixed in time for the FOSS4G :-)


Cheers,
-- 
Iv?n S?nchez Ortega <ivan@sanchezortega.es>

Un ordenador no es una televisi?n ni un microondas: es una herramienta 
compleja.
From warmerdam at pobox.com  Wed Jul 21 10:45:46 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jul 21 10:45:51 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
Message-ID: <4C47081A.60205@pobox.com>

Martin Dobias wrote:
> Hi,
> 
> based on the discussion about optimizing the performance of reading
> features in OGR few days ago, I've prepared an RFC that proposes API
> for limiting which fields will be fetched when reading features:
> 
> http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields
> 
> Any comments or suggestions are highly welcome.

Martin,

Some thoughts:

1) Should there be a TestCapability() value indicating whether
the field selection option works for a particular driver?  It
doesn't seem critical to me.

2) Should we try to overload this function to also allow
selection or deselection of the "special" fields geometry
and style?  We try to treat them a bit like fields in
things like http://trac.osgeo.org/gdal/wiki/rfc6_sqlgeom.

3) I dislike the passing of an unnecessary nNumFields
parameter and unintuitive use of it as a special flag.

4) I think you need to make it clear whether where the
method is implemented.  I get the impression the OGRLayer
class will implement the method, and the OGRLayer class
will keep around a desired fields array.  Should driver
specific classes be able to override this method to detect
when the desired list changes?   I think so, even though
most drivers using the desired fields functionality will
not need to do so.

5) I'd like the RFC to be clear that some (many) drivers
may not support this functionality in which case all
fields will be returned instead of some being null.

As an alternative, if we would like to support the "special
fields" for geometry and style perhaps we should offer
a method like:

virtual OGRErr OGRLayer::SetIgnoredFields( const char **papszFields );

The argument is a list of fields to be ignored, by name, and
the special field names "OGR_GEOMETRY" and "OGR_STYLE" will
be interpreted to refer to the geometry and style values of
a feature.

Passing NULL for papszFields will clear the ignored list.

The method will return OGRERR_NONE as long as all the field
names are able to be resolved, even if the method does not
support selection of fields.

I chose passing by field name so that we could handle
OGR_GEOMETRY, OGR_STYLE and possibly some other special
fields in the future.  I changed the sense to "ignored"
so that we wouldn't accidentally drop things like
geometry and style just because they weren't explicitly
listed in a desired list.

Note, I'm willing to implement this functionality for a
bunch of drivers I think might benefit, and I also think
the RFC should indicate we will connect this to the
-select option of ogr2ogr.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Jez.Walters at ipl.com  Wed Jul 21 11:11:14 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Wed Jul 21 11:11:21 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <4C47081A.60205@pobox.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A02980EFED9D@GOOFY.iplbath.com>

Frank,


If we "connect this to the -select option of ogr2ogr" as you suggest, it would probably be helpful to specify fields by name rather than by number in order to accommodate the OS MasterMap data.

At the risk of repeating myself from another thread, the OS MasterMap Topology Layer vector data has identical field names (for any given layer) in all data chunks, but the field numbers are different in different chunks.  Just to complicate matters, some fields are entirely missing in some data chunks too!  :-(


Regards,


Jez


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Wednesday 21 July 2010 15:46
To: Martin Dobias
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] RFC 29: OGR Set Desired Fields

Martin Dobias wrote:
> Hi,
> 
> based on the discussion about optimizing the performance of reading
> features in OGR few days ago, I've prepared an RFC that proposes API
> for limiting which fields will be fetched when reading features:
> 
> http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields
> 
> Any comments or suggestions are highly welcome.

Martin,

Some thoughts:

1) Should there be a TestCapability() value indicating whether the field selection option works for a particular driver?  It doesn't seem critical to me.

2) Should we try to overload this function to also allow selection or deselection of the "special" fields geometry and style?  We try to treat them a bit like fields in things like http://trac.osgeo.org/gdal/wiki/rfc6_sqlgeom.

3) I dislike the passing of an unnecessary nNumFields parameter and unintuitive use of it as a special flag.

4) I think you need to make it clear whether where the method is implemented.  I get the impression the OGRLayer class will implement the method, and the OGRLayer class will keep around a desired fields array.  Should driver specific classes be able to override this method to detect when the desired list changes?   I think so, even though most drivers using the desired fields functionality will not need to do so.

5) I'd like the RFC to be clear that some (many) drivers may not support this functionality in which case all fields will be returned instead of some being null.

As an alternative, if we would like to support the "special fields" for geometry and style perhaps we should offer a method like:

virtual OGRErr OGRLayer::SetIgnoredFields( const char **papszFields );

The argument is a list of fields to be ignored, by name, and the special field names "OGR_GEOMETRY" and "OGR_STYLE" will be interpreted to refer to the geometry and style values of a feature.

Passing NULL for papszFields will clear the ignored list.

The method will return OGRERR_NONE as long as all the field names are able to be resolved, even if the method does not support selection of fields.

I chose passing by field name so that we could handle OGR_GEOMETRY, OGR_STYLE and possibly some other special fields in the future.  I changed the sense to "ignored" so that we wouldn't accidentally drop things like geometry and style just because they weren't explicitly listed in a desired list.

Note, I'm willing to implement this functionality for a bunch of drivers I think might benefit, and I also think the RFC should indicate we will connect this to the -select option of ogr2ogr.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

From warmerdam at pobox.com  Wed Jul 21 11:18:05 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jul 21 11:18:12 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <2F7776B4033D3B45BC0301B783F3A8A02980EFED9D@GOOFY.iplbath.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFED9D@GOOFY.iplbath.com>
Message-ID: <4C470FAD.7040208@pobox.com>

Jez Walters wrote:
> Frank,
> 
> 
> If we "connect this to the -select option of ogr2ogr" as you suggest, it
> would probably be helpful to specify fields by name rather than by number in
> order to accommodate the OS MasterMap data.
 >
> At the risk of repeating myself from another thread, the OS MasterMap
> Topology Layer vector data has identical field names (for any given layer)
> in all data chunks, but the field numbers are different in different chunks.
> Just to complicate matters, some fields are entirely missing in some data
> chunks too!  :-(

Jez,

With all due respect:

  o The -select already uses names, which can be internally converted
    to field indexes within ogr2ogr.  Users don't ever give numbers for
    fields.
  o Within *one* layer the fields are consistent.  I don't think the
    issue with different field lists and ordering between gml files
    has any real bearing on the "set desired fields" RFC.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Jez.Walters at ipl.com  Wed Jul 21 11:24:17 2010
From: Jez.Walters at ipl.com (Jez Walters)
Date: Wed Jul 21 11:24:24 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <4C470FAD.7040208@pobox.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<2F7776B4033D3B45BC0301B783F3A8A02980EFED9D@GOOFY.iplbath.com>
	<4C470FAD.7040208@pobox.com>
Message-ID: <2F7776B4033D3B45BC0301B783F3A8A02980EFEDA3@GOOFY.iplbath.com>

Frank,


I'm only concerned with ogr2ogr and how it works with OS MasterMap chunked data - which I'm currently finding a bit slow.  I'll gladly leave the development of anything else to those who understand much more than me!  :-)


Regards,


Jez


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday 21 July 2010 16:18
To: Jez Walters
Cc: 'gdal-dev@lists.osgeo.org'; 'Martin Dobias'
Subject: Re: [gdal-dev] RFC 29: OGR Set Desired Fields

Jez Walters wrote:
> Frank,
> 
> 
> If we "connect this to the -select option of ogr2ogr" as you suggest, it
> would probably be helpful to specify fields by name rather than by number in
> order to accommodate the OS MasterMap data.
 >
> At the risk of repeating myself from another thread, the OS MasterMap
> Topology Layer vector data has identical field names (for any given layer)
> in all data chunks, but the field numbers are different in different chunks.
> Just to complicate matters, some fields are entirely missing in some data
> chunks too!  :-(

Jez,

With all due respect:

  o The -select already uses names, which can be internally converted
    to field indexes within ogr2ogr.  Users don't ever give numbers for
    fields.
  o Within *one* layer the fields are consistent.  I don't think the
    issue with different field lists and ordering between gml files
    has any real bearing on the "set desired fields" RFC.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



The information transmitted is intended only for the person
or entity to which it is addressed and may contain
confidential and/or privileged material. If you are not the
addressee, any disclosure, reproduction, copying,
distribution, or other dissemination or use of this
communication is strictly prohibited. If you have received
this transmission in error please notify the sender
immediately and then delete this email.

Any representations or commitments expressed in this email
are subject to contract.

This message has been scanned for viruses and dangerous
content. However, it is essential that the recipient also
checks this message using commercially available mail
scanning and anti-virus software. IPL Information Processing
Limited accepts no liability for any loss or damage resulting
from any virus or other dangerous content in this message.

IPL Information Processing Limited is registered in England
and Wales under company registration number 1418818.
Registration took place at Cardiff on 10 May 1979. IPL
Information Processing Limited's registered office and
normal place of business is Eveleigh House, Grove Street,
Bath, BA1 5LR, United Kingdom. IPL is also registered for
Value Added Tax (VAT) under registration number GB 601 2931 83.

From wonder.sk at gmail.com  Wed Jul 21 12:59:48 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Jul 21 12:59:52 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <4C47081A.60205@pobox.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
Message-ID: <AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>

Hi Frank

On Wed, Jul 21, 2010 at 4:45 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Martin Dobias wrote:
>>
>> Hi,
>>
>> based on the discussion about optimizing the performance of reading
>> features in OGR few days ago, I've prepared an RFC that proposes API
>> for limiting which fields will be fetched when reading features:
>>
>> http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields
>>
>> Any comments or suggestions are highly welcome.
>
> Martin,
>
> Some thoughts:
>
> 1) Should there be a TestCapability() value indicating whether
> the field selection option works for a particular driver? ?It
> doesn't seem critical to me.

I don't think it is necessary either.


> 2) Should we try to overload this function to also allow
> selection or deselection of the "special" fields geometry
> and style? ?We try to treat them a bit like fields in
> things like http://trac.osgeo.org/gdal/wiki/rfc6_sqlgeom.

There are use cases where ignoring the geometry would save some time,
so it would be fine if the client could decide whether to fetch it or
not...


> 3) I dislike the passing of an unnecessary nNumFields
> parameter and unintuitive use of it as a special flag.

Agreed, I was in doubt whether to include it or not anyway.

> 4) I think you need to make it clear whether where the
> method is implemented. ?I get the impression the OGRLayer
> class will implement the method, and the OGRLayer class
> will keep around a desired fields array.

Yes, that was my idea.

> Should driver
> specific classes be able to override this method to detect
> when the desired list changes? ? I think so, even though
> most drivers using the desired fields functionality will
> not need to do so.

I thought that overriding of the method will not be necessary. But
there's no particular reason why the method couldn't be virtual...


> 5) I'd like the RFC to be clear that some (many) drivers
> may not support this functionality in which case all
> fields will be returned instead of some being null.

It's vaguely mentioned in the Compatibility section. I'll make it more clear.


> As an alternative, if we would like to support the "special
> fields" for geometry and style perhaps we should offer
> a method like:
>
> virtual OGRErr OGRLayer::SetIgnoredFields( const char **papszFields );
>
> The argument is a list of fields to be ignored, by name, and
> the special field names "OGR_GEOMETRY" and "OGR_STYLE" will
> be interpreted to refer to the geometry and style values of
> a feature.
>
> Passing NULL for papszFields will clear the ignored list.
>
> The method will return OGRERR_NONE as long as all the field
> names are able to be resolved, even if the method does not
> support selection of fields.
>
> I chose passing by field name so that we could handle
> OGR_GEOMETRY, OGR_STYLE and possibly some other special
> fields in the future. ?I changed the sense to "ignored"
> so that we wouldn't accidentally drop things like
> geometry and style just because they weren't explicitly
> listed in a desired list.

This makes sense to me.

How do you see the implementation? Should OGRLayer contain the array
m_pabIgnoredFields of booleans similar to the original proposal,
together with booleans for the special fields, such sa
m_bIgnoreGeometry, m_bIgnoreStyle?


> Note, I'm willing to implement this functionality for a
> bunch of drivers I think might benefit, and I also think
> the RFC should indicate we will connect this to the
> -select option of ogr2ogr.

Ok, I will add that.

So, in case there will be no further comments, I'll update the RFC to
match the API you've proposed.
Thanks a lot for your thoughts.

Regards
Martin
From warmerdam at pobox.com  Wed Jul 21 13:17:06 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jul 21 13:17:10 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
Message-ID: <4C472B92.3020603@pobox.com>

Martin Dobias wrote:
> This makes sense to me.
> 
> How do you see the implementation? Should OGRLayer contain the array
> m_pabIgnoredFields of booleans similar to the original proposal,
> together with booleans for the special fields, such sa
> m_bIgnoreGeometry, m_bIgnoreStyle?

Martin,

Yes, that was my rough thought.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Wed Jul 21 18:15:17 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Jul 21 18:15:23 2010
Subject: [gdal-dev] determine real number precision with ogr2ogr
In-Reply-To: <1279720430540-5321136.post@n2.nabble.com>
References: <1279720430540-5321136.post@n2.nabble.com>
Message-ID: <AANLkTilNjhyYG6NmFTu5GJQZdK_mvunkBvlFDeNVsNpE@mail.gmail.com>

You may change the field type by using the 'cast' sql option during the
ogr2ogr conversion, like 'select cast(DEPTH as numeric(8,2)) from SOUNDG'

for more info see:  http://www.gdal.org/ogr/ogr_sql.html

Best regards,

Tamas



2010/7/21 easyl <thlin.box@gmail.com>

>
> How can I let ogr2ogr keep, change or determine real number precision??
> when
> converting shapefiles.
>
> ogr2ogr changes the representation (or precision) of a numeric attributes.
>
> For example, I use ogr2ogr to convert S-57 files to shapefiles.
>
> The layer "SOUNDG" of S-57 represents the water depth in a nautical map. It
> is encoded in a little bit tricky way.
> However GDAL can handle "SOUNDG" layer by setting OGR_S57_OPTIONS so that
> SOUNDG will be treated as points with generated DEPTH attributes.
>    > export OGR_S57_OPTIONS=SPLIT_MULTIPOINT=ON,ADD_SOUNDG_DEPTH=ON
>
> then I use ogrinfo to inspect original data source
>    > ogrinfo shape.000 SOUNDG
>    ...
>    OGRFeature(SOUNDG):7655
>      ...
>      DEPTH (Real) = 2.1
>      POINT (21.8520083 63.593027300000003 2.1)
>      ...
>
> DEPTH "2.1" means that the location from (21.8520083 63.593027300000003)
> has
> 2.1 meter water depth.
>
> Now I try to convert it to shapefile (layer: SOUNDG, type: POINT)
>    > ogr2ogr -skipfailure -append -f "ESRI Shapefile" out  shape.000 -nlt
> POINT SOUNDG
>
> Then I use ogrinfo to inspect converted shapefiles
>    > ogrinfo out/SOUNDG.shp SOUNDG
>       ...
>    OGRFeature(SOUNDG):0
>      ...
>      DEPTH (Real) =        2.100000000000000
>      POINT (21.8520083 63.593027300000003)
>      ...
> Here is the problem. The DEPTH attributes has now higher precision. It is
> numerically OK.
> But when I try to use this attribute in MapServer as LABELITEM, I get a
> text
> "2.100000000000000" instead of "2.1".
>
> AFAIK, in MapServer the numeric attributes cannot be manipulated for
> serving
> a label text. What I can do is to keep the number representation when
> running ogr2ogr.
>
> How can I do that? or any other solution?
>
> Thanks in advance.
>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/determine-real-number-precision-with-ogr2ogr-tp5321136p5321136.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100722/e8ffa016/attachment.html
From Luke.Pinner at environment.gov.au  Wed Jul 21 19:21:23 2010
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Wed Jul 21 19:21:30 2010
Subject: [gdal-dev] python bindings: strange behavior with layer
In-Reply-To: <649931.55098.qm@web120315.mail.ne1.yahoo.com>
References: <A700D712-DADE-4A1F-BC29-AED0D4C3665C@gmail.com>
	<649931.55098.qm@web120315.mail.ne1.yahoo.com>
Message-ID: <64102B2FB850C345B04D09C82018F45F0273ED5E@ACT01VEXCCL04.internal.govt>

The datasource "ds" is still going out of scope as it is local to your
"getLayer2" function.
Lots of ways to avoid this. Try not wrapping it up in a function, or
return a tuple of datasource and layer e.g.

def getDSandLayer(shape_fullname):
    ds = ogr.Open(shape_fullname, 0)
    layer = ds.GetLayer(0)
    print 'Name from method: %s' % layer.GetName()
    return ds,layer;

ds,layer = getLayer2('output/myshape.shp')
print 'Name from main: %s' % layer.GetName()

Luke


------
If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments. 



Please consider the environment before printing this email.

------

From thlin.box at gmail.com  Thu Jul 22 04:24:41 2010
From: thlin.box at gmail.com (easyl)
Date: Thu Jul 22 04:24:42 2010
Subject: [gdal-dev] Re: determine real number precision with ogr2ogr
In-Reply-To: <AANLkTilNjhyYG6NmFTu5GJQZdK_mvunkBvlFDeNVsNpE@mail.gmail.com>
References: <1279720430540-5321136.post@n2.nabble.com>
	<AANLkTilNjhyYG6NmFTu5GJQZdK_mvunkBvlFDeNVsNpE@mail.gmail.com>
Message-ID: <1279787081507-5324455.post@n2.nabble.com>


thanks for all your suggestions!

Using 'cast' sql option with ogr2ogr is interesting.
i.e. "SELECT CAST(DEPTH AS numeric(8,1)) from SOUNDG"
But I still have two questions.

1. now I have all real number with 1 digit precision. The values look like
1.2, 3.2, 2.0, 1.0.....
    Actually it is already good enough, but having "1.0" instead of just "1"
is still a little bit annoying.
    is that a OGR's issue (for evaluation and interpretation of numbers)? 

2. is there any quick way to select all other attributes (and cast only one
of them)?
    writing "SELECT attrib1, attrib2, attrib3, .... attribN, CAST(DEPTH AS
numeric(8,1)) from SOUNDG" is a little bit tedious.

btw, CAST feature is available from GDAL1.6+. 
GDAL/OGR from FWTools-2.0.6 will not work.


Thanks~

-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/determine-real-number-precision-with-ogr2ogr-tp5321136p5324455.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From pygis2010 at yahoo.com  Thu Jul 22 07:22:43 2010
From: pygis2010 at yahoo.com (Python Gis)
Date: Thu Jul 22 07:22:45 2010
Subject: [gdal-dev] python bindings: strange behavior with layer
In-Reply-To: <64102B2FB850C345B04D09C82018F45F0273ED5E@ACT01VEXCCL04.internal.govt>
References: <A700D712-DADE-4A1F-BC29-AED0D4C3665C@gmail.com>
	<649931.55098.qm@web120315.mail.ne1.yahoo.com>
	<64102B2FB850C345B04D09C82018F45F0273ED5E@ACT01VEXCCL04.internal.govt>
Message-ID: <645851.42083.qm@web120314.mail.ne1.yahoo.com>

Thanks Luke
this is exactly the approach I have used, solving the issue
To me looks strange that a layer can't exist without the datasource in the 
scope, with other GIS API is not so.
But anyway, good to know
best regards



----- Original Message ----
From: "Pinner, Luke" <Luke.Pinner@environment.gov.au>
To: Python Gis <pygis2010@yahoo.com>
Cc: gdal-dev@lists.osgeo.org
Sent: Thu, July 22, 2010 1:21:23 AM
Subject: RE: [gdal-dev] python bindings: strange behavior with layer

The datasource "ds" is still going out of scope as it is local to your
"getLayer2" function.
Lots of ways to avoid this. Try not wrapping it up in a function, or
return a tuple of datasource and layer e.g.

def getDSandLayer(shape_fullname):
    ds = ogr.Open(shape_fullname, 0)
    layer = ds.GetLayer(0)
    print 'Name from method: %s' % layer.GetName()
    return ds,layer;

ds,layer = getLayer2('output/myshape.shp')
print 'Name from main: %s' % layer.GetName()

Luke


------
If you have received this transmission in error please notify us immediately by 
return e-mail and delete all copies. If this e-mail or any attachments have been 
sent to you in error, that error does not constitute waiver of any 
confidentiality, privilege or copyright in respect of information in the e-mail 
or attachments. 




Please consider the environment before printing this email.

------


      
From szekerest at gmail.com  Thu Jul 22 08:10:13 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jul 22 08:10:17 2010
Subject: [gdal-dev] Re: determine real number precision with ogr2ogr
In-Reply-To: <1279787081507-5324455.post@n2.nabble.com>
References: <1279720430540-5321136.post@n2.nabble.com>
	<AANLkTilNjhyYG6NmFTu5GJQZdK_mvunkBvlFDeNVsNpE@mail.gmail.com>
	<1279787081507-5324455.post@n2.nabble.com>
Message-ID: <AANLkTim7vHT49AwtuBMLXadmO4ENx3rzLTGau4BdHR6P@mail.gmail.com>

2010/7/22 easyl <thlin.box@gmail.com>

>
> thanks for all your suggestions!
>
> Using 'cast' sql option with ogr2ogr is interesting.
> i.e. "SELECT CAST(DEPTH AS numeric(8,1)) from SOUNDG"
> But I still have two questions.
>
> 1. now I have all real number with 1 digit precision. The values look like
> 1.2, 3.2, 2.0, 1.0.....
>    Actually it is already good enough, but having "1.0" instead of just "1"
> is still a little bit annoying.
>    is that a OGR's issue (for evaluation and interpretation of numbers)?
>
>
I suspect this is an issue with OGRFeature::GetFieldAsString when formatting
the string representation of a double value.



> 2. is there any quick way to select all other attributes (and cast only one
> of them)?
>    writing "SELECT attrib1, attrib2, attrib3, .... attribN, CAST(DEPTH AS
> numeric(8,1)) from SOUNDG" is a little bit tedious.
>
>
To select all attributes you may use an asterisk '*' however it would
include the 'DEPTH ' field as well.



> btw, CAST feature is available from GDAL1.6+.
> GDAL/OGR from FWTools-2.0.6 will not work.
>
>
I'm not sure about the versions included in FWTools-2.0.6 you may however
use the proper versions of the packages from http://vbkto.dyndns.org/sdk/

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100722/40a0d0de/attachment-0001.html
From sebastian.ovide at gmail.com  Thu Jul 22 09:05:55 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Thu Jul 22 09:06:17 2010
Subject: [gdal-dev] acceding shapes and rasters of a GeoDatabase .gdb
Message-ID: <AANLkTilKGIq4jEoiW0ieG8GUu5Up_rz29tdaNp8j6-o4@mail.gmail.com>

Hi All,

is it possible to access to the shape and rasters inside a .gdb with GDAL ?

thanks

-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100722/9e0571e1/attachment.html
From sebastian.ovide at gmail.com  Thu Jul 22 10:14:35 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Thu Jul 22 10:14:59 2010
Subject: [gdal-dev] ogr2ogr OCI: problem loading shapes
Message-ID: <AANLkTin2z5-qFUGyJT2-h0hM424yKeJnU6_4nl94NnW8@mail.gmail.com>

Hi All

sebas@SeansPC:~/shapes/Fluvial_Extents$ time ogr2ogr -f OCI
OCI:geoserver/geoserver@mfproduk_11g: FluvialUD04Q100Outline.shp -lco
srid=81989 -lco PRECISION=NO -progress
0...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 1: ORA-29855: error occurred in the execution of ODCIINDEXCREATE
routine
ORA-13249: internal error in Spatial index: [mdidxrbd]
ORA-13249: Error in Spatial index: index build failed
ORA-13249: Error in spatial index: [mdrcrtxfergm]
ORA-13249: Error in spatial index: [mdpridxtxfergm]
ORA-13200: internal error [ROWID:AAASLwAAFAAA5AxAAC] in spatial indexing.
ORA-13206: internal error [] while creating the spatial index
ORA-13034: Invalid data in the SDO_ORDINATE_ARRAY in SDO_GEOMETRY object
ORA-06512: at "MDSYS.SDO_INDEX_METHOD_10I", line 10
 in CREATE INDEX "OSI_16180" ON FLUVIALUD04Q100OUTLINE("ORA_GEOMETRY")
INDEXTYPE IS MDSYS.SPATIAL_INDEX

real    1m10.377s
user    0m27.680s
sys     0m0.710s
sebas@SeansPC:~/shapes/Fluvial_Extents$ ogrinfo FluvialUD04Q100Outline.shp
INFO: Open of `FluvialUD04Q100Outline.shp'
      using driver `ESRI Shapefile' successful.
1: FluvialUD04Q100Outline (Polygon)
sebas@SeansPC:~/shapes/Fluvial_Extents$

sebas@SeansPC:~/shapes/Fluvial_Extents$ ogrinfo --version
GDAL 1.7.2, released 2010/04/23


ideas ?

-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100722/cbb581d0/attachment.html
From ivan.lucena at pmldnet.com  Thu Jul 22 10:24:05 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu Jul 22 10:24:07 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gb2dyMm9nciBPQ0k6IHByb2JsZW0gbG9hZGluZyBzaGFwZXM=?=
Message-ID: <20100722142405.20257.qmail@s466.sureserver.com>

Hi Sebastian,

Did you intend to enter table name after "OCI:geoserver/geoserver@mfproduk_11g:"?

I am asking that because there is a ":" at the end but with no information after that. 

I don't know if that would affect the OCI driver.

Regards,

Ivan


>  -------Original Message-------
>  From: Sebastian E. Ovide <sebastian.ovide@gmail.com>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] ogr2ogr OCI: problem loading shapes
>  Sent: Jul 22 '10 09:14
>  
>  Hi All
>  
>  sebas@SeansPC:~/shapes/Fluvial_Extents$ time ogr2ogr -f OCI
>  OCI:geoserver/geoserver@mfproduk_11g: FluvialUD04Q100Outline.shp -lco
>  srid=81989 -lco PRECISION=NO -progress
>  0...10...20...30...40...50...60...70...80...90...100 - done.
>  ERROR 1: ORA-29855: error occurred in the execution of ODCIINDEXCREATE
>  routine
>  ORA-13249: internal error in Spatial index: [mdidxrbd]
>  ORA-13249: Error in Spatial index: index build failed
>  ORA-13249: Error in spatial index: [mdrcrtxfergm]
>  ORA-13249: Error in spatial index: [mdpridxtxfergm]
>  ORA-13200: internal error [ROWID:AAASLwAAFAAA5AxAAC] in spatial indexing.
>  ORA-13206: internal error [] while creating the spatial index
>  ORA-13034: Invalid data in the SDO_ORDINATE_ARRAY in SDO_GEOMETRY object
>  ORA-06512: at "MDSYS.SDO_INDEX_METHOD_10I", line 10
>  ?in CREATE INDEX "OSI_16180" ON FLUVIALUD04Q100OUTLINE("ORA_GEOMETRY")
>  INDEXTYPE IS MDSYS.SPATIAL_INDEX
>  
>  real??? 1m10.377s
>  user??? 0m27.680s
>  sys???? 0m0.710s
>  sebas@SeansPC:~/shapes/Fluvial_Extents$ ogrinfo FluvialUD04Q100Outline.shp
>  INFO: Open of `FluvialUD04Q100Outline.shp'
>  ????? using driver `ESRI Shapefile' successful.
>  1: FluvialUD04Q100Outline (Polygon)
>  sebas@SeansPC:~/shapes/Fluvial_Extents$
>  
>  sebas@SeansPC:~/shapes/Fluvial_Extents$ ogrinfo --version
>  GDAL 1.7.2, released 2010/04/23
>  
>  
>  ideas ?
>  
>  --
>  Sebastian E. Ovide
>  
>  
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
From sebastian.ovide at gmail.com  Thu Jul 22 10:36:33 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Thu Jul 22 10:36:55 2010
Subject: [gdal-dev] ogr2ogr OCI: problem loading shapes
In-Reply-To: <20100722142405.20257.qmail@s466.sureserver.com>
References: <20100722142405.20257.qmail@s466.sureserver.com>
Message-ID: <AANLkTinPGwV9ErSFdd5N6YT-d2F1JWlfha071vF3DY5y@mail.gmail.com>

Hi Ivan,

I've tried again without the ":"... and the problem is still there...

sebas@SeansPC:~/shapes/Fluvial_Extents$ time ogr2ogr -f OCI
OCI:geoserver/geoserver@mfproduk_11g FluvialUD04Q75Outline.shp -lco
srid=81989 -lco PRECISION=NO -progress
0...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 1: ORA-29855: error occurred in the execution of ODCIINDEXCREATE
routine
ORA-13249: internal error in Spatial index: [mdidxrbd]
ORA-13249: Error in Spatial index: index build failed
ORA-13249: Error in spatial index: [mdrcrtxfergm]
ORA-13249: Error in spatial index: [mdpridxtxfergm]
ORA-13200: internal error [ROWID:AAASMIAAFAABEt0AAD] in spatial indexing.
ORA-13206: internal error [] while creating the spatial index
ORA-13034: Invalid data in the SDO_ORDINATE_ARRAY in SDO_GEOMETRY object
ORA-06512: at "MDSYS.SDO_INDEX_METHOD_10I", line 10
 in CREATE INDEX "OSI_15101" ON FLUVIALUD04Q75OUTLINE("ORA_GEOMETRY")
INDEXTYPE IS MDSYS.SPATIAL_INDEX

real    1m25.698s
user    0m26.660s
sys     0m0.580s

regards

On Thu, Jul 22, 2010 at 3:24 PM, Ivan Lucena <ivan.lucena@pmldnet.com>wrote:

> Hi Sebastian,
>
> Did you intend to enter table name after
> "OCI:geoserver/geoserver@mfproduk_11g:"?
>
> I am asking that because there is a ":" at the end but with no information
> after that.
>
> I don't know if that would affect the OCI driver.
>
> Regards,
>
> Ivan
>
>
> >  -------Original Message-------
> >  From: Sebastian E. Ovide <sebastian.ovide@gmail.com>
> >  To: gdal-dev@lists.osgeo.org
> >  Subject: [gdal-dev] ogr2ogr OCI: problem loading shapes
> >  Sent: Jul 22 '10 09:14
> >
> >  Hi All
> >
> >  sebas@SeansPC:~/shapes/Fluvial_Extents$ time ogr2ogr -f OCI
> >  OCI:geoserver/geoserver@mfproduk_11g: FluvialUD04Q100Outline.shp -lco
> >  srid=81989 -lco PRECISION=NO -progress
> >  0...10...20...30...40...50...60...70...80...90...100 - done.
> >  ERROR 1: ORA-29855: error occurred in the execution of ODCIINDEXCREATE
> >  routine
> >  ORA-13249: internal error in Spatial index: [mdidxrbd]
> >  ORA-13249: Error in Spatial index: index build failed
> >  ORA-13249: Error in spatial index: [mdrcrtxfergm]
> >  ORA-13249: Error in spatial index: [mdpridxtxfergm]
> >  ORA-13200: internal error [ROWID:AAASLwAAFAAA5AxAAC] in spatial
> indexing.
> >  ORA-13206: internal error [] while creating the spatial index
> >  ORA-13034: Invalid data in the SDO_ORDINATE_ARRAY in SDO_GEOMETRY object
> >  ORA-06512: at "MDSYS.SDO_INDEX_METHOD_10I", line 10
> >   in CREATE INDEX "OSI_16180" ON FLUVIALUD04Q100OUTLINE("ORA_GEOMETRY")
> >  INDEXTYPE IS MDSYS.SPATIAL_INDEX
> >
> >  real    1m10.377s
> >  user    0m27.680s
> >  sys     0m0.710s
> >  sebas@SeansPC:~/shapes/Fluvial_Extents$ ogrinfo
> FluvialUD04Q100Outline.shp
> >  INFO: Open of `FluvialUD04Q100Outline.shp'
> >        using driver `ESRI Shapefile' successful.
> >  1: FluvialUD04Q100Outline (Polygon)
> >  sebas@SeansPC:~/shapes/Fluvial_Extents$
> >
> >  sebas@SeansPC:~/shapes/Fluvial_Extents$ ogrinfo --version
> >  GDAL 1.7.2, released 2010/04/23
> >
> >
> >  ideas ?
> >
> >  --
> >  Sebastian E. Ovide
> >
> >
> >  --------------------
> >  _______________________________________________
> >  gdal-dev mailing list
> >  [LINK: compose.php?to=gdal-dev@lists.osgeo.org]
> gdal-dev@lists.osgeo.org
> >  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100722/fb470e67/attachment.html
From warmerdam at pobox.com  Thu Jul 22 10:52:19 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jul 22 10:52:25 2010
Subject: [gdal-dev] acceding shapes and rasters of a GeoDatabase .gdb
In-Reply-To: <AANLkTilKGIq4jEoiW0ieG8GUu5Up_rz29tdaNp8j6-o4@mail.gmail.com>
References: <AANLkTilKGIq4jEoiW0ieG8GUu5Up_rz29tdaNp8j6-o4@mail.gmail.com>
Message-ID: <4C485B23.9010505@pobox.com>

Sebastian E. Ovide wrote:
> Hi All,
> 
> is it possible to access to the shape and rasters inside a .gdb with GDAL ?

Sebastian,

I don't recognise the extension .gdb, so perhaps it is a File Geodatabase.
GDAL/OGR does not support File Geodatabase at this time.  It does support
Personal Geodatabase (.mdb files).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sebastian.ovide at gmail.com  Thu Jul 22 11:18:58 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Thu Jul 22 11:19:20 2010
Subject: [gdal-dev] gdal_rasterize: ERROR 4: `test.tif' not recognised as a
	supported file format.
Message-ID: <AANLkTimARhkCQXM9eL0W1nMdDg_tIfiZ-upNdmn-DIMZ@mail.gmail.com>

Hi All,

following the tutorial...

sebas@SeansPC:~/rasters$ gdal_rasterize --version
GDAL 1.7.2, released 2010/04/23
sebas@SeansPC:~/rasters$ ls -la test.tif
-rw-r--r-- 1 sebas sebas 0 2010-07-22 16:13 test.tif
sebas@SeansPC:~/rasters$ ogrinfo
../shapes/Fluvial_Extents/FluvialUD04Q200Outline.shp
INFO: Open of `../shapes/Fluvial_Extents/FluvialUD04Q200Outline.shp'
      using driver `ESRI Shapefile' successful.
1: FluvialUD04Q200Outline (Polygon)
sebas@SeansPC:~/rasters$ gdal_rasterize -b 1 -burn 100 -l
FluvialUD04Q200Outline ../shapes/Fluvial_Extents/FluvialUD04Q200Outline.shp
test.tif
ERROR 4: `test.tif' not recognised as a supported file format.

sebas@SeansPC:~/rasters$

any ideas ?

-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100722/795e1f38/attachment-0001.html
From jrepetto at free.fr  Thu Jul 22 12:07:59 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Thu Jul 22 12:11:25 2010
Subject: [gdal-dev] gdal_rasterize: ERROR 4: `test.tif' not recognised
	as a	supported file format.
In-Reply-To: <AANLkTimARhkCQXM9eL0W1nMdDg_tIfiZ-upNdmn-DIMZ@mail.gmail.com>
References: <AANLkTimARhkCQXM9eL0W1nMdDg_tIfiZ-upNdmn-DIMZ@mail.gmail.com>
Message-ID: <4C486CDF.3080504@free.fr>

Le 22/07/2010 17:18, Sebastian E. Ovide a ?crit :

> sebas@SeansPC:~/rasters$ ls -la test.tif
> -rw-r--r-- 1 sebas sebas 0 2010-07-22 16:13 test.tif

> ../shapes/Fluvial_Extents/FluvialUD04Q200Outline.shp test.tif
> ERROR 4: `test.tif' not recognised as a supported file format.
>
> any ideas ?
>

Your TIFF file is empty ...
From jmsbc at aol.com  Thu Jul 22 21:17:33 2010
From: jmsbc at aol.com (jmsbc)
Date: Thu Jul 22 21:17:35 2010
Subject: [gdal-dev] crop a raster file (.bsp/.kap) to create an image file
	(.png)
Message-ID: <1279847853837-5327915.post@n2.nabble.com>



Hello,

I have a set of raster files (.bsb and .kap) that I need to crop based on a
set of coordinates (top left x,y and bottom right x,y) in order to obtain a
.png file.

I've gone through the GDAL API tutorial, and it seems like I should be using
CreateCopy to derive the destination file.  

However how do I crop the original raster file based on my specified lat/lon
coordinates?

Thank you
-james
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/crop-a-raster-file-bsp-kap-to-create-an-image-file-png-tp5327915p5327915.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From sebastian.ovide at gmail.com  Fri Jul 23 05:39:57 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Fri Jul 23 05:40:20 2010
Subject: [gdal-dev] ogr2ogr OCI: problem loading shapes
In-Reply-To: <AANLkTinPGwV9ErSFdd5N6YT-d2F1JWlfha071vF3DY5y@mail.gmail.com>
References: <20100722142405.20257.qmail@s466.sureserver.com> 
	<AANLkTinPGwV9ErSFdd5N6YT-d2F1JWlfha071vF3DY5y@mail.gmail.com>
Message-ID: <AANLkTim5eM=sdbpCSJ54ErZAi5L0EPxKZQbC62-7Yb-N@mail.gmail.com>

I've tried it again on a different server, this time with Oracle 10g... I'm
getting the same error...

note: using the same server I'm not getting any error using shp2sdo (
http://www.oracle.com/technology/software/products/spatial/files/shp2sdo_readme.html
)

On Thu, Jul 22, 2010 at 3:36 PM, Sebastian E. Ovide <
sebastian.ovide@gmail.com> wrote:

>
> Hi Ivan,
>
> I've tried again without the ":"... and the problem is still there...
>
> sebas@SeansPC:~/shapes/Fluvial_Extents$ time ogr2ogr -f OCI
> OCI:geoserver/geoserver@mfproduk_11g FluvialUD04Q75Outline.shp -lco
> srid=81989 -lco PRECISION=NO -progress
>
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 1: ORA-29855: error occurred in the execution of ODCIINDEXCREATE
> routine
> ORA-13249: internal error in Spatial index: [mdidxrbd]
> ORA-13249: Error in Spatial index: index build failed
> ORA-13249: Error in spatial index: [mdrcrtxfergm]
> ORA-13249: Error in spatial index: [mdpridxtxfergm]
> ORA-13200: internal error [ROWID:AAASMIAAFAABEt0AAD] in spatial indexing.
>
> ORA-13206: internal error [] while creating the spatial index
> ORA-13034: Invalid data in the SDO_ORDINATE_ARRAY in SDO_GEOMETRY object
> ORA-06512: at "MDSYS.SDO_INDEX_METHOD_10I", line 10
>  in CREATE INDEX "OSI_15101" ON FLUVIALUD04Q75OUTLINE("ORA_GEOMETRY")
> INDEXTYPE IS MDSYS.SPATIAL_INDEX
>
> real    1m25.698s
> user    0m26.660s
> sys     0m0.580s
>
> regards
>
>
> On Thu, Jul 22, 2010 at 3:24 PM, Ivan Lucena <ivan.lucena@pmldnet.com>wrote:
>
>> Hi Sebastian,
>>
>> Did you intend to enter table name after
>> "OCI:geoserver/geoserver@mfproduk_11g:"?
>>
>> I am asking that because there is a ":" at the end but with no information
>> after that.
>>
>> I don't know if that would affect the OCI driver.
>>
>> Regards,
>>
>> Ivan
>>
>>
>> >  -------Original Message-------
>> >  From: Sebastian E. Ovide <sebastian.ovide@gmail.com>
>> >  To: gdal-dev@lists.osgeo.org
>> >  Subject: [gdal-dev] ogr2ogr OCI: problem loading shapes
>> >  Sent: Jul 22 '10 09:14
>> >
>> >  Hi All
>> >
>> >  sebas@SeansPC:~/shapes/Fluvial_Extents$ time ogr2ogr -f OCI
>> >  OCI:geoserver/geoserver@mfproduk_11g: FluvialUD04Q100Outline.shp -lco
>> >  srid=81989 -lco PRECISION=NO -progress
>> >  0...10...20...30...40...50...60...70...80...90...100 - done.
>> >  ERROR 1: ORA-29855: error occurred in the execution of ODCIINDEXCREATE
>> >  routine
>> >  ORA-13249: internal error in Spatial index: [mdidxrbd]
>> >  ORA-13249: Error in Spatial index: index build failed
>> >  ORA-13249: Error in spatial index: [mdrcrtxfergm]
>> >  ORA-13249: Error in spatial index: [mdpridxtxfergm]
>> >  ORA-13200: internal error [ROWID:AAASLwAAFAAA5AxAAC] in spatial
>> indexing.
>> >  ORA-13206: internal error [] while creating the spatial index
>> >  ORA-13034: Invalid data in the SDO_ORDINATE_ARRAY in SDO_GEOMETRY
>> object
>> >  ORA-06512: at "MDSYS.SDO_INDEX_METHOD_10I", line 10
>> >   in CREATE INDEX "OSI_16180" ON FLUVIALUD04Q100OUTLINE("ORA_GEOMETRY")
>> >  INDEXTYPE IS MDSYS.SPATIAL_INDEX
>> >
>> >  real    1m10.377s
>> >  user    0m27.680s
>> >  sys     0m0.710s
>> >  sebas@SeansPC:~/shapes/Fluvial_Extents$ ogrinfo
>> FluvialUD04Q100Outline.shp
>> >  INFO: Open of `FluvialUD04Q100Outline.shp'
>> >        using driver `ESRI Shapefile' successful.
>> >  1: FluvialUD04Q100Outline (Polygon)
>> >  sebas@SeansPC:~/shapes/Fluvial_Extents$
>> >
>> >  sebas@SeansPC:~/shapes/Fluvial_Extents$ ogrinfo --version
>> >  GDAL 1.7.2, released 2010/04/23
>> >
>> >
>> >  ideas ?
>> >
>> >  --
>> >  Sebastian E. Ovide
>> >
>> >
>> >  --------------------
>> >  _______________________________________________
>> >  gdal-dev mailing list
>> >  [LINK: compose.php?to=gdal-dev@lists.osgeo.org]
>> gdal-dev@lists.osgeo.org
>> >  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Sebastian E. Ovide
>
>
>
>
>


-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100723/76b13807/attachment.html
From sebastian.ovide at gmail.com  Fri Jul 23 05:56:46 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Fri Jul 23 05:57:10 2010
Subject: [gdal-dev] gdal_rasterize: ERROR 4: `test.tif' not recognised as 
	a supported file format.
In-Reply-To: <4C486CDF.3080504@free.fr>
References: <AANLkTimARhkCQXM9eL0W1nMdDg_tIfiZ-upNdmn-DIMZ@mail.gmail.com> 
	<4C486CDF.3080504@free.fr>
Message-ID: <AANLkTi=wwJpC2hQvb2yG0qGTQXuBrjVB8EuTT1-DeBib@mail.gmail.com>

I got it..

In the mean time that we wait for Gdal 1.8 being stable, are you aware about
any tool (open source) that can create an empty (white) raster with
georeferences to be use with gdal_rasterize (gdal17) ?

On Thu, Jul 22, 2010 at 5:07 PM, Jean-Claude REPETTO <jrepetto@free.fr>wrote:

> Le 22/07/2010 17:18, Sebastian E. Ovide a ?crit :
>
>
>  sebas@SeansPC:~/rasters$ ls -la test.tif
>> -rw-r--r-- 1 sebas sebas 0 2010-07-22 16:13 test.tif
>>
>
>  ../shapes/Fluvial_Extents/FluvialUD04Q200Outline.shp test.tif
>> ERROR 4: `test.tif' not recognised as a supported file format.
>>
>> any ideas ?
>>
>>
> Your TIFF file is empty ...
>



-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100723/bf7d8cd2/attachment.html
From mail2vajram at gmail.com  Fri Jul 23 06:10:23 2010
From: mail2vajram at gmail.com (mail2vajram)
Date: Fri Jul 23 06:10:24 2010
Subject: [gdal-dev] Yll corner wrong when i am reading ASCII file using
Message-ID: <1279879823107-5328983.post@n2.nabble.com>


Here i am using C# library for GDal, when i reading the YllCorner value using
GeoTranform method i got that Yll corner value wrong.

Eg:  yllcorner 1648000  ..........>original

       yllcorner 1747000 ...........>Gdal

Why, this much difference i got......


-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Yll-corner-wrong-when-i-am-reading-ASCII-file-using-tp5328983p5328983.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From yevgen.antymyrov at and.com  Fri Jul 23 06:47:15 2010
From: yevgen.antymyrov at and.com (Yevgen Antymyrov)
Date: Fri Jul 23 06:46:14 2010
Subject: [gdal-dev] Optimizing access to shapefiles
In-Reply-To: <AANLkTinbIpThouL0pFJkc77_opJ6uxwe4PwoGB017xNL@mail.gmail.com>
References: <AANLkTinbIpThouL0pFJkc77_opJ6uxwe4PwoGB017xNL@mail.gmail.com>
Message-ID: <4C497333.6000902@and.com>

On 07/19/2010 02:08 PM, Martin Dobias wrote:
> Hi,
>
> in order to speed up rendering in QGIS as a part of my GSoC project,
> I've took some time to profile reading of shapefiles in OGR. From the
> results I'd like to suggest some changes that significantly contribute
> to the speed of data retrieval. On a test shapefile of a road network
> (about 100 thousand polylines), I have seen 3-4 times faster retrieval
> when I've implemented the following changes:
>
> 1. allow users of OGR library set which fields they really need. Most
> of time is wasted by fetching all the attributes, but typically none
> or just one attribute is necessary when rendering. For that, I've
> added the following call:
> OGRLayer::SetDesiredFields(int numFields, int* fields);
> The user passes an array of ints, each item tells whether the field
> should be fetched (1) or not (0). The numFields tells the size of the
> array. If numFields<  0 then the layer will return all fields (default
> behavior). The driver implementation then just before fetching a field
> checks whether to fetch the field or not. This optimization could be
> easily used in any driver, I've implemented it only for shapefiles.
> The speedup will vary depending on the size of the attribute table and
> number of desired fields. On my test shapefile containing 16 fields,
> the data has been fetched up to 3x faster when no fields were set as
> desired.

I have a couple of questions.

Comparing to other Shapefile tools like Arc* and TatukGIS, the OGR-based tool Quantum GIS 
has really bad performance because it just does too much. Do you think your solution can 
be applied to Qgis? I mean when displaying geometry, it can call SetDesiredFields() with 
all 0s. And only when user opens Attribute Table, Qgis can re-get all/selected fields. 
Will this be possible with your patch?


-- 
Yevgen
From sebastian.ovide at gmail.com  Fri Jul 23 07:52:38 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Fri Jul 23 07:53:02 2010
Subject: [gdal-dev] gdal_translate: PLS-00201: identifier must be declared
Message-ID: <AANLkTinzmegcUsnXcznXagvwB0uEtM8977taLrS8u7_z@mail.gmail.com>

Hi All,

gdal_translate works with SDO_GEOR.INIT() but it doesn't with
SDO_GEOR.INIT("RDT_MY_TABLE")...

any ideas ?

-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100723/4bdc092f/attachment-0001.html
From wonder.sk at gmail.com  Fri Jul 23 08:31:52 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri Jul 23 08:31:55 2010
Subject: [gdal-dev] Optimizing access to shapefiles
In-Reply-To: <4C497333.6000902@and.com>
References: <AANLkTinbIpThouL0pFJkc77_opJ6uxwe4PwoGB017xNL@mail.gmail.com>
	<4C497333.6000902@and.com>
Message-ID: <AANLkTikOdfFFOCH0CukM4_Lg8OZUEWbPygfS8JKn5VxG@mail.gmail.com>

On Fri, Jul 23, 2010 at 12:47 PM, Yevgen Antymyrov
<yevgen.antymyrov@and.com> wrote:
> On 07/19/2010 02:08 PM, Martin Dobias wrote:
>>
>> Hi,
>>
>> in order to speed up rendering in QGIS as a part of my GSoC project,
>> I've took some time to profile reading of shapefiles in OGR. From the
>> results I'd like to suggest some changes that significantly contribute
>> to the speed of data retrieval. On a test shapefile of a road network
>> (about 100 thousand polylines), I have seen 3-4 times faster retrieval
>> when I've implemented the following changes:
>>
>> [...]
>
> I have a couple of questions.
>
> Comparing to other Shapefile tools like Arc* and TatukGIS, the OGR-based
> tool Quantum GIS has really bad performance because it just does too much.
> Do you think your solution can be applied to Qgis? I mean when displaying
> geometry, it can call SetDesiredFields() with all 0s. And only when user
> opens Attribute Table, Qgis can re-get all/selected fields. Will this be
> possible with your patch?

This is exactly my intent. Vector data providers in QGIS always
receive a list of fields that are needed, however until now OGR data
provider couldn't make use of it, because currently there's no way in
OGR to limit what fields should be fetched. Knowing which fields can
be ignored allows us to save a lot of unnecessary work.

Regards
Martin
From yevgen.antymyrov at and.com  Fri Jul 23 08:56:57 2010
From: yevgen.antymyrov at and.com (Yevgen Antymyrov)
Date: Fri Jul 23 08:54:06 2010
Subject: [gdal-dev] Optimizing access to shapefiles
In-Reply-To: <AANLkTikOdfFFOCH0CukM4_Lg8OZUEWbPygfS8JKn5VxG@mail.gmail.com>
References: <AANLkTinbIpThouL0pFJkc77_opJ6uxwe4PwoGB017xNL@mail.gmail.com>	<4C497333.6000902@and.com>
	<AANLkTikOdfFFOCH0CukM4_Lg8OZUEWbPygfS8JKn5VxG@mail.gmail.com>
Message-ID: <4C499199.9060709@and.com>

On 07/23/2010 02:31 PM, Martin Dobias wrote:
> This is exactly my intent. Vector data providers in QGIS always
> receive a list of fields that are needed, however until now OGR data
> provider couldn't make use of it, because currently there's no way in
> OGR to limit what fields should be fetched. Knowing which fields can
> be ignored allows us to save a lot of unnecessary work.

Great, I'm glad the idea was met with approval. I think I'll be following this and the 
"RFC 29" thread to be aware of new developments. Once this API is ready, I'll try to 
participate in its support in Qgis.


-- 
Yevgen
From eta at le34.dk  Fri Jul 23 09:35:30 2010
From: eta at le34.dk (Esben Taudorf)
Date: Fri Jul 23 09:36:36 2010
Subject: [gdal-dev] Append a shapefile to a postgis table using the GDAL/OGR
	CSharp interface
Message-ID: <AAD98904A979004F8FD29D8368C6463846F1A3@SERVER-MAIL.le34.dk>

Hi everybody

 

I just started using the GDAL/OGR CSharp interface in Visual Studio and
it works great. 

I am trying to append a shapefile to a postgis table. This I can do with
the following lines in ogr2ogr:

 

Fist import the shapefile to postgis a table

ogr2ogr -f "PostgreSQL" PG:"dbname='postgis' host='localhost'
port='5432' user='...' password='...'" -lco PRECISION=NO -lco
GEOMETRY_NAME=geom -a_srs EPSG:25832 "c:\temp\testfile.shp"

 

Then append the same shapefile (this is a test) to the same postgis
table like this

ogr2ogr -append -update -f "PostgreSQL" PG:"dbname='postgis'
host='localhost' port='5432' user='...' password='...'"
"c:\temp\testfile.shp"

 

 

But how do I do this in the GDAL/OGR CSharp interface or which classes
and functions do I use?

 

So far what I have done is:

 

Open a layer from the shapefile:

string fileShp = @"c:\temp\testfile.shp";

DataSource InputDataSource = Ogr.Open(fileShp, 0);

Layer inputLayer = InputDataSource.GetLayerByIndex(0);

FeatureDefn def = inputLayer.GetLayerDefn();

 

Open a datasource to postgis:

OutputDriver = Ogr.GetDriverByName("PostgreSQL");

DataSource OutputDataSource = OutputDriver.Open("PG:dbname='postgis'
host='localhost' port='5432' user='...' password='...'", 1);

 

 

Copy the layer to the postgis table:

Layer outputLayer = OutputDataSource.CopyLayer(inputLayer,
def.GetName(), new string[] { "GEOMETRY_NAME=geom", "PRECISION=NO" });
//How to add -a_srs EPSG:25832?

 

 

This works to import the shapefile to a postgis table. But what should I
do when to append the same shapefile to the postgis a table. So far I
have done this:

 

Open a layer from the shapefile:

string fileShp = @"c:\temp\testfile.shp";

DataSource InputDataSource = Ogr.Open(fileShp, 0);

Layer inputLayer = InputDataSource.GetLayerByIndex(0);

FeatureDefn def = inputLayer.GetLayerDefn();

 

Open a datasource to postgis:

OutputDriver = Ogr.GetDriverByName("PostgreSQL");

DataSource OutputDataSource = OutputDriver.Open("PG:dbname='postgis'
host='localhost' port='5432' user='...' password='...'", 1);

 

 

Layer outputLayer = OutputDataSource.GetLayerByName(def.GetName());

Feature feat;

while ((feat = inputLayer.GetNextFeature()) != null)

                             {

 
outputLayer.CreateFeature(feat);

                             }

 

The CreateFeature functions fails with a syntax error in the INSERT
command. Below is a short version of the command with the syntax error: 

 

Command: INSERT INTO "testfile" ("geom" , "ogc_fid" , "name") VALUES
(GeomFromEWKT('SRID=-1;POINT (701678 6152444)'::TEXT) , 0 , Test)

 

The field "name" is a character varying in postgis a the command needs
single quotes around 'Test'.

 

How do I solve this syntax error?

 

I am also wondering how to assign an output SRS when creating the
postgis table like the ogr2ogr flag -a_srs EPSG:25832?

 

Any help or comment would be appreciated.

 

 

Regards Esben.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100723/86c5ea47/attachment.html
From warmerdam at pobox.com  Fri Jul 23 10:28:13 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jul 23 10:28:18 2010
Subject: [gdal-dev] Yll corner wrong when i am reading ASCII file using
In-Reply-To: <1279879823107-5328983.post@n2.nabble.com>
References: <1279879823107-5328983.post@n2.nabble.com>
Message-ID: <4C49A6FD.907@pobox.com>

mail2vajram wrote:
> Here i am using C# library for GDal, when i reading the YllCorner value using
> GeoTranform method i got that Yll corner value wrong.
> 
> Eg:  yllcorner 1648000  ..........>original
> 
>        yllcorner 1747000 ...........>Gdal
> 
> Why, this much difference i got......

mail2vajram,

You don't show how you are trying to get the yllcorner from
GetGeoTransform().  I will note that the origin provided in the
geotransform is the top left, not lower left corner.

You might also need to provide the file header for further comment.
I don't know if the difference is a top-to-bottom distance, or just
half a pixel - in which case it is related to the center vs. corner
of pixel origin issue.

Best regardes,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Jul 23 10:43:47 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jul 23 10:43:52 2010
Subject: [gdal-dev] crop a raster file (.bsp/.kap) to create an image
	file (.png)
In-Reply-To: <1279847853837-5327915.post@n2.nabble.com>
References: <1279847853837-5327915.post@n2.nabble.com>
Message-ID: <4C49AAA3.4030803@pobox.com>

jmsbc wrote:
> 
> Hello,
> 
> I have a set of raster files (.bsb and .kap) that I need to crop based on a
> set of coordinates (top left x,y and bottom right x,y) in order to obtain a
> .png file.
> 
> I've gone through the GDAL API tutorial, and it seems like I should be using
> CreateCopy to derive the destination file.  
> 
> However how do I crop the original raster file based on my specified lat/lon
> coordinates?

James,

gdal_translate has options to select a subwindow based on pixel/line
coordiantes (-srcwin) or coordinates in the projected coordinate system
of the file (-projwin).  It accomplishes this by creating an in memory
virtual file referencing a subwindow of the source file and using
CreateCopy on that virtual file.  This is a somewhat complicated technique
but you could review the gdal_translate code in gdal/apps to see how it is
accomplished.

However, I believe in some BSB files the cropping is not going to be a
rectangle in the coordinate system of the image - if the coordinate system
of the image is not rectangular relative to lat/long (for instance LCC).
If that is the case you would need a more complicated technique.

You will also need to transform the lat/long values to image coordinates
to construct the source window.  You might want to read the coordinate system
tutorial before trying to do that.

   http://www.gdal.org/ogr/osr_tutorial.html

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jukka.rahkonen at mmmtike.fi  Fri Jul 23 14:38:36 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Jul 23 14:38:46 2010
Subject: [gdal-dev] Re: ogr2ogr OCI: problem loading shapes
References: <20100722142405.20257.qmail@s466.sureserver.com>
	<AANLkTinPGwV9ErSFdd5N6YT-d2F1JWlfha071vF3DY5y@mail.gmail.com>
	<AANLkTim5eM=sdbpCSJ54ErZAi5L0EPxKZQbC62-7Yb-N@mail.gmail.com>
Message-ID: <loom.20100723T203430-579@post.gmane.org>

Sebastian E. Ovide <sebastian.ovide <at> gmail.com> writes:


> 
> ORA-13034: Invalid data in the SDO_ORDINATE_ARRAY in SDO_GEOMETRY
objectORA-06512: at "MDSYS.SDO_INDEX_METHOD_10I", line 10
> ?in CREATE INDEX "OSI_15101" ON FLUVIALUD04Q75OUTLINE("ORA_GEOMETRY")
INDEXTYPE IS MDSYS.SPATIAL_INDEXreal??? 1m25.698suser??? 0m26.660ssys????
0m0.580sregards

Hi,

Try to capture the faulty geometry that is obviously preventing the creation of
the spatial index. With -lco INDEX=OFF you may be able to get all the data
loaded into the Oracle table.  Validate geometries then with Oracle and you may
get some more information.

-Jukka Rahkonen-

From ivan.lucena at pmldnet.com  Sat Jul 24 02:40:42 2010
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Sat Jul 24 06:22:35 2010
Subject: [gdal-dev] gdal_translate: PLS-00201: identifier must be declared
In-Reply-To: <AANLkTinzmegcUsnXcznXagvwB0uEtM8977taLrS8u7_z@mail.gmail.com>
References: <AANLkTinzmegcUsnXcznXagvwB0uEtM8977taLrS8u7_z@mail.gmail.com>
Message-ID: <4C4A8AEA.9060908@pmldnet.com>

Sebastian,

It should work.

You are talking about the create-option INSERT, right?

You would need to add double quotes around the whole options entry therefore you would need to use
single quotes around the RDT name.

I just found a wrong example at [gdal.org/frmt_georaster.html] and I am going to fix that.

It should show single quotes around RDT:

% gdal_translate -of georaster landsat_1.tif georaster:scott/tiger,,landsat,scene \
  -co "INSERT=VALUES(10,'Main building', SDO_GEOR.INIT('RDT', 10))"

Best regards,

Ivan

Sebastian E. Ovide wrote:
> Hi All,
> 
> gdal_translate works with SDO_GEOR.INIT() but it doesn't with
> SDO_GEOR.INIT("RDT_MY_TABLE")...
> 
> any ideas ?
> 
> -- 
> Sebastian E. Ovide
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From chaitanya.ch at gmail.com  Sat Jul 24 10:31:57 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Jul 24 10:32:03 2010
Subject: [gdal-dev] Append a shapefile to a postgis table using the 
	GDAL/OGR CSharp interface
In-Reply-To: <AAD98904A979004F8FD29D8368C6463846F1A3@SERVER-MAIL.le34.dk>
References: <AAD98904A979004F8FD29D8368C6463846F1A3@SERVER-MAIL.le34.dk>
Message-ID: <AANLkTi=3Vpeso106d9nBKxBZxwg6xL3s-j+pDtRJHgFS@mail.gmail.com>

Esben,

I am not sure why the value is not quoted in the error report. The
PostgreSQL driver quotes the string values.
When using CreateFeature() you need to make sure to set the feature's FID to
OGRNullFID using SetFID(OGRNullFID). In your error report it shows that
ogc_fid is set to 0. Perhaps there is already a feature with that value?

On Fri, Jul 23, 2010 at 7:05 PM, Esben Taudorf <eta@le34.dk> wrote:

>  Hi everybody
>
>
>
> I just started using the GDAL/OGR CSharp interface in Visual Studio and it
> works great.
>
> I am trying to append a shapefile to a postgis table. This I can do with
> the following lines in ogr2ogr:
>
>
>
> Fist import the shapefile to postgis a table
>
> ogr2ogr -f "PostgreSQL" PG:"dbname='postgis' host='localhost' port='5432'
> user='...' password='...'" -lco PRECISION=NO -lco GEOMETRY_NAME=geom -a_srs
> EPSG:25832 "c:\temp\testfile.shp"
>
>
>
> Then append the same shapefile (this is a test) to the same postgis table
> like this
>
> ogr2ogr -append -update -f "PostgreSQL" PG:"dbname='postgis'
> host='localhost' port='5432' user='...' password='...'"
> "c:\temp\testfile.shp"
>
>
>
>
>
> But how do I do this in the GDAL/OGR CSharp interface or which classes and
> functions do I use?
>
>
>
> So far what I have done is:
>
>
>
> Open a layer from the shapefile:
>
> string fileShp = @"c:\temp\testfile.shp";
>
> DataSource InputDataSource = Ogr.Open(fileShp, 0);
>
> Layer inputLayer = InputDataSource.GetLayerByIndex(0);
>
> FeatureDefn def = inputLayer.GetLayerDefn();
>
>
>
> Open a datasource to postgis:
>
> OutputDriver = Ogr.GetDriverByName("PostgreSQL");
>
> DataSource OutputDataSource = OutputDriver.Open("PG:dbname='postgis'
> host='localhost' port='5432' user='...' password='...'", 1);
>
>
>
>
>
> Copy the layer to the postgis table:
>
> Layer outputLayer = OutputDataSource.CopyLayer(inputLayer, def.GetName(),
> new string[] { "GEOMETRY_NAME=geom", "PRECISION=NO" }); //How to add -a_srs
> EPSG:25832?
>
>
>
>
>
> This works to import the shapefile to a postgis table. But what should I do
> when to append the same shapefile to the postgis a table. So far I have done
> this:
>
>
>
> Open a layer from the shapefile:
>
> string fileShp = @"c:\temp\testfile.shp";
>
> DataSource InputDataSource = Ogr.Open(fileShp, 0);
>
> Layer inputLayer = InputDataSource.GetLayerByIndex(0);
>
> FeatureDefn def = inputLayer.GetLayerDefn();
>
>
>
> Open a datasource to postgis:
>
> OutputDriver = Ogr.GetDriverByName("PostgreSQL");
>
> DataSource OutputDataSource = OutputDriver.Open("PG:dbname='postgis'
> host='localhost' port='5432' user='...' password='...'", 1);
>
>
>
>
>
> Layer outputLayer = OutputDataSource.GetLayerByName(def.GetName());
>
> Feature feat;
>
> while ((feat = inputLayer.GetNextFeature()) != null)
>
>                              {
>
>
> outputLayer.CreateFeature(feat);
>
>                              }
>
>
>
> The CreateFeature functions fails with a syntax error in the INSERT
> command. Below is a short version of the command with the syntax error:
>
>
>
> Command: INSERT INTO "testfile" ("geom" , "ogc_fid" , "name") VALUES
> (GeomFromEWKT('SRID=-1;POINT (701678 6152444)'::TEXT) , 0 , Test)
>
>
>
> The field "name" is a character varying in postgis a the command needs
> single quotes around 'Test'.
>
>
>
> How do I solve this syntax error?
>
>
>
> I am also wondering how to assign an output SRS when creating the postgis
> table like the ogr2ogr flag -a_srs EPSG:25832?
>
>
>
> Any help or comment would be appreciated.
>
>
>
>
>
> Regards Esben.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100724/8e17a3ac/attachment.html
From mwtoews at gmail.com  Sat Jul 24 12:26:33 2010
From: mwtoews at gmail.com (Mike Toews)
Date: Sat Jul 24 12:27:19 2010
Subject: [gdal-dev] Cannot configure SpatiaLite
Message-ID: <AANLkTimUbPWJ-j9p4560PW4_nkrFfTiSvwr=dCXPaZGe@mail.gmail.com>

Hi all,

I cannot seem to configure GDAL 1.7.2 with SpatiaLite support. My
system is Ubuntu 8.04 Hardy server LTS. I've installed SpatiaLite
version 2.3.1 from source (both lib and tools), and it appears to work
normally. I'm not sure if it matters, but I installed both sqlite3 and
the development library from normal apt packages. I've even run
ldconfig a few times.

Here is my configure command, and some excerpts of the output:

$ ./configure --with-spatialite=/usr/local/lib/libspatialite.so
...
checking for SpatiaLite... checking for spatialite_init in -lspatialite... yes
disabled
checking for SQLite3 library >= 3.0.0... yes
...
GDAL is now configured for i686-pc-linux-gnu
...
  SQLite support:            yes
  SpatiaLite support:        no


I don't understand the output "-lspatialite... yes disabled" when I
specified the path. Thanks for any help.

-Mike
From mwtoews at gmail.com  Sat Jul 24 14:02:24 2010
From: mwtoews at gmail.com (Mike Toews)
Date: Sat Jul 24 14:02:46 2010
Subject: [gdal-dev] Re: Cannot configure SpatiaLite
In-Reply-To: <AANLkTimUbPWJ-j9p4560PW4_nkrFfTiSvwr=dCXPaZGe@mail.gmail.com>
References: <AANLkTimUbPWJ-j9p4560PW4_nkrFfTiSvwr=dCXPaZGe@mail.gmail.com>
Message-ID: <AANLkTimTvpSa4pJpuBvu9WP0O2QRp5fUJKct+Tivf4hz@mail.gmail.com>

Ok I figured it out after inspecting the code[1]. This works:

$ ./configure --with-spatialite=/usr/local

or (if SpatiaLite installed by apt in Ubuntu 10.04)

$ ./configure --with-spatialite=/usr

Why isn't the presence of -lspatialite tested and added automatically,
like with all other formats?

-Mike

[1] http://trac.osgeo.org/gdal/browser/trunk/gdal/configure.in#L2088

On 24 July 2010 09:26, Mike Toews <mwtoews@gmail.com> wrote:
> Hi all,
>
> I cannot seem to configure GDAL 1.7.2 with SpatiaLite support. My
> system is Ubuntu 8.04 Hardy server LTS. I've installed SpatiaLite
> version 2.3.1 from source (both lib and tools), and it appears to work
> normally. I'm not sure if it matters, but I installed both sqlite3 and
> the development library from normal apt packages. I've even run
> ldconfig a few times.
>
> Here is my configure command, and some excerpts of the output:
>
> $ ./configure --with-spatialite=/usr/local/lib/libspatialite.so
> ...
> checking for SpatiaLite... checking for spatialite_init in -lspatialite... yes
> disabled
> checking for SQLite3 library >= 3.0.0... yes
> ...
> GDAL is now configured for i686-pc-linux-gnu
> ...
> ?SQLite support: ? ? ? ? ? ?yes
> ?SpatiaLite support: ? ? ? ?no
>
>
> I don't understand the output "-lspatialite... yes disabled" when I
> specified the path. Thanks for any help.
>
> -Mike
>
From lzzgeo at yahoo.cn  Mon Jul 26 01:53:34 2010
From: lzzgeo at yahoo.cn (=?utf-8?B?5YiY5b+g5b+XICA=?=)
Date: Mon Jul 26 02:00:19 2010
Subject: [gdal-dev] =?utf-8?b?5Zue5aSN77yaIGdkYWwtZGV2IERpZ2VzdCwgVm9s?=
	=?utf-8?q?_74=2C_Issue_64?=
In-Reply-To: <20100723160014.30BDBE01DF5@lists.osgeo.org>
Message-ID: <970273.94065.qm@web15007.mail.cnb.yahoo.com>

Great idea!

I have implemented it partically, just fetching some fields we needed, and resuing feature object, directly reading geometry(WKB foramt) object from shapefile file, and resuing geometry object.

maybe, we can read a block from shapefile one time, and parse it to some geoemtry objects, and this memory block should be resuing.

these method will speed up reading geometry objects and attribute from DBF and shapefile.

--- 10?7?24????, gdal-dev-request@lists.osgeo.org <gdal-dev-request@lists.osgeo.org> ???

???: gdal-dev-request@lists.osgeo.org <gdal-dev-request@lists.osgeo.org>
??: gdal-dev Digest, Vol 74, Issue 64
???: gdal-dev@lists.osgeo.org
??: 2010?7?24?,??,??12:00

Send gdal-dev mailing list submissions to
??? gdal-dev@lists.osgeo.org

To subscribe or unsubscribe via the World Wide Web, visit
??? http://lists.osgeo.org/mailman/listinfo/gdal-dev
or, via email, send a message with subject or body 'help' to
??? gdal-dev-request@lists.osgeo.org

You can reach the person managing the list at
??? gdal-dev-owner@lists.osgeo.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of gdal-dev digest..."
Today's Topics:

???1. Re: Optimizing access to shapefiles (Martin Dobias)
???2. Re: Optimizing access to shapefiles (Yevgen Antymyrov)
???3. Append a shapefile to a postgis table using the GDAL/OGR
? ? ? CSharp interface (Esben Taudorf)
???4. Re: Yll corner wrong when i am reading ASCII file using
? ? ? (Frank Warmerdam)
???5. Re: crop a raster file (.bsp/.kap) to create an image??? file
? ? ? (.png) (Frank Warmerdam)
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100726/6b430b16/attachment.html
From mail2vajram at gmail.com  Mon Jul 26 06:10:34 2010
From: mail2vajram at gmail.com (mail2vajram)
Date: Mon Jul 26 06:10:35 2010
Subject: [gdal-dev] exception, while creating large image
Message-ID: <1280139034001-5337330.post@n2.nabble.com>


in my application i need to create multiple images with large size using C#.
while creating multiple files first three images created successfully after
that i got the following exception.

ContextSwitchDeadLock was detecteed



The CLR has been unable to transition from COM context 0x204d28 to COM
context 0x204e98 for 60 seconds. The thread that owns the destination
context/apartment is most likely either doing a non pumping wait or
processing a very long running operation without pumping Windows messages.
This situation generally has a negative performance impact and may even lead
to the application becoming non responsive or memory usage accumulating
continually over time. To avoid this problem, all single threaded apartment
(STA) threads should use pumping wait primitives (such as
CoWaitForMultipleHandles) and routinely pump messages during long running
operations.


my code is.....


for (i = 1; i < vallist; i++)
            {

                // create new trans images....
                Driver createtransdriver = Gdal.GetDriverByName("HFA");
                Dataset createtransdataset =
createtransdriver.Create(startuppath + "\\Transimages\\Calss_" +
i.ToString() + ".IMG", band.XSize, band.YSize, 1, DataType.GDT_Float32,
null);
                Band createtransband = createtransdataset.GetRasterBand(1);


                for (j = 0; j < band.YSize; j++)
                {

                    for (k = 0; k < band.XSize; k++)
                    {
                        band.ReadRaster(k, j, 1, 1, value, 1, 1, 1, 1);
                        if (value[0] == 0)
                        {

                            createtransband.WriteRaster(k, j, 1, 1, value,
1, 1, 1, 1);
                        }
                        else
                        {
                            imgval = arrayprobs[value[0] - 1, i - 1];
                            value[0] = Convert.ToInt32(imgval);
                            createtransband.WriteRaster(k, j, 1, 1, value,
1, 1, 1, 1);

                        }
                    }

                }
                createtransband = null;
                createtransdataset = null;
                createtransdriver = null;


            }



how to overcome this..............


help me please
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/exception-while-creating-large-image-tp5337330p5337330.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Mon Jul 26 07:41:05 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Jul 26 07:41:08 2010
Subject: [gdal-dev] exception, while creating large image
In-Reply-To: <1280139034001-5337330.post@n2.nabble.com>
References: <1280139034001-5337330.post@n2.nabble.com>
Message-ID: <AANLkTikrwoScdtraY2L2RVzetUk0zyXL1RQLSNovx7LT@mail.gmail.com>

Do you have a sample data to reproduce this?

Best regards,

Tamas


2010/7/26 mail2vajram <mail2vajram@gmail.com>

>
> in my application i need to create multiple images with large size using
> C#.
> while creating multiple files first three images created successfully after
> that i got the following exception.
>
> ContextSwitchDeadLock was detecteed
>
>
>
> The CLR has been unable to transition from COM context 0x204d28 to COM
> context 0x204e98 for 60 seconds. The thread that owns the destination
> context/apartment is most likely either doing a non pumping wait or
> processing a very long running operation without pumping Windows messages.
> This situation generally has a negative performance impact and may even
> lead
> to the application becoming non responsive or memory usage accumulating
> continually over time. To avoid this problem, all single threaded apartment
> (STA) threads should use pumping wait primitives (such as
> CoWaitForMultipleHandles) and routinely pump messages during long running
> operations.
>
>
> my code is.....
>
>
> for (i = 1; i < vallist; i++)
>            {
>
>                // create new trans images....
>                Driver createtransdriver = Gdal.GetDriverByName("HFA");
>                Dataset createtransdataset =
> createtransdriver.Create(startuppath + "\\Transimages\\Calss_" +
> i.ToString() + ".IMG", band.XSize, band.YSize, 1, DataType.GDT_Float32,
> null);
>                Band createtransband = createtransdataset.GetRasterBand(1);
>
>
>                for (j = 0; j < band.YSize; j++)
>                {
>
>                    for (k = 0; k < band.XSize; k++)
>                    {
>                        band.ReadRaster(k, j, 1, 1, value, 1, 1, 1, 1);
>                        if (value[0] == 0)
>                        {
>
>                            createtransband.WriteRaster(k, j, 1, 1, value,
> 1, 1, 1, 1);
>                        }
>                        else
>                        {
>                            imgval = arrayprobs[value[0] - 1, i - 1];
>                            value[0] = Convert.ToInt32(imgval);
>                            createtransband.WriteRaster(k, j, 1, 1, value,
> 1, 1, 1, 1);
>
>                        }
>                    }
>
>                }
>                createtransband = null;
>                createtransdataset = null;
>                createtransdriver = null;
>
>
>            }
>
>
>
> how to overcome this..............
>
>
> help me please
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/exception-while-creating-large-image-tp5337330p5337330.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100726/57b718cd/attachment.html
From sebastian.ovide at gmail.com  Mon Jul 26 07:56:50 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Mon Jul 26 08:03:33 2010
Subject: [gdal-dev] Re: ogr2ogr OCI: problem loading shapes
In-Reply-To: <loom.20100723T203430-579@post.gmane.org>
References: <20100722142405.20257.qmail@s466.sureserver.com> 
	<AANLkTinPGwV9ErSFdd5N6YT-d2F1JWlfha071vF3DY5y@mail.gmail.com> 
	<AANLkTim5eM=sdbpCSJ54ErZAi5L0EPxKZQbC62-7Yb-N@mail.gmail.com> 
	<loom.20100723T203430-579@post.gmane.org>
Message-ID: <AANLkTinLJcuvZv3v5GMvF_OMyacP8dzUnZb3hS9jfyzQ@mail.gmail.com>

On Fri, Jul 23, 2010 at 7:38 PM, Jukka Rahkonen
<jukka.rahkonen@mmmtike.fi>wrote:

> Validate geometries

validating geometries it came out: ORA-54668: a 2D SRID cannot be used with
a 3D geometry

therefore I've used the option -nlt POINT as suggested
http://osgeo-org.1803224.n2.nabble.com/howto-flattening-of-3D-shapefiles-td3038433.html

but I still get the same ORA-54668 validation error...

any ideas ?


-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100726/193f0e59/attachment.html
From Jukka.Rahkonen at mmmtike.fi  Mon Jul 26 08:11:41 2010
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Mon Jul 26 08:25:08 2010
Subject: [gdal-dev] Re: ogr2ogr OCI: problem loading shapes
References: <20100722142405.20257.qmail@s466.sureserver.com>
	<AANLkTinPGwV9ErSFdd5N6YT-d2F1JWlfha071vF3DY5y@mail.gmail.com>
	<AANLkTim5eM=sdbpCSJ54ErZAi5L0EPxKZQbC62-7Yb-N@mail.gmail.com>
	<loom.20100723T203430-579@post.gmane.org>
	<AANLkTinLJcuvZv3v5GMvF_OMyacP8dzUnZb3hS9jfyzQ@mail.gmail.com>
Message-ID: <CC197224AC75CE4DB23F739B16891B86E34890@tikka.haapa.mmm.fi>

Hi,

http://gdal.org/ogr/drv_oci.html says:
Layer Creation Options
DIM: This may be set to 2 or 3 to force the dimension of the created layer. If not set 3 is used by default.

Have you tried that?

-Jukka-

Sebastian E. Ovide wrote:

 
On Fri, Jul 23, 2010 at 7:38 PM, Jukka Rahkonen
<jukka.rahkonen@mmmtike.fi>wrote:

> Validate geometries

validating geometries it came out: ORA-54668: a 2D SRID cannot be used with
a 3D geometry

therefore I've used the option -nlt POINT as suggested
http://osgeo-org.1803224.n2.nabble.com/howto-flattening-of-3D-shapefiles-td3038433.html

but I still get the same ORA-54668 validation error...

any ideas ?


-- 
Sebastian E. Ovide

From sebastian.ovide at gmail.com  Mon Jul 26 11:00:58 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Mon Jul 26 11:01:21 2010
Subject: [gdal-dev] Re: ogr2ogr OCI: problem loading shapes
In-Reply-To: <CC197224AC75CE4DB23F739B16891B86E34890@tikka.haapa.mmm.fi>
References: <20100722142405.20257.qmail@s466.sureserver.com> 
	<AANLkTinPGwV9ErSFdd5N6YT-d2F1JWlfha071vF3DY5y@mail.gmail.com> 
	<AANLkTim5eM=sdbpCSJ54ErZAi5L0EPxKZQbC62-7Yb-N@mail.gmail.com> 
	<loom.20100723T203430-579@post.gmane.org>
	<AANLkTinLJcuvZv3v5GMvF_OMyacP8dzUnZb3hS9jfyzQ@mail.gmail.com> 
	<CC197224AC75CE4DB23F739B16891B86E34890@tikka.haapa.mmm.fi>
Message-ID: <AANLkTinB1+54ryNkEDFRn2JTAy12rmS1QEGMRSYYGt9G@mail.gmail.com>

thanks for that... I'm getting closer ....

sebas@SeansPC:~/gdal$ time ogr2ogr -f OCI
OCI:geoserver/geoserver@MFproduk_11g../shapes/Fluvial_Extents/FluvialUD04Q200Outline.shp
-lco srid=81989 -lco
PRECISION=NO -progress -lco DIM=2
0...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 1: ORA-13223: duplicate entry for FLUVIALUD04Q200OUTLINE.ORA_GEOMETRY
in SDO_GEOM_METADATA
ORA-06512: at "MDSYS.MD", line 1723
ORA-06512: at "MDSYS.MDERR", line 17
ORA-06512: at "MDSYS.SDO_GEOM_TRIG_INS1", line 48
ORA-04088: error during execution of trigger 'MDSYS.SDO_GEOM_TRIG_INS1'
 in INSERT INTO USER_SDO_GEOM_METADATA VALUES ('FLUVIALUD04Q200OUTLINE',
'ORA_GEOMETRY',
MDSYS.SDO_DIM_ARRAY(MDSYS.SDO_DIM_ELEMENT('X',138874.997,654690.003,0.001),MDSYS.SDO_DIM_ELEMENT('Y',15619.997,814145.0030999999,0.001)),
81989)

real    0m42.414s
user    0m19.900s
sys     0m0.440s


On Mon, Jul 26, 2010 at 1:11 PM, Rahkonen Jukka
<Jukka.Rahkonen@mmmtike.fi>wrote:

> Hi,
>
> http://gdal.org/ogr/drv_oci.html says:
> Layer Creation Options
> DIM: This may be set to 2 or 3 to force the dimension of the created layer.
> If not set 3 is used by default.
>
> Have you tried that?
>
> -Jukka-
>
> Sebastian E. Ovide wrote:
>
>
> On Fri, Jul 23, 2010 at 7:38 PM, Jukka Rahkonen
> <jukka.rahkonen@mmmtike.fi>wrote:
>
> > Validate geometries
>
> validating geometries it came out: ORA-54668: a 2D SRID cannot be used with
> a 3D geometry
>
> therefore I've used the option -nlt POINT as suggested
>
> http://osgeo-org.1803224.n2.nabble.com/howto-flattening-of-3D-shapefiles-td3038433.html
>
> but I still get the same ORA-54668 validation error...
>
> any ideas ?
>
>
> --
> Sebastian E. Ovide
>
>


-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100726/1c3e4072/attachment-0001.html
From sebastian.ovide at gmail.com  Mon Jul 26 11:08:44 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Mon Jul 26 11:10:10 2010
Subject: [gdal-dev] Re: ogr2ogr OCI: problem loading shapes
In-Reply-To: <AANLkTinB1+54ryNkEDFRn2JTAy12rmS1QEGMRSYYGt9G@mail.gmail.com>
References: <20100722142405.20257.qmail@s466.sureserver.com> 
	<AANLkTinPGwV9ErSFdd5N6YT-d2F1JWlfha071vF3DY5y@mail.gmail.com> 
	<AANLkTim5eM=sdbpCSJ54ErZAi5L0EPxKZQbC62-7Yb-N@mail.gmail.com> 
	<loom.20100723T203430-579@post.gmane.org>
	<AANLkTinLJcuvZv3v5GMvF_OMyacP8dzUnZb3hS9jfyzQ@mail.gmail.com> 
	<CC197224AC75CE4DB23F739B16891B86E34890@tikka.haapa.mmm.fi> 
	<AANLkTinB1+54ryNkEDFRn2JTAy12rmS1QEGMRSYYGt9G@mail.gmail.com>
Message-ID: <AANLkTik5W_=TmAfyxuYCmYcahPyEZEEM1eZaoT8noO8B@mail.gmail.com>

ok... I have deleted that extra line manually (should not it be handled by
ogr2ogr in some way?)

Delete From User_Sdo_Geom_Metadata Where Table_Name Like 'FLU%';

now I'm getting another error:


sebas@SeansPC:~/gdal$ time ogr2ogr -f OCI
OCI:geoserver/geoserver@MFproduk_11g../shapes/Fluvial_Extents/FluvialUD04Q200Outline.shp
-lco srid=81989 -lco
PRECISION=NO -progress -lco DIM=2
0...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 1: ORA-13223: duplicate entry for FLUVIALUD04Q200OUTLINE.ORA_GEOMETRY
in SDO_GEOM_METADATA
ORA-06512: at "MDSYS.MD", line 1723
ORA-06512: at "MDSYS.MDERR", line 17
ORA-06512: at "MDSYS.SDO_GEOM_TRIG_INS1", line 48
ORA-04088: error during execution of trigger 'MDSYS.SDO_GEOM_TRIG_INS1'
 in INSERT INTO USER_SDO_GEOM_METADATA VALUES ('FLUVIALUD04Q200OUTLINE',
'ORA_GEOMETRY',
MDSYS.SDO_DIM_ARRAY(MDSYS.SDO_DIM_ELEMENT('X',138874.997,654690.003,0.001),MDSYS.SDO_DIM_ELEMENT('Y',15619.997,814145.0030999999,0.001)),
81989)

real    0m42.801s
user    0m20.090s
sys     0m0.360s


On Mon, Jul 26, 2010 at 4:00 PM, Sebastian E. Ovide <
sebastian.ovide@gmail.com> wrote:

> thanks for that... I'm getting closer ....
>
> sebas@SeansPC:~/gdal$ time ogr2ogr -f OCI
> OCI:geoserver/geoserver@MFproduk_11g../shapes/Fluvial_Extents/FluvialUD04Q200Outline.shp -lco srid=81989 -lco
> PRECISION=NO -progress -lco DIM=2
>
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 1: ORA-13223: duplicate entry for FLUVIALUD04Q200OUTLINE.ORA_GEOMETRY
> in SDO_GEOM_METADATA
> ORA-06512: at "MDSYS.MD", line 1723
> ORA-06512: at "MDSYS.MDERR", line 17
> ORA-06512: at "MDSYS.SDO_GEOM_TRIG_INS1", line 48
> ORA-04088: error during execution of trigger 'MDSYS.SDO_GEOM_TRIG_INS1'
>  in INSERT INTO USER_SDO_GEOM_METADATA VALUES ('FLUVIALUD04Q200OUTLINE',
> 'ORA_GEOMETRY',
> MDSYS.SDO_DIM_ARRAY(MDSYS.SDO_DIM_ELEMENT('X',138874.997,654690.003,0.001),MDSYS.SDO_DIM_ELEMENT('Y',15619.997,814145.0030999999,0.001)),
> 81989)
>
> real    0m42.414s
> user    0m19.900s
> sys     0m0.440s
>
>
>
> On Mon, Jul 26, 2010 at 1:11 PM, Rahkonen Jukka <Jukka.Rahkonen@mmmtike.fi
> > wrote:
>
>> Hi,
>>
>> http://gdal.org/ogr/drv_oci.html says:
>> Layer Creation Options
>> DIM: This may be set to 2 or 3 to force the dimension of the created
>> layer. If not set 3 is used by default.
>>
>> Have you tried that?
>>
>> -Jukka-
>>
>> Sebastian E. Ovide wrote:
>>
>>
>> On Fri, Jul 23, 2010 at 7:38 PM, Jukka Rahkonen
>> <jukka.rahkonen@mmmtike.fi>wrote:
>>
>> > Validate geometries
>>
>> validating geometries it came out: ORA-54668: a 2D SRID cannot be used
>> with
>> a 3D geometry
>>
>> therefore I've used the option -nlt POINT as suggested
>>
>> http://osgeo-org.1803224.n2.nabble.com/howto-flattening-of-3D-shapefiles-td3038433.html
>>
>> but I still get the same ORA-54668 validation error...
>>
>> any ideas ?
>>
>>
>> --
>> Sebastian E. Ovide
>>
>>
>
>
> --
> Sebastian E. Ovide
>
>
>
>
>


-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100726/c7b6e6ed/attachment.html
From michael.smith at usace.army.mil  Mon Jul 26 08:37:23 2010
From: michael.smith at usace.army.mil (Michael Smith)
Date: Mon Jul 26 11:37:28 2010
Subject: [gdal-dev] Re: ogr2ogr OCI: problem loading shapes
In-Reply-To: <AANLkTik5W_=TmAfyxuYCmYcahPyEZEEM1eZaoT8noO8B@mail.gmail.com>
Message-ID: <C872F9C3.1DA0C%michael.smith@usace.army.mil>

Sebastian,

Looks like you didn?t commit the change. There still is a duplicate entry in
the user_sdo_geom_metadata.

Delete From User_Sdo_Geom_Metadata Where Table_Name Like 'FLU%';
Commit;

Mike


-- 
Michael Smith
US Army Corps of Engineers
Remote Sensing/GIS Center
Hanover, NH 




On 7/26/10 11:08 AM, "Sebastian E. Ovide" <sebastian.ovide@gmail.com> wrote:

> ok... I have deleted that extra line manually (should not it be handled by
> ogr2ogr in some way?)
> 
> Delete From User_Sdo_Geom_Metadata Where Table_Name Like 'FLU%';
> 
> now I'm getting another error:
> 
> 
> sebas@SeansPC:~/gdal$ time ogr2ogr -f OCI OCI:geoserver/geoserver@MFproduk_11g
> ../shapes/Fluvial_Extents/FluvialUD04Q200Outline.shp -lco srid=81989 -lco
> PRECISION=NO -progress -lco DIM=2
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 1: ORA-13223: duplicate entry for FLUVIALUD04Q200OUTLINE.ORA_GEOMETRY in
> SDO_GEOM_METADATA
> ORA-06512: at "MDSYS.MD <http://MDSYS.MD> ", line 1723
> ORA-06512: at "MDSYS.MDERR", line 17
> ORA-06512: at "MDSYS.SDO_GEOM_TRIG_INS1", line 48
> ORA-04088: error during execution of trigger 'MDSYS.SDO_GEOM_TRIG_INS1'
> ?in INSERT INTO USER_SDO_GEOM_METADATA VALUES ('FLUVIALUD04Q200OUTLINE',
> 'ORA_GEOMETRY', 
> MDSYS.SDO_DIM_ARRAY(MDSYS.SDO_DIM_ELEMENT('X',138874.997,654690.003,0.001),MDS
> YS.SDO_DIM_ELEMENT('Y',15619.997,814145.0030999999,0.001)), 81989)
> 
> real??? 0m42.801s
> user??? 0m20.090s
> sys???? 0m0.360s
> 
> 
> On Mon, Jul 26, 2010 at 4:00 PM, Sebastian E. Ovide
> <sebastian.ovide@gmail.com> wrote:
>> thanks for that... I'm getting closer ....
>> 
>> sebas@SeansPC:~/gdal$ time ogr2ogr -f OCI
>> OCI:geoserver/geoserver@MFproduk_11g
>> ../shapes/Fluvial_Extents/FluvialUD04Q200Outline.shp -lco srid=81989 -lco
>> PRECISION=NO -progress -lco DIM=2
>> 
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>> ERROR 1: ORA-13223: duplicate entry for FLUVIALUD04Q200OUTLINE.ORA_GEOMETRY
>> in SDO_GEOM_METADATA
>> ORA-06512: at "MDSYS.MD <http://MDSYS.MD> ", line 1723
>> ORA-06512: at "MDSYS.MDERR", line 17
>> ORA-06512: at "MDSYS.SDO_GEOM_TRIG_INS1", line 48
>> ORA-04088: error during execution of trigger 'MDSYS.SDO_GEOM_TRIG_INS1'
>> ?in INSERT INTO USER_SDO_GEOM_METADATA VALUES ('FLUVIALUD04Q200OUTLINE',
>> 'ORA_GEOMETRY', 
>> MDSYS.SDO_DIM_ARRAY(MDSYS.SDO_DIM_ELEMENT('X',138874.997,654690.003,0.001),MD
>> SYS.SDO_DIM_ELEMENT('Y',15619.997,814145.0030999999,0.001)), 81989)
>> 
>> real??? 0m42.414s
>> user??? 0m19.900s
>> sys???? 0m0.440s
>> 
>> 
>> 
>> On Mon, Jul 26, 2010 at 1:11 PM, Rahkonen Jukka <Jukka.Rahkonen@mmmtike.fi>
>> wrote:
>>> Hi,
>>> 
>>> http://gdal.org/ogr/drv_oci.html says:
>>> Layer Creation Options
>>> DIM: This may be set to 2 or 3 to force the dimension of the created layer.
>>> If not set 3 is used by default.
>>> 
>>> Have you tried that?
>>> 
>>> -Jukka-
>>> 
>>> Sebastian E. Ovide wrote:
>>> 
>>> 
>>> On Fri, Jul 23, 2010 at 7:38 PM, Jukka Rahkonen
>>> <jukka.rahkonen@mmmtike.fi>wrote:
>>> 
>>>> > Validate geometries
>>> 
>>> validating geometries it came out: ORA-54668: a 2D SRID cannot be used with
>>> a 3D geometry
>>> 
>>> therefore I've used the option -nlt POINT as suggested
>>> http://osgeo-org.1803224.n2.nabble.com/howto-flattening-of-3D-shapefiles-td3
>>> 038433.html
>>> 
>>> but I still get the same ORA-54668 validation error...
>>> 
>>> any ideas ?
>>> 
>>> 
>>> --
>>> Sebastian E. Ovide
>>> 
>> 
>> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100726/a081a757/attachment.html
From sebastian.ovide at gmail.com  Mon Jul 26 12:29:21 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Mon Jul 26 12:29:45 2010
Subject: [gdal-dev] Re: ogr2ogr OCI: problem loading shapes
In-Reply-To: <C872F9C3.1DA0C%michael.smith@usace.army.mil>
References: <AANLkTik5W_=TmAfyxuYCmYcahPyEZEEM1eZaoT8noO8B@mail.gmail.com> 
	<C872F9C3.1DA0C%michael.smith@usace.army.mil>
Message-ID: <AANLkTi=z7iaL5Rqdv49RCeuaONrgEKB=95SC-MNN9Rbb@mail.gmail.com>

You are right...

aften done it, still getting the oringinal error due to errors in the
geometries...

now, If I import the same data using shp2sdo, I do NOT get any error
creating the index... the shape get imported and the index is created...
even if there are errors in the geometries...

any ideas ?

I know that I could use shp2sdo as it is working... but it requires extra
work (something like 5 command lines)... and as I'm using gdal for importing
rasters, I'd like to use it also for shapes...

thanks again


On Mon, Jul 26, 2010 at 1:37 PM, Michael Smith <michael.smith@usace.army.mil
> wrote:

>  Sebastian,
>
> Looks like you didn?t commit the change. There still is a duplicate entry
> in the user_sdo_geom_metadata.
>
> Delete From User_Sdo_Geom_Metadata Where Table_Name Like 'FLU%';
> Commit;
>
> Mike
>
>
> --
> Michael Smith
> US Army Corps of Engineers
> Remote Sensing/GIS Center
> Hanover, NH
>
>
>
>
> On 7/26/10 11:08 AM, "Sebastian E. Ovide" <sebastian.ovide@gmail.com>
> wrote:
>
> ok... I have deleted that extra line manually (should not it be handled by
> ogr2ogr in some way?)
>
> Delete From User_Sdo_Geom_Metadata Where Table_Name Like 'FLU%';
>
> now I'm getting another error:
>
>
> sebas@SeansPC:~/gdal$ time ogr2ogr -f OCI
> OCI:geoserver/geoserver@MFproduk_11g../shapes/Fluvial_Extents/FluvialUD04Q200Outline.shp -lco srid=81989 -lco
> PRECISION=NO -progress -lco DIM=2
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 1: ORA-13223: duplicate entry for FLUVIALUD04Q200OUTLINE.ORA_GEOMETRY
> in SDO_GEOM_METADATA
> ORA-06512: at "MDSYS.MD <http://MDSYS.MD> ", line 1723
>
> ORA-06512: at "MDSYS.MDERR", line 17
> ORA-06512: at "MDSYS.SDO_GEOM_TRIG_INS1", line 48
> ORA-04088: error during execution of trigger 'MDSYS.SDO_GEOM_TRIG_INS1'
>  in INSERT INTO USER_SDO_GEOM_METADATA VALUES ('FLUVIALUD04Q200OUTLINE',
> 'ORA_GEOMETRY',
> MDSYS.SDO_DIM_ARRAY(MDSYS.SDO_DIM_ELEMENT('X',138874.997,654690.003,0.001),MDSYS.SDO_DIM_ELEMENT('Y',15619.997,814145.0030999999,0.001)),
> 81989)
>
> real    0m42.801s
> user    0m20.090s
> sys     0m0.360s
>
>
> On Mon, Jul 26, 2010 at 4:00 PM, Sebastian E. Ovide <
> sebastian.ovide@gmail.com> wrote:
>
> thanks for that... I'm getting closer ....
>
> sebas@SeansPC:~/gdal$ time ogr2ogr -f OCI
> OCI:geoserver/geoserver@MFproduk_11g../shapes/Fluvial_Extents/FluvialUD04Q200Outline.shp -lco srid=81989 -lco
> PRECISION=NO -progress -lco DIM=2
>
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 1: ORA-13223: duplicate entry for FLUVIALUD04Q200OUTLINE.ORA_GEOMETRY
> in SDO_GEOM_METADATA
> ORA-06512: at "MDSYS.MD <http://MDSYS.MD> ", line 1723
>
> ORA-06512: at "MDSYS.MDERR", line 17
> ORA-06512: at "MDSYS.SDO_GEOM_TRIG_INS1", line 48
> ORA-04088: error during execution of trigger 'MDSYS.SDO_GEOM_TRIG_INS1'
>  in INSERT INTO USER_SDO_GEOM_METADATA VALUES ('FLUVIALUD04Q200OUTLINE',
> 'ORA_GEOMETRY',
> MDSYS.SDO_DIM_ARRAY(MDSYS.SDO_DIM_ELEMENT('X',138874.997,654690.003,0.001),MDSYS.SDO_DIM_ELEMENT('Y',15619.997,814145.0030999999,0.001)),
> 81989)
>
> real    0m42.414s
> user    0m19.900s
> sys     0m0.440s
>
>
>
> On Mon, Jul 26, 2010 at 1:11 PM, Rahkonen Jukka <Jukka.Rahkonen@mmmtike.fi>
> wrote:
>
> Hi,
>
> http://gdal.org/ogr/drv_oci.html says:
> Layer Creation Options
> DIM: This may be set to 2 or 3 to force the dimension of the created layer.
> If not set 3 is used by default.
>
> Have you tried that?
>
> -Jukka-
>
> Sebastian E. Ovide wrote:
>
>
> On Fri, Jul 23, 2010 at 7:38 PM, Jukka Rahkonen
> <jukka.rahkonen@mmmtike.fi>wrote:
>
> > Validate geometries
>
> validating geometries it came out: ORA-54668: a 2D SRID cannot be used with
> a 3D geometry
>
> therefore I've used the option -nlt POINT as suggested
>
> http://osgeo-org.1803224.n2.nabble.com/howto-flattening-of-3D-shapefiles-td3038433.html
>
> but I still get the same ORA-54668 validation error...
>
> any ideas ?
>
>
> --
> Sebastian E. Ovide
>
>
>
>


-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100726/0ebf991d/attachment.html
From jukka.rahkonen at mmmtike.fi  Mon Jul 26 13:08:31 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Jul 26 13:08:48 2010
Subject: [gdal-dev] Re: ogr2ogr OCI: problem loading shapes
References: <AANLkTik5W_=TmAfyxuYCmYcahPyEZEEM1eZaoT8noO8B@mail.gmail.com>
	<C872F9C3.1DA0C%michael.smith@usace.army.mil>
	<AANLkTi=z7iaL5Rqdv49RCeuaONrgEKB=95SC-MNN9Rbb@mail.gmail.com>
Message-ID: <loom.20100726T190200-947@post.gmane.org>

Sebastian E. Ovide <sebastian.ovide <at> gmail.com> writes:

> 
> 
> You are right...aften done it, still getting the oringinal error due to errors
in the geometries...now, If I import the same data using shp2sdo, I do NOT get
any error creating the index... the shape get imported and the index is
created... even if there are errors in the geometries...any ideas ?I know that I
could use shp2sdo as it is working... but it requires extra work (something like
5 command lines)... and as I'm using gdal for importing rasters, I'd like to use
it also for shapes...thanks again

There must be an error in some geometry imported into Oracle with ogr2ogr. The
same geometry is OK when imported with shp2sdo. I think that the only reasonable
thing to do is to find that geometry, see how it looks like in the original data
and when imported with shp2sdo. I believe it can also be imported till Oracle
with ogr2ogr by using option -lco INDEX=OFF. In that case there should be enough
information to find the reason for your issue.

From bontepaarden at gmail.com  Mon Jul 26 14:48:54 2010
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon Jul 26 14:49:17 2010
Subject: [gdal-dev] Convert polyline to polygon
Message-ID: <AANLkTikMdcpP4egyf+offTUvLa-ySLtTLTFUK1ifxvGG@mail.gmail.com>

I'm trying to convert a polyline shapefile into a polygon shapefile.
The polylines are all sort of circular shaped.
When the polyline is not closed and is not crossing itself it is easy to do.
Just add the point of the polyline to the new polygon and add the first
point as the last point to close the polygon.
When the polyline segments cross each other it is much more difficult to
create a valid polygon.

I was wondering if such a method would already be invented by the
GDAL/OGR/GEOS team.

Thanks,

Paul
The Netherlands
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100726/910a8267/attachment.html
From jeff.d.hamann at gmail.com  Mon Jul 26 18:35:56 2010
From: jeff.d.hamann at gmail.com (Jeff Hamann)
Date: Mon Jul 26 18:36:05 2010
Subject: [gdal-dev] Python Bindings
Message-ID: <E0F4E675-D80B-4C2A-8502-A8987C0A74A3@gmail.com>

I've built GDAL/OGR (1.7.2) with the following ./configure options 

$ ./configure \
 CC="gcc -arch i386" \
 CXX="g++ -arch i386" \
 OBJC="gcc -arch i386" \
 F77="gfortran -arch i386" \
 FC="gfortran -arch i386" \
  --with-pg=/usr/local/pgsql/bin/pg_config \
  --without-macosx-framework \
  --without-sqlite3 \
  --with-python

Even though I run on a mac, I really don't want to build with the framework. 

When I attempt to run a simple Python script:

#! /usr/bin/env python
from osgeo import gdal

I get the following:

Jeff-Hamanns-MacBook-Pro:scripts hamannj$ python pytest.py 
Traceback (most recent call last):
  File "pytest.py", line 2, in <module>
    from osgeo import gdal
  File "/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/__init__.py", line 21, in <module>
    _gdal = swig_import_helper()
  File "/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/__init__.py", line 17, in swig_import_helper
    _mod = imp.load_module('_gdal', fp, pathname, description)
ImportError: dlopen(/Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so, 2): Symbol not found: _CPLDefaultErrorHandler
  Referenced from: /Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so
  Expected in: flat namespace
 in /Library/Python/2.6/site-packages/GDAL-1.7.2-py2.6-macosx-10.6-universal.egg/osgeo/_gdal.so
Jeff-Hamanns-MacBook-Pro:scripts hamannj$ 

I know *nothing* about python. 

There are a bunch of these statements:

from osgeo import gdal
from osgeo import osr
import osgeo.gdalconst as gdalc
from optparse import OptionParser, OptionGroup
import binascii
import glob
import math
import numpy
import os
import sys

in the gdal2wktraster.py file that I eventually want to run, but I don't know enough about python to diagnose, debug, and correct these problems. 

Is this a python binding problem with gdal/ogr? 

When I ./configured gdal/ogr: I got the following results:

GDAL is now configured for i386-apple-darwin10.4.0

  Installation directory:    /usr/local
  C compiler:                gcc -arch i386  -g -O2
  C++ compiler:              g++ -arch i386  -g -O2

  LIBTOOL support:           yes

  LIBZ support:              external
  GRASS support:             no
  CFITSIO support:           no
  PCRaster support:          internal
  NetCDF support:            yes
  LIBPNG support:            internal
  LIBTIFF support:           internal (BigTIFF=yes)
  LIBGEOTIFF support:        internal
  LIBJPEG support:           internal
  8/12 bit JPEG TIFF:        yes
  LIBGIF support:            internal
  OGDI support:              no
  HDF4 support:              no
  HDF5 support:              no
  Kakadu support:            no
  JasPer support:            no
  ECW support:               no
  MrSID support:             no
  MSG support:               no
  GRIB support:              yes
  EPSILON support:           no
  cURL support (wms/wcs/...):yes
  PostgreSQL support:        yes
  MySQL support:             no
  Ingres support:            no
  Xerces-C support:          no
  NAS support:               no
  Expat support:             yes
  ODBC support:              no
  PGeo support:              no
  PCIDSK support:            internal
  OCI support:               no
  GEORASTER support:         no
  SDE support:               no
  DODS support:              no
  SQLite support:            no
  SpatiaLite support:        no
  DWGdirect support          no
  INFORMIX DataBlade support:no
  GEOS support:              yes
  VFK support:               yes

  Mac OS X Framework :       no

  SWIG Bindings:          python 

  Statically link PROJ.4:    no
  enable OGR building:       yes
  enable pthread support:    no
  hide internal symbols:     no

Jeff-Hamanns-MacBook-Pro:gdal-1.7.2 hamannj$ 



Jeff Hamann
jeff.d.hamann@gmail.com



From stefano.iacovella at gmail.com  Tue Jul 27 04:03:17 2010
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Tue Jul 27 04:03:42 2010
Subject: [gdal-dev] Re: merging rasters setting opacity
In-Reply-To: <AANLkTimHjLnqDLz82vJm40qQn6JXlfq8KtWpXSZvRE0l@mail.gmail.com>
References: <AANLkTimHjLnqDLz82vJm40qQn6JXlfq8KtWpXSZvRE0l@mail.gmail.com>
Message-ID: <AANLkTinjZTKGTjAhZcuLkdfGCbrOmoFkN3ahv16bjTzw@mail.gmail.com>

I made some further experiments. I managed to get a colour-relief with
gdaldem command, setting the alpha opacity in the color_text_file.
Now I've got two files with the desired output, an hillshade and a
colour-relief.
The next step I'm wondering hot to do is to merge this two representation in
one.
Is there an equivalent form of image magik command composite in gdal?

thank you again for any hint or suggestion

Stefano


2010/7/20 Stefano Iacovella <stefano.iacovella@gmail.com>

> Dear all
>
> sorry for the newbie question. I did some experiments with gdal but I was
> unable gettint to the target.
>
> I have a DTM in ASCII GRID, I produced an hillshade relief with gdaldem
> program and saved the ouput in a tiff file.
> What I would like to do now is to merge this tiff with an other tiff
> containing the DTM with a color ramp rendering. The merge should be done
> setting the opacity of one of the two tiff file to avoid complete
> overriding. I wonder if this could be done creating a vrt dataset of the two
> files and editing the vrt file.
> Any hints?
>
> thanks for your hints
>
> stefano iacovella
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100727/634945ae/attachment-0001.html
From seth at pricepages.org  Tue Jul 27 04:08:45 2010
From: seth at pricepages.org (Seth Price)
Date: Tue Jul 27 04:08:52 2010
Subject: [gdal-dev] gdalwarp OpenCL Performance (Week 9)
Message-ID: <FF289891-098F-4931-BBA4-3FA963EF6B6C@pricepages.org>

I just finished the first performance tests of my gdalwarp OpenCL  
code. It's doing better than I expected. I used this command:
"time gdalwarp -q -r lanczos -t_srs '+proj=merc +a=6378137.0  
+b=6378137.0 +nadgrids=@null +wktext +units=m' big_test.tif  
big_test.out.tif"

I can compile the OpenCL code two different ways. I can run OpenCL  
code on the CPU and distribute it across processors by selecting the  
CPU as the device. This compiles a multithreaded version of the code.  
By selecting the GPU device, the OpenCL code compiles to run on my Mac  
Pro's graphics card, a GeForce GTX 285. To test, I used a 80 MB RGB  
raster, with 8 bits per channel.

With the original lanczos resampler code I get 5:31, with OpenCL on my  
Mac Pro's 16 cores 0:39, and with OpenCL on my GTX 285 0:10. That's a  
36x speedup.

Using cubicspline resampling, the original code takes 0:59, the OpenCL  
CPU code takes 0:13, and the OpenCL GPU code takes 0:08. Still a  
significant speedup.

And with cubic resampling, the original code takes 0:19, OpenCL CPU  
takes 0:09, and OpenCL GPU takes 0:07. Still better than twice as fast.

Basically, the OpenCL GPU code in all cases is I/O bound. The GPU is  
laughing and requesting more difficult work.

I haven't tested all different types of data and commands. If anyone  
has any samples and warping commands for testing, now would be the  
time to send them to me. I don't know of any GPU bugs in the current  
code.

Here is my current code:
http://github.com/mailseth/OpenCL-integration-for-GRASS---GDAL

~Seth
From pasta.bolognese at gmail.com  Tue Jul 27 05:33:38 2010
From: pasta.bolognese at gmail.com (Pasta Bolognese)
Date: Tue Jul 27 05:34:00 2010
Subject: [gdal-dev] Re: ogr2ogr OCI: problem loading shapes
In-Reply-To: <loom.20100726T190200-947@post.gmane.org>
References: <AANLkTik5W_=TmAfyxuYCmYcahPyEZEEM1eZaoT8noO8B@mail.gmail.com> 
	<C872F9C3.1DA0C%michael.smith@usace.army.mil>
	<AANLkTi=z7iaL5Rqdv49RCeuaONrgEKB=95SC-MNN9Rbb@mail.gmail.com> 
	<loom.20100726T190200-947@post.gmane.org>
Message-ID: <AANLkTink7vXLcpebg5q-UEqV6NAczkJZpBLxFc2k0=1i@mail.gmail.com>

so with shp2sdo there is one row that is not loaded into the table:

Record 28832: Rejected - Error on table SEBAS, column GEOM.SDO_ORDINATES.
element count is greater than maximum allowed for the column

Table SEBAS:
  28891 Rows successfully loaded.
  1 Row not loaded due to data errors.
  0 Rows not loaded because all WHEN clauses were failed.
  0 Rows not loaded because all fields were null.

shp2sdo also generates a file with that bad record:

-rw-r--r--  1 sebas sebas  17934244 2010-07-27 09:19 sebas.bad

that record 28832 is loaded into the table using ogr2ogr

that record has the validation error 13034 : Invalid data in the
SDO_ORDINATE_ARRAY in SDO_GEOMETRY object

If I delete that record (as shp2sdo does by the way) then I can create the
index...



On Mon, Jul 26, 2010 at 6:08 PM, Jukka Rahkonen
<jukka.rahkonen@mmmtike.fi>wrote:

> Sebastian E. Ovide <sebastian.ovide <at> gmail.com> writes:
>
> >
> >
> > You are right...aften done it, still getting the oringinal error due to
> errors
> in the geometries...now, If I import the same data using shp2sdo, I do NOT
> get
> any error creating the index... the shape get imported and the index is
> created... even if there are errors in the geometries...any ideas ?I know
> that I
> could use shp2sdo as it is working... but it requires extra work (something
> like
> 5 command lines)... and as I'm using gdal for importing rasters, I'd like
> to use
> it also for shapes...thanks again
>
> There must be an error in some geometry imported into Oracle with ogr2ogr.
> The
> same geometry is OK when imported with shp2sdo. I think that the only
> reasonable
> thing to do is to find that geometry, see how it looks like in the original
> data
> and when imported with shp2sdo. I believe it can also be imported till
> Oracle
> with ogr2ogr by using option -lco INDEX=OFF. In that case there should be
> enough
> information to find the reason for your issue.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100727/36b53a92/attachment.html
From sebastian.ovide at gmail.com  Tue Jul 27 08:06:35 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Tue Jul 27 08:06:58 2010
Subject: [gdal-dev] Re: ogr2ogr OCI: problem loading shapes
In-Reply-To: <20100726164105.13304.qmail@s466.sureserver.com>
References: <20100726164105.13304.qmail@s466.sureserver.com>
Message-ID: <AANLkTik1N13c1dnhJSXbCvQzjk=gd8o0CHgEp4qJCvyQ@mail.gmail.com>

Hi Ivan

Do you think you can write a bug report on GDAL track so I can take a look
> on that problem?
>
> It looks like I am going to need a copy of one of your Shapefile sets
> (.shp, .dbf, etc.) to debug that problem.
> --
>

sure,

http://trac.osgeo.org/gdal/ticket/3698

I have attach a shape file. I can be opened with ArcView... but cannot be
loaded into Oracle.

thanks

Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100727/8a2f2751/attachment.html
From ivan.lucena at pmldnet.com  Tue Jul 27 08:23:48 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue Jul 27 08:23:50 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUmU6IG9ncjJvZ3IgT0NJOiBwcm9ibGVtIGxvYWRpbmcgc2hhcGVz?=
Message-ID: <20100727122348.8129.qmail@s466.sureserver.com>

OK Sebastian,

I will take a look on that later on.

Regards,

Ivan

>  -------Original Message-------
>  From: Sebastian E. Ovide <sebastian.ovide@gmail.com>
>  To: Ivan Lucena <ivan.lucena@pmldnet.com>
>  Cc: gdal-dev <gdal-dev@lists.osgeo.org>
>  Subject: Re: [gdal-dev] Re: ogr2ogr OCI: problem loading shapes
>  Sent: Jul 27 '10 07:06
>  
>  Hi Ivan
>  
>  
>  Do you think you can write a bug report on GDAL track so I can take a look
>  on that problem?
>  
>  It looks like I am going to need a copy of one of your Shapefile sets
>  (.shp, .dbf, etc.) to debug that problem.
>  --
>  
>  sure,
>  
>  [LINK: http://trac.osgeo.org/gdal/ticket/3698]
>  http://trac.osgeo.org/gdal/ticket/3698
>  
>  I have attach a shape file. I can be opened with ArcView... but cannot be
>  loaded into Oracle.
>  
>  thanks
>  
>  Sebastian E. Ovide
From sebastian.ovide at gmail.com  Tue Jul 27 09:15:28 2010
From: sebastian.ovide at gmail.com (Sebastian E. Ovide)
Date: Tue Jul 27 09:15:50 2010
Subject: [gdal-dev] gdal_translate: PLS-00201: identifier must be declared
In-Reply-To: <4C4A8AEA.9060908@pmldnet.com>
References: <AANLkTinzmegcUsnXcznXagvwB0uEtM8977taLrS8u7_z@mail.gmail.com> 
	<4C4A8AEA.9060908@pmldnet.com>
Message-ID: <AANLkTim045OYgm0sLtYoJZiZcpyMqbsU4-WJGiY7hCXq@mail.gmail.com>

just to confirm that with single quotes it works well. Thanks

On Sat, Jul 24, 2010 at 7:40 AM, Lucena, Ivan <ivan.lucena@pmldnet.com>wrote:

> Sebastian,
>
> It should work.
>
> You are talking about the create-option INSERT, right?
>
> You would need to add double quotes around the whole options entry
> therefore you would need to use
> single quotes around the RDT name.
>
> I just found a wrong example at [gdal.org/frmt_georaster.html] and I am
> going to fix that.
>
> It should show single quotes around RDT:
>
> % gdal_translate -of georaster landsat_1.tif
> georaster:scott/tiger,,landsat,scene \
>  -co "INSERT=VALUES(10,'Main building', SDO_GEOR.INIT('RDT', 10))"
>
> Best regards,
>
> Ivan
>
> Sebastian E. Ovide wrote:
> > Hi All,
> >
> > gdal_translate works with SDO_GEOR.INIT() but it doesn't with
> > SDO_GEOR.INIT("RDT_MY_TABLE")...
> >
> > any ideas ?
> >
> > --
> > Sebastian E. Ovide
> >
> >
> >
> >
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


-- 
Sebastian E. Ovide
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100727/9c9a1e4e/attachment.html
From lancewellspring at gmail.com  Tue Jul 27 10:58:29 2010
From: lancewellspring at gmail.com (lancer611)
Date: Tue Jul 27 10:58:31 2010
Subject: [gdal-dev] GDALSuggestedWarpOutput returns negative infinity in
 padfGeoTransformOut
Message-ID: <1280242709084-5342514.post@n2.nabble.com>


I am using a program called DS Tile that was written to take a geo referenced
image and break it into tiles to be used as input for WorldWind.  I am
modifying it slightly to fit my needs.

The problem comes when the tiling is about to begin, and a call to
GDALSuggestedWarpOutput is made:
GDALSuggestedWarpOutput(m_src, m_cSTrans->GetCSTransFunc(),
m_cSTrans->GetCSTransArg(), m_mat, &sx, &sy);

m_src is a pointer to a GDALDataset that was created with the memory driver:
GDALDataset *m_src = memDriver->Create("", xSize, ySize, 3, GDT_Byte, NULL);

The geoTransform and projection fields are set to mirror an actual
geoReferenced TIF that I have.  Of course I change the geoTransform fields 0
and 3 to reflect the offset in the original TIF.  I then use rasterio to
write the section of the TIF I want to m_src.

m_cSTrans->GetCSTransFunc() returns a pointer to a function in a class that
came with DS Tile (I have not messed with it):
int CSTrans::STransform(void *arg, int dts, int n, double *x, double *y,
double *z, int *ps) {
    
	double tx, ty;
    int i;
    CSTrans *t = reinterpret_cast<CSTrans*>(arg);
    double srcMat[6];
    double dstMat[6];
	
    if (dts) {
        for (i = 0; i < 6; ++i) srcMat[i] = t->m_dstGT.m_mat[i];
        for (i = 0; i < 6; ++i) dstMat[i] = t->m_srcIGT.m_mat[i];
    } else {
        for (i = 0; i < 6; ++i) srcMat[i] = t->m_srcGT.m_mat[i];
        for (i = 0; i < 6; ++i) dstMat[i] = t->m_dstIGT.m_mat[i];
    }
    
    for (i = 0; i < n; ++i) {
        tx = x[i]; ty = y[i];
        x[i] = srcMat[0] + tx * srcMat[1] + ty * srcMat[2];
        y[i] = srcMat[3] + tx * srcMat[4] + ty * srcMat[5];
    }

	if (t->m_ata) {
		GDALApproxTransform(t->m_ata, dts, n, x, y, z, ps);
	} else {
		GDALReprojectionTransform(t->m_rta, dts, n, x, y, z, ps);
	}

    for (i = 0; i < n; ++i) {
        tx = x[i]; ty = y[i];
        x[i] = dstMat[0] + tx * dstMat[1] + ty * dstMat[2];
        y[i] = dstMat[3] + tx * dstMat[4] + ty * dstMat[5];
    }

	return '0';  
}

m_cSTrans->GetCSTransArg() returns a pointer to an instance of the CSTrans
class (which I have not messed with):
#ifndef CSTRANS_H
#define CSTRANS_H

class CSTrans {
public:
    CSTrans();
    ~CSTrans();

public:
    void* GetCSTransArg() const { return const_cast<CSTrans*>(this); }
    GDALTransformerFunc GetCSTransFunc() const { return STransform; }

public:
    void Create(const string& srcProj, const string& dstProj, double
maxError = 0.25);
    void Destroy();

public:
    void SetSrcGT(const GeoT& gt);
    void SetDstGT(const GeoT& gt);

protected:
    static int STransform(void *arg, int dts, int n, double *x, double *y,
double *z, int *ps);

public:
    GeoT m_srcGT;
    GeoT m_srcIGT;
    GeoT m_dstGT;
    GeoT m_dstIGT;
    void *m_rta;
    void *m_ata;
};

#endif // CSTRANS_H

I think you need the create function to make sense of the STransform
function:
void CSTrans::Create(const string& srcProj, const string& dstProj, double
maxError) {
	m_rta = GDALCreateReprojectionTransformer(ProjToSRS(srcProj).c_str(),
ProjToSRS(dstProj).c_str());
	
	if (maxError >= 0.001) {
		
		m_ata = GDALCreateApproxTransformer(GDALReprojectionTransform, m_rta,
maxError);
	}
}

OK, so the problem is that the output in m_mat (double [6]) is partially
incorrect.  The second field (size in lat/lon of the tiled images) is
negative infinity (1-#IND).  This causes the tiling to not even occur
because the TIF is iterated over (somewhat) according to this field.

I know this is a lot to take it, and I will answer any questions and provide
any more code that might be needed.

Thanks in advance.

Lance
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALSuggestedWarpOutput-returns-negative-infinity-in-padfGeoTransformOut-tp5342514p5342514.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From lancewellspring at gmail.com  Tue Jul 27 11:03:15 2010
From: lancewellspring at gmail.com (lancer611)
Date: Tue Jul 27 11:03:17 2010
Subject: [gdal-dev] Re: GDALSuggestedWarpOutput returns negative infinity in
 padfGeoTransformOut
In-Reply-To: <1280242709084-5342514.post@n2.nabble.com>
References: <1280242709084-5342514.post@n2.nabble.com>
Message-ID: <1280242995132-5342539.post@n2.nabble.com>


Oh I guess you need to know that GeoT is a class that acts as a wrapper for
the geoTransform double[6] parameter.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALSuggestedWarpOutput-returns-negative-infinity-in-padfGeoTransformOut-tp5342514p5342539.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Ralf.Suhr at itc-halle.de  Tue Jul 27 13:04:07 2010
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Tue Jul 27 13:05:13 2010
Subject: [gdal-dev] Chaning GML geometry source by GFS fails.
Message-ID: <201007271904.08496.Ralf.Suhr@itc-halle.de>

Hello list,

I want to import a gml with two defined geometries. As I read ogr2ogr will 
always use the last geometry.
I added one line to the gfs file to change the geometry source. But ogr2ogr 
ignore this. gdal is from svn revision 198??


the gml look like:
<gml:featureMember>
   <AX_Flurstueck>
     <position>
       <gml:Surface srsName="urn:adv:crs:ETRS89_UTM32" gml:id="KS6">
           <gml:polygonPatches><gml:PolygonPatch>
	...
     <objektkoordinaten>
       <gml:Point gml:id="KSE"><gml:pos 
srsName="urn:adv:crs:ETRS89_UTM32">476659.545 5775519.378</gml:pos>
       </gml:Point>
     </objektkoordinaten> 
     ...

and the changed gfs:
  <GMLFeatureClass>
    <Name>AX_Flurstueck</Name>
    <ElementPath>AX_Flurstueck</ElementPath>
    <GeometryType>3</GeometryType>
    <GeometryElementPath>position</GeometryElementPath>
    ...



Thanks in advance. 

Ralf
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100727/2c4b1c12/attachment.html
From lancewellspring at gmail.com  Tue Jul 27 13:21:06 2010
From: lancewellspring at gmail.com (lancer611)
Date: Tue Jul 27 13:21:07 2010
Subject: [gdal-dev] Re: GDALSuggestedWarpOutput returns negative infinity in
 padfGeoTransformOut
In-Reply-To: <1280242995132-5342539.post@n2.nabble.com>
References: <1280242709084-5342514.post@n2.nabble.com>
	<1280242995132-5342539.post@n2.nabble.com>
Message-ID: <1280251266730-5343159.post@n2.nabble.com>


I am on 32 bit Windows XP Professional.  The GDAL I am using the GDAL that
comes with FWTools 2.4.7, which is version 1.7.
-- 
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALSuggestedWarpOutput-returns-negative-infinity-in-padfGeoTransformOut-tp5342514p5343159.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Ralf.Suhr at itc-halle.de  Wed Jul 28 03:52:34 2010
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Wed Jul 28 03:52:37 2010
Subject: [gdal-dev] Chaning GML geometry source by GFS fails.
In-Reply-To: <201007271904.08496.Ralf.Suhr@itc-halle.de>
References: <201007271904.08496.Ralf.Suhr@itc-halle.de>
Message-ID: <201007280952.34142.Ralf.Suhr@itc-halle.de>

I've looked in the source code and only the NAS driver (gml derivat) has this 
problem. GFS functionality is not full in NAS implemented.

Am Dienstag 27 Juli 2010, 19:04:07 schrieb Ralf Suhr:
> Hello list,
> 
> I want to import a gml with two defined geometries. As I read ogr2ogr will
> always use the last geometry.
> I added one line to the gfs file to change the geometry source. But ogr2ogr
> ignore this. gdal is from svn revision 198??
> 
> 
> the gml look like:
> <gml:featureMember>
>    <AX_Flurstueck>
>      <position>
>        <gml:Surface srsName="urn:adv:crs:ETRS89_UTM32" gml:id="KS6">
>            <gml:polygonPatches><gml:PolygonPatch>
> 	...
>      <objektkoordinaten>
>        <gml:Point gml:id="KSE"><gml:pos
> srsName="urn:adv:crs:ETRS89_UTM32">476659.545 5775519.378</gml:pos>
>        </gml:Point>
>      </objektkoordinaten>
>      ...
> 
> and the changed gfs:
>   <GMLFeatureClass>
>     <Name>AX_Flurstueck</Name>
>     <ElementPath>AX_Flurstueck</ElementPath>
>     <GeometryType>3</GeometryType>
>     <GeometryElementPath>position</GeometryElementPath>
>     ...
> 
> 
> 
> Thanks in advance.
> 
> Ralf
From jeff at unterbahn.com  Wed Jul 28 08:06:08 2010
From: jeff at unterbahn.com (Jeffrey Warren)
Date: Wed Jul 28 08:06:09 2010
Subject: [gdal-dev] 4 point, projective warping
Message-ID: <AANLkTi=nHAdLvQSShBTCycGY2kuUYL-HyceNMJxR4XM_@mail.gmail.com>

Hi, all - I need 4-point (GCP) projective warping (
http://docs.bentley.com/en/I-RASB/irasbhelp171.html) for my very basic
rubbersheeting app at http://cartagen.org/maps (getting full-res TMS output
working). These are for aerial photographs, not scanned images.

After banging my head against a wall for a while I'm doing it in ImageMagick
then gdal_translate then gdalwarp to get a geotiff. This is a bit
inefficient. Is there just no major need for a projective warp in gdalwarp,
or has nobody ever asked?

ImageMagick refers to it as a perspective distort and it is sadly
computationally more demanding, but does not compromise GCP positioning to
find a fit given 4 corners, as does the polynomial warping. Unless I'm
missing something.

Suggestions, or am I pretty much on track?
Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100728/40faae69/attachment.html
From jeff at unterbahn.com  Wed Jul 28 08:05:05 2010
From: jeff at unterbahn.com (Jeffrey Warren)
Date: Wed Jul 28 08:13:18 2010
Subject: [gdal-dev] gdal2tiles.py cannot find EPSG:900913,
	sees only GDAL 1.6.1
Message-ID: <AANLkTimn-TxvM9diuNP+uLURozHkoTFaZhgEcHpAoqvB@mail.gmail.com>

I'm getting this error when running gdal2tiles.py with even default
parameters, on files which run fine on another separate machine:

ERROR 6: EPSG PCS/GCS code 900913 not found in EPSG support files.  Is this
a valid EPSG coordinate system?

(full error below)

I've been wandering through the cubewerks_extra.wkt definitions but am not
sure how to get GDAL to pick up the file even if I add it. My projections
seem to be in /usr/share/epsg_csv/ instead of the more standard
/usr/share/proj/epsg, which doesn't exist on my local Fedora 12 box. More to
the point, gdal2tiles.py --version returns:

GDAL 1.6.1, released 2009/05/11

despite my recent install of 1.7.2. gdalwarp and other compiled tools return
1.7.2 normally. Whereas my other box (Leopard Server, macports-based
install):

GDAL 1.7.2, released 2010/04/23

I tried upgrading gdal-python to 1.7.1 here: http://trac.osgeo.org
/gdal/ticket/3468 but got a missing header file... not sure that's the
problem in any case.


I have only a basic working knowledge of gdal, apologies if this is really
obvious.

Thanks in advance for any tips,
Jeff


Full error:

gdal2tiles.py -k -t "mestia-local" -g "googleapikey"
/home/warren/www/cartagen/public/warps/mestia-local/mestia-local-geo.tif
/home/warren/www/cartagen/public/tms/mestia-local/
ERROR 6: EPSG PCS/GCS code 900913 not found in EPSG support files.  Is this
a valid
EPSG coordinate system?
ERROR 6: No translation an empty SRS to PROJ.4 format is known.
ERROR 6: No translation an empty SRS to PROJ.4 format is known.
Traceback (most recent call last):
  File "/usr/bin/gdal2tiles.py", line 2235, in <module>
    gdal2tiles.process()
  File "/usr/bin/gdal2tiles.py", line 469, in process
    self.generate_metadata()
  File "/usr/bin/gdal2tiles.py", line 1117, in generate_metadata
    f.write( self.generate_tilemapresource())
  File "/usr/bin/gdal2tiles.py", line 1513, in generate_tilemapresource
    for z in range(self.tminz, self.tmaxz+1):
TypeError: unsupported operand type(s) for +: 'NoneType' and 'int'
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100728/53c233dc/attachment-0001.html
From jrepetto at free.fr  Wed Jul 28 09:10:24 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Wed Jul 28 09:10:30 2010
Subject: [gdal-dev] gdal2tiles.py cannot find EPSG:900913, sees only GDAL
	1.6.1
In-Reply-To: <AANLkTimn-TxvM9diuNP+uLURozHkoTFaZhgEcHpAoqvB@mail.gmail.com>
References: <AANLkTimn-TxvM9diuNP+uLURozHkoTFaZhgEcHpAoqvB@mail.gmail.com>
Message-ID: <4C502C40.7090105@free.fr>

Le 28/07/2010 14:05, Jeffrey Warren a ?crit :
> I'm getting this error when running gdal2tiles.py with even default
> parameters, on files which run fine on another separate machine:
>
> ERROR 6: EPSG PCS/GCS code 900913 not found in EPSG support files.  Is
> this a valid EPSG coordinate system?
>

No, the correct code for Google Maps is EPSG:3857.

<http://www.epsg-registry.org/report.htm?type=selection&entity=urn:ogc:def:crs:EPSG::3857&reportDetail=short&style=urn:uuid:report-style:default-with-code&style_name=OGP%20Default%20With%20Code&title=EPSG:3857>

Jean-Claude
From jeff at unterbahn.com  Wed Jul 28 09:17:23 2010
From: jeff at unterbahn.com (Jeffrey Warren)
Date: Wed Jul 28 09:17:25 2010
Subject: [gdal-dev] gdal2tiles.py cannot find EPSG:900913, sees only GDAL 
	1.6.1
In-Reply-To: <4C502C40.7090105@free.fr>
References: <AANLkTimn-TxvM9diuNP+uLURozHkoTFaZhgEcHpAoqvB@mail.gmail.com>
	<4C502C40.7090105@free.fr>
Message-ID: <AANLkTim1nGFBpeeAOq5hNncByTj490MGU2HLSBmD3Y+N@mail.gmail.com>

Of course, everyone knows that. The question is whether gdal2tiles, which
explicitly calls 900913, will run at all without that 'fake' code being
recognized by GDAL and its projection sources. And how to ensure that
gdal2tiles does in fact run.

More recent versions seem to implement 900913 to ensure this, but I cannot
get the latest stable (1.7.2) gdal to do so.

Thank you though -- sorry if I was unclear in my request.

On Wed, Jul 28, 2010 at 5:10 PM, Jean-Claude REPETTO <jrepetto@free.fr>wrote:

> Le 28/07/2010 14:05, Jeffrey Warren a ?crit :
>
>  I'm getting this error when running gdal2tiles.py with even default
>> parameters, on files which run fine on another separate machine:
>>
>> ERROR 6: EPSG PCS/GCS code 900913 not found in EPSG support files.  Is
>> this a valid EPSG coordinate system?
>>
>>
> No, the correct code for Google Maps is EPSG:3857.
>
> <
> http://www.epsg-registry.org/report.htm?type=selection&entity=urn:ogc:def:crs:EPSG::3857&reportDetail=short&style=urn:uuid:report-style:default-with-code&style_name=OGP%20Default%20With%20Code&title=EPSG:3857
> >
>
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100728/d63aa30c/attachment.html
From christopher.schmidt at nokia.com  Wed Jul 28 09:21:45 2010
From: christopher.schmidt at nokia.com (christopher.schmidt@nokia.com)
Date: Wed Jul 28 09:22:12 2010
Subject: [gdal-dev] gdal2tiles.py cannot find EPSG:900913, sees only
	GDAL	1.6.1
In-Reply-To: <4C502C40.7090105@free.fr>
References: <AANLkTimn-TxvM9diuNP+uLURozHkoTFaZhgEcHpAoqvB@mail.gmail.com>
	<4C502C40.7090105@free.fr>
Message-ID: <DCC2BC03-2840-41AB-8FF4-C0CFA69BF0D0@nokia.com>


On Jul 28, 2010, at 9:10 AM, ext Jean-Claude REPETTO wrote:

> Le 28/07/2010 14:05, Jeffrey Warren a ?crit :
>> I'm getting this error when running gdal2tiles.py with even default
>> parameters, on files which run fine on another separate machine:
>> 
>> ERROR 6: EPSG PCS/GCS code 900913 not found in EPSG support files.  Is
>> this a valid EPSG coordinate system?
>> 
> 
> No, the correct code for Google Maps is EPSG:3857.

900913 is a common alias, and one that I believe is
supported by GDAL. EPSG:3857 didn't exist when 1.6.1 
was released, afaik, so it definitely wouldn't be supported.

(Standards don't necessarily match reality.)

> <http://www.epsg-registry.org/report.htm?type=selection&entity=urn:ogc:def:crs:EPSG::3857&reportDetail=short&style=urn:uuid:report-style:default-with-code&style_name=OGP%20Default%20With%20Code&title=EPSG:3857>
> 
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From m.massing at warped-space.de  Wed Jul 28 09:45:34 2010
From: m.massing at warped-space.de (Manuel Massing)
Date: Wed Jul 28 10:05:21 2010
Subject: [gdal-dev] 4 point, projective warping
In-Reply-To: <AANLkTi=nHAdLvQSShBTCycGY2kuUYL-HyceNMJxR4XM_@mail.gmail.com>
References: <AANLkTi=nHAdLvQSShBTCycGY2kuUYL-HyceNMJxR4XM_@mail.gmail.com>
Message-ID: <201007281545.35142.m.massing@warped-space.de>

Hi Jeffrey,

> Hi, all - I need 4-point (GCP) projective warping (
> http://docs.bentley.com/en/I-RASB/irasbhelp171.html) for my very basic
> rubbersheeting app at http://cartagen.org/maps (getting full-res TMS output
> working). These are for aerial photographs, not scanned images.

to implement this programmatically using GDAL, you could supply a custom
transform callback to the gdal warper. 
Have a look at the qgis georeferencer plugin to see how a custom model can be
passed to the gdalwarper (in particular, see qgsgeoreftransfrom.{cpp,h},
where custom model fitting is implemented (e.g. helmert), and qgsimagewarper.
cpp,h}, where warper setup is handled). 

A projective transform can be simply expressed as multiplication of an 
inhomogenous coordinate vector with a 3x3 matrix (a homography).

Estimating a homography from 4 or more points is usually done by solving a set
of equations using singular value decomposition (see e.g. "Multiple View 
Geometry In Computer Vision", by Hartley and Zissermann). You should be able
to find some code for that (e.g. I guess OpenCV should be able to do that).

I've thought about implementing a projective transform in the qgis
georeferencer, so if you're interested I'll let you know when I get around to
it. 

cheers,

	Manuel
From jeff at unterbahn.com  Wed Jul 28 10:08:30 2010
From: jeff at unterbahn.com (Jeffrey Warren)
Date: Wed Jul 28 10:08:40 2010
Subject: [gdal-dev] gdal2tiles.py cannot find EPSG:900913, sees only GDAL 
	1.6.1
In-Reply-To: <DCC2BC03-2840-41AB-8FF4-C0CFA69BF0D0@nokia.com>
References: <AANLkTimn-TxvM9diuNP+uLURozHkoTFaZhgEcHpAoqvB@mail.gmail.com>
	<4C502C40.7090105@free.fr>
	<DCC2BC03-2840-41AB-8FF4-C0CFA69BF0D0@nokia.com>
Message-ID: <AANLkTi=myfyDJo57zKOvwqsibNiL9da7GJkXD_wE75pK@mail.gmail.com>

Thanks, chris - figured the 1.6.1 was the reason... is gdal2tiles' link to
GDAL via gdal-python, and if I figure out how to build the latest
gdal-python this will go away?

And if so, has anyone else had this issue with a missing header file called
swq.h?

output when I try to build gdal-python, either from source or with
easy_install:

In file included from extensions/ogr_wrap.cpp:2808:
/usr/local/include/ogr_p.h:94:17: error: swq.h: No such file or directory
In file included from extensions/ogr_wrap.cpp:2808:
/usr/local/include/ogr_p.h:105: error: 'swq_field_type' does not name a type
error: Setup script exited with error: command 'gcc' failed with exit status
1

(relevant ticket again: http://trac.osgeo.org/gdal/ticket/3468)

I'm attempting to install gdal-python from what appears to be the
gdal-python source downloads as GDAL-1.7.1.tar.gz  --- from
http://pypi.python.org/pypi/GDAL/#downloads but shouldn't it already be
installed via swig in the main gdal installation? If so, why is everything
else in the main gdal install showing 1.7.2 but gdal2tiles.py showing 1.6.1?

Jeff

On Wed, Jul 28, 2010 at 5:21 PM, christopher.schmidt@nokia.com <
christopher.schmidt@nokia.com> wrote:

>
> On Jul 28, 2010, at 9:10 AM, ext Jean-Claude REPETTO wrote:
>
> > Le 28/07/2010 14:05, Jeffrey Warren a ?crit :
> >> I'm getting this error when running gdal2tiles.py with even default
> >> parameters, on files which run fine on another separate machine:
> >>
> >> ERROR 6: EPSG PCS/GCS code 900913 not found in EPSG support files.  Is
> >> this a valid EPSG coordinate system?
> >>
> >
> > No, the correct code for Google Maps is EPSG:3857.
>
> 900913 is a common alias, and one that I believe is
> supported by GDAL. EPSG:3857 didn't exist when 1.6.1
> was released, afaik, so it definitely wouldn't be supported.
>
> (Standards don't necessarily match reality.)
>
> > <
> http://www.epsg-registry.org/report.htm?type=selection&entity=urn:ogc:def:crs:EPSG::3857&reportDetail=short&style=urn:uuid:report-style:default-with-code&style_name=OGP%20Default%20With%20Code&title=EPSG:3857
> >
> >
> > Jean-Claude
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100728/2c536fcc/attachment.html
From woodbri at swoodbridge.com  Wed Jul 28 16:18:26 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Jul 28 16:20:22 2010
Subject: [gdal-dev] [Fwd: [mapserver-dev] pre-RFC - Add an HTTP request data
 provider to	mapserver]
Message-ID: <4C509092.90909@swoodbridge.com>

Hi devs,

I posted this on the mapserver the list and the general response was 
can't this be done with OGR?

Can OGR consume issue and consume some kind of HTTP GET request? How?
Would it make sense to extend the file read capability to be able to 
URL? Would it then be easy to template the URL in a mapserver layer?

I can probably get some funding for this if someone is interested and 
has time to make something happen relatively quickly.

Please contact me.

-Steve W

-------- Original Message --------
Subject: [mapserver-dev] pre-RFC - Add an HTTP request data provider to 
mapserver
Date: Tue, 27 Jul 2010 16:13:38 -0400
From: Stephen Woodbridge <woodbri@swoodbridge.com>
To: mapserver-dev <mapserver-dev@lists.osgeo.org>

Hi Mapserver Devs,

I am interested in getting input and interest in doing some possibly or
partially funded development of the following.

USE CASE:

User has spatial data stored in a proprietary system, database, search
engine, whatever. They want to pull that data into mapserver for
rendering, querying, etc like any other data layer. They can access that
data via PHP and possibly other tools. They would like to have a generic
HTTP data provider LAYER added to mapserver where mapserver would make
URL requests based on some defined template URL and the URL would return
data in some  well know format like GeoJSON, GPX, KML, others.

The LAYER definition would look something like:

LAYER
   NAME "mylines"
   CONNECTIONTYPE HTTP
   CONNECTIONFORMAT GEOJSON|GPX|KML|...
   DATA "http://localhost/mydata.php"
   TYPE LINE
   ...
END

or maybe:

LAYER
   NAME "mylines"
   CONNECTIONTYPE HTTP/(GEOJSON|GPX|KML|...)
   DATA "http://localhost/mydata.php[?optional=user_args&...]"
   TYPE LINE
   ...
END

Mapserver would add well defined arguments to the URL like:

MODE=render|query|etc      - might be needed to set context of request
BBOX=xmin,ymin,xmax,ymax   - area of interest
FILTER=...                 - this could be a filter string of some kind
ATTRS=gid,color,name,...   - list of expected/required? attributes
TYPE=POINT|LINE|POLYGON    - type of spatial data expected
FORMAT=GEOJSON|GPX|KML|... - format to respond in
...                        - others as required


The idea here is to forward the data request to the URL and it would
validate the request and throw an error or handle the request and return
the results as expected. Mapserver would then handle this like any other
LAYER.

BENEFITS:

In general this opens up mapserver to easily be glued into any data
source by writing an small external adapter in PHP, Perl or anything
thing that can be queried via a URL that can conform to whatever
protocol we require for mapserver.

Much of the code already exists in mapserver for this, it is just
getting reused as a new data provider.

ISSUES:

Other than the fact this this will not be the fastest data provider
available, I can not think of any major one.

FUNDING:

I may be able to get some funding for this if we can get it into 6.0 and
back ported to 5.6 even if it is not released on 5.6. Please contact me
off list if you are interested in developing this. Currently on one
format would need to be supported.

COMMENTS:

Please toss in your 2 cents on this. Raise issues, etc. The idea is to
make this GENERIC so it can by used by anyone.
_______________________________________________
mapserver-dev mailing list
mapserver-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/mapserver-dev
From mitchelljj98 at gmail.com  Wed Jul 28 18:45:25 2010
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Jul 28 18:45:27 2010
Subject: [gdal-dev] Does anyone know of a utility that derives the EPSG from
	the contents of a .prj (projection) file?
Message-ID: <AANLkTim4uKmJEa3+xZZNGRtyp7fVeLqrgiXPQUBHF+hg@mail.gmail.com>

Hi,

Does anyone know of a utility that derives the EPSG from the contents
of a .prj (projection) file?

Thanks,

John

-- 
John J. Mitchell
From hobu.inc at gmail.com  Wed Jul 28 20:51:40 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Jul 28 20:51:46 2010
Subject: [gdal-dev] Does anyone know of a utility that derives the EPSG
	from the contents of a .prj (projection) file?
In-Reply-To: <AANLkTim4uKmJEa3+xZZNGRtyp7fVeLqrgiXPQUBHF+hg@mail.gmail.com>
References: <AANLkTim4uKmJEa3+xZZNGRtyp7fVeLqrgiXPQUBHF+hg@mail.gmail.com>
Message-ID: <2782E7EC-B8B3-4DD5-AD3C-6AC6585EDD73@gmail.com>

http://prj2epsg.org/search can do this, but it doesn't appear that it's up just now.  


On Jul 28, 2010, at 5:45 PM, John Mitchell wrote:

> Hi,
> 
> Does anyone know of a utility that derives the EPSG from the contents
> of a .prj (projection) file?
> 
> Thanks,
> 
> John
> 
> -- 
> John J. Mitchell
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From brett.walker at geometryit.com  Thu Jul 29 02:50:43 2010
From: brett.walker at geometryit.com (Brett Walker)
Date: Thu Jul 29 02:51:54 2010
Subject: [gdal-dev] Trouble with gdal2tiles.py
Message-ID: <4B95BC7335A13A42AD0D23462F91AE6F59662707B1@echo.geometryit.com>

I'm trying to produce a tile matrix set from geocoded tiffs using gdal2tiles.py but I am having trouble with the last step in  the process.

As an example I have a BSB file from NOAA which is a navigational map of Lake Pend Oreille in Idaho. The map has a SRS of WGS84 and a Mercator projection.

I initially translate the file from BSB format to GTiff format using the following command:

> gdal_translate -of GTiff noaa\18554_1.kap noaa.tif

I can view this GTiff file using Paint Shop Pro quite fine. I then translate the file from GTiff format to VRT format using the following command:

> gdal_translate -of vrt -expand rgba noaa\noaa.tif noaa\noaa.vrt

I then try to generate a tile matrix set using the following command:

> gdal2tiles.py noaa\noaa.vrt noaa

But get the follwoing error:

> ERROR 1: failed to load NAD27-83 correction file
> ERROR 1: GDALSuggestedWarpOutput() failed because the passed
> transformer failed.
> usage: Usage: gdal2tiles.py [options] input_file(s) [output]
>
> gdal2tiles.py: error: Size of the pixel in the output differ for X and Y axes.
Am I missing something?

My system is Windows Vista (32-bit). I'm using GDAL v1.6.0 win32 binary, GDAL v1.6.0 python package, PROJ4 v4.4.6 win32 binary, NumPy v1.2.1 for win32 and Python v2.4.1
I have set all the appropriate system variables and copied files to approprate locations. This was done following the guidelinse at http://www.gis.usu.edu/~chrisg/python/2009/docs/gdal_win.pdf except that I omitted steps 3f and 3g.

Hope you can help.
Brett

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100729/bf9c2fc4/attachment.html
From wonder.sk at gmail.com  Thu Jul 29 04:41:09 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Thu Jul 29 04:41:16 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
Message-ID: <AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>

On Wed, Jul 21, 2010 at 6:59 PM, Martin Dobias <wonder.sk@gmail.com> wrote:
>
> So, in case there will be no further comments, I'll update the RFC to
> match the API you've proposed.

Hi Frank,

I've updated the RFC to reflect your suggestions:

http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields

Given that there has been no further discussion, can we mark the RFC
as proposed and start the voting?

Regards
Martin
From dmorissette at mapgears.com  Thu Jul 29 09:15:26 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Jul 29 09:15:32 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>	<4C47081A.60205@pobox.com>	<AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
	<AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>
Message-ID: <4C517EEE.7040306@mapgears.com>

Martin Dobias wrote:
> 
> I've updated the RFC to reflect your suggestions:
> 
> http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields
> 
> Given that there has been no further discussion, can we mark the RFC
> as proposed and start the voting?
> 

Sorry if this comment comes late, but I didn't realize until now that
the SetIgnoredFields() suggestion was the preferred choice in the end.

Personally I find that SetIgnoredFields() is less natural and more
error-prone than the original proposed SetDesiredFields(), so I would
still prefer SetDesiredFields() even if it took me a bit of time to get
used to the way it works in the beginning.

If it was my RFC, I would have gone with a

virtual OGRErr OGRLayer::SelectFields( const char **papszFields );

which would work more or less like a SQL SELECT... and yes, you would
need to specify OGR_GEOMETRY and OGR_STYLE explicitly if you want them,
but as long as that's well documented that should not be a big deal
(users of PostGIS always have to explicitly select the_geom in their
queries and that doesn't seem to be a problem for them).

My 0.02$

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From wonder.sk at gmail.com  Thu Jul 29 09:41:51 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Thu Jul 29 09:41:54 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <4C517EEE.7040306@mapgears.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
	<AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>
	<4C517EEE.7040306@mapgears.com>
Message-ID: <AANLkTi=hE1doLMR_aQ77Ds04_vLxW642=z-cDdhAbtc2@mail.gmail.com>

On Thu, Jul 29, 2010 at 3:15 PM, Daniel Morissette
<dmorissette@mapgears.com> wrote:
> Martin Dobias wrote:
>>
>> I've updated the RFC to reflect your suggestions:
>>
>> http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields
>>
>> Given that there has been no further discussion, can we mark the RFC
>> as proposed and start the voting?
>>
>
> Sorry if this comment comes late, but I didn't realize until now that
> the SetIgnoredFields() suggestion was the preferred choice in the end.
>
> Personally I find that SetIgnoredFields() is less natural and more
> error-prone than the original proposed SetDesiredFields(), so I would
> still prefer SetDesiredFields() even if it took me a bit of time to get
> used to the way it works in the beginning.
>
> If it was my RFC, I would have gone with a
>
> virtual OGRErr OGRLayer::SelectFields( const char **papszFields );
>
> which would work more or less like a SQL SELECT... and yes, you would
> need to specify OGR_GEOMETRY and OGR_STYLE explicitly if you want them,
> but as long as that's well documented that should not be a big deal
> (users of PostGIS always have to explicitly select the_geom in their
> queries and that doesn't seem to be a problem for them).

Hi Daniel

I don't mind either solution - either SelectFields or SetIgnoredFields.

But it is valid point that having to specify OGR_GEOMETRY and
OGR_STYLE explicit shouldn't hurt anyone (given that the fact will be
documented properly) and it is more "natural" to list fields the
clients needs instead of listing ones to be ignored.

Another reason for going with SelectFields instead of SetIgnoredFields
might be that in case a new special field OGR_FOO will be introduced
in future version, it will be ignored implicitly when using
SelectFields, while with SetIgnoredFields the client will have to
explicitly put it into the list.

Regards
Martin
From warmerdam at pobox.com  Thu Jul 29 09:51:06 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jul 29 09:51:13 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <AANLkTi=hE1doLMR_aQ77Ds04_vLxW642=z-cDdhAbtc2@mail.gmail.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
	<AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>
	<4C517EEE.7040306@mapgears.com>
	<AANLkTi=hE1doLMR_aQ77Ds04_vLxW642=z-cDdhAbtc2@mail.gmail.com>
Message-ID: <4C51874A.4010504@pobox.com>

Martin Dobias wrote:
> Another reason for going with SelectFields instead of SetIgnoredFields
> might be that in case a new special field OGR_FOO will be introduced
> in future version, it will be ignored implicitly when using
> SelectFields, while with SetIgnoredFields the client will have to
> explicitly put it into the list.

Martin / Daniel,

I would have seen this exactly the other way around!  I would prefer
the default is that new "special fields" come through and only be
ignored if requested specially.   What if it was determined at some
point that fetching the real FID was sometimes expensive and that in
cases where it does not matter we would like to be able to skip that.
Should we then start dropping the FID for everyone who has ever used
SelectFields() without knowing that some day FID would become optional?

I can live with SelectFields(), but to me it is an approach at odds
with trying to ensure backwards/forwards compatability for applications.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Thu Jul 29 12:49:59 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jul 29 12:50:09 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
	<AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>
Message-ID: <AANLkTim3OCJbQ7PpVxWX6n59gLmw9UCbHAfzECv2+nTr@mail.gmail.com>

Martin,

I didn't follow all conclusions made earlier in this thread, but I don't
think it makes much sense to enable/disable the special fields since those
are derived from the attributes of the feature instead of fetching the
values physically from the data source. For example OGR_STYLE corresponds to
OGRFeature::GetStyleString() which can provide a meaningful value even if
the styles are not handled/supported by a particular driver.

Assuming we only deal with the physical attributes it seems to me more
reasonable to store a flag in OGRFieldDefn which could be set individually.
In this regard each driver would do something like:

for( int iField = 0; iField < poDefn->GetFieldCount(); iField++ )
{
  if (poDefn->GetFieldDefn(iField)->IsIgnored())
    continue;

  // fetch field
}



This would eliminate the requirement to maintain a separate array of the
ignored/desired fields.


Best regards,

Tamas




2010/7/29 Martin Dobias <wonder.sk@gmail.com>

> On Wed, Jul 21, 2010 at 6:59 PM, Martin Dobias <wonder.sk@gmail.com>
> wrote:
> >
> > So, in case there will be no further comments, I'll update the RFC to
> > match the API you've proposed.
>
> Hi Frank,
>
> I've updated the RFC to reflect your suggestions:
>
> http://trac.osgeo.org/gdal/wiki/rfc29_desired_fields
>
> Given that there has been no further discussion, can we mark the RFC
> as proposed and start the voting?
>
> Regards
> Martin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100729/13035bab/attachment.html
From warmerdam at pobox.com  Thu Jul 29 13:07:47 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jul 29 13:07:54 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <AANLkTim3OCJbQ7PpVxWX6n59gLmw9UCbHAfzECv2+nTr@mail.gmail.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
	<AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>
	<AANLkTim3OCJbQ7PpVxWX6n59gLmw9UCbHAfzECv2+nTr@mail.gmail.com>
Message-ID: <4C51B563.6040709@pobox.com>

Tamas Szekeres wrote:
> Martin,
> 
> I didn't follow all conclusions made earlier in this thread, but I don't 
> think it makes much sense to enable/disable the special fields since 
> those are derived from the attributes of the feature instead of fetching 
> the values physically from the data source. For example OGR_STYLE 
> corresponds to OGRFeature::GetStyleString() which can provide a 
> meaningful value even if the styles are not handled/supported by a 
> particular driver.

Tamas,

Geometry is generally derived from the physical data source, and knowing
that it can be ommitted can save substantial io and processing.  I must
confess this is less obvious with regard to styles.  I can *imagine*
styles being expensive to collect and form in some cases but I can't
think of any existing driver collecting the style string is particularly
expensive.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From christopher.schmidt at nokia.com  Thu Jul 29 13:09:37 2010
From: christopher.schmidt at nokia.com (christopher.schmidt@nokia.com)
Date: Thu Jul 29 13:09:51 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <4C51B563.6040709@pobox.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
	<AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>
	<AANLkTim3OCJbQ7PpVxWX6n59gLmw9UCbHAfzECv2+nTr@mail.gmail.com>
	<4C51B563.6040709@pobox.com>
Message-ID: <5331B24C-AB6C-4939-98E4-CBD8B1F6680E@nokia.com>


On Jul 29, 2010, at 1:07 PM, ext Frank Warmerdam wrote:

> Tamas Szekeres wrote:
>> Martin,
>> 
>> I didn't follow all conclusions made earlier in this thread, but I don't 
>> think it makes much sense to enable/disable the special fields since 
>> those are derived from the attributes of the feature instead of fetching 
>> the values physically from the data source. For example OGR_STYLE 
>> corresponds to OGRFeature::GetStyleString() which can provide a 
>> meaningful value even if the styles are not handled/supported by a 
>> particular driver.
> 
> Tamas,
> 
> Geometry is generally derived from the physical data source, and knowing
> that it can be ommitted can save substantial io and processing.  I must
> confess this is less obvious with regard to styles.  I can *imagine*
> styles being expensive to collect and form in some cases but I can't
> think of any existing driver collecting the style string is particularly
> expensive.

One that occurs to me is the KML driver, where styles may exist seperately
from the features; parsing the style KML (and applying all the cascading
stylesheets, etc.) could be expensive, and excluding it could save
some processing time in theory.

In practice, I don't know whether this is the case for the current driver.

-- Chris
From gregcoats at mac.com  Thu Jul 29 14:00:53 2010
From: gregcoats at mac.com (Greg Coats)
Date: Thu Jul 29 14:00:58 2010
Subject: [gdal-dev] Trouble with gdal2tiles.py
In-Reply-To: <4B95BC7335A13A42AD0D23462F91AE6F59662707B1@echo.geometryit.com>
References: <4B95BC7335A13A42AD0D23462F91AE6F59662707B1@echo.geometryit.com>
Message-ID: <21FEA2E1-28E3-40AC-AA06-0CD37E656133@mac.com>

First, instead of using GDAL 1.6.0 from December 2008, why not use GDAL 1.7.2 from April 2010?
Second, since your objective is to create a tiled GeoTIFF, you can do that with one gdal_translate command.
$ gdal_translate --version
GDAL 1.7.2, released 2010/04/23
$ gdal_translate -of GTiff -ot Byte -co Compress=NONE \
-co TILED=YES -co BLOCKXSIZE=256 -co BLOCKXSIZE=256 \
18stj940125.if 18stj940125_gdal_translate.tif
Input file size is 5000, 5000
0...10...20...30...40...50...60...70...80...90...100 - done.
Greg

On Jul 29, 2010, at 2:50 AM, Brett Walker wrote:

> I?m trying to produce a tile matrix set from geocoded tiffs using gdal2tiles.py but I am having trouble with the last step in  the process.
>  
> As an example I have a BSB file from NOAA which is a navigational map of Lake Pend Oreille in Idaho. The map has a SRS of WGS84 and a Mercator projection.
>  
> I initially translate the file from BSB format to GTiff format using the following command:
>  
> > gdal_translate -of GTiff noaa\18554_1.kap noaa.tif
>  
> I can view this GTiff file using Paint Shop Pro quite fine. I then translate the file from GTiff format to VRT format using the following command:
>  
> > gdal_translate -of vrt ?expand rgba noaa\noaa.tif noaa\noaa.vrt
>  
> I then try to generate a tile matrix set using the following command:
>  
> > gdal2tiles.py noaa\noaa.vrt noaa
>  
> But get the follwoing error:
>  
> > ERROR 1: failed to load NAD27-83 correction file
> > ERROR 1: GDALSuggestedWarpOutput() failed because the passed
> > transformer failed.
> > usage: Usage: gdal2tiles.py [options] input_file(s) [output]
> > 
> > gdal2tiles.py: error: Size of the pixel in the output differ for X and Y axes.
> 
> Am I missing something?
>  
> My system is Windows Vista (32-bit). I?m using GDAL v1.6.0 win32 binary, GDAL v1.6.0 python package, PROJ4 v4.4.6 win32 binary, NumPy v1.2.1 for win32 and Python v2.4.1
> I have set all the appropriate system variables and copied files to approprate locations. This was done following the guidelinse athttp://www.gis.usu.edu/~chrisg/python/2009/docs/gdal_win.pdf except that I omitted steps 3f and 3g.
>  
> Hope you can help.
> Brett
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100729/7e9c3b9b/attachment-0001.html
From szekerest at gmail.com  Thu Jul 29 15:10:12 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jul 29 15:10:32 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <4C51B563.6040709@pobox.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
	<AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>
	<AANLkTim3OCJbQ7PpVxWX6n59gLmw9UCbHAfzECv2+nTr@mail.gmail.com>
	<4C51B563.6040709@pobox.com>
Message-ID: <AANLkTinphLUaSQY7mjXh0QB6edLSfTAMUSvVGPcxGezw@mail.gmail.com>

Frank,

If you refer to the OGR_GEOMETRY, OGR_GEOM_WKT, OGR_GEOM_AREA special
fields, both return a meaningful value (ie. an empty string) when the
geometry is null. In this regard it would be enough to disable only the
geometry column of that layer. However since the geometry column is not
necessarily be added to the field collection at OGRFeatureDefn, disabling
the geometry column might probably be set at OGRFeatureDefn while the others
at OGRFieldDefn in my suggested approach:


for( int iField = 0; iField < poDefn->GetFieldCount(); iField++ )
{
  if (poDefn->GetFieldDefn(iField)->IsIgnored())
    continue;

  // fetch field
}

if (!poDefn->IsGeometryIgnored())
{
  // fetch geometry field
}



Best regards,

Tamas



2010/7/29 Frank Warmerdam <warmerdam@pobox.com>

> Tamas Szekeres wrote:
>
>> Martin,
>>
>> I didn't follow all conclusions made earlier in this thread, but I don't
>> think it makes much sense to enable/disable the special fields since those
>> are derived from the attributes of the feature instead of fetching the
>> values physically from the data source. For example OGR_STYLE corresponds to
>> OGRFeature::GetStyleString() which can provide a meaningful value even if
>> the styles are not handled/supported by a particular driver.
>>
>
> Tamas,
>
> Geometry is generally derived from the physical data source, and knowing
> that it can be ommitted can save substantial io and processing.  I must
> confess this is less obvious with regard to styles.  I can *imagine*
> styles being expensive to collect and form in some cases but I can't
> think of any existing driver collecting the style string is particularly
> expensive.
>
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100729/e228c838/attachment.html
From jukka.rahkonen at mmmtike.fi  Thu Jul 29 15:36:09 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Jul 29 15:36:22 2010
Subject: [gdal-dev] Re: Trouble with gdal2tiles.py
References: <4B95BC7335A13A42AD0D23462F91AE6F59662707B1@echo.geometryit.com>
	<21FEA2E1-28E3-40AC-AA06-0CD37E656133@mac.com>
Message-ID: <loom.20100729T213238-33@post.gmane.org>

Greg Coats <gregcoats <at> mac.com> writes:

> 
> 
> First, instead of using GDAL 1.6.0 from December 2008, why not use GDAL 1.7.2
from April 2010?
> Second, since your objective is to create a tiled GeoTIFF, you can do that
with one gdal_translate command.
> 
> $ gdal_translate --version
> GDAL 1.7.2, released 2010/04/23
> $ gdal_translate -of GTiff -ot Byte -co Compress=NONE \
> -co TILED=YES -co BLOCKXSIZE=256 -co BLOCKXSIZE=256 \
> 18stj940125.if 18stj940125_gdal_translate.tif
> Input file size is 5000, 5000
> 0...10...20...30...40...50...60...70...80...90...100 - done.

Gdal2tiles is creating a tile directory system and thus it is not the same thing
as tiled GeoTIFF.  Using new binaries is a good suggestion.  There is also a
standalone program called MapTiler that gives a nice GUI for gdal2tiles.

-Jukka Rahkonen-



From szekerest at gmail.com  Thu Jul 29 15:38:30 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jul 29 15:38:34 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <5331B24C-AB6C-4939-98E4-CBD8B1F6680E@nokia.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
	<AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>
	<AANLkTim3OCJbQ7PpVxWX6n59gLmw9UCbHAfzECv2+nTr@mail.gmail.com>
	<4C51B563.6040709@pobox.com>
	<5331B24C-AB6C-4939-98E4-CBD8B1F6680E@nokia.com>
Message-ID: <AANLkTimFo2pi8bN4d=KJWdmZjLFmRFMf+wTS0X9gYh13@mail.gmail.com>

>
> One that occurs to me is the KML driver, where styles may exist seperately
> from the features; parsing the style KML (and applying all the cascading
> stylesheets, etc.) could be expensive, and excluding it could save
> some processing time in theory.
>
> In practice, I don't know whether this is the case for the current driver.
>
>
>
Chris,


As far as I can see the OGR KML driver doesn't handle the feature style this
way (while to would indeed be a good addition to expose the KML style as OGR
style). However your requirement may be valid to disable fetching the
feature style from a data source. I would prefer particular enable/disable
methods for each entity regardless of how many special fields are bound to
this entity, like using  OGRFeatureDefn::EnableGeometryColumn(bool)  and
OGRFeatureDefn::EnableFeatureStyle(bool) would be sufficient.

In particular EnableGeometryColumn(false) would implicitly disable each
OGR_GEOMETRY, OGR_GEOM_WKT, OGR_GEOM_AREA mentioned before which are all
derived from the same OGRGeometry of the feature.



Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100729/edc2c64c/attachment.html
From kfw4 at cornell.edu  Thu Jul 29 14:28:01 2010
From: kfw4 at cornell.edu (Kevin F Webb)
Date: Thu Jul 29 16:20:38 2010
Subject: [gdal-dev] Memory leak from GDALRasterIO
Message-ID: <31FBEB7D5D344A47BB76A65BD8ED35A9234D09C500@MBXC.exchange.cornell.edu>

Good day!



I am experiencing a memory leak from looped calls to GDALRasterIO(). It may be something I am doing improperly
because I use/call RasterIO() in a C++ program that runs leak free.



I "migrated" the C++ code to the GDAL C API so that I can integrate some really old C code downstream from the GDALRasterIO() call.



The leak was observed on v1.5.2, so I upgraded to 1.7.2 and am experiencing the same effect.



Are there special options or considerations when compiling C code against the GDAL library?



Any suggestions?



KFW



==29880== 736,992 bytes in 10,236 blocks are possibly lost in loss record 1,122 of 1,126

==29880==    at 0x4A0666E: operator new(unsigned long) (vg_replace_malloc.c:220)

==29880==    by 0x50256FA: GDALRasterBand::GetLockedBlockRef(int, int, int) (gdalrasterband.cpp:1230)

==29880==    by 0x5035C94: GDALRasterBand::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int, GDALDataType, int, int) (rasteri\

o.cpp:228)

==29880==    by 0x40CD44: main (fragstatCutter.c:254)

==29880==

==29880== 3,244,032 bytes in 99 blocks are possibly lost in loss record 1,123 of 1,126

==29880==    at 0x4A05E1C: malloc (vg_replace_malloc.c:195)

==29880==    by 0x50255E6: GDALRasterBand::AdoptBlock(int, int, GDALRasterBlock*) (gdalrasterband.cpp:820)

==29880==    by 0x5025732: GDALRasterBand::GetLockedBlockRef(int, int, int) (gdalrasterband.cpp:1242)

==29880==    by 0x5035C94: GDALRasterBand::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int, GDALDataType, int, int) (rasteri\

o.cpp:228)

==29880==    by 0x40CD44: main (fragstatCutter.c:254)

==29880==

==29880== 14,709,648 bytes in 1 blocks are possibly lost in loss record 1,124 of 1,126

==29880==    at 0x4A05E1C: malloc (vg_replace_malloc.c:195)

==29880==    by 0x5051927: VSIMalloc2 (cpl_vsisimple.cpp:622)

==29880==    by 0x4EF9837: HFABand::LoadExternalBlockInfo() (hfaband.cpp:406)

==29880==    by 0x4EF9C0E: HFABand::LoadBlockInfo() (hfaband.cpp:292)

==29880==    by 0x4EFA1B7: HFABand::GetRasterBlock(int, int, void*, int) (hfaband.cpp:1029)

==29880==    by 0x4EFD85F: HFARasterBand::IReadBlock(int, int, void*) (hfadataset.cpp:966)

==29880==    by 0x5025756: GDALRasterBand::GetLockedBlockRef(int, int, int) (gdalrasterband.cpp:1249)

==29880==    by 0x5035C94: GDALRasterBand::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int, GDALDataType, int, int) (rasteri\

o.cpp:228)

==29880==    by 0x40CD44: main (fragstatCutter.c:254)

==29880==

==29880== 41,930,752 bytes in 10,237 blocks are possibly lost in loss record 1,125 of 1,126

==29880==    at 0x4A05E1C: malloc (vg_replace_malloc.c:195)

==29880==    by 0x50288BF: GDALRasterBlock::Internalize() (gdalrasterblock.cpp:477)

==29880==    by 0x502571A: GDALRasterBand::GetLockedBlockRef(int, int, int) (gdalrasterband.cpp:1235)

==29880==    by 0x5035C94: GDALRasterBand::IRasterIO(GDALRWFlag, int, int, int, int, void*, int, int, GDALDataType, int, int) (rasteri\

o.cpp:228)

==29880==    by 0x40CD44: main (fragstatCutter.c:254)

==29880==

==29880== LEAK SUMMARY:

==29880==    definitely lost: 0 bytes in 0 blocks

==29880==    indirectly lost: 0 bytes in 0 blocks

==29880==      possibly lost: 60,673,946 bytes in 21,287 blocks

==29880==    still reachable: 4,295,148,058 bytes in 1,357 blocks

==29880==         suppressed: 0 bytes in 0 blocks

==29880== Reachable blocks (those to which a pointer was found) are not shown.

==29880== To see them, rerun with: --leak-check=full --show-reachable=yes ==29880==

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100729/746c3f61/attachment-0001.html
From warmerdam at pobox.com  Thu Jul 29 16:34:48 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jul 29 16:34:54 2010
Subject: [gdal-dev] Memory leak from GDALRasterIO
In-Reply-To: <31FBEB7D5D344A47BB76A65BD8ED35A9234D09C500@MBXC.exchange.cornell.edu>
References: <31FBEB7D5D344A47BB76A65BD8ED35A9234D09C500@MBXC.exchange.cornell.edu>
Message-ID: <4C51E5E8.1020805@pobox.com>

Kevin F Webb wrote:
> Good day!
> 
>  
> 
> I am experiencing a memory leak from looped calls to GDALRasterIO(). It 
> may be something I am doing improperly
> because I use/call RasterIO() in a C++ program that runs leak free.
> 
>  
> 
> I "migrated" the C++ code to the GDAL C API so that I can integrate some 
> really old C code downstream from the GDALRasterIO() call.
> 
>  
> 
> The leak was observed on v1.5.2, so I upgraded to 1.7.2 and am 
> experiencing the same effect.
> 
>  
> 
> Are there special options or considerations when compiling C code 
> against the GDAL library?

Kevin,

You haven't shown your code, but I suspect you aren't closing the
datasource and so the block cache isn't getting cleaned up.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From matt.wilkie at gov.yk.ca  Thu Jul 29 17:16:24 2010
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Thu Jul 29 17:16:31 2010
Subject: [gdal-dev] [off-topic] public beta for GIS Stack Exchange
Message-ID: <4C51EFA8.6040805@gov.yk.ca>

Hello Folks,

The vendor neutral GIS Q&A site based on the Stack Exchange platform I 
wrote about last month 
<http://osgeo-org.1803224.n2.nabble.com/gdal-dev-off-topic-Help-build-GIS-specific-Stack-Exchange-td5248739.html#a5248739> 
is now open for public beta:

*http://gis.stackexchange.com/*


cheers,

-- 
matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From bontepaarden at gmail.com  Thu Jul 29 18:25:30 2010
From: bontepaarden at gmail.com (Paul Meems)
Date: Thu Jul 29 18:25:52 2010
Subject: [gdal-dev] Compiled gdal.lib v1.7.2 ==> doubled file size
Message-ID: <AANLkTimJNx8b9P7ybSfM7F58De4fKx4yUtcK2O=g7JU2@mail.gmail.com>

I've just compiled v1.7.2 of GDAL with VS2010, using an almost identical
makefile as before with v1.7.1 (compiled with VS2008).

The file size of the v1.7.1 lib file is 78MB and the lib file of v1.7.2 is
138MB.

That is almost twice the file size? Is that normal or did I miss a setting?

Thanks,

Paul Meems
The Netherlands
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100730/0bd9cea9/attachment.html
From szekerest at gmail.com  Thu Jul 29 18:36:57 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jul 29 18:36:59 2010
Subject: [gdal-dev] Compiled gdal.lib v1.7.2 ==> doubled file size
In-Reply-To: <AANLkTimJNx8b9P7ybSfM7F58De4fKx4yUtcK2O=g7JU2@mail.gmail.com>
References: <AANLkTimJNx8b9P7ybSfM7F58De4fKx4yUtcK2O=g7JU2@mail.gmail.com>
Message-ID: <AANLkTik9=Pa1WWg=2k-zq+eKd723eUg21m-f2eTbjupH@mail.gmail.com>

Yes it's possible. And if you compile the same for x64 it results even
larger files. But why is this important?

Best regards,

Tamas



2010/7/30 Paul Meems <bontepaarden@gmail.com>

> I've just compiled v1.7.2 of GDAL with VS2010, using an almost identical
> makefile as before with v1.7.1 (compiled with VS2008).
>
> The file size of the v1.7.1 lib file is 78MB and the lib file of v1.7.2 is
> 138MB.
>
> That is almost twice the file size? Is that normal or did I miss a setting?
>
> Thanks,
>
> Paul Meems
> The Netherlands
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100730/c90b7315/attachment.html
From weixj2003ld at 163.com  Thu Jul 29 23:14:45 2010
From: weixj2003ld at 163.com (=?gbk?B?uMrL4KGjy7zUtg==?=)
Date: Thu Jul 29 23:29:51 2010
Subject: [gdal-dev] the format of satellite  picture
Message-ID: <68976bd2.1175f.12a21583c91.Coremail.weixj2003ld@163.com>

I know that one of the the formats of satellite picture is geotiff(its extention is .tif ,and GDAL can read coordination from it ),could you tell me other formats? GDAL can read info from it?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100730/6e5f5642/attachment.html
From ivan.lucena at pmldnet.com  Thu Jul 29 23:46:39 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu Jul 29 23:46:42 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gdGhlIGZvcm1hdCBvZiBzYXRlbGxpdGUgcGljdHVyZQ==?=
Message-ID: <20100730034639.32415.qmail@s466.sureserver.com>

Sure. On GDAL website there is a link to supported format [1], from there you are going to find several raster formats. Some of those formats are used by satellite data provider to deliver remote sense images, some are software specific formats, some are DBMS type extensions, some are desktop and website picture format. And yes, GDAL can read the geographic coordinates from those raster formats. 

Does it answer you question?

[1] http://gdal.org/formats_list.html

Best regards,

Ivan

>  -------Original Message-------
>  From:  <weixj2003ld@163.com>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] the format of satellite picture
>  Sent: Jul 29 '10 22:14
>  
>  I know that one of the the formats of satellite picture is geotiff(its
>  extention is .tif ,and GDAL can read coordination from it ),could you tell
>  me other formats? GDAL can read info from it?
>  
>  [LINK: http://qiye.163.com/?163]
>  
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
From filippo.coro at alice.it  Fri Jul 30 02:14:29 2010
From: filippo.coro at alice.it (=?iso-8859-15?Q?Filippo_Cor=F2?=)
Date: Fri Jul 30 02:20:23 2010
Subject: [gdal-dev] GeoTiff  null values 
Message-ID: <op.vgm7mfjfnqr6om@filippo-pc>


Hi List,

I'm running tests with GDAL 1.7 and python  for achieving a function for  
the sum of GeoTIFF file. I found some difficulty in handling null values.
I wanted to know if you can assign a specific value (like 99) to null when  
I call the Open function.

The code is as follows:

# Open the image 1
primoDs=gdal.Open('eros.tif', GA_ReadOnly)

primoBand=primoDs.GetRasterBand(1)

If I use the following function:

noval=primoBand.GetNoDataValue()
print noval

I get:

0.0 with null value:

Is there any statement at this stage allow me to decide what value to  
assign to null, when I call gdal.open?

Thanks in Advance

Filippo Cor?


-- 
Creato con il rivoluzionario client e-mail di Opera:  
http://www.opera.com/mail/
From chaitanya.ch at gmail.com  Fri Jul 30 04:08:43 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jul 30 04:08:47 2010
Subject: [gdal-dev] GeoTiff null values
In-Reply-To: <op.vgm7mfjfnqr6om@filippo-pc>
References: <op.vgm7mfjfnqr6om@filippo-pc>
Message-ID: <AANLkTimJXh+J22qpuzmhKTheojHMQrzjpb=+x9VTnhvg@mail.gmail.com>

Filippo,

Please note that those values are called nodata values.

Nodata value is assigned a specific value during the creation of the raster
and all the pixels where data is unavailable are assigned that value.
Using the python interface, you can find the specified value with
GetNoDataValue(). You can compare it with "None" to check if a value is set.

if band.GetNoDataValue() != None:
    print band.GetNoDataValue()
else:
    print 'nodata not set'

You cannot reset all the nodata pixels of a raster band directly. You can
create a VRT file to do this. The VRT driver can translate the nodata value
from the underlying dataset to the value you specify with
<NoDataValue>99</NoDataValue>. http://www.gdal.org/gdal_vrttut.html

On Fri, Jul 30, 2010 at 11:44 AM, Filippo Cor? <filippo.coro@alice.it>wrote:

>
> Hi List,
>
> I'm running tests with GDAL 1.7 and python  for achieving a function for
> the sum of GeoTIFF file. I found some difficulty in handling null values.
> I wanted to know if you can assign a specific value (like 99) to null when
> I call the Open function.
>
> The code is as follows:
>
> # Open the image 1
> primoDs=gdal.Open('eros.tif', GA_ReadOnly)
>
> primoBand=primoDs.GetRasterBand(1)
>
> If I use the following function:
>
> noval=primoBand.GetNoDataValue()
> print noval
>
> I get:
>
> 0.0 with null value:
>
> Is there any statement at this stage allow me to decide what value to
> assign to null, when I call gdal.open?
>
> Thanks in Advance
>
> Filippo Cor?
>
>
> --
> Creato con il rivoluzionario client e-mail di Opera:
> http://www.opera.com/mail/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100730/5dd8ce14/attachment-0001.html
From wrightc at forthvalleygis.co.uk  Fri Jul 30 05:21:20 2010
From: wrightc at forthvalleygis.co.uk (Colin Wright)
Date: Fri Jul 30 06:21:08 2010
Subject: [gdal-dev] Save to DXF with specific layer name with c#
Message-ID: <4C52A7A0.FDD4.0005.1@forthvalleygis.co.uk>

I'm using GDAL/OGR 1.7.2 with the C# bindings to write a tool that will export data to various formats.

When it exports to DXF I want it to use a specific layer name rather than using the default dxf layer 0.
The problem is that even though I'm setting the attribute "Layer" for each feature, it is still appearing as layer 0 in the final DXF file.  I've checked and the "Layer" attribute does exist, and setting the attribute value doesn't throw any errors.  The geometry is getting saved to the DXF OK.  

Any ideas?  An extract of my code is below.

//--------------------------------------------------
//Loop through input layers writing to output
lyrInput.ResetReading();
Feature inFeat = lyrInput.GetNextFeature();
iError = -1;
while (inFeat != null)
{
               //Try approach of creating new feature
	Feature outFeat = new Feature(lyrOutput.GetLayerDefn());
                if (outFeat.SetGeometry(inFeat.GetGeometryRef()) == Ogr.OGRERR_NONE)
               {
                       bFeatOK = true;

                      //Generic attribs for DXF
                      if (sOutFormat == "DXF")
                      {
                                  //I've checked and this section is getting called
                                  outFeat.SetField("Layer", "MyLayerName");
                        
                       }
               }
               if (bFeatOK)
               {
	         iError = lyrOutput.CreateFeature(outFeat);
               }

               outFeat.Dispose();
               inFeat = lyrInput.GetNextFeature();
}


Thanks

Colin


--------------------------------
From joelodom at gmail.com  Fri Jul 30 07:37:40 2010
From: joelodom at gmail.com (Joel Odom)
Date: Fri Jul 30 07:37:42 2010
Subject: [gdal-dev] Clearing OGR Attribute Filter on ESRI Personal
	Geodatabase
Message-ID: <AANLkTimi00bZn=PnbQ_er7jUVp+OhdBOdxysW-iQeRfP@mail.gmail.com>

I'm encountering an issue where once I've set an attribute filter on an ESRI
personal geodatabase, I cannot clear that filter.  If I pass NULL to
SetAttributeFilter, the filter is internally set to "", which makes future
queries return zero results instead of all rows.  Examining the personal
geodatabase driver code, I find:

OGRErr OGRPGeoTableLayer::SetAttributeFilter( const char *pszQuery )
{
    if( (pszQuery == NULL && this->pszQuery == NULL)
        || (pszQuery != NULL && this->pszQuery != NULL
            && EQUAL(pszQuery,this->pszQuery)) )
        return OGRERR_NONE;

    CPLFree( this->pszQuery );
    this->pszQuery = CPLStrdup( pszQuery );

    ClearStatement();

    return OGRERR_NONE;
}

Around the line, "this->pszQuery = CPLStrdup( pszQuery );" should there be
an additional bit of logic that sets this->pszQuery to NULL if pszQuery is
NULL?  I've searched this mailing list and find no reference to this.  Is
there a possible work around?  Thanks.



-- 
http://www.operationliberate.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100730/ede8ace8/attachment.html
From a.neumann at carto.net  Fri Jul 30 08:31:21 2010
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri Jul 30 08:31:28 2010
Subject: [gdal-dev] Save to DXF with specific layer name with c#
In-Reply-To: <4C52A7A0.FDD4.0005.1@forthvalleygis.co.uk>
References: <4C52A7A0.FDD4.0005.1@forthvalleygis.co.uk>
Message-ID: <39761.193.246.86.39.1280493081.squirrel@webmail.carto.net>

Hi Colin,

Not sure if creation of layers is yet supported. I think it is only
supported if you created the layers in advance in the header.dxf file.

Frank Warmerdam is now working on a second round of improvements where
automatic layer creation (even if the layers aren't present in header.dxf)
should be supported.

You probably have to wait for a couple weeks for this to appear.

Frank can tell you more about it.

Andreas


On Fri, July 30, 2010 11:21 am, Colin Wright wrote:
> I'm using GDAL/OGR 1.7.2 with the C# bindings to write a tool that will
> export data to various formats.
>
> When it exports to DXF I want it to use a specific layer name rather than
> using the default dxf layer 0.
> The problem is that even though I'm setting the attribute "Layer" for each
> feature, it is still appearing as layer 0 in the final DXF file.  I've
> checked and the "Layer" attribute does exist, and setting the attribute
> value doesn't throw any errors.  The geometry is getting saved to the DXF
> OK.
>
> Any ideas?  An extract of my code is below.
>
> //--------------------------------------------------
> //Loop through input layers writing to output
> lyrInput.ResetReading();
> Feature inFeat = lyrInput.GetNextFeature();
> iError = -1;
> while (inFeat != null)
> {
>                //Try approach of creating new feature
> 	Feature outFeat = new Feature(lyrOutput.GetLayerDefn());
>                 if (outFeat.SetGeometry(inFeat.GetGeometryRef()) ==
> Ogr.OGRERR_NONE)
>                {
>                        bFeatOK = true;
>
>                       //Generic attribs for DXF
>                       if (sOutFormat == "DXF")
>                       {
>                                   //I've checked and this section is
> getting called
>                                   outFeat.SetField("Layer",
> "MyLayerName");
>
>                        }
>                }
>                if (bFeatOK)
>                {
> 	         iError = lyrOutput.CreateFeature(outFeat);
>                }
>
>                outFeat.Dispose();
>                inFeat = lyrInput.GetNextFeature();
> }
>
>
> Thanks
>
> Colin
>
>
> --------------------------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Andreas Neumann
http://www.carto.net/neumann/
http://www.svgopen.org/

From wonder.sk at gmail.com  Fri Jul 30 09:16:34 2010
From: wonder.sk at gmail.com (Martin Dobias)
Date: Fri Jul 30 09:16:36 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <AANLkTinphLUaSQY7mjXh0QB6edLSfTAMUSvVGPcxGezw@mail.gmail.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
	<AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>
	<AANLkTim3OCJbQ7PpVxWX6n59gLmw9UCbHAfzECv2+nTr@mail.gmail.com>
	<4C51B563.6040709@pobox.com>
	<AANLkTinphLUaSQY7mjXh0QB6edLSfTAMUSvVGPcxGezw@mail.gmail.com>
Message-ID: <AANLkTi=MY611CW=4OoSgd+J2z38jPasZV9yUx_jDsZ3h@mail.gmail.com>

Hi Tamas

On Thu, Jul 29, 2010 at 9:10 PM, Tamas Szekeres <szekerest@gmail.com> wrote:
> Frank,
>
> If you refer to the OGR_GEOMETRY, OGR_GEOM_WKT, OGR_GEOM_AREA special
> fields, both return a meaningful value (ie. an empty string) when the
> geometry is null. In this regard it would be enough to disable only the
> geometry column of that layer. However since the geometry column is not
> necessarily be added to the field collection at OGRFeatureDefn, disabling
> the geometry column might probably be set at OGRFeatureDefn while the others
> at OGRFieldDefn in my suggested approach:
>
>
> for( int iField = 0; iField < poDefn->GetFieldCount(); iField++ )
> {
>   if (poDefn->GetFieldDefn(iField)->IsIgnored())
>     continue;
>
>   // fetch field
> }
>
> if (!poDefn->IsGeometryIgnored())
>
> {
>   // fetch geometry field
> }

I like this approach - OGRFeatureDefn / OGRFieldDefn look like good
places where to store the flag whether fields or geometry should be
ignored.

Though I'm not sure how to proceed with API for setting what should be
ignored. In your further mail, you suggest
OGRFeatureDefn::EnableGeometryColumn(bool) for geometry (and I presume
something similar for fields, e.g. OGRFieldDefn::SetIgnored(bool) ).
This would however bring some inconsistency, because documentation for
OGRLayer::GetLayerDefn() states that the returned OGRFeatureDefn
shouldn't be modified. But this statement could be probably relaxed so
that changing ignore state of fields/geometry/style will be allowed?

Regards
Martin
From warmerdam at pobox.com  Fri Jul 30 09:44:41 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jul 30 09:44:49 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <AANLkTi=MY611CW=4OoSgd+J2z38jPasZV9yUx_jDsZ3h@mail.gmail.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
	<AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>
	<AANLkTim3OCJbQ7PpVxWX6n59gLmw9UCbHAfzECv2+nTr@mail.gmail.com>
	<4C51B563.6040709@pobox.com>
	<AANLkTinphLUaSQY7mjXh0QB6edLSfTAMUSvVGPcxGezw@mail.gmail.com>
	<AANLkTi=MY611CW=4OoSgd+J2z38jPasZV9yUx_jDsZ3h@mail.gmail.com>
Message-ID: <4C52D749.8060705@pobox.com>

Martin Dobias wrote:
> Hi Tamas
> 
> On Thu, Jul 29, 2010 at 9:10 PM, Tamas Szekeres <szekerest@gmail.com> wrote:
>> Frank,
>>
>> If you refer to the OGR_GEOMETRY, OGR_GEOM_WKT, OGR_GEOM_AREA special
>> fields, both return a meaningful value (ie. an empty string) when the
>> geometry is null. In this regard it would be enough to disable only the
>> geometry column of that layer. However since the geometry column is not
>> necessarily be added to the field collection at OGRFeatureDefn, disabling
>> the geometry column might probably be set at OGRFeatureDefn while the others
>> at OGRFieldDefn in my suggested approach:
>>
>>
>> for( int iField = 0; iField < poDefn->GetFieldCount(); iField++ )
>> {
>>   if (poDefn->GetFieldDefn(iField)->IsIgnored())
>>     continue;
>>
>>   // fetch field
>> }
>>
>> if (!poDefn->IsGeometryIgnored())
>>
>> {
>>   // fetch geometry field
>> }
> 
> I like this approach - OGRFeatureDefn / OGRFieldDefn look like good
> places where to store the flag whether fields or geometry should be
> ignored.
> 
> Though I'm not sure how to proceed with API for setting what should be
> ignored. In your further mail, you suggest
> OGRFeatureDefn::EnableGeometryColumn(bool) for geometry (and I presume
> something similar for fields, e.g. OGRFieldDefn::SetIgnored(bool) ).
> This would however bring some inconsistency, because documentation for
> OGRLayer::GetLayerDefn() states that the returned OGRFeatureDefn
> shouldn't be modified. But this statement could be probably relaxed so
> that changing ignore state of fields/geometry/style will be allowed?

Martin,

I do not agree with applications directly changing the OGRFieldDefn, even
if ultimately the flag is stored here.  There needs to be a virtual method
on the OGRLayer (IMHO) so that drivers have an opportunity to hook the
method to do something special when the list of desired fields changes.

I'm disappointed that several new methods will be added to the API, with
distinct methods for geometry, and style.  I am always fighting to
minimize the breadth of the API, within reason.  Hopefully you can weld
these results into a RFC proposal we can vote on reasonably soon.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Jul 30 09:54:56 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jul 30 09:55:00 2010
Subject: [gdal-dev] Clearing OGR Attribute Filter on ESRI Personal
	Geodatabase
In-Reply-To: <AANLkTimi00bZn=PnbQ_er7jUVp+OhdBOdxysW-iQeRfP@mail.gmail.com>
References: <AANLkTimi00bZn=PnbQ_er7jUVp+OhdBOdxysW-iQeRfP@mail.gmail.com>
Message-ID: <4C52D9B0.6030003@pobox.com>

Joel Odom wrote:
> I'm encountering an issue where once I've set an attribute filter on an 
> ESRI personal geodatabase, I cannot clear that filter.  If I pass NULL 
> to SetAttributeFilter, the filter is internally set to "", which makes 
> future queries return zero results instead of all rows.  Examining the 
> personal geodatabase driver code, I find:
> 
> OGRErr OGRPGeoTableLayer::SetAttributeFilter( const char *pszQuery )
> {
>     if( (pszQuery == NULL && this->pszQuery == NULL)
>         || (pszQuery != NULL && this->pszQuery != NULL 
>             && EQUAL(pszQuery,this->pszQuery)) )
>         return OGRERR_NONE;
> 
>     CPLFree( this->pszQuery );
>     this->pszQuery = CPLStrdup( pszQuery );
> 
>     ClearStatement();
> 
>     return OGRERR_NONE;
> }
> 
> Around the line, "this->pszQuery = CPLStrdup( pszQuery );" should there 
> be an additional bit of logic that sets this->pszQuery to NULL 
> if pszQuery is NULL?  I've searched this mailing list and find no 
> reference to this.  Is there a possible work around?  Thanks.

Joel,

Yes, I think you are right.  I imagine this:

    this->pszQuery = CPLStrdup( pszQuery );

should be replaced with:
     if( pszQuery )
         this->pszQuery = CPLStrdup(pszQuery);
     else
         this->pszQuery = NULL;

Could you file a ticket on this issue at http://trac.osgeo.org/gdal?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From joelodom at gmail.com  Fri Jul 30 09:57:29 2010
From: joelodom at gmail.com (Joel Odom)
Date: Fri Jul 30 09:57:31 2010
Subject: [gdal-dev] Clearing OGR Attribute Filter on ESRI Personal 
	Geodatabase
In-Reply-To: <4C52D9B0.6030003@pobox.com>
References: <AANLkTimi00bZn=PnbQ_er7jUVp+OhdBOdxysW-iQeRfP@mail.gmail.com>
	<4C52D9B0.6030003@pobox.com>
Message-ID: <AANLkTinMC0hKjns2KA_=rOX9mZ_HC17xUrn5NG2LTb2J@mail.gmail.com>

What's the process by which I can submit that change, or request to have
someone with commit access add it?  Thanks.



On Fri, Jul 30, 2010 at 9:54 AM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Joel Odom wrote:
>
>> I'm encountering an issue where once I've set an attribute filter on an
>> ESRI personal geodatabase, I cannot clear that filter.  If I pass NULL to
>> SetAttributeFilter, the filter is internally set to "", which makes future
>> queries return zero results instead of all rows.  Examining the personal
>> geodatabase driver code, I find:
>>
>> OGRErr OGRPGeoTableLayer::SetAttributeFilter( const char *pszQuery )
>> {
>>    if( (pszQuery == NULL && this->pszQuery == NULL)
>>        || (pszQuery != NULL && this->pszQuery != NULL             &&
>> EQUAL(pszQuery,this->pszQuery)) )
>>        return OGRERR_NONE;
>>
>>    CPLFree( this->pszQuery );
>>    this->pszQuery = CPLStrdup( pszQuery );
>>
>>    ClearStatement();
>>
>>    return OGRERR_NONE;
>> }
>>
>> Around the line, "this->pszQuery = CPLStrdup( pszQuery );" should there be
>> an additional bit of logic that sets this->pszQuery to NULL if pszQuery is
>> NULL?  I've searched this mailing list and find no reference to this.  Is
>> there a possible work around?  Thanks.
>>
>
> Joel,
>
> Yes, I think you are right.  I imagine this:
>
>   this->pszQuery = CPLStrdup( pszQuery );
>
> should be replaced with:
>    if( pszQuery )
>        this->pszQuery = CPLStrdup(pszQuery);
>    else
>        this->pszQuery = NULL;
>
> Could you file a ticket on this issue at http://trac.osgeo.org/gdal?
>
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
http://www.operationliberate.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100730/a34bd5c4/attachment-0001.html
From warmerdam at pobox.com  Fri Jul 30 10:10:27 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jul 30 10:10:32 2010
Subject: [gdal-dev] Clearing OGR Attribute Filter on ESRI Personal 
	Geodatabase
In-Reply-To: <AANLkTinMC0hKjns2KA_=rOX9mZ_HC17xUrn5NG2LTb2J@mail.gmail.com>
References: <AANLkTimi00bZn=PnbQ_er7jUVp+OhdBOdxysW-iQeRfP@mail.gmail.com>
	<4C52D9B0.6030003@pobox.com>
	<AANLkTinMC0hKjns2KA_=rOX9mZ_HC17xUrn5NG2LTb2J@mail.gmail.com>
Message-ID: <4C52DD53.5050905@pobox.com>

Joel Odom wrote:
> What's the process by which I can submit that change, or request to have 
> someone with commit access add it?  Thanks.

Joel,

If you got to the url I reference below there are brief instructions
in the first paragraph on how to file a ticket.  Basically you get an
OSGeo Userid at:

   https://www.osgeo.org/cgi-bin/ldap_create_user.py

And then you login to the Trac site with it.  Once logged in you can
create a ticket at:

   http://trac.osgeo.org/gdal/newticket

A GDAL committer will act on the ticket and incorporate a change into the
code base.

Best regards,

> On Fri, Jul 30, 2010 at 9:54 AM, Frank Warmerdam <warmerdam@pobox.com 
> <mailto:warmerdam@pobox.com>> wrote:
>     Could you file a ticket on this issue at http://trac.osgeo.org/gdal?


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From joelodom at gmail.com  Fri Jul 30 10:22:05 2010
From: joelodom at gmail.com (Joel Odom)
Date: Fri Jul 30 10:22:10 2010
Subject: [gdal-dev] Clearing OGR Attribute Filter on ESRI Personal 
	Geodatabase
In-Reply-To: <4C52DD53.5050905@pobox.com>
References: <AANLkTimi00bZn=PnbQ_er7jUVp+OhdBOdxysW-iQeRfP@mail.gmail.com>
	<4C52D9B0.6030003@pobox.com>
	<AANLkTinMC0hKjns2KA_=rOX9mZ_HC17xUrn5NG2LTb2J@mail.gmail.com>
	<4C52DD53.5050905@pobox.com>
Message-ID: <AANLkTik+qQPRu64szHxT3f_EY0KM5BkeUGdbJu16TYCb@mail.gmail.com>

Thanks, Frank.  See

http://trac.osgeo.org/gdal/ticket/3706

<http://trac.osgeo.org/gdal/ticket/3706>

On Fri, Jul 30, 2010 at 10:10 AM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Joel Odom wrote:
>
>> What's the process by which I can submit that change, or request to have
>> someone with commit access add it?  Thanks.
>>
>
> Joel,
>
> If you got to the url I reference below there are brief instructions
> in the first paragraph on how to file a ticket.  Basically you get an
> OSGeo Userid at:
>
>  https://www.osgeo.org/cgi-bin/ldap_create_user.py
>
> And then you login to the Trac site with it.  Once logged in you can
> create a ticket at:
>
>  http://trac.osgeo.org/gdal/newticket
>
> A GDAL committer will act on the ticket and incorporate a change into the
> code base.
>
> Best regards,
>
>
>  On Fri, Jul 30, 2010 at 9:54 AM, Frank Warmerdam <warmerdam@pobox.com<mailto:
>> warmerdam@pobox.com>> wrote:
>>    Could you file a ticket on this issue at http://trac.osgeo.org/gdal?
>>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
http://www.operationliberate.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100730/1871257c/attachment.html
From m.massing at warped-space.de  Fri Jul 30 10:22:39 2010
From: m.massing at warped-space.de (Manuel Massing)
Date: Fri Jul 30 10:22:43 2010
Subject: [gdal-dev] 4 point, projective warping
In-Reply-To: <201007281545.35142.m.massing@warped-space.de>
References: <AANLkTi=nHAdLvQSShBTCycGY2kuUYL-HyceNMJxR4XM_@mail.gmail.com>
	<201007281545.35142.m.massing@warped-space.de>
Message-ID: <201007301622.40228.m.massing@warped-space.de>

Hi Jeffrey,

> I've thought about implementing a projective transform in the qgis
> georeferencer, so if you're interested I'll let you know when I get around
> to it.

If this interest you, I have just commited an initial implementation of
projective warping (see https://trac.osgeo.org/qgis/changeset/13987)
to the qgis georeferencer, which is based on the gdalwarper.

In principle, it should be relatively easy to integrate this transform into a 
custom version of gdalwarp. 

Maybe there's even interest to have such a transform in GDAL proper? 
I would be willing to contribute the code to GDAL, although the model
fitting step uses a singular value decomposition, so this would require
some dependency on  a linear algebra package (I wouldn't consider it wise to
reimplement numerical algorithms from scratch, with their numerous caveats).

cheers,

	Manuel
	
From szekerest at gmail.com  Fri Jul 30 10:29:38 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jul 30 10:29:53 2010
Subject: [gdal-dev] RFC 29: OGR Set Desired Fields
In-Reply-To: <4C52D749.8060705@pobox.com>
References: <AANLkTikfiDjgdo_Z1PILeXhWejkJb83-89RsTaMf9W7J@mail.gmail.com>
	<4C47081A.60205@pobox.com>
	<AANLkTimwecMpjwteze5naycePbq2eIoBFJqrRLh5SL69@mail.gmail.com>
	<AANLkTi=L9zhwUeJToyQF-3+CNs7pSB97FbG2+iPxtpnU@mail.gmail.com>
	<AANLkTim3OCJbQ7PpVxWX6n59gLmw9UCbHAfzECv2+nTr@mail.gmail.com>
	<4C51B563.6040709@pobox.com>
	<AANLkTinphLUaSQY7mjXh0QB6edLSfTAMUSvVGPcxGezw@mail.gmail.com>
	<AANLkTi=MY611CW=4OoSgd+J2z38jPasZV9yUx_jDsZ3h@mail.gmail.com>
	<4C52D749.8060705@pobox.com>
Message-ID: <AANLkTimzsauaHie-LirnNO-eJyWm3bsNcqFVBz5WFD1=@mail.gmail.com>

2010/7/30 Frank Warmerdam <warmerdam@pobox.com>

>
> I do not agree with applications directly changing the OGRFieldDefn, even
> if ultimately the flag is stored here.  There needs to be a virtual method
> on the OGRLayer (IMHO) so that drivers have an opportunity to hook the
> method to do something special when the list of desired fields changes.
>
>
I agree with this approach if I understood correctly, that the flags would
be stored in OGRFieldDefn/OGRFeatueDefn and would be set by a single virtual
method in OGRLayer which could continue to be:

virtual OGRErr OGRLayer::SetIgnoredFields( const char **papszFields );


With the assumption that the fields are identified by name and not by the
position in the array.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100730/d243da4c/attachment.html
From tejas.gajera at gmail.com  Fri Jul 30 14:44:27 2010
From: tejas.gajera at gmail.com (Gajera Tejas)
Date: Fri Jul 30 14:44:49 2010
Subject: [gdal-dev] Single multi-resolution tiled TIFF image
Message-ID: <AANLkTimf_AdiYR+FOyz-mSsuhLJEDtfBDS-pO++K6Des@mail.gmail.com>

Hi,

I was wondering if any one knows how to publish Single
multi-resolution tiled TIFF image using OpenLayers.

Regards,
Tejas Gajera
