From runette at gmail.com  Sat May  1 03:35:39 2021
From: runette at gmail.com (Paul Harwood)
Date: Sat, 1 May 2021 11:35:39 +0100
Subject: [gdal-dev] Reading binary data from FileGDB
In-Reply-To: <CAE8nN5Pz8qXJTroJVS=z19YoTu8aeh1KQcMKLuM+3JC39SpDeA@mail.gmail.com>
References: <1619759619194-0.post@n6.nabble.com>
 <CAE8nN5Pz8qXJTroJVS=z19YoTu8aeh1KQcMKLuM+3JC39SpDeA@mail.gmail.com>
Message-ID: <CAE8nN5MnGeoRHMH53woD-NTofEAkJiq=S1bDeo_tLWssAQ+hnA@mail.gmail.com>

That said ...

I managed to create a working version of the bindings that provide a method
on Feature :

byte[] GetFieldAsBinary(int id)

You can see this in this fork https://github.com/runette/gdal/tree/binary

Of course this is not even ready to be a PR, let alone being submitted,
reviewed, merged etc etc.

But if you did want to play with it you could build out of that fork (the
fork is set up to build version 3.2.2). Or, if you want I could send you
the Windows binaries - with of course no promises, guarantees or even
recommendations etc etc.

Using this, the following console app :

using System;
using System.Text;
using OSGeo.OGR;

namespace swig_test
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Hello World!");


            Ogr.RegisterAll();
            DataSource ds =
Ogr.Open("/Users/paulharwood/ViRGIS-Backend/test_data/bradwell_moor_ecology.geojson",
0);
            int layerc = ds.GetLayerCount();

            Console.WriteLine($"Number of Layers : {layerc}");

            Layer layer = ds.GetLayerByIndex(0);

            Console.WriteLine($"Number of Features :
{layer.GetFeatureCount(0)}");

            layer.ResetReading();
            Feature feature = layer.GetNextFeature();
            while (feature != null)
            {
                int fieldc = feature.GetFieldCount();

                for (int i = 0; i < fieldc; i++)
                {
                    FieldDefn fd = feature.GetFieldDefnRef(i);
                    String name = fd.GetName();
                    int length = fd.GetWidth();

                    byte[] contents = feature.GetFieldAsBinary(i);

                    Console.WriteLine($" Field {name}
:{Encoding.ASCII.GetString(contents)}");

                }
                feature = layer.GetNextFeature();
            }
        }
    }
}

Produces this result :


Number of Layers : 1
Number of Features : 6
 Field id :
 Field Name : TN6
 Field Details :  Concrete lined pond
 Field id :
 Field Name : TN5
 Field Details : Unimproved Grassland
 Field id : Length 0 :
 Field Name : TN4
 Field Details : Dry dwarf shrub heath
 Field id :
 Field Name : TN3
 Field Details : 2 no. areas of botanical interest
 Field id :
 Field Name : TN2
 Field Details : Fenced off rake/shaft
 Field id :
 Field Name : TN1
 Field Details : Pond 1


Yes - I know I am ready a text field as a binary and then converting it to
text .. That is ONLY because I don't have any handy binary data to test
with.

On Fri, 30 Apr 2021 at 16:18, Paul Harwood <runette at gmail.com> wrote:

> I am going to go out on a couple of limbs here :
>
> - About 3041 - it is what it is!
>
> As it happens I have been thinking about learning more about the SWIG side
> of things and I had a quick look. Not a trivial issue - that method was
> excluded for a reason. There is some complicated marshalling to do.
>
> Even if it was easy - especially with 3.3.0 in the launch tubes it would
> be months before anything would come out in a release.
>
> - About 3040 - looks like a bug. But you have the same problem with launch
> timetables even once someone fixes it (unless you fix it and then create
> your own temp build).
>
> So - the best suggestion I can think of is probably facile (so don't take
> it the wrong way ) - but is there no way that you could do it in Python?
>
> On Fri, 30 Apr 2021 at 06:14, srweal <steve_wealands at essolutions.com.au>
> wrote:
>
>> Hi,
>>
>> I'm after advice. I need to read a BLOB field from various features
>> within a
>> FileGDB. I need to work with this data either in C# code (via the GDAL C#
>> bindings), or else have it directly read into a SQL database (e.g. via
>> ogr2ogr).
>>
>> I've hit up against a couple of problems doing this that I don't know how
>> to
>> fix in the GDAL source which I've documented here but had no feedback on:
>> https://github.com/OSGeo/gdal/issues/3040
>> https://github.com/OSGeo/gdal/issues/3041
>>
>> Am wondering if anyone on the list can suggest a better approach that
>> would
>> work?
>>
>> Thanks. Have been stuck on this for a while now with no real way forward.
>>
>> Steve
>>
>>
>>
>>
>> --
>> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210501/2378aaf6/attachment.html>

From jmckenna at gatewaygeomatics.com  Sat May  1 13:59:00 2021
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Sat, 1 May 2021 17:59:00 -0300
Subject: [gdal-dev] Motion: promote GDAL 3.2.3 RC1
In-Reply-To: <9ae93e39-360e-cac2-84c1-98ed81dededf@spatialys.com>
References: <9ae93e39-360e-cac2-84c1-98ed81dededf@spatialys.com>
Message-ID: <56b01749-de8e-0426-70f1-2ae56c99e133@gatewaygeomatics.com>

On 2021-04-30 6:54 a.m., Even Rouault wrote:
> Hi,
> 
> Not sure if anyone has given this a try, but anyway:
> 
> Motion:
> 
> Adopt GDAL 3.2.3 RC1 as final 3.2.3 release
> 
> Starting with my +1
> 
> Even
> 

+1  (no issues testing 3.2.3-RC1 here on Windows)

-jeff



-- 
Jeff McKenna
GatewayGeo: Developers of MS4W, MapServer Consulting and Training
co-founder of FOSS4G
http://gatewaygeo.com/

From mochi.silva at gmail.com  Sun May  2 06:35:28 2021
From: mochi.silva at gmail.com (Moises Silva)
Date: Sun, 2 May 2021 10:35:28 -0300
Subject: [gdal-dev] Convert GEOCS
Message-ID: <CAETVUGgD4oeOAHd-OoYq46w4Tz7cuTeJE5RXhk=crw0jeTsytg@mail.gmail.com>

Hello everyone,

    Is there any command in GDAL that is possible to convert the GEOCS?
       Source: GCS_SIRGAS_2000
       Target:  GCS_WGS_1984?

Thanks a lot,
Moises
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210502/9fe565a7/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Sun May  2 12:12:11 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Sun, 2 May 2021 12:12:11 -0700 (MST)
Subject: [gdal-dev] Convert GEOCS
In-Reply-To: <CAETVUGgD4oeOAHd-OoYq46w4Tz7cuTeJE5RXhk=crw0jeTsytg@mail.gmail.com>
References: <CAETVUGgD4oeOAHd-OoYq46w4Tz7cuTeJE5RXhk=crw0jeTsytg@mail.gmail.com>
Message-ID: <1619982731062-0.post@n6.nabble.com>

Hi,

There is a command, gdaltransform
https://gdal.org/programs/gdaltransform.html. However, it seems that both
coordinate systems mean the same for Proj library and no conversion in
coordinates happen. That you can test with projinfo that is a Proj utility.

projinfo -s epsg:4326 -t epsg:4674
Candidate operations found: 1
-------------------------------------
Operation No. 1:

INVERSE(EPSG):15894, Inverse of SIRGAS 2000 to WGS 84 (1), 1.0 m, Latin
America - SIRGAS 2000 by country

PROJ string:
+proj=noop

WKT2:2019 string:
COORDINATEOPERATION["Inverse of SIRGAS 2000 to WGS 84 (1)",
    SOURCECRS[
        GEOGCRS["WGS 84",
            DATUM["World Geodetic System 1984",
                ELLIPSOID["WGS 84",6378137,298.257223563,
                    LENGTHUNIT["metre",1]]],
            PRIMEM["Greenwich",0,
                ANGLEUNIT["degree",0.0174532925199433]],
            CS[ellipsoidal,2],
                AXIS["geodetic latitude (Lat)",north,
                    ORDER[1],
                    ANGLEUNIT["degree",0.0174532925199433]],
                AXIS["geodetic longitude (Lon)",east,
                    ORDER[2],
                    ANGLEUNIT["degree",0.0174532925199433]],
            ID["EPSG",4326]]],
    TARGETCRS[
        GEOGCRS["SIRGAS 2000",
            DATUM["Sistema de Referencia Geocentrico para las AmericaS
2000",
                ELLIPSOID["GRS 1980",6378137,298.257222101,
                    LENGTHUNIT["metre",1]]],
            PRIMEM["Greenwich",0,
                ANGLEUNIT["degree",0.0174532925199433]],
            CS[ellipsoidal,2],
                AXIS["geodetic latitude (Lat)",north,
                    ORDER[1],
                    ANGLEUNIT["degree",0.0174532925199433]],
                AXIS["geodetic longitude (Lon)",east,
                    ORDER[2],
                    ANGLEUNIT["degree",0.0174532925199433]],
            ID["EPSG",4674]]],
    METHOD["Geocentric translations (geog2D domain)",
        ID["EPSG",9603]],
    PARAMETER["X-axis translation",0,
        LENGTHUNIT["metre",1],
        ID["EPSG",8605]],
    PARAMETER["Y-axis translation",0,
        LENGTHUNIT["metre",1],
        ID["EPSG",8606]],
    PARAMETER["Z-axis translation",0,
        LENGTHUNIT["metre",1],
        ID["EPSG",8607]],
    OPERATIONACCURACY[1.0],
    USAGE[
        SCOPE["Accuracy 1m."],
        AREA["Latin America - SIRGAS 2000 by country"],
        BBOX[-59.87,-122.19,32.72,-25.28]],
    ID["INVERSE(EPSG)",15894]]


-Jukka Rahkonen-



Moises Silva wrote
> Hello everyone,
> 
>     Is there any command in GDAL that is possible to convert the GEOCS?
>        Source: GCS_SIRGAS_2000
>        Target:  GCS_WGS_1984?
> 
> Thanks a lot,
> Moises
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Sun May  2 12:12:57 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Sun, 2 May 2021 12:12:57 -0700 (MST)
Subject: [gdal-dev] Motion: promote GDAL 3.2.3 RC1
In-Reply-To: <9ae93e39-360e-cac2-84c1-98ed81dededf@spatialys.com>
References: <9ae93e39-360e-cac2-84c1-98ed81dededf@spatialys.com>
Message-ID: <1619982777972-0.post@n6.nabble.com>

+1

-Jukka Rahkonen-


Even Rouault-2 wrote
> Hi,
> 
> Not sure if anyone has given this a try, but anyway:
> 
> Motion:
> 
> Adopt GDAL 3.2.3 RC1 as final 3.2.3 release
> 
> Starting with my +1
> 
> Even
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From steve_wealands at essolutions.com.au  Sun May  2 22:07:23 2021
From: steve_wealands at essolutions.com.au (srweal)
Date: Sun, 2 May 2021 22:07:23 -0700 (MST)
Subject: [gdal-dev] Reading binary data from FileGDB
In-Reply-To: <CAE8nN5MnGeoRHMH53woD-NTofEAkJiq=S1bDeo_tLWssAQ+hnA@mail.gmail.com>
References: <1619759619194-0.post@n6.nabble.com>
 <CAE8nN5Pz8qXJTroJVS=z19YoTu8aeh1KQcMKLuM+3JC39SpDeA@mail.gmail.com>
 <CAE8nN5MnGeoRHMH53woD-NTofEAkJiq=S1bDeo_tLWssAQ+hnA@mail.gmail.com>
Message-ID: <1620018443752-0.post@n6.nabble.com>

Hey, thanks so much for the response Paul. I feel kind of useless with this
stuff but want to get more involved so I can contribute to GDAL eventually
(where possible). 

This code looks like it'd do exactly what I need and would be great to see
it end up within the source. Is that easy to create the PR for? I have been
using the compiled Windows binaries from the GISInternals site, but as you
mention, it'll take ages for changes to filter through to those releases.

I'd really like to build this out myself from your fork, but I'm only just
learning about the GDAL source and how to build it for use in
Windows/VS2019. I have managed to get it atleast building today and compiled
a gdal303.dll file, but can't really understand how to get C# wrappers, etc.
out. 

Are you able to send through the nmake.opt file you use, or else some dot
points about the build process required to get this going within VS/C#?

Previously I've just included pre-compiled gdal_csharp.dll, ogr_csharp.dll
and osr_csharp.dll files into my applications.

Thanks again. Be well.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Mon May  3 05:12:14 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 3 May 2021 14:12:14 +0200
Subject: [gdal-dev] Motion: promote GDAL 3.3.0 RC1
In-Reply-To: <f1f82be5-d806-fb30-f693-a60328bee619@spatialys.com>
References: <f1f82be5-d806-fb30-f693-a60328bee619@spatialys.com>
Message-ID: <40759faf-84b6-45c6-f82d-4b362155ff58@spatialys.com>

Hello,

> Motion:
>
> Adopt GDAL 3.3.0 RC1 as final 3.3.0 release
>
>
Adopted with +1 from PSC members HowardB, DanielM, JukkaR and myself

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Mon May  3 05:48:19 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 3 May 2021 14:48:19 +0200
Subject: [gdal-dev] GDAL 3.3.0 is released
Message-ID: <a992375d-adae-261a-7e34-d403fc9249ab@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team and community, I am pleased to
announce the release of GDAL/OGR 3.3.0. GDAL/OGR is a C++ geospatial data
access library for raster and vector file formats, databases and web services.
It includes bindings for several languages, and a variety of command line
tools.

    http://gdal.org/

The 3.3.0 release is a new feature release with the following highlights:

* RFC 77 (https://gdal.org/development/rfc/rfc77_drop_python2_support.html): Drop Python 2 support in favor of Python 3.6 (#3142)
* RFC 78 (https://gdal.org/development/rfc/rfc78_gdal_utils_package.html): Add a gdal-utils Python package
* New driver: STACTA (https://gdal.org/drivers/raster/stacta.html): raster driver to read Spatio-Temporal Asset Catalog Tiled Assets
* Add /vsiadls/ virtual file system for Azure Data Lake Storage Gen2
* Improved drivers: DIMAP, NITF
* Number of improvements in Python bindings
  *Add automatic loading of configuration options from a file
* Add support for enumerated, constraint and glob field domains in MEM, FileGDB/OpenFileGDB and GeoPackage drivers
* Deprecation:
   - Disable by default raster drivers DODS, JPEG2000, JPEGLS, MG4LIDAR, FUJIBAS, IDA, INGR, ZMAP and vector driver ARCGEN, ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, GTM, INGRES, MONGODB, REC, WALK at runtime, unless the GDAL_ENABLE_DEPRECATED_DRIVER_{drivername} configuration option is set to YES. Those drivers are planned for removal in GDAL 3.5
   - Perl bindings are deprecated. Removal planned for GDAL 3.5. Use Geo::GDAL::FFI instead
* Removal of BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, SEGY, SUA, XPlane, BPG, E00GRID, EPSILON, IGNFHeightASCIIGrid, NTV1 drivers. Moved to (unsupported) https://github.com/OSGeo/gdal-extra-drivers repository.

More complete information on the new features and fixes in the 3.3.0 release can be found at:

   https://github.com/OSGeo/gdal/blob/v3.3.0/gdal/NEWS

The release can be downloaded from:
   * https://download.osgeo.org/gdal/3.3.0/gdal320.zip - source as a zip
   * https://download.osgeo.org/gdal/3.3.0/gdal-3.3.0.tar.gz - source as .tar.gz
   * https://download.osgeo.org/gdal/3.3.0/gdal-3.3.0.tar.xz - source as .tar.xz
   * https://download.osgeo.org/gdal/3.3.0/gdal-grass-3.3.0.tar.gz - GDAL-GRASS plugin
   * https://download.osgeo.org/gdal/3.3.0/gdalautotest-3.3.0.tar.gz - test suite
   * https://download.osgeo.org/gdal/3.3.0/gdal320doc.zip - documentation / website

Best regards,

Even

-- 
http://www.spatialys.com


From even.rouault at spatialys.com  Mon May  3 06:10:43 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 3 May 2021 15:10:43 +0200
Subject: [gdal-dev] [gdal-announce] GDAL 3.3.0 is released
In-Reply-To: <a992375d-adae-261a-7e34-d403fc9249ab@spatialys.com>
References: <a992375d-adae-261a-7e34-d403fc9249ab@spatialys.com>
Message-ID: <5a8d1c50-2844-6023-4fc5-a904cadeb2df@spatialys.com>

Idan warned me that there was a typo in the URL to the doc. Here's the 
fixed one:

 ? * https://download.osgeo.org/gdal/3.3.0/gdal330doc.zip - 
documentation / website

Le 03/05/2021 ? 14:48, Even Rouault a ?crit?:
> Hi,
>
> On behalf of the GDAL/OGR development team and community, I am pleased to
> announce the release of GDAL/OGR 3.3.0. GDAL/OGR is a C++ geospatial data
> access library for raster and vector file formats, databases and web 
> services.
> It includes bindings for several languages, and a variety of command line
> tools.
>
> ?? http://gdal.org/
>
> The 3.3.0 release is a new feature release with the following highlights:
>
> * RFC 77 
> (https://gdal.org/development/rfc/rfc77_drop_python2_support.html): 
> Drop Python 2 support in favor of Python 3.6 (#3142)
> * RFC 78 
> (https://gdal.org/development/rfc/rfc78_gdal_utils_package.html): Add 
> a gdal-utils Python package
> * New driver: STACTA (https://gdal.org/drivers/raster/stacta.html): 
> raster driver to read Spatio-Temporal Asset Catalog Tiled Assets
> * Add /vsiadls/ virtual file system for Azure Data Lake Storage Gen2
> * Improved drivers: DIMAP, NITF
> * Number of improvements in Python bindings
> ?*Add automatic loading of configuration options from a file
> * Add support for enumerated, constraint and glob field domains in 
> MEM, FileGDB/OpenFileGDB and GeoPackage drivers
> * Deprecation:
> ? - Disable by default raster drivers DODS, JPEG2000, JPEGLS, 
> MG4LIDAR, FUJIBAS, IDA, INGR, ZMAP and vector driver ARCGEN, 
> ArcObjects, CLOUDANT, COUCHDB, DB2, DODS, FME, GEOMEDIA, GTM, INGRES, 
> MONGODB, REC, WALK at runtime, unless the 
> GDAL_ENABLE_DEPRECATED_DRIVER_{drivername} configuration option is set 
> to YES. Those drivers are planned for removal in GDAL 3.5
> ? - Perl bindings are deprecated. Removal planned for GDAL 3.5. Use 
> Geo::GDAL::FFI instead
> * Removal of BNA, AeronavFAA, HTF, OpenAir, SEGUKOOA, SEGY, SUA, 
> XPlane, BPG, E00GRID, EPSILON, IGNFHeightASCIIGrid, NTV1 drivers. 
> Moved to (unsupported) https://github.com/OSGeo/gdal-extra-drivers 
> repository.
>
> More complete information on the new features and fixes in the 3.3.0 
> release can be found at:
>
> ? https://github.com/OSGeo/gdal/blob/v3.3.0/gdal/NEWS
>
> The release can be downloaded from:
> ? * https://download.osgeo.org/gdal/3.3.0/gdal320.zip - source as a zip
> ? * https://download.osgeo.org/gdal/3.3.0/gdal-3.3.0.tar.gz - source 
> as .tar.gz
> ? * https://download.osgeo.org/gdal/3.3.0/gdal-3.3.0.tar.xz - source 
> as .tar.xz
> ? * https://download.osgeo.org/gdal/3.3.0/gdal-grass-3.3.0.tar.gz - 
> GDAL-GRASS plugin
> ? * https://download.osgeo.org/gdal/3.3.0/gdalautotest-3.3.0.tar.gz - 
> test suite
> ? * https://download.osgeo.org/gdal/3.3.0/gdal320doc.zip - 
> documentation / website
>
> Best regards,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From boxerab at gmail.com  Mon May  3 07:59:11 2021
From: boxerab at gmail.com (Aaron Boxer)
Date: Mon, 3 May 2021 10:59:11 -0400
Subject: [gdal-dev] New JP2Grok Driver for JPEG 2000
Message-ID: <CAK8GPyCwf8t2PrbsY9r-ghJY0DN75RRYfmt7GV4Mwd-jHWfriQ@mail.gmail.com>

Hi Folks,

I would like to draw people's attention once again to the pending JPEG 2000
driver PR
https://github.com/OSGeo/gdal/pull/3449
which was opened 3 months ago.  Since I last posted, the driver now has an
autotest script courtesy of Frank Warmerdam, and all tests are passing.

In a nutshell, performance is 2-5 times faster than the only other viable
open source driver, from OpenJPEG, in several common geospatial work flows.
And performance rises by around 2X if the new HTJ2K entropy coder is used.
The AGPL license will not work for everyone, which is why the driver is
disabled by default.

We've already discussed this at length in the previous thread and in the
PR, but if you would like to see this new driver merged, please head over
to the PR and give it a thumbs up. Or, if you don't want this driver
merged, please share your feedback on the PR.

Kind Regards,
Aaron
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210503/6b0dd1cd/attachment.html>

From andrew.bell.ia at gmail.com  Mon May  3 08:23:03 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 3 May 2021 11:23:03 -0400
Subject: [gdal-dev] Mutexes
Message-ID: <CACJ51z0gx2FErz3qupRaxU2SjOe_thT2ZDH9s8hcTKYEO9xcpg@mail.gmail.com>

Hi,

I'm looking at code in gdalwarpkernel.cpp and there are calls to
CPLAcquireMutex that take a "timeout" argument. From looking at
cpl_multiproc, on a non-windows system it seems the timeout is ignored, but
on WIN32 it is respected in the call, but the return value is generally
ignored, meaning that the subsequent code could run without the lock having
been acquired.

This seems like strange behavior. Is there a reason for the different
behavior on Windows and not-Windows? Am I missing something?

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210503/cc45954c/attachment.html>

From even.rouault at spatialys.com  Mon May  3 08:26:14 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 3 May 2021 17:26:14 +0200
Subject: [gdal-dev] Mutexes
In-Reply-To: <CACJ51z0gx2FErz3qupRaxU2SjOe_thT2ZDH9s8hcTKYEO9xcpg@mail.gmail.com>
References: <CACJ51z0gx2FErz3qupRaxU2SjOe_thT2ZDH9s8hcTKYEO9xcpg@mail.gmail.com>
Message-ID: <904e3530-c363-3ec5-27aa-2e5c4b7c2b61@spatialys.com>

Andrew,

I don't see myself much value to the mutexes with timeout, at least in 
how they are used within GDAL. What you underline was actually reported 
in https://github.com/OSGeo/gdal/issues/3631. The fix would be to use a 
non-timeout mutex

Even

Le 03/05/2021 ? 17:23, Andrew Bell a ?crit?:
> Hi,
>
> I'm looking at code in gdalwarpkernel.cpp and there are calls to 
> CPLAcquireMutex that take a "timeout" argument. From looking at 
> cpl_multiproc, on a non-windows system it seems the timeout is 
> ignored, but on WIN32 it is respected in the call, but the return 
> value is generally ignored, meaning that the subsequent code could run 
> without the lock having been acquired.
>
> This seems like strange behavior. Is there a reason for the different 
> behavior on Windows and not-Windows? Am I?missing something?
>
> Thanks,
>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210503/745c5f3a/attachment-0001.html>

From jrmorreale_ml at enoreth.net  Mon May  3 09:05:20 2021
From: jrmorreale_ml at enoreth.net (Jean-Roc Morreale (ml))
Date: Mon, 03 May 2021 18:05:20 +0200
Subject: [gdal-dev] New JP2Grok Driver for JPEG 2000
In-Reply-To: <CAK8GPyCwf8t2PrbsY9r-ghJY0DN75RRYfmt7GV4Mwd-jHWfriQ@mail.gmail.com>
References: <CAK8GPyCwf8t2PrbsY9r-ghJY0DN75RRYfmt7GV4Mwd-jHWfriQ@mail.gmail.com>
Message-ID: <f72469e43a6e9e3dc8d01ce506c2b17115566ea5.camel@enoreth.net>

Hi Aaron,

Is the HTJ2K's output still readable by a regular GDAL/OpenJPEG ?

Regards,
Jean-Roc Morreale


From boxerab at gmail.com  Mon May  3 12:52:01 2021
From: boxerab at gmail.com (Aaron Boxer)
Date: Mon, 3 May 2021 15:52:01 -0400
Subject: [gdal-dev] New JP2Grok Driver for JPEG 2000
In-Reply-To: <f72469e43a6e9e3dc8d01ce506c2b17115566ea5.camel@enoreth.net>
References: <CAK8GPyCwf8t2PrbsY9r-ghJY0DN75RRYfmt7GV4Mwd-jHWfriQ@mail.gmail.com>
 <f72469e43a6e9e3dc8d01ce506c2b17115566ea5.camel@enoreth.net>
Message-ID: <CAK8GPyDLmiUCbLKcWkHkMjW3WC=TAc2HC19MHQTs1PSuy5sb3A@mail.gmail.com>

Hi Jean-Roc,
Good question - unfortunately OpenJPEG doesn't currently support HTJ2K,
it only supports JPEG 2000 Part 1. I am sure that this will eventually be
integrated,
but it isn't there at the moment.
Cheers,
Aaron

On Mon, May 3, 2021 at 12:05 PM Jean-Roc Morreale (ml) <
jrmorreale_ml at enoreth.net> wrote:

> Hi Aaron,
>
> Is the HTJ2K's output still readable by a regular GDAL/OpenJPEG ?
>
> Regards,
> Jean-Roc Morreale
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210503/2786ffa0/attachment.html>

From sean at mapbox.com  Mon May  3 13:17:33 2021
From: sean at mapbox.com (Sean Gillies)
Date: Mon, 3 May 2021 14:17:33 -0600
Subject: [gdal-dev] New JP2Grok Driver for JPEG 2000
In-Reply-To: <CAK8GPyDLmiUCbLKcWkHkMjW3WC=TAc2HC19MHQTs1PSuy5sb3A@mail.gmail.com>
References: <CAK8GPyCwf8t2PrbsY9r-ghJY0DN75RRYfmt7GV4Mwd-jHWfriQ@mail.gmail.com>
 <f72469e43a6e9e3dc8d01ce506c2b17115566ea5.camel@enoreth.net>
 <CAK8GPyDLmiUCbLKcWkHkMjW3WC=TAc2HC19MHQTs1PSuy5sb3A@mail.gmail.com>
Message-ID: <CADPhZXzG6tW7xV05L-FiV7FxYe19evzrT6BoQ7n=u8CmHh34Pg@mail.gmail.com>

Hi  Aaron, and everyone,

It seems like interoperability could be harmed if we release GDAL with a
JP2 driver that writes JPEG 2000 files that the main open source JP2 driver
can't read. Would it make sense to add compatibility to OpenJPEG before the
PR gets merged? Or are we already in a state of inoperability between
JP2ECW, JP2MRSID, and JP2OpenJPEG?

On Mon, May 3, 2021 at 1:52 PM Aaron Boxer <boxerab at gmail.com> wrote:

> Hi Jean-Roc,
> Good question - unfortunately OpenJPEG doesn't currently support HTJ2K,
> it only supports JPEG 2000 Part 1. I am sure that this will eventually be
> integrated,
> but it isn't there at the moment.
> Cheers,
> Aaron
>
> On Mon, May 3, 2021 at 12:05 PM Jean-Roc Morreale (ml) <
> jrmorreale_ml at enoreth.net> wrote:
>
>> Hi Aaron,
>>
>> Is the HTJ2K's output still readable by a regular GDAL/OpenJPEG ?
>>
>> Regards,
>> Jean-Roc Morreale
>
>
-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210503/386130ee/attachment.html>

From even.rouault at spatialys.com  Mon May  3 13:40:00 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 3 May 2021 22:40:00 +0200
Subject: [gdal-dev] New JP2Grok Driver for JPEG 2000
In-Reply-To: <CADPhZXzG6tW7xV05L-FiV7FxYe19evzrT6BoQ7n=u8CmHh34Pg@mail.gmail.com>
References: <CAK8GPyCwf8t2PrbsY9r-ghJY0DN75RRYfmt7GV4Mwd-jHWfriQ@mail.gmail.com>
 <f72469e43a6e9e3dc8d01ce506c2b17115566ea5.camel@enoreth.net>
 <CAK8GPyDLmiUCbLKcWkHkMjW3WC=TAc2HC19MHQTs1PSuy5sb3A@mail.gmail.com>
 <CADPhZXzG6tW7xV05L-FiV7FxYe19evzrT6BoQ7n=u8CmHh34Pg@mail.gmail.com>
Message-ID: <26f1c92c-587c-95d2-05cf-fa8a78ff7440@spatialys.com>

Sean,

my quick look at the JP2Grok driver code is that it doesn't generate the 
HTJ2K / Part 15 variant of JPEG2000, at least there's nothing suggesting 
that (didn't try running it). I guess that there would be a need for a 
dedicated creation option in the driver for that to happen, so there 
shouldn't be interoperability issues of the files it generates with 
other JPEG2000 capable drivers.

I'm not sure which support of HTJ2K the ECW and MrSID SDKs have. I 
believe there's such support Kakadu in recent releases, but might be 
subject to extra fees (or perhaps for? faster support)

There's a BSD 2 licensed implementation of HTJ2K in 
https://github.com/aous72/OpenJPH . From what I see, Grok HTJ2K support 
has incorporated some of that code.? So for a BSD 2 compatible use in 
GDAL, either a GDAL driver should be built from OpenJPH as a standalone 
library, or relevant parts of OpenJPH should be "ported" to OpenJPEG.

Even

Le 03/05/2021 ? 22:17, Sean Gillies via gdal-dev a ?crit?:
> Hi? Aaron, and everyone,
>
> It seems like interoperability could be harmed if we release GDAL with 
> a JP2 driver that writes JPEG 2000 files that the main open source JP2 
> driver can't read. Would it make sense to add compatibility to 
> OpenJPEG before the PR gets merged? Or are we already in a state of 
> inoperability between JP2ECW, JP2MRSID, and JP2OpenJPEG?
>
> On Mon, May 3, 2021 at 1:52 PM Aaron Boxer <boxerab at gmail.com 
> <mailto:boxerab at gmail.com>> wrote:
>
>     Hi Jean-Roc,
>     Good question - unfortunately OpenJPEG doesn't currently support
>     HTJ2K,
>     it only supports JPEG 2000 Part 1. I am sure that this will
>     eventually be integrated,
>     but it isn't there at the moment.
>     Cheers,
>     Aaron
>
>     On Mon, May 3, 2021 at 12:05 PM Jean-Roc Morreale (ml)
>     <jrmorreale_ml at enoreth.net <mailto:jrmorreale_ml at enoreth.net>> wrote:
>
>         Hi Aaron,
>
>         Is the HTJ2K's output still readable by a regular GDAL/OpenJPEG ?
>
>         Regards,
>         Jean-Roc Morreale
>
>
> -- 
> Sean Gillies
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210503/d1df61cc/attachment.html>

From boxerab at gmail.com  Mon May  3 17:12:05 2021
From: boxerab at gmail.com (Aaron Boxer)
Date: Mon, 3 May 2021 20:12:05 -0400
Subject: [gdal-dev] New JP2Grok Driver for JPEG 2000
In-Reply-To: <26f1c92c-587c-95d2-05cf-fa8a78ff7440@spatialys.com>
References: <CAK8GPyCwf8t2PrbsY9r-ghJY0DN75RRYfmt7GV4Mwd-jHWfriQ@mail.gmail.com>
 <f72469e43a6e9e3dc8d01ce506c2b17115566ea5.camel@enoreth.net>
 <CAK8GPyDLmiUCbLKcWkHkMjW3WC=TAc2HC19MHQTs1PSuy5sb3A@mail.gmail.com>
 <CADPhZXzG6tW7xV05L-FiV7FxYe19evzrT6BoQ7n=u8CmHh34Pg@mail.gmail.com>
 <26f1c92c-587c-95d2-05cf-fa8a78ff7440@spatialys.com>
Message-ID: <CAK8GPyAozZCPBF9cJWFuALFaa+HhhOCf_BMbEGSXfoxGozgO0Q@mail.gmail.com>

Hi Sean and Even,
Correct, the current JP2Grok does not support the generation of Part 15
code streams.
It's trivial to add, as it just involves adding a new encoding mode, but I
was waiting for a merge
before looking into new driver features.

Also, yes, OpenJPH is being used for the new entropy encoder. As OpenJPH
library is in its
infancy and is missing many features of a mature implementation, I would
recommend
the best approach to be integrating OpenJPH into OpenJPEG and upgrading the
gdal driver
accordingly.

Cheers,
Aaron

On Mon, May 3, 2021 at 4:40 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Sean,
>
> my quick look at the JP2Grok driver code is that it doesn't generate the
> HTJ2K / Part 15 variant of JPEG2000, at least there's nothing suggesting
> that (didn't try running it). I guess that there would be a need for a
> dedicated creation option in the driver for that to happen, so there
> shouldn't be interoperability issues of the files it generates with other
> JPEG2000 capable drivers.
>
> I'm not sure which support of HTJ2K the ECW and MrSID SDKs have. I believe
> there's such support Kakadu in recent releases, but might be subject to
> extra fees (or perhaps for  faster support)
>
> There's a BSD 2 licensed implementation of HTJ2K in
> https://github.com/aous72/OpenJPH . From what I see, Grok HTJ2K support
> has incorporated some of that code.  So for a BSD 2 compatible use in GDAL,
> either a GDAL driver should be built from OpenJPH as a standalone library,
> or relevant parts of OpenJPH should be "ported" to OpenJPEG.
>
> Even
> Le 03/05/2021 ? 22:17, Sean Gillies via gdal-dev a ?crit :
>
> Hi  Aaron, and everyone,
>
> It seems like interoperability could be harmed if we release GDAL with a
> JP2 driver that writes JPEG 2000 files that the main open source JP2 driver
> can't read. Would it make sense to add compatibility to OpenJPEG before the
> PR gets merged? Or are we already in a state of inoperability between
> JP2ECW, JP2MRSID, and JP2OpenJPEG?
>
> On Mon, May 3, 2021 at 1:52 PM Aaron Boxer <boxerab at gmail.com> wrote:
>
>> Hi Jean-Roc,
>> Good question - unfortunately OpenJPEG doesn't currently support HTJ2K,
>> it only supports JPEG 2000 Part 1. I am sure that this will eventually be
>> integrated,
>> but it isn't there at the moment.
>> Cheers,
>> Aaron
>>
>> On Mon, May 3, 2021 at 12:05 PM Jean-Roc Morreale (ml) <
>> jrmorreale_ml at enoreth.net> wrote:
>>
>>> Hi Aaron,
>>>
>>> Is the HTJ2K's output still readable by a regular GDAL/OpenJPEG ?
>>>
>>> Regards,
>>> Jean-Roc Morreale
>>
>>
> --
> Sean Gillies
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210503/c114619d/attachment-0001.html>

From THESUSHIMAN12 at GMAIL.COM  Mon May  3 22:04:22 2021
From: THESUSHIMAN12 at GMAIL.COM (Romeo Alvaraz)
Date: Mon, 3 May 2021 22:04:22 -0700 (MST)
Subject: [gdal-dev] GDAL /vsistdin/ 1MB limit
Message-ID: <1620104662125-0.post@n6.nabble.com>

Hi there, 

I've got a PDF geo-referencing implementation in place which makes use of
the gdal_translate utility.  Recently I've been testing out and
implementation to read in the input content from standard input stream using
the  /vsistdin/ handler.  

According to the documentation for /vsistdin/ handler -  "Full seek in the
first MB of a file is possible" and I've encountered the following error(s)
when the content I've attempted to pipe in is greater than 1MB. 

ERROR 6: Seek(SEEK_END) unsupported on /vsistdin when stdin > 1 MB
ERROR 6: backward Seek() unsupported on /vsistdin above first MB

Would this be a hard limit of 1MB placed the content size which can be piped
in via /vsistdin/(the source code and the error message suggests it migh me)
or  can it be configured? Has anyone encountered this before? 

Any suggestions will be appreciated

Thanks. 



Platform: Windows 64-bit
Version: GDAL 2.4.4, released 2020/01/08 sourced from
https://www.gisinternals.com/release.php




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From j1 at jimenezshaw.com  Tue May  4 01:41:48 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 4 May 2021 10:41:48 +0200
Subject: [gdal-dev] Cannot compile 3.3.0 without geos
Message-ID: <CADRrdKsp51piYb8S-psPuLT5a8GLRCXUpf5GwB3i=SJuSCca=w@mail.gmail.com>

Hi

I am trying to compile the new release 3.3.0 in Ubuntu 18.04 with the
option "--without-geos".

The message is this:

GEOS support disabled
configure: error: GEOS support explicitly enabled, but geos-config could
not be found

I tried also changing to "--with-geo=no", with the same result. (Both
options are equivalent, right?)

Looking at the news, I see one entry related:
* configure: Ensure --with-geos/sfcgal fail if unavailable.

Should I do something different to disable geos?

Thanks
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210504/1200541f/attachment.html>

From thomas.bonfort at gmail.com  Tue May  4 01:44:42 2021
From: thomas.bonfort at gmail.com (thomas bonfort)
Date: Tue, 4 May 2021 10:44:42 +0200
Subject: [gdal-dev] Cannot compile 3.3.0 without geos
In-Reply-To: <CADRrdKsp51piYb8S-psPuLT5a8GLRCXUpf5GwB3i=SJuSCca=w@mail.gmail.com>
References: <CADRrdKsp51piYb8S-psPuLT5a8GLRCXUpf5GwB3i=SJuSCca=w@mail.gmail.com>
Message-ID: <CAOM3y2iqik0eXtP2t5bqCqzorsKu=pzaWvsu4RTjER4yKj1Jwg@mail.gmail.com>

It's known regression, see https://github.com/OSGeo/gdal/issues/3782

--
thomas

On Tue, May 4, 2021 at 10:42 AM Javier Jimenez Shaw <j1 at jimenezshaw.com>
wrote:

> Hi
>
> I am trying to compile the new release 3.3.0 in Ubuntu 18.04 with the
> option "--without-geos".
>
> The message is this:
>
> GEOS support disabled
> configure: error: GEOS support explicitly enabled, but geos-config could
> not be found
>
> I tried also changing to "--with-geo=no", with the same result. (Both
> options are equivalent, right?)
>
> Looking at the news, I see one entry related:
> * configure: Ensure --with-geos/sfcgal fail if unavailable.
>
> Should I do something different to disable geos?
>
> Thanks
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210504/52d5d2eb/attachment.html>

From even.rouault at spatialys.com  Tue May  4 02:25:58 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 4 May 2021 11:25:58 +0200
Subject: [gdal-dev] GDAL /vsistdin/ 1MB limit
In-Reply-To: <1620104662125-0.post@n6.nabble.com>
References: <1620104662125-0.post@n6.nabble.com>
Message-ID: <38621d0e-a3ac-e783-59c7-938119720091@spatialys.com>

/vsistdin/ is only meant for format whose reading is compatible of a 
streamed reading, that is you read bytes as they come from stdin. Which 
is only a subset of formats, and PDF is not in that subset (typically 
the cross reference table to objects is always put at the end of the 
file, hence the Seek(SEEK_END error you get). The 1 MB limit corresponds 
to the amount of data that is cached at the beginning of the file (this 
helps for drivers that do almost streamed reading, but do some backward 
seeks in their header part). Beyond that, /vsimem/ doesn't buffer 
anything, so if the driver? tries to seek back, that? fails. This 1MB 
limit could potentially be changed to be runtime configured, but that's 
not the case currently.

Le 04/05/2021 ? 07:04, Romeo Alvaraz a ?crit?:
> Hi there,
>
> I've got a PDF geo-referencing implementation in place which makes use of
> the gdal_translate utility.  Recently I've been testing out and
> implementation to read in the input content from standard input stream using
> the  /vsistdin/ handler.
>
> According to the documentation for /vsistdin/ handler -  "Full seek in the
> first MB of a file is possible" and I've encountered the following error(s)
> when the content I've attempted to pipe in is greater than 1MB.
>
> ERROR 6: Seek(SEEK_END) unsupported on /vsistdin when stdin > 1 MB
> ERROR 6: backward Seek() unsupported on /vsistdin above first MB
>
> Would this be a hard limit of 1MB placed the content size which can be piped
> in via /vsistdin/(the source code and the error message suggests it migh me)
> or  can it be configured? Has anyone encountered this before?
>
> Any suggestions will be appreciated
>
> Thanks.
>
>
>
> Platform: Windows 64-bit
> Version: GDAL 2.4.4, released 2020/01/08 sourced from
> https://www.gisinternals.com/release.php
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Tue May  4 02:35:03 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 4 May 2021 11:35:03 +0200
Subject: [gdal-dev] New JP2Grok Driver for JPEG 2000
In-Reply-To: <CAK8GPyCwf8t2PrbsY9r-ghJY0DN75RRYfmt7GV4Mwd-jHWfriQ@mail.gmail.com>
References: <CAK8GPyCwf8t2PrbsY9r-ghJY0DN75RRYfmt7GV4Mwd-jHWfriQ@mail.gmail.com>
Message-ID: <8b95f32f-e8af-d989-7d4f-30026b083ee2@spatialys.com>

Aaron,

did you bench timings using GDAL API & utilities (typically with 
gdal_translate) ? The ones indicated in the PR use the utilities that 
come which each library, but the integration within a GDAL driver might 
have some influence on the timings.

What about single threaded usage ?

Even

Le 03/05/2021 ? 16:59, Aaron Boxer a ?crit?:
> Hi Folks,
>
> I would like to draw people's attention once again to the pending JPEG 
> 2000 driver PR
> https://github.com/OSGeo/gdal/pull/3449 
> <https://github.com/OSGeo/gdal/pull/3449>
> which was opened 3 months ago.? Since I last posted, the driver now 
> has an autotest script courtesy of Frank Warmerdam, and all tests are 
> passing.
>
> In a nutshell, performance is 2-5 times faster than the only other 
> viable open source driver, from OpenJPEG, in several common geospatial 
> work flows. And performance rises by around 2X if the new HTJ2K 
> entropy coder is used. The AGPL license will not work for everyone, 
> which is why the driver is disabled by default.
>
> We've already discussed this at length in the previous thread and in 
> the PR, but if you would like to see this new driver merged, please 
> head over to the PR and give it a thumbs up. Or, if you don't want 
> this driver merged, please share your feedback on the PR.
>
> Kind Regards,
> Aaron
>
>
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210504/13213e55/attachment.html>

From andrew.bell.ia at gmail.com  Tue May  4 04:55:26 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 4 May 2021 07:55:26 -0400
Subject: [gdal-dev] Python Binding Update?
Message-ID: <CACJ51z0N6zMGT+GyEJ2njYcMB8LAhtXFAJ_4GVhCHi1S4+CTCg@mail.gmail.com>

Hi,

I recently updated my local GDAL tree from github and it apparently forced
the need to regenerate some Python bindings with SWIG. This modified the
local files:

swig/python/extensions/gdal_array_wrap.cpp
swig/python/osgeo/gdal_array.py

Are these files supposed to be committed to the source repo? Am I supposed
to make a PR with the changes? I believe the SWIG I have is version 4 and
the files in question were previously generated with version 3.

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210504/7f3583ba/attachment-0001.html>

From even.rouault at spatialys.com  Tue May  4 05:21:15 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 4 May 2021 14:21:15 +0200
Subject: [gdal-dev] Python Binding Update?
In-Reply-To: <CACJ51z0N6zMGT+GyEJ2njYcMB8LAhtXFAJ_4GVhCHi1S4+CTCg@mail.gmail.com>
References: <CACJ51z0N6zMGT+GyEJ2njYcMB8LAhtXFAJ_4GVhCHi1S4+CTCg@mail.gmail.com>
Message-ID: <39cd3449-b9b5-9ff4-14db-0383ce588e91@spatialys.com>

Hi Andrew,

> I recently updated my local?GDAL tree from github and it apparently 
> forced the need to regenerate some Python bindings with SWIG. This 
> modified the local files:

Yeah, I also noticed that a few times lately. This is a side effect of 
https://github.com/OSGeo/gdal/pull/3697 . I'm not sure why this happens 
as the timestamps of the generated .cpp files should be higher than the 
source .i files, and the issue is that when they are regenerated the 
'sed' tweaks done in the make generate target aren't applied. You may 
open a ticket about that

>
> swig/python/extensions/gdal_array_wrap.cpp
> swig/python/osgeo/gdal_array.py
>
> Are these files supposed to be committed to the source repo?

Yes and no.

Yes, given how things are set up currently.

No, ideally: see https://github.com/OSGeo/gdal/issues/3562

> Am I supposed to make a PR with the changes?

No

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From boxerab at gmail.com  Tue May  4 05:24:16 2021
From: boxerab at gmail.com (Aaron Boxer)
Date: Tue, 4 May 2021 08:24:16 -0400
Subject: [gdal-dev] New JP2Grok Driver for JPEG 2000
In-Reply-To: <8b95f32f-e8af-d989-7d4f-30026b083ee2@spatialys.com>
References: <CAK8GPyCwf8t2PrbsY9r-ghJY0DN75RRYfmt7GV4Mwd-jHWfriQ@mail.gmail.com>
 <8b95f32f-e8af-d989-7d4f-30026b083ee2@spatialys.com>
Message-ID: <CAK8GPyDCk+qRMyL_L9FeJLuKWfqTNVD-uR_3gR=mu+aV6conyQ@mail.gmail.com>

>
>
> did you bench timings using GDAL API & utilities (typically with
> gdal_translate) ? The ones indicated in the PR use the utilities that come
> which each library, but the integration within a GDAL driver might have
> some influence on the timings.
>

Yes, the timings will definitely be lower with the current driver, as it
doesn't take full advantage of some library features
such as

1. tile cache
2. multi-threading across tiles
3. combination of memory mapping and PLT markers, where parts of
the codestream that don't need to be decoded are not even read from disk at
all.

There's no reason why JP2Grok can't match the library utilities in
performance, once I support
the above features in the driver.


> What about single threaded usage ?
>

I can certainly benchmark this.

Aaron



> Le 03/05/2021 ? 16:59, Aaron Boxer a ?crit :
>
> Hi Folks,
>
> I would like to draw people's attention once again to the pending JPEG
> 2000 driver PR
> https://github.com/OSGeo/gdal/pull/3449
> which was opened 3 months ago.  Since I last posted, the driver now has an
> autotest script courtesy of Frank Warmerdam, and all tests are passing.
>
> In a nutshell, performance is 2-5 times faster than the only other viable
> open source driver, from OpenJPEG, in several common geospatial work flows.
> And performance rises by around 2X if the new HTJ2K entropy coder is used.
> The AGPL license will not work for everyone, which is why the driver is
> disabled by default.
>
> We've already discussed this at length in the previous thread and in the
> PR, but if you would like to see this new driver merged, please head over
> to the PR and give it a thumbs up. Or, if you don't want this driver
> merged, please share your feedback on the PR.
>
> Kind Regards,
> Aaron
>
>
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210504/52d0b7b3/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue May  4 05:51:04 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 4 May 2021 05:51:04 -0700 (MST)
Subject: [gdal-dev] New JP2Grok Driver for JPEG 2000
In-Reply-To: <26f1c92c-587c-95d2-05cf-fa8a78ff7440@spatialys.com>
References: <CAK8GPyCwf8t2PrbsY9r-ghJY0DN75RRYfmt7GV4Mwd-jHWfriQ@mail.gmail.com>
 <f72469e43a6e9e3dc8d01ce506c2b17115566ea5.camel@enoreth.net>
 <CAK8GPyDLmiUCbLKcWkHkMjW3WC=TAc2HC19MHQTs1PSuy5sb3A@mail.gmail.com>
 <CADPhZXzG6tW7xV05L-FiV7FxYe19evzrT6BoQ7n=u8CmHh34Pg@mail.gmail.com>
 <26f1c92c-587c-95d2-05cf-fa8a78ff7440@spatialys.com>
Message-ID: <1620132664447-0.post@n6.nabble.com>

Hi Even,

You are right, Kakadu 8.x supports HTJ2K. I just had a try with the
kdu_compress demo utility from KDU805 demo apps.  The speed was good,
actually amazing. As a test image I used a 12000x12000 RGB image. The
kdu_compress command I took from this high qualite white-paper
https://htj2k.com/wp-content/uploads/white-paper.pdf.

kdu_compress -i p4433h.ppm -o tmp3.jph -rate 2 -tolerance 0 Qstep=0.001
-quiet -no_weights

As a reference I used

gdal_translate -of gtiff -co compress=jpeg p4433h.tif comp.tif

Results (total time disk-to-disk on Windows, SSD disk, laptop with Intel
core i7)

kdu_compress - JPH: 1.4 seconds (file size 36 MB, fixed size defined by
option -rate 2)
kdu_compress - JPH: 1.1 seconds (file size 90 MB, fixed size defined by
option -rate 5)
gdal_translate - TIFF: 13.1 seconds (file size 92 MB)

The Kakadu demo applications that can be acquired on request from the Kakadu
site are compiled without libtiff and therefore the input must be in ppm
format. Those who have access to Kakadu source code can compile the
applications with "KDU_INCLUDE_TIFF".

-Jukka Rahkonen-




Even Rouault-2 wrote
> I'm not sure which support of HTJ2K the ECW and MrSID SDKs have. I 
> believe there's such support Kakadu in recent releases, but might be 
> subject to extra fees (or perhaps for? faster support)





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Tue May  4 06:04:14 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 4 May 2021 15:04:14 +0200
Subject: [gdal-dev] New JP2Grok Driver for JPEG 2000
In-Reply-To: <1620132664447-0.post@n6.nabble.com>
References: <CAK8GPyCwf8t2PrbsY9r-ghJY0DN75RRYfmt7GV4Mwd-jHWfriQ@mail.gmail.com>
 <f72469e43a6e9e3dc8d01ce506c2b17115566ea5.camel@enoreth.net>
 <CAK8GPyDLmiUCbLKcWkHkMjW3WC=TAc2HC19MHQTs1PSuy5sb3A@mail.gmail.com>
 <CADPhZXzG6tW7xV05L-FiV7FxYe19evzrT6BoQ7n=u8CmHh34Pg@mail.gmail.com>
 <26f1c92c-587c-95d2-05cf-fa8a78ff7440@spatialys.com>
 <1620132664447-0.post@n6.nabble.com>
Message-ID: <927bcf0b-18dc-f2c0-25f6-e61535fee486@spatialys.com>


> gdal_translate -of gtiff -co compress=jpeg p4433h.tif comp.tif

for the gdal_translate to JPEG compressed TIFF, adding -co 
NUM_THREADS=ALL_CPUS should help to keep the comparison fair, and if you 
use gisinternal builds, I'm not completely sure they use libjpeg-turbo, 
which would bring another performance boost.

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Tue May  4 06:14:03 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 4 May 2021 06:14:03 -0700 (MST)
Subject: [gdal-dev] New JP2Grok Driver for JPEG 2000
In-Reply-To: <927bcf0b-18dc-f2c0-25f6-e61535fee486@spatialys.com>
References: <CAK8GPyCwf8t2PrbsY9r-ghJY0DN75RRYfmt7GV4Mwd-jHWfriQ@mail.gmail.com>
 <f72469e43a6e9e3dc8d01ce506c2b17115566ea5.camel@enoreth.net>
 <CAK8GPyDLmiUCbLKcWkHkMjW3WC=TAc2HC19MHQTs1PSuy5sb3A@mail.gmail.com>
 <CADPhZXzG6tW7xV05L-FiV7FxYe19evzrT6BoQ7n=u8CmHh34Pg@mail.gmail.com>
 <26f1c92c-587c-95d2-05cf-fa8a78ff7440@spatialys.com>
 <1620132664447-0.post@n6.nabble.com>
 <927bcf0b-18dc-f2c0-25f6-e61535fee486@spatialys.com>
Message-ID: <1620134043915-0.post@n6.nabble.com>

Hi,

gdal_translate -of gtiff -co compress=jpeg p4433h.tif -co
NUM_THREADS=ALL_CPUS comp.tif

Time: 4.7 seconds (with GDAL 3.3.0 gisinternals build)
Time: 11.5 seconds (with GDAL 3.1.4 OSGeo4W build)

-Jukka-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Tue May  4 06:41:05 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 4 May 2021 15:41:05 +0200
Subject: [gdal-dev] Motion: promote GDAL 3.2.3 RC1
In-Reply-To: <9ae93e39-360e-cac2-84c1-98ed81dededf@spatialys.com>
References: <9ae93e39-360e-cac2-84c1-98ed81dededf@spatialys.com>
Message-ID: <e41bcfc2-3cee-6246-655b-f1f8cc0bb7ce@spatialys.com>


> Motion:
>
> Adopt GDAL 3.2.3 RC1 as final 3.2.3 release
>
Passed with +1 from JukkaR and myself

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Tue May  4 07:06:15 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 4 May 2021 16:06:15 +0200
Subject: [gdal-dev] GDAL 3.2.3 is released
Message-ID: <db06b95f-5dd0-2137-795e-54938ad963a5@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to announce the
release of the GDAL/OGR 3.2.3 bug fix version, the last one in the 3.2 
series, and
just for those who can't yet update to the yesterday 3.3.0 release.

Consult the release notes for the list of issues addressed :
 ? https://github.com/OSGeo/gdal/blob/v3.2.3/gdal/NEWS

The sources are available at:

 ??? https://download.osgeo.org/gdal/3.2.3/gdal-3.2.3.tar.xz
 ??? https://download.osgeo.org/gdal/3.2.3/gdal-3.2.3.tar.gz
 ??? https://download.osgeo.org/gdal/3.2.3/gdal323.zip
 ??? https://download.osgeo.org/gdal/3.2.3/gdal-grass-3.2.3.tar.gz

Also note that GDAL 3.2.3 will be the last release to support Python 2.7.

It's been an exciting time in GDAL, as our sustainable GDAL initiative 
has attracted a number of major sponsors, which should bring more energy 
to the project in future releases.

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From m.manso at upm.es  Tue May  4 10:11:48 2021
From: m.manso at upm.es (Miguel A. Manso)
Date: Tue, 4 May 2021 19:11:48 +0200
Subject: [gdal-dev] About gdal RasterizeLayer
Message-ID: <269e299d-40c2-f044-4a13-34f2c90967bb@upm.es>

Dear all

I have a multiline layer type (tracking) and I want to make a heat map 
(densities) on a buffer of them, so that in those places where several 
buffers overlap the density is added as many times as lines overlap.

Now I'm doing it with a python script that reads from a shp the lines, 
generates a buffer and rasterize the polygon filling it with a given 
value with gda.RasterizeLayer(). I read the image as an array and with 
numpy I add it to another array (accumulating). When I finish I convert 
it to an image and save it in a geotiff.

This procedure is relatively slow. Especially if you have to do it for 
many lines.

My question is along the lines of whether the RasterizeLayer function 
itself could do this process in a more efficient way, making the burning 
of the objects not an OR operation but an arithmetic sum...

Any suggestions would be welcome.

Regards
Miguel A. Manso



From Matt.Wilkie at yukon.ca  Tue May  4 10:33:51 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 4 May 2021 17:33:51 +0000
Subject: [gdal-dev] Gdal_translate batch processing
In-Reply-To: <1619699747135-0.post@n6.nabble.com>
References: <1619699747135-0.post@n6.nabble.com>
Message-ID: <1e28622da83c409c923b19bbc62d2734@yukon.ca>

Hi Gulnihal,

Something like this should work:

    pushd C:\Users\HP\Desktop\modis
    for /r %F in (*.hdf) do @echo gdal_translate -sds %F %~dpnF.tif
    popd


This is a dry run to show what it will attempt, it won't actually do anything. Remove the "@echo" part to make it active. Double the % to use in a batch file (so "for /r %%F ...").

For help on what is being done here see:

 * https://ss64.com/nt/for_r.html
 * https://ss64.com/nt/syntax-args.html - what the "%~dpnF" part is doing.
 * https://ss64.com/nt/syntax-percent.html


Cheers,

-Matt

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of gnihalk
Sent: April 29, 2021 5:36 AM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Gdal_translate batch processing

<strong>*** External email: Do not click on links or attachments except from trusted senders. *** ******************************************************************************************</strong>
<br>
<br>
Hi you all. I have a huge MODIS dataset and I need to translate them to tiff but each data is in a different sub-folder.
C:\Users\HP\Desktop\modis\5000000889913\5000000889913\88258783\MOD10A2.2016322095024.hdf
C:\Users\HP\Desktop\modis\5000000889913\5000000889913\96113659\MOD10A2.A2016321.h20v05.006.2016340133152.hdf
....
.....
the dataset sub-folders go like this...

and the code that im trying to run is:
for /R C:\Users\HP\Desktop\modis\5000000889913\5000000889913\88258783 %f IN
(MOD10A2.2016322095024.hdf) do gdal_translate.exe -sds -of gtiff %f C:\Users\HP\Desktop\modis\5000000889913\5000000889913\88258783\MOD10A2.2016322095024.tiff

I tried to make a loop for all subfolders that I have but I got an error massage. I would appreciate it if I can take your opinions about it. I am also not sure that I post this question in true title/section.
Thank you,
Gulnihal




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue May  4 11:07:16 2021
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 4 May 2021 14:07:16 -0400
Subject: [gdal-dev] About gdal RasterizeLayer
In-Reply-To: <269e299d-40c2-f044-4a13-34f2c90967bb@upm.es>
References: <269e299d-40c2-f044-4a13-34f2c90967bb@upm.es>
Message-ID: <CA+YzLBf40GcZHaP3TcAYLf9haaJGCJzHFn1x4ex89qgi81y94w@mail.gmail.com>

Miguel,

I can't seem to find this in the docs, but I think what you want is
"MERGE_ALG" set to ADD instead of the default REPLACE.

https://github.com/OSGeo/gdal/blob/master/gdal/alg/gdalrasterize.cpp#L1165

This doesn't address the buffering (I guess you might still want to buffer
the whole set), but it should take care of the additive step.

I actually implemented this as part of a programming test for my current
job - to build heatmaps of satellite coverage.

Best regards,
Frank


On Tue, May 4, 2021 at 1:30 PM Miguel A. Manso <m.manso at upm.es> wrote:

> Dear all
>
> I have a multiline layer type (tracking) and I want to make a heat map
> (densities) on a buffer of them, so that in those places where several
> buffers overlap the density is added as many times as lines overlap.
>
> Now I'm doing it with a python script that reads from a shp the lines,
> generates a buffer and rasterize the polygon filling it with a given
> value with gda.RasterizeLayer(). I read the image as an array and with
> numpy I add it to another array (accumulating). When I finish I convert
> it to an image and save it in a geotiff.
>
> This procedure is relatively slow. Especially if you have to do it for
> many lines.
>
> My question is along the lines of whether the RasterizeLayer function
> itself could do this process in a more efficient way, making the burning
> of the objects not an OR operation but an arithmetic sum...
>
> Any suggestions would be welcome.
>
> Regards
> Miguel A. Manso
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210504/2022e85d/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue May  4 12:41:06 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 4 May 2021 12:41:06 -0700 (MST)
Subject: [gdal-dev] About gdal RasterizeLayer
In-Reply-To: <CA+YzLBf40GcZHaP3TcAYLf9haaJGCJzHFn1x4ex89qgi81y94w@mail.gmail.com>
References: <269e299d-40c2-f044-4a13-34f2c90967bb@upm.es>
 <CA+YzLBf40GcZHaP3TcAYLf9haaJGCJzHFn1x4ex89qgi81y94w@mail.gmail.com>
Message-ID: <1620157266938-0.post@n6.nabble.com>

Hi,

I tried if someone who don't know Python could do about the same with
gdal_rasterize https://gdal.org/programs/gdal_rasterize.html and I had some
success.


gdal_rasterize -dialect sqlite -sql "select st_buffer(geometry,0.01) from
states" -burn 100 -of GTIFF -ot byte -tr 0.1 0.1 -add states.shp
testburn.tif

I used byte type and burn value 100 for making quick visible result. The
default type is Float64 and it has room for much more overlapping geometries
than two.

-Jukka Rahkonen-


Frank Warmerdam wrote
> Miguel,
> 
> I can't seem to find this in the docs, but I think what you want is
> "MERGE_ALG" set to ADD instead of the default REPLACE.
> 
> https://github.com/OSGeo/gdal/blob/master/gdal/alg/gdalrasterize.cpp#L1165
> 
> This doesn't address the buffering (I guess you might still want to buffer
> the whole set), but it should take care of the additive step.
> 
> I actually implemented this as part of a programming test for my current
> job - to build heatmaps of satellite coverage.
> 
> Best regards,
> Frank
> 
> 
> On Tue, May 4, 2021 at 1:30 PM Miguel A. Manso &lt;

> m.manso@

> &gt; wrote:
> 
>> Dear all
>>
>> I have a multiline layer type (tracking) and I want to make a heat map
>> (densities) on a buffer of them, so that in those places where several
>> buffers overlap the density is added as many times as lines overlap.
>>
>> Now I'm doing it with a python script that reads from a shp the lines,
>> generates a buffer and rasterize the polygon filling it with a given
>> value with gda.RasterizeLayer(). I read the image as an array and with
>> numpy I add it to another array (accumulating). When I finish I convert
>> it to an image and save it in a geotiff.
>>
>> This procedure is relatively slow. Especially if you have to do it for
>> many lines.
>>
>> My question is along the lines of whether the RasterizeLayer function
>> itself could do this process in a more efficient way, making the burning
>> of the objects not an OR operation but an arithmetic sum...
>>
>> Any suggestions would be welcome.
>>
>> Regards
>> Miguel A. Manso
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> 

> gdal-dev at .osgeo

>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> 
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,

> warmerdam@

> light and sound - activate the windows | +1 650-701-7823
> and watch the world go round - Rush    | Geospatial Software Developer
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From THESUSHIMAN12 at GMAIL.COM  Tue May  4 19:02:38 2021
From: THESUSHIMAN12 at GMAIL.COM (Romeo Alvaraz)
Date: Tue, 4 May 2021 19:02:38 -0700 (MST)
Subject: [gdal-dev] GDAL /vsistdin/ 1MB limit
In-Reply-To: <38621d0e-a3ac-e783-59c7-938119720091@spatialys.com>
References: <1620104662125-0.post@n6.nabble.com>
 <38621d0e-a3ac-e783-59c7-938119720091@spatialys.com>
Message-ID: <1620180158202-0.post@n6.nabble.com>

Thanks Even for the response and clarifications on /vsistdin/.  Our reasons
for attempting to use /vsistdin/ is to avoid having to read a file from the
local file system (which we would have to write to first by other means) on
our remote server. We've been using this in conjunction with /vsistdout/. 

/vsicurl/  was another option we considered for the input but it's not ideal
to our situation.

I'm just wondering  if there is another handler/method you could suggest
that could feed the input directly to gdal_translate in order to bypass use
of file system?

Thanks. 




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From andrew at aitchison.me.uk  Wed May  5 00:32:26 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Wed, 5 May 2021 08:32:26 +0100 (BST)
Subject: [gdal-dev] GDAL /vsistdin/ 1MB limit
In-Reply-To: <1620180158202-0.post@n6.nabble.com>
References: <1620104662125-0.post@n6.nabble.com>
 <38621d0e-a3ac-e783-59c7-938119720091@spatialys.com>
 <1620180158202-0.post@n6.nabble.com>
Message-ID: <8c4626bb-33f9-4e46-eaf9-ff2ee57cb1d0@aitchison.me.uk>

On Tue, 4 May 2021, Romeo Alvaraz wrote:

> Thanks Even for the response and clarifications on /vsistdin/.  Our reasons
> for attempting to use /vsistdin/ is to avoid having to read a file from the
> local file system (which we would have to write to first by other means) on
> our remote server. We've been using this in conjunction with /vsistdout/.
>
> /vsicurl/  was another option we considered for the input but it's not ideal
> to our situation.
>
> I'm just wondering  if there is another handler/method you could suggest
> that could feed the input directly to gdal_translate in order to bypass use
> of file system?

A python script could store the incoming data in /vsimem/ and call 
gdal_translate internally

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From robert.coup at koordinates.com  Wed May  5 01:14:08 2021
From: robert.coup at koordinates.com (Robert Coup)
Date: Wed, 5 May 2021 09:14:08 +0100
Subject: [gdal-dev] GDAL /vsistdin/ 1MB limit
In-Reply-To: <1620180158202-0.post@n6.nabble.com>
References: <1620104662125-0.post@n6.nabble.com>
 <38621d0e-a3ac-e783-59c7-938119720091@spatialys.com>
 <1620180158202-0.post@n6.nabble.com>
Message-ID: <CAFLLRpLXoTk+J=JkGrNyPHmoAsuReOtrraQ=9Ux4=gpWqY==jA@mail.gmail.com>

On Wed, 5 May 2021 at 03:02, Romeo Alvaraz <THESUSHIMAN12 at gmail.com> wrote:
> I'm just wondering  if there is another handler/method you could suggest
> that could feed the input directly to gdal_translate in order to bypass use
> of file system?

If your data easily fits in memory, write it to a tmpfs filesystem
(eg: to /dev/shm/my.pdf)? Doesn't touch the disk so you get the same
performance without the downside of it needing to work as a stream.

Rob :)

From andrew.bell.ia at gmail.com  Wed May  5 06:23:17 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 5 May 2021 09:23:17 -0400
Subject: [gdal-dev] gdal_priv.h and CPL_DLL
Message-ID: <CACJ51z1VKqpmOfrB5r=062M4YbpY4LZLdd+bh4LfM6AmTbVqsQ@mail.gmail.com>

Hi,

I don't understand function declarations in gdal_priv.h being marked
CPL_DLL. I would think that if the functions are exposed, they wouldn't be
exposed from the GDAL shared library. Is this a mistake? Is this for
testing?

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210505/356e0bb0/attachment.html>

From even.rouault at spatialys.com  Wed May  5 06:45:32 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 5 May 2021 15:45:32 +0200
Subject: [gdal-dev] gdal_priv.h and CPL_DLL
In-Reply-To: <CACJ51z1VKqpmOfrB5r=062M4YbpY4LZLdd+bh4LfM6AmTbVqsQ@mail.gmail.com>
References: <CACJ51z1VKqpmOfrB5r=062M4YbpY4LZLdd+bh4LfM6AmTbVqsQ@mail.gmail.com>
Message-ID: <61d5a620-bc56-62d2-f1bf-0ec328c9c3ba@spatialys.com>


Le 05/05/2021 ? 15:23, Andrew Bell a ?crit?:
> Hi,
>
> I don't understand function declarations in gdal_priv.h being marked 
> CPL_DLL. I would think that if the functions are exposed, they 
> wouldn't be exposed from the GDAL shared library. Is this a mistake? 
> Is this for testing?
Mostly because they are needed by drivers built as plugins. Anyway, the 
_priv.h is somewhat misleading, as they C++ classes are also exported to 
be usable by C++ users
>
> Thanks,
>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210505/0ded3b20/attachment.html>

From j1 at jimenezshaw.com  Wed May  5 09:08:02 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 5 May 2021 18:08:02 +0200
Subject: [gdal-dev] About packages auto-detection
Message-ID: <CADRrdKugMCqeg20ZEcHdxi5SHAPkSnrsJpg4NjG56WqXy8f7LQ@mail.gmail.com>

Hi
>From time to time I have problems with the options that are automatically
selected by configure script on Unix systems (Linux and macOS). The current
behaviour is that if nothing is explicitly specified in the command line
(like --without-geos or --with-zstd=X), the configure script checks if that
particular package is installed in the build machine and links with it if
it is present.
The problem with that approach comes if you later run on a different
machine that might not have that package installed: Then the execution will
fail due to missing libraries. This whole procedure makes the compilation
dependent on the build machine configuration and it is more difficult to
have reproducible builds which are defined solely by code, since you must
remember to add any new option that may appear explicitly in your build
setup. Is there any possibility to disable the auto-detection globally,
i.e. have an option that disables all features that are not explicitly
enabled regardless of the build machine's configuration?

Thanks
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210505/2249e711/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed May  5 13:04:44 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 5 May 2021 20:04:44 +0000
Subject: [gdal-dev] vsicurl and an issue with http 302 redirect in the
 middle of the file
Message-ID: <fff6c569f8ea44eabb160664afca3fb8@maanmittauslaitos.fi>

Hi,

Have a look at https://gis.stackexchange.com/questions/395867/opening-a-grib-from-the-web-with-gdal-in-python-using-vsicurl-throws-error-on-m. There gdalinfo fails with /vsicurl/ somewhere in the middle of the grib2 file when the server sends http 302 as a response for a range request. The file is OK as was tested by downloading it first totally with curl. Could it be that the http "moved permanently" at that stage makes /vsicurl/ to fail?

I made also a few tests and it seems that the error may happen in another http range, but it is always similar:
VSICURL: Got response_code=302
GRIB: ERROR: Ran out of file in Section 7

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210505/9a89c490/attachment.html>

From even.rouault at spatialys.com  Wed May  5 13:19:16 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 5 May 2021 22:19:16 +0200
Subject: [gdal-dev] vsicurl and an issue with http 302 redirect in the
 middle of the file
In-Reply-To: <fff6c569f8ea44eabb160664afca3fb8@maanmittauslaitos.fi>
References: <fff6c569f8ea44eabb160664afca3fb8@maanmittauslaitos.fi>
Message-ID: <3523d4c7-884a-d636-23ac-2862231ccfaf@spatialys.com>

Jukka,

Running with CPL_CURL_VERBOSE=YES shows the following

 > GET 
/data/nccf/com/hrrr/prod/hrrr.20210505/conus/hrrr.t15z.wrfsfcf01.grib2 
HTTP/1.1
Host: ftpprd.ncep.noaa.gov
Accept: */*
Range: bytes=84819968-84836351

* Mark bundle as not supporting multiuse
< HTTP/1.1? 302 Your allowed limit has been reached. Please go to 
https://www.weather.gov/abusive-user-block? for more info
* no chunk, no close, no size. Assume close to signal end
<

So it seems that after a number of quickly consecutive GET requests to 
the server as here, the server no longer want to see us. The 302 HTTP 
error it sends however is not appropriate. 429 "Too many requests" would 
be more appropriate

GRIB files with lots of "messages" / bands like that one aren't really 
cloud friendly, as you have to skip in many parts of the file to get an 
inventory of it.

That said, I see that in that instance, the .grib files are accompanied 
by a sidecar file, like 
https://ftpprd.ncep.noaa.gov/data/nccf/com/hrrr/prod/hrrr.20210505/conus/hrrr.t15z.wrfsfcf01.grib2.idx, 
which I believe is produced by the wgrib utility. We could conceptually 
try to make use of it, however it doesn't contain all metadata that are 
typically retrieved by the driver, so for gdalinfo itself that wouldn't 
be sufficient, but for just a Open() call that might be enough.

I've noted that https://github.com/OSGeo/gdal/issues/3799

Even


Le 05/05/2021 ? 22:04, Rahkonen Jukka (MML) a ?crit?:
>
> Hi,
>
> Have a look at 
> https://gis.stackexchange.com/questions/395867/opening-a-grib-from-the-web-with-gdal-in-python-using-vsicurl-throws-error-on-m 
> <https://gis.stackexchange.com/questions/395867/opening-a-grib-from-the-web-with-gdal-in-python-using-vsicurl-throws-error-on-m>. 
> There gdalinfo fails with /vsicurl/ somewhere in the middle of the 
> grib2 file when the server sends http 302 as a response for a range 
> request. The file is OK as was tested by downloading it first totally 
> with curl. Could it be that the http ?moved permanently? at that stage 
> makes /vsicurl/ to fail?
>
> I made also a few tests and it seems that the error may happen in 
> another http range, but it is always similar:
> VSICURL: Got response_code=302
>
> GRIB: ERROR: Ran out of file in Section 7
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210505/d3d764da/attachment.html>

From Matt.Wilkie at yukon.ca  Wed May  5 14:38:21 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Wed, 5 May 2021 21:38:21 +0000
Subject: [gdal-dev] Gdal doesn't see NaN values as NoData?
In-Reply-To: <24c9bcacb0224d909b213db29ae42788@yukon.ca>
References: <0d3b6253fdcc450f9b47350853607c27@yukon.ca>
 <24c9bcacb0224d909b213db29ae42788@yukon.ca>
Message-ID: <d2cc248089c94b348485b7963ed5fe64@yukon.ca>

Hi Folks,

I have a 32bit NDVI image that I'm told was exported from Google Earth Engine, with possibly a trip through R along the way. In ArcGIS desktop and Qgis there are "nan" values reported for the image collar, however gdalinfo doesn't say anything about them. If I project the image in gdalwarp the output image contains both nan AND nodata. This is rather confusing.

a) Why does gdalinfo not report the presence of nan? Meaning: how do I know when I will need to invoke (b)?
b) What do I need to do so that applications will use nan as nodata? 

Fig1: Projected output. Pink == nodata, red == 0, black == nan.


Here's the file ?https://sft.gov.yk.ca/link/61czGFXOyyFsh387CxbTEF
(255 MB, link valid for 3 months. The image is free and libre.)

Gdalinfo report:

Size is 14742, 6761
Coordinate System is:
GEOGCRS["WGS 84",
??? DATUM["World Geodetic System 1984",
??????? ELLIPSOID["WGS 84",6378137,298.257223563,
??????????? LENGTHUNIT["metre",1]]],
?? ?PRIMEM["Greenwich",0,
??????? ANGLEUNIT["degree",0.0174532925199433]],
??? CS[ellipsoidal,2],
??????? AXIS["geodetic latitude (Lat)",north,
??????????? ORDER[1],
??????????? ANGLEUNIT["degree",0.0174532925199433]],
??????? AXIS["geodetic longitude (Lon)",east,
??????????? ORDER[2],
??????????? ANGLEUNIT["degree",0.0174532925199433]],
??? ID["EPSG",4326]]
Data axis to CRS axis mapping: 2,1
Origin = (-137.935952550438884,61.086337635411589)
Pixel Size = (0.000269494585236,-0.000269494585236)
Metadata:
? AREA_OR_POINT=Area
Image Structure Metadata:
? COMPRESSION=LZW
? INTERLEAVE=BAND
Corner Coordinates:
Upper Left? (-137.9359526,? 61.0863376) (137d56' 9.43"W, 61d 5'10.82"N)
Lower Left? (-137.9359526,? 59.2642847) (137d56' 9.43"W, 59d15'51.43"N)
Upper Right (-133.9630634,? 61.0863376) (133d57'47.03"W, 61d 5'10.82"N)
Lower Right (-133.9630634,? 59.2642847) (133d57'47.03"W, 59d15'51.43"N)
Center????? (-135.9495080,? 60.1753112) (135d56'58.23"W, 60d10'31.12"N)
Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
? Description = NDVI
? Min=-0.888 Max=0.992
? Minimum=-0.888, Maximum=0.992, Mean=0.103, StdDev=0.141
? Overviews: 7371x3381, 3686x1691, 1843x846, 922x423, 461x212
? Metadata:
??? STATISTICS_COVARIANCES=0.01992952634076865
??? STATISTICS_MAXIMUM=0.9921875
??? STATISTICS_MEAN=0.10253506184277
??? STATISTICS_MINIMUM=-0.88755017518997
??? STATISTICS_SKIPFACTORX=1
??? STATISTICS_SKIPFACTORY=1
??? STATISTICS_STDDEV=0.14117197434607


Gdalwarp command:

set _opt=-co compress=zstd -co level=17 -co num_threads=all_cpus -co predictor=yes -co bigtiff=yes

gdalwarp -wm 512 %_opt% -of cog -t_srs epsg:3579 -r med NDVI1984.tif t\NDVI1984.tif


GDAL 3.1.4, released 2020/10/20

Thanks!

Matt Wilkie
Geomatics Analyst
Environment | Technology, Innovation and Mapping
T 867-667-8133 | http://yukon.ca/
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdalwarp-nan-nodata.jpg
Type: image/jpeg
Size: 36834 bytes
Desc: gdalwarp-nan-nodata.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210505/b8ae91ac/attachment-0001.jpg>

From even.rouault at spatialys.com  Wed May  5 14:49:20 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 5 May 2021 23:49:20 +0200
Subject: [gdal-dev] Gdal doesn't see NaN values as NoData?
In-Reply-To: <d2cc248089c94b348485b7963ed5fe64@yukon.ca>
References: <0d3b6253fdcc450f9b47350853607c27@yukon.ca>
 <24c9bcacb0224d909b213db29ae42788@yukon.ca>
 <d2cc248089c94b348485b7963ed5fe64@yukon.ca>
Message-ID: <8fc1257a-2f4f-417f-175e-7ea0cd5a1989@spatialys.com>

Matt,

> a) Why does gdalinfo not report the presence of nan? Meaning: how do I know when I will need to invoke (b)?
It doesn't report nan as the nodata value, because the file lacks the 
GDAL_NODATA tiff tag set at "nan". So the issue is on the producer side.
> b) What do I need to do so that applications will use nan as nodata?

gdalwarp -dstnodata nan ...

or if you want to remap nan to some other value

gdalwarp -dstnodata -9999 ...

In most cases, you'd need to explicitly add the srcnodata value with 
-srcnodata nan , but nan is a special case. When gdalwarp finds a pixel 
at NaN value, be it the declared nodata value or not, it assumes this is 
nodata, hence you can omit -srcnodata nan. Wouldn't be true if 0 or some 
other value was the undeclared nodata? value.


I've some doubt that it is produced by GEE. Seems move to come from Esri 
software seeing:

$ tiffinfo NDVI1984.tif
[...]

 ? Tag 42112: <GDALMetadata>
 ? <Item name="PyramidResamplingType" domain="Esri">NEAREST</Item>
 ? <Item name="DESCRIPTION" sample="0" role="description">NDVI</Item>
</GDALMetadata>

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From Matt.Wilkie at yukon.ca  Wed May  5 15:10:47 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Wed, 5 May 2021 22:10:47 +0000
Subject: [gdal-dev] Gdal doesn't see NaN values as NoData?
In-Reply-To: <8fc1257a-2f4f-417f-175e-7ea0cd5a1989@spatialys.com>
References: <0d3b6253fdcc450f9b47350853607c27@yukon.ca>
 <24c9bcacb0224d909b213db29ae42788@yukon.ca>
 <d2cc248089c94b348485b7963ed5fe64@yukon.ca>
 <8fc1257a-2f4f-417f-175e-7ea0cd5a1989@spatialys.com>
Message-ID: <b891bff5c6354b6fbef16211127904b5@yukon.ca>

>> a) Why does gdalinfo not report the presence of nan? Meaning: how do I know when I will need to invoke (b)?
>
>It doesn't report nan as the nodata value, because the file lacks the GDAL_NODATA tiff tag set at "nan". So the issue is on the producer side.

Ok, noted. I will try trace this backward and report there.


>> b) What do I need to do so that applications will use nan as nodata?
>
>	gdalwarp -dstnodata nan ...
>
>or if you want to remap nan to some other value
>
>	gdalwarp -dstnodata -9999 ...

Wonderful, thank you.

>In most cases, you'd need to explicitly add the srcnodata value with 
>-srcnodata nan , but nan is a special case. When gdalwarp finds a pixel 
>at NaN value, be it the declared nodata value or not, it assumes this is 
>nodata, hence you can omit -srcnodata nan. Wouldn't be true if 0 or some 
>other value was the undeclared nodata? value.

Hmmm. Part of me expects gdalwarp to then record it found and used undeclared nodata by setting the "nodata=nan" in the metadata. Regardless thanks for this important detail.

-Matt

From Daniel.Evans at jbarisk.com  Fri May  7 01:47:58 2021
From: Daniel.Evans at jbarisk.com (Daniel Evans)
Date: Fri, 7 May 2021 08:47:58 +0000
Subject: [gdal-dev] Should AddPoint(x, y) promote geometries to 3D?
Message-ID: <LO2P123MB46527D4B1D9DFBB8C5796EEE95579@LO2P123MB4652.GBRP123.PROD.OUTLOOK.COM>

Using the Python bindings on GDAL 3.2.1 / GEOS 3.8.1, adding a point to a 2D LinearRing automatically promotes it to a 3D geometry:

from osgeo import ogr
ring = ogr.Geometry(ogr.wkbLinearRing)
ring.GetGeometryType()  # 2
ring.GetCoordinateDimension()  # 2

ring.AddPoint(0, 0)
ring.GetGeometryType()  # -2147483646
ring.GetCoordinateDimension()  # 3


Given that the `z` argument for AddPoint is optional, I'd assumed that the behaviour was to leave a 2D geometry as 2D if only x and y are specified; the Python documentation doesn't include any notes on the behaviour. Does one have to always use AddPoint_2D when dealing with 2D geometries?


Dr Daniel Evans
Software Developer


e: Daniel.Evans at jbarisk.com
t: +44 (0)1756 799919
www.jbarisk.com
All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system. 
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210507/3c12d5bc/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image309140.png
Type: image/png
Size: 9886 bytes
Desc: image309140.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210507/3c12d5bc/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image784540.png
Type: image/png
Size: 651 bytes
Desc: image784540.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210507/3c12d5bc/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image864267.png
Type: image/png
Size: 715 bytes
Desc: image864267.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210507/3c12d5bc/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image135223.png
Type: image/png
Size: 966 bytes
Desc: image135223.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210507/3c12d5bc/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image644139.png
Type: image/png
Size: 784 bytes
Desc: image644139.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210507/3c12d5bc/attachment-0009.png>

From even.rouault at spatialys.com  Fri May  7 02:21:19 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 7 May 2021 11:21:19 +0200
Subject: [gdal-dev] Should AddPoint(x, y) promote geometries to 3D?
In-Reply-To: <LO2P123MB46527D4B1D9DFBB8C5796EEE95579@LO2P123MB4652.GBRP123.PROD.OUTLOOK.COM>
References: <LO2P123MB46527D4B1D9DFBB8C5796EEE95579@LO2P123MB4652.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <9622914e-fb06-f581-6d2f-3d31cce25b21@spatialys.com>


Le 07/05/2021 ? 10:47, Daniel Evans a ?crit?:
>
> Using the Python bindings on GDAL 3.2.1 / GEOS 3.8.1, adding a point 
> to a 2D LinearRing automatically promotes it to a 3D geometry:
>
> from osgeo import ogr
>
> ring = ogr.Geometry(ogr.wkbLinearRing)
>
> ring.GetGeometryType() # 2
>
> ring.GetCoordinateDimension() # 2
>
> ring.AddPoint(0, 0)
>
> ring.GetGeometryType() # -2147483646
>
> ring.GetCoordinateDimension() # 3
>
> Given that the `z` argument for AddPoint is optional, I?d assumed that 
> the behaviour was to leave a 2D geometry as 2D if only x and y are 
> specified; the Python documentation doesn?t include any notes on the 
> behaviour. Does one have to always use AddPoint_2D when dealing with 
> 2D geometries?
>
yes, you should use AddPoint_2D(), although it is admittedly a bit 
counter intuitive.
>
> *Dr Daniel Evans*
>
> *Software Developer*
>
> e: ? 	*Daniel.Evans at jbarisk.com* <mailto:Daniel.Evans at jbarisk.com>
> t: 	*+44?(0)1756?799919* <tel:+44%20(0)1756%20799919>
>
> 	
>
> *www.jbarisk.com* <http://www.jbarisk.com/>
>
> Facebook <https://www.facebook.com/TheFloodPeople>
>
> 	
> LinkedIn <https://www.linkedin.com/company/jba-risk-management/>
>
> 	
> Twitter <https://twitter.com/JBARisk>
>
> 	
> YouTube <https://www.youtube.com/channel/UC0iatom2jYbW96voW0rlpCw>
>
> 	
>
> All JBA Risk Management's email messages contain confidential 
> information and are intended only for the individual(s) named. If you 
> are not the named addressee you should not disseminate, distribute or 
> copy this e-mail.
> Please notify the sender immediately by email if you have received 
> this email by mistake and delete this email from your system.
> JBA Risk Management Limited is registered in England, company number 
> 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North 
> Yorkshire, BD23 3FD, England.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210507/3addc901/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image309140.png
Type: image/png
Size: 9886 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210507/3addc901/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image784540.png
Type: image/png
Size: 651 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210507/3addc901/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image864267.png
Type: image/png
Size: 715 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210507/3addc901/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image135223.png
Type: image/png
Size: 966 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210507/3addc901/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image644139.png
Type: image/png
Size: 784 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210507/3addc901/attachment-0009.png>

From andrew.bell.ia at gmail.com  Fri May  7 08:40:56 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Fri, 7 May 2021 11:40:56 -0400
Subject: [gdal-dev] exif dump?
Message-ID: <CACJ51z022L2LnPx6A_RxYGpuw+ppY8chra=D57T4fK3ynSup5w@mail.gmail.com>

Hi,

I'm looking at gdalexif.cpp. I found a block of code that is guarded by:

#ifdef DUMP_EXIF_ITEMS

https://github.com/OSGeo/gdal/blob/master/gdal/gcore/gdalexif.cpp#L1545

I can find no other instance of this macro in the codebase so I'm assuming
that it's never defined. Can this block of code go away?

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210507/c808633e/attachment.html>

From even.rouault at spatialys.com  Fri May  7 09:02:50 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 7 May 2021 18:02:50 +0200
Subject: [gdal-dev] exif dump?
In-Reply-To: <CACJ51z022L2LnPx6A_RxYGpuw+ppY8chra=D57T4fK3ynSup5w@mail.gmail.com>
References: <CACJ51z022L2LnPx6A_RxYGpuw+ppY8chra=D57T4fK3ynSup5w@mail.gmail.com>
Message-ID: <2dcc9c22-f0e6-a806-ce7d-93aebd7c11ae@spatialys.com>

Andrew,

as indicated in the commented lines just after the #ifdef, it had been 
used to generate the HTML file of the JPEG doc (the tables at 
https://gdal.org/drivers/raster/jpeg.html), before the .rst era. We can 
probably remove that now

Even

Le 07/05/2021 ? 17:40, Andrew Bell a ?crit?:
> Hi,
>
> I'm looking at gdalexif.cpp. I found a block of code that is guarded by:
>
> #ifdef DUMP_EXIF_ITEMS
>
> https://github.com/OSGeo/gdal/blob/master/gdal/gcore/gdalexif.cpp#L1545 
> <https://github.com/OSGeo/gdal/blob/master/gdal/gcore/gdalexif.cpp#L1545>
>
> I can find no other instance of this macro in the codebase so I'm 
> assuming that it's never defined. Can this block of code go away?
>
> Thanks,
>
> -- 
> Andrew Bell
> andrew.bell.ia at gmail.com <mailto:andrew.bell.ia at gmail.com>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210507/4890cdaa/attachment.html>

From bryandenniskeith at gmail.com  Sat May  8 05:28:08 2021
From: bryandenniskeith at gmail.com (Bryan Keith)
Date: Sat, 8 May 2021 15:28:08 +0300
Subject: [gdal-dev] ubuntu installation issue: free(): invalid pointer,
 Aborted (core dumped)
Message-ID: <c1bc6b9c-42bf-f7d9-aa0d-1aa2d5710616@gmail.com>

Hello,

I am trying to install GDAL on Ubuntu.? When I check the installation, I 
get this:

ogrinfo --version
GDAL 3.2.1, released 2020/12/29
free(): invalid pointer
Aborted (core dumped)

Hmmm, what to do?

I installed like this:

sudo apt-get install gdal-bin

My Python installations look like this:

$ python -V
Python 2.7.18
$ python3 -V
Python 3.8.5

I imagine more information is required to diagnose this problem, but I'm 
not sure what that would be.? Any help is appreciated.? Thank you.

Bryan

From even.rouault at spatialys.com  Sat May  8 05:53:33 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 8 May 2021 14:53:33 +0200
Subject: [gdal-dev] ubuntu installation issue: free(): invalid pointer,
 Aborted (core dumped)
In-Reply-To: <c1bc6b9c-42bf-f7d9-aa0d-1aa2d5710616@gmail.com>
References: <c1bc6b9c-42bf-f7d9-aa0d-1aa2d5710616@gmail.com>
Message-ID: <3e606551-9c28-202b-c203-b6ef043dcdf0@spatialys.com>

 From https://launchpad.net/ubuntu/+source/gdal , no Ubuntu version 
ships with 3.2.1. Perhaps you are using the ubuntugis PPA with 
3.2.1+dfsg-1~focal0 ? I'd suspect some mismatch of underlying libraries, 
perhaps proj.

What's the output of

ldd `which ogrinfo`

and also do

sudo apt install valgrind

and what's the output of

valgrind ogrinfo --version


Le 08/05/2021 ? 14:28, Bryan Keith a ?crit?:
> Hello,
>
> I am trying to install GDAL on Ubuntu.? When I check the installation, 
> I get this:
>
> ogrinfo --version
> GDAL 3.2.1, released 2020/12/29
> free(): invalid pointer
> Aborted (core dumped)
>
> Hmmm, what to do?
>
> I installed like this:
>
> sudo apt-get install gdal-bin
>
> My Python installations look like this:
>
> $ python -V
> Python 2.7.18
> $ python3 -V
> Python 3.8.5
>
> I imagine more information is required to diagnose this problem, but 
> I'm not sure what that would be.? Any help is appreciated. Thank you.
>
> Bryan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From gdt at lexort.com  Sat May  8 05:59:06 2021
From: gdt at lexort.com (Greg Troxel)
Date: Sat, 08 May 2021 08:59:06 -0400
Subject: [gdal-dev] ubuntu installation issue: free(): invalid pointer,
 Aborted (core dumped)
In-Reply-To: <c1bc6b9c-42bf-f7d9-aa0d-1aa2d5710616@gmail.com> (Bryan Keith's
 message of "Sat, 8 May 2021 15:28:08 +0300")
References: <c1bc6b9c-42bf-f7d9-aa0d-1aa2d5710616@gmail.com>
Message-ID: <rmir1ih8jqd.fsf@s1.lexort.com>


Bryan Keith <bryandenniskeith at gmail.com> writes:

> Hello,
>
> I am trying to install GDAL on Ubuntu.? When I check the installation,
> I get this:
>
> ogrinfo --version
> GDAL 3.2.1, released 2020/12/29
> free(): invalid pointer
> Aborted (core dumped)

I would ask Ubuntu.  As no one else has reported an issue like this that
I can remember, and ogrinfo --version works in the obvious way for me,
it's quite possible this is related to something Ubuntu did in
packaging.

It's also possible that it's a latent and usually harmless gdal bug that
is being triggered by higher security settings.  So my other suggestion
is to rebuild the package from soruce using the Ubuntu mechanisms but
turning on debug symbols and run it under a debugger.  How to do that is
out of scope for this list and should also be addressed to Ubuntu.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210508/01d3dd06/attachment.sig>

From runette at gmail.com  Sat May  8 07:21:44 2021
From: runette at gmail.com (Paul Harwood)
Date: Sat, 8 May 2021 15:21:44 +0100
Subject: [gdal-dev] ubuntu installation issue: free(): invalid pointer,
 Aborted (core dumped)
In-Reply-To: <rmir1ih8jqd.fsf@s1.lexort.com>
References: <c1bc6b9c-42bf-f7d9-aa0d-1aa2d5710616@gmail.com>
 <rmir1ih8jqd.fsf@s1.lexort.com>
Message-ID: <CAE8nN5ONsZnTJGMd6dARpexNdKrjJ7Muo-V=PNpVvf2242OvfA@mail.gmail.com>

All of the above - but also when I am using GDAL on Ubuntu I use Conda to
install and have not had any problems.

On Sat, 8 May 2021 at 13:59, Greg Troxel <gdt at lexort.com> wrote:

>
> Bryan Keith <bryandenniskeith at gmail.com> writes:
>
> > Hello,
> >
> > I am trying to install GDAL on Ubuntu.  When I check the installation,
> > I get this:
> >
> > ogrinfo --version
> > GDAL 3.2.1, released 2020/12/29
> > free(): invalid pointer
> > Aborted (core dumped)
>
> I would ask Ubuntu.  As no one else has reported an issue like this that
> I can remember, and ogrinfo --version works in the obvious way for me,
> it's quite possible this is related to something Ubuntu did in
> packaging.
>
> It's also possible that it's a latent and usually harmless gdal bug that
> is being triggered by higher security settings.  So my other suggestion
> is to rebuild the package from soruce using the Ubuntu mechanisms but
> turning on debug symbols and run it under a debugger.  How to do that is
> out of scope for this list and should also be addressed to Ubuntu.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210508/7e9e30fd/attachment.html>

From bryandenniskeith at gmail.com  Sat May  8 07:42:05 2021
From: bryandenniskeith at gmail.com (Bryan Keith)
Date: Sat, 8 May 2021 17:42:05 +0300
Subject: [gdal-dev] ubuntu installation issue: free(): invalid pointer,
 Aborted (core dumped)
In-Reply-To: <3e606551-9c28-202b-c203-b6ef043dcdf0@spatialys.com>
References: <c1bc6b9c-42bf-f7d9-aa0d-1aa2d5710616@gmail.com>
 <3e606551-9c28-202b-c203-b6ef043dcdf0@spatialys.com>
Message-ID: <0b99aae6-4774-9e36-7d69-e92916e279ef@gmail.com>

Yes, I'm using the ubuntugis ppa with 3.2.1+dfsg-1~focal0
but I have no specific need to use that.? Should I use a different version?

Now I'll paste the results of the two commands you requested.

ldd `which ogrinfo`

linux-vdso.so.1 (0x00007ffd7e5b4000)
 ??? libgdal.so.28 => /usr/lib/libgdal.so.28 (0x00007f2f66e29000)
 ??? libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 
(0x00007f2f66c48000)
 ??? libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 
(0x00007f2f66c2d000)
 ??? libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f2f66a3b000)
 ??? libheif.so.1 => /usr/lib/x86_64-linux-gnu/libheif.so.1 
(0x00007f2f669bb000)
 ??? libarmadillo.so.9 => /usr/lib/libarmadillo.so.9 (0x00007f2f669a8000)
 ??? libpoppler.so.97 => /usr/lib/x86_64-linux-gnu/libpoppler.so.97 
(0x00007f2f66661000)
 ??? libjson-c.so.4 => /usr/lib/x86_64-linux-gnu/libjson-c.so.4 
(0x00007f2f6664f000)
 ??? libfreexl.so.1 => /usr/lib/x86_64-linux-gnu/libfreexl.so.1 
(0x00007f2f66644000)
 ??? libqhull.so.7 => /usr/lib/x86_64-linux-gnu/libqhull.so.7 
(0x00007f2f663ea000)
 ??? libgeos_c.so.1 => /usr/lib/x86_64-linux-gnu/libgeos_c.so.1 
(0x00007f2f663a7000)
 ??? libwebp.so.6 => /usr/lib/x86_64-linux-gnu/libwebp.so.6 
(0x00007f2f6613e000)
 ??? libepsilon.so.1 => /usr/lib/x86_64-linux-gnu/libepsilon.so.1 
(0x00007f2f66122000)
 ??? libodbc.so.2 => /usr/lib/x86_64-linux-gnu/libodbc.so.2 
(0x00007f2f660b0000)
 ??? libodbcinst.so.2 => /usr/lib/x86_64-linux-gnu/libodbcinst.so.2 
(0x00007f2f66098000)
 ??? libkmlbase.so.1 => /usr/lib/x86_64-linux-gnu/libkmlbase.so.1 
(0x00007f2f6607b000)
 ??? libkmldom.so.1 => /usr/lib/x86_64-linux-gnu/libkmldom.so.1 
(0x00007f2f65fda000)
 ??? libkmlengine.so.1 => /usr/lib/x86_64-linux-gnu/libkmlengine.so.1 
(0x00007f2f65fa0000)
 ??? libexpat.so.1 => /lib/x86_64-linux-gnu/libexpat.so.1 
(0x00007f2f65f70000)
 ??? libxerces-c-3.2.so => /usr/lib/x86_64-linux-gnu/libxerces-c-3.2.so 
(0x00007f2f65bdd000)
 ??? libopenjp2.so.7 => /usr/lib/x86_64-linux-gnu/libopenjp2.so.7 
(0x00007f2f65b87000)
 ??? libnetcdf.so.15 => /usr/lib/x86_64-linux-gnu/libnetcdf.so.15 
(0x00007f2f65a62000)
 ??? libhdf5_serial.so.103 => 
/usr/lib/x86_64-linux-gnu/libhdf5_serial.so.103 (0x00007f2f656e5000)
 ??? libmfhdfalt.so.0 => /usr/lib/libmfhdfalt.so.0 (0x00007f2f656bb000)
 ??? libdfalt.so.0 => /usr/lib/libdfalt.so.0 (0x00007f2f65614000)
 ??? libogdi.so.4.1 => /usr/lib/libogdi.so.4.1 (0x00007f2f655f8000)
 ??? libgif.so.7 => /usr/lib/x86_64-linux-gnu/libgif.so.7 
(0x00007f2f655ed000)
 ??? libCharLS.so.2 => /usr/lib/x86_64-linux-gnu/libCharLS.so.2 
(0x00007f2f6559e000)
 ??? libjpeg.so.8 => /usr/lib/x86_64-linux-gnu/libjpeg.so.8 
(0x00007f2f65519000)
 ??? libgeotiff.so.5 => /usr/lib/x86_64-linux-gnu/libgeotiff.so.5 
(0x00007f2f654e4000)
 ??? libpng16.so.16 => /usr/lib/x86_64-linux-gnu/libpng16.so.16 
(0x00007f2f654aa000)
 ??? libcfitsio.so.8 => /usr/lib/x86_64-linux-gnu/libcfitsio.so.8 
(0x00007f2f651ab000)
 ??? libpq.so.5 => /usr/lib/x86_64-linux-gnu/libpq.so.5 (0x00007f2f6515b000)
 ??? libproj.so.19 => /usr/lib/x86_64-linux-gnu/libproj.so.19 
(0x00007f2f64dea000)
 ??? libsqlite3.so.0 => /usr/lib/x86_64-linux-gnu/libsqlite3.so.0 
(0x00007f2f64cc1000)
 ??? libtiff.so.5 => /usr/lib/x86_64-linux-gnu/libtiff.so.5 
(0x00007f2f64c40000)
 ??? libdeflate.so.0 => /usr/lib/x86_64-linux-gnu/libdeflate.so.0 
(0x00007f2f64c20000)
 ??? libspatialite.so.7 => /usr/lib/x86_64-linux-gnu/libspatialite.so.7 
(0x00007f2f64691000)
 ??? libdapclient.so.6 => /usr/lib/x86_64-linux-gnu/libdapclient.so.6 
(0x00007f2f64649000)
 ??? libdap.so.25 => /usr/lib/x86_64-linux-gnu/libdap.so.25 
(0x00007f2f644ab000)
 ??? libpcre.so.3 => /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007f2f64438000)
 ??? libcurl-gnutls.so.4 => 
/usr/lib/x86_64-linux-gnu/libcurl-gnutls.so.4 (0x00007f2f643a9000)
 ??? libfyba.so.0 => /usr/lib/x86_64-linux-gnu/libfyba.so.0 
(0x00007f2f6434f000)
 ??? libxml2.so.2 => /usr/lib/x86_64-linux-gnu/libxml2.so.2 
(0x00007f2f64195000)
 ??? libmysqlclient.so.21 => 
/usr/lib/x86_64-linux-gnu/libmysqlclient.so.21 (0x00007f2f63a9f000)
 ??? libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 
(0x00007f2f63a7c000)
 ??? libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f2f63a60000)
 ??? libcrypto.so.1.1 => /usr/lib/x86_64-linux-gnu/libcrypto.so.1.1 
(0x00007f2f6378a000)
 ??? libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f2f63782000)
 ??? libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f2f63633000)
 ??? /lib64/ld-linux-x86-64.so.2 (0x00007f2f68428000)
 ??? libde265.so.0 => /usr/lib/x86_64-linux-gnu/libde265.so.0 
(0x00007f2f6358f000)
 ??? libx265.so.179 => /usr/lib/x86_64-linux-gnu/libx265.so.179 
(0x00007f2f62621000)
 ??? libblas.so.3 => /usr/lib/x86_64-linux-gnu/libblas.so.3 
(0x00007f2f625b4000)
 ??? liblapack.so.3 => /usr/lib/x86_64-linux-gnu/liblapack.so.3 
(0x00007f2f61f0e000)
 ??? libarpack.so.2 => /usr/lib/x86_64-linux-gnu/libarpack.so.2 
(0x00007f2f61ec6000)
 ??? libsuperlu.so.5 => /usr/lib/x86_64-linux-gnu/libsuperlu.so.5 
(0x00007f2f61e56000)
 ??? libfreetype.so.6 => /usr/lib/x86_64-linux-gnu/libfreetype.so.6 
(0x00007f2f61d97000)
 ??? libfontconfig.so.1 => /usr/lib/x86_64-linux-gnu/libfontconfig.so.1 
(0x00007f2f61d50000)
 ??? liblcms2.so.2 => /usr/lib/x86_64-linux-gnu/liblcms2.so.2 
(0x00007f2f61cf5000)
 ??? libnss3.so => /usr/lib/x86_64-linux-gnu/libnss3.so (0x00007f2f61ba4000)
 ??? libsmime3.so => /usr/lib/x86_64-linux-gnu/libsmime3.so 
(0x00007f2f61b74000)
 ??? libnspr4.so => /usr/lib/x86_64-linux-gnu/libnspr4.so 
(0x00007f2f61b34000)
 ??? libgeos-3.8.0.so => /usr/lib/x86_64-linux-gnu/libgeos-3.8.0.so 
(0x00007f2f6196b000)
 ??? libltdl.so.7 => /usr/lib/x86_64-linux-gnu/libltdl.so.7 
(0x00007f2f61960000)
 ??? libminizip.so.1 => /usr/lib/x86_64-linux-gnu/libminizip.so.1 
(0x00007f2f61753000)
 ??? liburiparser.so.1 => /usr/lib/x86_64-linux-gnu/liburiparser.so.1 
(0x00007f2f61734000)
 ??? libicuuc.so.66 => /usr/lib/x86_64-linux-gnu/libicuuc.so.66 
(0x00007f2f6154e000)
 ??? libhdf5_serial_hl.so.100 => 
/usr/lib/x86_64-linux-gnu/libhdf5_serial_hl.so.100 (0x00007f2f61527000)
 ??? libsz.so.2 => /usr/lib/x86_64-linux-gnu/libsz.so.2 (0x00007f2f61522000)
 ??? libbz2.so.1.0 => /lib/x86_64-linux-gnu/libbz2.so.1.0 
(0x00007f2f6150d000)
 ??? libssl.so.1.1 => /usr/lib/x86_64-linux-gnu/libssl.so.1.1 
(0x00007f2f6147a000)
 ??? libgssapi_krb5.so.2 => 
/usr/lib/x86_64-linux-gnu/libgssapi_krb5.so.2 (0x00007f2f6142d000)
 ??? libldap_r-2.4.so.2 => /usr/lib/x86_64-linux-gnu/libldap_r-2.4.so.2 
(0x00007f2f613d7000)
 ??? libzstd.so.1 => /usr/lib/x86_64-linux-gnu/libzstd.so.1 
(0x00007f2f6132e000)
 ??? liblzma.so.5 => /lib/x86_64-linux-gnu/liblzma.so.5 (0x00007f2f61303000)
 ??? libjbig.so.0 => /usr/lib/x86_64-linux-gnu/libjbig.so.0 
(0x00007f2f610f5000)
 ??? libproj.so.15 => /usr/lib/x86_64-linux-gnu/libproj.so.15 
(0x00007f2f60e06000)
 ??? libnghttp2.so.14 => /usr/lib/x86_64-linux-gnu/libnghttp2.so.14 
(0x00007f2f60ddd000)
 ??? libidn2.so.0 => /usr/lib/x86_64-linux-gnu/libidn2.so.0 
(0x00007f2f60dbc000)
 ??? librtmp.so.1 => /usr/lib/x86_64-linux-gnu/librtmp.so.1 
(0x00007f2f60d9a000)
 ??? libssh.so.4 => /usr/lib/x86_64-linux-gnu/libssh.so.4 
(0x00007f2f60d2c000)
 ??? libpsl.so.5 => /usr/lib/x86_64-linux-gnu/libpsl.so.5 
(0x00007f2f60d19000)
 ??? libnettle.so.7 => /usr/lib/x86_64-linux-gnu/libnettle.so.7 
(0x00007f2f60cdf000)
 ??? libgnutls.so.30 => /usr/lib/x86_64-linux-gnu/libgnutls.so.30 
(0x00007f2f60b09000)
 ??? liblber-2.4.so.2 => /usr/lib/x86_64-linux-gnu/liblber-2.4.so.2 
(0x00007f2f60af8000)
 ??? libbrotlidec.so.1 => /usr/lib/x86_64-linux-gnu/libbrotlidec.so.1 
(0x00007f2f60ae8000)
 ??? libfyut.so.0 => /usr/lib/x86_64-linux-gnu/libfyut.so.0 
(0x00007f2f60adc000)
 ??? libfygm.so.0 => /usr/lib/x86_64-linux-gnu/libfygm.so.0 
(0x00007f2f60ad3000)
 ??? libresolv.so.2 => /lib/x86_64-linux-gnu/libresolv.so.2 
(0x00007f2f60ab7000)
 ??? libnuma.so.1 => /usr/lib/x86_64-linux-gnu/libnuma.so.1 
(0x00007f2f60aaa000)
 ??? libgfortran.so.5 => /usr/lib/x86_64-linux-gnu/libgfortran.so.5 
(0x00007f2f607e0000)
 ??? libuuid.so.1 => /lib/x86_64-linux-gnu/libuuid.so.1 (0x00007f2f607d7000)
 ??? libnssutil3.so => /usr/lib/x86_64-linux-gnu/libnssutil3.so 
(0x00007f2f607a4000)
 ??? libplc4.so => /usr/lib/x86_64-linux-gnu/libplc4.so (0x00007f2f6079d000)
 ??? libplds4.so => /usr/lib/x86_64-linux-gnu/libplds4.so 
(0x00007f2f60798000)
 ??? libicudata.so.66 => /usr/lib/x86_64-linux-gnu/libicudata.so.66 
(0x00007f2f5ecd5000)
 ??? libaec.so.0 => /usr/lib/x86_64-linux-gnu/libaec.so.0 
(0x00007f2f5eccc000)
 ??? libkrb5.so.3 => /usr/lib/x86_64-linux-gnu/libkrb5.so.3 
(0x00007f2f5ebef000)
 ??? libk5crypto.so.3 => /usr/lib/x86_64-linux-gnu/libk5crypto.so.3 
(0x00007f2f5ebbe000)
 ??? libcom_err.so.2 => /lib/x86_64-linux-gnu/libcom_err.so.2 
(0x00007f2f5ebb7000)
 ??? libkrb5support.so.0 => 
/usr/lib/x86_64-linux-gnu/libkrb5support.so.0 (0x00007f2f5eba6000)
 ??? libsasl2.so.2 => /usr/lib/x86_64-linux-gnu/libsasl2.so.2 
(0x00007f2f5eb89000)
 ??? libgssapi.so.3 => /usr/lib/x86_64-linux-gnu/libgssapi.so.3 
(0x00007f2f5eb44000)
 ??? libunistring.so.2 => /usr/lib/x86_64-linux-gnu/libunistring.so.2 
(0x00007f2f5e9c2000)
 ??? libhogweed.so.5 => /usr/lib/x86_64-linux-gnu/libhogweed.so.5 
(0x00007f2f5e98b000)
 ??? libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 
(0x00007f2f5e907000)
 ??? libp11-kit.so.0 => /usr/lib/x86_64-linux-gnu/libp11-kit.so.0 
(0x00007f2f5e7cf000)
 ??? libtasn1.so.6 => /usr/lib/x86_64-linux-gnu/libtasn1.so.6 
(0x00007f2f5e7b9000)
 ??? libbrotlicommon.so.1 => 
/usr/lib/x86_64-linux-gnu/libbrotlicommon.so.1 (0x00007f2f5e796000)
 ??? libquadmath.so.0 => /usr/lib/x86_64-linux-gnu/libquadmath.so.0 
(0x00007f2f5e74c000)
 ??? libkeyutils.so.1 => /lib/x86_64-linux-gnu/libkeyutils.so.1 
(0x00007f2f5e745000)
 ??? libheimntlm.so.0 => /usr/lib/x86_64-linux-gnu/libheimntlm.so.0 
(0x00007f2f5e737000)
 ??? libkrb5.so.26 => /usr/lib/x86_64-linux-gnu/libkrb5.so.26 
(0x00007f2f5e6a4000)
 ??? libasn1.so.8 => /usr/lib/x86_64-linux-gnu/libasn1.so.8 
(0x00007f2f5e5fd000)
 ??? libhcrypto.so.4 => /usr/lib/x86_64-linux-gnu/libhcrypto.so.4 
(0x00007f2f5e5c5000)
 ??? libroken.so.18 => /usr/lib/x86_64-linux-gnu/libroken.so.18 
(0x00007f2f5e5ac000)
 ??? libffi.so.7 => /usr/lib/x86_64-linux-gnu/libffi.so.7 
(0x00007f2f5e5a0000)
 ??? libwind.so.0 => /usr/lib/x86_64-linux-gnu/libwind.so.0 
(0x00007f2f5e574000)
 ??? libheimbase.so.1 => /usr/lib/x86_64-linux-gnu/libheimbase.so.1 
(0x00007f2f5e562000)
 ??? libhx509.so.5 => /usr/lib/x86_64-linux-gnu/libhx509.so.5 
(0x00007f2f5e514000)
 ??? libcrypt.so.1 => /lib/x86_64-linux-gnu/libcrypt.so.1 
(0x00007f2f5e4d9000)

valgrind ogrinfo --version

==9770== Memcheck, a memory error detector
==9770== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==9770== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==9770== Command: ogrinfo --version
==9770==
GDAL 3.2.1, released 2020/12/29
==9770== Invalid free() / delete / delete[] / realloc()
==9770==??? at 0x483CFBF: operator delete(void*) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0xBC143E6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Address 0xe8a80d0 is 0 bytes inside a block of size 17 free'd
==9770==??? at 0x483CFBF: operator delete(void*) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0x7BC5AB6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Block was alloc'd at
==9770==??? at 0x483BE63: operator new(unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BC18BF: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BC4A15: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
==9770==??? by 0x4011C90: call_init (dl-init.c:30)
==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
==9770==??? by 0x1: ???
==9770==??? by 0x1FFF000192: ???
==9770==??? by 0x1FFF00019A: ???
==9770==
==9770== Invalid read of size 4
==9770==??? at 0xBC148C4: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0xBC143E6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Address 0xe8a7a28 is 8 bytes inside a block of size 24 free'd
==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0x7BC5AB6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Block was alloc'd at
==9770==??? at 0x483BE63: operator new(unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BE2EC8: 
osgeo::proj::crs::GeographicCRS::create(osgeo::proj::util::PropertyMap 
const&, std::shared_ptr<osgeo::proj::datum::GeodeticReferenceFrame> 
const&, std::shared_ptr<osgeo::proj::datum::DatumEnsemble> const&, 
dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::cs::EllipsoidalCS> > 
const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BE311A: 
osgeo::proj::crs::GeographicCRS::create(osgeo::proj::util::PropertyMap 
const&, 
dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::datum::GeodeticReferenceFrame> 
 > const&, 
dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::cs::EllipsoidalCS> > 
const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BE36E8: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BC49E9: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
==9770==??? by 0x4011C90: call_init (dl-init.c:30)
==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
==9770==??? by 0x1: ???
==9770==??? by 0x1FFF000192: ???
==9770==??? by 0x1FFF00019A: ???
==9770==
==9770== Invalid read of size 4
==9770==??? at 0xBC14A44: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0xBC143E6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Address 0xe890298 is 8 bytes inside a block of size 24 free'd
==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0x7BC5AB6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Block was alloc'd at
==9770==??? at 0x483BE63: operator new(unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BE2B18: 
osgeo::proj::crs::GeodeticCRS::create(osgeo::proj::util::PropertyMap 
const&, std::shared_ptr<osgeo::proj::datum::GeodeticReferenceFrame> 
const&, std::shared_ptr<osgeo::proj::datum::DatumEnsemble> const&, 
dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::cs::CartesianCS> > 
const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BE2CAA: 
osgeo::proj::crs::GeodeticCRS::create(osgeo::proj::util::PropertyMap 
const&, 
dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::datum::GeodeticReferenceFrame> 
 > const&, 
dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::cs::CartesianCS> > 
const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BE2DB1: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BC490B: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
==9770==??? by 0x4011C90: call_init (dl-init.c:30)
==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
==9770==??? by 0x1: ???
==9770==??? by 0x1FFF000192: ???
==9770==??? by 0x1FFF00019A: ???
==9770==
==9770== Invalid read of size 4
==9770==??? at 0xBC14984: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0xBC143E6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Address 0xe88c1c8 is 8 bytes inside a block of size 24 free'd
==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0x7BC5AB6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Block was alloc'd at
==9770==??? at 0x483BE63: operator new(unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7C0A775: 
osgeo::proj::datum::GeodeticReferenceFrame::create(osgeo::proj::util::PropertyMap 
const&, 
dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::datum::Ellipsoid> > 
const&, osgeo::proj::util::optional<std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > > const&, 
dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::datum::PrimeMeridian> > 
const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7C0AA12: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BC48BE: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
==9770==??? by 0x4011C90: call_init (dl-init.c:30)
==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
==9770==??? by 0x1: ???
==9770==??? by 0x1FFF000192: ???
==9770==??? by 0x1FFF00019A: ???
==9770==
==9770== Invalid read of size 4
==9770==??? at 0xBC14744: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0xBC143E6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Address 0xe888028 is 8 bytes inside a block of size 24 free'd
==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0x7BC5AB6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Block was alloc'd at
==9770==??? at 0x483BE63: operator new(unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7C112E2: 
osgeo::proj::datum::Ellipsoid::createFlattenedSphere(osgeo::proj::util::PropertyMap 
const&, osgeo::proj::common::Length const&, osgeo::proj::common::Scale 
const&, std::__cxx11::basic_string<char, std::char_traits<char>, 
std::allocator<char> > const&) (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7C117CC: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BC484F: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
==9770==??? by 0x4011C90: call_init (dl-init.c:30)
==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
==9770==??? by 0x1: ???
==9770==??? by 0x1FFF000192: ???
==9770==??? by 0x1FFF00019A: ???
==9770==
==9770== Invalid read of size 4
==9770==??? at 0xBC14684: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0xBC143E6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Address 0xe882688 is 8 bytes inside a block of size 24 free'd
==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0x7BC5AB6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Block was alloc'd at
==9770==??? at 0x483BE63: operator new(unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7C0FAF9: 
osgeo::proj::datum::PrimeMeridian::create(osgeo::proj::util::PropertyMap 
const&, osgeo::proj::common::Angle const&) (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7C0FD32: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BC47B8: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
==9770==??? by 0x4011C90: call_init (dl-init.c:30)
==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
==9770==??? by 0x1: ???
==9770==??? by 0x1FFF000192: ???
==9770==??? by 0x1FFF00019A: ???
==9770==
==9770== Invalid read of size 8
==9770==??? at 0xBC1EBE5: 
osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0xBC143E6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Address 0xe87c720 is 80 bytes inside a block of size 112 free'd
==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BD02FC: 
osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0x7BC5AB6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Block was alloc'd at
==9770==??? at 0x483BE63: operator new(unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BD3B34: 
osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&, double, 
osgeo::proj::common::UnitOfMeasure::Type, 
std::__cxx11::basic_string<char, std::char_traits<char>, 
std::allocator<char> > const&, std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&) (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BC3601: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
==9770==??? by 0x4011C90: call_init (dl-init.c:30)
==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
==9770==??? by 0x1: ???
==9770==??? by 0x1FFF000192: ???
==9770==??? by 0x1FFF00019A: ???
==9770==
==9770== Invalid read of size 8
==9770==??? at 0xBC1EBF9: 
osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0xBC143E6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Address 0xe87c700 is 48 bytes inside a block of size 112 free'd
==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BD02FC: 
osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0x7BC5AB6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Block was alloc'd at
==9770==??? at 0x483BE63: operator new(unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BD3B34: 
osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&, double, 
osgeo::proj::common::UnitOfMeasure::Type, 
std::__cxx11::basic_string<char, std::char_traits<char>, 
std::allocator<char> > const&, std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&) (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BC3601: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
==9770==??? by 0x4011C90: call_init (dl-init.c:30)
==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
==9770==??? by 0x1: ???
==9770==??? by 0x1FFF000192: ???
==9770==??? by 0x1FFF00019A: ???
==9770==
==9770== Invalid read of size 8
==9770==??? at 0xBC1EC0D: 
osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0xBC143E6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Address 0xe87c6d0 is 0 bytes inside a block of size 112 free'd
==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BD02FC: 
osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0x7BC5AB6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Block was alloc'd at
==9770==??? at 0x483BE63: operator new(unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BD3B34: 
osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&, double, 
osgeo::proj::common::UnitOfMeasure::Type, 
std::__cxx11::basic_string<char, std::char_traits<char>, 
std::allocator<char> > const&, std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&) (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BC3601: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
==9770==??? by 0x4011C90: call_init (dl-init.c:30)
==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
==9770==??? by 0x1: ???
==9770==??? by 0x1FFF000192: ???
==9770==??? by 0x1FFF00019A: ???
==9770==
==9770== Invalid free() / delete / delete[] / realloc()
==9770==??? at 0x483CFBF: operator delete(void*) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0xBC1EC1F: 
osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0xBC143E6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Address 0xe87c780 is 0 bytes inside a block of size 27 free'd
==9770==??? at 0x483CFBF: operator delete(void*) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BD02EF: 
osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0x7BC5AB6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Block was alloc'd at
==9770==??? at 0x483BE63: operator new(unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BCA38C: void std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> 
 >::_M_construct<char*>(char*, char*, std::forward_iterator_tag) (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BD3B53: 
osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&, double, 
osgeo::proj::common::UnitOfMeasure::Type, 
std::__cxx11::basic_string<char, std::char_traits<char>, 
std::allocator<char> > const&, std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&) (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BC3601: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
==9770==??? by 0x4011C90: call_init (dl-init.c:30)
==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
==9770==??? by 0x1: ???
==9770==??? by 0x1FFF000192: ???
==9770==??? by 0x1FFF00019A: ???
==9770==
==9770== Invalid free() / delete / delete[] / realloc()
==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0xBC1EC2C: 
osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0xBC143E6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Address 0xe87c6d0 is 0 bytes inside a block of size 112 free'd
==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BD02FC: 
osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0x7BC5AB6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Block was alloc'd at
==9770==??? at 0x483BE63: operator new(unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BD3B34: 
osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&, double, 
osgeo::proj::common::UnitOfMeasure::Type, 
std::__cxx11::basic_string<char, std::char_traits<char>, 
std::allocator<char> > const&, std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&) (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BC3601: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
==9770==??? by 0x4011C90: call_init (dl-init.c:30)
==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
==9770==??? by 0x1: ???
==9770==??? by 0x1FFF000192: ???
==9770==??? by 0x1FFF00019A: ???
==9770==
==9770== Invalid read of size 8
==9770==??? at 0xBC14EEC: osgeo::proj::util::BaseObject::~BaseObject() 
(in /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0xBC143E6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Address 0xe87c688 is 8 bytes inside a block of size 16 free'd
==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0x7BC5AB6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Block was alloc'd at
==9770==??? at 0x483BE63: operator new(unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BC673F: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BD3B1B: 
osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&, double, 
osgeo::proj::common::UnitOfMeasure::Type, 
std::__cxx11::basic_string<char, std::char_traits<char>, 
std::allocator<char> > const&, std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&) (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BC3601: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
==9770==??? by 0x4011C90: call_init (dl-init.c:30)
==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
==9770==??? by 0x1: ???
==9770==??? by 0x1FFF000192: ???
==9770==??? by 0x1FFF00019A: ???
==9770==
==9770== Invalid free() / delete / delete[] / realloc()
==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0xBC143E6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Address 0xe87c680 is 0 bytes inside a block of size 16 free'd
==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0x7BC5AB6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Block was alloc'd at
==9770==??? at 0x483BE63: operator new(unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BC673F: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BD3B1B: 
osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&, double, 
osgeo::proj::common::UnitOfMeasure::Type, 
std::__cxx11::basic_string<char, std::char_traits<char>, 
std::allocator<char> > const&, std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > const&) (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BC3601: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
==9770==??? by 0x4011C90: call_init (dl-init.c:30)
==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
==9770==??? by 0x1: ???
==9770==??? by 0x1FFF000192: ???
==9770==??? by 0x1FFF00019A: ???
==9770==
==9770== Invalid read of size 4
==9770==??? at 0xBC14804: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0xBC143E6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Address 0xe878168 is 8 bytes inside a block of size 24 free'd
==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
==9770==??? by 0x7BC5AB6: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
==9770==??? by 0x6082BDF: exit (exit.c:139)
==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
==9770==? Block was alloc'd at
==9770==??? at 0x483BE63: operator new(unsigned long) (in 
/usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==9770==??? by 0x7BCD021: 
osgeo::proj::metadata::Extent::create(osgeo::proj::util::optional<std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > > const&, 
std::vector<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::GeographicExtent> 
 >, 
std::allocator<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::GeographicExtent> 
 > > > const&, 
std::vector<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::VerticalExtent> 
 >, 
std::allocator<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::VerticalExtent> 
 > > > const&, 
std::vector<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::TemporalExtent> 
 >, 
std::allocator<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::TemporalExtent> 
 > > > const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BCD254: 
osgeo::proj::metadata::Extent::createFromBBOX(double, double, double, 
double, osgeo::proj::util::optional<std::__cxx11::basic_string<char, 
std::char_traits<char>, std::allocator<char> > > const&) (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x7BC1C39: ??? (in 
/usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
==9770==??? by 0x4011C90: call_init (dl-init.c:30)
==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
==9770==??? by 0x1: ???
==9770==??? by 0x1FFF000192: ???
==9770==??? by 0x1FFF00019A: ???
==9770==
==9770==
==9770== HEAP SUMMARY:
==9770==???? in use at exit: 485,109 bytes in 4,443 blocks
==9770==?? total heap usage: 8,799 allocs, 4,391 frees, 1,649,539 bytes 
allocated
==9770==
==9770== LEAK SUMMARY:
==9770==??? definitely lost: 2,583 bytes in 41 blocks
==9770==??? indirectly lost: 39,830 bytes in 735 blocks
==9770==????? possibly lost: 0 bytes in 0 blocks
==9770==??? still reachable: 442,696 bytes in 3,667 blocks
==9770==???????? suppressed: 0 bytes in 0 blocks
==9770== Rerun with --leak-check=full to see details of leaked memory
==9770==
==9770== For lists of detected and suppressed errors, rerun with: -s
==9770== ERROR SUMMARY: 142 errors from 14 contexts (suppressed: 0 from 0)


On 5/8/21 3:53 PM, Even Rouault wrote:
> From https://launchpad.net/ubuntu/+source/gdal , no Ubuntu version 
> ships with 3.2.1. Perhaps you are using the ubuntugis PPA with 
> 3.2.1+dfsg-1~focal0 ? I'd suspect some mismatch of underlying 
> libraries, perhaps proj.
>
> What's the output of
>
> ldd `which ogrinfo`
>
> and also do
>
> sudo apt install valgrind
>
> and what's the output of
>
> valgrind ogrinfo --version
>
>
> Le 08/05/2021 ? 14:28, Bryan Keith a ?crit?:
>> Hello,
>>
>> I am trying to install GDAL on Ubuntu.? When I check the 
>> installation, I get this:
>>
>> ogrinfo --version
>> GDAL 3.2.1, released 2020/12/29
>> free(): invalid pointer
>> Aborted (core dumped)
>>
>> Hmmm, what to do?
>>
>> I installed like this:
>>
>> sudo apt-get install gdal-bin
>>
>> My Python installations look like this:
>>
>> $ python -V
>> Python 2.7.18
>> $ python3 -V
>> Python 3.8.5
>>
>> I imagine more information is required to diagnose this problem, but 
>> I'm not sure what that would be.? Any help is appreciated. Thank you.
>>
>> Bryan
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at spatialys.com  Sat May  8 08:11:17 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 8 May 2021 17:11:17 +0200
Subject: [gdal-dev] ubuntu installation issue: free(): invalid pointer,
 Aborted (core dumped)
In-Reply-To: <0b99aae6-4774-9e36-7d69-e92916e279ef@gmail.com>
References: <c1bc6b9c-42bf-f7d9-aa0d-1aa2d5710616@gmail.com>
 <3e606551-9c28-202b-c203-b6ef043dcdf0@spatialys.com>
 <0b99aae6-4774-9e36-7d69-e92916e279ef@gmail.com>
Message-ID: <d81e5be2-ca72-9375-fa04-ffa562aecbdf@spatialys.com>

ok, so your GDAL is linking against 2 PROJ versions libproj.so.15 and 
libproj.so.19. Make sure your libspatialite and libgeotiff versions are 
from the ubuntugis PPA, so they link gainst libproj.so.19 and no .so.15

Le 08/05/2021 ? 16:42, Bryan Keith a ?crit?:
> Yes, I'm using the ubuntugis ppa with 3.2.1+dfsg-1~focal0
> but I have no specific need to use that.? Should I use a different 
> version?
>
> Now I'll paste the results of the two commands you requested.
>
> ldd `which ogrinfo`
>
> linux-vdso.so.1 (0x00007ffd7e5b4000)
> ??? libgdal.so.28 => /usr/lib/libgdal.so.28 (0x00007f2f66e29000)
> ??? libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 
> (0x00007f2f66c48000)
> ??? libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 
> (0x00007f2f66c2d000)
> ??? libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f2f66a3b000)
> ??? libheif.so.1 => /usr/lib/x86_64-linux-gnu/libheif.so.1 
> (0x00007f2f669bb000)
> ??? libarmadillo.so.9 => /usr/lib/libarmadillo.so.9 (0x00007f2f669a8000)
> ??? libpoppler.so.97 => /usr/lib/x86_64-linux-gnu/libpoppler.so.97 
> (0x00007f2f66661000)
> ??? libjson-c.so.4 => /usr/lib/x86_64-linux-gnu/libjson-c.so.4 
> (0x00007f2f6664f000)
> ??? libfreexl.so.1 => /usr/lib/x86_64-linux-gnu/libfreexl.so.1 
> (0x00007f2f66644000)
> ??? libqhull.so.7 => /usr/lib/x86_64-linux-gnu/libqhull.so.7 
> (0x00007f2f663ea000)
> ??? libgeos_c.so.1 => /usr/lib/x86_64-linux-gnu/libgeos_c.so.1 
> (0x00007f2f663a7000)
> ??? libwebp.so.6 => /usr/lib/x86_64-linux-gnu/libwebp.so.6 
> (0x00007f2f6613e000)
> ??? libepsilon.so.1 => /usr/lib/x86_64-linux-gnu/libepsilon.so.1 
> (0x00007f2f66122000)
> ??? libodbc.so.2 => /usr/lib/x86_64-linux-gnu/libodbc.so.2 
> (0x00007f2f660b0000)
> ??? libodbcinst.so.2 => /usr/lib/x86_64-linux-gnu/libodbcinst.so.2 
> (0x00007f2f66098000)
> ??? libkmlbase.so.1 => /usr/lib/x86_64-linux-gnu/libkmlbase.so.1 
> (0x00007f2f6607b000)
> ??? libkmldom.so.1 => /usr/lib/x86_64-linux-gnu/libkmldom.so.1 
> (0x00007f2f65fda000)
> ??? libkmlengine.so.1 => /usr/lib/x86_64-linux-gnu/libkmlengine.so.1 
> (0x00007f2f65fa0000)
> ??? libexpat.so.1 => /lib/x86_64-linux-gnu/libexpat.so.1 
> (0x00007f2f65f70000)
> ??? libxerces-c-3.2.so => /usr/lib/x86_64-linux-gnu/libxerces-c-3.2.so 
> (0x00007f2f65bdd000)
> ??? libopenjp2.so.7 => /usr/lib/x86_64-linux-gnu/libopenjp2.so.7 
> (0x00007f2f65b87000)
> ??? libnetcdf.so.15 => /usr/lib/x86_64-linux-gnu/libnetcdf.so.15 
> (0x00007f2f65a62000)
> ??? libhdf5_serial.so.103 => 
> /usr/lib/x86_64-linux-gnu/libhdf5_serial.so.103 (0x00007f2f656e5000)
> ??? libmfhdfalt.so.0 => /usr/lib/libmfhdfalt.so.0 (0x00007f2f656bb000)
> ??? libdfalt.so.0 => /usr/lib/libdfalt.so.0 (0x00007f2f65614000)
> ??? libogdi.so.4.1 => /usr/lib/libogdi.so.4.1 (0x00007f2f655f8000)
> ??? libgif.so.7 => /usr/lib/x86_64-linux-gnu/libgif.so.7 
> (0x00007f2f655ed000)
> ??? libCharLS.so.2 => /usr/lib/x86_64-linux-gnu/libCharLS.so.2 
> (0x00007f2f6559e000)
> ??? libjpeg.so.8 => /usr/lib/x86_64-linux-gnu/libjpeg.so.8 
> (0x00007f2f65519000)
> ??? libgeotiff.so.5 => /usr/lib/x86_64-linux-gnu/libgeotiff.so.5 
> (0x00007f2f654e4000)
> ??? libpng16.so.16 => /usr/lib/x86_64-linux-gnu/libpng16.so.16 
> (0x00007f2f654aa000)
> ??? libcfitsio.so.8 => /usr/lib/x86_64-linux-gnu/libcfitsio.so.8 
> (0x00007f2f651ab000)
> ??? libpq.so.5 => /usr/lib/x86_64-linux-gnu/libpq.so.5 
> (0x00007f2f6515b000)
> ??? libproj.so.19 => /usr/lib/x86_64-linux-gnu/libproj.so.19 
> (0x00007f2f64dea000)
> ??? libsqlite3.so.0 => /usr/lib/x86_64-linux-gnu/libsqlite3.so.0 
> (0x00007f2f64cc1000)
> ??? libtiff.so.5 => /usr/lib/x86_64-linux-gnu/libtiff.so.5 
> (0x00007f2f64c40000)
> ??? libdeflate.so.0 => /usr/lib/x86_64-linux-gnu/libdeflate.so.0 
> (0x00007f2f64c20000)
> ??? libspatialite.so.7 => /usr/lib/x86_64-linux-gnu/libspatialite.so.7 
> (0x00007f2f64691000)
> ??? libdapclient.so.6 => /usr/lib/x86_64-linux-gnu/libdapclient.so.6 
> (0x00007f2f64649000)
> ??? libdap.so.25 => /usr/lib/x86_64-linux-gnu/libdap.so.25 
> (0x00007f2f644ab000)
> ??? libpcre.so.3 => /lib/x86_64-linux-gnu/libpcre.so.3 
> (0x00007f2f64438000)
> ??? libcurl-gnutls.so.4 => 
> /usr/lib/x86_64-linux-gnu/libcurl-gnutls.so.4 (0x00007f2f643a9000)
> ??? libfyba.so.0 => /usr/lib/x86_64-linux-gnu/libfyba.so.0 
> (0x00007f2f6434f000)
> ??? libxml2.so.2 => /usr/lib/x86_64-linux-gnu/libxml2.so.2 
> (0x00007f2f64195000)
> ??? libmysqlclient.so.21 => 
> /usr/lib/x86_64-linux-gnu/libmysqlclient.so.21 (0x00007f2f63a9f000)
> ??? libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 
> (0x00007f2f63a7c000)
> ??? libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f2f63a60000)
> ??? libcrypto.so.1.1 => /usr/lib/x86_64-linux-gnu/libcrypto.so.1.1 
> (0x00007f2f6378a000)
> ??? libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f2f63782000)
> ??? libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f2f63633000)
> ??? /lib64/ld-linux-x86-64.so.2 (0x00007f2f68428000)
> ??? libde265.so.0 => /usr/lib/x86_64-linux-gnu/libde265.so.0 
> (0x00007f2f6358f000)
> ??? libx265.so.179 => /usr/lib/x86_64-linux-gnu/libx265.so.179 
> (0x00007f2f62621000)
> ??? libblas.so.3 => /usr/lib/x86_64-linux-gnu/libblas.so.3 
> (0x00007f2f625b4000)
> ??? liblapack.so.3 => /usr/lib/x86_64-linux-gnu/liblapack.so.3 
> (0x00007f2f61f0e000)
> ??? libarpack.so.2 => /usr/lib/x86_64-linux-gnu/libarpack.so.2 
> (0x00007f2f61ec6000)
> ??? libsuperlu.so.5 => /usr/lib/x86_64-linux-gnu/libsuperlu.so.5 
> (0x00007f2f61e56000)
> ??? libfreetype.so.6 => /usr/lib/x86_64-linux-gnu/libfreetype.so.6 
> (0x00007f2f61d97000)
> ??? libfontconfig.so.1 => /usr/lib/x86_64-linux-gnu/libfontconfig.so.1 
> (0x00007f2f61d50000)
> ??? liblcms2.so.2 => /usr/lib/x86_64-linux-gnu/liblcms2.so.2 
> (0x00007f2f61cf5000)
> ??? libnss3.so => /usr/lib/x86_64-linux-gnu/libnss3.so 
> (0x00007f2f61ba4000)
> ??? libsmime3.so => /usr/lib/x86_64-linux-gnu/libsmime3.so 
> (0x00007f2f61b74000)
> ??? libnspr4.so => /usr/lib/x86_64-linux-gnu/libnspr4.so 
> (0x00007f2f61b34000)
> ??? libgeos-3.8.0.so => /usr/lib/x86_64-linux-gnu/libgeos-3.8.0.so 
> (0x00007f2f6196b000)
> ??? libltdl.so.7 => /usr/lib/x86_64-linux-gnu/libltdl.so.7 
> (0x00007f2f61960000)
> ??? libminizip.so.1 => /usr/lib/x86_64-linux-gnu/libminizip.so.1 
> (0x00007f2f61753000)
> ??? liburiparser.so.1 => /usr/lib/x86_64-linux-gnu/liburiparser.so.1 
> (0x00007f2f61734000)
> ??? libicuuc.so.66 => /usr/lib/x86_64-linux-gnu/libicuuc.so.66 
> (0x00007f2f6154e000)
> ??? libhdf5_serial_hl.so.100 => 
> /usr/lib/x86_64-linux-gnu/libhdf5_serial_hl.so.100 (0x00007f2f61527000)
> ??? libsz.so.2 => /usr/lib/x86_64-linux-gnu/libsz.so.2 
> (0x00007f2f61522000)
> ??? libbz2.so.1.0 => /lib/x86_64-linux-gnu/libbz2.so.1.0 
> (0x00007f2f6150d000)
> ??? libssl.so.1.1 => /usr/lib/x86_64-linux-gnu/libssl.so.1.1 
> (0x00007f2f6147a000)
> ??? libgssapi_krb5.so.2 => 
> /usr/lib/x86_64-linux-gnu/libgssapi_krb5.so.2 (0x00007f2f6142d000)
> ??? libldap_r-2.4.so.2 => /usr/lib/x86_64-linux-gnu/libldap_r-2.4.so.2 
> (0x00007f2f613d7000)
> ??? libzstd.so.1 => /usr/lib/x86_64-linux-gnu/libzstd.so.1 
> (0x00007f2f6132e000)
> ??? liblzma.so.5 => /lib/x86_64-linux-gnu/liblzma.so.5 
> (0x00007f2f61303000)
> ??? libjbig.so.0 => /usr/lib/x86_64-linux-gnu/libjbig.so.0 
> (0x00007f2f610f5000)
> ??? libproj.so.15 => /usr/lib/x86_64-linux-gnu/libproj.so.15 
> (0x00007f2f60e06000)
> ??? libnghttp2.so.14 => /usr/lib/x86_64-linux-gnu/libnghttp2.so.14 
> (0x00007f2f60ddd000)
> ??? libidn2.so.0 => /usr/lib/x86_64-linux-gnu/libidn2.so.0 
> (0x00007f2f60dbc000)
> ??? librtmp.so.1 => /usr/lib/x86_64-linux-gnu/librtmp.so.1 
> (0x00007f2f60d9a000)
> ??? libssh.so.4 => /usr/lib/x86_64-linux-gnu/libssh.so.4 
> (0x00007f2f60d2c000)
> ??? libpsl.so.5 => /usr/lib/x86_64-linux-gnu/libpsl.so.5 
> (0x00007f2f60d19000)
> ??? libnettle.so.7 => /usr/lib/x86_64-linux-gnu/libnettle.so.7 
> (0x00007f2f60cdf000)
> ??? libgnutls.so.30 => /usr/lib/x86_64-linux-gnu/libgnutls.so.30 
> (0x00007f2f60b09000)
> ??? liblber-2.4.so.2 => /usr/lib/x86_64-linux-gnu/liblber-2.4.so.2 
> (0x00007f2f60af8000)
> ??? libbrotlidec.so.1 => /usr/lib/x86_64-linux-gnu/libbrotlidec.so.1 
> (0x00007f2f60ae8000)
> ??? libfyut.so.0 => /usr/lib/x86_64-linux-gnu/libfyut.so.0 
> (0x00007f2f60adc000)
> ??? libfygm.so.0 => /usr/lib/x86_64-linux-gnu/libfygm.so.0 
> (0x00007f2f60ad3000)
> ??? libresolv.so.2 => /lib/x86_64-linux-gnu/libresolv.so.2 
> (0x00007f2f60ab7000)
> ??? libnuma.so.1 => /usr/lib/x86_64-linux-gnu/libnuma.so.1 
> (0x00007f2f60aaa000)
> ??? libgfortran.so.5 => /usr/lib/x86_64-linux-gnu/libgfortran.so.5 
> (0x00007f2f607e0000)
> ??? libuuid.so.1 => /lib/x86_64-linux-gnu/libuuid.so.1 
> (0x00007f2f607d7000)
> ??? libnssutil3.so => /usr/lib/x86_64-linux-gnu/libnssutil3.so 
> (0x00007f2f607a4000)
> ??? libplc4.so => /usr/lib/x86_64-linux-gnu/libplc4.so 
> (0x00007f2f6079d000)
> ??? libplds4.so => /usr/lib/x86_64-linux-gnu/libplds4.so 
> (0x00007f2f60798000)
> ??? libicudata.so.66 => /usr/lib/x86_64-linux-gnu/libicudata.so.66 
> (0x00007f2f5ecd5000)
> ??? libaec.so.0 => /usr/lib/x86_64-linux-gnu/libaec.so.0 
> (0x00007f2f5eccc000)
> ??? libkrb5.so.3 => /usr/lib/x86_64-linux-gnu/libkrb5.so.3 
> (0x00007f2f5ebef000)
> ??? libk5crypto.so.3 => /usr/lib/x86_64-linux-gnu/libk5crypto.so.3 
> (0x00007f2f5ebbe000)
> ??? libcom_err.so.2 => /lib/x86_64-linux-gnu/libcom_err.so.2 
> (0x00007f2f5ebb7000)
> ??? libkrb5support.so.0 => 
> /usr/lib/x86_64-linux-gnu/libkrb5support.so.0 (0x00007f2f5eba6000)
> ??? libsasl2.so.2 => /usr/lib/x86_64-linux-gnu/libsasl2.so.2 
> (0x00007f2f5eb89000)
> ??? libgssapi.so.3 => /usr/lib/x86_64-linux-gnu/libgssapi.so.3 
> (0x00007f2f5eb44000)
> ??? libunistring.so.2 => /usr/lib/x86_64-linux-gnu/libunistring.so.2 
> (0x00007f2f5e9c2000)
> ??? libhogweed.so.5 => /usr/lib/x86_64-linux-gnu/libhogweed.so.5 
> (0x00007f2f5e98b000)
> ??? libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 
> (0x00007f2f5e907000)
> ??? libp11-kit.so.0 => /usr/lib/x86_64-linux-gnu/libp11-kit.so.0 
> (0x00007f2f5e7cf000)
> ??? libtasn1.so.6 => /usr/lib/x86_64-linux-gnu/libtasn1.so.6 
> (0x00007f2f5e7b9000)
> ??? libbrotlicommon.so.1 => 
> /usr/lib/x86_64-linux-gnu/libbrotlicommon.so.1 (0x00007f2f5e796000)
> ??? libquadmath.so.0 => /usr/lib/x86_64-linux-gnu/libquadmath.so.0 
> (0x00007f2f5e74c000)
> ??? libkeyutils.so.1 => /lib/x86_64-linux-gnu/libkeyutils.so.1 
> (0x00007f2f5e745000)
> ??? libheimntlm.so.0 => /usr/lib/x86_64-linux-gnu/libheimntlm.so.0 
> (0x00007f2f5e737000)
> ??? libkrb5.so.26 => /usr/lib/x86_64-linux-gnu/libkrb5.so.26 
> (0x00007f2f5e6a4000)
> ??? libasn1.so.8 => /usr/lib/x86_64-linux-gnu/libasn1.so.8 
> (0x00007f2f5e5fd000)
> ??? libhcrypto.so.4 => /usr/lib/x86_64-linux-gnu/libhcrypto.so.4 
> (0x00007f2f5e5c5000)
> ??? libroken.so.18 => /usr/lib/x86_64-linux-gnu/libroken.so.18 
> (0x00007f2f5e5ac000)
> ??? libffi.so.7 => /usr/lib/x86_64-linux-gnu/libffi.so.7 
> (0x00007f2f5e5a0000)
> ??? libwind.so.0 => /usr/lib/x86_64-linux-gnu/libwind.so.0 
> (0x00007f2f5e574000)
> ??? libheimbase.so.1 => /usr/lib/x86_64-linux-gnu/libheimbase.so.1 
> (0x00007f2f5e562000)
> ??? libhx509.so.5 => /usr/lib/x86_64-linux-gnu/libhx509.so.5 
> (0x00007f2f5e514000)
> ??? libcrypt.so.1 => /lib/x86_64-linux-gnu/libcrypt.so.1 
> (0x00007f2f5e4d9000)
>
> valgrind ogrinfo --version
>
> ==9770== Memcheck, a memory error detector
> ==9770== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
> ==9770== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright 
> info
> ==9770== Command: ogrinfo --version
> ==9770==
> GDAL 3.2.1, released 2020/12/29
> ==9770== Invalid free() / delete / delete[] / realloc()
> ==9770==??? at 0x483CFBF: operator delete(void*) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0xBC143E6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Address 0xe8a80d0 is 0 bytes inside a block of size 17 free'd
> ==9770==??? at 0x483CFBF: operator delete(void*) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0x7BC5AB6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Block was alloc'd at
> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BC18BF: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BC4A15: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
> ==9770==??? by 0x1: ???
> ==9770==??? by 0x1FFF000192: ???
> ==9770==??? by 0x1FFF00019A: ???
> ==9770==
> ==9770== Invalid read of size 4
> ==9770==??? at 0xBC148C4: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0xBC143E6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Address 0xe8a7a28 is 8 bytes inside a block of size 24 free'd
> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0x7BC5AB6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Block was alloc'd at
> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BE2EC8: 
> osgeo::proj::crs::GeographicCRS::create(osgeo::proj::util::PropertyMap 
> const&, std::shared_ptr<osgeo::proj::datum::GeodeticReferenceFrame> 
> const&, std::shared_ptr<osgeo::proj::datum::DatumEnsemble> const&, 
> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::cs::EllipsoidalCS> > 
> const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BE311A: 
> osgeo::proj::crs::GeographicCRS::create(osgeo::proj::util::PropertyMap 
> const&, 
> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::datum::GeodeticReferenceFrame> 
> > const&, 
> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::cs::EllipsoidalCS> > 
> const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BE36E8: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BC49E9: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
> ==9770==??? by 0x1: ???
> ==9770==??? by 0x1FFF000192: ???
> ==9770==??? by 0x1FFF00019A: ???
> ==9770==
> ==9770== Invalid read of size 4
> ==9770==??? at 0xBC14A44: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0xBC143E6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Address 0xe890298 is 8 bytes inside a block of size 24 free'd
> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0x7BC5AB6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Block was alloc'd at
> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BE2B18: 
> osgeo::proj::crs::GeodeticCRS::create(osgeo::proj::util::PropertyMap 
> const&, std::shared_ptr<osgeo::proj::datum::GeodeticReferenceFrame> 
> const&, std::shared_ptr<osgeo::proj::datum::DatumEnsemble> const&, 
> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::cs::CartesianCS> > 
> const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BE2CAA: 
> osgeo::proj::crs::GeodeticCRS::create(osgeo::proj::util::PropertyMap 
> const&, 
> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::datum::GeodeticReferenceFrame> 
> > const&, 
> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::cs::CartesianCS> > 
> const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BE2DB1: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BC490B: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
> ==9770==??? by 0x1: ???
> ==9770==??? by 0x1FFF000192: ???
> ==9770==??? by 0x1FFF00019A: ???
> ==9770==
> ==9770== Invalid read of size 4
> ==9770==??? at 0xBC14984: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0xBC143E6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Address 0xe88c1c8 is 8 bytes inside a block of size 24 free'd
> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0x7BC5AB6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Block was alloc'd at
> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7C0A775: 
> osgeo::proj::datum::GeodeticReferenceFrame::create(osgeo::proj::util::PropertyMap 
> const&, 
> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::datum::Ellipsoid> > 
> const&, osgeo::proj::util::optional<std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > > const&, 
> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::datum::PrimeMeridian> 
> > const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7C0AA12: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BC48BE: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
> ==9770==??? by 0x1: ???
> ==9770==??? by 0x1FFF000192: ???
> ==9770==??? by 0x1FFF00019A: ???
> ==9770==
> ==9770== Invalid read of size 4
> ==9770==??? at 0xBC14744: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0xBC143E6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Address 0xe888028 is 8 bytes inside a block of size 24 free'd
> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0x7BC5AB6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Block was alloc'd at
> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7C112E2: 
> osgeo::proj::datum::Ellipsoid::createFlattenedSphere(osgeo::proj::util::PropertyMap 
> const&, osgeo::proj::common::Length const&, osgeo::proj::common::Scale 
> const&, std::__cxx11::basic_string<char, std::char_traits<char>, 
> std::allocator<char> > const&) (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7C117CC: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BC484F: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
> ==9770==??? by 0x1: ???
> ==9770==??? by 0x1FFF000192: ???
> ==9770==??? by 0x1FFF00019A: ???
> ==9770==
> ==9770== Invalid read of size 4
> ==9770==??? at 0xBC14684: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0xBC143E6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Address 0xe882688 is 8 bytes inside a block of size 24 free'd
> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0x7BC5AB6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Block was alloc'd at
> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7C0FAF9: 
> osgeo::proj::datum::PrimeMeridian::create(osgeo::proj::util::PropertyMap 
> const&, osgeo::proj::common::Angle const&) (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7C0FD32: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BC47B8: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
> ==9770==??? by 0x1: ???
> ==9770==??? by 0x1FFF000192: ???
> ==9770==??? by 0x1FFF00019A: ???
> ==9770==
> ==9770== Invalid read of size 8
> ==9770==??? at 0xBC1EBE5: 
> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0xBC143E6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Address 0xe87c720 is 80 bytes inside a block of size 112 free'd
> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BD02FC: 
> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0x7BC5AB6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Block was alloc'd at
> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BD3B34: 
> osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&, double, 
> osgeo::proj::common::UnitOfMeasure::Type, 
> std::__cxx11::basic_string<char, std::char_traits<char>, 
> std::allocator<char> > const&, std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&) (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BC3601: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
> ==9770==??? by 0x1: ???
> ==9770==??? by 0x1FFF000192: ???
> ==9770==??? by 0x1FFF00019A: ???
> ==9770==
> ==9770== Invalid read of size 8
> ==9770==??? at 0xBC1EBF9: 
> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0xBC143E6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Address 0xe87c700 is 48 bytes inside a block of size 112 free'd
> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BD02FC: 
> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0x7BC5AB6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Block was alloc'd at
> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BD3B34: 
> osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&, double, 
> osgeo::proj::common::UnitOfMeasure::Type, 
> std::__cxx11::basic_string<char, std::char_traits<char>, 
> std::allocator<char> > const&, std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&) (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BC3601: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
> ==9770==??? by 0x1: ???
> ==9770==??? by 0x1FFF000192: ???
> ==9770==??? by 0x1FFF00019A: ???
> ==9770==
> ==9770== Invalid read of size 8
> ==9770==??? at 0xBC1EC0D: 
> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0xBC143E6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Address 0xe87c6d0 is 0 bytes inside a block of size 112 free'd
> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BD02FC: 
> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0x7BC5AB6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Block was alloc'd at
> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BD3B34: 
> osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&, double, 
> osgeo::proj::common::UnitOfMeasure::Type, 
> std::__cxx11::basic_string<char, std::char_traits<char>, 
> std::allocator<char> > const&, std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&) (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BC3601: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
> ==9770==??? by 0x1: ???
> ==9770==??? by 0x1FFF000192: ???
> ==9770==??? by 0x1FFF00019A: ???
> ==9770==
> ==9770== Invalid free() / delete / delete[] / realloc()
> ==9770==??? at 0x483CFBF: operator delete(void*) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0xBC1EC1F: 
> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0xBC143E6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Address 0xe87c780 is 0 bytes inside a block of size 27 free'd
> ==9770==??? at 0x483CFBF: operator delete(void*) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BD02EF: 
> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0x7BC5AB6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Block was alloc'd at
> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BCA38C: void std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> 
> >::_M_construct<char*>(char*, char*, std::forward_iterator_tag) (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BD3B53: 
> osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&, double, 
> osgeo::proj::common::UnitOfMeasure::Type, 
> std::__cxx11::basic_string<char, std::char_traits<char>, 
> std::allocator<char> > const&, std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&) (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BC3601: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
> ==9770==??? by 0x1: ???
> ==9770==??? by 0x1FFF000192: ???
> ==9770==??? by 0x1FFF00019A: ???
> ==9770==
> ==9770== Invalid free() / delete / delete[] / realloc()
> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0xBC1EC2C: 
> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0xBC143E6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Address 0xe87c6d0 is 0 bytes inside a block of size 112 free'd
> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BD02FC: 
> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0x7BC5AB6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Block was alloc'd at
> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BD3B34: 
> osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&, double, 
> osgeo::proj::common::UnitOfMeasure::Type, 
> std::__cxx11::basic_string<char, std::char_traits<char>, 
> std::allocator<char> > const&, std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&) (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BC3601: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
> ==9770==??? by 0x1: ???
> ==9770==??? by 0x1FFF000192: ???
> ==9770==??? by 0x1FFF00019A: ???
> ==9770==
> ==9770== Invalid read of size 8
> ==9770==??? at 0xBC14EEC: osgeo::proj::util::BaseObject::~BaseObject() 
> (in /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0xBC143E6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Address 0xe87c688 is 8 bytes inside a block of size 16 free'd
> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0x7BC5AB6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Block was alloc'd at
> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BC673F: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BD3B1B: 
> osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&, double, 
> osgeo::proj::common::UnitOfMeasure::Type, 
> std::__cxx11::basic_string<char, std::char_traits<char>, 
> std::allocator<char> > const&, std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&) (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BC3601: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
> ==9770==??? by 0x1: ???
> ==9770==??? by 0x1FFF000192: ???
> ==9770==??? by 0x1FFF00019A: ???
> ==9770==
> ==9770== Invalid free() / delete / delete[] / realloc()
> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0xBC143E6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Address 0xe87c680 is 0 bytes inside a block of size 16 free'd
> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0x7BC5AB6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Block was alloc'd at
> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BC673F: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BD3B1B: 
> osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&, double, 
> osgeo::proj::common::UnitOfMeasure::Type, 
> std::__cxx11::basic_string<char, std::char_traits<char>, 
> std::allocator<char> > const&, std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&) (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BC3601: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
> ==9770==??? by 0x1: ???
> ==9770==??? by 0x1FFF000192: ???
> ==9770==??? by 0x1FFF00019A: ???
> ==9770==
> ==9770== Invalid read of size 4
> ==9770==??? at 0xBC14804: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0xBC143E6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Address 0xe878168 is 8 bytes inside a block of size 24 free'd
> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
> ==9770==??? by 0x7BC5AB6: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
> ==9770==??? by 0x6082BDF: exit (exit.c:139)
> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
> ==9770==? Block was alloc'd at
> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
> ==9770==??? by 0x7BCD021: 
> osgeo::proj::metadata::Extent::create(osgeo::proj::util::optional<std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > > const&, 
> std::vector<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::GeographicExtent> 
> >, 
> std::allocator<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::GeographicExtent> 
> > > > const&, 
> std::vector<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::VerticalExtent> 
> >, 
> std::allocator<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::VerticalExtent> 
> > > > const&, 
> std::vector<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::TemporalExtent> 
> >, 
> std::allocator<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::TemporalExtent> 
> > > > const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BCD254: 
> osgeo::proj::metadata::Extent::createFromBBOX(double, double, double, 
> double, osgeo::proj::util::optional<std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > > const&) (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x7BC1C39: ??? (in 
> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
> ==9770==??? by 0x1: ???
> ==9770==??? by 0x1FFF000192: ???
> ==9770==??? by 0x1FFF00019A: ???
> ==9770==
> ==9770==
> ==9770== HEAP SUMMARY:
> ==9770==???? in use at exit: 485,109 bytes in 4,443 blocks
> ==9770==?? total heap usage: 8,799 allocs, 4,391 frees, 1,649,539 
> bytes allocated
> ==9770==
> ==9770== LEAK SUMMARY:
> ==9770==??? definitely lost: 2,583 bytes in 41 blocks
> ==9770==??? indirectly lost: 39,830 bytes in 735 blocks
> ==9770==????? possibly lost: 0 bytes in 0 blocks
> ==9770==??? still reachable: 442,696 bytes in 3,667 blocks
> ==9770==???????? suppressed: 0 bytes in 0 blocks
> ==9770== Rerun with --leak-check=full to see details of leaked memory
> ==9770==
> ==9770== For lists of detected and suppressed errors, rerun with: -s
> ==9770== ERROR SUMMARY: 142 errors from 14 contexts (suppressed: 0 
> from 0)
>
>
> On 5/8/21 3:53 PM, Even Rouault wrote:
>> From https://launchpad.net/ubuntu/+source/gdal , no Ubuntu version 
>> ships with 3.2.1. Perhaps you are using the ubuntugis PPA with 
>> 3.2.1+dfsg-1~focal0 ? I'd suspect some mismatch of underlying 
>> libraries, perhaps proj.
>>
>> What's the output of
>>
>> ldd `which ogrinfo`
>>
>> and also do
>>
>> sudo apt install valgrind
>>
>> and what's the output of
>>
>> valgrind ogrinfo --version
>>
>>
>> Le 08/05/2021 ? 14:28, Bryan Keith a ?crit?:
>>> Hello,
>>>
>>> I am trying to install GDAL on Ubuntu.? When I check the 
>>> installation, I get this:
>>>
>>> ogrinfo --version
>>> GDAL 3.2.1, released 2020/12/29
>>> free(): invalid pointer
>>> Aborted (core dumped)
>>>
>>> Hmmm, what to do?
>>>
>>> I installed like this:
>>>
>>> sudo apt-get install gdal-bin
>>>
>>> My Python installations look like this:
>>>
>>> $ python -V
>>> Python 2.7.18
>>> $ python3 -V
>>> Python 3.8.5
>>>
>>> I imagine more information is required to diagnose this problem, but 
>>> I'm not sure what that would be.? Any help is appreciated. Thank you.
>>>
>>> Bryan
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From bryandenniskeith at gmail.com  Sat May  8 08:29:20 2021
From: bryandenniskeith at gmail.com (Bryan Keith)
Date: Sat, 8 May 2021 18:29:20 +0300
Subject: [gdal-dev] ubuntu installation issue: free(): invalid pointer,
 Aborted (core dumped)
In-Reply-To: <d81e5be2-ca72-9375-fa04-ffa562aecbdf@spatialys.com>
References: <c1bc6b9c-42bf-f7d9-aa0d-1aa2d5710616@gmail.com>
 <3e606551-9c28-202b-c203-b6ef043dcdf0@spatialys.com>
 <0b99aae6-4774-9e36-7d69-e92916e279ef@gmail.com>
 <d81e5be2-ca72-9375-fa04-ffa562aecbdf@spatialys.com>
Message-ID: <74de08cb-6967-11b4-80e3-f0449bb98cd7@gmail.com>

Evan,

Fantastic.? That did it.? I updated libspatialite and libgeotiff, and 
now the core dump is gone (as is libproj.so.15 from the ldd `which 
ogrinfo` ouput).? Thank you.

Let's see what happens next... :)

Bryan

On 5/8/21 6:11 PM, Even Rouault wrote:
> ok, so your GDAL is linking against 2 PROJ versions libproj.so.15 and 
> libproj.so.19. Make sure your libspatialite and libgeotiff versions 
> are from the ubuntugis PPA, so they link gainst libproj.so.19 and no 
> .so.15
>
> Le 08/05/2021 ? 16:42, Bryan Keith a ?crit?:
>> Yes, I'm using the ubuntugis ppa with 3.2.1+dfsg-1~focal0
>> but I have no specific need to use that.? Should I use a different 
>> version?
>>
>> Now I'll paste the results of the two commands you requested.
>>
>>
>>
>> linux-vdso.so.1 (0x00007ffd7e5b4000)
>> ??? libgdal.so.28 => /usr/lib/libgdal.so.28 (0x00007f2f66e29000)
>> ??? libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 
>> (0x00007f2f66c48000)
>> ??? libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 
>> (0x00007f2f66c2d000)
>> ??? libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f2f66a3b000)
>> ??? libheif.so.1 => /usr/lib/x86_64-linux-gnu/libheif.so.1 
>> (0x00007f2f669bb000)
>> ??? libarmadillo.so.9 => /usr/lib/libarmadillo.so.9 (0x00007f2f669a8000)
>> ??? libpoppler.so.97 => /usr/lib/x86_64-linux-gnu/libpoppler.so.97 
>> (0x00007f2f66661000)
>> ??? libjson-c.so.4 => /usr/lib/x86_64-linux-gnu/libjson-c.so.4 
>> (0x00007f2f6664f000)
>> ??? libfreexl.so.1 => /usr/lib/x86_64-linux-gnu/libfreexl.so.1 
>> (0x00007f2f66644000)
>> ??? libqhull.so.7 => /usr/lib/x86_64-linux-gnu/libqhull.so.7 
>> (0x00007f2f663ea000)
>> ??? libgeos_c.so.1 => /usr/lib/x86_64-linux-gnu/libgeos_c.so.1 
>> (0x00007f2f663a7000)
>> ??? libwebp.so.6 => /usr/lib/x86_64-linux-gnu/libwebp.so.6 
>> (0x00007f2f6613e000)
>> ??? libepsilon.so.1 => /usr/lib/x86_64-linux-gnu/libepsilon.so.1 
>> (0x00007f2f66122000)
>> ??? libodbc.so.2 => /usr/lib/x86_64-linux-gnu/libodbc.so.2 
>> (0x00007f2f660b0000)
>> ??? libodbcinst.so.2 => /usr/lib/x86_64-linux-gnu/libodbcinst.so.2 
>> (0x00007f2f66098000)
>> ??? libkmlbase.so.1 => /usr/lib/x86_64-linux-gnu/libkmlbase.so.1 
>> (0x00007f2f6607b000)
>> ??? libkmldom.so.1 => /usr/lib/x86_64-linux-gnu/libkmldom.so.1 
>> (0x00007f2f65fda000)
>> ??? libkmlengine.so.1 => /usr/lib/x86_64-linux-gnu/libkmlengine.so.1 
>> (0x00007f2f65fa0000)
>> ??? libexpat.so.1 => /lib/x86_64-linux-gnu/libexpat.so.1 
>> (0x00007f2f65f70000)
>> ??? libxerces-c-3.2.so => 
>> /usr/lib/x86_64-linux-gnu/libxerces-c-3.2.so (0x00007f2f65bdd000)
>> ??? libopenjp2.so.7 => /usr/lib/x86_64-linux-gnu/libopenjp2.so.7 
>> (0x00007f2f65b87000)
>> ??? libnetcdf.so.15 => /usr/lib/x86_64-linux-gnu/libnetcdf.so.15 
>> (0x00007f2f65a62000)
>> ??? libhdf5_serial.so.103 => 
>> /usr/lib/x86_64-linux-gnu/libhdf5_serial.so.103 (0x00007f2f656e5000)
>> ??? libmfhdfalt.so.0 => /usr/lib/libmfhdfalt.so.0 (0x00007f2f656bb000)
>> ??? libdfalt.so.0 => /usr/lib/libdfalt.so.0 (0x00007f2f65614000)
>> ??? libogdi.so.4.1 => /usr/lib/libogdi.so.4.1 (0x00007f2f655f8000)
>> ??? libgif.so.7 => /usr/lib/x86_64-linux-gnu/libgif.so.7 
>> (0x00007f2f655ed000)
>> ??? libCharLS.so.2 => /usr/lib/x86_64-linux-gnu/libCharLS.so.2 
>> (0x00007f2f6559e000)
>> ??? libjpeg.so.8 => /usr/lib/x86_64-linux-gnu/libjpeg.so.8 
>> (0x00007f2f65519000)
>> ??? libgeotiff.so.5 => /usr/lib/x86_64-linux-gnu/libgeotiff.so.5 
>> (0x00007f2f654e4000)
>> ??? libpng16.so.16 => /usr/lib/x86_64-linux-gnu/libpng16.so.16 
>> (0x00007f2f654aa000)
>> ??? libcfitsio.so.8 => /usr/lib/x86_64-linux-gnu/libcfitsio.so.8 
>> (0x00007f2f651ab000)
>> ??? libpq.so.5 => /usr/lib/x86_64-linux-gnu/libpq.so.5 
>> (0x00007f2f6515b000)
>> ??? libproj.so.19 => /usr/lib/x86_64-linux-gnu/libproj.so.19 
>> (0x00007f2f64dea000)
>> ??? libsqlite3.so.0 => /usr/lib/x86_64-linux-gnu/libsqlite3.so.0 
>> (0x00007f2f64cc1000)
>> ??? libtiff.so.5 => /usr/lib/x86_64-linux-gnu/libtiff.so.5 
>> (0x00007f2f64c40000)
>> ??? libdeflate.so.0 => /usr/lib/x86_64-linux-gnu/libdeflate.so.0 
>> (0x00007f2f64c20000)
>> ??? libspatialite.so.7 => 
>> /usr/lib/x86_64-linux-gnu/libspatialite.so.7 (0x00007f2f64691000)
>> ??? libdapclient.so.6 => /usr/lib/x86_64-linux-gnu/libdapclient.so.6 
>> (0x00007f2f64649000)
>> ??? libdap.so.25 => /usr/lib/x86_64-linux-gnu/libdap.so.25 
>> (0x00007f2f644ab000)
>> ??? libpcre.so.3 => /lib/x86_64-linux-gnu/libpcre.so.3 
>> (0x00007f2f64438000)
>> ??? libcurl-gnutls.so.4 => 
>> /usr/lib/x86_64-linux-gnu/libcurl-gnutls.so.4 (0x00007f2f643a9000)
>> ??? libfyba.so.0 => /usr/lib/x86_64-linux-gnu/libfyba.so.0 
>> (0x00007f2f6434f000)
>> ??? libxml2.so.2 => /usr/lib/x86_64-linux-gnu/libxml2.so.2 
>> (0x00007f2f64195000)
>> ??? libmysqlclient.so.21 => 
>> /usr/lib/x86_64-linux-gnu/libmysqlclient.so.21 (0x00007f2f63a9f000)
>> ??? libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 
>> (0x00007f2f63a7c000)
>> ??? libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f2f63a60000)
>> ??? libcrypto.so.1.1 => /usr/lib/x86_64-linux-gnu/libcrypto.so.1.1 
>> (0x00007f2f6378a000)
>> ??? libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f2f63782000)
>> ??? libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f2f63633000)
>> ??? /lib64/ld-linux-x86-64.so.2 (0x00007f2f68428000)
>> ??? libde265.so.0 => /usr/lib/x86_64-linux-gnu/libde265.so.0 
>> (0x00007f2f6358f000)
>> ??? libx265.so.179 => /usr/lib/x86_64-linux-gnu/libx265.so.179 
>> (0x00007f2f62621000)
>> ??? libblas.so.3 => /usr/lib/x86_64-linux-gnu/libblas.so.3 
>> (0x00007f2f625b4000)
>> ??? liblapack.so.3 => /usr/lib/x86_64-linux-gnu/liblapack.so.3 
>> (0x00007f2f61f0e000)
>> ??? libarpack.so.2 => /usr/lib/x86_64-linux-gnu/libarpack.so.2 
>> (0x00007f2f61ec6000)
>> ??? libsuperlu.so.5 => /usr/lib/x86_64-linux-gnu/libsuperlu.so.5 
>> (0x00007f2f61e56000)
>> ??? libfreetype.so.6 => /usr/lib/x86_64-linux-gnu/libfreetype.so.6 
>> (0x00007f2f61d97000)
>> ??? libfontconfig.so.1 => 
>> /usr/lib/x86_64-linux-gnu/libfontconfig.so.1 (0x00007f2f61d50000)
>> ??? liblcms2.so.2 => /usr/lib/x86_64-linux-gnu/liblcms2.so.2 
>> (0x00007f2f61cf5000)
>> ??? libnss3.so => /usr/lib/x86_64-linux-gnu/libnss3.so 
>> (0x00007f2f61ba4000)
>> ??? libsmime3.so => /usr/lib/x86_64-linux-gnu/libsmime3.so 
>> (0x00007f2f61b74000)
>> ??? libnspr4.so => /usr/lib/x86_64-linux-gnu/libnspr4.so 
>> (0x00007f2f61b34000)
>> ??? libgeos-3.8.0.so => /usr/lib/x86_64-linux-gnu/libgeos-3.8.0.so 
>> (0x00007f2f6196b000)
>> ??? libltdl.so.7 => /usr/lib/x86_64-linux-gnu/libltdl.so.7 
>> (0x00007f2f61960000)
>> ??? libminizip.so.1 => /usr/lib/x86_64-linux-gnu/libminizip.so.1 
>> (0x00007f2f61753000)
>> ??? liburiparser.so.1 => /usr/lib/x86_64-linux-gnu/liburiparser.so.1 
>> (0x00007f2f61734000)
>> ??? libicuuc.so.66 => /usr/lib/x86_64-linux-gnu/libicuuc.so.66 
>> (0x00007f2f6154e000)
>> ??? libhdf5_serial_hl.so.100 => 
>> /usr/lib/x86_64-linux-gnu/libhdf5_serial_hl.so.100 (0x00007f2f61527000)
>> ??? libsz.so.2 => /usr/lib/x86_64-linux-gnu/libsz.so.2 
>> (0x00007f2f61522000)
>> ??? libbz2.so.1.0 => /lib/x86_64-linux-gnu/libbz2.so.1.0 
>> (0x00007f2f6150d000)
>> ??? libssl.so.1.1 => /usr/lib/x86_64-linux-gnu/libssl.so.1.1 
>> (0x00007f2f6147a000)
>> ??? libgssapi_krb5.so.2 => 
>> /usr/lib/x86_64-linux-gnu/libgssapi_krb5.so.2 (0x00007f2f6142d000)
>> ??? libldap_r-2.4.so.2 => 
>> /usr/lib/x86_64-linux-gnu/libldap_r-2.4.so.2 (0x00007f2f613d7000)
>> ??? libzstd.so.1 => /usr/lib/x86_64-linux-gnu/libzstd.so.1 
>> (0x00007f2f6132e000)
>> ??? liblzma.so.5 => /lib/x86_64-linux-gnu/liblzma.so.5 
>> (0x00007f2f61303000)
>> ??? libjbig.so.0 => /usr/lib/x86_64-linux-gnu/libjbig.so.0 
>> (0x00007f2f610f5000)
>> ??? libproj.so.15 => /usr/lib/x86_64-linux-gnu/libproj.so.15 
>> (0x00007f2f60e06000)
>> ??? libnghttp2.so.14 => /usr/lib/x86_64-linux-gnu/libnghttp2.so.14 
>> (0x00007f2f60ddd000)
>> ??? libidn2.so.0 => /usr/lib/x86_64-linux-gnu/libidn2.so.0 
>> (0x00007f2f60dbc000)
>> ??? librtmp.so.1 => /usr/lib/x86_64-linux-gnu/librtmp.so.1 
>> (0x00007f2f60d9a000)
>> ??? libssh.so.4 => /usr/lib/x86_64-linux-gnu/libssh.so.4 
>> (0x00007f2f60d2c000)
>> ??? libpsl.so.5 => /usr/lib/x86_64-linux-gnu/libpsl.so.5 
>> (0x00007f2f60d19000)
>> ??? libnettle.so.7 => /usr/lib/x86_64-linux-gnu/libnettle.so.7 
>> (0x00007f2f60cdf000)
>> ??? libgnutls.so.30 => /usr/lib/x86_64-linux-gnu/libgnutls.so.30 
>> (0x00007f2f60b09000)
>> ??? liblber-2.4.so.2 => /usr/lib/x86_64-linux-gnu/liblber-2.4.so.2 
>> (0x00007f2f60af8000)
>> ??? libbrotlidec.so.1 => /usr/lib/x86_64-linux-gnu/libbrotlidec.so.1 
>> (0x00007f2f60ae8000)
>> ??? libfyut.so.0 => /usr/lib/x86_64-linux-gnu/libfyut.so.0 
>> (0x00007f2f60adc000)
>> ??? libfygm.so.0 => /usr/lib/x86_64-linux-gnu/libfygm.so.0 
>> (0x00007f2f60ad3000)
>> ??? libresolv.so.2 => /lib/x86_64-linux-gnu/libresolv.so.2 
>> (0x00007f2f60ab7000)
>> ??? libnuma.so.1 => /usr/lib/x86_64-linux-gnu/libnuma.so.1 
>> (0x00007f2f60aaa000)
>> ??? libgfortran.so.5 => /usr/lib/x86_64-linux-gnu/libgfortran.so.5 
>> (0x00007f2f607e0000)
>> ??? libuuid.so.1 => /lib/x86_64-linux-gnu/libuuid.so.1 
>> (0x00007f2f607d7000)
>> ??? libnssutil3.so => /usr/lib/x86_64-linux-gnu/libnssutil3.so 
>> (0x00007f2f607a4000)
>> ??? libplc4.so => /usr/lib/x86_64-linux-gnu/libplc4.so 
>> (0x00007f2f6079d000)
>> ??? libplds4.so => /usr/lib/x86_64-linux-gnu/libplds4.so 
>> (0x00007f2f60798000)
>> ??? libicudata.so.66 => /usr/lib/x86_64-linux-gnu/libicudata.so.66 
>> (0x00007f2f5ecd5000)
>> ??? libaec.so.0 => /usr/lib/x86_64-linux-gnu/libaec.so.0 
>> (0x00007f2f5eccc000)
>> ??? libkrb5.so.3 => /usr/lib/x86_64-linux-gnu/libkrb5.so.3 
>> (0x00007f2f5ebef000)
>> ??? libk5crypto.so.3 => /usr/lib/x86_64-linux-gnu/libk5crypto.so.3 
>> (0x00007f2f5ebbe000)
>> ??? libcom_err.so.2 => /lib/x86_64-linux-gnu/libcom_err.so.2 
>> (0x00007f2f5ebb7000)
>> ??? libkrb5support.so.0 => 
>> /usr/lib/x86_64-linux-gnu/libkrb5support.so.0 (0x00007f2f5eba6000)
>> ??? libsasl2.so.2 => /usr/lib/x86_64-linux-gnu/libsasl2.so.2 
>> (0x00007f2f5eb89000)
>> ??? libgssapi.so.3 => /usr/lib/x86_64-linux-gnu/libgssapi.so.3 
>> (0x00007f2f5eb44000)
>> ??? libunistring.so.2 => /usr/lib/x86_64-linux-gnu/libunistring.so.2 
>> (0x00007f2f5e9c2000)
>> ??? libhogweed.so.5 => /usr/lib/x86_64-linux-gnu/libhogweed.so.5 
>> (0x00007f2f5e98b000)
>> ??? libgmp.so.10 => /usr/lib/x86_64-linux-gnu/libgmp.so.10 
>> (0x00007f2f5e907000)
>> ??? libp11-kit.so.0 => /usr/lib/x86_64-linux-gnu/libp11-kit.so.0 
>> (0x00007f2f5e7cf000)
>> ??? libtasn1.so.6 => /usr/lib/x86_64-linux-gnu/libtasn1.so.6 
>> (0x00007f2f5e7b9000)
>> ??? libbrotlicommon.so.1 => 
>> /usr/lib/x86_64-linux-gnu/libbrotlicommon.so.1 (0x00007f2f5e796000)
>> ??? libquadmath.so.0 => /usr/lib/x86_64-linux-gnu/libquadmath.so.0 
>> (0x00007f2f5e74c000)
>> ??? libkeyutils.so.1 => /lib/x86_64-linux-gnu/libkeyutils.so.1 
>> (0x00007f2f5e745000)
>> ??? libheimntlm.so.0 => /usr/lib/x86_64-linux-gnu/libheimntlm.so.0 
>> (0x00007f2f5e737000)
>> ??? libkrb5.so.26 => /usr/lib/x86_64-linux-gnu/libkrb5.so.26 
>> (0x00007f2f5e6a4000)
>> ??? libasn1.so.8 => /usr/lib/x86_64-linux-gnu/libasn1.so.8 
>> (0x00007f2f5e5fd000)
>> ??? libhcrypto.so.4 => /usr/lib/x86_64-linux-gnu/libhcrypto.so.4 
>> (0x00007f2f5e5c5000)
>> ??? libroken.so.18 => /usr/lib/x86_64-linux-gnu/libroken.so.18 
>> (0x00007f2f5e5ac000)
>> ??? libffi.so.7 => /usr/lib/x86_64-linux-gnu/libffi.so.7 
>> (0x00007f2f5e5a0000)
>> ??? libwind.so.0 => /usr/lib/x86_64-linux-gnu/libwind.so.0 
>> (0x00007f2f5e574000)
>> ??? libheimbase.so.1 => /usr/lib/x86_64-linux-gnu/libheimbase.so.1 
>> (0x00007f2f5e562000)
>> ??? libhx509.so.5 => /usr/lib/x86_64-linux-gnu/libhx509.so.5 
>> (0x00007f2f5e514000)
>> ??? libcrypt.so.1 => /lib/x86_64-linux-gnu/libcrypt.so.1 
>> (0x00007f2f5e4d9000)
>>
>> valgrind ogrinfo --version
>>
>> ==9770== Memcheck, a memory error detector
>> ==9770== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
>> ==9770== Using Valgrind-3.15.0 and LibVEX; rerun with -h for 
>> copyright info
>> ==9770== Command: ogrinfo --version
>> ==9770==
>> GDAL 3.2.1, released 2020/12/29
>> ==9770== Invalid free() / delete / delete[] / realloc()
>> ==9770==??? at 0x483CFBF: operator delete(void*) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0xBC143E6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Address 0xe8a80d0 is 0 bytes inside a block of size 17 free'd
>> ==9770==??? at 0x483CFBF: operator delete(void*) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0x7BC5AB6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Block was alloc'd at
>> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BC18BF: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BC4A15: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
>> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
>> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
>> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
>> ==9770==??? by 0x1: ???
>> ==9770==??? by 0x1FFF000192: ???
>> ==9770==??? by 0x1FFF00019A: ???
>> ==9770==
>> ==9770== Invalid read of size 4
>> ==9770==??? at 0xBC148C4: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0xBC143E6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Address 0xe8a7a28 is 8 bytes inside a block of size 24 free'd
>> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0x7BC5AB6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Block was alloc'd at
>> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BE2EC8: 
>> osgeo::proj::crs::GeographicCRS::create(osgeo::proj::util::PropertyMap 
>> const&, std::shared_ptr<osgeo::proj::datum::GeodeticReferenceFrame> 
>> const&, std::shared_ptr<osgeo::proj::datum::DatumEnsemble> const&, 
>> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::cs::EllipsoidalCS> > 
>> const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BE311A: 
>> osgeo::proj::crs::GeographicCRS::create(osgeo::proj::util::PropertyMap 
>> const&, 
>> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::datum::GeodeticReferenceFrame> 
>> > const&, 
>> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::cs::EllipsoidalCS> > 
>> const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BE36E8: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BC49E9: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
>> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
>> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
>> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
>> ==9770==??? by 0x1: ???
>> ==9770==??? by 0x1FFF000192: ???
>> ==9770==??? by 0x1FFF00019A: ???
>> ==9770==
>> ==9770== Invalid read of size 4
>> ==9770==??? at 0xBC14A44: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0xBC143E6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Address 0xe890298 is 8 bytes inside a block of size 24 free'd
>> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0x7BC5AB6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Block was alloc'd at
>> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BE2B18: 
>> osgeo::proj::crs::GeodeticCRS::create(osgeo::proj::util::PropertyMap 
>> const&, std::shared_ptr<osgeo::proj::datum::GeodeticReferenceFrame> 
>> const&, std::shared_ptr<osgeo::proj::datum::DatumEnsemble> const&, 
>> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::cs::CartesianCS> > 
>> const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BE2CAA: 
>> osgeo::proj::crs::GeodeticCRS::create(osgeo::proj::util::PropertyMap 
>> const&, 
>> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::datum::GeodeticReferenceFrame> 
>> > const&, 
>> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::cs::CartesianCS> > 
>> const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BE2DB1: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BC490B: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
>> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
>> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
>> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
>> ==9770==??? by 0x1: ???
>> ==9770==??? by 0x1FFF000192: ???
>> ==9770==??? by 0x1FFF00019A: ???
>> ==9770==
>> ==9770== Invalid read of size 4
>> ==9770==??? at 0xBC14984: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0xBC143E6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Address 0xe88c1c8 is 8 bytes inside a block of size 24 free'd
>> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0x7BC5AB6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Block was alloc'd at
>> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7C0A775: 
>> osgeo::proj::datum::GeodeticReferenceFrame::create(osgeo::proj::util::PropertyMap 
>> const&, 
>> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::datum::Ellipsoid> > 
>> const&, osgeo::proj::util::optional<std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > > const&, 
>> dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::datum::PrimeMeridian> 
>> > const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7C0AA12: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BC48BE: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
>> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
>> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
>> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
>> ==9770==??? by 0x1: ???
>> ==9770==??? by 0x1FFF000192: ???
>> ==9770==??? by 0x1FFF00019A: ???
>> ==9770==
>> ==9770== Invalid read of size 4
>> ==9770==??? at 0xBC14744: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0xBC143E6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Address 0xe888028 is 8 bytes inside a block of size 24 free'd
>> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0x7BC5AB6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Block was alloc'd at
>> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7C112E2: 
>> osgeo::proj::datum::Ellipsoid::createFlattenedSphere(osgeo::proj::util::PropertyMap 
>> const&, osgeo::proj::common::Length const&, 
>> osgeo::proj::common::Scale const&, std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&) (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7C117CC: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BC484F: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
>> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
>> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
>> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
>> ==9770==??? by 0x1: ???
>> ==9770==??? by 0x1FFF000192: ???
>> ==9770==??? by 0x1FFF00019A: ???
>> ==9770==
>> ==9770== Invalid read of size 4
>> ==9770==??? at 0xBC14684: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0xBC143E6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Address 0xe882688 is 8 bytes inside a block of size 24 free'd
>> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0x7BC5AB6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Block was alloc'd at
>> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7C0FAF9: 
>> osgeo::proj::datum::PrimeMeridian::create(osgeo::proj::util::PropertyMap 
>> const&, osgeo::proj::common::Angle const&) (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7C0FD32: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BC47B8: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
>> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
>> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
>> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
>> ==9770==??? by 0x1: ???
>> ==9770==??? by 0x1FFF000192: ???
>> ==9770==??? by 0x1FFF00019A: ???
>> ==9770==
>> ==9770== Invalid read of size 8
>> ==9770==??? at 0xBC1EBE5: 
>> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0xBC143E6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Address 0xe87c720 is 80 bytes inside a block of size 112 
>> free'd
>> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BD02FC: 
>> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0x7BC5AB6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Block was alloc'd at
>> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BD3B34: 
>> osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&, double, 
>> osgeo::proj::common::UnitOfMeasure::Type, 
>> std::__cxx11::basic_string<char, std::char_traits<char>, 
>> std::allocator<char> > const&, std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&) (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BC3601: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
>> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
>> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
>> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
>> ==9770==??? by 0x1: ???
>> ==9770==??? by 0x1FFF000192: ???
>> ==9770==??? by 0x1FFF00019A: ???
>> ==9770==
>> ==9770== Invalid read of size 8
>> ==9770==??? at 0xBC1EBF9: 
>> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0xBC143E6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Address 0xe87c700 is 48 bytes inside a block of size 112 
>> free'd
>> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BD02FC: 
>> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0x7BC5AB6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Block was alloc'd at
>> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BD3B34: 
>> osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&, double, 
>> osgeo::proj::common::UnitOfMeasure::Type, 
>> std::__cxx11::basic_string<char, std::char_traits<char>, 
>> std::allocator<char> > const&, std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&) (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BC3601: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
>> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
>> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
>> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
>> ==9770==??? by 0x1: ???
>> ==9770==??? by 0x1FFF000192: ???
>> ==9770==??? by 0x1FFF00019A: ???
>> ==9770==
>> ==9770== Invalid read of size 8
>> ==9770==??? at 0xBC1EC0D: 
>> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0xBC143E6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Address 0xe87c6d0 is 0 bytes inside a block of size 112 free'd
>> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BD02FC: 
>> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0x7BC5AB6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Block was alloc'd at
>> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BD3B34: 
>> osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&, double, 
>> osgeo::proj::common::UnitOfMeasure::Type, 
>> std::__cxx11::basic_string<char, std::char_traits<char>, 
>> std::allocator<char> > const&, std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&) (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BC3601: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
>> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
>> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
>> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
>> ==9770==??? by 0x1: ???
>> ==9770==??? by 0x1FFF000192: ???
>> ==9770==??? by 0x1FFF00019A: ???
>> ==9770==
>> ==9770== Invalid free() / delete / delete[] / realloc()
>> ==9770==??? at 0x483CFBF: operator delete(void*) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0xBC1EC1F: 
>> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0xBC143E6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Address 0xe87c780 is 0 bytes inside a block of size 27 free'd
>> ==9770==??? at 0x483CFBF: operator delete(void*) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BD02EF: 
>> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0x7BC5AB6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Block was alloc'd at
>> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BCA38C: void std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> 
>> >::_M_construct<char*>(char*, char*, std::forward_iterator_tag) (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BD3B53: 
>> osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&, double, 
>> osgeo::proj::common::UnitOfMeasure::Type, 
>> std::__cxx11::basic_string<char, std::char_traits<char>, 
>> std::allocator<char> > const&, std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&) (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BC3601: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
>> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
>> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
>> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
>> ==9770==??? by 0x1: ???
>> ==9770==??? by 0x1FFF000192: ???
>> ==9770==??? by 0x1FFF00019A: ???
>> ==9770==
>> ==9770== Invalid free() / delete / delete[] / realloc()
>> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0xBC1EC2C: 
>> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0xBC143E6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Address 0xe87c6d0 is 0 bytes inside a block of size 112 free'd
>> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BD02FC: 
>> osgeo::proj::common::UnitOfMeasure::~UnitOfMeasure() (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0x7BC5AB6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Block was alloc'd at
>> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BD3B34: 
>> osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&, double, 
>> osgeo::proj::common::UnitOfMeasure::Type, 
>> std::__cxx11::basic_string<char, std::char_traits<char>, 
>> std::allocator<char> > const&, std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&) (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BC3601: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
>> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
>> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
>> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
>> ==9770==??? by 0x1: ???
>> ==9770==??? by 0x1FFF000192: ???
>> ==9770==??? by 0x1FFF00019A: ???
>> ==9770==
>> ==9770== Invalid read of size 8
>> ==9770==??? at 0xBC14EEC: 
>> osgeo::proj::util::BaseObject::~BaseObject() (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0xBC143E6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Address 0xe87c688 is 8 bytes inside a block of size 16 free'd
>> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0x7BC5AB6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Block was alloc'd at
>> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BC673F: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BD3B1B: 
>> osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&, double, 
>> osgeo::proj::common::UnitOfMeasure::Type, 
>> std::__cxx11::basic_string<char, std::char_traits<char>, 
>> std::allocator<char> > const&, std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&) (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BC3601: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
>> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
>> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
>> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
>> ==9770==??? by 0x1: ???
>> ==9770==??? by 0x1FFF000192: ???
>> ==9770==??? by 0x1FFF00019A: ???
>> ==9770==
>> ==9770== Invalid free() / delete / delete[] / realloc()
>> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0xBC143E6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Address 0xe87c680 is 0 bytes inside a block of size 16 free'd
>> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0x7BC5AB6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Block was alloc'd at
>> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BC673F: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BD3B1B: 
>> osgeo::proj::common::UnitOfMeasure::UnitOfMeasure(std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&, double, 
>> osgeo::proj::common::UnitOfMeasure::Type, 
>> std::__cxx11::basic_string<char, std::char_traits<char>, 
>> std::allocator<char> > const&, std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > const&) (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BC3601: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
>> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
>> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
>> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
>> ==9770==??? by 0x1: ???
>> ==9770==??? by 0x1FFF000192: ???
>> ==9770==??? by 0x1FFF00019A: ???
>> ==9770==
>> ==9770== Invalid read of size 4
>> ==9770==??? at 0xBC14804: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0xBC143E6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.15.3.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Address 0xe878168 is 8 bytes inside a block of size 24 free'd
>> ==9770==??? at 0x483D1CF: operator delete(void*, unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x608315D: __cxa_finalize (cxa_finalize.c:83)
>> ==9770==??? by 0x7BC5AB6: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011F5A: _dl_fini (dl-fini.c:138)
>> ==9770==??? by 0x6082A26: __run_exit_handlers (exit.c:108)
>> ==9770==??? by 0x6082BDF: exit (exit.c:139)
>> ==9770==??? by 0x10C0BF: ??? (in /usr/bin/ogrinfo)
>> ==9770==??? by 0x60600B2: (below main) (libc-start.c:308)
>> ==9770==? Block was alloc'd at
>> ==9770==??? at 0x483BE63: operator new(unsigned long) (in 
>> /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
>> ==9770==??? by 0x7BCD021: 
>> osgeo::proj::metadata::Extent::create(osgeo::proj::util::optional<std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > > const&, 
>> std::vector<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::GeographicExtent> 
>> >, 
>> std::allocator<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::GeographicExtent> 
>> > > > const&, 
>> std::vector<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::VerticalExtent> 
>> >, 
>> std::allocator<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::VerticalExtent> 
>> > > > const&, 
>> std::vector<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::TemporalExtent> 
>> >, 
>> std::allocator<dropbox::oxygen::nn<std::shared_ptr<osgeo::proj::metadata::TemporalExtent> 
>> > > > const&) (in /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BCD254: 
>> osgeo::proj::metadata::Extent::createFromBBOX(double, double, double, 
>> double, osgeo::proj::util::optional<std::__cxx11::basic_string<char, 
>> std::char_traits<char>, std::allocator<char> > > const&) (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x7BC1C39: ??? (in 
>> /usr/lib/x86_64-linux-gnu/libproj.so.19.2.1)
>> ==9770==??? by 0x4011B89: call_init.part.0 (dl-init.c:72)
>> ==9770==??? by 0x4011C90: call_init (dl-init.c:30)
>> ==9770==??? by 0x4011C90: _dl_init (dl-init.c:119)
>> ==9770==??? by 0x4001139: ??? (in /lib/x86_64-linux-gnu/ld-2.31.so)
>> ==9770==??? by 0x1: ???
>> ==9770==??? by 0x1FFF000192: ???
>> ==9770==??? by 0x1FFF00019A: ???
>> ==9770==
>> ==9770==
>> ==9770== HEAP SUMMARY:
>> ==9770==???? in use at exit: 485,109 bytes in 4,443 blocks
>> ==9770==?? total heap usage: 8,799 allocs, 4,391 frees, 1,649,539 
>> bytes allocated
>> ==9770==
>> ==9770== LEAK SUMMARY:
>> ==9770==??? definitely lost: 2,583 bytes in 41 blocks
>> ==9770==??? indirectly lost: 39,830 bytes in 735 blocks
>> ==9770==????? possibly lost: 0 bytes in 0 blocks
>> ==9770==??? still reachable: 442,696 bytes in 3,667 blocks
>> ==9770==???????? suppressed: 0 bytes in 0 blocks
>> ==9770== Rerun with --leak-check=full to see details of leaked memory
>> ==9770==
>> ==9770== For lists of detected and suppressed errors, rerun with: -s
>> ==9770== ERROR SUMMARY: 142 errors from 14 contexts (suppressed: 0 
>> from 0)
>>
>>
>> On 5/8/21 3:53 PM, Even Rouault wrote:
>>> From https://launchpad.net/ubuntu/+source/gdal , no Ubuntu version 
>>> ships with 3.2.1. Perhaps you are using the ubuntugis PPA with 
>>> 3.2.1+dfsg-1~focal0 ? I'd suspect some mismatch of underlying 
>>> libraries, perhaps proj.
>>>
>>> What's the output of
>>>
>>> ldd `which ogrinfo`
>>>
>>> and also do
>>>
>>> sudo apt install valgrind
>>>
>>> and what's the output of
>>>
>>> valgrind ogrinfo --version
>>>
>>>
>>> Le 08/05/2021 ? 14:28, Bryan Keith a ?crit?:
>>>> Hello,
>>>>
>>>> I am trying to install GDAL on Ubuntu.? When I check the 
>>>> installation, I get this:
>>>>
>>>> ogrinfo --version
>>>> GDAL 3.2.1, released 2020/12/29
>>>> free(): invalid pointer
>>>> Aborted (core dumped)
>>>>
>>>> Hmmm, what to do?
>>>>
>>>> I installed like this:
>>>>
>>>> sudo apt-get install gdal-bin
>>>>
>>>> My Python installations look like this:
>>>>
>>>> $ python -V
>>>> Python 2.7.18
>>>> $ python3 -V
>>>> Python 3.8.5
>>>>
>>>> I imagine more information is required to diagnose this problem, 
>>>> but I'm not sure what that would be.? Any help is appreciated. 
>>>> Thank you.
>>>>
>>>> Bryan
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>


From even.rouault at spatialys.com  Mon May 10 04:38:47 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 10 May 2021 13:38:47 +0200
Subject: [gdal-dev] Support for coordinate epoch of dynamic CRS
Message-ID: <1453d57a-d0d1-7e85-4c37-a71fa1472010@spatialys.com>

Hi,

for those not actively tracking github pull requests, I wanted to point 
at https://github.com/OSGeo/gdal/pull/3810 which adds initial support 
for coordinate epoch of dynamic CRS. You might want to start by reading 
https://github.com/rouault/gdal/blob/coordinate_epoch/gdal/doc/source/user/coordinate_epoch.rst

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From gdt at lexort.com  Mon May 10 05:29:19 2021
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 10 May 2021 08:29:19 -0400
Subject: [gdal-dev] Support for coordinate epoch of dynamic CRS
In-Reply-To: <1453d57a-d0d1-7e85-4c37-a71fa1472010@spatialys.com> (Even
 Rouault's message of "Mon, 10 May 2021 13:38:47 +0200")
References: <1453d57a-d0d1-7e85-4c37-a71fa1472010@spatialys.com>
Message-ID: <rmibl9isrfk.fsf@s1.lexort.com>


Even Rouault <even.rouault at spatialys.com> writes:

> https://github.com/rouault/gdal/blob/coordinate_epoch/gdal/doc/source/user/coordinate_epoch.rst

>   The :cpp:func:`OGRSpatialReference::SetCoordinateEpoch` and
>   :cpp:func:`OGRSpatialReference::GetCoordinateEpoch` methods can be
>   used to set/retrieve a coordinate epoch associated with a
>   CRS. Pedantically the coordinate epoch of an observation belongs to
>   the observation, and not to the CRS, however it is often more
>   practical to bind it to the CRS.

There's a lot behind this and it might be helpful to expand.  Suggested
text:

Formally, the coordinate epoch of an observation belongs to the
observation.  However, almost all formats do not allow for storing
per-observation epoch, and typical usage is a set of observations with
the same epoch.  Therefore we store the epoch as property of the CRS,
and the meaning of this is as if that epoch value were part of every
observation.  This choice eases processing, storage and format
complexity for most usage.  For now, this means that a dataset where
points have different epochs cannot be handled.


I can imagine a table of point features where points in general have a
different epoch.  Probably most people would have the reaction "don't go
there" and I would concur this is best avoided, but it's not clear that
it always will be avoidable.   Extending per-point storage from xyz to
xyzt feels like a separate activity.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210510/1dabb41d/attachment.sig>

From even.rouault at spatialys.com  Mon May 10 07:00:20 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 10 May 2021 16:00:20 +0200
Subject: [gdal-dev] Call for discussion on RFC 81 (was Re: Support for
 coordinate epoch of dynamic CRS)
In-Reply-To: <1453d57a-d0d1-7e85-4c37-a71fa1472010@spatialys.com>
References: <1453d57a-d0d1-7e85-4c37-a71fa1472010@spatialys.com>
Message-ID: <7172f2cf-d602-73b9-bbc8-695bd8a4b92f@spatialys.com>

I've formalized that work as a RFC : https://github.com/OSGeo/gdal/pull/3827

Le 10/05/2021 ? 13:38, Even Rouault a ?crit?:
> Hi,
>
> for those not actively tracking github pull requests, I wanted to 
> point at https://github.com/OSGeo/gdal/pull/3810 which adds initial 
> support for coordinate epoch of dynamic CRS. You might want to start 
> by reading 
> https://github.com/rouault/gdal/blob/coordinate_epoch/gdal/doc/source/user/coordinate_epoch.rst
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From andrew.bell.ia at gmail.com  Mon May 10 09:34:13 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 10 May 2021 12:34:13 -0400
Subject: [gdal-dev] RFC 82
Message-ID: <CACJ51z1Lq7MDDhAzNNENpTLpDKCexQL1DW6xayzAMYa=mPQvSw@mail.gmail.com>

Hi,

I've made a PR for RFC 82 that addresses norms for memory allocation in
GDAL.

https://github.com/OSGeo/gdal/pull/3829

Thanks,

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210510/73d4ccaa/attachment.html>

From andreas.oxenstierna at t-kartor.com  Mon May 10 10:23:33 2021
From: andreas.oxenstierna at t-kartor.com (Andreas Oxenstierna)
Date: Mon, 10 May 2021 17:23:33 +0000
Subject: [gdal-dev] gdal_translate clip PostGIS raster
References: <acbd58a5-e95d-438f-a220-e7421d7c2ac8@Spark>
Message-ID: <cceedf40-d007-4ca8-a08f-d92ac9300466@Spark>

Hi list

Is it possible to clip a PostGIS raster with a PostGIS vector poly using gdal_translate?

I cannot find a working syntax to define the clipping table in the WHERE clause.
Eg. this returns "Error browsing database for PostGIS Raster properties : ERROR:  syntax error at or near "FROM"

gdal_translate -of GTiff "PG:<connectinfo> schema=a table=rastertable WHERE='ST_Intersects(rast,c.geom) AND c.id<http://c.id> = 2 FROM a.vectortable c'" a.tif

Best regards

Andreas Oxenstierna
T-Kartor Geospatial AB
Olof Mohlins v?g 12 Kristianstad
mobile: +46 733 206831
mailto: andreas.oxenstierna at t-kartor.com<mailto:andreas.oxenstierna at t-kartor.com>
www.t-kartor.com<http://www.t-kartor.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210510/7c75fe2c/attachment.html>

From even.rouault at spatialys.com  Mon May 10 10:31:34 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 10 May 2021 19:31:34 +0200
Subject: [gdal-dev] gdal_translate clip PostGIS raster
In-Reply-To: <cceedf40-d007-4ca8-a08f-d92ac9300466@Spark>
References: <acbd58a5-e95d-438f-a220-e7421d7c2ac8@Spark>
 <cceedf40-d007-4ca8-a08f-d92ac9300466@Spark>
Message-ID: <237bc91d-0923-416d-09ab-e3cba5fcbd10@spatialys.com>

Try with gdalwarp and the -cutline family of arguments

Le 10/05/2021 ? 19:23, Andreas Oxenstierna a ?crit?:
> Hi list
>
> Is it possible to clip a PostGIS raster with a PostGIS vector poly 
> using gdal_translate?
>
> I cannot find a working syntax to define the clipping table in the 
> WHERE clause.
> Eg. this returns "Error browsing database for PostGIS Raster 
> properties : ERROR:??syntax error at or near "FROM"
>
> gdal_translate -of GTiff "PG:<connectinfo> schema=a table=rastertable 
> WHERE='ST_Intersects(rast,c.geom) AND c.id <http://c.id>?= 2 FROM 
> a.vectortable c'" a.tif
>
> Best regards
>
> Andreas Oxenstierna
> T-Kartor Geospatial AB
> Olof Mohlins v?g 12 Kristianstad
> mobile: +46 733 206831
> mailto: andreas.oxenstierna at t-kartor.com 
> <mailto:andreas.oxenstierna at t-kartor.com>
> www.t-kartor.com <http://www.t-kartor.com>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210510/38b8a578/attachment.html>

From even.rouault at spatialys.com  Mon May 10 15:17:14 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 11 May 2021 00:17:14 +0200
Subject: [gdal-dev] Fwd: GDAL NumFOCUS Application
In-Reply-To: <CALWv6uKEB-zrCXPa85TkskdAt8-m_1Ne=_a5NCsHaP6y_8m9SA@mail.gmail.com>
References: <CALWv6uKEB-zrCXPa85TkskdAt8-m_1Ne=_a5NCsHaP6y_8m9SA@mail.gmail.com>
Message-ID: <d1e13f8d-935a-2ce8-2ca7-8a431aa42f23@spatialys.com>

All,

some good news below !

-------- Message transf?r? --------

Hi Howard and GDAL team,

I'm excited to share the news that GDAL has been approved as a NumFOCUS 
sponsored project! It's fantastic to have you on board.

Arliss will be reaching out with details on next steps.

We look forward to working with you as part of the NumFOCUS project 
community.

Best,
Leah

---
Leah Silen
Executive Director
She/Her
numfocus.org <http://numfocus.org>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210511/1398772a/attachment.html>

From nhv at meganet.net  Mon May 10 19:17:17 2021
From: nhv at meganet.net (Norman Vine)
Date: Mon, 10 May 2021 22:17:17 -0400
Subject: [gdal-dev] Fwd: GDAL NumFOCUS Application
In-Reply-To: <d1e13f8d-935a-2ce8-2ca7-8a431aa42f23@spatialys.com>
References: <CALWv6uKEB-zrCXPa85TkskdAt8-m_1Ne=_a5NCsHaP6y_8m9SA@mail.gmail.com>
 <d1e13f8d-935a-2ce8-2ca7-8a431aa42f23@spatialys.com>
Message-ID: <93DF2CF3-F858-4AA6-8377-662FBBE297E1@meganet.net>



> On May 10, 2021, at 6:17 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> All,
> 
> some good news below !

Awesome news !!!

> 
> -------- Message transf?r? --------
> 
> Hi Howard and GDAL team,
> 
> I'm excited to share the news that GDAL has been approved as a NumFOCUS sponsored project! It's fantastic to have you on board.
> 
> Arliss will be reaching out with details on next steps. 
> 
> We look forward to working with you as part of the NumFOCUS project community. 
> 
> Best,
> Leah
> 
> ---
> Leah Silen
> Executive Director
> She/Her
> numfocus.org
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



From andreas.oxenstierna at t-kartor.com  Mon May 10 23:48:35 2021
From: andreas.oxenstierna at t-kartor.com (Andreas Oxenstierna)
Date: Tue, 11 May 2021 06:48:35 +0000
Subject: [gdal-dev] gdal_translate clip PostGIS raster
In-Reply-To: <237bc91d-0923-416d-09ab-e3cba5fcbd10@spatialys.com>
References: <acbd58a5-e95d-438f-a220-e7421d7c2ac8@Spark>
 <cceedf40-d007-4ca8-a08f-d92ac9300466@Spark>
 <237bc91d-0923-416d-09ab-e3cba5fcbd10@spatialys.com>
Message-ID: <b861b573-da06-469c-9fe6-ab28ca907c64@Spark>

Thanks

but still stumbling (using 2.3.2)
gdalwarp -cutline "PG:dbname=gisdb" -csql 'select * from polytest where id=1' -crop_to_cutline -of GTiff -srcnodata -9999 -dstnodata -9999 "PG:<connectinfo> schema=a table=rastertable" dest.tif

returns:
ERROR 1: Input file <rastertable> has no raster bands.

gdalinfo reports that the table is tiled in 360 pieces which potentially is the source for the issue:
Subdatasets:
  SUBDATASET_1_NAME=PG:host=

SUBDATASET_360_DESC=PostGIS Raster at

H?lsningar

Andreas Oxenstierna
T-Kartor Geospatial AB
Olof Mohlins v?g 12 Kristianstad
mobile: +46 733 206831
mailto: andreas.oxenstierna at t-kartor.com<mailto:andreas.oxenstierna at t-kartor.com>
www.t-kartor.com<http://www.t-kartor.com>
On 10 May 2021, 19:31 +0200, Even Rouault <even.rouault at spatialys.com>, wrote:

Try with gdalwarp and the -cutline family of arguments

Le 10/05/2021 ? 19:23, Andreas Oxenstierna a ?crit :
Hi list

Is it possible to clip a PostGIS raster with a PostGIS vector poly using gdal_translate?

I cannot find a working syntax to define the clipping table in the WHERE clause.
Eg. this returns "Error browsing database for PostGIS Raster properties : ERROR:  syntax error at or near "FROM"

gdal_translate -of GTiff "PG:<connectinfo> schema=a table=rastertable WHERE='ST_Intersects(rast,c.geom) AND c.id<http://c.id> = 2 FROM a.vectortable c'" a.tif

Best regards

Andreas Oxenstierna
T-Kartor Geospatial AB
Olof Mohlins v?g 12 Kristianstad
mobile: +46 733 206831
mailto: andreas.oxenstierna at t-kartor.com<mailto:andreas.oxenstierna at t-kartor.com>
www.t-kartor.com<http://www.t-kartor.com>



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210511/7f2e62a5/attachment.html>

From conormcindoe1 at gmail.com  Tue May 11 08:22:37 2021
From: conormcindoe1 at gmail.com (Conor McIndoe)
Date: Tue, 11 May 2021 16:22:37 +0100
Subject: [gdal-dev] Python Binding Searching for Legacy Libgdal Shared
 Object File
Message-ID: <B9FE5347-5C37-4243-9C85-C2158E819028@gmail.com>

Hi all,

I?ve just tried to use the gdal python bindings for the first time in a couple of months and have been met with

>> from osgeo import gdal
ImportError: liberal.so.26: cannot open shared object file: No such file or directory

Which, I believe, is a legacy .so file. I?m running this on Arch, and see I have liberal.so.28.0.3 in /usr/lib, and have recently updated the system and pip upgraded the package but still find it looking for the wrong file. Is this a known issue?

Thanks,
Conor

From even.rouault at spatialys.com  Tue May 11 08:25:36 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 11 May 2021 17:25:36 +0200
Subject: [gdal-dev] Python Binding Searching for Legacy Libgdal Shared
 Object File
In-Reply-To: <B9FE5347-5C37-4243-9C85-C2158E819028@gmail.com>
References: <B9FE5347-5C37-4243-9C85-C2158E819028@gmail.com>
Message-ID: <85e2069d-edba-e828-83d6-5a398fe0849c@spatialys.com>

Conor,

It is likely that your GDAL python bindings need recompiling and/or your 
native GDAL library and/or you are using an older GDAL python bindings 
and/or native library than the one you think you are using.

Even

Le 11/05/2021 ? 17:22, Conor McIndoe a ?crit?:
> Hi all,
>
> I?ve just tried to use the gdal python bindings for the first time in a couple of months and have been met with
>
>>> from osgeo import gdal
> ImportError: liberal.so.26: cannot open shared object file: No such file or directory
>
> Which, I believe, is a legacy .so file. I?m running this on Arch, and see I have liberal.so.28.0.3 in /usr/lib, and have recently updated the system and pip upgraded the package but still find it looking for the wrong file. Is this a known issue?
>
> Thanks,
> Conor
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From pedrongvenancio at gmail.com  Tue May 11 09:50:02 2021
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Tue, 11 May 2021 17:50:02 +0100
Subject: [gdal-dev] QGIS compiled agains GDAL 3.3.0 crash opening a project
Message-ID: <CAMCJChsiL62sSFuCzFN39Uy8+ccM0ffr+ojs9wP0OJ3s0=MBWQ@mail.gmail.com>

Hi,

Sorry for the cross posting, but after updating QGIS from OSGeo4W testing,
for a version compiled against GDAL 3.3.0, I'm getting a crash opening a
project that works fine in QGIS compiled against GDAL 3.2.2.

Here is a sample project:
https://cld.pt/dl/download/85e3df31-1f7d-4826-96f6-3533328c637e/Sample_Project.zip

Opening this project on:
QGIS version 3.18.2-Z?rich
QGIS code revision 5920dd1a
Compiled against Qt 5.15.2
Running against Qt 5.15.2
Compiled against GDAL/OGR 3.2.2
Running against GDAL/OGR 3.2.2
Compiled against GEOS 3.9.1-CAPI-1.14.2
Running against GEOS 3.9.1-CAPI-1.14.2
Compiled against SQLite 3.35.2
Running against SQLite 3.35.2
Compiled against PDAL 2.2.0
Running against PDAL 2.2.0 (git-version: 365171)
PostgreSQL Client Version 13.0
SpatiaLite Version 5.0.1-rc1
QWT Version 6.1.3
QScintilla2 Version 2.11.5
Compiled against PROJ 8.0.0
Running against PROJ Rel. 8.0.1, March 5th, 2021
OS Version Windows 10 Version 2009

works fine.

But trying to open on:
QGIS version 3.18.2-Z?rich
QGIS code revision 515138c171
Compiled against Qt 5.15.2
Running against Qt 5.15.2
Compiled against GDAL/OGR 3.3.0
Running against GDAL/OGR 3.3.0
Compiled against GEOS 3.9.1-CAPI-1.14.2
Running against GEOS 3.9.1-CAPI-1.14.2
Compiled against SQLite 3.35.2
Running against SQLite 3.35.2
Compiled against PDAL 2.2.0
Running against PDAL 2.2.0 (git-version: 365171)
PostgreSQL Client Version 13.0
SpatiaLite Version 5.0.1-rc1
QWT Version 6.1.3
QScintilla2 Version 2.11.5
Compiled against PROJ 8.0.1
Running against PROJ Rel. 8.0.1, March 5th, 2021
OS Version Windows 10 Version 2009

it crashes before open.

Can anyone confirm? Can this be related to GDAL 3.3 update? It's the only
difference I can see, besides minor update to PROJ 8.0.1.

Thank you very much.

Best regards,
Pedro Ven?ncio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210511/6329fa72/attachment.html>

From brandonboldenow at gmail.com  Tue May 11 11:22:53 2021
From: brandonboldenow at gmail.com (Brandon Boldenow)
Date: Tue, 11 May 2021 18:22:53 +0000
Subject: [gdal-dev] Misaligned Geotiff/MrSid
Message-ID: <CADJ2HcHEDdtM__qpruY8-TR8t29yj14Hs671tD4TYNdVQ28zwA@mail.gmail.com>

Hi All,

I've been having an issue where VFR Raster Sectionals (from faa.gov) and
MrSid imagery are misaligned when compared to my other raster layers.In
other software these appear correctly, so I figure there must be something
I'm doing wrong, but I haven't been able to figure it out.

Do you know what could cause this? I've attached some screenshots with a
reference point to show the misalignment - the black and white satellite
imagery is representative of what I see for most raster formats.

Thanks in advance!

https://pasteboard.co/K1qU2X2.png
https://pasteboard.co/K1qUkot.png
https://pasteboard.co/K1qUsAW.png

--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210511/4920dbcd/attachment.html>

From even.rouault at spatialys.com  Tue May 11 11:37:19 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 11 May 2021 20:37:19 +0200
Subject: [gdal-dev] Misaligned Geotiff/MrSid
In-Reply-To: <CADJ2HcHEDdtM__qpruY8-TR8t29yj14Hs671tD4TYNdVQ28zwA@mail.gmail.com>
References: <CADJ2HcHEDdtM__qpruY8-TR8t29yj14Hs671tD4TYNdVQ28zwA@mail.gmail.com>
Message-ID: <60f0b32f-8f81-a3e4-bc8b-018588b14d8d@spatialys.com>

Brandon,

The output of gdalinfo on 2 misaligned rasters would be more telling.

Even

Le 11/05/2021 ? 20:22, Brandon Boldenow a ?crit?:
> Hi All,
>
> I've been having an issue where VFR Raster Sectionals (from faa.gov 
> <http://faa.gov>) and MrSid imagery are misaligned when compared to my 
> other raster layers.In other software these appear correctly, so I 
> figure there must be something I'm doing wrong, but I haven't been 
> able to figure it out.
>
> Do you know what?could cause this? I've attached some screenshots with 
> a reference point to show the misalignment - the black and white 
> satellite imagery is representative of what I see for most raster formats.
>
> Thanks in advance!
>
> https://pasteboard.co/K1qU2X2.png <https://pasteboard.co/K1qU2X2.png>
> https://pasteboard.co/K1qUkot.png <https://pasteboard.co/K1qUkot.png>
> https://pasteboard.co/K1qUsAW.png <https://pasteboard.co/K1qUsAW.png>
>
> -- 
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210511/294a9497/attachment.html>

From brandonboldenow at gmail.com  Tue May 11 12:36:55 2021
From: brandonboldenow at gmail.com (Brandon Boldenow)
Date: Tue, 11 May 2021 13:36:55 -0600
Subject: [gdal-dev] Misaligned Geotiff/MrSid
In-Reply-To: <60f0b32f-8f81-a3e4-bc8b-018588b14d8d@spatialys.com>
References: <CADJ2HcHEDdtM__qpruY8-TR8t29yj14Hs671tD4TYNdVQ28zwA@mail.gmail.com>
 <60f0b32f-8f81-a3e4-bc8b-018588b14d8d@spatialys.com>
Message-ID: <CADJ2HcG_5FHrfu4=ANWuZb_LaEhLHHRPmFV0ORforu9GETmuCw@mail.gmail.com>

Sorry for not including this earlier, let me know if you need anything else:

Info Geotiff:

Driver: GTiff/GeoTIFF
Size is 16855, 12232
PROJCS["Lambert Conformal Conic",
GEOGCS["NAD83",
DATUM["North_American_Datum_1983",
SPHEROID["GRS 1980",6378137,298.257222101004,
AUTHORITY["EPSG","7019"]],
AUTHORITY["EPSG","6269"]],
PRIMEM["Greenwich",0],
UNIT["degree",0.0174532925199433,
AUTHORITY["EPSG","9122"]],
AUTHORITY["EPSG","4269"]],
PROJECTION["Lambert_Conformal_Conic_2SP"],
PARAMETER["latitude_of_origin",30.125],
PARAMETER["central_meridian",-100],
PARAMETER["standard_parallel_1",30.6666666666667],
PARAMETER["standard_parallel_2",25.3333333333333],
PARAMETER["false_easting",0],
PARAMETER["false_northing",0],
UNIT["metre",1,
AUTHORITY["EPSG","9001"]],
AXIS["Easting",EAST],
AXIS["Northing",NORTH]]
Origin = (-368445.13723378151, 238489.02048349666)
Pixel Size = (42.3354999959360455, -42.336150730462649)

Info MrSid:

Driver: MrSid
Size is: 28000, 28000
PROJCS["WGS 84 / UTM zone 13N",
GEOGCS["WGS 84",
DATUM["WGS_1984",
SPHEROID["WGS 84",6378137,298.257223563,
AUTHORITY["EPSG","7030"]],
AUTHORITY["EPSG","6326"]],
PRIMEM["Greenwich",0],
UNIT["degree",0.0174532925199433],
AUTHORITY["EPSG","4326"]],
PROJECTION["Transverse_Mercator"],
PARAMETER["latitude_of_origin",0],
PARAMETER["central_meridian",-105],
PARAMETER["scale_factor",0.9996],
PARAMETER["false_easting",500000],
PARAMETER["false_northing",0],
UNIT["metre",1,
AUTHORITY["EPSG","9001"]],
AXIS["Easting",EAST],
AXIS["Northing",NORTH],
AUTHORITY["EPSG","32613"]]
Origin = (767738.00007868814, 3336219.99999975129)
Pixel Size = (0.5, -0.5)

On Tue, May 11, 2021 at 12:37 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Brandon,
>
> The output of gdalinfo on 2 misaligned rasters would be more telling.
>
> Even
> Le 11/05/2021 ? 20:22, Brandon Boldenow a ?crit :
>
> Hi All,
>
> I've been having an issue where VFR Raster Sectionals (from faa.gov) and
> MrSid imagery are misaligned when compared to my other raster layers.In
> other software these appear correctly, so I figure there must be something
> I'm doing wrong, but I haven't been able to figure it out.
>
> Do you know what could cause this? I've attached some screenshots with a
> reference point to show the misalignment - the black and white satellite
> imagery is representative of what I see for most raster formats.
>
> Thanks in advance!
>
> https://pasteboard.co/K1qU2X2.png
> https://pasteboard.co/K1qUkot.png
> https://pasteboard.co/K1qUsAW.png
>
> --
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210511/aa069bb4/attachment.html>

From even.rouault at spatialys.com  Tue May 11 12:50:53 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 11 May 2021 21:50:53 +0200
Subject: [gdal-dev] Misaligned Geotiff/MrSid
In-Reply-To: <CADJ2HcG_5FHrfu4=ANWuZb_LaEhLHHRPmFV0ORforu9GETmuCw@mail.gmail.com>
References: <CADJ2HcHEDdtM__qpruY8-TR8t29yj14Hs671tD4TYNdVQ28zwA@mail.gmail.com>
 <60f0b32f-8f81-a3e4-bc8b-018588b14d8d@spatialys.com>
 <CADJ2HcG_5FHrfu4=ANWuZb_LaEhLHHRPmFV0ORforu9GETmuCw@mail.gmail.com>
Message-ID: <c0c1179b-c98f-4878-0580-bf9e03343fcd@spatialys.com>

ok, so the 2 layers are not in the same projection, nor in the same datum.

You didn't mention which software does the overlay between the 2 layers, 
and what was the amount of shift you observed.

Software based on recent PROJ versions will typically apply HPGN grids 
to do NAD83 to WGS 84 coordinate transformations, when they are 
available, but the amount of correction due to those grids seem to be at 
most of 1 metre.

Even

Le 11/05/2021 ? 21:36, Brandon Boldenow a ?crit?:
> Sorry for not including this earlier, let me know if you need anything 
> else:
>
> Info Geotiff:
>
> Driver: GTiff/GeoTIFF
> Size is 16855, 12232
> PROJCS["Lambert Conformal Conic",
> GEOGCS["NAD83",
> DATUM["North_American_Datum_1983",
> SPHEROID["GRS 1980",6378137,298.257222101004,
> AUTHORITY["EPSG","7019"]],
> AUTHORITY["EPSG","6269"]],
> PRIMEM["Greenwich",0],
> UNIT["degree",0.0174532925199433,
> AUTHORITY["EPSG","9122"]],
> AUTHORITY["EPSG","4269"]],
> PROJECTION["Lambert_Conformal_Conic_2SP"],
> PARAMETER["latitude_of_origin",30.125],
> PARAMETER["central_meridian",-100],
> PARAMETER["standard_parallel_1",30.6666666666667],
> PARAMETER["standard_parallel_2",25.3333333333333],
> PARAMETER["false_easting",0],
> PARAMETER["false_northing",0],
> UNIT["metre",1,
> AUTHORITY["EPSG","9001"]],
> AXIS["Easting",EAST],
> AXIS["Northing",NORTH]]
> Origin = (-368445.13723378151, 238489.02048349666)
> Pixel Size = (42.3354999959360455, -42.336150730462649)
>
> Info MrSid:
>
> Driver: MrSid
> Size is: 28000, 28000
> PROJCS["WGS 84 / UTM zone 13N",
> GEOGCS["WGS 84",
> DATUM["WGS_1984",
> SPHEROID["WGS 84",6378137,298.257223563,
> AUTHORITY["EPSG","7030"]],
> AUTHORITY["EPSG","6326"]],
> PRIMEM["Greenwich",0],
> UNIT["degree",0.0174532925199433],
> AUTHORITY["EPSG","4326"]],
> PROJECTION["Transverse_Mercator"],
> PARAMETER["latitude_of_origin",0],
> PARAMETER["central_meridian",-105],
> PARAMETER["scale_factor",0.9996],
> PARAMETER["false_easting",500000],
> PARAMETER["false_northing",0],
> UNIT["metre",1,
> AUTHORITY["EPSG","9001"]],
> AXIS["Easting",EAST],
> AXIS["Northing",NORTH],
> AUTHORITY["EPSG","32613"]]
> Origin = (767738.00007868814, 3336219.99999975129)
> Pixel Size = (0.5, -0.5)
>
> On Tue, May 11, 2021 at 12:37 PM Even Rouault 
> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>
>     Brandon,
>
>     The output of gdalinfo on 2 misaligned rasters would be more telling.
>
>     Even
>
>     Le 11/05/2021 ? 20:22, Brandon Boldenow a ?crit?:
>>     Hi All,
>>
>>     I've been having an issue where VFR Raster Sectionals (from
>>     faa.gov <http://faa.gov>) and MrSid imagery are misaligned when
>>     compared to my other raster layers.In other software these appear
>>     correctly, so I figure there must be something I'm doing wrong,
>>     but I haven't been able to figure it out.
>>
>>     Do you know what?could cause this? I've attached some screenshots
>>     with a reference point to show the misalignment - the black and
>>     white satellite imagery is representative of what I see for most
>>     raster formats.
>>
>>     Thanks in advance!
>>
>>     https://pasteboard.co/K1qU2X2.png
>>     <https://pasteboard.co/K1qU2X2.png>
>>     https://pasteboard.co/K1qUkot.png <https://pasteboard.co/K1qUkot.png>
>>     https://pasteboard.co/K1qUsAW.png <https://pasteboard.co/K1qUsAW.png>
>>
>>     -- 
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>     -- 
>     http://www.spatialys.com  <http://www.spatialys.com>
>     My software is free, but my time generally not.
>
>
>
> -- 
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210511/e2ae465a/attachment.html>

From brandonboldenow at gmail.com  Tue May 11 13:27:47 2021
From: brandonboldenow at gmail.com (Brandon Boldenow)
Date: Tue, 11 May 2021 20:27:47 +0000
Subject: [gdal-dev] Misaligned Geotiff/MrSid
In-Reply-To: <c0c1179b-c98f-4878-0580-bf9e03343fcd@spatialys.com>
References: <CADJ2HcHEDdtM__qpruY8-TR8t29yj14Hs671tD4TYNdVQ28zwA@mail.gmail.com>
 <60f0b32f-8f81-a3e4-bc8b-018588b14d8d@spatialys.com>
 <CADJ2HcG_5FHrfu4=ANWuZb_LaEhLHHRPmFV0ORforu9GETmuCw@mail.gmail.com>
 <c0c1179b-c98f-4878-0580-bf9e03343fcd@spatialys.com>
Message-ID: <CADJ2HcFJE-oD06bjg61-xK5+2TXZ=PqkcDBrJQ5Uh19s-UZ8TQ@mail.gmail.com>

This is a custom software build, so it's my own making. But you're right, I
think I have my projections messed up. Thanks for pointing me in the right
direction. Hopefully it'll help me sort it all out.

On Tue, May 11, 2021 at 1:50 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> ok, so the 2 layers are not in the same projection, nor in the same datum.
>
> You didn't mention which software does the overlay between the 2 layers,
> and what was the amount of shift you observed.
>
> Software based on recent PROJ versions will typically apply HPGN grids to
> do NAD83 to WGS 84 coordinate transformations, when they are available, but
> the amount of correction due to those grids seem to be at most of 1 metre.
>
> Even
> Le 11/05/2021 ? 21:36, Brandon Boldenow a ?crit :
>
> Sorry for not including this earlier, let me know if you need anything
> else:
>
> Info Geotiff:
>
> Driver: GTiff/GeoTIFF
> Size is 16855, 12232
> PROJCS["Lambert Conformal Conic",
> GEOGCS["NAD83",
> DATUM["North_American_Datum_1983",
> SPHEROID["GRS 1980",6378137,298.257222101004,
> AUTHORITY["EPSG","7019"]],
> AUTHORITY["EPSG","6269"]],
> PRIMEM["Greenwich",0],
> UNIT["degree",0.0174532925199433,
> AUTHORITY["EPSG","9122"]],
> AUTHORITY["EPSG","4269"]],
> PROJECTION["Lambert_Conformal_Conic_2SP"],
> PARAMETER["latitude_of_origin",30.125],
> PARAMETER["central_meridian",-100],
> PARAMETER["standard_parallel_1",30.6666666666667],
> PARAMETER["standard_parallel_2",25.3333333333333],
> PARAMETER["false_easting",0],
> PARAMETER["false_northing",0],
> UNIT["metre",1,
> AUTHORITY["EPSG","9001"]],
> AXIS["Easting",EAST],
> AXIS["Northing",NORTH]]
> Origin = (-368445.13723378151, 238489.02048349666)
> Pixel Size = (42.3354999959360455, -42.336150730462649)
>
> Info MrSid:
>
> Driver: MrSid
> Size is: 28000, 28000
> PROJCS["WGS 84 / UTM zone 13N",
> GEOGCS["WGS 84",
> DATUM["WGS_1984",
> SPHEROID["WGS 84",6378137,298.257223563,
> AUTHORITY["EPSG","7030"]],
> AUTHORITY["EPSG","6326"]],
> PRIMEM["Greenwich",0],
> UNIT["degree",0.0174532925199433],
> AUTHORITY["EPSG","4326"]],
> PROJECTION["Transverse_Mercator"],
> PARAMETER["latitude_of_origin",0],
> PARAMETER["central_meridian",-105],
> PARAMETER["scale_factor",0.9996],
> PARAMETER["false_easting",500000],
> PARAMETER["false_northing",0],
> UNIT["metre",1,
> AUTHORITY["EPSG","9001"]],
> AXIS["Easting",EAST],
> AXIS["Northing",NORTH],
> AUTHORITY["EPSG","32613"]]
> Origin = (767738.00007868814, 3336219.99999975129)
> Pixel Size = (0.5, -0.5)
>
> On Tue, May 11, 2021 at 12:37 PM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Brandon,
>>
>> The output of gdalinfo on 2 misaligned rasters would be more telling.
>>
>> Even
>> Le 11/05/2021 ? 20:22, Brandon Boldenow a ?crit :
>>
>> Hi All,
>>
>> I've been having an issue where VFR Raster Sectionals (from faa.gov) and
>> MrSid imagery are misaligned when compared to my other raster layers.In
>> other software these appear correctly, so I figure there must be something
>> I'm doing wrong, but I haven't been able to figure it out.
>>
>> Do you know what could cause this? I've attached some screenshots with a
>> reference point to show the misalignment - the black and white satellite
>> imagery is representative of what I see for most raster formats.
>>
>> Thanks in advance!
>>
>> https://pasteboard.co/K1qU2X2.png
>> https://pasteboard.co/K1qUkot.png
>> https://pasteboard.co/K1qUsAW.png
>>
>> --
>>
>>
>> _______________________________________________
>> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> -- http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>>
>
> --
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210511/6542d1c7/attachment-0001.html>

From nyall.dawson at gmail.com  Tue May 11 15:36:29 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 12 May 2021 08:36:29 +1000
Subject: [gdal-dev] Call for discussion on RFC 81 (was Re: Support for
 coordinate epoch of dynamic CRS)
In-Reply-To: <7172f2cf-d602-73b9-bbc8-695bd8a4b92f@spatialys.com>
References: <1453d57a-d0d1-7e85-4c37-a71fa1472010@spatialys.com>
 <7172f2cf-d602-73b9-bbc8-695bd8a4b92f@spatialys.com>
Message-ID: <CAB28Ash1VyKcK-_FOoz06Ns4h2q64tGOBp7zBf=am56PJKxuCQ@mail.gmail.com>

On Tue, 11 May 2021 at 00:00, Even Rouault <even.rouault at spatialys.com> wrote:
>
> I've formalized that work as a RFC : https://github.com/OSGeo/gdal/pull/3827
>
> Le 10/05/2021 ? 13:38, Even Rouault a ?crit :
> > Hi,
> >
> > for those not actively tracking github pull requests, I wanted to
> > point at https://github.com/OSGeo/gdal/pull/3810 which adds initial
> > support for coordinate epoch of dynamic CRS. You might want to start
> > by reading
> > https://github.com/rouault/gdal/blob/coordinate_epoch/gdal/doc/source/user/coordinate_epoch.rst
> >

I'm in favour of the proposal and the changes introduced in the
associated PR. There's a very long road ahead of the whole spatial
community (both proprietary and open source) before we can properly
support dynamic CRSes, but this is a step forward in the right
direction.

Thanks for your hard work and initiative in this regards Even!

Nyall

From andreas.oxenstierna at t-kartor.com  Tue May 11 23:11:54 2021
From: andreas.oxenstierna at t-kartor.com (Andreas Oxenstierna)
Date: Wed, 12 May 2021 06:11:54 +0000
Subject: [gdal-dev] gdal_translate clip PostGIS raster
In-Reply-To: <b861b573-da06-469c-9fe6-ab28ca907c64@Spark>
References: <acbd58a5-e95d-438f-a220-e7421d7c2ac8@Spark>
 <cceedf40-d007-4ca8-a08f-d92ac9300466@Spark>
 <237bc91d-0923-416d-09ab-e3cba5fcbd10@spatialys.com>
 <b861b573-da06-469c-9fe6-ab28ca907c64@Spark>
Message-ID: <d8317218-845e-4a79-9b69-5ec0094ee64f@Spark>

Tested with:
1  ? table=rastertable WHERE=rid>0" dest.tif
   Returns:
     WHERE=rid>0 has no raster bands

2  ? table=rastertable WHERE=rid=1" dest.tif
   Returns:
     a valid but empty tif file

3 ? table=<view based on the rastertable" dest.tif
   Returns:
     ... has no raster bands

gdalwarp seems to treat PostGIS raster tables as one subdataset for each tile. Basically make them useless in my mind - or have I missed something essential/simple ?


H?lsningar

Andreas Oxenstierna
T-Kartor Geospatial AB
Olof Mohlins v?g 12 Kristianstad
mobile: +46 733 206831
mailto: andreas.oxenstierna at t-kartor.com<mailto:andreas.oxenstierna at t-kartor.com>
www.t-kartor.com<http://www.t-kartor.com>
On 11 May 2021, 08:48 +0200, Andreas Oxenstierna <andreas.oxenstierna at t-kartor.com>, wrote:
Thanks

but still stumbling (using 2.3.2)
gdalwarp -cutline "PG:dbname=gisdb" -csql 'select * from polytest where id=1' -crop_to_cutline -of GTiff -srcnodata -9999 -dstnodata -9999 "PG:<connectinfo> schema=a table=rastertable" dest.tif

returns:
ERROR 1: Input file <rastertable> has no raster bands.

gdalinfo reports that the table is tiled in 360 pieces which potentially is the source for the issue:
Subdatasets:
  SUBDATASET_1_NAME=PG:host=

SUBDATASET_360_DESC=PostGIS Raster at

H?lsningar

Andreas Oxenstierna
T-Kartor Geospatial AB
Olof Mohlins v?g 12 Kristianstad
mobile: +46 733 206831
mailto: andreas.oxenstierna at t-kartor.com<mailto:andreas.oxenstierna at t-kartor.com>
www.t-kartor.com<http://www.t-kartor.com>
On 10 May 2021, 19:31 +0200, Even Rouault <even.rouault at spatialys.com>, wrote:

Try with gdalwarp and the -cutline family of arguments

Le 10/05/2021 ? 19:23, Andreas Oxenstierna a ?crit :
Hi list

Is it possible to clip a PostGIS raster with a PostGIS vector poly using gdal_translate?

I cannot find a working syntax to define the clipping table in the WHERE clause.
Eg. this returns "Error browsing database for PostGIS Raster properties : ERROR:  syntax error at or near "FROM"

gdal_translate -of GTiff "PG:<connectinfo> schema=a table=rastertable WHERE='ST_Intersects(rast,c.geom) AND c.id<http://c.id> = 2 FROM a.vectortable c'" a.tif

Best regards

Andreas Oxenstierna
T-Kartor Geospatial AB
Olof Mohlins v?g 12 Kristianstad
mobile: +46 733 206831
mailto: andreas.oxenstierna at t-kartor.com<mailto:andreas.oxenstierna at t-kartor.com>
www.t-kartor.com<http://www.t-kartor.com>



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210512/a7748f02/attachment.html>

From even.rouault at spatialys.com  Thu May 13 02:44:01 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 13 May 2021 11:44:01 +0200
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs in
 geospatial formats
Message-ID: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>

Hi,

Motion:

adopt RFC 81: support for coordinate epochs in geospatial formats ( 
https://github.com/OSGeo/gdal/pull/3827 )

Starting with my +1

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From howard at hobu.co  Thu May 13 08:41:31 2021
From: howard at hobu.co (Howard Butler)
Date: Thu, 13 May 2021 10:41:31 -0500
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
Message-ID: <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>



> On May 13, 2021, at 4:44 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Hi,
> 
> Motion:
> 
> adopt RFC 81: support for coordinate epochs in geospatial formats ( https://github.com/OSGeo/gdal/pull/3827 )
> 
> Starting with my +1

-0

I'm not enthusiastic about the proposed implementation. I don't have an alternative solution which would allow me to veto it, however. Here's why I think it is bad to decorate all of these old formats with our own epoch metadata:

It is magical
-------------------

If you have GDAL-extended versions of a few select data formats and you have the correct chain of PROJ and GDAL, the behavior of your coordinates is going to change for various transformations. This could be confusing and challenging to track down in debugging scenarios. The discrepancies between doing the same transformations in different softwares will be especially noticeable. 

It extends existing formats in GDAL's own way
---------------------------------------------------------------

Are there many other cases where GDAL augments and extends behavior of formats by bolting on metadata bits? I can think of some GeoTIFF tags where GDAL has done this in the past. Some of them have been adopted industry-wide, but most have not. We definitely haven't done that to a long list of formats like this RFC proposes to do.

No corresponding socializing activity
-------------------------------------------------

Is GDAL going to go to the GeoJSON, GeoPackage, GeoTIFF, Flatgeobuf, GML, JPEG2000, KML, and Shapefile communities and advocate for these improvements? It would be a lot of time and effort to go back after the fact and officially augment all of these formats with epoch metadata.  Many of these are never going to have new versions either, so there isn't much hope of a new format version coming along with support for coordinate epochs. 

Is the format of epoch standardized?
-------------------------------------------------

The proposed epoch format, such as 2021.3, *looks* like a floating point number, but it isn't really, is it? Do you ever need more precision than a year and a day? *shrug* It seems like it's own special time format. Is there a standard time format that could instead be used here?

Howard


From even.rouault at spatialys.com  Thu May 13 09:01:39 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 13 May 2021 18:01:39 +0200
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
Message-ID: <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>

Howard,
> It is magical
> -------------------
>
> If you have GDAL-extended versions of a few select data formats and you have the correct chain of PROJ and GDAL, the behavior of your coordinates is going to change for various transformations. This could be confusing and challenging to track down in debugging scenarios. The discrepancies between doing the same transformations in different softwares will be especially noticeable.
Having different results in coordinate transformations due to have will 
not be much different than using different PROJ versions using different 
versions of the EPSG database, possibly with different set of grids 
installed.
>
> It extends existing formats in GDAL's own way
> ---------------------------------------------------------------
>
> Are there many other cases where GDAL augments and extends behavior of formats by bolting on metadata bits? I can think of some GeoTIFF tags where GDAL has done this in the past. Some of them have been adopted industry-wide, but most have not. We definitely haven't done that to a long list of formats like this RFC proposes to do.
We are not going to invent a new raster or vector format just to add a 
coordinate epoch into it, right ? So this proposal does minor and 
backward compatible enhancements to popular existing formats.
>
> No corresponding socializing activity
> -------------------------------------------------
>
> Is GDAL going to go to the GeoJSON, GeoPackage, GeoTIFF, Flatgeobuf, GML, JPEG2000, KML, and Shapefile communities and advocate for these improvements? It would be a lot of time and effort to go back after the fact and officially augment all of these formats with epoch metadata.  Many of these are never going to have new versions either, so there isn't much hope of a new format version coming along with support for coordinate epochs.
Well, this is a public RFC for everybody awareness, and there will be a 
page on GDAL doc. And I've created tickets on the GeoTIFF and GeoPackage 
OGC github repos pointing to it. I don't necessarily expect much follow 
up from them though, but at least we'll have tried to make advance the 
topic a bit.
>
> Is the format of epoch standardized?
> -------------------------------------------------
>
> The proposed epoch format, such as 2021.3, *looks* like a floating point number, but it isn't really, is it? Do you ever need more precision than a year and a day? *shrug* It seems like it's own special time format. Is there a standard time format that could instead be used here?

This format is a floating point number and is the accepted way of 
encoding coordinate epochs. The after decimal point part represents the 
fraction of the year. It is referenced in "OGC Abstract Specification 
Topic 2: Referencing by coordinates" 
(https://docs.opengeospatial.org/as/18-005r4/18-005r4.html). In table 4: 
coordinateEpoch: "date at which coordinates are referenced to a dynamic 
coordinate reference system, expressed as a decimal year in the 
Gregorian calendar. Example: 2017-03-25 in the Gregorian calendar is 
epoch 2017.23."

(31+28+25) / 365. = 0.23...

Two digits after the decimal point should be enough in practice. For 
'slow' and continuous phenomenons like plate drift motion, an error of a 
couple days will not change the result by more than a fraction of 
millimetre. If you use a deformation model that takes into account 
earthquakes however, you could perhaps need to add a 3rd digit to 
identify precisely the day.

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From gdt at lexort.com  Thu May 13 10:54:21 2021
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 13 May 2021 13:54:21 -0400
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co> (Howard Butler's
 message of "Thu, 13 May 2021 10:41:31 -0500")
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
Message-ID: <rmitun6ikoi.fsf@s1.lexort.com>


Howard Butler <howard at hobu.co> writes:

> It extends existing formats in GDAL's own way
> ---------------------------------------------------------------
>
> Are there many other cases where GDAL augments and extends behavior of
> formats by bolting on metadata bits? I can think of some GeoTIFF tags
> where GDAL has done this in the past. Some of them have been adopted
> industry-wide, but most have not. We definitely haven't done that to a
> long list of formats like this RFC proposes to do.

(I don't count formally.)

I think I agree with Even's position here.  And, I see this as not being
"GDAL's own way", but "a proposed way for the open geospatial community".

But, overall this makes me wonder: Are there any formats for expressing
epoch in the open source/open format world, and also in the proprietary
world?.  I'm not aware of any (which means epsilon more than zero) and a
quick search did not turn up anything.

Obviously the US NGS keeps track of such things in their bluebook and
NGS Integrated Datbase formats as they transform positions among epochs
when doing adjustments, but that's a rather specialized and not so
relevant to GIS format.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210513/f03ec7ca/attachment.sig>

From even.rouault at spatialys.com  Thu May 13 11:11:08 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 13 May 2021 20:11:08 +0200
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <rmitun6ikoi.fsf@s1.lexort.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <rmitun6ikoi.fsf@s1.lexort.com>
Message-ID: <3329f661-b083-d96d-b4d1-f9ae9212558a@spatialys.com>


> And, I see this as not being
> "GDAL's own way", but "a proposed way for the open geospatial community".

Except for the proposal for GeoTIFF (using a new GeoKey) and FlatGeoBuf 
(using WKT:2019 COORDINATEMETADATA[]) (and maybe GeoJSON), all solutions 
I propose are obviously in the (harmless) hack category. I don't expect 
XML comments to be a standard body vetted solution. The purpose is to 
have some support to preserve the coordinate epoch when converting 
between popular formats with GDAL tooling. The idea is that a data 
producer can have some way to encode the information if they wish. And 
if in the years to come, better ways of encoding it are found and 
standardized, the information will be here to re-encode the data in a 
more standard way.

There are number of data producers emitting data referenced against WGS 
84 with metric or submetric accuracy and they don't provide the 
coordinate epoch. That must stop.
>
> But, overall this makes me wonder: Are there any formats for expressing
> epoch in the open source/open format world, and also in the proprietary
> world?.  I'm not aware of any (which means epsilon more than zero) and a
> quick search did not turn up anything.

I'm not aware of file formats or database layouts (I raised an issue for 
PostGIS: https://trac.osgeo.org/postgis/ticket/4911). The only 'thing' 
I'm aware of that takes into account coordinate epoch is the 'OGC API - 
Features - Part 2: Coordinate Reference Systems by Reference' spec: 
https://docs.ogc.org/is/18-058/18-058.html#_storage_crs . But I wonder 
who can fill such field with none of the data backend having support for 
it. hence this RFC. I see it more as a bootstrapping than the ultimate 
solution.


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From j1 at jimenezshaw.com  Thu May 13 12:20:41 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 13 May 2021 21:20:41 +0200
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <rmitun6ikoi.fsf@s1.lexort.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co> <rmitun6ikoi.fsf@s1.lexort.com>
Message-ID: <CADRrdKvYuQJLwjoPJ4U4XLKPfTSCOqKSm1h3JpBpSgafb1SkMw@mail.gmail.com>

My two cents:

About NGS / NOAA, I know that the new CRS they are preparing for 2022 it
clearly time dependent. I attended an online conference (oriented to
surveyors) last year about it, and they insisted a lot on the time variable
and plates drift.
There are some of them in the PROJ mailing list (maybe here as well) -there
was a discussion about including some grid files in PROJ-data-. Maybe
involving them in this topic may produce more traction.

Cheers,
Javier
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Thu, 13 May 2021 at 19:54, Greg Troxel <gdt at lexort.com> wrote:

adopt RFC 81: support for coordinate epochs in geospatial formats (
https://github.com/OSGeo/gdal/pull/3827 )


> Howard Butler <howard at hobu.co> writes:
>
> > It extends existing formats in GDAL's own way
> > ---------------------------------------------------------------
> >
> > Are there many other cases where GDAL augments and extends behavior of
> > formats by bolting on metadata bits? I can think of some GeoTIFF tags
> > where GDAL has done this in the past. Some of them have been adopted
> > industry-wide, but most have not. We definitely haven't done that to a
> > long list of formats like this RFC proposes to do.
>
> (I don't count formally.)
>
> I think I agree with Even's position here.  And, I see this as not being
> "GDAL's own way", but "a proposed way for the open geospatial community".
>
> But, overall this makes me wonder: Are there any formats for expressing
> epoch in the open source/open format world, and also in the proprietary
> world?.  I'm not aware of any (which means epsilon more than zero) and a
> quick search did not turn up anything.
>
> Obviously the US NGS keeps track of such things in their bluebook and
> NGS Integrated Datbase formats as they transform positions among epochs
> when doing adjustments, but that's a rather specialized and not so
> relevant to GIS format.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210513/f8fcd02a/attachment.html>

From andrew.bell.ia at gmail.com  Thu May 13 12:27:15 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Thu, 13 May 2021 15:27:15 -0400
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <CADRrdKvYuQJLwjoPJ4U4XLKPfTSCOqKSm1h3JpBpSgafb1SkMw@mail.gmail.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co> <rmitun6ikoi.fsf@s1.lexort.com>
 <CADRrdKvYuQJLwjoPJ4U4XLKPfTSCOqKSm1h3JpBpSgafb1SkMw@mail.gmail.com>
Message-ID: <CACJ51z17QnHwSAFUBpQ5pqScZs1PW1YTD1HgtG1SoFe5wivCdg@mail.gmail.com>

On Thu, May 13, 2021 at 3:21 PM Javier Jimenez Shaw <j1 at jimenezshaw.com>
wrote:

> My two cents:
>
> About NGS / NOAA, I know that the new CRS they are preparing for 2022 it
> clearly time dependent. I attended an online conference (oriented to
> surveyors) last year about it, and they insisted a lot on the time variable
> and plates drift.
> There are some of them in the PROJ mailing list (maybe here as well)
> -there was a discussion about including some grid files in PROJ-data-.
> Maybe involving them in this topic may produce more traction.
>

I'm not sure the issue is whether people expect to use time-marked CRS.
It's more whether GDAL should attempt to add their support into formats not
built for it.

I also wonder if people who create time-marked files from GDAL will be
confused/mislead when those files aren't properly read by other software.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210513/c510951c/attachment.html>

From even.rouault at spatialys.com  Thu May 13 13:19:50 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 13 May 2021 22:19:50 +0200
Subject: [gdal-dev] Formation of advisory board
Message-ID: <451fd7b2-6ad5-d4c9-c192-11ed3b3758db@spatialys.com>

PSC,

Per 
https://gdal.org/development/rfc/rfc80_numfocus_relationship.html#gdal-advisory-board 
<https://gdal.org/development/rfc/rfc80_numfocus_relationship.html#gdal-advisory-board>, 
we institute a Advisory Board with part of the sponsors. We need to put 
that into reality soon.

After discussing with Chris, here are the following suggestions:

- consider May 31st as the deadline for the set of sponsors we consider 
in the designation process of the representative of the Gold (at least, 
1 representative for every 3 Gold sponsors. Chris suggested we could ask 
each if they'd like to be) and Silver (1 representative for the whole 
set of Silver sponsors) sponsors for the year to come.

- ask OSGeo SAC for the creation of a gdal-advisory-board mailing list. 
Only approved subscribers will be allowed to post (representative of 
sponsors + PSC members willing to be part of it + people benefiting from 
funding), but it will be publicly archived.

Any objection ?

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210513/2387a588/attachment.html>

From warmerdam at pobox.com  Thu May 13 14:26:09 2021
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 13 May 2021 17:26:09 -0400
Subject: [gdal-dev] Formation of advisory board
In-Reply-To: <451fd7b2-6ad5-d4c9-c192-11ed3b3758db@spatialys.com>
References: <451fd7b2-6ad5-d4c9-c192-11ed3b3758db@spatialys.com>
Message-ID: <CA+YzLBdO5t3f6ygYSUzegf9-YNcqEsoc+pTTUXq81WX5M29cWQ@mail.gmail.com>

Sounds good to me!


On Thu, May 13, 2021 at 4:20 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> PSC,
>
> Per
> https://gdal.org/development/rfc/rfc80_numfocus_relationship.html#gdal-advisory-board,
> we institute a Advisory Board with part of the sponsors. We need to put
> that into reality soon.
>
> After discussing with Chris, here are the following suggestions:
>
> - consider May 31st as the deadline for the set of sponsors we consider in
> the designation process of the representative of the Gold (at least, 1
> representative for every 3 Gold sponsors. Chris suggested we could ask each
> if they'd like to be) and Silver (1 representative for the whole set of
> Silver sponsors) sponsors for the year to come.
>
> - ask OSGeo SAC for the creation of a gdal-advisory-board mailing list.
> Only approved subscribers will be allowed to post (representative of
> sponsors + PSC members willing to be part of it + people benefiting from
> funding), but it will be publicly archived.
>
> Any objection ?
>
> Even
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210513/55172393/attachment.html>

From fengting.chen at oracle.com  Thu May 13 14:38:19 2021
From: fengting.chen at oracle.com (Fengting Chen)
Date: Thu, 13 May 2021 21:38:19 +0000
Subject: [gdal-dev] Build GDAL on windows with dependency on PROJ
Message-ID: <BYAPR10MB33660559DF39133E83CAE06F93519@BYAPR10MB3366.namprd10.prod.outlook.com>

Hi,

I am trying to build GDAL 3.3 on Windows. Since it depends on PROJ 6 and above, I need PROJ 6 and above on Windows. However, I couldn't find the PROJ source code with makefile for Windows. I am wondering how is PROJ built on Windows in order to build GDAL 3.3 on Windows? Your help is appreciated.

Thanks,
-Fengting
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210513/9274ea82/attachment-0001.html>

From mateusz at loskot.net  Thu May 13 16:07:52 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 14 May 2021 01:07:52 +0200
Subject: [gdal-dev] Build GDAL on windows with dependency on PROJ
In-Reply-To: <BYAPR10MB33660559DF39133E83CAE06F93519@BYAPR10MB3366.namprd10.prod.outlook.com>
References: <BYAPR10MB33660559DF39133E83CAE06F93519@BYAPR10MB3366.namprd10.prod.outlook.com>
Message-ID: <CABUeae9ZOA0jQqbcFSmzThfRtuK9KRqLrVC8nK_pAWEig27Epg@mail.gmail.com>

On Fri, 14 May 2021, 00:42 Fengting Chen, <fengting.chen at oracle.com> wrote:

> However, I couldn?t find the PROJ source code with makefile for Windows. I
> am wondering how is PROJ built on Windows in order to build GDAL 3.3 on
> Windows?
>

RTM https://proj.org/install.html#cmake

There is proj mailing list.

ML
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210514/d881dba6/attachment.html>

From cmulershen at gmail.com  Thu May 13 21:06:38 2021
From: cmulershen at gmail.com (zs s)
Date: Fri, 14 May 2021 12:06:38 +0800
Subject: [gdal-dev] Use java swig binding to create geojson,
 the creation is successful but the geojson is incomplete
Message-ID: <CAMrRSDWthW5PKLtr6Y3Ok=B6KdF+KSHrV1v-ZRAm1RFVLOvCLQ@mail.gmail.com>

Hi, this is my create geojson code:

public static void main(String[] args) {
        String path = "test.geojson";

        ogr.RegisterAll();
        gdal.SetConfigOption("GDAL_FILENAME_IS_UTF8", "YES");

        String driverName = "GeoJson";
        Driver driver = ogr.GetDriverByName(driverName);

        DataSource dataSource = driver.CreateDataSource(path);

        Layer layer = dataSource.CreateLayer("test", null, ogr.wkbPoint);

        FieldDefn strField = new FieldDefn("str", ogr.OFTString);
        layer.CreateField(strField);

        FieldDefn intField = new FieldDefn("integer", ogr.OFTInteger);
        layer.CreateField(intField);

        FeatureDefn featureDefn = layer.GetLayerDefn();

        for (int i = 0; i < 2; i++) {
            Feature feature = new Feature(featureDefn);
            feature.SetField("str", "test test test test");
            feature.SetField("integer", i);

            double x = 120 + (double) i / 1000;
            double y = 30 + (double) i / 1000;

            Geometry geometry = Geometry.CreateFromWkt(String.format("POINT
(%f %f)", x, y));
            feature.SetGeometry(geometry);

            layer.CreateFeature(feature);
        }

        dataSource.SyncToDisk();
    }

It can run successfully, but result is incomplete:

{
"type": "FeatureCollection",
"name": "test",
"features": [
{ "type": "Feature", "properties": { "str": "test test test test",
"integer": 0 }, "geometry": { "type": "Point", "coordinates": [ 120.0, 30.0
] } },
{ "type": "Feature", "properties": { "str": "test test test test",
"integer": 1 }, "geometry": { "type": "Point", "coordinates": [ 120.001,
30.001 ] } }

Can it be created in this way  or my code is wrong?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210514/2aaa9dc6/attachment.html>

From andreas.oxenstierna at t-kartor.com  Thu May 13 23:42:57 2021
From: andreas.oxenstierna at t-kartor.com (Andreas Oxenstierna)
Date: Fri, 14 May 2021 06:42:57 +0000
Subject: [gdal-dev] gdal_translate clip PostGIS raster
In-Reply-To: <d8317218-845e-4a79-9b69-5ec0094ee64f@Spark>
References: <acbd58a5-e95d-438f-a220-e7421d7c2ac8@Spark>
 <cceedf40-d007-4ca8-a08f-d92ac9300466@Spark>
 <237bc91d-0923-416d-09ab-e3cba5fcbd10@spatialys.com>
 <b861b573-da06-469c-9fe6-ab28ca907c64@Spark>
 <d8317218-845e-4a79-9b69-5ec0094ee64f@Spark>
Message-ID: <0c243861-0d94-4d67-9c01-6f9852d6667f@Spark>

I had missed something essential and simple ...
mode=2 must be added to the end of the PG connection string to tell GDAL to treat a PostGIS raster table as one unit.
The default mode=1 treats each tile as a subdataset

Sorry for the noise

Best regards

Andreas Oxenstierna
T-Kartor Geospatial AB
Olof Mohlins v?g 12 Kristianstad
mobile: +46 733 206831
mailto: andreas.oxenstierna at t-kartor.com<mailto:andreas.oxenstierna at t-kartor.com>
www.t-kartor.com<http://www.t-kartor.com>
On 12 May 2021, 08:12 +0200, Andreas Oxenstierna <andreas.oxenstierna at t-kartor.com>, wrote:
Tested with:
1  ? table=rastertable WHERE=rid>0" dest.tif
   Returns:
     WHERE=rid>0 has no raster bands

2  ? table=rastertable WHERE=rid=1" dest.tif
   Returns:
     a valid but empty tif file

3 ? table=<view based on the rastertable" dest.tif
   Returns:
     ... has no raster bands

gdalwarp seems to treat PostGIS raster tables as one subdataset for each tile. Basically make them useless in my mind - or have I missed something essential/simple ?


H?lsningar

Andreas Oxenstierna
T-Kartor Geospatial AB
Olof Mohlins v?g 12 Kristianstad
mobile: +46 733 206831
mailto: andreas.oxenstierna at t-kartor.com<mailto:andreas.oxenstierna at t-kartor.com>
www.t-kartor.com<http://www.t-kartor.com>
On 11 May 2021, 08:48 +0200, Andreas Oxenstierna <andreas.oxenstierna at t-kartor.com>, wrote:
Thanks

but still stumbling (using 2.3.2)
gdalwarp -cutline "PG:dbname=gisdb" -csql 'select * from polytest where id=1' -crop_to_cutline -of GTiff -srcnodata -9999 -dstnodata -9999 "PG:<connectinfo> schema=a table=rastertable" dest.tif

returns:
ERROR 1: Input file <rastertable> has no raster bands.

gdalinfo reports that the table is tiled in 360 pieces which potentially is the source for the issue:
Subdatasets:
  SUBDATASET_1_NAME=PG:host=

SUBDATASET_360_DESC=PostGIS Raster at

H?lsningar

Andreas Oxenstierna
T-Kartor Geospatial AB
Olof Mohlins v?g 12 Kristianstad
mobile: +46 733 206831
mailto: andreas.oxenstierna at t-kartor.com<mailto:andreas.oxenstierna at t-kartor.com>
www.t-kartor.com<http://www.t-kartor.com>
On 10 May 2021, 19:31 +0200, Even Rouault <even.rouault at spatialys.com>, wrote:

Try with gdalwarp and the -cutline family of arguments

Le 10/05/2021 ? 19:23, Andreas Oxenstierna a ?crit :
Hi list

Is it possible to clip a PostGIS raster with a PostGIS vector poly using gdal_translate?

I cannot find a working syntax to define the clipping table in the WHERE clause.
Eg. this returns "Error browsing database for PostGIS Raster properties : ERROR:  syntax error at or near "FROM"

gdal_translate -of GTiff "PG:<connectinfo> schema=a table=rastertable WHERE='ST_Intersects(rast,c.geom) AND c.id<http://c.id> = 2 FROM a.vectortable c'" a.tif

Best regards

Andreas Oxenstierna
T-Kartor Geospatial AB
Olof Mohlins v?g 12 Kristianstad
mobile: +46 733 206831
mailto: andreas.oxenstierna at t-kartor.com<mailto:andreas.oxenstierna at t-kartor.com>
www.t-kartor.com<http://www.t-kartor.com>



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210514/821e593f/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri May 14 03:11:13 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 14 May 2021 03:11:13 -0700 (MST)
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
Message-ID: <1620987073967-0.post@n6.nabble.com>

+1

For me the RFC feels good. Existing data formats like GeoTIFF and GeoJSON
can deliver the 4D spatiotemporal coordinates correctly by using the epoch
attached as metadata when the whole dataset  is using the same epoch. None
of the formats dealt in the RFC should get broken. If some software does not
know what to do with the metadata it will discard the metadata and the
situation is the same than now. Those who use dynamic coordinate systems
probably know that without epoch the data are undefined and then they will
try to find the epoch by some other means.

Personally I like that data and metadata are kept in the same file. But if
it feels bad, could it be an option to use a sidecar file ".aux.xml" for the
single file / single layer formats like GeoJSON?

Obviously there is lot to do with dynamic reference systems
https://geophysica.fi/pdf/geophysica_2019_54_kierulf.pdf but this RFC could
be a good start.

-Jukka Rahkonen-



Even Rouault-2 wrote
> Hi,
> 
> Motion:
> 
> adopt RFC 81: support for coordinate epochs in geospatial formats ( 
> https://github.com/OSGeo/gdal/pull/3827 )
> 
> Starting with my +1
> 
> Even
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From momtchil at momtchev.com  Fri May 14 03:33:04 2021
From: momtchil at momtchev.com (Momtchil Momtchev)
Date: Fri, 14 May 2021 12:33:04 +0200
Subject: [gdal-dev] OGRGeometry::Buffer
Message-ID: <0ef820a5-9a70-3273-b314-d866965e503a@momtchev.com>


 ??? Hello,


 ??? Just a quick question: shouldn't /OGRGeometry::Buffer/ be of 
/OGRPolygon/ return type? Can I safely force a /OGRPolygon/ return type?

 ??? These are the Typescript bindings so it should be as generic as 
possible.


-- 
Momtchil Momtchev <momtchil at momtchev.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210514/371db4bc/attachment.html>

From even.rouault at spatialys.com  Fri May 14 03:52:31 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 14 May 2021 12:52:31 +0200
Subject: [gdal-dev] Use java swig binding to create geojson,
 the creation is successful but the geojson is incomplete
In-Reply-To: <CAMrRSDWthW5PKLtr6Y3Ok=B6KdF+KSHrV1v-ZRAm1RFVLOvCLQ@mail.gmail.com>
References: <CAMrRSDWthW5PKLtr6Y3Ok=B6KdF+KSHrV1v-ZRAm1RFVLOvCLQ@mail.gmail.com>
Message-ID: <e73089f4-8647-22ad-c930-ebc2651c418b@spatialys.com>

See https://gdal.org/java/org/gdal/ogr/DataSource.html#delete()


-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210514/454fac13/attachment.html>

From even.rouault at spatialys.com  Fri May 14 03:55:29 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 14 May 2021 12:55:29 +0200
Subject: [gdal-dev] OGRGeometry::Buffer
In-Reply-To: <0ef820a5-9a70-3273-b314-d866965e503a@momtchev.com>
References: <0ef820a5-9a70-3273-b314-d866965e503a@momtchev.com>
Message-ID: <d92209cb-0023-6a6e-52d1-99102909a70f@spatialys.com>

It can also be a multipolygon (if input is a multipolygon or a geometry 
collection)

Le 14/05/2021 ? 12:33, Momtchil Momtchev a ?crit?:
>
>
> ??? Hello,
>
>
> ??? Just a quick question: shouldn't /OGRGeometry::Buffer/ be of 
> /OGRPolygon/ return type? Can I safely force a /OGRPolygon/ return type?
>
> ??? These are the Typescript bindings so it should be as generic as 
> possible.
>
>
> -- 
> Momtchil Momtchev<momtchil at momtchev.com>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210514/638dc971/attachment.html>

From even.rouault at spatialys.com  Fri May 14 05:31:45 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 14 May 2021 14:31:45 +0200
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <1620987073967-0.post@n6.nabble.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <1620987073967-0.post@n6.nabble.com>
Message-ID: <a82f0854-11b7-70b5-09c1-6cc50a935f0e@spatialys.com>


> Personally I like that data and metadata are kept in the same file. But if
> it feels bad, could it be an option to use a sidecar file ".aux.xml" for the
> single file / single layer formats like GeoJSON?

On the raster side, drivers that derive from GDALPamDataset, that is 
most (in particular JPEG, PNG), etc will automatically benefit from the 
added serialization of the coordinateEpoch in the SRS element of the 
.aux.xml file.

On the vector side, we have no such general infrastructure, so that 
isn't possible currently.

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From momtchil at momtchev.com  Fri May 14 11:01:31 2021
From: momtchil at momtchev.com (Momtchil Momtchev)
Date: Fri, 14 May 2021 20:01:31 +0200
Subject: [gdal-dev] GDAL bindings for Node.js: node-gdal-async 3.1.1
Message-ID: <376b5586-384a-90b8-a4ca-c76c631fc62e@momtchev.com>


 ??? Hello,


 ??? I just published /node-gdal-async/ 3.1.1 - the latest bindings for 
Node.js.

 ??? Starting with 3.1, there is full support for TypeScript as well - 
with no 'any' types - and curve geometries.

 ??? It also features auto-completion with online help in IDEs that 
support it (VSCode for example) even when using only Javascript.

 ??? 3.0 added parallel asynchronous Promise-based operations.

 ??? It is bundled with GDAL 3.2.2 but supports rebuilding against your 
own system installed GDAL.


 ??? This project is a fork of the previous bindings, if you have 
previously used /node-gdal/ or /node-gdal-next/, just keep in mind that 
3.0 introduces sweeping changes (40% of the code is new) and that it 
hasn't been very thoroughly tested in production environment - so any 
feedback will be very welcome as I currently can afford to sink in as 
much time as is needed for support.


/npm install gdal-async/ will get you 3.0.3

/npm install gdal-async at beta/ will get you 3.1.1 (with TypeScript and 
curve geometries)


https://www.npmjs.com/package/gdal-async 
<https://www.npmjs.com/package/gdal-async>


-- 
Momtchil Momtchev <momtchil at momtchev.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210514/cfac3ca3/attachment.html>

From fengting.chen at oracle.com  Fri May 14 13:51:21 2021
From: fengting.chen at oracle.com (Fengting Chen)
Date: Fri, 14 May 2021 20:51:21 +0000
Subject: [gdal-dev] [External] : Re: Build GDAL on windows with
 dependency on PROJ
In-Reply-To: <CABUeae9ZOA0jQqbcFSmzThfRtuK9KRqLrVC8nK_pAWEig27Epg@mail.gmail.com>
References: <BYAPR10MB33660559DF39133E83CAE06F93519@BYAPR10MB3366.namprd10.prod.outlook.com>
 <CABUeae9ZOA0jQqbcFSmzThfRtuK9KRqLrVC8nK_pAWEig27Epg@mail.gmail.com>
Message-ID: <BYAPR10MB33663B086F0AF76F267AE70593509@BYAPR10MB3366.namprd10.prod.outlook.com>

Thank you!

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Mateusz Loskot
Sent: Thursday, May 13, 2021 7:08 PM
To: gdal-dev at lists.osgeo.org
Subject: [External] : Re: [gdal-dev] Build GDAL on windows with dependency on PROJ

On Fri, 14 May 2021, 00:42 Fengting Chen, <fengting.chen at oracle.com<mailto:fengting.chen at oracle.com>> wrote:
However, I couldn?t find the PROJ source code with makefile for Windows. I am wondering how is PROJ built on Windows in order to build GDAL 3.3 on Windows?

RTM https://proj.org/install.html#cmake<https://urldefense.com/v3/__https:/proj.org/install.html*cmake__;Iw!!GqivPVa7Brio!PJzJ45gzKY-UYYnKUJUgIKKPRqvhZgYR-Bloa9uTdaUcasw4OLF1aSdmGm6ANe-D0bA$>

There is proj mailing list.

ML
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210514/d394a237/attachment.html>

From mdsumner at gmail.com  Fri May 14 14:13:03 2021
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 15 May 2021 07:13:03 +1000
Subject: [gdal-dev] help with GDALWarpApp - resample options
Message-ID: <CAAcGz9-woMddA3fD+EMrDR=hfE_zW56eVgAOnHdpznohD9_cMA@mail.gmail.com>

Hello,

how do I set the equivalent of eResampleAlg for the GDALWarp *app* ?

https://gdal.org/api/gdal_utils.html#gdal__utils_8h_1ab2094d5332364d63e0851dcb12398469

I think you can't?  GDALWarpAppOptions is for the -wo command line
equivalents, not the -r (right?)

I can see how to use the implementation of the GDALWarpApp to get what I
want, but if this resample method was settable it saves me going lower.

Thanks!

Best, Mike


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210515/c7638cec/attachment.html>

From even.rouault at spatialys.com  Fri May 14 14:18:33 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 14 May 2021 23:18:33 +0200
Subject: [gdal-dev] help with GDALWarpApp - resample options
In-Reply-To: <CAAcGz9-woMddA3fD+EMrDR=hfE_zW56eVgAOnHdpznohD9_cMA@mail.gmail.com>
References: <CAAcGz9-woMddA3fD+EMrDR=hfE_zW56eVgAOnHdpznohD9_cMA@mail.gmail.com>
Message-ID: <1c4f21a8-0c7a-40bb-67e7-0555e7c5e9bc@spatialys.com>

Michael,


> how do I set the equivalent of eResampleAlg for the GDALWarp *app* ?
>
> https://gdal.org/api/gdal_utils.html#gdal__utils_8h_1ab2094d5332364d63e0851dcb12398469 
> <https://gdal.org/api/gdal_utils.html#gdal__utils_8h_1ab2094d5332364d63e0851dcb12398469>
>
> I think you can't?? GDALWarpAppOptions is for the -wo command line 
> equivalents, not the -r (right?)

GDALWarpAppOptions is for all command line parameters of gdalwarp, not 
just -wo

Usage example at 
https://github.com/OSGeo/gdal/blob/fec15b146f8a750c23c5e765cac12ed5fc9c2b85/gdal/frmts/gtiff/cogdriver.cpp#L512

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From mdsumner at gmail.com  Fri May 14 14:20:43 2021
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 15 May 2021 07:20:43 +1000
Subject: [gdal-dev] help with GDALWarpApp - resample options
In-Reply-To: <1c4f21a8-0c7a-40bb-67e7-0555e7c5e9bc@spatialys.com>
References: <CAAcGz9-woMddA3fD+EMrDR=hfE_zW56eVgAOnHdpznohD9_cMA@mail.gmail.com>
 <1c4f21a8-0c7a-40bb-67e7-0555e7c5e9bc@spatialys.com>
Message-ID: <CAAcGz98Fd+EUO=OqWAKRyH6UAu1FUAUTxTfrUs6BVcrc9j8CDQ@mail.gmail.com>

Oh, I see - you just append it all on.

Thanks! C++ is a real struggle for me, but this is going to be excellent.

Best, Mike

On Sat, 15 May 2021, 07:18 Even Rouault, <even.rouault at spatialys.com> wrote:

> Michael,
>
>
> > how do I set the equivalent of eResampleAlg for the GDALWarp *app* ?
> >
> >
> https://gdal.org/api/gdal_utils.html#gdal__utils_8h_1ab2094d5332364d63e0851dcb12398469
> > <
> https://gdal.org/api/gdal_utils.html#gdal__utils_8h_1ab2094d5332364d63e0851dcb12398469
> >
> >
> > I think you can't?  GDALWarpAppOptions is for the -wo command line
> > equivalents, not the -r (right?)
>
> GDALWarpAppOptions is for all command line parameters of gdalwarp, not
> just -wo
>
> Usage example at
>
> https://github.com/OSGeo/gdal/blob/fec15b146f8a750c23c5e765cac12ed5fc9c2b85/gdal/frmts/gtiff/cogdriver.cpp#L512
>
> Even
>
> --
>
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210515/c3379ba5/attachment-0001.html>

From jmssnyder at ucdavis.edu  Fri May 14 17:28:23 2021
From: jmssnyder at ucdavis.edu (Jason Snyder)
Date: Fri, 14 May 2021 17:28:23 -0700
Subject: [gdal-dev] Removing trailing decimals from contour labels of shape
 files
Message-ID: <CAPFZY7W-_bPa61PXQS55GwEJNbEBWyYY=Zx_ptrSx+ZP_vTZ9Q@mail.gmail.com>

I tried making shape files of pressure from netcdf files using the
following commands using gdal:

gdal_contour -a pressure -i 4 -off 0 pressure.nc pressure.shp

I noticed that when displaying the graph in mapserver I get label values
such as 1010.00000000 whereas I want the labels to be whole numbers. How do
I tweak this code to get whole numbers for pressure contour labels in map
server?

I have noticed that in the netcdf file pressure.nc that the pressure values
have three trailing decimal points after them so a pressure value in the
netcdf file will be 1010.000 instead of 1010. I also noticed that viewing
the dbf file. Do I need to fix the netcdf file to display intergers? If so
how do I do this?

Thank you for your time.

Jason Snyder
-- 
Jason Snyder PhD
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210514/ee0de0a0/attachment.html>

From mwtoews at gmail.com  Sat May 15 03:55:26 2021
From: mwtoews at gmail.com (Mike Taves)
Date: Sat, 15 May 2021 22:55:26 +1200
Subject: [gdal-dev] Removing trailing decimals from contour labels of
 shape files
In-Reply-To: <CAPFZY7W-_bPa61PXQS55GwEJNbEBWyYY=Zx_ptrSx+ZP_vTZ9Q@mail.gmail.com>
References: <CAPFZY7W-_bPa61PXQS55GwEJNbEBWyYY=Zx_ptrSx+ZP_vTZ9Q@mail.gmail.com>
Message-ID: <CAM2FmMoB-kUcZrog2xa34c4FMpCMi+rOOad7kF2fKmDuz2KA+Q@mail.gmail.com>

On Sat, 15 May 2021 at 12:28, Jason Snyder via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
> I noticed that when displaying the graph in mapserver I get label values such as 1010.00000000 whereas I want the labels to be whole numbers. How do I tweak this code to get whole numbers for pressure contour labels in map server?

Try adding -lco RESIZE=YES to the command to resize fields to their optimal size

https://gdal.org/drivers/vector/shapefile.html#layer-creation-options

From andrew at aitchison.me.uk  Sat May 15 05:24:22 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Sat, 15 May 2021 13:24:22 +0100 (BST)
Subject: [gdal-dev] gnu g++ v11 -fanalyzer - possibly NULL operator new
Message-ID: <df7be3f-f35e-584c-6081-5a3054f5aab@aitchison.me.uk>


Ubuntu 21.04 has the option of the gcc-11 compiler suite.
Although not ready for production use on C++ code*,
it includes a static analyzer with the option '-fanalyzer'.

Out of curiosity I tried using this option when building the geotiff 
driver for 3.3.0; command line and output attempting to build cogdriver.lo 
available at
    https://www.aitchison.me.uk/GDAL/make.cogdriver.errlog.gcc-fanalyzer.20210515
(terminal colour escape codes may be mangled).

Sadly my C++ isn't up to figuring out whether the analyzer is finding 
bugs in the code or the code is finding bugs in the analyzer.

* https://developers.redhat.com/blog/2021/01/28/static-analysis-updates-in-gcc-11#what_s_next_for_gcc_11_and__fanalyzer

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From even.rouault at spatialys.com  Sat May 15 06:01:28 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 15 May 2021 15:01:28 +0200
Subject: [gdal-dev] gnu g++ v11 -fanalyzer - possibly NULL operator new
In-Reply-To: <df7be3f-f35e-584c-6081-5a3054f5aab@aitchison.me.uk>
References: <df7be3f-f35e-584c-6081-5a3054f5aab@aitchison.me.uk>
Message-ID: <61a52037-162c-8c68-033e-f63fd2fe0dfc@spatialys.com>

Andrew,

this is definitely not production ready for C++.

It reports that "auto poDriver = new GDALCOGDriver();" could return 
NULL, which is obviously wrong.

Even

Le 15/05/2021 ? 14:24, Andrew C Aitchison a ?crit?:
>
> Ubuntu 21.04 has the option of the gcc-11 compiler suite.
> Although not ready for production use on C++ code*,
> it includes a static analyzer with the option '-fanalyzer'.
>
> Out of curiosity I tried using this option when building the geotiff 
> driver for 3.3.0; command line and output attempting to build 
> cogdriver.lo available at
> https://www.aitchison.me.uk/GDAL/make.cogdriver.errlog.gcc-fanalyzer.20210515
> (terminal colour escape codes may be mangled).
>
> Sadly my C++ isn't up to figuring out whether the analyzer is finding 
> bugs in the code or the code is finding bugs in the analyzer.
>
> * 
> https://developers.redhat.com/blog/2021/01/28/static-analysis-updates-in-gcc-11#what_s_next_for_gcc_11_and__fanalyzer
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Sat May 15 09:50:28 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Sat, 15 May 2021 09:50:28 -0700 (MST)
Subject: [gdal-dev] Removing trailing decimals from contour labels of
 shape files
In-Reply-To: <CAPFZY7W-_bPa61PXQS55GwEJNbEBWyYY=Zx_ptrSx+ZP_vTZ9Q@mail.gmail.com>
References: <CAPFZY7W-_bPa61PXQS55GwEJNbEBWyYY=Zx_ptrSx+ZP_vTZ9Q@mail.gmail.com>
Message-ID: <1621097428183-0.post@n6.nabble.com>

Hi,

You may ask help from mapserver-users for the Mapserver side. It is possible
to format the labels by expressions. See the example in
https://mapserver.org/mapfile/class.html#class 

"More advanced Expressions can be used to specify the labels. Since version
6.0, there are functions available for formatting numbers:

TEXT ("Area is: " + tostring([area],"%.2f"))"

-Jukka Rahkonen-





GDAL - Dev mailing list wrote
> I tried making shape files of pressure from netcdf files using the
> following commands using gdal:
> 
> gdal_contour -a pressure -i 4 -off 0 pressure.nc pressure.shp
> 
> I noticed that when displaying the graph in mapserver I get label values
> such as 1010.00000000 whereas I want the labels to be whole numbers. How
> do
> I tweak this code to get whole numbers for pressure contour labels in map
> server?
> 
> I have noticed that in the netcdf file pressure.nc that the pressure
> values
> have three trailing decimal points after them so a pressure value in the
> netcdf file will be 1010.000 instead of 1010. I also noticed that viewing
> the dbf file. Do I need to fix the netcdf file to display intergers? If so
> how do I do this?
> 
> Thank you for your time.
> 
> Jason Snyder
> -- 
> Jason Snyder PhD
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From gdal at geoworld.de  Sun May 16 08:07:54 2021
From: gdal at geoworld.de (Nicol Hermann)
Date: Sun, 16 May 2021 17:07:54 +0200
Subject: [gdal-dev] OGR features list - python bindings
Message-ID: <6dbf4d0545201732afc93cac3d51324f4483d496.camel@geoworld.de>

Hello,

I am facing difficulties returning a list of ogr features from a python
function.
For each entry I am getting an error message like this:

[<osgeo.ogr.Feature; proxy of <Swig Object of type 'OGRFeatureShadow *'
at 0x7f75e870d4b0> >

This is the code I am using:


def generateRecordFormSplit( ogr, dblayer, dblayerDefn, sessionid ):
    cnt = 1
    featureList = []

    for feature in dblayer:
        geom = feature.GetGeometryRef()
        dblayerFeature = ogr.Feature(feature_def = dblayerDefn)
        dblayerFeature.SetGeometry( geom )
        dblayerFeature.SetField("sessionid", sessionid + "_" + str(cnt)
)
        featureList.append( dblayerFeature )
        feature.Destroy()
        cnt += 1

    return( featureList ) # <<-- Issue


Any hints what I am doing wrong and how to fix it.

Thanks
Nicol


From even.rouault at spatialys.com  Sun May 16 08:20:24 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 16 May 2021 17:20:24 +0200
Subject: [gdal-dev] OGR features list - python bindings
In-Reply-To: <6dbf4d0545201732afc93cac3d51324f4483d496.camel@geoworld.de>
References: <6dbf4d0545201732afc93cac3d51324f4483d496.camel@geoworld.de>
Message-ID: <71a3dc82-d378-5350-b588-a081dd16370f@spatialys.com>


Le 16/05/2021 ? 17:07, Nicol Hermann a ?crit?:
> Hello,
>
> I am facing difficulties returning a list of ogr features from a python
> function.
> For each entry I am getting an error message like this:
>
> [<osgeo.ogr.Feature; proxy of <Swig Object of type 'OGRFeatureShadow *'
> at 0x7f75e870d4b0> >

This doesn't look like an error message to me, but as the expected 
not-so-sexy representation of a ogr.Feature object. Do you get an actual 
exception ?

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From gdal at geoworld.de  Sun May 16 08:44:20 2021
From: gdal at geoworld.de (Nicol Hermann)
Date: Sun, 16 May 2021 17:44:20 +0200
Subject: [gdal-dev] OGR features list - python bindings
In-Reply-To: <71a3dc82-d378-5350-b588-a081dd16370f@spatialys.com>
References: <6dbf4d0545201732afc93cac3d51324f4483d496.camel@geoworld.de>
 <71a3dc82-d378-5350-b588-a081dd16370f@spatialys.com>
Message-ID: <f18d189b533f37b52ab9186b775102cdc0e48f89.camel@geoworld.de>

Hello,

Am Sonntag, den 16.05.2021, 17:20 +0200 schrieb Even Rouault:
> Le 16/05/2021 ? 17:07, Nicol Hermann a ?crit :
> > Hello,
> > 
> > I am facing difficulties returning a list of ogr features from a
> > python
> > function.
> > For each entry I am getting an error message like this:
> > 
> > [<osgeo.ogr.Feature; proxy of <Swig Object of type
> > 'OGRFeatureShadow *'
> > at 0x7f75e870d4b0> >
> 
> This doesn't look like an error message to me, but as the expected 
> not-so-sexy representation of a ogr.Feature object. Do you get an
> actual 
> exception ?

No, but the execution terminates after that.
This is the function call followed by a simple print statement which
does not get printed 

featureList = generateRecordFormSplit( ogr, dblayer, dblayerDefn,
'12345' )
print( featureList )


Thanks
Nicol


> Even
> 


From gdal at geoworld.de  Sun May 16 09:45:56 2021
From: gdal at geoworld.de (Nicol Hermann)
Date: Sun, 16 May 2021 18:45:56 +0200
Subject: [gdal-dev] OGR features list - python bindings
In-Reply-To: <8df101a0-8986-430a-a2f2-f81850e78fc9@stripfamily.net>
References: <6dbf4d0545201732afc93cac3d51324f4483d496.camel@geoworld.de>
 <71a3dc82-d378-5350-b588-a081dd16370f@spatialys.com>
 <f18d189b533f37b52ab9186b775102cdc0e48f89.camel@geoworld.de>
 <8df101a0-8986-430a-a2f2-f81850e78fc9@stripfamily.net>
Message-ID: <7f3a52aeaad3622c0a45636af7909fbcbaf9f92b.camel@geoworld.de>

Hallo,

Am Sonntag, den 16.05.2021, 10:25 -0600 schrieb David Strip:
> On 5/16/2021 9:44 AM, Nicol Hermann wrote: 
> > Hello,
> > 
> > 
> > No, but the execution terminates after that.
> > This is the function call followed by a simple print statement
> > which
> > does not get printed 
> > 
> > featureList = generateRecordFormSplit( ogr, dblayer, dblayerDefn,
> > '12345' )
> > print( featureList )
> > 
> > 
> > Thanks
> > Nicol
> > 
> > 
>  As Even has pointed out, this is the output of the print statement,
> though it appears to be truncated - the closing "]" is missing (and
> possibly more as well). 
> To convince yourself that the function has indeed returned try
> something like 
>     print ("Function has returned")
> If you want to see the actual features in a recognizable way, you
> will need to iterate through the featureList and print some property
> of each feature that has a human-readable representation. 

done and solved.
Thanks for your help!

Nicol




From paul.malm at lfv.se  Mon May 17 00:23:50 2021
From: paul.malm at lfv.se (paul.malm at lfv.se)
Date: Mon, 17 May 2021 07:23:50 +0000
Subject: [gdal-dev] gdaldem color-relief -exact_color_entry results in RGB
 000
Message-ID: <51752a6f2fe74d4c82184959d465f291@lfv.se>

Hi list, I've tried to use exact_color_entry on a DEM-tif file.
gdaldem color-relief 55.tif colornr.cpt 55_colrel.tif -of GTiff -exact_color_entry -co COMPRESS=LZW -b 1
Resulting in a blank rastefile (0 0 0).
I've picked (info) the colors in QGIS and there are a lot of pixels in the span of the color table below and QGis is presenting the values as integers.
It works fine with Nearest_color_entry.
Any ideas?
Kind regards,
Paul

colornr.cpt looks like this:
40 0 255 255
41 0 255 255
43 255 255 0
44 0 255 255
45 255 0 0
46 255 255 0
47 0 255 255
48 255 0 0
49 255 255 0
50 0 255 0
51 0 0 255
52 0 0 255
53 0 0 255
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210517/774c78dd/attachment.html>

From even.rouault at spatialys.com  Tue May 18 07:53:31 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 18 May 2021 16:53:31 +0200
Subject: [gdal-dev] Formation of advisory board
In-Reply-To: <451fd7b2-6ad5-d4c9-c192-11ed3b3758db@spatialys.com>
References: <451fd7b2-6ad5-d4c9-c192-11ed3b3758db@spatialys.com>
Message-ID: <9a5df152-fa8c-f522-058f-d5d6e55f7c80@spatialys.com>

Hi,

The gdal-advisory-board at lists.osgeo.org 
<mailto:gdal-advisory-board at lists.osgeo.org> list is now in place. PSC 
members that want to subscribe should do it at 
https://lists.osgeo.org/mailman/listinfo/gdal-advisory-board (if you 
want admin rights on the list, drop me a word)

Archives are available at 
https://lists.osgeo.org/pipermail/gdal-advisory-board/

Even

Le 13/05/2021 ? 22:19, Even Rouault a ?crit?:
>
> PSC,
>
> Per 
> https://gdal.org/development/rfc/rfc80_numfocus_relationship.html#gdal-advisory-board 
> <https://gdal.org/development/rfc/rfc80_numfocus_relationship.html#gdal-advisory-board>, 
> we institute a Advisory Board with part of the sponsors. We need to 
> put that into reality soon.
>
> After discussing with Chris, here are the following suggestions:
>
> - consider May 31st as the deadline for the set of sponsors we 
> consider in the designation process of the representative of the Gold 
> (at least, 1 representative for every 3 Gold sponsors. Chris suggested 
> we could ask each if they'd like to be) and Silver (1 representative 
> for the whole set of Silver sponsors) sponsors for the year to come.
>
> - ask OSGeo SAC for the creation of a gdal-advisory-board mailing 
> list. Only approved subscribers will be allowed to post 
> (representative of sponsors + PSC members willing to be part of it + 
> people benefiting from funding), but it will be publicly archived.
>
> Any objection ?
>
> Even
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210518/4f1ba648/attachment.html>

From Matt.Wilkie at yukon.ca  Tue May 18 08:47:10 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 18 May 2021 15:47:10 +0000
Subject: [gdal-dev] gdaldem color-relief -exact_color_entry results in
 RGB 000
In-Reply-To: <51752a6f2fe74d4c82184959d465f291@lfv.se>
References: <51752a6f2fe74d4c82184959d465f291@lfv.se>
Message-ID: <d5387a514d0148879b8087b32733b719@yukon.ca>

A guess; the tiff is actually stored as 32 bit float so the values have decimals, and thus don?t exactly match the colour table. Maybe the Qgis layer is set to report without decimals?

Hmm, maybe not. Something similar was reported in GIS stack a few years ago:
https://gis.stackexchange.com/questions/197660/gdaldem-exact-color-matching-fails


Matt
Geomatics Analyst | Environment | T 867-667-8133 | Yukon.ca
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of paul.malm at lfv.se
Sent: May 17, 2021 12:24 AM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] gdaldem color-relief -exact_color_entry results in RGB 000


*** External email: Do not click on links or attachments except from trusted senders. ***

******************************************************************************************



Hi list, I?ve tried to use exact_color_entry on a DEM-tif file.
gdaldem color-relief 55.tif colornr.cpt 55_colrel.tif -of GTiff -exact_color_entry -co COMPRESS=LZW -b 1
Resulting in a blank rastefile (0 0 0).
I?ve picked (info) the colors in QGIS and there are a lot of pixels in the span of the color table below and QGis is presenting the values as integers.

It works fine with Nearest_color_entry.
Any ideas?
Kind regards,
Paul

colornr.cpt looks like this:
40 0 255 255
41 0 255 255
43 255 255 0
44 0 255 255
45 255 0 0
46 255 255 0
47 0 255 255
48 255 0 0
49 255 255 0
50 0 255 0
51 0 0 255
52 0 0 255
53 0 0 255
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210518/b1931fcb/attachment.html>

From rykovd at gmail.com  Tue May 18 13:50:11 2021
From: rykovd at gmail.com (Denis Rykov)
Date: Tue, 18 May 2021 22:50:11 +0200
Subject: [gdal-dev] RPC to geotransform converting
Message-ID: <CAJbvKNrQV4b3z30ZqcasUHxW_LdLXtyHNS4DNHKK=dkhXZ330A@mail.gmail.com>

Hi,

I have a GeoTIF file and file with RPC information next to it (*.txt). Is
there a way to transform this raster to a normal geotiff without
displacement (with geotransform inside) or is it fundamentally impossible?
I've tried to achieve it with gdalwarp but in this case the result of the
transformation has about 5 meters (10 pixels) x-displacement (I use QGIS to
visualize it).

Denis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210518/4c8b62bc/attachment.html>

From even.rouault at spatialys.com  Tue May 18 13:57:42 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 18 May 2021 22:57:42 +0200
Subject: [gdal-dev] RPC to geotransform converting
In-Reply-To: <CAJbvKNrQV4b3z30ZqcasUHxW_LdLXtyHNS4DNHKK=dkhXZ330A@mail.gmail.com>
References: <CAJbvKNrQV4b3z30ZqcasUHxW_LdLXtyHNS4DNHKK=dkhXZ330A@mail.gmail.com>
Message-ID: <a327781c-2174-7a33-4017-a2ab5815a52b@spatialys.com>

Denis,

if the view angle is off-nadir, you generally need to use the -to 
RPC_DEM= option with a DEM covering the area of interest (and make sure 
the values it contains are WGS 84 ellipsoidal elevations) to get 
accurate results.

Even

Le 18/05/2021 ? 22:50, Denis Rykov a ?crit?:
> Hi,
>
> I have a GeoTIF file and file with RPC information next to it (*.txt). 
> Is there a way to transform this raster to a normal geotiff without 
> displacement (with geotransform inside) or is it fundamentally impossible?
> I've tried to achieve it with gdalwarp but in this case the result of 
> the transformation has about 5 meters (10 pixels) x-displacement (I 
> use QGIS to visualize it).
>
> Denis
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210518/9655caf0/attachment.html>

From rykovd at gmail.com  Tue May 18 14:26:46 2021
From: rykovd at gmail.com (Denis Rykov)
Date: Tue, 18 May 2021 23:26:46 +0200
Subject: [gdal-dev] RPC to geotransform converting
In-Reply-To: <a327781c-2174-7a33-4017-a2ab5815a52b@spatialys.com>
References: <CAJbvKNrQV4b3z30ZqcasUHxW_LdLXtyHNS4DNHKK=dkhXZ330A@mail.gmail.com>
 <a327781c-2174-7a33-4017-a2ab5815a52b@spatialys.com>
Message-ID: <CAJbvKNoirGGRD5rc-eiaAm03Lq6SYpwBtphOd6jKXHMtz_K-Pw@mail.gmail.com>

Thanks!

On Tue, May 18, 2021 at 10:57 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Denis,
>
> if the view angle is off-nadir, you generally need to use the -to RPC_DEM=
> option with a DEM covering the area of interest (and make sure the values
> it contains are WGS 84 ellipsoidal elevations) to get accurate results.
>
> Even
> Le 18/05/2021 ? 22:50, Denis Rykov a ?crit :
>
> Hi,
>
> I have a GeoTIF file and file with RPC information next to it (*.txt). Is
> there a way to transform this raster to a normal geotiff without
> displacement (with geotransform inside) or is it fundamentally impossible?
> I've tried to achieve it with gdalwarp but in this case the result of the
> transformation has about 5 meters (10 pixels) x-displacement (I use QGIS to
> visualize it).
>
> Denis
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210518/bf3827bf/attachment.html>

From rykovd at gmail.com  Wed May 19 02:54:05 2021
From: rykovd at gmail.com (Denis Rykov)
Date: Wed, 19 May 2021 11:54:05 +0200
Subject: [gdal-dev] RPC to geotransform converting
In-Reply-To: <CAJbvKNoirGGRD5rc-eiaAm03Lq6SYpwBtphOd6jKXHMtz_K-Pw@mail.gmail.com>
References: <CAJbvKNrQV4b3z30ZqcasUHxW_LdLXtyHNS4DNHKK=dkhXZ330A@mail.gmail.com>
 <a327781c-2174-7a33-4017-a2ab5815a52b@spatialys.com>
 <CAJbvKNoirGGRD5rc-eiaAm03Lq6SYpwBtphOd6jKXHMtz_K-Pw@mail.gmail.com>
Message-ID: <CAJbvKNoNgBbESYswAMvASuQgTEzoxzya3h8_Rd1r0ExtsT5LzA@mail.gmail.com>

Finally I solved the issue by adding "-to RPC_HEIGHT=XXX" to gdalwarp.
It seems gdalwarp doesn't take this parameter into account even if it is
presented in the RPC *.txt file.
Should I file the ticket or was it done by purpose?

On Tue, May 18, 2021 at 11:26 PM Denis Rykov <rykovd at gmail.com> wrote:

> Thanks!
>
> On Tue, May 18, 2021 at 10:57 PM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Denis,
>>
>> if the view angle is off-nadir, you generally need to use the -to
>> RPC_DEM= option with a DEM covering the area of interest (and make sure the
>> values it contains are WGS 84 ellipsoidal elevations) to get accurate
>> results.
>>
>> Even
>> Le 18/05/2021 ? 22:50, Denis Rykov a ?crit :
>>
>> Hi,
>>
>> I have a GeoTIF file and file with RPC information next to it (*.txt). Is
>> there a way to transform this raster to a normal geotiff without
>> displacement (with geotransform inside) or is it fundamentally impossible?
>> I've tried to achieve it with gdalwarp but in this case the result of the
>> transformation has about 5 meters (10 pixels) x-displacement (I use QGIS to
>> visualize it).
>>
>> Denis
>>
>> _______________________________________________
>> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> -- http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210519/c10735cd/attachment.html>

From even.rouault at spatialys.com  Wed May 19 03:48:48 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 19 May 2021 12:48:48 +0200
Subject: [gdal-dev] RPC to geotransform converting
In-Reply-To: <CAJbvKNoNgBbESYswAMvASuQgTEzoxzya3h8_Rd1r0ExtsT5LzA@mail.gmail.com>
References: <CAJbvKNrQV4b3z30ZqcasUHxW_LdLXtyHNS4DNHKK=dkhXZ330A@mail.gmail.com>
 <a327781c-2174-7a33-4017-a2ab5815a52b@spatialys.com>
 <CAJbvKNoirGGRD5rc-eiaAm03Lq6SYpwBtphOd6jKXHMtz_K-Pw@mail.gmail.com>
 <CAJbvKNoNgBbESYswAMvASuQgTEzoxzya3h8_Rd1r0ExtsT5LzA@mail.gmail.com>
Message-ID: <3f090a0c-5f0d-6110-99f2-5fc426f4aaf0@spatialys.com>

You mean the HEIGHT_OFFSET parameter in the RPC ? Yes, that can 
generally be used as a first-order correction if you don't use a DEM. 
I'm not sure using it vs not-using it has been a deliberate choice. One 
could say that with the current behavior people know that something is 
wrong and must thus set something additional. There was a related 
discussion in https://github.com/qgis/QGIS/pull/36385. A non breaking 
change would be to make -to RPC_HEIGHT=HEIGHT_OFFSET work

Le 19/05/2021 ? 11:54, Denis Rykov a ?crit?:
> Finally I solved the issue by adding "-to RPC_HEIGHT=XXX" to gdalwarp.
> It seems gdalwarp doesn't take this parameter into account even if it 
> is presented in the RPC *.txt file.
> Should I file the ticket or was it done by purpose?
>
> On Tue, May 18, 2021 at 11:26 PM Denis Rykov <rykovd at gmail.com 
> <mailto:rykovd at gmail.com>> wrote:
>
>     Thanks!
>
>     On Tue, May 18, 2021 at 10:57 PM Even Rouault
>     <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>>
>     wrote:
>
>         Denis,
>
>         if the view angle is off-nadir, you generally need to use the
>         -to RPC_DEM= option with a DEM covering the area of interest
>         (and make sure the values it contains are WGS 84 ellipsoidal
>         elevations) to get accurate results.
>
>         Even
>
>         Le 18/05/2021 ? 22:50, Denis Rykov a ?crit?:
>>         Hi,
>>
>>         I have a GeoTIF file and file with RPC information next to it
>>         (*.txt). Is there a way to transform this raster to a normal
>>         geotiff without displacement (with geotransform inside) or is
>>         it fundamentally impossible?
>>         I've tried to achieve it with gdalwarp but in this case the
>>         result of the transformation has about 5 meters (10 pixels)
>>         x-displacement (I use QGIS to visualize it).
>>
>>         Denis
>>
>>         _______________________________________________
>>         gdal-dev mailing list
>>         gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>>         https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>         -- 
>         http://www.spatialys.com  <http://www.spatialys.com>
>         My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210519/6a894bf9/attachment-0001.html>

From even.rouault at spatialys.com  Wed May 19 05:46:02 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 19 May 2021 14:46:02 +0200
Subject: [gdal-dev] Call for discussion on RFC 83: guidelines for the use of
 GDAL project sponsorship
Message-ID: <8d374749-c302-6b8d-d97a-a705f2102fcb@spatialys.com>

Hi,

in parallel to finalizing the last steps to get the relationship with 
NumFOCUS fully operational, here's a new RFC for your consideration to 
give guidelines on how we can use the sponsorship funds, who can apply, 
etc. Input welcome.

https://github.com/OSGeo/gdal/pull/3855

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From arista.rob at gmail.com  Wed May 19 07:08:10 2021
From: arista.rob at gmail.com (Roberto Arista)
Date: Wed, 19 May 2021 16:08:10 +0200
Subject: [gdal-dev] A Swift wrapper for GDAL
Message-ID: <69918D15-A02F-4308-86CC-BBDA98325115@gmail.com>

Dear gdal-dev list,
I would like to use the GDAL library for a macOS project using the Swift language. Wrapping a C++ library in Swift is not straightforward at all, and I could not find a satisfactory solution so far.

There are a few projects on GitHub:
> https://github.com/optionu/Humboldt
> https://github.com/ranveerm/SwiftGDALProject
but they are either incomplete or outdated

So, I'll probably have to write the wrapper myself. Before even planning the work, I have a few questions for the list. My focus will be on the OGR module of the library.
- From what I've read so far, wrapping a C library in Swift is way easier than working with C++. I've seen from the docs that GDAL has both C and C++ APIs. Besides the difference between the two languages, do the APIs offer different functionalities? 
- Is anyone willing to join forces to work on a GDAL wrapper for Swift? Or, is any expert developer willing to help me writing the wrapper? Of course, I am going to release the code with an open-source license.

Best
???
Roberto Arista
?_?
???


From even.rouault at spatialys.com  Wed May 19 07:59:25 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 19 May 2021 16:59:25 +0200
Subject: [gdal-dev] A Swift wrapper for GDAL
In-Reply-To: <69918D15-A02F-4308-86CC-BBDA98325115@gmail.com>
References: <69918D15-A02F-4308-86CC-BBDA98325115@gmail.com>
Message-ID: <05694cf9-cec0-4d52-6709-c7e1dffe7c10@spatialys.com>

Roberto,

I can't answer on the Swift specific part, but yes, the C API is what is 
commonly used to create bindings to other languages. What is uniquely 
found in the C++ one is very advanced things that most people rarely need.

Even

Le 19/05/2021 ? 16:08, Roberto Arista a ?crit?:
> Dear gdal-dev list,
> I would like to use the GDAL library for a macOS project using the Swift language. Wrapping a C++ library in Swift is not straightforward at all, and I could not find a satisfactory solution so far.
>
> There are a few projects on GitHub:
>> https://github.com/optionu/Humboldt
>> https://github.com/ranveerm/SwiftGDALProject
> but they are either incomplete or outdated
>
> So, I'll probably have to write the wrapper myself. Before even planning the work, I have a few questions for the list. My focus will be on the OGR module of the library.
> - From what I've read so far, wrapping a C library in Swift is way easier than working with C++. I've seen from the docs that GDAL has both C and C++ APIs. Besides the difference between the two languages, do the APIs offer different functionalities?
> - Is anyone willing to join forces to work on a GDAL wrapper for Swift? Or, is any expert developer willing to help me writing the wrapper? Of course, I am going to release the code with an open-source license.
>
> Best
> ???
> Roberto Arista
> ?_?
> ???
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From mateusz at loskot.net  Wed May 19 08:19:08 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 19 May 2021 17:19:08 +0200
Subject: [gdal-dev] Call for discussion on RFC 83: guidelines for the
 use of GDAL project sponsorship
In-Reply-To: <8d374749-c302-6b8d-d97a-a705f2102fcb@spatialys.com>
References: <8d374749-c302-6b8d-d97a-a705f2102fcb@spatialys.com>
Message-ID: <CABUeae-zoUqVv6NkxhJmjZ0-bOqbg34n_XQ4_R0ZRzEqMKUO1Q@mail.gmail.com>

On Wed, 19 May 2021 at 14:46, Even Rouault <even.rouault at spatialys.com> wrote:
> [...] Input welcome.
> https://github.com/OSGeo/gdal/pull/3855

I left some as the PR comments.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From jmckenna at gatewaygeomatics.com  Wed May 19 08:45:53 2021
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 19 May 2021 12:45:53 -0300
Subject: [gdal-dev] Call for discussion on RFC 83: guidelines for the
 use of GDAL project sponsorship
In-Reply-To: <CABUeae-zoUqVv6NkxhJmjZ0-bOqbg34n_XQ4_R0ZRzEqMKUO1Q@mail.gmail.com>
References: <8d374749-c302-6b8d-d97a-a705f2102fcb@spatialys.com>
 <CABUeae-zoUqVv6NkxhJmjZ0-bOqbg34n_XQ4_R0ZRzEqMKUO1Q@mail.gmail.com>
Message-ID: <f95576c4-30d2-b273-cbba-98fc27e59c62@gatewaygeomatics.com>

On 2021-05-19 12:19 p.m., Mateusz Loskot wrote:
> On Wed, 19 May 2021 at 14:46, Even Rouault <even.rouault at spatialys.com> wrote:
>> [...] Input welcome.
>> https://github.com/OSGeo/gdal/pull/3855
> 
> I left some as the PR comments.
> 

Good document.  My only comment is that this document should also define 
how the PSC decisions mentioned are impacted by the new GDAL Advisory 
Board. (maybe adding a one line summary "note:" to explain this in 
writing here, even if you think 'it is explained in other doc')

Thanks,

-jeff




-- 
Jeff McKenna
GatewayGeo: Developers of MS4W, MapServer Consulting and Training
co-founder of FOSS4G
http://gatewaygeo.com/

From osgeo at gbp.gaige.net  Wed May 19 09:38:09 2021
From: osgeo at gbp.gaige.net (Gaige B. Paulsen)
Date: Wed, 19 May 2021 12:38:09 -0400
Subject: [gdal-dev] A Swift wrapper for GDAL
In-Reply-To: <mailman.44462.1621440791.26371.gdal-dev@lists.osgeo.org>
References: <mailman.44462.1621440791.26371.gdal-dev@lists.osgeo.org>
Message-ID: <1afe04a614c52c66ac91a43469d99682@gbp.gaige.net>

I?ve been using GDAL on macOS for years (and iOS as well, both mostly 
with Objective-C) using C bindings and some Objective-C helpers that 
I?ve put together over time. The C bindings are suitable for use with 
Objective-C and shouldn?t be difficult to use as a bridge to Swift.

Also, if necessary, wrapping a C++ library in Objective-C(++) is 
relatively simple and I?ve found that effective where I needed to use 
the more advanced features (as Even points out, this has been very 
infrequent).

I?m not sure how much time I have to commit to assisting with the swift 
wrapper, but I?m happy to act as a sounding board and help where I have 
time.

-Gaige

On 2021-05-19 12:13, gdal-dev-owner at lists.osgeo.org wrote:
> Your message has been rejected, probably because you are not
> subscribed to the mailing list and the list's policy is to prohibit
> non-members from posting to it.  If you think that your messages are
> being rejected in error, contact the mailing list owner at
> gdal-dev-owner at lists.osgeo.org.

From even.rouault at spatialys.com  Wed May 19 12:00:52 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 19 May 2021 21:00:52 +0200
Subject: [gdal-dev] Freenode IRC taken over(was Fwd: [SAC] [Hosting] OSUOSL
 IRC channels moving to irc.libera.chat)
In-Reply-To: <CAORfjXSTHGph0i6nsYEPM2RYrBi1JWuO=OFa374DymGK3wR8cA@mail.gmail.com>
References: <CAORfjXSTHGph0i6nsYEPM2RYrBi1JWuO=OFa374DymGK3wR8cA@mail.gmail.com>
Message-ID: <03eea247-e1cc-d1b7-5ac8-c72d42f57056@spatialys.com>

Hi,

See below about Freenode IRC having been taken over (or considered as 
such by most Freenode admins), which affects our existing #gdal channel.

What should we do:

- give up with IRC at all, and just use the Slack channel ? Would make 
things more simple

- migrate to Libera Chat ?

- something else ?

Even


-------- Message transf?r? --------
Sujet?: 	[SAC] [Hosting] OSUOSL IRC channels moving to irc.libera.chat
Date?: 	Wed, 19 May 2021 11:40:34 -0700
De?: 	Lance Albertson <lance at osuosl.org>
R?pondre ??: 	System Administration Committee Discussion/OSGeo 
<sac at lists.osgeo.org>
Pour?: 	hosting at osuosl.org



As many of you might have noticed, there has been some shifting around 
with the Freenode IRC network in the past few days [1][2]. This has 
resulted in a number of Freenode staff members resigning and starting a 
new IRC network.

Considering the future status of Freenode and given the track record of 
the folks involved with the new network called Libera Chat [3], we've 
decided that we're moving #osuosl (and any other related channels) over 
to irc.libera.chat.

We'll keep the Freenode channels alive for a little while longer but 
intend to close them down within a month?or so. For those interested, we 
are considering spinning up a Matrix server at some point to provide a 
more rich chat experience but for now we still use IRC for most of our 
communication with FOSS projects.

If you have any questions or concerns, please let us know otherwise 
we'll see you on Libera Chat in #osuosl!

Thanks-

[1] https://kline.sh <https://kline.sh>
[2] https://lwn.net/Articles/856543/ <https://lwn.net/Articles/856543/>
[3] https://libera.chat/ <https://libera.chat/>

-- 
Lance Albertson
Director
Oregon State University | Open Source Lab
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210519/ffd0a602/attachment.html>
-------------- next part --------------
_______________________________________________
Hosting mailing list
Hosting at osuosl.org
https://lists.osuosl.org/mailman/listinfo/hosting

-------------- next part --------------
_______________________________________________
Sac mailing list
Sac at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/sac


From mateusz at loskot.net  Wed May 19 12:11:11 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 19 May 2021 21:11:11 +0200
Subject: [gdal-dev] Freenode IRC taken over(was Fwd: [SAC] [Hosting]
 OSUOSL IRC channels moving to irc.libera.chat)
In-Reply-To: <03eea247-e1cc-d1b7-5ac8-c72d42f57056@spatialys.com>
References: <CAORfjXSTHGph0i6nsYEPM2RYrBi1JWuO=OFa374DymGK3wR8cA@mail.gmail.com>
 <03eea247-e1cc-d1b7-5ac8-c72d42f57056@spatialys.com>
Message-ID: <CABUeae9PkK2aZ1GfqZVcze6Hhq+D63zXoZOeC4xrUxq6WiepKA@mail.gmail.com>

On Wed, 19 May 2021 at 21:01, Even Rouault <even.rouault at spatialys.com>
wrote:

> See below about Freenode IRC having been taken over (or considered as such
> by most Freenode admins), which affects our existing #gdal channel.
>
> What should we do:
>
> - give up with IRC at all, and just use the Slack channel ? Would make
> things more simple
>
> - migrate to Libera Chat ?
>
> - something else ?
>

BTW, since there are some uses of the Matrix at OSGeo,
this may be of interest
https://matrix.org/blog/2020/12/07/gitter-now-speaks-matrix

FYI, after a few bumps
(I was getting "Sending email failed, sorry! Registration aborted.")
the nick registration now works at libera.chat
So, just in case, for smoother operations,
you may want to register your Freenode's nick
https://libera.chat/guides/registration

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210519/8e3679e6/attachment.html>

From pi_ml at sourcepole.com  Wed May 19 14:18:10 2021
From: pi_ml at sourcepole.com (Pirmin Kalberer)
Date: Wed, 19 May 2021 23:18:10 +0200
Subject: [gdal-dev] Freenode IRC taken over(was Fwd: [SAC] [Hosting]
 OSUOSL IRC channels moving to irc.libera.chat)
In-Reply-To: <03eea247-e1cc-d1b7-5ac8-c72d42f57056@spatialys.com>
References: <CAORfjXSTHGph0i6nsYEPM2RYrBi1JWuO=OFa374DymGK3wR8cA@mail.gmail.com>
 <03eea247-e1cc-d1b7-5ac8-c72d42f57056@spatialys.com>
Message-ID: <c67f7e31-6d54-ee63-cf71-e50693662e4f@sourcepole.com>

Hi,

On 19.05.21 21:00, Even Rouault wrote:
> 
> See below about Freenode IRC having been taken over (or considered as 
> such by most Freenode admins), which affects our existing #gdal channel.
> 
> What should we do:
> 
> - give up with IRC at all, and just use the Slack channel ? Would make 
> things more simple
> 
> - migrate to Libera Chat ?
> 
> - something else ?
> 

Mozilla / Rust made a thorough evaluation of a modern IRC replacement 
some time ago and has chosen Matrix.
Their announcement: 
https://discourse.mozilla.org/t/synchronous-messaging-at-mozilla-the-decision/50620

Today's most common client is https://app.element.io/ AFAIK, and I'm 
quite happy with it.

Regards
Pirmin

-- 
Pirmin Kalberer - @implgeo
Sourcepole - http://www.sourcepole.com

From jdaniel at etresoft.com  Wed May 19 15:44:22 2021
From: jdaniel at etresoft.com (John Daniel)
Date: Wed, 19 May 2021 22:44:22 +0000
Subject: [gdal-dev] A Swift wrapper for GDAL
In-Reply-To: <69918D15-A02F-4308-86CC-BBDA98325115@gmail.com>
References: <69918D15-A02F-4308-86CC-BBDA98325115@gmail.com>
Message-ID: <EE064D24-AABC-430C-AC1F-AE5ADA637AED@etresoft.com>

Hello Robert,
I?ve looked at this myself a few times. Here are some interesting points:

GDAL already supports SWIG bindings. If you are really into Swift, then you could potentially add Swift to SWIG and get support that way.

I would not recommend using the C interface. The C interface is already a wrapper around C++. The few times I?ve tried it, I found that some C++ inevitably leaked out. This isn?t a big problem with modern C compilers. But I think it could potentially cause a lot of problems for the Swift C importer. I really don?t think this would yield a high-quality Swift interface. Swift fans would probably not be happy with it. This might be the easiest path to try, however.

I agree with Gaige that wrapping C++ code in Objective-C++ is relatively simple. At least, it is simple in concept. It is quite tedious in practice. Each C++ class requires 3 files: a public header, a private header for C++, and an Objective-C++ implementation. This, along with any required Swift customizations in the bridging header, would give you the highest-quality interface. But it is a ton of tedious, albeit simple, work.

I have an abandoned side project that uses XQuery to parse the GDAL doxygen XML and emit stub Objective-C++ file triplets for all GDAL classes. They are actually a bit more than stubs, they can pass the parameters through in a method call. I haven?t touched it in a couple of years. It is certainly incomplete. And it's in XQuery, <evil laugh>. But I?ll be happy to send it to you if you want.

I think a bigger problem here might be Swift itself. There is a strong social component to the language and its adoption. As a consequence, the language is in a constant state of flux. And this is one of the reasons why I think using the C interface would not be popular in the Swift community. GDAL itself is written in an ancient style of C++. It is radically different than a modern C++ project, such as Boost. If you are into OGR, I recommend taking a look at Boost Geometry to an example of what GDAL written in modern C++ could be like. But Swift isn?t like C++. You can?t use an ancient version of Swift. Modern Xcode will refuse to even look at it. The more you write in Swift, the more you expose yourself to breaking changes in the language itself.

I?m not trying to dissuade you here. I?m just suggesting that you be aware of some of these issues. 

My recommendation would be a new, Objective-C++ bridge interface that provides a greatly simplified, high-level interface to any required GDAL functionality. This is the approach I am taking with some SwiftUI apps I have under development. But this really isn?t a collaborative approach. Each app would have its own, unique needs.

John Daniel
Etresoft, Inc.

> On May 19, 2021, at 10:08 AM, Roberto Arista <arista.rob at gmail.com> wrote:
> 
> Dear gdal-dev list,
> I would like to use the GDAL library for a macOS project using the Swift language. Wrapping a C++ library in Swift is not straightforward at all, and I could not find a satisfactory solution so far.
> 
> There are a few projects on GitHub:
>> https://github.com/optionu/Humboldt
>> https://github.com/ranveerm/SwiftGDALProject
> but they are either incomplete or outdated
> 
> So, I'll probably have to write the wrapper myself. Before even planning the work, I have a few questions for the list. My focus will be on the OGR module of the library.
> - From what I've read so far, wrapping a C library in Swift is way easier than working with C++. I've seen from the docs that GDAL has both C and C++ APIs. Besides the difference between the two languages, do the APIs offer different functionalities? 
> - Is anyone willing to join forces to work on a GDAL wrapper for Swift? Or, is any expert developer willing to help me writing the wrapper? Of course, I am going to release the code with an open-source license.
> 
> Best
> ???
> Roberto Arista
> ?_?
> ???
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From gdt at lexort.com  Wed May 19 16:20:45 2021
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 19 May 2021 19:20:45 -0400
Subject: [gdal-dev] Freenode IRC taken over(was Fwd: [SAC] [Hosting]
 OSUOSL IRC channels moving to irc.libera.chat)
In-Reply-To: <03eea247-e1cc-d1b7-5ac8-c72d42f57056@spatialys.com> (Even
 Rouault's message of "Wed, 19 May 2021 21:00:52 +0200")
References: <CAORfjXSTHGph0i6nsYEPM2RYrBi1JWuO=OFa374DymGK3wR8cA@mail.gmail.com>
 <03eea247-e1cc-d1b7-5ac8-c72d42f57056@spatialys.com>
Message-ID: <rmiwnru8g4y.fsf@s1.lexort.com>


Even Rouault <even.rouault at spatialys.com> writes:

> See below about Freenode IRC having been taken over (or considered as
> such by most Freenode admins), which affects our existing #gdal
> channel.

gdal and everybody else :-(

> What should we do:
>
> - give up with IRC at all, and just use the Slack channel ? Would make
> things more simple

Definitely not slack.  That is not run by a free software nonprofit and
is not free software.  Perhaps more concerningly, it is centralized --
gdal/osgeo can't host their own slack server.  And using things like
slack asks users to enter into a contract with a company that isn't a
501(c)3 (US term) or equivalent.

> - migrate to Libera Chat ?

In the short term, freenode->libera is sort of maintaining things as
they are.

> - something else ?

I'm +0.8 on matrix.   Taking off 0.2  because the clients seem to be
javascript running on some sort of chromium, but it seems to be all free
software.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210519/926d0ac5/attachment.sig>

From strk at kbt.io  Thu May 20 02:02:06 2021
From: strk at kbt.io (Sandro Santilli)
Date: Thu, 20 May 2021 11:02:06 +0200
Subject: [gdal-dev] Freenode IRC taken over(was Fwd: [SAC] [Hosting]
 OSUOSL IRC channels moving to irc.libera.chat)
In-Reply-To: <03eea247-e1cc-d1b7-5ac8-c72d42f57056@spatialys.com>
References: <CAORfjXSTHGph0i6nsYEPM2RYrBi1JWuO=OFa374DymGK3wR8cA@mail.gmail.com>
 <03eea247-e1cc-d1b7-5ac8-c72d42f57056@spatialys.com>
Message-ID: <20210520090206.GB2950@c19>

On Wed, May 19, 2021 at 09:00:52PM +0200, Even Rouault wrote:
> Hi,
> 
> See below about Freenode IRC having been taken over (or considered as such
> by most Freenode admins), which affects our existing #gdal channel.
> 
> What should we do:
> 
> - give up with IRC at all, and just use the Slack channel ? Would make
> things more simple
> 
> - migrate to Libera Chat ?
> 
> - something else ?

In case you missed it, OSGeo is now hosting a Matrix homeserver:
https://wiki.osgeo.org/wiki/SAC:MatrixSynapse

Matrix is an open protocol for instant messaging based on HTTP,
supports bridges to different IM systems (including IRC and Slack).

The OSGeo homeserver allows you to authenticate yourself using
your existing OSGeo account.

--strk;

From momtchil at momtchev.com  Thu May 20 03:06:32 2021
From: momtchil at momtchev.com (Momtchil Momtchev)
Date: Thu, 20 May 2021 12:06:32 +0200
Subject: [gdal-dev] complete > 1 when using a progress callback with
 Dataset::BuildOverviews
Message-ID: <6a3037e0-f8b1-67c4-caeb-f1cbfd02ca75@momtchev.com>


 ??? Hello,


 ??? Sometimes, I am getting a value of 0 and sometimes slightly over 1 
(like 1.005) for /complete/ in the progress callback of 
/Dataset::BuildOverviews/, should I try to isolate it or should I just 
consider it a quirk and ignore it?

 ??? I would have ignored it, but the other functions fit perfectly in 
(0..1] so I decided to ask ?


-- 
Momtchil Momtchev <momtchil at momtchev.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210520/4252bb5c/attachment.html>

From momtchil at momtchev.com  Thu May 20 03:12:42 2021
From: momtchil at momtchev.com (Momtchil Momtchev)
Date: Thu, 20 May 2021 12:12:42 +0200
Subject: [gdal-dev] complete > 1 when using a progress callback with
 Dataset::BuildOverviews
In-Reply-To: <6a3037e0-f8b1-67c4-caeb-f1cbfd02ca75@momtchev.com>
References: <6a3037e0-f8b1-67c4-caeb-f1cbfd02ca75@momtchev.com>
Message-ID: <0f96cf22-d962-889a-3ab2-81436bc553b0@momtchev.com>


 ??? In fact, it never happens with 3.3.0/3.2.3, ignore it


On 20/05/2021 12:06, Momtchil Momtchev wrote:
>
>
> ??? Hello,
>
>
> ??? Sometimes, I am getting a value of 0 and sometimes slightly over 1 
> (like 1.005) for /complete/ in the progress callback of 
> /Dataset::BuildOverviews/, should I try to isolate it or should I just 
> consider it a quirk and ignore it?
>
> ??? I would have ignored it, but the other functions fit perfectly in 
> (0..1] so I decided to ask ?
>
>
> -- 
> Momtchil Momtchev<momtchil at momtchev.com>

-- 
Momtchil Momtchev <momtchil at momtchev.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210520/8c7f69c5/attachment.html>

From sandrine.edouard at canada.ca  Thu May 20 08:21:25 2021
From: sandrine.edouard at canada.ca (Edouard, Sandrine (EC))
Date: Thu, 20 May 2021 15:21:25 +0000
Subject: [gdal-dev] GDAL on Windows/Mac : issue decoding GRIB2 files
 compressed with the JPEG2000 option
Message-ID: <mailman.4.1621524094.26368.gdal-dev@lists.osgeo.org>

Dear GDAL Users list members,

We discovered that on Windows and Mac, some versions of GDAL do not properly decode GRIB2 files if the data is compressed with the JPEG2000 option.

Sample of impacted data: https://collaboration.cmc.ec.gc.ca/cmc/cmos/gdal_Jpeg2000/CMC_RDPA_APCP-024-0700cutoff_SFC_0_ps10km_2021041106_000.grib2 .

When GDAL decodes the data, the values are orders of magnitude off (values around 10^4 instead of 10^2 for the APCP parameter, precipitation analysis). The problem does not happen on the Linux platform neither when using other tools to read the data (such as wgrib2).

Have there been any changes to the JPEG2000 driver (JasPer) of GDAL on Windows and Mac in a previous update ?

Ref: https://github.com/OSGeo/gdal/issues/3860

Thanks a lot.

Sandrine Edouard
National coordinator, Open Data Access
Canadian Centre for Meteorological and Environmental Prediction Operations
Environment and Climate Change Canada, Government of Canada

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210520/ee5bbabf/attachment.html>

From arista.rob at gmail.com  Thu May 20 08:32:42 2021
From: arista.rob at gmail.com (Roberto Arista)
Date: Thu, 20 May 2021 17:32:42 +0200
Subject: [gdal-dev] A Swift wrapper for GDAL
In-Reply-To: <EE064D24-AABC-430C-AC1F-AE5ADA637AED@etresoft.com>
References: <69918D15-A02F-4308-86CC-BBDA98325115@gmail.com>
 <EE064D24-AABC-430C-AC1F-AE5ADA637AED@etresoft.com>
Message-ID: <D07D9723-8FE7-4E8D-80F3-1F3D4EA6CCE7@gmail.com>


@Evan
> the C API is what is commonly used to create bindings to other languages
Good to know, thanks!

@Gaige
> Also, if necessary, wrapping a C++ library in Objective-C(++) is relatively simple and I?ve found that effective where I needed to use the more advanced features (as Even points out, this has been very infrequent).
I have almost no experience in writing ObjC, the only experience I have is through the python PyObjC wrapper. I don?t really know if it makes sense for my project.

> I?m not sure how much time I have to commit to assisting with the swift wrapper, but I?m happy to act as a sounding board and help where I have time.
Thanks, I appreciate it

@John: thanks for sharing your experience!
> I agree with Gaige that wrapping C++ code in Objective-C++ is relatively simple. At least, it is simple in concept. It is quite tedious in practice. Each C++ class requires 3 files: a public header, a private header for C++, and an Objective-C++ implementation. This, along with any required Swift customizations in the bridging header, would give you the highest-quality interface. But it is a ton of tedious, albeit simple, work.
Considered my level of experience with this technological stack, tedious and simple could work. But I first need to understand if it is worth the effort.

> I have an abandoned side project that uses XQuery to parse the GDAL doxygen XML and emit stub Objective-C++ file triplets for all GDAL classes. They are actually a bit more than stubs, they can pass the parameters through in a method call. I haven?t touched it in a couple of years. It is certainly incomplete. And it's in XQuery, <evil laugh>. But I?ll be happy to send it to you if you want.

That would be great, so I could get a better sense of how this double wrapper should work.

Best
???
Roberto Arista
?_?
???
Mobile: +39 366 4537413
???

> On 20 May 2021, at 00:44, John Daniel <jdaniel at etresoft.com> wrote:
> 
> Hello Robert,
> I?ve looked at this myself a few times. Here are some interesting points:
> 
> GDAL already supports SWIG bindings. If you are really into Swift, then you could potentially add Swift to SWIG and get support that way.
> 
> I would not recommend using the C interface. The C interface is already a wrapper around C++. The few times I?ve tried it, I found that some C++ inevitably leaked out. This isn?t a big problem with modern C compilers. But I think it could potentially cause a lot of problems for the Swift C importer. I really don?t think this would yield a high-quality Swift interface. Swift fans would probably not be happy with it. This might be the easiest path to try, however.
> 
> I agree with Gaige that wrapping C++ code in Objective-C++ is relatively simple. At least, it is simple in concept. It is quite tedious in practice. Each C++ class requires 3 files: a public header, a private header for C++, and an Objective-C++ implementation. This, along with any required Swift customizations in the bridging header, would give you the highest-quality interface. But it is a ton of tedious, albeit simple, work.
> 
> I have an abandoned side project that uses XQuery to parse the GDAL doxygen XML and emit stub Objective-C++ file triplets for all GDAL classes. They are actually a bit more than stubs, they can pass the parameters through in a method call. I haven?t touched it in a couple of years. It is certainly incomplete. And it's in XQuery, <evil laugh>. But I?ll be happy to send it to you if you want.
> 
> I think a bigger problem here might be Swift itself. There is a strong social component to the language and its adoption. As a consequence, the language is in a constant state of flux. And this is one of the reasons why I think using the C interface would not be popular in the Swift community. GDAL itself is written in an ancient style of C++. It is radically different than a modern C++ project, such as Boost. If you are into OGR, I recommend taking a look at Boost Geometry to an example of what GDAL written in modern C++ could be like. But Swift isn?t like C++. You can?t use an ancient version of Swift. Modern Xcode will refuse to even look at it. The more you write in Swift, the more you expose yourself to breaking changes in the language itself.
> 
> I?m not trying to dissuade you here. I?m just suggesting that you be aware of some of these issues. 
> 
> My recommendation would be a new, Objective-C++ bridge interface that provides a greatly simplified, high-level interface to any required GDAL functionality. This is the approach I am taking with some SwiftUI apps I have under development. But this really isn?t a collaborative approach. Each app would have its own, unique needs.
> 
> John Daniel
> Etresoft, Inc.
> 
>> On May 19, 2021, at 10:08 AM, Roberto Arista <arista.rob at gmail.com> wrote:
>> 
>> Dear gdal-dev list,
>> I would like to use the GDAL library for a macOS project using the Swift language. Wrapping a C++ library in Swift is not straightforward at all, and I could not find a satisfactory solution so far.
>> 
>> There are a few projects on GitHub:
>>> https://github.com/optionu/Humboldt
>>> https://github.com/ranveerm/SwiftGDALProject
>> but they are either incomplete or outdated
>> 
>> So, I'll probably have to write the wrapper myself. Before even planning the work, I have a few questions for the list. My focus will be on the OGR module of the library.
>> - From what I've read so far, wrapping a C library in Swift is way easier than working with C++. I've seen from the docs that GDAL has both C and C++ APIs. Besides the difference between the two languages, do the APIs offer different functionalities? 
>> - Is anyone willing to join forces to work on a GDAL wrapper for Swift? Or, is any expert developer willing to help me writing the wrapper? Of course, I am going to release the code with an open-source license.
>> 
>> Best
>> ???
>> Roberto Arista
>> ?_?
>> ???
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


From mateusz at loskot.net  Thu May 20 10:04:29 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 20 May 2021 19:04:29 +0200
Subject: [gdal-dev] Freenode IRC taken over(was Fwd: [SAC] [Hosting]
 OSUOSL IRC channels moving to irc.libera.chat)
In-Reply-To: <20210520090206.GB2950@c19>
References: <CAORfjXSTHGph0i6nsYEPM2RYrBi1JWuO=OFa374DymGK3wR8cA@mail.gmail.com>
 <03eea247-e1cc-d1b7-5ac8-c72d42f57056@spatialys.com>
 <20210520090206.GB2950@c19>
Message-ID: <CABUeae_ukttNke9VD9HX_atqVBh4BbJP7HksiTgqT=SZpp1Wfw@mail.gmail.com>

On Thu, 20 May 2021 at 11:09, Sandro Santilli <strk at kbt.io> wrote:
> On Wed, May 19, 2021 at 09:00:52PM +0200, Even Rouault wrote:
> >
> >
> > - something else ?
>
> In case you missed it, OSGeo is now hosting a Matrix homeserver:
> https://wiki.osgeo.org/wiki/SAC:MatrixSynapse
>
> Matrix is an open protocol for instant messaging based on HTTP,
> supports bridges to different IM systems (including IRC and Slack).

Those of us who used to use Matrix,
stopped using it,
perhaps deactivated their accounts,
then want to use it again,
perhaps with the same username,
then don't bang your head at the desk in frustration
when the "computer says no!"

Here is response I have received from the Matrix support team
after learning to get in touch with them about the issue [1]

"""
Hi Mateusz
Unfortunately it is impossible to verify the identity of deleted users.
Per the matrix.org Privacy Notice (
https://matrix.org/legal/privacy-notice#2211-account-and-profile-information
):
"Your username is stored indefinitely to avoid account recycling."
To protect the security and privacy of our users we never reactivate
or release deleted usernames.
We recommend you create a new account using a different Matrix ID.
Matrix.org Support
"""

[1] https://github.com/matrix-org/synapse/pull/7908#issuecomment-708338470

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From rdmailings at duif.net  Thu May 20 11:07:12 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 20 May 2021 20:07:12 +0200
Subject: [gdal-dev] Freenode IRC taken over(was Fwd: [SAC] [Hosting]
 OSUOSL IRC channels moving to irc.libera.chat)
In-Reply-To: <CABUeae_ukttNke9VD9HX_atqVBh4BbJP7HksiTgqT=SZpp1Wfw@mail.gmail.com>
References: <CAORfjXSTHGph0i6nsYEPM2RYrBi1JWuO=OFa374DymGK3wR8cA@mail.gmail.com>
 <03eea247-e1cc-d1b7-5ac8-c72d42f57056@spatialys.com>
 <20210520090206.GB2950@c19>
 <CABUeae_ukttNke9VD9HX_atqVBh4BbJP7HksiTgqT=SZpp1Wfw@mail.gmail.com>
Message-ID: <6685a7db-a161-fdc7-44bb-42de8256181b@duif.net>

But... the cool thing is you don't need to register at matrix.org to be able to use other matrix servers.

As Sandro says: your osgeo.org-id should also be a valid (osgeo)-matrix id, at least to communicate with osgeo users, but for what I know also with matrix.org-user accounts.
And just like different email accounts (from different domains/providers) you can have different matrix identities.

Regards,

Richard Duivenvoorde

Ps: also okay to move to libra off course


On 5/20/21 7:04 PM, Mateusz Loskot wrote:
> On Thu, 20 May 2021 at 11:09, Sandro Santilli <strk at kbt.io> wrote:
>> On Wed, May 19, 2021 at 09:00:52PM +0200, Even Rouault wrote:
>>>
>>>
>>> - something else ?
>>
>> In case you missed it, OSGeo is now hosting a Matrix homeserver:
>> https://wiki.osgeo.org/wiki/SAC:MatrixSynapse
>>
>> Matrix is an open protocol for instant messaging based on HTTP,
>> supports bridges to different IM systems (including IRC and Slack).
> 
> Those of us who used to use Matrix,
> stopped using it,
> perhaps deactivated their accounts,
> then want to use it again,
> perhaps with the same username,
> then don't bang your head at the desk in frustration
> when the "computer says no!"
> 
> Here is response I have received from the Matrix support team
> after learning to get in touch with them about the issue [1]
> 
> """
> Hi Mateusz
> Unfortunately it is impossible to verify the identity of deleted users.
> Per the matrix.org Privacy Notice (
> https://matrix.org/legal/privacy-notice#2211-account-and-profile-information
> ):
> "Your username is stored indefinitely to avoid account recycling."
> To protect the security and privacy of our users we never reactivate
> or release deleted usernames.
> We recommend you create a new account using a different Matrix ID.
> Matrix.org Support
> """
> 
> [1] https://github.com/matrix-org/synapse/pull/7908#issuecomment-708338470
> 
> Best regards,
> 


From mateusz at loskot.net  Thu May 20 11:24:13 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 20 May 2021 20:24:13 +0200
Subject: [gdal-dev] Freenode IRC taken over(was Fwd: [SAC] [Hosting]
 OSUOSL IRC channels moving to irc.libera.chat)
In-Reply-To: <6685a7db-a161-fdc7-44bb-42de8256181b@duif.net>
References: <CAORfjXSTHGph0i6nsYEPM2RYrBi1JWuO=OFa374DymGK3wR8cA@mail.gmail.com>
 <03eea247-e1cc-d1b7-5ac8-c72d42f57056@spatialys.com>
 <20210520090206.GB2950@c19>
 <CABUeae_ukttNke9VD9HX_atqVBh4BbJP7HksiTgqT=SZpp1Wfw@mail.gmail.com>
 <6685a7db-a161-fdc7-44bb-42de8256181b@duif.net>
Message-ID: <CABUeae8ukL+kWyhTjNGZ2Y8bnWpRhyOxwtQEkSRy85gZ9aXrkg@mail.gmail.com>

On Thu, 20 May 2021 at 20:07, Richard Duivenvoorde <rdmailings at duif.net> wrote:
>
> But... the cool thing is[...] you can have different matrix identities.

Although I'm aware, my personal preference is to avoid that
feature and chain myself to the matrix.org.

...one's habits one's worst enemy

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From rykovd at gmail.com  Thu May 20 12:42:59 2021
From: rykovd at gmail.com (Denis Rykov)
Date: Thu, 20 May 2021 21:42:59 +0200
Subject: [gdal-dev] Resampling causes change of max value
Message-ID: <CAJbvKNoW55-Q=X2DNzjRqeU88H2r1Aeot860aJu9Cprk1bEXyw@mail.gmail.com>

$ gdalinfo -stats -json input_raster_to_resize_with_max_val_92.tiff |
jq '.bands[0].metadata[""].STATISTICS_MAXIMUM'
"92"
$ gdal_translate -outsize 1% 1%
input_raster_to_resize_with_max_val_92.tiff output.tif
Input file size is 6845, 10302
0...10...20...30...40...50...60...70...80...90...100 - done.
$ gdalinfo -stats -json output.tif | jq
'.bands[0].metadata[""].STATISTICS_MAXIMUM'
"3149.9255371094"
I expected to get the same or at least close value as in the original
raster. What might be the reason for that behavior?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210520/7ece62b1/attachment.html>

From even.rouault at spatialys.com  Thu May 20 12:51:57 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 20 May 2021 21:51:57 +0200
Subject: [gdal-dev] Resampling causes change of max value
In-Reply-To: <CAJbvKNoW55-Q=X2DNzjRqeU88H2r1Aeot860aJu9Cprk1bEXyw@mail.gmail.com>
References: <CAJbvKNoW55-Q=X2DNzjRqeU88H2r1Aeot860aJu9Cprk1bEXyw@mail.gmail.com>
Message-ID: <157b3d00-efb2-a4cf-d335-1638f8246cb9@spatialys.com>

Denis,

The maximum of nearest downsampling should be <= maximum of full resolution.

Potential explanations:

- your source file has overviews that contain completely different 
values than the full resolution image.

- or perhaps your input_raster_to_resize_with_max_val_92.tiff file has a 
.aux.xml with outdated stats (gdalinfo -stats doesn't regenerate stats 
if already found)

Even

Le 20/05/2021 ? 21:42, Denis Rykov a ?crit?:
> |$ gdalinfo -stats -json input_raster_to_resize_with_max_val_92.tiff | 
> jq '.bands[0].metadata[""].STATISTICS_MAXIMUM' "92" $ gdal_translate 
> -outsize 1% 1% input_raster_to_resize_with_max_val_92.tiff output.tif 
> Input file size is 6845, 10302 
> 0...10...20...30...40...50...60...70...80...90...100 - done. $ 
> gdalinfo -stats -json output.tif | jq 
> '.bands[0].metadata[""].STATISTICS_MAXIMUM' "3149.9255371094" |I expected to get the same or at least close value as in the original 
> raster. What might be the reason for that behavior?||
> |
> |
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210520/b1ccccdc/attachment.html>

From rykovd at gmail.com  Thu May 20 13:13:04 2021
From: rykovd at gmail.com (Denis Rykov)
Date: Thu, 20 May 2021 22:13:04 +0200
Subject: [gdal-dev] Resampling causes change of max value
In-Reply-To: <157b3d00-efb2-a4cf-d335-1638f8246cb9@spatialys.com>
References: <CAJbvKNoW55-Q=X2DNzjRqeU88H2r1Aeot860aJu9Cprk1bEXyw@mail.gmail.com>
 <157b3d00-efb2-a4cf-d335-1638f8246cb9@spatialys.com>
Message-ID: <CAJbvKNrrM0UFHpLuxpSOBFnT0GQmNCPU8c62184RW+6wcw7pYQ@mail.gmail.com>

Thank you Even. You are totally right as always. The reason is the broken
overview.

$ gdal_translate -outsize 1% 1% -oo OVERVIEW_LEVEL=0
input_raster_to_resize_with_max_val_92.tiff output-0ovr.tif

$ gdal_translate -outsize 1% 1% input_raster_to_resize_with_max_val_92.tiff
output.tif

$ gdalinfo -stats -json output.tif | jq
'.bands[0].metadata[""].STATISTICS_MAXIMUM'
"3149.9255371094"

$ gdalinfo -stats -json output-0ovr.tif | jq
'.bands[0].metadata[""].STATISTICS_MAXIMUM'
"70.651634216309"

On Thu, May 20, 2021 at 9:51 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Denis,
> The maximum of nearest downsampling should be <= maximum of full
> resolution.
>
> Potential explanations:
>
> - your source file has overviews that contain completely different values
> than the full resolution image.
>
> - or perhaps your input_raster_to_resize_with_max_val_92.tiff file has a
> .aux.xml with outdated stats (gdalinfo -stats doesn't regenerate stats if
> already found)
>
> Even
> Le 20/05/2021 ? 21:42, Denis Rykov a ?crit :
>
> $ gdalinfo -stats -json input_raster_to_resize_with_max_val_92.tiff | jq '.bands[0].metadata[""].STATISTICS_MAXIMUM'
> "92"
> $ gdal_translate -outsize 1% 1% input_raster_to_resize_with_max_val_92.tiff output.tif
> Input file size is 6845, 10302
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> $ gdalinfo -stats -json output.tif | jq '.bands[0].metadata[""].STATISTICS_MAXIMUM'
> "3149.9255371094"I expected to get the same or at least close value as in the original raster. What might be the reason for that behavior?
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210520/91259e29/attachment.html>

From strk at kbt.io  Fri May 21 02:36:08 2021
From: strk at kbt.io (Sandro Santilli)
Date: Fri, 21 May 2021 11:36:08 +0200
Subject: [gdal-dev] Freenode IRC taken over(was Fwd: [SAC] [Hosting]
 OSUOSL IRC channels moving to irc.libera.chat)
In-Reply-To: <6685a7db-a161-fdc7-44bb-42de8256181b@duif.net>
References: <CAORfjXSTHGph0i6nsYEPM2RYrBi1JWuO=OFa374DymGK3wR8cA@mail.gmail.com>
 <03eea247-e1cc-d1b7-5ac8-c72d42f57056@spatialys.com>
 <20210520090206.GB2950@c19>
 <CABUeae_ukttNke9VD9HX_atqVBh4BbJP7HksiTgqT=SZpp1Wfw@mail.gmail.com>
 <6685a7db-a161-fdc7-44bb-42de8256181b@duif.net>
Message-ID: <20210521093608.GC2640@c19>

On Thu, May 20, 2021 at 08:07:12PM +0200, Richard Duivenvoorde wrote:
> But... the cool thing is you don't need to register at matrix.org to be able to use other matrix servers.
> 
> As Sandro says: your osgeo.org-id should also be a valid (osgeo)-matrix id, at least to communicate with osgeo users, but for what I know also with matrix.org-user accounts.
> And just like different email accounts (from different domains/providers) you can have different matrix identities.

Confirmed. Matrix is a federated system, like email.
You don't need to stick to a single provider.
You can communicate with any user and any channel no matter
where you log in.

--strk;

From Metabaseacc at gmail.com  Sat May 22 18:46:09 2021
From: Metabaseacc at gmail.com (Met Bas)
Date: Sat, 22 May 2021 18:46:09 -0700 (MST)
Subject: [gdal-dev] "OGR_SQLITE_SYNCHRONOUS" and "OGR_SQLITE_CACHE"
 accessible through Python bindings?
Message-ID: <1621734369663-0.post@n6.nabble.com>

Write speeds to GeoPackages appear to be going extremely slow in my use case.
GPKG/SQLite journal files are being created at the sizes of 10-25 kb
incrementally increasing the main geopackage file. This is saving on a drive
where such small incremental cause larger slowdowns, so I would like to
increase the size of these changes.

The configuration options "OGR_SQLITE_SYNCHRONOUS" and "OGR_SQLITE_CACHE"
appear relevant to increasing speed.

Is there a way in which I can set these options (limited to the scope of the
script being run) through Python?

Thank you,
M.B



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Sun May 23 00:53:10 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Sun, 23 May 2021 00:53:10 -0700 (MST)
Subject: [gdal-dev] "OGR_SQLITE_SYNCHRONOUS" and "OGR_SQLITE_CACHE"
 accessible through Python bindings?
In-Reply-To: <1621734369663-0.post@n6.nabble.com>
References: <1621734369663-0.post@n6.nabble.com>
Message-ID: <1621756390242-0.post@n6.nabble.com>

Hi,

By reading https://sqlite.org/asyncvfs.html you could try if setting the
journal mode into WAL with a PRAGMA command would help.

-Jukka Rahkonen-


Met Bas wrote
> Write speeds to GeoPackages appear to be going extremely slow in my use
> case.
> GPKG/SQLite journal files are being created at the sizes of 10-25 kb
> incrementally increasing the main geopackage file. This is saving on a
> drive
> where such small incremental cause larger slowdowns, so I would like to
> increase the size of these changes.
> 
> The configuration options "OGR_SQLITE_SYNCHRONOUS" and "OGR_SQLITE_CACHE"
> appear relevant to increasing speed.
> 
> Is there a way in which I can set these options (limited to the scope of
> the
> script being run) through Python?
> 
> Thank you,
> M.B
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Sun May 23 02:15:21 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 23 May 2021 11:15:21 +0200
Subject: [gdal-dev] "OGR_SQLITE_SYNCHRONOUS" and "OGR_SQLITE_CACHE"
 accessible through Python bindings?
In-Reply-To: <1621734369663-0.post@n6.nabble.com>
References: <1621734369663-0.post@n6.nabble.com>
Message-ID: <1f65e9f7-52d1-b1b9-9f44-fc0c560cf49f@spatialys.com>

gdal.SetConfigOption(name_of_config_option, value_as_string)

Le 23/05/2021 ? 03:46, Met Bas a ?crit?:
> Write speeds to GeoPackages appear to be going extremely slow in my use case.
> GPKG/SQLite journal files are being created at the sizes of 10-25 kb
> incrementally increasing the main geopackage file. This is saving on a drive
> where such small incremental cause larger slowdowns, so I would like to
> increase the size of these changes.
>
> The configuration options "OGR_SQLITE_SYNCHRONOUS" and "OGR_SQLITE_CACHE"
> appear relevant to increasing speed.
>
> Is there a way in which I can set these options (limited to the scope of the
> script being run) through Python?
>
> Thank you,
> M.B
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Sun May 23 14:10:23 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 23 May 2021 23:10:23 +0200
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
Message-ID: <d7e99a9f-08f5-d547-aaf5-535f8640c815@spatialys.com>

Hi,

small update regarding GeoPackage. There's now a proposed update of the 
GeoPackage specification to store the coordinate epoch as the value of 
the |epoch| column of the |gpkg_spatial_ref_sys| table (see 
opengeospatial/geopackage#599 
<https://github.com/opengeospatial/geopackage/issues/599> and 
opengeospatial/geopackage#600 
<https://github.com/opengeospatial/geopackage/pull/600>). I've updated 
the implementation PR accordingly.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210523/6570930b/attachment.html>

From pttest68 at gmail.com  Mon May 24 02:20:24 2021
From: pttest68 at gmail.com (pt test)
Date: Mon, 24 May 2021 12:20:24 +0300
Subject: [gdal-dev] leav
Message-ID: <CANfdFKY7MkKLWBQKRM8yZvZ43wrvW2MMdx9FNcKQpUyyCVqG-A@mail.gmail.com>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210524/fc09a48a/attachment.html>

From sean at mapbox.com  Mon May 24 15:39:56 2021
From: sean at mapbox.com (Sean Gillies)
Date: Mon, 24 May 2021 16:39:56 -0600
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
Message-ID: <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>

Hi Even, Howard:

I'm inclined to approve, but I feel like there should be more discussion,
not just among PROJ developers and developers of cutting edge formats. We
should work to draw a wider group in on this.

On Thu, May 13, 2021 at 10:01 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Howard,
> > It is magical
> > -------------------
> >
> > If you have GDAL-extended versions of a few select data formats and you
> have the correct chain of PROJ and GDAL, the behavior of your coordinates
> is going to change for various transformations. This could be confusing and
> challenging to track down in debugging scenarios. The discrepancies between
> doing the same transformations in different softwares will be especially
> noticeable.
> Having different results in coordinate transformations due to have will
> not be much different than using different PROJ versions using different
> versions of the EPSG database, possibly with different set of grids
> installed.
>

Howard, are you suggesting that there should be a configuration option to
opt in to this new feature?

A surprise 1-2 meter shift is going to break builds and applications, I
agree. I think a lot of us are tolerating inaccuracy due to using
time-varying CRS but are going to be caught out by changes in the actual
numbers.


> >
> > It extends existing formats in GDAL's own way
> > ---------------------------------------------------------------
> >
> > Are there many other cases where GDAL augments and extends behavior of
> formats by bolting on metadata bits? I can think of some GeoTIFF tags where
> GDAL has done this in the past. Some of them have been adopted
> industry-wide, but most have not. We definitely haven't done that to a long
> list of formats like this RFC proposes to do.
> We are not going to invent a new raster or vector format just to add a
> coordinate epoch into it, right ? So this proposal does minor and
> backward compatible enhancements to popular existing formats.
> >
>

For GeoJSON, at least, I think proposing a "coordinate_epoch" property is
pragmatic. This doesn't do anything for GeoJSON feature sequences, though.
And it doesn't do anything about data that's already out there that will
never be re-processed.

Now that I think about it, I think the RFC should say more about what it
will do for the ensemble OGC:CRS84.


> > No corresponding socializing activity
> > -------------------------------------------------
> >
> > Is GDAL going to go to the GeoJSON, GeoPackage, GeoTIFF, Flatgeobuf,
> GML, JPEG2000, KML, and Shapefile communities and advocate for these
> improvements? It would be a lot of time and effort to go back after the
> fact and officially augment all of these formats with epoch metadata.  Many
> of these are never going to have new versions either, so there isn't much
> hope of a new format version coming along with support for coordinate
> epochs.
> Well, this is a public RFC for everybody awareness, and there will be a
> page on GDAL doc. And I've created tickets on the GeoTIFF and GeoPackage
> OGC github repos pointing to it. I don't necessarily expect much follow
> up from them though, but at least we'll have tried to make advance the
> topic a bit.
> >
> > Is the format of epoch standardized?
> > -------------------------------------------------
> >
> > The proposed epoch format, such as 2021.3, *looks* like a floating point
> number, but it isn't really, is it? Do you ever need more precision than a
> year and a day? *shrug* It seems like it's own special time format. Is
> there a standard time format that could instead be used here?
>
> This format is a floating point number and is the accepted way of
> encoding coordinate epochs. The after decimal point part represents the
> fraction of the year. It is referenced in "OGC Abstract Specification
> Topic 2: Referencing by coordinates"
> (https://docs.opengeospatial.org/as/18-005r4/18-005r4.html). In table 4:
> coordinateEpoch: "date at which coordinates are referenced to a dynamic
> coordinate reference system, expressed as a decimal year in the
> Gregorian calendar. Example: 2017-03-25 in the Gregorian calendar is
> epoch 2017.23."
>
> (31+28+25) / 365. = 0.23...
>
> Two digits after the decimal point should be enough in practice. For
> 'slow' and continuous phenomenons like plate drift motion, an error of a
> couple days will not change the result by more than a fraction of
> millimetre. If you use a deformation model that takes into account
> earthquakes however, you could perhaps need to add a 3rd digit to
> identify precisely the day.
>
> Even
>

To me, it seems that the parameterization or description of coordinate
epochs in OGC 19-005r4 is a bit sketchy.

Even, are you saying that coordinate shifts in PROJ are entirely functions
of the datetime delta since the coordinate epoch?

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210524/6b8623c6/attachment.html>

From schwehr at gmail.com  Mon May 24 16:13:29 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 24 May 2021 16:13:29 -0700
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
 <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
Message-ID: <CACmBxyu0FeK88mqptt8O_h_xB3nc59nESXAbHD8QV+OGeRmLNg@mail.gmail.com>

I've tried pinging David Sandwell at Scripps, geodesy / rtk / surveying
folks at UNH CCOM, and Paul Wessel / Dietmar Muller of GMT about a week ago
and haven't gotten any useful response.

I'm +0 and feeling like Sean that we really could use some feedback from
other communities.

Having epoch info is great, but I feel like I have no clue about what is a
sufficient solution.

-kurt

On Mon, May 24, 2021 at 3:40 PM Sean Gillies via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi Even, Howard:
>
> I'm inclined to approve, but I feel like there should be more discussion,
> not just among PROJ developers and developers of cutting edge formats. We
> should work to draw a wider group in on this.
>
> On Thu, May 13, 2021 at 10:01 AM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Howard,
>> > It is magical
>> > -------------------
>> >
>> > If you have GDAL-extended versions of a few select data formats and you
>> have the correct chain of PROJ and GDAL, the behavior of your coordinates
>> is going to change for various transformations. This could be confusing and
>> challenging to track down in debugging scenarios. The discrepancies between
>> doing the same transformations in different softwares will be especially
>> noticeable.
>> Having different results in coordinate transformations due to have will
>> not be much different than using different PROJ versions using different
>> versions of the EPSG database, possibly with different set of grids
>> installed.
>>
>
> Howard, are you suggesting that there should be a configuration option to
> opt in to this new feature?
>
> A surprise 1-2 meter shift is going to break builds and applications, I
> agree. I think a lot of us are tolerating inaccuracy due to using
> time-varying CRS but are going to be caught out by changes in the actual
> numbers.
>
>
>> >
>> > It extends existing formats in GDAL's own way
>> > ---------------------------------------------------------------
>> >
>> > Are there many other cases where GDAL augments and extends behavior of
>> formats by bolting on metadata bits? I can think of some GeoTIFF tags where
>> GDAL has done this in the past. Some of them have been adopted
>> industry-wide, but most have not. We definitely haven't done that to a long
>> list of formats like this RFC proposes to do.
>> We are not going to invent a new raster or vector format just to add a
>> coordinate epoch into it, right ? So this proposal does minor and
>> backward compatible enhancements to popular existing formats.
>> >
>>
>
> For GeoJSON, at least, I think proposing a "coordinate_epoch" property is
> pragmatic. This doesn't do anything for GeoJSON feature sequences, though.
> And it doesn't do anything about data that's already out there that will
> never be re-processed.
>
> Now that I think about it, I think the RFC should say more about what it
> will do for the ensemble OGC:CRS84.
>
>
>> > No corresponding socializing activity
>> > -------------------------------------------------
>> >
>> > Is GDAL going to go to the GeoJSON, GeoPackage, GeoTIFF, Flatgeobuf,
>> GML, JPEG2000, KML, and Shapefile communities and advocate for these
>> improvements? It would be a lot of time and effort to go back after the
>> fact and officially augment all of these formats with epoch metadata.  Many
>> of these are never going to have new versions either, so there isn't much
>> hope of a new format version coming along with support for coordinate
>> epochs.
>> Well, this is a public RFC for everybody awareness, and there will be a
>> page on GDAL doc. And I've created tickets on the GeoTIFF and GeoPackage
>> OGC github repos pointing to it. I don't necessarily expect much follow
>> up from them though, but at least we'll have tried to make advance the
>> topic a bit.
>> >
>> > Is the format of epoch standardized?
>> > -------------------------------------------------
>> >
>> > The proposed epoch format, such as 2021.3, *looks* like a floating
>> point number, but it isn't really, is it? Do you ever need more precision
>> than a year and a day? *shrug* It seems like it's own special time format.
>> Is there a standard time format that could instead be used here?
>>
>> This format is a floating point number and is the accepted way of
>> encoding coordinate epochs. The after decimal point part represents the
>> fraction of the year. It is referenced in "OGC Abstract Specification
>> Topic 2: Referencing by coordinates"
>> (https://docs.opengeospatial.org/as/18-005r4/18-005r4.html). In table 4:
>> coordinateEpoch: "date at which coordinates are referenced to a dynamic
>> coordinate reference system, expressed as a decimal year in the
>> Gregorian calendar. Example: 2017-03-25 in the Gregorian calendar is
>> epoch 2017.23."
>>
>> (31+28+25) / 365. = 0.23...
>>
>> Two digits after the decimal point should be enough in practice. For
>> 'slow' and continuous phenomenons like plate drift motion, an error of a
>> couple days will not change the result by more than a fraction of
>> millimetre. If you use a deformation model that takes into account
>> earthquakes however, you could perhaps need to add a 3rd digit to
>> identify precisely the day.
>>
>> Even
>>
>
> To me, it seems that the parameterization or description of coordinate
> epochs in OGC 19-005r4 is a bit sketchy.
>
> Even, are you saying that coordinate shifts in PROJ are entirely functions
> of the datetime delta since the coordinate epoch?
>
> --
> Sean Gillies
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210524/757ac371/attachment.html>

From even.rouault at spatialys.com  Mon May 24 16:15:01 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 25 May 2021 01:15:01 +0200
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
 <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
Message-ID: <3058368b-9a93-b89d-4461-2e1cf58073db@spatialys.com>

Hi Sean,
> Hi Even, Howard:
>
> I'm inclined to approve, but I feel like there should be more 
> discussion, not just among PROJ developers and developers of cutting 
> edge formats. We should work to draw a wider group in on this.
Various OGC standard working groups are aware of that topic since this 
was raised I think in a plenary meeting more than one year ago. I see 
that in Testbed 17 the working group on the "OGC Features and Geometry 
JSON" (the "extension" of GeoJSON) is aware of that, but has not 
proposed any solution. I've just pointed them to my proposal.
>
> Howard, are you suggesting that there should be a configuration option 
> to opt in to this new feature?
>
> A surprise 1-2 meter shift is going to break builds and applications, 
> I agree. I think a lot of us are tolerating inaccuracy due to using 
> time-varying CRS but are going to be caught out by changes in the 
> actual numbers.
The mere introduction of this new capability isn't going to change any 
behavior. It is only going to change behavior if people do add a 
coordinate epoch in their datasets, and in that case, one can expect 
them to want more accurate coordinate transformations. That said adding 
a config option in the OGRProjCT class to ignore the coordinate epoch is 
trivial...
>
> Now that I think about it, I think the RFC should say more about what 
> it will do for the ensemble OGC:CRS84.
I'm not sure what kind of transformations will be possible when 
operating on the WGS 84 ensemble. Within what is available strictly 
speaking in EPSG, probably none. But we have had repeated discussions on 
the PROJ mailing list regarding this, and potentially one option could 
be to consider that a "recent" coordinate epoch on WGS 84 would mean 
that people actually use the latest WGS 84 realization, WGS 84 (G1762) 
currently, and so use transformations available from/to that 
realization. But nothing regarding this has been implemented yet. To get 
a time-dependent transformation, you need to specify a non-ensemble datum.
>
> To me, it seems that the parameterization or description of coordinate 
> epochs in OGC 19-005r4 is a bit sketchy.
Could you precise ?
>
> Even, are you saying that coordinate shifts in PROJ are entirely 
> functions of the datetime delta since the coordinate epoch?

Currently what is available in PROJ for transformations between a 
dynamic CRS and a static CRS is mostly through using 15-parameter 
Helmert transformation: 
https://proj.org/operations/transformations/helmert.html (*). Those 
Helmert transformations can have non-time dependent components (the 
"classic" 7-parameter transformtion, ala TOWGS84) + a time-dependant 
component that is generally a rotation in spherical coordinates w.r.t 
Earth centre and of an amplitude proportional to (coordinate_epoch - 
central_epoch) where central_epoch is a constant of the transformation 
(e.g the GDA2020 to ITRF2014 transformation uses central_epoch=2020.0). 
But they are not "entirely functions of the datetime delta", since the 
value of the longitude, latitude, ellipsoidal height of the coordinate 
has also an influence on the result (not completely sure to understand 
your question).

To be complete on the topic, there are a few esoteric cases where 
https://proj.org/operations/transformations/deformation.html grids are 
used, and the amplitude of the correction is also proportional to 
(coordinate_epoch - central_epoch), but this is specific to a NKG 
(Nordic countries) CRS code

And there's the very particular case of transformations between ITRF96 
and NZGD2000 (New Zealand) which uses a more complex deformation model 
(https://proj.org/operations/transformations/defmodel.html), where the 
time parameter can decide if corrections related to earthquakes are 
applied depending on the location and if you're before or after the date 
of the earthquake.

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210525/7d50d80c/attachment-0001.html>

From howard at hobu.co  Tue May 25 06:30:23 2021
From: howard at hobu.co (Howard Butler)
Date: Tue, 25 May 2021 08:30:23 -0500
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
 <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
Message-ID: <CBE8B68B-F378-4691-A5EC-D456DCF968F4@hobu.co>



> On May 24, 2021, at 5:39 PM, Sean Gillies <sean at mapbox.com> wrote:
> 
> Howard, are you suggesting that there should be a configuration option to opt in to this new feature?

Yes, I think it should be explicitly opt-in, not silently opt-out for the time being.


> On May 24, 2021, at 6:15 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> The mere introduction of this new capability isn't going to change any behavior. It is only going to change behavior if people do add a coordinate epoch in their datasets, and in that case, one can expect them to want more accurate coordinate transformations. That said adding a config option in the OGRProjCT class to ignore the coordinate epoch is trivial...
> 


I'm glad you are getting traction with the various format groups on the topic, but that process is going to take a very long time to matriculate, and in many cases official blessing won't ever be pronounced. Let's make the behavior for applying the transformations *and* writing the metadata an explicit opt-in.

Howard

From even.rouault at spatialys.com  Tue May 25 06:57:54 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 25 May 2021 15:57:54 +0200
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <CBE8B68B-F378-4691-A5EC-D456DCF968F4@hobu.co>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
 <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
 <CBE8B68B-F378-4691-A5EC-D456DCF968F4@hobu.co>
Message-ID: <c82829b1-f528-2cc8-3439-97594d4c9222@spatialys.com>


Le 25/05/2021 ? 15:30, Howard Butler a ?crit?:
>
>> On May 24, 2021, at 5:39 PM, Sean Gillies <sean at mapbox.com> wrote:
>>
>> Howard, are you suggesting that there should be a configuration option to opt in to this new feature?
> Yes, I think it should be explicitly opt-in, not silently opt-out for the time being.
>
>
>> On May 24, 2021, at 6:15 PM, Even Rouault <even.rouault at spatialys.com> wrote:
>>
>> The mere introduction of this new capability isn't going to change any behavior. It is only going to change behavior if people do add a coordinate epoch in their datasets, and in that case, one can expect them to want more accurate coordinate transformations. That said adding a config option in the OGRProjCT class to ignore the coordinate epoch is trivial...
>>
>
> I'm glad you are getting traction with the various format groups on the topic, but that process is going to take a very long time to matriculate, and in many cases official blessing won't ever be pronounced. Let's make the behavior for applying the transformations *and* writing the metadata an explicit opt-in.

Do you mean you would also want a per-driver option, 
WRITE_COORDINATE_EPOCH=YES, in addition to having attached a coordinate 
epoch to the CRS ? It seems to me that we are making the life of users 
harder, whereas we should make it easier to get it right. If people have 
already taken the step of attaching the coordinate epoch to the CRS, we 
can assume they want it to be preserved as much as possible. When people 
write a GeoTIFF with a CRS with a TOWGS84 override, we write the 
GeogTOWGS84GeoKey extension key without asking them.

Is your worry about non-GDAL implementations ? At worse, they will 
ignore the coordinate epoch. You can't currently expect software 
implementations with different coordinate transformation engines to give 
the same result for the "simple" standard static CRS to static CRS 
situation.

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From Matt.Wilkie at yukon.ca  Tue May 25 16:12:54 2021
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 25 May 2021 23:12:54 +0000
Subject: [gdal-dev] Has gdal_ls.py been replaced?
Message-ID: <a4550f0dc9764929b85d1776fb847611@yukon.ca>

Hi,

I only see gdal_ls.py in historical versions:
https://github.com/OSGeo/gdal/blob/e346a31f3119f3bb3f77dd7ddc8037b3049c2026/gdal/swig/python/samples/gdal_ls.py

I'm picking up on a very old suggestion[0] to use it as part of a chain to help gdaltindex generate footprints for images inside .zip archives. Before I go too far down that road though I figured I should see if this old sample is gone because it's been superseded or absorbed into something else.

[0]: https://gdal-dev.osgeo.narkive.com/o01sCeuU/gdaltindex-with-wildcard-tif-in-a-vsizip-myzip-zip

Matt Wilkie
Geomatics Developer & Administrator
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210525/cbb11f1a/attachment.html>

From Metabaseacc at gmail.com  Tue May 25 16:22:18 2021
From: Metabaseacc at gmail.com (Met Bas)
Date: Tue, 25 May 2021 16:22:18 -0700 (MST)
Subject: [gdal-dev] Raster Attribute Tables
Message-ID: <1621984938775-0.post@n6.nabble.com>

Hello,

I've heard conflicting information about this in general casually and rather
than test and make assumptions on results, was hoping to get some informed
answer.

I've read that Raster Attribute Tables must be created on single band
GeoTIFFs. Furthermore, ArcMap requires that to make Raster Attribute Tables,
the GeoTIFF must be single band. 

Is this a limitation of ArcMap or a limitation of GeoTIFFs? Is there any
reason why it may be a bad idea to generate a Raster Attribute Table for a
multi-band GeoTIFF using GDAL?

Thanks,
Met Bas



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From Metabaseacc at gmail.com  Tue May 25 16:25:25 2021
From: Metabaseacc at gmail.com (Met Bas)
Date: Tue, 25 May 2021 16:25:25 -0700 (MST)
Subject: [gdal-dev] "OGR_SQLITE_SYNCHRONOUS" and "OGR_SQLITE_CACHE"
 accessible through Python bindings?
In-Reply-To: <1f65e9f7-52d1-b1b9-9f44-fc0c560cf49f@spatialys.com>
References: <1621734369663-0.post@n6.nabble.com>
 <1f65e9f7-52d1-b1b9-9f44-fc0c560cf49f@spatialys.com>
Message-ID: <1621985125619-0.post@n6.nabble.com>

Thank you Jukka and Even. Was able to resolve my issue with the help of your
responses.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Wed May 26 02:22:00 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 26 May 2021 11:22:00 +0200
Subject: [gdal-dev] Raster Attribute Tables
In-Reply-To: <1621984938775-0.post@n6.nabble.com>
References: <1621984938775-0.post@n6.nabble.com>
Message-ID: <ff9bb2a2-234b-3cc8-a578-df532186c1cc@spatialys.com>

Met,

This is definitely not a GDAL limitation, but might be a ArcMap one. The 
.aux.xml file can support a RAT per band.

Even

Le 26/05/2021 ? 01:22, Met Bas a ?crit?:
> Hello,
>
> I've heard conflicting information about this in general casually and rather
> than test and make assumptions on results, was hoping to get some informed
> answer.
>
> I've read that Raster Attribute Tables must be created on single band
> GeoTIFFs. Furthermore, ArcMap requires that to make Raster Attribute Tables,
> the GeoTIFF must be single band.
>
> Is this a limitation of ArcMap or a limitation of GeoTIFFs? Is there any
> reason why it may be a bad idea to generate a Raster Attribute Table for a
> multi-band GeoTIFF using GDAL?
>
> Thanks,
> Met Bas
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Wed May 26 02:23:09 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 26 May 2021 11:23:09 +0200
Subject: [gdal-dev] Has gdal_ls.py been replaced?
In-Reply-To: <a4550f0dc9764929b85d1776fb847611@yukon.ca>
References: <a4550f0dc9764929b85d1776fb847611@yukon.ca>
Message-ID: <95cb1be9-232d-cd8b-112c-ddb7f3800737@spatialys.com>

Matt,

The sample files have been moved. You can find it at 
https://github.com/OSGeo/gdal/blob/master/gdal/swig/python/gdal-utils/osgeo_utils/samples/gdal_ls.py

Even

Le 26/05/2021 ? 01:12, Matt.Wilkie at yukon.ca a ?crit?:
>
> Hi,
>
> I only see gdal_ls.py in historical versions:
>
> https://github.com/OSGeo/gdal/blob/e346a31f3119f3bb3f77dd7ddc8037b3049c2026/gdal/swig/python/samples/gdal_ls.py
>
> I?m picking up on a very old suggestion[0] to use it as part of a 
> chain to help gdaltindex generate footprints for images inside .zip 
> archives. Before I go too far down that road though I figured I should 
> see if this old sample is gone because it?s been superseded or 
> absorbed into something else.
>
> [0]: 
> https://gdal-dev.osgeo.narkive.com/o01sCeuU/gdaltindex-with-wildcard-tif-in-a-vsizip-myzip-zip 
> <https://gdal-dev.osgeo.narkive.com/o01sCeuU/gdaltindex-with-wildcard-tif-in-a-vsizip-myzip-zip>
>
> *Matt Wilkie*
>
> Geomatics Developer & Administrator
>
> Environment | Technology, Innovation and Mapping
>
> T 867-667-8133 | _Yukon.ca <http://yukon.ca/>_
>
> /Hours: 08:30-16:30, Tue-Wed: Office, Thu-Fri: Remote./
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210526/33592c2c/attachment.html>

From nyall.dawson at gmail.com  Wed May 26 18:33:03 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Thu, 27 May 2021 11:33:03 +1000
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <c82829b1-f528-2cc8-3439-97594d4c9222@spatialys.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
 <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
 <CBE8B68B-F378-4691-A5EC-D456DCF968F4@hobu.co>
 <c82829b1-f528-2cc8-3439-97594d4c9222@spatialys.com>
Message-ID: <CAB28AsgURRnS2df71d8+8wKg4PN69VG95jG0QO+qmCiBav==QA@mail.gmail.com>

On Tue, 25 May 2021 at 23:58, Even Rouault <even.rouault at spatialys.com> wrote:
>
>
> Le 25/05/2021 ? 15:30, Howard Butler a ?crit :
> >
> >> On May 24, 2021, at 5:39 PM, Sean Gillies <sean at mapbox.com> wrote:
> >>
> >> Howard, are you suggesting that there should be a configuration option to opt in to this new feature?
> > Yes, I think it should be explicitly opt-in, not silently opt-out for the time being.
> >
> >
> >> On May 24, 2021, at 6:15 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> >>
> >> The mere introduction of this new capability isn't going to change any behavior. It is only going to change behavior if people do add a coordinate epoch in their datasets, and in that case, one can expect them to want more accurate coordinate transformations. That said adding a config option in the OGRProjCT class to ignore the coordinate epoch is trivial...
> >>
> >
> > I'm glad you are getting traction with the various format groups on the topic, but that process is going to take a very long time to matriculate, and in many cases official blessing won't ever be pronounced. Let's make the behavior for applying the transformations *and* writing the metadata an explicit opt-in.
>
> Do you mean you would also want a per-driver option,
> WRITE_COORDINATE_EPOCH=YES, in addition to having attached a coordinate
> epoch to the CRS ? It seems to me that we are making the life of users
> harder, whereas we should make it easier to get it right. If people have
> already taken the step of attaching the coordinate epoch to the CRS, we
> can assume they want it to be preserved as much as possible. When people
> write a GeoTIFF with a CRS with a TOWGS84 override, we write the
> GeogTOWGS84GeoKey extension key without asking them.
>
> Is your worry about non-GDAL implementations ? At worse, they will
> ignore the coordinate epoch. You can't currently expect software
> implementations with different coordinate transformation engines to give
> the same result for the "simple" standard static CRS to static CRS
> situation.

Can I make the suggestion that a subset of
https://github.com/OSGeo/gdal/pull/3827 could be created and be merged
on its own? Specifically the commits which add the underlying API for
GDAL to handle epochs should be controversy-free and suitable for
merge outside of the larger/trickier question of patching in support
to the data formats.

Nyall


>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From howard at hobu.co  Thu May 27 06:01:33 2021
From: howard at hobu.co (Howard Butler)
Date: Thu, 27 May 2021 08:01:33 -0500
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <CAB28AsgURRnS2df71d8+8wKg4PN69VG95jG0QO+qmCiBav==QA@mail.gmail.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
 <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
 <CBE8B68B-F378-4691-A5EC-D456DCF968F4@hobu.co>
 <c82829b1-f528-2cc8-3439-97594d4c9222@spatialys.com>
 <CAB28AsgURRnS2df71d8+8wKg4PN69VG95jG0QO+qmCiBav==QA@mail.gmail.com>
Message-ID: <33F2724E-FC91-46DA-A09F-10B4723B7275@hobu.co>



> On May 26, 2021, at 8:33 PM, Nyall Dawson <nyall.dawson at gmail.com> wrote:
> 
> Can I make the suggestion that a subset of
> https://github.com/OSGeo/gdal/pull/3827 could be created and be merged
> on its own? Specifically the commits which add the underlying API for
> GDAL to handle epochs should be controversy-free and suitable for
> merge outside of the larger/trickier question of patching in support
> to the data formats.

:thumbsup: 

As for the patching of data formats with GDAL application-specific metadata, as I said, I don't have a better option, but I'm satisfied if the process of writing epochs into metadata is opt-in (some kind of global CRS option? we already have magic switches like that).

Howard



From even.rouault at spatialys.com  Thu May 27 06:40:14 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 27 May 2021 15:40:14 +0200
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <33F2724E-FC91-46DA-A09F-10B4723B7275@hobu.co>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
 <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
 <CBE8B68B-F378-4691-A5EC-D456DCF968F4@hobu.co>
 <c82829b1-f528-2cc8-3439-97594d4c9222@spatialys.com>
 <CAB28AsgURRnS2df71d8+8wKg4PN69VG95jG0QO+qmCiBav==QA@mail.gmail.com>
 <33F2724E-FC91-46DA-A09F-10B4723B7275@hobu.co>
Message-ID: <a8dae05b-cda5-97ec-3123-d00172821c65@spatialys.com>

Hi,

- merging the underlying API without any format support is I believe of 
little interest. So I'll wait for at least one format (likely 
GeoPackage) to have merged in the master of their specification an 
official way of storing the coordinate epoch. I've also prepared an 
enhancement of the GeoTIFF spec regarding this 
(https://github.com/opengeospatial/geotiff/pull/99) that will likely be 
discussed at the next OGC GeoTIFF SWG meeting.

- I've just chatted with Howard and a good compromise could be that for 
formats that will have an official way of storing the coordinate epoch, 
we store it by default (when it is set), and for formats that we 
unilaterally extend (GML, KML, GeoJSON, etc.), we require an explicit 
GDAL_ENABLE_COORD_EPOCH_STORAGE=YES configuration option to be set 
(default would be NO). We might revisit in the future the default value.

- On the vector side of things, things will probably get more 
complicated for some drivers, as it is likely that Spatialite (see 
https://groups.google.com/g/spatialite-users/c/NtbuBpRzYBE) or PostGIS 
might have per-geometry coordinate epoch, not at the layer level. But I 
don't think that would invalidate having support for it at the layer 
level (those database already support a per-geometry CRS, but GDAL 
support for that is probably lacking a bit in those drivers), as a 
OGRGeometry can potentially be associated with its own 
OGRSpatialReference object.

Even

Le 27/05/2021 ? 15:01, Howard Butler a ?crit?:
>
>> On May 26, 2021, at 8:33 PM, Nyall Dawson <nyall.dawson at gmail.com> wrote:
>>
>> Can I make the suggestion that a subset of
>> https://github.com/OSGeo/gdal/pull/3827 could be created and be merged
>> on its own? Specifically the commits which add the underlying API for
>> GDAL to handle epochs should be controversy-free and suitable for
>> merge outside of the larger/trickier question of patching in support
>> to the data formats.
> :thumbsup:
>
> As for the patching of data formats with GDAL application-specific metadata, as I said, I don't have a better option, but I'm satisfied if the process of writing epochs into metadata is opt-in (some kind of global CRS option? we already have magic switches like that).
>
> Howard
>
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From sean at mapbox.com  Thu May 27 10:24:08 2021
From: sean at mapbox.com (Sean Gillies)
Date: Thu, 27 May 2021 11:24:08 -0600
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <a8dae05b-cda5-97ec-3123-d00172821c65@spatialys.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
 <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
 <CBE8B68B-F378-4691-A5EC-D456DCF968F4@hobu.co>
 <c82829b1-f528-2cc8-3439-97594d4c9222@spatialys.com>
 <CAB28AsgURRnS2df71d8+8wKg4PN69VG95jG0QO+qmCiBav==QA@mail.gmail.com>
 <33F2724E-FC91-46DA-A09F-10B4723B7275@hobu.co>
 <a8dae05b-cda5-97ec-3123-d00172821c65@spatialys.com>
Message-ID: <CADPhZXwosVHKyeGHkQ_R9y6fUVuJh0aSiKOYnSwMgi61bYKLaw@mail.gmail.com>

Hi all,

I've got a suggestion about limiting the number of formats.

GeoJSON and KML don't need support for a coordinate epoch. Both of these
are pretty cleared intended for low accuracy data (1-2 meters). KML and
GeoJSON don't support any CRS other than OGC:CRS84, which uses (it has been
pointed out many times) a datum ensemble that RFC 81 does not intend to
address. Right, Even? So let's leave these formats the way they are.

GML, GeoPackage, PostGIS, and the actively used raster formats like GeoTIFF
seem like the important ones to me.

On Thu, May 27, 2021 at 7:40 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> - merging the underlying API without any format support is I believe of
> little interest. So I'll wait for at least one format (likely
> GeoPackage) to have merged in the master of their specification an
> official way of storing the coordinate epoch. I've also prepared an
> enhancement of the GeoTIFF spec regarding this
> (https://github.com/opengeospatial/geotiff/pull/99) that will likely be
> discussed at the next OGC GeoTIFF SWG meeting.
>
> - I've just chatted with Howard and a good compromise could be that for
> formats that will have an official way of storing the coordinate epoch,
> we store it by default (when it is set), and for formats that we
> unilaterally extend (GML, KML, GeoJSON, etc.), we require an explicit
> GDAL_ENABLE_COORD_EPOCH_STORAGE=YES configuration option to be set
> (default would be NO). We might revisit in the future the default value.
>
> - On the vector side of things, things will probably get more
> complicated for some drivers, as it is likely that Spatialite (see
> https://groups.google.com/g/spatialite-users/c/NtbuBpRzYBE) or PostGIS
> might have per-geometry coordinate epoch, not at the layer level. But I
> don't think that would invalidate having support for it at the layer
> level (those database already support a per-geometry CRS, but GDAL
> support for that is probably lacking a bit in those drivers), as a
> OGRGeometry can potentially be associated with its own
> OGRSpatialReference object.
>
> Even
>
> Le 27/05/2021 ? 15:01, Howard Butler a ?crit :
> >
> >> On May 26, 2021, at 8:33 PM, Nyall Dawson <nyall.dawson at gmail.com>
> wrote:
> >>
> >> Can I make the suggestion that a subset of
> >> https://github.com/OSGeo/gdal/pull/3827 could be created and be merged
> >> on its own? Specifically the commits which add the underlying API for
> >> GDAL to handle epochs should be controversy-free and suitable for
> >> merge outside of the larger/trickier question of patching in support
> >> to the data formats.
> > :thumbsup:
> >
> > As for the patching of data formats with GDAL application-specific
> metadata, as I said, I don't have a better option, but I'm satisfied if the
> process of writing epochs into metadata is opt-in (some kind of global CRS
> option? we already have magic switches like that).
> >
> > Howard
> >
> >
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210527/21f54d3f/attachment.html>

From even.rouault at spatialys.com  Thu May 27 11:19:25 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 27 May 2021 20:19:25 +0200
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <CADPhZXwosVHKyeGHkQ_R9y6fUVuJh0aSiKOYnSwMgi61bYKLaw@mail.gmail.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
 <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
 <CBE8B68B-F378-4691-A5EC-D456DCF968F4@hobu.co>
 <c82829b1-f528-2cc8-3439-97594d4c9222@spatialys.com>
 <CAB28AsgURRnS2df71d8+8wKg4PN69VG95jG0QO+qmCiBav==QA@mail.gmail.com>
 <33F2724E-FC91-46DA-A09F-10B4723B7275@hobu.co>
 <a8dae05b-cda5-97ec-3123-d00172821c65@spatialys.com>
 <CADPhZXwosVHKyeGHkQ_R9y6fUVuJh0aSiKOYnSwMgi61bYKLaw@mail.gmail.com>
Message-ID: <502953ce-71ad-3d85-9f94-10ede6d4dbdc@spatialys.com>

Regarding KML and GeoJSON and OGC:CRS84 (or EPSG:4326 since they are the 
same thing, except axis order), that's a good and hard question. 
Actually that extends to *any* CRS built on top of them, like all the 
EPSG:32[6|7][01-60] UTM CRS, and that's probably for those later than 
things are the most problematic since there's no EPSG code for a UTM WGS 
84 (G1762) CRS. I guess people would potentially want to attach a 
coordinate epoch to them, and have a (non-encoded-in-the-format) 
convention that they actually mean WGS 84 (G1762) (or possibly an 
earlier realization. The datum ensemble reality of WGS 84 is really due 
to Transit which differs significantly from later realizations, which 
are pretty consistent between them within a few centimers) . So I 
wouldn't forbid such uses (I actually got private feedback that some 
people would even want to store coordinate epoch for CRS that aren't 
considered by EPSG as dynamic CRS, but which, for advanced uses, can 
still have things like deformation models, like NAD83(2011) that is used 
for most people as a static CRS, but is more a snapshot of a dynamic CRS 
with a conventional reference epoch of 2010.0).

That said, I'll probably drop the commit for KML as it is clearly a 
hack, but I think support for GeoJSON, which is cleaner, could still be 
useful at some point as it is widely used as an exchange format. But 
I'll defer for GeoJSON until we see if the /OGC Features/ and 
/Geometries JSON/ SWG comes with something regarding this.

Even

Le 27/05/2021 ? 19:24, Sean Gillies via gdal-dev a ?crit?:
> Hi all,
>
> I've got a suggestion about limiting the number of formats.
>
> GeoJSON and KML don't need support for a coordinate epoch. Both of 
> these are pretty cleared intended for low accuracy data (1-2 meters). 
> KML and GeoJSON don't support any CRS other than OGC:CRS84, which uses 
> (it has been pointed out many times) a datum ensemble that RFC 81 does 
> not intend to address. Right, Even? So let's leave these formats the 
> way they are.
>
> GML, GeoPackage, PostGIS, and the actively used raster formats like 
> GeoTIFF seem like the important ones to me.
>
> On Thu, May 27, 2021 at 7:40 AM Even Rouault 
> <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>
>     Hi,
>
>     - merging the underlying API without any format support is I
>     believe of
>     little interest. So I'll wait for at least one format (likely
>     GeoPackage) to have merged in the master of their specification an
>     official way of storing the coordinate epoch. I've also prepared an
>     enhancement of the GeoTIFF spec regarding this
>     (https://github.com/opengeospatial/geotiff/pull/99
>     <https://github.com/opengeospatial/geotiff/pull/99>) that will
>     likely be
>     discussed at the next OGC GeoTIFF SWG meeting.
>
>     - I've just chatted with Howard and a good compromise could be
>     that for
>     formats that will have an official way of storing the coordinate
>     epoch,
>     we store it by default (when it is set), and for formats that we
>     unilaterally extend (GML, KML, GeoJSON, etc.), we require an explicit
>     GDAL_ENABLE_COORD_EPOCH_STORAGE=YES configuration option to be set
>     (default would be NO). We might revisit in the future the default
>     value.
>
>     - On the vector side of things, things will probably get more
>     complicated for some drivers, as it is likely that Spatialite (see
>     https://groups.google.com/g/spatialite-users/c/NtbuBpRzYBE
>     <https://groups.google.com/g/spatialite-users/c/NtbuBpRzYBE>) or
>     PostGIS
>     might have per-geometry coordinate epoch, not at the layer level.
>     But I
>     don't think that would invalidate having support for it at the layer
>     level (those database already support a per-geometry CRS, but GDAL
>     support for that is probably lacking a bit in those drivers), as a
>     OGRGeometry can potentially be associated with its own
>     OGRSpatialReference object.
>
>     Even
>
>     Le 27/05/2021 ? 15:01, Howard Butler a ?crit?:
>     >
>     >> On May 26, 2021, at 8:33 PM, Nyall Dawson
>     <nyall.dawson at gmail.com <mailto:nyall.dawson at gmail.com>> wrote:
>     >>
>     >> Can I make the suggestion that a subset of
>     >> https://github.com/OSGeo/gdal/pull/3827
>     <https://github.com/OSGeo/gdal/pull/3827> could be created and be
>     merged
>     >> on its own? Specifically the commits which add the underlying
>     API for
>     >> GDAL to handle epochs should be controversy-free and suitable for
>     >> merge outside of the larger/trickier question of patching in
>     support
>     >> to the data formats.
>     > :thumbsup:
>     >
>     > As for the patching of data formats with GDAL
>     application-specific metadata, as I said, I don't have a better
>     option, but I'm satisfied if the process of writing epochs into
>     metadata is opt-in (some kind of global CRS option? we already
>     have magic switches like that).
>     >
>     > Howard
>     >
>     >
>
>
>
> -- 
> Sean Gillies
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210527/db12ba80/attachment-0001.html>

From gdt at lexort.com  Thu May 27 12:02:21 2021
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 27 May 2021 15:02:21 -0400
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <502953ce-71ad-3d85-9f94-10ede6d4dbdc@spatialys.com> (Even
 Rouault's message of "Thu, 27 May 2021 20:19:25 +0200")
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
 <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
 <CBE8B68B-F378-4691-A5EC-D456DCF968F4@hobu.co>
 <c82829b1-f528-2cc8-3439-97594d4c9222@spatialys.com>
 <CAB28AsgURRnS2df71d8+8wKg4PN69VG95jG0QO+qmCiBav==QA@mail.gmail.com>
 <33F2724E-FC91-46DA-A09F-10B4723B7275@hobu.co>
 <a8dae05b-cda5-97ec-3123-d00172821c65@spatialys.com>
 <CADPhZXwosVHKyeGHkQ_R9y6fUVuJh0aSiKOYnSwMgi61bYKLaw@mail.gmail.com>
 <502953ce-71ad-3d85-9f94-10ede6d4dbdc@spatialys.com>
Message-ID: <rmibl8wj8zm.fsf@s1.lexort.com>


Even Rouault <even.rouault at spatialys.com> writes:

> Regarding KML and GeoJSON and OGC:CRS84 (or EPSG:4326 since they are
> the same thing, except axis order), that's a good and hard
> question. Actually that extends to *any* CRS built on top of them,
> like all the EPSG:32[6|7][01-60] UTM CRS, and that's probably for
> those later than things are the most problematic since there's no EPSG
> code for a UTM WGS 84 (G1762) CRS. I guess people would potentially
> want to attach a coordinate epoch to them, and have a
> (non-encoded-in-the-format) convention that they actually mean WGS 84
> (G1762) (or possibly an earlier realization. The datum ensemble

I think the real problem here is that the EPSG authority is not defining
the things that need to be defined, perhaps mostly because of a valid
concern about an exploding list.  (And partly because of the decision to
put datum and projection both in a codepoint, leading to the need for D
x P codes.)

Given the problem, at least until there is a solution to all instances
of it, I think it's far more reasonable to say that "WGS84" means
"WGS84(G1762)" (at the moment) when being read or written and to treat it
that way, placing the fuzz from the almost entirely theoretical
possibility that there is any data in WGS84(TRANSIT) onto the data and
away from the datum, and thus not harming everybody else.

Ideally, all standards that reference WGS84 would be fixed (GPX,
GeoJSON, TMS, geo: URIs) but until that happens it's the best way to
deal that I can think of.  Essentially, it's fixing them from the
outside by declaring that they mean the most recently realization.

So here's a challenge: Does anyone have data stored in a dataset labeled
WGS84 where that data is *actually in WGS84(TRANSIT)*?  Does anyone know
of the existence of such data?  Has anyone even heard a rumor that
someone else has that data?  If so, please describe the expected error
of the data, and how it is used in a proj/gdal/etc. pipeline and what
problems would occur from it being treated as WGS84(G1762) when being read.

Keep in mind that for someone to have such data, it has to be from a
non-differential navigation solution and will thus be subject to SA and
have a 100m expected error.  (I have seen such data from 1992 and it
really is that bad.)

> reality of WGS 84 is really due to Transit which differs significantly
> from later realizations, which are pretty consistent between them
> within a few centimers) . So I wouldn't forbid such uses (I actually
> got private feedback that some people would even want to store
> coordinate epoch for CRS that aren't considered by EPSG as dynamic
> CRS, but which, for advanced uses, can still have things like
> deformation models, like NAD83(2011) that is used for most people as a
> static CRS, but is more a snapshot of a dynamic CRS with a
> conventional reference epoch of 2010.0).

I haven't been saying that that I know of, but indeed NAD83(2011)
appears to me to be no longer a static datum, when looked at closely
enough.

> That said, I'll probably drop the commit for KML as it is clearly a
> hack, but I think support for GeoJSON, which is cleaner, could still
> be useful at some point as it is widely used as an exchange
> format. But I'll defer for GeoJSON until we see if the /OGC Features/
> and /Geometries JSON/ SWG comes with something regarding this.

As I see it, GeoJSON is two different formats.  One is the format GDAL
(and qgis) read and write, which does have an attached CRS.  Then
there's the one standardized by IETF which made the decision to not
include CRS and label it WGS84.   It seems the open geo world has
rejected that IETF decision and been happily reading and writing CRS.

I have been using GeoJSON to write data (that lives in a geopackage) as
NAD83(2011) and also as ITF2014 (as a proxy for WGS84(G1762) to avoid
incorrect null transforms), and that's been working fine, modulo the
WGS84 confusion.  So "GeoJSON is intrinsically low accuracy" is
incorrect.   Perhaps "GeoJSON without an expressed CRS is interpreted as
WGS84 which is a mess at the moment, at least in the open source
world".  But GeoJSON with a CRS does not in my view have any increased
problems compared to other formats.


As for opt in, I don't see the logic, if we have a notion now that a
dynamic CRS without an epoch will omit it and a dynamic CRS with an
explictly-set epoch will include it.  I think it's better for people to
maybe run into an issue that to have it silently dropped.  And, it seems
that the likely handling is for it to be ignored on reading, which is
functionally like omitting it on write.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210527/2f298b6b/attachment.sig>

From jukka.rahkonen at maanmittauslaitos.fi  Thu May 27 13:43:20 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 27 May 2021 13:43:20 -0700 (MST)
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <502953ce-71ad-3d85-9f94-10ede6d4dbdc@spatialys.com>
References: <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
 <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
 <CBE8B68B-F378-4691-A5EC-D456DCF968F4@hobu.co>
 <c82829b1-f528-2cc8-3439-97594d4c9222@spatialys.com>
 <CAB28AsgURRnS2df71d8+8wKg4PN69VG95jG0QO+qmCiBav==QA@mail.gmail.com>
 <33F2724E-FC91-46DA-A09F-10B4723B7275@hobu.co>
 <a8dae05b-cda5-97ec-3123-d00172821c65@spatialys.com>
 <CADPhZXwosVHKyeGHkQ_R9y6fUVuJh0aSiKOYnSwMgi61bYKLaw@mail.gmail.com>
 <502953ce-71ad-3d85-9f94-10ede6d4dbdc@spatialys.com>
Message-ID: <1622148200561-0.post@n6.nabble.com>

Hi,

The group description of Features and Geometries JSON SWG
https://www.ogc.org/projects/groups/featgeojsonswg does not mention dynamic
coordinate systems but I can at least try to add the topic into the agenda
in the kick-off on next Tuesday (2021-06-01) even I am just on observer in
the group.

-Jukka Rahkonen-



Even Rouault-2 wrote
> That said, I'll probably drop the commit for KML as it is clearly a 
> hack, but I think support for GeoJSON, which is cleaner, could still be 
> useful at some point as it is widely used as an exchange format. But 
> I'll defer for GeoJSON until we see if the /OGC Features/ and 
> /Geometries JSON/ SWG comes with something regarding this.


Even Rouault-2 wrote
> Regarding KML and GeoJSON and OGC:CRS84 (or EPSG:4326 since they are the 
> same thing, except axis order), that's a good and hard question. 
> Actually that extends to *any* CRS built on top of them, like all the 
> EPSG:32[6|7][01-60] UTM CRS, and that's probably for those later than 
> things are the most problematic since there's no EPSG code for a UTM WGS 
> 84 (G1762) CRS. I guess people would potentially want to attach a 
> coordinate epoch to them, and have a (non-encoded-in-the-format) 
> convention that they actually mean WGS 84 (G1762) (or possibly an 
> earlier realization. The datum ensemble reality of WGS 84 is really due 
> to Transit which differs significantly from later realizations, which 
> are pretty consistent between them within a few centimers) . So I 
> wouldn't forbid such uses (I actually got private feedback that some 
> people would even want to store coordinate epoch for CRS that aren't 
> considered by EPSG as dynamic CRS, but which, for advanced uses, can 
> still have things like deformation models, like NAD83(2011) that is used 
> for most people as a static CRS, but is more a snapshot of a dynamic CRS 
> with a conventional reference epoch of 2010.0).
> 
> That said, I'll probably drop the commit for KML as it is clearly a 
> hack, but I think support for GeoJSON, which is cleaner, could still be 
> useful at some point as it is widely used as an exchange format. But 
> I'll defer for GeoJSON until we see if the /OGC Features/ and 
> /Geometries JSON/ SWG comes with something regarding this.
> 
> Even
> 
> Le 27/05/2021 ? 19:24, Sean Gillies via gdal-dev a ?crit?:
>> Hi all,
>>
>> I've got a suggestion about limiting the number of formats.
>>
>> GeoJSON and KML don't need support for a coordinate epoch. Both of 
>> these are pretty cleared intended for low accuracy data (1-2 meters). 
>> KML and GeoJSON don't support any CRS other than OGC:CRS84, which uses 
>> (it has been pointed out many times) a datum ensemble that RFC 81 does 
>> not intend to address. Right, Even? So let's leave these formats the 
>> way they are.
>>
>> GML, GeoPackage, PostGIS, and the actively used raster formats like 
>> GeoTIFF seem like the important ones to me.
>>
>> On Thu, May 27, 2021 at 7:40 AM Even Rouault 
>> &lt;

> even.rouault@

>  &lt;mailto:

> even.rouault@

> &gt;> wrote:
>>
>>     Hi,
>>
>>     - merging the underlying API without any format support is I
>>     believe of
>>     little interest. So I'll wait for at least one format (likely
>>     GeoPackage) to have merged in the master of their specification an
>>     official way of storing the coordinate epoch. I've also prepared an
>>     enhancement of the GeoTIFF spec regarding this
>>     (https://github.com/opengeospatial/geotiff/pull/99
>>     &lt;https://github.com/opengeospatial/geotiff/pull/99&gt;) that will
>>     likely be
>>     discussed at the next OGC GeoTIFF SWG meeting.
>>
>>     - I've just chatted with Howard and a good compromise could be
>>     that for
>>     formats that will have an official way of storing the coordinate
>>     epoch,
>>     we store it by default (when it is set), and for formats that we
>>     unilaterally extend (GML, KML, GeoJSON, etc.), we require an explicit
>>     GDAL_ENABLE_COORD_EPOCH_STORAGE=YES configuration option to be set
>>     (default would be NO). We might revisit in the future the default
>>     value.
>>
>>     - On the vector side of things, things will probably get more
>>     complicated for some drivers, as it is likely that Spatialite (see
>>     https://groups.google.com/g/spatialite-users/c/NtbuBpRzYBE
>>     &lt;https://groups.google.com/g/spatialite-users/c/NtbuBpRzYBE&gt;)
>> or
>>     PostGIS
>>     might have per-geometry coordinate epoch, not at the layer level.
>>     But I
>>     don't think that would invalidate having support for it at the layer
>>     level (those database already support a per-geometry CRS, but GDAL
>>     support for that is probably lacking a bit in those drivers), as a
>>     OGRGeometry can potentially be associated with its own
>>     OGRSpatialReference object.
>>
>>     Even
>>
>>     Le 27/05/2021 ? 15:01, Howard Butler a ?crit?:
>>     >
>>     >> On May 26, 2021, at 8:33 PM, Nyall Dawson
>>     &lt;

> nyall.dawson@

>  &lt;mailto:

> nyall.dawson@

> &gt;> wrote:
>>     >>
>>     >> Can I make the suggestion that a subset of
>>     >> https://github.com/OSGeo/gdal/pull/3827
>>     &lt;https://github.com/OSGeo/gdal/pull/3827&gt; could be created and
>> be
>>     merged
>>     >> on its own? Specifically the commits which add the underlying
>>     API for
>>     >> GDAL to handle epochs should be controversy-free and suitable for
>>     >> merge outside of the larger/trickier question of patching in
>>     support
>>     >> to the data formats.
>>     > :thumbsup:
>>     >
>>     > As for the patching of data formats with GDAL
>>     application-specific metadata, as I said, I don't have a better
>>     option, but I'm satisfied if the process of writing epochs into
>>     metadata is opt-in (some kind of global CRS option? we already
>>     have magic switches like that).
>>     >
>>     > Howard
>>     >
>>     >
>>
>>
>>
>> -- 
>> Sean Gillies
>>
>> _______________________________________________
>> gdal-dev mailing list
>> 

> gdal-dev at .osgeo

>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From nyall.dawson at gmail.com  Thu May 27 15:39:31 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 28 May 2021 08:39:31 +1000
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <a8dae05b-cda5-97ec-3123-d00172821c65@spatialys.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
 <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
 <CBE8B68B-F378-4691-A5EC-D456DCF968F4@hobu.co>
 <c82829b1-f528-2cc8-3439-97594d4c9222@spatialys.com>
 <CAB28AsgURRnS2df71d8+8wKg4PN69VG95jG0QO+qmCiBav==QA@mail.gmail.com>
 <33F2724E-FC91-46DA-A09F-10B4723B7275@hobu.co>
 <a8dae05b-cda5-97ec-3123-d00172821c65@spatialys.com>
Message-ID: <CAB28AsgaV+ZWGCZ+CRsjvbqc+_WBLVeDZJ+7vXGv7RnDz3joew@mail.gmail.com>

On Thu, 27 May 2021 at 23:40, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Hi,
>
> - merging the underlying API without any format support is I believe of
> little interest.

Well.. it would give users the command line tools to do static <->
dynamic transformation of data with the epoch specified in the command
line arguments. That's a quite compelling feature on its own, as it
could be used to transform data if the user has knowledge of the epoch
from other sources (e.g. in some pdf doc provided with the data, or if
they collected it themselves and know the correct epoch). I'm unaware
of any other tool (commercial or open source) which currently allows
this type of transformation.

Nyall

From jukka.rahkonen at maanmittauslaitos.fi  Fri May 28 01:08:48 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 28 May 2021 01:08:48 -0700 (MST)
Subject: [gdal-dev] Motion: adopt RFC 81: support for coordinate epochs
 in geospatial formats
In-Reply-To: <CAB28AsgaV+ZWGCZ+CRsjvbqc+_WBLVeDZJ+7vXGv7RnDz3joew@mail.gmail.com>
References: <bb832320-1fec-4b55-679a-d5b6119a6726@spatialys.com>
 <61D53F29-E562-433F-8EA8-69DBFDC67E8F@hobu.co>
 <969e460d-62c1-9750-6fb1-73b07c95a9e0@spatialys.com>
 <CADPhZXzPk+HAssvs0VMHFZWFy05KJx28AGfj6kCiSj=FUe_JNA@mail.gmail.com>
 <CBE8B68B-F378-4691-A5EC-D456DCF968F4@hobu.co>
 <c82829b1-f528-2cc8-3439-97594d4c9222@spatialys.com>
 <CAB28AsgURRnS2df71d8+8wKg4PN69VG95jG0QO+qmCiBav==QA@mail.gmail.com>
 <33F2724E-FC91-46DA-A09F-10B4723B7275@hobu.co>
 <a8dae05b-cda5-97ec-3123-d00172821c65@spatialys.com>
 <CAB28AsgaV+ZWGCZ+CRsjvbqc+_WBLVeDZJ+7vXGv7RnDz3joew@mail.gmail.com>
Message-ID: <1622189328507-0.post@n6.nabble.com>

Hi,

I guess that by "data" you mean datasets like GeoJSON file or GeoTIFF image. 
For individual coordinates folks in the Finnish Geospatial Institute (FGI)
do conversions like in this cs2cs example 

echo 2258573.56109 1010806.43899 5859099.49087 2021.26 | cs2cs -d 4 --area
finland EPSG:7789 EPSG:4936

where "2021.26" after the x, y, and z coordinates is the epoch and it gets
used with this operation:

projinfo -s EPSG:7789 -t EPSG:4936 -o PROJ --area Finland
-------------------------------------
Operation No. 1:
NKG:ITRF2014_TO_FI, ITRF2014 to ETRS89 (EUREF-FIN), 0.01 m, Finland -
onshore and offshore.
PROJ string:
+proj=pipeline
+step +proj=helmert +x=0 +y=0 +z=0 +rx=0 +ry=0 +rz=0 +s=0 +dx=0 +dy=0 +dz=0
+drx=8.5e-05 +dry=0.000531 +drz=-0.00077 +ds=0 +t_epoch=1989
+convention=position_vector
+step +inv +proj=deformation +t_epoch=2000.0 +grids=eur_nkg_nkgrf17vel.tif
+step +proj=helmert +x=0.15651 +y=-0.10993 +z=-0.10935 +rx=-0.00312861
+ry=-0.00378935 +rz=0.00403512 +s=0.00529 +convention=position_vector +step
+proj=deformation +dt=-3 +grids=eur_nkg_nkgrf17vel.tif

The same thing with Python:

    transformer = pyproj.Transformer.from_pipeline("""
        +proj=pipeline
            +step +proj=helmert +x=0 +y=0 +z=0 +rx=0 +ry=0 +rz=0 +s=0 +dx=0
                +dy=0 +dz=0 +drx=8.5e-05 +dry=0.000531 +drz=-0.00077 +ds=0
                +t_epoch=1989 +convention=position_vector
            +step +inv +proj=deformation +t_epoch=2000.0
                +grids=eur_nkg_nkgrf17vel.tif
            +step +proj=helmert +x=0.15651 +y=-0.10993 +z=-0.10935
                +rx=-0.00312861 +ry=-0.00378935 +rz=0.00403512 +s=0.00529
                +convention=position_vector
            +step +proj=deformation +dt=-3 +grids=eur_nkg_nkgrf17vel.tif""")
    coord = transformer.transform(x_wgs84, y_wgs84, z_wgs84, year)

-Jukka Rahkonen-


Nyall Dawson wrote
> On Thu, 27 May 2021 at 23:40, Even Rouault &lt;

> even.rouault@

> &gt; wrote:
>>
>> Hi,
>>
>> - merging the underlying API without any format support is I believe of
>> little interest.
> 
> Well.. it would give users the command line tools to do static <->
> dynamic transformation of data with the epoch specified in the command
> line arguments. That's a quite compelling feature on its own, as it
> could be used to transform data if the user has knowledge of the epoch
> from other sources (e.g. in some pdf doc provided with the data, or if
> they collected it themselves and know the correct epoch). I'm unaware
> of any other tool (commercial or open source) which currently allows
> this type of transformation.
> 
> Nyall
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From Jon.Morris at jbarisk.com  Fri May 28 06:56:56 2021
From: Jon.Morris at jbarisk.com (Jon Morris)
Date: Fri, 28 May 2021 13:56:56 +0000
Subject: [gdal-dev] How to stop gdal_translate using overviews when
 resampling
Message-ID: <LO2P123MB48614F93ED8C3E712A25C1F882229@LO2P123MB4861.GBRP123.PROD.OUTLOOK.COM>

Hello all,

One of our users reported a difference in outputs after we upgraded from GDAL 2.2 to 3.2. Our tool is using gdal_translate to resample a raster from 5m to 10m and the outputs are very different.

I'm ok with things changing between major versions, but when investigating, I found that the outputs also change depending on whether the input file has overviews. I was aware of the issue with gdalwarp where overviews are used as a shortcut (http://erouault.blogspot.com/2014/10/warping-overviews-and-warped-overviews.html), but haven't been able to find anything similar in the docs or the code when it comes to gdal_translate.

Should overviews make a difference? Is there any way to disable this behaviour, so the resampling is always done using the input raster and not the overviews?

Thanks,

Jon

Jon Morris
Software Developer



e: Jon.Morris at jbarisk.com
t: +44 (0)1756 799919
www.jbarisk.com
All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system. 
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/536fe907/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image013255.png
Type: image/png
Size: 9886 bytes
Desc: image013255.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/536fe907/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image421899.png
Type: image/png
Size: 651 bytes
Desc: image421899.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/536fe907/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image598543.png
Type: image/png
Size: 715 bytes
Desc: image598543.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/536fe907/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image704525.png
Type: image/png
Size: 966 bytes
Desc: image704525.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/536fe907/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image194176.png
Type: image/png
Size: 784 bytes
Desc: image194176.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/536fe907/attachment-0009.png>

From even.rouault at spatialys.com  Fri May 28 07:03:27 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 28 May 2021 16:03:27 +0200
Subject: [gdal-dev] How to stop gdal_translate using overviews when
 resampling
In-Reply-To: <LO2P123MB48614F93ED8C3E712A25C1F882229@LO2P123MB4861.GBRP123.PROD.OUTLOOK.COM>
References: <LO2P123MB48614F93ED8C3E712A25C1F882229@LO2P123MB4861.GBRP123.PROD.OUTLOOK.COM>
Message-ID: <c0ec31f3-acc2-5908-f9b1-2ebabb7ff3c6@spatialys.com>

With GDAL 3.3, you could add -oo OVERVIEW_LEVEL=NONE. See 
https://gdal.org/api/raster_c_api.html?highlight=overview_level#_CPPv410GDALOpenExPKcjPPCKcPPCKcPPCKc

Le 28/05/2021 ? 15:56, Jon Morris a ?crit?:
>
> Hello all,
>
> One of our users reported a difference in outputs after we upgraded 
> from GDAL 2.2 to 3.2. Our tool is using gdal_translate to resample a 
> raster from 5m to 10m and the outputs are very different.
>
> I'm ok with things changing between major versions, but when 
> investigating, I found that the outputs also change depending on 
> whether the input file has overviews. I was aware of the issue with 
> gdalwarp where overviews are used as a shortcut 
> (http://erouault.blogspot.com/2014/10/warping-overviews-and-warped-overviews.html 
> <http://erouault.blogspot.com/2014/10/warping-overviews-and-warped-overviews.html>), 
> but haven't been able to find anything similar in the docs or the code 
> when it comes to gdal_translate.
>
> Should overviews make a difference? Is there any way to disable this 
> behaviour, so the resampling is always done using the input raster and 
> not the overviews?
>
> Thanks,
>
> Jon
>
> *Jon Morris*
>
> *Software Developer*
>
> e: ? 	*Jon.Morris at jbarisk.com* <mailto:Jon.Morris at jbarisk.com>
> t: 	*+44?(0)1756?799919* <tel:+44%20(0)1756%20799919>
>
> 	
>
> *www.jbarisk.com* <http://www.jbarisk.com/>
>
> Facebook <https://www.facebook.com/TheFloodPeople>
>
> 	
> LinkedIn <https://www.linkedin.com/company/jba-risk-management/>
>
> 	
> Twitter <https://twitter.com/JBARisk>
>
> 	
> YouTube <https://www.youtube.com/channel/UC0iatom2jYbW96voW0rlpCw>
>
> 	
>
> All JBA Risk Management's email messages contain confidential 
> information and are intended only for the individual(s) named. If you 
> are not the named addressee you should not disseminate, distribute or 
> copy this e-mail.
> Please notify the sender immediately by email if you have received 
> this email by mistake and delete this email from your system.
> JBA Risk Management Limited is registered in England, company number 
> 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North 
> Yorkshire, BD23 3FD, England.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/05e919d6/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image013255.png
Type: image/png
Size: 9886 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/05e919d6/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image421899.png
Type: image/png
Size: 651 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/05e919d6/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image598543.png
Type: image/png
Size: 715 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/05e919d6/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image704525.png
Type: image/png
Size: 966 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/05e919d6/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image194176.png
Type: image/png
Size: 784 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/05e919d6/attachment-0009.png>

From Jon.Morris at jbarisk.com  Fri May 28 07:30:56 2021
From: Jon.Morris at jbarisk.com (Jon Morris)
Date: Fri, 28 May 2021 14:30:56 +0000
Subject: [gdal-dev] How to stop gdal_translate using overviews when
 resampling
In-Reply-To: <c0ec31f3-acc2-5908-f9b1-2ebabb7ff3c6@spatialys.com>
References: <LO2P123MB48614F93ED8C3E712A25C1F882229@LO2P123MB4861.GBRP123.PROD.OUTLOOK.COM>
 <c0ec31f3-acc2-5908-f9b1-2ebabb7ff3c6@spatialys.com>
Message-ID: <LO2P123MB48613912906A9E49C4BFBE1C82229@LO2P123MB4861.GBRP123.PROD.OUTLOOK.COM>


Hi Even,

Thanks for getting back to me. I should have mentioned we're using the Python bindings, but presumably we can still do something like this?
ds = gdal.OpenEx(path, open_options=['OVERVIEW_LEVEL=NONE'])

Jon

e: Jon.Morris at jbarisk.com
t: +44 (0)1756 799919
www.jbarisk.com
All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system. 
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.
From: Even Rouault <even.rouault at spatialys.com>
Sent: 28 May 2021 15:03
To: Jon Morris <Jon.Morris at jbarisk.com>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] How to stop gdal_translate using overviews when resampling


With GDAL 3.3, you could add -oo OVERVIEW_LEVEL=NONE. See https://gdal.org/api/raster_c_api.html?highlight=overview_level#_CPPv410GDALOpenExPKcjPPCKcPPCKcPPCKc
Le 28/05/2021 ? 15:56, Jon Morris a ?crit :
Hello all,

One of our users reported a difference in outputs after we upgraded from GDAL 2.2 to 3.2. Our tool is using gdal_translate to resample a raster from 5m to 10m and the outputs are very different.

I'm ok with things changing between major versions, but when investigating, I found that the outputs also change depending on whether the input file has overviews. I was aware of the issue with gdalwarp where overviews are used as a shortcut (http://erouault.blogspot.com/2014/10/warping-overviews-and-warped-overviews.html), but haven't been able to find anything similar in the docs or the code when it comes to gdal_translate.

Should overviews make a difference? Is there any way to disable this behaviour, so the resampling is always done using the input raster and not the overviews?

Thanks,

Jon

Jon Morris
Software Developer


e: ?
Jon.Morris at jbarisk.com<mailto:Jon.Morris at jbarisk.com>
t:
+44 (0)1756 799919<tel:+44%20(0)1756%20799919>
www.jbarisk.com<http://www.jbarisk.com/>
[cid:image001.png at 01D753D5.37F15020]
[Facebook]<https://www.facebook.com/TheFloodPeople>
[LinkedIn]<https://www.linkedin.com/company/jba-risk-management/>
[Twitter]<https://twitter.com/JBARisk>
[YouTube]<https://www.youtube.com/channel/UC0iatom2jYbW96voW0rlpCw>



All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system.
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/b7d67a8a/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 9886 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/b7d67a8a/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 651 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/b7d67a8a/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 715 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/b7d67a8a/attachment-0012.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 966 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/b7d67a8a/attachment-0013.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 784 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/b7d67a8a/attachment-0014.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image237338.png
Type: image/png
Size: 9886 bytes
Desc: image237338.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/b7d67a8a/attachment-0015.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image473618.png
Type: image/png
Size: 651 bytes
Desc: image473618.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/b7d67a8a/attachment-0016.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image820531.png
Type: image/png
Size: 715 bytes
Desc: image820531.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/b7d67a8a/attachment-0017.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image377592.png
Type: image/png
Size: 966 bytes
Desc: image377592.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/b7d67a8a/attachment-0018.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image446670.png
Type: image/png
Size: 784 bytes
Desc: image446670.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210528/b7d67a8a/attachment-0019.png>

From j1 at jimenezshaw.com  Mon May 31 07:55:27 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 31 May 2021 16:55:27 +0200
Subject: [gdal-dev] nodata value and alpha in Float32
Message-ID: <CADRrdKsjJeePk5EP4YhyX8X=o078v=7QW5SMVgutFeHLUgc+mg@mail.gmail.com>

Hi

I have a GeoTIFF with this characteristics:
- 6 bands
- last band is "Alpha" (with values 0 or 255, nothing else)
- Float32
- NoData value = -10000

The 5 first bands may have "nodata" pixels, not necessarily on all bands
simultaneously. (nodata pixels are usually broken or saturated pixels from
the sensor, and each band comes from a different sensor). The valid pixels
have values between 0 and 1

When I try to generate embedded overviews (with average interpolation) with
C++ or CreateCopy as COG (with default values), looks like it is using the
-10000 values as valid values, and producing results in the overviews like
-9990.6... that obviously are not anymore considered "nodata".

The first noticeable effect opening the file in QGIS, is that the min and
max value for each band are not anymore 0 and 1, but nonsense negative
numbers.

Can both Alpha and NoData live together properly?

Thanks.

PS I have the impression that with external ovr file it does not happen. I
am testing more.
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210531/49b7ab04/attachment.html>

From even.rouault at spatialys.com  Mon May 31 08:28:46 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 31 May 2021 17:28:46 +0200
Subject: [gdal-dev] nodata value and alpha in Float32
In-Reply-To: <CADRrdKsjJeePk5EP4YhyX8X=o078v=7QW5SMVgutFeHLUgc+mg@mail.gmail.com>
References: <CADRrdKsjJeePk5EP4YhyX8X=o078v=7QW5SMVgutFeHLUgc+mg@mail.gmail.com>
Message-ID: <9411d3b0-c32a-143f-1f56-5d58aae7287a@spatialys.com>

Javier,

mixing Alpha and NoData is generally not a good idea. Behavior will be 
different according to which part of the code is triggered. As far as I 
can see, the warping code should be able to handle both, but overview 
building will use the return of GDALRasterBand::GetMaskBand(), and when 
you have both nodata and alpha, this should be from the nodata value.

Confirmed by the following little experiment, so I'm not sure why you 
get what you get:

$ cat test.asc
ncols??????? 2
nrows??????? 2
xllcorner??? 440720.000000000000
yllcorner??? 3750120.000000000000
cellsize???? 60.000000000000
NODATA_value? -10000
 ?0.5 1.0
 ?2.5 -10000

$ cat test_alpha.asc
ncols??????? 2
nrows??????? 2
xllcorner??? 440720.000000000000
yllcorner??? 3750120.000000000000
cellsize???? 60.000000000000
NODATA_value? -10000
 ?255 255
 ?255 255

$ cat tmp.vrt
<VRTDataset rasterXSize="2" rasterYSize="2">
 ? <GeoTransform>? 4.4072000000000000e+05, 6.0000000000000000e+01,? 
0.0000000000000000e+00, 3.7513200000000000e+06,? 0.0000000000000000e+00, 
-6.0000000000000000e+01</GeoTransform>
 ? <VRTRasterBand dataType="Float32" band="1">
 ??? <NoDataValue>-10000</NoDataValue>
 ??? <ComplexSource>
 ????? <SourceFilename relativeToVRT="1">test.asc</SourceFilename>
 ????? <SourceBand>1</SourceBand>
 ????? <NODATA>-10000</NODATA>
 ??? </ComplexSource>
 ? </VRTRasterBand>
 ? <VRTRasterBand dataType="Float32" band="2">
 ??? <NoDataValue>-10000</NoDataValue>
 ??? <ColorInterp>Alpha</ColorInterp>
 ??? <ComplexSource>
 ????? <SourceFilename relativeToVRT="1">test_alpha.asc</SourceFilename>
 ????? <SourceBand>1</SourceBand>
 ????? <NODATA>-10000</NODATA>
 ??? </ComplexSource>
 ? </VRTRasterBand>
</VRTDataset>

$ gdal_translate? tmp.vrt test.tif

$ gdaladdo? -r average test.tif 2

$ gdal_translate test.tif /vsistdout/ -of aaigrid -b 1 -outsize 1 1
ncols??????? 1
nrows??????? 1
xllcorner??? 440720.000000000000
yllcorner??? 3751200.000000000000
cellsize???? 120.000000000000
NODATA_value? -10000
 ?1.3333333730697631836

Even

Le 31/05/2021 ? 16:55, Javier Jimenez Shaw a ?crit?:
> Hi
>
> I have a GeoTIFF with this characteristics:
> - 6 bands
> - last band is "Alpha" (with values 0 or 255, nothing else)
> - Float32
> - NoData value = -10000
>
> The 5 first bands may have "nodata" pixels, not necessarily on all 
> bands simultaneously. (nodata pixels are usually broken or saturated 
> pixels from the sensor, and each band comes from a different sensor). 
> The valid pixels have values between 0 and 1
>
> When I try to generate embedded overviews (with average interpolation) 
> with C++ or CreateCopy as COG (with default values), looks like it is 
> using the -10000 values as valid values, and producing results in the 
> overviews like -9990.6... that obviously are not anymore considered 
> "nodata".
>
> The first noticeable effect opening the file in QGIS, is that the min 
> and max value for each band are not anymore 0 and 1, but nonsense 
> negative numbers.
>
> Can both Alpha and NoData live together properly?
>
> Thanks.
>
> PS I have the impression that with external ovr file it does not 
> happen. I am testing more.
> .___ ._ ..._ .. . ._. .___ .. __ . _. . __..? ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210531/3b44b03a/attachment.html>

From j1 at jimenezshaw.com  Mon May 31 10:14:11 2021
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 31 May 2021 19:14:11 +0200
Subject: [gdal-dev] nodata value and alpha in Float32
In-Reply-To: <9411d3b0-c32a-143f-1f56-5d58aae7287a@spatialys.com>
References: <CADRrdKsjJeePk5EP4YhyX8X=o078v=7QW5SMVgutFeHLUgc+mg@mail.gmail.com>
 <9411d3b0-c32a-143f-1f56-5d58aae7287a@spatialys.com>
Message-ID: <CADRrdKu0z8O8uYNR7AGT6Pwpvn4=8VWs3VF6ZsKB_eDUF-AufA@mail.gmail.com>

Thank Even.

I think I found the reason of the problem. It is reproduced with more
bands. I created a second band just swapping the values in the diagonal.
Then, adding the second band to the tmp.vrt (2 normal + 1 alpha), and
following your steps, it is noticeable in the second band of the output:

$ cat test2.asc
ncols        2
nrows        2
xllcorner    440720.000000000000
yllcorner    3750120.000000000000
cellsize     60.000000000000
NODATA_value  -10000
 -10000 1.0
 2.5 0.5

$ cat tmp.vrt
<VRTDataset rasterXSize="2" rasterYSize="2">
  <GeoTransform>  4.4072000000000000e+05,  6.0000000000000000e+01,
 0.0000000000000000e+00,  3.7513200000000000e+06,  0.0000000000000000e+00,
-6.0000000000000000e+01</GeoTransform>
  <VRTRasterBand dataType="Float32" band="1">
    <NoDataValue>-10000</NoDataValue>
    <ComplexSource>
      <SourceFilename relativeToVRT="1">test.asc</SourceFilename>
      <SourceBand>1</SourceBand>
      <NODATA>-10000</NODATA>
    </ComplexSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Float32" band="2">
    <NoDataValue>-10000</NoDataValue>
    <ComplexSource>
      <SourceFilename relativeToVRT="1">test.2.asc</SourceFilename>
      <SourceBand>1</SourceBand>
      <NODATA>-10000</NODATA>
    </ComplexSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Float32" band="3">
    <NoDataValue>-10000</NoDataValue>
    <ColorInterp>Alpha</ColorInterp>
    <ComplexSource>
      <SourceFilename relativeToVRT="1">test_alpha.asc</SourceFilename>
      <SourceBand>1</SourceBand>
      <NODATA>-10000</NODATA>
    </ComplexSource>
  </VRTRasterBand>
</VRTDataset>

$ gdal_translate test.tif /vsistdout/ -of aaigrid -b 2 -outsize 1 1
ncols        1
nrows        1
xllcorner    440720.000000000000
yllcorner    3751200.000000000000
cellsize     120.000000000000
NODATA_value  -10000
 -3332.166748046875

I have not looked at the code, but seems that the mask is requested only
for the first band. Then the pixels in the other bands that are nodata, but
are valid in the first band are computed as valid... using -10000 in this
case. Looks like requesting the mask per band would fix it, right?

If this is the case, the alpha band is not the problem (confirmed removing
it from the tmp.vrt file).

Cheers
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
Entre dos pensamientos racionales
hay infinitos pensamientos irracionales.



On Mon, 31 May 2021 at 17:28, Even Rouault <even.rouault at spatialys.com>
wrote:

> Javier,
>
> mixing Alpha and NoData is generally not a good idea. Behavior will be
> different according to which part of the code is triggered. As far as I can
> see, the warping code should be able to handle both, but overview building
> will use the return of GDALRasterBand::GetMaskBand(), and when you have
> both nodata and alpha, this should be from the nodata value.
>
> Confirmed by the following little experiment, so I'm not sure why you get
> what you get:
>
> $ cat test.asc
> ncols        2
> nrows        2
> xllcorner    440720.000000000000
> yllcorner    3750120.000000000000
> cellsize     60.000000000000
> NODATA_value  -10000
>  0.5 1.0
>  2.5 -10000
>
> $ cat test_alpha.asc
> ncols        2
> nrows        2
> xllcorner    440720.000000000000
> yllcorner    3750120.000000000000
> cellsize     60.000000000000
> NODATA_value  -10000
>  255 255
>  255 255
>
> $ cat tmp.vrt
> <VRTDataset rasterXSize="2" rasterYSize="2">
>   <GeoTransform>  4.4072000000000000e+05,  6.0000000000000000e+01,
> 0.0000000000000000e+00,  3.7513200000000000e+06,  0.0000000000000000e+00,
> -6.0000000000000000e+01</GeoTransform>
>   <VRTRasterBand dataType="Float32" band="1">
>     <NoDataValue>-10000</NoDataValue>
>     <ComplexSource>
>       <SourceFilename relativeToVRT="1">test.asc</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <NODATA>-10000</NODATA>
>     </ComplexSource>
>   </VRTRasterBand>
>   <VRTRasterBand dataType="Float32" band="2">
>     <NoDataValue>-10000</NoDataValue>
>     <ColorInterp>Alpha</ColorInterp>
>     <ComplexSource>
>       <SourceFilename relativeToVRT="1">test_alpha.asc</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <NODATA>-10000</NODATA>
>     </ComplexSource>
>   </VRTRasterBand>
> </VRTDataset>
>
> $ gdal_translate  tmp.vrt test.tif
>
> $ gdaladdo  -r average test.tif 2
>
> $ gdal_translate test.tif /vsistdout/ -of aaigrid -b 1 -outsize 1 1
> ncols        1
> nrows        1
> xllcorner    440720.000000000000
> yllcorner    3751200.000000000000
> cellsize     120.000000000000
> NODATA_value  -10000
>  1.3333333730697631836
>
> Even
>
> Le 31/05/2021 ? 16:55, Javier Jimenez Shaw a ?crit :
>
> Hi
>
> I have a GeoTIFF with this characteristics:
> - 6 bands
> - last band is "Alpha" (with values 0 or 255, nothing else)
> - Float32
> - NoData value = -10000
>
> The 5 first bands may have "nodata" pixels, not necessarily on all bands
> simultaneously. (nodata pixels are usually broken or saturated pixels from
> the sensor, and each band comes from a different sensor). The valid pixels
> have values between 0 and 1
>
> When I try to generate embedded overviews (with average interpolation)
> with C++ or CreateCopy as COG (with default values), looks like it is using
> the -10000 values as valid values, and producing results in the overviews
> like -9990.6... that obviously are not anymore considered "nodata".
>
> The first noticeable effect opening the file in QGIS, is that the min and
> max value for each band are not anymore 0 and 1, but nonsense negative
> numbers.
>
> Can both Alpha and NoData live together properly?
>
> Thanks.
>
> PS I have the impression that with external ovr file it does not happen. I
> am testing more.
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210531/da90c2f7/attachment-0001.html>

From even.rouault at spatialys.com  Mon May 31 10:37:22 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 31 May 2021 19:37:22 +0200
Subject: [gdal-dev] nodata value and alpha in Float32
In-Reply-To: <CADRrdKu0z8O8uYNR7AGT6Pwpvn4=8VWs3VF6ZsKB_eDUF-AufA@mail.gmail.com>
References: <CADRrdKsjJeePk5EP4YhyX8X=o078v=7QW5SMVgutFeHLUgc+mg@mail.gmail.com>
 <9411d3b0-c32a-143f-1f56-5d58aae7287a@spatialys.com>
 <CADRrdKu0z8O8uYNR7AGT6Pwpvn4=8VWs3VF6ZsKB_eDUF-AufA@mail.gmail.com>
Message-ID: <e08bdc0d-4c54-a847-b6f3-3931ad7bdb0d@spatialys.com>

Javier,


> I have not looked at the code, but seems that the mask is requested 
> only for the first band.

You're right. GDALRegenerateOverviewsMultiBand() in 
https://github.com/OSGeo/gdal/blob/master/gdal/gcore/overview.cpp#L5057 
always takes the mask from the first band. Which is OK for an alpha band 
or a per-dataset materialized mask, but not for nodata. Please file a 
ticket about that.

Even


> Then the pixels in the other bands that are nodata, but are valid in 
> the first band are computed as valid... using -10000 in this case. 
> Looks like requesting the mask per band would fix it, right?
>
> If this is the case, the alpha band is not the problem (confirmed 
> removing it from the tmp.vrt file).
>
> Cheers
> .___ ._ ..._ .. . ._. .___ .. __ . _. . __..? ... .... ._ .__
> Entre dos pensamientos racionales
> hay infinitos pensamientos irracionales.
>
>
>
> On Mon, 31 May 2021 at 17:28, Even Rouault <even.rouault at spatialys.com 
> <mailto:even.rouault at spatialys.com>> wrote:
>
>     Javier,
>
>     mixing Alpha and NoData is generally not a good idea. Behavior
>     will be different according to which part of the code is
>     triggered. As far as I can see, the warping code should be able to
>     handle both, but overview building will use the return of
>     GDALRasterBand::GetMaskBand(), and when you have both nodata and
>     alpha, this should be from the nodata value.
>
>     Confirmed by the following little experiment, so I'm not sure why
>     you get what you get:
>
>     $ cat test.asc
>     ncols??????? 2
>     nrows??????? 2
>     xllcorner??? 440720.000000000000
>     yllcorner??? 3750120.000000000000
>     cellsize???? 60.000000000000
>     NODATA_value? -10000
>     ?0.5 1.0
>     ?2.5 -10000
>
>     $ cat test_alpha.asc
>     ncols??????? 2
>     nrows??????? 2
>     xllcorner??? 440720.000000000000
>     yllcorner??? 3750120.000000000000
>     cellsize???? 60.000000000000
>     NODATA_value? -10000
>     ?255 255
>     ?255 255
>
>     $ cat tmp.vrt
>     <VRTDataset rasterXSize="2" rasterYSize="2">
>     ? <GeoTransform>? 4.4072000000000000e+05, 6.0000000000000000e+01,?
>     0.0000000000000000e+00, 3.7513200000000000e+06,?
>     0.0000000000000000e+00, -6.0000000000000000e+01</GeoTransform>
>     ? <VRTRasterBand dataType="Float32" band="1">
>     ??? <NoDataValue>-10000</NoDataValue>
>     ??? <ComplexSource>
>     ????? <SourceFilename relativeToVRT="1">test.asc</SourceFilename>
>     ????? <SourceBand>1</SourceBand>
>     ????? <NODATA>-10000</NODATA>
>     ??? </ComplexSource>
>     ? </VRTRasterBand>
>     ? <VRTRasterBand dataType="Float32" band="2">
>     ??? <NoDataValue>-10000</NoDataValue>
>     ??? <ColorInterp>Alpha</ColorInterp>
>     ??? <ComplexSource>
>     ????? <SourceFilename
>     relativeToVRT="1">test_alpha.asc</SourceFilename>
>     ????? <SourceBand>1</SourceBand>
>     ????? <NODATA>-10000</NODATA>
>     ??? </ComplexSource>
>     ? </VRTRasterBand>
>     </VRTDataset>
>
>     $ gdal_translate? tmp.vrt test.tif
>
>     $ gdaladdo? -r average test.tif 2
>
>     $ gdal_translate test.tif /vsistdout/ -of aaigrid -b 1 -outsize 1 1
>     ncols??????? 1
>     nrows??????? 1
>     xllcorner??? 440720.000000000000
>     yllcorner??? 3751200.000000000000
>     cellsize???? 120.000000000000
>     NODATA_value? -10000
>     ?1.3333333730697631836
>
>     Even
>
>     Le 31/05/2021 ? 16:55, Javier Jimenez Shaw a ?crit?:
>>     Hi
>>
>>     I have a GeoTIFF with this characteristics:
>>     - 6 bands
>>     - last band is "Alpha" (with values 0 or 255, nothing else)
>>     - Float32
>>     - NoData value = -10000
>>
>>     The 5 first bands may have "nodata" pixels, not necessarily on
>>     all bands simultaneously. (nodata pixels are usually broken or
>>     saturated pixels from the sensor, and each band comes from a
>>     different sensor). The valid pixels have values between 0 and 1
>>
>>     When I try to generate embedded overviews (with average
>>     interpolation) with C++ or CreateCopy as COG (with default
>>     values), looks like it is using the -10000 values as valid
>>     values, and producing results in the overviews like -9990.6...
>>     that obviously are not anymore considered "nodata".
>>
>>     The first noticeable effect opening the file in QGIS, is that the
>>     min and max value for each band are not anymore 0 and 1, but
>>     nonsense negative numbers.
>>
>>     Can both Alpha and NoData live together properly?
>>
>>     Thanks.
>>
>>     PS I have the impression that with external ovr file it does not
>>     happen. I am testing more.
>>     .___ ._ ..._ .. . ._.? .___ .. __ . _. . __..? ... .... ._ .__
>>     Entre dos pensamientos racionales
>>     hay infinitos pensamientos irracionales.
>>
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>     -- 
>     http://www.spatialys.com  <http://www.spatialys.com>
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210531/967fb1b9/attachment.html>

From ap at solarrain.com  Mon May 31 13:30:33 2021
From: ap at solarrain.com (Al Piszcz)
Date: Mon, 31 May 2021 16:30:33 -0400
Subject: [gdal-dev] VRT layer definition question
Message-ID: <CADqLV_5wG8=7Txrkw3e1QESV1q++Aj2z9_H8Bbo2Kn3uXdhEsQ@mail.gmail.com>

I am having a challenge determining the right position or entry for the
Field entry, the spatial filter error below indicates my VRT format is not
correct. Is there a better approach? Thank you.

>ogrmerge.py -overwrite_ds -single -o __sdg\merge_02.csv __sdg\merge_01.vrt

*Warning 1: The 'lon' and/or 'lat' fields of the source layer are not
declared as numeric fields, so the spatial filter cannot be turned into an
attribute filter on them*

The VRT is defined as
<OGRVRTDataSource>
  <OGRVRTLayer name="file1">
    <SrcDataSource>lib/_data/sdg/data\file1.csv</SrcDataSource>
    <SrcLayer>file1</SrcLayer>
   <Field name="lon" type="real" />
   <Field name="lat" type="real" />
   <SrcRegion clip="true">POLYGON ((0.0 0.0, 0.0 0.1, 0.1 0.1, 0.1 0.0, 0.0
0.0))</SrcRegion>
   <GeometryType>wkbPoint</GeometryType>
   <LayerSRS>WGS84</LayerSRS>
   <GeometryField encoding="PointFromColumns" x="lon" y="lat"/>
</OGRVRTLayer>

  <OGRVRTLayer name="file2">
    <SrcDataSource>lib/_data/sdg/data\file2.csv</SrcDataSource>
    <SrcLayer>file2</SrcLayer>
   <Field name="lon" type="real" />
   <Field name="lat" type="real" />
   <SrcRegion clip="true">POLYGON ((0.0 0.0, 0.0 0.1, 0.1 0.1, 0.1 0.0, 0.0
0.0))</SrcRegion>
   <GeometryType>wkbPoint</GeometryType>
   <LayerSRS>WGS84</LayerSRS>
   <GeometryField encoding="PointFromColumns" x="lon" y="lat"/>
</OGRVRTLayer>

</OGRVRTDataSource>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210531/442a741a/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon May 31 13:41:55 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 31 May 2021 13:41:55 -0700 (MST)
Subject: [gdal-dev] VRT layer definition question
In-Reply-To: <CADqLV_5wG8=7Txrkw3e1QESV1q++Aj2z9_H8Bbo2Kn3uXdhEsQ@mail.gmail.com>
References: <CADqLV_5wG8=7Txrkw3e1QESV1q++Aj2z9_H8Bbo2Kn3uXdhEsQ@mail.gmail.com>
Message-ID: <1622493715145-0.post@n6.nabble.com>

Hi,

Please add couple of rows from your CSV file. Maybe the lon and lat fields
are otherwise OK but GDAL does not recognize them to contain numbers but
perhaps text. You can also check what sort of attributes ogrinfo reports
with

ogrinfo file1.csv -al -so

-Jukka Rahkonen-



Al Piszcz wrote
> I am having a challenge determining the right position or entry for the
> Field entry, the spatial filter error below indicates my VRT format is not
> correct. Is there a better approach? Thank you.
> 
>>ogrmerge.py -overwrite_ds -single -o __sdg\merge_02.csv __sdg\merge_01.vrt
> 
> *Warning 1: The 'lon' and/or 'lat' fields of the source layer are not
> declared as numeric fields, so the spatial filter cannot be turned into an
> attribute filter on them*
> 
> The VRT is defined as
> <OGRVRTDataSource>
>   
> <OGRVRTLayer name="file1">
>     
> <SrcDataSource>
> lib/_data/sdg/data\file1.csv
> </SrcDataSource>
>     
> <SrcLayer>
> file1
> </SrcLayer>
>    
> <Field name="lon" type="real" />
>    
> <Field name="lat" type="real" />
>    
> <SrcRegion clip="true">
> POLYGON ((0.0 0.0, 0.0 0.1, 0.1 0.1, 0.1 0.0, 0.0
> 0.0))
> </SrcRegion>
>    
> <GeometryType>
> wkbPoint
> </GeometryType>
>    
> <LayerSRS>
> WGS84
> </LayerSRS>
>    
> <GeometryField encoding="PointFromColumns" x="lon" y="lat"/>
> </OGRVRTLayer>
>   
> <OGRVRTLayer name="file2">
>     
> <SrcDataSource>
> lib/_data/sdg/data\file2.csv
> </SrcDataSource>
>     
> <SrcLayer>
> file2
> </SrcLayer>
>    
> <Field name="lon" type="real" />
>    
> <Field name="lat" type="real" />
>    
> <SrcRegion clip="true">
> POLYGON ((0.0 0.0, 0.0 0.1, 0.1 0.1, 0.1 0.0, 0.0
> 0.0))
> </SrcRegion>
>    
> <GeometryType>
> wkbPoint
> </GeometryType>
>    
> <LayerSRS>
> WGS84
> </LayerSRS>
>    
> <GeometryField encoding="PointFromColumns" x="lon" y="lat"/>
> </OGRVRTLayer>
> 
> </OGRVRTDataSource>
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From osgeo.mailinglist at gmail.com  Mon May 31 13:50:39 2021
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Mon, 31 May 2021 22:50:39 +0200
Subject: [gdal-dev] Options of gdalwarp not all exposed in the GDAL Python
 gdal.Warp ?
Message-ID: <CACPZzQ15BS8YHJ1xs+s0Rw-s4y_EVSAvGCKASF5YqhVbS+TjSQ@mail.gmail.com>

Hello all,

Due to question at
https://gis.stackexchange.com/questions/398223/how-to-remap-gdal-options-from-string-version-to-a-dictionary-version
I've taken a look at code

When trying to use gdal.Warp from Python, most options are supported but
some seems to be missing
Although an approach with only `gdal.Warp(dest, origin,
options='-overwrite')` can work without code change,
the dict approach like below seems to be simpler from a Python perspective

kwargsoptions = {"overwrite": True} # particular key does not exist, just
for the explanation
gdal.Warp(dest, origin, **kwargsoptions)

Below are the command options I only found in gdalwarp command line but
absent in the WarpOptions (from doc
https://gdal.org/programs/gdalwarp.html#cmdoption-gdalwarp-r)

[-ct string]
[-novshiftgrid]
[-refine_gcps tolerance [minimum_gcps]]
[-ovr level|AUTO|AUTO-n|NONE]
[-srcalpha|-nosrcalpha]
[-q]
[-if format]*
[-overwrite]
[-oo NAME=VALUE]*
[-doo NAME=VALUE]*

-srcalpha is present but not it counterpart -nosrcalpha

In gdal.py code, there are references to resampling option not in the doc
e.g below excerpt
(from
https://github.com/OSGeo/gdal/blob/master/gdal/swig/python/osgeo/gdal.py#L588)
.

elif resampleAlg == GRIORA_Bilinear:
    new_options += ['-rb']
elif resampleAlg == GRIORA_Cubic:
    new_options += ['-rc']
elif resampleAlg == GRIORA_CubicSpline:
    new_options += ['-rcs']

It may to need to be removed if looking at
https://gdal.org/programs/gdalwarp.html#cmdoption-gdalwarp-r
e.g (no -rcs, -rb or -rc options) except maybe for compatibility reason

I will try to make a PR. The main issue is more about naming for each
option.
I also don't know if command line and Python API "unsync" is due to
evolution, to intended API choices or other reasons.

I also only discuss here the gdal.Warp options but I suppose there are
maybe other Python tools ported from RFC 59
https://gdal.org/development/rfc/rfc59_utilities_as_a_library.html that may
have the same "unsync" issue.
Did not look at the moment


Regards

Thomas Gratier
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210531/a6ef2dc6/attachment.html>

From even.rouault at spatialys.com  Mon May 31 14:12:57 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 31 May 2021 23:12:57 +0200
Subject: [gdal-dev] Options of gdalwarp not all exposed in the GDAL
 Python gdal.Warp ?
In-Reply-To: <CACPZzQ15BS8YHJ1xs+s0Rw-s4y_EVSAvGCKASF5YqhVbS+TjSQ@mail.gmail.com>
References: <CACPZzQ15BS8YHJ1xs+s0Rw-s4y_EVSAvGCKASF5YqhVbS+TjSQ@mail.gmail.com>
Message-ID: <7386ff65-6a39-4d7d-0e77-121a7049e9b2@spatialys.com>

Thomas,

part of the unexposed options are indeed due to:

- sometimes desynchronization between the C++ and Python API

- sometimes not finding quickly a good enough Python name, and the 
option being of marginal use

- or because the handling of the switch must be done when 
opening/creating the input/output dataset and, as gdal.Warp() can accept 
dataset objects in addition to filenames, the option would be without 
effect. If you look at apps/gdalwarp_lib.cpp in the 
GDALWarpAppOptionsNew() function, all switches that have only the effect 
of setting a field of the psOptionsForBinary structure aren't good 
candidates to be mapped as kwargsoptions. -overwrite is in this category 
(if you pass an output dataset *object*)

Regarding -rb, -rc, -rcs they are historical shortcurs for -r bilinear, 
-r cubic, -r cubicspline that have been undocumented for phasing them 
out as we have now a bunch of methods compared to the few ones of older 
versions.

Even

Le 31/05/2021 ? 22:50, Thomas Gratier a ?crit?:
> Hello all,
>
> Due to question at 
> https://gis.stackexchange.com/questions/398223/how-to-remap-gdal-options-from-string-version-to-a-dictionary-version 
> <https://gis.stackexchange.com/questions/398223/how-to-remap-gdal-options-from-string-version-to-a-dictionary-version>
> I've taken a look at code
>
> When trying to use gdal.Warp from Python, most options are supported 
> but some seems to be missing
> Although an approach with only `gdal.Warp(dest, origin, 
> options='-overwrite')` can work without code change,
> the dict approach like below seems to be simpler from a Python perspective
>
> kwargsoptions = {"overwrite": True} # particular key does not exist, 
> just for the explanation
> gdal.Warp(dest, origin, **kwargsoptions)
>
> Below are the command options I only found in gdalwarp command line 
> but absent in the WarpOptions (from doc 
> https://gdal.org/programs/gdalwarp.html#cmdoption-gdalwarp-r 
> <https://gdal.org/programs/gdalwarp.html#cmdoption-gdalwarp-r>)
>
> [-ct string]
> [-novshiftgrid]
> [-refine_gcps tolerance [minimum_gcps]]
> [-ovr level|AUTO|AUTO-n|NONE]
> [-srcalpha|-nosrcalpha]
> [-q]
> [-if format]*
> [-overwrite]
> [-oo NAME=VALUE]*
> [-doo NAME=VALUE]*
>
> -srcalpha is present but not it counterpart -nosrcalpha
>
> In gdal.py code, there are references to resampling option not in the 
> doc e.g below excerpt
> (from 
> https://github.com/OSGeo/gdal/blob/master/gdal/swig/python/osgeo/gdal.py#L588 
> <https://github.com/OSGeo/gdal/blob/master/gdal/swig/python/osgeo/gdal.py#L588>) 
> .
>
> elif resampleAlg == GRIORA_Bilinear:
> ??? new_options += ['-rb']
> elif resampleAlg == GRIORA_Cubic:
> ??? new_options += ['-rc']
> elif resampleAlg == GRIORA_CubicSpline:
> ??? new_options += ['-rcs']
>
> It may to need to be removed if looking at 
> https://gdal.org/programs/gdalwarp.html#cmdoption-gdalwarp-r 
> <https://gdal.org/programs/gdalwarp.html#cmdoption-gdalwarp-r>
> e.g (no -rcs, -rb or -rc options) except maybe for compatibility reason
>
> I will try to make a PR. The main issue is more about naming for each 
> option.
> I also don't know if command line and Python API "unsync" is due to 
> evolution, to intended API choices or other reasons.
>
> I also only discuss here the gdal.Warp options but I suppose there are 
> maybe other Python tools ported from RFC 59
> https://gdal.org/development/rfc/rfc59_utilities_as_a_library.html 
> <https://gdal.org/development/rfc/rfc59_utilities_as_a_library.html> 
> that may have the same "unsync" issue.
> Did not look at the moment
>
>
> Regards
>
> Thomas Gratier
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210531/27931d2a/attachment.html>

From ron.palmer at pgcgroup.com.au  Mon May 31 17:10:17 2021
From: ron.palmer at pgcgroup.com.au (Ron Palmer)
Date: Tue, 1 Jun 2021 10:10:17 +1000
Subject: [gdal-dev] translating a grid
Message-ID: <a7efa8c3-d99c-327a-93ba-20896d0414e9@pgcgroup.com.au>

I work in local coordinates resulting in a grid. Is there an easy way to 
translate the grids X and Y coordinates, eg add 580,000 to X and add 
5,840,000 to Y shift (which would then be a common EPSG)?

There are many options to hack this, eg edit an ERS file, but it would 
be nice to be able to do this a bit more gracefully...

I have looked at gdaltransform. gdalwarp and gdal_translate but I do not 
seem to find a suitable option. Perhaps the -ct but I am not sure of the 
syntax...

Thanks,

Ron


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210601/53063651/attachment-0001.html>

From ap at solarrain.com  Mon May 31 23:01:10 2021
From: ap at solarrain.com (Al Piszcz)
Date: Tue, 1 Jun 2021 02:01:10 -0400
Subject: [gdal-dev] VRT layer definition question
Message-ID: <CADqLV_4WU0TVx9uuh3B8i3_msFXbVKGkY-iFYpReBx-zmbmb-g@mail.gmail.com>

Jukka:
Thank you, interesting, lat,lon interpreted as string by gdalinfo.

==== Request 1
ogrinfo file1.csv -al -so
INFO: Open of `file1.csv'
      using driver `CSV' successful.

Layer name: file1
Geometry: None
Feature Count: 1000
Layer SRS WKT:
(unknown)
lon: String (0.0)
lat: String (0.0)
id: String (0.0)
field_4: String (0.0)

=== Request 2
::: file1.csv
lon,lat,id,
0.084362378404311,0.08587464990542,"0"
0.090601035370249,0.005574551382458,"1"
0.074081946277276,0.020574321282505,"2"
0.034318505618178,0.034922734033886,"3"
0.008330436091964,0.013543226571866,"4"



Message: 2
Date: Mon, 31 May 2021 13:41:55 -0700 (MST)
From: jratike80 <jukka.rahkonen at maanmittauslaitos.fi>
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev]
Message-ID: <1622493715145-0.post at n6.nabble.com>
Content-Type: text/plain; charset=us-ascii

Hi,

Please add couple of rows from your CSV file. Maybe the lon and lat fields
are otherwise OK but GDAL does not recognize them to contain numbers but
perhaps text. You can also check what sort of attributes ogrinfo reports
with

ogrinfo file1.csv -al -so

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210601/46e9d616/attachment.html>

