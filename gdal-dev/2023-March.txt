From even.rouault at spatialys.com  Wed Mar  1 04:50:35 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 1 Mar 2023 13:50:35 +0100
Subject: [gdal-dev] Motion: adopt RFC 93: OGRLayer::UpdateFeature()
 method
In-Reply-To: <42b36369-2622-a1e1-4e68-b1e31949d1cf@spatialys.com>
References: <42b36369-2622-a1e1-4e68-b1e31949d1cf@spatialys.com>
Message-ID: <1928afdc-c947-d067-0fb6-a6b20fb5103a@spatialys.com>

Hi

I declare this motion passed with +1 from PSC members Jukka, MateuszL 
and me.

Even

Le 22/02/2023 ? 10:19, Even Rouault a ?crit?:
> Hi,
>
> Motion: adopt RFC 93: OGRLayer::UpdateFeature() method
>
> https://github.com/OSGeo/gdal/pull/7249
>
> Starting with my +1
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From eruiz at aplitop.com  Thu Mar  2 04:37:51 2023
From: eruiz at aplitop.com (Elena Ruiz)
Date: Thu, 2 Mar 2023 12:37:51 +0000
Subject: [gdal-dev] Retry and delay when downloading WMS
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.de0c0df4-1b03-49c7-9d3e-6cd9f05d263e@emailsignatures365.codetwo.com>
Message-ID: <AM0P192MB04986B51198961D34C9B8D59BBB29@AM0P192MB0498.EURP192.PROD.OUTLOOK.COM>

Hello, I am using gdal_translate to download images from web services, and for the times that the server returns 504 or 502 errors, which are because the server is not available at that moment or because several requests have been made to it, I am trying to force the server to download the image using the variables GDAL_HTTP_MAX_RETRY and GDAL_HTTP_RETRY_DELAY, to increase the number of retries and wait time between calls to the server, but still there are times when it gives an error (502 or 504) and does not download the image. Am I using these variables correctly, or is there another way to do it? Thank you and regards
________________________________

[https://www.aplitop.com/descargas/firma1.jpg]


Elena Ruiz
Sofware Development & Technical Support
Tel. +34 952 43 97 71
eruiz at aplitop.com
Sumatra, 9 - 29190 M?laga (Spain)
www.aplitop.com

[cid:SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png]<https://www.facebook.com/AplitopSL/>   [cid:SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png] <https://twitter.com/aplitop>    [cid:SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png] <https://www.linkedin.com/company/aplitop>    [cid:SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png] <https://www.youtube.com/user/aplitop>


In accordance with the provisions of the European Regulation of Data Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679), we inform you that the data and the information you provide us through this medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions and inform you about our products. The data provided will be kept as long as it does not request its cessation and will not be transferred to third parties except in cases where there is a legal obligation. You have the right to access your personal data, correct inaccurate data or request its deletion when the data is no longer necessary for the purposes that were collected, as well as any rights recognized in the RGPD 2016/679
<https://www.aplitop.com/New/en/443/publication-of-point-clouds-on-web>

<https://www.aplitop.com/New/en/438/tcpmdt-v9-is-here><https://www.aplitop.com/Event/en/429/aplitop-at-intergeo-2022-essen>

<https://www.aplitop.com/Event/en/358/intergeo-2019>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230302/ea070146/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
Type: image/png
Size: 365 bytes
Desc: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230302/ea070146/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
Type: image/png
Size: 619 bytes
Desc: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230302/ea070146/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
Type: image/png
Size: 468 bytes
Desc: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230302/ea070146/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
Type: image/png
Size: 817 bytes
Desc: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230302/ea070146/attachment-0003.png>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Mar  2 06:12:13 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 2 Mar 2023 14:12:13 +0000
Subject: [gdal-dev] Retry and delay when downloading WMS
In-Reply-To: <AM0P192MB04986B51198961D34C9B8D59BBB29@AM0P192MB0498.EURP192.PROD.OUTLOOK.COM>
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.de0c0df4-1b03-49c7-9d3e-6cd9f05d263e@emailsignatures365.codetwo.com>
 <AM0P192MB04986B51198961D34C9B8D59BBB29@AM0P192MB0498.EURP192.PROD.OUTLOOK.COM>
Message-ID: <AM0PR09MB3219029B0A8BA162F6FAC0CEFDB29@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Run your command with " --config CPL_CURL_VERBOSE YES" and you should see all the http messages and what the server answers.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Elena Ruiz
L?hetetty: torstai 2. maaliskuuta 2023 14.38
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Retry and delay when downloading WMS

Hello, I am using gdal_translate to download images from web services, and for the times that the server returns 504 or 502 errors, which are because the server is not available at that moment or because several requests have been made to it, I am trying to force the server to download the image using the variables GDAL_HTTP_MAX_RETRY and GDAL_HTTP_RETRY_DELAY, to increase the number of retries and wait time between calls to the server, but still there are times when it gives an error (502 or 504) and does not download the image. Am I using these variables correctly, or is there another way to do it? Thank you and regards
________________________________

[https://www.aplitop.com/descargas/firma1.jpg]
Elena Ruiz
Sofware Development & Technical Support
Tel. +34 952 43 97 71
eruiz at aplitop.com<mailto:eruiz at aplitop.com>
Sumatra, 9 - 29190 M?laga (Spain)
www.aplitop.com<http://www.aplitop.com>

[cid:image001.png at 01D94D21.BE5F0CA0]<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.facebook.com%2FAplitopSL%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C780cd8ca2c9e4829b0eb08db1b1b026f%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C1%7C638133575064918939%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=IwOIohXvIbpNrLP6Zu3wwmMZ%2Fkc4VJhVHnrKMfUjEpM%3D&reserved=0>   [cid:image002.png at 01D94D21.BE5F0CA0] <https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Ftwitter.com%2Faplitop&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C780cd8ca2c9e4829b0eb08db1b1b026f%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C1%7C638133575064918939%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=xwaGq4PnAzAaXXmZRfkhlb5FIfErwTj9iR61gV7T%2Fhg%3D&reserved=0>    [cid:image003.png at 01D94D21.BE5F0CA0] <https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.linkedin.com%2Fcompany%2Faplitop&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C780cd8ca2c9e4829b0eb08db1b1b026f%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C1%7C638133575065075162%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=cBI7Tw1VfDxkgscc1AAri7w92Tut%2BEJob79R41qod3o%3D&reserved=0>    [cid:image004.png at 01D94D21.BE5F0CA0] <https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.youtube.com%2Fuser%2Faplitop&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C780cd8ca2c9e4829b0eb08db1b1b026f%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C1%7C638133575065075162%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C0%7C%7C%7C&sdata=uqugsm1%2BscYY2plKHNDlsp0Kz%2Fn6YTPJkHMxsCj7qXM%3D&reserved=0>

In accordance with the provisions of the European Regulation of Data Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679), we inform you that the data and the information you provide us through this medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions and inform you about our products. The data provided will be kept as long as it does not request its cessation and will not be transferred to third parties except in cases where there is a legal obligation. You have the right to access your personal data, correct inaccurate data or request its deletion when the data is no longer necessary for the purposes that were collected, as well as any rights recognized in the RGPD 2016/679




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230302/78a3086a/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 365 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230302/78a3086a/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 619 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230302/78a3086a/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 468 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230302/78a3086a/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 817 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230302/78a3086a/attachment-0007.png>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Mar  3 00:16:42 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 3 Mar 2023 08:16:42 +0000
Subject: [gdal-dev] Retry and delay when downloading WMS
In-Reply-To: <AM0P192MB04982D1BED0DA6890FB6A42FBBB39@AM0P192MB0498.EURP192.PROD.OUTLOOK.COM>
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.de0c0df4-1b03-49c7-9d3e-6cd9f05d263e@emailsignatures365.codetwo.com>
 <AM0P192MB04986B51198961D34C9B8D59BBB29@AM0P192MB0498.EURP192.PROD.OUTLOOK.COM>
 <AM0PR09MB3219029B0A8BA162F6FAC0CEFDB29@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <AM0P192MB04982D1BED0DA6890FB6A42FBBB39@AM0P192MB0498.EURP192.PROD.OUTLOOK.COM>
Message-ID: <AM0PR09MB321913337DB4FA9ADBA057DFFDB39@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

For a controlled test you should have a way to make the server side to fail when you want so. I am not sure if simply unplugging you network connector would make GDAL to repeat the requests. Installing your local WMS server and stopping it while GDAL is working could be another possibility. Developers probably have better hints for testing.

-Jukka Rahkonen-

L?hett?j?: Elena Ruiz <eruiz at aplitop.com>
L?hetetty: perjantai 3. maaliskuuta 2023 10.07
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Aihe: RE: Retry and delay when downloading WMS

Hello, thanks for your answer, I have tried the command and it shows me the traffic with the server but it does not show the number of retries (it always shows 2 retries), that is, if I increase the variable GDAL_HTTP_MAX_RETRY it is not reflected in the traffic, is there any way to confirm which variables are being used GDAL_HTTP_MAX_RETRY and GDAL_HTTP_RETRY_DELAY? Thanks an regards




________________________________

Elena Ruiz

[L?hett?j? poisti kuvan.]
Sofware Development & Technical Support
Tel.: +34 952 43 97 71
eruiz at aplitop.com
www.aplitop.com










De: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Enviado el: jueves, 2 de marzo de 2023 15:12
Para: Elena Ruiz <eruiz at aplitop.com>; gdal-dev at lists.osgeo.org
Asunto: Re: Retry and delay when downloading WMS

Hi,

Run your command with " --config CPL_CURL_VERBOSE YES" and you should see all the http messages and what the server answers.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Elena Ruiz
L?hetetty: torstai 2. maaliskuuta 2023 14.38
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Retry and delay when downloading WMS

Hello, I am using gdal_translate to download images from web services, and for the times that the server returns 504 or 502 errors, which are because the server is not available at that moment or because several requests have been made to it, I am trying to force the server to download the image using the variables GDAL_HTTP_MAX_RETRY and GDAL_HTTP_RETRY_DELAY, to increase the number of retries and wait time between calls to the server, but still there are times when it gives an error (502 or 504) and does not download the image. Am I using these variables correctly, or is there another way to do it? Thank you and regards
________________________________

[L?hett?j? poisti kuvan.]
Elena Ruiz
Sofware Development & Technical Support
Tel. +34 952 43 97 71
eruiz at aplitop.com<mailto:eruiz at aplitop.com>
Sumatra, 9 - 29190 M?laga (Spain)
www.aplitop.com<https://eur06.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.aplitop.com%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C18ff1755a52e489e18b008db1bbe3bfd%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638134276105159626%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=kmUbQWN9rOv6wrd8yD%2BUJ0cBoDw4bdQYDSt0chdxD2M%3D&reserved=0>

[cid:image001.png at 01D94DB9.3EC9A070]<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.facebook.com%2FAplitopSL%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C18ff1755a52e489e18b008db1bbe3bfd%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638134276105159626%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Sal2vvas2N%2BCiHlaCfRbUCzKxEjRBenWiLGZVcDUFmY%3D&reserved=0>   [cid:image002.png at 01D94DB9.3EC9A070] <https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Ftwitter.com%2Faplitop&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C18ff1755a52e489e18b008db1bbe3bfd%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638134276105159626%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=2C%2BYoPbnMS6P8lcnAUkp09y6revsTbEf2q8doALL0c0%3D&reserved=0>    [cid:image003.png at 01D94DB9.3EC9A070] <https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.linkedin.com%2Fcompany%2Faplitop&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C18ff1755a52e489e18b008db1bbe3bfd%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638134276105159626%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=RwqG3Aix%2BvFlcFFzf36DT200bAJ3fJQQzisBWZ21E1o%3D&reserved=0>    [cid:image004.png at 01D94DB9.3EC9A070] <https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.youtube.com%2Fuser%2Faplitop&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C18ff1755a52e489e18b008db1bbe3bfd%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638134276105159626%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=UocVK3S47a1ra41xny2ciCuE2vmCSFR7hjezdn7pNA4%3D&reserved=0>

In accordance with the provisions of the European Regulation of Data Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679), we inform you that the data and the information you provide us through this medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions and inform you about our products. The data provided will be kept as long as it does not request its cessation and will not be transferred to third parties except in cases where there is a legal obligation. You have the right to access your personal data, correct inaccurate data or request its deletion when the data is no longer necessary for the purposes that were collected, as well as any rights recognized in the RGPD 2016/679


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230303/d2fd5e38/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ~WRD0000.jpg
Type: image/jpeg
Size: 823 bytes
Desc: ~WRD0000.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230303/d2fd5e38/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 365 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230303/d2fd5e38/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 619 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230303/d2fd5e38/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 468 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230303/d2fd5e38/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 817 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230303/d2fd5e38/attachment-0007.png>

From bontepaarden at gmail.com  Fri Mar  3 04:51:36 2023
From: bontepaarden at gmail.com (Paul Meems)
Date: Fri, 3 Mar 2023 13:51:36 +0100
Subject: [gdal-dev] Convex hull with holes
Message-ID: <CAHNf2YTuaEEZAuY0HH1QiAF-gR6b_w6z+z_mCAUf_Qwodo7Lkg@mail.gmail.com>

How can I algorithmically create a parcel border that accounts for islands
or holes within the parcel based on a list of coordinates?

While GDAL+GEOS has a Convex hull method, it only identifies the outer
border.

Has GDAL+GEOS a method that I can use to detect inner holes as well, such
as in a donut-shaped field?

The output can be json or shapefile, that doesn't matter.

Thanks,

Paul Meems
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230303/9772b478/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Mar  3 05:13:31 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 3 Mar 2023 13:13:31 +0000
Subject: [gdal-dev] Convex hull with holes
In-Reply-To: <CAHNf2YTuaEEZAuY0HH1QiAF-gR6b_w6z+z_mCAUf_Qwodo7Lkg@mail.gmail.com>
References: <CAHNf2YTuaEEZAuY0HH1QiAF-gR6b_w6z+z_mCAUf_Qwodo7Lkg@mail.gmail.com>
Message-ID: <AM0PR09MB3219F156A96B35BD38830B99FDB39@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

So you have an uncategorized bunch of points and you wish to have an algorithm that recognizes outer and inner rings automatically? I fear that is not as easy as it may appear. Have a look at the annexed image with two polygons having the same vertices. How could an algorithm know which interpretation is correct? In this simple case you could make a convex hull, delete the vertices which were consumed for the outer ring, and create a new ring from the remaining points, but generally it will not work if there are two holes, for example.

If the points come from a GPX device, make the application to record indexes for both the points and the rings ?ring1-point1, ring1-point2---ring2-point1,ring2-point2? and construct the polygon ring by ring.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Paul Meems
L?hetetty: perjantai 3. maaliskuuta 2023 14.52
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Convex hull with holes

How can I algorithmically create a parcel border that accounts for islands or holes within the parcel based on a list of coordinates?

While GDAL+GEOS has a Convex hull method, it only identifies the outer border.

Has GDAL+GEOS a method that I can use to detect inner holes as well, such as in a donut-shaped field?

The output can be json or shapefile, that doesn't matter.

Thanks,

Paul Meems
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230303/c05fb4ae/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: two_polygons.png
Type: image/png
Size: 7111 bytes
Desc: two_polygons.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230303/c05fb4ae/attachment-0001.png>

From bontepaarden at gmail.com  Fri Mar  3 06:46:35 2023
From: bontepaarden at gmail.com (Paul Meems)
Date: Fri, 3 Mar 2023 15:46:35 +0100
Subject: [gdal-dev] Convex hull with holes
In-Reply-To: <AM0PR09MB3219F156A96B35BD38830B99FDB39@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <CAHNf2YTuaEEZAuY0HH1QiAF-gR6b_w6z+z_mCAUf_Qwodo7Lkg@mail.gmail.com>
 <AM0PR09MB3219F156A96B35BD38830B99FDB39@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <CAHNf2YSuxGcYoU-21H1AGgvehfRAyh5cqLmM+5OvT=1ZBJHFVw@mail.gmail.com>

Thanks Jukka for your reply.

I understand it is hard.
In my case, I have a lot of data points making your edge case not a problem
for me.
The data points are collected driving over a field with 1 or more sensors.
The result can be something like this:
[image: image.png]
The red dots are the data points and I manually created the black border
and added a small buffer.
The red dots are transformed into polygons using inverse distance and
afterward, I need to 'blank' the data using the black border.
I can automate all steps except for creating this field border.

I'm also struggling to get a proper name for my needs, making it harder to
Google for a solution.
'Convex hull' is not correct. What would be a more appropriate name?

Regards,

Paul

Op vr 3 mrt. 2023 om 14:13 schreef Rahkonen Jukka <
jukka.rahkonen at maanmittauslaitos.fi>:

> Hi,
>
>
>
> So you have an uncategorized bunch of points and you wish to have an
> algorithm that recognizes outer and inner rings automatically? I fear that
> is not as easy as it may appear. Have a look at the annexed image with two
> polygons having the same vertices. How could an algorithm know which
> interpretation is correct? In this simple case you could make a convex
> hull, delete the vertices which were consumed for the outer ring, and
> create a new ring from the remaining points, but generally it will not work
> if there are two holes, for example.
>
>
>
> If the points come from a GPX device, make the application to record
> indexes for both the points and the rings ?ring1-point1,
> ring1-point2---ring2-point1,ring2-point2? and construct the polygon ring by
> ring.
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Paul
> Meems
> *L?hetetty:* perjantai 3. maaliskuuta 2023 14.52
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* [gdal-dev] Convex hull with holes
>
>
>
> How can I algorithmically create a parcel border that accounts for islands
> or holes within the parcel based on a list of coordinates?
>
>
>
> While GDAL+GEOS has a Convex hull method, it only identifies the outer
> border.
>
>
>
> Has GDAL+GEOS a method that I can use to detect inner holes as well, such
> as in a donut-shaped field?
>
>
>
> The output can be json or shapefile, that doesn't matter.
>
>
>
> Thanks,
>
> Paul Meems
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230303/a51d9deb/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 28630 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230303/a51d9deb/attachment-0001.png>

From jluis at ualg.pt  Fri Mar  3 07:31:27 2023
From: jluis at ualg.pt (=?utf-8?B?Sm9hcXVpbSBNYW51ZWwgRnJlaXJlIEx1w61z?=)
Date: Fri, 3 Mar 2023 15:31:27 +0000
Subject: [gdal-dev] Convex hull with holes
In-Reply-To: <CAHNf2YSuxGcYoU-21H1AGgvehfRAyh5cqLmM+5OvT=1ZBJHFVw@mail.gmail.com>
References: <CAHNf2YTuaEEZAuY0HH1QiAF-gR6b_w6z+z_mCAUf_Qwodo7Lkg@mail.gmail.com>
 <AM0PR09MB3219F156A96B35BD38830B99FDB39@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAHNf2YSuxGcYoU-21H1AGgvehfRAyh5cqLmM+5OvT=1ZBJHFVw@mail.gmail.com>
Message-ID: <HE1PR0402MB27804B2CB51143DDB80D795BA6B39@HE1PR0402MB2780.eurprd04.prod.outlook.com>

I do that type of things with GMT?s mask module (-D option)
https://docs.generic-mapping-tools.org/latest/mask.html

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Paul Meems
Sent: Friday, March 3, 2023 2:47 PM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Convex hull with holes

Thanks Jukka for your reply.

I understand it is hard.
In my case, I have a lot of data points making your edge case not a problem for me.
The data points are collected driving over a field with 1 or more sensors.
The result can be something like this:
[cid:image001.png at 01D94DE5.376CB160]
The red dots are the data points and I manually created the black border and added a small buffer.
The red dots are transformed into polygons using inverse distance and afterward, I need to 'blank' the data using the black border.
I can automate all steps except for creating this field border.

I'm also struggling to get a proper name for my needs, making it harder to Google for a solution.
'Convex hull' is not correct. What would be a more appropriate name?

Regards,

Paul

Op vr 3 mrt. 2023 om 14:13 schreef Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>:
Hi,

So you have an uncategorized bunch of points and you wish to have an algorithm that recognizes outer and inner rings automatically? I fear that is not as easy as it may appear. Have a look at the annexed image with two polygons having the same vertices. How could an algorithm know which interpretation is correct? In this simple case you could make a convex hull, delete the vertices which were consumed for the outer ring, and create a new ring from the remaining points, but generally it will not work if there are two holes, for example.

If the points come from a GPX device, make the application to record indexes for both the points and the rings ?ring1-point1, ring1-point2---ring2-point1,ring2-point2? and construct the polygon ring by ring.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Paul Meems
L?hetetty: perjantai 3. maaliskuuta 2023 14.52
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Convex hull with holes

How can I algorithmically create a parcel border that accounts for islands or holes within the parcel based on a list of coordinates?

While GDAL+GEOS has a Convex hull method, it only identifies the outer border.

Has GDAL+GEOS a method that I can use to detect inner holes as well, such as in a donut-shaped field?

The output can be json or shapefile, that doesn't matter.

Thanks,

Paul Meems
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230303/7d53b516/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 28630 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230303/7d53b516/attachment-0001.png>

From neteler at osgeo.org  Fri Mar  3 08:55:38 2023
From: neteler at osgeo.org (Markus Neteler)
Date: Fri, 3 Mar 2023 17:55:38 +0100
Subject: [gdal-dev] Convex hull with holes
In-Reply-To: <CAHNf2YTuaEEZAuY0HH1QiAF-gR6b_w6z+z_mCAUf_Qwodo7Lkg@mail.gmail.com>
References: <CAHNf2YTuaEEZAuY0HH1QiAF-gR6b_w6z+z_mCAUf_Qwodo7Lkg@mail.gmail.com>
Message-ID: <CALFmHhvU4EAtEUri-h-0Nz7L8paUBWqAyxpAqnvQYKkHvkV70Q@mail.gmail.com>

On Fri, Mar 3, 2023 at 1:52?PM Paul Meems <bontepaarden at gmail.com> wrote:
>
> How can I algorithmically create a parcel border that accounts for islands or holes within the parcel based on a list of coordinates?
>
> While GDAL+GEOS has a Convex hull method, it only identifies the outer border.
>
> Has GDAL+GEOS a method that I can use to detect inner holes as well, such as in a donut-shaped field?
>
> The output can be json or shapefile, that doesn't matter.

GRASS GIS can do that: see the addon v.concave.hull (it is a Python script):

https://grass.osgeo.org/grass-stable/manuals/addons/v.concave.hull.html#creating-alpha-shapes

HTH,
Markus

From landry at openbsd.org  Sat Mar  4 02:10:27 2023
From: landry at openbsd.org (Landry Breuil)
Date: Sat, 4 Mar 2023 11:10:27 +0100
Subject: [gdal-dev] building against external tiff/geotiff sources ?
Message-ID: <ZAMZE8Skl5stgyAC@twilight.rhaalovely.net>

Hi,

currently some interesting features (for example jxl compression in
tiff) requires one to build against internal tiff/geotiff - after
looking at the code, from my understanding this is because the gtiff
driver reaches to internal tiff functions not present in the public API,
which (to me) is a valid reason.  Afaict the bundled copies dont diverge
from upstream, since even maintains both sides in parallel.

even if i know the internal/bundled copies of tiff/geotiff are regularly
updated to sync from upstream, that worries me a bit, because as a
packager i'm used to build against systemwide libraries for maintainance
reasons - eg security fixes land at one place in the systemwide
libraries and all consumers benefit from it. There's been some CVEs
fixed in libtiff, it hasnt had a maintainance release since then, and in
the OpenBSD portstree those fixes were backported to the port of 4.5.0
we have (eg
https://github.com/openbsd/ports/commit/96602ddb3eb21a87da2322c31794c49f2470ac40).

Thus, two questions:
- in the long run, are there plans to allow building against external
  libtiff/libgeotiff libraries/packages for all features 'restricted' to
the internal copies of those (eg stop relying on internal funcs, or put
those in the public API), or that'd be too much a maintainance hell ?

- would it be possible to allow building against external
  libtiff/libgeotiff _sources_ ? this way i'd still be able to apply
fixes to one place, but i also suppose that'll require a tight version
dependency on those..

what do other packagers of gdal think about it ? Providing an
option/flavor for end-users of the packaging system to build against
internal copies might also be possible, but that creates havoc in
dependency trees..

Thanks again for gdal, everyday i love using it to processes large
amounts of data in various ways, and i think we don't say enough how
awesome it is !

Landry

From sebastic at xs4all.nl  Sat Mar  4 02:35:08 2023
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Sat, 4 Mar 2023 11:35:08 +0100
Subject: [gdal-dev] building against external tiff/geotiff sources ?
In-Reply-To: <ZAMZE8Skl5stgyAC@twilight.rhaalovely.net>
References: <ZAMZE8Skl5stgyAC@twilight.rhaalovely.net>
Message-ID: <61ca6331-47a5-569e-78d8-a2eeaeef76bb@xs4all.nl>

On 3/4/23 11:10, Landry Breuil wrote:
> what do other packagers of gdal think about it ? Providing an
> option/flavor for end-users of the packaging system to build against
> internal copies might also be possible, but that creates havoc in
> dependency trees..

The Debian package will keep using the external tiff because we don't 
want to deal with the tiff security updates in the embedded copy.

Features that are only available when using the embedded copy won't be 
enabled in the Debian package.

The only sane way forward is to not use private functions of tiff.

Kind Regards,

Bas

-- 
  GPG Key ID: 4096R/6750F10AE88D4AF1
Fingerprint: 8182 DE41 7056 408D 6146  50D1 6750 F10A E88D 4AF1


From gdt at lexort.com  Sat Mar  4 06:40:04 2023
From: gdt at lexort.com (Greg Troxel)
Date: Sat, 04 Mar 2023 09:40:04 -0500
Subject: [gdal-dev] building against external tiff/geotiff sources ?
In-Reply-To: <61ca6331-47a5-569e-78d8-a2eeaeef76bb@xs4all.nl> (Sebastiaan
 Couwenberg's message of "Sat, 4 Mar 2023 11:35:08 +0100")
References: <ZAMZE8Skl5stgyAC@twilight.rhaalovely.net>
 <61ca6331-47a5-569e-78d8-a2eeaeef76bb@xs4all.nl>
Message-ID: <rmi356kd1h7.fsf@s1.lexort.com>

Sebastiaan Couwenberg <sebastic at xs4all.nl> writes:

> On 3/4/23 11:10, Landry Breuil wrote:
>> what do other packagers of gdal think about it ? Providing an
>> option/flavor for end-users of the packaging system to build against
>> internal copies might also be possible, but that creates havoc in
>> dependency trees..
>
> The Debian package will keep using the external tiff because we don't
> want to deal with the tiff security updates in the embedded copy.
>
> Features that are only available when using the embedded copy won't be
> enabled in the Debian package.
>
> The only sane way forward is to not use private functions of tiff.

With s/Debian/pkgsrc/, +1.

The right fix is that if gdal needs private APIs, to add public APIs in
tiff.

From simon.eves at heavy.ai  Sat Mar  4 16:23:22 2023
From: simon.eves at heavy.ai (Simon Eves)
Date: Sat, 4 Mar 2023 16:23:22 -0800
Subject: [gdal-dev] building against external tiff/geotiff sources ?
In-Reply-To: <rmi356kd1h7.fsf@s1.lexort.com>
References: <ZAMZE8Skl5stgyAC@twilight.rhaalovely.net>
 <61ca6331-47a5-569e-78d8-a2eeaeef76bb@xs4all.nl>
 <rmi356kd1h7.fsf@s1.lexort.com>
Message-ID: <CAJf0KTRV-0imB26SxGANJk+q25-hFRVagt52L6poZF4PxA5sqg@mail.gmail.com>

I've also been looking at this, because we were previously using internal
TIFF and GeoTIFF but also other libraries with their own TIFF, plus another
one that needed TIFF, so we presumably ended up with four linked versions!

I have reworked everything so that we use one external TiFF and GeoTIFF for
everything, and it seems to work, but this thread now has me worried that
we might be missing functionality.


On Sat, Mar 4, 2023 at 6:40?AM Greg Troxel <gdt at lexort.com> wrote:

> Sebastiaan Couwenberg <sebastic at xs4all.nl> writes:
>
> > On 3/4/23 11:10, Landry Breuil wrote:
> >> what do other packagers of gdal think about it ? Providing an
> >> option/flavor for end-users of the packaging system to build against
> >> internal copies might also be possible, but that creates havoc in
> >> dependency trees..
> >
> > The Debian package will keep using the external tiff because we don't
> > want to deal with the tiff security updates in the embedded copy.
> >
> > Features that are only available when using the embedded copy won't be
> > enabled in the Debian package.
> >
> > The only sane way forward is to not use private functions of tiff.
>
> With s/Debian/pkgsrc/, +1.
>
> The right fix is that if gdal needs private APIs, to add public APIs in
> tiff.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230304/604daab4/attachment.htm>

From even.rouault at spatialys.com  Sun Mar  5 03:05:36 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 5 Mar 2023 12:05:36 +0100
Subject: [gdal-dev] building against external tiff/geotiff sources ?
In-Reply-To: <ZAMZE8Skl5stgyAC@twilight.rhaalovely.net>
References: <ZAMZE8Skl5stgyAC@twilight.rhaalovely.net>
Message-ID: <df5dfaa7-53b0-c2a6-2910-83346e28f69b@spatialys.com>

Hi,


> currently some interesting features (for example jxl compression in
> tiff) requires one to build against internal tiff/geotiff - after
> looking at the code, from my understanding this is because the gtiff
> driver reaches to internal tiff functions not present in the public API,
> which (to me) is a valid reason.  Afaict the bundled copies dont diverge
> from upstream, since even maintains both sides in parallel.
The JXL codec is the only functionality that currently requires using 
the internal copy of libtiff, not because there's anything special in 
it, but because TIFF codecs require access to private headers of 
libtiff. The reason for the JXL codec being in GDAL only is that it 
makes it easier for early adopters to assess adequacy of this codec for 
GDAL purposes without requiring first to have it accepted in libtiff 
(there was a similar situation a few years ago with the LERC codec). The 
medium/long term plan is to migrate it to libtiff, presumably once 
libjxl has reached 1.0 and API stability.
>
> Thus, two questions:
> - in the long run, are there plans to allow building against external
>    libtiff/libgeotiff libraries/packages for all features 'restricted' to
> the internal copies of those (eg stop relying on internal funcs, or put
> those in the public API), or that'd be too much a maintainance hell ?
Cf above. Relying on internal libtiff funcs for the JXL codec is by 
design/compulsory.
>
> - would it be possible to allow building against external
>    libtiff/libgeotiff _sources_ ? this way i'd still be able to apply
> fixes to one place, but i also suppose that'll require a tight version
> dependency on those..

Everything is possible, but I don't think we want to complicate the 
build system with that extra possibility.

So yes packages that follow rules of not using vendored libraries can't 
use the JXL codec for now. Hopefully that's just a transient state.

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Sun Mar  5 13:20:41 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Sun, 5 Mar 2023 21:20:41 +0000
Subject: [gdal-dev] Convex hull with holes
In-Reply-To: <CAHNf2YSuxGcYoU-21H1AGgvehfRAyh5cqLmM+5OvT=1ZBJHFVw@mail.gmail.com>
References: <CAHNf2YTuaEEZAuY0HH1QiAF-gR6b_w6z+z_mCAUf_Qwodo7Lkg@mail.gmail.com>
 <AM0PR09MB3219F156A96B35BD38830B99FDB39@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAHNf2YSuxGcYoU-21H1AGgvehfRAyh5cqLmM+5OvT=1ZBJHFVw@mail.gmail.com>
Message-ID: <AM0PR09MB3219038C5693130AAFEA35ABFDB19@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

I did not know until today that SpatiaLite has also ST_ConcaveHull function https://www.gaia-gis.it/gaia-sins/spatialite-sql-latest.html but I am glad that I know it now.

I digitized some points (concave.jml) for a test
[cid:image001.png at 01D94FB8.5E7E69E0]

and then I used ogr2ogr and allowed ST_ConcaveHull to create holes

ogr2ogr -f jml -dialect SQLite -sql "select ST_ConcaveHull(ST_Collect(geometry),3,1) from concave" out.jml concave.jml

and the result was

[cid:image003.png at 01D94FB8.7A12A7C0]

For fine tuning you may want to add ST_Buffer into the SQL.

-Jukka Rahkonen-


L?hett?j?: Paul Meems <bontepaarden at gmail.com>
L?hetetty: perjantai 3. maaliskuuta 2023 16.47
Vastaanottaja: gdal-dev at lists.osgeo.org
Kopio: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Aihe: Re: [gdal-dev] Convex hull with holes

Thanks Jukka for your reply.

I understand it is hard.
In my case, I have a lot of data points making your edge case not a problem for me.
The data points are collected driving over a field with 1 or more sensors.
The result can be something like this:
[cid:image002.png at 01D94FB8.5E7E69E0]
The red dots are the data points and I manually created the black border and added a small buffer.
The red dots are transformed into polygons using inverse distance and afterward, I need to 'blank' the data using the black border.
I can automate all steps except for creating this field border.

I'm also struggling to get a proper name for my needs, making it harder to Google for a solution.
'Convex hull' is not correct. What would be a more appropriate name?

Regards,

Paul

Op vr 3 mrt. 2023 om 14:13 schreef Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>:
Hi,

So you have an uncategorized bunch of points and you wish to have an algorithm that recognizes outer and inner rings automatically? I fear that is not as easy as it may appear. Have a look at the annexed image with two polygons having the same vertices. How could an algorithm know which interpretation is correct? In this simple case you could make a convex hull, delete the vertices which were consumed for the outer ring, and create a new ring from the remaining points, but generally it will not work if there are two holes, for example.

If the points come from a GPX device, make the application to record indexes for both the points and the rings ?ring1-point1, ring1-point2---ring2-point1,ring2-point2? and construct the polygon ring by ring.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Paul Meems
L?hetetty: perjantai 3. maaliskuuta 2023 14.52
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Convex hull with holes

How can I algorithmically create a parcel border that accounts for islands or holes within the parcel based on a list of coordinates?

While GDAL+GEOS has a Convex hull method, it only identifies the outer border.

Has GDAL+GEOS a method that I can use to detect inner holes as well, such as in a donut-shaped field?

The output can be json or shapefile, that doesn't matter.

Thanks,

Paul Meems
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230305/0d97c976/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 5956 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230305/0d97c976/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 28630 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230305/0d97c976/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 12595 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230305/0d97c976/attachment-0005.png>

From landry at openbsd.org  Mon Mar  6 00:02:12 2023
From: landry at openbsd.org (Landry Breuil)
Date: Mon, 6 Mar 2023 09:02:12 +0100
Subject: [gdal-dev] building against external tiff/geotiff sources ?
In-Reply-To: <df5dfaa7-53b0-c2a6-2910-83346e28f69b@spatialys.com>
References: <ZAMZE8Skl5stgyAC@twilight.rhaalovely.net>
 <df5dfaa7-53b0-c2a6-2910-83346e28f69b@spatialys.com>
Message-ID: <ZAWeBC82vsO61gsu@twilight.rhaalovely.net>

Le Sun, Mar 05, 2023 at 12:05:36PM +0100, Even Rouault a ?crit :
> Hi,
> 
> 
> > currently some interesting features (for example jxl compression in
> > tiff) requires one to build against internal tiff/geotiff - after
> > looking at the code, from my understanding this is because the gtiff
> > driver reaches to internal tiff functions not present in the public API,
> > which (to me) is a valid reason.  Afaict the bundled copies dont diverge
> > from upstream, since even maintains both sides in parallel.
> The JXL codec is the only functionality that currently requires using the
> internal copy of libtiff, not because there's anything special in it, but
> because TIFF codecs require access to private headers of libtiff. The reason
> for the JXL codec being in GDAL only is that it makes it easier for early
> adopters to assess adequacy of this codec for GDAL purposes without
> requiring first to have it accepted in libtiff (there was a similar
> situation a few years ago with the LERC codec). The medium/long term plan is
> to migrate it to libtiff, presumably once libjxl has reached 1.0 and API
> stability.

so that means optional support of libjxl directly inside a future
libtiff version, and thus gdal would gain 'jxl-in-tiff' support by
linking against a jxl-enabled libtiff. Makes sense.

> > - would it be possible to allow building against external
> >    libtiff/libgeotiff _sources_ ? this way i'd still be able to apply
> > fixes to one place, but i also suppose that'll require a tight version
> > dependency on those..
> 
> Everything is possible, but I don't think we want to complicate the build
> system with that extra possibility.

Agreed, that was my fear.

> So yes packages that follow rules of not using vendored libraries can't use
> the JXL codec for now. Hopefully that's just a transient state.

Makes sense - thanks for the explanation !

From bontepaarden at gmail.com  Mon Mar  6 06:12:57 2023
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon, 6 Mar 2023 15:12:57 +0100
Subject: [gdal-dev] Convex hull with holes
In-Reply-To: <AM0PR09MB3219038C5693130AAFEA35ABFDB19@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <CAHNf2YTuaEEZAuY0HH1QiAF-gR6b_w6z+z_mCAUf_Qwodo7Lkg@mail.gmail.com>
 <AM0PR09MB3219F156A96B35BD38830B99FDB39@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAHNf2YSuxGcYoU-21H1AGgvehfRAyh5cqLmM+5OvT=1ZBJHFVw@mail.gmail.com>
 <AM0PR09MB3219038C5693130AAFEA35ABFDB19@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <CAHNf2YQW404+rZtwD7EcvktE6j3v-62fQjXP1Hqs_xND6rQ65Q@mail.gmail.com>

Thanks Jukka for finding this.

It seems exactly what I'm looking for.
Later this week I'll give it a try to use with my CSV-file.

Regards,

Paul

Op zo 5 mrt 2023 om 22:20 schreef Rahkonen Jukka <
jukka.rahkonen at maanmittauslaitos.fi>:

> Hi,
>
>
> I did not know until today that SpatiaLite has also ST_ConcaveHull
> function https://www.gaia-gis.it/gaia-sins/spatialite-sql-latest.html but
> I am glad that I know it now.
>
>
>
> I digitized some points (concave.jml) for a test
>
>
>
> and then I used ogr2ogr and allowed ST_ConcaveHull to create holes
>
> ogr2ogr -f jml -dialect SQLite -sql "select
> ST_ConcaveHull(ST_Collect(geometry),3,1) from concave" out.jml concave.jml
>
> and the result was
>
>
>
> For fine tuning you may want to add ST_Buffer into the SQL.
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* Paul Meems <bontepaarden at gmail.com>
> *L?hetetty:* perjantai 3. maaliskuuta 2023 16.47
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Kopio:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> *Aihe:* Re: [gdal-dev] Convex hull with holes
>
>
>
> Thanks Jukka for your reply.
>
>
>
> I understand it is hard.
>
> In my case, I have a lot of data points making your edge case not a
> problem for me.
>
> The data points are collected driving over a field with 1 or more sensors.
>
> The result can be something like this:
>
> The red dots are the data points and I manually created the black border
> and added a small buffer.
>
> The red dots are transformed into polygons using inverse distance and
> afterward, I need to 'blank' the data using the black border.
>
> I can automate all steps except for creating this field border.
>
>
>
> I'm also struggling to get a proper name for my needs, making it harder to
> Google for a solution.
>
> 'Convex hull' is not correct. What would be a more appropriate name?
>
>
>
> Regards,
>
>
> Paul
>
>
>
> Op vr 3 mrt. 2023 om 14:13 schreef Rahkonen Jukka <
> jukka.rahkonen at maanmittauslaitos.fi>:
>
> Hi,
>
>
>
> So you have an uncategorized bunch of points and you wish to have an
> algorithm that recognizes outer and inner rings automatically? I fear that
> is not as easy as it may appear. Have a look at the annexed image with two
> polygons having the same vertices. How could an algorithm know which
> interpretation is correct? In this simple case you could make a convex
> hull, delete the vertices which were consumed for the outer ring, and
> create a new ring from the remaining points, but generally it will not work
> if there are two holes, for example.
>
>
>
> If the points come from a GPX device, make the application to record
> indexes for both the points and the rings ?ring1-point1,
> ring1-point2---ring2-point1,ring2-point2? and construct the polygon ring by
> ring.
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Paul
> Meems
> *L?hetetty:* perjantai 3. maaliskuuta 2023 14.52
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* [gdal-dev] Convex hull with holes
>
>
>
> How can I algorithmically create a parcel border that accounts for islands
> or holes within the parcel based on a list of coordinates?
>
>
>
> While GDAL+GEOS has a Convex hull method, it only identifies the outer
> border.
>
>
>
> Has GDAL+GEOS a method that I can use to detect inner holes as well, such
> as in a donut-shaped field?
>
>
>
> The output can be json or shapefile, that doesn't matter.
>
>
>
> Thanks,
>
> Paul Meems
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230306/002f9cc2/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 5956 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230306/002f9cc2/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 28630 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230306/002f9cc2/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 12595 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230306/002f9cc2/attachment-0005.png>

From raivo at r-systems.ee  Mon Mar  6 06:58:33 2023
From: raivo at r-systems.ee (Raivo Rebane)
Date: Mon, 6 Mar 2023 16:58:33 +0200
Subject: [gdal-dev] GDAL problems with twice installed PROJ packace
Message-ID: <7224556a-d1b5-8e6d-39b5-387efc01aea7@r-systems.ee>

HI

I am using PDAL package but I cant do operations with projection.

I am twice installed GDAL pacage and PROJ package. One in package of 
PDAL and another in Postgis package.

When I am using PROJ i got error :

proj_create_from_database: C:\Program 
Files\PostgreSQL\15\share\contrib\postgis-3.3\proj\proj.db contains 
DATABASE.LAYOUT.VERSION.MINOR = 0 whereas a number >= 2 is expected. It 
comes from another PROJ installation.
proj_create_from_name: C:\Program 
Files\PostgreSQL\15\share\contrib\postgis-3.3\proj\proj.db contains 
DATABASE.LAYOUT.VERSION.MINOR = 0 whereas a number >= 2 is expected. It 
comes from another PROJ installation.
proj_create_from_database: C:\Program 
Files\PostgreSQL\15\share\contrib\postgis-3.3\proj\proj.db contains 
DATABASE.LAYOUT.VERSION.MINOR = 0 whereas a number >= 2 is expected. It 
comes from another PROJ installation.
proj_create_from_name: C:\Program 
Files\PostgreSQL\15\share\contrib\postgis-3.3\proj\proj.db contains 
DATABASE.LAYOUT.VERSION.MINOR = 0 whereas a number >= 2 is expected. It 
comes from another PROJ installation.
proj_create_from_database: C:\Program 
Files\PostgreSQL\15\share\contrib\postgis-3.3\proj\proj.db contains 
DATABASE.LAYOUT.VERSION.MINOR = 0 whereas a number >= 2 is expected. It 
comes from another PROJ installation.

The proj.db differs.

What can I do with this issue

Regards

Raivo


From raivo at r-systems.ee  Mon Mar  6 07:04:09 2023
From: raivo at r-systems.ee (Raivo Rebane)
Date: Mon, 6 Mar 2023 17:04:09 +0200
Subject: [gdal-dev] Using GDAL with opencv in C++ there is errors under
 windows
Message-ID: <f9454ef9-38d5-3ae1-f773-717563059ea9@r-systems.ee>

Hi

I am big problem. My program gives errors:

Severity??? Code??? Description??? Project??? File??? Line Suppression State
Warning??? C4251??? 'CPLJSONObject::m_osKey': class 
'std::basic_string<char,std::char_traits<char>,std::allocator<char>>' 
needs to have dll-interface to be used by clients of class 
'CPLJSONObject'??? project2??? C:\Program 
Files\PostgreSQL\15\include\cpl_json.h??? 153
Warning??? C4251??? 'OGRStyleTable::osLastRequestedStyleName': class 
'CPLString' needs to have dll-interface to be used by clients of class 
'OGRStyleTable'??? project2??? C:\Program 
Files\PostgreSQL\15\include\ogr_featurestyle.h??? 89
Warning??? C4251??? 'OGR_SRSNode::m_listener': class 
'std::weak_ptr<OGR_SRSNode::Listener>' needs to have dll-interface to be 
used by clients of class 'OGR_SRSNode' project2??? C:\Program 
Files\PostgreSQL\15\include\ogr_spatialref.h??? 129
Warning??? C4251??? 'OGRSpatialReference::d': class 
'std::unique_ptr<OGRSpatialReference::Private,std::default_delete<OGRSpatialReference::Private>>' 
needs to have dll-interface to be used by clients of class 
'OGRSpatialReference'??? project2??? C:\Program 
Files\PostgreSQL\15\include\ogr_spatialref.h??? 159
Warning??? C4251??? 'OGRCoordinateTransformationOptions::d': class 
'std::unique_ptr<OGRCoordinateTransformationOptions::Private,std::default_delete<OGRCoordinateTransformationOptions::Private>>' 
needs to have dll-interface to be used by clients of struct 
'OGRCoordinateTransformationOptions'??? project2??? C:\Program 
Files\PostgreSQL\15\include\ogr_spatialref.h??? 775
Warning??? C4251??? 'OGRCurve::ConstIterator::m_poPrivate': class 
'std::unique_ptr<OGRCurve::ConstIterator::Private,std::default_delete<OGRCurve::ConstIterator::Private>>' 
needs to have dll-interface to be used by clients of class 
'OGRCurve::ConstIterator'??? project2??? C:\Program 
Files\PostgreSQL\15\include\ogr_geometry.h??? 948
Warning??? C4251??? 'OGRSimpleCurve::Iterator::m_poPrivate': class 
'std::unique_ptr<OGRSimpleCurve::Iterator::Private,std::default_delete<OGRSimpleCurve::Iterator::Private>>' 
needs to have dll-interface to be used by clients of class 
'OGRSimpleCurve::Iterator'??? project2??? C:\Program 
Files\PostgreSQL\15\include\ogr_geometry.h??? 1067
Warning??? C4251??? 'OGRSimpleCurve::ConstIterator::m_poPrivate': class 
'std::unique_ptr<OGRSimpleCurve::ConstIterator::Private,std::default_delete<OGRSimpleCurve::ConstIterator::Private>>' 
needs to have dll-interface to be used by clients of class 
'OGRSimpleCurve::ConstIterator'??? project2??? C:\Program 
Files\PostgreSQL\15\include\ogr_geometry.h??? 1084
Warning??? C4251 'OGRGeometryFactory::TransformWithOptionsCache::d': 
class 
'std::unique_ptr<OGRGeometryFactory::TransformWithOptionsCache::Private,std::default_delete<OGRGeometryFactory::TransformWithOptionsCache::Private>>' 
needs to have dll-interface to be used by clients of class 
'OGRGeometryFactory::TransformWithOptionsCache'??? project2 C:\Program 
Files\PostgreSQL\15\include\ogr_geometry.h??? 2883
Warning??? C4251??? 'OGRFeature::FieldValue::m_poPrivate': class 
'std::unique_ptr<OGRFeature::FieldValue::Private,std::default_delete<OGRFeature::FieldValue::Private>>' 
needs to have dll-interface to be used by clients of class 
'OGRFeature::FieldValue'??? project2??? C:\Program 
Files\PostgreSQL\15\include\ogr_feature.h??? 385
Warning??? C4251??? 'OGRFeature::ConstFieldIterator::m_poPrivate': class 
'std::unique_ptr<OGRFeature::ConstFieldIterator::Private,std::default_delete<OGRFeature::ConstFieldIterator::Private>>' 
needs to have dll-interface to be used by clients of class 
'OGRFeature::ConstFieldIterator'??? project2??? C:\Program 
Files\PostgreSQL\15\include\ogr_feature.h??? 528
Warning??? C4251??? 'GDALMajorObject::sDescription': class 'CPLString' 
needs to have dll-interface to be used by clients of class 
'GDALMajorObject'??? project2??? C:\Program 
Files\PostgreSQL\15\include\gdal_priv.h??? 137
Warning??? C4251??? 'GDALDefaultOverviews::osOvrFilename': class 
'CPLString' needs to have dll-interface to be used by clients of class 
'GDALDefaultOverviews'??? project2??? C:\Program 
Files\PostgreSQL\15\include\gdal_priv.h??? 190
Warning??? C4251??? 'GDALDataset::Bands::Iterator::m_poPrivate': class 
'std::unique_ptr<GDALDataset::Bands::Iterator::Private,std::default_delete<GDALDataset::Bands::Iterator::Private>>' 
needs to have dll-interface to be used by clients of class 
'GDALDataset::Bands::Iterator'??? project2??? C:\Program 
Files\PostgreSQL\15\include\gdal_priv.h??? 473
Warning??? C4251??? 'GDALDataset::Layers::Iterator::m_poPrivate': class 
'std::unique_ptr<GDALDataset::Layers::Iterator::Private,std::default_delete<GDALDataset::Layers::Iterator::Private>>' 
needs to have dll-interface to be used by clients of class 
'GDALDataset::Layers::Iterator'??? project2??? C:\Program 
Files\PostgreSQL\15\include\gdal_priv.h??? 669
Warning??? C4251 'GDALDataset::Features::Iterator::m_poPrivate': class 
'std::unique_ptr<GDALDataset::Features::Iterator::Private,std::default_delete<GDALDataset::Features::Iterator::Private>>' 
needs to have dll-interface to be used by clients of class 
'GDALDataset::Features::Iterator'??? project2??? C:\Program 
Files\PostgreSQL\15\include\gdal_priv.h??? 727
Warning??? C4251??? 'GDALColorTable::aoEntries': class 
'std::vector<GDALColorEntry,std::allocator<GDALColorEntry>>' needs to 
have dll-interface to be used by clients of class 'GDALColorTable'??? 
project2??? C:\Program Files\PostgreSQL\15\include\gdal_priv.h??? 968
Warning??? C4251??? 'GDALDriverManager::oMapNameToDrivers': class 
'std::map<CPLString,GDALDriver 
*,std::less<CPLString>,std::allocator<std::pair<const 
CPLString,GDALDriver *>>>' needs to have dll-interface to be used by 
clients of class 'GDALDriverManager'??? project2 C:\Program 
Files\PostgreSQL\15\include\gdal_priv.h??? 1556
Error??? LNK2001??? unresolved external symbol "public: virtual class 
OGRGeometry * __cdecl OGRGeometry::MakeValid(void)const " 
(?MakeValid at OGRGeometry@@UEBAPEAV1 at XZ)??? project2 
C:\Users\Raivo\source\Repos\cv46srcDD\project2\Source.obj??? 1
Error??? LNK2019??? unresolved external symbol "public: void __cdecl 
OGRFeature::SetField(int,union OGRField *)" 
(?SetField at OGRFeature@@QEAAXHPEATOGRField@@@Z) referenced in function 
"public: void __cdecl OGRFeature::SetField(char const *,union OGRField 
*)" (?SetField at OGRFeature@@QEAAXPEBDPEATOGRField@@@Z)??? project2 
C:\Users\Raivo\source\Repos\cv46srcDD\project2\Source.obj??? 1

I trying with examples.

Headers are :

#include <gdal.h>
#include <cpl_json.h>
#include <gdal_priv.h>
#include "opencv2/imgcodecs.hpp"
#include "opencv2/highgui.hpp"
#include <iostream>
#include <conio.h>

What I mus do ?

Regards

Raivo


From raivo at r-systems.ee  Tue Mar  7 00:32:18 2023
From: raivo at r-systems.ee (Raivo Rebane)
Date: Tue, 7 Mar 2023 10:32:18 +0200
Subject: [gdal-dev] Using GDAL with opencv in C++ there is errors under
 windows
In-Reply-To: <f9454ef9-38d5-3ae1-f773-717563059ea9@r-systems.ee>
References: <f9454ef9-38d5-3ae1-f773-717563059ea9@r-systems.ee>
Message-ID: <df84b392-075b-dcee-7b6e-ed683b0f4fc8@r-systems.ee>

Hi again

I minimized the program :

#include <gdal.h>
#include <gdal_priv.h>
#include <iostream>
#include <conio.h>

int main()
{
 ??? GDALAllRegister();
 ??? GDALDataset* dataset = 
static_cast<GDALDataset*>(GDALOpen("634632_2012_tava.tiff", GA_ReadOnly));
 ??? GDALClose(dataset);

 ??? return 0;
}

but it gives the same errors ?

If I remove

#include <gdal_priv.h>
Warnings stop to come

Can anybody help me ?

Regards
Raivo


On 06.03.23 17:04, Raivo Rebane wrote:
> Hi
>
> I am big problem. My program gives errors:
>
> Severity??? Code??? Description??? Project??? File??? Line Suppression 
> State
> Warning??? C4251??? 'CPLJSONObject::m_osKey': class 
> 'std::basic_string<char,std::char_traits<char>,std::allocator<char>>' 
> needs to have dll-interface to be used by clients of class 
> 'CPLJSONObject'??? project2??? C:\Program 
> Files\PostgreSQL\15\include\cpl_json.h??? 153
> Warning??? C4251??? 'OGRStyleTable::osLastRequestedStyleName': class 
> 'CPLString' needs to have dll-interface to be used by clients of class 
> 'OGRStyleTable'??? project2??? C:\Program 
> Files\PostgreSQL\15\include\ogr_featurestyle.h??? 89
> Warning??? C4251??? 'OGR_SRSNode::m_listener': class 
> 'std::weak_ptr<OGR_SRSNode::Listener>' needs to have dll-interface to 
> be used by clients of class 'OGR_SRSNode' project2??? C:\Program 
> Files\PostgreSQL\15\include\ogr_spatialref.h??? 129
> Warning??? C4251??? 'OGRSpatialReference::d': class 
> 'std::unique_ptr<OGRSpatialReference::Private,std::default_delete<OGRSpatialReference::Private>>' 
> needs to have dll-interface to be used by clients of class 
> 'OGRSpatialReference'??? project2??? C:\Program 
> Files\PostgreSQL\15\include\ogr_spatialref.h??? 159
> Warning??? C4251??? 'OGRCoordinateTransformationOptions::d': class 
> 'std::unique_ptr<OGRCoordinateTransformationOptions::Private,std::default_delete<OGRCoordinateTransformationOptions::Private>>' 
> needs to have dll-interface to be used by clients of struct 
> 'OGRCoordinateTransformationOptions'??? project2??? C:\Program 
> Files\PostgreSQL\15\include\ogr_spatialref.h??? 775
> Warning??? C4251??? 'OGRCurve::ConstIterator::m_poPrivate': class 
> 'std::unique_ptr<OGRCurve::ConstIterator::Private,std::default_delete<OGRCurve::ConstIterator::Private>>' 
> needs to have dll-interface to be used by clients of class 
> 'OGRCurve::ConstIterator'??? project2??? C:\Program 
> Files\PostgreSQL\15\include\ogr_geometry.h??? 948
> Warning??? C4251??? 'OGRSimpleCurve::Iterator::m_poPrivate': class 
> 'std::unique_ptr<OGRSimpleCurve::Iterator::Private,std::default_delete<OGRSimpleCurve::Iterator::Private>>' 
> needs to have dll-interface to be used by clients of class 
> 'OGRSimpleCurve::Iterator'??? project2??? C:\Program 
> Files\PostgreSQL\15\include\ogr_geometry.h??? 1067
> Warning??? C4251??? 'OGRSimpleCurve::ConstIterator::m_poPrivate': 
> class 
> 'std::unique_ptr<OGRSimpleCurve::ConstIterator::Private,std::default_delete<OGRSimpleCurve::ConstIterator::Private>>' 
> needs to have dll-interface to be used by clients of class 
> 'OGRSimpleCurve::ConstIterator'??? project2??? C:\Program 
> Files\PostgreSQL\15\include\ogr_geometry.h??? 1084
> Warning??? C4251 'OGRGeometryFactory::TransformWithOptionsCache::d': 
> class 
> 'std::unique_ptr<OGRGeometryFactory::TransformWithOptionsCache::Private,std::default_delete<OGRGeometryFactory::TransformWithOptionsCache::Private>>' 
> needs to have dll-interface to be used by clients of class 
> 'OGRGeometryFactory::TransformWithOptionsCache'??? project2 C:\Program 
> Files\PostgreSQL\15\include\ogr_geometry.h??? 2883
> Warning??? C4251??? 'OGRFeature::FieldValue::m_poPrivate': class 
> 'std::unique_ptr<OGRFeature::FieldValue::Private,std::default_delete<OGRFeature::FieldValue::Private>>' 
> needs to have dll-interface to be used by clients of class 
> 'OGRFeature::FieldValue'??? project2??? C:\Program 
> Files\PostgreSQL\15\include\ogr_feature.h??? 385
> Warning??? C4251??? 'OGRFeature::ConstFieldIterator::m_poPrivate': 
> class 
> 'std::unique_ptr<OGRFeature::ConstFieldIterator::Private,std::default_delete<OGRFeature::ConstFieldIterator::Private>>' 
> needs to have dll-interface to be used by clients of class 
> 'OGRFeature::ConstFieldIterator'??? project2??? C:\Program 
> Files\PostgreSQL\15\include\ogr_feature.h??? 528
> Warning??? C4251??? 'GDALMajorObject::sDescription': class 'CPLString' 
> needs to have dll-interface to be used by clients of class 
> 'GDALMajorObject'??? project2??? C:\Program 
> Files\PostgreSQL\15\include\gdal_priv.h??? 137
> Warning??? C4251??? 'GDALDefaultOverviews::osOvrFilename': class 
> 'CPLString' needs to have dll-interface to be used by clients of class 
> 'GDALDefaultOverviews'??? project2??? C:\Program 
> Files\PostgreSQL\15\include\gdal_priv.h??? 190
> Warning??? C4251??? 'GDALDataset::Bands::Iterator::m_poPrivate': class 
> 'std::unique_ptr<GDALDataset::Bands::Iterator::Private,std::default_delete<GDALDataset::Bands::Iterator::Private>>' 
> needs to have dll-interface to be used by clients of class 
> 'GDALDataset::Bands::Iterator'??? project2??? C:\Program 
> Files\PostgreSQL\15\include\gdal_priv.h??? 473
> Warning??? C4251??? 'GDALDataset::Layers::Iterator::m_poPrivate': 
> class 
> 'std::unique_ptr<GDALDataset::Layers::Iterator::Private,std::default_delete<GDALDataset::Layers::Iterator::Private>>' 
> needs to have dll-interface to be used by clients of class 
> 'GDALDataset::Layers::Iterator'??? project2??? C:\Program 
> Files\PostgreSQL\15\include\gdal_priv.h??? 669
> Warning??? C4251 'GDALDataset::Features::Iterator::m_poPrivate': class 
> 'std::unique_ptr<GDALDataset::Features::Iterator::Private,std::default_delete<GDALDataset::Features::Iterator::Private>>' 
> needs to have dll-interface to be used by clients of class 
> 'GDALDataset::Features::Iterator'??? project2??? C:\Program 
> Files\PostgreSQL\15\include\gdal_priv.h??? 727
> Warning??? C4251??? 'GDALColorTable::aoEntries': class 
> 'std::vector<GDALColorEntry,std::allocator<GDALColorEntry>>' needs to 
> have dll-interface to be used by clients of class 'GDALColorTable'??? 
> project2??? C:\Program Files\PostgreSQL\15\include\gdal_priv.h??? 968
> Warning??? C4251??? 'GDALDriverManager::oMapNameToDrivers': class 
> 'std::map<CPLString,GDALDriver 
> *,std::less<CPLString>,std::allocator<std::pair<const 
> CPLString,GDALDriver *>>>' needs to have dll-interface to be used by 
> clients of class 'GDALDriverManager'??? project2 C:\Program 
> Files\PostgreSQL\15\include\gdal_priv.h??? 1556
> Error??? LNK2001??? unresolved external symbol "public: virtual class 
> OGRGeometry * __cdecl OGRGeometry::MakeValid(void)const " 
> (?MakeValid at OGRGeometry@@UEBAPEAV1 at XZ)??? project2 
> C:\Users\Raivo\source\Repos\cv46srcDD\project2\Source.obj??? 1
> Error??? LNK2019??? unresolved external symbol "public: void __cdecl 
> OGRFeature::SetField(int,union OGRField *)" 
> (?SetField at OGRFeature@@QEAAXHPEATOGRField@@@Z) referenced in function 
> "public: void __cdecl OGRFeature::SetField(char const *,union OGRField 
> *)" (?SetField at OGRFeature@@QEAAXPEBDPEATOGRField@@@Z)??? project2 
> C:\Users\Raivo\source\Repos\cv46srcDD\project2\Source.obj??? 1
>
> I trying with examples.
>
> Headers are :
>
> #include <gdal.h>
> #include <cpl_json.h>
> #include <gdal_priv.h>
> #include "opencv2/imgcodecs.hpp"
> #include "opencv2/highgui.hpp"
> #include <iostream>
> #include <conio.h>
>
> What I mus do ?
>
> Regards
>
> Raivo
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From mateusz at loskot.net  Tue Mar  7 00:46:06 2023
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 7 Mar 2023 09:46:06 +0100
Subject: [gdal-dev] Using GDAL with opencv in C++ there is errors under
 windows
In-Reply-To: <df84b392-075b-dcee-7b6e-ed683b0f4fc8@r-systems.ee>
References: <f9454ef9-38d5-3ae1-f773-717563059ea9@r-systems.ee>
 <df84b392-075b-dcee-7b6e-ed683b0f4fc8@r-systems.ee>
Message-ID: <CABUeae-xgQRxbtTdv7xSD=U2R6P-YqvaR3zHOY=KmUM2B83W1Q@mail.gmail.com>

On Tue, 7 Mar 2023 at 09:32, Raivo Rebane <raivo at r-systems.ee> wrote:
>
> I minimized the program :
>
> #include <gdal.h>
> #include <gdal_priv.h>
> #include <iostream>
> #include <conio.h>
>
> int main()
> {
>      GDALAllRegister();
>      GDALDataset* dataset =
> static_cast<GDALDataset*>(GDALOpen("634632_2012_tava.tiff", GA_ReadOnly));
>      GDALClose(dataset);
>
>      return 0;
> }
>

The errors like
  LNK2001 unresolved external symbol
typically mean a program is not being linked against required libraries.

You need to refer to documentation of the compilation toolset you are using
in order to learn how to configure build of your program properly,
how to pass gdal.lib to its linker, etc.
If you are using CMake, you can follow this recommendation
https://gdal.org/development/cmake.html

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From edzer.pebesma at uni-muenster.de  Tue Mar  7 02:38:31 2023
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 7 Mar 2023 11:38:31 +0100
Subject: [gdal-dev] getting SRS units from GetAttrValue("UNIT", 0)?
Message-ID: <577b7a61-859e-cf2a-c8c4-cf6a13f39ced@uni-muenster.de>

I switched getting coordinate units from the expanded proj4string 
representation to GetAttrValue("UNIT", 0), but failed; try

#include <gdal.h>
#include <gdal_priv.h>
#include <iostream>

int main()
{
	OGRSpatialReference *srs = new OGRSpatialReference;
	int epsg = 3031;
	srs->importFromEPSG(epsg);
	std::cout << epsg << ":" << srs->GetAttrValue("UNIT",0) << std::endl;
	const char *proj4s = "+proj=eqearth";
	srs->importFromProj4(proj4s);
	const char *u = srs->GetAttrValue("UNIT",0);
	std::cout << proj4s << ":" << (u ? u : "NULL") << std::endl;
	return 0;
}

which gives

3031:metre
+proj=eqearth:NULL

whereas the proj4string expansion of "+proj=eqearth" is "+proj=eqearth 
+lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs", so has the units.

What do I miss here? What is the recommended way to get coordinate units?
-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081

From even.rouault at spatialys.com  Tue Mar  7 03:46:21 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 7 Mar 2023 12:46:21 +0100
Subject: [gdal-dev] getting SRS units from GetAttrValue("UNIT", 0)?
In-Reply-To: <577b7a61-859e-cf2a-c8c4-cf6a13f39ced@uni-muenster.de>
References: <577b7a61-859e-cf2a-c8c4-cf6a13f39ced@uni-muenster.de>
Message-ID: <6e1f4ffa-be38-d938-cea2-080136bb675b@spatialys.com>

Edzer,

if you change your code to use GetLinearUnits() it will work:

#include <gdal.h>
#include <gdal_priv.h>
#include <iostream>

int main()
{
 ??? OGRSpatialReference *srs = new OGRSpatialReference;
 ??? int epsg = 3031;
 ??? srs->importFromEPSG(epsg);
 ??? const char* unit = "";
 ??? srs->GetLinearUnits(&unit);
 ??? std::cout << epsg << ":" << unit << std::endl;
 ??? const char *proj4s = "+proj=eqearth";
 ??? srs->importFromProj4(proj4s);
 ??? unit = "";
 ??? srs->GetLinearUnits(&unit);
 ??? std::cout << proj4s << ":" << unit << std::endl;
 ??? return 0;
}


If you wonder why GetAttrValue("UNIT", 0) works sometimes and not not 
for others, this is a bit tricky. When querying WKT nodes directly like 
with GetAttrValue(), GDAL works internally with a WKT1 representation, 
for backward compatibility as a lot of code inside GDAL (and potentially 
outside) queries with WKT1 node names. The issue here is that eqearth is 
a new projection method that didn't exist in GDAL <= 2.4, so GDAL 
fallbacks to WKT2 representation, and it's not the UNIT keyword in WKT2 
but LENGTHUNIT.

Using GetLinearUnits() is more robust, as independent from the WKT1/WKT2 
representation

Even


Le 07/03/2023 ? 11:38, Edzer Pebesma a ?crit?:
> I switched getting coordinate units from the expanded proj4string 
> representation to GetAttrValue("UNIT", 0), but failed; try
>
> #include <gdal.h>
> #include <gdal_priv.h>
> #include <iostream>
>
> int main()
> {
> ????OGRSpatialReference *srs = new OGRSpatialReference;
> ????int epsg = 3031;
> ????srs->importFromEPSG(epsg);
> ????std::cout << epsg << ":" << srs->GetAttrValue("UNIT",0) << std::endl;
> ????const char *proj4s = "+proj=eqearth";
> ????srs->importFromProj4(proj4s);
> ????const char *u = srs->GetAttrValue("UNIT",0);
> ????std::cout << proj4s << ":" << (u ? u : "NULL") << std::endl;
> ????return 0;
> }
>
> which gives
>
> 3031:metre
> +proj=eqearth:NULL
>
> whereas the proj4string expansion of "+proj=eqearth" is "+proj=eqearth 
> +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs", so has the units.
>
> What do I miss here? What is the recommended way to get coordinate units?

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From edzer.pebesma at uni-muenster.de  Tue Mar  7 08:08:43 2023
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 7 Mar 2023 17:08:43 +0100
Subject: [gdal-dev] getting SRS units from GetAttrValue("UNIT", 0)?
In-Reply-To: <6e1f4ffa-be38-d938-cea2-080136bb675b@spatialys.com>
References: <577b7a61-859e-cf2a-c8c4-cf6a13f39ced@uni-muenster.de>
 <6e1f4ffa-be38-d938-cea2-080136bb675b@spatialys.com>
Message-ID: <f9897d7e-1ceb-aa8e-2201-01fdbe9e4d19@uni-muenster.de>

Thanks, Even!

I was after the units of the horizontal coordinates; GetLinearUnits() 
returns "unknown" for EPSG:4326 and, according to the docs returns the 
units of the vertical coordinate in 3D CRS (didn't check). So what I now 
use is GetAttrValue("UNIT", 0) (which returns "degree" for EPSG:4326"), 
and if that returns NULL, use GetLinearUnit(&unit) if its value differs 
from "unknown".

Many regards, and thanks for the example code,

On 07/03/2023 12:46, Even Rouault wrote:
> Edzer,
> 
> if you change your code to use GetLinearUnits() it will work:
> 
> #include <gdal.h>
> #include <gdal_priv.h>
> #include <iostream>
> 
> int main()
> {
>  ??? OGRSpatialReference *srs = new OGRSpatialReference;
>  ??? int epsg = 3031;
>  ??? srs->importFromEPSG(epsg);
>  ??? const char* unit = "";
>  ??? srs->GetLinearUnits(&unit);
>  ??? std::cout << epsg << ":" << unit << std::endl;
>  ??? const char *proj4s = "+proj=eqearth";
>  ??? srs->importFromProj4(proj4s);
>  ??? unit = "";
>  ??? srs->GetLinearUnits(&unit);
>  ??? std::cout << proj4s << ":" << unit << std::endl;
>  ??? return 0;
> }
> 
> 
> If you wonder why GetAttrValue("UNIT", 0) works sometimes and not not 
> for others, this is a bit tricky. When querying WKT nodes directly like 
> with GetAttrValue(), GDAL works internally with a WKT1 representation, 
> for backward compatibility as a lot of code inside GDAL (and potentially 
> outside) queries with WKT1 node names. The issue here is that eqearth is 
> a new projection method that didn't exist in GDAL <= 2.4, so GDAL 
> fallbacks to WKT2 representation, and it's not the UNIT keyword in WKT2 
> but LENGTHUNIT.
> 
> Using GetLinearUnits() is more robust, as independent from the WKT1/WKT2 
> representation
> 
> Even
> 
> 
> Le 07/03/2023 ? 11:38, Edzer Pebesma a ?crit?:
>> I switched getting coordinate units from the expanded proj4string 
>> representation to GetAttrValue("UNIT", 0), but failed; try
>>
>> #include <gdal.h>
>> #include <gdal_priv.h>
>> #include <iostream>
>>
>> int main()
>> {
>> ????OGRSpatialReference *srs = new OGRSpatialReference;
>> ????int epsg = 3031;
>> ????srs->importFromEPSG(epsg);
>> ????std::cout << epsg << ":" << srs->GetAttrValue("UNIT",0) << std::endl;
>> ????const char *proj4s = "+proj=eqearth";
>> ????srs->importFromProj4(proj4s);
>> ????const char *u = srs->GetAttrValue("UNIT",0);
>> ????std::cout << proj4s << ":" << (u ? u : "NULL") << std::endl;
>> ????return 0;
>> }
>>
>> which gives
>>
>> 3031:metre
>> +proj=eqearth:NULL
>>
>> whereas the proj4string expansion of "+proj=eqearth" is "+proj=eqearth 
>> +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs", so has the units.
>>
>> What do I miss here? What is the recommended way to get coordinate units?
> 

-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081

From even.rouault at spatialys.com  Tue Mar  7 08:11:14 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 7 Mar 2023 17:11:14 +0100
Subject: [gdal-dev] getting SRS units from GetAttrValue("UNIT", 0)?
In-Reply-To: <f9897d7e-1ceb-aa8e-2201-01fdbe9e4d19@uni-muenster.de>
References: <577b7a61-859e-cf2a-c8c4-cf6a13f39ced@uni-muenster.de>
 <6e1f4ffa-be38-d938-cea2-080136bb675b@spatialys.com>
 <f9897d7e-1ceb-aa8e-2201-01fdbe9e4d19@uni-muenster.de>
Message-ID: <4bfabb55-d64f-5df6-127e-cc0cccfb4e78@spatialys.com>


Le 07/03/2023 ? 17:08, Edzer Pebesma a ?crit?:
> Thanks, Even!
>
> I was after the units of the horizontal coordinates; GetLinearUnits() 
> returns "unknown" for EPSG:4326 and, according to the docs returns the 
> units of the vertical coordinate in 3D CRS (didn't check). So what I 
> now use is GetAttrValue("UNIT", 0) (which returns "degree" for 
> EPSG:4326"), and if that returns NULL, use GetLinearUnit(&unit) if its 
> value differs from "unknown".

Try:

if( srs->IsGeographic() )
 ?? srs->GetAngularUnits(&unit);
else

 ? srs->GetLinearUnits(&unit);


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From raivo at r-systems.ee  Tue Mar  7 09:07:34 2023
From: raivo at r-systems.ee (Raivo Rebane)
Date: Tue, 7 Mar 2023 19:07:34 +0200
Subject: [gdal-dev] Using GDAL with opencv in C++ there is errors under
 windows
In-Reply-To: <8c1d2a92-123a-6feb-b8dd-5804dadbfca1@r-systems.ee>
References: <f9454ef9-38d5-3ae1-f773-717563059ea9@r-systems.ee>
 <df84b392-075b-dcee-7b6e-ed683b0f4fc8@r-systems.ee>
 <CABUeae-xgQRxbtTdv7xSD=U2R6P-YqvaR3zHOY=KmUM2B83W1Q@mail.gmail.com>
 <8c1d2a92-123a-6feb-b8dd-5804dadbfca1@r-systems.ee>
Message-ID: <7a2d6259-7202-2d36-981f-bbb8dea89177@r-systems.ee>

Hi

There was problem in libraries.

VIsual Studio seeks firstly PostGIS libraries what is older ones

Now I set Firstly seek from separately installed GDAL libraries.

But conflict in twice installed PROJ packages exist.

So, I cant use PROJ package functions.

Can anybody helps me ?

Regards

Raivo

On 07.03.23 11:28, Raivo Rebane wrote:
> I use Visual Studio and there is defined for linking following libraries:
>
> gdal.lib
> opencv_calib3d460d.lib
> opencv_core460d.lib
> opencv_dnn460d.lib
> opencv_features2d460d.lib
> opencv_flann460d.lib
> opencv_gapi460d.lib
> opencv_highgui460d.lib
> opencv_imgcodecs460d.lib
> opencv_imgproc460d.lib
> opencv_ml460d.lib
> opencv_objdetect460d.lib
> opencv_photo460d.lib
> opencv_stitching460d.lib
> opencv_video460d.lib
> opencv_videoio460d.lib
>
> as I use OpenCV.
>
> What library is neede for linker ?
>
> As a matter of fact this source compiles, links and runs without 
> problems day after yesterday
>
> Regards
>
> Raivo
>
>
> On 07.03.23 10:46, Mateusz Loskot wrote:
>> On Tue, 7 Mar 2023 at 09:32, Raivo Rebane <raivo at r-systems.ee> wrote:
>>> I minimized the program :
>>>
>>> #include <gdal.h>
>>> #include <gdal_priv.h>
>>> #include <iostream>
>>> #include <conio.h>
>>>
>>> int main()
>>> {
>>> ????? GDALAllRegister();
>>> ????? GDALDataset* dataset =
>>> static_cast<GDALDataset*>(GDALOpen("634632_2012_tava.tiff", 
>>> GA_ReadOnly));
>>> ????? GDALClose(dataset);
>>>
>>> ????? return 0;
>>> }
>>>
>> The errors like
>> ?? LNK2001 unresolved external symbol
>> typically mean a program is not being linked against required libraries.
>>
>> You need to refer to documentation of the compilation toolset you are 
>> using
>> in order to learn how to configure build of your program properly,
>> how to pass gdal.lib to its linker, etc.
>> If you are using CMake, you can follow this recommendation
>> https://gdal.org/development/cmake.html
>>
>> Best regards,

From even.rouault at spatialys.com  Tue Mar  7 09:44:37 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 7 Mar 2023 18:44:37 +0100
Subject: [gdal-dev] GDAL 3.6.3 RC1 available
Message-ID: <d8852209-9720-37eb-77a7-15a7411920e5@spatialys.com>

Hi,

I have prepared a GDAL/OGR 3.6.3 release candidate.

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.6.3/gdal-3.6.3rc1.tar.xz
 ? https://download.osgeo.org/gdal/3.6.3/gdal-3.6.3rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.6.3/gdal363rc1.zip

A snapshot of the gdalautotest suite is also available :

https://download.osgeo.org/gdal/3.6.3/gdalautotest-3.6.3rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.6.3/gdalautotest-3.6.3rc1.zip

The NEWS file is here :

 ? https://github.com/OSGeo/gdal/blob/v3.6.3RC1/NEWS.md

I'll call for a vote promoting it to final before end of week if no
serious problems are reported before.

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From raivo at r-systems.ee  Tue Mar  7 11:53:17 2023
From: raivo at r-systems.ee (Raivo Rebane)
Date: Tue, 7 Mar 2023 21:53:17 +0200
Subject: [gdal-dev] Can Geotiff file contain multiply Ortofotos
Message-ID: <075508ba-6736-bbc2-e379-37c249b09148@r-systems.ee>

Hi

I am novice in using of GDAL.

I studied and asked from https://chat.openai.com/chat how to read 
multiband raster image, but I did'nt find anywhere how to rread from 
tiff file next frame or ortofo bands

Please ask me if it's possible

Regards

Raivo


From edzer.pebesma at uni-muenster.de  Tue Mar  7 13:45:51 2023
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 7 Mar 2023 22:45:51 +0100
Subject: [gdal-dev] getting SRS units from GetAttrValue("UNIT", 0)?
In-Reply-To: <4bfabb55-d64f-5df6-127e-cc0cccfb4e78@spatialys.com>
References: <577b7a61-859e-cf2a-c8c4-cf6a13f39ced@uni-muenster.de>
 <6e1f4ffa-be38-d938-cea2-080136bb675b@spatialys.com>
 <f9897d7e-1ceb-aa8e-2201-01fdbe9e4d19@uni-muenster.de>
 <4bfabb55-d64f-5df6-127e-cc0cccfb4e78@spatialys.com>
Message-ID: <8569364d-c48c-35b4-264c-069c1a3aedaf@uni-muenster.de>



On 07/03/2023 17:11, Even Rouault wrote:
> 
> Le 07/03/2023 ? 17:08, Edzer Pebesma a ?crit?:
>> Thanks, Even!
>>
>> I was after the units of the horizontal coordinates; GetLinearUnits() 
>> returns "unknown" for EPSG:4326 and, according to the docs returns the 
>> units of the vertical coordinate in 3D CRS (didn't check). So what I 
>> now use is GetAttrValue("UNIT", 0) (which returns "degree" for 
>> EPSG:4326"), and if that returns NULL, use GetLinearUnit(&unit) if its 
>> value differs from "unknown".
> 
> Try:
> 
> if( srs->IsGeographic() )
>  ?? srs->GetAngularUnits(&unit);
> else
> 
>  ? srs->GetLinearUnits(&unit);
> 
> 
Great, that's much more elegant. Thanks!
-- 
Edzer Pebesma
Institute for Geoinformatics
Heisenbergstrasse 2, 48151 Muenster, Germany
Phone: +49 251 8333081

From bradh at frogmouth.net  Tue Mar  7 15:01:06 2023
From: bradh at frogmouth.net (Brad Hards)
Date: Wed, 08 Mar 2023 10:01:06 +1100
Subject: [gdal-dev] Can Geotiff file contain multiply Ortofotos
In-Reply-To: <075508ba-6736-bbc2-e379-37c249b09148@r-systems.ee>
References: <075508ba-6736-bbc2-e379-37c249b09148@r-systems.ee>
Message-ID: <12164630.O9o76ZdvQC@audax>

On Wednesday, 8 March 2023 6:53:17 AM AEDT Raivo Rebane wrote:
> I studied and asked from https://chat.openai.com/chat how to read
> multiband raster image, but I did'nt find anywhere how to rread from
> tiff file next frame or ortofo bands
> 
> Please ask me if it's possible

It is possible. See https://gdal.org/drivers/raster/gtiff.html#subdatasets for 
how the multiple images are identified.

Use gdalinfo on your file to see the specific characteristics.

See https://gdal.org/tutorials/raster_api_tut.html for use of the Raster API 
abstraction.

So you just need to pass the correct name to the open call.


Brad




From mdsumner at gmail.com  Tue Mar  7 17:19:39 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 8 Mar 2023 12:19:39 +1100
Subject: [gdal-dev] question about python installation
Message-ID: <CAAcGz994pcuAQJp7bCBGHY45Ek3RvKqhQ5yb-XtPWExDbaLRYw@mail.gmail.com>

Hello, apologies as this is not so much a GDAL but a python question, but
I'm interested in what others do, hopefully I'm missing a key step that's
not hacky :)

I made a gist to record the details:

https://gist.github.com/mdsumner/526af876cfddaa5ff245ab376b3cec84

The crux is,  GDAL has placed the python osgeo lib files into
'/usr/local/lib/python3/dist-packages', but python is only looking in
'/usr/local/lib/python3.10/dist-packages' (as seen in sys.path).

Is there a config step with cmake, or a subsequent step with python config
that I should be doing?

Is it GDAL_PYTHON_INSTALL_PREFIX ?

Thank you.


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230308/c882d582/attachment.htm>

From even.rouault at spatialys.com  Tue Mar  7 18:34:55 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 8 Mar 2023 03:34:55 +0100
Subject: [gdal-dev] question about python installation
In-Reply-To: <CAAcGz994pcuAQJp7bCBGHY45Ek3RvKqhQ5yb-XtPWExDbaLRYw@mail.gmail.com>
References: <CAAcGz994pcuAQJp7bCBGHY45Ek3RvKqhQ5yb-XtPWExDbaLRYw@mail.gmail.com>
Message-ID: <8cc3f966-0cda-d582-821c-e3a196627f1d@spatialys.com>

Michael,

My experience is that understanding how and where to install Python 
stuff is utterly difficult. And this is even more complicated on 
Debian/Ubuntu that have many patches regarding sys.path and distutils, 
plus the fact that distutils is deprecated and going to be removed in 
Python 3.12, without a clear replacement. Just look at all the horrible 
logic in swig/python/CMakeLists.txt from line 428 to 504 + 
swig/python/trimmedsysconfig.py + swig/python/install_python.cmake.in.? 
Perhaps there's a better way...

GDAL hopefully does the right thing for a typical distribution 
installation where CMAKE_INSTALL_PREFIX=/usr . For other prefixes, such 
as the implicit /usr/local prefix, you're on your own, and you will 
likely have to set the PYTHONPATH environment variable to point to 
/usr/local/lib/python3/dist-packages

GDAL_PYTHON_INSTALL_PREFIX will not help you here (and I'm not sure to 
remember what the actual use case for it was)

Even

Le 08/03/2023 ? 02:19, Michael Sumner a ?crit?:
> Hello, apologies as this is not so much a GDAL but a python question, 
> but I'm interested in what others do, hopefully I'm missing a key step 
> that's not hacky :)
>
> I made a gist to record the details:
>
> https://gist.github.com/mdsumner/526af876cfddaa5ff245ab376b3cec84
>
> The crux is,? GDAL has placed the python osgeo lib files into 
> '/usr/local/lib/python3/dist-packages', but python is only looking in 
> '/usr/local/lib/python3.10/dist-packages' (as seen in sys.path).
>
> Is there a config step with cmake, or a subsequent step with python 
> config that I should be doing?
>
> Is it?GDAL_PYTHON_INSTALL_PREFIX ?
>
> Thank you.
>
>
> -- 
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230308/02f7380d/attachment.htm>

From mdsumner at gmail.com  Tue Mar  7 18:45:12 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 8 Mar 2023 13:45:12 +1100
Subject: [gdal-dev] question about python installation
In-Reply-To: <8cc3f966-0cda-d582-821c-e3a196627f1d@spatialys.com>
References: <CAAcGz994pcuAQJp7bCBGHY45Ek3RvKqhQ5yb-XtPWExDbaLRYw@mail.gmail.com>
 <8cc3f966-0cda-d582-821c-e3a196627f1d@spatialys.com>
Message-ID: <CAAcGz9_KU3L+nFMf9W9aXvnpAJjOv5cVD1z5CtVGV19Vu2Xxvg@mail.gmail.com>

Ah, awesome - thanks as ever for such great detail.

I've been trying with PYTHONPATH and sys.path, and I think I was doing it
wrong ...   but the simplicity of the /usr prefix had not occurred to me,
I'll be doing that.

If I come back around with further insights I'll share them, but this is
working for me now.

cmake .. -DCMAKE_INSTALL_PREFIX=/usr

Cheers, Mike





On Wed, Mar 8, 2023 at 1:35?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Michael,
>
> My experience is that understanding how and where to install Python stuff
> is utterly difficult. And this is even more complicated on Debian/Ubuntu
> that have many patches regarding sys.path and distutils, plus the fact that
> distutils is deprecated and going to be removed in Python 3.12, without a
> clear replacement. Just look at all the horrible logic in
> swig/python/CMakeLists.txt from line 428 to 504 +
> swig/python/trimmedsysconfig.py + swig/python/install_python.cmake.in.
> Perhaps there's a better way...
>
> GDAL hopefully does the right thing for a typical distribution
> installation where CMAKE_INSTALL_PREFIX=/usr . For other prefixes, such as
> the implicit /usr/local prefix, you're on your own, and you will likely
> have to set the PYTHONPATH environment variable to point to
> /usr/local/lib/python3/dist-packages
>
> GDAL_PYTHON_INSTALL_PREFIX will not help you here (and I'm not sure to
> remember what the actual use case for it was)
>
> Even
> Le 08/03/2023 ? 02:19, Michael Sumner a ?crit :
>
> Hello, apologies as this is not so much a GDAL but a python question, but
> I'm interested in what others do, hopefully I'm missing a key step that's
> not hacky :)
>
> I made a gist to record the details:
>
> https://gist.github.com/mdsumner/526af876cfddaa5ff245ab376b3cec84
>
> The crux is,  GDAL has placed the python osgeo lib files into
> '/usr/local/lib/python3/dist-packages', but python is only looking in
> '/usr/local/lib/python3.10/dist-packages' (as seen in sys.path).
>
> Is there a config step with cmake, or a subsequent step with python config
> that I should be doing?
>
> Is it GDAL_PYTHON_INSTALL_PREFIX ?
>
> Thank you.
>
>
> --
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230308/5c0b979f/attachment-0001.htm>

From tsvibar at gmail.com  Wed Mar  8 00:37:45 2023
From: tsvibar at gmail.com (Micha Silver)
Date: Wed, 8 Mar 2023 10:37:45 +0200
Subject: [gdal-dev] ERROR 1: No inverse operation
Message-ID: <49eb2124-9d86-df3f-ae41-cfc5eacfff20@gmail.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230308/5648d589/attachment.htm>

From even.rouault at spatialys.com  Wed Mar  8 03:47:48 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 8 Mar 2023 12:47:48 +0100
Subject: [gdal-dev] ERROR 1: No inverse operation
In-Reply-To: <49eb2124-9d86-df3f-ae41-cfc5eacfff20@gmail.com>
References: <49eb2124-9d86-df3f-ae41-cfc5eacfff20@gmail.com>
Message-ID: <ec6ceb21-9995-6036-339b-d31d7d42e264@spatialys.com>

Micha,


which CRS is reported and which PROJ version do you use ? It is 
presumably one projection method for which PROJ only implements the 
forward conversion, that is from geographic to projected coordinates, 
but not the reverse way


Even


Le 08/03/2023 ? 09:37, Micha Silver a ?crit?:
>
> I received some Geotiff files, and gdalinfo shows:
>
>
> Corner Coordinates:
> ERROR 1: No inverse operation
> Upper Left ?( ?205370.241, ?418790.721)
> ERROR 1: No inverse operation
> Lower Left ?( ?205370.241, ?415665.721)
> ERROR 1: No inverse operation
> Upper Right ( ?206198.866, ?418790.721)
> ERROR 1: No inverse operation
> Lower Right ( ?206198.866, ?415665.721)
> ERROR 1: No inverse operation
> Center ?????( ?205784.553, ?417228.221)
>
> What does that mean?
>
>
> gdalinfo --version
> GDAL 3.6.2, released 2023/01/02
>
> Thanks
>
>
> -- 
> Micha Silver
> Remote Sensing Lab, Sde Boker
> Ben Gurion University
> +972-523-665918
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230308/1c8a9125/attachment.htm>

From j1 at jimenezshaw.com  Wed Mar  8 03:48:43 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 8 Mar 2023 12:48:43 +0100
Subject: [gdal-dev] ERROR 1: No inverse operation
In-Reply-To: <49eb2124-9d86-df3f-ae41-cfc5eacfff20@gmail.com>
References: <49eb2124-9d86-df3f-ae41-cfc5eacfff20@gmail.com>
Message-ID: <CADRrdKvxBzer7bGWXeLbMwkgbA_gA83HTcEO1Cada+zPYFazjA@mail.gmail.com>

gdalinfo is usually showing the coordinates of the corners and center in
the CRS of the GeoTIFF, and also in WGS84 in degrees as conversion of the
previous. Looks like your CRS does not support such conversion.
If you paste the full output of gdalinfo there should be some clues about
the CRS used.

Cheers,
Javier

On Wed, 8 Mar 2023 at 09:37, Micha Silver <tsvibar at gmail.com> wrote:

> I received some Geotiff files, and gdalinfo shows:
>
>
> Corner Coordinates:
> ERROR 1: No inverse operation
> Upper Left  (  205370.241,  418790.721)
> ERROR 1: No inverse operation
> Lower Left  (  205370.241,  415665.721)
> ERROR 1: No inverse operation
> Upper Right (  206198.866,  418790.721)
> ERROR 1: No inverse operation
> Lower Right (  206198.866,  415665.721)
> ERROR 1: No inverse operation
> Center      (  205784.553,  417228.221)
>
> What does that mean?
>
>
> gdalinfo --version
> GDAL 3.6.2, released 2023/01/02
>
> Thanks
>
>
> --
> Micha Silver
> Remote Sensing Lab, Sde Boker
> Ben Gurion University
> +972-523-665918
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230308/229110d8/attachment.htm>

From tsvibar at gmail.com  Wed Mar  8 04:18:53 2023
From: tsvibar at gmail.com (Micha Silver)
Date: Wed, 8 Mar 2023 14:18:53 +0200
Subject: [gdal-dev] ERROR 1: No inverse operation
In-Reply-To: <ec6ceb21-9995-6036-339b-d31d7d42e264@spatialys.com>
References: <49eb2124-9d86-df3f-ae41-cfc5eacfff20@gmail.com>
 <ec6ceb21-9995-6036-339b-d31d7d42e264@spatialys.com>
Message-ID: <a8073719-7e8b-af6a-55be-6ecf558b4256@gmail.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230308/e8089071/attachment.htm>

From even.rouault at spatialys.com  Wed Mar  8 04:33:09 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 8 Mar 2023 13:33:09 +0100
Subject: [gdal-dev] ERROR 1: No inverse operation
In-Reply-To: <a8073719-7e8b-af6a-55be-6ecf558b4256@gmail.com>
References: <49eb2124-9d86-df3f-ae41-cfc5eacfff20@gmail.com>
 <ec6ceb21-9995-6036-339b-d31d7d42e264@spatialys.com>
 <a8073719-7e8b-af6a-55be-6ecf558b4256@gmail.com>
Message-ID: <a17513cc-3def-350e-807a-718e898eb94d@spatialys.com>

Ah, the issue here is that the GeoTIFF keys in the .tif partially define 
the projection (or possibly the .tif.aux.xml contain this invalid WKT). 
But METHOD["unnamed"] means that the projection method is unknown, so it 
is logical that GDAL/PROJ can't compute geographic coordinates from 
projected coordinates.


The output of "listgeo HiBar_21022022_A1.tif" might be useful to further 
diagnose.


You likely need to gdal_translate -a_srs EPSG:2039 to do something 
useful with that file, and report to the data producer that the CRS 
encoding is broken


Le 08/03/2023 ? 13:18, Micha Silver a ?crit?:
>
> Hi Even:
>
>
> Here's the full gdalinfo, with the reported CRS:
>
>
> gdalinfo HiBar_21022022_A1.tif
> Driver: GTiff/GeoTIFF
> Files: HiBar_21022022_A1.tif
> ??????HiBar_21022022_A1.tif.aux.xml
> Size is 25000, 25000
> Coordinate System is:
> PROJCRS["Israel 1993 / Israeli TM Grid",
> ???BASEGEOGCRS["WGS 84",
> ???????DATUM["World Geodetic System 1984",
> ???????????ELLIPSOID["WGS 84",6378137,298.257223563,
> ???????????????LENGTHUNIT["metre",1,
> ???????????????????ID["EPSG",9001]]]],
> ???????PRIMEM["Greenwich",0,
> ???????????ANGLEUNIT["degree",0.0174532925199433,
> ???????????????ID["EPSG",9122]]]],
> ???CONVERSION["unnamed",
> ???????METHOD["unnamed"]],
> ???CS[Cartesian,2],
> ???????AXIS["(E)",east,
> ???????????ORDER[1],
> ???????????LENGTHUNIT["metre",1,
> ???????????????ID["EPSG",9001]]],
> ???????AXIS["(N)",north,
> ???????????ORDER[2],
> ???????????LENGTHUNIT["metre",1,
> ???????????????ID["EPSG",9001]]]]
> Data axis to CRS axis mapping: 1,2
> Origin = (202245.240786847687559,421915.720555976789910)
> Pixel Size = (0.125000000000000,-0.125000000000000)
> Metadata:
> ?AREA_OR_POINT=Area
> Image Structure Metadata:
> ?INTERLEAVE=PIXEL
> Corner Coordinates:
> ERROR 1: No inverse operation
> Upper Left ?( ?202245.241, ?421915.721)
> ERROR 1: No inverse operation
> Lower Left ?( ?202245.241, ?418790.721)
> ERROR 1: No inverse operation
> Upper Right ( ?205370.241, ?421915.721)
> ERROR 1: No inverse operation
> Lower Right ( ?205370.241, ?418790.721)
> ERROR 1: No inverse operation
> Center ?????( ?203807.741, ?420353.221)
>
> and proj version:
>
>
> proj
> Rel. 9.1.1, December 1st, 2022
>
>
> (a newly installed debian 12)
>
>
> Thanks,
>
> Micha
>
>
> On 08/03/2023 13:47, Even Rouault wrote:
>>
>> Micha,
>>
>>
>> which CRS is reported and which PROJ version do you use ? It is 
>> presumably one projection method for which PROJ only implements the 
>> forward conversion, that is from geographic to projected coordinates, 
>> but not the reverse way
>>
>>
>> Even
>>
>>
>> Le 08/03/2023 ? 09:37, Micha Silver a ?crit?:
>>>
>>> I received some Geotiff files, and gdalinfo shows:
>>>
>>>
>>> Corner Coordinates:
>>> ERROR 1: No inverse operation
>>> Upper Left ?( ?205370.241, ?418790.721)
>>> ERROR 1: No inverse operation
>>> Lower Left ?( ?205370.241, ?415665.721)
>>> ERROR 1: No inverse operation
>>> Upper Right ( ?206198.866, ?418790.721)
>>> ERROR 1: No inverse operation
>>> Lower Right ( ?206198.866, ?415665.721)
>>> ERROR 1: No inverse operation
>>> Center ?????( ?205784.553, ?417228.221)
>>>
>>> What does that mean?
>>>
>>>
>>> gdalinfo --version
>>> GDAL 3.6.2, released 2023/01/02
>>>
>>> Thanks
>>>
>>>
>>> -- 
>>> Micha Silver
>>> Remote Sensing Lab, Sde Boker
>>> Ben Gurion University
>>> +972-523-665918
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> -- 
>> http://www.spatialys.com
>> My software is free, but my time generally not.
> -- 
> Micha Silver
> Remote Sensing Lab, Sde Boker
> Ben Gurion University
> +972-523-665918

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230308/039f3ebd/attachment-0001.htm>

From raivo at r-systems.ee  Wed Mar  8 04:41:59 2023
From: raivo at r-systems.ee (Raivo Rebane)
Date: Wed, 8 Mar 2023 14:41:59 +0200
Subject: [gdal-dev] Can Geotiff file contain multiply Ortofotos
In-Reply-To: <12164630.O9o76ZdvQC@audax>
References: <075508ba-6736-bbc2-e379-37c249b09148@r-systems.ee>
 <12164630.O9o76ZdvQC@audax>
Message-ID: <78d6644b-ac37-ba7c-51db-b4e8f498cc37@r-systems.ee>

I found from documentation following about subdataset:


      Subdatasets? <https://gdal.org/drivers/raster/gtiff.html#subdatasets>

Multi-page TIFF files are exposed as subdatasets. On opening, a 
subdataset name is GTIFF_DIR:{index}:filename.tif, where {index} starts 
at 1.

I am using following code :

 ? GDALDataset* subdataset = 
static_cast<GDALDataset*>(GDALOpen("F:\\3D-data\\GeoTIFFs\\[1]:44744.tif", 
GA_ReadOnly));
 ??? if (subdataset == NULL) {
 ??????? std::cout << "Failed to open subdataset!" << std::endl;
 ??????? return 1;
 ??? }

But geting following :

subdataset = NULL

 From documentation I didn't find more

In what I am wrong

Regards

Raivo


On 08.03.23 01:01, Brad Hards wrote:
> On Wednesday, 8 March 2023 6:53:17 AM AEDT Raivo Rebane wrote:
>> I studied and asked fromhttps://chat.openai.com/chat  how to read
>> multiband raster image, but I did'nt find anywhere how to rread from
>> tiff file next frame or ortofo bands
>>
>> Please ask me if it's possible
> It is possible. Seehttps://gdal.org/drivers/raster/gtiff.html#subdatasets  for
> how the multiple images are identified.
>
> Use gdalinfo on your file to see the specific characteristics.
>
> Seehttps://gdal.org/tutorials/raster_api_tut.html  for use of the Raster API
> abstraction.
>
> So you just need to pass the correct name to the open call.
>
>
> Brad
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230308/e37b2dcb/attachment.htm>

From raivo at r-systems.ee  Wed Mar  8 04:54:39 2023
From: raivo at r-systems.ee (Raivo Rebane)
Date: Wed, 8 Mar 2023 14:54:39 +0200
Subject: [gdal-dev] How proceed with GDAL GeoTIFF files with multiply
 subdataset
In-Reply-To: <78d6644b-ac37-ba7c-51db-b4e8f498cc37@r-systems.ee>
References: <78d6644b-ac37-ba7c-51db-b4e8f498cc37@r-systems.ee>
Message-ID: <faed0332-957f-bb8d-1073-aeed0ff81806@r-systems.ee>

Hi

I found from documentation following about subdataset:


      Subdatasets? <https://gdal.org/drivers/raster/gtiff.html#subdatasets>

Multi-page TIFF files are exposed as subdatasets. On opening, a 
subdataset name is GTIFF_DIR:{index}:filename.tif, where {index} starts 
at 1.

I am using following code :

 ? GDALDataset* subdataset = 
static_cast<GDALDataset*>(GDALOpen("F:\\3D-data\\GeoTIFFs\\[1]:44744.tif", 
GA_ReadOnly));
 ??? if (subdataset == NULL) {
 ??????? std::cout << "Failed to open subdataset!" << std::endl;
 ??????? return 1;
 ??? }

But geting following :

subdataset = NULL

 From documentation I didn't find more

In what I am wrong

Regards

Raivo


On 08.03.23 01:01, Brad Hards wrote:
> On Wednesday, 8 March 2023 6:53:17 AM AEDT Raivo Rebane wrote:
>> I studied and asked fromhttps://chat.openai.com/chat  how to read
>> multiband raster image, but I did'nt find anywhere how to rread from
>> tiff file next frame or ortofo bands
>>
>> Please ask me if it's possible
> It is possible. Seehttps://gdal.org/drivers/raster/gtiff.html#subdatasets  for
> how the multiple images are identified.
>
> Use gdalinfo on your file to see the specific characteristics.
>
> Seehttps://gdal.org/tutorials/raster_api_tut.html  for use of the Raster API
> abstraction.
>
> So you just need to pass the correct name to the open call.
>
>
> Brad
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230308/63dcc572/attachment.htm>

From gdt at lexort.com  Wed Mar  8 05:22:01 2023
From: gdt at lexort.com (Greg Troxel)
Date: Wed, 08 Mar 2023 08:22:01 -0500
Subject: [gdal-dev] question about python installation
In-Reply-To: <CAAcGz9_KU3L+nFMf9W9aXvnpAJjOv5cVD1z5CtVGV19Vu2Xxvg@mail.gmail.com>
 (Michael Sumner's message of "Wed, 8 Mar 2023 13:45:12 +1100")
References: <CAAcGz994pcuAQJp7bCBGHY45Ek3RvKqhQ5yb-XtPWExDbaLRYw@mail.gmail.com>
 <8cc3f966-0cda-d582-821c-e3a196627f1d@spatialys.com>
 <CAAcGz9_KU3L+nFMf9W9aXvnpAJjOv5cVD1z5CtVGV19Vu2Xxvg@mail.gmail.com>
Message-ID: <rmi7cvrz8cm.fsf@s1.lexort.com>

Michael Sumner <mdsumner at gmail.com> writes:

> I've been trying with PYTHONPATH and sys.path, and I think I was doing it
> wrong ...   but the simplicity of the /usr prefix had not occurred to me,
> I'll be doing that.
>
> If I come back around with further insights I'll share them, but this is
> working for me now.
>
> cmake .. -DCMAKE_INSTALL_PREFIX=/usr

Basically:

  if you want to install gdal python, you should be building gdal to a
  prefix that already has a python build

  if your packaging system controls /usr, then you are off the rails if
  you write to /usr otherwise.   But it could be the least bad option,
  as building everything in a new prefix is hard.

From tsvibar at gmail.com  Wed Mar  8 05:22:41 2023
From: tsvibar at gmail.com (Micha Silver)
Date: Wed, 8 Mar 2023 15:22:41 +0200
Subject: [gdal-dev] ERROR 1: No inverse operation
In-Reply-To: <a17513cc-3def-350e-807a-718e898eb94d@spatialys.com>
References: <49eb2124-9d86-df3f-ae41-cfc5eacfff20@gmail.com>
 <ec6ceb21-9995-6036-339b-d31d7d42e264@spatialys.com>
 <a8073719-7e8b-af6a-55be-6ecf558b4256@gmail.com>
 <a17513cc-3def-350e-807a-718e898eb94d@spatialys.com>
Message-ID: <53f2b9ee-4026-4d2c-5bbf-97bedf3e4e6d@gmail.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230308/b875daa8/attachment-0001.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Mar  8 06:23:55 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 8 Mar 2023 14:23:55 +0000
Subject: [gdal-dev] How proceed with GDAL GeoTIFF files with multiply
 subdataset
In-Reply-To: <faed0332-957f-bb8d-1073-aeed0ff81806@r-systems.ee>
References: <78d6644b-ac37-ba7c-51db-b4e8f498cc37@r-systems.ee>
 <faed0332-957f-bb8d-1073-aeed0ff81806@r-systems.ee>
Message-ID: <AM0PR09MB32197CC8BD38AE3927AB8DCDFDB49@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Do you know that your source file is a multipage TIFF? Could you share a small test file? There is python test for reading a multipage TIFF at https://github.com/OSGeo/gdal/blob/master/autotest/gcore/tiff_read.py#L582, please have a look.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Raivo Rebane
L?hetetty: keskiviikko 8. maaliskuuta 2023 14.55
Vastaanottaja: GDAL <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] How proceed with GDAL GeoTIFF files with multiply subdataset


Hi

I found from documentation following about subdataset:

Subdatasets?<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgdal.org%2Fdrivers%2Fraster%2Fgtiff.html%23subdatasets&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C2c9de6f7bf72448ceb7008db1fd457ee%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638138769088912458%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=G%2Fls8czdoflmK70QnDVjJK%2B8U271BLdVxtp%2FKRoKLZM%3D&reserved=0>

Multi-page TIFF files are exposed as subdatasets. On opening, a subdataset name is GTIFF_DIR:{index}:filename.tif, where {index} starts at 1.

I am using following code :

  GDALDataset* subdataset = static_cast<GDALDataset*>(GDALOpen("F:\\3D-data\\GeoTIFFs\\[1]:44744.tif", GA_ReadOnly));
    if (subdataset == NULL) {
        std::cout << "Failed to open subdataset!" << std::endl;
        return 1;
    }

But geting following :

subdataset = NULL

From documentation I didn't find more

In what I am wrong

Regards

Raivo


On 08.03.23 01:01, Brad Hards wrote:

On Wednesday, 8 March 2023 6:53:17 AM AEDT Raivo Rebane wrote:

I studied and asked from https://chat.openai.com/chat<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fchat.openai.com%2Fchat&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C2c9de6f7bf72448ceb7008db1fd457ee%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638138769088912458%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=%2BK7Ib0GPmnDTNx4PXyxJ1DvTYZiVUpm69btKTghav0o%3D&reserved=0> how to read

multiband raster image, but I did'nt find anywhere how to rread from

tiff file next frame or ortofo bands



Please ask me if it's possible

It is possible. See https://gdal.org/drivers/raster/gtiff.html#subdatasets<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgdal.org%2Fdrivers%2Fraster%2Fgtiff.html%23subdatasets&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C2c9de6f7bf72448ceb7008db1fd457ee%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638138769088912458%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=G%2Fls8czdoflmK70QnDVjJK%2B8U271BLdVxtp%2FKRoKLZM%3D&reserved=0> for

how the multiple images are identified.



Use gdalinfo on your file to see the specific characteristics.



See https://gdal.org/tutorials/raster_api_tut.html<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgdal.org%2Ftutorials%2Fraster_api_tut.html&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C2c9de6f7bf72448ceb7008db1fd457ee%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638138769088912458%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=VISqRXj3atPZ6s0d2NWbIfywT6%2BcwQYI9VvCzV2kBPo%3D&reserved=0> for use of the Raster API

abstraction.



So you just need to pass the correct name to the open call.





Brad







_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev<https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C2c9de6f7bf72448ceb7008db1fd457ee%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638138769088912458%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=nK2Uwqq6XlbEuHOmT1wktRZstvg5scKU6dy44WLhZ7I%3D&reserved=0>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230308/fa9a4479/attachment.htm>

From even.rouault at spatialys.com  Wed Mar  8 09:30:58 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 8 Mar 2023 18:30:58 +0100
Subject: [gdal-dev] ERROR 1: No inverse operation
In-Reply-To: <53f2b9ee-4026-4d2c-5bbf-97bedf3e4e6d@gmail.com>
References: <49eb2124-9d86-df3f-ae41-cfc5eacfff20@gmail.com>
 <ec6ceb21-9995-6036-339b-d31d7d42e264@spatialys.com>
 <a8073719-7e8b-af6a-55be-6ecf558b4256@gmail.com>
 <a17513cc-3def-350e-807a-718e898eb94d@spatialys.com>
 <53f2b9ee-4026-4d2c-5bbf-97bedf3e4e6d@gmail.com>
Message-ID: <d2f7c86c-704d-b539-383b-4f721fb788f3@spatialys.com>

The file is indeed fine and was recognized in earlier GDAL versions (<= 
3.4). Bug fixed per https://github.com/OSGeo/gdal/pull/7382


Le 08/03/2023 ? 14:22, Micha Silver a ?crit?:
>
> Inline...
>
>
> On 08/03/2023 14:33, Even Rouault wrote:
>>
>> Ah, the issue here is that the GeoTIFF keys in the .tif partially 
>> define the projection (or possibly the .tif.aux.xml contain this 
>> invalid WKT). But METHOD["unnamed"] means that the projection method 
>> is unknown, so it is logical that GDAL/PROJ can't compute geographic 
>> coordinates from projected coordinates.
>>
>>
>> The output of "listgeo HiBar_21022022_A1.tif" might be useful to 
>> further diagnose.
>>
>>
> I can't see any problem here:
>
>
> listgeo HiBar_21022022_A1.tif
> Geotiff_Information:
> ??Version: 1
> ??Key_Revision: 1.0
> ??Tagged_Information:
> ?????ModelTiepointTag (2,3):
> ????????0 ????????????????0 ????????????????0
> ????????202245.240786848 ?421915.720555977 ?0
> ?????ModelPixelScaleTag (1,3):
> ????????0.125 ????????????0.125 ????????????1
> ?????End_Of_Tags.
> ??Keyed_Information:
> ?????GTModelTypeGeoKey (Short,1): ModelTypeProjected
> ?????GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
> ?????GTCitationGeoKey (Ascii,26): "PCS Name = Israel_TM_Grid"
> ?????GeographicTypeGeoKey (Short,1): Code-4141 (Israel 1993)
> ?????GeogAngularUnitsGeoKey (Short,1): Angular_Degree
> ?????GeogEllipsoidGeoKey (Short,1): Ellipse_GRS_1980
> ?????GeogSemiMajorAxisGeoKey (Double,1): 6378137
> ?????GeogSemiMinorAxisGeoKey (Double,1): 6356752.31414036
> ?????GeogInvFlatteningGeoKey (Double,1): 298.257222101
> ?????GeogTOWGS84GeoKey (Double,7): -48 ?????????????55 ??????????????52
> 0 ???????????????0 ???????????????0
> 0
> ?????ProjectedCSTypeGeoKey (Short,1): Code-2039 (Israel 1993 / Israeli 
> TM Grid)
> ?????PCSCitationGeoKey (Ascii,15): "Israel_TM_Grid"
> ?????ProjLinearUnitsGeoKey (Short,1): Linear_Meter
> ?????End_Of_Keys.
> ??End_Of_Geotiff.
>
> PCS = 2039 (Israel 1993 / Israeli TM Grid)
> Projection = 18204 (Israeli TM)
> Projection Method: CT_TransverseMercator
> ??ProjNatOriginLatGeoKey: 31.734394 ( 31d44' 3.82"N)
> ??ProjNatOriginLongGeoKey: 35.204517 ( 35d12'16.26"E)
> ??ProjScaleAtNatOriginGeoKey: 1.000007
> ??ProjFalseEastingGeoKey: 219529.584000 m
> ??ProjFalseNorthingGeoKey: 626907.390000 m
> GCS: 4141/Israel 1993
> Datum: 6141/Israel 1993
> Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
> Prime Meridian: 8901/Greenwich (0.000000/ ?0d 0' 0.00"E)
> TOWGS84: -48,55,52,0,0,0,0
> Projection Linear Units: 9001/metre (1.000000m)
>
> Corner Coordinates:
> Upper Left ???( ?202245.241, ?421915.721) ?( 35d 1'32.11"E, 29d53' 
> 7.03"N)
> Lower Left ???( ?202245.241, ?418790.721) ?( 35d 1'32.29"E, 
> 29d51'25.54"N)
> Upper Right ??( ?205370.241, ?421915.721) ?( 35d 3'28.57"E, 29d53' 
> 7.17"N)
> Lower Right ??( ?205370.241, ?418790.721) ?( 35d 3'28.72"E, 
> 29d51'25.68"N)
> Center ???????( ?203807.741, ?420353.221) ?( 35d 2'30.42"E, 29d52'16.36"N)
>
> Then, after:
>
>
> gdal_translate -a_srs EPSG:2039 HiBar_21022022_A1.tif 
> HiBar_21022022_A1b.tif
>
>
> The ERROR goes away and I get:
>
>
> gdalinfo HiBar_21022022_A1b.tif
> Driver: GTiff/GeoTIFF
> Files: HiBar_21022022_A1b.tif
> Size is 25000, 25000
> Coordinate System is:
> PROJCRS["Israel 1993 / Israeli TM Grid",
> ???BASEGEOGCRS["Israel 1993",
> ???????DATUM["Israel 1993",
> ???????????ELLIPSOID["GRS 1980",6378137,298.257222101,
> ???????????????LENGTHUNIT["metre",1]]],
> ???????PRIMEM["Greenwich",0,
> ???????????ANGLEUNIT["degree",0.0174532925199433]],
> ???????ID["EPSG",4141]],
> ???CONVERSION["Israeli TM",
> ???????METHOD["Transverse Mercator",
> ???????????ID["EPSG",9807]],
> ???????PARAMETER["Latitude of natural origin",31.7343936111111,
> ???????????ANGLEUNIT["degree",0.0174532925199433],
> ???????????ID["EPSG",8801]],
> ???????PARAMETER["Longitude of natural origin",35.2045169444444,
> ???????????ANGLEUNIT["degree",0.0174532925199433],
> ???????????ID["EPSG",8802]],
> ???????PARAMETER["Scale factor at natural origin",1.0000067,
> ???????????SCALEUNIT["unity",1],
> ???????????ID["EPSG",8805]],
> ???????PARAMETER["False easting",219529.584,
> ???????????LENGTHUNIT["metre",1],
> ???????????ID["EPSG",8806]],
> ???????PARAMETER["False northing",626907.39,
> ???????????LENGTHUNIT["metre",1],
> ???????????ID["EPSG",8807]]],
> ???CS[Cartesian,2],
> ???????AXIS["(E)",east,
> ???????????ORDER[1],
> ???????????LENGTHUNIT["metre",1]],
> ???????AXIS["(N)",north,
> ???????????ORDER[2],
> ???????????LENGTHUNIT["metre",1]],
> ???USAGE[
> ???????SCOPE["Cadastre, engineering survey, topographic mapping (large 
> and medium scale)."],
> ???????AREA["Israel - onshore; Palestine Territory - onshore."],
> ???????BBOX[29.45,34.17,33.28,35.69]],
> ???ID["EPSG",2039]]
> Data axis to CRS axis mapping: 1,2
> Origin = (202245.240786847687559,421915.720555976789910)
> Pixel Size = (0.125000000000000,-0.125000000000000)
> Metadata:
> ?AREA_OR_POINT=Area
> Image Structure Metadata:
> ?INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left ?( ?202245.241, ?421915.721) ( 35d 1'32.11"E, 29d53' 7.03"N)
> Lower Left ?( ?202245.241, ?418790.721) ( 35d 1'32.29"E, 29d51'25.54"N)
> Upper Right ( ?205370.241, ?421915.721) ( 35d 3'28.57"E, 29d53' 7.17"N)
> Lower Right ( ?205370.241, ?418790.721) ( 35d 3'28.72"E, 29d51'25.68"N)
> Center ?????( ?203807.741, ?420353.221) ( 35d 2'30.42"E, 29d52'16.36"N)
> Band 1 Block=25000x1 Type=Byte, ColorInterp=Red
> Band 2 Block=25000x1 Type=Byte, ColorInterp=Green
> Band 3 Block=25000x1 Type=Byte, ColorInterp=Blue
> Band 4 Block=25000x1 Type=Byte, ColorInterp=Undefined
>
> and the listgeo output is also different:
>
>
> listgeo HiBar_21022022_A1b.tif
> Geotiff_Information:
> ??Version: 1
> ??Key_Revision: 1.0
> ??Tagged_Information:
> ?????ModelTiepointTag (2,3):
> ????????0 ????????????????0 ????????????????0
> ????????202245.240786848 ?421915.720555977 ?0
> ?????ModelPixelScaleTag (1,3):
> ????????0.125 ????????????0.125 ????????????0
> ?????End_Of_Tags.
> ??Keyed_Information:
> ?????GTModelTypeGeoKey (Short,1): ModelTypeProjected
> ?????GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
> ?????GTCitationGeoKey (Ascii,30): "Israel 1993 / Israeli TM Grid"
> ?????GeogCitationGeoKey (Ascii,12): "Israel 1993"
> ?????GeogAngularUnitsGeoKey (Short,1): Angular_Degree
> ?????ProjectedCSTypeGeoKey (Short,1): Code-2039 (Israel 1993 / Israeli 
> TM Grid)
> ?????ProjLinearUnitsGeoKey (Short,1): Linear_Meter
> ?????End_Of_Keys.
> ??End_Of_Geotiff.
>
> PCS = 2039 (Israel 1993 / Israeli TM Grid)
> Projection = 18204 (Israeli TM)
> Projection Method: CT_TransverseMercator
> ??ProjNatOriginLatGeoKey: 31.734394 ( 31d44' 3.82"N)
> ??ProjNatOriginLongGeoKey: 35.204517 ( 35d12'16.26"E)
> ??ProjScaleAtNatOriginGeoKey: 1.000007
> ??ProjFalseEastingGeoKey: 219529.584000 m
> ??ProjFalseNorthingGeoKey: 626907.390000 m
> GCS: 4141/Israel 1993
> Datum: 6141/Israel 1993
> Ellipsoid: 7019/GRS 1980 (6378137.00,6356752.31)
> Prime Meridian: 8901/Greenwich (0.000000/ ?0d 0' 0.00"E)
> Projection Linear Units: 9001/metre (1.000000m)
>
> Corner Coordinates:
> Upper Left ???( ?202245.241, ?421915.721) ?( 35d 1'32.11"E, 29d53' 
> 7.03"N)
> Lower Left ???( ?202245.241, ?418790.721) ?( 35d 1'32.29"E, 
> 29d51'25.54"N)
> Upper Right ??( ?205370.241, ?421915.721) ?( 35d 3'28.57"E, 29d53' 
> 7.17"N)
> Lower Right ??( ?205370.241, ?418790.721) ?( 35d 3'28.72"E, 
> 29d51'25.68"N)
> Center ???????( ?203807.741, ?420353.221) ?( 35d 2'30.42"E, 29d52'16.36"N)
>
>
> So I guess that solves the problem, allowing for reprojection, and 
> mapping together with other datasets.
>
> Thanks for you help (spot on, as always!)
>
>
>
>> You likely need to gdal_translate -a_srs EPSG:2039 to do something 
>> useful with that file, and report to the data producer that the CRS 
>> encoding is broken
>>
>>
>> Le 08/03/2023 ? 13:18, Micha Silver a ?crit?:
>>>
>>> Hi Even:
>>>
>>>
>>> Here's the full gdalinfo, with the reported CRS:
>>>
>>>
>>> gdalinfo HiBar_21022022_A1.tif
>>> Driver: GTiff/GeoTIFF
>>> Files: HiBar_21022022_A1.tif
>>> ??????HiBar_21022022_A1.tif.aux.xml
>>> Size is 25000, 25000
>>> Coordinate System is:
>>> PROJCRS["Israel 1993 / Israeli TM Grid",
>>> ???BASEGEOGCRS["WGS 84",
>>> ???????DATUM["World Geodetic System 1984",
>>> ???????????ELLIPSOID["WGS 84",6378137,298.257223563,
>>> ???????????????LENGTHUNIT["metre",1,
>>> ???????????????????ID["EPSG",9001]]]],
>>> ???????PRIMEM["Greenwich",0,
>>> ???????????ANGLEUNIT["degree",0.0174532925199433,
>>> ???????????????ID["EPSG",9122]]]],
>>> ???CONVERSION["unnamed",
>>> ???????METHOD["unnamed"]],
>>> ???CS[Cartesian,2],
>>> ???????AXIS["(E)",east,
>>> ???????????ORDER[1],
>>> ???????????LENGTHUNIT["metre",1,
>>> ???????????????ID["EPSG",9001]]],
>>> ???????AXIS["(N)",north,
>>> ???????????ORDER[2],
>>> ???????????LENGTHUNIT["metre",1,
>>> ???????????????ID["EPSG",9001]]]]
>>> Data axis to CRS axis mapping: 1,2
>>> Origin = (202245.240786847687559,421915.720555976789910)
>>> Pixel Size = (0.125000000000000,-0.125000000000000)
>>> Metadata:
>>> ?AREA_OR_POINT=Area
>>> Image Structure Metadata:
>>> ?INTERLEAVE=PIXEL
>>> Corner Coordinates:
>>> ERROR 1: No inverse operation
>>> Upper Left ?( ?202245.241, ?421915.721)
>>> ERROR 1: No inverse operation
>>> Lower Left ?( ?202245.241, ?418790.721)
>>> ERROR 1: No inverse operation
>>> Upper Right ( ?205370.241, ?421915.721)
>>> ERROR 1: No inverse operation
>>> Lower Right ( ?205370.241, ?418790.721)
>>> ERROR 1: No inverse operation
>>> Center ?????( ?203807.741, ?420353.221)
>>>
>>> and proj version:
>>>
>>>
>>> proj
>>> Rel. 9.1.1, December 1st, 2022
>>>
>>>
>>> (a newly installed debian 12)
>>>
>>>
>>> Thanks,
>>>
>>> Micha
>>>
>>>
>>> On 08/03/2023 13:47, Even Rouault wrote:
>>>>
>>>> Micha,
>>>>
>>>>
>>>> which CRS is reported and which PROJ version do you use ? It is 
>>>> presumably one projection method for which PROJ only implements the 
>>>> forward conversion, that is from geographic to projected 
>>>> coordinates, but not the reverse way
>>>>
>>>>
>>>> Even
>>>>
>>>>
>>>> Le 08/03/2023 ? 09:37, Micha Silver a ?crit?:
>>>>>
>>>>> I received some Geotiff files, and gdalinfo shows:
>>>>>
>>>>>
>>>>> Corner Coordinates:
>>>>> ERROR 1: No inverse operation
>>>>> Upper Left ?( ?205370.241, ?418790.721)
>>>>> ERROR 1: No inverse operation
>>>>> Lower Left ?( ?205370.241, ?415665.721)
>>>>> ERROR 1: No inverse operation
>>>>> Upper Right ( ?206198.866, ?418790.721)
>>>>> ERROR 1: No inverse operation
>>>>> Lower Right ( ?206198.866, ?415665.721)
>>>>> ERROR 1: No inverse operation
>>>>> Center ?????( ?205784.553, ?417228.221)
>>>>>
>>>>> What does that mean?
>>>>>
>>>>>
>>>>> gdalinfo --version
>>>>> GDAL 3.6.2, released 2023/01/02
>>>>>
>>>>> Thanks
>>>>>
>>>>>
>>>>> -- 
>>>>> Micha Silver
>>>>> Remote Sensing Lab, Sde Boker
>>>>> Ben Gurion University
>>>>> +972-523-665918
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> -- 
>>>> http://www.spatialys.com
>>>> My software is free, but my time generally not.
>>> -- 
>>> Micha Silver
>>> Remote Sensing Lab, Sde Boker
>>> Ben Gurion University
>>> +972-523-665918
>> -- 
>> http://www.spatialys.com
>> My software is free, but my time generally not.
> -- 
> Micha Silver
> Remote Sensing Lab, Sde Boker
> Ben Gurion University
> +972-523-665918

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230308/9471d84d/attachment-0001.htm>

From raivo at r-systems.ee  Wed Mar  8 11:54:37 2023
From: raivo at r-systems.ee (Raivo Rebane)
Date: Wed, 8 Mar 2023 21:54:37 +0200
Subject: [gdal-dev] How proceed with GDAL GeoTIFF files with multiply
 subdataset
In-Reply-To: <faed0332-957f-bb8d-1073-aeed0ff81806@r-systems.ee>
References: <78d6644b-ac37-ba7c-51db-b4e8f498cc37@r-systems.ee>
 <faed0332-957f-bb8d-1073-aeed0ff81806@r-systems.ee>
Message-ID: <8daf90f0-6c5a-ea4a-6935-6298ee103160@r-systems.ee>

Hi

now I am using following c++ commands to read pages from 
multisubdatasets Geotiff file :

 ?? ???? dataset = 
static_cast<GDALDataset*>(GDALOpen(TiffFullName.c_str(), GA_ReadOnly));
 ?? ???? if (dataset == NULL) {
 ?? ???? ??? std::cout << "Failed to open subdataset nr = " << subsets 
<< " Read command =? " << TiffFullName << std::endl;
 ?? ???? ??? break;
 ?? ???? }
 ?? ???? else
 ?? ???? ??? std::cout << "Subdataset readed = " << subsets << " Read 
command =? " << TiffFullName << std::endl;

And getting following result :

Subdataset readed = 1 Read command = 
GTIFF_DIR:1:F:\3D-data\GeoTIFFs\autzen.1.tiff
ERROR 4: F:\3D-data\GeoTIFFs\autzen.1.tiff: Requested directory 2 not found.
Failed to open subdataset nr = 2 Read command = 
GTIFF_DIR:2:F:\3D-data\GeoTIFFs\autzen.1.tiff

Does this command works properly and how I can get information about 
subdatasets in GeoTiff file

Regards

Raivo

On 08.03.23 14:54, Raivo Rebane wrote:
>
> Hi
>
> I found from documentation following about subdataset:
>
>
>       Subdatasets?
>       <https://gdal.org/drivers/raster/gtiff.html#subdatasets>
>
> Multi-page TIFF files are exposed as subdatasets. On opening, a 
> subdataset name is GTIFF_DIR:{index}:filename.tif, where {index} 
> starts at 1.
>
> I am using following code :
>
> ? GDALDataset* subdataset = 
> static_cast<GDALDataset*>(GDALOpen("F:\\3D-data\\GeoTIFFs\\[1]:44744.tif", 
> GA_ReadOnly));
> ??? if (subdataset == NULL) {
> ??????? std::cout << "Failed to open subdataset!" << std::endl;
> ??????? return 1;
> ??? }
>
> But geting following :
>
> subdataset = NULL
>
> From documentation I didn't find more
>
> In what I am wrong
>
> Regards
>
> Raivo
>
>
> On 08.03.23 01:01, Brad Hards wrote:
>> On Wednesday, 8 March 2023 6:53:17 AM AEDT Raivo Rebane wrote:
>>> I studied and asked fromhttps://chat.openai.com/chat  how to read
>>> multiband raster image, but I did'nt find anywhere how to rread from
>>> tiff file next frame or ortofo bands
>>>
>>> Please ask me if it's possible
>> It is possible. Seehttps://gdal.org/drivers/raster/gtiff.html#subdatasets  for
>> how the multiple images are identified.
>>
>> Use gdalinfo on your file to see the specific characteristics.
>>
>> Seehttps://gdal.org/tutorials/raster_api_tut.html  for use of the Raster API
>> abstraction.
>>
>> So you just need to pass the correct name to the open call.
>>
>>
>> Brad
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230308/732be3f1/attachment.htm>

From bradh at frogmouth.net  Wed Mar  8 15:02:13 2023
From: bradh at frogmouth.net (Brad Hards)
Date: Thu, 09 Mar 2023 10:02:13 +1100
Subject: [gdal-dev] How proceed with GDAL GeoTIFF files with multiply
 subdataset
In-Reply-To: <faed0332-957f-bb8d-1073-aeed0ff81806@r-systems.ee>
References: <78d6644b-ac37-ba7c-51db-b4e8f498cc37@r-systems.ee>
 <faed0332-957f-bb8d-1073-aeed0ff81806@r-systems.ee>
Message-ID: <2676905.mvXUDI8C0e@audax>

On Wednesday, 8 March 2023 11:54:39 PM AEDT Raivo Rebane wrote:
> Hi
> 
> I found from documentation following about subdataset:
> 
> 
>       Subdatasets? <https://gdal.org/drivers/raster/gtiff.html#subdatasets>
> 
> Multi-page TIFF files are exposed as subdatasets. On opening, a
> subdataset name is GTIFF_DIR:{index}:filename.tif, where {index} starts
> at 1.
> 
> I am using following code :
> 
>    GDALDataset* subdataset =
> static_cast<GDALDataset*>(GDALOpen("F:\\3D-data\\GeoTIFFs\\[1]:44744.tif",
> GA_ReadOnly));
>      if (subdataset == NULL) {
>          std::cout << "Failed to open subdataset!" << std::endl;
>          return 1;
>      }
> 
> But geting following :
> 
> subdataset = NULL
> 
>  From documentation I didn't find more
> 
> In what I am wrong

I already identified a way to do this:

> > Use gdalinfo on your file to see the specific characteristics.

What does your file show?

Brad



From even.rouault at spatialys.com  Thu Mar  9 04:08:01 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Mar 2023 13:08:01 +0100
Subject: [gdal-dev] OpenFileGDB: add read-only support for raster datasets
Message-ID: <748be115-fce3-af9c-35eb-63637c54ba01@spatialys.com>

Hi,

for those not actively monitoring github activity, I just want to point 
at https://github.com/OSGeo/gdal/pull/7389 that adds read access to 
raster layers of File
Geodatabases (.gdb directories) created by ArcGIS 10 and above (which is 
a capability that didn't even exist in the closed source FileGDB SDK)

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From Stefan.Blumentrath at gmx.de  Thu Mar  9 06:42:02 2023
From: Stefan.Blumentrath at gmx.de (Stefan Blumentrath)
Date: Thu, 9 Mar 2023 15:42:02 +0100
Subject: [gdal-dev] OpenFileGDB: add read-only support for raster
 datasets
In-Reply-To: <748be115-fce3-af9c-35eb-63637c54ba01@spatialys.com>
References: <748be115-fce3-af9c-35eb-63637c54ba01@spatialys.com>
Message-ID: <trinity-8221f959-4043-4f28-baf1-8a927c2c6861-1678372921972@3c-app-gmx-bap05>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230309/c00770f5/attachment.htm>

From Jon.Morris at jbarisk.com  Thu Mar  9 07:29:20 2023
From: Jon.Morris at jbarisk.com (Jon Morris)
Date: Thu, 9 Mar 2023 15:29:20 +0000
Subject: [gdal-dev] FileGDB_COMPILE fails during CMake
In-Reply-To: <14ea91d4-bfea-8de6-1d62-7c2b10c24fe6@postholer.com>
References: <LO2P123MB48614EA5849119B88395E7A582A89@LO2P123MB4861.GBRP123.PROD.OUTLOOK.COM>
 <cdf2a89f-e541-6df1-3acd-1ea9975041a5@postholer.com>
 <LO2P123MB4861BBD079DA8819B9F1920382AF9@LO2P123MB4861.GBRP123.PROD.OUTLOOK.COM>
 <14ea91d4-bfea-8de6-1d62-7c2b10c24fe6@postholer.com>
Message-ID: <LO2P123MB4861FF9B704CC0B0AF705F1B82B59@LO2P123MB4861.GBRP123.PROD.OUTLOOK.COM>

So, does the OpenFileGDB driver work in the same way as the FileGDB driver? The build appeared to work, but when I try and use it in a Python shell, I get the following error.

>>> from osgeo import gdal
>>> drv=gdal.GetDriverByName('OpenFileGDB')
>>> ds=drv.Create('/data/test.gdb',0,0,0)
ERROR 6: Only vector datasets supported

I've tried leaving out the x/y size and nbands parameters, but they are required.

Looking at the source code (https://github.com/OSGeo/gdal/blob/release/3.6/gcore/gdaldriver.cpp#L225) there seems to be a create capability check before using the vector creation option. Is there a way to set this when creating the driver?

Thanks,

Jon


e: Jon.Morris at jbarisk.com
d:+44 (0)1756 587229
t: +44 (0)1756 799919
www.jbarisk.com
All JBA Risk Management's email messages contain confidential information and are intended only for the individual(s) named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.
Please notify the sender immediately by email if you have received this email by mistake and delete this email from your system. 
JBA Risk Management Limited is registered in England, company number 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North Yorkshire, BD23 3FD, England.
-----Original Message-----
From: Scott <public at postholer.com> 
Sent: 27 February 2023 16:03
To: Jon Morris <Jon.Morris at jbarisk.com>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] FileGDB_COMPILE fails during CMake

CAUTION: This email originated from outside of JBA and contains one or more links. DO NOT click links unless you recognise the sender's email address and are absolutely certain that the content is safe.
See the Phishing page on IMS on SP for more information about how to spot and report suspicious messages.

WARNING: The sender of this email could not be validated and may not match the person in the "From" field.

3.6 has read, write, update and create abilities using the builtin OpenFIleGDB. Building from source on linux I don't specify anything.

On 2/27/23 00:37, Jon Morris wrote:
> Does that mean we should no longer attempt to use the FileGDB API? Our 
> tool makes quite heavy use of FileGDB so we'd have to do something 
> like this every time a user wants to use it:
>
> if GDAL_VERSION >= (3, 6):
> driver = 'OpenFileGDB'
> else:
> driver = 'FileGDB'
>
> Jon
>
> e: ?  *Jon.Morris at jbarisk.com* <mailto:Jon.Morris at jbarisk.com>
> d:    +44 (0)1756 587229
> t:    *+44 (0)1756 799919* <tel:+44%20(0)1756%20799919>
>
>
> *www.jbarisk.com* <http://www.jbarisk.com/>
>
> Facebook <https://www.facebook.com/TheFloodPeople>
>
>
> LinkedIn <https://www.linkedin.com/company/jba-risk-management/>
>
>
> Twitter <https://twitter.com/JBARisk>
>
>
> YouTube <https://www.youtube.com/channel/UC0iatom2jYbW96voW0rlpCw>
>
>
>
> All JBA Risk Management's email messages contain confidential 
> information and are intended only for the individual(s) named. If you 
> are not the named addressee you should not disseminate, distribute or 
> copy this e-mail.
> Please notify the sender immediately by email if you have received 
> this email by mistake and delete this email from your system.
> JBA Risk Management Limited is registered in England, company number 
> 07732946, 1 Broughton Park, Old Lane North, Broughton, Skipton, North 
> Yorkshire, BD23 3FD, England.
>
> -----Original Message-----
> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Scott
> Sent: 24 February 2023 16:44
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] FileGDB_COMPILE fails during CMake
>
> CAUTION: This email originated from outside of JBA and contains one or 
> more links. DO NOT click links unless you recognise the sender's email 
> address and are absolutely certain that the content is safe.
> See the Phishing page on IMS on SP for more information about how to 
> spot and report suspicious messages.
>
> With gdal >= 3.6 OpenFileGDB is built in by default, no need for 
> external API.
>
>
>
> On 2/24/23 08:37, Jon Morris wrote:
>  > Hi all,
>  >
>  > I?ve been upgrading our build script from autotools to CMake and 
> I?ve  > almost got it working, except for FileGDB. I?ve added the 
> cmake  > parameters -DFileGDB_ROOT=/usr/local/FileGDB_API
>  > -DFileGDB_INCLUDE_DIR=/usr/local/FileGDB_API/include and the paths 
> are  > correct. The earlier FileGDB install stage is the same as in  > 
> https://github.com/OSGeo/gdal/blob/release/3.6/.github/workflows/ubuntu_20.04/build-deps.sh <https://github.com/OSGeo/gdal/blob/release/3.6/.github/workflows/ubuntu_20.04/build-deps.sh>.
>  >
>  > (I?ve also tried /usr/include for the include path with the same result).
>  >
>  > When I run CMake, I get the following lines in the log (irrelevant  
> > lines have been removed):
>  >
>  > -- Performing Test TEST_FileGDB_COMPILE  >  > -- Performing Test 
> TEST_FileGDB_COMPILE - Failed  >  > -- Found FileGDB: 
> /usr/local/FileGDB_API/lib/libFileGDBAPI.so
>  >
>  > -- Enabled drivers and features and found dependency packages  >  > 
> -- The following features have been enabled:
>  >
>  > * ogr_FILEGDB, FileGDB
>  >
>  > -- The following OPTIONAL packages have been found:
>  >
>  > * FileGDB
>  >
>  > Enable FileGDB (based on closed-source SDK) driver  >  > [ 82%] 
> Building CXX object  > 
> ogr/ogrsf_frmts/filegdb/CMakeFiles/ogr_FileGDB.dir/FGdbDatasource.cpp.
>  > o
>  >
>  > [ 82%] Building CXX object
>  > ogr/ogrsf_frmts/filegdb/CMakeFiles/ogr_FileGDB.dir/FGdbDriver.cpp.o
>  >
>  > [ 82%] Building CXX object
>  > ogr/ogrsf_frmts/filegdb/CMakeFiles/ogr_FileGDB.dir/FGdbLayer.cpp.o
>  >
>  > [ 82%] Building CXX object
>  > 
> ogr/ogrsf_frmts/filegdb/CMakeFiles/ogr_FileGDB.dir/FGdbResultLayer.cpp
>  > .o
>  >
>  > [ 82%] Building CXX object
>  > ogr/ogrsf_frmts/filegdb/CMakeFiles/ogr_FileGDB.dir/FGdbUtils.cpp.o
>  >
>  > [ 82%] Built target ogr_FileGDB
>  >
>  > [ 94%] Linking CXX shared library libgdal.so  >  > 
> /opt/rh/devtoolset-10/root/usr/libexec/gcc/x86_64-redhat-linux/10/ld:
>  > ogr/ogrsf_frmts/filegdb/CMakeFiles/ogr_FileGDB.dir/FGdbDatasource.cpp.o:
>  > in function FGdbDataSource::DeleteLayer(int)':
>  >
>  > FGdbDatasource.cpp:(.text+0x12b0): undefined reference to  > 
> `FileGDBAPI::Geodatabase::Delete(std::basic_string<wchar_t,
>  > std::char_traits<wchar_t>, std::allocator<wchar_t> > const&,  > 
> std::basic_string<wchar_t, std::char_traits<wchar_t>,  > 
> std::allocator<wchar_t> > const&)'
>  >
>  > Many more undefined reference errors follow.
>  >
>  > Does anyone know what could be going wrong here and what else I can  
> > try to debug it? I?m all out of ideas.
>  >
>  > Many thanks,
>  >
>  > Jon
>  >
>  > e: ? *Jon.Morris at jbarisk.com* <mailto:Jon.Morris at jbarisk.com>  > d: 
> +44 (0)1756 587229  > t: *+44 (0)1756 799919* 
> <tel:+44%20(0)1756%20799919>  >  >  > *www.jbarisk.com* 
> <http://www.jbarisk.com/>  >  > Facebook 
> <https://www.facebook.com/TheFloodPeople>
>  >
>  >
>  > LinkedIn <https://www.linkedin.com/company/jba-risk-management/>
>  >
>  >
>  > Twitter <https://twitter.com/JBARisk>  >  >  > YouTube 
> <https://www.youtube.com/channel/UC0iatom2jYbW96voW0rlpCw>
>  >
>  >
>  >
>  > All JBA Risk Management's email messages contain confidential  > 
> information and are intended only for the individual(s) named. If you  
> > are not the named addressee you should not disseminate, distribute 
> or  > copy this e-mail.
>  > Please notify the sender immediately by email if you have received  
> > this email by mistake and delete this email from your system.
>  > JBA Risk Management Limited is registered in England, company 
> number  > 07732946, 1 Broughton Park, Old Lane North, Broughton, 
> Skipton, North  > Yorkshire, BD23 3FD, England.
>  >
>  >
>  > _______________________________________________
>  > gdal-dev mailing list
>  > gdal-dev at lists.osgeo.org
>  > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230309/106a4fb9/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image243819.png
Type: image/png
Size: 9321 bytes
Desc: image243819.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230309/106a4fb9/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image952942.png
Type: image/png
Size: 651 bytes
Desc: image952942.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230309/106a4fb9/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image304634.png
Type: image/png
Size: 715 bytes
Desc: image304634.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230309/106a4fb9/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image845049.png
Type: image/png
Size: 966 bytes
Desc: image845049.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230309/106a4fb9/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image220436.png
Type: image/png
Size: 784 bytes
Desc: image220436.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230309/106a4fb9/attachment-0009.png>

From even.rouault at spatialys.com  Thu Mar  9 07:33:17 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Mar 2023 16:33:17 +0100
Subject: [gdal-dev] Motion: Adopt GDAL 3.6.3RC1 as 3.6.1 release
Message-ID: <f9a68a15-d8f3-ba67-5f12-1bff1216f976@spatialys.com>

Hi,

Motion:

Adopt GDAL 3.6.3RC1 as 3.6.3 release

Starting with my +1

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Thu Mar  9 07:40:59 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Mar 2023 16:40:59 +0100
Subject: [gdal-dev] Motion: Adopt GDAL 3.6.3RC1 as 3.6.3 release
In-Reply-To: <f9a68a15-d8f3-ba67-5f12-1bff1216f976@spatialys.com>
References: <f9a68a15-d8f3-ba67-5f12-1bff1216f976@spatialys.com>
Message-ID: <c8534f67-d37c-bfa9-694d-0b7f053a68c1@spatialys.com>

Same motion, just fixing the title to reflect the correction version 
number, as kindly pointed out.

Le 09/03/2023 ? 16:33, Even Rouault a ?crit?:
> Hi,
>
> Motion:
>
> Adopt GDAL 3.6.3RC1 as 3.6.3 release
>
> Starting with my +1
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From howard at hobu.co  Thu Mar  9 08:28:41 2023
From: howard at hobu.co (Howard Butler)
Date: Thu, 9 Mar 2023 10:28:41 -0600
Subject: [gdal-dev] Motion: Adopt GDAL 3.6.3RC1 as 3.6.3 release
In-Reply-To: <c8534f67-d37c-bfa9-694d-0b7f053a68c1@spatialys.com>
References: <f9a68a15-d8f3-ba67-5f12-1bff1216f976@spatialys.com>
 <c8534f67-d37c-bfa9-694d-0b7f053a68c1@spatialys.com>
Message-ID: <1C04D05B-3710-42CF-B02B-C2DDC91EC9A1@hobu.co>

> Le 09/03/2023 ? 16:33, Even Rouault a ?crit :
>> Hi,
>> 
>> Motion:
>> 
>> Adopt GDAL 3.6.3RC1 as 3.6.3 release
>> 
>> Starting with my +1

+1

From mateusz at loskot.net  Thu Mar  9 08:37:08 2023
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 9 Mar 2023 17:37:08 +0100
Subject: [gdal-dev] Motion: Adopt GDAL 3.6.3RC1 as 3.6.1 release
In-Reply-To: <f9a68a15-d8f3-ba67-5f12-1bff1216f976@spatialys.com>
References: <f9a68a15-d8f3-ba67-5f12-1bff1216f976@spatialys.com>
Message-ID: <CABUeae99OjZtp71O2FFXmhFgiFSmFys733A82H8zDumN2-O1Mw@mail.gmail.com>

+1  Mateusz

On Thu, 9 Mar 2023 at 16:33, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Hi,
>
> Motion:
>
> Adopt GDAL 3.6.3RC1 as 3.6.3 release
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Thu Mar  9 08:37:38 2023
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 9 Mar 2023 17:37:38 +0100
Subject: [gdal-dev] Motion: Adopt GDAL 3.6.3RC1 as 3.6.3 release
In-Reply-To: <c8534f67-d37c-bfa9-694d-0b7f053a68c1@spatialys.com>
References: <f9a68a15-d8f3-ba67-5f12-1bff1216f976@spatialys.com>
 <c8534f67-d37c-bfa9-694d-0b7f053a68c1@spatialys.com>
Message-ID: <CABUeae_FFVCMNKmewf+ow6EYQiz--Zo98QsbXkpLs2MeAXQ=ag@mail.gmail.com>

+1   Mateusz

On Thu, 9 Mar 2023 at 16:41, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Same motion, just fixing the title to reflect the correction version
> number, as kindly pointed out.
>
> Le 09/03/2023 ? 16:33, Even Rouault a ?crit :
> > Hi,
> >
> > Motion:
> >
> > Adopt GDAL 3.6.3RC1 as 3.6.3 release
> >
> > Starting with my +1
> >
> > Even
> >
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Mateusz Loskot, http://mateusz.loskot.net

From norman.barker at gmail.com  Thu Mar  9 09:52:14 2023
From: norman.barker at gmail.com (Norman Barker)
Date: Thu, 9 Mar 2023 11:52:14 -0600
Subject: [gdal-dev] Motion: Adopt GDAL 3.6.3RC1 as 3.6.3 release
In-Reply-To: <CABUeae_FFVCMNKmewf+ow6EYQiz--Zo98QsbXkpLs2MeAXQ=ag@mail.gmail.com>
References: <f9a68a15-d8f3-ba67-5f12-1bff1216f976@spatialys.com>
 <c8534f67-d37c-bfa9-694d-0b7f053a68c1@spatialys.com>
 <CABUeae_FFVCMNKmewf+ow6EYQiz--Zo98QsbXkpLs2MeAXQ=ag@mail.gmail.com>
Message-ID: <CAN_Dn-HL5qYhdqkTSQiSnFb3PWe2vqoYy84riFEYQ=SbPN17qA@mail.gmail.com>

+1 Norman

On Thu, Mar 9, 2023 at 10:38?AM Mateusz Loskot <mateusz at loskot.net> wrote:

> +1   Mateusz
>
> On Thu, 9 Mar 2023 at 16:41, Even Rouault <even.rouault at spatialys.com>
> wrote:
> >
> > Same motion, just fixing the title to reflect the correction version
> > number, as kindly pointed out.
> >
> > Le 09/03/2023 ? 16:33, Even Rouault a ?crit :
> > > Hi,
> > >
> > > Motion:
> > >
> > > Adopt GDAL 3.6.3RC1 as 3.6.3 release
> > >
> > > Starting with my +1
> > >
> > > Even
> > >
> > --
> > http://www.spatialys.com
> > My software is free, but my time generally not.
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230309/d683c6c6/attachment.htm>

From even.rouault at spatialys.com  Thu Mar  9 10:13:46 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Mar 2023 19:13:46 +0100
Subject: [gdal-dev] Removal of Python SWIG python generated files from git
Message-ID: <e2f5a4c1-d213-4296-841d-e59d4bc3e855@spatialys.com>

Hi,

take this email as a mini-RFC regarding the changes in 
https://github.com/OSGeo/gdal/pull/7390 which remove the SWIG python 
generated files from git master, and thus make the SWIG binary a 
requirement to build the Python bindings.

Below, the text of the PR:

This removes a long-time oddity where the SWIG generated .py and .cpp 
files were stored in git, which was inconvenient for contributors, 
requiring them to have a precise SWIG version and enabling a specific 
CMake variable to resync the generated files to the source files, and 
causing confusion to occasional contributors who sometimes accidentally 
submitted changes to generated files instead of their source files. This 
was also different from the Java and CSharp bindings, which didn't have 
the generated files in git and required SWIG to be available to generate 
them.

Bonus of this move: in the process, due to some of our most up to date 
CI targets using SWIG 4.1, it enabled to fix 2 errors in SWIG syntax 
that were rejected by SWIG 4.1 (and hidden up to now due to using 4.0.2 
as our baseline)

This change shouldn't be a major hurdle for distributors, as most known 
binary distributions did regenerate the files anyway.

Note to people updating an existing git checkout: now the 
BUILD_JAVA/CSHARP/PYTHON_BINDINGS CMake variables are strictly honored. 
They are now initialized to ON only if all build requirements are 
available (SWIG and Python for the python bindings), and if set to ON 
but a requirement is missing, CMake fails. This might cause issues for 
people for example not having the requirements for the Java or CSharp 
bindings, but with an existing CMakeCache.txt with them set. Fix: run 
"cmake -UBUILD_JAVA_BINDINGS -UBUILD_CHSARP_BINDINGS 
-UBUILD_PYTHON_BINDINGS"

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From daniel.fred.evans at gmail.com  Thu Mar  9 11:57:43 2023
From: daniel.fred.evans at gmail.com (Daniel Evans)
Date: Thu, 9 Mar 2023 19:57:43 +0000
Subject: [gdal-dev] Removal of Python SWIG python generated files from
 git
In-Reply-To: <e2f5a4c1-d213-4296-841d-e59d4bc3e855@spatialys.com>
References: <e2f5a4c1-d213-4296-841d-e59d4bc3e855@spatialys.com>
Message-ID: <CANnaQaaX6XHhUHqphAN1=Gfm021V_OsCR+aE4=_3vaBb9J1oSQ@mail.gmail.com>

Hi Even,

This sounds a sensible change, for the reasons outlined in your first
paragraph. When first making contributions, I think I was caught out
by this arrangement in just about all of the ways you mention!

To play devil's advocate, were there any (perceived) benefits to this
arrangement when originally introduced, other than not needing the
SWIG binary to compile Python bindings?

Regards,
Daniel

On Thu, 9 Mar 2023 at 18:14, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Hi,
>
> take this email as a mini-RFC regarding the changes in
> https://github.com/OSGeo/gdal/pull/7390 which remove the SWIG python
> generated files from git master, and thus make the SWIG binary a
> requirement to build the Python bindings.
>
> Below, the text of the PR:
>
> This removes a long-time oddity where the SWIG generated .py and .cpp
> files were stored in git, which was inconvenient for contributors,
> requiring them to have a precise SWIG version and enabling a specific
> CMake variable to resync the generated files to the source files, and
> causing confusion to occasional contributors who sometimes accidentally
> submitted changes to generated files instead of their source files. This
> was also different from the Java and CSharp bindings, which didn't have
> the generated files in git and required SWIG to be available to generate
> them.
>
> Bonus of this move: in the process, due to some of our most up to date
> CI targets using SWIG 4.1, it enabled to fix 2 errors in SWIG syntax
> that were rejected by SWIG 4.1 (and hidden up to now due to using 4.0.2
> as our baseline)
>
> This change shouldn't be a major hurdle for distributors, as most known
> binary distributions did regenerate the files anyway.
>
> Note to people updating an existing git checkout: now the
> BUILD_JAVA/CSHARP/PYTHON_BINDINGS CMake variables are strictly honored.
> They are now initialized to ON only if all build requirements are
> available (SWIG and Python for the python bindings), and if set to ON
> but a requirement is missing, CMake fails. This might cause issues for
> people for example not having the requirements for the Java or CSharp
> bindings, but with an existing CMakeCache.txt with them set. Fix: run
> "cmake -UBUILD_JAVA_BINDINGS -UBUILD_CHSARP_BINDINGS
> -UBUILD_PYTHON_BINDINGS"
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Thu Mar  9 12:14:23 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Mar 2023 21:14:23 +0100
Subject: [gdal-dev] Removal of Python SWIG python generated files from
 git
In-Reply-To: <CANnaQaaX6XHhUHqphAN1=Gfm021V_OsCR+aE4=_3vaBb9J1oSQ@mail.gmail.com>
References: <e2f5a4c1-d213-4296-841d-e59d4bc3e855@spatialys.com>
 <CANnaQaaX6XHhUHqphAN1=Gfm021V_OsCR+aE4=_3vaBb9J1oSQ@mail.gmail.com>
Message-ID: <107b3fc0-b975-c3fa-7a9e-c4db5a79ec83@spatialys.com>


> To play devil's advocate, were there any (perceived) benefits to this
> arrangement when originally introduced, other than not needing the
> SWIG binary to compile Python bindings?

That predates the start of my involvement with GDAL, so my guess would 
be that this was just what you mention: for the sake of simplicity of 
people building GDAL, at a time where its only build requirement was the 
basic tools autoconf, make and g++. Nowadays, getting SWIG isn't harder 
than getting PROJ or any of the "optional" dependencies you generally 
want to make a reasonably feature complete GDAL build.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From warmerdam at pobox.com  Thu Mar  9 12:37:33 2023
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 9 Mar 2023 15:37:33 -0500
Subject: [gdal-dev] Removal of Python SWIG python generated files from
 git
In-Reply-To: <107b3fc0-b975-c3fa-7a9e-c4db5a79ec83@spatialys.com>
References: <e2f5a4c1-d213-4296-841d-e59d4bc3e855@spatialys.com>
 <CANnaQaaX6XHhUHqphAN1=Gfm021V_OsCR+aE4=_3vaBb9J1oSQ@mail.gmail.com>
 <107b3fc0-b975-c3fa-7a9e-c4db5a79ec83@spatialys.com>
Message-ID: <CA+YzLBcvjaeiHHEWNpiAR6PH3HSrGF4ApNU=C9szhxXGTm-9VQ@mail.gmail.com>

Folks,

At one time we were very sensitive to the exact version of SWIG so
providing pre-generated bindings removed a large class of versioning
problems.

I am ok with removing them.

Best regards,
Frank


On Thu, Mar 9, 2023 at 3:14?PM Even Rouault <even.rouault at spatialys.com>
wrote:

>
> > To play devil's advocate, were there any (perceived) benefits to this
> > arrangement when originally introduced, other than not needing the
> > SWIG binary to compile Python bindings?
>
> That predates the start of my involvement with GDAL, so my guess would
> be that this was just what you mention: for the sake of simplicity of
> people building GDAL, at a time where its only build requirement was the
> basic tools autoconf, make and g++. Nowadays, getting SWIG isn't harder
> than getting PROJ or any of the "optional" dependencies you generally
> want to make a reasonably feature complete GDAL build.
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230309/edc45108/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Mar  9 13:17:37 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 9 Mar 2023 21:17:37 +0000
Subject: [gdal-dev] Motion: Adopt GDAL 3.6.3RC1 as 3.6.3 release
In-Reply-To: <c8534f67-d37c-bfa9-694d-0b7f053a68c1@spatialys.com>
References: <f9a68a15-d8f3-ba67-5f12-1bff1216f976@spatialys.com>
 <c8534f67-d37c-bfa9-694d-0b7f053a68c1@spatialys.com>
Message-ID: <AM0PR09MB3219B73E993785862A1B60C0FDB59@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault
L?hetetty: torstai 9. maaliskuuta 2023 17.41
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: Adopt GDAL 3.6.3RC1 as 3.6.3 release

Same motion, just fixing the title to reflect the correction version number, as kindly pointed out.

Le 09/03/2023 ? 16:33, Even Rouault a ?crit?:
> Hi,
>
> Motion:
>
> Adopt GDAL 3.6.3RC1 as 3.6.3 release
>
> Starting with my +1
>
> Even
>
--
https://eur06.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.spatialys.com%2F&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C00c4b53e97b041985f6208db20b4bb8a%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638139732835139690%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=xRuDoIoqpIkpzRpE32VQdCtXsJ6JFlCrvJZNPlwN2eI%3D&reserved=0
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://eur06.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&data=05%7C01%7Cjukka.rahkonen%40maanmittauslaitos.fi%7C00c4b53e97b041985f6208db20b4bb8a%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638139732835139690%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=PCUv44XNazC49Jfr6bXjp8Ma4vsBMwVoiXmvD9JBRr0%3D&reserved=0

From schwehr at gmail.com  Thu Mar  9 14:49:44 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 9 Mar 2023 14:49:44 -0800
Subject: [gdal-dev] Removal of Python SWIG python generated files from
 git
In-Reply-To: <CA+YzLBcvjaeiHHEWNpiAR6PH3HSrGF4ApNU=C9szhxXGTm-9VQ@mail.gmail.com>
References: <e2f5a4c1-d213-4296-841d-e59d4bc3e855@spatialys.com>
 <CANnaQaaX6XHhUHqphAN1=Gfm021V_OsCR+aE4=_3vaBb9J1oSQ@mail.gmail.com>
 <107b3fc0-b975-c3fa-7a9e-c4db5a79ec83@spatialys.com>
 <CA+YzLBcvjaeiHHEWNpiAR6PH3HSrGF4ApNU=C9szhxXGTm-9VQ@mail.gmail.com>
Message-ID: <CACmBxys=M5AOXrR3RTOvuHu9GhSmx0dFS8728T7WpBwMMM+SFw@mail.gmail.com>

I am also okay with removing the files. I think removing the generated
files will help the project's health.

At Google, we have used the swig generated files from git for the python
interfaces. It was helpful as we don't have a lot of control about which
swig version is available. However, it's now not that hard to run swig
separately from our bazel based build with a specific version of swig that
works and copying the files over.

Thanks!
-Kurt


On Thu, Mar 9, 2023 at 12:37?PM Frank Warmerdam <warmerdam at pobox.com> wrote:

> Folks,
>
> At one time we were very sensitive to the exact version of SWIG so
> providing pre-generated bindings removed a large class of versioning
> problems.
>
> I am ok with removing them.
>
> Best regards,
> Frank
>
>
> On Thu, Mar 9, 2023 at 3:14?PM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>>
>> > To play devil's advocate, were there any (perceived) benefits to this
>> > arrangement when originally introduced, other than not needing the
>> > SWIG binary to compile Python bindings?
>>
>> That predates the start of my involvement with GDAL, so my guess would
>> be that this was just what you mention: for the sake of simplicity of
>> people building GDAL, at a time where its only build requirement was the
>> basic tools autoconf, make and g++. Nowadays, getting SWIG isn't harder
>> than getting PROJ or any of the "optional" dependencies you generally
>> want to make a reasonably feature complete GDAL build.
>>
>> Even
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | +1 650-701-7823
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230309/c64a5bb5/attachment-0001.htm>

From szekerest at gmail.com  Thu Mar  9 23:56:17 2023
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri, 10 Mar 2023 08:56:17 +0100
Subject: [gdal-dev] Motion: Adopt GDAL 3.6.3RC1 as 3.6.3 release
In-Reply-To: <c8534f67-d37c-bfa9-694d-0b7f053a68c1@spatialys.com>
References: <f9a68a15-d8f3-ba67-5f12-1bff1216f976@spatialys.com>
 <c8534f67-d37c-bfa9-694d-0b7f053a68c1@spatialys.com>
Message-ID: <CACALY+QHjcZyH90kxTF2oYR4XFkLWdZJG1=9HesxkzPLOcp9OA@mail.gmail.com>

+1

Tamas

Even Rouault <even.rouault at spatialys.com> ezt ?rta (id?pont: 2023. m?rc.
9., Cs, 16:41):

> Same motion, just fixing the title to reflect the correction version
> number, as kindly pointed out.
>
> Le 09/03/2023 ? 16:33, Even Rouault a ?crit :
> > Hi,
> >
> > Motion:
> >
> > Adopt GDAL 3.6.3RC1 as 3.6.3 release
> >
> > Starting with my +1
> >
> > Even
> >
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230310/c14e5cad/attachment.htm>

From bontepaarden at gmail.com  Fri Mar 10 01:47:30 2023
From: bontepaarden at gmail.com (Paul Meems)
Date: Fri, 10 Mar 2023 10:47:30 +0100
Subject: [gdal-dev] Convex hull with holes
In-Reply-To: <CAHNf2YQW404+rZtwD7EcvktE6j3v-62fQjXP1Hqs_xND6rQ65Q@mail.gmail.com>
References: <CAHNf2YTuaEEZAuY0HH1QiAF-gR6b_w6z+z_mCAUf_Qwodo7Lkg@mail.gmail.com>
 <AM0PR09MB3219F156A96B35BD38830B99FDB39@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAHNf2YSuxGcYoU-21H1AGgvehfRAyh5cqLmM+5OvT=1ZBJHFVw@mail.gmail.com>
 <AM0PR09MB3219038C5693130AAFEA35ABFDB19@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAHNf2YQW404+rZtwD7EcvktE6j3v-62fQjXP1Hqs_xND6rQ65Q@mail.gmail.com>
Message-ID: <CAHNf2YREmZXL8AohgOT=eYU9Z4CeBWwAGwofQG-H_R7oc1=VrQ@mail.gmail.com>

Just to let you know.
I tried the ST_CONCAVE as Jukka suggested and it works great.

Here's my code:

ogr2ogr -f "ESRI Shapefile" -oo X_POSSIBLE_NAMES=X -oo Y_POSSIBLE_NAMES=Y
-a_srs "EPSG:28992"  \
             -dialect SQLite -sql "select
ST_Buffer(ST_ConcaveHull(ST_Collect(geometry),2.5,1), 2.5) from 'MyData'" \
             "MyData-border.shp" "MyData.csv"

Thanks,
Paul

Op ma 6 mrt 2023 om 15:12 schreef Paul Meems <bontepaarden at gmail.com>:

> Thanks Jukka for finding this.
>
> It seems exactly what I'm looking for.
> Later this week I'll give it a try to use with my CSV-file.
>
> Regards,
>
> Paul
>
> Op zo 5 mrt 2023 om 22:20 schreef Rahkonen Jukka <
> jukka.rahkonen at maanmittauslaitos.fi>:
>
>> Hi,
>>
>>
>> I did not know until today that SpatiaLite has also ST_ConcaveHull
>> function https://www.gaia-gis.it/gaia-sins/spatialite-sql-latest.html
>> but I am glad that I know it now.
>>
>>
>>
>> I digitized some points (concave.jml) for a test
>>
>>
>>
>> and then I used ogr2ogr and allowed ST_ConcaveHull to create holes
>>
>> ogr2ogr -f jml -dialect SQLite -sql "select
>> ST_ConcaveHull(ST_Collect(geometry),3,1) from concave" out.jml concave.jml
>>
>> and the result was
>>
>>
>>
>> For fine tuning you may want to add ST_Buffer into the SQL.
>>
>> -Jukka Rahkonen-
>>
>>
>>
>> *L?hett?j?:* Paul Meems <bontepaarden at gmail.com>
>> *L?hetetty:* perjantai 3. maaliskuuta 2023 16.47
>> *Vastaanottaja:* gdal-dev at lists.osgeo.org
>> *Kopio:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
>> *Aihe:* Re: [gdal-dev] Convex hull with holes
>>
>>
>>
>> Thanks Jukka for your reply.
>>
>>
>>
>> I understand it is hard.
>>
>> In my case, I have a lot of data points making your edge case not a
>> problem for me.
>>
>> The data points are collected driving over a field with 1 or more sensors.
>>
>> The result can be something like this:
>>
>> The red dots are the data points and I manually created the black border
>> and added a small buffer.
>>
>> The red dots are transformed into polygons using inverse distance and
>> afterward, I need to 'blank' the data using the black border.
>>
>> I can automate all steps except for creating this field border.
>>
>>
>>
>> I'm also struggling to get a proper name for my needs, making it harder
>> to Google for a solution.
>>
>> 'Convex hull' is not correct. What would be a more appropriate name?
>>
>>
>>
>> Regards,
>>
>>
>> Paul
>>
>>
>>
>> Op vr 3 mrt. 2023 om 14:13 schreef Rahkonen Jukka <
>> jukka.rahkonen at maanmittauslaitos.fi>:
>>
>> Hi,
>>
>>
>>
>> So you have an uncategorized bunch of points and you wish to have an
>> algorithm that recognizes outer and inner rings automatically? I fear that
>> is not as easy as it may appear. Have a look at the annexed image with two
>> polygons having the same vertices. How could an algorithm know which
>> interpretation is correct? In this simple case you could make a convex
>> hull, delete the vertices which were consumed for the outer ring, and
>> create a new ring from the remaining points, but generally it will not work
>> if there are two holes, for example.
>>
>>
>>
>> If the points come from a GPX device, make the application to record
>> indexes for both the points and the rings ?ring1-point1,
>> ring1-point2---ring2-point1,ring2-point2? and construct the polygon ring by
>> ring.
>>
>>
>>
>> -Jukka Rahkonen-
>>
>>
>>
>> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Paul
>> Meems
>> *L?hetetty:* perjantai 3. maaliskuuta 2023 14.52
>> *Vastaanottaja:* gdal-dev at lists.osgeo.org
>> *Aihe:* [gdal-dev] Convex hull with holes
>>
>>
>>
>> How can I algorithmically create a parcel border that accounts for
>> islands or holes within the parcel based on a list of coordinates?
>>
>>
>>
>> While GDAL+GEOS has a Convex hull method, it only identifies the outer
>> border.
>>
>>
>>
>> Has GDAL+GEOS a method that I can use to detect inner holes as well, such
>> as in a donut-shaped field?
>>
>>
>>
>> The output can be json or shapefile, that doesn't matter.
>>
>>
>>
>> Thanks,
>>
>> Paul Meems
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230310/6a0f3bc5/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 5956 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230310/6a0f3bc5/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 28630 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230310/6a0f3bc5/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 12595 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230310/6a0f3bc5/attachment-0005.png>

From kurt.a.jakobsen at gmail.com  Fri Mar 10 03:37:59 2023
From: kurt.a.jakobsen at gmail.com (Kurt Jakobsen)
Date: Fri, 10 Mar 2023 12:37:59 +0100
Subject: [gdal-dev] How to control which projection database to use
Message-ID: <CAJtjC7_uL_3RtNgKYdM46w+1BjSYSw_E0ueWrNqk4cXAMYpYHg@mail.gmail.com>

Hi,
I have downloaded the latest EPSG WKT dataset from the
https://epsg.org/download-dataset.html page.
I'm using gdal from an Anaconda venv on win 11.
How can I configure in my python scripts that the gdal package shall use
the particular dataset version that I have downloaded?
Kind regards
Kurt
-- 
Mvh / Best regards
Kurt Jakobsen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230310/30651e3e/attachment.htm>

From j1 at jimenezshaw.com  Sat Mar 11 03:01:58 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Sat, 11 Mar 2023 12:01:58 +0100
Subject: [gdal-dev] How to control which projection database to use
In-Reply-To: <CAJtjC7_uL_3RtNgKYdM46w+1BjSYSw_E0ueWrNqk4cXAMYpYHg@mail.gmail.com>
References: <CAJtjC7_uL_3RtNgKYdM46w+1BjSYSw_E0ueWrNqk4cXAMYpYHg@mail.gmail.com>
Message-ID: <CADRrdKs6Z3oPvb_MopRKFDnXqCEqk0zF_m=fLhBAK=L-0adjoA@mail.gmail.com>

Hi Kurt.

GDAL >=3 uses PROJ to deal with CRSs. And PROJ has embedded the EPSG
database in its proj.db, that is packaged directly with PROJ.
So I guess that you cannot select the version of EPSG easily.

Fortunately PROJ is updating the version of EPSG quite often, so using the
latest version of PROJ will include a recent version of EPSG. Maybe not
always the last, but near. For instance, PROJ 9.2.0, recentely released,
includes EPSG 10.082
https://github.com/OSGeo/PROJ/blob/9.2.0/data/sql/metadata.sql

Using master today would include 10.084

If you just want to be consistent, it is easy to produce all the WKTs from
PROJ using pyproj (or even bash and projinfo). You can have a look at the
project https://github.com/OSGeo/PROJ-CRS-Explorer/

Cheers,
Javier.

On Fri, 10 Mar 2023 at 12:37, Kurt Jakobsen <kurt.a.jakobsen at gmail.com>
wrote:

>
> Hi,
> I have downloaded the latest EPSG WKT dataset from the
> https://epsg.org/download-dataset.html page.
> I'm using gdal from an Anaconda venv on win 11.
> How can I configure in my python scripts that the gdal package shall use
> the particular dataset version that I have downloaded?
> Kind regards
> Kurt
> --
> Mvh / Best regards
> Kurt Jakobsen
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230311/b3880343/attachment.htm>

From morgankerle at gmail.com  Sun Mar 12 07:49:49 2023
From: morgankerle at gmail.com (Morgan Kerle)
Date: Sun, 12 Mar 2023 10:49:49 -0400
Subject: [gdal-dev] GDAL - Python Bindings - CURL NETRC_FILE
Message-ID: <b15f8c46-e307-c681-0bac-c9d1504769f5@gmail.com>

I am trying to use the /vsicurl/ file hander to access a remote tiff 
file using basic auth. Is it possible to provide a alternate location

for a .netrc file via the Python bindings? I have attempted to use 
SetConfigOption("CPL_CURL_NETRC_FILE" "abs/file/path/to/.netrc").

This appears to correctly set the CURL_NETRC_FILE option, as CURL 
debugging output shows "Couldn't find host 
data.lpdaac.earthdatacloud.nasa.gov in the (nil) file; using defaults". 
However, it appears the file is not found / accessible by libcurl.

Any suggestions as to why this may be the case? I have already confirmed 
that the file exists and is accessible, and running CURL with the same 
parameters in bash works fine.

Regards,

Morgan


From even.rouault at spatialys.com  Sun Mar 12 07:58:21 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 12 Mar 2023 15:58:21 +0100
Subject: [gdal-dev] GDAL - Python Bindings - CURL NETRC_FILE
In-Reply-To: <b15f8c46-e307-c681-0bac-c9d1504769f5@gmail.com>
References: <b15f8c46-e307-c681-0bac-c9d1504769f5@gmail.com>
Message-ID: <946a33d6-37ca-79c6-ecd4-ffca9d6e85a7@spatialys.com>

Morgan,

The right name is GDAL_HTTP_NETRC : 
https://gdal.org/api/cpl.html#_CPPv412CPLHTTPFetchPKc12CSLConstList

Even

GDAL_HTTP_NETRC

Le 12/03/2023 ? 15:49, Morgan Kerle a ?crit?:
> I am trying to use the /vsicurl/ file hander to access a remote tiff 
> file using basic auth. Is it possible to provide a alternate location
>
> for a .netrc file via the Python bindings? I have attempted to use 
> SetConfigOption("CPL_CURL_NETRC_FILE" "abs/file/path/to/.netrc").
>
> This appears to correctly set the CURL_NETRC_FILE option, as CURL 
> debugging output shows "Couldn't find host 
> data.lpdaac.earthdatacloud.nasa.gov in the (nil) file; using 
> defaults". However, it appears the file is not found / accessible by 
> libcurl.
>
> Any suggestions as to why this may be the case? I have already 
> confirmed that the file exists and is accessible, and running CURL 
> with the same parameters in bash works fine.
>
> Regards,
>
> Morgan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230312/963fed29/attachment.htm>

From even.rouault at spatialys.com  Sun Mar 12 08:35:00 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 12 Mar 2023 16:35:00 +0100
Subject: [gdal-dev] GDAL - Python Bindings - CURL NETRC_FILE
In-Reply-To: <CACy+y1qRF9NiV6t8cBsi0ZJ2ztdi=7bZ-Cxm6OtcG56rnjO1Vg@mail.gmail.com>
References: <b15f8c46-e307-c681-0bac-c9d1504769f5@gmail.com>
 <946a33d6-37ca-79c6-ecd4-ffca9d6e85a7@spatialys.com>
 <CACy+y1qRF9NiV6t8cBsi0ZJ2ztdi=7bZ-Cxm6OtcG56rnjO1Vg@mail.gmail.com>
Message-ID: <90ef27bd-264f-4597-35fd-d7ed176f904c@spatialys.com>

You're right, I looked too fast. I've added a GDAL_HTTP_NETRC_FILE 
option in https://github.com/OSGeo/gdal/pull/7435

Le 12/03/2023 ? 16:11, Morgan Kerle a ?crit?:
> HI Even,
>
> Thanks for your reply. I had assume that GDAL_HTTP_NETRC set the 
> option NETRC as in papszOptions which accepts "YES" or "NO" to 
> indicate if ~/.netrc file or $NETRC should be searched for 
> credentials. If this is the same option as CURLOPT_NETRC 
> (https://curl.se/libcurl/c/CURLOPT_NETRC.html), then it does not allow 
> the user to specify a location for the .netrc file. In any case, I 
> attempted setting the GDAL_HTTP_NETRC via gdal.SetConfigOption(), but 
> I am still getting the same curl output (Couldn't find host 
> data.lpdaac.earthdatacloud.nasa.gov 
> <http://data.lpdaac.earthdatacloud.nasa.gov> in the (nil) file; using 
> defaults).
>
> I assume (nil) file should be showing the file path supplied via 
> GDAL_HTTP_NETRC?
>
> Morgan
>
> On Sun, 12 Mar 2023 at 10:58, Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>     Morgan,
>
>     The right name is GDAL_HTTP_NETRC :
>     https://gdal.org/api/cpl.html#_CPPv412CPLHTTPFetchPKc12CSLConstList
>
>     Even
>
>     GDAL_HTTP_NETRC
>
>     Le 12/03/2023 ? 15:49, Morgan Kerle a ?crit?:
>>     I am trying to use the /vsicurl/ file hander to access a remote
>>     tiff file using basic auth. Is it possible to provide a alternate
>>     location
>>
>>     for a .netrc file via the Python bindings? I have attempted to
>>     use SetConfigOption("CPL_CURL_NETRC_FILE"
>>     "abs/file/path/to/.netrc").
>>
>>     This appears to correctly set the CURL_NETRC_FILE option, as CURL
>>     debugging output shows "Couldn't find host
>>     data.lpdaac.earthdatacloud.nasa.gov
>>     <http://data.lpdaac.earthdatacloud.nasa.gov> in the (nil) file;
>>     using defaults". However, it appears the file is not found /
>>     accessible by libcurl.
>>
>>     Any suggestions as to why this may be the case? I have already
>>     confirmed that the file exists and is accessible, and running
>>     CURL with the same parameters in bash works fine.
>>
>>     Regards,
>>
>>     Morgan
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230312/daa5a1c4/attachment.htm>

From morgankerle at gmail.com  Sun Mar 12 08:41:01 2023
From: morgankerle at gmail.com (Morgan Kerle)
Date: Sun, 12 Mar 2023 11:41:01 -0400
Subject: [gdal-dev] GDAL - Python Bindings - CURL NETRC_FILE
In-Reply-To: <90ef27bd-264f-4597-35fd-d7ed176f904c@spatialys.com>
References: <b15f8c46-e307-c681-0bac-c9d1504769f5@gmail.com>
 <946a33d6-37ca-79c6-ecd4-ffca9d6e85a7@spatialys.com>
 <CACy+y1qRF9NiV6t8cBsi0ZJ2ztdi=7bZ-Cxm6OtcG56rnjO1Vg@mail.gmail.com>
 <90ef27bd-264f-4597-35fd-d7ed176f904c@spatialys.com>
Message-ID: <CACy+y1oAH1O0hF6uPViP9mM4AKNS9vbRj-bcBBZjo8JHZpBXCA@mail.gmail.com>

Ok, thank you very much for your time and assistance Even.

Morgan

On Sun, 12 Mar 2023 at 11:35, Even Rouault <even.rouault at spatialys.com>
wrote:

> You're right, I looked too fast. I've added a GDAL_HTTP_NETRC_FILE option
> in https://github.com/OSGeo/gdal/pull/7435
> Le 12/03/2023 ? 16:11, Morgan Kerle a ?crit :
>
> HI Even,
>
> Thanks for your reply. I had assume that GDAL_HTTP_NETRC set the option
> NETRC as in papszOptions which accepts "YES" or "NO" to indicate if
> ~/.netrc file or $NETRC should be searched for credentials. If this is the
> same option as CURLOPT_NETRC (https://curl.se/libcurl/c/CURLOPT_NETRC.html),
> then it does not allow the user to specify a location for the .netrc file.
> In any case, I attempted setting the GDAL_HTTP_NETRC via
> gdal.SetConfigOption(), but I am still getting the same curl output
> (Couldn't find host data.lpdaac.earthdatacloud.nasa.gov in the (nil)
> file; using defaults).
>
> I assume (nil) file should be showing the file path supplied via
> GDAL_HTTP_NETRC?
>
> Morgan
>
> On Sun, 12 Mar 2023 at 10:58, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Morgan,
>>
>> The right name is GDAL_HTTP_NETRC :
>> https://gdal.org/api/cpl.html#_CPPv412CPLHTTPFetchPKc12CSLConstList
>>
>> Even
>>
>> GDAL_HTTP_NETRC
>> Le 12/03/2023 ? 15:49, Morgan Kerle a ?crit :
>>
>> I am trying to use the /vsicurl/ file hander to access a remote tiff file
>> using basic auth. Is it possible to provide a alternate location
>>
>> for a .netrc file via the Python bindings? I have attempted to use
>> SetConfigOption("CPL_CURL_NETRC_FILE" "abs/file/path/to/.netrc").
>>
>> This appears to correctly set the CURL_NETRC_FILE option, as CURL
>> debugging output shows "Couldn't find host
>> data.lpdaac.earthdatacloud.nasa.gov in the (nil) file; using defaults".
>> However, it appears the file is not found / accessible by libcurl.
>>
>> Any suggestions as to why this may be the case? I have already confirmed
>> that the file exists and is accessible, and running CURL with the same
>> parameters in bash works fine.
>>
>> Regards,
>>
>> Morgan
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> -- http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230312/f16c2054/attachment-0001.htm>

From even.rouault at spatialys.com  Mon Mar 13 13:52:43 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 13 Mar 2023 21:52:43 +0100
Subject: [gdal-dev] Motion: Adopt GDAL 3.6.3RC1 as 3.6.3 release
In-Reply-To: <c8534f67-d37c-bfa9-694d-0b7f053a68c1@spatialys.com>
References: <f9a68a15-d8f3-ba67-5f12-1bff1216f976@spatialys.com>
 <c8534f67-d37c-bfa9-694d-0b7f053a68c1@spatialys.com>
Message-ID: <5ec7e8ef-666e-c8bf-00b6-0be57af0c258@spatialys.com>

I declare this motion passed with +1 from PSC members HowardB, MateuszL, 
NormanB, JukkaR, TamasS and me.

Even

Le 09/03/2023 ? 16:40, Even Rouault a ?crit?:
> Same motion, just fixing the title to reflect the correction version 
> number, as kindly pointed out.
>
> Le 09/03/2023 ? 16:33, Even Rouault a ?crit?:
>> Hi,
>>
>> Motion:
>>
>> Adopt GDAL 3.6.3RC1 as 3.6.3 release
>>
>> Starting with my +1
>>
>> Even
>>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Mon Mar 13 14:10:18 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 13 Mar 2023 22:10:18 +0100
Subject: [gdal-dev] GDAL 3.6.3 is released
Message-ID: <3b24c15f-c1d3-4b77-6939-4f0d0d87e3ad@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to announce the 
release of the GDAL/OGR 3.6.3 bug fix version.

Consult the release notes for the list of issues addressed:
 ? https://github.com/OSGeo/gdal/blob/v3.6.3/NEWS.md

The sources are available at:

 ??? https://download.osgeo.org/gdal/3.6.3/gdal-3.6.3.tar.xz
 ??? https://download.osgeo.org/gdal/3.6.3/gdal-3.6.3.tar.gz
 ??? https://download.osgeo.org/gdal/3.6.3/gdal363.zip

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From Nicolas.Dion-Degodez at ec.gc.ca  Tue Mar 14 11:15:14 2023
From: Nicolas.Dion-Degodez at ec.gc.ca (Dion-Degodez,Nicolas (ECCC))
Date: Tue, 14 Mar 2023 18:15:14 +0000
Subject: [gdal-dev] Difference between ogr2ogr and Python reprojection
Message-ID: <YT3PR01MB817835B009AC1F1886D28BA9F2BE9@YT3PR01MB8178.CANPRD01.PROD.OUTLOOK.COM>

Context
We are trying to reproject a GeoJSON polygon to EPSG:4326.
In some cases, depending on whether we use the ogr2ogr command line or the equivalent in python, the resulting polygon is different.
In those situations, the command line gives us the appropriate polygon, whereas the python code gives us a distorted polygon.

Question
Any idea why there is a difference between the command line and the python results? Is there a mistake in our interpretation of the code/how we converted it in python?

Sample GeoJSON: https://pastebin.com/hUiVVjFv
Proj4: "+proj=stere +lat_0=90 +lat_ts=60 +lon_0=264 +x_0=0 +y_0=0 +R=6371229 +units=m +no_defs"

Command line that works: ogr2ogr -s_srs "+proj=stere +lat_0=90 +lat_ts=60 +lon_0=264 +x_0=0 +y_0=0 +R=6371229 +units=m +no_defs" -t_srs EPSG:4326 result_command_line.json geojson.json
Result: https://pasteboard.co/cTpZBRamEYv8.jpg

Python code (we would expect the same output as the command line): https://pastebin.com/QgWDBL1W
Result: https://pasteboard.co/8iSv0vbnQlHw.jpg

Thank you!
Nicolas D.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230314/d795a93e/attachment.htm>

From even.rouault at spatialys.com  Tue Mar 14 11:25:54 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 14 Mar 2023 19:25:54 +0100
Subject: [gdal-dev] Difference between ogr2ogr and Python reprojection
In-Reply-To: <YT3PR01MB817835B009AC1F1886D28BA9F2BE9@YT3PR01MB8178.CANPRD01.PROD.OUTLOOK.COM>
References: <YT3PR01MB817835B009AC1F1886D28BA9F2BE9@YT3PR01MB8178.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <152bd7a1-08b3-4ce9-6980-0da2b45dd891@spatialys.com>

Nicolas,

ogr2ogr uses the OGRGeometryFactory::transformWithOptions() method that 
has logic to deal with poles, antimerdian, etc. whereas 
OGRGeometry::transform() does basic point-to-point reprojection

You can achieve what you want by using the ogr.GeomTransformer(ct) 
method that returns a ogr.GeomTransformer object that has a 
Transform(ogr.Geometry) method. See below test from GDAL's autotest suite:

def test_ogr_geomtransfomer_default():

 ??? src = osr.SpatialReference()
 ??? src.ImportFromEPSG(32660)

 ??? dst = osr.SpatialReference()
 ??? dst.SetAxisMappingStrategy(osr.OAMS_TRADITIONAL_GIS_ORDER)
 ??? dst.ImportFromEPSG(4326)

 ??? ct = osr.CoordinateTransformation(src, dst)
 ??? geom = ogr.CreateGeometryFromWkt(
 ??????? "LINESTRING(832864.275023695 0,835092.849076364 0)"
 ??? )
 ??? transformer = ogr.GeomTransformer(ct)

 ??? geom_dst = transformer.Transform(geom)
 ??? assert (
 ??????? geom_dst.ExportToWkt()
 ??????? == "MULTILINESTRING ((179.99 0.0,180 0),(-180 0,-179.99 0.0))"
 ??? )

Even

Le 14/03/2023 ? 19:15, Dion-Degodez,Nicolas (ECCC) a ?crit?:
>
> _Context_
>
> We are trying to reproject a GeoJSON polygon to EPSG:4326.
>
> In some cases, depending on whether we use the ogr2ogr command line or 
> the equivalent in python, the resulting polygon is different.
>
> In those situations, the command line gives us the appropriate 
> polygon, whereas the python code gives us a distorted polygon.
>
> _Question_
>
> Any idea why there is a difference between the command line and the 
> python results? Is there a mistake in our interpretation of the 
> code/how we converted it in python?
>
> _Sample GeoJSON_: https://pastebin.com/hUiVVjFv
>
> Proj4: "+proj=stere +lat_0=90 +lat_ts=60 +lon_0=264 +x_0=0 +y_0=0 
> +R=6371229 +units=m +no_defs"
>
> _Command line that works_: ogr2ogr -s_srs "+proj=stere +lat_0=90 
> +lat_ts=60 +lon_0=264 +x_0=0 +y_0=0 +R=6371229 +units=m +no_defs" 
> -t_srs EPSG:4326 result_command_line.json geojson.json
>
> Result: https://pasteboard.co/cTpZBRamEYv8.jpg
>
> _Python code_ (we would expect the same output as the command line): 
> https://pastebin.com/QgWDBL1W
>
> Result: https://pasteboard.co/8iSv0vbnQlHw.jpg
>
> Thank you!
>
> Nicolas D.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230314/826099ff/attachment.htm>

From public at postholer.com  Tue Mar 14 11:27:42 2023
From: public at postholer.com (Scott)
Date: Tue, 14 Mar 2023 11:27:42 -0700
Subject: [gdal-dev] Difference between ogr2ogr and Python reprojection
In-Reply-To: <YT3PR01MB817835B009AC1F1886D28BA9F2BE9@YT3PR01MB8178.CANPRD01.PROD.OUTLOOK.COM>
References: <YT3PR01MB817835B009AC1F1886D28BA9F2BE9@YT3PR01MB8178.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <ee10b0d7-6d1b-4b0c-ddcc-bf972ca7f595@postholer.com>

While I don't have a direct answer to your question I might ask, why use 
20 lines of python code when 1 line of ogr2ogr gives the correct result?


On 3/14/23 11:15, Dion-Degodez,Nicolas (ECCC) wrote:
> _Context_
> 
> We are trying to reproject a GeoJSON polygon to EPSG:4326.
> 
> In some cases, depending on whether we use the ogr2ogr command line or 
> the equivalent in python, the resulting polygon is different.
> 
> In those situations, the command line gives us the appropriate polygon, 
> whereas the python code gives us a distorted polygon.
> 
> _Question_
> 
> Any idea why there is a difference between the command line and the 
> python results? Is there a mistake in our interpretation of the code/how 
> we converted it in python?
> 
> _Sample GeoJSON_: https://pastebin.com/hUiVVjFv 
> <https://pastebin.com/hUiVVjFv>
> 
> Proj4: "+proj=stere +lat_0=90 +lat_ts=60 +lon_0=264 +x_0=0 +y_0=0 
> +R=6371229 +units=m +no_defs"
> 
> _Command line that works_: ogr2ogr -s_srs "+proj=stere +lat_0=90 
> +lat_ts=60 +lon_0=264 +x_0=0 +y_0=0 +R=6371229 +units=m +no_defs" -t_srs 
> EPSG:4326 result_command_line.json geojson.json
> 
> Result: https://pasteboard.co/cTpZBRamEYv8.jpg 
> <https://pasteboard.co/cTpZBRamEYv8.jpg>
> 
> _Python code_ (we would expect the same output as the command line): 
> https://pastebin.com/QgWDBL1W <https://pastebin.com/QgWDBL1W>
> 
> Result: https://pasteboard.co/8iSv0vbnQlHw.jpg 
> <https://pasteboard.co/8iSv0vbnQlHw.jpg>
> 
> Thank you!
> 
> Nicolas D.
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From scott at agi.com  Wed Mar 15 07:17:17 2023
From: scott at agi.com (Reynolds, Scott)
Date: Wed, 15 Mar 2023 14:17:17 +0000
Subject: [gdal-dev] PointOnSurface returning (0, 0, 0)
Message-ID: <BN2P110MB1432DC63EE0F57957C0A8531A5BF9@BN2P110MB1432.NAMP110.PROD.OUTLOOK.COM>

Hi,

I'm trying to use PointOnSurface but get (0, 0, 0) no matter what geometry I use.  I'm using the MapServer libraries from gisinternals.com.  One thing I'm seeing is osgeo::proj::io::FactoryException being thrown when I call SetWellKnownGeogCS("WGS84").  Any ideas what I'm doing wrong?

Thanks,
Scott

#include <iostream>

#include "ogrsf_frmts.h"
#include "ogr_geometry.h"

static void CPL_STDCALL CplErrorHandler(CPLErr cplErr, int nError, char* pszErrorTxt) {
    std::cout << "GDAL(" << nError << "): " << pszErrorTxt << "\n";
}

int main()
{
    (void)_putenv("GDAL_DATA=D:\\Temp\\GeosTest\\gdal\\bin\\gdal-data");
    (void)_putenv("PROJ_DATA=D:\\Temp\\GeosTest\\gdal\\bin\\proj9\\share"); // PROJ 9.1
    (void)_putenv("PROJ_LIB=D:\\Temp\\GeosTest\\gdal\\bin\\proj9\\share"); // pre PROJ 9.1
    (void)_putenv("PROJ_DEBUG=3");

    OGRErr ogrErr;

    CPLSetConfigOption("GDAL_DATA", "D:\\Temp\\GeosTest\\gdal\\bin\\gdal-data");
    CPLSetConfigOption("PROJ_DATA", "D:\\Temp\\GeosTest\\gdal\\bin\\proj9\\share"); // PROJ 9.1
    CPLSetConfigOption("PROJ_LIB", "D:\\Temp\\GeosTest\\gdal\\bin\\proj9\\share"); // pre PROJ 9.1

    CPLPushErrorHandler((CPLErrorHandler)CplErrorHandler);

    GDALAllRegister();

    OGRSpatialReference* pSrs = new OGRSpatialReference();
    pSrs->SetWellKnownGeogCS("WGS84");

    const char* pszWkt = "POLYGON ((-5.0 5.0, 5.0 5.0, 5.0 -5.0, 3.0 -5.0, 3.0 3.0, -5.0 3.0, -5.0 5.0))";

    OGRGeometry* pGeom;
    OGRGeometryFactory::createFromWkt(pszWkt, pSrs, &pGeom);
    OGRPoint pointOnSurface;

    OGRSurface* pSurface = pGeom->toSurface();
    pSurface->PointOnSurface(&pointOnSurface);

    char* pszWkt2;
    pGeom->exportToWkt(&pszWkt2);
    std::cout << pszWkt2 << "\n";
    std::cout << "PointOnSurface = (" << pointOnSurface.getX() << ", " << pointOnSurface.getY() << ")\n";
}

Disclaimer

The information contained in this electronic message and any attachments to this message are intended only for the individual(s) addressed in the message and may contain proprietary and confidential information. If you are not the intended recipient, you should not disseminate, distribute or copy this e-mail. Please notify the sender and delete this message. WARNING: Computer viruses can be transmitted via email. The recipient should scan this email before opening it. The company accepts no liability for any damage caused by any virus transmitted by this email.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230315/657d8e5b/attachment-0001.htm>

From thayden at gmail.com  Wed Mar 15 21:13:59 2023
From: thayden at gmail.com (Tom Hayden)
Date: Wed, 15 Mar 2023 23:13:59 -0500
Subject: [gdal-dev] Reprojecting with Same Projection but Different
 Central_Meridians
Message-ID: <CAJpjrc9RNJRhKwf-rzgRnE_uXb7zdSojZpqFO-HiPfPbVwYsfg@mail.gmail.com>

Hello - I apologize if this is not the right place to ask this question.
This is a question about a specific set of projections and coordinate
transformations using the osr/ogr libraries.

Suppose I have two projections where the only thing that differs is the
Central Meridian value. See below (these are from ArcGIS online by the way)

>>> p
'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-41.34804059746178],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]'
>>> p2 =
"""PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]"""

I can load these
>>> srs2 = osr.SpatialReference(wkt=p2)
>>> srs = osr.SpatialReference(wkt=p)

And then attempt a transformation
>>> transform_func = osr.CoordinateTransformation(srs2, srs)
>>> u = ogr.Geometry(ogr.wkbPoint)
>>> u.AddPoint(0,0)
>>> u.Transfrom(transform_func)

But the end result is the same point that I originally put in.
>>> u.ExportToWkt()
'POINT (0 0 0)'

I would (I think?) expect to see a different x value, due to the changing
central meridian. In theory, the reprojected point should be offset some.
Maybe I'm missing something - is this a bug or am I mis-understanding the
role of Central Meridian in projections.

Regards

--
Tom Hayden
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230315/eb8b1791/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Mar 16 00:37:46 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 16 Mar 2023 07:37:46 +0000
Subject: [gdal-dev] Reprojecting with Same Projection but Different
 Central_Meridians
In-Reply-To: <CAJpjrc9RNJRhKwf-rzgRnE_uXb7zdSojZpqFO-HiPfPbVwYsfg@mail.gmail.com>
References: <CAJpjrc9RNJRhKwf-rzgRnE_uXb7zdSojZpqFO-HiPfPbVwYsfg@mail.gmail.com>
Message-ID: <AM0PR09MB32195BEA26F6B53F02C7C0F6FDBC9@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

I apologize that I don?t know Python, but I saved the projection strings into files and made a test with gdaltransform

gdaltransform -s_srs proj1.prj -t_srs proj2.prj
Enter X Y [Z [T]] values separated by space, and press Return.
0 0
-4602842.82460905 0 0

Maybe your code does not do what you think it does.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Tom Hayden
L?hetetty: torstai 16. maaliskuuta 2023 6.14
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Reprojecting with Same Projection but Different Central_Meridians

Hello - I apologize if this is not the right place to ask this question. This is a question about a specific set of projections and coordinate transformations using the osr/ogr libraries.

Suppose I have two projections where the only thing that differs is the Central Meridian value. See below (these are from ArcGIS online by the way)

>>> p
'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-41.34804059746178],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]'
>>> p2 = """PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]"""

I can load these
>>> srs2 = osr.SpatialReference(wkt=p2)
>>> srs = osr.SpatialReference(wkt=p)

And then attempt a transformation
>>> transform_func = osr.CoordinateTransformation(srs2, srs)
>>> u = ogr.Geometry(ogr.wkbPoint)
>>> u.AddPoint(0,0)
>>> u.Transfrom(transform_func)

But the end result is the same point that I originally put in.
>>> u.ExportToWkt()
'POINT (0 0 0)'

I would (I think?) expect to see a different x value, due to the changing central meridian. In theory, the reprojected point should be offset some. Maybe I'm missing something - is this a bug or am I mis-understanding the role of Central Meridian in projections.

Regards

--
Tom Hayden
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230316/3d6dc2e9/attachment-0001.htm>

From bradh at frogmouth.net  Thu Mar 16 01:14:32 2023
From: bradh at frogmouth.net (Brad Hards)
Date: Thu, 16 Mar 2023 19:14:32 +1100
Subject: [gdal-dev] Reprojecting with Same Projection but Different
 Central_Meridians
In-Reply-To: <CAJpjrc9RNJRhKwf-rzgRnE_uXb7zdSojZpqFO-HiPfPbVwYsfg@mail.gmail.com>
References: <CAJpjrc9RNJRhKwf-rzgRnE_uXb7zdSojZpqFO-HiPfPbVwYsfg@mail.gmail.com>
Message-ID: <2671850.mvXUDI8C0e@audax>

On Thursday, 16 March 2023 3:13:59 PM AEDT Tom Hayden wrote:
> >>> u.Transfrom(transform_func)
Did this line not give you an error?

In any case, I used:


import osgeo.osr as osr
import osgeo.ogr as ogr
p = 'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-41.34804059746178],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]'
p2 = """PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]"""
srs2 = osr.SpatialReference(wkt=p2)
srs = osr.SpatialReference(wkt=p)
transform_func = osr.CoordinateTransformation(srs2, srs)
u = ogr.Geometry(ogr.wkbPoint)
u.AddPoint(0,0)
u.Transform(transform_func)
print(u.ExportToWkt())

which resulted in:
POINT (4602842.82460905 0.0 0)


Brad



From thayden at gmail.com  Thu Mar 16 05:49:25 2023
From: thayden at gmail.com (Tom Hayden)
Date: Thu, 16 Mar 2023 07:49:25 -0500
Subject: [gdal-dev] Reprojecting with Same Projection but Different
 Central_Meridians
In-Reply-To: <2671850.mvXUDI8C0e@audax>
References: <CAJpjrc9RNJRhKwf-rzgRnE_uXb7zdSojZpqFO-HiPfPbVwYsfg@mail.gmail.com>
 <2671850.mvXUDI8C0e@audax>
Message-ID: <CAJpjrc8b_qEhcp2MUNJS5cJ5LJTFYrtJPwKMx9yWODyTRugfSQ@mail.gmail.com>

You guys are the best - thank you. I thought I was going crazy. Brad - your
code worked great on version 3.6.0 but when I was running this locally on
3.0.4. I get the wrong answer at the end. No problem, though, because this
is fixed now. Thank you!!

>>> transform_func = osr.CoordinateTransformation(srs2, srs)
>>> u = ogr.Geometry(ogr.wkbPoint)
>>> u.AddPoint(0,0)
>>> u.Transform(transform_func)
0
>>> print(u.ExportToWkt())
POINT (0 0 0)
>>> import osgeo
>>> osgeo.__version__
'3.0.4'


Meanwhile, works great in 3.6.0

>>> import osgeo.osr as osr
>>> import osgeo.ogr as ogr
>>> p =
'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-41.34804059746178],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]'
>>> p2 =
"""PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]"""
>>> srs2 = osr.SpatialReference(wkt=p2)
>>> srs = osr.SpatialReference(wkt=p)
>>> transform_func = osr.CoordinateTransformation(srs2, srs)
>>> u = ogr.Geometry(ogr.wkbPoint)
>>> u.AddPoint(0,0)
>>> u.Transform(transform_func)
0
>>> print(u.ExportToWkt())
POINT (4602842.82460905 0.0 0)
>>> osgeo.__version__
'3.6.0'




On Thu, Mar 16, 2023 at 3:14?AM Brad Hards <bradh at frogmouth.net> wrote:

> On Thursday, 16 March 2023 3:13:59 PM AEDT Tom Hayden wrote:
> > >>> u.Transfrom(transform_func)
> Did this line not give you an error?
>
> In any case, I used:
>
>
> import osgeo.osr as osr
> import osgeo.ogr as ogr
> p =
> 'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-41.34804059746178],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]'
> p2 =
> """PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]"""
> srs2 = osr.SpatialReference(wkt=p2)
> srs = osr.SpatialReference(wkt=p)
> transform_func = osr.CoordinateTransformation(srs2, srs)
> u = ogr.Geometry(ogr.wkbPoint)
> u.AddPoint(0,0)
> u.Transform(transform_func)
> print(u.ExportToWkt())
>
> which resulted in:
> POINT (4602842.82460905 0.0 0)
>
>
> Brad
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230316/764a497d/attachment.htm>

From even.rouault at spatialys.com  Thu Mar 16 06:15:47 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 16 Mar 2023 14:15:47 +0100
Subject: [gdal-dev] Migration of GDAL Docker images from docker.io to ghcr.io
Message-ID: <f8a4b7f1-19a5-ac7f-151a-1df43e53fb2b@spatialys.com>

Hi,

All open source projects with docker images hosted on docker.io have 
recently received a "Docker is sunsetting Free Team organizations" 
email, which indicates that they will be suspending our account on April 
14, 2023 unless we upgrade to a paid subscription (cf 
https://github.com/OSGeo/gdal/issues/7447). There's little interest in 
doing so (I've also tried to apply to their open source program, but 
there's some indication that it won't qualify for it), given that GitHub 
Container repository (ghcr.io) does the same job without the rate limit, 
so I've instead migrated the existing images to the ghcr.io.? You can 
see them at https://github.com/OSGeo/gdal/pkgs/container/gdal

So instead of osgeo/gdal:{tagname}, you must now use 
ghcr.io/osgeo/gdal:{tagname}

Our scripts and docs have been updated per 
https://github.com/OSGeo/gdal/pull/7463 . New images will no longer be 
pushed to the docker.io registry. Existing images remain for now, until 
the account gets suspended (or even if Docker back-pedals, I guess we'll 
eventually remove the *-latest tags to avoid people using outdated stuff 
without knowing)

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From dnewhall at carlsonsw.com  Thu Mar 16 12:51:03 2023
From: dnewhall at carlsonsw.com (Derek Newhall)
Date: Thu, 16 Mar 2023 15:51:03 -0400
Subject: [gdal-dev] Generated CMake build files missing external references
Message-ID: <CAA1reb2e2maKRWXEm59pUwJ-xWzuYBqPAxV=g7nH=EoFsC=Whw@mail.gmail.com>

Hello,

We are trying to migrate from GDAL 3.5.1 to 3.6.3. We currently build a
custom gdal*.dll file using a modified nmake.opt file and are trying to
duplicate it as a ConfigUser.cmake file. We are building GDAL with ECW 5.5,
curl, sqlite3, pdfium, OpenSSL, and Expat.

With 3.6.3 I can get the build files to generate seemingly correctly with
our ConfigUser.cmake file and 'cmake -G "Visual Studio 16 2019" .. -C
..\ConfigUser.cmake' but the build fails once 'cmake --build .' is run.

The output of the configure step confirms everything's found, listing the
following at the end:

"-- The following OPTIONAL package have been found:" ODBC, XercesC,
OpenSSL, ECW, PDFIUM
"-- The following RECOMMENDED packages have been found:" CURL, EXPAT,
SQLite3
"-- The following REQUIRED packages have been found:" PROJ

However, once the build happens, a few projects have compilation errors
relating to external header files (specifically Xerces):

D:\gdal-3.6.3\ogr\ogr_xerces_headers.h(37,10): fatal error C1083: Cannot
open include file: 'xercesc/framework/MemoryManager.hpp': No such file or
directory [D:\gdal-3.6.3\build\gcore\gcore.vcxproj]

We are able to fix these references manually in Visual Studio by adding the
external include directories to Xerces for the following projects: gcore,
ogr, ogr_GMLAS, ogr_GML, ogr_NAS, ogr_ILI

That gets it to compile at least, but then we run into some similar linking
issues.

We're new to building the 3.6.x branch, so I'm presuming we've
misconfigured something somewhere, but I am not sure what it is in this
case.

Thank you,

Derek Newhall


The following is the contents of our ConfigUser.cmake file:

set(GDAL_BUILD_ABS_PATH "D:/gdal-3.6.3")
set(GLOBAL_LIBRARIES_ABS_PATH "D:/global_libraries")
set (CMAKE_BUILD_TYPE RelWithDebInfo CACHE STRING "" FORCE)
set(PROJ_INCLUDE_DIR "${GDAL_BUILD_ABS_PATH}/proj-6.3.1/src" CACHE STRING
"" FORCE)
set(PROJ_LIBRARY_RELEASE
"${GDAL_BUILD_ABS_PATH}/proj-6.3.1/build_VS2017_x64/lib/RelWithDebInfo/proj.lib"
CACHE STRING "" FORCE)
set(ECW_ROOT "${GDAL_BUILD_ABS_PATH}/ERDAS ECW JPEG 2000 SDK 5.5.0/Desktop
Read-Only")
set(ECW_INCLUDE_DIR "${ECW_ROOT}/include" CACHE STRING "" FORCE)
set(ECW_LIBRARY "${ECW_ROOT}/lib/vc141/x64/NCSEcwS.lib" CACHE STRING ""
FORCE)
set(XERCES_DIR "${GLOBAL_LIBRARIES_ABS_PATH}/xerces-c-3.2.1/build/2017/"
CACHE STRING "" FORCE)
set(XercesC_INCLUDE_DIR "${XERCES_DIR}/src/" CACHE STRING "" FORCE)
set(XercesC_LIBRARY "${XERCES_DIR}/src/Release/xerces-c_3.lib" CACHE STRING
"" FORCE)
set(SQLite3_INCLUDE_DIR
"${GDAL_BUILD_ABS_PATH}/sqlite-amalgamation-3370200" CACHE STRING "" FORCE)
set(SQLite3_LIBRARY
"${GDAL_BUILD_ABS_PATH}/sqlite-amalgamation-3370200/sqlite3.lib" CACHE
STRING "" FORCE)
set(CURL_DIR "${GDAL_BUILD_ABS_PATH}/libcurl" CACHE STRING "" FORCE)
set(CURL_INCLUDE_DIR "${CURL_DIR}/include" CACHE STRING "" FORCE)
set(CURL_LIBRARY_RELEASE "${CURL_DIR}/lib/libcurl.lib" CACHE STRING ""
FORCE)
set(PDFIUM_INCLUDE_DIR
"${GDAL_BUILD_ABS_PATH}/ExtractPDFium/install/include/pdfium" CACHE STRING
"" FORCE)
set(PDFIUM_LIBRARY
"${GDAL_BUILD_ABS_PATH}/ExtractPDFium/install/lib/pdfium.lib" CACHE STRING
"" FORCE)
set(GDAL_ENABLE_DRIVER_PDF_PLUGIN ON)
set(OPENSSL_ROOT_DIR "${GLOBAL_LIBRARIES_ABS_PATH}/openssl-1.1.0f-vs2017"
CACHE STRING "" FORCE)
set(OPENSSL_INCLUDE_DIR "${OPENSSL_ROOT_DIR}/include64" CACHE STRING ""
FORCE)
set(OPENSSL_USE_STATIC_LIBS TRUE CACHE STRING "" FORCE)
set(OPENSSL_MSVC_STATIC_RT TRUE CACHE STRING "" FORCE)
set(EXPAT_DIR "${GDAL_BUILD_ABS_PATH}/Expat/" CACHE STRING "" FORCE)
set(EXPAT_INCLUDE_DIR "${GDAL_BUILD_ABS_PATH}/Expat/Source/lib" CACHE
STRING "" FORCE)
set(EXPAT_LIBRARY "${GDAL_BUILD_ABS_PATH}/Expat/Bin/libexpatwMT.lib" CACHE
STRING "" FORCE)

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230316/c418df74/attachment.htm>

From jluis at ualg.pt  Thu Mar 16 13:02:40 2023
From: jluis at ualg.pt (=?utf-8?B?Sm9hcXVpbSBNYW51ZWwgRnJlaXJlIEx1w61z?=)
Date: Thu, 16 Mar 2023 20:02:40 +0000
Subject: [gdal-dev] Generated CMake build files missing external
 references
In-Reply-To: <CAA1reb2e2maKRWXEm59pUwJ-xWzuYBqPAxV=g7nH=EoFsC=Whw@mail.gmail.com>
References: <CAA1reb2e2maKRWXEm59pUwJ-xWzuYBqPAxV=g7nH=EoFsC=Whw@mail.gmail.com>
Message-ID: <GVXPR04MB9926480CED1FD188A3717621A6BC9@GVXPR04MB9926.eurprd04.prod.outlook.com>

Hi, I also build GDAL like that and noticed that you have an error in XercesC_INCLUDE_DIR. This is what I have. Notice that it ends with ?/include?

When you solve them please report if you were able to build with PDFIUM. I wasn?t, lots of C++ incomprehensible errors.

Joaquim


               set(XercesC_INCLUDE_DIR "C:/programs/compa_libs/xerces-c-3.1.1/compileds/VC14_64/include" CACHE STRING "" FORCE)
               set(XercesC_LIBRARY "C:/programs/compa_libs/xerces-c-3.1.1/compileds/VC14_64/lib/xerces-c_3.lib" CACHE STRING "" FORCE)

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Derek Newhall
Sent: Thursday, March 16, 2023 7:51 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Generated CMake build files missing external references

N?o costuma receber e-mails de dnewhall at carlsonsw.com<mailto:dnewhall at carlsonsw.com>. Saiba por que motivo isto ? importante<https://aka.ms/LearnAboutSenderIdentification>
Hello,

We are trying to migrate from GDAL 3.5.1 to 3.6.3. We currently build a custom gdal*.dll file using a modified nmake.opt file and are trying to duplicate it as a ConfigUser.cmake file. We are building GDAL with ECW 5.5, curl, sqlite3, pdfium, OpenSSL, and Expat.

With 3.6.3 I can get the build files to generate seemingly correctly with our ConfigUser.cmake file and 'cmake -G "Visual Studio 16 2019" .. -C ..\ConfigUser.cmake' but the build fails once 'cmake --build .' is run.

The output of the configure step confirms everything's found, listing the following at the end:

"-- The following OPTIONAL package have been found:" ODBC, XercesC, OpenSSL, ECW, PDFIUM
"-- The following RECOMMENDED packages have been found:" CURL, EXPAT, SQLite3
"-- The following REQUIRED packages have been found:" PROJ

However, once the build happens, a few projects have compilation errors relating to external header files (specifically Xerces):

D:\gdal-3.6.3\ogr\ogr_xerces_headers.h(37,10): fatal error C1083: Cannot open include file: 'xercesc/framework/MemoryManager.hpp': No such file or directory [D:\gdal-3.6.3\build\gcore\gcore.vcxproj]

We are able to fix these references manually in Visual Studio by adding the external include directories to Xerces for the following projects: gcore, ogr, ogr_GMLAS, ogr_GML, ogr_NAS, ogr_ILI

That gets it to compile at least, but then we run into some similar linking issues.

We're new to building the 3.6.x branch, so I'm presuming we've misconfigured something somewhere, but I am not sure what it is in this case.

Thank you,

Derek Newhall


The following is the contents of our ConfigUser.cmake file:

set(GDAL_BUILD_ABS_PATH "D:/gdal-3.6.3")
set(GLOBAL_LIBRARIES_ABS_PATH "D:/global_libraries")
set (CMAKE_BUILD_TYPE RelWithDebInfo CACHE STRING "" FORCE)
set(PROJ_INCLUDE_DIR "${GDAL_BUILD_ABS_PATH}/proj-6.3.1/src" CACHE STRING "" FORCE)
set(PROJ_LIBRARY_RELEASE "${GDAL_BUILD_ABS_PATH}/proj-6.3.1/build_VS2017_x64/lib/RelWithDebInfo/proj.lib" CACHE STRING "" FORCE)
set(ECW_ROOT "${GDAL_BUILD_ABS_PATH}/ERDAS ECW JPEG 2000 SDK 5.5.0/Desktop Read-Only")
set(ECW_INCLUDE_DIR "${ECW_ROOT}/include" CACHE STRING "" FORCE)
set(ECW_LIBRARY "${ECW_ROOT}/lib/vc141/x64/NCSEcwS.lib" CACHE STRING "" FORCE)
set(XERCES_DIR "${GLOBAL_LIBRARIES_ABS_PATH}/xerces-c-3.2.1/build/2017/" CACHE STRING "" FORCE)
set(XercesC_INCLUDE_DIR "${XERCES_DIR}/src/" CACHE STRING "" FORCE)
set(XercesC_LIBRARY "${XERCES_DIR}/src/Release/xerces-c_3.lib" CACHE STRING "" FORCE)
set(SQLite3_INCLUDE_DIR "${GDAL_BUILD_ABS_PATH}/sqlite-amalgamation-3370200" CACHE STRING "" FORCE)
set(SQLite3_LIBRARY "${GDAL_BUILD_ABS_PATH}/sqlite-amalgamation-3370200/sqlite3.lib" CACHE STRING "" FORCE)
set(CURL_DIR "${GDAL_BUILD_ABS_PATH}/libcurl" CACHE STRING "" FORCE)
set(CURL_INCLUDE_DIR "${CURL_DIR}/include" CACHE STRING "" FORCE)
set(CURL_LIBRARY_RELEASE "${CURL_DIR}/lib/libcurl.lib" CACHE STRING "" FORCE)
set(PDFIUM_INCLUDE_DIR "${GDAL_BUILD_ABS_PATH}/ExtractPDFium/install/include/pdfium" CACHE STRING "" FORCE)
set(PDFIUM_LIBRARY "${GDAL_BUILD_ABS_PATH}/ExtractPDFium/install/lib/pdfium.lib" CACHE STRING "" FORCE)
set(GDAL_ENABLE_DRIVER_PDF_PLUGIN ON)
set(OPENSSL_ROOT_DIR "${GLOBAL_LIBRARIES_ABS_PATH}/openssl-1.1.0f-vs2017" CACHE STRING "" FORCE)
set(OPENSSL_INCLUDE_DIR "${OPENSSL_ROOT_DIR}/include64" CACHE STRING "" FORCE)
set(OPENSSL_USE_STATIC_LIBS TRUE CACHE STRING "" FORCE)
set(OPENSSL_MSVC_STATIC_RT TRUE CACHE STRING "" FORCE)
set(EXPAT_DIR "${GDAL_BUILD_ABS_PATH}/Expat/" CACHE STRING "" FORCE)
set(EXPAT_INCLUDE_DIR "${GDAL_BUILD_ABS_PATH}/Expat/Source/lib" CACHE STRING "" FORCE)
set(EXPAT_LIBRARY "${GDAL_BUILD_ABS_PATH}/Expat/Bin/libexpatwMT.lib" CACHE STRING "" FORCE)


Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230316/8e2c60b1/attachment-0001.htm>

From osgeo.mailinglist at gmail.com  Fri Mar 17 14:53:42 2023
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Fri, 17 Mar 2023 22:53:42 +0100
Subject: [gdal-dev] Difference between ogr2ogr and Python reprojection
In-Reply-To: <ee10b0d7-6d1b-4b0c-ddcc-bf972ca7f595@postholer.com>
References: <YT3PR01MB817835B009AC1F1886D28BA9F2BE9@YT3PR01MB8178.CANPRD01.PROD.OUTLOOK.COM>
 <ee10b0d7-6d1b-4b0c-ddcc-bf972ca7f595@postholer.com>
Message-ID: <CACPZzQ30_yXcDnT9Gu4d9RXROu-KwSrSrgwvua1wYGnP-8nq_Q@mail.gmail.com>

Hello,

What about using gdal.VectorTranslate instead? Normally, shorter code and
it works like ogr2ogr
PS: could be wrong as I didn't tested the exact syntax


from osgeo import gdal

gdal.VectorTranslate(
    'result_command_line.json',
    'geojson.json',
    options='-f GeoJSON -s_srs "+proj=stere +lat_0=90 +lat_ts=60 +lon_0=264
+x_0=0 +y_0=0 +R=6371229 +units=m +no_defs" -t_srs EPSG:4326'
)

Regards

Thomas Gratier

Le mar. 14 mars 2023 ? 19:27, Scott <public at postholer.com> a ?crit :

> While I don't have a direct answer to your question I might ask, why use
> 20 lines of python code when 1 line of ogr2ogr gives the correct result?
>
>
> On 3/14/23 11:15, Dion-Degodez,Nicolas (ECCC) wrote:
> > _Context_
> >
> > We are trying to reproject a GeoJSON polygon to EPSG:4326.
> >
> > In some cases, depending on whether we use the ogr2ogr command line or
> > the equivalent in python, the resulting polygon is different.
> >
> > In those situations, the command line gives us the appropriate polygon,
> > whereas the python code gives us a distorted polygon.
> >
> > _Question_
> >
> > Any idea why there is a difference between the command line and the
> > python results? Is there a mistake in our interpretation of the code/how
> > we converted it in python?
> >
> > _Sample GeoJSON_: https://pastebin.com/hUiVVjFv
> > <https://pastebin.com/hUiVVjFv>
> >
> > Proj4: "+proj=stere +lat_0=90 +lat_ts=60 +lon_0=264 +x_0=0 +y_0=0
> > +R=6371229 +units=m +no_defs"
> >
> > _Command line that works_: ogr2ogr -s_srs "+proj=stere +lat_0=90
> > +lat_ts=60 +lon_0=264 +x_0=0 +y_0=0 +R=6371229 +units=m +no_defs" -t_srs
> > EPSG:4326 result_command_line.json geojson.json
> >
> > Result: https://pasteboard.co/cTpZBRamEYv8.jpg
> > <https://pasteboard.co/cTpZBRamEYv8.jpg>
> >
> > _Python code_ (we would expect the same output as the command line):
> > https://pastebin.com/QgWDBL1W <https://pastebin.com/QgWDBL1W>
> >
> > Result: https://pasteboard.co/8iSv0vbnQlHw.jpg
> > <https://pasteboard.co/8iSv0vbnQlHw.jpg>
> >
> > Thank you!
> >
> > Nicolas D.
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230317/0eeb41b3/attachment.htm>

From even.rouault at spatialys.com  Sun Mar 19 05:34:15 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 19 Mar 2023 13:34:15 +0100
Subject: [gdal-dev] Python bindings: enabling exceptions by default?
Message-ID: <c8abda40-2713-3968-f520-ff539d9042e0@spatialys.com>

Hi,

I've prepared a pull request that does the above, but this raises a 
number of questions. See my longish comment at 
https://github.com/OSGeo/gdal/pull/7475#issuecomment-1475239852. 
Thoughts appreciated

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From howard at hobu.co  Mon Mar 20 10:57:51 2023
From: howard at hobu.co (Howard Butler)
Date: Mon, 20 Mar 2023 12:57:51 -0500
Subject: [gdal-dev] Python bindings: enabling exceptions by default?
In-Reply-To: <c8abda40-2713-3968-f520-ff539d9042e0@spatialys.com>
References: <c8abda40-2713-3968-f520-ff539d9042e0@spatialys.com>
Message-ID: <68328ED2-46B4-455E-B45A-48F53C9B1EE3@hobu.co>



> On Mar 19, 2023, at 7:34 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Hi,
> 
> I've prepared a pull request that does the above, but this raises a number of questions. See my longish comment at https://github.com/OSGeo/gdal/pull/7475#issuecomment-1475239852. Thoughts appreciated

First off, thank you for doing this. 

Speaking for myself, pretty much all of the ogr.py/gdal.py code I've written for the past 15 years has gdal.UseExceptions() after the "from osgeo import gdal" import. The reasons why we had to have this 15 years ago were reasonable, but now it is just confusing boilerplate. It's time to ditch it. 

It has been a regret that we didn't clean up the secondary effects of UseExceptions/DontUseExceptions a long time ago. I'm sure the original sin was a result of my mucking with the SWIG bindings to get something that kind of worked and giving up after that. I'm glad your PR addresses this and makes things better for other handler-aware code that is often mixed together with gdal.py such as Fiona/rasterio, QGIS bindings, or PDAL stuff (in my case). 

As for enabling them by default at our next 3.7 release ... one one hand, it has been fifteen years already and the project has been telegraphing through the options that this could/should change. On the other, GDAL is *very* conservative with API evolution, and making UseExceptions default behavior in the Python bindings breaks existing code that wasn't doing gdal.UseExceptions already. The nice thing about activating this behavior is that it causes it to throw an exception and tell the user about something that was otherwise silently failing, so the remedy in the case of most of these breakages is going to be clear. 

I would vote that we go for enabling UseExceptions by default for GDAL 3.7 based on the following assumptions:
* The group that will feel the largest impact by the change is GDAL's own autotest suite
* Exceptions are the Python Way, and default behavior of GDAL's bindings is out of step
* Tons of user-land code is already doing UseExceptions, as it is a practice that is recommended in many tutorials and books and SE posts
* The largest portion of GDAL-using Python developers are using Rasterio or Fiona, not gdal.py and ogr.py, and they would not be impacted by these changes (and maybe be impacted positively as the ticket describes).

Are you a GDAL Python bindings user? Would you be impacted by this policy change? Please chime in.

Howard

From alansnow21 at gmail.com  Mon Mar 20 11:28:24 2023
From: alansnow21 at gmail.com (Alan Snow)
Date: Mon, 20 Mar 2023 13:28:24 -0500
Subject: [gdal-dev] Python bindings: enabling exceptions by default?
In-Reply-To: <68328ED2-46B4-455E-B45A-48F53C9B1EE3@hobu.co>
References: <c8abda40-2713-3968-f520-ff539d9042e0@spatialys.com>
 <68328ED2-46B4-455E-B45A-48F53C9B1EE3@hobu.co>
Message-ID: <CAGybdFTv1VnLdzFgGu6tuoux6MV93vuHjtDeu-iC1S6+OaZfPg@mail.gmail.com>

I think that this is a good change. However, I recommend making this change
associated with the GDAL 4.0 release as it is likely going to break
existing codebases.

On Mon, Mar 20, 2023, 12:58 PM Howard Butler <howard at hobu.co> wrote:

>
>
> > On Mar 19, 2023, at 7:34 AM, Even Rouault <even.rouault at spatialys.com>
> wrote:
> >
> > Hi,
> >
> > I've prepared a pull request that does the above, but this raises a
> number of questions. See my longish comment at
> https://github.com/OSGeo/gdal/pull/7475#issuecomment-1475239852. Thoughts
> appreciated
>
> First off, thank you for doing this.
>
> Speaking for myself, pretty much all of the ogr.py/gdal.py code I've
> written for the past 15 years has gdal.UseExceptions() after the "from
> osgeo import gdal" import. The reasons why we had to have this 15 years ago
> were reasonable, but now it is just confusing boilerplate. It's time to
> ditch it.
>
> It has been a regret that we didn't clean up the secondary effects of
> UseExceptions/DontUseExceptions a long time ago. I'm sure the original sin
> was a result of my mucking with the SWIG bindings to get something that
> kind of worked and giving up after that. I'm glad your PR addresses this
> and makes things better for other handler-aware code that is often mixed
> together with gdal.py such as Fiona/rasterio, QGIS bindings, or PDAL stuff
> (in my case).
>
> As for enabling them by default at our next 3.7 release ... one one hand,
> it has been fifteen years already and the project has been telegraphing
> through the options that this could/should change. On the other, GDAL is
> *very* conservative with API evolution, and making UseExceptions default
> behavior in the Python bindings breaks existing code that wasn't doing
> gdal.UseExceptions already. The nice thing about activating this behavior
> is that it causes it to throw an exception and tell the user about
> something that was otherwise silently failing, so the remedy in the case of
> most of these breakages is going to be clear.
>
> I would vote that we go for enabling UseExceptions by default for GDAL 3.7
> based on the following assumptions:
> * The group that will feel the largest impact by the change is GDAL's own
> autotest suite
> * Exceptions are the Python Way, and default behavior of GDAL's bindings
> is out of step
> * Tons of user-land code is already doing UseExceptions, as it is a
> practice that is recommended in many tutorials and books and SE posts
> * The largest portion of GDAL-using Python developers are using Rasterio
> or Fiona, not gdal.py and ogr.py, and they would not be impacted by these
> changes (and maybe be impacted positively as the ticket describes).
>
> Are you a GDAL Python bindings user? Would you be impacted by this policy
> change? Please chime in.
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230320/e62c6fe4/attachment.htm>

From schwehr at gmail.com  Mon Mar 20 13:07:31 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 20 Mar 2023 13:07:31 -0700
Subject: [gdal-dev] Python bindings: enabling exceptions by default?
In-Reply-To: <68328ED2-46B4-455E-B45A-48F53C9B1EE3@hobu.co>
References: <c8abda40-2713-3968-f520-ff539d9042e0@spatialys.com>
 <68328ED2-46B4-455E-B45A-48F53C9B1EE3@hobu.co>
Message-ID: <CACmBxyuozMkPp3n58StP66=q0VEVpdkmL+gQ7wF2NpCxUSdLoA@mail.gmail.com>

We are heavy users of the swig bindings. We have some Fiona users and are
only just now in the process of starting to use rasterio. We have only 3
instances of calling UseExceptions. Turning on UseExceptions
immediately blew up a bunch of my tests that were making incorrect
assumptions. Nothing major, but I haven't looked for more than a couple
seconds for trouble.

+1 for switching to have it enabled by default. I'm not sure if it would be
better with 3.7.0 or 4.0.0.

On Mon, Mar 20, 2023 at 10:58?AM Howard Butler <howard at hobu.co> wrote:

>
>
> > On Mar 19, 2023, at 7:34 AM, Even Rouault <even.rouault at spatialys.com>
> wrote:
> >
> > Hi,
> >
> > I've prepared a pull request that does the above, but this raises a
> number of questions. See my longish comment at
> https://github.com/OSGeo/gdal/pull/7475#issuecomment-1475239852. Thoughts
> appreciated
>
> First off, thank you for doing this.
>
> Speaking for myself, pretty much all of the ogr.py/gdal.py code I've
> written for the past 15 years has gdal.UseExceptions() after the "from
> osgeo import gdal" import. The reasons why we had to have this 15 years ago
> were reasonable, but now it is just confusing boilerplate. It's time to
> ditch it.
>
> It has been a regret that we didn't clean up the secondary effects of
> UseExceptions/DontUseExceptions a long time ago. I'm sure the original sin
> was a result of my mucking with the SWIG bindings to get something that
> kind of worked and giving up after that. I'm glad your PR addresses this
> and makes things better for other handler-aware code that is often mixed
> together with gdal.py such as Fiona/rasterio, QGIS bindings, or PDAL stuff
> (in my case).
>
> As for enabling them by default at our next 3.7 release ... one one hand,
> it has been fifteen years already and the project has been telegraphing
> through the options that this could/should change. On the other, GDAL is
> *very* conservative with API evolution, and making UseExceptions default
> behavior in the Python bindings breaks existing code that wasn't doing
> gdal.UseExceptions already. The nice thing about activating this behavior
> is that it causes it to throw an exception and tell the user about
> something that was otherwise silently failing, so the remedy in the case of
> most of these breakages is going to be clear.
>
> I would vote that we go for enabling UseExceptions by default for GDAL 3.7
> based on the following assumptions:
> * The group that will feel the largest impact by the change is GDAL's own
> autotest suite
> * Exceptions are the Python Way, and default behavior of GDAL's bindings
> is out of step
> * Tons of user-land code is already doing UseExceptions, as it is a
> practice that is recommended in many tutorials and books and SE posts
> * The largest portion of GDAL-using Python developers are using Rasterio
> or Fiona, not gdal.py and ogr.py, and they would not be impacted by these
> changes (and maybe be impacted positively as the ticket describes).
>
> Are you a GDAL Python bindings user? Would you be impacted by this policy
> change? Please chime in.
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230320/a02397de/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Mar 20 14:09:44 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 20 Mar 2023 21:09:44 +0000
Subject: [gdal-dev] GDAL does not get correct GCPs from ESRI GeodataXform
Message-ID: <AM0PR09MB321995E8FA75E51DF202939EFD809@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

I noticed this question in gis.stackexchange https://gis.stackexchange.com/questions/455609/warping-arcgis-9-2-georeferenced-tiffs-using-gdal-warp. It seems that GDAL cannot interpret right the ground control points which are stored into the aux.xml file. I can see that the support for GeodataXform has been improved a few times https://github.com/OSGeo/gdal/search?q=geodataxform&type=commits but maybe this dataset (there is a link for downloading test data) has some previously untested sort of aux.xml. The GeoTIFF has wrong GCPs with small pixel values like (16.5886813769484,11.2421187314794) but I made also a test with "--config GDAL_GEOREF_SOURCES PAM" and even by creating a cleaned baseline tiff + PAM file but the GCPs looked still wrong.

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230320/eafcb923/attachment.htm>

From warmerdam at pobox.com  Mon Mar 20 14:27:53 2023
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 20 Mar 2023 17:27:53 -0400
Subject: [gdal-dev] Python bindings: enabling exceptions by default?
In-Reply-To: <CACmBxyuozMkPp3n58StP66=q0VEVpdkmL+gQ7wF2NpCxUSdLoA@mail.gmail.com>
References: <c8abda40-2713-3968-f520-ff539d9042e0@spatialys.com>
 <68328ED2-46B4-455E-B45A-48F53C9B1EE3@hobu.co>
 <CACmBxyuozMkPp3n58StP66=q0VEVpdkmL+gQ7wF2NpCxUSdLoA@mail.gmail.com>
Message-ID: <CA+YzLBfMsZEjAf4KKw0fGf3OjJbYx_=ZwEZC5KSsO0GRaC90Zg@mail.gmail.com>

Folks,

As long as there is a clear path to disabling python exception handling
fairly cleanly I can live with it.  Like Kurt, we have a large code base
using GDAL mostly without exceptions enabled for GDAL.

If there is going to be a change, I also agree 4.0 is the time to do it.

Best regards,
Frank


On Mon, Mar 20, 2023 at 4:07?PM Kurt Schwehr <schwehr at gmail.com> wrote:

> We are heavy users of the swig bindings. We have some Fiona users and are
> only just now in the process of starting to use rasterio. We have only 3
> instances of calling UseExceptions. Turning on UseExceptions
> immediately blew up a bunch of my tests that were making incorrect
> assumptions. Nothing major, but I haven't looked for more than a couple
> seconds for trouble.
>
> +1 for switching to have it enabled by default. I'm not sure if it would
> be better with 3.7.0 or 4.0.0.
>
> On Mon, Mar 20, 2023 at 10:58?AM Howard Butler <howard at hobu.co> wrote:
>
>>
>>
>> > On Mar 19, 2023, at 7:34 AM, Even Rouault <even.rouault at spatialys.com>
>> wrote:
>> >
>> > Hi,
>> >
>> > I've prepared a pull request that does the above, but this raises a
>> number of questions. See my longish comment at
>> https://github.com/OSGeo/gdal/pull/7475#issuecomment-1475239852.
>> Thoughts appreciated
>>
>> First off, thank you for doing this.
>>
>> Speaking for myself, pretty much all of the ogr.py/gdal.py code I've
>> written for the past 15 years has gdal.UseExceptions() after the "from
>> osgeo import gdal" import. The reasons why we had to have this 15 years ago
>> were reasonable, but now it is just confusing boilerplate. It's time to
>> ditch it.
>>
>> It has been a regret that we didn't clean up the secondary effects of
>> UseExceptions/DontUseExceptions a long time ago. I'm sure the original sin
>> was a result of my mucking with the SWIG bindings to get something that
>> kind of worked and giving up after that. I'm glad your PR addresses this
>> and makes things better for other handler-aware code that is often mixed
>> together with gdal.py such as Fiona/rasterio, QGIS bindings, or PDAL stuff
>> (in my case).
>>
>> As for enabling them by default at our next 3.7 release ... one one hand,
>> it has been fifteen years already and the project has been telegraphing
>> through the options that this could/should change. On the other, GDAL is
>> *very* conservative with API evolution, and making UseExceptions default
>> behavior in the Python bindings breaks existing code that wasn't doing
>> gdal.UseExceptions already. The nice thing about activating this behavior
>> is that it causes it to throw an exception and tell the user about
>> something that was otherwise silently failing, so the remedy in the case of
>> most of these breakages is going to be clear.
>>
>> I would vote that we go for enabling UseExceptions by default for GDAL
>> 3.7 based on the following assumptions:
>> * The group that will feel the largest impact by the change is GDAL's own
>> autotest suite
>> * Exceptions are the Python Way, and default behavior of GDAL's bindings
>> is out of step
>> * Tons of user-land code is already doing UseExceptions, as it is a
>> practice that is recommended in many tutorials and books and SE posts
>> * The largest portion of GDAL-using Python developers are using Rasterio
>> or Fiona, not gdal.py and ogr.py, and they would not be impacted by these
>> changes (and maybe be impacted positively as the ticket describes).
>>
>> Are you a GDAL Python bindings user? Would you be impacted by this policy
>> change? Please chime in.
>>
>> Howard
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230320/b79eedfe/attachment-0001.htm>

From even.rouault at spatialys.com  Mon Mar 20 14:29:40 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 20 Mar 2023 22:29:40 +0100
Subject: [gdal-dev] GDAL does not get correct GCPs from ESRI GeodataXform
In-Reply-To: <AM0PR09MB321995E8FA75E51DF202939EFD809@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <AM0PR09MB321995E8FA75E51DF202939EFD809@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <a8eee926-8c4c-f0e0-5269-0ba07296ed2f@spatialys.com>

Filed as https://github.com/OSGeo/gdal/issues/7484 : At first sight the 
issue is that file uses TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm), whereas 
the current code only deals with TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)

Le 20/03/2023 ? 22:09, Rahkonen Jukka a ?crit?:
>
> Hi,
>
> I noticed this question in gis.stackexchange 
> https://gis.stackexchange.com/questions/455609/warping-arcgis-9-2-georeferenced-tiffs-using-gdal-warp. 
> It seems that GDAL cannot interpret right the ground control points 
> which are stored into the aux.xml file. I can see that the support for 
> GeodataXform has been improved a few times 
> https://github.com/OSGeo/gdal/search?q=geodataxform&type=commits 
> <https://github.com/OSGeo/gdal/search?q=geodataxform&type=commits> but 
> maybe this dataset (there is a link for downloading test data) has 
> some previously untested sort of aux.xml. The GeoTIFF has wrong GCPs 
> with small pixel values like (16.5886813769484,11.2421187314794) but I 
> made also a test with ?--config GDAL_GEOREF_SOURCES PAM? and even by 
> creating a cleaned baseline tiff + PAM file but the GCPs looked still 
> wrong.
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230320/089f6720/attachment.htm>

From andrew at aitchison.me.uk  Mon Mar 20 15:54:43 2023
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Mon, 20 Mar 2023 22:54:43 +0000 (GMT)
Subject: [gdal-dev] Python bindings: enabling exceptions by default?
In-Reply-To: <CAGybdFTv1VnLdzFgGu6tuoux6MV93vuHjtDeu-iC1S6+OaZfPg@mail.gmail.com>
References: <c8abda40-2713-3968-f520-ff539d9042e0@spatialys.com>
 <68328ED2-46B4-455E-B45A-48F53C9B1EE3@hobu.co>
 <CAGybdFTv1VnLdzFgGu6tuoux6MV93vuHjtDeu-iC1S6+OaZfPg@mail.gmail.com>
Message-ID: <7976935d-f424-4d1e-71a0-de37ccac4b13@aitchison.me.uk>

On Mon, 20 Mar 2023, Alan Snow wrote:

> I think that this is a good change. However, I recommend making this change
> associated with the GDAL 4.0 release as it is likely going to break
> existing codebases.

Does whether we call it 3.7 or 4.0 affect how long 3.6 is supported ?

-- 
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk

From even.rouault at spatialys.com  Mon Mar 20 16:30:29 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 21 Mar 2023 00:30:29 +0100
Subject: [gdal-dev] Python bindings: enabling exceptions by default?
In-Reply-To: <7976935d-f424-4d1e-71a0-de37ccac4b13@aitchison.me.uk>
References: <c8abda40-2713-3968-f520-ff539d9042e0@spatialys.com>
 <68328ED2-46B4-455E-B45A-48F53C9B1EE3@hobu.co>
 <CAGybdFTv1VnLdzFgGu6tuoux6MV93vuHjtDeu-iC1S6+OaZfPg@mail.gmail.com>
 <7976935d-f424-4d1e-71a0-de37ccac4b13@aitchison.me.uk>
Message-ID: <af168b16-dbd5-8ed5-38b8-5f2ed20640bb@spatialys.com>


> Does whether we call it 3.7 or 4.0 affect how long 3.6 is supported ?

I don't think Alan's comment would suggest that the next feature version 
planned for may would be called other than 3.7.0. IMHO there should be 
more substantial breaking changes to call it 4.0 than just what is 
discussed here. We have never talked about a 4.0 release up to now, 
either in its content or release schedule.

Until now, we have "only" maintained the last feature version during the 
development cycle of the next feature version, ie during 3.7 development 
phase, started after 3.6.0 release, and ending at 3.7.0, we issue point 
release of 3.6.z.? I see that when 3.0 was released we have issued 
bugfix releases of 3.0.z and 2.4.z (the latest one in the 2.y series) in 
parallel until 3.1.0 was released. I guess a similar strategy could 
apply for a 4.0 release (although the benefit/effort to have multiple 
several maintenance branches isn't obvious given than most packagers 
maintain just the last released version). Anyway, this derails from the 
topic of this thread, and could be re-discussed when we are at that point.

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Tue Mar 21 10:21:58 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 21 Mar 2023 18:21:58 +0100
Subject: [gdal-dev] Python bindings: enabling exceptions by default?
In-Reply-To: <c8abda40-2713-3968-f520-ff539d9042e0@spatialys.com>
References: <c8abda40-2713-3968-f520-ff539d9042e0@spatialys.com>
Message-ID: <95b53b2a-8a86-37cd-4090-8049f6aeb489@spatialys.com>

Hi,

Given the feedback received, I've amended the pull request with an extra 
commit to disable exceptions by default, except in autotest/ and 
scripts. And emit a FutureWarning if exceptions have not been explicitly 
enabled or disabled. So this will test the exceptions-by-default mode in 
the GDAL code base without imposing it to external code, and warning 
such external code that behaviour will change in the future

Even

Le 19/03/2023 ? 13:34, Even Rouault a ?crit?:
> Hi,
>
> I've prepared a pull request that does the above, but this raises a 
> number of questions. See my longish comment at 
> https://github.com/OSGeo/gdal/pull/7475#issuecomment-1475239852. 
> Thoughts appreciated
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From elpaso at itopen.it  Thu Mar 23 05:20:13 2023
From: elpaso at itopen.it (ElPaso)
Date: Thu, 23 Mar 2023 13:20:13 +0100
Subject: [gdal-dev] Motion: adopt RFC 94: Numeric fields width/precision
 metadata
Message-ID: <54904fab-c21c-5e88-a287-a019d0bf2703@itopen.it>

Hi,


Motion: adopt RFC 94:? Numeric fields width/precision metadata

 ?https://github.com/OSGeo/gdal/pull/7264


Rendered text view:

https://github.com/OSGeo/gdal/blob/e19eda1db023abdaf2d24036aa2e167e99e35029/doc/source/development/rfc/rfc94_field_precision_width_metadata.rst


Regards.


-- 
Alessandro Pasotti
w3: www.itopen.it


From jukka.rahkonen at maanmittauslaitos.fi  Thu Mar 23 06:27:04 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 23 Mar 2023 13:27:04 +0000
Subject: [gdal-dev] Motion: adopt RFC 94: Numeric fields width/precision
 metadata
In-Reply-To: <54904fab-c21c-5e88-a287-a019d0bf2703@itopen.it>
References: <54904fab-c21c-5e88-a287-a019d0bf2703@itopen.it>
Message-ID: <AM0PR09MB3219CE71384AD04B39D32827FD879@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta ElPaso
L?hetetty: torstai 23. maaliskuuta 2023 14.20
Vastaanottaja: gdal dev <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Motion: adopt RFC 94: Numeric fields width/precision metadata

Hi,


Motion: adopt RFC 94:? Numeric fields width/precision metadata


From anna.m.george at outlook.com  Thu Mar 23 07:09:21 2023
From: anna.m.george at outlook.com (Anna George)
Date: Thu, 23 Mar 2023 14:09:21 +0000
Subject: [gdal-dev] GDAL Help Needed for Android
Message-ID: <CH0PR20MB414009817E92D235CE4C6622AC879@CH0PR20MB4140.namprd20.prod.outlook.com>

Hello,
I have been working on a project that requires building GDAL for Android arm64-v8a, since the project already works for armeabi-v7a but now apps need to update to use 64 bit. I'm on a time crunch, but I have attempted various things over the past week- building an .aar instead using https://github.com/paamand/GDAL4Android , trying to build the .so's using this project https://github.com/eltorio/RtkGps that has a prebuilt .jar and one .so file for gdal, and so on. The .aar build fails from missing header files and several other errors that I couldn't figure out, and I managed to build some needed .so's using the prebuilt gdal project, but they crash upon making calls to open a Dataset or register data types. I am on a time crunch for the project, and I need help. Would it be possible to either get a prebuilt gdal .jar file and gdal .so's for arm64-v8a or get a prebuilt gdal .aar file and any .so's that would still be needed?

Thank you,
Anna

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230323/4e6cfbbe/attachment.htm>

From even.rouault at spatialys.com  Thu Mar 23 07:17:51 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 23 Mar 2023 15:17:51 +0100
Subject: [gdal-dev] Motion: adopt RFC 94: Numeric fields width/precision
 metadata
In-Reply-To: <54904fab-c21c-5e88-a287-a019d0bf2703@itopen.it>
References: <54904fab-c21c-5e88-a287-a019d0bf2703@itopen.it>
Message-ID: <bc96c589-9be2-6140-cdfc-1b28956f5efc@spatialys.com>

+1 Even

Le 23/03/2023 ? 13:20, ElPaso a ?crit?:
> Hi,
>
>
> Motion: adopt RFC 94:? Numeric fields width/precision metadata
>
> ?https://github.com/OSGeo/gdal/pull/7264
>
>
> Rendered text view:
>
> https://github.com/OSGeo/gdal/blob/e19eda1db023abdaf2d24036aa2e167e99e35029/doc/source/development/rfc/rfc94_field_precision_width_metadata.rst 
>
>
>
> Regards.
>
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From runette at gmail.com  Thu Mar 23 09:17:48 2023
From: runette at gmail.com (Paul Harwood)
Date: Thu, 23 Mar 2023 16:17:48 +0000
Subject: [gdal-dev] GDAL Help Needed for Android
In-Reply-To: <CH0PR20MB414009817E92D235CE4C6622AC879@CH0PR20MB4140.namprd20.prod.outlook.com>
References: <CH0PR20MB414009817E92D235CE4C6622AC879@CH0PR20MB4140.namprd20.prod.outlook.com>
Message-ID: <CAE8nN5PL7CPhZ9HxfAWFJT0rRBZVKHHwXXZu261tTEcnuyL5fQ@mail.gmail.com>

I have never tried this, but the Conda package for gdal has a distribution
for linux-aarch64 that should include the pre-built .so that you need. You
might try that and I would be interested to know if it works...


On Thu, 23 Mar 2023, 14:10 Anna George, <anna.m.george at outlook.com> wrote:

> Hello,
> I have been working on a project that requires building GDAL for Android
> arm64-v8a, since the project already works for armeabi-v7a but now apps
> need to update to use 64 bit. I'm on a time crunch, but I have attempted
> various things over the past week- building an .aar instead using
> https://github.com/paamand/GDAL4Android , trying to build the .so's using
> this project https://github.com/eltorio/RtkGps that has a prebuilt .jar
> and one .so file for gdal, and so on. The .aar build fails from missing
> header files and several other errors that I couldn't figure out, and I
> managed to build some needed .so's using the prebuilt gdal project, but
> they crash upon making calls to open a Dataset or register data types. I am
> on a time crunch for the project, and I need help. Would it be possible to
> either get a prebuilt gdal .jar file and gdal .so's for arm64-v8a or get a
> prebuilt gdal .aar file and any .so's that would still be needed?
>
> Thank you,
> Anna
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230323/c0ba7703/attachment-0001.htm>

From even.rouault at spatialys.com  Fri Mar 24 07:23:28 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 24 Mar 2023 15:23:28 +0100
Subject: [gdal-dev] Python bindings: enabling exceptions by default?
In-Reply-To: <95b53b2a-8a86-37cd-4090-8049f6aeb489@spatialys.com>
References: <c8abda40-2713-3968-f520-ff539d9042e0@spatialys.com>
 <95b53b2a-8a86-37cd-4090-8049f6aeb489@spatialys.com>
Message-ID: <b48e52f3-6220-7c7a-3389-b7412f7a322e@spatialys.com>

Hi,

https://github.com/OSGeo/gdal/pull/7475 has now been merged into master. 
The UseExceptions()/DontUseExceptions() methods when invoked from one 
module also affect all other gdal, ogr, osr, gnm modules at once (that 
is now gdal.UseExceptions() is equivalent to gdal.UseExceptions() + 
ogr.UseExceptions() + osr.UseExceptions() + gnm.UseExceptions())

Even

Le 21/03/2023 ? 18:21, Even Rouault a ?crit?:
> Hi,
>
> Given the feedback received, I've amended the pull request with an 
> extra commit to disable exceptions by default, except in autotest/ and 
> scripts. And emit a FutureWarning if exceptions have not been 
> explicitly enabled or disabled. So this will test the 
> exceptions-by-default mode in the GDAL code base without imposing it 
> to external code, and warning such external code that behaviour will 
> change in the future
>
> Even
>
> Le 19/03/2023 ? 13:34, Even Rouault a ?crit?:
>> Hi,
>>
>> I've prepared a pull request that does the above, but this raises a 
>> number of questions. See my longish comment at 
>> https://github.com/OSGeo/gdal/pull/7475#issuecomment-1475239852. 
>> Thoughts appreciated
>>
>> Even
>>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Mon Mar 27 09:35:25 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 27 Mar 2023 18:35:25 +0200
Subject: [gdal-dev] GDAL sponsored maintenance report: Aug 2021-March 2023
Message-ID: <479b949e-e2e2-c202-2196-dbae580f5002@spatialys.com>

Hi,


After more than one year and a half of benefiting from the GDAL 
sponsored maintenance program, it is time to share with the community 
what work has been accomplished thanks to that sponsorship.? It is quite 
hard to summarize, as the amount of tasks reaches 1800 for a total of 
1313 hours. So lots of small tasks that make the daily reality of 
maintaining a project like GDAL.


Their global repartition is the following one:

  *

    Bug fixing: 51% of actions, 55% of time spent (including 177 bug
    fixes related to issues found by oss-fuzz)

  *

    Enhancements: 5% of actions, 15% of time spent

  *

    CMake related work: 5% of actions, 10% of time spent

  *

    Review of contributions: 20% of actions, 5% of time spent

  *

    Release management: 2% of actions, 4% of time spent

  *

    Bug triaging and analysis (without corresponding bug fix): 8% of
    actions, 3% of time spent

  *

    Maintenance of continuous integration setup: 3% of actions and time
    spent

  *

    Code enhancements/cleanups: 2% of actions and time spent

  *

    Documentation: 1% of actions and time spent

  *

    Other activities: mailing list discussions, bug reports to other
    projects, meetings, etc.


This work has benefited mostly to GDAL (80%), PROJ (15%), libtiff (2%), 
openjpeg (1%) and more marginally to other projects associated with GDAL 
such as Xerces-C, poppler, libgeotiff, cppcheck, netcdf, curl, libjxl 
and shapelib.


The CMake related work has been a major item of work for the mid 2021 - 
beginning of 2022 period. I cannot overstate the importance of the 
initial contribution of this work made by Hiroshi Miura who brought most 
of the initial material. That said, without the sponsored maintenance 
program which helped polishing and making it production ready for all 
environments supported by GDAL, this would likely have remained a 
out-of-tree project. I believe most stakeholders (contributors and 
users, at least the ones who build from source) are very satisfied with 
this transition from the historic build systems to a unified and more 
modern one, with consistent option naming. Building on Windows is in 
particular much easier nowadays, in particular when leveraging 
dependencies from distributions like vcpkg or Conda Forge. For GDAL 
developers, the new build system offers integration with IDEs and solves 
long standing annoyances like missing header dependency rules for 
partial rebuilds.


Although it doesn?t show up particularly in the above statistics, making 
sure that the continuous integration configurations remain ?green? at 
all times is a constant source of attention. Given the number of 
environments tested and the number of dependencies of GDAL, there is 
hardly a week where some action is not needed in that area to make sure 
that the code builds and compiles cleanly, tests pass, etc. We can now 
track a few rolling distributions to detect as early as possible sources 
of incompatibilities with our dependencies, and act early: report issues 
to upstream if there are bugs, or do changes in our code & build scripts 
to take them into account.


Making sure that code contributions from others are reviewed in a timely 
manner is important for the contributor experience. The average delay 
for a submitted pull request (excluding mine) to be commented by me (or 
merged if no comment needed) is 22 hours, and the median time 3h20 
(statistics gathered on 601 pull requests since August 2021, source 
script at https://gist.github.com/rouault/0fbd37f59b8e93ae63761468a5600262)


In the category of regular tasks, one can also mention: updating the 
EPSG dataset in PROJ (and coordinating with IOGP when detecting issues), 
refreshing vendored of copies in the GDAL source tree (libtiff 
typically), making sure that new SQLite releases play nicely with PROJ 
which has some stressing SQL queries (we spot recently a performance 
regression in SQLite 3.41.0 and reported it to upstream)


The following RFCs have been implemented (not mentioning a few 
procedural ones) thanks to the sponsorship:

  *

    RFC 87: Signed int8 data type for raster
    <https://gdal.org/development/rfc/rfc87_signed_int8.html>

  *

    RFC 88: Use GoogleTest framework for C/C++ unit tests
    <https://gdal.org/development/rfc/rfc88_googletest.html>

  *

    RFC 90: Direct access to compressed raster data
    <https://gdal.org/development/rfc/rfc90_read_compressed_data.html>

  *

    RFC 91: GDALDataset::Close() method
    <https://gdal.org/development/rfc/rfc91_dataset_close.html>

  *

    RFC 93: OGRLayer::UpdateFeature() method
    <https://gdal.org/development/rfc/rfc93_update_feature.html>


Other recent significant work includes enhancements in Python exception 
handling (in preparation for enabling them by default in a future 4.0 
release), and enabling them in the regression test suite and utilities.


The following feature releases have been issued: 3.4.0, 3.5.0 and 3.6.0. 
And the following bug fixes releases: 3.3.2, 3.3.3, 3.4.1, 3.4.2, 3.4.3, 
3.5.1, 3.5.2, 3.6.1, 3.6.2 and 3.6.3

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230327/0299c1eb/attachment.htm>

From kai.muehlbauer at uni-bonn.de  Mon Mar 27 09:50:34 2023
From: kai.muehlbauer at uni-bonn.de (=?ISO-8859-1?Q?Kai_M=FChlbauer?=)
Date: Mon, 27 Mar 2023 16:50:34 +0000
Subject: [gdal-dev] GDAL sponsored maintenance report: Aug 2021-March
 2023
In-Reply-To: <479b949e-e2e2-c202-2196-dbae580f5002@spatialys.com>
References: <479b949e-e2e2-c202-2196-dbae580f5002@spatialys.com>
Message-ID: <B41CEC06-08AF-440B-814B-C21871778148@uni-bonn.de>

Dear Even,

Thanks for this extensive summary. I've followed closely on mailing list and GitHub and there have been a lot of good reads and interesting discussions. For us users and developers it's good to see that the project and it's surroundings are in good shape.

Thanks for your responsiveness and help in all those places. Your and other contributors expertise is indeed invaluable.

Thanks to all sponsors making this possible.

Cheers,
Kai 


Am 27. M?rz 2023 16:35:25 UTC schrieb Even Rouault <even.rouault at spatialys.com>:
>Hi,
>
>
>After more than one year and a half of benefiting from the GDAL sponsored maintenance program, it is time to share with the community what work has been accomplished thanks to that sponsorship.? It is quite hard to summarize, as the amount of tasks reaches 1800 for a total of 1313 hours. So lots of small tasks that make the daily reality of maintaining a project like GDAL.
>
>
>Their global repartition is the following one:
>
> *
>
>   Bug fixing: 51% of actions, 55% of time spent (including 177 bug
>   fixes related to issues found by oss-fuzz)
>
> *
>
>   Enhancements: 5% of actions, 15% of time spent
>
> *
>
>   CMake related work: 5% of actions, 10% of time spent
>
> *
>
>   Review of contributions: 20% of actions, 5% of time spent
>
> *
>
>   Release management: 2% of actions, 4% of time spent
>
> *
>
>   Bug triaging and analysis (without corresponding bug fix): 8% of
>   actions, 3% of time spent
>
> *
>
>   Maintenance of continuous integration setup: 3% of actions and time
>   spent
>
> *
>
>   Code enhancements/cleanups: 2% of actions and time spent
>
> *
>
>   Documentation: 1% of actions and time spent
>
> *
>
>   Other activities: mailing list discussions, bug reports to other
>   projects, meetings, etc.
>
>
>This work has benefited mostly to GDAL (80%), PROJ (15%), libtiff (2%), openjpeg (1%) and more marginally to other projects associated with GDAL such as Xerces-C, poppler, libgeotiff, cppcheck, netcdf, curl, libjxl and shapelib.
>
>
>The CMake related work has been a major item of work for the mid 2021 - beginning of 2022 period. I cannot overstate the importance of the initial contribution of this work made by Hiroshi Miura who brought most of the initial material. That said, without the sponsored maintenance program which helped polishing and making it production ready for all environments supported by GDAL, this would likely have remained a out-of-tree project. I believe most stakeholders (contributors and users, at least the ones who build from source) are very satisfied with this transition from the historic build systems to a unified and more modern one, with consistent option naming. Building on Windows is in particular much easier nowadays, in particular when leveraging dependencies from distributions like vcpkg or Conda Forge. For GDAL developers, the new build system offers integration with IDEs and solves long standing annoyances like missing header dependency rules for partial rebuilds.
>
>
>Although it doesn?t show up particularly in the above statistics, making sure that the continuous integration configurations remain ?green? at all times is a constant source of attention. Given the number of environments tested and the number of dependencies of GDAL, there is hardly a week where some action is not needed in that area to make sure that the code builds and compiles cleanly, tests pass, etc. We can now track a few rolling distributions to detect as early as possible sources of incompatibilities with our dependencies, and act early: report issues to upstream if there are bugs, or do changes in our code & build scripts to take them into account.
>
>
>Making sure that code contributions from others are reviewed in a timely manner is important for the contributor experience. The average delay for a submitted pull request (excluding mine) to be commented by me (or merged if no comment needed) is 22 hours, and the median time 3h20 (statistics gathered on 601 pull requests since August 2021, source script at https://gist.github.com/rouault/0fbd37f59b8e93ae63761468a5600262)
>
>
>In the category of regular tasks, one can also mention: updating the EPSG dataset in PROJ (and coordinating with IOGP when detecting issues), refreshing vendored of copies in the GDAL source tree (libtiff typically), making sure that new SQLite releases play nicely with PROJ which has some stressing SQL queries (we spot recently a performance regression in SQLite 3.41.0 and reported it to upstream)
>
>
>The following RFCs have been implemented (not mentioning a few procedural ones) thanks to the sponsorship:
>
> *
>
>   RFC 87: Signed int8 data type for raster
>   <https://gdal.org/development/rfc/rfc87_signed_int8.html>
>
> *
>
>   RFC 88: Use GoogleTest framework for C/C++ unit tests
>   <https://gdal.org/development/rfc/rfc88_googletest.html>
>
> *
>
>   RFC 90: Direct access to compressed raster data
>   <https://gdal.org/development/rfc/rfc90_read_compressed_data.html>
>
> *
>
>   RFC 91: GDALDataset::Close() method
>   <https://gdal.org/development/rfc/rfc91_dataset_close.html>
>
> *
>
>   RFC 93: OGRLayer::UpdateFeature() method
>   <https://gdal.org/development/rfc/rfc93_update_feature.html>
>
>
>Other recent significant work includes enhancements in Python exception handling (in preparation for enabling them by default in a future 4.0 release), and enabling them in the regression test suite and utilities.
>
>
>The following feature releases have been issued: 3.4.0, 3.5.0 and 3.6.0. And the following bug fixes releases: 3.3.2, 3.3.3, 3.4.1, 3.4.2, 3.4.3, 3.5.1, 3.5.2, 3.6.1, 3.6.2 and 3.6.3
>
>Best regards,
>
>Even
>
>-- 
>http://www.spatialys.com
>My software is free, but my time generally not.

-- 
Diese Nachricht wurde von meinem Android-Ger?t mit K-9 Mail gesendet.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230327/fb933724/attachment-0001.htm>

From Matt.Wilkie at yukon.ca  Mon Mar 27 11:33:00 2023
From: Matt.Wilkie at yukon.ca (Matt.Wilkie)
Date: Mon, 27 Mar 2023 18:33:00 +0000
Subject: [gdal-dev] [EXT] GDAL sponsored maintenance report: Aug
 2021-March 2023
In-Reply-To: <479b949e-e2e2-c202-2196-dbae580f5002@spatialys.com>
References: <479b949e-e2e2-c202-2196-dbae580f5002@spatialys.com>
Message-ID: <YT3PR01MB5590182584F91DDE11AC9074878B9@YT3PR01MB5590.CANPRD01.PROD.OUTLOOK.COM>

Thank you Even,

I appreciate this view and corresponding insight into the work of the GDAL sponsored maintenance - this is in addition to the actual work you've undertaken, and coaching of occasional contributors and question askers like myself! I hope that in course of time the bug fixing ratio drops somewhat lower than half, and you get to enjoy building more enhancements and new things.

Best,

Matt
Geomatics Developer and Administrator | Environment | T 867-667-8133 | Yukon.ca
Hours: 08:30-16:30, Mon-Wed: Office, Thu: Remote, Fri: Away.

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Even Rouault
Sent: Monday, March 27, 2023 9:35 AM
To: gdal-dev at lists.osgeo.org
Subject: [EXT] [gdal-dev] GDAL sponsored maintenance report: Aug 2021-March 2023


Hi,


After more than one year and a half of benefiting from the GDAL sponsored maintenance program, it is time to share with the community what work has been accomplished thanks to that sponsorship.  It is quite hard to summarize, as the amount of tasks reaches 1800 for a total of 1313 hours. So lots of small tasks that make the daily reality of maintaining a project like GDAL.


Their global repartition is the following one:

  *   Bug fixing: 51% of actions, 55% of time spent (including 177 bug fixes related to issues found by oss-fuzz)
  *   Enhancements: 5% of actions, 15% of time spent
  *   CMake related work: 5% of actions, 10% of time spent
  *   Review of contributions: 20% of actions, 5% of time spent
  *   Release management: 2% of actions, 4% of time spent
  *   Bug triaging and analysis (without corresponding bug fix): 8% of actions, 3% of time spent
  *   Maintenance of continuous integration setup: 3% of actions and time spent
  *   Code enhancements/cleanups: 2% of actions and time spent
  *   Documentation: 1% of actions and time spent
  *   Other activities: mailing list discussions, bug reports to other projects, meetings, etc.


This work has benefited mostly to GDAL (80%), PROJ (15%), libtiff (2%), openjpeg (1%) and more marginally to other projects associated with GDAL such as Xerces-C, poppler, libgeotiff, cppcheck, netcdf, curl, libjxl and shapelib.


The CMake related work has been a major item of work for the mid 2021 - beginning of 2022 period. I cannot overstate the importance of the initial contribution of this work made by Hiroshi Miura who brought most of the initial material. That said, without the sponsored maintenance program which helped polishing and making it production ready for all environments supported by GDAL, this would likely have remained a out-of-tree project. I believe most stakeholders (contributors and users, at least the ones who build from source) are very satisfied with this transition from the historic build systems to a unified and more modern one, with consistent option naming. Building on Windows is in particular much easier nowadays, in particular when leveraging dependencies from distributions like vcpkg or Conda Forge. For GDAL developers, the new build system offers integration with IDEs and solves long standing annoyances like missing header dependency rules for partial rebuilds.


Although it doesn't show up particularly in the above statistics, making sure that the continuous integration configurations remain "green" at all times is a constant source of attention. Given the number of environments tested and the number of dependencies of GDAL, there is hardly a week where some action is not needed in that area to make sure that the code builds and compiles cleanly, tests pass, etc. We can now track a few rolling distributions to detect as early as possible sources of incompatibilities with our dependencies, and act early: report issues to upstream if there are bugs, or do changes in our code & build scripts to take them into account.


Making sure that code contributions from others are reviewed in a timely manner is important for the contributor experience. The average delay for a submitted pull request (excluding mine) to be commented by me (or merged if no comment needed) is 22 hours, and the median time 3h20 (statistics gathered on 601 pull requests since August 2021, source script at https://gist.github.com/rouault/0fbd37f59b8e93ae63761468a5600262<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgist.github.com%2Frouault%2F0fbd37f59b8e93ae63761468a5600262&data=05%7C01%7Cmatt.wilkie%40yukon.ca%7Ce886aa1296084d66bf1d08db2ee14820%7C98f515313973490abb70195aa264a2bc%7C0%7C0%7C638155317337928222%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=IA3VA815KMuovomwajlx062DQyDrBkXu%2FRtrclmJCfg%3D&reserved=0>)


In the category of regular tasks, one can also mention: updating the EPSG dataset in PROJ (and coordinating with IOGP when detecting issues), refreshing vendored of copies in the GDAL source tree (libtiff typically), making sure that new SQLite releases play nicely with PROJ which has some stressing SQL queries (we spot recently a performance regression in SQLite 3.41.0 and reported it to upstream)


The following RFCs have been implemented (not mentioning a few procedural ones) thanks to the sponsorship:

  *   RFC 87: Signed int8 data type for raster<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgdal.org%2Fdevelopment%2Frfc%2Frfc87_signed_int8.html&data=05%7C01%7Cmatt.wilkie%40yukon.ca%7Ce886aa1296084d66bf1d08db2ee14820%7C98f515313973490abb70195aa264a2bc%7C0%7C0%7C638155317337928222%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=x5777yqaTDpQ%2FUElQi%2FZmyrxNybQ%2BaeuDzl2%2B95whHQ%3D&reserved=0>
  *   RFC 88: Use GoogleTest framework for C/C++ unit tests<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgdal.org%2Fdevelopment%2Frfc%2Frfc88_googletest.html&data=05%7C01%7Cmatt.wilkie%40yukon.ca%7Ce886aa1296084d66bf1d08db2ee14820%7C98f515313973490abb70195aa264a2bc%7C0%7C0%7C638155317337928222%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=3oAFB8Ps12CWXFGKUdxpkeWjrTjJBczDt%2BVCLC6KqZA%3D&reserved=0>
  *   RFC 90: Direct access to compressed raster data<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgdal.org%2Fdevelopment%2Frfc%2Frfc90_read_compressed_data.html&data=05%7C01%7Cmatt.wilkie%40yukon.ca%7Ce886aa1296084d66bf1d08db2ee14820%7C98f515313973490abb70195aa264a2bc%7C0%7C0%7C638155317337928222%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Lo12z9Gr4FAq9ipDlR5XdmS0ZA68t48lxrXQXieP4OM%3D&reserved=0>
  *   RFC 91: GDALDataset::Close() method<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgdal.org%2Fdevelopment%2Frfc%2Frfc91_dataset_close.html&data=05%7C01%7Cmatt.wilkie%40yukon.ca%7Ce886aa1296084d66bf1d08db2ee14820%7C98f515313973490abb70195aa264a2bc%7C0%7C0%7C638155317337928222%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=Fe7QgA1nYZzdVfqd4G%2B%2FTy1QJ9zl6fNZ1wPWmT%2FtZMU%3D&reserved=0>
  *   RFC 93: OGRLayer::UpdateFeature() method<https://can01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgdal.org%2Fdevelopment%2Frfc%2Frfc93_update_feature.html&data=05%7C01%7Cmatt.wilkie%40yukon.ca%7Ce886aa1296084d66bf1d08db2ee14820%7C98f515313973490abb70195aa264a2bc%7C0%7C0%7C638155317337928222%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=KZ80gxWjlmA%2Fy1z2hIvkHQ%2BiJa%2FGuZW9vNtO8vJhRYY%3D&reserved=0>


Other recent significant work includes enhancements in Python exception handling (in preparation for enabling them by default in a future 4.0 release), and enabling them in the regression test suite and utilities.


The following feature releases have been issued: 3.4.0, 3.5.0 and 3.6.0. And the following bug fixes releases: 3.3.2, 3.3.3, 3.4.1, 3.4.2, 3.4.3, 3.5.1, 3.5.2, 3.6.1, 3.6.2 and 3.6.3

Best regards,

Even

--

http://www.spatialys.com<https://can01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.spatialys.com%2F&data=05%7C01%7Cmatt.wilkie%40yukon.ca%7Ce886aa1296084d66bf1d08db2ee14820%7C98f515313973490abb70195aa264a2bc%7C0%7C0%7C638155317337928222%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=x2QWPiXocK%2B2RsqqpmHKISaPZoD%2BlXDH3lYx2OeaUTA%3D&reserved=0>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230327/341fc0f5/attachment-0001.htm>

From public at postholer.com  Mon Mar 27 12:08:33 2023
From: public at postholer.com (Scott)
Date: Mon, 27 Mar 2023 12:08:33 -0700
Subject: [gdal-dev] [EXT] GDAL sponsored maintenance report: Aug
 2021-March 2023
Message-ID: <a5a00905-e6ce-7b70-b29f-d99427ebd3f5@postholer.com>

The significant role GDAL has in GIS software cannot be overstated. 
Virtually all open source GIS would not exist without it. Proprietary 
software would be, well, proprietary.

Thanks to Evan and Frank and the not frequently recognized developers 
for all they do. GDAL is huge, it's the center of the open source universe.

-- 
www.postholer.com

From szekerest at gmail.com  Mon Mar 27 13:40:51 2023
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 27 Mar 2023 22:40:51 +0200
Subject: [gdal-dev] GDAL sponsored maintenance report: Aug 2021-March
 2023
In-Reply-To: <479b949e-e2e2-c202-2196-dbae580f5002@spatialys.com>
References: <479b949e-e2e2-c202-2196-dbae580f5002@spatialys.com>
Message-ID: <CACALY+StZS_UeLu_yKLOS-BO+LD3G9c4_h65Fr1WhSDqMvmg1w@mail.gmail.com>

Hi Even,

Thank you for your hard work to keep GDAL running at a high intensity and
quality level, which also shows well in the openhub stats:

https://openhub.net/p/gdal/contributors?sort=latest_commit&time_span=12+months

Keep up the good work :-)

Best regards,

Tamas




Even Rouault <even.rouault at spatialys.com> ezt ?rta (id?pont: 2023. m?rc.
27., H, 18:35):

> Hi,
>
> After more than one year and a half of benefiting from the GDAL sponsored
> maintenance program, it is time to share with the community what work has
> been accomplished thanks to that sponsorship.  It is quite hard to
> summarize, as the amount of tasks reaches 1800 for a total of 1313 hours.
> So lots of small tasks that make the daily reality of maintaining a project
> like GDAL.
>
> Their global repartition is the following one:
>
>    -
>
>    Bug fixing: 51% of actions, 55% of time spent (including 177 bug fixes
>    related to issues found by oss-fuzz)
>    -
>
>    Enhancements: 5% of actions, 15% of time spent
>    -
>
>    CMake related work: 5% of actions, 10% of time spent
>    -
>
>    Review of contributions: 20% of actions, 5% of time spent
>    -
>
>    Release management: 2% of actions, 4% of time spent
>    -
>
>    Bug triaging and analysis (without corresponding bug fix): 8% of
>    actions, 3% of time spent
>    -
>
>    Maintenance of continuous integration setup: 3% of actions and time
>    spent
>    -
>
>    Code enhancements/cleanups: 2% of actions and time spent
>    -
>
>    Documentation: 1% of actions and time spent
>    -
>
>    Other activities: mailing list discussions, bug reports to other
>    projects, meetings, etc.
>
>
> This work has benefited mostly to GDAL (80%), PROJ (15%), libtiff (2%),
> openjpeg (1%) and more marginally to other projects associated with GDAL
> such as Xerces-C, poppler, libgeotiff, cppcheck, netcdf, curl, libjxl and
> shapelib.
>
> The CMake related work has been a major item of work for the mid 2021 -
> beginning of 2022 period. I cannot overstate the importance of the initial
> contribution of this work made by Hiroshi Miura who brought most of the
> initial material. That said, without the sponsored maintenance program
> which helped polishing and making it production ready for all environments
> supported by GDAL, this would likely have remained a out-of-tree project. I
> believe most stakeholders (contributors and users, at least the ones who
> build from source) are very satisfied with this transition from the
> historic build systems to a unified and more modern one, with consistent
> option naming. Building on Windows is in particular much easier nowadays,
> in particular when leveraging dependencies from distributions like vcpkg or
> Conda Forge. For GDAL developers, the new build system offers integration
> with IDEs and solves long standing annoyances like missing header
> dependency rules for partial rebuilds.
>
> Although it doesn?t show up particularly in the above statistics, making
> sure that the continuous integration configurations remain ?green? at all
> times is a constant source of attention. Given the number of environments
> tested and the number of dependencies of GDAL, there is hardly a week where
> some action is not needed in that area to make sure that the code builds
> and compiles cleanly, tests pass, etc. We can now track a few rolling
> distributions to detect as early as possible sources of incompatibilities
> with our dependencies, and act early: report issues to upstream if there
> are bugs, or do changes in our code & build scripts to take them into
> account.
>
> Making sure that code contributions from others are reviewed in a timely
> manner is important for the contributor experience. The average delay for a
> submitted pull request (excluding mine) to be commented by me (or merged if
> no comment needed) is 22 hours, and the median time 3h20 (statistics
> gathered on 601 pull requests since August 2021, source script at
> https://gist.github.com/rouault/0fbd37f59b8e93ae63761468a5600262)
>
> In the category of regular tasks, one can also mention: updating the EPSG
> dataset in PROJ (and coordinating with IOGP when detecting issues),
> refreshing vendored of copies in the GDAL source tree (libtiff typically),
> making sure that new SQLite releases play nicely with PROJ which has some
> stressing SQL queries (we spot recently a performance regression in SQLite
> 3.41.0 and reported it to upstream)
>
> The following RFCs have been implemented (not mentioning a few procedural
> ones) thanks to the sponsorship:
>
>    -
>
>    RFC 87: Signed int8 data type for raster
>    <https://gdal.org/development/rfc/rfc87_signed_int8.html>
>    -
>
>    RFC 88: Use GoogleTest framework for C/C++ unit tests
>    <https://gdal.org/development/rfc/rfc88_googletest.html>
>    -
>
>    RFC 90: Direct access to compressed raster data
>    <https://gdal.org/development/rfc/rfc90_read_compressed_data.html>
>    -
>
>    RFC 91: GDALDataset::Close() method
>    <https://gdal.org/development/rfc/rfc91_dataset_close.html>
>    -
>
>    RFC 93: OGRLayer::UpdateFeature() method
>    <https://gdal.org/development/rfc/rfc93_update_feature.html>
>
>
> Other recent significant work includes enhancements in Python exception
> handling (in preparation for enabling them by default in a future 4.0
> release), and enabling them in the regression test suite and utilities.
>
> The following feature releases have been issued: 3.4.0, 3.5.0 and 3.6.0.
> And the following bug fixes releases: 3.3.2, 3.3.3, 3.4.1, 3.4.2, 3.4.3,
> 3.5.1, 3.5.2, 3.6.1, 3.6.2 and 3.6.3
>
> Best regards,
>
> Even
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230327/6dfd47a7/attachment-0001.htm>

From stenger at lat-lon.de  Tue Mar 28 12:11:44 2023
From: stenger at lat-lon.de (Dirk Stenger)
Date: Tue, 28 Mar 2023 21:11:44 +0200
Subject: [gdal-dev] GDAL Docker Build fails
Message-ID: <8ceb8c2a-124d-d04d-3364-7da04be989a7@lat-lon.de>

All,

Currently, the GDAL Docker Build fails:

/~/git/gdal$ docker/ubuntu-full/build.sh --platform linux/amd64//
//...//
//?---> Running in c13d037d7761//
//Downloading cache...//
//rsync: [sender] change_dir "osgeo/gdal:ubuntu-full/proj/x86_64" (in 
gdal-docker-cache) failed: No such file or directory (2)//
//rsync error: some files/attrs were not transferred (see previous 
errors) (code 23) at main.c(1865) [Receiver=3.2.7]//
//rsync: [Receiver] read error: Connection reset by peer (104)//
//The command '/bin/sh -c . /buildscripts/bh-set-envvars.sh ? ? && 
DESTDIR=/build_tmp_proj /buildscripts/bh-proj.sh ? ? ?&& 
LD_LIBRARY_PATH=/build_tmp_proj/usr/local/lib 
/build_tmp_proj/usr/local/bin/projsync --target-dir /tmp/proj_grids 
--all ? ? ?&& rm -rf /build_tmp_proj' returned a non-zero code: 23/

A couple of days ago, I was still able to build it (v3.5).

Kind regards,

Dirk Stenger
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230328/ed89f623/attachment.htm>

From even.rouault at spatialys.com  Tue Mar 28 13:00:25 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 28 Mar 2023 22:00:25 +0200
Subject: [gdal-dev] GDAL Docker Build fails
In-Reply-To: <8ceb8c2a-124d-d04d-3364-7da04be989a7@lat-lon.de>
References: <8ceb8c2a-124d-d04d-3364-7da04be989a7@lat-lon.de>
Message-ID: <9f17082a-8da4-931e-6c87-e04905b805f7@spatialys.com>

Dirk,

Le 28/03/2023 ? 21:11, Dirk Stenger a ?crit?:
>
> All,
>
> Currently, the GDAL Docker Build fails:
>
> /~/git/gdal$ docker/ubuntu-full/build.sh --platform linux/amd64//
> //...//
> //?---> Running in c13d037d7761//
> //Downloading cache...//
> //rsync: [sender] change_dir "osgeo/gdal:ubuntu-full/proj/x86_64" (in 
> gdal-docker-cache) failed: No such file or directory (2)//
> //rsync error: some files/attrs were not transferred (see previous 
> errors) (code 23) at main.c(1865) [Receiver=3.2.7]//
> //rsync: [Receiver] read error: Connection reset by peer (104)//
> //The command '/bin/sh -c . /buildscripts/bh-set-envvars.sh ? ? && 
> DESTDIR=/build_tmp_proj /buildscripts/bh-proj.sh ? ? ?&& 
> LD_LIBRARY_PATH=/build_tmp_proj/usr/local/lib 
> /build_tmp_proj/usr/local/bin/projsync --target-dir /tmp/proj_grids 
> --all ? ? ?&& rm -rf /build_tmp_proj' returned a non-zero code: 23/
>
> A couple of days ago, I was still able to build it (v3.5).
>
Make sure you update on latest git. If you're on the 3.5 branch, I'm not 
sure its build scripts will work properly with latest master

But given where the error occurs, I suspect this might be something 
related to downloading PROJ remote grids. There has been a new grid 
added today and the indexes refreshed. Perhaps there has been some 
out-of-sync issue with CloudFront. I suggest you just retry, a few times 
if needed (that just worked fine for me without any need for retry, but 
we might not hit the same CloudFront instances)

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230328/5a5fea06/attachment.htm>

From stenger at lat-lon.de  Wed Mar 29 03:52:03 2023
From: stenger at lat-lon.de (Dirk Stenger)
Date: Wed, 29 Mar 2023 12:52:03 +0200
Subject: [gdal-dev] GDAL Docker Build fails
In-Reply-To: <9f17082a-8da4-931e-6c87-e04905b805f7@spatialys.com>
References: <8ceb8c2a-124d-d04d-3364-7da04be989a7@lat-lon.de>
 <9f17082a-8da4-931e-6c87-e04905b805f7@spatialys.com>
Message-ID: <e6cd5728-9b0a-520b-a2d2-55b363ef3703@lat-lon.de>

Even,

Unfortunately, the builds still fail with the same error messages today.

I tried following setups:

- Branch: /master/; Command: /docker/ubuntu-full/build.sh --platform 
linux/amd64/

- Branch: /release/3.5/; Command: /docker/ubuntu-full/build.sh 
--platform linux/amd64 --gdal v3.5.3/

I am on the latest git status in both cases.

I also deleted the /gdal-docker-cache /by executing/rm -rf 
~/gdal-docker-cache /but it did not solve the problem.

Regards,

Dirk



Am 28.03.23 um 22:00 schrieb Even Rouault:
>
> Dirk,
>
> Le 28/03/2023 ? 21:11, Dirk Stenger a ?crit?:
>>
>> All,
>>
>> Currently, the GDAL Docker Build fails:
>>
>> /~/git/gdal$ docker/ubuntu-full/build.sh --platform linux/amd64//
>> //...//
>> //?---> Running in c13d037d7761//
>> //Downloading cache...//
>> //rsync: [sender] change_dir "osgeo/gdal:ubuntu-full/proj/x86_64" (in 
>> gdal-docker-cache) failed: No such file or directory (2)//
>> //rsync error: some files/attrs were not transferred (see previous 
>> errors) (code 23) at main.c(1865) [Receiver=3.2.7]//
>> //rsync: [Receiver] read error: Connection reset by peer (104)//
>> //The command '/bin/sh -c . /buildscripts/bh-set-envvars.sh ? ? && 
>> DESTDIR=/build_tmp_proj /buildscripts/bh-proj.sh ?&& 
>> LD_LIBRARY_PATH=/build_tmp_proj/usr/local/lib 
>> /build_tmp_proj/usr/local/bin/projsync --target-dir /tmp/proj_grids 
>> --all ? ? ?&& rm -rf /build_tmp_proj' returned a non-zero code: 23/
>>
>> A couple of days ago, I was still able to build it (v3.5).
>>
> Make sure you update on latest git. If you're on the 3.5 branch, I'm 
> not sure its build scripts will work properly with latest master
>
> But given where the error occurs, I suspect this might be something 
> related to downloading PROJ remote grids. There has been a new grid 
> added today and the indexes refreshed. Perhaps there has been some 
> out-of-sync issue with CloudFront. I suggest you just retry, a few 
> times if needed (that just worked fine for me without any need for 
> retry, but we might not hit the same CloudFront instances)
>
> Even
>
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 
l a t / l o n  GmbH
Im Ellig 1                           53343 Wachtberg, Germany
phone ++49 +228 24 333 784
http://www.lat-lon.de                   http://www.deegree.org

lat/lon gesellschaft f?r raumbezogene informationssysteme mbH
Registergericht: Amtsgericht Bonn, HRB 13042
Gesch?ftsf?hrer: Jens Fitzke und Torsten Friebe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230329/1f21c26e/attachment.htm>

From eruiz at aplitop.com  Thu Mar 30 05:01:30 2023
From: eruiz at aplitop.com (Elena Ruiz)
Date: Thu, 30 Mar 2023 12:01:30 +0000
Subject: [gdal-dev] Cannot find proj.db
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.bb10c360-4efc-4646-b365-772285d0f4c7@emailsignatures365.codetwo.com>
Message-ID: <AM0P192MB049841D83ECB6689AC3BD764BB8E9@AM0P192MB0498.EURP192.PROD.OUTLOOK.COM>

Hello,
I am using GDAL 3.6.2 on Windows 11 and am having problems with the following error:

ERROR 1: PROJ: proj_create_from_database: Cannot find proj.db

I have set as environment variable PROJ_LIB= "D:\MDT\V9\bin\gdal\gdal_latest\share"  and PROJ_DATA= "D:\MDT\V9\bin\gdal\gdal_latest\share", as user variable and in the system variable, but it still doesn't work and the file proj.db exits in D:\MDT\V9\bin\gdal\gdal_latest\share  .

D:\MDT\V9\bin\gdal\gdal_latest\x64>gdalwarp -s_srs EPSG:4326 -t_srs EPSG:25831 -r near -of GTiff C:\Users\elena\Downloads\D37531385_0101_DTM.asc C:/Users/elena/Downloads/D37531385_0101_DTM_25831_qgis_.tif
ERROR 1: PROJ: proj_create_from_database: Cannot find proj.db
ERROR 1: Translating source or target SRS failed:
EPSG:4326

The funny thing is that I have the same version of GDAL installed on my computer using Anaconda3, to do tests, and from the anaconda directory it works for me, and if I look in the environment variables I don't see any path that refers to where Anaconda has the Proj.db. Is there another way to set the PROJ_LIB path besides adding an environment variable? Is there any way to know where the PROJ_LIB is looking for my version of GDAL?

C:\Users\elena\Anaconda3\envs\mygdal\Library\bin>gdalwarp -s_srs EPSG:4326 -t_srs EPSG:25831 -r near -of GTiff C:\Users\elena\Downloads\D37531385_0101_DTM.asc C:/Users/elena/Downloads/D37531385_0101_DTM_25831_qgis_.tif
Creating output file that is 1003P x 1201L.
Processing C:\Users\elena\Downloads\D37531385_0101_DTM.asc [1/1] : 0Using internal nodata values (e.g. -9999) for image C:\Users\elena\Downloads\D37531385_0101_DTM.asc.
Copying nodata values from source C:\Users\elena\Downloads\D37531385_0101_DTM.asc to destination C:/Users/elena/Downloads/D37531385_0101_DTM_25831_qgis_.tif.
...10...20...30...40...50...60...70...80...90...100 - done.

Thank you and regards
________________________________

[https://www.aplitop.com/descargas/firma1.jpg]


Elena Ruiz
Sofware Development & Technical Support
Tel. +34 952 43 97 71
eruiz at aplitop.com
Sumatra, 9 - 29190 M?laga (Spain)
www.aplitop.com

[cid:SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png]<https://www.facebook.com/AplitopSL/>   [cid:SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png] <https://twitter.com/aplitop>    [cid:SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png] <https://www.linkedin.com/company/aplitop>    [cid:SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png] <https://www.youtube.com/user/aplitop>


In accordance with the provisions of the European Regulation of Data Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679), we inform you that the data and the information you provide us through this medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions and inform you about our products. The data provided will be kept as long as it does not request its cessation and will not be transferred to third parties except in cases where there is a legal obligation. You have the right to access your personal data, correct inaccurate data or request its deletion when the data is no longer necessary for the purposes that were collected, as well as any rights recognized in the RGPD 2016/679
<https://www.aplitop.com/New/en/443/publication-of-point-clouds-on-web>

<https://www.aplitop.com/New/en/438/tcpmdt-v9-is-here><https://www.aplitop.com/Event/en/429/aplitop-at-intergeo-2022-essen>

<https://www.aplitop.com/Event/en/358/intergeo-2019>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/d9258761/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
Type: image/png
Size: 365 bytes
Desc: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/d9258761/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
Type: image/png
Size: 619 bytes
Desc: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/d9258761/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
Type: image/png
Size: 468 bytes
Desc: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/d9258761/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
Type: image/png
Size: 817 bytes
Desc: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/d9258761/attachment-0003.png>

From csmemoe at aquaveo.com  Thu Mar 30 10:20:44 2023
From: csmemoe at aquaveo.com (Chris Smemoe)
Date: Thu, 30 Mar 2023 11:20:44 -0600
Subject: [gdal-dev] Cannot find proj.db
In-Reply-To: <AM0P192MB049841D83ECB6689AC3BD764BB8E9@AM0P192MB0498.EURP192.PROD.OUTLOOK.COM>
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.bb10c360-4efc-4646-b365-772285d0f4c7@emailsignatures365.codetwo.com>
 <AM0P192MB049841D83ECB6689AC3BD764BB8E9@AM0P192MB0498.EURP192.PROD.OUTLOOK.COM>
Message-ID: <002301d9632b$f644d530$e2ce7f90$@aquaveo.com>

Elena,

 

I have had this same problem.  We have a few methods of setting the location
of the proj.db file.  When we call from C++ (or from python), there?s a
function called OSRSetPROJSearchPaths that?s handy.  If you?re calling from
a command line, you could try setting your environment variable just before
calling your function (set ?PROJ_LIB=c:\path\to\proj\?). I think there?s
also a command line option to set your PROJ_LIB.  You could try adding
?--config PROJ_LIB ?c:\path\to\proj?? to your command line and see what that
does.  I haven?t personally tried it.

 

I haven?t had to do these things as much with the python/conda distributions
of the commandline programs for whatever reason.

 

HTH,

 

Chris

 

From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Elena
Ruiz
Sent: Thursday, March 30, 2023 6:02 AM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Cannot find proj.db

 

Hello, 

I am using GDAL 3.6.2 on Windows 11 and am having problems with the
following error:

 

ERROR 1: PROJ: proj_create_from_database: Cannot find proj.db

 

I have set as environment variable PROJ_LIB=
?D:\MDT\V9\bin\gdal\gdal_latest\share?  and PROJ_DATA=
?D:\MDT\V9\bin\gdal\gdal_latest\share?, as user variable and in the system
variable, but it still doesn't work and the file proj.db exits in
D:\MDT\V9\bin\gdal\gdal_latest\share  .

 

D:\MDT\V9\bin\gdal\gdal_latest\x64>gdalwarp -s_srs EPSG:4326 -t_srs
EPSG:25831 -r near -of GTiff C:\Users\elena\Downloads\D37531385_0101_DTM.asc
C:/Users/elena/Downloads/D37531385_0101_DTM_25831_qgis_.tif

ERROR 1: PROJ: proj_create_from_database: Cannot find proj.db

ERROR 1: Translating source or target SRS failed:

EPSG:4326

 

The funny thing is that I have the same version of GDAL installed on my
computer using Anaconda3, to do tests, and from the anaconda directory it
works for me, and if I look in the environment variables I don't see any
path that refers to where Anaconda has the Proj.db. Is there another way to
set the PROJ_LIB path besides adding an environment variable? Is there any
way to know where the PROJ_LIB is looking for my version of GDAL?

 

C:\Users\elena\Anaconda3\envs\mygdal\Library\bin>gdalwarp -s_srs EPSG:4326
-t_srs EPSG:25831 -r near -of GTiff
C:\Users\elena\Downloads\D37531385_0101_DTM.asc
C:/Users/elena/Downloads/D37531385_0101_DTM_25831_qgis_.tif

Creating output file that is 1003P x 1201L.

Processing C:\Users\elena\Downloads\D37531385_0101_DTM.asc [1/1] : 0Using
internal nodata values (e.g. -9999) for image
C:\Users\elena\Downloads\D37531385_0101_DTM.asc.

Copying nodata values from source
C:\Users\elena\Downloads\D37531385_0101_DTM.asc to destination
C:/Users/elena/Downloads/D37531385_0101_DTM_25831_qgis_.tif.

...10...20...30...40...50...60...70...80...90...100 - done.

 

Thank you and regards

  _____  


  <https://www.aplitop.com/descargas/firma1.jpg> 

Elena Ruiz 
Sofware Development & Technical Support
Tel. +34 952 43 97 71 
eruiz at aplitop.com
Sumatra, 9 - 29190 M?laga (Spain)
www.aplitop.com

 <https://www.facebook.com/AplitopSL/>     <https://twitter.com/aplitop>
<https://www.linkedin.com/company/aplitop>
<https://www.youtube.com/user/aplitop> 

In accordance with the provisions of the European Regulation of Data
Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679), we
inform you that the data and the information you provide us through this
medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with
address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions
and inform you about our products. The data provided will be kept as long as
it does not request its cessation and will not be transferred to third
parties except in cases where there is a legal obligation. You have the
right to access your personal data, correct inaccurate data or request its
deletion when the data is no longer necessary for the purposes that were
collected, as well as any rights recognized in the RGPD 2016/679







-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/71a1a62b/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 718 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/71a1a62b/attachment-0003.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.jpg
Type: image/jpeg
Size: 712 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/71a1a62b/attachment-0004.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.jpg
Type: image/jpeg
Size: 737 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/71a1a62b/attachment-0005.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.png
Type: image/png
Size: 672 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/71a1a62b/attachment-0001.png>

From knudsen.thomas at gmail.com  Thu Mar 30 10:47:36 2023
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Thu, 30 Mar 2023 19:47:36 +0200
Subject: [gdal-dev] Cannot find proj.db
In-Reply-To: <AM0P192MB049841D83ECB6689AC3BD764BB8E9@AM0P192MB0498.EURP192.PROD.OUTLOOK.COM>
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.bb10c360-4efc-4646-b365-772285d0f4c7@emailsignatures365.codetwo.com>
 <AM0P192MB049841D83ECB6689AC3BD764BB8E9@AM0P192MB0498.EURP192.PROD.OUTLOOK.COM>
Message-ID: <CAH0YoENef+-+rkrsm6-nf=VF6yqr2a8DFiQ8L70BSqRjFPAUHw@mail.gmail.com>

Elena,

If your environment variables are set exactly as you write:

> PROJ_LIB= ?D:\MDT\V9\bin\gdal\gdal_latest\share?
> PROJ_DATA= ?D:\MDT\V9\bin\gdal\gdal_latest\share?

you should leave out the apostrophes and the extra space after the equals
sign, i.e.

set PROJ_LIB=D:\MDT\V9\bin\gdal\gdal_latest\share
set PROJ_DATA=D:\MDT\V9\bin\gdal\gdal_latest\share

The PROJ documentation on the subject is over at
https://proj.org/usage/environmentvars.html

/Thomas

Den tors. 30. mar. 2023 kl. 14.01 skrev Elena Ruiz <eruiz at aplitop.com>:

> Hello,
>
> I am using GDAL 3.6.2 on Windows 11 and am having problems with the
> following error:
>
>
>
> ERROR 1: PROJ: proj_create_from_database: Cannot find proj.db
>
>
>
> I have set as environment variable PROJ_LIB=
> ?D:\MDT\V9\bin\gdal\gdal_latest\share?  and PROJ_DATA=
> ?D:\MDT\V9\bin\gdal\gdal_latest\share?, as user variable and in the system
> variable, but it still doesn't work and the file proj.db exits in
> D:\MDT\V9\bin\gdal\gdal_latest\share  .
>
>
>
> D:\MDT\V9\bin\gdal\gdal_latest\x64>gdalwarp -s_srs EPSG:4326 -t_srs
> EPSG:25831 -r near -of GTiff
> C:\Users\elena\Downloads\D37531385_0101_DTM.asc
> C:/Users/elena/Downloads/D37531385_0101_DTM_25831_qgis_.tif
>
> ERROR 1: PROJ: proj_create_from_database: Cannot find proj.db
>
> ERROR 1: Translating source or target SRS failed:
>
> EPSG:4326
>
>
>
> The funny thing is that I have the same version of GDAL installed on my
> computer using Anaconda3, to do tests, and from the anaconda directory it
> works for me, and if I look in the environment variables I don't see any
> path that refers to where Anaconda has the Proj.db. Is there another way to
> set the PROJ_LIB path besides adding an environment variable? Is there any
> way to know where the PROJ_LIB is looking for my version of GDAL?
>
>
>
> C:\Users\elena\Anaconda3\envs\mygdal\Library\bin>gdalwarp -s_srs EPSG:4326
> -t_srs EPSG:25831 -r near -of GTiff
> C:\Users\elena\Downloads\D37531385_0101_DTM.asc
> C:/Users/elena/Downloads/D37531385_0101_DTM_25831_qgis_.tif
>
> Creating output file that is 1003P x 1201L.
>
> Processing C:\Users\elena\Downloads\D37531385_0101_DTM.asc [1/1] : 0Using
> internal nodata values (e.g. -9999) for image
> C:\Users\elena\Downloads\D37531385_0101_DTM.asc.
>
> Copying nodata values from source
> C:\Users\elena\Downloads\D37531385_0101_DTM.asc to destination
> C:/Users/elena/Downloads/D37531385_0101_DTM_25831_qgis_.tif.
>
> ...10...20...30...40...50...60...70...80...90...100 - done.
>
>
>
> Thank you and regards
> ------------------------------
>
> *Elena Ruiz *
> Sofware Development & Technical Support
> Tel. +34 952 43 97 71
> eruiz at aplitop.com
> Sumatra, 9 - 29190 M?laga (Spain)
>
>
> *www.aplitop.com <http://www.aplitop.com>
> <https://www.facebook.com/AplitopSL/>   <https://twitter.com/aplitop>
> <https://www.linkedin.com/company/aplitop>
> <https://www.youtube.com/user/aplitop>*
>
> In accordance with the provisions of the European Regulation of Data
> Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679),
> we inform you that the data and the information you provide us through this
> medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with
> address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions
> and inform you about our products. The data provided will be kept as long
> as it does not request its cessation and will not be transferred to third
> parties except in cases where there is a legal obligation. You have the
> right to access your personal data, correct inaccurate data or request its
> deletion when the data is no longer necessary for the purposes that were
> collected, as well as any rights recognized in the RGPD 2016/679
> <https://www.aplitop.com/New/en/443/publication-of-point-clouds-on-web>
>
>
> <https://www.aplitop.com/New/en/438/tcpmdt-v9-is-here>
> <https://www.aplitop.com/Event/en/429/aplitop-at-intergeo-2022-essen>
>
> <https://www.aplitop.com/Event/en/358/intergeo-2019>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/e8b729cd/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
Type: image/png
Size: 365 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/e8b729cd/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
Type: image/png
Size: 619 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/e8b729cd/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
Type: image/png
Size: 468 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/e8b729cd/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
Type: image/png
Size: 817 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/e8b729cd/attachment-0003.png>

From even.rouault at spatialys.com  Thu Mar 30 13:30:23 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 30 Mar 2023 22:30:23 +0200
Subject: [gdal-dev] Data corruption when using OpenFileGDB writing and
 SetFeature()
Message-ID: <e872c493-6e4c-d225-ea11-fcae048fac2f@spatialys.com>

Hi,

just to notify that we have had recently a few reports of users using 
the write side of the OpenFileGDB driver, and SetFeature() to update 
existing features.

This proved to cause data corruptions in some situations, sometimes with 
an error message on re-reading or when regenerating the spatial index, 
but not always. The same could also likely happen with DeleteFeature() + 
CreateFeature() scenarios, basically all situations where the driver 
tries to re-use a freed space by using the .freelist file where free 
spaces are recorded.

Creation of a new file or appending to a file whose features have never 
been edited or deleted is OK though. You may also workaround the bug by 
doing one SetFeature() operation at a time, closing the dataset, and 
deleting the .freelist files in the .gdb directory, before re-opening 
and doing the next edition, but that's likely to be unpractical & 
inefficient.

The bug has now been fixed in master and 3.6 branches, but affects 3.6.0 
to 3.6.3 releases. I'll issue a 3.6.4 in ~2 weeks.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From andrew at avenza.com  Thu Mar 30 17:28:54 2023
From: andrew at avenza.com (Andrew Patterson)
Date: Thu, 30 Mar 2023 20:28:54 -0400
Subject: [gdal-dev] Building GDAL with autoconf for Android on Windows
Message-ID: <CAC8biO2hrifYT0M4nxZ1YSD_C2TAFFSsFFUcFNuCtCCTVgB8QQ@mail.gmail.com>

Hello!

We've been using a custom CMakeLists.txt for years to build a subset of
GDAL for Android but I'm attempting to move us to building it properly.
Unfortunately, we can't move to 3.5+ quite yet (I'm hoping soon) so I'm
stuck with autoconf. I was happily surprised at how quickly I passed
through the configure step (many thanks Google's NDK page with a very
helpful autoconf section) but now I'm running into a rather stupid blocker.

I'm building this using git bash on a Windows machine, and I suspect that's
the root of my problem. Basically, when I run make on my configured system,
it screws up the quoting on INST_DATA & SYSCONF_DIR. The command being
executed looks something like:

... yada yada ... -DINST_DATA=\"/c/prefix_path/shared\"
-DSYSCONF_DIR=\"/c/prefix_path/etc\"

If I copy the command being executed and change that part to:

... yada yada ... -DINST_DATA="\"/c/prefix_path/shared\""
-DSYSCONF_DIR="\"/c/prefix_path/etc\""

It works. It also works if fully remove the defines for INST_DATA &
SYSCONF_DIR, which I know is safe because we never defined those in our old
CMakeLists.txt and everything worked fine (we were specifying the properly
locations ahead of time so it never needed to look in any default places).

Now, obviously manually copying the commands isn't the right fix, but maybe
someone knows how to fix the quoting? Or, frankly, is there an option I'm
missing (or some other magic trick) to tell it not to include INST_DATA or
SYSCONF_DIR at all?

Any help here would be greatly appreciated! This looked like it was going
to be a quick job and it turned into a frustrating full-day failure :(

[image: Avenza Systems Logo]
<https://www.google.com/url?q=https://www.avenza.com/&source=gmail-html&ust=1678977468213000&usg=AOvVaw3ajVwWQPLnJ8kVQuKtUNKi>

*Andrew Patterson*
Desktop Lead Architect

+1 (416) 487-5116 x401
84 Merton St., Toronto, ON, M4S 1A1

///supply.founders.outreach
<https://www.google.com/url?q=https://www.avenza.com/about/contact/&source=gmail-html&ust=1678977468213000&usg=AOvVaw0_nt7MnUyk1lGZCRk6wICQ>
[image: AvenzaUC2023 Banner]
<https://www.google.com/url?q=https://www.avenza.com/user-conference/&source=gmail-html&ust=1678977468213000&usg=AOvVaw2Uj9MQv3vk5IzdDU7m0ycG>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230330/0d2425d8/attachment.htm>

From traviskirstine at gmail.com  Fri Mar 31 08:54:11 2023
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Fri, 31 Mar 2023 11:54:11 -0400
Subject: [gdal-dev] Off topic COG question
Message-ID: <CALtm4h0rkqsFic8JHkB6rBBxm1gODREfzaVZG0HDuTMHYdNQvQ@mail.gmail.com>

Sorry to post this unrelated question to the GDAL group but I was hoping
someone could provide some recommendations.  Does anybody know of a way to
efficiently publish a WTMS / TMS from a COG source.  I know I can use
something like MapServer / Mapcache or GeoServer can use the cog as a
raster source but this seems like additional overhead as the COG internal
tiling and overview structure is already optimized.  I know of titiler but
that is about it.  https://github.com/developmentseed/titiler

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230331/ee4646e0/attachment.htm>

From mdsumner at gmail.com  Fri Mar 31 14:46:24 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 1 Apr 2023 08:46:24 +1100
Subject: [gdal-dev] Off topic COG question
In-Reply-To: <CALtm4h0rkqsFic8JHkB6rBBxm1gODREfzaVZG0HDuTMHYdNQvQ@mail.gmail.com>
References: <CALtm4h0rkqsFic8JHkB6rBBxm1gODREfzaVZG0HDuTMHYdNQvQ@mail.gmail.com>
Message-ID: <CAAcGz99TVuAfiFKSgAfu-fHGrgxg0SC7_nx_DWjQgSRC=Wd__g@mail.gmail.com>

I saw this : https://github.com/mapbox/COGDumper

On Sat, 1 Apr 2023, 02:54 Travis Kirstine, <traviskirstine at gmail.com> wrote:

> Sorry to post this unrelated question to the GDAL group but I was hoping
> someone could provide some recommendations.  Does anybody know of a way to
> efficiently publish a WTMS / TMS from a COG source.  I know I can use
> something like MapServer / Mapcache or GeoServer can use the cog as a
> raster source but this seems like additional overhead as the COG internal
> tiling and overview structure is already optimized.  I know of titiler but
> that is about it.  https://github.com/developmentseed/titiler
>
> Thanks
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230401/aee4f6ee/attachment.htm>

From mdsumner at gmail.com  Fri Mar 31 22:24:21 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Sat, 1 Apr 2023 16:24:21 +1100
Subject: [gdal-dev] recent change?, issue with OGRGeometryFactory in R
Message-ID: <CAAcGz98+3BTib0VK8NAe2c5NTeWMbBR5VA1cXYuMvcA07TRQsg@mail.gmail.com>

Hi,

I'm here to ask for help finding where this issue is. If I use an earlier
build it still works (these are R packages sf and terra that are well
tested against previous releases).

Has something changed with the headers structure for OGRGeometryFactory
perhaps? (I'm out of my depth for how to track this down).   If it's an
issue on the R side I'll fix it there, but mostly I'm here to ask what has
changed on the GDAL side to result in this symbol problem (or whatever it
is I'm doing wrong).

using latest build  24afc75d3c3f2c85621e8b8d83f54a73b1d3ad33

I see

> library(sf)
Error: package or namespace load failed for ?sf? in dyn.load(file, DLLpath
= DLLpath, ...):
 unable to load shared object '/usr/local/lib/R/site-library/sf/libs/sf.so':
  /usr/local/lib/R/site-library/sf/libs/sf.so: undefined symbol:
_ZN18OGRGeometryFactory13createFromWktEPKcP19OGRSpatialReferencePP11OGRGeometry
> library(terra)
Error: package or namespace load failed for ?terra? in dyn.load(file,
DLLpath = DLLpath, ...):
 unable to load shared object
'/usr/local/lib/R/site-library/terra/libs/terra.so':
  /usr/local/lib/R/site-library/terra/libs/terra.so: undefined symbol:
_ZN18OGRGeometryFactory13createFromWktEPKcP19OGRSpatialReferencePP11OGRGeometry

Using a prior build eca6f7bf17fe500ef4c0ba9793e93ea305bab1fc it works.

The offending code in terra is this (I think)

https://github.com/rspatial/terra/blob/ddcf84ce901a269ac13118d650efac16f89a8602/src/read_ogr.cpp#L694

In sf it is


https://github.com/r-spatial/sf/blob/main/src/gdal_read.cpp#L582
Thank you.

Cheers, Mike


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230401/92da5f51/attachment.htm>

