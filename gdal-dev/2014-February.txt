From jukka.rahkonen at mmmtike.fi  Sat Feb  1 05:08:32 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat, 1 Feb 2014 13:08:32 +0000 (UTC)
Subject: [gdal-dev] Fast Pixel Access
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
Message-ID: <loom.20140201T134421-608@post.gmane.org>

David Baker (Geoscience <david.m.baker <at> chk.com> writes:

> 
> 
> 
> Dev?s,
> ?
> I have a set of 55,501 bil files in a single directory.? They are DEMS
data that cover the US in 7.5 minute tiles.? I would like to randomly access
elevations at a given lat/lon?s from the whole dataset.? I created a vrt
file from the directory
>  of bil files, and have been able to access the elevation at a given
lat/lon using gdallocationinfo, but because of the size of the dataset, this
operation is somewhat slow.? Can the vrt be indexed? Or, is there a faster,
better way to access the pixels?? I
>  would first like to do this with the utilities before diving into code
(C#).? The files are regularly named base on their location within a 1
arc-second grid.

I was experimenting with something like a "GIS service without a GIS server)
and I have some examples online but because of http connection the speed
comparison does not make sense.

Vrt combining biomass data from 13 single band tif files
gdallocationinfo
/vsicurl/http://latuviitta.kapsi.fi/data/metla/puuston_tilavuus.vrt -geoloc
 389559 6677412

DEM of Finland with 10x10 m grid through vrt
gdallocationinfo /vsicurl/http://latuviitta.kapsi.fi/data/dem10m/dem_10m.vrt
-geoloc  389559 6677412

The same from a single BigTIFF
gdallocationinfo /vsicurl/http://latuviitta.kapsi.fi/data/dem10m/dem_10m.tif
-geoloc  389559 6677412

Feel free to download the originals if you want, they are all made from open
data. Just mention the National Land Survey of Finland, 2013 for the DEM and
Finnish Forest Reserch Institute, 2013 for the biomass data if you publish
data somewhere. The DEM datasets are about 10 GB each (Bigtiff + the
original small ones).

My tiffs have tiles but for this usage where only the value of a single
pixel is interesting striped tiffs could be as fast to read than tiled
tiffs. A trial would tell everything

-Jukka Rahkonen-



From david.m.baker at chk.com  Sat Feb  1 06:04:46 2014
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Sat, 1 Feb 2014 14:04:46 +0000
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <201402010827.32484.even.rouault@mines-paris.org>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<201401311930.02592.even.rouault@mines-paris.org>
	<1391210594.14221.97.camel@octopi>
	<201402010827.32484.even.rouault@mines-paris.org>
Message-ID: <2A18A4344312134B937DF938D992264A05099522@OKCEXHPRD121.chkenergy.net>

Evan,

I am not sure how to profile as I do not have access to the code to profile.  I did do a timing test...

vrt file = 22,970 KB
bil file = 35,180 KB * 55,501

I piped five locations from the loc.txt file:
-96.0 36.0
-98.0 37.0
-100.0 38.0
-99.0 39.0
-101.0 35.0

gdallocationinfo -valonly -geoloc intermap.vrt < loc.txt
189.841857910156        25.5 sec
384.857452392578        22.6 sec
762.015930175781        22.9 sec
550.719116210938        23.6 sec
883.637023925781        22.9 sec

Note: I used a lap timer on my iPhone to capture the split times as the results appeared in the console window.  Does this give any insight?

David

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Even Rouault
Sent: Saturday, February 01, 2014 1:28 AM
To: Brian Case
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Fast Pixel Access

Le samedi 01 f?vrier 2014 00:23:13, Brian Case a ?crit :
> evenr
>
>
> what about the use of a tileindex?

You really mean a tileindex as produced by gdaltindex ? Well, that's not
exactly the same beast as a VRT, but yes if it was recognized as a GDAL
dataset then you could potentially save the cost of XML parsing. One could
imagine that the VRT driver would accept a tileindex as an altenate connection
string.

Anyway it would be interesting to first profile where the time is spent in David
use case. If it's in the XML parsing, then I can't see what could be easily
improved in that area. If it's the intersection, then there's potential for
improvement.

> seems an intersection with a set of
> polys first would be quick


>
> brian
>
> On Fri, 2014-01-31 at 19:30 +0100, Even Rouault wrote:
> > Le vendredi 31 janvier 2014 17:15:53, David Baker (Geoscience) a ?crit :
> > > Dev's,
> > >
> > > I have a set of 55,501 bil files in a single directory.  They are DEMS
> > > data that cover the US in 7.5 minute tiles.  I would like to randomly
> > > access elevations at a given lat/lon's from the whole dataset.  I
> > > created a vrt file from the directory of bil files, and have been able
> > > to access the elevation at a given lat/lon using gdallocationinfo, but
> > > because of the size of the dataset, this operation is somewhat slow.
> > > Can the vrt be indexed?
> >
> > No, it isn't currently, although I think it could be improved to have a
> > in- memory index with moderate effort.
> >
> > But are you sure the slowness is due to the lack of index ? 55,000 is a
> > big number, but not that big. Maybe the slowness just comes from the
> > opening time (XML parsing) of such a big VRT. That would need to be
> > profiled to be sure where the bottleneck is.
> >
> > > Or, is there a faster, better way to access the pixels?  I would
> > > first like to do this with the utilities before diving into code (C#).
> > > The files are regularly named base on their location within a 1
> > > arc-second grid.
> > >
> > > Thanks,
> > > David
> > >
> > > David M. Baker
> > > Senior Advisor - Geoscience Technology
> > > Chesapeake Energy Corporation
> > > david.m.baker at chk.com<mailto:david.m.baker at chk.com>
> > >
> > >
> > > ________________________________
> > >
> > > This email (and attachments if any) is intended only for the use of the
> > > individual or entity to which it is addressed, and may contain
> > > information that is confidential or privileged and exempt from
> > > disclosure under applicable law. If the reader of this email is not
> > > the intended recipient, or the employee or agent responsible for
> > > delivering this message to the intended recipient, you are hereby
> > > notified that any dissemination, distribution or copying of this
> > > communication is strictly prohibited. If you have received this
> > > communication in error, please notify the sender immediately by return
> > > email and destroy all copies of the email (and attachments if any).

--
Geospatial professional services
http://even.rouault.free.fr/services.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is confidential or privileged and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).

From david.m.baker at chk.com  Sat Feb  1 06:14:06 2014
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Sat, 1 Feb 2014 14:14:06 +0000
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <loom.20140201T134421-608@post.gmane.org>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
Message-ID: <2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>

Jukka,

Jukka wrote:
>I was experimenting with something like a "GIS service without a GIS server)
>and I have some examples online but...

I am looking to do as you have, a RESTful service to query the elevation at a given location.  This will be used to in a DQM process as well as a geologic application that needs the elevation of a proposed wellsite for data mining.  In both cases, 1000's if not tens of 1000's of calls will be made so performance is an issue.

David


-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Jukka Rahkonen
Sent: Saturday, February 01, 2014 7:09 AM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Fast Pixel Access

David Baker (Geoscience <david.m.baker <at> chk.com> writes:

>
>
>
> Dev?s,
>
> I have a set of 55,501 bil files in a single directory.  They are DEMS
data that cover the US in 7.5 minute tiles.  I would like to randomly access
elevations at a given lat/lon?s from the whole dataset.  I created a vrt
file from the directory
>  of bil files, and have been able to access the elevation at a given
lat/lon using gdallocationinfo, but because of the size of the dataset, this
operation is somewhat slow.  Can the vrt be indexed? Or, is there a faster,
better way to access the pixels?  I
>  would first like to do this with the utilities before diving into code
(C#).  The files are regularly named base on their location within a 1
arc-second grid.

I was experimenting with something like a "GIS service without a GIS server)
and I have some examples online but because of http connection the speed
comparison does not make sense.

Vrt combining biomass data from 13 single band tif files
gdallocationinfo
/vsicurl/http://latuviitta.kapsi.fi/data/metla/puuston_tilavuus.vrt -geoloc
 389559 6677412

DEM of Finland with 10x10 m grid through vrt
gdallocationinfo /vsicurl/http://latuviitta.kapsi.fi/data/dem10m/dem_10m.vrt
-geoloc  389559 6677412

The same from a single BigTIFF
gdallocationinfo /vsicurl/http://latuviitta.kapsi.fi/data/dem10m/dem_10m.tif
-geoloc  389559 6677412

Feel free to download the originals if you want, they are all made from open
data. Just mention the National Land Survey of Finland, 2013 for the DEM and
Finnish Forest Reserch Institute, 2013 for the biomass data if you publish
data somewhere. The DEM datasets are about 10 GB each (Bigtiff + the
original small ones).

My tiffs have tiles but for this usage where only the value of a single
pixel is interesting striped tiffs could be as fast to read than tiled
tiffs. A trial would tell everything

-Jukka Rahkonen-


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is confidential or privileged and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).

From nhv at cape.com  Sat Feb  1 06:23:13 2014
From: nhv at cape.com (Norman Vine)
Date: Sat, 1 Feb 2014 09:23:13 -0500
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
	<2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
Message-ID: <34752D31-E2DF-4996-99F1-685EA90C0124@cape.com>

This is an application that is just screaming for a spatial index

For starters you could build a spatialite db of the individual file extents
that returned the filename to pass to gdallocationinfo

On Feb 1, 2014, at 9:14 AM, "David Baker (Geoscience)" <david.m.baker at chk.com> wrote:

> Jukka,
> 
> Jukka wrote:
>> I was experimenting with something like a "GIS service without a GIS server)
>> and I have some examples online but...
> 
> I am looking to do as you have, a RESTful service to query the elevation at a given location.  This will be used to in a DQM process as well as a geologic application that needs the elevation of a proposed wellsite for data mining.  In both cases, 1000's if not tens of 1000's of calls will be made so performance is an issue.
> 
> David
> 
> 
> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Jukka Rahkonen
> Sent: Saturday, February 01, 2014 7:09 AM
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Fast Pixel Access
> 
> David Baker (Geoscience <david.m.baker <at> chk.com> writes:
> 
>> 
>> 
>> 
>> Dev?s,
>> 
>> I have a set of 55,501 bil files in a single directory.  They are DEMS
> data that cover the US in 7.5 minute tiles.  I would like to randomly access
> elevations at a given lat/lon?s from the whole dataset.  I created a vrt
> file from the directory
>> of bil files, and have been able to access the elevation at a given
> lat/lon using gdallocationinfo, but because of the size of the dataset, this
> operation is somewhat slow.  Can the vrt be indexed? Or, is there a faster,
> better way to access the pixels?  I
>> would first like to do this with the utilities before diving into code
> (C#).  The files are regularly named base on their location within a 1
> arc-second grid.
> 
> I was experimenting with something like a "GIS service without a GIS server)
> and I have some examples online but because of http connection the speed
> comparison does not make sense.
> 
> Vrt combining biomass data from 13 single band tif files
> gdallocationinfo
> /vsicurl/http://latuviitta.kapsi.fi/data/metla/puuston_tilavuus.vrt -geoloc
> 389559 6677412
> 
> DEM of Finland with 10x10 m grid through vrt
> gdallocationinfo /vsicurl/http://latuviitta.kapsi.fi/data/dem10m/dem_10m.vrt
> -geoloc  389559 6677412
> 
> The same from a single BigTIFF
> gdallocationinfo /vsicurl/http://latuviitta.kapsi.fi/data/dem10m/dem_10m.tif
> -geoloc  389559 6677412
> 
> Feel free to download the originals if you want, they are all made from open
> data. Just mention the National Land Survey of Finland, 2013 for the DEM and
> Finnish Forest Reserch Institute, 2013 for the biomass data if you publish
> data somewhere. The DEM datasets are about 10 GB each (Bigtiff + the
> original small ones).
> 
> My tiffs have tiles but for this usage where only the value of a single
> pixel is interesting striped tiffs could be as fast to read than tiled
> tiffs. A trial would tell everything
> 
> -Jukka Rahkonen-
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> ________________________________
> 
> This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is confidential or privileged and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140201/3a4be281/attachment-0001.html>

From david.m.baker at chk.com  Sat Feb  1 06:40:14 2014
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Sat, 1 Feb 2014 14:40:14 +0000
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <34752D31-E2DF-4996-99F1-685EA90C0124@cape.com>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
	<2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
	<34752D31-E2DF-4996-99F1-685EA90C0124@cape.com>
Message-ID: <2A18A4344312134B937DF938D992264A0509D049@OKCEXHPRD121.chkenergy.net>

Norman,

Yes it does...  At first I am looking to see if I can do this "off the shelf" with just the tools in the GDAL/ORG toolset.  Are you thinking of using OGR to do the spatial query with the spatialite db?  Would a .qix indexed tile index shapefile work?

David


From: Norman Vine [mailto:nhv at cape.com]
Sent: Saturday, February 01, 2014 8:23 AM
To: David Baker (Geoscience)
Cc: gdal-dev
Subject: Re: [gdal-dev] Fast Pixel Access

This is an application that is just screaming for a spatial index

For starters you could build a spatialite db of the individual file extents
that returned the filename to pass to gdallocationinfo

On Feb 1, 2014, at 9:14 AM, "David Baker (Geoscience)" <david.m.baker at chk.com<mailto:david.m.baker at chk.com>> wrote:


Jukka,

Jukka wrote:

I was experimenting with something like a "GIS service without a GIS server)
and I have some examples online but...

I am looking to do as you have, a RESTful service to query the elevation at a given location.  This will be used to in a DQM process as well as a geologic application that needs the elevation of a proposed wellsite for data mining.  In both cases, 1000's if not tens of 1000's of calls will be made so performance is an issue.

David


-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org> [mailto:gdal-dev-bounces at lists.osgeo.org<mailto:dev-bounces at lists.osgeo.org>] On Behalf Of Jukka Rahkonen
Sent: Saturday, February 01, 2014 7:09 AM
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Fast Pixel Access

David Baker (Geoscience <david.m.baker <at> chk.com<http://chk.com>> writes:





Dev's,

I have a set of 55,501 bil files in a single directory.  They are DEMS
data that cover the US in 7.5 minute tiles.  I would like to randomly access
elevations at a given lat/lon's from the whole dataset.  I created a vrt
file from the directory

of bil files, and have been able to access the elevation at a given
lat/lon using gdallocationinfo, but because of the size of the dataset, this
operation is somewhat slow.  Can the vrt be indexed? Or, is there a faster,
better way to access the pixels?  I

would first like to do this with the utilities before diving into code
(C#).  The files are regularly named base on their location within a 1
arc-second grid.

I was experimenting with something like a "GIS service without a GIS server)
and I have some examples online but because of http connection the speed
comparison does not make sense.

Vrt combining biomass data from 13 single band tif files
gdallocationinfo
/vsicurl/http://latuviitta.kapsi.fi/data/metla/puuston_tilavuus.vrt -geoloc
389559 6677412

DEM of Finland with 10x10 m grid through vrt
gdallocationinfo /vsicurl/http://latuviitta.kapsi.fi/data/dem10m/dem_10m.vrt
-geoloc  389559 6677412

The same from a single BigTIFF
gdallocationinfo /vsicurl/http://latuviitta.kapsi.fi/data/dem10m/dem_10m.tif
-geoloc  389559 6677412

Feel free to download the originals if you want, they are all made from open
data. Just mention the National Land Survey of Finland, 2013 for the DEM and
Finnish Forest Reserch Institute, 2013 for the biomass data if you publish
data somewhere. The DEM datasets are about 10 GB each (Bigtiff + the
original small ones).

My tiffs have tiles but for this usage where only the value of a single
pixel is interesting striped tiffs could be as fast to read than tiled
tiffs. A trial would tell everything

-Jukka Rahkonen-


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is confidential or privileged and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev


________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is confidential or privileged and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140201/0510b2b6/attachment.html>

From jukka.rahkonen at mmmtike.fi  Sat Feb  1 08:43:33 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat, 1 Feb 2014 16:43:33 +0000 (UTC)
Subject: [gdal-dev] Fast Pixel Access
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
	<2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
Message-ID: <loom.20140201T164744-319@post.gmane.org>

David Baker (Geoscience <david.m.baker <at> chk.com> writes:

> 
> Jukka,
> 
> Jukka wrote:
> >I was experimenting with something like a "GIS service without a GIS server)
> >and I have some examples online but...
> 
> I am looking to do as you have, a RESTful service to query the elevation
at a given location.  This will be used
> to in a DQM process as well as a geologic application that needs the
elevation of a proposed wellsite for
> data mining.  In both cases, 1000's if not tens of 1000's of calls will be
made so performance is an issue.

I don't believe that gdallocationinfo is the right thing for you. There are
only 60 seconds in a minute and our experiments show that each request takes
seconds or even tens of seconds. Your users will hang you.

Now what to do instead? A WMS/WCS service can send a piece of DEM with
thousands of pixels as GeoTIFF in a second and a heavy client like QGIS
could continue the analysis. Or you can use the existing vrt file and read
the region of interest with gdal_translate. This request is not very fast
either but it brings you one million height values faster than possible
users could find the rope
gdal_translate -of GTiff -srcwin 10000 10000 1000 1000
/vsicurl/http://latuviitta.kapsi.fi/data/dem10m/dem_10m.vrt test_1000by1000.tif

Or then WFS service could be used to send only thos DEM cells which
intersect the requested point/line/area. That could be nice for further
processing  but in that case your DEM should be converted into points or
polygons. I wonder if PostGIS raster has something to give for you. Or
perhaps there is some other clever way to do the job with light and powerful
tools. Ideas are welcome.

-Jukka Rahkonen-


From jluis at ualg.pt  Sat Feb  1 09:14:00 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat, 01 Feb 2014 17:14:00 +0000
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <loom.20140201T164744-319@post.gmane.org>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
	<2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
	<loom.20140201T164744-319@post.gmane.org>
Message-ID: <52ED2B58.80700@ualg.pt>


> Now what to do instead? A WMS/WCS service can send a piece of DEM with
> thousands of pixels as GeoTIFF in a second and a heavy client like QGIS
> could continue the analysis. Or you can use the existing vrt file and read
> the region of interest with gdal_translate. This request is not very fast
> either but it brings you one million height values faster than possible
> users could find the rope
> gdal_translate -of GTiff -srcwin 10000 10000 1000 1000
> /vsicurl/http://latuviitta.kapsi.fi/data/dem10m/dem_10m.vrt test_1000by1000.tif
>
> Or then WFS service could be used to send only thos DEM cells which
> intersect the requested point/line/area. That could be nice for further
> processing  but in that case your DEM should be converted into points or
> polygons. I wonder if PostGIS raster has something to give for you. Or
> perhaps there is some other clever way to do the job with light and powerful
> tools. Ideas are welcome.

Funny, I had tried this idea with GMT, but took an awful long time ~34 s 
while the gdallocationinfo approach took ~14 secs

echo 389559 6677412 | grdtrack 
-G/vsicurl/http://latuviitta.kapsi.fi/data/dem10m/dem_10m.vrt 
-R389000/390000/6677400/6678000

I have idea why through GMT it takes longer since it's still GDAL who 
gets the data from the remote location. And furthermore I require only a 
small grid chunk (the -R... limits)

Joaquim


From daniel.clewley at gmail.com  Sat Feb  1 11:45:27 2014
From: daniel.clewley at gmail.com (Daniel Clewley)
Date: Sat, 1 Feb 2014 11:45:27 -0800
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <mailman.9673.1391185283.24729.gdal-dev@lists.osgeo.org>
References: <mailman.9673.1391185283.24729.gdal-dev@lists.osgeo.org>
Message-ID: <4B454593-EE78-4B11-A617-38DB095284A0@gmail.com>

Hi David,

Following on from the VRT / Bigtiff comparison Jukka posted. Have you considered storing the data as a single KEA format file, which is based on HDF5?

I have the National Elevation Dataset for the US, which comprises 3,605 1 x 1 degree tiles at 1 arc sec resolution. I first created a VRT then used gdal_translate to convert to a KEA file. Total size is 421,212 x 252,012 pixels, 77 GB. I also built overviews for a fast display (this took a long time and I don't think is needed for your case).

I've just tried using gdallocationinfo on the file to get pixel information and it takes < 0.5s to get the pixel value back. 

The KEA library and GDAL driver source are available from:

https://bitbucket.org/chchrsc/kealib/

and the format is described in:

Peter Bunting, Sam Gillingham, The KEA image file format, Computers & Geosciences, Volume 57, August 2013, Pages 54-58, ISSN 0098-3004, http://dx.doi.org/10.1016/j.cageo.2013.03.025.

If you don't mind having one massive file (in addition to the individual tiles, which could be archived), this might work for your use case. 

Thanks,

Dan

> 
> Message: 10
> Date: Fri, 31 Jan 2014 16:15:53 +0000
> From: "David Baker (Geoscience)" <david.m.baker at chk.com>
> To: "'gdal-dev at lists.osgeo.org'" <gdal-dev at lists.osgeo.org>
> Subject: [gdal-dev] Fast Pixel Access
> Message-ID:
> 	<2A18A4344312134B937DF938D992264A0508F250 at OKCEXHPRD122.chkenergy.net>
> Content-Type: text/plain; charset="us-ascii"
> 
> Dev's,
> 
> I have a set of 55,501 bil files in a single directory.  They are DEMS data that cover the US in 7.5 minute tiles.  I would like to randomly access elevations at a given lat/lon's from the whole dataset.  I created a vrt file from the directory of bil files, and have been able to access the elevation at a given lat/lon using gdallocationinfo, but because of the size of the dataset, this operation is somewhat slow.  Can the vrt be indexed? Or, is there a faster, better way to access the pixels?  I would first like to do this with the utilities before diving into code (C#).  The files are regularly named base on their location within a 1 arc-second grid.
> 
> Thanks,
> David
> 
> David M. Baker
> Senior Advisor - Geoscience Technology
> Chesapeake Energy Corporation
> david.m.baker at chk.com<mailto:david.m.baker at chk.com>
> 
> 
> 


From jluis at ualg.pt  Sat Feb  1 17:05:23 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun, 02 Feb 2014 01:05:23 +0000
Subject: [gdal-dev] warnings a fail with poppler
Message-ID: <52ED99D3.2080409@ualg.pt>

Hi,

I am seeing this warnings and trying to build with poppler (a trunk 
build here) fails too with

pdfdataset.obj : error LNK2001: unresolved external symbol "public: 
__cdecl SplashOutputDev::SplashOutputDev(enum 
SplashColorMode,int,bool,unsigned char *,bool,bool,enum 
SplashThinLineMode,bool)" 
(??0SplashOutputDev@@QEAA at W4SplashColorMode@@H_NPEAE11W4SplashThinLineMode@@1 at Z)
pdfdataset.obj : error LNK2001: unresolved external symbol "public: 
struct Ref * __cdecl Catalog::getPageRef(int)" 
(?getPageRef at Catalog@@QEAAPEAURef@@H at Z)

I could see that SplashOutputDev is poppler.lib

and now the warnings

c:\programs\gdaltrunk\gdal\frmts\iris\irisdataset.cpp(564) : warning 
C4701: potentially uninitialized local variable 'dfCos2SigmaM' used
c:\programs\gdaltrunk\gdal\frmts\iris\irisdataset.cpp(558) : warning 
C4701: potentially uninitialized local variable 'dfSinSigma' used
c:\programs\gdaltrunk\gdal\frmts\iris\irisdataset.cpp(558) : warning 
C4701: potentially uninitialized local variable 'dfCosSigma' used

c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(2469) : 
warning C4701: potentially uninitialized local variable 'iWrkNumType' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3440) : 
warning C4706: assignment within conditional expression
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3447) : 
warning C4706: assignment within conditional expression
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3462) : 
warning C4706: assignment within conditional expression
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3469) : 
warning C4706: assignment within conditional expression
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3401) : 
warning C4701: potentially uninitialized local variable 'dfNoData' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3405) : 
warning C4701: potentially uninitialized local variable 'dfScale' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3410) : 
warning C4701: potentially uninitialized local variable 'dfOffset' used

c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\ehapi.c(448) : warning 
C4701: potentially uninitialized local variable 'sdInterfaceID' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\ehapi.c(435) : warning 
C4701: potentially uninitialized local variable 'HDFfid' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\ehapi.c(445) : warning 
C4701: potentially uninitialized local variable 'acs' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(3270) : warning 
C4701: potentially uninitialized local variable 'c_info' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(3281) : warning 
C4701: potentially uninitialized local variable 'chunkDef' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6470) : warning 
C4701: potentially uninitialized local variable 'latrad0' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6500) : warning 
C4701: potentially uninitialized local variable 'yMtr0' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6499) : warning 
C4701: potentially uninitialized local variable 'xMtr0' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(2632) : warning 
C4701: potentially uninitialized local variable 'ndims' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6741) : warning 
C4701: potentially uninitialized local variable 'qp_cea' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6741) : warning 
C4701: potentially uninitialized local variable 'kz_cea' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(7967) : warning 
C4701: potentially uninitialized local variable 'minCol' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(7969) : warning 
C4701: potentially uninitialized local variable 'minRow' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(7968) : warning 
C4701: potentially uninitialized local variable 'maxCol' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(7970) : warning 
C4701: potentially uninitialized local variable 'maxRow' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(8614) : warning 
C4701: potentially uninitialized local variable 'rank' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9025) : warning 
C4701: potentially uninitialized local variable 'j' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9564) : warning 
C4701: potentially uninitialized local variable 'xdum' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9565) : warning 
C4701: potentially uninitialized local variable 'ydum' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9681) : warning 
C4701: potentially uninitialized local variable 'size' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9843) : warning 
C4701: potentially uninitialized local variable 'xdum' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9844) : warning 
C4701: potentially uninitialized local variable 'ydum' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(10109) : warning 
C4701: potentially uninitialized local variable 'nRetn' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(10573) : warning 
C4701: potentially uninitialized local variable 'c_info' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(2451) : warning 
C4701: potentially uninitialized local variable 'vdataID' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(4282) : warning 
C4701: potentially uninitialized local variable 'nVal' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(5839) : warning 
C4701: potentially uninitialized local variable 'j' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(6454) : warning 
C4701: potentially uninitialized local variable 'tmpVal' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(6776) : warning 
C4701: potentially uninitialized local variable 'k' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(7267) : warning 
C4701: potentially uninitialized local variable 'incr' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(7301) : warning 
C4701: potentially uninitialized local variable 'offset' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(7271) : warning 
C4701: potentially uninitialized local variable 'index' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(7249) : warning 
C4701: potentially uninitialized local variable 'bufOffset' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(8428) : warning 
C4701: potentially uninitialized local variable 'incr' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(8414) : warning 
C4701: potentially uninitialized local variable 'index' used
c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(9128) : warning 
C4701: potentially uninitialized local variable 'j' used



From jukka.rahkonen at mmmtike.fi  Sun Feb  2 11:12:37 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 2 Feb 2014 19:12:37 +0000 (UTC)
Subject: [gdal-dev] Fast Pixel Access
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
	<2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
	<loom.20140201T164744-319@post.gmane.org> <52ED2B58.80700@ualg.pt>
Message-ID: <loom.20140202T190802-59@post.gmane.org>

Hi,

I made a few tests and here comes my conclusions. Hypothesis is that someone
wants to make a DEM query service which is using gdallocationinfo for
queries and DEM data is to be accessed as files from a standard web site. I
compared three alternatives:
1) There are thousands of DEM files on the server and they are combined
together with a VRT file.
2) There is only one DEM file as BigTIFF.
3) DEM is split into tiles into x/y/z tile directory structure like in
Google maps or OpenStreetMap tiles.

My test data covers Finland with 10 m grid size and as deflate compressed
tiffs they make about 10 GB together.

Before going on, keep in mind that the speed needs indexes. The better
index, the less unnecessary data to read. In case 1) the first level index
is the VRT file. The second level index, if it exists, is in the headers of
the real DEM files. It may be possible to jump to a correct offset from the
beginning of the DEM data and read only a part of the file.  In case 2) the
index is in the internal TIFF directory. If the BigTIFF is tiled the access
to tiles should be rather effectice. And finally in case 3) the index is
built into directory structure and tiling schema that is used for saving the
tiles. The schema is no well known that tile map service clients can
directly ask for a certain file name if they know the coordinates and scale.

Conclusions:

1)
- The whole VRT file must be readed. Caching the vrt file would make next
requests faster.
- For some reason gdallocationinfo wants to get the directory list of the
directory where the vrt file is. This is slow and generates lots of traffic
if the thousands of DEM files are in the same directory. Probably it would
be faster to have them in another dierectory.

2) 
- BigTIFF route is more straight forward but gdallocationinfo needs still to
do many big range reads. 
- Also in this case gdallocationinfo reads the target file directory. It
would be good to keep this directory small. Don't do like I did with having
in the directory the BigTIFF DEM file that was the only file needed, but
also the vrt and thousands of original DEMs from the previuos test -> but at
least this is a know this issue now and know how to avoid it. In my case
reading the directory made 2.2 MB of web traffic and all or most for wain.

3)
- I used OpenStreetMap tile service as the test data for the third test. In
this case gdallocationinfo knows exactly which tile to request and it is
making only one request. It also seems to cache some tiles on the client
side which means that queries for close locations may hit the cached tile
and be very fast.

Summary statistics:

1) Gdallocationinfo makes 6 requests and reads 6.4 MB of data
2) Gdallocationinfo makes 8 requests and reads 4.3 MB of data
3) Gdallocationinfo makes 1 requests and reads 10 kB of data

Requests I used are these:

1)
gdallocationinfo /vsicurl/http://latuviitta.kapsi.fi/data/
dem10m/dem_10m.vrt -geoloc  389559 6677412
2)
gdallocationinfo /vsicurl/http://latuviitta.kapsi.fi/data/
dem10m/dem_10m.tif -geoloc  389559 6677412
3)
gdallocationinfo  frmt_wms_openstreetmap_tms.xml -geoloc  389559 6677412

I know that the queried place in 3) is not the same because SRIDs of data
differ nor does OSM return 16-bit DEM heights but 3-band RGB values instead
but it does not matter here, the idea is what is important.

My conclusion is that you should cut your DEM into tiles with for example
gdal2tiles or MapTiler and the resuld could actually be quit speedy and
perhaps using 126x126 tiles could make it still a bit faster. Hope that they
can create tiles as 16-bit tiffs.

 I am sure that these results are not scientifically sound but I am also
sure that the difference between 6.4 MB/4.3 MB/10 kB is something to think
about especially if you dream about a mobile service. 

I placed the requests which gdallocationinfo made during these tests into
http://latuviitta.org/documents/gdallocationinfo_requests.txt

-Jukka Rahkonen-



From roth.luke at gmail.com  Mon Feb  3 06:10:38 2014
From: roth.luke at gmail.com (Luke Roth)
Date: Mon, 3 Feb 2014 09:10:38 -0500
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <loom.20140202T190802-59@post.gmane.org>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
	<2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
	<loom.20140201T164744-319@post.gmane.org> <52ED2B58.80700@ualg.pt>
	<loom.20140202T190802-59@post.gmane.org>
Message-ID: <CAJ-aobdOiTwP3ELJdXwwZ-jH3-R6_uFTJyGDzoJm_xs1v4pOZg@mail.gmail.com>

Another thing that might speed up access is setting the config option
GDAL_DISABLE_READDIR_ON_OPEN
= TRUE, either as an environment variable or on the command line.  That
should help with GDAL reading the directory each time it opens a dataset.
 I have an application which reads one value from each of a large number of
datasets and setting this option made it run about 3 times faster.
Luke

On Sun, Feb 2, 2014 at 2:12 PM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>wrote:

> Hi,
>
> I made a few tests and here comes my conclusions. Hypothesis is that
> someone
> wants to make a DEM query service which is using gdallocationinfo for
> queries and DEM data is to be accessed as files from a standard web site. I
> compared three alternatives:
> 1) There are thousands of DEM files on the server and they are combined
> together with a VRT file.
> 2) There is only one DEM file as BigTIFF.
> 3) DEM is split into tiles into x/y/z tile directory structure like in
> Google maps or OpenStreetMap tiles.
>
> My test data covers Finland with 10 m grid size and as deflate compressed
> tiffs they make about 10 GB together.
>
> Before going on, keep in mind that the speed needs indexes. The better
> index, the less unnecessary data to read. In case 1) the first level index
> is the VRT file. The second level index, if it exists, is in the headers of
> the real DEM files. It may be possible to jump to a correct offset from the
> beginning of the DEM data and read only a part of the file.  In case 2) the
> index is in the internal TIFF directory. If the BigTIFF is tiled the access
> to tiles should be rather effectice. And finally in case 3) the index is
> built into directory structure and tiling schema that is used for saving
> the
> tiles. The schema is no well known that tile map service clients can
> directly ask for a certain file name if they know the coordinates and
> scale.
>
> Conclusions:
>
> 1)
> - The whole VRT file must be readed. Caching the vrt file would make next
> requests faster.
> - For some reason gdallocationinfo wants to get the directory list of the
> directory where the vrt file is. This is slow and generates lots of traffic
> if the thousands of DEM files are in the same directory. Probably it would
> be faster to have them in another dierectory.
>
> 2)
> - BigTIFF route is more straight forward but gdallocationinfo needs still
> to
> do many big range reads.
> - Also in this case gdallocationinfo reads the target file directory. It
> would be good to keep this directory small. Don't do like I did with having
> in the directory the BigTIFF DEM file that was the only file needed, but
> also the vrt and thousands of original DEMs from the previuos test -> but
> at
> least this is a know this issue now and know how to avoid it. In my case
> reading the directory made 2.2 MB of web traffic and all or most for wain.
>
> 3)
> - I used OpenStreetMap tile service as the test data for the third test. In
> this case gdallocationinfo knows exactly which tile to request and it is
> making only one request. It also seems to cache some tiles on the client
> side which means that queries for close locations may hit the cached tile
> and be very fast.
>
> Summary statistics:
>
> 1) Gdallocationinfo makes 6 requests and reads 6.4 MB of data
> 2) Gdallocationinfo makes 8 requests and reads 4.3 MB of data
> 3) Gdallocationinfo makes 1 requests and reads 10 kB of data
>
> Requests I used are these:
>
> 1)
> gdallocationinfo /vsicurl/http://latuviitta.kapsi.fi/data/
> dem10m/dem_10m.vrt -geoloc  389559 6677412
> 2)
> gdallocationinfo /vsicurl/http://latuviitta.kapsi.fi/data/
> dem10m/dem_10m.tif -geoloc  389559 6677412
> 3)
> gdallocationinfo  frmt_wms_openstreetmap_tms.xml -geoloc  389559 6677412
>
> I know that the queried place in 3) is not the same because SRIDs of data
> differ nor does OSM return 16-bit DEM heights but 3-band RGB values instead
> but it does not matter here, the idea is what is important.
>
> My conclusion is that you should cut your DEM into tiles with for example
> gdal2tiles or MapTiler and the resuld could actually be quit speedy and
> perhaps using 126x126 tiles could make it still a bit faster. Hope that
> they
> can create tiles as 16-bit tiffs.
>
>  I am sure that these results are not scientifically sound but I am also
> sure that the difference between 6.4 MB/4.3 MB/10 kB is something to think
> about especially if you dream about a mobile service.
>
> I placed the requests which gdallocationinfo made during these tests into
> http://latuviitta.org/documents/gdallocationinfo_requests.txt
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140203/44594a89/attachment.html>

From david.m.baker at chk.com  Mon Feb  3 06:27:36 2014
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Mon, 3 Feb 2014 14:27:36 +0000
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <4B454593-EE78-4B11-A617-38DB095284A0@gmail.com>
References: <mailman.9673.1391185283.24729.gdal-dev@lists.osgeo.org>
	<4B454593-EE78-4B11-A617-38DB095284A0@gmail.com>
Message-ID: <2A18A4344312134B937DF938D992264A050A0745@OKCEXHPRD121.chkenergy.net>

Dan,

I had not heard of the KEA format and it looks promising, accept the need to compile.  I am hoping to this with out-of-the-box GDAL.  I also did not see a license statement.  GDAL does support HDF5 (another format I am not familiar with), but it looks like the limit is 2GB for the built in driver.  My dataset is also covers the US with 55,501 x 7.5 minutes tiles at 0.15012 arc second resolution (~5m), a total size 2,289,001 x 756,001 pixels, 1.8T.  Creating a single dataset from the tiles can be done, but in our environment, is not cheap.

David

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Daniel Clewley
Sent: Saturday, February 01, 2014 1:45 PM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Fast Pixel Access

Hi David,

Following on from the VRT / Bigtiff comparison Jukka posted. Have you considered storing the data as a single KEA format file, which is based on HDF5?

I have the National Elevation Dataset for the US, which comprises 3,605 1 x 1 degree tiles at 1 arc sec resolution. I first created a VRT then used gdal_translate to convert to a KEA file. Total size is 421,212 x 252,012 pixels, 77 GB. I also built overviews for a fast display (this took a long time and I don't think is needed for your case).

I've just tried using gdallocationinfo on the file to get pixel information and it takes < 0.5s to get the pixel value back.

The KEA library and GDAL driver source are available from:

https://bitbucket.org/chchrsc/kealib/

and the format is described in:

Peter Bunting, Sam Gillingham, The KEA image file format, Computers & Geosciences, Volume 57, August 2013, Pages 54-58, ISSN 0098-3004, http://dx.doi.org/10.1016/j.cageo.2013.03.025.

If you don't mind having one massive file (in addition to the individual tiles, which could be archived), this might work for your use case.

Thanks,

Dan

>
> Message: 10
> Date: Fri, 31 Jan 2014 16:15:53 +0000
> From: "David Baker (Geoscience)" <david.m.baker at chk.com>
> To: "'gdal-dev at lists.osgeo.org'" <gdal-dev at lists.osgeo.org>
> Subject: [gdal-dev] Fast Pixel Access
> Message-ID:
>       <2A18A4344312134B937DF938D992264A0508F250 at OKCEXHPRD122.chkenergy.net>
> Content-Type: text/plain; charset="us-ascii"
>
> Dev's,
>
> I have a set of 55,501 bil files in a single directory.  They are DEMS data that cover the US in 7.5 minute tiles.  I would like to randomly access elevations at a given lat/lon's from the whole dataset.  I created a vrt file from the directory of bil files, and have been able to access the elevation at a given lat/lon using gdallocationinfo, but because of the size of the dataset, this operation is somewhat slow.  Can the vrt be indexed? Or, is there a faster, better way to access the pixels?  I would first like to do this with the utilities before diving into code (C#).  The files are regularly named base on their location within a 1 arc-second grid.
>
> Thanks,
> David
>
> David M. Baker
> Senior Advisor - Geoscience Technology
> Chesapeake Energy Corporation
> david.m.baker at chk.com<mailto:david.m.baker at chk.com>
>
>
>

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is confidential or privileged and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).

From andy.cheetham at geomaticSolutions.com  Mon Feb  3 06:24:35 2014
From: andy.cheetham at geomaticSolutions.com (Andy Cheetham)
Date: Mon, 3 Feb 2014 14:24:35 +0000 (UTC)
Subject: [gdal-dev] Problems linking 1.10 with CURL support
Message-ID: <loom.20140203T150239-14@post.gmane.org>

Hi All

I'm have trouble linking GDAL 1.10 with CURL support enabled.

I can and have been building GDAL 1.9 with CURL so I'm sure I have all the 
settings within the nmake.opt file correct, unless I have to do something 
different for the latest version.

I'm on Windows 7 and have tried using both VS2005 and VS2010.

The linking error I'm getting is:

error LNK2019: unresolved external symbol "void __cdecl 
CPLHTTPSetOptions(void *,char * *)" (?CPLHTTPSetOptions@@YAXPAXPAPAD at Z) 
referenced in function "void __cdecl CPLHTTPInitializeRequest(struct 
CPLHTTPRequest *,char const *,char const * const *)" (?
CPLHTTPInitializeRequest@@YAXPAUCPLHTTPRequest@@PBDPBQBD at Z)	gdalhttp.obj

My nmake.opt section looks like the following

# Uncomment to use libcurl (DLL by default)
# The cURL library is used for WCS, WMS, GeoJSON, SRS call importFromUrl(), 
WFS, GFT, CouchDB, /vsicurl/ etc.
CURL_DIR=W:\3rdpartyLibs\curl\7_35\src\
CURL_INC=-I$(CURL_DIR)/include
# Uncoment following line to use libcurl as dynamic library
CURL_LIB = w:/lib/libcurl.lib wsock32.lib wldap32.lib winmm.lib
# Uncoment following two lines to use libcurl as static library
#CURL_LIB = $(CURL_DIR)/libcurl.lib wsock32.lib wldap32.lib winmm.lib
#CURL_CFLAGS = -DCURL_STATICLIB	

The file cpl_http.cpp does have an implimentation but VS2005 would appear to 
indicate that the #define HAVE)CURL is not defined???

Any help would be appreciated.

Cheers
Andy


From jukka.rahkonen at mmmtike.fi  Mon Feb  3 09:20:19 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 3 Feb 2014 17:20:19 +0000 (UTC)
Subject: [gdal-dev] Fast Pixel Access
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
	<2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
	<loom.20140201T164744-319@post.gmane.org> <52ED2B58.80700@ualg.pt>
	<loom.20140202T190802-59@post.gmane.org>
	<CAJ-aobdOiTwP3ELJdXwwZ-jH3-R6_uFTJyGDzoJm_xs1v4pOZg@mail.gmail.com>
Message-ID: <loom.20140203T174405-722@post.gmane.org>

Luke Roth <roth.luke <at> gmail.com> writes:

> 
> Another thing that might speed up access is setting the config
option?GDAL_DISABLE_READDIR_ON_OPEN = TRUE, either as an environment
variable or on the command line. ?That should help with GDAL reading the
directory each time it opens a dataset. ?I have an application which reads
one value from each of a large number of datasets and setting this option
made it run about 3 times faster.


Hi,

You are right. This config option makes GDAL to skip the reading of the
remote directory and saves a lot of bandwidth:

VRT case: 
Bytes Received:  4?244?509 (of which the vrt file: 4?192?577)
Sequence (clock) duration:	00:00:09.9996000
Was:
Bytes Received:  6?459?443
Sequence (clock) duration:	00:00:37.8130000

BigTIFF case: 
Bytes Received:  2?158?917
Sequence (clock) duration:	00:00:04.4368000
Was:
Bytes Received:  4?374?137
Sequence (clock) duration:	00:00:30.9192000


Conclusion:
Both options are unsuitable for serious use while amusing to play with.
Reading the BigTIFF tile offset index (or whatever it is) seems to mean
about 2 MB of compultory payload traffic. Reading the VRT file means in this
example 4 MB of payload. If this sort of net access to a large directory of
raster files should be important for someone there should be a way to find
the right raster file and righ data range in that file with minimum amount
of bytes. Perhaps some kind of rtree indexed vrt file? First aid might be to
keep the vrt file on the client side.

-Jukka Rahkonen- 



From rush at winkey.org  Mon Feb  3 09:26:12 2014
From: rush at winkey.org (Brian Case)
Date: Mon, 03 Feb 2014 09:26:12 -0800
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <loom.20140203T174405-722@post.gmane.org>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
	<2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
	<loom.20140201T164744-319@post.gmane.org> <52ED2B58.80700@ualg.pt>
	<loom.20140202T190802-59@post.gmane.org>
	<CAJ-aobdOiTwP3ELJdXwwZ-jH3-R6_uFTJyGDzoJm_xs1v4pOZg@mail.gmail.com>
	<loom.20140203T174405-722@post.gmane.org>
Message-ID: <1391448372.14221.137.camel@octopi>

-Jukka

tileindex, mapserver, and the gdal wms driver



On Mon, 2014-02-03 at 17:20 +0000, Jukka Rahkonen wrote:
> Luke Roth <roth.luke <at> gmail.com> writes:
> 
> > 
> > Another thing that might speed up access is setting the config
> option GDAL_DISABLE_READDIR_ON_OPEN = TRUE, either as an environment
> variable or on the command line.  That should help with GDAL reading the
> directory each time it opens a dataset.  I have an application which reads
> one value from each of a large number of datasets and setting this option
> made it run about 3 times faster.
> 
> 
> Hi,
> 
> You are right. This config option makes GDAL to skip the reading of the
> remote directory and saves a lot of bandwidth:
> 
> VRT case: 
> Bytes Received:  4 244 509 (of which the vrt file: 4 192 577)
> Sequence (clock) duration:	00:00:09.9996000
> Was:
> Bytes Received:  6 459 443
> Sequence (clock) duration:	00:00:37.8130000
> 
> BigTIFF case: 
> Bytes Received:  2 158 917
> Sequence (clock) duration:	00:00:04.4368000
> Was:
> Bytes Received:  4 374 137
> Sequence (clock) duration:	00:00:30.9192000
> 
> 
> Conclusion:
> Both options are unsuitable for serious use while amusing to play with.
> Reading the BigTIFF tile offset index (or whatever it is) seems to mean
> about 2 MB of compultory payload traffic. Reading the VRT file means in this
> example 4 MB of payload. If this sort of net access to a large directory of
> raster files should be important for someone there should be a way to find
> the right raster file and righ data range in that file with minimum amount
> of bytes. Perhaps some kind of rtree indexed vrt file? First aid might be to
> keep the vrt file on the client side.
> 
> -Jukka Rahkonen- 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From jukka.rahkonen at mmmtike.fi  Mon Feb  3 09:29:20 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 3 Feb 2014 17:29:20 +0000 (UTC)
Subject: [gdal-dev] Problems linking 1.10 with CURL support
References: <loom.20140203T150239-14@post.gmane.org>
Message-ID: <loom.20140203T182629-403@post.gmane.org>

Andy Cheetham <andy.cheetham <at> geomaticSolutions.com> writes:

> 
> Hi All
> 
> I'm have trouble linking GDAL 1.10 with CURL support enabled.
> 
> I can and have been building GDAL 1.9 with CURL so I'm sure I have all the 
> settings within the nmake.opt file correct, unless I have to do something 
> different for the latest version.
> 
> I'm on Windows 7 and have tried using both VS2005 and VS2010.

If the ready made Windows builds in http://gisinternals.com/sdk/ do not suit
you perhaps the buildlogs can still help you.

-Jukka Rahkonen-


From jukka.rahkonen at mmmtike.fi  Mon Feb  3 09:36:58 2014
From: jukka.rahkonen at mmmtike.fi (Rahkonen Jukka  (Tike))
Date: Mon, 3 Feb 2014 17:36:58 +0000
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <1391448372.14221.137.camel@octopi>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
	<2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
	<loom.20140201T164744-319@post.gmane.org> <52ED2B58.80700@ualg.pt>
	<loom.20140202T190802-59@post.gmane.org>
	<CAJ-aobdOiTwP3ELJdXwwZ-jH3-R6_uFTJyGDzoJm_xs1v4pOZg@mail.gmail.com>
	<loom.20140203T174405-722@post.gmane.org>,
	<1391448372.14221.137.camel@octopi>
Message-ID: <EFE5D7EE2EC8D3438FE02E356F81E35A022F5C@FITLK-EXMBX04.msvyvi.vaha.local>

Hi,

Perhaps, but in this game the rule was not to have any GIS servers. Myself I would rather consider WFS. It could send heights from single points but also a profile along a line or all values within a polygon.

-Jukka-

Brian Case [rush at winkey.org] wrote:

> -Jukka

> tileindex, mapserver, and the gdal wms driver



> On Mon, 2014-02-03 at 17:20 +0000, Jukka Rahkonen wrote:
>> Luke Roth <roth.luke <at> gmail.com> writes:
>
> >
>> > Another thing that might speed up access is setting the config
>> option GDAL_DISABLE_READDIR_ON_OPEN = TRUE, either as an environment
>> variable or on the command line.  That should help with GDAL reading the
>> directory each time it opens a dataset.  I have an application which reads
>> one value from each of a large number of datasets and setting this option
>> made it run about 3 times faster.
>
>
> Hi,
>
> You are right. This config option makes GDAL to skip the reading of the
> remote directory and saves a lot of bandwidth:
>
> VRT case:
> Bytes Received:  4 244 509 (of which the vrt file: 4 192 577)
> Sequence (clock) duration:    00:00:09.9996000
> Was:
> Bytes Received:  6 459 443
> Sequence (clock) duration:    00:00:37.8130000
>
> BigTIFF case:
> Bytes Received:  2 158 917
> Sequence (clock) duration:    00:00:04.4368000
> Was:
> Bytes Received:  4 374 137
> Sequence (clock) duration:    00:00:30.9192000
>
>
> Conclusion:
> Both options are unsuitable for serious use while amusing to play with.
> Reading the BigTIFF tile offset index (or whatever it is) seems to mean
> about 2 MB of compultory payload traffic. Reading the VRT file means in this
> example 4 MB of payload. If this sort of net access to a large directory of
> raster files should be important for someone there should be a way to find
> the right raster file and righ data range in that file with minimum amount
> of bytes. Perhaps some kind of rtree indexed vrt file? First aid might be to
> keep the vrt file on the client side.
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From david.m.baker at chk.com  Mon Feb  3 10:48:59 2014
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Mon, 3 Feb 2014 18:48:59 +0000
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <EFE5D7EE2EC8D3438FE02E356F81E35A022F5C@FITLK-EXMBX04.msvyvi.vaha.local>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
	<2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
	<loom.20140201T164744-319@post.gmane.org> <52ED2B58.80700@ualg.pt>
	<loom.20140202T190802-59@post.gmane.org>
	<CAJ-aobdOiTwP3ELJdXwwZ-jH3-R6_uFTJyGDzoJm_xs1v4pOZg@mail.gmail.com>
	<loom.20140203T174405-722@post.gmane.org>,
	<1391448372.14221.137.camel@octopi>
	<EFE5D7EE2EC8D3438FE02E356F81E35A022F5C@FITLK-EXMBX04.msvyvi.vaha.local>
Message-ID: <2A18A4344312134B937DF938D992264A050A3112@OKCEXHPRD121.chkenergy.net>

Jukka,

No matter the endpoint the user uses to access the data, behind the scenes, there must be fast pixel access, correct?  Or are you saying that at WFS would do it quickly out of the box?

David

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Rahkonen Jukka (Tike)
Sent: Monday, February 03, 2014 11:37 AM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Fast Pixel Access

Hi,

Perhaps, but in this game the rule was not to have any GIS servers. Myself I would rather consider WFS. It could send heights from single points but also a profile along a line or all values within a polygon.

-Jukka-

Brian Case [rush at winkey.org] wrote:

> -Jukka

> tileindex, mapserver, and the gdal wms driver



> On Mon, 2014-02-03 at 17:20 +0000, Jukka Rahkonen wrote:
>> Luke Roth <roth.luke <at> gmail.com> writes:
>
> >
>> > Another thing that might speed up access is setting the config
>> option GDAL_DISABLE_READDIR_ON_OPEN = TRUE, either as an environment
>> variable or on the command line.  That should help with GDAL reading the
>> directory each time it opens a dataset.  I have an application which reads
>> one value from each of a large number of datasets and setting this option
>> made it run about 3 times faster.
>
>
> Hi,
>
> You are right. This config option makes GDAL to skip the reading of the
> remote directory and saves a lot of bandwidth:
>
> VRT case:
> Bytes Received:  4 244 509 (of which the vrt file: 4 192 577)
> Sequence (clock) duration:    00:00:09.9996000
> Was:
> Bytes Received:  6 459 443
> Sequence (clock) duration:    00:00:37.8130000
>
> BigTIFF case:
> Bytes Received:  2 158 917
> Sequence (clock) duration:    00:00:04.4368000
> Was:
> Bytes Received:  4 374 137
> Sequence (clock) duration:    00:00:30.9192000
>
>
> Conclusion:
> Both options are unsuitable for serious use while amusing to play with.
> Reading the BigTIFF tile offset index (or whatever it is) seems to mean
> about 2 MB of compultory payload traffic. Reading the VRT file means in this
> example 4 MB of payload. If this sort of net access to a large directory of
> raster files should be important for someone there should be a way to find
> the right raster file and righ data range in that file with minimum amount
> of bytes. Perhaps some kind of rtree indexed vrt file? First aid might be to
> keep the vrt file on the client side.
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is confidential or privileged and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).

From klokan at klokan.cz  Mon Feb  3 11:37:35 2014
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Mon, 3 Feb 2014 20:37:35 +0100
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <2A18A4344312134B937DF938D992264A050A3112@OKCEXHPRD121.chkenergy.net>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
	<2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
	<loom.20140201T164744-319@post.gmane.org> <52ED2B58.80700@ualg.pt>
	<loom.20140202T190802-59@post.gmane.org>
	<CAJ-aobdOiTwP3ELJdXwwZ-jH3-R6_uFTJyGDzoJm_xs1v4pOZg@mail.gmail.com>
	<loom.20140203T174405-722@post.gmane.org>
	<1391448372.14221.137.camel@octopi>
	<EFE5D7EE2EC8D3438FE02E356F81E35A022F5C@FITLK-EXMBX04.msvyvi.vaha.local>
	<2A18A4344312134B937DF938D992264A050A3112@OKCEXHPRD121.chkenergy.net>
Message-ID: <CANkM0ZA-gKNfmPHOv5gRRt1VdgXDVH=O_Y5mBzAdK_msbkvNyA@mail.gmail.com>

Hi Jukka, David and others,

We were rendering in the past the elevation data into Mercator tiles with
http://www.maptiler.com/, the follower of my GDAL2Tiles.py script - for
extremely fast pixel access to the elevation values at given geographic
location - without a need for server software for hosting such data. We
made the tiles for CGIAR 90m DEM for whole world.

In fact the raw elevation was mapped into RGB space for this purpose.
Decoding on the client side is then very easy and you have precise
elevation values for the whole near area preloaded.

You may need to do something similar if you want to implement very fast
client side hill-shading in web browser canvas (similar to
http://dev.klokantech.com/klokan/hillshading/), or dynamic elevation
profile drawn while moving the mouse over a map, and many other tasks with
data loaded in the client directly.

The visualisation of the tiles is possible also in 3D, see:
http://vimeo.com/29605292
For WebGL there are now more efficient ways (direct binary data structures
instead of images).

See:
http://dev.klokantech.com/srtm/srtm_decode.html
http://www.klokantech.com/labs/dem-color-encoding/
http://dev.klokantech.com/srtm/googlemaps.html

There is a source code of the GDAL utility for encoding elevation data into
RGB available online:
https://github.com/webglearth/gdaldem_web
but you may not need it, if direct reading via JavaScript in the web
browser is not required for your application.

Regards,

Klokan Petr Pridal


On Mon, Feb 3, 2014 at 7:48 PM, David Baker (Geoscience) <
david.m.baker at chk.com> wrote:

> Jukka,
>
> No matter the endpoint the user uses to access the data, behind the
> scenes, there must be fast pixel access, correct?  Or are you saying that
> at WFS would do it quickly out of the box?
>
> David
>
> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org [mailto:
> gdal-dev-bounces at lists.osgeo.org] On Behalf Of Rahkonen Jukka (Tike)
> Sent: Monday, February 03, 2014 11:37 AM
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Fast Pixel Access
>
> Hi,
>
> Perhaps, but in this game the rule was not to have any GIS servers. Myself
> I would rather consider WFS. It could send heights from single points but
> also a profile along a line or all values within a polygon.
>
> -Jukka-
>
> Brian Case [rush at winkey.org] wrote:
>
> > -Jukka
>
> > tileindex, mapserver, and the gdal wms driver
>
>
>
> > On Mon, 2014-02-03 at 17:20 +0000, Jukka Rahkonen wrote:
> >> Luke Roth <roth.luke <at> gmail.com> writes:
> >
> > >
> >> > Another thing that might speed up access is setting the config
> >> option GDAL_DISABLE_READDIR_ON_OPEN = TRUE, either as an environment
> >> variable or on the command line.  That should help with GDAL reading the
> >> directory each time it opens a dataset.  I have an application which
> reads
> >> one value from each of a large number of datasets and setting this
> option
> >> made it run about 3 times faster.
> >
> >
> > Hi,
> >
> > You are right. This config option makes GDAL to skip the reading of the
> > remote directory and saves a lot of bandwidth:
> >
> > VRT case:
> > Bytes Received:  4 244 509 (of which the vrt file: 4 192 577)
> > Sequence (clock) duration:    00:00:09.9996000
> > Was:
> > Bytes Received:  6 459 443
> > Sequence (clock) duration:    00:00:37.8130000
> >
> > BigTIFF case:
> > Bytes Received:  2 158 917
> > Sequence (clock) duration:    00:00:04.4368000
> > Was:
> > Bytes Received:  4 374 137
> > Sequence (clock) duration:    00:00:30.9192000
> >
> >
> > Conclusion:
> > Both options are unsuitable for serious use while amusing to play with.
> > Reading the BigTIFF tile offset index (or whatever it is) seems to mean
> > about 2 MB of compultory payload traffic. Reading the VRT file means in
> this
> > example 4 MB of payload. If this sort of net access to a large directory
> of
> > raster files should be important for someone there should be a way to
> find
> > the right raster file and righ data range in that file with minimum
> amount
> > of bytes. Perhaps some kind of rtree indexed vrt file? First aid might
> be to
> > keep the vrt file on the client side.
> >
> > -Jukka Rahkonen-
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ________________________________
>
> This email (and attachments if any) is intended only for the use of the
> individual or entity to which it is addressed, and may contain information
> that is confidential or privileged and exempt from disclosure under
> applicable law. If the reader of this email is not the intended recipient,
> or the employee or agent responsible for delivering this message to the
> intended recipient, you are hereby notified that any dissemination,
> distribution or copying of this communication is strictly prohibited. If
> you have received this communication in error, please notify the sender
> immediately by return email and destroy all copies of the email (and
> attachments if any).
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
http://blog.klokan.cz/
http://www.maptiler.org/
http://www.oldmapsonline.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140203/6c08e2f7/attachment-0001.html>

From schut at sarvision.nl  Tue Feb  4 02:53:16 2014
From: schut at sarvision.nl (Vincent Schut)
Date: Tue, 04 Feb 2014 11:53:16 +0100
Subject: [gdal-dev] svn trunk: python import error,
	version says still 1.10.0?
Message-ID: <52F0C69C.3090509@sarvision.nl>

Hi,

While trying to upgrade my gdal to svn trunk, I got this python error on 
import:

Traceback (most recent call last):
   File "/home/vincent/src/python/rapideye_smac_002.py", line 24, in 
<module>
     from osgeo import gdal, gdal_array
   File 
"/usr/lib/python2.7/site-packages/GDAL-1.10.0-py2.7-linux-x86_64.egg/osgeo/__init__.py", 
line 21, in <module>
     _gdal = swig_import_helper()
   File 
"/usr/lib/python2.7/site-packages/GDAL-1.10.0-py2.7-linux-x86_64.egg/osgeo/__init__.py", 
line 17, in swig_import_helper
     _mod = imp.load_module('_gdal', fp, pathname, description)
ImportError: 
/usr/lib/python2.7/site-packages/GDAL-1.10.0-py2.7-linux-x86_64.egg/osgeo/_gdal.so: 
undefined symbol: GDALRasterBandGetVirtualMem

This is with a fresh svn checkout.

Furthermore, it shows that it installs gdal als GDAL-1.10.0-py-... , 
while svn trunk should say 1.11.0 I suppose? Yes, I tried to remove this 
folder and reinstall it. Really installs as 1.10.0...

This is on (arch) linux, amd64.


Best,
Vincent.

From DCarreira at edia.pt  Tue Feb  4 06:58:36 2014
From: DCarreira at edia.pt (Duarte Carreira)
Date: Tue, 4 Feb 2014 14:58:36 +0000
Subject: [gdal-dev] suggestion for faster overviews building
Message-ID: <415274f60730446685024cf6f96c6b0d@AMSPR07MB230.eurprd07.prod.outlook.com>

Hi there.

I am again in the course of creating overviews using gdaladdo and can't help feeling this could be faster...

Gdalwarp is much faster when resampling an image. You can use -multi and tune memory usage.

So why can't gdaladdo? Ok, lets just assume this is a fact of life we have to deal with...

How about using gdalwarp to create our resampled images one at a time (which we can do several in parallel) and using them as overviews? Can this be done?

Is there a way to merge de resampled images into an .ovr? Or maybe reference the resampled images in a vrt and have them used as overviews?

Appreciate any ideas on this.

Thanks.
Duarte









































Duarte Carreira
Diretor | Dep. Informa??o Geogr?fica e Cartografia

www.edia.pt<http://www.edia.pt>
www.alqueva.com.pt<http://www.alqueva.com.pt>
Tel. +351 284315100

[http://www.edia.pt/edia/images/edia_logo2.gif]<http://www.edia.pt>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140204/b2268214/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Feb  4 07:18:46 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 4 Feb 2014 15:18:46 +0000 (UTC)
Subject: [gdal-dev] suggestion for faster overviews building
References: <415274f60730446685024cf6f96c6b0d@AMSPR07MB230.eurprd07.prod.outlook.com>
Message-ID: <loom.20140204T160705-827@post.gmane.org>

Duarte Carreira <DCarreira <at> edia.pt> writes:


> ?
> Is there a way to merge de resampled images into an .ovr? Or maybe
reference the resampled images in a vrt and have them used as overviews?

Hi,

Even Rouault helped me when I was experimenting with something like this.
You can catch the discussion from here
http://permalink.gmane.org/gmane.comp.gis.gdal.devel/31829
The zip file is also still available
http://latuviitta.org/documents/GDAL_Scale_dependent_VRT_test.zip

This is more fun than doing by hand what gdaladdo normally does because the
overviews are not subsampled but they come from totally different data.

-Jukka Rahkonen-



From jukka.rahkonen at mmmtike.fi  Tue Feb  4 07:29:15 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 4 Feb 2014 15:29:15 +0000 (UTC)
Subject: [gdal-dev] Fast Pixel Access
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
	<2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
	<loom.20140201T164744-319@post.gmane.org> <52ED2B58.80700@ualg.pt>
	<loom.20140202T190802-59@post.gmane.org>
	<CAJ-aobdOiTwP3ELJdXwwZ-jH3-R6_uFTJyGDzoJm_xs1v4pOZg@mail.gmail.com>
	<loom.20140203T174405-722@post.gmane.org>,
	<1391448372.14221.137.camel@octopi>
	<EFE5D7EE2EC8D3438FE02E356F81E35A022F5C@FITLK-EXMBX04.msvyvi.vaha.local>
	<2A18A4344312134B937DF938D992264A050A3112@OKCEXHPRD121.chkenergy.net>
Message-ID: <loom.20140204T161956-325@post.gmane.org>

David Baker (Geoscience <david.m.baker <at> chk.com> writes:

> 
> Jukka,
> 
> No matter the endpoint the user uses to access the data, behind the
scenes, there must be fast pixel access,
> correct?  Or are you saying that at WFS would do it quickly out of the box?

Hi,

Fast access to data, yes, but using WFS is rather different scenario. WFS is
made for vectors and before using it rastem DEM should be converted into
small polygons. For the whole country it would mean whole lot of small
polygons. Perhaps that is not a realistic approach. But now I think I must
shut my mouth because I have never done anything DEM related in my job
myself. Let's hope some specialist appears and gives a good solution for
you. Oh well, Klokan appeared already.

-Jukka-


From lhomme.xavier at gmail.com  Tue Feb  4 07:36:45 2014
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Tue, 4 Feb 2014 16:36:45 +0100
Subject: [gdal-dev] GDAL and UNITY3D
Message-ID: <CACqzBMyBuNqmJzOjtH5XUj+LVhtZMbMoG4XTW4XSZHBgvpCJ3Q@mail.gmail.com>

Has anyone tried and succeeded to use GDAL with Unity ?


Xav
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140204/8a6479c0/attachment.html>

From etourigny.dev at gmail.com  Tue Feb  4 07:47:27 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 4 Feb 2014 13:47:27 -0200
Subject: [gdal-dev] GDAL and UNITY3D
In-Reply-To: <CACqzBMyBuNqmJzOjtH5XUj+LVhtZMbMoG4XTW4XSZHBgvpCJ3Q@mail.gmail.com>
References: <CACqzBMyBuNqmJzOjtH5XUj+LVhtZMbMoG4XTW4XSZHBgvpCJ3Q@mail.gmail.com>
Message-ID: <CA+TxYvNiVNrAbRHF_YMRJ_acPKmT5Paq8uRCEXyLCYbLsYMGOQ@mail.gmail.com>

do you mean the interface that is default in Ubuntu? there should be no
problem with that. After all, gdal is a library and a set of command line
tools.


On Tue, Feb 4, 2014 at 1:36 PM, xavier lhomme <lhomme.xavier at gmail.com>wrote:

> Has anyone tried and succeeded to use GDAL with Unity ?
>
>
> Xav
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140204/fd849b54/attachment.html>

From doug_newcomb at fws.gov  Tue Feb  4 08:04:44 2014
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Tue, 4 Feb 2014 11:04:44 -0500
Subject: [gdal-dev] GDAL and UNITY3D
In-Reply-To: <CA+TxYvNiVNrAbRHF_YMRJ_acPKmT5Paq8uRCEXyLCYbLsYMGOQ@mail.gmail.com>
References: <CACqzBMyBuNqmJzOjtH5XUj+LVhtZMbMoG4XTW4XSZHBgvpCJ3Q@mail.gmail.com>
	<CA+TxYvNiVNrAbRHF_YMRJ_acPKmT5Paq8uRCEXyLCYbLsYMGOQ@mail.gmail.com>
Message-ID: <CALQGVr3Fy0cX+VefZ2k1rHJiSAFkUfTNWsQsHr2=rvNWC5EMRA@mail.gmail.com>

I think perhaps Xavier meant the gaming library.
http://unity3d.com/

Doug


On Tue, Feb 4, 2014 at 10:47 AM, Etienne Tourigny
<etourigny.dev at gmail.com>wrote:

> do you mean the interface that is default in Ubuntu? there should be no
> problem with that. After all, gdal is a library and a set of command line
> tools.
>
>
>  On Tue, Feb 4, 2014 at 1:36 PM, xavier lhomme <lhomme.xavier at gmail.com>wrote:
>
>>  Has anyone tried and succeeded to use GDAL with Unity ?
>>
>>
>> Xav
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140204/c4659bf6/attachment-0001.html>

From lhomme.xavier at gmail.com  Tue Feb  4 08:14:11 2014
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Tue, 4 Feb 2014 17:14:11 +0100
Subject: [gdal-dev] GDAL and UNITY3D
In-Reply-To: <CA+TxYvNiVNrAbRHF_YMRJ_acPKmT5Paq8uRCEXyLCYbLsYMGOQ@mail.gmail.com>
References: <CACqzBMyBuNqmJzOjtH5XUj+LVhtZMbMoG4XTW4XSZHBgvpCJ3Q@mail.gmail.com>
	<CA+TxYvNiVNrAbRHF_YMRJ_acPKmT5Paq8uRCEXyLCYbLsYMGOQ@mail.gmail.com>
Message-ID: <CACqzBMx7GLbGaHXTN+HKQsOse54UbVzx9dbG-jsNkAxHDa6E3Q@mail.gmail.com>

Not Ubuntu but Unity3D.  And on windows store.
 Unity3d , a great 3D Engine.
And GDAL has the ability to request WMS; WCS, handel GeoTiff, load
KML/KMZ...
Then I wonder If I can connect GDAL and Unity and build somethig like
GoogleEarth...




2014-02-04 Etienne Tourigny <etourigny.dev at gmail.com>:

> do you mean the interface that is default in Ubuntu? there should be no
> problem with that. After all, gdal is a library and a set of command line
> tools.
>
>
> On Tue, Feb 4, 2014 at 1:36 PM, xavier lhomme <lhomme.xavier at gmail.com>wrote:
>
>> Has anyone tried and succeeded to use GDAL with Unity ?
>>
>>
>> Xav
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140204/1545f468/attachment.html>

From DCarreira at edia.pt  Tue Feb  4 08:14:48 2014
From: DCarreira at edia.pt (Duarte Carreira)
Date: Tue, 4 Feb 2014 16:14:48 +0000
Subject: [gdal-dev] suggestion for faster overviews building
In-Reply-To: <loom.20140204T160705-827@post.gmane.org>
References: <415274f60730446685024cf6f96c6b0d@AMSPR07MB230.eurprd07.prod.outlook.com>
	<loom.20140204T160705-827@post.gmane.org>
Message-ID: <9cb299ff56f4462891d259435a7f57ff@AMSPR07MB230.eurprd07.prod.outlook.com>

Hi Jukka. Now that you mentioned it I recall seeing that discussion online.

I'll give it a try. It would be more elegant if vrt format supported several overview levels.

Thanks.
Duarte

-----Mensagem original-----
De: Jukka Rahkonen [mailto:jukka.rahkonen at mmmtike.fi] 
Enviada: ter?a-feira, 4 de Fevereiro de 2014 15:19
Para: gdal-dev at lists.osgeo.org
Assunto: Re: [gdal-dev] suggestion for faster overviews building

Duarte Carreira <DCarreira <at> edia.pt> writes:


>  
> Is there a way to merge de resampled images into an .ovr? Or maybe
reference the resampled images in a vrt and have them used as overviews?

Hi,

Even Rouault helped me when I was experimenting with something like this.
You can catch the discussion from here
http://permalink.gmane.org/gmane.comp.gis.gdal.devel/31829
The zip file is also still available
http://latuviitta.org/documents/GDAL_Scale_dependent_VRT_test.zip

This is more fun than doing by hand what gdaladdo normally does because the overviews are not subsampled but they come from totally different data.

-Jukka Rahkonen-





From pwillis at aslenv.com  Tue Feb  4 15:23:41 2014
From: pwillis at aslenv.com (Peter Willis)
Date: Tue, 4 Feb 2014 15:23:41 -0800
Subject: [gdal-dev] How Can I gdalwarp From One Image to a Larger Spatial
	Area While Leaving Missing Data Blank in the Destination?
Message-ID: <000301cf2200$23cd1160$6b673420$@aslenv.com>

Hello,

Sorry about the title but it's a bit of a bear finding answers if the
headers don't show the actual topic.
But I digress.

My Issue:
I have an input image that covers coordinates 0,0 to 450,350 UTM zone 13
North and the pixel size is 1 meter.

I want to mosaic pixels 0,0 to 25,25 into a coverage of UTM coordinates
-25,-25 : 25, 25 at the output in 1 meter pixels.
This should show a 25x25 square portion of the image in one corner of the
50x50 output image.

'gdal_translate' will not do this because  -25,-25  are outside the bounds
of the original image.

I have tried the following with gdalwarp:

gdalwarp -overwrite -te -25 -25 25 25 -tr 1 1  ./input.tif ./output.tif

This does not work. I get the following error:

ERROR 1: Unable to compute a transformation between pixel/line
and georeferenced coordinates for ./input.tif.
There is no affine transformation and no GCPs.

There is geography applied to the input file.

What am I doing wrong ?

Thanks for any help.


Peter



From jmckenna at gatewaygeomatics.com  Wed Feb  5 04:50:31 2014
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 05 Feb 2014 08:50:31 -0400
Subject: [gdal-dev] Problems linking 1.10 with CURL support
In-Reply-To: <loom.20140203T150239-14@post.gmane.org>
References: <loom.20140203T150239-14@post.gmane.org>
Message-ID: <52F23397.7040509@gatewaygeomatics.com>

Hi Andy,

For MS4W I currently build GDAL 1.10.1 against curl-7.34.0, with no
issues.  My CURL_DIR setting points to the curl root directly (not "src"
as yours does).

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



On 2/3/2014, 10:24 AM, Andy Cheetham wrote:
> Hi All
> 
> I'm have trouble linking GDAL 1.10 with CURL support enabled.
> 
> I can and have been building GDAL 1.9 with CURL so I'm sure I have all the 
> settings within the nmake.opt file correct, unless I have to do something 
> different for the latest version.
> 
> I'm on Windows 7 and have tried using both VS2005 and VS2010.
> 
> The linking error I'm getting is:
> 
> error LNK2019: unresolved external symbol "void __cdecl 
> CPLHTTPSetOptions(void *,char * *)" (?CPLHTTPSetOptions@@YAXPAXPAPAD at Z) 
> referenced in function "void __cdecl CPLHTTPInitializeRequest(struct 
> CPLHTTPRequest *,char const *,char const * const *)" (?
> CPLHTTPInitializeRequest@@YAXPAUCPLHTTPRequest@@PBDPBQBD at Z)	gdalhttp.obj
> 
> My nmake.opt section looks like the following
> 
> # Uncomment to use libcurl (DLL by default)
> # The cURL library is used for WCS, WMS, GeoJSON, SRS call importFromUrl(), 
> WFS, GFT, CouchDB, /vsicurl/ etc.
> CURL_DIR=W:\3rdpartyLibs\curl\7_35\src\
> CURL_INC=-I$(CURL_DIR)/include
> # Uncoment following line to use libcurl as dynamic library
> CURL_LIB = w:/lib/libcurl.lib wsock32.lib wldap32.lib winmm.lib
> # Uncoment following two lines to use libcurl as static library
> #CURL_LIB = $(CURL_DIR)/libcurl.lib wsock32.lib wldap32.lib winmm.lib
> #CURL_CFLAGS = -DCURL_STATICLIB	
> 
> The file cpl_http.cpp does have an implimentation but VS2005 would appear to 
> indicate that the #define HAVE)CURL is not defined???
> 
> Any help would be appreciated.
> 
> Cheers
> Andy
> 


From jukka.rahkonen at mmmtike.fi  Wed Feb  5 05:02:56 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 5 Feb 2014 13:02:56 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?How_Can_I_gdalwarp_From_One_Image_to_a_Large?=
	=?utf-8?q?r_Spatial=09Area_While_Leaving_Missing_Data_Blank_in_the?=
	=?utf-8?q?_Destination=3F?=
References: <000301cf2200$23cd1160$6b673420$@aslenv.com>
Message-ID: <loom.20140205T135039-866@post.gmane.org>

Peter Willis <pwillis <at> aslenv.com> writes:

> 
> Hello,
> 
> Sorry about the title but it's a bit of a bear finding answers if the
> headers don't show the actual topic.
> But I digress.
> 
> My Issue:
> I have an input image that covers coordinates 0,0 to 450,350 UTM zone 13
> North and the pixel size is 1 meter.
> 
> I want to mosaic pixels 0,0 to 25,25 into a coverage of UTM coordinates
> -25,-25 : 25, 25 at the output in 1 meter pixels.
> This should show a 25x25 square portion of the image in one corner of the
> 50x50 output image.
> 
> 'gdal_translate' will not do this because  -25,-25  are outside the bounds
> of the original image.
> 
> I have tried the following with gdalwarp:
> 
> gdalwarp -overwrite -te -25 -25 25 25 -tr 1 1  ./input.tif ./output.tif
> 
> This does not work. I get the following error:
> 
> ERROR 1: Unable to compute a transformation between pixel/line
> and georeferenced coordinates for ./input.tif.
> There is no affine transformation and no GCPs.
> 
> There is geography applied to the input file.
> 
> What am I doing wrong ?

Hi,

This is funny. GDAL seems not to believe in images with origo at 0,0.
I tested with some dummy png file
gdal_translate -of gtiff -co tfw=yes -co profile=baseline test.png test.png
test.tif
Input file size is 588, 321
0...10...20...30...40...50...60...70...80...90...100 - done.

It does not create a tfw file. Now this fails
gdalwarp test.tif test2.tif
ERROR 1: Unable to compute a transformation between pixel/line
and georeferenced coordinates for test.tif.
There is no affine transformation and no GCPs.

I made tfw file test.tfw by hand as
1
0
0
-1
0
0

and then this is successful
gdalwarp test.tif test2.tif
Creating output file that is 588P x 321L.
Processing input file test.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

and also what you want to do
gdalwarp -te -1000 -1000 1000 1000  test.tif testi3.tif
Creating output file that is 2000P x 2000L.
Processing input file test.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

So I feel there is a bug if corner coordinates are 0,0. Please verify with a
handwritten tfw file and images with origo at, let's say, 1,1.

-Jukka Rahkonen-



> Thanks for any help.
> 
> Peter
> 





From david.m.baker at chk.com  Wed Feb  5 05:25:16 2014
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Wed, 5 Feb 2014 13:25:16 +0000
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <CAJ-aobdOiTwP3ELJdXwwZ-jH3-R6_uFTJyGDzoJm_xs1v4pOZg@mail.gmail.com>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
	<2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
	<loom.20140201T164744-319@post.gmane.org> <52ED2B58.80700@ualg.pt>
	<loom.20140202T190802-59@post.gmane.org>
	<CAJ-aobdOiTwP3ELJdXwwZ-jH3-R6_uFTJyGDzoJm_xs1v4pOZg@mail.gmail.com>
Message-ID: <2A18A4344312134B937DF938D992264A050B9430@OKCEXHPRD122.chkenergy.net>

Luke,

Thank you for this suggestion.  This too the access times from 15-20 seconds down to 1 to 3 seconds.  The majority of the time seems to be spent on the initial read of the vrt as subsequent piped locations after the first are returned sub-second.  For my current application, this should be okay.

David


From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Luke Roth
Sent: Monday, February 03, 2014 8:11 AM
To: Jukka Rahkonen
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Fast Pixel Access

Another thing that might speed up access is setting the config option GDAL_DISABLE_READDIR_ON_OPEN = TRUE, either as an environment variable or on the command line.  That should help with GDAL reading the directory each time it opens a dataset.  I have an application which reads one value from each of a large number of datasets and setting this option made it run about 3 times faster.
Luke
On Sun, Feb 2, 2014 at 2:12 PM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi<mailto:jukka.rahkonen at mmmtike.fi>> wrote:
Hi,

I made a few tests and here comes my conclusions. Hypothesis is that someone
wants to make a DEM query service which is using gdallocationinfo for
queries and DEM data is to be accessed as files from a standard web site. I
compared three alternatives:
1) There are thousands of DEM files on the server and they are combined
together with a VRT file.
2) There is only one DEM file as BigTIFF.
3) DEM is split into tiles into x/y/z tile directory structure like in
Google maps or OpenStreetMap tiles.

My test data covers Finland with 10 m grid size and as deflate compressed
tiffs they make about 10 GB together.

Before going on, keep in mind that the speed needs indexes. The better
index, the less unnecessary data to read. In case 1) the first level index
is the VRT file. The second level index, if it exists, is in the headers of
the real DEM files. It may be possible to jump to a correct offset from the
beginning of the DEM data and read only a part of the file.  In case 2) the
index is in the internal TIFF directory. If the BigTIFF is tiled the access
to tiles should be rather effectice. And finally in case 3) the index is
built into directory structure and tiling schema that is used for saving the
tiles. The schema is no well known that tile map service clients can
directly ask for a certain file name if they know the coordinates and scale.

Conclusions:

1)
- The whole VRT file must be readed. Caching the vrt file would make next
requests faster.
- For some reason gdallocationinfo wants to get the directory list of the
directory where the vrt file is. This is slow and generates lots of traffic
if the thousands of DEM files are in the same directory. Probably it would
be faster to have them in another dierectory.

2)
- BigTIFF route is more straight forward but gdallocationinfo needs still to
do many big range reads.
- Also in this case gdallocationinfo reads the target file directory. It
would be good to keep this directory small. Don't do like I did with having
in the directory the BigTIFF DEM file that was the only file needed, but
also the vrt and thousands of original DEMs from the previuos test -> but at
least this is a know this issue now and know how to avoid it. In my case
reading the directory made 2.2 MB of web traffic and all or most for wain.

3)
- I used OpenStreetMap tile service as the test data for the third test. In
this case gdallocationinfo knows exactly which tile to request and it is
making only one request. It also seems to cache some tiles on the client
side which means that queries for close locations may hit the cached tile
and be very fast.

Summary statistics:

1) Gdallocationinfo makes 6 requests and reads 6.4 MB of data
2) Gdallocationinfo makes 8 requests and reads 4.3 MB of data
3) Gdallocationinfo makes 1 requests and reads 10 kB of data

Requests I used are these:

1)
gdallocationinfo /vsicurl/http://latuviitta.kapsi.fi/data/
dem10m/dem_10m.vrt -geoloc  389559 6677412
2)
gdallocationinfo /vsicurl/http://latuviitta.kapsi.fi/data/
dem10m/dem_10m.tif -geoloc  389559 6677412
3)
gdallocationinfo  frmt_wms_openstreetmap_tms.xml -geoloc  389559 6677412

I know that the queried place in 3) is not the same because SRIDs of data
differ nor does OSM return 16-bit DEM heights but 3-band RGB values instead
but it does not matter here, the idea is what is important.

My conclusion is that you should cut your DEM into tiles with for example
gdal2tiles or MapTiler and the resuld could actually be quit speedy and
perhaps using 126x126 tiles could make it still a bit faster. Hope that they
can create tiles as 16-bit tiffs.

 I am sure that these results are not scientifically sound but I am also
sure that the difference between 6.4 MB/4.3 MB/10 kB is something to think
about especially if you dream about a mobile service.

I placed the requests which gdallocationinfo made during these tests into
http://latuviitta.org/documents/gdallocationinfo_requests.txt

-Jukka Rahkonen-


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev


________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is confidential or privileged and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140205/fa49eeee/attachment-0001.html>

From pwillis at aslenv.com  Wed Feb  5 08:30:54 2014
From: pwillis at aslenv.com (Peter Willis)
Date: Wed, 5 Feb 2014 08:30:54 -0800
Subject: [gdal-dev] How Can I gdalwarp From One Image to a Larger
	Spatial	Area While Leaving Missing Data Blank in the Destination?
In-Reply-To: <loom.20140205T135039-866@post.gmane.org>
References: <000301cf2200$23cd1160$6b673420$@aslenv.com>
	<loom.20140205T135039-866@post.gmane.org>
Message-ID: <000c01cf228f$a406cad0$ec146070$@aslenv.com>

Hello,

Thank you Jukka, that worked.
I just shifted the coordinate of the origin to another location and
everything worked.

Peter

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org
[mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Jukka Rahkonen
Sent: February-05-14 5:03 AM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] How Can I gdalwarp From One Image to a Larger
Spatial Area While Leaving Missing Data Blank in the Destination?

Peter Willis <pwillis <at> aslenv.com> writes:

> 
> Hello,
> 
> Sorry about the title but it's a bit of a bear finding answers if the 
> headers don't show the actual topic.
> But I digress.
> 
> My Issue:
> I have an input image that covers coordinates 0,0 to 450,350 UTM zone 
> 13 North and the pixel size is 1 meter.
> 
> I want to mosaic pixels 0,0 to 25,25 into a coverage of UTM 
> coordinates
> -25,-25 : 25, 25 at the output in 1 meter pixels.
> This should show a 25x25 square portion of the image in one corner of 
> the
> 50x50 output image.
> 
> 'gdal_translate' will not do this because  -25,-25  are outside the 
> bounds of the original image.
> 
> I have tried the following with gdalwarp:
> 
> gdalwarp -overwrite -te -25 -25 25 25 -tr 1 1  ./input.tif 
> ./output.tif
> 
> This does not work. I get the following error:
> 
> ERROR 1: Unable to compute a transformation between pixel/line and 
> georeferenced coordinates for ./input.tif.
> There is no affine transformation and no GCPs.
> 
> There is geography applied to the input file.
> 
> What am I doing wrong ?

Hi,

This is funny. GDAL seems not to believe in images with origo at 0,0.
I tested with some dummy png file
gdal_translate -of gtiff -co tfw=yes -co profile=baseline test.png test.png
test.tif Input file size is 588, 321
0...10...20...30...40...50...60...70...80...90...100 - done.

It does not create a tfw file. Now this fails gdalwarp test.tif test2.tif
ERROR 1: Unable to compute a transformation between pixel/line and
georeferenced coordinates for test.tif.
There is no affine transformation and no GCPs.

I made tfw file test.tfw by hand as
1
0
0
-1
0
0

and then this is successful
gdalwarp test.tif test2.tif
Creating output file that is 588P x 321L.
Processing input file test.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

and also what you want to do
gdalwarp -te -1000 -1000 1000 1000  test.tif testi3.tif Creating output file
that is 2000P x 2000L.
Processing input file test.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

So I feel there is a bug if corner coordinates are 0,0. Please verify with a
handwritten tfw file and images with origo at, let's say, 1,1.

-Jukka Rahkonen-



> Thanks for any help.
> 
> Peter
> 




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



From david.m.baker at chk.com  Wed Feb  5 09:07:03 2014
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Wed, 5 Feb 2014 17:07:03 +0000
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <CANkM0ZA-gKNfmPHOv5gRRt1VdgXDVH=O_Y5mBzAdK_msbkvNyA@mail.gmail.com>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<loom.20140201T134421-608@post.gmane.org>
	<2A18A4344312134B937DF938D992264A0509C58F@OKCEXHPRD121.chkenergy.net>
	<loom.20140201T164744-319@post.gmane.org>	<52ED2B58.80700@ualg.pt>
	<loom.20140202T190802-59@post.gmane.org>
	<CAJ-aobdOiTwP3ELJdXwwZ-jH3-R6_uFTJyGDzoJm_xs1v4pOZg@mail.gmail.com>
	<loom.20140203T174405-722@post.gmane.org>
	<1391448372.14221.137.camel@octopi>
	<EFE5D7EE2EC8D3438FE02E356F81E35A022F5C@FITLK-EXMBX04.msvyvi.vaha.local>
	<2A18A4344312134B937DF938D992264A050A3112@OKCEXHPRD121.chkenergy.net>
	<CANkM0ZA-gKNfmPHOv5gRRt1VdgXDVH=O_Y5mBzAdK_msbkvNyA@mail.gmail.com>
Message-ID: <2A18A4344312134B937DF938D992264A050BD340@OKCEXHPRD122.chkenergy.net>

Klokan,

This looks like it could work.  This would be accessed with the GDAL_WCS driver?  If so, I see that there it requires Curl, and I have a Curl directory in my install, but I get an error when I try and access the data.

David

David M. Baker
Senior Advisor - Geoscience Technology
Chesapeake Energy Corporation
405-935-3715 office
405-496-5373 cell
david.m.baker at chk.com<mailto:david.m.baker at chk.com>

From: klokan at gmail.com [mailto:klokan at gmail.com] On Behalf Of Klokan Petr Pridal
Sent: Monday, February 03, 2014 1:38 PM
To: David Baker (Geoscience)
Cc: Rahkonen Jukka (Tike); gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Fast Pixel Access

Hi Jukka, David and others,

We were rendering in the past the elevation data into Mercator tiles with http://www.maptiler.com/, the follower of my GDAL2Tiles.py script - for extremely fast pixel access to the elevation values at given geographic location - without a need for server software for hosting such data. We made the tiles for CGIAR 90m DEM for whole world.

In fact the raw elevation was mapped into RGB space for this purpose. Decoding on the client side is then very easy and you have precise elevation values for the whole near area preloaded.

You may need to do something similar if you want to implement very fast client side hill-shading in web browser canvas (similar to http://dev.klokantech.com/klokan/hillshading/), or dynamic elevation profile drawn while moving the mouse over a map, and many other tasks with data loaded in the client directly.

The visualisation of the tiles is possible also in 3D, see: http://vimeo.com/29605292
For WebGL there are now more efficient ways (direct binary data structures instead of images).

See:
http://dev.klokantech.com/srtm/srtm_decode.html
http://www.klokantech.com/labs/dem-color-encoding/
http://dev.klokantech.com/srtm/googlemaps.html

There is a source code of the GDAL utility for encoding elevation data into RGB available online:
https://github.com/webglearth/gdaldem_web
but you may not need it, if direct reading via JavaScript in the web browser is not required for your application.

Regards,

Klokan Petr Pridal

On Mon, Feb 3, 2014 at 7:48 PM, David Baker (Geoscience) <david.m.baker at chk.com<mailto:david.m.baker at chk.com>> wrote:
Jukka,

No matter the endpoint the user uses to access the data, behind the scenes, there must be fast pixel access, correct?  Or are you saying that at WFS would do it quickly out of the box?

David

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org> [mailto:gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>] On Behalf Of Rahkonen Jukka (Tike)
Sent: Monday, February 03, 2014 11:37 AM
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Fast Pixel Access
Hi,

Perhaps, but in this game the rule was not to have any GIS servers. Myself I would rather consider WFS. It could send heights from single points but also a profile along a line or all values within a polygon.

-Jukka-

Brian Case [rush at winkey.org<mailto:rush at winkey.org>] wrote:

> -Jukka

> tileindex, mapserver, and the gdal wms driver



> On Mon, 2014-02-03 at 17:20 +0000, Jukka Rahkonen wrote:
>> Luke Roth <roth.luke <at> gmail.com<http://gmail.com>> writes:
>
> >
>> > Another thing that might speed up access is setting the config
>> option GDAL_DISABLE_READDIR_ON_OPEN = TRUE, either as an environment
>> variable or on the command line.  That should help with GDAL reading the
>> directory each time it opens a dataset.  I have an application which reads
>> one value from each of a large number of datasets and setting this option
>> made it run about 3 times faster.
>
>
> Hi,
>
> You are right. This config option makes GDAL to skip the reading of the
> remote directory and saves a lot of bandwidth:
>
> VRT case:
> Bytes Received:  4 244 509 (of which the vrt file: 4 192 577)
> Sequence (clock) duration:    00:00:09.9996000
> Was:
> Bytes Received:  6 459 443
> Sequence (clock) duration:    00:00:37.8130000
>
> BigTIFF case:
> Bytes Received:  2 158 917
> Sequence (clock) duration:    00:00:04.4368000
> Was:
> Bytes Received:  4 374 137
> Sequence (clock) duration:    00:00:30.9192000
>
>
> Conclusion:
> Both options are unsuitable for serious use while amusing to play with.
> Reading the BigTIFF tile offset index (or whatever it is) seems to mean
> about 2 MB of compultory payload traffic. Reading the VRT file means in this
> example 4 MB of payload. If this sort of net access to a large directory of
> raster files should be important for someone there should be a way to find
> the right raster file and righ data range in that file with minimum amount
> of bytes. Perhaps some kind of rtree indexed vrt file? First aid might be to
> keep the vrt file on the client side.
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev
________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is confidential or privileged and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
http://blog.klokan.cz/
http://www.maptiler.org/
http://www.oldmapsonline.org/

________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is confidential or privileged and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140205/6d8776bc/attachment-0001.html>

From pierre.carreaud at sites.fr  Wed Feb  5 09:19:31 2014
From: pierre.carreaud at sites.fr (Pierre CARREAUD)
Date: Wed, 5 Feb 2014 18:19:31 +0100
Subject: [gdal-dev] [GDAL-dev] convert rgba alpha layer to rgb white
Message-ID: <000601cf2296$6f229590$4d67c0b0$@carreaud@sites.fr>

Hi list,

I?m trying to assembly some RGBA tiff in one with gdalbuildvrt and then to
translate them to a RGB TIFF tiled file YCBCR jpeg compressed.

No problem
 But now, I would like to get a white color in the background
instead of the black.

 

The following commands work but I get nodata (and so, black) on any white
pixels whereas I just wanted to convert alpha to white
 The problem in on
the vrt.

 

gdalbuildvrt assembly.vrt -srcnodata b4 ?hidenodata -vrtnodata 255 *.tif

gdal_translate -of GTIFF -b 1 -b 2 -b 3 -co COMPRESS=JPEG -co
JPEG_QUALITY=95 -co TFW=YES -co BIGTIFF=YES -co ALPHA=NO -co TILED=YES -co
PHOTOMETRIC=YCBCR -co PROFILE=BASELINE assembly.vrt assembly_JPG.tif

gdaladdo -r gauss -ro --config COMPRESS_OVERVIEW JPEG --config
JPEG_QUALITY_OVERVIEW 95 --config BIGTIFF_OVERVIEW YES --config
PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL --config
NODATA_VALUES 255 assembly_JPG.tif 2 4 8 16 32 64 128 256

 

Do you have an idea? The problem is the is not ?init option, just -vrtnodata
?255 255 255? to fix both background color but also the nodata bandper band


 

Pierre CARREAUD

Sp?cialiste en imagerie num?rique

 


carte_voeux_2014

L?ING?NIERIE DE LA DURABILIT?

 

SITES ? Entit? ?le-de-France

Division du D?veloppement Technique

2 bis avenue du Centre

92500 Rueil-Malmaison, France

Tel : 01 41 39 02 00 / Fax : 01 41 39 02 01

 <http://www.sites.fr/> www.sites.fr

 

CARRES  EXPERTISE  cid:image002.jpg at 01CB7A74.CDE1E680  INSTRUMENTATION /
MESURES  cid:image002.jpg at 01CB7A74.CDE1E680  INGENIERIE

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140205/44da2e8f/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 6152 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140205/44da2e8f/attachment.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 717 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140205/44da2e8f/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.jpg
Type: image/jpeg
Size: 632 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140205/44da2e8f/attachment-0002.jpg>

From benedetta.onori at gmail.com  Thu Feb  6 04:22:01 2014
From: benedetta.onori at gmail.com (Benedetta Onori)
Date: Thu, 6 Feb 2014 13:22:01 +0100
Subject: [gdal-dev] editing NetCDF size using GDAL in C++ code
Message-ID: <CABGM7yZoemS1Y+gCbFYsxWnuX0oMKM3zONVT7sO69sm0a7t6kg@mail.gmail.com>

Hi all,
I have a question about NetCDF writing using GDAL.
The netcdf driver doesn't support the option GA_Update used to edit
dataset, but only GA_ReadOnly.
My question is: during the creation of a new netCDF dataset, how can I
differentiate
the sizes of different subsets?
(For example the subset 1 must be 100x100, subset 2 100x1, ...etc...)
Thank you for the attention

Regards

b.o.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140206/44a453f0/attachment.html>

From DCarreira at edia.pt  Thu Feb  6 05:20:53 2014
From: DCarreira at edia.pt (Duarte Carreira)
Date: Thu, 6 Feb 2014 13:20:53 +0000
Subject: [gdal-dev] how to create just the msk file from a rgba vrt file
Message-ID: <b22326d6b4a94d16b6517b1372130273@AMSPR07MB230.eurprd07.prod.outlook.com>

Hi there.

Continuing with trying to cut processing times, I am trying to get a msk file from a vrt mosaic, without converting the entire vrt to tif just to get the msk file.

In other words, how can we create a msk file from the alpha band without rewriting the whole image?

Thanks again.
Duarte







































Duarte Carreira
Diretor | Dep. Informa??o Geogr?fica e Cartografia

www.edia.pt<http://www.edia.pt>
www.alqueva.com.pt<http://www.alqueva.com.pt>
Tel. +351 284315100

[http://www.edia.pt/edia/images/edia_logo2.gif]<http://www.edia.pt>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140206/1c89b71a/attachment.html>

From etourigny.dev at gmail.com  Thu Feb  6 06:31:08 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 6 Feb 2014 12:31:08 -0200
Subject: [gdal-dev] editing NetCDF size using GDAL in C++ code
In-Reply-To: <CABGM7yZoemS1Y+gCbFYsxWnuX0oMKM3zONVT7sO69sm0a7t6kg@mail.gmail.com>
References: <CABGM7yZoemS1Y+gCbFYsxWnuX0oMKM3zONVT7sO69sm0a7t6kg@mail.gmail.com>
Message-ID: <CA+TxYvMVaORod=T+7auHqQBJALTL-iFpJ9-w0w=u_ydG9oYrLQ@mail.gmail.com>

What do you mean by subsets?  Do you mean datasets (known as variables in
netcdf terminology)? If so, there is no way the netcdf driver can create a
netcdf file with subdatasets, sorry.

A workaround is to use gdal to create a file for each subdataset and then
merge them with the nco commandline tools (e.g. ncks -A file1.nc file2.nc).

cheers, Etienne


On Thu, Feb 6, 2014 at 10:22 AM, Benedetta Onori
<benedetta.onori at gmail.com>wrote:

> Hi all,
> I have a question about NetCDF writing using GDAL.
> The netcdf driver doesn't support the option GA_Update used to edit
> dataset, but only GA_ReadOnly.
> My question is: during the creation of a new netCDF dataset, how can I differentiate
> the sizes of different subsets?
> (For example the subset 1 must be 100x100, subset 2 100x1, ...etc...)
> Thank you for the attention
>
> Regards
>
> b.o.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140206/9b34da98/attachment.html>

From benedetta.onori at gmail.com  Thu Feb  6 07:05:10 2014
From: benedetta.onori at gmail.com (Benedetta Onori)
Date: Thu, 6 Feb 2014 16:05:10 +0100
Subject: [gdal-dev] editing NetCDF size using GDAL in C++ code
In-Reply-To: <CA+TxYvMVaORod=T+7auHqQBJALTL-iFpJ9-w0w=u_ydG9oYrLQ@mail.gmail.com>
References: <CABGM7yZoemS1Y+gCbFYsxWnuX0oMKM3zONVT7sO69sm0a7t6kg@mail.gmail.com>
	<CA+TxYvMVaORod=T+7auHqQBJALTL-iFpJ9-w0w=u_ydG9oYrLQ@mail.gmail.com>
Message-ID: <CABGM7yaH8F=4m-oAuLP9oohwxzOk1nuA1E7d0qNHpkeivaujnA@mail.gmail.com>

In the creation of a NetCDF I treat subsets as bands.
with gdalinfo I get this:

Subdatasets:
  SUBDATASET_1_NAME=NETCDF:"myfile.nc":Band1
  SUBDATASET_1_DESC=[10000x1] Band1 (64-bit floating-point)
  SUBDATASET_2_NAME=NETCDF:"myfile.nc":Band2
  SUBDATASET_2_DESC=[10000x1] Band2 (64-bit floating-point)
  SUBDATASET_3_NAME=NETCDF:"myfile.nc":Band3
  SUBDATASET_3_DESC=[10000x1] Band3 (64-bit floating-point)
  SUBDATASET_4_NAME=NETCDF:"myfile.nc":Band4
  SUBDATASET_4_DESC=[10000x1] Band4 (64-bit floating-point)
<gdal-dev at lists.osgeo.org>
So it recognizes bands as netcdf subsets, but with Create( ) only one size
for all bands is possible and not different sizes for different
bands-subsets.



2014-02-06 Etienne Tourigny <etourigny.dev at gmail.com>:

> What do you mean by subsets?  Do you mean datasets (known as variables in
> netcdf terminology)? If so, there is no way the netcdf driver can create a
> netcdf file with subdatasets, sorry.
>
> A workaround is to use gdal to create a file for each subdataset and then
> merge them with the nco commandline tools (e.g. ncks -A file1.nc file2.nc
> ).
>
> cheers, Etienne
>
>
> On Thu, Feb 6, 2014 at 10:22 AM, Benedetta Onori <
> benedetta.onori at gmail.com> wrote:
>
>> Hi all,
>> I have a question about NetCDF writing using GDAL.
>> The netcdf driver doesn't support the option GA_Update used to edit
>> dataset, but only GA_ReadOnly.
>> My question is: during the creation of a new netCDF dataset, how can I differentiate
>> the sizes of different subsets?
>> (For example the subset 1 must be 100x100, subset 2 100x1, ...etc...)
>> Thank you for the attention
>>
>> Regards
>>
>> b.o.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140206/cc17cf14/attachment.html>

From MLewis at ngms.eu.com  Thu Feb  6 07:27:33 2014
From: MLewis at ngms.eu.com (Martin Lewis)
Date: Thu, 6 Feb 2014 07:27:33 -0800 (PST)
Subject: [gdal-dev] WMS Issues Two Requests
Message-ID: <1391700453050-5102296.post@n6.nabble.com>

I need a little help on WMS, it appears to decide that my one request should
be two and hence is slowing the whole thing up
I create an XML file and it has the following attributes for DataWindow:

       UpperLeftX                       -10.2210525
       UpperLeftY                        57.7424
       LowerRightX                     4.88191
       LowerRightY                     51.3579
       SizeX                               1076
       SizeY                                787

BlockSize is left at default of 1024 for X and Y

When the request is issued I am noticing in Wireshark TWO requests are sent
that appear to have the following BBOX parameters:

Request 1
------------
-10.2210525
49.43529033
4.15203
57.7424

Request 2
------------
4.15203
49.43529033
18.52511
57.7424

So a couple of questions:
1. Why the two requests?
2. Why is the area that ends up in the two requests a lot bigger than the
size of the DataWindow that was requested?
3. What am I missing? Is it SizeX being slightly bigger than the block size
causing the two fetches? How can it be optimised?



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/WMS-Issues-Two-Requests-tp5102296.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From MLewis at ngms.eu.com  Thu Feb  6 07:41:10 2014
From: MLewis at ngms.eu.com (Lewis, Martin (UK))
Date: Thu, 6 Feb 2014 15:41:10 +0000
Subject: [gdal-dev] WMS Issues two requests?
Message-ID: <3F2C81A494EA124499F543BE09DF83D3E90F43F510@APOLLOCCR.ng.local>

I need a little help on WMS, it appears to decide that my one request should be two and hence is slowing the whole thing up
I create an XML file and it has the following attributes for DataWindow:

       UpperLeftX                       -10.2210525
       UpperLeftY                        57.7424
       LowerRightX                     4.88191
       LowerRightY                     51.3579
       SizeX                               1076
       SizeY                                787

BlockSize is left at default of 1024 for X and Y

When the request is issued I am noticing in Wireshark TWO requests are sent that appear to have the following BBOX parameters:

Request 1
------------
-10.2210525
49.43529033
4.15203
57.7424

Request 2
------------
4.15203
49.43529033
18.52511
57.7424

So a couple of questions:
1. Why the two requests?
2. Why is the area that ends up in the two requests a lot bigger than the size of the DataWindow that was requested?
3. What am I missing? Is it SizeX being slightly bigger than the block size causing the two fetches? How can it be optimised?

Thanks

Martin

________________________________

Please note that NGMSE is in the process of migrating email addresses from the current 'jsmith at ngms.eu.com' to 'john.smith at euro.ngc.com'. All email sent to a @ngms.eu.com address will continue to be delivered to the intended recipient at their new address - however please update your contacts as you begin to receive replies from the new 'firstname.lastname at euro.ngc.com' address.

Northrop Grumman Mission Systems Europe Ltd is a subsidiary of Northrop Grumman Corporation within its Information Systems sector. The registered office of Northrop Grumman Mission Systems Europe Ltd is as follows:

Leander House,
4600 Parkway,
Solent Business Park,
Fareham, PO15 7AZ
United Kingdom
Tel: +44 (0) 845 67 102 67
Fax: +44 (0) 845 67 102 68

Registered in England No. 2741988

This email is for the intended addressees only. If you have received it in error then you should not use, retain, disseminate or otherwise deal with it. Please notify the sender by return email. The views of the author may not necessarily constitute the views of Northrop Grumman Mission Systems Europe Ltd. Nothing in this email shall bind Northrop Grumman Mission Systems Europe Ltd in any contract or obligation.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140206/6a6a03d2/attachment-0001.html>

From etourigny.dev at gmail.com  Thu Feb  6 09:05:33 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 6 Feb 2014 15:05:33 -0200
Subject: [gdal-dev] editing NetCDF size using GDAL in C++ code
In-Reply-To: <CABGM7yaH8F=4m-oAuLP9oohwxzOk1nuA1E7d0qNHpkeivaujnA@mail.gmail.com>
References: <CABGM7yZoemS1Y+gCbFYsxWnuX0oMKM3zONVT7sO69sm0a7t6kg@mail.gmail.com>
	<CA+TxYvMVaORod=T+7auHqQBJALTL-iFpJ9-w0w=u_ydG9oYrLQ@mail.gmail.com>
	<CABGM7yaH8F=4m-oAuLP9oohwxzOk1nuA1E7d0qNHpkeivaujnA@mail.gmail.com>
Message-ID: <CA+TxYvNe_zPpDKnwd_VHoJ2=ySKWJn=Mwgriw8Wnv26CELinbA@mail.gmail.com>

For a given dataset, all bands have to be of same dimensions in order to be
treated as a single dataset, and not a number of different datasets.

This is documented in the GDAL data model page, right on top [1].

"A dataset (represented by the
GDALDataset<http://www.gdal.org/classGDALDataset.html> class)
is an assembly of related raster bands and some information common to them
all. In particular the dataset has a concept of the raster size (in pixels
and lines) that applies to all the bands. The dataset is also responsible
for the georeferencing transform and coordinate system definition of all
bands."

[1] http://www.gdal.org/gdal_datamodel.html


I'm sorry but I don't understand what you mean by "In the creation of a
NetCDF I treat subsets as bands.".

Is this file myfile.nc created by gdal? If the above explanation is not
satisfactory, please provide the exact steps you are doing.


cheers, Etienne





On Thu, Feb 6, 2014 at 1:05 PM, Benedetta Onori
<benedetta.onori at gmail.com>wrote:

> In the creation of a NetCDF I treat subsets as bands.
> with gdalinfo I get this:
>
> Subdatasets:
>   SUBDATASET_1_NAME=NETCDF:"myfile.nc":Band1
>   SUBDATASET_1_DESC=[10000x1] Band1 (64-bit floating-point)
>   SUBDATASET_2_NAME=NETCDF:"myfile.nc":Band2
>   SUBDATASET_2_DESC=[10000x1] Band2 (64-bit floating-point)
>   SUBDATASET_3_NAME=NETCDF:"myfile.nc":Band3
>   SUBDATASET_3_DESC=[10000x1] Band3 (64-bit floating-point)
>   SUBDATASET_4_NAME=NETCDF:"myfile.nc":Band4
>   SUBDATASET_4_DESC=[10000x1] Band4 (64-bit floating-point)
> <gdal-dev at lists.osgeo.org>
> So it recognizes bands as netcdf subsets, but with Create( ) only one
> size for all bands is possible and not different sizes for different
> bands-subsets.
>
>
>
> 2014-02-06 Etienne Tourigny <etourigny.dev at gmail.com>:
>
> What do you mean by subsets?  Do you mean datasets (known as variables in
>> netcdf terminology)? If so, there is no way the netcdf driver can create a
>> netcdf file with subdatasets, sorry.
>>
>> A workaround is to use gdal to create a file for each subdataset and then
>> merge them with the nco commandline tools (e.g. ncks -A file1.nc file2.nc
>> ).
>>
>> cheers, Etienne
>>
>>
>> On Thu, Feb 6, 2014 at 10:22 AM, Benedetta Onori <
>> benedetta.onori at gmail.com> wrote:
>>
>>> Hi all,
>>> I have a question about NetCDF writing using GDAL.
>>> The netcdf driver doesn't support the option GA_Update used to edit
>>> dataset, but only GA_ReadOnly.
>>> My question is: during the creation of a new netCDF dataset, how can I differentiate
>>> the sizes of different subsets?
>>> (For example the subset 1 must be 100x100, subset 2 100x1, ...etc...)
>>> Thank you for the attention
>>>
>>> Regards
>>>
>>> b.o.
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140206/09c0cfbd/attachment.html>

From rush at winkey.org  Thu Feb  6 13:51:06 2014
From: rush at winkey.org (Brian Case)
Date: Thu, 06 Feb 2014 13:51:06 -0800
Subject: [gdal-dev] how to create just the msk file from a rgba vrt file
In-Reply-To: <b22326d6b4a94d16b6517b1372130273@AMSPR07MB230.eurprd07.prod.outlook.com>
References: <b22326d6b4a94d16b6517b1372130273@AMSPR07MB230.eurprd07.prod.outlook.com>
Message-ID: <1391723466.14221.193.camel@octopi>

Duarte


gdaltranslate -of outfrmt -b 1 -b 2 -b 3 -mask 4 infile outfile 

brian

you can output to vrt's
just dont try to mosaic masked or aphad files with vrts

brian

On Thu, 2014-02-06 at 13:20 +0000, Duarte Carreira wrote:
> Hi there.
> 
>  
> 
> Continuing with trying to cut processing times, I am trying to get a
> msk file from a vrt mosaic, without converting the entire vrt to tif
> just to get the msk file.
> 
>  
> 
> In other words, how can we create a msk file from the alpha band
> without rewriting the whole image?
> 
>  
> 
> Thanks again.
> 
> Duarte
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
> 
> 
> 
> Duarte Carreira
> Diretor | Dep. Informa??o Geogr?fica e Cartografia
> 
> 
> www.edia.pt
> 
> www.alqueva.com.pt
> Tel. +351 284315100
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From kansal.k at gmail.com  Thu Feb  6 21:45:51 2014
From: kansal.k at gmail.com (Kshitij Kansal)
Date: Fri, 7 Feb 2014 11:15:51 +0530
Subject: [gdal-dev] GDAL-Correlator Compilation Problems
Message-ID: <CAKTWcS=B=URW6-+=fQfH2WhuADnq+MKViU=LT1yH6PqXPBjdfg@mail.gmail.com>

Hello

I was to trying to compile the code for GDAL-Correlator that I cloned from
https://github.com/migal-drew/GDAL-correlator

Even though I have included all the header files in the Include Path and
gdal and cpl files are already included, I am getting the following errors

/*
In function `GatherFeaturePoints(GDALDataset*, int*,
GDALFeaturePointsCollection*, int, int, double)':

undefined reference to `CPLError

undefined reference to `GDALDataset::GetRasterBand(int)'

undefined reference to
GDALSimpleSURF::ConvertRGBToLuminosity(GDALRasterBand*, GDALRasterBand*,
GDALRasterBand*, int, int, double**, int, int)'
*/

and many more errors like this.

All the above functions are a part of some header file. Like CPLError() has
its definition in cpl_error.h which is already included, but I am still
getting this error.

Can anyone help?

Regards,

Kshitij Kansal

Lab For Spatial Informatics,

IIIT Hyderabad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140207/7d3a2434/attachment.html>

From bishop.dev at gmail.com  Thu Feb  6 23:57:14 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Fri, 07 Feb 2014 11:57:14 +0400
Subject: [gdal-dev] GDAL-Correlator Compilation Problems
In-Reply-To: <CAKTWcS=B=URW6-+=fQfH2WhuADnq+MKViU=LT1yH6PqXPBjdfg@mail.gmail.com>
References: <CAKTWcS=B=URW6-+=fQfH2WhuADnq+MKViU=LT1yH6PqXPBjdfg@mail.gmail.com>
Message-ID: <52F491DA.4070005@gmail.com>

Hi,

the Correlator code was merged into GDAL during GSoC 2012. Why do you 
want separate build of this functionality?
See https://svn.osgeo.org/gdal/trunk/gdal/alg/gdal_alg.h the method 
GDALComputeMatchingPoints

Best regards,
     Dmitry

07.02.2014 9:45, Kshitij Kansal ?????:
> Hello
>
> I was to trying to compile the code for GDAL-Correlator that I cloned 
> from
> https://github.com/migal-drew/GDAL-correlator
>
> Even though I have included all the header files in the Include Path 
> and gdal and cpl files are already included, I am getting the 
> following errors
>
> /*
> In function `GatherFeaturePoints(GDALDataset*, int*, 
> GDALFeaturePointsCollection*, int, int, double)':
>
> undefined reference to `CPLError
>
> undefined reference to `GDALDataset::GetRasterBand(int)'
>
> undefined reference to 
> GDALSimpleSURF::ConvertRGBToLuminosity(GDALRasterBand*, 
> GDALRasterBand*, GDALRasterBand*, int, int, double**, int, int)'
> */
>
> and many more errors like this.
>
> All the above functions are a part of some header file. Like 
> CPLError() has its definition in cpl_error.h which is already 
> included, but I am still getting this error.
>
> Can anyone help?
>
> Regards,
>
>     Kshitij Kansal
>
>     Lab For Spatial Informatics,
>
>     IIIT Hyderabad
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140207/caf78607/attachment.html>

From jukka.rahkonen at mmmtike.fi  Fri Feb  7 00:57:06 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 7 Feb 2014 08:57:06 +0000 (UTC)
Subject: [gdal-dev] WMS Issues Two Requests
References: <1391700453050-5102296.post@n6.nabble.com>
Message-ID: <loom.20140207T083703-734@post.gmane.org>

Martin Lewis <MLewis <at> ngms.eu.com> writes:

> 
> I need a little help on WMS, it appears to decide that my one request should
> be two and hence is slowing the whole thing up
> I create an XML file and it has the following attributes for DataWindow:
> 
>        UpperLeftX                       -10.2210525
>        UpperLeftY                        57.7424
>        LowerRightX                     4.88191
>        LowerRightY                     51.3579
>        SizeX                               1076
>        SizeY                                787
> 
> BlockSize is left at default of 1024 for X and Y
> 
> When the request is issued I am noticing in Wireshark TWO requests are sent
> that appear to have the following BBOX parameters:
> 
> Request 1
> ------------
> -10.2210525
> 49.43529033
> 4.15203
> 57.7424
> 
> Request 2
> ------------
> 4.15203
> 49.43529033
> 18.52511
> 57.7424
> 
> So a couple of questions:
> 1. Why the two requests?
> 2. Why is the area that ends up in the two requests a lot bigger than the
> size of the DataWindow that was requested?
> 3. What am I missing? Is it SizeX being slightly bigger than the block size
> causing the two fetches? How can it be optimised?

Hi,

You did not tell much details so I must be guessing. Was the request you
made something like "gdal_translate -of GTiff wms_test.xml test_out.tif"?

You have perhaps defined the extents and size what you want for the ouput
image in the DataWindow element of the XML window. It it better not to do it
that way. Think that in the XML file you are giving the limits for what is
possible to do with this WMS so you can decide later what you really want to
do just that time.

The extents of WMS source in the XML file should tell the largest extents
which are supported for that layer in the source SRS units. For a global
WMS84 service they are -180 -90 180 90 but if you know your coverage better,
use the real extents. That window is used as an output image extent too if
you do not give any other window with your request later with either -srcwin
or -prjwin parameters. If it is a WMS service then usually you do not want
always to get a map covering the whole area. Instead selecting a region of
interest with -prjwin is more like a standard usage. Same applies to to size
of the output image.

If I have understood right the meaning of SizeX and SizeY in XML is to tell
how large the whole coverage is expressed in pixels in native resolution.
Thus a WMS layer covering 100 by 100 km with 0,5 m resolution would have
200000 both as SizeX and SizeY.  However, I am not sure if the values need
to be correct and what happens if they are not. It is hard to know what the
right values should be if the WMS is not your own and it advertizes the
extents as -180 -90 180 90 because WMS does not advertize native resolution
anywhere. I can see values <SizeX>2949120</SizeX><SizeY>1474560</SizeY> in 
http://www.gdal.org/frmt_wms_onearth_global_mosaic.xml and values
<SizeX>65536</SizeX><SizeY>32768</SizeY> in
http://www.gdal.org/frmt_wms_tileservice_bmng.xml

Be aware that if SizeX and SizeY are used for output image size if it is not
set with -outsize. You may not want to get 2949120x1474569 sized image, so
use -outsize.

WMS servers have usually some limits for the size of an output image. For
example Mapserver has a default maxsize 2048x2048 pixels. Block size in the
XML file is for that and you were correct, because you have a block size
1024x1024 and you want a 1076 pixels wide image GDAL is making two requests
and merges and cuts them on the client side. Generally it is a good thing to
do, but you can increase the block size if the server allows it.

Thus the conclusion. What you wanted to hear is the advice to increase the
BlockSizeX and BlockSizeY values to for example 2048 and you will get rid of
the second WMS request. However, it would be good to think a little further,
edit your XML file to cover larger extents and announce more realistic size
in pixels and finally send a request like 

gdal_translate -of GTiff -outsize 1076 787 -prjwin  -10.2210525 57.7424 
4.88191  51.3579 input_wms.xml output.tif

-Jukka Rahkonen-


From DCarreira at edia.pt  Fri Feb  7 01:55:06 2014
From: DCarreira at edia.pt (Duarte Carreira)
Date: Fri, 7 Feb 2014 09:55:06 +0000
Subject: [gdal-dev] how to create just the msk file from a rgba vrt file
In-Reply-To: <1391723466.14221.193.camel@octopi>
References: <b22326d6b4a94d16b6517b1372130273@AMSPR07MB230.eurprd07.prod.outlook.com>
	<1391723466.14221.193.camel@octopi>
Message-ID: <ad11349af9204b3185cdc7795731c96e@AMSPR07MB230.eurprd07.prod.outlook.com>

Thanks Brian.

But this way you rewrite the whole image to disk. It uses lots of disk space and takes forever.

I want to avoid that and just get the mask out to a msk file as fast as possible.

I don't want to convert my rgba vrt mosaic.

The final objective is to get a msk file I can use with the simple rgb vrt mosaic. Then I'll be able to build overviews with jpeg/ycbcr compression which I can't do with rgba vrt because of the 4 bands.

For now I have tried 3 ways:

1) use gdal_rasterize to create a mask directly from the mask polygon shapefile. Then just edit the rgb vrt mosaic and add a  maskband to it. The problem here is gdaladdo does not honor the maskband. This is the fastest way I know, pitty it doesn't work in the end.

2) use gdal_translate like you suggested but use -scale to write all 0s in all 3 bands, and compress with deflate. You get a valid mask and a very, very small useless mosaic. This works but takes a while still.

3) use gdal_translate like you suggested but exaggerate the jpeg compression so it errors out (jpeg_quality=15). You get an invalid 1kb mosaic and an apparently good msk. But it's corrupted in some way. So doesn't work.

I think #1 has potential. If there was a way to somehow turn the tif created by gdal_rasterize into a "true" mask file and have it honored by gdaladdo we would have a winner.

Maybe there's a way to directly export the alpha band from the rgba vrt mosaic to a mks file without writing anything else? That I guess would be the fastest way of all.

Duarte

-----Mensagem original-----
De: Brian Case [mailto:rush at winkey.org] 
Enviada: quinta-feira, 6 de Fevereiro de 2014 21:51
Para: Duarte Carreira
Cc: gdal-dev at lists.osgeo.org
Assunto: Re: [gdal-dev] how to create just the msk file from a rgba vrt file

Duarte


gdaltranslate -of outfrmt -b 1 -b 2 -b 3 -mask 4 infile outfile 

brian

you can output to vrt's
just dont try to mosaic masked or aphad files with vrts

brian

On Thu, 2014-02-06 at 13:20 +0000, Duarte Carreira wrote:
> Hi there.
> 
>  
> 
> Continuing with trying to cut processing times, I am trying to get a 
> msk file from a vrt mosaic, without converting the entire vrt to tif 
> just to get the msk file.
> 
>  
> 
> In other words, how can we create a msk file from the alpha band 
> without rewriting the whole image?
> 
>  
> 
> Thanks again.
> 
> Duarte
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
>  
> 
> 
> 
> 
> Duarte Carreira
> Diretor | Dep. Informa??o Geogr?fica e Cartografia
> 
> 
> www.edia.pt
> 
> www.alqueva.com.pt
> Tel. +351 284315100
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From MLewis at ngms.eu.com  Fri Feb  7 02:09:40 2014
From: MLewis at ngms.eu.com (Martin Lewis)
Date: Fri, 7 Feb 2014 02:09:40 -0800 (PST)
Subject: [gdal-dev] WMS Issues Two Requests
In-Reply-To: <loom.20140207T083703-734@post.gmane.org>
References: <loom.20140207T083703-734@post.gmane.org>
Message-ID: <1391767780489-5102449.post@n6.nabble.com>

Thanks for the post.
A little background may help - sorry about that.
This is for a software program using C++ where the user can pan a map and a
request is made to the WMS to fetch that current map in view.
I hand rolled a prototype where I issued my own WMS request setting the
'bbox' parameters to the extents of the view the user was currently looking
at and width and height to size of the image that we wanted -all was great -
we just got a slice of map returned that we were interested in.

This prototype was then adapted to use GDAL, I have then picked this up to
'fix' it as it was deemed not fast enough.

Currently an XML file is created with the WMS parameters, it is then passed
to GDALOpen().
The resulting dataset is then read using ds->ReadRasterIO().

It seems that when it was originally converted to GDAL, the previous
engineer used the same 'bbox' parameters in the DataWindow extents. The
original 'width' and 'height' values are passed in the SizeX and SizeY tags
in the XML

>From what you are suggesting, this is totally wrong usage for these
parameters in the XML. 

What I am struggling to see now is how programmatically in C++ (rather than
gdal_translate), I can replicate the '-outsize' and '-prjwin' to get GDAL to
issue one WMS request where the 'bbox' is set to extents that I want e.g
-10.22, 57.74, 4.88, 51.35 and 'Width' and 'Height' in the WMS request are
set to 1076 and 787?









--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Re-WMS-Issues-Two-Requests-tp5102423p5102449.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Fri Feb  7 04:52:08 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 7 Feb 2014 12:52:08 +0000 (UTC)
Subject: [gdal-dev] WMS Issues Two Requests
References: <loom.20140207T083703-734@post.gmane.org>
	<1391767780489-5102449.post@n6.nabble.com>
Message-ID: <loom.20140207T134104-668@post.gmane.org>

Martin Lewis <MLewis <at> ngms.eu.com> writes:


> It seems that when it was originally converted to GDAL, the previous
> engineer used the same 'bbox' parameters in the DataWindow extents. The
> original 'width' and 'height' values are passed in the SizeX and SizeY tags
> in the XML
> 
> From what you are suggesting, this is totally wrong usage for these
> parameters in the XML. 

No, I just made a wrong guess. You are allowed to tweak with the XML file
and it should work if the XML is created dynamically and correctly for each
request.

For preventing the second request just take out the blocksize elements or
better, put them to suit with the limits set by the WMS server. If you do
not know those limits, they are easy to test. Width=953 is OK here
http://demo.mapserver.org/cgi-bin/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&BBOX=-180,-90,180,90&SRS=EPSG:4326&WIDTH=953&HEIGHT=480&LAYERS=bluemarble,continents,country_bounds,cities&STYLES=&FORMAT=image/png&TRANSPARENT=true

but width=3000 will give an error; iterate and you will find that the server
is using the Mapserver default value 2048.

-Jukka Rahkonen-


From MLewis at ngms.eu.com  Fri Feb  7 06:08:07 2014
From: MLewis at ngms.eu.com (Martin Lewis)
Date: Fri, 7 Feb 2014 06:08:07 -0800 (PST)
Subject: [gdal-dev] WMS Issues Two Requests
In-Reply-To: <loom.20140207T134104-668@post.gmane.org>
References: <loom.20140207T083703-734@post.gmane.org>
	<1391767780489-5102449.post@n6.nabble.com>
	<loom.20140207T134104-668@post.gmane.org>
Message-ID: <1391782087027-5102514.post@n6.nabble.com>

Thanks Jukka.

I have been having a play around and the 'width' and 'height' sent in the
WMS Request string appears to be BlockSizeX and BlockSizeY and I think I
understand now.

Removing the BlockSizeX and Y  from the XML meant that block size was
defaulted to 1024 and 1024 - again resulting in two requests.

Setting BlockSize to 256 and 256 and you get loads of requests as expected
to fulfil the whole request of 1076 * 787

However setting the BlockSizeX and Y to the same as SizeX and SizeY (1076,
787) in the DataWindow section, created a WMS Request that had 'height' and
'width' set to 787 and 1076 - which appears to be exactly what is required.

This cut the time from start of request to drawing on the screen by 5 times
- from 5 secs to 1 sec, exactly what I was after.

I suppose some WMS servers may not support the BlockSize that is being
requested. (when I set the BlockSize to 2048, one map server was returning
an error saying it was above the allowed 2001 width!!?)

However at the current moment what is requested appears to be within limits
of all the servers we talk to.

Is it as simple as this or is there anything that I have missed?

Once again thanks for your help.

Martin



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Re-WMS-Issues-Two-Requests-tp5102423p5102514.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From nicolas.g-dev at outlook.fr  Fri Feb  7 06:27:00 2014
From: nicolas.g-dev at outlook.fr (Nicolas G)
Date: Fri, 7 Feb 2014 15:27:00 +0100
Subject: [gdal-dev] TOC sub-dataset retrieving when frame with same coverage
 share the same boundary rectangle.
Message-ID: <SNT151-W560ADB47F666CDFC3E6A4ACF970@phx.gbl>



Hi, 



I?m using GDAL to get the CADRG database sub-dataset list.


As an example (TOC file content):

- Only one boundary rectangle defined in ?boundary rectangle section?,

- In ?frame file index section?, I have two frames covering the same
area (same resolution, ?, but different functional content),

- These two frames are stored in different path but all referring to the
same boundary rectangle.


Then in that case, the message "Frame entry(%d,%d) for frame file index
%d was already found." is raised by GDAL when loading the TOC file, and finally
only one sub-dataset is given back to me(the first one of the TOC file) ->
method ?RPFTOCReadFromBuffer()? of Rpftocfile.cpp.


It seems that GDAL uses boundary rectangles and frame files to build the
sub-dataset list and if, for a same boundary rectangle, two or more frames with
the same coverage belong to different path 
then only one GDAL sub-dataset is created.


Does someone can help me and explain me how to access the data of these
two frames files (same coverage, same boundary rectangle but different path)
through GDAL API?


Or is there any development on this subject?

 

Thanks,

 

Nicolas



 

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140207/c67958ff/attachment-0001.html>

From woodbri at swoodbridge.com  Fri Feb  7 06:35:13 2014
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Fri, 07 Feb 2014 09:35:13 -0500
Subject: [gdal-dev] How to fix gdalwarp warning?
Message-ID: <52F4EF21.7050605@swoodbridge.com>

How does one do "Converting the dataset  prior to 24/32 bit is advised."?

Warning: Input file 
/maps/images.tmp/844219fb7ca86093d82b14376b56b875/modis-chlo
ra-201402071850.tif has a color table, which will likely lead to bad 
results whe
n using a resampling method other than nearest neighbour. Converting the 
dataset
  prior to 24/32 bit is advised.

Thanks,
   -Steve

From jukka.rahkonen at mmmtike.fi  Fri Feb  7 07:07:46 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 7 Feb 2014 15:07:46 +0000 (UTC)
Subject: [gdal-dev] How to fix gdalwarp warning?
References: <52F4EF21.7050605@swoodbridge.com>
Message-ID: <loom.20140207T160726-336@post.gmane.org>

Stephen Woodbridge <woodbri <at> swoodbridge.com> writes:

> 
> How does one do "Converting the dataset  prior to 24/32 bit is advised."?

For example with http://www.gdal.org/pct2rgb.html

-Jukka Rahkonen-



From even.rouault at mines-paris.org  Fri Feb  7 07:14:21 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 07 Feb 2014 16:14:21 +0100
Subject: [gdal-dev] TOC sub-dataset retrieving when frame with same
	coverage share the same boundary rectangle.
In-Reply-To: <SNT151-W560ADB47F666CDFC3E6A4ACF970@phx.gbl>
References: <SNT151-W560ADB47F666CDFC3E6A4ACF970@phx.gbl>
Message-ID: <1391786061.52f4f84ddf19c@imp.free.fr>

Selon Nicolas G <nicolas.g-dev at outlook.fr>:

hi

yes you have well described the behaviour of the driver. The
subdatasets match the boundary rectangles
And it is very odd to have two frames with same col row
coordinates for the same boundary rectangle.
in your case you have to directly open the nitf tile instead
of the a.toc

> Hi,
>
>
>
> I?m using GDAL to get the CADRG database sub-dataset list.
>
>
> As an example (TOC file content):
>
> - Only one boundary rectangle defined in ?boundary rectangle section?,
>
> - In ?frame file index section?, I have two frames covering the same
> area (same resolution, ?, but different functional content),
>
> - These two frames are stored in different path but all referring to the
> same boundary rectangle.
>
>
> Then in that case, the message "Frame entry(%d,%d) for frame file index
> %d was already found." is raised by GDAL when loading the TOC file, and
> finally
> only one sub-dataset is given back to me(the first one of the TOC file) ->
> method ?RPFTOCReadFromBuffer()? of Rpftocfile.cpp.
>
>
> It seems that GDAL uses boundary rectangles and frame files to build the
> sub-dataset list and if, for a same boundary rectangle, two or more frames
> with
> the same coverage belong to different path
> then only one GDAL sub-dataset is created.
>
>
> Does someone can help me and explain me how to access the data of these
> two frames files (same coverage, same boundary rectangle but different path)
> through GDAL API?
>
>
> Or is there any development on this subject?
>
>
>
> Thanks,
>
>
>
> Nicolas
>
>
>
>
>
>



From kansal.k at gmail.com  Fri Feb  7 09:10:16 2014
From: kansal.k at gmail.com (Kshitij Kansal)
Date: Fri, 7 Feb 2014 22:40:16 +0530
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
Message-ID: <CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>

Hello

Based on all suggestions and comments above, I have come up with one thing.

The most important thing that could have been a road block for this project
was licence issues which was pointed by Even Rouault.

I am interested in implementing the SIFT or ASIFT algorithms for automatic
geo-referencing which I proposed in above mails. I am interested in making
a separate tool which will be completely based on the GDAL and maintained
by GDAL community. I looked into the GDAL-correlator idea which was also
implemented as a part of GSoC. That idea uses only *SIMPLE SURF *algorithm
for control point detection and is only *limited to small size three band
imagery(RGB)*.

I am interested in developing something that is fully automated and works
on large multi band imagery.But the above two algorithms that I am planning
to use come up with the licence that does not allows the free use for
commercial purposes. The free use of above algorithm are restricted to *"non
profit research and non profit educational purposes"*(in case of
ASIFT) and *"research
purposes only" *(in case of SIFT).

This means that the final product as a result of this product will also be
bounded by the above licences. It can not go into GDAL's main distribution
but can be used as a separate utility of GDAL for non-commercial uses only.
Basically the commercial use of the tool won't be allowed without approval
from the concerned people.

Your views and suggestions are highly appreciated.

Regards,

Kshitij Kansal

Lab For Spatial Informatics,

IIIT Hyderabad



On Thu, Jan 30, 2014 at 12:25 PM, Kshitij Kansal <kansal.k at gmail.com> wrote:

> Hello
>
> @Jukka Rahkonen: The OSSIM project (the link you provided) is more of
> image orthorectification. Although
> they are doing image co-registration but its as one of the steps of
> orthorectification(I could only understand this from the manual).
> Also I am not sure of the techniques they are using for this purposes.
> (Its written corner point detection but How?)
> I am new to OSSIM, so not aware of this thing's functionality and
> accuracy. I am in the process of estimating it.
>
> Thank you for pointing this out.
>
> Coming to the Frank Warmerdam's blog (http://fwarmerdam.blogspot.fi/).
> Here the author is talking about writing a code for converting the GCP's
> into RPC's. But the next question comes is where is he getting GCP's from.
> Now this is the part where I aim to work on and improve.
>
> Given two images, if we can automatically extract GCP's from them then we
> are in a way speeding up and automating this whole process. Once we have
> GCP, there are a lot of things that we can do from them like
> geo-referencing(which I plan on doing), image stitching etc.
>
> *Also you talked about a "more light weighted system". Can you please
> elaborate on this?* I could not understand what you actually meant from
> that.
>
> If we look into the last year idea's page (
> http://trac.osgeo.org/gdal/wiki/SummerOfCode), there is one idea that is
> proposed regarding the "Raster/Vector geo-referencer on the Web". I want to
> modify this idea a little bit and want to automate the whole process. As
> far as the automation is concerned, we can develop GDAL functions for
> that(which will be completely re-usable) and then developing a Web based
> geo-referencer would only require calling those functions.
>
> If we do this thing,* two objectives will be fulfilled*.* First*, GDAL
> will get a web based geo-referencer. *Secondly*, communities that use
> GDAL and have not developed these kind of geo-referencer(Like QGIS) can
> directly use the functions developed and then build on that.
>
> Suggestions and comments are welcomed.
>
> Thank you for your propositions.
>
> Regards,
>
>  Kshitij Kansal
>
> Lab For Spatial Informatics,
>
> IIIT Hyderabad
>
>
>
> On Wed, Jan 29, 2014 at 1:27 PM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi
> > wrote:
>
>> Kshitij Kansal <kansal.k <at> gmail.com> writes:
>>
>> >
>> > Even,
>> > Thank you for pointing out this issue. I will keep this in mind.
>> >
>> > I will look into that last year project and try to understand the
>> implementation.
>> >
>>
>> > More suggestions and comments are always welcomed.
>>
>> Hi,
>>
>> Another OSGeo project OSSIM has implemented an automatic image to image
>> rectification. Isn't that a bit alike your plan?
>> http://download.osgeo.org/ossim/docs/OSSIM_Coregistration_UserManual.pdf
>>
>> Frank Warmerdam seems to entertain himself with something related
>> http://fwarmerdam.blogspot.fi/
>>
>> This article from 2013 may also give some inspiration
>>
>> http://www.academia.edu/4388853/OrientAL_-_Automatic_geo-referencing_and_ortho-rectification_of_archaeological_aerial_photographs
>>
>> All these three aim to very high quality and I am sure that there is also
>> need for a more light-weight system.
>>
>> -Jukka Rahkonen-
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140207/c9030b43/attachment.html>

From tkeitt at utexas.edu  Fri Feb  7 09:20:11 2014
From: tkeitt at utexas.edu (Tim Keitt)
Date: Fri, 7 Feb 2014 11:20:11 -0600
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
Message-ID: <CANnL8gp_0axQVna+x3qMEL-TdRqQgPY2mwPr_6i9OfgYhU5wnw@mail.gmail.com>

On Fri, Feb 7, 2014 at 11:10 AM, Kshitij Kansal <kansal.k at gmail.com> wrote:

> This means that the final product as a result of this product will also be
> bounded by the above licences. It can not go into GDAL's main distribution
> but can be used as a separate utility of GDAL for non-commercial uses only.
> Basically the commercial use of the tool won't be allowed without approval
> from the concerned people.
>
> Your views and suggestions are highly appreciated.
>

That's a no go as far as GSOC is concerned. (I assume this is the
question.) My recollection is that they will not accept a project that is
not released under an approved license.

THK


-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140207/4d15065b/attachment.html>

From even.rouault at mines-paris.org  Fri Feb  7 12:52:35 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 07 Feb 2014 21:52:35 +0100
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
Message-ID: <1391806355.52f547935ebef@imp.free.fr>

Selon Kshitij Kansal <kansal.k at gmail.com>:

Kshitij,

I'm surprised that you mention licenses
for algorithms. What are your sources for that?
Only *implementations* can be licensed
not algorithms themselves. So if you
develop your own implementation you are free
to select the license you wish. There
might be issues linked to potential pattents
in some countries but that is acceptable in my opinion
as software parents are not valid in all contries
so mentionning potential issues with them
in the documentation is sufficient .

> Hello
>
> Based on all suggestion
ins and comments above, I have come up with one thing.
>
> The most important thing that could have been a road block for this project
> was licence issues which was pointed by Even Rouault.
>
> I am interested in implementing the SIFT or ASIFT algorithms for automatic
> geo-referencing which I proposed in above mails. I am interested in making
> a separate tool which will be completely based on the GDAL and maintained
> by GDAL community. I looked into the GDAL-correlator idea which was also
> implemented as a part of GSoC. That idea uses only *SIMPLE SURF *algorithm
> for control point detection and is only *limited to small size three band
> imagery(RGB)*.
>
> I am interested in developing something that is fully automated and works
> on large multi band imagery.But the above two algorithms that I am planning
> to use come up with the licence that does not allows the free use for
> commercial purposes. The free use of above algorithm are restricted to *"non
> profit research and non profit educational purposes"*(in case of
> ASIFT) and *"research
> purposes only" *(in case of SIFT).
>
> This means that the final product as a result of this product will also be
> bounded by the above licences. It can not go into GDAL's main distribution
> but can be used as a separate utility of GDAL for non-commercial uses only.
> Basically the commercial use of the tool won't be allowed without approval
> from the concerned people.
>
> Your views and suggestions are highly appreciated.
>
> Regards,
>
> Kshitij Kansal
>
> Lab For Spatial Informatics,
>
> IIIT Hyderabad
>
>
>
> On Thu, Jan 30, 2014 at 12:25 PM, Kshitij Kansal <kansal.k at gmail.com> wrote:
>
> > Hello
> >
> > @Jukka Rahkonen: The OSSIM project (the link you provided) is more of
> > image orthorectification. Although
> > they are doing image co-registration but its as one of the steps of
> > orthorectification(I could only understand this from the manual).
> > Also I am not sure of the techniques they are using for this purposes.
> > (Its written corner point detection but How?)
> > I am new to OSSIM, so not aware of this thing's functionality and
> > accuracy. I am in the process of estimating it.
> >
> > Thank you for pointing this out.
> >
> > Coming to the Frank Warmerdam's blog (http://fwarmerdam.blogspot.fi/).
> > Here the author is talking about writing a code for converting the GCP's
> > into RPC's. But the next question comes is where is he getting GCP's from.
> > Now this is the part where I aim to work on and improve.
> >
> > Given two images, if we can automatically extract GCP's from them then we
> > are in a way speeding up and automating this whole process. Once we have
> > GCP, there are a lot of things that we can do from them like
> > geo-referencing(which I plan on doing), image stitching etc.
> >
> > *Also you talked about a "more light weighted system". Can you please
> > elaborate on this?* I could not understand what you actually meant from
> > that.
> >
> > If we look into the last year idea's page (
> > http://trac.osgeo.org/gdal/wiki/SummerOfCode), there is one idea that is
> > proposed regarding the "Raster/Vector geo-referencer on the Web". I want to
> > modify this idea a little bit and want to automate the whole process. As
> > far as the automation is concerned, we can develop GDAL functions for
> > that(which will be completely re-usable) and then developing a Web based
> > geo-referencer would only require calling those functions.
> >
> > If we do this thing,* two objectives will be fulfilled*.* First*, GDAL
> > will get a web based geo-referencer. *Secondly*, communities that use
> > GDAL and have not developed these kind of geo-referencer(Like QGIS) can
> > directly use the functions developed and then build on that.
> >
> > Suggestions and comments are welcomed.
> >
> > Thank you for your propositions.
> >
> > Regards,
> >
> >  Kshitij Kansal
> >
> > Lab For Spatial Informatics,
> >
> > IIIT Hyderabad
> >
> >
> >
> > On Wed, Jan 29, 2014 at 1:27 PM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi
> > > wrote:
> >
> >> Kshitij Kansal <kansal.k <at> gmail.com> writes:
> >>
> >> >
> >> > Even,
> >> > Thank you for pointing out this issue. I will keep this in mind.
> >> >
> >> > I will look into that last year project and try to understand the
> >> implementation.
> >> >
> >>
> >> > More suggestions and comments are always welcomed.
> >>
> >> Hi,
> >>
> >> Another OSGeo project OSSIM has implemented an automatic image to image
> >> rectification. Isn't that a bit alike your plan?
> >> http://download.osgeo.org/ossim/docs/OSSIM_Coregistration_UserManual.pdf
> >>
> >> Frank Warmerdam seems to entertain himself with something related
> >> http://fwarmerdam.blogspot.fi/
> >>
> >> This article from 2013 may also give some inspiration
> >>
> >>
>
http://www.academia.edu/4388853/OrientAL_-_Automatic_geo-referencing_and_ortho-rectification_of_archaeological_aerial_photographs
> >>
> >> All these three aim to very high quality and I am sure that there is also
> >> need for a more light-weight system.
> >>
> >> -Jukka Rahkonen-
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> >
>



From even.rouault at mines-paris.org  Fri Feb  7 12:53:38 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 07 Feb 2014 21:53:38 +0100
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
Message-ID: <1391806418.52f547d239b63@imp.free.fr>

Selon Kshitij Kansal <kansal.k at gmail.com>:

Kshitij,

I'm surprised that you mention licenses
for algorithms. What are your sources for that?
Only *implementations* can be licensed
not algorithms themselves. So if you
develop your own implementation you are free
to select the license you wish. There
might be issues linked to potential pattents
in some countries but that is acceptable in my opinion
as software parents are not valid in all contries
so mentionning potential issues with them
in the documentation is sufficient .

> Hello
>
> Based on all suggestion
ins and comments above, I have come up with one thing.
>
> The most important thing that could have been a road block for this project
> was licence issues which was pointed by Even Rouault.
>
> I am interested in implementing the SIFT or ASIFT algorithms for automatic
> geo-referencing which I proposed in above mails. I am interested in making
> a separate tool which will be completely based on the GDAL and maintained
> by GDAL community. I looked into the GDAL-correlator idea which was also
> implemented as a part of GSoC. That idea uses only *SIMPLE SURF *algorithm
> for control point detection and is only *limited to small size three band
> imagery(RGB)*.
>
> I am interested in developing something that is fully automated and works
> on large multi band imagery.But the above two algorithms that I am planning
> to use come up with the licence that does not allows the free use for
> commercial purposes. The free use of above algorithm are restricted to *"non
> profit research and non profit educational purposes"*(in case of
> ASIFT) and *"research
> purposes only" *(in case of SIFT).
>
> This means that the final product as a result of this product will also be
> bounded by the above licences. It can not go into GDAL's main distribution
> but can be used as a separate utility of GDAL for non-commercial uses only.
> Basically the commercial use of the tool won't be allowed without approval
> from the concerned people.
>
> Your views and suggestions are highly appreciated.
>
> Regards,
>
> Kshitij Kansal
>
> Lab For Spatial Informatics,
>
> IIIT Hyderabad
>
>
>
> On Thu, Jan 30, 2014 at 12:25 PM, Kshitij Kansal <kansal.k at gmail.com> wrote:
>
> > Hello
> >
> > @Jukka Rahkonen: The OSSIM project (the link you provided) is more of
> > image orthorectification. Although
> > they are doing image co-registration but its as one of the steps of
> > orthorectification(I could only understand this from the manual).
> > Also I am not sure of the techniques they are using for this purposes.
> > (Its written corner point detection but How?)
> > I am new to OSSIM, so not aware of this thing's functionality and
> > accuracy. I am in the process of estimating it.
> >
> > Thank you for pointing this out.
> >
> > Coming to the Frank Warmerdam's blog (http://fwarmerdam.blogspot.fi/).
> > Here the author is talking about writing a code for converting the GCP's
> > into RPC's. But the next question comes is where is he getting GCP's from.
> > Now this is the part where I aim to work on and improve.
> >
> > Given two images, if we can automatically extract GCP's from them then we
> > are in a way speeding up and automating this whole process. Once we have
> > GCP, there are a lot of things that we can do from them like
> > geo-referencing(which I plan on doing), image stitching etc.
> >
> > *Also you talked about a "more light weighted system". Can you please
> > elaborate on this?* I could not understand what you actually meant from
> > that.
> >
> > If we look into the last year idea's page (
> > http://trac.osgeo.org/gdal/wiki/SummerOfCode), there is one idea that is
> > proposed regarding the "Raster/Vector geo-referencer on the Web". I want to
> > modify this idea a little bit and want to automate the whole process. As
> > far as the automation is concerned, we can develop GDAL functions for
> > that(which will be completely re-usable) and then developing a Web based
> > geo-referencer would only require calling those functions.
> >
> > If we do this thing,* two objectives will be fulfilled*.* First*, GDAL
> > will get a web based geo-referencer. *Secondly*, communities that use
> > GDAL and have not developed these kind of geo-referencer(Like QGIS) can
> > directly use the functions developed and then build on that.
> >
> > Suggestions and comments are welcomed.
> >
> > Thank you for your propositions.
> >
> > Regards,
> >
> >  Kshitij Kansal
> >
> > Lab For Spatial Informatics,
> >
> > IIIT Hyderabad
> >
> >
> >
> > On Wed, Jan 29, 2014 at 1:27 PM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi
> > > wrote:
> >
> >> Kshitij Kansal <kansal.k <at> gmail.com> writes:
> >>
> >> >
> >> > Even,
> >> > Thank you for pointing out this issue. I will keep this in mind.
> >> >
> >> > I will look into that last year project and try to understand the
> >> implementation.
> >> >
> >>
> >> > More suggestions and comments are always welcomed.
> >>
> >> Hi,
> >>
> >> Another OSGeo project OSSIM has implemented an automatic image to image
> >> rectification. Isn't that a bit alike your plan?
> >> http://download.osgeo.org/ossim/docs/OSSIM_Coregistration_UserManual.pdf
> >>
> >> Frank Warmerdam seems to entertain himself with something related
> >> http://fwarmerdam.blogspot.fi/
> >>
> >> This article from 2013 may also give some inspiration
> >>
> >>
>
http://www.academia.edu/4388853/OrientAL_-_Automatic_geo-referencing_and_ortho-rectification_of_archaeological_aerial_photographs
> >>
> >> All these three aim to very high quality and I am sure that there is also
> >> need for a more light-weight system.
> >>
> >> -Jukka Rahkonen-
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> >
>









From kansal.k at gmail.com  Fri Feb  7 14:15:07 2014
From: kansal.k at gmail.com (Kshitij Kansal)
Date: Sat, 8 Feb 2014 03:45:07 +0530
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <1391806418.52f547d239b63@imp.free.fr>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
	<1391806418.52f547d239b63@imp.free.fr>
Message-ID: <CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>

Sir

I am providing the links for both the algorithms that I talked. I am new to
this licence issues thing so I would be highly grateful if you can clarify
doubts and if can proceed on working for this idea.

http://www.cs.ubc.ca/~lowe/keypoints/ (SIFT)
http://www.ipol.im/pub/art/2011/my-asift/ (ASIFT) [here source code is
provided. It contains license ]
http://www.cmap.polytechnique.fr/~yu/research/ASIFT/demo.html (Demo Page
for ASIFT)

The SIFT algorithm in itself is patented. They only provide binaries. I am
not sure If we can use those binaries or not.
As far as ASIFT is concerned, i think its implementation is only patented.

Kindly clarify this.

Thanking You
With Regards,

Kshitij Kansal

Lab For Spatial Informatics,

IIIT Hyderabad



On Sat, Feb 8, 2014 at 2:23 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Selon Kshitij Kansal <kansal.k at gmail.com>:
>
> Kshitij,
>
> I'm surprised that you mention licenses
> for algorithms. What are your sources for that?
> Only *implementations* can be licensed
> not algorithms themselves. So if you
> develop your own implementation you are free
> to select the license you wish. There
> might be issues linked to potential pattents
> in some countries but that is acceptable in my opinion
> as software parents are not valid in all contries
> so mentionning potential issues with them
> in the documentation is sufficient .
>
> > Hello
> >
> > Based on all suggestion
> ins and comments above, I have come up with one thing.
> >
> > The most important thing that could have been a road block for this
> project
> > was licence issues which was pointed by Even Rouault.
> >
> > I am interested in implementing the SIFT or ASIFT algorithms for
> automatic
> > geo-referencing which I proposed in above mails. I am interested in
> making
> > a separate tool which will be completely based on the GDAL and maintained
> > by GDAL community. I looked into the GDAL-correlator idea which was also
> > implemented as a part of GSoC. That idea uses only *SIMPLE SURF
> *algorithm
> > for control point detection and is only *limited to small size three band
> > imagery(RGB)*.
> >
> > I am interested in developing something that is fully automated and works
> > on large multi band imagery.But the above two algorithms that I am
> planning
> > to use come up with the licence that does not allows the free use for
> > commercial purposes. The free use of above algorithm are restricted to
> *"non
> > profit research and non profit educational purposes"*(in case of
> > ASIFT) and *"research
> > purposes only" *(in case of SIFT).
> >
> > This means that the final product as a result of this product will also
> be
> > bounded by the above licences. It can not go into GDAL's main
> distribution
> > but can be used as a separate utility of GDAL for non-commercial uses
> only.
> > Basically the commercial use of the tool won't be allowed without
> approval
> > from the concerned people.
> >
> > Your views and suggestions are highly appreciated.
> >
> > Regards,
> >
> > Kshitij Kansal
> >
> > Lab For Spatial Informatics,
> >
> > IIIT Hyderabad
> >
> >
> >
> > On Thu, Jan 30, 2014 at 12:25 PM, Kshitij Kansal <kansal.k at gmail.com>
> wrote:
> >
> > > Hello
> > >
> > > @Jukka Rahkonen: The OSSIM project (the link you provided) is more of
> > > image orthorectification. Although
> > > they are doing image co-registration but its as one of the steps of
> > > orthorectification(I could only understand this from the manual).
> > > Also I am not sure of the techniques they are using for this purposes.
> > > (Its written corner point detection but How?)
> > > I am new to OSSIM, so not aware of this thing's functionality and
> > > accuracy. I am in the process of estimating it.
> > >
> > > Thank you for pointing this out.
> > >
> > > Coming to the Frank Warmerdam's blog (http://fwarmerdam.blogspot.fi/).
> > > Here the author is talking about writing a code for converting the
> GCP's
> > > into RPC's. But the next question comes is where is he getting GCP's
> from.
> > > Now this is the part where I aim to work on and improve.
> > >
> > > Given two images, if we can automatically extract GCP's from them then
> we
> > > are in a way speeding up and automating this whole process. Once we
> have
> > > GCP, there are a lot of things that we can do from them like
> > > geo-referencing(which I plan on doing), image stitching etc.
> > >
> > > *Also you talked about a "more light weighted system". Can you please
> > > elaborate on this?* I could not understand what you actually meant from
> > > that.
> > >
> > > If we look into the last year idea's page (
> > > http://trac.osgeo.org/gdal/wiki/SummerOfCode), there is one idea that
> is
> > > proposed regarding the "Raster/Vector geo-referencer on the Web". I
> want to
> > > modify this idea a little bit and want to automate the whole process.
> As
> > > far as the automation is concerned, we can develop GDAL functions for
> > > that(which will be completely re-usable) and then developing a Web
> based
> > > geo-referencer would only require calling those functions.
> > >
> > > If we do this thing,* two objectives will be fulfilled*.* First*, GDAL
> > > will get a web based geo-referencer. *Secondly*, communities that use
> > > GDAL and have not developed these kind of geo-referencer(Like QGIS) can
> > > directly use the functions developed and then build on that.
> > >
> > > Suggestions and comments are welcomed.
> > >
> > > Thank you for your propositions.
> > >
> > > Regards,
> > >
> > >  Kshitij Kansal
> > >
> > > Lab For Spatial Informatics,
> > >
> > > IIIT Hyderabad
> > >
> > >
> > >
> > > On Wed, Jan 29, 2014 at 1:27 PM, Jukka Rahkonen <
> jukka.rahkonen at mmmtike.fi
> > > > wrote:
> > >
> > >> Kshitij Kansal <kansal.k <at> gmail.com> writes:
> > >>
> > >> >
> > >> > Even,
> > >> > Thank you for pointing out this issue. I will keep this in mind.
> > >> >
> > >> > I will look into that last year project and try to understand the
> > >> implementation.
> > >> >
> > >>
> > >> > More suggestions and comments are always welcomed.
> > >>
> > >> Hi,
> > >>
> > >> Another OSGeo project OSSIM has implemented an automatic image to
> image
> > >> rectification. Isn't that a bit alike your plan?
> > >>
> http://download.osgeo.org/ossim/docs/OSSIM_Coregistration_UserManual.pdf
> > >>
> > >> Frank Warmerdam seems to entertain himself with something related
> > >> http://fwarmerdam.blogspot.fi/
> > >>
> > >> This article from 2013 may also give some inspiration
> > >>
> > >>
> >
>
> http://www.academia.edu/4388853/OrientAL_-_Automatic_geo-referencing_and_ortho-rectification_of_archaeological_aerial_photographs
> > >>
> > >> All these three aim to very high quality and I am sure that there is
> also
> > >> need for a more light-weight system.
> > >>
> > >> -Jukka Rahkonen-
> > >>
> > >> _______________________________________________
> > >> gdal-dev mailing list
> > >> gdal-dev at lists.osgeo.org
> > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >>
> > >
> > >
> >
>
>
>
>
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140208/86f54792/attachment-0001.html>

From woodbri at swoodbridge.com  Fri Feb  7 22:11:42 2014
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sat, 08 Feb 2014 01:11:42 -0500
Subject: [gdal-dev] gdalwarp EPSG:32662 problem
Message-ID: <52F5CA9E.9060601@swoodbridge.com>

Hi,

Sorry for cross posting. This seems like a proj4 issue but might be gdal 
related.

I've run into a problem that I think is related to a change in the EPSG 
definition for EPSG:32662

The symptom is that the image after gdalwarp reprojection is about 20km 
south of where it should be.

old system is correctly aligned:

GDAL 1.4.2.0, released 2007/06/27
proj Rel. 4.5.0, 22 Oct 2006

# WGS 84 / Plate Carree
<32662> +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 
+datum=WGS84 +units=m +no_defs  <>

new system is shifted about 20km south:

GDAL 1.9.2, released 2012/10/08
proj Rel. 4.8.0, 6 March 2012

# WGS 84 / Plate Carree (deprecated)
<32662> +proj=eqc +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84 
+units=m +no_defs  <>


http://spatialreference.org/ref/epsg/32662/
This indicates that the definition in proj 4.8.0 is wrong. Would the 
+ellps=WGS84 account for this shift?

Any thoughts on this?

Thanks,
   -Steve

From jrepetto at free.fr  Fri Feb  7 23:55:17 2014
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Sat, 08 Feb 2014 08:55:17 +0100
Subject: [gdal-dev] gdalwarp EPSG:32662 problem
In-Reply-To: <52F5CA9E.9060601@swoodbridge.com>
References: <52F5CA9E.9060601@swoodbridge.com>
Message-ID: <52F5E2E5.3070704@free.fr>

On 08/02/2014 07:11, Stephen Woodbridge wrote:
>
> I've run into a problem that I think is related to a change in the EPSG
> definition for EPSG:32662
>
> The symptom is that the image after gdalwarp reprojection is about 20km
> south of where it should be.

Please post the gdalwarp command you have used. (I mean, with both CRS).
The problem is likely on the other CRS.


From antti.castren at iki.fi  Fri Feb  7 23:58:05 2014
From: antti.castren at iki.fi (=?ISO-8859-1?Q?Antti_Castr=E9n?=)
Date: Sat, 8 Feb 2014 09:58:05 +0200
Subject: [gdal-dev] gdalwarp EPSG:32662 problem
In-Reply-To: <52F5CA9E.9060601@swoodbridge.com>
References: <52F5CA9E.9060601@swoodbridge.com>
Message-ID: <CAPcvoOKw5tSg7rBaXuwX+iVUJjxdvyUQuk4SU74HmAS9pr6wag@mail.gmail.com>

Hello Steve,

You asked for any thoughts, so here are some.

The 20km shift could easily be caused by using spherical version in
one implementation of equirectangular projection and ellipsoidal
version in the other. Amount of shift depends on the latitude.

You can find some information on these pages:

http://www.remotesensing.org/geotiff/proj_list/equirectangular.html

http://comments.gmane.org/gmane.comp.gis.proj-4.devel/981

Read especially the comments of the latter.

Hope these help,

  Antti

2014-02-08 8:11 GMT+02:00 Stephen Woodbridge <woodbri at swoodbridge.com>:
> Hi,
>
> Sorry for cross posting. This seems like a proj4 issue but might be gdal
> related.
>
> I've run into a problem that I think is related to a change in the EPSG
> definition for EPSG:32662
>
> The symptom is that the image after gdalwarp reprojection is about 20km
> south of where it should be.
>
> old system is correctly aligned:
>
> GDAL 1.4.2.0, released 2007/06/27
> proj Rel. 4.5.0, 22 Oct 2006
>
> # WGS 84 / Plate Carree
> <32662> +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84
> +units=m +no_defs  <>
>
> new system is shifted about 20km south:
>
> GDAL 1.9.2, released 2012/10/08
> proj Rel. 4.8.0, 6 March 2012
>
> # WGS 84 / Plate Carree (deprecated)
> <32662> +proj=eqc +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84
> +units=m +no_defs  <>
>
>
> http://spatialreference.org/ref/epsg/32662/
> This indicates that the definition in proj 4.8.0 is wrong. Would the
> +ellps=WGS84 account for this shift?
>
> Any thoughts on this?
>
> Thanks,
>   -Steve

From bishop.dev at gmail.com  Sat Feb  8 00:37:15 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Sat, 08 Feb 2014 12:37:15 +0400
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>	<1390896882268-5100379.post@n6.nabble.com>	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>	<201401282101.00768.even.rouault@mines-paris.org>	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>	<loom.20140129T084029-6@post.gmane.org>	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>	<1391806418.52f547d239b63@imp.free.fr>
	<CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>
Message-ID: <52F5ECBB.6010507@gmail.com>

Hi,

Even note that you cannot get the code from this projects and merge it 
to GDAL, but you  free to develop you own implementation of this 
algorithms as path of GDAL.
This is a same situation with correlator. Andrew cannot get code from 
OpenCV and GRASS as incompatible licenses, so the own (simple) 
implementation was provided.
One can change this implementation to be more advanced: support large 
datasets, more bands, etc. Everybody  welcome to do it.

Best regards,
     Dmitry

08.02.2014 2:15, Kshitij Kansal ?????:
> Sir
>
> I am providing the links for both the algorithms that I talked. I am 
> new to this licence issues thing so I would be highly grateful if you 
> can clarify doubts and if can proceed on working for this idea.
>
> http://www.cs.ubc.ca/~lowe/keypoints/ 
> <http://www.cs.ubc.ca/%7Elowe/keypoints/> (SIFT)
> http://www.ipol.im/pub/art/2011/my-asift/ (ASIFT) [here source code is 
> provided. It contains license ]
> http://www.cmap.polytechnique.fr/~yu/research/ASIFT/demo.html 
> <http://www.cmap.polytechnique.fr/%7Eyu/research/ASIFT/demo.html> (Demo Page 
> for ASIFT)
>
> The SIFT algorithm in itself is patented. They only provide binaries. 
> I am not sure If we can use those binaries or not.
> As far as ASIFT is concerned, i think its implementation is only 
> patented.
>
> Kindly clarify this.
>
> Thanking You
> With Regards,
>
>     Kshitij Kansal
>
>     Lab For Spatial Informatics,
>
>     IIIT Hyderabad
>
>
>
> On Sat, Feb 8, 2014 at 2:23 AM, Even Rouault 
> <even.rouault at mines-paris.org <mailto:even.rouault at mines-paris.org>> 
> wrote:
>
>     Selon Kshitij Kansal <kansal.k at gmail.com <mailto:kansal.k at gmail.com>>:
>
>     Kshitij,
>
>     I'm surprised that you mention licenses
>     for algorithms. What are your sources for that?
>     Only *implementations* can be licensed
>     not algorithms themselves. So if you
>     develop your own implementation you are free
>     to select the license you wish. There
>     might be issues linked to potential pattents
>     in some countries but that is acceptable in my opinion
>     as software parents are not valid in all contries
>     so mentionning potential issues with them
>     in the documentation is sufficient .
>
>     > Hello
>     >
>     > Based on all suggestion
>     ins and comments above, I have come up with one thing.
>     >
>     > The most important thing that could have been a road block for
>     this project
>     > was licence issues which was pointed by Even Rouault.
>     >
>     > I am interested in implementing the SIFT or ASIFT algorithms for
>     automatic
>     > geo-referencing which I proposed in above mails. I am interested
>     in making
>     > a separate tool which will be completely based on the GDAL and
>     maintained
>     > by GDAL community. I looked into the GDAL-correlator idea which
>     was also
>     > implemented as a part of GSoC. That idea uses only *SIMPLE SURF
>     *algorithm
>     > for control point detection and is only *limited to small size
>     three band
>     > imagery(RGB)*.
>     >
>     > I am interested in developing something that is fully automated
>     and works
>     > on large multi band imagery.But the above two algorithms that I
>     am planning
>     > to use come up with the licence that does not allows the free
>     use for
>     > commercial purposes. The free use of above algorithm are
>     restricted to *"non
>     > profit research and non profit educational purposes"*(in case of
>     > ASIFT) and *"research
>     > purposes only" *(in case of SIFT).
>     >
>     > This means that the final product as a result of this product
>     will also be
>     > bounded by the above licences. It can not go into GDAL's main
>     distribution
>     > but can be used as a separate utility of GDAL for non-commercial
>     uses only.
>     > Basically the commercial use of the tool won't be allowed
>     without approval
>     > from the concerned people.
>     >
>     > Your views and suggestions are highly appreciated.
>     >
>     > Regards,
>     >
>     > Kshitij Kansal
>     >
>     > Lab For Spatial Informatics,
>     >
>     > IIIT Hyderabad
>     >
>     >
>     >
>     > On Thu, Jan 30, 2014 at 12:25 PM, Kshitij Kansal
>     <kansal.k at gmail.com <mailto:kansal.k at gmail.com>> wrote:
>     >
>     > > Hello
>     > >
>     > > @Jukka Rahkonen: The OSSIM project (the link you provided) is
>     more of
>     > > image orthorectification. Although
>     > > they are doing image co-registration but its as one of the
>     steps of
>     > > orthorectification(I could only understand this from the manual).
>     > > Also I am not sure of the techniques they are using for this
>     purposes.
>     > > (Its written corner point detection but How?)
>     > > I am new to OSSIM, so not aware of this thing's functionality and
>     > > accuracy. I am in the process of estimating it.
>     > >
>     > > Thank you for pointing this out.
>     > >
>     > > Coming to the Frank Warmerdam's blog
>     (http://fwarmerdam.blogspot.fi/).
>     > > Here the author is talking about writing a code for converting
>     the GCP's
>     > > into RPC's. But the next question comes is where is he getting
>     GCP's from.
>     > > Now this is the part where I aim to work on and improve.
>     > >
>     > > Given two images, if we can automatically extract GCP's from
>     them then we
>     > > are in a way speeding up and automating this whole process.
>     Once we have
>     > > GCP, there are a lot of things that we can do from them like
>     > > geo-referencing(which I plan on doing), image stitching etc.
>     > >
>     > > *Also you talked about a "more light weighted system". Can you
>     please
>     > > elaborate on this?* I could not understand what you actually
>     meant from
>     > > that.
>     > >
>     > > If we look into the last year idea's page (
>     > > http://trac.osgeo.org/gdal/wiki/SummerOfCode), there is one
>     idea that is
>     > > proposed regarding the "Raster/Vector geo-referencer on the
>     Web". I want to
>     > > modify this idea a little bit and want to automate the whole
>     process. As
>     > > far as the automation is concerned, we can develop GDAL
>     functions for
>     > > that(which will be completely re-usable) and then developing a
>     Web based
>     > > geo-referencer would only require calling those functions.
>     > >
>     > > If we do this thing,* two objectives will be fulfilled*.*
>     First*, GDAL
>     > > will get a web based geo-referencer. *Secondly*, communities
>     that use
>     > > GDAL and have not developed these kind of geo-referencer(Like
>     QGIS) can
>     > > directly use the functions developed and then build on that.
>     > >
>     > > Suggestions and comments are welcomed.
>     > >
>     > > Thank you for your propositions.
>     > >
>     > > Regards,
>     > >
>     > >  Kshitij Kansal
>     > >
>     > > Lab For Spatial Informatics,
>     > >
>     > > IIIT Hyderabad
>     > >
>     > >
>     > >
>     > > On Wed, Jan 29, 2014 at 1:27 PM, Jukka Rahkonen
>     <jukka.rahkonen at mmmtike.fi <mailto:jukka.rahkonen at mmmtike.fi>
>     > > > wrote:
>     > >
>     > >> Kshitij Kansal <kansal.k <at> gmail.com <http://gmail.com>>
>     writes:
>     > >>
>     > >> >
>     > >> > Even,
>     > >> > Thank you for pointing out this issue. I will keep this in
>     mind.
>     > >> >
>     > >> > I will look into that last year project and try to
>     understand the
>     > >> implementation.
>     > >> >
>     > >>
>     > >> > More suggestions and comments are always welcomed.
>     > >>
>     > >> Hi,
>     > >>
>     > >> Another OSGeo project OSSIM has implemented an automatic
>     image to image
>     > >> rectification. Isn't that a bit alike your plan?
>     > >>
>     http://download.osgeo.org/ossim/docs/OSSIM_Coregistration_UserManual.pdf
>     > >>
>     > >> Frank Warmerdam seems to entertain himself with something related
>     > >> http://fwarmerdam.blogspot.fi/
>     > >>
>     > >> This article from 2013 may also give some inspiration
>     > >>
>     > >>
>     >
>     http://www.academia.edu/4388853/OrientAL_-_Automatic_geo-referencing_and_ortho-rectification_of_archaeological_aerial_photographs
>     > >>
>     > >> All these three aim to very high quality and I am sure that
>     there is also
>     > >> need for a more light-weight system.
>     > >>
>     > >> -Jukka Rahkonen-
>     > >>
>     > >> _______________________________________________
>     > >> gdal-dev mailing list
>     > >> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>     > >>
>     > >
>     > >
>     >
>
>
>
>
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140208/33767356/attachment-0001.html>

From _kfj at yahoo.com  Sat Feb  8 02:10:51 2014
From: _kfj at yahoo.com (Kay F. Jahnke)
Date: Sat, 08 Feb 2014 15:40:51 +0530
Subject: [gdal-dev] processing map styles with OGR tools
Message-ID: <52F602AB.6050209@yahoo.com>

Hi group!

I'm working on a large corpus of historical map data (the CTRN of the 
Piedmont Region in Italy). To visualize the data (shapefiles) I have 
created QGIS style files. Later I wrote style files to make the data 
into a GPS map using mkgmap. Currently I am setting up geoserver to 
serve the data as a WMS layer. So obviously I have to write yet another 
set of style files. I'm getting tired of this and I wish I could just 
translate style files from one format to another. QGIS now offers to 
store it's styles as SLD, but so far I've had limited success in using 
the SLD files made that way in geoserver; they seem to be to QGISish and 
would need a fair bit of editing.

When browsing the OGR website, I noticed there was a section

http://www.gdal.org/ogr/ogr_feature_style.html

This sounds more like a proposal and hasn't been edited since 2011, but 
the idea is, of course, attractive. Is there any concrete code or are 
there any tools along these lines? Or are there tools from other sources 
for the purpose?

with regards
Kay F. Jahnke

From bo.victor.thomsen at gmail.com  Sat Feb  8 05:44:27 2014
From: bo.victor.thomsen at gmail.com (Bo Victor Thomsen)
Date: Sat, 08 Feb 2014 14:44:27 +0100
Subject: [gdal-dev] processing map styles with OGR tools
In-Reply-To: <52F602AB.6050209@yahoo.com>
References: <52F602AB.6050209@yahoo.com>
Message-ID: <52F634BB.3090302@gmail.com>

You might have a look at Boundless's (former OpenGeo)  QGIS plugin. It 
has some functions to convert QGIS style to GeoServer SLD styles: 
http://boundlessgeo.com/solutions/solutions-software/qgis/

Regards
Bo Victor Thomsen
Aestas-GIS
Denamrk

Den 08-02-2014 11:10, Kay F. Jahnke skrev:
> Hi group!
>
> I'm working on a large corpus of historical map data (the CTRN of the 
> Piedmont Region in Italy). To visualize the data (shapefiles) I have 
> created QGIS style files. Later I wrote style files to make the data 
> into a GPS map using mkgmap. Currently I am setting up geoserver to 
> serve the data as a WMS layer. So obviously I have to write yet 
> another set of style files. I'm getting tired of this and I wish I 
> could just translate style files from one format to another. QGIS now 
> offers to store it's styles as SLD, but so far I've had limited 
> success in using the SLD files made that way in geoserver; they seem 
> to be to QGISish and would need a fair bit of editing.
>
> When browsing the OGR website, I noticed there was a section
>
> http://www.gdal.org/ogr/ogr_feature_style.html
>
> This sounds more like a proposal and hasn't been edited since 2011, 
> but the idea is, of course, attractive. Is there any concrete code or 
> are there any tools along these lines? Or are there tools from other 
> sources for the purpose?
>
> with regards
> Kay F. Jahnke
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From woodbri at swoodbridge.com  Sat Feb  8 06:27:11 2014
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sat, 08 Feb 2014 09:27:11 -0500
Subject: [gdal-dev] gdalwarp EPSG:32662 problem
In-Reply-To: <52F5E2E5.3070704@free.fr>
References: <52F5CA9E.9060601@swoodbridge.com> <52F5E2E5.3070704@free.fr>
Message-ID: <52F63EBF.6040804@swoodbridge.com>

On 2/8/2014 2:55 AM, Jean-Claude Repetto wrote:
> On 08/02/2014 07:11, Stephen Woodbridge wrote:
>>
>> I've run into a problem that I think is related to a change in the EPSG
>> definition for EPSG:32662
>>
>> The symptom is that the image after gdalwarp reprojection is about 20km
>> south of where it should be.
>
> Please post the gdalwarp command you have used. (I mean, with both CRS).
> The problem is likely on the other CRS.
>

gdalwarp -rcs -ts 8800 6600 -s_srs EPSG:32662 -t_srs EPSG:4326 
$temptiff1 $target

And the image in question is:

root at u17269306:/maps/images.tmp# gdalinfo 
MODIS.2014038.193758.fullpass.seadas_sst.hdf
Driver: HDF4/Hierarchical Data Format Release 4
Files: MODIS.2014038.193758.fullpass.seadas_sst.hdf
Size is 512, 512
Coordinate System is `'
Metadata:
   Collection Location=USF Institute for Marine Remote Sensing
   Data Source Type=Direct Broadcast
   Input File(s)=/tmp/s4p_run_map_modis_2.3_WSthzYwz/A2014038193749.GEO, 
/tmp/s4p_run_map_modis_2.3_WSthzYwz/A2014038193749.L2_LAC_SST, 
/tmp/s4p_run_map_modis_2.3_WSthzYwz/A2014038194019.GEO, 
/tmp/s4p_run_map_modis_2.3_WSthzYwz/A2014038194019.L2_LAC_SST, 
/tmp/s4p_run_map_modis_2.3_WSthzYwz/A2014038194249.GEO, 
/tmp/s4p_run_map_modis_2.3_WSthzYwz/A2014038194249.L2_LAC_SST, 
/tmp/s4p_run_map_modis_2.3_WSthzYwz/A2014038194519.GEO, 
/tmp/s4p_run_map_modis_2.3_WSthzYwz/A2014038194519.L2_LAC_SST, 
/tmp/s4p_run_map_modis_2.3_WSthzYwz/A2014038194749.GEO, 
/tmp/s4p_run_map_modis_2.3_WSthzYwz/A2014038194749.L2_LAC_SST
   L3 Software Name=/usr/bin/map_modis.pl
   L3 Software Version=4.2
   Map Limit=-5, -125, 55, -45
   Map Projection Category=Proj 4.4.7
   Map Projection Name=eqc
   Processing Status=intermediate
   Proj Projection Parameters=#Equidistant Cylindrical (Plate Caree)
#       Cyl, Sph
#       lat_ts=
# +proj=eqc +ellps=WGS84
   Satellite=aqua
   Spatial Resolution=1km
   Temporal Resolution=pass
Subdatasets:
 
SUBDATASET_1_NAME=HDF4_SDS:UNKNOWN:"MODIS.2014038.193758.fullpass.seadas_sst.hdf":0
   SUBDATASET_1_DESC=[6600x8800] seadas_sst (16-bit integer)
 
SUBDATASET_2_NAME=HDF4_SDS:UNKNOWN:"MODIS.2014038.193758.fullpass.seadas_sst.hdf":1
   SUBDATASET_2_DESC=[6600x8800] l2_flags (32-bit integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

From even.rouault at mines-paris.org  Sat Feb  8 11:23:32 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 8 Feb 2014 20:23:32 +0100
Subject: [gdal-dev]
 =?iso-8859-1?q?Motion=3A_Commit_Access_for_J=FCrgen_Fi?=
 =?iso-8859-1?q?scher?=
In-Reply-To: <201401302009.05064.even.rouault@mines-paris.org>
References: <201401302009.05064.even.rouault@mines-paris.org>
Message-ID: <201402082023.32142.even.rouault@mines-paris.org>

Le jeudi 30 janvier 2014 20:09:04, Even Rouault a ?crit :
> Motion: Extend GDAL/OGR commit access to J?rgen Fischer.

I declare this motion passed with support from PSC members FrankW, DanielM, 
TamasS, JukkaR and me. Welcome aboard J?rgen!

I let Frank provide commit rights to you.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sat Feb  8 11:59:23 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 8 Feb 2014 20:59:23 +0100
Subject: [gdal-dev] processing map styles with OGR tools
In-Reply-To: <52F602AB.6050209@yahoo.com>
References: <52F602AB.6050209@yahoo.com>
Message-ID: <201402082059.23836.even.rouault@mines-paris.org>

Le samedi 08 f?vrier 2014 11:10:51, Kay F. Jahnke a ?crit :
> Hi group!
> 
> I'm working on a large corpus of historical map data (the CTRN of the
> Piedmont Region in Italy). To visualize the data (shapefiles) I have
> created QGIS style files. Later I wrote style files to make the data
> into a GPS map using mkgmap. Currently I am setting up geoserver to
> serve the data as a WMS layer. So obviously I have to write yet another
> set of style files. I'm getting tired of this and I wish I could just
> translate style files from one format to another. QGIS now offers to
> store it's styles as SLD, but so far I've had limited success in using
> the SLD files made that way in geoserver; they seem to be to QGISish and
> would need a fair bit of editing.
> 
> When browsing the OGR website, I noticed there was a section
> 
> http://www.gdal.org/ogr/ogr_feature_style.html
> 
> This sounds more like a proposal and hasn't been edited since 2011, but
> the idea is, of course, attractive. Is there any concrete code or are
> there any tools along these lines?

It is actually implemented in a few drivers whose format supports styling, 
such as MapInfo, KML or DXF.

SLD is not supported by OGR however.

> Or are there tools from other sources
> for the purpose?
> 
> with regards
> Kay F. Jahnke
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sat Feb  8 15:42:29 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 9 Feb 2014 00:42:29 +0100
Subject: [gdal-dev] gdalwarp EPSG:32662 problem
In-Reply-To: <52F5CA9E.9060601@swoodbridge.com>
References: <52F5CA9E.9060601@swoodbridge.com>
Message-ID: <201402090042.30038.even.rouault@mines-paris.org>

I've just tested the 2 definitions with GDAL trunk and proj 4.8.0 and both 
definitions give identical results :

$ gdaltransform -s_srs EPSG:4326 -t_srs "+proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 
+y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs +wktext"
2 49
222638.981586547 5454655.04887041 0

$ gdaltransform -s_srs EPSG:4326 -t_srs "+proj=eqc +lat_ts=0 +lat_0=0 +lon_0=0 
+x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs +wktext"
2 49
222638.981586547 5454655.04887041 0

But Antti guess seems right. Instead of +ellps=WGS84 (or +datum=WGS84), if you 
play with the a (semi-major axis) and b (semi-minor axis) parameters, you can 
see that only +a has an influence, so latest proj version seems to use a 
spherical version of eqc. Reviewing the history of pj_eqc.c ( 
http://trac.osgeo.org/proj/log/trunk/proj/src/PJ_eqc.c ) I don't see where a 
change of behaviour would have happened, but that might be somewhere else in 
proj codebase.

> Hi,
> 
> Sorry for cross posting. This seems like a proj4 issue but might be gdal
> related.
> 
> I've run into a problem that I think is related to a change in the EPSG
> definition for EPSG:32662
> 
> The symptom is that the image after gdalwarp reprojection is about 20km
> south of where it should be.
> 
> old system is correctly aligned:
> 
> GDAL 1.4.2.0, released 2007/06/27
> proj Rel. 4.5.0, 22 Oct 2006
> 
> # WGS 84 / Plate Carree
> <32662> +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84
> +datum=WGS84 +units=m +no_defs  <>
> 
> new system is shifted about 20km south:
> 
> GDAL 1.9.2, released 2012/10/08
> proj Rel. 4.8.0, 6 March 2012
> 
> # WGS 84 / Plate Carree (deprecated)
> <32662> +proj=eqc +lat_ts=0 +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 +datum=WGS84
> +units=m +no_defs  <>
> 
> 
> http://spatialreference.org/ref/epsg/32662/
> This indicates that the definition in proj 4.8.0 is wrong. Would the
> +ellps=WGS84 account for this shift?
> 
> Any thoughts on this?
> 
> Thanks,
>    -Steve
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sat Feb  8 15:44:33 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 9 Feb 2014 00:44:33 +0100
Subject: [gdal-dev] How to fix gdalwarp warning?
In-Reply-To: <loom.20140207T160726-336@post.gmane.org>
References: <52F4EF21.7050605@swoodbridge.com>
	<loom.20140207T160726-336@post.gmane.org>
Message-ID: <201402090044.33538.even.rouault@mines-paris.org>

Le vendredi 07 f?vrier 2014 16:07:46, Jukka Rahkonen a ?crit :
> Stephen Woodbridge <woodbri <at> swoodbridge.com> writes:
> > How does one do "Converting the dataset  prior to 24/32 bit is advised."?
> 
> For example with http://www.gdal.org/pct2rgb.html

"gdal_translate -expand rgb" or rgba is an alternative.

> 
> -Jukka Rahkonen-
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From woodbri at swoodbridge.com  Sat Feb  8 16:05:07 2014
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sat, 08 Feb 2014 19:05:07 -0500
Subject: [gdal-dev] How to fix gdalwarp warning?
In-Reply-To: <201402090044.33538.even.rouault@mines-paris.org>
References: <52F4EF21.7050605@swoodbridge.com>	<loom.20140207T160726-336@post.gmane.org>
	<201402090044.33538.even.rouault@mines-paris.org>
Message-ID: <52F6C633.806@swoodbridge.com>

On 2/8/2014 6:44 PM, Even Rouault wrote:
> Le vendredi 07 f?vrier 2014 16:07:46, Jukka Rahkonen a ?crit :
>> Stephen Woodbridge <woodbri <at> swoodbridge.com> writes:
>>> How does one do "Converting the dataset  prior to 24/32 bit is advised."?
>>
>> For example with http://www.gdal.org/pct2rgb.html
>
> "gdal_translate -expand rgb" or rgba is an alternative.

Thanks Even, I found that after Jukka's post and used that instead.
I appreaciate all the help from the list. You guys are great!

-Steve



From erincerol at gmail.com  Sat Feb  8 21:06:29 2014
From: erincerol at gmail.com (=?ISO-8859-1?Q?Erin=E7_Erol?=)
Date: Sun, 09 Feb 2014 05:06:29 +0000
Subject: [gdal-dev] Converting osm.pbf to geojson getting unable open
	datasource error.
Message-ID: <52F70CD5.3090606@gmail.com>

Hello all,

I'm trying to convert osm.pbf file to geojson and I'm getting following 
error:
FAILURE:
Unable to open datasource `gL.osm.pbf' with the following drivers.
   -> ESRI Shapefile
   -> MapInfo File
   -> UK .NTF
   -> SDTS
   -> TIGER
   -> S57
   -> DGN
   -> VRT
   -> REC
   -> Memory
   -> BNA
   -> CSV
   -> GML
   -> GPX
   -> KML
   -> GeoJSON
   -> GMT
   -> PCIDSK
   -> OpenFileGDB
   -> XPlane
   -> AVCBin
   -> AVCE00
   -> DXF
   -> Geoconcept
   -> GeoRSS
   -> GPSTrackMaker
   -> PGDump
   -> GPSBabel
   -> SUA
   -> OpenAir
   -> PDS
   -> HTF
   -> AeronavFAA
   -> EDIGEO
   -> SVG
   -> Idrisi
   -> ARCGEN
   -> SEGUKOOA
   -> SEGY
   -> ODS
   -> XLSX
   -> PDF
   -> SXF

I saw many people got this kind of error but I can't seem to find a 
solution to my problem.

I'm using ubuntu to convert files.

Thank you all in advance.

From andre+joost at nurfuerspam.de  Sat Feb  8 22:47:20 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sun, 09 Feb 2014 07:47:20 +0100
Subject: [gdal-dev] Converting osm.pbf to geojson getting unable open
 datasource error.
In-Reply-To: <52F70CD5.3090606@gmail.com>
References: <52F70CD5.3090606@gmail.com>
Message-ID: <ld78dv$tf$1@ger.gmane.org>

Am 09.02.2014 06:06, schrieb Erin? Erol:

>
> I'm using ubuntu to convert files.
>

What do you get when you enter ogrinfo --version in a terminal window?

My Ubuntu 12.04 with ubuntugis unstable package has GDAL 1.10.0, which 
includes the OSM driver for reading. ogrinfo --formats lists the 
available drivers.

HTH,
Andr? Joost



From andre+joost at nurfuerspam.de  Sat Feb  8 22:40:41 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sun, 09 Feb 2014 07:40:41 +0100
Subject: [gdal-dev] gdalwarp EPSG:32662 problem
In-Reply-To: <201402090042.30038.even.rouault@mines-paris.org>
References: <52F5CA9E.9060601@swoodbridge.com>
	<201402090042.30038.even.rouault@mines-paris.org>
Message-ID: <ld78dv$tf$2@ger.gmane.org>

Am 09.02.2014 00:42, schrieb Even Rouault:

>
> But Antti guess seems right. Instead of +ellps=WGS84 (or +datum=WGS84), if you
> play with the a (semi-major axis) and b (semi-minor axis) parameters, you can
> see that only +a has an influence, so latest proj version seems to use a
> spherical version of eqc.

If you look at
<http://trac.osgeo.org/proj/browser/trunk/proj/src/PJ_eqc.c>

and the chapter 12 of Snyders manual, you will only find formulas for 
the sphere. So I guess there is no other way to calculate eqc.

Maybe older versions calculated another radius for the sphere when an 
ellipsoid was given.

Greetings,
Andr? Joost


From even.rouault at mines-paris.org  Sun Feb  9 01:55:49 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 9 Feb 2014 10:55:49 +0100
Subject: [gdal-dev] how to create just the msk file from a rgba vrt file
In-Reply-To: <ad11349af9204b3185cdc7795731c96e@AMSPR07MB230.eurprd07.prod.outlook.com>
References: <b22326d6b4a94d16b6517b1372130273@AMSPR07MB230.eurprd07.prod.outlook.com>
	<1391723466.14221.193.camel@octopi>
	<ad11349af9204b3185cdc7795731c96e@AMSPR07MB230.eurprd07.prod.outlook.com>
Message-ID: <201402091055.49824.even.rouault@mines-paris.org>

Le vendredi 07 f?vrier 2014 10:55:06, Duarte Carreira a ?crit :
> Thanks Brian.
> 
> But this way you rewrite the whole image to disk. It uses lots of disk
> space and takes forever.
> 
> I want to avoid that and just get the mask out to a msk file as fast as
> possible.
> 
> I don't want to convert my rgba vrt mosaic.
> 
> The final objective is to get a msk file I can use with the simple rgb vrt
> mosaic. Then I'll be able to build overviews with jpeg/ycbcr compression
> which I can't do with rgba vrt because of the 4 bands.
> 
> For now I have tried 3 ways:
> 
> 1) use gdal_rasterize to create a mask directly from the mask polygon
> shapefile. Then just edit the rgb vrt mosaic and add a  maskband to it.
> The problem here is gdaladdo does not honor the maskband. This is the
> fastest way I know, pitty it doesn't work in the end.

I'd be curious that you provide ways of reproducing this. The overview 
computation code has explicit code to deal with mask bands.

> 
> 2) use gdal_translate like you suggested but use -scale to write all 0s in
> all 3 bands, and compress with deflate. You get a valid mask and a very,
> very small useless mosaic. This works but takes a while still.
> 
> 3) use gdal_translate like you suggested but exaggerate the jpeg
> compression so it errors out (jpeg_quality=15). You get an invalid 1kb
> mosaic and an apparently good msk. But it's corrupted in some way. So
> doesn't work.
> 
> I think #1 has potential. If there was a way to somehow turn the tif
> created by gdal_rasterize into a "true" mask file and have it honored by
> gdaladdo we would have a winner.
> 
> Maybe there's a way to directly export the alpha band from the rgba vrt
> mosaic to a mks file without writing anything else? That I guess would be
> the fastest way of all.

You can generate a valid .msk file with the following gdal_translate command :

gdal_translate -b 4 rgba.tif out.tif.msk \
-mo "INTERNAL_MASK_FLAGS_1=2" -mo "INTERNAL_MASK_FLAGS_2=2" \
-mo "INTERNAL_MASK_FLAGS_3=2" -co COMPRESS=DEFLATE -co INTERLEAVE=BAND \
-co NBITS=1

You need to provide as many -mo "INTERNAL_MASK_FLAGS_X=2" option as there are 
bands (so 3 for a RGB dataset as in the above example). This is the important 
option that will make a .msk file being recognized as a mask band.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sun Feb  9 02:04:10 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 9 Feb 2014 11:04:10 +0100
Subject: [gdal-dev] WMS Issues Two Requests
In-Reply-To: <1391782087027-5102514.post@n6.nabble.com>
References: <loom.20140207T083703-734@post.gmane.org>
	<loom.20140207T134104-668@post.gmane.org>
	<1391782087027-5102514.post@n6.nabble.com>
Message-ID: <201402091104.10996.even.rouault@mines-paris.org>

Le vendredi 07 f?vrier 2014 15:08:07, Martin Lewis a ?crit :
> Thanks Jukka.
> 
> I have been having a play around and the 'width' and 'height' sent in the
> WMS Request string appears to be BlockSizeX and BlockSizeY and I think I
> understand now.
> 
> Removing the BlockSizeX and Y  from the XML meant that block size was
> defaulted to 1024 and 1024 - again resulting in two requests.
> 
> Setting BlockSize to 256 and 256 and you get loads of requests as expected
> to fulfil the whole request of 1076 * 787
> 
> However setting the BlockSizeX and Y to the same as SizeX and SizeY (1076,
> 787) in the DataWindow section, created a WMS Request that had 'height' and
> 'width' set to 787 and 1076 - which appears to be exactly what is required.
> 
> This cut the time from start of request to drawing on the screen by 5 times
> - from 5 secs to 1 sec, exactly what I was after.
> 
> I suppose some WMS servers may not support the BlockSize that is being
> requested. (when I set the BlockSize to 2048, one map server was returning
> an error saying it was above the allowed 2001 width!!?)

That's what Jukka mentionned in his first email. Most servers have a maximum 
width/height to avoid being brought down by evil clients. So you need to use 
more reasonable block sizes, and yes you'll request a few more pixels than 
needed, but that's life...

> 
> However at the current moment what is requested appears to be within limits
> of all the servers we talk to.
> 
> Is it as simple as this or is there anything that I have missed?
> 
> Once again thanks for your help.
> 
> Martin
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Re-WMS-Issues-Two-Requests-tp5102423p5
> 102514.html Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sun Feb  9 02:27:36 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 9 Feb 2014 11:27:36 +0100
Subject: [gdal-dev] [GDAL-dev] convert rgba alpha layer to rgb white
In-Reply-To: <000601cf2296$6f229590$4d67c0b0$@carreaud@sites.fr>
References: <000601cf2296$6f229590$4d67c0b0$@carreaud@sites.fr>
Message-ID: <201402091127.36846.even.rouault@mines-paris.org>

Pierre,

the issue must be "-srcnodata b4". You probably intended b4 to be understood 
as band 4, but the value expected is a numeric value so b4 is actually 
understood as 0. I've just added validation of those arguments, so that this 
doesn't get unnoticed.

You should just remove "-srcnodata b4" and try again. On a very simple 
artificial example, I get the expected result.

Note however than gdalbuildvrt has no particular handling for alpha bands, If 
you have 2 rasters that overlap partially, it will not do any blending. i.e. a  
transparent area of the raster listed in last position in the gdalbuildvrt 
command line will completely override the raster beneath. You need gdalwarp 
for better handling of transparency.

Even

> Hi list,
> 
> I?m trying to assembly some RGBA tiff in one with gdalbuildvrt and then to
> translate them to a RGB TIFF tiled file YCBCR jpeg compressed.
> 
> No problem
 But now, I would like to get a white color in the background
> instead of the black.
> 
> 
> 
> The following commands work but I get nodata (and so, black) on any white
> pixels whereas I just wanted to convert alpha to white
 The problem in on
> the vrt.
> 
> 
> 
> gdalbuildvrt assembly.vrt -srcnodata b4 ?hidenodata -vrtnodata 255 *.tif
> 
> gdal_translate -of GTIFF -b 1 -b 2 -b 3 -co COMPRESS=JPEG -co
> JPEG_QUALITY=95 -co TFW=YES -co BIGTIFF=YES -co ALPHA=NO -co TILED=YES -co
> PHOTOMETRIC=YCBCR -co PROFILE=BASELINE assembly.vrt assembly_JPG.tif
> 
> gdaladdo -r gauss -ro --config COMPRESS_OVERVIEW JPEG --config
> JPEG_QUALITY_OVERVIEW 95 --config BIGTIFF_OVERVIEW YES --config
> PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL --config
> NODATA_VALUES 255 assembly_JPG.tif 2 4 8 16 32 64 128 256
> 
> 
> 
> Do you have an idea? The problem is the is not ?init option, just
> -vrtnodata ?255 255 255? to fix both background color but also the nodata
> bandper band

> 
> 
> 
> Pierre CARREAUD
> 
> Sp?cialiste en imagerie num?rique
> 
> 
> 
> 
> carte_voeux_2014
> 
> L?ING?NIERIE DE LA DURABILIT?
> 
> 
> 
> SITES ? Entit? ?le-de-France
> 
> Division du D?veloppement Technique
> 
> 2 bis avenue du Centre
> 
> 92500 Rueil-Malmaison, France
> 
> Tel : 01 41 39 02 00 / Fax : 01 41 39 02 01
> 
>  <http://www.sites.fr/> www.sites.fr
> 
> 
> 
> CARRES  EXPERTISE  cid:image002.jpg at 01CB7A74.CDE1E680  INSTRUMENTATION /
> MESURES  cid:image002.jpg at 01CB7A74.CDE1E680  INGENIERIE

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sun Feb  9 02:49:24 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 9 Feb 2014 11:49:24 +0100
Subject: [gdal-dev] Problems linking 1.10 with CURL support
In-Reply-To: <loom.20140203T150239-14@post.gmane.org>
References: <loom.20140203T150239-14@post.gmane.org>
Message-ID: <201402091149.24423.even.rouault@mines-paris.org>

Le lundi 03 f?vrier 2014 15:24:35, Andy Cheetham a ?crit :
> Hi All
> 
> I'm have trouble linking GDAL 1.10 with CURL support enabled.
> 
> I can and have been building GDAL 1.9 with CURL so I'm sure I have all the
> settings within the nmake.opt file correct, unless I have to do something
> different for the latest version.
> 
> I'm on Windows 7 and have tried using both VS2005 and VS2010.
> 
> The linking error I'm getting is:
> 
> error LNK2019: unresolved external symbol "void __cdecl
> CPLHTTPSetOptions(void *,char * *)" (?CPLHTTPSetOptions@@YAXPAXPAPAD at Z)
> referenced in function "void __cdecl CPLHTTPInitializeRequest(struct
> CPLHTTPRequest *,char const *,char const * const *)" (?
> CPLHTTPInitializeRequest@@YAXPAUCPLHTTPRequest@@PBDPBQBD at Z)	gdalhttp.obj

Sounds a bit like you need to do a full rebuild, in case you modified the 
nmake.opt to add CURL options after having attempted previous builds.

> 
> My nmake.opt section looks like the following
> 
> # Uncomment to use libcurl (DLL by default)
> # The cURL library is used for WCS, WMS, GeoJSON, SRS call importFromUrl(),
> WFS, GFT, CouchDB, /vsicurl/ etc.
> CURL_DIR=W:\3rdpartyLibs\curl\7_35\src\
> CURL_INC=-I$(CURL_DIR)/include
> # Uncoment following line to use libcurl as dynamic library
> CURL_LIB = w:/lib/libcurl.lib wsock32.lib wldap32.lib winmm.lib
> # Uncoment following two lines to use libcurl as static library
> #CURL_LIB = $(CURL_DIR)/libcurl.lib wsock32.lib wldap32.lib winmm.lib
> #CURL_CFLAGS = -DCURL_STATICLIB
> 
> The file cpl_http.cpp does have an implimentation but VS2005 would appear
> to indicate that the #define HAVE)CURL is not defined???
> 
> Any help would be appreciated.
> 
> Cheers
> Andy
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sun Feb  9 04:21:55 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 9 Feb 2014 13:21:55 +0100
Subject: [gdal-dev] warnings a fail with poppler
In-Reply-To: <52ED99D3.2080409@ualg.pt>
References: <52ED99D3.2080409@ualg.pt>
Message-ID: <201402091321.55901.even.rouault@mines-paris.org>

Le dimanche 02 f?vrier 2014 02:05:23, Joaquim Luis a ?crit :
> Hi,
> 
> I am seeing this warnings and trying to build with poppler (a trunk
> build here) fails too with
> 
> pdfdataset.obj : error LNK2001: unresolved external symbol "public:
> __cdecl SplashOutputDev::SplashOutputDev(enum
> SplashColorMode,int,bool,unsigned char *,bool,bool,enum
> SplashThinLineMode,bool)"
> (??0SplashOutputDev@@QEAA at W4SplashColorMode@@H_NPEAE11W4SplashThinLineMode@
> @1 at Z) pdfdataset.obj : error LNK2001: unresolved external symbol "public:
> struct Ref * __cdecl Catalog::getPageRef(int)"
> (?getPageRef at Catalog@@QEAAPEAURef@@H at Z)
> 
> I could see that SplashOutputDev is poppler.lib

I'm not sure why you get this error. Perhaps due how poppler.lib was generated 
? Are the symbols well exported in it ?

I can see that Tamas has upgraded his builds at 
http://www.gisinternals.com/sdk/ to latest poppler (0.24.5), so you could 
likely take poppler.lib from there.

> 
> and now the warnings

They aren't particularly new I guess since that code hasn't changed in a 
while. Would be nice if someone wanted to clean them up.

> 
> c:\programs\gdaltrunk\gdal\frmts\iris\irisdataset.cpp(564) : warning
> C4701: potentially uninitialized local variable 'dfCos2SigmaM' used
> c:\programs\gdaltrunk\gdal\frmts\iris\irisdataset.cpp(558) : warning
> C4701: potentially uninitialized local variable 'dfSinSigma' used
> c:\programs\gdaltrunk\gdal\frmts\iris\irisdataset.cpp(558) : warning
> C4701: potentially uninitialized local variable 'dfCosSigma' used
> 
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(2469) :
> warning C4701: potentially uninitialized local variable 'iWrkNumType' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3440) :
> warning C4706: assignment within conditional expression
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3447) :
> warning C4706: assignment within conditional expression
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3462) :
> warning C4706: assignment within conditional expression
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3469) :
> warning C4706: assignment within conditional expression
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3401) :
> warning C4701: potentially uninitialized local variable 'dfNoData' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3405) :
> warning C4701: potentially uninitialized local variable 'dfScale' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3410) :
> warning C4701: potentially uninitialized local variable 'dfOffset' used
> 
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\ehapi.c(448) : warning
> C4701: potentially uninitialized local variable 'sdInterfaceID' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\ehapi.c(435) : warning
> C4701: potentially uninitialized local variable 'HDFfid' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\ehapi.c(445) : warning
> C4701: potentially uninitialized local variable 'acs' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(3270) : warning
> C4701: potentially uninitialized local variable 'c_info' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(3281) : warning
> C4701: potentially uninitialized local variable 'chunkDef' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6470) : warning
> C4701: potentially uninitialized local variable 'latrad0' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6500) : warning
> C4701: potentially uninitialized local variable 'yMtr0' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6499) : warning
> C4701: potentially uninitialized local variable 'xMtr0' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(2632) : warning
> C4701: potentially uninitialized local variable 'ndims' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6741) : warning
> C4701: potentially uninitialized local variable 'qp_cea' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6741) : warning
> C4701: potentially uninitialized local variable 'kz_cea' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(7967) : warning
> C4701: potentially uninitialized local variable 'minCol' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(7969) : warning
> C4701: potentially uninitialized local variable 'minRow' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(7968) : warning
> C4701: potentially uninitialized local variable 'maxCol' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(7970) : warning
> C4701: potentially uninitialized local variable 'maxRow' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(8614) : warning
> C4701: potentially uninitialized local variable 'rank' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9025) : warning
> C4701: potentially uninitialized local variable 'j' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9564) : warning
> C4701: potentially uninitialized local variable 'xdum' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9565) : warning
> C4701: potentially uninitialized local variable 'ydum' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9681) : warning
> C4701: potentially uninitialized local variable 'size' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9843) : warning
> C4701: potentially uninitialized local variable 'xdum' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9844) : warning
> C4701: potentially uninitialized local variable 'ydum' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(10109) : warning
> C4701: potentially uninitialized local variable 'nRetn' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(10573) : warning
> C4701: potentially uninitialized local variable 'c_info' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(2451) : warning
> C4701: potentially uninitialized local variable 'vdataID' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(4282) : warning
> C4701: potentially uninitialized local variable 'nVal' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(5839) : warning
> C4701: potentially uninitialized local variable 'j' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(6454) : warning
> C4701: potentially uninitialized local variable 'tmpVal' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(6776) : warning
> C4701: potentially uninitialized local variable 'k' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(7267) : warning
> C4701: potentially uninitialized local variable 'incr' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(7301) : warning
> C4701: potentially uninitialized local variable 'offset' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(7271) : warning
> C4701: potentially uninitialized local variable 'index' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(7249) : warning
> C4701: potentially uninitialized local variable 'bufOffset' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(8428) : warning
> C4701: potentially uninitialized local variable 'incr' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(8414) : warning
> C4701: potentially uninitialized local variable 'index' used
> c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(9128) : warning
> C4701: potentially uninitialized local variable 'j' used
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sun Feb  9 04:36:06 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 9 Feb 2014 13:36:06 +0100
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <2A18A4344312134B937DF938D992264A05099522@OKCEXHPRD121.chkenergy.net>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<201402010827.32484.even.rouault@mines-paris.org>
	<2A18A4344312134B937DF938D992264A05099522@OKCEXHPRD121.chkenergy.net>
Message-ID: <201402091336.06332.even.rouault@mines-paris.org>

Le samedi 01 f?vrier 2014 15:04:46, David Baker (Geoscience) a ?crit :
> Evan,
> 
> I am not sure how to profile as I do not have access to the code to
> profile.  I did do a timing test...
> 
> vrt file = 22,970 KB
> bil file = 35,180 KB * 55,501
> 
> I piped five locations from the loc.txt file:
> -96.0 36.0
> -98.0 37.0
> -100.0 38.0
> -99.0 39.0
> -101.0 35.0
> 
> gdallocationinfo -valonly -geoloc intermap.vrt < loc.txt
> 189.841857910156        25.5 sec
> 384.857452392578        22.6 sec
> 762.015930175781        22.9 sec
> 550.719116210938        23.6 sec
> 883.637023925781        22.9 sec
> 
> Note: I used a lap timer on my iPhone to capture the split times as the
> results appeared in the console window.  Does this give any insight?

Woo I agree that's utterly slow ! When you mentionned slow I thought it was 
more in the order of 0.1 second ! We can already exclude the parsing time of 
the VRT since you do that in the same gdallocationinfo session and that there 
will be just one parsing.
And I can't believe that the intersection test for 55 000 rectangles takes ~ 
20 seconds, unless you have an old i386 at 5 MHz ;-)
My usual way of profiling stuff that is slow in the order of more than one 
second is to run under gdb, break with Ctrl+C, display the stack trace, 
continue the run, break again, display the stack trace, etc.. If you end up 
breaking in the same function, then you've found the bottleneck.

I see now that in that thread GDAL_DISABLE_READDIR_ON_OPEN = TRUE was 
suggested and seems to improve things significantly. Perhaps we should try to 
cache the result of the initial readdir so it can benefits to later attempts, 
but I haven't checked how easily that could be miplemented. Or perhaps we 
should just change the default value of GDAL_DISABLE_READDIR_ON_OPEN since it 
causes problem from time to time.
But generally filesystems don't behave very well when there are a lot of files 
in the same directory. You'd better organizing your tiles in subdirectories.
But still 1 to 3 seconds sounds a bit slow to me. Would be cool if you could 
try the above suggestion to identify where the time is spent.

Even

> 
> David
> 
> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org
> [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Even Rouault Sent:
> Saturday, February 01, 2014 1:28 AM
> To: Brian Case
> Cc: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Fast Pixel Access
> 
> Le samedi 01 f?vrier 2014 00:23:13, Brian Case a ?crit :
> > evenr
> > 
> > 
> > what about the use of a tileindex?
> 
> You really mean a tileindex as produced by gdaltindex ? Well, that's not
> exactly the same beast as a VRT, but yes if it was recognized as a GDAL
> dataset then you could potentially save the cost of XML parsing. One could
> imagine that the VRT driver would accept a tileindex as an altenate
> connection string.
> 
> Anyway it would be interesting to first profile where the time is spent in
> David use case. If it's in the XML parsing, then I can't see what could be
> easily improved in that area. If it's the intersection, then there's
> potential for improvement.
> 
> > seems an intersection with a set of
> > polys first would be quick
> > 
> > 
> > 
> > brian
> > 
> > On Fri, 2014-01-31 at 19:30 +0100, Even Rouault wrote:
> > > Le vendredi 31 janvier 2014 17:15:53, David Baker (Geoscience) a ?crit :
> > > > Dev's,
> > > > 
> > > > I have a set of 55,501 bil files in a single directory.  They are
> > > > DEMS data that cover the US in 7.5 minute tiles.  I would like to
> > > > randomly access elevations at a given lat/lon's from the whole
> > > > dataset.  I created a vrt file from the directory of bil files, and
> > > > have been able to access the elevation at a given lat/lon using
> > > > gdallocationinfo, but because of the size of the dataset, this
> > > > operation is somewhat slow. Can the vrt be indexed?
> > > 
> > > No, it isn't currently, although I think it could be improved to have a
> > > in- memory index with moderate effort.
> > > 
> > > But are you sure the slowness is due to the lack of index ? 55,000 is a
> > > big number, but not that big. Maybe the slowness just comes from the
> > > opening time (XML parsing) of such a big VRT. That would need to be
> > > profiled to be sure where the bottleneck is.
> > > 
> > > > Or, is there a faster, better way to access the pixels?  I would
> > > > first like to do this with the utilities before diving into code
> > > > (C#). The files are regularly named base on their location within a
> > > > 1 arc-second grid.
> > > > 
> > > > Thanks,
> > > > David
> > > > 
> > > > David M. Baker
> > > > Senior Advisor - Geoscience Technology
> > > > Chesapeake Energy Corporation
> > > > david.m.baker at chk.com<mailto:david.m.baker at chk.com>
> > > > 
> > > > 
> > > > ________________________________
> > > > 
> > > > This email (and attachments if any) is intended only for the use of
> > > > the individual or entity to which it is addressed, and may contain
> > > > information that is confidential or privileged and exempt from
> > > > disclosure under applicable law. If the reader of this email is not
> > > > the intended recipient, or the employee or agent responsible for
> > > > delivering this message to the intended recipient, you are hereby
> > > > notified that any dissemination, distribution or copying of this
> > > > communication is strictly prohibited. If you have received this
> > > > communication in error, please notify the sender immediately by
> > > > return email and destroy all copies of the email (and attachments if
> > > > any).
> 
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> ________________________________
> 
> This email (and attachments if any) is intended only for the use of the
> individual or entity to which it is addressed, and may contain information
> that is confidential or privileged and exempt from disclosure under
> applicable law. If the reader of this email is not the intended recipient,
> or the employee or agent responsible for delivering this message to the
> intended recipient, you are hereby notified that any dissemination,
> distribution or copying of this communication is strictly prohibited. If
> you have received this communication in error, please notify the sender
> immediately by return email and destroy all copies of the email (and
> attachments if any).

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From ao at t-kartor.se  Mon Feb 10 00:27:03 2014
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Mon, 10 Feb 2014 09:27:03 +0100
Subject: [gdal-dev] TOC sub-dataset retrieving when frame with same
 coverage share the same boundary rectangle.
In-Reply-To: <1391786061.52f4f84ddf19c@imp.free.fr>
References: <SNT151-W560ADB47F666CDFC3E6A4ACF970@phx.gbl>
	<1391786061.52f4f84ddf19c@imp.free.fr>
Message-ID: <52F88D57.3090107@t-kartor.se>

Hi

A RPF structure (CADRG, CIB, ECRG etc) may include any combination of 
scalelevels and/or geographic zones as referenced in the A.TOC file. So 
there may be both scale-overlaps and zone-overlaps.
There is also a frame-based update concept but this is seldom used.
An example from a CADRG dataset containing 14 subdatasets:
SUBDATASET_6_NAME=NITF_TOC_ENTRY:CADRG_TFC_250K_6_5:A.TOC
SUBDATASET_6_DESC=CADRG:TFC:Transit Flying Chart (UK):250K:6:5
SUBDATASET_7_NAME=NITF_TOC_ENTRY:CADRG_LFC-FR_(Day)_500K_1_6:A.TOC
SUBDATASET_7_DESC=CADRG:LFC-FR (Day):Low Flying Chart (Day) - Host 
Nation:500K:1:6

This means that you must analyze the individual subdatasets to 
extract/combine info for each scalelevel individually. To my knowledge, 
there is no consistent naming principle in the standard - so the 
scalelevels are just logical names in the A.TOC file.
There should be overlaps between the zones but this data content "shall 
be identical".

Best Regards

Andreas Oxenstierna

> Selon Nicolas G <nicolas.g-dev at outlook.fr>:
>
> hi
>
> yes you have well described the behaviour of the driver. The
> subdatasets match the boundary rectangles
> And it is very odd to have two frames with same col row
> coordinates for the same boundary rectangle.
> in your case you have to directly open the nitf tile instead
> of the a.toc
>
>> Hi,
>>
>>
>>
>> I?m using GDAL to get the CADRG database sub-dataset list.
>>
>>
>> As an example (TOC file content):
>>
>> - Only one boundary rectangle defined in ?boundary rectangle section?,
>>
>> - In ?frame file index section?, I have two frames covering the same
>> area (same resolution, ?, but different functional content),
>>
>> - These two frames are stored in different path but all referring to the
>> same boundary rectangle.
>>
>>
>> Then in that case, the message "Frame entry(%d,%d) for frame file index
>> %d was already found." is raised by GDAL when loading the TOC file, and
>> finally
>> only one sub-dataset is given back to me(the first one of the TOC file) ->
>> method ?RPFTOCReadFromBuffer()? of Rpftocfile.cpp.
>>
>>
>> It seems that GDAL uses boundary rectangles and frame files to build the
>> sub-dataset list and if, for a same boundary rectangle, two or more frames
>> with
>> the same coverage belong to different path
>> then only one GDAL sub-dataset is created.
>>
>>
>> Does someone can help me and explain me how to access the data of these
>> two frames files (same coverage, same boundary rectangle but different path)
>> through GDAL API?
>>
>>
>> Or is there any development on this subject?
>>
>>
>>
>> Thanks,
>>
>>
>>
>> Nicolas
>>
>>
>>
>>
>>
>>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140210/7487482c/attachment.html>

From antti.castren at iki.fi  Mon Feb 10 00:41:59 2014
From: antti.castren at iki.fi (=?ISO-8859-1?Q?Antti_Castr=E9n?=)
Date: Mon, 10 Feb 2014 10:41:59 +0200
Subject: [gdal-dev] gdalwarp EPSG:32662 problem
In-Reply-To: <ld78dv$tf$2@ger.gmane.org>
References: <52F5CA9E.9060601@swoodbridge.com>
	<201402090042.30038.even.rouault@mines-paris.org>
	<ld78dv$tf$2@ger.gmane.org>
Message-ID: <CAPcvoO+bV8r9x1QQK+_Vte0C8yW8hPwyTV6zmB3DQR4fktpURw@mail.gmail.com>

2014-02-09 8:40 GMT+02:00 Andre Joost <andre+joost at nurfuerspam.de>:
> Am 09.02.2014 00:42, schrieb Even Rouault:
>>
>> But Antti guess seems right. Instead of +ellps=WGS84 (or +datum=WGS84), if
>> you
>> play with the a (semi-major axis) and b (semi-minor axis) parameters, you
>> can
>> see that only +a has an influence, so latest proj version seems to use a
>> spherical version of eqc.
>
>
> If you look at
> <http://trac.osgeo.org/proj/browser/trunk/proj/src/PJ_eqc.c>
>
> and the chapter 12 of Snyders manual, you will only find formulas for the
> sphere. So I guess there is no other way to calculate eqc.
>
> Maybe older versions calculated another radius for the sphere when an
> ellipsoid was given.

Stephen's "shift" was about 20km south, which correlates quite well if
you use semi-minor axis of WGS84 as radius of sphere while calculating
forward, and semi-major axis as radius of sphere while calculating the
inverse. At latitude of 55 degrees the difference is ca. 20 530 meters
(55 degrees -> 54.8156 degrees).

There are several different radii of the Earth, and some of them could
arguably be used in this context in place of semi-major axis.

All radii ar not created equal: http://en.wikipedia.org/wiki/Earth_radius

You have to bear in mind that this projection is intended for small
scale mapping, for example mapping the whole world. In that scale 20
km is nothing. If you need better representation of the Earth you have
to use a projection which takes ellipsoidal properties into account.
Of course the beef in this thread is not about choosing a projection,
but the change/difference in formulae used, which can create problems
as Stephen pointed out.

Cheers,

  Antti

From MLewis at ngms.eu.com  Mon Feb 10 01:31:14 2014
From: MLewis at ngms.eu.com (Martin Lewis)
Date: Mon, 10 Feb 2014 01:31:14 -0800 (PST)
Subject: [gdal-dev] WMS Issues Two Requests
In-Reply-To: <201402091104.10996.even.rouault@mines-paris.org>
References: <loom.20140207T083703-734@post.gmane.org>
	<1391767780489-5102449.post@n6.nabble.com>
	<loom.20140207T134104-668@post.gmane.org>
	<1391782087027-5102514.post@n6.nabble.com>
	<201402091104.10996.even.rouault@mines-paris.org>
Message-ID: <1392024674095-5102848.post@n6.nabble.com>

Unfortunately. Even, 'that's life' in my customers world was too slow.

Now I understand what the WMS driver is doing in terms of BlockSize and
DataWindow, I can work round the issue for the time being by requesting a
data window sized block in a single request rather than lots of smaller
blocks in several requests.

This has effectively speeded up the user interaction from about 5 secs to
1-2 secs, an acceptable delay when navigating around a map.

Thanks

Martin



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Re-WMS-Issues-Two-Requests-tp5102423p5102848.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From nicolas.g-dev at outlook.fr  Mon Feb 10 02:16:27 2014
From: nicolas.g-dev at outlook.fr (Nicolas G)
Date: Mon, 10 Feb 2014 11:16:27 +0100
Subject: [gdal-dev] TOC sub-dataset retrieving when frame with same
 coverage share the same boundary rectangle.
In-Reply-To: <52F88D57.3090107@t-kartor.se>
References: <SNT151-W560ADB47F666CDFC3E6A4ACF970@phx.gbl>
	<1391786061.52f4f84ddf19c@imp.free.fr>,<52F88D57.3090107@t-kartor.se>
Message-ID: <SNT151-W225DE7EDFFF9E4933AFE7FCF900@phx.gbl>

Hi Andreas,

The fact is that I can't use the GDAL API to get the different sub-datasets in this particular case, so can't make any combination of frames without going directly to all NITF frames as suggested by Even.

Regarding your answer, maybe the meaning of Zone and Scale is not clear for me:
Zone = Arc Zone?Scale = Logical name (as in your example LFC, TFC...)? but not really the resolution.

For me, the subdataset could be a directory in RPF directory tree, as each directory is generated according to different parameters.


You normally have one directory (path) by [Arc Zone/Scale Logical Name (LFC, TFC...)] couple (I don't take into account the fact that a directory can be splitted if frames files are not contiguous). 

The problem appears when two [Arc Zone/Scale Logical Name (LFC, TFC...)] contain data at the same resolution, so with the same tiling, so potentially with frames at the same col/row.


As you have written "There should be overlaps between the zones but this data content
      "shall be identical". "
So the following example is not really possible?

Example:
I have one boundary rectangle which belongs to two differents paths (but for the same coverage (same Arc zone)) by example a path with LFC-FR_(Night) content and a path with LFC-FR_(Day) content (all at the same resolution).
For each frame coverage I have one frame in LFC-FR_(Night) path and one frame in LFC-FR_(Day) path (so different paths and frame names and extensions), then GDAL reports to me only one Sub-dataset, and then I can't access through GDAL Subdataset API the data in the two paths. I need to analyse the TOC file in my App to get the paths, boundaries... and then access the frame files.

Nico

Date: Mon, 10 Feb 2014 09:27:03 +0100
From: ao at t-kartor.se
To: even.rouault at mines-paris.org; nicolas.g-dev at outlook.fr
CC: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] TOC sub-dataset retrieving when frame with same coverage share the same boundary rectangle.


  
    
  
  
    Hi

      

      A RPF structure (CADRG, CIB, ECRG etc) may include any combination
      of scalelevels and/or geographic zones as referenced in the A.TOC
      file. So there may be both scale-overlaps and zone-overlaps. 

      There is also a frame-based update concept but this is seldom
      used.

      An example from a CADRG dataset containing 14 subdatasets:

      
      Corps du message
      
      SUBDATASET_6_NAME=NITF_TOC_ENTRY:CADRG_TFC_250K_6_5:A.TOC 

      SUBDATASET_6_DESC=CADRG:TFC:Transit Flying Chart (UK):250K:6:5 

      SUBDATASET_7_NAME=NITF_TOC_ENTRY:CADRG_LFC-FR_(Day)_500K_1_6:A.TOC
      

      SUBDATASET_7_DESC=CADRG:LFC-FR (Day):Low Flying Chart (Day) - Host
      Nation:500K:1:6 

      

      This means that you must analyze the individual subdatasets to
      extract/combine info for each scalelevel individually. To my
      knowledge, there is no consistent naming principle in the standard
      - so the scalelevels are just logical names in the A.TOC file.

      There should be overlaps between the zones but this data content
      "shall be identical". 

      

      Best Regards

      

      Andreas Oxenstierna

      

    
    
      Selon Nicolas G <nicolas.g-dev at outlook.fr>:

hi

yes you have well described the behaviour of the driver. The
subdatasets match the boundary rectangles
And it is very odd to have two frames with same col row
coordinates for the same boundary rectangle.
in your case you have to directly open the nitf tile instead
of the a.toc


      
        Hi,



I?m using GDAL to get the CADRG database sub-dataset list.


As an example (TOC file content):

- Only one boundary rectangle defined in ?boundary rectangle section?,

- In ?frame file index section?, I have two frames covering the same
area (same resolution, ?, but different functional content),

- These two frames are stored in different path but all referring to the
same boundary rectangle.


Then in that case, the message "Frame entry(%d,%d) for frame file index
%d was already found." is raised by GDAL when loading the TOC file, and
finally
only one sub-dataset is given back to me(the first one of the TOC file) ->
method ?RPFTOCReadFromBuffer()? of Rpftocfile.cpp.


It seems that GDAL uses boundary rectangles and frame files to build the
sub-dataset list and if, for a same boundary rectangle, two or more frames
with
the same coverage belong to different path
then only one GDAL sub-dataset is created.


Does someone can help me and explain me how to access the data of these
two frames files (same coverage, same boundary rectangle but different path)
through GDAL API?


Or is there any development on this subject?



Thanks,



Nicolas







      
      
      

      
      

      _______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
    
    

    
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140210/3fe919d6/attachment-0001.html>

From even.rouault at mines-paris.org  Mon Feb 10 04:15:24 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 10 Feb 2014 13:15:24 +0100
Subject: [gdal-dev] TOC sub-dataset retrieving when frame with same
	coverage share the same boundary rectangle.
In-Reply-To: <SNT151-W225DE7EDFFF9E4933AFE7FCF900@phx.gbl>
References: <SNT151-W560ADB47F666CDFC3E6A4ACF970@phx.gbl>
	<1391786061.52f4f84ddf19c@imp.free.fr>,
	<52F88D57.3090107@t-kartor.se>
	<SNT151-W225DE7EDFFF9E4933AFE7FCF900@phx.gbl>
Message-ID: <1392034524.52f8c2dc26be9@imp.free.fr>

Selon Nicolas G <nicolas.g-dev at outlook.fr>:

> Hi Andreas,
>
> The fact is that I can't use the GDAL API to get the different sub-datasets
> in this particular case, so can't make any combination of frames without
> going directly to all NITF frames as suggested by Even.
>
> Regarding your answer, maybe the meaning of Zone and Scale is not clear for
> me:
> Zone = Arc Zone?Scale = Logical name (as in your example LFC, TFC...)? but
> not really the resolution.
>
> For me, the subdataset could be a directory in RPF directory tree, as each
> directory is generated according to different parameters.
>
>
> You normally have one directory (path) by [Arc Zone/Scale Logical Name (LFC,
> TFC...)] couple (I don't take into account the fact that a directory can be
> splitted if frames files are not contiguous).
>
> The problem appears when two [Arc Zone/Scale Logical Name (LFC, TFC...)]
> contain data at the same resolution, so with the same tiling, so potentially
> with frames at the same col/row.

I suspect your A.TOC is not correctly formatted, or in a uncommon way. For
frames attached to one given (Arc Zone, Scale Logical Name), called a "rectangle
boundary" in RPF spec, you
should not have 2 frames with same col/row.

According to
http://earth-info.nga.mil/publications/specs/printed/2411/2411_RPF.pdf page 20 :

"""b. Each boundary rectangle defined in the [boundary
rectangle section] of a [table of contents file] will act as a
logical container for a rectangular &#8220;virtualmatrix&#8221; of frames
(see 5.2.1 below). Individual frames may be referenced by their
(row, column) position within such a matrix."""

And then page 30 :
"(3) The [boundary rectangle section) will contain the
boundaries of one or more boundary rectangles, each defining the
periphery of a geographic area containing all of the [frame file]s
in the given data interchange volume that have a given data typet
compression ratio, producer, latitudinal zone, and scale (or
resolution). A given record will also specify the dimensions of a
rectangular &#8220;virtual matrix&#8221; of fixed-size frames of the given scale
or resolution that fills the given boundary rectangle"

Page 31:
"(4) The [frame file index section] will contain scales
and data types for all [frame file]s in the given volume. Each
entry will identify the boundary rectangle (named in the [boundary
rectangle section]) where the frame is located, and it will
specify the row and column in a &#8220;virtual matrix&#8221; of frames within
the boundary rectangle where the specific frame is located"

==> So this sounds pretty clear to me that you shouldn't have 2 frames within
the same boundary rectangle that have identical row,col
The solution would be to have 2 boundary rectangles (with same extent) and
attach one single frame to one of those boundary rectangles

Where does your A.TOC comes from : is it provided by a data producer, or your
own creation ?


>
>
> As you have written "There should be overlaps between the zones but this data
> content
>       "shall be identical". "
> So the following example is not really possible?
>
> Example:
> I have one boundary rectangle which belongs to two differents paths (but for
> the same coverage (same Arc zone)) by example a path with LFC-FR_(Night)
> content and a path with LFC-FR_(Day) content (all at the same resolution).
> For each frame coverage I have one frame in LFC-FR_(Night) path and one frame
> in LFC-FR_(Day) path (so different paths and frame names and extensions),
> then GDAL reports to me only one Sub-dataset, and then I can't access through
> GDAL Subdataset API the data in the two paths. I need to analyse the TOC file
> in my App to get the paths, boundaries... and then access the frame files.
>
> Nico
>
> Date: Mon, 10 Feb 2014 09:27:03 +0100
> From: ao at t-kartor.se
> To: even.rouault at mines-paris.org; nicolas.g-dev at outlook.fr
> CC: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] TOC sub-dataset retrieving when frame with same
> coverage share the same boundary rectangle.
>
>
>
>
>
>
>     Hi
>
>
>
>       A RPF structure (CADRG, CIB, ECRG etc) may include any combination
>       of scalelevels and/or geographic zones as referenced in the A.TOC
>       file. So there may be both scale-overlaps and zone-overlaps.
>
>       There is also a frame-based update concept but this is seldom
>       used.
>
>       An example from a CADRG dataset containing 14 subdatasets:
>
>
>       Corps du message
>
>       SUBDATASET_6_NAME=NITF_TOC_ENTRY:CADRG_TFC_250K_6_5:A.TOC
>
>       SUBDATASET_6_DESC=CADRG:TFC:Transit Flying Chart (UK):250K:6:5
>
>       SUBDATASET_7_NAME=NITF_TOC_ENTRY:CADRG_LFC-FR_(Day)_500K_1_6:A.TOC
>
>
>       SUBDATASET_7_DESC=CADRG:LFC-FR (Day):Low Flying Chart (Day) - Host
>       Nation:500K:1:6
>
>
>
>       This means that you must analyze the individual subdatasets to
>       extract/combine info for each scalelevel individually. To my
>       knowledge, there is no consistent naming principle in the standard
>       - so the scalelevels are just logical names in the A.TOC file.
>
>       There should be overlaps between the zones but this data content
>       "shall be identical".
>
>
>
>       Best Regards
>
>
>
>       Andreas Oxenstierna
>
>
>
>
>
>       Selon Nicolas G <nicolas.g-dev at outlook.fr>:
>
> hi
>
> yes you have well described the behaviour of the driver. The
> subdatasets match the boundary rectangles
> And it is very odd to have two frames with same col row
> coordinates for the same boundary rectangle.
> in your case you have to directly open the nitf tile instead
> of the a.toc
>
>
>
>         Hi,
>
>
>
> I???m using GDAL to get the CADRG database sub-dataset list.
>
>
> As an example (TOC file content):
>
> - Only one boundary rectangle defined in ???boundary rectangle section???,
>
> - In ???frame file index section???, I have two frames covering the same
> area (same resolution, ???, but different functional content),
>
> - These two frames are stored in different path but all referring to the
> same boundary rectangle.
>
>
> Then in that case, the message "Frame entry(%d,%d) for frame file index
> %d was already found." is raised by GDAL when loading the TOC file, and
> finally
> only one sub-dataset is given back to me(the first one of the TOC file) ->
> method ???RPFTOCReadFromBuffer()??? of Rpftocfile.cpp.
>
>
> It seems that GDAL uses boundary rectangles and frame files to build the
> sub-dataset list and if, for a same boundary rectangle, two or more frames
> with
> the same coverage belong to different path
> then only one GDAL sub-dataset is created.
>
>
> Does someone can help me and explain me how to access the data of these
> two frames files (same coverage, same boundary rectangle but different path)
> through GDAL API?
>
>
> Or is there any development on this subject?
>
>
>
> Thanks,
>
>
>
> Nicolas
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>       _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>



From even.rouault at mines-paris.org  Mon Feb 10 04:18:51 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 10 Feb 2014 13:18:51 +0100
Subject: [gdal-dev] WMS Issues Two Requests
In-Reply-To: <1392024674095-5102848.post@n6.nabble.com>
References: <loom.20140207T083703-734@post.gmane.org>
	<1391767780489-5102449.post@n6.nabble.com>
	<loom.20140207T134104-668@post.gmane.org>
	<1391782087027-5102514.post@n6.nabble.com>
	<201402091104.10996.even.rouault@mines-paris.org>
	<1392024674095-5102848.post@n6.nabble.com>
Message-ID: <1392034731.52f8c3ab1d994@imp.free.fr>

Selon Martin Lewis <MLewis at ngms.eu.com>:

> Unfortunately. Even, 'that's life' in my customers world was too slow.

I didn't imply that you had to bear poor performance. For higher performance,
other protocols, tile-oriented and cache friendly, are more appropriate such as
WMTS, TMS.

>
> Now I understand what the WMS driver is doing in terms of BlockSize and
> DataWindow, I can work round the issue for the time being by requesting a
> data window sized block in a single request rather than lots of smaller
> blocks in several requests.
>
> This has effectively speeded up the user interaction from about 5 secs to
> 1-2 secs, an acceptable delay when navigating around a map.
>
> Thanks
>
> Martin
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.x6.nabble.com/Re-WMS-Issues-Two-Requests-tp5102423p5102848.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From david.m.baker at chk.com  Mon Feb 10 05:14:38 2014
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Mon, 10 Feb 2014 13:14:38 +0000
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <201402091336.06332.even.rouault@mines-paris.org>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<201402010827.32484.even.rouault@mines-paris.org>
	<2A18A4344312134B937DF938D992264A05099522@OKCEXHPRD121.chkenergy.net>
	<201402091336.06332.even.rouault@mines-paris.org>
Message-ID: <2A18A4344312134B937DF938D992264A050D69BA@OKCEXHPRD122.chkenergy.net>

Even,

No not an i386...  A Dell Precision T3500 w/Intel W3680 @ 3.33GHhz 6x2 cores with 12.0GB.  Thought the data is on the network, not local, with 1Gbps access.  The GDAL_DISABLE_READDIR_ON_OPEN = TRUE did significantly increase the speed.  Does the BIL driver read the whole file into memory first?  Might a direct read be faster?

And Even, please excuse my ignorance, but what is "gdb?"  I really would like to do the profiling.

David

-----Original Message-----
From: Even Rouault [mailto:even.rouault at mines-paris.org]
Sent: Sunday, February 09, 2014 6:36 AM
To: David Baker (Geoscience)
Cc: 'Brian Case'; 'gdal-dev at lists.osgeo.org'
Subject: Re: [gdal-dev] Fast Pixel Access

Le samedi 01 f?vrier 2014 15:04:46, David Baker (Geoscience) a ?crit :
> Evan,
>
> I am not sure how to profile as I do not have access to the code to
> profile.  I did do a timing test...
>
> vrt file = 22,970 KB
> bil file = 35,180 KB * 55,501
>
> I piped five locations from the loc.txt file:
> -96.0 36.0
> -98.0 37.0
> -100.0 38.0
> -99.0 39.0
> -101.0 35.0
>
> gdallocationinfo -valonly -geoloc intermap.vrt < loc.txt
> 189.841857910156        25.5 sec
> 384.857452392578        22.6 sec
> 762.015930175781        22.9 sec
> 550.719116210938        23.6 sec
> 883.637023925781        22.9 sec
>
> Note: I used a lap timer on my iPhone to capture the split times as the
> results appeared in the console window.  Does this give any insight?

Woo I agree that's utterly slow ! When you mentionned slow I thought it was
more in the order of 0.1 second ! We can already exclude the parsing time of
the VRT since you do that in the same gdallocationinfo session and that there
will be just one parsing.
And I can't believe that the intersection test for 55 000 rectangles takes ~
20 seconds, unless you have an old i386 at 5 MHz ;-)
My usual way of profiling stuff that is slow in the order of more than one
second is to run under gdb, break with Ctrl+C, display the stack trace,
continue the run, break again, display the stack trace, etc.. If you end up
breaking in the same function, then you've found the bottleneck.

I see now that in that thread GDAL_DISABLE_READDIR_ON_OPEN = TRUE was
suggested and seems to improve things significantly. Perhaps we should try to
cache the result of the initial readdir so it can benefits to later attempts,
but I haven't checked how easily that could be miplemented. Or perhaps we
should just change the default value of GDAL_DISABLE_READDIR_ON_OPEN since it
causes problem from time to time.
But generally filesystems don't behave very well when there are a lot of files
in the same directory. You'd better organizing your tiles in subdirectories.
But still 1 to 3 seconds sounds a bit slow to me. Would be cool if you could
try the above suggestion to identify where the time is spent.

Even

>
> David
>
> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org
> [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Even Rouault Sent:
> Saturday, February 01, 2014 1:28 AM
> To: Brian Case
> Cc: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Fast Pixel Access
>
> Le samedi 01 f?vrier 2014 00:23:13, Brian Case a ?crit :
> > evenr
> >
> >
> > what about the use of a tileindex?
>
> You really mean a tileindex as produced by gdaltindex ? Well, that's not
> exactly the same beast as a VRT, but yes if it was recognized as a GDAL
> dataset then you could potentially save the cost of XML parsing. One could
> imagine that the VRT driver would accept a tileindex as an altenate
> connection string.
>
> Anyway it would be interesting to first profile where the time is spent in
> David use case. If it's in the XML parsing, then I can't see what could be
> easily improved in that area. If it's the intersection, then there's
> potential for improvement.
>
> > seems an intersection with a set of
> > polys first would be quick
> >
> >
> >
> > brian
> >
> > On Fri, 2014-01-31 at 19:30 +0100, Even Rouault wrote:
> > > Le vendredi 31 janvier 2014 17:15:53, David Baker (Geoscience) a ?crit :
> > > > Dev's,
> > > >
> > > > I have a set of 55,501 bil files in a single directory.  They are
> > > > DEMS data that cover the US in 7.5 minute tiles.  I would like to
> > > > randomly access elevations at a given lat/lon's from the whole
> > > > dataset.  I created a vrt file from the directory of bil files, and
> > > > have been able to access the elevation at a given lat/lon using
> > > > gdallocationinfo, but because of the size of the dataset, this
> > > > operation is somewhat slow. Can the vrt be indexed?
> > >
> > > No, it isn't currently, although I think it could be improved to have a
> > > in- memory index with moderate effort.
> > >
> > > But are you sure the slowness is due to the lack of index ? 55,000 is a
> > > big number, but not that big. Maybe the slowness just comes from the
> > > opening time (XML parsing) of such a big VRT. That would need to be
> > > profiled to be sure where the bottleneck is.
> > >
> > > > Or, is there a faster, better way to access the pixels?  I would
> > > > first like to do this with the utilities before diving into code
> > > > (C#). The files are regularly named base on their location within a
> > > > 1 arc-second grid.
> > > >
> > > > Thanks,
> > > > David
> > > >
> > > > David M. Baker
> > > > Senior Advisor - Geoscience Technology
> > > > Chesapeake Energy Corporation
> > > > david.m.baker at chk.com<mailto:david.m.baker at chk.com>
> > > >
> > > >
> > > > ________________________________
> > > >
> > > > This email (and attachments if any) is intended only for the use of
> > > > the individual or entity to which it is addressed, and may contain
> > > > information that is confidential or privileged and exempt from
> > > > disclosure under applicable law. If the reader of this email is not
> > > > the intended recipient, or the employee or agent responsible for
> > > > delivering this message to the intended recipient, you are hereby
> > > > notified that any dissemination, distribution or copying of this
> > > > communication is strictly prohibited. If you have received this
> > > > communication in error, please notify the sender immediately by
> > > > return email and destroy all copies of the email (and attachments if
> > > > any).
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ________________________________
>
> This email (and attachments if any) is intended only for the use of the
> individual or entity to which it is addressed, and may contain information
> that is confidential or privileged and exempt from disclosure under
> applicable law. If the reader of this email is not the intended recipient,
> or the employee or agent responsible for delivering this message to the
> intended recipient, you are hereby notified that any dissemination,
> distribution or copying of this communication is strictly prohibited. If
> you have received this communication in error, please notify the sender
> immediately by return email and destroy all copies of the email (and
> attachments if any).

--
Geospatial professional services
http://even.rouault.free.fr/services.html

________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is confidential or privileged and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).

From even.rouault at mines-paris.org  Mon Feb 10 06:53:35 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 10 Feb 2014 15:53:35 +0100
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <2A18A4344312134B937DF938D992264A050D69BA@OKCEXHPRD122.chkenergy.net>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<201402010827.32484.even.rouault@mines-paris.org>
	<2A18A4344312134B937DF938D992264A05099522@OKCEXHPRD121.chkenergy.net>
	<201402091336.06332.even.rouault@mines-paris.org>
	<2A18A4344312134B937DF938D992264A050D69BA@OKCEXHPRD122.chkenergy.net>
Message-ID: <1392044015.52f8e7efe27a2@imp.free.fr>

Selon "David Baker (Geoscience)" <david.m.baker at chk.com>:

> Even,
>
> No not an i386...  A Dell Precision T3500 w/Intel W3680 @ 3.33GHhz 6x2 cores
> with 12.0GB.  Thought the data is on the network, not local, with 1Gbps
> access.  The GDAL_DISABLE_READDIR_ON_OPEN = TRUE did significantly increase
> the speed.  Does the BIL driver read the whole file into memory first?  Might
> a direct read be faster?

No the BIL driver will just read the line where the pixel is.

>
> And Even, please excuse my ignorance, but what is "gdb?"  I really would like
> to do the profiling.

gdb is the GNU debugger ( https://www.gnu.org/software/gdb/ ) . Assuming you use
Linux (likely available on MacOSX too). You should be able to install it with
the usual package management system of the distribution : apt-get install gdb,
yum install gdb, ... . Otherwise on Windows, I'm far less familiar with the
debugging tools.

gdb --args gdallocationinfo -valonly -geoloc intermap.vrt

Then type "run"
Type a coordinate "-96.0 36.0"
ctrl+c to suspend execution
"bt" to display the stack trace
"c" to resume execution

>
> David
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault at mines-paris.org]
> Sent: Sunday, February 09, 2014 6:36 AM
> To: David Baker (Geoscience)
> Cc: 'Brian Case'; 'gdal-dev at lists.osgeo.org'
> Subject: Re: [gdal-dev] Fast Pixel Access
>
> Le samedi 01 f?vrier 2014 15:04:46, David Baker (Geoscience) a ?crit :
> > Evan,
> >
> > I am not sure how to profile as I do not have access to the code to
> > profile.  I did do a timing test...
> >
> > vrt file = 22,970 KB
> > bil file = 35,180 KB * 55,501
> >
> > I piped five locations from the loc.txt file:
> > -96.0 36.0
> > -98.0 37.0
> > -100.0 38.0
> > -99.0 39.0
> > -101.0 35.0
> >
> > gdallocationinfo -valonly -geoloc intermap.vrt < loc.txt
> > 189.841857910156        25.5 sec
> > 384.857452392578        22.6 sec
> > 762.015930175781        22.9 sec
> > 550.719116210938        23.6 sec
> > 883.637023925781        22.9 sec
> >
> > Note: I used a lap timer on my iPhone to capture the split times as the
> > results appeared in the console window.  Does this give any insight?
>
> Woo I agree that's utterly slow ! When you mentionned slow I thought it was
> more in the order of 0.1 second ! We can already exclude the parsing time of
> the VRT since you do that in the same gdallocationinfo session and that there
> will be just one parsing.
> And I can't believe that the intersection test for 55 000 rectangles takes ~
> 20 seconds, unless you have an old i386 at 5 MHz ;-)
> My usual way of profiling stuff that is slow in the order of more than one
> second is to run under gdb, break with Ctrl+C, display the stack trace,
> continue the run, break again, display the stack trace, etc.. If you end up
> breaking in the same function, then you've found the bottleneck.
>
> I see now that in that thread GDAL_DISABLE_READDIR_ON_OPEN = TRUE was
> suggested and seems to improve things significantly. Perhaps we should try to
> cache the result of the initial readdir so it can benefits to later attempts,
> but I haven't checked how easily that could be miplemented. Or perhaps we
> should just change the default value of GDAL_DISABLE_READDIR_ON_OPEN since it
> causes problem from time to time.
> But generally filesystems don't behave very well when there are a lot of
> files
> in the same directory. You'd better organizing your tiles in subdirectories.
> But still 1 to 3 seconds sounds a bit slow to me. Would be cool if you could
> try the above suggestion to identify where the time is spent.
>
> Even
>
> >
> > David
> >
> > -----Original Message-----
> > From: gdal-dev-bounces at lists.osgeo.org
> > [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Even Rouault Sent:
> > Saturday, February 01, 2014 1:28 AM
> > To: Brian Case
> > Cc: gdal-dev at lists.osgeo.org
> > Subject: Re: [gdal-dev] Fast Pixel Access
> >
> > Le samedi 01 f?vrier 2014 00:23:13, Brian Case a ?crit :
> > > evenr
> > >
> > >
> > > what about the use of a tileindex?
> >
> > You really mean a tileindex as produced by gdaltindex ? Well, that's not
> > exactly the same beast as a VRT, but yes if it was recognized as a GDAL
> > dataset then you could potentially save the cost of XML parsing. One could
> > imagine that the VRT driver would accept a tileindex as an altenate
> > connection string.
> >
> > Anyway it would be interesting to first profile where the time is spent in
> > David use case. If it's in the XML parsing, then I can't see what could be
> > easily improved in that area. If it's the intersection, then there's
> > potential for improvement.
> >
> > > seems an intersection with a set of
> > > polys first would be quick
> > >
> > >
> > >
> > > brian
> > >
> > > On Fri, 2014-01-31 at 19:30 +0100, Even Rouault wrote:
> > > > Le vendredi 31 janvier 2014 17:15:53, David Baker (Geoscience) a ?crit
> :
> > > > > Dev's,
> > > > >
> > > > > I have a set of 55,501 bil files in a single directory.  They are
> > > > > DEMS data that cover the US in 7.5 minute tiles.  I would like to
> > > > > randomly access elevations at a given lat/lon's from the whole
> > > > > dataset.  I created a vrt file from the directory of bil files, and
> > > > > have been able to access the elevation at a given lat/lon using
> > > > > gdallocationinfo, but because of the size of the dataset, this
> > > > > operation is somewhat slow. Can the vrt be indexed?
> > > >
> > > > No, it isn't currently, although I think it could be improved to have a
> > > > in- memory index with moderate effort.
> > > >
> > > > But are you sure the slowness is due to the lack of index ? 55,000 is a
> > > > big number, but not that big. Maybe the slowness just comes from the
> > > > opening time (XML parsing) of such a big VRT. That would need to be
> > > > profiled to be sure where the bottleneck is.
> > > >
> > > > > Or, is there a faster, better way to access the pixels?  I would
> > > > > first like to do this with the utilities before diving into code
> > > > > (C#). The files are regularly named base on their location within a
> > > > > 1 arc-second grid.
> > > > >
> > > > > Thanks,
> > > > > David
> > > > >
> > > > > David M. Baker
> > > > > Senior Advisor - Geoscience Technology
> > > > > Chesapeake Energy Corporation
> > > > > david.m.baker at chk.com<mailto:david.m.baker at chk.com>
> > > > >
> > > > >
> > > > > ________________________________
> > > > >
> > > > > This email (and attachments if any) is intended only for the use of
> > > > > the individual or entity to which it is addressed, and may contain
> > > > > information that is confidential or privileged and exempt from
> > > > > disclosure under applicable law. If the reader of this email is not
> > > > > the intended recipient, or the employee or agent responsible for
> > > > > delivering this message to the intended recipient, you are hereby
> > > > > notified that any dissemination, distribution or copying of this
> > > > > communication is strictly prohibited. If you have received this
> > > > > communication in error, please notify the sender immediately by
> > > > > return email and destroy all copies of the email (and attachments if
> > > > > any).
> >
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > ________________________________
> >
> > This email (and attachments if any) is intended only for the use of the
> > individual or entity to which it is addressed, and may contain information
> > that is confidential or privileged and exempt from disclosure under
> > applicable law. If the reader of this email is not the intended recipient,
> > or the employee or agent responsible for delivering this message to the
> > intended recipient, you are hereby notified that any dissemination,
> > distribution or copying of this communication is strictly prohibited. If
> > you have received this communication in error, please notify the sender
> > immediately by return email and destroy all copies of the email (and
> > attachments if any).
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
> ________________________________
>
> This email (and attachments if any) is intended only for the use of the
> individual or entity to which it is addressed, and may contain information
> that is confidential or privileged and exempt from disclosure under
> applicable law. If the reader of this email is not the intended recipient, or
> the employee or agent responsible for delivering this message to the intended
> recipient, you are hereby notified that any dissemination, distribution or
> copying of this communication is strictly prohibited. If you have received
> this communication in error, please notify the sender immediately by return
> email and destroy all copies of the email (and attachments if any).
>



From rkrucker at hsr.ch  Mon Feb 10 07:41:11 2014
From: rkrucker at hsr.ch (Rafael Krucker)
Date: Mon, 10 Feb 2014 16:41:11 +0100
Subject: [gdal-dev] Problems compressing tiff files
Message-ID: <52F8F317.2070002@hsr.ch>

Hello all

I'm currently trying to do the following, using gdal:

1) Combining some tifs into one using gdal_merge, COMPRESS=LZW
2) Using gdalwarp with cutline to cut out a certain piece of the result
3) Compressing again using gdalwarp, COMPRESS=LZW
4) Generating pyramids with gdaladdo

However, my resulting Tiff is still very big, which hinders performance 
greatly in later steps of my workflow. I suspect that some compressions 
don't function properly, but I'm not being notified of such happenings 
if occuring.

For instance, applying these steps on five tiffs each no bigger than 1.5 
MB results in a tiff of 12 GB size.

Any help or suggestions would be greatly appreciated.

Kind regards
Rafael Krucker

From nicolas.g-dev at outlook.fr  Mon Feb 10 08:35:56 2014
From: nicolas.g-dev at outlook.fr (Nicolas G)
Date: Mon, 10 Feb 2014 17:35:56 +0100
Subject: [gdal-dev] TOC sub-dataset retrieving when frame with same
 coverage share the same boundary rectangle.
In-Reply-To: <1392034524.52f8c2dc26be9@imp.free.fr>
References: <SNT151-W560ADB47F666CDFC3E6A4ACF970@phx.gbl>,
	<1391786061.52f4f84ddf19c@imp.free.fr>,
	<52F88D57.3090107@t-kartor.se>,
	<SNT151-W225DE7EDFFF9E4933AFE7FCF900@phx.gbl>,
	<1392034524.52f8c2dc26be9@imp.free.fr>
Message-ID: <SNT151-W14AFBD2BBEE0D37D5513AACF900@phx.gbl>




Hi Even,

Thank you, in fact it seems clear according to your RPF Spec analysis that the A.TOC file is not corrcetly formatted.
The TOC file has been provided by Data producer...
As you say the solution is to define another boundary rectangle with the same coordinate, and it will be ok.

Thanks,

Nico


> Date: Mon, 10 Feb 2014 13:15:24 +0100
> From: even.rouault at mines-paris.org
> To: nicolas.g-dev at outlook.fr
> CC: ao at t-kartor.se; even.rouault at mines-paris.org; gdal-dev at lists.osgeo.org
> Subject: RE: [gdal-dev] TOC sub-dataset retrieving when frame with same coverage share the same boundary rectangle.
> 
> Selon Nicolas G <nicolas.g-dev at outlook.fr>:
> 
> > Hi Andreas,
> >
> > The fact is that I can't use the GDAL API to get the different sub-datasets
> > in this particular case, so can't make any combination of frames without
> > going directly to all NITF frames as suggested by Even.
> >
> > Regarding your answer, maybe the meaning of Zone and Scale is not clear for
> > me:
> > Zone = Arc Zone?Scale = Logical name (as in your example LFC, TFC...)? but
> > not really the resolution.
> >
> > For me, the subdataset could be a directory in RPF directory tree, as each
> > directory is generated according to different parameters.
> >
> >
> > You normally have one directory (path) by [Arc Zone/Scale Logical Name (LFC,
> > TFC...)] couple (I don't take into account the fact that a directory can be
> > splitted if frames files are not contiguous).
> >
> > The problem appears when two [Arc Zone/Scale Logical Name (LFC, TFC...)]
> > contain data at the same resolution, so with the same tiling, so potentially
> > with frames at the same col/row.
> 
> I suspect your A.TOC is not correctly formatted, or in a uncommon way. For
> frames attached to one given (Arc Zone, Scale Logical Name), called a "rectangle
> boundary" in RPF spec, you
> should not have 2 frames with same col/row.
> 
> According to
> http://earth-info.nga.mil/publications/specs/printed/2411/2411_RPF.pdf page 20 :
> 
> """b. Each boundary rectangle defined in the [boundary
> rectangle section] of a [table of contents file] will act as a
> logical container for a rectangular &#8220;virtualmatrix&#8221; of frames
> (see 5.2.1 below). Individual frames may be referenced by their
> (row, column) position within such a matrix."""
> 
> And then page 30 :
> "(3) The [boundary rectangle section) will contain the
> boundaries of one or more boundary rectangles, each defining the
> periphery of a geographic area containing all of the [frame file]s
> in the given data interchange volume that have a given data typet
> compression ratio, producer, latitudinal zone, and scale (or
> resolution). A given record will also specify the dimensions of a
> rectangular &#8220;virtual matrix&#8221; of fixed-size frames of the given scale
> or resolution that fills the given boundary rectangle"
> 
> Page 31:
> "(4) The [frame file index section] will contain scales
> and data types for all [frame file]s in the given volume. Each
> entry will identify the boundary rectangle (named in the [boundary
> rectangle section]) where the frame is located, and it will
> specify the row and column in a &#8220;virtual matrix&#8221; of frames within
> the boundary rectangle where the specific frame is located"
> 
> ==> So this sounds pretty clear to me that you shouldn't have 2 frames within
> the same boundary rectangle that have identical row,col
> The solution would be to have 2 boundary rectangles (with same extent) and
> attach one single frame to one of those boundary rectangles
> 
> Where does your A.TOC comes from : is it provided by a data producer, or your
> own creation ?
> 
> 
> >
> >
> > As you have written "There should be overlaps between the zones but this data
> > content
> >       "shall be identical". "
> > So the following example is not really possible?
> >
> > Example:
> > I have one boundary rectangle which belongs to two differents paths (but for
> > the same coverage (same Arc zone)) by example a path with LFC-FR_(Night)
> > content and a path with LFC-FR_(Day) content (all at the same resolution).
> > For each frame coverage I have one frame in LFC-FR_(Night) path and one frame
> > in LFC-FR_(Day) path (so different paths and frame names and extensions),
> > then GDAL reports to me only one Sub-dataset, and then I can't access through
> > GDAL Subdataset API the data in the two paths. I need to analyse the TOC file
> > in my App to get the paths, boundaries... and then access the frame files.
> >
> > Nico
> >
> > Date: Mon, 10 Feb 2014 09:27:03 +0100
> > From: ao at t-kartor.se
> > To: even.rouault at mines-paris.org; nicolas.g-dev at outlook.fr
> > CC: gdal-dev at lists.osgeo.org
> > Subject: Re: [gdal-dev] TOC sub-dataset retrieving when frame with same
> > coverage share the same boundary rectangle.
> >
> >
> >
> >
> >
> >
> >     Hi
> >
> >
> >
> >       A RPF structure (CADRG, CIB, ECRG etc) may include any combination
> >       of scalelevels and/or geographic zones as referenced in the A.TOC
> >       file. So there may be both scale-overlaps and zone-overlaps.
> >
> >       There is also a frame-based update concept but this is seldom
> >       used.
> >
> >       An example from a CADRG dataset containing 14 subdatasets:
> >
> >
> >       Corps du message
> >
> >       SUBDATASET_6_NAME=NITF_TOC_ENTRY:CADRG_TFC_250K_6_5:A.TOC
> >
> >       SUBDATASET_6_DESC=CADRG:TFC:Transit Flying Chart (UK):250K:6:5
> >
> >       SUBDATASET_7_NAME=NITF_TOC_ENTRY:CADRG_LFC-FR_(Day)_500K_1_6:A.TOC
> >
> >
> >       SUBDATASET_7_DESC=CADRG:LFC-FR (Day):Low Flying Chart (Day) - Host
> >       Nation:500K:1:6
> >
> >
> >
> >       This means that you must analyze the individual subdatasets to
> >       extract/combine info for each scalelevel individually. To my
> >       knowledge, there is no consistent naming principle in the standard
> >       - so the scalelevels are just logical names in the A.TOC file.
> >
> >       There should be overlaps between the zones but this data content
> >       "shall be identical".
> >
> >
> >
> >       Best Regards
> >
> >
> >
> >       Andreas Oxenstierna
> >
> >
> >
> >
> >
> >       Selon Nicolas G <nicolas.g-dev at outlook.fr>:
> >
> > hi
> >
> > yes you have well described the behaviour of the driver. The
> > subdatasets match the boundary rectangles
> > And it is very odd to have two frames with same col row
> > coordinates for the same boundary rectangle.
> > in your case you have to directly open the nitf tile instead
> > of the a.toc
> >
> >
> >
> >         Hi,
> >
> >
> >
> > I???m using GDAL to get the CADRG database sub-dataset list.
> >
> >
> > As an example (TOC file content):
> >
> > - Only one boundary rectangle defined in ???boundary rectangle section???,
> >
> > - In ???frame file index section???, I have two frames covering the same
> > area (same resolution, ???, but different functional content),
> >
> > - These two frames are stored in different path but all referring to the
> > same boundary rectangle.
> >
> >
> > Then in that case, the message "Frame entry(%d,%d) for frame file index
> > %d was already found." is raised by GDAL when loading the TOC file, and
> > finally
> > only one sub-dataset is given back to me(the first one of the TOC file) ->
> > method ???RPFTOCReadFromBuffer()??? of Rpftocfile.cpp.
> >
> >
> > It seems that GDAL uses boundary rectangles and frame files to build the
> > sub-dataset list and if, for a same boundary rectangle, two or more frames
> > with
> > the same coverage belong to different path
> > then only one GDAL sub-dataset is created.
> >
> >
> > Does someone can help me and explain me how to access the data of these
> > two frames files (same coverage, same boundary rectangle but different path)
> > through GDAL API?
> >
> >
> > Or is there any development on this subject?
> >
> >
> >
> > Thanks,
> >
> >
> >
> > Nicolas
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >
> >       _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> >
> >
> 
> 

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140210/968a7d37/attachment.html>

From even.rouault at mines-paris.org  Mon Feb 10 08:48:52 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 10 Feb 2014 17:48:52 +0100
Subject: [gdal-dev] Problems compressing tiff files
In-Reply-To: <52F8F317.2070002@hsr.ch>
References: <52F8F317.2070002@hsr.ch>
Message-ID: <1392050932.52f902f4f38ad@imp.free.fr>

Selon Rafael Krucker <rkrucker at hsr.ch>:

> Hello all
>
> I'm currently trying to do the following, using gdal:
>
> 1) Combining some tifs into one using gdal_merge, COMPRESS=LZW
> 2) Using gdalwarp with cutline to cut out a certain piece of the result
> 3) Compressing again using gdalwarp, COMPRESS=LZW

The way gdalwarp works by default will not produce optimal compressed sizes. See
https://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#GeoTIFFoutput-coCOMPRESSisbroken
for explanations and solutions

But if you just need to compress as it seems in your step 3, you should rather
use gdal_translate than gdalwarp. Will be faster and give optimally compressed
files out of the box.

> 4) Generating pyramids with gdaladdo
>
> However, my resulting Tiff is still very big, which hinders performance
> greatly in later steps of my workflow. I suspect that some compressions
> don't function properly, but I'm not being notified of such happenings
> if occuring.
>
> For instance, applying these steps on five tiffs each no bigger than 1.5
> MB results in a tiff of 12 GB size.
>
> Any help or suggestions would be greatly appreciated.
>
> Kind regards
> Rafael Krucker
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From DCarreira at edia.pt  Mon Feb 10 10:09:19 2014
From: DCarreira at edia.pt (Duarte Carreira)
Date: Mon, 10 Feb 2014 18:09:19 +0000
Subject: [gdal-dev] how to create just the msk file from a rgba vrt file
In-Reply-To: <201402091055.49824.even.rouault@mines-paris.org>
References: <b22326d6b4a94d16b6517b1372130273@AMSPR07MB230.eurprd07.prod.outlook.com>
	<1391723466.14221.193.camel@octopi>
	<ad11349af9204b3185cdc7795731c96e@AMSPR07MB230.eurprd07.prod.outlook.com>
	<201402091055.49824.even.rouault@mines-paris.org>
Message-ID: <8a8d380487f84bd799f4e7f78ad821d3@AMSPR07MB230.eurprd07.prod.outlook.com>

Hi Even, and many thanks! Your pointers have solved my question.

As for the problem building overviews it seems that it occurs when you enter a <OVERVIEW> tag pointing to a "regular" image, that doesn't have the INTERNAL_MASK_FLAGS_# set.

On the other hand these flags allowed me to create a mask file even faster than using gdal_translate.

The process is:
1) get a shapefile that represents your mask (maybe use gdaltindex and dissolve the result)
2) use gdalinfo to get extent and cell size of your vrt mosaic 
3) use gdal_rasterize to get your mask raster, burning the shapefile to a new image initiated with 0 and burnt with 255
4) set the metadata tags to make this raster a mask (I used a small python script for this)
5) rename your raster mask to match your vrt mosaic (eg mosaic.vrt.msk)

That's it. Instant (almost) mask file: instead of 4h41min it took 10min to create my mask. (The vrt mosaic references 487 rgb tiff files, totaling 240001x250000 pixels in size.)

The command to build the mask was the following:

gdal_rasterize --config GDAL_CACHEMAX 512 -of GTiff -co compress=deflate -co tiled=yes -l quads_diss_etrs -te -79997.180 -229999.390 40002.909 -104999.818 -tr 0.499994258518990 0.499994258518990 -ot Byte -burn 255 -init 0 -co INTERLEAVE=BAND -co NBITS=1 quads_diss_etrs.shp maskfile.tif

I'm not sure about the NBITS command effect though...

Then to insert the mask flags I used this python script:

#################################################
import gdal
from gdalconst import *
import sys

gdal.UseExceptions()
try:
  filename = sys.argv[1]

  dataset = gdal.Open(filename, GA_Update)
  dataset.SetMetadataItem( "INTERNAL_MASK_FLAGS_1", "2", None )
  dataset.SetMetadataItem( "INTERNAL_MASK_FLAGS_2", "2", None )
  dataset.SetMetadataItem( "INTERNAL_MASK_FLAGS_3", "2", None )

except Exception, e:
  print "Error: " + str(e)
  
  
dataset = None
##################################################

Thanks again.
Duarte



-----Mensagem original-----
De: Even Rouault [mailto:even.rouault at mines-paris.org] 
Enviada: domingo, 9 de Fevereiro de 2014 09:56
Para: gdal-dev at lists.osgeo.org
Cc: Duarte Carreira; Brian Case
Assunto: Re: [gdal-dev] how to create just the msk file from a rgba vrt file

Le vendredi 07 f?vrier 2014 10:55:06, Duarte Carreira a ?crit :
> Thanks Brian.
> 
> But this way you rewrite the whole image to disk. It uses lots of disk 
> space and takes forever.
> 
> I want to avoid that and just get the mask out to a msk file as fast 
> as possible.
> 
> I don't want to convert my rgba vrt mosaic.
> 
> The final objective is to get a msk file I can use with the simple rgb 
> vrt mosaic. Then I'll be able to build overviews with jpeg/ycbcr 
> compression which I can't do with rgba vrt because of the 4 bands.
> 
> For now I have tried 3 ways:
> 
> 1) use gdal_rasterize to create a mask directly from the mask polygon 
> shapefile. Then just edit the rgb vrt mosaic and add a  maskband to it.
> The problem here is gdaladdo does not honor the maskband. This is the 
> fastest way I know, pitty it doesn't work in the end.

I'd be curious that you provide ways of reproducing this. The overview computation code has explicit code to deal with mask bands.

> 
> 2) use gdal_translate like you suggested but use -scale to write all 
> 0s in all 3 bands, and compress with deflate. You get a valid mask and 
> a very, very small useless mosaic. This works but takes a while still.
> 
> 3) use gdal_translate like you suggested but exaggerate the jpeg 
> compression so it errors out (jpeg_quality=15). You get an invalid 1kb 
> mosaic and an apparently good msk. But it's corrupted in some way. So 
> doesn't work.
> 
> I think #1 has potential. If there was a way to somehow turn the tif 
> created by gdal_rasterize into a "true" mask file and have it honored 
> by gdaladdo we would have a winner.
> 
> Maybe there's a way to directly export the alpha band from the rgba 
> vrt mosaic to a mks file without writing anything else? That I guess 
> would be the fastest way of all.

You can generate a valid .msk file with the following gdal_translate command :

gdal_translate -b 4 rgba.tif out.tif.msk \ -mo "INTERNAL_MASK_FLAGS_1=2" -mo "INTERNAL_MASK_FLAGS_2=2" \ -mo "INTERNAL_MASK_FLAGS_3=2" -co COMPRESS=DEFLATE -co INTERLEAVE=BAND \ -co NBITS=1

You need to provide as many -mo "INTERNAL_MASK_FLAGS_X=2" option as there are bands (so 3 for a RGB dataset as in the above example). This is the important option that will make a .msk file being recognized as a mask band.

Even

--
Geospatial professional services
http://even.rouault.free.fr/services.html

From david.m.baker at chk.com  Mon Feb 10 15:10:20 2014
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Mon, 10 Feb 2014 23:10:20 +0000
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <1392044015.52f8e7efe27a2@imp.free.fr>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<201402010827.32484.even.rouault@mines-paris.org>
	<2A18A4344312134B937DF938D992264A05099522@OKCEXHPRD121.chkenergy.net>
	<201402091336.06332.even.rouault@mines-paris.org>
	<2A18A4344312134B937DF938D992264A050D69BA@OKCEXHPRD122.chkenergy.net>
	<1392044015.52f8e7efe27a2@imp.free.fr>
Message-ID: <2A18A4344312134B937DF938D992264A050D8232@OKCEXHPRD122.chkenergy.net>

Evan.  I am on Windows and only have the binaries installed.

David

-----Original Message-----
From: Even Rouault [mailto:even.rouault at mines-paris.org]
Sent: Monday, February 10, 2014 8:54 AM
To: David Baker (Geoscience)
Cc: 'Even Rouault'; 'Brian Case'; 'gdal-dev at lists.osgeo.org'
Subject: RE: [gdal-dev] Fast Pixel Access

Selon "David Baker (Geoscience)" <david.m.baker at chk.com>:

> Even,
>
> No not an i386...  A Dell Precision T3500 w/Intel W3680 @ 3.33GHhz 6x2 cores
> with 12.0GB.  Thought the data is on the network, not local, with 1Gbps
> access.  The GDAL_DISABLE_READDIR_ON_OPEN = TRUE did significantly increase
> the speed.  Does the BIL driver read the whole file into memory first?  Might
> a direct read be faster?

No the BIL driver will just read the line where the pixel is.

>
> And Even, please excuse my ignorance, but what is "gdb?"  I really would like
> to do the profiling.

gdb is the GNU debugger ( https://www.gnu.org/software/gdb/ ) . Assuming you use
Linux (likely available on MacOSX too). You should be able to install it with
the usual package management system of the distribution : apt-get install gdb,
yum install gdb, ... . Otherwise on Windows, I'm far less familiar with the
debugging tools.

gdb --args gdallocationinfo -valonly -geoloc intermap.vrt

Then type "run"
Type a coordinate "-96.0 36.0"
ctrl+c to suspend execution
"bt" to display the stack trace
"c" to resume execution

>
> David
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault at mines-paris.org]
> Sent: Sunday, February 09, 2014 6:36 AM
> To: David Baker (Geoscience)
> Cc: 'Brian Case'; 'gdal-dev at lists.osgeo.org'
> Subject: Re: [gdal-dev] Fast Pixel Access
>
> Le samedi 01 f?vrier 2014 15:04:46, David Baker (Geoscience) a ?crit :
> > Evan,
> >
> > I am not sure how to profile as I do not have access to the code to
> > profile.  I did do a timing test...
> >
> > vrt file = 22,970 KB
> > bil file = 35,180 KB * 55,501
> >
> > I piped five locations from the loc.txt file:
> > -96.0 36.0
> > -98.0 37.0
> > -100.0 38.0
> > -99.0 39.0
> > -101.0 35.0
> >
> > gdallocationinfo -valonly -geoloc intermap.vrt < loc.txt
> > 189.841857910156        25.5 sec
> > 384.857452392578        22.6 sec
> > 762.015930175781        22.9 sec
> > 550.719116210938        23.6 sec
> > 883.637023925781        22.9 sec
> >
> > Note: I used a lap timer on my iPhone to capture the split times as the
> > results appeared in the console window.  Does this give any insight?
>
> Woo I agree that's utterly slow ! When you mentionned slow I thought it was
> more in the order of 0.1 second ! We can already exclude the parsing time of
> the VRT since you do that in the same gdallocationinfo session and that there
> will be just one parsing.
> And I can't believe that the intersection test for 55 000 rectangles takes ~
> 20 seconds, unless you have an old i386 at 5 MHz ;-)
> My usual way of profiling stuff that is slow in the order of more than one
> second is to run under gdb, break with Ctrl+C, display the stack trace,
> continue the run, break again, display the stack trace, etc.. If you end up
> breaking in the same function, then you've found the bottleneck.
>
> I see now that in that thread GDAL_DISABLE_READDIR_ON_OPEN = TRUE was
> suggested and seems to improve things significantly. Perhaps we should try to
> cache the result of the initial readdir so it can benefits to later attempts,
> but I haven't checked how easily that could be miplemented. Or perhaps we
> should just change the default value of GDAL_DISABLE_READDIR_ON_OPEN since it
> causes problem from time to time.
> But generally filesystems don't behave very well when there are a lot of
> files
> in the same directory. You'd better organizing your tiles in subdirectories.
> But still 1 to 3 seconds sounds a bit slow to me. Would be cool if you could
> try the above suggestion to identify where the time is spent.
>
> Even
>
> >
> > David
> >
> > -----Original Message-----
> > From: gdal-dev-bounces at lists.osgeo.org
> > [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Even Rouault Sent:
> > Saturday, February 01, 2014 1:28 AM
> > To: Brian Case
> > Cc: gdal-dev at lists.osgeo.org
> > Subject: Re: [gdal-dev] Fast Pixel Access
> >
> > Le samedi 01 f?vrier 2014 00:23:13, Brian Case a ?crit :
> > > evenr
> > >
> > >
> > > what about the use of a tileindex?
> >
> > You really mean a tileindex as produced by gdaltindex ? Well, that's not
> > exactly the same beast as a VRT, but yes if it was recognized as a GDAL
> > dataset then you could potentially save the cost of XML parsing. One could
> > imagine that the VRT driver would accept a tileindex as an altenate
> > connection string.
> >
> > Anyway it would be interesting to first profile where the time is spent in
> > David use case. If it's in the XML parsing, then I can't see what could be
> > easily improved in that area. If it's the intersection, then there's
> > potential for improvement.
> >
> > > seems an intersection with a set of
> > > polys first would be quick
> > >
> > >
> > >
> > > brian
> > >
> > > On Fri, 2014-01-31 at 19:30 +0100, Even Rouault wrote:
> > > > Le vendredi 31 janvier 2014 17:15:53, David Baker (Geoscience) a ?crit
> :
> > > > > Dev's,
> > > > >
> > > > > I have a set of 55,501 bil files in a single directory.  They are
> > > > > DEMS data that cover the US in 7.5 minute tiles.  I would like to
> > > > > randomly access elevations at a given lat/lon's from the whole
> > > > > dataset.  I created a vrt file from the directory of bil files, and
> > > > > have been able to access the elevation at a given lat/lon using
> > > > > gdallocationinfo, but because of the size of the dataset, this
> > > > > operation is somewhat slow. Can the vrt be indexed?
> > > >
> > > > No, it isn't currently, although I think it could be improved to have a
> > > > in- memory index with moderate effort.
> > > >
> > > > But are you sure the slowness is due to the lack of index ? 55,000 is a
> > > > big number, but not that big. Maybe the slowness just comes from the
> > > > opening time (XML parsing) of such a big VRT. That would need to be
> > > > profiled to be sure where the bottleneck is.
> > > >
> > > > > Or, is there a faster, better way to access the pixels?  I would
> > > > > first like to do this with the utilities before diving into code
> > > > > (C#). The files are regularly named base on their location within a
> > > > > 1 arc-second grid.
> > > > >
> > > > > Thanks,
> > > > > David
> > > > >
> > > > > David M. Baker
> > > > > Senior Advisor - Geoscience Technology
> > > > > Chesapeake Energy Corporation
> > > > > david.m.baker at chk.com<mailto:david.m.baker at chk.com>
> > > > >
> > > > >
> > > > > ________________________________
> > > > >
> > > > > This email (and attachments if any) is intended only for the use of
> > > > > the individual or entity to which it is addressed, and may contain
> > > > > information that is confidential or privileged and exempt from
> > > > > disclosure under applicable law. If the reader of this email is not
> > > > > the intended recipient, or the employee or agent responsible for
> > > > > delivering this message to the intended recipient, you are hereby
> > > > > notified that any dissemination, distribution or copying of this
> > > > > communication is strictly prohibited. If you have received this
> > > > > communication in error, please notify the sender immediately by
> > > > > return email and destroy all copies of the email (and attachments if
> > > > > any).
> >
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > ________________________________
> >
> > This email (and attachments if any) is intended only for the use of the
> > individual or entity to which it is addressed, and may contain information
> > that is confidential or privileged and exempt from disclosure under
> > applicable law. If the reader of this email is not the intended recipient,
> > or the employee or agent responsible for delivering this message to the
> > intended recipient, you are hereby notified that any dissemination,
> > distribution or copying of this communication is strictly prohibited. If
> > you have received this communication in error, please notify the sender
> > immediately by return email and destroy all copies of the email (and
> > attachments if any).
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
> ________________________________
>
> This email (and attachments if any) is intended only for the use of the
> individual or entity to which it is addressed, and may contain information
> that is confidential or privileged and exempt from disclosure under
> applicable law. If the reader of this email is not the intended recipient, or
> the employee or agent responsible for delivering this message to the intended
> recipient, you are hereby notified that any dissemination, distribution or
> copying of this communication is strictly prohibited. If you have received
> this communication in error, please notify the sender immediately by return
> email and destroy all copies of the email (and attachments if any).
>



________________________________

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is confidential or privileged and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).

From even.rouault at mines-paris.org  Mon Feb 10 15:16:33 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 11 Feb 2014 00:16:33 +0100
Subject: [gdal-dev] Fast Pixel Access
In-Reply-To: <2A18A4344312134B937DF938D992264A050D8232@OKCEXHPRD122.chkenergy.net>
References: <2A18A4344312134B937DF938D992264A0508F250@OKCEXHPRD122.chkenergy.net>
	<1392044015.52f8e7efe27a2@imp.free.fr>
	<2A18A4344312134B937DF938D992264A050D8232@OKCEXHPRD122.chkenergy.net>
Message-ID: <201402110016.33890.even.rouault@mines-paris.org>

Le mardi 11 f?vrier 2014 00:10:20, David Baker (Geoscience) a ?crit :
> Evan.  I am on Windows and only have the binaries installed.

Well, I let Windows developers lurking here answer if they have some good 
advice. I imagine you would need binaries with debugging symbols to be able to 
get a usefull stack trace.

> 
> David
> 
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault at mines-paris.org]
> Sent: Monday, February 10, 2014 8:54 AM
> To: David Baker (Geoscience)
> Cc: 'Even Rouault'; 'Brian Case'; 'gdal-dev at lists.osgeo.org'
> Subject: RE: [gdal-dev] Fast Pixel Access
> 
> Selon "David Baker (Geoscience)" <david.m.baker at chk.com>:
> > Even,
> > 
> > No not an i386...  A Dell Precision T3500 w/Intel W3680 @ 3.33GHhz 6x2
> > cores with 12.0GB.  Thought the data is on the network, not local, with
> > 1Gbps access.  The GDAL_DISABLE_READDIR_ON_OPEN = TRUE did significantly
> > increase the speed.  Does the BIL driver read the whole file into memory
> > first?  Might a direct read be faster?
> 
> No the BIL driver will just read the line where the pixel is.
> 
> > And Even, please excuse my ignorance, but what is "gdb?"  I really would
> > like to do the profiling.
> 
> gdb is the GNU debugger ( https://www.gnu.org/software/gdb/ ) . Assuming
> you use Linux (likely available on MacOSX too). You should be able to
> install it with the usual package management system of the distribution :
> apt-get install gdb, yum install gdb, ... . Otherwise on Windows, I'm far
> less familiar with the debugging tools.
> 
> gdb --args gdallocationinfo -valonly -geoloc intermap.vrt
> 
> Then type "run"
> Type a coordinate "-96.0 36.0"
> ctrl+c to suspend execution
> "bt" to display the stack trace
> "c" to resume execution
> 
> > David
> > 
> > -----Original Message-----
> > From: Even Rouault [mailto:even.rouault at mines-paris.org]
> > Sent: Sunday, February 09, 2014 6:36 AM
> > To: David Baker (Geoscience)
> > Cc: 'Brian Case'; 'gdal-dev at lists.osgeo.org'
> > Subject: Re: [gdal-dev] Fast Pixel Access
> > 
> > Le samedi 01 f?vrier 2014 15:04:46, David Baker (Geoscience) a ?crit :
> > > Evan,
> > > 
> > > I am not sure how to profile as I do not have access to the code to
> > > profile.  I did do a timing test...
> > > 
> > > vrt file = 22,970 KB
> > > bil file = 35,180 KB * 55,501
> > > 
> > > I piped five locations from the loc.txt file:
> > > -96.0 36.0
> > > -98.0 37.0
> > > -100.0 38.0
> > > -99.0 39.0
> > > -101.0 35.0
> > > 
> > > gdallocationinfo -valonly -geoloc intermap.vrt < loc.txt
> > > 189.841857910156        25.5 sec
> > > 384.857452392578        22.6 sec
> > > 762.015930175781        22.9 sec
> > > 550.719116210938        23.6 sec
> > > 883.637023925781        22.9 sec
> > > 
> > > Note: I used a lap timer on my iPhone to capture the split times as the
> > > results appeared in the console window.  Does this give any insight?
> > 
> > Woo I agree that's utterly slow ! When you mentionned slow I thought it
> > was more in the order of 0.1 second ! We can already exclude the parsing
> > time of the VRT since you do that in the same gdallocationinfo session
> > and that there will be just one parsing.
> > And I can't believe that the intersection test for 55 000 rectangles
> > takes ~ 20 seconds, unless you have an old i386 at 5 MHz ;-)
> > My usual way of profiling stuff that is slow in the order of more than
> > one second is to run under gdb, break with Ctrl+C, display the stack
> > trace, continue the run, break again, display the stack trace, etc.. If
> > you end up breaking in the same function, then you've found the
> > bottleneck.
> > 
> > I see now that in that thread GDAL_DISABLE_READDIR_ON_OPEN = TRUE was
> > suggested and seems to improve things significantly. Perhaps we should
> > try to cache the result of the initial readdir so it can benefits to
> > later attempts, but I haven't checked how easily that could be
> > miplemented. Or perhaps we should just change the default value of
> > GDAL_DISABLE_READDIR_ON_OPEN since it causes problem from time to time.
> > But generally filesystems don't behave very well when there are a lot of
> > files
> > in the same directory. You'd better organizing your tiles in
> > subdirectories. But still 1 to 3 seconds sounds a bit slow to me. Would
> > be cool if you could try the above suggestion to identify where the time
> > is spent.
> > 
> > Even
> > 
> > > David
> > > 
> > > -----Original Message-----
> > > From: gdal-dev-bounces at lists.osgeo.org
> > > [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Even Rouault
> > > Sent: Saturday, February 01, 2014 1:28 AM
> > > To: Brian Case
> > > Cc: gdal-dev at lists.osgeo.org
> > > Subject: Re: [gdal-dev] Fast Pixel Access
> > > 
> > > Le samedi 01 f?vrier 2014 00:23:13, Brian Case a ?crit :
> > > > evenr
> > > > 
> > > > 
> > > > what about the use of a tileindex?
> > > 
> > > You really mean a tileindex as produced by gdaltindex ? Well, that's
> > > not exactly the same beast as a VRT, but yes if it was recognized as a
> > > GDAL dataset then you could potentially save the cost of XML parsing.
> > > One could imagine that the VRT driver would accept a tileindex as an
> > > altenate connection string.
> > > 
> > > Anyway it would be interesting to first profile where the time is spent
> > > in David use case. If it's in the XML parsing, then I can't see what
> > > could be easily improved in that area. If it's the intersection, then
> > > there's potential for improvement.
> > > 
> > > > seems an intersection with a set of
> > > > polys first would be quick
> > > > 
> > > > 
> > > > 
> > > > brian
> > > > 
> > > > On Fri, 2014-01-31 at 19:30 +0100, Even Rouault wrote:
> > > > > Le vendredi 31 janvier 2014 17:15:53, David Baker (Geoscience) a
> > > > > ?crit
> > > > > 
> > > > > > Dev's,
> > > > > > 
> > > > > > I have a set of 55,501 bil files in a single directory.  They are
> > > > > > DEMS data that cover the US in 7.5 minute tiles.  I would like to
> > > > > > randomly access elevations at a given lat/lon's from the whole
> > > > > > dataset.  I created a vrt file from the directory of bil files,
> > > > > > and have been able to access the elevation at a given lat/lon
> > > > > > using gdallocationinfo, but because of the size of the dataset,
> > > > > > this operation is somewhat slow. Can the vrt be indexed?
> > > > > 
> > > > > No, it isn't currently, although I think it could be improved to
> > > > > have a in- memory index with moderate effort.
> > > > > 
> > > > > But are you sure the slowness is due to the lack of index ? 55,000
> > > > > is a big number, but not that big. Maybe the slowness just comes
> > > > > from the opening time (XML parsing) of such a big VRT. That would
> > > > > need to be profiled to be sure where the bottleneck is.
> > > > > 
> > > > > > Or, is there a faster, better way to access the pixels?  I would
> > > > > > first like to do this with the utilities before diving into code
> > > > > > (C#). The files are regularly named base on their location within
> > > > > > a 1 arc-second grid.
> > > > > > 
> > > > > > Thanks,
> > > > > > David
> > > > > > 
> > > > > > David M. Baker
> > > > > > Senior Advisor - Geoscience Technology
> > > > > > Chesapeake Energy Corporation
> > > > > > david.m.baker at chk.com<mailto:david.m.baker at chk.com>
> > > > > > 
> > > > > > 
> > > > > > ________________________________
> > > > > > 
> > > > > > This email (and attachments if any) is intended only for the use
> > > > > > of the individual or entity to which it is addressed, and may
> > > > > > contain information that is confidential or privileged and
> > > > > > exempt from disclosure under applicable law. If the reader of
> > > > > > this email is not the intended recipient, or the employee or
> > > > > > agent responsible for delivering this message to the intended
> > > > > > recipient, you are hereby notified that any dissemination,
> > > > > > distribution or copying of this communication is strictly
> > > > > > prohibited. If you have received this communication in error,
> > > > > > please notify the sender immediately by return email and destroy
> > > > > > all copies of the email (and attachments if any).
> > > 
> > > --
> > > Geospatial professional services
> > > http://even.rouault.free.fr/services.html
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > 
> > > ________________________________
> > > 
> > > This email (and attachments if any) is intended only for the use of the
> > > individual or entity to which it is addressed, and may contain
> > > information that is confidential or privileged and exempt from
> > > disclosure under applicable law. If the reader of this email is not
> > > the intended recipient, or the employee or agent responsible for
> > > delivering this message to the intended recipient, you are hereby
> > > notified that any dissemination, distribution or copying of this
> > > communication is strictly prohibited. If you have received this
> > > communication in error, please notify the sender immediately by return
> > > email and destroy all copies of the email (and attachments if any).
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html
> > 
> > ________________________________
> > 
> > This email (and attachments if any) is intended only for the use of the
> > individual or entity to which it is addressed, and may contain
> > information that is confidential or privileged and exempt from
> > disclosure under applicable law. If the reader of this email is not the
> > intended recipient, or the employee or agent responsible for delivering
> > this message to the intended recipient, you are hereby notified that any
> > dissemination, distribution or copying of this communication is strictly
> > prohibited. If you have received this communication in error, please
> > notify the sender immediately by return email and destroy all copies of
> > the email (and attachments if any).
> 
> ________________________________
> 
> This email (and attachments if any) is intended only for the use of the
> individual or entity to which it is addressed, and may contain information
> that is confidential or privileged and exempt from disclosure under
> applicable law. If the reader of this email is not the intended recipient,
> or the employee or agent responsible for delivering this message to the
> intended recipient, you are hereby notified that any dissemination,
> distribution or copying of this communication is strictly prohibited. If
> you have received this communication in error, please notify the sender
> immediately by return email and destroy all copies of the email (and
> attachments if any).

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From etourigny.dev at gmail.com  Wed Feb 12 03:24:31 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 12 Feb 2014 09:24:31 -0200
Subject: [gdal-dev] warnings a fail with poppler
In-Reply-To: <201402091321.55901.even.rouault@mines-paris.org>
References: <52ED99D3.2080409@ualg.pt>
	<201402091321.55901.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvPPaXkWXZfrSamOG9gpCKUQdUXTfgTED7X74apWeY9LRQ@mail.gmail.com>

On Sun, Feb 9, 2014 at 10:21 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le dimanche 02 f?vrier 2014 02:05:23, Joaquim Luis a ?crit :
> > Hi,
> >
> > I am seeing this warnings and trying to build with poppler (a trunk
> > build here) fails too with
> >
> > pdfdataset.obj : error LNK2001: unresolved external symbol "public:
> > __cdecl SplashOutputDev::SplashOutputDev(enum
> > SplashColorMode,int,bool,unsigned char *,bool,bool,enum
> > SplashThinLineMode,bool)"
> > (??0SplashOutputDev@@QEAA at W4SplashColorMode
> @@H_NPEAE11W4SplashThinLineMode@
> > @1 at Z) pdfdataset.obj : error LNK2001: unresolved external symbol
> "public:
> > struct Ref * __cdecl Catalog::getPageRef(int)"
> > (?getPageRef at Catalog@@QEAAPEAURef@@H at Z)
> >
> > I could see that SplashOutputDev is poppler.lib
>
> I'm not sure why you get this error. Perhaps due how poppler.lib was
> generated
> ? Are the symbols well exported in it ?
>
> I can see that Tamas has upgraded his builds at
> http://www.gisinternals.com/sdk/ to latest poppler (0.24.5), so you could
> likely take poppler.lib from there.
>
> >
> > and now the warnings
>
> They aren't particularly new I guess since that code hasn't changed in a
> while. Would be nice if someone wanted to clean them up.
>

this kind of warnings appear (or not), depending on the compiler and
version used.


>
> >
> > c:\programs\gdaltrunk\gdal\frmts\iris\irisdataset.cpp(564) : warning
> > C4701: potentially uninitialized local variable 'dfCos2SigmaM' used
> > c:\programs\gdaltrunk\gdal\frmts\iris\irisdataset.cpp(558) : warning
> > C4701: potentially uninitialized local variable 'dfSinSigma' used
> > c:\programs\gdaltrunk\gdal\frmts\iris\irisdataset.cpp(558) : warning
> > C4701: potentially uninitialized local variable 'dfCosSigma' used
> >
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(2469) :
> > warning C4701: potentially uninitialized local variable 'iWrkNumType'
> used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3440) :
> > warning C4706: assignment within conditional expression
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3447) :
> > warning C4706: assignment within conditional expression
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3462) :
> > warning C4706: assignment within conditional expression
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3469) :
> > warning C4706: assignment within conditional expression
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3401) :
> > warning C4701: potentially uninitialized local variable 'dfNoData' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3405) :
> > warning C4701: potentially uninitialized local variable 'dfScale' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf4imagedataset.cpp(3410) :
> > warning C4701: potentially uninitialized local variable 'dfOffset' used
> >
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\ehapi.c(448) : warning
> > C4701: potentially uninitialized local variable 'sdInterfaceID' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\ehapi.c(435) : warning
> > C4701: potentially uninitialized local variable 'HDFfid' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\ehapi.c(445) : warning
> > C4701: potentially uninitialized local variable 'acs' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(3270) : warning
> > C4701: potentially uninitialized local variable 'c_info' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(3281) : warning
> > C4701: potentially uninitialized local variable 'chunkDef' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6470) : warning
> > C4701: potentially uninitialized local variable 'latrad0' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6500) : warning
> > C4701: potentially uninitialized local variable 'yMtr0' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6499) : warning
> > C4701: potentially uninitialized local variable 'xMtr0' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(2632) : warning
> > C4701: potentially uninitialized local variable 'ndims' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6741) : warning
> > C4701: potentially uninitialized local variable 'qp_cea' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(6741) : warning
> > C4701: potentially uninitialized local variable 'kz_cea' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(7967) : warning
> > C4701: potentially uninitialized local variable 'minCol' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(7969) : warning
> > C4701: potentially uninitialized local variable 'minRow' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(7968) : warning
> > C4701: potentially uninitialized local variable 'maxCol' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(7970) : warning
> > C4701: potentially uninitialized local variable 'maxRow' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(8614) : warning
> > C4701: potentially uninitialized local variable 'rank' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9025) : warning
> > C4701: potentially uninitialized local variable 'j' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9564) : warning
> > C4701: potentially uninitialized local variable 'xdum' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9565) : warning
> > C4701: potentially uninitialized local variable 'ydum' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9681) : warning
> > C4701: potentially uninitialized local variable 'size' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9843) : warning
> > C4701: potentially uninitialized local variable 'xdum' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(9844) : warning
> > C4701: potentially uninitialized local variable 'ydum' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(10109) : warning
> > C4701: potentially uninitialized local variable 'nRetn' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\gdapi.c(10573) : warning
> > C4701: potentially uninitialized local variable 'c_info' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(2451) : warning
> > C4701: potentially uninitialized local variable 'vdataID' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(4282) : warning
> > C4701: potentially uninitialized local variable 'nVal' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(5839) : warning
> > C4701: potentially uninitialized local variable 'j' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(6454) : warning
> > C4701: potentially uninitialized local variable 'tmpVal' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(6776) : warning
> > C4701: potentially uninitialized local variable 'k' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(7267) : warning
> > C4701: potentially uninitialized local variable 'incr' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(7301) : warning
> > C4701: potentially uninitialized local variable 'offset' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(7271) : warning
> > C4701: potentially uninitialized local variable 'index' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(7249) : warning
> > C4701: potentially uninitialized local variable 'bufOffset' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(8428) : warning
> > C4701: potentially uninitialized local variable 'incr' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(8414) : warning
> > C4701: potentially uninitialized local variable 'index' used
> > c:\programs\gdaltrunk\gdal\frmts\hdf4\hdf-eos\swapi.c(9128) : warning
> > C4701: potentially uninitialized local variable 'j' used
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140212/5bad6c34/attachment.html>

From dengo at gmx.net  Wed Feb 12 04:40:38 2014
From: dengo at gmx.net (Dennis Gocke)
Date: Wed, 12 Feb 2014 13:40:38 +0100
Subject: [gdal-dev] Invalid node descriptor size in .sbn
Message-ID: <CALqbEi58X3rYoWLFQYuefm+xGuA-NgEbQThtpg9=DNxN8PPHuw@mail.gmail.com>

Hi,



I found a problem with the shape file driver that occurs when reading
features with a spatial filter from a large shapefile that has a spatial
index (sbn).



The problem can be reproduced with this shapefile
http://geofuse.geoeye.com/static/shp/GE1_2012.zip but it's not only this
shapefile, I have others that show the problem, all of them are rather big.
Recalculating the spatial index (with ArcGIS) doesn't solve the problem,
the files seem to be valid.



When calling CPLGetLastError..() after the first GetNextFeature() a failure
is returned with the message "Invalid node descriptor size in .sbn :
503800".

It seems one could just ignore the Failure and continue reading the
features. Everything seems fine (although it probably did not use the
spatial index for filtering).

Perhaps a Warning instead of a Failure would suffice.



The error is generated in sbnsearch.c because "nNodeDescCount> nMaxNodes".
It seems the maximum tree depth of 15 is not enough.

Perhaps the maximum should be increased.



While testing this I also noticed a strange behavior. Sometimes
GetLastError..() returned a failure and sometimes it did not. When not
calling layer.GetSpatialRef() before calling GetNextFeature() the first
time no failure was returned although it still of course had problems
reading the sbn and "hSBN->sHooks.Error( szErrorMsg );" was still called.


This happens with the current development Version, but is also there in the
1.10.0 Version.

Best Regards,

Dennis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140212/6de11dc1/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Feb 12 05:53:49 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 12 Feb 2014 14:53:49 +0100
Subject: [gdal-dev] Invalid node descriptor size in .sbn
In-Reply-To: <CALqbEi58X3rYoWLFQYuefm+xGuA-NgEbQThtpg9=DNxN8PPHuw@mail.gmail.com>
References: <CALqbEi58X3rYoWLFQYuefm+xGuA-NgEbQThtpg9=DNxN8PPHuw@mail.gmail.com>
Message-ID: <201402121453.49833.even.rouault@mines-paris.org>

Le mercredi 12 f?vrier 2014 13:40:38, Dennis Gocke a ?crit :
> Hi,
> 
> 
> 
> I found a problem with the shape file driver that occurs when reading
> features with a spatial filter from a large shapefile that has a spatial
> index (sbn).
> 
> 
> 
> The problem can be reproduced with this shapefile
> http://geofuse.geoeye.com/static/shp/GE1_2012.zip but it's not only this
> shapefile, I have others that show the problem, all of them are rather big.
> Recalculating the spatial index (with ArcGIS) doesn't solve the problem,
> the files seem to be valid.
> 
> 
> 
> When calling CPLGetLastError..() after the first GetNextFeature() a failure
> is returned with the message "Invalid node descriptor size in .sbn :
> 503800".
> 
> It seems one could just ignore the Failure and continue reading the
> features. Everything seems fine (although it probably did not use the
> spatial index for filtering).
> 
> Perhaps a Warning instead of a Failure would suffice.
> 
> 
> 
> The error is generated in sbnsearch.c because "nNodeDescCount> nMaxNodes".
> It seems the maximum tree depth of 15 is not enough.
> 
> Perhaps the maximum should be increased.

Yes. Fixed by http://trac.osgeo.org/gdal/ticket/5383. The limitation to 15 was 
not really justified.

> 
> 
> 
> While testing this I also noticed a strange behavior. Sometimes
> GetLastError..() returned a failure and sometimes it did not. When not
> calling layer.GetSpatialRef() before calling GetNextFeature() the first
> time no failure was returned although it still of course had problems
> reading the sbn and "hSBN->sHooks.Error( szErrorMsg );" was still called.

Hum not sure to follow you completely. But sometimes the error flag may be 
cleared. The first time you call GetSpatialRef() it reads the .prj file and I 
can see that for some reason the routine that does it clears the error flag.

> 
> 
> This happens with the current development Version, but is also there in the
> 1.10.0 Version.
> 
> Best Regards,
> 
> Dennis

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From dengo at gmx.net  Wed Feb 12 06:27:05 2014
From: dengo at gmx.net (Dennis Gocke)
Date: Wed, 12 Feb 2014 15:27:05 +0100
Subject: [gdal-dev] Invalid node descriptor size in .sbn
In-Reply-To: <201402121453.49833.even.rouault@mines-paris.org>
References: <CALqbEi58X3rYoWLFQYuefm+xGuA-NgEbQThtpg9=DNxN8PPHuw@mail.gmail.com>
	<201402121453.49833.even.rouault@mines-paris.org>
Message-ID: <CALqbEi5GMW-o281RqE842qTZFXouy3GzE0amJsqvF1Mzf1Xdeg@mail.gmail.com>

Hi Even,

Thanks for the quick reply.

regarding the last part:
Here is some pseudo code to illustrate:
I'm normally using the C# wrapper so Failures result in an exception.

When doing the following:
OpenShape()
GetSpatRef()
SetSpatialFilter()
GetNextFeature() -> Exception "Invalid node descriptor size in .sbn"

when doing the same just without GetSpatRef():
OpenShape()
SetSpatialFilter()
GetNextFeature() -> No Exception

This seemed strange to me.

With the increased Maximum value it is probably unlikely that this will
still happen, but should this Problem with the SBN really result in a
Failure or wouldn't be a Warning enough?

Kind regards,
Dennis



On Wed, Feb 12, 2014 at 2:53 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mercredi 12 f?vrier 2014 13:40:38, Dennis Gocke a ?crit :
> > Hi,
> >
> >
> >
> > I found a problem with the shape file driver that occurs when reading
> > features with a spatial filter from a large shapefile that has a spatial
> > index (sbn).
> >
> >
> >
> > The problem can be reproduced with this shapefile
> > http://geofuse.geoeye.com/static/shp/GE1_2012.zip but it's not only this
> > shapefile, I have others that show the problem, all of them are rather
> big.
> > Recalculating the spatial index (with ArcGIS) doesn't solve the problem,
> > the files seem to be valid.
> >
> >
> >
> > When calling CPLGetLastError..() after the first GetNextFeature() a
> failure
> > is returned with the message "Invalid node descriptor size in .sbn :
> > 503800".
> >
> > It seems one could just ignore the Failure and continue reading the
> > features. Everything seems fine (although it probably did not use the
> > spatial index for filtering).
> >
> > Perhaps a Warning instead of a Failure would suffice.
> >
> >
> >
> > The error is generated in sbnsearch.c because "nNodeDescCount>
> nMaxNodes".
> > It seems the maximum tree depth of 15 is not enough.
> >
> > Perhaps the maximum should be increased.
>
> Yes. Fixed by http://trac.osgeo.org/gdal/ticket/5383. The limitation to
> 15 was
> not really justified.
>
> >
> >
> >
> > While testing this I also noticed a strange behavior. Sometimes
> > GetLastError..() returned a failure and sometimes it did not. When not
> > calling layer.GetSpatialRef() before calling GetNextFeature() the first
> > time no failure was returned although it still of course had problems
> > reading the sbn and "hSBN->sHooks.Error( szErrorMsg );" was still called.
>
> Hum not sure to follow you completely. But sometimes the error flag may be
> cleared. The first time you call GetSpatialRef() it reads the .prj file
> and I
> can see that for some reason the routine that does it clears the error
> flag.
>
> >
> >
> > This happens with the current development Version, but is also there in
> the
> > 1.10.0 Version.
> >
> > Best Regards,
> >
> > Dennis
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140212/94aca4d7/attachment.html>

From dengo at gmx.net  Wed Feb 12 07:55:30 2014
From: dengo at gmx.net (Dennis Gocke)
Date: Wed, 12 Feb 2014 16:55:30 +0100
Subject: [gdal-dev] GDAL PCIDSK Driver Issue
Message-ID: <CALqbEi7L6rK6R9dcQqiQVpTJLQzhXbrmN+tSxz=VsRzUxhm+Jw@mail.gmail.com>

Hi,



I've encountered some problems with the PCIDSK raster driver.



Even if the raster is opened with update=0 the driver wants to write
statistics and overviews to the pix file, which produces an error "File not
open for update in WriteToFile".

You can reproduce this with the files from
pix_test.zip -
https://drive.google.com/file/d/0B_pKTK9WcAW4bEM3dG5BazlGbjA/edit?usp=sharing

Open it with update=0, calculate statistics and close it. The error
is produced when closing the dataset.
In the driver description it says "Internal overview (pyramid) images will
also be correctly read though newly requested overviews will be built
externally as an .ovr file.". This seems not to be the case, overviews are
always written to the pix file. Wouldn't it be better if the statistics and
overviews were stored in separate files when the file was opened with
update=0?


Also it seems like the driver can't read the statistics when they are
created with PCI, see attached file test_with_stats.pix. If you request the
stats they are recalculated and rewritten to file. If not opened with
update=1 see problem above.

Quick side note:
When using the C# wrapper (pseudo code):
Gdal.Open(pixFile, update=0)
band.GetStatistics()
dataset.Dispose() -> although here the problem with "File not open for
update in WriteToFile" happens
anyOtherGDALCall() -> the Exception is thrown here

This had me confused at first. Perhaps it would be good to add a
"GdalPINVOKE.SWIGPendingException.Retrieve();" to the Dataset.Dispose()
method, although it probably isn't nice design to throw an exception in the
Dispose() method.

This was tested with the current development version and the 1.10.0 final
Version.

Kind regards,
Dennis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140212/c0179cca/attachment.html>

From even.rouault at mines-paris.org  Wed Feb 12 08:34:26 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 12 Feb 2014 17:34:26 +0100
Subject: [gdal-dev] Invalid node descriptor size in .sbn
In-Reply-To: <CALqbEi5GMW-o281RqE842qTZFXouy3GzE0amJsqvF1Mzf1Xdeg@mail.gmail.com>
References: <CALqbEi58X3rYoWLFQYuefm+xGuA-NgEbQThtpg9=DNxN8PPHuw@mail.gmail.com>
	<201402121453.49833.even.rouault@mines-paris.org>
	<CALqbEi5GMW-o281RqE842qTZFXouy3GzE0amJsqvF1Mzf1Xdeg@mail.gmail.com>
Message-ID: <201402121734.27079.even.rouault@mines-paris.org>

Le mercredi 12 f?vrier 2014 15:27:05, Dennis Gocke a ?crit :
> Hi Even,
> 
> Thanks for the quick reply.
> 
> regarding the last part:
> Here is some pseudo code to illustrate:
> I'm normally using the C# wrapper so Failures result in an exception.
> 
> When doing the following:
> OpenShape()
> GetSpatRef()
> SetSpatialFilter()
> GetNextFeature() -> Exception "Invalid node descriptor size in .sbn"
> 
> when doing the same just without GetSpatRef():
> OpenShape()
> SetSpatialFilter()
> GetNextFeature() -> No Exception
> 
> This seemed strange to me.

Yes, for me too without deeper investigation. Well you shouldn't worry anymore 
with the fix.

> 
> With the increased Maximum value it is probably unlikely that this will
> still happen,

Yes that should be OK for shapefiles up to 2^24 * 8 = 134 millions shapes. 
Although I'm wondering if that area of the code shouldn't be modified in a 
different way, but the new value should be OK for now.

> but should this Problem with the SBN really result in a
> Failure or wouldn't be a Warning enough?

Well that's a self consistency test. So when it doesn't pass, a failure is 
appropriate. Nominal working is sufficiently hard to implement, so optimizing 
behaviour in non-nominal cases ...

> 
> Kind regards,
> Dennis
> 
> 
> 
> On Wed, Feb 12, 2014 at 2:53 PM, Even Rouault
> 
> <even.rouault at mines-paris.org>wrote:
> > Le mercredi 12 f?vrier 2014 13:40:38, Dennis Gocke a ?crit :
> > > Hi,
> > > 
> > > 
> > > 
> > > I found a problem with the shape file driver that occurs when reading
> > > features with a spatial filter from a large shapefile that has a
> > > spatial index (sbn).
> > > 
> > > 
> > > 
> > > The problem can be reproduced with this shapefile
> > > http://geofuse.geoeye.com/static/shp/GE1_2012.zip but it's not only
> > > this shapefile, I have others that show the problem, all of them are
> > > rather
> > 
> > big.
> > 
> > > Recalculating the spatial index (with ArcGIS) doesn't solve the
> > > problem, the files seem to be valid.
> > > 
> > > 
> > > 
> > > When calling CPLGetLastError..() after the first GetNextFeature() a
> > 
> > failure
> > 
> > > is returned with the message "Invalid node descriptor size in .sbn :
> > > 503800".
> > > 
> > > It seems one could just ignore the Failure and continue reading the
> > > features. Everything seems fine (although it probably did not use the
> > > spatial index for filtering).
> > > 
> > > Perhaps a Warning instead of a Failure would suffice.
> > > 
> > > 
> > > 
> > > The error is generated in sbnsearch.c because "nNodeDescCount>
> > 
> > nMaxNodes".
> > 
> > > It seems the maximum tree depth of 15 is not enough.
> > > 
> > > Perhaps the maximum should be increased.
> > 
> > Yes. Fixed by http://trac.osgeo.org/gdal/ticket/5383. The limitation to
> > 15 was
> > not really justified.
> > 
> > > While testing this I also noticed a strange behavior. Sometimes
> > > GetLastError..() returned a failure and sometimes it did not. When not
> > > calling layer.GetSpatialRef() before calling GetNextFeature() the first
> > > time no failure was returned although it still of course had problems
> > > reading the sbn and "hSBN->sHooks.Error( szErrorMsg );" was still
> > > called.
> > 
> > Hum not sure to follow you completely. But sometimes the error flag may
> > be cleared. The first time you call GetSpatialRef() it reads the .prj
> > file and I
> > can see that for some reason the routine that does it clears the error
> > flag.
> > 
> > > This happens with the current development Version, but is also there in
> > 
> > the
> > 
> > > 1.10.0 Version.
> > > 
> > > Best Regards,
> > > 
> > > Dennis
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From matt.gregory at oregonstate.edu  Wed Feb 12 10:42:09 2014
From: matt.gregory at oregonstate.edu (Matt Gregory)
Date: Wed, 12 Feb 2014 10:42:09 -0800
Subject: [gdal-dev] gdalwarp coordinate alignment with -tap option
Message-ID: <ldgf9k$7qd$1@ger.gmane.org>

Hi all,

We have been using -tap as a command-line argument to gdalwarp to force 
pixels to be aligned with the origin (0,0) in the output coordinate system.

We now have a situation where we want to specify a different 'snap' 
coordinate for pixel alignment (e.g. (15,15)).  Is there a simple 
mechanism for specifying this within gdalwarp that I'm overlooking?

thanks, matt


From kansal.k at gmail.com  Thu Feb 13 00:53:38 2014
From: kansal.k at gmail.com (Kshitij Kansal)
Date: Thu, 13 Feb 2014 14:23:38 +0530
Subject: [gdal-dev] [RFC] [GDAL] Idea for GSoC, 2014
In-Reply-To: <52F5ECBB.6010507@gmail.com>
References: <CAKTWcSk7CiW+e2o0H2wpJSXriE-xqxSQ0LK_TYA-VwGp-20sFA@mail.gmail.com>
	<1390896882268-5100379.post@n6.nabble.com>
	<CAKTWcSmDamV0o+XxH7h1O4z+kkON8sO5PesY+s0Ou4eCKTnTpQ@mail.gmail.com>
	<201401282101.00768.even.rouault@mines-paris.org>
	<CAKTWcS=CviogV2Kc5hVkqUkSOECwGiVtqVLzdET4zR1xJb2SMA@mail.gmail.com>
	<loom.20140129T084029-6@post.gmane.org>
	<CAKTWcSmH2drpYqYH+J9F37XRNNu7xxXc+ZQ5WGTcmD5qYqC0Vg@mail.gmail.com>
	<CAKTWcSmu1NqwhFjSpu_yTEstK63jyOa_gm4Tp9N+35Dssrpn5w@mail.gmail.com>
	<1391806418.52f547d239b63@imp.free.fr>
	<CAKTWcSkbXgRD=TcOne+=HEyvHDJAPhJGROqWd5MdvYX9k-10+A@mail.gmail.com>
	<52F5ECBB.6010507@gmail.com>
Message-ID: <CAKTWcSnjZ0j9uek+QeULFvHpP04wgcWs0Br_kQ7juw0iWnMOZQ@mail.gmail.com>

Hello Everyone

I have updated the Summer Of Code Ideas Page for GDAL. I have Introduced
the above idea in that page also. Mr. Chaitanya Kumar is willing to mentor
the project.

Please look into this.

Suggestions and Comments are welcomed.

Regards,

Kshitij Kansal

Lab For Spatial Informatics,

IIIT Hyderabad



On Sat, Feb 8, 2014 at 2:07 PM, Dmitriy Baryshnikov <bishop.dev at gmail.com>wrote:

>  Hi,
>
> Even note that you cannot get the code from this projects and merge it to
> GDAL, but you  free to develop you own implementation of this algorithms as
> path of GDAL.
> This is a same situation with correlator. Andrew cannot get code from
> OpenCV and GRASS as incompatible licenses, so the own (simple)
> implementation was provided.
> One can change this implementation to be more advanced: support large
> datasets, more bands, etc. Everybody  welcome to do it.
>
> Best regards,
>     Dmitry
>
> 08.02.2014 2:15, Kshitij Kansal ?????:
>
> Sir
>
>  I am providing the links for both the algorithms that I talked. I am new
> to this licence issues thing so I would be highly grateful if you can
> clarify doubts and if can proceed on working for this idea.
>
>  http://www.cs.ubc.ca/~lowe/keypoints/ (SIFT)
>  http://www.ipol.im/pub/art/2011/my-asift/ (ASIFT) [here source code is
> provided. It contains license ]
>  http://www.cmap.polytechnique.fr/~yu/research/ASIFT/demo.html (Demo Page
> for ASIFT)
>
>  The SIFT algorithm in itself is patented. They only provide binaries. I
> am not sure If we can use those binaries or not.
> As far as ASIFT is concerned, i think its implementation is only patented.
>
>  Kindly clarify this.
>
>  Thanking You
> With Regards,
>
>  Kshitij Kansal
>
> Lab For Spatial Informatics,
>
> IIIT Hyderabad
>
>
>
> On Sat, Feb 8, 2014 at 2:23 AM, Even Rouault <even.rouault at mines-paris.org
> > wrote:
>
>> Selon Kshitij Kansal <kansal.k at gmail.com>:
>>
>> Kshitij,
>>
>> I'm surprised that you mention licenses
>> for algorithms. What are your sources for that?
>> Only *implementations* can be licensed
>> not algorithms themselves. So if you
>> develop your own implementation you are free
>> to select the license you wish. There
>> might be issues linked to potential pattents
>> in some countries but that is acceptable in my opinion
>> as software parents are not valid in all contries
>> so mentionning potential issues with them
>> in the documentation is sufficient .
>>
>> > Hello
>> >
>> > Based on all suggestion
>>  ins and comments above, I have come up with one thing.
>> >
>> > The most important thing that could have been a road block for this
>> project
>> > was licence issues which was pointed by Even Rouault.
>> >
>> > I am interested in implementing the SIFT or ASIFT algorithms for
>> automatic
>> > geo-referencing which I proposed in above mails. I am interested in
>> making
>> > a separate tool which will be completely based on the GDAL and
>> maintained
>> > by GDAL community. I looked into the GDAL-correlator idea which was also
>>  > implemented as a part of GSoC. That idea uses only *SIMPLE SURF
>> *algorithm
>> > for control point detection and is only *limited to small size three
>> band
>> > imagery(RGB)*.
>> >
>> > I am interested in developing something that is fully automated and
>> works
>> > on large multi band imagery.But the above two algorithms that I am
>> planning
>> > to use come up with the licence that does not allows the free use for
>>  > commercial purposes. The free use of above algorithm are restricted
>> to *"non
>> > profit research and non profit educational purposes"*(in case of
>> > ASIFT) and *"research
>>  > purposes only" *(in case of SIFT).
>>  >
>> > This means that the final product as a result of this product will also
>> be
>> > bounded by the above licences. It can not go into GDAL's main
>> distribution
>> > but can be used as a separate utility of GDAL for non-commercial uses
>> only.
>> > Basically the commercial use of the tool won't be allowed without
>> approval
>> > from the concerned people.
>> >
>> > Your views and suggestions are highly appreciated.
>> >
>> > Regards,
>> >
>> > Kshitij Kansal
>> >
>> > Lab For Spatial Informatics,
>> >
>> > IIIT Hyderabad
>> >
>> >
>> >
>> > On Thu, Jan 30, 2014 at 12:25 PM, Kshitij Kansal <kansal.k at gmail.com>
>> wrote:
>> >
>> > > Hello
>> > >
>> > > @Jukka Rahkonen: The OSSIM project (the link you provided) is more of
>> > > image orthorectification. Although
>> > > they are doing image co-registration but its as one of the steps of
>> > > orthorectification(I could only understand this from the manual).
>> > > Also I am not sure of the techniques they are using for this purposes.
>> > > (Its written corner point detection but How?)
>> > > I am new to OSSIM, so not aware of this thing's functionality and
>> > > accuracy. I am in the process of estimating it.
>> > >
>> > > Thank you for pointing this out.
>> > >
>> > > Coming to the Frank Warmerdam's blog (http://fwarmerdam.blogspot.fi/
>> ).
>> > > Here the author is talking about writing a code for converting the
>> GCP's
>> > > into RPC's. But the next question comes is where is he getting GCP's
>> from.
>> > > Now this is the part where I aim to work on and improve.
>> > >
>> > > Given two images, if we can automatically extract GCP's from them
>> then we
>> > > are in a way speeding up and automating this whole process. Once we
>> have
>> > > GCP, there are a lot of things that we can do from them like
>> > > geo-referencing(which I plan on doing), image stitching etc.
>> > >
>>  > > *Also you talked about a "more light weighted system". Can you
>> please
>> > > elaborate on this?* I could not understand what you actually meant
>> from
>> > > that.
>> > >
>> > > If we look into the last year idea's page (
>> > > http://trac.osgeo.org/gdal/wiki/SummerOfCode), there is one idea
>> that is
>> > > proposed regarding the "Raster/Vector geo-referencer on the Web". I
>> want to
>> > > modify this idea a little bit and want to automate the whole process.
>> As
>> > > far as the automation is concerned, we can develop GDAL functions for
>> > > that(which will be completely re-usable) and then developing a Web
>> based
>> > > geo-referencer would only require calling those functions.
>> > >
>>  > > If we do this thing,* two objectives will be fulfilled*.* First*,
>> GDAL
>> > > will get a web based geo-referencer. *Secondly*, communities that use
>>  > > GDAL and have not developed these kind of geo-referencer(Like QGIS)
>> can
>> > > directly use the functions developed and then build on that.
>> > >
>> > > Suggestions and comments are welcomed.
>> > >
>> > > Thank you for your propositions.
>> > >
>> > > Regards,
>> > >
>> > >  Kshitij Kansal
>> > >
>> > > Lab For Spatial Informatics,
>> > >
>> > > IIIT Hyderabad
>> > >
>> > >
>> > >
>> > > On Wed, Jan 29, 2014 at 1:27 PM, Jukka Rahkonen <
>> jukka.rahkonen at mmmtike.fi
>> > > > wrote:
>> > >
>> > >> Kshitij Kansal <kansal.k <at> gmail.com> writes:
>> > >>
>> > >> >
>> > >> > Even,
>> > >> > Thank you for pointing out this issue. I will keep this in mind.
>> > >> >
>> > >> > I will look into that last year project and try to understand the
>> > >> implementation.
>> > >> >
>> > >>
>> > >> > More suggestions and comments are always welcomed.
>> > >>
>> > >> Hi,
>> > >>
>> > >> Another OSGeo project OSSIM has implemented an automatic image to
>> image
>> > >> rectification. Isn't that a bit alike your plan?
>> > >>
>> http://download.osgeo.org/ossim/docs/OSSIM_Coregistration_UserManual.pdf
>> > >>
>> > >> Frank Warmerdam seems to entertain himself with something related
>> > >> http://fwarmerdam.blogspot.fi/
>> > >>
>> > >> This article from 2013 may also give some inspiration
>> > >>
>> > >>
>> >
>>
>> http://www.academia.edu/4388853/OrientAL_-_Automatic_geo-referencing_and_ortho-rectification_of_archaeological_aerial_photographs
>> > >>
>> > >> All these three aim to very high quality and I am sure that there is
>> also
>> > >> need for a more light-weight system.
>> > >>
>> > >> -Jukka Rahkonen-
>> > >>
>> > >> _______________________________________________
>> > >> gdal-dev mailing list
>> > >> gdal-dev at lists.osgeo.org
>> > >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> > >>
>> > >
>> > >
>> >
>>
>>
>>
>>
>>
>>
>>
>>
>>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140213/bba25c3f/attachment.html>

From siebe at hydroconsult.nl  Thu Feb 13 03:31:01 2014
From: siebe at hydroconsult.nl (Siebe Bosch)
Date: Thu, 13 Feb 2014 12:31:01 +0100
Subject: [gdal-dev] Gdal_translate won't crop VRT-file
Message-ID: <52FCACF4.2000101@hydroconsult.nl>

Dear list,

I run into problems with gdal_translate.exe, calling a VRT file which I 
created using the MapWindow OCX.
This is the error when I run gdal_translate.exe from the batch file, 
calling the VRT-file:

0ERROR1: Can't find RasterDMS field in Eimg_layer with block list
ERROR 1: y:\...\i21bn1_24.aux, band 1: IReadBlock failed  at X offset 0, 
Y offset 80
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 80

It seems that gdal_translate is unable to open the grid contents since 
it produces a grid with only nodata-values.

Here's the contents of my batchfile:

     /c:\GDAL\bin\gdal_translate.exe  -of HFA -a_nodata -999 -projwin
       193199 519840 194203 518598  "y:\Dropbox\H1135 Kavelsloten
       Zuiderzeeland\Ontvangen\GIS\AHN2-Zuiderzeeland\ahn2_05_int\gridcollection.vrt"
       "C:\temp\Q4-2_CROPPED.img"/

/
     //pause/


Here's a fragment of my VRT-file:
/
/

/<VRTDataset rasterXSize="124000" rasterYSize="135000">/

/   <SRS>PROJCS[&quot;Double Stereographic&quot;,GEOGCS[&quot;Amersfoort-1&quot;,DATUM[&quot;Amersfoort-1&quot;,SPHEROID[&quot;Bessel&quot;,6377397.155,299.1528131060786],TOWGS84[593.16,26.15,478.54,6.3239e-006,5.008e-007,5.5487e-006,4.0775e-006]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&quot;,0.0174532925199433]],PROJECTION[&quot;Double_Stereographic&quot;],PARAMETER[&quot;latitude_of_origin&quot;,52.15616055555557],PARAMETER[&quot;central_meridian&quot;,5.387638888888891],PARAMETER[&quot;scale_factor&quot;,0.9999079],PARAMETER[&quot;false_easting&quot;,155000],PARAMETER[&quot;false_northing&quot;,463000],UNIT[&quot;meters&quot;,1]]</SRS>/

/   <GeoTransform> 1.3600000000000000e+005, 5.0000000000000000e-001, 0.0000000000000000e+000, 5.4125000000000000e+005, 0.0000000000000000e+000,-5.0000000000000000e-001</GeoTransform>/

/   <VRTRasterBand dataType="Float32" band="1">/

/     <SimpleSource>/

/       <SourceFilename relativeToVRT="1">geogegevens\raster\15f\i15fz1_24.aux</SourceFilename>/

/       <SourceBand>1</SourceBand>/

/       <SourceProperties RasterXSize="2000" RasterYSize="2500" DataType="Float32" BlockXSize="512" BlockYSize="4" />/

/       <SrcRect xOff="0" yOff="0" xSize="2000" ySize="2500" />/

/       <DstRect xOff="74000" yOff="5000" xSize="2000" ySize="2500" />/

/     </SimpleSource>/



Any ideas?

Thanks,
Siebe Bosch


-- 
---------------------------------------------
Hydroconsult
Lulofsstraat 55, unit 47
2521 AL Den Haag
The Netherlands

web:http://www.hydroconsult.nl
e-mail:siebe at hydroconsult.nl
phone: +31(0)70 250 0580
mobile: +31(0)6 17 682 689
---------------------------------------------
Aangesloten bij WaterFocus, de co?peratie van
zelfstandige professionals in het waterbeheer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140213/fe8b7d73/attachment-0001.html>

From dengo at gmx.net  Thu Feb 13 07:11:05 2014
From: dengo at gmx.net (Dennis Gocke)
Date: Thu, 13 Feb 2014 16:11:05 +0100
Subject: [gdal-dev] memory problems with huge raster sizes
Message-ID: <CALqbEi4h3MC2f84f1TSzi7aihfCW+_BUgOoNXDnzz=z5KkF8_w@mail.gmail.com>

Hi,



We've stumbled upon memory problems when using huge raster levels.



For instance for a common TMS/WMS server on the full level you will have
something like:

Raster Size: 268435456x268435456

Block Size: 256x256



With SUBBLOCK_SIZE 64 this results in:

nSubBlocksPerRow = 268435456 / 256 / 64 = 16384

nSubBlocksPerColumn = 268435456 / 256 / 64 = 16384



for each band papoBlocks will therefore have the size:

sizeof(void*) * nSubBlocksPerRow * nSubBlocksPerColumn => 2GB (64bit) and
1GB (32bit)



On 32bit system you will have out of memory exception with just one RGB
raster and on 64bit you will of course also get problems very fast.



One solution would be to increase SUBBLOCK_SIZE:

#define SUBBLOCK_SIZE 256

#define TO_SUBBLOCK(x) ((x) >> 8)

#define WITHIN_SUBBLOCK(x) ((x) & 0xff)



This will result in 128MB (64bit) for the size of papoBlocks instead of 2GB.



Perhaps an even better solution would be to make SUBBLOCK_SIZE not a
constant but instead dependent on nBlocksPerRow.

For instance:

toSubBlockShift = log2(nBlocksPerRow)/2;

subBlockSize =  1 << toSubBlockShift;

withinSubBlockMask = subBlockSize-1;

For the above example this would result in subBlockSize=1024 and just 8MB
(64bit) for papoBlocks.


This will handle even bigger rasters better and scale better for smaller.

Hopefully the performance impact for not having simple defines will not be
noticeable, but I don't think so.



Kind regards,

Dennis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140213/4bb57592/attachment.html>

From dengo at gmx.net  Thu Feb 13 07:49:36 2014
From: dengo at gmx.net (Dennis Gocke)
Date: Thu, 13 Feb 2014 16:49:36 +0100
Subject: [gdal-dev] memory problems with huge raster sizes
Message-ID: <CALqbEi7giY7Mr5q_5x09WR9doo5Yy_-OK812rFtJ1VrS57OESw@mail.gmail.com>

Hi again,

Sorry, I just realized this was a topic before:

http://thread.gmane.org/gmane.comp.gis.gdal.devel/21150/focus=21167
http://trac.osgeo.org/gdal/ticket/3224

A hashtable would probably be the better solution, but just computing
subBlockSize dynamically could be a quicker fix.

Kind regards,
Dennis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140213/c04db2c2/attachment.html>

From andre+joost at nurfuerspam.de  Thu Feb 13 07:49:13 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Thu, 13 Feb 2014 16:49:13 +0100
Subject: [gdal-dev] Gdal_translate won't crop VRT-file
In-Reply-To: <52FCACF4.2000101@hydroconsult.nl>
References: <52FCACF4.2000101@hydroconsult.nl>
Message-ID: <ldipta$v42$2@ger.gmane.org>

Am 13.02.2014 12:31, schrieb Siebe Bosch:

>
>
>
> Any ideas?
>

Can you add what gdalinfo reports as extent of your vrt file?

Greetings,
Andr? Joost



From matt.gregory at oregonstate.edu  Thu Feb 13 08:03:11 2014
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Thu, 13 Feb 2014 16:03:11 +0000
Subject: [gdal-dev] gdalwarp coordinate alignment with -tap option
In-Reply-To: <CACqBkM9MuN5eiMHt8kd4Rc6uhqFt9vSK_o5bG+83qrk7bqS_tQ@mail.gmail.com>
References: <ldgf9k$7qd$1@ger.gmane.org>
	<CACqBkM9MuN5eiMHt8kd4Rc6uhqFt9vSK_o5bG+83qrk7bqS_tQ@mail.gmail.com>
Message-ID: <7C48E40C135D314BA03D6471A6E389782F34F502@EX1.oregonstate.edu>

Hi Eli,

Eli Adam wrote:
> <matt.gregory at oregonstate.edu> wrote:
> > Hi all,
> >
> > We have been using -tap as a command-line argument to gdalwarp to
> > force pixels to be aligned with the origin (0,0) in the output
> coordinate system.
> >
> > We now have a situation where we want to specify a different 'snap'
> > coordinate for pixel alignment (e.g. (15,15)).  Is there a simple
> > mechanism for specifying this within gdalwarp that I'm overlooking?
> 
> Not exactly sure what you mean.  But you might try using -tr as well.
> I'm not exactly sure of how -tr and -tap relate from the docs,
> 
> -tr xres yres:set output file resolution (in target georeferenced units)
> -tap:(GDAL >= 1.8.0) (target aligned pixels) align the coordinates of
> the extent of the output file to the values of the -tr, such that the
> aligned extent includes the minimum extent.

Thanks for your help.  I left out some key information from my initial post which was that I am also passing -tr 30 30 as an argument to gdalwarp.  When using -tap along with this, the pixels are aligned with the origin.  What I really want is for the 30m pixels to have a corner at (15, 15) in the output projection.

The only way I've figured out how to do this is to first find the projected extents of the output image (via osr in python), modify these extents to snap to my desired snap window and then use the -te command line option to explicitly set the extent.

I was just looking for an obvious way to specify this just using gdalwarp command line options.

thanks, matt

From even.rouault at mines-paris.org  Thu Feb 13 10:43:08 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 13 Feb 2014 19:43:08 +0100
Subject: [gdal-dev] gdalwarp coordinate alignment with -tap option
In-Reply-To: <7C48E40C135D314BA03D6471A6E389782F34F502@EX1.oregonstate.edu>
References: <ldgf9k$7qd$1@ger.gmane.org>
	<CACqBkM9MuN5eiMHt8kd4Rc6uhqFt9vSK_o5bG+83qrk7bqS_tQ@mail.gmail.com>
	<7C48E40C135D314BA03D6471A6E389782F34F502@EX1.oregonstate.edu>
Message-ID: <201402131943.08667.even.rouault@mines-paris.org>

Le jeudi 13 f?vrier 2014 17:03:11, Gregory, Matthew a ?crit :
> Hi Eli,
> 
> Eli Adam wrote:
> > <matt.gregory at oregonstate.edu> wrote:
> > > Hi all,
> > > 
> > > We have been using -tap as a command-line argument to gdalwarp to
> > > force pixels to be aligned with the origin (0,0) in the output
> > 
> > coordinate system.
> > 
> > > We now have a situation where we want to specify a different 'snap'
> > > coordinate for pixel alignment (e.g. (15,15)).  Is there a simple
> > > mechanism for specifying this within gdalwarp that I'm overlooking?
> > 
> > Not exactly sure what you mean.  But you might try using -tr as well.
> > I'm not exactly sure of how -tr and -tap relate from the docs,
> > 
> > -tr xres yres:set output file resolution (in target georeferenced units)
> > -tap:(GDAL >= 1.8.0) (target aligned pixels) align the coordinates of
> > the extent of the output file to the values of the -tr, such that the
> > aligned extent includes the minimum extent.
> 
> Thanks for your help.  I left out some key information from my initial post
> which was that I am also passing -tr 30 30 as an argument to gdalwarp. 
> When using -tap along with this, the pixels are aligned with the origin. 
> What I really want is for the 30m pixels to have a corner at (15, 15) in
> the output projection.
> 
> The only way I've figured out how to do this is to first find the projected
> extents of the output image (via osr in python), modify these extents to
> snap to my desired snap window and then use the -te command line option to
> explicitly set the extent.
> 
> I was just looking for an obvious way to specify this just using gdalwarp
> command line options.

Your method is the best method I can think of currently.

> 
> thanks, matt
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From tkeitt at utexas.edu  Thu Feb 13 10:55:31 2014
From: tkeitt at utexas.edu (Tim Keitt)
Date: Thu, 13 Feb 2014 12:55:31 -0600
Subject: [gdal-dev] R bindings
Message-ID: <CANnL8gpcihs1uh-19miUkLD8giez4UM7Y4SteJtB4jRQuEu-3g@mail.gmail.com>

I've been updating my R bindings to GDAL/OGR. The repo is at
https://github.com/thk686/rgdal2.

There is still lots to do and this might make a good GSOC project.

THK

-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140213/8420c3be/attachment.html>

From sfkeller at gmail.com  Thu Feb 13 12:58:49 2014
From: sfkeller at gmail.com (Stefan Keller)
Date: Thu, 13 Feb 2014 21:58:49 +0100
Subject: [gdal-dev] OGC adopts important GeoPackage Standard
Message-ID: <CAFcOn28U3vip+G8BA1eOKM9ZhdvGZvAyOz352ywyVjoxwTTyqg@mail.gmail.com>

Taken from OGC press releases

13 February 2014 - The Open Geospatial Consortium (OGC?) has adopted
the OGC GeoPackage (GPKG) Encoding Standard. The GeoPackage standard
will make it much easier to exchange and share geospatial (or
location) information across different devices, applications and web
services throughout the mobile world. (...)

http://www.opengeospatial.org/pressroom/pressreleases/1964

From even.rouault at mines-paris.org  Thu Feb 13 13:14:20 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 13 Feb 2014 22:14:20 +0100
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint, release plans,
	GDAL 2.0
Message-ID: <201402132214.20518.even.rouault@mines-paris.org>

Hi,

I've confirmed my presence to the OSGeo Vienna code sprint ( 
http://wiki.osgeo.org/wiki/Vienna_Code_Sprint_2014 ). Are there folks that 
will be there and indent doing some work on GDAL ? Any particular topics of 
interest ?

It could be the opportunity to take a crack at some changes that have been 
mentionned for some time and are listed at 
http://trac.osgeo.org/gdal/wiki/GDAL20Changes

We should decide how to manage the 2.0 transition. I think that the 2.0 number 
should be reserved as the opportunity of introducing breaking changes in the 
API / ABI. But this might take a long time to implement all that is listed 
above, so there's a risk we end up with a trunk that is never ready for 
release for years. Not a good thing.
On the other hand, we could just be more modest and take breaking changes as 
they are introduced and raise the major version number (so the yearly version 
after 2.0 could be 3.0). This will require projects using GDAL to adapt 
multiple times.
An alternative would be to prepare the API for new features even if they are 
not implemented, but that's a difficult exercise and there's a risk that at 
implementation time, the API doesn't fit.
Any thoughts ?

Currently we have no such breakage in trunk so it could qualify as GDAL 1.11. 
Perhaps we should just release it as such for now before the bigger changes ?

Somes topics I can see for GDAL 2.0 that impact API/ABI :
- well, the mythological unification of OGR driver model with GDAL driver 
model.
- XYZM support
- Curve geometries
- 64 bit integer support

Other possible structural changes :
- Change of master version control system: switch to git / GitHub ?
- New build system : cmake ?

Of course all of this will more likely happen if contributors or funders show 
up !

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From tkeitt at utexas.edu  Thu Feb 13 13:17:40 2014
From: tkeitt at utexas.edu (Tim Keitt)
Date: Thu, 13 Feb 2014 15:17:40 -0600
Subject: [gdal-dev] R bindings
In-Reply-To: <CANnL8gpcihs1uh-19miUkLD8giez4UM7Y4SteJtB4jRQuEu-3g@mail.gmail.com>
References: <CANnL8gpcihs1uh-19miUkLD8giez4UM7Y4SteJtB4jRQuEu-3g@mail.gmail.com>
Message-ID: <CANnL8gr7_N_ULkycP2JbobdGYZVQj7qs18=c5_QO-vxrNo1bfQ@mail.gmail.com>

On Thu, Feb 13, 2014 at 12:55 PM, Tim Keitt <tkeitt at utexas.edu> wrote:

> I've been updating my R bindings to GDAL/OGR. The repo is at
> https://github.com/thk686/rgdal2.
>
> There is still lots to do and this might make a good GSOC project.
>

In case there is any confusion (I've received one such email), I should
mention that I am the original author of the current rgdal package on CRAN
and this is a long-overdue rewrite that covers much of OGR as well.

THK


>
> THK
>
> --
> http://www.keittlab.org/
>



-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140213/4445882e/attachment.html>

From even.rouault at mines-paris.org  Thu Feb 13 13:20:52 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 13 Feb 2014 22:20:52 +0100
Subject: [gdal-dev] R bindings
In-Reply-To: <CANnL8gr7_N_ULkycP2JbobdGYZVQj7qs18=c5_QO-vxrNo1bfQ@mail.gmail.com>
References: <CANnL8gpcihs1uh-19miUkLD8giez4UM7Y4SteJtB4jRQuEu-3g@mail.gmail.com>
	<CANnL8gr7_N_ULkycP2JbobdGYZVQj7qs18=c5_QO-vxrNo1bfQ@mail.gmail.com>
Message-ID: <201402132220.52625.even.rouault@mines-paris.org>

Le jeudi 13 f?vrier 2014 22:17:40, Tim Keitt a ?crit :
> On Thu, Feb 13, 2014 at 12:55 PM, Tim Keitt <tkeitt at utexas.edu> wrote:
> > I've been updating my R bindings to GDAL/OGR. The repo is at
> > https://github.com/thk686/rgdal2.
> > 
> > There is still lots to do and this might make a good GSOC project.
> 
> In case there is any confusion (I've received one such email), I should
> mention that I am the original author of the current rgdal package on CRAN
> and this is a long-overdue rewrite that covers much of OGR as well.

Tim,

You might want to update information on 
http://trac.osgeo.org/gdal/wiki/GdalOgrInR

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From bishop.dev at gmail.com  Thu Feb 13 13:22:54 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Fri, 14 Feb 2014 01:22:54 +0400
Subject: [gdal-dev]  GSoC'14
Message-ID: <52FD37AE.3030901@gmail.com>

Hi All,

Recently I received a reminder from Hamish. Quoted here:

    a reminder for any projects wishing to participate in OSGeo's Google
    Summer of Code 2014: we need your ideas pages up and
    fully QA'd ASAP! We submit our org application tomorrow, and it will
    be assessed by Google early next week. They've repeatedly stated that
    the ideas pages are amongst the most important thing they look at, and
    the previous good-stead orgs have been rejected due to slack ideas
    pages.

    So far we only have links to ideas from GRASS, QGIS, pgRouting, and
    PyWPS. Last year we had 13 more projects than that involved, so I
    know there are more of you out there!


    Also Google wishes to know ahead of time how many mentors we have
    lined up to help, so please add mentor names and how-to-contact info
    to each idea in your ideas pages where you can, &/or say hello on this
    list or the publicsoc at lists.osgeo.org  one.


    thanks,
    Hamish & the OSGeo GSoC 2014 admin team

I upgrade GSoC page in WiKi: http://trac.osgeo.org/gdal/wiki/SummerOfCode

We need some new ideas and mentors/co-mentors. It seems to me this is 
very urgent.
Maybe some activity in melange needed.

Also Hamish wrote:

    thanks, GDAL is now listed on the main osgeo ideas list. Could you ask
    the GDAL team to perhaps add some more details to the individual
    ideas? One sentence really isn't enough:

    http://en.flossmanuals.net/GSoCMentoring/making-your-ideas-page/

    """
    Making Your Ideas Page

    It all begins with the "Ideas Page". This is where you compile a list
    of possible summer projects for your organization. The Ideas Page is a
    major piece of your organization's application to Google. It also
    serves as a recruiting and selection tool for students and mentors
    alike.

    Depending on how your organization operates, the source of material
    for your Ideas Page may come from an existing list of projects
    maintained by your community year-round, from potential mentors as
    they are recruited, or from the org admin. Regardless of how it is
    generated, an Ideas Page should have the following:

    * Brief descriptions of projects that can be completed in about 12 weeks.
    * For each project, a list of prerequisites, description of
    programming skills needed and estimation of difficulty level.
    * A list of potential mentors.

    The best pages include links to more detailed descriptions and related
    materials for each project. They might even include actual use cases!

    Keep in mind that this page is often the first view of your
    organization by Google and potential student applicants. A link to
    your bug tracker does not an Ideas Page make. Put your best foot
    forward. In addition to a basic list, you might also consider
    providing links to relevant resources for mentors and students,
    particular FAQ entries, the timeline, etc. You might include a section
    on communication, giving specific advice on which mailing lists,
    channels and emails to use and how to use them. If your organization
    puts together an application template for students, you should include
    that on your page as well. Think of your Ideas Page as the GSoC portal
    to your organization.
    """


-- 
Best regards,
     Dmitry

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140214/9e4b763c/attachment.html>

From even.rouault at mines-paris.org  Thu Feb 13 13:53:05 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 13 Feb 2014 22:53:05 +0100
Subject: [gdal-dev] GSoC'14
In-Reply-To: <52FD37AE.3030901@gmail.com>
References: <52FD37AE.3030901@gmail.com>
Message-ID: <201402132253.05931.even.rouault@mines-paris.org>

> I upgrade GSoC page in WiKi: http://trac.osgeo.org/gdal/wiki/SummerOfCode
> 
> We need some new ideas and mentors/co-mentors. It seems to me this is
> very urgent.

Thanks Dmitriy for taking the lead on this ! I've added a few precisions in 
some ideas and listed myself as a possible mentor in the holes.


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From chaitanya.ch at gmail.com  Thu Feb 13 20:46:00 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri, 14 Feb 2014 10:16:00 +0530
Subject: [gdal-dev] How to exploit the spatial index (*.qix) file for
	spatial filtering?
In-Reply-To: <30895516.107053.1392327763874.JavaMail.nabble@alf.nabble.com>
References: <30895516.107053.1392327763874.JavaMail.nabble@alf.nabble.com>
Message-ID: <CAMKgpOZ0xWvrn7sN1xvGrdyWH=426rzszxXL0Aibwpu=WAuxFw@mail.gmail.com>

Chuiqing,

The OGR Shapefile driver supports spatial indexing through qix files. To
explicitly create a spatial index use the Create Index command:

CREATE SPATIAL INDEX ON tablename [DEPTH N]

Depth can range from 1 to 12. You can issue the SQL command using ogrinfo.

ogrinfo -sql 'CREATE SPATIAL INDEX ON shapefilename [DEPTH N]'
path/to/shapefile/directory

http://www.gdal.org/ogr/drv_shapefile.html -> Spatial and Attribute Indexing.



On Fri, Feb 14, 2014 at 3:12 AM, <chqzeng at gmail.com> wrote:

> Hi chaitanya_ch,
> I know you are an expert on this, I want to know how can I use GDAL
> library to implemented qix reading and using in spatial filtering.
> I have many large shape files in Gigbyte level, they are very slow when
> navigating in my app. I want to use *.qix file through GDAL library to
> accelerate it.
>
> How can I do that?
> Thank  you,
>
> C. Zeng
>
>
> _____________________________________
> Sent from http://osgeo-org.1560.x6.nabble.com
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140214/d62837d1/attachment-0001.html>

From chaitanya.ch at gmail.com  Thu Feb 13 21:39:05 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri, 14 Feb 2014 11:09:05 +0530
Subject: [gdal-dev] How to exploit the spatial index (*.qix) file for
	spatial filtering?
In-Reply-To: <CABNxGA07Kz9r2GeA-MdEJ+YgAiC7dmZcQD-NOtt+v63z89Mhww@mail.gmail.com>
References: <30895516.107053.1392327763874.JavaMail.nabble@alf.nabble.com>
	<CAMKgpOZ0xWvrn7sN1xvGrdyWH=426rzszxXL0Aibwpu=WAuxFw@mail.gmail.com>
	<CABNxGA07Kz9r2GeA-MdEJ+YgAiC7dmZcQD-NOtt+v63z89Mhww@mail.gmail.com>
Message-ID: <CAMKgpOZZPur8nzLEx1WZApx=boRLkKH7hOoLs6tTe9+UCiW6Dw@mail.gmail.com>

Chuiqing,

You can create an index through SQL. This is the preferred method even if
you stick to the shapefile format for your vector data.

OGRDataSource::ExecuteSQL()

OGR's Shapefile driver supports these SQL commands among others:
CREATE SPATIAL INDEX ON layer_name [DEPTH n]
DROP SPATIAL INDEX ON layer_name
REPACK layer_name
RECOMPUTE EXTENT ON layer_name



On Fri, Feb 14, 2014 at 10:56 AM, C. Zeng <chqzeng at gmail.com> wrote:

> Hi Chaitanya,
>
> Thank you for your response,
> I know I can do this through GDAL binary, and my question is: how can I
> integrate this function into my code?
>
> I have a platform like QGIS, I would like the program itself have the
> ability to create and load .qix file. For example, when I open the .shp
> file, I can detect whether there is .qix, if not then create a new qix file;
> When the user zoom the map window, it will filter the map content via the
> qix file to accelerate the searching.
> Does GDAL/OGR has similar functions/classes, something like
> OGRSFDriverRegistrar::Createqix(savepath),
> OGRSFDriverRegistrar::Loadqix(path),to open and use qix files?
>
>
> Thank you,
>
> Chuiqing,
>
>
> On Thu, Feb 13, 2014 at 11:46 PM, Chaitanya kumar CH <
> chaitanya.ch at gmail.com> wrote:
>
>> Chuiqing,
>>
>> The OGR Shapefile driver supports spatial indexing through qix files. To
>> explicitly create a spatial index use the Create Index command:
>>
>> CREATE SPATIAL INDEX ON tablename [DEPTH N]
>>
>> Depth can range from 1 to 12. You can issue the SQL command using ogrinfo.
>>
>> ogrinfo -sql 'CREATE SPATIAL INDEX ON shapefilename [DEPTH N]' path/to/shapefile/directory
>>
>> http://www.gdal.org/ogr/drv_shapefile.html -> Spatial and Attribute Indexing.
>>
>>
>>
>> On Fri, Feb 14, 2014 at 3:12 AM, <chqzeng at gmail.com> wrote:
>>
>>> Hi chaitanya_ch,
>>> I know you are an expert on this, I want to know how can I use GDAL
>>> library to implemented qix reading and using in spatial filtering.
>>> I have many large shape files in Gigbyte level, they are very slow when
>>> navigating in my app. I want to use *.qix file through GDAL library to
>>> accelerate it.
>>>
>>> How can I do that?
>>> Thank  you,
>>>
>>> C. Zeng
>>>
>>>
>>> _____________________________________
>>> Sent from http://osgeo-org.1560.x6.nabble.com
>>>
>>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140214/5de8d651/attachment.html>

From bishop.dev at gmail.com  Fri Feb 14 00:55:27 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Fri, 14 Feb 2014 12:55:27 +0400
Subject: [gdal-dev] How to exploit the spatial index (*.qix) file for
 spatial filtering?
In-Reply-To: <CAMKgpOZZPur8nzLEx1WZApx=boRLkKH7hOoLs6tTe9+UCiW6Dw@mail.gmail.com>
References: <30895516.107053.1392327763874.JavaMail.nabble@alf.nabble.com>	<CAMKgpOZ0xWvrn7sN1xvGrdyWH=426rzszxXL0Aibwpu=WAuxFw@mail.gmail.com>	<CABNxGA07Kz9r2GeA-MdEJ+YgAiC7dmZcQD-NOtt+v63z89Mhww@mail.gmail.com>
	<CAMKgpOZZPur8nzLEx1WZApx=boRLkKH7hOoLs6tTe9+UCiW6Dw@mail.gmail.com>
Message-ID: <52FDD9FF.2070207@gmail.com>

Hi,

The Shape driver work with qix file internally (speed up spatial 
filters). You can find if qix file exist with cpl function: CPLCheckForFile
Also you can create own QuadTree with: CPLQuadTreeCreate

Best regards,
     Dmitry

14.02.2014 9:39, Chaitanya kumar CH ?????:
> Chuiqing,
>
> You can create an index through SQL. This is the preferred method even 
> if you stick to the shapefile format for your vector data.
>
> OGRDataSource::ExecuteSQL()
>
> OGR's Shapefile driver supports these SQL commands among others:
> CREATE SPATIAL INDEX ON layer_name [DEPTH n]
> DROP SPATIAL INDEX ON layer_name
> REPACK layer_name
> RECOMPUTE EXTENT ON layer_name
>
>
>
> On Fri, Feb 14, 2014 at 10:56 AM, C. Zeng <chqzeng at gmail.com 
> <mailto:chqzeng at gmail.com>> wrote:
>
>     Hi Chaitanya,
>
>     Thank you for your response,
>     I know I can do this through GDAL binary, and my question is: how
>     can I integrate this function into my code?
>
>     I have a platform like QGIS, I would like the program itself have
>     the ability to create and load .qix file. For example, when I open
>     the .shp file, I can detect whether there is .qix, if not then
>     create a new qix file;
>     When the user zoom the map window, it will filter the map content
>     via the qix file to accelerate the searching.
>     Does GDAL/OGR has similar functions/classes, something like
>     OGRSFDriverRegistrar::Createqix(savepath),
>     OGRSFDriverRegistrar::Loadqix(path),to open and use qix files?
>
>
>     Thank you,
>
>     Chuiqing,
>
>
>     On Thu, Feb 13, 2014 at 11:46 PM, Chaitanya kumar CH
>     <chaitanya.ch at gmail.com <mailto:chaitanya.ch at gmail.com>> wrote:
>
>         Chuiqing,
>
>         The OGR Shapefile driver supports spatial indexing through qix
>         files. To explicitly create a spatial index use the Create
>         Index command:
>
>         CREATE SPATIAL INDEX ON tablename [DEPTH N]
>
>         Depth can range from 1 to 12. You can issue the SQL command using ogrinfo.
>
>         ogrinfo -sql 'CREATE SPATIAL INDEX ON shapefilename [DEPTH N]' path/to/shapefile/directory
>
>         http://www.gdal.org/ogr/drv_shapefile.html  -> Spatial and Attribute Indexing.
>
>
>
>         On Fri, Feb 14, 2014 at 3:12 AM, <chqzeng at gmail.com
>         <mailto:chqzeng at gmail.com>> wrote:
>
>             Hi chaitanya_ch,
>             I know you are an expert on this, I want to know how can I
>             use GDAL library to implemented qix reading and using in
>             spatial filtering.
>             I have many large shape files in Gigbyte level, they are
>             very slow when navigating in my app. I want to use *.qix
>             file through GDAL library to accelerate it.
>
>             How can I do that?
>             Thank  you,
>
>             C. Zeng
>
>
>             _____________________________________
>             Sent from http://osgeo-org.1560.x6.nabble.com
>
>
>
>
>         -- 
>         Best regards,
>         Chaitanya kumar CH.
>
>         +91-9494447584 <tel:%2B91-9494447584>
>         17.2416N 80.1426E
>
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140214/c00615b3/attachment.html>

From Roger.Bivand at nhh.no  Fri Feb 14 01:06:33 2014
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri, 14 Feb 2014 09:06:33 +0000 (UTC)
Subject: [gdal-dev] R bindings
References: <CANnL8gpcihs1uh-19miUkLD8giez4UM7Y4SteJtB4jRQuEu-3g@mail.gmail.com>
	<CANnL8gr7_N_ULkycP2JbobdGYZVQj7qs18=c5_QO-vxrNo1bfQ@mail.gmail.com>
	<201402132220.52625.even.rouault@mines-paris.org>
Message-ID: <loom.20140214T095948-883@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Le jeudi 13 f?vrier 2014 22:17:40, Tim Keitt a ?crit :
> > On Thu, Feb 13, 2014 at 12:55 PM, Tim Keitt <tkeitt <at> utexas.edu> wrote:
> > > I've been updating my R bindings to GDAL/OGR. The repo is at
> > > https://github.com/thk686/rgdal2.
> > > 
> > > There is still lots to do and this might make a good GSOC project.
> > 
> > In case there is any confusion (I've received one such email), I should
> > mention that I am the original author of the current rgdal package on CRAN
> > and this is a long-overdue rewrite that covers much of OGR as well.
> 
> Tim,
> 
> You might want to update information on 
> http://trac.osgeo.org/gdal/wiki/GdalOgrInR

Even,

It is fair to say that Tim's rgdal2 could be to rgdal as GDAL 2.0 is to GDAL
1.*, so rgdal in its present form isn't being replaced, but isn't going to
receive development effort other than keeping it running - too many things
depend on it. I've just posted some points on R-sig-geo:

https://stat.ethz.ch/pipermail/r-sig-geo/2014-February/020409.html

summarised as points and questions to Tim:

Your choice of Rcpp is one that the extension of R to include reference
classes recently, provoked by Rcpp, makes possible and attractive.

Would you prefer to use this list for postings with regard to rgdal2, or
gdal-dev, the wiki on the github repository, or some alternative?

Would you consider perhaps aligning rgdal2 with GDAL 2.0, rather than the
GDAL 1.* series?

This would give rgdal2 the advantage of being ready when GDAL 2 is ready,
and puts GDAL 1.* and rgdal in "maintenance mode" while GDAL 1.* is still
with us.

Roger

> 
> Even
> 





From siebe at hydroconsult.nl  Fri Feb 14 01:37:00 2014
From: siebe at hydroconsult.nl (Siebe Bosch)
Date: Fri, 14 Feb 2014 10:37:00 +0100
Subject: [gdal-dev] Gdal_translate won't crop VRT-file
In-Reply-To: <ldipta$v42$2@ger.gmane.org>
References: <52FCACF4.2000101@hydroconsult.nl> <ldipta$v42$2@ger.gmane.org>
Message-ID: <52FDE3BC.6070806@hydroconsult.nl>

Dear Joost,

Yes, the extents are as follows:

upper left: 136000, 541250
lower right: 198000, 473750

So as you can see, my crop extent falls within the boundaries of the VRT 
file

Kind regards,
Siebe



On 13-02-14 16:49, Andre Joost wrote:
> Am 13.02.2014 12:31, schrieb Siebe Bosch:
>
>>
>>
>>
>> Any ideas?
>>
>
> Can you add what gdalinfo reports as extent of your vrt file?
>
> Greetings,
> Andr? Joost
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
---------------------------------------------
Hydroconsult
Lulofsstraat 55, unit 47
2521 AL Den Haag
The Netherlands

web: http://www.hydroconsult.nl
e-mail: siebe at hydroconsult.nl
phone: +31(0)70 250 0580
mobile: +31(0)6 17 682 689
---------------------------------------------
Aangesloten bij WaterFocus, de co?peratie van
zelfstandige professionals in het waterbeheer


From thomas at silentwings.no  Fri Feb 14 03:47:17 2014
From: thomas at silentwings.no (Thomas Sevaldrud)
Date: Fri, 14 Feb 2014 12:47:17 +0100
Subject: [gdal-dev] Crash when using custom error handler
Message-ID: <CAJSDX1jLmY9MP+A92eg_OWUbiV7k3D2DENouVsfbQjE60t6Cew@mail.gmail.com>

Hi,

I am having a very strange issue when trying to use a custom error handler
in GDAL on windows.

The following simple example illustrates it:

#include <cpl_error.h>

#include <iostream>


using namespace std;


static void logGDALError(CPLErr eErrClass, int err_no, const char *msg)

{

    cerr << "GDAL Error: " << msg << endl;

}


int main(int argc, char *argv[])

{

    cerr << "Begin" << endl;


    CPLSetErrorHandler((CPLErrorHandler)logGDALError);

    CPLError(CE_Warning, 0, "Installed error handler");


    cerr << "End" << endl;

}


This code crashes immediately after writing out the message "Installed
error handler".

Unhandled exception at 0x7787ea3b in GDALTest.exe: 0xC0000005: Access
violation writing location 0x00000009.

Both GDAL and the test program are compiled with VS2010 in 32-bit mode. I
have also tried with VS2012 with the same result. I've tried with GDAL
1.9.2 and 1.10.1.

I used the supplied makefiles to compile GDAL and everything else seems to
work OK. I.e I use the GDAL API successfully to read and write files.

Any ideas?

- Thomas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140214/91fdbd88/attachment.html>

From even.rouault at mines-paris.org  Fri Feb 14 03:51:43 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Feb 2014 12:51:43 +0100
Subject: [gdal-dev] Crash when using custom error handler
In-Reply-To: <CAJSDX1jLmY9MP+A92eg_OWUbiV7k3D2DENouVsfbQjE60t6Cew@mail.gmail.com>
References: <CAJSDX1jLmY9MP+A92eg_OWUbiV7k3D2DENouVsfbQjE60t6Cew@mail.gmail.com>
Message-ID: <1392378703.52fe034f31230@imp.free.fr>

Thomas,

> static void logGDALError(CPLErr eErrClass, int err_no, const char *msg)

--> try inserting CPL_STDCALL, so :

static void CPL_STDCALL logGDALError(CPLErr eErrClass, int err_no, const char
*msg)


Even


From thomas at silentwings.no  Fri Feb 14 04:03:50 2014
From: thomas at silentwings.no (Thomas Sevaldrud)
Date: Fri, 14 Feb 2014 13:03:50 +0100
Subject: [gdal-dev] Crash when using custom error handler
In-Reply-To: <1392378703.52fe034f31230@imp.free.fr>
References: <CAJSDX1jLmY9MP+A92eg_OWUbiV7k3D2DENouVsfbQjE60t6Cew@mail.gmail.com>
	<1392378703.52fe034f31230@imp.free.fr>
Message-ID: <CAJSDX1iAMOMQt0HhTFP8sSn+LvGCJog5Mto9TB1r8KGr=h3PkQ@mail.gmail.com>

Ah, genious! It worked perfectly :-)

Thanks a lot!

- Thomas


On Fri, Feb 14, 2014 at 12:51 PM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Thomas,
>
> > static void logGDALError(CPLErr eErrClass, int err_no, const char *msg)
>
> --> try inserting CPL_STDCALL, so :
>
> static void CPL_STDCALL logGDALError(CPLErr eErrClass, int err_no, const
> char
> *msg)
>
>
> Even
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140214/4fc848aa/attachment.html>

From jukka.rahkonen at mmmtike.fi  Fri Feb 14 05:12:04 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 14 Feb 2014 13:12:04 +0000 (UTC)
Subject: [gdal-dev] GSoC'14
References: <52FD37AE.3030901@gmail.com>
	<201402132253.05931.even.rouault@mines-paris.org>
Message-ID: <loom.20140214T141103-591@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> > I upgrade GSoC page in WiKi: http://trac.osgeo.org/gdal/wiki/SummerOfCode
> > 
> > We need some new ideas and mentors/co-mentors. It seems to me this is
> > very urgent.
> 
> Thanks Dmitriy for taking the lead on this ! I've added a few precisions in 
> some ideas and listed myself as a possible mentor in the holes.

How about GDAL raster driver for Geopackage, would it suit as GSoC'14 idea?

-Jukka Rahkonen-


From bishop.dev at gmail.com  Fri Feb 14 05:38:01 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Fri, 14 Feb 2014 17:38:01 +0400
Subject: [gdal-dev] GSoC'14
In-Reply-To: <loom.20140214T141103-591@post.gmane.org>
References: <52FD37AE.3030901@gmail.com>	<201402132253.05931.even.rouault@mines-paris.org>
	<loom.20140214T141103-591@post.gmane.org>
Message-ID: <52FE1C39.8060007@gmail.com>

Hi Jukka,

I think this is a good idea for GSoC.
Does the raster driver for Geopackage differs from rasterlite 
(http://gdal.org/frmt_rasterlite.html)?

Best regards,
     Dmitry

14.02.2014 17:12, Jukka Rahkonen ?????:
> Even Rouault <even.rouault <at> mines-paris.org> writes:
>
>>> I upgrade GSoC page in WiKi: http://trac.osgeo.org/gdal/wiki/SummerOfCode
>>>
>>> We need some new ideas and mentors/co-mentors. It seems to me this is
>>> very urgent.
>> Thanks Dmitriy for taking the lead on this ! I've added a few precisions in
>> some ideas and listed myself as a possible mentor in the holes.
> How about GDAL raster driver for Geopackage, would it suit as GSoC'14 idea?
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From even.rouault at mines-paris.org  Fri Feb 14 05:49:10 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Feb 2014 14:49:10 +0100
Subject: [gdal-dev] GSoC'14
In-Reply-To: <52FE1C39.8060007@gmail.com>
References: <52FD37AE.3030901@gmail.com>
	<201402132253.05931.even.rouault@mines-paris.org>
	<loom.20140214T141103-591@post.gmane.org>
	<52FE1C39.8060007@gmail.com>
Message-ID: <1392385750.52fe1ed6aa900@imp.free.fr>

Selon Dmitriy Baryshnikov <bishop.dev at gmail.com>:

> Hi Jukka,
>
> I think this is a good idea for GSoC.
> Does the raster driver for Geopackage differs from rasterlite
> (http://gdal.org/frmt_rasterlite.html)?

Yes, there are differencies in the data model, but that could serve as an
inspiration. GeoPackage raster has also some similitaries with MBTILES (for
which we have a driver too).

Even







From andre+joost at nurfuerspam.de  Fri Feb 14 07:18:19 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 14 Feb 2014 16:18:19 +0100
Subject: [gdal-dev] Gdal_translate won't crop VRT-file
In-Reply-To: <52FDE3BC.6070806@hydroconsult.nl>
References: <52FCACF4.2000101@hydroconsult.nl> <ldipta$v42$2@ger.gmane.org>
	<52FDE3BC.6070806@hydroconsult.nl>
Message-ID: <ldldd9$s31$1@ger.gmane.org>

Am 14.02.2014 10:37, schrieb Siebe Bosch:
> Dear Joost,
>
> Yes, the extents are as follows:
>
> upper left: 136000, 541250
> lower right: 198000, 473750
>
> So as you can see, my crop extent falls within the boundaries of the VRT
> file
>

I would agree for a "normal" raster. But a vrt can contain data in 
another projection, making the usuable area non-rectangular.

Without looking at the data itself it is hard to say what goes wrong. Is 
ist possible to make the data available online? Or send it by mail?


Greetings,
Andr? Joost



From tkeitt at utexas.edu  Fri Feb 14 08:36:01 2014
From: tkeitt at utexas.edu (Tim Keitt)
Date: Fri, 14 Feb 2014 10:36:01 -0600
Subject: [gdal-dev] R bindings
In-Reply-To: <loom.20140214T095948-883@post.gmane.org>
References: <CANnL8gpcihs1uh-19miUkLD8giez4UM7Y4SteJtB4jRQuEu-3g@mail.gmail.com>
	<CANnL8gr7_N_ULkycP2JbobdGYZVQj7qs18=c5_QO-vxrNo1bfQ@mail.gmail.com>
	<201402132220.52625.even.rouault@mines-paris.org>
	<loom.20140214T095948-883@post.gmane.org>
Message-ID: <CANnL8gqnSTzSjv4cX3evrQ9o=hZa9Ma=iLh9xQL7ZbSn-wbmug@mail.gmail.com>

On Fri, Feb 14, 2014 at 3:06 AM, Roger Bivand <Roger.Bivand at nhh.no> wrote:

> https://stat.ethz.ch/pipermail/r-sig-geo/2014-February/020409.html
>
> summarised as points and questions to Tim:
>
> Your choice of Rcpp is one that the extension of R to include reference
> classes recently, provoked by Rcpp, makes possible and attractive.
>
> Would you prefer to use this list for postings with regard to rgdal2, or
> gdal-dev, the wiki on the github repository, or some alternative?
>
> Would you consider perhaps aligning rgdal2 with GDAL 2.0, rather than the
> GDAL 1.* series?
>
> This would give rgdal2 the advantage of being ready when GDAL 2 is ready,
> and puts GDAL 1.* and rgdal in "maintenance mode" while GDAL 1.* is still
> with us.


I've replied over there.

THK


-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140214/ce8ea934/attachment-0001.html>

From tkeitt at utexas.edu  Fri Feb 14 08:36:51 2014
From: tkeitt at utexas.edu (Tim Keitt)
Date: Fri, 14 Feb 2014 10:36:51 -0600
Subject: [gdal-dev] R bindings
In-Reply-To: <201402132220.52625.even.rouault@mines-paris.org>
References: <CANnL8gpcihs1uh-19miUkLD8giez4UM7Y4SteJtB4jRQuEu-3g@mail.gmail.com>
	<CANnL8gr7_N_ULkycP2JbobdGYZVQj7qs18=c5_QO-vxrNo1bfQ@mail.gmail.com>
	<201402132220.52625.even.rouault@mines-paris.org>
Message-ID: <CANnL8grd0Kf2HeAb-f=4DybcWdanZvoZzGsAVfrVMnoGgkr-eQ@mail.gmail.com>

On Thu, Feb 13, 2014 at 3:20 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le jeudi 13 f?vrier 2014 22:17:40, Tim Keitt a ?crit :
> > On Thu, Feb 13, 2014 at 12:55 PM, Tim Keitt <tkeitt at utexas.edu> wrote:
> > > I've been updating my R bindings to GDAL/OGR. The repo is at
> > > https://github.com/thk686/rgdal2.
> > >
> > > There is still lots to do and this might make a good GSOC project.
> >
> > In case there is any confusion (I've received one such email), I should
> > mention that I am the original author of the current rgdal package on
> CRAN
> > and this is a long-overdue rewrite that covers much of OGR as well.
>
> Tim,
>
> You might want to update information on
> http://trac.osgeo.org/gdal/wiki/GdalOgrInR


It appears I have an osgeo user id, but I don't know the password.

THK



>
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>



-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140214/5b6023ac/attachment.html>

From jwill222 at hotmail.com  Fri Feb 14 12:02:42 2014
From: jwill222 at hotmail.com (jwill222)
Date: Fri, 14 Feb 2014 12:02:42 -0800 (PST)
Subject: [gdal-dev] GDAL WMS In C#
Message-ID: <1392408162445-5103908.post@n6.nabble.com>

I'm currently trying to grab a map image from a wms using gdal and save it to
my local machine. The call that I'm trying to replicate inside of my wms xml
file is ->
http://geoint.lmic.state.mn.us/cgi-bin/mncomp?request=GetMap&service=WMS&bbox=-102,30,-85,51&version=1.1.1&layers=mncomp&width=1000&height=1000&SRS=EPSG:4326

Here is what my XML looks like: 
<GDAL_WMS>
  <Service name ="WMS">
    <Version>1.1.1</Version>
    <ServerUrl>geoint.lmic.state.mn.us/cgi-bin/mncomp?</ServerUrl>
    <ImageFormat>image/jpeg</ImageFormat>
    <SRS>EPSG:4326</SRS>
    <Layers>mncomp</Layers>
    <Styles></Styles>
  </Service>
  <DataWindow>
    <Projection>EPSG:4326</Projection>
    <UpperLeftX>-102</UpperLeftX>
    <UpperLeftY>30</UpperLeftY>
    <LowerRightX>-85</LowerRightX>
    <LowerRightY>51</LowerRightY>
    <SizeX>1000</SizeX>
    <SizeY>1000</SizeY>
  </DataWindow>
</GDAL_WMS>


Here is what my code looks like :

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using OSGeo.GDAL;
using OSGeo.OGR;
using OSGeo.OSR;
using System.IO;
using System.Drawing.Imaging;
using System.Xml;
using GDALRD;

namespace GDAL_TEST_WMS
{
    public partial class Form1 : Form
    {

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            Ogr.RegisterAll();
            Gdal.AllRegister();

            XmlDocument doc = new XmlDocument();
            doc.Load(@"./WMS_Description_File.xml");

            Dataset ds = Gdal.Open(doc.InnerXml, Access.GA_ReadOnly);
            string outfile = "./test.jpeg";
            OSGeo.GDAL.Driver drive = Gdal.GetDriverByName("JPEG");
            Dataset dso = drive.CreateCopy(outfile, ds, 0, null, null,
null);
        }
    }
}


However I get this error :

<http://osgeo-org.1560.x6.nabble.com/file/n5103908/Exception.png> 

Any Suggestions. BTW I am really new to GDAL. 




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-WMS-In-C-tp5103908.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mathuin at gmail.com  Fri Feb 14 12:20:30 2014
From: mathuin at gmail.com (John Twilley)
Date: Fri, 14 Feb 2014 12:20:30 -0800
Subject: [gdal-dev] GSoC'14
In-Reply-To: <1392385750.52fe1ed6aa900@imp.free.fr>
References: <52FD37AE.3030901@gmail.com>
	<201402132253.05931.even.rouault@mines-paris.org>
	<loom.20140214T141103-591@post.gmane.org>
	<52FE1C39.8060007@gmail.com> <1392385750.52fe1ed6aa900@imp.free.fr>
Message-ID: <CAEUMa-dtRNzOXBRF_h8ZpwYUantMcjjPN0=EEisaJcf6Kk1A9A@mail.gmail.com>

One idea I would like to see considered for GSoC would be completing the
GDAL API for Python to include all the functionality that currently exists
for C.  I wish I were experienced enough with the code base to mentor it,
though, so if it doesn't have a mentor I imagine that it can't happen.

Jack.

-- 
mathuin at gmail dot com


On Fri, Feb 14, 2014 at 5:49 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Selon Dmitriy Baryshnikov <bishop.dev at gmail.com>:
>
> > Hi Jukka,
> >
> > I think this is a good idea for GSoC.
> > Does the raster driver for Geopackage differs from rasterlite
> > (http://gdal.org/frmt_rasterlite.html)?
>
> Yes, there are differencies in the data model, but that could serve as an
> inspiration. GeoPackage raster has also some similitaries with MBTILES (for
> which we have a driver too).
>
> Even
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140214/6d9b618c/attachment.html>

From even.rouault at mines-paris.org  Fri Feb 14 12:23:23 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Feb 2014 21:23:23 +0100
Subject: [gdal-dev] GSoC'14
In-Reply-To: <CAEUMa-dtRNzOXBRF_h8ZpwYUantMcjjPN0=EEisaJcf6Kk1A9A@mail.gmail.com>
References: <52FD37AE.3030901@gmail.com> <1392385750.52fe1ed6aa900@imp.free.fr>
	<CAEUMa-dtRNzOXBRF_h8ZpwYUantMcjjPN0=EEisaJcf6Kk1A9A@mail.gmail.com>
Message-ID: <201402142123.23142.even.rouault@mines-paris.org>

Le vendredi 14 f?vrier 2014 21:20:30, John Twilley a ?crit :
> One idea I would like to see considered for GSoC would be completing the
> GDAL API for Python to include all the functionality that currently exists
> for C.  I wish I were experienced enough with the code base to mentor it,
> though, so if it doesn't have a mentor I imagine that it can't happen.

Not sure it will make a very attractive topic for a student... To which C API 
not available to Python are you thinking to ?

> 
> Jack.
> 
> > Selon Dmitriy Baryshnikov <bishop.dev at gmail.com>:
> > > Hi Jukka,
> > > 
> > > I think this is a good idea for GSoC.
> > > Does the raster driver for Geopackage differs from rasterlite
> > > (http://gdal.org/frmt_rasterlite.html)?
> > 
> > Yes, there are differencies in the data model, but that could serve as an
> > inspiration. GeoPackage raster has also some similitaries with MBTILES
> > (for which we have a driver too).
> > 
> > Even
> > 
> > 
> > 
> > 
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From mathuin at gmail.com  Fri Feb 14 12:33:36 2014
From: mathuin at gmail.com (John Twilley)
Date: Fri, 14 Feb 2014 12:33:36 -0800
Subject: [gdal-dev] GSoC'14
In-Reply-To: <201402142123.23142.even.rouault@mines-paris.org>
References: <52FD37AE.3030901@gmail.com> <1392385750.52fe1ed6aa900@imp.free.fr>
	<CAEUMa-dtRNzOXBRF_h8ZpwYUantMcjjPN0=EEisaJcf6Kk1A9A@mail.gmail.com>
	<201402142123.23142.even.rouault@mines-paris.org>
Message-ID: <CAEUMa-eCgVS_HMyVn6V9+75C3usQjHEs_+Yr2e1H6A5AkQbxxg@mail.gmail.com>

The specific C API that I am thinking about is the Warp API:
http://www.gdal.org/warptut.html

That page includes a number of performance enhancements which might also
make for potentially interesting work for a summer student.

Jack.

-- 
mathuin at gmail dot com


On Fri, Feb 14, 2014 at 12:23 PM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Le vendredi 14 f?vrier 2014 21:20:30, John Twilley a ?crit :
> > One idea I would like to see considered for GSoC would be completing the
> > GDAL API for Python to include all the functionality that currently
> exists
> > for C.  I wish I were experienced enough with the code base to mentor it,
> > though, so if it doesn't have a mentor I imagine that it can't happen.
>
> Not sure it will make a very attractive topic for a student... To which C
> API
> not available to Python are you thinking to ?
>
> >
> > Jack.
> >
> > > Selon Dmitriy Baryshnikov <bishop.dev at gmail.com>:
> > > > Hi Jukka,
> > > >
> > > > I think this is a good idea for GSoC.
> > > > Does the raster driver for Geopackage differs from rasterlite
> > > > (http://gdal.org/frmt_rasterlite.html)?
> > >
> > > Yes, there are differencies in the data model, but that could serve as
> an
> > > inspiration. GeoPackage raster has also some similitaries with MBTILES
> > > (for which we have a driver too).
> > >
> > > Even
> > >
> > >
> > >
> > >
> > >
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140214/90debdea/attachment.html>

From even.rouault at mines-paris.org  Fri Feb 14 12:54:56 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Feb 2014 21:54:56 +0100
Subject: [gdal-dev] GSoC'14
In-Reply-To: <CAEUMa-eCgVS_HMyVn6V9+75C3usQjHEs_+Yr2e1H6A5AkQbxxg@mail.gmail.com>
References: <52FD37AE.3030901@gmail.com>
	<201402142123.23142.even.rouault@mines-paris.org>
	<CAEUMa-eCgVS_HMyVn6V9+75C3usQjHEs_+Yr2e1H6A5AkQbxxg@mail.gmail.com>
Message-ID: <201402142154.56283.even.rouault@mines-paris.org>

Le vendredi 14 f?vrier 2014 21:33:36, John Twilley a ?crit :
> The specific C API that I am thinking about is the Warp API:
> http://www.gdal.org/warptut.html

Actually this is C++ API, not C. So a first step would be to C'ify it.

> 
> That page includes a number of performance enhancements which might also
> make for potentially interesting work for a summer student.

Are you thinking to the "Performance optimization" section ? Well, all those 
performance strategies are already implemented. This is just advice to users 
so they can get the best performance out of the warping algorithm.

> 
> Jack.
> 
> > wrote:
> > 
> > Le vendredi 14 f?vrier 2014 21:20:30, John Twilley a ?crit :
> > > One idea I would like to see considered for GSoC would be completing
> > > the GDAL API for Python to include all the functionality that
> > > currently
> > 
> > exists
> > 
> > > for C.  I wish I were experienced enough with the code base to mentor
> > > it, though, so if it doesn't have a mentor I imagine that it can't
> > > happen.
> > 
> > Not sure it will make a very attractive topic for a student... To which C
> > API
> > not available to Python are you thinking to ?
> > 
> > > Jack.
> > > 
> > > > Selon Dmitriy Baryshnikov <bishop.dev at gmail.com>:
> > > > > Hi Jukka,
> > > > > 
> > > > > I think this is a good idea for GSoC.
> > > > > Does the raster driver for Geopackage differs from rasterlite
> > > > > (http://gdal.org/frmt_rasterlite.html)?
> > > > 
> > > > Yes, there are differencies in the data model, but that could serve
> > > > as
> > 
> > an
> > 
> > > > inspiration. GeoPackage raster has also some similitaries with
> > > > MBTILES (for which we have a driver too).
> > > > 
> > > > Even
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > 
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From mathuin at gmail.com  Fri Feb 14 13:39:57 2014
From: mathuin at gmail.com (John Twilley)
Date: Fri, 14 Feb 2014 13:39:57 -0800
Subject: [gdal-dev] GSoC'14
In-Reply-To: <201402142154.56283.even.rouault@mines-paris.org>
References: <52FD37AE.3030901@gmail.com>
	<201402142123.23142.even.rouault@mines-paris.org>
	<CAEUMa-eCgVS_HMyVn6V9+75C3usQjHEs_+Yr2e1H6A5AkQbxxg@mail.gmail.com>
	<201402142154.56283.even.rouault@mines-paris.org>
Message-ID: <CAEUMa-fyb2iGetLzWriGQCtj5zJKWsuDiVdaeuOk+L3mMjYDhA@mail.gmail.com>

On Fri, Feb 14, 2014 at 12:54 PM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Le vendredi 14 f?vrier 2014 21:33:36, John Twilley a ?crit :
> > The specific C API that I am thinking about is the Warp API:
> > http://www.gdal.org/warptut.html
>
> Actually this is C++ API, not C. So a first step would be to C'ify it.
>

As long as the end result is the ability to use the Warp API in Python, I'm
happy. :-)  Not being able to do that is a little frustrating.



>
> >
> > That page includes a number of performance enhancements which might also
> > make for potentially interesting work for a summer student.
>
> Are you thinking to the "Performance optimization" section ? Well, all
> those
> performance strategies are already implemented. This is just advice to
> users
> so they can get the best performance out of the warping algorithm.
>

That's wonderful!  One less worry for users then.


>
> >
> > Jack.
> >
> > > wrote:
> > >
> > > Le vendredi 14 f?vrier 2014 21:20:30, John Twilley a ?crit :
> > > > One idea I would like to see considered for GSoC would be completing
> > > > the GDAL API for Python to include all the functionality that
> > > > currently
> > >
> > > exists
> > >
> > > > for C.  I wish I were experienced enough with the code base to mentor
> > > > it, though, so if it doesn't have a mentor I imagine that it can't
> > > > happen.
> > >
> > > Not sure it will make a very attractive topic for a student... To
> which C
> > > API
> > > not available to Python are you thinking to ?
> > >
> > > > Jack.
> > > >
> > > > > Selon Dmitriy Baryshnikov <bishop.dev at gmail.com>:
> > > > > > Hi Jukka,
> > > > > >
> > > > > > I think this is a good idea for GSoC.
> > > > > > Does the raster driver for Geopackage differs from rasterlite
> > > > > > (http://gdal.org/frmt_rasterlite.html)?
> > > > >
> > > > > Yes, there are differencies in the data model, but that could serve
> > > > > as
> > >
> > > an
> > >
> > > > > inspiration. GeoPackage raster has also some similitaries with
> > > > > MBTILES (for which we have a driver too).
> > > > >
> > > > > Even
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > > _______________________________________________
> > > > > gdal-dev mailing list
> > > > > gdal-dev at lists.osgeo.org
> > > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > > --
> > > Geospatial professional services
> > > http://even.rouault.free.fr/services.html
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>


Jack.
-- 
mathuin at gmail dot com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140214/752b8682/attachment-0001.html>

From sean at mapbox.com  Fri Feb 14 14:37:53 2014
From: sean at mapbox.com (Sean Gillies)
Date: Fri, 14 Feb 2014 15:37:53 -0700
Subject: [gdal-dev] What happens to pixel values > src_max under -scale?
Message-ID: <52FE9AC1.2000802@mapbox.com>

Hi all,

It seems that when gdal_translate scales e.g. -scale 0 6000 0 255, the 
values above 6000 also get set to 255. Can anyone confirm this for me? I 
don't see the destiny of those pixels explained in 
http://www.gdal.org/gdal_translate.html.

Thanks,

-- 
Sean Gillies
sean at mapbox.com

From even.rouault at mines-paris.org  Fri Feb 14 14:48:47 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 14 Feb 2014 23:48:47 +0100
Subject: [gdal-dev] What happens to pixel values > src_max under -scale?
In-Reply-To: <52FE9AC1.2000802@mapbox.com>
References: <52FE9AC1.2000802@mapbox.com>
Message-ID: <201402142348.47956.even.rouault@mines-paris.org>

Le vendredi 14 f?vrier 2014 23:37:53, Sean Gillies a ?crit :
> Hi all,
> 
> It seems that when gdal_translate scales e.g. -scale 0 6000 0 255, the
> values above 6000 also get set to 255. Can anyone confirm this for me?

It depnds. If the output type is Byte, then yes values will be clamped to 255 
(no other reasonable alternative). Otherwise values will just be multiplied by 
255 / 6000, so if 6000 is not the maximum value, the result value can be 
greater than 255.

> I
> don't see the destiny of those pixels explained in
> http://www.gdal.org/gdal_translate.html.
> 
> Thanks,

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From kyle at pobox.com  Sat Feb 15 09:44:54 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Sat, 15 Feb 2014 10:44:54 -0700
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <201402132214.20518.even.rouault@mines-paris.org>
References: <201402132214.20518.even.rouault@mines-paris.org>
Message-ID: <CAJ0mEz3B+16oqSjCCKLOG3BvHC=+xd9kcXY=E-=UH8LNnTeYog@mail.gmail.com>

Hi,  Just a few thoughts/questions...

On Thu, Feb 13, 2014 at 2:14 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Hi,
>
> I've confirmed my presence to the OSGeo Vienna code sprint (
> http://wiki.osgeo.org/wiki/Vienna_Code_Sprint_2014 ). Are there folks that
> will be there and indent doing some work on GDAL ? Any particular topics of
> interest ?
>
> It could be the opportunity to take a crack at some changes that have been
> mentionned for some time and are listed at
> http://trac.osgeo.org/gdal/wiki/GDAL20Changes
>
> We should decide how to manage the 2.0 transition. I think that the 2.0 number
> should be reserved as the opportunity of introducing breaking changes in the
> API / ABI. But this might take a long time to implement all that is listed
> above, so there's a risk we end up with a trunk that is never ready for
> release for years. Not a good thing.
> On the other hand, we could just be more modest and take breaking changes as
> they are introduced and raise the major version number (so the yearly version
> after 2.0 could be 3.0). This will require projects using GDAL to adapt
> multiple times.

How long would the stable branches be maintained?  Would we handle as
we do now, with one stable branch and one development branch, or would
we backport bug fixes to n branches (3.1, 2.4, etc)?  Would this
require maintaining 3 branches?  stable, trunk, and api_break?  Any
thoughts?

> An alternative would be to prepare the API for new features even if they are
> not implemented, but that's a difficult exercise and there's a risk that at
> implementation time, the API doesn't fit.
> Any thoughts ?
>
> Currently we have no such breakage in trunk so it could qualify as GDAL 1.11.
> Perhaps we should just release it as such for now before the bigger changes ?

Maybe release 1.11 soon, and take a crack at 2.0 changes before the
next release?  This would probably require a concerted effort from
developers or funders, as Even mentioned in regard to the sprint.

>
> Somes topics I can see for GDAL 2.0 that impact API/ABI :
> - well, the mythological unification of OGR driver model with GDAL driver
> model.
> - XYZM support
> - Curve geometries
> - 64 bit integer support

The 64-bit integer changes seem fairly straight forward.  I see XYZM
support up for GSoC again, maybe it'll get picked up.  I have no idea
what curve support would entail.

>
> Other possible structural changes :
> - Change of master version control system: switch to git / GitHub ?
> - New build system : cmake ?

What are the benefits here?  Is travis integration easier?  I believe
someone has a cmake port floating around on github, any comments
there?

>
> Of course all of this will more likely happen if contributors or funders show
> up !
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Regards,

-- 
Kyle

From even.rouault at mines-paris.org  Sat Feb 15 10:57:03 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 15 Feb 2014 19:57:03 +0100
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
	release plans, GDAL 2.0
In-Reply-To: <CAJ0mEz3B+16oqSjCCKLOG3BvHC=+xd9kcXY=E-=UH8LNnTeYog@mail.gmail.com>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<CAJ0mEz3B+16oqSjCCKLOG3BvHC=+xd9kcXY=E-=UH8LNnTeYog@mail.gmail.com>
Message-ID: <201402151957.03274.even.rouault@mines-paris.org>

Thanks for your thoughs Kyle. I expect more developers and PSC members to 
express theirs too.

> 
> How long would the stable branches be maintained?  Would we handle as
> we do now, with one stable branch and one development branch, or would
> we backport bug fixes to n branches (3.1, 2.4, etc)?  Would this
> require maintaining 3 branches?  stable, trunk, and api_break?  Any
> thoughts?

What would be the api_break branch, as opposed to trunk I mean ?
Maintaining 2 branches in addition to the development branch seems to be a bit 
too much work. Well, backporting is not that difficult generally, but releasing 
a version is an effort that takes some energy and time, so we would have likely 
difficulty in making the necessary releases. But anyone wanting to maintain a 
branch can do it, so there's no need to set that policy in stone.

> 
> > An alternative would be to prepare the API for new features even if they
> > are not implemented, but that's a difficult exercise and there's a risk
> > that at implementation time, the API doesn't fit.
> > Any thoughts ?
> > 
> > Currently we have no such breakage in trunk so it could qualify as GDAL
> > 1.11. Perhaps we should just release it as such for now before the
> > bigger changes ?
> 
> Maybe release 1.11 soon, and take a crack at 2.0 changes before the
> next release?  This would probably require a concerted effort from
> developers or funders, as Even mentioned in regard to the sprint.
> 
> > Somes topics I can see for GDAL 2.0 that impact API/ABI :
> > - well, the mythological unification of OGR driver model with GDAL driver
> > model.
> > - XYZM support
> > - Curve geometries
> > - 64 bit integer support
> 
> The 64-bit integer changes seem fairly straight forward.  I see XYZM
> support up for GSoC again, maybe it'll get picked up.  I have no idea
> what curve support would entail.

Well, new geometry types and enhancements in drivers that would support them 
(PostGIS, ...). And also likely adapt all existing drivers that have write 
support so they can deal with the new geometry types : ignore them, or take 
them into account.

> 
> > Other possible structural changes :
> > - Change of master version control system: switch to git / GitHub ?
> > - New build system : cmake ?
> 
> What are the benefits here?  > Is travis integration easier?

Well, I put that on the table since it is sometimes mentionned by developers, 
but the effort vs benefit ratio is not completely obvious for existing GDAL svn 
commiters.
git transition would be mainly to keep up with what developers are of will 
soon be familiar with. Someone pointed me recently that GitHub also exposed 
git repositories as subversion repositories (which I experimented a bit), so 
that could satisfy most developers. git has the benefit of easing porting 
patches between branches, and making contributions from casual developers 
easier. Since the git mirror already exists, the transition to github would 
essentially require porting the Trac database to Github tickets (we could 
benefit from MapServer experience that has done that move before)

> I believe
> someone has a cmake port floating around on github, any comments
> there?

The effort seems to have stalled. The benefit here would be the unification of 
the Unix and Windows makefiles, but the complexity of GDAL dependencies makes 
the porting effort rather repelling...

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From warmerdam at pobox.com  Sat Feb 15 11:38:27 2014
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 15 Feb 2014 11:38:27 -0800
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <201402132214.20518.even.rouault@mines-paris.org>
References: <201402132214.20518.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBfhBN19rAGDHK_rtsuqnzCWbv0vujmEB5nUd+n-5_XA6Q@mail.gmail.com>

On Thu, Feb 13, 2014 at 1:14 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

>
>
> Currently we have no such breakage in trunk so it could qualify as GDAL
> 1.11.
> Perhaps we should just release it as such for now before the bigger
> changes ?
>

Even,

I think that 2.0 could be kept for breaking changes, and that if we aren't
going to accomplish those big projects we should just aim for a 1.11
release.


>
> Somes topics I can see for GDAL 2.0 that impact API/ABI :
> - well, the mythological unification of OGR driver model with GDAL driver
> model.
> - XYZM support
> - Curve geometries
> - 64 bit integer support
>

I think the above could potentially justify a 2.0 release.  I think a
change to github or cmake do not because they don't affect applications
using GDAL.

Best regards,
Frank


> Other possible structural changes :
> - Change of master version control system: switch to git / GitHub ?
> - New build system : cmake ?
>
> Of course all of this will more likely happen if contributors or funders
> show
> up !
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140215/5da6e7fd/attachment.html>

From James.Evans at hill.af.mil  Sat Feb 15 11:40:47 2014
From: James.Evans at hill.af.mil (James_in_Utah)
Date: Sat, 15 Feb 2014 11:40:47 -0800 (PST)
Subject: [gdal-dev] Help needed using the worldwind minidriver
Message-ID: <1392493247650-5103996.post@n6.nabble.com>

Hi, 
Sorry if this is the wrong place to post this kind of question, but I don't
see a better place.  Is there a document that describes how to use the
minidrivers?  I'm not really sure what some of the tags mean in the sample
xml files.  My tile set that I'm trying to access has a LZTS of 9 degrees,
and I have folders for levels 0 - 5.  Below is the xml file I'm trying to
use.  When I try to do a gdal_translate on this, I can see that it knows the
X values for the 0 layer go from 0 - 39, but it is trying to access Y values
that don't exist.  Is there some guidance on how to determine the correct
value for these tags? 

Here is what I'm trying to use: 

<GDAL_WMS>  
  <Service name="WorldWind">  
    <Version>1</Version>  
    <ServerUrl>http://localhost/tile.aspx?</ServerUrl>  
    <Layer>WAC_2014</Layer>  
  </Service>  
  <DataWindow>  
    <UpperLeftx>-179.99995737418604000</UpperLeftx>  
    <UpperLefty>72.74087334096171300</UpperLefty>  
    <LowerRightx>179.99998301323333000</LowerRightx>  
    <LowerRighty>14.73066571091025200</LowerRighty>  
    <SizeX>327680</SizeX>  
    <SizeY>53248</SizeY>
    <TileLevel>4</TileLevel>  
  </DataWindow>> 
  <Projection>EPSG:4326</Projection>  
  <BlockSizeX>512</BlockSizeX>  
  <BlockSizeY>512</BlockSizeY>  
  <BandsCount>3</BandsCount>  
</GDAL_WMS> 


Additionally, I am using GDAL 1.9.0 that came with MS4W.  When I try
GDAL_translate using this XML, GDAL tries accessing level 0 X=0 thru 39,
which is correct, but it starts trying to access Y=5, which does not.  It
should start at Y=11, and go thru Y=18.  How do I get it to do that?  I'm
not sure what the <TileCountY> tag does, and if I'm supposed to be using it. 
Any suggestions would be appreciated. 
Thanks, 
James 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Help-needed-using-the-worldwind-minidriver-tp5103996.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From bishop.dev at gmail.com  Sat Feb 15 12:31:03 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Sun, 16 Feb 2014 00:31:03 +0400
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <201402151957.03274.even.rouault@mines-paris.org>
References: <201402132214.20518.even.rouault@mines-paris.org>	<CAJ0mEz3B+16oqSjCCKLOG3BvHC=+xd9kcXY=E-=UH8LNnTeYog@mail.gmail.com>
	<201402151957.03274.even.rouault@mines-paris.org>
Message-ID: <52FFCE87.5080404@gmail.com>

Hi,

As cmake4gdal developer I think there is no problem with cmake. By now 
we main code is cmaked, and deal only with some drivers (GDAL or OGR), 
which needed cmake scripts.
I make needed cmake scripts for drivers what I use in may work.

So, with some help we can do all cmake scripts rather fast.

The current implementation is here: 
https://github.com/nextgis/gdal-svn/tree/cmake4gdal and 
https://github.com/aashish24/gdal-svn/tree/cmake4gdal
The branches include not the latest GDAL repository commits, as they can 
include makefile chages, so there is some delay as I synchronize the 
branches.

Now there are scripts to:
1) all libraries - CPL, GDAL, OGR
2) apps - gdaladdo, gdalbuildvrt, gdalinfo, gdallocationinfo, gdalwarp, 
gdal_contour, gdal_grid, gdal_translate, ogr2ogr, ogrinfo, test_ogrsf
3) GDAL drivers - bmp, dimap, gif, tiff, hfa, iso8211, jpeg, map, mem, 
ozi, png, postgisraster, raw, saga, til, vrt, wms
4) OGR drivers - csv, dxf, generic, geojson, gml, gpx, kml, libkml, mem, 
mitab, mysql, pg, s57, shape, sqlite, sxf, vrt, wfs

Best regards,
     Dmitry

15.02.2014 22:57, Even Rouault ?????:
> Thanks for your thoughs Kyle. I expect more developers and PSC members to
> express theirs too.
>
>> How long would the stable branches be maintained?  Would we handle as
>> we do now, with one stable branch and one development branch, or would
>> we backport bug fixes to n branches (3.1, 2.4, etc)?  Would this
>> require maintaining 3 branches?  stable, trunk, and api_break?  Any
>> thoughts?
> What would be the api_break branch, as opposed to trunk I mean ?
> Maintaining 2 branches in addition to the development branch seems to be a bit
> too much work. Well, backporting is not that difficult generally, but releasing
> a version is an effort that takes some energy and time, so we would have likely
> difficulty in making the necessary releases. But anyone wanting to maintain a
> branch can do it, so there's no need to set that policy in stone.
>
>>> An alternative would be to prepare the API for new features even if they
>>> are not implemented, but that's a difficult exercise and there's a risk
>>> that at implementation time, the API doesn't fit.
>>> Any thoughts ?
>>>
>>> Currently we have no such breakage in trunk so it could qualify as GDAL
>>> 1.11. Perhaps we should just release it as such for now before the
>>> bigger changes ?
>> Maybe release 1.11 soon, and take a crack at 2.0 changes before the
>> next release?  This would probably require a concerted effort from
>> developers or funders, as Even mentioned in regard to the sprint.
>>
>>> Somes topics I can see for GDAL 2.0 that impact API/ABI :
>>> - well, the mythological unification of OGR driver model with GDAL driver
>>> model.
>>> - XYZM support
>>> - Curve geometries
>>> - 64 bit integer support
>> The 64-bit integer changes seem fairly straight forward.  I see XYZM
>> support up for GSoC again, maybe it'll get picked up.  I have no idea
>> what curve support would entail.
> Well, new geometry types and enhancements in drivers that would support them
> (PostGIS, ...). And also likely adapt all existing drivers that have write
> support so they can deal with the new geometry types : ignore them, or take
> them into account.
>
>>> Other possible structural changes :
>>> - Change of master version control system: switch to git / GitHub ?
>>> - New build system : cmake ?
>> What are the benefits here?  > Is travis integration easier?
> Well, I put that on the table since it is sometimes mentionned by developers,
> but the effort vs benefit ratio is not completely obvious for existing GDAL svn
> commiters.
> git transition would be mainly to keep up with what developers are of will
> soon be familiar with. Someone pointed me recently that GitHub also exposed
> git repositories as subversion repositories (which I experimented a bit), so
> that could satisfy most developers. git has the benefit of easing porting
> patches between branches, and making contributions from casual developers
> easier. Since the git mirror already exists, the transition to github would
> essentially require porting the Trac database to Github tickets (we could
> benefit from MapServer experience that has done that move before)
>
>> I believe
>> someone has a cmake port floating around on github, any comments
>> there?
> The effort seems to have stalled. The benefit here would be the unification of
> the Unix and Windows makefiles, but the complexity of GDAL dependencies makes
> the porting effort rather repelling...
>


From James.Evans at hill.af.mil  Sat Feb 15 21:40:27 2014
From: James.Evans at hill.af.mil (James_in_Utah)
Date: Sat, 15 Feb 2014 21:40:27 -0800 (PST)
Subject: [gdal-dev] Help needed using the worldwind minidriver
In-Reply-To: <1392493247650-5103996.post@n6.nabble.com>
References: <1392493247650-5103996.post@n6.nabble.com>
Message-ID: <1392529227686-5104020.post@n6.nabble.com>

I'm not sure why, but if I give it a <TileY> value of -185 it works.  I don't
understand the logic, but oh well.  



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Help-needed-using-the-worldwind-minidriver-tp5103996p5104020.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Sun Feb 16 03:36:07 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 16 Feb 2014 11:36:07 +0000 (UTC)
Subject: [gdal-dev] Is there documetation about filters and some python
	utilities?
Message-ID: <loom.20140216T121531-187@post.gmane.org>

Hi,

I was thinking that a possibility to run images through filters with GDAL
could be nice sometimes. Especially for visual work with aerial and
satellite images filters like "sharpen" of "unsharp mask"
http://en.wikipedia.org/wiki/Unsharp_masking are often very useful. But then
I found that kernel filters can already be used inside VRT files. Are there
usage examples with before-after comparison images somewhere in our
documentation? 

I also found that there are some python scripts included in
\gdal\bin\gdal\python\scripts at least in the gisinternals GDAL builds but
some scripts are not listed in http://gdal.org/gdal_utilities.html.  Is
there some other place where to find documentation about these scripts, for
example gdal_calc.py ? Some other than the sources, I mean.

-Jukka Rahkonen-


From kyle at pobox.com  Sun Feb 16 09:42:31 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Sun, 16 Feb 2014 10:42:31 -0700
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <201402151957.03274.even.rouault@mines-paris.org>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<CAJ0mEz3B+16oqSjCCKLOG3BvHC=+xd9kcXY=E-=UH8LNnTeYog@mail.gmail.com>
	<201402151957.03274.even.rouault@mines-paris.org>
Message-ID: <CAJ0mEz27Y1YvehRgpJQXHjS6tgxxQbeOxhJHUWC_f5A9jmeLGw@mail.gmail.com>

Even, thanks for the notes.

On Sat, Feb 15, 2014 at 11:57 AM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Thanks for your thoughs Kyle. I expect more developers and PSC members to
> express theirs too.
>
>>
>> How long would the stable branches be maintained?  Would we handle as
>> we do now, with one stable branch and one development branch, or would
>> we backport bug fixes to n branches (3.1, 2.4, etc)?  Would this
>> require maintaining 3 branches?  stable, trunk, and api_break?  Any
>> thoughts?
>
> What would be the api_break branch, as opposed to trunk I mean ?
> Maintaining 2 branches in addition to the development branch seems to be a bit
> too much work. Well, backporting is not that difficult generally, but releasing
> a version is an effort that takes some energy and time, so we would have likely
> difficulty in making the necessary releases. But anyone wanting to maintain a
> branch can do it, so there's no need to set that policy in stone.
>

Sorry, I chose poor wording, but you answered my question in regard to
two branches.  I agree with your assessment.

>>
>> > An alternative would be to prepare the API for new features even if they
>> > are not implemented, but that's a difficult exercise and there's a risk
>> > that at implementation time, the API doesn't fit.
>> > Any thoughts ?
>> >
>> > Currently we have no such breakage in trunk so it could qualify as GDAL
>> > 1.11. Perhaps we should just release it as such for now before the
>> > bigger changes ?
>>
>> Maybe release 1.11 soon, and take a crack at 2.0 changes before the
>> next release?  This would probably require a concerted effort from
>> developers or funders, as Even mentioned in regard to the sprint.
>>
>> > Somes topics I can see for GDAL 2.0 that impact API/ABI :
>> > - well, the mythological unification of OGR driver model with GDAL driver
>> > model.
>> > - XYZM support
>> > - Curve geometries
>> > - 64 bit integer support
>>
>> The 64-bit integer changes seem fairly straight forward.  I see XYZM
>> support up for GSoC again, maybe it'll get picked up.  I have no idea
>> what curve support would entail.
>
> Well, new geometry types and enhancements in drivers that would support them
> (PostGIS, ...). And also likely adapt all existing drivers that have write
> support so they can deal with the new geometry types : ignore them, or take
> them into account.
>
>>
>> > Other possible structural changes :
>> > - Change of master version control system: switch to git / GitHub ?
>> > - New build system : cmake ?
>>
>> What are the benefits here?  > Is travis integration easier?
>
> Well, I put that on the table since it is sometimes mentionned by developers,
> but the effort vs benefit ratio is not completely obvious for existing GDAL svn
> commiters.
> git transition would be mainly to keep up with what developers are of will
> soon be familiar with. Someone pointed me recently that GitHub also exposed
> git repositories as subversion repositories (which I experimented a bit), so
> that could satisfy most developers. git has the benefit of easing porting
> patches between branches, and making contributions from casual developers
> easier. Since the git mirror already exists, the transition to github would
> essentially require porting the Trac database to Github tickets (we could
> benefit from MapServer experience that has done that move before)

I have no preference as to which scm is used, although if it allows
more people to use or contribute, I'm all for it.  This is probably
not realistic, but it also may be a chance to purge some older/invalid
tickets from the trac database.  I imagine there is no way of really
doing this without a human checking for validity though.

>
>> I believe
>> someone has a cmake port floating around on github, any comments
>> there?
>
> The effort seems to have stalled. The benefit here would be the unification of
> the Unix and Windows makefiles, but the complexity of GDAL dependencies makes
> the porting effort rather repelling...

I can imagine...

>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html

Thanks.

-- 
Kyle

From kyle at pobox.com  Sun Feb 16 09:49:58 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Sun, 16 Feb 2014 10:49:58 -0700
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <52FFCE87.5080404@gmail.com>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<CAJ0mEz3B+16oqSjCCKLOG3BvHC=+xd9kcXY=E-=UH8LNnTeYog@mail.gmail.com>
	<201402151957.03274.even.rouault@mines-paris.org>
	<52FFCE87.5080404@gmail.com>
Message-ID: <CAJ0mEz3E6athT1qcntb9EMQisD8uPZRiXpf9mmLuENwve+UDQg@mail.gmail.com>

Dmitriy,

What version of cmake is required.

On Sat, Feb 15, 2014 at 1:31 PM, Dmitriy Baryshnikov
<bishop.dev at gmail.com> wrote:
> Hi,
>
> As cmake4gdal developer I think there is no problem with cmake. By now we
> main code is cmaked, and deal only with some drivers (GDAL or OGR), which
> needed cmake scripts.
> I make needed cmake scripts for drivers what I use in may work.

Are any of your Find* scripts being pushed back into the cmake code
base, or do they live exclusively in the GDAL source tree?  It's
strange to me that cmake doesn't come bundled with find scripts for
libs like sqlite and mysql, they are fairly common.

>
> So, with some help we can do all cmake scripts rather fast.
>
> The current implementation is here:
> https://github.com/nextgis/gdal-svn/tree/cmake4gdal and
> https://github.com/aashish24/gdal-svn/tree/cmake4gdal
> The branches include not the latest GDAL repository commits, as they can
> include makefile chages, so there is some delay as I synchronize the
> branches.
>
> Now there are scripts to:
> 1) all libraries - CPL, GDAL, OGR
> 2) apps - gdaladdo, gdalbuildvrt, gdalinfo, gdallocationinfo, gdalwarp,
> gdal_contour, gdal_grid, gdal_translate, ogr2ogr, ogrinfo, test_ogrsf
> 3) GDAL drivers - bmp, dimap, gif, tiff, hfa, iso8211, jpeg, map, mem, ozi,
> png, postgisraster, raw, saga, til, vrt, wms
> 4) OGR drivers - csv, dxf, generic, geojson, gml, gpx, kml, libkml, mem,
> mitab, mysql, pg, s57, shape, sqlite, sxf, vrt, wfs
>
> Best regards,
>     Dmitry
>
> 15.02.2014 22:57, Even Rouault ?????:
>
>> Thanks for your thoughs Kyle. I expect more developers and PSC members to
>> express theirs too.
>>
>>> How long would the stable branches be maintained?  Would we handle as
>>> we do now, with one stable branch and one development branch, or would
>>> we backport bug fixes to n branches (3.1, 2.4, etc)?  Would this
>>> require maintaining 3 branches?  stable, trunk, and api_break?  Any
>>> thoughts?
>>
>> What would be the api_break branch, as opposed to trunk I mean ?
>> Maintaining 2 branches in addition to the development branch seems to be a
>> bit
>> too much work. Well, backporting is not that difficult generally, but
>> releasing
>> a version is an effort that takes some energy and time, so we would have
>> likely
>> difficulty in making the necessary releases. But anyone wanting to
>> maintain a
>> branch can do it, so there's no need to set that policy in stone.
>>
>>>> An alternative would be to prepare the API for new features even if they
>>>> are not implemented, but that's a difficult exercise and there's a risk
>>>> that at implementation time, the API doesn't fit.
>>>> Any thoughts ?
>>>>
>>>> Currently we have no such breakage in trunk so it could qualify as GDAL
>>>> 1.11. Perhaps we should just release it as such for now before the
>>>> bigger changes ?
>>>
>>> Maybe release 1.11 soon, and take a crack at 2.0 changes before the
>>> next release?  This would probably require a concerted effort from
>>> developers or funders, as Even mentioned in regard to the sprint.
>>>
>>>> Somes topics I can see for GDAL 2.0 that impact API/ABI :
>>>> - well, the mythological unification of OGR driver model with GDAL
>>>> driver
>>>> model.
>>>> - XYZM support
>>>> - Curve geometries
>>>> - 64 bit integer support
>>>
>>> The 64-bit integer changes seem fairly straight forward.  I see XYZM
>>> support up for GSoC again, maybe it'll get picked up.  I have no idea
>>> what curve support would entail.
>>
>> Well, new geometry types and enhancements in drivers that would support
>> them
>> (PostGIS, ...). And also likely adapt all existing drivers that have write
>> support so they can deal with the new geometry types : ignore them, or
>> take
>> them into account.
>>
>>>> Other possible structural changes :
>>>> - Change of master version control system: switch to git / GitHub ?
>>>> - New build system : cmake ?
>>>
>>> What are the benefits here?  > Is travis integration easier?
>>
>> Well, I put that on the table since it is sometimes mentionned by
>> developers,
>> but the effort vs benefit ratio is not completely obvious for existing
>> GDAL svn
>> commiters.
>> git transition would be mainly to keep up with what developers are of will
>> soon be familiar with. Someone pointed me recently that GitHub also
>> exposed
>> git repositories as subversion repositories (which I experimented a bit),
>> so
>> that could satisfy most developers. git has the benefit of easing porting
>> patches between branches, and making contributions from casual developers
>> easier. Since the git mirror already exists, the transition to github
>> would
>> essentially require porting the Trac database to Github tickets (we could
>> benefit from MapServer experience that has done that move before)
>>
>>> I believe
>>> someone has a cmake port floating around on github, any comments
>>> there?
>>
>> The effort seems to have stalled. The benefit here would be the
>> unification of
>> the Unix and Windows makefiles, but the complexity of GDAL dependencies
>> makes
>> the porting effort rather repelling...
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Thanks for the update.

-- 
Kyle

From etourigny.dev at gmail.com  Sun Feb 16 10:44:29 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun, 16 Feb 2014 15:44:29 -0300
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <CAJ0mEz3E6athT1qcntb9EMQisD8uPZRiXpf9mmLuENwve+UDQg@mail.gmail.com>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<CAJ0mEz3B+16oqSjCCKLOG3BvHC=+xd9kcXY=E-=UH8LNnTeYog@mail.gmail.com>
	<201402151957.03274.even.rouault@mines-paris.org>
	<52FFCE87.5080404@gmail.com>
	<CAJ0mEz3E6athT1qcntb9EMQisD8uPZRiXpf9mmLuENwve+UDQg@mail.gmail.com>
Message-ID: <CA+TxYvNRs+qmMaAXyb_NjZws0LQL_LOPq2G66tOQKUfGUq4DTQ@mail.gmail.com>

also libraries like netcdf/hdf might already have cmake rules somewhere?



On Sun, Feb 16, 2014 at 2:49 PM, Kyle Shannon <kyle at pobox.com> wrote:

> Dmitriy,
>
> What version of cmake is required.
>
> On Sat, Feb 15, 2014 at 1:31 PM, Dmitriy Baryshnikov
> <bishop.dev at gmail.com> wrote:
> > Hi,
> >
> > As cmake4gdal developer I think there is no problem with cmake. By now we
> > main code is cmaked, and deal only with some drivers (GDAL or OGR), which
> > needed cmake scripts.
> > I make needed cmake scripts for drivers what I use in may work.
>
> Are any of your Find* scripts being pushed back into the cmake code
> base, or do they live exclusively in the GDAL source tree?  It's
> strange to me that cmake doesn't come bundled with find scripts for
> libs like sqlite and mysql, they are fairly common.
>
> >
> > So, with some help we can do all cmake scripts rather fast.
> >
> > The current implementation is here:
> > https://github.com/nextgis/gdal-svn/tree/cmake4gdal and
> > https://github.com/aashish24/gdal-svn/tree/cmake4gdal
> > The branches include not the latest GDAL repository commits, as they can
> > include makefile chages, so there is some delay as I synchronize the
> > branches.
> >
> > Now there are scripts to:
> > 1) all libraries - CPL, GDAL, OGR
> > 2) apps - gdaladdo, gdalbuildvrt, gdalinfo, gdallocationinfo, gdalwarp,
> > gdal_contour, gdal_grid, gdal_translate, ogr2ogr, ogrinfo, test_ogrsf
> > 3) GDAL drivers - bmp, dimap, gif, tiff, hfa, iso8211, jpeg, map, mem,
> ozi,
> > png, postgisraster, raw, saga, til, vrt, wms
> > 4) OGR drivers - csv, dxf, generic, geojson, gml, gpx, kml, libkml, mem,
> > mitab, mysql, pg, s57, shape, sqlite, sxf, vrt, wfs
> >
> > Best regards,
> >     Dmitry
> >
> > 15.02.2014 22:57, Even Rouault ?????:
> >
> >> Thanks for your thoughs Kyle. I expect more developers and PSC members
> to
> >> express theirs too.
> >>
> >>> How long would the stable branches be maintained?  Would we handle as
> >>> we do now, with one stable branch and one development branch, or would
> >>> we backport bug fixes to n branches (3.1, 2.4, etc)?  Would this
> >>> require maintaining 3 branches?  stable, trunk, and api_break?  Any
> >>> thoughts?
> >>
> >> What would be the api_break branch, as opposed to trunk I mean ?
> >> Maintaining 2 branches in addition to the development branch seems to
> be a
> >> bit
> >> too much work. Well, backporting is not that difficult generally, but
> >> releasing
> >> a version is an effort that takes some energy and time, so we would have
> >> likely
> >> difficulty in making the necessary releases. But anyone wanting to
> >> maintain a
> >> branch can do it, so there's no need to set that policy in stone.
> >>
> >>>> An alternative would be to prepare the API for new features even if
> they
> >>>> are not implemented, but that's a difficult exercise and there's a
> risk
> >>>> that at implementation time, the API doesn't fit.
> >>>> Any thoughts ?
> >>>>
> >>>> Currently we have no such breakage in trunk so it could qualify as
> GDAL
> >>>> 1.11. Perhaps we should just release it as such for now before the
> >>>> bigger changes ?
> >>>
> >>> Maybe release 1.11 soon, and take a crack at 2.0 changes before the
> >>> next release?  This would probably require a concerted effort from
> >>> developers or funders, as Even mentioned in regard to the sprint.
> >>>
> >>>> Somes topics I can see for GDAL 2.0 that impact API/ABI :
> >>>> - well, the mythological unification of OGR driver model with GDAL
> >>>> driver
> >>>> model.
> >>>> - XYZM support
> >>>> - Curve geometries
> >>>> - 64 bit integer support
> >>>
> >>> The 64-bit integer changes seem fairly straight forward.  I see XYZM
> >>> support up for GSoC again, maybe it'll get picked up.  I have no idea
> >>> what curve support would entail.
> >>
> >> Well, new geometry types and enhancements in drivers that would support
> >> them
> >> (PostGIS, ...). And also likely adapt all existing drivers that have
> write
> >> support so they can deal with the new geometry types : ignore them, or
> >> take
> >> them into account.
> >>
> >>>> Other possible structural changes :
> >>>> - Change of master version control system: switch to git / GitHub ?
> >>>> - New build system : cmake ?
> >>>
> >>> What are the benefits here?  > Is travis integration easier?
> >>
> >> Well, I put that on the table since it is sometimes mentionned by
> >> developers,
> >> but the effort vs benefit ratio is not completely obvious for existing
> >> GDAL svn
> >> commiters.
> >> git transition would be mainly to keep up with what developers are of
> will
> >> soon be familiar with. Someone pointed me recently that GitHub also
> >> exposed
> >> git repositories as subversion repositories (which I experimented a
> bit),
> >> so
> >> that could satisfy most developers. git has the benefit of easing
> porting
> >> patches between branches, and making contributions from casual
> developers
> >> easier. Since the git mirror already exists, the transition to github
> >> would
> >> essentially require porting the Trac database to Github tickets (we
> could
> >> benefit from MapServer experience that has done that move before)
> >>
> >>> I believe
> >>> someone has a cmake port floating around on github, any comments
> >>> there?
> >>
> >> The effort seems to have stalled. The benefit here would be the
> >> unification of
> >> the Unix and Windows makefiles, but the complexity of GDAL dependencies
> >> makes
> >> the porting effort rather repelling...
> >>
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> Thanks for the update.
>
> --
> Kyle
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140216/112c8492/attachment-0001.html>

From bishop.dev at gmail.com  Sun Feb 16 12:33:52 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Mon, 17 Feb 2014 00:33:52 +0400
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <CAJ0mEz3E6athT1qcntb9EMQisD8uPZRiXpf9mmLuENwve+UDQg@mail.gmail.com>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<CAJ0mEz3B+16oqSjCCKLOG3BvHC=+xd9kcXY=E-=UH8LNnTeYog@mail.gmail.com>
	<201402151957.03274.even.rouault@mines-paris.org>
	<52FFCE87.5080404@gmail.com>
	<CAJ0mEz3E6athT1qcntb9EMQisD8uPZRiXpf9mmLuENwve+UDQg@mail.gmail.com>
Message-ID: <530120B0.5060805@gmail.com>

Hi Kyle,

The minimum version cmake is 2.8.8 because it have some required 
functionality:

add_library(<name> OBJECT <src>...) and TARGET_OBJECTS:objlib

some discussion can be found here: 
http://thread.gmane.org/gmane.comp.programming.tools.cmake.devel/3379

But in scripts I set VERSION 2.8.10 - this is historical.

What about "pushing Find scripts back": as the work is not finished and 
GDAL and other required libraries changing, I think it's rather early to 
do. Though can be done.

Best regards,
     Dmitry

16.02.2014 21:49, Kyle Shannon ?????:
> Dmitriy,
>
> What version of cmake is required.
>
> On Sat, Feb 15, 2014 at 1:31 PM, Dmitriy Baryshnikov
> <bishop.dev at gmail.com> wrote:
>> Hi,
>>
>> As cmake4gdal developer I think there is no problem with cmake. By now we
>> main code is cmaked, and deal only with some drivers (GDAL or OGR), which
>> needed cmake scripts.
>> I make needed cmake scripts for drivers what I use in may work.
> Are any of your Find* scripts being pushed back into the cmake code
> base, or do they live exclusively in the GDAL source tree?  It's
> strange to me that cmake doesn't come bundled with find scripts for
> libs like sqlite and mysql, they are fairly common.
>
>> So, with some help we can do all cmake scripts rather fast.
>>
>> The current implementation is here:
>> https://github.com/nextgis/gdal-svn/tree/cmake4gdal and
>> https://github.com/aashish24/gdal-svn/tree/cmake4gdal
>> The branches include not the latest GDAL repository commits, as they can
>> include makefile chages, so there is some delay as I synchronize the
>> branches.
>>
>> Now there are scripts to:
>> 1) all libraries - CPL, GDAL, OGR
>> 2) apps - gdaladdo, gdalbuildvrt, gdalinfo, gdallocationinfo, gdalwarp,
>> gdal_contour, gdal_grid, gdal_translate, ogr2ogr, ogrinfo, test_ogrsf
>> 3) GDAL drivers - bmp, dimap, gif, tiff, hfa, iso8211, jpeg, map, mem, ozi,
>> png, postgisraster, raw, saga, til, vrt, wms
>> 4) OGR drivers - csv, dxf, generic, geojson, gml, gpx, kml, libkml, mem,
>> mitab, mysql, pg, s57, shape, sqlite, sxf, vrt, wfs
>>
>> Best regards,
>>      Dmitry
>>
>> 15.02.2014 22:57, Even Rouault ?????:
>>
>>> Thanks for your thoughs Kyle. I expect more developers and PSC members to
>>> express theirs too.
>>>
>>>> How long would the stable branches be maintained?  Would we handle as
>>>> we do now, with one stable branch and one development branch, or would
>>>> we backport bug fixes to n branches (3.1, 2.4, etc)?  Would this
>>>> require maintaining 3 branches?  stable, trunk, and api_break?  Any
>>>> thoughts?
>>> What would be the api_break branch, as opposed to trunk I mean ?
>>> Maintaining 2 branches in addition to the development branch seems to be a
>>> bit
>>> too much work. Well, backporting is not that difficult generally, but
>>> releasing
>>> a version is an effort that takes some energy and time, so we would have
>>> likely
>>> difficulty in making the necessary releases. But anyone wanting to
>>> maintain a
>>> branch can do it, so there's no need to set that policy in stone.
>>>
>>>>> An alternative would be to prepare the API for new features even if they
>>>>> are not implemented, but that's a difficult exercise and there's a risk
>>>>> that at implementation time, the API doesn't fit.
>>>>> Any thoughts ?
>>>>>
>>>>> Currently we have no such breakage in trunk so it could qualify as GDAL
>>>>> 1.11. Perhaps we should just release it as such for now before the
>>>>> bigger changes ?
>>>> Maybe release 1.11 soon, and take a crack at 2.0 changes before the
>>>> next release?  This would probably require a concerted effort from
>>>> developers or funders, as Even mentioned in regard to the sprint.
>>>>
>>>>> Somes topics I can see for GDAL 2.0 that impact API/ABI :
>>>>> - well, the mythological unification of OGR driver model with GDAL
>>>>> driver
>>>>> model.
>>>>> - XYZM support
>>>>> - Curve geometries
>>>>> - 64 bit integer support
>>>> The 64-bit integer changes seem fairly straight forward.  I see XYZM
>>>> support up for GSoC again, maybe it'll get picked up.  I have no idea
>>>> what curve support would entail.
>>> Well, new geometry types and enhancements in drivers that would support
>>> them
>>> (PostGIS, ...). And also likely adapt all existing drivers that have write
>>> support so they can deal with the new geometry types : ignore them, or
>>> take
>>> them into account.
>>>
>>>>> Other possible structural changes :
>>>>> - Change of master version control system: switch to git / GitHub ?
>>>>> - New build system : cmake ?
>>>> What are the benefits here?  > Is travis integration easier?
>>> Well, I put that on the table since it is sometimes mentionned by
>>> developers,
>>> but the effort vs benefit ratio is not completely obvious for existing
>>> GDAL svn
>>> commiters.
>>> git transition would be mainly to keep up with what developers are of will
>>> soon be familiar with. Someone pointed me recently that GitHub also
>>> exposed
>>> git repositories as subversion repositories (which I experimented a bit),
>>> so
>>> that could satisfy most developers. git has the benefit of easing porting
>>> patches between branches, and making contributions from casual developers
>>> easier. Since the git mirror already exists, the transition to github
>>> would
>>> essentially require porting the Trac database to Github tickets (we could
>>> benefit from MapServer experience that has done that move before)
>>>
>>>> I believe
>>>> someone has a cmake port floating around on github, any comments
>>>> there?
>>> The effort seems to have stalled. The benefit here would be the
>>> unification of
>>> the Unix and Windows makefiles, but the complexity of GDAL dependencies
>>> makes
>>> the porting effort rather repelling...
>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> Thanks for the update.
>


From even.rouault at mines-paris.org  Sun Feb 16 13:20:39 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 16 Feb 2014 22:20:39 +0100
Subject: [gdal-dev] Is there documetation about filters and some python
	utilities?
In-Reply-To: <loom.20140216T121531-187@post.gmane.org>
References: <loom.20140216T121531-187@post.gmane.org>
Message-ID: <201402162220.40084.even.rouault@mines-paris.org>

Le dimanche 16 f?vrier 2014 12:36:07, Jukka Rahkonen a ?crit :
> Hi,
> 
> I was thinking that a possibility to run images through filters with GDAL
> could be nice sometimes. Especially for visual work with aerial and
> satellite images filters like "sharpen" of "unsharp mask"
> http://en.wikipedia.org/wiki/Unsharp_masking are often very useful. But
> then I found that kernel filters can already be used inside VRT files. Are
> there usage examples with before-after comparison images somewhere in our
> documentation?

Not that I am aware of. Could be nice to have some

> 
> I also found that there are some python scripts included in
> \gdal\bin\gdal\python\scripts at least in the gisinternals GDAL builds but
> some scripts are not listed in http://gdal.org/gdal_utilities.html.  Is
> there some other place where to find documentation about these scripts, for
> example gdal_calc.py ? Some other than the sources, I mean.

Etienne Tourigny has just noted in http://trac.osgeo.org/gdal/ticket/5388 that 
he intends adding doc for gdal_calc.py

> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From etourigny.dev at gmail.com  Sun Feb 16 14:33:59 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun, 16 Feb 2014 19:33:59 -0300
Subject: [gdal-dev] Is there documetation about filters and some python
	utilities?
In-Reply-To: <201402162220.40084.even.rouault@mines-paris.org>
References: <loom.20140216T121531-187@post.gmane.org>
	<201402162220.40084.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvMYHTeD8d=jwR=Pxx8Zv+yw09fDyEfbJH_Efcx7mAQdoA@mail.gmail.com>

It would probably not be that hard to add the docs for other python
utilities as well, by copying the docs inside the python files to new .dox
files. Any volunteers?  I can provide simple steps on how to do this.

Etienne


On Sun, Feb 16, 2014 at 6:20 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le dimanche 16 f?vrier 2014 12:36:07, Jukka Rahkonen a ?crit :
> > Hi,
> >
> > I was thinking that a possibility to run images through filters with GDAL
> > could be nice sometimes. Especially for visual work with aerial and
> > satellite images filters like "sharpen" of "unsharp mask"
> > http://en.wikipedia.org/wiki/Unsharp_masking are often very useful. But
> > then I found that kernel filters can already be used inside VRT files.
> Are
> > there usage examples with before-after comparison images somewhere in our
> > documentation?
>
> Not that I am aware of. Could be nice to have some
>
> >
> > I also found that there are some python scripts included in
> > \gdal\bin\gdal\python\scripts at least in the gisinternals GDAL builds
> but
> > some scripts are not listed in http://gdal.org/gdal_utilities.html.  Is
> > there some other place where to find documentation about these scripts,
> for
> > example gdal_calc.py ? Some other than the sources, I mean.
>
> Etienne Tourigny has just noted in http://trac.osgeo.org/gdal/ticket/5388that
> he intends adding doc for gdal_calc.py
>
> >
> > -Jukka Rahkonen-
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140216/ff10253f/attachment.html>

From etourigny.dev at gmail.com  Sun Feb 16 16:18:58 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun, 16 Feb 2014 21:18:58 -0300
Subject: [gdal-dev] Is there documetation about filters and some python
	utilities?
In-Reply-To: <loom.20140216T121531-187@post.gmane.org>
References: <loom.20140216T121531-187@post.gmane.org>
Message-ID: <CA+TxYvN0QRdm83QeVyKJaYL4_6_yRQ7cBm5vpTfwfTuZBQEBmg@mail.gmail.com>

On Sun, Feb 16, 2014 at 8:36 AM, Jukka Rahkonen
<jukka.rahkonen at mmmtike.fi>wrote:

> Hi,
>
> I was thinking that a possibility to run images through filters with GDAL
> could be nice sometimes. Especially for visual work with aerial and
> satellite images filters like "sharpen" of "unsharp mask"
> http://en.wikipedia.org/wiki/Unsharp_masking are often very useful. But
> then
> I found that kernel filters can already be used inside VRT files. Are there
> usage examples with before-after comparison images somewhere in our
> documentation?
>

The only I know of is the vrt tutorial (with very few details), but you
have probably already read that

http://www.gdal.org/gdal_vrttut.html

These refs may help (obtained through a simple google search)

http://homepages.inf.ed.ac.uk/rbf/HIPR2/unsharp.htm
http://stackoverflow.com/questions/2938162/how-does-an-unsharp-mask-work


>
> I also found that there are some python scripts included in
> \gdal\bin\gdal\python\scripts at least in the gisinternals GDAL builds but
> some scripts are not listed in http://gdal.org/gdal_utilities.html.  Is
> there some other place where to find documentation about these scripts, for
> example gdal_calc.py ? Some other than the sources, I mean.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140216/e663ca24/attachment.html>

From rjhale at northrivergeographic.com  Sun Feb 16 18:09:58 2014
From: rjhale at northrivergeographic.com (Randal Hale)
Date: Sun, 16 Feb 2014 21:09:58 -0500
Subject: [gdal-dev] ArcGIS Rest Service
Message-ID: <53016F76.3010700@northrivergeographic.com>

I was wondering if anyone has an idea on this one.

I ran this: gdal_translate 
"http://geonb.snb.ca/ArcGIS/rest/services/GeoNB_Basemap_EnhancedImagery/MapServer?f=json&pretty=true" 
test.xml -of WMS

I get an xml and add it to QGIS and get a giant "no tiles at this level 
please zoom out warning" - and since I just crashed QGIS I want to say 
it's in French and that was a very bad translation. gdal_translate is 
seeing the service but not returning any tiles.

I'm a bit stumped - thoughts and ideas are appreciated,

Randy

-- 
-----------------
Randal Hale, GISP
North River Geographic Systems, Inc
http://www.northrivergeographic.com
423.653.3611 rjhale at northrivergeographic.com
rjhale at northrivergeographic.com
twitter:rjhale
http://about.me/rjhale


From Ivan.Price at noveltis.fr  Mon Feb 17 01:46:19 2014
From: Ivan.Price at noveltis.fr (Ivan Price)
Date: Mon, 17 Feb 2014 09:46:19 +0000
Subject: [gdal-dev] reprojecting coastcolour (/meris) using python via GCPs
Message-ID: <605C20E40C3B7D4E93E0E804EECE898E1EB62FD0@GLORFINDEL.noveltis.loc>


Hello,

I am trying to reproject a window inside a coastcolour (=MERIS) image. As far as I can see GDAL cannot read the coastcolour data directly, so i am reading the coastcolour netcdf in python, building a source dataset using the memory driver, adding GCPS (1 for every 10th pixel) and writing the data to it, then reprojecting the source dataset to a destination dataset which is a spatial subset of the original in wgs84 lat/long.

This works fine and is relatively fast, but the reprojection is not accurate, the results are out by about 6-10 pixels (in various directions). On reading the forums it seems if i was using gdalwarp i would be using -tps, however the ReprojectImage() function does not seem to offer this parameter ? And i don't have the option of using the commandline tool as even gdal 1.10 cannot recognise the coastcolour data.

So i guess i have 2 questions.. has anyone had any success reading coastcolour data with the gdal command line tools, and secondly:

how can i get ReprojectImage() to be more accurate, given i have a GCP for every pixel ?

thanks and regards,

-ivan


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140217/34aaacf3/attachment-0001.html>

From gusevmihs at gmail.com  Mon Feb 17 02:13:38 2014
From: gusevmihs at gmail.com (=?KOI8-R?B?7cnIwcnMIOfV08XX?=)
Date: Mon, 17 Feb 2014 14:13:38 +0400
Subject: [gdal-dev] GSoC 2014
Message-ID: <CAJB43VqOcp0YM8sFJTmNgq1b9KmYkcHr8YXnq1JrgMf6RoXnjg@mail.gmail.com>

Hello everyone.

I am a last year student at Moscow Power Engineering Institute, Russia. For
GSoC 2014 I would like to work on networking capabilities in GDAL/OGR.


*Overall idea*

I would like to try to implement a universal network model. The
universality of the model would reflect not only in the ability to use
different GIS formats to store and transfer network data (which OGR is a
grate basis for), but also to be able to design and simulate different
types of network applications (engineering, natural, etc). I understand
that it is rather ambitious to consider all possible aspects of all network
types. But as a first step I would like to cover only the basic aspects,
that can be generalized and to provide a "platform" which can be used by
other developers to create their own extensions which are specific to the
concrete network type.


*Target scope for GSoC 2014*

Today none of OGR drivers supports network functionality. The idea is to
implement a new OGR driver, which will deal with networks built over the
spatial data. The spatial data together with the network data will be
stored in one of the OGR-supported formats, which would be specified during
the creation of the network.

Planned features of the new driver:

1. Reading/writing data from/to the source, creating layers, editing
attributes, etc (as any new OGR driver must provide);

2. The user would also be able to do the following, assuming that all the
special network data is the data of the current GIS-format:

- Read/Write the information about the whole network (network metadata);

- Edit special network objects parameters such as blocking state, or
direction of the flow;

- Import objects from the external sources (the driver adds missing network
parameters to them);

- Set/unset connections among network objects;

- Edit the sets of the network rules.

3. Each object in the network will have a set of relations with other
objects, which are stored separately and form a network graph;

4. The whole network will have a set of rules that describes the connection
possibilities of different object types in the network. The network will
also have a set of rules that describes the influence of each type of
object to the state of the whole network and to the other types of objects.
It can also be called as a behavior of the object in the context of the
network specialization (engineering purpose).


*Current status*

https://github.com/MikhanGusev/gnm

As a matter of fact I've been working on this for a while, and I've already
completed few things. Here is what I've accomplished already:

1. Complete. The driver and most of the required virtual interfaces are
already implemented;

2. Complete. All data from the external source is wrapped with the network
proxy and the user can edit it.

3. Currently, I'm thinking about the way, how the network graph will be
stored.


Best regards,

Mikhail Gusev.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140217/9d30b28a/attachment.html>

From juanma.mr at gmail.com  Mon Feb 17 02:25:30 2014
From: juanma.mr at gmail.com (Juanma M. R.)
Date: Mon, 17 Feb 2014 11:25:30 +0100
Subject: [gdal-dev] Compiling GDAL 1.10 with KML/KMZ support
Message-ID: <CAKEuFR5pyO9ySuHTLmNvp-GMRoO14gpMEFNBBVbQq6fPsCzU5A@mail.gmail.com>

Dear list,

I am trying to compile gdal 1.10 with the intention of adding KMZ support
to Mapserver. I do not get the "Google libkml support" as yes. Is this the
necessary to get the KML/KMZ driver support?

If so, how can I compile GDAL to get support to KML/KMZ support? I am
trying to compile libxml from trunk to then be included in GDAL compilation
but I only get the 1.2 version of libxml, which is supposed to not be
enought <http://www.gdal.org/ogr/drv_libkml.html>.

Can anyone help me? Maybe I have not found the documentation for propperly
configuring gdal with KMZ support.

Cheers,
Juan Manuel Moreno Rivera.

Secci?n de Teledetecci?n y SIG / Remote Sensing & GIS group

Instituto de Desarrollo Regional / Institute for Regional Development

Universidad de Castilla-La Mancha / University of Castilla-La Mancha

Tlf: +34 967599200 (Ext: 2623)
http://www.teledeteccionysig.es/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140217/4e05ad8b/attachment.html>

From barthelemy at geovariances.com  Mon Feb 17 02:30:24 2014
From: barthelemy at geovariances.com (Olivier BARTHELEMY)
Date: Mon, 17 Feb 2014 11:30:24 +0100
Subject: [gdal-dev] Compiling GDAL 1.10 with KML/KMZ support
In-Reply-To: <CAKEuFR5pyO9ySuHTLmNvp-GMRoO14gpMEFNBBVbQq6fPsCzU5A@mail.gmail.com>
References: <CAKEuFR5pyO9ySuHTLmNvp-GMRoO14gpMEFNBBVbQq6fPsCzU5A@mail.gmail.com>
Message-ID: <CAK9jXVW9n3+NZnYsVRmrUmFZ5pxwzbQm_5h_kmBiFwf21dj5Rg@mail.gmail.com>

I'm using the last SVN version of libkml with GDAL. See
https://code.google.com/p/libkml/source/checkout


2014-02-17 11:25 GMT+01:00 Juanma M. R. <juanma.mr at gmail.com>:

> Dear list,
>
> I am trying to compile gdal 1.10 with the intention of adding KMZ support
> to Mapserver. I do not get the "Google libkml support" as yes. Is this the
> necessary to get the KML/KMZ driver support?
>
> If so, how can I compile GDAL to get support to KML/KMZ support? I am
> trying to compile libxml from trunk to then be included in GDAL compilation
> but I only get the 1.2 version of libxml, which is supposed to not be
> enought <http://www.gdal.org/ogr/drv_libkml.html>.
>
> Can anyone help me? Maybe I have not found the documentation for propperly
> configuring gdal with KMZ support.
>
> Cheers,
> Juan Manuel Moreno Rivera.
>
> Secci?n de Teledetecci?n y SIG / Remote Sensing & GIS group
>
> Instituto de Desarrollo Regional / Institute for Regional Development
>
> Universidad de Castilla-La Mancha / University of Castilla-La Mancha
>
> Tlf: +34 967599200 (Ext: 2623)
> http://www.teledeteccionysig.es/
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
[image: Geovariances]

Olivier BARTHELEMY *Software development engineer*
Geovariances, 49bis avenue Franklin Roosevelt - 77215 AVON CEDEX - FRANCE
| www.geovariances.com <http://link.geovariances.com/eml-home>
Keep posted about Geovariances   <http://link.geovariances.com/eml-geowidget>
    <http://link.geovariances.com/eml-linkedin-gv>
<http://link.geovariances.com/eml-linkedin>
    <http://link.geovariances.com/eml-twitter>
<http://link.geovariances.com/eml-youtube>
    <http://link.geovariances.com/eml-slideshare>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140217/8b514680/attachment.html>

From bishop.dev at gmail.com  Mon Feb 17 04:06:07 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Mon, 17 Feb 2014 16:06:07 +0400
Subject: [gdal-dev] GSoC 2014
In-Reply-To: <CAJB43VqOcp0YM8sFJTmNgq1b9KmYkcHr8YXnq1JrgMf6RoXnjg@mail.gmail.com>
References: <CAJB43VqOcp0YM8sFJTmNgq1b9KmYkcHr8YXnq1JrgMf6RoXnjg@mail.gmail.com>
Message-ID: <5301FB2F.9080704@gmail.com>

Hi Mikhai,

Great! Nice to see such interesting to GSoC this year.

Best regards,
     Dmitry

17.02.2014 14:13, ?????? ????? ?????:
>
> Hello everyone.
>
> I am a last year student at Moscow Power Engineering Institute, 
> Russia. For GSoC 2014 I would like to work on networking capabilities 
> in GDAL/OGR.
>
> _
> _
>
> _Overall idea_
>
> I would like to try to implement a universal network model. The 
> universality of the model would reflect not only in the ability to use 
> different GIS formats to store and transfer network data (which OGR is 
> a grate basis for), but also to be able to design and simulate 
> different types of network applications (engineering, natural, etc). I 
> understand that it is rather ambitious to consider all possible 
> aspects of all network types. But as a first step I would like to 
> cover only the basic aspects, that can be generalized and to provide a 
> "platform" which can be used by other developers to create their own 
> extensions which are specific to the concrete network type.
>
>
> _Target scope for GSoC 2014_
>
> Today none of OGR drivers supports network functionality. The idea is 
> to implement a new OGR driver, which will deal with networks built 
> over the spatial data. The spatial data together with the network data 
> will be stored in one of the OGR-supported formats, which would be 
> specified during the creation of the network.
>
> Planned features of the new driver:
>
> 1. Reading/writing data from/to the source, creating layers, editing 
> attributes, etc (as any new OGR driver must provide);
>
> 2. The user would also be able to do the following, assuming that all 
> the special network data is the data of the current GIS-format:
>
>
> - Read/Write the information about the whole network (network metadata);
>
> - Edit special network objects parameters such as blocking state, or 
> direction of the flow;
>
> - Import objects from the external sources (the driver adds missing 
> network parameters to them);
>
> - Set/unset connections among network objects;
>
> - Edit the sets of the network rules.
>
> 3. Each object in the network will have a set of relations with other 
> objects, which are stored separately and form a network graph;
>
> 4. The whole network will have a set of rules that describes the 
> connection possibilities of different object types in the network. The 
> network will also have a set of rules that describes the influence of 
> each type of object to the state of the whole network and to the other 
> types of objects. It can also be called as a behavior of the object in 
> the context of the network specialization (engineering purpose).
>
>
> _Current status_
>
> https://github.com/MikhanGusev/gnm
>
> As a matter of fact I've been working on this for a while, and I've 
> already completed few things. Here is what I've accomplished already:
>
> 1. Complete. The driver and most of the required virtual interfaces 
> are already implemented;
>
> 2. Complete. All data from the external source is wrapped with the 
> network proxy and the user can edit it.
>
> 3. Currently, I'm thinking about the way, how the network graph will 
> be stored.
>
>
> Best regards,
>
> Mikhail Gusev.
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140217/2552b587/attachment-0001.html>

From juanma.mr at gmail.com  Mon Feb 17 04:43:25 2014
From: juanma.mr at gmail.com (Juanma M. R.)
Date: Mon, 17 Feb 2014 13:43:25 +0100
Subject: [gdal-dev] Compiling GDAL 1.10 with KML/KMZ support
In-Reply-To: <CAK9jXVW9n3+NZnYsVRmrUmFZ5pxwzbQm_5h_kmBiFwf21dj5Rg@mail.gmail.com>
References: <CAKEuFR5pyO9ySuHTLmNvp-GMRoO14gpMEFNBBVbQq6fPsCzU5A@mail.gmail.com>
	<CAK9jXVW9n3+NZnYsVRmrUmFZ5pxwzbQm_5h_kmBiFwf21dj5Rg@mail.gmail.com>
Message-ID: <CAKEuFR4sLNfOv-2bnQBMHzkaPMe9rVC1Af9gbp9b8AoBJeieEA@mail.gmail.com>

Ok, finally I got it. Just missed to launch the autogen.sh script.

Thanks Oliver.

Cheers,

Juan Manuel Moreno Rivera.

Secci?n de Teledetecci?n y SIG / Remote Sensing & GIS group

Instituto de Desarrollo Regional / Institute for Regional Development

Universidad de Castilla-La Mancha / University of Castilla-La Mancha

Tlf: +34 967599200 (Ext: 2623)
http://www.teledeteccionysig.es/


2014-02-17 11:30 GMT+01:00 Olivier BARTHELEMY <barthelemy at geovariances.com>:

> I'm using the last SVN version of libkml with GDAL. See
> https://code.google.com/p/libkml/source/checkout
>
>
> 2014-02-17 11:25 GMT+01:00 Juanma M. R. <juanma.mr at gmail.com>:
>
>> Dear list,
>>
>> I am trying to compile gdal 1.10 with the intention of adding KMZ support
>> to Mapserver. I do not get the "Google libkml support" as yes. Is this the
>> necessary to get the KML/KMZ driver support?
>>
>> If so, how can I compile GDAL to get support to KML/KMZ support? I am
>> trying to compile libxml from trunk to then be included in GDAL compilation
>> but I only get the 1.2 version of libxml, which is supposed to not be
>> enought <http://www.gdal.org/ogr/drv_libkml.html>.
>>
>> Can anyone help me? Maybe I have not found the documentation for
>> propperly configuring gdal with KMZ support.
>>
>> Cheers,
>> Juan Manuel Moreno Rivera.
>>
>> Secci?n de Teledetecci?n y SIG / Remote Sensing & GIS group
>>
>> Instituto de Desarrollo Regional / Institute for Regional Development
>>
>> Universidad de Castilla-La Mancha / University of Castilla-La Mancha
>>
>> Tlf: +34 967599200 (Ext: 2623)
>> http://www.teledeteccionysig.es/
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> [image: Geovariances]
>
> Olivier BARTHELEMY *Software development engineer*
> Geovariances, 49bis avenue Franklin Roosevelt - 77215 AVON CEDEX - FRANCE
> | www.geovariances.com <http://link.geovariances.com/eml-home>
> Keep posted about Geovariances   <http://link.geovariances.com/eml-geowidget>
>     <http://link.geovariances.com/eml-linkedin-gv>   <http://link.geovariances.com/eml-linkedin>
>     <http://link.geovariances.com/eml-twitter>   <http://link.geovariances.com/eml-youtube>
>     <http://link.geovariances.com/eml-slideshare>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140217/f8f3016b/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Feb 17 05:04:51 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 17 Feb 2014 13:04:51 +0000 (UTC)
Subject: [gdal-dev] Ogr2ogr and default value of -gt
Message-ID: <loom.20140217T134915-645@post.gmane.org>

Hi,

The default value of -gt parameter of ogr2ogr utility is 200 which is all
too low for databases. Especially bad it seems to be for SQLite/Spatialite
and thus also for GeoPackage.

Are there some drivers which would suffer badly if the default value for -gt
would be increased to something like 2000 or 4000? It is easy to set the
value from the command line but most ogr2ogr usage examples we have in the
documentation are without -gt parameter and I am sure than very many people
just copy-paste the examples and run ogr2ogr unnecessarily slow.

-Jukka Rahkonen-



From anton.korosov at nersc.no  Mon Feb 17 04:38:24 2014
From: anton.korosov at nersc.no (Anton Korosov)
Date: Mon, 17 Feb 2014 13:38:24 +0100
Subject: [gdal-dev] reprojecting coastcolour (/meris) using python via
 GCPs
In-Reply-To: <605C20E40C3B7D4E93E0E804EECE898E1EB62FD0@GLORFINDEL.noveltis.loc>
References: <605C20E40C3B7D4E93E0E804EECE898E1EB62FD0@GLORFINDEL.noveltis.loc>
Message-ID: <530202C0.2040203@nersc.no>

Hello Ivan,

ReprojectImage() has a parameter psOptions()
http://www.gdal.org/gdalwarper_8h.html#ad36462e8d5d34642df7f9ea1cfc2fec4
It should accept any of the warping options, e.g. '-tps'
http://www.gdal.org/gdalwarp.html

I'm not 100% sure (since I'm using Python) but it may work.


I'll take this chance also to promote Nansat, a scientist-friendly 
Python tool for working with satellite and model data:
Repo: https://github.com/nansencenter/nansat
Wiki: https://github.com/nansencenter/nansat/wiki
and API-rference: http://nansencenter.github.io/nansat/

It is a wrapper around GDAL, which adds scientific meaning to the opened 
images. Briefly: GDAL doesn't know much about e.g. band 22 in a MERIS 
image, Nansat does. It provides full information and allows simple 
usage, e.g.:
n = Nansat(meris_image)
n.reproject(dstDomain, tps=True)
n.export('outFile.nc')

It can open MERIS as well as tens of other formats.


Best regards!
Anton

On 02/17/2014 10:46 AM, Ivan Price wrote:
>
> Hello,
>
> I am trying to reproject a window inside a coastcolour (=MERIS) image. As far as I can see GDAL cannot read the coastcolour data directly, so i am reading the coastcolour netcdf in python, building a source dataset using the memory driver, adding GCPS (1 for every 10th pixel) and writing the data to it, then reprojecting the source dataset to a destination dataset which is a spatial subset of the original in wgs84 lat/long.
>
> This works fine and is relatively fast, but the reprojection is not accurate, the results are out by about 6-10 pixels (in various directions). On reading the forums it seems if i was using gdalwarp i would be using -tps, however the ReprojectImage() function does not seem to offer this parameter ? And i don't have the option of using the commandline tool as even gdal 1.10 cannot recognise the coastcolour data.
>
> So i guess i have 2 questions.. has anyone had any success reading coastcolour data with the gdal command line tools, and secondly:
>
> how can i get ReprojectImage() to be more accurate, given i have a GCP for every pixel ?
>
> thanks and regards,
>
> -ivan
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From etourigny.dev at gmail.com  Mon Feb 17 05:09:18 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 17 Feb 2014 10:09:18 -0300
Subject: [gdal-dev] reprojecting coastcolour (/meris) using python via
	GCPs
In-Reply-To: <605C20E40C3B7D4E93E0E804EECE898E1EB62FD0@GLORFINDEL.noveltis.loc>
References: <605C20E40C3B7D4E93E0E804EECE898E1EB62FD0@GLORFINDEL.noveltis.loc>
Message-ID: <CA+TxYvPWUd+LS97XOPhyD8h3uDia1MYQe4rSjyH3eTcN6q1fWA@mail.gmail.com>

As far as I know, the gdal warp api is not exposed to python.

I have no idea on reading the MERIS data with the gdal netcdf driver - what
I the problem?

But you might be able to use this workaround: instead of creating a source
dataset using the memory driver, create a file on disk (in gtiff format)
with GCPS and write data to disk, and then use gdalwarp on that.

Etienne


On Mon, Feb 17, 2014 at 6:46 AM, Ivan Price <Ivan.Price at noveltis.fr> wrote:

>
>
> Hello,
>
>
>
> I am trying to reproject a window inside a coastcolour (=MERIS) image. As
> far as I can see GDAL cannot read the coastcolour data directly, so i am
> reading the coastcolour netcdf in python, building a source dataset using
> the memory driver, adding GCPS (1 for every 10th pixel) and writing the
> data to it, then reprojecting the source dataset to a destination dataset
> which is a spatial subset of the original in wgs84 lat/long.
>
>
>
> This works fine and is relatively fast, but the reprojection is not
> accurate, the results are out by about 6-10 pixels (in various directions).
> On reading the forums it seems if i was using gdalwarp i would be using
> -tps, however the ReprojectImage() function does not seem to offer this
> parameter ? And i don't have the option of using the commandline tool as
> even gdal 1.10 cannot recognise the coastcolour data.
>
>
>
> So i guess i have 2 questions.. has anyone had any success reading
> coastcolour data with the gdal command line tools, and secondly:
>
>
>
> how can i get ReprojectImage() to be more accurate, given i have a GCP for
> every pixel ?
>
>
>
> thanks and regards,
>
>
>
> -ivan
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140217/8f4ad525/attachment.html>

From woodbri at swoodbridge.com  Mon Feb 17 06:33:38 2014
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon, 17 Feb 2014 09:33:38 -0500
Subject: [gdal-dev] GSoC 2014
In-Reply-To: <CAJB43VqOcp0YM8sFJTmNgq1b9KmYkcHr8YXnq1JrgMf6RoXnjg@mail.gmail.com>
References: <CAJB43VqOcp0YM8sFJTmNgq1b9KmYkcHr8YXnq1JrgMf6RoXnjg@mail.gmail.com>
Message-ID: <53021DC2.4030601@swoodbridge.com>

Mikhail,

This is a very interesting idea.

You might want to add specific support pgRouting which already supports 
building graphs, creating routing topology and solving various graph 
problem using postgis for geometry and tables for building and linking 
the topology.

You might also want to look at:

https://github.com/woodbri/osrm-tools
   - a tool to move pgrouting data to Project-OSRM

https://github.com/DennisOSRM/Project-OSRM
   - a high performance routing engine

A tool like you are describing that can load data and prepare a graph or 
move data between these projects would be extremely useful.

I look forward to hearing more about your ideas.

Thanks,
   -Steve Woodbridge

On 2/17/2014 5:13 AM, ?????? ????? wrote:
> Hello everyone.
>
> I am a last year student at Moscow Power Engineering Institute, Russia.
> For GSoC 2014 I would like to work on networking capabilities in GDAL/OGR.
>
> _
> _
>
> _Overall idea_
>
> I would like to try to implement a universal network model. The
> universality of the model would reflect not only in the ability to use
> different GIS formats to store and transfer network data (which OGR is a
> grate basis for), but also to be able to design and simulate different
> types of network applications (engineering, natural, etc). I understand
> that it is rather ambitious to consider all possible aspects of all
> network types. But as a first step I would like to cover only the basic
> aspects, that can be generalized and to provide a ?platform? which can
> be used by other developers to create their own extensions which are
> specific to the concrete network type.
>
>
> _Target scope for GSoC 2014_
>
> Today none of OGR drivers supports network functionality. The idea is to
> implement a new OGR driver, which will deal with networks built over the
> spatial data. The spatial data together with the network data will be
> stored in one of the OGR-supported formats, which would be specified
> during the creation of the network.
>
> Planned features of the new driver:
>
> 1. Reading/writing data from/to the source, creating layers, editing
> attributes, etc (as any new OGR driver must provide);
>
> 2. The user would also be able to do the following, assuming that all
> the special network data is the data of the current GIS-format:
>
>
> - Read/Write the information about the whole network (network metadata);
>
> - Edit special network objects parameters such as blocking state, or
> direction of the flow;
>
> - Import objects from the external sources (the driver adds missing
> network parameters to them);
>
> - Set/unset connections among network objects;
>
> - Edit the sets of the network rules.
>
> 3. Each object in the network will have a set of relations with other
> objects, which are stored separately and form a network graph;
>
> 4. The whole network will have a set of rules that describes the
> connection possibilities of different object types in the network. The
> network will also have a set of rules that describes the influence of
> each type of object to the state of the whole network and to the other
> types of objects. It can also be called as a behavior of the object in
> the context of the network specialization (engineering purpose).
>
>
> _Current status_
>
> https://github.com/MikhanGusev/gnm
>
> As a matter of fact I've been working on this for a while, and I've
> already completed few things. Here is what I've accomplished already:
>
> 1. Complete. The driver and most of the required virtual interfaces are
> already implemented;
>
> 2. Complete. All data from the external source is wrapped with the
> network proxy and the user can edit it.
>
> 3. Currently, I'm thinking about the way, how the network graph will be
> stored.
>
>
> Best regards,
>
> Mikhail Gusev.
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Mon Feb 17 06:56:29 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 17 Feb 2014 15:56:29 +0100
Subject: [gdal-dev] GSoC 2014
In-Reply-To: <53021DC2.4030601@swoodbridge.com>
References: <CAJB43VqOcp0YM8sFJTmNgq1b9KmYkcHr8YXnq1JrgMf6RoXnjg@mail.gmail.com>
	<53021DC2.4030601@swoodbridge.com>
Message-ID: <1392648989.5302231df0760@imp.free.fr>

Also of potential interest :
- Virtual Network, a module of Spatialite :
https://www.gaia-gis.it/spatialite-2.3.0/spatialite-network-2.3.0.html
- GraphServer : https://github.com/graphserver/graphserver/tree/master
- OpenTripPlanner :  http://opentripplanner.com/

> Mikhail,
>
> This is a very interesting idea.
>
> You might want to add specific support pgRouting which already supports
> building graphs, creating routing topology and solving various graph
> problem using postgis for geometry and tables for building and linking
> the topology.
>
> You might also want to look at:
>
> https://github.com/woodbri/osrm-tools
>    - a tool to move pgrouting data to Project-OSRM
>
> https://github.com/DennisOSRM/Project-OSRM
>    - a high performance routing engine
>
> A tool like you are describing that can load data and prepare a graph or
> move data between these projects would be extremely useful.
>
> I look forward to hearing more about your ideas.
>
> Thanks,
>    -Steve Woodbridge
>
> On 2/17/2014 5:13 AM, ?????
?????? ?????????? wrote:
> > Hello everyone.
> >
> > I am a last year student at Moscow Power Engineering Institute, Russia.
> > For GSoC 2014 I would like to work on networking capabilities in GDAL/OGR.
> >
> > _
> > _
> >
> > _Overall idea_
> >
> > I would like to try to implement a universal network model. The
> > universality of the model would reflect not only in the ability to use
> > different GIS formats to store and transfer network data (which OGR is a
> > grate basis for), but also to be able to design and simulate different
> > types of network applications (engineering, natural, etc). I understand
> > that it is rather ambitious to consider all possible aspects of all
> > network types. But as a first step I would like to cover only the basic
> > aspects, that can be generalized and to provide a ???platform??? which can
> > be used by other developers to create their own extensions which are
> > specific to the concrete network type.
> >
> >
> > _Target scope for GSoC 2014_
> >
> > Today none of OGR drivers supports network functionality. The idea is to
> > implement a new OGR driver, which will deal with networks built over the
> > spatial data. The spatial data together with the network data will be
> > stored in one of the OGR-supported formats, which would be specified
> > during the creation of the network.
> >
> > Planned features of the new driver:
> >
> > 1. Reading/writing data from/to the source, creating layers, editing
> > attributes, etc (as any new OGR driver must provide);
> >
> > 2. The user would also be able to do the following, assuming that all
> > the special network data is the data of the current GIS-format:
> >
> >
> > - Read/Write the information about the whole network (network metadata);
> >
> > - Edit special network objects parameters such as blocking state, or
> > direction of the flow;
> >
> > - Import objects from the external sources (the driver adds missing
> > network parameters to them);
> >
> > - Set/unset connections among network objects;
> >
> > - Edit the sets of the network rules.
> >
> > 3. Each object in the network will have a set of relations with other
> > objects, which are stored separately and form a network graph;
> >
> > 4. The whole network will have a set of rules that describes the
> > connection possibilities of different object types in the network. The
> > network will also have a set of rules that describes the influence of
> > each type of object to the state of the whole network and to the other
> > types of objects. It can also be called as a behavior of the object in
> > the context of the network specialization (engineering purpose).
> >
> >
> > _Current status_
> >
> > https://github.com/MikhanGusev/gnm
> >
> > As a matter of fact I've been working on this for a while, and I've
> > already completed few things. Here is what I've accomplished already:
> >
> > 1. Complete. The driver and most of the required virtual interfaces are
> > already implemented;
> >
> > 2. Complete. All data from the external source is wrapped with the
> > network proxy and the user can edit it.
> >
> > 3. Currently, I'm thinking about the way, how the network graph will be
> > stored.
> >
> >
> > Best regards,
> >
> > Mikhail Gusev.
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From jukka.rahkonen at mmmtike.fi  Mon Feb 17 07:03:44 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 17 Feb 2014 15:03:44 +0000 (UTC)
Subject: [gdal-dev] GeoPackage fails after touching it with Spatialite-gui
Message-ID: <loom.20140217T152814-749@post.gmane.org>

Hi,

There are no GUI-tools for managing GeoPackage databases at the moment and
because after all they are only SQLite db files just like Spatialite files I
thought it would be a good idea to do some maintenance work for GPKG
database with Spatialite-gui.

I could do a few things with Spatialite-gui without troubles: create a view,
create an index, add column. But then I renamed one table and after that I
cannot use the DB file with GPKG driver any more. SQLite driver does open it
but db is unusable because the geometry BLOBs are different. I have received
two king of error messages from ogrinfo and also a sudden program crash. One
error message is:

ogrinfo test.gpkg
ERROR 1: bad application_id on 'test.gpkg'
ERROR 1: bad application_id on 'test.gpkg'
FAILURE:
Unable to open datasource `test.gpkg' with the following drivers.

Another message is:
ogrinfo test.gpkg
ERROR 1: (null)
INFO: Open of `test.gpkg'
      using driver `GPKG' successful.

To reproduce the error create a GeoPackage with GDAL, open it with
Spatialite-gui and rename one table. I know it is perhaps not a good idea to
rename a GeoPackage table with "ALTER TABLE ... RENAME TO ..." because it
breaks the integrity, but on the other hand, because it seems to be possible
to do so without any triggers and constraints preventing the operation and
the result is an unusable database it could be worth having a look on what
happens.

-Jukka Rahkonen-



From even.rouault at mines-paris.org  Mon Feb 17 07:14:39 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 17 Feb 2014 16:14:39 +0100
Subject: [gdal-dev] GeoPackage fails after touching it with
	Spatialite-gui
In-Reply-To: <loom.20140217T152814-749@post.gmane.org>
References: <loom.20140217T152814-749@post.gmane.org>
Message-ID: <1392650079.5302275fa6295@imp.free.fr>

Jukka,

I highly suspect that the ALTER TABLE must imply a rewriting of the file by
spatialite/spatialite-gui, and when doing so, it doesn't preserve the
"application id" (4 bytes in the header of sqlite file), that geopackage
specification mentions to be set to a particular value. Consequently the
geopackage driver later fails when checking the signature.

A few inline comments below

> Hi,
>
> There are no GUI-tools for managing GeoPackage databases at the moment and
> because after all they are only SQLite db files just like Spatialite files I
> thought it would be a good idea to do some maintenance work for GPKG
> database with Spatialite-gui.
>
> I could do a few things with Spatialite-gui without troubles: create a view,
> create an index, add column. But then I renamed one table and after that I
> cannot use the DB file with GPKG driver any more. SQLite driver does open it
> but db is unusable because the geometry BLOBs are different. I have received
> two king of error messages from ogrinfo and also a sudden program crash. One
> error message is:
>
> ogrinfo test.gpkg
> ERROR 1: bad application_id on 'test.gpkg'
> ERROR 1: bad application_id on 'test.gpkg'
> FAILURE:
> Unable to open datasource `test.gpkg' with the following drivers.

Yes, that's expected if the application id has been changed. That one doesn't
cause a program crash, right ?

>
> Another message is:
> ogrinfo test.gpkg
> ERROR 1: (null)
> INFO: Open of `test.gpkg'
>       using driver `GPKG' successful.

--> Hum, "ERROR 1: (null)" means a NULL pointer used as a string somewhere and a
potential source for crashing.

>
> To reproduce the error create a GeoPackage with GDAL, open it with
> Spatialite-gui and rename one table. I know it is perhaps not a good idea to
> rename a GeoPackage table with "ALTER TABLE ... RENAME TO ..." because it
> breaks the integrity, but on the other hand, because it seems to be possible
> to do so without any triggers and constraints preventing the operation and
> the result is an unusable database it could be worth having a look on what
> happens.
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From jukka.rahkonen at mmmtike.fi  Mon Feb 17 07:27:35 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 17 Feb 2014 15:27:35 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?GeoPackage_fails_after_touching_it_with=09Sp?=
	=?utf-8?q?atialite-gui?=
References: <loom.20140217T152814-749@post.gmane.org>
	<1392650079.5302275fa6295@imp.free.fr>
Message-ID: <loom.20140217T162117-948@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Jukka,
> 
> I highly suspect that the ALTER TABLE must imply a rewriting of the file by
> spatialite/spatialite-gui, and when doing so, it doesn't preserve the
> "application id" (4 bytes in the header of sqlite file), that geopackage
> specification mentions to be set to a particular value. Consequently the
> geopackage driver later fails when checking the signature.

I have not yet found a way to reproduce crash in a reliable way but while
testing I found something else. Does the following mean that the GPKG file
is not totally valid SQLite file or just that GDAL gets puzzled because
there are separate implementations for SQLite/Spatialite and GPKG?


Step 1: create plain SQLite and GPKG databases

C:\data>ogr2ogr -f sqlite  test.sqlite temp.shp
C:\data>ogr2ogr -f gpkg  test.gpkg temp.shp

Step 2: try to rename a table
C:\data>ogrinfo test.sqlite -dialect sqlite -sql "alter table temp rename to
temp2"
INFO: Open of `test.sqlite'
      using driver `SQLite' successful.

C:\data>ogrinfo test.gpkg -dialect sqlite -sql "alter table temp rename to
temp2"
INFO: Open of `test.gpkg'
      using driver `GPKG' successful.
ERROR 1: In ExecuteSQL(): sqlite3_prepare(alter table temp rename to temp2):
  no such table: temp 

I noticed that OGR dialect does not support renaming tables, it suggests to
rename a column instead.

-Jukka-


From even.rouault at mines-paris.org  Mon Feb 17 07:34:54 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 17 Feb 2014 16:34:54 +0100
Subject: [gdal-dev] GeoPackage fails after touching it
	with	Spatialite-gui
In-Reply-To: <loom.20140217T162117-948@post.gmane.org>
References: <loom.20140217T152814-749@post.gmane.org>
	<1392650079.5302275fa6295@imp.free.fr>
	<loom.20140217T162117-948@post.gmane.org>
Message-ID: <1392651294.53022c1e72f49@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

> Even Rouault <even.rouault <at> mines-paris.org> writes:
>
> >
> > Jukka,
> >
> > I highly suspect that the ALTER TABLE must imply a rewriting of the file by
> > spatialite/spatialite-gui, and when doing so, it doesn't preserve the
> > "application id" (4 bytes in the header of sqlite file), that geopackage
> > specification mentions to be set to a particular value. Consequently the
> > geopackage driver later fails when checking the signature.
>
> I have not yet found a way to reproduce crash in a reliable way but while
> testing I found something else. Does the following mean that the GPKG file
> is not totally valid SQLite file or just that GDAL gets puzzled because
> there are separate implementations for SQLite/Spatialite and GPKG?
>
>
> Step 1: create plain SQLite and GPKG databases
>
> C:\data>ogr2ogr -f sqlite  test.sqlite temp.shp
> C:\data>ogr2ogr -f gpkg  test.gpkg temp.shp
>
> Step 2: try to rename a table
> C:\data>ogrinfo test.sqlite -dialect sqlite -sql "alter table temp rename to
> temp2"
> INFO: Open of `test.sqlite'
>       using driver `SQLite' successful.
>
> C:\data>ogrinfo test.gpkg -dialect sqlite -sql "alter table temp rename to
> temp2"
> INFO: Open of `test.gpkg'
>       using driver `GPKG' successful.
> ERROR 1: In ExecuteSQL(): sqlite3_prepare(alter table temp rename to temp2):
>   no such table: temp

Hum, well I can see that you are going to run into problems. The GPKG driver has
no ExecuteSQL() implementation that should directly handle your SQL requests
(what the SQLite driver would do). So it fallbacks to the generic ExecuteSQL()
implementation, which uses the sqlite VirtualOGR mechanism, which does not
support table renaming.
Ideally, the GPKG driver should be extended to implement ExecuteSQL() in a
similar way than the SQLite driver.

>
> I noticed that OGR dialect does not support renaming tables, it suggests to
> rename a column instead.
>
> -Jukka-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From jukka.rahkonen at mmmtike.fi  Mon Feb 17 07:31:55 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 17 Feb 2014 15:31:55 +0000 (UTC)
Subject: [gdal-dev] Ogr2ogr and default value of -gt
References: <loom.20140217T134915-645@post.gmane.org>
Message-ID: <loom.20140217T162829-976@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:

> 
> Hi,
> 
> The default value of -gt parameter of ogr2ogr utility is 200 which is all
> too low for databases. Especially bad it seems to be for SQLite/Spatialite
> and thus also for GeoPackage.
> 
> Are there some drivers which would suffer badly if the default value for -gt
> would be increased to something like 2000 or 4000? It is easy to set the
> value from the command line but most ogr2ogr usage examples we have in the
> documentation are without -gt parameter and I am sure than very many people
> just copy-paste the examples and run ogr2ogr unnecessarily slow.

I took some timings:

ogr2ogr -f GPKG germany.gpkg germany.osm.pbf -gt 20000 -progress 
--config OSM_COMPRESS_NODES YES
Timing: 18 minutes

ogr2ogr -f GPKG germany_2.gpkg germany.osm.pbf -progress 
--config OSM_COMPRESS_NODES YES
Timing: 2 hours and 11 minutes

-Jukka-


From a.furieri at lqt.it  Mon Feb 17 07:47:21 2014
From: a.furieri at lqt.it (a.furieri at lqt.it)
Date: Mon, 17 Feb 2014 16:47:21 +0100
Subject: [gdal-dev] GeoPackage fails after touching it with
	Spatialite-gui
In-Reply-To: <1392650079.5302275fa6295@imp.free.fr>
References: <loom.20140217T152814-749@post.gmane.org>
	<1392650079.5302275fa6295@imp.free.fr>
Message-ID: <fcd731df985991faa2be7429b6b7e200@lqt.it>

On Mon, 17 Feb 2014 16:14:39 +0100, Even Rouault wrote:
> Jukka,
>
> I highly suspect that the ALTER TABLE must imply a rewriting of the 
> file by
> spatialite/spatialite-gui, and when doing so, it doesn't preserve the
> "application id" (4 bytes in the header of sqlite file), that 
> geopackage
> specification mentions to be set to a particular value. Consequently 
> the
> geopackage driver later fails when checking the signature.
>

the current version of spatialite-gui doesn't offerts any support to 
GPKG;
Brad Hards has recently added few GPKG oriented-APIs into 
libspatialite-4.2.0-devel,
but this only affects the library.

the GUI-tool itself *always* assumes it's processing a genuine 
spatialite
DB-file.


>> I could do a few things with Spatialite-gui without troubles: create 
>> a view,
>> create an index, add column. But then I renamed one table and after 
>> that I
>> cannot use the DB file with GPKG driver any more.
>>

Jukka,

if you had actually invoked the user friendly dialog box "rename table"
it's not at all surprising discovering that you've simply introduced
some fatal corruption in your DB
the spatialite_gui tool is strictly intended to support "genuine 
SpatiaLite
DB-files"; I strongly fear that any attempt to use this highly 
specialized
tool on behalf of some GPKG-file would simply end in disasters.

some future version of the GUI tool will surely implement some kind of
GPKG support: but for now using the current version on any GPKG-file
surely is a risky and unsafe business.

bye Sandro

From Ivan.Price at noveltis.fr  Mon Feb 17 08:51:08 2014
From: Ivan.Price at noveltis.fr (Ivan Price)
Date: Mon, 17 Feb 2014 16:51:08 +0000
Subject: [gdal-dev] reprojecting coastcolour (/meris) using python via
 GCPs
In-Reply-To: <530202C0.2040203@nersc.no>
References: <605C20E40C3B7D4E93E0E804EECE898E1EB62FD0@GLORFINDEL.noveltis.loc>
	<530202C0.2040203@nersc.no>
Message-ID: <605C20E40C3B7D4E93E0E804EECE898E1EB631B0@GLORFINDEL.noveltis.loc>

Hi Anton,

thanks for responding,

I have tried adding the tps option like this:

gdal.ReprojectImage(input_ds, output_ds, input_ds.GetProjection(), output_ds.GetProjection(),
                        gdal.GRA_NearestNeighbour, 0.5*1024*1024*1024, 0, None, {'tps': True})

but it has no effect. despite the doco in the link you have there is a max of 9 arguments, (not 10), so i'm not sure its even being used for what it should be. (i'm using the python bindings from gdal 1.9)

regarding nansat it looks very interesting..

after an initial usage I see that i need to make a new mapper module for coastcolour data, presumably based on the MERIS L2 example.. as there are metadata fields that are missing in the coastcolour data that the envisat mapper is missing.

it is interesting to see is that the reprojection is done in python, but using a VRT mechanism. maybe i can adapt this approach to get something working.

thanks very much for the pointer

-i




-----Message d'origine-----
De?: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Anton Korosov
Envoy??: Monday, 17 February 2014 13:38
??: gdal-dev at lists.osgeo.org
Objet?: Re: [gdal-dev] reprojecting coastcolour (/meris) using python via GCPs

Hello Ivan,

ReprojectImage() has a parameter psOptions()
http://www.gdal.org/gdalwarper_8h.html#ad36462e8d5d34642df7f9ea1cfc2fec4
It should accept any of the warping options, e.g. '-tps'
http://www.gdal.org/gdalwarp.html

I'm not 100% sure (since I'm using Python) but it may work.


I'll take this chance also to promote Nansat, a scientist-friendly Python tool for working with satellite and model data:
Repo: https://github.com/nansencenter/nansat
Wiki: https://github.com/nansencenter/nansat/wiki
and API-rference: http://nansencenter.github.io/nansat/

It is a wrapper around GDAL, which adds scientific meaning to the opened images. Briefly: GDAL doesn't know much about e.g. band 22 in a MERIS image, Nansat does. It provides full information and allows simple usage, e.g.:
n = Nansat(meris_image)
n.reproject(dstDomain, tps=True)
n.export('outFile.nc')

It can open MERIS as well as tens of other formats.


Best regards!
Anton

On 02/17/2014 10:46 AM, Ivan Price wrote:
>
> Hello,
>
> I am trying to reproject a window inside a coastcolour (=MERIS) image. As far as I can see GDAL cannot read the coastcolour data directly, so i am reading the coastcolour netcdf in python, building a source dataset using the memory driver, adding GCPS (1 for every 10th pixel) and writing the data to it, then reprojecting the source dataset to a destination dataset which is a spatial subset of the original in wgs84 lat/long.
>
> This works fine and is relatively fast, but the reprojection is not accurate, the results are out by about 6-10 pixels (in various directions). On reading the forums it seems if i was using gdalwarp i would be using -tps, however the ReprojectImage() function does not seem to offer this parameter ? And i don't have the option of using the commandline tool as even gdal 1.10 cannot recognise the coastcolour data.
>
> So i guess i have 2 questions.. has anyone had any success reading coastcolour data with the gdal command line tools, and secondly:
>
> how can i get ReprojectImage() to be more accurate, given i have a GCP for every pixel ?
>
> thanks and regards,
>
> -ivan
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From dengo at gmx.net  Mon Feb 17 08:56:25 2014
From: dengo at gmx.net (Dennis Gocke)
Date: Mon, 17 Feb 2014 17:56:25 +0100
Subject: [gdal-dev] memory problems with huge raster sizes
Message-ID: <CALqbEi4mNnyCoHwUaOUrm2h=Cw0yYuJWMYeSHwpEZNpsCTz0ug@mail.gmail.com>

If anyone is interested. I have implemented a dynamic subBlockSize. It
seems to work just fine and the memory consumption is now minimal even with
huge WMS rasters.

I have attached a patch file with the changes.

Greetings,
Dennis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140217/2c32540d/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 0001-dynamic-subBlockSize-fixes-problem-with-huge-rasters.patch
Type: application/octet-stream
Size: 6009 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140217/2c32540d/attachment.obj>

From Ivan.Price at noveltis.fr  Mon Feb 17 09:03:18 2014
From: Ivan.Price at noveltis.fr (Ivan Price)
Date: Mon, 17 Feb 2014 17:03:18 +0000
Subject: [gdal-dev] reprojecting coastcolour (/meris) using python via
 GCPs
In-Reply-To: <CA+TxYvPWUd+LS97XOPhyD8h3uDia1MYQe4rSjyH3eTcN6q1fWA@mail.gmail.com>
References: <605C20E40C3B7D4E93E0E804EECE898E1EB62FD0@GLORFINDEL.noveltis.loc>
	<CA+TxYvPWUd+LS97XOPhyD8h3uDia1MYQe4rSjyH3eTcN6q1fWA@mail.gmail.com>
Message-ID: <605C20E40C3B7D4E93E0E804EECE898E1EB631DE@GLORFINDEL.noveltis.loc>

Hi Etienne,

firstly the problem reading the MERIS (actually coastcolour) data was due to the fact i was using gdal 1.6, after upgrading to 1.9 i can at least list the bands so i guess that 'works'.

regarding the use of the filesystem, i tried that, however it is slow to write out the whole dataset to disk, (i need to treat hundreds of images), so i was looking for a way to avoid this.. although it will be my fallback option if all else fails..

either way i'll reply to the list with what we do in the end

thanks for your response,

-i



De : Etienne Tourigny [mailto:etourigny.dev at gmail.com]
Envoy? : Monday, 17 February 2014 14:09
? : Ivan Price
Cc : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] reprojecting coastcolour (/meris) using python via GCPs

As far as I know, the gdal warp api is not exposed to python.

I have no idea on reading the MERIS data with the gdal netcdf driver - what I the problem?

But you might be able to use this workaround: instead of creating a source dataset using the memory driver, create a file on disk (in gtiff format) with GCPS and write data to disk, and then use gdalwarp on that.

Etienne

On Mon, Feb 17, 2014 at 6:46 AM, Ivan Price <Ivan.Price at noveltis.fr<mailto:Ivan.Price at noveltis.fr>> wrote:

Hello,

I am trying to reproject a window inside a coastcolour (=MERIS) image. As far as I can see GDAL cannot read the coastcolour data directly, so i am reading the coastcolour netcdf in python, building a source dataset using the memory driver, adding GCPS (1 for every 10th pixel) and writing the data to it, then reprojecting the source dataset to a destination dataset which is a spatial subset of the original in wgs84 lat/long.

This works fine and is relatively fast, but the reprojection is not accurate, the results are out by about 6-10 pixels (in various directions). On reading the forums it seems if i was using gdalwarp i would be using -tps, however the ReprojectImage() function does not seem to offer this parameter ? And i don't have the option of using the commandline tool as even gdal 1.10 cannot recognise the coastcolour data.

So i guess i have 2 questions.. has anyone had any success reading coastcolour data with the gdal command line tools, and secondly:

how can i get ReprojectImage() to be more accurate, given i have a GCP for every pixel ?

thanks and regards,

-ivan



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140217/281f4e42/attachment.html>

From even.rouault at mines-paris.org  Mon Feb 17 10:39:34 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 17 Feb 2014 19:39:34 +0100
Subject: [gdal-dev] Ogr2ogr and default value of -gt
In-Reply-To: <loom.20140217T162829-976@post.gmane.org>
References: <loom.20140217T134915-645@post.gmane.org>
	<loom.20140217T162829-976@post.gmane.org>
Message-ID: <201402171939.35003.even.rouault@mines-paris.org>

Le lundi 17 f?vrier 2014 16:31:55, Jukka Rahkonen a ?crit :
> Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:
> > Hi,
> > 
> > The default value of -gt parameter of ogr2ogr utility is 200 which is all
> > too low for databases. Especially bad it seems to be for
> > SQLite/Spatialite and thus also for GeoPackage.
> > 
> > Are there some drivers which would suffer badly if the default value for
> > -gt would be increased to something like 2000 or 4000? It is easy to set
> > the value from the command line but most ogr2ogr usage examples we have
> > in the documentation are without -gt parameter and I am sure than very
> > many people just copy-paste the examples and run ogr2ogr unnecessarily
> > slow.
> 
> I took some timings:
> 
> ogr2ogr -f GPKG germany.gpkg germany.osm.pbf -gt 20000 -progress
> --config OSM_COMPRESS_NODES YES
> Timing: 18 minutes
> 
> ogr2ogr -f GPKG germany_2.gpkg germany.osm.pbf -progress
> --config OSM_COMPRESS_NODES YES
> Timing: 2 hours and 11 minutes

Jukka,

could you create a ticket about that ? I think we can try 20000. That thread 
http://stackoverflow.com/questions/709708/maximum-transaction-size-in-
postgresql seems to suggest that there's no problem with big transactions for 
PostgreSQL. Not sure about other backends : mysql, oci, etc... ? If anyone has 
an objection to raise against 20000 instead of 200, please speak up.

Even

> 
> -Jukka-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From etourigny.dev at gmail.com  Mon Feb 17 11:32:00 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 17 Feb 2014 16:32:00 -0300
Subject: [gdal-dev] reprojecting coastcolour (/meris) using python via
	GCPs
In-Reply-To: <605C20E40C3B7D4E93E0E804EECE898E1EB631DE@GLORFINDEL.noveltis.loc>
References: <605C20E40C3B7D4E93E0E804EECE898E1EB62FD0@GLORFINDEL.noveltis.loc>
	<CA+TxYvPWUd+LS97XOPhyD8h3uDia1MYQe4rSjyH3eTcN6q1fWA@mail.gmail.com>
	<605C20E40C3B7D4E93E0E804EECE898E1EB631DE@GLORFINDEL.noveltis.loc>
Message-ID: <CA+TxYvM8DEz1ikuZP9Bt=czY1yi+-6RZvkuWCiLrOifkXkjT0Q@mail.gmail.com>

On Mon, Feb 17, 2014 at 2:03 PM, Ivan Price <Ivan.Price at noveltis.fr> wrote:

>  Hi Etienne,
>
>
>
> firstly the problem reading the MERIS (actually coastcolour) data was due
> to the fact i was using gdal 1.6, after upgrading to 1.9 i can at least
> list the bands so i guess that 'works'.
>

does it really work or sort of? If not, please file a bug report with an
example data set attached or a link to it.


>
>
> regarding the use of the filesystem, i tried that, however it is slow to
> write out the whole dataset to disk, (i need to treat hundreds of images),
> so i was looking for a way to avoid this.. although it will be my fallback
> option if all else fails..
>

have you tried using a .vrt file?


>
>
> either way i'll reply to the list with what we do in the end
>
>
>
> thanks for your response,
>
>
>
> -i
>
>
>
>
>
>
>
> *De :* Etienne Tourigny [mailto:etourigny.dev at gmail.com]
> *Envoy? :* Monday, 17 February 2014 14:09
> *? :* Ivan Price
> *Cc :* gdal-dev at lists.osgeo.org
>
> *Objet :* Re: [gdal-dev] reprojecting coastcolour (/meris) using python
> via GCPs
>
>
>
> As far as I know, the gdal warp api is not exposed to python.
>
>
>
> I have no idea on reading the MERIS data with the gdal netcdf driver -
> what I the problem?
>
>
>
> But you might be able to use this workaround: instead of creating a source
> dataset using the memory driver, create a file on disk (in gtiff format)
> with GCPS and write data to disk, and then use gdalwarp on that.
>
>
>
> Etienne
>
>
>
> On Mon, Feb 17, 2014 at 6:46 AM, Ivan Price <Ivan.Price at noveltis.fr>
> wrote:
>
>
>
> Hello,
>
>
>
> I am trying to reproject a window inside a coastcolour (=MERIS) image. As
> far as I can see GDAL cannot read the coastcolour data directly, so i am
> reading the coastcolour netcdf in python, building a source dataset using
> the memory driver, adding GCPS (1 for every 10th pixel) and writing the
> data to it, then reprojecting the source dataset to a destination dataset
> which is a spatial subset of the original in wgs84 lat/long.
>
>
>
> This works fine and is relatively fast, but the reprojection is not
> accurate, the results are out by about 6-10 pixels (in various directions).
> On reading the forums it seems if i was using gdalwarp i would be using
> -tps, however the ReprojectImage() function does not seem to offer this
> parameter ? And i don't have the option of using the commandline tool as
> even gdal 1.10 cannot recognise the coastcolour data.
>
>
>
> So i guess i have 2 questions.. has anyone had any success reading
> coastcolour data with the gdal command line tools, and secondly:
>
>
>
> how can i get ReprojectImage() to be more accurate, given i have a GCP for
> every pixel ?
>
>
>
> thanks and regards,
>
>
>
> -ivan
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140217/74fffa2c/attachment-0001.html>

From sault.don at gmail.com  Mon Feb 17 14:12:48 2014
From: sault.don at gmail.com (Saulteau Don)
Date: Mon, 17 Feb 2014 15:12:48 -0700
Subject: [gdal-dev] Ogr2ogr and default value of -gt
In-Reply-To: <201402171939.35003.even.rouault@mines-paris.org>
References: <loom.20140217T134915-645@post.gmane.org>	<loom.20140217T162829-976@post.gmane.org>
	<201402171939.35003.even.rouault@mines-paris.org>
Message-ID: <53028960.20007@gmail.com>

On 2/17/2014 11:39 AM, Even Rouault wrote:
> Le lundi 17 f?vrier 2014 16:31:55, Jukka Rahkonen a ?crit :
>> Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:
>>
>> I took some timings:
>>
>> ogr2ogr -f GPKG germany.gpkg germany.osm.pbf -gt 20000 -progress
>> --config OSM_COMPRESS_NODES YES
>> Timing: 18 minutes
>>
>> ogr2ogr -f GPKG germany_2.gpkg germany.osm.pbf -progress
>> --config OSM_COMPRESS_NODES YES
>> Timing: 2 hours and 11 minutes
>
> Jukka,
> If anyone has
> an objection to raise against 20000 instead of 200, please speak up.
>
> Even
>
>>
>> -Jukka-
>>
>

Does -gt 65536, which is a high value mentioned in the docs have a 
performance penalty for other RDBMS? I use it on Spatialite and 
PostgreSQL db's without issues.



Donovan

From jukka.rahkonen at mmmtike.fi  Mon Feb 17 22:19:23 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 18 Feb 2014 06:19:23 +0000 (UTC)
Subject: [gdal-dev] Ogr2ogr and default value of -gt
References: <loom.20140217T134915-645@post.gmane.org>	<loom.20140217T162829-976@post.gmane.org>
	<201402171939.35003.even.rouault@mines-paris.org>
	<53028960.20007@gmail.com>
Message-ID: <loom.20140218T063956-414@post.gmane.org>

Saulteau Don <sault.don <at> gmail.com> writes:

> 
> On 2/17/2014 11:39 AM, Even Rouault wrote:
> > Le lundi 17 f?vrier 2014 16:31:55, Jukka Rahkonen a ?crit :
> >> Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:
> >>
> >> I took some timings:
> >>
> >> ogr2ogr -f GPKG germany.gpkg germany.osm.pbf -gt 20000 -progress
> >> --config OSM_COMPRESS_NODES YES
> >> Timing: 18 minutes
> >>
> >> ogr2ogr -f GPKG germany_2.gpkg germany.osm.pbf -progress
> >> --config OSM_COMPRESS_NODES YES
> >> Timing: 2 hours and 11 minutes
> >
> > Jukka,
> > If anyone has
> > an objection to raise against 20000 instead of 200, please speak up.
> >
> > Even
> >
> >>
> >> -Jukka-
> >>
> >
> 
> Does -gt 65536, which is a high value mentioned in the docs have a 
> performance penalty for other RDBMS? I use it on Spatialite and 
> PostgreSQL db's without issues.
> 
> Donovan

I do not believe it is so much about performance but perhaps at some time
RDBMS whith is accessed through a slow network would get a timeout and
decides to do a rollback. And RDBMS must also reserve resources for being
able to rollback the whole transaction. The -gt option is still there and
20000 is hundred times more than 200 so it feels like a good new default.

Actually I have been thinking that rollbacks with ogr2ogr are rather
useless. If RDBMS rollbacks just one block user must still try again with 
the whole dataset because there is no way to know which transaction failed
and having 999800 rows out of million written into DB is as good as having
no rows at all. Thus it could be a good strategy to try to do the whole
conversion into database as a one single transaction. Then the rollback
would behave in a logically correct way with ogr2ogr "either all or
nothing". The cost was discussed already: reserved DB resources for being
able to do rollback. But perhaps this is not enough strong argument for
having an ogr2ogr option "-gt auto" for single transactions.

-Jukka Rahkonen-




From JPalmer at linz.govt.nz  Tue Feb 18 00:08:13 2014
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Tue, 18 Feb 2014 21:08:13 +1300
Subject: [gdal-dev] Ogr2ogr and default value of -gt
In-Reply-To: <C6B695652D5E6B4597E90C5734C0242621AEE48AB4@prdlsmmsg01.ad.linz.govt.nz>
References: <loom.20140217T134915-645@post.gmane.org>
	<loom.20140217T162829-976@post.gmane.org>
	<201402171939.35003.even.rouault@mines-paris.org>
	<53028960.20007@gmail.com>, <loom.20140218T063956-414@post.gmane.org>,
	<C6B695652D5E6B4597E90C5734C0242621AEE48AB4@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <C6B695652D5E6B4597E90C5734C0242621AEE48AB7@prdlsmmsg01.ad.linz.govt.nz>

> I do not believe it is so much about performance but perhaps at some time
> RDBMS whith is accessed through a slow network would get a timeout and
> decides to do a rollback. And RDBMS must also reserve resources for being
> able to rollback the whole transaction. The -gt option is still there and
> 20000 is hundred times more than 200 so it feels like a good new default.
>
> Actually I have been thinking that rollbacks with ogr2ogr are rather
> useless. If RDBMS rollbacks just one block user must still try again with
> the whole dataset because there is no way to know which transaction failed
> and having 999800 rows out of million written into DB is as good as having
> no rows at all. Thus it could be a good strategy to try to do the whole
> conversion into database as a one single transaction. Then the rollback
> would behave in a logically correct way with ogr2ogr "either all or
> nothing". The cost was discussed already: reserved DB resources for being
> able to do rollback. But perhaps this is not enough strong argument for
> having an ogr2ogr option "-gt auto" for single transactions.
ev

I agree, especially in the case of driver such as PostgreSQL with its MVCC system.

Of course this is possible when using the OGC API when using the layer StartTransaction CommitTransaction methods. As a side issue I've often thought it would be a good idea to have the transaction control at the datasource level so multiple layers can be updated within the same transaction.

Cheers,
Jeremy

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From jukka.rahkonen at mmmtike.fi  Tue Feb 18 00:22:40 2014
From: jukka.rahkonen at mmmtike.fi (Rahkonen Jukka  (Tike))
Date: Tue, 18 Feb 2014 08:22:40 +0000
Subject: [gdal-dev] GeoPackage fails after touching it with
 Spatialite-gui
Message-ID: <EFE5D7EE2EC8D3438FE02E356F81E35A032B46@FITLK-EXMBX04.msvyvi.vaha.local>

Hi,

Is this the same issue about how GPKG is handling ExecuteSQL()? If it is, then I will make a ticket because a database without indexes is missing a lot. Or is there some other way how I could create index into GPKG with GDAL? Alessandro Furieri told already that using spatialite-gui/tools for GeoPackages is currently not safe.

ogrinfo test.gpkg -dialect sqlite -sql "create index knro_idx on test (knro)"
INFO: Open of `test.gpkg'
      using driver `GPKG' successful.
ERROR 1: In ExecuteSQL(): sqlite3_prepare(create index knro_idx on test (knro)):
  no such table: main.test

-Jukka-

Even Rouault wrote:
> 
> Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:
> 
> > Even Rouault <even.rouault <at> mines-paris.org> writes:
> >
> > >
> > > Jukka,
> > >
> > > I highly suspect that the ALTER TABLE must imply a rewriting of the
> > > file by spatialite/spatialite-gui, and when doing so, it doesn't
> > > preserve the "application id" (4 bytes in the header of sqlite
> > > file), that geopackage specification mentions to be set to a
> > > particular value. Consequently the geopackage driver later fails when
> checking the signature.
> >
> > I have not yet found a way to reproduce crash in a reliable way but
> > while testing I found something else. Does the following mean that the
> > GPKG file is not totally valid SQLite file or just that GDAL gets
> > puzzled because there are separate implementations for SQLite/Spatialite and
> GPKG?
> >
> >
> > Step 1: create plain SQLite and GPKG databases
> >
> > C:\data>ogr2ogr -f sqlite  test.sqlite temp.shp C:\data>ogr2ogr -f
> > gpkg  test.gpkg temp.shp
> >
> > Step 2: try to rename a table
> > C:\data>ogrinfo test.sqlite -dialect sqlite -sql "alter table temp
> > rename to temp2"
> > INFO: Open of `test.sqlite'
> >       using driver `SQLite' successful.
> >
> > C:\data>ogrinfo test.gpkg -dialect sqlite -sql "alter table temp
> > rename to temp2"
> > INFO: Open of `test.gpkg'
> >       using driver `GPKG' successful.
> > ERROR 1: In ExecuteSQL(): sqlite3_prepare(alter table temp rename to temp2):
> >   no such table: temp
> 
> Hum, well I can see that you are going to run into problems. The GPKG driver has
> no ExecuteSQL() implementation that should directly handle your SQL requests
> (what the SQLite driver would do). So it fallbacks to the generic ExecuteSQL()
> implementation, which uses the sqlite VirtualOGR mechanism, which does not
> support table renaming.
> Ideally, the GPKG driver should be extended to implement ExecuteSQL() in a
> similar way than the SQLite driver.
> 
> >
> > I noticed that OGR dialect does not support renaming tables, it
> > suggests to rename a column instead.
> >
> > -Jukka-
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> 


From anton.korosov at nersc.no  Tue Feb 18 00:49:20 2014
From: anton.korosov at nersc.no (Anton Korosov)
Date: Tue, 18 Feb 2014 09:49:20 +0100
Subject: [gdal-dev] reprojecting coastcolour (/meris) using python via
 GCPs
In-Reply-To: <605C20E40C3B7D4E93E0E804EECE898E1EB631B0@GLORFINDEL.noveltis.loc>
References: <605C20E40C3B7D4E93E0E804EECE898E1EB62FD0@GLORFINDEL.noveltis.loc>
	<530202C0.2040203@nersc.no>
	<605C20E40C3B7D4E93E0E804EECE898E1EB631B0@GLORFINDEL.noveltis.loc>
Message-ID: <53031E90.4040303@nersc.no>

Hi Ivan,

if you are using Python, then options are usually given as a list of 
strings. I cannot find in the gdal docs at the moment (docs for python 
bindings are quite scarce), but you can check in Nansat:

https://github.com/nansencenter/nansat/blob/develop/vrt.py#L1641

So for your case it may be ['TPS=True'] or ['METHOD=GCP_TPS']

Regarding Nansat, we can add your mapper in the repository, or I can 
help a little with development of it (if you provide band description 
and an example file). Our mailing list is nansat-dev at googlegroups.com


Regards!
Anton

On 02/17/2014 05:51 PM, Ivan Price wrote:
> Hi Anton,
>
> thanks for responding,
>
> I have tried adding the tps option like this:
>
> gdal.ReprojectImage(input_ds, output_ds, input_ds.GetProjection(), output_ds.GetProjection(),
>                          gdal.GRA_NearestNeighbour, 0.5*1024*1024*1024, 0, None, {'tps': True})
>
> but it has no effect. despite the doco in the link you have there is a max of 9 arguments, (not 10), so i'm not sure its even being used for what it should be. (i'm using the python bindings from gdal 1.9)
>
> regarding nansat it looks very interesting..
>
> after an initial usage I see that i need to make a new mapper module for coastcolour data, presumably based on the MERIS L2 example.. as there are metadata fields that are missing in the coastcolour data that the envisat mapper is missing.
>
> it is interesting to see is that the reprojection is done in python, but using a VRT mechanism. maybe i can adapt this approach to get something working.
>
> thanks very much for the pointer
>
> -i
>
>
>
>
> -----Message d'origine-----
> De : gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Anton Korosov
> Envoy? : Monday, 17 February 2014 13:38
> ? : gdal-dev at lists.osgeo.org
> Objet : Re: [gdal-dev] reprojecting coastcolour (/meris) using python via GCPs
>
> Hello Ivan,
>
> ReprojectImage() has a parameter psOptions()
> http://www.gdal.org/gdalwarper_8h.html#ad36462e8d5d34642df7f9ea1cfc2fec4
> It should accept any of the warping options, e.g. '-tps'
> http://www.gdal.org/gdalwarp.html
>
> I'm not 100% sure (since I'm using Python) but it may work.
>
>
> I'll take this chance also to promote Nansat, a scientist-friendly Python tool for working with satellite and model data:
> Repo: https://github.com/nansencenter/nansat
> Wiki: https://github.com/nansencenter/nansat/wiki
> and API-rference: http://nansencenter.github.io/nansat/
>
> It is a wrapper around GDAL, which adds scientific meaning to the opened images. Briefly: GDAL doesn't know much about e.g. band 22 in a MERIS image, Nansat does. It provides full information and allows simple usage, e.g.:
> n = Nansat(meris_image)
> n.reproject(dstDomain, tps=True)
> n.export('outFile.nc')
>
> It can open MERIS as well as tens of other formats.
>
>
> Best regards!
> Anton
>
> On 02/17/2014 10:46 AM, Ivan Price wrote:
>>
>> Hello,
>>
>> I am trying to reproject a window inside a coastcolour (=MERIS) image. As far as I can see GDAL cannot read the coastcolour data directly, so i am reading the coastcolour netcdf in python, building a source dataset using the memory driver, adding GCPS (1 for every 10th pixel) and writing the data to it, then reprojecting the source dataset to a destination dataset which is a spatial subset of the original in wgs84 lat/long.
>>
>> This works fine and is relatively fast, but the reprojection is not accurate, the results are out by about 6-10 pixels (in various directions). On reading the forums it seems if i was using gdalwarp i would be using -tps, however the ReprojectImage() function does not seem to offer this parameter ? And i don't have the option of using the commandline tool as even gdal 1.10 cannot recognise the coastcolour data.
>>
>> So i guess i have 2 questions.. has anyone had any success reading coastcolour data with the gdal command line tools, and secondly:
>>
>> how can i get ReprojectImage() to be more accurate, given i have a GCP for every pixel ?
>>
>> thanks and regards,
>>
>> -ivan
>>
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Tue Feb 18 01:06:46 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 18 Feb 2014 10:06:46 +0100
Subject: [gdal-dev] GeoPackage fails after touching it with
	Spatialite-gui
In-Reply-To: <EFE5D7EE2EC8D3438FE02E356F81E35A032B46@FITLK-EXMBX04.msvyvi.vaha.local>
References: <EFE5D7EE2EC8D3438FE02E356F81E35A032B46@FITLK-EXMBX04.msvyvi.vaha.local>
Message-ID: <1392714406.530322a62b7ac@imp.free.fr>

Hi Jukka,

yes, this is the same issue. -dialect sqlite is quite powerfull, but can only
handle SELECT / UPDATE / DELETE, no other fancy stuff. The GPKG driver should
just have its ExecuteSQL() implementation.
Currently I guess you could open a .gpkg with the sqlite3 binary. I wouldn't
expect it to alter the application_id field (or perhaps in the same situation as
spatialite_gui does).

Even

> Hi,
>
> Is this the same issue about how GPKG is handling ExecuteSQL()? If it is,
> then I will make a ticket because a database without indexes is missing a
> lot. Or is there some other way how I could create index into GPKG with GDAL?
> Alessandro Furieri told already that using spatialite-gui/tools for
> GeoPackages is currently not safe.
>
> ogrinfo test.gpkg -dialect sqlite -sql "create index knro_idx on test (knro)"
> INFO: Open of `test.gpkg'
>       using driver `GPKG' successful.
> ERROR 1: In ExecuteSQL(): sqlite3_prepare(create index knro_idx on test
> (knro)):
>   no such table: main.test
>
> -Jukka-
>
> Even Rouault wrote:
> >
> > Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:
> >
> > > Even Rouault <even.rouault <at> mines-paris.org> writes:
> > >
> > > >
> > > > Jukka,
> > > >
> > > > I highly suspect that the ALTER TABLE must imply a rewriting of the
> > > > file by spatialite/spatialite-gui, and when doing so, it doesn't
> > > > preserve the "application id" (4 bytes in the header of sqlite
> > > > file), that geopackage specification mentions to be set to a
> > > > particular value. Consequently the geopackage driver later fails when
> > checking the signature.
> > >
> > > I have not yet found a way to reproduce crash in a reliable way but
> > > while testing I found something else. Does the following mean that the
> > > GPKG file is not totally valid SQLite file or just that GDAL gets
> > > puzzled because there are separate implementations for SQLite/Spatialite
> and
> > GPKG?
> > >
> > >
> > > Step 1: create plain SQLite and GPKG databases
> > >
> > > C:\data>ogr2ogr -f sqlite  test.sqlite temp.shp C:\data>ogr2ogr -f
> > > gpkg  test.gpkg temp.shp
> > >
> > > Step 2: try to rename a table
> > > C:\data>ogrinfo test.sqlite -dialect sqlite -sql "alter table temp
> > > rename to temp2"
> > > INFO: Open of `test.sqlite'
> > >       using driver `SQLite' successful.
> > >
> > > C:\data>ogrinfo test.gpkg -dialect sqlite -sql "alter table temp
> > > rename to temp2"
> > > INFO: Open of `test.gpkg'
> > >       using driver `GPKG' successful.
> > > ERROR 1: In ExecuteSQL(): sqlite3_prepare(alter table temp rename to
> temp2):
> > >   no such table: temp
> >
> > Hum, well I can see that you are going to run into problems. The GPKG
> driver has
> > no ExecuteSQL() implementation that should directly handle your SQL
> requests
> > (what the SQLite driver would do). So it fallbacks to the generic
> ExecuteSQL()
> > implementation, which uses the sqlite VirtualOGR mechanism, which does not
> > support table renaming.
> > Ideally, the GPKG driver should be extended to implement ExecuteSQL() in a
> > similar way than the SQLite driver.
> >
> > >
> > > I noticed that OGR dialect does not support renaming tables, it
> > > suggests to rename a column instead.
> > >
> > > -Jukka-
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From gusevmihs at gmail.com  Tue Feb 18 01:12:20 2014
From: gusevmihs at gmail.com (=?KOI8-R?B?7cnIwcnMIOfV08XX?=)
Date: Tue, 18 Feb 2014 13:12:20 +0400
Subject: [gdal-dev] GSoC 2014
In-Reply-To: <1392648989.5302231df0760@imp.free.fr>
References: <CAJB43VqOcp0YM8sFJTmNgq1b9KmYkcHr8YXnq1JrgMf6RoXnjg@mail.gmail.com>
	<53021DC2.4030601@swoodbridge.com>
	<1392648989.5302231df0760@imp.free.fr>
Message-ID: <CAJB43VpjYjxWHLZSGC-U3_xfjxnOhCEYO+gA8C7MLPesETFD4w@mail.gmail.com>

Thanks everyone for the responding and for some interesting ideas. I will
try to think what I can do with them.


2014-02-17 18:56 GMT+04:00 Even Rouault <even.rouault at mines-paris.org>:

> Also of potential interest :
> - Virtual Network, a module of Spatialite :
> https://www.gaia-gis.it/spatialite-2.3.0/spatialite-network-2.3.0.html
> - GraphServer : https://github.com/graphserver/graphserver/tree/master
> - OpenTripPlanner :  http://opentripplanner.com/
>
> > Mikhail,
> >
> > This is a very interesting idea.
> >
> > You might want to add specific support pgRouting which already supports
> > building graphs, creating routing topology and solving various graph
> > problem using postgis for geometry and tables for building and linking
> > the topology.
> >
> > You might also want to look at:
> >
> > https://github.com/woodbri/osrm-tools
> >    - a tool to move pgrouting data to Project-OSRM
> >
> > https://github.com/DennisOSRM/Project-OSRM
> >    - a high performance routing engine
> >
> > A tool like you are describing that can load data and prepare a graph or
> > move data between these projects would be extremely useful.
> >
> > I look forward to hearing more about your ideas.
> >
> > Thanks,
> >    -Steve Woodbridge
> >
> > On 2/17/2014 5:13 AM, ? ??? ?????? ? ? ? ???? wrote:
> > > Hello everyone.
> > >
> > > I am a last year student at Moscow Power Engineering Institute, Russia.
> > > For GSoC 2014 I would like to work on networking capabilities in
> GDAL/OGR.
> > >
> > > _
> > > _
> > >
> > > _Overall idea_
> > >
> > > I would like to try to implement a universal network model. The
> > > universality of the model would reflect not only in the ability to use
> > > different GIS formats to store and transfer network data (which OGR is
> a
> > > grate basis for), but also to be able to design and simulate different
> > > types of network applications (engineering, natural, etc). I understand
> > > that it is rather ambitious to consider all possible aspects of all
> > > network types. But as a first step I would like to cover only the basic
> > > aspects, that can be generalized and to provide a ?  platform?   which
> can
> > > be used by other developers to create their own extensions which are
> > > specific to the concrete network type.
> > >
> > >
> > > _Target scope for GSoC 2014_
> > >
> > > Today none of OGR drivers supports network functionality. The idea is
> to
> > > implement a new OGR driver, which will deal with networks built over
> the
> > > spatial data. The spatial data together with the network data will be
> > > stored in one of the OGR-supported formats, which would be specified
> > > during the creation of the network.
> > >
> > > Planned features of the new driver:
> > >
> > > 1. Reading/writing data from/to the source, creating layers, editing
> > > attributes, etc (as any new OGR driver must provide);
> > >
> > > 2. The user would also be able to do the following, assuming that all
> > > the special network data is the data of the current GIS-format:
> > >
> > >
> > > - Read/Write the information about the whole network (network
> metadata);
> > >
> > > - Edit special network objects parameters such as blocking state, or
> > > direction of the flow;
> > >
> > > - Import objects from the external sources (the driver adds missing
> > > network parameters to them);
> > >
> > > - Set/unset connections among network objects;
> > >
> > > - Edit the sets of the network rules.
> > >
> > > 3. Each object in the network will have a set of relations with other
> > > objects, which are stored separately and form a network graph;
> > >
> > > 4. The whole network will have a set of rules that describes the
> > > connection possibilities of different object types in the network. The
> > > network will also have a set of rules that describes the influence of
> > > each type of object to the state of the whole network and to the other
> > > types of objects. It can also be called as a behavior of the object in
> > > the context of the network specialization (engineering purpose).
> > >
> > >
> > > _Current status_
> > >
> > > https://github.com/MikhanGusev/gnm
> > >
> > > As a matter of fact I've been working on this for a while, and I've
> > > already completed few things. Here is what I've accomplished already:
> > >
> > > 1. Complete. The driver and most of the required virtual interfaces are
> > > already implemented;
> > >
> > > 2. Complete. All data from the external source is wrapped with the
> > > network proxy and the user can edit it.
> > >
> > > 3. Currently, I'm thinking about the way, how the network graph will be
> > > stored.
> > >
> > >
> > > Best regards,
> > >
> > > Mikhail Gusev.
> > >
> > >
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140218/0c742415/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Tue Feb 18 01:46:30 2014
From: jukka.rahkonen at mmmtike.fi (Rahkonen Jukka  (Tike))
Date: Tue, 18 Feb 2014 09:46:30 +0000
Subject: [gdal-dev] GeoPackage fails after touching it with
 Spatialite-gui
Message-ID: <EFE5D7EE2EC8D3438FE02E356F81E35A0333D9@FITLK-EXMBX04.msvyvi.vaha.local>

Hi,

Creating indexes with sqlite3 feels safe. Renaming table is unsafe and leads to ogrinfo crash.

sqlite> alter table test rename to test2;

C:\ohjelmat\sqlite3>ogrinfo kuti.gpkg
ERROR 1: (null)
INFO: Open of `kuti.gpkg'
      using driver `GPKG' successful.

Next: Crash.

What is good is that everything is good again after doing 
sqlite> alter table test2 rename to test; 

Renaming a table is not something that is absolutely needed but it is not a totally odd idea either and it should not lead to program crash. Now it looks like the crash comes from metadata and real table names being unsynchronized and a proper way to support renaming the tables would mean creating also triggers into the database for updating the metadata fields correctly.
Because it is sure at the moment that renaming a table will lead to a not usable GeoPackage it might be good to mention it in the Limitations section of driver page http://www.gdal.org/ogr/drv_geopackage.html

-Jukka-


> -----Alkuper?inen viesti-----
> L?hett?j?: Even Rouault [mailto:even.rouault at mines-paris.org]
> L?hetetty: 18. helmikuuta 2014 11:07
> Vastaanottaja: Rahkonen Jukka (Tike)
> Kopio: 'gdal-dev at lists.osgeo.org'
> Aihe: Re: [gdal-dev] GeoPackage fails after touching it with Spatialite-gui
> 
> Hi Jukka,
> 
> yes, this is the same issue. -dialect sqlite is quite powerfull, but can only handle
> SELECT / UPDATE / DELETE, no other fancy stuff. The GPKG driver should just
> have its ExecuteSQL() implementation.
> Currently I guess you could open a .gpkg with the sqlite3 binary. I wouldn't
> expect it to alter the application_id field (or perhaps in the same situation as
> spatialite_gui does).
> 
> Even
> 
> > Hi,
> >
> > Is this the same issue about how GPKG is handling ExecuteSQL()? If it
> > is, then I will make a ticket because a database without indexes is
> > missing a lot. Or is there some other way how I could create index into GPKG
> with GDAL?
> > Alessandro Furieri told already that using spatialite-gui/tools for
> > GeoPackages is currently not safe.
> >
> > ogrinfo test.gpkg -dialect sqlite -sql "create index knro_idx on test (knro)"
> > INFO: Open of `test.gpkg'
> >       using driver `GPKG' successful.
> > ERROR 1: In ExecuteSQL(): sqlite3_prepare(create index knro_idx on
> > test
> > (knro)):
> >   no such table: main.test
> >
> > -Jukka-
> >
> > Even Rouault wrote:
> > >
> > > Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:
> > >
> > > > Even Rouault <even.rouault <at> mines-paris.org> writes:
> > > >
> > > > >
> > > > > Jukka,
> > > > >
> > > > > I highly suspect that the ALTER TABLE must imply a rewriting of
> > > > > the file by spatialite/spatialite-gui, and when doing so, it
> > > > > doesn't preserve the "application id" (4 bytes in the header of
> > > > > sqlite file), that geopackage specification mentions to be set
> > > > > to a particular value. Consequently the geopackage driver later
> > > > > fails when
> > > checking the signature.
> > > >
> > > > I have not yet found a way to reproduce crash in a reliable way
> > > > but while testing I found something else. Does the following mean
> > > > that the GPKG file is not totally valid SQLite file or just that
> > > > GDAL gets puzzled because there are separate implementations for
> > > > SQLite/Spatialite
> > and
> > > GPKG?
> > > >
> > > >
> > > > Step 1: create plain SQLite and GPKG databases
> > > >
> > > > C:\data>ogr2ogr -f sqlite  test.sqlite temp.shp C:\data>ogr2ogr -f
> > > > gpkg  test.gpkg temp.shp
> > > >
> > > > Step 2: try to rename a table
> > > > C:\data>ogrinfo test.sqlite -dialect sqlite -sql "alter table temp
> > > > rename to temp2"
> > > > INFO: Open of `test.sqlite'
> > > >       using driver `SQLite' successful.
> > > >
> > > > C:\data>ogrinfo test.gpkg -dialect sqlite -sql "alter table temp
> > > > rename to temp2"
> > > > INFO: Open of `test.gpkg'
> > > >       using driver `GPKG' successful.
> > > > ERROR 1: In ExecuteSQL(): sqlite3_prepare(alter table temp rename
> > > > to
> > temp2):
> > > >   no such table: temp
> > >
> > > Hum, well I can see that you are going to run into problems. The
> > > GPKG
> > driver has
> > > no ExecuteSQL() implementation that should directly handle your SQL
> > requests
> > > (what the SQLite driver would do). So it fallbacks to the generic
> > ExecuteSQL()
> > > implementation, which uses the sqlite VirtualOGR mechanism, which
> > > does not support table renaming.
> > > Ideally, the GPKG driver should be extended to implement
> > > ExecuteSQL() in a similar way than the SQLite driver.
> > >
> > > >
> > > > I noticed that OGR dialect does not support renaming tables, it
> > > > suggests to rename a column instead.
> > > >
> > > > -Jukka-
> > > >
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > >
> > >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> 


From even.rouault at mines-paris.org  Tue Feb 18 02:05:01 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 18 Feb 2014 11:05:01 +0100
Subject: [gdal-dev] GeoPackage fails after touching it with
	Spatialite-gui
In-Reply-To: <EFE5D7EE2EC8D3438FE02E356F81E35A0333D9@FITLK-EXMBX04.msvyvi.vaha.local>
References: <EFE5D7EE2EC8D3438FE02E356F81E35A0333D9@FITLK-EXMBX04.msvyvi.vaha.local>
Message-ID: <1392717901.5303304da3c8c@imp.free.fr>

Selon "Rahkonen Jukka  (Tike)" <jukka.rahkonen at mmmtike.fi>:

> Hi,
>
> Creating indexes with sqlite3 feels safe. Renaming table is unsafe and leads
> to ogrinfo crash.
>
> sqlite> alter table test rename to test2;
>
> C:ohjelmatsqlite3>ogrinfo kuti.gpkg
> ERROR 1: (null)
> INFO: Open of `kuti.gpkg'
>       using driver `GPKG' successful.
>
> Next: Crash.
>
> What is good is that everything is good again after doing
> sqlite> alter table test2 rename to test;
>
> Renaming a table is not something that is absolutely needed but it is not a
> totally odd idea either and it should not lead to program crash. Now it looks
> like the crash comes from metadata and real table names being unsynchronized
> and a proper way to support renaming the tables would mean creating also
> triggers into the database for updating the metadata fields correctly.
> Because it is sure at the moment that renaming a table will lead to a not
> usable GeoPackage it might be good to mention it in the Limitations section
> of driver page http://www.gdal.org/ogr/drv_geopackage.html

I share your analysis. This is likely a lack of robustness when a table name
found in the metadata tables (like gpkg_contents) does not exist. I've not
checked if sqlite triggers could be used to update gpkg_contents accordingly,
which would be the right thing to do if doable. But anyway sqlite triggers can
be disabled by applications, so the driver ought to be robust for that. This is
IMHO worth a ticket. Please add pramsey in CC of the ticket

Even



From pepijn at vaneeckhoudt.net  Tue Feb 18 02:00:56 2014
From: pepijn at vaneeckhoudt.net (Pepijn Van Eeckhoudt)
Date: Tue, 18 Feb 2014 11:00:56 +0100
Subject: [gdal-dev] GeoPackage fails after touching it with
	Spatialite-gui
In-Reply-To: <EFE5D7EE2EC8D3438FE02E356F81E35A0333D9@FITLK-EXMBX04.msvyvi.vaha.local>
References: <EFE5D7EE2EC8D3438FE02E356F81E35A0333D9@FITLK-EXMBX04.msvyvi.vaha.local>
Message-ID: <53032F58.3000702@vaneeckhoudt.net>

Apolgies up-front for the self promotion...

Jukka,

If you need a basic geopackage enabled sqlite shell, you can compile 
https://bitbucket.org/luciad/libgpkg to get this. One of the outputs is 
the 'gpkg' binary which is the sqlite shell with the libgpkg extension 
preloaded. This is nowhere near as featureful as ogr or spatialite, but 
should already allow you to do basic CLI geopackage management.

Regards,

Pepijn

On 18-02-14 10:46, Rahkonen Jukka (Tike) wrote:
> Hi,
>
> Creating indexes with sqlite3 feels safe. Renaming table is unsafe and leads to ogrinfo crash.
>
> sqlite> alter table test rename to test2;
>
> C:\ohjelmat\sqlite3>ogrinfo kuti.gpkg
> ERROR 1: (null)
> INFO: Open of `kuti.gpkg'
>        using driver `GPKG' successful.
>
> Next: Crash.
>
> What is good is that everything is good again after doing
> sqlite> alter table test2 rename to test;
>
> Renaming a table is not something that is absolutely needed but it is not a totally odd idea either and it should not lead to program crash. Now it looks like the crash comes from metadata and real table names being unsynchronized and a proper way to support renaming the tables would mean creating also triggers into the database for updating the metadata fields correctly.
> Because it is sure at the moment that renaming a table will lead to a not usable GeoPackage it might be good to mention it in the Limitations section of driver page http://www.gdal.org/ogr/drv_geopackage.html
>
> -Jukka-
>
>
>> -----Alkuper?inen viesti-----
>> L?hett?j?: Even Rouault [mailto:even.rouault at mines-paris.org]
>> L?hetetty: 18. helmikuuta 2014 11:07
>> Vastaanottaja: Rahkonen Jukka (Tike)
>> Kopio: 'gdal-dev at lists.osgeo.org'
>> Aihe: Re: [gdal-dev] GeoPackage fails after touching it with Spatialite-gui
>>
>> Hi Jukka,
>>
>> yes, this is the same issue. -dialect sqlite is quite powerfull, but can only handle
>> SELECT / UPDATE / DELETE, no other fancy stuff. The GPKG driver should just
>> have its ExecuteSQL() implementation.
>> Currently I guess you could open a .gpkg with the sqlite3 binary. I wouldn't
>> expect it to alter the application_id field (or perhaps in the same situation as
>> spatialite_gui does).
>>
>> Even
>>
>>> Hi,
>>>
>>> Is this the same issue about how GPKG is handling ExecuteSQL()? If it
>>> is, then I will make a ticket because a database without indexes is
>>> missing a lot. Or is there some other way how I could create index into GPKG
>> with GDAL?
>>> Alessandro Furieri told already that using spatialite-gui/tools for
>>> GeoPackages is currently not safe.
>>>
>>> ogrinfo test.gpkg -dialect sqlite -sql "create index knro_idx on test (knro)"
>>> INFO: Open of `test.gpkg'
>>>        using driver `GPKG' successful.
>>> ERROR 1: In ExecuteSQL(): sqlite3_prepare(create index knro_idx on
>>> test
>>> (knro)):
>>>    no such table: main.test
>>>
>>> -Jukka-
>>>
>>> Even Rouault wrote:
>>>> Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:
>>>>
>>>>> Even Rouault <even.rouault <at> mines-paris.org> writes:
>>>>>
>>>>>> Jukka,
>>>>>>
>>>>>> I highly suspect that the ALTER TABLE must imply a rewriting of
>>>>>> the file by spatialite/spatialite-gui, and when doing so, it
>>>>>> doesn't preserve the "application id" (4 bytes in the header of
>>>>>> sqlite file), that geopackage specification mentions to be set
>>>>>> to a particular value. Consequently the geopackage driver later
>>>>>> fails when
>>>> checking the signature.
>>>>> I have not yet found a way to reproduce crash in a reliable way
>>>>> but while testing I found something else. Does the following mean
>>>>> that the GPKG file is not totally valid SQLite file or just that
>>>>> GDAL gets puzzled because there are separate implementations for
>>>>> SQLite/Spatialite
>>> and
>>>> GPKG?
>>>>>
>>>>> Step 1: create plain SQLite and GPKG databases
>>>>>
>>>>> C:\data>ogr2ogr -f sqlite  test.sqlite temp.shp C:\data>ogr2ogr -f
>>>>> gpkg  test.gpkg temp.shp
>>>>>
>>>>> Step 2: try to rename a table
>>>>> C:\data>ogrinfo test.sqlite -dialect sqlite -sql "alter table temp
>>>>> rename to temp2"
>>>>> INFO: Open of `test.sqlite'
>>>>>        using driver `SQLite' successful.
>>>>>
>>>>> C:\data>ogrinfo test.gpkg -dialect sqlite -sql "alter table temp
>>>>> rename to temp2"
>>>>> INFO: Open of `test.gpkg'
>>>>>        using driver `GPKG' successful.
>>>>> ERROR 1: In ExecuteSQL(): sqlite3_prepare(alter table temp rename
>>>>> to
>>> temp2):
>>>>>    no such table: temp
>>>> Hum, well I can see that you are going to run into problems. The
>>>> GPKG
>>> driver has
>>>> no ExecuteSQL() implementation that should directly handle your SQL
>>> requests
>>>> (what the SQLite driver would do). So it fallbacks to the generic
>>> ExecuteSQL()
>>>> implementation, which uses the sqlite VirtualOGR mechanism, which
>>>> does not support table renaming.
>>>> Ideally, the GPKG driver should be extended to implement
>>>> ExecuteSQL() in a similar way than the SQLite driver.
>>>>
>>>>> I noticed that OGR dialect does not support renaming tables, it
>>>>> suggests to rename a column instead.
>>>>>
>>>>> -Jukka-
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Ivan.Price at noveltis.fr  Tue Feb 18 04:22:33 2014
From: Ivan.Price at noveltis.fr (Ivan Price)
Date: Tue, 18 Feb 2014 12:22:33 +0000
Subject: [gdal-dev] reprojecting coastcolour (/meris) using python via
 GCPs
In-Reply-To: <CA+TxYvM8DEz1ikuZP9Bt=czY1yi+-6RZvkuWCiLrOifkXkjT0Q@mail.gmail.com>
References: <605C20E40C3B7D4E93E0E804EECE898E1EB62FD0@GLORFINDEL.noveltis.loc>
	<CA+TxYvPWUd+LS97XOPhyD8h3uDia1MYQe4rSjyH3eTcN6q1fWA@mail.gmail.com>
	<605C20E40C3B7D4E93E0E804EECE898E1EB631DE@GLORFINDEL.noveltis.loc>
	<CA+TxYvM8DEz1ikuZP9Bt=czY1yi+-6RZvkuWCiLrOifkXkjT0Q@mail.gmail.com>
Message-ID: <605C20E40C3B7D4E93E0E804EECE898E1EB63549@GLORFINDEL.noveltis.loc>

Hi again Etienne,

sorry for being vague.. when i say it 'works' in inverted commas, its because i'm not sure to what level it is expected to work. I can read the list of bands but there is no georeferencing for example., gdal doesn't see the gcps (=values in lat/lon variables).

so previously i was writing out a (subsetted) gtiff with gcps in python then warping using gdalwarp -tps which was working well actually.. just a few more steps than i'd ideally like.

following your advice regarding the vrt and after learning from nansat examples (thanks Anton!) i now write a vrt with gcps and use gdalwarp from the commandline with -tps on that.. which works fine.. although i need to use a gcp for every > 200 pixels or the calculation time is too high.


if you tell me that the gcps should be recognised automatically by gdal then i'd be happy to file a bug and upload some sample data.

for info i'm using gdal 1.9.2, built by me using flags:
--prefix --with-python --pymoddir=xxx
and thats all.

thanks for your assistance,

-i

save.nc is an untouched coastcolour dataset.

(price at nemo:)$ gdalinfo NETCDF:"save.nc":reflec_1
Driver: netCDF/Network Common Data Format
Files: none associated
Size is 4481, 9921
Coordinate System is `'
Metadata:
  NC_GLOBAL#auto_grouping=reflec:norm_reflec:atm_tau
  NC_GLOBAL#Conventions=CF-1.4
  NC_GLOBAL#metadata_profile=beam
  NC_GLOBAL#metadata_version=0.5
  NC_GLOBAL#product_type=MER_FSG_CCL2R
  NC_GLOBAL#start_date=08-FEB-2011 10:37:07.984543
  NC_GLOBAL#stop_date=08-FEB-2011 10:44:24.434783
  NC_GLOBAL#TileSize=16:4481
  NC_GLOBAL#title=MERIS CoastColour L2R
  reflec_1#bandwidth=9.9370003
  reflec_1#coordinates=lat lon
  reflec_1#long_name=Water leaving irradiance reflectance at 412.691 nm
  reflec_1#solar_flux=1764.0343
  reflec_1#spectral_band_index=0
  reflec_1#units=sr^-1
  reflec_1#valid_pixel_expression=!l2r_flags.INPUT_INVALID
  reflec_1#wavelength=412.69101
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 9921.0)
Upper Right ( 4481.0,    0.0)
Lower Right ( 4481.0, 9921.0)
Center      ( 2240.5, 4960.5)
Band 1 Block=4481x1 Type=Float32, ColorInterp=Undefined
  NoData Value=9.96920996838686905e+36
  Metadata:
    bandwidth=9.9370003
    coordinates=lat lon
    long_name=Water leaving irradiance reflectance at 412.691 nm
    NETCDF_VARNAME=reflec_1
    solar_flux=1764.0343
    spectral_band_index=0
    units=sr^-1
    valid_pixel_expression=!l2r_flags.INPUT_INVALID
    wavelength=412.69101


(price at nemo:)$ gdalwarp -t_srs EPSG:4326  NETCDF:"save.nc":reflec_1 foo.tif
Processing input file NETCDF:save.nc:reflec_1.
ERROR 1: Unable to compute a transformation between pixel/line
and georeferenced coordinates for NETCDF:save.nc:reflec_1.
There is no affine transformation and no GCPs.




De : Etienne Tourigny [mailto:etourigny.dev at gmail.com]
Envoy? : Monday, 17 February 2014 20:32
? : Ivan Price
Cc : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] reprojecting coastcolour (/meris) using python via GCPs



On Mon, Feb 17, 2014 at 2:03 PM, Ivan Price <Ivan.Price at noveltis.fr<mailto:Ivan.Price at noveltis.fr>> wrote:
Hi Etienne,

firstly the problem reading the MERIS (actually coastcolour) data was due to the fact i was using gdal 1.6, after upgrading to 1.9 i can at least list the bands so i guess that 'works'.

does it really work or sort of? If not, please file a bug report with an example data set attached or a link to it.


regarding the use of the filesystem, i tried that, however it is slow to write out the whole dataset to disk, (i need to treat hundreds of images), so i was looking for a way to avoid this.. although it will be my fallback option if all else fails..

have you tried using a .vrt file?


either way i'll reply to the list with what we do in the end

thanks for your response,

-i



De : Etienne Tourigny [mailto:etourigny.dev at gmail.com<mailto:etourigny.dev at gmail.com>]
Envoy? : Monday, 17 February 2014 14:09
? : Ivan Price
Cc : gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

Objet : Re: [gdal-dev] reprojecting coastcolour (/meris) using python via GCPs

As far as I know, the gdal warp api is not exposed to python.

I have no idea on reading the MERIS data with the gdal netcdf driver - what I the problem?

But you might be able to use this workaround: instead of creating a source dataset using the memory driver, create a file on disk (in gtiff format) with GCPS and write data to disk, and then use gdalwarp on that.

Etienne

On Mon, Feb 17, 2014 at 6:46 AM, Ivan Price <Ivan.Price at noveltis.fr<mailto:Ivan.Price at noveltis.fr>> wrote:

Hello,

I am trying to reproject a window inside a coastcolour (=MERIS) image. As far as I can see GDAL cannot read the coastcolour data directly, so i am reading the coastcolour netcdf in python, building a source dataset using the memory driver, adding GCPS (1 for every 10th pixel) and writing the data to it, then reprojecting the source dataset to a destination dataset which is a spatial subset of the original in wgs84 lat/long.

This works fine and is relatively fast, but the reprojection is not accurate, the results are out by about 6-10 pixels (in various directions). On reading the forums it seems if i was using gdalwarp i would be using -tps, however the ReprojectImage() function does not seem to offer this parameter ? And i don't have the option of using the commandline tool as even gdal 1.10 cannot recognise the coastcolour data.

So i guess i have 2 questions.. has anyone had any success reading coastcolour data with the gdal command line tools, and secondly:

how can i get ReprojectImage() to be more accurate, given i have a GCP for every pixel ?

thanks and regards,

-ivan



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140218/c58a42b8/attachment-0001.html>

From Ivan.Price at noveltis.fr  Tue Feb 18 04:38:11 2014
From: Ivan.Price at noveltis.fr (Ivan Price)
Date: Tue, 18 Feb 2014 12:38:11 +0000
Subject: [gdal-dev] reprojecting coastcolour (/meris) using python via
 GCPs
In-Reply-To: <53031E90.4040303@nersc.no>
References: <605C20E40C3B7D4E93E0E804EECE898E1EB62FD0@GLORFINDEL.noveltis.loc>
	<530202C0.2040203@nersc.no>
	<605C20E40C3B7D4E93E0E804EECE898E1EB631B0@GLORFINDEL.noveltis.loc>
	<53031E90.4040303@nersc.no>
Message-ID: <605C20E40C3B7D4E93E0E804EECE898E1EB6357E@GLORFINDEL.noveltis.loc>

Hi Anton,

just letting you know that adding either or both of those strings still doesn't force tps warping via the python bindings.

regarding nansat, i'd like to have a working coastcolour mapper file for future projects, unfortunately at this time i can't justify the time given i have a working solution now (partly thanks to nansat-learned techniques). 

from what i saw of my initial attempt though it should be achievable next time i need to do something similar. for info the data is available here:
http://www.coastcolour.org/data/archive/mediterranean_blacksea/2010/L2R/

.. essentially MERIS L2 data but with certain vars missing/extra which break the nansat meris/envisat code.

i'll contact the nansat list when it comes time to make the mapper.

thanks again for your help

-i


-----Message d'origine-----
De?: Anton Korosov [mailto:anton.korosov at nersc.no] 
Envoy??: Tuesday, 18 February 2014 09:49
??: Ivan Price; gdal-dev at lists.osgeo.org
Objet?: Re: [gdal-dev] reprojecting coastcolour (/meris) using python via GCPs

Hi Ivan,

if you are using Python, then options are usually given as a list of strings. I cannot find in the gdal docs at the moment (docs for python bindings are quite scarce), but you can check in Nansat:

https://github.com/nansencenter/nansat/blob/develop/vrt.py#L1641

So for your case it may be ['TPS=True'] or ['METHOD=GCP_TPS']

Regarding Nansat, we can add your mapper in the repository, or I can help a little with development of it (if you provide band description and an example file). Our mailing list is nansat-dev at googlegroups.com


Regards!
Anton

On 02/17/2014 05:51 PM, Ivan Price wrote:
> Hi Anton,
>
> thanks for responding,
>
> I have tried adding the tps option like this:
>
> gdal.ReprojectImage(input_ds, output_ds, input_ds.GetProjection(), output_ds.GetProjection(),
>                          gdal.GRA_NearestNeighbour, 
> 0.5*1024*1024*1024, 0, None, {'tps': True})
>
> but it has no effect. despite the doco in the link you have there is a 
> max of 9 arguments, (not 10), so i'm not sure its even being used for 
> what it should be. (i'm using the python bindings from gdal 1.9)
>
> regarding nansat it looks very interesting..
>
> after an initial usage I see that i need to make a new mapper module for coastcolour data, presumably based on the MERIS L2 example.. as there are metadata fields that are missing in the coastcolour data that the envisat mapper is missing.
>
> it is interesting to see is that the reprojection is done in python, but using a VRT mechanism. maybe i can adapt this approach to get something working.
>
> thanks very much for the pointer
>
> -i
>
>
>
>
> -----Message d'origine-----
> De : gdal-dev-bounces at lists.osgeo.org 
> [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Anton Korosov 
> Envoy? : Monday, 17 February 2014 13:38 ? : gdal-dev at lists.osgeo.org 
> Objet : Re: [gdal-dev] reprojecting coastcolour (/meris) using python 
> via GCPs
>
> Hello Ivan,
>
> ReprojectImage() has a parameter psOptions()
> http://www.gdal.org/gdalwarper_8h.html#ad36462e8d5d34642df7f9ea1cfc2fe
> c4 It should accept any of the warping options, e.g. '-tps'
> http://www.gdal.org/gdalwarp.html
>
> I'm not 100% sure (since I'm using Python) but it may work.
>
>
> I'll take this chance also to promote Nansat, a scientist-friendly Python tool for working with satellite and model data:
> Repo: https://github.com/nansencenter/nansat
> Wiki: https://github.com/nansencenter/nansat/wiki
> and API-rference: http://nansencenter.github.io/nansat/
>
> It is a wrapper around GDAL, which adds scientific meaning to the opened images. Briefly: GDAL doesn't know much about e.g. band 22 in a MERIS image, Nansat does. It provides full information and allows simple usage, e.g.:
> n = Nansat(meris_image)
> n.reproject(dstDomain, tps=True)
> n.export('outFile.nc')
>
> It can open MERIS as well as tens of other formats.
>
>
> Best regards!
> Anton
>
> On 02/17/2014 10:46 AM, Ivan Price wrote:
>>
>> Hello,
>>
>> I am trying to reproject a window inside a coastcolour (=MERIS) image. As far as I can see GDAL cannot read the coastcolour data directly, so i am reading the coastcolour netcdf in python, building a source dataset using the memory driver, adding GCPS (1 for every 10th pixel) and writing the data to it, then reprojecting the source dataset to a destination dataset which is a spatial subset of the original in wgs84 lat/long.
>>
>> This works fine and is relatively fast, but the reprojection is not accurate, the results are out by about 6-10 pixels (in various directions). On reading the forums it seems if i was using gdalwarp i would be using -tps, however the ReprojectImage() function does not seem to offer this parameter ? And i don't have the option of using the commandline tool as even gdal 1.10 cannot recognise the coastcolour data.
>>
>> So i guess i have 2 questions.. has anyone had any success reading coastcolour data with the gdal command line tools, and secondly:
>>
>> how can i get ReprojectImage() to be more accurate, given i have a GCP for every pixel ?
>>
>> thanks and regards,
>>
>> -ivan
>>
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From jukka.rahkonen at mmmtike.fi  Tue Feb 18 05:03:46 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 18 Feb 2014 13:03:46 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?GeoPackage_fails_after_touching_it_with=09Sp?=
	=?utf-8?q?atialite-gui?=
References: <EFE5D7EE2EC8D3438FE02E356F81E35A0333D9@FITLK-EXMBX04.msvyvi.vaha.local>
	<53032F58.3000702@vaneeckhoudt.net>
Message-ID: <loom.20140218T135735-459@post.gmane.org>

Pepijn Van Eeckhoudt <pepijn <at> vaneeckhoudt.net> writes:

> 
> Apolgies up-front for the self promotion...
> 
> Jukka,
> 
> If you need a basic geopackage enabled sqlite shell, you can compile 
> https://bitbucket.org/luciad/libgpkg to get this. One of the outputs is 
> the 'gpkg' binary which is the sqlite shell with the libgpkg extension 
> preloaded. This is nowhere near as featureful as ogr or spatialite, but 
> should already allow you to do basic CLI geopackage management.

Hi Pepijn,

If you knew me and wanted me to play with your toy (that I for sure would
like to do) you would have compiled Windows binaries for downloading.
Compile is not what I do, I merely test and complain :)

-Jukka-
> Regards,
> 
> Pepijn



From etourigny.dev at gmail.com  Tue Feb 18 05:15:46 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 18 Feb 2014 10:15:46 -0300
Subject: [gdal-dev] reprojecting coastcolour (/meris) using python via
	GCPs
In-Reply-To: <605C20E40C3B7D4E93E0E804EECE898E1EB63549@GLORFINDEL.noveltis.loc>
References: <605C20E40C3B7D4E93E0E804EECE898E1EB62FD0@GLORFINDEL.noveltis.loc>
	<CA+TxYvPWUd+LS97XOPhyD8h3uDia1MYQe4rSjyH3eTcN6q1fWA@mail.gmail.com>
	<605C20E40C3B7D4E93E0E804EECE898E1EB631DE@GLORFINDEL.noveltis.loc>
	<CA+TxYvM8DEz1ikuZP9Bt=czY1yi+-6RZvkuWCiLrOifkXkjT0Q@mail.gmail.com>
	<605C20E40C3B7D4E93E0E804EECE898E1EB63549@GLORFINDEL.noveltis.loc>
Message-ID: <CA+TxYvOB=ThZzsS_j-q8svGkbejmviStv74Gy6kEfmCfmM7XyA@mail.gmail.com>

On Tue, Feb 18, 2014 at 9:22 AM, Ivan Price <Ivan.Price at noveltis.fr> wrote:

>  Hi again Etienne,
>
>
>
> sorry for being vague.. when i say it 'works' in inverted commas, its
> because i'm not sure to what level it is expected to work. I can read the
> list of bands but there is no georeferencing for example., gdal doesn't see
> the gcps (=values in lat/lon variables).
>
>
>
> so previously i was writing out a (subsetted) gtiff with gcps in python
> then warping using gdalwarp -tps which was working well actually.. just a
> few more steps than i'd ideally like.
>
>
>
> following your advice regarding the vrt and after learning from nansat
> examples (thanks Anton!) i now write a vrt with gcps and use gdalwarp from
> the commandline with -tps on that.. which works fine.. although i need to
> use a gcp for every > 200 pixels or the calculation time is too high.
>
>
>
>
>
> if you tell me that the gcps should be recognised automatically by gdal
> then i'd be happy to file a bug and upload some sample data.
>
>
>
> for info i'm using gdal 1.9.2, built by me using flags:
>
> --prefix --with-python --pymoddir=xxx
>
> and thats all.
>

You might have better success using a more recent gdal version, the netcdf
driver has changed a bit since 1.9. I am not sure how it would handle gcps
though, I added support for GEOLOCATION arrays but that is a different
thing.

Seems to me using a vrt is the best option.

Etienne



>
>
> thanks for your assistance,
>
>
>
> -i
>
>
>
> save.nc is an untouched coastcolour dataset.
>
>
>
> (price at nemo:)$ gdalinfo NETCDF:"save.nc":reflec_1
>
> Driver: netCDF/Network Common Data Format
>
> Files: none associated
>
> Size is 4481, 9921
>
> Coordinate System is `'
>
> Metadata:
>
>   NC_GLOBAL#auto_grouping=reflec:norm_reflec:atm_tau
>
>   NC_GLOBAL#Conventions=CF-1.4
>
>   NC_GLOBAL#metadata_profile=beam
>
>   NC_GLOBAL#metadata_version=0.5
>
>   NC_GLOBAL#product_type=MER_FSG_CCL2R
>
>   NC_GLOBAL#start_date=08-FEB-2011 10:37:07.984543
>
>   NC_GLOBAL#stop_date=08-FEB-2011 10:44:24.434783
>
>   NC_GLOBAL#TileSize=16:4481
>
>   NC_GLOBAL#title=MERIS CoastColour L2R
>
>   reflec_1#bandwidth=9.9370003
>
>   reflec_1#coordinates=lat lon
>
>   reflec_1#long_name=Water leaving irradiance reflectance at 412.691 nm
>
>   reflec_1#solar_flux=1764.0343
>
>   reflec_1#spectral_band_index=0
>
>   reflec_1#units=sr^-1
>
>   reflec_1#valid_pixel_expression=!l2r_flags.INPUT_INVALID
>
>   reflec_1#wavelength=412.69101
>
> Corner Coordinates:
>
> Upper Left  (    0.0,    0.0)
>
> Lower Left  (    0.0, 9921.0)
>
> Upper Right ( 4481.0,    0.0)
>
> Lower Right ( 4481.0, 9921.0)
>
> Center      ( 2240.5, 4960.5)
>
> Band 1 Block=4481x1 Type=Float32, ColorInterp=Undefined
>
>   NoData Value=9.96920996838686905e+36
>
>   Metadata:
>
>     bandwidth=9.9370003
>
>     coordinates=lat lon
>
>     long_name=Water leaving irradiance reflectance at 412.691 nm
>
>     NETCDF_VARNAME=reflec_1
>
>     solar_flux=1764.0343
>
>     spectral_band_index=0
>
>     units=sr^-1
>
>     valid_pixel_expression=!l2r_flags.INPUT_INVALID
>
>     wavelength=412.69101
>
>
>
>
>
> (price at nemo:)$ gdalwarp -t_srs EPSG:4326  NETCDF:"save.nc":reflec_1
> foo.tif
>
> Processing input file NETCDF:save.nc:reflec_1.
>
> ERROR 1: Unable to compute a transformation between pixel/line
>
> and georeferenced coordinates for NETCDF:save.nc:reflec_1.
>
> There is no affine transformation and no GCPs.
>
>
>
>
>
>
>
>
>
> *De :* Etienne Tourigny [mailto:etourigny.dev at gmail.com]
> *Envoy? :* Monday, 17 February 2014 20:32
>
> *? :* Ivan Price
> *Cc :* gdal-dev at lists.osgeo.org
> *Objet :* Re: [gdal-dev] reprojecting coastcolour (/meris) using python
> via GCPs
>
>
>
>
>
>
>
> On Mon, Feb 17, 2014 at 2:03 PM, Ivan Price <Ivan.Price at noveltis.fr>
> wrote:
>
> Hi Etienne,
>
>
>
> firstly the problem reading the MERIS (actually coastcolour) data was due
> to the fact i was using gdal 1.6, after upgrading to 1.9 i can at least
> list the bands so i guess that 'works'.
>
>
>
> does it really work or sort of? If not, please file a bug report with an
> example data set attached or a link to it.
>
>
>
>
>
> regarding the use of the filesystem, i tried that, however it is slow to
> write out the whole dataset to disk, (i need to treat hundreds of images),
> so i was looking for a way to avoid this.. although it will be my fallback
> option if all else fails..
>
>
>
> have you tried using a .vrt file?
>
>
>
>
>
> either way i'll reply to the list with what we do in the end
>
>
>
> thanks for your response,
>
>
>
> -i
>
>
>
>
>
>
>
> *De :* Etienne Tourigny [mailto:etourigny.dev at gmail.com]
> *Envoy? :* Monday, 17 February 2014 14:09
> *? :* Ivan Price
> *Cc :* gdal-dev at lists.osgeo.org
>
>
> *Objet :* Re: [gdal-dev] reprojecting coastcolour (/meris) using python
> via GCPs
>
>
>
> As far as I know, the gdal warp api is not exposed to python.
>
>
>
> I have no idea on reading the MERIS data with the gdal netcdf driver -
> what I the problem?
>
>
>
> But you might be able to use this workaround: instead of creating a source
> dataset using the memory driver, create a file on disk (in gtiff format)
> with GCPS and write data to disk, and then use gdalwarp on that.
>
>
>
> Etienne
>
>
>
> On Mon, Feb 17, 2014 at 6:46 AM, Ivan Price <Ivan.Price at noveltis.fr>
> wrote:
>
>
>
> Hello,
>
>
>
> I am trying to reproject a window inside a coastcolour (=MERIS) image. As
> far as I can see GDAL cannot read the coastcolour data directly, so i am
> reading the coastcolour netcdf in python, building a source dataset using
> the memory driver, adding GCPS (1 for every 10th pixel) and writing the
> data to it, then reprojecting the source dataset to a destination dataset
> which is a spatial subset of the original in wgs84 lat/long.
>
>
>
> This works fine and is relatively fast, but the reprojection is not
> accurate, the results are out by about 6-10 pixels (in various directions).
> On reading the forums it seems if i was using gdalwarp i would be using
> -tps, however the ReprojectImage() function does not seem to offer this
> parameter ? And i don't have the option of using the commandline tool as
> even gdal 1.10 cannot recognise the coastcolour data.
>
>
>
> So i guess i have 2 questions.. has anyone had any success reading
> coastcolour data with the gdal command line tools, and secondly:
>
>
>
> how can i get ReprojectImage() to be more accurate, given i have a GCP for
> every pixel ?
>
>
>
> thanks and regards,
>
>
>
> -ivan
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140218/723a5542/attachment-0001.html>

From achrysochoou at hotmail.com  Tue Feb 18 08:35:47 2014
From: achrysochoou at hotmail.com (achrysochoou)
Date: Tue, 18 Feb 2014 08:35:47 -0800 (PST)
Subject: [gdal-dev] list of gdal_retile -co options?
Message-ID: <1392741347656-5104512.post@n6.nabble.com>

Hi,

I am trying to find a list showing what options I can use in the gdal_retile
-co ? 
Thanks in advance

Regards,
Antony



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/list-of-gdal-retile-co-options-tp5104512.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From kyle at pobox.com  Tue Feb 18 09:20:25 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Tue, 18 Feb 2014 10:20:25 -0700
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <201402132214.20518.even.rouault@mines-paris.org>
References: <201402132214.20518.even.rouault@mines-paris.org>
Message-ID: <CAJ0mEz24dVL7pzeSO9rkLC4+-d9yqcPwNVg1DriHBQVi2y4bmQ@mail.gmail.com>

On Thu, Feb 13, 2014 at 2:14 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Hi,
>
> I've confirmed my presence to the OSGeo Vienna code sprint (
> http://wiki.osgeo.org/wiki/Vienna_Code_Sprint_2014 ). Are there folks that
> will be there and indent doing some work on GDAL ? Any particular topics of
> interest ?
>
> It could be the opportunity to take a crack at some changes that have been
> mentionned for some time and are listed at
> http://trac.osgeo.org/gdal/wiki/GDAL20Changes
>
> We should decide how to manage the 2.0 transition. I think that the 2.0 number
> should be reserved as the opportunity of introducing breaking changes in the
> API / ABI. But this might take a long time to implement all that is listed
> above, so there's a risk we end up with a trunk that is never ready for
> release for years. Not a good thing.
> On the other hand, we could just be more modest and take breaking changes as
> they are introduced and raise the major version number (so the yearly version
> after 2.0 could be 3.0). This will require projects using GDAL to adapt
> multiple times.
> An alternative would be to prepare the API for new features even if they are
> not implemented, but that's a difficult exercise and there's a risk that at
> implementation time, the API doesn't fit.
> Any thoughts ?
>
> Currently we have no such breakage in trunk so it could qualify as GDAL 1.11.
> Perhaps we should just release it as such for now before the bigger changes ?
>
> Somes topics I can see for GDAL 2.0 that impact API/ABI :
> - well, the mythological unification of OGR driver model with GDAL driver
> model.
> - XYZM support
> - Curve geometries
> - 64 bit integer support
>
> Other possible structural changes :
> - Change of master version control system: switch to git / GitHub ?
> - New build system : cmake ?
>
> Of course all of this will more likely happen if contributors or funders show
> up !
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Hi, I meant to bring this up in my earlier email, but it slipped my
mind.  Or maybe I didn't want to open a can of worms.  What exactly
would 'unification' entail?  I assume all ogr drivers would have to
inherit GDALMajorObject (and probably OGRDataSource and OGRLayer
maybe?) and then ogr drivers would have to populate metadata.  I also
assume that this would replace GetCapabilities().  Can someone
elaborate on the scope of such a change?  Thanks.

-- 
Kyle

From even.rouault at mines-paris.org  Tue Feb 18 10:19:03 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 18 Feb 2014 19:19:03 +0100
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
	release plans, GDAL 2.0
In-Reply-To: <CAJ0mEz24dVL7pzeSO9rkLC4+-d9yqcPwNVg1DriHBQVi2y4bmQ@mail.gmail.com>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<CAJ0mEz24dVL7pzeSO9rkLC4+-d9yqcPwNVg1DriHBQVi2y4bmQ@mail.gmail.com>
Message-ID: <201402181919.03318.even.rouault@mines-paris.org>

> 
> Hi, I meant to bring this up in my earlier email, but it slipped my
> mind.  Or maybe I didn't want to open a can of worms.  What exactly
> would 'unification' entail?  I assume all ogr drivers would have to
> inherit GDALMajorObject (and probably OGRDataSource and OGRLayer
> maybe?) and then ogr drivers would have to populate metadata.  I also
> assume that this would replace GetCapabilities().  Can someone
> elaborate on the scope of such a change?  Thanks.

Yes, probably things in that direction. Well that could be a whole subject to 
discuss in face to face for people present in Vienna. A further step would be 
to have drivers that would do both the raster and vector side at the same time 
(think of Geopackage for example). A dataset/datasource would have raster band 
and vector layers.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jintro_luna at hotmail.com  Tue Feb 18 11:13:18 2014
From: jintro_luna at hotmail.com (Jintro luna)
Date: Tue, 18 Feb 2014 20:13:18 +0100
Subject: [gdal-dev] =?windows-1256?q?calling_GDALExtractRPCInfo_in_fortran?=
 =?windows-1256?q?=FE?=
Message-ID: <DUB122-W456A3362C3FE3ACFC3AC1382980@phx.gbl>




Hi all,

I need to read a Geotiff (DEM) file in one of my fortran 
programs. GDAL has been extremely useful so far, I managed to open and 
read the file and this all seems to go well. However, when I try to get 
information on the file, I run into problems. I know that 
GDALExtractRPCInfo expects a C pointer as its first input argument, but 
I'm a bit lost on how to define such a pointer in fortran (I'm 
embarrassed to admit, but I have never used C before). I had a look at 
the fortranc functions, but could only find functions to define 
c_ptr_ptr types, which didn't solve the problem.

I assume there 
is a very basic solution to this, but after half a day of browsing the 
web, I'm still stuck. Your help would be very much appreciated. My code 
is below.

PROGRAM DEM_test
USE,INTRINSIC :: iso_c_binding
USE fortranc
USE gdal

IMPLICIT none
character*200 :: infile
character(kind=c_char), target:: c_infile
TYPE(GDALRPCInfo) :: info
TYPE(gdaldataseth) :: ds
TYPE(gdalrasterbandh) :: band
TYPE(c_ptr) ptr1

INTEGER(kind=c_int) :: i2,j2,ierr,nraster
REAL,ALLOCATABLE :: z(:,:)

 CALL gdalallregister()

 infile='/windows/C/Users/bertw/Desktop/Data/DEMS/Canada/aster_gdem_50m_ncaa.tif'//CHAR(0)


 ds = gdalopen(TRIM(infile)//CHAR(0), GA_ReadOnly)
 IF (.NOT.gdalassociated(ds)) THEN
   PRINT*,'Error opening dataset on file ',TRIM(infile)
   STOP 1
 ENDIF

 i2=gdalgetrasterxsize(ds)
 j2=gdalgetrasterysize(ds)
 nraster=gdalgetrastercount(ds)
 allocate(z(i2,j2))

 band = gdalgetrasterband(ds, 1)
 ierr = gdalrasterio_f(band, GF_Read, 0, 0, z)
 write(6,*) 'ok' !<---- runs fine up to here

 c_infile=infile 
 write(6,*) c_infile  ! <--- part of the problem seems to be that only  the first character is copied to c_infile
 ptr1=c_loc(c_infile)
 ierr=GDALExtractRPCInfo( ptr1,info)
 write(6,*) info
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140218/c9e8d415/attachment.html>

From skunkmyrddyn at gmail.com  Tue Feb 18 14:11:28 2014
From: skunkmyrddyn at gmail.com (Simon Shak)
Date: Tue, 18 Feb 2014 16:11:28 -0600
Subject: [gdal-dev] Is there documetation about filters and some python
	utilities?
In-Reply-To: <loom.20140216T121531-187@post.gmane.org>
References: <loom.20140216T121531-187@post.gmane.org>
Message-ID: <CAJuTQSGVH+s7LVB7556S9O3C6EhSqYb0Q+ayfCkbdivc90vGFg@mail.gmail.com>

I perform similar tasks. While there are probably some internal methods
inside python, I make calls to ImageMagick to perform the image
manipulation. I first write a baseline tiff with the tfw with
gdal_translate then preform convert commands to do the image processing
then gdal_translate again to turn the baseline tiff and tfw back into a
geotiff.
On Feb 16, 2014 5:36 AM, "Jukka Rahkonen" <jukka.rahkonen at mmmtike.fi> wrote:

> Hi,
>
> I was thinking that a possibility to run images through filters with GDAL
> could be nice sometimes. Especially for visual work with aerial and
> satellite images filters like "sharpen" of "unsharp mask"
> http://en.wikipedia.org/wiki/Unsharp_masking are often very useful. But
> then
> I found that kernel filters can already be used inside VRT files. Are there
> usage examples with before-after comparison images somewhere in our
> documentation?
>
> I also found that there are some python scripts included in
> \gdal\bin\gdal\python\scripts at least in the gisinternals GDAL builds but
> some scripts are not listed in http://gdal.org/gdal_utilities.html.  Is
> there some other place where to find documentation about these scripts, for
> example gdal_calc.py ? Some other than the sources, I mean.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140218/f0c32fe6/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Feb 18 21:38:21 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 19 Feb 2014 05:38:21 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?list_of_gdal=5Fretile_-co_options=3F?=
References: <1392741347656-5104512.post@n6.nabble.com>
Message-ID: <loom.20140219T063459-644@post.gmane.org>

achrysochoou <achrysochoou <at> hotmail.com> writes:

> 
> Hi,
> 
> I am trying to find a list showing what options I can use in the gdal_retile
> -co ? 
> Thanks in advance


> Regards,
> Antony
> 

Hi,

It depends on the output format. For example for GeoTIFF read
http://www.gdal.org/frmt_gtiff.html. 

-Jukka Rahkonen-


> --
> View this message in context:
http://osgeo-org.1560.x6.nabble.com/list-of-gdal-retile-co-options-tp5104512.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> 





From brfr at metrico.lu  Tue Feb 18 23:49:11 2014
From: brfr at metrico.lu (Frank Broniewski)
Date: Wed, 19 Feb 2014 08:49:11 +0100
Subject: [gdal-dev] Is there documetation about filters and some python
 utilities?
In-Reply-To: <CAJuTQSGVH+s7LVB7556S9O3C6EhSqYb0Q+ayfCkbdivc90vGFg@mail.gmail.com>
References: <loom.20140216T121531-187@post.gmane.org>
	<CAJuTQSGVH+s7LVB7556S9O3C6EhSqYb0Q+ayfCkbdivc90vGFg@mail.gmail.com>
Message-ID: <530461F7.2010504@metrico.lu>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Me too :-)

I've written a script which uses GDAL, mdenoise and ImageMagick to
create hillshade maps from SRTM which are more appealing than the
standard hillshade computation images. Python is used as a glue
between the commands and to provide a user interface on the command
line. You can have a look here [1] for inspiration ...

HTH

Frank


[1] https://bitbucket.org/metrico/pretty_hillshade/overview


Am 2014-02-18 23:11, schrieb Simon Shak:
> I perform similar tasks. While there are probably some internal
> methods inside python, I make calls to ImageMagick to perform the
> image manipulation. I first write a baseline tiff with the tfw
> with gdal_translate then preform convert commands to do the image
> processing then gdal_translate again to turn the baseline tiff and
> tfw back into a geotiff. On Feb 16, 2014 5:36 AM, "Jukka Rahkonen"
> <jukka.rahkonen at mmmtike.fi> wrote:
> 
>> Hi,
>> 
>> I was thinking that a possibility to run images through filters
>> with GDAL could be nice sometimes. Especially for visual work
>> with aerial and satellite images filters like "sharpen" of
>> "unsharp mask" http://en.wikipedia.org/wiki/Unsharp_masking are
>> often very useful. But then I found that kernel filters can
>> already be used inside VRT files. Are there usage examples with
>> before-after comparison images somewhere in our documentation?
>> 
>> I also found that there are some python scripts included in 
>> \gdal\bin\gdal\python\scripts at least in the gisinternals GDAL
>> builds but some scripts are not listed in
>> http://gdal.org/gdal_utilities.html.  Is there some other place
>> where to find documentation about these scripts, for example
>> gdal_calc.py ? Some other than the sources, I mean.
>> 
>> -Jukka Rahkonen-
>> 
>> _______________________________________________ gdal-dev mailing
>> list gdal-dev at lists.osgeo.org 
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
> 
> 
> 
> _______________________________________________ gdal-dev mailing
> list gdal-dev at lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


- -- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Thunderbird - http://www.enigmail.net/

iQEcBAEBAgAGBQJTBGHaAAoJEHopqW0d1cQVf/oIAKCAtpztALxkIpPQ7JK1vsoJ
HgNnxXzhgOI7cU3fd/xhEN3kWymDoCIFQEHAdScO7QpPGxBsM3h9wwJfJyrNfuWw
xSDDzUXGq9wNIh45Uz/74VOEePNb1F36RDDkkzKQRdJTdJwH/TF0qpEJt0Cilt4I
WjrHm+m4tcJZlIMA5BHeTTDEOLhMjr1IDHBFg19Dd0h2mfzsdKdwE1fdWegGv8pP
pT5qpFczjMhR4+LZ21yXR/wuBZC6KqnP2sL6NoyUgJFHiK1TGxwNzGi4aixfVqn2
0VltXy2tD+uEK1Z432EIkG9i3UBb4kj4VEwe3d801e0j5mVd/HVyE3oduPkJ60A=
=f7Qt
-----END PGP SIGNATURE-----

From achrysochoou at hotmail.com  Wed Feb 19 04:56:27 2014
From: achrysochoou at hotmail.com (achrysochoou)
Date: Wed, 19 Feb 2014 04:56:27 -0800 (PST)
Subject: [gdal-dev] list of gdal_retile -co options?
In-Reply-To: <loom.20140219T063459-644@post.gmane.org>
References: <1392741347656-5104512.post@n6.nabble.com>
	<loom.20140219T063459-644@post.gmane.org>
Message-ID: <1392814587911-5104711.post@n6.nabble.com>

Thank you Jukka! 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/list-of-gdal-retile-co-options-tp5104512p5104711.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Wed Feb 19 05:09:34 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 19 Feb 2014 13:09:34 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Is_there_documetation_about_filters_and_some?=
	=?utf-8?q?_python=09utilities=3F?=
References: <loom.20140216T121531-187@post.gmane.org>
	<CAJuTQSGVH+s7LVB7556S9O3C6EhSqYb0Q+ayfCkbdivc90vGFg@mail.gmail.com>
Message-ID: <loom.20140219T140357-551@post.gmane.org>

Simon Shak <skunkmyrddyn <at> gmail.com> writes:

> 
> 
> I perform similar tasks. While there are probably some internal methods
inside python, I make calls to ImageMagick to perform the image
manipulation. I first write a baseline tiff with the tfw with gdal_translate
then preform convert commands to do the image processing then gdal_translate
again to turn the baseline tiff and tfw back into a geotiff. 

Just wondering if you could enjoy yourself by using gdal_edit.py or taking
some code from that for writing the geotiff tags instead of using
gdal_translate.
http://www.gdal.org/gdal_edit.html

-Jukka Rahkonen-


From jukka.rahkonen at mmmtike.fi  Wed Feb 19 07:56:03 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 19 Feb 2014 15:56:03 +0000 (UTC)
Subject: [gdal-dev] Blog about GDAL, GeoPackage and OpenJUMP
Message-ID: <loom.20140219T165107-16@post.gmane.org>

Hi,

I wrote a blog post for encouraging folks to start testing, using and
developing further the GeoPackage format. It works already as you can see.

http://openjump.blogspot.fi/2014/02/openjump-plus-reads-ogc-geopackages.html

-Jukka Rahkonen-


From eloi at openmailbox.org  Thu Feb 20 00:58:20 2014
From: eloi at openmailbox.org (Eloi)
Date: Thu, 20 Feb 2014 09:58:20 +0100
Subject: [gdal-dev] reference for tags used in metadata inside GeoTIFF
Message-ID: <9e0b975759c9e8f7b4aa74d73f5b0c22@openmailbox.org>

Hi all,

Is there a reference for tags used in metadata inside GeoTIFF files?
I would like to add a legend to the metadata, but before proceed I would 
like to know if there is a standard way of doing this.
By now I came up with two options:

     gdal_edit -mo "LEGEND_VALUE_1=A" -mo "LEGEND_VALUE_2=B" (...)
Or
     gdal_edit -mo "LEGEND=1:A, 2:B, (...)"

Is there a 'best practice' to put a legend in a GeoTIFF? Thanks.

Cheers,

Eloi


From joseph.jack051 at gmail.com  Thu Feb 20 05:15:22 2014
From: joseph.jack051 at gmail.com (Joseph Jack)
Date: Thu, 20 Feb 2014 18:45:22 +0530
Subject: [gdal-dev] Building GDAL with Kakadu
Message-ID: <CAGQqsr8Tz1gjKD0VPkgMwP-UDS0KcDTo0cHjjnAciaMZkXKwHA@mail.gmail.com>

Hello all,

I am getting following error during building the GDAL with kakadu.

*jp2kakdataset.cpp:34:23: fatal error: jp2_local.h: No such file or
directory*
*compilation terminated.*
*make[2]: *** [../o/jp2kakdataset.lo] Error 1*
*make[2]: Leaving directory
`/home/naveen/Downloads/gdal-1.10.1/frmts/jp2kak'*
*make[1]: *** [jp2kak-install-obj] Error 2*
*make[1]: Leaving directory `/home/naveen/Downloads/gdal-1.10.1/frmts'*
*make: *** [frmts-target] Error 2*

I only kakadu executable at
kakadusoftware.com/<http://www.kakadusoftware.com/index.php?option=com_content&task=view&id=26&Itemid=22>

Can somebody please tell me where to get source code of kakadu.
so I can build it properly.

or If there exits another solution of this problem please let me know.


--

Joseph Jack
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140220/e330fff8/attachment.html>

From even.rouault at mines-paris.org  Thu Feb 20 05:52:01 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 20 Feb 2014 14:52:01 +0100
Subject: [gdal-dev] Building GDAL with Kakadu
In-Reply-To: <CAGQqsr8Tz1gjKD0VPkgMwP-UDS0KcDTo0cHjjnAciaMZkXKwHA@mail.gmail.com>
References: <CAGQqsr8Tz1gjKD0VPkgMwP-UDS0KcDTo0cHjjnAciaMZkXKwHA@mail.gmail.com>
Message-ID: <1392904321.530608811994d@imp.free.fr>

Joseph,

The kakadu executable is not sufficient. You need to buy a licence that will
give you the SDK necessary to build GDAL against Kakadu. If you can't afford
that, you may consider the JP2OpenJPEG driver based on the free library OpenJPEG
:  http://gdal.org/frmt_jp2openjpeg.html

> Hello all,
>
> I am getting following error during building the GDAL with kakadu.
>
> *jp2kakdataset.cpp:34:23: fatal error: jp2_local.h: No such file or
> directory*
> *compilation terminated.*
> *make[2]: *** [../o/jp2kakdataset.lo] Error 1*
> *make[2]: Leaving directory
> `/home/naveen/Downloads/gdal-1.10.1/frmts/jp2kak'*
> *make[1]: *** [jp2kak-install-obj] Error 2*
> *make[1]: Leaving directory `/home/naveen/Downloads/gdal-1.10.1/frmts'*
> *make: *** [frmts-target] Error 2*
>
> I only kakadu executable at
>
kakadusoftware.com/<http://www.kakadusoftware.com/index.php?option=com_content&task=view&id=26&Itemid=22>
>
> Can somebody please tell me where to get source code of kakadu.
> so I can build it properly.
>
> or If there exits another solution of this problem please let me know.
>
>
> --
>
> Joseph Jack
>

From jukka.rahkonen at mmmtike.fi  Thu Feb 20 05:52:47 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 20 Feb 2014 13:52:47 +0000 (UTC)
Subject: [gdal-dev] Building GDAL with Kakadu
References: <CAGQqsr8Tz1gjKD0VPkgMwP-UDS0KcDTo0cHjjnAciaMZkXKwHA@mail.gmail.com>
Message-ID: <loom.20140220T144817-194@post.gmane.org>

Joseph Jack <joseph.jack051 <at> gmail.com> writes:


> I only kakadu executable at kakadusoftware.com/
> 
> ?
> Can somebody please tell me where to get source code of kakadu.
> so I can build it properly.
> 
> or If there exits another solution of this problem please let me know.

Hi,

You can find the info from http://kakadusoftware.com, especially

http://www.kakadusoftware.com/index.php?option=com_content&task=blogcategory&id=8&Itemid=5

"Sales
Tiffany O'Neill (NewSouth Innvovations)
email sales at kakadusoftware.com "

Once you have acquired and paid your license you will get a download link to
your personal copy of Kakadu sources.

-Jukka Rahkonen-


From jukka.rahkonen at mmmtike.fi  Fri Feb 21 01:12:44 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 21 Feb 2014 09:12:44 +0000 (UTC)
Subject: [gdal-dev] Shapefile index .qix vs. sbn/sbx
Message-ID: <loom.20140221T100702-858@post.gmane.org>

Hi,

If both both .qix and sbn/sbx spatial indexes are present, which one GDAL is
picking? Is the feeling still the same as in
http://erouault.blogspot.fi/2012/06/gdalogr-using-shapefile-native-sbn.html
that sbn/sbx is faster with big shapefiles?

-Jukka Rahkonen-


From bishop.dev at gmail.com  Fri Feb 21 01:37:57 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Fri, 21 Feb 2014 13:37:57 +0400
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <201402132214.20518.even.rouault@mines-paris.org>
References: <201402132214.20518.even.rouault@mines-paris.org>
Message-ID: <53071E75.2040409@gmail.com>

Hi Even,

I plan to participate in code sprint too and work on GDAL.
In addition to the mentioned tasks I would like to discuss some politics 
and direction to add new functionality to GDAL.

Best regards,
     Dmitry

14.02.2014 1:14, Even Rouault ?????:
> Hi,
>
> I've confirmed my presence to the OSGeo Vienna code sprint (
> http://wiki.osgeo.org/wiki/Vienna_Code_Sprint_2014 ). Are there folks that
> will be there and indent doing some work on GDAL ? Any particular topics of
> interest ?
>
> It could be the opportunity to take a crack at some changes that have been
> mentionned for some time and are listed at
> http://trac.osgeo.org/gdal/wiki/GDAL20Changes
>
> We should decide how to manage the 2.0 transition. I think that the 2.0 number
> should be reserved as the opportunity of introducing breaking changes in the
> API / ABI. But this might take a long time to implement all that is listed
> above, so there's a risk we end up with a trunk that is never ready for
> release for years. Not a good thing.
> On the other hand, we could just be more modest and take breaking changes as
> they are introduced and raise the major version number (so the yearly version
> after 2.0 could be 3.0). This will require projects using GDAL to adapt
> multiple times.
> An alternative would be to prepare the API for new features even if they are
> not implemented, but that's a difficult exercise and there's a risk that at
> implementation time, the API doesn't fit.
> Any thoughts ?
>
> Currently we have no such breakage in trunk so it could qualify as GDAL 1.11.
> Perhaps we should just release it as such for now before the bigger changes ?
>
> Somes topics I can see for GDAL 2.0 that impact API/ABI :
> - well, the mythological unification of OGR driver model with GDAL driver
> model.
> - XYZM support
> - Curve geometries
> - 64 bit integer support
>
> Other possible structural changes :
> - Change of master version control system: switch to git / GitHub ?
> - New build system : cmake ?
>
> Of course all of this will more likely happen if contributors or funders show
> up !
>
> Even
>


From even.rouault at mines-paris.org  Fri Feb 21 02:01:52 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 21 Feb 2014 11:01:52 +0100
Subject: [gdal-dev] Shapefile index .qix vs. sbn/sbx
In-Reply-To: <loom.20140221T100702-858@post.gmane.org>
References: <loom.20140221T100702-858@post.gmane.org>
Message-ID: <1392976912.530724109b462@imp.free.fr>

Hi Jukka,

>
> If both both .qix and sbn/sbx spatial indexes are present, which one GDAL is
> picking?

I've just checked. .qix is picked up in priority. But it might be difficult to
get into that situation, since the OGR shapefile driver should delete any
existing .qix or .sbn before building a new .qix.

> Is the feeling still the same as in
> http://erouault.blogspot.fi/2012/06/gdalogr-using-shapefile-native-sbn.html
> that sbn/sbx is faster with big shapefiles?

I haven't had any third-party confirmation of this, but this probably doesn't
make a huge difference ultimately. .sbn might be a little less CPU intensive
than .qix, but this might only show in artificial situations where data is
already cached by the operating system (accessing to the shapes is what take the
most time), and when you exercice a lot the spatial index. When just scrolling
in QGIS, I bet nobody can tell the difference.

Even


From even.rouault at mines-paris.org  Fri Feb 21 02:07:25 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 21 Feb 2014 11:07:25 +0100
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
	release plans, GDAL 2.0
In-Reply-To: <53071E75.2040409@gmail.com>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<53071E75.2040409@gmail.com>
Message-ID: <1392977245.5307255d6ae31@imp.free.fr>

Selon Dmitriy Baryshnikov <bishop.dev at gmail.com>:

> Hi Even,
>
> I plan to participate in code sprint too and work on GDAL.
> In addition to the mentioned tasks I would like to discuss some politics
> and direction to add new functionality to GDAL.

Great, perhaps you can share some of your thoughts ahead of time ?

>
> Best regards,
>      Dmitry
>
> 14.02.2014 1:14, Even Rouault ??????????:
> > Hi,
> >
> > I've confirmed my presence to the OSGeo Vienna code sprint (
> > http://wiki.osgeo.org/wiki/Vienna_Code_Sprint_2014 ). Are there folks that
> > will be there and indent doing some work on GDAL ? Any particular topics of
> > interest ?
> >
> > It could be the opportunity to take a crack at some changes that have been
> > mentionned for some time and are listed at
> > http://trac.osgeo.org/gdal/wiki/GDAL20Changes
> >
> > We should decide how to manage the 2.0 transition. I think that the 2.0
> number
> > should be reserved as the opportunity of introducing breaking changes in
> the
> > API / ABI. But this might take a long time to implement all that is listed
> > above, so there's a risk we end up with a trunk that is never ready for
> > release for years. Not a good thing.
> > On the other hand, we could just be more modest and take breaking changes
> as
> > they are introduced and raise the major version number (so the yearly
> version
> > after 2.0 could be 3.0). This will require projects using GDAL to adapt
> > multiple times.
> > An alternative would be to prepare the API for new features even if they
> are
> > not implemented, but that's a difficult exercise and there's a risk that at
> > implementation time, the API doesn't fit.
> > Any thoughts ?
> >
> > Currently we have no such breakage in trunk so it could qualify as GDAL
> 1.11.
> > Perhaps we should just release it as such for now before the bigger changes
> ?
> >
> > Somes topics I can see for GDAL 2.0 that impact API/ABI :
> > - well, the mythological unification of OGR driver model with GDAL driver
> > model.
> > - XYZM support
> > - Curve geometries
> > - 64 bit integer support
> >
> > Other possible structural changes :
> > - Change of master version control system: switch to git / GitHub ?
> > - New build system : cmake ?
> >
> > Of course all of this will more likely happen if contributors or funders
> show
> > up !
> >
> > Even
> >
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev





From bishop.dev at gmail.com  Fri Feb 21 04:37:14 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Fri, 21 Feb 2014 16:37:14 +0400
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <1392977245.5307255d6ae31@imp.free.fr>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<53071E75.2040409@gmail.com> <1392977245.5307255d6ae31@imp.free.fr>
Message-ID: <5307487A.70207@gmail.com>

Hi Even,

On code sprint I can work on:
- unification of OGR driver model with GDAL driver
- XYZM
- cmake for GDAL

That about thoughts - e.g. now I work on linear referencing using OGR 
datasources. As the absence of M value I use other algorithms. So I have 
ogrlineref application which can create needed data for linear 
referencing and using it for get:
1) point on path from linear position
2) linear position from point
3) sublinestring from two linear positions

Also, I added few new methods to OGRLineString:
virtual double Project(const OGRPoint *) const;
virtual OGRLineString* getSubLine(double, double, int) const;

I can commit all this, but I don't sure - is this a GDAL scope? And 
there is a border for functionality which is not applicable to GDAL.
Also I have some doubts about breaking ABI as a result of adding new 
methods to the OGRLineString.

Best regards,
     Dmitry

21.02.2014 14:07, Even Rouault ?????:
> Selon Dmitriy Baryshnikov <bishop.dev at gmail.com>:
>
>> Hi Even,
>>
>> I plan to participate in code sprint too and work on GDAL.
>> In addition to the mentioned tasks I would like to discuss some politics
>> and direction to add new functionality to GDAL.
> Great, perhaps you can share some of your thoughts ahead of time ?
>
>> Best regards,
>>       Dmitry
>>
>> 14.02.2014 1:14, Even Rouault ??????????:
>>> Hi,
>>>
>>> I've confirmed my presence to the OSGeo Vienna code sprint (
>>> http://wiki.osgeo.org/wiki/Vienna_Code_Sprint_2014 ). Are there folks that
>>> will be there and indent doing some work on GDAL ? Any particular topics of
>>> interest ?
>>>
>>> It could be the opportunity to take a crack at some changes that have been
>>> mentionned for some time and are listed at
>>> http://trac.osgeo.org/gdal/wiki/GDAL20Changes
>>>
>>> We should decide how to manage the 2.0 transition. I think that the 2.0
>> number
>>> should be reserved as the opportunity of introducing breaking changes in
>> the
>>> API / ABI. But this might take a long time to implement all that is listed
>>> above, so there's a risk we end up with a trunk that is never ready for
>>> release for years. Not a good thing.
>>> On the other hand, we could just be more modest and take breaking changes
>> as
>>> they are introduced and raise the major version number (so the yearly
>> version
>>> after 2.0 could be 3.0). This will require projects using GDAL to adapt
>>> multiple times.
>>> An alternative would be to prepare the API for new features even if they
>> are
>>> not implemented, but that's a difficult exercise and there's a risk that at
>>> implementation time, the API doesn't fit.
>>> Any thoughts ?
>>>
>>> Currently we have no such breakage in trunk so it could qualify as GDAL
>> 1.11.
>>> Perhaps we should just release it as such for now before the bigger changes
>> ?
>>> Somes topics I can see for GDAL 2.0 that impact API/ABI :
>>> - well, the mythological unification of OGR driver model with GDAL driver
>>> model.
>>> - XYZM support
>>> - Curve geometries
>>> - 64 bit integer support
>>>
>>> Other possible structural changes :
>>> - Change of master version control system: switch to git / GitHub ?
>>> - New build system : cmake ?
>>>
>>> Of course all of this will more likely happen if contributors or funders
>> show
>>> up !
>>>
>>> Even
>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>


From even.rouault at mines-paris.org  Fri Feb 21 05:17:56 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 21 Feb 2014 14:17:56 +0100
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
	release plans, GDAL 2.0
In-Reply-To: <5307487A.70207@gmail.com>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<53071E75.2040409@gmail.com> <1392977245.5307255d6ae31@imp.free.fr>
	<5307487A.70207@gmail.com>
Message-ID: <1392988676.53075204ca8b4@imp.free.fr>

Selon Dmitriy Baryshnikov <bishop.dev at gmail.com>:

> Hi Even,
>
> On code sprint I can work on:
> - unification of OGR driver model with GDAL driver
> - XYZM
> - cmake for GDAL
>
> That about thoughts - e.g. now I work on linear referencing using OGR
> datasources. As the absence of M value I use other algorithms. So I have
> ogrlineref application which can create needed data for linear
> referencing and using it for get:
> 1) point on path from linear position
> 2) linear position from point
> 3) sublinestring from two linear positions
>
> Also, I added few new methods to OGRLineString:
> virtual double Project(const OGRPoint *) const;
> virtual OGRLineString* getSubLine(double, double, int) const;

I just have had a look at those 2 in
https://github.com/nextgis/gdal-svn/compare/cmake4gdal. That looks fine
generally. I have just seen that GEOSProject_r isn't available in GEOS 3.1.0
which is our new minimal required GEOS version, but it has been added in 3.2.0.
You should just conditionalize the implementation of Project method with the
GEOS version.
And perhaps also add Doxygen comments of the functions.

>
> I can commit all this, but I don't sure - is this a GDAL scope?

Apart from the above remarks, I'd say: go ahead and commit it.

>  And
> there is a border for functionality which is not applicable to GDAL.
> Also I have some doubts about breaking ABI as a result of adding new
> methods to the OGRLineString.

Such breakage of the C++ ABI is within our usual rules.

Even

From fdr at cartesia.se  Sat Feb 22 04:51:43 2014
From: fdr at cartesia.se (HappyFrasse)
Date: Sat, 22 Feb 2014 04:51:43 -0800 (PST)
Subject: [gdal-dev] Gdal Mapinfo driver write access
Message-ID: <1393073503460-5105252.post@n6.nabble.com>


Hi

I am trying to use the latest ogr/gdal library in my dotnet projekt. I do
ref. to ogr_csharp, gdal_csharp.
My problem is that I can read my Mapinfo tab-file but I can?t write (append)
features to it and I don?t understand why?

If I open the mapinfo file with Ogr.Open(_FileName, 0) I got write access
error when using ?CreateFeature?.
If I change the second parameter to 1 (in open) then I won?t get any
datasource. Why? Does ogr/gdal not support write /append to some existing
mapinfo file?

My code goes like:

*****Code start ***
Ogr.RegisterAll()

'Open data source.
Dim dsTab As DataSource = Ogr.Open(_FileName, 0)
'Dim dsTab As DataSource = Ogr.Open(_FileName, 1)
If dsTab Is Nothing Then
    System.Diagnostics.Debug.WriteLine("Can't open " + _FileName)
End If

'Get driver 
 Dim drvTab As Driver = dsTab.GetDriver()
If drvTab Is Nothing Then
     System.Diagnostics.Debug.WriteLine("Can't get driver.")
End If
System.Diagnostics.Debug.WriteLine("Using driver " + drvTab.name)

Dim layerTab As Layer = Nothing
Dim i As Integer = 0
Dim iLayers As Integer = dsTab.GetLayerCount

layerTab = dsTab.GetLayerByIndex(0)
Dim layerName As String = layerTab.GetName
System.Diagnostics.Debug.WriteLine("Layername " + layerName)

Dim feature As Feature = New Feature(layerTab.GetLayerDefn())
feature.SetFID(Ogr.OGRNullFID)

feature.SetField("TraktId", "Mytest_TraktId")

Dim geom As Geometry = Geometry.CreateFromWkt("POINT(47.0 19.2)")
If feature.SetGeometry(geom) <> 0 Then
     System.Diagnostics.Debug.WriteLine("Failed add geometry to the
feature.")
End If

If layerTab.CreateFeature(feature) <> 0 Then
     System.Diagnostics.Debug.WriteLine("Failed to create feature in file.")
End If
*** code end ***

Is my code wrong or do I missunderstood something?

Regards/Frasse




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Gdal-Mapinfo-driver-write-access-tp5105252.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From nhv at cape.com  Sat Feb 22 05:03:40 2014
From: nhv at cape.com (Norman Vine)
Date: Sat, 22 Feb 2014 08:03:40 -0500
Subject: [gdal-dev] Gdal Mapinfo driver write access
In-Reply-To: <1393073503460-5105252.post@n6.nabble.com>
References: <1393073503460-5105252.post@n6.nabble.com>
Message-ID: <0A1F48A4-2B10-4A40-B252-3B15567C7334@cape.com>

see http://www.gdal.org/ogr/drv_mitab.html

MapInfo datasets in native (TAB) format and in interchange (MIF/MID) format are supported for reading and writing. 
Update of existing files is not currently supported.


 
On Feb 22, 2014, at 7:51 AM, HappyFrasse <fdr at cartesia.se> wrote:

> 
> Hi
> 
> I am trying to use the latest ogr/gdal library in my dotnet projekt. I do
> ref. to ogr_csharp, gdal_csharp.
> My problem is that I can read my Mapinfo tab-file but I can?t write (append)
> features to it and I don?t understand why?
> 
> If I open the mapinfo file with Ogr.Open(_FileName, 0) I got write access
> error when using ?CreateFeature?.
> If I change the second parameter to 1 (in open) then I won?t get any
> datasource. Why? Does ogr/gdal not support write /append to some existing
> mapinfo file?
> 
> My code goes like:
> 
> *****Code start ***
> Ogr.RegisterAll()
> 
> 'Open data source.
> Dim dsTab As DataSource = Ogr.Open(_FileName, 0)
> 'Dim dsTab As DataSource = Ogr.Open(_FileName, 1)
> If dsTab Is Nothing Then
>    System.Diagnostics.Debug.WriteLine("Can't open " + _FileName)
> End If
> 
> 'Get driver 
> Dim drvTab As Driver = dsTab.GetDriver()
> If drvTab Is Nothing Then
>     System.Diagnostics.Debug.WriteLine("Can't get driver.")
> End If
> System.Diagnostics.Debug.WriteLine("Using driver " + drvTab.name)
> 
> Dim layerTab As Layer = Nothing
> Dim i As Integer = 0
> Dim iLayers As Integer = dsTab.GetLayerCount
> 
> layerTab = dsTab.GetLayerByIndex(0)
> Dim layerName As String = layerTab.GetName
> System.Diagnostics.Debug.WriteLine("Layername " + layerName)
> 
> Dim feature As Feature = New Feature(layerTab.GetLayerDefn())
> feature.SetFID(Ogr.OGRNullFID)
> 
> feature.SetField("TraktId", "Mytest_TraktId")
> 
> Dim geom As Geometry = Geometry.CreateFromWkt("POINT(47.0 19.2)")
> If feature.SetGeometry(geom) <> 0 Then
>     System.Diagnostics.Debug.WriteLine("Failed add geometry to the
> feature.")
> End If
> 
> If layerTab.CreateFeature(feature) <> 0 Then
>     System.Diagnostics.Debug.WriteLine("Failed to create feature in file.")
> End If
> *** code end ***
> 
> Is my code wrong or do I missunderstood something?
> 
> Regards/Frasse
> 
> 
> 
> 
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/Gdal-Mapinfo-driver-write-access-tp5105252.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140222/42442c34/attachment.html>

From nixanz at nixanz.com  Sat Feb 22 19:39:44 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Sun, 23 Feb 2014 14:39:44 +1100
Subject: [gdal-dev] Can't use two datasets read-only from same files?
Message-ID: <4B546A51-10C8-4737-91A4-72AE7AADF40A@nixanz.com>

Hi GDAL devs,

I have a need to open the same set of Shapefiles as two independent datasets, BOTH of which are READ ONLY.  However, when I do this, and attempt to get the number of layers in the second data set, I get a whole lot of errors of the form:

	ERROR 4: Failed to open file <shapefile>.shp.
	It may be corrupt or read-only file accessed in update mode.

...for most (but not all) of the layers, and of course the dataset is incomplete and not useful.

I've crafted the following very simple example of this problem:

		 OGRDataSourceH firstDS = OGROpen(path, FALSE, NULL);
		 OGRDataSourceH secondDS = OGROpen(path, FALSE, NULL);
		 OGR_DS_GetLayerCount(firstDS);   //  THIS LINE WORKS FINE
		 OGR_DS_GetLayerCount(secondDS);  //  THIS LINE PRODUCES MANY ERRORS

If I OGR_DS_Destroy the first data set before running the OGR_DS_GetLayerCount on the second data set it works fine.

Is this expected?

I really need to have both datasets readable and useable simultaneously as they are both in completely independent parts of the application.  The first data set should be long-lived and needs to be persistent before, during and after the entire short life-cycle of the second data set.

The error messages imply that it is either corrupt or accessed in update mode.  But clearly it is not corrupt (at the file level) because it works fine in the first data set (and in the second if the first data set is destroyed first).  It is also being explicitly opened in READ-ONLY mode in both cases and therefore should not be in update mode.

I'm using gdal-1.10.1.

Any advice would be very much appreciated.

Cheers,
Nik.


From even.rouault at mines-paris.org  Sat Feb 22 23:40:11 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 23 Feb 2014 08:40:11 +0100
Subject: [gdal-dev] Can't use two datasets read-only from same files?
In-Reply-To: <4B546A51-10C8-4737-91A4-72AE7AADF40A@nixanz.com>
References: <4B546A51-10C8-4737-91A4-72AE7AADF40A@nixanz.com>
Message-ID: <201402230840.11573.even.rouault@mines-paris.org>

Nik,

what you try to do is perfectly valid and should work. I've just tried it 
myself, but I can't reproduce any error. If you are working on Linux, could 
you run your program with valgrind and look if it reports some errors ?
The only explanation I can imagine for now is that the file system on which 
your shapefile is located doesn't support a file to be opened more than once at 
a time, but this would be extremely surprising !

Best regards,

Even

> Hi GDAL devs,
> 
> I have a need to open the same set of Shapefiles as two independent
> datasets, BOTH of which are READ ONLY.  However, when I do this, and
> attempt to get the number of layers in the second data set, I get a whole
> lot of errors of the form:
> 
> 	ERROR 4: Failed to open file <shapefile>.shp.
> 	It may be corrupt or read-only file accessed in update mode.
> 
> ...for most (but not all) of the layers, and of course the dataset is
> incomplete and not useful.
> 
> I've crafted the following very simple example of this problem:
> 
> 		 OGRDataSourceH firstDS = OGROpen(path, FALSE, NULL);
> 		 OGRDataSourceH secondDS = OGROpen(path, FALSE, NULL);
> 		 OGR_DS_GetLayerCount(firstDS);   //  THIS LINE WORKS FINE
> 		 OGR_DS_GetLayerCount(secondDS);  //  THIS LINE PRODUCES MANY ERRORS
> 
> If I OGR_DS_Destroy the first data set before running the
> OGR_DS_GetLayerCount on the second data set it works fine.
> 
> Is this expected?
> 
> I really need to have both datasets readable and useable simultaneously as
> they are both in completely independent parts of the application.  The
> first data set should be long-lived and needs to be persistent before,
> during and after the entire short life-cycle of the second data set.
> 
> The error messages imply that it is either corrupt or accessed in update
> mode.  But clearly it is not corrupt (at the file level) because it works
> fine in the first data set (and in the second if the first data set is
> destroyed first).  It is also being explicitly opened in READ-ONLY mode in
> both cases and therefore should not be in update mode.
> 
> I'm using gdal-1.10.1.
> 
> Any advice would be very much appreciated.
> 
> Cheers,
> Nik.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sat Feb 22 23:51:17 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 23 Feb 2014 08:51:17 +0100
Subject: [gdal-dev] Can't use two datasets read-only from same files?
In-Reply-To: <201402230840.11573.even.rouault@mines-paris.org>
References: <4B546A51-10C8-4737-91A4-72AE7AADF40A@nixanz.com>
	<201402230840.11573.even.rouault@mines-paris.org>
Message-ID: <201402230851.17070.even.rouault@mines-paris.org>

Le dimanche 23 f?vrier 2014 08:40:11, Even Rouault a ?crit :
> Nik,
> 
> what you try to do is perfectly valid and should work. I've just tried it
> myself, but I can't reproduce any error. If you are working on Linux, could
> you run your program with valgrind and look if it reports some errors ?
> The only explanation I can imagine for now is that the file system on which
> your shapefile is located doesn't support a file to be opened more than
> once at a time, but this would be extremely surprising !

oh wait, is the "path" in your example a directory that contains lots of 
shapefiles ? In that case, you might reach the maximum number of opened files by 
a process. But... since GDAL 1.9, there is a mechanism in the shapefile driver 
to limit the number of layers opened simultaneously to 100 per datasource (so 
200 files for .shp and .dbf). With 2 datasources, this would be 400 files which 
is still below the 1024 limit on Linux.

> 
> Best regards,
> 
> Even
> 
> > Hi GDAL devs,
> > 
> > I have a need to open the same set of Shapefiles as two independent
> > datasets, BOTH of which are READ ONLY.  However, when I do this, and
> > attempt to get the number of layers in the second data set, I get a whole
> > 
> > lot of errors of the form:
> > 	ERROR 4: Failed to open file <shapefile>.shp.
> > 	It may be corrupt or read-only file accessed in update mode.
> > 
> > ...for most (but not all) of the layers, and of course the dataset is
> > incomplete and not useful.
> > 
> > I've crafted the following very simple example of this problem:
> > 		 OGRDataSourceH firstDS = OGROpen(path, FALSE, NULL);
> > 		 OGRDataSourceH secondDS = OGROpen(path, FALSE, NULL);
> > 		 OGR_DS_GetLayerCount(firstDS);   //  THIS LINE WORKS FINE
> > 		 OGR_DS_GetLayerCount(secondDS);  //  THIS LINE PRODUCES MANY ERRORS
> > 
> > If I OGR_DS_Destroy the first data set before running the
> > OGR_DS_GetLayerCount on the second data set it works fine.
> > 
> > Is this expected?
> > 
> > I really need to have both datasets readable and useable simultaneously
> > as they are both in completely independent parts of the application. 
> > The first data set should be long-lived and needs to be persistent
> > before, during and after the entire short life-cycle of the second data
> > set.
> > 
> > The error messages imply that it is either corrupt or accessed in update
> > mode.  But clearly it is not corrupt (at the file level) because it works
> > fine in the first data set (and in the second if the first data set is
> > destroyed first).  It is also being explicitly opened in READ-ONLY mode
> > in both cases and therefore should not be in update mode.
> > 
> > I'm using gdal-1.10.1.
> > 
> > Any advice would be very much appreciated.
> > 
> > Cheers,
> > Nik.
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From nixanz at nixanz.com  Sun Feb 23 02:03:38 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Sun, 23 Feb 2014 21:03:38 +1100
Subject: [gdal-dev] Can't use two datasets read-only from same files?
In-Reply-To: <201402230851.17070.even.rouault@mines-paris.org>
References: <4B546A51-10C8-4737-91A4-72AE7AADF40A@nixanz.com>
	<201402230840.11573.even.rouault@mines-paris.org>
	<201402230851.17070.even.rouault@mines-paris.org>
Message-ID: <BF19BB62-3B0F-4F30-8578-D529E893C1B4@nixanz.com>

Hi Even,

Thanks for your replies.  I think the number of files may be the problem.  Note that this is on the iPhone simulator (so effectively Mac OS X).

Yes, the "path" is a directory that contains shapefiles representing 352 layers.  Each layer has a .shp, .shx, .dbf, .prj, so 1409 files in total.  I'm not sure how many of these OGR needs to have open simultaneously.

Anyhow, I appreciate your reply.  I think I've hit the OS file limit.  I didn't even realise how many files were in that directory until you mentioned this possibility.

Cheers,
Nik.


On 23 Feb 2014, at 6:51 pm, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le dimanche 23 f?vrier 2014 08:40:11, Even Rouault a ?crit :
>> Nik,
>> 
>> what you try to do is perfectly valid and should work. I've just tried it
>> myself, but I can't reproduce any error. If you are working on Linux, could
>> you run your program with valgrind and look if it reports some errors ?
>> The only explanation I can imagine for now is that the file system on which
>> your shapefile is located doesn't support a file to be opened more than
>> once at a time, but this would be extremely surprising !
> 
> oh wait, is the "path" in your example a directory that contains lots of 
> shapefiles ? In that case, you might reach the maximum number of opened files by 
> a process. But... since GDAL 1.9, there is a mechanism in the shapefile driver 
> to limit the number of layers opened simultaneously to 100 per datasource (so 
> 200 files for .shp and .dbf). With 2 datasources, this would be 400 files which 
> is still below the 1024 limit on Linux.
> 
>> 
>> Best regards,
>> 
>> Even
>> 
>>> Hi GDAL devs,
>>> 
>>> I have a need to open the same set of Shapefiles as two independent
>>> datasets, BOTH of which are READ ONLY.  However, when I do this, and
>>> attempt to get the number of layers in the second data set, I get a whole
>>> 
>>> lot of errors of the form:
>>> 	ERROR 4: Failed to open file <shapefile>.shp.
>>> 	It may be corrupt or read-only file accessed in update mode.
>>> 
>>> ...for most (but not all) of the layers, and of course the dataset is
>>> incomplete and not useful.
>>> 
>>> I've crafted the following very simple example of this problem:
>>> 		 OGRDataSourceH firstDS = OGROpen(path, FALSE, NULL);
>>> 		 OGRDataSourceH secondDS = OGROpen(path, FALSE, NULL);
>>> 		 OGR_DS_GetLayerCount(firstDS);   //  THIS LINE WORKS FINE
>>> 		 OGR_DS_GetLayerCount(secondDS);  //  THIS LINE PRODUCES MANY ERRORS
>>> 
>>> If I OGR_DS_Destroy the first data set before running the
>>> OGR_DS_GetLayerCount on the second data set it works fine.
>>> 
>>> Is this expected?
>>> 
>>> I really need to have both datasets readable and useable simultaneously
>>> as they are both in completely independent parts of the application. 
>>> The first data set should be long-lived and needs to be persistent
>>> before, during and after the entire short life-cycle of the second data
>>> set.
>>> 
>>> The error messages imply that it is either corrupt or accessed in update
>>> mode.  But clearly it is not corrupt (at the file level) because it works
>>> fine in the first data set (and in the second if the first data set is
>>> destroyed first).  It is also being explicitly opened in READ-ONLY mode
>>> in both cases and therefore should not be in update mode.
>>> 
>>> I'm using gdal-1.10.1.
>>> 
>>> Any advice would be very much appreciated.
>>> 
>>> Cheers,
>>> Nik.
>>> 
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From gangwism at informatik.uni-freiburg.de  Mon Feb 24 00:35:42 2014
From: gangwism at informatik.uni-freiburg.de (Marcel Gangwisch)
Date: Mon, 24 Feb 2014 09:35:42 +0100
Subject: [gdal-dev] GDAL C# bindings using rasterlite
Message-ID: <530B045E.3070402@informatik.uni-freiburg.de>

Hi *,

currently I'm using SQLite + Spatialite + GDAL to manage vector data.
I know it is also possible to use SQLite also with raster data. 
Therefore I have to translate all GDAL input data to
sqlite as rasterlite.

Does anybody know how to do that, with the help of the GDAL C# bindings?

- Have a nice day, Marcel

From even.rouault at mines-paris.org  Mon Feb 24 11:18:31 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 24 Feb 2014 20:18:31 +0100
Subject: [gdal-dev] GDAL C# bindings using rasterlite
In-Reply-To: <530B045E.3070402@informatik.uni-freiburg.de>
References: <530B045E.3070402@informatik.uni-freiburg.de>
Message-ID: <201402242018.31560.even.rouault@mines-paris.org>

Le lundi 24 f?vrier 2014 09:35:42, Marcel Gangwisch a ?crit :
> Hi *,
> 
> currently I'm using SQLite + Spatialite + GDAL to manage vector data.
> I know it is also possible to use SQLite also with raster data.
> Therefore I have to translate all GDAL input data to
> sqlite as rasterlite.
> 
> Does anybody know how to do that, with the help of the GDAL C# bindings?

you should be able to do that with the CreateCopy() method of the Rasterlite 
driver.

> 
> - Have a nice day, Marcel
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From bishop.dev at gmail.com  Mon Feb 24 12:21:21 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Tue, 25 Feb 2014 00:21:21 +0400
Subject: [gdal-dev] GSoC'14
Message-ID: <530BA9C1.6050700@gmail.com>

Hi all,

congratulations, the OSGeo is in list of accepted organisations for GSoC!
OSGeo GSoC page: http://wiki.osgeo.org/wiki/Google_Summer_of_Code_2014_Ideas

-- 
Best regards,
     Dmitry


From dkaminski at gmail.com  Mon Feb 24 19:55:21 2014
From: dkaminski at gmail.com (windchaser)
Date: Mon, 24 Feb 2014 19:55:21 -0800 (PST)
Subject: [gdal-dev] Help with color map for raster grid
Message-ID: <1393300521976-5105698.post@n6.nabble.com>

Hi,
I am working with GDAL in a C# project. I need help figuring out how to
increase the colors displayed on a raster grid. Opening the file using
Gdal.Open("myfile", OSGeo.GDAL.Access.GA_ReadOnly); seems to offer some
colors but I would like to increase the number of colors for the raster map,
specially for floating point raster.

Here is an example of what i am trying to achieve using GDAL.

http://screencast.com/t/LPjJ7pTk <http://screencast.com/t/LPjJ7pTk>  

Thanks for your help!

Daniel



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Help-with-color-map-for-raster-grid-tp5105698.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Mon Feb 24 21:00:45 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 25 Feb 2014 10:30:45 +0530
Subject: [gdal-dev] Help with color map for raster grid
In-Reply-To: <1393300521976-5105698.post@n6.nabble.com>
References: <1393300521976-5105698.post@n6.nabble.com>
Message-ID: <CAMKgpOZBKrYCuEjF7R-Tq3OEjBtT9rHzd+8Urbp8bgKhW_5HUg@mail.gmail.com>

Daniel,

You can make changes in two places. In the data or the display engine. In
the data, you can modify the colour table. This will be permanent. In the
display, you just load a different color table based on the table of pixel
values. If you don't like either, you can build a gdal vrt file and modify
its colour table.

http://www.gdal.org/gdalbuildvrt.html
http://www.gdal.org/gdal_vrttut.html

--
Best regards,
Chaitanya Kumar CH
On 25-Feb-2014 9:26 am, "windchaser" <dkaminski at gmail.com> wrote:

> Hi,
> I am working with GDAL in a C# project. I need help figuring out how to
> increase the colors displayed on a raster grid. Opening the file using
> Gdal.Open("myfile", OSGeo.GDAL.Access.GA_ReadOnly); seems to offer some
> colors but I would like to increase the number of colors for the raster
> map,
> specially for floating point raster.
>
> Here is an example of what i am trying to achieve using GDAL.
>
> http://screencast.com/t/LPjJ7pTk <http://screencast.com/t/LPjJ7pTk>
>
> Thanks for your help!
>
> Daniel
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Help-with-color-map-for-raster-grid-tp5105698.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140225/d54b2d3e/attachment.html>

From vincent.mora at oslandia.com  Tue Feb 25 04:21:43 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Tue, 25 Feb 2014 13:21:43 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <530C77F2.6020305@oslandia.com>
References: <530C77F2.6020305@oslandia.com>
Message-ID: <530C8AD7.1040705@oslandia.com>

Hi,

I'd like to develop a ogr driver to create .map files used by WAsP
<http://en.wikipedia.org/wiki/WAsP>

The .map files contains height contours and roughness zones, the former
are linestrings with an height attribute, the later are linestrings that
separate two adjacent polygons with a roughness parameter on the righ
and left sides.

An algorithm to create roughness zones from polygons with a roughness
attribute would be useful: extract the polygon boundaries and output
linestrings with attributes on the left and right sides.

What driver would you recommend as a starting point to get the
interface, the coding style and the error handling right ?

Is the algorithm to create roughness zones from polygons (i.e. extract
polygon boundaries and add left/right attributes) something that should
be integrated in the driver, somewhere else or not at all in gdal ?

Thanks,

V.




From dkaminski at gmail.com  Tue Feb 25 06:35:23 2014
From: dkaminski at gmail.com (windchaser)
Date: Tue, 25 Feb 2014 06:35:23 -0800 (PST)
Subject: [gdal-dev] Help with color map for raster grid
In-Reply-To: <CAMKgpOZBKrYCuEjF7R-Tq3OEjBtT9rHzd+8Urbp8bgKhW_5HUg@mail.gmail.com>
References: <1393300521976-5105698.post@n6.nabble.com>
	<CAMKgpOZBKrYCuEjF7R-Tq3OEjBtT9rHzd+8Urbp8bgKhW_5HUg@mail.gmail.com>
Message-ID: <CAP46_rHPv9mGzo6Camb9MRDZX4Y_EsngsnbOZQmiVKuJa25gNw@mail.gmail.com>

Chaitanya,

Thanks for your prompt reply. I think I would like to use display engine,
but I am still trying to figure out which function I need to use to 'load a
different color table'. I am using GDAL with C# in a VS2010 project. Below
is the function that opens the raster text file and returns the bitmap.

when trying to retrieve the color table using this statement "ColorTable ct
= band.GetRasterColorTable();" the color table returned is empty.

>From your post I understand that a VRT dataset needs to be created by
copying the source dataset and then this VRT dataset can be manipulated to
add more classes apply a color gradient to the classes.

Are there any C# examples of using VRT dataset?
Could you highlight the main steps that I need to take in order to achieve
this?

Thanks,

    public static Bitmap GetBitmap(string sFileName)
    {
        //**How to write manipulated raster values to ASCII grid with GDAL?
        //**
http://stackoverflow.com/questions/10635107/how-to-write-manipulated-raster-values-to-ascii-grid-with-gdal
        OSGeo.GDAL.Dataset ds = Gdal.Open(sFileName,
OSGeo.GDAL.Access.GA_ReadOnly);
        if (ds == null)
        {
            MessageBox.Show("Invalid File Format!");
            return null;
        }

        OSGeo.GDAL.Driver dr = ds.GetDriver();

        int nWidth = ds.RasterXSize;
        int nHeight = ds.RasterYSize;

        //** GDAL CSharp Guide gdal - Revision 26980:
/trunk/gdal/swig/csharp/apps
        //** http://svn.osgeo.org/gdal/trunk/gdal/swig/csharp/apps/

        // Creating a Bitmap to store the GDAL image in
        Bitmap bitmap = new Bitmap(nWidth, nHeight,
PixelFormat.Format8bppIndexed);
        // Obtaining the bitmap buffer
        BitmapData bitmapData = bitmap.LockBits(new Rectangle(0, 0, nWidth,
nHeight), ImageLockMode.ReadWrite, PixelFormat.Format8bppIndexed);
        try
        {
            int stride = bitmapData.Stride;
            IntPtr buf = bitmapData.Scan0;
            Band band = ds.GetRasterBand(1);
            band.ReadRaster(0, 0, nWidth, nHeight, buf, nWidth, nHeight,
DataType.GDT_Byte, 1, stride);
        }
        finally
        {
            bitmap.UnlockBits(bitmapData);
        }

        return bitmap;
    }



*Daniel*
c: 1 (705) 499-2450


On Tue, Feb 25, 2014 at 12:01 AM, chaitanya_ch [via OSGeo.org] <
ml-node+s1560n5105703h0 at n6.nabble.com> wrote:

> Daniel,
>
> You can make changes in two places. In the data or the display engine. In
> the data, you can modify the colour table. This will be permanent. In the
> display, you just load a different color table based on the table of pixel
> values. If you don't like either, you can build a gdal vrt file and modify
> its colour table.
>
> http://www.gdal.org/gdalbuildvrt.html
> http://www.gdal.org/gdal_vrttut.html
>
> --
> Best regards,
> Chaitanya Kumar CH
> On 25-Feb-2014 9:26 am, "windchaser" <[hidden email]<http://user/SendEmail.jtp?type=node&node=5105703&i=0>>
> wrote:
>
>> Hi,
>> I am working with GDAL in a C# project. I need help figuring out how to
>> increase the colors displayed on a raster grid. Opening the file using
>> Gdal.Open("myfile", OSGeo.GDAL.Access.GA_ReadOnly); seems to offer some
>> colors but I would like to increase the number of colors for the raster
>> map,
>> specially for floating point raster.
>>
>> Here is an example of what i am trying to achieve using GDAL.
>>
>> http://screencast.com/t/LPjJ7pTk <http://screencast.com/t/LPjJ7pTk>
>>
>> Thanks for your help!
>>
>> Daniel
>>
>>
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.x6.nabble.com/Help-with-color-map-for-raster-grid-tp5105698.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email] <http://user/SendEmail.jtp?type=node&node=5105703&i=1>
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email] <http://user/SendEmail.jtp?type=node&node=5105703&i=2>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1560.x6.nabble.com/Help-with-color-map-for-raster-grid-tp5105698p5105703.html
>  To unsubscribe from Help with color map for raster grid, click here<http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5105698&code=ZGthbWluc2tpQGdtYWlsLmNvbXw1MTA1Njk4fDYwNTc3NjY1OA==>
> .
> NAML<http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Help-with-color-map-for-raster-grid-tp5105698p5105844.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140225/6a3b1d40/attachment-0001.html>

From chaitanya.ch at gmail.com  Tue Feb 25 08:04:54 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 25 Feb 2014 21:34:54 +0530
Subject: [gdal-dev] Help with color map for raster grid
In-Reply-To: <CAP46_rHPv9mGzo6Camb9MRDZX4Y_EsngsnbOZQmiVKuJa25gNw@mail.gmail.com>
References: <1393300521976-5105698.post@n6.nabble.com>
	<CAMKgpOZBKrYCuEjF7R-Tq3OEjBtT9rHzd+8Urbp8bgKhW_5HUg@mail.gmail.com>
	<CAP46_rHPv9mGzo6Camb9MRDZX4Y_EsngsnbOZQmiVKuJa25gNw@mail.gmail.com>
Message-ID: <CAMKgpOb=9Ck140VP4TYfRVV4UsvvL2k6j3-Fz2K5eFMVXVwdtg@mail.gmail.com>

Daniel,

You can build your own colour table using the api. In not familiar with the
C# interface but for C, you can refer to
http://gdal.org/classGDALColorTable.html

--
Best regards,
Chaitanya Kumar CH
On 25-Feb-2014 8:58 pm, "windchaser" <dkaminski at gmail.com> wrote:

> Chaitanya,
>
> Thanks for your prompt reply. I think I would like to use display engine,
> but I am still trying to figure out which function I need to use to 'load a
> different color table'. I am using GDAL with C# in a VS2010 project. Below
> is the function that opens the raster text file and returns the bitmap.
>
> when trying to retrieve the color table using this statement "ColorTable
> ct = band.GetRasterColorTable();" the color table returned is empty.
>
> From your post I understand that a VRT dataset needs to be created by
> copying the source dataset and then this VRT dataset can be manipulated to
> add more classes apply a color gradient to the classes.
>
> Are there any C# examples of using VRT dataset?
> Could you highlight the main steps that I need to take in order to achieve
> this?
>
> Thanks,
>
>     public static Bitmap GetBitmap(string sFileName)
>     {
>         //**How to write manipulated raster values to ASCII grid with GDAL?
>         //**
> http://stackoverflow.com/questions/10635107/how-to-write-manipulated-raster-values-to-ascii-grid-with-gdal
>         OSGeo.GDAL.Dataset ds = Gdal.Open(sFileName,
> OSGeo.GDAL.Access.GA_ReadOnly);
>         if (ds == null)
>         {
>             MessageBox.Show("Invalid File Format!");
>             return null;
>         }
>
>         OSGeo.GDAL.Driver dr = ds.GetDriver();
>
>         int nWidth = ds.RasterXSize;
>         int nHeight = ds.RasterYSize;
>
>         //** GDAL CSharp Guide gdal - Revision 26980:
> /trunk/gdal/swig/csharp/apps
>         //** http://svn.osgeo.org/gdal/trunk/gdal/swig/csharp/apps/
>
>         // Creating a Bitmap to store the GDAL image in
>         Bitmap bitmap = new Bitmap(nWidth, nHeight,
> PixelFormat.Format8bppIndexed);
>         // Obtaining the bitmap buffer
>         BitmapData bitmapData = bitmap.LockBits(new Rectangle(0, 0,
> nWidth, nHeight), ImageLockMode.ReadWrite, PixelFormat.Format8bppIndexed);
>         try
>         {
>             int stride = bitmapData.Stride;
>             IntPtr buf = bitmapData.Scan0;
>             Band band = ds.GetRasterBand(1);
>             band.ReadRaster(0, 0, nWidth, nHeight, buf, nWidth, nHeight,
> DataType.GDT_Byte, 1, stride);
>         }
>         finally
>         {
>             bitmap.UnlockBits(bitmapData);
>         }
>
>         return bitmap;
>     }
>
>
>
> *Daniel*
> c: 1 (705) 499-2450
>
>
> On Tue, Feb 25, 2014 at 12:01 AM, chaitanya_ch [via OSGeo.org] <[hidden
> email] <http://user/SendEmail.jtp?type=node&node=5105844&i=0>> wrote:
>
>> Daniel,
>>
>> You can make changes in two places. In the data or the display engine. In
>> the data, you can modify the colour table. This will be permanent. In the
>> display, you just load a different color table based on the table of pixel
>> values. If you don't like either, you can build a gdal vrt file and modify
>> its colour table.
>>
>> http://www.gdal.org/gdalbuildvrt.html
>> http://www.gdal.org/gdal_vrttut.html
>>
>> --
>> Best regards,
>> Chaitanya Kumar CH
>> On 25-Feb-2014 9:26 am, "windchaser" <[hidden email]<http://user/SendEmail.jtp?type=node&node=5105703&i=0>>
>> wrote:
>>
>>> Hi,
>>> I am working with GDAL in a C# project. I need help figuring out how to
>>> increase the colors displayed on a raster grid. Opening the file using
>>> Gdal.Open("myfile", OSGeo.GDAL.Access.GA_ReadOnly); seems to offer some
>>> colors but I would like to increase the number of colors for the raster
>>> map,
>>> specially for floating point raster.
>>>
>>> Here is an example of what i am trying to achieve using GDAL.
>>>
>>> http://screencast.com/t/LPjJ7pTk <http://screencast.com/t/LPjJ7pTk>
>>>
>>> Thanks for your help!
>>>
>>> Daniel
>>>
>>>
>>>
>>> --
>>> View this message in context:
>>> http://osgeo-org.1560.x6.nabble.com/Help-with-color-map-for-raster-grid-tp5105698.html
>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> [hidden email] <http://user/SendEmail.jtp?type=node&node=5105703&i=1>
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email] <http://user/SendEmail.jtp?type=node&node=5105703&i=2>
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> ------------------------------
>>  If you reply to this email, your message will be added to the
>> discussion below:
>>
>> http://osgeo-org.1560.x6.nabble.com/Help-with-color-map-for-raster-grid-tp5105698p5105703.html
>>  To unsubscribe from Help with color map for raster grid, click here.
>> NAML<http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>>
>
>
> ------------------------------
> View this message in context: Re: Help with color map for raster grid<http://osgeo-org.1560.x6.nabble.com/Help-with-color-map-for-raster-grid-tp5105698p5105844.html>
> Sent from the GDAL - Dev mailing list archive<http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html>at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140225/de29690f/attachment.html>

From gangwism at informatik.uni-freiburg.de  Tue Feb 25 09:12:55 2014
From: gangwism at informatik.uni-freiburg.de (Marcel Gangwisch)
Date: Tue, 25 Feb 2014 18:12:55 +0100
Subject: [gdal-dev] GDAL C# bindings - using rasterlite and spatialite in
	the same database
Message-ID: <530CCF17.10509@informatik.uni-freiburg.de>

Hi *,

I use the following command:

rasterliteDriver.CreateCopy("RASTERLITE:GeoDatabase.db,TABLE=raster_test", 
source, 1, options, null, null);

to read every gdal raster in my rasterlite database. After reading I'm 
also able to read another raster of vector file into the sqlite 
database. Everything works fine.

My Problem is now if I do this the other way around:
Then I first read a vector file into a spatialite database, and after 
that I want to read a raster file into the same database I get the 
following exception:
"does not exist in the file system, and is not recognised as a supported 
dataset name"

Does anybody know what I'm doing wrong?


Best regards,

Marcel

From even.rouault at mines-paris.org  Tue Feb 25 11:13:45 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 25 Feb 2014 20:13:45 +0100
Subject: [gdal-dev] WAsP map output for ogr
In-Reply-To: <530C8AD7.1040705@oslandia.com>
References: <530C77F2.6020305@oslandia.com> <530C8AD7.1040705@oslandia.com>
Message-ID: <201402252013.45182.even.rouault@mines-paris.org>

Vincent,
> 
> I'd like to develop a ogr driver to create .map files used by WAsP
> <http://en.wikipedia.org/wiki/WAsP>
> 
> The .map files contains height contours and roughness zones, the former
> are linestrings with an height attribute, the later are linestrings that
> separate two adjacent polygons with a roughness parameter on the righ
> and left sides.
> 
> An algorithm to create roughness zones from polygons with a roughness
> attribute would be useful: extract the polygon boundaries and output
> linestrings with attributes on the left and right sides.
> 
> What driver would you recommend as a starting point to get the
> interface, the coding style and the error handling right ?

A write-only driver if I understand well ? There are not so many instances of 
such drivers. I can think to the PGDump driver.

As far as coding style, there's http://trac.osgeo.org/gdal/wiki/rfc8_devguide 
with a few general guidelines.

> 
> Is the algorithm to create roughness zones from polygons (i.e. extract
> polygon boundaries and add left/right attributes) something that should
> be integrated in the driver, somewhere else or not at all in gdal ?

That's certainly the trickiest part of your task. There's no such algorithm in 
GDAL. I'm not very familiar with that but it sounds a bit like topological 
processing. Perhaps PostGis topology could be used to compute the edges from 
the polygons ? Reading the introduction of 
http://postgis.net/docs/Topology.html,  I can see that you should have in-
house competences on that ;-)
There's an idea for GSOC 2014 (Geography network support : 
http://trac.osgeo.org/gdal/wiki/SummerOfCode ) that seems a bit connected with 
your problem and could potentially served as the base for such algorithm.
But I'm not sure that GDAL alone could solve it. You likely need some 
intermediate storage to store and retrieve the edges from the polygon set 
(unless you have not that many polygons to deal with in which case in-memory 
processing could be OK).

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From ridgewang at gmail.com  Tue Feb 25 18:24:06 2014
From: ridgewang at gmail.com (ridgewang)
Date: Wed, 26 Feb 2014 10:24:06 +0800
Subject: [gdal-dev] Can not open bigtiff file using gdal1.10 API saved by
	photoshop cs6
Message-ID: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>

Hi,
  I have created a bigtiff file with over 3GB filesize using gdal 1.10 API , then I do some simple edition and save the result tiff image using photoshop cs6. Now I cannot open the result tiff file saved by ps cs 6 using gdal api, it reports that interger overflow and cannot process zero stripsize. As well photoshop cs6 can open the result bigtiff file.
  Thanks in advance for any tips!

Ridge
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140226/fb953f54/attachment.html>

From even.rouault at mines-paris.org  Wed Feb 26 00:22:59 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 26 Feb 2014 09:22:59 +0100
Subject: [gdal-dev] Can not open bigtiff file using gdal1.10 API saved
	by photoshop cs6
In-Reply-To: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
References: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
Message-ID: <201402260923.00196.even.rouault@mines-paris.org>

Le mercredi 26 f?vrier 2014 03:24:06, ridgewang a ?crit :
> Hi,
>   I have created a bigtiff file with over 3GB filesize using gdal 1.10 API
> , then I do some simple edition and save the result tiff image using
> photoshop cs6. Now I cannot open the result tiff file saved by ps cs 6
> using gdal api, it reports that interger overflow and cannot process zero
> stripsize. As well photoshop cs6 can open the result bigtiff file. Thanks
> in advance for any tips!

Ridge,

I guess that PS must put some funny value in a TIFF field.
Could you create a fully black 3GB bigtiff with GDAL, open it with PS, save it 
? You should reproduce the same issue. The advantage is that you should be 
able to zip it to something very small and be able to attach it to a ticket in 
http://trac.osgeo.org/gdal/newticket (you may need to zip the zip file !)

Even

> 
> Ridge

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From tkeitt at utexas.edu  Wed Feb 26 11:45:47 2014
From: tkeitt at utexas.edu (Tim Keitt)
Date: Wed, 26 Feb 2014 13:45:47 -0600
Subject: [gdal-dev] Layers and features
Message-ID: <CANnL8goHM-XocROzAqMETQau7p8+bPq7F6Mar2cJw0E+eyf3jA@mail.gmail.com>

When I extract a feature from a layer, what issues arise with the lifetime
of the feature and the layer? If I keep the layer alive, will the feature
continue to be valid?

If I clone a feature, is it now standalone or does it still depend on the
layer/datasource in anyway?

I see the note about destroying features prior to deleting the layer but
need a bit of clarification on the dependencies.

Thanks.

THK

-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140226/9c032293/attachment.html>

From even.rouault at mines-paris.org  Wed Feb 26 13:02:22 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 26 Feb 2014 22:02:22 +0100
Subject: [gdal-dev] Layers and features
In-Reply-To: <CANnL8goHM-XocROzAqMETQau7p8+bPq7F6Mar2cJw0E+eyf3jA@mail.gmail.com>
References: <CANnL8goHM-XocROzAqMETQau7p8+bPq7F6Mar2cJw0E+eyf3jA@mail.gmail.com>
Message-ID: <201402262202.22743.even.rouault@mines-paris.org>

Tim,

> When I extract a feature from a layer, what issues arise with the lifetime
> of the feature and the layer? If I keep the layer alive, will the feature
> continue to be valid?

Yes, feature objects (at least at C++ objects, not speaking about bindings) 
retrieved by GetNextFeature() and GetFeature() are completely free-standing. 
You can close the datasource and they should still be valid (reason: they keep 
a reference to their feature definition object, and once the last feature has 
been destroyed and the datasource closed, the feature definition will be 
destroyed)

> 
> If I clone a feature, is it now standalone or does it still depend on the
> layer/datasource in anyway?

No, and you don't need to clone it actually. See above

> 
> I see the note about destroying features prior to deleting the layer but
> need a bit of clarification on the dependencies.

Are you refering to "It is critical that
 all features associated with an OGRLayer (more specifically an 
 OGRFeatureDefn) be deleted before that layer/datasource is deleted." ?
Well, I think the note is wrong actually. Perhaps it dates back to old ages 
where the feature definition was not yet ref-counted ??

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From tkeitt at utexas.edu  Wed Feb 26 14:15:18 2014
From: tkeitt at utexas.edu (Tim Keitt)
Date: Wed, 26 Feb 2014 16:15:18 -0600
Subject: [gdal-dev] Layers and features
In-Reply-To: <201402262202.22743.even.rouault@mines-paris.org>
References: <CANnL8goHM-XocROzAqMETQau7p8+bPq7F6Mar2cJw0E+eyf3jA@mail.gmail.com>
	<201402262202.22743.even.rouault@mines-paris.org>
Message-ID: <CANnL8goNLzRjVVj6zZLPV1dE1xDwu4cVBHeMvbT5wVf_Y9VDGQ@mail.gmail.com>

On Wed, Feb 26, 2014 at 3:02 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Tim,
>
> > When I extract a feature from a layer, what issues arise with the
> lifetime
> > of the feature and the layer? If I keep the layer alive, will the feature
> > continue to be valid?
>
> Yes, feature objects (at least at C++ objects, not speaking about bindings)
> retrieved by GetNextFeature() and GetFeature() are completely
> free-standing.
> You can close the datasource and they should still be valid (reason: they
> keep
> a reference to their feature definition object, and once the last feature
> has
> been destroyed and the datasource closed, the feature definition will be
> destroyed)
>

OK. That was not clear.


>
> >
> > If I clone a feature, is it now standalone or does it still depend on the
> > layer/datasource in anyway?
>
> No, and you don't need to clone it actually. See above
>

Ah. OK. That will simplify my code a bit.

I assume this is not true of the return from OGR_F_GetGeometryRef, which
needs to be cloned or it can become invalid.


>
> >
> > I see the note about destroying features prior to deleting the layer but
> > need a bit of clarification on the dependencies.
>
> Are you refering to "It is critical that
>  all features associated with an OGRLayer (more specifically an
>  OGRFeatureDefn) be deleted before that layer/datasource is deleted." ?
> Well, I think the note is wrong actually. Perhaps it dates back to old ages
> where the feature definition was not yet ref-counted ??
>

Yes, that was the bit that had me concerned.

THK


>
> Best regards,
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140226/512fbfc6/attachment.html>

From even.rouault at mines-paris.org  Wed Feb 26 14:25:34 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 26 Feb 2014 23:25:34 +0100
Subject: [gdal-dev] Layers and features
In-Reply-To: <CANnL8goNLzRjVVj6zZLPV1dE1xDwu4cVBHeMvbT5wVf_Y9VDGQ@mail.gmail.com>
References: <CANnL8goHM-XocROzAqMETQau7p8+bPq7F6Mar2cJw0E+eyf3jA@mail.gmail.com>
	<201402262202.22743.even.rouault@mines-paris.org>
	<CANnL8goNLzRjVVj6zZLPV1dE1xDwu4cVBHeMvbT5wVf_Y9VDGQ@mail.gmail.com>
Message-ID: <201402262325.34399.even.rouault@mines-paris.org>


> I assume this is not true of the return from OGR_F_GetGeometryRef, which
> needs to be cloned or it can become invalid.

Yes, the geometry of a feature belongs to the feature. If you destroy the 
feature, the geometry becomes invalid. So you need to clone it to get a 
standalone version.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From elogeo at nottingham.ac.uk  Thu Feb 27 06:31:31 2014
From: elogeo at nottingham.ac.uk (Elogeo)
Date: Thu, 27 Feb 2014 14:31:31 +0000
Subject: [gdal-dev] ELOGeo Repository
Message-ID: <6BB97754489E1049BCBFB5D35124F33E25F18B4FC9@EXCHANGE1.ad.nottingham.ac.uk>

Hello,

My name is Adam Rousell and I am a researcher at the University of Nottingham working on the ELOGeo repository project. The ELOGeo repository is an OSGeo recognised store for digital material about open geospatial data, software and standards and aims at collecting, preserving and distributing these resources to the geospatial community. Users have contributed a large number of resources ranging from FOSS4G conference presentations to OpenSource GIS software, with the repository currently having in excess of 170 items deposited. Users of the site come from all over the world, with over 10,000 visitors arriving at the site in the past 6 months.

As part of a JISC funded research project, the ELOGeo repository has seen some redevelopment over the past few months which has now gone live. As such, now is an great time to get more people involved with the repository as the redevelopments are focussing on making the repository more accessible and reaching out to a wider audience. Due to our links with OSGeo we are pushing for an increase in content for the various OSGeo projects and have set up an area on the repository for each of these projects. We are always looking for new materials so if you have anything that you think would be useful to add please make a contribution to your section (or any other section if you have relevant materials). The collection for your project can be found at http://elogeo.nottingham.ac.uk/xmlui/handle/url/277 and currently has 10 resources in it. The process is fairly painless, but any questions please feel free to contact us and we will do our best to help out. Also, it would be of great benefit to users trying to find resources relating to your project if you could share the link to your section either on your project website or through mailing lists.

We hope to see some new materials for your project soon, and again, any questions please contact us on elogeo at nottingham.ac.uk<mailto:elogeo at nottingham.ac.uk>.

Adam Rousell (on behalf of the ELOGeo project team)
http://www.jisc.ac.uk
http://osgeo.org
http://elogeo.nottingham.ac.uk


This message and any attachment are intended solely for the addressee and may contain confidential information. If you have received this message in error, please send it back to me, and immediately delete it.   Please do not use, copy or disclose the information contained in this message or in any attachment.  Any views or opinions expressed by the author of this email do not necessarily reflect the views of the University of Nottingham.



This message has been checked for viruses but the contents of an attachment

may still contain software viruses which could damage your computer system, you are advised to perform your own checks. Email communications with the University of Nottingham may be monitored as permitted by UK legislation.









-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140227/107bc3be/attachment.html>

From even.rouault at mines-paris.org  Thu Feb 27 11:23:42 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 27 Feb 2014 20:23:42 +0100
Subject: [gdal-dev] GDAL C# bindings - using rasterlite and spatialite
	in the same database
In-Reply-To: <530CCF17.10509@informatik.uni-freiburg.de>
References: <530CCF17.10509@informatik.uni-freiburg.de>
Message-ID: <201402272023.42390.even.rouault@mines-paris.org>

Le mardi 25 f?vrier 2014 18:12:55, Marcel Gangwisch a ?crit :
> Hi *,
> 
> I use the following command:
> 
> rasterliteDriver.CreateCopy("RASTERLITE:GeoDatabase.db,TABLE=raster_test",
> source, 1, options, null, null);
> 
> to read every gdal raster in my rasterlite database. After reading I'm
> also able to read another raster of vector file into the sqlite
> database. Everything works fine.
> 
> My Problem is now if I do this the other way around:
> Then I first read a vector file into a spatialite database, and after
> that I want to read a raster file into the same database I get the
> following exception:
> "does not exist in the file system, and is not recognised as a supported
> dataset name"
> 
> Does anybody know what I'm doing wrong?

Marcel,

You should provide something more precise to reproduce. I've tested 
successfully the equivalent operations of what I've understood of your above 
description with the following command lines :

ogr2ogr -f sqlite poly.sqlite poly.shp -dsco spatialite=yes
gdal_translate -of rasterlite byte.tif RASTERLITE:poly.sqlite,TABLE=byte

and then both ogrinfo and gdalinfo show the vector and raster layers.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From gangwism at informatik.uni-freiburg.de  Thu Feb 27 12:39:52 2014
From: gangwism at informatik.uni-freiburg.de (Marcel Gangwisch)
Date: Thu, 27 Feb 2014 21:39:52 +0100
Subject: [gdal-dev] GDAL C# bindings - using rasterlite and spatialite
 in the same database
In-Reply-To: <201402272023.42390.even.rouault@mines-paris.org>
References: <530CCF17.10509@informatik.uni-freiburg.de>
	<201402272023.42390.even.rouault@mines-paris.org>
Message-ID: <530FA298.7030203@informatik.uni-freiburg.de>

Dear Even,

thank you for your answer! I think I know the real problem now.
Respectively Sandro (I think a developer of rasterlite) gave me the 
correct hint.
(https://groups.google.com/forum/?hl=de#!topic/spatialite-users/g8b3va_zteg 
<https://groups.google.com/forum/?hl=de#%21topic/spatialite-users/g8b3va_zteg>)

For the generation of the spatialite database I used spatialite 4.0...
But the precompiled gdal version (http://vbkto.dyndns.org:1280/sdk/) I 
used, uses spatialite 3.0...
I checked that, with the spatialite-gui.

So like Sandro wrote:
/"in this case a "new style" DB-file will be created in the first step; //
//but librasterlite hasn't the capability to access "new style" DB-files, //
//so any further attempt to import some raster data will then fail. /"

The Question is now, what to do...
Obviously I want to use the newest spatialite version.
Therefore I thinking about building gdal against spatialite 4.
On the other side, Sandro wrote, that rasterlite 2 will be coming soon.
So maybe I just stay on spatialite version 3. And use later version 4.

Best regards,
Marcel

Am 27.02.2014 20:23, schrieb Even Rouault:
> Le mardi 25 f?vrier 2014 18:12:55, Marcel Gangwisch a ?crit :
>> Hi *,
>>
>> I use the following command:
>>
>> rasterliteDriver.CreateCopy("RASTERLITE:GeoDatabase.db,TABLE=raster_test",
>> source, 1, options, null, null);
>>
>> to read every gdal raster in my rasterlite database. After reading I'm
>> also able to read another raster of vector file into the sqlite
>> database. Everything works fine.
>>
>> My Problem is now if I do this the other way around:
>> Then I first read a vector file into a spatialite database, and after
>> that I want to read a raster file into the same database I get the
>> following exception:
>> "does not exist in the file system, and is not recognised as a supported
>> dataset name"
>>
>> Does anybody know what I'm doing wrong?
> Marcel,
>
> You should provide something more precise to reproduce. I've tested
> successfully the equivalent operations of what I've understood of your above
> description with the following command lines :
>
> ogr2ogr -f sqlite poly.sqlite poly.shp -dsco spatialite=yes
> gdal_translate -of rasterlite byte.tif RASTERLITE:poly.sqlite,TABLE=byte
>
> and then both ogrinfo and gdalinfo show the vector and raster layers.
>
> Even
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140227/6ffea5ae/attachment.html>

From even.rouault at mines-paris.org  Thu Feb 27 12:43:42 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 27 Feb 2014 21:43:42 +0100
Subject: [gdal-dev] GDAL C# bindings - using rasterlite and spatialite
	in the same database
In-Reply-To: <530FA298.7030203@informatik.uni-freiburg.de>
References: <530CCF17.10509@informatik.uni-freiburg.de>
	<201402272023.42390.even.rouault@mines-paris.org>
	<530FA298.7030203@informatik.uni-freiburg.de>
Message-ID: <201402272143.42333.even.rouault@mines-paris.org>

Le jeudi 27 f?vrier 2014 21:39:52, Marcel Gangwisch a ?crit :
> Dear Even,
> 
> thank you for your answer! I think I know the real problem now.
> Respectively Sandro (I think a developer of rasterlite) gave me the
> correct hint.
> (https://groups.google.com/forum/?hl=de#!topic/spatialite-users/g8b3va_zteg
> <https://groups.google.com/forum/?hl=de#%21topic/spatialite-users/g8b3va_zt
> eg>)
> 
> For the generation of the spatialite database I used spatialite 4.0...
> But the precompiled gdal version (http://vbkto.dyndns.org:1280/sdk/) I
> used, uses spatialite 3.0...
> I checked that, with the spatialite-gui.

I doubt this is the reason. GDAL doesn't use librasterlite code. So when you 
stay with GDAL/OGR utilities, that should work. Of course the problem is that 
rasterlite DBs produced by GDAL may not work correctly with spatialite 
utilities.

> 
> So like Sandro wrote:
> /"in this case a "new style" DB-file will be created in the first step; //
> //but librasterlite hasn't the capability to access "new style" DB-files,
> // //so any further attempt to import some raster data will then fail. /"
> 
> The Question is now, what to do...
> Obviously I want to use the newest spatialite version.
> Therefore I thinking about building gdal against spatialite 4.
> On the other side, Sandro wrote, that rasterlite 2 will be coming soon.
> So maybe I just stay on spatialite version 3. And use later version 4.
> 
> Best regards,
> Marcel
> 
> Am 27.02.2014 20:23, schrieb Even Rouault:
> > Le mardi 25 f?vrier 2014 18:12:55, Marcel Gangwisch a ?crit :
> >> Hi *,
> >> 
> >> I use the following command:
> >> 
> >> rasterliteDriver.CreateCopy("RASTERLITE:GeoDatabase.db,TABLE=raster_test
> >> ", source, 1, options, null, null);
> >> 
> >> to read every gdal raster in my rasterlite database. After reading I'm
> >> also able to read another raster of vector file into the sqlite
> >> database. Everything works fine.
> >> 
> >> My Problem is now if I do this the other way around:
> >> Then I first read a vector file into a spatialite database, and after
> >> that I want to read a raster file into the same database I get the
> >> following exception:
> >> "does not exist in the file system, and is not recognised as a supported
> >> dataset name"
> >> 
> >> Does anybody know what I'm doing wrong?
> > 
> > Marcel,
> > 
> > You should provide something more precise to reproduce. I've tested
> > successfully the equivalent operations of what I've understood of your
> > above description with the following command lines :
> > 
> > ogr2ogr -f sqlite poly.sqlite poly.shp -dsco spatialite=yes
> > gdal_translate -of rasterlite byte.tif RASTERLITE:poly.sqlite,TABLE=byte
> > 
> > and then both ogrinfo and gdalinfo show the vector and raster layers.
> > 
> > Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From ridgewang at gmail.com  Thu Feb 27 15:22:39 2014
From: ridgewang at gmail.com (ridge wang)
Date: Fri, 28 Feb 2014 07:22:39 +0800
Subject: [gdal-dev] Can not open bigtiff file using gdal1.10 API saved
	by photoshop cs6
In-Reply-To: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
References: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
Message-ID: <CAK4ZbRaZE65ymjTS-LmYG28eQ70_VRMFeC5zgt-DdE8o-zoLbQ@mail.gmail.com>

Even,
     Sorry for reply so late. I create a tickets as
http://trac.osgeo.org/gdal/ticket/5403. I attached 2 tiff files, one can
opend by gdal and the other cannot. But they all can opend by photoshop
correctly. Both of these two original tiff file are created by gdal 1.10
and can reopen ok. The attached files are just filled all pixels to black
and saved by photoshop cs6. Can you give me some suggestions and is there
some utilities to repair these tiff files? thanks.

Ridge


On Wed, Feb 26, 2014 at 10:24 AM, ridgewang <ridgewang at gmail.com> wrote:

> Hi,
>   I have created a bigtiff file with over 3GB filesize using gdal 1.10 API
> , then I do some simple edition and save the result tiff image using
> photoshop cs6. Now I cannot open the result tiff file saved by ps cs 6
> using gdal api, it reports that interger overflow and cannot process zero
> stripsize. As well photoshop cs6 can open the result bigtiff file.
>   Thanks in advance for any tips!
>
> Ridge
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140228/74e45d06/attachment.html>

From ridgewang at gmail.com  Thu Feb 27 20:16:59 2014
From: ridgewang at gmail.com (ridgewang)
Date: Thu, 27 Feb 2014 20:16:59 -0800 (PST)
Subject: [gdal-dev] Can not open bigtiff file using gdal1.10 API saved
 by photoshop cs6
In-Reply-To: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
References: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
Message-ID: <1393561019253-5106514.post@n6.nabble.com>

Ps, sometimes it creates bigtiff file without any error reports by gdal 1.10
api, but can not open the tiff file by gdal api and reports zero stripsize.
anyway, the photoshop cs6 can open the tiff file correctly. for tips that
the file is created and save in a usb mobile harddisk. I wonder why the
photoshop so robust can open the tifffile with a zero stripsize? 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Can-not-open-bigtiff-file-using-gdal1-10-API-saved-by-photoshop-cs6-tp5105979p5106514.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From nixanz at nixanz.com  Thu Feb 27 21:47:42 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Fri, 28 Feb 2014 16:47:42 +1100
Subject: [gdal-dev] Cannot compile GDAL 1.10.1 for iOS with spatialite (2,
	3 or 4)
Message-ID: <32E4E482-6540-43D6-98CD-EB77A3F0323F@nixanz.com>

Hi all,

I can compile GDAL 1.10.1 for iOS OK, including SQLite.  However, I've been unable to include spatialite which I think need to get the performance increase I'm expecting from proper spatial indexing.

My 'configure' line is:

./configure --prefix=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk --libdir=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/i386/lib --host=i386-apple-darwin --disable-shared --enable-static --with-unix-stdio-64=no --without-pg --without-grass --without-libgrass --without-cfitsio --without-pcraster --without-netcdf --without-ogdi --without-fme --without-hdf4 --without-hdf5 --without-jasper --without-kakadu --without-bsb --without-grib --without-mysql --without-ingres --without-xerces --without-odbc --without-curl --without-idb --without-sde --without-sse --with-expat=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk --with-static-proj4=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk --with-sqlite3=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/usr --with-spatialite=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk

But the output of configure includes:

...
  SQLite support:            yes
...
  SpatiaLite support:        no
...

The config.log includes the reasons why (see a large section of it further below).  It is a LOT of undefined symbols related to sqlite3 (and a few from iconv).

I've had the same results with Spatialite versions 2, 3 and 4.

Initially, I thought the problem might be related to https://trac.osgeo.org/gdal/ticket/5122 however, neither of the work arounds there worked for me.  At least not completely.  If I use the LDFLags work around to force linking against iconv and sqlite3, then the configure appears to work OK and does include spatialite.  However, it then fails to compile with "Duplicate symbol" errors.

Could anybody help me to resolve this problem?

Cheers,
Nik.


------------------
config.log extract
------------------

configure:24960: checking for spatialite_init in -lspatialite
configure:24985: /Applications/Xcode.app/Contents/Developer/usr/bin/gcc -o conftest -arch i386 -pipe -Os -gdwarf-2 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk -D__IPHONE_OS_VERSION_MIN_REQUIRED=70000  -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk conftest.c -lspatialite -L/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib -lspatialite -L/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib -lexpat -lz -lpthread -ldl  >&5
Undefined symbols for architecture i386:
  "_iconv", referenced from:
      _gaiaOpenShpRead in libspatialite.a(gg_shape.o)
      _gaiaOpenShpWrite in libspatialite.a(gg_shape.o)
      _parseDbfField in libspatialite.a(gg_shape.o)
      _gaiaWriteShpEntity in libspatialite.a(gg_shape.o)
      _gaiaOpenDbfRead in libspatialite.a(gg_shape.o)
      _gaiaOpenDbfWrite in libspatialite.a(gg_shape.o)
      _gaiaWriteDbfEntity in libspatialite.a(gg_shape.o)
      ...
  "_iconv_close", referenced from:
      _gaiaFreeShapefile in libspatialite.a(gg_shape.o)
      _gaiaFreeDbf in libspatialite.a(gg_shape.o)
      _gaiaConvertCharset in libspatialite.a(gg_utf8.o)
      _gaiaFreeDbf in libspatialite.a(gg_shape.o)
      _gaiaConvertCharset in libspatialite.a(gg_utf8.o)
      _gaiaFreeUTF8Converter in libspatialite.a(gg_utf8.o)
  "_iconv_open", referenced from:
      _gaiaOpenShpRead in libspatialite.a(gg_shape.o)
      _gaiaOpenShpWrite in libspatialite.a(gg_shape.o)
      _gaiaOpenDbfRead in libspatialite.a(gg_shape.o)
      _gaiaOpenDbfWrite in libspatialite.a(gg_shape.o)
      _gaiaConvertCharset in libspatialite.a(gg_utf8.o)
      _gaiaCreateUTF8Converter in libspatialite.a(gg_utf8.o)
  "_sqlite3_aggregate_context", referenced from:
      _fnct_MD5TotalChecksum_step in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_MD5TotalChecksum_final in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_Extent_step in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_Extent_final in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_MakeLine_step in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_MakeLine_final in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_Collect_step in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_auto_extension", referenced from:
      _spatialite_init in libspatialite.a(libsplite_la-spatialite_init.o)
  "_sqlite3_bind_blob", referenced from:
      _gaiaExportDxf in libspatialite.a(dxf_writer.o)
      _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
  "_sqlite3_bind_double", referenced from:
      _doComputeFieldInfos in libspatialite.a(libsplite_la-statistics.o)
      _do_compute_layer_statistics in libspatialite.a(libsplite_la-statistics.o)
      _vspidx_filter in libspatialite.a(libsplite_la-virtualspatialindex.o)
      _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
  "_sqlite3_bind_int", referenced from:
      _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _spatial_ref_sys_init2 in libspatialite.a(libsrsinit_la-srs_init.o)
      _insert_epsg_srid in libspatialite.a(libsrsinit_la-srs_init.o)
      _doComputeFieldInfos in libspatialite.a(libsplite_la-statistics.o)
      _do_compute_layer_statistics in libspatialite.a(libsplite_la-statistics.o)
  "_sqlite3_bind_int64", referenced from:
      _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
      _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
      _build_solution in libspatialite.a(libsplite_la-virtualnetwork.o)
  "_sqlite3_bind_null", referenced from:
      _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
      _doComputeFieldInfos in libspatialite.a(libsplite_la-statistics.o)
      _do_compute_layer_statistics in libspatialite.a(libsplite_la-statistics.o)
      _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
  "_sqlite3_bind_parameter_count", referenced from:
      _gaiaExportDxf in libspatialite.a(dxf_writer.o)
  "_sqlite3_bind_text", referenced from:
      _gaiaExportDxf in libspatialite.a(dxf_writer.o)
  "_sqlite3_bind_text", referenced from:
      _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_DiscardGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
      _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
      _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
      _spatial_ref_sys_init2 in libspatialite.a(libsrsinit_la-srs_init.o)
      ...
  "_sqlite3_busy_timeout", referenced from:
      _spatialite_init_ex in libspatialite.a(libsplite_la-spatialite.o)
  "_sqlite3_changes", referenced from:
      _fnct_CreateSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_CreateMbrCache in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_DisableSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
  "_sqlite3_clear_bindings", referenced from:
      _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_DiscardGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
      _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
      _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
      _gaiaExportDxf in libspatialite.a(dxf_writer.o)
      ...
  "_sqlite3_column_blob", referenced from:
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _gaiaExportDxf in libspatialite.a(dxf_writer.o)
      _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
      _vnet_create in libspatialite.a(libsplite_la-virtualnetwork.o)
      _build_solution in libspatialite.a(libsplite_la-virtualnetwork.o)
  "_sqlite3_column_bytes", referenced from:
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
      _gaiaExportDxf in libspatialite.a(dxf_writer.o)
      _vspidx_filter in libspatialite.a(libsplite_la-virtualspatialindex.o)
      _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
      ...
  "_sqlite3_column_count", referenced from:
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _gaiaExportDxf in libspatialite.a(dxf_writer.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _gaiaExportDxf in libspatialite.a(dxf_writer.o)
  "_sqlite3_column_double", referenced from:
      _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
      _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
      _gaiaExportDxf in libspatialite.a(dxf_writer.o)
      _cache_load in libspatialite.a(libsplite_la-mbrcache.o)
      _do_compute_layer_statistics in libspatialite.a(libsplite_la-statistics.o)
      _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
  "_sqlite3_column_int", referenced from:
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
      _recover_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
      _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
      _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
      _gaiaExportDxf in libspatialite.a(dxf_writer.o)
      _cache_load in libspatialite.a(libsplite_la-mbrcache.o)
      ...
  "_sqlite3_column_int64", referenced from:
      _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
      _vspidx_filter in libspatialite.a(libsplite_la-virtualspatialindex.o)
      _vspidx_next in libspatialite.a(libsplite_la-virtualspatialindex.o)
      _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
      _build_solution in libspatialite.a(libsplite_la-virtualnetwork.o)
  "_sqlite3_column_name", referenced from:
      _gaiaExportDxf in libspatialite.a(dxf_writer.o)
  "_sqlite3_column_text", referenced from:
      _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
      _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
      _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
      _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
      ...
  "_sqlite3_column_type", referenced from:
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
      _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
      _gaiaExportDxf in libspatialite.a(dxf_writer.o)
      _cache_load in libspatialite.a(libsplite_la-mbrcache.o)
      _do_compute_layer_statistics in libspatialite.a(libsplite_la-statistics.o)
      ...
  "_sqlite3_context_db_handle", referenced from:
      _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_CheckSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_InitFDOSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_create_function", referenced from:
      _register_spatialite_sql_functions in libspatialite.a(libsplite_la-spatialite.o)
  "_sqlite3_create_module_v2", referenced from:
      _sqlite3MbrCacheInit in libspatialite.a(libsplite_la-mbrcache.o)
      _sqlite3VirtualSpatialIndexInit in libspatialite.a(libsplite_la-virtualspatialindex.o)
      _sqlite3VirtualDbfInit in libspatialite.a(libsplite_la-virtualdbf.o)
      _sqlite3VirtualFDOInit in libspatialite.a(libsplite_la-virtualfdo.o)
      _sqlite3VirtualNetworkInit in libspatialite.a(libsplite_la-virtualnetwork.o)
      _sqlite3VirtualShapeInit in libspatialite.a(libsplite_la-virtualshape.o)
      _sqlite3VirtualTextInit in libspatialite.a(virtualtext.o)
      ...
  "_sqlite3_declare_vtab", referenced from:
      _mbrc_create in libspatialite.a(libsplite_la-mbrcache.o)
      _vspidx_create in libspatialite.a(libsplite_la-virtualspatialindex.o)
      _vdbf_create in libspatialite.a(libsplite_la-virtualdbf.o)
      _vfdo_create in libspatialite.a(libsplite_la-virtualfdo.o)
      _vnet_create in libspatialite.a(libsplite_la-virtualnetwork.o)
      _vshp_create in libspatialite.a(libsplite_la-virtualshape.o)
      _vtxt_create in libspatialite.a(virtualtext.o)
      ...
  "_sqlite3_errcode", referenced from:
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
      _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
  "_sqlite3_errmsg", referenced from:
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_DiscardGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
      _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_exec", referenced from:
      ...
  "_sqlite3_exec", referenced from:
      _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_InitFDOSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_DiscardFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_finalize", referenced from:
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_DiscardGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
      _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_free", referenced from:
      _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_InitFDOSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_free_table", referenced from:
      _checkSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
      _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RegisterVirtualGeometry in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_get_table", referenced from:
      _checkSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
      _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RegisterVirtualGeometry in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_last_insert_rowid", referenced from:
      _gaiaInsertIntoSqlLog in libspatialite.a(gg_sqlaux.o)
      _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
  "_sqlite3_limit", referenced from:
      _fnct_BlobFromFile in libspatialite.a(libsplite_la-spatialite.o)
  "_sqlite3_malloc", referenced from:
      _mbrc_create in libspatialite.a(libsplite_la-mbrcache.o)
      _mbrc_open in libspatialite.a(libsplite_la-mbrcache.o)
      _vspidx_create in libspatialite.a(libsplite_la-virtualspatialindex.o)
      _vspidx_open in libspatialite.a(libsplite_la-virtualspatialindex.o)
      _vdbf_create in libspatialite.a(libsplite_la-virtualdbf.o)
      _vdbf_open in libspatialite.a(libsplite_la-virtualdbf.o)
      _vdbf_filter in libspatialite.a(libsplite_la-virtualdbf.o)
      ...
  "_sqlite3_mprintf", referenced from:
      _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_DiscardFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_prepare_v2", referenced from:
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_DiscardGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
      _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_randomness", referenced from:
      _fnct_CreateUUID in libspatialite.a(libsplite_la-spatialite.o)
  "_sqlite3_reset", referenced from:
      _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_DiscardGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
      _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
      _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
      _gaiaExportDxf in libspatialite.a(dxf_writer.o)
      ...
  "_sqlite3_reset_auto_extension", referenced from:
      _spatialite_cleanup in libspatialite.a(libsplite_la-spatialite_init.o)
      _spatialite_cleanup_ex in libspatialite.a(libsplite_la-spatialite.o)
  "_sqlite3_result_blob", referenced from:
      _fnct_GetLayerExtent in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_FromGml in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_FromGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_FromKml in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsFGF in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_FromEWKB in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_FromEWKT in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_result_double", referenced from:
      _fnct_CastToDouble in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_X in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_Y in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_Z in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_M in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_MbrMinX in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_result_int", referenced from:
      _fnct_has_proj in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_has_geos in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_has_geos_advanced in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_has_geos_trunk in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_has_lwgeom in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_has_math_sql in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_has_geo_callbacks in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_result_int64", referenced from:
      _fnct_CastToInteger in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
      _mbrc_column in libspatialite.a(libsplite_la-mbrcache.o)
      _vdbf_column in libspatialite.a(libsplite_la-virtualdbf.o)
      _vfdo_column in libspatialite.a(libsplite_la-virtualfdo.o)
      _vnet_column in libspatialite.a(libsplite_la-virtualnetwork.o)
      _vshp_column in libspatialite.a(libsplite_la-virtualshape.o)
      ...
  "_sqlite3_result_null", referenced from:
      ...
  "_sqlite3_result_null", referenced from:
      _fnct_proj4_version in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_geos_version in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_lwgeom_version in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_libxml2_version in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_GetLayerExtent in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_result_text", referenced from:
      _fnct_spatialite_version in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsText in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsWkt in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsGml in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_ToEWKB in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_ToEWKT in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_step", referenced from:
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_DiscardGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
      _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_value_blob", referenced from:
      _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsText in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsWkt in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsGml in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsFGF in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_value_bytes", referenced from:
      _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsText in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsWkt in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsGml in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AsFGF in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_value_double", referenced from:
      ...
  "_sqlite3_value_double", referenced from:
      _fnct_CastToInteger in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_CastToDouble in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_CastToText in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_Expand in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_EnvIntersects in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_ShiftCoords in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_value_int", referenced from:
      _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_InitSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_InsertEpsgSrid in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_value_int64", referenced from:
      _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_CastToInteger in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_CastToDouble in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_CastToText in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
      _mbrc_filter in libspatialite.a(libsplite_la-mbrcache.o)
      _mbrc_update in libspatialite.a(libsplite_la-mbrcache.o)
      ...
  "_sqlite3_value_text", referenced from:
      _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_DiscardFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_InitSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
      ...
  "_sqlite3_value_type", referenced from:
      _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_IsValidNoDataPixel in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      _fnct_DiscardFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
      ...
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation)
configure:24985: $? = 1
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME ""
| #define PACKAGE_TARNAME ""
| #define PACKAGE_VERSION ""
| #define PACKAGE_STRING ""
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE_URL ""
| #define STDC_HEADERS 1
| #define HAVE_SYS_TYPES_H 1
| #define HAVE_SYS_STAT_H 1
| #define HAVE_STDLIB_H 1
| #define HAVE_STRING_H 1
| #define HAVE_MEMORY_H 1
| #define HAVE_STRINGS_H 1
| #define HAVE_INTTYPES_H 1
| #define HAVE_STDINT_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_DLFCN_H 1
| #define LT_OBJDIR ".libs/"
| #define HAVE_LIBDL 1
| #define STDC_HEADERS 1
| #define HAVE_ASSERT_H 1
| #define HAVE_FCNTL_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_DLFCN_H 1
| #define HAVE_STDINT_H 1
| #define HAVE_LIMITS_H 1
| #define HAVE_LOCALE_H 1
| #define HAVE_FLOAT_H 1
| #define HAVE_ERRNO_H 1
| #define SIZEOF_INT 4
| #define SIZEOF_UNSIGNED_LONG 4
| #define SIZEOF_VOIDP 4
| #define HAVE_IEEEFP 1
| #define HOST_FILLORDER FILLORDER_LSB2MSB
| #define HAVE_VPRINTF 1
| #define HAVE_SNPRINTF 1
| #define HAVE_VSNPRINTF 1
| #define HAVE_SNPRINTF 1
| #define HAVE_VSNPRINTF 1
| #define HAVE_ATOLL 1
| #define HAVE_STRTOF 1
| #define HAVE_GETCWD 1
| #define HAVE_DECL_STRTOF 1
| #define HAVE_READLINK 1
| #define HAVE_LSTAT 1
| #define HAVE_POSIX_SPAWNP 1
| #define HAVE_VFORK 1
| #define HAVE_GETADDRINFO 1
| #define HAVE_PTHREAD_MUTEX_RECURSIVE 1
| #define CPL_MULTIPROC_PTHREAD 1
| #define HAVE_ICONV 1
| #define ICONV_CONST
| #define ICONV_CPP_CONST
| /* end confdefs.h.  */
|
| /* Override any GCC internal prototype to avoid an error.
|    Use char because int might match the return type of a GCC
|    builtin and then its argument prototype would still apply.  */
| #ifdef __cplusplus
| extern "C"
| #endif
| char spatialite_init ();
| int
| main ()
| {
| return spatialite_init ();
|   ;
|   return 0;
| }
configure:24994: result: no
configure:25042: result: disabled

From vincent.mora at oslandia.com  Fri Feb 28 01:26:28 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Fri, 28 Feb 2014 10:26:28 +0100
Subject: [gdal-dev] Who really owns the OGRFeatureDefn returned by
	OGRLayer::GetLayerDefn()
Message-ID: <53105644.30709@oslandia.com>

Hi,

OGRLayer::GetLayerDefn() doc says "The returned OGRFeatureDefn is owned by the OGRLayer,
and should not be modified or freed by the application."

But in alg/contour.cpp, in OGRContourWriter, the return value ofGetLayerDefn is used to
create a feature that apparently takes ownership of the returned OGRFeatureDefn. When this
feature is freed at the end ofOGRContourWriter, theOGRFeatureDefn is freed.

Am I missing something ?

For info, my implementation ofGetLayerDefn is:

OGRFeatureDefn * OGRWAsPLayer::GetLayerDefn()
{
     return &oLayerDefn;
}

withoLayerDefn a member ofOGRWAsPLayer:

classOGRWAsPLayer: public OGRLayer
{
    ...
    OGRFeatureDefn        oLayerDefn;
    ...
};

Everything works fine if I replaceGetLayerDefn by:

OGRFeatureDefn * OGRWAsPLayer::GetLayerDefn()
{
     return oLayerDefn.Clone();
}

but cloning like that is not what should be done according to the doc.

Note that the xls driver creates a new "dummy"OGRFeatureDefn  in its implementation
ofGetLayerDefn.


From even.rouault at mines-paris.org  Fri Feb 28 01:54:25 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 28 Feb 2014 10:54:25 +0100
Subject: [gdal-dev] Who really owns the OGRFeatureDefn returned by
	OGRLayer::GetLayerDefn()
In-Reply-To: <53105644.30709@oslandia.com>
References: <53105644.30709@oslandia.com>
Message-ID: <1393581265.53105cd189b77@imp.free.fr>

Hi Vincent,

> Hi,
>
> OGRLayer::GetLayerDefn() doc says "The returned OGRFeatureDefn is owned by
> the OGRLayer,
> and should not be modified or freed by the application."

Yes, a OGRFeatureDefn created by a layer should not be modified outside of the
driver, otherwise chaos will happen.

>
> But in alg/contour.cpp, in OGRContourWriter, the return value ofGetLayerDefn
> is used to
> create a feature that apparently takes ownership of the returned
> OGRFeatureDefn. When this
> feature is freed at the end ofOGRContourWriter, theOGRFeatureDefn is freed.
>
> Am I missing something ?

OGRContourWriter is correct. If the OGRFeatureDefn is freed at the end of
OGRContourWriter, this is very likely because the ref count of the feature defn
passed to OGRContourWriter  was 0, which is incorrect. Creating a feature
increases the ref count of the feature defn that is used to create it.
Destroying a feature decreases the ref count, and if 0 is reached, it destroys
the feature defn.

>
> For info, my implementation ofGetLayerDefn is:
>
> OGRFeatureDefn * OGRWAsPLayer::GetLayerDefn()
> {
>      return &oLayerDefn;
> }
>
> withoLayerDefn a member ofOGRWAsPLayer:
>
> classOGRWAsPLayer: public OGRLayer
> {
>     ...
>     OGRFeatureDefn        oLayerDefn;
>     ...
> };

This is incorrect. Your OGRWAsPLayer should have a OGRFeatureDefn* pointer, and
do the following in its constructor :

poLayerDefn = new OGRFeatureDefn();
poLayerDefn->Reference();

and in its destructor

poLayerDefn->Release();

(look at
http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/pgdump/ogrpgdumplayer.cpp)

> Note that the xls driver creates a new "dummy"OGRFeatureDefn  in its
> implementation
> ofGetLayerDefn.

Why do you call it "dummy" ? This is perfectly valid. It is just a lazy/differed
instanciation of the layer defn (for performance reasons). But you likely don't
need that.

Even


From nixanz at nixanz.com  Fri Feb 28 02:13:37 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Fri, 28 Feb 2014 21:13:37 +1100
Subject: [gdal-dev] Cannot compile GDAL 1.10.1 for iOS with spatialite
	(2, 3 or 4)
In-Reply-To: <32E4E482-6540-43D6-98CD-EB77A3F0323F@nixanz.com>
References: <32E4E482-6540-43D6-98CD-EB77A3F0323F@nixanz.com>
Message-ID: <0D231EA9-61D9-4DFB-9757-B508FBAE8B0B@nixanz.com>

For reference, when I add:

	LDFLAGS="-liconv -lsqlite3"

And configure says that spatialite is going to be included OK, I eventually get the error:

libtool: link: /Applications/Xcode.app/Contents/Developer/usr/bin/g++ -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk gdalinfo.o commonutils.o -o gdalinfo -Wl,-bind_at_load  /Users/nsands/Documents/Nik/Development/gdal-1.10.1/.libs/libgdal.a -L/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib -liconv -lsqlite3 -lproj -lexpat -lz -lpthread -ldl -lspatialite -lxml2
duplicate symbol _sqlite3_api in:
    /Users/nsands/Documents/Nik/Development/gdal-1.10.1/.libs/libgdal.a(ogrsqlitevirtualogr.o)
    /Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib/libspatialite.a(libsplite_la-spatialite_init.o)
duplicate symbol _sqlite3_extension_init in:
    /Users/nsands/Documents/Nik/Development/gdal-1.10.1/.libs/libgdal.a(ogrsqlitevirtualogr.o)
    /Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib/libspatialite.a(libsplite_la-spatialite_init.o)
ld: 2 duplicate symbols for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make[1]: *** [gdalinfo] Error 1
make: *** [apps-target] Error 2


On 28 Feb 2014, at 4:47 pm, Nik Sands <nixanz at nixanz.com> wrote:

> Hi all,
> 
> I can compile GDAL 1.10.1 for iOS OK, including SQLite.  However, I've been unable to include spatialite which I think need to get the performance increase I'm expecting from proper spatial indexing.
> 
> My 'configure' line is:
> 
> ./configure --prefix=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk --libdir=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/i386/lib --host=i386-apple-darwin --disable-shared --enable-static --with-unix-stdio-64=no --without-pg --without-grass --without-libgrass --without-cfitsio --without-pcraster --without-netcdf --without-ogdi --without-fme --without-hdf4 --without-hdf5 --without-jasper --without-kakadu --without-bsb --without-grib --without-mysql --without-ingres --without-xerces --without-odbc --without-curl --without-idb --without-sde --without-sse --with-expat=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk --with-static-proj4=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SD
> Ks/iPhon
> eSimulator7.0.sdk --with-sqlite3=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/usr --with-spatialite=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk
> 
> But the output of configure includes:
> 
> ...
> SQLite support:            yes
> ...
> SpatiaLite support:        no
> ...
> 
> The config.log includes the reasons why (see a large section of it further below).  It is a LOT of undefined symbols related to sqlite3 (and a few from iconv).
> 
> I've had the same results with Spatialite versions 2, 3 and 4.
> 
> Initially, I thought the problem might be related to https://trac.osgeo.org/gdal/ticket/5122 however, neither of the work arounds there worked for me.  At least not completely.  If I use the LDFLags work around to force linking against iconv and sqlite3, then the configure appears to work OK and does include spatialite.  However, it then fails to compile with "Duplicate symbol" errors.
> 
> Could anybody help me to resolve this problem?
> 
> Cheers,
> Nik.
> 
> 
> ------------------
> config.log extract
> ------------------
> 
> configure:24960: checking for spatialite_init in -lspatialite
> configure:24985: /Applications/Xcode.app/Contents/Developer/usr/bin/gcc -o conftest -arch i386 -pipe -Os -gdwarf-2 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk -D__IPHONE_OS_VERSION_MIN_REQUIRED=70000  -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk conftest.c -lspatialite -L/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib -lspatialite -L/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib -lexpat -lz -lpthread -ldl  >&5
> Undefined symbols for architecture i386:
> "_iconv", referenced from:
>     _gaiaOpenShpRead in libspatialite.a(gg_shape.o)
>     _gaiaOpenShpWrite in libspatialite.a(gg_shape.o)
>     _parseDbfField in libspatialite.a(gg_shape.o)
>     _gaiaWriteShpEntity in libspatialite.a(gg_shape.o)
>     _gaiaOpenDbfRead in libspatialite.a(gg_shape.o)
>     _gaiaOpenDbfWrite in libspatialite.a(gg_shape.o)
>     _gaiaWriteDbfEntity in libspatialite.a(gg_shape.o)
>     ...
> "_iconv_close", referenced from:
>     _gaiaFreeShapefile in libspatialite.a(gg_shape.o)
>     _gaiaFreeDbf in libspatialite.a(gg_shape.o)
>     _gaiaConvertCharset in libspatialite.a(gg_utf8.o)
>     _gaiaFreeDbf in libspatialite.a(gg_shape.o)
>     _gaiaConvertCharset in libspatialite.a(gg_utf8.o)
>     _gaiaFreeUTF8Converter in libspatialite.a(gg_utf8.o)
> "_iconv_open", referenced from:
>     _gaiaOpenShpRead in libspatialite.a(gg_shape.o)
>     _gaiaOpenShpWrite in libspatialite.a(gg_shape.o)
>     _gaiaOpenDbfRead in libspatialite.a(gg_shape.o)
>     _gaiaOpenDbfWrite in libspatialite.a(gg_shape.o)
>     _gaiaConvertCharset in libspatialite.a(gg_utf8.o)
>     _gaiaCreateUTF8Converter in libspatialite.a(gg_utf8.o)
> "_sqlite3_aggregate_context", referenced from:
>     _fnct_MD5TotalChecksum_step in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_MD5TotalChecksum_final in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_Extent_step in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_Extent_final in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_MakeLine_step in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_MakeLine_final in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_Collect_step in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_auto_extension", referenced from:
>     _spatialite_init in libspatialite.a(libsplite_la-spatialite_init.o)
> "_sqlite3_bind_blob", referenced from:
>     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>     _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
> "_sqlite3_bind_double", referenced from:
>     _doComputeFieldInfos in libspatialite.a(libsplite_la-statistics.o)
>     _do_compute_layer_statistics in libspatialite.a(libsplite_la-statistics.o)
>     _vspidx_filter in libspatialite.a(libsplite_la-virtualspatialindex.o)
>     _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
> "_sqlite3_bind_int", referenced from:
>     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _spatial_ref_sys_init2 in libspatialite.a(libsrsinit_la-srs_init.o)
>     _insert_epsg_srid in libspatialite.a(libsrsinit_la-srs_init.o)
>     _doComputeFieldInfos in libspatialite.a(libsplite_la-statistics.o)
>     _do_compute_layer_statistics in libspatialite.a(libsplite_la-statistics.o)
> "_sqlite3_bind_int64", referenced from:
>     _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
>     _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
>     _build_solution in libspatialite.a(libsplite_la-virtualnetwork.o)
> "_sqlite3_bind_null", referenced from:
>     _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
>     _doComputeFieldInfos in libspatialite.a(libsplite_la-statistics.o)
>     _do_compute_layer_statistics in libspatialite.a(libsplite_la-statistics.o)
>     _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
> "_sqlite3_bind_parameter_count", referenced from:
>     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> "_sqlite3_bind_text", referenced from:
>     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> "_sqlite3_bind_text", referenced from:
>     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_DiscardGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
>     _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
>     _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
>     _spatial_ref_sys_init2 in libspatialite.a(libsrsinit_la-srs_init.o)
>     ...
> "_sqlite3_busy_timeout", referenced from:
>     _spatialite_init_ex in libspatialite.a(libsplite_la-spatialite.o)
> "_sqlite3_changes", referenced from:
>     _fnct_CreateSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_CreateMbrCache in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_DisableSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> "_sqlite3_clear_bindings", referenced from:
>     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_DiscardGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
>     _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
>     _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
>     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>     ...
> "_sqlite3_column_blob", referenced from:
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>     _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
>     _vnet_create in libspatialite.a(libsplite_la-virtualnetwork.o)
>     _build_solution in libspatialite.a(libsplite_la-virtualnetwork.o)
> "_sqlite3_column_bytes", referenced from:
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
>     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>     _vspidx_filter in libspatialite.a(libsplite_la-virtualspatialindex.o)
>     _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
>     ...
> "_sqlite3_column_count", referenced from:
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> "_sqlite3_column_double", referenced from:
>     _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>     _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
>     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>     _cache_load in libspatialite.a(libsplite_la-mbrcache.o)
>     _do_compute_layer_statistics in libspatialite.a(libsplite_la-statistics.o)
>     _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
> "_sqlite3_column_int", referenced from:
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>     _recover_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>     _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
>     _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
>     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>     _cache_load in libspatialite.a(libsplite_la-mbrcache.o)
>     ...
> "_sqlite3_column_int64", referenced from:
>     _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
>     _vspidx_filter in libspatialite.a(libsplite_la-virtualspatialindex.o)
>     _vspidx_next in libspatialite.a(libsplite_la-virtualspatialindex.o)
>     _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
>     _build_solution in libspatialite.a(libsplite_la-virtualnetwork.o)
> "_sqlite3_column_name", referenced from:
>     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> "_sqlite3_column_text", referenced from:
>     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>     _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
>     _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
>     _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
>     ...
> "_sqlite3_column_type", referenced from:
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>     _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
>     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>     _cache_load in libspatialite.a(libsplite_la-mbrcache.o)
>     _do_compute_layer_statistics in libspatialite.a(libsplite_la-statistics.o)
>     ...
> "_sqlite3_context_db_handle", referenced from:
>     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_CheckSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_InitFDOSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_create_function", referenced from:
>     _register_spatialite_sql_functions in libspatialite.a(libsplite_la-spatialite.o)
> "_sqlite3_create_module_v2", referenced from:
>     _sqlite3MbrCacheInit in libspatialite.a(libsplite_la-mbrcache.o)
>     _sqlite3VirtualSpatialIndexInit in libspatialite.a(libsplite_la-virtualspatialindex.o)
>     _sqlite3VirtualDbfInit in libspatialite.a(libsplite_la-virtualdbf.o)
>     _sqlite3VirtualFDOInit in libspatialite.a(libsplite_la-virtualfdo.o)
>     _sqlite3VirtualNetworkInit in libspatialite.a(libsplite_la-virtualnetwork.o)
>     _sqlite3VirtualShapeInit in libspatialite.a(libsplite_la-virtualshape.o)
>     _sqlite3VirtualTextInit in libspatialite.a(virtualtext.o)
>     ...
> "_sqlite3_declare_vtab", referenced from:
>     _mbrc_create in libspatialite.a(libsplite_la-mbrcache.o)
>     _vspidx_create in libspatialite.a(libsplite_la-virtualspatialindex.o)
>     _vdbf_create in libspatialite.a(libsplite_la-virtualdbf.o)
>     _vfdo_create in libspatialite.a(libsplite_la-virtualfdo.o)
>     _vnet_create in libspatialite.a(libsplite_la-virtualnetwork.o)
>     _vshp_create in libspatialite.a(libsplite_la-virtualshape.o)
>     _vtxt_create in libspatialite.a(virtualtext.o)
>     ...
> "_sqlite3_errcode", referenced from:
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
>     _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
> "_sqlite3_errmsg", referenced from:
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_DiscardGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>     _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_exec", referenced from:
>     ...
> "_sqlite3_exec", referenced from:
>     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_InitFDOSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_DiscardFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_finalize", referenced from:
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_DiscardGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>     _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_free", referenced from:
>     _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_InitFDOSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_free_table", referenced from:
>     _checkSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
>     _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RegisterVirtualGeometry in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_get_table", referenced from:
>     _checkSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
>     _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RegisterVirtualGeometry in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_last_insert_rowid", referenced from:
>     _gaiaInsertIntoSqlLog in libspatialite.a(gg_sqlaux.o)
>     _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
> "_sqlite3_limit", referenced from:
>     _fnct_BlobFromFile in libspatialite.a(libsplite_la-spatialite.o)
> "_sqlite3_malloc", referenced from:
>     _mbrc_create in libspatialite.a(libsplite_la-mbrcache.o)
>     _mbrc_open in libspatialite.a(libsplite_la-mbrcache.o)
>     _vspidx_create in libspatialite.a(libsplite_la-virtualspatialindex.o)
>     _vspidx_open in libspatialite.a(libsplite_la-virtualspatialindex.o)
>     _vdbf_create in libspatialite.a(libsplite_la-virtualdbf.o)
>     _vdbf_open in libspatialite.a(libsplite_la-virtualdbf.o)
>     _vdbf_filter in libspatialite.a(libsplite_la-virtualdbf.o)
>     ...
> "_sqlite3_mprintf", referenced from:
>     _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_DiscardFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_prepare_v2", referenced from:
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_DiscardGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>     _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_randomness", referenced from:
>     _fnct_CreateUUID in libspatialite.a(libsplite_la-spatialite.o)
> "_sqlite3_reset", referenced from:
>     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_DiscardGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
>     _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
>     _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
>     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
>     ...
> "_sqlite3_reset_auto_extension", referenced from:
>     _spatialite_cleanup in libspatialite.a(libsplite_la-spatialite_init.o)
>     _spatialite_cleanup_ex in libspatialite.a(libsplite_la-spatialite.o)
> "_sqlite3_result_blob", referenced from:
>     _fnct_GetLayerExtent in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_FromGml in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_FromGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_FromKml in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsFGF in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_FromEWKB in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_FromEWKT in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_result_double", referenced from:
>     _fnct_CastToDouble in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_X in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_Y in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_Z in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_M in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_MbrMinX in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_result_int", referenced from:
>     _fnct_has_proj in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_has_geos in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_has_geos_advanced in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_has_geos_trunk in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_has_lwgeom in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_has_math_sql in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_has_geo_callbacks in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_result_int64", referenced from:
>     _fnct_CastToInteger in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
>     _mbrc_column in libspatialite.a(libsplite_la-mbrcache.o)
>     _vdbf_column in libspatialite.a(libsplite_la-virtualdbf.o)
>     _vfdo_column in libspatialite.a(libsplite_la-virtualfdo.o)
>     _vnet_column in libspatialite.a(libsplite_la-virtualnetwork.o)
>     _vshp_column in libspatialite.a(libsplite_la-virtualshape.o)
>     ...
> "_sqlite3_result_null", referenced from:
>     ...
> "_sqlite3_result_null", referenced from:
>     _fnct_proj4_version in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_geos_version in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_lwgeom_version in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_libxml2_version in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_GetLayerExtent in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_result_text", referenced from:
>     _fnct_spatialite_version in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsText in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsWkt in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsGml in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_ToEWKB in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_ToEWKT in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_step", referenced from:
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_DiscardGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
>     _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_value_blob", referenced from:
>     _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsText in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsWkt in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsGml in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsFGF in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_value_bytes", referenced from:
>     _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsText in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsWkt in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsGml in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AsFGF in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_value_double", referenced from:
>     ...
> "_sqlite3_value_double", referenced from:
>     _fnct_CastToInteger in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_CastToDouble in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_CastToText in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_Expand in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_EnvIntersects in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_ShiftCoords in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_value_int", referenced from:
>     _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_InitSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_InsertEpsgSrid in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_value_int64", referenced from:
>     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_CastToInteger in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_CastToDouble in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_CastToText in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
>     _mbrc_filter in libspatialite.a(libsplite_la-mbrcache.o)
>     _mbrc_update in libspatialite.a(libsplite_la-mbrcache.o)
>     ...
> "_sqlite3_value_text", referenced from:
>     _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_DiscardFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_InitSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> "_sqlite3_value_type", referenced from:
>     _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_IsValidNoDataPixel in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_AddFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_RecoverFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     _fnct_DiscardFDOGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
>     ...
> ld: symbol(s) not found for architecture i386
> clang: error: linker command failed with exit code 1 (use -v to see invocation)
> configure:24985: $? = 1
> configure: failed program was:
> | /* confdefs.h */
> | #define PACKAGE_NAME ""
> | #define PACKAGE_TARNAME ""
> | #define PACKAGE_VERSION ""
> | #define PACKAGE_STRING ""
> | #define PACKAGE_BUGREPORT ""
> | #define PACKAGE_URL ""
> | #define STDC_HEADERS 1
> | #define HAVE_SYS_TYPES_H 1
> | #define HAVE_SYS_STAT_H 1
> | #define HAVE_STDLIB_H 1
> | #define HAVE_STRING_H 1
> | #define HAVE_MEMORY_H 1
> | #define HAVE_STRINGS_H 1
> | #define HAVE_INTTYPES_H 1
> | #define HAVE_STDINT_H 1
> | #define HAVE_UNISTD_H 1
> | #define HAVE_DLFCN_H 1
> | #define LT_OBJDIR ".libs/"
> | #define HAVE_LIBDL 1
> | #define STDC_HEADERS 1
> | #define HAVE_ASSERT_H 1
> | #define HAVE_FCNTL_H 1
> | #define HAVE_UNISTD_H 1
> | #define HAVE_DLFCN_H 1
> | #define HAVE_STDINT_H 1
> | #define HAVE_LIMITS_H 1
> | #define HAVE_LOCALE_H 1
> | #define HAVE_FLOAT_H 1
> | #define HAVE_ERRNO_H 1
> | #define SIZEOF_INT 4
> | #define SIZEOF_UNSIGNED_LONG 4
> | #define SIZEOF_VOIDP 4
> | #define HAVE_IEEEFP 1
> | #define HOST_FILLORDER FILLORDER_LSB2MSB
> | #define HAVE_VPRINTF 1
> | #define HAVE_SNPRINTF 1
> | #define HAVE_VSNPRINTF 1
> | #define HAVE_SNPRINTF 1
> | #define HAVE_VSNPRINTF 1
> | #define HAVE_ATOLL 1
> | #define HAVE_STRTOF 1
> | #define HAVE_GETCWD 1
> | #define HAVE_DECL_STRTOF 1
> | #define HAVE_READLINK 1
> | #define HAVE_LSTAT 1
> | #define HAVE_POSIX_SPAWNP 1
> | #define HAVE_VFORK 1
> | #define HAVE_GETADDRINFO 1
> | #define HAVE_PTHREAD_MUTEX_RECURSIVE 1
> | #define CPL_MULTIPROC_PTHREAD 1
> | #define HAVE_ICONV 1
> | #define ICONV_CONST
> | #define ICONV_CPP_CONST
> | /* end confdefs.h.  */
> |
> | /* Override any GCC internal prototype to avoid an error.
> |    Use char because int might match the return type of a GCC
> |    builtin and then its argument prototype would still apply.  */
> | #ifdef __cplusplus
> | extern "C"
> | #endif
> | char spatialite_init ();
> | int
> | main ()
> | {
> | return spatialite_init ();
> |   ;
> |   return 0;
> | }
> configure:24994: result: no
> configure:25042: result: disabled
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From vincent.mora at oslandia.com  Fri Feb 28 03:13:47 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Fri, 28 Feb 2014 12:13:47 +0100
Subject: [gdal-dev] Who really owns the OGRFeatureDefn returned by
	OGRLayer::GetLayerDefn()
In-Reply-To: <1393581265.53105cd189b77@imp.free.fr>
References: <53105644.30709@oslandia.com>
	<1393581265.53105cd189b77@imp.free.fr>
Message-ID: <53106F6B.4090804@oslandia.com>

On 28/02/2014 10:54, Even Rouault wrote:
> Hi Vincent,
>
>> Hi,
>>
>> OGRLayer::GetLayerDefn() doc says "The returned OGRFeatureDefn is owned by
>> the OGRLayer,
>> and should not be modified or freed by the application."
> Yes, a OGRFeatureDefn created by a layer should not be modified outside of the
> driver, otherwise chaos will happen.
>
>> But in alg/contour.cpp, in OGRContourWriter, the return value ofGetLayerDefn
>> is used to
>> create a feature that apparently takes ownership of the returned
>> OGRFeatureDefn. When this
>> feature is freed at the end ofOGRContourWriter, theOGRFeatureDefn is freed.
>>
>> Am I missing something ?
> OGRContourWriter is correct. If the OGRFeatureDefn is freed at the end of
> OGRContourWriter, this is very likely because the ref count of the feature defn
> passed to OGRContourWriter  was 0, which is incorrect. Creating a feature
> increases the ref count of the feature defn that is used to create it.
> Destroying a feature decreases the ref count, and if 0 is reached, it destroys
> the feature defn.
>
>> For info, my implementation ofGetLayerDefn is:
>>
>> OGRFeatureDefn * OGRWAsPLayer::GetLayerDefn()
>> {
>>       return &oLayerDefn;
>> }
>>
>> withoLayerDefn a member ofOGRWAsPLayer:
>>
>> classOGRWAsPLayer: public OGRLayer
>> {
>>      ...
>>      OGRFeatureDefn        oLayerDefn;
>>      ...
>> };
> This is incorrect. Your OGRWAsPLayer should have a OGRFeatureDefn* pointer, and
> do the following in its constructor :
>
> poLayerDefn = new OGRFeatureDefn();
> poLayerDefn->Reference();
>
> and in its destructor
>
> poLayerDefn->Release();
>
> (look at
> http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/pgdump/ogrpgdumplayer.cpp)
Thanks for that.

>> Note that the xls driver creates a new "dummy"OGRFeatureDefn  in its
>> implementation
>> ofGetLayerDefn.
> Why do you call it "dummy" ? This is perfectly valid. It is just a lazy/differed
> instanciation of the layer defn (for performance reasons). But you likely don't
> need that.
Sorry, I must have had a 'return new OGRFeatureDefn("dummy");' in my 
code and mistakenly took that code for xls driver code (which I took as 
a starting point before you mentionned pgdump). "Dummy" was referring to 
that line of code (which was my code :-( ).
> Even
>


From even.rouault at mines-paris.org  Fri Feb 28 04:02:27 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 28 Feb 2014 13:02:27 +0100
Subject: [gdal-dev] Cannot compile GDAL 1.10.1 for iOS with spatialite
	(2, 3 or 4)
In-Reply-To: <0D231EA9-61D9-4DFB-9757-B508FBAE8B0B@nixanz.com>
References: <32E4E482-6540-43D6-98CD-EB77A3F0323F@nixanz.com>
	<0D231EA9-61D9-4DFB-9757-B508FBAE8B0B@nixanz.com>
Message-ID: <1393588947.53107ad39c7dc@imp.free.fr>

Selon Nik Sands <nixanz at nixanz.com>:

> For reference, when I add:
>
> 	LDFLAGS="-liconv -lsqlite3"
>
> And configure says that spatialite is going to be included OK, I eventually
> get the error:
>
> libtool: link: /Applications/Xcode.app/Contents/Developer/usr/bin/g++ -arch
> i386 -isysroot
>
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk
> gdalinfo.o commonutils.o -o gdalinfo -Wl,-bind_at_load
> /Users/nsands/Documents/Nik/Development/gdal-1.10.1/.libs/libgdal.a
>
-L/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib
> -liconv -lsqlite3 -lproj -lexpat -lz -lpthread -ldl -lspatialite -lxml2
> duplicate symbol _sqlite3_api in:
>
>
/Users/nsands/Documents/Nik/Development/gdal-1.10.1/.libs/libgdal.a(ogrsqlitevirtualogr.o)
>
>
/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib/libspatialite.a(libsplite_la-spatialite_init.o)
> duplicate symbol _sqlite3_extension_init in:
>
>
/Users/nsands/Documents/Nik/Development/gdal-1.10.1/.libs/libgdal.a(ogrsqlitevirtualogr.o)
>
>
/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib/libspatialite.a(libsplite_la-spatialite_init.o)
> ld: 2 duplicate symbols for architecture i386
> clang: error: linker command failed with exit code 1 (use -v to see
> invocation)
> make[1]: *** [gdalinfo] Error 1
> make: *** [apps-target] Error 2
>

iOS only does static linking, not dynamic right ? Well, in that case, the
problem is that both libspatialite and libgdal define sqlite3 extensions, hence
the symbol conflict. If you don't need OGR SQLITE SQL dialect, then you can try
editing ogr/ogrsf_frmts/sqlite/ogr_sqlite.h to comment #define HAVE_SQLITE_VFS
and rebuilding GDAL.

>
> On 28 Feb 2014, at 4:47 pm, Nik Sands <nixanz at nixanz.com> wrote:
>
> > Hi all,
> >
> > I can compile GDAL 1.10.1 for iOS OK, including SQLite.  However, I've been
> unable to include spatialite which I think need to get the performance
> increase I'm expecting from proper spatial indexing.
> >
> > My 'configure' line is:
> >
> > ./configure
>
--prefix=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk
>
--libdir=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/i386/lib
> --host=i386-apple-darwin --disable-shared --enable-static
> --with-unix-stdio-64=no --without-pg --without-grass --without-libgrass
> --without-cfitsio --without-pcraster --without-netcdf --without-ogdi
> --without-fme --without-hdf4 --without-hdf5 --without-jasper --without-kakadu
> --without-bsb --without-grib --without-mysql --without-ingres
> --without-xerces --without-odbc --without-curl --without-idb --without-sde
> --without-sse
>
--with-expat=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk
>
--with-static-proj4=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/
>  SD
> > Ks/iPhon
> > eSimulator7.0.sdk
>
--with-sqlite3=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/usr
>
--with-spatialite=/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk
> >
> > But the output of configure includes:
> >
> > ...
> > SQLite support:            yes
> > ...
> > SpatiaLite support:        no
> > ...
> >
> > The config.log includes the reasons why (see a large section of it further
> below).  It is a LOT of undefined symbols related to sqlite3 (and a few from
> iconv).
> >
> > I've had the same results with Spatialite versions 2, 3 and 4.
> >
> > Initially, I thought the problem might be related to
> https://trac.osgeo.org/gdal/ticket/5122 however, neither of the work arounds
> there worked for me.  At least not completely.  If I use the LDFLags work
> around to force linking against iconv and sqlite3, then the configure appears
> to work OK and does include spatialite.  However, it then fails to compile
> with "Duplicate symbol" errors.
> >
> > Could anybody help me to resolve this problem?
> >
> > Cheers,
> > Nik.
> >
> >
> > ------------------
> > config.log extract
> > ------------------
> >
> > configure:24960: checking for spatialite_init in -lspatialite
> > configure:24985: /Applications/Xcode.app/Contents/Developer/usr/bin/gcc -o
> conftest -arch i386 -pipe -Os -gdwarf-2 -isysroot
>
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk
> -D__IPHONE_OS_VERSION_MIN_REQUIRED=70000  -arch i386 -isysroot
>
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk
> conftest.c -lspatialite
>
-L/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib
> -lspatialite
>
-L/Users/nsands/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.0.sdk/lib
> -lexpat -lz -lpthread -ldl  >&5
> > Undefined symbols for architecture i386:
> > "_iconv", referenced from:
> >     _gaiaOpenShpRead in libspatialite.a(gg_shape.o)
> >     _gaiaOpenShpWrite in libspatialite.a(gg_shape.o)
> >     _parseDbfField in libspatialite.a(gg_shape.o)
> >     _gaiaWriteShpEntity in libspatialite.a(gg_shape.o)
> >     _gaiaOpenDbfRead in libspatialite.a(gg_shape.o)
> >     _gaiaOpenDbfWrite in libspatialite.a(gg_shape.o)
> >     _gaiaWriteDbfEntity in libspatialite.a(gg_shape.o)
> >     ...
> > "_iconv_close", referenced from:
> >     _gaiaFreeShapefile in libspatialite.a(gg_shape.o)
> >     _gaiaFreeDbf in libspatialite.a(gg_shape.o)
> >     _gaiaConvertCharset in libspatialite.a(gg_utf8.o)
> >     _gaiaFreeDbf in libspatialite.a(gg_shape.o)
> >     _gaiaConvertCharset in libspatialite.a(gg_utf8.o)
> >     _gaiaFreeUTF8Converter in libspatialite.a(gg_utf8.o)
> > "_iconv_open", referenced from:
> >     _gaiaOpenShpRead in libspatialite.a(gg_shape.o)
> >     _gaiaOpenShpWrite in libspatialite.a(gg_shape.o)
> >     _gaiaOpenDbfRead in libspatialite.a(gg_shape.o)
> >     _gaiaOpenDbfWrite in libspatialite.a(gg_shape.o)
> >     _gaiaConvertCharset in libspatialite.a(gg_utf8.o)
> >     _gaiaCreateUTF8Converter in libspatialite.a(gg_utf8.o)
> > "_sqlite3_aggregate_context", referenced from:
> >     _fnct_MD5TotalChecksum_step in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_MD5TotalChecksum_final in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_Extent_step in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_Extent_final in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_MakeLine_step in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_MakeLine_final in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_Collect_step in libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_auto_extension", referenced from:
> >     _spatialite_init in libspatialite.a(libsplite_la-spatialite_init.o)
> > "_sqlite3_bind_blob", referenced from:
> >     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> >     _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
> > "_sqlite3_bind_double", referenced from:
> >     _doComputeFieldInfos in libspatialite.a(libsplite_la-statistics.o)
> >     _do_compute_layer_statistics in
> libspatialite.a(libsplite_la-statistics.o)
> >     _vspidx_filter in libspatialite.a(libsplite_la-virtualspatialindex.o)
> >     _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
> > "_sqlite3_bind_int", referenced from:
> >     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _spatial_ref_sys_init2 in libspatialite.a(libsrsinit_la-srs_init.o)
> >     _insert_epsg_srid in libspatialite.a(libsrsinit_la-srs_init.o)
> >     _doComputeFieldInfos in libspatialite.a(libsplite_la-statistics.o)
> >     _do_compute_layer_statistics in
> libspatialite.a(libsplite_la-statistics.o)
> > "_sqlite3_bind_int64", referenced from:
> >     _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
> >     _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
> >     _build_solution in libspatialite.a(libsplite_la-virtualnetwork.o)
> > "_sqlite3_bind_null", referenced from:
> >     _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
> >     _doComputeFieldInfos in libspatialite.a(libsplite_la-statistics.o)
> >     _do_compute_layer_statistics in
> libspatialite.a(libsplite_la-statistics.o)
> >     _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
> > "_sqlite3_bind_parameter_count", referenced from:
> >     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> > "_sqlite3_bind_text", referenced from:
> >     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> > "_sqlite3_bind_text", referenced from:
> >     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_DiscardGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
> >     _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
> >     _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
> >     _spatial_ref_sys_init2 in libspatialite.a(libsrsinit_la-srs_init.o)
> >     ...
> > "_sqlite3_busy_timeout", referenced from:
> >     _spatialite_init_ex in libspatialite.a(libsplite_la-spatialite.o)
> > "_sqlite3_changes", referenced from:
> >     _fnct_CreateSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_CreateMbrCache in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_DisableSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> > "_sqlite3_clear_bindings", referenced from:
> >     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_DiscardGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
> >     _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
> >     _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
> >     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> >     ...
> > "_sqlite3_column_blob", referenced from:
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> >     _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
> >     _vnet_create in libspatialite.a(libsplite_la-virtualnetwork.o)
> >     _build_solution in libspatialite.a(libsplite_la-virtualnetwork.o)
> > "_sqlite3_column_bytes", referenced from:
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
> >     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> >     _vspidx_filter in libspatialite.a(libsplite_la-virtualspatialindex.o)
> >     _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
> >     ...
> > "_sqlite3_column_count", referenced from:
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> > "_sqlite3_column_double", referenced from:
> >     _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
> >     _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
> >     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> >     _cache_load in libspatialite.a(libsplite_la-mbrcache.o)
> >     _do_compute_layer_statistics in
> libspatialite.a(libsplite_la-statistics.o)
> >     _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
> > "_sqlite3_column_int", referenced from:
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
> >     _recover_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
> >     _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
> >     _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
> >     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> >     _cache_load in libspatialite.a(libsplite_la-mbrcache.o)
> >     ...
> > "_sqlite3_column_int64", referenced from:
> >     _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
> >     _vspidx_filter in libspatialite.a(libsplite_la-virtualspatialindex.o)
> >     _vspidx_next in libspatialite.a(libsplite_la-virtualspatialindex.o)
> >     _vfdo_read_row in libspatialite.a(libsplite_la-virtualfdo.o)
> >     _build_solution in libspatialite.a(libsplite_la-virtualnetwork.o)
> > "_sqlite3_column_name", referenced from:
> >     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> > "_sqlite3_column_text", referenced from:
> >     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> >     _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
> >     _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
> >     _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
> >     ...
> > "_sqlite3_column_type", referenced from:
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
> >     _gaiaGetVectorLayersList in libspatialite.a(libsplite_la-metatables.o)
> >     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> >     _cache_load in libspatialite.a(libsplite_la-mbrcache.o)
> >     _do_compute_layer_statistics in
> libspatialite.a(libsplite_la-statistics.o)
> >     ...
> > "_sqlite3_context_db_handle", referenced from:
> >     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_CheckSpatialMetaData in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_InitFDOSpatialMetaData in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_create_function", referenced from:
> >     _register_spatialite_sql_functions in
> libspatialite.a(libsplite_la-spatialite.o)
> > "_sqlite3_create_module_v2", referenced from:
> >     _sqlite3MbrCacheInit in libspatialite.a(libsplite_la-mbrcache.o)
> >     _sqlite3VirtualSpatialIndexInit in
> libspatialite.a(libsplite_la-virtualspatialindex.o)
> >     _sqlite3VirtualDbfInit in libspatialite.a(libsplite_la-virtualdbf.o)
> >     _sqlite3VirtualFDOInit in libspatialite.a(libsplite_la-virtualfdo.o)
> >     _sqlite3VirtualNetworkInit in
> libspatialite.a(libsplite_la-virtualnetwork.o)
> >     _sqlite3VirtualShapeInit in
> libspatialite.a(libsplite_la-virtualshape.o)
> >     _sqlite3VirtualTextInit in libspatialite.a(virtualtext.o)
> >     ...
> > "_sqlite3_declare_vtab", referenced from:
> >     _mbrc_create in libspatialite.a(libsplite_la-mbrcache.o)
> >     _vspidx_create in libspatialite.a(libsplite_la-virtualspatialindex.o)
> >     _vdbf_create in libspatialite.a(libsplite_la-virtualdbf.o)
> >     _vfdo_create in libspatialite.a(libsplite_la-virtualfdo.o)
> >     _vnet_create in libspatialite.a(libsplite_la-virtualnetwork.o)
> >     _vshp_create in libspatialite.a(libsplite_la-virtualshape.o)
> >     _vtxt_create in libspatialite.a(virtualtext.o)
> >     ...
> > "_sqlite3_errcode", referenced from:
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
> >     _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
> > "_sqlite3_errmsg", referenced from:
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_DiscardGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> >     _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_exec", referenced from:
> >     ...
> > "_sqlite3_exec", referenced from:
> >     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_InitFDOSpatialMetaData in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_DiscardFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_finalize", referenced from:
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_DiscardGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> >     _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_free", referenced from:
> >     _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_InitFDOSpatialMetaData in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_free_table", referenced from:
> >     _checkSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
> >     _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RegisterVirtualGeometry in
> libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_get_table", referenced from:
> >     _checkSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
> >     _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RegisterVirtualGeometry in
> libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_last_insert_rowid", referenced from:
> >     _gaiaInsertIntoSqlLog in libspatialite.a(gg_sqlaux.o)
> >     _vfdo_update in libspatialite.a(libsplite_la-virtualfdo.o)
> > "_sqlite3_limit", referenced from:
> >     _fnct_BlobFromFile in libspatialite.a(libsplite_la-spatialite.o)
> > "_sqlite3_malloc", referenced from:
> >     _mbrc_create in libspatialite.a(libsplite_la-mbrcache.o)
> >     _mbrc_open in libspatialite.a(libsplite_la-mbrcache.o)
> >     _vspidx_create in libspatialite.a(libsplite_la-virtualspatialindex.o)
> >     _vspidx_open in libspatialite.a(libsplite_la-virtualspatialindex.o)
> >     _vdbf_create in libspatialite.a(libsplite_la-virtualdbf.o)
> >     _vdbf_open in libspatialite.a(libsplite_la-virtualdbf.o)
> >     _vdbf_filter in libspatialite.a(libsplite_la-virtualdbf.o)
> >     ...
> > "_sqlite3_mprintf", referenced from:
> >     _getProjParams in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AutoFDOStart in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AutoFDOStop in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_DiscardFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_prepare_v2", referenced from:
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_DiscardGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> >     _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_randomness", referenced from:
> >     _fnct_CreateUUID in libspatialite.a(libsplite_la-spatialite.o)
> > "_sqlite3_reset", referenced from:
> >     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_DiscardGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _updateSpatiaLiteHistory in libspatialite.a(libsplite_la-metatables.o)
> >     _updateGeometryTriggers in libspatialite.a(libsplite_la-metatables.o)
> >     _getRealSQLnames in libspatialite.a(libsplite_la-metatables.o)
> >     _gaiaExportDxf in libspatialite.a(dxf_writer.o)
> >     ...
> > "_sqlite3_reset_auto_extension", referenced from:
> >     _spatialite_cleanup in libspatialite.a(libsplite_la-spatialite_init.o)
> >     _spatialite_cleanup_ex in libspatialite.a(libsplite_la-spatialite.o)
> > "_sqlite3_result_blob", referenced from:
> >     _fnct_GetLayerExtent in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_FromGml in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_FromGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_FromKml in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsFGF in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_FromEWKB in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_FromEWKT in libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_result_double", referenced from:
> >     _fnct_CastToDouble in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_X in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_Y in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_Z in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_M in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_MbrMinX in libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_result_int", referenced from:
> >     _fnct_has_proj in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_has_geos in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_has_geos_advanced in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_has_geos_trunk in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_has_lwgeom in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_has_math_sql in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_has_geo_callbacks in libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_result_int64", referenced from:
> >     _fnct_CastToInteger in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
> >     _mbrc_column in libspatialite.a(libsplite_la-mbrcache.o)
> >     _vdbf_column in libspatialite.a(libsplite_la-virtualdbf.o)
> >     _vfdo_column in libspatialite.a(libsplite_la-virtualfdo.o)
> >     _vnet_column in libspatialite.a(libsplite_la-virtualnetwork.o)
> >     _vshp_column in libspatialite.a(libsplite_la-virtualshape.o)
> >     ...
> > "_sqlite3_result_null", referenced from:
> >     ...
> > "_sqlite3_result_null", referenced from:
> >     _fnct_proj4_version in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_geos_version in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_lwgeom_version in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_libxml2_version in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_GetLayerExtent in libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_result_text", referenced from:
> >     _fnct_spatialite_version in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsText in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsWkt in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsGml in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_ToEWKB in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_ToEWKT in libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_step", referenced from:
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_DiscardGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_CheckSpatialIndex in libspatialite.a(libsplite_la-spatialite.o)
> >     _check_spatial_index in libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_value_blob", referenced from:
> >     _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsText in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsWkt in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsGml in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsFGF in libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_value_bytes", referenced from:
> >     _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsText in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsWkt in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsGml in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsGeoJSON in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AsFGF in libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_value_double", referenced from:
> >     ...
> > "_sqlite3_value_double", referenced from:
> >     _fnct_CastToInteger in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_CastToDouble in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_CastToText in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_Expand in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_EnvIntersects in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_ShiftCoords in libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_value_int", referenced from:
> >     _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_InitSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_InsertEpsgSrid in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddGeometryColumn in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_value_int64", referenced from:
> >     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_CastToInteger in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_CastToDouble in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_CastToText in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_ForceAsNull in libspatialite.a(libsplite_la-spatialite.o)
> >     _mbrc_filter in libspatialite.a(libsplite_la-mbrcache.o)
> >     _mbrc_update in libspatialite.a(libsplite_la-mbrcache.o)
> >     ...
> > "_sqlite3_value_text", referenced from:
> >     _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_DiscardFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_InitSpatialMetaData in libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > "_sqlite3_value_type", referenced from:
> >     _fnct_GeometryConstraints in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RTreeAlign in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_IsValidNoDataPixel in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_IsPopulatedCoverage in libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_AddFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_RecoverFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     _fnct_DiscardFDOGeometryColumn in
> libspatialite.a(libsplite_la-spatialite.o)
> >     ...
> > ld: symbol(s) not found for architecture i386
> > clang: error: linker command failed with exit code 1 (use -v to see
> invocation)
> > configure:24985: $? = 1
> > configure: failed program was:
> > | /* confdefs.h */
> > | #define PACKAGE_NAME ""
> > | #define PACKAGE_TARNAME ""
> > | #define PACKAGE_VERSION ""
> > | #define PACKAGE_STRING ""
> > | #define PACKAGE_BUGREPORT ""
> > | #define PACKAGE_URL ""
> > | #define STDC_HEADERS 1
> > | #define HAVE_SYS_TYPES_H 1
> > | #define HAVE_SYS_STAT_H 1
> > | #define HAVE_STDLIB_H 1
> > | #define HAVE_STRING_H 1
> > | #define HAVE_MEMORY_H 1
> > | #define HAVE_STRINGS_H 1
> > | #define HAVE_INTTYPES_H 1
> > | #define HAVE_STDINT_H 1
> > | #define HAVE_UNISTD_H 1
> > | #define HAVE_DLFCN_H 1
> > | #define LT_OBJDIR ".libs/"
> > | #define HAVE_LIBDL 1
> > | #define STDC_HEADERS 1
> > | #define HAVE_ASSERT_H 1
> > | #define HAVE_FCNTL_H 1
> > | #define HAVE_UNISTD_H 1
> > | #define HAVE_DLFCN_H 1
> > | #define HAVE_STDINT_H 1
> > | #define HAVE_LIMITS_H 1
> > | #define HAVE_LOCALE_H 1
> > | #define HAVE_FLOAT_H 1
> > | #define HAVE_ERRNO_H 1
> > | #define SIZEOF_INT 4
> > | #define SIZEOF_UNSIGNED_LONG 4
> > | #define SIZEOF_VOIDP 4
> > | #define HAVE_IEEEFP 1
> > | #define HOST_FILLORDER FILLORDER_LSB2MSB
> > | #define HAVE_VPRINTF 1
> > | #define HAVE_SNPRINTF 1
> > | #define HAVE_VSNPRINTF 1
> > | #define HAVE_SNPRINTF 1
> > | #define HAVE_VSNPRINTF 1
> > | #define HAVE_ATOLL 1
> > | #define HAVE_STRTOF 1
> > | #define HAVE_GETCWD 1
> > | #define HAVE_DECL_STRTOF 1
> > | #define HAVE_READLINK 1
> > | #define HAVE_LSTAT 1
> > | #define HAVE_POSIX_SPAWNP 1
> > | #define HAVE_VFORK 1
> > | #define HAVE_GETADDRINFO 1
> > | #define HAVE_PTHREAD_MUTEX_RECURSIVE 1
> > | #define CPL_MULTIPROC_PTHREAD 1
> > | #define HAVE_ICONV 1
> > | #define ICONV_CONST
> > | #define ICONV_CPP_CONST
> > | /* end confdefs.h.  */
> > |
> > | /* Override any GCC internal prototype to avoid an error.
> > |    Use char because int might match the return type of a GCC
> > |    builtin and then its argument prototype would still apply.  */
> > | #ifdef __cplusplus
> > | extern "C"
> > | #endif
> > | char spatialite_init ();
> > | int
> > | main ()
> > | {
> > | return spatialite_init ();
> > |   ;
> > |   return 0;
> > | }
> > configure:24994: result: no
> > configure:25042: result: disabled
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From barthelemy at geovariances.com  Fri Feb 28 04:25:40 2014
From: barthelemy at geovariances.com (Olivier BARTHELEMY)
Date: Fri, 28 Feb 2014 13:25:40 +0100
Subject: [gdal-dev] cpppcheck warning in ogr_core.h
Message-ID: <CAK9jXVVDneAM4FmdcHaWH+WpcRfH1j7wBcV1WyVQorf6AyCDxg@mail.gmail.com>

Hi,
Cppcheck reports a redundant condition "MaxZ>=other.MaxZ in
OGREnvelope3D::contains()
Isn't it a copy paste error, and isn't the condition MinZ<=other.MinZ
missing?

-- 
[image: Geovariances]

Olivier BARTHELEMY *Software development engineer*
Geovariances, 49bis avenue Franklin Roosevelt - 77215 AVON CEDEX - FRANCE
| www.geovariances.com <http://link.geovariances.com/eml-home>
Keep posted about Geovariances   <http://link.geovariances.com/eml-geowidget>
    <http://link.geovariances.com/eml-linkedin-gv>
<http://link.geovariances.com/eml-linkedin>
    <http://link.geovariances.com/eml-twitter>
<http://link.geovariances.com/eml-youtube>
    <http://link.geovariances.com/eml-slideshare>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140228/3958c7c0/attachment.html>

From even.rouault at mines-paris.org  Fri Feb 28 04:50:58 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 28 Feb 2014 13:50:58 +0100
Subject: [gdal-dev] cpppcheck warning in ogr_core.h
In-Reply-To: <CAK9jXVVDneAM4FmdcHaWH+WpcRfH1j7wBcV1WyVQorf6AyCDxg@mail.gmail.com>
References: <CAK9jXVVDneAM4FmdcHaWH+WpcRfH1j7wBcV1WyVQorf6AyCDxg@mail.gmail.com>
Message-ID: <1393591858.53108632854d3@imp.free.fr>

Selon Olivier BARTHELEMY <barthelemy at geovariances.com>:

> Hi,
> Cppcheck reports a redundant condition "MaxZ>=other.MaxZ in
> OGREnvelope3D::contains()
> Isn't it a copy paste error, and isn't the condition MinZ<=other.MinZ
> missing?

Indeed !, thanks. I've just committed the fix.

>
> --
> [image: Geovariances]
>
> Olivier BARTHELEMY *Software development engineer*
> Geovariances, 49bis avenue Franklin Roosevelt - 77215 AVON CEDEX - FRANCE
> | www.geovariances.com <http://link.geovariances.com/eml-home>
> Keep posted about Geovariances   <http://link.geovariances.com/eml-geowidget>
>     <http://link.geovariances.com/eml-linkedin-gv>
> <http://link.geovariances.com/eml-linkedin>
>     <http://link.geovariances.com/eml-twitter>
> <http://link.geovariances.com/eml-youtube>
>     <http://link.geovariances.com/eml-slideshare>
>



From jukka.rahkonen at mmmtike.fi  Fri Feb 28 05:04:02 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 28 Feb 2014 13:04:02 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Can_not_open_bigtiff_file_using_gdal1=2E10_A?=
	=?utf-8?q?PI_saved=09by_photoshop_cs6?=
References: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
	<CAK4ZbRaZE65ymjTS-LmYG28eQ70_VRMFeC5zgt-DdE8o-zoLbQ@mail.gmail.com>
Message-ID: <loom.20140228T140146-107@post.gmane.org>

ridge wang <ridgewang <at> gmail.com> writes:

> 
> 
> 
> Even,
> ???? Sorry for reply so late. I create a tickets as
http://trac.osgeo.org/gdal/ticket/5403. I attached 2 tiff files, one can
opend by gdal and the other cannot. But they all can opend by photoshop
correctly. Both of?these two original tiff file are created by gdal 1.10 and
can reopen ok. The attached files are just filled all pixels to black and
saved by photoshop cs6. Can you give me some suggestions and is there some
utilities to repair these tiff files? thanks.

I downloaded the failing tiff 
http://trac.osgeo.org/gdal/raw-attachment/ticket/5403/1041up_1075down-938-960_spts-740-769-820-922_0.5-782-794_0.5_spts-935-1020_0.5_spts-cut2_spts.zip

Gdalinfo and gdal_translate had no troubles at all (Windows 7 64-bit,
GDAL-dev from gisinternals.com (January 29, 2014).

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Fri Feb 28 05:26:44 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 28 Feb 2014 14:26:44 +0100
Subject: [gdal-dev] Can not open bigtiff file using gdal1.10 API saved
	by photoshop cs6
In-Reply-To: <1393561019253-5106514.post@n6.nabble.com>
References: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
	<1393561019253-5106514.post@n6.nabble.com>
Message-ID: <1393594004.53108e94c0764@imp.free.fr>

Selon ridgewang <ridgewang at gmail.com>:

> Ps, sometimes it creates bigtiff file without any error reports by gdal 1.10
> api, but can not open the tiff file by gdal api and reports zero stripsize.
> anyway, the photoshop cs6 can open the tiff file correctly. for tips that
> the file is created and save in a usb mobile harddisk. I wonder why the
> photoshop so robust can open the tifffile with a zero stripsize?l

Could you add in the ticket details about your GDAL build : OS, 32/64 bit build,
use of internal libtiff or external libtiff (in the later case, which version).

>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.x6.nabble.com/gdal-dev-Can-not-open-bigtiff-file-using-gdal1-10-API-saved-by-photoshop-cs6-tp5105979p5106514.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From jrepetto at free.fr  Fri Feb 28 05:28:23 2014
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Fri, 28 Feb 2014 14:28:23 +0100
Subject: [gdal-dev] Can not open bigtiff file using gdal1.10 API saved
 by photoshop cs6
In-Reply-To: <loom.20140228T140146-107@post.gmane.org>
References: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>	<CAK4ZbRaZE65ymjTS-LmYG28eQ70_VRMFeC5zgt-DdE8o-zoLbQ@mail.gmail.com>
	<loom.20140228T140146-107@post.gmane.org>
Message-ID: <53108EF7.4090100@free.fr>

On 28/02/2014 14:04, Jukka Rahkonen wrote:
>
> I downloaded the failing tiff
> http://trac.osgeo.org/gdal/raw-attachment/ticket/5403/1041up_1075down-938-960_spts-740-769-820-922_0.5-782-794_0.5_spts-935-1020_0.5_spts-cut2_spts.zip
>
> Gdalinfo and gdal_translate had no troubles at all (Windows 7 64-bit,
> GDAL-dev from gisinternals.com (January 29, 2014).
>
> -Jukka Rahkonen-
>

Hi,
No problem to display it with QGIS 2.2 and GDAL 1.10.1 either.

Jean-Claude



From heather.cronk at colostate.edu  Fri Feb 28 09:01:41 2014
From: heather.cronk at colostate.edu (Heather QC)
Date: Fri, 28 Feb 2014 09:01:41 -0800 (PST)
Subject: [gdal-dev] gdal get geolocation array in HDF5 dataset
In-Reply-To: <1383209725624-5086790.post@n6.nabble.com>
References: <1383122330151-5086505.post@n6.nabble.com>
	<BLU173-W2137ACA8CA55A1EC2F42C1900A0@phx.gbl>
	<1383209725624-5086790.post@n6.nabble.com>
Message-ID: <1393606901000-5106680.post@n6.nabble.com>

Laura, 

Did you ever sort this out? I am having the same problem with both HDF4 and
HDF5. I can open the geolocation datasets if I know the name, but I would
like to be able to list them to extract the name and automate. 

Thanks! 
Heather



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-get-geolocation-array-in-HDF5-dataset-tp5086505p5106680.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ridgewang at gmail.com  Fri Feb 28 09:07:53 2014
From: ridgewang at gmail.com (ridge wang)
Date: Sat, 1 Mar 2014 01:07:53 +0800
Subject: [gdal-dev] Fwd: Can not open bigtiff file using gdal1.10 API saved
 by photoshop cs6
In-Reply-To: <CAK4ZbRYXPuzu_crhNbZsot=23ogcgVbnxe-+s_6eeRHqJab1gQ@mail.gmail.com>
References: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
	<1393561019253-5106514.post@n6.nabble.com>
	<1393594004.53108e94c0764@imp.free.fr>
	<CAK4ZbRYXPuzu_crhNbZsot=23ogcgVbnxe-+s_6eeRHqJab1gQ@mail.gmail.com>
Message-ID: <CAK4ZbRZGieraNBMCMPw79EpRPVs5gGSp0fo9BSGThg64hcaNOA@mail.gmail.com>

---------- Forwarded message ----------
From: ridge wang <ridgewang at gmail.com>
Date: Sat, Mar 1, 2014 at 1:06 AM
Subject: Re: [gdal-dev] Can not open bigtiff file using gdal1.10 API saved
by photoshop cs6
To: Even Rouault <even.rouault at mines-paris.org>


I working on Windows 7 64bit OS, Build the gdal 1.10 32bit version with
microsoft visual studio 2005 32bit. and using the internal libtiff version
of gdal.


On Fri, Feb 28, 2014 at 9:26 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Selon ridgewang <ridgewang at gmail.com>:
>
> > Ps, sometimes it creates bigtiff file without any error reports by gdal
> 1.10
> > api, but can not open the tiff file by gdal api and reports zero
> stripsize.
> > anyway, the photoshop cs6 can open the tiff file correctly. for tips that
> > the file is created and save in a usb mobile harddisk. I wonder why the
> > photoshop so robust can open the tifffile with a zero stripsize?l
>
> Could you add in the ticket details about your GDAL build : OS, 32/64 bit
> build,
> use of internal libtiff or external libtiff (in the later case, which
> version).
>
> >
> >
> >
> > --
> > View this message in context:
> >
>
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-Can-not-open-bigtiff-file-using-gdal1-10-API-saved-by-photoshop-cs6-tp5105979p5106514.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140301/b4cb4d33/attachment.html>

From even.rouault at mines-paris.org  Fri Feb 28 14:32:02 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 28 Feb 2014 23:32:02 +0100
Subject: [gdal-dev] Fwd: Can not open bigtiff file using gdal1.10 API
	saved by photoshop cs6
In-Reply-To: <CAK4ZbRZGieraNBMCMPw79EpRPVs5gGSp0fo9BSGThg64hcaNOA@mail.gmail.com>
References: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
	<CAK4ZbRYXPuzu_crhNbZsot=23ogcgVbnxe-+s_6eeRHqJab1gQ@mail.gmail.com>
	<CAK4ZbRZGieraNBMCMPw79EpRPVs5gGSp0fo9BSGThg64hcaNOA@mail.gmail.com>
Message-ID: <201402282332.02184.even.rouault@mines-paris.org>

OK, problem reproduced and fixed. It was specific to 32 bit builds, and with 
TIFF files made of a single strip of more than 2 GB. (note that your file is a 
classical "big" TIFF, but not a "BigTIFF")

Le vendredi 28 f?vrier 2014 18:07:53, ridge wang a ?crit :
> ---------- Forwarded message ----------
> From: ridge wang <ridgewang at gmail.com>
> Date: Sat, Mar 1, 2014 at 1:06 AM
> Subject: Re: [gdal-dev] Can not open bigtiff file using gdal1.10 API saved
> by photoshop cs6
> To: Even Rouault <even.rouault at mines-paris.org>
> 
> 
> I working on Windows 7 64bit OS, Build the gdal 1.10 32bit version with
> microsoft visual studio 2005 32bit. and using the internal libtiff version
> of gdal.
> 
> 
> On Fri, Feb 28, 2014 at 9:26 PM, Even Rouault
> 
> <even.rouault at mines-paris.org>wrote:
> > Selon ridgewang <ridgewang at gmail.com>:
> > > Ps, sometimes it creates bigtiff file without any error reports by gdal
> > 
> > 1.10
> > 
> > > api, but can not open the tiff file by gdal api and reports zero
> > 
> > stripsize.
> > 
> > > anyway, the photoshop cs6 can open the tiff file correctly. for tips
> > > that the file is created and save in a usb mobile harddisk. I wonder
> > > why the photoshop so robust can open the tifffile with a zero
> > > stripsize?l
> > 
> > Could you add in the ticket details about your GDAL build : OS, 32/64 bit
> > build,
> > use of internal libtiff or external libtiff (in the later case, which
> > version).
> > 
> > > --
> > 
> > > View this message in context:
> > http://osgeo-org.1560.x6.nabble.com/gdal-dev-Can-not-open-bigtiff-file-us
> > ing-gdal1-10-API-saved-by-photoshop-cs6-tp5105979p5106514.html
> > 
> > > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From gkpetrak at gmail.com  Fri Feb 28 17:08:09 2014
From: gkpetrak at gmail.com (Gpetr)
Date: Fri, 28 Feb 2014 17:08:09 -0800 (PST)
Subject: [gdal-dev] Bus Error (memory error)
Message-ID: <1393636089994-5106728.post@n6.nabble.com>

Hello,

I was trying to process a raster image via Gdal when it's happened an
unexpected error. A Bus Error. After that, QGIS can not start. Also I
recieve the same error when I'm trying to execute any of the GDAL commands
via terminal.
I know that this error happens when a process is trying to access memory
that the CPU cannot physically address.

I checked my log files and the output of the error is the following:

T02:13:26.879355+02:00 suse-pc kernel: [ 9976.488797] ata1.00: exception
Emask 0x0 SAct 0x1 SErr 0x0 action 0x0
2014-03-01T02:13:26.879402+02:00 suse-pc kernel: [ 9976.488806] ata1.00:
irq_stat 0x40000008
2014-03-01T02:13:26.879413+02:00 suse-pc kernel: [ 9976.488813] ata1.00:
failed command: READ FPDMA QUEUED
2014-03-01T02:13:26.879419+02:00 suse-pc kernel: [ 9976.488826] ata1.00: cmd
60/08:00:50:8d:75/00:00:39:00:00/40 tag 0 ncq 4096 in
2014-03-01T02:13:26.879428+02:00 suse-pc kernel: [ 9976.488826]          res
41/40:08:51:8d:75/00:00:39:00:00/00 Emask 0x409 (media error) <F>
2014-03-01T02:13:26.879434+02:00 suse-pc kernel: [ 9976.488832] ata1.00:
status: { DRDY ERR }
2014-03-01T02:13:26.879437+02:00 suse-pc kernel: [ 9976.488836] ata1.00:
error: { UNC }
2014-03-01T02:13:26.948294+02:00 suse-pc kernel: [ 9976.557999] ata1.00:
configured for UDMA/133
2014-03-01T02:13:26.948313+02:00 suse-pc kernel: [ 9976.558034] sd 0:0:0:0:
[sda] Unhandled sense code
2014-03-01T02:13:26.948315+02:00 suse-pc kernel: [ 9976.558040] sd 0:0:0:0:
[sda]  
2014-03-01T02:13:26.948316+02:00 suse-pc kernel: [ 9976.558044] Result:
hostbyte=DID_OK driverbyte=DRIVER_SENSE
2014-03-01T02:13:26.948317+02:00 suse-pc kernel: [ 9976.558048] sd 0:0:0:0:
[sda]  
2014-03-01T02:13:26.948318+02:00 suse-pc kernel: [ 9976.558052] Sense Key :
Medium Error [current] [descriptor]
2014-03-01T02:13:26.948320+02:00 suse-pc kernel: [ 9976.558059] Descriptor
sense data with sense descriptors (in hex):
2014-03-01T02:13:26.948321+02:00 suse-pc kernel: [ 9976.558062]         72
03 11 04 00 00 00 0c 00 0a 80 00 00 00 00 00
2014-03-01T02:13:26.948321+02:00 suse-pc kernel: [ 9976.558081]         39
75 8d 51
2014-03-01T02:13:26.948335+02:00 suse-pc kernel: [ 9976.558090] sd 0:0:0:0:
[sda]  
2014-03-01T02:13:26.948338+02:00 suse-pc kernel: [ 9976.558095] Add. Sense:
Unrecovered read error - auto reallocate failed
2014-03-01T02:13:26.948339+02:00 suse-pc kernel: [ 9976.558099] sd 0:0:0:0:
[sda] CDB:
2014-03-01T02:13:26.948340+02:00 suse-pc kernel: [ 9976.558102] Read(10): 28
00 39 75 8d 50 00 00 08 00
2014-03-01T02:13:26.948341+02:00 suse-pc kernel: [ 9976.558119] end_request:
I/O error, dev sda, sector 964005201
2014-03-01T02:13:26.948342+02:00 suse-pc kernel: [ 9976.558207] ata1: EH
complete

Any ideas ? 

How can I fix it ?

Regards,
George 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Bus-Error-memory-error-tp5106728.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ridgewang at gmail.com  Fri Feb 28 20:36:41 2014
From: ridgewang at gmail.com (ridgewang)
Date: Sat, 1 Mar 2014 12:36:41 +0800
Subject: [gdal-dev] Fwd: Can not open bigtiff file using gdal1.10 API
	saved by photoshop cs6
In-Reply-To: <201402282332.02184.even.rouault@mines-paris.org>
References: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
	<CAK4ZbRYXPuzu_crhNbZsot=23ogcgVbnxe-+s_6eeRHqJab1gQ@mail.gmail.com>
	<CAK4ZbRZGieraNBMCMPw79EpRPVs5gGSp0fo9BSGThg64hcaNOA@mail.gmail.com>
	<201402282332.02184.even.rouault@mines-paris.org>
Message-ID: <622B3499-6EEC-4B6D-9296-608E4DD67C9E@gmail.com>

ok. There are also some questions I want to clarified:
1. The app I developed is an 32bit app, and it is complex to convert it to 64bit. So I cannot link to the 64bit gdal dll.
2. Can I download the 32bit gdal dll from gdal website instead of the 32bit version build myself to solve this question?
3. The tiff file I created is in tiled formation with block size 256x256. So what does the single stripsize means?
4. What can I do to solvle this?

Thanks!

???? iPhone

? 2014-3-1?6:32?Even Rouault <even.rouault at mines-paris.org> ???

> OK, problem reproduced and fixed. It was specific to 32 bit builds, and with 
> TIFF files made of a single strip of more than 2 GB. (note that your file is a 
> classical "big" TIFF, but not a "BigTIFF")
> 
> Le vendredi 28 f?vrier 2014 18:07:53, ridge wang a ?crit :
>> ---------- Forwarded message ----------
>> From: ridge wang <ridgewang at gmail.com>
>> Date: Sat, Mar 1, 2014 at 1:06 AM
>> Subject: Re: [gdal-dev] Can not open bigtiff file using gdal1.10 API saved
>> by photoshop cs6
>> To: Even Rouault <even.rouault at mines-paris.org>
>> 
>> 
>> I working on Windows 7 64bit OS, Build the gdal 1.10 32bit version with
>> microsoft visual studio 2005 32bit. and using the internal libtiff version
>> of gdal.
>> 
>> 
>> On Fri, Feb 28, 2014 at 9:26 PM, Even Rouault
>> 
>> <even.rouault at mines-paris.org>wrote:
>>> Selon ridgewang <ridgewang at gmail.com>:
>>>> Ps, sometimes it creates bigtiff file without any error reports by gdal
>>> 
>>> 1.10
>>> 
>>>> api, but can not open the tiff file by gdal api and reports zero
>>> 
>>> stripsize.
>>> 
>>>> anyway, the photoshop cs6 can open the tiff file correctly. for tips
>>>> that the file is created and save in a usb mobile harddisk. I wonder
>>>> why the photoshop so robust can open the tifffile with a zero
>>>> stripsize?l
>>> 
>>> Could you add in the ticket details about your GDAL build : OS, 32/64 bit
>>> build,
>>> use of internal libtiff or external libtiff (in the later case, which
>>> version).
>>> 
>>>> --
>>> 
>>>> View this message in context:
>>> http://osgeo-org.1560.x6.nabble.com/gdal-dev-Can-not-open-bigtiff-file-us
>>> ing-gdal1-10-API-saved-by-photoshop-cs6-tp5105979p5106514.html
>>> 
>>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Fri Feb 28 23:24:43 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat, 1 Mar 2014 07:24:43 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Fwd=3A_Can_not_open_bigtiff_file_using_gdal1?=
	=?utf-8?q?=2E10_API=09saved_by_photoshop_cs6?=
References: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
	<CAK4ZbRYXPuzu_crhNbZsot=23ogcgVbnxe-+s_6eeRHqJab1gQ@mail.gmail.com>
	<CAK4ZbRZGieraNBMCMPw79EpRPVs5gGSp0fo9BSGThg64hcaNOA@mail.gmail.com>
	<201402282332.02184.even.rouault@mines-paris.org>
	<622B3499-6EEC-4B6D-9296-608E4DD67C9E@gmail.com>
Message-ID: <loom.20140301T081822-357@post.gmane.org>

ridgewang <ridgewang <at> gmail.com> writes:

> 
> ok. There are also some questions I want to clarified:
> 1. The app I developed is an 32bit app, and it is complex to convert it to
64bit. So I cannot link to the 64bit
> gdal dll.
> 2. Can I download the 32bit gdal dll from gdal website instead of the
32bit version build myself to solve this question?
> 3. The tiff file I created is in tiled formation with block size 256x256.
So what does the single stripsize means?
> 4. What can I do to solvle this?

Even wrote: "OK, problem reproduced and fixed". The gdal-dev binaries in
gisinternals.com/sdk are OK if the Latest revision is r26999 or higher and
this morning it seems to be just r26999. But because it is fixed you can
take new sources and build yourself as well.

-Jukka Rahkonen-



From jukka.rahkonen at mmmtike.fi  Fri Feb 28 23:57:59 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat, 1 Mar 2014 07:57:59 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Fwd=3A_Can_not_open_bigtiff_file_using_gdal1?=
	=?utf-8?q?=2E10_API=09saved_by_photoshop_cs6?=
References: <D0F81DEA-7D5C-4A5A-839E-1A82F96BB4EC@gmail.com>
	<CAK4ZbRYXPuzu_crhNbZsot=23ogcgVbnxe-+s_6eeRHqJab1gQ@mail.gmail.com>
	<CAK4ZbRZGieraNBMCMPw79EpRPVs5gGSp0fo9BSGThg64hcaNOA@mail.gmail.com>
	<201402282332.02184.even.rouault@mines-paris.org>
	<622B3499-6EEC-4B6D-9296-608E4DD67C9E@gmail.com>
Message-ID: <loom.20140301T085516-786@post.gmane.org>

ridgewang <ridgewang <at> gmail.com> writes:

> 3. The tiff file I created is in tiled formation with block size 256x256.
So what does the single stripsize means?

This means that something has gone wrong. Your sample was not tiled but the
blocks were made of single scanlines from left to right. Check with gdalinfo
Band 1 Block=37531x1 Type=Byte, ColorInterp=Red
Band 2 Block=37531x1 Type=Byte, ColorInterp=Green
Band 3 Block=37531x1 Type=Byte, ColorInterp=Blue

-Jukka Rahkonen-


