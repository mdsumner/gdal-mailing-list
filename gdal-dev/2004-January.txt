From dron at ak4719.spb.edu  Thu Jan  1 15:06:18 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] number of GCPs
In-Reply-To: <488A187B.1DF65849.00066B75@netscape.net>
References: <488A187B.1DF65849.00066B75@netscape.net>
Message-ID: <20040101200617.GA11566@ak4719.spb.edu>

On Wed, Dec 31, 2003 at 04:23:14PM -0500, list67@netscape.net wrote:
> Hello.  I was wondering if there is a limit to the number of GCPs that
> can be added to a TIFF file.

Yes, such limit exists. We can store 65535 numerical values in the tag,
every point uses 6 values, so we have 65535/6 = 10922 points.

> So, when I run the program with a 10x10 tiff file, gdalinfo outputs
> all the GCPs.  None of the other files seem to work (78x78, 256x256,
> 1200x1200).  I looked into the code and changed int16 to int (in
> frmts/gtiff/geotiff.cpp Line 2291) and u_short to int on Line 989 of
> frmts/gtiff/libtiff/tif_dir.c.  This did not seem to fix anything
> though.

There was a small problem in the GTiff driver: type of the count
variable was signed instead of unsigned. That limits us with the 5461
points. I have fixed the problem.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From packalen at cs.joensuu.fi  Fri Jan  2 12:59:04 2004
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] The whole dataset in memory?
Message-ID: <Pine.GSO.4.58.0401021938190.3320@cs>

Hi,

Is there any way in GDAL to load the whole dataset in memory? VRT
Dataset can be created "in memory", but is it possible to load actual
pixel data to memory as well. I would need as fast access to band data as
possible (memory consumption is not a problem).

Petteri


From bam at keyhole.com  Fri Jan  2 19:33:05 2004
From: bam at keyhole.com (Brian McClendon)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Building Earth - Keyhole seeks experienced Win32/QT programmer
Message-ID: <20040103003305.GA1096@keyhole.com>

Apologies if this isn't appropriate, but I think this 
is relevant to most of the people who read this list:

--

Building Earth - Keyhole seeks experienced Win32/QT programmer

Keyhole is currently shipped v1.7 of our high-performance 3D
earth-viewing software.  It brings a multi-terabyte database to the
desktop of students, real-estate agents, government agencies, and 
many others.

We are looking for an excellent Win32 software engineer with
significant experience in at least two of the following areas:

    *  QT user interface programming
    *  Windows application development/testing/delivery
    *  GIS data experience, both vector and imagery
    
The candidate should have 5+ years of industry experience and have
delivered well-received software to the end-customer.  Strong design
skills, experience with object-oriented C++ programming, and the
ability to deliver quality code quickly are also important.

You will have the opportunity to make a significant contribution to our
2.x software.

This is a FT position in Mountain View, CA.

Please forward this to anyone you think would be qualified
who might be interested.  If interested, please send your
resume to me at jobs_gd@keyhole.com.

-- 
---------------
Brian McClendon
---------------

From warmerdam at pobox.com  Mon Jan  5 12:18:50 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] The whole dataset in memory?
In-Reply-To: <Pine.GSO.4.58.0401021938190.3320@cs>
References: <Pine.GSO.4.58.0401021938190.3320@cs>
Message-ID: <3FF99C7A.8010005@pobox.com>

Petteri Packalen wrote:
> Hi,
> 
> Is there any way in GDAL to load the whole dataset in memory? VRT
> Dataset can be created "in memory", but is it possible to load actual
> pixel data to memory as well. I would need as fast access to band data as
> possible (memory consumption is not a problem).

Petteri,

There is an all-in-memory driver (the MEM driver).  If you were to do a
CreateCopy() to that format you would have the data all-in-memory for sure.
However, normally it is sufficient to set the cache size up to be large enough
to hold the entire dataset and then do a pre-read pass to pull the data into
the cache.   The cache size can be set with GDALSetCacheMax(), the argument
being an integer cache size in bytes.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From bclay at ball.com  Mon Jan  5 13:32:49 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] ArcView Export Format (E00)
Message-ID: <E4394C8445EFCC4AA136A1C305E4C92851C87D@APPMSG2.AERO.BALL.COM>

Does GDAL support the ArcView Export format (E00 file extension) format?
I see Shapelib on the OGR supported list but not the Export format.

Are there any really SIMPLE examples of loading a vector file (DTED,
DEM, ShapeLib, or E00) files and walking the data tree either drawing
the vectors (i.e creating terrain grids) or in my current case, drawing
geopolitical boundary overlays?

I am using Demeter in one of my projects but it hides the GDAL usage too
well to see how to add an overlay.

Bruce Clay
bclay@ball.com 

From EloisaNerea at ono.com  Mon Jan  5 14:03:59 2004
From: EloisaNerea at ono.com (EloisaNerea@ono.com)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] a question about reading a .bmp image
Message-ID: <34dd031deb.31deb34dd0@ono.com>

Hi ?Could you explain me how I can read the information bit by bit of 
a .bmp image ? 
Thanks


From TMitchell at lignum.com  Mon Jan  5 14:19:26 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] ArcView Export Format (E00)
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C92851C87D@APPMSG2.AERO.BALL.COM>
Message-ID: <OFEFE9F630.959C8F2B-ON88256E12.00699583-88256E12.006A2653@lignum.com>





> Does GDAL support the ArcView Export format (E00 file extension) format?
> I see Shapelib on the OGR supported list but not the Export format.

No it doesn't.  You'll want the AVECE00 libraries and utilities:
http://freegis.org/details.en.html?name=AVECE00

It looks like the homepage listed on the page is unavailable at the moment
though.

AVECE00 includes command line programs for importing and exporting E00
files, as well as using its libraries to masquerade coverages as e00.

Tyler


From warmerdam at pobox.com  Mon Jan  5 14:36:51 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] ArcView Export Format (E00)
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C92851C87D@APPMSG2.AERO.BALL.COM>
References: <E4394C8445EFCC4AA136A1C305E4C92851C87D@APPMSG2.AERO.BALL.COM>
Message-ID: <3FF9BCD3.6080307@pobox.com>

Clay, Bruce wrote:
> Does GDAL support the ArcView Export format (E00 file extension) format?
> I see Shapelib on the OGR supported list but not the Export format.

Bruce,

As noted by others, E00 is not supported in GDAL/OGR at this time.  The
avce00 library at http://avce00.maptools.org/ can be used to convert
e00 files into arc/info binary coverages which are supported.  I would like
to support e00 directly some day, but it is a non-trivial effort, and not
funded by any clients at this time.

> Are there any really SIMPLE examples of loading a vector file (DTED,
> DEM, ShapeLib, or E00) files and walking the data tree either drawing
> the vectors (i.e creating terrain grids) or in my current case, drawing
> geopolitical boundary overlays?

Note that DEM and DTED files are accessed via GDAL while shapefiles and other
vector formats are accessed with OGR.  There is an API tutorial for both
subsystems online, but nothing addresses drawing objects as that is considered
to be outside the purvue of GDAL/OGR.

Good luck,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From morissette at dmsolutions.ca  Mon Jan  5 15:40:39 2004
From: morissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] ArcView Export Format (E00)
In-Reply-To: <OF0374908D.4D4AAAD4-ON88256E12.006C6156-88256E12.006CAF24@lignum.com>
References: <OF0374908D.4D4AAAD4-ON88256E12.006C6156-88256E12.006CAF24@lignum.com>
Message-ID: <3FF9CBC7.8070600@dmsolutions.ca>

Tyler Mitchell wrote:
> 
> Hi Daniel,
> I'm getting a "host not found" error.  I can get to http://www.maptools.org
> and http://dgnlib.maptools.org fine though.  Looks to me like the virtual
> domain isn't mapping out right on the web server for avce00.
> 

Duh! It seems that I made a small mistake when I added the 
avce00.maptools.org DNS entry and it didn't replicate to our secondary 
DNS server.

This is fixed now, and may take a couple of hours to replicate to your 
ISP's DNS.

Daniel
-- 
------------------------------------------------------------
  Daniel Morissette               morissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------


From dron at ak4719.spb.edu  Tue Jan  6 05:50:08 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] a question about reading a .bmp image
In-Reply-To: <34dd031deb.31deb34dd0@ono.com>
References: <34dd031deb.31deb34dd0@ono.com>
Message-ID: <20040106105007.GA12164@ak4719.spb.edu>

On Mon, Jan 05, 2004 at 08:03:59PM +0100, EloisaNerea@ono.com wrote:
> Hi ?Could you explain me how I can read the information bit by bit of 
> a .bmp image ? 

GDAL data model doesn't support packed bytes. Bilevel BMP files will be
internally converted to the 8 bit representation and two colors will be
coded with 0 and 1 values (or values from the color palette, if file
contains the one). So you can read bilevel BMP file in the same way as
8bit one.

					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From support at fluidyn.com  Tue Jan  6 04:11:50 2004
From: support at fluidyn.com (Support_Fluidyn)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Conversion formula
Message-ID: <01a201c3d435$25198310$5a000059@pacfic.net.in>

Dear Sir, 
I  would like to know the formula required to convert UTM coordinates into standard lat/long coordinates and vice versa.
I am looking forward for your reply and  would be thankful for the same.
 Thanking you,
Nisha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040106/b979e8fc/attachment.html
From warmerdam at pobox.com  Tue Jan  6 17:43:22 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Conversion formula
In-Reply-To: <01a201c3d435$25198310$5a000059@pacfic.net.in>
References: <01a201c3d435$25198310$5a000059@pacfic.net.in>
Message-ID: <3FFB3A0A.9000303@pobox.com>

Support_Fluidyn wrote:
> Dear Sir,
> I  would like to know the formula required to convert UTM coordinates 
> into standard lat/long coordinates and vice versa.
> I am looking forward for your reply and  would be thankful for the same.
>  Thanking you,
> Nisha

Nisha,

I haven't checked it myself, but I think the following NIMA document on
UTM will contain the formulas:

   ftp://164.214.2.65/pub/gig/tm8358.2/TM8358_2.pdf

However, writing your own projections code is a non-trivial job.  Perhaps
you should use an existing library?  The OGRSpatialReference, and
OGRCoordinateTransformation classes can be used to convert between UTM and
lat/long in the GDAL library (if you also have PROJ.4 installed).

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dmcaferty at seeop.net  Wed Jan  7 09:42:03 2004
From: dmcaferty at seeop.net (Daniel McAferty)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Conversion formula
In-Reply-To: <01a201c3d435$25198310$5a000059@pacfic.net.in>
Message-ID: <PBEPKNAFMBCIOBJCNAJCGELKCBAA.dmcaferty@seeop.net>

I had the same question a few weeks ago. It is a lot tougher than I thought
but I got things to work.
Here are some web sites that helped me get the info I was looking for.
http://www.gpsy.com/gpsinfo/geotoutm/
    This is good starting place as it has many links to places that has info

http://www.posc.org/Epicentre.2_2/DataModel/ExamplesofUsage/eu_cs34.html
    This is a paper that explains some of the different datums and the math
formulas
    to convert from Lat/long to UTM and back. It also has a link to an
example to convert from
    lat/long to UTM. It only goes the one direction. But I found the souce
code of that html example
    helpful in my own programs.

I also found some helpful code examples on
http://www2.ifjf.uib.no/latlong2UTM/

good luck,
Dan

  -----Original Message-----
  From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Support_Fluidyn
  Sent: Tuesday, January 06, 2004 2:12 AM
  To: gdal-dev@remotesensing.org
  Subject: [Gdal-dev] Conversion formula


  Dear Sir,
  I  would like to know the formula required to convert UTM coordinates into
standard lat/long coordinates and vice versa.
  I am looking forward for your reply and  would be thankful for the same.
   Thanking you,
  Nisha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040107/bda0536f/attachment.html
From tim at linfiniti.com  Wed Jan  7 09:58:20 2004
From: tim at linfiniti.com (Tim Sutton)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Problems reading grass raster color entry
Message-ID: <200401071458.21000.tim@linfiniti.com>

Hi 

I am having problems reading a grass raster layer using gdal. The same routine 
I am having problems with (see snippet below) works fine on a geotiff image. 
I have tested the same file with gdalinfo and it seems to read the palette 
fine. Can anyone see an obvious reason why my code is not working?

Many thanks

Tim



    QString colorInterp = 
GDALGetColorInterpretationName(gdalBand->GetColorInterpretation());
    //std::cout << "Colour Interpretation for this band is : " << colorInterp 
<< std::endl;
    if ( colorInterp == "Palette") 
    {
      // print each point in scandata using color looked up in color table
      GDALColorTable *colorTable = gdalBand->GetColorTable();
      QImage myQImage=QImage(myLayerXDimInt,myLayerYDimInt,32);
      myQImage.setAlphaBuffer(true);
      for (int y = 0; y < myLayerYDimInt; y++) 
      {
        for (int x =0; x < myLayerXDimInt; x++) 
        {
          const GDALColorEntry *colorEntry = GDALGetColorEntry(colorTable, 
scandata[y*myLayerXDimInt + x]);
          //dont draw this point if it is no data !
          if (myNoDataDouble != scandata[y*myLayerXDimInt + x])
          {
            int myRedValueInt=0; //color 1 int
            int myGreenValueInt=0; //color 2 int
            int myBlueValueInt=0; //color 3 int
            //check for alternate color mappings
            if (redBandNameQString=="Red") myRedValueInt=colorEntry->c1;

Last line fails on this : myRedValueInt=colorEntry->c1;
-- 
Get my public keys from:

http://tim.suttonfamily.co.uk/modules.php?name=Content&pa=showpage&pid=2

From warmerdam at pobox.com  Wed Jan  7 11:09:48 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Problems reading grass raster color entry
In-Reply-To: <200401071458.21000.tim@linfiniti.com>
References: <200401071458.21000.tim@linfiniti.com>
Message-ID: <3FFC2F4C.8050003@pobox.com>

Tim Sutton wrote:
> Hi 
> >
> I am having problems reading a grass raster layer using gdal. The same routine 
> I am having problems with (see snippet below) works fine on a geotiff image. 
> I have tested the same file with gdalinfo and it seems to read the palette 
> fine. Can anyone see an obvious reason why my code is not working?
> 
> Many thanks
> 
> Tim
> 
> 
> 
>     QString colorInterp = 
> GDALGetColorInterpretationName(gdalBand->GetColorInterpretation());
>     //std::cout << "Colour Interpretation for this band is : " << colorInterp 
> << std::endl;
>     if ( colorInterp == "Palette") 
>     {
>       // print each point in scandata using color looked up in color table
>       GDALColorTable *colorTable = gdalBand->GetColorTable();
>       QImage myQImage=QImage(myLayerXDimInt,myLayerYDimInt,32);
>       myQImage.setAlphaBuffer(true);
>       for (int y = 0; y < myLayerYDimInt; y++) 
>       {
>         for (int x =0; x < myLayerXDimInt; x++) 
>         {
>           const GDALColorEntry *colorEntry = GDALGetColorEntry(colorTable, 
> scandata[y*myLayerXDimInt + x]);
>           //dont draw this point if it is no data !
>           if (myNoDataDouble != scandata[y*myLayerXDimInt + x])
>           {
>             int myRedValueInt=0; //color 1 int
>             int myGreenValueInt=0; //color 2 int
>             int myBlueValueInt=0; //color 3 int
>             //check for alternate color mappings
>             if (redBandNameQString=="Red") myRedValueInt=colorEntry->c1;
> 
> Last line fails on this : myRedValueInt=colorEntry->c1;

Tim,

I gather you are getting a crash with colorEntry being NULL? There is
no guarantee to be a color entry for every pixel value in a raster.
You need to check if GDALGetColorEntry() returns NULL.

However, I don't see any particular reason your approach shouldn't work
if all the required palette entries are available.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From archer at eskimo.com  Wed Jan  7 13:01:21 2004
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Conversion formula
In-Reply-To: <PBEPKNAFMBCIOBJCNAJCGELKCBAA.dmcaferty@seeop.net>
Message-ID: <Pine.GSU.4.44.0401070947380.29719-100000@eskimo.com>

On Wed, 7 Jan 2004, Daniel McAferty wrote:

> I had the same question a few weeks ago. It is a lot tougher than I thought
> but I got things to work.
> Here are some web sites that helped me get the info I was looking for.
> http://www.gpsy.com/gpsinfo/geotoutm/
>     This is good starting place as it has many links to places that has info
>
> http://www.posc.org/Epicentre.2_2/DataModel/ExamplesofUsage/eu_cs34.html
>     This is a paper that explains some of the different datums and the math
> formulas
>     to convert from Lat/long to UTM and back. It also has a link to an
> example to convert from
>     lat/long to UTM. It only goes the one direction. But I found the souce
> code of that html example
>     helpful in my own programs.
>
> I also found some helpful code examples on
> http://www2.ifjf.uib.no/latlong2UTM/

I just went through this exercise a couple of months ago, and found
out about some things that are often implemented incorrectly.  The
final solution I came up with is not what I would call optimal, but
it'll work for us:

The problems in the UTM grid come about in the Southern Norway area
and north of there in the top band.  There are irregular grids there
(not 6-degree spacing) used by some forms of UTM.  There's very
little mention of these irregular grids when prowling around web
sites looking for info.

Various sources told me that these irregular grids are used only
when computing MGRS coordinates.  I first implemented it that way,
using the irregular zones only for MGRS and regular six-degree zones
for UTM.

Later, one of my users in the affected area complained about it, as
their civilian UTM maps use the irregular grids.  I added another
option, so we now have these choices for displaying coordinates:

    dd.ddddd
    dd mm.mmm
    dd mm ss.s
    UTM
    UTM w/special zones
    MGRS

What was interesting about using the special zones:  The
Eastings/Northings don't change, only the grid number itself.

Another interesting thing is the NATO letter after the zone number
that some people use.  Others drop it entirely.  Some use a N/S or a
+/- to designate the northern/southern hemisphere.  Without _some_
indication of which hemisphere you're in, UTM coordinates are not
sufficient to tell you where on the earth you are.  Zone and
Easting/Northing aren't sufficient to describe an unambiguous
position.  We chose to use the NATO letters after the zone number.
It matches what a lot of our GPS's display.

Our source code is freely available under the GPL license if anyone
is interested in looking at it.

-----------------------------------------------------------------
Curt, WE7U			    archer at eskimo dot com
Arlington, WA, USA		http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"


From warmerdam at pobox.com  Wed Jan  7 16:14:29 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] netCDF Support
Message-ID: <3FFC76B5.5020607@pobox.com>

Folks,

I have implemented limited netCDF read/write support in GDAL.  Anyone with
an interest is encourage to install libnetcdf and test out this new
capability.  Note that it is in CVS, but not in last nights snapshot, so you
would need to wait till tomorrows snapshot, or grab directly from CVS.

NetCDF is the primary grid format of the popular GMT package, as well as
being used by a variety of other scientific packages, especially in the
atmospheric and oceanographic community.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From tim at linfiniti.com  Wed Jan  7 17:53:16 2004
From: tim at linfiniti.com (Tim Sutton)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Gdal Build error
Message-ID: <200401072253.16885.tim@linfiniti.com>

Hi

When I built gdal with grass support earlier today, I got the following build 
error:

 g++ -Wall -O2 -I/usr/local/include -I/usr/local/include/include -I../../port 
-I../../gcore -I../../ogr -I../../port -c grassdataset.cpp  -fPIC -DPIC 
-o ../o/.libs/grassdataset.o
grassdataset.cpp: In static member function `static GDALDataset*
   GRASSDataset::Open(GDALOpenInfo*)':
grassdataset.cpp:513: error: invalid conversion from `int (*)(...)' to `int
   (*)()'


I worked around this by commenting out the offending line (Ouch!).

The gdal version is:

GDAL 1.1.9.0, released 2003/06/27

Which admittedly quite old, so this message may no longer be relevant. The 
libgrass used was the one available on the gdal website - downloaded today.

Regards

Tim Sutton
-- 
Get my public keys from:

http://tim.suttonfamily.co.uk/modules.php?name=Content&pa=showpage&pid=2

From ben at vterrain.org  Wed Jan  7 22:53:31 2004
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] netCDF Support
In-Reply-To: <3FFC76B5.5020607@pobox.com>
Message-ID: <001401c3d59a$fbd0f080$f400fe0a@TOPP2>

Frank,

How will the dependencies work on Windows?  Currently vtdata calls the
NetCDF library to read netCDF, and calls GDAL for other formats.  I'm happy
to simplify by just calling GDAL.  You're using the netcdf DLL on Windows?
I presume there is a new option to build GDAL with or without NetCDF support
in order to toggle this dependency?

The big question is, will i (and other people building with vtdata/GDAL)
still need  to have netcdf.lib on their machine, or is this bundled up into
GDAL's library?  I.e. is the import library bundled or unbundled.  Bundling
would simplify things further for us, as that's one less .lib that needs to
be distributed.

Thanks,
Ben

> -----Original Message-----
> From: Frank Warmerdam
> Sent: Wednesday, January 07, 2004 4:14 PM
> 
> Folks,
> 
> I have implemented limited netCDF read/write support in GDAL. 
> Anyone with an interest is encourage to install libnetcdf and
> test out this new capability. 


From warmerdam at pobox.com  Wed Jan  7 23:49:39 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] netCDF Support
In-Reply-To: <001401c3d59a$fbd0f080$f400fe0a@TOPP2>
References: <001401c3d59a$fbd0f080$f400fe0a@TOPP2>
Message-ID: <3FFCE163.8020805@pobox.com>

Ben Discoe wrote:
> Frank,
> 
> How will the dependencies work on Windows?  Currently vtdata calls the
> NetCDF library to read netCDF, and calls GDAL for other formats.  I'm happy
> to simplify by just calling GDAL.  You're using the netcdf DLL on Windows?
> I presume there is a new option to build GDAL with or without NetCDF support
> in order to toggle this dependency?
> 
> The big question is, will i (and other people building with vtdata/GDAL)
> still need  to have netcdf.lib on their machine, or is this bundled up into
> GDAL's library?  I.e. is the import library bundled or unbundled.  Bundling
> would simplify things further for us, as that's one less .lib that needs to
> be distributed.

Ben,

I haven't actually built it yet on windows, but I would assume I would use
a netcdf.dll.  Presumely in the short term this could coexist with other
users of netcdf.dll and in the longer term you might migrate to using
GDAL's netcdf support.  However, it isn't too sophisticated yet, so be a bit
wary.  This was an unfunded development (read: quick hack).

I have no intention of including an internal copy of netcdf lib in the same
way that I did for libungif, libpng, and some of the other "in the source
tree" libraries.  I am sure it could be done that way, but I hate to drag
too much more into the GDAL DLL itself.

I hope that answers your questions.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From hgrabows at stk.com  Thu Jan  8 12:48:48 2004
From: hgrabows at stk.com (Grabowski, Hank)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Projection Parameters
Message-ID: <44AB336C889417448260E477E9D398100384F6@toledo.stk.com>

Hello again,
 
We are continuing to use, quite successfully, the OGR library for doing
automatic reprojections of data for our application.  However in
internal testing I found a weird issue with some of the Parameter
variables.  I noticed that there are certain keywords, like
Central_Meridian and Latitude_Of_Origin that vary between ESRI code and
the OGR code.  Looking at it in debug mode I discover that the
ValidateProjection method is aware of the discrepancy and is able to map
between the OGR values, Longitude_of_Center and Latitude_Of_Center in
this case, but instead throws an error and aborts the loading process.
Should the true behavior be for the code to remap the names to their
respective OGR values?  If the internal code is capable of parsing it,
thus removing the need for actually changing the label, shouldn't the
loop continue on and allow future variables to be read anyway?  
 
Hank Grabowski
hgrabowski@stk.com
1-610-578-1000
------------------------------------------------------------------------
----------
Get an opportunity to win an iQue PDA/GPS handheld system by inviting
your friends and colleagues to join the STK user community at
http://www.stk.com/referral. "Share The Knowledge!"
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040108/d4294794/attachment.html
From warmerdam at pobox.com  Thu Jan  8 13:26:56 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Projection Parameters
In-Reply-To: <44AB336C889417448260E477E9D398100384F6@toledo.stk.com>
References: <44AB336C889417448260E477E9D398100384F6@toledo.stk.com>
Message-ID: <3FFDA0F0.4060604@pobox.com>

Grabowski, Hank wrote:
> Hello again,
>  
> We are continuing to use, quite successfully, the OGR library for doing 
> automatic reprojections of data for our application.  However in 
> internal testing I found a weird issue with some of the Parameter 
> variables.  I noticed that there are certain keywords, like 
> Central_Meridian and Latitude_Of_Origin that vary between ESRI code and 
> the OGR code.  Looking at it in debug mode I discover that the 
> ValidateProjection method is aware of the discrepancy and is able to map 
> between the OGR values, Longitude_of_Center and Latitude_Of_Center in 
> this case, but instead throws an error and aborts the loading process.  
> Should the true behavior be for the code to remap the names to their 
> respective OGR values?  If the internal code is capable of parsing it, 
> thus removing the need for actually changing the label, shouldn't the 
> loop continue on and allow future variables to be read anyway? 

Hank,

The Validate() method is (in theory) intended to verify that a given
OGRSpatialReference is fully legitimate according to OGC WKT specs.
It doesn't really do that all that well, but it tries.  So it values to
validate aliases because they aren't the "legal" values.

I presume what you really want is a Validate() method that verifies that
an OGRSpatialReference is usable form, as opposed to being "standards
compliant".  Is that right?  Unfortuatenly, that currently doesn't exist.
I would suggest just trying to use the coordinate systems, and see if they
fail.

I would also note that when loading ESRI WKT projections, you should consider
using the morphFromESRI() method to convert ESRI names to more normal OGR names.
The Fixup() method is also useful in filling in defaults and fixing some things
that can be technically wrong when pulled in from various WKT sources.

I hope this helps.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From hgrabows at stk.com  Thu Jan  8 13:36:04 2004
From: hgrabows at stk.com (Grabowski, Hank)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Projection Parameters
Message-ID: <44AB336C889417448260E477E9D398100384F8@toledo.stk.com>

Hey Frank,

I was just using the Validate method in a preliminary pass.
Unfortunately if I simply ignore that step and let OGR try and reproject
the data anyway, I don't get a valid reprojection.  From what I can tell
the importFromESRI function is calling the morphFromESRI function, but
it isn't successfully remapping the parameters.  The projection I'm
trying to import is a World Mercator projection.  Is there a csv
datafile, that I see references to in the code, that I should have
installed?  I'm thinking the answer is no, because the IsAliasFor method
used in ValidateProjection has all the necessary values.  At one point
are these parameters supposed to be swapped or re-interpreted during the
morphFromESRI or importFromESRI function?

Hank Grabowski
hgrabowski@stk.com
1-610-578-1000
------------------------------------------------------------------------
----------
Get an opportunity to win an iQue PDA/GPS handheld system by inviting
your friends and colleagues to join the STK user community at
http://www.stk.com/referral. "Share The Knowledge!"


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Thursday, January 08, 2004 1:27 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Projection Parameters


Grabowski, Hank wrote:
> Hello again,
>  
> We are continuing to use, quite successfully, the OGR library for 
> doing
> automatic reprojections of data for our application.  However in 
> internal testing I found a weird issue with some of the Parameter 
> variables.  I noticed that there are certain keywords, like 
> Central_Meridian and Latitude_Of_Origin that vary between ESRI code
and 
> the OGR code.  Looking at it in debug mode I discover that the 
> ValidateProjection method is aware of the discrepancy and is able to
map 
> between the OGR values, Longitude_of_Center and Latitude_Of_Center in 
> this case, but instead throws an error and aborts the loading process.

> Should the true behavior be for the code to remap the names to their 
> respective OGR values?  If the internal code is capable of parsing it,

> thus removing the need for actually changing the label, shouldn't the 
> loop continue on and allow future variables to be read anyway? 

Hank,

The Validate() method is (in theory) intended to verify that a given
OGRSpatialReference is fully legitimate according to OGC WKT specs. It
doesn't really do that all that well, but it tries.  So it values to
validate aliases because they aren't the "legal" values.

I presume what you really want is a Validate() method that verifies that
an OGRSpatialReference is usable form, as opposed to being "standards
compliant".  Is that right?  Unfortuatenly, that currently doesn't
exist. I would suggest just trying to use the coordinate systems, and
see if they fail.

I would also note that when loading ESRI WKT projections, you should
consider using the morphFromESRI() method to convert ESRI names to more
normal OGR names. The Fixup() method is also useful in filling in
defaults and fixing some things that can be technically wrong when
pulled in from various WKT sources.

I hope this helps.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Thu Jan  8 14:02:43 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Projection Parameters
In-Reply-To: <44AB336C889417448260E477E9D398100384F8@toledo.stk.com>
References: <44AB336C889417448260E477E9D398100384F8@toledo.stk.com>
Message-ID: <3FFDA953.7060501@pobox.com>

Grabowski, Hank wrote:
> Hey Frank,
> 
> I was just using the Validate method in a preliminary pass.
> Unfortunately if I simply ignore that step and let OGR try and reproject
> the data anyway, I don't get a valid reprojection.  From what I can tell
> the importFromESRI function is calling the morphFromESRI function, but
> it isn't successfully remapping the parameters.  The projection I'm
> trying to import is a World Mercator projection.  Is there a csv
> datafile, that I see references to in the code, that I should have
> installed?  I'm thinking the answer is no, because the IsAliasFor method
> used in ValidateProjection has all the necessary values.  At one point
> are these parameters supposed to be swapped or re-interpreted during the
> morphFromESRI or importFromESRI function?

Hank,

The corresponding aliasing logic in actual use is embedded as code in
the GetProjParm() method.  There, for instance, if Latitude of Origin
is requested but not found, it will also try latitude of center.

I see that the rules in this method don't exactly match the alias list
in the validate code, but likely should.  If you can submit a bug report
with the original ESRI .prj file I can try to track down what is happening
and generalize the logic.

Code that converts to other formats, such as PROJ.4, use GetProjParm()
with the expectation that it will know something about common aliases.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From hgrabows at stk.com  Thu Jan  8 14:10:49 2004
From: hgrabows at stk.com (Grabowski, Hank)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Projection Parameters
Message-ID: <44AB336C889417448260E477E9D3981028B27A@toledo.stk.com>

More info for you guys.  Unluckily I chose an Albers projection as my
default import case.  It turns out for Albers projection, the following
code gets executed:

        GetRoot()->applyRemapper( 
            "PARAMETER", apszAlbersMapping + 1, apszAlbersMapping + 0, 2
);

I *really* need this to be executed for the World Mercatur, North
America Equidistant Cylindrical and maybe other projections as well.  If
I remove the test to only apply this on Albers projections, will this
cause issues for other types of projections?

Hank Grabowski
hgrabowski@stk.com
1-610-578-1000
------------------------------------------------------------------------
----------
Get an opportunity to win an iQue PDA/GPS handheld system by inviting
your friends and colleagues to join the STK user community at
http://www.stk.com/referral. "Share The Knowledge!"


-----Original Message-----
From: Grabowski, Hank 
Sent: Thursday, January 08, 2004 1:36 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Projection Parameters


Hey Frank,

I was just using the Validate method in a preliminary pass.
Unfortunately if I simply ignore that step and let OGR try and reproject
the data anyway, I don't get a valid reprojection.  From what I can tell
the importFromESRI function is calling the morphFromESRI function, but
it isn't successfully remapping the parameters.  The projection I'm
trying to import is a World Mercator projection.  Is there a csv
datafile, that I see references to in the code, that I should have
installed?  I'm thinking the answer is no, because the IsAliasFor method
used in ValidateProjection has all the necessary values.  At one point
are these parameters supposed to be swapped or re-interpreted during the
morphFromESRI or importFromESRI function?

Hank Grabowski
hgrabowski@stk.com
1-610-578-1000
------------------------------------------------------------------------
----------
Get an opportunity to win an iQue PDA/GPS handheld system by inviting
your friends and colleagues to join the STK user community at
http://www.stk.com/referral. "Share The Knowledge!"


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Thursday, January 08, 2004 1:27 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Projection Parameters


Grabowski, Hank wrote:
> Hello again,
>  
> We are continuing to use, quite successfully, the OGR library for
> doing
> automatic reprojections of data for our application.  However in 
> internal testing I found a weird issue with some of the Parameter 
> variables.  I noticed that there are certain keywords, like 
> Central_Meridian and Latitude_Of_Origin that vary between ESRI code
and 
> the OGR code.  Looking at it in debug mode I discover that the
> ValidateProjection method is aware of the discrepancy and is able to
map 
> between the OGR values, Longitude_of_Center and Latitude_Of_Center in
> this case, but instead throws an error and aborts the loading process.

> Should the true behavior be for the code to remap the names to their
> respective OGR values?  If the internal code is capable of parsing it,

> thus removing the need for actually changing the label, shouldn't the
> loop continue on and allow future variables to be read anyway? 

Hank,

The Validate() method is (in theory) intended to verify that a given
OGRSpatialReference is fully legitimate according to OGC WKT specs. It
doesn't really do that all that well, but it tries.  So it values to
validate aliases because they aren't the "legal" values.

I presume what you really want is a Validate() method that verifies that
an OGRSpatialReference is usable form, as opposed to being "standards
compliant".  Is that right?  Unfortuatenly, that currently doesn't
exist. I would suggest just trying to use the coordinate systems, and
see if they fail.

I would also note that when loading ESRI WKT projections, you should
consider using the morphFromESRI() method to convert ESRI names to more
normal OGR names. The Fixup() method is also useful in filling in
defaults and fixing some things that can be technically wrong when
pulled in from various WKT sources.

I hope this helps.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From hgrabows at stk.com  Thu Jan  8 14:17:42 2004
From: hgrabows at stk.com (Grabowski, Hank)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Quick fix works preliminarily
Message-ID: <44AB336C889417448260E477E9D3981028B27B@toledo.stk.com>

In morphFromESRI there was code that looked like:

    if( pszProjection != NULL && EQUAL(pszProjection,"Albers") )
        GetRoot()->applyRemapper( 
            "PARAMETER", apszAlbersMapping + 0, apszAlbersMapping + 1, 2
);

To read:

    if( pszProjection != NULL)
        GetRoot()->applyRemapper( 
            "PARAMETER", apszAlbersMapping + 0, apszAlbersMapping + 1, 2
);

This appears to help this issue.  Perhaps it is just a bandaid though.
Does not limiting the parameter conversion process to Albers projections
make sense generally?

Hank Grabowski
hgrabowski@stk.com
1-610-578-1000
------------------------------------------------------------------------
----------
Get an opportunity to win an iQue PDA/GPS handheld system by inviting
your friends and colleagues to join the STK user community at
http://www.stk.com/referral. "Share The Knowledge!"


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Thursday, January 08, 2004 2:03 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Projection Parameters


Grabowski, Hank wrote:
> Hey Frank,
> 
> I was just using the Validate method in a preliminary pass. 
> Unfortunately if I simply ignore that step and let OGR try and 
> reproject the data anyway, I don't get a valid reprojection.  From 
> what I can tell the importFromESRI function is calling the 
> morphFromESRI function, but it isn't successfully remapping the 
> parameters.  The projection I'm trying to import is a World Mercator 
> projection.  Is there a csv datafile, that I see references to in the 
> code, that I should have installed?  I'm thinking the answer is no, 
> because the IsAliasFor method used in ValidateProjection has all the 
> necessary values.  At one point are these parameters supposed to be 
> swapped or re-interpreted during the morphFromESRI or importFromESRI 
> function?

Hank,

The corresponding aliasing logic in actual use is embedded as code in
the GetProjParm() method.  There, for instance, if Latitude of Origin is
requested but not found, it will also try latitude of center.

I see that the rules in this method don't exactly match the alias list
in the validate code, but likely should.  If you can submit a bug report
with the original ESRI .prj file I can try to track down what is
happening and generalize the logic.

Code that converts to other formats, such as PROJ.4, use GetProjParm()
with the expectation that it will know something about common aliases.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From hgrabows at stk.com  Thu Jan  8 15:51:07 2004
From: hgrabows at stk.com (Grabowski, Hank)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Quick Fix Issues
Message-ID: <44AB336C889417448260E477E9D398100384F9@toledo.stk.com>

Well, as luck wouldn't have it, sometimes those are the right keywords.
WTF?  Anyway, this below code I believe correctly maps between all the
ESRI and OGR discrepancies:

	if( pszProjection != NULL &&
		(EQUAL(pszProjection,"Albers") ||
		 EQUAL(pszProjection,"Equidistant_Conic") ||
		 EQUAL(pszProjection,"Azimuthal_Equidistant") ||
		 EQUAL(pszProjection,"Lambert_Azimuthal_Equal_Area") ||
		 EQUAL(pszProjection,"Miller_Cylindrical") ||
		 EQUAL(pszProjection,"Robinson") ||
		 EQUAL(pszProjection,"Sinusoidal")))
	{
        GetRoot()->applyRemapper( 
            "PARAMETER", apszAlbersMapping + 0, apszAlbersMapping + 1, 2
);
	}

Now.  The last issue I seem to have is that the World Mercator
projection produced by ESRI includes the parameter
SRS_PP_STANDARD_PARALLEL_1, but OGR doesn't like that (ESRI sets the
value to 0.0 anyway btw).  In the validate code, it checks to make sure
additional parameters aren't used.  I'm not sure what to do except
recommend that customers hand edit the projection file and remove this
parameter.

Hank Grabowski
hgrabowski@stk.com
1-610-578-1000
------------------------------------------------------------------------
----------
Get an opportunity to win an iQue PDA/GPS handheld system by inviting
your friends and colleagues to join the STK user community at
http://www.stk.com/referral. "Share The Knowledge!"


-----Original Message-----
From: Grabowski, Hank 
Sent: Thursday, January 08, 2004 2:18 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Quick fix works preliminarily


In morphFromESRI there was code that looked like:

    if( pszProjection != NULL && EQUAL(pszProjection,"Albers") )
        GetRoot()->applyRemapper( 
            "PARAMETER", apszAlbersMapping + 0, apszAlbersMapping + 1, 2
);

To read:

    if( pszProjection != NULL)
        GetRoot()->applyRemapper( 
            "PARAMETER", apszAlbersMapping + 0, apszAlbersMapping + 1, 2
);

This appears to help this issue.  Perhaps it is just a bandaid though.
Does not limiting the parameter conversion process to Albers projections
make sense generally?

Hank Grabowski
hgrabowski@stk.com
1-610-578-1000
------------------------------------------------------------------------
----------
Get an opportunity to win an iQue PDA/GPS handheld system by inviting
your friends and colleagues to join the STK user community at
http://www.stk.com/referral. "Share The Knowledge!"


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Thursday, January 08, 2004 2:03 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Projection Parameters


Grabowski, Hank wrote:
> Hey Frank,
> 
> I was just using the Validate method in a preliminary pass.
> Unfortunately if I simply ignore that step and let OGR try and 
> reproject the data anyway, I don't get a valid reprojection.  From 
> what I can tell the importFromESRI function is calling the 
> morphFromESRI function, but it isn't successfully remapping the 
> parameters.  The projection I'm trying to import is a World Mercator 
> projection.  Is there a csv datafile, that I see references to in the 
> code, that I should have installed?  I'm thinking the answer is no, 
> because the IsAliasFor method used in ValidateProjection has all the 
> necessary values.  At one point are these parameters supposed to be 
> swapped or re-interpreted during the morphFromESRI or importFromESRI 
> function?

Hank,

The corresponding aliasing logic in actual use is embedded as code in
the GetProjParm() method.  There, for instance, if Latitude of Origin is
requested but not found, it will also try latitude of center.

I see that the rules in this method don't exactly match the alias list
in the validate code, but likely should.  If you can submit a bug report
with the original ESRI .prj file I can try to track down what is
happening and generalize the logic.

Code that converts to other formats, such as PROJ.4, use GetProjParm()
with the expectation that it will know something about common aliases.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From bfraser at geoanalytic.com  Fri Jan  9 16:26:07 2004
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] read RLE BIL with GDAL?
Message-ID: <153501c3d6f7$3188a210$020002c0@SHARK>

I've got some 8-bit Run-Length-Encoded BIL files I'd like to display (using Mapserver with the GDAL libraries).  

Is there a way to have GDAL read them using GDAL's current list of formats?  I can make HDR (or other header files) if you could give me a few pointers...

I'd rather not do an intermediate translation to tiff if I can avoid it as they are being updated on an occasional basis.  I could modify the software that creates these files to create tiffs instead, but I'd prefer a "quick" way to have GDAL read them.

Any thoughts?

Thanks!
Brent Fraser
GeoAnalytic Inc.
Tel:(403) 213-2700
bfraser@geoanalytic.com
www.geoanalytic.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040109/e207c16d/attachment.html
From warmerdam at pobox.com  Fri Jan  9 17:19:17 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] read RLE BIL with GDAL?
In-Reply-To: <153501c3d6f7$3188a210$020002c0@SHARK>
References: <153501c3d6f7$3188a210$020002c0@SHARK>
Message-ID: <3FFF28E5.9060009@pobox.com>

Brent Fraser wrote:
> I've got some 8-bit Run-Length-Encoded BIL files I'd like to display 
> (using Mapserver with the GDAL libraries). 
>  
> Is there a way to have GDAL read them using GDAL's current list of 
> formats?  I can make HDR (or other header files) if you could give me a 
> few pointers...
>  
> I'd rather not do an intermediate translation to tiff if I can avoid it 
> as they are being updated on an occasional basis.  I could modify the 
> software that creates these files to create tiffs instead, but I'd 
> prefer a "quick" way to have GDAL read them.

Brent,

I'm afraid I don't have any code for reading the RLE format, nor do I know the
details of it to implement such support.

No help here ...

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From T.R.DeCarlo at larc.nasa.gov  Mon Jan 12 09:49:17 2004
From: T.R.DeCarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] read RLE BIL with GDAL?
In-Reply-To: <3FFF28E5.9060009@pobox.com>
Message-ID: <EPEALOKKOCCOEALLINACCEHPFFAA.T.R.DeCarlo@larc.nasa.gov>

Frank,
I don't have the right computers any more, but way back in the days of
yore... when I used to work on SGI hardware, there were example programs
that I think were part of the Image library. One of these was a
reader/writer for SGI's rgb image files in RLE format. Maybe there's someone
among the GDAL users that has access to those example files.

FWIW,
Thom

Thom DeCarlo
Sr. S/W Eng, VisSim
Team ConITS - AvSP - LaRC - NASA

-----Original Message-----
From: Frank Warmerdam
Sent: Friday, January 09, 2004 5:19 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] read RLE BIL with GDAL?

Brent Fraser wrote:
> I've got some 8-bit Run-Length-Encoded BIL files I'd like to display
> (using Mapserver with the GDAL libraries).
>
> Is there a way to have GDAL read them using GDAL's current list of
> formats?  I can make HDR (or other header files) if you could give me a
> few pointers...
>
> I'd rather not do an intermediate translation to tiff if I can avoid it
> as they are being updated on an occasional basis.  I could modify the
> software that creates these files to create tiffs instead, but I'd
> prefer a "quick" way to have GDAL read them.

Brent,

I'm afraid I don't have any code for reading the RLE format, nor do I know
the
details of it to implement such support.

No help here ...

Best regards,





From warmerdam at pobox.com  Mon Jan 12 10:10:34 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] read RLE BIL with GDAL?
In-Reply-To: <EPEALOKKOCCOEALLINACCEHPFFAA.T.R.DeCarlo@larc.nasa.gov>
References: <EPEALOKKOCCOEALLINACCEHPFFAA.T.R.DeCarlo@larc.nasa.gov>
Message-ID: <4002B8EA.7090001@pobox.com>

Thom DeCarlo wrote:
> Frank,
> I don't have the right computers any more, but way back in the days of
> yore... when I used to work on SGI hardware, there were example programs
> that I think were part of the Image library. One of these was a
> reader/writer for SGI's rgb image files in RLE format. Maybe there's someone
> among the GDAL users that has access to those example files.

Thom,

RLE stands for "Run length encoded".  There are a variety of approches to
run length encoding including stuff like the packbits compression in
TIFF.  Do you know if the SGI RLE format used the same exact format as
the RLE supported by ArcGIS?  If so, I might be able to dig up info on it.
Although, it still wouldn't be too high on my priority list.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From nhv at cape.com  Mon Jan 12 10:55:38 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] read RLE BIL with GDAL?
In-Reply-To: <4002B8EA.7090001@pobox.com>
Message-ID: <EKEJIKAILPONGGENMBGAEEECGAAA.nhv@cape.com>

Frank Warmerdam writes:
> 
> RLE stands for "Run length encoded".  There are a variety of approches to
> run length encoding including stuff like the packbits compression in
> TIFF.  Do you know if the SGI RLE format used the same exact format as
> the RLE supported by ArcGIS? 

Frank

I don't know what ArcGIS uses but we have a SGI image reader in Plib
that is quite straight forward and appears to be robust

This is used to load texture into OpenGL but that part should be obvious
http://cvs.sourceforge.net/viewcvs.py/*checkout*/plib/plib/src/ssg/ssgLoadSGI.cxx?rev=1.16

There is < use to be at least > some 'C' code in the Glut Mesa Demos
image.c image.h that this is adapted from

HTH

Norman

From T.R.DeCarlo at larc.nasa.gov  Mon Jan 12 11:09:17 2004
From: T.R.DeCarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] read RLE BIL with GDAL?
In-Reply-To: <4002B8EA.7090001@pobox.com>
Message-ID: <EPEALOKKOCCOEALLINACOEIAFFAA.T.R.DeCarlo@larc.nasa.gov>

Yep, I knew that. I should have said RLE compression and not RLE format.
Sorry for the confusion. I didn't realize that Brent was asking about
something specific to ArcGIS, so I can't answer whether or not the schemes
are the same.

Sorry again,
Thom

-----Original Message-----
From: Frank Warmerdam
Sent: Monday, January 12, 2004 10:11 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] read RLE BIL with GDAL?

Thom DeCarlo wrote:
> Frank,
> I don't have the right computers any more, but way back in the days of
> yore... when I used to work on SGI hardware, there were example programs
> that I think were part of the Image library. One of these was a
> reader/writer for SGI's rgb image files in RLE format. Maybe there's
someone
> among the GDAL users that has access to those example files.

Thom,

RLE stands for "Run length encoded".  There are a variety of approches to
run length encoding including stuff like the packbits compression in
TIFF.  Do you know if the SGI RLE format used the same exact format as
the RLE supported by ArcGIS?  If so, I might be able to dig up info on it.
Although, it still wouldn't be too high on my priority list.

Best regards,





From hobu at iastate.edu  Mon Jan 12 11:33:35 2004
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] NetCDF on Windows
Message-ID: <5.2.0.9.2.20040112102553.020521f0@hobu.mail.iastate.edu>

List,

I am please to report that I was able to compile NetCDF support for GDAL 
using the windows binary that I found on 
ftp://gmt.soest.hawaii.edu/pub/gmt/ that included a dll and .lib file.

Once compiled, however, I am unable to see the NetCDF driver listed when I 
print the drivers list using Python.  What other compiler symbols do I need 
to set to ensure that the driver built?

Howard

---------------------------------------------------
#Settings for nmake.opt
NETCDF_SETTING=yes
NETCDF_LIB = c:\gdal\netcdf\lib\netcdf.lib
NETCDF_INC_DIR = c:\gdal\netcdf\include
---------------------------------------------------

---------------------------------------------------
#makefile.vc for NetCDF
OBJ     =       netcdfdataset.obj

EXTRAFLAGS =    -I$(NETCDF_INC_DIR)

GDAL_ROOT       =       ..\..

!INCLUDE $(GDAL_ROOT)\nmake.opt

default:        $(OBJ)
         copy *.obj ..\o

clean:
         -del *.obj
---------------------------------------------------



Center for Survey Statistics and Methodology
Iowa State University
Ames, IA 50201 


From bfraser at geoanalytic.com  Mon Jan 12 12:23:42 2004
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] read RLE BIL with GDAL?
References: <EPEALOKKOCCOEALLINACOEIAFFAA.T.R.DeCarlo@larc.nasa.gov>
Message-ID: <17f201c3d930$d3dd2910$020002c0@SHARK>

Thom,

  The data was not created with ArcGIS.  In fact we wrote the software to
read and write the RLE BIL files.  These files are used to store a code for
the "original provider/quality measure" for the DEM points in our DEM
datastore (e.g 0=GTopo30,1=STRM, 2=DTED, etc), and is used when updating the
DEM datastore with data from other sources as it becomes available.

    Unfortunately, we don't have any way of visualizing these "quality
measure" files (poor planning on our part).  While the ultimate solution is
to replace our RLE BIL routines with RLE Tiff routines, I was hoping for a
quick solution by crafting up some HDR files or other GDAL-compatible header
files.

Brent

----- Original Message -----
From: "Thom DeCarlo" <T.R.DeCarlo@larc.nasa.gov>
To: <gdal-dev@remotesensing.org>
Sent: Monday, January 12, 2004 9:09 AM
Subject: RE: [Gdal-dev] read RLE BIL with GDAL?


> Yep, I knew that. I should have said RLE compression and not RLE format.
> Sorry for the confusion. I didn't realize that Brent was asking about
> something specific to ArcGIS, so I can't answer whether or not the schemes
> are the same.
>
> Sorry again,
> Thom
>
> -----Original Message-----
> From: Frank Warmerdam
> Sent: Monday, January 12, 2004 10:11 AM
> To: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] read RLE BIL with GDAL?
>
> Thom DeCarlo wrote:
> > Frank,
> > I don't have the right computers any more, but way back in the days of
> > yore... when I used to work on SGI hardware, there were example programs
> > that I think were part of the Image library. One of these was a
> > reader/writer for SGI's rgb image files in RLE format. Maybe there's
> someone
> > among the GDAL users that has access to those example files.
>
> Thom,
>
> RLE stands for "Run length encoded".  There are a variety of approches to
> run length encoding including stuff like the packbits compression in
> TIFF.  Do you know if the SGI RLE format used the same exact format as
> the RLE supported by ArcGIS?  If so, I might be able to dig up info on it.
> Although, it still wouldn't be too high on my priority list.
>
> Best regards,
>
>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Mon Jan 12 12:55:05 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] NetCDF on Windows
In-Reply-To: <5.2.0.9.2.20040112102553.020521f0@hobu.mail.iastate.edu>
References: <5.2.0.9.2.20040112102553.020521f0@hobu.mail.iastate.edu>
Message-ID: <4002DF79.3000403@pobox.com>

Howard Butler wrote:
> List,
> 
> I am please to report that I was able to compile NetCDF support for GDAL 
> using the windows binary that I found on 
> ftp://gmt.soest.hawaii.edu/pub/gmt/ that included a dll and .lib file.
> 
> Once compiled, however, I am unable to see the NetCDF driver listed when 
> I print the drivers list using Python.  What other compiler symbols do I 
> need to set to ensure that the driver built?

Howard,

Excellent work, but the magic you are missing is changes to frmts/makefile.vc
to define FRMT_netcdf when building gdalallregister.cpp.  I have committed
the required changes to nmake.opt, frmts/makefile.vc, and frmts/netcdf/makefile.vc
so that netcdf can now be built on windows.  I have done some minimal testing
to verify that it works properly with the netcdf sdk you referenced.

Note, I had to do a "chmod a+x" on the netcdf.dll when running from within the
Cygwin environment. I don't know if this is an artifact of cgywin or what.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From packalen at cs.joensuu.fi  Mon Jan 12 12:56:35 2004
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] GIF problem
Message-ID: <Pine.GSO.4.58.0401121952530.23677@cs>

Hi,

I have noticed that GIF driver does not work always properly. Is this
known problem? I have an undamaged gif file, but GDAL thinks there are 11
bands in this indexed image. In this case also dataset destruction fails.
Some time ago I had similar problems with another gif file. I really don't
need this driver at the moment (I have deregistered it). I just would like
to be aware of this issue. GDAL version is 1.1.9.0 (cvs-031112).

Petteri

**********************************************************************
Petteri Packalen
University of Joensuu
Faculty of Forestry
P.O. Box 111
80101 Joensuu
Finland
E-mail: packalen@cs.joensuu.fi
**********************************************************************

From chen at yinyue123.com  Mon Jan 12 13:23:06 2004
From: chen at yinyue123.com (Fu Chen)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] about kakadu compile
Message-ID: <000001c3d939$228942d0$4356833d@novabook>

Hi!
Does anyone compile the gdal with the kakadu sdk 4.1 recently? 
In nmake.opt there is only one dir to supply. But in fact the kakadu's
include files spread in many directories. At last I collect all the .h
file into one directory. But the compile still have trouble. 

jp2kakdataset.cpp(599) : error C2039: "set_num_components" is not a
method of kdu_window

jp2kakdataset.cpp(600) : error C2676: "[" : "kdu_range_set" doesn't have
this operation.

How can I get rid of this error?
Any idea?


From warmerdam at pobox.com  Mon Jan 12 14:26:05 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] about kakadu compile
In-Reply-To: <000001c3d939$228942d0$4356833d@novabook>
References: <000001c3d939$228942d0$4356833d@novabook>
Message-ID: <4002F4CD.3080901@pobox.com>

Fu Chen wrote:
> Hi!
> Does anyone compile the gdal with the kakadu sdk 4.1 recently? 
> In nmake.opt there is only one dir to supply. But in fact the kakadu's
> include files spread in many directories. At last I collect all the .h
> file into one directory. But the compile still have trouble. 
> 
> jp2kakdataset.cpp(599) : error C2039: "set_num_components" is not a
> method of kdu_window
> 
> jp2kakdataset.cpp(600) : error C2676: "[" : "kdu_range_set" doesn't have
> this operation.
> 
> How can I get rid of this error?
> Any idea?

Fu Chen,

I suspect that something has changed in the JPIP related code, but I haven't
built that portion (available only on win32) against Kakadu 4.1.  You can get
things working by dropping JPIP support.

Change this:

#if defined(KAKADU4) && defined(WIN32)
#  define USE_JPIP
#endif

To this:
#if defined(KAKADU4) && defined(WIN32) && !defined(KAKADU41)
#  define USE_JPIP
#endif

I will apply this change to the master source till I get around to fixing
up JPIP support on 4.1.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From wangwm at igsnrr.ac.cn  Mon Jan 12 20:36:29 2004
From: wangwm at igsnrr.ac.cn (Weimin Wang)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Debug Assertion Failed!
References: <000001c3d939$228942d0$4356833d@novabook>
Message-ID: <40034B9D.E3E637CB@igsnrr.ac.cn>

Hello,everyone,

GDALOpen function was used to open RS image under Windows platform.No
error was found during the compilation and linking process with "Win32
Debug" mode.However,when i run the program and execute the GDALOpen
function.It is said "Debug Assertion Failed!

Program: J:\...
File: dbgheap.c
Line: 1044

Expression: _CrtIsValidHeapPointer(pUserData)"

This problem disppeared for "Win32 Release" mode.
How do this error occur?Any suggestion be thankful!

-- 
Best Regards,

Wang Weimin
-----------------------------------
WaterCenter,Institute of Geo. 
Sci. & Nature Resource Research,
Chinese Academy of Science,
Beijing,100101,China

-----------------------------------
http://qtirsl.igsnrr.ac.cn

From chen at yinyue123.com  Mon Jan 12 22:10:59 2004
From: chen at yinyue123.com (Fu Chen)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Debug Assertion Failed!
In-Reply-To: <40034B9D.E3E637CB@igsnrr.ac.cn>
Message-ID: <000101c3d982$dfcd3790$870042da@novabook>

Hi!
I face the same trouble before. You should rebuild the gdal in /Md when
you try to use it in debug mode.

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Weimin Wang
Sent: Tuesday, January 13, 2004 9:36 AM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Debug Assertion Failed!


Hello,everyone,

GDALOpen function was used to open RS image under Windows platform.No
error was found during the compilation and linking process with "Win32
Debug" mode.However,when i run the program and execute the GDALOpen
function.It is said "Debug Assertion Failed!

Program: J:\...
File: dbgheap.c
Line: 1044

Expression: _CrtIsValidHeapPointer(pUserData)"

This problem disppeared for "Win32 Release" mode.
How do this error occur?Any suggestion be thankful!

-- 
Best Regards,

Wang Weimin
-----------------------------------
WaterCenter,Institute of Geo. 
Sci. & Nature Resource Research,
Chinese Academy of Science,
Beijing,100101,China

-----------------------------------
http://qtirsl.igsnrr.ac.cn
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From br at forstware.de  Tue Jan 13 11:02:08 2004
From: br at forstware.de (Bjoern Ruff)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] MrSid
Message-ID: <003601c3d9ee$98893ac0$0d1778c2@forstware.de>

Hello,

I just compiled gdal with VC71 and MrSid DSDK 3.2.1

I sent the neccessary changes to Frank.

Now I wanted to test it with test_ogrsf

I got the message: Unable to open datasource ... with the following
drivers. .....

What must I do to get test_ogrsf to use the driver.
test_ogrsf was linked with the MrSid lib's.

Cheers, Bjoern

Bjoern Ruff
br@forstware.de



From warmerdam at pobox.com  Tue Jan 13 11:33:17 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] MrSid
In-Reply-To: <003601c3d9ee$98893ac0$0d1778c2@forstware.de>
References: <003601c3d9ee$98893ac0$0d1778c2@forstware.de>
Message-ID: <40041DCD.2090107@pobox.com>

Bjoern Ruff wrote:
> Hello,
> 
> I just compiled gdal with VC71 and MrSid DSDK 3.2.1
> 
> I sent the neccessary changes to Frank.
> 
> Now I wanted to test it with test_ogrsf
> 
> I got the message: Unable to open datasource ... with the following
> drivers. .....
> 
> What must I do to get test_ogrsf to use the driver.
> test_ogrsf was linked with the MrSid lib's.

Bjoern,

The test_ogrsf program is only used to test OGR vector drivers, not GDAL
raster drivers.   Best to test by doing a gdalinfo on the .sid file, and
then a gdal_translate to convert to another format and check if it looks
OK.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From br at forstware.de  Tue Jan 13 12:15:33 2004
From: br at forstware.de (Bjoern Ruff)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] MrSid
In-Reply-To: <40041DCD.2090107@pobox.com>
Message-ID: <003f01c3d9f8$da31f610$0d1778c2@forstware.de>

Hello Frank,

thanks, it works!

Bjoern

> -----Original Message-----
> From: gdal-dev-admin@remotesensing.org 
> [mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
> Sent: Tuesday, January 13, 2004 5:33 PM
> To: gdal-dev@remotesensing.org
> Subject: Re: [Gdal-dev] MrSid
> 
> 
> Bjoern Ruff wrote:
> > Hello,
> > 
> > I just compiled gdal with VC71 and MrSid DSDK 3.2.1
> > 
> > I sent the neccessary changes to Frank.
> > 
> > Now I wanted to test it with test_ogrsf
> > 
> > I got the message: Unable to open datasource ... with the following 
> > drivers. .....
> > 
> > What must I do to get test_ogrsf to use the driver. test_ogrsf was 
> > linked with the MrSid lib's.
> 
> Bjoern,
> 
> The test_ogrsf program is only used to test OGR vector 
> drivers, not GDAL
> raster drivers.   Best to test by doing a gdalinfo on the 
> .sid file, and
> then a gdal_translate to convert to another format and check 
> if it looks OK.
> 
> Best regards,
> -- 
> ---------------------------------------+----------------------
> ----------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial 
> Programmer for Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org 
> http://remotesensing.org/mailman/listinfo/gdal> -dev
> 


From pushkar at GRI.MsState.Edu  Tue Jan 13 17:19:48 2004
From: pushkar at GRI.MsState.Edu (Pushkar Pradhan)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] how to link gdal to my programs?
Message-ID: <MJEBIBGMCDKIGEHPDECCIEFDCGAA.pushkar@erc.msstate.edu>

I'm having a little trouble linking gdal libs. to my C++ code.
These are the compile errors:
Redstone[1234] pushkar$ g++ -g -o main
dwt-serial.cpp -Ierrs/ -Imisc/ -Iip/ -I../gdal-1.1.9/include/
dwt-serial.cpp: In function `int main(int, char **)':
dwt-serial.cpp:20: `GDALDataset' undeclared (first use this function)
dwt-serial.cpp:20: (Each undeclared identifier is reported only once
dwt-serial.cpp:20: for each function it appears in.)
dwt-serial.cpp:20: `poDataset' undeclared (first use this function)
dwt-serial.cpp:26: parse error before `)'

I tried -lgdal.1.1, -lgdal.1.1.9 but neither worked. I've set the path to
GDAL (/rstc/user1/erc/pushkar/gdal-1.1.9/lib) in my $LD_LIBRARY_PATH

Here's my first code:
#include <gdal.h>
<--other includes-->
int main(int argc, char **argv)
{
  char *inFile;
  char *dwtFile;

  GDALDataset *poDataset;

  GDALAllRegister();

  inFile = argv[1];

  poDataset = (GDALDataset *) GDALOpen(inFile, GA_ReadOnly);
  if(poDataset == NULL)
    exit(EXIT_FAILURE);
}

Sorry if it was on the gdal homepage and I missed it. Can somebody help.
Thanks
Pushkar


From afinley at gis.umn.edu  Tue Jan 13 17:49:34 2004
From: afinley at gis.umn.edu (Andrew Finley)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] how to link gdal to my programs?
In-Reply-To: <MJEBIBGMCDKIGEHPDECCIEFDCGAA.pushkar@erc.msstate.edu>
References: <MJEBIBGMCDKIGEHPDECCIEFDCGAA.pushkar@erc.msstate.edu>
Message-ID: <1074034174.6155.1.camel@populus>

Hi Pushkar,
Assuming that your ld.so.conf file has the correct path to the gdal
lib, and you have run ldconfig you should be able to link the lib
like this:

g++ /usr/local/lib/libgdal.1.1.so something.cpp

Your include in something.cpp might be:

#include "/usr/local/include/gdal_priv.h"
#include "/usr/local/include/ogr_spatialref.h"

hope this helps
-andy

On Tue, 2004-01-13 at 16:19, Pushkar Pradhan wrote:
> I'm having a little trouble linking gdal libs. to my C++ code.
> These are the compile errors:
> Redstone[1234] pushkar$ g++ -g -o main
> dwt-serial.cpp -Ierrs/ -Imisc/ -Iip/ -I../gdal-1.1.9/include/
> dwt-serial.cpp: In function `int main(int, char **)':
> dwt-serial.cpp:20: `GDALDataset' undeclared (first use this function)
> dwt-serial.cpp:20: (Each undeclared identifier is reported only once
> dwt-serial.cpp:20: for each function it appears in.)
> dwt-serial.cpp:20: `poDataset' undeclared (first use this function)
> dwt-serial.cpp:26: parse error before `)'
> 
> I tried -lgdal.1.1, -lgdal.1.1.9 but neither worked. I've set the path to
> GDAL (/rstc/user1/erc/pushkar/gdal-1.1.9/lib) in my $LD_LIBRARY_PATH
> 
> Here's my first code:
> #include <gdal.h>
> <--other includes-->
> int main(int argc, char **argv)
> {
>   char *inFile;
>   char *dwtFile;
> 
>   GDALDataset *poDataset;
> 
>   GDALAllRegister();
> 
>   inFile = argv[1];
> 
>   poDataset = (GDALDataset *) GDALOpen(inFile, GA_ReadOnly);
>   if(poDataset == NULL)
>     exit(EXIT_FAILURE);
> }
> 
> Sorry if it was on the gdal homepage and I missed it. Can somebody help.
> Thanks
> Pushkar
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
-- 
Andrew Finley, Research Fellow
Department of Forest Resources
College of Natural Resources           
University of Minnesota
305 Green Hall
1530 Cleveland Avenue N.
St. Paul, MN 55108

Ph 612-624-1714 office
www.cnr.umn.edu/FR/people/facstaff/finley/index.html

From tim at linfiniti.com  Wed Jan 14 02:51:05 2004
From: tim at linfiniti.com (Tim Sutton)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] SDTS Multiband Raster Reading Problems
Message-ID: <200401140751.05890.tim@linfiniti.com>

Hi

I am trying to implement SDTS format support using gdal. Gdal manages fine for 
single band datasets such as dem's, but when I try to open multiand imagery 
data such as:

http://thor-f5.er.usgs.gov/sdts/datasets/raster/erdas/GainesvilleGA-bedr.sdtsrp.tar.gz

Gdal errors with:

ERROR 1: IReadBlock failed at X offset 0, Y offset 184
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 184
ERROR 1: Cell record is not of expected format.  Raster access failed.

Running gdalinfo on the file shows that gdal thinks it is a single band 
(instead of 7band) image.

Is mulitband sdts imagery supported or planned by gdal?

Many thanks 

Tim Sutton
-- 
Get my public keys from:

http://tim.suttonfamily.co.uk/modules.php?name=Content&pa=showpage&pid=2

From dron at ak4719.spb.edu  Wed Jan 14 03:04:56 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] how to link gdal to my programs?
In-Reply-To: <MJEBIBGMCDKIGEHPDECCIEFDCGAA.pushkar@erc.msstate.edu>
References: <MJEBIBGMCDKIGEHPDECCIEFDCGAA.pushkar@erc.msstate.edu>
Message-ID: <20040114080456.GC2902@ak4719.spb.edu>

Hi,

On Tue, Jan 13, 2004 at 04:19:48PM -0600, Pushkar Pradhan wrote:
> These are the compile errors:
> Redstone[1234] pushkar$ g++ -g -o main
> dwt-serial.cpp -Ierrs/ -Imisc/ -Iip/ -I../gdal-1.1.9/include/
> dwt-serial.cpp: In function `int main(int, char **)':
> dwt-serial.cpp:20: `GDALDataset' undeclared (first use this function)
> dwt-serial.cpp:20: (Each undeclared identifier is reported only once
> dwt-serial.cpp:20: for each function it appears in.)
> dwt-serial.cpp:20: `poDataset' undeclared (first use this function)
> dwt-serial.cpp:26: parse error before `)'
>
> I tried -lgdal.1.1, -lgdal.1.1.9 but neither worked. I've set the path to
> GDAL (/rstc/user1/erc/pushkar/gdal-1.1.9/lib) in my $LD_LIBRARY_PATH

Note, that above errors has nothing with linking. It is compile time
errors. Linking flags depends on how do you compile GDAL and its
version. If you have GDAL from CVS or daily snapshot and didn't switch
off libtool support (enabled by default) then you should use -lgdal
option. Otherwise -lgdal.1.1 helps you. ARAIR, 1.1.9 was released before
libtool migration.

> #include <gdal.h>

You should use

#include <gdal_priv.h>

for C++ code.

					Best regards,
					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From alessandro_amici at telespazio.it  Wed Jan 14 03:22:34 2004
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:49:01 2007
Subject: R: [Gdal-dev] how to link gdal to my programs?
Message-ID: <7171FE1C83A6AE4DA93B8099958868070152C9DE@ROMADG-MAIL01>

Pushkar,

> I'm having a little trouble linking gdal libs. to my C++ code.
> These are the compile errors:
> Redstone[1234] pushkar$ g++ -g -o main
> dwt-serial.cpp -Ierrs/ -Imisc/ -Iip/ -I../gdal-1.1.9/include/
> dwt-serial.cpp: In function `int main(int, char **)':
> dwt-serial.cpp:20: `GDALDataset' undeclared (first use this function)
> dwt-serial.cpp:20: (Each undeclared identifier is reported only once
> dwt-serial.cpp:20: for each function it appears in.)
> dwt-serial.cpp:20: `poDataset' undeclared (first use this function)
> dwt-serial.cpp:26: parse error before `)'
> 
> I tried -lgdal.1.1, -lgdal.1.1.9 but neither worked. I've set the path to
> GDAL (/rstc/user1/erc/pushkar/gdal-1.1.9/lib) in my $LD_LIBRARY_PATH

the error you show looks like a compile error (not a link one).
you should probably play with the -I option, i.e. try to set the absolute 
path instead of ../gdal-1.1.9/include.

cheers,
alessandro

From slepnev_v at newmail.ru  Wed Jan 14 07:40:44 2004
From: slepnev_v at newmail.ru (Vladimir Slepnev)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] ogr getnextfeature problem
Message-ID: <000001c3da9b$a23675d0$49ec2ed4@sst>

Hello,

I seem to be having a problem importing some shapefiles using OGR. When
importing some GSHHS line data, OGR simply crashes on a GetNextFeature
call somewhere near the middle of the feature list. When importing a
dspoint.shp file (drainage data frow the DCW), not all the points seem
to get imported - the points get clipped to a rectangle in geographic
coordinates. The reason for the problem seems to be that OGR uses .shx
files. 

I do not send the files because they are several megabytes in size.

Vladimir Slepnev
Programmer, RDC ScanEx


From warmerdam at pobox.com  Wed Jan 14 10:02:49 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] ogr getnextfeature problem
In-Reply-To: <000001c3da9b$a23675d0$49ec2ed4@sst>
References: <000001c3da9b$a23675d0$49ec2ed4@sst>
Message-ID: <40055A19.3010603@pobox.com>

Vladimir Slepnev wrote:
> Hello,
> 
> I seem to be having a problem importing some shapefiles using OGR. When
> importing some GSHHS line data, OGR simply crashes on a GetNextFeature
> call somewhere near the middle of the feature list. When importing a
> dspoint.shp file (drainage data frow the DCW), not all the points seem
> to get imported - the points get clipped to a rectangle in geographic
> coordinates. The reason for the problem seems to be that OGR uses .shx
> files. 
> 
> I do not send the files because they are several megabytes in size.

Vladimir,

I think I will need example data to reproduce and fix this problem.  I would
suggest filing a bug in bugzilla and attaching the smallest dataset you can
find to reproduce the problem(s).

You mention the .shx file.  Are you suggesting your .shx file is out of
sync with the .shp file it relates to?  If so, there will indeed be
problems and other than providing somewhat more graceful error reporting,
it isn't obvious I would be able to fix it.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Wed Jan 14 10:09:58 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: R: [Gdal-dev] how to link gdal to my programs?
In-Reply-To: <7171FE1C83A6AE4DA93B8099958868070152C9DE@ROMADG-MAIL01>
References: <7171FE1C83A6AE4DA93B8099958868070152C9DE@ROMADG-MAIL01>
Message-ID: <40055BC6.6010007@pobox.com>

Amici Alessandro wrote:
> Pushkar,
> 
> 
>>I'm having a little trouble linking gdal libs. to my C++ code.
>>These are the compile errors:
>>Redstone[1234] pushkar$ g++ -g -o main
>>dwt-serial.cpp -Ierrs/ -Imisc/ -Iip/ -I../gdal-1.1.9/include/
>>dwt-serial.cpp: In function `int main(int, char **)':
>>dwt-serial.cpp:20: `GDALDataset' undeclared (first use this function)
>>dwt-serial.cpp:20: (Each undeclared identifier is reported only once
>>dwt-serial.cpp:20: for each function it appears in.)
>>dwt-serial.cpp:20: `poDataset' undeclared (first use this function)
>>dwt-serial.cpp:26: parse error before `)'
>>
>>I tried -lgdal.1.1, -lgdal.1.1.9 but neither worked. I've set the path to
>>GDAL (/rstc/user1/erc/pushkar/gdal-1.1.9/lib) in my $LD_LIBRARY_PATH
> 
> 
> the error you show looks like a compile error (not a link one).
> you should probably play with the -I option, i.e. try to set the absolute 
> path instead of ../gdal-1.1.9/include.

In fact, from the code, it appears the C++ API is being used, but only the
C include file gdal.h included.  Try including gdal_priv.h for access to
the C++ types (such as GDALDataset), or use the C equivelents
(GDALDatasetH for a a GDALDataset pointer).

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Wed Jan 14 10:11:38 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] SDTS Multiband Raster Reading Problems
In-Reply-To: <200401140751.05890.tim@linfiniti.com>
References: <200401140751.05890.tim@linfiniti.com>
Message-ID: <40055C2A.50803@pobox.com>

Tim Sutton wrote:
> Hi
> 
> I am trying to implement SDTS format support using gdal. Gdal manages fine for 
> single band datasets such as dem's, but when I try to open multiand imagery 
> data such as:
> 
> http://thor-f5.er.usgs.gov/sdts/datasets/raster/erdas/GainesvilleGA-bedr.sdtsrp.tar.gz
> 
> Gdal errors with:
> 
> ERROR 1: IReadBlock failed at X offset 0, Y offset 184
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 184
> ERROR 1: Cell record is not of expected format.  Raster access failed.
> 
> Running gdalinfo on the file shows that gdal thinks it is a single band 
> (instead of 7band) image.
> 
> Is mulitband sdts imagery supported or planned by gdal?

Tim,

I have never encountered a multi-band SDTS product before!  Do you have a
real need for multi-band SDTS support, or are you just trying all the assorted
data products you could find?  If you need it, I could look into implementing
it.  Please submit an enhancement request in Bugzilla.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jgallagher at gso.uri.edu  Wed Jan 14 12:21:15 2004
From: jgallagher at gso.uri.edu (James Gallagher)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Implementing GDALRasterBand::IRasterIO
Message-ID: <1074100875.31729.52.camel@comet.dods.org>

Hi,

I would like to add sub-sampling capabilities to the OPeNDAP/GDAL
driver. To do this I plan on specializing GDALRasterBand::IRasterIO(). 

First question: is that method the correct place to implement
sub-sampling?

Second question: I noticed that the OGDI driver implemented only the
GDALRasterBand::IRasterIO method while the ECW driver implemented it's
own version of both that and GDALDataset:IRasterIO. What are the
implications of specializing the second method?

Thanks,
James
-- 
__________________________________________________________________________
James Gallagher		         The Distributed Oceanographic Data System
jgallagher@gso.uri.edu               http://unidata.ucar.edu/packages/dods
Voice/Fax: 406.723.8663


From warmerdam at pobox.com  Wed Jan 14 14:01:50 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Implementing GDALRasterBand::IRasterIO
In-Reply-To: <1074100875.31729.52.camel@comet.dods.org>
References: <1074100875.31729.52.camel@comet.dods.org>
Message-ID: <4005921E.9040400@pobox.com>

James Gallagher wrote:
> Hi,
> 
> I would like to add sub-sampling capabilities to the OPeNDAP/GDAL
> driver. To do this I plan on specializing GDALRasterBand::IRasterIO(). 
> 
> First question: is that method the correct place to implement
> sub-sampling?

James,

It depends a bit what you mean by sub-sampling. If you want a client
application to be able to request a sub-area at full resolution and
the driver would be able to fetch just the subarea then overriding
IRasterIO() would be one approach.  Another would be to pretend that
the data is tiled, and just implement the IBlockRead() method.

If you want to offer an efficient way to accessed reduced resolution
images, then you could produce pseudo-overview layers.

However, given that for the OPeNDAP driver you want alot of control
over how many individual requests actually go to the remote server,
I would say overriding IRasterIO() makes sense.

Be aware that:
  o applications normally call RasterIO(), so you will now very rarely
    get block accesses - however, it can still happen.  For instance, I
    think the min/max computation goes through the block API.

  o It is very common for applications to make many small RasterIO()
    calls, often for one scanline at a time.  I often try to recognise
    the scanline request case, and pre-read a bunch of scanlines at once
    and cache them.

> Second question: I noticed that the OGDI driver implemented only the
> GDALRasterBand::IRasterIO method while the ECW driver implemented it's
> own version of both that and GDALDataset:IRasterIO. What are the
> implications of specializing the second method?

You would implement a custom GDALDataset::IRasterIO() if you want a more
efficient access to multi-band datasets as a single request.  For instance,
ECW implements GDALDataset::IRasterIO() because it is much cheaper to pass
one request on to the ECW API for all the bands of an image at once,
instead of requesting them one at a time.

By the way, one of the applications that we want the GDAL/OPeNDAP driver to
be good with is MapServer.  MapServer currently always makes one big
RasterIO() request for whatever it needs for each band being read.  Eventually
I hope to change this to utilize the GDALDataset::RasterIO() entry point for
greater efficiency where that is specialized.  So, overriding
GDALRasterBand::IRasterIO() or GDALDataset::IRasterIO() will give a big win
for MapServer.

In fact, you might consider just overriding the GDALDataaset::IRasterIO(), and
doing an implementation of GDALRasterBand::IRasterIO() that calls the dataset
level one with a single band requested.  That would set you up optimally for
future improvements in MapServer.

Applications like OpenEV are going to make lots of "tile by tile" RasterIO()
requests to GDAL.  This would presumably turn into a remote request for each
tile which is sensible, but will add a real latency drag into OpenEV renders.

Batch applications are usually scanline based, via RasterIO(), and as mentioned
before it would a wise idea to recognise this case, and force some sort of
chunking.

One final note, when you implement IRasterIO() you avoid data going through
the GDAL cache.  That is good if you are effectively caching things yourself
somehow, but can completely hammer you in some situations if you are not.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From bmarchand at ara.com  Wed Jan 14 15:09:36 2004
From: bmarchand at ara.com (Brian Marchand)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Creating a color geotiff
Message-ID: <B3CB5AFD4126584AB4CF3DD45B267A530A8043@thorin.sed.ara.com>

Hello,

 

I'm trying to create geotiff files for the first time and I was
successful in creating a black and white geotiff. So I moved on to
creating a color one. I have a grid of RGB values so I created a data
set with 3 bands of type GDT_Byte.  I used RasterIO to write out a row
at a time. The result was garbage. 

 

Is there a specific order to writing out bands? I first tried writing a
row of red band, then a row of the green band, then the row of the blue
band. This didn't work so I dried writing all of rows for one band
before writing the next. Am I way off on this? How should I be doing
this?

 

Thanks in advance,

 

Brian Marchand

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040114/07b09696/attachment.html
From ed at topozone.com  Wed Jan 14 15:20:34 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Creating a color geotiff
Message-ID: <13858AA1A74F30419F319ACB66A9D12203B088@mercator.topozone.com>

Brian -
 
How did you conclude it was "garbage"?  There are quite a few programs
(such as the Windows "Image and Fax Viewer") that don't read them
correctly, or that fail to read certain data organization/formats.
 
    - Ed
Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 


  _____  

From: Brian Marchand [mailto:bmarchand@ara.com] 
Sent: Wednesday, January 14, 2004 3:10 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Creating a color geotiff



Hello,

 

I'm trying to create geotiff files for the first time and I was
successful in creating a black and white geotiff. So I moved on to
creating a color one. I have a grid of RGB values so I created a data
set with 3 bands of type GDT_Byte.  I used RasterIO to write out a row
at a time. The result was garbage. 

 

Is there a specific order to writing out bands? I first tried writing a
row of red band, then a row of the green band, then the row of the blue
band. This didn't work so I dried writing all of rows for one band
before writing the next. Am I way off on this? How should I be doing
this?

 

Thanks in advance,

 

Brian Marchand

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040114/cfb94fea/attachment.html
From bmarchand at ara.com  Wed Jan 14 15:45:08 2004
From: bmarchand at ara.com (Brian Marchand)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Creating a color geotiff
Message-ID: <B3CB5AFD4126584AB4CF3DD45B267A530A8044@thorin.sed.ara.com>

Ed,

 

I was using a windows viewer by Kodak. With this viewer I was able to
view other color geotiff files successfully. The image appeared to
repeat itself (in black and white) with stripes of black interleaved.

 

When I use the "create" function does the type need to match the type
that I use for the RasterIO function for a band? In this case both are
set to GDT_Byte. 

 

For instance I create the data set with;

 

GDALDataset* poDstDS = poDriver->Create(destFile, sourceGrid.GetCols(),
sourceGrid.GetRows(), 3, GDT_Byte, NULL);

 

And write bands with

 

poBandR->RasterIO( GF_Write, 0, row, nXSize, 1, scanline, nXSize, 1,
GDT_Byte, 0, 0 );

 

where scanline is a char buffer of size nXSize. Or should I be using
something like GDT_Int32 for the data set type?

 

Brian

 

 

-----Original Message-----
From: Ed McNierney [mailto:ed@topozone.com] 
Sent: Wednesday, January 14, 2004 3:21 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Creating a color geotiff

 

Brian -

 

How did you conclude it was "garbage"?  There are quite a few programs
(such as the Windows "Image and Fax Viewer") that don't read them
correctly, or that fail to read certain data organization/formats.

 

    - Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

 

  _____  

From: Brian Marchand [mailto:bmarchand@ara.com] 
Sent: Wednesday, January 14, 2004 3:10 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Creating a color geotiff

Hello,

 

I'm trying to create geotiff files for the first time and I was
successful in creating a black and white geotiff. So I moved on to
creating a color one. I have a grid of RGB values so I created a data
set with 3 bands of type GDT_Byte.  I used RasterIO to write out a row
at a time. The result was garbage. 

 

Is there a specific order to writing out bands? I first tried writing a
row of red band, then a row of the green band, then the row of the blue
band. This didn't work so I dried writing all of rows for one band
before writing the next. Am I way off on this? How should I be doing
this?

 

Thanks in advance,

 

Brian Marchand

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040114/424d327b/attachment.html
From ed at topozone.com  Wed Jan 14 15:53:54 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Creating a color geotiff
Message-ID: <13858AA1A74F30419F319ACB66A9D12203B08D@mercator.topozone.com>

Brian -
 
Yes, that's the one I'm talking about; in a prior life I was involved in
creating it!  It was intended as a fax viewer, and does not properly
handle many 24-bit TIFFs.  They produce exactly the symptom you
describe.
 
It sounds like your TIFF is correct - if you have Adobe Photoshop
available, that's a much more reliable color TIFF viewer, and I'll bet
the image looks fine in it.  However, it's worth asking what you intend
to do with these images, since they need to be readable by whatever the
target reader is.
 
    - Ed
Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

 
 

  _____  

From: Brian Marchand [mailto:bmarchand@ara.com] 
Sent: Wednesday, January 14, 2004 3:45 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Creating a color geotiff



Ed,

 

I was using a windows viewer by Kodak. With this viewer I was able to
view other color geotiff files successfully. The image appeared to
repeat itself (in black and white) with stripes of black interleaved.

 

When I use the "create" function does the type need to match the type
that I use for the RasterIO function for a band? In this case both are
set to GDT_Byte. 

 

For instance I create the data set with;

 

GDALDataset* poDstDS = poDriver->Create(destFile, sourceGrid.GetCols(),
sourceGrid.GetRows(), 3, GDT_Byte, NULL);

 

And write bands with

 

poBandR->RasterIO( GF_Write, 0, row, nXSize, 1, scanline, nXSize, 1,
GDT_Byte, 0, 0 );

 

where scanline is a char buffer of size nXSize. Or should I be using
something like GDT_Int32 for the data set type?

 

Brian

 

 

-----Original Message-----
From: Ed McNierney [mailto:ed@topozone.com] 
Sent: Wednesday, January 14, 2004 3:21 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Creating a color geotiff

 

Brian -

 

How did you conclude it was "garbage"?  There are quite a few programs
(such as the Windows "Image and Fax Viewer") that don't read them
correctly, or that fail to read certain data organization/formats.

 

    - Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

 

  _____  

From: Brian Marchand [mailto:bmarchand@ara.com] 
Sent: Wednesday, January 14, 2004 3:10 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Creating a color geotiff

Hello,

 

I'm trying to create geotiff files for the first time and I was
successful in creating a black and white geotiff. So I moved on to
creating a color one. I have a grid of RGB values so I created a data
set with 3 bands of type GDT_Byte.  I used RasterIO to write out a row
at a time. The result was garbage. 

 

Is there a specific order to writing out bands? I first tried writing a
row of red band, then a row of the green band, then the row of the blue
band. This didn't work so I dried writing all of rows for one band
before writing the next. Am I way off on this? How should I be doing
this?

 

Thanks in advance,

 

Brian Marchand

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040114/b554b210/attachment.html
From bmarchand at ara.com  Wed Jan 14 16:13:26 2004
From: bmarchand at ara.com (Brian Marchand)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Creating a color geotiff
Message-ID: <B3CB5AFD4126584AB4CF3DD45B267A530A8046@thorin.sed.ara.com>

Ed,

 

You are absolutely right. I read it using my GDAL based application and
the images look fine. My use for these images is mostly by my GDAL based
application, so in that sense it would be ok. However, users of this
application may do what I did so I'd like to figure out what's wrong so
the images can be viewed by the windows viewer too. I can read another
color geotiff (not created by me) with that viewer. That file appears to
be a 24 bit TIFF because it has 3 RGB bands of type Byte. 

 

Brian

 

-----Original Message-----
From: Ed McNierney [mailto:ed@topozone.com] 
Sent: Wednesday, January 14, 2004 3:54 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Creating a color geotiff

 

Brian -

 

Yes, that's the one I'm talking about; in a prior life I was involved in
creating it!  It was intended as a fax viewer, and does not properly
handle many 24-bit TIFFs.  They produce exactly the symptom you
describe.

 

It sounds like your TIFF is correct - if you have Adobe Photoshop
available, that's a much more reliable color TIFF viewer, and I'll bet
the image looks fine in it.  However, it's worth asking what you intend
to do with these images, since they need to be readable by whatever the
target reader is.

 

    - Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

 

 

 

  _____  

From: Brian Marchand [mailto:bmarchand@ara.com] 
Sent: Wednesday, January 14, 2004 3:45 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Creating a color geotiff

Ed,

 

I was using a windows viewer by Kodak. With this viewer I was able to
view other color geotiff files successfully. The image appeared to
repeat itself (in black and white) with stripes of black interleaved.

 

When I use the "create" function does the type need to match the type
that I use for the RasterIO function for a band? In this case both are
set to GDT_Byte. 

 

For instance I create the data set with;

 

GDALDataset* poDstDS = poDriver->Create(destFile, sourceGrid.GetCols(),
sourceGrid.GetRows(), 3, GDT_Byte, NULL);

 

And write bands with

 

poBandR->RasterIO( GF_Write, 0, row, nXSize, 1, scanline, nXSize, 1,
GDT_Byte, 0, 0 );

 

where scanline is a char buffer of size nXSize. Or should I be using
something like GDT_Int32 for the data set type?

 

Brian

 

 

-----Original Message-----
From: Ed McNierney [mailto:ed@topozone.com] 
Sent: Wednesday, January 14, 2004 3:21 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Creating a color geotiff

 

Brian -

 

How did you conclude it was "garbage"?  There are quite a few programs
(such as the Windows "Image and Fax Viewer") that don't read them
correctly, or that fail to read certain data organization/formats.

 

    - Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

 

  _____  

From: Brian Marchand [mailto:bmarchand@ara.com] 
Sent: Wednesday, January 14, 2004 3:10 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Creating a color geotiff

Hello,

 

I'm trying to create geotiff files for the first time and I was
successful in creating a black and white geotiff. So I moved on to
creating a color one. I have a grid of RGB values so I created a data
set with 3 bands of type GDT_Byte.  I used RasterIO to write out a row
at a time. The result was garbage. 

 

Is there a specific order to writing out bands? I first tried writing a
row of red band, then a row of the green band, then the row of the blue
band. This didn't work so I dried writing all of rows for one band
before writing the next. Am I way off on this? How should I be doing
this?

 

Thanks in advance,

 

Brian Marchand

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040114/3020ff0d/attachment.html
From dron at ak4719.spb.edu  Wed Jan 14 16:17:03 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Creating a color geotiff
In-Reply-To: <B3CB5AFD4126584AB4CF3DD45B267A530A8044@thorin.sed.ara.com>
References: <B3CB5AFD4126584AB4CF3DD45B267A530A8044@thorin.sed.ara.com>
Message-ID: <20040114211703.GD2058@ak4719.spb.edu>

On Wed, Jan 14, 2004 at 03:45:08PM -0500, Brian Marchand wrote:
> When I use the "create" function does the type need to match the type
> that I use for the RasterIO function for a band? In this case both are
> set to GDT_Byte. 

As Ed said the problem is in the your viewer, which can't properly
interpret your files. But your files also differs from the "true" RGB
ones. The files created with GDAL has Photometric Interpretation
"min-is-black" but "true" RGB file should set that tag as "RGB Image".
It is not possible to set that value using GDAL because it is software
to work with the complex multi band TIFFs, not only the simple one band
grayscale images or three band RGB ones.

On other hand it is possible to implement the option flag for the
Create() function to explicitly set the Photometric tag value, if it
is really needed.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From ed at topozone.com  Wed Jan 14 16:37:57 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Creating a color geotiff
Message-ID: <13858AA1A74F30419F319ACB66A9D12203B090@mercator.topozone.com>

Brian -
 
You can call Microsoft and volunteer to fix bugs for them <g>!
 
When I encounter the same problem (and I do) I simply educate users on
an appropriate viewer choice.  In my case, I have users who actually
neither want nor need 24-bit images, but download them because they
think they'll look better than 8-bit images.  Since the data in this
case is USGS topographic maps with 13 colors on them, 8-bit images are
just fine.
 
I believe the problem is with multi-plane images.  Check the "Planar
configuration:" from tiffinfo - the problems come up in documents with
"separate image planes" (3 8-bit planes) rather than "single image
plane" documents.
 
    - Ed
Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 


  _____  

From: Brian Marchand [mailto:bmarchand@ara.com] 
Sent: Wednesday, January 14, 2004 4:13 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Creating a color geotiff



Ed,

 

You are absolutely right. I read it using my GDAL based application and
the images look fine. My use for these images is mostly by my GDAL based
application, so in that sense it would be ok. However, users of this
application may do what I did so I'd like to figure out what's wrong so
the images can be viewed by the windows viewer too. I can read another
color geotiff (not created by me) with that viewer. That file appears to
be a 24 bit TIFF because it has 3 RGB bands of type Byte. 

 

Brian

 

-----Original Message-----
From: Ed McNierney [mailto:ed@topozone.com] 
Sent: Wednesday, January 14, 2004 3:54 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Creating a color geotiff

 

Brian -

 

Yes, that's the one I'm talking about; in a prior life I was involved in
creating it!  It was intended as a fax viewer, and does not properly
handle many 24-bit TIFFs.  They produce exactly the symptom you
describe.

 

It sounds like your TIFF is correct - if you have Adobe Photoshop
available, that's a much more reliable color TIFF viewer, and I'll bet
the image looks fine in it.  However, it's worth asking what you intend
to do with these images, since they need to be readable by whatever the
target reader is.

 

    - Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

 

 

 

  _____  

From: Brian Marchand [mailto:bmarchand@ara.com] 
Sent: Wednesday, January 14, 2004 3:45 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Creating a color geotiff

Ed,

 

I was using a windows viewer by Kodak. With this viewer I was able to
view other color geotiff files successfully. The image appeared to
repeat itself (in black and white) with stripes of black interleaved.

 

When I use the "create" function does the type need to match the type
that I use for the RasterIO function for a band? In this case both are
set to GDT_Byte. 

 

For instance I create the data set with;

 

GDALDataset* poDstDS = poDriver->Create(destFile, sourceGrid.GetCols(),
sourceGrid.GetRows(), 3, GDT_Byte, NULL);

 

And write bands with

 

poBandR->RasterIO( GF_Write, 0, row, nXSize, 1, scanline, nXSize, 1,
GDT_Byte, 0, 0 );

 

where scanline is a char buffer of size nXSize. Or should I be using
something like GDT_Int32 for the data set type?

 

Brian

 

 

-----Original Message-----
From: Ed McNierney [mailto:ed@topozone.com] 
Sent: Wednesday, January 14, 2004 3:21 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Creating a color geotiff

 

Brian -

 

How did you conclude it was "garbage"?  There are quite a few programs
(such as the Windows "Image and Fax Viewer") that don't read them
correctly, or that fail to read certain data organization/formats.

 

    - Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

 

  _____  

From: Brian Marchand [mailto:bmarchand@ara.com] 
Sent: Wednesday, January 14, 2004 3:10 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Creating a color geotiff

Hello,

 

I'm trying to create geotiff files for the first time and I was
successful in creating a black and white geotiff. So I moved on to
creating a color one. I have a grid of RGB values so I created a data
set with 3 bands of type GDT_Byte.  I used RasterIO to write out a row
at a time. The result was garbage. 

 

Is there a specific order to writing out bands? I first tried writing a
row of red band, then a row of the green band, then the row of the blue
band. This didn't work so I dried writing all of rows for one band
before writing the next. Am I way off on this? How should I be doing
this?

 

Thanks in advance,

 

Brian Marchand

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040114/4aa6ff2d/attachment.html
From jgallagher at gso.uri.edu  Wed Jan 14 16:53:52 2004
From: jgallagher at gso.uri.edu (James Gallagher)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Implementing GDALRasterBand::IRasterIO
In-Reply-To: <4005921E.9040400@pobox.com>
References: <1074100875.31729.52.camel@comet.dods.org>
	 <4005921E.9040400@pobox.com>
Message-ID: <1074117232.31729.107.camel@comet.dods.org>

On Wed, 2004-01-14 at 12:01, Frank Warmerdam wrote:
> James Gallagher wrote:
> > Hi,
> > 
> > I would like to add sub-sampling capabilities to the OPeNDAP/GDAL
> > driver. To do this I plan on specializing GDALRasterBand::IRasterIO(). 
> > 
> > First question: is that method the correct place to implement
> > sub-sampling?
> 
> James,
> 
> It depends a bit what you mean by sub-sampling. If you want a client
> application to be able to request a sub-area at full resolution and
> the driver would be able to fetch just the subarea

That's part of what I mean (the most important part). I can read reduced
resolution rasters over the net, but if a caller asks for the same
raster at higher resolution I'll have to read the whole thing unless I
write more code.

> then overriding
> IRasterIO() would be one approach.  Another would be to pretend that
> the data is tiled, and just implement the IBlockRead() method.

Right now my implementation of IReadBlock() can only read the whole
raster. That is, in Open() I set the block size to the raster size.
There might be a better size like 1024^2 blocks, but it's so dependent
on the connection's bandwidth that you'd really want to calculate on a
per connection basis. I think that's a bit much for the first version...

> If you want to offer an efficient way to accessed reduced resolution
> images, then you could produce pseudo-overview layers.
> 
> However, given that for the OPeNDAP driver you want alot of control
> over how many individual requests actually go to the remote server,
> I would say overriding IRasterIO() makes sense.

OK. That's what I'll do first.

> Be aware that:
>   o applications normally call RasterIO(), so you will now very rarely
>     get block accesses - however, it can still happen.  For instance, I
>     think the min/max computation goes through the block API.

OK. I also noticed that GDAL's caching uses it too.

>   o It is very common for applications to make many small RasterIO()
>     calls, often for one scanline at a time.  I often try to recognise
>     the scanline request case, and pre-read a bunch of scanlines at once
>     and cache them.

Where would I look to find out more about GDAL's data caching system?

> > Second question: I noticed that the OGDI driver implemented only the
> > GDALRasterBand::IRasterIO method while the ECW driver implemented it's
> > own version of both that and GDALDataset:IRasterIO. What are the
> > implications of specializing the second method?
> 
> You would implement a custom GDALDataset::IRasterIO() if you want a more
> efficient access to multi-band datasets as a single request.  For instance,
> ECW implements GDALDataset::IRasterIO() because it is much cheaper to pass
> one request on to the ECW API for all the bands of an image at once,
> instead of requesting them one at a time.

OK. Sounds like I should look into this a bit once I get the basic
access (IRasterIO) working.

> By the way, one of the applications that we want the GDAL/OPeNDAP driver to
> be good with is MapServer.  MapServer currently always makes one big
> RasterIO() request for whatever it needs for each band being read.  Eventually
> I hope to change this to utilize the GDALDataset::RasterIO() entry point for
> greater efficiency where that is specialized.  So, overriding
> GDALRasterBand::IRasterIO() or GDALDataset::IRasterIO() will give a big win
> for MapServer.

Sounds great.

> In fact, you might consider just overriding the GDALDataaset::IRasterIO(), and
> doing an implementation of GDALRasterBand::IRasterIO() that calls the dataset
> level one with a single band requested.  That would set you up optimally for
> future improvements in MapServer.

OK. I think I see how this would be done. DODSDataset::IRasterIO() would
be in charge of actually reading the data (maybe using GDAL's caching
sub-system) and DODSRasterBand::IRasterIO() would make calls to it. In
the default implementation it's the other way around (Dataset call
RasterBand).

> Applications like OpenEV are going to make lots of "tile by tile" RasterIO()
> requests to GDAL.  This would presumably turn into a remote request for each
> tile which is sensible, but will add a real latency drag into OpenEV renders.
> 
> Batch applications are usually scanline based, via RasterIO(), and as mentioned
> before it would a wise idea to recognise this case, and force some sort of
> chunking.
> 
> One final note, when you implement IRasterIO() you avoid data going through
> the GDAL cache.  That is good if you are effectively caching things yourself
> somehow, but can completely hammer you in some situations if you are not.

Well the cache I implemented is a basic HTTP/1.1 cache. It doesn't yet
know about the stuff inside a data object. So it's not a very good cache
for data. I think the GDAL cache is going to be important.

Thanks for the info,

James
> 
> Best regards,
-- 
__________________________________________________________________________
James Gallagher		         The Distributed Oceanographic Data System
jgallagher@gso.uri.edu               http://unidata.ucar.edu/packages/dods
Voice/Fax: 406.723.8663


From warmerdam at pobox.com  Wed Jan 14 18:16:47 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Creating a color geotiff
In-Reply-To: <20040114211703.GD2058@ak4719.spb.edu>
References: <B3CB5AFD4126584AB4CF3DD45B267A530A8044@thorin.sed.ara.com> <20040114211703.GD2058@ak4719.spb.edu>
Message-ID: <4005CDDF.1000703@pobox.com>

Andrey Kiselev wrote:
> On Wed, Jan 14, 2004 at 03:45:08PM -0500, Brian Marchand wrote:
> 
>>When I use the "create" function does the type need to match the type
>>that I use for the RasterIO function for a band? In this case both are
>>set to GDT_Byte. 
> 
> 
> As Ed said the problem is in the your viewer, which can't properly
> interpret your files. But your files also differs from the "true" RGB
> ones. The files created with GDAL has Photometric Interpretation
> "min-is-black" but "true" RGB file should set that tag as "RGB Image".
> It is not possible to set that value using GDAL because it is software
> to work with the complex multi band TIFFs, not only the simple one band
> grayscale images or three band RGB ones.
> 
> On other hand it is possible to implement the option flag for the
> Create() function to explicitly set the Photometric tag value, if it
> is really needed.

Folks,

GDAL is supposed to produce TIFF files with a photometric interpretation of
RGB if the band type is byte, and the number of bands is 3 or 4.  If this
isn't the case, let me know so I can fix it.  As Andrey notes, there are
situations where GDAL crates MINISBLACK files, even if they are 3 bands.
Basically if the band type is anything but byte.

Ideally we should add creation options to control the photometric interpretation
explicitly.  If you need it we can do that.

Best regards,

---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From pushkar at GRI.MsState.Edu  Wed Jan 14 18:29:16 2004
From: pushkar at GRI.MsState.Edu (Pushkar Pradhan)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Creating a color geotiff
In-Reply-To: <4005CDDF.1000703@pobox.com>
Message-ID: <MJEBIBGMCDKIGEHPDECCMEGBCGAA.pushkar@erc.msstate.edu>

> GDAL is supposed to produce TIFF files with a photometric
> interpretation of
> RGB if the band type is byte, and the number of bands is 3 or 4.  If this
> isn't the case, let me know so I can fix it.  As Andrey notes, there are
> situations where GDAL crates MINISBLACK files, even if they are 3 bands.
> Basically if the band type is anything but byte.
>
> Ideally we should add creation options to control the photometric
> interpretation
> explicitly.  If you need it we can do that.
Frank,
I think I will need these options, I will be outputting RGB->IHS images, or
performing wavelet transforms on images which will output 4 bands and
floating point data, etc.
I'm still not sure how MINISBLACK vs. PHOTOMETRIC_RGB affects my code.
Thanks,
Pushkar


From warmerdam at pobox.com  Wed Jan 14 21:43:57 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Creating a color geotiff
In-Reply-To: <MJEBIBGMCDKIGEHPDECCMEGBCGAA.pushkar@erc.msstate.edu>
References: <MJEBIBGMCDKIGEHPDECCMEGBCGAA.pushkar@erc.msstate.edu>
Message-ID: <4005FE6D.6010601@pobox.com>

Pushkar Pradhan wrote:
>>GDAL is supposed to produce TIFF files with a photometric
>>interpretation of
>>RGB if the band type is byte, and the number of bands is 3 or 4.  If this
>>isn't the case, let me know so I can fix it.  As Andrey notes, there are
>>situations where GDAL crates MINISBLACK files, even if they are 3 bands.
>>Basically if the band type is anything but byte.
>>
>>Ideally we should add creation options to control the photometric
>>interpretation
>>explicitly.  If you need it we can do that.
> 
> Frank,
> I think I will need these options, I will be outputting RGB->IHS images, or
> performing wavelet transforms on images which will output 4 bands and
> floating point data, etc.
> I'm still not sure how MINISBLACK vs. PHOTOMETRIC_RGB affects my code.
> Thanks,
> Pushkar

OK ... Andrey could you add a photometric interpretation option to the GDAL
GeoTIFF writing code?

Thanks,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From pushkar at GRI.MsState.Edu  Thu Jan 15 00:02:38 2004
From: pushkar at GRI.MsState.Edu (Pushkar Pradhan)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] how to write block by block to file
Message-ID: <MJEBIBGMCDKIGEHPDECCGEGDCGAA.pushkar@erc.msstate.edu>

I would like to do a block by block read from one file, process the buffer
and write it to output file. However, my code fails with seg. fault, at the
end of this email is my code.
The offending line is poDstDS->poDriver->Create(...);

I'm not using CreateCopy at this moment because I don't want to do a plain
copy. Can someone tell me the correct way to do this? Thanks,

  poDataset = (GDALDataset *) GDALOpen(inFile, GA_ReadOnly);

  imgXSize = poDataset->GetRasterXSize();
  imgYSize = poDataset->GetRasterYSize();
  numBands = poDataset->GetRasterCount();

  poBand = poDataset->GetRasterBand(dwtBand);
  poBand->GetBlockSize(&blockXSize, &blockYSize);

  pData = (float *) CPLMalloc(SZFLOAT*blockXSize*blockYSize);

  poDstDS = poDriver->Create(dwtFile, imgXSize, imgYSize, 1, GDT_Byte,
NULL);

  poBand2 = poDstDS->GetRasterBand(dwtBand);

  for(row = 0; row < imgYSize; row += blockYSize) {
    for(col = 0; col < imgXSize; col += blockXSize) {
      rc = poBand->RasterIO(GF_Read, col, row, blockXSize, blockYSize,
                            pData, blockXSize, blockYSize, GDT_Float32, 0,
0);

	/* I will be putting code here to manipulate pData */

      rc = poBand2->RasterIO(GF_Write, col, row, blockXSize, blockYSize,
                            pData, blockXSize, blockYSize, GDT_Float32, 0,
0);
    }
  }

  GDALClose(poDataset);
  GDALClose(poDstDS);

Pushkar



From warmerdam at pobox.com  Thu Jan 15 00:58:25 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] how to write block by block to file
In-Reply-To: <MJEBIBGMCDKIGEHPDECCGEGDCGAA.pushkar@erc.msstate.edu>
References: <MJEBIBGMCDKIGEHPDECCGEGDCGAA.pushkar@erc.msstate.edu>
Message-ID: <40062C01.1070105@pobox.com>

Pushkar Pradhan wrote:
> I would like to do a block by block read from one file, process the buffer
> and write it to output file. However, my code fails with seg. fault, at the
> end of this email is my code.
> The offending line is poDstDS->poDriver->Create(...);
> 
> I'm not using CreateCopy at this moment because I don't want to do a plain
> copy. Can someone tell me the correct way to do this? Thanks,
> 
>   poDataset = (GDALDataset *) GDALOpen(inFile, GA_ReadOnly);
> 
>   imgXSize = poDataset->GetRasterXSize();
>   imgYSize = poDataset->GetRasterYSize();
>   numBands = poDataset->GetRasterCount();
> 
>   poBand = poDataset->GetRasterBand(dwtBand);
>   poBand->GetBlockSize(&blockXSize, &blockYSize);
> 
>   pData = (float *) CPLMalloc(SZFLOAT*blockXSize*blockYSize);
> 
>   poDstDS = poDriver->Create(dwtFile, imgXSize, imgYSize, 1, GDT_Byte,
> NULL);
> 
>   poBand2 = poDstDS->GetRasterBand(dwtBand);
> 
>   for(row = 0; row < imgYSize; row += blockYSize) {
>     for(col = 0; col < imgXSize; col += blockXSize) {
>       rc = poBand->RasterIO(GF_Read, col, row, blockXSize, blockYSize,
>                             pData, blockXSize, blockYSize, GDT_Float32, 0,
> 0);
> 
> 	/* I will be putting code here to manipulate pData */
> 
>       rc = poBand2->RasterIO(GF_Write, col, row, blockXSize, blockYSize,
>                             pData, blockXSize, blockYSize, GDT_Float32, 0,
> 0);

Pushkar,

Well, it is hard to be sure why it is seg faulting.  I would suggest
running it in the debugger to at least determine where it faults!

However, your above code is likely to fail on partial right side, or
bottom edge tiles/blocks if the file is actually tiled, rather than
being using scanline blocks.

Unless maximum performance is of the utmost importance, I would suggest
simplifying this to read and write the data one scanline at a time.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From pushkar at GRI.MsState.Edu  Thu Jan 15 01:10:01 2004
From: pushkar at GRI.MsState.Edu (Pushkar Pradhan)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] how to write block by block to file
In-Reply-To: <40062C01.1070105@pobox.com>
Message-ID: <MJEBIBGMCDKIGEHPDECCAEGGCGAA.pushkar@erc.msstate.edu>

> Well, it is hard to be sure why it is seg faulting.  I would suggest
> running it in the debugger to at least determine where it faults!
Sorry not to tell that, it causes seg fault at this line:
  poDstDS = poDriver->Create(dwtFile, imgXSize, imgYSize, 1, GDT_Float32,
  NULL);

> However, your above code is likely to fail on partial right side, or
> bottom edge tiles/blocks if the file is actually tiled, rather than
> being using scanline blocks.
> Unless maximum performance is of the utmost importance, I would suggest
> simplifying this to read and write the data one scanline at a time.
I'm trying to parallelize my algorithms so I think I will try different read
sizes (e.g. tile vs. strips).
Doesn't GDAL handle it when you reach the right/bottom boundaries by
returning only valid data, I think libtiff does something like this, because
when I was using libtiff I used similar code.

Pushkar


From warmerdam at pobox.com  Thu Jan 15 01:18:46 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] how to write block by block to file
In-Reply-To: <MJEBIBGMCDKIGEHPDECCAEGGCGAA.pushkar@erc.msstate.edu>
References: <MJEBIBGMCDKIGEHPDECCAEGGCGAA.pushkar@erc.msstate.edu>
Message-ID: <400630C6.7010001@pobox.com>

Pushkar Pradhan wrote:
>>Well, it is hard to be sure why it is seg faulting.  I would suggest
>>running it in the debugger to at least determine where it faults!
> 
> Sorry not to tell that, it causes seg fault at this line:
>   poDstDS = poDriver->Create(dwtFile, imgXSize, imgYSize, 1, GDT_Float32,
>   NULL);

Pushkar,

Now that I review your earlier email, I see you did state where it crashed.
What is poDriver?  Are you sure it isn't NULL?  dwtFile is a proper filename?
Nothing to odd about imgXSize or imgYSize?  Assuming that poDriver is a
driver supporting the create call (such as GeoTIFF) things should be fine.

>>However, your above code is likely to fail on partial right side, or
>>bottom edge tiles/blocks if the file is actually tiled, rather than
>>being using scanline blocks.
>>Unless maximum performance is of the utmost importance, I would suggest
>>simplifying this to read and write the data one scanline at a time.
> 
> I'm trying to parallelize my algorithms so I think I will try different read
> sizes (e.g. tile vs. strips).
> Doesn't GDAL handle it when you reach the right/bottom boundaries by
> returning only valid data, I think libtiff does something like this, because
> when I was using libtiff I used similar code.

GDAL's RasterIO() calls do not in general allow you to read or write windows
that fall off the edges of the datasource.  The lower level block io API
has no problem with edge tiles of course.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From pushkar at GRI.MsState.Edu  Thu Jan 15 01:41:10 2004
From: pushkar at GRI.MsState.Edu (Pushkar Pradhan)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] how to write block by block to file
In-Reply-To: <400630C6.7010001@pobox.com>
Message-ID: <MJEBIBGMCDKIGEHPDECCIEGGCGAA.pushkar@erc.msstate.edu>

> What is poDriver?  Are you sure it isn't NULL?  dwtFile is a
> proper filename?
> Nothing to odd about imgXSize or imgYSize?  Assuming that poDriver is a
> driver supporting the create call (such as GeoTIFF) things should be fine.
Oops, poDriver was NULL, so now I do get the driver name but getting these
syntax errors:
Redstone[1316] pushkar$ g++ -g -o main
dwt-serial.cpp -Ierrs/ -Imisc/ -Iip/ -I../gdal-1.1.9/include/
../gdal-1.1.9/lib/libgdal.1.1.so
dwt-serial.cpp: In function `int main(int, char **)':
dwt-serial.cpp:61: request for member `GetDriverByName' in
`GetGDALDriverManager', which is of non-aggregate type `GDALDriverManager *
()()'

Here's the code:
  poDriver = (GDALDriver *)GetGDALDriverManager->GetDriverByName(pszFormat);
  if(poDriver == NULL)
    exit(EXIT_FAILURE);

  poDstDS = poDriver->Create(dwtFile, imgXSize, imgYSize, 1, GDT_Float32,
NULL);
  if(poDstDS == NULL)
    exit(EXIT_FAILURE);

Yes I checked through gdb img x size, ysize etc. are okay. Can you tell why
I'm getting those errors, I followed the documentation?
Pushkar


From warmerdam at pobox.com  Thu Jan 15 01:49:35 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] how to write block by block to file
In-Reply-To: <MJEBIBGMCDKIGEHPDECCIEGGCGAA.pushkar@erc.msstate.edu>
References: <MJEBIBGMCDKIGEHPDECCIEGGCGAA.pushkar@erc.msstate.edu>
Message-ID: <400637FF.1000203@pobox.com>

Pushkar Pradhan wrote:
>>What is poDriver?  Are you sure it isn't NULL?  dwtFile is a
>>proper filename?
>>Nothing to odd about imgXSize or imgYSize?  Assuming that poDriver is a
>>driver supporting the create call (such as GeoTIFF) things should be fine.
> 
> Oops, poDriver was NULL, so now I do get the driver name but getting these
> syntax errors:
> Redstone[1316] pushkar$ g++ -g -o main
> dwt-serial.cpp -Ierrs/ -Imisc/ -Iip/ -I../gdal-1.1.9/include/
> ../gdal-1.1.9/lib/libgdal.1.1.so
> dwt-serial.cpp: In function `int main(int, char **)':
> dwt-serial.cpp:61: request for member `GetDriverByName' in
> `GetGDALDriverManager', which is of non-aggregate type `GDALDriverManager *
> ()()'
> 
> Here's the code:
>   poDriver = (GDALDriver *)GetGDALDriverManager->GetDriverByName(pszFormat);

You need:

     poDriver = (GDALDriver *) GetGDALDriverManager()->GetDriverByName(pszFormat);

Good luck,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Thu Jan 15 05:19:08 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Creating a color geotiff
In-Reply-To: <4005FE6D.6010601@pobox.com>
References: <MJEBIBGMCDKIGEHPDECCMEGBCGAA.pushkar@erc.msstate.edu> <4005FE6D.6010601@pobox.com>
Message-ID: <20040115101908.GA24667@ak4719.spb.edu>

On Wed, Jan 14, 2004 at 09:43:57PM -0500, Frank Warmerdam wrote:
> OK ... Andrey could you add a photometric interpretation option to the
> GDAL GeoTIFF writing code?

Ok, done. Anyone interested in that option can proceed to test.

					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From jgallagher at gso.uri.edu  Thu Jan 15 17:53:41 2004
From: jgallagher at gso.uri.edu (James Gallagher)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Implementing GDALRasterBand::IRasterIO
In-Reply-To: <4005921E.9040400@pobox.com>
References: <1074100875.31729.52.camel@comet.dods.org>
	 <4005921E.9040400@pobox.com>
Message-ID: <1074207221.31729.338.camel@comet.dods.org>

Frank, et al.,

I'm busy implementing IRasterIO() and I'd like to know the best way to
test my (at this point partial) implementation. I have a little test
program that does:

    int nXSize = poBand->GetXSize();
    int nYSize = poBand->GetYSize();
 
    float *pafData = (float *) CPLMalloc(sizeof(float)*nXSize*nYSize);
    poBand->RasterIO(GF_Read, 0, 0, nXSize, nYSize,
                     pafData, nXSize, nYSize, GDT_Float32,
                     0, 0);
 
But I was wondering if one of the programs in apps was more of an
'official' test program for a new driver.

A few misc. questions: Are band numbers indexed using a ones-based
scheme? How about the n{X,Y}Offset parameters? From the docs it looks
like ban numbers *do* use ones-based indexing, but I want to be sure.
Same for the offsets.

Thanks,
James

On Wed, 2004-01-14 at 12:01, Frank Warmerdam wrote:
> James Gallagher wrote:
> > Hi,
> > 
> > I would like to add sub-sampling capabilities to the OPeNDAP/GDAL
> > driver. To do this I plan on specializing GDALRasterBand::IRasterIO(). 
> > 
> > First question: is that method the correct place to implement
> > sub-sampling?
> 
> James,
> 
> It depends a bit what you mean by sub-sampling. If you want a client
> application to be able to request a sub-area at full resolution and
> the driver would be able to fetch just the subarea then overriding
> IRasterIO() would be one approach.  Another would be to pretend that
> the data is tiled, and just implement the IBlockRead() method.
> 
> If you want to offer an efficient way to accessed reduced resolution
> images, then you could produce pseudo-overview layers.
> 
> However, given that for the OPeNDAP driver you want alot of control
> over how many individual requests actually go to the remote server,
> I would say overriding IRasterIO() makes sense.
> 
> Be aware that:
>   o applications normally call RasterIO(), so you will now very rarely
>     get block accesses - however, it can still happen.  For instance, I
>     think the min/max computation goes through the block API.
> 
>   o It is very common for applications to make many small RasterIO()
>     calls, often for one scanline at a time.  I often try to recognise
>     the scanline request case, and pre-read a bunch of scanlines at once
>     and cache them.
> 
> > Second question: I noticed that the OGDI driver implemented only the
> > GDALRasterBand::IRasterIO method while the ECW driver implemented it's
> > own version of both that and GDALDataset:IRasterIO. What are the
> > implications of specializing the second method?
> 
> You would implement a custom GDALDataset::IRasterIO() if you want a more
> efficient access to multi-band datasets as a single request.  For instance,
> ECW implements GDALDataset::IRasterIO() because it is much cheaper to pass
> one request on to the ECW API for all the bands of an image at once,
> instead of requesting them one at a time.
> 
> By the way, one of the applications that we want the GDAL/OPeNDAP driver to
> be good with is MapServer.  MapServer currently always makes one big
> RasterIO() request for whatever it needs for each band being read.  Eventually
> I hope to change this to utilize the GDALDataset::RasterIO() entry point for
> greater efficiency where that is specialized.  So, overriding
> GDALRasterBand::IRasterIO() or GDALDataset::IRasterIO() will give a big win
> for MapServer.
> 
> In fact, you might consider just overriding the GDALDataaset::IRasterIO(), and
> doing an implementation of GDALRasterBand::IRasterIO() that calls the dataset
> level one with a single band requested.  That would set you up optimally for
> future improvements in MapServer.
> 
> Applications like OpenEV are going to make lots of "tile by tile" RasterIO()
> requests to GDAL.  This would presumably turn into a remote request for each
> tile which is sensible, but will add a real latency drag into OpenEV renders.
> 
> Batch applications are usually scanline based, via RasterIO(), and as mentioned
> before it would a wise idea to recognise this case, and force some sort of
> chunking.
> 
> One final note, when you implement IRasterIO() you avoid data going through
> the GDAL cache.  That is good if you are effectively caching things yourself
> somehow, but can completely hammer you in some situations if you are not.
> 
> Best regards,
-- 
__________________________________________________________________________
James Gallagher		         The Distributed Oceanographic Data System
jgallagher@gso.uri.edu               http://unidata.ucar.edu/packages/dods
Voice/Fax: 406.723.8663


From pushkar at GRI.MsState.Edu  Thu Jan 15 18:02:23 2004
From: pushkar at GRI.MsState.Edu (Pushkar Pradhan)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Implementing GDALRasterBand::IRasterIO
In-Reply-To: <1074207221.31729.338.camel@comet.dods.org>
Message-ID: <MJEBIBGMCDKIGEHPDECCAEHACGAA.pushkar@erc.msstate.edu>

>     int nXSize = poBand->GetXSize();
>     int nYSize = poBand->GetYSize();
>  
>     float *pafData = (float *) CPLMalloc(sizeof(float)*nXSize*nYSize);
>     poBand->RasterIO(GF_Read, 0, 0, nXSize, nYSize,
>                      pafData, nXSize, nYSize, GDT_Float32,
>                      0, 0);
> A few misc. questions: Are band numbers indexed using a ones-based
> scheme? How about the n{X,Y}Offset parameters? From the docs it looks
> like ban numbers *do* use ones-based indexing, but I want to be sure.
> Same for the offsets.
From warmerdam at pobox.com  Thu Jan 15 18:09:22 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Implementing GDALRasterBand::IRasterIO
In-Reply-To: <1074207221.31729.338.camel@comet.dods.org>
References: <1074100875.31729.52.camel@comet.dods.org>	 <4005921E.9040400@pobox.com> <1074207221.31729.338.camel@comet.dods.org>
Message-ID: <40071DA2.5050302@pobox.com>

James Gallagher wrote:
> Frank, et al.,
> 
> I'm busy implementing IRasterIO() and I'd like to know the best way to
> test my (at this point partial) implementation. I have a little test
> program that does:
> 
>     int nXSize = poBand->GetXSize();
>     int nYSize = poBand->GetYSize();
>  
>     float *pafData = (float *) CPLMalloc(sizeof(float)*nXSize*nYSize);
>     poBand->RasterIO(GF_Read, 0, 0, nXSize, nYSize,
>                      pafData, nXSize, nYSize, GDT_Float32,
>                      0, 0);
>  
> But I was wondering if one of the programs in apps was more of an
> 'official' test program for a new driver.

James,

There is no real equivelent to ogrsf_frmts for GDAL drivers.  There
are some standard tests that can be applied against different drivers
from the python level in the gdalautotest tree.  For example, see
gdalautotest/gcore/hfa_read.py as an example.

However, it might be worthwhile to have something like this more
generally.  I will see if Andrey could spend some time on it.

> A few misc. questions: Are band numbers indexed using a ones-based
> scheme? How about the n{X,Y}Offset parameters? From the docs it looks
> like ban numbers *do* use ones-based indexing, but I want to be sure.
> Same for the offsets.

Bands are 1 based.

X/Y offsets are zero based.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From TMitchell at lignum.com  Thu Jan 15 19:48:23 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Help with seg fault
Message-ID: <OF3FE40E2D.028C3C68-ON88256E1D.00043557-88256E1D.00046DEC@lignum.com>




I'm running GDAL from CVS on Cygwin and am getting a core dump when using
ogrinfo.
Does this info mean anything to you:

$ ogrinfo ifpa
Had to open data source read-only.
INFO: Open of `ifpa'
using driver `AVCBin' successful.
Exception: STATUS_ACCESS_VIOLATION at eip=00401508
eax=00000004 ebx=102A0AD8 ecx=00000000 edx=00000000 esi=00000000
edi=00000000
ebp=0022FEF0 esp=0022FE50 program=C:\cygwin\usr\local\bin\ogrinfo.exe
cs=001B ds=0023 es=0023 fs=0038 gs=0000 ss=0023
Stack trace:
Frame     Function  Args
0022FEF0  00401508  (00000002, 61600B34, 102A0330, 0022FF24)
0022FF40  61005018  (610CFEE0, FFFFFFFE, 000003D4, 610CFE04)
0022FF90  610052ED  (00000000, 00000000, FFFFFFFF, 8043138F)
0022FFB0  00405E02  (00401330, 037F0009, 0022FFF0, 7C5987E7)
0022FFC0  0040103C  (00000000, 00000000, 7FFDF000, 00000000)
0022FFF0  7C5987E7  (00401000, 00000000, 000000C8, 00000100)
End of stack traceSegmentation fault (core dumped)


From pushkar at GRI.MsState.Edu  Fri Jan 16 00:16:52 2004
From: pushkar at GRI.MsState.Edu (Pushkar Pradhan)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] how to set block size
Message-ID: <MJEBIBGMCDKIGEHPDECCOEHECGAA.pushkar@erc.msstate.edu>

Hi,
I would like to set the block size of any TIFF image that I'm writing. I'm
not trying any fancy stuff, I just want to set it to the same block size as
my input image.
I couldn't find any setblocksize methods?
Thanks,
Pushkar



From dron at ak4719.spb.edu  Fri Jan 16 01:20:50 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] how to set block size
In-Reply-To: <MJEBIBGMCDKIGEHPDECCOEHECGAA.pushkar@erc.msstate.edu>
References: <MJEBIBGMCDKIGEHPDECCOEHECGAA.pushkar@erc.msstate.edu>
Message-ID: <20040116062050.GA1687@ak4719.spb.edu>

On Thu, Jan 15, 2004 at 11:16:52PM -0600, Pushkar Pradhan wrote:
> I would like to set the block size of any TIFF image that I'm writing.
> I'm not trying any fancy stuff, I just want to set it to the same
> block size as my input image.
> I couldn't find any setblocksize methods?

Pssibility to set block sizes depends from the choosen driver. For TIFF
you can select stripped or tiled scheme and ajust size of strips or
tiles with the BLOCKXSIZE and BLOCKYSIZE creation options.

It will be something like:

	char **papszOptions = NULL;

	papszOptions = CSLSetNameValue(papszOptions, "TILED", "YES");
	papszOptions = CSLSetNameValue(papszOptions, "BLOCKXSIZE", "256");

	Create(pszName, nXSize, nYSize, nBands, eType, papszOptions);

	CSLDestroy(papszOptions);

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From Horst.Duester at bd.so.ch  Fri Jan 16 02:19:31 2004
From: Horst.Duester at bd.so.ch (=?ISO-8859-1?Q?D=FCster_Horst?=)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] ERROR import Shape to PostgreSQL
Message-ID: <5B025B1F39D6D4119F5700508BEEEC66F9493A@srsofaioi4546.ktso.ch>

Hallo
 
Today I made an upgrade of gdal/ogr from 1.1.7.2 to cvs-040114. GDAL-1.1.7.2
works very stable but I need to convert POLYGON to MULTIPOLYGON. Hence I
made the upgrade. But now I'm not able to convert ESRI Shape to PostgreSQL
in all cases. So some shapes which could be imported by the former Version
of GDAL without problems  breakes down the import process with the following
error message:
 
ERROR 1: INSERT command for new feature failed.
ERROR:  couldnt parse objects in GEOMETRY

ERROR 1: Terminating translation prematurely after failed
translation of layer lieg_lieg_geom
 
 
I start ogr2ogr with the following command string:
 
ogr2ogr -f postgresql PG:dbname=hdus lieg_lieg_geom.shp -lco overwrite=yes
-lco launder=yes -lco precision=no -nlt MULTIPOLYGON -nln liegen
 
To reproduce this error I can send the mentioned shape.
 
It would be great to solve this probem.
 
Best regards
 
Dr. Horst D?ster 
GIS-Koordinator
 
Amt f?r Geoinformation
Abteilung SO!GIS Koordination
Werkhofstr. 65
4509 Solothurn 

Tel.: 032 627 25 32 
Fax: 032 627 22 14

horst.duester@bd.so.ch <mailto:horst.duester@bd.so.ch> 
www.sogis.so.ch <http://www.sogis.so.ch/> 


From warmerdam at pobox.com  Fri Jan 16 09:29:59 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] ERROR import Shape to PostgreSQL
In-Reply-To: <5B025B1F39D6D4119F5700508BEEEC66F9493A@srsofaioi4546.ktso.ch>
References: <5B025B1F39D6D4119F5700508BEEEC66F9493A@srsofaioi4546.ktso.ch>
Message-ID: <4007F567.3040908@pobox.com>

D?ster Horst wrote:
> Hallo
>  
> Today I made an upgrade of gdal/ogr from 1.1.7.2 to cvs-040114. GDAL-1.1.7.2
> works very stable but I need to convert POLYGON to MULTIPOLYGON. Hence I
> made the upgrade. But now I'm not able to convert ESRI Shape to PostgreSQL
> in all cases. So some shapes which could be imported by the former Version
> of GDAL without problems  breakes down the import process with the following
> error message:
>  
> ERROR 1: INSERT command for new feature failed.
> ERROR:  couldnt parse objects in GEOMETRY
> 
> ERROR 1: Terminating translation prematurely after failed
> translation of layer lieg_lieg_geom
>  
>  
> I start ogr2ogr with the following command string:
>  
> ogr2ogr -f postgresql PG:dbname=hdus lieg_lieg_geom.shp -lco overwrite=yes
> -lco launder=yes -lco precision=no -nlt MULTIPOLYGON -nln liegen
>  
> To reproduce this error I can send the mentioned shape.
>  
> It would be great to solve this probem.

Dr. D?ster,

Sorry for not getting back to you on your earlier message ... this issue looks
hard enough that I put it off a bit.  My first thought was that you were
getting multipolygons written to a polygon layer in postgis, but I see that
you selected the type multipolygon.  Ogr2ogr should try and force polygons
to multipolygons as well since you have selected multipolygon output.

I am not sure what is going wrong, so I think I will need the dataset.
I would also like to know what version of postgis you are running in
case that might be a factor.

You might also want to try setting CPL_DEBUG to ON before running ogr2ogr.
I believe this will report all the SQL statements used while loading
PostGIS.  Seeing the last statement might be helpful.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Horst.Duester at bd.so.ch  Fri Jan 16 11:12:28 2004
From: Horst.Duester at bd.so.ch (=?ISO-8859-1?Q?D=FCster_Horst?=)
Date: Wed Nov 21 11:49:01 2007
Subject: AW: [Gdal-dev] ERROR import Shape to PostgreSQL
Message-ID: <5B025B1F39D6D4119F5700508BEEEC66F94943@srsofaioi4546.ktso.ch>

Frank

I got an idea and take a look at the shapes I sent to you with the JUMP QA
Basic Topology Analysis. The polygon where the mentioned ogr2ogr process
breaks is a self intersecting polygon. I seems that ogr2ogr 1.1.7.2 works
fine with this self intersecting features and the latest ogr2ogr not.

Regards
?
Dr. Horst D?ster 
GIS-Koordinator
?
Amt f?r Geoinformation
Abteilung SO!GIS Koordination
Werkhofstr. 65
4509 Solothurn 

Tel.: 032 627 25 32 
Fax: 032 627 22 14

horst.duester@bd.so.ch <mailto:horst.duester@bd.so.ch> 
www.sogis.so.ch <http://www.sogis.so.ch/> 



-----Urspr?ngliche Nachricht-----
Von: Frank Warmerdam [mailto:warmerdam@pobox.com]
Gesendet am: Freitag, 16. Januar 2004 15:30
An: gdal-dev@remotesensing.org
Betreff: Re: [Gdal-dev] ERROR import Shape to PostgreSQL

D?ster Horst wrote:
> Hallo
>  
> Today I made an upgrade of gdal/ogr from 1.1.7.2 to cvs-040114.
GDAL-1.1.7.2
> works very stable but I need to convert POLYGON to MULTIPOLYGON. Hence I
> made the upgrade. But now I'm not able to convert ESRI Shape to PostgreSQL
> in all cases. So some shapes which could be imported by the former Version
> of GDAL without problems  breakes down the import process with the
following
> error message:
>  
> ERROR 1: INSERT command for new feature failed.
> ERROR:  couldnt parse objects in GEOMETRY
> 
> ERROR 1: Terminating translation prematurely after failed
> translation of layer lieg_lieg_geom
>  
>  
> I start ogr2ogr with the following command string:
>  
> ogr2ogr -f postgresql PG:dbname=hdus lieg_lieg_geom.shp -lco overwrite=yes
> -lco launder=yes -lco precision=no -nlt MULTIPOLYGON -nln liegen
>  
> To reproduce this error I can send the mentioned shape.
>  
> It would be great to solve this probem.

Dr. D?ster,

Sorry for not getting back to you on your earlier message ... this issue
looks
hard enough that I put it off a bit.  My first thought was that you were
getting multipolygons written to a polygon layer in postgis, but I see that
you selected the type multipolygon.  Ogr2ogr should try and force polygons
to multipolygons as well since you have selected multipolygon output.

I am not sure what is going wrong, so I think I will need the dataset.
I would also like to know what version of postgis you are running in
case that might be a factor.

You might also want to try setting CPL_DEBUG to ON before running ogr2ogr.
I believe this will report all the SQL statements used while loading
PostGIS.  Seeing the last statement might be helpful.

Best regards,

-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From nsavard at dmsolutions.ca  Fri Jan 16 12:30:21 2004
From: nsavard at dmsolutions.ca (Normand Savard)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Compiling error on Redhat 9 from gdal/ogr cvs source
Message-ID: <40081FAD.5000001@dmsolutions.ca>

Frank,

I trying to compile gdal/ogr from source and I got a compilation error. 
 I checked out the source code from cvs this morning.


My configuration setting is:
./configure --prefix=/opt/mapserver/ --with-ogr 
--with-png=/opt/mapserver/ --with-libz=/opt/mapserver/ 
--with-jpeg=/opt/mapserver/  --with-odbc=/usr/local

I did a "make" and I got the error below.

I checked in the source code and the "VSIStrerror()" is declared in 
"cpl_vsi.h" via an "cpl_conv.h" include.  The function appears in 
"cpl_vsisimple.cpp" file.

The error is:
....
make[2]: Entering directory `/home/src/gdal-cvs/frmts/hfa'
/bin/sh ../../libtool --mode=compile g++ -Wall  -O2  -I/opt/mapserver/ 
-I/opt/mapserv
er//include -I/opt/mapserver/ -I/opt/mapserver//include   -I../../port 
-I../../gcore-I../../ogr -c -o ../o/hfaband.o hfaband.cpp
 g++ -Wall -O2 -I/opt/mapserver/ -I/opt/mapserver//include 
-I/opt/mapserver/ -I/opt/m
apserver//include -I../../port -I../../gcore -I../../ogr -c hfaband.cpp  
-fPIC -DPIC-o ../o/.libs/hfaband.o
hfaband.cpp: In member function `CPLErr HFABand::GetRasterBlock(int, int,
   void*)':
hfaband.cpp:878: `VSIStrerror' undeclared (first use this function)
hfaband.cpp:878: (Each undeclared identifier is reported only once for each
   function it appears in.)
make[2]: *** [../o/hfaband.o] Error 1
make[2]: Leaving directory `/home/src/gdal-cvs/frmts/hfa'
make[1]: *** [hfa-install-obj] Error 2
....


Norm


From warmerdam at pobox.com  Fri Jan 16 12:43:29 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:01 2007
Subject: [Gdal-dev] Compiling error on Redhat 9 from gdal/ogr cvs source
In-Reply-To: <40081FAD.5000001@dmsolutions.ca>
References: <40081FAD.5000001@dmsolutions.ca>
Message-ID: <400822C1.5090709@pobox.com>

Normand Savard wrote:
> Frank,
> 
> I trying to compile gdal/ogr from source and I got a compilation error. 
> I checked out the source code from cvs this morning.
> 
> 
> My configuration setting is:
> ./configure --prefix=/opt/mapserver/ --with-ogr 
> --with-png=/opt/mapserver/ --with-libz=/opt/mapserver/ 
> --with-jpeg=/opt/mapserver/  --with-odbc=/usr/local
> 
> I did a "make" and I got the error below.
> 
> I checked in the source code and the "VSIStrerror()" is declared in 
> "cpl_vsi.h" via an "cpl_conv.h" include.  The function appears in 
> "cpl_vsisimple.cpp" file.
> 
> The error is:
> ....
> make[2]: Entering directory `/home/src/gdal-cvs/frmts/hfa'
> /bin/sh ../../libtool --mode=compile g++ -Wall  -O2  -I/opt/mapserver/ 
> -I/opt/mapserv
> er//include -I/opt/mapserver/ -I/opt/mapserver//include   -I../../port 
> -I../../gcore-I../../ogr -c -o ../o/hfaband.o hfaband.cpp
> g++ -Wall -O2 -I/opt/mapserver/ -I/opt/mapserver//include 
> -I/opt/mapserver/ -I/opt/m
> apserver//include -I../../port -I../../gcore -I../../ogr -c hfaband.cpp  
> -fPIC -DPIC-o ../o/.libs/hfaband.o
> hfaband.cpp: In member function `CPLErr HFABand::GetRasterBlock(int, int,
>   void*)':
> hfaband.cpp:878: `VSIStrerror' undeclared (first use this function)
> hfaband.cpp:878: (Each undeclared identifier is reported only once for each
>   function it appears in.)
> make[2]: *** [../o/hfaband.o] Error 1
> make[2]: Leaving directory `/home/src/gdal-cvs/frmts/hfa'
> make[1]: *** [hfa-install-obj] Error 2
> ....

Normand,

Any chance you have an old cpl_vsi.h sitting around in /opt/mapserver/include
or /opt/mapserver?   If so, try deleting it.

Andrey,  could you review the frmts/hfa GNUmakefile and see if it needs
the include directives reordered?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Jan 16 14:45:16 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: AW: [Gdal-dev] ERROR import Shape to PostgreSQL
In-Reply-To: <5B025B1F39D6D4119F5700508BEEEC66F94943@srsofaioi4546.ktso.ch>
References: <5B025B1F39D6D4119F5700508BEEEC66F94943@srsofaioi4546.ktso.ch>
Message-ID: <40083F4C.4080903@pobox.com>

D?ster Horst wrote:
> Frank
> 
> I got an idea and take a look at the shapes I sent to you with the JUMP QA
> Basic Topology Analysis. The polygon where the mentioned ogr2ogr process
> breaks is a self intersecting polygon. I seems that ogr2ogr 1.1.7.2 works
> fine with this self intersecting features and the latest ogr2ogr not.

Dr. D?ster,

It seems there are a few things going on.

The OGR Shapefile reader now has a bunch of code for recognising multipolygons
and returning them accordingly instead of returning them as polygons where
some inner rings are actually outer rings.  However, the code that works this
out seems to just produce multipolygons with no components when things are
self-intersecting as in your case.

The second problem is that OGRMultiPolygon::exportToWkt() incorrectly
represents this as "MULTIPOLYGON()" instead of "MULTIPOLYGON(EMPTY)".

So I plan to address both issues, first fixing OGR's WKT processor to
support the empty forms.  Second to see if I can make the shapefile reader
at least produce an error, or perhaps return all the rings as a
multipolygon with everything as an outer ring (and a warning).

In the meantime, you can likely construct a attribute query that will
filter this problem polygon out for the transfer.

eg.

ogr2ogr -f postgresql PG:dbname=hdus lieg_lieg_geom.shp -lco overwrite=yes \
  -lco launder=yes -lco precision=no -nlt MULTIPOLYGON -nln liegen \
  -where 'SYS_OBID != 17869'

Lastly, I seem to be having problems with the overwrite support in the postgis
driver.  Something about the relation for the <name>_ogc_fid_seq not being
deleted when layers are deleted.   I'll see what I can do about that too.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From nsavard at dmsolutions.ca  Fri Jan 16 16:26:25 2004
From: nsavard at dmsolutions.ca (Normand Savard)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Compiling error on Redhat 9 from gdal/ogr cvs source
References: <40081FAD.5000001@dmsolutions.ca> <400822C1.5090709@pobox.com>
Message-ID: <40085701.8020908@dmsolutions.ca>

Frank,

I succeed compiling "gdal".  Please forget my previous email.  Thank you 
for your quick and precise answer.

Norm

Frank Warmerdam wrote:

> Normand Savard wrote:
>
>> Frank,
>>
>> I trying to compile gdal/ogr from source and I got a compilation 
>> error. I checked out the source code from cvs this morning.
>>
>>
>> My configuration setting is:
>> ./configure --prefix=/opt/mapserver/ --with-ogr 
>> --with-png=/opt/mapserver/ --with-libz=/opt/mapserver/ 
>> --with-jpeg=/opt/mapserver/  --with-odbc=/usr/local
>>
>> I did a "make" and I got the error below.
>>
>> I checked in the source code and the "VSIStrerror()" is declared in 
>> "cpl_vsi.h" via an "cpl_conv.h" include.  The function appears in 
>> "cpl_vsisimple.cpp" file.
>>
>> The error is:
>> ....
>> make[2]: Entering directory `/home/src/gdal-cvs/frmts/hfa'
>> /bin/sh ../../libtool --mode=compile g++ -Wall  -O2  
>> -I/opt/mapserver/ -I/opt/mapserv
>> er//include -I/opt/mapserver/ -I/opt/mapserver//include   
>> -I../../port -I../../gcore-I../../ogr -c -o ../o/hfaband.o hfaband.cpp
>> g++ -Wall -O2 -I/opt/mapserver/ -I/opt/mapserver//include 
>> -I/opt/mapserver/ -I/opt/m
>> apserver//include -I../../port -I../../gcore -I../../ogr -c 
>> hfaband.cpp  -fPIC -DPIC-o ../o/.libs/hfaband.o
>> hfaband.cpp: In member function `CPLErr HFABand::GetRasterBlock(int, 
>> int,
>>   void*)':
>> hfaband.cpp:878: `VSIStrerror' undeclared (first use this function)
>> hfaband.cpp:878: (Each undeclared identifier is reported only once 
>> for each
>>   function it appears in.)
>> make[2]: *** [../o/hfaband.o] Error 1
>> make[2]: Leaving directory `/home/src/gdal-cvs/frmts/hfa'
>> make[1]: *** [hfa-install-obj] Error 2
>> ....
>
>
> Normand,
>
> Any chance you have an old cpl_vsi.h sitting around in 
> /opt/mapserver/include
> or /opt/mapserver?   If so, try deleting it.
>
> Andrey,  could you review the frmts/hfa GNUmakefile and see if it needs
> the include directives reordered?
>
> Best regards,




From nsavard at dmsolutions.ca  Fri Jan 16 16:10:10 2004
From: nsavard at dmsolutions.ca (Normand Savard)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Compiling error on Redhat 9 from gdal/ogr cvs source
References: <40081FAD.5000001@dmsolutions.ca> <400822C1.5090709@pobox.com>
Message-ID: <40085332.9070000@dmsolutions.ca>

Frank,

Thank you.  You're it was one of the problem.  What files should I 
delete from  "/opt/mapserver/include" directory relative with "gdal"?

Norm

Frank Warmerdam wrote:

> Normand Savard wrote:
>
>> Frank,
>>
>> I trying to compile gdal/ogr from source and I got a compilation 
>> error. I checked out the source code from cvs this morning.
>>
>>
>> My configuration setting is:
>> ./configure --prefix=/opt/mapserver/ --with-ogr 
>> --with-png=/opt/mapserver/ --with-libz=/opt/mapserver/ 
>> --with-jpeg=/opt/mapserver/  --with-odbc=/usr/local
>>
>> I did a "make" and I got the error below.
>>
>> I checked in the source code and the "VSIStrerror()" is declared in 
>> "cpl_vsi.h" via an "cpl_conv.h" include.  The function appears in 
>> "cpl_vsisimple.cpp" file.
>>
>> The error is:
>> ....
>> make[2]: Entering directory `/home/src/gdal-cvs/frmts/hfa'
>> /bin/sh ../../libtool --mode=compile g++ -Wall  -O2  
>> -I/opt/mapserver/ -I/opt/mapserv
>> er//include -I/opt/mapserver/ -I/opt/mapserver//include   
>> -I../../port -I../../gcore-I../../ogr -c -o ../o/hfaband.o hfaband.cpp
>> g++ -Wall -O2 -I/opt/mapserver/ -I/opt/mapserver//include 
>> -I/opt/mapserver/ -I/opt/m
>> apserver//include -I../../port -I../../gcore -I../../ogr -c 
>> hfaband.cpp  -fPIC -DPIC-o ../o/.libs/hfaband.o
>> hfaband.cpp: In member function `CPLErr HFABand::GetRasterBlock(int, 
>> int,
>>   void*)':
>> hfaband.cpp:878: `VSIStrerror' undeclared (first use this function)
>> hfaband.cpp:878: (Each undeclared identifier is reported only once 
>> for each
>>   function it appears in.)
>> make[2]: *** [../o/hfaband.o] Error 1
>> make[2]: Leaving directory `/home/src/gdal-cvs/frmts/hfa'
>> make[1]: *** [hfa-install-obj] Error 2
>> ....
>
>
> Normand,
>
> Any chance you have an old cpl_vsi.h sitting around in 
> /opt/mapserver/include
> or /opt/mapserver?   If so, try deleting it.
>
> Andrey,  could you review the frmts/hfa GNUmakefile and see if it needs
> the include directives reordered?
>
> Best regards,




From warmerdam at pobox.com  Fri Jan 16 17:48:00 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: AW: [Gdal-dev] ERROR import Shape to PostgreSQL
In-Reply-To: <5B025B1F39D6D4119F5700508BEEEC66F94943@srsofaioi4546.ktso.ch>
References: <5B025B1F39D6D4119F5700508BEEEC66F94943@srsofaioi4546.ktso.ch>
Message-ID: <40086A20.1070504@pobox.com>

D?ster Horst wrote:
> Frank
> 
> I got an idea and take a look at the shapes I sent to you with the JUMP QA
> Basic Topology Analysis. The polygon where the mentioned ogr2ogr process
> breaks is a self intersecting polygon. I seems that ogr2ogr 1.1.7.2 works
> fine with this self intersecting features and the latest ogr2ogr not.

Dr. D?ster,

I have committed changes to gdal/ogr/ogrsf_frmts/shape/shape2ogr.cpp that
correct the problem.  It seems that based on the ring direction both rings
of the offending feature were identified as inner, and without an outer
polygon to attach them to they were discarded.  I have modified the code so
that any inner rings that are not successfully associated with a containing
outer ring are promoted to being outer rings.

I am still concerned that the new polygon/multipolygon code actually trusts
the ring directions for initial assumptions about inner/outer status.  I don't
think this is wise since Shapelib (amoung other applications) has been
generating shapefiles for some time without setting winding direction properly.
However, this shouldn't affect your data.

I also added support for the various EMPTY WKT geometry types.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From V.Honzik at sh.cvut.cz  Sat Jan 17 07:25:17 2004
From: V.Honzik at sh.cvut.cz (Vojtech Honzik)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] ogr2ogr Style usage
Message-ID: <Pine.LNX.4.31.0401171321160.2574-100000@Heptium.sh.cvut.cz>

I have probably really simple question - there is parameter -select in ogr
utility program ogr2ogr. I guess how to set this parameter to extract some
of the style information to dbf column in shapefile.
Let say I have this fragment dumped using ogrinfo:
----
OGRFeature(elements):117
  Type (Integer) = 17
  Level (Integer) = 31
  GraphicGroup (Integer) = 0
  ColorIndex (Integer) = 1
  Weight (Integer) = 0
  Style (Integer) = 0
  EntityNum (Integer) = (null)
  MSLink (Integer) = (null)
  Text (String) = Presslova
  Style = LABEL(t:"Presslova",c:#0000ff,s:12g,a:344)
  POINT (-774288.023 -1126770.841)
---

and need to extract some variables from Style

ogr2ogr -skipfailures -f "ESRI Shapefile" -select Type,Level,Style -dsco
SEED=seed2 d.dgn -nln ulice_pop ulice_pop ulice_pop.dgn

I think there has to be some special call to specify an LABEL item to
translate.

Thank you for help

Vojtech Honzik


From warmerdam at pobox.com  Sun Jan 18 00:43:00 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] ogr2ogr Style usage
In-Reply-To: <Pine.LNX.4.31.0401171321160.2574-100000@Heptium.sh.cvut.cz>
References: <Pine.LNX.4.31.0401171321160.2574-100000@Heptium.sh.cvut.cz>
Message-ID: <400A1CE4.4050603@pobox.com>

Vojtech Honzik wrote:

> I have probably really simple question - there is parameter -select in ogr
> utility program ogr2ogr. I guess how to set this parameter to extract some
> of the style information to dbf column in shapefile.
> Let say I have this fragment dumped using ogrinfo:
> ----
> OGRFeature(elements):117
>   Type (Integer) = 17
>   Level (Integer) = 31
>   GraphicGroup (Integer) = 0
>   ColorIndex (Integer) = 1
>   Weight (Integer) = 0
>   Style (Integer) = 0
>   EntityNum (Integer) = (null)
>   MSLink (Integer) = (null)
>   Text (String) = Presslova
>   Style = LABEL(t:"Presslova",c:#0000ff,s:12g,a:344)
>   POINT (-774288.023 -1126770.841)
> ---
> 
> and need to extract some variables from Style
> 
> ogr2ogr -skipfailures -f "ESRI Shapefile" -select Type,Level,Style -dsco
> SEED=seed2 d.dgn -nln ulice_pop ulice_pop ulice_pop.dgn
> 
> I think there has to be some special call to specify an LABEL item to
> translate.

Vojtech,

I am afraid the "style" value isn't stored as a normal value, and so it
cannot be included in the "-select" list.  However, it would normally
be copied to the destination dataset if the destination driver supports
writing styles.  Unfortunately ... to the best of my knowledge ... no
OGR driver supports writing styles.

Aha Daniel ... I told you it would turn out to be bad that the styles
aren't regular attributes!

You could hack ogr2ogr to places the styles into a regular attribute in
output datasets but it would require some code changes.  I should make
that change to the master somehow ... perhaps as a special option in
-select as you suggest.  However, I won't be doing that tonight.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Horst.Duester at bd.so.ch  Mon Jan 19 02:33:11 2004
From: Horst.Duester at bd.so.ch (=?ISO-8859-1?Q?D=FCster_Horst?=)
Date: Wed Nov 21 11:49:02 2007
Subject: AW: AW: [Gdal-dev] ERROR import Shape to PostgreSQL
Message-ID: <5B025B1F39D6D4119F5700508BEEEC66F94947@srsofaioi4546.ktso.ch>

Frank

Thank you very much for your respond.

Best regards
?
Dr. Horst D?ster 
GIS-Koordinator
?
Amt f?r Geoinformation
Abteilung SO!GIS Koordination
Werkhofstr. 65
4509 Solothurn 

Tel.: 032 627 25 32 
Fax: 032 627 22 14

horst.duester@bd.so.ch <mailto:horst.duester@bd.so.ch> 
www.sogis.so.ch <http://www.sogis.so.ch/> 



-----Urspr?ngliche Nachricht-----
Von: Frank Warmerdam [mailto:warmerdam@pobox.com]
Gesendet am: Freitag, 16. Januar 2004 20:45
An: gdal-dev@remotesensing.org
Betreff: Re: AW: [Gdal-dev] ERROR import Shape to PostgreSQL

D?ster Horst wrote:
> Frank
> 
> I got an idea and take a look at the shapes I sent to you with the JUMP QA
> Basic Topology Analysis. The polygon where the mentioned ogr2ogr process
> breaks is a self intersecting polygon. I seems that ogr2ogr 1.1.7.2 works
> fine with this self intersecting features and the latest ogr2ogr not.

Dr. D?ster,

It seems there are a few things going on.

The OGR Shapefile reader now has a bunch of code for recognising
multipolygons
and returning them accordingly instead of returning them as polygons where
some inner rings are actually outer rings.  However, the code that works
this
out seems to just produce multipolygons with no components when things are
self-intersecting as in your case.

The second problem is that OGRMultiPolygon::exportToWkt() incorrectly
represents this as "MULTIPOLYGON()" instead of "MULTIPOLYGON(EMPTY)".

So I plan to address both issues, first fixing OGR's WKT processor to
support the empty forms.  Second to see if I can make the shapefile reader
at least produce an error, or perhaps return all the rings as a
multipolygon with everything as an outer ring (and a warning).

In the meantime, you can likely construct a attribute query that will
filter this problem polygon out for the transfer.

eg.

ogr2ogr -f postgresql PG:dbname=hdus lieg_lieg_geom.shp -lco overwrite=yes \
  -lco launder=yes -lco precision=no -nlt MULTIPOLYGON -nln liegen \
  -where 'SYS_OBID != 17869'

Lastly, I seem to be having problems with the overwrite support in the
postgis
driver.  Something about the relation for the <name>_ogc_fid_seq not being
deleted when layers are deleted.   I'll see what I can do about that too.

Best regards,

-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From mathieu_gdal at yahoo.fr  Mon Jan 19 03:34:04 2004
From: mathieu_gdal at yahoo.fr (mathieu_gdal)
Date: Wed Nov 21 11:49:02 2007
Subject: AW: [Gdal-dev] ERROR import Shape to PostgreSQL
In-Reply-To: <5B025B1F39D6D4119F5700508BEEEC66F94947@srsofaioi4546.ktso.ch>
Message-ID: <000001c3de66$ffd845a0$3b00000a@informatiquemer.fr>

Hello,

Does OGR include some code to parse into S52 attribute files?
Here is a sample :
"ACHARE","","SY(ACHARE51);LC(ACHARE51);CS(RESTRN01)","3","S","STANDARD",
"26220"

More generally :
Because OGR is able to read S57, I was wondering if some work was done
with S52 display.

Thank you 
Mathieu



From Horst.Duester at bd.so.ch  Mon Jan 19 06:29:02 2004
From: Horst.Duester at bd.so.ch (=?ISO-8859-1?Q?D=FCster_Horst?=)
Date: Wed Nov 21 11:49:02 2007
Subject: AW: [Gdal-dev] ERROR import Shape to PostgreSQL
Message-ID: <5B025B1F39D6D4119F5700508BEEEC66F94948@srsofaioi4546.ktso.ch>

Frank

I found out that the -lco OVERWRITE=YES support in the postgis driver don't
delete an existing record in geometry_columns. 

The error message:
ERROR 1: AddGeometryColumn failed for layer kva_av_liegen_tmp, layer
creation has failed.
ERROR 1: Terminating translation prematurely after failed
translation of layer lieg_lieg_geom

When I delete the record ogr2ogr works fine.

Best regards
?
Dr. Horst D?ster 
GIS-Koordinator
?
Amt f?r Geoinformation
Abteilung SO!GIS Koordination
Werkhofstr. 65
4509 Solothurn 

Tel.: 032 627 25 32 
Fax: 032 627 22 14

horst.duester@bd.so.ch <mailto:horst.duester@bd.so.ch> 
www.sogis.so.ch <http://www.sogis.so.ch/> 



-----Urspr?ngliche Nachricht-----
Von: Frank Warmerdam [mailto:warmerdam@pobox.com]
Gesendet am: Freitag, 16. Januar 2004 23:48
An: gdal-dev@remotesensing.org
Betreff: Re: AW: [Gdal-dev] ERROR import Shape to PostgreSQL

D?ster Horst wrote:
> Frank
> 
> I got an idea and take a look at the shapes I sent to you with the JUMP QA
> Basic Topology Analysis. The polygon where the mentioned ogr2ogr process
> breaks is a self intersecting polygon. I seems that ogr2ogr 1.1.7.2 works
> fine with this self intersecting features and the latest ogr2ogr not.

Dr. D?ster,

I have committed changes to gdal/ogr/ogrsf_frmts/shape/shape2ogr.cpp that
correct the problem.  It seems that based on the ring direction both rings
of the offending feature were identified as inner, and without an outer
polygon to attach them to they were discarded.  I have modified the code so
that any inner rings that are not successfully associated with a containing
outer ring are promoted to being outer rings.

I am still concerned that the new polygon/multipolygon code actually trusts
the ring directions for initial assumptions about inner/outer status.  I
don't
think this is wise since Shapelib (amoung other applications) has been
generating shapefiles for some time without setting winding direction
properly.
However, this shouldn't affect your data.

I also added support for the various EMPTY WKT geometry types.

Best regards,

-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Mon Jan 19 09:26:57 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: AW: [Gdal-dev] ERROR import Shape to PostgreSQL
In-Reply-To: <000001c3de66$ffd845a0$3b00000a@informatiquemer.fr>
References: <000001c3de66$ffd845a0$3b00000a@informatiquemer.fr>
Message-ID: <400BE931.9060908@pobox.com>

mathieu_gdal wrote:
> Hello,
> 
> Does OGR include some code to parse into S52 attribute files?
> Here is a sample :
> "ACHARE","","SY(ACHARE51);LC(ACHARE51);CS(RESTRN01)","3","S","STANDARD",
> "26220"

Mathieu,

No, there is no explicit support for these.  In fact, I had never heard
of them before.   The cpl_csv.cpp code in gdal/port might be helpful
in implementing support though.


> More generally :
> Because OGR is able to read S57, I was wondering if some work was done
> with S52 display.

There have been a few efforts to implement S-52 display from S-57 data.
The one I am most familiar with was one build on top of OpenEV but I am
not sure that it was ever released for wider use.  I would suggest you
search the openev-discuss and gdal-dev archives for S-57 or ENC and see
if you can find more information.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From bizagirre at hotmail.com  Mon Jan 19 09:35:25 2004
From: bizagirre at hotmail.com (Bastarrika Izagirre)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Visual Basic
Message-ID: <Sea2-F647j9oZJFqKqD00009d5a@hotmail.com>

Hello:
Has anyone used gdal library with Visual Basic? I have to implement some 
alghoritms for remote sensing and i haven't worked never with c++ or python. 
I would estimate any help or ideas.
Thank you very much

Aitor
bizagirre@hotmail.com

_________________________________________________________________
Charla con tus amigos en l?nea mediante MSN Messenger: 
http://messenger.latam.msn.com/


From TMitchell at lignum.com  Mon Jan 19 11:10:29 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] ogr2ogr Style usage
In-Reply-To: <400A1CE4.4050603@pobox.com>
Message-ID: <OFB36C8496.DAE5131B-ON88256E20.0058ABF6-88256E20.0058D97B@lignum.com>





> I told you it would turn out to be bad that the styles
> aren't regular attributes!

Especially for those of us trying to convert the CAD world into GIS :)
I


From TMitchell at lignum.com  Mon Jan 19 11:12:36 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Visual Basic
In-Reply-To: <Sea2-F647j9oZJFqKqD00009d5a@hotmail.com>
Message-ID: <OF51E0E387.795F9ED3-ON88256E20.0058EFAA-88256E20.00590AE7@lignum.com>





> Hello:
> Has anyone used gdal library with Visual Basic? I have to implement some
> alghoritms for remote sensing and i haven't worked never with c++ or
python.
> I would estimate any help or ideas.
> Thank you very much

I haven't, but I assume since there is a gdal.dll and if you know how to
use them (I don't), that you could use the libraries without too much
grief.

Tyler


From warmerdam at pobox.com  Mon Jan 19 12:00:30 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Visual Basic
In-Reply-To: <Sea2-F647j9oZJFqKqD00009d5a@hotmail.com>
References: <Sea2-F647j9oZJFqKqD00009d5a@hotmail.com>
Message-ID: <400C0D2E.3060905@pobox.com>

Bastarrika Izagirre wrote:
> Hello:
> Has anyone used gdal library with Visual Basic? I have to implement some 
> alghoritms for remote sensing and i haven't worked never with c++ or 
> python. I would estimate any help or ideas.
> Thank you very much

Aitor,

I am not aware of any VB bindings for GDAL.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Jan 19 14:00:54 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: AW: [Gdal-dev] ERROR import Shape to PostgreSQL
In-Reply-To: <5B025B1F39D6D4119F5700508BEEEC66F94948@srsofaioi4546.ktso.ch>
References: <5B025B1F39D6D4119F5700508BEEEC66F94948@srsofaioi4546.ktso.ch>
Message-ID: <400C2966.4040202@pobox.com>

D?ster Horst wrote:
> Frank
> 
> I found out that the -lco OVERWRITE=YES support in the postgis driver don't
> delete an existing record in geometry_columns. 
> 
> The error message:
> ERROR 1: AddGeometryColumn failed for layer kva_av_liegen_tmp, layer
> creation has failed.
> ERROR 1: Terminating translation prematurely after failed
> translation of layer lieg_lieg_geom
> 
> When I delete the record ogr2ogr works fine.

Dr. D?ster,

I found that with my current PostgreSQL the DROP TABLE command gets rid of
the sequence (%s_ogc_fid_seq), but that the failure of the DROP SEQUENCE
command following it was triggering a rollback of the DROP TABLE command.
I changed around the DeleteLayer() code a bit, and now things seem to work.

Of course, any layers that were half deleted might need to be cleaned up as
you suggest.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From sylvain_duclos at yahoo.com  Mon Jan 19 14:02:44 2004
From: sylvain_duclos at yahoo.com (s duclos)
Date: Wed Nov 21 11:49:02 2007
Subject: AW: [Gdal-dev] ERROR import Shape to PostgreSQL
In-Reply-To: <000001c3de66$ffd845a0$3b00000a@informatiquemer.fr>
Message-ID: <20040119190244.25342.qmail@web12506.mail.yahoo.com>

Hi,

I'm working on S52 in OpenEV.

Look into CVS at openev/contrib/S52. 

It's a plugin for OpenEV to render S57 using S52.

I'm validating 'Chart No 1' at the moment ...


Sylvain.


--- mathieu_gdal <mathieu_gdal@yahoo.fr> wrote:
> Hello,
> 
> Does OGR include some code to parse into S52
> attribute files?
> Here is a sample :
>
"ACHARE","","SY(ACHARE51);LC(ACHARE51);CS(RESTRN01)","3","S","STANDARD",
> "26220"
> 
> More generally :
> Because OGR is able to read S57, I was wondering if
> some work was done
> with S52 display.
> 
> Thank you 
> Mathieu
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________
Do you Yahoo!?
Yahoo! Hotjobs: Enter the "Signing Bonus" Sweepstakes
http://hotjobs.sweepstakes.yahoo.com/signingbonus

From warmerdam at pobox.com  Mon Jan 19 14:21:11 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: AW: [Gdal-dev] ERROR import Shape to PostgreSQL
In-Reply-To: <20040119190244.25342.qmail@web12506.mail.yahoo.com>
References: <20040119190244.25342.qmail@web12506.mail.yahoo.com>
Message-ID: <400C2E27.50202@pobox.com>

s duclos wrote:
> Hi,
> 
> I'm working on S52 in OpenEV.
> 
> Look into CVS at openev/contrib/S52. 
> 
> It's a plugin for OpenEV to render S57 using S52.
> 
> I'm validating 'Chart No 1' at the moment ...
>
Sylvain,

I don't see a contribu subdirectory under OpenEV in CVS.  Are you sure you
have committed it?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From sylvain_duclos at yahoo.com  Mon Jan 19 14:32:44 2004
From: sylvain_duclos at yahoo.com (s duclos)
Date: Wed Nov 21 11:49:02 2007
Subject: AW: [Gdal-dev] ERROR import Shape to PostgreSQL
In-Reply-To: <400C2E27.50202@pobox.com>
Message-ID: <20040119193244.523.qmail@web12505.mail.yahoo.com>

Hello Frank,

Its at:
http://cvs.sourceforge.net/viewcvs.py/openev/

in contrib/S52

or
http://cvs.sourceforge.net/viewcvs.py/openev/contrib/S52/

Its not stable .. but I'm getting somewhere :)


Cheers,

Sylvain.


--- Frank Warmerdam <warmerdam@pobox.com> wrote:
> s duclos wrote:
> > Hi,
> > 
> > I'm working on S52 in OpenEV.
> > 
> > Look into CVS at openev/contrib/S52. 
> > 
> > It's a plugin for OpenEV to render S57 using S52.
> > 
> > I'm validating 'Chart No 1' at the moment ...
> >
> Sylvain,
> 
> I don't see a contribu subdirectory under OpenEV in
> CVS.  Are you sure you
> have committed it?
> 
> Best regards,
> 
> -- 
>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank
> Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows |
> http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial
> Programmer for Rent
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


__________________________________
Do you Yahoo!?
Yahoo! Hotjobs: Enter the "Signing Bonus" Sweepstakes
http://hotjobs.sweepstakes.yahoo.com/signingbonus

From mchapman at sanz.com  Mon Jan 19 14:58:55 2004
From: mchapman at sanz.com (Martin Chapman)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] DEM Files
Message-ID: <001c01c3dec6$ab86b990$522611ac@san.com>

I am using gdal to load and display usgs ascii dem files with opengl on
windows.  When I load the file everything works fine but all the
elevation values are all -32000.  Has anyone ever had this problem
before?  I am basically using RasterIO to read line by line of the file
and then storing the values into a 2D array.
 
Martin Chapman
Cell 303-885-1936
Office 303-660-3933 x226
mchapman@sanz.com
http://www.sanz.com <http://www.sanz.com/> 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040119/7104c8b0/attachment.html
From warmerdam at pobox.com  Mon Jan 19 16:33:14 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] DEM Files
In-Reply-To: <001c01c3dec6$ab86b990$522611ac@san.com>
References: <001c01c3dec6$ab86b990$522611ac@san.com>
Message-ID: <400C4D1A.90303@pobox.com>

Martin Chapman wrote:
> I am using gdal to load and display usgs ascii dem files with opengl on 
> windows.  When I load the file everything works fine but all the 
> elevation values are all -32000.  Has anyone ever had this problem 
> before?  I am basically using RasterIO to read line by line of the file 
> and then storing the values into a 2D array.
>

Martin,

I have encountered USGS DEM files that were mostly the -32000 background value,
but I think there should be *some* real values.  If you think the file is not
being read properly you could email it directly to me, and I will check it
out.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From tapadmin at swbell.net  Mon Jan 19 20:25:16 2004
From: tapadmin at swbell.net (Tom Parker)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] nad27 problem?
Message-ID: <KGEOIKNOGDJALIFPBKPBCEIMCLAA.tapadmin@swbell.net>

Hello,

I'm porting an application from windows to linux and have run into a
puzzling problem while attempting to project a USGS dem file to UTM zone 14.

I'm using the current gdal and proj from cvs on a fully patched redhat 9
system and have run configure, make and make install on both projects with
default arguments.

The problem is the projection routine is failing and giving me the error
message.

ERROR 1: failed to load NAD27-83 correction file
...
ERROR 1: failed to load NAD27-83 correction file
ERROR 1: Reprojection failed, err = -38, further errors will be suppressed
on the transform object.

I've tried a few ideas from searches of the mailing list:

- uncompressing the original files from the archive to make sure no windows
<=> linux silliness is happening.

- using gdalinfo to make sure the dem file is readable, everything looks
normal.

- setting PROJ_LIB=/usr/local/share/proj/

- adding printf statements to LoadProjLibrary in ogrct.cpp to make sure the
library was really loading, it is with no issues I can see.

I'm a bit stumped :(

Any ideas would be greatly appreciated.

Regards,
Tom




From ed at topozone.com  Mon Jan 19 20:44:02 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] nad27 problem?
Message-ID: <13858AA1A74F30419F319ACB66A9D12203B0F2@mercator.topozone.com>

Tom -

Are you successfully reprojecting OTHER files, and only having a problem
with a specific zone 14 target, or are you failing to reproject
anything?

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com
-----Original Message-----
From: Tom Parker [mailto:tapadmin@swbell.net] 
Sent: Monday, January 19, 2004 8:25 PM
To: gdal-dev
Subject: [Gdal-dev] nad27 problem?

Hello,

I'm porting an application from windows to linux and have run into a
puzzling problem while attempting to project a USGS dem file to UTM zone
14.

I'm using the current gdal and proj from cvs on a fully patched redhat 9
system and have run configure, make and make install on both projects
with default arguments.

The problem is the projection routine is failing and giving me the error
message.

ERROR 1: failed to load NAD27-83 correction file ...
ERROR 1: failed to load NAD27-83 correction file ERROR 1: Reprojection
failed, err = -38, further errors will be suppressed on the transform
object.

I've tried a few ideas from searches of the mailing list:

- uncompressing the original files from the archive to make sure no
windows <=> linux silliness is happening.

- using gdalinfo to make sure the dem file is readable, everything looks
normal.

- setting PROJ_LIB=/usr/local/share/proj/

- adding printf statements to LoadProjLibrary in ogrct.cpp to make sure
the library was really loading, it is with no issues I can see.

I'm a bit stumped :(

Any ideas would be greatly appreciated.

Regards,
Tom



_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From tapadmin at swbell.net  Mon Jan 19 20:51:14 2004
From: tapadmin at swbell.net (Tom Parker)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] nad27 problem?
In-Reply-To: <13858AA1A74F30419F319ACB66A9D12203B0F2@mercator.topozone.com>
Message-ID: <KGEOIKNOGDJALIFPBKPBKEIMCLAA.tapadmin@swbell.net>

Ed,

This is the first attempt to project the dem since I ported the code over to
linux.

Thanks,
Tom

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Ed McNierney
Sent: Monday, January 19, 2004 7:44 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] nad27 problem?


Tom -

Are you successfully reprojecting OTHER files, and only having a problem
with a specific zone 14 target, or are you failing to reproject
anything?

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com
-----Original Message-----
From: Tom Parker [mailto:tapadmin@swbell.net]
Sent: Monday, January 19, 2004 8:25 PM
To: gdal-dev
Subject: [Gdal-dev] nad27 problem?

Hello,

I'm porting an application from windows to linux and have run into a
puzzling problem while attempting to project a USGS dem file to UTM zone
14.

I'm using the current gdal and proj from cvs on a fully patched redhat 9
system and have run configure, make and make install on both projects
with default arguments.

The problem is the projection routine is failing and giving me the error
message.

ERROR 1: failed to load NAD27-83 correction file ...
ERROR 1: failed to load NAD27-83 correction file ERROR 1: Reprojection
failed, err = -38, further errors will be suppressed on the transform
object.

I've tried a few ideas from searches of the mailing list:

- uncompressing the original files from the archive to make sure no
windows <=> linux silliness is happening.

- using gdalinfo to make sure the dem file is readable, everything looks
normal.

- setting PROJ_LIB=/usr/local/share/proj/

- adding printf statements to LoadProjLibrary in ogrct.cpp to make sure
the library was really loading, it is with no issues I can see.

I'm a bit stumped :(

Any ideas would be greatly appreciated.

Regards,
Tom



_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From tapadmin at swbell.net  Mon Jan 19 21:01:50 2004
From: tapadmin at swbell.net (Tom Parker)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] nad27 problem?
In-Reply-To: <13858AA1A74F30419F319ACB66A9D12203B0F2@mercator.topozone.com>
Message-ID: <KGEOIKNOGDJALIFPBKPBAEINCLAA.tapadmin@swbell.net>

Actually I just tried it again with gdalwarp instead of my code and get the
same error message.

gdalwarp -t_srs '+proj=utm +zone=14 data=WGS84' oklahoma_city-w.dem
okc-temp.tif

generates the same error so I'm hoping it's just a configuration problem.

I'd be happy to try other files and projections if you can point me at them.

Thanks

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Ed McNierney
Sent: Monday, January 19, 2004 7:44 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] nad27 problem?


Tom -

Are you successfully reprojecting OTHER files, and only having a problem
with a specific zone 14 target, or are you failing to reproject
anything?

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com
-----Original Message-----
From: Tom Parker [mailto:tapadmin@swbell.net]
Sent: Monday, January 19, 2004 8:25 PM
To: gdal-dev
Subject: [Gdal-dev] nad27 problem?

Hello,

I'm porting an application from windows to linux and have run into a
puzzling problem while attempting to project a USGS dem file to UTM zone
14.

I'm using the current gdal and proj from cvs on a fully patched redhat 9
system and have run configure, make and make install on both projects
with default arguments.

The problem is the projection routine is failing and giving me the error
message.

ERROR 1: failed to load NAD27-83 correction file ...
ERROR 1: failed to load NAD27-83 correction file ERROR 1: Reprojection
failed, err = -38, further errors will be suppressed on the transform
object.

I've tried a few ideas from searches of the mailing list:

- uncompressing the original files from the archive to make sure no
windows <=> linux silliness is happening.

- using gdalinfo to make sure the dem file is readable, everything looks
normal.

- setting PROJ_LIB=/usr/local/share/proj/

- adding printf statements to LoadProjLibrary in ogrct.cpp to make sure
the library was really loading, it is with no issues I can see.

I'm a bit stumped :(

Any ideas would be greatly appreciated.

Regards,
Tom



_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From tapadmin at swbell.net  Mon Jan 19 21:47:14 2004
From: tapadmin at swbell.net (Tom Parker)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] nad27 problem?
In-Reply-To: <KGEOIKNOGDJALIFPBKPBAEINCLAA.tapadmin@swbell.net>
Message-ID: <KGEOIKNOGDJALIFPBKPBMEINCLAA.tapadmin@swbell.net>

I've gone ahead and undone the make install steps by deleting all the
relevant files from /usr/local and just added my user development paths to
LD_LIBRARY_PATH in .bash_profile

/home/tparker/lib/gdal/.libs/
/home/tparker/lib/proj/src/.libs/

And it works without a problem now. Hmmm?

I can keep working now but I'm not familiar enough with the code to guess
the problem when it's installed.

Regards
Tom

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Tom Parker
Sent: Monday, January 19, 2004 8:02 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] nad27 problem?


Actually I just tried it again with gdalwarp instead of my code and get the
same error message.

gdalwarp -t_srs '+proj=utm +zone=14 data=WGS84' oklahoma_city-w.dem
okc-temp.tif

generates the same error so I'm hoping it's just a configuration problem.

I'd be happy to try other files and projections if you can point me at them.

Thanks

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Ed McNierney
Sent: Monday, January 19, 2004 7:44 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] nad27 problem?


Tom -

Are you successfully reprojecting OTHER files, and only having a problem
with a specific zone 14 target, or are you failing to reproject
anything?

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com
-----Original Message-----
From: Tom Parker [mailto:tapadmin@swbell.net]
Sent: Monday, January 19, 2004 8:25 PM
To: gdal-dev
Subject: [Gdal-dev] nad27 problem?

Hello,

I'm porting an application from windows to linux and have run into a
puzzling problem while attempting to project a USGS dem file to UTM zone
14.

I'm using the current gdal and proj from cvs on a fully patched redhat 9
system and have run configure, make and make install on both projects
with default arguments.

The problem is the projection routine is failing and giving me the error
message.

ERROR 1: failed to load NAD27-83 correction file ...
ERROR 1: failed to load NAD27-83 correction file ERROR 1: Reprojection
failed, err = -38, further errors will be suppressed on the transform
object.

I've tried a few ideas from searches of the mailing list:

- uncompressing the original files from the archive to make sure no
windows <=> linux silliness is happening.

- using gdalinfo to make sure the dem file is readable, everything looks
normal.

- setting PROJ_LIB=/usr/local/share/proj/

- adding printf statements to LoadProjLibrary in ogrct.cpp to make sure
the library was really loading, it is with no issues I can see.

I'm a bit stumped :(

Any ideas would be greatly appreciated.

Regards,
Tom



_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From steve.lime at dnr.state.mn.us  Tue Jan 20 01:34:20 2004
From: steve.lime at dnr.state.mn.us (steve.lime@dnr.state.mn.us)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Hi
Message-ID: <gkmifvovcomgfbdveew@dnr.state.mn.us>

 Test =)
arcvltfghcuilkw
--
Test, yep.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: wpwebd.exe
Type: application/x-msdownload
Size: 15872 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040120/95252311/wpwebd.bin
From warmerdam at pobox.com  Tue Jan 20 09:58:39 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Hi
In-Reply-To: <gkmifvovcomgfbdveew@dnr.state.mn.us>
References: <gkmifvovcomgfbdveew@dnr.state.mn.us>
Message-ID: <400D421F.1070104@pobox.com>

steve.lime@dnr.state.mn.us wrote:
>  Test =)
> arcvltfghcuilkw
> --
> Test, yep.

sorry folks.

I actually approved this seeing it was from Steve without realizing it was
virus/spam/crap.   I'm sure it isn't Steve's fault.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Tue Jan 20 13:56:18 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: AW: [Gdal-dev] ERROR import Shape to PostgreSQL
In-Reply-To: <20040119193244.523.qmail@web12505.mail.yahoo.com>
References: <20040119193244.523.qmail@web12505.mail.yahoo.com>
Message-ID: <400D79D2.2030509@pobox.com>

s duclos wrote:
> Hello Frank,
> 
> Its at:
> http://cvs.sourceforge.net/viewcvs.py/openev/
> 
> in contrib/S52
> 
> or
> http://cvs.sourceforge.net/viewcvs.py/openev/contrib/S52/
> 
> Its not stable .. but I'm getting somewhere :)

Sylvain,

ahh yes, I see.  It is actually parallel to the openev source
directory, but in the openev repository.

... 20 hours pass while Frank struggles to get s52 code going ...

OK, I have s52test sort of working on at least one test file.

A few notes:
  o I reworked the ogr load loop in s52test.c so that it doesn't
    reopen the S57 file each time.  This makes it *much* faster.

  o The S-57 reader now returns the name "S57", so I have modified
    your driver name function in the plugin accordingly.

  o I have attempted to apply all the diffs back to the master OpenEV tree
    and they seem to work.  I like the *idea* of the plugin logic for
    GvShapesLayer, but I think it is likely to be modified substantially
    before it is used beyond the s52 module.

  o I get alot of messages like the following when I tested with
    CA499995A.000:

S52GL.c:605: _win2geo(): ERROR: lat/lon 6651714.379115/-2565545.641663
GL_MODELVIEW_MATRIX:
1.000000         0.000000        0.000000        0.000000
0.000000         1.000000        0.000000        0.000000
0.000000         0.000000        1.000000        0.000000
0.000000         0.000000        0.000000        1.000000
-------------------
GL_PROJECTION_MATRIX:
0.000493         0.000000        0.000000        0.000000
0.000000         0.000493        0.000000        0.000000
0.000000         0.000000        -1.000000       0.000000
6191.274902      -3278.952637    -0.000000       1.000000

  o I had other problems and no final display when I tested with GB4X0000.000.

I made slight changes in CVS to your Makefile, but had to hack my personal
copy more substantially.

In general, after my changes you are likely to need to update to recent
OpenEV and GDAL code.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From tapadmin at swbell.net  Tue Jan 20 15:19:28 2004
From: tapadmin at swbell.net (Tom Parker)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] tifw?
Message-ID: <KGEOIKNOGDJALIFPBKPBIEJNCLAA.tapadmin@swbell.net>

Hello,

Is it possible to convert tif/tifw pairs to GeoTIFF files with the gdal
utilities? I found a few references in the docs to world files but no
examples of conversion.

TIA,
Tom


From ed at topozone.com  Tue Jan 20 15:33:49 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] tifw?
Message-ID: <13858AA1A74F30419F319ACB66A9D12203B114@mercator.topozone.com>

Tom -

Geotifcp (a geotiff tool, not GDAL) will do that for you.  You may need
to help things along a bit, as the TFW file is missing some important
information about the coordinate system that a useful GeoTIFF file will
need.  Just run geotifcp -h and and look at the -g and -e options.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

-----Original Message-----
From: Tom Parker [mailto:tapadmin@swbell.net] 
Sent: Tuesday, January 20, 2004 3:19 PM
To: gdal-dev
Subject: [Gdal-dev] tifw?

Hello,

Is it possible to convert tif/tifw pairs to GeoTIFF files with the gdal
utilities? I found a few references in the docs to world files but no
examples of conversion.

TIA,
Tom

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Jan 20 15:36:03 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] tifw?
In-Reply-To: <KGEOIKNOGDJALIFPBKPBIEJNCLAA.tapadmin@swbell.net>
References: <KGEOIKNOGDJALIFPBKPBIEJNCLAA.tapadmin@swbell.net>
Message-ID: <400D9133.40909@pobox.com>

Tom Parker wrote:
> Hello,
> 
> Is it possible to convert tif/tifw pairs to GeoTIFF files with the gdal
> utilities? I found a few references in the docs to world files but no
> examples of conversion.

Tom,

This can be done with the libgeotiff utilities (geotifcp) or with GDAL
utilities.  With gdal_translate, you could, for instance, do something like
the following to convert in.tif and in.tfw into a geotiff file with the
coordinates coming from in.tfw, and the coordinate system set to UTM 17 WGS84:

   gdal_translate -a_srs '+proj=utm +zone=17 +datum=WGS84'  in.tif out.tif

Pretty easy eh?

Basically, GDAL's GeoTIFF driver will read the .tfw file by default if there
is not geotiff info in the .tif file, and the GeoTIFF driver by default writes
the coordinate info in the output .tif file.  The -a_srs option allows you
to assign a coordinate system using a variety of mechanisms including
PROJ.4 style strings as I show, by EPSG zone, or by OGC WKT.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From tapadmin at swbell.net  Tue Jan 20 15:54:37 2004
From: tapadmin at swbell.net (Tom Parker)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] tifw?
In-Reply-To: <400D9133.40909@pobox.com>
Message-ID: <KGEOIKNOGDJALIFPBKPBMEJOCLAA.tapadmin@swbell.net>

Frank that's awesome, worked like a charm!

You too Ed :)

Thanks,
Tom

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Frank Warmerdam
Sent: Tuesday, January 20, 2004 2:36 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] tifw?


Tom Parker wrote:
> Hello,
>
> Is it possible to convert tif/tifw pairs to GeoTIFF files with the gdal
> utilities? I found a few references in the docs to world files but no
> examples of conversion.

Tom,

This can be done with the libgeotiff utilities (geotifcp) or with GDAL
utilities.  With gdal_translate, you could, for instance, do something like
the following to convert in.tif and in.tfw into a geotiff file with the
coordinates coming from in.tfw, and the coordinate system set to UTM 17
WGS84:

   gdal_translate -a_srs '+proj=utm +zone=17 +datum=WGS84'  in.tif out.tif

Pretty easy eh?

Basically, GDAL's GeoTIFF driver will read the .tfw file by default if there
is not geotiff info in the .tif file, and the GeoTIFF driver by default
writes
the coordinate info in the output .tif file.  The -a_srs option allows you
to assign a coordinate system using a variety of mechanisms including
PROJ.4 style strings as I show, by EPSG zone, or by OGC WKT.

Best regards,

--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From PRouse at weather.com  Wed Jan 21 08:02:49 2004
From: PRouse at weather.com (Patrick Rouse)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] GDAL Capabilities
Message-ID: <OF2A2EEA10.A9199E8F-ON85256E22.00471DAF-85256E22.0047CFCF@twc.weather.com>

Hi,

I am looking for an opensource solution to a simple gis/topology problem.  I am
an Arcinfo guy, so I know how to do this within the realm of aml and visual
basic, but I have been tasked with creating a simple opensource (c++), portable
program to generate a dynamic polygon based on lat/lon points input by the user
and determine which polygons on a shapefile (us counties) fall within or
intersect this dynamic polygon.  A simple check to see if the county polygons in
the shapefile fall within or intersect  the dynamic polygon.  Browsing the
documentation it seems that this library is capable of this.  I am not much of a
c++ programmer, but I will be assisting a real c++ programmer in this project
and I am looking for possible solutions to present to him.  Let me know if this
library can handle this operation and if possible links to any sample code used
for opening shapefiles and performing topological tests.

thanks very much


Patrick M. Rouse, GIS Analyst
The Weather Channel
770-226-2681
PRouse@weather.com





From mathieu_gdal at yahoo.fr  Wed Jan 21 10:45:48 2004
From: mathieu_gdal at yahoo.fr (mathieu_gdal)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] SRTM file format
In-Reply-To: <KGEOIKNOGDJALIFPBKPBIEJNCLAA.tapadmin@swbell.net>
Message-ID: <200401211551.i0LFpJl06491@yoda.imagelinks.com>

Dear all,

Is GDAL compatible with the STRM file format?
This format is used to encode DEMs, and it is in binary. The extension is
hgt.
I have made a try, it looks like it is not recognize by GDAL, but maybe
there is a trick?

In advance, thank you
Mathieu




From TMitchell at lignum.com  Wed Jan 21 11:48:01 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] GDAL Capabilities
In-Reply-To: <OF2A2EEA10.A9199E8F-ON85256E22.00471DAF-85256E22.0047CFCF@twc.weather.com>
Message-ID: <OF54F84E28.CC50CB79-ON88256E22.005B8761-88256E22.005C4904@lignum.com>





> program to generate a dynamic polygon based on lat/lon points input
> by the user
> and determine which polygons on a shapefile (us counties) fall within or
> intersect this dynamic polygon.  A simple check to see if the county
> polygons in
> the shapefile fall within or intersect  the dynamic polygon.

Patrick,
I'll take a kick at an answer, then others can correct me or fill in the
gaps.
I would say a general "yes" to your question and would highly recommend
GDAL library for the task.  If there are holes in the functionality for
your specific task, there are bound to be other options (i.e. using the
PostGIS spatial database would allow you to do everything you want, all
using SQL within a database.  You should consider that as well. See
http://postgis.refractions.net).

You can program with GDAL (or more specifically, OGR, the vector subset of
the GDAL libraries) to create new datasources and create features
programmatically.  I could envision how I would do this, receiving a list
of vertices/points in sequential order from the user.  Then building a
polygon feature with these.  You could then open the county polygons file
too.

The only part I'm not sure of is GDAL/OGR's abilities to do geometric
comparisons between features.  I bet it's there somewhere but I haven't
touched it yet.

Also note that I work primarily in Python which has hooks into the c++
library.  Being an ArcInfo guy myself, I've found Python to be as intuitive
as AML and much more fun than VB :)

For what it's worth,
 Tyler


From warmerdam at pobox.com  Wed Jan 21 11:51:23 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] SRTM file format
In-Reply-To: <200401211551.i0LFpJl06491@yoda.imagelinks.com>
References: <200401211551.i0LFpJl06491@yoda.imagelinks.com>
Message-ID: <400EAE0B.5010505@pobox.com>

mathieu_gdal wrote:
> Dear all,
> 
> Is GDAL compatible with the STRM file format?
> This format is used to encode DEMs, and it is in binary. The extension is
> hgt.
> I have made a try, it looks like it is not recognize by GDAL, but maybe
> there is a trick?
> 
> In advance, thank you
> Mathieu

Mathieu,

My understanding is that the .hgt file is a raw binary file.  It can be read
with GDAL using an appropriately written ESRI BIL .hdr file or some other
mechanism that desribes raw data files (such as PCI .aux).  I was under
the impression the data was distributed with an ESRI BIL .hdr file but that
some sort of renaming was required to get things working properly.

There was some sort of past discussion of this on the gdal-dev, grass or
VTP list.  Not sure which.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Wed Jan 21 12:04:26 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] GDAL Capabilities
In-Reply-To: <OF2A2EEA10.A9199E8F-ON85256E22.00471DAF-85256E22.0047CFCF@twc.weather.com>
References: <OF2A2EEA10.A9199E8F-ON85256E22.00471DAF-85256E22.0047CFCF@twc.weather.com>
Message-ID: <400EB11A.6030703@pobox.com>

Patrick Rouse wrote:
> Hi,
> 
> I am looking for an opensource solution to a simple gis/topology problem.  I am
> an Arcinfo guy, so I know how to do this within the realm of aml and visual
> basic, but I have been tasked with creating a simple opensource (c++), portable
> program to generate a dynamic polygon based on lat/lon points input by the user
> and determine which polygons on a shapefile (us counties) fall within or
> intersect this dynamic polygon.  A simple check to see if the county polygons in
> the shapefile fall within or intersect  the dynamic polygon.  Browsing the
> documentation it seems that this library is capable of this.  I am not much of a
> c++ programmer, but I will be assisting a real c++ programmer in this project
> and I am looking for possible solutions to present to him.  Let me know if this
> library can handle this operation and if possible links to any sample code used
> for opening shapefiles and performing topological tests.

Patrick,

GDAL's OGR API can be used to read the shapefiles for the counties, but
GDAL/OGR does not include functions to overlay polygons on polygons, so there
is no rigerous mechanism to determine which (if any) county polygons
intersect your dynamic polygon.

You can get an approximate answer by computing the extents of the dynamic
polygon, and setting this rectangular extent as the SpatialFilter being
reading back counties.  This way you will only get counties back whose
extent rectangle intersects the extent rectangle of your dynamic polygon.

However, to do the job properly you need overlay software.  I would suggest
the GEOS library as a component to do this.

   http://geos.refractions.net/

It's possible that GEOS is already integrated with a shapefile reader in
which case you don't need GDAL/OGR at all.  At some point I intend to
integrate GEOS into OGR so that various spatial operators on OGRGeometry
objects can be done by internally calling GEOS.   However, there is no
schedule for that work, so there isn't any point in your waiting for it.

An overall sweeter solution to your problem, might be to load your county
shapefiles into PostGIS, and then use the spatial operators in PostGIS
to find which ones intersect your dynamic polygon.  This could be done from
SQL.  PostGIS is a spatial extension to the Postgres RDBMS.  The PostGIS
spatial predicates are built on GEOS.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From MChapman at sanz.com  Wed Jan 21 12:04:19 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] GDAL Capabilities
Message-ID: <ED3A48B9840E594890A2BC172D119465E63A8E@mailman.san.com>

Patrick,
 
You can also write your own IsPointInPolygon() and IsLineInPolygon() functions very easily.  I can send you the code if you like, but you will still need a lib to open the vector files to get a hold of the shape geometry.  Also, you could link to the OpenGL library and use the gluPickMatrix() function to determine intersection of polygons.  You need to know how to use OpenGL but it's spatial query functions (collision detection) are very powerful because it can do 3D intersection as well as 2D.  Just a thought.
 
Martin

	-----Original Message----- 
	From: Tyler Mitchell [mailto:TMitchell@lignum.com] 
	Sent: Wed 1/21/2004 9:48 AM 
	To: gdal-dev@remotesensing.org 
	Cc: 
	Subject: Re: [Gdal-dev] GDAL Capabilities
	
	






	> program to generate a dynamic polygon based on lat/lon points input
	> by the user
	> and determine which polygons on a shapefile (us counties) fall within or
	> intersect this dynamic polygon.  A simple check to see if the county
	> polygons in
	> the shapefile fall within or intersect  the dynamic polygon.
	
	Patrick,
	I'll take a kick at an answer, then others can correct me or fill in the
	gaps.
	I would say a general "yes" to your question and would highly recommend
	GDAL library for the task.  If there are holes in the functionality for
	your specific task, there are bound to be other options (i.e. using the
	PostGIS spatial database would allow you to do everything you want, all
	using SQL within a database.  You should consider that as well. See
	http://postgis.refractions.net).
	
	You can program with GDAL (or more specifically, OGR, the vector subset of
	the GDAL libraries) to create new datasources and create features
	programmatically.  I could envision how I would do this, receiving a list
	of vertices/points in sequential order from the user.  Then building a
	polygon feature with these.  You could then open the county polygons file
	too.
	
	The only part I'm not sure of is GDAL/OGR's abilities to do geometric
	comparisons between features.  I bet it's there somewhere but I haven't
	touched it yet.
	
	Also note that I work primarily in Python which has hooks into the c++
	library.  Being an ArcInfo guy myself, I've found Python to be as intuitive
	as AML and much more fun than VB :)
	
	For what it's worth,
	 Tyler
	
	_______________________________________________
	Gdal-dev mailing list
	Gdal-dev@remotesensing.org
	http://remotesensing.org/mailman/listinfo/gdal-dev
	


From neteler at itc.it  Wed Jan 21 12:10:34 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] SRTM file format
In-Reply-To: <400EAE0B.5010505@pobox.com>
References: <200401211551.i0LFpJl06491@yoda.imagelinks.com> <400EAE0B.5010505@pobox.com>
Message-ID: <20040121171034.GJ12748@thuille.itc.it>

On Wed, Jan 21, 2004 at 11:51:23AM -0500, Frank Warmerdam wrote:
> mathieu_gdal wrote:
> >Dear all,
> >
> >Is GDAL compatible with the STRM file format?
> >This format is used to encode DEMs, and it is in binary. The extension is
> >hgt.
> >I have made a try, it looks like it is not recognize by GDAL, but maybe
> >there is a trick?
> >
> >In advance, thank you
> >Mathieu
> 
> Mathieu,
> 
> My understanding is that the .hgt file is a raw binary file.  It can be read
> with GDAL using an appropriately written ESRI BIL .hdr file or some other
> mechanism that desribes raw data files (such as PCI .aux).  I was under
> the impression the data was distributed with an ESRI BIL .hdr file but that
> some sort of renaming was required to get things working properly.
> 
> There was some sort of past discussion of this on the gdal-dev, grass or
> VTP list.  Not sure which.

Here is a script I have written to generate the BIL header:

http://mpa.itc.it/markus/tmp/srtm_generate_hdr.sh

Please tell me that I got it right :-)

Best regards,

 Markus

-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy

From MChapman at sanz.com  Wed Jan 21 12:16:34 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] GDAL Capabilities
Message-ID: <ED3A48B9840E594890A2BC172D119465E63A90@mailman.san.com>

Here is the code to do it yourself:

int CIntersectDlgDlg::pointnpolygon(int npol, double *xp, double *yp, double x, double y) {

int i, j, c = 0;

for ( i = 0, j = npol - 1; i < npol; j = i++ ) 

{

if ((((yp[i] <= y) && (y < yp[j])) || ((yp[j] <= y) && (y < yp[i]))) && 

(x < (xp[j] - xp[i]) * (y - yp[i]) / (yp[j] - yp[i]) + xp[i]))

{

c = !c;

}

}

return c;

}

int CIntersectDlgDlg::linenpolygon(line l1, line l2)

{

return ((ccw(l1.p1, l1.p2, l2.p1) != ccw(l1.p1, l1.p2, l2.p2)) && (ccw(l2.p1, l2.p2, l1.p1) != ccw(l2.p1, l2.p2, l1.p2))); }

int CIntersectDlgDlg::ccw(point p1, point p2, point p3)

{

double dx1, dx2, dy1, dy2;

dx1 = p2.x - p1.x; 

dy1 = p2.y - p1.y;

dx2 = p3.x - p2.x; 

dy2 = p3.y - p2.y;

if (dy1 * dx2 < dy2 * dx1) 

return 1;

else 

return 0;

}

Let me know if you have questions or if you can make it better...

Martin

	-----Original Message----- 
	From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
	Sent: Wed 1/21/2004 10:04 AM 
	To: gdal-dev@remotesensing.org; PRouse@weather.com 
	Cc: 
	Subject: Re: [Gdal-dev] GDAL Capabilities
	
	

	Patrick Rouse wrote:
	> Hi,
	>
	> I am looking for an opensource solution to a simple gis/topology problem.  I am
	> an Arcinfo guy, so I know how to do this within the realm of aml and visual
	> basic, but I have been tasked with creating a simple opensource (c++), portable
	> program to generate a dynamic polygon based on lat/lon points input by the user
	> and determine which polygons on a shapefile (us counties) fall within or
	> intersect this dynamic polygon.  A simple check to see if the county polygons in
	> the shapefile fall within or intersect  the dynamic polygon.  Browsing the
	> documentation it seems that this library is capable of this.  I am not much of a
	> c++ programmer, but I will be assisting a real c++ programmer in this project
	> and I am looking for possible solutions to present to him.  Let me know if this
	> library can handle this operation and if possible links to any sample code used
	> for opening shapefiles and performing topological tests.
	
	Patrick,
	
	GDAL's OGR API can be used to read the shapefiles for the counties, but
	GDAL/OGR does not include functions to overlay polygons on polygons, so there
	is no rigerous mechanism to determine which (if any) county polygons
	intersect your dynamic polygon.
	
	You can get an approximate answer by computing the extents of the dynamic
	polygon, and setting this rectangular extent as the SpatialFilter being
	reading back counties.  This way you will only get counties back whose
	extent rectangle intersects the extent rectangle of your dynamic polygon.
	
	However, to do the job properly you need overlay software.  I would suggest
	the GEOS library as a component to do this.
	
	   http://geos.refractions.net/
	
	It's possible that GEOS is already integrated with a shapefile reader in
	which case you don't need GDAL/OGR at all.  At some point I intend to
	integrate GEOS into OGR so that various spatial operators on OGRGeometry
	objects can be done by internally calling GEOS.   However, there is no
	schedule for that work, so there isn't any point in your waiting for it.
	
	An overall sweeter solution to your problem, might be to load your county
	shapefiles into PostGIS, and then use the spatial operators in PostGIS
	to find which ones intersect your dynamic polygon.  This could be done from
	SQL.  PostGIS is a spatial extension to the Postgres RDBMS.  The PostGIS
	spatial predicates are built on GEOS.
	
	Best regards,
	--
	---------------------------------------+--------------------------------------
	I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
	light and sound - activate the windows | http://pobox.com/~warmerdam
	and watch the world go round - Rush    | Geospatial Programmer for Rent
	
	
	_______________________________________________
	Gdal-dev mailing list
	Gdal-dev@remotesensing.org
	http://remotesensing.org/mailman/listinfo/gdal-dev
	


From MChapman at sanz.com  Wed Jan 21 12:56:32 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] GDAL Capabilities
Message-ID: <ED3A48B9840E594890A2BC172D119465E63A92@mailman.san.com>

Patrick,

One note on using those functions.  If you have a polygon that crosses the DateLine (180, -180) you need to add 360 to every lon or x point that is negative in order to project the point into positive XY space.  This is accomplished easily if you're using an stl vector to store your points.  If you're using MFC let me know and I will send you a sample app that uses this intersection code and the windows GDI to graphically show the intersections.  I use this app to test my intersection code....it's nice because you can quickly plug in test case scenarios and see if the work with the code.

Martin

-----Original Message-----

From: gdal-dev-admin@remotesensing.org [mailto:gdal-dev-admin@remotesensing.org <mailto:gdal-dev-admin@remotesensing.org> ] On Behalf Of Chapman, Martin

Sent: Wednesday, January 21, 2004 10:04 AM

To: gdal-dev@remotesensing.org; gdal-dev@remotesensing.org

Subject: RE: [Gdal-dev] GDAL Capabilities

 

Patrick,

You can also write your own IsPointInPolygon() and IsLineInPolygon() functions very easily. I can send you the code if you like, but you will still need a lib to open the vector files to get a hold of the shape geometry. Also, you could link to the OpenGL library and use the gluPickMatrix() function to determine intersection of polygons. You need to know how to use OpenGL but it's spatial query functions (collision detection) are very powerful because it can do 3D intersection as well as 2D. Just a thought.

Martin

-----Original Message----- 

From: Tyler Mitchell [mailto:TMitchell@lignum.com <mailto:TMitchell@lignum.com> ] 

Sent: Wed 1/21/2004 9:48 AM 

To: gdal-dev@remotesensing.org 

Cc: 

Subject: Re: [Gdal-dev] GDAL Capabilities

 

 

 

 

 

> program to generate a dynamic polygon based on lat/lon points input

> by the user

> and determine which polygons on a shapefile (us counties) fall within or

> intersect this dynamic polygon. A simple check to see if the county

> polygons in

> the shapefile fall within or intersect the dynamic polygon.

Patrick,

I'll take a kick at an answer, then others can correct me or fill in the

gaps.

I would say a general "yes" to your question and would highly recommend

GDAL library for the task. If there are holes in the functionality for

your specific task, there are bound to be other options (i.e. using the

PostGIS spatial database would allow you to do everything you want, all

using SQL within a database. You should consider that as well. See

http://postgis.refractions.net <http://postgis.refractions.net/> ).

You can program with GDAL (or more specifically, OGR, the vector subset of

the GDAL libraries) to create new datasources and create features

programmatically. I could envision how I would do this, receiving a list

of vertices/points in sequential order from the user. Then building a

polygon feature with these. You could then open the county polygons file

too.

The only part I'm not sure of is GDAL/OGR's abilities to do geometric

comparisons between features. I bet it's there somewhere but I haven't

touched it yet.

Also note that I work primarily in Python which has hooks into the c++

library. Being an ArcInfo guy myself, I've found Python to be as intuitive

as AML and much more fun than VB :)

For what it's worth,

Tyler

_______________________________________________

Gdal-dev mailing list

Gdal-dev@remotesensing.org

http://remotesensing.org/mailman/listinfo/gdal-dev <http://remotesensing.org/mailman/listinfo/gdal-dev> 

_______________________________________________

Gdal-dev mailing list

Gdal-dev@remotesensing.org http://remotesensing.org/mailman/listinfo/gdal-dev <http://remotesensing.org/mailman/listinfo/gdal-dev> 


From gillian.walter at atlantis-scientific.com  Wed Jan 21 13:00:39 2004
From: gillian.walter at atlantis-scientific.com (Gillian Walter)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] SRTM file format
In-Reply-To: <400EAE0B.5010505@pobox.com>
References: <200401211551.i0LFpJl06491@yoda.imagelinks.com> <400EAE0B.5010505@pobox.com>
Message-ID: <400EBE47.9070405@atlantis-scientific.com>

Hi,

For those of you who also use openev, Andrey has added a neat tool for 
reading raw binary files (it adds a menu entry File/Open Raw... that 
launches a gui allowing you to specify lines, samples, number of bands, 
interleaving, datatype, header size, byte swapping).  This should 
eliminate the need to manually create header files for viewing flat 
binary files in openev.  This tool is new though, so you'd have to get 
it from cvs.

Gillian

Frank Warmerdam wrote:

> mathieu_gdal wrote:
>
>> Dear all,
>>
>> Is GDAL compatible with the STRM file format?
>> This format is used to encode DEMs, and it is in binary. The 
>> extension is
>> hgt.
>> I have made a try, it looks like it is not recognize by GDAL, but maybe
>> there is a trick?
>>
>> In advance, thank you
>> Mathieu
>
>
> Mathieu,
>
> My understanding is that the .hgt file is a raw binary file.  It can 
> be read
> with GDAL using an appropriately written ESRI BIL .hdr file or some other
> mechanism that desribes raw data files (such as PCI .aux).  I was under
> the impression the data was distributed with an ESRI BIL .hdr file but 
> that
> some sort of renaming was required to get things working properly.
>
> There was some sort of past discussion of this on the gdal-dev, grass or
> VTP list.  Not sure which.
>
> Best regards,
>



From ben at vterrain.org  Wed Jan 21 14:09:50 2004
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] SRTM file format
Message-ID: <1074712190.25614@cyclone.he.net>

Indeed, it was discussed on the VTP list, and support for .hgt was 
added to the VTP software.  VTBuilder can now read .hgt automatically 
(no need to enter dimensions, etc. as with other raw files) in 
addition, of course, to all the other GDAL-supported formats.

-Ben
http://vterrain.org/

> mathieu_gdal wrote:
> > Dear all,
> > 
> > Is GDAL compatible with the STRM file format?
> > This format is used to encode DEMs, and it is in binary. The
> > extension is hgt.
> > I have made a try, it looks like it is not recognize by GDAL, but
> > maybe there is a trick?
> 
> Mathieu,
> 
> My understanding is that the .hgt file is a raw binary file.  It can
> be read with GDAL using an appropriately written ESRI BIL .hdr file
> or some other mechanism that desribes raw data files [...]
> 
> There was some sort of past discussion of this on the gdal-dev,
> grass or VTP list.  Not sure which.

+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for 
Rent

From jgallagher at gso.uri.edu  Wed Jan 21 18:46:32 2004
From: jgallagher at gso.uri.edu (James Gallagher)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Enhancements to the DODS/OPeNDAP driver
In-Reply-To: <40071DA2.5050302@pobox.com>
References: <1074100875.31729.52.camel@comet.dods.org>
	 <4005921E.9040400@pobox.com> <1074207221.31729.338.camel@comet.dods.org>
	 <40071DA2.5050302@pobox.com>
Message-ID: <1074728791.16294.103.camel@comet.dods.org>

I have completed some more work on the DODS/OPeNDAP driver. It can now
read portions of rasters using the DAP constraint expressions. This
means that only the parts of the raster actually requested by the
application will be read over the wire. The code is in CVS.

There are some further optimizations that are pretty obvious and I'll
work on those at time permits.

James
-- 
__________________________________________________________________________
James Gallagher		         The Distributed Oceanographic Data System
jgallagher@gso.uri.edu               http://unidata.ucar.edu/packages/dods
Voice/Fax: 406.723.8663


From nhv at cape.com  Wed Jan 21 20:15:55 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Enhancements to the DODS/OPeNDAP driver
In-Reply-To: <1074728791.16294.103.camel@comet.dods.org>
Message-ID: <EKEJIKAILPONGGENMBGAIECJGCAA.nhv@cape.com>

James Gallagher writes:
> 
> I have completed some more work on the DODS/OPeNDAP driver. It can now
> read portions of rasters using the DAP constraint expressions. This
> means that only the parts of the raster actually requested by the
> application will be read over the wire. The code is in CVS.

Nice :-)

Has anyone got any tips on compiling DODS/OPeNDAP with Cygwin ?

Cheers

Norman

From jgallagher at gso.uri.edu  Fri Jan 23 10:57:38 2004
From: jgallagher at gso.uri.edu (James Gallagher)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Enhancements to the DODS/OPeNDAP driver
In-Reply-To: <EKEJIKAILPONGGENMBGAIECJGCAA.nhv@cape.com>
References: <EKEJIKAILPONGGENMBGAIECJGCAA.nhv@cape.com>
Message-ID: <1074873458.16294.240.camel@comet.dods.org>

On Wed, 2004-01-21 at 18:15, Norman Vine wrote:
> James Gallagher writes:
> > 
> > I have completed some more work on the DODS/OPeNDAP driver. It can now
> > read portions of rasters using the DAP constraint expressions. This
> > means that only the parts of the raster actually requested by the
> > application will be read over the wire. The code is in CVS.
> 
> Nice :-)
> 
> Has anyone got any tips on compiling DODS/OPeNDAP with Cygwin ?

At one point we were supporting this but decided instead to support MS
VC++. Since that works I'll be Cygwin will work too. You might look at
defining WIN32 when you build...

Let me know how it goes.

James
> 
> Cheers
> 
> Norman
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
-- 
__________________________________________________________________________
James Gallagher		         The Distributed Oceanographic Data System
jgallagher@gso.uri.edu               http://unidata.ucar.edu/packages/dods
Voice/Fax: 406.723.8663


From thisiseric at shaw.ca  Fri Jan 23 11:01:27 2004
From: thisiseric at shaw.ca (thisiseric@shaw.ca)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Build/ Compile problem
Message-ID: <49ecca49b106.49b10649ecca@shaw.ca>

Good morning, 

I am trying to get up and running with GDAL and durring my installation of 1.1.9 on Mandrake Linux 9.2. When I try to run the 'make all' the following error stops the install:

make[1]: Entering directory `/usr/software/Map Server/gdal-1.1.9/apps' gcc -I/usr/software/Map Server/gdal-1.1.9 -I/usr/software/Map Server/gdal-1.1.9/port -I/usr/software/Map Server/gdal-1.1.9/gcore -I/usr/software/Map Server/gdal-1.1.9/ogr -I/usr/software/Map Server/gdal-1.1.9/frmts -I/usr/software/Map Server/gdal-1.1.9/alg -c -Wall -fPIC -O2    gdalinfo.c -o gdalinfo.o
gcc: cannot specify -o with -c or -S and multiple compilations
make[1]: *** [gdalinfo.o] Error 1
make[1]: Leaving directory `/usr/software/Map Server/gdal-1.1.9/apps'
make: *** [apps-target] Error 2

Admiditly I am not an experienced Lnux user but we all have to start somewhere.

I thank you in advance for any help that you can provide me.

Eric W



From warmerdam at pobox.com  Fri Jan 23 11:42:33 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Build/ Compile problem
In-Reply-To: <49ecca49b106.49b10649ecca@shaw.ca>
References: <49ecca49b106.49b10649ecca@shaw.ca>
Message-ID: <40114EF9.5010606@pobox.com>

thisiseric@shaw.ca wrote:
> Good morning, 
> 
> I am trying to get up and running with GDAL and durring my installation of 1.1.9 on Mandrake Linux 9.2. When I try to run the 'make all' the following error stops the install:
> 
> make[1]: Entering directory `/usr/software/Map Server/gdal-1.1.9/apps' gcc -I/usr/software/Map Server/gdal-1.1.9 -I/usr/software/Map Server/gdal-1.1.9/port -I/usr/software/Map Server/gdal-1.1.9/gcore -I/usr/software/Map Server/gdal-1.1.9/ogr -I/usr/software/Map Server/gdal-1.1.9/frmts -I/usr/software/Map Server/gdal-1.1.9/alg -c -Wall -fPIC -O2    gdalinfo.c -o gdalinfo.o
> gcc: cannot specify -o with -c or -S and multiple compilations
> make[1]: *** [gdalinfo.o] Error 1
> make[1]: Leaving directory `/usr/software/Map Server/gdal-1.1.9/apps'
> make: *** [apps-target] Error 2
> 
> Admiditly I am not an experienced Lnux user but we all have to start somewhere.
> 
> I thank you in advance for any help that you can provide me.

Eric,

I believe the problem is that your directory name contains a space.  This is
generally bad karma.  You might be able to work around it with suitable
quoting but my suggestion is to rename your "Map Server" directory to "MapServer".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From JGillette at rfmd.com  Fri Jan 23 13:09:22 2004
From: JGillette at rfmd.com (John Gillette)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] odgi install for gdal
Message-ID: <8EC17EE03C13464E8049ADA41C53EB9E75C0B5@mail3>

If this is not correct list for this, please let me know.

I am trying to make ogdi for use with gdal. However in gdal,
there are headers which are not being found. I do not have
root privileges. I use space allocated to me on /scratch.

I set TOPDIR=/scratch/ogdi/ogdi-3.1.2
      TARGET=linux
      and LD_LIBRARY_PATH as required.

Do I then need to do a ./configure?

I then do make

The libraries are made and appear in:
 /scratch/ogdi/ogdi-3.1.2/bin/linux
but the "missing" headers are in: 
 /scratch/ogdi/ogdi-3.1.2/include
Note that there is NO: 
 /scratch/ogdi/ogdi-3.1.2/include/linux

Am I supposed to make install after make?
Doing this fails because of trying to install to
 /usr/local/...

If I try ./configure --prefix=/scratch/local,
it still tries to install at /usr/local/...

Should I just copy the libraries to /scratch/local/lib
and headers to /scratch/local/include? Making GDAL
without ogdi has created these here already.

Are the headers in /scratch/ogdi/ogdi-3.1.2/include
the correct headers (since I don't see
 /scratch/ogdi/ogdi-3.1.2/include/linux)?

Thank you
John Gillette 



From dtidrow at objectsciences.com  Fri Jan 23 17:45:15 2004
From: dtidrow at objectsciences.com (Don Tidrow)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Geotiff metadata conversion?
Message-ID: <4011A3FB.7030008@objectsciences.com>

I have a set of geotiff images that I need to be able to reproject into 
lat/long space in order to slice them up into tiles of specific dimensions 
(in arcseconds).  The output of gdalinfo for the files looks like this:

Driver: GTiff/GeoTIFF
Size is 7876, 12796
Coordinate System is `'
GCP Projection = GEOGCS["unnamed",DATUM["WGS_1984",SPHEROID["WGS 
84",6378137,298.2572235629972,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]
GCP[  0]: Id=1, Info=
           (0,0) -> (-76.6208,37.1811,0)
GCP[  1]: Id=2, Info=
           (7876,0) -> (-76.5321,37.1823,0)
GCP[  2]: Id=3, Info=
           (0,12796) -> (-76.6184,37.0658,0)
Metadata:
   TIFFTAG_SOFTWARE=Sensor Systems RemoteView
   TIFFTAG_DATETIME=2004:00:14 11:44:23
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,12796.0)
Upper Right ( 7876.0,    0.0)
Lower Right ( 7876.0,12796.0)
Center      ( 3938.0, 6398.0)
Band 1 Block=1024x1024 Type=Byte, ColorInterp=Gray


I have other imagery, downloaded from the Landsat repository, that works 
fine in my image-processing program.  The output of gdalinfo for these 
files looks like this:

Driver: GTiff/GeoTIFF
Size is 7882, 7517
Coordinate System is:
PROJCS["WGS 84 / UTM zone 38N",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.2572235629972,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",45],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","32638"]]
Origin = (390022.500000,3779841.000000)
Pixel Size = (28.500000,-28.500000)
Metadata:
   TIFFTAG_XRESOLUTION=72
   TIFFTAG_YRESOLUTION=72
   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  (  390022.500, 3779841.000) ( 43d48'25.11"E, 34d 9'13.32"N)
Lower Left  (  390022.500, 3565606.500) ( 43d49'58.39"E, 32d13'18.10"N)
Upper Right (  614659.500, 3779841.000) ( 46d14'37.70"E, 34d 9'11.50"N)
Lower Right (  614659.500, 3565606.500) ( 46d13'0.45"E, 32d13'16.41"N)
Center      (  502341.000, 3672723.750) ( 45d 1'30.41"E, 33d11'36.11"N)
Band 1 Block=7882x1 Type=Byte, ColorInterp=Gray
   Overviews: 986x940


Is there a gdal utility/function(s) that will convert from the first format 
into the second, or is there simply not enough metadata in the first 
geotiff to convert it?

Don

-- 

+----------------------------------------+
|  Don Tidrow                            |
|  Visualization Software Engineer       |
|  Object Sciences Corporation           |
|  ph: 703-253-1094                      |
+----------------------------------------+


From warmerdam at pobox.com  Fri Jan 23 18:00:20 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Geotiff metadata conversion?
In-Reply-To: <4011A3FB.7030008@objectsciences.com>
References: <4011A3FB.7030008@objectsciences.com>
Message-ID: <4011A784.7000009@pobox.com>

Don Tidrow wrote:
> I have a set of geotiff images that I need to be able to reproject into 
> lat/long space in order to slice them up into tiles of specific 
> dimensions (in arcseconds).  The output of gdalinfo for the files looks 
> like this:
> 
> Driver: GTiff/GeoTIFF
> Size is 7876, 12796
> Coordinate System is `'
> GCP Projection = GEOGCS["unnamed",DATUM["WGS_1984",SPHEROID["WGS 
> 84",6378137,298.2572235629972,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]] 
> 
> GCP[  0]: Id=1, Info=
>           (0,0) -> (-76.6208,37.1811,0)
> GCP[  1]: Id=2, Info=
>           (7876,0) -> (-76.5321,37.1823,0)
> GCP[  2]: Id=3, Info=
>           (0,12796) -> (-76.6184,37.0658,0)
> Metadata:
>   TIFFTAG_SOFTWARE=Sensor Systems RemoteView
>   TIFFTAG_DATETIME=2004:00:14 11:44:23
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,12796.0)
> Upper Right ( 7876.0,    0.0)
> Lower Right ( 7876.0,12796.0)
> Center      ( 3938.0, 6398.0)
> Band 1 Block=1024x1024 Type=Byte, ColorInterp=Gray
> 

...
> Is there a gdal utility/function(s) that will convert from the first 
> format into the second, or is there simply not enough metadata in the 
> first geotiff to convert it?


Don,

The file above has georeferencing "described" by 3 control points at the
top left, top right, and bottom left.  These are sufficient to generate
an affine transformation describing the file.  The simplies way to resample
the file into a north-up file would be to just run gdalwarp on it.

eg.

gdalwarp in.tif out.tif

Internally gdalwarp will produce a 1st order polynomial based on the GCPs,
warp the image into the same coordinate system (WGS84) but with a nice
north up georeferencing transform.

You may however run into problems if a 1st order, 3 point derived
polynomial is not enough to accurately warp the image.  Unless the image
is already resampled on a lat/long grid but sheared or rotated a bit for
some reason, it is unlikely you will get good results.  In that case, as
you suggest, the 3 lat/long control points may not be enough to accurately
describe the image location.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From nhv at cape.com  Fri Jan 23 18:13:32 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Geotiff metadata conversion?
In-Reply-To: <4011A3FB.7030008@objectsciences.com>
Message-ID: <EKEJIKAILPONGGENMBGAAEJLGCAA.nhv@cape.com>

Don Tidrow writes:
> 
> 
> Is there a gdal utility/function(s) that will convert from the first format 
> into the second, or is there simply not enough metadata in the first 
> geotiff to convert it?

Don

If you have more projection info available as perhaps an auxillary 
 metadata file it is fairly easy to insert that into the tiff file with geotifcp 

HTH

Norman

From chen at yinyue123.com  Sun Jan 25 04:29:23 2004
From: chen at yinyue123.com (Fu Chen)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] share the common edge of nearby polygon?
Message-ID: <000101c3e325$b9488aa0$c50042da@novabook>

Hi!

I try to use Douglas-Peucker approximation algorithm to simplify the
polygon in the GIS datasets. But it won't be useful on the common shp
file for by ogr it get the points of the whole polygon. I can't know
where is the common edge of nearby polygon. If use DP algorithm on every
polygon itself, the common edge will not fit together.I need to put DP
algorithm on the common edge seperately.

So I hope the dataset of GIS should have the information of the common
edge, and the polygon built by refering to common edges. This will save
the store space (will not store the same point twice) and be easy to
simply the line.

any GIS format take this design? Any software to translate shp file to
that format?

Thank you!


From spoerri at duke.edu  Fri Jan 23 04:44:48 2004
From: spoerri at duke.edu (Christoph Spoerri)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] share the common edge of nearby polygon?
In-Reply-To: <000101c3e325$b9488aa0$c50042da@novabook>
References: <000101c3e325$b9488aa0$c50042da@novabook>
Message-ID: <200401230444.48927.spoerri@duke.edu>

What you are looking for is a vector format with topology. The one format I 
know of is the ArcINFO/coverage format. Yet, when using the OGR the topology 
information is lost, since it does not expose the topology of the underlaying 
data. But, Frank W. may have more info on this.

You may want to look at the GEOS library, which has some support for topology 
(http://geos.refractions.net/).

Christoph

On Sunday 25 January 2004 04:29 am, Fu Chen wrote:
> Hi!
>
> I try to use Douglas-Peucker approximation algorithm to simplify the
> polygon in the GIS datasets. But it won't be useful on the common shp
> file for by ogr it get the points of the whole polygon. I can't know
> where is the common edge of nearby polygon. If use DP algorithm on every
> polygon itself, the common edge will not fit together.I need to put DP
> algorithm on the common edge seperately.
>
> So I hope the dataset of GIS should have the information of the common
> edge, and the polygon built by refering to common edges. This will save
> the store space (will not store the same point twice) and be easy to
> simply the line.
>
> any GIS format take this design? Any software to translate shp file to
> that format?
>
> Thank you!
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


From neteler at itc.it  Mon Jan 26 03:31:30 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] share the common edge of nearby polygon?
In-Reply-To: <200401230444.48927.spoerri@duke.edu>
References: <000101c3e325$b9488aa0$c50042da@novabook> <200401230444.48927.spoerri@duke.edu>
Message-ID: <20040126083130.GA1418@thuille.itc.it>

On Fri, Jan 23, 2004 at 04:44:48AM -0500, Christoph Spoerri wrote:
> What you are looking for is a vector format with topology. The one format I 
> know of is the ArcINFO/coverage format. Yet, when using the OGR the topology 
> information is lost, since it does not expose the topology of the underlaying 
> data. But, Frank W. may have more info on this.
> 
> You may want to look at the GEOS library, which has some support for topology 
> (http://geos.refractions.net/).
> 
> Christoph

Another option is GRASS GIS (Free Software, take a look at GRASS 5.7!):

http://grass.itc.it

[ It were nice to have Douglas-Peucker implemented directly.]

Markus

> 
> On Sunday 25 January 2004 04:29 am, Fu Chen wrote:
> > Hi!
> >
> > I try to use Douglas-Peucker approximation algorithm to simplify the
> > polygon in the GIS datasets. But it won't be useful on the common shp
> > file for by ogr it get the points of the whole polygon. I can't know
> > where is the common edge of nearby polygon. If use DP algorithm on every
> > polygon itself, the common edge will not fit together.I need to put DP
> > algorithm on the common edge seperately.
> >
> > So I hope the dataset of GIS should have the information of the common
> > edge, and the polygon built by refering to common edges. This will save
> > the store space (will not store the same point twice) and be easy to
> > simply the line.
> >
> > any GIS format take this design? Any software to translate shp file to
> > that format?
> >
> > Thank you!
> >

From pushkar at GRI.MsState.Edu  Mon Jan 26 20:31:01 2004
From: pushkar at GRI.MsState.Edu (Pushkar Pradhan)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Convert from MINISBLACK TO PHOTOMETRIC_RGB
Message-ID: <MJEBIBGMCDKIGEHPDECCIENFCGAA.pushkar@erc.msstate.edu>

A few days ago I asked how to convert TIFs from MINISBLACK TO
PHOTOMETRIC_RGB and Andrey had built this option into the latest GDAL. I
just got back to this task and have installed the latest GDAL.

However, I don't know which utility to use, is it gdal_translate? If yes,
how do I use it?
Thanks,
Pushkar




From pushkar at GRI.MsState.Edu  Mon Jan 26 20:40:05 2004
From: pushkar at GRI.MsState.Edu (Pushkar Pradhan)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Anyone heard of ESML? (maybe off-topic)
Message-ID: <MJEBIBGMCDKIGEHPDECCMENFCGAA.pushkar@erc.msstate.edu>

I'm working on a project which requires us to read some of the scientific
data formats like HDF-EOS, netCDF etc.
Some colleagues suggested the use of Earth Science Markup Language
(http://esml.itsc.uah.edu) which extends XML for this very task. They claim
that with this user can define how the data is stored so that any format can
be read.
I think GDAL is able to read/write HDF/netCDF etc. and many other popular
formats (can it read HDF-EOS a variant of HDF?).
I'm trying to understand how ESML works. If anybody has heard about it, can
you tell how it compares with GDAL? Would it be of any help to the GDAL
project?

My apologies if this is off-topic or irrelevant.
Pushkar





From warmerdam at pobox.com  Mon Jan 26 22:04:48 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Anyone heard of ESML? (maybe off-topic)
In-Reply-To: <MJEBIBGMCDKIGEHPDECCMENFCGAA.pushkar@erc.msstate.edu>
References: <MJEBIBGMCDKIGEHPDECCMENFCGAA.pushkar@erc.msstate.edu>
Message-ID: <4015D550.3070305@pobox.com>

Pushkar Pradhan wrote:
> I'm working on a project which requires us to read some of the scientific
> data formats like HDF-EOS, netCDF etc.
> Some colleagues suggested the use of Earth Science Markup Language
> (http://esml.itsc.uah.edu) which extends XML for this very task. They claim
> that with this user can define how the data is stored so that any format can
> be read.
> I think GDAL is able to read/write HDF/netCDF etc. and many other popular
> formats (can it read HDF-EOS a variant of HDF?).
> I'm trying to understand how ESML works. If anybody has heard about it, can
> you tell how it compares with GDAL? Would it be of any help to the GDAL
> project?

Pushkar,

I have quickly review the esml web site.  It seems ESML is an XML format
for describing the data in a seperate data file.  The file might be ascii,
"raw binary", HDF-EOS or GRIB format.   In the case of ascii or binary formats
the xml file itself has enough information to described the format such that
the raw data can be extracted.  In the case of HDF-EOS or GRIB it is assumed
that the application still "knows" about those formats, but the ESML file is
(in theory at least) providing a place to hang extra metadata.

EMSL also comes with a C++ and Python library for accessing ESML desribed files.
I assume this library must in turn link in HDF-EOS and GRIB libraries.  It
provides read (and write?) access to the files desribed by an ESML file.

In a sense then, the ESML libraries provide multi-format access to scientific
datasets, much like GDAL does, though only HDF-EOS, GRIB, and any format that
can be described by the ascii or binary data descriptions *and* that has an
esml file associated with it.

Now, the document and examples seem a bit thin.  It may be that esml and the
associated libraries do more than is immediately obvious.  But to me it seems
that they haven't really taken advantage of this XML file to allow alot of
extra metadata and semantic information to be associated with the datasets
as I would have expected.

I would not be adverse to implementing support for reading (and perhaps
writing) ESML decribed data, and perhaps even using ESML as the preferred GDAL
format for desrcibing raw data files.  I am not that keen on adding a dependence
on their libraries though that too is an option.   However, any such effort is
non-trivial and I'm not in a great hurry to do it.  If someone else wanted to
build a driver for it, that would be great.

I would also be more interested in using it as the preferred format for
GDAL raw files if it supportted arbitrary extra metadata (stuff like
colortables, coordinate systems and so forth) in some practical fashion.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From cgn at globexplorer.com  Mon Jan 26 23:49:11 2004
From: cgn at globexplorer.com (Chris G. Nicholas)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Anyone heard of ESML? (maybe off-topic)
Message-ID: <71E37EF6B7DCC1499CEA0316A256832801472C9F@loki.wc.globexplorer.net>

I'm know I'm dense, but can someone please explain what inherent advantage this newfangled XML shtuff has over plain 'ole looking at the file suffix (.tif, .bil, .jp2, .hdf, .shp, .ppm, .sid, etc), which one will have to do anyway?

and then again, (for you old timers!) there was (and still is!) a file's "magic" number.  'man magic' on a *NIX system yields:

"NAME
       magic - file command?s magic number file
 
DESCRIPTION
       This  manual page documents the format of the magic file as used by the
       file(1) command, version 3.39. The file command identifies the type  of
       a  file  using,  among  other tests, a test for whether the file begins
       with a certain magic number.  The file /usr/share/magic specifies  what
       magic numbers are to be tested for, what message to print if a particu-
       lar magic number is found, and additional information to  extract  from
       the file.       

       Each  line  of  the file specifies a test to be performed.  A test com-
       pares the data starting at a particular  offset  in  the  file  with  a
       1-byte,  2-byte, or 4-byte numeric value or a string..... 
"

> but the ESML file is (in theory at least) providing a place to hang extra metadata.

OK, ok...now I understand...more "catch-all" mechanisms.  I must confess that here at GlobeXplorer we extract all relevant header items and put the info into an external database, with hooks to collection-specific metadata schemas. I understand that geojp2 intends to 'put it all' into the headers as well.

but that's the nice thing with standards - you get to choose which one you like. :-)

I am facing something similar with my OpenGIS WMS service - when one clicks on an image for "FeatureInfo" - what do I return?

At this point, I am inclined to return a GlobeXplorer tracking_id, with XML schema scoped to com.globexplorer, with hooks to "drill-down" into that tracking_id for schema and values.

comments...suggestions...flames welcomed

Chris

-----Original Message-----
From:	Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent:	Mon 1/26/2004 7:04 PM
To:	gdal-dev@remotesensing.org
Cc:	
Subject:	Re: [Gdal-dev] Anyone heard of ESML? (maybe off-topic)
Pushkar Pradhan wrote:
> I'm working on a project which requires us to read some of the scientific
> data formats like HDF-EOS, netCDF etc.
> Some colleagues suggested the use of Earth Science Markup Language
> (http://esml.itsc.uah.edu) which extends XML for this very task. They claim
> that with this user can define how the data is stored so that any format can
> be read.
> I think GDAL is able to read/write HDF/netCDF etc. and many other popular
> formats (can it read HDF-EOS a variant of HDF?).
> I'm trying to understand how ESML works. If anybody has heard about it, can
> you tell how it compares with GDAL? Would it be of any help to the GDAL
> project?

Pushkar,

I have quickly review the esml web site.  It seems ESML is an XML format
for describing the data in a seperate data file.  The file might be ascii,
"raw binary", HDF-EOS or GRIB format.   In the case of ascii or binary formats
the xml file itself has enough information to described the format such that
the raw data can be extracted.  In the case of HDF-EOS or GRIB it is assumed
that the application still "knows" about those formats, but the ESML file is
(in theory at least) providing a place to hang extra metadata.

EMSL also comes with a C++ and Python library for accessing ESML desribed files.
I assume this library must in turn link in HDF-EOS and GRIB libraries.  It
provides read (and write?) access to the files desribed by an ESML file.

In a sense then, the ESML libraries provide multi-format access to scientific
datasets, much like GDAL does, though only HDF-EOS, GRIB, and any format that
can be described by the ascii or binary data descriptions *and* that has an
esml file associated with it.

Now, the document and examples seem a bit thin.  It may be that esml and the
associated libraries do more than is immediately obvious.  But to me it seems
that they haven't really taken advantage of this XML file to allow alot of
extra metadata and semantic information to be associated with the datasets
as I would have expected.

I would not be adverse to implementing support for reading (and perhaps
writing) ESML decribed data, and perhaps even using ESML as the preferred GDAL
format for desrcibing raw data files.  I am not that keen on adding a dependence
on their libraries though that too is an option.   However, any such effort is
non-trivial and I'm not in a great hurry to do it.  If someone else wanted to
build a driver for it, that would be great.

I would also be more interested in using it as the preferred format for
GDAL raw files if it supportted arbitrary extra metadata (stuff like
colortables, coordinate systems and so forth) in some practical fashion.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev





From dron at ak4719.spb.edu  Tue Jan 27 02:49:22 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Convert from MINISBLACK TO PHOTOMETRIC_RGB
In-Reply-To: <MJEBIBGMCDKIGEHPDECCIENFCGAA.pushkar@erc.msstate.edu>
References: <MJEBIBGMCDKIGEHPDECCIENFCGAA.pushkar@erc.msstate.edu>
Message-ID: <20040127074922.GA10456@ak4719.spb.edu>

On Mon, Jan 26, 2004 at 07:31:01PM -0600, Pushkar Pradhan wrote:
> A few days ago I asked how to convert TIFs from MINISBLACK TO
> PHOTOMETRIC_RGB and Andrey had built this option into the latest GDAL.
> I just got back to this task and have installed the latest GDAL.
> 
> However, I don't know which utility to use, is it gdal_translate? If
> yes, how do I use it?

Yes, you need gdal_trnslate:

 http://www.remotesensing.org/gdal/gdal_utilities.html#gdal_translate

Every GDAL driver has a set of specific options (described at driver
help pages), for TIFF you can do

$ gdal_translate -of GTiff -co "PHOTOMETRIC=RGB" in.tif out.tif

to convert input MINISBLACK image to the RGB one.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Tue Jan 27 11:45:08 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Anyone heard of ESML? (maybe off-topic)
In-Reply-To: <71E37EF6B7DCC1499CEA0316A256832801472C9F@loki.wc.globexplorer.net>
References: <71E37EF6B7DCC1499CEA0316A256832801472C9F@loki.wc.globexplorer.net>
Message-ID: <40169594.2060307@pobox.com>

Chris G. Nicholas wrote:
> I'm know I'm dense, but can someone please explain what inherent 
 > advantage this newfangled XML shtuff has over plain 'ole looking
 > at the file suffix (.tif, .bil, .jp2, .hdf, .shp, .ppm, .sid, etc),
 > which one will have to do anyway?
> 
> and then again, (for you old timers!) there was (and still is!) a file's "magic" number.  'man magic' on a *NIX
> system yields:
> 
> "NAME magic - file command?s magic number file

Chris,

While useful, the "magic" technology has it's limitations.  Though generally
GDAL tries a similar approach where I first try to classify files by looking
for various magic values.  It doesn't help for actual raw files though, for
which ESML would be one approach to describing.


> I am facing something similar with my OpenGIS WMS service - when one clicks 
 > on an image for "FeatureInfo" - what do I return?
> 
> At this point, I am inclined to return a GlobeXplorer tracking_id, with XML 
 > schema scoped to com.globexplorer, with hooks to "drill-down" into that
 > tracking_id for schema and values.

The feature info capability of WMS is notoriously open ended, and hence
verging on useless from an interoperability point of view.

However, your approach seems reasonable. I would encourage you to go the
extra step to ensure make return XML actually be valid GML.   I gather
the tracking id you refer to would be an id for the raster dataset from
which the view (or the pixel clicked on) was derived?  If so, it would be
nice to return a GML feature with a polygon geometry representing the
footprint of the dataset as a whole, and then various other details about
the dataset as feature attributes.

Of course, you might get better advice on this on the wms-dev mailing list.
I know there have been a number of discussions of featureinfo issues there.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alexamici at fastwebnet.it  Tue Jan 27 12:43:38 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] CInt* data types are advertised as supported by the ENVI driver
Message-ID: <200401271843.38439.alexamici@fastwebnet.it>

Frank,

in frmts/raw/envidataset.cpp the GDAL_DMD_CREATIONDATATYPES metadata advertise 
support for CInt16 and CInt32, which seems bogus, judging from the code in 
ENVIDataset::Create and from the fact that envi itself doesn't define them 
(as of versions 3.5 and 4.0).

i can fix the code myself in cvs if you ack that i didn't miss any hidden 
porpouse :)

cheers,
alessandro

From warmerdam at pobox.com  Tue Jan 27 14:41:55 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] CInt* data types are advertised as supported by the
 ENVI driver
In-Reply-To: <200401271843.38439.alexamici@fastwebnet.it>
References: <200401271843.38439.alexamici@fastwebnet.it>
Message-ID: <4016BF03.8010500@pobox.com>

Alessandro Amici wrote:
> Frank,
> 
> in frmts/raw/envidataset.cpp the GDAL_DMD_CREATIONDATATYPES metadata advertise 
> support for CInt16 and CInt32, which seems bogus, judging from the code in 
> ENVIDataset::Create and from the fact that envi itself doesn't define them 
> (as of versions 3.5 and 4.0).
> 
> i can fix the code myself in cvs if you ack that i didn't miss any hidden 
> porpouse :)

Alessandro,

Almost certainly a cut and paste error.  Please do fix it.

Thanks,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From support at geoimage.fr  Wed Jan 28 06:38:19 2004
From: support at geoimage.fr (=?iso-8859-1?Q?Fr=E9d=E9ric_Trastour?=)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] ASTER HDF Metadata problem
Message-ID: <045a01c3e593$3a90d7b0$e32346c0@pili>

Hello,

I would like to use GDAL to extract all the medata from ASTER Level 1A HDF Files.

In this files, global metadata are stocked in attributes :
    'coremetadata.0',
    'productmetada.x', ( in my files x=0, 1)
    'productmetada.y', ( in my files y=0, 1, v, s, x)
    'structmetada.z'.    ( in my files z=0, 1)

GDAL attempts to interpret all of them and success execpt for 'structmetadata'.

The problem is the following : in my sample file structmetadata is divided in structmetadata.0 and
structmetadata.1 but it is brutal cut ( at the #32000 char) of an unique ODL content.

GDAL tries to parse these two attributes separately with HDFEOSParseStructMetadata and fails
because it should concat the content of these two attributes before parsing.

Am I right ?

If will try to modify ReadGlobalAttributes in order to properly  handle this case, but I don't know
if I have to do the same processing (ie concat attr.0 .. attr.n ) for all other attributes or not.

Any ideas would be greatly appreciated.

Best regards.

Fr?d?ric.
_________________________________________________________________
Fr?d?ric Trastour - SpacEyes - dev@spaceyes.fr



From dron at ak4719.spb.edu  Wed Jan 28 15:18:32 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] ASTER HDF Metadata problem
In-Reply-To: <045a01c3e593$3a90d7b0$e32346c0@pili>
References: <045a01c3e593$3a90d7b0$e32346c0@pili>
Message-ID: <20040128201832.GA26975@ak4719.spb.edu>

On Wed, Jan 28, 2004 at 12:38:19PM +0100, Fr?d?ric Trastour wrote:
> I would like to use GDAL to extract all the medata from ASTER Level 1A
> HDF Files.
> 
> In this files, global metadata are stocked in attributes :
>     'coremetadata.0',
>     'productmetada.x', ( in my files x=0, 1)
>     'productmetada.y', ( in my files y=0, 1, v, s, x)
>     'structmetada.z'.    ( in my files z=0, 1)
> 
> GDAL attempts to interpret all of them and success execpt for
> 'structmetadata'.
> 
> The problem is the following : in my sample file structmetadata is
> divided in structmetadata.0 and structmetadata.1 but it is brutal cut
> ( at the #32000 char) of an unique ODL content.
> 
> GDAL tries to parse these two attributes separately with
> HDFEOSParseStructMetadata and fails because it should concat the
> content of these two attributes before parsing.
> 
> Am I right ?
> 
> If will try to modify ReadGlobalAttributes in order to properly
> handle this case, but I don't know if I have to do the same processing
> (ie concat attr.0 .. attr.n ) for all other attributes or not.

Hi,

Could you send me contents of the the structmetadata attributes? In my
files I have single structmetadata only. Though it has exactly 32000
in size it is normally ended structure. It is possible they should be
concatenated together, but I'm sure it should not be done for other
attributes.

						Regards,
						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Thu Jan 29 05:00:39 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] ASTER HDF Metadata problem
In-Reply-To: <014101c3e64b$0ae2fe90$e32346c0@pili>
References: <045a01c3e593$3a90d7b0$e32346c0@pili> <20040128201832.GA26975@ak4719.spb.edu> <014101c3e64b$0ae2fe90$e32346c0@pili>
Message-ID: <20040129100039.GA24719@ak4719.spb.edu>

On Thu, Jan 29, 2004 at 10:34:06AM +0100, Fr?d?ric Trastour wrote:
> you will find attached the contents of structmetadata.0 and
> structmetadata.1.

Well, looks like you are right and these files should be concatenated.

> I am working on hdf4dataset.cpp. My plans are to provide access to all
> metadata using GetMetadata and specific "Domain" values. For example,
> GetMetadata("Structmetadata") returns the ODL content of the
> concatened  Structmetadata.0 and Structmetadata.1
> Do you think that it is the right approch ?

Hmm, it may be good for Structmetadata, but driver parsing abilities
very poor now. I'm working on improving the driver using original
HDF-EOS code and thing will be changed in the next version of the driver
(but I want to commit new driver only after the next GDAL release. The
current one is more or less tested and works for many cases). Anyway,
what data you want to extract from the Structmetadata record?

> In addition, I need in my application to read other data stocked in
> the HDF File like the Ancillary_Data. I don't know if it's the hdf
> driver should provide access to this data using the metadata mecanism
> or another one ? Perhaps the driver should implement
> 'GetInternalHandle' allowing the application to access the HDF file
> directly ?

I'm not sure that GDAL is a good choice to work with HDF so intimately.
We are limited by the data model, which is designed to handle images and
simple record collections (metadata). HDF files contain tables of
different types and multidimension arrays, but we can work with arrays
only, because they can be interpreted as images.

Generally it is possible to add new base data structure GDALTable which
can be used in the driver.

I'm CC:ing to the mailing list, probably Frank can add something on this
topic.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From robert at openscenegraph.com  Thu Jan 29 07:34:46 2004
From: robert at openscenegraph.com (Robert Osfield)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Compositing warped images
Message-ID: <200401291234.46446.robert@openscenegraph.com>

Hi All,

I am currently working on adding to the OpenSceneGraph the ability to creating 
scene graph from multiple source images and DEM's.  Using GDAL I have 
implemented the ability to warp all the source data into the same projection, 
and then extract tiles from the warped source data into LOD'd geometry and 
texture map tiles.  

I am using the GDALWarpOperation::ChunkAndWarpImage(..) as per the GDAL Warp 
API Tutorial to do the warping into the same projection, and 
GDALRasterBand::RasterIO(..) method to extract the tiles.  I must say that I 
thoroughly impressed at the power that GDAL provides with such a compact set 
of API's :)

Now onto the problem in hand...  the warping itself creates black/null data 
areas at the edges which when the tile data is extracted the black areas are 
copied into the destination imagery/height field overwritting previous valid 
values.  What would be ideal for me would be for only valid values to be 
copied across to the destination, with null data ignored.  I havn't spotted a 
way of doing this with the RasterIO method so far, is there a way of doing 
this?

My fallback is to copy the extracted tile into a local tempory data area, then 
copy from this to the final destination, filtering the data as I go.  
However, this does mean allocating extra data.  Each of these tiles is not 
too big, typically around 256x256, and unlikey to get bigger than 1024x1024, 
and the tempory data can always be used.  So memory consumption isn't a real 
issue, but peformance is, and writing more code than I have to is :)

The other option might be to have an extended version of RasterIO which can do 
the filtering.

Thanks in advance for any advice that you can provide,
Robert.

From robert at openscenegraph.com  Thu Jan 29 09:19:22 2004
From: robert at openscenegraph.com (Robert Osfield)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Fix for PNG byte order problems under x86
Message-ID: <200401291419.22545.robert@openscenegraph.com>

Hi,

When working with a 16bit PNG file under x86 I found a problem with the 
endianess, looking into this issue revealled that PNG is stored as the 
network byte order/MSB, whereas x86 is LSB.  The libpng library has a 
png_set_swap() method for forcing a swap, but you have to call it explitily 
to enable it to correct the endianess for you.

In the file frmts/png/pngdataset.cpp I added:

#if CPL_LSB        
    // png are stored as MSB/big endian, so we'll need to swap bytes if on a
    // LSB/little endian machine.
    if (poDS->nBitDepth>8)
        png_set_swap(poDS->hPNG);
#endif

File attached.

Regards,
Robert.



-------------- next part --------------
A non-text attachment was scrubbed...
Name: pngdataset.cpp
Type: text/x-c++src
Size: 36969 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040129/ef3bfcf4/pngdataset.bin
From robert at openscenegraph.com  Thu Jan 29 09:22:55 2004
From: robert at openscenegraph.com (Robert Osfield)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Re: Fix for PNG byte order problems under x86
Message-ID: <200401291422.55296.robert@openscenegraph.com>

Oopps, last minute change to the code which I submited didn't compile... the 
#if should have been an #ifdef :

#ifdef CPL_LSB        
    // png are stored as MSB/big endian, so we'll need to swap bytes if on a
    // LSB/little endian machine.
    if (poDS->nBitDepth>8)
        png_set_swap(poDS->hPNG);
#endif

File attached.

Robert.


-------------- next part --------------
A non-text attachment was scrubbed...
Name: pngdataset.cpp
Type: text/x-c++src
Size: 36972 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040129/91c610d3/pngdataset.bin
From warmerdam at pobox.com  Thu Jan 29 09:55:59 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Re: Fix for PNG byte order problems under x86
In-Reply-To: <200401291422.55296.robert@openscenegraph.com>
References: <200401291422.55296.robert@openscenegraph.com>
Message-ID: <40191EFF.602@pobox.com>

Robert,

Would you be able to provide a redistributable same of a 16bit png file?
I have applied your pngdataset.cpp changes in CVS.

Thanks!

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Jan 29 10:00:12 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Compositing warped images
In-Reply-To: <200401291234.46446.robert@openscenegraph.com>
References: <200401291234.46446.robert@openscenegraph.com>
Message-ID: <40191FFC.3000606@pobox.com>

Robert Osfield wrote:
> Hi All,
> 
> I am currently working on adding to the OpenSceneGraph the ability to creating 
> scene graph from multiple source images and DEM's.  Using GDAL I have 
> implemented the ability to warp all the source data into the same projection, 
> and then extract tiles from the warped source data into LOD'd geometry and 
> texture map tiles.  
> 
> I am using the GDALWarpOperation::ChunkAndWarpImage(..) as per the GDAL Warp 
> API Tutorial to do the warping into the same projection, and 
> GDALRasterBand::RasterIO(..) method to extract the tiles.  I must say that I 
> thoroughly impressed at the power that GDAL provides with such a compact set 
> of API's :)

Robert,

Thanks!

> Now onto the problem in hand...  the warping itself creates black/null data 
> areas at the edges which when the tile data is extracted the black areas are 
> copied into the destination imagery/height field overwritting previous valid 
> values.  What would be ideal for me would be for only valid values to be 
> copied across to the destination, with null data ignored.  I havn't spotted a 
> way of doing this with the RasterIO method so far, is there a way of doing 
> this?

No, and it is unlikely that RasterIO() (already a pretty complicated monster)
will have that added.  The warper does have a concept of "nodata" values but
I am loath to add that complication to RasterIO().

> My fallback is to copy the extracted tile into a local tempory data area, then 
> copy from this to the final destination, filtering the data as I go.  
> However, this does mean allocating extra data.  Each of these tiles is not 
> too big, typically around 256x256, and unlikey to get bigger than 1024x1024, 
> and the tempory data can always be used.  So memory consumption isn't a real 
> issue, but peformance is, and writing more code than I have to is :)

Understood.

Actually, at some point I suppose I might be willing to add a RasterIOWithNoData()
that just calls down to the RasterIO() method.  It wouldn't be any more efficient
than what you are doing, but we could ensure all cases are taken care of properly
and it would save implementors some work.

> The other option might be to have an extended version of RasterIO which can do 
> the filtering.

Err, I guess I should have read one line further.

However, I am unlikely to implement this in the near future as I am pretty
busy just now.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From robert at openscenegraph.com  Thu Jan 29 10:15:25 2004
From: robert at openscenegraph.com (Robert Osfield)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Re: Fix for PNG byte order problems under x86
In-Reply-To: <40191EFF.602@pobox.com>
References: <200401291422.55296.robert@openscenegraph.com> <40191EFF.602@pobox.com>
Message-ID: <200401291515.25789.robert@openscenegraph.com>

On Thursday 29 January 2004 14:55, Frank Warmerdam wrote:
> Robert,
>
> Would you be able to provide a redistributable same of a 16bit png file?
> I have applied your pngdataset.cpp changes in CVS.

I download them from the Puget Sound Terrain project website:
 
	http://www.cc.gatech.edu/projects/large_models/ps.html

I was using this as a test example, the elevation map is a 16bit PNG file.

Cheers,
Robert.



From robert at openscenegraph.com  Thu Jan 29 10:23:55 2004
From: robert at openscenegraph.com (Robert Osfield)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Compositing warped images
In-Reply-To: <40191FFC.3000606@pobox.com>
References: <200401291234.46446.robert@openscenegraph.com> <40191FFC.3000606@pobox.com>
Message-ID: <200401291523.55064.robert@openscenegraph.com>

Hi Frank,

On Thursday 29 January 2004 15:00, Frank Warmerdam wrote:
> No, and it is unlikely that RasterIO() (already a pretty complicated
> monster) will have that added.  The warper does have a concept of "nodata"
> values but I am loath to add that complication to RasterIO().
>...

I havn't dabbled with the code but I can certainly understand that its a 
complex task changing something that targets to many different source and 
destination forms.

> Actually, at some point I suppose I might be willing to add a
> RasterIOWithNoData() that just calls down to the RasterIO() method.  It
> wouldn't be any more efficient than what you are doing, but we could ensure
> all cases are taken care of properly and it would save implementors some
> work.

Wouldn't RasterIOWithNoData() be a no op? :-)

I'll need to code something similar to RasterIOWithNoData() at my end, do you 
think it woul make sense to convert desitination line by line or to just 
convert the whole region at once.   I'm inclined to do a single RasterIO call 
and then copy and filter in one go across to the final destination.  Whats 
you thoughts on the tradeoffs on performance/memory usage.

When I'm finished if I have something reusable I'll post it in.

Regards,
Robert.

From warmerdam at pobox.com  Thu Jan 29 10:58:20 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Compositing warped images
In-Reply-To: <200401291523.55064.robert@openscenegraph.com>
References: <200401291234.46446.robert@openscenegraph.com> <40191FFC.3000606@pobox.com> <200401291523.55064.robert@openscenegraph.com>
Message-ID: <40192D9C.4090800@pobox.com>

Robert Osfield wrote:
> I'll need to code something similar to RasterIOWithNoData() at my end, do you 
> think it woul make sense to convert desitination line by line or to just 
> convert the whole region at once.   I'm inclined to do a single RasterIO call 
> and then copy and filter in one go across to the final destination.  Whats 
> you thoughts on the tradeoffs on performance/memory usage.
> 
> When I'm finished if I have something reusable I'll post it in.

Robert,

I would suggest doing a single RasterIO() call.  The more you can aggregate
your IO requests into single calls, the more opportunity GDAL has to do things
more efficiently.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Jan 29 13:59:58 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Re: Fix for PNG byte order problems under x86
Message-ID: <4019582E.7060406@pobox.com>

Robert,

It seems the png_set_swap() function wasn't working for me.  I have modified
the code to explicitly swap the data in the row reading method.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From robert at openscenegraph.com  Thu Jan 29 15:39:55 2004
From: robert at openscenegraph.com (Robert Osfield)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Re: Fix for PNG byte order problems under x86
In-Reply-To: <4019582E.7060406@pobox.com>
References: <4019582E.7060406@pobox.com>
Message-ID: <200401292039.55615.robert@openscenegraph.com>

On Thursday 29 January 2004 18:59, Frank Warmerdam wrote:
> Robert,
>
> It seems the png_set_swap() function wasn't working for me.  I have
> modified the code to explicitly swap the data in the row reading method.

Could it be that the code doesn't pngdataset doesn't directly include 
cpl_port.h so CPL_LSB is never defined, so the png_set_swap never gets 
called?

I must admit I hadn't tested the addition of the #ifdef against the datafiles 
today.  Originally when I did the testing it was without any guards, it 
worked fine back then.  Sorry about this, I'm afraid my thoroughness has 
obviously slipped, like yourself toooo bussyyyy!!!

Cheers,
Robert.



From warmerdam at pobox.com  Thu Jan 29 15:44:58 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Re: Fix for PNG byte order problems under x86
In-Reply-To: <200401292039.55615.robert@openscenegraph.com>
References: <4019582E.7060406@pobox.com> <200401292039.55615.robert@openscenegraph.com>
Message-ID: <401970CA.7050406@pobox.com>

Robert Osfield wrote:
> On Thursday 29 January 2004 18:59, Frank Warmerdam wrote:
> 
>>Robert,
>>
>>It seems the png_set_swap() function wasn't working for me.  I have
>>modified the code to explicitly swap the data in the row reading method.
> 
> 
> Could it be that the code doesn't pngdataset doesn't directly include 
> cpl_port.h so CPL_LSB is never defined, so the png_set_swap never gets 
> called?

Robert,

I don't think that's it because I have my code in an #ifdef CPL_LSB
as well.  In fact, the png_set_swap() did *seem* to change the data, but it
just wasn't correct. I don't know what I'm missing but for now I'm not worried
about it.  I just wanted to let you know.

> I must admit I hadn't tested the addition of the #ifdef against the datafiles 
> today.  Originally when I did the testing it was without any guards, it 
> worked fine back then.  Sorry about this, I'm afraid my thoroughness has 
> obviously slipped, like yourself toooo bussyyyy!!!

No problem.  The issue might be a quirk in my copy of libpng ... who knows.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From chen at yinyue123.com  Fri Jan 30 11:17:55 2004
From: chen at yinyue123.com (Fu Chen)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] tiled images into a jp2
In-Reply-To: <20040127074922.GA10456@ak4719.spb.edu>
Message-ID: <000101c3e74c$9f6f0610$4356833d@novabook>

Hi!
I have a very large geospatial image(105GB), which has already divided
into equal size tiles that each one is a raw image file around 500MB. I
wanna translate it into a jp2 dataset by kakadu.
Is it possible that we first create a jp2 with a tile size and then
translate each one into a tile struction in the jp2?


From jgallagher at gso.uri.edu  Fri Jan 30 12:16:32 2004
From: jgallagher at gso.uri.edu (James Gallagher)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] DODS/OPeNDAP driver updates
Message-ID: <1075482992.22909.90.camel@comet.dods.org>

Hi,

I've checked in some changes to the DODS/OPeNDAP driver for raster data.
The driver now minimizes network use by transferring only the pixels
requested and by combining multiband requests into a single read from
the remote server when possible.

James
-- 
__________________________________________________________________________
James Gallagher		         The Distributed Oceanographic Data System
jgallagher@gso.uri.edu               http://unidata.ucar.edu/packages/dods
Voice/Fax: 406.723.8663


From lorenzo.moretti at bologna.enea.it  Fri Jan 30 12:21:26 2004
From: lorenzo.moretti at bologna.enea.it (Lorenzo Moretti)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] ASTER HDF L1_B problem in Mac OS X
In-Reply-To: <000101c3e74c$9f6f0610$4356833d@novabook>
References: <000101c3e74c$9f6f0610$4356833d@novabook>
Message-ID: <a0602040abc403eb84f78@[192.107.62.86]>

Hi

When I use gdalinfo for viewing subdataset in HDF file (utm zone 33 
with coordinate in lat-lon I have an error to the beginning:

[lorenzo:/usr/local/bin] ben% ./gdalinfo 
HDF4_SDS:ASTER_L1B:"/Volumes/ESTERNO/ASTER_FO_gen02/AST_L1B_003_01102002101254_05222002150244.hdf":2

ERROR 6: Unable to load PROJ.4 library (libproj.so), creation of
OGRCoordinateTransformation failed.
ERROR 6: Unable to load PROJ.4 library (libproj.so), creation of
OGRCoordinateTransformation failed.
ERROR 6: Unable to load PROJ.4 library (libproj.so), creation of
OGRCoordinateTransformation failed.
ERROR 6: Unable to load PROJ.4 library (libproj.so), creation of
OGRCoordinateTransformation failed.
Driver: HDF4Image/HDF4 Dataset
Size is 4980, 4200
Coordinate System is:
PROJCS["UTM Zone 33, Northern Hemisphere",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             TOWGS84[0,0,0,0,0,0,0],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,
             AUTHORITY["EPSG","9108"]],
         AXIS["Lat",NORTH],
         AXIS["Long",EAST],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",15],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["Meter",1]]
GeoTransform =
   12.19647665061962, 0.0001816592369477914, -3.696047619047622e-05
   43.49892337703098, -2.646787148594408e-05, -0.0001322861904761889
GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=, Info=
           (0.5,0.5) -> (12.1965,43.4988,0)
GCP[  1]: Id=, Info=

...
snip
...

   SOUTHBOUNDINGCOORDINATE=42.811432
   TIMEOFDAY=101254443000Z
   CALENDARDATE=20020110
   FUTUREREVIEWDATE=20020312
   SCIENCEREVIEWDATE=20011201
   QAPERCENTMISSINGDATA=0.000006
   QAPERCENTOUTOFBOUNDSDATA=0.000006
   QAPERCENTINTERPOLATEDDATA=0.000000
   REPROCESSINGACTUAL=not reprocessed
   PGEVERSION=04.00R06
   PROCESSINGLEVELID=1B
   MAPPROJECTIONNAME=Universal Transverse Mercator
Corner Coordinates:
Upper Left  (  12.1964767,  43.4989234)
Lower Left  (  12.0412427,  42.9433214)
Upper Right (  13.1011397,  43.3671134)
Lower Right (  12.9459057,  42.8115114)
Center      (  12.5711912,  43.1552174)
Band 1 Block=4980x1 Type=Byte, ColorInterp=Gray

When I use gdal_translate I have the same error.
When I use Grass with r.in.gdal module I have the same error.

I see the code and in the file
../ogr/ogrct.cpp

there is

CPL_CVSID("$Id: ogrct.cpp,v 1.23 2004/01/24 09:35:00 warmerda Exp $");

/* ==================================================================== */
/*      PROJ.4 interface stuff.                                         */
/* ==================================================================== */
#ifndef PROJ_STATIC
typedef struct { double u, v; } projUV;

#define projPJ void *

#define RAD_TO_DEG      57.29577951308232
#define DEG_TO_RAD      .0174532925199432958

#endif

static projPJ       (*pfn_pj_init_plus)(const char *) = NULL;
static projPJ       (*pfn_pj_init)(int, char**) = NULL;
static projUV       (*pfn_pj_fwd)(projUV, projPJ) = NULL;
static projUV       (*pfn_pj_inv)(projUV, projPJ) = NULL;
static void     (*pfn_pj_free)(projPJ) = NULL;
static int      (*pfn_pj_transform)(projPJ, projPJ, long, int,
                                     double *, double *, double * ) = NULL;
static int         *(*pfn_pj_get_errno_ref)(void) = NULL;
static char        *(*pfn_pj_strerrno)(int) = NULL;
static char        *(*pfn_pj_get_def)(projPJ,int) = NULL;
static void         (*pfn_pj_dalloc)(void *) = NULL;

#ifdef WIN32
#  define LIBNAME      "proj.dll"
#else
#  define LIBNAME      "libproj.so"
#endif
....

snip

....
/************************************************************************/
/*                 OGRCreateCoordinateTransformation()                  */
/************************************************************************/

/**
  * Create transformation object.
  *
  * This is the same as the C function OCTNewCoordinateTransformation().
  *
  * The delete operator, or OCTDestroyCoordinateTransformation() should
  * be used to destroy transformation objects.
  *
  * @param poSource source spatial reference system.
  * @param poTarget target spatial reference system.
  * @return NULL on failure or a ready to use transformation object.
  */

OGRCoordinateTransformation*
OGRCreateCoordinateTransformation( OGRSpatialReference *poSource,
                                    OGRSpatialReference *poTarget )

{
     OGRProj4CT  *poCT;

     if( !LoadProjLibrary() )
     {
         CPLError( CE_Failure, CPLE_NotSupported,
                   "Unable to load PROJ.4 library (%s), creation of\n"
                   "OGRCoordinateTransformation failed.",
                   LIBNAME );
         return NULL;
     }

     poCT = new OGRProj4CT();
    
     if( !poCT->Initialize( poSource, poTarget ) )
     {
         delete poCT;
         return NULL;
     }
     else
     {
         return poCT;
     }
}

.....



In gdal config there is'n --with-proj=DIR and the error is from this file.
I have PROJ4.4.7 installed as shared library (libproj.dylib in Mac OS 
X in /usr/local/lib)
I have changed the name in source (libproj.so changed libproj.dylib) 
but the error remains ...

Is this file important for coordinate recognition ?

Can you help me ?


Thanx
-- 
________________________________________________________________________
||      Lorenzo Moretti        e-mail: lorenzo.moretti@bologna.enea.it     
||/|/|  ENEA prot              Web: http://wwwamb.bologna.enea.it/    
||   |  via Don Fiammelli, 2   FTP: ftp://ftpamb.bologna.enea.it/ (ris.)
~~~~~~  40128 BOLOGNA - ITALY  Ph: +39-0516098086  Fax: +39-0516098131
________________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040130/2215aa2b/attachment.html
From warmerdam at pobox.com  Fri Jan 30 13:44:45 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] tiled images into a jp2
In-Reply-To: <000101c3e74c$9f6f0610$4356833d@novabook>
References: <000101c3e74c$9f6f0610$4356833d@novabook>
Message-ID: <401AA61D.7070205@pobox.com>

Fu Chen wrote:
> Hi!
> I have a very large geospatial image(105GB), which has already divided
> into equal size tiles that each one is a raw image file around 500MB. I
> wanna translate it into a jp2 dataset by kakadu.
> Is it possible that we first create a jp2 with a tile size and then
> translate each one into a tile struction in the jp2?

Fu Chen,

As things are implemented currently in JP2KAKDataset::CreateCopy(), what
you want isn't supported.  However, it is possible to accomplish what you
want with Kakadu.  If you are really wanting to do this, you might want to
build a custom writer on top of Kakadu just using GDAL to read the data.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jeff.hamann at forestinformatics.com  Fri Jan 30 16:55:19 2004
From: jeff.hamann at forestinformatics.com (Jeff D. Hamann)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] can't read ASTER HDF-EOS files...
Message-ID: <001f01c3e77b$c0e62dd0$0a00a8c0@rodan>

I've built gdal-1.1.9 under cygwin (for use within GRASS) and haven't been
able to read ASTER L1B files (in HDF-EOS format) using any of the tools like
gdalinfo.

These are the supported file formats from my builod:

hamannj@rodan ~/gdal-1.1.9
$ gdalinfo --formats
Supported Formats:
  VRT: Virtual Raster
  GTiff: GeoTIFF
  NITF: National Imagery Transmission Format
  HFA: Erdas Imagine Images (.img)
  SAR_CEOS: CEOS SAR Image
  CEOS: CEOS Image
  ELAS: ELAS
  AIG: Arc/Info Binary Grid
  AAIGrid: Arc/Info ASCII Grid
  SDTS: SDTS Raster
  DTED: DTED Elevation Raster
  PNG: Portable Network Graphics
  JPEG: JPEG JFIF
  MEM: In Memory Raster
  JDEM: Japanese DEM (.mem)
  GIF: Graphics Interchange Format (.gif)
  ESAT: Envisat Image Format
  BSB: Maptech BSB Nautical Charts
  XPM: X11 PixMap Format
  BMP: MS Windows Device Independent Bitmap
  PNM: Portable Pixmap Format (netpbm)
  DOQ1: USGS DOQ (Old Style)
  DOQ2: USGS DOQ (New Style)
  ENVI: ENVI .hdr Labelled
  EHdr: ESRI .hdr Labelled
  PAux: PCI .aux Labelled
  MFF: Atlantis MFF Raster
  MFF2: Atlantis MFF2 (HKV) Raster
  FujiBAS: Fuji BAS Scanner Image
  GSC: GSC Geogrid
  FAST: EOSAT FAST Format
  L1B: NOAA Polar Orbiter Level 1b Data Set
  FIT: FIT Image
  USGSDEM: USGS Optional ASCII DEM
  GXF: GeoSoft Grid Exchange Format

I've tried renaming the image I want to import to no avail.

I always get the following when trying to read an hdf file:

hamannj@rodan ~
$ gdalinfo ast_l1b.hdf
ERROR 4: `ast_l1b.hdf' not recognised as a supported file format.

GDALOpen failed - 4
`ast_l1b.hdf' not recognised as a supported file format.


When I attempt the same with a common graphics format (png, jpeg, etc) I get
the results I expect.

How can I compile gdal to read HDF-EOS files under cygwin. I haven't been
able to find out how over the web yet and this exercise is getting a little
old by now.

Thanks,
Jeff.

Jeff.


---
Jeff D. Hamann
Forest Informatics, Inc.
PO Box 1421
Corvallis, Oregon USA 97339-1421
(office) 541-754-1428
(cell) 541-740-5988
jeff.hamann@forestinformatics.com
www.forestinformatics.com


From warmerdam at pobox.com  Fri Jan 30 17:09:57 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] can't read ASTER HDF-EOS files...
In-Reply-To: <001f01c3e77b$c0e62dd0$0a00a8c0@rodan>
References: <001f01c3e77b$c0e62dd0$0a00a8c0@rodan>
Message-ID: <401AD635.10900@pobox.com>

Jeff D. Hamann wrote:
> I've built gdal-1.1.9 under cygwin (for use within GRASS) and haven't been
> able to read ASTER L1B files (in HDF-EOS format) using any of the tools like
> gdalinfo.
> 
> These are the supported file formats from my builod:
> 
> hamannj@rodan ~/gdal-1.1.9
> $ gdalinfo --formats
> Supported Formats:
>   VRT: Virtual Raster
>   GTiff: GeoTIFF
>   NITF: National Imagery Transmission Format
>   HFA: Erdas Imagine Images (.img)
>   SAR_CEOS: CEOS SAR Image
>   CEOS: CEOS Image
>   ELAS: ELAS
>   AIG: Arc/Info Binary Grid
>   AAIGrid: Arc/Info ASCII Grid
>   SDTS: SDTS Raster
>   DTED: DTED Elevation Raster
>   PNG: Portable Network Graphics
>   JPEG: JPEG JFIF
>   MEM: In Memory Raster
>   JDEM: Japanese DEM (.mem)
>   GIF: Graphics Interchange Format (.gif)
>   ESAT: Envisat Image Format
>   BSB: Maptech BSB Nautical Charts
>   XPM: X11 PixMap Format
>   BMP: MS Windows Device Independent Bitmap
>   PNM: Portable Pixmap Format (netpbm)
>   DOQ1: USGS DOQ (Old Style)
>   DOQ2: USGS DOQ (New Style)
>   ENVI: ENVI .hdr Labelled
>   EHdr: ESRI .hdr Labelled
>   PAux: PCI .aux Labelled
>   MFF: Atlantis MFF Raster
>   MFF2: Atlantis MFF2 (HKV) Raster
>   FujiBAS: Fuji BAS Scanner Image
>   GSC: GSC Geogrid
>   FAST: EOSAT FAST Format
>   L1B: NOAA Polar Orbiter Level 1b Data Set
>   FIT: FIT Image
>   USGSDEM: USGS Optional ASCII DEM
>   GXF: GeoSoft Grid Exchange Format
> 
> I've tried renaming the image I want to import to no avail.

Jeff,

You haven't built GDAL with HDF support.  If you look through the above
format list, you will note it is missing.  When configuring you need to
use the --with-hdf4 command switch to point to your hdf libraries.  I don't
know if this build arrangement has ever been tried under cygwin before.
Using the hdf libraries can be tricky.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From nhv at cape.com  Fri Jan 30 17:53:40 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] can't read ASTER HDF-EOS files...
In-Reply-To: <401AD635.10900@pobox.com>
Message-ID: <EKEJIKAILPONGGENMBGAMEPAGDAA.nhv@cape.com>

Frank Warmerdam writes:
> 
> Jeff D. Hamann wrote:
> > I've built gdal-1.1.9 under cygwin (for use within GRASS) and haven't been
> > able to read ASTER L1B files (in HDF-EOS format) using any of the tools like
> > gdalinfo.
> > 
> > These are the supported file formats from my builod:
> 
> You haven't built GDAL with HDF support.  If you look through the above
> format list, you will note it is missing.  When configuring you need to
> use the --with-hdf4 command switch to point to your hdf libraries.  I don't
> know if this build arrangement has ever been tried under cygwin before.
> Using the hdf libraries can be tricky.

I haven't succeeded in getting the hdf libs to buil dwith Cygwin :-(

but ...

The libraries distributed with the Modis Reprojection Tool seem to work
http://lpdaac2.usgs.gov/landdaac/tools/modis/index.asp

HTH

Norman

From jeff.hamann at forestinformatics.com  Fri Jan 30 19:16:06 2004
From: jeff.hamann at forestinformatics.com (Jeff D. Hamann)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] hdf4 libs under cygwin?
Message-ID: <000b01c3e78f$6b6d2340$0a00a8c0@rodan>

Has anyone built the hdf4 libraries under cygwin? I see the i686-pc-cygwin32
switches in the jpg code for gdal, but can't seem to find instructions on
building hdf4 so I can build them into gdal-1.1.9.

Jeff.

---
Jeff D. Hamann
Forest Informatics, Inc.
PO Box 1421
Corvallis, Oregon USA 97339-1421
(office) 541-754-1428
(cell) 541-740-5988
jeff.hamann@forestinformatics.com
www.forestinformatics.com


From alexamici at fastwebnet.it  Sat Jan 31 05:19:18 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Re: undefined python objects
In-Reply-To: <9A235FE6-25A8-11D8-AAFF-003065D5F140@cmu.edu>
References: <20031202170001.22587.22420.Mailman@yoda.imagelinks.com> <9A235FE6-25A8-11D8-AAFF-003065D5F140@cmu.edu>
Message-ID: <200401311119.18421.alexamici@fastwebnet.it>

Chris, Sean,

sorry for being that much late in the discussion. hope it is still 
relevant :).

On Wednesday 03 December 2003 16:51, Sean Fulton wrote:
> > On Dec 1, 2003, at 4:11 PM, Sean Fulton wrote:
> >>> I am trying to compile GDAL on OSX with python support, but I get
> >>> the following errors on building:
> >>> <SNIP>
> >>> The only advice I have seen so far is to compile without python
> >>> support, but thats not really a solution. Python support is the only
> >>> reason I am looking to use GDAL.
> >>>
> >>> Thanks in advance,
> >>
> >> Chris,

[big skip]

> Good luck. I'll give it a try once I get a Dev CD and see if we can't
> beat Panther into submission.
>
> 	Sean
>

the build of the gdal python module has always been fragile, and it has became 
a real hack since the libtool transition (my fault, admittedly). IMHO the 
only hope to get out of the current mess is to use the distutils 
infrastructure, that hopefully will take care of the OSX problem as well.

so i refreshed what looked like an abandoned setup.py in the top directory. 
current gdal cvs builds and installs fine on linux with:
$ python setup.py build
$ python setup.py install

it wuold be very helpfull if you could test it on OSX and report the results.

Frank, if the distutils build of the python module fixes a real problem, i'll 
try to set up a more polished patch, and we may think to port all 
architecture to it.

cheers,
alessandro

From alexamici at fastwebnet.it  Sat Jan 31 11:34:00 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Re: undefined python objects
In-Reply-To: <38955C86-5403-11D8-9F29-000A956FDAC0@fonnesbeck.org>
References: <20031202170001.22587.22420.Mailman@yoda.imagelinks.com> <200401311119.18421.alexamici@fastwebnet.it> <38955C86-5403-11D8-9F29-000A956FDAC0@fonnesbeck.org>
Message-ID: <200401311734.00201.alexamici@fastwebnet.it>

Chris,

> On my machine (running OSX 10.3), the latest GDAL CVS chokes on
> compiling mrsid support:

ouch!

> /bin/sh ../../libtool --mode=compile g++ -Wall  -O2   -I../../port
> -I../../gcore -I../../ogr -Iinternal/include
> -I../../frmts/gtiff/libgeotiff  -D_REENTRANT   -I../../port -c -o
> ../o/mrsiddataset.o mrsiddataset.cpp

the '-Iinternal/include' looks suspicious. be sure to use 
--with-mrsid=/absolute/path/to/MrSID.

otherwise, configure mrsid off for now (and do a 'make clean' afterwards).

BTW, reading again my email i think i've not been clear, in order to test the 
alternative python build you need to:
$ ./configure <...> --without-python
$ make
$ python setup.py build

thanks,
alessandro

From jeff.hamann at forestinformatics.com  Sat Jan 31 14:31:40 2004
From: jeff.hamann at forestinformatics.com (Jeff D. Hamann)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] latest in the hdf-gdal-grass hdf-eos saga....
Message-ID: <002701c3e830$d9e5b4d0$0a00a8c0@rodan>

Here are some scenes from last weeks episode:

After realizing that, in order to import HDF-EOS (ASTER) files into GRASS, I
need to compile GRASS with gdal support using the following process

Compile HDF libraries so I can,
compile gdal with HDF support so I can,
compile GRASS with gdal support,
then if I'm lucky, I can try to compile GRASS5.7 (have been building
grass5.3 -- which *still* has documentation for r.in.hdf/r.out.hdf)

And of course I would like to build this on either cygwin of FreeBSD 4.4 or
FreeBSD 5.0. Here's the results:

Under cygwin:

I was able to build GRASS 5.3 and gdal (without hdf support) with ease.
I couldn't build the hdf libraries to build gdal which rules out building
GRASS 5.X with gdal support that supports hdf-eos
I still haven't tried to build 5.7, yet


Under FreeBSD 4.4
I wasn't able to build the gdal-1.1.8 in the /usr/ports since gdal requies

stimpy# cd /usr/ports/graphics/gdal
stimpy# make install
===>   gdal-1.1.8 depends on file: /usr/local/bin/doxygen - not found
===>    Verifying install for /usr/local/bin/doxygen in
/usr/ports/devel/doxygen
===>   doxygen-1.3.5 depends on executable: dot - found
===>   doxygen-1.3.5 depends on executable: latex - found
===>   doxygen-1.3.5 depends on executable: gs - found
===>   doxygen-1.3.5 depends on file: /usr/X11R6/bin/moc - not found
===>    Verifying install for /usr/X11R6/bin/moc in
/usr/ports/x11-toolkits/qt32
===>  qt-3.2.3 is marked as broken: The QT 3.2.3 port does not support any
XFree86 < 4.x.
*** Error code 1

Stop in /usr/ports/x11-toolkits/qt32.
*** Error code 1

Stop in /usr/ports/devel/doxygen.
*** Error code 1

Stop in /usr/ports/graphics/gdal.
stimpy#

Which pretty much killed that idea on FreeBSD 4.4



Under FreeBSD 5.0
I wasn't able to build  the version in /usr/ports since it appears there's
some problem with the LaTeX code? Here's the build (using make) stop

(/usr/local/share/texmf/tex/latex/psnfss/upzd.fd)
(/usr/local/share/texmf/tex/latex/psnfss/upsy.fd)))
Writing index file doxygen_manual.idx
No file doxygen_manual.aux.
! Missing number, treated as zero.
<to be read again>
                   p
l.32 \begin{document}

? ! Missing number, treated as zero.
<to be read again>
                   p
l.32 \begin{document}

? OK, entering \batchmodegmake[1]: Leaving directory
`/usr/ports/devel/doxygen/work/doxygen-1.3.5/latex'
*** Error code 2

Stop in /usr/ports/devel/doxygen.
*** Error code 1

Stop in /usr/ports/graphics/gdal.
$

So I tried downloaded the gdal-1.1.9 source code and building as a "normal"
project. I ran ./configure, then make and got the following results:

$ cat configure.results.txt
checking for gcc... gcc
checking for C compiler default output... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for ranlib... ranlib
checking for dlopen in -ldl... no
checking for malloc_chain_check in -ldbmalloc... no
checking for main in -lm... yes
checking how to run the C preprocessor... gcc -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking for unistd.h... (cached) yes
checking dbmalloc.h usability... no
checking dbmalloc.h presence... no
checking for dbmalloc.h... no
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking for stdint.h... (cached) yes
checking limits.h usability... yes
checking limits.h presence... yes
checking for limits.h... yes
checking whether byte ordering is bigendian... no
checking for vprintf... yes
checking for _doprnt... no
checking for vsnprintf... yes
checking for 64bit integer type... long long
checking for 64bit file io... no
checking for local include/lib path... none
configure: checking whether we should include thread/mutex support......
        thread safe support disabled.
checking for deflateInit_ in -lz... yes
checking for G_gisinit_2 in -lgrass5... no
checking for ffopen in -lcfitsio... no
libcfitsio not found - FITS support disabled
checking for png_set_IHDR in -lpng... no
checking png.h usability... no
checking png.h presence... no
checking for png.h... no
using internal png code.
checking for TIFFGetTagListCount in -ltiff... no
using internal TIFF code.
using internal GeoTIFF code.
checking for jpeg_read_scanlines in -ljpeg... no
checking jpeglib.h usability... no
checking jpeglib.h presence... no
checking for jpeglib.h... no
using internal jpeg code.
checking for DGifOpenFileName in -lgif... no
using internal gif code.
checking for cln_GetLayerCapabilities in -logdi31... no
checking for FMEObjects... no
checking for SDreaddata in -lmfhdf... no
checking for jpc_decode in -ljasper... no
checking for jp2_decode in -ljasper... no
checking for pgx_decode in -ljasper... no
checking for NCScbmOpenFileView in -lNCSEcw... no
checking for Kakadu JPEG2000 support... not requested.
checking for MrSID support... not requested.
checking for OGR ... enabled
checking for pg_config... /usr/local/bin/pg_config
checking for PostgreSQL... yes
checking for Xerces C++... disabled
checking for g++ -shared ... yes
checking for python... python
checking where python Makefiles are... found
checking Python makefile... found
checking where .py files should go... /usr/local/lib/python2.2/site-packages
checking for python headers... found
checking definitions from Python makefile... done
checking for NumPy include files... missing
checking if local/include already standard... no, everything is ok
configure: creating ./config.status
config.status: creating GDALmake.opt
config.status: creating port/cpl_config.h
config.status: port/cpl_config.h is unchanged
$ make
make: no target to make.
$

So I can't even get gdal-1.1.9 to build manually.
But, GRASS 5.0.2 builds under FreeBSD 5.0 (without gdal support) just fine.

When I downloaded the hdf source code (from where I don't remember anymore)
hdf5-1.6.1.tar.gz, and ran ./configure, then make it built.

I *was* successful in building hdf5-1.6.1 (no extra arguments) under FreeBSD
5.0 from the source code....
I *wasn't* successful in building HDF4.2r0 (without extra args) under
FreeBSD from the source code. The resulting ./configure

checking zlib.h usability... yes
checking zlib.h presence... yes
checking for zlib.h... yes
checking for compress2 in -lz... yes
checking jpeglib.h usability... no
checking jpeglib.h presence... no
checking for jpeglib.h... no
checking for jpeg_start_decompress in -ljpeg... no
$

So I found the /usr/local/include/jpeglib.h  and /usr/local/lib/libjpeg.a
files and used the optional arguments in the ./configure script...

godzilla# ./configure --with-jpeg=/usr/local/include,/usr/local/lib

then ran make and got a bazillion warnings like:

hextelt.c:234: warning: passing arg 2 of `HTPselect' with different width
due to prototype
hextelt.c:242: warning: passing arg 3 of `Hstartread' with different width
due to prototype
hextelt.c:295: warning: passing arg 2 of `Hgetelement' with different width
due to prototype

but it built and installed....and some of the utility programs worked just
fine...

but after all that I still can't figure out how to make gdal-1.1.9. All I
get when I type ./configure (without the --with-hdf4 stuff even) and make
is:

config.status: creating port/cpl_config.h
$ make
make: no target to make.
$

So this project will have to go into the drawer again until I can some of th
ese resolved... And after all that, does anyone actually if GRASS can import
ASTER L1B images? I just can't waste any more time on this for now...

Jeff.



---
Jeff D. Hamann
Forest Informatics, Inc.
PO Box 1421
Corvallis, Oregon USA 97339-1421
(office) 541-754-1428
(cell) 541-740-5988
jeff.hamann@forestinformatics.com
www.forestinformatics.com


From chen at yinyue123.com  Sat Jan 31 22:38:59 2004
From: chen at yinyue123.com (Fu Chen)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] tiled images into a jp2
In-Reply-To: <401AA61D.7070205@pobox.com>
Message-ID: <000101c3e874$f48ce2b0$880042da@novabook>

Frank,
I tried to use vrt to wrap all those tiled tiffs into a virtual dataset.
and use gdal_translate to translate the vrt file into a jp2.
But maybe this dataset is too large(105G, dimension 200K*200K), the
progress is very slow, and become much more slower. For example, the
first 5% will take an hour, but the same 5% between 35%-40% will take
one day.
The kakadu's author dont recommend to use tiled jp2, for in this way we
will find artifacts besides the border of two tile. But will tiled style
speed the compress and upcompress process of the large dataset?

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Saturday, January 31, 2004 2:45 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] tiled images into a jp2


Fu Chen wrote:
> Hi!
> I have a very large geospatial image(105GB), which has already divided

> into equal size tiles that each one is a raw image file around 500MB. 
> I wanna translate it into a jp2 dataset by kakadu. Is it possible that

> we first create a jp2 with a tile size and then translate each one 
> into a tile struction in the jp2?

Fu Chen,

As things are implemented currently in JP2KAKDataset::CreateCopy(), what
you want isn't supported.  However, it is possible to accomplish what
you want with Kakadu.  If you are really wanting to do this, you might
want to build a custom writer on top of Kakadu just using GDAL to read
the data.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From chris at fonnesbeck.org  Sat Jan 31 10:36:21 2004
From: chris at fonnesbeck.org (Christopher Fonnesbeck)
Date: Wed Nov 21 11:49:02 2007
Subject: [Gdal-dev] Re: undefined python objects
In-Reply-To: <200401311119.18421.alexamici@fastwebnet.it>
References: <20031202170001.22587.22420.Mailman@yoda.imagelinks.com> <9A235FE6-25A8-11D8-AAFF-003065D5F140@cmu.edu> <200401311119.18421.alexamici@fastwebnet.it>
Message-ID: <38955C86-5403-11D8-9F29-000A956FDAC0@fonnesbeck.org>

On Jan 31, 2004, at 5:19 AM, Alessandro Amici wrote:
>
> the build of the gdal python module has always been fragile, and it 
> has became
> a real hack since the libtool transition (my fault, admittedly). IMHO 
> the
> only hope to get out of the current mess is to use the distutils
> infrastructure, that hopefully will take care of the OSX problem as 
> well.
>
> so i refreshed what looked like an abandoned setup.py in the top 
> directory.
> current gdal cvs builds and installs fine on linux with:
> $ python setup.py build
> $ python setup.py install
>
> it wuold be very helpfull if you could test it on OSX and report the 
> results.

On my machine (running OSX 10.3), the latest GDAL CVS chokes on 
compiling mrsid support:

/bin/sh ../../libtool --mode=compile g++ -Wall  -O2   -I../../port 
-I../../gcore -I../../ogr -Iinternal/include 
-I../../frmts/gtiff/libgeotiff  -D_REENTRANT   -I../../port -c -o 
../o/mrsiddataset.o mrsiddataset.cpp
  g++ -Wall -O2 -I../../port -I../../gcore -I../../ogr 
-Iinternal/include -I../../frmts/gtiff/libgeotiff -D_REENTRANT 
-I../../port -c mrsiddataset.cpp  -fno-common -DPIC -o 
../o/.libs/mrsiddataset.o
mrsiddataset.cpp:51:26: lt_fileUtils.h: No such file or directory
mrsiddataset.cpp:52:23: lt_xTrans.h: No such file or directory
mrsiddataset.cpp:53:32: lt_imageBufferInfo.h: No such file or directory
mrsiddataset.cpp:54:22: lt_pixel.h: No such file or directory
mrsiddataset.cpp:55:27: lt_colorSpace.h: No such file or directory
mrsiddataset.cpp:56:28: MrSIDImageFile.h: No such file or directory
mrsiddataset.cpp:57:28: MrSIDNavigator.h: No such file or directory
mrsiddataset.cpp:58:28: MetadataReader.h: No such file or directory
mrsiddataset.cpp:59:29: MetadataElement.h: No such file or directory
mrsiddataset.cpp:64: error: `LizardTech' was not declared in this scope
mrsiddataset.cpp:66: warning: ISO C++ forbids declaration of 
`LT_USE_NAMESPACE'
    with no type
mrsiddataset.cpp:66: error: syntax error before `static'
mrsiddataset.cpp: In function `char* cvsid_aw()':
mrsiddataset.cpp:66: error: `cpl_cvsid' undeclared (first use this 
function)
mrsiddataset.cpp:66: error: (Each undeclared identifier is reported 
only once
    for each function it appears in.)
mrsiddataset.cpp: At global scope:
mrsiddataset.cpp:84: error: syntax error before `*' token
mrsiddataset.cpp:85: error: syntax error before `*' token
mrsiddataset.cpp:86: error: syntax error before `*' token
mrsiddataset.cpp:87: error: syntax error before `*' token
mrsiddataset.cpp:88: error: syntax error before `*' token
mrsiddataset.cpp:90: error: syntax error before `::' token
mrsiddataset.cpp:92: error: syntax error before `*' token
mrsiddataset.cpp:105: error: parse error before `*' token
mrsiddataset.cpp:130: error: syntax error before `*' token
mrsiddataset.cpp:131: error: syntax error before `*' token
mrsiddataset.cpp: In constructor `
    MrSIDRasterBand::MrSIDRasterBand(MrSIDDataset*, int)':
mrsiddataset.cpp:164: error: 'class MrSIDDataset' has no member named '
    poMrSidNav'
mrsiddataset.cpp:165: error: 'class MrSIDDataset' has no member named '
    poMrSidNav'
mrsiddataset.cpp:165: error: `IntRect' undeclared (first use this 
function)
mrsiddataset.cpp:165: error: parse error before `::' token
mrsiddataset.cpp:167: error: `poImageBufInfo' undeclared (first use this
    function)
mrsiddataset.cpp:167: error: parse error before `(' token
mrsiddataset.cpp: In member function `virtual CPLErr
    MrSIDRasterBand::IRasterIO(GDALRWFlag, int, int, int, int, void*, 
int, int,
    GDALDataType, int, int)':
mrsiddataset.cpp:216: error: `ImgRect' undeclared (first use this 
function)
mrsiddataset.cpp:216: error: parse error before `(' token
mrsiddataset.cpp:217: error: `IntDimension' undeclared (first use this
    function)
mrsiddataset.cpp:220: error: 'class MrSIDDataset' has no member named '
    poMrSidNav'
mrsiddataset.cpp:220: error: `imageSupport' undeclared (first use this
    function)
mrsiddataset.cpp:220: error: `targetDims' undeclared (first use this 
function)
mrsiddataset.cpp:228: error: `poImageBuf' undeclared (first use this 
function)
mrsiddataset.cpp:228: error: parse error before `(' token
mrsiddataset.cpp:231: error: 'class MrSIDDataset' has no member named '
    poMrSidNav'
mrsiddataset.cpp:233: error: parse error before `oException'
mrsiddataset.cpp:236: error: `oException' undeclared (first use this 
function)
mrsiddataset.cpp:214: warning: unused variable `int iSrcOffset'
mrsiddataset.cpp:214: warning: unused variable `int nNewYSize'
mrsiddataset.cpp:214: warning: unused variable `int nNewXSize'
mrsiddataset.cpp:213: warning: unused variable `int iLine'
mrsiddataset.cpp:212: warning: unused variable `int nBufDataSize'
mrsiddataset.cpp: At global scope:
mrsiddataset.cpp:240: warning: ISO C++ forbids declaration of 
`nNewXSize' with
    no type
mrsiddataset.cpp:241: warning: ISO C++ forbids declaration of 
`nNewYSize' with
    no type
mrsiddataset.cpp:242: warning: ISO C++ forbids declaration of 
`iSrcOffset' with
    no type
mrsiddataset.cpp:242: error: `nBand' was not declared in this scope
mrsiddataset.cpp:244: error: parse error before `for'
mrsiddataset.cpp:244: error: `nBufYSize' was not declared in this scope
mrsiddataset.cpp:244: error: parse error before `;' token
mrsiddataset.cpp:244: error: syntax error before `++' token
mrsiddataset.cpp:259: error: `nBufYSize' was not declared in this scope
mrsiddataset.cpp:262: error: `iLine' was not declared in this scope
mrsiddataset.cpp:265: error: parse error before `for'
mrsiddataset.cpp:265: error: `nBufXSize' was not declared in this scope
mrsiddataset.cpp:265: error: parse error before `;' token
mrsiddataset.cpp:265: error: syntax error before `++' token
mrsiddataset.cpp: In member function `virtual CPLErr
    MrSIDRasterBand::IReadBlock(int, int, void*)':
mrsiddataset.cpp:292: error: parse error before `(' token
mrsiddataset.cpp:293: error: 'class MrSIDDataset' has no member named '
    poMrSidNav'
mrsiddataset.cpp:295: error: parse error before `::' token
mrsiddataset.cpp:299: error: 'class MrSIDDataset' has no member named '
    poMrSidNav'
mrsiddataset.cpp:301: error: parse error before `oException'
mrsiddataset.cpp:290: warning: unused variable `int j'
mrsiddataset.cpp:290: warning: unused variable `int i'
mrsiddataset.cpp: At global scope:
mrsiddataset.cpp:308: error: parse error before `for'
mrsiddataset.cpp:308: error: `nBlockSize' was not declared in this scope
mrsiddataset.cpp:308: error: parse error before `;' token
mrsiddataset.cpp:308: error: syntax error before `++' token
mrsiddataset.cpp: In member function `virtual GDALColorInterp
    MrSIDRasterBand::GetColorInterpretation()':
mrsiddataset.cpp:343: error: 'class MrSIDDataset' has no member named '
    poColorSpace'
mrsiddataset.cpp:345: error: `ColorSpace' undeclared (first use this 
function)
mrsiddataset.cpp:345: error: parse error before `::' token
mrsiddataset.cpp:354: error: parse error before `::' token
mrsiddataset.cpp:365: error: parse error before `::' token
mrsiddataset.cpp:367: error: parse error before `::' token
mrsiddataset.cpp: In constructor `MrSIDDataset::MrSIDDataset()':
mrsiddataset.cpp:416: error: `poFilename' undeclared (first use this 
function)
mrsiddataset.cpp:417: error: `poMrSidFile' undeclared (first use this 
function)
mrsiddataset.cpp:418: error: `poMrSidNav' undeclared (first use this 
function)
mrsiddataset.cpp:419: error: `poDefaultPixel' undeclared (first use this
    function)
mrsiddataset.cpp:420: error: `poMrSidMetadata' undeclared (first use 
this
    function)
mrsiddataset.cpp:421: error: `poColorSpace' undeclared (first use this
    function)
mrsiddataset.cpp:423: error: `eSampleType' undeclared (first use this 
function)
mrsiddataset.cpp:423: error: `ImageBufferInfo' undeclared (first use 
this
    function)
mrsiddataset.cpp:423: error: parse error before `::' token
mrsiddataset.cpp: At global scope:
mrsiddataset.cpp:502: error: parse error before `*' token
mrsiddataset.cpp: In member function `char*
    MrSIDDataset::SerializeMetadataElement(...)':
mrsiddataset.cpp:504: error: `IntDimension' undeclared (first use this
    function)
mrsiddataset.cpp:504: error: parse error before `=' token
mrsiddataset.cpp:509: error: `oDim' undeclared (first use this function)
mrsiddataset.cpp:512: error: `poElem' undeclared (first use this 
function)
mrsiddataset.cpp:514: error: `MetadataValue' undeclared (first use this
    function)
mrsiddataset.cpp:514: error: parse error before `::' token
mrsiddataset.cpp:519: error: parse error before `::' token
mrsiddataset.cpp:524: error: parse error before `::' token
mrsiddataset.cpp:527: error: parse error before `::' token
mrsiddataset.cpp:530: error: parse error before `::' token
mrsiddataset.cpp:518: warning: unreachable code at beginning of switch
    statement
mrsiddataset.cpp: In member function `int
    MrSIDDataset::GetMetadataElement(const char*, void*)':
mrsiddataset.cpp:558: error: `MetadataElement' undeclared (first use 
this
    function)
mrsiddataset.cpp:559: error: parse error before `(' token
mrsiddataset.cpp:562: error: parse error before `::' token
mrsiddataset.cpp:567: error: parse error before `::' token
mrsiddataset.cpp:570: error: `iValue' undeclared (first use this 
function)
mrsiddataset.cpp:573: error: parse error before `::' token
mrsiddataset.cpp: At global scope:
mrsiddataset.cpp:578: error: parse error before `break'
mrsiddataset.cpp:582: error: `pValue' was not declared in this scope
mrsiddataset.cpp:582: warning: ISO C++ forbids declaration of `memcpy' 
with no
    type
mrsiddataset.cpp:582: error: `int memcpy' redeclared as different kind 
of
    symbol
/usr/include/string.h:76: error: previous declaration of `void* 
memcpy(void*,
    const void*, long unsigned int)'
mrsiddataset.cpp:582: warning: initializer list being treated as 
compound
    expression
mrsiddataset.cpp:583: error: parse error before `}' token
mrsiddataset.cpp:588: error: `pValue' was not declared in this scope
mrsiddataset.cpp:588: warning: ISO C++ forbids declaration of `memcpy' 
with no
    type
mrsiddataset.cpp:588: error: redefinition of `int memcpy'
mrsiddataset.cpp:582: error: `int memcpy' previously defined here
mrsiddataset.cpp:588: warning: initializer list being treated as 
compound
    expression
mrsiddataset.cpp:589: error: parse error before `}' token
mrsiddataset.cpp:594: error: `pValue' was not declared in this scope
mrsiddataset.cpp:594: warning: ISO C++ forbids declaration of `memcpy' 
with no
    type
mrsiddataset.cpp:594: error: redefinition of `int memcpy'
mrsiddataset.cpp:588: error: `int memcpy' previously defined here
mrsiddataset.cpp:594: warning: initializer list being treated as 
compound
    expression
mrsiddataset.cpp:595: error: parse error before `}' token
mrsiddataset.cpp:600: error: `pValue' was not declared in this scope
mrsiddataset.cpp:600: warning: ISO C++ forbids declaration of `memcpy' 
with no
    type
mrsiddataset.cpp:600: error: redefinition of `int memcpy'
mrsiddataset.cpp:594: error: `int memcpy' previously defined here
mrsiddataset.cpp:600: warning: initializer list being treated as 
compound
    expression
mrsiddataset.cpp:601: error: parse error before `}' token
mrsiddataset.cpp:606: error: `pValue' was not declared in this scope
mrsiddataset.cpp:606: error: `fValue' was not declared in this scope
mrsiddataset.cpp:606: error: `fValue' was not declared in this scope
mrsiddataset.cpp:606: warning: ISO C++ forbids declaration of `memcpy' 
with no
    type
mrsiddataset.cpp:606: error: redefinition of `int memcpy'
mrsiddataset.cpp:600: error: `int memcpy' previously defined here
mrsiddataset.cpp:606: warning: initializer list being treated as 
compound
    expression
mrsiddataset.cpp:607: error: parse error before `}' token
mrsiddataset.cpp:612: error: `pValue' was not declared in this scope
mrsiddataset.cpp:612: error: `dfValue' was not declared in this scope
mrsiddataset.cpp:612: error: `dfValue' was not declared in this scope
mrsiddataset.cpp:612: warning: ISO C++ forbids declaration of `memcpy' 
with no
    type
mrsiddataset.cpp:612: error: redefinition of `int memcpy'
mrsiddataset.cpp:606: error: `int memcpy' previously defined here
mrsiddataset.cpp:612: warning: initializer list being treated as 
compound
    expression
mrsiddataset.cpp:613: error: parse error before `}' token
mrsiddataset.cpp: In member function `CPLErr 
MrSIDDataset::OpenZoomLevel(int)':
mrsiddataset.cpp:1520: error: parse error before `(' token
mrsiddataset.cpp:1522: error: parse error before `oException'
mrsiddataset.cpp: At global scope:
mrsiddataset.cpp:1531: warning: ISO C++ forbids declaration of 
`poDefaultPixel'
    with no type
mrsiddataset.cpp:1531: error: `int poDefaultPixel' used prior to 
declaration
mrsiddataset.cpp:1531: error: parse error before `(' token
mrsiddataset.cpp:1532: warning: ISO C++ forbids declaration of 
`eSampleType'
    with no type
mrsiddataset.cpp:1532: error: `int eSampleType' used prior to 
declaration
mrsiddataset.cpp:1533: warning: ISO C++ forbids declaration of 
`poColorSpace'
    with no type
mrsiddataset.cpp:1533: error: `int poColorSpace' used prior to 
declaration
mrsiddataset.cpp:1533: error: parse error before `(' token
mrsiddataset.cpp:1554: warning: ISO C++ forbids declaration of 
`nRasterXSize'
    with no type
mrsiddataset.cpp:1555: warning: ISO C++ forbids declaration of 
`nRasterYSize'
    with no type
mrsiddataset.cpp:1556: warning: ISO C++ forbids declaration of `nBands' 
with no
    type
mrsiddataset.cpp:1563: error: parse error before `if'
mrsiddataset.cpp:1573: warning: ISO C++ forbids declaration of 
`adfGeoTransform
    ' with no type
mrsiddataset.cpp:1573: error: invalid initializer
mrsiddataset.cpp:1574: warning: ISO C++ forbids declaration of 
`adfGeoTransform
    ' with no type
mrsiddataset.cpp:1574: error: conflicting types for `int 
adfGeoTransform[3]'
mrsiddataset.cpp:1573: error: previous declaration as `int 
adfGeoTransform[0]'
mrsiddataset.cpp:1575: warning: ISO C++ forbids declaration of 
`bHasGeoTransfom
    ' with no type
mrsiddataset.cpp:1576: error: parse error before `}' token
mrsiddataset.cpp:1581: warning: ISO C++ forbids declaration of 
`nRasterXSize'
    with no type
mrsiddataset.cpp:1581: error: redefinition of `int nRasterXSize'
mrsiddataset.cpp:1554: error: `int nRasterXSize' previously defined here
mrsiddataset.cpp:1582: error: `nCurrentZoomLevel' was not declared in 
this
    scope
mrsiddataset.cpp:1583: warning: ISO C++ forbids declaration of 
`nRasterYSize'
    with no type
mrsiddataset.cpp:1583: error: redefinition of `int nRasterYSize'
mrsiddataset.cpp:1555: error: `int nRasterYSize' previously defined here
mrsiddataset.cpp:1584: error: `nCurrentZoomLevel' was not declared in 
this
    scope
mrsiddataset.cpp:1585: error: parse error before `}' token
mrsiddataset.cpp:1592: error: `iZoom' was not declared in this scope
mrsiddataset.cpp:1592: warning: ISO C++ forbids declaration of 
`CPLDebug' with
    no type
mrsiddataset.cpp:1592: error: `int CPLDebug' redeclared as different 
kind of
    symbol
../../port/cpl_error.h:124: error: previous declaration of `void 
CPLDebug(const
    char*, const char*, ...)'
mrsiddataset.cpp:1592: warning: initializer list being treated as 
compound
    expression
mrsiddataset.cpp:1599: error: parse error before `for'
mrsiddataset.cpp:1599: error: syntax error before `<=' token
mrsiddataset.cpp:1599: error: syntax error before `++' token
mrsiddataset.cpp: In static member function `static GDALDataset*
    MrSIDDataset::Open(GDALOpenInfo*)':
mrsiddataset.cpp:1628: error: 'class MrSIDDataset' has no member named '
    poFilename'
mrsiddataset.cpp:1628: error: parse error before `(' token
mrsiddataset.cpp:1629: error: 'class MrSIDDataset' has no member named '
    poMrSidFile'
mrsiddataset.cpp:1629: error: parse error before `(' token
mrsiddataset.cpp:1631: error: parse error before `oException'
mrsiddataset.cpp: At global scope:
mrsiddataset.cpp:1638: error: syntax error before `::' token
mrsiddataset.cpp:1643: error: syntax error before `->' token
mrsiddataset.cpp:1651: error: `i' was not declared in this scope
mrsiddataset.cpp:1656: error: parse error before `do'
mrsiddataset.cpp:1663: error: syntax error before `->' token
mrsiddataset.cpp:1665: error: `pszElement' was not declared in this 
scope
mrsiddataset.cpp:1665: warning: ISO C++ forbids declaration of 
`VSIFree' with
    no type
mrsiddataset.cpp:1665: error: `int VSIFree' redeclared as different 
kind of
    symbol
../../port/cpl_vsi.h:222: error: previous declaration of `void 
VSIFree(void*)'
mrsiddataset.cpp:1666: warning: ISO C++ forbids declaration of 
`VSIFree' with
    no type
mrsiddataset.cpp:1666: error: redefinition of `int VSIFree'
mrsiddataset.cpp:1665: error: `int VSIFree' previously defined here
mrsiddataset.cpp:1666: warning: invalid conversion from `char*' to `int'
mrsiddataset.cpp:1667: error: syntax error before `++' token
mrsiddataset.cpp:1671: error: syntax error before `->' token
mrsiddataset.cpp:1676: error: syntax error before `->' token
mrsiddataset.cpp:1682: error: syntax error before `->' token
mrsiddataset.cpp:1685: error: `poDS' was not declared in this scope
mrsiddataset.cpp:1685: error: parse error before `;' token
mrsiddataset.cpp:1685: error: syntax error before `++' token
mrsiddataset.cpp:1689: error: syntax error before `->' token
mrsiddataset.cpp:1691: error: syntax error before `->' token
mrsiddataset.cpp:1699: error: syntax error before `->' token
mrsiddataset.cpp:1703: error: `poDS' was not declared in this scope
mrsiddataset.cpp:1703: error: `poDS' was not declared in this scope
mrsiddataset.cpp:1703: error: `poDS' was not declared in this scope
mrsiddataset.cpp:1704: error: `poDS' was not declared in this scope
mrsiddataset.cpp:1704: warning: ISO C++ forbids declaration of 
`CPLDebug' with
    no type
mrsiddataset.cpp:1704: error: redefinition of `int CPLDebug'
mrsiddataset.cpp:1592: error: `int CPLDebug' previously defined here
mrsiddataset.cpp:1704: warning: initializer list being treated as 
compound
    expression
mrsiddataset.cpp:1706: error: parse error before `return'
mrsiddataset.cpp: In function `void
    __static_initialization_and_destruction_0(int, int)':
mrsiddataset.cpp:1574: warning: statement with no effect
make[2]: *** [../o/mrsiddataset.o] Error 1
make[1]: *** [mrsid-install-obj] Error 2
make: *** [frmts-target] Error 2


Christopher J. Fonnesbeck ( c h r i s @ f o n n e s b e c k . o r g )
Georgia Cooperative Fish & Wildlife Research Unit, University of Georgia


