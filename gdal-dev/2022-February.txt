From ni_hao88 at hotmail.com  Tue Feb  1 08:26:02 2022
From: ni_hao88 at hotmail.com (ni hao)
Date: Tue, 1 Feb 2022 16:26:02 +0000
Subject: [gdal-dev] Sentinel-1 IW Single Look Complex (SLC)
Message-ID: <DM5PR02MB38625333779C47A5ACA310D1F1269@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi list,

GDAL Sentinel-1 driver question:
I know that GDAL Sentinel-1 driver works well on GRD (detected).
What about SLC?

Level-1 IW SLC product contains one image per sub-swath, per polarisation channel, for a total of three or six images (3 tiff for HH, or 6 tiff for HH/HV dual-band)
The EW SLC products contain one image per sub-swath, per polarisation channel, for a total of five or ten images.

https://sentinels.copernicus.eu/web/sentinel/technical-guides/sentinel-1-sar/products-algorithms/level-1-algorithms/single-look-complex

Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220201/09037ccb/attachment.html>

From even.rouault at spatialys.com  Tue Feb  1 08:33:56 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 1 Feb 2022 17:33:56 +0100
Subject: [gdal-dev] Sentinel-1 IW Single Look Complex (SLC)
In-Reply-To: <DM5PR02MB38625333779C47A5ACA310D1F1269@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB38625333779C47A5ACA310D1F1269@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <13c80e9a-886b-12c8-2911-9c555fa1300c@spatialys.com>

Hi,

There have been improvements in GDAL 3.4.0 (*) regarding SLC products in 
the SAFE/Sentinel 1 driver. I can see that it seems to work fine on a 
S1A_IW_SLC__xxxx dataset. I don't have EW SLC products at hand

Even

(*) 
https://github.com/OSGeo/gdal/commit/eea55bfcfd36c081b8354b0a4e132cfc51332ef8

Le 01/02/2022 ? 17:26, ni hao a ?crit?:
> Hi list,
>
> GDAL?Sentinel-1 driver question:
> I know that GDAL?Sentinel-1 driver works well on GRD (detected).
> What about SLC?
>
> Level-1 IW SLC product contains one image per sub-swath, per 
> polarisation channel, for a total of three or six images (3 tiff for 
> HH, or 6 tiff for HH/HV dual-band)
> The EW SLC products contain one image per sub-swath, per polarisation 
> channel, for a total of five or ten images.
>
> https://sentinels.copernicus.eu/web/sentinel/technical-guides/sentinel-1-sar/products-algorithms/level-1-algorithms/single-look-complex
>
> Thank you.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220201/0d5f07fa/attachment.html>

From ni_hao88 at hotmail.com  Tue Feb  1 08:38:58 2022
From: ni_hao88 at hotmail.com (ni hao)
Date: Tue, 1 Feb 2022 16:38:58 +0000
Subject: [gdal-dev] Sentinel-1 IW Single Look Complex (SLC)
In-Reply-To: <13c80e9a-886b-12c8-2911-9c555fa1300c@spatialys.com>
References: <DM5PR02MB38625333779C47A5ACA310D1F1269@DM5PR02MB3862.namprd02.prod.outlook.com>
 <13c80e9a-886b-12c8-2911-9c555fa1300c@spatialys.com>
Message-ID: <DM5PR02MB3862CE6E9F8D010FDC65611FF1269@DM5PR02MB3862.namprd02.prod.outlook.com>

Thank you Even.
________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: February 1, 2022 12:33 PM
To: ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Sentinel-1 IW Single Look Complex (SLC)


Hi,

There have been improvements in GDAL 3.4.0 (*) regarding SLC products in the SAFE/Sentinel 1 driver. I can see that it seems to work fine on a S1A_IW_SLC__xxxx dataset. I don't have EW SLC products at hand

Even

(*) https://github.com/OSGeo/gdal/commit/eea55bfcfd36c081b8354b0a4e132cfc51332ef8

Le 01/02/2022 ? 17:26, ni hao a ?crit :
Hi list,

GDAL Sentinel-1 driver question:
I know that GDAL Sentinel-1 driver works well on GRD (detected).
What about SLC?

Level-1 IW SLC product contains one image per sub-swath, per polarisation channel, for a total of three or six images (3 tiff for HH, or 6 tiff for HH/HV dual-band)
The EW SLC products contain one image per sub-swath, per polarisation channel, for a total of five or ten images.

https://sentinels.copernicus.eu/web/sentinel/technical-guides/sentinel-1-sar/products-algorithms/level-1-algorithms/single-look-complex

Thank you.



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220201/52f2ae85/attachment-0001.html>

From Matt.Wilkie at yukon.ca  Tue Feb  1 10:51:22 2022
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Tue, 1 Feb 2022 18:51:22 +0000
Subject: [gdal-dev] gdal-utils: About GDAL Python Utilities
Message-ID: <51a5be7eb8e145d0807f7178fb0ad99d@yukon.ca>

Hi,

I had to read through RFC 78: gdal-utils package<https://gdal.org/development/rfc/rfc78_gdal_utils_package.html> a few times to wrap my head around what the major components are. Here's some writing of what I think I understand. Is it correct?

About GDAL Python Utilities

The GDAL python utilities are included with GDAL. If you've installed GDAL you already have them. However you may want to use a newer or older version of the utilities without changing GDAL. This is where gdal-utils comes in.

gdal-utils: is the Gdal Python Utilities distribution. This is what you install. It's home page is https://pypi.org/project/gdal-utils/ . Install it with `pip install gdal-utils` and it will up or downgrade the utilities in place.

osgeo_utils: is the python package. This is what you use in your code after installing, e.g. `from osgeo_utils import ...`. If you're not writing code, ignore it.

(something here, perhaps names links to the utilities that are available on command line)

Developers

Clone or download the gdal project: https://github.com/OSGeo/gdal/

Osgeo_utils doesn't have a top level document yet. It's code root is .../swig/python/gdal-utils/osgeo_utils<https://github.com/OSGeo/gdal/tree/master/swig/python/gdal-utils/osgeo_utils> . It is nested inside the gdal-utils project. In your IDE set gdal-utils as the root folder.

(not sure about this. Is better to have osgeo_utils as root?)

Discuss via gdal-dev mailing list<https://lists.osgeo.org/mailman/listinfo/gdal-dev>.

Contribute changes with Pull Requests<https://github.com/OSGeo/gdal/pulls> from your fork to main GDAL project (and use gdal-utils label?)


Perhaps this could serve as part of a 'gdal-utils' project intro page somewhere. I think I still have write permissions to the Trac Wiki, but is that doesn't feel like the right place to me.

(BW, the Nabble archive links are broken on the RFC page.)

Matt Wilkie
Geomatics Developer & Administrator
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Mon-Wed: Office, Thu: Remote, Fri: Away.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220201/82f0d847/attachment.html>

From idan at miara.com  Tue Feb  1 11:30:12 2022
From: idan at miara.com (Idan Miara)
Date: Tue, 1 Feb 2022 21:30:12 +0200
Subject: [gdal-dev] gdal-utils: About GDAL Python Utilities
In-Reply-To: <51a5be7eb8e145d0807f7178fb0ad99d@yukon.ca>
References: <51a5be7eb8e145d0807f7178fb0ad99d@yukon.ca>
Message-ID: <CAEDrt3-=VmKntHYH9y+O5K2izOCwaSWNpHhFLy-bf3HuC2oavA@mail.gmail.com>

Hi Matt,

Thanks for looking into this.

Yes, you got it right.
You can find some documentation in the following pages, though it
certainly could be approved as per your suggestions, maybe also by using
some text from the RFC.
https://gdal.org/api/index.html#python-api
https://gdal.org/programs/index.html#programs (note the programs that end
with .py)
https://gdal.org/api/python_samples.html
These doc pages are auto generated from the sources here:
https://github.com/OSGeo/gdal/tree/master/doc/source

> Osgeo_utils doesn?t have a top level document yet.
I'm not sure what you mean by a top level document (it doesn't have its own
separate repository if that is what you meant).

>  It?s code root is .../swig/python/gdal-utils/osgeo_utils
<https://github.com/OSGeo/gdal/tree/master/swig/python/gdal-utils/osgeo_utils>
.
It is nested inside the gdal-utils project. In your IDE set gdal-utils as
the root folder. (*not sure about this. Is it better to have osgeo_utils as
root?)*
In order to make python use the package without installing it you need to
add its parent folder (that is  .../swig/python/gdal-utils/
<https://github.com/OSGeo/gdal/tree/master/swig/python/gdal-utils/osgeo_utils>
)
as a source dir), which practically inserts that folder at the top of your
`sys.path`, which is where python looks for packages when you import. So
because your `site-packages` folder is in your `sys.path` by default, then
any package under it is recognized.
When you insert any other folder before it then it gets a higher priority
(and that is what happens when you mark as source dir).

> Contribute changes with Pull Requests
<https://github.com/OSGeo/gdal/pulls> from your fork to the main GDAL
project *(and use gdal-utils label?)*
Right, A dedicated label sounds like a good idea.

Please feel free to make a PR to improve the above docs by editing the RST
pages (https://github.com/OSGeo/gdal/tree/master/doc/source).
Feel free to ask further questions.

Idan.


On Tue, 1 Feb 2022 at 20:51, <Matt.Wilkie at yukon.ca> wrote:

> Hi,
>
>
>
> I had to read through *RFC 78: gdal-utils package
> <https://gdal.org/development/rfc/rfc78_gdal_utils_package.html>* a few
> times to wrap my head around what the major components are. Here?s some
> writing of what I think I understand. Is it correct?
>
>
> About GDAL Python Utilities
>
>
>
> The GDAL python utilities are included with GDAL. If you?ve installed GDAL
> you already have them. However you may want to use a newer or older version
> of the utilities without changing GDAL. This is where *gdal-utils* comes
> in.
>
>
>
> *gdal-utils*: is the Gdal Python Utilities *distribution*. This is what
> you install. It?s home page is https://pypi.org/project/gdal-utils/ .
> Install it with `pip install gdal-utils` and it will up or downgrade the
> utilities in place.
>
>
>
> *osgeo_utils*: is the python *package*. This is what you use in your code
> after installing, e.g. `from osgeo_utils import ...`. If you?re not writing
> code, ignore it.
>
>
>
> *(something here, perhaps names links to the utilities that are available
> on command line)*
>
>
> Developers
>
>
>
> Clone or download the gdal project: https://github.com/OSGeo/gdal/
>
>
>
> Osgeo_utils doesn?t have a top level document yet. It?s code root is
> .../swig/python/gdal-utils/osgeo_utils
> <https://github.com/OSGeo/gdal/tree/master/swig/python/gdal-utils/osgeo_utils>
> . It is nested inside the gdal-utils project. In your IDE set gdal-utils as
> the root folder.
>
>
>
> (*not sure about this. Is better to have osgeo_utils as root?)*
>
>
>
> Discuss via gdal-dev mailing list
> <https://lists.osgeo.org/mailman/listinfo/gdal-dev>.
>
>
>
> Contribute changes with Pull Requests
> <https://github.com/OSGeo/gdal/pulls> from your fork to main GDAL project *(and
> use gdal-utils label?)*
>
>
>
>
>
> Perhaps this could serve as part of a ?gdal-utils? project intro page
> somewhere. I think I still have write permissions to the Trac Wiki, but is
> that doesn?t feel like the right place to me.
>
>
>
> (BW, the Nabble archive links are broken on the RFC page.)
>
>
>
> *Matt Wilkie*
>
> Geomatics Developer & Administrator
>
> Environment | Technology, Innovation and Mapping
>
> T 867-667-8133 | *Yukon.ca <http://yukon.ca/>*
>
> *Hours: 08:30-16:30, Mon-Wed: Office, Thu: Remote, Fri: Away.*
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220201/91df770b/attachment-0001.html>

From Stefan.Blumentrath at nina.no  Wed Feb  2 00:21:06 2022
From: Stefan.Blumentrath at nina.no (Stefan Blumentrath)
Date: Wed, 2 Feb 2022 08:21:06 +0000
Subject: [gdal-dev] netCDF multi-dimensional support
In-Reply-To: <CAJf0KTSCub8PaLD6Zc8nFSg8niZ8jt5Dq_Q9ZTYU88piRgO1Dw@mail.gmail.com>
References: <CAJf0KTSCub8PaLD6Zc8nFSg8niZ8jt5Dq_Q9ZTYU88piRgO1Dw@mail.gmail.com>
Message-ID: <AM6PR02MB503034FD904B2E16D2F027759E279@AM6PR02MB5030.eurprd02.prod.outlook.com>

Hi Simon,

I am having a similar issue.
My workaround has been to deactivate HDF5 (4) driver which hides the netCDF driver.
On the command line, you could do:
gdalinfo -if netCDF file.nc

In Python:
for dreiver in ["HDF5", "HDF5Image"]:
    if gdal.GetDriverByName(driver):
        gdal.GetDriverByName(driver).Deregister()

nc_ds = gdal.Open(<file.nc>)

Hope that helps.

Cheers
Stefan

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Simon Eves
Sent: torsdag 9. desember 2021 20:33
To: gdal dev <gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] netCDF multi-dimensional support

I am trying to build GDAL 3.4.0 with "full" netCDF support, but getting different results on my two machines, both Ubuntu 20.04 with supposedly-the-same dev environment.

Both have the libnetcdf-dev (4.7.3) apt package installed, and both have working nc-config, which reports the same thing on both.

I am configuring GDAL as follows:

./configure --prefix=$PREFIX --without-geos --with-libkml=$PREFIX --with-proj=$PREFIX --with-libtiff=internal --with-geotiff=internal --with-netcdf=yes

Both configure logs attached.
____________________________________________________________________

OLD (works)

$ apt list --installed | egrep -i "hdf|cdf"
hdf5-helpers/focal,now 1.10.4+repack-11ubuntu1 amd64 [installed,automatic]
libhdf4-0-alt/focal,now 4.2.14-1ubuntu1 amd64 [installed,automatic]
libhdf4-alt-dev/focal,now 4.2.14-1ubuntu1 amd64 [installed,automatic]
libhdf5-103/focal,now 1.10.4+repack-11ubuntu1 amd64 [installed,automatic]
libhdf5-cpp-103/focal,now 1.10.4+repack-11ubuntu1 amd64 [installed,automatic]
libhdf5-dev/focal,now 1.10.4+repack-11ubuntu1 amd64 [installed,automatic]
libnetcdf-dev/focal,now 1:4.7.3-1 amd64 [installed,automatic]
libnetcdf15/focal,now 1:4.7.3-1 amd64 [installed,automatic]

$ gdalinfo --formats | egrep -i "hdf|cdf"
GMT -raster- (rw): GMT NetCDF Grid Format
netCDF -raster,multidimensional raster,vector- (rw+vs): Network Common Data Format
HDF4 -raster,multidimensional raster- (ros): Hierarchical Data Format Release 4
HDF4Image -raster- (rw+): HDF4 Dataset
HDF5 -raster,multidimensional raster- (rovs): Hierarchical Data Format Release 5
HDF5Image -raster- (rov): HDF5 Dataset

$ gdalinfo file.nc<https://eur01.safelinks.protection.outlook.com/?url=http%3A%2F%2Ffile.nc%2F&data=04%7C01%7CStefan.Blumentrath%40nina.no%7Ca87daf95b32d40b9bba008d9bb4ac18c%7C6cef373021314901831055b3abf02c73%7C0%7C0%7C637746753705068303%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&sdata=5IHXlLphwxKABZC18J5AzsgndUh2JqEblWAGl%2BrvH78%3D&reserved=0> | head -1
Driver: netCDF/Network Common Data Format

File imports fine
____________________________________________________________________

NEW (problematic)

$ apt list --installed | egrep -i "hdf|cdf"
hdf5-helpers/focal,now 1.10.4+repack-11ubuntu1 amd64 [installed,automatic]
libhdf5-103/focal,now 1.10.4+repack-11ubuntu1 amd64 [installed,automatic]
libhdf5-cpp-103/focal,now 1.10.4+repack-11ubuntu1 amd64 [installed,automatic]
libhdf5-dev/focal,now 1.10.4+repack-11ubuntu1 amd64 [installed,automatic]
libnetcdf-dev/focal,now 1:4.7.3-1 amd64 [installed]
libnetcdf15/focal,now 1:4.7.3-1 amd64 [installed,automatic]

$ gdalinfo --formats | egrep -i "hdf|cdf"
GMT -raster- (rw): GMT NetCDF Grid Format
netCDF -raster,vector- (rw+s): Network Common Data Format
HDF5 -raster,multidimensional raster- (rovs): Hierarchical Data Format Release 5
HDF5Image -raster- (rov): HDF5 Dataset

$ gdalinfo file.nc<https://eur01.safelinks.protection.outlook.com/?url=http%3A%2F%2Ffile.nc%2F&data=04%7C01%7CStefan.Blumentrath%40nina.no%7Ca87daf95b32d40b9bba008d9bb4ac18c%7C6cef373021314901831055b3abf02c73%7C0%7C0%7C637746753705068303%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&sdata=5IHXlLphwxKABZC18J5AzsgndUh2JqEblWAGl%2BrvH78%3D&reserved=0> | head -1
Driver: HDF5/Hierarchical Data Format Release 5

Some sub-datasets will not open
____________________________________________________________________

Note that the old machine already had HDR4 libs (and consequentially GDAL built with support for that too, even though I did not explicitly reqiuest HDF4 or HDF5 support in the configure), which may be the issue, although I am loath to just install HDF4 on the new (freshly built two weeks ago) machine if I don't need to.

On the old machine, gdalinfo reports the file as netCDF just fine, and the netCDF driver claims to have multi-dimensional support. The driver on the new one does not, and the file reports as plain HDF5, and some sub-datasets will not open (presumably multi-dimensional ones!)

I am failing to find anything in the docs about the dependency chain here, or anything about having to explicitly enable multi-dimensional support in the build.

I don't know if the netCDF file in question is public-domain, so I would rather not send it to you at this time. I can find out, if that would help, although I doubt the file itself is the issue.

Please advise. Thanks! :)

Simon

--
[http://www2.omnisci.com/l/298412/2018-09-18/3sqpg/298412/61753/OmniSci_Email_Header2.png]<https://eur01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.omnisci.com%2F&data=04%7C01%7CStefan.Blumentrath%40nina.no%7Ca87daf95b32d40b9bba008d9bb4ac18c%7C6cef373021314901831055b3abf02c73%7C0%7C0%7C637746753705068303%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C2000&sdata=Y%2BReec5JDfSrgVI29FFg7Ftn08pW%2Fkp5w7ljw6QykCw%3D&reserved=0>
Simon Eves
Senior Graphics Engineer, Rendering Group
100 Montgomery St (5th Floor), San Francisco, CA 94104, USA
Email: simon.eves at omnisci.com<mailto:simon.eves at omnisci.com> | Cell:
+1 (415) 902-1996

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220202/a1f98ab2/attachment.html>

From Stefan.Blumentrath at nina.no  Wed Feb  2 00:35:47 2022
From: Stefan.Blumentrath at nina.no (Stefan Blumentrath)
Date: Wed, 2 Feb 2022 08:35:47 +0000
Subject: [gdal-dev] netCDF with virtual file system (/vsicurl/) not working
Message-ID: <AM6PR02MB50308810552AC9D997A8C4AE9E279@AM6PR02MB5030.eurprd02.prod.outlook.com>

Hi,

I have been using GDAL to access online data sources in netCDF successfully.
With Ubuntu 20.04, this unfortunately no longer works with the netCDF driver.

Here is a reproducible example:
gdalinfo -if netCDF /vsicurl/https://nbstds.met.no/thredds/fileServer/NBS/S2A/2021/02/28/S2A_MSIL1C_20210228T103021_N0202_R108_T35WPU_20210228T201033_DTERRENGDATA.nc

The original error message (before working around the HDF5 driver) has been that permissions for the userfaultfd system call were denied. But if I specify the netCDF driver, the format is not recognized. Downloading the dataset and opening It locally works.

I saw some possibly relevant changes:
https://github.com/OSGeo/gdal/pull/4508
https://github.com/OSGeo/gdal/issues/2412

Any hint on how to get that functionality back would be very much appreciated!

Cheers
Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220202/c8dc9c23/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Feb  2 00:49:10 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 2 Feb 2022 08:49:10 +0000
Subject: [gdal-dev] netCDF with virtual file system (/vsicurl/) not
 working
Message-ID: <a8b53c464b664160bb31d86131a55d00@maanmittauslaitos.fi>

Hi,

What is your GDAL version? Check with "gdalinfo --version"

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Stefan Blumentrath
L?hetetty: keskiviikko 2. helmikuuta 2022 10.36
Vastaanottaja: gdal-dev <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] netCDF with virtual file system (/vsicurl/) not working

Hi,

I have been using GDAL to access online data sources in netCDF successfully.
With Ubuntu 20.04, this unfortunately no longer works with the netCDF driver.

Here is a reproducible example:
gdalinfo -if netCDF /vsicurl/https://nbstds.met.no/thredds/fileServer/NBS/S2A/2021/02/28/S2A_MSIL1C_20210228T103021_N0202_R108_T35WPU_20210228T201033_DTERRENGDATA.nc

The original error message (before working around the HDF5 driver) has been that permissions for the userfaultfd system call were denied. But if I specify the netCDF driver, the format is not recognized. Downloading the dataset and opening It locally works.

I saw some possibly relevant changes:
https://github.com/OSGeo/gdal/pull/4508
https://github.com/OSGeo/gdal/issues/2412

Any hint on how to get that functionality back would be very much appreciated!

Cheers
Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220202/8baf1e29/attachment.html>

From Stefan.Blumentrath at nina.no  Wed Feb  2 01:01:22 2022
From: Stefan.Blumentrath at nina.no (Stefan Blumentrath)
Date: Wed, 2 Feb 2022 09:01:22 +0000
Subject: [gdal-dev] netCDF with virtual file system (/vsicurl/) not
 working
In-Reply-To: <a8b53c464b664160bb31d86131a55d00@maanmittauslaitos.fi>
References: <a8b53c464b664160bb31d86131a55d00@maanmittauslaitos.fi>
Message-ID: <AM6PR02MB5030CDEE379C9D6386C573A19E279@AM6PR02MB5030.eurprd02.prod.outlook.com>

Hi,

And thanks for your swift reply, Jukka.
I tried different versions on Linux (Ubuntu: ubuntugis-stable and ubuntugis-unstable):
3.3.2, 3.4.0
Fedora:
3.3.2

On Windows the latest OSGeo4W provided version:
3.4.1 (and there it does not work)

On my Fedora box however, I now compiled GDAL 3.4.1, there it seems to work again...

Cheers
Stefan

From: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>
Sent: onsdag 2. februar 2022 09:49
To: Stefan Blumentrath <Stefan.Blumentrath at nina.no>; gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: netCDF with virtual file system (/vsicurl/) not working

Hi,

What is your GDAL version? Check with "gdalinfo --version"

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Stefan Blumentrath
L?hetetty: keskiviikko 2. helmikuuta 2022 10.36
Vastaanottaja: gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Aihe: [gdal-dev] netCDF with virtual file system (/vsicurl/) not working

Hi,

I have been using GDAL to access online data sources in netCDF successfully.
With Ubuntu 20.04, this unfortunately no longer works with the netCDF driver.

Here is a reproducible example:
gdalinfo -if netCDF /vsicurl/https://nbstds.met.no/thredds/fileServer/NBS/S2A/2021/02/28/S2A_MSIL1C_20210228T103021_N0202_R108_T35WPU_20210228T201033_DTERRENGDATA.nc

The original error message (before working around the HDF5 driver) has been that permissions for the userfaultfd system call were denied. But if I specify the netCDF driver, the format is not recognized. Downloading the dataset and opening It locally works.

I saw some possibly relevant changes:
https://github.com/OSGeo/gdal/pull/4508<https://eur01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FOSGeo%2Fgdal%2Fpull%2F4508&data=04%7C01%7CStefan.Blumentrath%40nina.no%7C712e34b2580542465b6308d9e628e428%7C6cef373021314901831055b3abf02c73%7C0%7C0%7C637793885589031036%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=8YXTXn0Pc7WWlTK5F6ECh1PocPjazxOahHihakmjpU8%3D&reserved=0>
https://github.com/OSGeo/gdal/issues/2412<https://eur01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FOSGeo%2Fgdal%2Fissues%2F2412&data=04%7C01%7CStefan.Blumentrath%40nina.no%7C712e34b2580542465b6308d9e628e428%7C6cef373021314901831055b3abf02c73%7C0%7C0%7C637793885589031036%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=9sQzMAyPA54CSZVIdvqkiK0RrFLeainC3FYka0tfPEQ%3D&reserved=0>

Any hint on how to get that functionality back would be very much appreciated!

Cheers
Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220202/1765ef41/attachment.html>

From even.rouault at spatialys.com  Wed Feb  2 02:15:04 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 2 Feb 2022 11:15:04 +0100
Subject: [gdal-dev] netCDF with virtual file system (/vsicurl/) not
 working
In-Reply-To: <AM6PR02MB5030CDEE379C9D6386C573A19E279@AM6PR02MB5030.eurprd02.prod.outlook.com>
References: <a8b53c464b664160bb31d86131a55d00@maanmittauslaitos.fi>
 <AM6PR02MB5030CDEE379C9D6386C573A19E279@AM6PR02MB5030.eurprd02.prod.outlook.com>
Message-ID: <365b89aa-8871-7b57-e5f5-9524bd2bf129@spatialys.com>

The issue with userfaultfd not working with modern Linux kernels was 
fixed in 3.4.0 per 
https://github.com/OSGeo/gdal/pull/4508/commits/f861fd3fc6826ab753e0155f15507494d54f7ecb

/vsicurl/ on a netCDF file, with the netCDF driver, cannot work on 
non-Linux systems. The HDF5 driver will then trigger.

Le 02/02/2022 ? 10:01, Stefan Blumentrath a ?crit?:
>
> Hi,
>
> And thanks for your swift reply, Jukka.
>
> I tried different versions on Linux (Ubuntu: ubuntugis-stable and 
> ubuntugis-unstable):
>
> 3.3.2, 3.4.0
>
> Fedora:
>
> 3.3.2
>
> On Windows the latest OSGeo4W provided version:
>
> 3.4.1 (and there it does not work)
>
> On my Fedora box however, I now compiled GDAL 3.4.1, there it seems to 
> work again?
>
> Cheers
>
> Stefan
>
> *From:*Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>
> *Sent:* onsdag 2. februar 2022 09:49
> *To:* Stefan Blumentrath <Stefan.Blumentrath at nina.no>; gdal-dev 
> <gdal-dev at lists.osgeo.org>
> *Subject:* Re: netCDF with virtual file system (/vsicurl/) not working
>
> Hi,
>
> What is your GDAL version? Check with "gdalinfo --version"
>
> -Jukka Rahkonen-
>
> *L?hett?j?:*gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta 
> *Stefan Blumentrath
> *L?hetetty:* keskiviikko 2. helmikuuta 2022 10.36
> *Vastaanottaja:* gdal-dev <gdal-dev at lists.osgeo.org>
> *Aihe:* [gdal-dev] netCDF with virtual file system (/vsicurl/) not working
>
> Hi,
>
> I have been using GDAL to access online data sources in netCDF 
> successfully.
>
> With Ubuntu 20.04, this unfortunately no longer works with the netCDF 
> driver.
>
> Here is a reproducible example:
>
> gdalinfo -if netCDF 
> /vsicurl/https://nbstds.met.no/thredds/fileServer/NBS/S2A/2021/02/28/S2A_MSIL1C_20210228T103021_N0202_R108_T35WPU_20210228T201033_DTERRENGDATA.nc
>
> The original error message (before working around the HDF5 driver) has 
> been that permissions for the userfaultfd system call were denied. But 
> if I specify the netCDF driver, the format is not recognized. 
> Downloading the dataset and opening It locally works.
>
> I saw some possibly relevant changes:
>
> https://github.com/OSGeo/gdal/pull/4508 
> <https://eur01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FOSGeo%2Fgdal%2Fpull%2F4508&data=04%7C01%7CStefan.Blumentrath%40nina.no%7C712e34b2580542465b6308d9e628e428%7C6cef373021314901831055b3abf02c73%7C0%7C0%7C637793885589031036%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=8YXTXn0Pc7WWlTK5F6ECh1PocPjazxOahHihakmjpU8%3D&reserved=0>
>
> https://github.com/OSGeo/gdal/issues/2412 
> <https://eur01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FOSGeo%2Fgdal%2Fissues%2F2412&data=04%7C01%7CStefan.Blumentrath%40nina.no%7C712e34b2580542465b6308d9e628e428%7C6cef373021314901831055b3abf02c73%7C0%7C0%7C637793885589031036%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=9sQzMAyPA54CSZVIdvqkiK0RrFLeainC3FYka0tfPEQ%3D&reserved=0>
>
> Any hint on how to get that functionality back would be very much 
> appreciated!
>
> Cheers
>
> Stefan
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220202/cb9aa884/attachment-0001.html>

From momtchil at momtchev.com  Wed Feb  2 04:07:37 2022
From: momtchil at momtchev.com (Momtchil Momtchev)
Date: Wed, 2 Feb 2022 13:07:37 +0100
Subject: [gdal-dev] GDAL/OGR 3.4.1 not reading S57 correctly
In-Reply-To: <1643331349.224118169@apps.rackspace.com>
References: <b9bea8c4-ab61-5633-7e8b-05723cff0d67@momtchev.com>
 <D30BB565-8F41-403C-8405-B604E97FDC6D@googlemail.com>
 <1643331349.224118169@apps.rackspace.com>
Message-ID: <ca1e21d3-d7d3-3160-53da-0223a232ccde@momtchev.com>


 ??? I get exactly the same layers in /ogrinfo/ as I do with your 
program both with GDAL 3.3.2 and GDAL 3.4.1 on all of your S57 files. 
/s57/1B5X02NE.000/ has 13 layers.

 ??? Here is the program I used: https://pastebin.com/z99xeQ92


On 28/01/2022 01:55, dthorne at pivotmaritime.com wrote:
>
> The S57 file we used to test with each language and it is read 
> correctly in C#?& python, our c++ project is the problem. The S57 is 
> the one generated in "\gdal-3.4.1\autotest\ogr\data\s57" when we built 
> gdal. But here is a link 
> <https://drive.google.com/file/d/1AGCHEQMWHvs6IJgDW45KJvK6gm-r_cpH/view?usp=sharing> 
> to that s57 folder.
>
> The specific s57 file we used was "1B5X02NE.000" which in reference to 
> the first image I linked should have 13 layers.
> Thanks in advance for the help!
>
> Daniel
>
>
> -----Original Message-----
> From: "kusala nine" <kusala9 at googlemail.com>
> Sent: Friday, January 28, 2022 7:04am
> To: "Momtchil Momtchev" <momtchil at momtchev.com>
> Cc: dthorne at pivotmaritime.com, gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] GDAL/OGR 3.4.1 not reading S57 correctly
>
> I?m an S57 expert. Send me the data - I?ll take a look, there?s a lot 
> of leeway with S57 and sometimes it trips up GDAL. I had issues with 
> AML data before which is similar?
> Jonathan.
>
> Sent from my iPhone
>
>     On 27 Jan 2022, at 10:44, Momtchil Momtchev
>     <momtchil at momtchev.com> wrote:
>
>     ??? Your code looks OK, can you send me the file too?
>
>     On 27/01/2022 03:34, dthorne at pivotmaritime.com wrote:
>
>         Here is the C++ code we have written to read the test s57 file.
>         https://pastebin.com/seXrkgmB
>
>         We feel?that it is?some setup stuff we have missed but can't
>         find any clear information. For example we hadn't seen
>         GDAL_DATA environment variables mentioned in any of the
>         documentation we've tried following until Even mentioned it.
>         Are there any other setup stuff we need to do?
>         <https://pastebin.com/seXrkgmB>
>
>         -----Original Message-----
>         From: "Momtchil Momtchev" <momtchil at momtchev.com>
>         Sent: Wednesday, January 26, 2022 9:21pm
>         To: dthorne at pivotmaritime.com, gdal-dev at lists.osgeo.org
>         Subject: Re: [gdal-dev] GDAL/OGR 3.4.1 not reading S57 correctly
>
>         Can you post your C++ code? Generally, you have more chances
>         of getting an answer for this type of question on
>         https://gis.stackexchange.com/
>
>         On 24/01/2022 06:36, dthorne at pivotmaritime.com wrote:
>
>             Hi,
>             So I am trying to get a test C++ project built to read S57
>             files using the gdal/ogr C++ library.
>             I have previously used the C# library that is on there
>             NuGet manager which states v2.4.4 and that seems to read
>             the s57 without issues. Also tried python and that seems
>             to read it with no issues.
>
>             However, I am having a problem with the C++ test project.
>             Having built the C++ library into the .lib and .dll files
>             I have included them into a blank project and implemented
>             the functions to read the s57 file, however it is only
>             reporting 5 layers.
>             These 5 layers are the same no matter the s57 file. And 4
>             out of those 5 layers are not actually layers.
>             Using the autotest generated s57 file as a unit test to
>             cross check, there is supposed to be 13 layers.
>
>             Note: I had feedback from Even indicating the setup
>             environment is probably wrong. And to set up the GDAL_DATA
>             environment variable, so we've made an environment
>             variable referencing the gdal/data folder and that hasn't
>             fixed the problem, but I think it's on the right track as
>             Even said they could reproduce the problem if not setup
>             correctly.
>
>             *Has anyone had success reading s57 files with a C++
>             3.4.1. project that could possibly help?get this going?*
>
>             Link to reference Image: https://imgur.com/a/KwmqZSe
>
>
>             Regards,
>             Daniel
>
>
>             _______________________________________________ gdal-dev
>             mailing list gdal-dev at lists.osgeo.org
>             https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>         -- Momtchil Momtchev <momtchil at momtchev.com>
>
>     -- Momtchil Momtchev <momtchil at momtchev.com>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-- 
Momtchil Momtchev<momtchil at momtchev.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220202/1ea70632/attachment-0001.html>

From ni_hao88 at hotmail.com  Wed Feb  2 10:36:01 2022
From: ni_hao88 at hotmail.com (ni hao)
Date: Wed, 2 Feb 2022 18:36:01 +0000
Subject: [gdal-dev] Sentinel-1 dataset
Message-ID: <DM5PR02MB3862D32D7980DECBB99F2C37F1279@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi list,

There are two issues with the latest GDAL 3.4.1 Sentinel-1:

  1.  ds.GetBandNames() is no longer available. e.g., it should output ['HH', 'HV']
  2.  for dual-polarisation, we can have two band combinations: HH/HV and VV/VH.   For VV/VH, the band order should be VV/VH, rather than in alphabetical order. i.e., VV should be band #1, VH band #2. This information is in manifest.safe.

Thank you.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220202/a0e9c20e/attachment.html>

From Matt.Wilkie at yukon.ca  Wed Feb  2 11:57:14 2022
From: Matt.Wilkie at yukon.ca (Matt.Wilkie at yukon.ca)
Date: Wed, 2 Feb 2022 19:57:14 +0000
Subject: [gdal-dev] gdal-utils: About GDAL Python Utilities
In-Reply-To: <CAEDrt3-=VmKntHYH9y+O5K2izOCwaSWNpHhFLy-bf3HuC2oavA@mail.gmail.com>
References: <51a5be7eb8e145d0807f7178fb0ad99d@yukon.ca>
 <CAEDrt3-=VmKntHYH9y+O5K2izOCwaSWNpHhFLy-bf3HuC2oavA@mail.gmail.com>
Message-ID: <e26a53eb0efe47fdad2f7cabc1dccac4@yukon.ca>

I revised according to your feedback and created an RST document from it. I?m not too experienced with the syntax so there may be some changes needed. Here?s the PR:
https://github.com/OSGeo/gdal/pull/5222

-Matt

From: Idan Miara <idan at miara.com>
Sent: February 1, 2022 12:30 PM
To: Matt.Wilkie <Matt.Wilkie at yukon.ca>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] gdal-utils: About GDAL Python Utilities


*** External email: Do not click on links or attachments except from trusted senders. ***

******************************************************************************************



Hi Matt,

Thanks for looking into this.

Yes, you got it right.
You can find some documentation in the following pages, though it certainly could be approved as per your suggestions, maybe also by using some text from the RFC.
https://gdal.org/api/index.html#python-api
https://gdal.org/programs/index.html#programs (note the programs that end with .py)
https://gdal.org/api/python_samples.html
These doc pages are auto generated from the sources here:
https://github.com/OSGeo/gdal/tree/master/doc/source

> Osgeo_utils doesn?t have a top level document yet.
I'm not sure what you mean by a top level document (it doesn't have its own separate repository if that is what you meant).

>  It?s code root is .../swig/python/gdal-utils/osgeo_utils<https://github.com/OSGeo/gdal/tree/master/swig/python/gdal-utils/osgeo_utils> . It is nested inside the gdal-utils project. In your IDE set gdal-utils as the root folder. (not sure about this. Is it better to have osgeo_utils as root?)
In order to make python use the package without installing it you need to add its parent folder (that is  .../swig/python/gdal-utils/<https://github.com/OSGeo/gdal/tree/master/swig/python/gdal-utils/osgeo_utils> ) as a source dir), which practically inserts that folder at the top of your `sys.path`, which is where python looks for packages when you import. So because your `site-packages` folder is in your `sys.path` by default, then any package under it is recognized.
When you insert any other folder before it then it gets a higher priority (and that is what happens when you mark as source dir).

> Contribute changes with Pull Requests<https://github.com/OSGeo/gdal/pulls> from your fork to the main GDAL project (and use gdal-utils label?)
Right, A dedicated label sounds like a good idea.

Please feel free to make a PR to improve the above docs by editing the RST pages (https://github.com/OSGeo/gdal/tree/master/doc/source).
Feel free to ask further questions.

Idan.


On Tue, 1 Feb 2022 at 20:51, <Matt.Wilkie at yukon.ca<mailto:Matt.Wilkie at yukon.ca>> wrote:
Hi,

I had to read through RFC 78: gdal-utils package<https://gdal.org/development/rfc/rfc78_gdal_utils_package.html> a few times to wrap my head around what the major components are. Here?s some writing of what I think I understand. Is it correct?

About GDAL Python Utilities

The GDAL python utilities are included with GDAL. If you?ve installed GDAL you already have them. However you may want to use a newer or older version of the utilities without changing GDAL. This is where gdal-utils comes in.

gdal-utils: is the Gdal Python Utilities distribution. This is what you install. It?s home page is https://pypi.org/project/gdal-utils/ . Install it with `pip install gdal-utils` and it will up or downgrade the utilities in place.

osgeo_utils: is the python package. This is what you use in your code after installing, e.g. `from osgeo_utils import ...`. If you?re not writing code, ignore it.

(something here, perhaps names links to the utilities that are available on command line)

Developers

Clone or download the gdal project: https://github.com/OSGeo/gdal/

Osgeo_utils doesn?t have a top level document yet. It?s code root is .../swig/python/gdal-utils/osgeo_utils<https://github.com/OSGeo/gdal/tree/master/swig/python/gdal-utils/osgeo_utils> . It is nested inside the gdal-utils project. In your IDE set gdal-utils as the root folder.

(not sure about this. Is better to have osgeo_utils as root?)

Discuss via gdal-dev mailing list<https://lists.osgeo.org/mailman/listinfo/gdal-dev>.

Contribute changes with Pull Requests<https://github.com/OSGeo/gdal/pulls> from your fork to main GDAL project (and use gdal-utils label?)


Perhaps this could serve as part of a ?gdal-utils? project intro page somewhere. I think I still have write permissions to the Trac Wiki, but is that doesn?t feel like the right place to me.

(BW, the Nabble archive links are broken on the RFC page.)

Matt Wilkie
Geomatics Developer & Administrator
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Mon-Wed: Office, Thu: Remote, Fri: Away.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220202/bc1cb110/attachment-0001.html>

From Stefan.Blumentrath at nina.no  Wed Feb  2 13:37:07 2022
From: Stefan.Blumentrath at nina.no (Stefan Blumentrath)
Date: Wed, 2 Feb 2022 21:37:07 +0000
Subject: [gdal-dev] netCDF with virtual file system (/vsicurl/) not
 working
In-Reply-To: <365b89aa-8871-7b57-e5f5-9524bd2bf129@spatialys.com>
References: <a8b53c464b664160bb31d86131a55d00@maanmittauslaitos.fi>
 <AM6PR02MB5030CDEE379C9D6386C573A19E279@AM6PR02MB5030.eurprd02.prod.outlook.com>
 <365b89aa-8871-7b57-e5f5-9524bd2bf129@spatialys.com>
Message-ID: <AM0PR02MB50253C679C79F4247FA35DB29E279@AM0PR02MB5025.eurprd02.prod.outlook.com>

Thanks so much for clarifying, Even.
Very much appreciated.

Cheers,
Stefan

From: Even Rouault <even.rouault at spatialys.com>
Sent: onsdag 2. februar 2022 11:15
To: Stefan Blumentrath <Stefan.Blumentrath at nina.no>; Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>; gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] netCDF with virtual file system (/vsicurl/) not working


The issue with userfaultfd not working with modern Linux kernels was fixed in 3.4.0 per https://github.com/OSGeo/gdal/pull/4508/commits/f861fd3fc6826ab753e0155f15507494d54f7ecb<https://eur01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FOSGeo%2Fgdal%2Fpull%2F4508%2Fcommits%2Ff861fd3fc6826ab753e0155f15507494d54f7ecb&data=04%7C01%7CStefan.Blumentrath%40nina.no%7C695dd2841dda4047724608d9e634e2f5%7C6cef373021314901831055b3abf02c73%7C0%7C0%7C637793937096379254%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=ZwQ1uLLPdq46e6s5om%2FK5hTFndj7mzppoWX78BRT8Xc%3D&reserved=0>

/vsicurl/ on a netCDF file, with the netCDF driver, cannot work on non-Linux systems. The HDF5 driver will then trigger.
Le 02/02/2022 ? 10:01, Stefan Blumentrath a ?crit :
Hi,

And thanks for your swift reply, Jukka.
I tried different versions on Linux (Ubuntu: ubuntugis-stable and ubuntugis-unstable):
3.3.2, 3.4.0
Fedora:
3.3.2

On Windows the latest OSGeo4W provided version:
3.4.1 (and there it does not work)

On my Fedora box however, I now compiled GDAL 3.4.1, there it seems to work again...

Cheers
Stefan

From: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi><mailto:jukka.rahkonen at maanmittauslaitos.fi>
Sent: onsdag 2. februar 2022 09:49
To: Stefan Blumentrath <Stefan.Blumentrath at nina.no><mailto:Stefan.Blumentrath at nina.no>; gdal-dev <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: Re: netCDF with virtual file system (/vsicurl/) not working

Hi,

What is your GDAL version? Check with "gdalinfo --version"

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Stefan Blumentrath
L?hetetty: keskiviikko 2. helmikuuta 2022 10.36
Vastaanottaja: gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Aihe: [gdal-dev] netCDF with virtual file system (/vsicurl/) not working

Hi,

I have been using GDAL to access online data sources in netCDF successfully.
With Ubuntu 20.04, this unfortunately no longer works with the netCDF driver.

Here is a reproducible example:
gdalinfo -if netCDF /vsicurl/https://nbstds.met.no/thredds/fileServer/NBS/S2A/2021/02/28/S2A_MSIL1C_20210228T103021_N0202_R108_T35WPU_20210228T201033_DTERRENGDATA.nc<https://eur01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fnbstds.met.no%2Fthredds%2FfileServer%2FNBS%2FS2A%2F2021%2F02%2F28%2FS2A_MSIL1C_20210228T103021_N0202_R108_T35WPU_20210228T201033_DTERRENGDATA.nc&data=04%7C01%7CStefan.Blumentrath%40nina.no%7C695dd2841dda4047724608d9e634e2f5%7C6cef373021314901831055b3abf02c73%7C0%7C0%7C637793937096379254%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=JeCeCXg8GaE%2BbEqcfCZtSqSyhYenGCJGEXeSgRcj1hE%3D&reserved=0>

The original error message (before working around the HDF5 driver) has been that permissions for the userfaultfd system call were denied. But if I specify the netCDF driver, the format is not recognized. Downloading the dataset and opening It locally works.

I saw some possibly relevant changes:
https://github.com/OSGeo/gdal/pull/4508<https://eur01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FOSGeo%2Fgdal%2Fpull%2F4508&data=04%7C01%7CStefan.Blumentrath%40nina.no%7C695dd2841dda4047724608d9e634e2f5%7C6cef373021314901831055b3abf02c73%7C0%7C0%7C637793937096379254%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=kC9KX9p8z8Li5%2B2Bz0n9mnIqVe7PGXZvJWmnk3nxwTs%3D&reserved=0>
https://github.com/OSGeo/gdal/issues/2412<https://eur01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2FOSGeo%2Fgdal%2Fissues%2F2412&data=04%7C01%7CStefan.Blumentrath%40nina.no%7C695dd2841dda4047724608d9e634e2f5%7C6cef373021314901831055b3abf02c73%7C0%7C0%7C637793937096379254%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=0%2BaNjv%2FzsERgvjae4m6w7OmLwyyeI8hwmWweTjfk%2FQA%3D&reserved=0>

Any hint on how to get that functionality back would be very much appreciated!

Cheers
Stefan



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev<https://eur01.safelinks.protection.outlook.com/?url=https%3A%2F%2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&data=04%7C01%7CStefan.Blumentrath%40nina.no%7C695dd2841dda4047724608d9e634e2f5%7C6cef373021314901831055b3abf02c73%7C0%7C0%7C637793937096379254%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=u3923jDQ0jKgi0RyTPRBpgBa%2FDhBqUGLC3lL9vF9UsE%3D&reserved=0>

--

http://www.spatialys.com<https://eur01.safelinks.protection.outlook.com/?url=http%3A%2F%2Fwww.spatialys.com%2F&data=04%7C01%7CStefan.Blumentrath%40nina.no%7C695dd2841dda4047724608d9e634e2f5%7C6cef373021314901831055b3abf02c73%7C0%7C0%7C637793937096379254%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C3000&sdata=%2B6jmR1Ho4RRW%2F9odzAzLd2S%2FGQ6uZx9zOQjKKwaY3L0%3D&reserved=0>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220202/2efa2f22/attachment.html>

From osgeo.mailinglist at gmail.com  Wed Feb  2 14:59:30 2022
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Wed, 2 Feb 2022 23:59:30 +0100
Subject: [gdal-dev] Any way to get an autocompletion for ogr/gdal utilities?
Message-ID: <CACPZzQ1uwjiJL76G8+1FHbv3Odk39m8hF5rnLBS2HkbrXhYGWQ@mail.gmail.com>

Hello,

On Linux, when I type `ogr` in a command line, and on the keyboard type on
"tab" key, I get all binaries starting with `ogr` e.g

> ogr2ogr      ogrinfo      ogrlineref   ogrmerge.py  ogrtindex

When using command line like git, I type `git commit --` then use again the
tab key and it returns something like below

> --ahead-behind      --date=             --include           --no-verify
      --reedit-message=   --status
> --all               --dry-run           --interactive       --null
       --reset-author      --template=
> --amend             --edit              --long              --only
       --reuse-message=    --untracked-files
> --author=           --file=             --message=          --patch
      --short             --verbose
> --branch            --fixup=            --no-edit           --porcelain
      --signoff           --verify
> --cleanup=          --gpg-sign          --no-post-rewrite   --quiet
      --squash=

So, I do expect a way to get autocompletion or choice when I do something
like `ogr2ogr -` followed by typing on tab key.

Is there an existing script or a tip I'm not aware? Or do I need to work to
create it to get something similar to git command where there is a script
to add autocompletion?

Regards

Thomas Gratier
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220202/c3d2456c/attachment-0001.html>

From neteler at osgeo.org  Thu Feb  3 02:02:25 2022
From: neteler at osgeo.org (Markus Neteler)
Date: Thu, 3 Feb 2022 11:02:25 +0100
Subject: [gdal-dev] Any way to get an autocompletion for ogr/gdal
 utilities?
In-Reply-To: <CACPZzQ1uwjiJL76G8+1FHbv3Odk39m8hF5rnLBS2HkbrXhYGWQ@mail.gmail.com>
References: <CACPZzQ1uwjiJL76G8+1FHbv3Odk39m8hF5rnLBS2HkbrXhYGWQ@mail.gmail.com>
Message-ID: <CALFmHhstg40K7Qa52BNZo=yQYru5tHqKpk0HSRspOBBa1RBmNw@mail.gmail.com>

Hi Thomas,

On Wed, Feb 2, 2022 at 11:59 PM Thomas Gratier
<osgeo.mailinglist at gmail.com> wrote:
>
> Hello,
>
> On Linux, when I type `ogr` in a command line, and on the keyboard type on "tab" key, I get all binaries starting with `ogr` e.g
>
> > ogr2ogr      ogrinfo      ogrlineref   ogrmerge.py  ogrtindex
>
> When using command line like git, I type `git commit --` then use again the tab key and it returns something like below
>
> > --ahead-behind      --date=             --include           --no-verify         --reedit-message=   --status
> > --all               --dry-run           --interactive       --null              --reset-author      --template=
> > --amend             --edit              --long              --only              --reuse-message=    --untracked-files
> > --author=           --file=             --message=          --patch             --short             --verbose
> > --branch            --fixup=            --no-edit           --porcelain         --signoff           --verify
> > --cleanup=          --gpg-sign          --no-post-rewrite   --quiet             --squash=
>
> So, I do expect a way to get autocompletion or choice when I do something like `ogr2ogr -` followed by typing on tab key.
>
> Is there an existing script or a tip I'm not aware? Or do I need to work to create it to get something similar to git command where there is a script to add autocompletion?

AFAIK this requires bash/zsh completion support.

E.g., for core Git, on my Fedora box it is defined in

/usr/share/bash-completion/completions/git

and part of the package:
rpm -qf /usr/share/bash-completion/completions/git
git-core-2.34.1-1.fc35.x86_64

Likewise, there is

/usr/share/bash-completion/completions/ogr2ogr
/usr/share/bash-completion/completions/ogrinfo
/usr/share/bash-completion/completions/ogrlineref
/usr/share/bash-completion/completions/ogrmerge.py
/usr/share/bash-completion/completions/ogrtindex
...

Here it works:
ogrinfo --<tab>
--config        --format        --help-general  --locale        --pause
--debug         --formats       --license       --optfile       --version

Maybe you package installation is incomplete?

Best,
Markus

-- 
Markus Neteler, PhD
https://www.mundialis.de - free data with free software
https://grass.osgeo.org
https://courses.neteler.org/blog

From ni_hao88 at hotmail.com  Thu Feb  3 06:11:29 2022
From: ni_hao88 at hotmail.com (ni hao)
Date: Thu, 3 Feb 2022 14:11:29 +0000
Subject: [gdal-dev] Sentinel-1 IW Single Look Complex (SLC)
In-Reply-To: <13c80e9a-886b-12c8-2911-9c555fa1300c@spatialys.com>
References: <DM5PR02MB38625333779C47A5ACA310D1F1269@DM5PR02MB3862.namprd02.prod.outlook.com>
 <13c80e9a-886b-12c8-2911-9c555fa1300c@spatialys.com>
Message-ID: <DM5PR02MB3862DEF5B9383C488AD0DEA5F1289@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi List,

I downloaded the 3.4.1 and python binding (python 3.6)
Tested on an IW SLC product contains one image per sub-swath, for a total of 3 tiff for HH.

It still only shows one raster band: the first TIFF, rather than three.
Although ds.GetSubDatasets() shows three: IW1, IW2, IW3

ds=gdal.Open('manifest.safe')

>>> ds.RasterCount
1
>>> ds.GetSubDatasets()
[('SENTINEL1_CALIB:SIGMA0:manifest.safe:IW1_HH:INTENSITY', 'Single band with IW1 swath and HH polarization and SIGMA0 calibration'), ('SENTINEL1_CALIB:BETA0:manifest.safe:IW1_HH:INTENSITY', 'Single band with IW1 swath and HH polarization and BETA0 calibration'), ('SENTINEL1_CALIB:GAMMA:manifest.safe:IW1_HH:INTENSITY', 'Single band with IW1 swath and HH polarization and GAMMA calibration'), ('SENTINEL1_CALIB:UNCALIB:manifest.safe:IW1_HH:COMPLEX', 'Single band with IW1 swath and HH polarization and UNCALIB calibration'), ('SENTINEL1_CALIB:UNCALIB:manifest.safe:IW1_HH:INTENSITY', 'Single band with IW1 swath and HH polarization and UNCALIB calibration'), ('SENTINEL1_CALIB:SIGMA0:manifest.safe:IW2_HH:INTENSITY', 'Single band with IW2 swath and HH polarization and SIGMA0 calibration'), ('SENTINEL1_CALIB:BETA0:manifest.safe:IW2_HH:INTENSITY', 'Single band with IW2 swath and HH polarization and BETA0 calibration'), ('SENTINEL1_CALIB:GAMMA:manifest.safe:IW2_HH:INTENSITY', 'Single band with IW2 swath and HH polarization and GAMMA calibration'), ('SENTINEL1_CALIB:UNCALIB:manifest.safe:IW2_HH:COMPLEX', 'Single band with IW2 swath and HH polarization and UNCALIB calibration'), ('SENTINEL1_CALIB:UNCALIB:manifest.safe:IW2_HH:INTENSITY', 'Single band with IW2 swath and HH polarization and UNCALIB calibration'), ('SENTINEL1_CALIB:SIGMA0:manifest.safe:IW3_HH:INTENSITY', 'Single band with IW3 swath and HH polarization and SIGMA0 calibration'), ('SENTINEL1_CALIB:BETA0:manifest.safe:IW3_HH:INTENSITY', 'Single band with IW3 swath and HH polarization and BETA0 calibration'), ('SENTINEL1_CALIB:GAMMA:manifest.safe:IW3_HH:INTENSITY', 'Single band with IW3 swath and HH polarization and GAMMA calibration'), ('SENTINEL1_CALIB:UNCALIB:manifest.safe:IW3_HH:COMPLEX', 'Single band with IW3 swath and HH polarization and UNCALIB calibration'), ('SENTINEL1_CALIB:UNCALIB:manifest.safe:IW3_HH:INTENSITY', 'Single band with IW3 swath and HH polarization and UNCALIB calibration')]
________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: February 1, 2022 12:33 PM
To: ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Sentinel-1 IW Single Look Complex (SLC)


Hi,

There have been improvements in GDAL 3.4.0 (*) regarding SLC products in the SAFE/Sentinel 1 driver. I can see that it seems to work fine on a S1A_IW_SLC__xxxx dataset. I don't have EW SLC products at hand

Even

(*) https://github.com/OSGeo/gdal/commit/eea55bfcfd36c081b8354b0a4e132cfc51332ef8

Le 01/02/2022 ? 17:26, ni hao a ?crit :
Hi list,

GDAL Sentinel-1 driver question:
I know that GDAL Sentinel-1 driver works well on GRD (detected).
What about SLC?

Level-1 IW SLC product contains one image per sub-swath, per polarisation channel, for a total of three or six images (3 tiff for HH, or 6 tiff for HH/HV dual-band)
The EW SLC products contain one image per sub-swath, per polarisation channel, for a total of five or ten images.

https://sentinels.copernicus.eu/web/sentinel/technical-guides/sentinel-1-sar/products-algorithms/level-1-algorithms/single-look-complex

Thank you.



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220203/7959d815/attachment-0001.html>

From dthorne at pivotmaritime.com  Thu Feb  3 15:31:10 2022
From: dthorne at pivotmaritime.com (dthorne at pivotmaritime.com)
Date: Fri, 4 Feb 2022 10:31:10 +1100 (AEDT)
Subject: [gdal-dev] GDAL/OGR 3.4.1 not reading S57 correctly
In-Reply-To: <1643331349.224118169@apps.rackspace.com>
References: <b9bea8c4-ab61-5633-7e8b-05723cff0d67@momtchev.com>  
 <D30BB565-8F41-403C-8405-B604E97FDC6D@googlemail.com> 
 <1643331349.224118169@apps.rackspace.com>
Message-ID: <1643931070.824131009@apps.rackspace.com>


Hi, 
Was just wanting to follow up to see if you or anyone else has had a chance to look into my problem? 
Or might be able to help get the issue figured out. I still feel like it's something with the setup up, but not having any luck.

TIA, 
Daniel


-----Original Message-----
From: dthorne at pivotmaritime.com
Sent: Friday, January 28, 2022 11:55am
To: "kusala nine" <kusala9 at googlemail.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] GDAL/OGR 3.4.1 not reading S57 correctly



The S57 file we used to test with each language and it is read correctly in C# & python, our c++ project is the problem. The S57 is the one generated in "\gdal-3.4.1\autotest\ogr\data\s57" when we built gdal. But [ here is a link ]( https://drive.google.com/file/d/1AGCHEQMWHvs6IJgDW45KJvK6gm-r_cpH/view?usp=sharing ) to that s57 folder.

The specific s57 file we used was "1B5X02NE.000" which in reference to the first image I linked should have 13 layers. 
Thanks in advance for the help! 

Daniel



-----Original Message-----
From: "kusala nine" <kusala9 at googlemail.com>
Sent: Friday, January 28, 2022 7:04am
To: "Momtchil Momtchev" <momtchil at momtchev.com>
Cc: dthorne at pivotmaritime.com, gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] GDAL/OGR 3.4.1 not reading S57 correctly


I?m an S57 expert. Send me the data - I?ll take a look, there?s a lot of leeway with S57 and sometimes it trips up GDAL. I had issues with AML data before which is similar?
Jonathan. 


Sent from my iPhone

On 27 Jan 2022, at 10:44, Momtchil Momtchev <momtchil at momtchev.com> wrote:



 
    Your code looks OK, can you send me the file too?
 
On 27/01/2022 03:34, [ dthorne at pivotmaritime.com ]( mailto:dthorne at pivotmaritime.com ) wrote:
Here is the C++ code we have written to read the test s57 file. 
[ https://pastebin.com/seXrkgmB ]( https://pastebin.com/seXrkgmB )
  
 We feel that it is some setup stuff we have missed but can't find any clear information. For example we hadn't seen GDAL_DATA environment variables mentioned in any of the documentation we've tried following until Even mentioned it. Are there any other setup stuff we need to do? [ 
 ]( https://pastebin.com/seXrkgmB )


-----Original Message-----
 From: "Momtchil Momtchev" [ <momtchil at momtchev.com> ]( mailto:momtchil at momtchev.com )
 Sent: Wednesday, January 26, 2022 9:21pm
 To: [ dthorne at pivotmaritime.com ]( mailto:dthorne at pivotmaritime.com ), [ gdal-dev at lists.osgeo.org ]( mailto:gdal-dev at lists.osgeo.org )
 Subject: Re: [gdal-dev] GDAL/OGR 3.4.1 not reading S57 correctly



 
Can you post your C++ code? Generally, you have more chances of getting an answer for this type of question on [ https://gis.stackexchange.com/ ]( https://gis.stackexchange.com/ )
 
On 24/01/2022 06:36, [ dthorne at pivotmaritime.com ]( mailto:dthorne at pivotmaritime.com ) wrote:
Hi, So I am trying to get a test C++ project built to read S57 files using the gdal/ogr C++ library. I have previously used the C# library that is on there NuGet manager which states v2.4.4 and that seems to read the s57 without issues. Also tried python and that seems to read it with no issues. However, I am having a problem with the C++ test project. Having built the C++ library into the .lib and .dll files I have included them into a blank project and implemented the functions to read the s57 file, however it is only reporting 5 layers.These 5 layers are the same no matter the s57 file. And 4 out of those 5 layers are not actually layers.Using the autotest generated s57 file as a unit test to cross check, there is supposed to be 13 layers. 
 Note: I had feedback from Even indicating the setup environment is probably wrong. And to set up the GDAL_DATA environment variable, so we've made an environment variable referencing the gdal/data folder and that hasn't fixed the problem, but I think it's on the right track as Even said they could reproduce the problem if not setup correctly.
Has anyone had success reading s57 files with a C++ 3.4.1. project that could possibly help get this going?

 Link to reference Image: [ https://imgur.com/a/KwmqZSe ]( https://imgur.com/a/KwmqZSe )
Regards,Daniel

_______________________________________________ gdal-dev mailing list [ gdal-dev at lists.osgeo.org ]( mailto:gdal-dev at lists.osgeo.org ) [ https://lists.osgeo.org/mailman/listinfo/gdal-dev ]( https://lists.osgeo.org/mailman/listinfo/gdal-dev )
-- Momtchil Momtchev [ <momtchil at momtchev.com> ]( mailto:momtchil at momtchev.com )
-- Momtchil Momtchev [ <momtchil at momtchev.com> ]( mailto:momtchil at momtchev.com ) _______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220204/308a1a8d/attachment.html>

From ni_hao88 at hotmail.com  Thu Feb  3 17:26:34 2022
From: ni_hao88 at hotmail.com (ni hao)
Date: Fri, 4 Feb 2022 01:26:34 +0000
Subject: [gdal-dev] Sentinel-1 IW Single Look Complex (SLC)
In-Reply-To: <DM5PR02MB3862DEF5B9383C488AD0DEA5F1289@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB38625333779C47A5ACA310D1F1269@DM5PR02MB3862.namprd02.prod.outlook.com>
 <13c80e9a-886b-12c8-2911-9c555fa1300c@spatialys.com>
 <DM5PR02MB3862DEF5B9383C488AD0DEA5F1289@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <DM5PR02MB38628A230D0F3A10E4F4E017F1299@DM5PR02MB3862.namprd02.prod.outlook.com>

ds=gdal.Open('manifest.safe')
ds.GetRasterBand(1).ReadAsArray(5000, 6000, 10, 6)=
array([[ 8. +7.j,  6.+10.j, -3. +5.j, -3. -1.j, -6. -1.j, -2. -1.j,
         3. +0.j, -2. +0.j, -5. -3.j, -1. -1.j],
       [ 7. +0.j,  4. +0.j, -1. +1.j, -4. +2.j, -1. +0.j, -5. +0.j,
        -1. +2.j,  1. +0.j, -4. +2.j,  5. +0.j],
       [ 0. -6.j,  0. -8.j,  2. -3.j, -1. +3.j,  3. +3.j, -3. +0.j,
        -4. +1.j,  2. +1.j,  0. +6.j,  6. +1.j],
       [-5. -7.j, -3.-10.j,  4. -3.j,  2. +1.j,  4. +3.j,  2. +2.j,
        -2. +0.j,  1. +1.j,  3. +4.j,  0. +1.j],
       [-6. -3.j, -3. -2.j,  1. +0.j,  4. +0.j,  1. +0.j,  4. +3.j,
         2. -1.j,  0. +0.j,  4. +0.j, -4. -1.j],
       [-2. +4.j, -3. +7.j, -3. +2.j,  2. -1.j, -1. -3.j,  2. +1.j,
         4. +0.j, -1. -1.j,  3. -4.j, -4. -3.j]], dtype=complex64)

ds2=gdal.Open('measurement/s1a-iw3-slc-hh-20180215t214409-20180215t214434-020623-0234f6-003.tiff')
ds2.GetRasterBand(1).ReadAsArray(5000, 6000, 10, 6)=
array([[  21. -4.j,  110.+28.j,  154.-24.j,   76.-65.j,  -32.-72.j,
        -104.-77.j, -114.-34.j,  -78. +4.j,  -45.-37.j,  -15.-55.j],
       [  40. -3.j,  -48.-34.j, -164.+21.j, -149.+49.j,  -78.+23.j,
          -1.+32.j,   90.+33.j,  127.-12.j,  119.-18.j,  144. -1.j],
       [ -59. +5.j,   26.+82.j,  124.+47.j,  124.-48.j,   84.-38.j,
          27.+18.j,  -55.+28.j,  -93.+37.j, -112.+51.j, -158.+39.j],
       [ -31. +0.j,  -90.-49.j,  -78.-50.j,  -37.+35.j,   -5.+51.j,
          26.-21.j,   30.-38.j,   25.-25.j,   58.-63.j,   45.-66.j],
       [ 107.+20.j,   64.+30.j,   16.+46.j,   15. -3.j,    4.-56.j,
         -19.-45.j,   -1.-21.j,    0.+10.j,  -29.+59.j,   23.+57.j],
       [ -77. -1.j,   -8.-50.j,   -9.-63.j,  -32.-10.j,  -27.+30.j,
         -32.+36.j,  -33.+22.j,    2.-10.j,   25.-18.j,    2.-11.j]], dtype=complex64)

as you can see, not only SAFE driver can only ingest 1 TIFF out of 3. Its complex numbers are wrong.

________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of ni hao <ni_hao88 at hotmail.com>
Sent: February 3, 2022 10:11 AM
To: Even Rouault <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Sentinel-1 IW Single Look Complex (SLC)

Hi List,

I downloaded the 3.4.1 and python binding (python 3.6)
Tested on an IW SLC product contains one image per sub-swath, for a total of 3 tiff for HH.

It still only shows one raster band: the first TIFF, rather than three.
Although ds.GetSubDatasets() shows three: IW1, IW2, IW3

ds=gdal.Open('manifest.safe')

>>> ds.RasterCount
1
>>> ds.GetSubDatasets()
[('SENTINEL1_CALIB:SIGMA0:manifest.safe:IW1_HH:INTENSITY', 'Single band with IW1 swath and HH polarization and SIGMA0 calibration'), ('SENTINEL1_CALIB:BETA0:manifest.safe:IW1_HH:INTENSITY', 'Single band with IW1 swath and HH polarization and BETA0 calibration'), ('SENTINEL1_CALIB:GAMMA:manifest.safe:IW1_HH:INTENSITY', 'Single band with IW1 swath and HH polarization and GAMMA calibration'), ('SENTINEL1_CALIB:UNCALIB:manifest.safe:IW1_HH:COMPLEX', 'Single band with IW1 swath and HH polarization and UNCALIB calibration'), ('SENTINEL1_CALIB:UNCALIB:manifest.safe:IW1_HH:INTENSITY', 'Single band with IW1 swath and HH polarization and UNCALIB calibration'), ('SENTINEL1_CALIB:SIGMA0:manifest.safe:IW2_HH:INTENSITY', 'Single band with IW2 swath and HH polarization and SIGMA0 calibration'), ('SENTINEL1_CALIB:BETA0:manifest.safe:IW2_HH:INTENSITY', 'Single band with IW2 swath and HH polarization and BETA0 calibration'), ('SENTINEL1_CALIB:GAMMA:manifest.safe:IW2_HH:INTENSITY', 'Single band with IW2 swath and HH polarization and GAMMA calibration'), ('SENTINEL1_CALIB:UNCALIB:manifest.safe:IW2_HH:COMPLEX', 'Single band with IW2 swath and HH polarization and UNCALIB calibration'), ('SENTINEL1_CALIB:UNCALIB:manifest.safe:IW2_HH:INTENSITY', 'Single band with IW2 swath and HH polarization and UNCALIB calibration'), ('SENTINEL1_CALIB:SIGMA0:manifest.safe:IW3_HH:INTENSITY', 'Single band with IW3 swath and HH polarization and SIGMA0 calibration'), ('SENTINEL1_CALIB:BETA0:manifest.safe:IW3_HH:INTENSITY', 'Single band with IW3 swath and HH polarization and BETA0 calibration'), ('SENTINEL1_CALIB:GAMMA:manifest.safe:IW3_HH:INTENSITY', 'Single band with IW3 swath and HH polarization and GAMMA calibration'), ('SENTINEL1_CALIB:UNCALIB:manifest.safe:IW3_HH:COMPLEX', 'Single band with IW3 swath and HH polarization and UNCALIB calibration'), ('SENTINEL1_CALIB:UNCALIB:manifest.safe:IW3_HH:INTENSITY', 'Single band with IW3 swath and HH polarization and UNCALIB calibration')]
________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: February 1, 2022 12:33 PM
To: ni hao <ni_hao88 at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Sentinel-1 IW Single Look Complex (SLC)


Hi,

There have been improvements in GDAL 3.4.0 (*) regarding SLC products in the SAFE/Sentinel 1 driver. I can see that it seems to work fine on a S1A_IW_SLC__xxxx dataset. I don't have EW SLC products at hand

Even

(*) https://github.com/OSGeo/gdal/commit/eea55bfcfd36c081b8354b0a4e132cfc51332ef8

Le 01/02/2022 ? 17:26, ni hao a ?crit :
Hi list,

GDAL Sentinel-1 driver question:
I know that GDAL Sentinel-1 driver works well on GRD (detected).
What about SLC?

Level-1 IW SLC product contains one image per sub-swath, per polarisation channel, for a total of three or six images (3 tiff for HH, or 6 tiff for HH/HV dual-band)
The EW SLC products contain one image per sub-swath, per polarisation channel, for a total of five or ten images.

https://sentinels.copernicus.eu/web/sentinel/technical-guides/sentinel-1-sar/products-algorithms/level-1-algorithms/single-look-complex

Thank you.



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220204/f2d580ee/attachment-0001.html>

From bontepaarden at gmail.com  Fri Feb  4 07:47:22 2022
From: bontepaarden at gmail.com (Paul Meems)
Date: Fri, 4 Feb 2022 16:47:22 +0100
Subject: [gdal-dev] Access violation OGRSpatialReference.importFromESRI() in
 GDAL304.dll
Message-ID: <CAHNf2YSnUz4=dMvKTfJi9Tot7NOpUn1EGJcD2aUtDMFSOE=90Q@mail.gmail.com>

Hi List,

We use GDAL v3+ in our Open Source mapping application MapWinGIS.
We build using VS2019 on Windows and we use the files from GisInternals.

We have a GeoProjection class which in turn calls
some/most OGRSpatialReference methods.
When calling OGRSpatialReference.importFromESRI() compiled for Win32 we
have no issues.
When calling the same code compiled for Win64 we get this exception:
Exception thrown at 0x00007FFD93074839 (gdal304.dll) 0xC0000005: Access
violation reading location 0xFFFFFFFFFFFFFFFF

We also implement the very similar method importFromWkt(). This method has
no issues on Win32 or Win64.

Here's some relevant code from GeoProjection.cpp:
STDMETHODIMP CGeoProjection::ImportFromESRI(const BSTR proj, VARIANT_BOOL*
retVal)
{
  AFX_MANAGE_STATE(AfxGetStaticModuleState())
  USES_CONVERSION;

  const CString s = OLE2A(proj);
  const OGRErr err = ProjectionHelper::ImportFromEsri(_projection, s);

  *retVal = err == OGRERR_NONE ? VARIANT_TRUE : VARIANT_FALSE;
  if (err != OGRERR_NONE)
  {
    ReportOgrError(err);
  }
  return S_OK;
}

STDMETHODIMP CGeoProjection::ImportFromWKT(const BSTR proj, VARIANT_BOOL*
retVal)
{
  AFX_MANAGE_STATE(AfxGetStaticModuleState())
  USES_CONVERSION;

  const CString s = OLE2A(proj);
  const OGRErr err = ProjectionHelper::ImportFromWkt(_projection, s);

  *retVal = err == OGRERR_NONE ? VARIANT_TRUE : VARIANT_FALSE;
  if (err != OGRERR_NONE)
  {
    ReportOgrError(err);
  }
  return S_OK;
}

And from ProjectionHelper.cpp:
OGRErr ProjectionHelper::ImportFromEsri(OGRSpatialReference* sr, CString
proj)
{
  if (!sr) {
    return false;
  }

  char* s = proj.GetBuffer();
  return sr->importFromESRI(&s);
}

OGRErr ProjectionHelper::ImportFromWkt(OGRSpatialReference* sr, CString
proj)
{
  if (!sr) {
    return false;
  }

  char* s = proj.GetBuffer();
  return sr->importFromWkt(&s);
}

We're currently upgrading from GDAL2+ to GDAL3+.
Users report the crash in both versions.

Most likely we're not calling the importFromESRI correctly.
Please advice.

Regards,

Paul Meems
https://github.com/MapWindow/MapWinGIS
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220204/c9476088/attachment.html>

From even.rouault at spatialys.com  Fri Feb  4 07:56:20 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 4 Feb 2022 16:56:20 +0100
Subject: [gdal-dev] Access violation
 OGRSpatialReference.importFromESRI() in GDAL304.dll
In-Reply-To: <CAHNf2YSnUz4=dMvKTfJi9Tot7NOpUn1EGJcD2aUtDMFSOE=90Q@mail.gmail.com>
References: <CAHNf2YSnUz4=dMvKTfJi9Tot7NOpUn1EGJcD2aUtDMFSOE=90Q@mail.gmail.com>
Message-ID: <913f988a-2c19-0f5f-651a-77d42115ef14@spatialys.com>

RTF(antastic)M :-)

==> 
https://gdal.org/doxygen/classOGRSpatialReference.html#af91af2639702e2793daf93ffe231b577 
:

Parameters
    papszPrj 	NULL terminated list of strings containing the definition.

So change your code to something like:

 ? char apszPrj[2];
 ? char* s = proj.GetBuffer();
 ? apszPrj[0] = s;
 ? apszPrj[1] = NULL;
 ? return sr->importFromWkt(apszPrj);

Le 04/02/2022 ? 16:47, Paul Meems a ?crit?:
> Hi List,
>
> We use GDAL v3+ in our Open Source mapping application MapWinGIS.
> We build using VS2019 on Windows and we use the files from GisInternals.
>
> We have a GeoProjection class which in turn calls 
> some/most?OGRSpatialReference methods.
> When calling?OGRSpatialReference.importFromESRI() compiled for Win32 
> we have no issues.
> When calling the same code compiled for Win64 we get this exception:
> Exception thrown at 0x00007FFD93074839 (gdal304.dll)?0xC0000005: 
> Access violation reading location 0xFFFFFFFFFFFFFFFF
>
> We also implement the very similar method importFromWkt(). This method 
> has no issues on Win32 or Win64.
>
> Here's some relevant code from GeoProjection.cpp:
> STDMETHODIMP CGeoProjection::ImportFromESRI(const BSTR proj, 
> VARIANT_BOOL* retVal)
> {
> ? AFX_MANAGE_STATE(AfxGetStaticModuleState())
> ? USES_CONVERSION;
>
> ? const CString s = OLE2A(proj);
> ? const OGRErr err = ProjectionHelper::ImportFromEsri(_projection, s);
>
> ? *retVal = err == OGRERR_NONE ? VARIANT_TRUE : VARIANT_FALSE;
> ? if (err != OGRERR_NONE)
> ? {
> ? ? ReportOgrError(err);
> ? }
> ? return S_OK;
> }
>
> STDMETHODIMP CGeoProjection::ImportFromWKT(const BSTR proj, 
> VARIANT_BOOL* retVal)
> {
> ? AFX_MANAGE_STATE(AfxGetStaticModuleState())
> ? USES_CONVERSION;
>
> ? const CString s = OLE2A(proj);
> ? const OGRErr err = ProjectionHelper::ImportFromWkt(_projection, s);
>
> ? *retVal = err == OGRERR_NONE ? VARIANT_TRUE : VARIANT_FALSE;
> ? if (err != OGRERR_NONE)
> ? {
> ? ? ReportOgrError(err);
> ? }
> ? return S_OK;
> }
>
> And from?ProjectionHelper.cpp:
> OGRErr ProjectionHelper::ImportFromEsri(OGRSpatialReference* sr, 
> CString proj)
> {
> ? if (!sr) {
> ? ? return false;
> ? }
>
> ? char* s = proj.GetBuffer();
> ? return sr->importFromESRI(&s);
> }
>
> OGRErr ProjectionHelper::ImportFromWkt(OGRSpatialReference* sr, 
> CString proj)
> {
> ? if (!sr) {
> ? ? return false;
> ? }
>
> ? char* s = proj.GetBuffer();
> ? return sr->importFromWkt(&s);
> }
>
> We're currently upgrading from GDAL2+ to GDAL3+.
> Users report the crash in both versions.
>
> Most likely we're not calling the importFromESRI?correctly.
> Please advice.
>
> Regards,
>
> Paul Meems
> https://github.com/MapWindow/MapWinGIS
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220204/a0516c78/attachment.html>

From bontepaarden at gmail.com  Fri Feb  4 08:34:58 2022
From: bontepaarden at gmail.com (Paul Meems)
Date: Fri, 4 Feb 2022 17:34:58 +0100
Subject: [gdal-dev] Access violation
 OGRSpatialReference.importFromESRI() in GDAL304.dll
In-Reply-To: <913f988a-2c19-0f5f-651a-77d42115ef14@spatialys.com>
References: <CAHNf2YSnUz4=dMvKTfJi9Tot7NOpUn1EGJcD2aUtDMFSOE=90Q@mail.gmail.com>
 <913f988a-2c19-0f5f-651a-77d42115ef14@spatialys.com>
Message-ID: <CAHNf2YSw=zM_d3+hG=kgdDRQAzeZbnbFtHR=TW=WLm14QUinOA@mail.gmail.com>

Thanks Even,

That solved the problem.

I've read the manual several times today but overlooked that the parameter
should be a list.
Our code hasn't changed for years so this bug was unnoticed for a very long
time ;)

Regards,

Paul


Op vr 4 feb. 2022 om 16:56 schreef Even Rouault <even.rouault at spatialys.com
>:

> RTF(antastic)M :-)
>
> ==>
> https://gdal.org/doxygen/classOGRSpatialReference.html#af91af2639702e2793daf93ffe231b577
> :
> Parameters
> papszPrj NULL terminated list of strings containing the definition.
> So change your code to something like:
>
>   char apszPrj[2];
>   char* s = proj.GetBuffer();
>   apszPrj[0] = s;
>   apszPrj[1] = NULL;
>   return sr->importFromWkt(apszPrj);
>
> Le 04/02/2022 ? 16:47, Paul Meems a ?crit :
>
> Hi List,
>
> We use GDAL v3+ in our Open Source mapping application MapWinGIS.
> We build using VS2019 on Windows and we use the files from GisInternals.
>
> We have a GeoProjection class which in turn calls
> some/most OGRSpatialReference methods.
> When calling OGRSpatialReference.importFromESRI() compiled for Win32 we
> have no issues.
> When calling the same code compiled for Win64 we get this exception:
> Exception thrown at 0x00007FFD93074839 (gdal304.dll) 0xC0000005: Access
> violation reading location 0xFFFFFFFFFFFFFFFF
>
> We also implement the very similar method importFromWkt(). This method has
> no issues on Win32 or Win64.
>
> Here's some relevant code from GeoProjection.cpp:
> STDMETHODIMP CGeoProjection::ImportFromESRI(const BSTR proj, VARIANT_BOOL*
> retVal)
> {
>   AFX_MANAGE_STATE(AfxGetStaticModuleState())
>   USES_CONVERSION;
>
>   const CString s = OLE2A(proj);
>   const OGRErr err = ProjectionHelper::ImportFromEsri(_projection, s);
>
>   *retVal = err == OGRERR_NONE ? VARIANT_TRUE : VARIANT_FALSE;
>   if (err != OGRERR_NONE)
>   {
>     ReportOgrError(err);
>   }
>   return S_OK;
> }
>
> STDMETHODIMP CGeoProjection::ImportFromWKT(const BSTR proj, VARIANT_BOOL*
> retVal)
> {
>   AFX_MANAGE_STATE(AfxGetStaticModuleState())
>   USES_CONVERSION;
>
>   const CString s = OLE2A(proj);
>   const OGRErr err = ProjectionHelper::ImportFromWkt(_projection, s);
>
>   *retVal = err == OGRERR_NONE ? VARIANT_TRUE : VARIANT_FALSE;
>   if (err != OGRERR_NONE)
>   {
>     ReportOgrError(err);
>   }
>   return S_OK;
> }
>
> And from ProjectionHelper.cpp:
> OGRErr ProjectionHelper::ImportFromEsri(OGRSpatialReference* sr, CString
> proj)
> {
>   if (!sr) {
>     return false;
>   }
>
>   char* s = proj.GetBuffer();
>   return sr->importFromESRI(&s);
> }
>
> OGRErr ProjectionHelper::ImportFromWkt(OGRSpatialReference* sr, CString
> proj)
> {
>   if (!sr) {
>     return false;
>   }
>
>   char* s = proj.GetBuffer();
>   return sr->importFromWkt(&s);
> }
>
> We're currently upgrading from GDAL2+ to GDAL3+.
> Users report the crash in both versions.
>
> Most likely we're not calling the importFromESRI correctly.
> Please advice.
>
> Regards,
>
> Paul Meems
> https://github.com/MapWindow/MapWinGIS
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220204/11ae6250/attachment-0001.html>

From osgeo.mailinglist at gmail.com  Fri Feb  4 11:01:52 2022
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Fri, 4 Feb 2022 20:01:52 +0100
Subject: [gdal-dev] Any way to get an autocompletion for ogr/gdal
 utilities?
In-Reply-To: <CALFmHhstg40K7Qa52BNZo=yQYru5tHqKpk0HSRspOBBa1RBmNw@mail.gmail.com>
References: <CACPZzQ1uwjiJL76G8+1FHbv3Odk39m8hF5rnLBS2HkbrXhYGWQ@mail.gmail.com>
 <CALFmHhstg40K7Qa52BNZo=yQYru5tHqKpk0HSRspOBBa1RBmNw@mail.gmail.com>
Message-ID: <CACPZzQ0UCn9oW3PAa6kFXSFbA-PTgduMw=dhbp9k2snv2vb7fg@mail.gmail.com>

Hi Markus,

Thanks for your answer. I'm on Linux box rather old e.g Ubuntu 18.04. My
shell is bash.
I do not find any files for autocompletion within
/usr/share/bash-completion/ related to ogr2ogr or any other GDAL binaries
or elsewhere.
I've also tried to see the behaviour using gdal within conda and no
autocompletion available too.
I've tried to test autocompletion within a zsh shell in case the issue
could have been related to zsh "smartness" but no change.

So, what I've done after this various unsuccessful tests is looking at
packages version of Ubuntu and I have found the issue.

Conclusion: I'm on an Ubuntu box too old

No GDAL autocompletion on below versions

- Bionic (18.04 LTS)
https://packages.ubuntu.com/bionic/amd64/gdal-bin/filelist
- Focal (20.04 LTS)
https://packages.ubuntu.com/focal/amd64/gdal-bin/filelist

GDAL Autocompletion available on

- Hirsute (21.04)
https://packages.ubuntu.com/hirsute/amd64/gdal-bin/filelist
- Impish (21.10) https://packages.ubuntu.com/impish/amd64/gdal-bin/filelist
- Jammy (22.04 upcoming LTS)
https://packages.ubuntu.com/jammy/amd64/gdal-bin/filelist

The remaining issue would be about not getting autocompletion with conda
although I tried with the latest version 3.4.1. I think I will open an
issue at https://github.com/conda-forge/gdal-feedstock/


Regards

Thomas Gratier

Le jeu. 3 f?vr. 2022 ? 11:02, Markus Neteler <neteler at osgeo.org> a ?crit :

> Hi Thomas,
>
> On Wed, Feb 2, 2022 at 11:59 PM Thomas Gratier
> <osgeo.mailinglist at gmail.com> wrote:
> >
> > Hello,
> >
> > On Linux, when I type `ogr` in a command line, and on the keyboard type
> on "tab" key, I get all binaries starting with `ogr` e.g
> >
> > > ogr2ogr      ogrinfo      ogrlineref   ogrmerge.py  ogrtindex
> >
> > When using command line like git, I type `git commit --` then use again
> the tab key and it returns something like below
> >
> > > --ahead-behind      --date=             --include
>  --no-verify         --reedit-message=   --status
> > > --all               --dry-run           --interactive       --null
>           --reset-author      --template=
> > > --amend             --edit              --long              --only
>           --reuse-message=    --untracked-files
> > > --author=           --file=             --message=          --patch
>          --short             --verbose
> > > --branch            --fixup=            --no-edit
>  --porcelain         --signoff           --verify
> > > --cleanup=          --gpg-sign          --no-post-rewrite   --quiet
>          --squash=
> >
> > So, I do expect a way to get autocompletion or choice when I do
> something like `ogr2ogr -` followed by typing on tab key.
> >
> > Is there an existing script or a tip I'm not aware? Or do I need to work
> to create it to get something similar to git command where there is a
> script to add autocompletion?
>
> AFAIK this requires bash/zsh completion support.
>
> E.g., for core Git, on my Fedora box it is defined in
>
> /usr/share/bash-completion/completions/git
>
> and part of the package:
> rpm -qf /usr/share/bash-completion/completions/git
> git-core-2.34.1-1.fc35.x86_64
>
> Likewise, there is
>
> /usr/share/bash-completion/completions/ogr2ogr
> /usr/share/bash-completion/completions/ogrinfo
> /usr/share/bash-completion/completions/ogrlineref
> /usr/share/bash-completion/completions/ogrmerge.py
> /usr/share/bash-completion/completions/ogrtindex
> ...
>
> Here it works:
> ogrinfo --<tab>
> --config        --format        --help-general  --locale        --pause
> --debug         --formats       --license       --optfile       --version
>
> Maybe you package installation is incomplete?
>
> Best,
> Markus
>
> --
> Markus Neteler, PhD
> https://www.mundialis.de - free data with free software
> https://grass.osgeo.org
> https://courses.neteler.org/blog
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220204/1a524ebc/attachment.html>

From nelson.gerald.c at gmail.com  Tue Feb  8 08:09:06 2022
From: nelson.gerald.c at gmail.com (Gerald Nelson)
Date: Tue, 8 Feb 2022 16:09:06 +0000
Subject: [gdal-dev] does GDAL require proj@7?
In-Reply-To: <CACPZzQ0UCn9oW3PAa6kFXSFbA-PTgduMw=dhbp9k2snv2vb7fg@mail.gmail.com>
References: <CACPZzQ1uwjiJL76G8+1FHbv3Odk39m8hF5rnLBS2HkbrXhYGWQ@mail.gmail.com>
 <CALFmHhstg40K7Qa52BNZo=yQYru5tHqKpk0HSRspOBBa1RBmNw@mail.gmail.com>
 <CACPZzQ0UCn9oW3PAa6kFXSFbA-PTgduMw=dhbp9k2snv2vb7fg@mail.gmail.com>
Message-ID: <CO1PR18MB46680AF4F58FF73B57A713CBAD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>

I indirectly make a lot of use of GDAL which makes a lot of use of proj. I do all this on a new Macbook pro with Apple Silicon. I manage these things with homebrew. It was a tiny bit complicated to get homebrew running to take advantage of the new silicon but I?ve been doing that successfully for a month or so.

At some point in the past I installed proj at 7 from homebrew. That?s now deprecated but I can?t seem to kill it on my system. Lots of brew uninstall and install/upgrade commands. I used locate in a terminal and attempted to delete all the files with proj at 7 in their names. I?m currently have this set of exchanges


gcn at MacBook-Pro-M1X Cellar % brew install gdal

Warning: No available formula with the name "proj at 7" (dependency of gdal). Did you mean proj?

==> Searching for similarly named formulae...

This similarly named formula was found:

proj ?

To install it, run:

  brew install proj ?
gcn at MacBook-Pro-M1X Cellar % brew install proj
To restore the stashed changes to /opt/homebrew/Library/Taps/homebrew/homebrew-core, run:
  cd /opt/homebrew/Library/Taps/homebrew/homebrew-core && git stash pop
Running `brew update --preinstall`...
==> Auto-updated Homebrew!
Updated 2 taps (homebrew/core and homebrew/cask).
==> Updated Formulae
Updated 1 formula.
==> Updated Casks
Updated 4 casks.

Warning: proj 8.2.1 is already installed and up-to-date.
To reinstall 8.2.1, run:
  brew reinstall proj
gcn at MacBook-Pro-M1X Cellar %   cd /opt/homebrew/Library/Taps/homebrew/homebrew-core && git stash pop
Removing Formula/proj at 7.rb
On branch master
Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
       deleted:    Formula/proj at 7.rb

no changes added to commit (use "git add" and/or "git commit -a")
Dropped refs/stash@{0} (cf00995d0160fc9ed0889b664973b1c75a4a5925)

At this point I?m stuck on next steps. I suspect this is not a gdal problem per se but something in homebrew I?m not understanding.

Any advice greatly appreciated!
Jerry

Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220208/a9bda37f/attachment.html>

From nelson.gerald.c at gmail.com  Tue Feb  8 08:31:33 2022
From: nelson.gerald.c at gmail.com (Gerald Nelson)
Date: Tue, 8 Feb 2022 16:31:33 +0000
Subject: [gdal-dev] does GDAL require proj@7?
In-Reply-To: <CO1PR18MB46680AF4F58FF73B57A713CBAD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>
References: <CACPZzQ1uwjiJL76G8+1FHbv3Odk39m8hF5rnLBS2HkbrXhYGWQ@mail.gmail.com>
 <CALFmHhstg40K7Qa52BNZo=yQYru5tHqKpk0HSRspOBBa1RBmNw@mail.gmail.com>
 <CACPZzQ0UCn9oW3PAa6kFXSFbA-PTgduMw=dhbp9k2snv2vb7fg@mail.gmail.com>
 <CO1PR18MB46680AF4F58FF73B57A713CBAD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>
Message-ID: <CO1PR18MB466868C2720B45B120587614AD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>

Follow up on the issue below. I did the following gdal is now available. But I?d still like to kill proj at 7 so any suggestions still greatly appreciated!

gcn at MacBook-Pro-M1X homebrew-core % git restore Formula/proj at 7.rb
gcn at MacBook-Pro-M1X homebrew-core % brew install gdal
Running `brew update --preinstall`...
==> Auto-updated Homebrew!
Updated 1 tap (homebrew/core).
==> Updated Formulae
Updated 2 formulae.

Warning: proj at 7 has been deprecated because it is not supported upstream!
==> Downloading https://ghcr.io/v2/homebrew/core/proj/7/manifests/7.2.1
Already downloaded: /Users/gcn/Library/Caches/Homebrew/downloads/ea2e810b55db50e5431b28bbb758bbaaf088f1be1671b09889af262cae8f3a29--proj at 7-7.2.1.bottle_manifest.json
==> Downloading https://ghcr.io/v2/homebrew/core/proj/7/blobs/sha256:29f65a3b916e6b967c157713b7a00daf1b91c01
Already downloaded: /Users/gcn/Library/Caches/Homebrew/downloads/1a72b0f45e8fcbf863d3c52697cee4139ce94d16ce87cd6107413eb3be91afdd--proj at 7--7.2.1.arm64_monterey.bottle.tar.gz
==> Downloading https://ghcr.io/v2/homebrew/core/gdal/manifests/3.4.1_1
Already downloaded: /Users/gcn/Library/Caches/Homebrew/downloads/d34f5de12d8fd177fa8682a6311e5a4431f01cca9d2e8431842fa52794192486--gdal-3.4.1_1.bottle_manifest.json
==> Downloading https://ghcr.io/v2/homebrew/core/gdal/blobs/sha256:3e0605bfd13304fca41e3d2218abe035985194f1a
Already downloaded: /Users/gcn/Library/Caches/Homebrew/downloads/2318978fe3df634d8fe1682e41380687245f21099fd5c5e03bb84ae58d46cbf6--gdal--3.4.1_1.arm64_monterey.bottle.tar.gz
==> Installing dependencies for gdal: proj at 7
==> Installing gdal dependency: proj at 7
==> Pouring proj at 7--7.2.1.arm64_monterey.bottle.tar.gz
?  /opt/homebrew/Cellar/proj at 7/7.2.1: 59 files, 19.2MB
==> Installing gdal
==> Pouring gdal--3.4.1_1.arm64_monterey.bottle.tar.gz
?  /opt/homebrew/Cellar/gdal/3.4.1_1: 356 files, 61.2MB
==> Running `brew cleanup gdal`...


Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

From: Gerald Nelson <nelson.gerald.c at gmail.com>
Date: Tuesday, February 8, 2022 at 9:09 AM
To: gdal-dev <gdal-dev at lists.osgeo.org>
Subject: does GDAL require proj at 7?

I indirectly make a lot of use of GDAL which makes a lot of use of proj. I do all this on a new Macbook pro with Apple Silicon. I manage these things with homebrew. It was a tiny bit complicated to get homebrew running to take advantage of the new silicon but I?ve been doing that successfully for a month or so.

At some point in the past I installed proj at 7 from homebrew. That?s now deprecated but I can?t seem to kill it on my system. Lots of brew uninstall and install/upgrade commands. I used locate in a terminal and attempted to delete all the files with proj at 7 in their names. I?m currently have this set of exchanges


gcn at MacBook-Pro-M1X Cellar % brew install gdal

Warning: No available formula with the name "proj at 7" (dependency of gdal). Did you mean proj?

==> Searching for similarly named formulae...

This similarly named formula was found:

proj ?

To install it, run:

  brew install proj ?
gcn at MacBook-Pro-M1X Cellar % brew install proj
To restore the stashed changes to /opt/homebrew/Library/Taps/homebrew/homebrew-core, run:
  cd /opt/homebrew/Library/Taps/homebrew/homebrew-core && git stash pop
Running `brew update --preinstall`...
==> Auto-updated Homebrew!
Updated 2 taps (homebrew/core and homebrew/cask).
==> Updated Formulae
Updated 1 formula.
==> Updated Casks
Updated 4 casks.

Warning: proj 8.2.1 is already installed and up-to-date.
To reinstall 8.2.1, run:
  brew reinstall proj
gcn at MacBook-Pro-M1X Cellar %   cd /opt/homebrew/Library/Taps/homebrew/homebrew-core && git stash pop
Removing Formula/proj at 7.rb
On branch master
Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
       deleted:    Formula/proj at 7.rb

no changes added to commit (use "git add" and/or "git commit -a")
Dropped refs/stash@{0} (cf00995d0160fc9ed0889b664973b1c75a4a5925)

At this point I?m stuck on next steps. I suspect this is not a gdal problem per se but something in homebrew I?m not understanding.

Any advice greatly appreciated!
Jerry

Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220208/bea28b79/attachment-0001.html>

From runette at gmail.com  Wed Feb  9 02:35:08 2022
From: runette at gmail.com (Paul Harwood)
Date: Wed, 9 Feb 2022 10:35:08 +0000
Subject: [gdal-dev] does GDAL require proj@7?
In-Reply-To: <CO1PR18MB466868C2720B45B120587614AD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>
References: <CACPZzQ1uwjiJL76G8+1FHbv3Odk39m8hF5rnLBS2HkbrXhYGWQ@mail.gmail.com>
 <CALFmHhstg40K7Qa52BNZo=yQYru5tHqKpk0HSRspOBBa1RBmNw@mail.gmail.com>
 <CACPZzQ0UCn9oW3PAa6kFXSFbA-PTgduMw=dhbp9k2snv2vb7fg@mail.gmail.com>
 <CO1PR18MB46680AF4F58FF73B57A713CBAD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>
 <CO1PR18MB466868C2720B45B120587614AD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>
Message-ID: <CAE8nN5NbdafyNfizVk79dg+R8QUJSYt=56i6vJP9x8XfJQtxHA@mail.gmail.com>

Well - the Homebrew formula for GDAL 3.4.1 seems to mandate Proj 7
https://formulae.brew.sh/formula/gdal

That is strange - since the Conda package works on Proj 8! I don't know who
supports the Brew packaging - I don't think it is core team since Homebrew
is not listed on the installation page.  https://gdal.org/download.html

I must admit that is why I use Conda on all platforms - it is "generally"
more up to date and being an environment manager and not just a package
manager it manages cases like this a lot more robust.

On Tue, 8 Feb 2022 at 16:32, Gerald Nelson <nelson.gerald.c at gmail.com>
wrote:

> Follow up on the issue below. I did the following gdal is now available.
> But I?d still like to kill proj at 7 so any suggestions still greatly
> appreciated!
>
>
>
> gcn at MacBook-Pro-M1X homebrew-core % git restore Formula/proj at 7.rb
>
> gcn at MacBook-Pro-M1X homebrew-core % brew install gdal
>
> Running `brew update --preinstall`...
>
> ==> *Auto-updated Homebrew!*
>
> Updated 1 tap (homebrew/core).
>
> ==> *Updated Formulae*
>
> Updated 2 formulae.
>
>
>
> Warning: proj at 7 has been deprecated because it is not supported upstream!
>
> ==> *Downloading https://ghcr.io/v2/homebrew/core/proj/7/manifests/7.2.1
> <https://ghcr.io/v2/homebrew/core/proj/7/manifests/7.2.1>*
>
> Already downloaded:
> /Users/gcn/Library/Caches/Homebrew/downloads/ea2e810b55db50e5431b28bbb758bbaaf088f1be1671b09889af262cae8f3a29--proj at 7-7.2.1.bottle_manifest.json
>
> ==> *Downloading
> https://ghcr.io/v2/homebrew/core/proj/7/blobs/sha256:29f65a3b916e6b967c157713b7a00daf1b91c01
> <https://ghcr.io/v2/homebrew/core/proj/7/blobs/sha256:29f65a3b916e6b967c157713b7a00daf1b91c01>*
>
> Already downloaded:
> /Users/gcn/Library/Caches/Homebrew/downloads/1a72b0f45e8fcbf863d3c52697cee4139ce94d16ce87cd6107413eb3be91afdd--proj at 7--7.2.1.arm64_monterey.bottle.tar.gz
>
> ==> *Downloading https://ghcr.io/v2/homebrew/core/gdal/manifests/3.4.1_1
> <https://ghcr.io/v2/homebrew/core/gdal/manifests/3.4.1_1>*
>
> Already downloaded:
> /Users/gcn/Library/Caches/Homebrew/downloads/d34f5de12d8fd177fa8682a6311e5a4431f01cca9d2e8431842fa52794192486--gdal-3.4.1_1.bottle_manifest.json
>
> ==> *Downloading
> https://ghcr.io/v2/homebrew/core/gdal/blobs/sha256:3e0605bfd13304fca41e3d2218abe035985194f1a
> <https://ghcr.io/v2/homebrew/core/gdal/blobs/sha256:3e0605bfd13304fca41e3d2218abe035985194f1a>*
>
> Already downloaded:
> /Users/gcn/Library/Caches/Homebrew/downloads/2318978fe3df634d8fe1682e41380687245f21099fd5c5e03bb84ae58d46cbf6--gdal--3.4.1_1.arm64_monterey.bottle.tar.gz
>
> ==> *Installing dependencies for gdal: **proj at 7*
>
> ==> *Installing gdal dependency: **proj at 7*
>
> ==> *Pouring proj at 7--7.2.1.arm64_monterey.bottle.tar.gz*
>
> ?  /opt/homebrew/Cellar/proj at 7/7.2.1: 59 files, 19.2MB
>
> ==> *Installing **gdal*
>
> ==> *Pouring gdal--3.4.1_1.arm64_monterey.bottle.tar.gz*
>
> ?  /opt/homebrew/Cellar/gdal/3.4.1_1: 356 files, 61.2MB
>
> ==> *Running `brew cleanup gdal`...*
>
>
>
>
>
> Gerald C. Nelson
>
> Professor Emeritus, UIUC
>
> +1 217-390-7888 (cell)
>
> +1 970-639-2079 (land line)
>
> Skype: jerrynelson
>
> http://bit.ly/1arho7d
>
>
>
> *From: *Gerald Nelson <nelson.gerald.c at gmail.com>
> *Date: *Tuesday, February 8, 2022 at 9:09 AM
> *To: *gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject: *does GDAL require proj at 7?
>
>
>
> I indirectly make a lot of use of GDAL which makes a lot of use of proj. I
> do all this on a new Macbook pro with Apple Silicon. I manage these things
> with homebrew. It was a tiny bit complicated to get homebrew running to
> take advantage of the new silicon but I?ve been doing that successfully for
> a month or so.
>
>
>
> At some point in the past I installed proj at 7 from homebrew. That?s now
> deprecated but I can?t seem to kill it on my system. Lots of brew uninstall
> and install/upgrade commands. I used locate in a terminal and attempted to
> delete all the files with proj at 7 in their names. I?m currently have this
> set of exchanges
>
>
>
> gcn at MacBook-Pro-M1X Cellar % brew install gdal
>
> Warning: No available formula with the name "proj at 7" (dependency of
> gdal). Did you mean proj?
>
> ==> *Searching for similarly named formulae...*
>
> This similarly named formula was found:
>
> *proj **?*
>
> To install it, run:
>
>   brew install *proj **?*
>
> gcn at MacBook-Pro-M1X Cellar % brew install proj
>
> To restore the stashed changes to
> /opt/homebrew/Library/Taps/homebrew/homebrew-core, run:
>
>   cd /opt/homebrew/Library/Taps/homebrew/homebrew-core && git stash pop
>
> Running `brew update --preinstall`...
>
> ==> *Auto-updated Homebrew!*
>
> Updated 2 taps (homebrew/core and homebrew/cask).
>
> ==> *Updated Formulae*
>
> Updated 1 formula.
>
> ==> *Updated Casks*
>
> Updated 4 casks.
>
>
>
> Warning: proj 8.2.1 is already installed and up-to-date.
>
> To reinstall 8.2.1, run:
>
>   brew reinstall proj
>
> gcn at MacBook-Pro-M1X Cellar %   cd
> /opt/homebrew/Library/Taps/homebrew/homebrew-core && git stash pop
>
> Removing Formula/proj at 7.rb
>
> On branch master
>
> Changes not staged for commit:
>
>   (use "git add/rm <file>..." to update what will be committed)
>
>   (use "git restore <file>..." to discard changes in working directory)
>
>        deleted:    Formula/proj at 7.rb
>
>
>
> no changes added to commit (use "git add" and/or "git commit -a")
>
> Dropped refs/stash@{0} (cf00995d0160fc9ed0889b664973b1c75a4a5925)
>
>
>
> At this point I?m stuck on next steps. I suspect this is not a gdal
> problem per se but something in homebrew I?m not understanding.
>
>
>
> Any advice greatly appreciated!
>
> Jerry
>
>
>
> Gerald C. Nelson
>
> Professor Emeritus, UIUC
>
> +1 217-390-7888 (cell)
>
> +1 970-639-2079 (land line)
>
> Skype: jerrynelson
>
> http://bit.ly/1arho7d
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220209/e38a58ae/attachment-0001.html>

From nelson.gerald.c at gmail.com  Wed Feb  9 07:43:46 2022
From: nelson.gerald.c at gmail.com (Gerald Nelson)
Date: Wed, 9 Feb 2022 15:43:46 +0000
Subject: [gdal-dev] does GDAL require proj@7?
In-Reply-To: <CAE8nN5NbdafyNfizVk79dg+R8QUJSYt=56i6vJP9x8XfJQtxHA@mail.gmail.com>
References: <CACPZzQ1uwjiJL76G8+1FHbv3Odk39m8hF5rnLBS2HkbrXhYGWQ@mail.gmail.com>
 <CALFmHhstg40K7Qa52BNZo=yQYru5tHqKpk0HSRspOBBa1RBmNw@mail.gmail.com>
 <CACPZzQ0UCn9oW3PAa6kFXSFbA-PTgduMw=dhbp9k2snv2vb7fg@mail.gmail.com>
 <CO1PR18MB46680AF4F58FF73B57A713CBAD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>
 <CO1PR18MB466868C2720B45B120587614AD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>
 <CAE8nN5NbdafyNfizVk79dg+R8QUJSYt=56i6vJP9x8XfJQtxHA@mail.gmail.com>
Message-ID: <CO1PR18MB466840B5A661C41152593604AD2E9@CO1PR18MB4668.namprd18.prod.outlook.com>

I posted a note in Homebrew/discussions. The problem seems to be in the json api link -  /api/formula/gdal.json<https://formulae.brew.sh/api/formula/gdal.json>
Which includes proj at 7 rather than just proj.

Hopefully whoever can change formulas will see this and fix it.

Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

From: Paul Harwood <runette at gmail.com>
Date: Wednesday, February 9, 2022 at 3:35 AM
To: Gerald Nelson <nelson.gerald.c at gmail.com>
Cc: gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] does GDAL require proj at 7?

Well - the Homebrew formula for GDAL 3.4.1 seems to mandate Proj 7 https://formulae.brew.sh/formula/gdal

That is strange - since the Conda package works on Proj 8! I don't know who supports the Brew packaging - I don't think it is core team since Homebrew is not listed on the installation page.  https://gdal.org/download.html

I must admit that is why I use Conda on all platforms - it is "generally" more up to date and being an environment manager and not just a package manager it manages cases like this a lot more robust.

On Tue, 8 Feb 2022 at 16:32, Gerald Nelson <nelson.gerald.c at gmail.com<mailto:nelson.gerald.c at gmail.com>> wrote:
Follow up on the issue below. I did the following gdal is now available. But I?d still like to kill proj at 7 so any suggestions still greatly appreciated!

gcn at MacBook-Pro-M1X homebrew-core % git restore Formula/proj at 7.rb
gcn at MacBook-Pro-M1X homebrew-core % brew install gdal
Running `brew update --preinstall`...
==> Auto-updated Homebrew!
Updated 1 tap (homebrew/core).
==> Updated Formulae
Updated 2 formulae.

Warning: proj at 7 has been deprecated because it is not supported upstream!
==> Downloading https://ghcr.io/v2/homebrew/core/proj/7/manifests/7.2.1
Already downloaded: /Users/gcn/Library/Caches/Homebrew/downloads/ea2e810b55db50e5431b28bbb758bbaaf088f1be1671b09889af262cae8f3a29--proj at 7-7.2.1.bottle_manifest.json
==> Downloading https://ghcr.io/v2/homebrew/core/proj/7/blobs/sha256:29f65a3b916e6b967c157713b7a00daf1b91c01
Already downloaded: /Users/gcn/Library/Caches/Homebrew/downloads/1a72b0f45e8fcbf863d3c52697cee4139ce94d16ce87cd6107413eb3be91afdd--proj at 7--7.2.1.arm64_monterey.bottle.tar.gz
==> Downloading https://ghcr.io/v2/homebrew/core/gdal/manifests/3.4.1_1
Already downloaded: /Users/gcn/Library/Caches/Homebrew/downloads/d34f5de12d8fd177fa8682a6311e5a4431f01cca9d2e8431842fa52794192486--gdal-3.4.1_1.bottle_manifest.json
==> Downloading https://ghcr.io/v2/homebrew/core/gdal/blobs/sha256:3e0605bfd13304fca41e3d2218abe035985194f1a
Already downloaded: /Users/gcn/Library/Caches/Homebrew/downloads/2318978fe3df634d8fe1682e41380687245f21099fd5c5e03bb84ae58d46cbf6--gdal--3.4.1_1.arm64_monterey.bottle.tar.gz
==> Installing dependencies for gdal: proj at 7
==> Installing gdal dependency: proj at 7
==> Pouring proj at 7--7.2.1.arm64_monterey.bottle.tar.gz
?  /opt/homebrew/Cellar/proj at 7/7.2.1: 59 files, 19.2MB
==> Installing gdal
==> Pouring gdal--3.4.1_1.arm64_monterey.bottle.tar.gz
?  /opt/homebrew/Cellar/gdal/3.4.1_1: 356 files, 61.2MB
==> Running `brew cleanup gdal`...


Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

From: Gerald Nelson <nelson.gerald.c at gmail.com<mailto:nelson.gerald.c at gmail.com>>
Date: Tuesday, February 8, 2022 at 9:09 AM
To: gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: does GDAL require proj at 7?

I indirectly make a lot of use of GDAL which makes a lot of use of proj. I do all this on a new Macbook pro with Apple Silicon. I manage these things with homebrew. It was a tiny bit complicated to get homebrew running to take advantage of the new silicon but I?ve been doing that successfully for a month or so.

At some point in the past I installed proj at 7 from homebrew. That?s now deprecated but I can?t seem to kill it on my system. Lots of brew uninstall and install/upgrade commands. I used locate in a terminal and attempted to delete all the files with proj at 7 in their names. I?m currently have this set of exchanges


gcn at MacBook-Pro-M1X Cellar % brew install gdal

Warning: No available formula with the name "proj at 7" (dependency of gdal). Did you mean proj?

==> Searching for similarly named formulae...

This similarly named formula was found:

proj ?

To install it, run:

  brew install proj ?
gcn at MacBook-Pro-M1X Cellar % brew install proj
To restore the stashed changes to /opt/homebrew/Library/Taps/homebrew/homebrew-core, run:
  cd /opt/homebrew/Library/Taps/homebrew/homebrew-core && git stash pop
Running `brew update --preinstall`...
==> Auto-updated Homebrew!
Updated 2 taps (homebrew/core and homebrew/cask).
==> Updated Formulae
Updated 1 formula.
==> Updated Casks
Updated 4 casks.

Warning: proj 8.2.1 is already installed and up-to-date.
To reinstall 8.2.1, run:
  brew reinstall proj
gcn at MacBook-Pro-M1X Cellar %   cd /opt/homebrew/Library/Taps/homebrew/homebrew-core && git stash pop
Removing Formula/proj at 7.rb
On branch master
Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
       deleted:    Formula/proj at 7.rb

no changes added to commit (use "git add" and/or "git commit -a")
Dropped refs/stash@{0} (cf00995d0160fc9ed0889b664973b1c75a4a5925)

At this point I?m stuck on next steps. I suspect this is not a gdal problem per se but something in homebrew I?m not understanding.

Any advice greatly appreciated!
Jerry

Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220209/65bfa8ff/attachment-0001.html>

From nelson.gerald.c at gmail.com  Wed Feb  9 08:30:15 2022
From: nelson.gerald.c at gmail.com (Gerald Nelson)
Date: Wed, 9 Feb 2022 16:30:15 +0000
Subject: [gdal-dev] does GDAL require proj@7?
In-Reply-To: <CO1PR18MB466840B5A661C41152593604AD2E9@CO1PR18MB4668.namprd18.prod.outlook.com>
References: <CACPZzQ1uwjiJL76G8+1FHbv3Odk39m8hF5rnLBS2HkbrXhYGWQ@mail.gmail.com>
 <CALFmHhstg40K7Qa52BNZo=yQYru5tHqKpk0HSRspOBBa1RBmNw@mail.gmail.com>
 <CACPZzQ0UCn9oW3PAa6kFXSFbA-PTgduMw=dhbp9k2snv2vb7fg@mail.gmail.com>
 <CO1PR18MB46680AF4F58FF73B57A713CBAD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>
 <CO1PR18MB466868C2720B45B120587614AD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>
 <CAE8nN5NbdafyNfizVk79dg+R8QUJSYt=56i6vJP9x8XfJQtxHA@mail.gmail.com>
 <CO1PR18MB466840B5A661C41152593604AD2E9@CO1PR18MB4668.namprd18.prod.outlook.com>
Message-ID: <CO1PR18MB466800E110F0FE2F4789A412AD2E9@CO1PR18MB4668.namprd18.prod.outlook.com>

The homebrew folks just blew me off. Said it was not their problem. So I more or less politely responded that it would be helpful if they could provide me with contact info for the entity that was responsible for the formula. This seems like a minimal information request.

Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

From: Gerald Nelson <nelson.gerald.c at gmail.com>
Date: Wednesday, February 9, 2022 at 8:43 AM
To: Paul Harwood <runette at gmail.com>
Cc: gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] does GDAL require proj at 7?

I posted a note in Homebrew/discussions. The problem seems to be in the json api link -  /api/formula/gdal.json<https://formulae.brew.sh/api/formula/gdal.json>
Which includes proj at 7 rather than just proj.

Hopefully whoever can change formulas will see this and fix it.

Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

From: Paul Harwood <runette at gmail.com>
Date: Wednesday, February 9, 2022 at 3:35 AM
To: Gerald Nelson <nelson.gerald.c at gmail.com>
Cc: gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] does GDAL require proj at 7?

Well - the Homebrew formula for GDAL 3.4.1 seems to mandate Proj 7 https://formulae.brew.sh/formula/gdal

That is strange - since the Conda package works on Proj 8! I don't know who supports the Brew packaging - I don't think it is core team since Homebrew is not listed on the installation page.  https://gdal.org/download.html

I must admit that is why I use Conda on all platforms - it is "generally" more up to date and being an environment manager and not just a package manager it manages cases like this a lot more robust.

On Tue, 8 Feb 2022 at 16:32, Gerald Nelson <nelson.gerald.c at gmail.com<mailto:nelson.gerald.c at gmail.com>> wrote:
Follow up on the issue below. I did the following gdal is now available. But I?d still like to kill proj at 7 so any suggestions still greatly appreciated!

gcn at MacBook-Pro-M1X homebrew-core % git restore Formula/proj at 7.rb
gcn at MacBook-Pro-M1X homebrew-core % brew install gdal
Running `brew update --preinstall`...
==> Auto-updated Homebrew!
Updated 1 tap (homebrew/core).
==> Updated Formulae
Updated 2 formulae.

Warning: proj at 7 has been deprecated because it is not supported upstream!
==> Downloading https://ghcr.io/v2/homebrew/core/proj/7/manifests/7.2.1
Already downloaded: /Users/gcn/Library/Caches/Homebrew/downloads/ea2e810b55db50e5431b28bbb758bbaaf088f1be1671b09889af262cae8f3a29--proj at 7-7.2.1.bottle_manifest.json
==> Downloading https://ghcr.io/v2/homebrew/core/proj/7/blobs/sha256:29f65a3b916e6b967c157713b7a00daf1b91c01
Already downloaded: /Users/gcn/Library/Caches/Homebrew/downloads/1a72b0f45e8fcbf863d3c52697cee4139ce94d16ce87cd6107413eb3be91afdd--proj at 7--7.2.1.arm64_monterey.bottle.tar.gz
==> Downloading https://ghcr.io/v2/homebrew/core/gdal/manifests/3.4.1_1
Already downloaded: /Users/gcn/Library/Caches/Homebrew/downloads/d34f5de12d8fd177fa8682a6311e5a4431f01cca9d2e8431842fa52794192486--gdal-3.4.1_1.bottle_manifest.json
==> Downloading https://ghcr.io/v2/homebrew/core/gdal/blobs/sha256:3e0605bfd13304fca41e3d2218abe035985194f1a
Already downloaded: /Users/gcn/Library/Caches/Homebrew/downloads/2318978fe3df634d8fe1682e41380687245f21099fd5c5e03bb84ae58d46cbf6--gdal--3.4.1_1.arm64_monterey.bottle.tar.gz
==> Installing dependencies for gdal: proj at 7
==> Installing gdal dependency: proj at 7
==> Pouring proj at 7--7.2.1.arm64_monterey.bottle.tar.gz
?  /opt/homebrew/Cellar/proj at 7/7.2.1: 59 files, 19.2MB
==> Installing gdal
==> Pouring gdal--3.4.1_1.arm64_monterey.bottle.tar.gz
?  /opt/homebrew/Cellar/gdal/3.4.1_1: 356 files, 61.2MB
==> Running `brew cleanup gdal`...


Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

From: Gerald Nelson <nelson.gerald.c at gmail.com<mailto:nelson.gerald.c at gmail.com>>
Date: Tuesday, February 8, 2022 at 9:09 AM
To: gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: does GDAL require proj at 7?

I indirectly make a lot of use of GDAL which makes a lot of use of proj. I do all this on a new Macbook pro with Apple Silicon. I manage these things with homebrew. It was a tiny bit complicated to get homebrew running to take advantage of the new silicon but I?ve been doing that successfully for a month or so.

At some point in the past I installed proj at 7 from homebrew. That?s now deprecated but I can?t seem to kill it on my system. Lots of brew uninstall and install/upgrade commands. I used locate in a terminal and attempted to delete all the files with proj at 7 in their names. I?m currently have this set of exchanges


gcn at MacBook-Pro-M1X Cellar % brew install gdal

Warning: No available formula with the name "proj at 7" (dependency of gdal). Did you mean proj?

==> Searching for similarly named formulae...

This similarly named formula was found:

proj ?

To install it, run:

  brew install proj ?
gcn at MacBook-Pro-M1X Cellar % brew install proj
To restore the stashed changes to /opt/homebrew/Library/Taps/homebrew/homebrew-core, run:
  cd /opt/homebrew/Library/Taps/homebrew/homebrew-core && git stash pop
Running `brew update --preinstall`...
==> Auto-updated Homebrew!
Updated 2 taps (homebrew/core and homebrew/cask).
==> Updated Formulae
Updated 1 formula.
==> Updated Casks
Updated 4 casks.

Warning: proj 8.2.1 is already installed and up-to-date.
To reinstall 8.2.1, run:
  brew reinstall proj
gcn at MacBook-Pro-M1X Cellar %   cd /opt/homebrew/Library/Taps/homebrew/homebrew-core && git stash pop
Removing Formula/proj at 7.rb
On branch master
Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
       deleted:    Formula/proj at 7.rb

no changes added to commit (use "git add" and/or "git commit -a")
Dropped refs/stash@{0} (cf00995d0160fc9ed0889b664973b1c75a4a5925)

At this point I?m stuck on next steps. I suspect this is not a gdal problem per se but something in homebrew I?m not understanding.

Any advice greatly appreciated!
Jerry

Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220209/dc54f4ab/attachment-0001.html>

From m.manso at upm.es  Wed Feb  9 22:51:12 2022
From: m.manso at upm.es (Miguel A. Manso)
Date: Thu, 10 Feb 2022 07:51:12 +0100
Subject: [gdal-dev] Issue with resampling algorithm in
 gdal_array.DatasetReadAsArray python wrapper function
Message-ID: <115c3068-4e14-1027-0d4c-7d06635709f7@upm.es>

Dear all

I am trying to use the gdal_array.DatasetReadAsArray function to extract 
a window from a 3B gtif file by indicating the dataset, the upper left 
corner image coordinates, the window size (256x256) at actual scale in 
the dataset, the desired buffer size (larger than actual size 341x341) 
and indicating the resample algorithm.
It only works if I select the NearestNeighbour algorithm. In the rest of 
the cases (Bilinear, bicubic, Lanczos, etc...) what the function returns 
me is a mosaic that repeats 9 times (3x3) the original image in reduced 
size.

What am I doing wrong or what have I interpreted incorrectly in the API?

Thanks & Best regards

Miguel A. Manso

MERCATOR Research Group


From matteo.ghetta at gmail.com  Thu Feb 10 02:46:57 2022
From: matteo.ghetta at gmail.com (matteo)
Date: Thu, 10 Feb 2022 11:46:57 +0100
Subject: [gdal-dev] Encoding in single transaction shp to PG
Message-ID: <a95d909b-06c2-5722-27ba-911efae2fb29@gmail.com>

Hi all,

I've set up a QGIS Processing script that uses GdalUtils that takes a 
vrt catalog that points to specific shapefiles with and without geometries.

Taking single layers with the -oo ENCODING=ISO-8859-1 option as 
suggested by Even works great. But it seems not working with a 
list_of_shape.vrt file.

Mandatory for my workflow is to load the shapefiles into PG in a single 
transaction (this is the reason of the vrt file).

Thanks for any suggestion!

Cheers

Matteo

From even.rouault at spatialys.com  Thu Feb 10 05:04:53 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 10 Feb 2022 14:04:53 +0100
Subject: [gdal-dev] Encoding in single transaction shp to PG
In-Reply-To: <a95d909b-06c2-5722-27ba-911efae2fb29@gmail.com>
References: <a95d909b-06c2-5722-27ba-911efae2fb29@gmail.com>
Message-ID: <2c144700-ff0b-7a22-139d-6bfa073f4f07@spatialys.com>

Matteo,

you can define open options for each source layer in a VRT: 
https://github.com/OSGeo/gdal/blob/c03502bc9eb5f8c9b25a8d0de06e009bf9756548/data/ogrvrt.xsd#L66

Even

Le 10/02/2022 ? 11:46, matteo a ?crit?:
> Hi all,
>
> I've set up a QGIS Processing script that uses GdalUtils that takes a 
> vrt catalog that points to specific shapefiles with and without 
> geometries.
>
> Taking single layers with the -oo ENCODING=ISO-8859-1 option as 
> suggested by Even works great. But it seems not working with a 
> list_of_shape.vrt file.
>
> Mandatory for my workflow is to load the shapefiles into PG in a 
> single transaction (this is the reason of the vrt file).
>
> Thanks for any suggestion!
>
> Cheers
>
> Matteo
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Thu Feb 10 05:06:40 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 10 Feb 2022 14:06:40 +0100
Subject: [gdal-dev] Issue with resampling algorithm in
 gdal_array.DatasetReadAsArray python wrapper function
In-Reply-To: <115c3068-4e14-1027-0d4c-7d06635709f7@upm.es>
References: <115c3068-4e14-1027-0d4c-7d06635709f7@upm.es>
Message-ID: <39763acf-6af3-9c3a-ce34-279c089fd98b@spatialys.com>

Miguel,
>
> I am trying to use the gdal_array.DatasetReadAsArray function to 
> extract a window from a 3B gtif file by indicating the dataset, the 
> upper left corner image coordinates, the window size (256x256) at 
> actual scale in the dataset, the desired buffer size (larger than 
> actual size 341x341) and indicating the resample algorithm.
> It only works if I select the NearestNeighbour algorithm. In the rest 
> of the cases (Bilinear, bicubic, Lanczos, etc...) what the function 
> returns me is a mosaic that repeats 9 times (3x3) the original image 
> in reduced size.
>
> What am I doing wrong or what have I interpreted incorrectly in the API?

First you should try with the latest release (3.4.1). If you can still 
reproduce the issue, then strip down your code to a minimum standalone 
reproducer script (using only GDAL & numpy) and with a minimum 
reproducing dataset, and provide it here.

Even

>
> Thanks & Best regards
>
> Miguel A. Manso
>
> MERCATOR Research Group
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From robert.coup at koordinates.com  Thu Feb 10 06:26:48 2022
From: robert.coup at koordinates.com (Robert Coup)
Date: Thu, 10 Feb 2022 14:26:48 +0000
Subject: [gdal-dev] does GDAL require proj@7?
In-Reply-To: <CO1PR18MB466800E110F0FE2F4789A412AD2E9@CO1PR18MB4668.namprd18.prod.outlook.com>
References: <CACPZzQ1uwjiJL76G8+1FHbv3Odk39m8hF5rnLBS2HkbrXhYGWQ@mail.gmail.com>
 <CALFmHhstg40K7Qa52BNZo=yQYru5tHqKpk0HSRspOBBa1RBmNw@mail.gmail.com>
 <CACPZzQ0UCn9oW3PAa6kFXSFbA-PTgduMw=dhbp9k2snv2vb7fg@mail.gmail.com>
 <CO1PR18MB46680AF4F58FF73B57A713CBAD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>
 <CO1PR18MB466868C2720B45B120587614AD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>
 <CAE8nN5NbdafyNfizVk79dg+R8QUJSYt=56i6vJP9x8XfJQtxHA@mail.gmail.com>
 <CO1PR18MB466840B5A661C41152593604AD2E9@CO1PR18MB4668.namprd18.prod.outlook.com>
 <CO1PR18MB466800E110F0FE2F4789A412AD2E9@CO1PR18MB4668.namprd18.prod.outlook.com>
Message-ID: <CAFLLRp+d57yW-whdf7rvTx9_SWmrBQrB4iSoyfYQQaBRqgczdQ@mail.gmail.com>

Hi,

On Wed, 9 Feb 2022 at 16:30, Gerald Nelson <nelson.gerald.c at gmail.com>
wrote:

> The homebrew folks just blew me off. Said it was not their problem. So I
> more or less politely responded that it would be helpful if they could
> provide me with contact info for the entity that was responsible for the
> formula. This seems like a minimal information request.
>
>
Seems it was changed to depend on proj at 7 (from proj) in May 2021:
https://github.com/Homebrew/homebrew-core/commit/2bc75f848e33cfbc39b17ad4f60bb1ab6274dd65

That was just before the proj formula updated from 7.2.1 to 8.0.1:
https://github.com/Homebrew/homebrew-core/commits/488f635d6b77620abed9278e2c9031676c4b9b42/Formula/proj.rb

At that point the gdal formula was using 3.3.0. I don't know off the top of
my head whether 3.3.0 was compatible with Proj 8.0.1 or not.

I don't think there's any malice involved, maybe just being conservative by
the packager, or working around a test failure.

Updating the GDAL Homebrew formula back to depending on proj (or proj at 8)
instead of proj at 7 is a case of making a PR/issue to propose reverting the
changes from 2bc75f84.

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220210/32e77866/attachment.html>

From nelson.gerald.c at gmail.com  Thu Feb 10 06:40:08 2022
From: nelson.gerald.c at gmail.com (Gerald Nelson)
Date: Thu, 10 Feb 2022 14:40:08 +0000
Subject: [gdal-dev] does GDAL require proj@7?
In-Reply-To: <CAFLLRp+d57yW-whdf7rvTx9_SWmrBQrB4iSoyfYQQaBRqgczdQ@mail.gmail.com>
References: <CACPZzQ1uwjiJL76G8+1FHbv3Odk39m8hF5rnLBS2HkbrXhYGWQ@mail.gmail.com>
 <CALFmHhstg40K7Qa52BNZo=yQYru5tHqKpk0HSRspOBBa1RBmNw@mail.gmail.com>
 <CACPZzQ0UCn9oW3PAa6kFXSFbA-PTgduMw=dhbp9k2snv2vb7fg@mail.gmail.com>
 <CO1PR18MB46680AF4F58FF73B57A713CBAD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>
 <CO1PR18MB466868C2720B45B120587614AD2D9@CO1PR18MB4668.namprd18.prod.outlook.com>
 <CAE8nN5NbdafyNfizVk79dg+R8QUJSYt=56i6vJP9x8XfJQtxHA@mail.gmail.com>
 <CO1PR18MB466840B5A661C41152593604AD2E9@CO1PR18MB4668.namprd18.prod.outlook.com>
 <CO1PR18MB466800E110F0FE2F4789A412AD2E9@CO1PR18MB4668.namprd18.prod.outlook.com>
 <CAFLLRp+d57yW-whdf7rvTx9_SWmrBQrB4iSoyfYQQaBRqgczdQ@mail.gmail.com>
Message-ID: <CO1PR18MB4668299A9A0AF8BC73DD175EAD2F9@CO1PR18MB4668.namprd18.prod.outlook.com>

Not malice, just an ?it?s not our problem? response. That was from one person; others have been more helpful. It turns out that it is complicated because of the gdal dependency tree. Here?s an explanation from https://github.com/Homebrew/homebrew-core/pull/94807

We're in a bit of bind here. I was able to migrate all dependents of proj at 7 to proj except 3:

  *   liblwgeom - deprecated, appears to be superseded by librttopo
  *   osm2pgsql - this project appears to be active (the last release was 16 days ago). We should open an upstream issue to inquire about PROJ 8 support
  *   spatialite-gui - this is where our remaining dependency conflict comes from, and it's not pretty. The last stable version doesn't support PROJ 8, but the 2.1 beta does. I tried to build the 2.1 beta just to see if would work, and it fails because it needs librasterlite2, which we don't package. Our librasterlite formula is for an older library which is no longer developed because it has been superseded by librasterlite2. Potentially we could just update the librasterlite formula because it has no dependents. But that doesn't help with version 2.1 of spatialite-gui still being in beta.
Any thoughts on the best solution here?

This is way outside my level of expertise. But it seems someone with some serious homebrew expertise is looking into it seriously.


Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

From: Robert Coup <robert.coup at koordinates.com>
Date: Thursday, February 10, 2022 at 7:27 AM
To: Gerald Nelson <nelson.gerald.c at gmail.com>
Cc: Paul Harwood <runette at gmail.com>, gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] does GDAL require proj at 7?

Hi,

On Wed, 9 Feb 2022 at 16:30, Gerald Nelson <nelson.gerald.c at gmail.com<mailto:nelson.gerald.c at gmail.com>> wrote:
The homebrew folks just blew me off. Said it was not their problem. So I more or less politely responded that it would be helpful if they could provide me with contact info for the entity that was responsible for the formula. This seems like a minimal information request.


Seems it was changed to depend on proj at 7 (from proj) in May 2021: https://github.com/Homebrew/homebrew-core/commit/2bc75f848e33cfbc39b17ad4f60bb1ab6274dd65

That was just before the proj formula updated from 7.2.1 to 8.0.1: https://github.com/Homebrew/homebrew-core/commits/488f635d6b77620abed9278e2c9031676c4b9b42/Formula/proj.rb

At that point the gdal formula was using 3.3.0. I don't know off the top of my head whether 3.3.0 was compatible with Proj 8.0.1 or not.

I don't think there's any malice involved, maybe just being conservative by the packager, or working around a test failure.

Updating the GDAL Homebrew formula back to depending on proj (or proj at 8) instead of proj at 7 is a case of making a PR/issue to propose reverting the changes from 2bc75f84.

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220210/ce299fed/attachment-0001.html>

From m.manso at upm.es  Thu Feb 10 08:01:47 2022
From: m.manso at upm.es (Miguel A. Manso)
Date: Thu, 10 Feb 2022 17:01:47 +0100
Subject: [gdal-dev] Issue with resampling algorithm in
 gdal_array.DatasetReadAsArray python wrapper function
In-Reply-To: <cc0cf4dd-369e-b9bc-c8f2-a5708756b574@upm.es>
References: <cc0cf4dd-369e-b9bc-c8f2-a5708756b574@upm.es>
Message-ID: <0aff56c9-e0d9-72d5-f287-0265b01bb473@upm.es>

Even

Thank you for your comments
I have created a new environment, installed the latest version (3.4.1) 
had version 3.0.4 and the problem persisted.
I have done another test which may give the clue as to where the problem 
lies. My datasource is an ECW file and if I use this datasource to 
extract an area with the gdal_array.DatasetReadAsArray function telling 
it to use resample methods other than NearestNeighbour it does not do it 
right.
I have cut a slice and stored it as a geotiff, and using this datasource 
for the same test has already worked the resample algorithms. It works 
with both versions of the libraries.
I'm sorry I can't extract a piece of image to share it as I have no way 
to store it in ecw format.

The code used:


ds = gdal.Open("PNOA_MA_OF_ETRS89_HU31_h50_0699.ecw")

x = gdal_array.DatasetReadAsArray( ds, 1, 1, 256, 256, buf_obj=None, 
buf_xsize= 384, buf_ysize=384, buf_type=None, 
resample_alg=gdal.GRIORA_Lanczos)

src_srs = ogr.osr.SpatialReference()
src_srs.ImportFromEPSG(25830)
wkt_projection = src_srs.ExportToWkt()

driver = gdal.GetDriverByName('GTiff')
dataset = driver.Create( "recorte.tif", 384, 384, 3, gdal.GDT_Byte )
dataset.SetGeoTransform(( x_min, 0.1, 0, y_max, 0, -0.1))
dataset.SetProjection(wkt_projection)
bands = array.shape[0]
for band in range(bands):
 ??????? dataset.GetRasterBand(band+1).WriteArray( array[ band,:, : ] )
dataset.FlushCache()
bands = None
dataset = None
driver = None


gdalinfo over ECW:

Driver: ECW/ERDAS Compressed Wavelets (SDK 5.3)
Files: PNOA_MA_OF_ETRS89_HU31_h50_0699.ecw
Size is 191800, 124133
Coordinate System is:
PROJCRS["NUTM31",
 ??? BASEGEOGCRS["ETRS89",
 ??????? DATUM["European Terrestrial Reference System 1989",
 ??????????? ELLIPSOID["GRS 1980",6378137,298.257222101,
 ??????????????? LENGTHUNIT["metre",1]]],
 ??????? PRIMEM["Greenwich",0,
 ??????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????? ID["EPSG",4258]],
 ??? CONVERSION["UTM zone 31N",
 ??????? METHOD["Transverse Mercator",
 ??????????? ID["EPSG",9807]],
 ??????? PARAMETER["Latitude of natural origin",0,
 ??????????? ANGLEUNIT["degree",0.0174532925199433],
 ??????????? ID["EPSG",8801]],
 ??????? PARAMETER["Longitude of natural origin",3,
 ??????????? ANGLEUNIT["degree",0.0174532925199433],
 ??????????? ID["EPSG",8802]],
 ??????? PARAMETER["Scale factor at natural origin",0.9996,
 ??????????? SCALEUNIT["unity",1],
 ??????????? ID["EPSG",8805]],
 ??????? PARAMETER["False easting",500000,
 ??????????? LENGTHUNIT["Metre",1],
 ??????????? ID["EPSG",8806]],
 ??????? PARAMETER["False northing",0,
 ??????????? LENGTHUNIT["Metre",1],
 ??????????? ID["EPSG",8807]],
 ??????? ID["EPSG",16031]],
 ??? CS[Cartesian,2],
 ??????? AXIS["easting",east,
 ??????????? ORDER[1],
 ??????????? LENGTHUNIT["Metre",1]],
 ??????? AXIS["northing",north,
 ??????????? ORDER[2],
 ??????????? LENGTHUNIT["Metre",1]]]
Data axis to CRS axis mapping: 1,2
Origin = (483820.000000000000000,4390830.000000000000000)
Pixel Size = (0.150000000000000,-0.150000000000000)
Metadata:
 ? COLORSPACE=RGB
 ? COMPRESSION_RATE_TARGET=6
 ? VERSION=2
Corner Coordinates:
Upper Left? (? 483820.000, 4390830.000) (? 2d48'40.90"E, 39d40' 1.67"N)
Lower Left? (? 483820.000, 4372210.050) (? 2d48'42.54"E, 39d29'57.69"N)
Upper Right (? 512590.000, 4390830.000) (? 3d 8'48.42"E, 39d40' 1.89"N)
Lower Right (? 512590.000, 4372210.050) (? 3d 8'47.15"E, 39d29'57.90"N)
Center????? (? 498205.000, 4381520.025) (? 2d58'44.75"E, 39d35' 0.22"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
 ? Description = Red
 ? Overviews: 95900x62066, 47950x31033, 23975x15516, 11987x7758, 
5993x3879, 2996x1939, 1498x969, 749x484, 374x242
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
 ? Description = Green
 ? Overviews: 95900x62066, 47950x31033, 23975x15516, 11987x7758, 
5993x3879, 2996x1939, 1498x969, 749x484, 374x242
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
 ? Description = Blue
 ? Overviews: 95900x62066, 47950x31033, 23975x15516, 11987x7758, 
5993x3879, 2996x1939, 1498x969, 749x484, 374x242


Thank you

Miguel A


El 10/02/2022 a las 14:06, Even Rouault escribi?:
> Miguel,
>>
>> I am trying to use the gdal_array.DatasetReadAsArray function to 
>> extract a window from a 3B gtif file by indicating the dataset, the 
>> upper left corner image coordinates, the window size (256x256) at 
>> actual scale in the dataset, the desired buffer size (larger than 
>> actual size 341x341) and indicating the resample algorithm.
>> It only works if I select the NearestNeighbour algorithm. In the rest 
>> of the cases (Bilinear, bicubic, Lanczos, etc...) what the function 
>> returns me is a mosaic that repeats 9 times (3x3) the original image 
>> in reduced size.
>>
>> What am I doing wrong or what have I interpreted incorrectly in the API?
>
> First you should try with the latest release (3.4.1). If you can still 
> reproduce the issue, then strip down your code to a minimum standalone 
> reproducer script (using only GDAL & numpy) and with a minimum 
> reproducing dataset, and provide it here.
>
> Even
>
>>
>> Thanks & Best regards
>>
>> Miguel A. Manso
>>
>> MERCATOR Research Group
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From matteo.ghetta at gmail.com  Thu Feb 10 08:12:02 2022
From: matteo.ghetta at gmail.com (matteo)
Date: Thu, 10 Feb 2022 17:12:02 +0100
Subject: [gdal-dev] Encoding in single transaction shp to PG
In-Reply-To: <2c144700-ff0b-7a22-139d-6bfa073f4f07@spatialys.com>
References: <a95d909b-06c2-5722-27ba-911efae2fb29@gmail.com>
 <2c144700-ff0b-7a22-139d-6bfa073f4f07@spatialys.com>
Message-ID: <ec05e003-6172-eafb-76c1-b4631208715e@gmail.com>

Hi Even,

right! Exactly what I was missing! Just for reference I used:

python3 ogr2vrt.py my_shape.shp my_vrtvrt -oo ENCODING=ISO-8859-1

Thanks!

Matteo

From even.rouault at spatialys.com  Thu Feb 10 08:16:23 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 10 Feb 2022 17:16:23 +0100
Subject: [gdal-dev] Issue with resampling algorithm in
 gdal_array.DatasetReadAsArray python wrapper function
In-Reply-To: <0aff56c9-e0d9-72d5-f287-0265b01bb473@upm.es>
References: <cc0cf4dd-369e-b9bc-c8f2-a5708756b574@upm.es>
 <0aff56c9-e0d9-72d5-f287-0265b01bb473@upm.es>
Message-ID: <ea3df2f3-6acf-3388-7bc9-378b17d838cd@spatialys.com>

Ok, so yes the issue is likely a bug in the ECW driver. Quickly looking 
at the code I do see something potentially suspicious. Please file a 
ticket to https://github.com/OSGeo/gdal/issues/new with all the below 
information.

Le 10/02/2022 ? 17:01, Miguel A. Manso a ?crit?:
> Even
>
> Thank you for your comments
> I have created a new environment, installed the latest version (3.4.1) 
> had version 3.0.4 and the problem persisted.
> I have done another test which may give the clue as to where the 
> problem lies. My datasource is an ECW file and if I use this 
> datasource to extract an area with the gdal_array.DatasetReadAsArray 
> function telling it to use resample methods other than 
> NearestNeighbour it does not do it right.
> I have cut a slice and stored it as a geotiff, and using this 
> datasource for the same test has already worked the resample 
> algorithms. It works with both versions of the libraries.
> I'm sorry I can't extract a piece of image to share it as I have no 
> way to store it in ecw format.
>
> The code used:
>
>
> ds = gdal.Open("PNOA_MA_OF_ETRS89_HU31_h50_0699.ecw")
>
> x = gdal_array.DatasetReadAsArray( ds, 1, 1, 256, 256, buf_obj=None, 
> buf_xsize= 384, buf_ysize=384, buf_type=None, 
> resample_alg=gdal.GRIORA_Lanczos)
>
> src_srs = ogr.osr.SpatialReference()
> src_srs.ImportFromEPSG(25830)
> wkt_projection = src_srs.ExportToWkt()
>
> driver = gdal.GetDriverByName('GTiff')
> dataset = driver.Create( "recorte.tif", 384, 384, 3, gdal.GDT_Byte )
> dataset.SetGeoTransform(( x_min, 0.1, 0, y_max, 0, -0.1))
> dataset.SetProjection(wkt_projection)
> bands = array.shape[0]
> for band in range(bands):
> ??????? dataset.GetRasterBand(band+1).WriteArray( array[ band,:, : ] )
> dataset.FlushCache()
> bands = None
> dataset = None
> driver = None
>
>
> gdalinfo over ECW:
>
> Driver: ECW/ERDAS Compressed Wavelets (SDK 5.3)
> Files: PNOA_MA_OF_ETRS89_HU31_h50_0699.ecw
> Size is 191800, 124133
> Coordinate System is:
> PROJCRS["NUTM31",
> ??? BASEGEOGCRS["ETRS89",
> ??????? DATUM["European Terrestrial Reference System 1989",
> ??????????? ELLIPSOID["GRS 1980",6378137,298.257222101,
> ??????????????? LENGTHUNIT["metre",1]]],
> ??????? PRIMEM["Greenwich",0,
> ??????????? ANGLEUNIT["degree",0.0174532925199433]],
> ??????? ID["EPSG",4258]],
> ??? CONVERSION["UTM zone 31N",
> ??????? METHOD["Transverse Mercator",
> ??????????? ID["EPSG",9807]],
> ??????? PARAMETER["Latitude of natural origin",0,
> ??????????? ANGLEUNIT["degree",0.0174532925199433],
> ??????????? ID["EPSG",8801]],
> ??????? PARAMETER["Longitude of natural origin",3,
> ??????????? ANGLEUNIT["degree",0.0174532925199433],
> ??????????? ID["EPSG",8802]],
> ??????? PARAMETER["Scale factor at natural origin",0.9996,
> ??????????? SCALEUNIT["unity",1],
> ??????????? ID["EPSG",8805]],
> ??????? PARAMETER["False easting",500000,
> ??????????? LENGTHUNIT["Metre",1],
> ??????????? ID["EPSG",8806]],
> ??????? PARAMETER["False northing",0,
> ??????????? LENGTHUNIT["Metre",1],
> ??????????? ID["EPSG",8807]],
> ??????? ID["EPSG",16031]],
> ??? CS[Cartesian,2],
> ??????? AXIS["easting",east,
> ??????????? ORDER[1],
> ??????????? LENGTHUNIT["Metre",1]],
> ??????? AXIS["northing",north,
> ??????????? ORDER[2],
> ??????????? LENGTHUNIT["Metre",1]]]
> Data axis to CRS axis mapping: 1,2
> Origin = (483820.000000000000000,4390830.000000000000000)
> Pixel Size = (0.150000000000000,-0.150000000000000)
> Metadata:
> ? COLORSPACE=RGB
> ? COMPRESSION_RATE_TARGET=6
> ? VERSION=2
> Corner Coordinates:
> Upper Left? (? 483820.000, 4390830.000) (? 2d48'40.90"E, 39d40' 1.67"N)
> Lower Left? (? 483820.000, 4372210.050) (? 2d48'42.54"E, 39d29'57.69"N)
> Upper Right (? 512590.000, 4390830.000) (? 3d 8'48.42"E, 39d40' 1.89"N)
> Lower Right (? 512590.000, 4372210.050) (? 3d 8'47.15"E, 39d29'57.90"N)
> Center????? (? 498205.000, 4381520.025) (? 2d58'44.75"E, 39d35' 0.22"N)
> Band 1 Block=256x256 Type=Byte, ColorInterp=Red
> ? Description = Red
> ? Overviews: 95900x62066, 47950x31033, 23975x15516, 11987x7758, 
> 5993x3879, 2996x1939, 1498x969, 749x484, 374x242
> Band 2 Block=256x256 Type=Byte, ColorInterp=Green
> ? Description = Green
> ? Overviews: 95900x62066, 47950x31033, 23975x15516, 11987x7758, 
> 5993x3879, 2996x1939, 1498x969, 749x484, 374x242
> Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
> ? Description = Blue
> ? Overviews: 95900x62066, 47950x31033, 23975x15516, 11987x7758, 
> 5993x3879, 2996x1939, 1498x969, 749x484, 374x242
>
>
> Thank you
>
> Miguel A
>
>
> El 10/02/2022 a las 14:06, Even Rouault escribi?:
>> Miguel,
>>>
>>> I am trying to use the gdal_array.DatasetReadAsArray function to 
>>> extract a window from a 3B gtif file by indicating the dataset, the 
>>> upper left corner image coordinates, the window size (256x256) at 
>>> actual scale in the dataset, the desired buffer size (larger than 
>>> actual size 341x341) and indicating the resample algorithm.
>>> It only works if I select the NearestNeighbour algorithm. In the 
>>> rest of the cases (Bilinear, bicubic, Lanczos, etc...) what the 
>>> function returns me is a mosaic that repeats 9 times (3x3) the 
>>> original image in reduced size.
>>>
>>> What am I doing wrong or what have I interpreted incorrectly in the 
>>> API?
>>
>> First you should try with the latest release (3.4.1). If you can 
>> still reproduce the issue, then strip down your code to a minimum 
>> standalone reproducer script (using only GDAL & numpy) and with a 
>> minimum reproducing dataset, and provide it here.
>>
>> Even
>>
>>>
>>> Thanks & Best regards
>>>
>>> Miguel A. Manso
>>>
>>> MERCATOR Research Group
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Fri Feb 11 04:15:44 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Feb 2022 13:15:44 +0100
Subject: [gdal-dev] cmake status update - 99% good news!
In-Reply-To: <cfaa9d61-be00-964b-f4a1-58f3b9dea8f1@darc.de>
References: <5e0665b1-7336-6ad1-4199-ba707ffb2491@spatialys.com>
 <rmibl09qjlz.fsf@s1.lexort.com>
 <2f273733-93ca-a389-709d-fe7e46fde8e9@spatialys.com>
 <rmi8rv4addk.fsf_-_@s1.lexort.com>
 <cfaa9d61-be00-964b-f4a1-58f3b9dea8f1@darc.de>
Message-ID: <f4f31018-b4a6-2413-8516-9b14c2c950d8@spatialys.com>

Kai,

there's a point I had in mind regarding your mention of static builds 
but forgot to mention. I consider GDAL static builds as inferior in term 
of capabilities compared to dynamic builds because:

- they don't allow to have GDAL drivers built as plugins : due to the 
design of GDAL drivers, plugins need to link against libgdal. You don't 
want each plugin to have its copy of libgdal. At runtime I'm not sure 
how that would behave regarding the multiple instances of the same GDAL 
symbols.

- and I don't believe you can build Python bindings against as static 
libgdal because we have several Python modules (gdal, ogr, osr, 
gdal_array) with each linking to libgdal. So if you ever managed to make 
them build, at runtime you'd get again several copies of the GDAL symbols

Without mentioning the size of the GDAL binaries with each of them 
embedding libgdal.

So even if I understand there are use cases for GDAL static builds 
(thanks for all the work you do on that side with your pull requests !), 
having them as the default in a distribution seems problematic to me.

Even

Le 25/01/2022 ? 08:23, Kai Pastor, DG0YT a ?crit?:
> I made an initial attempt on gdal with cmake for vcpkg: 
> https://github.com/microsoft/vcpkg/pull/22392
>
> Now vcpkg's default is static linkage on Linux and macOS. AFAICT 
> static linkage is not covered very well. Fixing this needs a lot of 
> work either on the find modules, or on getting dependencies to provide 
> exported config. In some cases (e.g. GEOS), config files already 
> exist, but they are neither used nor a drop-in replacement (target 
> names differ).
>
> On the export side, all custom find modules must be made available to 
> the exported configuration if not burning the depended-on libraries 
> into the exported cmake config. Generating a complete gdal.pc needs 
> work, too. CMake doesn't provide any help ATM. (But note 
> https://gitlab.kitware.com/cmake/cmake/-/issues/22621.)
>
> This is not meant as an argument against shortening the release 
> schedule for cmake. I just want to underline that the CMake build 
> system will continue to need significant changes, including 
> user-facing changes.
>
> Kai Pastor
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From runette at gmail.com  Fri Feb 11 09:24:02 2022
From: runette at gmail.com (Paul Harwood)
Date: Fri, 11 Feb 2022 17:24:02 +0000
Subject: [gdal-dev] GDAL, Proj and cacert
Message-ID: <CAE8nN5O9Z9z6z7n9UJFK17wQdEerjSOk=B+zMcG2mQW1TO2TgQ@mail.gmail.com>

I have an application that uses GDAL with Proj Networking set on.

This is a cross platform application. It works on some platforms but on mac
(for instance) I get runtime errors like this

GDAL failure (1) PROJ: Cannot open https://cdn.proj.org/us_nga_egm96_15.tif:
error setting certificate file: xxx/cacert.pem

Proj is looking in the wrong place for the cacert file - which is in the
proj search path. I would rather avoid using environment
variables (complicated). Is there a programmatic way to set the Proj cacert
location or a default location?

currently - the following are set


Gdal.SetConfigOption("CURL_CA_BUNDLE", Path.Combine(gdalData, "cacert.pem"
));
Osr.SetPROJSearchPath(projData);
Osr.SetPROJEnableNetwork(true);
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220211/c35b142d/attachment.html>

From even.rouault at spatialys.com  Fri Feb 11 09:38:30 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Feb 2022 18:38:30 +0100
Subject: [gdal-dev] GDAL, Proj and cacert
In-Reply-To: <CAE8nN5O9Z9z6z7n9UJFK17wQdEerjSOk=B+zMcG2mQW1TO2TgQ@mail.gmail.com>
References: <CAE8nN5O9Z9z6z7n9UJFK17wQdEerjSOk=B+zMcG2mQW1TO2TgQ@mail.gmail.com>
Message-ID: <805cb7c6-9e68-4506-cd14-91764ff3cd4e@spatialys.com>


Le 11/02/2022 ? 18:24, Paul Harwood a ?crit?:
> I have an application that uses GDAL with Proj Networking set on.
>
> This is a cross platform?application. It works on some platforms but 
> on mac (for instance) I get runtime errors like this
>
> GDAL failure (1) PROJ: Cannot open 
> https://cdn.proj.org/us_nga_egm96_15.tif: error setting certificate 
> file: xxx/cacert.pem
>
> Proj is looking in the wrong place for the cacert file - which is in 
> the proj search path. I would rather avoid using environment 
> variables?(complicated). Is there a programmatic way to set the Proj 
> cacert location or a default location?
>
> currently - the following are set
>
>
> Gdal.SetConfigOption("CURL_CA_BUNDLE", Path.Combine(gdalData, 
> "cacert.pem"));

The logic in PROJ is:

 ??? // Custom path to SSL certificates.
 ??? if (ca_bundle_path == nullptr) {
 ??????? ca_bundle_path = getenv("PROJ_CURL_CA_BUNDLE");
 ??? }
 ??? if (ca_bundle_path == nullptr) {
 ??????? // Name of environment variable used by the curl binary
 ??????? ca_bundle_path = getenv("CURL_CA_BUNDLE");
 ??? }
 ??? if (ca_bundle_path == nullptr) {
 ??????? // Name of environment variable used by the curl binary (tested
 ??????? // after CURL_CA_BUNDLE
 ??????? ca_bundle_path = getenv("SSL_CERT_FILE");
 ??? }
 ??? if (ca_bundle_path != nullptr) {
 ??????? CHECK_RET(ctx,
 ????????????????? curl_easy_setopt(handle, CURLOPT_CAINFO, 
ca_bundle_path));
 ??? }

There's no programmatic way, at least currently. You need to set a real 
environment variable . CPLSetConfigOption() has no effect on PROJ, only 
on GDAL


> Osr.SetPROJSearchPath(projData);
> Osr.SetPROJEnableNetwork(true);
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From runette at gmail.com  Fri Feb 11 09:40:23 2022
From: runette at gmail.com (Paul Harwood)
Date: Fri, 11 Feb 2022 17:40:23 +0000
Subject: [gdal-dev] GDAL, Proj and cacert
In-Reply-To: <805cb7c6-9e68-4506-cd14-91764ff3cd4e@spatialys.com>
References: <CAE8nN5O9Z9z6z7n9UJFK17wQdEerjSOk=B+zMcG2mQW1TO2TgQ@mail.gmail.com>
 <805cb7c6-9e68-4506-cd14-91764ff3cd4e@spatialys.com>
Message-ID: <CAE8nN5PFdMoTn0c8soFEd9jz_2-t2axFuU5-ox3v00yL+MMVwg@mail.gmail.com>

Ok - thanks.

On Fri, 11 Feb 2022 at 17:38, Even Rouault <even.rouault at spatialys.com>
wrote:

>
> Le 11/02/2022 ? 18:24, Paul Harwood a ?crit :
> > I have an application that uses GDAL with Proj Networking set on.
> >
> > This is a cross platform application. It works on some platforms but
> > on mac (for instance) I get runtime errors like this
> >
> > GDAL failure (1) PROJ: Cannot open
> > https://cdn.proj.org/us_nga_egm96_15.tif: error setting certificate
> > file: xxx/cacert.pem
> >
> > Proj is looking in the wrong place for the cacert file - which is in
> > the proj search path. I would rather avoid using environment
> > variables (complicated). Is there a programmatic way to set the Proj
> > cacert location or a default location?
> >
> > currently - the following are set
> >
> >
> > Gdal.SetConfigOption("CURL_CA_BUNDLE", Path.Combine(gdalData,
> > "cacert.pem"));
>
> The logic in PROJ is:
>
>      // Custom path to SSL certificates.
>      if (ca_bundle_path == nullptr) {
>          ca_bundle_path = getenv("PROJ_CURL_CA_BUNDLE");
>      }
>      if (ca_bundle_path == nullptr) {
>          // Name of environment variable used by the curl binary
>          ca_bundle_path = getenv("CURL_CA_BUNDLE");
>      }
>      if (ca_bundle_path == nullptr) {
>          // Name of environment variable used by the curl binary (tested
>          // after CURL_CA_BUNDLE
>          ca_bundle_path = getenv("SSL_CERT_FILE");
>      }
>      if (ca_bundle_path != nullptr) {
>          CHECK_RET(ctx,
>                    curl_easy_setopt(handle, CURLOPT_CAINFO,
> ca_bundle_path));
>      }
>
> There's no programmatic way, at least currently. You need to set a real
> environment variable . CPLSetConfigOption() has no effect on PROJ, only
> on GDAL
>
>
> > Osr.SetPROJSearchPath(projData);
> > Osr.SetPROJEnableNetwork(true);
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220211/9e72f3b2/attachment.html>

From dg0yt at darc.de  Fri Feb 11 10:12:59 2022
From: dg0yt at darc.de (dg0yt at darc.de)
Date: Fri, 11 Feb 2022 19:12:59 +0100 (CET)
Subject: [gdal-dev] cmake status update - 99% good news!
In-Reply-To: <f4f31018-b4a6-2413-8516-9b14c2c950d8@spatialys.com>
References: <5e0665b1-7336-6ad1-4199-ba707ffb2491@spatialys.com>
 <rmibl09qjlz.fsf@s1.lexort.com>
 <2f273733-93ca-a389-709d-fe7e46fde8e9@spatialys.com>
 <rmi8rv4addk.fsf_-_@s1.lexort.com>
 <cfaa9d61-be00-964b-f4a1-58f3b9dea8f1@darc.de>
 <f4f31018-b4a6-2413-8516-9b14c2c950d8@spatialys.com>
Message-ID: <1724263837.106165.1644603179115@office.mailbox.org>

Even,

I understand the downsides and agree with everything you say.

I work with the static builds because this is what is tested in vcpkg CI for macOS and Linux. For Windows, there are also dynamic builds in CI. Dynamic options for Linux and macOS exist but aren't tested, so I guess some of gdal's  dependencies won't build.
Also, vcpkg doesn't aim to offer a binary "distribution" of tools for users but is focused on libraries for developers, built from source.

Kai

> Even Rouault <even.rouault at spatialys.com> hat am 11.02.2022 13:15 geschrieben:
> 
>  
> Kai,
> 
> there's a point I had in mind regarding your mention of static builds 
> but forgot to mention. I consider GDAL static builds as inferior in term 
> of capabilities compared to dynamic builds because:
> 
> - they don't allow to have GDAL drivers built as plugins : due to the 
> design of GDAL drivers, plugins need to link against libgdal. You don't 
> want each plugin to have its copy of libgdal. At runtime I'm not sure 
> how that would behave regarding the multiple instances of the same GDAL 
> symbols.
> 
> - and I don't believe you can build Python bindings against as static 
> libgdal because we have several Python modules (gdal, ogr, osr, 
> gdal_array) with each linking to libgdal. So if you ever managed to make 
> them build, at runtime you'd get again several copies of the GDAL symbols
> 
> Without mentioning the size of the GDAL binaries with each of them 
> embedding libgdal.
> 
> So even if I understand there are use cases for GDAL static builds 
> (thanks for all the work you do on that side with your pull requests !), 
> having them as the default in a distribution seems problematic to me.
> 
> Even
> 
> Le 25/01/2022 ? 08:23, Kai Pastor, DG0YT a ?crit?:
> > I made an initial attempt on gdal with cmake for vcpkg: 
> > https://github.com/microsoft/vcpkg/pull/22392
> >
> > Now vcpkg's default is static linkage on Linux and macOS. AFAICT 
> > static linkage is not covered very well. Fixing this needs a lot of 
> > work either on the find modules, or on getting dependencies to provide 
> > exported config. In some cases (e.g. GEOS), config files already 
> > exist, but they are neither used nor a drop-in replacement (target 
> > names differ).
> >
> > On the export side, all custom find modules must be made available to 
> > the exported configuration if not burning the depended-on libraries 
> > into the exported cmake config. Generating a complete gdal.pc needs 
> > work, too. CMake doesn't provide any help ATM. (But note 
> > https://gitlab.kitware.com/cmake/cmake/-/issues/22621.)
> >
> > This is not meant as an argument against shortening the release 
> > schedule for cmake. I just want to underline that the CMake build 
> > system will continue to need significant changes, including 
> > user-facing changes.
> >
> > Kai Pastor
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

From schwehr at gmail.com  Fri Feb 11 11:03:00 2022
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 11 Feb 2022 11:03:00 -0800
Subject: [gdal-dev] cmake status update - 99% good news!
In-Reply-To: <1724263837.106165.1644603179115@office.mailbox.org>
References: <5e0665b1-7336-6ad1-4199-ba707ffb2491@spatialys.com>
 <rmibl09qjlz.fsf@s1.lexort.com>
 <2f273733-93ca-a389-709d-fe7e46fde8e9@spatialys.com>
 <rmi8rv4addk.fsf_-_@s1.lexort.com>
 <cfaa9d61-be00-964b-f4a1-58f3b9dea8f1@darc.de>
 <f4f31018-b4a6-2413-8516-9b14c2c950d8@spatialys.com>
 <1724263837.106165.1644603179115@office.mailbox.org>
Message-ID: <CACmBxyv32sm7t_2_kcPeE7qeFUhbyGNyjjWKM33CJPcWU-ENKA@mail.gmail.com>

Just a note on static builds to follow-on to Even's comments:

I do static builds of gdal driven by bazel.

This has pros and cons:

- Plugins are explicitly not allowed in the system I work in for security
reasons (I also remove almost all networking)
- The resulting bins are big, but VMs are very focused, so typically there
is only 1 or a couple binaries with GDAL linked in.
- No static libs are kept beyond build caching
- For python, everything is wrapped into one bin at build so there ends up
only being one copy of gdal per binary
- The python libs never link in gdal lib(s) [I split port out as a separate
lib target] - that's the job of the final link stage for the executable
- This makes for easier supply chain tracking
- This means that any changes require a complete rebuild of everything

In a normal linux environment, this doesn't make a lot of sense, but when
deploying 1 program per vm to a cloud env, it works well (e.g. order
millions of VMs)

 It's something that I don't plan to bring to upstream GDAL, but I've
shared the basics in the past.

On Fri, Feb 11, 2022 at 10:13 AM <dg0yt at darc.de> wrote:

> Even,
>
> I understand the downsides and agree with everything you say.
>
> I work with the static builds because this is what is tested in vcpkg CI
> for macOS and Linux. For Windows, there are also dynamic builds in CI.
> Dynamic options for Linux and macOS exist but aren't tested, so I guess
> some of gdal's  dependencies won't build.
> Also, vcpkg doesn't aim to offer a binary "distribution" of tools for
> users but is focused on libraries for developers, built from source.
>
> Kai
>
> > Even Rouault <even.rouault at spatialys.com> hat am 11.02.2022 13:15
> geschrieben:
> >
> >
> > Kai,
> >
> > there's a point I had in mind regarding your mention of static builds
> > but forgot to mention. I consider GDAL static builds as inferior in term
> > of capabilities compared to dynamic builds because:
> >
> > - they don't allow to have GDAL drivers built as plugins : due to the
> > design of GDAL drivers, plugins need to link against libgdal. You don't
> > want each plugin to have its copy of libgdal. At runtime I'm not sure
> > how that would behave regarding the multiple instances of the same GDAL
> > symbols.
> >
> > - and I don't believe you can build Python bindings against as static
> > libgdal because we have several Python modules (gdal, ogr, osr,
> > gdal_array) with each linking to libgdal. So if you ever managed to make
> > them build, at runtime you'd get again several copies of the GDAL symbols
> >
> > Without mentioning the size of the GDAL binaries with each of them
> > embedding libgdal.
> >
> > So even if I understand there are use cases for GDAL static builds
> > (thanks for all the work you do on that side with your pull requests !),
> > having them as the default in a distribution seems problematic to me.
> >
> > Even
> >
> > Le 25/01/2022 ? 08:23, Kai Pastor, DG0YT a ?crit :
> > > I made an initial attempt on gdal with cmake for vcpkg:
> > > https://github.com/microsoft/vcpkg/pull/22392
> > >
> > > Now vcpkg's default is static linkage on Linux and macOS. AFAICT
> > > static linkage is not covered very well. Fixing this needs a lot of
> > > work either on the find modules, or on getting dependencies to provide
> > > exported config. In some cases (e.g. GEOS), config files already
> > > exist, but they are neither used nor a drop-in replacement (target
> > > names differ).
> > >
> > > On the export side, all custom find modules must be made available to
> > > the exported configuration if not burning the depended-on libraries
> > > into the exported cmake config. Generating a complete gdal.pc needs
> > > work, too. CMake doesn't provide any help ATM. (But note
> > > https://gitlab.kitware.com/cmake/cmake/-/issues/22621.)
> > >
> > > This is not meant as an argument against shortening the release
> > > schedule for cmake. I just want to underline that the CMake build
> > > system will continue to need significant changes, including
> > > user-facing changes.
> > >
> > > Kai Pastor
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > --
> > http://www.spatialys.com
> > My software is free, but my time generally not.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220211/a4de8e16/attachment-0001.html>

From jmckenna at gatewaygeomatics.com  Fri Feb 11 11:25:33 2022
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 11 Feb 2022 15:25:33 -0400
Subject: [gdal-dev] GDAL, Proj and cacert
In-Reply-To: <CAE8nN5O9Z9z6z7n9UJFK17wQdEerjSOk=B+zMcG2mQW1TO2TgQ@mail.gmail.com>
References: <CAE8nN5O9Z9z6z7n9UJFK17wQdEerjSOk=B+zMcG2mQW1TO2TgQ@mail.gmail.com>
Message-ID: <adfe2753-00e0-7bc4-f7ae-c40ce2051719@gatewaygeomatics.com>

Thanks for this discussion Paul, I can also add into the chaos that 
Windows Server x64 has known issues with reading environment variables 
(so in my case, for all MS4W x64 deployments, I have MS4W search known 
locations for the bundle, as a workaround for the code that fails to 
find the environment variables in the GDAL/PROJ/MapServer stack). 
Recently MapServer now has a config file where you can set these 
variables, to avoid that problem.  I believe the GDAL/PROJ stack needs 
something like this as well, to avoid the reliance on these system 
environment variables (full disclosure: I need to test if proj.ini 
accepts the cacert bundle as an environment variable, so my above point 
could be wrong, totally).  But I'm often wrong ha.

-jeff


-- 
Jeff McKenna
GatewayGeo: Developers of MS4W, MapServer Consulting and Training
co-founder of FOSS4G
http://gatewaygeo.com/





On 2022-02-11 1:24 p.m., Paul Harwood wrote:
> I have an application that uses GDAL with Proj Networking set on.
> 
> This is a cross platform?application. It works on some platforms but on 
> mac (for instance) I get runtime errors like this
> 
> GDAL failure (1) PROJ: Cannot open 
> https://cdn.proj.org/us_nga_egm96_15.tif 
> <https://cdn.proj.org/us_nga_egm96_15.tif>: error setting certificate 
> file: xxx/cacert.pem
> 
> Proj is looking in the wrong place for the cacert file - which is in the 
> proj search path. I would rather avoid using environment 
> variables?(complicated). Is there a programmatic way to set the Proj 
> cacert location or a default location?
> 
> currently - the following are set
> 
> 
> Gdal.SetConfigOption("CURL_CA_BUNDLE", Path.Combine(gdalData, 
> "cacert.pem"));
> Osr.SetPROJSearchPath(projData);
> Osr.SetPROJEnableNetwork(true);
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From howard at hobu.co  Fri Feb 11 11:29:21 2022
From: howard at hobu.co (Howard Butler)
Date: Fri, 11 Feb 2022 13:29:21 -0600
Subject: [gdal-dev] GDAL, Proj and cacert
In-Reply-To: <adfe2753-00e0-7bc4-f7ae-c40ce2051719@gatewaygeomatics.com>
References: <CAE8nN5O9Z9z6z7n9UJFK17wQdEerjSOk=B+zMcG2mQW1TO2TgQ@mail.gmail.com>
 <adfe2753-00e0-7bc4-f7ae-c40ce2051719@gatewaygeomatics.com>
Message-ID: <65CBEF2E-7CA5-412B-8765-EEFEF5BB1CB7@hobu.co>



> On Feb 11, 2022, at 1:25 PM, Jeff McKenna <jmckenna at gatewaygeomatics.com> wrote:
> 
> Thanks for this discussion Paul, I can also add into the chaos that Windows Server x64 has known issues with reading environment variables

What does this mean, specifically? Much of GDAL's behavior is controlled with environment variables. 

Has Windows changed policies on how environment variables are expressed, consumed, and provided to processes? Is that simply just the case for running in an HTTP server like IIS?

Howard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220211/f2b3e22a/attachment.html>

From jmckenna at gatewaygeomatics.com  Fri Feb 11 11:41:31 2022
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 11 Feb 2022 15:41:31 -0400
Subject: [gdal-dev] GDAL, Proj and cacert
In-Reply-To: <65CBEF2E-7CA5-412B-8765-EEFEF5BB1CB7@hobu.co>
References: <CAE8nN5O9Z9z6z7n9UJFK17wQdEerjSOk=B+zMcG2mQW1TO2TgQ@mail.gmail.com>
 <adfe2753-00e0-7bc4-f7ae-c40ce2051719@gatewaygeomatics.com>
 <65CBEF2E-7CA5-412B-8765-EEFEF5BB1CB7@hobu.co>
Message-ID: <62496905-09c5-f9fe-eea8-7b14276dcc7f@gatewaygeomatics.com>

On 2022-02-11 3:29 p.m., Howard Butler wrote:
> 
> 
>> On Feb 11, 2022, at 1:25 PM, Jeff McKenna 
>> <jmckenna at gatewaygeomatics.com <mailto:jmckenna at gatewaygeomatics.com>> 
>> wrote:
>>
>> Thanks for this discussion Paul, I can also add into the chaos that 
>> Windows Server x64 has known issues with reading environment variables 
> 
> What does this mean, specifically? Much of GDAL's behavior is controlled 
> with environment variables.
> 
> Has Windows changed policies on how environment variables are expressed, 
> consumed, and provided to processes? Is that simply just the case for 
> running in an HTTP server like IIS?
> 
> Howard

It's a frustrating situation, where users report that Windows Server x64 
cannot find cacert (and other) environment variables, through both IIS 
and Apache.  This is years old, terribly difficult to reproduce, but I 
did once reproduce on an AWS server.  At the time I was only focused on 
the HTTP server side of things, so I cannot say here confidently how 
commandline processes are affected.

Unfortunately this issue comes up very often, as you said, so much of 
our stack relies heavily on environment variables.  My hope is that in 
the long run, the ini-style of settings can help battle this Windows 
Server x64 issue (yes googling this does return many 
unproven/non-reproducible reports for other projects, very disheartening).

-jeff




From howard at hobu.co  Fri Feb 11 11:48:03 2022
From: howard at hobu.co (Howard Butler)
Date: Fri, 11 Feb 2022 13:48:03 -0600
Subject: [gdal-dev] GDAL, Proj and cacert
In-Reply-To: <62496905-09c5-f9fe-eea8-7b14276dcc7f@gatewaygeomatics.com>
References: <CAE8nN5O9Z9z6z7n9UJFK17wQdEerjSOk=B+zMcG2mQW1TO2TgQ@mail.gmail.com>
 <adfe2753-00e0-7bc4-f7ae-c40ce2051719@gatewaygeomatics.com>
 <65CBEF2E-7CA5-412B-8765-EEFEF5BB1CB7@hobu.co>
 <62496905-09c5-f9fe-eea8-7b14276dcc7f@gatewaygeomatics.com>
Message-ID: <F09AC074-C592-4A3A-8A7B-D2F4525D7B00@hobu.co>


> On Feb 11, 2022, at 1:41 PM, Jeff McKenna <jmckenna at gatewaygeomatics.com> wrote:
> 
> Unfortunately this issue comes up very often, as you said, so much of our stack relies heavily on environment variables.  My hope is that in the long run, the ini-style of settings can help battle this Windows Server x64 issue (yes googling this does return many unproven/non-reproducible reports for other projects, very disheartening).

The frustrations of how to pass environment variables in different computing environments is an issue that's orthogonal to how GDAL expresses configuration through environment variables. I get that the rules of environment variable resolution can be quite bespoke depending on the computing platform and environment you are operating on, but it's not legit to say "environment variables don't always work for me, we should do config files, but I don't have a reproducible test case to show that"

Howard

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220211/0d2ebb88/attachment.html>

From gdt at lexort.com  Fri Feb 11 11:56:15 2022
From: gdt at lexort.com (Greg Troxel)
Date: Fri, 11 Feb 2022 14:56:15 -0500
Subject: [gdal-dev] GDAL, Proj and cacert
In-Reply-To: <F09AC074-C592-4A3A-8A7B-D2F4525D7B00@hobu.co> (Howard Butler's
 message of "Fri, 11 Feb 2022 13:48:03 -0600")
References: <CAE8nN5O9Z9z6z7n9UJFK17wQdEerjSOk=B+zMcG2mQW1TO2TgQ@mail.gmail.com>
 <adfe2753-00e0-7bc4-f7ae-c40ce2051719@gatewaygeomatics.com>
 <65CBEF2E-7CA5-412B-8765-EEFEF5BB1CB7@hobu.co>
 <62496905-09c5-f9fe-eea8-7b14276dcc7f@gatewaygeomatics.com>
 <F09AC074-C592-4A3A-8A7B-D2F4525D7B00@hobu.co>
Message-ID: <rmiy22hi3ds.fsf@s1.lexort.com>


Howard Butler <howard at hobu.co> writes:

>> On Feb 11, 2022, at 1:41 PM, Jeff McKenna <jmckenna at gatewaygeomatics.com> wrote:
>> 
>> Unfortunately this issue comes up very often, as you said, so much
>> of our stack relies heavily on environment variables.  My hope is
>> that in the long run, the ini-style of settings can help battle this
>> Windows Server x64 issue (yes googling this does return many
>> unproven/non-reproducible reports for other projects, very
>> disheartening).
>
> The frustrations of how to pass environment variables in different
> computing environments is an issue that's orthogonal to how GDAL
> expresses configuration through environment variables. I get that the
> rules of environment variable resolution can be quite bespoke
> depending on the computing platform and environment you are operating
> on, but it's not legit to say "environment variables don't always work
> for me, we should do config files, but I don't have a reproducible
> test case to show that"

Also, it strikes me that the root cause of the problem is that if one
wants certain trust roots to be accepted for validation, then the right
thing is to change the system configuration accordingly.    It is a sign
of misconfigured systems that we are even talking about accomodations
within GDAL.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220211/07fca4c9/attachment.sig>

From jmckenna at gatewaygeomatics.com  Fri Feb 11 12:43:33 2022
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 11 Feb 2022 16:43:33 -0400
Subject: [gdal-dev] GDAL, Proj and cacert
In-Reply-To: <F09AC074-C592-4A3A-8A7B-D2F4525D7B00@hobu.co>
References: <CAE8nN5O9Z9z6z7n9UJFK17wQdEerjSOk=B+zMcG2mQW1TO2TgQ@mail.gmail.com>
 <adfe2753-00e0-7bc4-f7ae-c40ce2051719@gatewaygeomatics.com>
 <65CBEF2E-7CA5-412B-8765-EEFEF5BB1CB7@hobu.co>
 <62496905-09c5-f9fe-eea8-7b14276dcc7f@gatewaygeomatics.com>
 <F09AC074-C592-4A3A-8A7B-D2F4525D7B00@hobu.co>
Message-ID: <8919b0c6-8e2e-e05e-8265-2b4ce49ccfc9@gatewaygeomatics.com>

On 2022-02-11 3:48 p.m., Howard Butler wrote:
> 
>> On Feb 11, 2022, at 1:41 PM, Jeff McKenna 
>> <jmckenna at gatewaygeomatics.com <mailto:jmckenna at gatewaygeomatics.com>> 
>> wrote:
>>
>> Unfortunately this issue comes up very often, as you said, so much of 
>> our stack relies heavily on environment variables. ?My hope is that in 
>> the long run, the ini-style of settings can help battle this Windows 
>> Server x64 issue (yes googling this does return many 
>> unproven/non-reproducible reports for other projects, very disheartening).
> 
> The frustrations of how to pass environment variables in different 
> computing environments is an issue that's orthogonal to how GDAL 
> expresses configuration through environment variables. I get that the 
> rules of environment variable resolution can be quite bespoke depending 
> on the computing platform and environment you are operating on, but it's 
> not legit to say "environment variables don't always work for me, we 
> should do config files, but I don't have a reproducible test case to 
> show that"


I agree here.  But it's important to share and give thoughts, and by 
having an open discussion I'm sure other packagers will keep an eye open 
for such mysterious issues on Windows Server x64 with cacert environment 
variables.  (I hope to never see the issue reported again to me, ha)

-jeff





From maphew at gmail.com  Tue Feb  8 22:04:18 2022
From: maphew at gmail.com (Matt Wilkie)
Date: Tue, 8 Feb 2022 23:04:18 -0700
Subject: [gdal-dev] How to fix path for gdal .py scripts in
 Anaconda-Windows?
In-Reply-To: <CAEDrt38OTJzptUczuWLoEeZPgSZrdhfmYqp64rPbATvUBrdctA@mail.gmail.com>
References: <CY4PR16MB1653E193285E6C1C615721AAA5529@CY4PR16MB1653.namprd16.prod.outlook.com>
 <503f3e5d-a04c-364f-6aac-0937d820c1be@spatialys.com>
 <CY4PR16MB1653ACFEB08BA698EC502CC8A5529@CY4PR16MB1653.namprd16.prod.outlook.com>
 <CAEDrt38OTJzptUczuWLoEeZPgSZrdhfmYqp64rPbATvUBrdctA@mail.gmail.com>
Message-ID: <stvlh5$igs$1@ciao.gmane.io>

On 2022-01-12 2:26 p.m., Idan Miara wrote:
> I had the same problem, here's my solution :
> https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/auxiliary/batch_creator.py


On 2022-01-12 4:40 p.m., Matt.Wilkie at yukon.ca wrote:

> Also see OSGEO4W make-bat-for-py.bat 
> <https://trac.osgeo.org/osgeo4w/ticket/17>. Old but still works. ;-)
>
Upon reflection it seems to me that both of these are work arounds for 
not having regular python wrapper executables created. Now that we can 
`pip install gdal-utils` perhaps it's better to use pip to create the 
wrappers. I have a little bit of experience with that and am will to 
tackle the necessary changes to setup.py. What do you think?

-- 
matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220208/508f40e3/attachment.html>

From maphew at gmail.com  Fri Feb 11 12:51:41 2022
From: maphew at gmail.com (Matt Wilkie)
Date: Fri, 11 Feb 2022 13:51:41 -0700
Subject: [gdal-dev] How to fix path for gdal .py scripts in
 Anaconda-Windows?
In-Reply-To: <stvlh5$igs$1@ciao.gmane.io>
References: <CY4PR16MB1653E193285E6C1C615721AAA5529@CY4PR16MB1653.namprd16.prod.outlook.com>
 <503f3e5d-a04c-364f-6aac-0937d820c1be@spatialys.com>
 <CY4PR16MB1653ACFEB08BA698EC502CC8A5529@CY4PR16MB1653.namprd16.prod.outlook.com>
 <CAEDrt38OTJzptUczuWLoEeZPgSZrdhfmYqp64rPbATvUBrdctA@mail.gmail.com>
 <stvlh5$igs$1@ciao.gmane.io>
Message-ID: <su6i8v$1b4$1@ciao.gmane.io>

> Upon reflection it seems to me that both of these are work arounds for 
> not having regular python wrapper executables created. Now that we can 
> `pip install gdal-utils` perhaps it's better to use pip to create the 
> wrappers. I have a little bit of experience with that and am will to 
> tackle the necessary changes to setup.py. What do you think?

I wrote this a couple of days ago, before starting 
https://github.com/OSGeo/gdal/issues/5281. I'm testing consuming 
gdal-dev via gmane.io with Thunderdbird's NNTP features. I didn't notice 
the message was stuck waiting for me to confirm with Gmane my account 
until this afternoon.

-matt




From maphew at gmail.com  Fri Feb 11 20:25:04 2022
From: maphew at gmail.com (Matt Wilkie)
Date: Fri, 11 Feb 2022 21:25:04 -0700
Subject: [gdal-dev] gdal-utils: Testing?
Message-ID: <CANGB9XTxvzAj_m12B9G_SwFR3wHPVM8A-WU7Hx=n32mq_Qbk_Q@mail.gmail.com>

Hi,

Is there a way to run autotests/pytest only for gdal-utils, or only those
tests that involve a certain folder tree?

-matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220211/9c45db68/attachment.html>

From even.rouault at spatialys.com  Sat Feb 12 02:08:20 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 12 Feb 2022 11:08:20 +0100
Subject: [gdal-dev] gdal-utils: Testing?
In-Reply-To: <CANGB9XTxvzAj_m12B9G_SwFR3wHPVM8A-WU7Hx=n32mq_Qbk_Q@mail.gmail.com>
References: <CANGB9XTxvzAj_m12B9G_SwFR3wHPVM8A-WU7Hx=n32mq_Qbk_Q@mail.gmail.com>
Message-ID: <e965cfaa-c5b2-d0fa-2176-f774065918e4@spatialys.com>


Le 12/02/2022 ? 05:25, Matt Wilkie a ?crit?:
> Hi,
>
> Is there a way to run autotests/pytest only for gdal-utils,
you meant autotest/pyscripts, right ?
> or only those tests that involve a certain folder tree?
good question. The logic to locate the .py scripts is in get_py_script() 
function of autotest/pymod/test_py_scripts.py and is likely dependent on 
the OSGeo/gdal tree structure
>
> -matt
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From runette at gmail.com  Sat Feb 12 06:18:20 2022
From: runette at gmail.com (Paul Harwood)
Date: Sat, 12 Feb 2022 14:18:20 +0000
Subject: [gdal-dev] GDAL, Proj and cacert
In-Reply-To: <8919b0c6-8e2e-e05e-8265-2b4ce49ccfc9@gatewaygeomatics.com>
References: <CAE8nN5O9Z9z6z7n9UJFK17wQdEerjSOk=B+zMcG2mQW1TO2TgQ@mail.gmail.com>
 <adfe2753-00e0-7bc4-f7ae-c40ce2051719@gatewaygeomatics.com>
 <65CBEF2E-7CA5-412B-8765-EEFEF5BB1CB7@hobu.co>
 <62496905-09c5-f9fe-eea8-7b14276dcc7f@gatewaygeomatics.com>
 <F09AC074-C592-4A3A-8A7B-D2F4525D7B00@hobu.co>
 <8919b0c6-8e2e-e05e-8265-2b4ce49ccfc9@gatewaygeomatics.com>
Message-ID: <CAE8nN5OzZU4csnOiWC=jNBdR_sLLxRgQTYL33RJeWT+A-Oxzvg@mail.gmail.com>

O dear - I seem to stepped into an active fire zone .... :) My question was
purely practical and about a problem that I experienced and that Even has
answered - but in the wider context I might make the following points...

- Working in Unity - which is .NET (or more precisely MONO) and x-platform
... there are some complexities about process contexts and environments
(basically - there are a lot of corner cases!). That just makes explicitly
setting options in the API a lot easier than implicitly through envvars.

- GDAL is actually very good at this - I have a lot of code like this and
it works well:

                //Other gdal configs
                Gdal.SetConfigOption("OGR_WFS_LOAD_MULTIPLE_LAYER_DEFN",
"NO");
                Gdal.SetConfigOption("OGR_WFS_PAGING_ALLOWED", "YES");
                Gdal.SetConfigOption("OGR_WFS_USE_STREAMING", "NO");

- The problem I have is actually with PROJ - but if I was calling PROJ
directly through some hypothetical C# binding then it would not be a
problem since PROJ has the method call to set the option explicitly.
However - since I am calling PROJ through the GDAL API call - that is not
an option. For some PROJ options, they do exist in the GDAL API - e.g.

                Osr.SetPROJEnableNetwork(true);

but I can see why most of them would not ...

- Aha - you might say - that is why env var setting is good because it
bypasses the GDAL API. But that just gets me back to the first bullet above
:)

- What would be nice would be an explicit way of setting the default for
PROJ. Since version 7 - PROJ has an ini file but it does not seem to
include the cacert file. I can see why that might be seen as being a
potential security hole - although I would point out that the ini file DOES
allow specification of the CDN URL. From a security point of view - those
two facts together kind of say "you can do a man in the middle attack if
and only if your attack is inherently insecure" ... :)

The bottom line is of course - GDAL does not help in this which is OK since
it is not really a GDAL problem and I will just have to make the env vars
work ...

On Fri, 11 Feb 2022 at 20:49, Jeff McKenna <jmckenna at gatewaygeomatics.com>
wrote:

> On 2022-02-11 3:48 p.m., Howard Butler wrote:
> >
> >> On Feb 11, 2022, at 1:41 PM, Jeff McKenna
> >> <jmckenna at gatewaygeomatics.com <mailto:jmckenna at gatewaygeomatics.com>>
> >> wrote:
> >>
> >> Unfortunately this issue comes up very often, as you said, so much of
> >> our stack relies heavily on environment variables.  My hope is that in
> >> the long run, the ini-style of settings can help battle this Windows
> >> Server x64 issue (yes googling this does return many
> >> unproven/non-reproducible reports for other projects, very
> disheartening).
> >
> > The frustrations of how to pass environment variables in different
> > computing environments is an issue that's orthogonal to how GDAL
> > expresses configuration through environment variables. I get that the
> > rules of environment variable resolution can be quite bespoke depending
> > on the computing platform and environment you are operating on, but it's
> > not legit to say "environment variables don't always work for me, we
> > should do config files, but I don't have a reproducible test case to
> > show that"
>
>
> I agree here.  But it's important to share and give thoughts, and by
> having an open discussion I'm sure other packagers will keep an eye open
> for such mysterious issues on Windows Server x64 with cacert environment
> variables.  (I hope to never see the issue reported again to me, ha)
>
> -jeff
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220212/999ac06e/attachment.html>

From even.rouault at spatialys.com  Sat Feb 12 10:34:19 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 12 Feb 2022 19:34:19 +0100
Subject: [gdal-dev] GDAL, Proj and cacert
In-Reply-To: <CAE8nN5OzZU4csnOiWC=jNBdR_sLLxRgQTYL33RJeWT+A-Oxzvg@mail.gmail.com>
References: <CAE8nN5O9Z9z6z7n9UJFK17wQdEerjSOk=B+zMcG2mQW1TO2TgQ@mail.gmail.com>
 <adfe2753-00e0-7bc4-f7ae-c40ce2051719@gatewaygeomatics.com>
 <65CBEF2E-7CA5-412B-8765-EEFEF5BB1CB7@hobu.co>
 <62496905-09c5-f9fe-eea8-7b14276dcc7f@gatewaygeomatics.com>
 <F09AC074-C592-4A3A-8A7B-D2F4525D7B00@hobu.co>
 <8919b0c6-8e2e-e05e-8265-2b4ce49ccfc9@gatewaygeomatics.com>
 <CAE8nN5OzZU4csnOiWC=jNBdR_sLLxRgQTYL33RJeWT+A-Oxzvg@mail.gmail.com>
Message-ID: <91970be9-93bc-2309-90b3-88d1a48fe572@spatialys.com>

Hi,
>
> - What would be nice would be an explicit way of setting the default 
> for PROJ. Since version 7 - PROJ has an ini file but it does not seem 
> to include the cacert file. I can see why that might be seen as being 
> a potential security hole - although I would point out that the ini 
> file DOES allow specification of the CDN URL. From a security point of 
> view - those two facts together kind of say "you can do a man in the 
> middle attack if and only if your attack is inherently insecure" ... :)
(Most of the time things are the way they are because nobody had the 
need to implement the missing feature or took time to do it. People able 
to control environment variables or the content of a local file are 
equivalent "threats")

https://github.com/OSGeo/PROJ/pull/3049 should help hopefully

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From dthorne at pivotmaritime.com  Sun Feb 13 15:55:10 2022
From: dthorne at pivotmaritime.com (dthorne at pivotmaritime.com)
Date: Mon, 14 Feb 2022 10:55:10 +1100 (AEDT)
Subject: [gdal-dev] GDAL/OGR 3.4.1 not reading S57 correctly
In-Reply-To: <ca1e21d3-d7d3-3160-53da-0223a232ccde@momtchev.com>
References: <b9bea8c4-ab61-5633-7e8b-05723cff0d67@momtchev.com> 
 <D30BB565-8F41-403C-8405-B604E97FDC6D@googlemail.com> 
 <1643331349.224118169@apps.rackspace.com> 
 <ca1e21d3-d7d3-3160-53da-0223a232ccde@momtchev.com>
Message-ID: <1644796510.90399013@apps.rackspace.com>


I'm sorry! I didn't see this response hidden under the other gdal emails!! 
We've tested out your code and we still only get 5 layers. 
Which to me definitely feels like setup/configuration of something. 

Do you know if there is a checklist or things that need to be setup for it to work properly? 


-----Original Message-----
From: "Momtchil Momtchev" <momtchil at momtchev.com>
Sent: Wednesday, February 2, 2022 11:07pm
To: dthorne at pivotmaritime.com, "kusala nine" <kusala9 at googlemail.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] GDAL/OGR 3.4.1 not reading S57 correctly



 
    I get exactly the same layers in ogrinfo as I do with your program both with GDAL 3.3.2 and GDAL 3.4.1 on all of your S57 files. s57/1B5X02NE.000 has 13 layers.
    Here is the program I used: [ https://pastebin.com/z99xeQ92 ]( https://pastebin.com/z99xeQ92 )
 
On 28/01/2022 01:55, [ dthorne at pivotmaritime.com ]( mailto:dthorne at pivotmaritime.com ) wrote:
The S57 file we used to test with each language and it is read correctly in C# & python, our c++ project is the problem. The S57 is the one generated in "\gdal-3.4.1\autotest\ogr\data\s57" when we built gdal. But [ here is a link ]( https://drive.google.com/file/d/1AGCHEQMWHvs6IJgDW45KJvK6gm-r_cpH/view?usp=sharing ) to that s57 folder.

 The specific s57 file we used was "1B5X02NE.000" which in reference to the first image I linked should have 13 layers. 
 Thanks in advance for the help! 

 Daniel



-----Original Message-----
 From: "kusala nine" [ <kusala9 at googlemail.com> ]( mailto:kusala9 at googlemail.com )
 Sent: Friday, January 28, 2022 7:04am
 To: "Momtchil Momtchev" [ <momtchil at momtchev.com> ]( mailto:momtchil at momtchev.com )
 Cc: [ dthorne at pivotmaritime.com ]( mailto:dthorne at pivotmaritime.com ), [ gdal-dev at lists.osgeo.org ]( mailto:gdal-dev at lists.osgeo.org )
 Subject: Re: [gdal-dev] GDAL/OGR 3.4.1 not reading S57 correctly


I?m an S57 expert. Send me the data - I?ll take a look, there?s a lot of leeway with S57 and sometimes it trips up GDAL. I had issues with AML data before which is similar?
Jonathan. 


Sent from my iPhone

On 27 Jan 2022, at 10:44, Momtchil Momtchev [ <momtchil at momtchev.com> ]( mailto:momtchil at momtchev.com ) wrote:



 
    Your code looks OK, can you send me the file too?
 
On 27/01/2022 03:34, [ dthorne at pivotmaritime.com ]( mailto:dthorne at pivotmaritime.com ) wrote:
Here is the C++ code we have written to read the test s57 file. 
[ https://pastebin.com/seXrkgmB ]( https://pastebin.com/seXrkgmB )
  
 We feel that it is some setup stuff we have missed but can't find any clear information. For example we hadn't seen GDAL_DATA environment variables mentioned in any of the documentation we've tried following until Even mentioned it. Are there any other setup stuff we need to do? [ 
 ]( https://pastebin.com/seXrkgmB )


-----Original Message-----
 From: "Momtchil Momtchev" [ <momtchil at momtchev.com> ]( mailto:momtchil at momtchev.com )
 Sent: Wednesday, January 26, 2022 9:21pm
 To: [ dthorne at pivotmaritime.com ]( mailto:dthorne at pivotmaritime.com ), [ gdal-dev at lists.osgeo.org ]( mailto:gdal-dev at lists.osgeo.org )
 Subject: Re: [gdal-dev] GDAL/OGR 3.4.1 not reading S57 correctly



 
Can you post your C++ code? Generally, you have more chances of getting an answer for this type of question on [ https://gis.stackexchange.com/ ]( https://gis.stackexchange.com/ )
 
On 24/01/2022 06:36, [ dthorne at pivotmaritime.com ]( mailto:dthorne at pivotmaritime.com ) wrote:
Hi, So I am trying to get a test C++ project built to read S57 files using the gdal/ogr C++ library. I have previously used the C# library that is on there NuGet manager which states v2.4.4 and that seems to read the s57 without issues. Also tried python and that seems to read it with no issues. However, I am having a problem with the C++ test project. Having built the C++ library into the .lib and .dll files I have included them into a blank project and implemented the functions to read the s57 file, however it is only reporting 5 layers.These 5 layers are the same no matter the s57 file. And 4 out of those 5 layers are not actually layers.Using the autotest generated s57 file as a unit test to cross check, there is supposed to be 13 layers. 
 Note: I had feedback from Even indicating the setup environment is probably wrong. And to set up the GDAL_DATA environment variable, so we've made an environment variable referencing the gdal/data folder and that hasn't fixed the problem, but I think it's on the right track as Even said they could reproduce the problem if not setup correctly.
Has anyone had success reading s57 files with a C++ 3.4.1. project that could possibly help get this going?

 Link to reference Image: [ https://imgur.com/a/KwmqZSe ]( https://imgur.com/a/KwmqZSe )
Regards,Daniel

_______________________________________________ gdal-dev mailing list [ gdal-dev at lists.osgeo.org ]( mailto:gdal-dev at lists.osgeo.org ) [ https://lists.osgeo.org/mailman/listinfo/gdal-dev ]( https://lists.osgeo.org/mailman/listinfo/gdal-dev )
-- Momtchil Momtchev [ <momtchil at momtchev.com> ]( mailto:momtchil at momtchev.com )
-- Momtchil Momtchev [ <momtchil at momtchev.com> ]( mailto:momtchil at momtchev.com ) _______________________________________________
gdal-dev mailing list
[ gdal-dev at lists.osgeo.org ]( mailto:gdal-dev at lists.osgeo.org )
[ https://lists.osgeo.org/mailman/listinfo/gdal-dev ]( https://lists.osgeo.org/mailman/listinfo/gdal-dev )
-- Momtchil Momtchev [ <momtchil at momtchev.com> ]( mailto:momtchil at momtchev.com )
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/92e1bbc4/attachment.html>

From ni_hao88 at hotmail.com  Sun Feb 13 18:13:47 2022
From: ni_hao88 at hotmail.com (ni hao)
Date: Mon, 14 Feb 2022 02:13:47 +0000
Subject: [gdal-dev] gdal v3.4.1 generate_vcxproj.bat error
Message-ID: <DM5PR02MB386236CD21729D629BC07F80F1339@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi list,

gdal v3.4.1 generate_vcxproj.bat line 277 has an error:

echo     ^<NMakeReBuildCommandLine^>nmake -f makefile.vc MSVC_VER=%_clver_% %_nmake_opt_win64_% clean ^&amp;^&amp; nmake -f makefile.vc MSVC_VER=%_clver_%^</NMakeReBuildCommandLine^>  >> %_gdalproj_%

it is missing %_nmake_opt_win64_% in the 2nd nmake commnad line.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/d1a09aee/attachment-0001.html>

From bradh at frogmouth.net  Sun Feb 13 18:30:51 2022
From: bradh at frogmouth.net (Brad Hards)
Date: Mon, 14 Feb 2022 13:30:51 +1100
Subject: [gdal-dev] gdal v3.4.1 generate_vcxproj.bat error
In-Reply-To: <DM5PR02MB386236CD21729D629BC07F80F1339@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB386236CD21729D629BC07F80F1339@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <5359196.iMMfDJ1S0n@audax>

On Monday, 14 February 2022 1:13:47 PM AEDT ni hao wrote:
> it is missing %_nmake_opt_win64_% in the 2nd nmake commnad line.

I have no idea about the change, but you could submit a fix for this. See
https://gdal.org/contributing/developer.html#git-workflows-with-gdal

Brad



From maphew at gmail.com  Sun Feb 13 20:35:50 2022
From: maphew at gmail.com (Matt Wilkie)
Date: Sun, 13 Feb 2022 21:35:50 -0700
Subject: [gdal-dev] gdal-utils: Testing?
In-Reply-To: <e965cfaa-c5b2-d0fa-2176-f774065918e4@spatialys.com>
References: <CANGB9XTxvzAj_m12B9G_SwFR3wHPVM8A-WU7Hx=n32mq_Qbk_Q@mail.gmail.com>
 <e965cfaa-c5b2-d0fa-2176-f774065918e4@spatialys.com>
Message-ID: <CANGB9XSfkMDGOmHa4GuB8EdxVJZcEzpdSdoZUZxpy5pp+ZgBUw@mail.gmail.com>

Ah, okay. So:
~~~
# test the main command line utilities (so both .exe and 'official' python
scripts)
cd autotest
pytest utilities

# test gdal-utils, the 'add-on' python scripts
cd autotest
pytest pyscripts
~~~

I don't feel a need to try adding anything to handle a specific path,
pyscripts is narrow enough, but if I do now I know where to look. Thanks!

-matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220213/13b8638d/attachment.html>

From isabel at opengis.ch  Mon Feb 14 00:17:07 2022
From: isabel at opengis.ch (Isabel Kiefer)
Date: Mon, 14 Feb 2022 09:17:07 +0100
Subject: [gdal-dev] Corrupted geopackage
Message-ID: <CAAXmMvD7t9uLTHeDPXEdZ15z7NwyYowE+iJHO+wVjOK=23m3jA@mail.gmail.com>

Hi everyone,

I've a problem with a corrupted geopackage.
It should contain a table with 694 entries, but only 78 are visible when
opening the file with DB Browser for SQLite or QGIS. The table
gpkg_ogr_contents says 694 though. When opening the .gpkg with a Notepad or
similar, I can see that there are more than 78 entries.

The error message in DB Browser is "database disk image is malformed in
"PRAGMA "main".TABLE_INFO("rtree_XXX");" So it seems that there is a
problem with the index of the concerned table.

Does anyone know how to fix this? I tried
https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642
but
without success.

Thanks in advance for your help!
Isabel

-- 
Isabel Kiefer
OPENGIS.ch

isabel at opengis.ch
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/ea0425ff/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Feb 14 00:26:19 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 14 Feb 2022 08:26:19 +0000
Subject: [gdal-dev] Corrupted geopackage
Message-ID: <58968389442446a1b2c589089a3c1094@maanmittauslaitos.fi>

Hi,

Without being able to see your database it is hard to give more advice that https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642 gives. Did you try all of them? Because the problem has something to do with the spatial index I would have a try be dropping it and repeating the suggested tricks.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Isabel Kiefer
L?hetetty: maanantai 14. helmikuuta 2022 10.17
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Corrupted geopackage

Hi everyone,

I've a problem with a corrupted geopackage.
It should contain a table with 694 entries, but only 78 are visible when opening the file with DB Browser for SQLite or QGIS. The table gpkg_ogr_contents says 694 though. When opening the .gpkg with a Notepad or similar, I can see that there are more than 78 entries.

The error message in DB Browser is "database disk image is malformed in "PRAGMA "main".TABLE_INFO("rtree_XXX");" So it seems that there is a problem with the index of the concerned table.

Does anyone know how to fix this? I tried  https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642 but without success.

Thanks in advance for your help!
Isabel

--
Isabel Kiefer
OPENGIS.ch

isabel at opengis.ch<mailto:isabel at opengis.ch>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/011bedef/attachment.html>

From U.Egger at itwh.de  Mon Feb 14 00:20:00 2022
From: U.Egger at itwh.de (Ulrich Egger)
Date: Mon, 14 Feb 2022 08:20:00 +0000
Subject: [gdal-dev] I'd like to unsubscribe
Message-ID: <631fd466026440a4b84b5baa8f8c08d4@itwh.de>

Dear maintainer of this E-Mail list,

I would like to unsubscribe. I subscribed because I thought it is necessary to ask a question.

Best regards,
Ulrich Egger


Dipl. Hydrol. Ulrich Egger
Institut f?r technisch-wissenschaftliche Hydrologie GmbH
Engelbosteler Damm 22
D-30167 Hannover
Tel. +49-761-48087174
E-Mail: u.egger at itwh.de<mailto:u.egger at itwh.de>

Institut f?r technisch-wissenschaftliche Hydrologie GmbH, Hannover,
HRB Hannover 51869, Gesch?ftsf?hrer: Thomas Beeneken, Martin Lindenberg, Dr. Stefan Schneider

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/93fb74d6/attachment-0001.html>

From senhor.neto at gmail.com  Mon Feb 14 01:10:56 2022
From: senhor.neto at gmail.com (Alexandre Neto)
Date: Mon, 14 Feb 2022 09:10:56 +0000
Subject: [gdal-dev] I'd like to unsubscribe
In-Reply-To: <631fd466026440a4b84b5baa8f8c08d4@itwh.de>
References: <631fd466026440a4b84b5baa8f8c08d4@itwh.de>
Message-ID: <CA+H0G_FEUtz3K9ZGPvFjOY1os74ffaHvY_nM_ipQFSRjd6nJiw@mail.gmail.com>

Hi,

If you follow the link at the bottom of you message, you will find
instructions on how to unsubscribe.

Alexandre Neto

A segunda, 14/02/2022, 08:29, Ulrich Egger via gdal-dev <
gdal-dev at lists.osgeo.org> escreveu:

> Dear maintainer of this E-Mail list,
>
>
>
> I would like to unsubscribe. I subscribed because I thought it is
> necessary to ask a question.
>
>
>
> Best regards,
>
> Ulrich Egger
>
>
>
>
>
> Dipl. Hydrol. Ulrich Egger
>
> Institut f?r technisch-wissenschaftliche Hydrologie GmbH
>
> Engelbosteler Damm 22
>
> D-30167 Hannover
>
> Tel. +49-761-48087174
>
> E-Mail: u.egger at itwh.de
>
>
>
> Institut f?r technisch-wissenschaftliche Hydrologie GmbH, Hannover,
>
> HRB Hannover 51869, Gesch?ftsf?hrer: Thomas Beeneken, Martin Lindenberg,
> Dr. Stefan Schneider
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/54e4d1d0/attachment.html>

From isabel at opengis.ch  Mon Feb 14 02:52:50 2022
From: isabel at opengis.ch (Isabel Kiefer)
Date: Mon, 14 Feb 2022 11:52:50 +0100
Subject: [gdal-dev] Corrupted geopackage
In-Reply-To: <58968389442446a1b2c589089a3c1094@maanmittauslaitos.fi>
References: <58968389442446a1b2c589089a3c1094@maanmittauslaitos.fi>
Message-ID: <CAAXmMvDWxVyQhHb_76QxTE2t_G8BZrisF0_ZW5uqzhPVeJwEkw@mail.gmail.com>

Thanks for your suggestion, Jukka! I tried all the advice from
stackoverflow. I can do ".recover", but get only the features that have
been visible all along.
In the original .gpkg, I cannot DROP the affected RTree-Index. It gives me
the same disk malformed error. But that would also have been my initial
idea...

On Mon, Feb 14, 2022 at 9:26 AM Rahkonen Jukka (MML) <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hi,
>
>
>
> Without being able to see your database it is hard to give more advice
> that
> https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642
> gives. Did you try all of them? Because the problem has something to do
> with the spatial index I would have a try be dropping it and repeating the
> suggested tricks.
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Isabel
> Kiefer
> *L?hetetty:* maanantai 14. helmikuuta 2022 10.17
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* [gdal-dev] Corrupted geopackage
>
>
>
> Hi everyone,
>
>
>
> I've a problem with a corrupted geopackage.
>
> It should contain a table with 694 entries, but only 78 are visible when
> opening the file with DB Browser for SQLite or QGIS. The table
> gpkg_ogr_contents says 694 though. When opening the .gpkg with a Notepad or
> similar, I can see that there are more than 78 entries.
>
>
>
> The error message in DB Browser is "database disk image is malformed in
> "PRAGMA "main".TABLE_INFO("rtree_XXX");" So it seems that there is a
> problem with the index of the concerned table.
>
>
>
> Does anyone know how to fix this? I tried
> https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642 but
> without success.
>
>
>
> Thanks in advance for your help!
>
> Isabel
>
>
>
> --
>
> Isabel Kiefer
>
> OPENGIS.ch
>
>
>
> isabel at opengis.ch
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/857e07c3/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Feb 14 02:59:26 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 14 Feb 2022 10:59:26 +0000
Subject: [gdal-dev] Corrupted geopackage
In-Reply-To: <CAAXmMvDWxVyQhHb_76QxTE2t_G8BZrisF0_ZW5uqzhPVeJwEkw@mail.gmail.com>
References: <58968389442446a1b2c589089a3c1094@maanmittauslaitos.fi>
 <CAAXmMvDWxVyQhHb_76QxTE2t_G8BZrisF0_ZW5uqzhPVeJwEkw@mail.gmail.com>
Message-ID: <b38142af253242d4b8fdbf5a055f8265@maanmittauslaitos.fi>

Hi,

And when you .dump https://www.sqlitetutorial.net/sqlite-dump/ the damaged table into a text file, do you only get 78 insert entries into it?

-Jukka-

L?hett?j?: Isabel Kiefer <isabel at opengis.ch>
L?hetetty: maanantai 14. helmikuuta 2022 12.53
Vastaanottaja: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] Corrupted geopackage

Thanks for your suggestion, Jukka! I tried all the advice from stackoverflow. I can do ".recover", but get only the features that have been visible all along.
In the original .gpkg, I cannot DROP the affected RTree-Index. It gives me the same disk malformed error. But that would also have been my initial idea...

On Mon, Feb 14, 2022 at 9:26 AM Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi,

Without being able to see your database it is hard to give more advice that https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642 gives. Did you try all of them? Because the problem has something to do with the spatial index I would have a try be dropping it and repeating the suggested tricks.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Isabel Kiefer
L?hetetty: maanantai 14. helmikuuta 2022 10.17
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Corrupted geopackage

Hi everyone,

I've a problem with a corrupted geopackage.
It should contain a table with 694 entries, but only 78 are visible when opening the file with DB Browser for SQLite or QGIS. The table gpkg_ogr_contents says 694 though. When opening the .gpkg with a Notepad or similar, I can see that there are more than 78 entries.

The error message in DB Browser is "database disk image is malformed in "PRAGMA "main".TABLE_INFO("rtree_XXX");" So it seems that there is a problem with the index of the concerned table.

Does anyone know how to fix this? I tried  https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642 but without success.

Thanks in advance for your help!
Isabel

--
Isabel Kiefer
OPENGIS.ch

isabel at opengis.ch<mailto:isabel at opengis.ch>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/506f46ed/attachment-0001.html>

From isabel at opengis.ch  Mon Feb 14 03:07:42 2022
From: isabel at opengis.ch (Isabel Kiefer)
Date: Mon, 14 Feb 2022 12:07:42 +0100
Subject: [gdal-dev] Corrupted geopackage
In-Reply-To: <b38142af253242d4b8fdbf5a055f8265@maanmittauslaitos.fi>
References: <58968389442446a1b2c589089a3c1094@maanmittauslaitos.fi>
 <CAAXmMvDWxVyQhHb_76QxTE2t_G8BZrisF0_ZW5uqzhPVeJwEkw@mail.gmail.com>
 <b38142af253242d4b8fdbf5a055f8265@maanmittauslaitos.fi>
Message-ID: <CAAXmMvB_FpsLmDQgg5EGo59bmQi_VQ358z-YHEn-yfN+vCJ8XA@mail.gmail.com>

Hi Jukka,

Yes, exactly, there are only 78 entries in a dump to text file.

In the original .gpkg-file, the rtree_XX_geom table is completely empty (no
columns, no entries) - this must be where the problem comes from..

On Mon, Feb 14, 2022 at 11:59 AM Rahkonen Jukka (MML) <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hi,
>
>
>
> And when you .dump https://www.sqlitetutorial.net/sqlite-dump/ the
> damaged table into a text file, do you only get 78 insert entries into it?
>
>
>
> -Jukka-
>
>
>
> *L?hett?j?:* Isabel Kiefer <isabel at opengis.ch>
> *L?hetetty:* maanantai 14. helmikuuta 2022 12.53
> *Vastaanottaja:* Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi
> >
> *Kopio:* gdal-dev at lists.osgeo.org
> *Aihe:* Re: [gdal-dev] Corrupted geopackage
>
>
>
> Thanks for your suggestion, Jukka! I tried all the advice from
> stackoverflow. I can do ".recover", but get only the features that have
> been visible all along.
>
> In the original .gpkg, I cannot DROP the affected RTree-Index. It gives me
> the same disk malformed error. But that would also have been my initial
> idea...
>
>
>
> On Mon, Feb 14, 2022 at 9:26 AM Rahkonen Jukka (MML) <
> jukka.rahkonen at maanmittauslaitos.fi> wrote:
>
> Hi,
>
>
>
> Without being able to see your database it is hard to give more advice
> that
> https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642
> gives. Did you try all of them? Because the problem has something to do
> with the spatial index I would have a try be dropping it and repeating the
> suggested tricks.
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Isabel
> Kiefer
> *L?hetetty:* maanantai 14. helmikuuta 2022 10.17
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* [gdal-dev] Corrupted geopackage
>
>
>
> Hi everyone,
>
>
>
> I've a problem with a corrupted geopackage.
>
> It should contain a table with 694 entries, but only 78 are visible when
> opening the file with DB Browser for SQLite or QGIS. The table
> gpkg_ogr_contents says 694 though. When opening the .gpkg with a Notepad or
> similar, I can see that there are more than 78 entries.
>
>
>
> The error message in DB Browser is "database disk image is malformed in
> "PRAGMA "main".TABLE_INFO("rtree_XXX");" So it seems that there is a
> problem with the index of the concerned table.
>
>
>
> Does anyone know how to fix this? I tried
> https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642 but
> without success.
>
>
>
> Thanks in advance for your help!
>
> Isabel
>
>
>
> --
>
> Isabel Kiefer
>
> OPENGIS.ch
>
>
>
> isabel at opengis.ch
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/f9f88687/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Feb 14 03:51:09 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 14 Feb 2022 11:51:09 +0000
Subject: [gdal-dev] Corrupted geopackage
In-Reply-To: <CAAXmMvB_FpsLmDQgg5EGo59bmQi_VQ358z-YHEn-yfN+vCJ8XA@mail.gmail.com>
References: <58968389442446a1b2c589089a3c1094@maanmittauslaitos.fi>
 <CAAXmMvDWxVyQhHb_76QxTE2t_G8BZrisF0_ZW5uqzhPVeJwEkw@mail.gmail.com>
 <b38142af253242d4b8fdbf5a055f8265@maanmittauslaitos.fi>
 <CAAXmMvB_FpsLmDQgg5EGo59bmQi_VQ358z-YHEn-yfN+vCJ8XA@mail.gmail.com>
Message-ID: <e66dec04f66f434eb18e3b7fb83c7cac@maanmittauslaitos.fi>

Hi,

Maybe you can drop the rtree tables if you first drop the rtree_xxx triggers that belong to the data table. There are probably 6 of them. I don?t know if it helps, though. rtreecheck() https://sqlite.org/rtree.html is probably useless because you know already that the index is corrupted.

-Jukka-

L?hett?j?: Isabel Kiefer <isabel at opengis.ch>
L?hetetty: maanantai 14. helmikuuta 2022 13.08
Vastaanottaja: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>; gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] Corrupted geopackage

Hi Jukka,

Yes, exactly, there are only 78 entries in a dump to text file.

In the original .gpkg-file, the rtree_XX_geom table is completely empty (no columns, no entries) - this must be where the problem comes from..

On Mon, Feb 14, 2022 at 11:59 AM Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi,

And when you .dump https://www.sqlitetutorial.net/sqlite-dump/ the damaged table into a text file, do you only get 78 insert entries into it?

-Jukka-

L?hett?j?: Isabel Kiefer <isabel at opengis.ch<mailto:isabel at opengis.ch>>
L?hetetty: maanantai 14. helmikuuta 2022 12.53
Vastaanottaja: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>
Kopio: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] Corrupted geopackage

Thanks for your suggestion, Jukka! I tried all the advice from stackoverflow. I can do ".recover", but get only the features that have been visible all along.
In the original .gpkg, I cannot DROP the affected RTree-Index. It gives me the same disk malformed error. But that would also have been my initial idea...

On Mon, Feb 14, 2022 at 9:26 AM Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi,

Without being able to see your database it is hard to give more advice that https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642 gives. Did you try all of them? Because the problem has something to do with the spatial index I would have a try be dropping it and repeating the suggested tricks.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Isabel Kiefer
L?hetetty: maanantai 14. helmikuuta 2022 10.17
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Corrupted geopackage

Hi everyone,

I've a problem with a corrupted geopackage.
It should contain a table with 694 entries, but only 78 are visible when opening the file with DB Browser for SQLite or QGIS. The table gpkg_ogr_contents says 694 though. When opening the .gpkg with a Notepad or similar, I can see that there are more than 78 entries.

The error message in DB Browser is "database disk image is malformed in "PRAGMA "main".TABLE_INFO("rtree_XXX");" So it seems that there is a problem with the index of the concerned table.

Does anyone know how to fix this? I tried  https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642 but without success.

Thanks in advance for your help!
Isabel

--
Isabel Kiefer
OPENGIS.ch

isabel at opengis.ch<mailto:isabel at opengis.ch>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/d5ae3aca/attachment-0001.html>

From even.rouault at spatialys.com  Mon Feb 14 04:25:28 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Feb 2022 13:25:28 +0100
Subject: [gdal-dev] Corrupted geopackage
In-Reply-To: <e66dec04f66f434eb18e3b7fb83c7cac@maanmittauslaitos.fi>
References: <58968389442446a1b2c589089a3c1094@maanmittauslaitos.fi>
 <CAAXmMvDWxVyQhHb_76QxTE2t_G8BZrisF0_ZW5uqzhPVeJwEkw@mail.gmail.com>
 <b38142af253242d4b8fdbf5a055f8265@maanmittauslaitos.fi>
 <CAAXmMvB_FpsLmDQgg5EGo59bmQi_VQ358z-YHEn-yfN+vCJ8XA@mail.gmail.com>
 <e66dec04f66f434eb18e3b7fb83c7cac@maanmittauslaitos.fi>
Message-ID: <73ff3988-76b6-d38f-d148-908f2984b254@spatialys.com>

I would just suggest using ogr2ogr to generate a new 'clean' GPKG file 
from the corrupted one. This will not recover lost data, but at least 
you'll get something sane. Well I should say "structurally" sane. 
depending on how the corruption happened you could get also get 
corrupted content in the data that tools can't detect (there's no 
checksum mechanism at the row level in sqlite)

Le 14/02/2022 ? 12:51, Rahkonen Jukka (MML) a ?crit?:
>
> Hi,
>
> Maybe you can drop the rtree tables if you first drop the rtree_xxx 
> triggers that belong to the data table. There are probably 6 of them. 
> I don?t know if it helps, though. rtreecheck() 
> https://sqlite.org/rtree.html is probably useless because you know 
> already that the index is corrupted.
>
> -Jukka-
>
> *L?hett?j?:* Isabel Kiefer <isabel at opengis.ch>
> *L?hetetty:* maanantai 14. helmikuuta 2022 13.08
> *Vastaanottaja:* Rahkonen Jukka (MML) 
> <jukka.rahkonen at maanmittauslaitos.fi>; gdal-dev at lists.osgeo.org
> *Aihe:* Re: [gdal-dev] Corrupted geopackage
>
> Hi Jukka,
>
> Yes, exactly, there are only?78 entries in a dump to text?file.
>
> In the original .gpkg-file, the rtree_XX_geom table is completely 
> empty (no columns, no entries) - this must be where the problem?comes 
> from..
>
> On Mon, Feb 14, 2022 at 11:59 AM Rahkonen Jukka (MML) 
> <jukka.rahkonen at maanmittauslaitos.fi> wrote:
>
>     Hi,
>
>     And when you .dump https://www.sqlitetutorial.net/sqlite-dump/ the
>     damaged table into a text file, do you only get 78 insert entries
>     into it?
>
>     -Jukka-
>
>     *L?hett?j?:* Isabel Kiefer <isabel at opengis.ch>
>     *L?hetetty:* maanantai 14. helmikuuta 2022 12.53
>     *Vastaanottaja:* Rahkonen Jukka (MML)
>     <jukka.rahkonen at maanmittauslaitos.fi>
>     *Kopio:* gdal-dev at lists.osgeo.org
>     *Aihe:* Re: [gdal-dev] Corrupted geopackage
>
>     Thanks for your suggestion, Jukka! I tried all the advice from
>     stackoverflow. I can do ".recover", but get only the features that
>     have been visible all along.
>
>     In the original .gpkg, I cannot DROP the affected RTree-Index. It
>     gives me the same disk malformed error. But that would also have
>     been my initial idea...
>
>     On Mon, Feb 14, 2022 at 9:26 AM Rahkonen Jukka (MML)
>     <jukka.rahkonen at maanmittauslaitos.fi> wrote:
>
>         Hi,
>
>         Without being able to see your database it is hard to give
>         more advice that
>         https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642
>         gives. Did you try all of them? Because the problem has
>         something to do with the spatial index I would have a try be
>         dropping it and repeating the suggested tricks.
>
>         -Jukka Rahkonen-
>
>         *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org>
>         *Puolesta *Isabel Kiefer
>         *L?hetetty:* maanantai 14. helmikuuta 2022 10.17
>         *Vastaanottaja:* gdal-dev at lists.osgeo.org
>         *Aihe:* [gdal-dev] Corrupted geopackage
>
>         Hi everyone,
>
>         I've a problem with a corrupted geopackage.
>
>         It should contain a table with 694 entries, but only 78 are
>         visible when opening the file with DB Browser for SQLite or
>         QGIS. The table gpkg_ogr_contents says 694 though. When
>         opening the .gpkg with a Notepad or similar, I can see that
>         there are more than 78 entries.
>
>         The error message in DB Browser is "database disk image is
>         malformed in "PRAGMA "main".TABLE_INFO("rtree_XXX");" So it
>         seems that there is a problem with the index of the concerned
>         table.
>
>         Does?anyone know how to?fix this? I tried
>         https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642
>         <https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642>?but
>         without?success.
>
>         Thanks in advance for your help!
>
>         Isabel
>
>         -- 
>
>         Isabel Kiefer
>
>         OPENGIS.ch
>
>         isabel at opengis.ch
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/26556083/attachment.html>

From isabel at opengis.ch  Mon Feb 14 04:52:36 2022
From: isabel at opengis.ch (Isabel Kiefer)
Date: Mon, 14 Feb 2022 13:52:36 +0100
Subject: [gdal-dev] Corrupted geopackage
In-Reply-To: <73ff3988-76b6-d38f-d148-908f2984b254@spatialys.com>
References: <58968389442446a1b2c589089a3c1094@maanmittauslaitos.fi>
 <CAAXmMvDWxVyQhHb_76QxTE2t_G8BZrisF0_ZW5uqzhPVeJwEkw@mail.gmail.com>
 <b38142af253242d4b8fdbf5a055f8265@maanmittauslaitos.fi>
 <CAAXmMvB_FpsLmDQgg5EGo59bmQi_VQ358z-YHEn-yfN+vCJ8XA@mail.gmail.com>
 <e66dec04f66f434eb18e3b7fb83c7cac@maanmittauslaitos.fi>
 <73ff3988-76b6-d38f-d148-908f2984b254@spatialys.com>
Message-ID: <CAAXmMvC4pjUaogdhGWorEu7duVdV3pFMZfpdLJ6=R0y0UMQZfw@mail.gmail.com>

Thanks a lot for your help Jukka and Even. While I can drop the related
triggers, I cannot drop the index table and its shadow tables - it always
gives the database disk image malformed message.
ogr2ogr had worked - as you said - for the visible data. I guess the other
data is lost for good...

On Mon, Feb 14, 2022 at 1:25 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> I would just suggest using ogr2ogr to generate a new 'clean' GPKG file
> from the corrupted one. This will not recover lost data, but at least
> you'll get something sane. Well I should say "structurally" sane. depending
> on how the corruption happened you could get also get corrupted content in
> the data that tools can't detect (there's no checksum mechanism at the row
> level in sqlite)
> Le 14/02/2022 ? 12:51, Rahkonen Jukka (MML) a ?crit :
>
> Hi,
>
>
>
> Maybe you can drop the rtree tables if you first drop the rtree_xxx
> triggers that belong to the data table. There are probably 6 of them. I
> don?t know if it helps, though. rtreecheck() https://sqlite.org/rtree.html
> is probably useless because you know already that the index is corrupted.
>
>
>
> -Jukka-
>
>
>
> *L?hett?j?:* Isabel Kiefer <isabel at opengis.ch> <isabel at opengis.ch>
> *L?hetetty:* maanantai 14. helmikuuta 2022 13.08
> *Vastaanottaja:* Rahkonen Jukka (MML)
> <jukka.rahkonen at maanmittauslaitos.fi>
> <jukka.rahkonen at maanmittauslaitos.fi>; gdal-dev at lists.osgeo.org
> *Aihe:* Re: [gdal-dev] Corrupted geopackage
>
>
>
> Hi Jukka,
>
>
>
> Yes, exactly, there are only 78 entries in a dump to text file.
>
>
>
> In the original .gpkg-file, the rtree_XX_geom table is completely empty
> (no columns, no entries) - this must be where the problem comes from..
>
>
>
> On Mon, Feb 14, 2022 at 11:59 AM Rahkonen Jukka (MML) <
> jukka.rahkonen at maanmittauslaitos.fi> wrote:
>
> Hi,
>
>
>
> And when you .dump https://www.sqlitetutorial.net/sqlite-dump/ the
> damaged table into a text file, do you only get 78 insert entries into it?
>
>
>
> -Jukka-
>
>
>
> *L?hett?j?:* Isabel Kiefer <isabel at opengis.ch>
> *L?hetetty:* maanantai 14. helmikuuta 2022 12.53
> *Vastaanottaja:* Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi
> >
> *Kopio:* gdal-dev at lists.osgeo.org
> *Aihe:* Re: [gdal-dev] Corrupted geopackage
>
>
>
> Thanks for your suggestion, Jukka! I tried all the advice from
> stackoverflow. I can do ".recover", but get only the features that have
> been visible all along.
>
> In the original .gpkg, I cannot DROP the affected RTree-Index. It gives me
> the same disk malformed error. But that would also have been my initial
> idea...
>
>
>
> On Mon, Feb 14, 2022 at 9:26 AM Rahkonen Jukka (MML) <
> jukka.rahkonen at maanmittauslaitos.fi> wrote:
>
> Hi,
>
>
>
> Without being able to see your database it is hard to give more advice
> that
> https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642
> gives. Did you try all of them? Because the problem has something to do
> with the spatial index I would have a try be dropping it and repeating the
> suggested tricks.
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Isabel
> Kiefer
> *L?hetetty:* maanantai 14. helmikuuta 2022 10.17
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* [gdal-dev] Corrupted geopackage
>
>
>
> Hi everyone,
>
>
>
> I've a problem with a corrupted geopackage.
>
> It should contain a table with 694 entries, but only 78 are visible when
> opening the file with DB Browser for SQLite or QGIS. The table
> gpkg_ogr_contents says 694 though. When opening the .gpkg with a Notepad or
> similar, I can see that there are more than 78 entries.
>
>
>
> The error message in DB Browser is "database disk image is malformed in
> "PRAGMA "main".TABLE_INFO("rtree_XXX");" So it seems that there is a
> problem with the index of the concerned table.
>
>
>
> Does anyone know how to fix this? I tried
> https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642 but
> without success.
>
>
>
> Thanks in advance for your help!
>
> Isabel
>
>
>
> --
>
> Isabel Kiefer
>
> OPENGIS.ch
>
>
>
> isabel at opengis.ch
>
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/e67e29fd/attachment-0001.html>

From mj10777 at googlemail.com  Mon Feb 14 05:11:37 2022
From: mj10777 at googlemail.com (Mark Johnson)
Date: Mon, 14 Feb 2022 14:11:37 +0100
Subject: [gdal-dev] Corrupted geopackage
Message-ID: <CAEEbjBgnx5Gx-HUyVM94E_wmXD0wB-x2WtDRwLoL2Z3yZOdqSw@mail.gmail.com>

You should try rebuild the SpatialIndex.

Spatialite offers gpkgAddSpatialIndex for a new Index.

For its own format there are repair functions.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/4eb195bf/attachment.html>

From eruiz at aplitop.com  Mon Feb 14 07:41:45 2022
From: eruiz at aplitop.com (Elena Ruiz)
Date: Mon, 14 Feb 2022 15:41:45 +0000
Subject: [gdal-dev] Error InvalidTile when download a WMS
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.41116dc1-94c7-43e6-b5e4-d3fa348cddea@emailsignatures365.codetwo.com>
Message-ID: <DB7P192MB0507936A90CDFE67E92F0919BB339@DB7P192MB0507.EURP192.PROD.OUTLOOK.COM>

Hello, I'm trying to download a WMS image using gdla_translate from a server in Sweden: http://kartor.stockholm.se/bios/wms/app/baggis/web/WMS_STHLM_ORTOFOTO_2020, with EPSG:3011 (attached xml ) , but it returns me this error, I've searched the internet, but I can't find any entry that refers to it, could someone tell me what this error means and how I could solve it, thanks

>gdal_translate -of JPEG "C:\Users\elena\AppData\Local\Temp\tmpnuevo.xml" "C:\Users\elena\AppData\Local\Temp\prueba.jpg"
Input file size is 766, 577
0ERROR 1: GDALWMS: The server returned exception code 'InvalidTile': Width(254) differs from tile width(256)
ERROR 1: C:\Users\elena\AppData\Local\Temp\tmpnuevo.xml, band 1: IReadBlock failed at X offset 0, Y offset 0: GDALWMS: The server returned exception code 'InvalidTile': Width(254) differs from tile width(256)

Regards,

-----Mensaje original-----
De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de gdal-dev-request at lists.osgeo.org
Enviado el: domingo, 12 de septiembre de 2021 18:24
Para: gdal-dev at lists.osgeo.org
Asunto: gdal-dev Digest, Vol 208, Issue 17

Send gdal-dev mailing list submissions to
	gdal-dev at lists.osgeo.org

To subscribe or unsubscribe via the World Wide Web, visit
	https://lists.osgeo.org/mailman/listinfo/gdal-dev
or, via email, send a message with subject or body 'help' to
	gdal-dev-request at lists.osgeo.org

You can reach the person managing the list at
	gdal-dev-owner at lists.osgeo.org

When replying, please edit your Subject line so it is more specific than "Re: Contents of gdal-dev digest..."


Today's Topics:

   1. Get error handler user data when removing CPL Error Handler
      (Rajsekar Manokaran)
   2. Re: Get error handler user data when removing CPL Error
      Handler (Even Rouault)
   3. Re: Get error handler user data when removing CPL Error
      Handler (Rajsekar Manokaran)
   4. Re: Get error handler user data when removing CPL Error
      Handler (Sean Gillies)


----------------------------------------------------------------------

Message: 1
Date: Sun, 12 Sep 2021 19:33:10 +0530
From: Rajsekar Manokaran <rajsekar at gmail.com>
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Get error handler user data when removing CPL
	Error Handler
Message-ID:
	<CA+4CNMGZsOaKZi_oVe9K7sKBrUkpWSkciapAG0NdL5j-zpbB2w at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Hi,

In the gdal rust bindings (https://github.com/georust/gdal), we're trying to facilitate the use of CPLSetErrorHandlerEx and related APIs.  While setting a handler, we may pass a heap allocated data pointer to the second argument, which is then read via the CPLGetErrorHandlerUserData in the handler and passed to the user.

However, while removing or setting another handler, we're unable to find a race-free method to get the associated user data of the previous handler.
This is needed to properly deallocate the memory.

Is there an atomic way to get both the previous handler (as returned by CPLSetErrorHandler), along with the associated user data?  The issue with making two calls, is that another thread might make changes in between the two calls.

We could synchronize in our API, but it still has the same issue if the user parallely used the C APIs directly or via a different interface.

Relevant PR in rust gdal bindings: https://github.com/georust/gdal/pull/215

-
Regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210912/695f9a37/attachment-0001.html>

------------------------------

Message: 2
Date: Sun, 12 Sep 2021 16:12:19 +0200
From: Even Rouault <even.rouault at spatialys.com>
To: Rajsekar Manokaran <rajsekar at gmail.com>, gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Get error handler user data when removing CPL
	Error Handler
Message-ID: <0637288e-2945-443c-5f02-39f318003644 at spatialys.com>
Content-Type: text/plain; charset="utf-8"; Format="flowed"

Hi,

no there's no thread safe API to do what you want. You'd need a new function

CPLErrorHandler CPLSetErrorHandlerEx2( CPLErrorHandler pfnErrorHandlerNew, void* pUserData, void** ppOldUserData )

to do that.

But as you mention threads that might compete to set an error handler, using CPLSetErrorHandlerEx() is probably not the best strategy. You'd be better with CPLPushErrorHandler() / CPLPopErrorHandler() that only affects the current thread.

Even

Le 12/09/2021 ? 16:03, Rajsekar Manokaran a ?crit?:
> Hi,
>
> In the gdal rust bindings (https://github.com/georust/gdal 
> <https://github.com/georust/gdal>), we're trying to facilitate the use 
> of CPLSetErrorHandlerEx and related APIs.? While setting a handler, we 
> may pass a heap allocated data pointer to the second argument, which 
> is then read via the CPLGetErrorHandlerUserData in the handler and 
> passed to the user.
>
> However, while removing or setting another handler, we're unable to 
> find a race-free method to get the associated user data of the 
> previous handler.?? This is needed to properly deallocate the memory.
>
> Is there an atomic way to get both the previous handler (as returned 
> by CPLSetErrorHandler), along with the associated user data?? The 
> issue with making two calls, is that another thread might make changes 
> in between the two calls.
>
> We could synchronize in our API, but it still has the same issue if 
> the user parallely used the C APIs directly or via a different interface.
>
> Relevant PR in rust gdal bindings: 
> https://github.com/georust/gdal/pull/215
> <https://github.com/georust/gdal/pull/215>
>
> -
> Regards
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

--
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210912/a1407600/attachment-0001.html>

------------------------------

Message: 3
Date: Sun, 12 Sep 2021 20:34:26 +0530
From: Rajsekar Manokaran <rajsekar at gmail.com>
To: Even Rouault <even.rouault at spatialys.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Get error handler user data when removing CPL
	Error Handler
Message-ID:
	<CA+4CNMFrAFBr+xg-JhAnPde6Am9d7pknL87zNYzEt-TuVa_eRQ at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Thanks for the clarification! The API you suggest would indeed be quite convenient.

We do intend to support the thread local variants too, but wanted to see how much we can support the global one.

-
Regards

On Sun, Sep 12, 2021 at 7:42 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> no there's no thread safe API to do what you want. You'd need a new 
> function
>
> CPLErrorHandler CPLSetErrorHandlerEx2( CPLErrorHandler 
> pfnErrorHandlerNew,
> void* pUserData, void** ppOldUserData )
>
> to do that.
>
> But as you mention threads that might compete to set an error handler, 
> using CPLSetErrorHandlerEx() is probably not the best strategy. You'd 
> be better with CPLPushErrorHandler() / CPLPopErrorHandler() that only 
> affects the current thread.
>
> Even
> Le 12/09/2021 ? 16:03, Rajsekar Manokaran a ?crit :
>
> Hi,
>
> In the gdal rust bindings (https://github.com/georust/gdal), we're 
> trying to facilitate the use of CPLSetErrorHandlerEx and related APIs.  
> While setting a handler, we may pass a heap allocated data pointer to 
> the second argument, which is then read via the 
> CPLGetErrorHandlerUserData in the handler and passed to the user.
>
> However, while removing or setting another handler, we're unable to 
> find a race-free method to get the associated user data of the previous handler.
> This is needed to properly deallocate the memory.
>
> Is there an atomic way to get both the previous handler (as returned 
> by CPLSetErrorHandler), along with the associated user data?  The 
> issue with making two calls, is that another thread might make changes 
> in between the two calls.
>
> We could synchronize in our API, but it still has the same issue if 
> the user parallely used the C APIs directly or via a different interface.
>
> Relevant PR in rust gdal bindings:
> https://github.com/georust/gdal/pull/215
>
> -
> Regards
>
>
> _______________________________________________
> gdal-dev mailing 
> listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/g
> dal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210912/6a64af4d/attachment-0001.html>

------------------------------

Message: 4
Date: Sun, 12 Sep 2021 10:23:15 -0600
From: Sean Gillies <sean at mapbox.com>
To: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Get error handler user data when removing CPL
	Error Handler
Message-ID:
	<CADPhZXzuZFJ4kg+nBRh_+jKi9aUAHUEbjM2Ee8RUiS4tTc5NeA at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Hi,

For what it's worth, In the Python package named rasterio we're using the push/pop API:
https://github.com/mapbox/rasterio/blob/master/rasterio/_env.pyx#L336.
While Rust's needs may differ, a single handler without any support for user data works well for Python: everything goes to the logging infrastructure, one of the kind of globals that Howard refers to in https://github.com/OSGeo/gdal/blob/master/gdal/doc/source/development/rfc/rfc37_cplerror_userdata.rst#rationale,
and Python developers extend the logger if they want behavior that is different from the basic defaults.

On Sun, Sep 12, 2021 at 8:12 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> no there's no thread safe API to do what you want. You'd need a new 
> function
>
> CPLErrorHandler CPLSetErrorHandlerEx2( CPLErrorHandler 
> pfnErrorHandlerNew,
> void* pUserData, void** ppOldUserData )
>
> to do that.
>
> But as you mention threads that might compete to set an error handler, 
> using CPLSetErrorHandlerEx() is probably not the best strategy. You'd 
> be better with CPLPushErrorHandler() / CPLPopErrorHandler() that only 
> affects the current thread.
>
> Even
> Le 12/09/2021 ? 16:03, Rajsekar Manokaran a ?crit :
>
> Hi,
>
> In the gdal rust bindings (https://github.com/georust/gdal), we're 
> trying to facilitate the use of CPLSetErrorHandlerEx and related APIs.  
> While setting a handler, we may pass a heap allocated data pointer to 
> the second argument, which is then read via the 
> CPLGetErrorHandlerUserData in the handler and passed to the user.
>
> However, while removing or setting another handler, we're unable to 
> find a race-free method to get the associated user data of the previous handler.
> This is needed to properly deallocate the memory.
>
> Is there an atomic way to get both the previous handler (as returned 
> by CPLSetErrorHandler), along with the associated user data?  The 
> issue with making two calls, is that another thread might make changes 
> in between the two calls.
>
> We could synchronize in our API, but it still has the same issue if 
> the user parallely used the C APIs directly or via a different interface.
>
> Relevant PR in rust gdal bindings:
> https://github.com/georust/gdal/pull/215
>
> -
> Regards
>
>

--
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210912/cef13953/attachment.html>

------------------------------

Subject: Digest Footer

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev


------------------------------

End of gdal-dev Digest, Vol 208, Issue 17
*****************************************
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tmpnuevo.xml
Type: application/xml
Size: 902 bytes
Desc: tmpnuevo.xml
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/17cffada/attachment.xml>

From mj10777 at googlemail.com  Mon Feb 14 10:41:47 2022
From: mj10777 at googlemail.com (Mark Johnson)
Date: Mon, 14 Feb 2022 19:41:47 +0100
Subject: [gdal-dev] Corrupted geopackage
In-Reply-To: <CAEEbjBgnx5Gx-HUyVM94E_wmXD0wB-x2WtDRwLoL2Z3yZOdqSw@mail.gmail.com>
References: <CAEEbjBgnx5Gx-HUyVM94E_wmXD0wB-x2WtDRwLoL2Z3yZOdqSw@mail.gmail.com>
Message-ID: <CAEEbjBg1tC6YeHF1_yjxbnavakJ4dOF-Xawyga+XdJrJHeY7NA@mail.gmail.com>

On Mon, 14 Feb 2022, 14:11 Mark Johnson, <mj10777 at googlemail.com> wrote:

> You should try rebuild the SpatialIndex.
>
> Spatialite offers gpkgAddSpatialIndex for a new Index.
>
> For its own format there are repair functions.
>

>SQL functions reference list
>- spatialite-sql-latest.html
> - will always lead to the released latest version
>
>- https://www.gaia-gis.it/gaia-sins/spatialite-sql-latest.html
> - SQL functions for Spatial-MetaData and Spatial-Index handling
> - https://www.gaia-gis.it/gaia-sins/spatialite-sql-latest.html#p16
> - CreateSpatialIndex
> - DisableSpatialIndex
> - CheckSpatialIndex
> - RecoverSpatialIndex
> - SQL functions implementing OGC GeoPackage compatibility
> - https://www.gaia-gis.it/gaia-sins/spatialite-sql-latest.html#p16gpkg
> - gpkgAddSpatialIndex
>
>- The 'Syntax' column: the command syntax
> - gpkgAddSpatialIndex(table_name String, geometry_column_name String) :
void
>- The 'Summary' column: further information
>

>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/6ef0c105/attachment-0001.html>

From sigeal at sigeal.com  Mon Feb 14 10:53:51 2022
From: sigeal at sigeal.com (=?UTF-8?Q?SIG=c3=a9al?=)
Date: Mon, 14 Feb 2022 19:53:51 +0100
Subject: [gdal-dev] Can't open postgrest service with ogr2ogr (via QGIS)
Message-ID: <efeaa8db-acbd-d8c5-994f-598b10ef345d@sigeal.com>

Hi list,

I have a PostgreSql stored procedure which returns a geojson feature 
collection created with json_build_object function. This web service 
opens fine in OpenLayers, however, when I try to open it in QGIS, with 
data source manager -> vector -> protocol -> geojson.

A similar REST service served with pg_featureserv, works well...


      Here are tests realised with curl and ogrinfo for failing
      postgrest service and working pg_featureserv services :


        PostGrest


          curl answer :

|StatusCode : 200 StatusDescription : OK Content : {123, 34, 116, 
121...} RawContent : HTTP/1.1 200 OK Transfer-Encoding: chunked 
Content-Range: 0-0/* Vary: Accept-Encoding Content-Type: 
application/geo+json Date: Sun, 13 Feb 2022 07:35:55 GMT Server: 
postgrest/9.0.0 {"type" : ... Headers : {[Transfer-Encoding, chunked], 
[Content-Range, 0-0/*], [Vary, Accept-Encoding], [Content-Type, 
application/geo+json]...} RawContentLength : 430979 |


          ogrinfo answer :

|ERROR 1: HTTP error code : 404 ERROR 1: HTTP error code : 404 FAILURE: 
Unable to open datasource `http://mydomain:3000/rpc/wod_geojson.json' 
with the following drivers... |


        pg_featureserv


          curl answer :

|StatusCode : 200 StatusDescription : OK Content : {123, 34, 116, 
121...} RawContent : HTTP/1.1 200 OK Transfer-Encoding: chunked 
Content-Type: application/geo+json Date: Sun, 13 Feb 2022 07:33:51 GMT 
{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Po... 
Headers : {[Transfer-Encoding, chunked], [Content-Type, 
application/geo+json], [Date, Sun, 13 Feb 2022 07:33:51 GMT]} 
RawContentLength : 4474 |


          ogrinfo answer :

|INFO: Open of 
`http://mydomain:9000/functions/webmapod_mdarret/items.json' using 
driver `GeoJSON' successful. 1: items (Point) |

What could explain that 404 error for posgrest geojson web service ?

Thanks for any hint,

-- 
Christophe Damour
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/2aa4e760/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Feb 14 11:26:45 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 14 Feb 2022 19:26:45 +0000
Subject: [gdal-dev] Can't open postgrest service with ogr2ogr (via QGIS)
In-Reply-To: <efeaa8db-acbd-d8c5-994f-598b10ef345d@sigeal.com>
References: <efeaa8db-acbd-d8c5-994f-598b10ef345d@sigeal.com>
Message-ID: <275baf817c82465585b10671af0f87ce@maanmittauslaitos.fi>

Hi,

Does http://mydomain:3000/rpc/wod_geojson.json return data if you send it with browser?  Re-run the ogrinfo command with ?--debug on? and see if you can capture the http requests that ogrinfo sends.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta SIG?al
L?hetetty: maanantai 14. helmikuuta 2022 20.54
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Can't open postgrest service with ogr2ogr (via QGIS)

Hi list,

I have a PostgreSql stored procedure which returns a geojson feature collection created with json_build_object function. This web service opens fine in OpenLayers, however, when I try to open it in QGIS, with data source manager -> vector -> protocol -> geojson.

A similar REST service served with pg_featureserv, works well...
Here are tests realised with curl and ogrinfo for failing postgrest service and working pg_featureserv services :
PostGrest
curl answer :

StatusCode        : 200

StatusDescription : OK

Content           : {123, 34, 116, 121...}

RawContent        : HTTP/1.1 200 OK

                    Transfer-Encoding: chunked

                    Content-Range: 0-0/*

                    Vary: Accept-Encoding

                    Content-Type: application/geo+json

                    Date: Sun, 13 Feb 2022 07:35:55 GMT

                    Server: postgrest/9.0.0



                    {"type" : ...

Headers           : {[Transfer-Encoding, chunked], [Content-Range, 0-0/*], [Vary, Accept-Encoding], [Content-Type,

                    application/geo+json]...}

RawContentLength  : 430979

ogrinfo answer :

ERROR 1: HTTP error code : 404

ERROR 1: HTTP error code : 404

FAILURE:

Unable to open datasource `http://mydomain:3000/rpc/wod_geojson.json' with the following drivers...

pg_featureserv
curl answer :

StatusCode        : 200

StatusDescription : OK

Content           : {123, 34, 116, 121...}

RawContent        : HTTP/1.1 200 OK

                    Transfer-Encoding: chunked

                    Content-Type: application/geo+json

                    Date: Sun, 13 Feb 2022 07:33:51 GMT



                    {"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Po...

Headers           : {[Transfer-Encoding, chunked], [Content-Type, application/geo+json], [Date, Sun, 13 Feb 2022

                    07:33:51 GMT]}

RawContentLength  : 4474

ogrinfo answer :

INFO: Open of `http://mydomain:9000/functions/webmapod_mdarret/items.json'

      using driver `GeoJSON' successful.

1: items (Point)

What could explain that 404 error for posgrest geojson web service ?

Thanks for any hint,

--

Christophe Damour
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/8e9d3083/attachment.html>

From andrew at aitchison.me.uk  Mon Feb 14 12:14:49 2022
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Mon, 14 Feb 2022 20:14:49 +0000 (GMT)
Subject: [gdal-dev] Error InvalidTile when download a WMS
In-Reply-To: <DB7P192MB0507936A90CDFE67E92F0919BB339@DB7P192MB0507.EURP192.PROD.OUTLOOK.COM>
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.41116dc1-94c7-43e6-b5e4-d3fa348cddea@emailsignatures365.codetwo.com>
 <DB7P192MB0507936A90CDFE67E92F0919BB339@DB7P192MB0507.EURP192.PROD.OUTLOOK.COM>
Message-ID: <57675b6-41c4-ee24-9ddf-e968d74ba7a@aitchison.me.uk>

On Mon, 14 Feb 2022, Elena Ruiz wrote:

> Hello, I'm trying to download a WMS image using gdla_translate from a server in Sweden: http://kartor.stockholm.se/bios/wms/app/baggis/web/WMS_STHLM_ORTOFOTO_2020, with EPSG:3011 (attached xml ) , but it returns me this error, I've searched the internet, but I can't find any entry that refers to it, could someone tell me what this error means and how I could solve it, thanks
>
>> gdal_translate -of JPEG "C:\Users\elena\AppData\Local\Temp\tmpnuevo.xml" "C:\Users\elena\AppData\Local\Temp\prueba.jpg"
> Input file size is 766, 577
> 0ERROR 1: GDALWMS: The server returned exception code 'InvalidTile': Width(254) differs from tile width(256)
> ERROR 1: C:\Users\elena\AppData\Local\Temp\tmpnuevo.xml, band 1: IReadBlock failed at X offset 0, Y offset 0: GDALWMS: The server returned exception code 'InvalidTile': Width(254) differs from tile width(256)

If I change SizeX and SizeY to be multiples of 256 (BlockSizeX/Y)
<     <SizeX>766.5</SizeX>
<     <SizeY>577.5</SizeY>
---
>     <SizeX>768</SizeX>
>     <SizeY>512</SizeY>
then I get a picture.
However this probably changes the scale in ways you don't want, so the 
Uppper/LowerLeft/Right will need adjusting.

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From jukka.rahkonen at maanmittauslaitos.fi  Mon Feb 14 12:33:01 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Mon, 14 Feb 2022 20:33:01 +0000
Subject: [gdal-dev] Error InvalidTile when download a WMS
In-Reply-To: <DB7P192MB0507936A90CDFE67E92F0919BB339@DB7P192MB0507.EURP192.PROD.OUTLOOK.COM>
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.41116dc1-94c7-43e6-b5e4-d3fa348cddea@emailsignatures365.codetwo.com>
 <DB7P192MB0507936A90CDFE67E92F0919BB339@DB7P192MB0507.EURP192.PROD.OUTLOOK.COM>
Message-ID: <7ac7de737a4448d0987b9e54d6ecf572@maanmittauslaitos.fi>

Hi,

Have you tried to use the URL without &TILED=TRUE?  That vendor option is meant for clients like OpenLayers so that they can get cacheable tiles from standard GeoServer WMS https://geoserver-pdf.readthedocs.io/en/latest/services/wms/vendor.html

That such tiling and metatiling can work the requests must have a certain width and height. For regular WMS clients it is better not to use &TILED=TRUE.

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Elena Ruiz
L?hetetty: maanantai 14. helmikuuta 2022 17.42
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Error InvalidTile when download a WMS

Hello, I'm trying to download a WMS image using gdla_translate from a server in Sweden: http://kartor.stockholm.se/bios/wms/app/baggis/web/WMS_STHLM_ORTOFOTO_2020, with EPSG:3011 (attached xml ) , but it returns me this error, I've searched the internet, but I can't find any entry that refers to it, could someone tell me what this error means and how I could solve it, thanks

>gdal_translate -of JPEG "C:\Users\elena\AppData\Local\Temp\tmpnuevo.xml" "C:\Users\elena\AppData\Local\Temp\prueba.jpg"
Input file size is 766, 577
0ERROR 1: GDALWMS: The server returned exception code 'InvalidTile': Width(254) differs from tile width(256) ERROR 1: C:\Users\elena\AppData\Local\Temp\tmpnuevo.xml, band 1: IReadBlock failed at X offset 0, Y offset 0: GDALWMS: The server returned exception code 'InvalidTile': Width(254) differs from tile width(256)

Regards,

-----Mensaje original-----
De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de gdal-dev-request at lists.osgeo.org Enviado el: domingo, 12 de septiembre de 2021 18:24
Para: gdal-dev at lists.osgeo.org
Asunto: gdal-dev Digest, Vol 208, Issue 17

Send gdal-dev mailing list submissions to
	gdal-dev at lists.osgeo.org

To subscribe or unsubscribe via the World Wide Web, visit
	https://lists.osgeo.org/mailman/listinfo/gdal-dev
or, via email, send a message with subject or body 'help' to
	gdal-dev-request at lists.osgeo.org

You can reach the person managing the list at
	gdal-dev-owner at lists.osgeo.org

When replying, please edit your Subject line so it is more specific than "Re: Contents of gdal-dev digest..."


Today's Topics:

   1. Get error handler user data when removing CPL Error Handler
      (Rajsekar Manokaran)
   2. Re: Get error handler user data when removing CPL Error
      Handler (Even Rouault)
   3. Re: Get error handler user data when removing CPL Error
      Handler (Rajsekar Manokaran)
   4. Re: Get error handler user data when removing CPL Error
      Handler (Sean Gillies)


----------------------------------------------------------------------

Message: 1
Date: Sun, 12 Sep 2021 19:33:10 +0530
From: Rajsekar Manokaran <rajsekar at gmail.com>
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Get error handler user data when removing CPL
	Error Handler
Message-ID:
	<CA+4CNMGZsOaKZi_oVe9K7sKBrUkpWSkciapAG0NdL5j-zpbB2w at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Hi,

In the gdal rust bindings (https://github.com/georust/gdal), we're trying to facilitate the use of CPLSetErrorHandlerEx and related APIs.  While setting a handler, we may pass a heap allocated data pointer to the second argument, which is then read via the CPLGetErrorHandlerUserData in the handler and passed to the user.

However, while removing or setting another handler, we're unable to find a race-free method to get the associated user data of the previous handler.
This is needed to properly deallocate the memory.

Is there an atomic way to get both the previous handler (as returned by CPLSetErrorHandler), along with the associated user data?  The issue with making two calls, is that another thread might make changes in between the two calls.

We could synchronize in our API, but it still has the same issue if the user parallely used the C APIs directly or via a different interface.

Relevant PR in rust gdal bindings: https://github.com/georust/gdal/pull/215

-
Regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210912/695f9a37/attachment-0001.html>

------------------------------

Message: 2
Date: Sun, 12 Sep 2021 16:12:19 +0200
From: Even Rouault <even.rouault at spatialys.com>
To: Rajsekar Manokaran <rajsekar at gmail.com>, gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Get error handler user data when removing CPL
	Error Handler
Message-ID: <0637288e-2945-443c-5f02-39f318003644 at spatialys.com>
Content-Type: text/plain; charset="utf-8"; Format="flowed"

Hi,

no there's no thread safe API to do what you want. You'd need a new function

CPLErrorHandler CPLSetErrorHandlerEx2( CPLErrorHandler pfnErrorHandlerNew, void* pUserData, void** ppOldUserData )

to do that.

But as you mention threads that might compete to set an error handler, using CPLSetErrorHandlerEx() is probably not the best strategy. You'd be better with CPLPushErrorHandler() / CPLPopErrorHandler() that only affects the current thread.

Even

Le 12/09/2021 ? 16:03, Rajsekar Manokaran a ?crit?:
> Hi,
>
> In the gdal rust bindings (https://github.com/georust/gdal 
> <https://github.com/georust/gdal>), we're trying to facilitate the use 
> of CPLSetErrorHandlerEx and related APIs.? While setting a handler, we 
> may pass a heap allocated data pointer to the second argument, which 
> is then read via the CPLGetErrorHandlerUserData in the handler and 
> passed to the user.
>
> However, while removing or setting another handler, we're unable to 
> find a race-free method to get the associated user data of the 
> previous handler.?? This is needed to properly deallocate the memory.
>
> Is there an atomic way to get both the previous handler (as returned 
> by CPLSetErrorHandler), along with the associated user data?? The 
> issue with making two calls, is that another thread might make changes 
> in between the two calls.
>
> We could synchronize in our API, but it still has the same issue if 
> the user parallely used the C APIs directly or via a different interface.
>
> Relevant PR in rust gdal bindings: 
> https://github.com/georust/gdal/pull/215
> <https://github.com/georust/gdal/pull/215>
>
> -
> Regards
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

--
http://www.spatialys.com
My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210912/a1407600/attachment-0001.html>

------------------------------

Message: 3
Date: Sun, 12 Sep 2021 20:34:26 +0530
From: Rajsekar Manokaran <rajsekar at gmail.com>
To: Even Rouault <even.rouault at spatialys.com>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Get error handler user data when removing CPL
	Error Handler
Message-ID:
	<CA+4CNMFrAFBr+xg-JhAnPde6Am9d7pknL87zNYzEt-TuVa_eRQ at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Thanks for the clarification! The API you suggest would indeed be quite convenient.

We do intend to support the thread local variants too, but wanted to see how much we can support the global one.

-
Regards

On Sun, Sep 12, 2021 at 7:42 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> no there's no thread safe API to do what you want. You'd need a new 
> function
>
> CPLErrorHandler CPLSetErrorHandlerEx2( CPLErrorHandler 
> pfnErrorHandlerNew,
> void* pUserData, void** ppOldUserData )
>
> to do that.
>
> But as you mention threads that might compete to set an error handler, 
> using CPLSetErrorHandlerEx() is probably not the best strategy. You'd 
> be better with CPLPushErrorHandler() / CPLPopErrorHandler() that only 
> affects the current thread.
>
> Even
> Le 12/09/2021 ? 16:03, Rajsekar Manokaran a ?crit :
>
> Hi,
>
> In the gdal rust bindings (https://github.com/georust/gdal), we're 
> trying to facilitate the use of CPLSetErrorHandlerEx and related APIs.
> While setting a handler, we may pass a heap allocated data pointer to 
> the second argument, which is then read via the 
> CPLGetErrorHandlerUserData in the handler and passed to the user.
>
> However, while removing or setting another handler, we're unable to 
> find a race-free method to get the associated user data of the previous handler.
> This is needed to properly deallocate the memory.
>
> Is there an atomic way to get both the previous handler (as returned 
> by CPLSetErrorHandler), along with the associated user data?  The 
> issue with making two calls, is that another thread might make changes 
> in between the two calls.
>
> We could synchronize in our API, but it still has the same issue if 
> the user parallely used the C APIs directly or via a different interface.
>
> Relevant PR in rust gdal bindings:
> https://github.com/georust/gdal/pull/215
>
> -
> Regards
>
>
> _______________________________________________
> gdal-dev mailing
> listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/g
> dal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210912/6a64af4d/attachment-0001.html>

------------------------------

Message: 4
Date: Sun, 12 Sep 2021 10:23:15 -0600
From: Sean Gillies <sean at mapbox.com>
To: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Get error handler user data when removing CPL
	Error Handler
Message-ID:
	<CADPhZXzuZFJ4kg+nBRh_+jKi9aUAHUEbjM2Ee8RUiS4tTc5NeA at mail.gmail.com>
Content-Type: text/plain; charset="utf-8"

Hi,

For what it's worth, In the Python package named rasterio we're using the push/pop API:
https://github.com/mapbox/rasterio/blob/master/rasterio/_env.pyx#L336.
While Rust's needs may differ, a single handler without any support for user data works well for Python: everything goes to the logging infrastructure, one of the kind of globals that Howard refers to in https://github.com/OSGeo/gdal/blob/master/gdal/doc/source/development/rfc/rfc37_cplerror_userdata.rst#rationale,
and Python developers extend the logger if they want behavior that is different from the basic defaults.

On Sun, Sep 12, 2021 at 8:12 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> no there's no thread safe API to do what you want. You'd need a new 
> function
>
> CPLErrorHandler CPLSetErrorHandlerEx2( CPLErrorHandler 
> pfnErrorHandlerNew,
> void* pUserData, void** ppOldUserData )
>
> to do that.
>
> But as you mention threads that might compete to set an error handler, 
> using CPLSetErrorHandlerEx() is probably not the best strategy. You'd 
> be better with CPLPushErrorHandler() / CPLPopErrorHandler() that only 
> affects the current thread.
>
> Even
> Le 12/09/2021 ? 16:03, Rajsekar Manokaran a ?crit :
>
> Hi,
>
> In the gdal rust bindings (https://github.com/georust/gdal), we're 
> trying to facilitate the use of CPLSetErrorHandlerEx and related APIs.
> While setting a handler, we may pass a heap allocated data pointer to 
> the second argument, which is then read via the 
> CPLGetErrorHandlerUserData in the handler and passed to the user.
>
> However, while removing or setting another handler, we're unable to 
> find a race-free method to get the associated user data of the previous handler.
> This is needed to properly deallocate the memory.
>
> Is there an atomic way to get both the previous handler (as returned 
> by CPLSetErrorHandler), along with the associated user data?  The 
> issue with making two calls, is that another thread might make changes 
> in between the two calls.
>
> We could synchronize in our API, but it still has the same issue if 
> the user parallely used the C APIs directly or via a different interface.
>
> Relevant PR in rust gdal bindings:
> https://github.com/georust/gdal/pull/215
>
> -
> Regards
>
>

--
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210912/cef13953/attachment.html>

------------------------------

Subject: Digest Footer

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev


------------------------------

End of gdal-dev Digest, Vol 208, Issue 17
*****************************************

From sigeal at sigeal.com  Mon Feb 14 13:37:40 2022
From: sigeal at sigeal.com (=?UTF-8?Q?SIG=c3=a9al?=)
Date: Mon, 14 Feb 2022 22:37:40 +0100
Subject: [gdal-dev] Can't open postgrest service with ogr2ogr (via QGIS)
In-Reply-To: <275baf817c82465585b10671af0f87ce@maanmittauslaitos.fi>
References: <efeaa8db-acbd-d8c5-994f-598b10ef345d@sigeal.com>
 <275baf817c82465585b10671af0f87ce@maanmittauslaitos.fi>
Message-ID: <c030a0ce-86df-ecf4-693f-0d058e060393@sigeal.com>

Thanks for your answer.

The url works fine in a browser.

Here is what "ogrinfo --debug on" returns :
> GDAL: Auto register C:\Program Files\QGIS 
> 3.16.16\bin\gdalplugins\gdal_ECW_JP2ECW.dll using GDALRegister_ECW_JP2ECW.
> GDAL: Auto register C:\Program Files\QGIS 
> 3.16.16\bin\gdalplugins\gdal_GEOR.dll using GDALRegister_GEOR.
> GDAL: Auto register C:\Program Files\QGIS 
> 3.16.16\bin\gdalplugins\gdal_HDF5.dll using GDALRegister_HDF5.
> GDAL: Auto register C:\Program Files\QGIS 
> 3.16.16\bin\gdalplugins\gdal_MG4Lidar.dll using GDALRegister_MG4Lidar.
> GDAL: Auto register C:\Program Files\QGIS 
> 3.16.16\bin\gdalplugins\gdal_MrSID.dll using GDALRegister_MrSID.
> GDAL: Auto register C:\Program Files\QGIS 
> 3.16.16\bin\gdalplugins\ogr_OCI.dll using RegisterOGROCI.
> GDAL: Auto register C:\Program Files\QGIS 
> 3.16.16\bin\gdalplugins\ogr_SOSI.dll using RegisterOGRSOSI.
> HTTP: Fetch(http://mydomain:3000/rpc/wod_geojson.json)
> HTTP: libcurl/7.75.0 OpenSSL/1.1.1l zlib/1.2.11 WinIDN
> HTTP: These HTTP headers were set: Accept: text/plain, application/json
> ERROR 1: HTTP error code : 404
> HTTP: Fetch(http://mydomain:3000/rpc/wod_geojson.json)
> HTTP: These HTTP headers were set: Accept: text/plain, application/json
> ERROR 1: HTTP error code : 404
> FAILURE:
> Unable to open datasource 
> `http://sigeal.net:3000/rpc/wod_geojson.json' with the following 
> drivers...

Weird

-- 
Christophe Damour

Le 14/02/2022 ? 20:26, Rahkonen Jukka (MML) a ?crit?:
>
> Hi,
>
> Does http://mydomain:3000/rpc/wod_geojson.json return data if you send 
> it with browser?? Re-run the ogrinfo command with ?--debug on? and see 
> if you can capture the http requests that ogrinfo sends.
>
> -Jukka Rahkonen-
>
> *L?hett?j?:*gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *SIG?al
> *L?hetetty:* maanantai 14. helmikuuta 2022 20.54
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* [gdal-dev] Can't open postgrest service with ogr2ogr (via QGIS)
>
> Hi list,
>
> I have a PostgreSql stored procedure which returns a geojson feature 
> collection created with json_build_object function. This web service 
> opens fine in OpenLayers, however, when I try to open it in QGIS, with 
> data source manager -> vector -> protocol -> geojson.
>
> A similar REST service served with pg_featureserv, works well...
>
>
>       Here are tests realised with curl and ogrinfo for failing
>       postgrest service and working pg_featureserv services :
>
>
>         PostGrest
>
>
>           curl answer :
>
> |StatusCode??????? : 200|
> |StatusDescription : OK|
> |Content?????????? : {123, 34, 116, 121...}|
> |RawContent??????? : HTTP/1.1 200 OK|
> |??????????????????? Transfer-Encoding: chunked|
> |??????????????????? Content-Range: 0-0/*|
> |???????????? ???????Vary: Accept-Encoding|
> |??????????????????? Content-Type: application/geo+json|
> |??????????????????? Date: Sun, 13 Feb 2022 07:35:55 GMT|
> |??????????????????? Server: postgrest/9.0.0|
> ||
> |????????????????????{"type" : ...|
> |Headers????????? ?: {[Transfer-Encoding, chunked], [Content-Range, 
> 0-0/*], [Vary, Accept-Encoding], [Content-Type, |
> |????????????????????application/geo+json]...}|
> |RawContentLength? : 430979|
>
>
>           ogrinfo answer :
>
> |ERROR 1: HTTP error code : 404|
> |ERROR 1: HTTP error code : 404|
> |FAILURE:|
> |Unable to open datasource `http://mydomain:3000/rpc/wod_geojson.json' 
> with the following drivers...|
>
>
>         pg_featureserv
>
>
>           curl answer :
>
> |StatusCode??????? : 200|
> |StatusDescription : OK|
> |Content?????????? : {123, 34, 116, 121...}|
> |RawContent??????? : HTTP/1.1 200 OK|
> |??????????????????? Transfer-Encoding: chunked|
> |??????????????????? Content-Type: application/geo+json|
> |??????????????????? Date: Sun, 13 Feb 2022 07:33:51 GMT|
> ||
> |????????????????????{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Po...|
> |Headers?????????? : {[Transfer-Encoding, chunked], [Content-Type, 
> application/geo+json], [Date, Sun, 13 Feb 2022 |
> |????????????????????07:33:51 GMT]}|
> |RawContentLength? : 4474|
>
>
>           ogrinfo answer :
>
> |INFO: Open of 
> `http://mydomain:9000/functions/webmapod_mdarret/items.json'|
> |????? using driver `GeoJSON' successful.|
> |1: items (Point)|
>
> What could explain that 404 error for posgrest geojson web service ?
>
> Thanks for any hint,
>
> -- 
> Christophe Damour
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220214/f03e444f/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Feb 14 23:46:40 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Tue, 15 Feb 2022 07:46:40 +0000
Subject: [gdal-dev] Can't open postgrest service with ogr2ogr (via QGIS)
In-Reply-To: <c030a0ce-86df-ecf4-693f-0d058e060393@sigeal.com>
References: <efeaa8db-acbd-d8c5-994f-598b10ef345d@sigeal.com>
 <275baf817c82465585b10671af0f87ce@maanmittauslaitos.fi>
 <c030a0ce-86df-ecf4-693f-0d058e060393@sigeal.com>
Message-ID: <382ff75e57654d9aa9d9962e23b41f34@maanmittauslaitos.fi>

Hi,

I wonder if there could be something in the Accept headers that orginfo is using.  Ogrinfo seems to set headers ?Accept: text/plain, application/json? but GeoJSON is now officially ?application/geo+json?. I do not know the hierarchy of the MIME types and if ?json? should include also the subtype ?geo+json?.

I made a test with ogrinfo and  --config GDAL_HTTP_HEADER_FILE my_headers.txt. After this I could see from the logs this

Accept: application/geo+json
Accept: text/plain, application/json

By https://datatracker.ietf.org/doc/html/rfc2616/ I suppose this is correct and http server should concatenate Accept headers. However, the test was not successful so maybe there is something else going wrong.

-Jukka Rahkonen-


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220215/5c5e503f/attachment.html>

From sigeal at sigeal.com  Tue Feb 15 01:38:31 2022
From: sigeal at sigeal.com (=?UTF-8?Q?SIG=c3=a9al?=)
Date: Tue, 15 Feb 2022 10:38:31 +0100
Subject: [gdal-dev] Can't open postgrest service with ogr2ogr (via QGIS)
In-Reply-To: <382ff75e57654d9aa9d9962e23b41f34@maanmittauslaitos.fi>
References: <efeaa8db-acbd-d8c5-994f-598b10ef345d@sigeal.com>
 <275baf817c82465585b10671af0f87ce@maanmittauslaitos.fi>
 <c030a0ce-86df-ecf4-693f-0d058e060393@sigeal.com>
 <382ff75e57654d9aa9d9962e23b41f34@maanmittauslaitos.fi>
Message-ID: <8109be5d-6539-b758-aad7-81c601da3f51@sigeal.com>

I managed to have ogrinfo working by adding "Accept: application/json" 
header using GDAL_HTTP_HEADER_FILE.

Now the problem is I can't do that with QGIS...

-- 
Christophe Damour

Le 15/02/2022 ? 08:46, Rahkonen Jukka (MML) a ?crit?:
>
> Hi,
>
> I wonder if there could be something in the Accept headers that 
> orginfo is using. ?Ogrinfo seems to set headers ?Accept: text/plain, 
> application/json? but GeoJSON is now officially 
> ?application/geo+json?. I do not know the hierarchy of the MIME types 
> and if ?json? should include also the subtype ?geo+json?.
>
> I made a test with ogrinfo and ?--config GDAL_HTTP_HEADER_FILE 
> my_headers.txt. After this I could see from the logs this
>
> Accept: application/geo+json
>
> Accept: text/plain, application/json
>
> By https://datatracker.ietf.org/doc/html/rfc2616/ I suppose this is 
> correct and http server should concatenate Accept headers. However, 
> the test was not successful so maybe there is something else going wrong.
>
> -Jukka Rahkonen-
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220215/34014b54/attachment.html>

From sigeal at sigeal.com  Tue Feb 15 02:18:06 2022
From: sigeal at sigeal.com (=?UTF-8?Q?SIG=c3=a9al?=)
Date: Tue, 15 Feb 2022 11:18:06 +0100
Subject: [gdal-dev] Can't open postgrest service with ogr2ogr (via QGIS)
In-Reply-To: <8109be5d-6539-b758-aad7-81c601da3f51@sigeal.com>
References: <efeaa8db-acbd-d8c5-994f-598b10ef345d@sigeal.com>
 <275baf817c82465585b10671af0f87ce@maanmittauslaitos.fi>
 <c030a0ce-86df-ecf4-693f-0d058e060393@sigeal.com>
 <382ff75e57654d9aa9d9962e23b41f34@maanmittauslaitos.fi>
 <8109be5d-6539-b758-aad7-81c601da3f51@sigeal.com>
Message-ID: <924808e7-f277-eaf8-11c7-09dcaa2a70a3@sigeal.com>

And I finally discovered that I can load my geojson webservice in QGIS 
from Python :

myLayer= QgsVectorLayer('http://mydomain:3000/rpc/wod_geojson, 
'myLayer', 'ogr')
QgsProject.instance().addMapLayers([myLayer])

But still not from QGIS UI...

-- 
Christophe Damour

Le 15/02/2022 ? 10:38, SIG?al a ?crit?:
> I managed to have ogrinfo working by adding "Accept: application/json" 
> header using GDAL_HTTP_HEADER_FILE.
>
> Now the problem is I can't do that with QGIS...
>
> -- 
> Christophe Damour
> Le 15/02/2022 ? 08:46, Rahkonen Jukka (MML) a ?crit?:
>>
>> Hi,
>>
>> I wonder if there could be something in the Accept headers that 
>> orginfo is using. ?Ogrinfo seems to set headers ?Accept: text/plain, 
>> application/json? but GeoJSON is now officially 
>> ?application/geo+json?. I do not know the hierarchy of the MIME types 
>> and if ?json? should include also the subtype ?geo+json?.
>>
>> I made a test with ogrinfo and ?--config GDAL_HTTP_HEADER_FILE 
>> my_headers.txt. After this I could see from the logs this
>>
>> Accept: application/geo+json
>>
>> Accept: text/plain, application/json
>>
>> By https://datatracker.ietf.org/doc/html/rfc2616/ I suppose this is 
>> correct and http server should concatenate Accept headers. However, 
>> the test was not successful so maybe there is something else going wrong.
>>
>> -Jukka Rahkonen-
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220215/6fcce76a/attachment.html>

From howard at hobu.co  Tue Feb 15 07:37:37 2022
From: howard at hobu.co (Howard Butler)
Date: Tue, 15 Feb 2022 09:37:37 -0600
Subject: [gdal-dev] GEOS Maintenance Grant
Message-ID: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>

GDAL PSC,

When we wrote the GDAL RFCs on sponsorship, we provided an escape clause to allow us to direct resources to other projects upon which GDAL depends. Our sponsorship numbers are still increasing, which provides us an opportunity to directly support some of those projects, and one of them is obviously GEOS. GEOS provides all of the geometry algebra support for GDAL/OGR and many other open source geospatial softwares including Shapely, PostGIS, GeoPandas, MapServer, and more. 

Dan Baston of the GEOS PSC has been identified as the developer with capacity and interest in the next year to take on GEOS development on APIs and performance, which he has a long history of doing for the project. This support should allow him to work longer, multi-release upgrades that will provide strong performance and convenience benefits for the project.

I motion to provide the GEOS PSC with a $50,000 USD grant to address performance, API, and other work that does not attract directed funding in GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates, and development timelines. Howard Butler or Even Rouault of the GDAL NumFocus liaison team will coordinate dispersement as directed by the GEOS PSC and NumFocus rules.

Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html who have made this kind of grant possible. A better GEOS makes for a better GDAL.

Howard


From lr at pcorp.us  Tue Feb 15 10:11:12 2022
From: lr at pcorp.us (Regina Obe)
Date: Tue, 15 Feb 2022 13:11:12 -0500
Subject: [gdal-dev] [geos-devel] GEOS Maintenance Grant
In-Reply-To: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
Message-ID: <001501d82297$6b0addf0$412099d0$@pcorp.us>

GEOS PSC +1

> -----Original Message-----
> From: geos-devel [mailto:geos-devel-bounces at lists.osgeo.org] On Behalf Of
> Howard Butler
> Sent: Tuesday, February 15, 2022 10:38 AM
> To: gdal dev <gdal-dev at lists.osgeo.org>
> Cc: GEOS Development List <geos-devel at lists.osgeo.org>
> Subject: [geos-devel] GEOS Maintenance Grant
> 
> GDAL PSC,
> 
> When we wrote the GDAL RFCs on sponsorship, we provided an escape
> clause to allow us to direct resources to other projects upon which GDAL
> depends. Our sponsorship numbers are still increasing, which provides us
an
> opportunity to directly support some of those projects, and one of them is
> obviously GEOS. GEOS provides all of the geometry algebra support for
> GDAL/OGR and many other open source geospatial softwares including
> Shapely, PostGIS, GeoPandas, MapServer, and more.
> 
> Dan Baston of the GEOS PSC has been identified as the developer with
> capacity and interest in the next year to take on GEOS development on APIs
> and performance, which he has a long history of doing for the project.
This
> support should allow him to work longer, multi-release upgrades that will
> provide strong performance and convenience benefits for the project.
> 
> I motion to provide the GEOS PSC with a $50,000 USD grant to address
> performance, API, and other work that does not attract directed funding in
> GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates,
> and development timelines. Howard Butler or Even Rouault of the GDAL
> NumFocus liaison team will coordinate dispersement as directed by the
> GEOS PSC and NumFocus rules.
> 
> Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html
> who have made this kind of grant possible. A better GEOS makes for a
better
> GDAL.
> 
> Howard
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel


From pramsey at cleverelephant.ca  Tue Feb 15 10:29:07 2022
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Tue, 15 Feb 2022 10:29:07 -0800
Subject: [gdal-dev] [geos-devel] GEOS Maintenance Grant
In-Reply-To: <001501d82297$6b0addf0$412099d0$@pcorp.us>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
 <001501d82297$6b0addf0$412099d0$@pcorp.us>
Message-ID: <4EFC85D0-DED7-46CF-8AC7-38DB29687F5D@cleverelephant.ca>

+1, sounds wonderful. I'm willing to be the liason to the GDAL / NumFocus administrators for this work.

P

> On Feb 15, 2022, at 10:11 AM, Regina Obe <lr at pcorp.us> wrote:
> 
> GEOS PSC +1
> 
>> -----Original Message-----
>> From: geos-devel [mailto:geos-devel-bounces at lists.osgeo.org] On Behalf Of
>> Howard Butler
>> Sent: Tuesday, February 15, 2022 10:38 AM
>> To: gdal dev <gdal-dev at lists.osgeo.org>
>> Cc: GEOS Development List <geos-devel at lists.osgeo.org>
>> Subject: [geos-devel] GEOS Maintenance Grant
>> 
>> GDAL PSC,
>> 
>> When we wrote the GDAL RFCs on sponsorship, we provided an escape
>> clause to allow us to direct resources to other projects upon which GDAL
>> depends. Our sponsorship numbers are still increasing, which provides us
> an
>> opportunity to directly support some of those projects, and one of them is
>> obviously GEOS. GEOS provides all of the geometry algebra support for
>> GDAL/OGR and many other open source geospatial softwares including
>> Shapely, PostGIS, GeoPandas, MapServer, and more.
>> 
>> Dan Baston of the GEOS PSC has been identified as the developer with
>> capacity and interest in the next year to take on GEOS development on APIs
>> and performance, which he has a long history of doing for the project.
> This
>> support should allow him to work longer, multi-release upgrades that will
>> provide strong performance and convenience benefits for the project.
>> 
>> I motion to provide the GEOS PSC with a $50,000 USD grant to address
>> performance, API, and other work that does not attract directed funding in
>> GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates,
>> and development timelines. Howard Butler or Even Rouault of the GDAL
>> NumFocus liaison team will coordinate dispersement as directed by the
>> GEOS PSC and NumFocus rules.
>> 
>> Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html
>> who have made this kind of grant possible. A better GEOS makes for a
> better
>> GDAL.
>> 
>> Howard
>> 
>> _______________________________________________
>> geos-devel mailing list
>> geos-devel at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/geos-devel
> 
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel


From mateusz at loskot.net  Tue Feb 15 10:45:11 2022
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 15 Feb 2022 19:45:11 +0100
Subject: [gdal-dev] [geos-devel] GEOS Maintenance Grant
In-Reply-To: <001501d82297$6b0addf0$412099d0$@pcorp.us>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
 <001501d82297$6b0addf0$412099d0$@pcorp.us>
Message-ID: <CABUeae-r-jS0zj-aZAYUiqwipdm98KRmvFErOvDC1XPYycMQCQ@mail.gmail.com>

+1 from GDAL PSC member

Mateusz

On Tue, 15 Feb 2022 at 19:11, Regina Obe <lr at pcorp.us> wrote:
>
> GEOS PSC +1
>
> > -----Original Message-----
> > From: geos-devel [mailto:geos-devel-bounces at lists.osgeo.org] On Behalf Of
> > Howard Butler
> > Sent: Tuesday, February 15, 2022 10:38 AM
> > To: gdal dev <gdal-dev at lists.osgeo.org>
> > Cc: GEOS Development List <geos-devel at lists.osgeo.org>
> > Subject: [geos-devel] GEOS Maintenance Grant
> >
> > GDAL PSC,
> >
> > When we wrote the GDAL RFCs on sponsorship, we provided an escape
> > clause to allow us to direct resources to other projects upon which GDAL
> > depends. Our sponsorship numbers are still increasing, which provides us
> an
> > opportunity to directly support some of those projects, and one of them is
> > obviously GEOS. GEOS provides all of the geometry algebra support for
> > GDAL/OGR and many other open source geospatial softwares including
> > Shapely, PostGIS, GeoPandas, MapServer, and more.
> >
> > Dan Baston of the GEOS PSC has been identified as the developer with
> > capacity and interest in the next year to take on GEOS development on APIs
> > and performance, which he has a long history of doing for the project.
> This
> > support should allow him to work longer, multi-release upgrades that will
> > provide strong performance and convenience benefits for the project.
> >
> > I motion to provide the GEOS PSC with a $50,000 USD grant to address
> > performance, API, and other work that does not attract directed funding in
> > GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates,
> > and development timelines. Howard Butler or Even Rouault of the GDAL
> > NumFocus liaison team will coordinate dispersement as directed by the
> > GEOS PSC and NumFocus rules.
> >
> > Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html
> > who have made this kind of grant possible. A better GEOS makes for a
> better
> > GDAL.
> >
> > Howard
> >
> > _______________________________________________
> > geos-devel mailing list
> > geos-devel at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/geos-devel
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Tue Feb 15 10:49:13 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Feb 2022 19:49:13 +0100
Subject: [gdal-dev] GEOS Maintenance Grant
In-Reply-To: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
Message-ID: <d4592dcc-5949-808a-d85c-c77c3827fc13@spatialys.com>


> I motion to provide the GEOS PSC with a $50,000 USD grant to address performance, API, and other work that does not attract directed funding in GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates, and development timelines. Howard Butler or Even Rouault of the GDAL NumFocus liaison team will coordinate dispersement as directed by the GEOS PSC and NumFocus rules.
+1 Even
>
> Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html who have made this kind of grant possible. A better GEOS makes for a better GDAL.
>
> Howard
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From dmorissette at mapgears.com  Tue Feb 15 10:50:18 2022
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 15 Feb 2022 13:50:18 -0500
Subject: [gdal-dev] GEOS Maintenance Grant
In-Reply-To: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
Message-ID: <600e9793-4a34-a3b0-0410-a549f436626f@mapgears.com>

+1

Daniel


On 2022-02-15 10:37, Howard Butler wrote:
> GDAL PSC,
> 
> When we wrote the GDAL RFCs on sponsorship, we provided an escape clause to allow us to direct resources to other projects upon which GDAL depends. Our sponsorship numbers are still increasing, which provides us an opportunity to directly support some of those projects, and one of them is obviously GEOS. GEOS provides all of the geometry algebra support for GDAL/OGR and many other open source geospatial softwares including Shapely, PostGIS, GeoPandas, MapServer, and more.
> 
> Dan Baston of the GEOS PSC has been identified as the developer with capacity and interest in the next year to take on GEOS development on APIs and performance, which he has a long history of doing for the project. This support should allow him to work longer, multi-release upgrades that will provide strong performance and convenience benefits for the project.
> 
> I motion to provide the GEOS PSC with a $50,000 USD grant to address performance, API, and other work that does not attract directed funding in GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates, and development timelines. Howard Butler or Even Rouault of the GDAL NumFocus liaison team will coordinate dispersement as directed by the GEOS PSC and NumFocus rules.
> 
> Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html who have made this kind of grant possible. A better GEOS makes for a better GDAL.
> 
> Howard
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From norman.barker at gmail.com  Tue Feb 15 10:55:18 2022
From: norman.barker at gmail.com (Norman Barker)
Date: Tue, 15 Feb 2022 12:55:18 -0600
Subject: [gdal-dev] GEOS Maintenance Grant
In-Reply-To: <600e9793-4a34-a3b0-0410-a549f436626f@mapgears.com>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
 <600e9793-4a34-a3b0-0410-a549f436626f@mapgears.com>
Message-ID: <CAN_Dn-ELH3uArfVfXPLQ9zAVM-nK8VXQtipaRbsD8x1mUq41tg@mail.gmail.com>

+1

Norman

On Tue, Feb 15, 2022 at 12:50 PM Daniel Morissette <dmorissette at mapgears.com>
wrote:

> +1
>
> Daniel
>
>
> On 2022-02-15 10:37, Howard Butler wrote:
> > GDAL PSC,
> >
> > When we wrote the GDAL RFCs on sponsorship, we provided an escape clause
> to allow us to direct resources to other projects upon which GDAL depends.
> Our sponsorship numbers are still increasing, which provides us an
> opportunity to directly support some of those projects, and one of them is
> obviously GEOS. GEOS provides all of the geometry algebra support for
> GDAL/OGR and many other open source geospatial softwares including Shapely,
> PostGIS, GeoPandas, MapServer, and more.
> >
> > Dan Baston of the GEOS PSC has been identified as the developer with
> capacity and interest in the next year to take on GEOS development on APIs
> and performance, which he has a long history of doing for the project. This
> support should allow him to work longer, multi-release upgrades that will
> provide strong performance and convenience benefits for the project.
> >
> > I motion to provide the GEOS PSC with a $50,000 USD grant to address
> performance, API, and other work that does not attract directed funding in
> GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates,
> and development timelines. Howard Butler or Even Rouault of the GDAL
> NumFocus liaison team will coordinate dispersement as directed by the GEOS
> PSC and NumFocus rules.
> >
> > Thank you again to the GDAL Sponsors
> https://gdal.org/sponsors/index.html who have made this kind of grant
> possible. A better GEOS makes for a better GDAL.
> >
> > Howard
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> --
> Daniel Morissette
> Mapgears Inc
> T: +1 418-696-5056 #201
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220215/8908fd39/attachment-0001.html>

From szekerest at gmail.com  Tue Feb 15 11:25:17 2022
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 15 Feb 2022 20:25:17 +0100
Subject: [gdal-dev] [geos-devel] GEOS Maintenance Grant
In-Reply-To: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
Message-ID: <CACALY+QXzoY+HHJT0yCOMULGFe1G4g54eB5Xbfyap0=XyRhtig@mail.gmail.com>

+1

Tamas

Howard Butler <howard at hobu.co> ezt ?rta (id?pont: 2022. febr. 15., K,
16:37):

> GDAL PSC,
>
> When we wrote the GDAL RFCs on sponsorship, we provided an escape clause
> to allow us to direct resources to other projects upon which GDAL depends.
> Our sponsorship numbers are still increasing, which provides us an
> opportunity to directly support some of those projects, and one of them is
> obviously GEOS. GEOS provides all of the geometry algebra support for
> GDAL/OGR and many other open source geospatial softwares including Shapely,
> PostGIS, GeoPandas, MapServer, and more.
>
> Dan Baston of the GEOS PSC has been identified as the developer with
> capacity and interest in the next year to take on GEOS development on APIs
> and performance, which he has a long history of doing for the project. This
> support should allow him to work longer, multi-release upgrades that will
> provide strong performance and convenience benefits for the project.
>
> I motion to provide the GEOS PSC with a $50,000 USD grant to address
> performance, API, and other work that does not attract directed funding in
> GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates,
> and development timelines. Howard Butler or Even Rouault of the GDAL
> NumFocus liaison team will coordinate dispersement as directed by the GEOS
> PSC and NumFocus rules.
>
> Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html
> who have made this kind of grant possible. A better GEOS makes for a better
> GDAL.
>
> Howard
>
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220215/8361f333/attachment.html>

From schwehr at gmail.com  Tue Feb 15 11:46:23 2022
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 15 Feb 2022 11:46:23 -0800
Subject: [gdal-dev] GEOS Maintenance Grant
In-Reply-To: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
Message-ID: <CACmBxyt_LrRPT0nsyYOuwSM2Hf20b0Ue8qvwHAyjNZLWy+tBOw@mail.gmail.com>

+1 KurtS - GDAL PSC member

On Tue, Feb 15, 2022 at 7:38 AM Howard Butler <howard at hobu.co> wrote:

> GDAL PSC,
>
> When we wrote the GDAL RFCs on sponsorship, we provided an escape clause
> to allow us to direct resources to other projects upon which GDAL depends.
> Our sponsorship numbers are still increasing, which provides us an
> opportunity to directly support some of those projects, and one of them is
> obviously GEOS. GEOS provides all of the geometry algebra support for
> GDAL/OGR and many other open source geospatial softwares including Shapely,
> PostGIS, GeoPandas, MapServer, and more.
>
> Dan Baston of the GEOS PSC has been identified as the developer with
> capacity and interest in the next year to take on GEOS development on APIs
> and performance, which he has a long history of doing for the project. This
> support should allow him to work longer, multi-release upgrades that will
> provide strong performance and convenience benefits for the project.
>
> I motion to provide the GEOS PSC with a $50,000 USD grant to address
> performance, API, and other work that does not attract directed funding in
> GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates,
> and development timelines. Howard Butler or Even Rouault of the GDAL
> NumFocus liaison team will coordinate dispersement as directed by the GEOS
> PSC and NumFocus rules.
>
> Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html
> who have made this kind of grant possible. A better GEOS makes for a better
> GDAL.
>
> Howard
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220215/5a413e32/attachment.html>

From warmerdam at pobox.com  Tue Feb 15 12:26:38 2022
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 15 Feb 2022 15:26:38 -0500
Subject: [gdal-dev] GEOS Maintenance Grant
In-Reply-To: <CACmBxyt_LrRPT0nsyYOuwSM2Hf20b0Ue8qvwHAyjNZLWy+tBOw@mail.gmail.com>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
 <CACmBxyt_LrRPT0nsyYOuwSM2Hf20b0Ue8qvwHAyjNZLWy+tBOw@mail.gmail.com>
Message-ID: <CA+YzLBcps2fQuk1N5CL5wnsR=kX3W1WEy6dLm_zu8AXTPjJgOg@mail.gmail.com>

+1 FrankW

I'm very pleased as a GDAL PSC member and a sponsor who depends on the full
stack.

On Tue, Feb 15, 2022 at 2:46 PM Kurt Schwehr <schwehr at gmail.com> wrote:

> +1 KurtS - GDAL PSC member
>
> On Tue, Feb 15, 2022 at 7:38 AM Howard Butler <howard at hobu.co> wrote:
>
>> GDAL PSC,
>>
>> When we wrote the GDAL RFCs on sponsorship, we provided an escape clause
>> to allow us to direct resources to other projects upon which GDAL depends.
>> Our sponsorship numbers are still increasing, which provides us an
>> opportunity to directly support some of those projects, and one of them is
>> obviously GEOS. GEOS provides all of the geometry algebra support for
>> GDAL/OGR and many other open source geospatial softwares including Shapely,
>> PostGIS, GeoPandas, MapServer, and more.
>>
>> Dan Baston of the GEOS PSC has been identified as the developer with
>> capacity and interest in the next year to take on GEOS development on APIs
>> and performance, which he has a long history of doing for the project. This
>> support should allow him to work longer, multi-release upgrades that will
>> provide strong performance and convenience benefits for the project.
>>
>> I motion to provide the GEOS PSC with a $50,000 USD grant to address
>> performance, API, and other work that does not attract directed funding in
>> GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates,
>> and development timelines. Howard Butler or Even Rouault of the GDAL
>> NumFocus liaison team will coordinate dispersement as directed by the GEOS
>> PSC and NumFocus rules.
>>
>> Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html
>> who have made this kind of grant possible. A better GEOS makes for a better
>> GDAL.
>>
>> Howard
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220215/2ae8bada/attachment.html>

From andreaerdna at libero.it  Tue Feb 15 23:07:18 2022
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Wed, 16 Feb 2022 08:07:18 +0100
Subject: [gdal-dev] Strange (expected?) behaviour exporting multipart
 geometry to ESRI Shapefile format
Message-ID: <d5d5fe5a-edee-01aa-8bc5-3455f4199a0c@libero.it>

Hi GDAL devs,
trying find the root cause of a bug [1] reported in the QGIS GitHub 
repository, I've noticed a strange behaviour when a multipart geometry 
is exported to an ESRI Shapefile layer.

I've created a minimal GeoPackage layer file [2] which contains 1 
multipart polygon geometry (MultiPolygon) feature consisting of 3 parts.
The 3 parts are 3 clockwise polygons external rings.

The following command for such GeoPackage layer:
ogrinfo Polygon_3.gpkg Polygon_3 -geom=SUMMARY

reports:
OGRFeature(Polygon_3):0
 ? MULTIPOLYGON : 3 geometries:
POLYGON : 7 points
POLYGON : 9 points
POLYGON : 21 points

It seems to me something strange happens converting the GeoPackage layer 
to an ESRI Shapefile layer using e.g:
ogr2ogr -f "ESRI Shapefile" Polygon_3.shp Polygon_3.gpkg

ogrinfo for the resulting ESRI Shapefile layer reports:
OGRFeature(Polygon_3):0
 ? FID (Integer64) = 0
 ? MULTIPOLYGON : 2 geometries:
POLYGON : 9 points
POLYGON : 21 points, 1 inner rings (7 points)

That is, the 7 points part has been written in the Shapefile layer as a 
counter clockwise polygon and "attached" to the 21 points part (which 
remains a clockwise polygon external ring) as his inner ring. The 9 
points part remains a clockwise polygon external ring.

On the contrary, converting the GeoPackage layer to GML or FlatGeobuf or 
GeoJSON or Spatialite formats, the resulting layer correctly contains 1 
MultiPolygon feature consisting of 3 clockwise Polygon parts like the 
original layer and ogrinfo reports:
OGRFeature(Polygon_3):0
 ? MULTIPOLYGON : 3 geometries:
POLYGON : 7 points
POLYGON : 9 points
POLYGON : 21 points

I've checked the orientation of the polygons parts using QGIS 3.22.3 for 
all the layers and also ArcMap/ArcGIS 9.3.1 for the Shapefile layer.

QGIS reports 3 parts for the geometry in the GeoPackage, GML, 
FlatGeobuf, GeoJSON or Spatialite layers, while it reports 2 parts for 
the ESRI Shapefile layer.

Is this an expected behaviour of the ESRI Shapefile driver writing 
multipart features geometries?

Best regards.

Andrea Giudiceandrea

[1] https://github.com/qgis/QGIS/issues/47288
[2] https://drive.google.com/file/d/10HiCARTYJqhAXUckK43nU4MzV1wUbLg9

From even.rouault at spatialys.com  Wed Feb 16 03:24:31 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Feb 2022 12:24:31 +0100
Subject: [gdal-dev] Strange (expected?) behaviour exporting multipart
 geometry to ESRI Shapefile format
In-Reply-To: <d5d5fe5a-edee-01aa-8bc5-3455f4199a0c@libero.it>
References: <d5d5fe5a-edee-01aa-8bc5-3455f4199a0c@libero.it>
Message-ID: <cc2bc1b6-61ac-3691-430a-3cd83f1e540a@spatialys.com>

Andrea,

your [2] link contains the shapefile, not the GeoPackage file.

That said I've tried replicated using 
https://github.com/qgis/QGIS/files/8058606/Issue47288_Polygons_GPKG.zip 
from the QGIS ticket and converting it to shapefile. The issue here is 
that the original geometry is not (considered as) valid:

$ ogrinfo Issue47288_Polygons.gpkg -sql "select st_isvalid(geom) from 
Issue47288_Polygons" -al -q
GEOS warning: Self-intersection at or near point 352107.37400937825 
5662263.0605139844 54.963999999999999

Layer name: SELECT
OGRFeature(SELECT):0
 ? st_isvalid(geom) (Integer) = 0

When writing polygons to shapefile, the OGR shapefile driver takes all 
the rings of a (multi)polygons and detect which ones are inner rings of 
which outer rings, to apply the expected winding order of the shapefile 
specification. That analysis assumes that the geometries are valid, 
which simplifies (=speed up) the topological analysis. If they aren't, 
then the algorithm might produce "unexpected" results (but there's no 
real expected result when the geometry is not valid)

One possibility is to force the validity during the conversion, but this 
will cause one of the parts to be discarded:

ogr2ogr out2.shp Issue47288_Polygons.gpkg -sql? "select 
ExtractMultiPolygon(st_makevalid(geom)) as geom, * from 
Issue47288_Polygons" -dialect indirect_sqlite

Or you can use the SHAPE_REWIND_ON_WRITE configuration option mentioned 
at https://gdal.org/drivers/vector/shapefile.html#advanced-topics :

ogr2ogr out3.shp Issue47288_Polygons.gpkg --config SHAPE_REWIND_ON_WRITE OFF

This will keep the original geometry mostly untouched, possibly creating 
a non-conformant shapefile. And on the reading side, the OGR shapefile 
reader might also have issues reconstructing a single-feature geometry. 
On that particular case, it seems to produce the "expected" result

I think the gist of the issue is that we have here 3D geometries and 
that the algorithms in the shapefile driver or in GEOS that check 
validity ignore the Z dimension. Reading the OGC? Simple feature access 
- Part 1: Common architecture? spec 
(https://portal.ogc.org/files/?artifact_id=25355) , it is not entirely 
clear to me what the validity rules are for a multipolygon whose 
polygons are not co-planar

In ? 6.1.10.1 (Surface description) it i said that "A single such 
Surface patch in 3-dimensional space is isometric to planar Surfaces"

As far as I can see in this multipolygon, there are 2 issues: one of the 
part is repeated, and the 2 "small" rectangular polygons that share the 
352107.37400937825 5662263.0605139844 54.963999999999999 points are 
likely non-planar.

In ? 6.1.13.1 (MultiSurface description) it is also said that "The 
boundaries of any two coplanar elements in a MultiSurface may intersect, 
at most, at a finite number of Points", which seems to imply that the 
parts of a MultiSurface might be non coplanar.

AFAICS, the shapefile specification is silent on that aspect of validity 
rules regarding 3D geometries.

My inclination would be to consider that in the case where we have a 
multipolygon with non -coplanar parts we should probably be avoiding 
considering the ones that are non-coplanar are inner/outer rings of others.

I've ticketed that in https://github.com/OSGeo/gdal/issues/5315

Even

Le 16/02/2022 ? 08:07, Andrea Giudiceandrea via gdal-dev a ?crit?:
> Hi GDAL devs,
> trying find the root cause of a bug [1] reported in the QGIS GitHub 
> repository, I've noticed a strange behaviour when a multipart geometry 
> is exported to an ESRI Shapefile layer.
>
> I've created a minimal GeoPackage layer file [2] which contains 1 
> multipart polygon geometry (MultiPolygon) feature consisting of 3 parts.
> The 3 parts are 3 clockwise polygons external rings.
>
> The following command for such GeoPackage layer:
> ogrinfo Polygon_3.gpkg Polygon_3 -geom=SUMMARY
>
> reports:
> OGRFeature(Polygon_3):0
> ? MULTIPOLYGON : 3 geometries:
> POLYGON : 7 points
> POLYGON : 9 points
> POLYGON : 21 points
>
> It seems to me something strange happens converting the GeoPackage 
> layer to an ESRI Shapefile layer using e.g:
> ogr2ogr -f "ESRI Shapefile" Polygon_3.shp Polygon_3.gpkg
>
> ogrinfo for the resulting ESRI Shapefile layer reports:
> OGRFeature(Polygon_3):0
> ? FID (Integer64) = 0
> ? MULTIPOLYGON : 2 geometries:
> POLYGON : 9 points
> POLYGON : 21 points, 1 inner rings (7 points)
>
> That is, the 7 points part has been written in the Shapefile layer as 
> a counter clockwise polygon and "attached" to the 21 points part 
> (which remains a clockwise polygon external ring) as his inner ring. 
> The 9 points part remains a clockwise polygon external ring.
>
> On the contrary, converting the GeoPackage layer to GML or FlatGeobuf 
> or GeoJSON or Spatialite formats, the resulting layer correctly 
> contains 1 MultiPolygon feature consisting of 3 clockwise Polygon 
> parts like the original layer and ogrinfo reports:
> OGRFeature(Polygon_3):0
> ? MULTIPOLYGON : 3 geometries:
> POLYGON : 7 points
> POLYGON : 9 points
> POLYGON : 21 points
>
> I've checked the orientation of the polygons parts using QGIS 3.22.3 
> for all the layers and also ArcMap/ArcGIS 9.3.1 for the Shapefile layer.
>
> QGIS reports 3 parts for the geometry in the GeoPackage, GML, 
> FlatGeobuf, GeoJSON or Spatialite layers, while it reports 2 parts for 
> the ESRI Shapefile layer.
>
> Is this an expected behaviour of the ESRI Shapefile driver writing 
> multipart features geometries?
>
> Best regards.
>
> Andrea Giudiceandrea
>
> [1] https://github.com/qgis/QGIS/issues/47288
> [2] https://drive.google.com/file/d/10HiCARTYJqhAXUckK43nU4MzV1wUbLg9
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From andreaerdna at libero.it  Wed Feb 16 04:24:21 2022
From: andreaerdna at libero.it (Andrea Giudiceandrea)
Date: Wed, 16 Feb 2022 13:24:21 +0100
Subject: [gdal-dev] Strange (expected?) behaviour exporting multipart
 geometry to ESRI Shapefile format
In-Reply-To: <cc2bc1b6-61ac-3691-430a-3cd83f1e540a@spatialys.com>
References: <d5d5fe5a-edee-01aa-8bc5-3455f4199a0c@libero.it>
 <cc2bc1b6-61ac-3691-430a-3cd83f1e540a@spatialys.com>
Message-ID: <82b348e7-c4b0-2617-5d40-93411a9de062@libero.it>

Il 16/02/2022 12:24, Even Rouault ha scritto:
> your [2] link contains the shapefile, not the GeoPackage file.

Hi Even,
yes, you are right. The correct URL for the GeoPackage layer is 
https://drive.google.com/file/d/1DMMbFQ922d_ccS00JIt0KaojGk6jMorb

> Or you can use the SHAPE_REWIND_ON_WRITE configuration option 
> mentioned at 
> https://gdal.org/drivers/vector/shapefile.html#advanced-topics :
>
> ogr2ogr out3.shp Issue47288_Polygons.gpkg --config 
> SHAPE_REWIND_ON_WRITE OFF
>
> This will keep the original geometry mostly untouched, possibly 
> creating a non-conformant shapefile. And on the reading side, the OGR 
> shapefile reader might also have issues reconstructing a 
> single-feature geometry. On that particular case, it seems to produce 
> the "expected" result

Yes, exporting to Shapefile with this option, the visualization issue in 
QGIS doesn't occur in this case and the parts maintain their 
winding/orientation.

Thanks for the insight about the issue and on how the driver works under 
the hood and deal with the (not always clear) specification.

> My inclination would be to consider that in the case where we have a 
> multipolygon with non -coplanar parts we should probably be avoiding 
> considering the ones that are non-coplanar are inner/outer rings of 
> others.
>
> I've ticketed that in https://github.com/OSGeo/gdal/issues/5315

Thank you again.

Best regards.

Andrea

From strk at kbt.io  Wed Feb 16 05:18:51 2022
From: strk at kbt.io (Sandro Santilli)
Date: Wed, 16 Feb 2022 14:18:51 +0100
Subject: [gdal-dev] [geos-devel] GEOS Maintenance Grant
In-Reply-To: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
Message-ID: <Ygz5u/AvDTZNZJuC@c19>

+1 from a GEOS PSC member --strk;

On Tue, Feb 15, 2022 at 09:37:37AM -0600, Howard Butler wrote:
> GDAL PSC,
> 
> When we wrote the GDAL RFCs on sponsorship, we provided an escape clause to allow us to direct resources to other projects upon which GDAL depends. Our sponsorship numbers are still increasing, which provides us an opportunity to directly support some of those projects, and one of them is obviously GEOS. GEOS provides all of the geometry algebra support for GDAL/OGR and many other open source geospatial softwares including Shapely, PostGIS, GeoPandas, MapServer, and more. 
> 
> Dan Baston of the GEOS PSC has been identified as the developer with capacity and interest in the next year to take on GEOS development on APIs and performance, which he has a long history of doing for the project. This support should allow him to work longer, multi-release upgrades that will provide strong performance and convenience benefits for the project.
> 
> I motion to provide the GEOS PSC with a $50,000 USD grant to address performance, API, and other work that does not attract directed funding in GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates, and development timelines. Howard Butler or Even Rouault of the GDAL NumFocus liaison team will coordinate dispersement as directed by the GEOS PSC and NumFocus rules.
> 
> Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html who have made this kind of grant possible. A better GEOS makes for a better GDAL.
> 
> Howard

From loridigia at gmail.com  Wed Feb 16 06:22:26 2022
From: loridigia at gmail.com (Lorenzo Di Giacomo)
Date: Wed, 16 Feb 2022 15:22:26 +0100
Subject: [gdal-dev] Overcome Tiff limitation 32 KB
Message-ID: <CAERmyNTC4wYXbsOi4iDf-N2Zgx1vpNsJmPfqD6atBtSzct7H4A@mail.gmail.com>

Hi devs, with the gdal 3.4.x is there a way to overcome the limitation of
having more than 32KB of metadata in a GeoTiff file (aka using a different
writing method for TIFF)? Thanks all!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220216/26b68573/attachment-0001.html>

From even.rouault at spatialys.com  Wed Feb 16 06:29:08 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Feb 2022 15:29:08 +0100
Subject: [gdal-dev] Overcome Tiff limitation 32 KB
In-Reply-To: <CAERmyNTC4wYXbsOi4iDf-N2Zgx1vpNsJmPfqD6atBtSzct7H4A@mail.gmail.com>
References: <CAERmyNTC4wYXbsOi4iDf-N2Zgx1vpNsJmPfqD6atBtSzct7H4A@mail.gmail.com>
Message-ID: <48113b64-ffa7-3c58-543d-0c078494b851@spatialys.com>


Le 16/02/2022 ? 15:22, Lorenzo Di Giacomo a ?crit?:
> Hi devs, with the gdal 3.4.x is there a way to overcome the limitation 
> of having more than 32KB of metadata in a GeoTiff file (aka using a 
> different writing method for TIFF)? Thanks all!
No, this is ticketed in https://github.com/OSGeo/gdal/issues/4116. I'll 
look at that soon
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From loridigia at gmail.com  Wed Feb 16 06:30:47 2022
From: loridigia at gmail.com (Lorenzo Di Giacomo)
Date: Wed, 16 Feb 2022 15:30:47 +0100
Subject: [gdal-dev] Overcome Tiff limitation 32 KB
In-Reply-To: <48113b64-ffa7-3c58-543d-0c078494b851@spatialys.com>
References: <CAERmyNTC4wYXbsOi4iDf-N2Zgx1vpNsJmPfqD6atBtSzct7H4A@mail.gmail.com>
 <48113b64-ffa7-3c58-543d-0c078494b851@spatialys.com>
Message-ID: <CAERmyNTd7EZaLf-Cs7Xq=K6QkzSHNBBgRJEgd2jTZ27NvLAjew@mail.gmail.com>

Great, thanks!

Il giorno mer 16 feb 2022 alle ore 15:29 Even Rouault <
even.rouault at spatialys.com> ha scritto:

>
> Le 16/02/2022 ? 15:22, Lorenzo Di Giacomo a ?crit :
> > Hi devs, with the gdal 3.4.x is there a way to overcome the limitation
> > of having more than 32KB of metadata in a GeoTiff file (aka using a
> > different writing method for TIFF)? Thanks all!
> No, this is ticketed in https://github.com/OSGeo/gdal/issues/4116. I'll
> look at that soon
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220216/c276fd49/attachment.html>

From sean.gillies at gmail.com  Wed Feb 16 07:49:27 2022
From: sean.gillies at gmail.com (Sean Gillies)
Date: Wed, 16 Feb 2022 08:49:27 -0700
Subject: [gdal-dev] [geos-devel] GEOS Maintenance Grant
In-Reply-To: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
Message-ID: <CAOodmJqf1+bh5if-Lx5xcCGWYwWSBZQFde=G-0KpeW9LmkiRSQ@mail.gmail.com>

Howard,

I'm in favor, but first I'd like to see the GEOS project adopt a code of
conduct. Sponsors look for one these days, right? It's probably a good move
for GEOS in the long run.

On Tue, Feb 15, 2022 at 8:37 AM Howard Butler <howard at hobu.co> wrote:

> GDAL PSC,
>
> When we wrote the GDAL RFCs on sponsorship, we provided an escape clause
> to allow us to direct resources to other projects upon which GDAL depends.
> Our sponsorship numbers are still increasing, which provides us an
> opportunity to directly support some of those projects, and one of them is
> obviously GEOS. GEOS provides all of the geometry algebra support for
> GDAL/OGR and many other open source geospatial softwares including Shapely,
> PostGIS, GeoPandas, MapServer, and more.
>
> Dan Baston of the GEOS PSC has been identified as the developer with
> capacity and interest in the next year to take on GEOS development on APIs
> and performance, which he has a long history of doing for the project. This
> support should allow him to work longer, multi-release upgrades that will
> provide strong performance and convenience benefits for the project.
>
> I motion to provide the GEOS PSC with a $50,000 USD grant to address
> performance, API, and other work that does not attract directed funding in
> GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates,
> and development timelines. Howard Butler or Even Rouault of the GDAL
> NumFocus liaison team will coordinate dispersement as directed by the GEOS
> PSC and NumFocus rules.
>
> Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html
> who have made this kind of grant possible. A better GEOS makes for a better
> GDAL.
>
> Howard
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220216/8e4253b5/attachment.html>

From momtchil at momtchev.com  Wed Feb 16 08:02:04 2022
From: momtchil at momtchev.com (Momtchil Momtchev)
Date: Wed, 16 Feb 2022 17:02:04 +0100
Subject: [gdal-dev] gdal_calc.js
Message-ID: <0d88cd83-2186-b8c9-80d9-4d89c8a56b07@momtchev.com>

Hello,


Just a heads up that the JS bindings for GDAL now have an /ExprTk.js 
/plugin that comes with a stand-alone CLI alternative of /gdal_calc.py/ 
- /gdal_calc.js/.


While it is geared mostly towards the Node.js GDAL user and it lacks 
many of the features of /gdal_calc.py/, it has a number of interesting 
advantages for everyone who is using it for Earth sciences:

    * As Earth sciences datasets always have blank spots, when working
    with floating-point data types, it automatically converts /NoData/
    values to /NaN/ before applying the expression and then /NaN/ to
    /NoData/ when writing the output - so you don't have to handle it in
    any special way - any expression that uses at least one /NaN/ input
    automatically produces a /NaN/ output that gets written as /NoData/
    - and this is smart enough to let pass an unused input in an if/else
    statement

    * It is fully multithreaded, each input band and each output band
    run in separate threads, and the expression evaluation can even use
    fork to evaluate series of pixels in separate threads - though this
    requires very complex expressions to be of any use - /gdal_calc/ is
    mostly I/O bound

    * It supports both JS functions and /ExprTk.js/ expressions that
    allow for natural if/else expressions and complex control blocks

 ?? ???? * It can write multi-band files applying a separate expression 
on each band


https://www.npmjs.com/package/gdal-exprtk


-- 
Momtchil Momtchev<momtchil at momtchev.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220216/c729bba6/attachment.html>

From andrew at aitchison.me.uk  Wed Feb 16 08:09:28 2022
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Wed, 16 Feb 2022 16:09:28 +0000 (GMT)
Subject: [gdal-dev] Strange (expected?) behaviour exporting multipart
 geometry to ESRI Shapefile format
In-Reply-To: <cc2bc1b6-61ac-3691-430a-3cd83f1e540a@spatialys.com>
References: <d5d5fe5a-edee-01aa-8bc5-3455f4199a0c@libero.it>
 <cc2bc1b6-61ac-3691-430a-3cd83f1e540a@spatialys.com>
Message-ID: <28ab8eae-2ae2-ba49-ad69-f76f904a3fde@aitchison.me.uk>

On Wed, 16 Feb 2022, Even Rouault wrote:

> That said I've tried replicated using 
> https://github.com/qgis/QGIS/files/8058606/Issue47288_Polygons_GPKG.zip from 
> the QGIS ticket and converting it to shapefile. The issue here is that the 
> original geometry is not (considered as) valid:
>
> $ ogrinfo Issue47288_Polygons.gpkg -sql "select st_isvalid(geom) from 
> Issue47288_Polygons" -al -q
> GEOS warning: Self-intersection at or near point 352107.37400937825 
> 5662263.0605139844 54.963999999999999
>
> Layer name: SELECT
> OGRFeature(SELECT):0
> ? st_isvalid(geom) (Integer) = 0

> As far as I can see in this multipolygon, there are 2 issues: one of the part 
> is repeated, and the 2 "small" rectangular polygons that share the 
> 352107.37400937825 5662263.0605139844 54.963999999999999 points are likely 
> non-planar.

> My inclination would be to consider that in the case where we have a
> multipolygon with non -coplanar parts we should probably be avoiding
> considering the ones that are non-coplanar are inner/outer rings of
> others.
>
> I've ticketed that in https://github.com/OSGeo/gdal/issues/5315

IIUC, whether a polygon is planar depends upon the CRS, just as
transforming a straight line to another CRS may produce a non-straight
line.
If so, do we have to worry about this ?

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From even.rouault at spatialys.com  Wed Feb 16 08:46:10 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Feb 2022 17:46:10 +0100
Subject: [gdal-dev] GDAL COG random fringe on zoom levels
In-Reply-To: <a7442ef1-1f1b-6905-2c71-5e7fec1b4ca2@cubewerx.com>
References: <a7442ef1-1f1b-6905-2c71-5e7fec1b4ca2@cubewerx.com>
Message-ID: <753d57e9-4488-e5c6-5247-4ce9ee2e608a@spatialys.com>

Hi Craig,

fix queued in https://github.com/OSGeo/gdal/pull/5313

Even

Le 17/12/2021 ? 23:25, Craig Bruce a ?crit?:
> I tried to submit this issue on GitHub, but it wouldn't let me press 
> the Submit button and wouldn't tell me why not.
>
> ## Expected behavior and actual behavior.
>
> The generation of Cloud-Optimized GeoTIFF images sometimes includes an 
> fringe of random colors around the edge of opaque and transparent 
> pixels of the coarser zoom levels.
>
> The edge of a COG level with an alpha channel should be a smooth 
> tapering of translucent pixels with the proper colors from the source 
> image.
>
> ## Steps to reproduce the problem.
>
> Using GDAL-3.3.1, take an image [like this, 
> naip_denull.tif](https://drive.google.com/file/d/1KIJ-8E3nxxaVCdQ1uaKE4rcZtCtlqT0x/view?usp=sharing) 
> (188 MB) and run:
>
> $ gdal_translate naip_denull.tif cog.tif -of COG -co COMPRESS=LZW
>
> Then open the COG in an application like GIMP that lets you select 
> which zoom-level to view.? Choose the coarsest level and view ? random 
> fringe!
>
> Screenshot: 
> ![naip_fringe_screen](https://user-images.githubusercontent.com/18429680/146596047-1081f20b-e6cb-4670-82f4-099ea8525032.png)
>
> All of the reduced-resolution levels have this problem to a degree, 
> though the more zoomed-out ones have it worse.? Using these levels to 
> produce a map makes it look bad.
>
> The problem seems to be exacerbated by the source image having pixels 
> that are either fully opaque or fully transparent and by the image 
> content having complicated patterns, such as streets.
>
> My guess is that the resampling method when generating a zoomed-out 
> pixel is indiscriminately including source-pixel values that are fully 
> transparent and shouldn't be included.? The randomness of the fringe 
> suggests that the sample values for transparent pixels remain 
> uninitialized as some kind of optimization.
>
> I've seen this problem before on other systems with a dark fringe from 
> erroneously including transparent pixels that have sample values of 0.
>
> ## Operating system
>
> Fedora 33 Linux, x64.
>
> ## GDAL version and provenance
>
> GDAL-3.3.1.
>
> -- 
> Dr. Craig S. Bruce
> Senior Software Developer
> CubeWerx//Inc.
> https://www.cubewerx.com <http://www.cubewerx.com/>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220216/81fecb3b/attachment-0001.html>

From csbruce at cubewerx.com  Wed Feb 16 11:27:10 2022
From: csbruce at cubewerx.com (Craig Bruce)
Date: Wed, 16 Feb 2022 15:27:10 -0400
Subject: [gdal-dev] GDAL COG random fringe on zoom levels
In-Reply-To: <753d57e9-4488-e5c6-5247-4ce9ee2e608a@spatialys.com>
References: <a7442ef1-1f1b-6905-2c71-5e7fec1b4ca2@cubewerx.com>
 <753d57e9-4488-e5c6-5247-4ce9ee2e608a@spatialys.com>
Message-ID: <59e714d9-7832-37c5-1739-88cdf5678708@cubewerx.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220216/b53215d9/attachment.html>

From jonathan-lists at lightpear.com  Wed Feb 16 11:56:51 2022
From: jonathan-lists at lightpear.com (Jonathan Moules)
Date: Wed, 16 Feb 2022 19:56:51 +0000
Subject: [gdal-dev] Corrupted geopackage
In-Reply-To: <CAAXmMvD7t9uLTHeDPXEdZ15z7NwyYowE+iJHO+wVjOK=23m3jA@mail.gmail.com>
References: <CAAXmMvD7t9uLTHeDPXEdZ15z7NwyYowE+iJHO+wVjOK=23m3jA@mail.gmail.com>
Message-ID: <82d05c80-ad35-5fa7-c7f1-c7f14a45c8cf@lightpear.com>

Hi Isabel,

If you don't get an answer here, you may want to try the SQLite forum: 
https://sqlite.org/forum/forum - If anyone knows, it'll be someone there.

Maybe also of interest: https://sqlite.org/howtocorrupt.html#cfgerr

Cheers,

Jonathan

On 2022-02-14 08:17, Isabel Kiefer wrote:
> Hi everyone,
>
> I've a problem with a corrupted geopackage.
> It should contain a table with 694 entries, but only 78 are visible 
> when opening the file with DB Browser for SQLite or QGIS. The table 
> gpkg_ogr_contents says 694 though. When opening the .gpkg with a 
> Notepad or similar, I can see that there are more than 78 entries.
>
> The error message in DB Browser is "database disk image is malformed 
> in "PRAGMA "main".TABLE_INFO("rtree_XXX");" So it seems that there is 
> a problem with the index of the concerned table.
>
> Does?anyone know how to?fix this? I tried 
> https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642 
> <https://stackoverflow.com/questions/18259692/how-to-recover-a-corrupt-sqlite3-database/18260642>?but 
> without?success.
>
> Thanks in advance for your help!
> Isabel
>
> -- 
> Isabel Kiefer
> OPENGIS.ch
>
> isabel at opengis.ch
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220216/0f61d3d7/attachment.html>

From adamgutonski at protonmail.com  Thu Feb 17 06:54:59 2022
From: adamgutonski at protonmail.com (adamgutonski)
Date: Thu, 17 Feb 2022 14:54:59 +0000
Subject: [gdal-dev] Matching ESRI projection/transformations using GDAL/OSR
Message-ID: <k1sEVFr4T-I-lsySXq-bIaHoRR89SeXeb319-ibmwyWCPTTGwvmjWT5MLyC61oPEZW4K5jZYiuYxvI54XbefF3ABuRIwlvlLKgSeclcMBLk=@protonmail.com>

Hello,

I am attempting to project and transform geometry using OSR. The projection/transformation is from ITRF2014 via Proj4 string to NAD83(CSRS)v7 (EPSG:8255). My problem is that I need the transformation output to match the output I receive when transforming the geometry in ESRI using the geometry.projectAs function. It seems that the OSR transformation creates a point that is always shifted from the ESRI geometry. Any advice on how to match projections and transformations between open source and ESRI would be extremely helpful.

Original coordinate: -74.442799450000, 41.406811727778

ESRI point after transform: -74.4427951819612, 41.4068026527349

OGR point after transform: -74.44281012167299, 41.40671904426617

Code used to generate the OGR point:

itrf = osr.SpatialReference()
itrf.ImportFromProj4(

'GEOGCS["ITRF2014",DATUM["International_Terrestrial_Reference_Frame_2014",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433],AUTHORITY["EPSG",9000]]'

)

to_nad = osr.SpatialReference()
to_nad.ImportFromEPSG(

8255

)

opts = osr.CoordinateTransformationOptions()
opts.SetOperation(

"ITRF2014_To_NAD_1983_CSRS_v7_7par"

)
transformer = osr.CreateCoordinateTransformation(itrf, to_nad, opts)

outpoint = ogr.Geometry(ogr.wkbPoint)
outpoint.AddPoint(*test_coords)
outpoint.AssignSpatialReference(itrf)
outpoint.Transform(transformer)

With ESRI I am using the ArcPy geometry function, projectAs when taking in the name of a transformation. When ArcGIS reprojects from ITRF2014 to NAD83(CSRS)v7 (EPSG:8255) with the transformation "ITRF2014_To_NAD_1983_CSRS_v7_7par", a point is generated ~30 ft away from the point generated by GDAL/OSR

Code used to generate the Esri point:

ITRF_SPATIAL_REF = arcpy.SpatialReference(

'ITRF2014.prj'

)
NAD_SPATIAL_REF= arcpy.SpatialReference(

8255

)

longitude = test_coords[

0

]
latitude = test_coords[

1

]
point = arcpy.Point(
    longitude,
    latitude
)
return_point = arcpy.PointGeometry(point, ITRF_SPATIAL_REF).projectAs(NAD_SPATIAL_REF,

"ITRF2014_To_NAD_1983_CSRS_v7_7par"

)

Thank you for your time,
adamg

Sent with [ProtonMail](https://protonmail.com/) Secure Email.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220217/67062b98/attachment.html>

From even.rouault at spatialys.com  Thu Feb 17 07:36:30 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Feb 2022 16:36:30 +0100
Subject: [gdal-dev] Matching ESRI projection/transformations using
 GDAL/OSR
In-Reply-To: <k1sEVFr4T-I-lsySXq-bIaHoRR89SeXeb319-ibmwyWCPTTGwvmjWT5MLyC61oPEZW4K5jZYiuYxvI54XbefF3ABuRIwlvlLKgSeclcMBLk=@protonmail.com>
References: <k1sEVFr4T-I-lsySXq-bIaHoRR89SeXeb319-ibmwyWCPTTGwvmjWT5MLyC61oPEZW4K5jZYiuYxvI54XbefF3ABuRIwlvlLKgSeclcMBLk=@protonmail.com>
Message-ID: <bb14a741-77af-2a22-2dc3-1be39aee8569@spatialys.com>

Hi,
>
> I am attempting to project and transform geometry using OSR.? The 
> projection/transformation is from ITRF2014 via Proj4 string to 
> NAD83(CSRS)v7 (EPSG:8255).? My problem is that I need the 
> transformation output to match the output I receive when transforming 
> the geometry in ESRI using the geometry.projectAs function.? It seems 
> that the OSR transformation creates a point that is always shifted 
> from the ESRI geometry.? Any advice on how to match projections and 
> transformations between open source and ESRI would be extremely helpful.
>
> Original coordinate: -74.442799450000, 41.406811727778
>
> ESRI point after transform: -74.4427951819612, 41.4068026527349
>
> OGR point after transform: -74.44281012167299, 41.40671904426617
>
> Code used to generate the OGR point:

You've likely used the coordinate order wrong. GDAL 3 honours by default 
authority (EPSG) axis order, so for EPSG this means lat/lon for 
geographic CRS.

So either switch your coordinate, or call 
itrf.SetAxisMappingStrategy(osr.OAMS_TRADITIONAL_GIS_ORDER) and 
to_nad.SetAxisMappingStrategy(osr.OAMS_TRADITIONAL_GIS_ORDER)

With that, you'll get the same results as Esri software

 >>> print(outpoint)
POINT (-74.442810121673 41.4067190442662 0)

Even

> |itrf = osr.SpatialReference() 
> itrf.ImportFromProj4('GEOGCS["ITRF2014",DATUM["International_Terrestrial_Reference_Frame_2014",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433],AUTHORITY["EPSG",9000]]') 
> to_nad = osr.SpatialReference() to_nad.ImportFromEPSG(8255) opts = 
> osr.CoordinateTransformationOptions() 
> opts.SetOperation("ITRF2014_To_NAD_1983_CSRS_v7_7par") transformer = 
> osr.CreateCoordinateTransformation(itrf, to_nad, opts) outpoint = 
> ogr.Geometry(ogr.wkbPoint) outpoint.AddPoint(*test_coords) 
> outpoint.AssignSpatialReference(itrf) outpoint.Transform(transformer)|
>
> With ESRI I am using the ArcPy geometry function, projectAs when 
> taking in the name of a transformation. When ArcGIS reprojects from 
> ITRF2014 to NAD83(CSRS)v7 (EPSG:8255) with the transformation 
> "ITRF2014_To_NAD_1983_CSRS_v7_7par", a point is generated ~30 ft away 
> from the point generated by GDAL/OSR
>
> Code used to generate the Esri point:
> |ITRF_SPATIAL_REF = arcpy.SpatialReference('ITRF2014.prj') 
> NAD_SPATIAL_REF= arcpy.SpatialReference(8255) longitude = 
> test_coords[0] latitude = test_coords[1] point = arcpy.Point( 
> longitude, latitude ) return_point = arcpy.PointGeometry(point, 
> ITRF_SPATIAL_REF).projectAs(NAD_SPATIAL_REF, 
> "ITRF2014_To_NAD_1983_CSRS_v7_7par")|
>
> Thank you for your time,
> adamg
>
> Sent with ProtonMail <https://protonmail.com/> Secure Email.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220217/6abcdde4/attachment-0001.html>

From adamgutonski at protonmail.com  Thu Feb 17 07:56:08 2022
From: adamgutonski at protonmail.com (adamgutonski)
Date: Thu, 17 Feb 2022 15:56:08 +0000
Subject: [gdal-dev] Matching ESRI projection/transformations using
 GDAL/OSR
In-Reply-To: <bb14a741-77af-2a22-2dc3-1be39aee8569@spatialys.com>
References: <k1sEVFr4T-I-lsySXq-bIaHoRR89SeXeb319-ibmwyWCPTTGwvmjWT5MLyC61oPEZW4K5jZYiuYxvI54XbefF3ABuRIwlvlLKgSeclcMBLk=@protonmail.com>
 <bb14a741-77af-2a22-2dc3-1be39aee8569@spatialys.com>
Message-ID: <iugKnjW6Vq1il6RP0p4sfliVMWXK-F44ocu_4SUrZ_hcFr11YaA-jdqKVEuvwmrBf2eu7vLFMUfgyl_WI8NkdlA2IjwsA6xhBG2qSzRp2pY=@protonmail.com>

Thank you so much! This appears to have resolved the issue.

Sent with [ProtonMail](https://protonmail.com/) Secure Email.

------- Original Message -------
On Thursday, February 17th, 2022 at 10:36 AM, Even Rouault <even.rouault at spatialys.com> wrote:

> Hi,
>
>> I am attempting to project and transform geometry using OSR. The projection/transformation is from ITRF2014 via Proj4 string to NAD83(CSRS)v7 (EPSG:8255). My problem is that I need the transformation output to match the output I receive when transforming the geometry in ESRI using the geometry.projectAs function. It seems that the OSR transformation creates a point that is always shifted from the ESRI geometry. Any advice on how to match projections and transformations between open source and ESRI would be extremely helpful.
>>
>> Original coordinate: -74.442799450000, 41.406811727778
>>
>> ESRI point after transform: -74.4427951819612, 41.4068026527349
>>
>> OGR point after transform: -74.44281012167299, 41.40671904426617
>>
>> Code used to generate the OGR point:
>
> You've likely used the coordinate order wrong. GDAL 3 honours by default authority (EPSG) axis order, so for EPSG this means lat/lon for geographic CRS.
>
> So either switch your coordinate, or call itrf.SetAxisMappingStrategy(osr.OAMS_TRADITIONAL_GIS_ORDER) and to_nad.SetAxisMappingStrategy(osr.OAMS_TRADITIONAL_GIS_ORDER)
>
> With that, you'll get the same results as Esri software
>
>>>> print(outpoint)
> POINT (-74.442810121673 41.4067190442662 0)
>
> Even
>
>> itrf = osr.SpatialReference()
>> itrf.ImportFromProj4(
>>
>> 'GEOGCS["ITRF2014",DATUM["International_Terrestrial_Reference_Frame_2014",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433],AUTHORITY["EPSG",9000]]'
>>
>> )
>>
>> to_nad = osr.SpatialReference()
>> to_nad.ImportFromEPSG(
>>
>> 8255
>>
>> )
>>
>> opts = osr.CoordinateTransformationOptions()
>> opts.SetOperation(
>>
>> "ITRF2014_To_NAD_1983_CSRS_v7_7par"
>>
>> )
>> transformer = osr.CreateCoordinateTransformation(itrf, to_nad, opts)
>>
>> outpoint = ogr.Geometry(ogr.wkbPoint)
>> outpoint.AddPoint(*test_coords)
>> outpoint.AssignSpatialReference(itrf)
>> outpoint.Transform(transformer)
>>
>> With ESRI I am using the ArcPy geometry function, projectAs when taking in the name of a transformation. When ArcGIS reprojects from ITRF2014 to NAD83(CSRS)v7 (EPSG:8255) with the transformation "ITRF2014_To_NAD_1983_CSRS_v7_7par", a point is generated ~30 ft away from the point generated by GDAL/OSR
>>
>> Code used to generate the Esri point:
>>
>> ITRF_SPATIAL_REF = arcpy.SpatialReference(
>>
>> 'ITRF2014.prj'
>>
>> )
>> NAD_SPATIAL_REF= arcpy.SpatialReference(
>>
>> 8255
>>
>> )
>>
>> longitude = test_coords[
>>
>> 0
>>
>> ]
>> latitude = test_coords[
>>
>> 1
>>
>> ]
>> point = arcpy.Point(
>>     longitude,
>>     latitude
>> )
>> return_point = arcpy.PointGeometry(point, ITRF_SPATIAL_REF).projectAs(NAD_SPATIAL_REF,
>>
>> "ITRF2014_To_NAD_1983_CSRS_v7_7par"
>>
>> )
>>
>> Thank you for your time,
>> adamg
>>
>> Sent with [ProtonMail](https://protonmail.com/) Secure Email.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220217/ff673d75/attachment.html>

From howard at hobu.co  Thu Feb 17 08:13:19 2022
From: howard at hobu.co (Howard Butler)
Date: Thu, 17 Feb 2022 10:13:19 -0600
Subject: [gdal-dev] GEOS Maintenance Grant
In-Reply-To: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
Message-ID: <5CC479B0-B104-4117-B65A-93C7F5CEE586@hobu.co>

Declaring this motion passed with +1's from

DanielM, EvenR, NormanB, TamasS, HowardB, MateuszL, FrankW, KurtS, and SeanG

The GDAL PSC is fully delegating these resources to the GEOS PSC to use as it sees fit. Paul Ramsey has agreed to be the administrative contact for the GEOS PSC, and will coordinate the effort in regards to payment sign-off, work task development, rate negotiation, and reporting to the GDAL PSC. 

Howard

PS: As a member of both PSCs, I will abstain from any funding or resource direction votes in the GEOS PSC to avoid any potential conflict.

> On Feb 15, 2022, at 9:37 AM, Howard Butler <howard at hobu.co> wrote:
> 
> GDAL PSC,
> 
> When we wrote the GDAL RFCs on sponsorship, we provided an escape clause to allow us to direct resources to other projects upon which GDAL depends. Our sponsorship numbers are still increasing, which provides us an opportunity to directly support some of those projects, and one of them is obviously GEOS. GEOS provides all of the geometry algebra support for GDAL/OGR and many other open source geospatial softwares including Shapely, PostGIS, GeoPandas, MapServer, and more. 
> 
> Dan Baston of the GEOS PSC has been identified as the developer with capacity and interest in the next year to take on GEOS development on APIs and performance, which he has a long history of doing for the project. This support should allow him to work longer, multi-release upgrades that will provide strong performance and convenience benefits for the project.
> 
> I motion to provide the GEOS PSC with a $50,000 USD grant to address performance, API, and other work that does not attract directed funding in GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates, and development timelines. Howard Butler or Even Rouault of the GDAL NumFocus liaison team will coordinate dispersement as directed by the GEOS PSC and NumFocus rules.
> 
> Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html who have made this kind of grant possible. A better GEOS makes for a better GDAL.
> 
> Howard
> 


From osgeo.mailinglist at gmail.com  Thu Feb 17 08:17:13 2022
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Thu, 17 Feb 2022 17:17:13 +0100
Subject: [gdal-dev] Adding OSGEO4W and gisinternals docs in install doc?
Message-ID: <CACPZzQ0zCTqAcqXc4Qamup1qfYAvH2bvJZyguL3JTOwu5=NkiA@mail.gmail.com>

Hi,

I regularly orient third parties to use GDAL utilities and for this intent,
point them to install section https://gdal.org/download.html#binaries

For Windows, I did not see a user friendly section about how to install it.
I want to mention in the doc how to install with OSGEO4W and
https://www.gisinternals.com/index.html
Opinions? If ok, I will do a PR later on the github repo


Regards

Thomas Gratier
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220217/339472c7/attachment-0001.html>

From even.rouault at spatialys.com  Thu Feb 17 08:29:50 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Feb 2022 17:29:50 +0100
Subject: [gdal-dev] Adding OSGEO4W and gisinternals docs in install doc?
In-Reply-To: <CACPZzQ0zCTqAcqXc4Qamup1qfYAvH2bvJZyguL3JTOwu5=NkiA@mail.gmail.com>
References: <CACPZzQ0zCTqAcqXc4Qamup1qfYAvH2bvJZyguL3JTOwu5=NkiA@mail.gmail.com>
Message-ID: <5469908e-b17b-d8f0-4691-9ecf3108cce7@spatialys.com>

Thomas,

One criterion currently for inclusion is: "In this section we list a 
number of the binary distributions of GDAL all of which should have 
fully reproducible open source build recipes."

I've not evaluated what the current situation of OSGeo4W or gisinternals 
is regarding this, especially regarding all direct and indirect 
dependencies of GDAL (or course, that must stop at the compiler level 
when using Visual Studio). I believe nowadays OSGeo4W must be closer to 
that aim of having fully reproducible builds, but I'm not sure to which 
extent. For gisinternals I'm not sure. It was my impression that the 
build recipees for the dependencies were not available, but maybe I'm 
wrong. I'll let the developers of those distributions comment further if 
they wish.

Even

Le 17/02/2022 ? 17:17, Thomas Gratier a ?crit?:
> Hi,
>
> I regularly orient third parties to use GDAL utilities and for this 
> intent, point them to install section 
> https://gdal.org/download.html#binaries
>
> For Windows, I did not see a user friendly section about how to 
> install it. I want to mention in the doc how to install with OSGEO4W 
> and https://www.gisinternals.com/index.html
> Opinions? If ok, I will do a PR later on the github repo
>
>
> Regards
>
> Thomas Gratier
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From dbaston at gmail.com  Thu Feb 17 09:46:42 2022
From: dbaston at gmail.com (Daniel Baston)
Date: Thu, 17 Feb 2022 12:46:42 -0500
Subject: [gdal-dev] [geos-devel] GEOS Maintenance Grant
In-Reply-To: <5CC479B0-B104-4117-B65A-93C7F5CEE586@hobu.co>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
 <5CC479B0-B104-4117-B65A-93C7F5CEE586@hobu.co>
Message-ID: <CA+K_q_oUh-ZR73C=SFuAis4BN1skEyJ39Z8DDGsL2-RAP2pb7A@mail.gmail.com>

Thank you, all. I'm honored by your support.

Please don't hesitate to open issues on the GEOS GitHub page to share any
ideas you have about how GEOS can better support GDAL and friends.

Dan

On Thu, Feb 17, 2022 at 11:13 AM Howard Butler <howard at hobu.co> wrote:

> Declaring this motion passed with +1's from
>
> DanielM, EvenR, NormanB, TamasS, HowardB, MateuszL, FrankW, KurtS, and
> SeanG
>
> The GDAL PSC is fully delegating these resources to the GEOS PSC to use as
> it sees fit. Paul Ramsey has agreed to be the administrative contact for
> the GEOS PSC, and will coordinate the effort in regards to payment
> sign-off, work task development, rate negotiation, and reporting to the
> GDAL PSC.
>
> Howard
>
> PS: As a member of both PSCs, I will abstain from any funding or resource
> direction votes in the GEOS PSC to avoid any potential conflict.
>
> > On Feb 15, 2022, at 9:37 AM, Howard Butler <howard at hobu.co> wrote:
> >
> > GDAL PSC,
> >
> > When we wrote the GDAL RFCs on sponsorship, we provided an escape clause
> to allow us to direct resources to other projects upon which GDAL depends.
> Our sponsorship numbers are still increasing, which provides us an
> opportunity to directly support some of those projects, and one of them is
> obviously GEOS. GEOS provides all of the geometry algebra support for
> GDAL/OGR and many other open source geospatial softwares including Shapely,
> PostGIS, GeoPandas, MapServer, and more.
> >
> > Dan Baston of the GEOS PSC has been identified as the developer with
> capacity and interest in the next year to take on GEOS development on APIs
> and performance, which he has a long history of doing for the project. This
> support should allow him to work longer, multi-release upgrades that will
> provide strong performance and convenience benefits for the project.
> >
> > I motion to provide the GEOS PSC with a $50,000 USD grant to address
> performance, API, and other work that does not attract directed funding in
> GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates,
> and development timelines. Howard Butler or Even Rouault of the GDAL
> NumFocus liaison team will coordinate dispersement as directed by the GEOS
> PSC and NumFocus rules.
> >
> > Thank you again to the GDAL Sponsors
> https://gdal.org/sponsors/index.html who have made this kind of grant
> possible. A better GEOS makes for a better GDAL.
> >
> > Howard
> >
>
> _______________________________________________
> geos-devel mailing list
> geos-devel at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/geos-devel
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220217/0066d9a8/attachment.html>

From nelson.gerald.c at gmail.com  Thu Feb 17 09:53:22 2022
From: nelson.gerald.c at gmail.com (Gerald Nelson)
Date: Thu, 17 Feb 2022 17:53:22 +0000
Subject: [gdal-dev] [geos-devel] GEOS Maintenance Grant
In-Reply-To: <CA+K_q_oUh-ZR73C=SFuAis4BN1skEyJ39Z8DDGsL2-RAP2pb7A@mail.gmail.com>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
 <5CC479B0-B104-4117-B65A-93C7F5CEE586@hobu.co>
 <CA+K_q_oUh-ZR73C=SFuAis4BN1skEyJ39Z8DDGsL2-RAP2pb7A@mail.gmail.com>
Message-ID: <CO1PR18MB466877C28B84C7C3A8A8A729AD369@CO1PR18MB4668.namprd18.prod.outlook.com>

I?m mainly a lurker on these exchanges. But from afar it seems like there are three key underlying efforts in the whole spatial data and analysis world ? gdal, geos, and proj. It?s really good to see cooperation (and funding!) for the gdal and geos part of the triumvirate. Would it make sense to see about adding proj to it?

Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Daniel Baston <dbaston at gmail.com>
Date: Thursday, February 17, 2022 at 10:47 AM
To: GEOS Development List <geos-devel at lists.osgeo.org>
Cc: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] [geos-devel] GEOS Maintenance Grant

Thank you, all. I'm honored by your support.

Please don't hesitate to open issues on the GEOS GitHub page to share any ideas you have about how GEOS can better support GDAL and friends.

Dan

On Thu, Feb 17, 2022 at 11:13 AM Howard Butler <howard at hobu.co<mailto:howard at hobu.co>> wrote:
Declaring this motion passed with +1's from

DanielM, EvenR, NormanB, TamasS, HowardB, MateuszL, FrankW, KurtS, and SeanG

The GDAL PSC is fully delegating these resources to the GEOS PSC to use as it sees fit. Paul Ramsey has agreed to be the administrative contact for the GEOS PSC, and will coordinate the effort in regards to payment sign-off, work task development, rate negotiation, and reporting to the GDAL PSC.

Howard

PS: As a member of both PSCs, I will abstain from any funding or resource direction votes in the GEOS PSC to avoid any potential conflict.

> On Feb 15, 2022, at 9:37 AM, Howard Butler <howard at hobu.co<mailto:howard at hobu.co>> wrote:
>
> GDAL PSC,
>
> When we wrote the GDAL RFCs on sponsorship, we provided an escape clause to allow us to direct resources to other projects upon which GDAL depends. Our sponsorship numbers are still increasing, which provides us an opportunity to directly support some of those projects, and one of them is obviously GEOS. GEOS provides all of the geometry algebra support for GDAL/OGR and many other open source geospatial softwares including Shapely, PostGIS, GeoPandas, MapServer, and more.
>
> Dan Baston of the GEOS PSC has been identified as the developer with capacity and interest in the next year to take on GEOS development on APIs and performance, which he has a long history of doing for the project. This support should allow him to work longer, multi-release upgrades that will provide strong performance and convenience benefits for the project.
>
> I motion to provide the GEOS PSC with a $50,000 USD grant to address performance, API, and other work that does not attract directed funding in GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates, and development timelines. Howard Butler or Even Rouault of the GDAL NumFocus liaison team will coordinate dispersement as directed by the GEOS PSC and NumFocus rules.
>
> Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html who have made this kind of grant possible. A better GEOS makes for a better GDAL.
>
> Howard
>

_______________________________________________
geos-devel mailing list
geos-devel at lists.osgeo.org<mailto:geos-devel at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/geos-devel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220217/70f7e5d3/attachment.html>

From szekerest at gmail.com  Thu Feb 17 10:19:09 2022
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 17 Feb 2022 19:19:09 +0100
Subject: [gdal-dev] Adding OSGEO4W and gisinternals docs in install doc?
In-Reply-To: <5469908e-b17b-d8f0-4691-9ecf3108cce7@spatialys.com>
References: <CACPZzQ0zCTqAcqXc4Qamup1qfYAvH2bvJZyguL3JTOwu5=NkiA@mail.gmail.com>
 <5469908e-b17b-d8f0-4691-9ecf3108cce7@spatialys.com>
Message-ID: <CACALY+SFW16NW2YQkdiaZeOceLidj--0R8ZjqJsg3YBTdbYeuA@mail.gmail.com>

For gisinternals, the entire build including the dependencies is controlled
by a single Makefile
<https://github.com/gisinternals/buildsystem/blob/master/Makefile> which
controls the builds of the dependencies including how to obtain them from
the source repositories. The makefile also contains the necessary tweaks
that had to be applied in a dependency if that required for a successful
build.

Best regards,

Tamas


Even Rouault <even.rouault at spatialys.com> ezt ?rta (id?pont: 2022. febr.
17., Cs, 17:29):

> Thomas,
>
> One criterion currently for inclusion is: "In this section we list a
> number of the binary distributions of GDAL all of which should have
> fully reproducible open source build recipes."
>
> I've not evaluated what the current situation of OSGeo4W or gisinternals
> is regarding this, especially regarding all direct and indirect
> dependencies of GDAL (or course, that must stop at the compiler level
> when using Visual Studio). I believe nowadays OSGeo4W must be closer to
> that aim of having fully reproducible builds, but I'm not sure to which
> extent. For gisinternals I'm not sure. It was my impression that the
> build recipees for the dependencies were not available, but maybe I'm
> wrong. I'll let the developers of those distributions comment further if
> they wish.
>
> Even
>
> Le 17/02/2022 ? 17:17, Thomas Gratier a ?crit :
> > Hi,
> >
> > I regularly orient third parties to use GDAL utilities and for this
> > intent, point them to install section
> > https://gdal.org/download.html#binaries
> >
> > For Windows, I did not see a user friendly section about how to
> > install it. I want to mention in the doc how to install with OSGEO4W
> > and https://www.gisinternals.com/index.html
> > Opinions? If ok, I will do a PR later on the github repo
> >
> >
> > Regards
> >
> > Thomas Gratier
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220217/ad23c50b/attachment-0001.html>

From szekerest at gmail.com  Thu Feb 17 10:22:26 2022
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 17 Feb 2022 19:22:26 +0100
Subject: [gdal-dev] Adding OSGEO4W and gisinternals docs in install doc?
In-Reply-To: <CACALY+SFW16NW2YQkdiaZeOceLidj--0R8ZjqJsg3YBTdbYeuA@mail.gmail.com>
References: <CACPZzQ0zCTqAcqXc4Qamup1qfYAvH2bvJZyguL3JTOwu5=NkiA@mail.gmail.com>
 <5469908e-b17b-d8f0-4691-9ecf3108cce7@spatialys.com>
 <CACALY+SFW16NW2YQkdiaZeOceLidj--0R8ZjqJsg3YBTdbYeuA@mail.gmail.com>
Message-ID: <CACALY+SFLHmjbvO8-0UX4qz-o2qxmSaqhRG_LJyMZcBE4UXOGA@mail.gmail.com>

To be correct, the latest version of the build scripts (including the
Makefile) are on the refactor branch:

https://github.com/gisinternals/buildsystem/tree/refactor

Tamas Szekeres <szekerest at gmail.com> ezt ?rta (id?pont: 2022. febr. 17.,
Cs, 19:19):

> For gisinternals, the entire build including the dependencies is
> controlled by a single Makefile
> <https://github.com/gisinternals/buildsystem/blob/master/Makefile> which
> controls the builds of the dependencies including how to obtain them from
> the source repositories. The makefile also contains the necessary tweaks
> that had to be applied in a dependency if that required for a successful
> build.
>
> Best regards,
>
> Tamas
>
>
> Even Rouault <even.rouault at spatialys.com> ezt ?rta (id?pont: 2022. febr.
> 17., Cs, 17:29):
>
>> Thomas,
>>
>> One criterion currently for inclusion is: "In this section we list a
>> number of the binary distributions of GDAL all of which should have
>> fully reproducible open source build recipes."
>>
>> I've not evaluated what the current situation of OSGeo4W or gisinternals
>> is regarding this, especially regarding all direct and indirect
>> dependencies of GDAL (or course, that must stop at the compiler level
>> when using Visual Studio). I believe nowadays OSGeo4W must be closer to
>> that aim of having fully reproducible builds, but I'm not sure to which
>> extent. For gisinternals I'm not sure. It was my impression that the
>> build recipees for the dependencies were not available, but maybe I'm
>> wrong. I'll let the developers of those distributions comment further if
>> they wish.
>>
>> Even
>>
>> Le 17/02/2022 ? 17:17, Thomas Gratier a ?crit :
>> > Hi,
>> >
>> > I regularly orient third parties to use GDAL utilities and for this
>> > intent, point them to install section
>> > https://gdal.org/download.html#binaries
>> >
>> > For Windows, I did not see a user friendly section about how to
>> > install it. I want to mention in the doc how to install with OSGEO4W
>> > and https://www.gisinternals.com/index.html
>> > Opinions? If ok, I will do a PR later on the github repo
>> >
>> >
>> > Regards
>> >
>> > Thomas Gratier
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev at lists.osgeo.org
>> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220217/f7bf8d9f/attachment.html>

From even.rouault at spatialys.com  Thu Feb 17 10:44:34 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Feb 2022 19:44:34 +0100
Subject: [gdal-dev] Adding OSGEO4W and gisinternals docs in install doc?
In-Reply-To: <CACALY+SFLHmjbvO8-0UX4qz-o2qxmSaqhRG_LJyMZcBE4UXOGA@mail.gmail.com>
References: <CACPZzQ0zCTqAcqXc4Qamup1qfYAvH2bvJZyguL3JTOwu5=NkiA@mail.gmail.com>
 <5469908e-b17b-d8f0-4691-9ecf3108cce7@spatialys.com>
 <CACALY+SFW16NW2YQkdiaZeOceLidj--0R8ZjqJsg3YBTdbYeuA@mail.gmail.com>
 <CACALY+SFLHmjbvO8-0UX4qz-o2qxmSaqhRG_LJyMZcBE4UXOGA@mail.gmail.com>
Message-ID: <37251c72-75cd-37d5-5c9a-4465cde5f70e@spatialys.com>


Le 17/02/2022 ? 19:22, Tamas Szekeres a ?crit?:
> To be correct, the latest version of the build scripts (including the 
> Makefile) are on the refactor branch:
>
> https://github.com/gisinternals/buildsystem/tree/refactor

nice! I actually see 
https://github.com/gisinternals/buildsystem/blob/refactor/config.opt 
with the URLs of the upstream repositories, and the build commands in 
https://github.com/gisinternals/buildsystem/blob/refactor/Makefile

Is the refactor branch the one used for the builds at gisinternals.com ? 
(said otherwise, why isn't it the master branch ?)

>
> Tamas Szekeres <szekerest at gmail.com> ezt ?rta (id?pont: 2022. febr. 
> 17., Cs, 19:19):
>
>     For gisinternals, the entire build including the dependencies is
>     controlled by a single Makefile
>     <https://github.com/gisinternals/buildsystem/blob/master/Makefile>
>     which controls the builds of the dependencies including how to
>     obtain them from the source repositories. The makefile also
>     contains the necessary tweaks that had to be applied in a
>     dependency if that required for a successful build.
>
>     Best regards,
>
>     Tamas
>
>
>     Even Rouault <even.rouault at spatialys.com> ezt ?rta (id?pont: 2022.
>     febr. 17., Cs, 17:29):
>
>         Thomas,
>
>         One criterion currently for inclusion is: "In this section we
>         list a
>         number of the binary distributions of GDAL all of which should
>         have
>         fully reproducible open source build recipes."
>
>         I've not evaluated what the current situation of OSGeo4W or
>         gisinternals
>         is regarding this, especially regarding all direct and indirect
>         dependencies of GDAL (or course, that must stop at the
>         compiler level
>         when using Visual Studio). I believe nowadays OSGeo4W must be
>         closer to
>         that aim of having fully reproducible builds, but I'm not sure
>         to which
>         extent. For gisinternals I'm not sure. It was my impression
>         that the
>         build recipees for the dependencies were not available, but
>         maybe I'm
>         wrong. I'll let the developers of those distributions comment
>         further if
>         they wish.
>
>         Even
>
>         Le 17/02/2022 ? 17:17, Thomas Gratier a ?crit?:
>         > Hi,
>         >
>         > I regularly orient third parties to use GDAL utilities and
>         for this
>         > intent, point them to install section
>         > https://gdal.org/download.html#binaries
>         >
>         > For Windows, I did not see a user friendly section about how to
>         > install it. I want to mention in the doc how to install with
>         OSGEO4W
>         > and https://www.gisinternals.com/index.html
>         > Opinions? If ok, I will do a PR later on the github repo
>         >
>         >
>         > Regards
>         >
>         > Thomas Gratier
>         >
>         > _______________________________________________
>         > gdal-dev mailing list
>         > gdal-dev at lists.osgeo.org
>         > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>         -- 
>         http://www.spatialys.com
>         My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220217/da13bad3/attachment.html>

From szekerest at gmail.com  Thu Feb 17 11:23:28 2022
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 17 Feb 2022 20:23:28 +0100
Subject: [gdal-dev] Adding OSGEO4W and gisinternals docs in install doc?
In-Reply-To: <37251c72-75cd-37d5-5c9a-4465cde5f70e@spatialys.com>
References: <CACPZzQ0zCTqAcqXc4Qamup1qfYAvH2bvJZyguL3JTOwu5=NkiA@mail.gmail.com>
 <5469908e-b17b-d8f0-4691-9ecf3108cce7@spatialys.com>
 <CACALY+SFW16NW2YQkdiaZeOceLidj--0R8ZjqJsg3YBTdbYeuA@mail.gmail.com>
 <CACALY+SFLHmjbvO8-0UX4qz-o2qxmSaqhRG_LJyMZcBE4UXOGA@mail.gmail.com>
 <37251c72-75cd-37d5-5c9a-4465cde5f70e@spatialys.com>
Message-ID: <CACALY+RDa166mL8_=3-wv9d1SvUayhoiRgY7APjVeizkwxTTdA@mail.gmail.com>

Currently the refactor is used in the build system. That is now working for
quire some time so that it will be promoted to be the main branch.

Best regards,

Tamas


Even Rouault <even.rouault at spatialys.com> ezt ?rta (id?pont: 2022. febr.
17., Cs, 19:44):

>
> Le 17/02/2022 ? 19:22, Tamas Szekeres a ?crit :
>
> To be correct, the latest version of the build scripts (including the
> Makefile) are on the refactor branch:
>
> https://github.com/gisinternals/buildsystem/tree/refactor
>
> nice! I actually see
> https://github.com/gisinternals/buildsystem/blob/refactor/config.opt with
> the URLs of the upstream repositories, and the build commands in
> https://github.com/gisinternals/buildsystem/blob/refactor/Makefile
>
> Is the refactor branch the one used for the builds at gisinternals.com ?
> (said otherwise, why isn't it the master branch ?)
>
>
> Tamas Szekeres <szekerest at gmail.com> ezt ?rta (id?pont: 2022. febr. 17.,
> Cs, 19:19):
>
>> For gisinternals, the entire build including the dependencies is
>> controlled by a single Makefile
>> <https://github.com/gisinternals/buildsystem/blob/master/Makefile> which
>> controls the builds of the dependencies including how to obtain them from
>> the source repositories. The makefile also contains the necessary tweaks
>> that had to be applied in a dependency if that required for a successful
>> build.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>> Even Rouault <even.rouault at spatialys.com> ezt ?rta (id?pont: 2022. febr.
>> 17., Cs, 17:29):
>>
>>> Thomas,
>>>
>>> One criterion currently for inclusion is: "In this section we list a
>>> number of the binary distributions of GDAL all of which should have
>>> fully reproducible open source build recipes."
>>>
>>> I've not evaluated what the current situation of OSGeo4W or gisinternals
>>> is regarding this, especially regarding all direct and indirect
>>> dependencies of GDAL (or course, that must stop at the compiler level
>>> when using Visual Studio). I believe nowadays OSGeo4W must be closer to
>>> that aim of having fully reproducible builds, but I'm not sure to which
>>> extent. For gisinternals I'm not sure. It was my impression that the
>>> build recipees for the dependencies were not available, but maybe I'm
>>> wrong. I'll let the developers of those distributions comment further if
>>> they wish.
>>>
>>> Even
>>>
>>> Le 17/02/2022 ? 17:17, Thomas Gratier a ?crit :
>>> > Hi,
>>> >
>>> > I regularly orient third parties to use GDAL utilities and for this
>>> > intent, point them to install section
>>> > https://gdal.org/download.html#binaries
>>> >
>>> > For Windows, I did not see a user friendly section about how to
>>> > install it. I want to mention in the doc how to install with OSGEO4W
>>> > and https://www.gisinternals.com/index.html
>>> > Opinions? If ok, I will do a PR later on the github repo
>>> >
>>> >
>>> > Regards
>>> >
>>> > Thomas Gratier
>>> >
>>> > _______________________________________________
>>> > gdal-dev mailing list
>>> > gdal-dev at lists.osgeo.org
>>> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> --
>>> http://www.spatialys.com
>>> My software is free, but my time generally not.
>>>
>>> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220217/e06f999e/attachment-0001.html>

From even.rouault at spatialys.com  Thu Feb 17 11:25:46 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Feb 2022 20:25:46 +0100
Subject: [gdal-dev] Adding OSGEO4W and gisinternals docs in install doc?
In-Reply-To: <CACALY+RDa166mL8_=3-wv9d1SvUayhoiRgY7APjVeizkwxTTdA@mail.gmail.com>
References: <CACPZzQ0zCTqAcqXc4Qamup1qfYAvH2bvJZyguL3JTOwu5=NkiA@mail.gmail.com>
 <5469908e-b17b-d8f0-4691-9ecf3108cce7@spatialys.com>
 <CACALY+SFW16NW2YQkdiaZeOceLidj--0R8ZjqJsg3YBTdbYeuA@mail.gmail.com>
 <CACALY+SFLHmjbvO8-0UX4qz-o2qxmSaqhRG_LJyMZcBE4UXOGA@mail.gmail.com>
 <37251c72-75cd-37d5-5c9a-4465cde5f70e@spatialys.com>
 <CACALY+RDa166mL8_=3-wv9d1SvUayhoiRgY7APjVeizkwxTTdA@mail.gmail.com>
Message-ID: <7ba7cebd-7348-cd46-a6cb-5df43c6054be@spatialys.com>

Excellent, so gisinternals qualifies for being mentioned.

Le 17/02/2022 ? 20:23, Tamas Szekeres a ?crit?:
> Currently the refactor is used in the build system. That is now 
> working for quire some time so that it will be promoted to be the main 
> branch.
>
> Best regards,
>
> Tamas
>
>
> Even Rouault <even.rouault at spatialys.com> ezt ?rta (id?pont: 2022. 
> febr. 17., Cs, 19:44):
>
>
>     Le 17/02/2022 ? 19:22, Tamas Szekeres a ?crit?:
>>     To be correct, the latest version of the build scripts (including
>>     the Makefile) are on the refactor branch:
>>
>>     https://github.com/gisinternals/buildsystem/tree/refactor
>
>     nice! I actually see
>     https://github.com/gisinternals/buildsystem/blob/refactor/config.opt
>     with the URLs of the upstream repositories, and the build commands
>     in https://github.com/gisinternals/buildsystem/blob/refactor/Makefile
>
>     Is the refactor branch the one used for the builds at
>     gisinternals.com <http://gisinternals.com> ? (said otherwise, why
>     isn't it the master branch ?)
>
>>
>>     Tamas Szekeres <szekerest at gmail.com> ezt ?rta (id?pont: 2022.
>>     febr. 17., Cs, 19:19):
>>
>>         For gisinternals, the entire build including the dependencies
>>         is controlled by a single Makefile
>>         <https://github.com/gisinternals/buildsystem/blob/master/Makefile>
>>         which controls the builds of the dependencies including how
>>         to obtain them from the source repositories. The makefile
>>         also contains the necessary tweaks that had to be applied in
>>         a dependency if that required for a successful build.
>>
>>         Best regards,
>>
>>         Tamas
>>
>>
>>         Even Rouault <even.rouault at spatialys.com> ezt ?rta (id?pont:
>>         2022. febr. 17., Cs, 17:29):
>>
>>             Thomas,
>>
>>             One criterion currently for inclusion is: "In this
>>             section we list a
>>             number of the binary distributions of GDAL all of which
>>             should have
>>             fully reproducible open source build recipes."
>>
>>             I've not evaluated what the current situation of OSGeo4W
>>             or gisinternals
>>             is regarding this, especially regarding all direct and
>>             indirect
>>             dependencies of GDAL (or course, that must stop at the
>>             compiler level
>>             when using Visual Studio). I believe nowadays OSGeo4W
>>             must be closer to
>>             that aim of having fully reproducible builds, but I'm not
>>             sure to which
>>             extent. For gisinternals I'm not sure. It was my
>>             impression that the
>>             build recipees for the dependencies were not available,
>>             but maybe I'm
>>             wrong. I'll let the developers of those distributions
>>             comment further if
>>             they wish.
>>
>>             Even
>>
>>             Le 17/02/2022 ? 17:17, Thomas Gratier a ?crit?:
>>             > Hi,
>>             >
>>             > I regularly orient third parties to use GDAL utilities
>>             and for this
>>             > intent, point them to install section
>>             > https://gdal.org/download.html#binaries
>>             >
>>             > For Windows, I did not see a user friendly section
>>             about how to
>>             > install it. I want to mention in the doc how to install
>>             with OSGEO4W
>>             > and https://www.gisinternals.com/index.html
>>             > Opinions? If ok, I will do a PR later on the github repo
>>             >
>>             >
>>             > Regards
>>             >
>>             > Thomas Gratier
>>             >
>>             > _______________________________________________
>>             > gdal-dev mailing list
>>             > gdal-dev at lists.osgeo.org
>>             > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>             -- 
>>             http://www.spatialys.com
>>             My software is free, but my time generally not.
>>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220217/b3bc22f5/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Feb 17 12:13:17 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Thu, 17 Feb 2022 20:13:17 +0000
Subject: [gdal-dev] GEOS Maintenance Grant
Message-ID: <c2e7f42058dc4e6c845fb081afcc024f@maanmittauslaitos.fi>

Hi,

I can see that I sent my +1 only to GDAL PSC members, not to the lists.

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Howard Butler
L?hetetty: torstai 17. helmikuuta 2022 18.13
Vastaanottaja: gdal dev <gdal-dev at lists.osgeo.org>
Kopio: GEOS Development List <geos-devel at lists.osgeo.org>
Aihe: Re: [gdal-dev] GEOS Maintenance Grant

Declaring this motion passed with +1's from

DanielM, EvenR, NormanB, TamasS, HowardB, MateuszL, FrankW, KurtS, and SeanG

The GDAL PSC is fully delegating these resources to the GEOS PSC to use as it sees fit. Paul Ramsey has agreed to be the administrative contact for the GEOS PSC, and will coordinate the effort in regards to payment sign-off, work task development, rate negotiation, and reporting to the GDAL PSC. 

Howard

PS: As a member of both PSCs, I will abstain from any funding or resource direction votes in the GEOS PSC to avoid any potential conflict.

> On Feb 15, 2022, at 9:37 AM, Howard Butler <howard at hobu.co> wrote:
> 
> GDAL PSC,
> 
> When we wrote the GDAL RFCs on sponsorship, we provided an escape clause to allow us to direct resources to other projects upon which GDAL depends. Our sponsorship numbers are still increasing, which provides us an opportunity to directly support some of those projects, and one of them is obviously GEOS. GEOS provides all of the geometry algebra support for GDAL/OGR and many other open source geospatial softwares including Shapely, PostGIS, GeoPandas, MapServer, and more. 
> 
> Dan Baston of the GEOS PSC has been identified as the developer with capacity and interest in the next year to take on GEOS development on APIs and performance, which he has a long history of doing for the project. This support should allow him to work longer, multi-release upgrades that will provide strong performance and convenience benefits for the project.
> 
> I motion to provide the GEOS PSC with a $50,000 USD grant to address performance, API, and other work that does not attract directed funding in GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates, and development timelines. Howard Butler or Even Rouault of the GDAL NumFocus liaison team will coordinate dispersement as directed by the GEOS PSC and NumFocus rules.
> 
> Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html who have made this kind of grant possible. A better GEOS makes for a better GDAL.
> 
> Howard
> 

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Thu Feb 17 12:21:06 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Feb 2022 21:21:06 +0100
Subject: [gdal-dev] [geos-devel] GEOS Maintenance Grant
In-Reply-To: <CO1PR18MB466877C28B84C7C3A8A8A729AD369@CO1PR18MB4668.namprd18.prod.outlook.com>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
 <5CC479B0-B104-4117-B65A-93C7F5CEE586@hobu.co>
 <CA+K_q_oUh-ZR73C=SFuAis4BN1skEyJ39Z8DDGsL2-RAP2pb7A@mail.gmail.com>
 <CO1PR18MB466877C28B84C7C3A8A8A729AD369@CO1PR18MB4668.namprd18.prod.outlook.com>
Message-ID: <4668190d-d285-4085-8b61-a666105f982b@spatialys.com>

Gerald,

Part of my funded maintenance activities on GDAL also benefit to some of 
its dependencies with which I'm familiar/a committer, and PROJ is the 
first one among those (15% of my time to date if my stats are right).

Even

Le 17/02/2022 ? 18:53, Gerald Nelson a ?crit?:
>
> I?m mainly a lurker on these exchanges. But from afar it seems like 
> there are three key underlying efforts in the whole spatial data and 
> analysis world ? gdal, geos, and proj. It?s really good to see 
> cooperation (and funding!) for the gdal and geos part of the 
> triumvirate. Would it make sense to see about adding proj to it?
>
> Gerald C. Nelson
>
> Professor Emeritus, UIUC
>
> +1 217-390-7888 (cell)
>
> +1 970-639-2079 (land line)
>
> Skype: jerrynelson
>
> http://bit.ly/1arho7d
>
> *From: *gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of 
> Daniel Baston <dbaston at gmail.com>
> *Date: *Thursday, February 17, 2022 at 10:47 AM
> *To: *GEOS Development List <geos-devel at lists.osgeo.org>
> *Cc: *gdal dev <gdal-dev at lists.osgeo.org>
> *Subject: *Re: [gdal-dev] [geos-devel] GEOS Maintenance Grant
>
> Thank you, all. I'm honored by your support.
>
> Please don't hesitate to open issues on the GEOS GitHub page to share 
> any ideas you have about how GEOS can better support GDAL and friends.
>
> Dan
>
> On Thu, Feb 17, 2022 at 11:13 AM Howard Butler <howard at hobu.co> wrote:
>
>     Declaring this motion passed with +1's from
>
>     DanielM, EvenR, NormanB, TamasS, HowardB, MateuszL, FrankW, KurtS,
>     and SeanG
>
>     The GDAL PSC is fully delegating these resources to the GEOS PSC
>     to use as it sees fit. Paul Ramsey has agreed to be the
>     administrative contact for the GEOS PSC, and will coordinate the
>     effort in regards to payment sign-off, work task development, rate
>     negotiation, and reporting to the GDAL PSC.
>
>     Howard
>
>     PS: As a member of both PSCs, I will abstain from any funding or
>     resource direction votes in the GEOS PSC to avoid any potential
>     conflict.
>
>     > On Feb 15, 2022, at 9:37 AM, Howard Butler <howard at hobu.co> wrote:
>     >
>     > GDAL PSC,
>     >
>     > When we wrote the GDAL RFCs on sponsorship, we provided an
>     escape clause to allow us to direct resources to other projects
>     upon which GDAL depends. Our sponsorship numbers are still
>     increasing, which provides us an opportunity to directly support
>     some of those projects, and one of them is obviously GEOS. GEOS
>     provides all of the geometry algebra support for GDAL/OGR and many
>     other open source geospatial softwares including Shapely, PostGIS,
>     GeoPandas, MapServer, and more.
>     >
>     > Dan Baston of the GEOS PSC has been identified as the developer
>     with capacity and interest in the next year to take on GEOS
>     development on APIs and performance, which he has a long history
>     of doing for the project. This support should allow him to work
>     longer, multi-release upgrades that will provide strong
>     performance and convenience benefits for the project.
>     >
>     > I motion to provide the GEOS PSC with a $50,000 USD grant to
>     address performance, API, and other work that does not attract
>     directed funding in GEOS. The GEOS PSC will be responsible for
>     coordinating work tasks, rates, and development timelines. Howard
>     Butler or Even Rouault of the GDAL NumFocus liaison team will
>     coordinate dispersement as directed by the GEOS PSC and NumFocus
>     rules.
>     >
>     > Thank you again to the GDAL Sponsors
>     https://gdal.org/sponsors/index.html who have made this kind of
>     grant possible. A better GEOS makes for a better GDAL.
>     >
>     > Howard
>     >
>
>     _______________________________________________
>     geos-devel mailing list
>     geos-devel at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/geos-devel
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220217/bca325c9/attachment.html>

From nelson.gerald.c at gmail.com  Thu Feb 17 13:01:33 2022
From: nelson.gerald.c at gmail.com (Gerald Nelson)
Date: Thu, 17 Feb 2022 21:01:33 +0000
Subject: [gdal-dev] [geos-devel] GEOS Maintenance Grant
In-Reply-To: <4668190d-d285-4085-8b61-a666105f982b@spatialys.com>
References: <231EA9C2-BA1D-4EDC-9130-296EBED77DE8@hobu.co>
 <5CC479B0-B104-4117-B65A-93C7F5CEE586@hobu.co>
 <CA+K_q_oUh-ZR73C=SFuAis4BN1skEyJ39Z8DDGsL2-RAP2pb7A@mail.gmail.com>
 <CO1PR18MB466877C28B84C7C3A8A8A729AD369@CO1PR18MB4668.namprd18.prod.outlook.com>
 <4668190d-d285-4085-8b61-a666105f982b@spatialys.com>
Message-ID: <CO1PR18MB466813A35C2816FD9800CF4AAD369@CO1PR18MB4668.namprd18.prod.outlook.com>

Evan, thanks for the update. You guys are great!

Since I can?t really contribute to the development I?ll stand on the sidelines and periodically cheer you on! ?


Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

From: Even Rouault <even.rouault at spatialys.com>
Date: Thursday, February 17, 2022 at 1:21 PM
To: Gerald Nelson <nelson.gerald.c at gmail.com>, Daniel Baston <dbaston at gmail.com>, GEOS Development List <geos-devel at lists.osgeo.org>
Cc: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] [geos-devel] GEOS Maintenance Grant


Gerald,

Part of my funded maintenance activities on GDAL also benefit to some of its dependencies with which I'm familiar/a committer, and PROJ is the first one among those (15% of my time to date if my stats are right).

Even
Le 17/02/2022 ? 18:53, Gerald Nelson a ?crit :
I?m mainly a lurker on these exchanges. But from afar it seems like there are three key underlying efforts in the whole spatial data and analysis world ? gdal, geos, and proj. It?s really good to see cooperation (and funding!) for the gdal and geos part of the triumvirate. Would it make sense to see about adding proj to it?

Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org><mailto:gdal-dev-bounces at lists.osgeo.org> on behalf of Daniel Baston <dbaston at gmail.com><mailto:dbaston at gmail.com>
Date: Thursday, February 17, 2022 at 10:47 AM
To: GEOS Development List <geos-devel at lists.osgeo.org><mailto:geos-devel at lists.osgeo.org>
Cc: gdal dev <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] [geos-devel] GEOS Maintenance Grant

Thank you, all. I'm honored by your support.

Please don't hesitate to open issues on the GEOS GitHub page to share any ideas you have about how GEOS can better support GDAL and friends.

Dan

On Thu, Feb 17, 2022 at 11:13 AM Howard Butler <howard at hobu.co<mailto:howard at hobu.co>> wrote:
Declaring this motion passed with +1's from

DanielM, EvenR, NormanB, TamasS, HowardB, MateuszL, FrankW, KurtS, and SeanG

The GDAL PSC is fully delegating these resources to the GEOS PSC to use as it sees fit. Paul Ramsey has agreed to be the administrative contact for the GEOS PSC, and will coordinate the effort in regards to payment sign-off, work task development, rate negotiation, and reporting to the GDAL PSC.

Howard

PS: As a member of both PSCs, I will abstain from any funding or resource direction votes in the GEOS PSC to avoid any potential conflict.

> On Feb 15, 2022, at 9:37 AM, Howard Butler <howard at hobu.co<mailto:howard at hobu.co>> wrote:
>
> GDAL PSC,
>
> When we wrote the GDAL RFCs on sponsorship, we provided an escape clause to allow us to direct resources to other projects upon which GDAL depends. Our sponsorship numbers are still increasing, which provides us an opportunity to directly support some of those projects, and one of them is obviously GEOS. GEOS provides all of the geometry algebra support for GDAL/OGR and many other open source geospatial softwares including Shapely, PostGIS, GeoPandas, MapServer, and more.
>
> Dan Baston of the GEOS PSC has been identified as the developer with capacity and interest in the next year to take on GEOS development on APIs and performance, which he has a long history of doing for the project. This support should allow him to work longer, multi-release upgrades that will provide strong performance and convenience benefits for the project.
>
> I motion to provide the GEOS PSC with a $50,000 USD grant to address performance, API, and other work that does not attract directed funding in GEOS. The GEOS PSC will be responsible for coordinating work tasks, rates, and development timelines. Howard Butler or Even Rouault of the GDAL NumFocus liaison team will coordinate dispersement as directed by the GEOS PSC and NumFocus rules.
>
> Thank you again to the GDAL Sponsors https://gdal.org/sponsors/index.html who have made this kind of grant possible. A better GEOS makes for a better GDAL.
>
> Howard
>

_______________________________________________
geos-devel mailing list
geos-devel at lists.osgeo.org<mailto:geos-devel at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/geos-devel



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220217/2e41ee14/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Feb 18 04:09:07 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Fri, 18 Feb 2022 12:09:07 +0000
Subject: [gdal-dev] Gdal_translate into HDF4 fails
Message-ID: <c17ddd47ba5c41d896eabf94d9773473@maanmittauslaitos.fi>

Hi,

There is a question about HDF4 in https://gis.stackexchange.com/questions/424204/convert-geotiff-to-hdf-using-gdal.
I tried the same with GDAL 3.4.0. With a single band image conversion from GeoTIFF into HDF4Image succeeds but with a 3 band image not. I am not sure if it is even supposed to work and the driver test in https://github.com/OSGeo/gdal/blob/master/autotest/gcore/hdf4_write.py is rather simplistic.
So, should "gdal_translate -of HDF4Image 3band.tif out3band.h4" work?

-Jukka Rahkonen-

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220218/e9af44c7/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Feb 18 04:44:32 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Fri, 18 Feb 2022 12:44:32 +0000
Subject: [gdal-dev] Gdal_translate into HDF4 fails
Message-ID: <f89d609aa62443729bd865779f82d5a4@maanmittauslaitos.fi>

More information, probably it does not fail but it is extremely slow. After 15 minutes I am now at this stage

gdal_translate -of HDF4Image 3band.tif out.h4 --debug on
GDAL: GDALOpen(3band.tif, this=00000215A20D36A0) succeeds as GTiff.
Input file size is 12000, 12000
GDAL: QuietDelete(out.h4) invoking Delete()
GDAL: GDALOpen(out.h4, this=00000215A20BF880) succeeds as HDF4.
GDALPamDataset: In destructor with dirty metadata.
GDAL: GDALClose(out.h4, this=00000215A20BF880)
GTiff: ScanDirectories()
GDAL: GDALDefaultOverviews::OverviewScan()
GDAL: Using default GDALDriver::CreateCopy implementation.
0GDAL: GDALDriver::Create(HDF4Image,out.h4,12000,12000,3,Byte,0000000000000000)
GDAL: GDAL_CACHEMAX = 1632 MB
GDAL: GDALDatasetCopyWholeRaster(): 12000*83 swaths, bInterleave=1
...10...20...30...40...50...60...70...80...90...100 - done.
GDAL: Flushing dirty blocks: 0...10...20...30...40...50...60...70...80...90...100 - done.
GDAL: Flushing dirty blocks: 0...10...20...30.


-Jukka-


L?hett?j?: Rahkonen Jukka (MML)
L?hetetty: perjantai 18. helmikuuta 2022 14.09
Vastaanottaja: 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
Aihe: Gdal_translate into HDF4 fails

Hi,

There is a question about HDF4 in https://gis.stackexchange.com/questions/424204/convert-geotiff-to-hdf-using-gdal.
I tried the same with GDAL 3.4.0. With a single band image conversion from GeoTIFF into HDF4Image succeeds but with a 3 band image not. I am not sure if it is even supposed to work and the driver test in https://github.com/OSGeo/gdal/blob/master/autotest/gcore/hdf4_write.py is rather simplistic.
So, should "gdal_translate -of HDF4Image 3band.tif out3band.h4" work?

-Jukka Rahkonen-

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220218/741edfcc/attachment.html>

From even.rouault at spatialys.com  Fri Feb 18 05:12:08 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 18 Feb 2022 14:12:08 +0100
Subject: [gdal-dev] Gdal_translate into HDF4 fails
In-Reply-To: <f89d609aa62443729bd865779f82d5a4@maanmittauslaitos.fi>
References: <f89d609aa62443729bd865779f82d5a4@maanmittauslaitos.fi>
Message-ID: <d5a49293-c045-c8ce-76b6-d1fd5a7d3ca4@spatialys.com>

yes, this is sluggish . I just converted a 18002x22000 byte 3-band 
dataset in 28 minutes.

Le 18/02/2022 ? 13:44, Rahkonen Jukka (MML) a ?crit?:
>
> More information, probably it does not fail but it is extremely slow. 
> After 15 minutes I am now at this stage
>
> gdal_translate -of HDF4Image 3band.tif out.h4 --debug on
>
> GDAL: GDALOpen(3band.tif, this=00000215A20D36A0) succeeds as GTiff.
>
> Input file size is 12000, 12000
>
> GDAL: QuietDelete(out.h4) invoking Delete()
>
> GDAL: GDALOpen(out.h4, this=00000215A20BF880) succeeds as HDF4.
>
> GDALPamDataset: In destructor with dirty metadata.
>
> GDAL: GDALClose(out.h4, this=00000215A20BF880)
>
> GTiff: ScanDirectories()
>
> GDAL: GDALDefaultOverviews::OverviewScan()
>
> GDAL: Using default GDALDriver::CreateCopy implementation.
>
> 0GDAL: 
> GDALDriver::Create(HDF4Image,out.h4,12000,12000,3,Byte,0000000000000000)
>
> GDAL: GDAL_CACHEMAX = 1632 MB
>
> GDAL: GDALDatasetCopyWholeRaster(): 12000*83 swaths, bInterleave=1
>
> ...10...20...30...40...50...60...70...80...90...100 - done.
>
> GDAL: Flushing dirty blocks: 
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> GDAL: Flushing dirty blocks: 0...10...20...30.
>
> -Jukka-
>
> *L?hett?j?:*Rahkonen Jukka (MML)
> *L?hetetty:* perjantai 18. helmikuuta 2022 14.09
> *Vastaanottaja:* 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
> *Aihe:* Gdal_translate into HDF4 fails
>
> Hi,
>
> There is a question about HDF4 in 
> https://gis.stackexchange.com/questions/424204/convert-geotiff-to-hdf-using-gdal.
>
> I tried the same with GDAL 3.4.0. With a single band image conversion 
> from GeoTIFF into HDF4Image succeeds but with a 3 band image not. I am 
> not sure if it is even supposed to work and the driver test in 
> https://github.com/OSGeo/gdal/blob/master/autotest/gcore/hdf4_write.py 
> is rather simplistic.
>
> So, should ?gdal_translate -of HDF4Image 3band.tif out3band.h4? work?
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220218/69fcb90f/attachment.html>

From loridigia at gmail.com  Fri Feb 18 06:24:10 2022
From: loridigia at gmail.com (Lorenzo Di Giacomo)
Date: Fri, 18 Feb 2022 15:24:10 +0100
Subject: [gdal-dev] Gdal_translate into HDF4 fails
In-Reply-To: <d5a49293-c045-c8ce-76b6-d1fd5a7d3ca4@spatialys.com>
References: <f89d609aa62443729bd865779f82d5a4@maanmittauslaitos.fi>
 <d5a49293-c045-c8ce-76b6-d1fd5a7d3ca4@spatialys.com>
Message-ID: <CAERmyNRy8ygFDV6Z5sctun26SDj3Bi1ZGH4gSfppSOKcgTxc_A@mail.gmail.com>

Hi guys, i was reading the question and i was wondering if it's possibile
do the same translate operation with HDF5, like:
gdal_translate -of HDF5Image 3band.tif out.h5, i tried but doesn't work and
says "

HDF5 driver has no creation capabilities."

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220218/c2d7216f/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Feb 18 06:33:55 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Fri, 18 Feb 2022 14:33:55 +0000
Subject: [gdal-dev] Gdal_translate into HDF4 fails
Message-ID: <328cb5c43dcc4500b6785825a97e77e2@maanmittauslaitos.fi>

Hi,

That HDF5 driver is read-only is documented in https://gdal.org/drivers/raster/hdf5.html so that the driver capabilities are missing Supports CreateCopy() and Supports Create()

Same metadata is available with gdalinfo --format [format_name].

(But metadata is wrong for HDF4 and capabilities are missing, I wonder how to fix that)
gdalinfo --format hdf4
Format Details:
  Short Name: HDF4
  Long Name: Hierarchical Data Format Release 4
  Supports: Raster
  Supports: Multidimensional raster
  Extension: hdf
  Help Topic: drivers/raster/hdf4.html
  Supports: Raster subdatasets
  Supports: Open() - Open existing dataset.

-Jukka Rahkonen-

L?hett?j?: Lorenzo Di Giacomo <loridigia at gmail.com>
L?hetetty: perjantai 18. helmikuuta 2022 16.24
Vastaanottaja: Even Rouault <even.rouault at spatialys.com>
Kopio: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>; 'gdal-dev at lists.osgeo.org' (gdal-dev at lists.osgeo.org) <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] Gdal_translate into HDF4 fails

Hi guys, i was reading the question and i was wondering if it's possibile do the same translate operation with HDF5, like:
gdal_translate -of HDF5Image 3band.tif out.h5, i tried but doesn't work and says "

HDF5 driver has no creation capabilities."

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220218/9f23199d/attachment.html>

From even.rouault at spatialys.com  Fri Feb 18 06:39:41 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 18 Feb 2022 15:39:41 +0100
Subject: [gdal-dev] Gdal_translate into HDF4 fails
In-Reply-To: <CAERmyNRy8ygFDV6Z5sctun26SDj3Bi1ZGH4gSfppSOKcgTxc_A@mail.gmail.com>
References: <f89d609aa62443729bd865779f82d5a4@maanmittauslaitos.fi>
 <d5a49293-c045-c8ce-76b6-d1fd5a7d3ca4@spatialys.com>
 <CAERmyNRy8ygFDV6Z5sctun26SDj3Bi1ZGH4gSfppSOKcgTxc_A@mail.gmail.com>
Message-ID: <52094bb9-4222-85a2-4daf-28164546680a@spatialys.com>

if you gdal_translate -of netCDF -co FORMAT=NC4 , the resulting netCDF 
file will actually be a HDF5 file (with netCDF "decorations"):

- https://gdal.org/drivers/raster/netcdf.html#creation-options

- 
https://www.unidata.ucar.edu/software/netcdf/docs/interoperability_hdf5.html

Le 18/02/2022 ? 15:24, Lorenzo Di Giacomo a ?crit?:
> Hi guys, i was reading the question and i was wondering if it's 
> possibile do the same translate operation with HDF5, like:
> gdal_translate -of HDF5Image 3band.tif out.h5, i tried but doesn't 
> work and says "
>
> HDF5 driver has no creation capabilities."
>
> Thanks
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220218/247453e2/attachment.html>

From loridigia at gmail.com  Fri Feb 18 07:08:32 2022
From: loridigia at gmail.com (Lorenzo Di Giacomo)
Date: Fri, 18 Feb 2022 16:08:32 +0100
Subject: [gdal-dev] Gdal_translate into HDF4 fails
In-Reply-To: <52094bb9-4222-85a2-4daf-28164546680a@spatialys.com>
References: <f89d609aa62443729bd865779f82d5a4@maanmittauslaitos.fi>
 <d5a49293-c045-c8ce-76b6-d1fd5a7d3ca4@spatialys.com>
 <CAERmyNRy8ygFDV6Z5sctun26SDj3Bi1ZGH4gSfppSOKcgTxc_A@mail.gmail.com>
 <52094bb9-4222-85a2-4daf-28164546680a@spatialys.com>
Message-ID: <CAERmyNSpmRkbj4CZ93hYfzyr4cx7DKt9hmh_JtsXwLyS==i5QQ@mail.gmail.com>

Cool, i tired and actually works, but just a question, is it normal that
using gdal_translate -of netCDF -co FORMAT=NC4  the resulting image is
rotated by 180? (Upside down)? Thanks

Il giorno ven 18 feb 2022 alle ore 15:39 Even Rouault <
even.rouault at spatialys.com> ha scritto:

> if you gdal_translate -of netCDF -co FORMAT=NC4 , the resulting netCDF
> file will actually be a HDF5 file (with netCDF "decorations"):
>
> - https://gdal.org/drivers/raster/netcdf.html#creation-options
>
> -
> https://www.unidata.ucar.edu/software/netcdf/docs/interoperability_hdf5.html
> Le 18/02/2022 ? 15:24, Lorenzo Di Giacomo a ?crit :
>
> Hi guys, i was reading the question and i was wondering if it's possibile
> do the same translate operation with HDF5, like:
> gdal_translate -of HDF5Image 3band.tif out.h5, i tried but doesn't work
> and says "
>
> HDF5 driver has no creation capabilities."
>
> Thanks
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220218/adb26c1f/attachment.html>

From maphew at gmail.com  Fri Feb 18 11:19:21 2022
From: maphew at gmail.com (Matt Wilkie)
Date: Fri, 18 Feb 2022 12:19:21 -0700
Subject: [gdal-dev] Use GitPod for GDAL?
Message-ID: <CANGB9XQYwGK05WH1yp+Rpvs-sHW5C8f7-dfJQO1iis0k+7K2pg@mail.gmail.com>

Hi,

Does anyone know how to use https://gitpod.io to set up a gdal development
environment? I'm wondering if that might be an easy path for Windows folk
like myself to test changes against linux (e.g. like this one
https://github.com/OSGeo/gdal/pull/5296#issuecomment-1037141210).

I've tried creating one straight from Github repo using the GitPod browser
extension for Firefox. It appears to work quite well but there are errors
indicating some dependencies are missing.

No PROJ_DIR being the first. I attempted to remedy that with:

sudo apt-get install proj-bin

which worked well enough, but then "Could not find gdal-config. Make sure
you have installed the GDAL native library and development headers." and so
on when attempting to install python wheel.

-matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220218/2d854e79/attachment.html>

From adamgutonski at protonmail.com  Fri Feb 18 13:55:33 2022
From: adamgutonski at protonmail.com (adamgutonski)
Date: Fri, 18 Feb 2022 21:55:33 +0000
Subject: [gdal-dev] Followup to Matching ESRI projection/transformations
 using GDAL/OSR
Message-ID: <21UJubTye9hy409nexSwlhFIGKZFt9X_s5BMcA3pI-0AmaJgoBSGApxSmuCnoXYpGaabYslKMoA3ES_SwxVBQLBVfjdKpxALjHngEpjcYPo=@protonmail.com>

Hello,

I recently messaged about matching projection/transformations between GDAL/OSR and ESRI (gdal-dev Digest, Vol 213, Issue 35).

I had two follow-up questions regarding transforming from a geographic CRS to a projected CRS. When transforming from EPSG:6318 to a projected CRS EPSG:32015, the point values I receive are different than in ESRI. My first question is, when I am setting the osr.SetAxisMappingStrategy(osr.OAMS_TRADITIONAL_GIS_ORDER) parameter for EPSG:6318, why would the transformation points be different?

My second question is regarding the compound transformation that ESRI applies. In this example ArcPy uses the "WGS_1984_(ITRF00)_To_NAD_1983_2011 + NAD_1927_To_WGS_1984_3" transformation to project between EPSG:6318 and EPSG:32015. Is there a way to replicate such a transformation using the python GDAL/OSR libraries?

ESRI code:

arc_fromsr = arcpy.

SpatialReference

(6318)

arc_tosr = arcpy.

SpatialReference

(32015)

arcpoint = arcpy.

PointGeometry

(

arcpy.

Point

(

*

test_coords)

, arc_fromsr

)

transformers = arcpy.

ListTransformations

(

arc_fromsr, arc_tosr

)
# transformers[0] is WGS_1984_(ITRF00)_To_NAD_1983_2011 + NAD_1927_To_WGS_1984_3

new_arcpoint = arcpoint.

projectAs

(

arc_tosr, transformers

[0])

GDAL\OSR code:

to_nad = osr.

SpatialReference

()

to_nad.

ImportFromEPSG

(6318)

to_nad.

SetAxisMappingStrategy

(

osr.OAMS_TRADITIONAL_GIS_ORDER

)

final = osr.

SpatialReference

()

final.

ImportFromEPSG

(32015)

outpoint = ogr.

Geometry

(

ogr.wkbPoint

)

outpoint.

AddPoint_2D

(

*

test_coords)

outpoint.

AssignSpatialReference

(

to_nad

)

outpoint.

TransformTo

(

final

)

Input test coordinate: -73.964183, 40.785075

GDAL\OSR transformation output: 602119.3891505665, 286201.7616068426

ESRI\ArcPy transformation output: 602115.6116177095, 286190.512887311

Any help is again, greatly appreciated.

Sincerely,
Adam Gutonski

Sent with [ProtonMail](https://protonmail.com/) Secure Email.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220218/4562ce4a/attachment.html>

From maphew at gmail.com  Fri Feb 18 14:34:19 2022
From: maphew at gmail.com (Matt Wilkie)
Date: Fri, 18 Feb 2022 15:34:19 -0700
Subject: [gdal-dev] Use GitPod for GDAL?
In-Reply-To: <CANGB9XQYwGK05WH1yp+Rpvs-sHW5C8f7-dfJQO1iis0k+7K2pg@mail.gmail.com>
References: <CANGB9XQYwGK05WH1yp+Rpvs-sHW5C8f7-dfJQO1iis0k+7K2pg@mail.gmail.com>
Message-ID: <CANGB9XS6JX2DYYa3sRrRPGZ88+vXgzq3R63HtqjubW=kzbfxwQ@mail.gmail.com>

This what I've come up with:

https://gitpod.io

Create new >> search for gdal >> select OSGeo/gdal


On launch:



-- Could NOT find PROJ (missing: PROJ_DIR)

CMake Error at
/home/linuxbrew/.linuxbrew/Cellar/cmake/3.22.2/share/cmake/Modules/FindPackageHandleStandardArgs.cmake:230
(message):

  Could NOT find PROJ (missing: PROJ_LIBRARY PROJ_INCLUDE_DIR) (Required is

  at least version "6.0")

Call Stack (most recent call first):

  /home/linuxbrew/.linuxbrew/Cellar/cmake/3.22.2/share/cmake/Modules/FindPackageHandleStandardArgs.cmake:594
(_FPHSA_FAILURE_MESSAGE)

  cmake/modules/packages/FindPROJ.cmake:57
(find_package_handle_standard_args)

  cmake/helpers/CheckDependentLibraries.cmake:303 (find_package)

  gdal.cmake:210 (include)

  CMakeLists.txt:206 (include)



Attempted to remedy this with `sudo apt install proj-bin` but same error
from `cmake .`



----------------------------------------------------------------------------------




The below adapted from
https://github.com/maphew/gdal/blob/pr-5281-redux/CONTRIBUTING.md



cd /workspace/gdal

./autogen.sh

./configure --with-python



Fails with "configure: error: PROJ 6 symbols not found".

tried `sudo apt install proj-bin` and repeated above, same error.

Version of proj that's installed with this is 6.3.1.



Try building Proj from source (takes awhile):



cd /workspace

wget https://download.osgeo.org/proj/proj-6.3.1.tar.gz

tar zxf proj-*.gz

cd proj-6.3.1

./configure

make && sudo make install



Now try again (takes much longer):



cd /workspace/gdal

./autogen.sh

./configure --with-python

make -j8

sudo make install



It works!



. scripts/setdevenv.sh

gdalinfo --version

GDAL 3.5.0dev-39057d7396, released 2022/02/18


uname -a
inux osgeo-gdal-j6a7bhjf0c8 5.13.0-1013-gcp #16-Ubuntu SMP Tue Jan 18
14:31:35 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux

I'm still unable to successfully install a python wheel of gdal-utils,
because pip is calling g++ which in turn is not finding libgdal, but it
still feels like significant progress to get this far! :)

-matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220218/0a97a2da/attachment-0001.html>

From even.rouault at spatialys.com  Fri Feb 18 14:38:23 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 18 Feb 2022 23:38:23 +0100
Subject: [gdal-dev] Use GitPod for GDAL?
In-Reply-To: <CANGB9XS6JX2DYYa3sRrRPGZ88+vXgzq3R63HtqjubW=kzbfxwQ@mail.gmail.com>
References: <CANGB9XQYwGK05WH1yp+Rpvs-sHW5C8f7-dfJQO1iis0k+7K2pg@mail.gmail.com>
 <CANGB9XS6JX2DYYa3sRrRPGZ88+vXgzq3R63HtqjubW=kzbfxwQ@mail.gmail.com>
Message-ID: <f93dfc8d-c354-4a7d-9ca4-4db41334879a@spatialys.com>

Matt,

you need to install the "libproj-dev" package.

Looking at the CI build recipees is a source of good hints in general: 
https://github.com/OSGeo/gdal/blob/6e6aff451dbcde450f051bff2f2e75ce6a4a3e6f/.github/workflows/cmake_builds.yml#L38 
(this one has pretty much all the pre packaged dependencies. you don't 
need all that)

Even

Le 18/02/2022 ? 23:34, Matt Wilkie a ?crit?:
> This what I've come up with:
>
> https://gitpod.io
>
> Create new >> search for gdal >> select OSGeo/gdal
>
>
> On launch:
>
> -- Could NOT find PROJ (missing: PROJ_DIR)
>
> CMake Error at 
> /home/linuxbrew/.linuxbrew/Cellar/cmake/3.22.2/share/cmake/Modules/FindPackageHandleStandardArgs.cmake:230 
> (message):
>
> Could NOT find PROJ (missing: PROJ_LIBRARY PROJ_INCLUDE_DIR) (Required is
>
> at least version "6.0")
>
> Call Stack (most recent call first):
>
> /home/linuxbrew/.linuxbrew/Cellar/cmake/3.22.2/share/cmake/Modules/FindPackageHandleStandardArgs.cmake:594 
> (_FPHSA_FAILURE_MESSAGE)
>
> cmake/modules/packages/FindPROJ.cmake:57 
> (find_package_handle_standard_args)
>
> cmake/helpers/CheckDependentLibraries.cmake:303 (find_package)
>
> gdal.cmake:210 (include)
>
> CMakeLists.txt:206 (include)
>
> Attempted to remedy this with `sudo apt install proj-bin` but same 
> error from `cmake .`
>
> ---------------------------------------------------------------------------------- 
>
>
> The below adapted from 
> https://github.com/maphew/gdal/blob/pr-5281-redux/CONTRIBUTING.md
>
> cd /workspace/gdal
>
> ./autogen.sh
>
> ./configure --with-python
>
> Fails with "configure: error: PROJ 6 symbols not found".
>
> tried `sudo apt install proj-bin` and repeated above, same error.
>
> Version of proj that's installed with this is 6.3.1.
>
> Try building Proj from source (takes awhile):
>
> cd /workspace
>
> wget https://download.osgeo.org/proj/proj-6.3.1.tar.gz 
> <https://download.osgeo.org/proj/proj-6.3.1.tar.gz>
>
> tar zxf proj-*.gz
>
> cd proj-6.3.1
>
> ./configure
>
> make && sudo make install
>
> Now try again (takes much longer):
>
> cd /workspace/gdal
>
> ./autogen.sh
>
> ./configure --with-python
>
> make -j8
>
> sudo make install
>
> It works!
>
> . scripts/setdevenv.sh
>
> gdalinfo --version
>
> GDAL 3.5.0dev-39057d7396, released 2022/02/18
>
>
> uname -a
> inux osgeo-gdal-j6a7bhjf0c8 5.13.0-1013-gcp #16-Ubuntu SMP Tue Jan 18 
> 14:31:35 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux
>
>
> I'm still unable to successfully install a python wheel of gdal-utils, 
> because pip is calling g++ which in turn is not finding libgdal, but 
> it still feels like significant progress to get this far! :)
>
> -matt
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220218/d18ed119/attachment.html>

From maphew at gmail.com  Sun Feb 20 07:59:08 2022
From: maphew at gmail.com (Matt Wilkie)
Date: Sun, 20 Feb 2022 08:59:08 -0700
Subject: [gdal-dev] docker images and gdal versions
Message-ID: <CANGB9XSm5Zm7ngmoSos+VX0V+=O3NE5FAZyRL=YvOc7m2ethMQ@mail.gmail.com>

I've been hearing of Docker for some time but haven't really tried to use
it until this weekend. I'm early in the journey but I begin to see what the
fuss is about. A quick question: what gdal version(s) should I see when
pulling the image names I see in `gdal/docker` tree?

With "osgeo/gdal:ubuntu-small-latest" I get "GDAL
3.4.0dev-bcadaf0a530715db604aaddcd66362c25b71e58c, released 2021/10/07". I
expected it to correspond to https://github.com/OSGeo/gdal/releases latest,
so 3.4.1. Is there a different image name or names I could be using?

-matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220220/9f3e9ede/attachment.html>

From even.rouault at spatialys.com  Sun Feb 20 11:10:01 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 20 Feb 2022 20:10:01 +0100
Subject: [gdal-dev] docker images and gdal versions
In-Reply-To: <CANGB9XSm5Zm7ngmoSos+VX0V+=O3NE5FAZyRL=YvOc7m2ethMQ@mail.gmail.com>
References: <CANGB9XSm5Zm7ngmoSos+VX0V+=O3NE5FAZyRL=YvOc7m2ethMQ@mail.gmail.com>
Message-ID: <4df87524-75a2-a8db-fa4b-a501b9e61b6a@spatialys.com>

Matt,

Le 20/02/2022 ? 16:59, Matt Wilkie a ?crit?:
> I've been hearing of Docker for some time but haven't really tried to 
> use it until this weekend. I'm early in the journey but I begin to see 
> what the fuss is about. A quick question: what gdal version(s) should 
> I see when pulling the image names I see in `gdal/docker` tree?
>
> With "osgeo/gdal:ubuntu-small-latest" I get "GDAL 
> 3.4.0dev-bcadaf0a530715db604aaddcd66362c25b71e58c, released 
> 2021/10/07". I expected it to correspond to 
> https://github.com/OSGeo/gdal/releases latest, so 3.4.1. Is there a 
> different image name or names I could be using?

See 
https://github.com/OSGeo/gdal/blob/master/docker/README.md#images-of-releases

Even

>
> -matt
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Sun Feb 20 13:50:44 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 20 Feb 2022 22:50:44 +0100
Subject: [gdal-dev] docker images and gdal versions
In-Reply-To: <4df87524-75a2-a8db-fa4b-a501b9e61b6a@spatialys.com>
References: <CANGB9XSm5Zm7ngmoSos+VX0V+=O3NE5FAZyRL=YvOc7m2ethMQ@mail.gmail.com>
 <4df87524-75a2-a8db-fa4b-a501b9e61b6a@spatialys.com>
Message-ID: <72e69136-b581-040e-3c35-355a8b9d3f9e@spatialys.com>


Le 20/02/2022 ? 20:10, Even Rouault a ?crit?:
> Matt,
>
> Le 20/02/2022 ? 16:59, Matt Wilkie a ?crit?:
>> I've been hearing of Docker for some time but haven't really tried to 
>> use it until this weekend. I'm early in the journey but I begin to 
>> see what the fuss is about. A quick question: what gdal version(s) 
>> should I see when pulling the image names I see in `gdal/docker` tree?
>>
>> With "osgeo/gdal:ubuntu-small-latest" I get "GDAL 
>> 3.4.0dev-bcadaf0a530715db604aaddcd66362c25b71e58c, released 
>> 2021/10/07". I expected it to correspond to 
>> https://github.com/OSGeo/gdal/releases latest, so 3.4.1. Is there a 
>> different image name or names I could be using?
>
> See 
> https://github.com/OSGeo/gdal/blob/master/docker/README.md#images-of-releases
Ah and if Javier pointed to me your question was why the dev version was 
3.4.0dev and not 3.5.0dev, it is because the VERSION file wasn't updated 
to 3.5.0 yet the last time the image was generated
>
> Even
>
>>
>> -matt
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From adamsubscribe at googlemail.com  Mon Feb 21 01:14:01 2022
From: adamsubscribe at googlemail.com (Adam Akhtar)
Date: Mon, 21 Feb 2022 18:14:01 +0900
Subject: [gdal-dev] "tolerance condition error" on reprojecting natural
 earth data to webmercator (3857)
Message-ID: <CAM9qkVknkNcSWwXvK1t711OxSwrHjQkJ2B14vAEjg37AJkChcg@mail.gmail.com>

Hi,

I'm getting a "tolerance condition error" when trying to reproject Natural
Earth data into webmercator 3857 using ogr2ogr.

These are the commands I am running

```
wget https://naturalearth.s3.amazonaws.com/10m_physical/ne_10m_ocean.zip
unzip ne_10m_ocean.zip

// reproject the unzipped shape file
OGR_ENABLE_PARTIAL_REPROJECTION=true ogr2ogr -unsetFieldWidth -t_srs
EPSG:3857 -nlt PROMOTE_TO_MULTI -f PostgreSQL PG:"dbname='ogr'
host='localhost' port='5432' user='myusername password='redacted'"
ne_10m_ocean.shp
```

This results in the following output

```
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: tolerance condition error
ERROR 1: Reprojection failed, err = -20, further errors will be suppressed
on the transform object.
```

I'm sure this used to run fine a few months ago so I'm not sure why it is
suddenly breaking.

This happens on both my arm Mac and my Intel server instance.

Server instance:
EC2 M5 Intel with Ubuntu 20.04.3 LTS
GDAL 3.3.2, released 2021/09/01

Mac
M1 Arm Mac Big Sur 11.6
GDAL 3.3.3, released 2021/10/25

Is this or a bug or am I incorrectly using the command? Any help will be
greatly appreciated.

Adam
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220221/307b25fd/attachment.html>

From lists at home.gofferje.net  Mon Feb 21 01:21:10 2022
From: lists at home.gofferje.net (Stefan Gofferje)
Date: Mon, 21 Feb 2022 11:21:10 +0200
Subject: [gdal-dev] Good morning all and question: Good Python GDAL beginner
 tutorial?
Message-ID: <8ed823fa-2bd2-45a5-848f-0166ba167c88@home.gofferje.net>

Good morning all!

New member here, Stefan, 51, German in Finland. I'm somewhat of a map 
addict - have been interested in this topic since my teenage years, 
although I don't have any GIS or related background. I have been using 
GDAL indirectly through QGIS and directly through scripts for a bunch of 
years now but mostly in form of the command line tools. When I started 
renovating my weather website, I had my first ideas of moving to GDAL 
(from GrADS) but I very quickly ran into the limits of using command 
line tools. Now I have another personal project involving Sentinel 
satellite data and I ran into the same issues, so I guess it's time for 
me to have a look at Python...

Could anybody point me to a good, hands-on Python-GDAL beginner 
tutorial. Something where I can learn Python and Python-GDAL at the same 
time, maybe?

Have a great week!
-Stefan

-- 
  (o_   Stefan Gofferje            | SCLT, MCP, CCSA
  //\   Reg'd Linux User #247167   | VCP #2263
  V_/_  https://www.gofferje.net   | https://www.saakeskus.fi


From lists at home.gofferje.net  Mon Feb 21 04:14:38 2022
From: lists at home.gofferje.net (Stefan Gofferje)
Date: Mon, 21 Feb 2022 14:14:38 +0200
Subject: [gdal-dev] Good morning all and question: Good Python GDAL
 beginner tutorial?
In-Reply-To: <eba1c240-6c6b-edcc-75db-c2c11e16a7a6@upm.es>
References: <8ed823fa-2bd2-45a5-848f-0166ba167c88@home.gofferje.net>
 <eba1c240-6c6b-edcc-75db-c2c11e16a7a6@upm.es>
Message-ID: <823e67a0-8c4c-939f-dde1-06b4118231cf@home.gofferje.net>

Hi,

On 2/21/22 12:51, Miguel A. Manso wrote:
> The cookbook v1 (https://pcjericks.github.io/py-gdalogr-cookbook/) may 
> be a good starting point.

THAT is very cool and almost exactly what I was looking for! Thanks a bunch!

> But previos to it you need to install a python developong enviroment. 
> You can trial with miniconda3 software and then creating a new 
> environment and installing GDAL libraries.

I'm on Linux since 1996, but thanks anyways :).

-S

-- 
  (o_   Stefan Gofferje            | SCLT, MCP, CCSA
  //\   Reg'd Linux User #247167   | VCP #2263
  V_/_  https://www.gofferje.net   | https://www.saakeskus.fi


From jluis at ualg.pt  Mon Feb 21 06:27:03 2022
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Mon, 21 Feb 2022 14:27:03 +0000
Subject: [gdal-dev] Good morning all and question: Good Python GDAL
 beginner tutorial?
In-Reply-To: <823e67a0-8c4c-939f-dde1-06b4118231cf@home.gofferje.net>
References: <8ed823fa-2bd2-45a5-848f-0166ba167c88@home.gofferje.net>
 <eba1c240-6c6b-edcc-75db-c2c11e16a7a6@upm.es>
 <823e67a0-8c4c-939f-dde1-06b4118231cf@home.gofferje.net>
Message-ID: <AM6PR04MB39592BA2C2DE6603FD339E89A63A9@AM6PR04MB3959.eurprd04.prod.outlook.com>

And if you are open to non-Python alternatives and more upper level, I have this small Julia package tailored for satellite data.

https://github.com/GenericMappingTools/RemoteS.jl

Joaquim

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Stefan Gofferje
Sent: Monday, February 21, 2022 12:15 PM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Good morning all and question: Good Python GDAL beginner tutorial?

Hi,

On 2/21/22 12:51, Miguel A. Manso wrote:
> The cookbook v1 (https://pcjericks.github.io/py-gdalogr-cookbook/) may 
> be a good starting point.

THAT is very cool and almost exactly what I was looking for! Thanks a bunch!

> But previos to it you need to install a python developong enviroment. 
> You can trial with miniconda3 software and then creating a new 
> environment and installing GDAL libraries.

I'm on Linux since 1996, but thanks anyways :).

-S

-- 
  (o_   Stefan Gofferje            | SCLT, MCP, CCSA
  //\   Reg'd Linux User #247167   | VCP #2263
  V_/_  https://www.gofferje.net   | https://www.saakeskus.fi

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From alansnow21 at gmail.com  Mon Feb 21 07:40:28 2022
From: alansnow21 at gmail.com (Alan Snow)
Date: Mon, 21 Feb 2022 09:40:28 -0600
Subject: [gdal-dev] Good morning all and question: Good Python GDAL
 beginner tutorial?
In-Reply-To: <AM6PR04MB39592BA2C2DE6603FD339E89A63A9@AM6PR04MB3959.eurprd04.prod.outlook.com>
References: <8ed823fa-2bd2-45a5-848f-0166ba167c88@home.gofferje.net>
 <eba1c240-6c6b-edcc-75db-c2c11e16a7a6@upm.es>
 <823e67a0-8c4c-939f-dde1-06b4118231cf@home.gofferje.net>
 <AM6PR04MB39592BA2C2DE6603FD339E89A63A9@AM6PR04MB3959.eurprd04.prod.outlook.com>
Message-ID: <CAGybdFQVE2P3tKk00fxx4-DPez0gNpjnVHLp6v5NaWXG6o+Seg@mail.gmail.com>

These are also some good resources for GDAL Python:

   - https://carpentries-incubator.github.io/geospatial-python/
   - https://www.earthdatascience.org/tutorials/python/
   -
   https://corteva.github.io/rioxarray/stable/getting_started/getting_started.html
   - https://geopandas.org/en/stable/getting_started.html
   - https://rasterio.readthedocs.io/en/latest/index.html
   - https://fiona.readthedocs.io/en/latest/



On Mon, Feb 21, 2022 at 8:27 AM Joaquim Manuel Freire Lu?s <jluis at ualg.pt>
wrote:

> And if you are open to non-Python alternatives and more upper level, I
> have this small Julia package tailored for satellite data.
>
> https://github.com/GenericMappingTools/RemoteS.jl
>
> Joaquim
>
> -----Original Message-----
> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Stefan
> Gofferje
> Sent: Monday, February 21, 2022 12:15 PM
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Good morning all and question: Good Python GDAL
> beginner tutorial?
>
> Hi,
>
> On 2/21/22 12:51, Miguel A. Manso wrote:
> > The cookbook v1 (https://pcjericks.github.io/py-gdalogr-cookbook/) may
> > be a good starting point.
>
> THAT is very cool and almost exactly what I was looking for! Thanks a
> bunch!
>
> > But previos to it you need to install a python developong enviroment.
> > You can trial with miniconda3 software and then creating a new
> > environment and installing GDAL libraries.
>
> I'm on Linux since 1996, but thanks anyways :).
>
> -S
>
> --
>   (o_   Stefan Gofferje            | SCLT, MCP, CCSA
>   //\   Reg'd Linux User #247167   | VCP #2263
>   V_/_  https://www.gofferje.net   | https://www.saakeskus.fi
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Alan Snow
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220221/218d51b9/attachment-0001.html>

From lists at home.gofferje.net  Mon Feb 21 09:28:13 2022
From: lists at home.gofferje.net (Stefan Gofferje)
Date: Mon, 21 Feb 2022 19:28:13 +0200
Subject: [gdal-dev] Lightweight GIS CMS recommendations?
Message-ID: <5cd2f6fa-570a-8455-d80d-2c9129819d91@home.gofferje.net>

Hey!

Here is my second question of the day... Is there any _lightweight_ GIS 
CMS? Something where I just upload some resource and it's added to a 
Leaflet map or something like that? I'm not opposed to knitting 
something myself with NodeJS but I thought, I ask, just in case.
I have found GeoNode but that seems to be a monster and needs a 
GeoServer backend (eeeks, Java...). I also found Sahana and Ushahidi - 
which both look cool, especially for another project I have on my 
wishlist - but they also don't seem overly lightweight and there don't 
seem to be any well-maintained and documented docker images.

-S

-- 
  (o_   Stefan Gofferje            | SCLT, MCP, CCSA
  //\   Reg'd Linux User #247167   | VCP #2263
  V_/_  https://www.gofferje.net   | https://www.saakeskus.fi


From jesdial at gmail.com  Mon Feb 21 09:43:27 2022
From: jesdial at gmail.com (=?UTF-8?B?SmVzw7pzIGRlIERpZWdvIEFsYXJjw7Nu?=)
Date: Mon, 21 Feb 2022 18:43:27 +0100
Subject: [gdal-dev] Lightweight GIS CMS recommendations?
In-Reply-To: <5cd2f6fa-570a-8455-d80d-2c9129819d91@home.gofferje.net>
References: <5cd2f6fa-570a-8455-d80d-2c9129819d91@home.gofferje.net>
Message-ID: <CAE_OVyS7szJ4=BJQQCGXfTp02_EnGLPJwTaXvE6CyF16jcAQfQ@mail.gmail.com>

GeoNode?

El lun., 21 feb. 2022 18:28, Stefan Gofferje <lists at home.gofferje.net>
escribi?:

> Hey!
>
> Here is my second question of the day... Is there any _lightweight_ GIS
> CMS? Something where I just upload some resource and it's added to a
> Leaflet map or something like that? I'm not opposed to knitting
> something myself with NodeJS but I thought, I ask, just in case.
> I have found GeoNode but that seems to be a monster and needs a
> GeoServer backend (eeeks, Java...). I also found Sahana and Ushahidi -
> which both look cool, especially for another project I have on my
> wishlist - but they also don't seem overly lightweight and there don't
> seem to be any well-maintained and documented docker images.
>
> -S
>
> --
>   (o_   Stefan Gofferje            | SCLT, MCP, CCSA
>   //\   Reg'd Linux User #247167   | VCP #2263
>   V_/_  https://www.gofferje.net   | https://www.saakeskus.fi
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220221/0206a3a4/attachment.html>

From lists at home.gofferje.net  Mon Feb 21 10:29:38 2022
From: lists at home.gofferje.net (Stefan Gofferje)
Date: Mon, 21 Feb 2022 20:29:38 +0200
Subject: [gdal-dev] Lightweight GIS CMS recommendations?
In-Reply-To: <CAE_OVyS7szJ4=BJQQCGXfTp02_EnGLPJwTaXvE6CyF16jcAQfQ@mail.gmail.com>
References: <5cd2f6fa-570a-8455-d80d-2c9129819d91@home.gofferje.net>
 <CAE_OVyS7szJ4=BJQQCGXfTp02_EnGLPJwTaXvE6CyF16jcAQfQ@mail.gmail.com>
Message-ID: <f52a41ea-cc98-9edd-2215-3b0c75c49d99@home.gofferje.net>

Hi,

On 2/21/22 19:43, Jes?s de Diego Alarc?n wrote:
> GeoNode?

Hmmmmmmm, no.

> El lun., 21 feb. 2022 18:28, Stefan Gofferje <lists at home.gofferje.net 
> <mailto:lists at home.gofferje.net>> escribi?:

[snip]
>     I have found GeoNode but that seems to be a monster and needs a
>     GeoServer backend (eeeks, Java...).
[snap]

-S

-- 
  (o_   Stefan Gofferje            | SCLT, MCP, CCSA
  //\   Reg'd Linux User #247167   | VCP #2263
  V_/_  https://www.gofferje.net   | https://www.saakeskus.fi


From even.rouault at spatialys.com  Tue Feb 22 03:46:57 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 22 Feb 2022 12:46:57 +0100
Subject: [gdal-dev] "tolerance condition error" on reprojecting natural
 earth data to webmercator (3857)
In-Reply-To: <CAM9qkVknkNcSWwXvK1t711OxSwrHjQkJ2B14vAEjg37AJkChcg@mail.gmail.com>
References: <CAM9qkVknkNcSWwXvK1t711OxSwrHjQkJ2B14vAEjg37AJkChcg@mail.gmail.com>
Message-ID: <5f198a42-1256-e311-51e7-e17098a62676@spatialys.com>

This dataset includes latitude up to 90 degree north, which projects to 
infinity in EPSG:3857. You should use the -clipsrc option of ogr2ogr to 
for example cut at 85 degree

Le 21/02/2022 ? 10:14, Adam Akhtar via gdal-dev a ?crit?:
> Hi,
>
> I'm getting a "tolerance condition error" when trying to reproject 
> Natural Earth data into webmercator 3857 using ogr2ogr.
>
> These are the commands I am running
>
> ```
> wget https://naturalearth.s3.amazonaws.com/10m_physical/ne_10m_ocean.zip
> unzip ne_10m_ocean.zip
>
> // reproject the unzipped shape file
> OGR_ENABLE_PARTIAL_REPROJECTION=true ogr2ogr -unsetFieldWidth -t_srs 
> EPSG:3857 -nlt PROMOTE_TO_MULTI -f PostgreSQL PG:"dbname='ogr' 
> host='localhost' port='5432' user='myusername password='redacted'" 
> ne_10m_ocean.shp
> ```
>
> This results in the following output
>
> ```
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: Reprojection failed, err = -20, further errors will be 
> suppressed on the transform object.
> ```
>
> I'm sure this used to run fine a few months ago so I'm not sure why it 
> is suddenly breaking.
>
> This happens on both my arm Mac and my Intel server instance.
>
> Server instance:
> EC2 M5 Intel with Ubuntu 20.04.3 LTS
> GDAL 3.3.2, released 2021/09/01
>
> Mac
> M1 Arm Mac Big Sur 11.6
> GDAL 3.3.3, released 2021/10/25
>
> Is this or a bug or am I incorrectly using the command? Any help will 
> be greatly appreciated.
>
> Adam
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220222/3258db40/attachment.html>

From rupestre.campos at gmail.com  Tue Feb 22 05:01:38 2022
From: rupestre.campos at gmail.com (=?UTF-8?Q?Cain=C3=A3_K=2E_Campos?=)
Date: Tue, 22 Feb 2022 10:01:38 -0300
Subject: [gdal-dev] Lightweight GIS CMS recommendations?
In-Reply-To: <f52a41ea-cc98-9edd-2215-3b0c75c49d99@home.gofferje.net>
References: <5cd2f6fa-570a-8455-d80d-2c9129819d91@home.gofferje.net>
 <CAE_OVyS7szJ4=BJQQCGXfTp02_EnGLPJwTaXvE6CyF16jcAQfQ@mail.gmail.com>
 <f52a41ea-cc98-9edd-2215-3b0c75c49d99@home.gofferje.net>
Message-ID: <CAAvXUUokJsgnftC2oqniq4bWQOBk4XaQ5H4eipBfZcd4fVUwmw@mail.gmail.com>

Hi Stefan,
if geonode is not one option, what about leafmap? You can try to deploy in
a streamlit app
https://leafmap.org/

On Mon, Feb 21, 2022 at 3:30 PM Stefan Gofferje <lists at home.gofferje.net>
wrote:

> Hi,
>
> On 2/21/22 19:43, Jes?s de Diego Alarc?n wrote:
> > GeoNode?
>
> Hmmmmmmm, no.
>
> > El lun., 21 feb. 2022 18:28, Stefan Gofferje <lists at home.gofferje.net
> > <mailto:lists at home.gofferje.net>> escribi?:
>
> [snip]
> >     I have found GeoNode but that seems to be a monster and needs a
> >     GeoServer backend (eeeks, Java...).
> [snap]
>
> -S
>
> --
>   (o_   Stefan Gofferje            | SCLT, MCP, CCSA
>   //\   Reg'd Linux User #247167   | VCP #2263
>   V_/_  https://www.gofferje.net   | https://www.saakeskus.fi
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220222/df06d8b6/attachment.html>

From maphew at gmail.com  Tue Feb 22 06:31:10 2022
From: maphew at gmail.com (Matt Wilkie)
Date: Tue, 22 Feb 2022 07:31:10 -0700
Subject: [gdal-dev] using the docker images: updating?
Message-ID: <CANGB9XSi6dmJdJJTWKGgiuVKdw5pMT=kFuwgHHJvvkYSE1eMzQ@mail.gmail.com>

When using the docker images, particularly 'osogeo/gdal' from docker hub,
sudo isn't available. How does one `apt update` etc?

thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220222/20bd5ae1/attachment.html>

From even.rouault at spatialys.com  Tue Feb 22 06:41:29 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 22 Feb 2022 15:41:29 +0100
Subject: [gdal-dev] using the docker images: updating?
In-Reply-To: <CANGB9XSi6dmJdJJTWKGgiuVKdw5pMT=kFuwgHHJvvkYSE1eMzQ@mail.gmail.com>
References: <CANGB9XSi6dmJdJJTWKGgiuVKdw5pMT=kFuwgHHJvvkYSE1eMzQ@mail.gmail.com>
Message-ID: <55871514-46bf-da4c-f8c6-a9fa1a444162@spatialys.com>

You're root by default inside the container when using docker with 
standard invokation, so no need of sudo

Le 22/02/2022 ? 15:31, Matt Wilkie a ?crit?:
> When using the docker images, particularly 'osogeo/gdal' from docker 
> hub, sudo isn't available. How does one `apt update` etc?
>
> thanks!
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From maphew at gmail.com  Tue Feb 22 07:01:48 2022
From: maphew at gmail.com (Matt Wilkie)
Date: Tue, 22 Feb 2022 08:01:48 -0700
Subject: [gdal-dev] using the docker images: updating?
In-Reply-To: <55871514-46bf-da4c-f8c6-a9fa1a444162@spatialys.com>
References: <CANGB9XSi6dmJdJJTWKGgiuVKdw5pMT=kFuwgHHJvvkYSE1eMzQ@mail.gmail.com>
 <55871514-46bf-da4c-f8c6-a9fa1a444162@spatialys.com>
Message-ID: <CANGB9XQV9Afectsk6drE6cOFpeb76RL96NiPdUimFjauuMtgTQ@mail.gmail.com>

ahh, so I've run into a Gitpod-ism. They automagically create a `gitpod`
user and disable root when importing a docker image. Ok, well I have a
troubleshooting path to follow now. Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220222/29cdee69/attachment.html>

From loridigia at gmail.com  Tue Feb 22 08:09:54 2022
From: loridigia at gmail.com (Lorenzo Di Giacomo)
Date: Tue, 22 Feb 2022 17:09:54 +0100
Subject: [gdal-dev] HDF4Image stuck on translate
Message-ID: <CAERmyNQ_kaX1rauOMpMK5O1jWPrzoeHVt-K3=TTjQXjhVfdThw@mail.gmail.com>

Hi, i'm doing some "conversion" test, from one format to another (mainly
from TIFF to ALL).
I found in HDF4Image driver that on some images, it get stuck.

gdal_translate -of HDF4Image source.tiff dest.hdf

Input file size is 2861, 3635

0...10...20...30...40...50...60...70...80...90...100 - done.

And remain in this state. For image as big as this above, i let it for
about 1 hour and still blocked.
Is it normal that required all this time ? Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220222/d7018994/attachment.html>

From maphew at gmail.com  Tue Feb 22 08:24:45 2022
From: maphew at gmail.com (Matt Wilkie)
Date: Tue, 22 Feb 2022 09:24:45 -0700
Subject: [gdal-dev] Use GitPod for GDAL?
In-Reply-To: <f93dfc8d-c354-4a7d-9ca4-4db41334879a@spatialys.com>
References: <CANGB9XQYwGK05WH1yp+Rpvs-sHW5C8f7-dfJQO1iis0k+7K2pg@mail.gmail.com>
 <CANGB9XS6JX2DYYa3sRrRPGZ88+vXgzq3R63HtqjubW=kzbfxwQ@mail.gmail.com>
 <f93dfc8d-c354-4a7d-9ca4-4db41334879a@spatialys.com>
Message-ID: <CANGB9XSeJAx-Zs+=+S40ieZsna97KmZD=rqAmn_tC-BORajA9w@mail.gmail.com>

I finally have a working recipe for getting Gitpod fired up with a
pre-populated gdal docker image!

At Github repo root create .gitpod.yml:

image:
  file: .gitpod.Dockerfile

And in .gitppod.Dockerfile:

FROM osgeo/gdal:ubuntu-small-latest
RUN uname -a && cat /etc/os-release
RUN apt-get update --fix-missing
RUN apt-get install -y sudo libproj-dev

And then launch https://gitpod.io/#https://github.com/PATH/TO/REPO
Working example:
https://gitpod.io/#https://github.com/maphew/gdal/tree/gitpod

There's still some things to sort out, like sudo doesn't work because it
asks for a password, but gdalinfo and friends are all there and happy.

-matt


On Fri, Feb 18, 2022 at 3:38 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Matt,
>
> you need to install the "libproj-dev" package.
>
> Looking at the CI build recipees is a source of good hints in general:
> https://github.com/OSGeo/gdal/blob/6e6aff451dbcde450f051bff2f2e75ce6a4a3e6f/.github/workflows/cmake_builds.yml#L38
> (this one has pretty much all the pre packaged dependencies. you don't need
> all that)
>
> Even
> Le 18/02/2022 ? 23:34, Matt Wilkie a ?crit :
>
> This what I've come up with:
>
> https://gitpod.io
>
> Create new >> search for gdal >> select OSGeo/gdal
>
>
> On launch:
>
>
>
> -- Could NOT find PROJ (missing: PROJ_DIR)
>
> CMake Error at
> /home/linuxbrew/.linuxbrew/Cellar/cmake/3.22.2/share/cmake/Modules/FindPackageHandleStandardArgs.cmake:230
> (message):
>
>   Could NOT find PROJ (missing: PROJ_LIBRARY PROJ_INCLUDE_DIR) (Required
> is
>
>   at least version "6.0")
>
> Call Stack (most recent call first):
>
>   /home/linuxbrew/.linuxbrew/Cellar/cmake/3.22.2/share/cmake/Modules/FindPackageHandleStandardArgs.cmake:594
> (_FPHSA_FAILURE_MESSAGE)
>
>   cmake/modules/packages/FindPROJ.cmake:57
> (find_package_handle_standard_args)
>
>   cmake/helpers/CheckDependentLibraries.cmake:303 (find_package)
>
>   gdal.cmake:210 (include)
>
>   CMakeLists.txt:206 (include)
>
>
>
> Attempted to remedy this with `sudo apt install proj-bin` but same error
> from `cmake .`
>
>
>
> ----------------------------------------------------------------------------------
>
>
>
>
> The below adapted from
> https://github.com/maphew/gdal/blob/pr-5281-redux/CONTRIBUTING.md
>
>
>
> cd /workspace/gdal
>
> ./autogen.sh
>
> ./configure --with-python
>
>
>
> Fails with "configure: error: PROJ 6 symbols not found".
>
> tried `sudo apt install proj-bin` and repeated above, same error.
>
> Version of proj that's installed with this is 6.3.1.
>
>
>
> Try building Proj from source (takes awhile):
>
>
>
> cd /workspace
>
> wget https://download.osgeo.org/proj/proj-6.3.1.tar.gz
>
> tar zxf proj-*.gz
>
> cd proj-6.3.1
>
> ./configure
>
> make && sudo make install
>
>
>
> Now try again (takes much longer):
>
>
>
> cd /workspace/gdal
>
> ./autogen.sh
>
> ./configure --with-python
>
> make -j8
>
> sudo make install
>
>
>
> It works!
>
>
>
> . scripts/setdevenv.sh
>
> gdalinfo --version
>
> GDAL 3.5.0dev-39057d7396, released 2022/02/18
>
>
> uname -a
> inux osgeo-gdal-j6a7bhjf0c8 5.13.0-1013-gcp #16-Ubuntu SMP Tue Jan 18
> 14:31:35 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux
>
> I'm still unable to successfully install a python wheel of gdal-utils,
> because pip is calling g++ which in turn is not finding libgdal, but it
> still feels like significant progress to get this far! :)
>
> -matt
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220222/ce133cb0/attachment-0001.html>

From loridigia at gmail.com  Tue Feb 22 08:26:35 2022
From: loridigia at gmail.com (Lorenzo Di Giacomo)
Date: Tue, 22 Feb 2022 17:26:35 +0100
Subject: [gdal-dev] HDF4Image stuck on translate
In-Reply-To: <CAERmyNQ_kaX1rauOMpMK5O1jWPrzoeHVt-K3=TTjQXjhVfdThw@mail.gmail.com>
References: <CAERmyNQ_kaX1rauOMpMK5O1jWPrzoeHVt-K3=TTjQXjhVfdThw@mail.gmail.com>
Message-ID: <CAERmyNQa7v48zwAY-VT+YtYg2N5gSQsXpoikKJ3uH6kOo2vX=g@mail.gmail.com>

Ok seems to be just a momentary problem, resolved after other 3-4 tests,
can't really say what happened
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220222/3ff2c1bf/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Feb 22 08:47:03 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Tue, 22 Feb 2022 16:47:03 +0000
Subject: [gdal-dev] HDF4Image stuck on translate
Message-ID: <f1155752e79e4e3786077f6dfdf1408d@maanmittauslaitos.fi>

Hi,

It was sluggish last week and still is, I guess that especially with multi-band images https://lists.osgeo.org/pipermail/gdal-dev/2022-February/055474.html. Run the command with ? -- debug on? and you have more to follow when you see how Flushing dirty blocks is slowly progressing.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Lorenzo Di Giacomo
L?hetetty: tiistai 22. helmikuuta 2022 18.10
Vastaanottaja: 'gdal-dev at lists.osgeo.org' (gdal-dev at lists.osgeo.org) <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] HDF4Image stuck on translate

Hi, i'm doing some "conversion" test, from one format to another (mainly from TIFF to ALL).
I found in HDF4Image driver that on some images, it get stuck.


gdal_translate -of HDF4Image source.tiff dest.hdf

Input file size is 2861, 3635

0...10...20...30...40...50...60...70...80...90...100 - done.

And remain in this state. For image as big as this above, i let it for about 1 hour and still blocked.
Is it normal that required all this time ? Thanks

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220222/a3431a5b/attachment.html>

From andrew at aitchison.me.uk  Wed Feb 23 06:08:01 2022
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Wed, 23 Feb 2022 14:08:01 +0000 (GMT)
Subject: [gdal-dev] OGREnvelope: add == and != comparison operators
Message-ID: <b471e94-39d9-9aa3-26fe-39aa691ff5ab@aitchison.me.uk>


I am trying to track down numerical errors in my driver code
by turning up all the compiler warnings, but pull request #5122
https://github.com/OSGeo/gdal/pull/5122/commits/3d877aa5da8868ed5c3aacf98845c90bc0d36e54
triggers clang++ -Werror,-Wfloat-equal

Assuming it is possible, would it make sense to tell compilers
(and static analyzers?) to ignore this warning ?

I assume that in this case we *do* want an exact floating point 
comparison.

------------------------------------------------------

clang++-13 -I /usr/local/gdal.git.llvm/include -fPIC -std=c++11 -Wall
 	-Wextra -Weverything -Werror -Wno-padded
 	-Wno-error=unknown-warning-option -Wno-format-pedantic
 	-Wno-c++98-compat-pedantic   -Wno-deprecated-copy-with-dtor
 	-Wno-reserved-identifier -Og -g -DFRMT_qct -DFRMT_qed
 	-c -o qed.o qed.cpp
In file included from qed.cpp:42:
In file included from /usr/local/gdal.git.llvm/include/gdal_pam.h:36:
In file included from /usr/local/gdal.git.llvm/include/gdal_priv.h:60:
In file included from /usr/local/gdal.git.llvm/include/gdal.h:50:
In file included from /usr/local/gdal.git.llvm/include/ogr_api.h:45:
/usr/local/gdal.git.llvm/include/ogr_core.h:158:21: error: comparing 
floating point with == or != is unsafe [-Werror,-Wfloat-equal]
         return MinX == other.MinX &&
                ~~~~ ^  ~~~~~~~~~~
/usr/local/gdal.git.llvm/include/ogr_core.h:159:21: error: comparing 
floating point with == or != is unsafe [-Werror,-Wfloat-equal]
                MinY == other.MinY &&
                ~~~~ ^  ~~~~~~~~~~
/usr/local/gdal.git.llvm/include/ogr_core.h:160:21: error: comparing 
floating point with == or != is unsafe [-Werror,-Wfloat-equal]
                MaxX == other.MaxX &&
                ~~~~ ^  ~~~~~~~~~~
/usr/local/gdal.git.llvm/include/ogr_core.h:161:21: error: comparing 
floating point with == or != is unsafe [-Werror,-Wfloat-equal]
                MaxY == other.MaxY;
                ~~~~ ^  ~~~~~~~~~~
4 errors generated.


-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From even.rouault at spatialys.com  Wed Feb 23 06:16:17 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Feb 2022 15:16:17 +0100
Subject: [gdal-dev] OGREnvelope: add == and != comparison operators
In-Reply-To: <b471e94-39d9-9aa3-26fe-39aa691ff5ab@aitchison.me.uk>
References: <b471e94-39d9-9aa3-26fe-39aa691ff5ab@aitchison.me.uk>
Message-ID: <fcccac3c-366c-1885-04fd-f9cc8d8d47fc@spatialys.com>

Andrew,

we have already suppression for such warning for the IsInit() method

#ifdef HAVE_GCC_DIAGNOSTIC_PUSH
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wfloat-equal"
#endif
 ??? /** Return whether the object has been initialized, that is, is non 
empty */
 ??? int? IsInit() const { return MinX != 
std::numeric_limits<double>::infinity(); }

#ifdef HAVE_GCC_DIAGNOSTIC_PUSH
#pragma GCC diagnostic pop
#endif

so I guess this should be extended to operator== as well.

And likely replace #ifdef HAVE_GCC_DIAGNOSTIC_PUSH by just #ifdef __GNUC__

since HAVE_GCC_DIAGNOSTIC_PUSH is something that is defined only during 
GDAL build.

The HAVE_GCC_DIAGNOSTIC_PUSH define should be set for all reasonably GCC 
and Clang versions that can build modern GDAL.

Please issue a PR with those changes if that fixes thing for you.

Even


Le 23/02/2022 ? 15:08, Andrew C Aitchison a ?crit?:
>
> I am trying to track down numerical errors in my driver code
> by turning up all the compiler warnings, but pull request #5122
> https://github.com/OSGeo/gdal/pull/5122/commits/3d877aa5da8868ed5c3aacf98845c90bc0d36e54 
>
> triggers clang++ -Werror,-Wfloat-equal
>
> Assuming it is possible, would it make sense to tell compilers
> (and static analyzers?) to ignore this warning ?
>
> I assume that in this case we *do* want an exact floating point 
> comparison.
>
> ------------------------------------------------------
>
> clang++-13 -I /usr/local/gdal.git.llvm/include -fPIC -std=c++11 -Wall
> ????-Wextra -Weverything -Werror -Wno-padded
> ????-Wno-error=unknown-warning-option -Wno-format-pedantic
> ????-Wno-c++98-compat-pedantic?? -Wno-deprecated-copy-with-dtor
> ????-Wno-reserved-identifier -Og -g -DFRMT_qct -DFRMT_qed
> ????-c -o qed.o qed.cpp
> In file included from qed.cpp:42:
> In file included from /usr/local/gdal.git.llvm/include/gdal_pam.h:36:
> In file included from /usr/local/gdal.git.llvm/include/gdal_priv.h:60:
> In file included from /usr/local/gdal.git.llvm/include/gdal.h:50:
> In file included from /usr/local/gdal.git.llvm/include/ogr_api.h:45:
> /usr/local/gdal.git.llvm/include/ogr_core.h:158:21: error: comparing 
> floating point with == or != is unsafe [-Werror,-Wfloat-equal]
> ??????? return MinX == other.MinX &&
> ?????????????? ~~~~ ^? ~~~~~~~~~~
> /usr/local/gdal.git.llvm/include/ogr_core.h:159:21: error: comparing 
> floating point with == or != is unsafe [-Werror,-Wfloat-equal]
> ?????????????? MinY == other.MinY &&
> ?????????????? ~~~~ ^? ~~~~~~~~~~
> /usr/local/gdal.git.llvm/include/ogr_core.h:160:21: error: comparing 
> floating point with == or != is unsafe [-Werror,-Wfloat-equal]
> ?????????????? MaxX == other.MaxX &&
> ?????????????? ~~~~ ^? ~~~~~~~~~~
> /usr/local/gdal.git.llvm/include/ogr_core.h:161:21: error: comparing 
> floating point with == or != is unsafe [-Werror,-Wfloat-equal]
> ?????????????? MaxY == other.MaxY;
> ?????????????? ~~~~ ^? ~~~~~~~~~~
> 4 errors generated.
>
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From osgeo.mailinglist at gmail.com  Wed Feb 23 17:46:37 2022
From: osgeo.mailinglist at gmail.com (Thomas Gratier)
Date: Thu, 24 Feb 2022 02:46:37 +0100
Subject: [gdal-dev] Good morning all and question: Good Python GDAL
 beginner tutorial?
In-Reply-To: <CAGybdFQVE2P3tKk00fxx4-DPez0gNpjnVHLp6v5NaWXG6o+Seg@mail.gmail.com>
References: <8ed823fa-2bd2-45a5-848f-0166ba167c88@home.gofferje.net>
 <eba1c240-6c6b-edcc-75db-c2c11e16a7a6@upm.es>
 <823e67a0-8c4c-939f-dde1-06b4118231cf@home.gofferje.net>
 <AM6PR04MB39592BA2C2DE6603FD339E89A63A9@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <CAGybdFQVE2P3tKk00fxx4-DPez0gNpjnVHLp6v5NaWXG6o+Seg@mail.gmail.com>
Message-ID: <CACPZzQ2aeN4J=43Mm7nA9e9-Fgsy2Wcp7Gvx1M0qjEP3Y0n+tA@mail.gmail.com>

Hi,

You may look on the book side at
https://www.manning.com/books/geoprocessing-with-python

Regards

Thomas Gratier

Le lun. 21 f?vr. 2022 ? 16:40, Alan Snow <alansnow21 at gmail.com> a ?crit :

> These are also some good resources for GDAL Python:
>
>    - https://carpentries-incubator.github.io/geospatial-python/
>    - https://www.earthdatascience.org/tutorials/python/
>    -
>    https://corteva.github.io/rioxarray/stable/getting_started/getting_started.html
>    - https://geopandas.org/en/stable/getting_started.html
>    - https://rasterio.readthedocs.io/en/latest/index.html
>    - https://fiona.readthedocs.io/en/latest/
>
>
>
> On Mon, Feb 21, 2022 at 8:27 AM Joaquim Manuel Freire Lu?s <jluis at ualg.pt>
> wrote:
>
>> And if you are open to non-Python alternatives and more upper level, I
>> have this small Julia package tailored for satellite data.
>>
>> https://github.com/GenericMappingTools/RemoteS.jl
>>
>> Joaquim
>>
>> -----Original Message-----
>> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Stefan
>> Gofferje
>> Sent: Monday, February 21, 2022 12:15 PM
>> To: gdal-dev at lists.osgeo.org
>> Subject: Re: [gdal-dev] Good morning all and question: Good Python GDAL
>> beginner tutorial?
>>
>> Hi,
>>
>> On 2/21/22 12:51, Miguel A. Manso wrote:
>> > The cookbook v1 (https://pcjericks.github.io/py-gdalogr-cookbook/) may
>> > be a good starting point.
>>
>> THAT is very cool and almost exactly what I was looking for! Thanks a
>> bunch!
>>
>> > But previos to it you need to install a python developong enviroment.
>> > You can trial with miniconda3 software and then creating a new
>> > environment and installing GDAL libraries.
>>
>> I'm on Linux since 1996, but thanks anyways :).
>>
>> -S
>>
>> --
>>   (o_   Stefan Gofferje            | SCLT, MCP, CCSA
>>   //\   Reg'd Linux User #247167   | VCP #2263
>>   V_/_  https://www.gofferje.net   | https://www.saakeskus.fi
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> --
> Alan Snow
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220224/e4e954ab/attachment.html>

From tianwang.yue at dms365.com  Wed Feb 23 18:22:46 2022
From: tianwang.yue at dms365.com (=?UTF-8?B?5bKz5aSp546L?=)
Date: Thu, 24 Feb 2022 10:22:46 +0800 (GMT+08:00)
Subject: [gdal-dev] =?utf-8?q?Problems_in_use=EF=BC=9AUnable_to_get_buffe?=
 =?utf-8?q?r=2E?=
Message-ID: <ACAAvABjEx4zPp1OHKXkI4rh.1.1645669366761.Hmail.tianwang.yue@dms365.com>



When I use gdal to generate tiles for a 68G image, I get an error: Unable to get buffer.

Summary of error message:
java.lang.RuntimeException: Unable to get buffer.
at org.gdal.gdal.gdalJNI.Dataset_WriteRaster__SWIG_3(Native Method) ~[gdal-3.1.0.jar:?]
at org.gdal.gdal.Dataset.WriteRaster(Dataset.java:511) ~[gdal-3.1.0.jar:?]

java.lang.RuntimeException: Unable to allocate temporary buffer.
at org.gdal.gdal.gdalJNI.Dataset_ReadRaster__SWIG_3(Native Method) ~[gdal-3.1.0.jar:?]
at org.gdal.gdal.Dataset.ReadRaster(Dataset.java:415) ~[gdal-3.1.0.jar:?]


development environment: jdk8?GDAL 3.3.2?windows server2019


What is the reason for this exception, am I not releasing some resources?


???
tianwang.yue at dms365.com


???????????








-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220224/b2f3b154/attachment.html>

From tianwang.yue at dms365.com  Wed Feb 23 18:26:29 2022
From: tianwang.yue at dms365.com (=?UTF-8?B?5bKz5aSp546L?=)
Date: Thu, 24 Feb 2022 10:26:29 +0800 (GMT+08:00)
Subject: [gdal-dev] =?utf-8?q?Problems_in_use=EF=BC=9AUnable_to_get_buffe?=
 =?utf-8?q?r=2EPlease_ignore_the_email_just_now?=
Message-ID: <AMcAtwDrE*Kz4aOpPTUOLaoq.1.1645669589849.Hmail.tianwang.yue@dms365.com>




When I use gdal to generate tiles for a 68G image, I get an error: Unable to get buffer.

Summary of error message:
java.lang.RuntimeException: Unable to get buffer.
at org.gdal.gdal.gdalJNI.Dataset_WriteRaster__SWIG_3(Native Method) ~[gdal-3.1.0.jar:?]
at org.gdal.gdal.Dataset.WriteRaster(Dataset.java:511) ~[gdal-3.1.0.jar:?]

java.lang.RuntimeException: Unable to allocate temporary buffer.
at org.gdal.gdal.gdalJNI.Dataset_ReadRaster__SWIG_3(Native Method) ~[gdal-3.1.0.jar:?]
at org.gdal.gdal.Dataset.ReadRaster(Dataset.java:415) ~[gdal-3.1.0.jar:?]


development environment: jdk8?GDAL 3.1.4?windows server2019


What is the reason for this exception, am I not releasing some resources?


???
tianwang.yue at dms365.com


???????????










-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220224/d132a0c1/attachment.html>

From lists at home.gofferje.net  Thu Feb 24 02:33:22 2022
From: lists at home.gofferje.net (Stefan Gofferje)
Date: Thu, 24 Feb 2022 12:33:22 +0200
Subject: [gdal-dev] Good morning all and question: Good Python GDAL
 beginner tutorial?
In-Reply-To: <CACPZzQ2aeN4J=43Mm7nA9e9-Fgsy2Wcp7Gvx1M0qjEP3Y0n+tA@mail.gmail.com>
References: <8ed823fa-2bd2-45a5-848f-0166ba167c88@home.gofferje.net>
 <eba1c240-6c6b-edcc-75db-c2c11e16a7a6@upm.es>
 <823e67a0-8c4c-939f-dde1-06b4118231cf@home.gofferje.net>
 <AM6PR04MB39592BA2C2DE6603FD339E89A63A9@AM6PR04MB3959.eurprd04.prod.outlook.com>
 <CAGybdFQVE2P3tKk00fxx4-DPez0gNpjnVHLp6v5NaWXG6o+Seg@mail.gmail.com>
 <CACPZzQ2aeN4J=43Mm7nA9e9-Fgsy2Wcp7Gvx1M0qjEP3Y0n+tA@mail.gmail.com>
Message-ID: <1c5ba7ae-19b9-d6df-5974-24bb07e84a8c@home.gofferje.net>

Hi,

On 2/24/22 03:46, Thomas Gratier wrote:
> You may look on the book side at 
> https://www.manning.com/books/geoprocessing-with-python 
> <https://www.manning.com/books/geoprocessing-with-python>
I'll add this to my book wish list for sure! Thanks!

-S

-- 
  (o_   Stefan Gofferje            | SCLT, MCP, CCSA
  //\   Reg'd Linux User #247167   | VCP #2263
  V_/_  https://www.gofferje.net   | https://www.saakeskus.fi


From lists at home.gofferje.net  Thu Feb 24 02:41:24 2022
From: lists at home.gofferje.net (Stefan Gofferje)
Date: Thu, 24 Feb 2022 12:41:24 +0200
Subject: [gdal-dev] Sentinel 1 SAFE data calibration questions
Message-ID: <f595c624-d038-1176-ab47-21a56d285923@home.gofferje.net>

Hi,

so the project I'm tinkering with at the moment (and what I want to 
learn Python-GDAL for) is about fully automatic download and processing 
of Sentinel 1 data. I'm really no big JAVA fan because it's so 
resource-intensive, so I'd like to do things with GDAL alone, without SNAP.

I have seen in the docs that the Sentinel 1 driver can do some 
calibration. Can it also do the Thermal Noise calibration and maybe even 
Orbit File calibration? If not, is it maybe on the horizon?

-S

-- 
  (o_   Stefan Gofferje            | SCLT, MCP, CCSA
  //\   Reg'd Linux User #247167   | VCP #2263
  V_/_  https://www.gofferje.net   | https://www.saakeskus.fi


From fengting.chen at oracle.com  Thu Feb 24 08:45:52 2022
From: fengting.chen at oracle.com (Fengting Chen)
Date: Thu, 24 Feb 2022 16:45:52 +0000
Subject: [gdal-dev] how to build netCDF driver plugin
Message-ID: <BYAPR10MB3366F9BFF1C6E3DB58383713933D9@BYAPR10MB3366.namprd10.prod.outlook.com>

Under current build system, how to build netCDF driver as a plugin on linux and windows?

On windows, when I set NETCDF_PLUGIN=YES, the gdal_netcdf.ddl was built. But gdalinfo still doesn't show netcdf as a supported format.

On linux, I changed the local makefile for netcdf and built gdal_netcdf.so. But gdalinfo doesn't show netcdf as a supported format either.

Any help would be appreciated.

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220224/166845b6/attachment.html>

From even.rouault at spatialys.com  Thu Feb 24 09:53:32 2022
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 24 Feb 2022 18:53:32 +0100
Subject: [gdal-dev] how to build netCDF driver plugin
In-Reply-To: <BYAPR10MB3366F9BFF1C6E3DB58383713933D9@BYAPR10MB3366.namprd10.prod.outlook.com>
References: <BYAPR10MB3366F9BFF1C6E3DB58383713933D9@BYAPR10MB3366.namprd10.prod.outlook.com>
Message-ID: <098eb4ca-6158-71eb-e0ac-5cb8078b9a55@spatialys.com>

- The filename is case sensitive: it must be gdal_netCDF.so/dll since 
the registration function is called GDALRegister_netCDF()

- You need to set the GDAL_DRIVER_PATH environment variable to point to 
the directory where the driver is

- You might find it easier when using master to use CMake:? cmake 
-DGDAL_ENABLE_DRIVER_NETCDF_PLUGIN:BOOL=ON? . That will work on both 
Linux and Windows

Le 24/02/2022 ? 17:45, Fengting Chen a ?crit?:
>
> Under current build system, how to build netCDF driver as a plugin on 
> linux and windows?
>
> On windows, when I set NETCDF_PLUGIN=YES, the gdal_netcdf.ddl was 
> built. But gdalinfo still doesn?t show netcdf as a supported format.
>
> On linux, I changed the local makefile for netcdf and built 
> gdal_netcdf.so. But gdalinfo doesn?t show netcdf as a supported format 
> either.
>
> Any help would be appreciated.
>
> Thanks
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220224/ae87ac99/attachment.html>

From fengting.chen at oracle.com  Thu Feb 24 18:10:06 2022
From: fengting.chen at oracle.com (Fengting Chen)
Date: Fri, 25 Feb 2022 02:10:06 +0000
Subject: [gdal-dev] [External] : Re:  how to build netCDF driver plugin
In-Reply-To: <098eb4ca-6158-71eb-e0ac-5cb8078b9a55@spatialys.com>
References: <BYAPR10MB3366F9BFF1C6E3DB58383713933D9@BYAPR10MB3366.namprd10.prod.outlook.com>
 <098eb4ca-6158-71eb-e0ac-5cb8078b9a55@spatialys.com>
Message-ID: <DM6PR10MB33726AA8DD2F150374323460933E9@DM6PR10MB3372.namprd10.prod.outlook.com>

After fix the plugin library name, the netCDF driver plugin on linux is working. However, it still didn?t work on windows:

E:\tmp\gdal>gdalinfo
ERROR 1: Can't load requested DLL: E:\tmp\gdal\bin\gdalplugins\gdal_netCDF.dll
126: The specified module could not be found.

ERROR 1: Can't load requested DLL: E:\tmp\gdal\bin\gdalplugins\gdal_netCDF.dll
126: The specified module could not be found.

I verified that specified gdal_netCDF.dll exists at above directory and netcdf.dll is in the path of %PATH%.

Any possible problem?

This is a build on gdal 3.4.1.

Thanks,

From: Even Rouault <even.rouault at spatialys.com>
Sent: Thursday, February 24, 2022 12:54 PM
To: Fengting Chen <fengting.chen at oracle.com>; gdal-dev at lists.osgeo.org
Subject: [External] : Re: [gdal-dev] how to build netCDF driver plugin


- The filename is case sensitive: it must be gdal_netCDF.so/dll since the registration function is called GDALRegister_netCDF()

- You need to set the GDAL_DRIVER_PATH environment variable to point to the directory where the driver is

- You might find it easier when using master to use CMake:  cmake -DGDAL_ENABLE_DRIVER_NETCDF_PLUGIN:BOOL=ON  . That will work on both Linux and Windows
Le 24/02/2022 ? 17:45, Fengting Chen a ?crit :
Under current build system, how to build netCDF driver as a plugin on linux and windows?

On windows, when I set NETCDF_PLUGIN=YES, the gdal_netcdf.ddl was built. But gdalinfo still doesn?t show netcdf as a supported format.

On linux, I changed the local makefile for netcdf and built gdal_netcdf.so. But gdalinfo doesn?t show netcdf as a supported format either.

Any help would be appreciated.

Thanks



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev<https://urldefense.com/v3/__https:/lists.osgeo.org/mailman/listinfo/gdal-dev__;!!ACWV5N9M2RV99hQ!arl8eQzGRDqBZJr6WK8ShQVivQBxsojpL11eSfaFnZOe2MhcbeySDvlb0A2SfGO3X9M$>

--

http://www.spatialys.com<https://urldefense.com/v3/__http:/www.spatialys.com__;!!ACWV5N9M2RV99hQ!arl8eQzGRDqBZJr6WK8ShQVivQBxsojpL11eSfaFnZOe2MhcbeySDvlb0A2SocmiOpw$>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220225/8f2e53c1/attachment.html>

From mateusz at loskot.net  Thu Feb 24 23:39:25 2022
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 25 Feb 2022 08:39:25 +0100
Subject: [gdal-dev] [External] : Re: how to build netCDF driver plugin
In-Reply-To: <DM6PR10MB33726AA8DD2F150374323460933E9@DM6PR10MB3372.namprd10.prod.outlook.com>
References: <BYAPR10MB3366F9BFF1C6E3DB58383713933D9@BYAPR10MB3366.namprd10.prod.outlook.com>
 <098eb4ca-6158-71eb-e0ac-5cb8078b9a55@spatialys.com>
 <DM6PR10MB33726AA8DD2F150374323460933E9@DM6PR10MB3372.namprd10.prod.outlook.com>
Message-ID: <CABUeae8-bd84O1+Bz9qq0p-WJVfnbLTK1cfTBZFosLj0yGij5g@mail.gmail.com>

On Fri, 25 Feb 2022, 07:01 Fengting Chen, <fengting.chen at oracle.com> wrote:

> After fix the plugin library name, the netCDF driver plugin on linux is
> working. However, it still didn?t work on windows:
>
>
>
> E:\tmp\gdal>gdalinfo
>
> ERROR 1: Can't load requested DLL:
> E:\tmp\gdal\bin\gdalplugins\gdal_netCDF.dll
>
> 126: The specified module could not be found.
>
>
>
> ERROR 1: Can't load requested DLL:
> E:\tmp\gdal\bin\gdalplugins\gdal_netCDF.dll
>
> 126: The specified module could not be found.
>
>
>
> I verified that specified gdal_netCDF.dll exists at above directory and
> netcdf.dll is in the path of %PATH%.
>
>
>
> Any possible problem?
>

Lots.

Use the process monitor (sysinternals, downloadable from Microsoft website)
to investigate what DLLs are being loaded and from where, and which fail to
be found.

--
Mateusz Loskot, http://mateusz.loskot.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220225/93a6aaac/attachment-0001.html>

From ivan.lucena at outlook.com  Fri Feb 25 05:09:50 2022
From: ivan.lucena at outlook.com (Ivan Lucena)
Date: Fri, 25 Feb 2022 13:09:50 +0000
Subject: [gdal-dev] [External] : Re:  how to build netCDF driver plugin
In-Reply-To: <DM6PR10MB33726AA8DD2F150374323460933E9@DM6PR10MB3372.namprd10.prod.outlook.com>
References: <BYAPR10MB3366F9BFF1C6E3DB58383713933D9@BYAPR10MB3366.namprd10.prod.outlook.com>
 <098eb4ca-6158-71eb-e0ac-5cb8078b9a55@spatialys.com>
 <DM6PR10MB33726AA8DD2F150374323460933E9@DM6PR10MB3372.namprd10.prod.outlook.com>
Message-ID: <MN2PR04MB5693B5406362CA0D2AE39999F23E9@MN2PR04MB5693.namprd04.prod.outlook.com>

Hi Fengting,

The Windows error message might be telling you that while it was loading the plugin library, that DLL was required to load another DLL(s), from the SDK probably, and that is not in the PATH.

You need to check if the plugin DLL was built against a static or a dynamic SDK library. Static would make your deployment easier, but some SDK make it hard to build this way.

Good luck,

Ivan

________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Fengting Chen <fengting.chen at oracle.com>
Sent: Thursday, February 24, 2022 9:10 PM
To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] [External] : Re: how to build netCDF driver plugin


After fix the plugin library name, the netCDF driver plugin on linux is working. However, it still didn?t work on windows:



E:\tmp\gdal>gdalinfo

ERROR 1: Can't load requested DLL: E:\tmp\gdal\bin\gdalplugins\gdal_netCDF.dll

126: The specified module could not be found.



ERROR 1: Can't load requested DLL: E:\tmp\gdal\bin\gdalplugins\gdal_netCDF.dll

126: The specified module could not be found.



I verified that specified gdal_netCDF.dll exists at above directory and netcdf.dll is in the path of %PATH%.



Any possible problem?



This is a build on gdal 3.4.1.



Thanks,



From: Even Rouault <even.rouault at spatialys.com>
Sent: Thursday, February 24, 2022 12:54 PM
To: Fengting Chen <fengting.chen at oracle.com>; gdal-dev at lists.osgeo.org
Subject: [External] : Re: [gdal-dev] how to build netCDF driver plugin



- The filename is case sensitive: it must be gdal_netCDF.so/dll since the registration function is called GDALRegister_netCDF()

- You need to set the GDAL_DRIVER_PATH environment variable to point to the directory where the driver is

- You might find it easier when using master to use CMake:  cmake -DGDAL_ENABLE_DRIVER_NETCDF_PLUGIN:BOOL=ON  . That will work on both Linux and Windows

Le 24/02/2022 ? 17:45, Fengting Chen a ?crit :

Under current build system, how to build netCDF driver as a plugin on linux and windows?



On windows, when I set NETCDF_PLUGIN=YES, the gdal_netcdf.ddl was built. But gdalinfo still doesn?t show netcdf as a supported format.



On linux, I changed the local makefile for netcdf and built gdal_netcdf.so. But gdalinfo doesn?t show netcdf as a supported format either.



Any help would be appreciated.



Thanks



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev<https://urldefense.com/v3/__https:/lists.osgeo.org/mailman/listinfo/gdal-dev__;!!ACWV5N9M2RV99hQ!arl8eQzGRDqBZJr6WK8ShQVivQBxsojpL11eSfaFnZOe2MhcbeySDvlb0A2SfGO3X9M$>

--

http://www.spatialys.com<https://urldefense.com/v3/__http:/www.spatialys.com__;!!ACWV5N9M2RV99hQ!arl8eQzGRDqBZJr6WK8ShQVivQBxsojpL11eSfaFnZOe2MhcbeySDvlb0A2SocmiOpw$>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220225/7fcd7501/attachment.html>

From fengting.chen at oracle.com  Fri Feb 25 11:28:41 2022
From: fengting.chen at oracle.com (Fengting Chen)
Date: Fri, 25 Feb 2022 19:28:41 +0000
Subject: [gdal-dev] [External] : Re: how to build netCDF driver plugin
In-Reply-To: <CABUeae8-bd84O1+Bz9qq0p-WJVfnbLTK1cfTBZFosLj0yGij5g@mail.gmail.com>
References: <BYAPR10MB3366F9BFF1C6E3DB58383713933D9@BYAPR10MB3366.namprd10.prod.outlook.com>
 <098eb4ca-6158-71eb-e0ac-5cb8078b9a55@spatialys.com>
 <DM6PR10MB33726AA8DD2F150374323460933E9@DM6PR10MB3372.namprd10.prod.outlook.com>
 <CABUeae8-bd84O1+Bz9qq0p-WJVfnbLTK1cfTBZFosLj0yGij5g@mail.gmail.com>
Message-ID: <BYAPR10MB3366F6ED25F18E90A20257A2933E9@BYAPR10MB3366.namprd10.prod.outlook.com>

I downloaded the process monitor and it helped. It turns out that the netcdf.dll couldn?t be found due to the space in the path.

Thanks a lot for the help.

-Fengting

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Mateusz Loskot
Sent: Friday, February 25, 2022 2:39 AM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] [External] : Re: how to build netCDF driver plugin

On Fri, 25 Feb 2022, 07:01 Fengting Chen, <fengting.chen at oracle.com<mailto:fengting.chen at oracle.com>> wrote:
After fix the plugin library name, the netCDF driver plugin on linux is working. However, it still didn?t work on windows:

E:\tmp\gdal>gdalinfo
ERROR 1: Can't load requested DLL: E:\tmp\gdal\bin\gdalplugins\gdal_netCDF.dll
126: The specified module could not be found.

ERROR 1: Can't load requested DLL: E:\tmp\gdal\bin\gdalplugins\gdal_netCDF.dll
126: The specified module could not be found.

I verified that specified gdal_netCDF.dll exists at above directory and netcdf.dll is in the path of %PATH%.

Any possible problem?

Lots.

Use the process monitor (sysinternals, downloadable from Microsoft website) to investigate what DLLs are being loaded and from where, and which fail to be found.
--
Mateusz Loskot, http://mateusz.loskot.net<https://urldefense.com/v3/__http:/mateusz.loskot.net__;!!ACWV5N9M2RV99hQ!ZCIAz-yN6aVvZ1OAjila7z6ZB1cy2LKni1jhjEOr8Y_Q4ZMtQokvtSt9iJuOHWErbX4$>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220225/6f0e4be0/attachment-0001.html>

From adamsubscribe at googlemail.com  Fri Feb 25 23:15:52 2022
From: adamsubscribe at googlemail.com (Adam Akhtar)
Date: Sat, 26 Feb 2022 16:15:52 +0900
Subject: [gdal-dev] "tolerance condition error" on reprojecting natural
 earth data to webmercator (3857)
In-Reply-To: <5f198a42-1256-e311-51e7-e17098a62676@spatialys.com>
References: <CAM9qkVknkNcSWwXvK1t711OxSwrHjQkJ2B14vAEjg37AJkChcg@mail.gmail.com>
 <5f198a42-1256-e311-51e7-e17098a62676@spatialys.com>
Message-ID: <CAM9qkVnyPUY7cQQMjHiEnbnxoG7HkYqRGJpzV6nGPz5P-ktnTQ@mail.gmail.com>

Sorry for the slow reply Even,

I just tried this now and it seems to have worked. Thank you very much for
you help on this matter.

For posterity and other's benefit I modified my original command to include

-clipsrc -180.1 -85.0511 180.1 85.0511

i.e.

OGR_ENABLE_PARTIAL_REPROJECTION=true ogr2ogr -unsetFieldWidth -t_srs
EPSG:3857 -clipsrc -180.1 -85.0511 180.1 85.0511 -nlt PROMOTE_TO_MULTI -f
PostgreSQL PG:"dbname='ogr' host='localhost' port='5432' user='myusername
password='redacted'" ne_10m_ocean.shp

Thanks again

Adam

On Tue, 22 Feb 2022 at 20:47, Even Rouault <even.rouault at spatialys.com>
wrote:

> This dataset includes latitude up to 90 degree north, which projects to
> infinity in EPSG:3857. You should use the -clipsrc option of ogr2ogr to for
> example cut at 85 degree
> Le 21/02/2022 ? 10:14, Adam Akhtar via gdal-dev a ?crit :
>
> Hi,
>
> I'm getting a "tolerance condition error" when trying to reproject Natural
> Earth data into webmercator 3857 using ogr2ogr.
>
> These are the commands I am running
>
> ```
> wget https://naturalearth.s3.amazonaws.com/10m_physical/ne_10m_ocean.zip
> unzip ne_10m_ocean.zip
>
> // reproject the unzipped shape file
> OGR_ENABLE_PARTIAL_REPROJECTION=true ogr2ogr -unsetFieldWidth -t_srs
> EPSG:3857 -nlt PROMOTE_TO_MULTI -f PostgreSQL PG:"dbname='ogr'
> host='localhost' port='5432' user='myusername password='redacted'"
> ne_10m_ocean.shp
> ```
>
> This results in the following output
>
> ```
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: tolerance condition error
> ERROR 1: Reprojection failed, err = -20, further errors will be suppressed
> on the transform object.
> ```
>
> I'm sure this used to run fine a few months ago so I'm not sure why it is
> suddenly breaking.
>
> This happens on both my arm Mac and my Intel server instance.
>
> Server instance:
> EC2 M5 Intel with Ubuntu 20.04.3 LTS
> GDAL 3.3.2, released 2021/09/01
>
> Mac
> M1 Arm Mac Big Sur 11.6
> GDAL 3.3.3, released 2021/10/25
>
> Is this or a bug or am I incorrectly using the command? Any help will be
> greatly appreciated.
>
> Adam
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220226/711732c2/attachment.html>

From ni_hao88 at hotmail.com  Sat Feb 26 14:09:37 2022
From: ni_hao88 at hotmail.com (ni hao)
Date: Sat, 26 Feb 2022 22:09:37 +0000
Subject: [gdal-dev] version 2.4.4
Message-ID: <DM5PR02MB3862BA8C91C34942A77612DBF13F9@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi list,

I want to keep using GDAL2 because GDAL3 changes a lot and I can't afford the effort to upgrade PROJ and other libs.
My question: is version 2.4.4 ok to use? I was told that its NUMPY has 'null pointer' issues.
Are there necessary revisions need to be applied?

Thank you!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220226/3e9b8185/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Sun Feb 27 04:03:46 2022
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Sun, 27 Feb 2022 12:03:46 +0000
Subject: [gdal-dev] version 2.4.4
Message-ID: <2829644a29674430827ab7d9fcda0de9@maanmittauslaitos.fi>

Hi,

There is nobody who can take the responsibility to say that it is OK to use an unmaintained version of GDAL. Of course it was the best version with least bugs ever when it was released but it was 4 years ago. You can browse through the release notes of all the subsequent GDAL 3.x versions https://github.com/OSGeo/gdal/releases and evaluate if they are important for you or not. Patching 2.4.4 with cherry picked changes from 3.x series does not feel reasonable or at least not any easier than to prepare to upgrade into supported 3.x.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta ni hao
L?hetetty: sunnuntai 27. helmikuuta 2022 0.10
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] version 2.4.4

Hi list,

I want to keep using GDAL2 because GDAL3 changes a lot and I can't afford the effort to upgrade PROJ and other libs.
My question: is version 2.4.4 ok to use? I was told that its NUMPY has 'null pointer' issues.
Are there necessary revisions need to be applied?

Thank you!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20220227/73a0b4cf/attachment.html>

