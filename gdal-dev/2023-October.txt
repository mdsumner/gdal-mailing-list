From a.pau at creaf.uab.cat  Mon Oct  2 06:54:35 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Mon, 2 Oct 2023 13:54:35 +0000
Subject: [gdal-dev] Number of fields when creating layer?
Message-ID: <AM8PR07MB81702A68E0D4561EC5E03F4FA2C5A@AM8PR07MB8170.eurprd07.prod.outlook.com>

Hi everybody,
do anyone know if a driver can know the number of fields (and it's names, etc) of a layer BEFORE starting fetch features? So in the moment of create the layer.
I mean, when a driver is creating the own layer it could probably be interested in creating all fields before starting and not in the middle of translation. It could be caused because the output format requires that in terms of efficiency.

For instance, first feature have 3 fields, second feature have four, etc... Until the last feature driver is not sure of all fields are definitive.
And every time a feature is added the driver have to verify in which destination field corresponds to the new one.

So, I accepted that it happens with the number of features (Even can remember my concerns that time) and I am wondering if I have to accept that for the number of fields.

Thanks a lot.



Abel Pau Garcia
GIS developer
[https://www.creaf.cat/sites/default/files/creaf-signature.png]
a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>
Let's chat on Teams!<https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
Tel. +34 934814277
[https://www.creaf.cat/sites/default/files/so-en-signature.png]
[https://www.creaf.cat/sites/default/files/twitter-icon-signature.png]<https://twitter.com/CREAF_ecologia>[https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png]<https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>[https://www.creaf.cat/sites/default/files/youtube-icon-signature.png]<https://www.youtube.com/c/creafecologia>[https://www.creaf.cat/sites/default/files/instagram-icon-signature.png]<https://www.instagram.com/CREAF_ecologia/>
www.creaf.cat<http://www.creaf.cat> | http://blog.creaf.cat
[https://www.creaf.cat/sites/default/files/uab_logo_signatura.png]
CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)

Before printing this electronic message, think about the environment.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/f7decbab/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/f7decbab/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/f7decbab/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/f7decbab/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/f7decbab/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/f7decbab/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/f7decbab/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: image007.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/f7decbab/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: image008.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/f7decbab/attachment-0003.jpg>

From even.rouault at spatialys.com  Mon Oct  2 07:18:52 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 2 Oct 2023 16:18:52 +0200
Subject: [gdal-dev] Number of fields when creating layer?
In-Reply-To: <AM8PR07MB81702A68E0D4561EC5E03F4FA2C5A@AM8PR07MB8170.eurprd07.prod.outlook.com>
References: <AM8PR07MB81702A68E0D4561EC5E03F4FA2C5A@AM8PR07MB8170.eurprd07.prod.outlook.com>
Message-ID: <5c9eade5-318d-ca43-915c-6c5da227f98f@spatialys.com>

Abel Pau,

no you can't know the number of fields at the moment of creating the 
layer. A number of drivers only accept the CreateField() method to be 
called until the first call to ICreateFeature(). Cf the 
"bFeaturesWritten" variable in ogr/ogrsf_frmts/jml/ogrjmlwriterlayer.cpp

Typically ogr2ogr will never call CreateField() after ICreateFeature()

Even

Le 02/10/2023 ? 15:54, Abel Pau via gdal-dev a ?crit?:
>
> Hi everybody,
>
> do anyone know if a driver can know the number of fields (and it?s 
> names, etc) of a layer BEFORE starting fetch features? So in the 
> moment of create the layer.
>
> I mean, when a driver is creating the own layer it could probably be 
> interested in creating all fields before starting and not in the 
> middle of translation. It could be caused because the output format 
> requires that in terms of efficiency.
>
> For instance, first feature have 3 fields, second feature have four, 
> etc... Until the last feature driver is not sure of all fields are 
> definitive.
>
> And every time a feature is added the driver have to verify in which 
> destination field corresponds to the new one.
>
> So, I accepted that it happens with the number of features (Even can 
> remember my concerns that time) and I am wondering if I have to accept 
> that for the number of fields.
>
> Thanks a lot.
>
> *Abel Pau Garcia*
>
> *GIS developer*
>
> 	
>
> https://www.creaf.cat/sites/default/files/creaf-signature.png
>
> *a.pau at creaf.uab.cat* <mailto:a.pau at creaf.uab.cat>
>
> *Let's chat on Teams!* 
> <https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
>
> *Tel. +34 934814277*
>
> 	
>
> https://www.creaf.cat/sites/default/files/so-en-signature.png
>
> https://www.creaf.cat/sites/default/files/twitter-icon-signature.png 
> <https://twitter.com/CREAF_ecologia>https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png 
> <https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>https://www.creaf.cat/sites/default/files/youtube-icon-signature.png 
> <https://www.youtube.com/c/creafecologia>https://www.creaf.cat/sites/default/files/instagram-icon-signature.png 
> <https://www.instagram.com/CREAF_ecologia/>
>
> *www.creaf.cat* <http://www.creaf.cat>*| **http://blog.creaf.cat* 
> <http://blog.creaf.cat>
>
> 	
>
> https://www.creaf.cat/sites/default/files/uab_logo_signatura.png
>
> CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)
>
>
> Before printing this electronic message, think about the environment.
>
> http://www.creaf.uab.cat/_signatura/line.gif
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/9d3463e2/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/9d3463e2/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/9d3463e2/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/9d3463e2/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/9d3463e2/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/9d3463e2/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/9d3463e2/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/9d3463e2/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/9d3463e2/attachment-0003.jpg>

From a.pau at creaf.uab.cat  Mon Oct  2 08:23:31 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Mon, 2 Oct 2023 15:23:31 +0000
Subject: [gdal-dev] Number of fields when creating layer?
In-Reply-To: <5c9eade5-318d-ca43-915c-6c5da227f98f@spatialys.com>
References: <AM8PR07MB81702A68E0D4561EC5E03F4FA2C5A@AM8PR07MB8170.eurprd07.prod.outlook.com>
 <5c9eade5-318d-ca43-915c-6c5da227f98f@spatialys.com>
Message-ID: <AM8PR07MB8170AF0B8B03FE1650A11FA0A2C5A@AM8PR07MB8170.eurprd07.prod.outlook.com>

Thanks Even,

that it?s not so bad. I can ?wait? until ICreateFeature and if it?s the first feature create the number of fields it has.

But, then, what happens with other fields that can appear after in next features? I might ignore them, but... it?s not a good thing.

Can they appear later or not? I haven?t understood it at complete.
Thanks!


De: Even Rouault <even.rouault at spatialys.com>
Enviado el: dilluns, 2 d?octubre de 2023 16:19
Para: Abel Pau <a.pau at creaf.uab.cat>; gdal dev <gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Number of fields when creating layer?


Abel Pau,

no you can't know the number of fields at the moment of creating the layer. A number of drivers only accept the CreateField() method to be called until the first call to ICreateFeature(). Cf the "bFeaturesWritten" variable in ogr/ogrsf_frmts/jml/ogrjmlwriterlayer.cpp

Typically ogr2ogr will never call CreateField() after ICreateFeature()

Even
Le 02/10/2023 ? 15:54, Abel Pau via gdal-dev a ?crit :
Hi everybody,
do anyone know if a driver can know the number of fields (and it?s names, etc) of a layer BEFORE starting fetch features? So in the moment of create the layer.
I mean, when a driver is creating the own layer it could probably be interested in creating all fields before starting and not in the middle of translation. It could be caused because the output format requires that in terms of efficiency.

For instance, first feature have 3 fields, second feature have four, etc... Until the last feature driver is not sure of all fields are definitive.
And every time a feature is added the driver have to verify in which destination field corresponds to the new one.

So, I accepted that it happens with the number of features (Even can remember my concerns that time) and I am wondering if I have to accept that for the number of fields.

Thanks a lot.



Abel Pau Garcia
GIS developer
[https://www.creaf.cat/sites/default/files/creaf-signature.png]
a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>
Let's chat on Teams!<https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
Tel. +34 934814277
[https://www.creaf.cat/sites/default/files/so-en-signature.png]
[https://www.creaf.cat/sites/default/files/twitter-icon-signature.png]<https://twitter.com/CREAF_ecologia>[https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png]<https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>[https://www.creaf.cat/sites/default/files/youtube-icon-signature.png]<https://www.youtube.com/c/creafecologia>[https://www.creaf.cat/sites/default/files/instagram-icon-signature.png]<https://www.instagram.com/CREAF_ecologia/>
www.creaf.cat<http://www.creaf.cat> | http://blog.creaf.cat
[https://www.creaf.cat/sites/default/files/uab_logo_signatura.png]
CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)

Before printing this electronic message, think about the environment.






_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/e8019728/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/e8019728/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/e8019728/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/e8019728/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/e8019728/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/e8019728/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/e8019728/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: image007.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/e8019728/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: image008.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/e8019728/attachment-0003.jpg>

From even.rouault at spatialys.com  Mon Oct  2 08:36:18 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 2 Oct 2023 17:36:18 +0200
Subject: [gdal-dev] Number of fields when creating layer?
In-Reply-To: <AM8PR07MB8170AF0B8B03FE1650A11FA0A2C5A@AM8PR07MB8170.eurprd07.prod.outlook.com>
References: <AM8PR07MB81702A68E0D4561EC5E03F4FA2C5A@AM8PR07MB8170.eurprd07.prod.outlook.com>
 <5c9eade5-318d-ca43-915c-6c5da227f98f@spatialys.com>
 <AM8PR07MB8170AF0B8B03FE1650A11FA0A2C5A@AM8PR07MB8170.eurprd07.prod.outlook.com>
Message-ID: <db1764ac-9214-4978-00d5-c80e80f372ce@spatialys.com>


Le 02/10/2023 ? 17:23, Abel Pau a ?crit?:
>
> Thanks Even,
>
> that it?s not so bad. I can ?wait? until ICreateFeature and if it?s 
> the first feature create the number of fields it has.
>
> But, then, what happens with other fields that can appear after in 
> next features? I might ignore them, but... it?s not a good thing.
>
Just look at existing drivers, like the JML one I pointed. They will 
error out when attempting to call CreateField() once a feature has been 
written, and they will stop advertizing the OLCCreateField capability as 
well.
>
> Can they appear later or not? I haven?t understood it at complete.
>
Calling CreateField() at any time is a possibility of the OGR API. That 
doesn't mean that all drivers have to support it. Most writers will 
generally create all needed fields before writing features, if they can, 
to be compatible with as many output drivers as possible.


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/336b14b1/attachment.htm>

From a.pau at creaf.uab.cat  Mon Oct  2 09:02:59 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Mon, 2 Oct 2023 16:02:59 +0000
Subject: [gdal-dev] Number of fields when creating layer?
In-Reply-To: <db1764ac-9214-4978-00d5-c80e80f372ce@spatialys.com>
References: <AM8PR07MB81702A68E0D4561EC5E03F4FA2C5A@AM8PR07MB8170.eurprd07.prod.outlook.com>
 <5c9eade5-318d-ca43-915c-6c5da227f98f@spatialys.com>
 <AM8PR07MB8170AF0B8B03FE1650A11FA0A2C5A@AM8PR07MB8170.eurprd07.prod.outlook.com>
 <db1764ac-9214-4978-00d5-c80e80f372ce@spatialys.com>
Message-ID: <AM8PR07MB817069846C49438D067239F3A2C5A@AM8PR07MB8170.eurprd07.prod.outlook.com>

Hi Even,
then I understand that CreateField() is the only thing that can create the fields and that call to this function stablish the number of fields for ALL EXISTING features at the moment of being called?

Thanks for the explanations. I?ll thing if it?s easy to support that or it?s better to error out this.
Abel

De: Even Rouault <even.rouault at spatialys.com>
Enviado el: dilluns, 2 d?octubre de 2023 17:36
Para: Abel Pau <a.pau at creaf.uab.cat>; gdal dev <gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Number of fields when creating layer?



Le 02/10/2023 ? 17:23, Abel Pau a ?crit :
Thanks Even,

that it?s not so bad. I can ?wait? until ICreateFeature and if it?s the first feature create the number of fields it has.

But, then, what happens with other fields that can appear after in next features? I might ignore them, but... it?s not a good thing.
Just look at existing drivers, like the JML one I pointed. They will error out when attempting to call CreateField() once a feature has been written, and they will stop advertizing the OLCCreateField capability as well.


Can they appear later or not? I haven?t understood it at complete.

Calling CreateField() at any time is a possibility of the OGR API. That doesn't mean that all drivers have to support it. Most writers will generally create all needed fields before writing features, if they can, to be compatible with as many output drivers as possible.



--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231002/98ade002/attachment.htm>

From nyall.dawson at gmail.com  Tue Oct  3 18:07:06 2023
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Wed, 4 Oct 2023 11:07:06 +1000
Subject: [gdal-dev] GDAL & content on sharepoint
Message-ID: <CAB28AshWackrYOctnQy_M=WQAm_FZ6_hUSbJXq_TvxgOVJR_MQ@mail.gmail.com>

Hi list!

This may be a long shot, but has anyone any experience with accessing
content stored on Sharepoint directly through GDAL? I'm not referring
to content synced locally (which works), but rather content in a
shared sharepoint folder which a user typically just accesses via the
web.

It looks like it could be theoretically possible by using the Sharepoint "
"_api/web/GetFolderByServerRelativeUrl" endpoint along with vsicurl
(along with the required authentication dance), but I'm curious
whether anyone else has tried this in the past and what the results
have been like....

Regards,
Nyall

From soren at girraphic.com  Tue Oct  3 21:26:06 2023
From: soren at girraphic.com (Soren Saville Scott)
Date: Wed, 4 Oct 2023 15:26:06 +1100
Subject: [gdal-dev] VSIGetMemFileBuffer Returns NULL When Copying Vector
 Dataset to Vsimem
Message-ID: <CALK_jWa8DfcC4R5KQF+poU+Df8nf=mo5dOTmv=O-G7_8mTJPuA@mail.gmail.com>

Hi,

I'm integrating GDAL in C++ with a system that defines its own asset types
stored on disk, and am writing a wrapper for datasets using this asset
system. To 'import' a dataset I call GDALOpenEx on it, CreateCopy() it to
some "/vsimem/foo.shp" path, GDALClose() the datasets to flush it, and call
VSIGetMemFileBuffer with bUnlinkAndSeize=true to take ownership of the
underlying memory buffer.

GDALDataset* Dataset = GDALOpenEx("foo.shp", GDAL_OF_VECTOR |
GDAL_OF_VERBOSE_ERROR, nullptr, nullptr, nullptr);
GDALDataset* Copy = Dataset->GetDriver()->CreateCopy("/vsimem/foo.shp",
Dataset, false, nullptr, nullptr, nullptr); //appears to produce a valid
Dataset containing the same layers & features as its source.
GDALClose(Dataset);
GDALClose(Copy);
size_t DataLength;
GByte* Buffer = VSIGetMemFileBuffer("/vsimem/foo.shp", &DataLength, true);
//<-- returns NULL

For some reason VSIGetMemFileBuffer always fails, returning a nullptr. This
is basically identical to a similar problem I had, described here:
 https://stackoverflow.com/questions/73644157/get-raw-buffer-for-in-memory-dataset-in-gdal-c-api
<https://stackoverflow.com/questions/73644157/get-raw-buffer-for-in-memory-dataset-in-gdal-c-api>
which
I never really found a solution to. I have similar issues with other VSI
functions, e.g. calling GDALOpenEx on a path created by
VSIFileFromMemBuffer also fails.

Any idea as to what the problem is here?

Alternatively, maybe there's a better way to 'emplace' datasets inside some
other file?

Thanks,
Soren Saville Scott
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231004/831f556e/attachment.htm>

From raghav.singh at eagleview.com  Tue Oct  3 22:39:46 2023
From: raghav.singh at eagleview.com (Raghav Singh)
Date: Wed, 4 Oct 2023 05:39:46 +0000
Subject: [gdal-dev] WMS layer issue at higher zoom level
Message-ID: <SA1PR20MB61213EBA99C6108CA013C4DD8CCBA@SA1PR20MB6121.namprd20.prod.outlook.com>

Hi,

I am trying to get a layer from wms and at higher zoom levels I am getting this error - msDrawMap(): Image handling error. Failed to draw layer named 'PICT-INHEND19-psQwiZ1L4t'. drawGDAL(): Unable to access file. GDALDatasetRasterIO() failed: /tmp/mapfilePassthru-v2-temp-HxmyxI, band 1: IReadBlock failed at X offset 1064, Y offset 1551.

So, for this I checked from the imageservice side the mapfile is being created correctly and it is also present there and the mapfile contains a gserve request for getting the tiles - that is also working fine. So getting this error from mapserver only and tried to put debug level 5 and other things also in the mapfile but couldn't get any other error, only this is coming. So need help in this if anybody knows what exactly is this and i can i debug mapserver locally if i want to then i can figure out the exact point where the error is coming from.

Thanks,
Raghav Singh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231004/d2cfb62f/attachment.htm>

From even.rouault at spatialys.com  Wed Oct  4 03:09:38 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 4 Oct 2023 12:09:38 +0200
Subject: [gdal-dev] VSIGetMemFileBuffer Returns NULL When Copying Vector
 Dataset to Vsimem
In-Reply-To: <CALK_jWa8DfcC4R5KQF+poU+Df8nf=mo5dOTmv=O-G7_8mTJPuA@mail.gmail.com>
References: <CALK_jWa8DfcC4R5KQF+poU+Df8nf=mo5dOTmv=O-G7_8mTJPuA@mail.gmail.com>
Message-ID: <7a0fd36f-4448-a639-34c2-f7ce220036c9@spatialys.com>

Hi,

size_t is an incorrect size for DataLength (if you run on 32 bit 
architecture). You should use vsi_l_offset.

Besides that the following standalone inspired from your code works fine 
for me:

#include <stdio.h>
#include "gdal_priv.h"

int main()
{
 ??? GDALAllRegister();
 ??? GDALDataset* Dataset 
=GDALDataset::FromHandle(GDALOpenEx("poly.shp", GDAL_OF_VECTOR | 
GDAL_OF_VERBOSE_ERROR, nullptr, nullptr, nullptr));
 ??? GDALDataset* Copy = 
Dataset->GetDriver()->CreateCopy("/vsimem/foo.shp", Dataset, false, 
nullptr, nullptr, nullptr); //appears to produce a valid Dataset 
containing the same layers & features as its source.
 ??? GDALClose(Dataset);
 ??? GDALClose(Copy);
 ??? vsi_l_offset DataLength = 0;
 ??? GByte* Buffer = VSIGetMemFileBuffer("/vsimem/foo.shp", &DataLength, 
true);
 ??? printf("%p %d\n", Buffer, int(DataLength)); // buffer not null and 
DataLength > 0
 ??? CPLFree(Buffer);
 ??? VSIUnlink("/vsimem/foo.dbf");
 ??? VSIUnlink("/vsimem/foo.shx");
 ??? return 0;
}

Even

Le 04/10/2023 ? 06:26, Soren Saville Scott via gdal-dev a ?crit?:
> Hi,
>
> I'm integrating GDAL in C++ with a system that defines its own asset 
> types stored on disk, and am writing a wrapper for datasets using this 
> asset system. To 'import' a dataset I call GDALOpenEx on it, 
> CreateCopy() it to some "/vsimem/foo.shp" path, GDALClose() the 
> datasets to flush it, and call VSIGetMemFileBuffer with 
> bUnlinkAndSeize=true to take ownership of the underlying memory buffer.
>
> GDALDataset* Dataset = GDALOpenEx("foo.shp", GDAL_OF_VECTOR | 
> GDAL_OF_VERBOSE_ERROR, nullptr, nullptr, nullptr);
> GDALDataset* Copy = 
> Dataset->GetDriver()->CreateCopy("/vsimem/foo.shp", Dataset, false, 
> nullptr, nullptr, nullptr); //appears to produce a valid Dataset 
> containing the same layers & features as its source.
> GDALClose(Dataset);
> GDALClose(Copy);
> size_t DataLength;
> GByte* Buffer = VSIGetMemFileBuffer("/vsimem/foo.shp", &DataLength, 
> true); //<-- returns NULL
>
> For some reason VSIGetMemFileBuffer always fails, returning a nullptr. 
> This is basically identical to a similar problem I had, described 
> here:?https://stackoverflow.com/questions/73644157/get-raw-buffer-for-in-memory-dataset-in-gdal-c-api 
> <https://stackoverflow.com/questions/73644157/get-raw-buffer-for-in-memory-dataset-in-gdal-c-api>?which 
> I never really found a solution to. I have similar issues with other 
> VSI functions, e.g. calling GDALOpenEx on a path created by 
> VSIFileFromMemBuffer also fails.
>
> Any idea as to what the problem is here?
>
> Alternatively, maybe there's a better way to 'emplace' datasets inside 
> some other file?
>
> Thanks,
> Soren Saville Scott
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231004/49a3117c/attachment-0001.htm>

From pschmitt at gmail.com  Thu Oct  5 10:03:04 2023
From: pschmitt at gmail.com (Peter Schmitt)
Date: Thu, 5 Oct 2023 11:03:04 -0600
Subject: [gdal-dev] WMS layer issue at higher zoom level
In-Reply-To: <SA1PR20MB61213EBA99C6108CA013C4DD8CCBA@SA1PR20MB6121.namprd20.prod.outlook.com>
References: <SA1PR20MB61213EBA99C6108CA013C4DD8CCBA@SA1PR20MB6121.namprd20.prod.outlook.com>
Message-ID: <CACkcqcX6SqF5KXiiBsKXJ7X2=e+q1HdRJ2E9i11RnjKrR+59qQ@mail.gmail.com>

On Tue, Oct 3, 2023 at 11:40?PM Raghav Singh via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> I am trying to get a layer from wms and at higher zoom levels I am getting
> this error - msDrawMap(): Image handling error. Failed to draw layer
> named 'PICT-INHEND19-psQwiZ1L4t'. drawGDAL(): Unable to access file.
> GDALDatasetRasterIO() failed: /tmp/mapfilePassthru-v2-temp-HxmyxI, band 1:
> IReadBlock failed at X offset 1064, Y offset 1551.
>

Are you running the latest GDAL release? I saw a similar errors in my
MapServer logs a long time back (maybe gdal-3.5.0??) that I stopped seeing
with the latest version of GDAL.  I've also seen reports of a similar error
when an image (or an overview) is somehow corrupted.
https://github.com/OSGeo/gdal/issues/5489
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231005/7e63d2dc/attachment.htm>

From pschmitt at gmail.com  Thu Oct  5 12:58:40 2023
From: pschmitt at gmail.com (Peter Schmitt)
Date: Thu, 5 Oct 2023 13:58:40 -0600
Subject: [gdal-dev] WMS layer issue at higher zoom level
In-Reply-To: <SA1PR20MB61216ACFB21E35564F69E2DB8CCAA@SA1PR20MB6121.namprd20.prod.outlook.com>
References: <SA1PR20MB61213EBA99C6108CA013C4DD8CCBA@SA1PR20MB6121.namprd20.prod.outlook.com>
 <CACkcqcX6SqF5KXiiBsKXJ7X2=e+q1HdRJ2E9i11RnjKrR+59qQ@mail.gmail.com>
 <SA1PR20MB61216ACFB21E35564F69E2DB8CCAA@SA1PR20MB6121.namprd20.prod.outlook.com>
Message-ID: <CACkcqcXC9MveZUaRzfzvWzT8EafgVabF53ToG_D7KaZ6KWq6eA@mail.gmail.com>

On Thu, Oct 5, 2023 at 12:00?PM Raghav Singh <raghav.singh at eagleview.com>
wrote:

> Thanks for replying. Yes, it can be this but just to confirm this we are
> getting only for a few imagesets and we have been getting this from a few
> months back only so if it was a error from way back why it came now in our
> system and only on higher zoom levels if it was a gdal issue it should have
> come up for all the imagesets.
>

If it's only at some select zoom level(s) I can't say for certain but
perhaps a single image file directory/overview is corrupted somehow?   I
suggest using the latest GDAL because it might have improved error handling
of some edge case you're running into.  It can be hard to know exactly
where something might be going wrong.  It could be /vsicurl/,
decompression, indexing to TIF offsets, network error, I/O, etc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231005/9d1201ad/attachment.htm>

From even.rouault at spatialys.com  Thu Oct  5 16:24:38 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 6 Oct 2023 01:24:38 +0200
Subject: [gdal-dev] VSIGetMemFileBuffer Returns NULL When Copying Vector
 Dataset to Vsimem
In-Reply-To: <CALK_jWY2Yjf+UKDf9XkBTTbka3ukVMhZbu-=6czEavWpk2uPzA@mail.gmail.com>
References: <CALK_jWa8DfcC4R5KQF+poU+Df8nf=mo5dOTmv=O-G7_8mTJPuA@mail.gmail.com>
 <7a0fd36f-4448-a639-34c2-f7ce220036c9@spatialys.com>
 <CALK_jWY2Yjf+UKDf9XkBTTbka3ukVMhZbu-=6czEavWpk2uPzA@mail.gmail.com>
Message-ID: <7e901e9c-9a87-d79f-77e9-0f90f9230627@spatialys.com>


Le 06/10/2023 ? 01:11, Soren Saville Scott a ?crit?:
> Hi Even,
>
> Suggests something wrong with my build. Is there possibly something 
> strange happening across DLL boundaries? Do you know of any build 
> flags that could change the VSIMEM behaviour?
I'm not seeing anything suspicious here, especially because 
VSIGetMemFileBuffer() is in the C API.
>
> As a secondary question, for multi-file datasets (like shapefiles) 
> does VSIGetMemFileBuffer() encapsulate all those files - i.e. I should 
> be able to call VSIFileFromMemBuffer() on that buffer and GDALOpen() 
> and get the same information back?

You need to read each file separately. VSIGetMemFileBuffer() works at 
the file level. It has no idea of what a GDAL dataset is.

You can use GDALGetFileList() to get the list of files of a dataset. You 
might want to do that on a dataset after re-opening, since there has 
been a recent bug fix w.r.t GetFileList() on shapefiles just created 
where one of the side car file wasn't listed

>
> Thanks for your help,
> Soren
>
> On Wed, 4 Oct 2023 at 21:09, Even Rouault <even.rouault at spatialys.com> 
> wrote:
>
>     Hi,
>
>     size_t is an incorrect size for DataLength (if you run on 32 bit
>     architecture). You should use vsi_l_offset.
>
>     Besides that the following standalone inspired from your code
>     works fine for me:
>
>     #include <stdio.h>
>     #include "gdal_priv.h"
>
>     int main()
>     {
>     ??? GDALAllRegister();
>     ??? GDALDataset* Dataset
>     =GDALDataset::FromHandle(GDALOpenEx("poly.shp", GDAL_OF_VECTOR |
>     GDAL_OF_VERBOSE_ERROR, nullptr, nullptr, nullptr));
>     ??? GDALDataset* Copy =
>     Dataset->GetDriver()->CreateCopy("/vsimem/foo.shp", Dataset,
>     false, nullptr, nullptr, nullptr); //appears to produce a valid
>     Dataset containing the same layers & features as its source.
>     ??? GDALClose(Dataset);
>     ??? GDALClose(Copy);
>     ??? vsi_l_offset DataLength = 0;
>     ??? GByte* Buffer = VSIGetMemFileBuffer("/vsimem/foo.shp",
>     &DataLength, true);
>     ??? printf("%p %d\n", Buffer, int(DataLength)); // buffer not null
>     and DataLength > 0
>     ??? CPLFree(Buffer);
>     ??? VSIUnlink("/vsimem/foo.dbf");
>     ??? VSIUnlink("/vsimem/foo.shx");
>     ??? return 0;
>     }
>
>     Even
>
>     Le 04/10/2023 ? 06:26, Soren Saville Scott via gdal-dev a ?crit?:
>>     Hi,
>>
>>     I'm integrating GDAL in C++ with a system that defines its own
>>     asset types stored on disk, and am writing a wrapper for datasets
>>     using this asset system. To 'import' a dataset I call GDALOpenEx
>>     on it, CreateCopy() it to some "/vsimem/foo.shp" path,
>>     GDALClose() the datasets to flush it, and call
>>     VSIGetMemFileBuffer with bUnlinkAndSeize=true to take ownership
>>     of the underlying memory buffer.
>>
>>     GDALDataset* Dataset = GDALOpenEx("foo.shp", GDAL_OF_VECTOR |
>>     GDAL_OF_VERBOSE_ERROR, nullptr, nullptr, nullptr);
>>     GDALDataset* Copy =
>>     Dataset->GetDriver()->CreateCopy("/vsimem/foo.shp", Dataset,
>>     false, nullptr, nullptr, nullptr); //appears to produce a valid
>>     Dataset containing the same layers & features as its source.
>>     GDALClose(Dataset);
>>     GDALClose(Copy);
>>     size_t DataLength;
>>     GByte* Buffer = VSIGetMemFileBuffer("/vsimem/foo.shp",
>>     &DataLength, true); //<-- returns NULL
>>
>>     For some reason VSIGetMemFileBuffer always fails, returning a
>>     nullptr. This is basically identical to a similar problem I had,
>>     described
>>     here:?https://stackoverflow.com/questions/73644157/get-raw-buffer-for-in-memory-dataset-in-gdal-c-api
>>     <https://stackoverflow.com/questions/73644157/get-raw-buffer-for-in-memory-dataset-in-gdal-c-api>?which
>>     I never really found a solution to. I have similar issues with
>>     other VSI functions, e.g. calling GDALOpenEx on a path created by
>>     VSIFileFromMemBuffer also fails.
>>
>>     Any idea as to what the problem is here?
>>
>>     Alternatively, maybe there's a better way to 'emplace' datasets
>>     inside some other file?
>>
>>     Thanks,
>>     Soren Saville Scott
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231006/23b4a31c/attachment.htm>

From leo.fuhrmann.lgln at icloud.com  Fri Oct  6 06:08:13 2023
From: leo.fuhrmann.lgln at icloud.com (leo.fuhrmann.lgln at icloud.com)
Date: Fri, 6 Oct 2023 15:08:13 +0200
Subject: [gdal-dev] Questions regarding temporary database file (ogr2ogr
 with MVT driver)
Message-ID: <E5E388D9-8B99-4EFE-A755-919E89DDEA0A@icloud.com>

Hi,

I?m creating vector tiles from a PostGIS database using ogr2ogr with the MVT driver. The region is quite large and I?m creating tiles for levels 0-15, so the process takes quite some time (hours). The tiles are written directly to a S3 storage using the /vsis3/ virtual file system (see: https://gdal.org/user/virtual_file_systems.html#vsis3-aws-s3-files).

Looking at the logs, I can see that, firstly, a ?temporary database? file (*.temp.db) is created. Some things are notable:

- this step seems to be CPU intensive compared to the creation of the actual pbf files
- the temporary database file is not being written to the output file directory (S3 storage in this case) as stated in the documentation
- the dataset creation option `TEMPORARY_DB` (see: https://gdal.org/drivers/vector/mvt.html#dataset-creation-options) seems to be ignored (I tried writing the file to a local directory but no such file shows up)
- my guess is that the file is only kept in memory (which would be /vsimem/ if I?m correct)

Is it possible to skip the step of first creating the temp db and directly create tiles from PostGIS or any other data source? Where/how exactly is the database file stored? Any ideas on optimizing the process?

I?m looking forward to some discussion on this topic. I will happily try to contribute where I can.

Regards,

Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231006/cf303b77/attachment.htm>

From even.rouault at spatialys.com  Fri Oct  6 06:44:34 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 6 Oct 2023 15:44:34 +0200
Subject: [gdal-dev] Questions regarding temporary database file (ogr2ogr
 with MVT driver)
In-Reply-To: <E5E388D9-8B99-4EFE-A755-919E89DDEA0A@icloud.com>
References: <E5E388D9-8B99-4EFE-A755-919E89DDEA0A@icloud.com>
Message-ID: <dd5da95e-3fa3-4cac-91c6-bb9ba9ba5da5@spatialys.com>

Hi,,
>
> I?m creating vector tiles from a PostGIS database using ogr2ogr with 
> the MVT driver. The region is quite large and I?m creating tiles for 
> levels 0-15, so the process takes quite some time (hours). The tiles 
> are written directly to a S3 storage using the /vsis3/?virtual file 
> system (see: 
> https://gdal.org/user/virtual_file_systems.html#vsis3-aws-s3-files).
>
> Looking at the logs, I can see that, firstly, a ?temporary database? 
> file (*.temp.db) is created. Some things are notable:
>
> - this step seems to be CPU intensive compared to the creation of the 
> actual pbf files
> - the temporary database file is not being written to the output file 
> directory (S3 storage in this case) as stated in the documentation

I don't observe this:

$ ogr2ogr /vsis3/XXXXX/foo.mvt poly.shp
ERROR 1: wb+ not supported for /vsis3/, unless 
CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE is set to YES

vs

$ ogr2ogr /vsis3/spatialys/foo.mvt poly.shp -dsco 
TEMPORARY_DB=/tmp/my.temp.db

> - the dataset creation option `TEMPORARY_DB` (see: 
> https://gdal.org/drivers/vector/mvt.html#dataset-creation-options) 
> seems to be ignored (I tried writing the file to a local directory but 
> no such file shows up)
On Unix, the file is immediately deleted after being opened, so that if 
you kill the process there's no remaining temporary file. You can set 
the OGR_MVT_REMOVE_TEMP_FILE env variable to NO to disable this
> - my guess is that the file is only kept in memory (which would be 
> /vsimem/ if I?m correct)
>
> Is it possible to skip the step of first creating the temp db and 
> directly create tiles from PostGIS or any other data source?
No
> Where/how exactly is the database file stored? Any ideas on optimizing 
> the process?

You could possibly paralle

Also, the MVT generator is intended to be basic. You might perhaps have 
more functionality with https://github.com/felt/tippecanoe

>
> I?m looking forward to some discussion on this topic. I will happily 
> try to contribute where I can.
>
> Regards,
>
> Leo
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Fri Oct  6 07:12:03 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 6 Oct 2023 14:12:03 +0000
Subject: [gdal-dev] Questions regarding temporary database file (ogr2ogr
 with MVT driver)
In-Reply-To: <E5E388D9-8B99-4EFE-A755-919E89DDEA0A@icloud.com>
References: <E5E388D9-8B99-4EFE-A755-919E89DDEA0A@icloud.com>
Message-ID: <AM0PR09MB3219F237B02A85C2C5111FABFDC9A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

I tested with this environmental variable and command

set OGR_MVT_REMOVE_TEMP_FILE=NO
ogr2ogr -f mvt -dsco temporary_db=c:\data\mtk\temp\temp.db out.mvt mtkmaasto.gpkg rakennus --debug on

Once ogr2ogr stopped I had the temp.db file left in the directory. It seems to be a simple SQLite database. Without setting the environmental variable the temporary database was immediately deleted. During the process the file explorer only shows that the file exists but with file size of 0 bytes. I believe that this is normal behavior with SQLite.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Leo Fuhrmann via gdal-dev
L?hetetty: perjantai 6. lokakuuta 2023 16.08
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Questions regarding temporary database file (ogr2ogr with MVT driver)

Hi,

I'm creating vector tiles from a PostGIS database using ogr2ogr with the MVT driver. The region is quite large and I'm creating tiles for levels 0-15, so the process takes quite some time (hours). The tiles are written directly to a S3 storage using the /vsis3/ virtual file system (see: https://gdal.org/user/virtual_file_systems.html#vsis3-aws-s3-files).

Looking at the logs, I can see that, firstly, a "temporary database" file (*.temp.db) is created. Some things are notable:

- this step seems to be CPU intensive compared to the creation of the actual pbf files
- the temporary database file is not being written to the output file directory (S3 storage in this case) as stated in the documentation
- the dataset creation option `TEMPORARY_DB` (see: https://gdal.org/drivers/vector/mvt.html#dataset-creation-options) seems to be ignored (I tried writing the file to a local directory but no such file shows up)
- my guess is that the file is only kept in memory (which would be /vsimem/ if I'm correct)

Is it possible to skip the step of first creating the temp db and directly create tiles from PostGIS or any other data source? Where/how exactly is the database file stored? Any ideas on optimizing the process?

I'm looking forward to some discussion on this topic. I will happily try to contribute where I can.

Regards,

Leo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231006/cdedb476/attachment-0001.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Oct  6 07:39:53 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 6 Oct 2023 14:39:53 +0000
Subject: [gdal-dev] Default page size of the OAPIF driver
Message-ID: <AM0PR09MB3219B1E0DF12EE9F9D4F08E4FDC9A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

The OAPIF driver is using page size of 10 features by default https://gdal.org/drivers/vector/oapif.html#open-options.

"PAGE_SIZE=<integer>: Defaults to 10. Number of features to retrieve per request. Minimum is 1, maximum 10000."

I know that 10 is the default page size ("limit") also in the standard but I think that this is too small page size, both for the users and especially for the service providers. Most users run GDAL utilities with the defaults. The buildings collection in our OGC API Features service has about 5 million features, which means that GDAL users are fetching the data by sending half a million request. That is much slower for the users than making 500 request, 10000 features each. And think about our log files.

The better default page size would be the biggest that the OAPIF server supports. By the standard the maximum is 10000 but service providers may use bigger or smaller maximum page sizes. By the standard the server can always return less features than client is asking with "limit=" and the client must be prepared to follow the next links.

My suggestion for the new page size default is 10000. If that feels too big for some reason, then would 1000 feel better?

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231006/7a3332be/attachment.htm>

From even.rouault at spatialys.com  Fri Oct  6 07:47:03 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 6 Oct 2023 16:47:03 +0200
Subject: [gdal-dev] Default page size of the OAPIF driver
In-Reply-To: <AM0PR09MB3219B1E0DF12EE9F9D4F08E4FDC9A@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <AM0PR09MB3219B1E0DF12EE9F9D4F08E4FDC9A@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <22b6d9f3-7a9a-4183-8033-e3511dbe48cb@spatialys.com>

Hi Jukka,

yes it would make sense for the driver to use a larger page size. You 
can file an issue about that

Actually we could reuse the same logic as the QGIS OAPIF provider that 
determines the page size from the limit.schema.maximum and 
limit.schema.default values of the /api response:

 ??? if ( apiRequest.defaultLimit() > 0 && apiRequest.maxLimit() > 0 )
 ??? {
 ????? // Use the default, but if it is below 1000, aim for 1000
 ????? // but clamp to the maximum limit
 ????? mShared->mPageSize = std::min( std::max( 1000, 
apiRequest.defaultLimit() ), apiRequest.maxLimit() );
 ??? }
 ??? else if ( apiRequest.defaultLimit() > 0 )
 ????? mShared->mPageSize = std::max( 1000, apiRequest.defaultLimit() );
 ??? else if ( apiRequest.maxLimit() > 0 )
 ????? mShared->mPageSize = apiRequest.maxLimit();
 ??? else
 ????? mShared->mPageSize = 100; // fallback to arbitrary page size


Even

Le 06/10/2023 ? 16:39, Rahkonen Jukka via gdal-dev a ?crit?:
>
> Hi,
>
> The OAPIF driver is using page size of 10 features by default 
> https://gdal.org/drivers/vector/oapif.html#open-options.
>
> ?PAGE_SIZE=<integer>: Defaults to 10. Number of features to retrieve 
> per request. Minimum is 1, maximum 10000.?
>
> I know that 10 is the default page size (?limit?) also in the standard 
> but I think that this is too small page size, both for the users and 
> especially for the service providers. Most users run GDAL utilities 
> with the defaults. The buildings collection in our OGC API Features 
> service has about 5 million features, which means that GDAL users are 
> fetching the data by sending half a million request. That is much 
> slower for the users than making 500 request, 10000 features each. And 
> think about our log files.
>
> The better default page size would be the biggest that the OAPIF 
> server supports. By the standard the maximum is 10000 but service 
> providers may use bigger or smaller maximum page sizes. By the 
> standard the server can always return less features than client is 
> asking with ?limit=? and the client must be prepared to follow the 
> next links.
>
> My suggestion for the new page size default is 10000. If that feels 
> too big for some reason, then would 1000 feel better?
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231006/0fadb609/attachment.htm>

From leo.fuhrmann.lgln at icloud.com  Fri Oct  6 08:11:12 2023
From: leo.fuhrmann.lgln at icloud.com (leo.fuhrmann.lgln at icloud.com)
Date: Fri, 6 Oct 2023 17:11:12 +0200
Subject: [gdal-dev] Questions regarding temporary database file (ogr2ogr
 with MVT driver)
Message-ID: <5BB4D71D-FAE7-4791-AD49-3C67BFD1ADB0@icloud.com>

Thank you for your answers, Even and Jukka.


> I don't observe this

> During the process the file explorer only shows that the file exists but with file size of 0 bytes

You?re right. When setting OGR_MVT_REMOVE_TEMP_FILE=NO I can also see and inspect the file, either in combination with -dsco TEMPORARY_DB=... on my local fs or with CPL_VSIL_USE_TEMP_FILE_FOR_RANDOM_WRITE=YES on the S3 storage. Thanks for clearing this up. Everything works as expected then.

> You could possibly paralle

Your text cut off at the interesting bit, could you elaborate on this @Even?

> Also, the MVT generator is intended to be basic

That?s why we like to use it. Also it gives the wonderful opportunity to have PostGIS and many more as data sources. 

Is it possible to create the temporary database without subsequently creating the tiles? And is it possible to use the temporary database as a data source directly? I imagine the following case: create the temp db, then create different tile sets from it. This would save some time during the tiling process, since the temp.db would not have to be created each time.

Thanks

From howard at hobu.co  Fri Oct  6 08:13:08 2023
From: howard at hobu.co (Howard Butler)
Date: Fri, 6 Oct 2023 10:13:08 -0500
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
Message-ID: <F13D156D-F033-4625-B2F6-51F4A5548E69@hobu.co>

Howard Butler, Even Rouault, Dan Baston, and Alessandro Pasotti held the monthly GDAL Maintainers Meeting on 09/28/2023. The following items were discussed and reported upon:

Fundraising update
----------------------------

Good news on fundraising: Amazon Web Services, who had previously announced they were not going to be able to renew their Gold level sponsorship for 2024, was able to reverse the decision and continue sponsoring GDAL at the same level for the next year.

Also Maxar, who had previously announced they were not going to be able to renew their Gold level for 2024, was able to reverse the decision and continue sponsoring GDAL for the next year the Bronze level.

Thanks again to the advocates within both of these organizations for continuing to push for resources despite being told 'no'. We still have a number of renewals to complete before we are done for the cycle this year. 

Maintenance activities update
------------------------------------------

* Even attended the NumFOCUS Project Summit September 11-13th in Amsterdam. https://www.summit.numfocus.org/ where he gave a lightning talk about GDAL's extensive CI system http://download.osgeo.org/gdal/presentations/NumFocus%20Summit%202023%20Tour%20of%20tools%20used%20by%20GDAL%20CI%2C%20testing%20and%20documentation.pdf and discussed Arrow topics with Joris Van den Bossche and Martin Fleischmann of the GeoPandas project. He provided a full report to the GDAL PSC about his attendance.

* Even coordinated and issued the GDAL 3.7.2 release. Detailed release notes about what it included can be found at https://github.com/OSGeo/gdal/blob/v3.7.2/NEWS.md

*Even coordinated and issued the libtiff 4.6.0 release. Detailed release notes about what it included can be found at https://gitlab.com/libtiff/libtiff/-/releases/v4.6.0

* Even spent significant time updating the PDF driver in response to QGIS performance scenarios that showed it needed attention. This included updating the backend to use Podofo 0.10.

* Even wrote RFC 95 to align GDAL's integer types with typical stdint approaches. https://github.com/OSGeo/gdal/pull/8399 It was decided to table implementation until GDAL has its next major (4.0) release. The next release, 3.8.0 due this fall, is not intended to be that major release.

* Maintainers had a short discussion about adding something like an GDALOpenJSON method to allow applications to provide a single JSON data structure for layer and data source options, along with VSI protocol hints and (maybe) environment variables. Discussion about such an idea should continue in open forums such as the mailing list.

* Alessandro worked on the subdataset API and thought about approaches to provide the entire set of option possibilities (paths, open options, dataset options, etc), which prompted the GDALOpenJSON discussion above.

* Dan continued working through making all of the GDAL test suite tests run independently. That important milestone is almost complete.

* Dan exposed GDALClose to the Python bindings in support of explicit destruction of resources for the test suite (rather than hoping __del__ does it by dropping a reference).

* Dan began working up a Ubuntu 22.04-based CI test container.

Upcoming Events
------------------------------------------

* FOSS4GNA 2023 is being held in Baltimore, Maryland, USA on October 23-25th.

* OSGeo 2023 Community Sprint will be held in Vienna, Austria November 6-9th, 2023. https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2023 GDAL PSC members seeking travel support should contact Howard Butler privately to coordinate.

Next Meeting
------------------------------------------

The next GDAL Maintainers Meeting is 10/26/2023 at 9:00 EDT. Any PSC members are welcome to join by reaching out to me for an invite.

Howard

From even.rouault at spatialys.com  Fri Oct  6 08:37:17 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 6 Oct 2023 17:37:17 +0200
Subject: [gdal-dev] Questions regarding temporary database file (ogr2ogr
 with MVT driver)
In-Reply-To: <5BB4D71D-FAE7-4791-AD49-3C67BFD1ADB0@icloud.com>
References: <5BB4D71D-FAE7-4791-AD49-3C67BFD1ADB0@icloud.com>
Message-ID: <a6d48d0f-c8a3-48a1-bbd4-ba702849091a@spatialys.com>

>> You could possibly paralle
> Your text cut off at the interesting bit, could you elaborate on this @Even?

ah I meant you could parallelize generation on several machines, each 
one with a different extent and/or zoom level

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231006/2d21517e/attachment.htm>

From pschmitt at gmail.com  Fri Oct  6 13:45:42 2023
From: pschmitt at gmail.com (Peter Schmitt)
Date: Fri, 6 Oct 2023 14:45:42 -0600
Subject: [gdal-dev] WMS layer issue at higher zoom level
In-Reply-To: <SA1PR20MB6121D150FA1517E8B2762C138CC9A@SA1PR20MB6121.namprd20.prod.outlook.com>
References: <SA1PR20MB61213EBA99C6108CA013C4DD8CCBA@SA1PR20MB6121.namprd20.prod.outlook.com>
 <CACkcqcX6SqF5KXiiBsKXJ7X2=e+q1HdRJ2E9i11RnjKrR+59qQ@mail.gmail.com>
 <SA1PR20MB61216ACFB21E35564F69E2DB8CCAA@SA1PR20MB6121.namprd20.prod.outlook.com>
 <CACkcqcXC9MveZUaRzfzvWzT8EafgVabF53ToG_D7KaZ6KWq6eA@mail.gmail.com>
 <SA1PR20MB6121D150FA1517E8B2762C138CC9A@SA1PR20MB6121.namprd20.prod.outlook.com>
Message-ID: <CACkcqcWofyrRcEHgJY2xPFdmjOz=mVH3-sir-Ed_uh+7fMVsmQ@mail.gmail.com>

On Thu, Oct 5, 2023 at 6:51?PM Raghav Singh <raghav.singh at eagleview.com>
wrote:

> Is there any method to debug mapserver so we can know where the root cause
> is?
>

See https://mapserver.org/optimization/debugging.html

You might pose specific questions to the Mapserver mailing list
https://lists.osgeo.org/mailman/listinfo/mapserver-users

and reply-all on a mailing list thread as future users might find the
discussion helpful.

Cheers,
Pete
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231006/b9e64d28/attachment.htm>

From jamessammone at gmail.com  Sat Oct  7 15:01:42 2023
From: jamessammone at gmail.com (James Sammone)
Date: Sat, 7 Oct 2023 18:01:42 -0400
Subject: [gdal-dev] The relationship between overview levels and zoom levels?
Message-ID: <CAPLJBkX0UfzVYCaX-2KDgGbdihk9HFotuQ1VC9Spk7f-19wvZw@mail.gmail.com>

I'm not sure if this is the best channel to ask this question as it might
be beyond the scope, but I've asked it in a few others and have had no
responses aside from others also being curious.
<https://gis.stackexchange.com/posts/450396/timeline>

I am trying to understand the relationship between overviews and zoom
levels so I know how to make more efficient Cloud Optimized GeoTIFFs. Using
gdaladdo or gdal.BuildOverviews(), I can create overviews at [2,4,8,16] or
at just [16]. From my understanding, this means the size is being divided
by those values to provide downsample arrays of the original source. In the
first example [2,4,8,16], I've created 4 separate overview arrays into the
GeoTIFF that are 2x, 4x, 8x, and 16x downsampled. And in the second example
using only [16], I've built one overview array into the GeoTIFF that is 16x
downsampled.

How can I understand how these overviews are applied when it comes to zoom
levels? Does the 16x downsample appear sooner in the second example when
zooming out than for the first example due to being first in order? Or do
the 16x downsamples appear at the same zoom level for both cases but the
second example has additional 2x, 4x, and 8x downsamples that also appear
before getting there?

Thanks for any insight into this anyone can provide. Despite using
overviews all the time, I've struggled with this for a while and had
largely consigned to not understanding it.

Best,

James
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231007/c3960e22/attachment.htm>

From rdmailings at duif.net  Sun Oct  8 00:32:47 2023
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Sun, 8 Oct 2023 09:32:47 +0200
Subject: [gdal-dev] The relationship between overview levels and zoom
 levels?
In-Reply-To: <CAPLJBkX0UfzVYCaX-2KDgGbdihk9HFotuQ1VC9Spk7f-19wvZw@mail.gmail.com>
References: <CAPLJBkX0UfzVYCaX-2KDgGbdihk9HFotuQ1VC9Spk7f-19wvZw@mail.gmail.com>
Message-ID: <eab6b373-328d-41fb-b924-06a804e11c03@duif.net>

Hi James,

If I understand correctly, it is simpler then you might think.

The main purpose of these overviews is to have a quicker/better response at higher
(overview) levels. So if you have one giant Geotiff (meaning a LOT of cells),
you still would have to open and check ALL cell values, even if you want to
have a small overview image of 100x100 pixels, in which you have to downs-ample
anyway to get the general overview. Down-sampling images is a very cpu
intensive task, which can be done in different ways. The best looking way
also are the most 'expensive'.

The Overviews are more like a good looking cache (already down-sampled) that
are saved so you don not have to go into the full dataset the next time
you only need this 100x100 pixel image.

In general, the overview/pyramid levels have nothing to do with the zoom
levels of a software client. Having 5 or 8 overview levels in your data, a client
can still zoom in 10 or 12 or 3 steps through the map image.

It will just pick the most efficient available image/overview.

So say a software client in which you want to have a general overview which
(if you would work with printed maps) would (on zoom scale level) be more close
to the level which is is like the 8x pyramid (zoom level), would
- in the case there IS a 8x pyramid (your [2,4,8,16]) case): just pick the
8x version to generate the image for you.
- in the case there is NO 8x level (image), it will pick the level which
will take the least effort to generate the 8x zoom image, with the extra
constraint that it will never have to up-sample(? is that the term)? the
image. So in this case I think it will not pick the 16x level, because that
would mean that it will have to blow up pixels to fit..
Same with (viewing) zoom levels NOT on the exact overview levels: it will
take the (overview) data that is the least work.

I realize this is mostly talking about normal geotiffs, but I think the
reasoning also goes up for Cloud Optimized GeoTIFFs.

It's all about 'prerendering' because down--sampling is a cpu intensive
task. And for prerendered images you can use more expensive sample
algorithms.

Hope this helps, or else somebody has a better answer :-)

Regards,

Richard Duivenvoorde



On 10/8/23 00:01, James Sammone via gdal-dev wrote:
> I'm not sure if this is the best channel to ask this question as it might
> be beyond the scope, but I've asked it in a few others and have had no
> responses aside from others also being curious.
> <https://gis.stackexchange.com/posts/450396/timeline>
> 
> I am trying to understand the relationship between overviews and zoom
> levels so I know how to make more efficient Cloud Optimized GeoTIFFs. Using
> gdaladdo or gdal.BuildOverviews(), I can create overviews at [2,4,8,16] or
> at just [16]. From my understanding, this means the size is being divided
> by those values to provide downsample arrays of the original source. In the
> first example [2,4,8,16], I've created 4 separate overview arrays into the
> GeoTIFF that are 2x, 4x, 8x, and 16x downsampled. And in the second example
> using only [16], I've built one overview array into the GeoTIFF that is 16x
> downsampled.
> 
> How can I understand how these overviews are applied when it comes to zoom
> levels? Does the 16x downsample appear sooner in the second example when
> zooming out than for the first example due to being first in order? Or do
> the 16x downsamples appear at the same zoom level for both cases but the
> second example has additional 2x, 4x, and 8x downsamples that also appear
> before getting there?
> 
> Thanks for any insight into this anyone can provide. Despite using
> overviews all the time, I've struggled with this for a while and had
> largely consigned to not understanding it.
> 
> Best,
> 
> James
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at maanmittauslaitos.fi  Sun Oct  8 02:05:02 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Sun, 8 Oct 2023 09:05:02 +0000
Subject: [gdal-dev] The relationship between overview levels and zoom
 levels?
In-Reply-To: <CAPLJBkX0UfzVYCaX-2KDgGbdihk9HFotuQ1VC9Spk7f-19wvZw@mail.gmail.com>
References: <CAPLJBkX0UfzVYCaX-2KDgGbdihk9HFotuQ1VC9Spk7f-19wvZw@mail.gmail.com>
Message-ID: <AM0PR09MB321954841BC15A39081840A3FDCFA@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

There are documentation about overviews in https://gdal.org/drivers/raster/cog.html, https://gdal.org/drivers/raster/gtiff.html, and https://gdal.org/programs/gdal_translate.html. Probably in other places, too, but reading those carefully is a good start. They deal also a bit with zoom levels.

What happens when a client opens an image with only one overview [16] is totally up to the client. It knows that the 1/16 downsampled version is available and it may decide to use the closest available overview: first full resolution till 1/8 and then jump to use 1/16. This is the AUTO approach of gdal_translate. Some other client would prefer better quality and use the full resolution up till 1/16 to avoid upsampling data that has downsampled earlier.

The COG driver has options for creating the overviews to match with the zoom levels of the selected tiling schema. Then there will be no need to resample the overview data again when the client makes zoom level based requests.

-Jukka Rahkonen-



L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta James Sammone via gdal-dev
L?hetetty: sunnuntai 8. lokakuuta 2023 1.02
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] The relationship between overview levels and zoom levels?

I'm not sure if this is the best channel to ask this question as it might be beyond the scope, but I've asked it in a few others and have had no responses aside from others also being curious.

I am trying to understand the relationship between overviews and zoom levels so I know how to make more efficient Cloud Optimized GeoTIFFs. Using gdaladdo or gdal.BuildOverviews(), I can create overviews at [2,4,8,16] or at just [16]. From my understanding, this means the size is being divided by those values to provide downsample arrays of the original source. In the first example [2,4,8,16], I've created 4 separate overview arrays into the GeoTIFF that are 2x, 4x, 8x, and 16x downsampled. And in the second example using only [16], I've built one overview array into the GeoTIFF that is 16x downsampled.

How can I understand how these overviews are applied when it comes to zoom levels? Does the 16x downsample appear sooner in the second example when zooming out than for the first example due to being first in order? Or do the 16x downsamples appear at the same zoom level for both cases but the second example has additional 2x, 4x, and 8x downsamples that also appear before getting there?

Thanks for any insight into this anyone can provide. Despite using overviews all the time, I've struggled with this for a while and had largely consigned to not understanding it.

Best,

James
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231008/69da84cf/attachment.htm>

From even.rouault at spatialys.com  Sun Oct  8 04:21:36 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 8 Oct 2023 13:21:36 +0200
Subject: [gdal-dev] The relationship between overview levels and zoom
 levels?
In-Reply-To: <CAPLJBkX0UfzVYCaX-2KDgGbdihk9HFotuQ1VC9Spk7f-19wvZw@mail.gmail.com>
References: <CAPLJBkX0UfzVYCaX-2KDgGbdihk9HFotuQ1VC9Spk7f-19wvZw@mail.gmail.com>
Message-ID: <79c3c715-1f4a-4a2f-aa8f-d71688f020a8@spatialys.com>

James,

It all depends on how software will deal with overviews. Some might 
explicitly have logic where it inspects which overviews are present and 
decide which one to use. If we are talking about a client like QGIS that 
uses the RasterIO() method on the full resolution band with a window of 
interest (nXOff, nYOff, nXSize, nYSize) and a target buffer size 
(nBufXSize, nBufYSize),? GDAL computes a target downscaling factor for 
that which is the min(nXSize/nBufXSize, nYSize/nBufYSize).? It then 
walks through overviews and will select the frist one whose downscaling 
factor is greater than target_dowscanling_factor / 1.2

If you have overviews at [2,4,8,16]

target_downscaling_factor??????? selected_overview
-------------------------??????? --------------------------
]0, 2. /1.2[ ??????????????????? full resolution band
[2. / 1.2, 4. / 1.2[ ??????????? 2x downsampled
[4. / 1.2, 8. / 1.2[ ??????????? 4x downsampled
[8. / 1.2, 16. / 1.2[ ?????????? 8x downsampled
[16. / 1.2, inf[???????????????? 16x downsampled

If you just have overview [16]

target_downscaling_factor??????? selected_overview
-------------------------??????? --------------------------
]0, 16. /1.2[ ?????????????????? full resolution band
[16. / 1.2, inf[???????????????? 16x downsampled

I've submitted in https://github.com/OSGeo/gdal/pull/8526 a doc 
improvement capturing above explanations

Even


Le 08/10/2023 ? 00:01, James Sammone via gdal-dev a ?crit?:
> I'm not sure if this is the best channel to ask this question as it 
> might be beyond the scope, but I've asked it in a few others and have 
> had no responses aside from others also being curious.
>
> I am trying to understand the relationship between overviews and zoom 
> levels so I know how to make more efficient Cloud Optimized GeoTIFFs. 
> Using gdaladdo or gdal.BuildOverviews(), I can create overviews at 
> [2,4,8,16] or at just [16]. From my understanding, this means the size 
> is being divided by those values to provide downsample arrays of the 
> original source. In the first example [2,4,8,16], I've created 4 
> separate overview arrays into the GeoTIFF that are 2x, 4x, 8x, and 16x 
> downsampled. And in the second example using only [16], I've built one 
> overview array into the GeoTIFF that is 16x downsampled.
>
> How can I understand how these overviews are applied when it comes to 
> zoom levels? Does the 16x downsample appear sooner in the second 
> example when zooming out than for the first example due to being first 
> in order? Or do the 16x downsamples appear at the same zoom level for 
> both cases but the second example has additional 2x, 4x, and 8x 
> downsamples that also appear before getting there?
>

> Thanks for any insight into this anyone can provide. Despite using 
> overviews all the time, I've struggled with this for a while and had 
> largely consigned to not understanding it.
>
> Best,
>
> James
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From mdsumner at gmail.com  Mon Oct  9 12:55:23 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 10 Oct 2023 06:55:23 +1100
Subject: [gdal-dev] format for topology?
Message-ID: <CAAcGz987=w1w+R27jNJSJHMPu3n+w0oyHeqKhF4wAU3VjvgQuw@mail.gmail.com>

Are there any formats that record "coverage" topology? What I'm worried
about is when shapes are encoded as blob geometry with initially identical
 coordinates at shared vertices, is there any process that can validate or
record that particular coords should have the same values even after
reprojection or decomposition/rebuild?

I know how to do this in custom ways, I'm hoping to find some off-the-shelf
process to at least refer to (I'm a bit pressed for time so I'm asking
without doing the extra homework that's needed).  I would build an indexer
of the unique coordinates and how they relate to the blob geometries before
and after and do checks there, but I don't know of an existing process that
guarantees this.

I understand that precision-setting is used to prevent numeric loss, but is
there any formalization about that loss? (i.e.  different instances of a
vertex really do stay unique). I guess the result is going to be pretty
good if you choose the precision appropriately and modifications aren't
extreme?

Thanks for consideration!

Cheers, Mike






--
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231010/c1c68554/attachment.htm>

From even.rouault at spatialys.com  Mon Oct  9 13:04:56 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 9 Oct 2023 22:04:56 +0200
Subject: [gdal-dev] format for topology?
In-Reply-To: <CAAcGz987=w1w+R27jNJSJHMPu3n+w0oyHeqKhF4wAU3VjvgQuw@mail.gmail.com>
References: <CAAcGz987=w1w+R27jNJSJHMPu3n+w0oyHeqKhF4wAU3VjvgQuw@mail.gmail.com>
Message-ID: <6fd873f1-2954-4ec3-bc45-6ae8ffa74125@spatialys.com>

Michael,

you won't find much support for that in GDAL itself. You'd better have a 
look at Spatialite topology, PostGIS topology or GRASS topology. The 
process is basically: import your geometries as a topology,? do 
reprojection or other work in the topology domain, and go back to the 
geometry domain.

QGIS has a plugin to work with PostGIS topology: 
https://plugins.qgis.org/plugins/pgtopoeditor/

(I was involved in discussions yeaaars ago about having GDAL offering a 
generic API and translation between all those topology formats but that 
never materialized)

Even

Le 09/10/2023 ? 21:55, Michael Sumner via gdal-dev a ?crit?:
> Are there any formats that record "coverage" topology? What I'm 
> worried about is when shapes are encoded as blob geometry with 
> initially identical ?coordinates at shared vertices, is there any 
> process that can validate or record that particular coords should have 
> the same values even after reprojection or decomposition/rebuild?
>
> I know how to do this in custom ways, I'm hoping to find some 
> off-the-shelf process to at least refer to (I'm a bit pressed for time 
> so I'm asking without doing the extra homework that's needed).? I 
> would build an indexer of the unique coordinates and how they relate 
> to the blob geometries before and after and do checks there, but I 
> don't know of an existing process that guarantees this.
>
> I understand that precision-setting is used to prevent numeric loss, 
> but is there any formalization about that loss? (i.e. ?different 
> instances of a vertex really do stay unique). I guess the result is 
> going to be pretty good if you choose the precision appropriately and 
> modifications aren't extreme?
>
> Thanks for consideration!
>
> Cheers, Mike
>
>
>
>
>
>
> --
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From jukka.rahkonen at maanmittauslaitos.fi  Tue Oct 10 00:20:07 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 10 Oct 2023 07:20:07 +0000
Subject: [gdal-dev] OAPIF: how does the driver utilize schema?
Message-ID: <AM0PR09MB32198D8CA8F92C680A1A196FFDCDA@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

The documentation in https://gdal.org/drivers/vector/oapif.html#layer-schema is wrong when it claims this:
OGR needs a fixed schema per layer, but OGC API - Features Core doesn't impose fixed schema. So the driver will retrieve the first page of features (10 features) and establish a schema from this.

I can see from the debug info and from the source code that if GDAL finds a relation of type "describedBy" for a collection then it reads and interprets the schema from the link. However, I am not sure if  GDAL in this case trusts the schema and skips scanning of the first ten features for harvesting the attributes.

BTW, the name of the relation type has been changed into "describedby" due to https://github.com/opengeospatial/ogcapi-features/issues/338. It is better to support both describedBy and describedby.

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231010/df0ff678/attachment.htm>

From neteler at osgeo.org  Tue Oct 10 00:39:47 2023
From: neteler at osgeo.org (Markus Neteler)
Date: Tue, 10 Oct 2023 09:39:47 +0200
Subject: [gdal-dev] format for topology?
In-Reply-To: <6fd873f1-2954-4ec3-bc45-6ae8ffa74125@spatialys.com>
References: <CAAcGz987=w1w+R27jNJSJHMPu3n+w0oyHeqKhF4wAU3VjvgQuw@mail.gmail.com>
 <6fd873f1-2954-4ec3-bc45-6ae8ffa74125@spatialys.com>
Message-ID: <CALFmHhvnrSKx4z5TxoUt7fO52YApT2cxeycZxa=9NMuLxPdp_g@mail.gmail.com>

On Mon, Oct 9, 2023 at 10:05?PM Even Rouault via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
>
> Michael,
>
> you won't find much support for that in GDAL itself. You'd better have a
> look at Spatialite topology, PostGIS topology or GRASS topology.

Concerning the latter, here some overview Wiki pages:
- https://grasswiki.osgeo.org/wiki/Vector_topology
- https://grasswiki.osgeo.org/wiki/Vector_Database_Management
- https://grass.osgeo.org/programming8/vectorlib.html

> The process is basically: import your geometries as a topology,  do
> reprojection or other work in the topology domain, and go back to the
> geometry domain.
>
> QGIS has a plugin to work with PostGIS topology:
> https://plugins.qgis.org/plugins/pgtopoeditor/
>
> (I was involved in discussions yeaaars ago about having GDAL offering a
> generic API and translation between all those topology formats but that
> never materialized)
>
> Even

Markus

From even.rouault at spatialys.com  Tue Oct 10 02:17:55 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Oct 2023 11:17:55 +0200
Subject: [gdal-dev] OAPIF: how does the driver utilize schema?
In-Reply-To: <AM0PR09MB32198D8CA8F92C680A1A196FFDCDA@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <AM0PR09MB32198D8CA8F92C680A1A196FFDCDA@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <390c4067-09d6-4832-b77d-92629c13cdfc@spatialys.com>

Hi Jukka,
>
> The documentation in 
> https://gdal.org/drivers/vector/oapif.html#layer-schema is wrong when 
> it claims this:
>
> OGR needs a fixed schema per layer, but OGC API - Features Core 
> doesn't impose fixed schema. So the driver will retrieve the first 
> page of features (10 features) and establish a schema from this.
>
> I can see from the debug info and from the source code that if GDAL 
> finds a relation of type ?describedBy? for a collection then it reads 
> and interprets the schema from the link. However, I am not sure if 
> ?GDAL in this case trusts the schema and skips scanning of the first 
> ten features for harvesting the attributes.
>
It doesn't fully trust the schema provided by describedBy and still 
scans the first page of feature to complement it. Doc adjusted
>
> BTW, the name of the relation type has been changed into ?describedby? 
> due to https://github.com/opengeospatial/ogcapi-features/issues/338. 
> It is better to support both describedBy and describedby.
>
Thanks. Fixed too (GDAL made case insensitive comparisons)

Even

> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231010/aade33e1/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Oct 10 11:08:03 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Oct 2023 20:08:03 +0200
Subject: [gdal-dev] Performance regression testing/benchmarking for CI
Message-ID: <0187ec42-3c46-4932-bc5d-9db38ee6f76e@spatialys.com>

Hi,

I'm experimenting with adding performance regression testing in our CI. 
Currently our CI has quite extensive functional coverage, but totally 
lacks performance testing. Given that we use pytest, I've spotted 
pytest-benchmark (https://pytest-benchmark.readthedocs.io/en/latest/) as 
a likely good candidate framework.

I've prototyped things in https://github.com/OSGeo/gdal/pull/8538

Basically, we now have a autotest/benchmark directory where performance 
tests can be written.

Then in the CI, we checkout a reference commit, build it and run the 
performance test suite in --benchmark-save mode

And then we run the performance test suite on the PR in 
--benchmark-compare mode with a --benchmark-compare-fail="mean:5%" 
criterion (which means that a test fails if its mean runtime is 5% 
slower than the reference one)

 From what I can see, pytest-benchmark behaves correctly if tests are 
removed or added (that is not failing, just skipping them during 
comparison). The only thing one should not do is modify an existing test 
w.r.t the reference branch.

Does someone has practical experience of pytest-benchmark, in particular 
in CI setups? With virtualization, it is hard to guarantee that other 
things happening on the host running the VM might not interfer. Even 
locally on my own machine, I initially saw strong variations in timings, 
which can be reduced to acceptable deviation by disabling Intel 
Turboboost feature (echo 1 | sudo tee 
/sys/devices/system/cpu/intel_pstate/no_turbo)

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From daniel.fred.evans at gmail.com  Tue Oct 10 12:08:31 2023
From: daniel.fred.evans at gmail.com (Daniel Evans)
Date: Tue, 10 Oct 2023 20:08:31 +0100
Subject: [gdal-dev] Performance regression testing/benchmarking for CI
In-Reply-To: <0187ec42-3c46-4932-bc5d-9db38ee6f76e@spatialys.com>
References: <0187ec42-3c46-4932-bc5d-9db38ee6f76e@spatialys.com>
Message-ID: <CANnaQaY5jSsoJmbXtGzTrQWmB4PFao9w3KseE6p+SbPKaV-y9A@mail.gmail.com>

Hi Even,

> With virtualization, it is hard to guarantee that other things happening
on the host running the VM might not interfer. Even locally on my own
machine, I initially saw strong variations in timings

The advice I've come across for benchmarking is to use the minimum time
from the set of runs as the comparison statistic, rather than the mean,
maximum, etc. The minimum is the most robust estimate of the "real" runtime
- every run is slowed by some amount due to external load on the system,
and the minimum time is the benchmark run with the least external load
(assuming you're not having issues with test burn-in).

It's been a while since I used pytest-benchmark, but I think I remember
needing to make sure that benchmark times from one machine/hardware type/OS
weren't trying to be compared to another. Similarly, this means that a
developer can't make a change and then compare their locally measured
runtime to a previously recorded CI runtime - the two simply aren't
comparable. Perhaps not a surprise to you, but I highlight it in case PRs
with incorrect claims of speedups start appearing.

Cheers,
Daniel

On Tue, 10 Oct 2023 at 19:09, Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> I'm experimenting with adding performance regression testing in our CI.
> Currently our CI has quite extensive functional coverage, but totally
> lacks performance testing. Given that we use pytest, I've spotted
> pytest-benchmark (https://pytest-benchmark.readthedocs.io/en/latest/) as
> a likely good candidate framework.
>
> I've prototyped things in https://github.com/OSGeo/gdal/pull/8538
>
> Basically, we now have a autotest/benchmark directory where performance
> tests can be written.
>
> Then in the CI, we checkout a reference commit, build it and run the
> performance test suite in --benchmark-save mode
>
> And then we run the performance test suite on the PR in
> --benchmark-compare mode with a --benchmark-compare-fail="mean:5%"
> criterion (which means that a test fails if its mean runtime is 5%
> slower than the reference one)
>
>  From what I can see, pytest-benchmark behaves correctly if tests are
> removed or added (that is not failing, just skipping them during
> comparison). The only thing one should not do is modify an existing test
> w.r.t the reference branch.
>
> Does someone has practical experience of pytest-benchmark, in particular
> in CI setups? With virtualization, it is hard to guarantee that other
> things happening on the host running the VM might not interfer. Even
> locally on my own machine, I initially saw strong variations in timings,
> which can be reduced to acceptable deviation by disabling Intel
> Turboboost feature (echo 1 | sudo tee
> /sys/devices/system/cpu/intel_pstate/no_turbo)
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231010/7f3c65e2/attachment.htm>

From Luke.A.Catania at erdc.dren.mil  Tue Oct 10 22:26:06 2023
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Wed, 11 Oct 2023 05:26:06 +0000
Subject: [gdal-dev] help needed with pygdaltools library,
 documentation sparse
Message-ID: <17ee69e5b50a4b7687fa2d1d53073842@erdc.dren.mil>

I am running simple code to convert dxf to gpkg and I get the error below.  -am an trying to figure out how to add a bunch of options ( -f GPKG -append -update --config DXF_ENCODING CP1252 --config DXF_INCLUDE_RAW_CODE_VALUES TRUE --config DXF_TRANSLATE_ESCAPE_SEQUENCES FALSE --config DXF_MERGE_BLOCK_GEOMETRIES FALSE --config DXF_INLINE_BLOCKS TRUE -nlt LINESTRING -nln 32111_F)

But can't even figure out how to add the recommended skipfailures flag.  I tried adding

gdal_tools.config_options("-skipfailures")

but I get pylint tells me it is not callable.

Anyone use pygdaltools?  There is some documentation, but nothing showing you how to set these command line parameters.


import gdaltools

gdal_tools = gdaltools.ogr2ogr()
gdal_tools.BASEPATH = r"C:\Program Files\QGIS 3.16.16\bin"

gdal_tools.set_encoding("UTF-8")
gdal_tools.set_input(self.dxf_out_path)
gdal_tools.set_output(self.gpkg_out)
gdal_tools.execute()

And I get the ERROR:root:b"Warning 1: Layer creation options ignored since an existing layer is\r\n         being appended to.\r\nWarning 6: Normalized/laundered field name: 'EntityHandle' to 'EntityHa_2'\r\nERROR 1: Attempt to write non-linestring (GEOMETRYCOLLECTION) geometry to ARC type shapefile.\r\nERROR 1: Unable to write feature 0 from layer entities.\r\nERROR 1: Terminating translation prematurely after failed\r\ntranslation of layer entities (use -skipfailures to skip errors)\r\n"
Traceback (most recent call last):
  File "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\plugins\site_selection\tools\master_planning\load_mp_designs.py", line 227, in <module>
    main()
  File "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\plugins\site_selection\tools\master_planning\load_mp_designs.py", line 196, in main
    mp_designs.gdal_convert()
  File "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\plugins\site_selection\tools\master_planning\load_mp_designs.py", line 185, in gdal_convert
    gdal_tools.execute()
  File "C:\Users\RDTECLAC\AppData\Roaming\Python\Python39\site-packages\gdaltools\ogr2ogrcmd.py", line 330, in execute
    return self._do_execute(args)
  File "C:\Users\RDTECLAC\AppData\Roaming\Python\Python39\site-packages\gdaltools\basetypes.py", line 108, in _do_execute
    raise GdalToolsError(rc, err)
gdaltools.basetypes.GdalToolsError: (1, b"Warning 1: Layer creation options ignored since an existing layer is\r\n         being appended to.\r\nWarning 6: Normalized/laundered field name: 'EntityHandle' to 'EntityHa_2'\r\nERROR 1: Attempt to write non-linestring (GEOMETRYCOLLECTION) geometry to ARC type shapefile.\r\nERROR 1: Unable to write feature 0 from layer entities.\r\nERROR 1: Terminating translation prematurely after failed\r\ntranslation of layer entities (use -skipfailures to skip errors)\r\n")error:



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231011/5fbe8ea7/attachment.htm>

From public at postholer.com  Tue Oct 10 22:45:16 2023
From: public at postholer.com (Scott)
Date: Tue, 10 Oct 2023 22:45:16 -0700
Subject: [gdal-dev] help needed with pygdaltools library,
 documentation sparse
In-Reply-To: <17ee69e5b50a4b7687fa2d1d53073842@erdc.dren.mil>
References: <17ee69e5b50a4b7687fa2d1d53073842@erdc.dren.mil>
Message-ID: <a40780ee-453d-72c2-b56b-33bd7e29c1e1@postholer.com>

-nln is being ignored because the data layer you're -updating -appending 
to exists. You can't rename a layer if it has a name. Remove -nln option

Next you are trying to write a collection as a linestring. Use 
-explodecollections (if exists in your install) and/or use -nlt 
PROMOTE_TO_MULTI

Try not to use -skipfailures

On 10/10/23 22:26, Catania, Luke A ERDC-RDE-GRL-VA CIV via gdal-dev wrote:
> I am running simple code to convert dxf to gpkg and I get the error 
> below.? -am an trying to figure out how to add a bunch of options ( -f 
> GPKG -append -update --config DXF_ENCODING CP1252 --config 
> DXF_INCLUDE_RAW_CODE_VALUES TRUE --config DXF_TRANSLATE_ESCAPE_SEQUENCES 
> FALSE --config DXF_MERGE_BLOCK_GEOMETRIES FALSE --config 
> DXF_INLINE_BLOCKS TRUE -nlt LINESTRING -nln 32111_F)
> 
> But can?t even figure out how to add the recommended skipfailures flag.  
> I tried adding
> 
> gdal_tools.config_options("-skipfailures")
> 
> but I get pylint tells me it is not callable.
> 
> Anyone use pygdaltools?? There is some documentation, but nothing 
> showing you how to set these command line parameters.
> 
> import gdaltools
> 
> gdal_tools = gdaltools.ogr2ogr()
> 
> gdal_tools.BASEPATH = r"C:\Program Files\QGIS 3.16.16\bin"
> 
> gdal_tools.set_encoding("UTF-8")
> 
> gdal_tools.set_input(self.dxf_out_path)
> 
> gdal_tools.set_output(self.gpkg_out)
> 
> gdal_tools.execute()
> 
> And I get the ERROR:root:b"Warning 1: Layer creation options ignored 
> since an existing layer is\r\n???????? being appended to.\r\nWarning 6: 
> Normalized/laundered field name: 'EntityHandle' to 'EntityHa_2'\r\nERROR 
> 1: Attempt to write non-linestring (GEOMETRYCOLLECTION) geometry to ARC 
> type shapefile.\r\nERROR 1: Unable to write feature 0 from layer 
> entities.\r\nERROR 1: Terminating translation prematurely after 
> failed\r\ntranslation of layer entities (use -skipfailures to skip 
> errors)\r\n"
> 
> Traceback (most recent call last):
> 
>  ? File 
> "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\plugins\site_selection\tools\master_planning\load_mp_designs.py", line 227, in <module>
> 
>  ??? main()
> 
>  ? File 
> "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\plugins\site_selection\tools\master_planning\load_mp_designs.py", line 196, in main
> 
>  ??? mp_designs.gdal_convert()
> 
>  ? File 
> "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\plugins\site_selection\tools\master_planning\load_mp_designs.py", line 185, in gdal_convert
> 
>  ??? gdal_tools.execute()
> 
>  ? File 
> "C:\Users\RDTECLAC\AppData\Roaming\Python\Python39\site-packages\gdaltools\ogr2ogrcmd.py", line 330, in execute
> 
>  ??? return self._do_execute(args)
> 
>  ? File 
> "C:\Users\RDTECLAC\AppData\Roaming\Python\Python39\site-packages\gdaltools\basetypes.py", line 108, in _do_execute
> 
>  ??? raise GdalToolsError(rc, err)
> 
> gdaltools.basetypes.GdalToolsError: (1, b"Warning 1: Layer creation 
> options ignored since an existing layer is\r\n???????? being appended 
> to.\r\nWarning 6: Normalized/laundered field name: 'EntityHandle' to 
> 'EntityHa_2'\r\nERROR 1: Attempt to write non-linestring 
> (GEOMETRYCOLLECTION) geometry to ARC type shapefile.\r\nERROR 1: Unable 
> to write feature 0 from layer entities.\r\nERROR 1: Terminating 
> translation prematurely after failed\r\ntranslation of layer entities 
> (use -skipfailures to skip errors)\r\n")error:
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From lnicola at dend.ro  Tue Oct 10 22:53:10 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Wed, 11 Oct 2023 08:53:10 +0300
Subject: [gdal-dev] Performance regression testing/benchmarking for CI
In-Reply-To: <0187ec42-3c46-4932-bc5d-9db38ee6f76e@spatialys.com>
References: <0187ec42-3c46-4932-bc5d-9db38ee6f76e@spatialys.com>
Message-ID: <6dc49e7e-8a09-47db-b83b-8862f534e25e@betaapp.fastmail.com>

Hi,

No experience with pytest-benchmark, but I maintain an unrelated project that runs some benchmarks on CI, and here are some things worth mentioning:

 - we store the results as a newline-delimited JSON file in a different GitHub repository (https://raw.githubusercontent.com/rust-analyzer/metrics/master/metrics.json, warning, it's a 5.5 MB unformatted JSON)
 - we have an in-browser dashboard that retrieves the whole file and displays them: https://rust-analyzer.github.io/metrics/
 - we do track build time and overall run time, but we're more interested in correctness
 - the display is a bit of a mess (partly due to trying to keep the setup as simple as possible), but you can look for the "total time", "total memory" and "build" to get an idea
 - we store the runner CPU type and memory in that JSON; they're almost all Intel, but they do upgrade from time to time
 - we even have two AMD EPYC runs, note that boost is disabled in a different way there (we don't try to disable it, though)
 - we also try to measure the CPU instruction count (the perf counter), but it doesn't work on GitHub and probably in most VMs
 - the runners have been very reliable, but not really consistent in performance
 - a bigger problem for us was that somebody actually needs to look at the dashboard to spot any regressions and investigate them (some are caused by external changes)
 - in 3-5 years we'll probably have to trim down the JSON or switch to a different storage

Laurentiu

On Tue, Oct 10, 2023, at 21:08, Even Rouault via gdal-dev wrote:
> Hi,
>
> I'm experimenting with adding performance regression testing in our CI. 
> Currently our CI has quite extensive functional coverage, but totally 
> lacks performance testing. Given that we use pytest, I've spotted 
> pytest-benchmark (https://pytest-benchmark.readthedocs.io/en/latest/) as 
> a likely good candidate framework.
>
> I've prototyped things in https://github.com/OSGeo/gdal/pull/8538
>
> Basically, we now have a autotest/benchmark directory where performance 
> tests can be written.
>
> Then in the CI, we checkout a reference commit, build it and run the 
> performance test suite in --benchmark-save mode
>
> And then we run the performance test suite on the PR in 
> --benchmark-compare mode with a --benchmark-compare-fail="mean:5%" 
> criterion (which means that a test fails if its mean runtime is 5% 
> slower than the reference one)
>
>  From what I can see, pytest-benchmark behaves correctly if tests are 
> removed or added (that is not failing, just skipping them during 
> comparison). The only thing one should not do is modify an existing test 
> w.r.t the reference branch.
>
> Does someone has practical experience of pytest-benchmark, in particular 
> in CI setups? With virtualization, it is hard to guarantee that other 
> things happening on the host running the VM might not interfer. Even 
> locally on my own machine, I initially saw strong variations in timings, 
> which can be reduced to acceptable deviation by disabling Intel 
> Turboboost feature (echo 1 | sudo tee 
> /sys/devices/system/cpu/intel_pstate/no_turbo)
>
> Even
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From Luke.A.Catania at erdc.dren.mil  Tue Oct 10 22:59:03 2023
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Wed, 11 Oct 2023 05:59:03 +0000
Subject: [gdal-dev] help needed with pygdaltools library,
 documentation sparse
In-Reply-To: <a40780ee-453d-72c2-b56b-33bd7e29c1e1@postholer.com>
References: <17ee69e5b50a4b7687fa2d1d53073842@erdc.dren.mil>
 <a40780ee-453d-72c2-b56b-33bd7e29c1e1@postholer.com>
Message-ID: <6f853a486d544e2f9cd1e161f2b4d510@erdc.dren.mil>

I have not even gotten to see that anything is being ignored because I have not yet added any options.  My first attempt was with adding skipfailures, but I can?t add any of the options I have listed because I have no idea how to.  I thought it would be gdal_tools.config_options() but I get pylint tells me it is not callable

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Scott via gdal-dev
Sent: Wednesday, October 11, 2023 1:45 AM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] help needed with pygdaltools library, documentation sparse

-nln is being ignored because the data layer you're -updating -appending to exists. You can't rename a layer if it has a name. Remove -nln option

Next you are trying to write a collection as a linestring. Use -explodecollections (if exists in your install) and/or use -nlt PROMOTE_TO_MULTI

Try not to use -skipfailures

On 10/10/23 22:26, Catania, Luke A ERDC-RDE-GRL-VA CIV via gdal-dev wrote:
> I am running simple code to convert dxf to gpkg and I get the error 
> below.? -am an trying to figure out how to add a bunch of options ( -f 
> GPKG -append -update --config DXF_ENCODING CP1252 --config 
> DXF_INCLUDE_RAW_CODE_VALUES TRUE --config 
> DXF_TRANSLATE_ESCAPE_SEQUENCES FALSE --config 
> DXF_MERGE_BLOCK_GEOMETRIES FALSE --config DXF_INLINE_BLOCKS TRUE -nlt 
> LINESTRING -nln 32111_F)
> 
> But can?t even figure out how to add the recommended skipfailures flag.  
> I tried adding
> 
> gdal_tools.config_options("-skipfailures")
> 
> but I get pylint tells me it is not callable.
> 
> Anyone use pygdaltools?? There is some documentation, but nothing 
> showing you how to set these command line parameters.
> 
> import gdaltools
> 
> gdal_tools = gdaltools.ogr2ogr()
> 
> gdal_tools.BASEPATH = r"C:\Program Files\QGIS 3.16.16\bin"
> 
> gdal_tools.set_encoding("UTF-8")
> 
> gdal_tools.set_input(self.dxf_out_path)
> 
> gdal_tools.set_output(self.gpkg_out)
> 
> gdal_tools.execute()
> 
> And I get the ERROR:root:b"Warning 1: Layer creation options ignored 
> since an existing layer is\r\n???????? being appended to.\r\nWarning 6:
> Normalized/laundered field name: 'EntityHandle' to 
> 'EntityHa_2'\r\nERROR
> 1: Attempt to write non-linestring (GEOMETRYCOLLECTION) geometry to 
> ARC type shapefile.\r\nERROR 1: Unable to write feature 0 from layer 
> entities.\r\nERROR 1: Terminating translation prematurely after 
> failed\r\ntranslation of layer entities (use -skipfailures to skip 
> errors)\r\n"
> 
> Traceback (most recent call last):
> 
>  ? File
> "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\
> plugins\site_selection\tools\master_planning\load_mp_designs.py", line 
> 227, in <module>
> 
>  ??? main()
> 
>  ? File
> "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\
> plugins\site_selection\tools\master_planning\load_mp_designs.py", line 
> 196, in main
> 
>  ??? mp_designs.gdal_convert()
> 
>  ? File
> "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\
> plugins\site_selection\tools\master_planning\load_mp_designs.py", line 
> 185, in gdal_convert
> 
>  ??? gdal_tools.execute()
> 
>  ? File
> "C:\Users\RDTECLAC\AppData\Roaming\Python\Python39\site-packages\gdalt
> ools\ogr2ogrcmd.py", line 330, in execute
> 
>  ??? return self._do_execute(args)
> 
>  ? File
> "C:\Users\RDTECLAC\AppData\Roaming\Python\Python39\site-packages\gdalt
> ools\basetypes.py", line 108, in _do_execute
> 
>  ??? raise GdalToolsError(rc, err)
> 
> gdaltools.basetypes.GdalToolsError: (1, b"Warning 1: Layer creation 
> options ignored since an existing layer is\r\n???????? being appended 
> to.\r\nWarning 6: Normalized/laundered field name: 'EntityHandle' to 
> 'EntityHa_2'\r\nERROR 1: Attempt to write non-linestring
> (GEOMETRYCOLLECTION) geometry to ARC type shapefile.\r\nERROR 1: 
> Unable to write feature 0 from layer entities.\r\nERROR 1: Terminating 
> translation prematurely after failed\r\ntranslation of layer entities 
> (use -skipfailures to skip errors)\r\n")error:
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> Blockedhttps://lists.osgeo.org/mailman/listinfo/gdal-devBlocked
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
Blockedhttps://lists.osgeo.org/mailman/listinfo/gdal-devBlocked

From jukka.rahkonen at maanmittauslaitos.fi  Tue Oct 10 23:11:53 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 11 Oct 2023 06:11:53 +0000
Subject: [gdal-dev] help needed with pygdaltools library,
 documentation sparse
In-Reply-To: <6f853a486d544e2f9cd1e161f2b4d510@erdc.dren.mil>
References: <17ee69e5b50a4b7687fa2d1d53073842@erdc.dren.mil>
 <a40780ee-453d-72c2-b56b-33bd7e29c1e1@postholer.com>
 <6f853a486d544e2f9cd1e161f2b4d510@erdc.dren.mil>
Message-ID: <AM0PR09MB3219E75C8D9D980E8AC61E82FDCCA@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

The actual error seems to be that you try to write some geometry that is not a linestring into a GeoPackage table that has created with a constraint that makes it accept only linestrings. You do that by using "-nlt linestring".
You have two options. The fast one is to use "-nlt geometry" that makes GeoPackage table to accept all kind of geometries. The other option is to filter the source data by geometry type and select only linestrings. Here is an example about how to do that with the OGR SQL dialect https://gdal.org/user/ogr_sql_dialect.html#ogr-geometry.

Don't try to use "-nlt geometry" with shapefiles because that format does not support mixed geometrytypes.

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Catania, Luke A ERDC-RDE-GRL-VA CIV via gdal-dev
L?hetetty: keskiviikko 11. lokakuuta 2023 8.59
Vastaanottaja: Scott <public at postholer.com>; gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] help needed with pygdaltools library, documentation sparse

I have not even gotten to see that anything is being ignored because I have not yet added any options.  My first attempt was with adding skipfailures, but I can't add any of the options I have listed because I have no idea how to.  I thought it would be gdal_tools.config_options() but I get pylint tells me it is not callable

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Scott via gdal-dev
Sent: Wednesday, October 11, 2023 1:45 AM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] help needed with pygdaltools library, documentation sparse

-nln is being ignored because the data layer you're -updating -appending to exists. You can't rename a layer if it has a name. Remove -nln option

Next you are trying to write a collection as a linestring. Use -explodecollections (if exists in your install) and/or use -nlt PROMOTE_TO_MULTI

Try not to use -skipfailures

On 10/10/23 22:26, Catania, Luke A ERDC-RDE-GRL-VA CIV via gdal-dev wrote:
> I am running simple code to convert dxf to gpkg and I get the error
> below.  -am an trying to figure out how to add a bunch of options ( -f
> GPKG -append -update --config DXF_ENCODING CP1252 --config
> DXF_INCLUDE_RAW_CODE_VALUES TRUE --config
> DXF_TRANSLATE_ESCAPE_SEQUENCES FALSE --config
> DXF_MERGE_BLOCK_GEOMETRIES FALSE --config DXF_INLINE_BLOCKS TRUE -nlt
> LINESTRING -nln 32111_F)
>
> But can't even figure out how to add the recommended skipfailures flag.
> I tried adding
>
> gdal_tools.config_options("-skipfailures")
>
> but I get pylint tells me it is not callable.
>
> Anyone use pygdaltools?  There is some documentation, but nothing
> showing you how to set these command line parameters.
>
> import gdaltools
>
> gdal_tools = gdaltools.ogr2ogr()
>
> gdal_tools.BASEPATH = r"C:\Program Files\QGIS 3.16.16\bin"
>
> gdal_tools.set_encoding("UTF-8")
>
> gdal_tools.set_input(self.dxf_out_path)
>
> gdal_tools.set_output(self.gpkg_out)
>
> gdal_tools.execute()
>
> And I get the ERROR:root:b"Warning 1: Layer creation options ignored
> since an existing layer is\r\n         being appended to.\r\nWarning 6:
> Normalized/laundered field name: 'EntityHandle' to
> 'EntityHa_2'\r\nERROR
> 1: Attempt to write non-linestring (GEOMETRYCOLLECTION) geometry to
> ARC type shapefile.\r\nERROR 1: Unable to write feature 0 from layer
> entities.\r\nERROR 1: Terminating translation prematurely after
> failed\r\ntranslation of layer entities (use -skipfailures to skip
> errors)\r\n"
>
> Traceback (most recent call last):
>
>    File
> "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\
> plugins\site_selection\tools\master_planning\load_mp_designs.py", line
> 227, in <module>
>
>      main()
>
>    File
> "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\
> plugins\site_selection\tools\master_planning\load_mp_designs.py", line
> 196, in main
>
>      mp_designs.gdal_convert()
>
>    File
> "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\
> plugins\site_selection\tools\master_planning\load_mp_designs.py", line
> 185, in gdal_convert
>
>      gdal_tools.execute()
>
>    File
> "C:\Users\RDTECLAC\AppData\Roaming\Python\Python39\site-packages\gdalt
> ools\ogr2ogrcmd.py", line 330, in execute
>
>      return self._do_execute(args)
>
>    File
> "C:\Users\RDTECLAC\AppData\Roaming\Python\Python39\site-packages\gdalt
> ools\basetypes.py", line 108, in _do_execute
>
>      raise GdalToolsError(rc, err)
>
> gdaltools.basetypes.GdalToolsError: (1, b"Warning 1: Layer creation
> options ignored since an existing layer is\r\n         being appended
> to.\r\nWarning 6: Normalized/laundered field name: 'EntityHandle' to
> 'EntityHa_2'\r\nERROR 1: Attempt to write non-linestring
> (GEOMETRYCOLLECTION) geometry to ARC type shapefile.\r\nERROR 1:
> Unable to write feature 0 from layer entities.\r\nERROR 1: Terminating
> translation prematurely after failed\r\ntranslation of layer entities
> (use -skipfailures to skip errors)\r\n")error:
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> Blockedhttps://eur06.safelinks.protection.outlook.com/?url=https%3A%2F
> %2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-devBlocked&data=05%7C01
> %7Cjukka.rahkonen%40maanmittauslaitos.fi%7C476e640a44f14b283ee008dbca1
> f38eb%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638326007673488940%
> 7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik
> 1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=n2JmJTKxfldyTjy08p5bXOtMxMn
> Zw7iy2EwIYpfMnc4%3D&reserved=0
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
Blockedhttps://lists.osgeo.org/mailman/listinfo/gdal-devBlocked
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From jonathan-lists at lightpear.com  Wed Oct 11 06:18:00 2023
From: jonathan-lists at lightpear.com (Jonathan Moules)
Date: Wed, 11 Oct 2023 14:18:00 +0100
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <82b0b64a-3975-0213-28cf-fc408539ceb9@lightpear.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
 <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
 <f5526bda-f26d-aa40-744d-6510fb1d4e45@spatialys.com>
 <d9f8a02c-1fd4-3a0b-0721-5c76813ea7b0@lightpear.com>
 <6c5d0281-64f7-8b0f-4c8a-a18a2b9a8dec@spatialys.com>
 <c9f1ad26-1f1e-40f0-efdd-bcc03f266822@lightpear.com>
 <1f475f67-e7b3-06fc-009c-5d7774a1a059@lightpear.com>
 <AM0PR09MB3219AAF21ABA735D0E53B9B0FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <82b0b64a-3975-0213-28cf-fc408539ceb9@lightpear.com>
Message-ID: <91e700eb-b845-90fe-0716-4ae85cca58bf@lightpear.com>

Hi List,

So, after more investigation:

* Using Python Anaconda on either Mac or Linux for GDAL (3.7.1), 
`GetSpatialRef` triggers a RunTime Error for all shapefiles (but only 
shapefiles).

* This happens on Ubuntu (two machines), and a Mac, but only under PyCharm.

* Using the exact same `conda` environment as triggers the above: 
running it directly from the terminal works fine.

So there's something about the combination of conda and Pycharm that 
breaks this aspect of GDAL shapefile handling on *nix and Mac.

Any thoughts? Also, who do I actually report this bug to? Is it GDAL, 
Conda, Pycharm, something else?

Cheers,

Jonathan


On 2023-09-28 14:58, Jonathan Moules via gdal-dev wrote:
> Well, it seems that PROJ_DATA isn't set in their environment. But it's 
> not set in mine either (`print(os.environ['PROJ_DATA']`)! So no idea 
> why mine works just fine without it (Windows 11 thing?).
>
> Creating a PROJ_DATA env var didn't fix anything. Even adding it 
> explicitly in Python.
>
> Their log file does have this in at a WARNING level:
>
> `PROJ: proj_create_from_database: Open of 
> /home/user/anaconda3/envs/env1/share/proj failed`
>
> That path has: `drwxrwxr-x` permissions.
>
> To answer Even's earlier question:
>
> `ogrinfo /path/to/shape.shp` works fine on their system.
>
>
>
> On 2023-09-28 12:37, Rahkonen Jukka wrote:
>> Hi,
>>
>> Then they should add that environment if they do not know that they 
>> do not belong to "most users" 
>> https://proj.org/en/9.3/usage/environmentvars.html
>>
>> -Jukka Rahkonen-
>>
>> -----Alkuper?inen viesti-----
>> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta 
>> Jonathan Moules via gdal-dev
>> L?hetetty: torstai 28. syyskuuta 2023 14.10
>> Vastaanottaja: gdal-dev at lists.osgeo.org; Even Rouault 
>> <even.rouault at spatialys.com>
>> Aihe: Re: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
>>
>> Hi Even,
>>
>> The colleague doesn't have either a PROJ_LIB or a PROJ_DATA 
>> environment variable.
>>
>> I asked another colleague to try it; they're on Ubuntu 20.04, and it 
>> worked for them. I believe using the same setup instructions.
>>
>> Cheers,
>>
>> Jonathan
>>
>> On 2023-09-24 22:37, Jonathan Moules via gdal-dev wrote:
>>> Thanks Even. I don't have access to the machine either as the
>>> colleague is moving to another project. I'll have to see if it fails
>>> for another *nix user.
>>>
>>> On 2023-09-24 22:35, Even Rouault wrote:
>>>> Le 24/09/2023 ? 23:22, Jonathan Moules via gdal-dev a ?crit :
>>>>>> Also check if the environment isn't messed up regarding PROJ and
>>>>> the PROJ_LIB/PROJ_DATA environment variable
>>>>>
>>>>> Thanks Even; sorry, what does this line mean? I'm guessing you're
>>>>> referring to:
>>>>> https://proj.org/en/9.3/usage/environmentvars.html - what would a 
>>>>> "messed up" one look like?
>>>>>
>>>> Hard to say without access to the machine. Perhaps just try to
>>>> recreate a new Conda env from scratch
>>>>
>>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://list/
>>> s.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&data=05%7C01%7Cjukka.rahko
>>> nen%40maanmittauslaitos.fi%7C1f6517888cb34fa40aed08dbc01389dd%7Cc4f8a6
>>> 3255804a1c92371d5a571b71fa%7C0%7C0%7C638314962370381350%7CUnknown%7CTW
>>> FpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6
>>> Mn0%3D%7C3000%7C%7C%7C&sdata=3fVru6K6Ndpkv35FnAbMOlT%2BM96USO7wywqx550
>>> uRUs%3D&reserved=0
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From howard at hobu.co  Wed Oct 11 09:13:45 2023
From: howard at hobu.co (Howard Butler)
Date: Wed, 11 Oct 2023 11:13:45 -0500
Subject: [gdal-dev] Motion: Annual Contracts for Maintainers
Message-ID: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>

PSC,

I'm a little late but I would like to make the following motions in regards to GDAL maintainers:

* Authorize Alessandro Pasotti for up to 30 hrs/month with a rate increase of 10 euros/hr until 30 NOV 2024.
* Authorize Even Rouault for up to 90 hrs/month with a rate increase of 10 $/hr until 30 JUL 2024

Howard

From jukka.rahkonen at maanmittauslaitos.fi  Wed Oct 11 09:38:50 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 11 Oct 2023 16:38:50 +0000
Subject: [gdal-dev] Motion: Annual Contracts for Maintainers
In-Reply-To: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
References: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
Message-ID: <AM0PR09MB3219AC187A846B36174C1787FDCCA@AM0PR09MB3219.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Howard Butler via gdal-dev
L?hetetty: keskiviikko 11. lokakuuta 2023 19.14
Vastaanottaja: gdal dev <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Motion: Annual Contracts for Maintainers

PSC,

I'm a little late but I would like to make the following motions in regards to GDAL maintainers:

* Authorize Alessandro Pasotti for up to 30 hrs/month with a rate increase of 10 euros/hr until 30 NOV 2024.
* Authorize Even Rouault for up to 90 hrs/month with a rate increase of 10 $/hr until 30 JUL 2024

Howard
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Wed Oct 11 09:40:30 2023
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 11 Oct 2023 12:40:30 -0400
Subject: [gdal-dev] Motion: Annual Contracts for Maintainers
In-Reply-To: <AM0PR09MB3219AC187A846B36174C1787FDCCA@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
 <AM0PR09MB3219AC187A846B36174C1787FDCCA@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <CA+YzLBdCyiHMM1sc=meRHjpLnj8LtKub=UxmqxEs66_4GDcUBQ@mail.gmail.com>

+1 Frank

On Wed, Oct 11, 2023 at 12:39?PM Rahkonen Jukka via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> +1
>
> -Jukka Rahkonen-
>
> -----Alkuper?inen viesti-----
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Howard
> Butler via gdal-dev
> L?hetetty: keskiviikko 11. lokakuuta 2023 19.14
> Vastaanottaja: gdal dev <gdal-dev at lists.osgeo.org>
> Aihe: [gdal-dev] Motion: Annual Contracts for Maintainers
>
> PSC,
>
> I'm a little late but I would like to make the following motions in
> regards to GDAL maintainers:
>
> * Authorize Alessandro Pasotti for up to 30 hrs/month with a rate increase
> of 10 euros/hr until 30 NOV 2024.
> * Authorize Even Rouault for up to 90 hrs/month with a rate increase of 10
> $/hr until 30 JUL 2024
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | USA: +1 650-701-7823
<http://voice.google.com/calls?a=nc,%2B16507017823>
and watch the world go round - Rush    | CAN: +1 343-550-9984
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231011/90fb7e27/attachment.htm>

From dmorissette at mapgears.com  Wed Oct 11 10:04:11 2023
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 11 Oct 2023 13:04:11 -0400
Subject: [gdal-dev] Motion: Annual Contracts for Maintainers
In-Reply-To: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
References: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
Message-ID: <bb78a5f9-4940-a426-0235-aea2b03aa4ae@mapgears.com>

+1

Daniel



On 2023-10-11 12:13, Howard Butler via gdal-dev wrote:
> PSC,
> 
> I'm a little late but I would like to make the following motions in regards to GDAL maintainers:
> 
> * Authorize Alessandro Pasotti for up to 30 hrs/month with a rate increase of 10 euros/hr until 30 NOV 2024.
> * Authorize Even Rouault for up to 90 hrs/month with a rate increase of 10 $/hr until 30 JUL 2024
> 
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201


From schwehr at gmail.com  Wed Oct 11 10:12:12 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 11 Oct 2023 10:12:12 -0700
Subject: [gdal-dev] Motion: Annual Contracts for Maintainers
In-Reply-To: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
References: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
Message-ID: <CACmBxyvPLgNB+h4agOYaCRJ0zM8Vd1wf3ycwh0RJMLwPN4ZncA@mail.gmail.com>

+1 KurtS

On Wed, Oct 11, 2023 at 9:17?AM Howard Butler via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> PSC,
>
> I'm a little late but I would like to make the following motions in
> regards to GDAL maintainers:
>
> * Authorize Alessandro Pasotti for up to 30 hrs/month with a rate increase
> of 10 euros/hr until 30 NOV 2024.
> * Authorize Even Rouault for up to 90 hrs/month with a rate increase of 10
> $/hr until 30 JUL 2024
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231011/6c1cd033/attachment.htm>

From Luke.A.Catania at erdc.dren.mil  Wed Oct 11 10:51:33 2023
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Wed, 11 Oct 2023 17:51:33 +0000
Subject: [gdal-dev] help needed with pygdaltools library,
 documentation sparse
In-Reply-To: <fab19d4040844fc8ad8094a2f5621f03@erdc.dren.mil>
References: <17ee69e5b50a4b7687fa2d1d53073842@erdc.dren.mil>
 <a40780ee-453d-72c2-b56b-33bd7e29c1e1@postholer.com>
 <6f853a486d544e2f9cd1e161f2b4d510@erdc.dren.mil>
 <AM0PR09MB3219E75C8D9D980E8AC61E82FDCCA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <fab19d4040844fc8ad8094a2f5621f03@erdc.dren.mil>
Message-ID: <0a4e1aebfd514dd0b818ccafe56a9a4a@erdc.dren.mil>

I went with calling ogr2ogr through os.system, but another issue I have been having with the ogr2ogr is that my polygons are not converted to what I guess is considered in AutoCAD as hatches since that is the layer that is shown for those polygons when I open the DXF. I just get line features.  It basically creates a line feature out of the polygon, that is it  converts the triangle to a bisecting line.  I even specify the polygon in the command line options as opposed to linestring as well as tried just the geometry parameter you suggested and writing to a geopackage



DXF shown in DWG TrueView 2023
https://pasteboard.co/dit2y9zmJ5YT.png

DXF Converted by QGIS tool Import Layers from DWG/DXF
https://pasteboard.co/4XZwHus6NhAj.png


DXF Converted to Geopackage.
https://pasteboard.co/1wIMI9xRymkZ.png






-----Original Message-----
From: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>
Sent: Wednesday, October 11, 2023 2:12 AM
To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil<mailto:Luke.A.Catania at erdc.dren.mil>>; Scott <public at postholer.com<mailto:public at postholer.com>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] help needed with pygdaltools library, documentation sparse



Hi,



The actual error seems to be that you try to write some geometry that is not a linestring into a GeoPackage table that has created with a constraint that makes it accept only linestrings. You do that by using "-nlt linestring".

You have two options. The fast one is to use "-nlt geometry" that makes GeoPackage table to accept all kind of geometries. The other option is to filter the source data by geometry type and select only linestrings. Here is an example about how to do that with the OGR SQL dialect Blockedhttps://gdal.org/user/ogr_sql_dialect.html#ogr-geometryBlocked



Don't try to use "-nlt geometry" with shapefiles because that format does not support mixed geometrytypes.



-Jukka Rahkonen-



-----Alkuper?inen viesti-----

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Catania, Luke A ERDC-RDE-GRL-VA CIV via gdal-dev

L?hetetty: keskiviikko 11. lokakuuta 2023 8.59

Vastaanottaja: Scott <public at postholer.com<mailto:public at postholer.com>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

Aihe: Re: [gdal-dev] help needed with pygdaltools library, documentation sparse



I have not even gotten to see that anything is being ignored because I have not yet added any options.  My first attempt was with adding skipfailures, but I can't add any of the options I have listed because I have no idea how to.  I thought it would be gdal_tools.config_options() but I get pylint tells me it is not callable



-----Original Message-----

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> On Behalf Of Scott via gdal-dev

Sent: Wednesday, October 11, 2023 1:45 AM

To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

Subject: Re: [gdal-dev] help needed with pygdaltools library, documentation sparse



-nln is being ignored because the data layer you're -updating -appending to exists. You can't rename a layer if it has a name. Remove -nln option



Next you are trying to write a collection as a linestring. Use -explodecollections (if exists in your install) and/or use -nlt PROMOTE_TO_MULTI



Try not to use -skipfailures



On 10/10/23 22:26, Catania, Luke A ERDC-RDE-GRL-VA CIV via gdal-dev wrote:

> I am running simple code to convert dxf to gpkg and I get the error

> below.  -am an trying to figure out how to add a bunch of options ( -f

> GPKG -append -update --config DXF_ENCODING CP1252 --config

> DXF_INCLUDE_RAW_CODE_VALUES TRUE --config

> DXF_TRANSLATE_ESCAPE_SEQUENCES FALSE --config

> DXF_MERGE_BLOCK_GEOMETRIES FALSE --config DXF_INLINE_BLOCKS TRUE -nlt

> LINESTRING -nln 32111_F)

>

> But can't even figure out how to add the recommended skipfailures flag.

> I tried adding

>

> gdal_tools.config_options("-skipfailures")

>

> but I get pylint tells me it is not callable.

>

> Anyone use pygdaltools?  There is some documentation, but nothing

> showing you how to set these command line parameters.

>

> import gdaltools

>

> gdal_tools = gdaltools.ogr2ogr()

>

> gdal_tools.BASEPATH = r"C:\Program Files\QGIS 3.16.16\bin"

>

> gdal_tools.set_encoding("UTF-8")

>

> gdal_tools.set_input(self.dxf_out_path)

>

> gdal_tools.set_output(self.gpkg_out)

>

> gdal_tools.execute()

>

> And I get the ERROR:root:b"Warning 1: Layer creation options ignored

> since an existing layer is\r\n         being appended to.\r\nWarning 6:

> Normalized/laundered field name: 'EntityHandle' to

> 'EntityHa_2'\r\nERROR

> 1: Attempt to write non-linestring (GEOMETRYCOLLECTION) geometry to

> ARC type shapefile.\r\nERROR 1: Unable to write feature 0 from layer

> entities.\r\nERROR 1: Terminating translation prematurely after

> failed\r\ntranslation of layer entities (use -skipfailures to skip

> errors)\r\n"

>

> Traceback (most recent call last):

>

>    File

> "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\

> plugins\site_selection\tools\master_planning\load_mp_designs.py", line

> 227, in <module>

>

>      main()

>

>    File

> "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\

> plugins\site_selection\tools\master_planning\load_mp_designs.py", line

> 196, in main

>

>      mp_designs.gdal_convert()

>

>    File

> "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\

> plugins\site_selection\tools\master_planning\load_mp_designs.py", line

> 185, in gdal_convert

>

>      gdal_tools.execute()

>

>    File

> "C:\Users\RDTECLAC\AppData\Roaming\Python\Python39\site-packages\gdalt

> ools\ogr2ogrcmd.py", line 330, in execute

>

>      return self._do_execute(args)

>

>    File

> "C:\Users\RDTECLAC\AppData\Roaming\Python\Python39\site-packages\gdalt

> ools\basetypes.py", line 108, in _do_execute

>

>      raise GdalToolsError(rc, err)

>

> gdaltools.basetypes.GdalToolsError: (1, b"Warning 1: Layer creation

> options ignored since an existing layer is\r\n         being appended

> to.\r\nWarning 6: Normalized/laundered field name: 'EntityHandle' to

> 'EntityHa_2'\r\nERROR 1: Attempt to write non-linestring

> (GEOMETRYCOLLECTION) geometry to ARC type shapefile.\r\nERROR 1:

> Unable to write feature 0 from layer entities.\r\nERROR 1: Terminating

> translation prematurely after failed\r\ntranslation of layer entities

> (use -skipfailures to skip errors)\r\n")error:

>

>

> _______________________________________________

> gdal-dev mailing list

> gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

> Blockedhttps://eur06.safelinks.protection.outlook.com/?url=https%3A%2F

> %2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-devBlocked&data=05%7C01

> %7Cjukka.rahkonen%40maanmittauslaitos.fi%7C476e640a44f14b283ee008dbca1

> f38eb%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638326007673488940%

> 7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik

> 1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=n2JmJTKxfldyTjy08p5bXOtMxMn

> Zw7iy2EwIYpfMnc4%3D&reserved=0

_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

Blockedhttps://lists.osgeo.org/mailman/listinfo/gdal-devBlocked

_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

Blockedhttps://lists.osgeo.org/mailman/listinfo/gdal-devBlocked


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231011/3d5062b9/attachment-0001.htm>

From public at postholer.com  Wed Oct 11 11:06:47 2023
From: public at postholer.com (Scott)
Date: Wed, 11 Oct 2023 11:06:47 -0700
Subject: [gdal-dev] help needed with pygdaltools library,
 documentation sparse
In-Reply-To: <0a4e1aebfd514dd0b818ccafe56a9a4a@erdc.dren.mil>
References: <17ee69e5b50a4b7687fa2d1d53073842@erdc.dren.mil>
 <a40780ee-453d-72c2-b56b-33bd7e29c1e1@postholer.com>
 <6f853a486d544e2f9cd1e161f2b4d510@erdc.dren.mil>
 <AM0PR09MB3219E75C8D9D980E8AC61E82FDCCA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <fab19d4040844fc8ad8094a2f5621f03@erdc.dren.mil>
 <0a4e1aebfd514dd0b818ccafe56a9a4a@erdc.dren.mil>
Message-ID: <9240ec6d-8b0e-9f6c-fc4e-5e0f3e718aa3@postholer.com>

What version of ogr2ogr are you using?

Look at the .dxf driver page:
https://gdal.org/drivers/vector/dxf.html

HATCH: Line and arc boundaries are collected as a polygon geometry, but 
no effort is currently made to represent the fill style of HATCH 
entities. Behavior is affected by the following configuration option:

     DXF_HATCH_TOLERANCE=value: Determines the tolerance used when 
looking for the next component to add to the hatch boundary.

(GDAL <= 2.2.x) Only line and polyline boundary paths are translated 
correctly.




On 10/11/23 10:51, Catania, Luke A ERDC-RDE-GRL-VA CIV wrote:
> I went with calling ogr2ogr through os.system, but another issue I have 
> been having with the ogr2ogr is that my polygons are not converted to 
> what I guess is considered in AutoCAD as hatches since that is the layer 
> that is shown for those polygons when I open the DXF. I just get line 
> features.? It basically creates a line feature out of the polygon, that 
> is it ?converts the triangle to a bisecting line.? I even specify the 
> *polygon* in the command line options as opposed to *linestring* as well 
> as tried just the *geometry* parameter you suggested and writing to a 
> geopackage
> 
> DXF shown in DWG TrueView 2023
> 
> https://pasteboard.co/dit2y9zmJ5YT.png 
> <https://pasteboard.co/dit2y9zmJ5YT.png>
> 
> DXF Converted by QGIS tool Import Layers from DWG/DXF
> 
> https://pasteboard.co/4XZwHus6NhAj.png 
> <https://pasteboard.co/4XZwHus6NhAj.png>
> 
> DXF Converted to Geopackage.
> 
> https://pasteboard.co/1wIMI9xRymkZ.png 
> <https://pasteboard.co/1wIMI9xRymkZ.png>
> 
> -----Original Message-----
> From: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi 
> <mailto:jukka.rahkonen at maanmittauslaitos.fi>>
> Sent: Wednesday, October 11, 2023 2:12 AM
> To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil 
> <mailto:Luke.A.Catania at erdc.dren.mil>>; Scott <public at postholer.com 
> <mailto:public at postholer.com>>; gdal-dev at lists.osgeo.org 
> <mailto:gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] help needed with pygdaltools library, 
> documentation sparse
> 
> Hi,
> 
> The actual error seems to be that you try to write some geometry that is 
> not a linestring into a GeoPackage table that has created with a 
> constraint that makes it accept only linestrings. You do that by using 
> "-nlt linestring".
> 
> You have two options. The fast one is to use "-nlt geometry" that makes 
> GeoPackage table to accept all kind of geometries. The other option is 
> to filter the source data by geometry type and select only linestrings. 
> Here is an example about how to do that with the OGR SQL dialect 
> Blockedhttps://gdal.org/user/ogr_sql_dialect.html#ogr-geometryBlocked
> 
> Don't try to use "-nlt geometry" with shapefiles because that format 
> does not support mixed geometrytypes.
> 
> -Jukka Rahkonen-
> 
> -----Alkuper?inen viesti-----
> 
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org 
> <mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Catania, Luke A 
> ERDC-RDE-GRL-VA CIV via gdal-dev
> 
> L?hetetty: keskiviikko 11. lokakuuta 2023 8.59
> 
> Vastaanottaja: Scott <public at postholer.com 
> <mailto:public at postholer.com>>; gdal-dev at lists.osgeo.org 
> <mailto:gdal-dev at lists.osgeo.org>
> 
> Aihe: Re: [gdal-dev] help needed with pygdaltools library, documentation 
> sparse
> 
> I have not even gotten to see that anything is being ignored because I 
> have not yet added any options.? My first attempt was with adding 
> skipfailures, but I can't add any of the options I have listed because I 
> have no idea how to.? I thought it would be gdal_tools.config_options() 
> but I get pylint tells me it is not callable
> 
> -----Original Message-----
> 
> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org 
> <mailto:gdal-dev-bounces at lists.osgeo.org>> On Behalf Of Scott via gdal-dev
> 
> Sent: Wednesday, October 11, 2023 1:45 AM
> 
> To: gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> 
> Subject: Re: [gdal-dev] help needed with pygdaltools library, 
> documentation sparse
> 
> -nln is being ignored because the data layer you're -updating -appending 
> to exists. You can't rename a layer if it has a name. Remove -nln option
> 
> Next you are trying to write a collection as a linestring. Use 
> -explodecollections (if exists in your install) and/or use -nlt 
> PROMOTE_TO_MULTI
> 
> Try not to use -skipfailures
> 
> On 10/10/23 22:26, Catania, Luke A ERDC-RDE-GRL-VA CIV via gdal-dev wrote:
> 
>  > I am running simple code to convert dxf to gpkg and I get the error
> 
>  > below.? -am an trying to figure out how to add a bunch of options ( -f
> 
>  > GPKG -append -update --config DXF_ENCODING CP1252 --config
> 
>  > DXF_INCLUDE_RAW_CODE_VALUES TRUE --config
> 
>  > DXF_TRANSLATE_ESCAPE_SEQUENCES FALSE --config
> 
>  > DXF_MERGE_BLOCK_GEOMETRIES FALSE --config DXF_INLINE_BLOCKS TRUE -nlt
> 
>  > LINESTRING -nln 32111_F)
> 
>  >
> 
>  > But can't even figure out how to add the recommended skipfailures flag.
> 
>  > I tried adding
> 
>  >
> 
>  > gdal_tools.config_options("-skipfailures")
> 
>  >
> 
>  > but I get pylint tells me it is not callable.
> 
>  >
> 
>  > Anyone use pygdaltools?? There is some documentation, but nothing
> 
>  > showing you how to set these command line parameters.
> 
>  >
> 
>  > import gdaltools
> 
>  >
> 
>  > gdal_tools = gdaltools.ogr2ogr()
> 
>  >
> 
>  > gdal_tools.BASEPATH = r"C:\Program Files\QGIS 3.16.16\bin"
> 
>  >
> 
>  > gdal_tools.set_encoding("UTF-8")
> 
>  >
> 
>  > gdal_tools.set_input(self.dxf_out_path)
> 
>  >
> 
>  > gdal_tools.set_output(self.gpkg_out)
> 
>  >
> 
>  > gdal_tools.execute()
> 
>  >
> 
>  > And I get the ERROR:root:b"Warning 1: Layer creation options ignored
> 
>  > since an existing layer is\r\n???????? being appended to.\r\nWarning 6:
> 
>  > Normalized/laundered field name: 'EntityHandle' to
> 
>  > 'EntityHa_2'\r\nERROR
> 
>  > 1: Attempt to write non-linestring (GEOMETRYCOLLECTION) geometry to
> 
>  > ARC type shapefile.\r\nERROR 1: Unable to write feature 0 from layer
> 
>  > entities.\r\nERROR 1: Terminating translation prematurely after
> 
>  > failed\r\ntranslation of layer entities (use -skipfailures to skip
> 
>  > errors)\r\n"
> 
>  >
> 
>  > Traceback (most recent call last):
> 
>  >
> 
>  >??? File
> 
>  > "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\
> 
>  > plugins\site_selection\tools\master_planning\load_mp_designs.py", line
> 
>  > 227, in <module>
> 
>  >
> 
>  >????? main()
> 
>  >
> 
>  >??? File
> 
>  > "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\
> 
>  > plugins\site_selection\tools\master_planning\load_mp_designs.py", line
> 
>  > 196, in main
> 
>  >
> 
>  >????? mp_designs.gdal_convert()
> 
>  >
> 
>  >??? File
> 
>  > "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\
> 
>  > plugins\site_selection\tools\master_planning\load_mp_designs.py", line
> 
>  > 185, in gdal_convert
> 
>  >
> 
>  >????? gdal_tools.execute()
> 
>  >
> 
>  >??? File
> 
>  > "C:\Users\RDTECLAC\AppData\Roaming\Python\Python39\site-packages\gdalt
> 
>  > ools\ogr2ogrcmd.py", line 330, in execute
> 
>  >
> 
>  >????? return self._do_execute(args)
> 
>  >
> 
>  >??? File
> 
>  > "C:\Users\RDTECLAC\AppData\Roaming\Python\Python39\site-packages\gdalt
> 
>  > ools\basetypes.py", line 108, in _do_execute
> 
>  >
> 
>  >????? raise GdalToolsError(rc, err)
> 
>  >
> 
>  > gdaltools.basetypes.GdalToolsError: (1, b"Warning 1: Layer creation
> 
>  > options ignored since an existing layer is\r\n???????? being appended
> 
>  > to.\r\nWarning 6: Normalized/laundered field name: 'EntityHandle' to
> 
>  > 'EntityHa_2'\r\nERROR 1: Attempt to write non-linestring
> 
>  > (GEOMETRYCOLLECTION) geometry to ARC type shapefile.\r\nERROR 1:
> 
>  > Unable to write feature 0 from layer entities.\r\nERROR 1: Terminating
> 
>  > translation prematurely after failed\r\ntranslation of layer entities
> 
>  > (use -skipfailures to skip errors)\r\n")error:
> 
>  >
> 
>  >
> 
>  > _______________________________________________
> 
>  > gdal-dev mailing list
> 
>  > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> 
>  > Blockedhttps://eur06.safelinks.protection.outlook.com/?url=https%3A%2F
> 
>  > %2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-devBlocked&data=05%7C01
> 
>  > %7Cjukka.rahkonen%40maanmittauslaitos.fi%7C476e640a44f14b283ee008dbca1
> 
>  > f38eb%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638326007673488940%
> 
>  > 7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik
> 
>  > 1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=n2JmJTKxfldyTjy08p5bXOtMxMn
> 
>  > Zw7iy2EwIYpfMnc4%3D&reserved=0
> 
> _______________________________________________
> 
> gdal-dev mailing list
> 
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> 
> Blockedhttps://lists.osgeo.org/mailman/listinfo/gdal-devBlocked
> 
> _______________________________________________
> 
> gdal-dev mailing list
> 
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> 
> Blockedhttps://lists.osgeo.org/mailman/listinfo/gdal-devBlocked
> 

From norman.barker at gmail.com  Wed Oct 11 11:07:05 2023
From: norman.barker at gmail.com (Norman Barker)
Date: Wed, 11 Oct 2023 13:07:05 -0500
Subject: [gdal-dev] Motion: Annual Contracts for Maintainers
In-Reply-To: <CACmBxyvPLgNB+h4agOYaCRJ0zM8Vd1wf3ycwh0RJMLwPN4ZncA@mail.gmail.com>
References: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
 <CACmBxyvPLgNB+h4agOYaCRJ0zM8Vd1wf3ycwh0RJMLwPN4ZncA@mail.gmail.com>
Message-ID: <CAN_Dn-GubocSbWx0sX2qMvBVdPJr_EC=G+7Hiu3pDPo3d5HLcQ@mail.gmail.com>

+1 Norman

On Wed, Oct 11, 2023 at 12:13?PM Kurt Schwehr via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> +1 KurtS
>
> On Wed, Oct 11, 2023 at 9:17?AM Howard Butler via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>> PSC,
>>
>> I'm a little late but I would like to make the following motions in
>> regards to GDAL maintainers:
>>
>> * Authorize Alessandro Pasotti for up to 30 hrs/month with a rate
>> increase of 10 euros/hr until 30 NOV 2024.
>> * Authorize Even Rouault for up to 90 hrs/month with a rate increase of
>> 10 $/hr until 30 JUL 2024
>>
>> Howard
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231011/ec0c98c3/attachment.htm>

From Luke.A.Catania at erdc.dren.mil  Wed Oct 11 11:28:54 2023
From: Luke.A.Catania at erdc.dren.mil (Catania, Luke A ERDC-RDE-GRL-VA CIV)
Date: Wed, 11 Oct 2023 18:28:54 +0000
Subject: [gdal-dev] help needed with pygdaltools library,
 documentation sparse
In-Reply-To: <9240ec6d-8b0e-9f6c-fc4e-5e0f3e718aa3@postholer.com>
References: <17ee69e5b50a4b7687fa2d1d53073842@erdc.dren.mil>
 <a40780ee-453d-72c2-b56b-33bd7e29c1e1@postholer.com>
 <6f853a486d544e2f9cd1e161f2b4d510@erdc.dren.mil>
 <AM0PR09MB3219E75C8D9D980E8AC61E82FDCCA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <fab19d4040844fc8ad8094a2f5621f03@erdc.dren.mil>
 <0a4e1aebfd514dd0b818ccafe56a9a4a@erdc.dren.mil>
 <9240ec6d-8b0e-9f6c-fc4e-5e0f3e718aa3@postholer.com>
Message-ID: <4876227c44ba442a9292bba6fe696ab2@erdc.dren.mil>

I am running  GDAL 3.4.1, released 2021/12/27

I don?t need the fill style as I can fill that with code, just need the geometry.

I added it though not really sure what value to use. Based on the current options I used --config DXF_HATCH_TOLERANCE value vs --config DXF_HATCH_TOLERANCE=value as the latter gives me an error. My full options are:

"-f GPKG --config DXF_ENCODING CP1252 --config DXF_HATCH_TOLERANCE 5 --config DXF_INCLUDE_RAW_CODE_VALUES TRUE --config DXF_TRANSLATE_ESCAPE_SEQUENCES FALSE --config DXF_MERGE_BLOCK_GEOMETRIES FALSE --config DXF_INLINE_BLOCKS TRUE -nlt geometry"

I tried values of 1, 5, 10, 50 and do not get anything.  Maybe something else in my parameters are incorrect.  I was not really sure what to use for some of the parameters, but found this parameter string on another forum and it worked for most of my needs other than the issue with the hatches not converting properly and missing symbology for the geometry.

-----Original Message-----
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Scott via gdal-dev
Sent: Wednesday, October 11, 2023 2:07 PM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] help needed with pygdaltools library, documentation sparse

What version of ogr2ogr are you using?

Look at the .dxf driver page:
Blockedhttps://gdal.org/drivers/vector/dxf.htmlBlocked

HATCH: Line and arc boundaries are collected as a polygon geometry, but no effort is currently made to represent the fill style of HATCH entities. Behavior is affected by the following configuration option:

     DXF_HATCH_TOLERANCE=value: Determines the tolerance used when looking for the next component to add to the hatch boundary.

(GDAL <= 2.2.x) Only line and polyline boundary paths are translated correctly.




On 10/11/23 10:51, Catania, Luke A ERDC-RDE-GRL-VA CIV wrote:
> I went with calling ogr2ogr through os.system, but another issue I have 
> been having with the ogr2ogr is that my polygons are not converted to 
> what I guess is considered in AutoCAD as hatches since that is the layer 
> that is shown for those polygons when I open the DXF. I just get line 
> features.? It basically creates a line feature out of the polygon, that 
> is it ?converts the triangle to a bisecting line.? I even specify the 
> *polygon* in the command line options as opposed to *linestring* as well 
> as tried just the *geometry* parameter you suggested and writing to a 
> geopackage
> 
> DXF shown in DWG TrueView 2023
> 
> Blockedhttps://pasteboard.co/dit2y9zmJ5YT.pngBlocked 
> <Blockedhttps://pasteboard.co/dit2y9zmJ5YT.pngBlocked>
> 
> DXF Converted by QGIS tool Import Layers from DWG/DXF
> 
> Blockedhttps://pasteboard.co/4XZwHus6NhAj.pngBlocked 
> <Blockedhttps://pasteboard.co/4XZwHus6NhAj.pngBlocked>
> 
> DXF Converted to Geopackage.
> 
> Blockedhttps://pasteboard.co/1wIMI9xRymkZ.pngBlocked 
> <Blockedhttps://pasteboard.co/1wIMI9xRymkZ.pngBlocked>
> 
> -----Original Message-----
> From: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi 
> <mailto:jukka.rahkonen at maanmittauslaitos.fi>>
> Sent: Wednesday, October 11, 2023 2:12 AM
> To: Catania, Luke A ERDC-RDE-GRL-VA CIV <Luke.A.Catania at erdc.dren.mil 
> <mailto:Luke.A.Catania at erdc.dren.mil>>; Scott <public at postholer.com 
> <mailto:public at postholer.com>>; gdal-dev at lists.osgeo.org 
> <mailto:gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] help needed with pygdaltools library, 
> documentation sparse
> 
> Hi,
> 
> The actual error seems to be that you try to write some geometry that is 
> not a linestring into a GeoPackage table that has created with a 
> constraint that makes it accept only linestrings. You do that by using 
> "-nlt linestring".
> 
> You have two options. The fast one is to use "-nlt geometry" that makes 
> GeoPackage table to accept all kind of geometries. The other option is 
> to filter the source data by geometry type and select only linestrings. 
> Here is an example about how to do that with the OGR SQL dialect 
> Blockedhttps://gdal.org/user/ogr_sql_dialect.html#ogr-geometryBlocked
> 
> Don't try to use "-nlt geometry" with shapefiles because that format 
> does not support mixed geometrytypes.
> 
> -Jukka Rahkonen-
> 
> -----Alkuper?inen viesti-----
> 
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org 
> <mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Catania, Luke A 
> ERDC-RDE-GRL-VA CIV via gdal-dev
> 
> L?hetetty: keskiviikko 11. lokakuuta 2023 8.59
> 
> Vastaanottaja: Scott <public at postholer.com 
> <mailto:public at postholer.com>>; gdal-dev at lists.osgeo.org 
> <mailto:gdal-dev at lists.osgeo.org>
> 
> Aihe: Re: [gdal-dev] help needed with pygdaltools library, documentation 
> sparse
> 
> I have not even gotten to see that anything is being ignored because I 
> have not yet added any options.? My first attempt was with adding 
> skipfailures, but I can't add any of the options I have listed because I 
> have no idea how to.? I thought it would be gdal_tools.config_options() 
> but I get pylint tells me it is not callable
> 
> -----Original Message-----
> 
> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org 
> <mailto:gdal-dev-bounces at lists.osgeo.org>> On Behalf Of Scott via gdal-dev
> 
> Sent: Wednesday, October 11, 2023 1:45 AM
> 
> To: gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> 
> Subject: Re: [gdal-dev] help needed with pygdaltools library, 
> documentation sparse
> 
> -nln is being ignored because the data layer you're -updating -appending 
> to exists. You can't rename a layer if it has a name. Remove -nln option
> 
> Next you are trying to write a collection as a linestring. Use 
> -explodecollections (if exists in your install) and/or use -nlt 
> PROMOTE_TO_MULTI
> 
> Try not to use -skipfailures
> 
> On 10/10/23 22:26, Catania, Luke A ERDC-RDE-GRL-VA CIV via gdal-dev wrote:
> 
>  > I am running simple code to convert dxf to gpkg and I get the error
> 
>  > below.? -am an trying to figure out how to add a bunch of options ( -f
> 
>  > GPKG -append -update --config DXF_ENCODING CP1252 --config
> 
>  > DXF_INCLUDE_RAW_CODE_VALUES TRUE --config
> 
>  > DXF_TRANSLATE_ESCAPE_SEQUENCES FALSE --config
> 
>  > DXF_MERGE_BLOCK_GEOMETRIES FALSE --config DXF_INLINE_BLOCKS TRUE -nlt
> 
>  > LINESTRING -nln 32111_F)
> 
>  >
> 
>  > But can't even figure out how to add the recommended skipfailures flag.
> 
>  > I tried adding
> 
>  >
> 
>  > gdal_tools.config_options("-skipfailures")
> 
>  >
> 
>  > but I get pylint tells me it is not callable.
> 
>  >
> 
>  > Anyone use pygdaltools?? There is some documentation, but nothing
> 
>  > showing you how to set these command line parameters.
> 
>  >
> 
>  > import gdaltools
> 
>  >
> 
>  > gdal_tools = gdaltools.ogr2ogr()
> 
>  >
> 
>  > gdal_tools.BASEPATH = r"C:\Program Files\QGIS 3.16.16\bin"
> 
>  >
> 
>  > gdal_tools.set_encoding("UTF-8")
> 
>  >
> 
>  > gdal_tools.set_input(self.dxf_out_path)
> 
>  >
> 
>  > gdal_tools.set_output(self.gpkg_out)
> 
>  >
> 
>  > gdal_tools.execute()
> 
>  >
> 
>  > And I get the ERROR:root:b"Warning 1: Layer creation options ignored
> 
>  > since an existing layer is\r\n???????? being appended to.\r\nWarning 6:
> 
>  > Normalized/laundered field name: 'EntityHandle' to
> 
>  > 'EntityHa_2'\r\nERROR
> 
>  > 1: Attempt to write non-linestring (GEOMETRYCOLLECTION) geometry to
> 
>  > ARC type shapefile.\r\nERROR 1: Unable to write feature 0 from layer
> 
>  > entities.\r\nERROR 1: Terminating translation prematurely after
> 
>  > failed\r\ntranslation of layer entities (use -skipfailures to skip
> 
>  > errors)\r\n"
> 
>  >
> 
>  > Traceback (most recent call last):
> 
>  >
> 
>  >??? File
> 
>  > "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\
> 
>  > plugins\site_selection\tools\master_planning\load_mp_designs.py", line
> 
>  > 227, in <module>
> 
>  >
> 
>  >????? main()
> 
>  >
> 
>  >??? File
> 
>  > "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\
> 
>  > plugins\site_selection\tools\master_planning\load_mp_designs.py", line
> 
>  > 196, in main
> 
>  >
> 
>  >????? mp_designs.gdal_convert()
> 
>  >
> 
>  >??? File
> 
>  > "c:\Users\RDTECLAC\AppData\Roaming\QGIS\QGIS3\profiles\default\python\
> 
>  > plugins\site_selection\tools\master_planning\load_mp_designs.py", line
> 
>  > 185, in gdal_convert
> 
>  >
> 
>  >????? gdal_tools.execute()
> 
>  >
> 
>  >??? File
> 
>  > "C:\Users\RDTECLAC\AppData\Roaming\Python\Python39\site-packages\gdalt
> 
>  > ools\ogr2ogrcmd.py", line 330, in execute
> 
>  >
> 
>  >????? return self._do_execute(args)
> 
>  >
> 
>  >??? File
> 
>  > "C:\Users\RDTECLAC\AppData\Roaming\Python\Python39\site-packages\gdalt
> 
>  > ools\basetypes.py", line 108, in _do_execute
> 
>  >
> 
>  >????? raise GdalToolsError(rc, err)
> 
>  >
> 
>  > gdaltools.basetypes.GdalToolsError: (1, b"Warning 1: Layer creation
> 
>  > options ignored since an existing layer is\r\n???????? being appended
> 
>  > to.\r\nWarning 6: Normalized/laundered field name: 'EntityHandle' to
> 
>  > 'EntityHa_2'\r\nERROR 1: Attempt to write non-linestring
> 
>  > (GEOMETRYCOLLECTION) geometry to ARC type shapefile.\r\nERROR 1:
> 
>  > Unable to write feature 0 from layer entities.\r\nERROR 1: Terminating
> 
>  > translation prematurely after failed\r\ntranslation of layer entities
> 
>  > (use -skipfailures to skip errors)\r\n")error:
> 
>  >
> 
>  >
> 
>  > _______________________________________________
> 
>  > gdal-dev mailing list
> 
>  > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> 
>  > Blockedhttps://eur06.safelinks.protection.outlook.com/?url=https%3A%2F
> 
>  > %2Flists.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-devBlocked&data=05%7C01
> 
>  > %7Cjukka.rahkonen%40maanmittauslaitos.fi%7C476e640a44f14b283ee008dbca1
> 
>  > f38eb%7Cc4f8a63255804a1c92371d5a571b71fa%7C0%7C0%7C638326007673488940%
> 
>  > 7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik
> 
>  > 1haWwiLCJXVCI6Mn0%3D%7C3000%7C%7C%7C&sdata=n2JmJTKxfldyTjy08p5bXOtMxMn
> 
>  > Zw7iy2EwIYpfMnc4%3D&reserved=0
> 
> _______________________________________________
> 
> gdal-dev mailing list
> 
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> 
> Blockedhttps://lists.osgeo.org/mailman/listinfo/gdal-devBlocked
> 
> _______________________________________________
> 
> gdal-dev mailing list
> 
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> 
> Blockedhttps://lists.osgeo.org/mailman/listinfo/gdal-devBlocked
> 
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
Blockedhttps://lists.osgeo.org/mailman/listinfo/gdal-devBlocked

From sean.gillies at gmail.com  Wed Oct 11 11:56:51 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Wed, 11 Oct 2023 12:56:51 -0600
Subject: [gdal-dev] Motion: Annual Contracts for Maintainers
In-Reply-To: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
References: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
Message-ID: <CAOodmJrCGafNE4HGjospG0-7YBQBh7MHQL6MzVAhUJoO6E7_FQ@mail.gmail.com>

Hi Howard,

To be clear, this is a 50% time increase for Alessandro, yes? I think
that's great!

+1

On Wed, Oct 11, 2023 at 10:16?AM Howard Butler via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> PSC,
>
> I'm a little late but I would like to make the following motions in
> regards to GDAL maintainers:
>
> * Authorize Alessandro Pasotti for up to 30 hrs/month with a rate increase
> of 10 euros/hr until 30 NOV 2024.
> * Authorize Even Rouault for up to 90 hrs/month with a rate increase of 10
> $/hr until 30 JUL 2024
>
> Howard
>

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231011/21cec930/attachment.htm>

From howard at hobu.co  Wed Oct 11 12:09:33 2023
From: howard at hobu.co (Howard Butler)
Date: Wed, 11 Oct 2023 14:09:33 -0500
Subject: [gdal-dev] Motion: Annual Contracts for Maintainers
In-Reply-To: <CAOodmJrCGafNE4HGjospG0-7YBQBh7MHQL6MzVAhUJoO6E7_FQ@mail.gmail.com>
References: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
 <CAOodmJrCGafNE4HGjospG0-7YBQBh7MHQL6MzVAhUJoO6E7_FQ@mail.gmail.com>
Message-ID: <C82F5CFC-7E48-418A-B413-52E87A0F4A6A@hobu.co>

Yes. Well "up to", of course, but Alessandro is providing us some more capacity.

> On Oct 11, 2023, at 1:56?PM, Sean Gillies <sean.gillies at gmail.com> wrote:
> 
> Hi Howard,
> 
> To be clear, this is a 50% time increase for Alessandro, yes? I think that's great!
> 
> +1
> 
> On Wed, Oct 11, 2023 at 10:16?AM Howard Butler via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> PSC,
> 
> I'm a little late but I would like to make the following motions in regards to GDAL maintainers:
> 
> * Authorize Alessandro Pasotti for up to 30 hrs/month with a rate increase of 10 euros/hr until 30 NOV 2024.
> * Authorize Even Rouault for up to 90 hrs/month with a rate increase of 10 $/hr until 30 JUL 2024
> 
> Howard
> 
> -- 
> Sean Gillies


From sean.gillies at gmail.com  Wed Oct 11 12:14:47 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Wed, 11 Oct 2023 13:14:47 -0600
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
In-Reply-To: <F13D156D-F033-4625-B2F6-51F4A5548E69@hobu.co>
References: <F13D156D-F033-4625-B2F6-51F4A5548E69@hobu.co>
Message-ID: <CAOodmJqbQ+OnxjXgQM5ed-7GCEbyvdDnFvcAgiXMaPyD41cmqQ@mail.gmail.com>

Thank you, Howard for reminding sponsors how important their support is!

On Fri, Oct 6, 2023 at 9:14?AM Howard Butler via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Howard Butler, Even Rouault, Dan Baston, and Alessandro Pasotti held the
> monthly GDAL Maintainers Meeting on 09/28/2023. The following items were
> discussed and reported upon:
>
> Fundraising update
> ----------------------------
>
> Good news on fundraising: Amazon Web Services, who had previously
> announced they were not going to be able to renew their Gold level
> sponsorship for 2024, was able to reverse the decision and continue
> sponsoring GDAL at the same level for the next year.
>
> Also Maxar, who had previously announced they were not going to be able to
> renew their Gold level for 2024, was able to reverse the decision and
> continue sponsoring GDAL for the next year the Bronze level.
>
> Thanks again to the advocates within both of these organizations for
> continuing to push for resources despite being told 'no'. We still have a
> number of renewals to complete before we are done for the cycle this year.
>
> Maintenance activities update
> ------------------------------------------
>
> * Even attended the NumFOCUS Project Summit September 11-13th in
> Amsterdam. https://www.summit.numfocus.org/ where he gave a lightning
> talk about GDAL's extensive CI system
> http://download.osgeo.org/gdal/presentations/NumFocus%20Summit%202023%20Tour%20of%20tools%20used%20by%20GDAL%20CI%2C%20testing%20and%20documentation.pdf
> and discussed Arrow topics with Joris Van den Bossche and Martin
> Fleischmann of the GeoPandas project. He provided a full report to the GDAL
> PSC about his attendance.
>
> * Even coordinated and issued the GDAL 3.7.2 release. Detailed release
> notes about what it included can be found at
> https://github.com/OSGeo/gdal/blob/v3.7.2/NEWS.md
>
> *Even coordinated and issued the libtiff 4.6.0 release. Detailed release
> notes about what it included can be found at
> https://gitlab.com/libtiff/libtiff/-/releases/v4.6.0
>
> * Even spent significant time updating the PDF driver in response to QGIS
> performance scenarios that showed it needed attention. This included
> updating the backend to use Podofo 0.10.
>
> * Even wrote RFC 95 to align GDAL's integer types with typical stdint
> approaches. https://github.com/OSGeo/gdal/pull/8399 It was decided to
> table implementation until GDAL has its next major (4.0) release. The next
> release, 3.8.0 due this fall, is not intended to be that major release.
>
> * Maintainers had a short discussion about adding something like an
> GDALOpenJSON method to allow applications to provide a single JSON data
> structure for layer and data source options, along with VSI protocol hints
> and (maybe) environment variables. Discussion about such an idea should
> continue in open forums such as the mailing list.
>
> * Alessandro worked on the subdataset API and thought about approaches to
> provide the entire set of option possibilities (paths, open options,
> dataset options, etc), which prompted the GDALOpenJSON discussion above.
>
> * Dan continued working through making all of the GDAL test suite tests
> run independently. That important milestone is almost complete.
>
> * Dan exposed GDALClose to the Python bindings in support of explicit
> destruction of resources for the test suite (rather than hoping __del__
> does it by dropping a reference).
>
> * Dan began working up a Ubuntu 22.04-based CI test container.
>
> Upcoming Events
> ------------------------------------------
>
> * FOSS4GNA 2023 is being held in Baltimore, Maryland, USA on October
> 23-25th.
>
> * OSGeo 2023 Community Sprint will be held in Vienna, Austria November
> 6-9th, 2023. https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2023 GDAL
> PSC members seeking travel support should contact Howard Butler privately
> to coordinate.
>
> Next Meeting
> ------------------------------------------
>
> The next GDAL Maintainers Meeting is 10/26/2023 at 9:00 EDT. Any PSC
> members are welcome to join by reaching out to me for an invite.
>
> Howard
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231011/1d9084e7/attachment.htm>

From j1 at jimenezshaw.com  Wed Oct 11 12:20:31 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 11 Oct 2023 21:20:31 +0200
Subject: [gdal-dev] Motion: Annual Contracts for Maintainers
In-Reply-To: <C82F5CFC-7E48-418A-B413-52E87A0F4A6A@hobu.co>
References: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
 <CAOodmJrCGafNE4HGjospG0-7YBQBh7MHQL6MzVAhUJoO6E7_FQ@mail.gmail.com>
 <C82F5CFC-7E48-418A-B413-52E87A0F4A6A@hobu.co>
Message-ID: <CADRrdKujrBm+j2mc96fWbYstd8j8rvCPc6pQdCeAya44_7A5Aw@mail.gmail.com>

+1 Javier

On Wed, 11 Oct 2023 at 21:09, Howard Butler via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Yes. Well "up to", of course, but Alessandro is providing us some more
> capacity.
>
> > On Oct 11, 2023, at 1:56?PM, Sean Gillies <sean.gillies at gmail.com>
> wrote:
> >
> > Hi Howard,
> >
> > To be clear, this is a 50% time increase for Alessandro, yes? I think
> that's great!
> >
> > +1
> >
> > On Wed, Oct 11, 2023 at 10:16?AM Howard Butler via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
> > PSC,
> >
> > I'm a little late but I would like to make the following motions in
> regards to GDAL maintainers:
> >
> > * Authorize Alessandro Pasotti for up to 30 hrs/month with a rate
> increase of 10 euros/hr until 30 NOV 2024.
> > * Authorize Even Rouault for up to 90 hrs/month with a rate increase of
> 10 $/hr until 30 JUL 2024
> >
> > Howard
> >
> > --
> > Sean Gillies
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231011/6c112871/attachment.htm>

From j1 at jimenezshaw.com  Thu Oct 12 01:10:49 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 12 Oct 2023 10:10:49 +0200
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <91e700eb-b845-90fe-0716-4ae85cca58bf@lightpear.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
 <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
 <f5526bda-f26d-aa40-744d-6510fb1d4e45@spatialys.com>
 <d9f8a02c-1fd4-3a0b-0721-5c76813ea7b0@lightpear.com>
 <6c5d0281-64f7-8b0f-4c8a-a18a2b9a8dec@spatialys.com>
 <c9f1ad26-1f1e-40f0-efdd-bcc03f266822@lightpear.com>
 <1f475f67-e7b3-06fc-009c-5d7774a1a059@lightpear.com>
 <AM0PR09MB3219AAF21ABA735D0E53B9B0FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <82b0b64a-3975-0213-28cf-fc408539ceb9@lightpear.com>
 <91e700eb-b845-90fe-0716-4ae85cca58bf@lightpear.com>
Message-ID: <CADRrdKsHk4yOxVEbuu1nPhGeBB0QUhgkgd8c3UOd8jRUjKMjyQ@mail.gmail.com>

Are you running pycharm under the conda environment? If you lose any
setting while combining both it can be a problem.

Have you tried setting PROJ_DEBUG=3 ?
It will show some traces from PROJ, like the location of proj.db used. The
point is if you can see the std out.

On Wed, 11 Oct 2023, 15:18 Jonathan Moules via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

> Hi List,
>
> So, after more investigation:
>
> * Using Python Anaconda on either Mac or Linux for GDAL (3.7.1),
> `GetSpatialRef` triggers a RunTime Error for all shapefiles (but only
> shapefiles).
>
> * This happens on Ubuntu (two machines), and a Mac, but only under PyCharm.
>
> * Using the exact same `conda` environment as triggers the above:
> running it directly from the terminal works fine.
>
> So there's something about the combination of conda and Pycharm that
> breaks this aspect of GDAL shapefile handling on *nix and Mac.
>
> Any thoughts? Also, who do I actually report this bug to? Is it GDAL,
> Conda, Pycharm, something else?
>
> Cheers,
>
> Jonathan
>
>
> On 2023-09-28 14:58, Jonathan Moules via gdal-dev wrote:
> > Well, it seems that PROJ_DATA isn't set in their environment. But it's
> > not set in mine either (`print(os.environ['PROJ_DATA']`)! So no idea
> > why mine works just fine without it (Windows 11 thing?).
> >
> > Creating a PROJ_DATA env var didn't fix anything. Even adding it
> > explicitly in Python.
> >
> > Their log file does have this in at a WARNING level:
> >
> > `PROJ: proj_create_from_database: Open of
> > /home/user/anaconda3/envs/env1/share/proj failed`
> >
> > That path has: `drwxrwxr-x` permissions.
> >
> > To answer Even's earlier question:
> >
> > `ogrinfo /path/to/shape.shp` works fine on their system.
> >
> >
> >
> > On 2023-09-28 12:37, Rahkonen Jukka wrote:
> >> Hi,
> >>
> >> Then they should add that environment if they do not know that they
> >> do not belong to "most users"
> >> https://proj.org/en/9.3/usage/environmentvars.html
> >>
> >> -Jukka Rahkonen-
> >>
> >> -----Alkuper?inen viesti-----
> >> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta
> >> Jonathan Moules via gdal-dev
> >> L?hetetty: torstai 28. syyskuuta 2023 14.10
> >> Vastaanottaja: gdal-dev at lists.osgeo.org; Even Rouault
> >> <even.rouault at spatialys.com>
> >> Aihe: Re: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
> >>
> >> Hi Even,
> >>
> >> The colleague doesn't have either a PROJ_LIB or a PROJ_DATA
> >> environment variable.
> >>
> >> I asked another colleague to try it; they're on Ubuntu 20.04, and it
> >> worked for them. I believe using the same setup instructions.
> >>
> >> Cheers,
> >>
> >> Jonathan
> >>
> >> On 2023-09-24 22:37, Jonathan Moules via gdal-dev wrote:
> >>> Thanks Even. I don't have access to the machine either as the
> >>> colleague is moving to another project. I'll have to see if it fails
> >>> for another *nix user.
> >>>
> >>> On 2023-09-24 22:35, Even Rouault wrote:
> >>>> Le 24/09/2023 ? 23:22, Jonathan Moules via gdal-dev a ?crit :
> >>>>>> Also check if the environment isn't messed up regarding PROJ and
> >>>>> the PROJ_LIB/PROJ_DATA environment variable
> >>>>>
> >>>>> Thanks Even; sorry, what does this line mean? I'm guessing you're
> >>>>> referring to:
> >>>>> https://proj.org/en/9.3/usage/environmentvars.html - what would a
> >>>>> "messed up" one look like?
> >>>>>
> >>>> Hard to say without access to the machine. Perhaps just try to
> >>>> recreate a new Conda env from scratch
> >>>>
> >>>>
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev at lists.osgeo.org
> >>> https://list/
> >>> s.osgeo.org%2Fmailman%2Flistinfo%2Fgdal-dev&data=05%7C01%7Cjukka.rahko
> >>> nen%40maanmittauslaitos.fi%7C1f6517888cb34fa40aed08dbc01389dd%7Cc4f8a6
> >>> 3255804a1c92371d5a571b71fa%7C0%7C0%7C638314962370381350%7CUnknown%7CTW
> >>> FpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6
> >>> Mn0%3D%7C3000%7C%7C%7C&sdata=3fVru6K6Ndpkv35FnAbMOlT%2BM96USO7wywqx550
> >>> uRUs%3D&reserved=0
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231012/0cfb9eef/attachment-0001.htm>

From jonathan-lists at lightpear.com  Thu Oct 12 01:27:05 2023
From: jonathan-lists at lightpear.com (Jonathan Moules)
Date: Thu, 12 Oct 2023 09:27:05 +0100
Subject: [gdal-dev] layer.GetSpatialRef() fails on linux for shapefiles
In-Reply-To: <CADRrdKsHk4yOxVEbuu1nPhGeBB0QUhgkgd8c3UOd8jRUjKMjyQ@mail.gmail.com>
References: <5c84a8c6-a796-9e95-91c5-311f2d52332a@lightpear.com>
 <CADRrdKsLXou+m5mU3wOPm68C==bXKoC5N9vbBXvRGMGZdu=e1w@mail.gmail.com>
 <cf918bd7-29bb-2dcf-243b-ff7882f052c0@lightpear.com>
 <f5526bda-f26d-aa40-744d-6510fb1d4e45@spatialys.com>
 <d9f8a02c-1fd4-3a0b-0721-5c76813ea7b0@lightpear.com>
 <6c5d0281-64f7-8b0f-4c8a-a18a2b9a8dec@spatialys.com>
 <c9f1ad26-1f1e-40f0-efdd-bcc03f266822@lightpear.com>
 <1f475f67-e7b3-06fc-009c-5d7774a1a059@lightpear.com>
 <AM0PR09MB3219AAF21ABA735D0E53B9B0FDC1A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <82b0b64a-3975-0213-28cf-fc408539ceb9@lightpear.com>
 <91e700eb-b845-90fe-0716-4ae85cca58bf@lightpear.com>
 <CADRrdKsHk4yOxVEbuu1nPhGeBB0QUhgkgd8c3UOd8jRUjKMjyQ@mail.gmail.com>
Message-ID: <8342451f-1243-9abf-6968-6f31190f7fbb@lightpear.com>

Hi Javier,

I've come across some other bugs that are specific to Conda running in 
Pycharm only this morning. Up to and including getting different 
projection strings back for the exact same file, depending on whether 
the `GetProjectionRef` is called via Pycharm or the terminal (using the 
exact same conda environment).

`osr.SpatialReference().ImportFromEPSG(4326)` returns a RuntimeError in 
Pycharm but works in the terminal:

PROJ: proj_create_from_database: Open of 
/some/path/anaconda3/envs/abc/share/proj failed

So there's something weird going on with environment's that's Posix 
specific.

Thanks,
Jonathan

On 2023-10-12 09:10, Javier Jimenez Shaw wrote:
> Are you running pycharm under the conda environment? If you lose any 
> setting while combining both it can be a problem.
>
> Have you tried setting PROJ_DEBUG=3 ?
> It will show some traces from PROJ, like the location of proj.db used. 
> The point is if you can see the std out.
>
> On Wed, 11 Oct 2023, 15:18 Jonathan Moules via gdal-dev, 
> <gdal-dev at lists.osgeo.org> wrote:
>
>     Hi List,
>
>     So, after more investigation:
>
>     * Using Python Anaconda on either Mac or Linux for GDAL (3.7.1),
>     `GetSpatialRef` triggers a RunTime Error for all shapefiles (but only
>     shapefiles).
>
>     * This happens on Ubuntu (two machines), and a Mac, but only under
>     PyCharm.
>
>     * Using the exact same `conda` environment as triggers the above:
>     running it directly from the terminal works fine.
>
>     So there's something about the combination of conda and Pycharm that
>     breaks this aspect of GDAL shapefile handling on *nix and Mac.
>
>     Any thoughts? Also, who do I actually report this bug to? Is it GDAL,
>     Conda, Pycharm, something else?
>
>     Cheers,
>
>     Jonathan
>
>
>     On 2023-09-28 14:58, Jonathan Moules via gdal-dev wrote:
>     > Well, it seems that PROJ_DATA isn't set in their environment.
>     But it's
>     > not set in mine either (`print(os.environ['PROJ_DATA']`)! So no
>     idea
>     > why mine works just fine without it (Windows 11 thing?).
>     >
>     > Creating a PROJ_DATA env var didn't fix anything. Even adding it
>     > explicitly in Python.
>     >
>     > Their log file does have this in at a WARNING level:
>     >
>     > `PROJ: proj_create_from_database: Open of
>     > /home/user/anaconda3/envs/env1/share/proj failed`
>     >
>     > That path has: `drwxrwxr-x` permissions.
>     >
>     > To answer Even's earlier question:
>     >
>     > `ogrinfo /path/to/shape.shp` works fine on their system.
>     >
>     >
>     >
>     > On 2023-09-28 12:37, Rahkonen Jukka wrote:
>     >> Hi,
>     >>
>     >> Then they should add that environment if they do not know that
>     they
>     >> do not belong to "most users"
>     >> https://proj.org/en/9.3/usage/environmentvars.html
>     >>
>     >> -Jukka Rahkonen-
>     >>
>     >> -----Alkuper?inen viesti-----
>     >> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta
>     >> Jonathan Moules via gdal-dev
>     >> L?hetetty: torstai 28. syyskuuta 2023 14.10
>     >> Vastaanottaja: gdal-dev at lists.osgeo.org; Even Rouault
>     >> <even.rouault at spatialys.com>
>     >> Aihe: Re: [gdal-dev] layer.GetSpatialRef() fails on linux for
>     shapefiles
>     >>
>     >> Hi Even,
>     >>
>     >> The colleague doesn't have either a PROJ_LIB or a PROJ_DATA
>     >> environment variable.
>     >>
>     >> I asked another colleague to try it; they're on Ubuntu 20.04,
>     and it
>     >> worked for them. I believe using the same setup instructions.
>     >>
>     >> Cheers,
>     >>
>     >> Jonathan
>     >>
>     >> On 2023-09-24 22:37, Jonathan Moules via gdal-dev wrote:
>     >>> Thanks Even. I don't have access to the machine either as the
>     >>> colleague is moving to another project. I'll have to see if it
>     fails
>     >>> for another *nix user.
>     >>>
>     >>> On 2023-09-24 22:35, Even Rouault wrote:
>     >>>> Le 24/09/2023 ? 23:22, Jonathan Moules via gdal-dev a ?crit :
>     >>>>>> Also check if the environment isn't messed up regarding
>     PROJ and
>     >>>>> the PROJ_LIB/PROJ_DATA environment variable
>     >>>>>
>     >>>>> Thanks Even; sorry, what does this line mean? I'm guessing
>     you're
>     >>>>> referring to:
>     >>>>> https://proj.org/en/9.3/usage/environmentvars.html - what
>     would a
>     >>>>> "messed up" one look like?
>     >>>>>
>     >>>> Hard to say without access to the machine. Perhaps just try to
>     >>>> recreate a new Conda env from scratch
>     >>>>
>     >>>>
>     >>> _______________________________________________
>     >>> gdal-dev mailing list
>     >>> gdal-dev at lists.osgeo.org
>     >>> https://list/
>     >>> s.osgeo.org
>     <http://s.osgeo.org>%2Fmailman%2Flistinfo%2Fgdal-dev&data=05%7C01%7Cjukka.rahko
>     >>> nen%40maanmittauslaitos.fi
>     <http://40maanmittauslaitos.fi>%7C1f6517888cb34fa40aed08dbc01389dd%7Cc4f8a6
>     >>>
>     3255804a1c92371d5a571b71fa%7C0%7C0%7C638314962370381350%7CUnknown%7CTW
>     >>>
>     FpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6
>     >>>
>     Mn0%3D%7C3000%7C%7C%7C&sdata=3fVru6K6Ndpkv35FnAbMOlT%2BM96USO7wywqx550
>     >>> uRUs%3D&reserved=0
>     >> _______________________________________________
>     >> gdal-dev mailing list
>     >> gdal-dev at lists.osgeo.org
>     >> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     >
>     > _______________________________________________
>     > gdal-dev mailing list
>     > gdal-dev at lists.osgeo.org
>     > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231012/eab148c8/attachment.htm>

From Stefan.Blumentrath at gmx.de  Thu Oct 12 05:01:19 2023
From: Stefan.Blumentrath at gmx.de (Stefan Blumentrath)
Date: Thu, 12 Oct 2023 14:01:19 +0200
Subject: [gdal-dev] Cannot choose netCDF driver instead of HDF5 for nc files
Message-ID: <trinity-d76b75f9-824a-4711-b175-5dc82af6fdf4-1697112079870@3c-app-gmx-bap27>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231012/693b1664/attachment.htm>

From Stefan.Blumentrath at gmx.de  Thu Oct 12 05:22:10 2023
From: Stefan.Blumentrath at gmx.de (Stefan Blumentrath)
Date: Thu, 12 Oct 2023 14:22:10 +0200
Subject: [gdal-dev] Cannot choose netCDF driver instead of HDF5 for nc
 files
In-Reply-To: <trinity-d76b75f9-824a-4711-b175-5dc82af6fdf4-1697112079870@3c-app-gmx-bap27>
References: <trinity-d76b75f9-824a-4711-b175-5dc82af6fdf4-1697112079870@3c-app-gmx-bap27>
Message-ID: <trinity-63aa9f3f-4939-45bd-bebc-d37da05100c7-1697113330232@3c-app-gmx-bs28>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231012/b9f58a3e/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Oct 12 05:22:54 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 12 Oct 2023 14:22:54 +0200
Subject: [gdal-dev] Cannot choose netCDF driver instead of HDF5 for nc
 files
In-Reply-To: <trinity-d76b75f9-824a-4711-b175-5dc82af6fdf4-1697112079870@3c-app-gmx-bap27>
References: <trinity-d76b75f9-824a-4711-b175-5dc82af6fdf4-1697112079870@3c-app-gmx-bap27>
Message-ID: <f875255b-1d8e-4550-bae0-a559399b34b6@spatialys.com>

Works for me with GDAL 3.6, 3.7 and master on Ubuntu 20.04

$ gdalinfo 
/vsicurl/https://nbstds.met.no/thredds/fileServer/NBS/S2B/2022/07/03/S2B_MSIL1C_20220703T112119_N0400_R037_T32VLN_20220703T121203.nc
Driver: netCDF/Network Common Data Format
[...]

/vsicurl/ functionality for the netCDF driver requires using a specific 
system call of Linux. See 
https://gdal.org/drivers/raster/netcdf.html#vsi-virtual-file-system-api-support

Le 12/10/2023 ? 14:01, Stefan Blumentrath via gdal-dev a ?crit?:
> Hi,
> I am wondering if the behavior of the NetCDF driver changed in recent 
> GDAL version(s)?
> I do have the netCDF driver installed and also HDF5, which has been 
> shaddowing the netCDF driver. So I used to do the following:
> export GDAL_SKIP=HDF5
> gdalinfo 
> /vsicurl/https://nbstds.met.no/thredds/fileServer/NBS/S2B/2022/07/03/S2B_MSIL1C_20220703T112119_N0400_R037_T32VLN_20220703T121203.nc
> But this gives me now:
> ERROR 4: 
> `/vsicurl/https://nbstds.met.no/thredds/fileServer/NBS/S2B/2022/07/03/S2B_MSIL1C_20220703T112119_N0400_R037_T32VLN_20220703T121203.nc' 
> not recognized as a supported file format.
> (or in Python syntax:
> from osgeo import gdal
> gdal.GetDriverByName("HDF5").Deregister()
> ds = 
> gdal.Open("/vsicurl/https://nbstds.met.no/thredds/fileServer/NBS/S2B/2022/07/03/S2B_MSIL1C_20220703T112119_N0400_R037_T32VLN_20220703T121203.nc")
> )
> If I do not deregister the HDF5 driver the dataset is opened, but with 
> the HDF5 driver, and I want to use the netCDF driver for those 
> CF-convention files...
> I am on Ubuntu 22.04, GDAL 3.6.4, released 2023/04/17...
> Any idea how that can be solved? Is it a bug or a feature?
> Thanks for helping in advance!
> Cheers
> Stefan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231012/76b4a014/attachment.htm>

From Stefan.Blumentrath at gmx.de  Thu Oct 12 14:45:03 2023
From: Stefan.Blumentrath at gmx.de (Stefan Blumentrath)
Date: Thu, 12 Oct 2023 23:45:03 +0200
Subject: [gdal-dev] Cannot choose netCDF driver instead of HDF5 for nc
 files
In-Reply-To: <f875255b-1d8e-4550-bae0-a559399b34b6@spatialys.com>
References: <trinity-d76b75f9-824a-4711-b175-5dc82af6fdf4-1697112079870@3c-app-gmx-bap27>
 <f875255b-1d8e-4550-bae0-a559399b34b6@spatialys.com>
Message-ID: <trinity-22bc7f9d-132b-4726-94c3-e287633aba21-1697147102996@3c-app-gmx-bap09>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231012/8a34b08f/attachment.htm>

From gdt at lexort.com  Fri Oct 13 05:52:19 2023
From: gdt at lexort.com (Greg Troxel)
Date: Fri, 13 Oct 2023 08:52:19 -0400
Subject: [gdal-dev] including higher-level library in GPX creator string
Message-ID: <rmi8r868z24.fsf@s1.lexort.com>

I am a member of the GPX standards list, and we are discussing a new
version and also dealing with broken data.

I wrote a gpx (from geojson), with just ogr2ogr, and the creator looks
like this:

  creator="GDAL 3.5.3"

that's arguably totally fine with ogr2ogr.

But it seems that if some random big program links with gdal and uses it
to produce a file, the creator is just GDAL, and not "qgis 3.28.5 via
GDAL 3.5.3" or something like that.  I groveled over all my gpx files
and found none that indicated anything like this.

It would be helpful to the GPX community if files were attributed to the
larger software as well, so that they can be chased down or at least
understood to be separately broken.

I don't see anything at
  https://gdal.org/drivers/vector/gpx.html#vector-gpx
that could be used to do this.

Does this make sense to people here?

Is there any facility that would do this, that people just aren't using?

Any other thoughts?

Greg

From jukka.rahkonen at maanmittauslaitos.fi  Fri Oct 13 07:40:27 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 13 Oct 2023 14:40:27 +0000
Subject: [gdal-dev] including higher-level library in GPX creator string
In-Reply-To: <rmi8r868z24.fsf@s1.lexort.com>
References: <rmi8r868z24.fsf@s1.lexort.com>
Message-ID: <AM0PR09MB32199C3365BDE65FF28AC209FDD2A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

It seems to be hardcoded in https://github.com/OSGeo/gdal/blob/2cfeb1a9b03716c8348d6f1f4c611f2589d53e76/ogr/ogrsf_frmts/gpx/ogrgpxdatasource.cpp#L744

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Greg Troxel via gdal-dev
L?hetetty: perjantai 13. lokakuuta 2023 15.52
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] including higher-level library in GPX creator string

I am a member of the GPX standards list, and we are discussing a new version and also dealing with broken data.

I wrote a gpx (from geojson), with just ogr2ogr, and the creator looks like this:

  creator="GDAL 3.5.3"

that's arguably totally fine with ogr2ogr.

But it seems that if some random big program links with gdal and uses it to produce a file, the creator is just GDAL, and not "qgis 3.28.5 via GDAL 3.5.3" or something like that.  I groveled over all my gpx files and found none that indicated anything like this.

It would be helpful to the GPX community if files were attributed to the larger software as well, so that they can be chased down or at least understood to be separately broken.

I don't see anything at
<link removed because our mail system made it so strange>
that could be used to do this.

Does this make sense to people here?

Is there any facility that would do this, that people just aren't using?

Any other thoughts?

Greg
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Fri Oct 13 09:33:27 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 13 Oct 2023 18:33:27 +0200
Subject: [gdal-dev] including higher-level library in GPX creator string
In-Reply-To: <rmi8r868z24.fsf@s1.lexort.com>
References: <rmi8r868z24.fsf@s1.lexort.com>
Message-ID: <69d8cc00-697e-4c40-bef1-33fa1d94dcf1@spatialys.com>

Cf https://github.com/OSGeo/gdal/pull/8558: "GPX: add a CREATOR dataset 
creation option"

It will be of course up to the application / application user to set it.

I've considered a global GDALSetDefaultCreatorApplication() (could be 
similar to CPLHTTPSetDefaultUserAgent(): 
https://gdal.org/doxygen/cpl__http_8h.html#ae83c06d51089bb340ed0b98a6ed8d01d) 
so that an application could set a default for all formats that write a 
creator application, but this leads to introducing potential options to 
express "totally replace the GDAL version" vs "add my name in addition 
to the GDAL version", or "put application/version number only when 
required by the format" vs "put application/version wherever the format 
could allow it, but only if there's a standardized location to do so" vs 
"put application/version wherever the format could allow, potentially it 
in a custom metadata item if there's no standardized location". e.g in 
netCDF, we have a custom attribute GDAL = "GDAL x.y.z, released 
YYYY/MM/DD" (it would not be appropriate to put the identification of 
the larger application in it, given the name of the attribute and the 
fact that GDAL itself parses it on reading to determine the bottom-up vs 
top-up orientaiton).? So I've not pursued this given all those dilemmas :-)

Even

Le 13/10/2023 ? 14:52, Greg Troxel via gdal-dev a ?crit?:
> I am a member of the GPX standards list, and we are discussing a new
> version and also dealing with broken data.
>
> I wrote a gpx (from geojson), with just ogr2ogr, and the creator looks
> like this:
>
>    creator="GDAL 3.5.3"
>
> that's arguably totally fine with ogr2ogr.
>
> But it seems that if some random big program links with gdal and uses it
> to produce a file, the creator is just GDAL, and not "qgis 3.28.5 via
> GDAL 3.5.3" or something like that.  I groveled over all my gpx files
> and found none that indicated anything like this.
>
> It would be helpful to the GPX community if files were attributed to the
> larger software as well, so that they can be chased down or at least
> understood to be separately broken.
>
> I don't see anything at
>    https://gdal.org/drivers/vector/gpx.html#vector-gpx
> that could be used to do this.
>
> Does this make sense to people here?
>
> Is there any facility that would do this, that people just aren't using?
>
> Any other thoughts?
>
> Greg
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From roland.baviere at districtlab.eu  Sat Oct 14 07:16:42 2023
From: roland.baviere at districtlab.eu (Roland Baviere)
Date: Sat, 14 Oct 2023 16:16:42 +0200
Subject: [gdal-dev] Writting a shapefile from C++ API: case a field of
 the OFTReal type
In-Reply-To: <CALjxX3DAm4wnmnLjT6fqnGk-UY6kV7nianSiZ162j37VAU=XvA@mail.gmail.com>
References: <CALjxX3DAm4wnmnLjT6fqnGk-UY6kV7nianSiZ162j37VAU=XvA@mail.gmail.com>
Message-ID: <CALjxX3B-_+A9nWfe29J3MtOcXHXsoca=W=1rQBfXtc9axWZEsw@mail.gmail.com>

Hi all,

I've just found that a declaration of this type solved my problem:

OGRFieldDefn oField( "Val dbl", OFTReal );

// oField.SetWidth(64);


I have no idea why.

I suggest that the tutorial is updated to reflect this (common) case.


Kind regards,


Roland




Le sam. 14 oct. 2023 ? 16:12, Roland Baviere <roland.baviere at districtlab.eu>
a ?crit :

> Dear Community,
>
> I hope this e-mel finds you well.
>
> I am trying to write a shaprfile from a C++ application (windows),
> following the tutorial found here:
> https://gdal.org/tutorials/vector_api_tut.html#writing-to-ogr
>
> Everything works fine except for Fields of the OFTReal type, which are
> systematically truncated in the produced shapefile, as if they were
> declared as integer.
>
> The example illustrates the declaration of a string type:
>
> OGRFieldDefn oField( "Name", OFTString );
> oField.SetWidth(32);
>
> I tried to adapt it to the case were I want to serialize a field of the double type:
>
>
> OGRFieldDefn oField( "Val dbl", OFTReal );
>
> oField.SetWidth(64);
>
>
>
> but the aforementionned truncation error occurs.
>
>
> What am I doing wrong?
>
>
> Thanks a lot for your help and time.
>
>
> Kind regards,
>
>
> Roland BAVIERE
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231014/e8ed7aff/attachment.htm>

From j1 at jimenezshaw.com  Sun Oct 15 04:34:24 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Sun, 15 Oct 2023 13:34:24 +0200
Subject: [gdal-dev] Performance regression testing/benchmarking for CI
In-Reply-To: <6dc49e7e-8a09-47db-b83b-8862f534e25e@betaapp.fastmail.com>
References: <0187ec42-3c46-4932-bc5d-9db38ee6f76e@spatialys.com>
 <6dc49e7e-8a09-47db-b83b-8862f534e25e@betaapp.fastmail.com>
Message-ID: <CADRrdKsPBb+V1H8iDbfxgqHUYNS_o=TJt2bXPo2CK=3oEhwSUQ@mail.gmail.com>

Hi Even. Thanks, it sounds good.
However I see a potential problem. I see that you use once "SetCacheMax".
We should not forget about that in the future for sensible tests. The cache
of gdal is usually a percentage of the total memory, that may change among
the environments and time.

On Wed, 11 Oct 2023, 07:53 Lauren?iu Nicola via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> No experience with pytest-benchmark, but I maintain an unrelated project
> that runs some benchmarks on CI, and here are some things worth mentioning:
>
>  - we store the results as a newline-delimited JSON file in a different
> GitHub repository (
> https://raw.githubusercontent.com/rust-analyzer/metrics/master/metrics.json,
> warning, it's a 5.5 MB unformatted JSON)
>  - we have an in-browser dashboard that retrieves the whole file and
> displays them: https://rust-analyzer.github.io/metrics/
>  - we do track build time and overall run time, but we're more interested
> in correctness
>  - the display is a bit of a mess (partly due to trying to keep the setup
> as simple as possible), but you can look for the "total time", "total
> memory" and "build" to get an idea
>  - we store the runner CPU type and memory in that JSON; they're almost
> all Intel, but they do upgrade from time to time
>  - we even have two AMD EPYC runs, note that boost is disabled in a
> different way there (we don't try to disable it, though)
>  - we also try to measure the CPU instruction count (the perf counter),
> but it doesn't work on GitHub and probably in most VMs
>  - the runners have been very reliable, but not really consistent in
> performance
>  - a bigger problem for us was that somebody actually needs to look at the
> dashboard to spot any regressions and investigate them (some are caused by
> external changes)
>  - in 3-5 years we'll probably have to trim down the JSON or switch to a
> different storage
>
> Laurentiu
>
> On Tue, Oct 10, 2023, at 21:08, Even Rouault via gdal-dev wrote:
> > Hi,
> >
> > I'm experimenting with adding performance regression testing in our CI.
> > Currently our CI has quite extensive functional coverage, but totally
> > lacks performance testing. Given that we use pytest, I've spotted
> > pytest-benchmark (https://pytest-benchmark.readthedocs.io/en/latest/)
> as
> > a likely good candidate framework.
> >
> > I've prototyped things in https://github.com/OSGeo/gdal/pull/8538
> >
> > Basically, we now have a autotest/benchmark directory where performance
> > tests can be written.
> >
> > Then in the CI, we checkout a reference commit, build it and run the
> > performance test suite in --benchmark-save mode
> >
> > And then we run the performance test suite on the PR in
> > --benchmark-compare mode with a --benchmark-compare-fail="mean:5%"
> > criterion (which means that a test fails if its mean runtime is 5%
> > slower than the reference one)
> >
> >  From what I can see, pytest-benchmark behaves correctly if tests are
> > removed or added (that is not failing, just skipping them during
> > comparison). The only thing one should not do is modify an existing test
> > w.r.t the reference branch.
> >
> > Does someone has practical experience of pytest-benchmark, in particular
> > in CI setups? With virtualization, it is hard to guarantee that other
> > things happening on the host running the VM might not interfer. Even
> > locally on my own machine, I initially saw strong variations in timings,
> > which can be reduced to acceptable deviation by disabling Intel
> > Turboboost feature (echo 1 | sudo tee
> > /sys/devices/system/cpu/intel_pstate/no_turbo)
> >
> > Even
> >
> > --
> > http://www.spatialys.com
> > My software is free, but my time generally not.
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231015/be7bad63/attachment-0001.htm>

From even.rouault at spatialys.com  Sun Oct 15 05:00:26 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 15 Oct 2023 14:00:26 +0200
Subject: [gdal-dev] Performance regression testing/benchmarking for CI
In-Reply-To: <CADRrdKsPBb+V1H8iDbfxgqHUYNS_o=TJt2bXPo2CK=3oEhwSUQ@mail.gmail.com>
References: <0187ec42-3c46-4932-bc5d-9db38ee6f76e@spatialys.com>
 <6dc49e7e-8a09-47db-b83b-8862f534e25e@betaapp.fastmail.com>
 <CADRrdKsPBb+V1H8iDbfxgqHUYNS_o=TJt2bXPo2CK=3oEhwSUQ@mail.gmail.com>
Message-ID: <ccf21188-045a-4837-9c2e-9887e2039a0e@spatialys.com>


Le 15/10/2023 ? 13:34, Javier Jimenez Shaw via gdal-dev a ?crit?:
> Hi Even. Thanks, it sounds good.
> However I see a potential problem. I see that you use once 
> "SetCacheMax". We should not forget about that in the future for 
> sensible tests. The cache of gdal is usually a percentage of the total 
> memory, that may change among the environments and time.

Javier,

What is sure is that the timings got in one session of the perf tests in 
CI are comparable to nothing else that timings done in the same session 
(and that's already challenging!). So the effect of the RAM available in 
the CI worker might affect the speed of the tests, but it will affect it 
in the same way for both the reference run and the tested run (while the 
GDAL_CACHEMAX=5% setting remains the same and the general working of the 
block cache remains similar). I anticipate that at some points changes 
in GDAL might make the perf test suite no longer comparable to the 
current reference version and that we will have to upgrade the commit of 
the reference version while that happens. Actually if the perf test 
suite is extended, it might be useful to upgrade the commit of the 
reference version at release time of feature releases. For example, when 
GDAL 3.8.0 is released, it will become the reference point for 3.9.0 
development, and so on (otherwise we wouldn't get perf regression 
testing of added tests). The downside of this is that this wouldn't 
catch progressive slowdowns over several release cycles. But given that 
I had to raise the threshold for failure to > 30% regression to avoid 
false positives, the perf test suite (at least when run in CI with all 
its unpredictability) can only catch major "instant" regressions.

Even

>
> On Wed, 11 Oct 2023, 07:53 Lauren?iu Nicola via gdal-dev, 
> <gdal-dev at lists.osgeo.org> wrote:
>
>     Hi,
>
>     No experience with pytest-benchmark, but I maintain an unrelated
>     project that runs some benchmarks on CI, and here are some things
>     worth mentioning:
>
>     ?- we store the results as a newline-delimited JSON file in a
>     different GitHub repository
>     (https://raw.githubusercontent.com/rust-analyzer/metrics/master/metrics.json,
>     warning, it's a 5.5 MB unformatted JSON)
>     ?- we have an in-browser dashboard that retrieves the whole file
>     and displays them: https://rust-analyzer.github.io/metrics/
>     ?- we do track build time and overall run time, but we're more
>     interested in correctness
>     ?- the display is a bit of a mess (partly due to trying to keep
>     the setup as simple as possible), but you can look for the "total
>     time", "total memory" and "build" to get an idea
>     ?- we store the runner CPU type and memory in that JSON; they're
>     almost all Intel, but they do upgrade from time to time
>     ?- we even have two AMD EPYC runs, note that boost is disabled in
>     a different way there (we don't try to disable it, though)
>     ?- we also try to measure the CPU instruction count (the perf
>     counter), but it doesn't work on GitHub and probably in most VMs
>     ?- the runners have been very reliable, but not really consistent
>     in performance
>     ?- a bigger problem for us was that somebody actually needs to
>     look at the dashboard to spot any regressions and investigate them
>     (some are caused by external changes)
>     ?- in 3-5 years we'll probably have to trim down the JSON or
>     switch to a different storage
>
>     Laurentiu
>
>     On Tue, Oct 10, 2023, at 21:08, Even Rouault via gdal-dev wrote:
>     > Hi,
>     >
>     > I'm experimenting with adding performance regression testing in
>     our CI.
>     > Currently our CI has quite extensive functional coverage, but
>     totally
>     > lacks performance testing. Given that we use pytest, I've spotted
>     > pytest-benchmark
>     (https://pytest-benchmark.readthedocs.io/en/latest/) as
>     > a likely good candidate framework.
>     >
>     > I've prototyped things in https://github.com/OSGeo/gdal/pull/8538
>     >
>     > Basically, we now have a autotest/benchmark directory where
>     performance
>     > tests can be written.
>     >
>     > Then in the CI, we checkout a reference commit, build it and run
>     the
>     > performance test suite in --benchmark-save mode
>     >
>     > And then we run the performance test suite on the PR in
>     > --benchmark-compare mode with a --benchmark-compare-fail="mean:5%"
>     > criterion (which means that a test fails if its mean runtime is 5%
>     > slower than the reference one)
>     >
>     >? From what I can see, pytest-benchmark behaves correctly if
>     tests are
>     > removed or added (that is not failing, just skipping them during
>     > comparison). The only thing one should not do is modify an
>     existing test
>     > w.r.t the reference branch.
>     >
>     > Does someone has practical experience of pytest-benchmark, in
>     particular
>     > in CI setups? With virtualization, it is hard to guarantee that
>     other
>     > things happening on the host running the VM might not interfer.
>     Even
>     > locally on my own machine, I initially saw strong variations in
>     timings,
>     > which can be reduced to acceptable deviation by disabling Intel
>     > Turboboost feature (echo 1 | sudo tee
>     > /sys/devices/system/cpu/intel_pstate/no_turbo)
>     >
>     > Even
>     >
>     > --
>     > http://www.spatialys.com
>     > My software is free, but my time generally not.
>     >
>     > _______________________________________________
>     > gdal-dev mailing list
>     > gdal-dev at lists.osgeo.org
>     > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231015/410ff991/attachment.htm>

From roland.baviere at districtlab.eu  Mon Oct 16 03:14:12 2023
From: roland.baviere at districtlab.eu (Roland Baviere)
Date: Mon, 16 Oct 2023 12:14:12 +0200
Subject: [gdal-dev] Reading a shapefile containing multi-parts Polyline from
 OGR (C++ API)
Message-ID: <CALjxX3DNEfTFxvkFfURJiENpvHnbzjsxf3=zvJEhyhkmBZyz2g@mail.gmail.com>

Hi all,

 I hope this e-mel finds you well.

I am trying to read a shapefile layer from OGR from a C++ application
following the tutorial found here:
https://gdal.org/tutorials/vector_api_tut.html#reading-from-ogr

We have difficulties with a layer containing PolyLines with several parts.

The pre-existing code works fine for polylines having a unique part.

Do you have any example or advice to help me implement a version that works
for polylines containing several parts. My intention is to display each
shape on a map, so I need to retrieve the coordinates of points and draw
segment between points when relevant.

Thanks a lot for your help.

Kind regards,

Roland



//// CODE THAT WORKS for "simple" polylines but fails when dealiing with a
polyline containing several parts

int o = 0;
                        for(auto y : poGeometry->toLineString()) {
                            if (o == 0) {
                                line.mInCoord = QGeoCoordinate(y.getX(),
y.getY());
                            } else if (o ==
(poGeometry->toLineString()->getNumPoints() - 1)) {
                                line.mOutCoord = QGeoCoordinate(y.getX(),
y.getY());
                            } else {

line.mPath.addCoordinate(QGeoCoordinate(y.getX(), y.getY()));
                            }
                            qDebug() << o;
                            o++;
                        }
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231016/e876b8f3/attachment.htm>

From j1 at jimenezshaw.com  Mon Oct 16 06:15:39 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 16 Oct 2023 15:15:39 +0200
Subject: [gdal-dev] Reading a shapefile containing multi-parts Polyline
 from OGR (C++ API)
In-Reply-To: <CALjxX3DNEfTFxvkFfURJiENpvHnbzjsxf3=zvJEhyhkmBZyz2g@mail.gmail.com>
References: <CALjxX3DNEfTFxvkFfURJiENpvHnbzjsxf3=zvJEhyhkmBZyz2g@mail.gmail.com>
Message-ID: <CADRrdKvRJvfVdvWsXygz23w7vUeuxcdi3Vw9hLgBhpt0opRTeA@mail.gmail.com>

Do you mean a MultiLineString?

This piece of code is working for me (I hope without any bug).

if (wkbFlatten(poGeometry->getGeometryType()) == wkbMultiLineString)
    multiLineStringGeometry(poGeometry);
...
            multiLineStringGeometry(OGRGeometry* poGeometry)
            {
                OGRMultiLineString* multiLine =
dynamic_cast<OGRMultiLineString*>(poGeometry);
                int numGeometries = multiLine->getNumGeometries();
                for (int i = 0; i < numGeometries; i++)
                {
                    OGRGeometry* eachGeometry =
multiLine->getGeometryRef(i);
                    OGRLineString* line =
dynamic_cast<OGRLineString*>(eachGeometry);
                    // do whatever with that LineString
                }
            }

On Mon, 16 Oct 2023 at 12:14, Roland Baviere via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi all,
>
>  I hope this e-mel finds you well.
>
> I am trying to read a shapefile layer from OGR from a C++ application
> following the tutorial found here:
> https://gdal.org/tutorials/vector_api_tut.html#reading-from-ogr
>
> We have difficulties with a layer containing PolyLines with several parts.
>
> The pre-existing code works fine for polylines having a unique part.
>
> Do you have any example or advice to help me implement a version that
> works for polylines containing several parts. My intention is to display
> each shape on a map, so I need to retrieve the coordinates of points and
> draw segment between points when relevant.
>
> Thanks a lot for your help.
>
> Kind regards,
>
> Roland
>
>
>
> //// CODE THAT WORKS for "simple" polylines but fails when dealiing with a
> polyline containing several parts
>
> int o = 0;
>                         for(auto y : poGeometry->toLineString()) {
>                             if (o == 0) {
>                                 line.mInCoord = QGeoCoordinate(y.getX(),
> y.getY());
>                             } else if (o ==
> (poGeometry->toLineString()->getNumPoints() - 1)) {
>                                 line.mOutCoord = QGeoCoordinate(y.getX(),
> y.getY());
>                             } else {
>
> line.mPath.addCoordinate(QGeoCoordinate(y.getX(), y.getY()));
>                             }
>                             qDebug() << o;
>                             o++;
>                         }
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231016/15c98e13/attachment.htm>

From even.rouault at spatialys.com  Mon Oct 16 06:21:20 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 16 Oct 2023 15:21:20 +0200
Subject: [gdal-dev] Reading a shapefile containing multi-parts Polyline
 from OGR (C++ API)
In-Reply-To: <CADRrdKvRJvfVdvWsXygz23w7vUeuxcdi3Vw9hLgBhpt0opRTeA@mail.gmail.com>
References: <CALjxX3DNEfTFxvkFfURJiENpvHnbzjsxf3=zvJEhyhkmBZyz2g@mail.gmail.com>
 <CADRrdKvRJvfVdvWsXygz23w7vUeuxcdi3Vw9hLgBhpt0opRTeA@mail.gmail.com>
Message-ID: <5b15a4f3-ffb2-4379-8fc8-862d29b0ffae@spatialys.com>


Le 16/10/2023 ? 15:15, Javier Jimenez Shaw via gdal-dev a ?crit?:
> Do you mean a MultiLineString?
>
> This piece of code is working for me (I hope without any bug).
>
> if (wkbFlatten(poGeometry->getGeometryType()) == wkbMultiLineString)
> multiLineStringGeometry(poGeometry);
> ...
> multiLineStringGeometry(OGRGeometry* poGeometry)
> ? ? ? ? ? ? {
> ? ? ? ? ? ? ? ? OGRMultiLineString* multiLine = 
> dynamic_cast<OGRMultiLineString*>(poGeometry);
> ? ? ? ? ? ? ? ? int numGeometries = multiLine->getNumGeometries();
> ? ? ? ? ? ? ? ? for (int i = 0; i < numGeometries; i++)
> ? ? ? ? ? ? ? ? {
> ? ? ? ? ? ? ? ? ? ? OGRGeometry* eachGeometry = 
> multiLine->getGeometryRef(i);
> ? ? ? ? ? ? ? ? ? ? OGRLineString* line = 
> dynamic_cast<OGRLineString*>(eachGeometry);
> ? ? ? ? ? ? ? ? ? ? // do whatever with that LineString
> ? ? ? ? ? ? ? ? }
> ? ? ? ? ? ? }

Can further be simplified to something like:

multiLineStringGeometry(const OGRGeometry* poGeometry)
 ? ? ? ? ? ? {
 ? ? ? ? ? ? ? ? for (const OGRLineString* line: 
poGeometry->toMultiLineString())
 ? ? ? ? ? ? ? ? {
 ? ? ? ? ? ? ? ? ? ? // do whatever with that LineString
 ? ? ? ? ? ? ? ? }
 ? ? ? ? ? ? }

>
> On Mon, 16 Oct 2023 at 12:14, Roland Baviere via gdal-dev 
> <gdal-dev at lists.osgeo.org> wrote:
>
>     Hi all,
>
>     ?I hope this e-mel finds you well.
>
>     I am trying to read a shapefile layer from OGR from a C++
>     application following the tutorial found here:
>     https://gdal.org/tutorials/vector_api_tut.html#reading-from-ogr
>
>     We have difficulties with a layer containing PolyLines with
>     several parts.
>
>     The pre-existing code works fine for polylines having a unique part.
>
>     Do you have any example or advice to help me implement a version
>     that works for polylines containing several parts. My intention is
>     to display each shape on a map, so I need to retrieve the
>     coordinates?of points and draw segment?between points when relevant.
>
>     Thanks a lot for your help.
>
>     Kind regards,
>
>     Roland
>
>
>
>     //// CODE THAT WORKS for "simple" polylines but fails when
>     dealiing with a polyline containing several parts
>     int o = 0;
>     ? ? ? ? ? ? ? ? ? ? ? ? for(auto y : poGeometry->toLineString()) {
>     ? ? ? ? ? ? ? ? ? ? ? ? ? ? if (o == 0) {
>     ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? line.mInCoord =
>     QGeoCoordinate(y.getX(), y.getY());
>     ? ? ? ? ? ? ? ? ? ? ? ? ? ? } else if (o ==
>     (poGeometry->toLineString()->getNumPoints() - 1)) {
>     ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? line.mOutCoord =
>     QGeoCoordinate(y.getX(), y.getY());
>     ? ? ? ? ? ? ? ? ? ? ? ? ? ? } else {
>     line.mPath.addCoordinate(QGeoCoordinate(y.getX(), y.getY()));
>     ? ? ? ? ? ? ? ? ? ? ? ? ? ? }
>     ? ? ? ? ? ? ? ? ? ? ? ? ? ? qDebug() << o;
>     ? ? ? ? ? ? ? ? ? ? ? ? ? ? o++;
>     ? ? ? ? ? ? ? ? ? ? ? ? }
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231016/c931bdd8/attachment-0001.htm>

From roland.baviere at districtlab.eu  Mon Oct 16 07:15:40 2023
From: roland.baviere at districtlab.eu (Roland Baviere)
Date: Mon, 16 Oct 2023 16:15:40 +0200
Subject: [gdal-dev] Reading a shapefile containing multi-parts Polyline
 from OGR (C++ API)
In-Reply-To: <5b15a4f3-ffb2-4379-8fc8-862d29b0ffae@spatialys.com>
References: <CALjxX3DNEfTFxvkFfURJiENpvHnbzjsxf3=zvJEhyhkmBZyz2g@mail.gmail.com>
 <CADRrdKvRJvfVdvWsXygz23w7vUeuxcdi3Vw9hLgBhpt0opRTeA@mail.gmail.com>
 <5b15a4f3-ffb2-4379-8fc8-862d29b0ffae@spatialys.com>
Message-ID: <CALjxX3A8bsHdQ5sK+VryALKgCfnYghdm0_207Mwk6icgBXPKqA@mail.gmail.com>

Thanks a lot Javier. I'll test this and come back to you.

Here is a download link to the shapefile causing this issue for me:
https://filesender.renater.fr/?s=download&token=da2a7ff6-9755-4086-b1ed-71c6ebc72a0f



Le lun. 16 oct. 2023 ? 15:21, Even Rouault <even.rouault at spatialys.com> a
?crit :

>
> Le 16/10/2023 ? 15:15, Javier Jimenez Shaw via gdal-dev a ?crit :
>
> Do you mean a MultiLineString?
>
> This piece of code is working for me (I hope without any bug).
>
> if (wkbFlatten(poGeometry->getGeometryType()) == wkbMultiLineString)
>     multiLineStringGeometry(poGeometry);
> ...
>             multiLineStringGeometry(OGRGeometry* poGeometry)
>             {
>                 OGRMultiLineString* multiLine =
> dynamic_cast<OGRMultiLineString*>(poGeometry);
>                 int numGeometries = multiLine->getNumGeometries();
>                 for (int i = 0; i < numGeometries; i++)
>                 {
>                     OGRGeometry* eachGeometry =
> multiLine->getGeometryRef(i);
>                     OGRLineString* line =
> dynamic_cast<OGRLineString*>(eachGeometry);
>                     // do whatever with that LineString
>                 }
>             }
>
> Can further be simplified to something like:
>             multiLineStringGeometry(const OGRGeometry* poGeometry)
>             {
>                 for (const OGRLineString* line:
> poGeometry->toMultiLineString())
>                 {
>                     // do whatever with that LineString
>                 }
>             }
>
>
> On Mon, 16 Oct 2023 at 12:14, Roland Baviere via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>> Hi all,
>>
>>  I hope this e-mel finds you well.
>>
>> I am trying to read a shapefile layer from OGR from a C++ application
>> following the tutorial found here:
>> https://gdal.org/tutorials/vector_api_tut.html#reading-from-ogr
>>
>> We have difficulties with a layer containing PolyLines with several parts.
>>
>> The pre-existing code works fine for polylines having a unique part.
>>
>> Do you have any example or advice to help me implement a version that
>> works for polylines containing several parts. My intention is to display
>> each shape on a map, so I need to retrieve the coordinates of points and
>> draw segment between points when relevant.
>>
>> Thanks a lot for your help.
>>
>> Kind regards,
>>
>> Roland
>>
>>
>>
>> //// CODE THAT WORKS for "simple" polylines but fails when dealiing with
>> a polyline containing several parts
>>
>> int o = 0;
>>                         for(auto y : poGeometry->toLineString()) {
>>                             if (o == 0) {
>>                                 line.mInCoord = QGeoCoordinate(y.getX(),
>> y.getY());
>>                             } else if (o ==
>> (poGeometry->toLineString()->getNumPoints() - 1)) {
>>                                 line.mOutCoord = QGeoCoordinate(y.getX(),
>> y.getY());
>>                             } else {
>>
>> line.mPath.addCoordinate(QGeoCoordinate(y.getX(), y.getY()));
>>                             }
>>                             qDebug() << o;
>>                             o++;
>>                         }
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231016/e93b7a2f/attachment.htm>

From even.rouault at spatialys.com  Mon Oct 16 07:42:39 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 16 Oct 2023 16:42:39 +0200
Subject: [gdal-dev] Notice: issue about multi-threaded GTiff
 compression+decompression
Message-ID: <443e5f45-5a0a-4069-80fa-9302195086a3@spatialys.com>

Hi,

For GDAL 3.6.0 to 3.7.2, use of multi-threaded GTiff 
compression+decompression, in particular within the same file, as for 
example in a "gdalwarp -co COMPRESS=... -co NUM_THREADS=..." workflow 
can lead to deadlocks (process stalled forever) and/or data corruption 
(sometimes without errors at generation). Cf 
https://github.com/OSGeo/gdal/issues/8470 for a reproducer. The fix is 
in https://github.com/OSGeo/gdal/pull/8561

The issue is particularly visible on Windows, or more generally any 
operating system (or file system where the output file is located) which 
has no VSIVirtualHandle::PRead() implementation, but it can also be 
occasionally reproduced on Linux (at least as a deadlock).

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From j1 at jimenezshaw.com  Mon Oct 16 08:05:20 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Mon, 16 Oct 2023 17:05:20 +0200
Subject: [gdal-dev] Notice: issue about multi-threaded GTiff
 compression+decompression
In-Reply-To: <443e5f45-5a0a-4069-80fa-9302195086a3@spatialys.com>
References: <443e5f45-5a0a-4069-80fa-9302195086a3@spatialys.com>
Message-ID: <CADRrdKt2u=Drvtw1euMEunD5w7D2NOGNLuf=vrJxeworQpt33w@mail.gmail.com>

Thanks Even for notifying this.
I see the fix will be included in the next releases 3.7.3 and 3.8.0, both
planned for November 1st (just in a couple of weeks)
https://github.com/OSGeo/gdal/milestones

On Mon, 16 Oct 2023 at 16:42, Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> For GDAL 3.6.0 to 3.7.2, use of multi-threaded GTiff
> compression+decompression, in particular within the same file, as for
> example in a "gdalwarp -co COMPRESS=... -co NUM_THREADS=..." workflow
> can lead to deadlocks (process stalled forever) and/or data corruption
> (sometimes without errors at generation). Cf
> https://github.com/OSGeo/gdal/issues/8470 for a reproducer. The fix is
> in https://github.com/OSGeo/gdal/pull/8561
>
> The issue is particularly visible on Windows, or more generally any
> operating system (or file system where the output file is located) which
> has no VSIVirtualHandle::PRead() implementation, but it can also be
> occasionally reproduced on Linux (at least as a deadlock).
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231016/5b8d754c/attachment.htm>

From schwehr at gmail.com  Mon Oct 16 08:14:14 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 16 Oct 2023 08:14:14 -0700
Subject: [gdal-dev] Notice: issue about multi-threaded GTiff
 compression+decompression
In-Reply-To: <443e5f45-5a0a-4069-80fa-9302195086a3@spatialys.com>
References: <443e5f45-5a0a-4069-80fa-9302195086a3@spatialys.com>
Message-ID: <CACmBxyt+qQQzuyc6CWrK0CczueLDrq_Fc_OU_3M7zecq4DibdQ@mail.gmail.com>

Thanks for the heads up!

Can you share that SHAs of the fix and cause?

On Mon, Oct 16, 2023, 7:44?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> For GDAL 3.6.0 to 3.7.2, use of multi-threaded GTiff
> compression+decompression, in particular within the same file, as for
> example in a "gdalwarp -co COMPRESS=... -co NUM_THREADS=..." workflow
> can lead to deadlocks (process stalled forever) and/or data corruption
> (sometimes without errors at generation). Cf
> https://github.com/OSGeo/gdal/issues/8470 for a reproducer. The fix is
> in https://github.com/OSGeo/gdal/pull/8561
>
> The issue is particularly visible on Windows, or more generally any
> operating system (or file system where the output file is located) which
> has no VSIVirtualHandle::PRead() implementation, but it can also be
> occasionally reproduced on Linux (at least as a deadlock).
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231016/dc9584b2/attachment-0001.htm>

From even.rouault at spatialys.com  Mon Oct 16 08:25:51 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 16 Oct 2023 17:25:51 +0200
Subject: [gdal-dev] Notice: issue about multi-threaded GTiff
 compression+decompression
In-Reply-To: <CACmBxyt+qQQzuyc6CWrK0CczueLDrq_Fc_OU_3M7zecq4DibdQ@mail.gmail.com>
References: <443e5f45-5a0a-4069-80fa-9302195086a3@spatialys.com>
 <CACmBxyt+qQQzuyc6CWrK0CczueLDrq_Fc_OU_3M7zecq4DibdQ@mail.gmail.com>
Message-ID: <56201823-3068-4a00-b9e6-27bf6ece867c@spatialys.com>


Le 16/10/2023 ? 17:14, Kurt Schwehr a ?crit?:
> Thanks for the heads up!
>
> Can you share that SHAs of the fix and cause?

master: d083af1ec9c38e79bfb0532885570de6e5b8a410

3.7 branch (should apply to 3.6 as well): 
b5858ed5bc5004c97f7cd6000674015bdc70b33b

cause: a worker thread of the multithreaded decoding could, in a 
situation where the block cache is full, cause a "dirty" (ie modified 
but not yet serialized to disk) block to be written, resulting in either 
a deadlock between the lock of the multithreaded decoder and the lock of 
the job queue mechanism, or other decoding threads could see their file 
handle being seek() by another thread.? In short: multithreading is hard.

>
> On Mon, Oct 16, 2023, 7:44?AM Even Rouault via gdal-dev 
> <gdal-dev at lists.osgeo.org> wrote:
>
>     Hi,
>
>     For GDAL 3.6.0 to 3.7.2, use of multi-threaded GTiff
>     compression+decompression, in particular within the same file, as for
>     example in a "gdalwarp -co COMPRESS=... -co NUM_THREADS=..." workflow
>     can lead to deadlocks (process stalled forever) and/or data
>     corruption
>     (sometimes without errors at generation). Cf
>     https://github.com/OSGeo/gdal/issues/8470 for a reproducer. The
>     fix is
>     in https://github.com/OSGeo/gdal/pull/8561
>
>     The issue is particularly visible on Windows, or more generally any
>     operating system (or file system where the output file is located)
>     which
>     has no VSIVirtualHandle::PRead() implementation, but it can also be
>     occasionally reproduced on Linux (at least as a deadlock).
>
>     Even
>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231016/6f8e8e3d/attachment.htm>

From sean.gillies at gmail.com  Mon Oct 16 08:49:57 2023
From: sean.gillies at gmail.com (Sean Gillies)
Date: Mon, 16 Oct 2023 09:49:57 -0600
Subject: [gdal-dev] Notice: issue about multi-threaded GTiff
 compression+decompression
In-Reply-To: <56201823-3068-4a00-b9e6-27bf6ece867c@spatialys.com>
References: <443e5f45-5a0a-4069-80fa-9302195086a3@spatialys.com>
 <CACmBxyt+qQQzuyc6CWrK0CczueLDrq_Fc_OU_3M7zecq4DibdQ@mail.gmail.com>
 <56201823-3068-4a00-b9e6-27bf6ece867c@spatialys.com>
Message-ID: <CAOodmJoCyMxm=fEVpmg-da_nxJ-yARbP4XRA7dA-C6w-ow7KpQ@mail.gmail.com>

Thanks for the announcement, Even! I wonder if we should track such issues
in a list? Or maybe give them a unique GitHub label?

We don't plan to release a 3.6.5, correct?

I'm going to make a Rasterio post release that patches 3.6.4 by tomorrow:
https://github.com/rasterio/rasterio/issues/2943.

On Mon, Oct 16, 2023 at 9:26?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

>
> Le 16/10/2023 ? 17:14, Kurt Schwehr a ?crit :
>
> Thanks for the heads up!
>
> Can you share that SHAs of the fix and cause?
>
> master: d083af1ec9c38e79bfb0532885570de6e5b8a410
>
> 3.7 branch (should apply to 3.6 as well):
> b5858ed5bc5004c97f7cd6000674015bdc70b33b
>
> cause: a worker thread of the multithreaded decoding could, in a situation
> where the block cache is full, cause a "dirty" (ie modified but not yet
> serialized to disk) block to be written, resulting in either a deadlock
> between the lock of the multithreaded decoder and the lock of the job queue
> mechanism, or other decoding threads could see their file handle being
> seek() by another thread.  In short: multithreading is hard.
>
>
> On Mon, Oct 16, 2023, 7:44?AM Even Rouault via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>> Hi,
>>
>> For GDAL 3.6.0 to 3.7.2, use of multi-threaded GTiff
>> compression+decompression, in particular within the same file, as for
>> example in a "gdalwarp -co COMPRESS=... -co NUM_THREADS=..." workflow
>> can lead to deadlocks (process stalled forever) and/or data corruption
>> (sometimes without errors at generation). Cf
>> https://github.com/OSGeo/gdal/issues/8470 for a reproducer. The fix is
>> in https://github.com/OSGeo/gdal/pull/8561
>>
>> The issue is particularly visible on Windows, or more generally any
>> operating system (or file system where the output file is located) which
>> has no VSIVirtualHandle::PRead() implementation, but it can also be
>> occasionally reproduced on Linux (at least as a deadlock).
>>
>> Even
>>
>>
-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231016/e36bc903/attachment.htm>

From schwehr at gmail.com  Mon Oct 16 09:12:52 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 16 Oct 2023 09:12:52 -0700
Subject: [gdal-dev] Notice: issue about multi-threaded GTiff
 compression+decompression
In-Reply-To: <56201823-3068-4a00-b9e6-27bf6ece867c@spatialys.com>
References: <443e5f45-5a0a-4069-80fa-9302195086a3@spatialys.com>
 <CACmBxyt+qQQzuyc6CWrK0CczueLDrq_Fc_OU_3M7zecq4DibdQ@mail.gmail.com>
 <56201823-3068-4a00-b9e6-27bf6ece867c@spatialys.com>
Message-ID: <CACmBxytWvoDrwqjjvQPUeFJv0mGXBgbbRbt5NCzL-okE+18VmQ@mail.gmail.com>

> In short: multithreading is hard

So true! With the introduction of tsan things are a little less bad, but
tsan is still a tool with plenty of false positives and false negatives.
And that assumes that a particular issue is covered by the tests being run
under tsan.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231016/147135d6/attachment.htm>

From howard at hobu.co  Mon Oct 16 12:59:42 2023
From: howard at hobu.co (Howard Butler)
Date: Mon, 16 Oct 2023 14:59:42 -0500
Subject: [gdal-dev] Motion: Annual Contracts for Maintainers
In-Reply-To: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
References: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
Message-ID: <1A494075-9912-4148-A8B0-EC3EDFC084CE@hobu.co>



> On Oct 11, 2023, at 11:13?AM, Howard Butler <howard at hobu.co> wrote:
> 
> PSC,
> 
> I'm a little late but I would like to make the following motions in regards to GDAL maintainers:
> 
> * Authorize Alessandro Pasotti for up to 30 hrs/month with a rate increase of 10 euros/hr until 30 NOV 2024.
> * Authorize Even Rouault for up to 90 hrs/month with a rate increase of 10 $/hr until 30 JUL 2024
> 
> Howard

Declaring this passed with +1s from Jukka, Frank, Kurt, Sean, and Javier.

Howard

From dmorissette at mapgears.com  Mon Oct 16 14:04:30 2023
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 16 Oct 2023 17:04:30 -0400
Subject: [gdal-dev] Motion: Annual Contracts for Maintainers
In-Reply-To: <1A494075-9912-4148-A8B0-EC3EDFC084CE@hobu.co>
References: <160C99FC-8641-4BB1-82FC-66672EA41126@hobu.co>
 <1A494075-9912-4148-A8B0-EC3EDFC084CE@hobu.co>
Message-ID: <09a9a021-5da1-45f5-8e18-ec9cdd37a3ed@mapgears.com>

For the record: Norman and Daniel also +1'd on October 11.


On 2023-10-16 15:59, Howard Butler via gdal-dev wrote:
> 
> 
>> On Oct 11, 2023, at 11:13?AM, Howard Butler <howard at hobu.co> wrote:
>>
>> PSC,
>>
>> I'm a little late but I would like to make the following motions in regards to GDAL maintainers:
>>
>> * Authorize Alessandro Pasotti for up to 30 hrs/month with a rate increase of 10 euros/hr until 30 NOV 2024.
>> * Authorize Even Rouault for up to 90 hrs/month with a rate increase of 10 $/hr until 30 JUL 2024
>>
>> Howard
> 
> Declaring this passed with +1s from Jukka, Frank, Kurt, Sean, and Javier.
> 
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201


From shayanghofrany at gmail.com  Tue Oct 17 08:52:11 2023
From: shayanghofrany at gmail.com (Shayan Ghofrany)
Date: Tue, 17 Oct 2023 11:52:11 -0400
Subject: [gdal-dev] GDALPolygonize fails with "failed to execute insert :
 disk I/O error"
Message-ID: <CA+-QNNh+kbcsE1LZAX5CoV=4Nh4XPjT3oyTnm2H2CU139HqvJg@mail.gmail.com>

I'm attempting to polygonize a GeoTIFF using the built-in GDALPolygonize,
but sometimes it fails to write to file. I'm not attempting any sort of
multi-threaded functionality so everything is running synchronously. Here
is the code I'm using to polygonize:
https://gist.github.com/Irantwomiles/c5f38b3e81fc3014be4e859048ad523f
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231017/8994cb6a/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Oct 17 09:45:21 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 17 Oct 2023 16:45:21 +0000
Subject: [gdal-dev] GDALPolygonize fails with "failed to execute insert
 : disk I/O error"
In-Reply-To: <CA+-QNNh+kbcsE1LZAX5CoV=4Nh4XPjT3oyTnm2H2CU139HqvJg@mail.gmail.com>
References: <CA+-QNNh+kbcsE1LZAX5CoV=4Nh4XPjT3oyTnm2H2CU139HqvJg@mail.gmail.com>
Message-ID: <AM0PR09MB3219B24779CFF5EFA5E93DF5FDD6A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

I believe that the i/o error is something that comes from SQLite. Does error happen if you save into other formats like shapefile flatgeobuf, or parquet? In what kind of file system the new geopackage is? What journal mode do you use? Is "pragma synchronous" on or off?

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Shayan Ghofrany via gdal-dev
L?hetetty: tiistai 17. lokakuuta 2023 18.52
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] GDALPolygonize fails with "failed to execute insert : disk I/O error"

I'm attempting to polygonize a GeoTIFF using the built-in GDALPolygonize, but sometimes it fails to write to file. I'm not attempting any sort of multi-threaded functionality so everything is running synchronously. Here is the code I'm using to polygonize: https://gist.github.com/Irantwomiles/c5f38b3e81fc3014be4e859048ad523f
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231017/6b45943c/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Oct 17 11:09:12 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 17 Oct 2023 18:09:12 +0000
Subject: [gdal-dev] GDALPolygonize fails with "failed to execute insert
 : disk I/O error"
In-Reply-To: <CA+-QNNiXw7Z2FEdbymnM5VLy9aczQWPuCAUztyffHD1aon3V0g@mail.gmail.com>
References: <CA+-QNNh+kbcsE1LZAX5CoV=4Nh4XPjT3oyTnm2H2CU139HqvJg@mail.gmail.com>
 <AM0PR09MB3219B24779CFF5EFA5E93DF5FDD6A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CA+-QNNiXw7Z2FEdbymnM5VLy9aczQWPuCAUztyffHD1aon3V0g@mail.gmail.com>
Message-ID: <AM0PR09MB3219122100670AA54885C88DFDD6A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

SQLite is known to have problems with network disks (NFS) but that is not your case. But maybe WSL can have same kind of problems, at least there has been some https://github.com/microsoft/WSL/issues/2395.

I would try to run the program on true Linux or true Windows and see if the issue happens to go away.

-Jukka Rahkonen-

L?hett?j?: Shayan Ghofrany <shayanghofrany at gmail.com>
L?hetetty: tiistai 17. lokakuuta 2023 19.57
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Aihe: Re: [gdal-dev] GDALPolygonize fails with "failed to execute insert : disk I/O error"

Thanks for the response,

I've had this issue also with Shapefiles, but haven't tested the other formats you mentioned. I am not sure what you mean by what kind of file system I'm using, my program is being run on Windows Subsystem for Linux. I'm not familiar with journal mode or pragma synchronous, so it's most likely the default option.

Shayan G.

On Tue, Oct 17, 2023 at 12:45?PM Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi,

I believe that the i/o error is something that comes from SQLite. Does error happen if you save into other formats like shapefile flatgeobuf, or parquet? In what kind of file system the new geopackage is? What journal mode do you use? Is ?pragma synchronous? on or off?

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Shayan Ghofrany via gdal-dev
L?hetetty: tiistai 17. lokakuuta 2023 18.52
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] GDALPolygonize fails with "failed to execute insert : disk I/O error"

I'm attempting to polygonize a GeoTIFF using the built-in GDALPolygonize, but sometimes it fails to write to file. I'm not attempting any sort of multi-threaded functionality so everything is running synchronously. Here is the code I'm using to polygonize: https://gist.github.com/Irantwomiles/c5f38b3e81fc3014be4e859048ad523f
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231017/955eaef5/attachment-0001.htm>

From j1 at jimenezshaw.com  Fri Oct 20 01:00:54 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 20 Oct 2023 10:00:54 +0200
Subject: [gdal-dev] Happy Birthday GDAL!
Message-ID: <CADRrdKt0uFLkYZDc4LXqa=5XfjAGDkm+x98b+Lg==BWuuYp73w@mail.gmail.com>

GDAL got 25 years old on 2023-10-17 !
I found it in this post
https://geoobserver.wordpress.com/2023/10/17/25-jahre-gdal-happy-birthday/
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231020/efe9bafb/attachment.htm>

From a.pau at creaf.uab.cat  Fri Oct 20 01:38:09 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Fri, 20 Oct 2023 08:38:09 +0000
Subject: [gdal-dev] Happy Birthday GDAL!
In-Reply-To: <CADRrdKt0uFLkYZDc4LXqa=5XfjAGDkm+x98b+Lg==BWuuYp73w@mail.gmail.com>
References: <CADRrdKt0uFLkYZDc4LXqa=5XfjAGDkm+x98b+Lg==BWuuYp73w@mail.gmail.com>
Message-ID: <AS8PR07MB8168A82C7D08B47AA26C3A32A2DBA@AS8PR07MB8168.eurprd07.prod.outlook.com>

Happy birthday, people!!!

De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Javier Jimenez Shaw via gdal-dev
Enviado el: divendres, 20 d?octubre de 2023 10:01
Para: gdal dev <gdal-dev at lists.osgeo.org>
Asunto: [gdal-dev] Happy Birthday GDAL!

GDAL got 25 years old on 2023-10-17 !
I found it in this post https://geoobserver.wordpress.com/2023/10/17/25-jahre-gdal-happy-birthday/
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231020/123c2ff1/attachment.htm>

From raghav.singh at eagleview.com  Fri Oct 20 09:52:55 2023
From: raghav.singh at eagleview.com (Raghav Singh)
Date: Fri, 20 Oct 2023 16:52:55 +0000
Subject: [gdal-dev] WMS layer issue at higher zoom level
In-Reply-To: <SA1PR20MB61213EBA99C6108CA013C4DD8CCBA@SA1PR20MB6121.namprd20.prod.outlook.com>
References: <SA1PR20MB61213EBA99C6108CA013C4DD8CCBA@SA1PR20MB6121.namprd20.prod.outlook.com>
Message-ID: <SA1PR20MB612105D2B8C411894C8BA55D8CDBA@SA1PR20MB6121.namprd20.prod.outlook.com>

I ran mapserver locally ran the specific wms request locally so getting this error - Assertion failed: (MS_RENDERER_RAWDATA(image->format) || (MS_RENDERER_PLUGIN(image->format) && rb)), function msDrawRasterLayerGDAL, file mapdrawgdal.c, line 126.
Abort trap: 6
Any idea regarding this?

and in logs it's coming like this -

Fri Oct 20 21:56:56 2023].137990 msDrawMap(): rendering using outputformat named mypng (AGG/PNG).

[Fri Oct 20 21:56:56 2023].138020 msDrawMap(): WMS/WFS set-up and query, 0.000s

[Fri Oct 20 21:56:56 2023].198332 msDrawRasterLayerLow(PICT-INHEND19-psQwiZ1L4t): entering.

[Fri Oct 20 21:56:58 2023].803667 msDrawRasterLayerLow(PICT-INHEND19-psQwiZ1L4t): entering.

[Fri Oct 20 22:10:13 2023].219765 drawGDAL() error coming from here: Unable to access file. GDALDatasetRasterIO() failed: IReadBlock failed at X offset 497, Y offset 740: GDALWMS: Unable to download block 497, 740.



________________________________
From: Raghav Singh
Sent: 04 October 2023 11:09
To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: WMS layer issue at higher zoom level

Hi,

I am trying to get a layer from wms and at higher zoom levels I am getting this error - msDrawMap(): Image handling error. Failed to draw layer named 'PICT-INHEND19-psQwiZ1L4t'. drawGDAL(): Unable to access file. GDALDatasetRasterIO() failed: /tmp/mapfilePassthru-v2-temp-HxmyxI, band 1: IReadBlock failed at X offset 1064, Y offset 1551.

So, for this I checked from the imageservice side the mapfile is being created correctly and it is also present there and the mapfile contains a gserve request for getting the tiles - that is also working fine. So getting this error from mapserver only and tried to put debug level 5 and other things also in the mapfile but couldn't get any other error, only this is coming. So need help in this if anybody knows what exactly is this and i can i debug mapserver locally if i want to then i can figure out the exact point where the error is coming from.

Thanks,
Raghav Singh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231020/eb837176/attachment-0001.htm>

From pschmitt at gmail.com  Fri Oct 20 10:33:24 2023
From: pschmitt at gmail.com (Peter Schmitt)
Date: Fri, 20 Oct 2023 11:33:24 -0600
Subject: [gdal-dev] WMS layer issue at higher zoom level
In-Reply-To: <SA1PR20MB612105D2B8C411894C8BA55D8CDBA@SA1PR20MB6121.namprd20.prod.outlook.com>
References: <SA1PR20MB61213EBA99C6108CA013C4DD8CCBA@SA1PR20MB6121.namprd20.prod.outlook.com>
 <SA1PR20MB612105D2B8C411894C8BA55D8CDBA@SA1PR20MB6121.namprd20.prod.outlook.com>
Message-ID: <CACkcqcUTvo6_eUaZB58whGVF5ppMt3njPpfWTAn3YcLc2G7bOA@mail.gmail.com>

If you know the querystring that generated the failure you could run even
more verbose logging on the command line. Something like:

env CPL_DEBUG=ON CPL_TIMESTAMP=ON MS_DEBUGLEVEL=5 MS_ERRORFILE=/dev/stderr
mapserv
QUERY_STRING='SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&WIDTH=256&HEIGHT=256&....'


and maybe you could copy the image locally and try something like

gdal_translate -tr 256 256 -projwin ulx uly lrx lry in.tif out.tif


to glean more information.  It's possible the input image (or an overview
within the image) is corrupted in some way.  If it turns out an overview is
corrupted, you could try regenerating it with gdaladdo?


On Fri, Oct 20, 2023 at 10:53?AM Raghav Singh via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> I ran mapserver locally ran the specific wms request locally so getting
> this error - Assertion failed: (MS_RENDERER_RAWDATA(image->format) ||
> (MS_RENDERER_PLUGIN(image->format) && rb)), function msDrawRasterLayerGDAL,
> file mapdrawgdal.c, line 126.
> Abort trap: 6
> Any idea regarding this?
>
> and in logs it's coming like this -
>
> Fri Oct 20 21:56:56 2023].137990 msDrawMap(): rendering using outputformat
> named mypng (AGG/PNG).
>
> [Fri Oct 20 21:56:56 2023].138020 msDrawMap(): WMS/WFS set-up and query,
> 0.000s
>
> [Fri Oct 20 21:56:56 2023].198332
> msDrawRasterLayerLow(PICT-INHEND19-psQwiZ1L4t): entering.
>
> [Fri Oct 20 21:56:58 2023].803667
> msDrawRasterLayerLow(PICT-INHEND19-psQwiZ1L4t): entering.
>
> [Fri Oct 20 22:10:13 2023].219765 drawGDAL() error coming from here:
> Unable to access file. GDALDatasetRasterIO() failed: IReadBlock failed at X
> offset 497, Y offset 740: GDALWMS: Unable to download block 497, 740.
>
>
>
> ------------------------------
> *From:* Raghav Singh
> *Sent:* 04 October 2023 11:09
> *To:* gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
> *Subject:* WMS layer issue at higher zoom level
>
> Hi,
>
> I am trying to get a layer from wms and at higher zoom levels I am getting
> this error - msDrawMap(): Image handling error. Failed to draw layer
> named 'PICT-INHEND19-psQwiZ1L4t'. drawGDAL(): Unable to access file.
> GDALDatasetRasterIO() failed: /tmp/mapfilePassthru-v2-temp-HxmyxI, band 1:
> IReadBlock failed at X offset 1064, Y offset 1551.
>
> So, for this I checked from the imageservice side the mapfile is being
> created correctly and it is also present there and the mapfile contains a
> gserve request for getting the tiles - that is also working fine. So
> getting this error from mapserver only and tried to put debug level 5 and
> other things also in the mapfile but couldn't get any other error, only
> this is coming. So need help in this if anybody knows what exactly is this
> and i can i debug mapserver locally if i want to then i can figure out the
> exact point where the error is coming from.
>
> Thanks,
> Raghav Singh
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Pete
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231020/258fc3ea/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Oct 20 12:04:48 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 20 Oct 2023 19:04:48 +0000
Subject: [gdal-dev] WMS layer issue at higher zoom level
In-Reply-To: <CACkcqcUTvo6_eUaZB58whGVF5ppMt3njPpfWTAn3YcLc2G7bOA@mail.gmail.com>
References: <SA1PR20MB61213EBA99C6108CA013C4DD8CCBA@SA1PR20MB6121.namprd20.prod.outlook.com>
 <SA1PR20MB612105D2B8C411894C8BA55D8CDBA@SA1PR20MB6121.namprd20.prod.outlook.com>
 <CACkcqcUTvo6_eUaZB58whGVF5ppMt3njPpfWTAn3YcLc2G7bOA@mail.gmail.com>
Message-ID: <AM0PR09MB321931424DD555B0CD49AB0AFDDBA@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Do you have another WMS server as a source for this layer? The error message that you have this time suggests so: ?GDALWMS: Unable to download block 497, 740.? If that is the case, do you admin also the remote WMS?

-Jukka Rahkonen-



L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Peter Schmitt via gdal-dev
L?hetetty: perjantai 20. lokakuuta 2023 20.33
Vastaanottaja: Raghav Singh <raghav.singh at eagleview.com>
Kopio: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] WMS layer issue at higher zoom level

If you know the querystring that generated the failure you could run even more verbose logging on the command line. Something like:

env CPL_DEBUG=ON CPL_TIMESTAMP=ON MS_DEBUGLEVEL=5 MS_ERRORFILE=/dev/stderr mapserv QUERY_STRING='SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&FORMAT=image/png&WIDTH=256&HEIGHT=256&....'

and maybe you could copy the image locally and try something like

gdal_translate -tr 256 256 -projwin ulx uly lrx lry in.tif out.tif

to glean more information.  It's possible the input image (or an overview within the image) is corrupted in some way.  If it turns out an overview is corrupted, you could try regenerating it with gdaladdo?


On Fri, Oct 20, 2023 at 10:53?AM Raghav Singh via gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:
I ran mapserver locally ran the specific wms request locally so getting this error - Assertion failed: (MS_RENDERER_RAWDATA(image->format) || (MS_RENDERER_PLUGIN(image->format) && rb)), function msDrawRasterLayerGDAL, file mapdrawgdal.c, line 126.
Abort trap: 6
Any idea regarding this?

and in logs it's coming like this -

Fri Oct 20 21:56:56 2023].137990 msDrawMap(): rendering using outputformat named mypng (AGG/PNG).

[Fri Oct 20 21:56:56 2023].138020 msDrawMap(): WMS/WFS set-up and query, 0.000s

[Fri Oct 20 21:56:56 2023].198332 msDrawRasterLayerLow(PICT-INHEND19-psQwiZ1L4t): entering.

[Fri Oct 20 21:56:58 2023].803667 msDrawRasterLayerLow(PICT-INHEND19-psQwiZ1L4t): entering.

[Fri Oct 20 22:10:13 2023].219765 drawGDAL() error coming from here: Unable to access file. GDALDatasetRasterIO() failed: IReadBlock failed at X offset 497, Y offset 740: GDALWMS: Unable to download block 497, 740.





________________________________
From: Raghav Singh
Sent: 04 October 2023 11:09
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: WMS layer issue at higher zoom level

Hi,

I am trying to get a layer from wms and at higher zoom levels I am getting this error - msDrawMap(): Image handling error. Failed to draw layer named 'PICT-INHEND19-psQwiZ1L4t'. drawGDAL(): Unable to access file. GDALDatasetRasterIO() failed: /tmp/mapfilePassthru-v2-temp-HxmyxI, band 1: IReadBlock failed at X offset 1064, Y offset 1551.

So, for this I checked from the imageservice side the mapfile is being created correctly and it is also present there and the mapfile contains a gserve request for getting the tiles - that is also working fine. So getting this error from mapserver only and tried to put debug level 5 and other things also in the mapfile but couldn't get any other error, only this is coming. So need help in this if anybody knows what exactly is this and i can i debug mapserver locally if i want to then i can figure out the exact point where the error is coming from.

Thanks,
Raghav Singh
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
Pete
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231020/a19404dd/attachment.htm>

From matthias at loeks.net  Wed Oct 25 02:40:51 2023
From: matthias at loeks.net (Matthias Loeks)
Date: Wed, 25 Oct 2023 11:40:51 +0200
Subject: [gdal-dev] Driver for ISOXML format
Message-ID: <2fb619f2-0044-4b0f-809e-3ec0b6c21dc5@loeks.net>

Hello all,

apologies if this has been asked before - I couldn't find anything, but 
might have missed past messages.

Does anyone know if someone ever considered implementing a *GDAL driver 
for the ISOXML format* used in Digital Agriculture / Precision Farming?

It would be very useful to support it in GDAL, so both GIS software and 
Farm Management Information Systems (FMIS) could much more easily 
integrate it, offering read/write support.

To my knowledge, there is no standardized support for this as of today. 
However, even though ISOXML has been around for a while, it is an 
established industry standard, and widely used throghout the growing 
Smart Farming community.

I am a software engineer and would be willing to work on a driver, even 
though I'm not familiar with GDAL core code at all so far. Anyone who 
would be interested in joining? My employer might offer options for funding.

Many thanks for your input!

Best regards,
Matthias

--

Further reading

. https://www.iso.org/standard/61581.html
. https://www.isobus.net/isobus/
. https://www.dev4agriculture.de/en/isoxml-library/
. 
https://gis.stackexchange.com/questions/354092/converting-geojson-to-isoxml-isobus-iso-11783-10
. https://github.com/aparshin/isoxml-visualization
. https://adaptframework.org/ (working on standardizing agricultural 
data flows)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231025/0beb3113/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Oct 25 02:57:27 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 25 Oct 2023 09:57:27 +0000
Subject: [gdal-dev] Driver for ISOXML format
In-Reply-To: <2fb619f2-0044-4b0f-809e-3ec0b6c21dc5@loeks.net>
References: <2fb619f2-0044-4b0f-809e-3ec0b6c21dc5@loeks.net>
Message-ID: <AM0PR09MB3219B8EE204F1F83871CD6A6FDDEA@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Because it is XML I would first try what the GMLAS driver https://gdal.org/drivers/vector/gmlas.htmlcan can get out of it.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Matthias Loeks via gdal-dev
L?hetetty: keskiviikko 25. lokakuuta 2023 12.41
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Driver for ISOXML format


Hello all,

apologies if this has been asked before - I couldn't find anything, but might have missed past messages.

Does anyone know if someone ever considered implementing a GDAL driver for the ISOXML format used in Digital Agriculture / Precision Farming?

It would be very useful to support it in GDAL, so both GIS software and Farm Management Information Systems (FMIS) could much more easily integrate it, offering read/write support.

To my knowledge, there is no standardized support for this as of today. However, even though ISOXML has been around for a while, it is an established industry standard, and widely used throghout the growing Smart Farming community.

I am a software engineer and would be willing to work on a driver, even though I'm not familiar with GDAL core code at all so far. Anyone who would be interested in joining? My employer might offer options for funding.

Many thanks for your input!

Best regards,
Matthias

--

Further reading

. https://www.iso.org/standard/61581.html
. https://www.isobus.net/isobus/
. https://www.dev4agriculture.de/en/isoxml-library/
. https://gis.stackexchange.com/questions/354092/converting-geojson-to-isoxml-isobus-iso-11783-10
. https://github.com/aparshin/isoxml-visualization
. https://adaptframework.org/ (working on standardizing agricultural data flows)


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231025/7729e490/attachment.htm>

From andreas.oxenstierna at t-kartor.com  Wed Oct 25 03:23:12 2023
From: andreas.oxenstierna at t-kartor.com (Andreas Oxenstierna)
Date: Wed, 25 Oct 2023 10:23:12 +0000
Subject: [gdal-dev] Driver for ISOXML format
In-Reply-To: <AM0PR09MB3219B8EE204F1F83871CD6A6FDDEA@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <2fb619f2-0044-4b0f-809e-3ec0b6c21dc5@loeks.net>
 <AM0PR09MB3219B8EE204F1F83871CD6A6FDDEA@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <602e7722-ae6f-4b0e-9e27-02ed1d4c8e23@Spark>

Hello

I fully agree with the use case.
Note though that many of the content types are vendor-specific as defined in the ISO11783 ISO 11783-11 online data base.

ISOXML is a major misnomer as the data is binary.
There is a QGIS plugin GeoDataFarm which may be used as a starting point.

Best Regards / V?nliga h?lsningar

Andreas Oxenstierna
Senior Strategic Advisor

+46 733 206 831<tel:%20+46733206831>
andreas.oxenstierna at t-kartor.com<mailto:andreas.oxenstierna at t-kartor.com>
connect on Linkedin<https://www.linkedin.com/in/andreas-oxenstierna-52876325/>

[cid:996E14871A0B48E6A28ECE0A1CF8F355]
T-Kartor Geospatial AB
Olof Mohlins v?g 12
291 62 Kristianstad

<www.t-kartor.com>
t-kartor.com<www.t-kartor.com>
+46 44 206 800<tel:%20+4644206800>
info at t-kartor.com<mailto:info at t-kartor.com>
This e-mail is private and confidential between the sender and the addressee. In the event of misdirection, the recipient is prohibited from using, copying or disseminating it or any information in it. Please notify the above of any such misdirection.
On 25 Oct 2023, 11:57 +0200, Rahkonen Jukka via gdal-dev <gdal-dev at lists.osgeo.org>, wrote:
Hi,

Because it is XML I would first try what the GMLAS driver https://gdal.org/drivers/vector/gmlas.htmlcan can get out of it.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Matthias Loeks via gdal-dev
L?hetetty: keskiviikko 25. lokakuuta 2023 12.41
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Driver for ISOXML format


Hello all,

apologies if this has been asked before - I couldn't find anything, but might have missed past messages.

Does anyone know if someone ever considered implementing a GDAL driver for the ISOXML format used in Digital Agriculture / Precision Farming?

It would be very useful to support it in GDAL, so both GIS software and Farm Management Information Systems (FMIS) could much more easily integrate it, offering read/write support.

To my knowledge, there is no standardized support for this as of today. However, even though ISOXML has been around for a while, it is an established industry standard, and widely used throghout the growing Smart Farming community.

I am a software engineer and would be willing to work on a driver, even though I'm not familiar with GDAL core code at all so far. Anyone who would be interested in joining? My employer might offer options for funding.

Many thanks for your input!

Best regards,
Matthias

--

Further reading

. https://www.iso.org/standard/61581.html
. https://www.isobus.net/isobus/
. https://www.dev4agriculture.de/en/isoxml-library/
. https://gis.stackexchange.com/questions/354092/converting-geojson-to-isoxml-isobus-iso-11783-10
. https://github.com/aparshin/isoxml-visualization
. https://adaptframework.org/ (working on standardizing agricultural data flows)


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231025/cfc2f039/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 996E14871A0B48E6A28ECE0A1CF8F355.png
Type: image/png
Size: 3748 bytes
Desc: 996E14871A0B48E6A28ECE0A1CF8F355.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231025/cfc2f039/attachment-0001.png>

From mandeepsinghkalra at gmail.com  Wed Oct 25 10:36:27 2023
From: mandeepsinghkalra at gmail.com (Mandeep Singh)
Date: Wed, 25 Oct 2023 23:06:27 +0530
Subject: [gdal-dev] Fwd: Issue with linebreaks (PDF)
In-Reply-To: <CAAho42YiFn=01TqVsdavFGoQcBu1SvOZbw=7b7mvLyStUfHCrw@mail.gmail.com>
References: <CAAho42YiFn=01TqVsdavFGoQcBu1SvOZbw=7b7mvLyStUfHCrw@mail.gmail.com>
Message-ID: <CAAho42Zpp43pQpLrnmmYjFO8QDMSBMg3w+KRiQRXuAgsM4L5bA@mail.gmail.com>

Hi Team,

I am trying to create a GeoSpatial PDF using gdal_translate.

Using the vrt file i am able to generate OGRFeatures having STYLE

OGRFeature():23 OGR_STYLE (String) =
SYMBOL(id:"icn_cabinet_external.png",s:0);LABEL(f:"Arial, Helvetica",
c:#FF0000, bo:1, m:w, dp:1px, p:10, dx:-10, dy:10, s:10px, t:{label})

My requirement is to put a linebreak in the label for which i tried adding
\n but it doesn't seems to work. LABEL (String) = FIRST PART \n SECOND PART

Does GDAL PDF driver supports writing line breaks to PDF ?



Regards

Mandeep
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231025/3101637c/attachment.htm>

From j1 at jimenezshaw.com  Thu Oct 26 02:59:07 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 26 Oct 2023 11:59:07 +0200
Subject: [gdal-dev] Tag for units in GeoTIFF
Message-ID: <CADRrdKtS5yee0iC8Rdj+O5O5UJbzKuVb=ig7kczpzs-+jJ0SiA@mail.gmail.com>

Hi

Using a GeoTIFF with a single band and float values can be very useful to
show any distribution over the terrain. One typical example is DSM (digital
surface model), where the value is the elevation on every point.

Is there any standard (or accepted) metadata to say the units of those
values?

In the typical case of DSM it is usually "meter" or "foot". But it can be
something else, like "people/km2" for population, or "mm" for rain
precipitation, or "kg/ha" for agricultural yield.

Thanks
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231026/661c18ad/attachment.htm>

From even.rouault at spatialys.com  Thu Oct 26 03:27:24 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Oct 2023 12:27:24 +0200
Subject: [gdal-dev] Tag for units in GeoTIFF
In-Reply-To: <CADRrdKtS5yee0iC8Rdj+O5O5UJbzKuVb=ig7kczpzs-+jJ0SiA@mail.gmail.com>
References: <CADRrdKtS5yee0iC8Rdj+O5O5UJbzKuVb=ig7kczpzs-+jJ0SiA@mail.gmail.com>
Message-ID: <33acd7fd-1fb8-4ac9-a7af-ec66ca14c987@spatialys.com>

Javier,

Le 26/10/2023 ? 11:59, Javier Jimenez Shaw via gdal-dev a ?crit?:
> Hi
>
> Using a GeoTIFF with a single band and float values can be very useful 
> to show any distribution over the terrain. One typical example is DSM 
> (digital surface model), where the value is the elevation on every point.
>
> Is there any standard (or accepted) metadata to say the units of those 
> values?

API wise in GDAL, you should use the GDALRasterBand::SetUnitType() to 
set the unit

For TIFF, this will be encoded in the GDAL_METADATA TIFF tag like the 
following:

<GDALMetadata>
 ? <Item name="UNITTYPE" sample="0" role="unittype">foo</Item>
</GDALMetadata>

Regarding the value itself, it is mostly unspecified by GDAL. It could 
be a good practice to suggest to use strings recognized by the "udunits" 
package (when possible), like done in the netCDF CF conventions 
(http://cfconventions.org/Data/cf-conventions/cf-conventions-1.10/cf-conventions.html#units)

Even

>
> In the typical case of DSM it is usually "meter" or "foot". But it can 
> be something else, like "people/km2" for population, or "mm" for rain 
> precipitation, or "kg/ha" for agricultural yield.
>
> Thanks
> .___ ._ ..._ .. . ._.? .___ .. __ . _. . __..? ... .... ._ .__
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231026/8c4b01c3/attachment.htm>

From j1 at jimenezshaw.com  Thu Oct 26 04:45:43 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 26 Oct 2023 13:45:43 +0200
Subject: [gdal-dev] Tag for units in GeoTIFF
In-Reply-To: <33acd7fd-1fb8-4ac9-a7af-ec66ca14c987@spatialys.com>
References: <CADRrdKtS5yee0iC8Rdj+O5O5UJbzKuVb=ig7kczpzs-+jJ0SiA@mail.gmail.com>
 <33acd7fd-1fb8-4ac9-a7af-ec66ca14c987@spatialys.com>
Message-ID: <CADRrdKvdsno289aTrDH+qjrNeZTzuEfDaaUpUMJesJWtBbkrUw@mail.gmail.com>

Thanks!

On Thu, 26 Oct 2023 at 12:27, Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Javier,
> Le 26/10/2023 ? 11:59, Javier Jimenez Shaw via gdal-dev a ?crit :
>
> Hi
>
> Using a GeoTIFF with a single band and float values can be very useful to
> show any distribution over the terrain. One typical example is DSM (digital
> surface model), where the value is the elevation on every point.
>
> Is there any standard (or accepted) metadata to say the units of those
> values?
>
> API wise in GDAL, you should use the GDALRasterBand::SetUnitType() to set
> the unit
>
> For TIFF, this will be encoded in the GDAL_METADATA TIFF tag like the
> following:
>
> <GDALMetadata>
>   <Item name="UNITTYPE" sample="0" role="unittype">foo</Item>
> </GDALMetadata>
>
> Regarding the value itself, it is mostly unspecified by GDAL. It could be
> a good practice to suggest to use strings recognized by the "udunits"
> package (when possible), like done in the netCDF CF conventions (
> http://cfconventions.org/Data/cf-conventions/cf-conventions-1.10/cf-conventions.html#units
> )
>
> Even
>
>
> In the typical case of DSM it is usually "meter" or "foot". But it can be
> something else, like "people/km2" for population, or "mm" for rain
> precipitation, or "kg/ha" for agricultural yield.
>
> Thanks
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231026/7674d948/attachment.htm>

From dshean at gmail.com  Thu Oct 26 09:50:56 2023
From: dshean at gmail.com (David Shean)
Date: Thu, 26 Oct 2023 09:50:56 -0700
Subject: [gdal-dev] Tag for units in GeoTIFF
In-Reply-To: <CADRrdKvdsno289aTrDH+qjrNeZTzuEfDaaUpUMJesJWtBbkrUw@mail.gmail.com>
References: <CADRrdKtS5yee0iC8Rdj+O5O5UJbzKuVb=ig7kczpzs-+jJ0SiA@mail.gmail.com>
 <33acd7fd-1fb8-4ac9-a7af-ec66ca14c987@spatialys.com>
 <CADRrdKvdsno289aTrDH+qjrNeZTzuEfDaaUpUMJesJWtBbkrUw@mail.gmail.com>
Message-ID: <EC3F0AEF-7860-43B5-BA45-DB017A6E1167@gmail.com>

Hi Even and Javier,
For the special case of a DEM, would it make more sense to specify the units with a vertical CRS?  This approach would define the LENGTHUNIT and the associated vertical datum.

Example for EPSG:4979:

        AXIS["ellipsoidal height (h)",up,
            ORDER[3],
            LENGTHUNIT["metre",1]],

Example for EPSG:5703:

VERTCRS["NAVD88 height",
    VDATUM["North American Vertical Datum 1988"],
    CS[vertical,1],
        AXIS["gravity-related height (H)",up,
            LENGTHUNIT["metre",1]],
...

More complicated than specifying the generic UNITTYPE in raster metadata, but seems like best practice.
-David


> On Oct 26, 2023, at 4:45 AM, Javier Jimenez Shaw via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> Thanks!
> 
> On Thu, 26 Oct 2023 at 12:27, Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>> wrote:
> Javier,
> 
> Le 26/10/2023 ? 11:59, Javier Jimenez Shaw via gdal-dev a ?crit :
>> Hi
>> 
>> Using a GeoTIFF with a single band and float values can be very useful to show any distribution over the terrain. One typical example is DSM (digital surface model), where the value is the elevation on every point.
>> 
>> Is there any standard (or accepted) metadata to say the units of those values?
> API wise in GDAL, you should use the GDALRasterBand::SetUnitType() to set the unit
> 
> For TIFF, this will be encoded in the GDAL_METADATA TIFF tag like the following:
> 
> <GDALMetadata>
>   <Item name="UNITTYPE" sample="0" role="unittype">foo</Item>
> </GDALMetadata>
> 
> Regarding the value itself, it is mostly unspecified by GDAL. It could be a good practice to suggest to use strings recognized by the "udunits" package (when possible), like done in the netCDF CF conventions (http://cfconventions.org/Data/cf-conventions/cf-conventions-1.10/cf-conventions.html#units <http://cfconventions.org/Data/cf-conventions/cf-conventions-1.10/cf-conventions.html#units>)
> 
> Even
> 
>> 
>> In the typical case of DSM it is usually "meter" or "foot". But it can be something else, like "people/km2" for population, or "mm" for rain precipitation, or "kg/ha" for agricultural yield.
>> 
>> Thanks
>> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> -- 
> http://www.spatialys.com <http://www.spatialys.com/>
> My software is free, but my time generally not.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231026/22805be2/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Oct 26 10:10:23 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Oct 2023 19:10:23 +0200
Subject: [gdal-dev] Tag for units in GeoTIFF
In-Reply-To: <EC3F0AEF-7860-43B5-BA45-DB017A6E1167@gmail.com>
References: <CADRrdKtS5yee0iC8Rdj+O5O5UJbzKuVb=ig7kczpzs-+jJ0SiA@mail.gmail.com>
 <33acd7fd-1fb8-4ac9-a7af-ec66ca14c987@spatialys.com>
 <CADRrdKvdsno289aTrDH+qjrNeZTzuEfDaaUpUMJesJWtBbkrUw@mail.gmail.com>
 <EC3F0AEF-7860-43B5-BA45-DB017A6E1167@gmail.com>
Message-ID: <a27447da-6bd8-4af8-921a-1a83d495bd01@spatialys.com>


Le 26/10/2023 ? 18:50, David Shean a ?crit?:
> Hi Even and Javier,
> For the special case of a DEM, would it make more sense to specify the 
> units with a vertical CRS? ?This approach would define the LENGTHUNIT 
> and the associated vertical datum.
>
> Example for?EPSG:4979:
>
> ? ? ? ? AXIS["ellipsoidal height (h)",up,
> ? ? ? ? ? ? ORDER[3],
> ? ? ? ? ? ? LENGTHUNIT["metre",1]],
>
> Example for EPSG:5703:
>
> VERTCRS["NAVD88 height",
> ? ? VDATUM["North American Vertical Datum 1988"],
> ? ? CS[vertical,1],
> ? ? ? ? AXIS["gravity-related height (H)",up,
> ? ? ? ? ? ? LENGTHUNIT["metre",1]],
> ...
>
> More complicated than specifying the generic UNITTYPE in raster 
> metadata, but seems like best practice.

This is actually already implemented (deducing the value of 
GetUnitType() from the vertical component):

$ gdal_translate byte.tif out.tif -a_srs EPSG:4269+5703
$ gdalinfo out.tif | grep Unit
 ? Unit Type: foot

$ gdal_translate byte.tif out.tif -a_srs EPSG:4269+8228
$ gdalinfo out.tif | grep Unit
 ?? Unit Type: foot


> -David
>
>
>> On Oct 26, 2023, at 4:45 AM, Javier Jimenez Shaw via gdal-dev 
>> <gdal-dev at lists.osgeo.org> wrote:
>>
>> Thanks!
>>
>> On Thu, 26 Oct 2023 at 12:27, Even Rouault via gdal-dev 
>> <gdal-dev at lists.osgeo.org> wrote:
>>
>>     Javier,
>>
>>     Le 26/10/2023 ? 11:59, Javier Jimenez Shaw via gdal-dev a ?crit?:
>>>     Hi
>>>
>>>     Using a GeoTIFF with a single band and float values can be very
>>>     useful to show any distribution over the terrain. One typical
>>>     example is DSM (digital surface model), where the value is the
>>>     elevation on every point.
>>>
>>>     Is there any standard (or accepted) metadata to say the units of
>>>     those values?
>>
>>     API wise in GDAL, you should use the
>>     GDALRasterBand::SetUnitType() to set the unit
>>
>>     For TIFF, this will be encoded in the GDAL_METADATA TIFF tag like
>>     the following:
>>
>>     <GDALMetadata>
>>     ? <Item name="UNITTYPE" sample="0" role="unittype">foo</Item>
>>     </GDALMetadata>
>>
>>     Regarding the value itself, it is mostly unspecified by GDAL. It
>>     could be a good practice to suggest to use strings recognized by
>>     the "udunits" package (when possible), like done in the netCDF CF
>>     conventions
>>     (http://cfconventions.org/Data/cf-conventions/cf-conventions-1.10/cf-conventions.html#units)
>>
>>     Even
>>
>>>
>>>     In the typical case of DSM it is usually "meter" or "foot". But
>>>     it can be something else, like "people/km2" for population, or
>>>     "mm" for rain precipitation, or "kg/ha" for agricultural yield.
>>>
>>>     Thanks
>>>     .___ ._ ..._ .. . ._. .___ .. __ . _. . __..? ... .... ._ .__
>>>
>>>     _______________________________________________
>>>     gdal-dev mailing list
>>>     gdal-dev at lists.osgeo.org
>>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>     -- 
>>     http://www.spatialys.com
>>     My software is free, but my time generally not.
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231026/fe9f6a5c/attachment.htm>

From devdatta at tengshe.in  Thu Oct 26 21:23:22 2023
From: devdatta at tengshe.in (Devdatta Tengshe)
Date: Fri, 27 Oct 2023 09:53:22 +0530
Subject: [gdal-dev] How do I merge a semi-transparent hillshade and a colour
 rendered DSM for better Visualization?
Message-ID: <CAOQOUMsHQT0AZY46+33pjA0tnvgdKMaRKjU5eCsuMw10g3Sw9A@mail.gmail.com>

Hi all,

My objective is to Tile a DSM in GeoTiff format, so that it can be
overlayed on a OpenLayers Web Map.

A common technique in Desktop GIS is to give 10% Transparency to a Hilshade
and add it on top of a Colour rendered DEM. I want to do the same on the
command line.

I have managed to create the Hillshade and the Colour rendered DSM using
`gdaldem`.

I want to overlay these on top of each other, and create one GeoTiff, which
I can then feed into gdal2tiles.

How do I go about merging the hillshade and DSM into one, using GDAL on the
command lines?

The only link I found was this (
https://gis.stackexchange.com/questions/255537/merging-hillshade-dem-data-into-color-relief-single-geotiff-with-qgis-and-gdal
)

But using those commands gives me an output which looks nothing like the
output in QGIS when overlaying the two layers. (It gives me a Raster which
has lots of whites and greys, and very little of the Coloured DSM can be
seen)


Regards,
Devdatta
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231027/332a1037/attachment.htm>

From gdt at lexort.com  Sat Oct 28 05:17:17 2023
From: gdt at lexort.com (Greg Troxel)
Date: Sat, 28 Oct 2023 08:17:17 -0400
Subject: [gdal-dev] including higher-level library in GPX creator string
In-Reply-To: <69d8cc00-697e-4c40-bef1-33fa1d94dcf1@spatialys.com> (Even
 Rouault via gdal-dev's message of "Fri, 13 Oct 2023 18:33:27 +0200")
References: <rmi8r868z24.fsf@s1.lexort.com>
 <69d8cc00-697e-4c40-bef1-33fa1d94dcf1@spatialys.com>
Message-ID: <rmi7cn7q6uq.fsf@s1.lexort.com>

Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org> writes:

> Cf https://github.com/OSGeo/gdal/pull/8558: "GPX: add a CREATOR
> dataset creation option"

Thanks; long pause on my part to let this settle in my head.

> It will be of course up to the application / application user to set it.

I guess the really interesting question is what the appetite is for
using that, in terms of each user going to the effort to add a configure
test and ifdef.  My impression is that people looking at gpx files might
care, but most creator programs probably do not.  So if this is merged,
I don't really expect to see users adopt it.

> I've considered a global GDALSetDefaultCreatorApplication() (could be
> similar to CPLHTTPSetDefaultUserAgent():
> https://gdal.org/doxygen/cpl__http_8h.html#ae83c06d51089bb340ed0b98a6ed8d01d)
> so that an application could set a default for all formats that write
> a creator application, but this leads to introducing potential options
> to express "totally replace the GDAL version" vs "add my name in
> addition to the GDAL version",

That consideration seems to apply to GPX, too, and the PR chooses
"replace".  I would say we should not be afraid of arbitrary because
what we have now is arbitrary.

I lean to "include this string and the GDAL version both".  I don't see
why we should support "replace" which leads to the file not having the
GDAL version.  Hiding seems useful only for some kind of stealth
operation, to hide the version in use and hence the time, or something
that could be leveraged for an attack.  Or for vanity and trying not
give credit.  I don't think either need supporting; paranoid people can
postprocess or roll their own, and people avoiding crediting GDAL
shouldn't be helped.

> or "put application/version number only when required by the format"
> vs "put application/version wherever the format could allow it, but
> only if there's a standardized location to do so" vs "put
> application/version wherever the format could allow,

I lean to "place it in the format if it is reasonable to do so", and let
the judgements happen.  That's somewhere between the last two.  I don't
see why we should support "only if required".    We don't currently have
an option to "hide that this was created by GDAL".

> potentially it in a custom metadata item if there's no standardized
> location". e.g in netCDF, we have a custom attribute GDAL = "GDAL
> x.y.z, released YYYY/MM/DD" (it would not be appropriate to put the
> identification of the larger application in it, given the name of the
> attribute and the fact that GDAL itself parses it on reading to
> determine the bottom-up vs top-up orientaiton).

It seems easy enough to

  skip this format on the first pass, doing no harm compared to how
  things are now

  be open to a future PR that adds creator= with the string that would
  have been written if there weren't already a machine-readable GDAL
  code point

> So I've not pursued this given all those dilemmas :-)

I think that choosing to put in both higher-layer name and gdal version,
and making arbitrary reasonable choices is a significant improvement
over where we are.  I do not expect people to really want to have the
kind of optional control above.  All sorts of programs in all sorts of
formats emit this kind of label and they seem to get used by people
looking at random files they have, that they don't really know where
they came from, to help figure that out, and otherwise it isn't that
important.  I don't hear complaints about "I wish I could find tune
this".

I know I said I didn't expect users to adopt the GPX creator API call,
but I am more optimistic about a general one, since it gives more
benefit for the same work.

So I'm kind of -1 on just adding this for GPX, as it adds API complexity
without broadly addressing the goal.  I'm +1 on renaming the API to be
general instead of GPX, only having code for GPX for now, with the
output being something like

  "%s, GDAL %s",
    [arg passed to call],
    GDALVersionInfo("RELEASE_NAME")


(I should note that I have zero commercial interest in this; I'm just
here relaying a concern from the GPX community about creator in GPX, and
the rest is just my software/format architecture comments.)



From rayg at daylongraphics.com  Mon Oct 30 05:17:18 2023
From: rayg at daylongraphics.com (Ray at Daylon)
Date: Mon, 30 Oct 2023 05:17:18 -0700
Subject: [gdal-dev] TGA write support?
Message-ID: <2cf8dc71-155c-4c7a-bbac-bd4b30d3a7ad@daylongraphics.com>

Was reviewing the TGA (Targa) raster format driver and it seems it's 
read-only.

Is write support planned?

Ray

From even.rouault at spatialys.com  Mon Oct 30 09:15:44 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 30 Oct 2023 17:15:44 +0100
Subject: [gdal-dev] GDAL 3.7.3 RC1 available
Message-ID: <3178fe74-aa4b-4d34-9853-09946eb52cde@spatialys.com>

Hi,

I have prepared a GDAL/OGR 3.7.3 release candidate.

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.7.3/gdal-3.7.3rc1.tar.xz
 ? https://download.osgeo.org/gdal/3.7.3/gdal-3.7.3rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.7.3/gdal373rc1.zip

A snapshot of the gdalautotest suite is also available:

https://download.osgeo.org/gdal/3.7.3/gdalautotest-3.7.3rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.7.3/gdalautotest-3.7.3rc1.zip

The NEWS file is here:

 ? https://github.com/OSGeo/gdal/blob/v3.7.3RC1/NEWS.md

I'll call for a vote promoting it to final later this week if no
serious problems are reported before.

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From public at postholer.com  Mon Oct 30 10:11:54 2023
From: public at postholer.com (Scott)
Date: Mon, 30 Oct 2023 10:11:54 -0700
Subject: [gdal-dev] GDAL 3.7.3 RC1 available
In-Reply-To: <3178fe74-aa4b-4d34-9853-09946eb52cde@spatialys.com>
References: <3178fe74-aa4b-4d34-9853-09946eb52cde@spatialys.com>
Message-ID: <b2ff9b8f-bfa7-d392-16bb-c976742fc215@postholer.com>

Looking at the release notes did #8262 make it in?

https://github.com/OSGeo/gdal/pull/8262


On 10/30/23 09:15, Even Rouault via gdal-dev wrote:
> Hi,
> 
> I have prepared a GDAL/OGR 3.7.3 release candidate.
> 
> Pick up an archive among the following ones (by ascending size):
> 
>  ? https://download.osgeo.org/gdal/3.7.3/gdal-3.7.3rc1.tar.xz
>  ? https://download.osgeo.org/gdal/3.7.3/gdal-3.7.3rc1.tar.gz
>  ? https://download.osgeo.org/gdal/3.7.3/gdal373rc1.zip
> 
> A snapshot of the gdalautotest suite is also available:
> 
> https://download.osgeo.org/gdal/3.7.3/gdalautotest-3.7.3rc1.tar.gz
>  ? https://download.osgeo.org/gdal/3.7.3/gdalautotest-3.7.3rc1.zip
> 
> The NEWS file is here:
> 
>  ? https://github.com/OSGeo/gdal/blob/v3.7.3RC1/NEWS.md
> 
> I'll call for a vote promoting it to final later this week if no
> serious problems are reported before.
> 
> Best regards,
> 
> Even
> 

From even.rouault at spatialys.com  Mon Oct 30 10:13:10 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 30 Oct 2023 18:13:10 +0100
Subject: [gdal-dev] GDAL 3.7.3 RC1 available
In-Reply-To: <b2ff9b8f-bfa7-d392-16bb-c976742fc215@postholer.com>
References: <3178fe74-aa4b-4d34-9853-09946eb52cde@spatialys.com>
 <b2ff9b8f-bfa7-d392-16bb-c976742fc215@postholer.com>
Message-ID: <4c5d61c8-d046-4ecb-8540-c921897202ef@spatialys.com>


Le 30/10/2023 ? 18:11, Scott via gdal-dev a ?crit?:
> Looking at the release notes did #8262 make it in?
>
> https://github.com/OSGeo/gdal/pull/8262

no, this is 3.8.0 only material


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From Matt.Wilkie at yukon.ca  Mon Oct 30 12:38:56 2023
From: Matt.Wilkie at yukon.ca (Matt.Wilkie)
Date: Mon, 30 Oct 2023 19:38:56 +0000
Subject: [gdal-dev] [EXT]  Happy Birthday GDAL!
In-Reply-To: <CADRrdKt0uFLkYZDc4LXqa=5XfjAGDkm+x98b+Lg==BWuuYp73w@mail.gmail.com>
References: <CADRrdKt0uFLkYZDc4LXqa=5XfjAGDkm+x98b+Lg==BWuuYp73w@mail.gmail.com>
Message-ID: <YT3PR01MB5590CBA47850FD0C4F4A70D487A1A@YT3PR01MB5590.CANPRD01.PROD.OUTLOOK.COM>

Oh wow. Happy birthday gdal! And thank you Frank Warmerdam.

That means I've been using gdal for just over 20 years, though the oldest extant public record I could find is 2008 (ref<https://www.mail-archive.com/gdal-dev at lists.osgeo.org/msg00163.html>). This makes me feel old, in a good way.

Matt
Geomatics Developer and Administrator | Environment | T 867-667-8133 | Yukon.ca
Hours: 08:30-16:30, Mon-Wed: Office, Thu: Remote, Fri: Away.

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Javier Jimenez Shaw via gdal-dev
Sent: Friday, October 20, 2023 1:01 AM
To: gdal dev <gdal-dev at lists.osgeo.org>
Subject: [EXT] [gdal-dev] Happy Birthday GDAL!

GDAL got 25 years old on 2023-10-17 !
I found it in this post https://geoobserver.wordpress.com/2023/10/17/25-jahre-gdal-happy-birthday/
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231030/dbb2b855/attachment.htm>

From mauge.philippe at free.fr  Tue Oct 31 02:18:49 2023
From: mauge.philippe at free.fr (mauge.philippe at free.fr)
Date: Tue, 31 Oct 2023 10:18:49 +0100 (CET)
Subject: [gdal-dev] gif gfw and prj
Message-ID: <1783384441.1516226485.1698743929819.JavaMail.root@zimbra54-e10.priv.proxad.net>

Hi,
I have a gif file named img_5120000_244000.gif 

with a world file named img_5120000_244000.gfw that contains  :

25.000000
0.000000
0.000000
-25.000000
244000.000000
5120000.000000

and a prj file named a_datum.prj that contains :

Projection     UTM
Datum          WGS84
Zunits         NO
Units          METERS
Zone           32
Xshift         0.000000
Yshift         0.000000
Parameters

The 3 files are in the same folder.

When I open the gif file with GDAL using GDALOpen, GDAL doesn't read
the gfw and the prj files and there is no projection.
Is there a way to say to GDAL to read the gfw and the prj files ?

I have successfully loaded the file with Global Mapper that read the gfw and the prj files.

The gif file can be uploaded at :

https://pasteboard.co/G5tIWsZ8w7AC.gif

If you have any clue, please let me know.

Have a good day

Philippe

From jukka.rahkonen at maanmittauslaitos.fi  Tue Oct 31 03:04:26 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 31 Oct 2023 10:04:26 +0000
Subject: [gdal-dev] gif gfw and prj
In-Reply-To: <1783384441.1516226485.1698743929819.JavaMail.root@zimbra54-e10.priv.proxad.net>
References: <1783384441.1516226485.1698743929819.JavaMail.root@zimbra54-e10.priv.proxad.net>
Message-ID: <AM0PR09MB321952C2F9ED2C6A98E2F0F2FDA0A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

I made a quick test with some random .gif file from my computer and your world file and those two do find each other without problems. The format of a_datum.prj is not familiar to me. Maybe it is Global Mapper specific. Maybe you can just delete it and use the EPSG:32632 code instead in gdal_translate as -a_srs EPSG:32632.

gdalinfo gif.gif
Driver: BIGGIF/Graphics Interchange Format (.gif)
Files: gif.gif
       gif.gfw
Size is 12000, 12000
Origin = (243987.500000000000000,5120012.500000000000000)
Pixel Size = (25.000000000000000,-25.000000000000000)
Image Structure Metadata:
  INTERLACED=NO
Corner Coordinates:
Upper Left  (  243987.500, 5120012.500)
Lower Left  (  243987.500, 4820012.500)
Upper Right (  543987.500, 5120012.500)
Lower Right (  543987.500, 4820012.500)
Center      (  393987.500, 4970012.500)

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta mauge.philippe--- via gdal-dev
L?hetetty: tiistai 31. lokakuuta 2023 11.19
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] gif gfw and prj

Hi,
I have a gif file named img_5120000_244000.gif 

with a world file named img_5120000_244000.gfw that contains  :

25.000000
0.000000
0.000000
-25.000000
244000.000000
5120000.000000

and a prj file named a_datum.prj that contains :

Projection     UTM
Datum          WGS84
Zunits         NO
Units          METERS
Zone           32
Xshift         0.000000
Yshift         0.000000
Parameters

The 3 files are in the same folder.

When I open the gif file with GDAL using GDALOpen, GDAL doesn't read the gfw and the prj files and there is no projection.
Is there a way to say to GDAL to read the gfw and the prj files ?

I have successfully loaded the file with Global Mapper that read the gfw and the prj files.

The gif file can be uploaded at :
[link removed]

If you have any clue, please let me know.

Have a good day

Philippe
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org

From Roger.Bivand at nhh.no  Tue Oct 31 03:48:56 2023
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 31 Oct 2023 10:48:56 +0000
Subject: [gdal-dev] GDAL 3.7.3 RC1 available
Message-ID: <SV0P279MB0475188AE4A2F35F4C6C985EEEA0A@SV0P279MB0475.NORP279.PROD.OUTLOOK.COM>

3.7.3 RC1 OK for 630 R packages using GDAL through released versions of R packages  sf, terra, gdalcubes, gdalraster and/or vapour; no observed test failures related to GDAL. 

Roger

--
Roger Bivand
Emeritus Professor
Norwegian School of Economics
Postboks 3490 Ytre Sandviken, 5045 Bergen, Norway
Roger.Bivand at nhh.no

From even.rouault at spatialys.com  Tue Oct 31 07:33:10 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 31 Oct 2023 15:33:10 +0100
Subject: [gdal-dev] GDAL 3.8.0beta1 available for testing
Message-ID: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>

Hi,

I've prepared a beta1 of GDAL 3.8.0 to get feedback from earlier testers.

Sorry no updated NEWS.md file yet, but I'd in particular be interesting 
by testing of ogr2ogr workflows, since they have underwent significant 
changes in the underlying implementation:

- when the source layer is a layer implementing the ArrowStream API 
(that is? GeoPackage, FlatGeoBuf, Arrow or Parquet), and when no ogr2ogr 
options than -of, -where, -spat, -lco, -dsco, -gt, 
-append/-overwrite/-update are used (and -sql as well for GeoPackage). 
When enabling CPL_DEBUG, you'll see a "OGR2OGR: Using WriteArrowBatch()" 
trace when that new code path is taken. If specifying other options, the 
feature-iteration-based traditional implementation is used

- and/or when the output layer is GeoPackage (new layer), due to the 
revamped much faster spatial index creation.? This enhanced spatial 
index creation is not ogr2ogr specific and is actually available more 
generally for CreateLayer() + CreateFeature() or CreateLayer() + 
WriteArrowBatch() scenarios.

Point of attention would be when in situations with large files and/or 
with low RAM.

The ghcr.io/osgeo/gdal:ubuntu-small-latest, 
ghcr.io/osgeo/gdal:ubuntu-full-latest, 
ghcr.io/osgeo/gdal:alpine-normal-latest Docker images have been 
refreshed with 3.8.0beta1 (ghcr.io/osgeo/gdal:alpine-small-latest still 
building at time of writing).

(Note: the GDAL master conda builds mentioned at 
https://gdal.org/download.html#gdal-master-conda-builds have been broken 
for a couple weeks and are thus not usable to test beta1 currently. I'm 
investigating)

Source snapshots at:

- https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0beta1.tar.gz

- https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0beta1.tar.xz

- https://download.osgeo.org/gdal/3.8.0/gdal380beta1.zip

Autotest snapshots:

- https://download.osgeo.org/gdal/3.8.0/gdalautotest-3.8.0beta1.tar.gz

- https://download.osgeo.org/gdal/3.8.0/gdalautotest-3.8.0beta1.zip

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From lnicola at dend.ro  Tue Oct 31 07:55:02 2023
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Tue, 31 Oct 2023 16:55:02 +0200
Subject: [gdal-dev] GDAL 3.8.0beta1 available for testing
In-Reply-To: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
References: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
Message-ID: <082f0801-734e-459e-8f76-d6b0a637eccc@betaapp.fastmail.com>

Hi,

I know it doesn't mean much (with them being unofficial and pretty incomplete), but the Rust bindings appear to work well with both 3.7.3 rc1 and 3.8.0 beta1.

Laurentiu

On Tue, Oct 31, 2023, at 16:33, Even Rouault via gdal-dev wrote:
> Hi,
>
> I've prepared a beta1 of GDAL 3.8.0 to get feedback from earlier testers.

From jukka.rahkonen at maanmittauslaitos.fi  Tue Oct 31 09:36:53 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 31 Oct 2023 16:36:53 +0000
Subject: [gdal-dev] GDAL 3.8.0beta1 available for testing
In-Reply-To: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
References: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
Message-ID: <AM0PR09MB3219877BAD7C99524D38DC92FDA0A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

I made a simple test with ogr2ogr and geopackage to geopackage on Windows. With GDAL 3.8.0dev-3e4dc710a2 (no arrow, old R-Tree) the timing was 36 minutes, with GDAL 3.8.0dev-6bbd2c080a the same conversion took 21 minutes. The gpkg file is 75 GB, with 120 layers.

Could it be that the new R-Tree implementation does not print anything into debug? With older GDAL I see
GPKG: Creating insert/delete feature_count triggers
GPKG: 194505 rows inserted into rtree_virtausnuoli_geom
but with the brand new just
GPKG: Creating insert/delete feature_count triggers
GPKG: Creating insert/delete feature_count triggers

-Jukka Rahkonen-




-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
L?hetetty: tiistai 31. lokakuuta 2023 16.33
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] GDAL 3.8.0beta1 available for testing

Hi,

I've prepared a beta1 of GDAL 3.8.0 to get feedback from earlier testers.

Sorry no updated NEWS.md file yet, but I'd in particular be interesting by testing of ogr2ogr workflows, since they have underwent significant changes in the underlying implementation:

- when the source layer is a layer implementing the ArrowStream API (that is  GeoPackage, FlatGeoBuf, Arrow or Parquet), and when no ogr2ogr options than -of, -where, -spat, -lco, -dsco, -gt, -append/-overwrite/-update are used (and -sql as well for GeoPackage).
When enabling CPL_DEBUG, you'll see a "OGR2OGR: Using WriteArrowBatch()"
trace when that new code path is taken. If specifying other options, the feature-iteration-based traditional implementation is used

- and/or when the output layer is GeoPackage (new layer), due to the revamped much faster spatial index creation.  This enhanced spatial index creation is not ogr2ogr specific and is actually available more generally for CreateLayer() + CreateFeature() or CreateLayer() +
WriteArrowBatch() scenarios.

Point of attention would be when in situations with large files and/or with low RAM.

The ghcr.io/osgeo/gdal:ubuntu-small-latest,
ghcr.io/osgeo/gdal:ubuntu-full-latest,
ghcr.io/osgeo/gdal:alpine-normal-latest Docker images have been refreshed with 3.8.0beta1 (ghcr.io/osgeo/gdal:alpine-small-latest still building at time of writing).

(Note: the GDAL master conda builds mentioned at
https://gdal.org/download.html#gdal-master-conda-builds have been broken for a couple weeks and are thus not usable to test beta1 currently. I'm
investigating)

Source snapshots at:

- https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0beta1.tar.gz

- https://download.osgeo.org/gdal/3.8.0/gdal-3.8.0beta1.tar.xz

- https://download.osgeo.org/gdal/3.8.0/gdal380beta1.zip

Autotest snapshots:

- https://download.osgeo.org/gdal/3.8.0/gdalautotest-3.8.0beta1.tar.gz

- https://download.osgeo.org/gdal/3.8.0/gdalautotest-3.8.0beta1.zip

Even

--
http://www.spatialys.com/
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From howard at hobu.co  Tue Oct 31 09:59:43 2023
From: howard at hobu.co (Howard Butler)
Date: Tue, 31 Oct 2023 11:59:43 -0500
Subject: [gdal-dev] Motion: OSGeo Community Sprint Financial Support
Message-ID: <D1421805-81D3-46A4-BA8B-46DF9A9F1A57@hobu.co>

Dear PSC,

Sorry for the short notice, but I would like to motion that the GDAL Sponsorship Program financially support GDAL PSC members who wish to attend the OSGeo Community Sprint in Vienna [1] next week. Support level is capped at 1000? for European attendees and 1500? for others. 

Howard

[1] https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2023

From howard at hobu.co  Tue Oct 31 09:59:43 2023
From: howard at hobu.co (Howard Butler)
Date: Tue, 31 Oct 2023 11:59:43 -0500
Subject: [gdal-dev] Motion: OSGeo Community Sprint Financial Support
Message-ID: <D1421805-81D3-46A4-BA8B-46DF9A9F1A57@hobu.co>

Dear PSC,

Sorry for the short notice, but I would like to motion that the GDAL Sponsorship Program financially support GDAL PSC members who wish to attend the OSGeo Community Sprint in Vienna [1] next week. Support level is capped at 1000? for European attendees and 1500? for others. 

Howard

[1] https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2023

From even.rouault at spatialys.com  Tue Oct 31 10:04:53 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 31 Oct 2023 18:04:53 +0100
Subject: [gdal-dev] Motion: OSGeo Community Sprint Financial Support
In-Reply-To: <D1421805-81D3-46A4-BA8B-46DF9A9F1A57@hobu.co>
References: <D1421805-81D3-46A4-BA8B-46DF9A9F1A57@hobu.co>
Message-ID: <83716642-0c30-4b5f-847f-43b554d91b63@spatialys.com>

+1 Even

Le 31/10/2023 ? 17:59, Howard Butler via gdal-dev a ?crit?:
> Dear PSC,
>
> Sorry for the short notice, but I would like to motion that the GDAL Sponsorship Program financially support GDAL PSC members who wish to attend the OSGeo Community Sprint in Vienna [1] next week. Support level is capped at 1000? for European attendees and 1500? for others.
>
> Howard
>
> [1] https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2023
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Tue Oct 31 10:14:44 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 31 Oct 2023 18:14:44 +0100
Subject: [gdal-dev] GDAL 3.8.0beta1 available for testing
In-Reply-To: <AM0PR09MB3219877BAD7C99524D38DC92FDA0A@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
 <AM0PR09MB3219877BAD7C99524D38DC92FDA0A@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <277d82b1-37ed-421e-bc21-730fbabe4bd2@spatialys.com>


Le 31/10/2023 ? 17:36, Rahkonen Jukka a ?crit?:
> Hi,
>
> I made a simple test with ogr2ogr and geopackage to geopackage on Windows. With GDAL 3.8.0dev-3e4dc710a2 (no arrow, old R-Tree) the timing was 36 minutes, with GDAL 3.8.0dev-6bbd2c080a the same conversion took 21 minutes. The gpkg file is 75 GB, with 120 layers.
>
> Could it be that the new R-Tree implementation does not print anything into debug?

Indeed. Debug traces added back in https://github.com/OSGeo/gdal/pull/8640

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231031/2d34b727/attachment-0001.htm>

From j1 at jimenezshaw.com  Tue Oct 31 11:37:30 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 31 Oct 2023 19:37:30 +0100
Subject: [gdal-dev] Motion: OSGeo Community Sprint Financial Support
In-Reply-To: <83716642-0c30-4b5f-847f-43b554d91b63@spatialys.com>
References: <D1421805-81D3-46A4-BA8B-46DF9A9F1A57@hobu.co>
 <83716642-0c30-4b5f-847f-43b554d91b63@spatialys.com>
Message-ID: <CADRrdKtQJzFyZW6zz-TaBVJw3LhVN_6xKnZOcFhHyZR3TWFtKw@mail.gmail.com>

+1 Javier

On Tue, 31 Oct 2023, 18:04 Even Rouault via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

> +1 Even
>
> Le 31/10/2023 ? 17:59, Howard Butler via gdal-dev a ?crit :
> > Dear PSC,
> >
> > Sorry for the short notice, but I would like to motion that the GDAL
> Sponsorship Program financially support GDAL PSC members who wish to attend
> the OSGeo Community Sprint in Vienna [1] next week. Support level is capped
> at 1000? for European attendees and 1500? for others.
> >
> > Howard
> >
> > [1] https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2023
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20231031/ab3f96ba/attachment.htm>

From dmorissette at mapgears.com  Tue Oct 31 11:54:06 2023
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 31 Oct 2023 14:54:06 -0400
Subject: [gdal-dev] Motion: OSGeo Community Sprint Financial Support
In-Reply-To: <D1421805-81D3-46A4-BA8B-46DF9A9F1A57@hobu.co>
References: <D1421805-81D3-46A4-BA8B-46DF9A9F1A57@hobu.co>
Message-ID: <0a36528f-1dc0-43ec-9205-065348f4e9d7@mapgears.com>

+1

Daniel


On 2023-10-31 12:59, Howard Butler via gdal-dev wrote:
> Dear PSC,
> 
> Sorry for the short notice, but I would like to motion that the GDAL Sponsorship Program financially support GDAL PSC members who wish to attend the OSGeo Community Sprint in Vienna [1] next week. Support level is capped at 1000? for European attendees and 1500? for others.
> 
> Howard
> 
> [1] https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2023
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201


From even.rouault at spatialys.com  Tue Oct 31 13:56:52 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 31 Oct 2023 21:56:52 +0100
Subject: [gdal-dev] GDAL 3.8.0beta1 available for testing
In-Reply-To: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
References: <0cd23294-a98b-4f4d-b28f-f58bd5024dd5@spatialys.com>
Message-ID: <2c48df63-32c2-470f-8d0c-d295756478cc@spatialys.com>


>
> The ghcr.io/osgeo/gdal:ubuntu-small-latest, 
> ghcr.io/osgeo/gdal:ubuntu-full-latest, 
> ghcr.io/osgeo/gdal:alpine-normal-latest Docker images have been 
> refreshed with 3.8.0beta1 (ghcr.io/osgeo/gdal:alpine-small-latest 
> still building at time of writing).
All -latest images are now at 3.8.0beta1
>
> (Note: the GDAL master conda builds mentioned at 
> https://gdal.org/download.html#gdal-master-conda-builds have been 
> broken for a couple weeks and are thus not usable to test beta1 
> currently. I'm investigating)

Issue fixed. The procedure at 
https://gdal.org/download.html#gdal-master-conda-builds will now fetch 
3.8.0beta1


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From howard at hobu.co  Tue Oct 31 14:18:53 2023
From: howard at hobu.co (Howard Butler)
Date: Tue, 31 Oct 2023 16:18:53 -0500
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
Message-ID: <CFA34287-368A-4687-A308-E81BC0BD6E80@hobu.co>

Howard Butler, Even Rouault, Dan Baston, and Alessandro Pasotti canceled the monthly GDAL Maintainers Meeting that was to be held on 10/26/2023 due to vacation and FOSS4GNA conflicts. Maintainers instead provided text updates which I am relaying as our monthly report.

Fundraising update
----------------------------

FrontierSI has declined to renew its Bronze sponsorship. More renewal traffic is expected in the next few months as we work to finish this year's cycle.

OSGeo Community Sprint
------------------------------------------
Howard Butler, Even Rouault, Jukka Rahkonen, and Dan Baston are currently signed up to attend the OSGeo Community Sprint next week in Vienna https://wiki.osgeo.org/wiki/OSGeo_Community_Sprint_2023 GDAL PSC members can obtain travel grants through the sponsorship program if they wish to attend (contact me for info).
 
Maintenance activities update
------------------------------------------

Status from Dan:

> * Fixed a bug in /vsimem that was causing some tests to not clean up after themselves. 
> * Fixed more Python bindings crashes as a result of test execution independence effort.

Status from Alessandro:

> This month I reviewed a few PRs (mainly from Even):
> https://github.com/OSGeo/gdal/pull/8534
> https://github.com/OSGeo/gdal/pull/8531
> https://github.com/OSGeo/gdal/pull/8529
> https://github.com/OSGeo/gdal/pull/8526
> https://github.com/OSGeo/gdal/pull/8521
> https://github.com/OSGeo/gdal/pull/8519
> https://github.com/OSGeo/gdal/pull/8518
> https://github.com/OSGeo/gdal/pull/8516
> https://github.com/OSGeo/gdal/pull/8495
> 
> Then I focused on investigating and fixing the following bugs:
> https://github.com/OSGeo/gdal/issues/8525 OpenCL always uses first
> device per platform on Mac
> https://github.com/OSGeo/gdal/issues/8523 Error in
> gdal.VectorTranslate for explodecollections=True + some weird python
> logging behaviour
> https://github.com/OSGeo/gdal/issues/8522 OAPIF: Increase the default page size
> 
> Lastly, starting from a QGIS upstream issue
> https://github.com/qgis/QGIS/issues/54966 I worked on the GDAL side of
> the problem and wrote a test https://github.com/OSGeo/gdal/pull/8609,
> while investigating the issue I discovered another issue which was
> eventually fixed by Even with https://github.com/OSGeo/gdal/pull/8582

Status from Even:

> - Regeneration of GDAL 3.7.2 Docker images for WebP and curl recent CVEs
> - Add OGRLayer::WriteArrowBatch() functionality which is the write-side of RFC86, with a generic implementation for all drivers and specialized implementations for Arrow/Parquet:https://github.com/OSGeo/gdal/pull/8517- and use it in ogr2ogr when possible, that is when the source layer declares OLCFastGetArrowStream to give significant speed-ups (including for GeoPackage->GeoPackage): https://github.com/OSGeo/gdal/pull/8544 +https://github.com/OSGeo/gdal/pull/8560 . Note that is currently only enabled with a very restricted set of ogr2ogr options (mostly only -spat, -where and driver creation options)
> - Massive speed-up of GeoPackage spatial index creation. From 26 seconds down to 6 seconds on a 3.2 million feature table. https://github.com/OSGeo/gdal/pull/8596 . Also available as a separate library that can be used by non-GDAL implementations (libspatialite for example)
> - Significant performance improvement of RasterIO() on VRT with VRTComplexSource that have only a <NODATA> element and data types Byte/UInt16/Int16: https://github.com/OSGeo/gdal/pull/8562
> - CI: addition of (an embryo of) a performance regression test suite. Note that due to CI virtual machines being quite unpredictable performance-wise, it can only detect regressions > 20%. https://github.com/OSGeo/gdal/pull/8538
> - and ~50 other activities: bug fixes, pull request reviews


The next GDAL Maintainers Meeting is 11/23/2023 at 9:00 EDT. Any PSC members are welcome to join by reaching out to me for an invite.

Howard

