From even.rouault at mines-paris.org  Fri Feb  1 01:01:27 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 01 Feb 2013 10:01:27 +0100
Subject: [gdal-dev] convert linestring to point data
In-Reply-To: <52B462DA-346E-4374-8DEA-F7B491A95652@actian.com>
References: <20130131152659.M25799@deprem.gov.tr>
	<6152BDF053E74643B4C0A41150F5ADC38B832E@USINVMAILB01.ingres.prv>
	<52B462DA-346E-4374-8DEA-F7B491A95652@actian.com>
Message-ID: <1359709287.510b84677c5a7@imp.free.fr>

Selon Tyler Mitchell <tyler.mitchell at actian.com>:

> Just a brief follow up for posterity on the list...
>
> I've completed my first run of updates on this script and it's looking pretty
> good.  Others welcomed to give feedback :)
>
> It's been modularised now and also allows you to enter a field name to take
> the Z value from.
>
> So Murat, it does everything you need now, so grab a fresh copy!
>
> The only other improvement I can think of is to specify an output format and
> create a non-CSV output instead.

A few other ideas :
* add a header with the licencing
* deal with multipolygons (shapefiles can mix polygons and multipolygons in
polygon layers)
* test the geometry type on the actual feature geometry, and not the layer
geometry (for the above reason)
* be robust to features with null geometry
* you can use the ogr.wkbPoint, ogr.wkbLineString, etc. constant instead of
testing against the numeric values and returning a string (check_ftype() is
unnecessary)

Even

From Daniel.Gnerre at vevey.ch  Fri Feb  1 05:39:11 2013
From: Daniel.Gnerre at vevey.ch (Daniel.Gnerre at vevey.ch)
Date: Fri, 1 Feb 2013 14:39:11 +0100
Subject: [gdal-dev] Problem reading Geoconcept GXT
Message-ID: <OF0C496A73.061F8094-ONC1257B05.004AFFC9-C1257B05.004AFFCB@vevey.ch>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130201/9c47e1bc/attachment.html>

From lhomme.xavier at gmail.com  Fri Feb  1 08:58:08 2013
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Fri, 1 Feb 2013 17:58:08 +0100
Subject: [gdal-dev]  Incorrect path after gdal-19-1600-core.msi
Message-ID: <CACqzBMzLB8VCWD0_WSwqzsrwQ3QxquacM9t_WoGip4E58aC0_w@mail.gmail.com>

Hi

 I use the msi file gdal-19-1600-core.msi in order to install gdal on a
Windows Server 2008 R2. Once the installation completed, the gdal
installation directory has been added to the Path. The path contains
%SYSTEMROOT% but doesn't expand this variable anymore.
If I open a cmdtool, for example neither  xcopy is not recognized nor
ogrinfo,.

If I reset the path then I reboot my computer it seems to work again.

Do You have any idea to reset the path after GDAL installation ?
xav
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130201/7efc72a4/attachment.html>

From even.rouault at mines-paris.org  Fri Feb  1 09:07:29 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 01 Feb 2013 18:07:29 +0100
Subject: [gdal-dev] Incorrect path after gdal-19-1600-core.msi
In-Reply-To: <CACqzBMzLB8VCWD0_WSwqzsrwQ3QxquacM9t_WoGip4E58aC0_w@mail.gmail.com>
References: <CACqzBMzLB8VCWD0_WSwqzsrwQ3QxquacM9t_WoGip4E58aC0_w@mail.gmail.com>
Message-ID: <1359738449.510bf65169e37@imp.free.fr>

Selon xavier lhomme <lhomme.xavier at gmail.com>:

> Hi
>
>  I use the msi file gdal-19-1600-core.msi in order to install gdal on a
> Windows Server 2008 R2. Once the installation completed, the gdal
> installation directory has been added to the Path. The path contains
> %SYSTEMROOT% but doesn't expand this variable anymore.
> If I open a cmdtool, for example neither  xcopy is not recognized nor
> ogrinfo,.
>
> If I reset the path then I reboot my computer it seems to work again.
>
> Do You have any idea to reset the path after GDAL installation ?

Something to report to https://github.com/gisinternals/buildsystem/issues/new ?


> xav
>



From even.rouault at mines-paris.org  Fri Feb  1 11:49:06 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 1 Feb 2013 20:49:06 +0100
Subject: [gdal-dev] Problem reading Geoconcept GXT
In-Reply-To: <OF0C496A73.061F8094-ONC1257B05.004AFFC9-C1257B05.004AFFCB@vevey.ch>
References: <OF0C496A73.061F8094-ONC1257B05.004AFFC9-C1257B05.004AFFCB@vevey.ch>
Message-ID: <201302012049.06752.even.rouault@mines-paris.org>

Le vendredi 01 f?vrier 2013 14:39:11, Daniel.Gnerre at vevey.ch a ?crit :
> Hi,
> 
> I have a problem trying to read a GXT file with OGR and the following
> command :

You can file a ticket about that, with the gxf file attached,  in 
http://trac.osgeo.org/gdal/newticket and add 'dgrichard' in the CC field.

From sglish at hotmail.com  Fri Feb  1 14:24:59 2013
From: sglish at hotmail.com (Chris English)
Date: Fri, 1 Feb 2013 17:24:59 -0500
Subject: [gdal-dev] Fema Flood Maps NAV88 - proj4text
Message-ID: <BAY172-W149B096EBBF7E0986EC138C51C0@phx.gbl>


All,

I am trying to view some parcel maps (NJ state plane EPSG 102711) in conjunction
with FEMA Flood maps (EPSG 5703).? I can view one group, the compliment of FEMA
Flood maps, or the parcels, but not both, so clearly a transform is required.

I find myself looking for a proj4 text string for EPSG 5703 to (hopefully) transform in
PostGIS and view in qgis.? 

I found this string >>proj=longlat +datum=WGS84 +no_defs +geoidgrids=g2009conus.gtx

in Ben Discoe's overview of Vertical and Geocentric coordinate support in OGR/Proj4
http://lists.maptools.org/pipermail/proj/2011-August/005844.html

and I've added g2009conus.gtx to my PROJ_LIB.

1) is the string the correct proj4 string for NAV88D

2) am I being hopelessly naive to think that just adding the string to a user-defined
??? 95703 in Postgis spatial_ref_sys is going to do anything useful to achieve the
??? transform of the parcel maps so they may be viewed in conjunction with the
??? FEMA maps

3) if 2 is correct, should I prepare the layer in gdal following Ben's approach
??? and then import into Postgis

I am attempting this because when one is confronted with a flood map one wants
to know what is the elevation of one's particular parcel in relation the the flood maps
as against the more generalized representation of the flood zone stops about here.

thank you for your advice and consideration,

Chris English
 		 	   		  

From gdt at ir.bbn.com  Sat Feb  2 05:21:11 2013
From: gdt at ir.bbn.com (Greg Troxel)
Date: Sat, 02 Feb 2013 08:21:11 -0500
Subject: [gdal-dev] Fema Flood Maps NAV88 - proj4text
In-Reply-To: <BAY172-W149B096EBBF7E0986EC138C51C0@phx.gbl> (Chris English's
	message of "Fri, 1 Feb 2013 17:24:59 -0500")
References: <BAY172-W149B096EBBF7E0986EC138C51C0@phx.gbl>
Message-ID: <rmid2wionqw.fsf@fnord.ir.bbn.com>


You may want to join the proj list.

Your parcel maps are in EPSG (ESRI, really) 102711, which is:

  http://spatialreference.org/ref/esri/102711/

This is a horizontal-only datum.  I have only encountered horizontal
data in parcel maps (Mass, not NJ). Do you have any heights presented
with this?  If so, do you understand what they are?  If there are
heights, I would expect they are in NAVD88, but they could be in
ellipsoidal height relative to the GRS80 ellipsoid and the NAD83
orientation.  Ellipsoidal height is relatively recent, and estimated
orthometric heights based on geoid models and observed ellispoidal
heights is where NGS is heading, but I would doubt most practitioners
are doing that yet.

Your flood maps are in EPSG:5703:
  http://spatialreference.org/ref/epsg/5703/
This is a vertical-only datum.   Are there horizontal coordinates?  If
so, what are they in?  I would expect some sort of NAD83, and their
purpose is to locate where the heights are given.

So what I think you want is to know the NAVD88 heights around the parcel
of interest, so you therefore want all your horizontal coordinates in
NAD83, and to leave the height in NAVD88.  (Water flows downhill in
NAVD88, but does not necessarily flow towards lower height values in
ellipsoidal height coordinates!!)

You were talking about a geoid file, which presumably transforms NAVD88
height to something, which is probably ellipsoidal height based on
NAD83.  That's the typical geoid model published by NGS.
There are also geoid models from WGS84 ellipsoidal height, but these do
not transform to NAVD88.

Do you have any height data in other than NAVD88?  If so, please
describe it.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130202/dbe0c8c1/attachment.pgp>

From sglish at hotmail.com  Sat Feb  2 08:39:23 2013
From: sglish at hotmail.com (Chris English)
Date: Sat, 2 Feb 2013 11:39:23 -0500
Subject: [gdal-dev] Fema Flood Maps NAV88 - proj4text
In-Reply-To: <rmid2wionqw.fsf@fnord.ir.bbn.com>
References: <BAY172-W149B096EBBF7E0986EC138C51C0@phx.gbl>,
	<rmid2wionqw.fsf@fnord.ir.bbn.com>
Message-ID: <BAY172-W23875E0A8CC902D49F932BC5030@phx.gbl>


The parcels are, of course, horizontal only datum.
from the .prj

PROJCS["NAD_1983_StatePlane_New_Jersey_FIPS_2900_Feet",
GEOGCS["GCS_North_American_1983",
DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],
PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",492125.0],
PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-74.5],
PARAMETER["Scale_Factor",0.9999],
PARAMETER["Latitude_Of_Origin",38.83333333333334],UNIT["Foot_US",0.3048006096012192]]

and from a representative flood map .prj

PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",
DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],
PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],
PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],
PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]

which seems now, looking at them, should just be a standard transform. But then this from
Adv_MO_FloodZones.shp.xml 

-<geodetic>
<horizdn>GCS WGS 1984</horizdn>
<ellips>World Geodetic System 1984</ellips>
<semiaxis>6378137.000000</semiaxis>
<denflat>298.257222</denflat>
</geodetic>
</horizsys>
<vertsys>
??? <gridsysn>NAVD88</gridsysn>
??? <plandu>FEET</plandu>
</vertsys>

well, I'll continue to muddle and head scratch.
----------------------------------------
> From: gdt at ir.bbn.com
> To: sglish at hotmail.com
> CC: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Fema Flood Maps NAV88 - proj4text
> Date: Sat, 2 Feb 2013 08:21:11 -0500
>
>
> You may want to join the proj list.
>
> Your parcel maps are in EPSG (ESRI, really) 102711, which is:
>
> http://spatialreference.org/ref/esri/102711/
>
> This is a horizontal-only datum. I have only encountered horizontal
> data in parcel maps (Mass, not NJ). Do you have any heights presented
> with this? If so, do you understand what they are? If there are
> heights, I would expect they are in NAVD88, but they could be in
> ellipsoidal height relative to the GRS80 ellipsoid and the NAD83
> orientation. Ellipsoidal height is relatively recent, and estimated
> orthometric heights based on geoid models and observed ellispoidal
> heights is where NGS is heading, but I would doubt most practitioners
> are doing that yet.
>
> Your flood maps are in EPSG:5703:
> http://spatialreference.org/ref/epsg/5703/
> This is a vertical-only datum. Are there horizontal coordinates? If
> so, what are they in? I would expect some sort of NAD83, and their
> purpose is to locate where the heights are given.
>
> So what I think you want is to know the NAVD88 heights around the parcel
> of interest, so you therefore want all your horizontal coordinates in
> NAD83, and to leave the height in NAVD88. (Water flows downhill in
> NAVD88, but does not necessarily flow towards lower height values in
> ellipsoidal height coordinates!!)
>
> You were talking about a geoid file, which presumably transforms NAVD88
> height to something, which is probably ellipsoidal height based on
> NAD83. That's the typical geoid model published by NGS.
> There are also geoid models from WGS84 ellipsoidal height, but these do
> not transform to NAVD88.
>
> Do you have any height data in other than NAVD88? If so, please
> describe it.
 		 	   		  

From landa.martin at gmail.com  Sun Feb  3 06:00:57 2013
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 3 Feb 2013 15:00:57 +0100
Subject: [gdal-dev] FileGDB for rasters
Message-ID: <CA+Ei1OeJMKpLtfXshS7nfH2oWWmWyrei+_23=cQRmxpZw_duTQ@mail.gmail.com>

Hi,

I found FileGDB driver in OGR very useful. Is there any plan to
implement FileGDB driver also for rasters [1] (as a GDAL driver).

Thanks, Martin

[1] http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//009t0000002z000000

-- 
Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa

From landa.martin at gmail.com  Sun Feb  3 06:17:51 2013
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 3 Feb 2013 15:17:51 +0100
Subject: [gdal-dev] FileGDB for rasters
In-Reply-To: <68A6D85AFE844844ABCD23232A5C97950173B8B0@MS-EX1VKS.erdc.dren.mil>
References: <CA+Ei1OeJMKpLtfXshS7nfH2oWWmWyrei+_23=cQRmxpZw_duTQ@mail.gmail.com>
	<68A6D85AFE844844ABCD23232A5C97950173B8B0@MS-EX1VKS.erdc.dren.mil>
Message-ID: <CA+Ei1OcdCOUshrDXQv6Cyvc3dRVGbHJrK7Lf=ahLa6UTGhnZHw@mail.gmail.com>

Hi,

2013/2/3 Smith, Michael ERDC-RDE-CRREL-NH <Michael.Smith at erdc.dren.mil>:

> The current FileGDB api available from ESRI does not support rasters. It
> would probably be implemented fairly soon after ESRI provides such
> capability in their api.

I see, thanks for the info! Martin

-- 
Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa

From Michael.Smith at erdc.dren.mil  Sun Feb  3 06:12:34 2013
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Sun, 3 Feb 2013 14:12:34 +0000
Subject: [gdal-dev] FileGDB for rasters
In-Reply-To: <CA+Ei1OeJMKpLtfXshS7nfH2oWWmWyrei+_23=cQRmxpZw_duTQ@mail.gmail.com>
Message-ID: <68A6D85AFE844844ABCD23232A5C97950173B8B0@MS-EX1VKS.erdc.dren.mil>

Martin,

The current FileGDB api available from ESRI does not support rasters. It
would probably be implemented fairly soon after ESRI provides such
capability in their api.

Mike

-- 
Michael Smith

US Army Corps
Remote Sensing GIS/Center



On 2/3/13 9:00 AM, "Martin Landa" <landa.martin at gmail.com> wrote:

>Hi,
>
>I found FileGDB driver in OGR very useful. Is there any plan to
>implement FileGDB driver also for rasters [1] (as a GDAL driver).
>
>Thanks, Martin
>
>[1] 
>http://help.arcgis.com/en/arcgisdesktop/10.0/help/index.html#//009t0000002
>z000000
>
>-- 
>Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From dlverbyla at alaska.edu  Mon Feb  4 19:32:11 2013
From: dlverbyla at alaska.edu (David Verbyla)
Date: Mon, 4 Feb 2013 18:32:11 -0900
Subject: [gdal-dev] Python ogr DataSource.ExecuteSQL syntax?
Message-ID: <CAJpuGQcS-0=9AkHEH_bMALxdcBbSgUTnr+vftJd=99Jeh6zDtg@mail.gmail.com>

I am trying to figure out the syntax for .ExecuteSQL using Python ogr.

For example:
fireLayer.SetAttributeFilter(None) #returns all 2623 polygons
fireLayer.SetAttributeFilter(" FIREID < 75 ") #returns 4 polygons

I am trying to get the same results using the ExecuteSQL:
testLayer = dataSource.ExecuteSQL("select * from fireLayer")
type(testLayer) #retuns NoneType
testLayer = dataSource.ExecuteSQL("select * from fireLayer where FIREID <
75")
type(testLayer) #retuns NoneType

Thanks in advance.

Dave Verbyla

On Sat, Dec 22, 2012 at 7:17 AM, David Verbyla <dlverbyla at alaska.edu> wrote:

>
> I am a newbie to OGR/OSR using Python 2.7.2, please excuse my ignorance:
>> I am trying to find the distance to the closest polygon for each point.
>> Is there a more efficient way than simply computing the distance to all
>> polygons for each point?  For example:
>>
>
> nPts = pointsLayer.GetFeatureCount()
> nPolys = polysLayer.GetFeatureCount()
>
> for pt in range(0,nPts):
>       minDist = 1000000
>       pointFeature = pointsLayer.GetFeature(pt)
>       for poly in range(0,nPolys):
>             polyFeature = polysLayer.GetFeature(poly)
>             Dist = pointFeature.GetGeometryRef().Distance(
> polyFeature.GetGeometryRef() )
>             if (Dist < minDist):
>                   minDist = Dist
>       print (pt,minDist)
>
> Thank you.
>
> Dave Verbyla
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130204/52f1ac05/attachment.html>

From brett.walker at geometryit.com  Mon Feb  4 20:14:16 2013
From: brett.walker at geometryit.com (Brett Walker)
Date: Tue, 5 Feb 2013 15:14:16 +1100
Subject: [gdal-dev] orginfo unable to open GPX file
Message-ID: <4B95BC7335A13A42AD0D23462F91AE6F616D28C027@echo.geometryit.com>

HI,

I have compiled GDAL/OGR with support for GPX files. 'ogrinfo -formats' reports '-> "GPX" (read/write)'. This I take as being good  that GPX support is enabled.

When I run  the following command: 'ogrinfo -ro -al Track_003.gpx' it reports:

FAILURE:
Unable to open datasource `Track_003.gpx' with the following drivers.

With a list of drivers; GPX being one of  them.

'Track_003.gpx' is in the current directory.

What could be wrong? What to look for? How to solve this problem?

Brett

Brett Walker <brett.walker at geometryit.com<mailto:brett.walker at geometryit.com>>
Software Developer / Analyst
Geometry Pty Ltd

Telephone               03 6223 1999
Mobile                     0458 498 386
Fax                          03 6223 1988
Web                        www.geometryit.com<http://www.geometryit.com/>
Address                   31 Salamanca Square, Battery Point, TAS 7004, Australia

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130205/7dcb9d9a/attachment.html>

From didier.richard at ign.fr  Tue Feb  5 00:39:45 2013
From: didier.richard at ign.fr (Richard Didier)
Date: Tue, 05 Feb 2013 09:39:45 +0100
Subject: [gdal-dev] orginfo unable to open GPX file
In-Reply-To: <4B95BC7335A13A42AD0D23462F91AE6F616D28C027@echo.geometryit.com>
References: <4B95BC7335A13A42AD0D23462F91AE6F616D28C027@echo.geometryit.com>
Message-ID: <1778198.sQgbbifafp@belzebuth>

Le mardi 5 f?vrier 2013 15:14:16 Brett Walker a ?crit :
> HI,
> 

Hello Brett,

> I have compiled GDAL/OGR with support for GPX files. 'ogrinfo -formats'
> reports '-> "GPX" (read/write)'. This I take as being good  that GPX
> support is enabled.
> 
> When I run  the following command: 'ogrinfo -ro -al Track_003.gpx' it
> reports:
> 
> FAILURE:
> Unable to open datasource `Track_003.gpx' with the following drivers.
> 
> With a list of drivers; GPX being one of  them.
> 
> 'Track_003.gpx' is in the current directory.
> 
> What could be wrong? What to look for? How to solve this problem?
> 

Could you file a ticket about that, with the gpx file attached,  in 
http://trac.osgeo.org/gdal/newticket and add 'dgrichard' (me) in the CC field

Regards,

didier

> Brett
> 
> Brett Walker
> <brett.walker at geometryit.com<mailto:brett.walker at geometryit.com>> Software
> Developer / Analyst
> Geometry Pty Ltd
> 
> Telephone               03 6223 1999
> Mobile                     0458 498 386
> Fax                          03 6223 1988
> Web                        www.geometryit.com<http://www.geometryit.com/>
> Address                   31 Salamanca Square, Battery Point, TAS 7004,
> Australia
-- 
RICHARD Didier - Chef du p?le technique du G?oportail
2/4, avenue Pasteur - 94165 Saint Mand? Cedex
T?l : +33 (0) 1 43 98 83 23


From hrz at geodata.soton.ac.uk  Tue Feb  5 00:59:03 2013
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Tue, 5 Feb 2013 08:59:03 +0000
Subject: [gdal-dev] Python ogr DataSource.ExecuteSQL syntax?
In-Reply-To: <CAJpuGQcS-0=9AkHEH_bMALxdcBbSgUTnr+vftJd=99Jeh6zDtg@mail.gmail.com>
References: <CAJpuGQcS-0=9AkHEH_bMALxdcBbSgUTnr+vftJd=99Jeh6zDtg@mail.gmail.com>
Message-ID: <20130205085903.GA15474@sarah.geodata.soton.ac.uk>

Hello Dave,

On Mon, Feb 04, 2013 at 06:32:11PM -0900, David Verbyla wrote:
> I am trying to figure out the syntax for .ExecuteSQL using Python ogr.

I have successfully been using `DataSource.ExecuteSQL` from Python
using gdal 1.9.0.

> For example:
> fireLayer.SetAttributeFilter(None) #returns all 2623 polygons
> fireLayer.SetAttributeFilter(" FIREID < 75 ") #returns 4 polygons
> 
> I am trying to get the same results using the ExecuteSQL:
> testLayer = dataSource.ExecuteSQL("select * from fireLayer")
> type(testLayer) #retuns NoneType
> testLayer = dataSource.ExecuteSQL("select * from fireLayer where FIREID <
> 75")
> type(testLayer) #retuns NoneType

`None` seems to be returned when the SQL does not generate any
features.  Therefore the only thing I can think that might be wrong is
that the identifier `fireLayer` in the SQL above is not matching the
layer name in `dataSource`. Amending to the following *should* work:

    dataSource.ExecuteSQL('select * from "%s"' % fireLayer.GetName())

Cheers,

Homme

> Thanks in advance.
> 
> Dave Verbyla
> 
> On Sat, Dec 22, 2012 at 7:17 AM, David Verbyla <dlverbyla at alaska.edu> wrote:
> 
> >
> > I am a newbie to OGR/OSR using Python 2.7.2, please excuse my ignorance:
> >> I am trying to find the distance to the closest polygon for each point.
> >> Is there a more efficient way than simply computing the distance to all
> >> polygons for each point?  For example:
> >>
> >
> > nPts = pointsLayer.GetFeatureCount()
> > nPolys = polysLayer.GetFeatureCount()
> >
> > for pt in range(0,nPts):
> >       minDist = 1000000
> >       pointFeature = pointsLayer.GetFeature(pt)
> >       for poly in range(0,nPolys):
> >             polyFeature = polysLayer.GetFeature(poly)
> >             Dist = pointFeature.GetGeometryRef().Distance(
> > polyFeature.GetGeometryRef() )
> >             if (Dist < minDist):
> >                   minDist = Dist
> >       print (pt,minDist)
> >
> > Thank you.
> >
> > Dave Verbyla
> >

> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Homme Zwaagstra
GeoData Institute
University of Southampton

Tel: +44(0)2380 59 8709

From hrz at geodata.soton.ac.uk  Tue Feb  5 01:50:36 2013
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Tue, 5 Feb 2013 09:50:36 +0000
Subject: [gdal-dev] Still not working: Python ogr DataSource.ExecuteSQL
	syntax?
In-Reply-To: <CAJpuGQfyh-6kZhCkgxPZkQ-wXDOX0Q3+v3GuAZ49oDiEP3Hbzw@mail.gmail.com>
References: <CAJpuGQfyh-6kZhCkgxPZkQ-wXDOX0Q3+v3GuAZ49oDiEP3Hbzw@mail.gmail.com>
Message-ID: <20130205095036.GB15474@sarah.geodata.soton.ac.uk>

Dave,

Try the following modified version of your code snippet below. Note
that `ExecuteSQL` expects a simple SQL string - it does not do any
interpretation of local python variables! See
http://www.gdal.org/ogr/ogr_sql.html for more information on the SQL.

    import os
    from osgeo import ogr
    ogr.UseExceptions()         # if something goes wrong, we want to know about it
    driver = ogr.GetDriverByName('ESRI Shapefile')
    ds = driver.Open('three_points.shp', 0)#0--read-only
    layer = ds.GetLayer()
    layerName =  layer.GetName() #returns string 'three_points'
    test = ds.ExecuteSQL('select * from "%s"' % layerName)

Cheers,

Homme

On Tue, Feb 05, 2013 at 12:39:50AM -0900, David Verbyla wrote:
> I am not understanding some key aspect of this function.
> For example:
> #three_points.shp contains
> #Class, Point_X, Point_Y
> # 1,301665.4,1701522.8
> # 2,302240.3,1701992.1
> # 3,301559.8,1701112.1
> import os
> from osgeo import ogr
> driver = ogr.GetDriverByName('ESRI Shapefile')
> ds = driver.Open('three_points.shp',0)#0--read-only
> layer = ds.GetLayer()
> layerName =  layer.GetName() #returns string 'three_points'
> test = ds.ExecuteSQL('select from layerName *')
> print type(test) #returns <type 'NoneType'>
> 
> test = ds.ExecuteSQL('select from layer.GetName')
> print type(test) #returns <type 'NoneType'>
> 
> ds.ExecuteSQL('select from layerName where Class > 0')
> print type (test) #returns <type 'NoneType'>
> 
> Thanks in advance.
> 
> Dave Verbyla
> 
> 
> On Mon, Feb 4, 2013 at 11:59 PM, Homme Zwaagstra <hrz at geodata.soton.ac.uk>wrote:
> 
> > Hello Dave,
> >
> > On Mon, Feb 04, 2013 at 06:32:11PM -0900, David Verbyla wrote:
> > > I am trying to figure out the syntax for .ExecuteSQL using Python ogr.
> >
> > I have successfully been using `DataSource.ExecuteSQL` from Python
> > using gdal 1.9.0.
> >
> > > For example:
> > > fireLayer.SetAttributeFilter(None) #returns all 2623 polygons
> > > fireLayer.SetAttributeFilter(" FIREID < 75 ") #returns 4 polygons
> > >
> > > I am trying to get the same results using the ExecuteSQL:
> > > testLayer = dataSource.ExecuteSQL("select * from fireLayer")
> > > type(testLayer) #retuns NoneType
> > > testLayer = dataSource.ExecuteSQL("select * from fireLayer where FIREID <
> > > 75")
> > > type(testLayer) #retuns NoneType
> >
> > `None` seems to be returned when the SQL does not generate any
> > features.  Therefore the only thing I can think that might be wrong is
> > that the identifier `fireLayer` in the SQL above is not matching the
> > layer name in `dataSource`. Amending to the following *should* work:
> >
> >     dataSource.ExecuteSQL('select * from "%s"' % fireLayer.GetName())
> >
> > Cheers,
> >
> > Homme
> >
> > > Thanks in advance.
> > >
> > > Dave Verbyla
> > >
> > > On Sat, Dec 22, 2012 at 7:17 AM, David Verbyla <dlverbyla at alaska.edu>
> > wrote:
> > >
> > > >
> > > > I am a newbie to OGR/OSR using Python 2.7.2, please excuse my
> > ignorance:
> > > >> I am trying to find the distance to the closest polygon for each
> > point.
> > > >> Is there a more efficient way than simply computing the distance to
> > all
> > > >> polygons for each point?  For example:
> > > >>
> > > >
> > > > nPts = pointsLayer.GetFeatureCount()
> > > > nPolys = polysLayer.GetFeatureCount()
> > > >
> > > > for pt in range(0,nPts):
> > > >       minDist = 1000000
> > > >       pointFeature = pointsLayer.GetFeature(pt)
> > > >       for poly in range(0,nPolys):
> > > >             polyFeature = polysLayer.GetFeature(poly)
> > > >             Dist = pointFeature.GetGeometryRef().Distance(
> > > > polyFeature.GetGeometryRef() )
> > > >             if (Dist < minDist):
> > > >                   minDist = Dist
> > > >       print (pt,minDist)
> > > >
> > > > Thank you.
> > > >
> > > > Dave Verbyla
> > > >
> >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > --
> > Homme Zwaagstra
> > GeoData Institute
> > University of Southampton
> >
> > Tel: +44(0)2380 59 8709
> >

-- 
Homme Zwaagstra
GeoData Institute
University of Southampton

Tel: +44(0)2380 59 8709

From even.rouault at mines-paris.org  Tue Feb  5 02:11:39 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 05 Feb 2013 11:11:39 +0100
Subject: [gdal-dev] Python ogr DataSource.ExecuteSQL syntax?
In-Reply-To: <CAJpuGQcS-0=9AkHEH_bMALxdcBbSgUTnr+vftJd=99Jeh6zDtg@mail.gmail.com>
References: <CAJpuGQcS-0=9AkHEH_bMALxdcBbSgUTnr+vftJd=99Jeh6zDtg@mail.gmail.com>
Message-ID: <1360059099.5110dadbd72aa@imp.free.fr>

Selon David Verbyla <dlverbyla at alaska.edu>:

> I am trying to figure out the syntax for .ExecuteSQL using Python ogr.
>
> For example:
> fireLayer.SetAttributeFilter(None) #returns all 2623 polygons
> fireLayer.SetAttributeFilter(" FIREID < 75 ") #returns 4 polygons
>
> I am trying to get the same results using the ExecuteSQL:
> testLayer = dataSource.ExecuteSQL("select * from fireLayer")
> type(testLayer) #retuns NoneType
> testLayer = dataSource.ExecuteSQL("select * from fireLayer where FIREID <
> 75")
> type(testLayer) #retuns NoneType

Is the layer name reported by OGR really "fireLayer" ? (in case you made a
confusion between the OGR layer name and the Python layer object)

From even.rouault at mines-paris.org  Tue Feb  5 02:13:38 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 05 Feb 2013 11:13:38 +0100
Subject: [gdal-dev] orginfo unable to open GPX file
In-Reply-To: <4B95BC7335A13A42AD0D23462F91AE6F616D28C027@echo.geometryit.com>
References: <4B95BC7335A13A42AD0D23462F91AE6F616D28C027@echo.geometryit.com>
Message-ID: <1360059218.5110db525b20c@imp.free.fr>


> What could be wrong? What to look for? How to solve this problem?

If you look at the file with a text editor, does it look like a XML file with a
<gpx> element ? If so, you can open a ticket in GDAL Trac with the file attached
for investigation.

>
> Brett
>
> Brett Walker
> <brett.walker at geometryit.com<mailto:brett.walker at geometryit.com>>
> Software Developer / Analyst
> Geometry Pty Ltd
>
> Telephone               03 6223 1999
> Mobile                     0458 498 386
> Fax                          03 6223 1988
> Web                        www.geometryit.com<http://www.geometryit.com/>
> Address                   31 Salamanca Square, Battery Point, TAS 7004,
> Australia
>
>



From dlverbyla at alaska.edu  Tue Feb  5 02:21:33 2013
From: dlverbyla at alaska.edu (David Verbyla)
Date: Tue, 5 Feb 2013 01:21:33 -0900
Subject: [gdal-dev] THANK YOU!
Message-ID: <CAJpuGQdCkAU=MjOv39jhQCiDqxMmivPkQsuCjd-DoSKOXVdwKw@mail.gmail.com>

OK..I figured it out that the layername is not the layer object,
it is the name property of the layer object and has to be enclosed
in double quotes.

For example:
test = ds.ExecuteSQL('select * from "three_points"  where Class IN (1,3)
')  #returns 2 of 3 point features

http://www.gdal.org/ogr/ogr_sql.html would be more helpful if there were
some Python examples...
for example:
it is not clear from the first example that polylayer is the name of the
layer, not the layer object, and needs to be enclosed in
double quotes:

SELECT * FROM polylayer

Thanks!

Dave Verbyla

On Tue, Feb 5, 2013 at 12:50 AM, Homme Zwaagstra <hrz at geodata.soton.ac.uk>wrote:

> Dave,
>
> Try the following modified version of your code snippet below. Note
> that `ExecuteSQL` expects a simple SQL string - it does not do any
> interpretation of local python variables! See
> http://www.gdal.org/ogr/ogr_sql.html for more information on the SQL.
>
>     import os
>     from osgeo import ogr
>     ogr.UseExceptions()         # if something goes wrong, we want to know
> about it
>     driver = ogr.GetDriverByName('ESRI Shapefile')
>     ds = driver.Open('three_points.shp', 0)#0--read-only
>     layer = ds.GetLayer()
>     layerName =  layer.GetName() #returns string 'three_points'
>     test = ds.ExecuteSQL('select * from "%s"' % layerName)
>
> Cheers,
>
> Homme
>
> On Tue, Feb 05, 2013 at 12:39:50AM -0900, David Verbyla wrote:
> > I am not understanding some key aspect of this function.
> > For example:
> > #three_points.shp contains
> > #Class, Point_X, Point_Y
> > # 1,301665.4,1701522.8
> > # 2,302240.3,1701992.1
> > # 3,301559.8,1701112.1
> > import os
> > from osgeo import ogr
> > driver = ogr.GetDriverByName('ESRI Shapefile')
> > ds = driver.Open('three_points.shp',0)#0--read-only
> > layer = ds.GetLayer()
> > layerName =  layer.GetName() #returns string 'three_points'
> > test = ds.ExecuteSQL('select from layerName *')
> > print type(test) #returns <type 'NoneType'>
> >
> > test = ds.ExecuteSQL('select from layer.GetName')
> > print type(test) #returns <type 'NoneType'>
> >
> > ds.ExecuteSQL('select from layerName where Class > 0')
> > print type (test) #returns <type 'NoneType'>
> >
> > Thanks in advance.
> >
> > Dave Verbyla
> >
> >
> > On Mon, Feb 4, 2013 at 11:59 PM, Homme Zwaagstra <
> hrz at geodata.soton.ac.uk>wrote:
> >
> > > Hello Dave,
> > >
> > > On Mon, Feb 04, 2013 at 06:32:11PM -0900, David Verbyla wrote:
> > > > I am trying to figure out the syntax for .ExecuteSQL using Python
> ogr.
> > >
> > > I have successfully been using `DataSource.ExecuteSQL` from Python
> > > using gdal 1.9.0.
> > >
> > > > For example:
> > > > fireLayer.SetAttributeFilter(None) #returns all 2623 polygons
> > > > fireLayer.SetAttributeFilter(" FIREID < 75 ") #returns 4 polygons
> > > >
> > > > I am trying to get the same results using the ExecuteSQL:
> > > > testLayer = dataSource.ExecuteSQL("select * from fireLayer")
> > > > type(testLayer) #retuns NoneType
> > > > testLayer = dataSource.ExecuteSQL("select * from fireLayer where
> FIREID <
> > > > 75")
> > > > type(testLayer) #retuns NoneType
> > >
> > > `None` seems to be returned when the SQL does not generate any
> > > features.  Therefore the only thing I can think that might be wrong is
> > > that the identifier `fireLayer` in the SQL above is not matching the
> > > layer name in `dataSource`. Amending to the following *should* work:
> > >
> > >     dataSource.ExecuteSQL('select * from "%s"' % fireLayer.GetName())
> > >
> > > Cheers,
> > >
> > > Homme
> > >
> > > > Thanks in advance.
> > > >
> > > > Dave Verbyla
> > > >
> > > > On Sat, Dec 22, 2012 at 7:17 AM, David Verbyla <dlverbyla at alaska.edu
> >
> > > wrote:
> > > >
> > > > >
> > > > > I am a newbie to OGR/OSR using Python 2.7.2, please excuse my
> > > ignorance:
> > > > >> I am trying to find the distance to the closest polygon for each
> > > point.
> > > > >> Is there a more efficient way than simply computing the distance
> to
> > > all
> > > > >> polygons for each point?  For example:
> > > > >>
> > > > >
> > > > > nPts = pointsLayer.GetFeatureCount()
> > > > > nPolys = polysLayer.GetFeatureCount()
> > > > >
> > > > > for pt in range(0,nPts):
> > > > >       minDist = 1000000
> > > > >       pointFeature = pointsLayer.GetFeature(pt)
> > > > >       for poly in range(0,nPolys):
> > > > >             polyFeature = polysLayer.GetFeature(poly)
> > > > >             Dist = pointFeature.GetGeometryRef().Distance(
> > > > > polyFeature.GetGeometryRef() )
> > > > >             if (Dist < minDist):
> > > > >                   minDist = Dist
> > > > >       print (pt,minDist)
> > > > >
> > > > > Thank you.
> > > > >
> > > > > Dave Verbyla
> > > > >
> > >
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > > --
> > > Homme Zwaagstra
> > > GeoData Institute
> > > University of Southampton
> > >
> > > Tel: +44(0)2380 59 8709
> > >
>
> --
> Homme Zwaagstra
> GeoData Institute
> University of Southampton
>
> Tel: +44(0)2380 59 8709
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130205/dbb890c2/attachment.html>

From woodbri at swoodbridge.com  Tue Feb  5 07:51:26 2013
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Tue, 05 Feb 2013 10:51:26 -0500
Subject: [gdal-dev] MongoDB support?
Message-ID: <51112A7E.7030201@swoodbridge.com>

Hi All,

Does OGR have support for MongoDB?

I would like to be able to issue a query and pull points and attributes 
into a mapserver layer. MongoDB actually has some basic spatial support 
built into it.

Any thoughts on how to do this?

Thanks,
   -Steve

From even.rouault at mines-paris.org  Tue Feb  5 08:57:13 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 05 Feb 2013 17:57:13 +0100
Subject: [gdal-dev] MongoDB support?
In-Reply-To: <51112A7E.7030201@swoodbridge.com>
References: <51112A7E.7030201@swoodbridge.com>
Message-ID: <1360083433.511139e904e6f@imp.free.fr>

Selon Stephen Woodbridge <woodbri at swoodbridge.com>:

> Hi All,
>
> Does OGR have support for MongoDB?
>
> I would like to be able to issue a query and pull points and attributes
> into a mapserver layer. MongoDB actually has some basic spatial support
> built into it.
>
> Any thoughts on how to do this?

Yes, write the driver ;-)

I had look at that a few months ago (while writting the GeoCouch/CouchDB
driver), but didn't pursue since I found that the spatial capabilities of
MongoDB were rather small (only points if I remember well). But there's no
reason that a driver couldn't be written. The driver should likely rely on a lib
(linked from MongoDB's site) to connect to MongoDB since they use a non-standard
binary protocol (kind of binary json I believe).

>
> Thanks,
>    -Steve
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>









































From sglish at hotmail.com  Tue Feb  5 09:15:22 2013
From: sglish at hotmail.com (Chris English)
Date: Tue, 5 Feb 2013 12:15:22 -0500
Subject: [gdal-dev] Fema Flood Maps NAV88 - proj4text
In-Reply-To: <BAY172-W23875E0A8CC902D49F932BC5030@phx.gbl>
References: <BAY172-W149B096EBBF7E0986EC138C51C0@phx.gbl>, ,
	<rmid2wionqw.fsf@fnord.ir.bbn.com>,
	<BAY172-W23875E0A8CC902D49F932BC5030@phx.gbl>
Message-ID: <BAY172-W42B808B531E9C93C84EC96C5000@phx.gbl>





Just to close this out,
New York New Jersey FEMA advisory Base Flood Elevations are ESPG:3857

> From: sglish at hotmail.com
> To: gdt at ir.bbn.com; gdal-dev at lists.osgeo.org
> Date: Sat, 2 Feb 2013 11:39:23 -0500
> Subject: Re: [gdal-dev] Fema Flood Maps NAV88 - proj4text
> 
> 
> The parcels are, of course, horizontal only datum.
> from the .prj
> 
> PROJCS["NAD_1983_StatePlane_New_Jersey_FIPS_2900_Feet",
> GEOGCS["GCS_North_American_1983",
> DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],
> PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
> PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",492125.0],
> PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-74.5],
> PARAMETER["Scale_Factor",0.9999],
> PARAMETER["Latitude_Of_Origin",38.83333333333334],UNIT["Foot_US",0.3048006096012192]]
> 
> and from a representative flood map .prj
> 
> PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",
> DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],
> PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],
> PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],
> PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",0.0],
> PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]
> 
> which seems now, looking at them, should just be a standard transform. But then this from
> Adv_MO_FloodZones.shp.xml 
> 
> -<geodetic>
> <horizdn>GCS WGS 1984</horizdn>
> <ellips>World Geodetic System 1984</ellips>
> <semiaxis>6378137.000000</semiaxis>
> <denflat>298.257222</denflat>
> </geodetic>
> </horizsys>
> <vertsys>
>     <gridsysn>NAVD88</gridsysn>
>     <plandu>FEET</plandu>
> </vertsys>
> 
> well, I'll continue to muddle and head scratch.
> ----------------------------------------
> > From: gdt at ir.bbn.com
> > To: sglish at hotmail.com
> > CC: gdal-dev at lists.osgeo.org
> > Subject: Re: [gdal-dev] Fema Flood Maps NAV88 - proj4text
> > Date: Sat, 2 Feb 2013 08:21:11 -0500
> >
> >
> > You may want to join the proj list.
> >
> > Your parcel maps are in EPSG (ESRI, really) 102711, which is:
> >
> > http://spatialreference.org/ref/esri/102711/
> >
> > This is a horizontal-only datum. I have only encountered horizontal
> > data in parcel maps (Mass, not NJ). Do you have any heights presented
> > with this? If so, do you understand what they are? If there are
> > heights, I would expect they are in NAVD88, but they could be in
> > ellipsoidal height relative to the GRS80 ellipsoid and the NAD83
> > orientation. Ellipsoidal height is relatively recent, and estimated
> > orthometric heights based on geoid models and observed ellispoidal
> > heights is where NGS is heading, but I would doubt most practitioners
> > are doing that yet.
> >
> > Your flood maps are in EPSG:5703:
> > http://spatialreference.org/ref/epsg/5703/
> > This is a vertical-only datum. Are there horizontal coordinates? If
> > so, what are they in? I would expect some sort of NAD83, and their
> > purpose is to locate where the heights are given.
> >
> > So what I think you want is to know the NAVD88 heights around the parcel
> > of interest, so you therefore want all your horizontal coordinates in
> > NAD83, and to leave the height in NAVD88. (Water flows downhill in
> > NAVD88, but does not necessarily flow towards lower height values in
> > ellipsoidal height coordinates!!)
> >
> > You were talking about a geoid file, which presumably transforms NAVD88
> > height to something, which is probably ellipsoidal height based on
> > NAD83. That's the typical geoid model published by NGS.
> > There are also geoid models from WGS84 ellipsoidal height, but these do
> > not transform to NAVD88.
> >
> > Do you have any height data in other than NAVD88? If so, please
> > describe it.
>  		 	   		  
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130205/b6f1fe12/attachment-0001.html>

From gdt at ir.bbn.com  Tue Feb  5 10:09:40 2013
From: gdt at ir.bbn.com (Greg Troxel)
Date: Tue, 05 Feb 2013 13:09:40 -0500
Subject: [gdal-dev] Fema Flood Maps NAV88 - proj4text
In-Reply-To: <BAY172-W42B808B531E9C93C84EC96C5000@phx.gbl> (Chris English's
	message of "Tue, 5 Feb 2013 12:15:22 -0500")
References: <BAY172-W149B096EBBF7E0986EC138C51C0@phx.gbl>
	<rmid2wionqw.fsf@fnord.ir.bbn.com>
	<BAY172-W23875E0A8CC902D49F932BC5030@phx.gbl>
	<BAY172-W42B808B531E9C93C84EC96C5000@phx.gbl>
Message-ID: <rmiehgur5sr.fsf@fnord.ir.bbn.com>


Chris English <sglish at hotmail.com> writes:

> Just to close this out,
> New York New Jersey FEMA advisory Base Flood Elevations are ESPG:3857

I don't follow.  EPSG:3857 seems to be 'web mercator', which is a 2D
coordinate system and thus cannnot have height.  The string you sent
before had a navd88 height for the vertical.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130205/f18eda2e/attachment.pgp>

From brett.walker at geometryit.com  Tue Feb  5 15:05:35 2013
From: brett.walker at geometryit.com (Brett Walker)
Date: Wed, 6 Feb 2013 10:05:35 +1100
Subject: [gdal-dev] orginfo unable to open GPX file
In-Reply-To: <1778198.sQgbbifafp@belzebuth>
References: <4B95BC7335A13A42AD0D23462F91AE6F616D28C027@echo.geometryit.com>
	<1778198.sQgbbifafp@belzebuth>
Message-ID: <4B95BC7335A13A42AD0D23462F91AE6F616D28C03B@echo.geometryit.com>

Hi Richard,

After further investigation I suspect that it is the configuration of my Linux box. It reports that it is GPX enabled but after adding an XML header (<?xml version="1.0" encoding="UTF-8"?>) to the file it reported that it cannot find the expat library. This is more informative that the error message I posted the other day. Are tests done on the reading of GPX file without the XML header?

Windows is my native platform, so with my lack of experience, I may have screwed up the environment. I feel that it is more likely to be my problem rather than GDAL's.

After assessing our business needs, using GDAL/OGR to read GPX is a bit excessive. We have decided to write out own XML parser to read GPX. So my desire to have this problem resolved has disappeared.

I'm happy to file a ticket with a GPX file attached but this could create unnecessary work. Is it warranted now?

Brett

-----Original Message-----
From: Richard Didier [mailto:didier.richard at ign.fr] 
Sent: Tuesday, 5 February 2013 7:40 PM
To: Brett Walker
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] orginfo unable to open GPX file

Le mardi 5 f?vrier 2013 15:14:16 Brett Walker a ?crit :
> HI,
> 

Hello Brett,

> I have compiled GDAL/OGR with support for GPX files. 'ogrinfo -formats'
> reports '-> "GPX" (read/write)'. This I take as being good  that GPX 
> support is enabled.
> 
> When I run  the following command: 'ogrinfo -ro -al Track_003.gpx' it
> reports:
> 
> FAILURE:
> Unable to open datasource `Track_003.gpx' with the following drivers.
> 
> With a list of drivers; GPX being one of  them.
> 
> 'Track_003.gpx' is in the current directory.
> 
> What could be wrong? What to look for? How to solve this problem?
> 

Could you file a ticket about that, with the gpx file attached,  in http://trac.osgeo.org/gdal/newticket and add 'dgrichard' (me) in the CC field

Regards,

didier

> Brett
> 
> Brett Walker
> <brett.walker at geometryit.com<mailto:brett.walker at geometryit.com>> 
> Software Developer / Analyst Geometry Pty Ltd
> 
> Telephone               03 6223 1999
> Mobile                     0458 498 386
> Fax                          03 6223 1988
> Web                        www.geometryit.com<http://www.geometryit.com/>
> Address                   31 Salamanca Square, Battery Point, TAS 7004,
> Australia
--
RICHARD Didier - Chef du p?le technique du G?oportail 2/4, avenue Pasteur - 94165 Saint Mand? Cedex T?l : +33 (0) 1 43 98 83 23


From even.rouault at mines-paris.org  Tue Feb  5 15:43:17 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 6 Feb 2013 00:43:17 +0100
Subject: [gdal-dev] orginfo unable to open GPX file
In-Reply-To: <4B95BC7335A13A42AD0D23462F91AE6F616D28C03B@echo.geometryit.com>
References: <4B95BC7335A13A42AD0D23462F91AE6F616D28C027@echo.geometryit.com>
	<1778198.sQgbbifafp@belzebuth>
	<4B95BC7335A13A42AD0D23462F91AE6F616D28C03B@echo.geometryit.com>
Message-ID: <201302060043.17176.even.rouault@mines-paris.org>

Le mercredi 06 f?vrier 2013 00:05:35, Brett Walker a ?crit :
> Hi Richard,
> 
> After further investigation I suspect that it is the configuration of my
> Linux box. It reports that it is GPX enabled but after adding an XML
> header (<?xml version="1.0" encoding="UTF-8"?>) to the file it reported
> that it cannot find the expat library. 

ok, this means that your GDAL build has not been configured with libexpat 
support. Check that the expat-dev or so package is installed and rebuilld 
GDAL.

> This is more informative that the
> error message I posted the other day. Are tests done on the reading of GPX
> file without the XML header?

The <?xml> stuff is not necessary in my testing for the OGR GPX driver to work.

> --
> RICHARD Didier - Chef du p?le technique du G?oportail 2/4, avenue Pasteur -
> 94165 Saint Mand? Cedex T?l : +33 (0) 1 43 98 83 23
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Tue Feb  5 15:55:57 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 6 Feb 2013 00:55:57 +0100
Subject: [gdal-dev] GDAL RPC protocol to make GDAL (more) failsafe
Message-ID: <201302060055.57471.even.rouault@mines-paris.org>

Hi,

Just to inform you that I've just commited in trunk a new feature.

See http://trac.osgeo.org/gdal/ticket/4979 :

"""
When dealing with some file formats, particularly the drivers relying on third-
party (potentially closed-source) libraries, it is difficult to ensure that 
those third-party libraries will be robust to hostile/corrupted datasource. 
The implemented solution is to have a fake driver that will expose a 
GDALClientDataset object that will forward all the API calls to another 
process ("server") where the real driver will be run. This way, if the server 
segfaults, the calling process will be unaffected and will report a clean error 
instead of segfaulting itself. 
This is controlled by setting the GDAL_RPC config option to YES. The option can 
also be set to a list of file extensions that must be the only ones to trigger 
this mechanism (e.g. GDAL_RPC=ecw,sid) 
For now, the server launched is the gdalserver executable on Windows. On Unix, 
the default behaviour is to just fork() the current process (the gdalserver 
executable can also be execvp()'ed by forcing GDAL_RPC_SERVER=YES). 
To avoid the cost of forking()/CreateProcess(), a pool of connections is used. 
This is controlled with the GDAL_RPC_RECYCLE config option that is set to YES 
by default. 
Note: the client/server approach can also be used for thread unsafe drivers 
(not actually tested). 
"""
Demo with a corrupted ECW file :
Normal GDAL run :
$ gdalinfo corrupted.ecw -checksum
Driver: ECW/ERDAS Compressed Wavelets (SDK 3.x)
Files: corrupted.ecw
Size is 128, 128
Coordinate System is:
[ ... snip ... ]
Band 1 Block=256x256 Type=Byte, ColorInterp=Gray
Segmentation fault

Under the RPC mechanism :

$ gdalinfo corrupted.ecw -checksum --config GDAL_RPC YES

Driver: ECW/ERDAS Compressed Wavelets (SDK 3.x)
Files: corrupted.ecw
Size is 128, 128
Coordinate System is:
[ ... snip ... ]
Band 1 Block=256x256 Type=Byte, ColorInterp=Gray
ERROR 1: Read from pipe failed
ERROR 3: Checksum value couldn't be computed due to I/O read error.

  Checksum=0
  Mask Flags: 
  Offset: 0,   Scale:0

Of course, there's a small performance cost associated to the RPC round-trips.


Best regards,

Even

From dshean at uw.edu  Tue Feb  5 17:00:57 2013
From: dshean at uw.edu (David Shean)
Date: Tue, 5 Feb 2013 17:00:57 -0800
Subject: [gdal-dev] GDAL RPC protocol to make GDAL (more) failsafe
In-Reply-To: <201302060055.57471.even.rouault@mines-paris.org>
References: <201302060055.57471.even.rouault@mines-paris.org>
Message-ID: <856EC2A3-D6EC-4576-899D-0D57BDBD7C47@uw.edu>

Even,
This sounds great.  I'm guessing RPC in this context stands for "Remote Procedure Call."  It seems like this could potentially lead to some confusion with existing GDAL functionality (e.g., gdal_rpc.cpp) and options (e.g. RPC_DEM) where RPC stands for "Rational Polynomial Coefficients" used during warping/orthorectification.  I suppose that as long as the documentation is clear, this won't be a major issue.  Just thought I'd mention it.
-David

On Feb 5, 2013, at 3:55 PM, Even Rouault wrote:

> Hi,
> 
> Just to inform you that I've just commited in trunk a new feature.
> 
> See http://trac.osgeo.org/gdal/ticket/4979 :
> 
> """
> When dealing with some file formats, particularly the drivers relying on third-
> party (potentially closed-source) libraries, it is difficult to ensure that 
> those third-party libraries will be robust to hostile/corrupted datasource. 
> The implemented solution is to have a fake driver that will expose a 
> GDALClientDataset object that will forward all the API calls to another 
> process ("server") where the real driver will be run. This way, if the server 
> segfaults, the calling process will be unaffected and will report a clean error 
> instead of segfaulting itself. 
> This is controlled by setting the GDAL_RPC config option to YES. The option can 
> also be set to a list of file extensions that must be the only ones to trigger 
> this mechanism (e.g. GDAL_RPC=ecw,sid) 
> For now, the server launched is the gdalserver executable on Windows. On Unix, 
> the default behaviour is to just fork() the current process (the gdalserver 
> executable can also be execvp()'ed by forcing GDAL_RPC_SERVER=YES). 
> To avoid the cost of forking()/CreateProcess(), a pool of connections is used. 
> This is controlled with the GDAL_RPC_RECYCLE config option that is set to YES 
> by default. 
> Note: the client/server approach can also be used for thread unsafe drivers 
> (not actually tested). 
> """
> Demo with a corrupted ECW file :
> Normal GDAL run :
> $ gdalinfo corrupted.ecw -checksum
> Driver: ECW/ERDAS Compressed Wavelets (SDK 3.x)
> Files: corrupted.ecw
> Size is 128, 128
> Coordinate System is:
> [ ... snip ... ]
> Band 1 Block=256x256 Type=Byte, ColorInterp=Gray
> Segmentation fault
> 
> Under the RPC mechanism :
> 
> $ gdalinfo corrupted.ecw -checksum --config GDAL_RPC YES
> 
> Driver: ECW/ERDAS Compressed Wavelets (SDK 3.x)
> Files: corrupted.ecw
> Size is 128, 128
> Coordinate System is:
> [ ... snip ... ]
> Band 1 Block=256x256 Type=Byte, ColorInterp=Gray
> ERROR 1: Read from pipe failed
> ERROR 3: Checksum value couldn't be computed due to I/O read error.
> 
>  Checksum=0
>  Mask Flags: 
>  Offset: 0,   Scale:0
> 
> Of course, there's a small performance cost associated to the RPC round-trips.
> 
> 
> Best regards,
> 
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Tue Feb  5 17:14:47 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 6 Feb 2013 02:14:47 +0100
Subject: [gdal-dev] GDAL RPC protocol to make GDAL (more) failsafe
In-Reply-To: <3388403E-540C-4686-9891-E1422D33004B@gmail.com>
References: <201302060055.57471.even.rouault@mines-paris.org>
	<3388403E-540C-4686-9891-E1422D33004B@gmail.com>
Message-ID: <201302060214.47920.even.rouault@mines-paris.org>

Le mercredi 06 f?vrier 2013 01:59:46, David Shean a ?crit :
> This sounds great.  I'm guessing RPC in this context stands for "Remote
> Procedure Call."  It seems like this could potentially lead to some
> confusion with existing GDAL functionality (e.g., gdal_rpc.cpp) and
> options (e.g. RPC_DEM) where RPC stands for "Rational Polynomial
> Coefficients" used during warping/orthorectification.  I suppose that as
> long as the documentation is clear, this won't be a major issue.  Just
> thought I'd mention it. -David

David,

Good point. The naming could be confusing indeed. I'm open to better 
suggestions to avoid the confusion : GDAL_REMOTE perhaps ?


From yehil at rafael.co.il  Tue Feb  5 21:26:31 2013
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Wed, 6 Feb 2013 07:26:31 +0200
Subject: [gdal-dev] GDAL RPC protocol to make GDAL (more) failsafe
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0CAF3DB73B9@MAILBOXSERVER.rf.local>

Perhaps GDAL_PROXY?
-----------------------------
From: "Even Rouault"
Subject: Re: [gdal-dev] GDAL RPC protocol to make GDAL (more) failsafe
Date: 06 ?????? 2013 03:16



Sent by emoze push mail

Le mercredi 06 f?vrier 2013 01:59:46, David Shean a ?crit :
> This sounds great.  I'm guessing RPC in this context stands for "Remote
> Procedure Call."  It seems like this could potentially lead to some
> confusion with existing GDAL functionality (e.g., gdal_rpc.cpp) and
> options (e.g. RPC_DEM) where RPC stands for "Rational Polynomial
> Coefficients" used during warping/orthorectification.  I suppose that as
> long as the documentation is clear, this won't be a major issue.  Just
> thought I'd mention it. -David

David,

Good point. The naming could be confusing indeed. I'm open to better
suggestions to avoid the confusion : GDAL_REMOTE perhaps ?

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

p

________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130206/1dc3400e/attachment.html>

From even.rouault at mines-paris.org  Wed Feb  6 08:33:46 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 06 Feb 2013 17:33:46 +0100
Subject: [gdal-dev] GDAL RPC protocol to make GDAL (more) failsafe
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0CAF3DB73B9@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0CAF3DB73B9@MAILBOXSERVER.rf.local>
Message-ID: <1360168426.511285ea3b65e@imp.free.fr>

Selon Livneh Yehiyam <yehil at rafael.co.il>:

> Perhaps GDAL_PROXY?

This is a possibility, although there's already a GDALProxyDataset class in
GDAL, subclassed by GDALProxyPoolDataset, that is used internally by some
drivers (VRT, RPFTOC) that want to proxy the access to underlying datasets
without having all the underlying tile datasets opened.

Technically the new feature is very close to the "remote proxy" design pattern.
Except that the "remote" here is currently just another process on the same host
(but the protocol isn't based on that assumption, so, with additionnal code for
a connect/accept logic, the server could lie on another host).

All in all, i'm ok with GDAL_PROXY if nobody else has a better suggestion.

Best regards,

Even

From mateusz at loskot.net  Wed Feb  6 08:40:19 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 6 Feb 2013 16:40:19 +0000
Subject: [gdal-dev] GDAL RPC protocol to make GDAL (more) failsafe
In-Reply-To: <1360168426.511285ea3b65e@imp.free.fr>
References: <C5D1974ECA44D2429ECBC64B967C34C0CAF3DB73B9@MAILBOXSERVER.rf.local>
	<1360168426.511285ea3b65e@imp.free.fr>
Message-ID: <CABUeae8yCOJ_tZJxoYndNymVArcp1JOaD3HDz-Y_=xckFxESHw@mail.gmail.com>

On 6 February 2013 16:33, Even Rouault <even.rouault at mines-paris.org> wrote:
>
> All in all, i'm ok with GDAL_PROXY if nobody else has a better suggestion.

GDAL_API_RPC
GDAL_API_PROXY
GDAL_API_SERVER

to clearly indicate the purpose: interacting with API calls.
Otherwise, it may be easily confused with i.e. Web features and such.

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net

From bishop.dev at gmail.com  Wed Feb  6 09:48:23 2013
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Wed, 06 Feb 2013 21:48:23 +0400
Subject: [gdal-dev] GDAL RPC protocol to make GDAL (more) failsafe
In-Reply-To: <CABUeae8yCOJ_tZJxoYndNymVArcp1JOaD3HDz-Y_=xckFxESHw@mail.gmail.com>
References: <C5D1974ECA44D2429ECBC64B967C34C0CAF3DB73B9@MAILBOXSERVER.rf.local>
	<1360168426.511285ea3b65e@imp.free.fr>
	<CABUeae8yCOJ_tZJxoYndNymVArcp1JOaD3HDz-Y_=xckFxESHw@mail.gmail.com>
Message-ID: <51129767.2040500@gmail.com>

Mateusz
+1

I vote for GDAL_API_PROXY.

Best regards,
     Dmitriy

06.02.2013 20:40, Mateusz Loskot ?????:
> On 6 February 2013 16:33, Even Rouault <even.rouault at mines-paris.org> wrote:
>> All in all, i'm ok with GDAL_PROXY if nobody else has a better suggestion.
> GDAL_API_RPC
> GDAL_API_PROXY
> GDAL_API_SERVER
>
> to clearly indicate the purpose: interacting with API calls.
> Otherwise, it may be easily confused with i.e. Web features and such.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From chris.barker at noaa.gov  Wed Feb  6 09:57:46 2013
From: chris.barker at noaa.gov (Chris Barker - NOAA Federal)
Date: Wed, 6 Feb 2013 09:57:46 -0800
Subject: [gdal-dev] GDAL RPC protocol to make GDAL (more) failsafe
In-Reply-To: <51129767.2040500@gmail.com>
References: <C5D1974ECA44D2429ECBC64B967C34C0CAF3DB73B9@MAILBOXSERVER.rf.local>
	<1360168426.511285ea3b65e@imp.free.fr>
	<CABUeae8yCOJ_tZJxoYndNymVArcp1JOaD3HDz-Y_=xckFxESHw@mail.gmail.com>
	<51129767.2040500@gmail.com>
Message-ID: <CALGmxELP6=eJMWemVZ4zC89RZEEztpZjw=rz0cbxLgATKBwRWw@mail.gmail.com>

>> GDAL_API_RPC
>> GDAL_API_PROXY
>> GDAL_API_SERVER

IIUC, the proposed functionality is not really a Remote Procedure
Call, or a Proxy, or a SErver.

i.e.  could the driver be run on a remote server with this mechanism?

Rather, it is a way to run a driver in a  sub-process. So maybe:

DGAL_SUBPROCESS

or something like that?

(Ignore this if I mis-understand what you've done here)

-Chris


-- 

Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov

From even.rouault at mines-paris.org  Wed Feb  6 11:29:28 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 6 Feb 2013 20:29:28 +0100
Subject: [gdal-dev] GDAL RPC protocol to make GDAL (more) failsafe
In-Reply-To: <CALGmxELP6=eJMWemVZ4zC89RZEEztpZjw=rz0cbxLgATKBwRWw@mail.gmail.com>
References: <C5D1974ECA44D2429ECBC64B967C34C0CAF3DB73B9@MAILBOXSERVER.rf.local>
	<51129767.2040500@gmail.com>
	<CALGmxELP6=eJMWemVZ4zC89RZEEztpZjw=rz0cbxLgATKBwRWw@mail.gmail.com>
Message-ID: <201302062029.28988.even.rouault@mines-paris.org>

Le mercredi 06 f?vrier 2013 18:57:46, Chris Barker - NOAA Federal a ?crit :
> >> GDAL_API_RPC
> >> GDAL_API_PROXY
> >> GDAL_API_SERVER
> 
> IIUC, the proposed functionality is not really a Remote Procedure
> Call, or a Proxy, or a SErver.
> 
> i.e.  could the driver be run on a remote server with this mechanism?
> 
> Rather, it is a way to run a driver in a  sub-process. So maybe:
> 
> DGAL_SUBPROCESS
> 
> or something like that?
> 
> (Ignore this if I mis-understand what you've done here)

I've finally opted for GDAL_API_PROXY. A new page of documentation will be 
linked from the Doxygen doc of GDALOpen(), GDALCreate() and GDALCreateCopy()

Chris, GDAL_SUBPROCESS matches indeed the current state of the implementation. 
However, as I answered to Livneh, it could be moredately easy to extend it to 
work with a real remote server, so I prefer to keep it generic with 
GDAL_API_PROXY.

> 
> -Chris

From chenshuqing82 at gmail.com  Wed Feb  6 13:51:21 2013
From: chenshuqing82 at gmail.com (Shuqing Chen)
Date: Wed, 6 Feb 2013 22:51:21 +0100
Subject: [gdal-dev] GDAL Question about the band/frequence information
In-Reply-To: <CA+o=fQC5fKMsd_UOyF2HXpH9yqR7b3o27xJNPeWSq2Gq5gR4dQ@mail.gmail.com>
References: <CA+o=fQC5fKMsd_UOyF2HXpH9yqR7b3o27xJNPeWSq2Gq5gR4dQ@mail.gmail.com>
Message-ID: <CA+o=fQDB9FMC6LBocH4o1hzLRsJe4WB4917tPCiZOS_2LX2Dyg@mail.gmail.com>

Hello GDAL Developers,

I have intergrated your GDAL library in my Multi Spectra analysis Project.
It works very well and ease to use.
A question is how can I find the band/frequence information for each band
in image dataset? Thank you in advance.

Best regards,
Shuqing Chen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130206/d0011098/attachment.html>

From warmerdam at pobox.com  Wed Feb  6 13:59:44 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 6 Feb 2013 13:59:44 -0800
Subject: [gdal-dev] GDAL Question about the band/frequence information
In-Reply-To: <CA+o=fQDB9FMC6LBocH4o1hzLRsJe4WB4917tPCiZOS_2LX2Dyg@mail.gmail.com>
References: <CA+o=fQC5fKMsd_UOyF2HXpH9yqR7b3o27xJNPeWSq2Gq5gR4dQ@mail.gmail.com>
	<CA+o=fQDB9FMC6LBocH4o1hzLRsJe4WB4917tPCiZOS_2LX2Dyg@mail.gmail.com>
Message-ID: <CA+YzLBc4Wak84fwcxi6dGQBe79rnVZ6cYMWBDUU0s4QV6Pc8uw@mail.gmail.com>

Shuqing,

GDAL does not have a well defined name for metadata describing a bands
wavelength.  Some data products carry this in their metadata and it
may be carried through via the GDAL generic metadata at either the
band or dataset level.  Running gdalinfo against a file will show such
generic metadata if it exists.  If not, you are out of luck.  :-(  In
any event since there is no consistent approach to this you are going
to be stuck doing product specific things, likely based on researching
the each sensor yourself.

Best regards,
Frank



On Wed, Feb 6, 2013 at 1:51 PM, Shuqing Chen <chenshuqing82 at gmail.com> wrote:
>
> Hello GDAL Developers,
>
> I have intergrated your GDAL library in my Multi Spectra analysis Project.
> It works very well and ease to use.
> A question is how can I find the band/frequence information for each band in
> image dataset? Thank you in advance.
>
> Best regards,
> Shuqing Chen
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From kochizufan at gmail.com  Wed Feb  6 16:12:06 2013
From: kochizufan at gmail.com (OHTSUKA Ko-hei)
Date: Thu, 7 Feb 2013 09:12:06 +0900
Subject: [gdal-dev] Can I get transformed coordinate value in gdalwarp?
Message-ID: <CAKs-9JK6pobTx-8Eq7UrkQVjGjo0AHaSGsj8_6tHQt47hVAFiQ@mail.gmail.com>

Hello,

I'll try to change many raster images into geotiffs using gdal (gdalwarp).
And, want to know where each image's non -gcp pixel points  will move to.

For example,

If image's point (300,400) will move to GeoTiff's (135e,35n),
by using gcps (200,300 => 130e,40n), (200,500 => 130e, 30n), and (400,
300 => 140e, 40n),
I want to know this change (300,400 => 135e,35n).
And also, (250, 400) moves where? (350, 200) is? and so on.

Is there any function to get this value?
Or, I also understand program a little, it is OK if it needs some coding.

Thanks,
Ko-hei

From even.rouault at mines-paris.org  Wed Feb  6 16:24:40 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 7 Feb 2013 01:24:40 +0100
Subject: [gdal-dev] Can I get transformed coordinate value in gdalwarp?
In-Reply-To: <CAKs-9JK6pobTx-8Eq7UrkQVjGjo0AHaSGsj8_6tHQt47hVAFiQ@mail.gmail.com>
References: <CAKs-9JK6pobTx-8Eq7UrkQVjGjo0AHaSGsj8_6tHQt47hVAFiQ@mail.gmail.com>
Message-ID: <201302070124.41098.even.rouault@mines-paris.org>

Le jeudi 07 f?vrier 2013 01:12:06, OHTSUKA Ko-hei a ?crit :
> Hello,
> 
> I'll try to change many raster images into geotiffs using gdal (gdalwarp).
> And, want to know where each image's non -gcp pixel points  will move to.
> 
> For example,
> 
> If image's point (300,400) will move to GeoTiff's (135e,35n),
> by using gcps (200,300 => 130e,40n), (200,500 => 130e, 30n), and (400,
> 300 => 140e, 40n),
> I want to know this change (300,400 => 135e,35n).
> And also, (250, 400) moves where? (350, 200) is? and so on.
> 
> Is there any function to get this value?
> Or, I also understand program a little, it is OK if it needs some coding.

I believe that http://gdal.org/gdaltransform.html should fit your need.

> 
> Thanks,
> Ko-hei
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From kochizufan at gmail.com  Wed Feb  6 16:33:19 2013
From: kochizufan at gmail.com (OHTSUKA Ko-hei)
Date: Thu, 7 Feb 2013 09:33:19 +0900
Subject: [gdal-dev] Can I get transformed coordinate value in gdalwarp?
In-Reply-To: <201302070124.41098.even.rouault@mines-paris.org>
References: <CAKs-9JK6pobTx-8Eq7UrkQVjGjo0AHaSGsj8_6tHQt47hVAFiQ@mail.gmail.com>
	<201302070124.41098.even.rouault@mines-paris.org>
Message-ID: <CAKs-9J+Vy6L1hka+5-SiCQoUyD_T7H3dCuuD_07Ya7ssBO4fhQ@mail.gmail.com>

Even,

Thank you for quick reply.
I don't know this command, and it maybe suit for my needs.

2013/2/7 Even Rouault <even.rouault at mines-paris.org>:
> Le jeudi 07 f?vrier 2013 01:12:06, OHTSUKA Ko-hei a ?crit :
>> Hello,
>>
>> I'll try to change many raster images into geotiffs using gdal (gdalwarp).
>> And, want to know where each image's non -gcp pixel points  will move to.
>>
>> For example,
>>
>> If image's point (300,400) will move to GeoTiff's (135e,35n),
>> by using gcps (200,300 => 130e,40n), (200,500 => 130e, 30n), and (400,
>> 300 => 140e, 40n),
>> I want to know this change (300,400 => 135e,35n).
>> And also, (250, 400) moves where? (350, 200) is? and so on.
>>
>> Is there any function to get this value?
>> Or, I also understand program a little, it is OK if it needs some coding.
>
> I believe that http://gdal.org/gdaltransform.html should fit your need.
>
>>
>> Thanks,
>> Ko-hei
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From nikhil.parupalli at iictechnologies.com  Wed Feb  6 21:18:42 2013
From: nikhil.parupalli at iictechnologies.com (Nikhil Sai Parupalli)
Date: Thu, 7 Feb 2013 05:18:42 +0000
Subject: [gdal-dev] Gdal compatibility with windows 8
Message-ID: <139560E1825F4648BDA4F32853B530A78CC04EC5@IICEXHCM.iictechnologies.local>

Hi All,

I have used gdal latest version for my application developed on windows 7..
As our organisation is migrating to windows 8 , I  want to check whether gdal is supported in windows 8



Thanks and Regards
Nikhil Sai Parupalli



Note: Do not print this email until and unless it is really required. Save paper , stay Green
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130207/0fc91e03/attachment.html>

From jluis at ualg.pt  Thu Feb  7 06:15:55 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu, 07 Feb 2013 14:15:55 +0000
Subject: [gdal-dev] Gdal compatibility with windows 8
In-Reply-To: <139560E1825F4648BDA4F32853B530A78CC04EC5@IICEXHCM.iictechnologies.local>
References: <139560E1825F4648BDA4F32853B530A78CC04EC5@IICEXHCM.iictechnologies.local>
Message-ID: <5113B71B.2080607@ualg.pt>

Nikhil,

I don't have the python tests running and my experience on a Win8 
machine is still limited (it's not my main working computer) but so far 
I haven't encounter any problem with either VC10 and VC11 GDAL builds 
(which I built too).

Joaquim

> Hi All,
>
> I have used gdal latest version for my application developed 
> on windows 7..
> As our organisation is migrating to windows 8 , I  want to check 
> whether gdal is supported in windows 8
>
>
>
> Thanks and Regards
> Nikhil Sai Parupalli
>
>
>
> Note: Do not print this email until and unless it is really required. 
> Save paper , stay Green
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130207/55b5e916/attachment.html>

From nikhil.parupalli at iictechnologies.com  Thu Feb  7 21:35:49 2013
From: nikhil.parupalli at iictechnologies.com (Nikhil Sai Parupalli)
Date: Fri, 8 Feb 2013 05:35:49 +0000
Subject: [gdal-dev] Gdal compatibility with windows 8
In-Reply-To: <5113B71B.2080607@ualg.pt>
References: <139560E1825F4648BDA4F32853B530A78CC04EC5@IICEXHCM.iictechnologies.local>,
	<5113B71B.2080607@ualg.pt>
Message-ID: <139560E1825F4648BDA4F32853B530A78CC04F40@IICEXHCM.iictechnologies.local>

Hi All.

After all the system migration I could use GDAL in my windows 8 system and as of now no problem has encountered

Thanks and Regards
Nikhil Sai Parupalli



Note: Do not print this email until and unless it is really required. Save paper , stay Green
________________________________
From: gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org] on behalf of Joaquim Luis [jluis at ualg.pt]
Sent: Thursday, February 07, 2013 7:45 PM
To: Nikhil Sai Parupalli
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Gdal compatibility with windows 8

Nikhil,

I don't have the python tests running and my experience on a Win8 machine is still limited (it's not my main working computer) but so far I haven't encounter any problem with either VC10 and VC11 GDAL builds (which I built too).

Joaquim

Hi All,

I have used gdal latest version for my application developed on windows 7..
As our organisation is migrating to windows 8 , I  want to check whether gdal is supported in windows 8



Thanks and Regards
Nikhil Sai Parupalli



Note: Do not print this email until and unless it is really required. Save paper , stay Green



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130208/19401fba/attachment.html>

From kochizufan at gmail.com  Fri Feb  8 02:07:19 2013
From: kochizufan at gmail.com (OHTSUKA Ko-hei)
Date: Fri, 8 Feb 2013 19:07:19 +0900
Subject: [gdal-dev] gdal on iOS
Message-ID: <CAKs-9JJGJ6NCx2FJa-8Wk-fcX_A-z9LKOzOtLUcdCYud5zHNXw@mail.gmail.com>

Hello,

I want to compile gdal on iOS, and found this page.
http://stackoverflow.com/questions/12643898/incorporating-gdal-ogr-into-an-ios-project-a-quick-guide

I tried this, but it stopped with error.

> In file included from hugefileresolver.cpp:57:
> /usr/include/sqlite3.h:4493: error: expected initializer before '__AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_5_0'
> make[3]: *** [../o/hugefileresolver.lo] Error 1
> make[2]: *** [gml-target] Error 2
> make[1]: *** [sublibs] Error 2
> make: *** [ogr-target] Error 2

I found also this page,
http://www.linkedin.com/groups/SQLite3-Lion-121874.S.62966926
So I change hugefileresolver.cpp's include command, but same result.


Is there someone who success compiling gdal for iOS?

From xenon at alphapixel.com  Fri Feb  8 07:16:10 2013
From: xenon at alphapixel.com (Chris Hanson)
Date: Fri, 8 Feb 2013 08:16:10 -0700
Subject: [gdal-dev] gdal on iOS
In-Reply-To: <CAKs-9JJGJ6NCx2FJa-8Wk-fcX_A-z9LKOzOtLUcdCYud5zHNXw@mail.gmail.com>
References: <CAKs-9JJGJ6NCx2FJa-8Wk-fcX_A-z9LKOzOtLUcdCYud5zHNXw@mail.gmail.com>
Message-ID: <CAGoufmaG-TR9uhqExWitqmqVW8cFF--mf7SdSz3srSzvauwF4Q@mail.gmail.com>

I think we did it. I can ask if there were any weird tricks.


On Fri, Feb 8, 2013 at 3:07 AM, OHTSUKA Ko-hei <kochizufan at gmail.com> wrote:

> Hello,
>
> I want to compile gdal on iOS, and found this page.
>
> http://stackoverflow.com/questions/12643898/incorporating-gdal-ogr-into-an-ios-project-a-quick-guide
>
> I tried this, but it stopped with error.
>
> > In file included from hugefileresolver.cpp:57:
> > /usr/include/sqlite3.h:4493: error: expected initializer before
> '__AVAILABILITY_INTERNAL__IPHONE_2_0_DEP__IPHONE_5_0'
> > make[3]: *** [../o/hugefileresolver.lo] Error 1
> > make[2]: *** [gml-target] Error 2
> > make[1]: *** [sublibs] Error 2
> > make: *** [ogr-target] Error 2
>
> I found also this page,
> http://www.linkedin.com/groups/SQLite3-Lion-121874.S.62966926
> So I change hugefileresolver.cpp's include command, but same result.
>
>
> Is there someone who success compiling gdal for iOS?
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Chris 'Xenon' Hanson, omo sanza lettere. Xenon at AlphaPixel.com
http://www.alphapixel.com/
Training ? Consulting ? Contracting
3D ? Scene Graphs (Open Scene Graph/OSG) ? OpenGL 2 ? OpenGL 3 ? OpenGL 4 ?
GLSL ? OpenGL ES 1 ? OpenGL ES 2 ? OpenCL
Digital Imaging ? GIS ? GPS ? osgEarth ? Terrain ? Telemetry ? Cryptography
? Digital Audio ? LIDAR ? Kinect ? Embedded ? Mobile ? iPhone/iPad/iOS ?
Android
@alphapixel <https://twitter.com/alphapixel> facebook.com/alphapixel (775)
623-PIXL [7495]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130208/0d57684f/attachment.html>

From rob-news at gmx.de  Fri Feb  8 08:44:12 2013
From: rob-news at gmx.de (Robert Kulawik)
Date: Fri, 08 Feb 2013 17:44:12 +0100
Subject: [gdal-dev] Issue with GDAL WCS 1.1.x request
Message-ID: <51152B5C.3050507@gmx.de>

Hi List,

i try to request my Geoserver WCS (GS version 2.2.x, request 1.1.x) with
GDAL 1.9.1.

Here is the coverage description from Geoserver:
http://193.175.162.189/geoserver/wcs?request=DescribeCoverage&identifiers=raster_example_20130208_113005_078&VERSION=1.1.0
http://193.175.162.189/geoserver/wcs?request=DescribeCoverage&identifiers=raster_example_20130208_113005_078&VERSION=1.1.1

When i specify the version in the GDAL request, e.g.
<WCS_GDAL>
<ServiceURL>http://193.175.162.189/geoserver/wcs?</ServiceURL>
<CoverageName>raster_example_20130208_113005_078</CoverageName>
<Version>1.1.0</Version>
</WCS_GDAL>

i get the response:
C:\OSGeo4W\bin>gdalinfo wcs.xml
ERROR 1: java.lang.IllegalArgumentException: The specified dimensional
parameter is non-positive.
The specified dimensional parameter is non-positive.
gdalinfo failed - unable to open 'wcs.xml'.

I asked this with a other background in the Geoserver-user list:
http://osgeo-org.1560.n6.nabble.com/Issue-with-noValue-in-WCS-coverageOfferings-tp5033051.html

and it seems, GDAL does not consider the axis swiching in WCS 1.1.x
It is possible to specify (or add) the axis order in the GDAL request?

Has someone a solution or a idea for this?
Thanks in advance
Robert


From jukka.rahkonen at mmmtike.fi  Fri Feb  8 09:25:44 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 8 Feb 2013 17:25:44 +0000 (UTC)
Subject: [gdal-dev] Issue with GDAL WCS 1.1.x request
References: <51152B5C.3050507@gmx.de>
Message-ID: <loom.20130208T181538-610@post.gmane.org>

Robert Kulawik <rob-news <at> gmx.de> writes:

> 
> Hi List,
> 
> i try to request my Geoserver WCS (GS version 2.2.x, request 1.1.x) with
> GDAL 1.9.1.
> 
> Here is the coverage description from Geoserver:
>
http://193.175.162.189/geoserver/wcs?request=DescribeCoverage&identifiers=raster_example_20130208_113005_078&VERSION=1.1.0
>
http://193.175.162.189/geoserver/wcs?request=DescribeCoverage&identifiers=raster_example_20130208_113005_078&VERSION=1.1.1
> 
> When i specify the version in the GDAL request, e.g.
> <WCS_GDAL>
> <ServiceURL>http://193.175.162.189/geoserver/wcs?</ServiceURL>
> <CoverageName>raster_example_20130208_113005_078</CoverageName>
> <Version>1.1.0</Version>
> </WCS_GDAL>
> 
> i get the response:
> C:\OSGeo4W\bin>gdalinfo wcs.xml
> ERROR 1: java.lang.IllegalArgumentException: The specified dimensional
> parameter is non-positive.
> The specified dimensional parameter is non-positive.
> gdalinfo failed - unable to open 'wcs.xml'.
> 
> I asked this with a other background in the Geoserver-user list:
>
http://osgeo-org.1560.n6.nabble.com/Issue-with-noValue-in-WCS-coverageOfferings-tp5033051.html
> 
> and it seems, GDAL does not consider the axis swiching in WCS 1.1.x
> It is possible to specify (or add) the axis order in the GDAL request?
> 
> Has someone a solution or a idea for this?
> Thanks in advance
> Robert

I tried to investigate this case a bit on the Geoserver user list. The java
illegal argument error comes from Geoserver and because GDAL is sending BBOX
coordinates in lat-lon order. 
This is captured from the GetCoverage request that was sent by gdalinfo
BOUNDINGBOX=-116.917,32.41666843,-116.75033333,32.5833351,
urn:ogc:def:crs:EPSG::4326

However, I feel it may be because a bit earlier the same Geoserver has 
responded to DescribeCoverage request that was sent by GDAL as
<wcs:GridCRS><wcs:GridBaseCRS>urn:ogc:def:crs:EPSG::4326</wcs:GridBaseCRS>
<wcs:GridType>urn:ogc:def:method:WCS:1.1:2dGridIn2dCrs</wcs:GridType>
<wcs:GridOrigin>-116.91699999999997 32.5833351</wcs:GridOrigin>
<wcs:GridOffsets>0.16666667 0.0 0.0 -0.16666667</wcs:GridOffsets>
<wcs:GridCS>urn:ogc:def:cs:OGC:0.0:Grid2dSquareCS
</wcs:GridCS></wcs:GridCRS>

Does gdalinfo build the little GetCoverage request it is sending based on the
GridOrigin metadata it has queried from WCS server? And is this case the real
reason for the trouble caused by the wrong GridOrigin and GridOffsets metadata?

-Jukka Rahkonen-






From chapmanm at pixia.com  Fri Feb  8 14:35:26 2013
From: chapmanm at pixia.com (Martin Chapman)
Date: Fri, 08 Feb 2013 17:35:26 -0500 (EST)
Subject: [gdal-dev] Pixel remap using the warp api question
Message-ID: <5897cff3.00000ca4.00000024@CHAPMANM7.pixia.local>

I asked the following a couple of weeks ago and never got a reply.  Frank,
can you comment on this please?

 

.

 

I am trying to remap all "0" value pixels in the source images to the
value "1" in the output image using gdalwarp like so:

 

warpOptions->padfSrcNoDataReal[bandIndex] = 0;

warpOptions->padfSrcNoDataImag[bandIndex] = NULL;

warpOptions->padfDstNoDataReal[bandIndex] = 1;

warpOptions->padfDstNoDataImag[bandIndex] = NULL;

 

1. I am setting INIT_DEST=0.

2. not setting UNIFIED_SRC_NODATA.

3. the source images have no defined nodata value.

4. the output image has no defined nodata value.

 

with no luck.  My question is:  Is gdalwarp supposed to do this?  When I
look at the pixel value of the output image the black pixels are still "0"
and not "1".

 

My input and output are both 8-bit 3 band images.  I am using gdal 1.9.2.

 

Best regards,

Martin

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130208/e290227c/attachment.html>

From ivan.lucena at princeton-ma.us  Fri Feb  8 15:33:11 2013
From: ivan.lucena at princeton-ma.us (Ivan Lucena)
Date: Fri, 08 Feb 2013 18:33:11 -0500
Subject: [gdal-dev] gdalwarp -rpc and RPC_DEM results and .TIL files
Message-ID: <51158B37.10503@princeton-ma.us>

Hi there,

Does anybody has ever tried to orthorectify an "Ortho Ready Standard" 
QuickBird image with .TIL files?

To whom might be interested, there is a couple of sample data on 
digitalglobe.com and you can always find DEM on USGS.COM.

Contrary to GDAL standards :) in most of those sample dataset the .RPB 
file are not directed associated to the Geotiff file. Like in

some_file_name.tif
some_file_name.rpb

That is usually the case when the scene covered is too big and the data 
provider decided to dived it on tiles.

The .TIL file describe the offsets in lines/pixel/X/Y of each of the 
tiles and the .RPB is related to the .TIL file. Like in:

some_file_t1.tif
some_file_t2.tif
some_file_t3.tif
some_file_name.til
some_file_name.rpb

Since GDAL does not support the .TIL file, what one needs to do is to 
use gdalbuildvrt to create a VRT to represent the same tilling as the 
.TIL file.

At that point it is still not ready to do orthorectification yet because 
gdalwarp doesn't seems to digest the combination .VRT .RPB.

some_file_name.vrt
some_file_name.rpb

But that is just a matter of converting the VRT to GTIFF and go ahead 
and run:

gdalwarp some_file_name.tif the_output_name.tif -rpc -to 
RPC_DEM=the_dem_file.tif -t_srs EPSG:32610

But after all that I can't see much more accuracy when overlaying a 
vector road map on top of the original non-orthorectified than over the 
orthorectified output. It is a little bit better in some places but 
worse in some others.

I found much better results with datasets without tilling. I mean, 
without .TIL files. Just one GTIFF and one .RPB

Has anybody had that same experience?

Do we have plans to support the .TIL file in GDAL?

Best regards,

Ivan











From bontepaarden at gmail.com  Sat Feb  9 04:48:13 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Sat, 9 Feb 2013 13:48:13 +0100
Subject: [gdal-dev] Converting ecw to tif for Geoserver
Message-ID: <CAHNf2YSDs-r+Y2eqfL7BXzgnobazhEB73J7kTedJbtr8VfswCA@mail.gmail.com>

The last days I've been trying to convert my ecw file to a GeoTiff so I can
use it in Geoserver.
The ecw is a mozaik of aerial photos.
When I do these two commands it is working in Geoserver:

   - gdal_translate -of GTiff -co tiled=yes -co compress=jpeg -co
   photometric=YCBCR -a_srs EPSG:28992 -co "BLOCKXSIZE=512" -co
   "BLOCKYSIZE=512" my.ecw my.tif
   - gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
   PHOTOMETRIC_OVERVIEW YCBCR  my.tif 2 4 8 16 32 64 128

But I want to add a second reference layer beneath this one which is
larger. The translated ecw has white edges, so that is not looking nice.
I've asked about this before and suggested was to use a cutline. So I
create a polygon that is inside the ecw file and ran this command:

   - gdalwarp -multi -cutline "clip.shp" -of GTiff -co tiled=yes -co
   compress=jpeg -co photometric=YCBCR -co "BLOCKXSIZE=512" -co
   "BLOCKYSIZE=512" -s_srs EPSG:28992 -r lanczos -overwrite my.ecw clipped.tif

When I open clipped.tif in MapWindow I can see the white edges are gone.
But when I call *gdaladdo* white artifacts are back again.
I'm now in the process of calling *nearblack* on both my.tiff and
clipped.tif but I'm not sure I'm doing it right. I think I'm using the
correct commands but perhaps in the wrong order.
The ecw file isn't very large (2.6GB) but all steps take a long time,
especially *nearblack *which is running for 4 hours now and is just at 10%.

Does anybody have some suggestions how to process the steps to convert an
ecw file which has white outside areas to a transparent tif file with
overviews?

I'm running the latest GDAL v1.10 version from Tamas on Windows Vista on a
8GB 4core machine. Speed is not a big issue when I know the result will be
OK.

Thanks,

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130209/5728241b/attachment.html>

From even.rouault at mines-paris.org  Sat Feb  9 05:17:37 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 9 Feb 2013 14:17:37 +0100
Subject: [gdal-dev] Converting ecw to tif for Geoserver
In-Reply-To: <CAHNf2YSDs-r+Y2eqfL7BXzgnobazhEB73J7kTedJbtr8VfswCA@mail.gmail.com>
References: <CAHNf2YSDs-r+Y2eqfL7BXzgnobazhEB73J7kTedJbtr8VfswCA@mail.gmail.com>
Message-ID: <201302091417.37434.even.rouault@mines-paris.org>

Le samedi 09 f?vrier 2013 13:48:13, Paul Meems a ?crit :
> The last days I've been trying to convert my ecw file to a GeoTiff so I can
> use it in Geoserver.
> The ecw is a mozaik of aerial photos.
> When I do these two commands it is working in Geoserver:
> 
>    - gdal_translate -of GTiff -co tiled=yes -co compress=jpeg -co
>    photometric=YCBCR -a_srs EPSG:28992 -co "BLOCKXSIZE=512" -co
>    "BLOCKYSIZE=512" my.ecw my.tif
>    - gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
>    PHOTOMETRIC_OVERVIEW YCBCR  my.tif 2 4 8 16 32 64 128
> 
> But I want to add a second reference layer beneath this one which is
> larger. The translated ecw has white edges, so that is not looking nice.
> I've asked about this before and suggested was to use a cutline. So I
> create a polygon that is inside the ecw file and ran this command:
> 
>    - gdalwarp -multi -cutline "clip.shp" -of GTiff -co tiled=yes -co
>    compress=jpeg -co photometric=YCBCR -co "BLOCKXSIZE=512" -co
>    "BLOCKYSIZE=512" -s_srs EPSG:28992 -r lanczos -overwrite my.ecw
> clipped.tif
> 
> When I open clipped.tif in MapWindow I can see the white edges are gone.
> But when I call *gdaladdo* white artifacts are back again.

I'm not clear why gdaladdo would add while artifacts if clipped.tif has no 
more white borders (i.e. if your clipping shape is a rectangle completely 
inside the validity area of the ECW). Unless clipped.tif has an alpha channel, 
but the gdalwarp command line you showed has no -dstalpha. But that wouldn't 
work actually since you use JPEG YCbCr compression, which doesn't support 
alpha channels.

A solution - provided that MapWindows supports GDAL mask bands as transparency 
channels - would be :

# Warp and mark white pixels as transparent
gdalwarp 1.tif 2.tif -dstalpha -srcnodata "255 255 255" [other_options]

# Transform 2.tif as a JPEG-YCBCR-in-TIFF with an internal mask band
gdal_translate 2.tif 3.tif -b 1 -b 2 -b 3 -mask 4 -co compress=jpeg -co 
photometric=YCBCR -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 --config 
GDAL_TIFF_INTERNAL_MASK YES

# Add overviews
gdaladdo 3.tif  -r average --config COMPRESS_OVERVIEW JPEG --config
   PHOTOMETRIC_OVERVIEW YCBCR  2 4

> I'm now in the process of calling *nearblack* on both my.tiff and
> clipped.tif but I'm not sure I'm doing it right. I think I'm using the
> correct commands but perhaps in the wrong order.
> The ecw file isn't very large (2.6GB) but all steps take a long time,
> especially *nearblack *which is running for 4 hours now and is just at 10%.
> 

For the experiments, I'd encourage working with a low res extract of the ECW : 
gdal_translate src.ecw lowres.tif -outsize 1% 1%

> Does anybody have some suggestions how to process the steps to convert an
> ecw file which has white outside areas to a transparent tif file with
> overviews?
> 
> I'm running the latest GDAL v1.10 version from Tamas on Windows Vista on a
> 8GB 4core machine. Speed is not a big issue when I know the result will be
> OK.

Another point: It is well known that warping with compression doesn't produce 
files with optimal size. See 
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#GeoTIFFoutput-
coCOMPRESSisbroken

> 
> Thanks,
> 
> Paul

From even.rouault at mines-paris.org  Sat Feb  9 05:22:31 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 9 Feb 2013 14:22:31 +0100
Subject: [gdal-dev] gdalwarp -rpc and RPC_DEM results and .TIL files
In-Reply-To: <51158B37.10503@princeton-ma.us>
References: <51158B37.10503@princeton-ma.us>
Message-ID: <201302091422.31138.even.rouault@mines-paris.org>

> Since GDAL does not support the .TIL file, 

Huh, there *IS* a TIL driver (frmts/til/tildataset.cpp) and I can see that it 
tries to load the associated .RPB file.

However the manual procedure you used shouldn't change things fundamentally, 
and I wouldn't expect directly using the TIL file will give better results. 
There are perhaps some improvements/fixes to do in the RPC warper.

From even.rouault at mines-paris.org  Sat Feb  9 05:35:54 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 9 Feb 2013 14:35:54 +0100
Subject: [gdal-dev] Pixel remap using the warp api question
In-Reply-To: <5897cff3.00000ca4.00000024@CHAPMANM7.pixia.local>
References: <5897cff3.00000ca4.00000024@CHAPMANM7.pixia.local>
Message-ID: <201302091435.55027.even.rouault@mines-paris.org>

Le vendredi 08 f?vrier 2013 23:35:26, Martin Chapman a ?crit :
> I asked the following a couple of weeks ago and never got a reply.  Frank,
> can you comment on this please?
> 
> 
> 
> .
> 
> 
> 
> I am trying to remap all "0" value pixels in the source images to the
> value "1" in the output image using gdalwarp like so:
> 
> 
> 
> warpOptions->padfSrcNoDataReal[bandIndex] = 0;
> 
> warpOptions->padfSrcNoDataImag[bandIndex] = NULL;
> 
> warpOptions->padfDstNoDataReal[bandIndex] = 1;
> 
> warpOptions->padfDstNoDataImag[bandIndex] = NULL;
> 
> 
> 
> 1. I am setting INIT_DEST=0.

That might be the issue actually. Try with INIT_DEST=1 or INIT_DEST=NO_DATA

Using the warper to do that is however a bit overkill. You could just 
RasterIO(GF_Read, ) each line/block, patch values, and then write back with 
RasterIO(GF_Write).

> 
> 2. not setting UNIFIED_SRC_NODATA.
> 
> 3. the source images have no defined nodata value.
> 
> 4. the output image has no defined nodata value.
> 
> 
> 
> with no luck.  My question is:  Is gdalwarp supposed to do this?  When I
> look at the pixel value of the output image the black pixels are still "0"
> and not "1".
> 
> 
> 
> My input and output are both 8-bit 3 band images.  I am using gdal 1.9.2.
> 
> 
> 
> Best regards,
> 
> Martin

From ryanjamesdillon at gmail.com  Sat Feb  9 05:36:59 2013
From: ryanjamesdillon at gmail.com (Ryan J. Dillon)
Date: Sat, 09 Feb 2013 13:36:59 +0000
Subject: [gdal-dev] Converting WGS84 Coords to UTM / GeoTiff Pixels with
	Python
Message-ID: <511650FB.9000600@gmail.com>

Dear All,
I have data in (WGS84) latitude, longitude, and value format that I 
would like to use the python gdal bindings convert to pixel units so 
that I may interpolate the data to a grid.

I have found the following blog entry with code to do the former, but I 
am receiving errors when running a small sample dataset. It appears that 
the function for transforming WSG84 to UTM returns smaller UTM values 
for the larger longitude values, which then leads to negative x 
dimensions/columns/x pixel counts.

Any help would be greatly appreciated. I've included a link to my code 
that I have pasted on ideone for ease of viewing. Thanks!!!

Kindly,
Ryan

My edited version of lat/lon conversion code (I receive the same errors 
with the original code):
http://ideone.com/CusKmZ

Converting lat/lon to pixels/geotiff blog entry:
http://monkut.webfactional.com/blog/archive/2012/5/2/understanding-raster-basic-gis-concepts-and-the-python-gdal-library/

The interpolation blog entry:
http://geoexamples.blogspot.com/2012/05/creating-grid-from-scattered-data-using.html



From andrea.aime at geo-solutions.it  Sat Feb  9 05:41:37 2013
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Sat, 9 Feb 2013 14:41:37 +0100
Subject: [gdal-dev] Converting ecw to tif for Geoserver
In-Reply-To: <201302091417.37434.even.rouault@mines-paris.org>
References: <CAHNf2YSDs-r+Y2eqfL7BXzgnobazhEB73J7kTedJbtr8VfswCA@mail.gmail.com>
	<201302091417.37434.even.rouault@mines-paris.org>
Message-ID: <CA+nxMTvXPDKn9ap6APrcM3XbZ2o51W9JWEo24jSqUkXEG2tgZw@mail.gmail.com>

On Sat, Feb 9, 2013 at 2:17 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

>
> A solution - provided that MapWindows supports GDAL mask bands as
> transparency
> channels - would be :
>

By the title Paul seems to be targetting GeoServer, which does not support
the mask
bands

Cheers
Andrea


-- 
==
Our support, Your Success! Visit http://opensdi.geo-solutions.it for more
information.
==

Ing. Andrea Aime
@geowolf
Technical Lead

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax: +39 0584 1660272
mob: +39  339 8844549

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130209/fca95237/attachment-0001.html>

From bontepaarden at gmail.com  Sat Feb  9 06:11:54 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Sat, 9 Feb 2013 15:11:54 +0100
Subject: [gdal-dev] Converting ecw to tif for Geoserver
In-Reply-To: <201302091417.37434.even.rouault@mines-paris.org>
References: <CAHNf2YSDs-r+Y2eqfL7BXzgnobazhEB73J7kTedJbtr8VfswCA@mail.gmail.com>
	<201302091417.37434.even.rouault@mines-paris.org>
Message-ID: <CAHNf2YR7DHh3wvRhcQnu86PHJDTR4868FE6ggd8j2+6S3GmrQw@mail.gmail.com>

Thanks Even,

The low-res option really helped. Now I can test the commands in seconds
instead of hours.
I did these commands which seem to produce a tif file with overviews and
correct transparency.
I've opened it in MapWindow for now to check. MapWindow is using GDAL to
read raster files.

I will now convert the hi-res version and try that version in Geoserver.
Here are the commands I used:

# Create a low-res version:
gdal_translate my.ecw test\lowres.tif -outsize 1% 1%

# Fix the almost white pixels:
nearblack -of GTiff -white -o lowres-white.tif lowres.tif

# Warp and mark white pixels as transparent
gdalwarp -multi -of GTiff -dstalpha -srcnodata "255 255 255" -co tiled=yes
-co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512" -s_srs EPSG:28992 -r lanczos
-overwrite lowres-white.tif lowres-transparent.tif

# Create internal tiles, don't use mask band because Geoserver doesn't like
that:
gdal_translate -of GTiff -a_srs EPSG:28992 -b 1 -b 2 -b 3 -co tiled=yes -co
compress=jpeg -co photometric=YCBCR -co BLOCKXSIZE=512 -co BLOCKYSIZE=512
--config GDAL_TIFF_INTERNAL_MASK YES lowres-transparent.tif
lowres-compressed.tif

# nodata is now black, but not all pixels are truly black:
nearblack -of GTiff -o lowres-compressed-black.tif lowres-compressed.tif

# Set the nodata value to black:
gdal_translate -a_nodata 0 lowres-compressed-black.tif
lowres-compressed-transparent.tif

# Add overviews
gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
PHOTOMETRIC_OVERVIEW YCBCR lowres-compressed-transparent.tif 2 4 8 16 32 64
128


Thanks all.


Paul

2013/2/9 Even Rouault <even.rouault at mines-paris.org>

> Le samedi 09 f?vrier 2013 13:48:13, Paul Meems a ?crit :
> > The last days I've been trying to convert my ecw file to a GeoTiff so I
> can
> > use it in Geoserver.
> > The ecw is a mozaik of aerial photos.
> > When I do these two commands it is working in Geoserver:
> >
> >    - gdal_translate -of GTiff -co tiled=yes -co compress=jpeg -co
> >    photometric=YCBCR -a_srs EPSG:28992 -co "BLOCKXSIZE=512" -co
> >    "BLOCKYSIZE=512" my.ecw my.tif
> >    - gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
> >    PHOTOMETRIC_OVERVIEW YCBCR  my.tif 2 4 8 16 32 64 128
> >
> > But I want to add a second reference layer beneath this one which is
> > larger. The translated ecw has white edges, so that is not looking nice.
> > I've asked about this before and suggested was to use a cutline. So I
> > create a polygon that is inside the ecw file and ran this command:
> >
> >    - gdalwarp -multi -cutline "clip.shp" -of GTiff -co tiled=yes -co
> >    compress=jpeg -co photometric=YCBCR -co "BLOCKXSIZE=512" -co
> >    "BLOCKYSIZE=512" -s_srs EPSG:28992 -r lanczos -overwrite my.ecw
> > clipped.tif
> >
> > When I open clipped.tif in MapWindow I can see the white edges are gone.
> > But when I call *gdaladdo* white artifacts are back again.
>
> I'm not clear why gdaladdo would add while artifacts if clipped.tif has no
> more white borders (i.e. if your clipping shape is a rectangle completely
> inside the validity area of the ECW). Unless clipped.tif has an alpha
> channel,
> but the gdalwarp command line you showed has no -dstalpha. But that
> wouldn't
> work actually since you use JPEG YCbCr compression, which doesn't support
> alpha channels.
>
> A solution - provided that MapWindows supports GDAL mask bands as
> transparency
> channels - would be :
>
> # Warp and mark white pixels as transparent
> gdalwarp 1.tif 2.tif -dstalpha -srcnodata "255 255 255" [other_options]
>
> # Transform 2.tif as a JPEG-YCBCR-in-TIFF with an internal mask band
> gdal_translate 2.tif 3.tif -b 1 -b 2 -b 3 -mask 4 -co compress=jpeg -co
> photometric=YCBCR -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 --config
> GDAL_TIFF_INTERNAL_MASK YES
>
> # Add overviews
> gdaladdo 3.tif  -r average --config COMPRESS_OVERVIEW JPEG --config
>    PHOTOMETRIC_OVERVIEW YCBCR  2 4
>
> > I'm now in the process of calling *nearblack* on both my.tiff and
> > clipped.tif but I'm not sure I'm doing it right. I think I'm using the
> > correct commands but perhaps in the wrong order.
> > The ecw file isn't very large (2.6GB) but all steps take a long time,
> > especially *nearblack *which is running for 4 hours now and is just at
> 10%.
> >
>
> For the experiments, I'd encourage working with a low res extract of the
> ECW :
> gdal_translate src.ecw lowres.tif -outsize 1% 1%
>
> > Does anybody have some suggestions how to process the steps to convert an
> > ecw file which has white outside areas to a transparent tif file with
> > overviews?
> >
> > I'm running the latest GDAL v1.10 version from Tamas on Windows Vista on
> a
> > 8GB 4core machine. Speed is not a big issue when I know the result will
> be
> > OK.
>
> Another point: It is well known that warping with compression doesn't
> produce
> files with optimal size. See
> http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#GeoTIFFoutput-
> coCOMPRESSisbroken
>
> >
> > Thanks,
> >
> > Paul
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130209/b2b565a2/attachment.html>

From zmoratto at gmail.com  Sat Feb  9 07:28:38 2013
From: zmoratto at gmail.com (Zack Moratto)
Date: Sat, 9 Feb 2013 07:28:38 -0800
Subject: [gdal-dev] gdalwarp -rpc and RPC_DEM results and .TIL files
In-Reply-To: <201302091422.31138.even.rouault@mines-paris.org>
References: <51158B37.10503@princeton-ma.us>
	<201302091422.31138.even.rouault@mines-paris.org>
Message-ID: <CAGycjSsz=etf83Ai1rNK22a+Ot=SAW2a9oQDBOrGY+3bVpAbBA@mail.gmail.com>

Ivan,

This might be wrong, but I don't believe the GDAL RPC warper is aware of
vertical datums either. Your projections might be wrong if you are using
USGS NED DEMs which are referenced against NAVD88. My quick read of
gdal_rpc leads me to believe that GDAL only knows about horizontal and
ellipsoid transformations.

Verify that your DEMs are referenced against a spheroid before projection.

On Sat, Feb 9, 2013 at 5:22 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> > Since GDAL does not support the .TIL file,
>
> Huh, there *IS* a TIL driver (frmts/til/tildataset.cpp) and I can see that
> it
> tries to load the associated .RPB file.
>
> However the manual procedure you used shouldn't change things
> fundamentally,
> and I wouldn't expect directly using the TIL file will give better results.
> There are perhaps some improvements/fixes to do in the RPC warper.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Zack Moratto
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130209/ef9faa5f/attachment.html>

From bishop.dev at gmail.com  Sat Feb  9 11:36:50 2013
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Sat, 09 Feb 2013 23:36:50 +0400
Subject: [gdal-dev] gdalwarp -rpc and RPC_DEM results and .TIL files
In-Reply-To: <51158B37.10503@princeton-ma.us>
References: <51158B37.10503@princeton-ma.us>
Message-ID: <5116A552.5040109@gmail.com>

Hi Ivan,

I orthorectify such products with comparable with Envi results. But, 
exist TIL driver usually have SRS WGS84 and output raster lost in 
resolution on Y Axis. I correct driver and commit it (see ticket #3482 
for details). Everything should be OK.
Also you need to add RPC_HEIGHT with some value to correct geoid.
http://translate.google.ru/translate?sl=auto&tl=en&js=n&prev=_t&hl=ru&ie=UTF-8&eotf=1&u=http%3A%2F%2Fgis-lab.info%2Fqa%2Forbview3-ortho-gdal.html&act=url

Best regards,
     Dmitriy

09.02.2013 3:33, Ivan Lucena ?????:
> Hi there,
>
> Does anybody has ever tried to orthorectify an "Ortho Ready Standard" 
> QuickBird image with .TIL files?
>
> To whom might be interested, there is a couple of sample data on 
> digitalglobe.com and you can always find DEM on USGS.COM.
>
> Contrary to GDAL standards :) in most of those sample dataset the .RPB 
> file are not directed associated to the Geotiff file. Like in
>
> some_file_name.tif
> some_file_name.rpb
>
> That is usually the case when the scene covered is too big and the 
> data provider decided to dived it on tiles.
>
> The .TIL file describe the offsets in lines/pixel/X/Y of each of the 
> tiles and the .RPB is related to the .TIL file. Like in:
>
> some_file_t1.tif
> some_file_t2.tif
> some_file_t3.tif
> some_file_name.til
> some_file_name.rpb
>
> Since GDAL does not support the .TIL file, what one needs to do is to 
> use gdalbuildvrt to create a VRT to represent the same tilling as the 
> .TIL file.
>
> At that point it is still not ready to do orthorectification yet 
> because gdalwarp doesn't seems to digest the combination .VRT .RPB.
>
> some_file_name.vrt
> some_file_name.rpb
>
> But that is just a matter of converting the VRT to GTIFF and go ahead 
> and run:
>
> gdalwarp some_file_name.tif the_output_name.tif -rpc -to 
> RPC_DEM=the_dem_file.tif -t_srs EPSG:32610
>
> But after all that I can't see much more accuracy when overlaying a 
> vector road map on top of the original non-orthorectified than over 
> the orthorectified output. It is a little bit better in some places 
> but worse in some others.
>
> I found much better results with datasets without tilling. I mean, 
> without .TIL files. Just one GTIFF and one .RPB
>
> Has anybody had that same experience?
>
> Do we have plans to support the .TIL file in GDAL?
>
> Best regards,
>
> Ivan
>
>
>
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From chapmanm at pixia.com  Sat Feb  9 11:38:44 2013
From: chapmanm at pixia.com (Martin Chapman)
Date: Sat, 09 Feb 2013 14:38:44 -0500 (EST)
Subject: [gdal-dev] Pixel remap using the warp api question
In-Reply-To: <201302091435.55027.even.rouault@mines-paris.org>
References: <5897cff3.00000ca4.00000024@CHAPMANM7.pixia.local>
	<201302091435.55027.even.rouault@mines-paris.org>
Message-ID: <eceaa7a2.00001c24.00000017@CHAPMANM7S>

Even,

Thanks for the response.  In my case the target image uses zero for the 8bit 
transparency color.  When I initialize the target image I set the entire 
image to all transparent, or all zeros using INIT_DEST.  Then I warp / 
mosaic in the source imagery.  If the source imagery does NOT have 
transparency I have to remap all zeros to ones in the source image before 
the warp occurs because after the warp I have no way of distinguishing 
between black transparent values and valid black values in the target image. 
If only a small portion of the source image intersects the target image I 
want to avoid having to make a copy and remap all zeros because that slows 
down the process dramatically.  Also, if I just extract a small portion of 
the source image, then the warp from UTM to wgs84 (utm is source srs and 
wgs84 is target srs) then the warp is not as accurate.

Thus, to make the remap, warp and mosaic as efficient and accurate as 
possible I want the remap to happen in the warp kernel just after the read 
from the source image but before the warp and write to the target image.  I 
couldn't find a way to do it with the current gdal warp api parameters so I 
modified the warp kernel to do it and it works awesome.  I did it by using 
some of the existing parameters of the warp options that wouldn't affect 
other warp operations although this is still a hack.  What I would like to 
do is officially add the options to the warp api but I would need your help 
to make sure it is correct.  I can send you the code on Monday when I get 
back to the office if you are interested.  Does this sound like a feature 
you would like to add to the warp api or is it too much of a one off 
solution?

Best regards,
Martin

-----Original Message-----
From: Even Rouault [mailto:even.rouault at mines-paris.org]
Sent: Saturday, February 09, 2013 6:36 AM
To: gdal-dev at lists.osgeo.org
Cc: Martin Chapman
Subject: Re: [gdal-dev] Pixel remap using the warp api question

Le vendredi 08 f?vrier 2013 23:35:26, Martin Chapman a ?crit :
> I asked the following a couple of weeks ago and never got a reply.
> Frank, can you comment on this please?
>
>
>
> .
>
>
>
> I am trying to remap all "0" value pixels in the source images to the
> value "1" in the output image using gdalwarp like so:
>
>
>
> warpOptions->padfSrcNoDataReal[bandIndex] = 0;
>
> warpOptions->padfSrcNoDataImag[bandIndex] = NULL;
>
> warpOptions->padfDstNoDataReal[bandIndex] = 1;
>
> warpOptions->padfDstNoDataImag[bandIndex] = NULL;
>
>
>
> 1. I am setting INIT_DEST=0.

That might be the issue actually. Try with INIT_DEST=1 or INIT_DEST=NO_DATA

Using the warper to do that is however a bit overkill. You could just 
RasterIO(GF_Read, ) each line/block, patch values, and then write back with 
RasterIO(GF_Write).

>
> 2. not setting UNIFIED_SRC_NODATA.
>
> 3. the source images have no defined nodata value.
>
> 4. the output image has no defined nodata value.
>
>
>
> with no luck.  My question is:  Is gdalwarp supposed to do this?  When
> I look at the pixel value of the output image the black pixels are still 
> "0"
> and not "1".
>
>
>
> My input and output are both 8-bit 3 band images.  I am using gdal 1.9.2.
>
>
>
> Best regards,
>
> Martin

From woodbri at swoodbridge.com  Sat Feb  9 13:28:15 2013
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sat, 09 Feb 2013 16:28:15 -0500
Subject: [gdal-dev] Virtual Filesystem Question(s)
Message-ID: <5116BF6F.70106@swoodbridge.com>

Hi Even,

Frank pointed me to your blog entry on the GDAL virtual file system at:

http://erouault.blogspot.com/2012/05/new-gdal-virtual-file-system-to-read.html

This is most excellent. I am trying to get this to work using the 
/vsicurl/ option to connect to a php page that generates CSV output, But 
it is not sucessful :(

I was hoping you could help me sort out how to get this to work.

Running GDAL 1.9.0

woodbri at mappy:/u/software/gdal-1.9.0$ ./config.status -V
config.status
configured by ./configure, generated by GNU Autoconf 2.68,
   with options "'--prefix=/usr/local' '--mandir=/usr/local/share/man' 
'--includedir=/usr/local/include/gdal' '--with-threads' '--with-hdf5=no' 
'--with-grass=no' '--with-ecw=no' '--with-mrsid=no' '--with-jp2mrsid=no' 
'--with-libtiff=internal' '--with-geotiff=internal' '--with-jasper' 
'--with-netcdf' '--with-xerces' '--with-geos' '--with-sqlite3' 
'--with-curl' '--with-pg' '--with-mysql' '--with-perl' '--with-python' 
'--with-ecw' '--with-mrsid=/u/software/Geo_DSDK-7.0.0.2167' 
'--with-fgdb=/u/software/FileGDB_API' '--with-cfitsio=no'"

I have created a file test.csv and copied the output of the php script 
into and created a test.vrt and ogrinfo is happy with it.

I change test.vrt to

<SrcDataSource>/vsicurl/http://example.com/ws/test-pg.php</SrcDataSource>

This is happy:

woodbri at mappy:~/work/mongo/ogr$ ogrinfo -ro test-pg.vrt
INFO: Open of `test-pg.vrt'
       using driver `VRT' successful.
1: test (Point)

But this is not:

woodbri at mappy:~/work/mongo/ogr$ ogrinfo -ro test-pg.vrt test
INFO: Open of `test-pg.vrt'
       using driver `VRT' successful.
ERROR 1: Failed to open datasource 
`/vsicurl/http://example.com/ws/test-pg.php'.

Layer name: test
Geometry: Point
Feature Count: 0
Layer SRS WKT:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         TOWGS84[0,0,0,0,0,0,0],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9108"]],
     AUTHORITY["EPSG","4326"]]

Doing some additional work like find a php script the simulates byte 
range downloading. and turning on some debuging, it looks like I have 
run into a but in OGR.

So if you notice below, OGR gets the file size and then asks for more 
bytes then are in the file. The whole file is sent but OGR get the 200 
response code but (I guessing) because the size returned is smaller then 
the size requested, it repeats the request over and over.

I'll grab the 1.9.2 tarball and see if I can build that and get better 
results. If your php request is doing a sql query (like I'm doing) then 
this is going to be problematic if the results exceed a single request, 
because you can not be assured that the subsequent request for the next 
part of the file will generate the exact same query results. It would be 
very helpful if there is a mode or virtual driver where OGR reads the 
whole data stream and buffers it into a tmp file or whatever then deals 
with it, because there is no way for the server to put the request into 
a tempfile and then relate it to subsequent requests from that client 
versus other clients and know when to clean things up. It makes more 
sense for the client to handle these issues because it knows when it is 
done with the resource.

Any thoughts or ideas on all of this?

Thanks,
   -Steve

woodbri at mappy:~/work/mongo/ogr$ ogrinfo --debug on -ro test-pg.vrt test
OGR: OGROpen(test-pg.vrt/0x177c3a0) succeeded as VRT.
INFO: Open of `test-pg.vrt'
       using driver `VRT' successful.
OGR: GetLayerCount() = 1

VSICURL: GetFileList(/vsicurl/http://imaptools.com:8080/ws)
VSICURL: File[0] = geoip.php, is_dir = 0, size = 0, time = 2013/02/08 
15:44:00
VSICURL: File[1] = test-pg.php, is_dir = 0, size = 0, time = 2013/02/09 
15:55:00
VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
VSICURL: Got reponse_code=200
VSICURL: GetFileSize(http://imaptools.com:8080/ws/test-pg.php)=13053 
response_code=200
VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
VSICURL: Got reponse_code=200
VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
VSICURL: Got reponse_code=200
VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
VSICURL: Got reponse_code=200
VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
VSICURL: Got reponse_code=200
VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
VSICURL: Got reponse_code=200
VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
VSICURL: Got reponse_code=200
VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
^C

I logged the php code and here is a partial output:

header: Accept-Ranges: 0-13053
request: HTTP_RANGE: bytes=0-16383
header: Content-Range: bytes 0-13052/13053
header: Content-Length: 13053

header: Accept-Ranges: 0-13053
request: HTTP_RANGE: bytes=0-16383
header: Content-Range: bytes 0-13052/13053
header: Content-Length: 13053

header: Accept-Ranges: 0-13053
request: HTTP_RANGE: bytes=0-16383
header: Content-Range: bytes 0-13052/13053
header: Content-Length: 13053

From woodbri at swoodbridge.com  Sat Feb  9 14:32:17 2013
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sat, 09 Feb 2013 17:32:17 -0500
Subject: [gdal-dev] Virtual Filesystem Question(s)
In-Reply-To: <5116BF6F.70106@swoodbridge.com>
References: <5116BF6F.70106@swoodbridge.com>
Message-ID: <5116CE71.10004@swoodbridge.com>

Just a followup to this, I have downloaded gdal-1.9.2 and get the same 
results. So no joy there.

-Steve

On 2/9/2013 4:28 PM, Stephen Woodbridge wrote:
> Hi Even,
>
> Frank pointed me to your blog entry on the GDAL virtual file system at:
>
> http://erouault.blogspot.com/2012/05/new-gdal-virtual-file-system-to-read.html
>
>
> This is most excellent. I am trying to get this to work using the
> /vsicurl/ option to connect to a php page that generates CSV output, But
> it is not sucessful :(
>
> I was hoping you could help me sort out how to get this to work.
>
> Running GDAL 1.9.0
>
> woodbri at mappy:/u/software/gdal-1.9.0$ ./config.status -V
> config.status
> configured by ./configure, generated by GNU Autoconf 2.68,
>    with options "'--prefix=/usr/local' '--mandir=/usr/local/share/man'
> '--includedir=/usr/local/include/gdal' '--with-threads' '--with-hdf5=no'
> '--with-grass=no' '--with-ecw=no' '--with-mrsid=no' '--with-jp2mrsid=no'
> '--with-libtiff=internal' '--with-geotiff=internal' '--with-jasper'
> '--with-netcdf' '--with-xerces' '--with-geos' '--with-sqlite3'
> '--with-curl' '--with-pg' '--with-mysql' '--with-perl' '--with-python'
> '--with-ecw' '--with-mrsid=/u/software/Geo_DSDK-7.0.0.2167'
> '--with-fgdb=/u/software/FileGDB_API' '--with-cfitsio=no'"
>
> I have created a file test.csv and copied the output of the php script
> into and created a test.vrt and ogrinfo is happy with it.
>
> I change test.vrt to
>
> <SrcDataSource>/vsicurl/http://example.com/ws/test-pg.php</SrcDataSource>
>
> This is happy:
>
> woodbri at mappy:~/work/mongo/ogr$ ogrinfo -ro test-pg.vrt
> INFO: Open of `test-pg.vrt'
>        using driver `VRT' successful.
> 1: test (Point)
>
> But this is not:
>
> woodbri at mappy:~/work/mongo/ogr$ ogrinfo -ro test-pg.vrt test
> INFO: Open of `test-pg.vrt'
>        using driver `VRT' successful.
> ERROR 1: Failed to open datasource
> `/vsicurl/http://example.com/ws/test-pg.php'.
>
> Layer name: test
> Geometry: Point
> Feature Count: 0
> Layer SRS WKT:
> GEOGCS["WGS 84",
>      DATUM["WGS_1984",
>          SPHEROID["WGS 84",6378137,298.257223563,
>              AUTHORITY["EPSG","7030"]],
>          TOWGS84[0,0,0,0,0,0,0],
>          AUTHORITY["EPSG","6326"]],
>      PRIMEM["Greenwich",0,
>          AUTHORITY["EPSG","8901"]],
>      UNIT["degree",0.0174532925199433,
>          AUTHORITY["EPSG","9108"]],
>      AUTHORITY["EPSG","4326"]]
>
> Doing some additional work like find a php script the simulates byte
> range downloading. and turning on some debuging, it looks like I have
> run into a but in OGR.
>
> So if you notice below, OGR gets the file size and then asks for more
> bytes then are in the file. The whole file is sent but OGR get the 200
> response code but (I guessing) because the size returned is smaller then
> the size requested, it repeats the request over and over.
>
> I'll grab the 1.9.2 tarball and see if I can build that and get better
> results. If your php request is doing a sql query (like I'm doing) then
> this is going to be problematic if the results exceed a single request,
> because you can not be assured that the subsequent request for the next
> part of the file will generate the exact same query results. It would be
> very helpful if there is a mode or virtual driver where OGR reads the
> whole data stream and buffers it into a tmp file or whatever then deals
> with it, because there is no way for the server to put the request into
> a tempfile and then relate it to subsequent requests from that client
> versus other clients and know when to clean things up. It makes more
> sense for the client to handle these issues because it knows when it is
> done with the resource.
>
> Any thoughts or ideas on all of this?
>
> Thanks,
>    -Steve
>
> woodbri at mappy:~/work/mongo/ogr$ ogrinfo --debug on -ro test-pg.vrt test
> OGR: OGROpen(test-pg.vrt/0x177c3a0) succeeded as VRT.
> INFO: Open of `test-pg.vrt'
>        using driver `VRT' successful.
> OGR: GetLayerCount() = 1
>
> VSICURL: GetFileList(/vsicurl/http://imaptools.com:8080/ws)
> VSICURL: File[0] = geoip.php, is_dir = 0, size = 0, time = 2013/02/08
> 15:44:00
> VSICURL: File[1] = test-pg.php, is_dir = 0, size = 0, time = 2013/02/09
> 15:55:00
> VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
> VSICURL: Got reponse_code=200
> VSICURL: GetFileSize(http://imaptools.com:8080/ws/test-pg.php)=13053
> response_code=200
> VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
> VSICURL: Got reponse_code=200
> VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
> VSICURL: Got reponse_code=200
> VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
> VSICURL: Got reponse_code=200
> VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
> VSICURL: Got reponse_code=200
> VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
> VSICURL: Got reponse_code=200
> VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
> VSICURL: Got reponse_code=200
> VSICURL: Downloading 0-16383 (http://imaptools.com:8080/ws/test-pg.php)...
> ^C
>
> I logged the php code and here is a partial output:
>
> header: Accept-Ranges: 0-13053
> request: HTTP_RANGE: bytes=0-16383
> header: Content-Range: bytes 0-13052/13053
> header: Content-Length: 13053
>
> header: Accept-Ranges: 0-13053
> request: HTTP_RANGE: bytes=0-16383
> header: Content-Range: bytes 0-13052/13053
> header: Content-Length: 13053
>
> header: Accept-Ranges: 0-13053
> request: HTTP_RANGE: bytes=0-16383
> header: Content-Range: bytes 0-13052/13053
> header: Content-Length: 13053
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at mmmtike.fi  Sat Feb  9 15:03:52 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat, 9 Feb 2013 23:03:52 +0000 (UTC)
Subject: [gdal-dev] Virtual Filesystem Question(s)
References: <5116BF6F.70106@swoodbridge.com> <5116CE71.10004@swoodbridge.com>
Message-ID: <loom.20130210T000226-984@post.gmane.org>

Stephen Woodbridge <woodbri <at> swoodbridge.com> writes:

> 
> Just a followup to this, I have downloaded gdal-1.9.2 and get the same 
> results. So no joy there.
> 
> -Steve



Perhaps vsicurl_streaming that is also mentioned in the same blog is something
worth trying.


-Jukka Rahkonen-


From even.rouault at mines-paris.org  Sat Feb  9 15:19:29 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 10 Feb 2013 00:19:29 +0100
Subject: [gdal-dev] Virtual Filesystem Question(s)
In-Reply-To: <5116BF6F.70106@swoodbridge.com>
References: <5116BF6F.70106@swoodbridge.com>
Message-ID: <201302100019.29581.even.rouault@mines-paris.org>

Le samedi 09 f?vrier 2013 22:28:15, Stephen Woodbridge a ?crit :
> Hi Even,
> 
> Frank pointed me to your blog entry on the GDAL virtual file system at:
> 
> http://erouault.blogspot.com/2012/05/new-gdal-virtual-file-system-to-read.h
> tml
> 
> This is most excellent. I am trying to get this to work using the
> /vsicurl/ option to connect to a php page that generates CSV output, But
> it is not sucessful :(

With GDAL 1.10dev and the new /vsicurl_streaming/, I managed to do it :

test.vrt:
<OGRVRTDataSource>
     <OGRVRTLayer name="test-pg">
         <SrcDataSource>CSV:/vsicurl_streaming/http://example.com/ws/test-
pg.php</SrcDataSource>
         <GeometryType>wkbPoint</GeometryType>
         <LayerSRS>WGS84</LayerSRS>
         <GeometryField encoding="PointFromColumns" x="x" y="y"/>
     </OGRVRTLayer>
</OGRVRTDataSource>

It is important that the VRT layer name is the php filename, because that's the 
layer name that the CSV driver will return.
And I've added CSV: prefix in front of SrcDataSource so that the the CSV driver 
knowns that it must open the file even if the extension is not CSV.

This being done, you can try : ogrinfo test.vrt -al -q -ro

I'll try to analyze the failure you got with /vsicurl/. With GDAL 1.10dev, I 
don't get an infinite loop, but it does get stuck in a curl call.

Even


From woodbri at swoodbridge.com  Sat Feb  9 15:23:37 2013
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sat, 09 Feb 2013 18:23:37 -0500
Subject: [gdal-dev] Virtual Filesystem Question(s)
In-Reply-To: <loom.20130210T000226-984@post.gmane.org>
References: <5116BF6F.70106@swoodbridge.com> <5116CE71.10004@swoodbridge.com>
	<loom.20130210T000226-984@post.gmane.org>
Message-ID: <5116DA79.5060201@swoodbridge.com>

On 2/9/2013 6:03 PM, Jukka Rahkonen wrote:
> Stephen Woodbridge <woodbri <at> swoodbridge.com> writes:
>
>>
>> Just a followup to this, I have downloaded gdal-1.9.2 and get the same
>> results. So no joy there.
>>
>> -Steve
>
>
>
> Perhaps vsicurl_streaming that is also mentioned in the same blog is something
> worth trying.

Yeah, I saw that. I may or may not be able to build trunk on this 
machine depending on the dependencies that needs as more of the 
libraries are fairly dated.

But more importantly, I think this is a bug. I'm happy to write it up 
but it would be nice to get some confirmation. At the moment, I'm review 
the source code to see if I can see a problem there.

Thank you for your suggestion,
   -Steve


From even.rouault at mines-paris.org  Sat Feb  9 15:41:43 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 10 Feb 2013 00:41:43 +0100
Subject: [gdal-dev] Virtual Filesystem Question(s)
In-Reply-To: <5116DA79.5060201@swoodbridge.com>
References: <5116BF6F.70106@swoodbridge.com>
	<loom.20130210T000226-984@post.gmane.org>
	<5116DA79.5060201@swoodbridge.com>
Message-ID: <201302100041.43604.even.rouault@mines-paris.org>

Le dimanche 10 f?vrier 2013 00:23:37, Stephen Woodbridge a ?crit :
> On 2/9/2013 6:03 PM, Jukka Rahkonen wrote:
> > Stephen Woodbridge <woodbri <at> swoodbridge.com> writes:
> >> Just a followup to this, I have downloaded gdal-1.9.2 and get the same
> >> results. So no joy there.
> >> 
> >> -Steve
> > 
> > Perhaps vsicurl_streaming that is also mentioned in the same blog is
> > something worth trying.
> 
> Yeah, I saw that. I may or may not be able to build trunk on this
> machine depending on the dependencies that needs as more of the
> libraries are fairly dated.
> 
> But more importantly, I think this is a bug. I'm happy to write it up
> but it would be nice to get some confirmation. At the moment, I'm review
> the source code to see if I can see a problem there.

Well, I rather think that there's a bug in your PHP script, because curl -r 
0-16383 http://www.google.fr works even if the returned file is < 16383

whereas :

curl -r 0-16383 http://example.com/ws/test-pg.php hangs

Or it is a bug in libcurl itself.

I haven't checked the RFCs, but all tests I have done before against Apache or 
IIS servers show that asking for more than the file size work.

> 
> Thank you for your suggestion,
>    -Steve
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From woodbri at swoodbridge.com  Sat Feb  9 16:33:10 2013
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sat, 09 Feb 2013 19:33:10 -0500
Subject: [gdal-dev] Virtual Filesystem Question(s)
In-Reply-To: <201302100041.43604.even.rouault@mines-paris.org>
References: <5116BF6F.70106@swoodbridge.com>
	<loom.20130210T000226-984@post.gmane.org>
	<5116DA79.5060201@swoodbridge.com>
	<201302100041.43604.even.rouault@mines-paris.org>
Message-ID: <5116EAC6.8000907@swoodbridge.com>

On 2/9/2013 6:41 PM, Even Rouault wrote:
> Le dimanche 10 f?vrier 2013 00:23:37, Stephen Woodbridge a ?crit :
>> On 2/9/2013 6:03 PM, Jukka Rahkonen wrote:
>>> Stephen Woodbridge <woodbri <at> swoodbridge.com> writes:
>>>> Just a followup to this, I have downloaded gdal-1.9.2 and get the same
>>>> results. So no joy there.
>>>>
>>>> -Steve
>>>
>>> Perhaps vsicurl_streaming that is also mentioned in the same blog is
>>> something worth trying.
>>
>> Yeah, I saw that. I may or may not be able to build trunk on this
>> machine depending on the dependencies that needs as more of the
>> libraries are fairly dated.
>>
>> But more importantly, I think this is a bug. I'm happy to write it up
>> but it would be nice to get some confirmation. At the moment, I'm review
>> the source code to see if I can see a problem there.
>
> Well, I rather think that there's a bug in your PHP script, because curl -r
> 0-16383 http://www.google.fr works even if the returned file is < 16383
>
> whereas :
>
> curl -r 0-16383 http://example.com/ws/test-pg.php hangs
>
> Or it is a bug in libcurl itself.
>
> I haven't checked the RFCs, but all tests I have done before against Apache or
> IIS servers show that asking for more than the file size work.

Thanks, I will try 1.10 beta and also look at the php script. It is 
possible that I'm not issuing all the headers correctly.

I trying to find an easy to read client-server dialog of what should be 
happening with regards to the range requests. RFC 2616 covers it but it 
is hard for me to piece together all the bits and pieces from this:

http://tools.ietf.org/html/rfc2616

I appreciate your quick response. I'll continue digging in to this and 
let you how it goes.

Thanks,
   -Steve


From woodbri at swoodbridge.com  Sat Feb  9 17:24:50 2013
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sat, 09 Feb 2013 20:24:50 -0500
Subject: [gdal-dev] Virtual Filesystem Question(s)
In-Reply-To: <201302100041.43604.even.rouault@mines-paris.org>
References: <5116BF6F.70106@swoodbridge.com>
	<loom.20130210T000226-984@post.gmane.org>
	<5116DA79.5060201@swoodbridge.com>
	<201302100041.43604.even.rouault@mines-paris.org>
Message-ID: <5116F6E2.1030202@swoodbridge.com>

On 2/9/2013 6:41 PM, Even Rouault wrote:
> Le dimanche 10 f?vrier 2013 00:23:37, Stephen Woodbridge a ?crit :
>> On 2/9/2013 6:03 PM, Jukka Rahkonen wrote:
>>> Stephen Woodbridge <woodbri <at> swoodbridge.com> writes:
>>>> Just a followup to this, I have downloaded gdal-1.9.2 and get the same
>>>> results. So no joy there.
>>>>
>>>> -Steve
>>>
>>> Perhaps vsicurl_streaming that is also mentioned in the same blog is
>>> something worth trying.
>>
>> Yeah, I saw that. I may or may not be able to build trunk on this
>> machine depending on the dependencies that needs as more of the
>> libraries are fairly dated.
>>
>> But more importantly, I think this is a bug. I'm happy to write it up
>> but it would be nice to get some confirmation. At the moment, I'm review
>> the source code to see if I can see a problem there.
>
> Well, I rather think that there's a bug in your PHP script, because curl -r
> 0-16383 http://www.google.fr works even if the returned file is < 16383
>
> whereas :
>
> curl -r 0-16383 http://example.com/ws/test-pg.php hangs
>
> Or it is a bug in libcurl itself.

OK, bug in my code. So using the above command now works. But ogrinfo 
alternately hangs and then runs with this error:

ERROR 1: Failed to open datasource 
`/vsicurl/http://example.com/ws/test-pg.php'.

In gdb, it appears to be hanging if I ^C and bt in poll()

(gdb) run -ro test-pg.vrt test
Starting program: /usr/local/bin/ogrinfo -ro test-pg.vrt test
[Thread debugging using libthread_db enabled]
warning: Lowest section in /usr/lib/libicudata.so.38 is .hash at 
0000000000000120
INFO: Open of `test-pg.vrt'
       using driver `VRT' successful.
[New Thread 0x7f35a95aa710 (LWP 13410)]
^C
Program received signal SIGINT, Interrupt.
[Switching to Thread 0x7f35a95aa710 (LWP 13410)]
0x00007f35a32efb9f in poll () from /lib/libc.so.6
(gdb) bt
#0  0x00007f35a32efb9f in poll () from /lib/libc.so.6
#1  0x00007f35a51b7296 in ?? () from /usr/lib/libcurl.so.4
#2  0x00007f35a51afbc1 in ?? () from /usr/lib/libcurl.so.4
#3  0x00007f35a51afefd in ?? () from /usr/lib/libcurl.so.4
#4  0x00007f35a519ea3b in ?? () from /usr/lib/libcurl.so.4
#5  0x00007f35a51ac80b in ?? () from /usr/lib/libcurl.so.4
#6  0x00007f35a8ca7f5c in VSICurlFilesystemHandler::GetFileList (
     this=0x17b0310,
     pszDirname=0x17b28e8 "/vsicurl/http://example.com/ws",
     pbGotFileList=0x17b2850) at cpl_vsil_curl.cpp:2314
#7  0x00007f35a8cab19b in VSICurlFilesystemHandler::ReadDir (this=0x17b0310,
     pszDirname=<value optimized out>, pbGotFileList=0x7fff120d38f8)
     at cpl_vsil_curl.cpp:2461
#8  0x00007f35a8caa88b in VSICurlFilesystemHandler::Stat (this=0x17b0310,
     pszFilename=0x17b2730 "/vsicurl/http://example.com/ws/test-pg.php",
     pStatBuf=<value optimized out>, nFlags=3) at cpl_vsil_curl.cpp:2367
#9  0x00007f35a8cb1c39 in VSIStatExL (
     pszFilename=0x17b2730 "/vsicurl/http://example.com/ws/test-pg.php",
     psStatBuf=0x7fff120d39b0, nFlags=3) at cpl_vsil.cpp:285
#10 0x00007f35a8e73f44 in OGRShapeDataSource::Open (this=0x17b27a0,
     pszNewName=0x17b2730 "/vsicurl/http://example.com/ws/test-pg.php",
     bUpdate=0, bTestOpen=1, bForceSingleFileDataSource=0)
     at ogrshapedatasource.cpp:109
#11 0x00007f35a8e74e82 in OGRShapeDriver::Open (this=<value optimized out>,
     pszFilename=0x17b2730 "/vsicurl/http://example.com/ws/test-pg.php",
     bUpdate=0) at ogrshapedriver.cpp:70
#12 0x00007f35a8e7272c in OGRSFDriverRegistrar::Open (
     pszName=0x17b2730 "/vsicurl/http://example.com/ws/test-pg.php",
     bUpdate=0, ppoDriver=0x0) at ogrsfdriverregistrar.cpp:226
#13 0x00007f35a8e966f7 in OGRVRTLayer::FullInitialize (this=0x17b1530)
     at ogrvrtlayer.cpp:322
#14 0x00007f35a8e97450 in OGRVRTLayer::GetLayerDefn (this=0x17b1530)
     at ogrvrtlayer.cpp:1864
#15 0x000000000040195d in ReportOnLayer (poLayer=0x7fff120d2f50,
     pszWHERE=0x1 <Address 0x1 out of bounds>, poSpatialFilter=0x493c0)
     at ogrinfo.cpp:360
#16 0x00000000004023f6 in main (nArgc=<value optimized out>,
     papszArgv=0x17b0ae0) at ogrinfo.cpp:316
(gdb) c
Continuing.

##### after a very long wait 3-5 minutes it times out with the following

ERROR 1: Failed to open datasource 
`/vsicurl/http://example.com/ws/test-pg.php'.

Layer name: test
Geometry: 3D Point
Feature Count: 0
Layer SRS WKT:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         TOWGS84[0,0,0,0,0,0,0],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9108"]],
     AUTHORITY["EPSG","4326"]]

Program exited normally.

OK, got 1.10beta1 compiled I'll give that a try. This might just be my 
very old version of curl 7.18.2

-Steve

> I haven't checked the RFCs, but all tests I have done before against Apache or
> IIS servers show that asking for more than the file size work.
>
>>
>> Thank you for your suggestion,
>>     -Steve
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From woodbri at swoodbridge.com  Sat Feb  9 19:55:23 2013
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Sat, 09 Feb 2013 22:55:23 -0500
Subject: [gdal-dev] Virtual Filesystem Question(s)
In-Reply-To: <5116F6E2.1030202@swoodbridge.com>
References: <5116BF6F.70106@swoodbridge.com>
	<loom.20130210T000226-984@post.gmane.org>
	<5116DA79.5060201@swoodbridge.com>
	<201302100041.43604.even.rouault@mines-paris.org>
	<5116F6E2.1030202@swoodbridge.com>
Message-ID: <51171A2B.7090406@swoodbridge.com>

On 2/9/2013 8:24 PM, Stephen Woodbridge wrote:
> On 2/9/2013 6:41 PM, Even Rouault wrote:
>> Le dimanche 10 f?vrier 2013 00:23:37, Stephen Woodbridge a ?crit :
>>> On 2/9/2013 6:03 PM, Jukka Rahkonen wrote:
>>>> Stephen Woodbridge <woodbri <at> swoodbridge.com> writes:
>>>>> Just a followup to this, I have downloaded gdal-1.9.2 and get the same
>>>>> results. So no joy there.
>>>>>
>>>>> -Steve
>>>>
>>>> Perhaps vsicurl_streaming that is also mentioned in the same blog is
>>>> something worth trying.
>>>
>>> Yeah, I saw that. I may or may not be able to build trunk on this
>>> machine depending on the dependencies that needs as more of the
>>> libraries are fairly dated.
>>>
>>> But more importantly, I think this is a bug. I'm happy to write it up
>>> but it would be nice to get some confirmation. At the moment, I'm review
>>> the source code to see if I can see a problem there.
>>
>> Well, I rather think that there's a bug in your PHP script, because
>> curl -r
>> 0-16383 http://www.google.fr works even if the returned file is < 16383
>>
>> whereas :
>>
>> curl -r 0-16383 http://example.com/ws/test-pg.php hangs
>>
>> Or it is a bug in libcurl itself.
>
> OK, bug in my code. So using the above command now works. But ogrinfo
> alternately hangs and then runs with this error:
>
> ERROR 1: Failed to open datasource
> `/vsicurl/http://example.com/ws/test-pg.php'.
>
> In gdb, it appears to be hanging if I ^C and bt in poll()
>
> (gdb) run -ro test-pg.vrt test
> Starting program: /usr/local/bin/ogrinfo -ro test-pg.vrt test
> [Thread debugging using libthread_db enabled]
> warning: Lowest section in /usr/lib/libicudata.so.38 is .hash at
> 0000000000000120
> INFO: Open of `test-pg.vrt'
>        using driver `VRT' successful.
> [New Thread 0x7f35a95aa710 (LWP 13410)]
> ^C
> Program received signal SIGINT, Interrupt.
> [Switching to Thread 0x7f35a95aa710 (LWP 13410)]
> 0x00007f35a32efb9f in poll () from /lib/libc.so.6
> (gdb) bt
> #0  0x00007f35a32efb9f in poll () from /lib/libc.so.6
> #1  0x00007f35a51b7296 in ?? () from /usr/lib/libcurl.so.4
> #2  0x00007f35a51afbc1 in ?? () from /usr/lib/libcurl.so.4
> #3  0x00007f35a51afefd in ?? () from /usr/lib/libcurl.so.4
> #4  0x00007f35a519ea3b in ?? () from /usr/lib/libcurl.so.4
> #5  0x00007f35a51ac80b in ?? () from /usr/lib/libcurl.so.4
> #6  0x00007f35a8ca7f5c in VSICurlFilesystemHandler::GetFileList (
>      this=0x17b0310,
>      pszDirname=0x17b28e8 "/vsicurl/http://example.com/ws",
>      pbGotFileList=0x17b2850) at cpl_vsil_curl.cpp:2314
> #7  0x00007f35a8cab19b in VSICurlFilesystemHandler::ReadDir
> (this=0x17b0310,
>      pszDirname=<value optimized out>, pbGotFileList=0x7fff120d38f8)
>      at cpl_vsil_curl.cpp:2461
> #8  0x00007f35a8caa88b in VSICurlFilesystemHandler::Stat (this=0x17b0310,
>      pszFilename=0x17b2730 "/vsicurl/http://example.com/ws/test-pg.php",
>      pStatBuf=<value optimized out>, nFlags=3) at cpl_vsil_curl.cpp:2367
> #9  0x00007f35a8cb1c39 in VSIStatExL (
>      pszFilename=0x17b2730 "/vsicurl/http://example.com/ws/test-pg.php",
>      psStatBuf=0x7fff120d39b0, nFlags=3) at cpl_vsil.cpp:285
> #10 0x00007f35a8e73f44 in OGRShapeDataSource::Open (this=0x17b27a0,
>      pszNewName=0x17b2730 "/vsicurl/http://example.com/ws/test-pg.php",
>      bUpdate=0, bTestOpen=1, bForceSingleFileDataSource=0)
>      at ogrshapedatasource.cpp:109
> #11 0x00007f35a8e74e82 in OGRShapeDriver::Open (this=<value optimized out>,
>      pszFilename=0x17b2730 "/vsicurl/http://example.com/ws/test-pg.php",
>      bUpdate=0) at ogrshapedriver.cpp:70
> #12 0x00007f35a8e7272c in OGRSFDriverRegistrar::Open (
>      pszName=0x17b2730 "/vsicurl/http://example.com/ws/test-pg.php",
>      bUpdate=0, ppoDriver=0x0) at ogrsfdriverregistrar.cpp:226
> #13 0x00007f35a8e966f7 in OGRVRTLayer::FullInitialize (this=0x17b1530)
>      at ogrvrtlayer.cpp:322
> #14 0x00007f35a8e97450 in OGRVRTLayer::GetLayerDefn (this=0x17b1530)
>      at ogrvrtlayer.cpp:1864
> #15 0x000000000040195d in ReportOnLayer (poLayer=0x7fff120d2f50,
>      pszWHERE=0x1 <Address 0x1 out of bounds>, poSpatialFilter=0x493c0)
>      at ogrinfo.cpp:360
> #16 0x00000000004023f6 in main (nArgc=<value optimized out>,
>      papszArgv=0x17b0ae0) at ogrinfo.cpp:316
> (gdb) c
> Continuing.
>
> ##### after a very long wait 3-5 minutes it times out with the following
>
> ERROR 1: Failed to open datasource
> `/vsicurl/http://example.com/ws/test-pg.php'.
>
> Layer name: test
> Geometry: 3D Point
> Feature Count: 0
> Layer SRS WKT:
> GEOGCS["WGS 84",
>      DATUM["WGS_1984",
>          SPHEROID["WGS 84",6378137,298.257223563,
>              AUTHORITY["EPSG","7030"]],
>          TOWGS84[0,0,0,0,0,0,0],
>          AUTHORITY["EPSG","6326"]],
>      PRIMEM["Greenwich",0,
>          AUTHORITY["EPSG","8901"]],
>      UNIT["degree",0.0174532925199433,
>          AUTHORITY["EPSG","9108"]],
>      AUTHORITY["EPSG","4326"]]
>
> Program exited normally.
>
> OK, got 1.10beta1 compiled I'll give that a try. This might just be my
> very old version of curl 7.18.2

Even,

Running with 1.10beta1 and the (hopefully fixed) test-pg.php

I am getting similar behavior, so maybe my curl is just broken.

woodbri at mappy:~/work/mongo/ogr$ ogrinfo -ro test-pg.vrt test
INFO: Open of `test-pg.vrt'
       using driver `VRT' successful.
ERROR 1: Failed to open datasource 
`/vsicurl/http://imaptools.com:8080/ws/test-pg.php'.

Layer name: test
Geometry: Point
Feature Count: 0
Layer SRS WKT:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         TOWGS84[0,0,0,0,0,0,0],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9108"]],
     AUTHORITY["EPSG","4326"]]

And my debug logging reports:

Accept-Ranges: 0-13052
HTTP_RANGE: bytes=0-16383
Content-Range: bytes 0-13052/13053
Content-Length: 13053
Reading: start: 0; length: 13053
strlen(out2): 13053    <---- this is the size of the echo response text

But the good news is that your /vsicurl_streaming/ is working. Why is it 
trying to down a .csvt file?

woodbri at mappy:~/work/mongo/ogr$ ogrinfo test-pg.vrt -al -q -ro --debug on
OGR: OGROpen(test-pg.vrt/0x22ed650) succeeded as VRT.
OGR: GetLayerCount() = 1

VSICURL: Start download for http://imaptools.com:8080/ws/test-pg.php?id=12
VSICURL: Stop download for http://imaptools.com:8080/ws/test-pg.php?id=12
VSICURL: Start download for http://imaptools.com:8080/ws/test-pg.csvt
VSICURL: Stop download for http://imaptools.com:8080/ws/test-pg.csvt
OGR: 
OGROpen(CSV:/vsicurl_streaming/http://imaptools.com:8080/ws/test-pg.php?id=12/0x22ef680) 
succeeded as CSV.

Thanks,
   -Steve


> -Steve
>
>> I haven't checked the RFCs, but all tests I have done before against
>> Apache or
>> IIS servers show that asking for more than the file size work.
>>
>>>
>>> Thank you for your suggestion,
>>>     -Steve
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Sun Feb 10 03:45:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 10 Feb 2013 12:45:16 +0100
Subject: [gdal-dev] GDAL RPC protocol to make GDAL (more) failsafe
In-Reply-To: <CALGmxE+qnNzUbRg3XVhGmOxghrqNT5Jc8j1TOCZEdPoiZoTfkg@mail.gmail.com>
References: <C5D1974ECA44D2429ECBC64B967C34C0CAF3DB73B9@MAILBOXSERVER.rf.local>
	<201302062029.28988.even.rouault@mines-paris.org>
	<CALGmxE+qnNzUbRg3XVhGmOxghrqNT5Jc8j1TOCZEdPoiZoTfkg@mail.gmail.com>
Message-ID: <201302101245.16568.even.rouault@mines-paris.org>

Le mercredi 06 f?vrier 2013 22:47:33, Chris Barker - NOAA Federal a ?crit :
> On Wed, Feb 6, 2013 at 11:29 AM, Even Rouault
> 
> <even.rouault at mines-paris.org> wrote:
> > Chris, GDAL_SUBPROCESS matches indeed the current state of the
> > implementation. However, as I answered to Livneh, it could be moredately
> > easy to extend it to work with a real remote server, so I prefer to keep
> > it generic with GDAL_API_PROXY.

Just to keep you informed that it is also now possible to connect to a 
gdalserver in TCP, possibly on a remote host. In that case, gdalserver must be 
launched on a host with "gdalserver -tcpserver the_tcp_port". And the client 
must set GDAL_API_PROXY_SERVER="hostname:the_tcp_port", where hostname is a 
string or a IP address.

> 
> very cool!
> 
> -Chris

From bontepaarden at gmail.com  Sun Feb 10 11:30:09 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Sun, 10 Feb 2013 20:30:09 +0100
Subject: [gdal-dev] Converting ecw to tif for Geoserver
In-Reply-To: <CAHNf2YR7DHh3wvRhcQnu86PHJDTR4868FE6ggd8j2+6S3GmrQw@mail.gmail.com>
References: <CAHNf2YSDs-r+Y2eqfL7BXzgnobazhEB73J7kTedJbtr8VfswCA@mail.gmail.com>
	<201302091417.37434.even.rouault@mines-paris.org>
	<CAHNf2YR7DHh3wvRhcQnu86PHJDTR4868FE6ggd8j2+6S3GmrQw@mail.gmail.com>
Message-ID: <CAHNf2YRuB7qQykjavJxSqz31VLvZDBnvOc2sEDWBOVkZUb82WQ@mail.gmail.com>

After almost 27 hours of processing I finally have a result which looks
good in MapWindow.
I did however noticed that the 'normal' translate-addOverviews process
produces a tif-file with a size of 1.1GB. The original ecw is 2.6GB.
But when I convert the ecw using these steps to make it transparent:

echo # Make almost white pixel truly white:
nearblack -of GTiff -white -o white.tif my.ecw

echo Warp and mark white pixels as transparent
gdalwarp --config GDAL_CACHEMAX 500 -wm 500 -multi -of GTiff -dstalpha
-srcnodata "255 255 255" -co tiled=yes -co "BLOCKXSIZE=512" -co
"BLOCKYSIZE=512" -s_srs EPSG:28992 -r lanczos -overwrite white.tif
warped.tif

echo Compress
gdal_translate -of GTiff -a_srs EPSG:28992 -b 1 -b 2 -b 3 -co tiled=yes -co
compress=jpeg -co photometric=YCBCR -co BLOCKXSIZE=512 -co BLOCKYSIZE=512
--config GDAL_TIFF_INTERNAL_MASK YES warped.tif compressed.tif

echo nodata is black now. Make al blackish pixels black:
nearblack -of GTiff -o compressed-black.tif compressed.tif

echo set nodata value to black:
gdal_translate -a_nodata 0 compressed-black.tif compressed-nodata.tif

echo Add overviews
gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
PHOTOMETRIC_OVERVIEW YCBCR compressed-nodata.tif 2 4 8 16 32 64 128

I get a tif file with a size of 31GB!

When I do a gdalinfo I get this:

Driver: GTiff/GeoTIFF
Files: compressed-nodata.tif
Size is 100000, 80000
Coordinate System is:
PROJCS["Amersfoort / RD New",
[cut]
Origin = (149000.000000000000000,384000.000000000000000)
Pixel Size = (0.100000000000000,-0.100000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  149000.000,  384000.000) (  5d18' 4.75"E, 51d26'45.47"N)
Lower Left  (  149000.000,  376000.000) (  5d18' 5.24"E, 51d22'26.57"N)
Upper Right (  159000.000,  384000.000) (  5d26'42.66"E, 51d26'45.54"N)
Lower Right (  159000.000,  376000.000) (  5d26'42.34"E, 51d22'26.63"N)
Center      (  154000.000,  380000.000) (  5d22'23.75"E, 51d24'36.13"N)
Band 1 Block=100000x1 Type=Byte, ColorInterp=Red
  NoData Value=0
  Overviews: 50000x40000, 25000x20000, 12500x10000, 6250x5000, 3125x2500,
1563x1
250, 782x625
Band 2 Block=100000x1 Type=Byte, ColorInterp=Green
  NoData Value=0
  Overviews: 50000x40000, 25000x20000, 12500x10000, 6250x5000, 3125x2500,
1563x1
250, 782x625
Band 3 Block=100000x1 Type=Byte, ColorInterp=Blue
  NoData Value=0
  Overviews: 50000x40000, 25000x20000, 12500x10000, 6250x5000, 3125x2500,
1563x1
250, 782x625

I don't see anything about compression.
Did I loose it along the way? Or is it expected to have such a large sized
end result.
Because it is now so large I think I'll get into trouble when I add it to
Geoserver. I hoped to use the tiff directly and not use Geoserver's pyramid
plug-in.

Thanks,


Paul

2013/2/9 Paul Meems <bontepaarden at gmail.com>

> Thanks Even,
>
> The low-res option really helped. Now I can test the commands in seconds
> instead of hours.
> I did these commands which seem to produce a tif file with overviews and
> correct transparency.
> I've opened it in MapWindow for now to check. MapWindow is using GDAL to
> read raster files.
>
> I will now convert the hi-res version and try that version in Geoserver.
> Here are the commands I used:
>
> # Create a low-res version:
> gdal_translate my.ecw test\lowres.tif -outsize 1% 1%
>
> # Fix the almost white pixels:
> nearblack -of GTiff -white -o lowres-white.tif lowres.tif
>
>
> # Warp and mark white pixels as transparent
> gdalwarp -multi -of GTiff -dstalpha -srcnodata "255 255 255" -co tiled=yes
> -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512" -s_srs EPSG:28992 -r lanczos
> -overwrite lowres-white.tif lowres-transparent.tif
>
> # Create internal tiles, don't use mask band because Geoserver doesn't
> like that:
> gdal_translate -of GTiff -a_srs EPSG:28992 -b 1 -b 2 -b 3 -co tiled=yes
> -co compress=jpeg -co photometric=YCBCR -co BLOCKXSIZE=512 -co
> BLOCKYSIZE=512 --config GDAL_TIFF_INTERNAL_MASK YES lowres-transparent.tif
> lowres-compressed.tif
>
> # nodata is now black, but not all pixels are truly black:
> nearblack -of GTiff -o lowres-compressed-black.tif lowres-compressed.tif
>
> # Set the nodata value to black:
> gdal_translate -a_nodata 0 lowres-compressed-black.tif
> lowres-compressed-transparent.tif
>
> # Add overviews
> gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
> PHOTOMETRIC_OVERVIEW YCBCR lowres-compressed-transparent.tif 2 4 8 16 32 64
> 128
>
>
> Thanks all.
>
>
> Paul
>
> 2013/2/9 Even Rouault <even.rouault at mines-paris.org>
>
>> Le samedi 09 f?vrier 2013 13:48:13, Paul Meems a ?crit :
>> > The last days I've been trying to convert my ecw file to a GeoTiff so I
>> can
>> > use it in Geoserver.
>> > The ecw is a mozaik of aerial photos.
>> > When I do these two commands it is working in Geoserver:
>> >
>> >    - gdal_translate -of GTiff -co tiled=yes -co compress=jpeg -co
>> >    photometric=YCBCR -a_srs EPSG:28992 -co "BLOCKXSIZE=512" -co
>> >    "BLOCKYSIZE=512" my.ecw my.tif
>> >    - gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
>> >    PHOTOMETRIC_OVERVIEW YCBCR  my.tif 2 4 8 16 32 64 128
>> >
>> > But I want to add a second reference layer beneath this one which is
>> > larger. The translated ecw has white edges, so that is not looking nice.
>> > I've asked about this before and suggested was to use a cutline. So I
>> > create a polygon that is inside the ecw file and ran this command:
>> >
>> >    - gdalwarp -multi -cutline "clip.shp" -of GTiff -co tiled=yes -co
>> >    compress=jpeg -co photometric=YCBCR -co "BLOCKXSIZE=512" -co
>> >    "BLOCKYSIZE=512" -s_srs EPSG:28992 -r lanczos -overwrite my.ecw
>> > clipped.tif
>> >
>> > When I open clipped.tif in MapWindow I can see the white edges are gone.
>> > But when I call *gdaladdo* white artifacts are back again.
>>
>> I'm not clear why gdaladdo would add while artifacts if clipped.tif has no
>> more white borders (i.e. if your clipping shape is a rectangle completely
>> inside the validity area of the ECW). Unless clipped.tif has an alpha
>> channel,
>> but the gdalwarp command line you showed has no -dstalpha. But that
>> wouldn't
>> work actually since you use JPEG YCbCr compression, which doesn't support
>> alpha channels.
>>
>> A solution - provided that MapWindows supports GDAL mask bands as
>> transparency
>> channels - would be :
>>
>> # Warp and mark white pixels as transparent
>> gdalwarp 1.tif 2.tif -dstalpha -srcnodata "255 255 255" [other_options]
>>
>> # Transform 2.tif as a JPEG-YCBCR-in-TIFF with an internal mask band
>> gdal_translate 2.tif 3.tif -b 1 -b 2 -b 3 -mask 4 -co compress=jpeg -co
>> photometric=YCBCR -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 --config
>> GDAL_TIFF_INTERNAL_MASK YES
>>
>> # Add overviews
>> gdaladdo 3.tif  -r average --config COMPRESS_OVERVIEW JPEG --config
>>    PHOTOMETRIC_OVERVIEW YCBCR  2 4
>>
>> > I'm now in the process of calling *nearblack* on both my.tiff and
>> > clipped.tif but I'm not sure I'm doing it right. I think I'm using the
>> > correct commands but perhaps in the wrong order.
>> > The ecw file isn't very large (2.6GB) but all steps take a long time,
>> > especially *nearblack *which is running for 4 hours now and is just at
>> 10%.
>> >
>>
>> For the experiments, I'd encourage working with a low res extract of the
>> ECW :
>> gdal_translate src.ecw lowres.tif -outsize 1% 1%
>>
>> > Does anybody have some suggestions how to process the steps to convert
>> an
>> > ecw file which has white outside areas to a transparent tif file with
>> > overviews?
>> >
>> > I'm running the latest GDAL v1.10 version from Tamas on Windows Vista
>> on a
>> > 8GB 4core machine. Speed is not a big issue when I know the result will
>> be
>> > OK.
>>
>> Another point: It is well known that warping with compression doesn't
>> produce
>> files with optimal size. See
>> http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#GeoTIFFoutput-
>> coCOMPRESSisbroken
>>
>> >
>> > Thanks,
>> >
>> > Paul
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130210/ad566718/attachment-0001.html>

From andrea.aime at geo-solutions.it  Sun Feb 10 11:51:00 2013
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Sun, 10 Feb 2013 20:51:00 +0100
Subject: [gdal-dev] Converting ecw to tif for Geoserver
In-Reply-To: <CAHNf2YRuB7qQykjavJxSqz31VLvZDBnvOc2sEDWBOVkZUb82WQ@mail.gmail.com>
References: <CAHNf2YSDs-r+Y2eqfL7BXzgnobazhEB73J7kTedJbtr8VfswCA@mail.gmail.com>
	<201302091417.37434.even.rouault@mines-paris.org>
	<CAHNf2YR7DHh3wvRhcQnu86PHJDTR4868FE6ggd8j2+6S3GmrQw@mail.gmail.com>
	<CAHNf2YRuB7qQykjavJxSqz31VLvZDBnvOc2sEDWBOVkZUb82WQ@mail.gmail.com>
Message-ID: <CA+nxMTt--_ce6mbuadsg6zps6uaG9PqV7e-RxNfVPXhWhvv_5Q@mail.gmail.com>

On Sun, Feb 10, 2013 at 8:30 PM, Paul Meems <bontepaarden at gmail.com> wrote:

> I don't see anything about compression.
> Did I loose it along the way? Or is it expected to have such a large sized
> end result.
> Because it is now so large I think I'll get into trouble when I add it to
> Geoserver. I hoped to use the tiff directly and not use Geoserver's pyramid
> plug-in.
>

As said before, GeoServer cannot recognize the GDAL alpha mask, so even if
you manage to load it (it's a BigTIFF, it should
be possible to load it, we tested TIFFs up to 100GB) you'll lose
transparency anyways.

Cheers
Andrea

-- 
==
Our support, Your Success! Visit http://opensdi.geo-solutions.it for more
information.
==

Ing. Andrea Aime
@geowolf
Technical Lead

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax: +39 0584 1660272
mob: +39  339 8844549

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130210/fe34e3b6/attachment.html>

From bontepaarden at gmail.com  Sun Feb 10 11:54:59 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Sun, 10 Feb 2013 20:54:59 +0100
Subject: [gdal-dev] Converting ecw to tif for Geoserver
In-Reply-To: <CA+nxMTt--_ce6mbuadsg6zps6uaG9PqV7e-RxNfVPXhWhvv_5Q@mail.gmail.com>
References: <CAHNf2YSDs-r+Y2eqfL7BXzgnobazhEB73J7kTedJbtr8VfswCA@mail.gmail.com>
	<201302091417.37434.even.rouault@mines-paris.org>
	<CAHNf2YR7DHh3wvRhcQnu86PHJDTR4868FE6ggd8j2+6S3GmrQw@mail.gmail.com>
	<CAHNf2YRuB7qQykjavJxSqz31VLvZDBnvOc2sEDWBOVkZUb82WQ@mail.gmail.com>
	<CA+nxMTt--_ce6mbuadsg6zps6uaG9PqV7e-RxNfVPXhWhvv_5Q@mail.gmail.com>
Message-ID: <CAHNf2YSxYf5NtCf4TvkLaxz4Bd9uKzh9mVyC+6DSesc=L6gUhw@mail.gmail.com>

Thanks Andrea,

I didn't understand that the first time.
So there is no way to have the raster on top of another layer without
getting white areas?
In that case I will upload the smaller tiff file ;)

--
Paul

2013/2/10 Andrea Aime <andrea.aime at geo-solutions.it>

> On Sun, Feb 10, 2013 at 8:30 PM, Paul Meems <bontepaarden at gmail.com>wrote:
>
>> I don't see anything about compression.
>> Did I loose it along the way? Or is it expected to have such a large
>> sized end result.
>> Because it is now so large I think I'll get into trouble when I add it to
>> Geoserver. I hoped to use the tiff directly and not use Geoserver's pyramid
>> plug-in.
>>
>
> As said before, GeoServer cannot recognize the GDAL alpha mask, so even if
> you manage to load it (it's a BigTIFF, it should
> be possible to load it, we tested TIFFs up to 100GB) you'll lose
> transparency anyways.
>
> Cheers
> Andrea
>
> --
> ==
> Our support, Your Success! Visit http://opensdi.geo-solutions.it for more
> information.
> ==
>
> Ing. Andrea Aime
> @geowolf
> Technical Lead
>
> GeoSolutions S.A.S.
> Via Poggio alle Viti 1187
> 55054  Massarosa (LU)
> Italy
> phone: +39 0584 962313
> fax: +39 0584 1660272
> mob: +39  339 8844549
>
> http://www.geo-solutions.it
> http://twitter.com/geosolutions_it
>
> -------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130210/5bc45089/attachment.html>

From andrea.aime at geo-solutions.it  Sun Feb 10 12:16:20 2013
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Sun, 10 Feb 2013 21:16:20 +0100
Subject: [gdal-dev] Converting ecw to tif for Geoserver
In-Reply-To: <CAHNf2YSxYf5NtCf4TvkLaxz4Bd9uKzh9mVyC+6DSesc=L6gUhw@mail.gmail.com>
References: <CAHNf2YSDs-r+Y2eqfL7BXzgnobazhEB73J7kTedJbtr8VfswCA@mail.gmail.com>
	<201302091417.37434.even.rouault@mines-paris.org>
	<CAHNf2YR7DHh3wvRhcQnu86PHJDTR4868FE6ggd8j2+6S3GmrQw@mail.gmail.com>
	<CAHNf2YRuB7qQykjavJxSqz31VLvZDBnvOc2sEDWBOVkZUb82WQ@mail.gmail.com>
	<CA+nxMTt--_ce6mbuadsg6zps6uaG9PqV7e-RxNfVPXhWhvv_5Q@mail.gmail.com>
	<CAHNf2YSxYf5NtCf4TvkLaxz4Bd9uKzh9mVyC+6DSesc=L6gUhw@mail.gmail.com>
Message-ID: <CA+nxMTsOdgc0yitbELmj5a=J_qdi1AoXfBY1rLsxmATkGwFHYw@mail.gmail.com>

On Sun, Feb 10, 2013 at 8:54 PM, Paul Meems <bontepaarden at gmail.com> wrote:

> Thanks Andrea,
>
> I didn't understand that the first time.
> So there is no way to have the raster on top of another layer without
> getting white areas?
> In that case I will upload the smaller tiff file ;)
>

I've tried just to see what happens, GeoServer ends up thinking the mask is
an overview
and displays it when zoomed out, showing the actual data when zoomed in.
It should be possible to modify the TIFF reader to handle the transparency
mask accordingly,
but it's going to take some work.

Another option could have been to set the "input transparent color" in the
raster configuration
to white, but unfortunately the jpeg compression alters pixels and you'll
get many almost
white pixels in the jpeg file that won't be masked this way.

The image mosaic code also has the ability to support "footprint" files in
wkb format (so, as
vector masks), but that's an undocumented functionality, one that I don't
know if it's user
accessible, or must be setup programmatically (the only times I've seen it
used, the
footprints were programmatically loaded into the mosaic API).

Long story short, I don't believe there is an easy way to get what you
want, without making
some changes to the way GeoServer reads TIFF files.

Cheers
Andrea



-- 
==
Our support, Your Success! Visit http://opensdi.geo-solutions.it for more
information.
==

Ing. Andrea Aime
@geowolf
Technical Lead

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax: +39 0584 1660272
mob: +39  339 8844549

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130210/64eef6de/attachment.html>

From etourigny.dev at gmail.com  Sun Feb 10 12:58:41 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun, 10 Feb 2013 18:58:41 -0200
Subject: [gdal-dev] Converting ecw to tif for Geoserver
In-Reply-To: <CAHNf2YR7DHh3wvRhcQnu86PHJDTR4868FE6ggd8j2+6S3GmrQw@mail.gmail.com>
References: <CAHNf2YSDs-r+Y2eqfL7BXzgnobazhEB73J7kTedJbtr8VfswCA@mail.gmail.com>
	<201302091417.37434.even.rouault@mines-paris.org>
	<CAHNf2YR7DHh3wvRhcQnu86PHJDTR4868FE6ggd8j2+6S3GmrQw@mail.gmail.com>
Message-ID: <CA+TxYvM+8aV6z_8xEnu=ni28DRdiVSwuqCYOh3TqP_AP9cvR+A@mail.gmail.com>

On Sat, Feb 9, 2013 at 12:11 PM, Paul Meems <bontepaarden at gmail.com> wrote:
> Thanks Even,
>
> The low-res option really helped. Now I can test the commands in seconds
> instead of hours.
> I did these commands which seem to produce a tif file with overviews and
> correct transparency.
> I've opened it in MapWindow for now to check. MapWindow is using GDAL to
> read raster files.
>
> I will now convert the hi-res version and try that version in Geoserver.
> Here are the commands I used:
>
> # Create a low-res version:
> gdal_translate my.ecw test\lowres.tif -outsize 1% 1%
>
> # Fix the almost white pixels:
> nearblack -of GTiff -white -o lowres-white.tif lowres.tif
>
>
> # Warp and mark white pixels as transparent
> gdalwarp -multi -of GTiff -dstalpha -srcnodata "255 255 255" -co tiled=yes
> -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512" -s_srs EPSG:28992 -r lanczos
> -overwrite lowres-white.tif lowres-transparent.tif
>
> # Create internal tiles, don't use mask band because Geoserver doesn't like
> that:
> gdal_translate -of GTiff -a_srs EPSG:28992 -b 1 -b 2 -b 3 -co tiled=yes -co
> compress=jpeg -co photometric=YCBCR -co BLOCKXSIZE=512 -co BLOCKYSIZE=512
> --config GDAL_TIFF_INTERNAL_MASK YES lowres-transparent.tif
> lowres-compressed.tif
>
> # nodata is now black, but not all pixels are truly black:
> nearblack -of GTiff -o lowres-compressed-black.tif lowres-compressed.tif
>
> # Set the nodata value to black:
> gdal_translate -a_nodata 0 lowres-compressed-black.tif
> lowres-compressed-transparent.tif

you need to add option to compress in these last two commands, or the
final one only

>
> # Add overviews
> gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
> PHOTOMETRIC_OVERVIEW YCBCR lowres-compressed-transparent.tif 2 4 8 16 32 64
> 128
>
>
> Thanks all.
>
>
> Paul
>
> 2013/2/9 Even Rouault <even.rouault at mines-paris.org>
>>
>> Le samedi 09 f?vrier 2013 13:48:13, Paul Meems a ?crit :
>> > The last days I've been trying to convert my ecw file to a GeoTiff so I
>> > can
>> > use it in Geoserver.
>> > The ecw is a mozaik of aerial photos.
>> > When I do these two commands it is working in Geoserver:
>> >
>> >    - gdal_translate -of GTiff -co tiled=yes -co compress=jpeg -co
>> >    photometric=YCBCR -a_srs EPSG:28992 -co "BLOCKXSIZE=512" -co
>> >    "BLOCKYSIZE=512" my.ecw my.tif
>> >    - gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
>> >    PHOTOMETRIC_OVERVIEW YCBCR  my.tif 2 4 8 16 32 64 128
>> >
>> > But I want to add a second reference layer beneath this one which is
>> > larger. The translated ecw has white edges, so that is not looking nice.
>> > I've asked about this before and suggested was to use a cutline. So I
>> > create a polygon that is inside the ecw file and ran this command:
>> >
>> >    - gdalwarp -multi -cutline "clip.shp" -of GTiff -co tiled=yes -co
>> >    compress=jpeg -co photometric=YCBCR -co "BLOCKXSIZE=512" -co
>> >    "BLOCKYSIZE=512" -s_srs EPSG:28992 -r lanczos -overwrite my.ecw
>> > clipped.tif
>> >
>> > When I open clipped.tif in MapWindow I can see the white edges are gone.
>> > But when I call *gdaladdo* white artifacts are back again.
>>
>> I'm not clear why gdaladdo would add while artifacts if clipped.tif has no
>> more white borders (i.e. if your clipping shape is a rectangle completely
>> inside the validity area of the ECW). Unless clipped.tif has an alpha
>> channel,
>> but the gdalwarp command line you showed has no -dstalpha. But that
>> wouldn't
>> work actually since you use JPEG YCbCr compression, which doesn't support
>> alpha channels.
>>
>> A solution - provided that MapWindows supports GDAL mask bands as
>> transparency
>> channels - would be :
>>
>> # Warp and mark white pixels as transparent
>> gdalwarp 1.tif 2.tif -dstalpha -srcnodata "255 255 255" [other_options]
>>
>> # Transform 2.tif as a JPEG-YCBCR-in-TIFF with an internal mask band
>> gdal_translate 2.tif 3.tif -b 1 -b 2 -b 3 -mask 4 -co compress=jpeg -co
>> photometric=YCBCR -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 --config
>> GDAL_TIFF_INTERNAL_MASK YES
>>
>> # Add overviews
>> gdaladdo 3.tif  -r average --config COMPRESS_OVERVIEW JPEG --config
>>    PHOTOMETRIC_OVERVIEW YCBCR  2 4
>>
>> > I'm now in the process of calling *nearblack* on both my.tiff and
>> > clipped.tif but I'm not sure I'm doing it right. I think I'm using the
>> > correct commands but perhaps in the wrong order.
>> > The ecw file isn't very large (2.6GB) but all steps take a long time,
>> > especially *nearblack *which is running for 4 hours now and is just at
>> > 10%.
>> >
>>
>> For the experiments, I'd encourage working with a low res extract of the
>> ECW :
>> gdal_translate src.ecw lowres.tif -outsize 1% 1%
>>
>> > Does anybody have some suggestions how to process the steps to convert
>> > an
>> > ecw file which has white outside areas to a transparent tif file with
>> > overviews?
>> >
>> > I'm running the latest GDAL v1.10 version from Tamas on Windows Vista on
>> > a
>> > 8GB 4core machine. Speed is not a big issue when I know the result will
>> > be
>> > OK.
>>
>> Another point: It is well known that warping with compression doesn't
>> produce
>> files with optimal size. See
>> http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#GeoTIFFoutput-
>> coCOMPRESSisbroken
>>
>> >
>> > Thanks,
>> >
>> > Paul
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Sun Feb 10 13:20:45 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 10 Feb 2013 22:20:45 +0100
Subject: [gdal-dev] Converting ecw to tif for Geoserver
In-Reply-To: <CA+nxMTvXPDKn9ap6APrcM3XbZ2o51W9JWEo24jSqUkXEG2tgZw@mail.gmail.com>
References: <CAHNf2YSDs-r+Y2eqfL7BXzgnobazhEB73J7kTedJbtr8VfswCA@mail.gmail.com>
	<201302091417.37434.even.rouault@mines-paris.org>
	<CA+nxMTvXPDKn9ap6APrcM3XbZ2o51W9JWEo24jSqUkXEG2tgZw@mail.gmail.com>
Message-ID: <201302102220.45520.even.rouault@mines-paris.org>

Le samedi 09 f?vrier 2013 14:41:37, Andrea Aime a ?crit :
> On Sat, Feb 9, 2013 at 2:17 PM, Even Rouault
> 
> <even.rouault at mines-paris.org>wrote:
> > A solution - provided that MapWindows supports GDAL mask bands as
> > transparency

Anoter option would be to do that :

gdal_translate -of VRT tif_with_mask_band.tif out.vrt -b 1 -b 2 -b 3 -b mask

This will turn a RGB+mask_band into a virtual RGBA

Provided that GeoServer can read VRT through GDAL. But I'm a bit surprised to 
see that only just a few GDAL formats are listed in 
http://docs.geoserver.org/stable/en/user/data/raster/gdal.html . Not sure why 
it is a limited list.

> 
> > channels - would be :
> By the title Paul seems to be targetting GeoServer, which does not support
> the mask
> bands
> 
> Cheers
> Andrea

From userofgdal at gmail.com  Mon Feb 11 03:02:19 2013
From: userofgdal at gmail.com (user gdal)
Date: Mon, 11 Feb 2013 16:32:19 +0530
Subject: [gdal-dev] OTB Montrevedi usage with VS 2008
Message-ID: <CAJnZZaLRtu8msjOi-sUq2+sBVZrD3eOJkybgk2evZKRBysTuUw@mail.gmail.com>

Dear all
I have very recently downloaded "Montrevedi" OTB source code. All I see is
myriad classes (but seems no DLL/lib!). I have right now a few doubts:

1. How to use this package in a C++ application using MS Visual Studio .NET
2008?

2. The documentation says the code depends on GDAL and ITK. But I don't see
any binary files such as DLLs. How to use it?

3. How to access formats such as Geo TIFF and ERDAS img with this package?

Thank you,

Yours sincerely,
 Ramesh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130211/a58b27ff/attachment.html>

From andrea.aime at geo-solutions.it  Mon Feb 11 05:18:29 2013
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Mon, 11 Feb 2013 14:18:29 +0100
Subject: [gdal-dev] Converting ecw to tif for Geoserver
In-Reply-To: <201302102220.45520.even.rouault@mines-paris.org>
References: <CAHNf2YSDs-r+Y2eqfL7BXzgnobazhEB73J7kTedJbtr8VfswCA@mail.gmail.com>
	<201302091417.37434.even.rouault@mines-paris.org>
	<CA+nxMTvXPDKn9ap6APrcM3XbZ2o51W9JWEo24jSqUkXEG2tgZw@mail.gmail.com>
	<201302102220.45520.even.rouault@mines-paris.org>
Message-ID: <CA+nxMTs+gs6cHiTm5OVxdm3At3K+v07LonnCzUutTZWpHEQ4Cg@mail.gmail.com>

On Sun, Feb 10, 2013 at 10:20 PM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Provided that GeoServer can read VRT through GDAL. But I'm a bit surprised
> to
> see that only just a few GDAL formats are listed in
> http://docs.geoserver.org/stable/en/user/data/raster/gdal.html . Not sure
> why
> it is a limited list.
>
>
Ah, this is a complicated and sad story, if you want to hear it, not sure
where to start.

First thing, the list of formats is a reflection of a design decision back
then in imageio-ext,
where in order to expose a format you actually have to write a small class.
Nothing fancy,
but one class per format in order to properly extract some metadata from
the files
(I believe this a reflection of what the first format supported by
imageio-ext were).

Then, there is the fact that adding the binding for GDAL geotiff in
GeoServer makes
GeoServer stop reading TIFFs at all. We never had time to investigate.

 Moving forward, there is a tremendous pushback against using native
libraries in the
java world, which came from different angles.
When the GDAL wrappers were first introduced part of the GeoTools community
was
starkly against having such readers, as it would have violated "java
pureness" or something
like that (don't remember exactly the wording, sorry). That eventually came
to pass as that
group moved away and founded GeoToolkit.

But it's not only that, installation wise there is typically a lot of
troubles too.
First off, having to use a native library against a Java application is
seen both as a security
and stability risk, so in some enviroments that is simply a no go (funny
you're proposing to
have an external server to handle closed source formats in these days,
something like that
would help making usage of GDAL more palatable in such enviroments, it's
just that
instead of isolating the proprietary formats we'd have to isolate the whole
GDAL... and
the client to those server pool would have to be pure java).

It is not a case that GeoServer is basically the only java OGC server that
leverages GDAL
(as far as I remember, at least).
In other enviroments it's ok to add native libraries to the mix, but you
have to use the distribution
own packages, which often lack the JNI support, or miss some formats that
are desired.
And again, installing a compiler on those machines is simply a no go, and
asking to install
custom made packages (e.g., custom rpm made for CentOS or RedHat) is again
sometimes a no go.

Finally, importantly, and probably related to the above considerations, the
reception of GDAL/OGR
used as libraries has been rather tiepid in the user community, especially
that part of the user community
that funds the GeoTools/GeoServer development.

To make you an example, I've tried two times to setup a OGR base data store
in GeoToools,
using my spare time, because it sounded like a interesting project, and
cause it seemed like
a good gesture of collaboration among OSGeo projects.
Well, both times the store ended up rotting, personally I don't have a use
for it, and I'm not aware
of any significant usage of it within the user community either.

Hope this clarifies things a bit

Cheers
Andrea

-- 
==
Our support, Your Success! Visit http://opensdi.geo-solutions.it for more
information.
==

Ing. Andrea Aime
@geowolf
Technical Lead

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax: +39 0584 1660272
mob: +39  339 8844549

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130211/a2735ce1/attachment-0001.html>

From ivan.lucena at princeton-ma.us  Mon Feb 11 11:16:07 2013
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon, 11 Feb 2013 14:16:07 -0500
Subject: [gdal-dev]
	=?iso-8859-1?q?gdalwarp_-rpc_and_RPC=5FDEM_results_and?=
	=?iso-8859-1?q?_=2ETIL_files?=
In-Reply-To: <5116A552.5040109@gmail.com>
References: <51158B37.10503@princeton-ma.us> <5116A552.5040109@gmail.com>
Message-ID: <20130211191608.13008.qmail@s466.sureserver.com>

Hi Dmitry,

I am implementing RPC support on a driver, that is why I am interested in see how that thing works using the available sample data from different data providers. Comparing with some software is also part of the game.

>  I orthorectify such products with comparable with Envi results. But,
>  exist TIL driver usually have SRS WGS84 and output raster lost in

That is what I was expecting, EPSG 3427 WGS84 3D, or something similar.

But the sample data I downloaded has in UTM on the Geotiff tags.

The gdalinfo of the .TIL file doesn't show any SRS but shows all the file association and the RPC metadata. 

So it should work better than the VRT solution that would use the UTN SRS for mosaicking with potential overlaps and gaps.

>  resolution on Y Axis. I correct driver and commit it (see ticket #3482
>  for details). Everything should be OK.

That ticket is about overview. 

>  Also you need to add RPC_HEIGHT with some value to correct geoid.
>  http://translate.google.ru/translate?sl=auto&tl=en&js=n&prev=_t&hl=ru&ie=UTF-8&eotf=1&u=http%3A%2F%2Fgis-lab.info%2Fqa%2Forbview3-ortho-gdal.html&act=url
>  

I am using Geoid correction values from NOAA when I run "gfawarp -rpc". Did you noticed a field where you could enter that value when you run the PCI tool? I also checked the accuracy and resolution of my DEM and I used the same one in all the "contenders".

Anyway, thank so very much for all you guys advise.

Regards,

Ivan

>  Best regards,
>  ???? Dmitriy
>  
>  09.02.2013 3:33, Ivan Lucena :
>  > Hi there,
>  >
>  > Does anybody has ever tried to orthorectify an "Ortho Ready Standard"
>  > QuickBird image with .TIL files?
>  >
>  > To whom might be interested, there is a couple of sample data on
>  > digitalglobe.com and you can always find DEM on USGS.COM.
>  >
>  > Contrary to GDAL standards :) in most of those sample dataset the .RPB
>  > file are not directed associated to the Geotiff file. Like in
>  >
>  > some_file_name.tif
>  > some_file_name.rpb
>  >
>  > That is usually the case when the scene covered is too big and the
>  > data provider decided to dived it on tiles.
>  >
>  > The .TIL file describe the offsets in lines/pixel/X/Y of each of the
>  > tiles and the .RPB is related to the .TIL file. Like in:
>  >
>  > some_file_t1.tif
>  > some_file_t2.tif
>  > some_file_t3.tif
>  > some_file_name.til
>  > some_file_name.rpb
>  >
>  > Since GDAL does not support the .TIL file, what one needs to do is to
>  > use gdalbuildvrt to create a VRT to represent the same tilling as the
>  > .TIL file.
>  >
>  > At that point it is still not ready to do orthorectification yet
>  > because gdalwarp doesn't seems to digest the combination .VRT .RPB.
>  >
>  > some_file_name.vrt
>  > some_file_name.rpb
>  >
>  > But that is just a matter of converting the VRT to GTIFF and go ahead
>  > and run:
>  >
>  > gdalwarp some_file_name.tif the_output_name.tif -rpc -to
>  > RPC_DEM=the_dem_file.tif -t_srs EPSG:32610
>  >
>  > But after all that I can't see much more accuracy when overlaying a
>  > vector road map on top of the original non-orthorectified than over
>  > the orthorectified output. It is a little bit better in some places
>  > but worse in some others.
>  >
>  > I found much better results with datasets without tilling. I mean,
>  > without .TIL files. Just one GTIFF and one .RPB
>  >
>  > Has anybody had that same experience?
>  >
>  > Do we have plans to support the .TIL file in GDAL?
>  >
>  > Best regards,
>  >
>  > Ivan
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  >
>  > _______________________________________________
>  > gdal-dev mailing list
>  > gdal-dev at lists.osgeo.org
>  > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev at lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev

From grub80 at gmail.com  Mon Feb 11 22:17:51 2013
From: grub80 at gmail.com (George)
Date: Mon, 11 Feb 2013 22:17:51 -0800
Subject: [gdal-dev] Weird results with gdaldem slope
Message-ID: <CALPxBA+-94Og+UA7TeH8_CrtShT_Dq9zxJwagKj6qgUXogTpFA@mail.gmail.com>

Hi there,

I am using gdaldem to get a slope raster from a DEM (source: ASTER), but it
seems like I can't get a correct result. For comparison purposes I did the
same steps using Arcgis 10.0. In particular, I followed two procedures:

Procedure 1
1. Mosaiced different DEM rasters together
2. Projected the mosaic coordinates to linear
3. Calculated slope (for gdal: gdaldem slope with no extra options)

The result I get is ok, but there are some linear features that are clearly
artificial. ArcGIS  gave the same result.

Procedure 2
1. Mosaiced different DEM rasters together
2. Calculated slope (for gdal: gdaldem slope -s 111120)
3. Projected the slope raster in linear coord.

The result is perfect in ArcGIS, while gdaldem returns a rsater that looks
all white with some black dots (in greyscale, using the same scale of the
ArcGIS one).

What am I doing wrong? I am new to the mailing list (and gdal), so I am not
sure if it's ok to attach examples. If you need them, I'll be happy to post
the rasters.


George
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130211/72ff7cfd/attachment.html>

From asimmons at pvpc.org  Tue Feb 12 07:17:02 2013
From: asimmons at pvpc.org (Muskie)
Date: Tue, 12 Feb 2013 07:17:02 -0800 (PST)
Subject: [gdal-dev] (ogr2ogr) Trying to export data into remote MySQL -
 anyone know how to set up remote configurations on the host side?
Message-ID: <1360682222949-5033748.post@n6.nabble.com>

Hi,

I touched on this issue I am having here: 
http://osgeo-org.1560.n6.nabble.com/Anyone-tried-using-ogr2ogr-on-a-remote-MySQL-db-td5030802.html

Basically I'm trying to give our host DBA the information necessary to
configure our remote MySQL database for ogrinfo and ogr2ogr access. I've
been trolling the internet like crazy with no luck.

Anyone happen to be familiar with this game?

Thanks!



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/ogr2ogr-Trying-to-export-data-into-remote-MySQL-anyone-know-how-to-set-up-remote-configurations-on-t-tp5033748.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaabani.mootez at gmail.com  Tue Feb 12 08:13:38 2013
From: chaabani.mootez at gmail.com (Chaabani Mootez)
Date: Tue, 12 Feb 2013 17:13:38 +0100
Subject: [gdal-dev] About building GDAL on Android
Message-ID: <CAKd3Rt2XF3TWafPiveHKZH-yMg-atB=7N9iOdvX4Q-aYogGKTg@mail.gmail.com>

Hello, I'm trying to build GDAL on Android (Windows 7) using Mingw (msys)
and and Android NDK r8d.

I found only 2 tuto and they didn't work for me (one of them is posted
here: http://lists.osgeo.org/pipermail/gdal-dev/2012-April/032485.html ).

Everytime I run make command errors appears such as : cannot find .o files

collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/c/android/gdal-1.9.0'
make: *** [check-lib] Error 2

I will be thankful for any kind of help :)
-- 

*
*
Email | chaabani.mootez at gmail.com   Skype | mootez.taz
Telephone | (00216) 55 04 88 09   Twitter | @MootezTaz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130212/232f38ca/attachment.html>

From traviskirstine at gmail.com  Tue Feb 12 08:32:31 2013
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Tue, 12 Feb 2013 11:32:31 -0500
Subject: [gdal-dev] (ogr2ogr) Trying to export data into remote MySQL -
 anyone know how to set up remote configurations on the host side?
In-Reply-To: <1360682222949-5033748.post@n6.nabble.com>
References: <1360682222949-5033748.post@n6.nabble.com>
Message-ID: <CALtm4h2sEufHpKME9E3ao19BqiqxSdh3SjykeF6diNFi=mOt8Q@mail.gmail.com>

Muskie,

I've never had the opportunity to use MySQL with ogr but my guess is that
you need to do some thing like:

GRANT USAGE ON cdfofprd.* TO dbreader@'hostname'
      IDENTIFIED BY 'some_pass';
GRANT Select, Insert, Update, Delete ON
      cdfofprd.* TO dbreader@'hostname';
FLUSH PRIVILEGES;
Where hostname is IP address or machine name that
connecting with Mysql server as a client.

From

http://www-css.fnal.gov/dsg/external/freeware/Repl_mysql_vs_psql.html

Regard






On 12 February 2013 10:17, Muskie <asimmons at pvpc.org> wrote:

> Hi,
>
> I touched on this issue I am having here:
>
> http://osgeo-org.1560.n6.nabble.com/Anyone-tried-using-ogr2ogr-on-a-remote-MySQL-db-td5030802.html
>
> Basically I'm trying to give our host DBA the information necessary to
> configure our remote MySQL database for ogrinfo and ogr2ogr access. I've
> been trolling the internet like crazy with no luck.
>
> Anyone happen to be familiar with this game?
>
> Thanks!
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/ogr2ogr-Trying-to-export-data-into-remote-MySQL-anyone-know-how-to-set-up-remote-configurations-on-t-tp5033748.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130212/084e71f3/attachment.html>

From thare at usgs.gov  Tue Feb 12 08:47:16 2013
From: thare at usgs.gov (Hare, Trent)
Date: Tue, 12 Feb 2013 09:47:16 -0700
Subject: [gdal-dev] Weird results with gdaldem slope
In-Reply-To: <CALPxBA+-94Og+UA7TeH8_CrtShT_Dq9zxJwagKj6qgUXogTpFA@mail.gmail.com>
References: <CALPxBA+-94Og+UA7TeH8_CrtShT_Dq9zxJwagKj6qgUXogTpFA@mail.gmail.com>
Message-ID: <CAB6t5t-jMoTZ65210y-d-LHQxMFji9Eza6=Y=Yz7XrKGMXU-1w@mail.gmail.com>

George,
  That sounds like a resampling issue (either from up/down sampling or in
your case from the reprojection stage). During projection, I
*don't*recommend using a nearest neighbor method but a bilinear (or
"higher") for
DEMs. Nearest neighbor is generally the default for applications because it
is fast. Fortunately, GDAL and ArcMap both have options for bilinear or
cubic during reprojection. Running a nearest neighbor can generate a
stair-step for the DEM (and thus odd slopes).

That should solve it...,
Trent




On Mon, Feb 11, 2013 at 11:17 PM, George <grub80 at gmail.com> wrote:

> Hi there,
>
> I am using gdaldem to get a slope raster from a DEM (source: ASTER), but
> it seems like I can't get a correct result. For comparison purposes I did
> the same steps using Arcgis 10.0. In particular, I followed two procedures:
>
> Procedure 1
> 1. Mosaiced different DEM rasters together
> 2. Projected the mosaic coordinates to linear
> 3. Calculated slope (for gdal: gdaldem slope with no extra options)
>
> The result I get is ok, but there are some linear features that are
> clearly artificial. ArcGIS  gave the same result.
>
> Procedure 2
> 1. Mosaiced different DEM rasters together
> 2. Calculated slope (for gdal: gdaldem slope -s 111120)
> 3. Projected the slope raster in linear coord.
>
> The result is perfect in ArcGIS, while gdaldem returns a rsater that looks
> all white with some black dots (in greyscale, using the same scale of the
> ArcGIS one).
>
> What am I doing wrong? I am new to the mailing list (and gdal), so I am
> not sure if it's ok to attach examples. If you need them, I'll be happy to
> post the rasters.
>
>
> George
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130212/424992c2/attachment.html>

From fabian.schindler at eox.at  Tue Feb 12 09:11:18 2013
From: fabian.schindler at eox.at (Fabian Schindler)
Date: Tue, 12 Feb 2013 18:11:18 +0100
Subject: [gdal-dev] Reworking the rasdaman driver
Message-ID: <511A77B6.8060602@eox.at>

Dear devs,

I've been tasked to improve or rewrite the current rasdaman driver 
implementation as it currently suffers a number of drawbacks:

  * it is quite slow (compared to other drivers and other rasdaman
    connection techiques)
  * it does not support creation of new rasters within the database
  * it does not support write access to existing rasters within the database

I think the bad performance of the current implementation is due to the 
use of the `IReadBlock` function of the `RasdamanRasterBand`, as for 
every block that is read, a connection/transaction to the database is 
created and the block is transmitted. My assumption here is that reading 
the raster as a whole (or parts thereof) via `IRasterIO` (probably on 
the Dataset itself and not on the RasterBand) would improve the 
performance as the number of required connections and synchronization is 
reduced.
As far as I can tell, that is the approach with the PostGISRaster driver.

What are your opinions to that matter? What benefits would I miss if I 
neglect block-based IO?

Regards,
Fabian




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130212/26e23a5b/attachment-0001.html>

From even.rouault at mines-paris.org  Tue Feb 12 09:32:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 12 Feb 2013 18:32:16 +0100
Subject: [gdal-dev] Reworking the rasdaman driver
In-Reply-To: <511A77B6.8060602@eox.at>
References: <511A77B6.8060602@eox.at>
Message-ID: <201302121832.16158.even.rouault@mines-paris.org>

Le mardi 12 f?vrier 2013 18:11:18, Fabian Schindler a ?crit :
> Dear devs,
> 
> I've been tasked to improve or rewrite the current rasdaman driver
> implementation as it currently suffers a number of drawbacks:
> 
>   * it is quite slow (compared to other drivers and other rasdaman
>     connection techiques)
>   * it does not support creation of new rasters within the database
>   * it does not support write access to existing rasters within the
> database
> 
> I think the bad performance of the current implementation is due to the
> use of the `IReadBlock` function of the `RasdamanRasterBand`, as for
> every block that is read, a connection/transaction to the database is
> created and the block is transmitted.

Fabian,

That's certainly a reason that can account for the slowness.

> My assumption here is that reading
> the raster as a whole (or parts thereof) via `IRasterIO` (probably on
> the Dataset itself and not on the RasterBand) 

FYI, last time I checked, QGIS only uses RasterIO on the band object.

Lately, I've implemented a heuristics ( see 
http://trac.osgeo.org/gdal/changeset/25595 ) in the ECW driver that detect 
successive calls to ECWRasterBand::IRasterIO() with the same parameters but on 
bands 1, 2, ... N, and when this pattern is detected, it uses internally a 
dataset RasterIO() and cache the multiband buffer to server it to the 
individual band when they request it. But this is something very advanced that 
you probably don't need to look at in a first step. It is anyway only beneficial 
if rasdaman multiband rasters are pixel interleaved. If there are band 
interleaved, such trick is totally useless (and probably slightly counter 
productive)

> would improve the
> performance as the number of required connections and synchronization is
> reduced.
> As far as I can tell, that is the approach with the PostGISRaster driver.
> 
> What are your opinions to that matter? What benefits would I miss if I
> neglect block-based IO?

If you implement an efficient IRasterIO(), you *must* still implement 
IReadBlock() however (pure virtual method of GDALRasterBand). Or redirect it 
onto your IRasterIO() implementation, but that can be dangerous if your 
IRasterIO() implementation sometimes fallback on the generic one, that in turn 
will call IReadBlock().

Best regards,

Even

From cgodkin at gmail.com  Tue Feb 12 11:23:02 2013
From: cgodkin at gmail.com (Carl Godkin)
Date: Tue, 12 Feb 2013 11:23:02 -0800
Subject: [gdal-dev] Constructing GDAL_WMS XML files for TMS servers
Message-ID: <CAE=8km=X7Dwu4zdUJAgo_xWm5a7Fh8KzNMVyh7-UHx+rKuozxA@mail.gmail.com>

Hi again,

A couple of weeks ago I learned how to use gdalinfo and gdal_translate to
make the XML service files used by the WMS drivers.

For instance,

 gdalinfo "WMS:http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi"

produces a list of subdatasets and any of these can be turned into GDAL_WMS
XML format like this:

 gdal_translate the_subdataset_name out.xml -of WMS

This works great for the regular WMS servers I've tried.

What about TMS servers?  Is there a similar command command for (say)
http://tile.openstreetmap.org  ?

Thanks again for all the help,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130212/2f4313d3/attachment.html>

From even.rouault at mines-paris.org  Tue Feb 12 12:46:42 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 12 Feb 2013 21:46:42 +0100
Subject: [gdal-dev] Constructing GDAL_WMS XML files for TMS servers
In-Reply-To: <CAE=8km=X7Dwu4zdUJAgo_xWm5a7Fh8KzNMVyh7-UHx+rKuozxA@mail.gmail.com>
References: <CAE=8km=X7Dwu4zdUJAgo_xWm5a7Fh8KzNMVyh7-UHx+rKuozxA@mail.gmail.com>
Message-ID: <201302122146.42820.even.rouault@mines-paris.org>

Le mardi 12 f?vrier 2013 20:23:02, Carl Godkin a ?crit :
> Hi again,
> 
> A couple of weeks ago I learned how to use gdalinfo and gdal_translate to
> make the XML service files used by the WMS drivers.
> 
> For instance,
> 
>  gdalinfo "WMS:http://mesonet.agron.iastate.edu/cgi-bin/wms/nexrad/n0r.cgi"
> 
> produces a list of subdatasets and any of these can be turned into GDAL_WMS
> XML format like this:
> 
>  gdal_translate the_subdataset_name out.xml -of WMS
> 
> This works great for the regular WMS servers I've tried.
> 
> What about TMS servers?  Is there a similar command command for (say)
> http://tile.openstreetmap.org  ?

No, TMS servers has not a GetCapabilities request that can be used to self-
discover the properties of the layers. But typically there are just a 
variation of http://gdal.org/frmt_wms_openstreetmap_tms.xml

> 
> Thanks again for all the help,
> 
> carl

From bontepaarden at gmail.com  Wed Feb 13 00:36:04 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed, 13 Feb 2013 09:36:04 +0100
Subject: [gdal-dev] Converting ecw to tif for Geoserver
In-Reply-To: <CA+nxMTs+gs6cHiTm5OVxdm3At3K+v07LonnCzUutTZWpHEQ4Cg@mail.gmail.com>
References: <CAHNf2YSDs-r+Y2eqfL7BXzgnobazhEB73J7kTedJbtr8VfswCA@mail.gmail.com>
	<201302091417.37434.even.rouault@mines-paris.org>
	<CA+nxMTvXPDKn9ap6APrcM3XbZ2o51W9JWEo24jSqUkXEG2tgZw@mail.gmail.com>
	<201302102220.45520.even.rouault@mines-paris.org>
	<CA+nxMTs+gs6cHiTm5OVxdm3At3K+v07LonnCzUutTZWpHEQ4Cg@mail.gmail.com>
Message-ID: <CAHNf2YTQZ7TkCybJnOi9dsxtCc=4eGFL546edYu0fjUhE-NV0A@mail.gmail.com>

I've uploaded my GeoTiff to my GeoServer after I called nearblack -white on
the result of gdaladdo.
This tiff did have some white artefacts, but they are not visually blocking
as you can see here:
http://www.smartdakscan.nl/website/tmp/artifacts.png
http://www.smartdakscan.nl/website/tmp/artifacts-zoom.png

I did use the "input transparent color" in GeoServer and it is working
great.
I can now continue with my task.
When I'm done I'll do some more experimenting with different order of steps
and different compression to get a clean tiff.

Thanks all for your help!




Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*


2013/2/11 Andrea Aime <andrea.aime at geo-solutions.it>

> On Sun, Feb 10, 2013 at 10:20 PM, Even Rouault <
> even.rouault at mines-paris.org> wrote:
>
>> Provided that GeoServer can read VRT through GDAL. But I'm a bit
>> surprised to
>> see that only just a few GDAL formats are listed in
>> http://docs.geoserver.org/stable/en/user/data/raster/gdal.html . Not
>> sure why
>> it is a limited list.
>>
>>
> Ah, this is a complicated and sad story, if you want to hear it, not sure
> where to start.
>
> First thing, the list of formats is a reflection of a design decision back
> then in imageio-ext,
> where in order to expose a format you actually have to write a small
> class. Nothing fancy,
> but one class per format in order to properly extract some metadata from
> the files
> (I believe this a reflection of what the first format supported by
> imageio-ext were).
>
> Then, there is the fact that adding the binding for GDAL geotiff in
> GeoServer makes
> GeoServer stop reading TIFFs at all. We never had time to investigate.
>
>  Moving forward, there is a tremendous pushback against using native
> libraries in the
> java world, which came from different angles.
> When the GDAL wrappers were first introduced part of the GeoTools
> community was
> starkly against having such readers, as it would have violated "java
> pureness" or something
> like that (don't remember exactly the wording, sorry). That eventually
> came to pass as that
> group moved away and founded GeoToolkit.
>
> But it's not only that, installation wise there is typically a lot of
> troubles too.
> First off, having to use a native library against a Java application is
> seen both as a security
> and stability risk, so in some enviroments that is simply a no go (funny
> you're proposing to
> have an external server to handle closed source formats in these days,
> something like that
> would help making usage of GDAL more palatable in such enviroments, it's
> just that
> instead of isolating the proprietary formats we'd have to isolate the
> whole GDAL... and
> the client to those server pool would have to be pure java).
>
> It is not a case that GeoServer is basically the only java OGC server that
> leverages GDAL
> (as far as I remember, at least).
> In other enviroments it's ok to add native libraries to the mix, but you
> have to use the distribution
> own packages, which often lack the JNI support, or miss some formats that
> are desired.
> And again, installing a compiler on those machines is simply a no go, and
> asking to install
> custom made packages (e.g., custom rpm made for CentOS or RedHat) is again
> sometimes a no go.
>
> Finally, importantly, and probably related to the above considerations,
> the reception of GDAL/OGR
> used as libraries has been rather tiepid in the user community, especially
> that part of the user community
> that funds the GeoTools/GeoServer development.
>
> To make you an example, I've tried two times to setup a OGR base data
> store in GeoToools,
> using my spare time, because it sounded like a interesting project, and
> cause it seemed like
> a good gesture of collaboration among OSGeo projects.
> Well, both times the store ended up rotting, personally I don't have a use
> for it, and I'm not aware
> of any significant usage of it within the user community either.
>
> Hope this clarifies things a bit
>
> Cheers
> Andrea
>
> --
> ==
> Our support, Your Success! Visit http://opensdi.geo-solutions.it for more
> information.
> ==
>
> Ing. Andrea Aime
> @geowolf
> Technical Lead
>
> GeoSolutions S.A.S.
> Via Poggio alle Viti 1187
> 55054  Massarosa (LU)
> Italy
> phone: +39 0584 962313
> fax: +39 0584 1660272
> mob: +39  339 8844549
>
> http://www.geo-solutions.it
> http://twitter.com/geosolutions_it
>
> -------------------------------------------------------
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130213/97625e14/attachment.html>

From rob-news at gmx.de  Wed Feb 13 01:59:46 2013
From: rob-news at gmx.de (Robert Kulawik)
Date: Wed, 13 Feb 2013 10:59:46 +0100
Subject: [gdal-dev] Issue with GDAL WCS 1.1.x request
In-Reply-To: <loom.20130208T181538-610@post.gmane.org>
References: <51152B5C.3050507@gmx.de> <loom.20130208T181538-610@post.gmane.org>
Message-ID: <511B6412.7020905@gmx.de>


Thank you Jukka,

has someone from the GDAL guys a solution or idea to get a correct WCS
1.1.x response with GDAL? Nobody use this?

Thanks in advance
Robert

Am 08.02.2013 18:25, schrieb Jukka Rahkonen:
> Robert Kulawik <rob-news <at> gmx.de> writes:
>
>> Hi List,
>>
>> i try to request my Geoserver WCS (GS version 2.2.x, request 1.1.x) with
>> GDAL 1.9.1.
>>
>> Here is the coverage description from Geoserver:
>>
> http://193.175.162.189/geoserver/wcs?request=DescribeCoverage&identifiers=raster_example_20130208_113005_078&VERSION=1.1.0
> http://193.175.162.189/geoserver/wcs?request=DescribeCoverage&identifiers=raster_example_20130208_113005_078&VERSION=1.1.1
>> When i specify the version in the GDAL request, e.g.
>> <WCS_GDAL>
>> <ServiceURL>http://193.175.162.189/geoserver/wcs?</ServiceURL>
>> <CoverageName>raster_example_20130208_113005_078</CoverageName>
>> <Version>1.1.0</Version>
>> </WCS_GDAL>
>>
>> i get the response:
>> C:\OSGeo4W\bin>gdalinfo wcs.xml
>> ERROR 1: java.lang.IllegalArgumentException: The specified dimensional
>> parameter is non-positive.
>> The specified dimensional parameter is non-positive.
>> gdalinfo failed - unable to open 'wcs.xml'.
>>
>> I asked this with a other background in the Geoserver-user list:
>>
> http://osgeo-org.1560.n6.nabble.com/Issue-with-noValue-in-WCS-coverageOfferings-tp5033051.html
>> and it seems, GDAL does not consider the axis swiching in WCS 1.1.x
>> It is possible to specify (or add) the axis order in the GDAL request?
>>
>> Has someone a solution or a idea for this?
>> Thanks in advance
>> Robert
> I tried to investigate this case a bit on the Geoserver user list. The java
> illegal argument error comes from Geoserver and because GDAL is sending BBOX
> coordinates in lat-lon order. 
> This is captured from the GetCoverage request that was sent by gdalinfo
> BOUNDINGBOX=-116.917,32.41666843,-116.75033333,32.5833351,
> urn:ogc:def:crs:EPSG::4326
>
> However, I feel it may be because a bit earlier the same Geoserver has 
> responded to DescribeCoverage request that was sent by GDAL as
> <wcs:GridCRS><wcs:GridBaseCRS>urn:ogc:def:crs:EPSG::4326</wcs:GridBaseCRS>
> <wcs:GridType>urn:ogc:def:method:WCS:1.1:2dGridIn2dCrs</wcs:GridType>
> <wcs:GridOrigin>-116.91699999999997 32.5833351</wcs:GridOrigin>
> <wcs:GridOffsets>0.16666667 0.0 0.0 -0.16666667</wcs:GridOffsets>
> <wcs:GridCS>urn:ogc:def:cs:OGC:0.0:Grid2dSquareCS
> </wcs:GridCS></wcs:GridCRS>
>
> Does gdalinfo build the little GetCoverage request it is sending based on the
> GridOrigin metadata it has queried from WCS server? And is this case the real
> reason for the trouble caused by the wrong GridOrigin and GridOffsets metadata?
>
> -Jukka Rahkonen-
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From jukka.rahkonen at mmmtike.fi  Wed Feb 13 02:27:30 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 13 Feb 2013 10:27:30 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Constructing_GDAL=5FWMS_XML_files_for_TMS_se?=
	=?utf-8?q?rvers?=
References: <CAE=8km=X7Dwu4zdUJAgo_xWm5a7Fh8KzNMVyh7-UHx+rKuozxA@mail.gmail.com>
	<201302122146.42820.even.rouault@mines-paris.org>
Message-ID: <loom.20130213T111426-786@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> 
> No, TMS servers has not a GetCapabilities request that can be used to 
self-
> discover the properties of the layers. But typically there are just a 
> variation of http://gdal.org/frmt_wms_openstreetmap_tms.xml

I do not agree. I can see something like "describe service" and "describe
layer" requests in the TMS document

http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification#TileMapService_Resource

I also checked that at least GeoWebCache does support those requests.
http://localhost:8080/geowebcache/service/tms/1.0.0 is listing all the 
cached layers with hfer links which are giving detailed info about 
tilesets. Here is what one of those links sends for me

<TileMap version="1.0.0" 
tilemapservice="http://localhost:8080/geowebcache/service/tms/1.0.0">
<Title>GWC_basemap</Title>
<Abstract/>
<SRS>EPSG:3067</SRS>
<BoundingBox minx="-548576.0" miny="6291456.0" 
maxx="1548576.0" maxy="8388608.0"/>
<Origin x="-548576.0" y="6291456.0"/>
<TileFormat width="256" height="256" mime-type="image/png"
extension="png"/><TileSets profile="local">
<TileSet
href="http://localhost:8080/geowebcache/service/tms/1.0.0
/GWC_basemap at JHS180%3AEPSG%3A3067 at png/0"
units-per-pixel="8192.0" order="0"/><TileSet
href="http://localhost:8080/geowebcache/service/tms/1.0.0
/GWC_basemap at JHS180%3AEPSG%3A3067 at png/1"
units-per-pixel="4096.0" order="1"/>

...
continues with sections for each configured zoom level.

-Jukka Rahkonen-




From p.baumann at jacobs-university.de  Wed Feb 13 03:43:19 2013
From: p.baumann at jacobs-university.de (Peter Baumann)
Date: Wed, 13 Feb 2013 12:43:19 +0100
Subject: [gdal-dev] Issue with GDAL WCS 1.1.x request
In-Reply-To: <511B6412.7020905@gmx.de>
References: <51152B5C.3050507@gmx.de> <loom.20130208T181538-610@post.gmane.org>
	<511B6412.7020905@gmx.de>
Message-ID: <511B7C57.3090502@jacobs-university.de>

Hi Robert, Jukka,

FWIW, WCS 1.x is deprecated and superseded by WCS 2.0 (for which GeoServer 
recently has added support, too, following MapServer and others).

-Peter


On 02/13/2013 10:59 AM, Robert Kulawik wrote:
> Thank you Jukka,
>
> has someone from the GDAL guys a solution or idea to get a correct WCS
> 1.1.x response with GDAL? Nobody use this?
>
> Thanks in advance
> Robert
>
> Am 08.02.2013 18:25, schrieb Jukka Rahkonen:
>> Robert Kulawik <rob-news <at> gmx.de> writes:
>>
>>> Hi List,
>>>
>>> i try to request my Geoserver WCS (GS version 2.2.x, request 1.1.x) with
>>> GDAL 1.9.1.
>>>
>>> Here is the coverage description from Geoserver:
>>>
>> http://193.175.162.189/geoserver/wcs?request=DescribeCoverage&identifiers=raster_example_20130208_113005_078&VERSION=1.1.0
>> http://193.175.162.189/geoserver/wcs?request=DescribeCoverage&identifiers=raster_example_20130208_113005_078&VERSION=1.1.1
>>> When i specify the version in the GDAL request, e.g.
>>> <WCS_GDAL>
>>> <ServiceURL>http://193.175.162.189/geoserver/wcs?</ServiceURL>
>>> <CoverageName>raster_example_20130208_113005_078</CoverageName>
>>> <Version>1.1.0</Version>
>>> </WCS_GDAL>
>>>
>>> i get the response:
>>> C:\OSGeo4W\bin>gdalinfo wcs.xml
>>> ERROR 1: java.lang.IllegalArgumentException: The specified dimensional
>>> parameter is non-positive.
>>> The specified dimensional parameter is non-positive.
>>> gdalinfo failed - unable to open 'wcs.xml'.
>>>
>>> I asked this with a other background in the Geoserver-user list:
>>>
>> http://osgeo-org.1560.n6.nabble.com/Issue-with-noValue-in-WCS-coverageOfferings-tp5033051.html
>>> and it seems, GDAL does not consider the axis swiching in WCS 1.1.x
>>> It is possible to specify (or add) the axis order in the GDAL request?
>>>
>>> Has someone a solution or a idea for this?
>>> Thanks in advance
>>> Robert
>> I tried to investigate this case a bit on the Geoserver user list. The java
>> illegal argument error comes from Geoserver and because GDAL is sending BBOX
>> coordinates in lat-lon order.
>> This is captured from the GetCoverage request that was sent by gdalinfo
>> BOUNDINGBOX=-116.917,32.41666843,-116.75033333,32.5833351,
>> urn:ogc:def:crs:EPSG::4326
>>
>> However, I feel it may be because a bit earlier the same Geoserver has
>> responded to DescribeCoverage request that was sent by GDAL as
>> <wcs:GridCRS><wcs:GridBaseCRS>urn:ogc:def:crs:EPSG::4326</wcs:GridBaseCRS>
>> <wcs:GridType>urn:ogc:def:method:WCS:1.1:2dGridIn2dCrs</wcs:GridType>
>> <wcs:GridOrigin>-116.91699999999997 32.5833351</wcs:GridOrigin>
>> <wcs:GridOffsets>0.16666667 0.0 0.0 -0.16666667</wcs:GridOffsets>
>> <wcs:GridCS>urn:ogc:def:cs:OGC:0.0:Grid2dSquareCS
>> </wcs:GridCS></wcs:GridCRS>
>>
>> Does gdalinfo build the little GetCoverage request it is sending based on the
>> GridOrigin metadata it has queried from WCS server? And is this case the real
>> reason for the trouble caused by the wrong GridOrigin and GridOffsets metadata?
>>
>> -Jukka Rahkonen-
>>
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Dr. Peter Baumann
  - Professor of Computer Science, Jacobs University Bremen
    www.faculty.jacobs-university.de/pbaumann
    mail: p.baumann at jacobs-university.de
    tel: +49-421-200-3178, fax: +49-421-200-493178
  - Executive Director, rasdaman GmbH Bremen (HRB 26793)
    www.rasdaman.com, mail: baumann at rasdaman.com
    tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
"Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 1083)



From bernd.kamjunke at csogis.de  Wed Feb 13 05:36:20 2013
From: bernd.kamjunke at csogis.de (Bernd Kamjunke)
Date: Wed, 13 Feb 2013 14:36:20 +0100
Subject: [gdal-dev] compile gdal with xml support
Message-ID: <8421E7B1F8DB7B40B247EE725362B56876DF7E8387@CSOSBS.cso.local>

Hello 2 all!

I am forced to compile the newest gdaldev version by myself with expat and xerces support.
I did the necessary changes in nmake.opt like described on
http://trac.osgeo.org/gdal/wiki/BuildingOnWindows Basic and Advanced Options.
First I got some LNK1104 Errors due to bad file paths to expat and xerces but
now the makegdal10 solution compiles well.
I am not sure about the WIN64 Option I activated. I changed the compile options
in VS to 64Bit too but is there some more to do???

My errors trying to use ogr2ogr like that:
FOR %%i IN ("%NAS_SOURCE_PFAD%%NAS_SOURCE_ORDNER%\*.xml") DO (%ogr2% --debug ON -f "SQLite" -gt 1024 -append -skipfailures %NAS_DESTINATION%  -a_srs EPSG:25832 %%i delete)
are like this:
ERROR 1: Unable to create Xerces C++ or Expat based GML reader, Xerces or Expat support
not configured into GDAL/OGR.
ERROR 1: File C:\ALKIS\xyz.xml appears to be GML but the GML reader can't
be instantiated, likely because Xerces or Expat support wasn't configured in.

I tried a lot more, like compiling expad and xerces myself which worked to
but finally I get the same error using ogr2ogr.

What more to check??? Thanks for any kind of help!

My working System is
Win 7, 64 Bit, VS 2010

PS Why I need the latest version of gdal:
In 1.9.2 the handling of German ALKIS-Data (NAS-Interface, xml files) has a
bug which was already fixed by Frank Jaeger.
Bernd Kamjunke
_________________________________________________________________
CSO GmbH
Informations-L?sungen
Forsthausstrasse 2
75180 Pforzheim
Fon     +49 (0) 72 31 . 97 35 63 (direkt)
Fon     +49 (0) 72 31 . 97 35 10 (Zentrale)
Fax      +49 (0) 72 31 . 97 35 90
eMail  Bernd.Kamjunke at csogis.de<mailto:Bernd.Kamjunke at csogis.de>
web    www.csogis.de<BLOCKED::www.csogis.de>
_________________________________________________________________

Gesch?ftsf?hrer  J?rg Schempf, Dipl.-Ing. (FH)
Amtsgericht Mannheim . HRB 503836
UST-ID  DE 144 17 16 31
_________________________________________________________________

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130213/917bc9ed/attachment.html>

From ivan.lucena at princeton-ma.us  Wed Feb 13 08:27:25 2013
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed, 13 Feb 2013 11:27:25 -0500
Subject: [gdal-dev] =?iso-8859-1?q?Reworking_the_rasdaman_driver?=
In-Reply-To: <201302121832.16158.even.rouault@mines-paris.org>
References: <511A77B6.8060602@eox.at>
	<201302121832.16158.even.rouault@mines-paris.org>
Message-ID: <20130213162725.7964.qmail@s466.sureserver.com>


>  -------Original Message-------
>  From: Even Rouault <even.rouault at mines-paris.org>
>  To: gdal-dev at lists.osgeo.org
>  Subject: Re: [gdal-dev] Reworking the rasdaman driver
>  Sent: Feb 12 '13 12:32
>  
>  Le mardi 12 f?vrier 2013 18:11:18, Fabian Schindler a ?crit :
>  > Dear devs,
>  >
>  > I've been tasked to improve or rewrite the current rasdaman driver
>  > implementation as it currently suffers a number of drawbacks:
>  >
>  >?? * it is quite slow (compared to other drivers and other rasdaman
>  >???? connection techiques)
>  >?? * it does not support creation of new rasters within the database
>  >?? * it does not support write access to existing rasters within the
>  > database
>  >
>  > I think the bad performance of the current implementation is due to the
>  > use of the `IReadBlock` function of the `RasdamanRasterBand`, as for
>  > every block that is read, a connection/transaction to the database is
>  > created and the block is transmitted.
>  
>  Fabian,
>  
>  That's certainly a reason that can account for the slowness.
>  

I agree with that. The other thing is that, as far I know, rasdaman is database-agnostic, so without much knowledge about any specific database system, the driver will probably be limited to issue one statement per block what is probably another source of slowness.

>  > My assumption here is that reading
>  > the raster as a whole (or parts thereof) via `IRasterIO` (probably on
>  > the Dataset itself and not on the RasterBand)
>  
>  FYI, last time I checked, QGIS only uses RasterIO on the band object.
>  
>  Lately, I've implemented a heuristics ( see
>  http://trac.osgeo.org/gdal/changeset/25595 ) in the ECW driver that detect
>  successive calls to ECWRasterBand::IRasterIO() with the same parameters but on
>  bands 1, 2, ... N, and when this pattern is detected, it uses internally a
>  dataset RasterIO() and cache the multiband buffer to server it to the

That is cool.

>  individual band when they request it. But this is something very advanced that
>  you probably don't need to look at in a first step. It is anyway only beneficial
>  if rasdaman multiband rasters are pixel interleaved. If there are band
>  interleaved, such trick is totally useless (and probably slightly counter
>  productive)
>  
>  > would improve the
>  > performance as the number of required connections and synchronization is
>  > reduced.
>  > As far as I can tell, that is the approach with the PostGISRaster driver.
>  >
>  > What are your opinions to that matter? What benefits would I miss if I
>  > neglect block-based IO?
>  
>  If you implement an efficient IRasterIO(), you *must* still implement
>  IReadBlock() however (pure virtual method of GDALRasterBand). Or redirect it
>  onto your IRasterIO() implementation, but that can be dangerous if your
>  IRasterIO() implementation sometimes fallback on the generic one, that in turn
>  will call IReadBlock().
>  
>  Best regards,
>  
>  Even
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev at lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev

From fabian.schindler at eox.at  Wed Feb 13 09:01:55 2013
From: fabian.schindler at eox.at (Fabian Schindler)
Date: Wed, 13 Feb 2013 18:01:55 +0100
Subject: [gdal-dev] GeoTIFF with LZW compression Overviews error
Message-ID: <511BC703.40001@eox.at>

Dear devs,

I'm experiencing strange errors when I try to add overviews to specific 
GeoTIFF files with internal tiling and LZW compression. This error shows 
only on some (about 3-5%) of the input files.

This is how I process the file:

$gdal_translate -gcp 0 0 19.09 49.22 -gcp 100 0 20.1 49.11 -gcp 100 401 19.27 45.89 -gcp 100 802 18.42 42.34 -gcp 100 1203 17.6 38.79 -gcp 100 1605 17.41 37.96 -gcp 0 1605 16.58 38.07 -gcp 0 1203 16.76 38.91 -gcp 0 802 17.53 42.45 -gcp 0 401 18.33 46.0 -of GTIFF -a_srs EPSG:4326 -co compress=LZW -co tiled=YES x.jpg x.tif

$gdalwarp -t_srs EPSG:4326 -co tiled=YES -co compress=LZW x.tif y.tif

$gdaladdo c.tif 2 4 8 16 32

0...10...20...30...40...50...60...70...80...90...Warning 1: c.tif:LZWDecode: Strip -1 not terminated with EOI code

ERROR 1: c.tif:LZWDecode: Not enough data at scanline 0 (short 46008 bytes)

ERROR 1: TIFFReadEncodedTile() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 2

ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 2

100 - done.

Any ideas/help on that?

Thanks in advance,
Fabian


FYI: I'm on a CentOS box with GDAL 1.9.1, released 2012/05/15, and 
libgeotiff 1.4.0-1.el6, and libtiff 3.9.4-6.el6_3.

A gdalinfo of the file shows:

Driver: GTiff/GeoTIFF

Files: x.tif

Size is 1497, 4965

Coordinate System is:

GEOGCS["WGS 84",

     DATUM["WGS_1984",

         SPHEROID["WGS 84",6378137,298.257223563,

             AUTHORITY["EPSG","7030"]],

         AUTHORITY["EPSG","6326"]],

     PRIMEM["Greenwich",0],

     UNIT["degree",0.0174532925199433],

     AUTHORITY["EPSG","4326"]]

Origin = (9.291424276853256,49.550154279390341)

Pixel Size = (0.007350754725447,-0.007350754725447)

Metadata:

   AREA_OR_POINT=Area

Image Structure Metadata:

   COMPRESSION=LZW

   INTERLEAVE=PIXEL

Corner Coordinates:

Upper Left  (   9.2914243,  49.5501543) (  9d17'29.13"E, 49d33' 0.56"N)

Lower Left  (   9.2914243,  13.0536571) (  9d17'29.13"E, 13d 3'13.17"N)

Upper Right (  20.2955041,  49.5501543) ( 20d17'43.81"E, 49d33' 0.56"N)

Lower Right (  20.2955041,  13.0536571) ( 20d17'43.81"E, 13d 3'13.17"N)

Center      (  14.7934642,  31.3019057) ( 14d47'36.47"E, 31d18' 6.86"N)

Band 1 Block=256x256 Type=Byte, ColorInterp=Red

   Overviews: 749x2483, 375x1242, 188x621, 94x311, 47x156

Band 2 Block=256x256 Type=Byte, ColorInterp=Green

   Overviews: 749x2483, 375x1242, 188x621, 94x311, 47x156

Band 3 Block=256x256 Type=Byte, ColorInterp=Blue

   Overviews: 749x2483, 375x1242, 188x621, 94x311, 47x156




From warmerdam at pobox.com  Wed Feb 13 10:32:50 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 13 Feb 2013 10:32:50 -0800
Subject: [gdal-dev] GeoTIFF with LZW compression Overviews error
In-Reply-To: <511BC703.40001@eox.at>
References: <511BC703.40001@eox.at>
Message-ID: <CA+YzLBdW7tTEJgKWe0SUiaYCQOtMezBSEUeTndMnGy2JO47N_A@mail.gmail.com>

Fabian,

I'm assuming you mean gdaladdo is run on y.tif, the output of gdalwarp, right?

I tried the steps with a manufactured input file of the same size and
did not encounter the problem on my system.  The most likely important
difference is that I am not using libtiff 3.9.4 - I'm using libtiff
4.0.x (trunk).  Is there a reason you are using the old style libtiff?
 Perhaps just because it is what is packaged?  I imagine that is the
problem.

Best regards,
Frank



On Wed, Feb 13, 2013 at 9:01 AM, Fabian Schindler
<fabian.schindler at eox.at> wrote:
> Dear devs,
>
> I'm experiencing strange errors when I try to add overviews to specific
> GeoTIFF files with internal tiling and LZW compression. This error shows
> only on some (about 3-5%) of the input files.
>
> This is how I process the file:
>
> $gdal_translate -gcp 0 0 19.09 49.22 -gcp 100 0 20.1 49.11 -gcp 100 401
> 19.27 45.89 -gcp 100 802 18.42 42.34 -gcp 100 1203 17.6 38.79 -gcp 100 1605
> 17.41 37.96 -gcp 0 1605 16.58 38.07 -gcp 0 1203 16.76 38.91 -gcp 0 802 17.53
> 42.45 -gcp 0 401 18.33 46.0 -of GTIFF -a_srs EPSG:4326 -co compress=LZW -co
> tiled=YES x.jpg x.tif
>
> $gdalwarp -t_srs EPSG:4326 -co tiled=YES -co compress=LZW x.tif y.tif
>
> $gdaladdo c.tif 2 4 8 16 32
>
> 0...10...20...30...40...50...60...70...80...90...Warning 1: c.tif:LZWDecode:
> Strip -1 not terminated with EOI code
>
> ERROR 1: c.tif:LZWDecode: Not enough data at scanline 0 (short 46008 bytes)
>
> ERROR 1: TIFFReadEncodedTile() failed.
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 2
>
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 2
>
> 100 - done.
>
> Any ideas/help on that?
>
> Thanks in advance,
> Fabian
>
>
> FYI: I'm on a CentOS box with GDAL 1.9.1, released 2012/05/15, and
> libgeotiff 1.4.0-1.el6, and libtiff 3.9.4-6.el6_3.
>
> A gdalinfo of the file shows:
>
> Driver: GTiff/GeoTIFF
>
> Files: x.tif
>
> Size is 1497, 4965
>
> Coordinate System is:
>
> GEOGCS["WGS 84",
>
>     DATUM["WGS_1984",
>
>         SPHEROID["WGS 84",6378137,298.257223563,
>
>             AUTHORITY["EPSG","7030"]],
>
>         AUTHORITY["EPSG","6326"]],
>
>     PRIMEM["Greenwich",0],
>
>     UNIT["degree",0.0174532925199433],
>
>     AUTHORITY["EPSG","4326"]]
>
> Origin = (9.291424276853256,49.550154279390341)
>
> Pixel Size = (0.007350754725447,-0.007350754725447)
>
> Metadata:
>
>   AREA_OR_POINT=Area
>
> Image Structure Metadata:
>
>   COMPRESSION=LZW
>
>   INTERLEAVE=PIXEL
>
> Corner Coordinates:
>
> Upper Left  (   9.2914243,  49.5501543) (  9d17'29.13"E, 49d33' 0.56"N)
>
> Lower Left  (   9.2914243,  13.0536571) (  9d17'29.13"E, 13d 3'13.17"N)
>
> Upper Right (  20.2955041,  49.5501543) ( 20d17'43.81"E, 49d33' 0.56"N)
>
> Lower Right (  20.2955041,  13.0536571) ( 20d17'43.81"E, 13d 3'13.17"N)
>
> Center      (  14.7934642,  31.3019057) ( 14d47'36.47"E, 31d18' 6.86"N)
>
> Band 1 Block=256x256 Type=Byte, ColorInterp=Red
>
>   Overviews: 749x2483, 375x1242, 188x621, 94x311, 47x156
>
> Band 2 Block=256x256 Type=Byte, ColorInterp=Green
>
>   Overviews: 749x2483, 375x1242, 188x621, 94x311, 47x156
>
> Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
>
>   Overviews: 749x2483, 375x1242, 188x621, 94x311, 47x156
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From navin.pro at gmail.com  Wed Feb 13 19:15:19 2013
From: navin.pro at gmail.com (nav)
Date: Wed, 13 Feb 2013 19:15:19 -0800 (PST)
Subject: [gdal-dev] Most optimal algorithm for contour correctness?
Message-ID: <1360811719382-5034148.post@n6.nabble.com>

Am creating an app which correctly calculates contours from a DEM file or any
height-map given to it. The correctness of the contour holding the most
importance, since a person viewing the contours shouldn't end up taking
wrong planning decisions and maybe losing their life by the route they
choose after looking at the map.

I have already tried using GDAL 1.7 source code, compiled it and added some
features of my own to it for some other objective. Now I want to
add-to/modify the source to be able to use the contour generation function
of GDAL in C++.

But before proceeding, I wanted to know:
1. If GDAL offers the best free contour generation algorithm available or is
there any other library which I can link to my code and feed my DEM map to
it and receive contour vector lines (or go thru research papers and
implement the contour generation algorithm myself in C++)? If GDAL, then why
is it the best?
2. A generated contour will basically be points connected with straight
lines. Is it more correct for a contour to be depicted with connected
straight lines or will it give a more correct result to use a spline to
smoothen out the lines?

I won't be interpolating any contours or the DEM because I've read on this
website that interpolation leads to incorrect results. 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Most-optimal-algorithm-for-contour-correctness-tp5034148.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From navin.pro at gmail.com  Wed Feb 13 19:16:49 2013
From: navin.pro at gmail.com (nav)
Date: Wed, 13 Feb 2013 19:16:49 -0800 (PST)
Subject: [gdal-dev] Most optimal algorithm for contour correctness?
In-Reply-To: <1360811719382-5034148.post@n6.nabble.com>
References: <1360811719382-5034148.post@n6.nabble.com>
Message-ID: <1360811809156-5034149.post@n6.nabble.com>

May I know why I'm shown a message that "this post has not been accepted by
the mailing list yet" even though I received an email saying that I'm
already subscribed to the mailing list?



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Most-optimal-algorithm-for-contour-correctness-tp5034148p5034149.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From fabian.schindler at eox.at  Thu Feb 14 01:00:03 2013
From: fabian.schindler at eox.at (Fabian Schindler)
Date: Thu, 14 Feb 2013 10:00:03 +0100
Subject: [gdal-dev] GeoTIFF with LZW compression Overviews error
In-Reply-To: <CA+YzLBdW7tTEJgKWe0SUiaYCQOtMezBSEUeTndMnGy2JO47N_A@mail.gmail.com>
References: <511BC703.40001@eox.at>
	<CA+YzLBdW7tTEJgKWe0SUiaYCQOtMezBSEUeTndMnGy2JO47N_A@mail.gmail.com>
Message-ID: <511CA793.8010505@eox.at>

Frank,

> I'm assuming you mean gdaladdo is run on y.tif, the output of gdalwarp, right?
Yes, sorry, that's what I meant.
> I tried the steps with a manufactured input file of the same size and
> did not encounter the problem on my system.  The most likely important
> difference is that I am not using libtiff 3.9.4 - I'm using libtiff
> 4.0.x (trunk).  Is there a reason you are using the old style libtiff?
>   Perhaps just because it is what is packaged?  I imagine that is the
> problem.
Yes I'm using the packaged version of libtiff. I guess I'll have to try 
the 4.0.x version and report my experiences.

Thanks!
Fabian

From jp.alcantara at geographica.gs  Thu Feb 14 04:10:42 2013
From: jp.alcantara at geographica.gs (=?ISO-8859-1?Q?Juan_Pedro_P=E9rez_Alc=E1ntara?=)
Date: Thu, 14 Feb 2013 13:10:42 +0100
Subject: [gdal-dev] DODS building
Message-ID: <CACFPusjpS5CSB3z7JS5CdXpN8sT=Wn-fRw6uMtnNT+gCubFypQ@mail.gmail.com>

Hello,

this must be easy or altogether resolved but I can't find a solution. Hope
you can help me.

I have been trying to build GDAL 1.9.0 and 1.9.2 with OpenDAP / DODS
support. I have built libdap 3.11.7 without any problems, and my OpenDAP
server is working, as far as I know, flawlessly. But when I try to build
GDAL, make complaints about not finding AISConnect.h, which is not present
in the system nor in the source tarball of libdap. I hear that the DAP++
SDK team has dropped this family of classes, and that they recommend to
link to new ones, it seems that with the same interface.

Anyone has had this issue? Is currently possible to build GDAL with OpenDAP
support? Which versions of GDAL and libdap are needed?

Thanks a lot in advance,

Juan Pedro P?rez Alc?ntara
Technical Director
jp.alcantara at geographica.gs
+34 670 786 422

Rodio 35
41007 Sevilla
Spain
<http://maps.google.es/maps?f=q&source=s_q&hl=es&geocode=&q=rodio+35,+sevilla+espa%C3%B1a&sll=40.396764,-3.713379&sspn=10.787528,19.753418&ie=UTF8&hq=&hnear=Calle+Rodio,+35,+41007+Sevilla,+Andaluc%C3%ADa&t=h&z=16>
T  +34  954 437 818
F  +34  955 110 441
Visita nuestra web
*www.geographica.gs*
<http://www.geographica.gs/>
S?guenos en Twitter
*@Geographica_ST*
<https://twitter.com/#%21/Geographica_GS>
[image: Twitter] <https://twitter.com/#%21/Geographica_ST>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130214/840bc400/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: icon_twitter.png
Type: image/png
Size: 1196 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130214/840bc400/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: maps.png
Type: image/png
Size: 398 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130214/840bc400/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: logo.png
Type: image/png
Size: 2424 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130214/840bc400/attachment-0002.png>

From even.rouault at mines-paris.org  Thu Feb 14 13:04:41 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 14 Feb 2013 22:04:41 +0100
Subject: [gdal-dev] Constructing GDAL_WMS XML files for TMS servers
In-Reply-To: <loom.20130213T111426-786@post.gmane.org>
References: <CAE=8km=X7Dwu4zdUJAgo_xWm5a7Fh8KzNMVyh7-UHx+rKuozxA@mail.gmail.com>
	<201302122146.42820.even.rouault@mines-paris.org>
	<loom.20130213T111426-786@post.gmane.org>
Message-ID: <201302142204.41243.even.rouault@mines-paris.org>

Le mercredi 13 f?vrier 2013 11:27:30, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> mines-paris.org> writes:
> > No, TMS servers has not a GetCapabilities request that can be used to
> 
> self-
> 
> > discover the properties of the layers. But typically there are just a
> > variation of http://gdal.org/frmt_wms_openstreetmap_tms.xml
> 
> I do not agree. I can see something like "describe service" and "describe
> layer" requests in the TMS document

Ahem it's embarassing actually I couldn't remember it existed, since now I 
realize I happened to implement it in GDAL !

$ gdalinfo http://demo.opengeo.org/geoserver/gwc/service/tms/1.0.0
Driver: WMS/OGC Web Map Service
Files: none associated
Size is 512, 512
Coordinate System is `'
Subdatasets:
  SUBDATASET_1_NAME=http://demo.opengeo.org/geoserver/gwc/service/tms/1.0.0/topp%3Atasmania_state_boundaries at EPSG%3A4326 at png
  SUBDATASET_1_DESC=Tasmania state boundaries
[...]

$ gdalinfo 
"http://demo.opengeo.org/geoserver/gwc/service/tms/1.0.0/topp%3Atasmania_state_boundaries at EPSG%3A4326 at png"
Driver: WMS/OGC Web Map Service
Files: none associated
Size is 67108864, 67108864
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"]]
Origin = (135.000000000000000,-22.500000000000000)
Pixel Size = (0.000000335276127,-0.000000335276127)
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  ( 135.0000000, -22.5000000) (135d 0' 0.00"E, 22d30' 0.00"S)
Lower Left  ( 135.0000000, -45.0000000) (135d 0' 0.00"E, 45d 0' 0.00"S)
Upper Right ( 157.5000000, -22.5000000) (157d30' 0.00"E, 22d30' 0.00"S)
Lower Right ( 157.5000000, -45.0000000) (157d30' 0.00"E, 45d 0' 0.00"S)
Center      ( 146.2500000, -33.7500000) (146d15' 0.00"E, 33d45' 0.00"S)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Overviews: 33554432x33554432, 16777216x16777216, 8388608x8388608, 
4194304x4194304, 2097152x2097152, 1048576x1048576, 524288x524288, 
262144x262144, 131072x131072, 65536x65536, 32768x32768, 16384x16384, 
8192x8192, 4096x4096, 2048x2048, 1024x1024, 512x512, 256x256, 128x128, 64x64, 
32x32
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  Overviews: 33554432x33554432, 16777216x16777216, 8388608x8388608, 
4194304x4194304, 2097152x2097152, 1048576x1048576, 524288x524288, 
262144x262144, 131072x131072, 65536x65536, 32768x32768, 16384x16384, 
8192x8192, 4096x4096, 2048x2048, 1024x1024, 512x512, 256x256, 128x128, 64x64, 
32x32
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  Overviews: 33554432x33554432, 16777216x16777216, 8388608x8388608, 
4194304x4194304, 2097152x2097152, 1048576x1048576, 524288x524288, 
262144x262144, 131072x131072, 65536x65536, 32768x32768, 16384x16384, 
8192x8192, 4096x4096, 2048x2048, 1024x1024, 512x512, 256x256, 128x128, 64x64, 
32x32


From cgodkin at gmail.com  Thu Feb 14 13:49:49 2013
From: cgodkin at gmail.com (Carl Godkin)
Date: Thu, 14 Feb 2013 13:49:49 -0800
Subject: [gdal-dev] Constructing GDAL_WMS XML files for TMS servers
In-Reply-To: <201302142204.41243.even.rouault@mines-paris.org>
References: <CAE=8km=X7Dwu4zdUJAgo_xWm5a7Fh8KzNMVyh7-UHx+rKuozxA@mail.gmail.com>
	<201302122146.42820.even.rouault@mines-paris.org>
	<loom.20130213T111426-786@post.gmane.org>
	<201302142204.41243.even.rouault@mines-paris.org>
Message-ID: <CAE=8kmnmbCv+y_pgeEZVsp_-iY78AaH9UKGuVO50Pi8PsWR4zg@mail.gmail.com>

Hi,

Thank you very much for the tips.

carl


On Thu, Feb 14, 2013 at 1:04 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mercredi 13 f?vrier 2013 11:27:30, Jukka Rahkonen a ?crit :
> > Even Rouault <even.rouault <at> mines-paris.org> writes:
> > > No, TMS servers has not a GetCapabilities request that can be used to
> >
> > self-
> >
> > > discover the properties of the layers. But typically there are just a
> > > variation of http://gdal.org/frmt_wms_openstreetmap_tms.xml
> >
> > I do not agree. I can see something like "describe service" and "describe
> > layer" requests in the TMS document
>
> Ahem it's embarassing actually I couldn't remember it existed, since now I
> realize I happened to implement it in GDAL !
>
> $ gdalinfo http://demo.opengeo.org/geoserver/gwc/service/tms/1.0.0
> Driver: WMS/OGC Web Map Service
> Files: none associated
> Size is 512, 512
> Coordinate System is `'
> Subdatasets:
>   SUBDATASET_1_NAME=
> http://demo.opengeo.org/geoserver/gwc/service/tms/1.0.0/topp%3Atasmania_state_boundaries at EPSG%3A4326 at png
>   SUBDATASET_1_DESC=Tasmania state boundaries
> [...]
>
> $ gdalinfo
> "
> http://demo.opengeo.org/geoserver/gwc/service/tms/1.0.0/topp%3Atasmania_state_boundaries at EPSG%3A4326 at png
> "
> Driver: WMS/OGC Web Map Service
> Files: none associated
> Size is 67108864, 67108864
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9122"]],
>     AUTHORITY["EPSG","4326"]]
> Origin = (135.000000000000000,-22.500000000000000)
> Pixel Size = (0.000000335276127,-0.000000335276127)
> Image Structure Metadata:
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  ( 135.0000000, -22.5000000) (135d 0' 0.00"E, 22d30' 0.00"S)
> Lower Left  ( 135.0000000, -45.0000000) (135d 0' 0.00"E, 45d 0' 0.00"S)
> Upper Right ( 157.5000000, -22.5000000) (157d30' 0.00"E, 22d30' 0.00"S)
> Lower Right ( 157.5000000, -45.0000000) (157d30' 0.00"E, 45d 0' 0.00"S)
> Center      ( 146.2500000, -33.7500000) (146d15' 0.00"E, 33d45' 0.00"S)
> Band 1 Block=256x256 Type=Byte, ColorInterp=Red
>   Overviews: 33554432x33554432, 16777216x16777216, 8388608x8388608,
> 4194304x4194304, 2097152x2097152, 1048576x1048576, 524288x524288,
> 262144x262144, 131072x131072, 65536x65536, 32768x32768, 16384x16384,
> 8192x8192, 4096x4096, 2048x2048, 1024x1024, 512x512, 256x256, 128x128,
> 64x64,
> 32x32
> Band 2 Block=256x256 Type=Byte, ColorInterp=Green
>   Overviews: 33554432x33554432, 16777216x16777216, 8388608x8388608,
> 4194304x4194304, 2097152x2097152, 1048576x1048576, 524288x524288,
> 262144x262144, 131072x131072, 65536x65536, 32768x32768, 16384x16384,
> 8192x8192, 4096x4096, 2048x2048, 1024x1024, 512x512, 256x256, 128x128,
> 64x64,
> 32x32
> Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
>   Overviews: 33554432x33554432, 16777216x16777216, 8388608x8388608,
> 4194304x4194304, 2097152x2097152, 1048576x1048576, 524288x524288,
> 262144x262144, 131072x131072, 65536x65536, 32768x32768, 16384x16384,
> 8192x8192, 4096x4096, 2048x2048, 1024x1024, 512x512, 256x256, 128x128,
> 64x64,
> 32x32
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130214/b6c27c00/attachment.html>

From robert at urban4m.com  Thu Feb 14 20:05:54 2013
From: robert at urban4m.com (Robert Nix)
Date: Thu, 14 Feb 2013 23:05:54 -0500
Subject: [gdal-dev] Darwin patches for building on Mac OS X
Message-ID: <00E0DE81-F4FE-4490-BBE5-67DEA90FAC8D@urban4m.com>

If anyone is interested, I created a few patches for GDAL's configure and java.opt files to allow for a successful build --with-java on Mac OS X
https://gist.github.com/rnix/4958168
--nix

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130214/c0595eaf/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1437 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130214/c0595eaf/attachment.bin>

From anton.korosov at nersc.no  Fri Feb 15 01:35:10 2013
From: anton.korosov at nersc.no (Anton Korosov)
Date: Fri, 15 Feb 2013 10:35:10 +0100
Subject: [gdal-dev] DODS building
In-Reply-To: <CACFPusjpS5CSB3z7JS5CdXpN8sT=Wn-fRw6uMtnNT+gCubFypQ@mail.gmail.com>
References: <CACFPusjpS5CSB3z7JS5CdXpN8sT=Wn-fRw6uMtnNT+gCubFypQ@mail.gmail.com>
Message-ID: <511E014E.6030602@nersc.no>

Hello Juan Pedro P?rez!

I've built GDAL 1.9.2 on Ubuntu with the default libdap from repositories:
sudo apt-get install libdap11
sudo apt-get install libdap-dev

ldconfig -p | grep libdap
gives the following:

     libdapserver.so.7 (libc6) => /usr/lib/i386-linux-gnu/libdapserver.so.7
     libdapserver.so (libc6) => /usr/lib/i386-linux-gnu/libdapserver.so
     libdapclient.so.3 (libc6) => /usr/lib/i386-linux-gnu/libdapclient.so.3
     libdapclient.so (libc6) => /usr/lib/i386-linux-gnu/libdapclient.so
     libdap.so.11 (libc6) => /usr/lib/i386-linux-gnu/libdap.so.11
     libdap.so (libc6) => /usr/lib/i386-linux-gnu/libdap.so

Then I've added option --with-dods-root=/usr for the ./configure script.


I was able to use gdal for accessing remote datasets, but the current 
DODS driver is not perfect. See

http://trac.osgeo.org/gdal/ticket/4890

Regards!
Anton

On 02/14/2013 01:10 PM, Juan Pedro P?rez Alc?ntara wrote:
> Hello,
>
> this must be easy or altogether resolved but I can't find a solution. 
> Hope you can help me.
>
> I have been trying to build GDAL 1.9.0 and 1.9.2 with OpenDAP / DODS 
> support. I have built libdap 3.11.7 without any problems, and my 
> OpenDAP server is working, as far as I know, flawlessly. But when I 
> try to build GDAL, make complaints about not finding AISConnect.h, 
> which is not present in the system nor in the source tarball of 
> libdap. I hear that the DAP++ SDK team has dropped this family of 
> classes, and that they recommend to link to new ones, it seems that 
> with the same interface.
>
> Anyone has had this issue? Is currently possible to build GDAL with 
> OpenDAP support? Which versions of GDAL and libdap are needed?
>
> Thanks a lot in advance,
>
> Juan Pedro P?rez Alc?ntara
> Technical Director
> jp.alcantara at geographica.gs <mailto:jp.alcantara at geographica.gs>
> +34 670 786 422 <tel:%2B34%20670%20786%20422>
>
> Rodio 35
> 41007 Sevilla
> Spain
> <http://maps.google.es/maps?f=q&source=s_q&hl=es&geocode=&q=rodio+35,+sevilla+espa%C3%B1a&sll=40.396764,-3.713379&sspn=10.787528,19.753418&ie=UTF8&hq=&hnear=Calle+Rodio,+35,+41007+Sevilla,+Andaluc%C3%ADa&t=h&z=16> 
>
> T +34  954 437 818
> F +34  955 110 441
> Visita nuestra web
> *www.geographica.gs*
> <http://www.geographica.gs/>
> S?guenos en Twitter
> *@Geographica_ST*
> <https://twitter.com/#%21/Geographica_GS>
> Twitter <https://twitter.com/#%21/Geographica_ST>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130215/41347a9b/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 398 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130215/41347a9b/attachment-0003.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 1196 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130215/41347a9b/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 2424 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130215/41347a9b/attachment-0005.png>

From muratbeyhan28 at gmail.com  Fri Feb 15 09:46:13 2013
From: muratbeyhan28 at gmail.com (Murat Beyhan)
Date: Fri, 15 Feb 2013 19:46:13 +0200
Subject: [gdal-dev] ogr2ogr convert e00 to shp
Message-ID: <CAEZYbZtdPsbxOdGpJEKZJNMp_+dE7hvPD6PMD1=2Udc4LK8u0A@mail.gmail.com>

Dear frend,

I was creating shp file using ogr2ogr as follows

avcimport file.e00 coverage

ogr2ogr -f "ESRI Shapefile" file.shp coverage

This was worked well for old version of gdal

I have installed gdal 1.9 then I have faced such a problem

the ogr2ogr command create a directory and shp file located unter that
directory.
But old version of ogr2ogr was created files under the same directory where
you work

the old version of ogr2ogr creates file.shp file.shx file.dbf

but new version create directory under working directory called file.shp
instead of file.shp file
and the shp files located under file.shp directory

Please let me know what is differs this resuts.

Regards
Murat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130215/5c78963b/attachment.html>

From andre+joost at nurfuerspam.de  Fri Feb 15 11:33:23 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 15 Feb 2013 20:33:23 +0100
Subject: [gdal-dev] ogr2ogr convert e00 to shp
In-Reply-To: <CAEZYbZtdPsbxOdGpJEKZJNMp_+dE7hvPD6PMD1=2Udc4LK8u0A@mail.gmail.com>
References: <CAEZYbZtdPsbxOdGpJEKZJNMp_+dE7hvPD6PMD1=2Udc4LK8u0A@mail.gmail.com>
Message-ID: <kfm2i6$8bq$1@ger.gmane.org>

Hi,

I had this problem too if the file "file.shp already exists. GDAL does 
not want to overwrite such a file, but create a directory instead.

So bet workflow is to delete the output file, if it exists, and then 
carry on with ogr2ogr:

  if exist file.shp del file.shp
  ogr2ogr -f "ESRI Shaoefile" file.shp ...



HTH,
Andr? Joost

Am 15.02.2013 18:46, schrieb Murat Beyhan:

> I was creating shp file using ogr2ogr as follows
>
> avcimport file.e00 coverage
>
> ogr2ogr -f "ESRI Shapefile" file.shp coverage
>
> This was worked well for old version of gdal
>
> I have installed gdal 1.9 then I have faced such a problem
>
> the ogr2ogr command create a directory and shp file located unter that
> directory.
> But old version of ogr2ogr was created files under the same directory where
> you work
>
> the old version of ogr2ogr creates file.shp file.shx file.dbf
>
> but new version create directory under working directory called file.shp
> instead of file.shp file
> and the shp files located under file.shp directory
>
> Please let me know what is differs this resuts.
>
> Regards
> Murat
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From andre+joost at nurfuerspam.de  Fri Feb 15 12:48:56 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 15 Feb 2013 21:48:56 +0100
Subject: [gdal-dev] ogr2ogr convert e00 to shp
In-Reply-To: <CAEZYbZtmVt2jNbjTROkcno_O2R7s9-zvkX5SyvT3mpB5j3fU9g@mail.gmail.com>
References: <CAEZYbZtdPsbxOdGpJEKZJNMp_+dE7hvPD6PMD1=2Udc4LK8u0A@mail.gmail.com>
	<kfm2i6$8bq$1@ger.gmane.org>
	<CAEZYbZtmVt2jNbjTROkcno_O2R7s9-zvkX5SyvT3mpB5j3fU9g@mail.gmail.com>
Message-ID: <kfm6vv$jsj$1@ger.gmane.org>

Hi,

please answer to the lst, so others can benefit from the answers.

Am 15.02.2013 21:06, schrieb Murat Beyhan:
> Hi Andr?,
> thanks for your comment.
> I know this but It is never created such shp file. It only creates
> directory
> and it is containing followings
> ARC.dbf
> ARC.shp
> ARC.shx
> igds.dbf
> igds.shp
> igds.shx
> LAB.dbf
> LAB.shp
> LAB.shx
>   I really surprised What is wrong. May be new version has some different
> way to do this job. I'm not sure.


I think thats okay for e00 data. Reading 
http://www.gdal.org/ogr/drv_avce00.html those shapefiles are created and 
named depending on the content of the source.

HTH,
Andr? Joost


>
>
>
> 2013/2/15 Andre Joost<andre+joost at nurfuerspam.de>
>
>> Hi,
>>
>> I had this problem too if the file "file.shp already exists. GDAL does not
>> want to overwrite such a file, but create a directory instead.
>>
>> So bet workflow is to delete the output file, if it exists, and then carry
>> on with ogr2ogr:
>>
>>   if exist file.shp del file.shp
>>   ogr2ogr -f "ESRI Shaoefile" file.shp ...
>>
>>
>>
>> HTH,
>> Andr? Joost
>>
>> Am 15.02.2013 18:46, schrieb Murat Beyhan:
>>
>>   I was creating shp file using ogr2ogr as follows
>>>
>>> avcimport file.e00 coverage
>>>
>>> ogr2ogr -f "ESRI Shapefile" file.shp coverage
>>>
>>> This was worked well for old version of gdal
>>>
>>> I have installed gdal 1.9 then I have faced such a problem
>>>
>>> the ogr2ogr command create a directory and shp file located unter that
>>> directory.
>>> But old version of ogr2ogr was created files under the same directory
>>> where
>>> you work
>>>
>>> the old version of ogr2ogr creates file.shp file.shx file.dbf
>>>
>>> but new version create directory under working directory called file.shp
>>> instead of file.shp file
>>> and the shp files located under file.shp directory
>>>
>>> Please let me know what is differs this resuts.
>>>
>>> Regards
>>> Murat
>>>
>>>
>>>
>>>
>>> ______________________________**_________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>>
>>
>>
>> ______________________________**_________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>



From eadam at co.lincoln.or.us  Fri Feb 15 12:58:13 2013
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Fri, 15 Feb 2013 12:58:13 -0800
Subject: [gdal-dev] ogr2ogr convert e00 to shp
In-Reply-To: <CAEZYbZtdPsbxOdGpJEKZJNMp_+dE7hvPD6PMD1=2Udc4LK8u0A@mail.gmail.com>
References: <CAEZYbZtdPsbxOdGpJEKZJNMp_+dE7hvPD6PMD1=2Udc4LK8u0A@mail.gmail.com>
Message-ID: <CACqBkM8QdkrqQr4em43YOsoX1cGZ8tZzeY_PGGmsQ3PTiusspw@mail.gmail.com>

Murat,

> I was creating shp file using ogr2ogr as follows
>
> avcimport file.e00 coverage
>
> ogr2ogr -f "ESRI Shapefile" file.shp coverage
>
> This was worked well for old version of gdal
>
> I have installed gdal 1.9 then I have faced such a problem
>
> the ogr2ogr command create a directory and shp file located unter that
> directory.
> But old version of ogr2ogr was created files under the same directory where
> you work

I think that ogr2ogr has (sometimes) created shapefiles in directories
for a long time before 1.9.

>
> the old version of ogr2ogr creates file.shp file.shx file.dbf
>
> but new version create directory under working directory called file.shp
> instead of file.shp file
> and the shp files located under file.shp directory
>
> Please let me know what is differs this resuts.
>
> Regards
> Murat

The shapefile driver page talks about this some,
http://gdal.org/ogr/drv_shapefile.html

I notice similar things (this is with PostGIS datasource).  If the
output shp file is the same name as input source then the shp is
created in the specified directory.  If it is a different name, then I
get a directory.

ogr2ogr V:\Data\E_addendum\Assessor\2012\nbhd\nbhd_codes_2012_postgis2.shp
PG:"host=123.12.12.12 user=username dbname=mydatabase
password=mypassword" taxlots2012_union_valid_nbhd_codes_v1 -a_srs
"EPSG:2913"

creates a directory and then the shp (and the shp has the name of the
original datasource), i.e.
V:\Data\E_addendum\Assessor\2012\nbhd\nbhd_codes_2012_postgis2.shp\taxlots2012_union_valid_nbhd_codes_v1.dbf,
.shp, etc

ogr2ogr V:\Data\E_addendum\Assessor\2012\nbhd\taxlots2012_union_valid_nbhd_codes_v1.shp
PG:"host=123.12.12.12 user=username dbname=mydatabase_template
password=mypassword" taxlots2012_union_valid_nbhd_codes_v1 -a_srs
"EPSG:2913"

creates the named shp in the directory.

I have occasionally found this a minor annoyance.  Is there a config
or creation option to change this?  A search of the email archives
didn't turn anything up for me.

Eli

From feumar at shaw.ca  Fri Feb 15 17:04:45 2013
From: feumar at shaw.ca (Martin Feuchtwanger)
Date: Fri, 15 Feb 2013 17:04:45 -0800
Subject: [gdal-dev] Most optimal algorithm for contour correctness?
In-Reply-To: <1360811719382-5034148.post@n6.nabble.com>
References: <1360811719382-5034148.post@n6.nabble.com>
Message-ID: <511EDB2D.6080609@shaw.ca>

Nav,

I don't know about the gdal routines specifically, but:

 1. Re. dem/dtm generally, the most significant factor in interpolation
    results is the quantity (density, really) and quality of the source
    data, not the interpolation algorithm.
 2. Re. contours generally, they are cartographic artifacts, not
    geographic features and will never be more accurate than the source
    data (unless you know the data are very "noisy" and ought to be
    smoothed.
 3. Re. segments vs splines, it depends whether the segment end-points
    are fixed and only their interiors are shifted, or the corners are
    shifted to make them rounded and the interiors fixed. The former is
    much better since the end-points are "primary" interpolations (based
    on data) and the interiors "secondary" (based on primary). Smoothing
    out the contours (either way) will make them cartographically
    pleasing, but the degree of "curviness" should depend on the assumed
    ruggedness of the original terrain (more rugged => less smoothing).

Hoping that helps and that others will comment on the specific gdal 
routines,

Martin Feuchtwanger  feumar at shaw.ca  604-254-0361
http://members.shaw.ca/geomatics.developer

On 13/02/2013 7:15 PM, nav wrote:
> Am creating an app which correctly calculates contours from a DEM file or any
> height-map given to it. The correctness of the contour holding the most
> importance, since a person viewing the contours shouldn't end up taking
> wrong planning decisions and maybe losing their life by the route they
> choose after looking at the map.
>
> I have already tried using GDAL 1.7 source code, compiled it and added some
> features of my own to it for some other objective. Now I want to
> add-to/modify the source to be able to use the contour generation function
> of GDAL in C++.
>
> But before proceeding, I wanted to know:
> 1. If GDAL offers the best free contour generation algorithm available or is
> there any other library which I can link to my code and feed my DEM map to
> it and receive contour vector lines (or go thru research papers and
> implement the contour generation algorithm myself in C++)? If GDAL, then why
> is it the best?
> 2. A generated contour will basically be points connected with straight
> lines. Is it more correct for a contour to be depicted with connected
> straight lines or will it give a more correct result to use a spline to
> smoothen out the lines?
>
> I won't be interpolating any contours or the DEM because I've read on this
> website that interpolation leads to incorrect results.
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Most-optimal-algorithm-for-contour-correctness-tp5034148.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130215/a66355d7/attachment.html>

From dlverbyla at alaska.edu  Sat Feb 16 06:25:49 2013
From: dlverbyla at alaska.edu (David Verbyla)
Date: Sat, 16 Feb 2013 05:25:49 -0900
Subject: [gdal-dev] retrieving geometry vesus .GetGeometryRef() function
Message-ID: <CAJpuGQeQ5Qm3OUpVyRFDtv95W=Pe9_sRoDE2MyrYsSQNvsmZxg@mail.gmail.com>

I'm looking for documentation explaining when to use .geometry instead of
.GetGeometryRef(()

for example:
>>> testPoly1 = square1.geometry()
>>> testPoly2 = square1.GetGeometryRef()

the seem to both return the same polygon object
<osgeo.ogr.Geometry; proxy of <Swig Object of type 'OGRGeometryShadow *'

Thank you!

Dave Verbyla
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130216/bcac2527/attachment.html>

From jan.heckman at gmail.com  Sat Feb 16 06:50:07 2013
From: jan.heckman at gmail.com (Jan Heckman)
Date: Sat, 16 Feb 2013 15:50:07 +0100
Subject: [gdal-dev] Most optimal algorithm for contour correctness?
In-Reply-To: <1360811719382-5034148.post@n6.nabble.com>
References: <1360811719382-5034148.post@n6.nabble.com>
Message-ID: <CAKMUAtBe2vKwpgoO6-7o235DLYvj8HYRk8Y=vmf2K10VWOBOnQ@mail.gmail.com>

Hi,
I've tackled a similar problem.
Correctness of contour is a simple matter, except for one thing. That is
the issue of saddles.
That issue cannot be solved "correctly" since typically the data can be
interpreted in several ways.
This is also described in a wikipedia article (google for it, if you like).
Imagine a (descending) mountainridge, which may have towers and gaps in it
(sometimes referred to as sentinels when climbing).
When the (dem) grid is too coarse, these won't show.
I found that I had to write my own routine to handle this.
Roughly as follows:
When gridsquare with values equal or larger than the contourvalue are
isolated, except they touch diagonally, you have a potential saddle
situation.
My "correctness" is that I continue straight on when the average of the
four surrounding gridpoints is equal to or larger than the contour value.
If not, the contour is divided in two subcontours.
Hope this helps and tell me whether you need such code.
I have been considering offering it for the gdal and saga communities, but
have not had enough time to make the code nice enough.
Jan

On Thu, Feb 14, 2013 at 4:15 AM, nav <navin.pro at gmail.com> wrote:

> Am creating an app which correctly calculates contours from a DEM file or
> any
> height-map given to it. The correctness of the contour holding the most
> importance, since a person viewing the contours shouldn't end up taking
> wrong planning decisions and maybe losing their life by the route they
> choose after looking at the map.
>
> I have already tried using GDAL 1.7 source code, compiled it and added some
> features of my own to it for some other objective. Now I want to
> add-to/modify the source to be able to use the contour generation function
> of GDAL in C++.
>
> But before proceeding, I wanted to know:
> 1. If GDAL offers the best free contour generation algorithm available or
> is
> there any other library which I can link to my code and feed my DEM map to
> it and receive contour vector lines (or go thru research papers and
> implement the contour generation algorithm myself in C++)? If GDAL, then
> why
> is it the best?
> 2. A generated contour will basically be points connected with straight
> lines. Is it more correct for a contour to be depicted with connected
> straight lines or will it give a more correct result to use a spline to
> smoothen out the lines?
>
> I won't be interpolating any contours or the DEM because I've read on this
> website that interpolation leads to incorrect results.
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Most-optimal-algorithm-for-contour-correctness-tp5034148.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130216/01fdc52a/attachment-0001.html>

From bishop.dev at gmail.com  Sat Feb 16 13:23:07 2013
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Sun, 17 Feb 2013 01:23:07 +0400
Subject: [gdal-dev] GSoC 2013 Ideas List
In-Reply-To: <CAJW9wosytH=O4KzjjhzbDhZ_jmYZSuOdYnZ5O0MeEpd8xUVTjg@mail.gmail.com>
References: <CAJW9wosytH=O4KzjjhzbDhZ_jmYZSuOdYnZ5O0MeEpd8xUVTjg@mail.gmail.com>
Message-ID: <511FF8BB.4060302@gmail.com>

The Google Summer of Code will be started soon, but we have no ideas to 
improving GDAL (http://trac.osgeo.org/gdal/wiki/SummerOfCode).
There is wish list 
(http://trac.osgeo.org/gdal/query?status=%21closed&order=id&desc=1&type=enhancement), 
but it should be reformat for such tasks, which students can solve.
Are there any ideas?

Best regards,
     Dmitriy


From muratbeyhan28 at gmail.com  Sun Feb 17 12:49:23 2013
From: muratbeyhan28 at gmail.com (Murat Beyhan)
Date: Sun, 17 Feb 2013 22:49:23 +0200
Subject: [gdal-dev] ogr2ogr convert e00 to shp
In-Reply-To: <CACqBkM_TyWS1LKoRUy=Hy5C6_rgnwEt6vCgm74H5KiABQ5AyFQ@mail.gmail.com>
References: <CAEZYbZtdPsbxOdGpJEKZJNMp_+dE7hvPD6PMD1=2Udc4LK8u0A@mail.gmail.com>
	<CACqBkM8QdkrqQr4em43YOsoX1cGZ8tZzeY_PGGmsQ3PTiusspw@mail.gmail.com>
	<CAEZYbZsM-da3nV+5MqCQyE8Ha=efouQqt=aGQk-S6stcY4mfBg@mail.gmail.com>
	<CACqBkM_TyWS1LKoRUy=Hy5C6_rgnwEt6vCgm74H5KiABQ5AyFQ@mail.gmail.com>
Message-ID: <CAEZYbZs2hVo=Qk561iBaaDXhF-YoMf4mEUcDTfcobCVcVSCSDg@mail.gmail.com>

Thanks for the great explanation and help,
But still I couldn't solve my problem. Shape file which is generated by
ogr2ogr should be under the working directory as a file not as a fiel under
the new directory. I mean after run the command
I would like to see shape file under the working directory
f30c3.shp
f30c3.shx
f30c3.dbf

This could be done by old version but for new one as I explain it created
new directory and collect files under that directory..


I have written another script and it read data under working directory. So
I have to see files under the working directory.

Regards
Murat

2013/2/16 Eli Adam <eadam at co.lincoln.or.us>

> On Fri, Feb 15, 2013 at 1:25 PM, Murat Beyhan <muratbeyhan28 at gmail.com>
> wrote:
> > Dear All,
> > I deleted existing shp file and I try but It doesn't create individual
> shp
> > file under same directory. Always creates  files under directory
> >
> > avcimport f30c3.e00 f30c3
> > ogr2ogr -f "ESRI Shapefile"  f30c3.shp  f30c3
> > this creates file under directory of f30c3.shp and files as same before I
> > wrote.
> >
> >  ls f30c3.shp/
> > ARC.dbf  ARC.shp  ARC.shx  LAB.dbf  LAB.shp  LAB.shx
>
> Coverages, http://gdal.org/ogr/drv_avce00.html, can have multiple
> different geometry types within one file.  It looks like your results
> include both lines and labels.  A shapefile can not have multiple
> geometries within one shapefile so at least one of the output
> shapefiles can't have the same name.   In this case ogr2ogr is
> generating one for lines (ARC.shp) and one for labels (LAB.shp).  This
> is probably also one of the reasons that the shapefile driver treats a
> directory as a dataset and shapefiles as layers within that
> 'dataset/directory'
>
> Best Regards, Eli
>
>
> >
> >
> > Then I also used without using coverage file created by avcimport
> > I have deleted f30c3 coverage directory and files created by the first
> > method then apply following directly
> > ogr2ogr -f "ESRI Shapefile"  f30c3.shp  f30c3.e00
> > this also created directory for the shape file.
> >
> > it works and behave similar with previous process
> > I have faced this problem for new version of Gdal Eli.
> > old version works fine with mandriva but new version of gdal on ubuntu
> > behave like this. So I really waiting for the solution of this issue.
> >
> >
> >
> > 2013/2/15 Eli Adam <eadam at co.lincoln.or.us>
> >>
> >> Murat,
> >>
> >> > I was creating shp file using ogr2ogr as follows
> >> >
> >> > avcimport file.e00 coverage
> >> >
> >> > ogr2ogr -f "ESRI Shapefile" file.shp coverage
> >> >
> >> > This was worked well for old version of gdal
> >> >
> >> > I have installed gdal 1.9 then I have faced such a problem
> >> >
> >> > the ogr2ogr command create a directory and shp file located unter that
> >> > directory.
> >> > But old version of ogr2ogr was created files under the same directory
> >> > where
> >> > you work
> >>
> >> I think that ogr2ogr has (sometimes) created shapefiles in directories
> >> for a long time before 1.9.
> >>
> >> >
> >> > the old version of ogr2ogr creates file.shp file.shx file.dbf
> >> >
> >> > but new version create directory under working directory called
> file.shp
> >> > instead of file.shp file
> >> > and the shp files located under file.shp directory
> >> >
> >> > Please let me know what is differs this resuts.
> >> >
> >> > Regards
> >> > Murat
> >>
> >> The shapefile driver page talks about this some,
> >> http://gdal.org/ogr/drv_shapefile.html
> >>
> >> I notice similar things (this is with PostGIS datasource).  If the
> >> output shp file is the same name as input source then the shp is
> >> created in the specified directory.  If it is a different name, then I
> >> get a directory.
> >>
> >> ogr2ogr
> V:\Data\E_addendum\Assessor\2012\nbhd\nbhd_codes_2012_postgis2.shp
> >> PG:"host=123.12.12.12 user=username dbname=mydatabase
> >> password=mypassword" taxlots2012_union_valid_nbhd_codes_v1 -a_srs
> >> "EPSG:2913"
> >>
> >> creates a directory and then the shp (and the shp has the name of the
> >> original datasource), i.e.
> >>
> >>
> V:\Data\E_addendum\Assessor\2012\nbhd\nbhd_codes_2012_postgis2.shp\taxlots2012_union_valid_nbhd_codes_v1.dbf,
> >> .shp, etc
> >>
> >> ogr2ogr
> >>
> V:\Data\E_addendum\Assessor\2012\nbhd\taxlots2012_union_valid_nbhd_codes_v1.shp
> >> PG:"host=123.12.12.12 user=username dbname=mydatabase_template
> >> password=mypassword" taxlots2012_union_valid_nbhd_codes_v1 -a_srs
> >> "EPSG:2913"
> >>
> >> creates the named shp in the directory.
> >>
> >> I have occasionally found this a minor annoyance.  Is there a config
> >> or creation option to change this?  A search of the email archives
> >> didn't turn anything up for me.
> >>
> >> Eli
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130217/7664968d/attachment.html>

From even.rouault at mines-paris.org  Sun Feb 17 15:34:41 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 18 Feb 2013 00:34:41 +0100
Subject: [gdal-dev] GSoC 2013 Ideas List
In-Reply-To: <511FF8BB.4060302@gmail.com>
References: <CAJW9wosytH=O4KzjjhzbDhZ_jmYZSuOdYnZ5O0MeEpd8xUVTjg@mail.gmail.com>
	<511FF8BB.4060302@gmail.com>
Message-ID: <201302180034.41859.even.rouault@mines-paris.org>

Le samedi 16 f?vrier 2013 22:23:07, Dmitriy Baryshnikov a ?crit :
> The Google Summer of Code will be started soon, but we have no ideas to
> improving GDAL (http://trac.osgeo.org/gdal/wiki/SummerOfCode).
> There is wish list
> (http://trac.osgeo.org/gdal/query?status=%21closed&order=id&desc=1&type=enh
> ancement), but it should be reformat for such tasks, which students can
> solve. Are there any ideas?

http://trac.osgeo.org/gdal/wiki/GDAL20Changes contains also a list of items, 
but I doubt that they will attract students (or are appropriate for 
newcomers).

Other ideas :
- A WMTS "mini-driver" for the WMS driver (provided that WMTS can indeed be 
implemented as a minidriver, which I'm not sure because of the possible origin 
shift between overview levels allowed by the spec)
- GDAL driver for the raster part of OGC Geopackage spec + upgrade of OGR 
Spatialite driver for the vector part

> 
> Best regards,
>      Dmitriy
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Sun Feb 17 15:36:22 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 18 Feb 2013 00:36:22 +0100
Subject: [gdal-dev] retrieving geometry vesus .GetGeometryRef() function
In-Reply-To: <CAJpuGQeQ5Qm3OUpVyRFDtv95W=Pe9_sRoDE2MyrYsSQNvsmZxg@mail.gmail.com>
References: <CAJpuGQeQ5Qm3OUpVyRFDtv95W=Pe9_sRoDE2MyrYsSQNvsmZxg@mail.gmail.com>
Message-ID: <201302180036.22742.even.rouault@mines-paris.org>

Le samedi 16 f?vrier 2013 15:25:49, David Verbyla a ?crit :
> I'm looking for documentation explaining when to use .geometry instead of
> .GetGeometryRef(()

The doc is in the code ;-)

swig/include/python/ogr_python.i :

    def geometry(self):
        return self.GetGeometryRef()

From JPalmer at linz.govt.nz  Sun Feb 17 17:45:05 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Mon, 18 Feb 2013 14:45:05 +1300
Subject: [gdal-dev] OGR WFS from behind NTLMv2 proxy server
Message-ID: <613012002.1441332.1361151909220.JavaMail.root@s-101-LINZ>

Is it possible to connect to a WFS server when behind an NTLMv2 proxy server?

I've tried setting the http_proxy to http://user:pass at host:port but I got this response (which makes it look like the credentials were not passed)

ERROR 1: HTTP error code : 407
ERROR 1: Error returned by server : HTTP error code : 407 (0)
FAILURE:

Cheers,
Jeremy Palmer
LINZ Data Service Manager
Landonline & Geospatial Services
E  jpalmer at linz.govt.nz<mailto:jpalmer at linz.govt.nz> | DDI +64 4 4983537 | M +64 27 2747 862
Wellington Office, Level 7, Radio New Zealand House, 155 The Terrace
PO Box 5501, Wellington 6145, New Zealand | T 04 460 0110
W  www.linz.govt.nz<http://www.linz.govt.nz/> | data.linz.govt.nz
[http://www.linz.govt.nz/sites/default/files/images/email-signature-v2.png]<http://www.linz.govt.nz/>


________________________________
This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130218/3417cadd/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: email-signature-v2.png
Type: image/png
Size: 10101 bytes
Desc: email-signature-v2.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130218/3417cadd/attachment-0001.png>

From ao at t-kartor.se  Sun Feb 17 23:09:45 2013
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Mon, 18 Feb 2013 08:09:45 +0100
Subject: [gdal-dev] ogr2ogr convert e00 to shp
In-Reply-To: <CAEZYbZs2hVo=Qk561iBaaDXhF-YoMf4mEUcDTfcobCVcVSCSDg@mail.gmail.com>
References: <CAEZYbZtdPsbxOdGpJEKZJNMp_+dE7hvPD6PMD1=2Udc4LK8u0A@mail.gmail.com>
	<CACqBkM8QdkrqQr4em43YOsoX1cGZ8tZzeY_PGGmsQ3PTiusspw@mail.gmail.com>
	<CAEZYbZsM-da3nV+5MqCQyE8Ha=efouQqt=aGQk-S6stcY4mfBg@mail.gmail.com>
	<CACqBkM_TyWS1LKoRUy=Hy5C6_rgnwEt6vCgm74H5KiABQ5AyFQ@mail.gmail.com>
	<CAEZYbZs2hVo=Qk561iBaaDXhF-YoMf4mEUcDTfcobCVcVSCSDg@mail.gmail.com>
Message-ID: <5121D3B9.8000907@t-kartor.se>

How complex is your input file(s)?
ArcInfo coverage/E00 can have virtually any number of featureclasses. 
However, a coverage have non-redundant geometry with only two primary 
geometry sources: point and line. All other featureclasses (polygons, 
nodes, multipolys, multilines etc) shares the geometry using internal 
pointers but can (and will normally) have different attributes.
If I use ogr on a point-only coverage:
ogr2ogr gridp05.shp gridp05.e00
then one shapefile is created in the "working directory"
If I use ogr on a polygon coverage:
ogr2ogr grid05.shp grid05.e00
then four shapefiles (lines, polygons, labels) are created in a new 
directory named grid05.shp

Best Regards

Andreas

> Thanks for the great explanation and help,
> But still I couldn't solve my problem. Shape file which is generated 
> by ogr2ogr should be under the working directory as a file not as a 
> fiel under the new directory. I mean after run the command
> I would like to see shape file under the working directory
> f30c3.shp
> f30c3.shx
> f30c3.dbf
>
> This could be done by old version but for new one as I explain it 
> created new directory and collect files under that directory..
>
>
> I have written another script and it read data under working 
> directory. So I have to see files under the working directory.
>
> Regards
> Murat
>
> 2013/2/16 Eli Adam <eadam at co.lincoln.or.us 
> <mailto:eadam at co.lincoln.or.us>>
>
>     On Fri, Feb 15, 2013 at 1:25 PM, Murat Beyhan
>     <muratbeyhan28 at gmail.com <mailto:muratbeyhan28 at gmail.com>> wrote:
>     > Dear All,
>     > I deleted existing shp file and I try but It doesn't create
>     individual shp
>     > file under same directory. Always creates  files under directory
>     >
>     > avcimport f30c3.e00 f30c3
>     > ogr2ogr -f "ESRI Shapefile"  f30c3.shp  f30c3
>     > this creates file under directory of f30c3.shp and files as same
>     before I
>     > wrote.
>     >
>     >  ls f30c3.shp/
>     > ARC.dbf  ARC.shp  ARC.shx  LAB.dbf  LAB.shp  LAB.shx
>
>     Coverages, http://gdal.org/ogr/drv_avce00.html, can have multiple
>     different geometry types within one file.  It looks like your results
>     include both lines and labels.  A shapefile can not have multiple
>     geometries within one shapefile so at least one of the output
>     shapefiles can't have the same name.   In this case ogr2ogr is
>     generating one for lines (ARC.shp) and one for labels (LAB.shp).  This
>     is probably also one of the reasons that the shapefile driver treats a
>     directory as a dataset and shapefiles as layers within that
>     'dataset/directory'
>
>     Best Regards, Eli
>
>
>     >
>     >
>     > Then I also used without using coverage file created by avcimport
>     > I have deleted f30c3 coverage directory and files created by the
>     first
>     > method then apply following directly
>     > ogr2ogr -f "ESRI Shapefile"  f30c3.shp  f30c3.e00
>     > this also created directory for the shape file.
>     >
>     > it works and behave similar with previous process
>     > I have faced this problem for new version of Gdal Eli.
>     > old version works fine with mandriva but new version of gdal on
>     ubuntu
>     > behave like this. So I really waiting for the solution of this
>     issue.
>     >
>     >
>     >
>     > 2013/2/15 Eli Adam <eadam at co.lincoln.or.us
>     <mailto:eadam at co.lincoln.or.us>>
>     >>
>     >> Murat,
>     >>
>     >> > I was creating shp file using ogr2ogr as follows
>     >> >
>     >> > avcimport file.e00 coverage
>     >> >
>     >> > ogr2ogr -f "ESRI Shapefile" file.shp coverage
>     >> >
>     >> > This was worked well for old version of gdal
>     >> >
>     >> > I have installed gdal 1.9 then I have faced such a problem
>     >> >
>     >> > the ogr2ogr command create a directory and shp file located
>     unter that
>     >> > directory.
>     >> > But old version of ogr2ogr was created files under the same
>     directory
>     >> > where
>     >> > you work
>     >>
>     >> I think that ogr2ogr has (sometimes) created shapefiles in
>     directories
>     >> for a long time before 1.9.
>     >>
>     >> >
>     >> > the old version of ogr2ogr creates file.shp file.shx file.dbf
>     >> >
>     >> > but new version create directory under working directory
>     called file.shp
>     >> > instead of file.shp file
>     >> > and the shp files located under file.shp directory
>     >> >
>     >> > Please let me know what is differs this resuts.
>     >> >
>     >> > Regards
>     >> > Murat
>     >>
>     >> The shapefile driver page talks about this some,
>     >> http://gdal.org/ogr/drv_shapefile.html
>     >>
>     >> I notice similar things (this is with PostGIS datasource).  If the
>     >> output shp file is the same name as input source then the shp is
>     >> created in the specified directory.  If it is a different name,
>     then I
>     >> get a directory.
>     >>
>     >> ogr2ogr
>     V:\Data\E_addendum\Assessor\2012\nbhd\nbhd_codes_2012_postgis2.shp
>     >> PG:"host=123.12.12.12 user=username dbname=mydatabase
>     >> password=mypassword" taxlots2012_union_valid_nbhd_codes_v1 -a_srs
>     >> "EPSG:2913"
>     >>
>     >> creates a directory and then the shp (and the shp has the name
>     of the
>     >> original datasource), i.e.
>     >>
>     >>
>     V:\Data\E_addendum\Assessor\2012\nbhd\nbhd_codes_2012_postgis2.shp\taxlots2012_union_valid_nbhd_codes_v1.dbf,
>     >> .shp, etc
>     >>
>     >> ogr2ogr
>     >>
>     V:\Data\E_addendum\Assessor\2012\nbhd\taxlots2012_union_valid_nbhd_codes_v1.shp
>     >> PG:"host=123.12.12.12 user=username dbname=mydatabase_template
>     >> password=mypassword" taxlots2012_union_valid_nbhd_codes_v1 -a_srs
>     >> "EPSG:2913"
>     >>
>     >> creates the named shp in the directory.
>     >>
>     >> I have occasionally found this a minor annoyance.  Is there a
>     config
>     >> or creation option to change this?  A search of the email archives
>     >> didn't turn anything up for me.
>     >>
>     >> Eli
>     >
>     >
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130218/dc4c2d5f/attachment.html>

From muratbeyhan28 at gmail.com  Mon Feb 18 00:38:21 2013
From: muratbeyhan28 at gmail.com (Murat Beyhan)
Date: Mon, 18 Feb 2013 10:38:21 +0200
Subject: [gdal-dev] ogr2ogr convert e00 to shp
In-Reply-To: <5121D3B9.8000907@t-kartor.se>
References: <CAEZYbZtdPsbxOdGpJEKZJNMp_+dE7hvPD6PMD1=2Udc4LK8u0A@mail.gmail.com>
	<CACqBkM8QdkrqQr4em43YOsoX1cGZ8tZzeY_PGGmsQ3PTiusspw@mail.gmail.com>
	<CAEZYbZsM-da3nV+5MqCQyE8Ha=efouQqt=aGQk-S6stcY4mfBg@mail.gmail.com>
	<CACqBkM_TyWS1LKoRUy=Hy5C6_rgnwEt6vCgm74H5KiABQ5AyFQ@mail.gmail.com>
	<CAEZYbZs2hVo=Qk561iBaaDXhF-YoMf4mEUcDTfcobCVcVSCSDg@mail.gmail.com>
	<5121D3B9.8000907@t-kartor.se>
Message-ID: <CAEZYbZusvPYOd2UEbPHBOq4C62DkA7Unt57JiaazfYzNmHsoxw@mail.gmail.com>

Dear Friends,

Thank you for the explanation you helped me.
I have move files from created directory to the working directory by bash
scripting.
By the way I understood behaviour of ogr more.
Regards.
 Murat

2013/2/18 Andreas Oxenstierna <ao at t-kartor.se>

>  How complex is your input file(s)?
> ArcInfo coverage/E00 can have virtually any number of featureclasses.
> However, a coverage have non-redundant geometry with only two primary
> geometry sources: point and line. All other featureclasses (polygons,
> nodes, multipolys, multilines etc) shares the geometry using internal
> pointers but can (and will normally) have different attributes.
> If I use ogr on a point-only coverage:
> ogr2ogr gridp05.shp gridp05.e00
> then one shapefile is created in the "working directory"
> If I use ogr on a polygon coverage:
> ogr2ogr grid05.shp grid05.e00
> then four shapefiles (lines, polygons, labels) are created in a new
> directory named grid05.shp
>
> Best Regards
>
> Andreas
>
>  Thanks for the great explanation and help,
> But still I couldn't solve my problem. Shape file which is generated by
> ogr2ogr should be under the working directory as a file not as a fiel under
> the new directory. I mean after run the command
> I would like to see shape file under the working directory
> f30c3.shp
> f30c3.shx
> f30c3.dbf
>
> This could be done by old version but for new one as I explain it created
> new directory and collect files under that directory..
>
>
> I have written another script and it read data under working directory. So
> I have to see files under the working directory.
>
> Regards
> Murat
>
> 2013/2/16 Eli Adam <eadam at co.lincoln.or.us>
>
>> On Fri, Feb 15, 2013 at 1:25 PM, Murat Beyhan <muratbeyhan28 at gmail.com>
>> wrote:
>> > Dear All,
>> > I deleted existing shp file and I try but It doesn't create individual
>> shp
>> > file under same directory. Always creates  files under directory
>> >
>> > avcimport f30c3.e00 f30c3
>> > ogr2ogr -f "ESRI Shapefile"  f30c3.shp  f30c3
>> > this creates file under directory of f30c3.shp and files as same before
>> I
>> > wrote.
>> >
>> >  ls f30c3.shp/
>> > ARC.dbf  ARC.shp  ARC.shx  LAB.dbf  LAB.shp  LAB.shx
>>
>>  Coverages, http://gdal.org/ogr/drv_avce00.html, can have multiple
>> different geometry types within one file.  It looks like your results
>> include both lines and labels.  A shapefile can not have multiple
>> geometries within one shapefile so at least one of the output
>> shapefiles can't have the same name.   In this case ogr2ogr is
>> generating one for lines (ARC.shp) and one for labels (LAB.shp).  This
>> is probably also one of the reasons that the shapefile driver treats a
>> directory as a dataset and shapefiles as layers within that
>> 'dataset/directory'
>>
>> Best Regards, Eli
>>
>>
>> >
>> >
>> > Then I also used without using coverage file created by avcimport
>> > I have deleted f30c3 coverage directory and files created by the first
>> > method then apply following directly
>> > ogr2ogr -f "ESRI Shapefile"  f30c3.shp  f30c3.e00
>> > this also created directory for the shape file.
>> >
>> > it works and behave similar with previous process
>> > I have faced this problem for new version of Gdal Eli.
>> > old version works fine with mandriva but new version of gdal on ubuntu
>> > behave like this. So I really waiting for the solution of this issue.
>> >
>> >
>> >
>> > 2013/2/15 Eli Adam <eadam at co.lincoln.or.us>
>> >>
>> >> Murat,
>> >>
>> >> > I was creating shp file using ogr2ogr as follows
>> >> >
>> >> > avcimport file.e00 coverage
>> >> >
>> >> > ogr2ogr -f "ESRI Shapefile" file.shp coverage
>> >> >
>> >> > This was worked well for old version of gdal
>> >> >
>> >> > I have installed gdal 1.9 then I have faced such a problem
>> >> >
>> >> > the ogr2ogr command create a directory and shp file located unter
>> that
>> >> > directory.
>> >> > But old version of ogr2ogr was created files under the same directory
>> >> > where
>> >> > you work
>> >>
>> >> I think that ogr2ogr has (sometimes) created shapefiles in directories
>> >> for a long time before 1.9.
>> >>
>> >> >
>> >> > the old version of ogr2ogr creates file.shp file.shx file.dbf
>> >> >
>> >> > but new version create directory under working directory called
>> file.shp
>> >> > instead of file.shp file
>> >> > and the shp files located under file.shp directory
>> >> >
>> >> > Please let me know what is differs this resuts.
>> >> >
>> >> > Regards
>> >> > Murat
>> >>
>> >> The shapefile driver page talks about this some,
>> >> http://gdal.org/ogr/drv_shapefile.html
>> >>
>> >> I notice similar things (this is with PostGIS datasource).  If the
>> >> output shp file is the same name as input source then the shp is
>> >> created in the specified directory.  If it is a different name, then I
>> >> get a directory.
>> >>
>> >> ogr2ogr
>> V:\Data\E_addendum\Assessor\2012\nbhd\nbhd_codes_2012_postgis2.shp
>> >> PG:"host=123.12.12.12 user=username dbname=mydatabase
>> >> password=mypassword" taxlots2012_union_valid_nbhd_codes_v1 -a_srs
>> >> "EPSG:2913"
>> >>
>> >> creates a directory and then the shp (and the shp has the name of the
>> >> original datasource), i.e.
>> >>
>> >>
>> V:\Data\E_addendum\Assessor\2012\nbhd\nbhd_codes_2012_postgis2.shp\taxlots2012_union_valid_nbhd_codes_v1.dbf,
>> >> .shp, etc
>> >>
>> >> ogr2ogr
>> >>
>> V:\Data\E_addendum\Assessor\2012\nbhd\taxlots2012_union_valid_nbhd_codes_v1.shp
>> >> PG:"host=123.12.12.12 user=username dbname=mydatabase_template
>> >> password=mypassword" taxlots2012_union_valid_nbhd_codes_v1 -a_srs
>> >> "EPSG:2913"
>> >>
>> >> creates the named shp in the directory.
>> >>
>> >> I have occasionally found this a minor annoyance.  Is there a config
>> >> or creation option to change this?  A search of the email archives
>> >> didn't turn anything up for me.
>> >>
>> >> Eli
>> >
>> >
>>
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130218/1dd750e8/attachment-0001.html>

From j.l.h.hartmann at uva.nl  Mon Feb 18 06:00:37 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon, 18 Feb 2013 15:00:37 +0100
Subject: [gdal-dev] Feature request: gauss and other interpolations in
	gdalwarp
In-Reply-To: <CA+YzLBc4Wak84fwcxi6dGQBe79rnVZ6cYMWBDUU0s4QV6Pc8uw@mail.gmail.com>
References: <CA+o=fQC5fKMsd_UOyF2HXpH9yqR7b3o27xJNPeWSq2Gq5gR4dQ@mail.gmail.com>
	<CA+o=fQDB9FMC6LBocH4o1hzLRsJe4WB4917tPCiZOS_2LX2Dyg@mail.gmail.com>
	<CA+YzLBc4Wak84fwcxi6dGQBe79rnVZ6cYMWBDUU0s4QV6Pc8uw@mail.gmail.com>
Message-ID: <51223405.1000005@uva.nl>

Hi devs,

Would it be possible to add the gauss and other interpolations to 
gdalwarp? At the moment I georeference large scans to 2000*2000 tiles at 
the most detailed scale, and then create 2000*2000 tiles at resolutions 
of 2, 4 6 etc  times the original scale, using gdaladdo and gauss or 
other interpolations. It would help immensely if I could do that 
directly with gdalwarp.

Funding would probably no problem. The question is: can and should it be 
done?

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130218/2df87021/attachment.html>

From j.l.h.hartmann at uva.nl  Mon Feb 18 08:17:31 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon, 18 Feb 2013 17:17:31 +0100
Subject: [gdal-dev] Feature request: gauss and other interpolations in
	gdalwarp
In-Reply-To: <51223405.1000005@uva.nl>
References: <51223405.1000005@uva.nl>
Message-ID: <5122541B.7070908@uva.nl>


Hi devs,

Would it be possible to add gauss and other interpolations to gdalwarp? 
At the moment I georeference large scans to 2000*2000 tiles at the most 
detailed scale, and then create 2000*2000 tiles at resolutions of 2, 4 6 
etc  times the original scale, using gdaladdo and gauss or other 
interpolations. It would help immensely if I could do that directly with 
gdalwarp.

Funding would probably no problem. The question is: can and should it be 
done?

Jan


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130218/77cfed0e/attachment.html>

From even.rouault at mines-paris.org  Mon Feb 18 14:41:50 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 18 Feb 2013 23:41:50 +0100
Subject: [gdal-dev] OGR WFS from behind NTLMv2 proxy server
In-Reply-To: <613012002.1441332.1361151909220.JavaMail.root@s-101-LINZ>
References: <613012002.1441332.1361151909220.JavaMail.root@s-101-LINZ>
Message-ID: <201302182341.50890.even.rouault@mines-paris.org>

Le lundi 18 f?vrier 2013 02:45:05, Jeremy Palmer a ?crit :
> Is it possible to connect to a WFS server when behind an NTLMv2 proxy
> server?
> 
> I've tried setting the http_proxy to http://user:pass at host:port but I got
> this response (which makes it look like the credentials were not passed)

Try setting GDAL_HTTP_PROXY=host:port and GDAL_HTTP_PROXYUSERPWD=user:pass as 
environmenet variables / configuration options.

From JPalmer at linz.govt.nz  Mon Feb 18 14:49:10 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Tue, 19 Feb 2013 11:49:10 +1300
Subject: [gdal-dev] OGR WFS from behind NTLMv2 proxy server
In-Reply-To: <201302182341.50890.even.rouault@mines-paris.org>
References: <613012002.1441332.1361151909220.JavaMail.root@s-101-LINZ>
	<201302182341.50890.even.rouault@mines-paris.org>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0F6DB12048@prdlsmmsg01.ad.linz.govt.nz>


>> Try setting GDAL_HTTP_PROXY=host:port and GDAL_HTTP_PROXYUSERPWD=user:pass as environmenet variables / configuration options.

Still can't get it to work. Returns:

ERROR 1: HTTP error code : 407
ERROR 1: Error returned by server : HTTP error code : 407 (0)
ERROR 1: HTTP error code : 407
ERROR 1: Error returned by server : HTTP error code : 407 (0)
FAILURE:
Unable to open datasource `WFS:http://geoportal.doc.govt.nz/arcgis/services/Geop
ortalServices/DOC_Tracks/MapServer/WFSServer' with the following drivers.

Works when I connect via chrome on the same PC.

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From even.rouault at mines-paris.org  Mon Feb 18 15:00:37 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 19 Feb 2013 00:00:37 +0100
Subject: [gdal-dev] OGR WFS from behind NTLMv2 proxy server
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0F6DB12048@prdlsmmsg01.ad.linz.govt.nz>
References: <613012002.1441332.1361151909220.JavaMail.root@s-101-LINZ>
	<201302182341.50890.even.rouault@mines-paris.org>
	<666FB8D75E95AE42965A0E76A5E5337E0F6DB12048@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <201302190000.37460.even.rouault@mines-paris.org>

Le lundi 18 f?vrier 2013 23:49:10, Jeremy Palmer a ?crit :
> >> Try setting GDAL_HTTP_PROXY=host:port and
> >> GDAL_HTTP_PROXYUSERPWD=user:pass as environmenet variables /
> >> configuration options.
> 
> Still can't get it to work. Returns:
> 
> ERROR 1: HTTP error code : 407
> ERROR 1: Error returned by server : HTTP error code : 407 (0)
> ERROR 1: HTTP error code : 407
> ERROR 1: Error returned by server : HTTP error code : 407 (0)
> FAILURE:
> Unable to open datasource
> `WFS:http://geoportal.doc.govt.nz/arcgis/services/Geop
> ortalServices/DOC_Tracks/MapServer/WFSServer' with the following drivers.
> 
> Works when I connect via chrome on the same PC.
> 

Perhaps you can try the following attached patch (based on trunk) and after 
rebuilding GDAL also set GDAL_HTTPAUTH=NTLM in addition to GDAL_HTTP_PROXY and 
GDAL_HTTP_PROXYUSERPWD  ?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130219/a4f37fcb/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: vsilcurl_httpauth.patch
Type: text/x-patch
Size: 3128 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130219/a4f37fcb/attachment.bin>

From even.rouault at mines-paris.org  Mon Feb 18 15:02:13 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 19 Feb 2013 00:02:13 +0100
Subject: [gdal-dev] OGR WFS from behind NTLMv2 proxy server
In-Reply-To: <201302190000.37460.even.rouault@mines-paris.org>
References: <613012002.1441332.1361151909220.JavaMail.root@s-101-LINZ>
	<666FB8D75E95AE42965A0E76A5E5337E0F6DB12048@prdlsmmsg01.ad.linz.govt.nz>
	<201302190000.37460.even.rouault@mines-paris.org>
Message-ID: <201302190002.13948.even.rouault@mines-paris.org>

Le mardi 19 f?vrier 2013 00:00:37, Even Rouault a ?crit :
> Le lundi 18 f?vrier 2013 23:49:10, Jeremy Palmer a ?crit :
> > >> Try setting GDAL_HTTP_PROXY=host:port and
> > >> GDAL_HTTP_PROXYUSERPWD=user:pass as environmenet variables /
> > >> configuration options.
> > 
> > Still can't get it to work. Returns:
> > 
> > ERROR 1: HTTP error code : 407
> > ERROR 1: Error returned by server : HTTP error code : 407 (0)
> > ERROR 1: HTTP error code : 407
> > ERROR 1: Error returned by server : HTTP error code : 407 (0)
> > FAILURE:
> > Unable to open datasource
> > `WFS:http://geoportal.doc.govt.nz/arcgis/services/Geop
> > ortalServices/DOC_Tracks/MapServer/WFSServer' with the following drivers.
> > 
> > Works when I connect via chrome on the same PC.
> 
> Perhaps you can try the following attached patch (based on trunk) and after
> rebuilding GDAL also set GDAL_HTTPAUTH=NTLM in addition to GDAL_HTTP_PROXY
> and GDAL_HTTP_PROXYUSERPWD  ?

Arf, the correct syntax is GDAL_HTTP_AUTH=NTLM

From s.r.kriishna at gmail.com  Mon Feb 18 21:51:34 2013
From: s.r.kriishna at gmail.com (SIVA RAMA KRISHNA)
Date: Tue, 19 Feb 2013 11:21:34 +0530
Subject: [gdal-dev] To know about centriod of a polygon shape file
Message-ID: <CAP-zkzfQU2WCdurvnzNYdcEa0pXu_80kuJRd7YbzsgMQ3L+zUA@mail.gmail.com>

Dear All,

I am just working on  Shape files I am unable to detect duplicate centroids
in a shape file

.After buffering a polygon does centroids of both will match



Any help in greatly  appreciated


With Regards
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130219/59c4d1ef/attachment.html>

From oyvind.idland at gmail.com  Tue Feb 19 02:15:27 2013
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Tue, 19 Feb 2013 11:15:27 +0100
Subject: [gdal-dev] Multiple extensions in GDAL_DMD_EXTENSION ?
Message-ID: <CAEVk4t2+QDerE=8v6MWqXtr-6gdLwOkEGWo=TX8CR0GpJOYxUg@mail.gmail.com>

Is it possible to specify multiple file extensions in GDAL_DMD_EXTENSION ?

I ask because I am working on a driver for a format that has several known
file extensions.


- Oyvind
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130219/eba2b4d7/attachment.html>

From chaitanya.ch at gmail.com  Tue Feb 19 02:25:58 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 19 Feb 2013 15:55:58 +0530
Subject: [gdal-dev] To know about centriod of a polygon shape file
In-Reply-To: <CAP-zkzfQU2WCdurvnzNYdcEa0pXu_80kuJRd7YbzsgMQ3L+zUA@mail.gmail.com>
References: <CAP-zkzfQU2WCdurvnzNYdcEa0pXu_80kuJRd7YbzsgMQ3L+zUA@mail.gmail.com>
Message-ID: <CAMKgpOY3dDrepXokhjj1oV+ZYwyi1+T9xdVyyOftZQhCXrByFQ@mail.gmail.com>

Siva,

Centroid of a polygon need not coincide with the centroid of it's buffer.


On Tue, Feb 19, 2013 at 11:21 AM, SIVA RAMA KRISHNA
<s.r.kriishna at gmail.com>wrote:

> Dear All,
>
> I am just working on  Shape files I am unable to detect duplicate
> centroids in a shape file
>
> .After buffering a polygon does centroids of both will match
>
>
>
> Any help in greatly  appreciated
>
>
> With Regards
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130219/9e2835cb/attachment-0001.html>

From Sjur.A.Kolberg at sintef.no  Tue Feb 19 05:10:02 2013
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Tue, 19 Feb 2013 13:10:02 +0000
Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta1
In-Reply-To: <CA+YzLBd3k+tN+4tvahwpkjFNzt8_Dsv=RjghkF7QpPd4Ge_GCQ@mail.gmail.com>
References: <CA+YzLBd3k+tN+4tvahwpkjFNzt8_Dsv=RjghkF7QpPd4Ge_GCQ@mail.gmail.com>
Message-ID: <BA73879899D42842BC5BBF1BFB9AF33F377D2D7B@SINTEFEXMBX04.sintef.no>

Hello,

The announcement of GDAL/OGR 1.10 beta1 almost a month ago spawned only a few comments regarding EXIF metadata. I apologize for not having the time to test it myself, but is there a RC lurking around the corner?

Sjur  :-)




> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-
> bounces at lists.osgeo.org] On Behalf Of Frank Warmerdam
> Sent: 21. januar 2013 21:37
> To: gdal dev
> Subject: [gdal-dev] GDAL/OGR 1.10.0 Beta1
> 
> Folks,
> 
> A  month or more later than I intended, I have prepared a GDAL/OGR 1.10 first
> beta release.
> 
>   http://download.osgeo.org/gdal/gdal-1.10.0beta1.tar.gz
> 
> The NEWS for the release can be found at the top of:
> 
>   http://svn.osgeo.org/gdal/trunk/gdal/NEWS
> 
> Please do some testing and file bugs for issues that
> need to be fixed.   Also feel free to make noise on
> existing bugs that ought to be fixed before 1.10 is released.
> 
> I hope to do another beta or two and then a release candidate.
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From yehil at rafael.co.il  Tue Feb 19 07:09:25 2013
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Tue, 19 Feb 2013 17:09:25 +0200
Subject: [gdal-dev] Transform from ground control points
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0CB21BA283C@MAILBOXSERVER.rf.local>

Hi
I have an image with 4 control points at the 4 corners. From my understanding, this defines a perspective linear transform (not necesserally affine).
I'm trying to warp it into an orthophoto.
from what I see in the gdalgcptransform code it seems that only an affine transform is created. Is it the correct way of doing this projection, or is gdalgcptransform not the correct way of doing it?
thanks
yehiyam livneh
________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.

From warmerdam at pobox.com  Tue Feb 19 08:26:41 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 19 Feb 2013 08:26:41 -0800
Subject: [gdal-dev] Multiple extensions in GDAL_DMD_EXTENSION ?
In-Reply-To: <CAEVk4t2+QDerE=8v6MWqXtr-6gdLwOkEGWo=TX8CR0GpJOYxUg@mail.gmail.com>
References: <CAEVk4t2+QDerE=8v6MWqXtr-6gdLwOkEGWo=TX8CR0GpJOYxUg@mail.gmail.com>
Message-ID: <CA+YzLBe+Uqi4dFsXrgHp535L1bqnfxoZSZw9WUPTKvP9KvAk4w@mail.gmail.com>

I am not aware of a way to list multiple extensions.

Best regards,
 On Feb 19, 2013 2:15 AM, "Oyvind Idland" <oyvind.idland at gmail.com> wrote:

> Is it possible to specify multiple file extensions in GDAL_DMD_EXTENSION ?
>
> I ask because I am working on a driver for a format that has several known
> file extensions.
>
>
> - Oyvind
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130219/b76d82d9/attachment.html>

From etourigny.dev at gmail.com  Tue Feb 19 09:39:59 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 19 Feb 2013 12:39:59 -0500
Subject: [gdal-dev] Multiple extensions in GDAL_DMD_EXTENSION ?
In-Reply-To: <CA+YzLBe+Uqi4dFsXrgHp535L1bqnfxoZSZw9WUPTKvP9KvAk4w@mail.gmail.com>
References: <CAEVk4t2+QDerE=8v6MWqXtr-6gdLwOkEGWo=TX8CR0GpJOYxUg@mail.gmail.com>
	<CA+YzLBe+Uqi4dFsXrgHp535L1bqnfxoZSZw9WUPTKvP9KvAk4w@mail.gmail.com>
Message-ID: <CA+TxYvPw8Zy0_OxuJ9PdEa38nevnQUWhVCwZ9nYWNieOorOCag@mail.gmail.com>

It would be nice to be able to specify many extensions in a
comma-separated list such as "nc,cdf,nc4". It can probably be done
(metadata is just a string), but isn't standard.

The Gdal driver tutorial states:
GDAL_DMD_EXTENSION: The extension used for files of this type. If more
than one pick the primary extension, or none at all. (optional)

It could be beneficial to extend this definition for multiple
extensions separated by comma.

cheers
Etienne

On Tue, Feb 19, 2013 at 11:26 AM, Frank Warmerdam <warmerdam at pobox.com> wrote:
> I am not aware of a way to list multiple extensions.
>
> Best regards,
>
> On Feb 19, 2013 2:15 AM, "Oyvind Idland" <oyvind.idland at gmail.com> wrote:
>>
>> Is it possible to specify multiple file extensions in GDAL_DMD_EXTENSION ?
>>
>> I ask because I am working on a driver for a format that has several known
>> file extensions.
>>
>>
>> - Oyvind
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From oyvind.idland at gmail.com  Tue Feb 19 09:54:13 2013
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Tue, 19 Feb 2013 18:54:13 +0100
Subject: [gdal-dev] Multiple extensions in GDAL_DMD_EXTENSION ?
In-Reply-To: <CA+TxYvPw8Zy0_OxuJ9PdEa38nevnQUWhVCwZ9nYWNieOorOCag@mail.gmail.com>
References: <CAEVk4t2+QDerE=8v6MWqXtr-6gdLwOkEGWo=TX8CR0GpJOYxUg@mail.gmail.com>
	<CA+YzLBe+Uqi4dFsXrgHp535L1bqnfxoZSZw9WUPTKvP9KvAk4w@mail.gmail.com>
	<CA+TxYvPw8Zy0_OxuJ9PdEa38nevnQUWhVCwZ9nYWNieOorOCag@mail.gmail.com>
Message-ID: <CAEVk4t3Qzsa4SrdctHd3XcKCJk8SvpXC+fo1zCW7M4OziMOHHA@mail.gmail.com>

For backward compability, an additional variable (eg.
GDAL_DMD_EXTENSION_ALT or something like that) could be added with a
specified format.

- Oyvind

On Tue, Feb 19, 2013 at 6:39 PM, Etienne Tourigny
<etourigny.dev at gmail.com>wrote:

> It would be nice to be able to specify many extensions in a
> comma-separated list such as "nc,cdf,nc4". It can probably be done
> (metadata is just a string), but isn't standard.
>
> The Gdal driver tutorial states:
> GDAL_DMD_EXTENSION: The extension used for files of this type. If more
> than one pick the primary extension, or none at all. (optional)
>
> It could be beneficial to extend this definition for multiple
> extensions separated by comma.
>
> cheers
> Etienne
>
> On Tue, Feb 19, 2013 at 11:26 AM, Frank Warmerdam <warmerdam at pobox.com>
> wrote:
> > I am not aware of a way to list multiple extensions.
> >
> > Best regards,
> >
> > On Feb 19, 2013 2:15 AM, "Oyvind Idland" <oyvind.idland at gmail.com>
> wrote:
> >>
> >> Is it possible to specify multiple file extensions in
> GDAL_DMD_EXTENSION ?
> >>
> >> I ask because I am working on a driver for a format that has several
> known
> >> file extensions.
> >>
> >>
> >> - Oyvind
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130219/be09a686/attachment.html>

From warmerdam at pobox.com  Tue Feb 19 09:59:47 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 19 Feb 2013 09:59:47 -0800
Subject: [gdal-dev] Multiple extensions in GDAL_DMD_EXTENSION ?
In-Reply-To: <CA+TxYvPw8Zy0_OxuJ9PdEa38nevnQUWhVCwZ9nYWNieOorOCag@mail.gmail.com>
References: <CAEVk4t2+QDerE=8v6MWqXtr-6gdLwOkEGWo=TX8CR0GpJOYxUg@mail.gmail.com>
	<CA+YzLBe+Uqi4dFsXrgHp535L1bqnfxoZSZw9WUPTKvP9KvAk4w@mail.gmail.com>
	<CA+TxYvPw8Zy0_OxuJ9PdEa38nevnQUWhVCwZ9nYWNieOorOCag@mail.gmail.com>
Message-ID: <CA+YzLBfGyopGsRWWqjon4E9e3=GrFY9kPrLeYBi73EY2T51aiw@mail.gmail.com>

On Tue, Feb 19, 2013 at 9:39 AM, Etienne Tourigny
<etourigny.dev at gmail.com> wrote:
> It would be nice to be able to specify many extensions in a
> comma-separated list such as "nc,cdf,nc4". It can probably be done
> (metadata is just a string), but isn't standard.
>
> The Gdal driver tutorial states:
> GDAL_DMD_EXTENSION: The extension used for files of this type. If more
> than one pick the primary extension, or none at all. (optional)
>
> It could be beneficial to extend this definition for multiple
> extensions separated by comma.

Etienne,

The challenge is to do this without breaking lots of applications that
expect it to be a single extension.  If we were to pursue this, I'd
almost prefer to add GDAL_DMD_EXTENSION_LIST as a list of extensions
that relate to this driver, and GDAL_DMD_EXTENSION would be the
primary or preferred extension.

But I'm still not all that keen.  I see the GDAL_DMD_EXTENSION as
existing primarily so that applications can prepare a reasonable
default filename when creating a file.  For this having a list of
extensions is not helpful.

People *usually* want a list of extensions so they can automatically
categorize the format of files on disk or to filter to only show
extensions they think GDAL supports.  I find this practice abhorrent!
 GDAL is based on the idea that file formats are discovered by
inspecting file contents rather than based on extension and I don't
want to make it too easy for applications to ignore this principle and
revert to extensions.

One other use that extensions are used for is to make it easy for a
user to filter down files in a file browser to just one format.  I
can't think of any time I've found this useful.  But with GDAL there
are so many formats that these "list of formats" filter dohickyies are
usually completely unusable.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From jefflacostegdal at gmail.com  Tue Feb 19 10:29:01 2013
From: jefflacostegdal at gmail.com (Jeff Lacoste)
Date: Tue, 19 Feb 2013 13:29:01 -0500
Subject: [gdal-dev] gdal_polygonize and polygon edges
Message-ID: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>

Hi,

I'm using gdal_polygonize.py <http://gdal.org/gdal_polygonize.html> to
create polygon from a grid and the output polygons seems to follow the edges
of the grid pixels. I was wondering if there is any way to change/edit the
code to instead of following the edges
of the pixels, use the center of the pixels as the nodes of the created
polygons ?

So instead of a polygon following the edges of the pixels, it will instead
be passing through the center of the connected
pixels... This is to avoid having a scale effect of following the pixels
edges.

Thanks

Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130219/c688f3a1/attachment-0001.html>

From warmerdam at pobox.com  Tue Feb 19 10:44:49 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 19 Feb 2013 10:44:49 -0800
Subject: [gdal-dev] gdal_polygonize and polygon edges
In-Reply-To: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>
References: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>
Message-ID: <CA+YzLBdT19QOuCr9krzY5C5U2CdZ26yRrRzPwsBX_RuKHMQC7g@mail.gmail.com>

On Tue, Feb 19, 2013 at 10:29 AM, Jeff Lacoste
<jefflacostegdal at gmail.com> wrote:
> Hi,
>
> I'm using gdal_polygonize.py to create polygon from a grid and the output
> polygons seems to follow the edges
> of the grid pixels. I was wondering if there is any way to change/edit the
> code to instead of following the edges
> of the pixels, use the center of the pixels as the nodes of the created
> polygons ?
>
> So instead of a polygon following the edges of the pixels, it will instead
> be passing through the center of the connected
> pixels... This is to avoid having a scale effect of following the pixels
> edges.

Jeff,

With the current algorithm, this is not really possible.

I am also not clear what it would mean to go from pixel center to
pixel center.  The algorithm attempts to identify the borders between
regions of different pixel values and turn them into polygons.  What
does it mean to make a polygon boundary that goes through the center
of a pixel with a particular value?

Another algorithm you might want to keep in mind is the contour
generator.  It treats the the raster values as a continuous field, and
builds edges based on linear interpolation between pixel centers.
This gives a result that could pass through a pixel center if it
happens to be an exact contour level.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From jefflacostegdal at gmail.com  Tue Feb 19 11:28:31 2013
From: jefflacostegdal at gmail.com (Jeff Lacoste)
Date: Tue, 19 Feb 2013 14:28:31 -0500
Subject: [gdal-dev] gdal_polygonize and polygon edges
In-Reply-To: <CA+YzLBdT19QOuCr9krzY5C5U2CdZ26yRrRzPwsBX_RuKHMQC7g@mail.gmail.com>
References: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>
	<CA+YzLBdT19QOuCr9krzY5C5U2CdZ26yRrRzPwsBX_RuKHMQC7g@mail.gmail.com>
Message-ID: <CAFOE_BeZ4kwUFLX2CC7PcC=nsb3gVoe3yw2Eu=Lzg2FyLCno6A@mail.gmail.com>

Hi Frank,

Thanks for your quick response. Following the edges of the pixels seems a
perfect solution for non continuous grid (ex. land use, etc.) as
the boundary between the class is important to keep when constructing the
polygon. However for continuous grid (.ex elevations), the boundaries are
a bit not clear and not clear cut. When following the pixels edges, the
created polygons appear to have the stairs effect and are
less visually attractive.

I thought of a smoothing the polygons to not have *rough* edges using the
current gdal_polygonize by trying to not follow the pixels edges and use
instead of the
pixel centers. Basically do something similar to what contour generator
does by treating the raster values as continuous.

Thanks


On Tue, Feb 19, 2013 at 1:44 PM, Frank Warmerdam <warmerdam at pobox.com>wrote:

> On Tue, Feb 19, 2013 at 10:29 AM, Jeff Lacoste
> <jefflacostegdal at gmail.com> wrote:
> > Hi,
> >
> > I'm using gdal_polygonize.py to create polygon from a grid and the output
> > polygons seems to follow the edges
> > of the grid pixels. I was wondering if there is any way to change/edit
> the
> > code to instead of following the edges
> > of the pixels, use the center of the pixels as the nodes of the created
> > polygons ?
> >
> > So instead of a polygon following the edges of the pixels, it will
> instead
> > be passing through the center of the connected
> > pixels... This is to avoid having a scale effect of following the pixels
> > edges.
>
> Jeff,
>
> With the current algorithm, this is not really possible.
>
> I am also not clear what it would mean to go from pixel center to
> pixel center.  The algorithm attempts to identify the borders between
> regions of different pixel values and turn them into polygons.  What
> does it mean to make a polygon boundary that goes through the center
> of a pixel with a particular value?
>
> Another algorithm you might want to keep in mind is the contour
> generator.  It treats the the raster values as a continuous field, and
> builds edges based on linear interpolation between pixel centers.
> This gives a result that could pass through a pixel center if it
> happens to be an exact contour level.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130219/8b5742ee/attachment.html>

From warmerdam at pobox.com  Tue Feb 19 11:42:43 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 19 Feb 2013 11:42:43 -0800
Subject: [gdal-dev] gdal_polygonize and polygon edges
In-Reply-To: <CAFOE_BeZ4kwUFLX2CC7PcC=nsb3gVoe3yw2Eu=Lzg2FyLCno6A@mail.gmail.com>
References: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>
	<CA+YzLBdT19QOuCr9krzY5C5U2CdZ26yRrRzPwsBX_RuKHMQC7g@mail.gmail.com>
	<CAFOE_BeZ4kwUFLX2CC7PcC=nsb3gVoe3yw2Eu=Lzg2FyLCno6A@mail.gmail.com>
Message-ID: <CA+YzLBePTJSAe=Xa=4RVUaUZDMkPmQxZrCZHyS8bbraoYOi5EQ@mail.gmail.com>

On Tue, Feb 19, 2013 at 11:28 AM, Jeff Lacoste
<jefflacostegdal at gmail.com> wrote:
> Hi Frank,
>
> Thanks for your quick response. Following the edges of the pixels seems a
> perfect solution for non continuous grid (ex. land use, etc.) as
> the boundary between the class is important to keep when constructing the
> polygon. However for continuous grid (.ex elevations), the boundaries are
> a bit not clear and not clear cut. When following the pixels edges, the
> created polygons appear to have the stairs effect and are less visually
> attractive.
>
> I thought of a smoothing the polygons to not have *rough* edges using the
> current gdal_polygonize by trying to not follow the pixels edges and use
> instead of the
> pixel centers. Basically do something similar to what contour generator does
> by treating the raster values as continuous.

Jeff,

Ah, I see, you are looking for visually attractive polygons from
continuous fields.

I have wondered if it would be reasonable to produce a version of the
contour generator that actually produces polygon regions.  If we had
that then applying appropriate simplification to the resulting very
detailed edges should give something attractive and with reasonable
information density.  An appropriate simplification algorithm might do
this in a reasonable way for the existing polygonize output but I
don't know enough about the simplification algorithms to suggest one.

I don't think aiming for pixel centers in gdal_polygonize would really
solve the problem.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From jefflacostegdal at gmail.com  Tue Feb 19 12:12:30 2013
From: jefflacostegdal at gmail.com (Jeff Lacoste)
Date: Tue, 19 Feb 2013 15:12:30 -0500
Subject: [gdal-dev] gdal_polygonize and polygon edges
In-Reply-To: <CA+YzLBePTJSAe=Xa=4RVUaUZDMkPmQxZrCZHyS8bbraoYOi5EQ@mail.gmail.com>
References: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>
	<CA+YzLBdT19QOuCr9krzY5C5U2CdZ26yRrRzPwsBX_RuKHMQC7g@mail.gmail.com>
	<CAFOE_BeZ4kwUFLX2CC7PcC=nsb3gVoe3yw2Eu=Lzg2FyLCno6A@mail.gmail.com>
	<CA+YzLBePTJSAe=Xa=4RVUaUZDMkPmQxZrCZHyS8bbraoYOi5EQ@mail.gmail.com>
Message-ID: <CAFOE_Bc406dDzoUhAQEQzZQ1C8ZAZhHN10ZT=bnv5_qUT00RNA@mail.gmail.com>

Yes visually attractive or smooth polygons is the goal. Thanks again Frank.

Doing a web search about simplification algorithm i found one named
'*Ramer-Douglas?Peucker'
(*http://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm).
It appears that 'Geos'' library implement this algorithm. Is this algorithm
exposed through OGR ?

Could this algorithm help smoothing a polygon without necessary make the
new nodes too far from the original one ? Or may be there
are other *more* recommended algorithms ?

If any one could suggest a simplification algorithm or had some experience
with smoothing polygons, I appreciate their input.

Thanks

Jeff




On Tue, Feb 19, 2013 at 2:42 PM, Frank Warmerdam <warmerdam at pobox.com>wrote:

> On Tue, Feb 19, 2013 at 11:28 AM, Jeff Lacoste
> <jefflacostegdal at gmail.com> wrote:
> > Hi Frank,
> >
> > Thanks for your quick response. Following the edges of the pixels seems a
> > perfect solution for non continuous grid (ex. land use, etc.) as
> > the boundary between the class is important to keep when constructing the
> > polygon. However for continuous grid (.ex elevations), the boundaries are
> > a bit not clear and not clear cut. When following the pixels edges, the
> > created polygons appear to have the stairs effect and are less visually
> > attractive.
> >
> > I thought of a smoothing the polygons to not have *rough* edges using the
> > current gdal_polygonize by trying to not follow the pixels edges and use
> > instead of the
> > pixel centers. Basically do something similar to what contour generator
> does
> > by treating the raster values as continuous.
>
> Jeff,
>
> Ah, I see, you are looking for visually attractive polygons from
> continuous fields.
>
> I have wondered if it would be reasonable to produce a version of the
> contour generator that actually produces polygon regions.  If we had
> that then applying appropriate simplification to the resulting very
> detailed edges should give something attractive and with reasonable
> information density.  An appropriate simplification algorithm might do
> this in a reasonable way for the existing polygonize output but I
> don't know enough about the simplification algorithms to suggest one.
>
> I don't think aiming for pixel centers in gdal_polygonize would really
> solve the problem.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130219/8b595e13/attachment.html>

From warmerdam at pobox.com  Tue Feb 19 12:25:11 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 19 Feb 2013 12:25:11 -0800
Subject: [gdal-dev] gdal_polygonize and polygon edges
In-Reply-To: <CAFOE_Bc406dDzoUhAQEQzZQ1C8ZAZhHN10ZT=bnv5_qUT00RNA@mail.gmail.com>
References: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>
	<CA+YzLBdT19QOuCr9krzY5C5U2CdZ26yRrRzPwsBX_RuKHMQC7g@mail.gmail.com>
	<CAFOE_BeZ4kwUFLX2CC7PcC=nsb3gVoe3yw2Eu=Lzg2FyLCno6A@mail.gmail.com>
	<CA+YzLBePTJSAe=Xa=4RVUaUZDMkPmQxZrCZHyS8bbraoYOi5EQ@mail.gmail.com>
	<CAFOE_Bc406dDzoUhAQEQzZQ1C8ZAZhHN10ZT=bnv5_qUT00RNA@mail.gmail.com>
Message-ID: <CA+YzLBcX4pPuzTibtT4G8B2xTsN0OnuJ=SQfvnteTGEpZGHR=w@mail.gmail.com>

Jeff,

I believe this is exposed in ogr2ogr using the -simplify argument:

-simplify tolerance:
(starting with GDAL 1.9.0) distance tolerance for simplification.
Note: the algorithm used preserves topology per feature, in particular
for polygon geometries, but not for a whole layer.

Best regards,
Frank

On Tue, Feb 19, 2013 at 12:12 PM, Jeff Lacoste
<jefflacostegdal at gmail.com> wrote:
> Yes visually attractive or smooth polygons is the goal. Thanks again Frank.
>
> Doing a web search about simplification algorithm i found one named
> 'Ramer-Douglas?Peucker'
> (http://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm).
> It appears that 'Geos'' library implement this algorithm. Is this algorithm
> exposed through OGR ?
>
> Could this algorithm help smoothing a polygon without necessary make the new
> nodes too far from the original one ? Or may be there
> are other *more* recommended algorithms ?
>
> If any one could suggest a simplification algorithm or had some experience
> with smoothing polygons, I appreciate their input.
>
> Thanks
>
> Jeff
>
>
>
>
> On Tue, Feb 19, 2013 at 2:42 PM, Frank Warmerdam <warmerdam at pobox.com>
> wrote:
>>
>> On Tue, Feb 19, 2013 at 11:28 AM, Jeff Lacoste
>> <jefflacostegdal at gmail.com> wrote:
>> > Hi Frank,
>> >
>> > Thanks for your quick response. Following the edges of the pixels seems
>> > a
>> > perfect solution for non continuous grid (ex. land use, etc.) as
>> > the boundary between the class is important to keep when constructing
>> > the
>> > polygon. However for continuous grid (.ex elevations), the boundaries
>> > are
>> > a bit not clear and not clear cut. When following the pixels edges, the
>> > created polygons appear to have the stairs effect and are less visually
>> > attractive.
>> >
>> > I thought of a smoothing the polygons to not have *rough* edges using
>> > the
>> > current gdal_polygonize by trying to not follow the pixels edges and use
>> > instead of the
>> > pixel centers. Basically do something similar to what contour generator
>> > does
>> > by treating the raster values as continuous.
>>
>> Jeff,
>>
>> Ah, I see, you are looking for visually attractive polygons from
>> continuous fields.
>>
>> I have wondered if it would be reasonable to produce a version of the
>> contour generator that actually produces polygon regions.  If we had
>> that then applying appropriate simplification to the resulting very
>> detailed edges should give something attractive and with reasonable
>> information density.  An appropriate simplification algorithm might do
>> this in a reasonable way for the existing polygonize output but I
>> don't know enough about the simplification algorithms to suggest one.
>>
>> I don't think aiming for pixel centers in gdal_polygonize would really
>> solve the problem.
>>
>> Best regards,
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam at pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
>
>



--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From jefflacostegdal at gmail.com  Tue Feb 19 12:31:39 2013
From: jefflacostegdal at gmail.com (Jeff Lacoste)
Date: Tue, 19 Feb 2013 15:31:39 -0500
Subject: [gdal-dev] gdal_polygonize and polygon edges
In-Reply-To: <CA+YzLBcX4pPuzTibtT4G8B2xTsN0OnuJ=SQfvnteTGEpZGHR=w@mail.gmail.com>
References: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>
	<CA+YzLBdT19QOuCr9krzY5C5U2CdZ26yRrRzPwsBX_RuKHMQC7g@mail.gmail.com>
	<CAFOE_BeZ4kwUFLX2CC7PcC=nsb3gVoe3yw2Eu=Lzg2FyLCno6A@mail.gmail.com>
	<CA+YzLBePTJSAe=Xa=4RVUaUZDMkPmQxZrCZHyS8bbraoYOi5EQ@mail.gmail.com>
	<CAFOE_Bc406dDzoUhAQEQzZQ1C8ZAZhHN10ZT=bnv5_qUT00RNA@mail.gmail.com>
	<CA+YzLBcX4pPuzTibtT4G8B2xTsN0OnuJ=SQfvnteTGEpZGHR=w@mail.gmail.com>
Message-ID: <CAFOE_BfuMWepEtVUJopGEtH-y9rOup1dt2UFY=VJWsYyxcE-=g@mail.gmail.com>

Thank you Frank ! Very much appreciated. I'll give 'Simplify' option a try.

Jeff


On Tue, Feb 19, 2013 at 3:25 PM, Frank Warmerdam <warmerdam at pobox.com>wrote:

> Jeff,
>
> I believe this is exposed in ogr2ogr using the -simplify argument:
>
> -simplify tolerance:
> (starting with GDAL 1.9.0) distance tolerance for simplification.
> Note: the algorithm used preserves topology per feature, in particular
> for polygon geometries, but not for a whole layer.
>
> Best regards,
> Frank
>
> On Tue, Feb 19, 2013 at 12:12 PM, Jeff Lacoste
> <jefflacostegdal at gmail.com> wrote:
> > Yes visually attractive or smooth polygons is the goal. Thanks again
> Frank.
> >
> > Doing a web search about simplification algorithm i found one named
> > 'Ramer-Douglas?Peucker'
> > (http://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm).
> > It appears that 'Geos'' library implement this algorithm. Is this
> algorithm
> > exposed through OGR ?
> >
> > Could this algorithm help smoothing a polygon without necessary make the
> new
> > nodes too far from the original one ? Or may be there
> > are other *more* recommended algorithms ?
> >
> > If any one could suggest a simplification algorithm or had some
> experience
> > with smoothing polygons, I appreciate their input.
> >
> > Thanks
> >
> > Jeff
> >
> >
> >
> >
> > On Tue, Feb 19, 2013 at 2:42 PM, Frank Warmerdam <warmerdam at pobox.com>
> > wrote:
> >>
> >> On Tue, Feb 19, 2013 at 11:28 AM, Jeff Lacoste
> >> <jefflacostegdal at gmail.com> wrote:
> >> > Hi Frank,
> >> >
> >> > Thanks for your quick response. Following the edges of the pixels
> seems
> >> > a
> >> > perfect solution for non continuous grid (ex. land use, etc.) as
> >> > the boundary between the class is important to keep when constructing
> >> > the
> >> > polygon. However for continuous grid (.ex elevations), the boundaries
> >> > are
> >> > a bit not clear and not clear cut. When following the pixels edges,
> the
> >> > created polygons appear to have the stairs effect and are less
> visually
> >> > attractive.
> >> >
> >> > I thought of a smoothing the polygons to not have *rough* edges using
> >> > the
> >> > current gdal_polygonize by trying to not follow the pixels edges and
> use
> >> > instead of the
> >> > pixel centers. Basically do something similar to what contour
> generator
> >> > does
> >> > by treating the raster values as continuous.
> >>
> >> Jeff,
> >>
> >> Ah, I see, you are looking for visually attractive polygons from
> >> continuous fields.
> >>
> >> I have wondered if it would be reasonable to produce a version of the
> >> contour generator that actually produces polygon regions.  If we had
> >> that then applying appropriate simplification to the resulting very
> >> detailed edges should give something attractive and with reasonable
> >> information density.  An appropriate simplification algorithm might do
> >> this in a reasonable way for the existing polygonize output but I
> >> don't know enough about the simplification algorithms to suggest one.
> >>
> >> I don't think aiming for pixel centers in gdal_polygonize would really
> >> solve the problem.
> >>
> >> Best regards,
> >> --
> >>
> >>
> ---------------------------------------+--------------------------------------
> >> I set the clouds in motion - turn up   | Frank Warmerdam,
> >> warmerdam at pobox.com
> >> light and sound - activate the windows | http://pobox.com/~warmerdam
> >> and watch the world go round - Rush    | Geospatial Software Developer
> >
> >
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130219/24890e7b/attachment.html>

From dmorissette at mapgears.com  Tue Feb 19 12:35:01 2013
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 19 Feb 2013 15:35:01 -0500
Subject: [gdal-dev] gdal_polygonize and polygon edges
In-Reply-To: <CAFOE_Bc406dDzoUhAQEQzZQ1C8ZAZhHN10ZT=bnv5_qUT00RNA@mail.gmail.com>
References: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>
	<CA+YzLBdT19QOuCr9krzY5C5U2CdZ26yRrRzPwsBX_RuKHMQC7g@mail.gmail.com>
	<CAFOE_BeZ4kwUFLX2CC7PcC=nsb3gVoe3yw2Eu=Lzg2FyLCno6A@mail.gmail.com>
	<CA+YzLBePTJSAe=Xa=4RVUaUZDMkPmQxZrCZHyS8bbraoYOi5EQ@mail.gmail.com>
	<CAFOE_Bc406dDzoUhAQEQzZQ1C8ZAZhHN10ZT=bnv5_qUT00RNA@mail.gmail.com>
Message-ID: <5123E1F5.20008@mapgears.com>

Hi Jeff,

FYI we have been working on smoothing contours produced by gdal_contour, 
and one of the issues that we encountered was having to deal with that 
same stair effect (even with contours we get it in some cases). I don't 
think that simplifying your polygons will be enough in your case, you 
really need to do some smoothing, possibly combined with some level of 
simplification (or not) depending on the scale at which you look at the 
data (this is what we found anyway).

We found the following article describing a "Smoothing via Iterative 
Averaging" technique:

   http://www.ijcee.org/papers/501-P063.pdf

this technique is kind of simple but we found that it works better than 
others on contours produced by sampling raster input like GDAL does. For 
instance, bezier curves may sound like the obvious asnwer but they tend 
to create overshoots in some situations which resulted in countours 
crossing each other.

We ended up with an algorithm based on this SIA technique (plus a few 
tweaks) which smooths the stair effects and tends to pass close to the 
orginal points in most cases and most importantly does not produce 
crossing contours.

We are going to share our code and results in the coming months (this 
was done for MapServer), we are just not ready yet unfortunately.

Daniel


On 13-02-19 3:12 PM, Jeff Lacoste wrote:
> Yes visually attractive or smooth polygons is the goal. Thanks again Frank.
>
> Doing a web search about simplification algorithm i found one named
> '*Ramer-Douglas?Peucker'
> (*http://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm).
> It appears that 'Geos'' library implement this algorithm. Is this
> algorithm exposed through OGR ?
>
> Could this algorithm help smoothing a polygon without necessary make the
> new nodes too far from the original one ? Or may be there
> are other *more* recommended algorithms ?
>
> If any one could suggest a simplification algorithm or had some
> experience with smoothing polygons, I appreciate their input.
>
> Thanks
>
> Jeff
>
>
>
>
> On Tue, Feb 19, 2013 at 2:42 PM, Frank Warmerdam <warmerdam at pobox.com
> <mailto:warmerdam at pobox.com>> wrote:
>
>     On Tue, Feb 19, 2013 at 11:28 AM, Jeff Lacoste
>     <jefflacostegdal at gmail.com <mailto:jefflacostegdal at gmail.com>> wrote:
>      > Hi Frank,
>      >
>      > Thanks for your quick response. Following the edges of the pixels
>     seems a
>      > perfect solution for non continuous grid (ex. land use, etc.) as
>      > the boundary between the class is important to keep when
>     constructing the
>      > polygon. However for continuous grid (.ex elevations), the
>     boundaries are
>      > a bit not clear and not clear cut. When following the pixels
>     edges, the
>      > created polygons appear to have the stairs effect and are less
>     visually
>      > attractive.
>      >
>      > I thought of a smoothing the polygons to not have *rough* edges
>     using the
>      > current gdal_polygonize by trying to not follow the pixels edges
>     and use
>      > instead of the
>      > pixel centers. Basically do something similar to what contour
>     generator does
>      > by treating the raster values as continuous.
>
>     Jeff,
>
>     Ah, I see, you are looking for visually attractive polygons from
>     continuous fields.
>
>     I have wondered if it would be reasonable to produce a version of the
>     contour generator that actually produces polygon regions.  If we had
>     that then applying appropriate simplification to the resulting very
>     detailed edges should give something attractive and with reasonable
>     information density.  An appropriate simplification algorithm might do
>     this in a reasonable way for the existing polygonize output but I
>     don't know enough about the simplification algorithms to suggest one.
>
>     I don't think aiming for pixel centers in gdal_polygonize would really
>     solve the problem.
>
>     Best regards,
>     --
>     ---------------------------------------+--------------------------------------
>     I set the clouds in motion - turn up   | Frank Warmerdam,
>     warmerdam at pobox.com <mailto:warmerdam at pobox.com>
>     light and sound - activate the windows | http://pobox.com/~warmerdam
>     and watch the world go round - Rush    | Geospatial Software Developer
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From admin at michiganwxsystem.com  Tue Feb 19 12:31:52 2013
From: admin at michiganwxsystem.com (Jeff Lake)
Date: Tue, 19 Feb 2013 15:31:52 -0500
Subject: [gdal-dev] gdal_polygonize and polygon edges
In-Reply-To: <CAFOE_Bc406dDzoUhAQEQzZQ1C8ZAZhHN10ZT=bnv5_qUT00RNA@mail.gmail.com>
References: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>
	<CA+YzLBdT19QOuCr9krzY5C5U2CdZ26yRrRzPwsBX_RuKHMQC7g@mail.gmail.com>
	<CAFOE_BeZ4kwUFLX2CC7PcC=nsb3gVoe3yw2Eu=Lzg2FyLCno6A@mail.gmail.com>
	<CA+YzLBePTJSAe=Xa=4RVUaUZDMkPmQxZrCZHyS8bbraoYOi5EQ@mail.gmail.com>
	<CAFOE_Bc406dDzoUhAQEQzZQ1C8ZAZhHN10ZT=bnv5_qUT00RNA@mail.gmail.com>
Message-ID: <5123E138.4060505@michiganwxsystem.com>

It all depends on the data your having gdal_polygonize contour ...

here is a snippet of what I'm doing with a csv I'm creating of current 
weather

/usr/local/bin/gdal_grid -zfield "temp" -a 
invdist:power=2.0:smoothing=1:nodata=-9999 -outsize 800 600 -l temp 
/var/www/html/metar/temp.vrt /var/www/html/metar/temp.tif
python /usr/local/bin/gdal_polygonize.py /var/www/html/metar/temp.tif -f 
"ESRI Shapefile" /var/www/html/metar/temp/temp.shp temp temp

and then the resulting shapefile is used to create the following
http://www.michiganwxsystem.com/maps/curfore/

I have messed around with the 'power' and 'smoothing' settings these 
seem the remove the stair steps quite well


-----------------------------------------------------
-Jeff Lake
MichiganWxSystem.com
AllisonHouse.com
TheWeatherCenter.net
GRLevelXStuff.com

On 2/19/2013 15:12, Jeff Lacoste wrote:
> Yes visually attractive or smooth polygons is the goal. Thanks again 
> Frank.
>
> Doing a web search about simplification algorithm i found one named 
> '*Ramer-Douglas--Peucker' 
> (*http://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm).
> It appears that 'Geos'' library implement this algorithm. Is this 
> algorithm exposed through OGR ?
>
> Could this algorithm help smoothing a polygon without necessary make 
> the new nodes too far from the original one ? Or may be there
> are other *more* recommended algorithms ?
>
> If any one could suggest a simplification algorithm or had some 
> experience with smoothing polygons, I appreciate their input.
>
> Thanks
>
> Jeff
>
>
>
>
> On Tue, Feb 19, 2013 at 2:42 PM, Frank Warmerdam <warmerdam at pobox.com 
> <mailto:warmerdam at pobox.com>> wrote:
>
>     On Tue, Feb 19, 2013 at 11:28 AM, Jeff Lacoste
>     <jefflacostegdal at gmail.com <mailto:jefflacostegdal at gmail.com>> wrote:
>     > Hi Frank,
>     >
>     > Thanks for your quick response. Following the edges of the
>     pixels seems a
>     > perfect solution for non continuous grid (ex. land use, etc.) as
>     > the boundary between the class is important to keep when
>     constructing the
>     > polygon. However for continuous grid (.ex elevations), the
>     boundaries are
>     > a bit not clear and not clear cut. When following the pixels
>     edges, the
>     > created polygons appear to have the stairs effect and are less
>     visually
>     > attractive.
>     >
>     > I thought of a smoothing the polygons to not have *rough* edges
>     using the
>     > current gdal_polygonize by trying to not follow the pixels edges
>     and use
>     > instead of the
>     > pixel centers. Basically do something similar to what contour
>     generator does
>     > by treating the raster values as continuous.
>
>     Jeff,
>
>     Ah, I see, you are looking for visually attractive polygons from
>     continuous fields.
>
>     I have wondered if it would be reasonable to produce a version of the
>     contour generator that actually produces polygon regions.  If we had
>     that then applying appropriate simplification to the resulting very
>     detailed edges should give something attractive and with reasonable
>     information density.  An appropriate simplification algorithm might do
>     this in a reasonable way for the existing polygonize output but I
>     don't know enough about the simplification algorithms to suggest one.
>
>     I don't think aiming for pixel centers in gdal_polygonize would really
>     solve the problem.
>
>     Best regards,
>     --
>     ---------------------------------------+--------------------------------------
>     I set the clouds in motion - turn up   | Frank Warmerdam,
>     warmerdam at pobox.com <mailto:warmerdam at pobox.com>
>     light and sound - activate the windows |
>     http://pobox.com/~warmerdam <http://pobox.com/%7Ewarmerdam>
>     and watch the world go round - Rush    | Geospatial Software Developer
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130219/4a4dcdab/attachment.html>

From david.fawcett at gmail.com  Tue Feb 19 13:26:53 2013
From: david.fawcett at gmail.com (David Fawcett)
Date: Tue, 19 Feb 2013 15:26:53 -0600
Subject: [gdal-dev] ogr utilities -dsco
Message-ID: <CAF7K3b_zi7qNRvYnDPH4HeNxYkN9gAz8ZXow9jUUtNRtszGzEA@mail.gmail.com>

OK GDAL Devs, I give up.

If I want to specify multiple -dsco key:value with OGR, what is the
syntax?

This works for one attribute:

R:\mpca>ogr2ogr -f "KML" impaired_streams_2010.kml
impaired_2010_streams.shp -ds
co NameField=AUID

But none of these work for two attributes:

R:\mpca>ogr2ogr -f "KML" test.kml impaired_2010_streams.shp -dsco
NameField=AUID,DescriptionField=REACH_DESC

R:\mpca>ogr2ogr -f "KML" test2.kml impaired_2010_streams.shp -dsco
NameField=AUID DescriptionField=REACH_DESC
FAILURE: Couldn't fetch requested layer 'DescriptionField=REACH_DESC'!

R:\mpca>ogr2ogr -f "KML" test2.kml impaired_2010_streams.shp -dsco
"NameField=AUID DescriptionField=REACH_DESC"

R:\mpca>ogr2ogr -f "KML" test3.kml impaired_2010_streams.shp -dsco
NameField=AUID -dsco DescriptionField=REACH_DESC

R:\mpca>ogr2ogr -f "KML" test4.kml impaired_2010_streams.shp -dsco
"NameField=AUID,DescriptionField=REACH_DESC"

Thanks,

David.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130219/6c3c8b1f/attachment.html>

From kyle at pobox.com  Tue Feb 19 13:33:42 2013
From: kyle at pobox.com (Kyle Shannon)
Date: Tue, 19 Feb 2013 14:33:42 -0700
Subject: [gdal-dev] ogr utilities -dsco
In-Reply-To: <CAF7K3b_zi7qNRvYnDPH4HeNxYkN9gAz8ZXow9jUUtNRtszGzEA@mail.gmail.com>
References: <CAF7K3b_zi7qNRvYnDPH4HeNxYkN9gAz8ZXow9jUUtNRtszGzEA@mail.gmail.com>
Message-ID: <CAJ0mEz16BONf4yFxpP7cv_dwtz9H5VhWxLBT0dUvX57wQBEghA@mail.gmail.com>

Use one -dsco flag for each option:

ogr2ogr -f KML impaired_streams_2010.kml impaired_2010_streams.shp
-dsco NameField=AUID -dsco DescriptionField=REACH_DESC

On Tue, Feb 19, 2013 at 2:26 PM, David Fawcett <david.fawcett at gmail.com> wrote:
> OK GDAL Devs, I give up.
>
> If I want to specify multiple -dsco key:value with OGR, what is the syntax?
>
> This works for one attribute:
>
> R:\mpca>ogr2ogr -f "KML" impaired_streams_2010.kml impaired_2010_streams.shp
> -ds
> co NameField=AUID
>
> But none of these work for two attributes:
>
> R:\mpca>ogr2ogr -f "KML" test.kml impaired_2010_streams.shp -dsco
> NameField=AUID,DescriptionField=REACH_DESC
>
> R:\mpca>ogr2ogr -f "KML" test2.kml impaired_2010_streams.shp -dsco
> NameField=AUID DescriptionField=REACH_DESC
> FAILURE: Couldn't fetch requested layer 'DescriptionField=REACH_DESC'!
>
> R:\mpca>ogr2ogr -f "KML" test2.kml impaired_2010_streams.shp -dsco
> "NameField=AUID DescriptionField=REACH_DESC"
>
> R:\mpca>ogr2ogr -f "KML" test3.kml impaired_2010_streams.shp -dsco
> NameField=AUID -dsco DescriptionField=REACH_DESC
>
> R:\mpca>ogr2ogr -f "KML" test4.kml impaired_2010_streams.shp -dsco
> "NameField=AUID,DescriptionField=REACH_DESC"
>
> Thanks,
>
> David.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Tue Feb 19 13:43:05 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 19 Feb 2013 13:43:05 -0800
Subject: [gdal-dev] ogr utilities -dsco
In-Reply-To: <CAF7K3b_zi7qNRvYnDPH4HeNxYkN9gAz8ZXow9jUUtNRtszGzEA@mail.gmail.com>
References: <CAF7K3b_zi7qNRvYnDPH4HeNxYkN9gAz8ZXow9jUUtNRtszGzEA@mail.gmail.com>
Message-ID: <CA+YzLBfiBMpp7oVMAkL-=4E6Vg7ZHTHXTaO1zHgOUKJZS8w4ow@mail.gmail.com>

David,

This should have worked.

ogr2ogr -f "KML" test3.kml impaired_2010_streams.shp -dsco
NameField=AUID -dsco DescriptionField=REACH_DESC

Did one of the options get ignored?  Was there an error?

Best regards,
Frank

On Tue, Feb 19, 2013 at 1:26 PM, David Fawcett <david.fawcett at gmail.com> wrote:
> OK GDAL Devs, I give up.
>
> If I want to specify multiple -dsco key:value with OGR, what is the syntax?
>
> This works for one attribute:
>
> R:\mpca>ogr2ogr -f "KML" impaired_streams_2010.kml impaired_2010_streams.shp
> -ds
> co NameField=AUID
>
> But none of these work for two attributes:
>
> R:\mpca>ogr2ogr -f "KML" test.kml impaired_2010_streams.shp -dsco
> NameField=AUID,DescriptionField=REACH_DESC
>
> R:\mpca>ogr2ogr -f "KML" test2.kml impaired_2010_streams.shp -dsco
> NameField=AUID DescriptionField=REACH_DESC
> FAILURE: Couldn't fetch requested layer 'DescriptionField=REACH_DESC'!
>
> R:\mpca>ogr2ogr -f "KML" test2.kml impaired_2010_streams.shp -dsco
> "NameField=AUID DescriptionField=REACH_DESC"
>
> R:\mpca>ogr2ogr -f "KML" test3.kml impaired_2010_streams.shp -dsco
> NameField=AUID -dsco DescriptionField=REACH_DESC
>
> R:\mpca>ogr2ogr -f "KML" test4.kml impaired_2010_streams.shp -dsco
> "NameField=AUID,DescriptionField=REACH_DESC"
>
> Thanks,
>
> David.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From rush at winkey.org  Tue Feb 19 14:39:16 2013
From: rush at winkey.org (Brian Case)
Date: Tue, 19 Feb 2013 14:39:16 -0800
Subject: [gdal-dev] gdal_polygonize and polygon edges
In-Reply-To: <CAFOE_BeZ4kwUFLX2CC7PcC=nsb3gVoe3yw2Eu=Lzg2FyLCno6A@mail.gmail.com>
References: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>
	<CA+YzLBdT19QOuCr9krzY5C5U2CdZ26yRrRzPwsBX_RuKHMQC7g@mail.gmail.com>
	<CAFOE_BeZ4kwUFLX2CC7PcC=nsb3gVoe3yw2Eu=Lzg2FyLCno6A@mail.gmail.com>
Message-ID: <1361313556.9390.6.camel@localhost>

a few years ago someone had posted some perl code for making polys from
the contour output.

the idea was to sort the lines into an m-way tree by contains with the
root node being the extent of the data then each node would be outer
ring and a copy of the children being the inner rings

i have done this myself and it works

Brian


On Tue, 2013-02-19 at 14:28 -0500, Jeff Lacoste wrote:
> Hi Frank,
> 
> 
> Thanks for your quick response. Following the edges of the pixels
> seems a perfect solution for non continuous grid (ex. land use, etc.)
> as
> the boundary between the class is important to keep when constructing
> the polygon. However for continuous grid (.ex elevations), the
> boundaries are
> a bit not clear and not clear cut. When following the pixels edges,
> the created polygons appear to have the stairs effect and are
> less visually attractive.
> 
> 
> I thought of a smoothing the polygons to not have *rough* edges using
> the current gdal_polygonize by trying to not follow the pixels edges
> and use instead of the
> pixel centers. Basically do something similar to what contour
> generator does by treating the raster values as continuous.
> 
> 
> Thanks
> 
> 
> On Tue, Feb 19, 2013 at 1:44 PM, Frank Warmerdam <warmerdam at pobox.com>
> wrote:
>         On Tue, Feb 19, 2013 at 10:29 AM, Jeff Lacoste
>         <jefflacostegdal at gmail.com> wrote:
>         > Hi,
>         >
>         > I'm using gdal_polygonize.py to create polygon from a grid
>         and the output
>         > polygons seems to follow the edges
>         > of the grid pixels. I was wondering if there is any way to
>         change/edit the
>         > code to instead of following the edges
>         > of the pixels, use the center of the pixels as the nodes of
>         the created
>         > polygons ?
>         >
>         > So instead of a polygon following the edges of the pixels,
>         it will instead
>         > be passing through the center of the connected
>         > pixels... This is to avoid having a scale effect of
>         following the pixels
>         > edges.
>         
>         
>         Jeff,
>         
>         With the current algorithm, this is not really possible.
>         
>         I am also not clear what it would mean to go from pixel center
>         to
>         pixel center.  The algorithm attempts to identify the borders
>         between
>         regions of different pixel values and turn them into
>         polygons.  What
>         does it mean to make a polygon boundary that goes through the
>         center
>         of a pixel with a particular value?
>         
>         Another algorithm you might want to keep in mind is the
>         contour
>         generator.  It treats the the raster values as a continuous
>         field, and
>         builds edges based on linear interpolation between pixel
>         centers.
>         This gives a result that could pass through a pixel center if
>         it
>         happens to be an exact contour level.
>         
>         Best regards,
>         --
>         ---------------------------------------+--------------------------------------
>         I set the clouds in motion - turn up   | Frank Warmerdam,
>         warmerdam at pobox.com
>         light and sound - activate the windows |
>         http://pobox.com/~warmerdam
>         and watch the world go round - Rush    | Geospatial Software
>         Developer
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Brian Case
KF7WPK
rush at winkey.org



From oyvind.idland at gmail.com  Tue Feb 19 22:59:11 2013
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Wed, 20 Feb 2013 07:59:11 +0100
Subject: [gdal-dev] Multiple extensions in GDAL_DMD_EXTENSION ?
In-Reply-To: <CA+YzLBfGyopGsRWWqjon4E9e3=GrFY9kPrLeYBi73EY2T51aiw@mail.gmail.com>
References: <CAEVk4t2+QDerE=8v6MWqXtr-6gdLwOkEGWo=TX8CR0GpJOYxUg@mail.gmail.com>
	<CA+YzLBe+Uqi4dFsXrgHp535L1bqnfxoZSZw9WUPTKvP9KvAk4w@mail.gmail.com>
	<CA+TxYvPw8Zy0_OxuJ9PdEa38nevnQUWhVCwZ9nYWNieOorOCag@mail.gmail.com>
	<CA+YzLBfGyopGsRWWqjon4E9e3=GrFY9kPrLeYBi73EY2T51aiw@mail.gmail.com>
Message-ID: <CAEVk4t3rWHPJudBuHJD+=u5oe6bXYnd+SnFGinirtunP4=UPFQ@mail.gmail.com>

People *usually* want a list of extensions so they can automatically

> categorize the format of files on disk or to filter to only show
> extensions they think GDAL supports.  I find this practice abhorrent!
>  GDAL is based on the idea that file formats are discovered by
> inspecting file contents rather than based on extension and I don't
> want to make it too easy for applications to ignore this principle and
> revert to extensions.
>
>
In this case, its about filtering files in a GUI.

I agree that its probably a good idea to keep GDAL_DMD_EXTENSION as it is
(preferred extension),
and add GDAL_DMD_EXTENSION_LIST as alternative filtering options.

And, of course documenting the intention of these, and the behaviour in
GDAL's file probing.


- Oyvind
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130220/91b3888f/attachment.html>

From grb at skogoglandskap.no  Wed Feb 20 00:28:15 2013
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Wed, 20 Feb 2013 08:28:15 +0000
Subject: [gdal-dev] gdal_polygonize and polygon edges
In-Reply-To: <mailman.14595.1361306494.1025.gdal-dev@lists.osgeo.org>
References: <mailman.14595.1361306494.1025.gdal-dev@lists.osgeo.org>
Message-ID: <E6688568-D2D7-4411-BBB8-F2BCA2A884E7@skogoglandskap.no>

> 
> 
> Yes visually attractive or smooth polygons is the goal. Thanks again Frank.
> 
> Doing a web search about simplification algorithm i found one named
> '*Ramer-Douglas?Peucker'
> (*http://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm).
> It appears that 'Geos'' library implement this algorithm. Is this algorithm
> exposed through OGR ?


You could try this:

https://github.com/gina-alaska/dans-gdal-scripts/wiki/Gdal_trace_outline

to get it

1. git clone https://github.com/gina-alaska/dans-gdal-scripts.git
2. go into the directory
3. ./configure
4. make
5. make install

It has a parameter-controlled douglas-peucker algorithm built in, and it is a lot faster than gdal_polygonize, too!

Hope this helps

Graeme.

From chaitanya.ch at gmail.com  Wed Feb 20 04:21:53 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed, 20 Feb 2013 17:51:53 +0530
Subject: [gdal-dev] To know about centriod of a polygon shape file
In-Reply-To: <CAP-zkzcFD1L8BJY5pYuGOr=ZRzkQCmbCj58edPdX55Wp+oAA_w@mail.gmail.com>
References: <CAP-zkzfQU2WCdurvnzNYdcEa0pXu_80kuJRd7YbzsgMQ3L+zUA@mail.gmail.com>
	<CAMKgpOa7T=PRWzU7e6xF6=o_C3Q+g0DEngb_qVptfrRzixzEjg@mail.gmail.com>
	<CAP-zkzcFD1L8BJY5pYuGOr=ZRzkQCmbCj58edPdX55Wp+oAA_w@mail.gmail.com>
Message-ID: <CAMKgpOb0LOFRYz7qYgf4RLRNN2TZZSdWpiQ9wmEJqV2BSHhgKg@mail.gmail.com>

Siva,

If you want to remove features with duplicate centroids, it is not safe to
use the spatial filter directly. A centroid may lie outside the geometry.

Make a duplicate layer using OGRDataSource::CopyLayer() and replace the
geometry in each feature with its centroid. So, the duplicate layer will
have all the corresponding centroids. Now you can loop through each feature
in the original layer and then get coinciding points by applying a spatial
filter on the duplicate layer.

Let us know how it went.


On Wed, Feb 20, 2013 at 12:04 PM, SIVA RAMA KRISHNA
<s.r.kriishna at gmail.com>wrote:

>  Chaitanya,
>   Fine i got your point .I wanted to know when do different  features have
> same centroids for  removing duplicate centriods
>
>    With Regards
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130220/9887f8b9/attachment.html>

From etourigny.dev at gmail.com  Wed Feb 20 06:30:21 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 20 Feb 2013 09:30:21 -0500
Subject: [gdal-dev] Multiple extensions in GDAL_DMD_EXTENSION ?
In-Reply-To: <CA+YzLBfGyopGsRWWqjon4E9e3=GrFY9kPrLeYBi73EY2T51aiw@mail.gmail.com>
References: <CAEVk4t2+QDerE=8v6MWqXtr-6gdLwOkEGWo=TX8CR0GpJOYxUg@mail.gmail.com>
	<CA+YzLBe+Uqi4dFsXrgHp535L1bqnfxoZSZw9WUPTKvP9KvAk4w@mail.gmail.com>
	<CA+TxYvPw8Zy0_OxuJ9PdEa38nevnQUWhVCwZ9nYWNieOorOCag@mail.gmail.com>
	<CA+YzLBfGyopGsRWWqjon4E9e3=GrFY9kPrLeYBi73EY2T51aiw@mail.gmail.com>
Message-ID: <CA+TxYvPwXDew7UK+JQqENcxaHqfsDL6AYFTVvJfdEXgtFAM4Ng@mail.gmail.com>

On Tue, Feb 19, 2013 at 12:59 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:
> On Tue, Feb 19, 2013 at 9:39 AM, Etienne Tourigny
> <etourigny.dev at gmail.com> wrote:
>> It would be nice to be able to specify many extensions in a
>> comma-separated list such as "nc,cdf,nc4". It can probably be done
>> (metadata is just a string), but isn't standard.
>>
>> The Gdal driver tutorial states:
>> GDAL_DMD_EXTENSION: The extension used for files of this type. If more
>> than one pick the primary extension, or none at all. (optional)
>>
>> It could be beneficial to extend this definition for multiple
>> extensions separated by comma.
>
> Etienne,
>
> The challenge is to do this without breaking lots of applications that
> expect it to be a single extension.  If we were to pursue this, I'd
> almost prefer to add GDAL_DMD_EXTENSION_LIST as a list of extensions
> that relate to this driver, and GDAL_DMD_EXTENSION would be the
> primary or preferred extension.
>
> But I'm still not all that keen.  I see the GDAL_DMD_EXTENSION as
> existing primarily so that applications can prepare a reasonable
> default filename when creating a file.  For this having a list of
> extensions is not helpful.
>
> People *usually* want a list of extensions so they can automatically
> categorize the format of files on disk or to filter to only show
> extensions they think GDAL supports.  I find this practice abhorrent!
>  GDAL is based on the idea that file formats are discovered by
> inspecting file contents rather than based on extension and I don't
> want to make it too easy for applications to ignore this principle and
> revert to extensions.

Frank,

thanks for you thorough response.

I agree that GDAL's detection is rather efficient, but sometimes it
can be relatively slow when scanning many files in a GUI.

This is admittedly a worst-case scenario, but is the reason why I
chose to optionally scan files by extension (rather than content) in
QGis - this can be enabled for specific directories.

>
> One other use that extensions are used for is to make it easy for a
> user to filter down files in a file browser to just one format.  I
> can't think of any time I've found this useful.  But with GDAL there
> are so many formats that these "list of formats" filter dohickyies are
> usually completely unusable.

Applications tend to have these, with ad-hoc rules for formats which
use various extensions (e.g. the QGis raster open dialog). This would
be simpler and more unified if extensions are reported by GDAL.

In short, I'd support a new GDAL_DMD_EXTENSION_LIST that supplements
existing GDAL_DMD_EXTENSION . I could commit such a feature in the
netcdf driver and gdalinfo output and update the docs if you agree.

Cheers
Etienne

>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer

From jefflacostegdal at gmail.com  Wed Feb 20 07:08:32 2013
From: jefflacostegdal at gmail.com (Jeff Lacoste)
Date: Wed, 20 Feb 2013 10:08:32 -0500
Subject: [gdal-dev] gdal_polygonize and polygon edges
In-Reply-To: <1361313556.9390.6.camel@localhost>
References: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>
	<CA+YzLBdT19QOuCr9krzY5C5U2CdZ26yRrRzPwsBX_RuKHMQC7g@mail.gmail.com>
	<CAFOE_BeZ4kwUFLX2CC7PcC=nsb3gVoe3yw2Eu=Lzg2FyLCno6A@mail.gmail.com>
	<1361313556.9390.6.camel@localhost>
Message-ID: <CAFOE_Bf_NtoJ9191MQwK=aq_edQfS5oZBzOo8+gAj1+VGcJrnA@mail.gmail.com>

Thanks every one who responded to my post.

Jeff: it appears that your approach involve smoothing the original grid
before generating contours (or polygons from it). Right ? It would be nice
if I could have the smoothing either as an after process operation
or ideally as an option within the polygons generation process itself.

Daniel: Using 'SIA' technique sounds promising. Does it apply to polygons
as well ? or just polylines ? I would be interested to test (and later use
if applicable) your approach.
If would like an extra tester, please let me know.

Graeme: Is your tracing technique a new algorithm different from
GDAL_Polygonize ? Is there a C/C++ code I can build or may be an .exe
utility I could use to try out ?

p.s: i did not have a chance to try out '*'Ramer-Douglas?Peucker' yet.*

Thanks
Jeff Lacoste


On Tue, Feb 19, 2013 at 5:39 PM, Brian Case <rush at winkey.org> wrote:

> a few years ago someone had posted some perl code for making polys from
> the contour output.
>
> the idea was to sort the lines into an m-way tree by contains with the
> root node being the extent of the data then each node would be outer
> ring and a copy of the children being the inner rings
>
> i have done this myself and it works
>
> Brian
>
>
> On Tue, 2013-02-19 at 14:28 -0500, Jeff Lacoste wrote:
> > Hi Frank,
> >
> >
> > Thanks for your quick response. Following the edges of the pixels
> > seems a perfect solution for non continuous grid (ex. land use, etc.)
> > as
> > the boundary between the class is important to keep when constructing
> > the polygon. However for continuous grid (.ex elevations), the
> > boundaries are
> > a bit not clear and not clear cut. When following the pixels edges,
> > the created polygons appear to have the stairs effect and are
> > less visually attractive.
> >
> >
> > I thought of a smoothing the polygons to not have *rough* edges using
> > the current gdal_polygonize by trying to not follow the pixels edges
> > and use instead of the
> > pixel centers. Basically do something similar to what contour
> > generator does by treating the raster values as continuous.
> >
> >
> > Thanks
> >
> >
> > On Tue, Feb 19, 2013 at 1:44 PM, Frank Warmerdam <warmerdam at pobox.com>
> > wrote:
> >         On Tue, Feb 19, 2013 at 10:29 AM, Jeff Lacoste
> >         <jefflacostegdal at gmail.com> wrote:
> >         > Hi,
> >         >
> >         > I'm using gdal_polygonize.py to create polygon from a grid
> >         and the output
> >         > polygons seems to follow the edges
> >         > of the grid pixels. I was wondering if there is any way to
> >         change/edit the
> >         > code to instead of following the edges
> >         > of the pixels, use the center of the pixels as the nodes of
> >         the created
> >         > polygons ?
> >         >
> >         > So instead of a polygon following the edges of the pixels,
> >         it will instead
> >         > be passing through the center of the connected
> >         > pixels... This is to avoid having a scale effect of
> >         following the pixels
> >         > edges.
> >
> >
> >         Jeff,
> >
> >         With the current algorithm, this is not really possible.
> >
> >         I am also not clear what it would mean to go from pixel center
> >         to
> >         pixel center.  The algorithm attempts to identify the borders
> >         between
> >         regions of different pixel values and turn them into
> >         polygons.  What
> >         does it mean to make a polygon boundary that goes through the
> >         center
> >         of a pixel with a particular value?
> >
> >         Another algorithm you might want to keep in mind is the
> >         contour
> >         generator.  It treats the the raster values as a continuous
> >         field, and
> >         builds edges based on linear interpolation between pixel
> >         centers.
> >         This gives a result that could pass through a pixel center if
> >         it
> >         happens to be an exact contour level.
> >
> >         Best regards,
> >         --
> >
> ---------------------------------------+--------------------------------------
> >         I set the clouds in motion - turn up   | Frank Warmerdam,
> >         warmerdam at pobox.com
> >         light and sound - activate the windows |
> >         http://pobox.com/~warmerdam
> >         and watch the world go round - Rush    | Geospatial Software
> >         Developer
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Brian Case
> KF7WPK
> rush at winkey.org
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130220/34cca483/attachment-0001.html>

From mateusz at loskot.net  Wed Feb 20 07:10:43 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 20 Feb 2013 15:10:43 +0000
Subject: [gdal-dev] Multiple extensions in GDAL_DMD_EXTENSION ?
In-Reply-To: <CA+TxYvPwXDew7UK+JQqENcxaHqfsDL6AYFTVvJfdEXgtFAM4Ng@mail.gmail.com>
References: <CAEVk4t2+QDerE=8v6MWqXtr-6gdLwOkEGWo=TX8CR0GpJOYxUg@mail.gmail.com>
	<CA+YzLBe+Uqi4dFsXrgHp535L1bqnfxoZSZw9WUPTKvP9KvAk4w@mail.gmail.com>
	<CA+TxYvPw8Zy0_OxuJ9PdEa38nevnQUWhVCwZ9nYWNieOorOCag@mail.gmail.com>
	<CA+YzLBfGyopGsRWWqjon4E9e3=GrFY9kPrLeYBi73EY2T51aiw@mail.gmail.com>
	<CA+TxYvPwXDew7UK+JQqENcxaHqfsDL6AYFTVvJfdEXgtFAM4Ng@mail.gmail.com>
Message-ID: <CABUeae8=ksOk847D=Z9JdpXG_nNQyiXb46Tc-+Trb_-AO3_-DQ@mail.gmail.com>

On 20 February 2013 14:30, Etienne Tourigny <etourigny.dev at gmail.com> wrote:
> On Tue, Feb 19, 2013 at 12:59 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:
>>
>> One other use that extensions are used for is to make it easy for a
>> user to filter down files in a file browser to just one format.  I
>> can't think of any time I've found this useful.  But with GDAL there
>> are so many formats that these "list of formats" filter dohickyies are
>> usually completely unusable.
>
> Applications tend to have these, with ad-hoc rules for formats which
> use various extensions (e.g. the QGis raster open dialog). This would
> be simpler and more unified if extensions are reported by GDAL.

Please, stop there and let me paste Frank's "I find this practice abhorrent!".

Whoever comes up with an idea to directly drive his app GUI with a
library such as
GDAL should leave his desk, go fishing for as long as it takes him to come back
with solution on his app side.

Make JSON file with GDAL driver to extension mapping, and configure
your GUI based on that.
Flexibility will be way better. Maintenance will be none (GDAL does
not deliver new drivers every week).

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Wed Feb 20 07:19:35 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 20 Feb 2013 15:19:35 +0000
Subject: [gdal-dev] gdal_polygonize and polygon edges
In-Reply-To: <CAFOE_Bf_NtoJ9191MQwK=aq_edQfS5oZBzOo8+gAj1+VGcJrnA@mail.gmail.com>
References: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>
	<CA+YzLBdT19QOuCr9krzY5C5U2CdZ26yRrRzPwsBX_RuKHMQC7g@mail.gmail.com>
	<CAFOE_BeZ4kwUFLX2CC7PcC=nsb3gVoe3yw2Eu=Lzg2FyLCno6A@mail.gmail.com>
	<1361313556.9390.6.camel@localhost>
	<CAFOE_Bf_NtoJ9191MQwK=aq_edQfS5oZBzOo8+gAj1+VGcJrnA@mail.gmail.com>
Message-ID: <CABUeae-B1mXA0UD-XdToj2gi4YeMOGnOK+aGDVQ3jTMZqa54_Q@mail.gmail.com>

On 20 February 2013 15:08, Jeff Lacoste <jefflacostegdal at gmail.com> wrote:
> Thanks every one who responded to my post.
>
> Jeff: it appears that your approach involve smoothing the original grid
> before generating contours (or polygons from it). Right ? It would be nice
> if I could have the smoothing either as an after process operation or
> ideally as an option within the polygons generation process itself.
>
> Daniel: Using 'SIA' technique sounds promising. Does it apply to polygons as
> well ? or just polylines ? I would be interested to test (and later use if
> applicable) your approach.
> If would like an extra tester, please let me know.
>
> Graeme: Is your tracing technique a new algorithm different from
> GDAL_Polygonize ? Is there a C/C++ code I can build or may be an .exe
> utility I could use to try out ?
>
> p.s: i did not have a chance to try out ''Ramer-Douglas?Peucker' yet.


If you're after C++ code, check this:

http://psimpl.sourceforge.net/

It shouldn't be a problem to stream OGR geometries through one of
these algorithms.

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net

From jefflacostegdal at gmail.com  Wed Feb 20 07:23:42 2013
From: jefflacostegdal at gmail.com (Jeff Lacoste)
Date: Wed, 20 Feb 2013 10:23:42 -0500
Subject: [gdal-dev] gdal_polygonize and polygon edges
In-Reply-To: <CABUeae-B1mXA0UD-XdToj2gi4YeMOGnOK+aGDVQ3jTMZqa54_Q@mail.gmail.com>
References: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>
	<CA+YzLBdT19QOuCr9krzY5C5U2CdZ26yRrRzPwsBX_RuKHMQC7g@mail.gmail.com>
	<CAFOE_BeZ4kwUFLX2CC7PcC=nsb3gVoe3yw2Eu=Lzg2FyLCno6A@mail.gmail.com>
	<1361313556.9390.6.camel@localhost>
	<CAFOE_Bf_NtoJ9191MQwK=aq_edQfS5oZBzOo8+gAj1+VGcJrnA@mail.gmail.com>
	<CABUeae-B1mXA0UD-XdToj2gi4YeMOGnOK+aGDVQ3jTMZqa54_Q@mail.gmail.com>
Message-ID: <CAFOE_BfArYx=46xeK8FQ32VfMrKgsRcnjcqOMV5jYPmPJ_O1rQ@mail.gmail.com>

Thanks Mateusz. Is this limited to polylines only ? not polygons ?


On Wed, Feb 20, 2013 at 10:19 AM, Mateusz Loskot <mateusz at loskot.net> wrote:

> On 20 February 2013 15:08, Jeff Lacoste <jefflacostegdal at gmail.com> wrote:
> > Thanks every one who responded to my post.
> >
> > Jeff: it appears that your approach involve smoothing the original grid
> > before generating contours (or polygons from it). Right ? It would be
> nice
> > if I could have the smoothing either as an after process operation or
> > ideally as an option within the polygons generation process itself.
> >
> > Daniel: Using 'SIA' technique sounds promising. Does it apply to
> polygons as
> > well ? or just polylines ? I would be interested to test (and later use
> if
> > applicable) your approach.
> > If would like an extra tester, please let me know.
> >
> > Graeme: Is your tracing technique a new algorithm different from
> > GDAL_Polygonize ? Is there a C/C++ code I can build or may be an .exe
> > utility I could use to try out ?
> >
> > p.s: i did not have a chance to try out ''Ramer-Douglas?Peucker' yet.
>
>
> If you're after C++ code, check this:
>
> http://psimpl.sourceforge.net/
>
> It shouldn't be a problem to stream OGR geometries through one of
> these algorithms.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130220/f81f6543/attachment.html>

From grb at skogoglandskap.no  Wed Feb 20 07:26:54 2013
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Wed, 20 Feb 2013 15:26:54 +0000
Subject: [gdal-dev] gdal_polygonize and polygon edges
Message-ID: <3C3957BE-327C-448A-ABB2-5B0B2BE57748@skogoglandskap.no>

"Graeme: Is your tracing technique a new algorithm different from
GDAL_Polygonize ? Is there a C/C++ code I can build or may be an .exe
utility I could use to try out ?"

It is not my technique. Dan's utils were written by some heroic figure known only as Dan Stahlke. I have no idea who he is, but I am glad that he exists. :-)

If you run the steps I mentioned in my previous email, you will see that you have downloaded a set of C++ files and that they were built into an executable. It should be possible to build on Windows, I haven't tried. 

There is more information here, and you can download a zip. 

https://github.com/gina-alaska/dans-gdal-scripts

For what it's worth: a linux server can be rented out for around $3-4 a month. If you don't have access to one, it might be a lot cheaper to rent a linux box and compile up the code quickly and easily, rather than spending time trying to make things work in windows.  lowendbox will give you a list of linux server vendors. If you are well funded,  e.g. linode might be a good choice.

Graeme.

From dmorissette at mapgears.com  Wed Feb 20 09:31:11 2013
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 20 Feb 2013 12:31:11 -0500
Subject: [gdal-dev] gdal_polygonize and polygon edges
In-Reply-To: <CAFOE_Bf_NtoJ9191MQwK=aq_edQfS5oZBzOo8+gAj1+VGcJrnA@mail.gmail.com>
References: <CAFOE_Bcu0EH82Drix4fke2J1dNr_vnu1p594p-_9-6xK54_bKQ@mail.gmail.com>
	<CA+YzLBdT19QOuCr9krzY5C5U2CdZ26yRrRzPwsBX_RuKHMQC7g@mail.gmail.com>
	<CAFOE_BeZ4kwUFLX2CC7PcC=nsb3gVoe3yw2Eu=Lzg2FyLCno6A@mail.gmail.com>
	<1361313556.9390.6.camel@localhost>
	<CAFOE_Bf_NtoJ9191MQwK=aq_edQfS5oZBzOo8+gAj1+VGcJrnA@mail.gmail.com>
Message-ID: <5125085F.70102@mapgears.com>

On 13-02-20 10:08 AM, Jeff Lacoste wrote:
>
> Daniel: Using 'SIA' technique sounds promising. Does it apply to
> polygons as well ? or just polylines ? I would be interested to test
> (and later use if applicable) your approach.
> If would like an extra tester, please let me know.
>

Yes, our implementation also works on polygons. i.e. For polygons, the 
calculations for the points at the beginning of the line string also 
take into account the points from the other end, and vice-versa.

We'll try to see how we could go about sharing what we've got at the 
moment with you.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From rick.wheeler at cna.nl.ca  Wed Feb 20 10:33:55 2013
From: rick.wheeler at cna.nl.ca (Rick)
Date: Wed, 20 Feb 2013 10:33:55 -0800 (PST)
Subject: [gdal-dev] gdalwarp producing rgb 0 0 0 for input nodata areas
Message-ID: <1361385235580-5035602.post@n6.nabble.com>

Hi all,
I have a set of ecw files that I wish to gdalwarp to a new coordinate system
and convert to jpg.

I have been using these commands:
gdal_translate in.ecw out_gt.tif -a_nodata none -of GTiff -co TFW=YES
gdalwarp -s_srs EPSG:26909 -t_srs EPSG:3005 -of GTiff -co TFW=YES -dstalpha
out_gt.tif out_warp.tif
gdal_translate -of JPEG -co "WORLDFILE=YES" out_warp.tif out.jpg

The first translate works as expected and the nodata values are preserved.
The gdalwarp command converts the nodata areas to 0,0,0.
The second translate works as expected and the nodata values are preserved.

I am using ArcGIS 10.1 to view the results.

How does one preserve nodata areas via gdalwarp?

My eventual goal is to merge these data sets but have a need for the interim
products to have the nodata areas.

Thanks



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdalwarp-producing-rgb-0-0-0-for-input-nodata-areas-tp5035602.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ari.jolma at gmail.com  Wed Feb 20 10:38:48 2013
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 20 Feb 2013 19:38:48 +0100
Subject: [gdal-dev] Multiple extensions in GDAL_DMD_EXTENSION ?
In-Reply-To: <CABUeae8=ksOk847D=Z9JdpXG_nNQyiXb46Tc-+Trb_-AO3_-DQ@mail.gmail.com>
References: <CAEVk4t2+QDerE=8v6MWqXtr-6gdLwOkEGWo=TX8CR0GpJOYxUg@mail.gmail.com>
	<CA+YzLBe+Uqi4dFsXrgHp535L1bqnfxoZSZw9WUPTKvP9KvAk4w@mail.gmail.com>
	<CA+TxYvPw8Zy0_OxuJ9PdEa38nevnQUWhVCwZ9nYWNieOorOCag@mail.gmail.com>
	<CA+YzLBfGyopGsRWWqjon4E9e3=GrFY9kPrLeYBi73EY2T51aiw@mail.gmail.com>
	<CA+TxYvPwXDew7UK+JQqENcxaHqfsDL6AYFTVvJfdEXgtFAM4Ng@mail.gmail.com>
	<CABUeae8=ksOk847D=Z9JdpXG_nNQyiXb46Tc-+Trb_-AO3_-DQ@mail.gmail.com>
Message-ID: <51251838.7050502@gmail.com>

On 02/20/2013 04:10 PM, Mateusz Loskot wrote:
> Whoever comes up with an idea to directly drive his app GUI with a
> library such as GDAL should leave his desk, go fishing for as long as it takes him to come back
> with solution on his app side.

Mateusz,

I've come up with this idea. However, I'm not very often confronted with 
data in strange formats and I've been happy with a standard GTK+ File 
Open dialog for raster data - and then relying on GDAL autodetect. For 
vector data I've cooked up my own dialog - mostly because I want to show 
meta data of the selected layer in the dialog. But, I found out that in 
some cases one needs to specify the OGR driver which to use - so in the 
dialog box there is a drop down widget for optionally specifying the 
driver (the default is autodetect). The file browser can select 
directories and files - so the user can optionally try various drivers 
on the same file/directory.

The practical problem often is of course that the dataset can be made 
from more than one file.

Just the last few days I've worked on the support in the GUI for using 
the WMS and WFS drivers in GDAL. For WMS I made a completely new dialog 
box but for the WFS I added it into the Open vector data dialog - it 
already had support for PostGIS data so non-filesystem datasource was 
not a completely new concept. What I did earlier was to write the OGR 
driver connection strings as templates so that they can be used to 
create simple a dialog box to ask the basic data from the user - this 
seems to work quite nicely.  What I did now was to add the WFS "get 
layers" and "get layer meta data" functionality - I ended up using Perl 
bindings to general XML libraries for those. I only use the OGR WFS 
driver to retrieve the data of a known layer, with 
OGR_WFS_LOAD_MULTIPLE_LAYER_DEFN set to false to avoid unnecessary calls.

So, maybe what I want to say is that the file extension is just a part 
of the issue. GDAL can get data from many other sources than local 
filesystem - and creating a unified easy to use GUI for all those may be 
more interesting and useful.

Cheers,

Ari

>
> Make JSON file with GDAL driver to extension mapping, and configure
> your GUI based on that.
> Flexibility will be way better. Maintenance will be none (GDAL does
> not deliver new drivers every week).
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Feb 20 13:11:56 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 20 Feb 2013 13:11:56 -0800
Subject: [gdal-dev] Multiple extensions in GDAL_DMD_EXTENSION ?
In-Reply-To: <CA+TxYvPwXDew7UK+JQqENcxaHqfsDL6AYFTVvJfdEXgtFAM4Ng@mail.gmail.com>
References: <CAEVk4t2+QDerE=8v6MWqXtr-6gdLwOkEGWo=TX8CR0GpJOYxUg@mail.gmail.com>
	<CA+YzLBe+Uqi4dFsXrgHp535L1bqnfxoZSZw9WUPTKvP9KvAk4w@mail.gmail.com>
	<CA+TxYvPw8Zy0_OxuJ9PdEa38nevnQUWhVCwZ9nYWNieOorOCag@mail.gmail.com>
	<CA+YzLBfGyopGsRWWqjon4E9e3=GrFY9kPrLeYBi73EY2T51aiw@mail.gmail.com>
	<CA+TxYvPwXDew7UK+JQqENcxaHqfsDL6AYFTVvJfdEXgtFAM4Ng@mail.gmail.com>
Message-ID: <CA+YzLBfbxAAR2YQatb_SN8avbj4mACFQdZDMdtUafFCbDyAEQg@mail.gmail.com>

On Wed, Feb 20, 2013 at 6:30 AM, Etienne Tourigny
<etourigny.dev at gmail.com> wrote:
> Frank,
>
> thanks for you thorough response.
>
> I agree that GDAL's detection is rather efficient, but sometimes it
> can be relatively slow when scanning many files in a GUI.
>
> This is admittedly a worst-case scenario, but is the reason why I
> chose to optionally scan files by extension (rather than content) in
> QGis - this can be enabled for specific directories.
>
>>
>> One other use that extensions are used for is to make it easy for a
>> user to filter down files in a file browser to just one format.  I
>> can't think of any time I've found this useful.  But with GDAL there
>> are so many formats that these "list of formats" filter dohickyies are
>> usually completely unusable.
>
> Applications tend to have these, with ad-hoc rules for formats which
> use various extensions (e.g. the QGis raster open dialog). This would
> be simpler and more unified if extensions are reported by GDAL.
>
> In short, I'd support a new GDAL_DMD_EXTENSION_LIST that supplements
> existing GDAL_DMD_EXTENSION . I could commit such a feature in the
> netcdf driver and gdalinfo output and update the docs if you agree.

Etienne,

If you would like the broader set of developers to maintain this list for
new drivers, then I'd encourage you to write up a brief RFC and go
through the discuss/vote process.

As mentioned, I'm not keen but I'm not going to block it.  If an RFC
is passed, I'll even make an effort to maintain this metadata for
drivers I work on.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From harrillcj at gmail.com  Wed Feb 20 14:47:54 2013
From: harrillcj at gmail.com (Christopher Harrill)
Date: Wed, 20 Feb 2013 17:47:54 -0500
Subject: [gdal-dev] Creating CADRG data
Message-ID: <CACL7MQKBGotzP5bE2sQzhB1vhDbhoKtDo-nB-3WGTFyaTzy2wA@mail.gmail.com>

Hi all,

I noticed that, while both ADRG and CADRG rasters can be read, only ADRG
rasters can be created. Are there any plans to support creating rasters in
CADRG format?

Thanks,
Chris Harrill
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130220/2e1a0b5d/attachment.html>

From grb at skogoglandskap.no  Thu Feb 21 00:26:03 2013
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Thu, 21 Feb 2013 08:26:03 +0000
Subject: [gdal-dev] gdalwarp producing rgb 0 0 0 for input nodata areas
Message-ID: <80C6DAB4-65A6-4C11-95E8-285FE649040F@skogoglandskap.no>

> "I have been using these commands:
> gdal_translate in.ecw out_gt.tif -a_nodata none -of GTiff -co TFW=YES
> gdalwarp -s_srs EPSG:26909 -t_srs EPSG:3005 -of GTiff -co TFW=YES -dstalpha
> out_gt.tif out_warp.tif
> gdal_translate -of JPEG -co "WORLDFILE=YES" out_warp.tif out.jpg
> 
> The first translate works as expected and the nodata values are preserved.
> The gdalwarp command converts the nodata areas to 0,0,0.
> The second translate works as expected and the nodata values are preserved."
> 
> "How does one preserve nodata areas via gdalwarp?"
> 

>From the friendly manual,

http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp

"What if nodata is different in each image?

If the nodata tag is set in the geotiff header, gdalwarp will use it automatically, you don't need to do anything. However, -srcnodata overrides this, so if you are handling a bunch of images with different values to be ignored you need to either a) pre-process them to have the same to-be-ignored value, or b) set the nodata flag for each file. Use (b) if you need to preserve the original values for some reason, for example:"


Possible actions:

1. Use a_nodata correctly to set the nodata value in the field when you run gdal_translate. This will then be recognised and used by gdalwarp automatically.
2. Experiment with the -srcnodata option in gdalwarp.

This answer was found by googling "gdalwarp nodata" and reading the first and second links in Google...

Graeme.

From oyvind.idland at gmail.com  Thu Feb 21 01:31:44 2013
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Thu, 21 Feb 2013 10:31:44 +0100
Subject: [gdal-dev] Multiple extensions in GDAL_DMD_EXTENSION ?
In-Reply-To: <CABUeae8=ksOk847D=Z9JdpXG_nNQyiXb46Tc-+Trb_-AO3_-DQ@mail.gmail.com>
References: <CAEVk4t2+QDerE=8v6MWqXtr-6gdLwOkEGWo=TX8CR0GpJOYxUg@mail.gmail.com>
	<CA+YzLBe+Uqi4dFsXrgHp535L1bqnfxoZSZw9WUPTKvP9KvAk4w@mail.gmail.com>
	<CA+TxYvPw8Zy0_OxuJ9PdEa38nevnQUWhVCwZ9nYWNieOorOCag@mail.gmail.com>
	<CA+YzLBfGyopGsRWWqjon4E9e3=GrFY9kPrLeYBi73EY2T51aiw@mail.gmail.com>
	<CA+TxYvPwXDew7UK+JQqENcxaHqfsDL6AYFTVvJfdEXgtFAM4Ng@mail.gmail.com>
	<CABUeae8=ksOk847D=Z9JdpXG_nNQyiXb46Tc-+Trb_-AO3_-DQ@mail.gmail.com>
Message-ID: <CAEVk4t3Nx754FQZajeAJ=u3Wc4Cp305RzaP4OKi1WzKKFCt+SQ@mail.gmail.com>

> Whoever comes up with an idea to directly drive his app GUI with a
> library such as
> GDAL should leave his desk, go fishing for as long as it takes him to come
> back
> with solution on his app side.
>
>
Not sure what you mean by "drive the app GUI" here. I think the main point
here is to get metadata from somewhere, and use the metadata in a GUI.
That does not nessesarily mean to use the GDAL API from the GUI.

Also, why use a JSON formatted file ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130221/bff41725/attachment.html>

From mateusz at loskot.net  Thu Feb 21 17:20:46 2013
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 22 Feb 2013 01:20:46 +0000
Subject: [gdal-dev] Multiple extensions in GDAL_DMD_EXTENSION ?
In-Reply-To: <51251838.7050502@gmail.com>
References: <CAEVk4t2+QDerE=8v6MWqXtr-6gdLwOkEGWo=TX8CR0GpJOYxUg@mail.gmail.com>
	<CA+YzLBe+Uqi4dFsXrgHp535L1bqnfxoZSZw9WUPTKvP9KvAk4w@mail.gmail.com>
	<CA+TxYvPw8Zy0_OxuJ9PdEa38nevnQUWhVCwZ9nYWNieOorOCag@mail.gmail.com>
	<CA+YzLBfGyopGsRWWqjon4E9e3=GrFY9kPrLeYBi73EY2T51aiw@mail.gmail.com>
	<CA+TxYvPwXDew7UK+JQqENcxaHqfsDL6AYFTVvJfdEXgtFAM4Ng@mail.gmail.com>
	<CABUeae8=ksOk847D=Z9JdpXG_nNQyiXb46Tc-+Trb_-AO3_-DQ@mail.gmail.com>
	<51251838.7050502@gmail.com>
Message-ID: <CABUeae_K5S5T7fYWYB9rXiPVkR5GsYPpz9T3ofChLB14axvGyw@mail.gmail.com>

On 20 February 2013 18:38, Ari Jolma <ari.jolma at gmail.com> wrote:
>
> Just the last few days I've worked on the support in the GUI for using the
> WMS and WFS drivers in GDAL. For WMS I made a completely new dialog box but
> for the WFS I added it into the Open vector data dialog - it already had
> support for PostGIS data so non-filesystem datasource was not a completely
> new concept. What I did earlier was to write the OGR driver connection
> strings as templates so that they can be used to create simple a dialog box
> to ask the basic data from the user - this seems to work quite nicely.

Ari,

"strings as templates"...you've done something very similar to what I suggested.

> So, maybe what I want to say is that the file extension is just a part of
> the issue. GDAL can get data from many other sources than local filesystem -
> and creating a unified easy to use GUI for all those may be more interesting
> and useful.

The rant was not only about file extension, but about any GUI directly
driven by output produced by --format[s].

Best regards,
--
Mateusz Loskot, http://mateusz.loskot.net

From rush at winkey.org  Sun Feb 24 09:56:14 2013
From: rush at winkey.org (Brian Case)
Date: Sun, 24 Feb 2013 09:56:14 -0800
Subject: [gdal-dev] gdalwarp producing rgb 0 0 0 for input nodata areas
In-Reply-To: <1361385235580-5035602.post@n6.nabble.com>
References: <1361385235580-5035602.post@n6.nabble.com>
Message-ID: <1361728574.9390.16.camel@localhost>

rick

you cannot preserve the nodata areas with jpeg output. you will have a
line around your image that is not quite your nodata values.

leave your files as geotiff until you merge them.

you did preserve the nodata with your gdalwarp just in the form of an
alpha band

you can merge your files with gdalwarp in1.tif in2.tif in3.tif out.tif

Brian

On Wed, 2013-02-20 at 10:33 -0800, Rick wrote:
> Hi all,
> I have a set of ecw files that I wish to gdalwarp to a new coordinate system
> and convert to jpg.
> 
> I have been using these commands:
> gdal_translate in.ecw out_gt.tif -a_nodata none -of GTiff -co TFW=YES
> gdalwarp -s_srs EPSG:26909 -t_srs EPSG:3005 -of GTiff -co TFW=YES -dstalpha
> out_gt.tif out_warp.tif
> gdal_translate -of JPEG -co "WORLDFILE=YES" out_warp.tif out.jpg
> 
> The first translate works as expected and the nodata values are preserved.
> The gdalwarp command converts the nodata areas to 0,0,0.
> The second translate works as expected and the nodata values are preserved.
> 
> I am using ArcGIS 10.1 to view the results.
> 
> How does one preserve nodata areas via gdalwarp?
> 
> My eventual goal is to merge these data sets but have a need for the interim
> products to have the nodata areas.
> 
> Thanks
> 
> 
> 
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdalwarp-producing-rgb-0-0-0-for-input-nodata-areas-tp5035602.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Brian Case
KF7WPK
rush at winkey.org



From otrov at hush.ai  Sun Feb 24 23:31:03 2013
From: otrov at hush.ai (zeta)
Date: Mon, 25 Feb 2013 08:31:03 +0100
Subject: [gdal-dev] Closing disconnected contours
Message-ID: <20130225073103.777F214DBDE@smtp.hushmail.com>

Hi,

I have shape file from sample map, consisting of topological contours. However many contours have small gaps and I'm looking for a pointer how to connect those lines, automatically.
Does ogr have a method or maybe more generally does anyone know of a tool, that would correctly close disconnected contours, which aren't labeled?
Gaps are small - artifacts from graticules present in original image used as source for creating this vector.

Thanks


From silyko at gmail.com  Mon Feb 25 00:35:37 2013
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Mon, 25 Feb 2013 09:35:37 +0100
Subject: [gdal-dev] gdalwarp crash
Message-ID: <CANzGYpRgSCU=FK5xec+u9Auqa-nnG7nr_r2=HH4pUthRWLPejw@mail.gmail.com>

Hej List,

  I was using gdal1.10_dev (precompiled from gisinternals.com/sdk) to warp
a quite large ECW image, but after running for a few days the process
crashed with an integer overflow error:

C:\Users\simlk\Downloads\release-1600-x64-gdal-mapserver>gdalwarp -s_srs
"+proj=
etmerc +ellps=GRS80 +lat_0=0 +lon_0=-39 +k_0= 0.9996 +towgs84=0,0,0,0,0,0,0
+uni
ts=m +no_defs" -t_srs "EPSG:4747" -of GTiff -co "BIGTIFF=IF_NEEDED" -ts
110000 3
00000 -wm 3072 C:\Ortofoto\GR_samlet_ny.ecw T:\TEMP\simlk\out.tiff
Creating output file that is 110000P x 300000L.
Processing input file C:\Ortofoto\GR_samlet_ny.ecw.
0...10...20...30...40...50...60...70...ERROR 1: Integer overflow :
nDstXSize=275
00, nDstYSize=37500

I was trying to mimic a utm zone 24 projection in my source srs - and yes I
did forget the false easting +x_0=500000, but I doubt the problem is
related to that. Is there some other creation option that I missed for huge
output?

Cheers,
Simon Kokkendorff, National Geodata Agency of Denmark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130225/0fc2127b/attachment.html>

From even.rouault at mines-paris.org  Mon Feb 25 01:32:50 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 25 Feb 2013 10:32:50 +0100
Subject: [gdal-dev] gdalwarp crash
In-Reply-To: <CANzGYpRgSCU=FK5xec+u9Auqa-nnG7nr_r2=HH4pUthRWLPejw@mail.gmail.com>
References: <CANzGYpRgSCU=FK5xec+u9Auqa-nnG7nr_r2=HH4pUthRWLPejw@mail.gmail.com>
Message-ID: <201302251032.51034.even.rouault@mines-paris.org>

Le lundi 25 f?vrier 2013 09:35:37, Simon Lyngby Kokkendorff a ?crit :
> Hej List,
> 
>   I was using gdal1.10_dev (precompiled from gisinternals.com/sdk) to warp
> a quite large ECW image, but after running for a few days the process
> crashed with an integer overflow error:

When you say "crashed", you mean it exited with the integer overflow error (to 
be opposed as the windows that is displayed by Windows when a process really 
crashes) ?

> 
> C:\Users\simlk\Downloads\release-1600-x64-gdal-mapserver>gdalwarp -s_srs
> "+proj=
> etmerc +ellps=GRS80 +lat_0=0 +lon_0=-39 +k_0= 0.9996 +towgs84=0,0,0,0,0,0,0
> +uni
> ts=m +no_defs" -t_srs "EPSG:4747" -of GTiff -co "BIGTIFF=IF_NEEDED" -ts
> 110000 3
> 00000 -wm 3072 C:\Ortofoto\GR_samlet_ny.ecw T:\TEMP\simlk\out.tiff
> Creating output file that is 110000P x 300000L.
> Processing input file C:\Ortofoto\GR_samlet_ny.ecw.
> 0...10...20...30...40...50...60...70...ERROR 1: Integer overflow :
> nDstXSize=275
> 00, nDstYSize=37500
> 
> I was trying to mimic a utm zone 24 projection in my source srs - and yes I
> did forget the false easting +x_0=500000, but I doubt the problem is
> related to that.

The issue is rather with the -wm 3072. The warping algorithm will currently 
cast a integer overflow error when a memory allocation above 2 GB is attempted. 
So you should try -wm 2047 or less. There's rarely a significant advantage in 
using so big values for -wm.

> Is there some other creation option that I missed for huge
> output?

You could add -co TILED=YES to produce a tiled geotiff. That might help speed 
up things a bit.

> 
> Cheers,
> Simon Kokkendorff, National Geodata Agency of Denmark

From pierigis at gmail.com  Mon Feb 25 02:04:46 2013
From: pierigis at gmail.com (Pietro Rossin)
Date: Mon, 25 Feb 2013 11:04:46 +0100
Subject: [gdal-dev] Best way to mosaic and compress lots of tiff
	Black/white?
In-Reply-To: <CAPwOVCG5nOnNMXuAqmJXcFLintrknqzmTBvp8ZygwcWU0jesXw@mail.gmail.com>
References: <1352823240739-5016021.post@n6.nabble.com>
	<1e6adc767b66d7d33f2bcf7320f08ec2@enoreth.net>
	<CAPwOVCFzKJSSJmmzZLRyn5CGcFkU0_EEQwyqmo1rW9uzJuEqeg@mail.gmail.com>
	<CAPwOVCG5nOnNMXuAqmJXcFLintrknqzmTBvp8ZygwcWU0jesXw@mail.gmail.com>
Message-ID: <CAPwOVCFO9aOXik-so2q5qKPU78p6nyyotr+=qp8DmYWsv=E31g@mail.gmail.com>

Hi all
at last I found the problem
white bands must be filtered by the source, so the "-srcnodata" option must
be used.
In my case -srcnodata "0" solved the problem and all tiff images are now
mosaicked without blanc bands between them.
This is the correct command

gdalbuildvrt -hidenodata -srcnodata "0" -vrtnodata "0" test.vrt *.tif

Bie
pietro


2012/11/14 Pietro Rossin <pierigis at gmail.com>

> Sorry for the mess...
> I made an error because I thought that tiffs were RGB black and white but
> they are sigle band 1 bit images
>
> I tried to use nodata values during vrt generation like this
>
> gdalbuildvrt -hidenodata -vrtnodata "0" test.vrt *.tif
>
>
> Then mosaic tiffs with
> gdal_translate -of Gtiff -co SPARSE_OK=TRUE -a_nodata 0 -co NBITS=1 -co
> "TILED=YES" -co "COMPRESS=CCITTFAX4" -co "INTERLEAVE=BAND" -co "TFW=YES"
> "test.vrt" "test.tif"
>
> Null overlapping areas still present in the output..
>
> Where is my mistake?
>
> Here is the gdalinfo for a tiff
> *********************************************
> Driver: GTiff/GeoTIFF
> Files: 018131.tif
>        018131.tfw
>        018131.aux
> Size is 7400, 6491
> Coordinate System is `'
> Origin = (2344486.561459757400000,5168752.558307543400000)
> Pixel Size = (0.442006745841354,-0.442006746307015)
> Metadata:
>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
>   TIFFTAG_SOFTWARE=IrfanView
>   TIFFTAG_XRESOLUTION=57
>   TIFFTAG_YRESOLUTION=57
> Image Structure Metadata:
>   COMPRESSION=CCITTFAX4
>   INTERLEAVE=BAND
>   MINISWHITE=YES
> Corner Coordinates:
> Upper Left  ( 2344486.561, 5168752.558)
> Lower Left  ( 2344486.561, 5165883.493)
> Upper Right ( 2347757.411, 5168752.558)
> Lower Right ( 2347757.411, 5165883.493)
> Center      ( 2346121.986, 5167318.025)
> Band 1 Block=7400x1 Type=Byte, ColorInterp=Palette
>   Description = Band_1
>   Metadata:
>     LAYER_TYPE=athematic
>   Image Structure Metadata:
>     NBITS=1
>   Color Table (RGB with 2 entries)
>     0: 255,255,255,255
>     1: 0,0,0,255
> *********************************************
>
>
> 2012/11/14 Pietro Rossin <pierigis at gmail.com>
>
>> Ok
>> I made a test VRT and I applied your gdal_translate command.
>> It work and the result is a tiff with a weight of about the sum of the
>> two test mosaiced tiffs.
>> But as you can see in this image
>>
>> http://www.flickr.com/photos/90029615 at N05/8184720800/
>>
>> the two tiffs have a white orizzontal stripe that separate them.
>>  This is because each tif to be mosaiced have a white frame and every
>> frame overlap to "data" areas of adiacent images.
>>
>> If I eliminate the 255 value from original tiffs the result is like this
>> http://www.flickr.com/photos/90029615 at N05/8184744636/
>>
>> I tried using -a_nodata 255 in gdal_translate command but the result is
>> the same white separation..
>>
>> How can I set 255 values to nodata before mosaic each tiff?
>>
>> Thank you very much for your help!
>> Pietro
>>
>>
>> 2012/11/13 MORREALE Jean Roc [via OSGeo.org] <[hidden email]<http://user/SendEmail.jtp?type=node&node=5016218&i=0>
>> >
>>
>>  Hi,
>>>
>>> You could start by merging all your tiff in a VRT then do
>>> gdal_translate -of Gtiff -co SPARSE_OK=TRUE -a_nodata 0 -co NBITS=1 -co
>>> "TILED=YES" -co "COMPRESS=CCITTFAX4" -co "INTERLEAVE=BAND" "example.vrt"
>>> "example.tif"
>>>
>>> Le 2012-11-13 17:14, Pietro Rossin a ?crit :
>>>
>>> > Hello all
>>>
>>> > I have ~1000 tiff/tfw RGB but with only 0 or 255 color value in all
>>> > bands
>>> > (black/white).
>>> > I want to mosaic them in a single image to be used in qgis and other
>>> > gis
>>> > software.
>>> >
>>> > Which is the best way to do this? And to compress the resulting
>>> > image? May
>>> > be Tiff?? Single band??
>>> > Another problem is that I must apply a formula to input images to
>>> > transform
>>> > 255 value to null, because of some white portion of each image that
>>> > overlap
>>> > to black portion of the adiacent one..
>>> >
>>> > Thanks
>>> > Pietro
>>> Le 2012-11-13 17:14, Pietro Rossin a ?crit :
>>>
>>> > Hello all
>>>
>>> > I have ~1000 tiff/tfw RGB but with only 0 or 255 color value in all
>>> > bands
>>> > (black/white).
>>> > I want to mosaic them in a single image to be used in qgis and other
>>> > gis
>>> > software.
>>> >
>>> > Which is the best way to do this? And to compress the resulting
>>> > image? May
>>> > be Tiff?? Single band??
>>> > Another problem is that I must apply a formula to input images to
>>> > transform
>>> > 255 value to null, because of some white portion of each image that
>>> > overlap
>>> > to black portion of the adiacent one..
>>> >
>>> > Thanks
>>> > Pietro
>>> _______________________________________________
>>> gdal-dev mailing list
>>> [hidden email] <http://user/SendEmail.jtp?type=node&node=5016032&i=0>
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> ------------------------------
>>>  If you reply to this email, your message will be added to the
>>> discussion below:
>>>
>>> http://osgeo-org.1560.n6.nabble.com/Best-way-to-mosaic-and-compress-lots-of-tiff-Black-white-tp5016021p5016032.html
>>>  To unsubscribe from Best way to mosaic and compress lots of tiff
>>> Black/white?, click here.
>>> NAML<http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>>>
>>
>>
>> ------------------------------
>> View this message in context: Re: Best way to mosaic and compress lots
>> of tiff Black/white?<http://osgeo-org.1560.n6.nabble.com/Best-way-to-mosaic-and-compress-lots-of-tiff-Black-white-tp5016021p5016218.html>
>>
>> Sent from the GDAL - Dev mailing list archive<http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html>at Nabble.com.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130225/d450dc52/attachment.html>

From silyko at gmail.com  Mon Feb 25 02:13:47 2013
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Mon, 25 Feb 2013 11:13:47 +0100
Subject: [gdal-dev] gdalwarp crash
In-Reply-To: <201302251032.51034.even.rouault@mines-paris.org>
References: <CANzGYpRgSCU=FK5xec+u9Auqa-nnG7nr_r2=HH4pUthRWLPejw@mail.gmail.com>
	<201302251032.51034.even.rouault@mines-paris.org>
Message-ID: <CANzGYpSuZen6kXadwHAag00LsnYjznh6a15gf1-md5srVUUsZA@mail.gmail.com>

Hi Even,


> When you say "crashed", you mean it exited with the integer overflow error
> (to
> be opposed as the windows that is displayed by Windows when a process
> really
> crashes) ?
>

  Yes, it didn't really crash, but exited with the integer overflow error
message.

The issue is rather with the -wm 3072. The warping algorithm will currently
> cast a integer overflow error when a memory allocation above 2 GB is
> attempted.
> So you should try -wm 2047 or less. There's rarely a significant advantage
> in
> using so big values for -wm.
>

Ahh, I see. I was using win64 and just assumed that setting -vm high might
speed things up. Will try to create a tiled output image :-)
By the way, I also tried using -multi to speed up (with otherwise the same
options, I think), but got an error saying something like "Unable to aquire
IOMutex" (unfortunately I haven't got the exact output).

Thanks,
Simon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130225/dcd0b8a2/attachment-0001.html>

From chaitanya.ch at gmail.com  Mon Feb 25 02:21:43 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon, 25 Feb 2013 15:51:43 +0530
Subject: [gdal-dev] Closing disconnected contours
In-Reply-To: <20130225073103.777F214DBDE@smtp.hushmail.com>
References: <20130225073103.777F214DBDE@smtp.hushmail.com>
Message-ID: <CAMKgpObBEQ7pnp47S1asLc-+oHmSPzu2JJk-dUJVgGM3JLkv4w@mail.gmail.com>

zeta,

The gaps are likely caused by pixels with no data. A simple method is to
run gdal_fillnodata.py on the original raster and then create the contours.

http://www.gdal.org/gdal_fillnodata.html



On Mon, Feb 25, 2013 at 1:01 PM, zeta <otrov at hush.ai> wrote:

> Hi,
>
> I have shape file from sample map, consisting of topological contours.
> However many contours have small gaps and I'm looking for a pointer how to
> connect those lines, automatically.
> Does ogr have a method or maybe more generally does anyone know of a tool,
> that would correctly close disconnected contours, which aren't labeled?
> Gaps are small - artifacts from graticules present in original image used
> as source for creating this vector.
>
> Thanks
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130225/a162f10a/attachment.html>

From even.rouault at mines-paris.org  Mon Feb 25 04:16:22 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 25 Feb 2013 13:16:22 +0100
Subject: [gdal-dev] gdalwarp crash
In-Reply-To: <CANzGYpSuZen6kXadwHAag00LsnYjznh6a15gf1-md5srVUUsZA@mail.gmail.com>
References: <CANzGYpRgSCU=FK5xec+u9Auqa-nnG7nr_r2=HH4pUthRWLPejw@mail.gmail.com>
	<201302251032.51034.even.rouault@mines-paris.org>
	<CANzGYpSuZen6kXadwHAag00LsnYjznh6a15gf1-md5srVUUsZA@mail.gmail.com>
Message-ID: <201302251316.22121.even.rouault@mines-paris.org>

Le lundi 25 f?vrier 2013 11:13:47, Simon Lyngby Kokkendorff a ?crit :
> Hi Even,
> 
> > When you say "crashed", you mean it exited with the integer overflow
> > error (to
> > be opposed as the windows that is displayed by Windows when a process
> > really
> > crashes) ?
> 
>   Yes, it didn't really crash, but exited with the integer overflow error
> message.
> 
> The issue is rather with the -wm 3072. The warping algorithm will currently
> 
> > cast a integer overflow error when a memory allocation above 2 GB is
> > attempted.
> > So you should try -wm 2047 or less. There's rarely a significant
> > advantage in
> > using so big values for -wm.
> 
> Ahh, I see. I was using win64 and just assumed that setting -vm high might
> speed things up.

See 
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#WillincreasingRAMincreasethespeedofgdalwarp

> Will try to create a tiled output image :-)
> By the way, I also tried using -multi to speed up (with otherwise the same
> options, I think), but got an error saying something like "Unable to aquire
> IOMutex" (unfortunately I haven't got the exact output).

Hum, this might be a side effect of a particular high value of -wm which cause 
particularly big, and consequently long, I/O operations. The mutex timeouts at 
10 minutes currently. Usually unitary I/O operations only last a few seconds 
or dozains seconds.

> 
> Thanks,
> Simon

From pierigis at gmail.com  Mon Feb 25 04:45:19 2013
From: pierigis at gmail.com (Pietro Rossin)
Date: Mon, 25 Feb 2013 04:45:19 -0800 (PST)
Subject: [gdal-dev] gdaladdo don't seem to work..
Message-ID: <1361796319202-5036638.post@n6.nabble.com>

Hi all
I'll like to add overviews to a 1 bit geotiff

the gdalinfo for this tiff is:
***************************************
Driver: GTiff/GeoTIFF
Files: test.tif
       test.tfw
       test.aux
Size is 292042, 284413
Coordinate System is `'
Origin = (2311161.564860595900000,5168752.558307543400000)
Pixel Size = (0.426789595821517,-0.426789595819635)
Image Structure Metadata:
  COMPRESSION=CCITTFAX4
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( 2311161.565, 5168752.558) 
Lower Left  ( 2311161.565, 5047368.049) 
Upper Right ( 2435802.052, 5168752.558) 
Lower Right ( 2435802.052, 5047368.049) 
Center      ( 2373481.808, 5108060.304) 
Band 1 Block=256x256 Type=Byte, ColorInterp=Palette
  Description = Layer_1
  NoData Value=0
  Metadata:
    LAYER_TYPE=athematic
  Image Structure Metadata:
    NBITS=1
  Color Table (RGB with 2 entries)
    0: 255,255,255,255
    1: 0,0,0,255
***************************************
I used:
gdaladdo -r average --config USE_RRD YES test.tif 2 4 8 16

The result is a file called  test.axe 20Gb big and a test.aux file (5Kb)

gdaladdo.exe don't seem to work, in taskmanager it uses 0 to 0.1 cpu%

Gdal 1.9.2 installed with osgeo4w.

By the way, which is the best way to create overviews for this kind of
tiff??

Thankyou
Pietro




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdaladdo-don-t-seem-to-work-tp5036638.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From silyko at gmail.com  Mon Feb 25 05:46:17 2013
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Mon, 25 Feb 2013 14:46:17 +0100
Subject: [gdal-dev] gdalwarp crash
In-Reply-To: <201302251316.22121.even.rouault@mines-paris.org>
References: <CANzGYpRgSCU=FK5xec+u9Auqa-nnG7nr_r2=HH4pUthRWLPejw@mail.gmail.com>
	<201302251032.51034.even.rouault@mines-paris.org>
	<CANzGYpSuZen6kXadwHAag00LsnYjznh6a15gf1-md5srVUUsZA@mail.gmail.com>
	<201302251316.22121.even.rouault@mines-paris.org>
Message-ID: <CANzGYpTY-Atpv6PKJVBVQZ0+a8OnbXfV3PMy-g8=inUp5X=RpQ@mail.gmail.com>

Hi Even,

  Thanks for the pointer - might try again with the -multi option. Anyway,
the -co TILED=YES is speeding things up drastically (something like a
factor 10).

  Cheers,
  Simon


On Mon, Feb 25, 2013 at 1:16 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le lundi 25 f?vrier 2013 11:13:47, Simon Lyngby Kokkendorff a ?crit :
> > Hi Even,
> >
> > > When you say "crashed", you mean it exited with the integer overflow
> > > error (to
> > > be opposed as the windows that is displayed by Windows when a process
> > > really
> > > crashes) ?
> >
> >   Yes, it didn't really crash, but exited with the integer overflow error
> > message.
> >
> > The issue is rather with the -wm 3072. The warping algorithm will
> currently
> >
> > > cast a integer overflow error when a memory allocation above 2 GB is
> > > attempted.
> > > So you should try -wm 2047 or less. There's rarely a significant
> > > advantage in
> > > using so big values for -wm.
> >
> > Ahh, I see. I was using win64 and just assumed that setting -vm high
> might
> > speed things up.
>
> See
>
> http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#WillincreasingRAMincreasethespeedofgdalwarp
>
> > Will try to create a tiled output image :-)
> > By the way, I also tried using -multi to speed up (with otherwise the
> same
> > options, I think), but got an error saying something like "Unable to
> aquire
> > IOMutex" (unfortunately I haven't got the exact output).
>
> Hum, this might be a side effect of a particular high value of -wm which
> cause
> particularly big, and consequently long, I/O operations. The mutex
> timeouts at
> 10 minutes currently. Usually unitary I/O operations only last a few
> seconds
> or dozains seconds.
>
> >
> > Thanks,
> > Simon
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130225/dcdbb4b9/attachment.html>

From szekerest at gmail.com  Mon Feb 25 07:57:08 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 25 Feb 2013 16:57:08 +0100
Subject: [gdal-dev] ogr2ogr with append fails to convert truncated fields
In-Reply-To: <CACALY+TxCVrOeG9w57xtXRStBU+P+FQXQdArahfw9N7phAuPQw@mail.gmail.com>
References: <CACALY+TxCVrOeG9w57xtXRStBU+P+FQXQdArahfw9N7phAuPQw@mail.gmail.com>
Message-ID: <CACALY+SKs1w7RCiJ2OqWrAfjMhFX1rQgTcp=14S--J7at6T90Q@mail.gmail.com>

Hi All,

Related to issue #3247 <http://trac.osgeo.org/gdal/ticket/3247> we
experienced, that if we use ogr2ogr to append source data to a shapefile
destination (by using the -append flag) and field name truncation is taking
place, the corresponding values are not copied.

This is because when setting up the field index map (in ogr2ogr) the
destination (truncated) field indexes are searched by the name of of the
source fields (the long names).

Since it's not always trivial to find the correct fields by names, how
about exposing the field map itself as an option, something like:

ogr2ogr -append -f "ESRI Shapefile" -fieldmap "0,1,2,3,4,5" destination.shp
 [source]


Would that workaround be sufficient?


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130225/42d8848f/attachment.html>

From even.rouault at mines-paris.org  Mon Feb 25 08:12:04 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 25 Feb 2013 17:12:04 +0100
Subject: [gdal-dev] ogr2ogr with append fails to convert truncated fields
In-Reply-To: <CACALY+SKs1w7RCiJ2OqWrAfjMhFX1rQgTcp=14S--J7at6T90Q@mail.gmail.com>
References: <CACALY+TxCVrOeG9w57xtXRStBU+P+FQXQdArahfw9N7phAuPQw@mail.gmail.com>
	<CACALY+SKs1w7RCiJ2OqWrAfjMhFX1rQgTcp=14S--J7at6T90Q@mail.gmail.com>
Message-ID: <201302251712.04917.even.rouault@mines-paris.org>

Le lundi 25 f?vrier 2013 16:57:08, Tamas Szekeres a ?crit :
> Hi All,
> 
> Related to issue #3247 <http://trac.osgeo.org/gdal/ticket/3247> we
> experienced, that if we use ogr2ogr to append source data to a shapefile
> destination (by using the -append flag) and field name truncation is taking
> place, the corresponding values are not copied.
> 
> This is because when setting up the field index map (in ogr2ogr) the
> destination (truncated) field indexes are searched by the name of of the
> source fields (the long names).
> 
> Since it's not always trivial to find the correct fields by names, how
> about exposing the field map itself as an option, something like:
> 
> ogr2ogr -append -f "ESRI Shapefile" -fieldmap "0,1,2,3,4,5" destination.shp
>  [source]
> 
> 
> Would that workaround be sufficient?

That would certainly work, although not particularly user friendly, but 
shapefiles are not that user friendly with their various limitations.

Perhaps you could just work with spatialite DBs as intermediate and convert to 
shapefile at the end if it is really needed ?

A potential alternative to -fieldmap would be to have :

class OGRLayer:
{
   public:
          virtual int GetFieldIndex(const char* pszFieldname);
}

int OGRLayer::GetFieldIndex(const char* pszFieldname)
{
	return GetLayerDefn()->GetFieldIndex(pszFieldname);
}

int OGRShapeLayer::GetFieldIndex(const char* pszFieldname)
{
        int idx = OGRLayer::GetFieldIndex(pszFieldname);
        if( idx >= 0 )
                return idx;
        /* otherwise implement here truncation logic to find best match */
        /* caution: if there are several potential matches (for example 
verylongcolumnname1 being truncated to verylongna and verylongcolumnname2 
truncated to verylong~1) and you are looking for verylongcolumnXXX then return 
-1 */
}

> 
> 
> Best regards,
> 
> Tamas

From chaitanya.ch at gmail.com  Mon Feb 25 08:14:59 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon, 25 Feb 2013 21:44:59 +0530
Subject: [gdal-dev] ogr2ogr with append fails to convert truncated fields
In-Reply-To: <CACALY+SKs1w7RCiJ2OqWrAfjMhFX1rQgTcp=14S--J7at6T90Q@mail.gmail.com>
References: <CACALY+TxCVrOeG9w57xtXRStBU+P+FQXQdArahfw9N7phAuPQw@mail.gmail.com>
	<CACALY+SKs1w7RCiJ2OqWrAfjMhFX1rQgTcp=14S--J7at6T90Q@mail.gmail.com>
Message-ID: <CAMKgpObqkDPbzs2MtwuhkhxTvzKMaiitdFO1n3CgSXJy_OBsNQ@mail.gmail.com>

Can we expect the fields to remain in the same order every time?
Hi All,

Related to issue #3247 <http://trac.osgeo.org/gdal/ticket/3247> we
experienced, that if we use ogr2ogr to append source data to a shapefile
destination (by using the -append flag) and field name truncation is taking
place, the corresponding values are not copied.

This is because when setting up the field index map (in ogr2ogr) the
destination (truncated) field indexes are searched by the name of of the
source fields (the long names).

Since it's not always trivial to find the correct fields by names, how
about exposing the field map itself as an option, something like:

ogr2ogr -append -f "ESRI Shapefile" -fieldmap "0,1,2,3,4,5" destination.shp
 [source]


Would that workaround be sufficient?


Best regards,

Tamas


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130225/8bb75be9/attachment-0001.html>

From stefan.moebius at actix.com  Mon Feb 25 08:11:41 2013
From: stefan.moebius at actix.com (Stefan Moebius)
Date: Mon, 25 Feb 2013 16:11:41 +0000
Subject: [gdal-dev] Suppressing GDAL error output globally/by default in a
 Java application
Message-ID: <8EE8A6A66A077849890664FC04756ABD62697E0D@LON-MB00.actix.com>

Hi,

I'm using GDAL (1.7.3) from within JBoss. Having GDAL report errors to stderr obviously isn't that helpful in such an environment.

Now I found that in native code, I could just call CPLSetErrorHandler() to get rid of this issue. However, in Java, there only seems to be PushErrorHandler(), which is documented as being thread-local.

How can I suppress error output globally (or by default) from Java?
Is there an option I could set after initializing GDAL?

Regards,
Stefan
Actix is the trading name of Actix Limited, with registered offices at: 
200 Hammersmith Road, London, W6 7DL, United Kingdom. 
Actix Limited is registered in England and Wales with company no. 
02660615 and VAT no. GB 858742087. Managing Director of Actix Limited: Bill McHale.

Actix GmbH is registered in (Sitz der Gesellschaft): Dresden, Germany with company no. Handelsregister Amtsgericht Dresden 
HR B 19204 and VAT no. (Ust-IDNr.) DE 813 115 475. Managing 
Director of Actix GmbH (Geschaeftsfuehrer): Bill McHale. 

Information in this message is confidential and may be legally 
privileged. If you are not the intended recipient, please notify the 
sender, and please delete the message from your system 
immediately.  The statements and opinions expressed in this 
message are those of the author and do not necessarily reflect 
those of Actix. 

Whilst Actix takes every effort to ensure this message is virus 
free it cannot guarantee that this is the case. It is the 
recipient's responsibility to carry out such virus checks as 
it deems necessary

From even.rouault at mines-paris.org  Mon Feb 25 09:48:45 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 25 Feb 2013 18:48:45 +0100
Subject: [gdal-dev] Suppressing GDAL error output globally/by default in
	a Java application
In-Reply-To: <8EE8A6A66A077849890664FC04756ABD62697E0D@LON-MB00.actix.com>
References: <8EE8A6A66A077849890664FC04756ABD62697E0D@LON-MB00.actix.com>
Message-ID: <201302251848.45272.even.rouault@mines-paris.org>

Le lundi 25 f?vrier 2013 17:11:41, Stefan Moebius a ?crit :
> Hi,
> 
> I'm using GDAL (1.7.3) from within JBoss. Having GDAL report errors to
> stderr obviously isn't that helpful in such an environment.
> 
> Now I found that in native code, I could just call CPLSetErrorHandler() to
> get rid of this issue. However, in Java, there only seems to be
> PushErrorHandler(), which is documented as being thread-local.
> 
> How can I suppress error output globally (or by default) from Java?
> Is there an option I could set after initializing GDAL?

I've just added gdal.SetErrorHandler(java.lang.String) for GDAL 1.10 ( see 
http://gdal.org/java/org/gdal/gdal/gdal.html#SetErrorHandler%28java.lang.String%29 
)

Otherwise on Unix systems, you can define the CPL_LOG environment variable to 
/dev/null (on Windows to NUL) (should also be doable with 
gdal.SetConfigOption("CPL_LOG", "/dev/null") provided you call it very early, 
i.e. before the first GDAL error emitted )

> 
> Regards,
> Stefan
> Actix is the trading name of Actix Limited, with registered offices at:
> 200 Hammersmith Road, London, W6 7DL, United Kingdom.
> Actix Limited is registered in England and Wales with company no.
> 02660615 and VAT no. GB 858742087. Managing Director of Actix Limited: Bill
> McHale.
> 
> Actix GmbH is registered in (Sitz der Gesellschaft): Dresden, Germany with
> company no. Handelsregister Amtsgericht Dresden HR B 19204 and VAT no.
> (Ust-IDNr.) DE 813 115 475. Managing
> Director of Actix GmbH (Geschaeftsfuehrer): Bill McHale.
> 
> Information in this message is confidential and may be legally
> privileged. If you are not the intended recipient, please notify the
> sender, and please delete the message from your system
> immediately.  The statements and opinions expressed in this
> message are those of the author and do not necessarily reflect
> those of Actix.
> 
> Whilst Actix takes every effort to ensure this message is virus
> free it cannot guarantee that this is the case. It is the
> recipient's responsibility to carry out such virus checks as
> it deems necessary
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From szekerest at gmail.com  Mon Feb 25 10:53:22 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 25 Feb 2013 19:53:22 +0100
Subject: [gdal-dev] ogr2ogr with append fails to convert truncated fields
In-Reply-To: <201302251712.04917.even.rouault@mines-paris.org>
References: <CACALY+TxCVrOeG9w57xtXRStBU+P+FQXQdArahfw9N7phAuPQw@mail.gmail.com>
	<CACALY+SKs1w7RCiJ2OqWrAfjMhFX1rQgTcp=14S--J7at6T90Q@mail.gmail.com>
	<201302251712.04917.even.rouault@mines-paris.org>
Message-ID: <CACALY+ROfT5bHFaVQwObLwE7mMV2L=g34V9FLcN5hE=Pq+QbVw@mail.gmail.com>

So we seem to have 3 divergent options to provide a work around:

1. Expose fieldmap setting to let the user decide the order of the fields
to be copied.
2. Modify GetFieldIndex to provide the name based lookup by the truncated
name (for the shape driver specifically)
3. Provide an option to instruct ogr2ogr to consider the source and the
destination has the same field structure (order).

Which would be the most reasonable?

I personally in favour of #3 or #1.  #3 is easier to implement, but #1 is
more customizable.
With regards to #2 we might continue to encounter non trivial matches.

Best regards,

Tamas





2013/2/25 Even Rouault <even.rouault at mines-paris.org>

> Le lundi 25 f?vrier 2013 16:57:08, Tamas Szekeres a ?crit :
> > Hi All,
> >
> > Related to issue #3247 <http://trac.osgeo.org/gdal/ticket/3247> we
> > experienced, that if we use ogr2ogr to append source data to a shapefile
> > destination (by using the -append flag) and field name truncation is
> taking
> > place, the corresponding values are not copied.
> >
> > This is because when setting up the field index map (in ogr2ogr) the
> > destination (truncated) field indexes are searched by the name of of the
> > source fields (the long names).
> >
> > Since it's not always trivial to find the correct fields by names, how
> > about exposing the field map itself as an option, something like:
> >
> > ogr2ogr -append -f "ESRI Shapefile" -fieldmap "0,1,2,3,4,5"
> destination.shp
> >  [source]
> >
> >
> > Would that workaround be sufficient?
>
> That would certainly work, although not particularly user friendly, but
> shapefiles are not that user friendly with their various limitations.
>
> Perhaps you could just work with spatialite DBs as intermediate and
> convert to
> shapefile at the end if it is really needed ?
>
> A potential alternative to -fieldmap would be to have :
>
> class OGRLayer:
> {
>    public:
>           virtual int GetFieldIndex(const char* pszFieldname);
> }
>
> int OGRLayer::GetFieldIndex(const char* pszFieldname)
> {
>         return GetLayerDefn()->GetFieldIndex(pszFieldname);
> }
>
> int OGRShapeLayer::GetFieldIndex(const char* pszFieldname)
> {
>         int idx = OGRLayer::GetFieldIndex(pszFieldname);
>         if( idx >= 0 )
>                 return idx;
>         /* otherwise implement here truncation logic to find best match */
>         /* caution: if there are several potential matches (for example
> verylongcolumnname1 being truncated to verylongna and verylongcolumnname2
> truncated to verylong~1) and you are looking for verylongcolumnXXX then
> return
> -1 */
> }
>
> >
> >
> > Best regards,
> >
> > Tamas
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130225/5777f5a9/attachment.html>

From j_landmann at gmx.de  Mon Feb 25 11:27:57 2013
From: j_landmann at gmx.de (Johannes Landmann)
Date: Mon, 25 Feb 2013 20:27:57 +0100
Subject: [gdal-dev] Georeference EUMETSAT's NDVI (hdf5)
Message-ID: <20130225192757.138880@gmx.net>


Dear GDAL-friends,

I am quite new to GDAL and I've got a substantial question:

For my bachelor thesis I work with EUMETSAT's NDVI data published in HDF5 format. These data are "produced" in the geostationary satellite projection but do not contain geospatial reference in the HDF5 dataset.

I have already tried out to assign the projection to the images with  "gdalwarp -s_srs SR-ORG:81" as well as "gdalwarp -t_srs SR-ORG:81" but with no result.

What am I doing wrong? Is there another (better) way to "reassign" the projection?

Thanks in advance,

Johannes

From warmerdam at pobox.com  Mon Feb 25 11:54:41 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 25 Feb 2013 11:54:41 -0800
Subject: [gdal-dev] Georeference EUMETSAT's NDVI (hdf5)
In-Reply-To: <20130225192757.138880@gmx.net>
References: <20130225192757.138880@gmx.net>
Message-ID: <CA+YzLBfR017cujzf1FTCMXJvTVShKdv7yoFGt8zx7t-xdk8x+A@mail.gmail.com>

Johannes,

I do not believe you can refer to spatialreference.org coordinate
systems using the SR-ORG:<n> format.  I see things may work with:

gdalsrsinfo http://spatialreference.org/ref/sr-org/81/

If the HDF5 datasets have an affine transformation set already in the
geostationary projection you may find that this works:

gdalwarp -s_srs http://spatialreference.org/ref/sr-org/81/ -t_srs
<yourchoice> in.tif out.tif

to reproject or or even:

gdal_translate -a_srs  http://spatialreference.org/ref/sr-org/81/ in.tif out.tif

to just assign the coordinate system to the file.

If the source file doesn't have the affine transformation set properly
you will need to set that too with gdal_translate, using -a_ullr.

In cases like this it is helpful to provide an http/ftp pointer to a
single dataset demonstrating the issue if they are public.

Best regards,
Frank

On Mon, Feb 25, 2013 at 11:27 AM, Johannes Landmann <j_landmann at gmx.de> wrote:
>
> Dear GDAL-friends,
>
> I am quite new to GDAL and I've got a substantial question:
>
> For my bachelor thesis I work with EUMETSAT's NDVI data published in HDF5 format. These data are "produced" in the geostationary satellite projection but do not contain geospatial reference in the HDF5 dataset.
>
> I have already tried out to assign the projection to the images with  "gdalwarp -s_srs SR-ORG:81" as well as "gdalwarp -t_srs SR-ORG:81" but with no result.
>
> What am I doing wrong? Is there another (better) way to "reassign" the projection?
>
> Thanks in advance,
>
> Johannes
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

From srp at geo.ku.dk  Mon Feb 25 12:31:31 2013
From: srp at geo.ku.dk (Simon Richard Proud)
Date: Mon, 25 Feb 2013 20:31:31 +0000
Subject: [gdal-dev] Georeference EUMETSAT's NDVI (hdf5)
In-Reply-To: <20130225192757.138880@gmx.net>
References: <20130225192757.138880@gmx.net>
Message-ID: <6C59A8A933C9B6409067456EC20EAB36621A85D0@P2KITMBX06WC03.unicph.domain>

Hi,
I use the following to warp SEVIRI images:

ulx_msg=-5570248.832537
uly_msg=5570248.832537
lrx_msg=5567248.429179
lry_msg=-5567248.429179
gdal_translate -a_srs ?"+proj=geos +a=6378169 +b=6356583.8 +lon_0=0 +h=35785831" -a_ullr $ulx_msg $uly_msg $lrx_msg $lry_msg (infile) (outfile)
gdalwarp -s_srs '+proj=geos +lon_0=0.0 +h=35785831 +x_0=0.0' -t_srs '+proj=latlong +datum=WGS84' -tr 0.04 0.04 -te -40 -40 40 40 -order 3 (infile) (outfile)

The correct parameters for a, b, lon_0 and h can be found from the weekly MSG position reports, the above values were valid for MSG-2 in late December. Change -tr and -te as needed for whatever geographical area you're interested in.
Hope that helps,
Simon
________________________________________
From: gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org] on behalf of Johannes Landmann [j_landmann at gmx.de]
Sent: 25 February 2013 20:27
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Georeference EUMETSAT's NDVI (hdf5)

Dear GDAL-friends,

I am quite new to GDAL and I've got a substantial question:

For my bachelor thesis I work with EUMETSAT's NDVI data published in HDF5 format. These data are "produced" in the geostationary satellite projection but do not contain geospatial reference in the HDF5 dataset.

I have already tried out to assign the projection to the images with  "gdalwarp -s_srs SR-ORG:81" as well as "gdalwarp -t_srs SR-ORG:81" but with no result.

What am I doing wrong? Is there another (better) way to "reassign" the projection?

Thanks in advance,

Johannes
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



From geodesy99 at gmail.com  Mon Feb 25 19:09:30 2013
From: geodesy99 at gmail.com (Michael Patrick)
Date: Mon, 25 Feb 2013 19:09:30 -0800
Subject: [gdal-dev] Contour Gaps
Message-ID: <CAC54+E6AUuDD8ECYEqLhufERbuHCwdcUPpQN-e1ZO97afzf=1g@mail.gmail.com>

> I have shape file from sample map, consisting of topological contours.
However many contours have small gaps and I'm looking for a pointer how to
connect those lines, automatically. Does ogr have a method or maybe more
generally does anyone know of a tool, that would correctly close
disconnected contours, which aren't labeled? Gaps are small - artifacts
from graticules present in original image used as source for creating this
vector.

Lots of assumptions, lots of dependencies on how convoluted the contours
are, the ratio of the gap length to contour spacing (in
the horizontal plane) etc. and how much automation and inspection you
can tolerate. Do you have Z values for the contours? Or any common
attribute which shares across the gaps?

Michael Patrick
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130225/d21b211b/attachment.html>

From chaitanya.ch at gmail.com  Mon Feb 25 21:41:17 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 26 Feb 2013 11:11:17 +0530
Subject: [gdal-dev] Closing disconnected contours
In-Reply-To: <20130225185008.BD48914DBE1@smtp.hushmail.com>
References: <20130225073103.777F214DBDE@smtp.hushmail.com>
	<CAMKgpObBEQ7pnp47S1asLc-+oHmSPzu2JJk-dUJVgGM3JLkv4w@mail.gmail.com>
	<20130225185008.BD48914DBE1@smtp.hushmail.com>
Message-ID: <CAMKgpObq855ihQkhjdudeK+1ZB+yHOVFU-cxHyY0BrhMy9KD2Q@mail.gmail.com>

zeta,

Are the lines in topo.tif contour lines? How did you generate them?


On Tue, Feb 26, 2013 at 12:20 AM, zeta <otrov at hush.ai> wrote:

> Chaitanya kumar CH wrote:
> >
> >zeta,
> >
> >The gaps are likely caused by pixels with no data. A simple method is to
> >run gdal_fillnodata.py on the original raster and then create the
> contours.
> >
> >http://www.gdal.org/gdal_fillnodata.html
>
> Thanks Chaitanya,
>
> that's excellent news, as I previously searched for algorithms about curve
> reconstruction, and none seemed easy for implementation. I was driven by
> approach using Delaunay Triangulation,  referenced to Amenta "The crust and
> the beta -skeleton: Combinatorial curve reconstruction" and plastically
>  explained i.e. here:
> http://valis.cs.uiuc.edu/~sariel/research/CG/applets/Crust/Crust.html but
> I thought to look for shortcut if possible, without reinventing
> implementation.
>
> I tried the script, and I get some gaps filled, but most aren't. I used
> -md parameter of 20px, but changed that value from 10 to 300 without
> significant improvement. Then I used mask file, which I assume works as in
> OpenCV Inpaint function, by using mask as a helper for gap detection, but
> without success.
>
> I'm attaching example image, and mask image, which I used to test the
> script, in a hope that someone can tell me if better results are possible.
>
> Thanks




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130226/3e796eb5/attachment.html>

From otrov at hush.ai  Mon Feb 25 23:23:20 2013
From: otrov at hush.ai (zeta)
Date: Tue, 26 Feb 2013 08:23:20 +0100
Subject: [gdal-dev] Closing disconnected contours
In-Reply-To: <CAMKgpObq855ihQkhjdudeK+1ZB+yHOVFU-cxHyY0BrhMy9KD2Q@mail.gmail.com>
References: <20130225073103.777F214DBDE@smtp.hushmail.com>	<CAMKgpObBEQ7pnp47S1asLc-+oHmSPzu2JJk-dUJVgGM3JLkv4w@mail.gmail.com>	<20130225185008.BD48914DBE1@smtp.hushmail.com>
	<CAMKgpObq855ihQkhjdudeK+1ZB+yHOVFU-cxHyY0BrhMy9KD2Q@mail.gmail.com>
Message-ID: <20130226072320.4F86A14DBE1@smtp.hushmail.com>

Chaitanya kumar CH wrote:
>
>Are the lines in topo.tif contour lines? How did you generate them?


Hi Chaitanya,

I segmented scanned image, and then did thinning on separation that interested me - that is topo contours. Here is link to a part of scanned image that I used as example: http://i.imgur.com/Wyv147m.png

I thought also that maybe gdal_fillnodata.py doesn't like thinning (1px contours) and I did dilation on same image to get topo contours with 3px width, but result was worse.
Did I expected too much, or maybe my image wasn't prepared corectly for gdal algorithm used in gdal_fillnodata.py?


From chaitanya.ch at gmail.com  Mon Feb 25 23:32:51 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 26 Feb 2013 13:02:51 +0530
Subject: [gdal-dev] Closing disconnected contours
In-Reply-To: <20130226072320.4F86A14DBE1@smtp.hushmail.com>
References: <20130225073103.777F214DBDE@smtp.hushmail.com>
	<CAMKgpObBEQ7pnp47S1asLc-+oHmSPzu2JJk-dUJVgGM3JLkv4w@mail.gmail.com>
	<20130225185008.BD48914DBE1@smtp.hushmail.com>
	<CAMKgpObq855ihQkhjdudeK+1ZB+yHOVFU-cxHyY0BrhMy9KD2Q@mail.gmail.com>
	<20130226072320.4F86A14DBE1@smtp.hushmail.com>
Message-ID: <CAMKgpOaZQMc0iihiy+Abua6dpP6NJyVL8OX6RWEK5aeKD+6Qqw@mail.gmail.com>

zeta,

gdal_fillnodata is intended for raster images, like a DEM. Your image is a
rendered map.
The image you provided is not suitable for unsupervised processing,
especially with GDAL.


On Tue, Feb 26, 2013 at 12:53 PM, zeta <otrov at hush.ai> wrote:

> Chaitanya kumar CH wrote:
> >
> >Are the lines in topo.tif contour lines? How did you generate them?
>
>
> Hi Chaitanya,
>
> I segmented scanned image, and then did thinning on separation that
> interested me - that is topo contours. Here is link to a part of scanned
> image that I used as example: http://i.imgur.com/Wyv147m.png
>
> I thought also that maybe gdal_fillnodata.py doesn't like thinning (1px
> contours) and I did dilation on same image to get topo contours with 3px
> width, but result was worse.
> Did I expected too much, or maybe my image wasn't prepared corectly for
> gdal algorithm used in gdal_fillnodata.py?
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130226/beff9831/attachment.html>

From otrov at hush.ai  Mon Feb 25 23:42:16 2013
From: otrov at hush.ai (zeta)
Date: Tue, 26 Feb 2013 08:42:16 +0100
Subject: [gdal-dev] Closing disconnected contours
In-Reply-To: <CAMKgpOaZQMc0iihiy+Abua6dpP6NJyVL8OX6RWEK5aeKD+6Qqw@mail.gmail.com>
References: <20130225073103.777F214DBDE@smtp.hushmail.com>	<CAMKgpObBEQ7pnp47S1asLc-+oHmSPzu2JJk-dUJVgGM3JLkv4w@mail.gmail.com>	<20130225185008.BD48914DBE1@smtp.hushmail.com>	<CAMKgpObq855ihQkhjdudeK+1ZB+yHOVFU-cxHyY0BrhMy9KD2Q@mail.gmail.com>	<20130226072320.4F86A14DBE1@smtp.hushmail.com>
	<CAMKgpOaZQMc0iihiy+Abua6dpP6NJyVL8OX6RWEK5aeKD+6Qqw@mail.gmail.com>
Message-ID: <20130226074217.144EA14DBD4@smtp.hushmail.com>

Chaitanya kumar CH wrote:
>
>gdal_fillnodata is intended for raster images, like a DEM. Your image is a
>rendered map.
>The image you provided is not suitable for unsupervised processing,
>especially with GDAL.

OK than, Chaitanya, thanks for letting me know.

Cheers


From otrov at hush.ai  Mon Feb 25 23:57:31 2013
From: otrov at hush.ai (zeta)
Date: Tue, 26 Feb 2013 08:57:31 +0100
Subject: [gdal-dev] Contour Gaps
In-Reply-To: <CAMKgpOaZQMc0iihiy+Abua6dpP6NJyVL8OX6RWEK5aeKD+6Qqw@mail.gmail.com>
References: <20130225073103.777F214DBDE@smtp.hushmail.com>	<CAMKgpObBEQ7pnp47S1asLc-+oHmSPzu2JJk-dUJVgGM3JLkv4w@mail.gmail.com>	<20130225185008.BD48914DBE1@smtp.hushmail.com>	<CAMKgpObq855ihQkhjdudeK+1ZB+yHOVFU-cxHyY0BrhMy9KD2Q@mail.gmail.com>	<20130226072320.4F86A14DBE1@smtp.hushmail.com>
	<CAMKgpOaZQMc0iihiy+Abua6dpP6NJyVL8OX6RWEK5aeKD+6Qqw@mail.gmail.com>
Message-ID: <20130226075732.11BF914DBD4@smtp.hushmail.com>

> Lots of assumptions, lots of dependencies on how convoluted the contours
> are, the ratio of the gap length to contour spacing (in
> the horizontal plane) etc. and how much automation and inspection you
> can tolerate. Do you have Z values for the contours? Or any common
> attribute which shares across the gaps?

Michael,

in my previous discussion with Chaitanya I attached sample images. Although I can label Z values, as can be seen from those sample images, it will requite too much manual work because of the gaps, which is just the same as if I use the time to close gaps manually.

I thought that there is some general approach to solve this problem, and that gdal list is where I can be advised like couple of times before.

I'll do more searching and if nothing comes out, I'll take the image with gaps through python/scipy, and then:
 - do spline fit on existing lines and connect all gap points within certain radius,
 - find some sweet spot depending on connected curves direction angle and connection line direction angle
 - decide which connection line to keep

If this approach fails for some reason, there is backup plan to tangle myself with Voronoi diagrams and Delaunay triangulations, which I hope would require less time than doing vectorization by hand.


From pierigis at gmail.com  Tue Feb 26 00:11:40 2013
From: pierigis at gmail.com (Pietro Rossin)
Date: Tue, 26 Feb 2013 09:11:40 +0100
Subject: [gdal-dev] gdaladdo don't seem to work..
In-Reply-To: <1361796319202-5036638.post@n6.nabble.com>
References: <1361796319202-5036638.post@n6.nabble.com>
Message-ID: <CAPwOVCHMWZ_kXzhd4btUnKBC7AxO79DR0+rHjOoCzxTZ4dyCwQ@mail.gmail.com>

I was wrong, it was working slow.
But at the end it leaves a big file with extension .axe. Is this necessary?
I know pyramids are inside the .aux file..
Thank you
Pietro


2013/2/25 Pietro Rossin <pierigis at gmail.com>

> Hi all
> I'll like to add overviews to a 1 bit geotiff
>
> the gdalinfo for this tiff is:
> ***************************************
> Driver: GTiff/GeoTIFF
> Files: test.tif
>        test.tfw
>        test.aux
> Size is 292042, 284413
> Coordinate System is `'
> Origin = (2311161.564860595900000,5168752.558307543400000)
> Pixel Size = (0.426789595821517,-0.426789595819635)
> Image Structure Metadata:
>   COMPRESSION=CCITTFAX4
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( 2311161.565, 5168752.558)
> Lower Left  ( 2311161.565, 5047368.049)
> Upper Right ( 2435802.052, 5168752.558)
> Lower Right ( 2435802.052, 5047368.049)
> Center      ( 2373481.808, 5108060.304)
> Band 1 Block=256x256 Type=Byte, ColorInterp=Palette
>   Description = Layer_1
>   NoData Value=0
>   Metadata:
>     LAYER_TYPE=athematic
>   Image Structure Metadata:
>     NBITS=1
>   Color Table (RGB with 2 entries)
>     0: 255,255,255,255
>     1: 0,0,0,255
> ***************************************
> I used:
> gdaladdo -r average --config USE_RRD YES test.tif 2 4 8 16
>
> The result is a file called  test.axe 20Gb big and a test.aux file (5Kb)
>
> gdaladdo.exe don't seem to work, in taskmanager it uses 0 to 0.1 cpu%
>
> Gdal 1.9.2 installed with osgeo4w.
>
> By the way, which is the best way to create overviews for this kind of
> tiff??
>
> Thankyou
> Pietro
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdaladdo-don-t-seem-to-work-tp5036638.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130226/634b04b5/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Tue Feb 26 01:42:33 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 26 Feb 2013 09:42:33 +0000 (UTC)
Subject: [gdal-dev] gdaladdo don't seem to work..
References: <1361796319202-5036638.post@n6.nabble.com>
	<CAPwOVCHMWZ_kXzhd4btUnKBC7AxO79DR0+rHjOoCzxTZ4dyCwQ@mail.gmail.com>
Message-ID: <loom.20130226T102433-971@post.gmane.org>

Pietro Rossin <pierigis <at> gmail.com> writes:

> 
> 
> I was wrong, it was working slow.But at the end it leaves a big file with
extension .axe. Is this necessary?
> I know pyramids are inside the .aux file..
> Thank you
> Pietro

I guess that after exceeding some 2 GB or 4 GB limit the pyramids are actually
in that big spill file and .aux behaves as an index.

Your data are 1 bit and probably very effectively compressed with CCITTFAX4. It
may be that Erdas style overviews do not compress very well and I would have a
try what happens with TIFF overviews created with something like

gdaladdo -ro -r average --config COMPRESS_OVERVIEW CCITTFAX4 test.tif 2 4 8 16
32 64 128 256


-Jukka Rahkonen-


From hbobenicio at gmail.com  Tue Feb 26 03:50:34 2013
From: hbobenicio at gmail.com (Hugo Benicio)
Date: Tue, 26 Feb 2013 08:50:34 -0300
Subject: [gdal-dev] Dissolve shapefile using GDAL/OGR
Message-ID: <CAKGFd-zX5HftF611LHoWhzv6kVXMcXMAB5PJsxKMJC_D_pXEiA@mail.gmail.com>

Hi!

So, My question is pretty simple.
I'm developing a software in C++ that uses GDAL/OGR library to handle
geoprocessing computations. What I need to do now is to dissolve a
shapefile by a column (similiar to the Quantum GIS tool "Vector >
Geoprocessing Tools > Dissolve").
Does GDAL/OGR already support this operation (or eases this somehow)? Do I
have to implement it by myself? Do I need to use another library to easily
acomplish this task? (GRASS?).

Thanks in advance,
Hugo Ben?cio.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130226/19b9e868/attachment.html>

From pierigis at gmail.com  Tue Feb 26 05:36:22 2013
From: pierigis at gmail.com (Pietro Rossin)
Date: Tue, 26 Feb 2013 05:36:22 -0800 (PST)
Subject: [gdal-dev] gdaladdo don't seem to work..
In-Reply-To: <loom.20130226T102433-971@post.gmane.org>
References: <1361796319202-5036638.post@n6.nabble.com>
	<CAPwOVCHMWZ_kXzhd4btUnKBC7AxO79DR0+rHjOoCzxTZ4dyCwQ@mail.gmail.com>
	<loom.20130226T102433-971@post.gmane.org>
Message-ID: <CAPwOVCFPVrWF9JG5obd_6a8y8J3rVeXkoE7pzcG-Ku4ER_ZYfQ@mail.gmail.com>

Hello Jukka
thanks for your reply
The axe file I think isn't necessary.
If I delete it qgis can open and use pyramids...
I got a good compromise between render and pyramid dimension with this
command

gdaladdo -r nearest --config COMPRESS_OVERVIEW deflate --config USE_RRD YES
test.tif 4 16 32 64

I get an aux file that is 420Mb (original gtiff is 1060Mb) and if I delete
the .axe file qgis recognizes pyramids.

the CCITTFAX4 compression method is good for the compression of the
original image not for pyramids, because with this algorithm pyramid zoom
is too dark. With deflate or jpeg the result is more pleasant.

By the way
--config USE_RRD YES should tell gdaladdo to create aux/rrd pyramids, that
can be used with esri product (ex arcgis)
Arcgis instead don't recognize these pyramids and asks if I want to create
them (and it can't because of an unknown error..).
Any idea?
Thanks again
Pietro




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdaladdo-don-t-seem-to-work-tp5036638p5036957.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130226/b732f41e/attachment.html>

From ao at t-kartor.se  Tue Feb 26 05:38:26 2013
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Tue, 26 Feb 2013 14:38:26 +0100
Subject: [gdal-dev] Dissolve shapefile using GDAL/OGR
In-Reply-To: <CAKGFd-zX5HftF611LHoWhzv6kVXMcXMAB5PJsxKMJC_D_pXEiA@mail.gmail.com>
References: <CAKGFd-zX5HftF611LHoWhzv6kVXMcXMAB5PJsxKMJC_D_pXEiA@mail.gmail.com>
Message-ID: <512CBAD2.3080701@t-kartor.se>

I would use PostGIS - they have comprehensive, very efficient and in my 
experience 100 % correct set of spatial processing tools.

> Hi!
>
> So, My question is pretty simple.
> I'm developing a software in C++ that uses GDAL/OGR library to handle 
> geoprocessing computations. What I need to do now is to dissolve a 
> shapefile by a column (similiar to the Quantum GIS tool "Vector > 
> Geoprocessing Tools > Dissolve").
> Does GDAL/OGR already support this operation (or eases this somehow)? 
> Do I have to implement it by myself? Do I need to use another library 
> to easily acomplish this task? (GRASS?).
>
> Thanks in advance,
> Hugo Ben?cio.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Best Regards

Andreas Oxenstierna
T-Kartan Produkt AB
mobile: +46 733 206831
mailto: ao at t-kartor.se
http://www.t-kartor.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130226/3a109eb0/attachment.html>

From pierigis at gmail.com  Tue Feb 26 05:52:22 2013
From: pierigis at gmail.com (Pietro Rossin)
Date: Tue, 26 Feb 2013 14:52:22 +0100
Subject: [gdal-dev] gdaladdo don't seem to work..
In-Reply-To: <CAPwOVCFPVrWF9JG5obd_6a8y8J3rVeXkoE7pzcG-Ku4ER_ZYfQ@mail.gmail.com>
References: <1361796319202-5036638.post@n6.nabble.com>
	<CAPwOVCHMWZ_kXzhd4btUnKBC7AxO79DR0+rHjOoCzxTZ4dyCwQ@mail.gmail.com>
	<loom.20130226T102433-971@post.gmane.org>
	<CAPwOVCFPVrWF9JG5obd_6a8y8J3rVeXkoE7pzcG-Ku4ER_ZYfQ@mail.gmail.com>
Message-ID: <CAPwOVCHBZfcr1CaLG+VxA=VpFjX=-geTCmxWXBKRCj=aC58DZQ@mail.gmail.com>

Ok, I found the answer for the aux/rrd pyramid here

http://lists.osgeo.org/pipermail/gdal-dev/2008-August/017850.html
Now I'm trying
Bie


2013/2/26 Pietro Rossin <pierigis at gmail.com>

> Hello Jukka
> thanks for your reply
> The axe file I think isn't necessary.
> If I delete it qgis can open and use pyramids...
> I got a good compromise between render and pyramid dimension with this
> command
>
> gdaladdo -r nearest --config COMPRESS_OVERVIEW deflate --config USE_RRD
> YES test.tif 4 16 32 64
>
> I get an aux file that is 420Mb (original gtiff is 1060Mb) and if I delete
> the .axe file qgis recognizes pyramids.
>
> the CCITTFAX4 compression method is good for the compression of the
> original image not for pyramids, because with this algorithm pyramid zoom
> is too dark. With deflate or jpeg the result is more pleasant.
>
> By the way
> --config USE_RRD YES should tell gdaladdo to create aux/rrd pyramids, that
> can be used with esri product (ex arcgis)
> Arcgis instead don't recognize these pyramids and asks if I want to create
> them (and it can't because of an unknown error..).
> Any idea?
> Thanks again
> Pietro
>
> ------------------------------
> View this message in context: Re: gdaladdo don't seem to work..<http://osgeo-org.1560.n6.nabble.com/gdaladdo-don-t-seem-to-work-tp5036638p5036957.html>
>
> Sent from the GDAL - Dev mailing list archive<http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html>at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130226/b6fb621e/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Feb 26 06:16:02 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 26 Feb 2013 14:16:02 +0000 (UTC)
Subject: [gdal-dev] Dissolve shapefile using GDAL/OGR
References: <CAKGFd-zX5HftF611LHoWhzv6kVXMcXMAB5PJsxKMJC_D_pXEiA@mail.gmail.com>
Message-ID: <loom.20130226T150433-186@post.gmane.org>

Hugo Benicio <hbobenicio <at> gmail.com> writes:

> 
> Hi!
> So, My question is pretty simple.
> I'm developing a software in C++ that uses GDAL/OGR library to handle
geoprocessing computations. What I need to do now is to dissolve a shapefile by
a column (similiar to the Quantum GIS tool "Vector > Geoprocessing Tools >
Dissolve").
> Does GDAL/OGR already support this operation (or eases this somehow)? Do I
have to implement it by myself? Do I need to use another library to easily
acomplish this task? (GRASS?).

Sure at least to some extent. The following command is utilising Spatialite SQL
and it is building unions by attribure "YTA". I suppose GDAL needs to be build
with Spatialite and Spatialite with GEOS. I tested with GDAL-dev Windows build
from gisinternals.com.

Test with ogrinfo

C:\GDAL_dev>ogrinfo  union_test.shp -dialect sqlite 
-sql "select ST_union(Geometry),YTA from union_test GROUP BY YTA"

Conversion into shapefile

C:\GDAL_dev>ogr2ogr -f "ESRI Shapefile" union.shp union_test.shp -dialect sqlite 
-sql "select ST_union(Geometry),YTA from union_test GROUP BY YTA"


-Jukka Rahkonen-



From lcelati at latitude-geosystems.com  Tue Feb 26 08:48:09 2013
From: lcelati at latitude-geosystems.com (image)
Date: Tue, 26 Feb 2013 08:48:09 -0800 (PST)
Subject: [gdal-dev] Gdal : import .ecw into postgis database
Message-ID: <1361897289108-5037040.post@n6.nabble.com>

Hello,

I'm working on windows 7 64bits.

I would like import into my db several .ecw files. Up to know i have
followed this following tutorial :

http://trac.osgeo.org/osgeo4w/wiki/pkg-gdal-ecw

I have installed the ECW SDK and paste the *dll from
redistributable\vc90\win32\ to C:\Windows\SysWOW64. 

But it does not work...What is the next step? I am on the right path? 

Thank you to throw light for me. 

Kind regards. 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Gdal-import-ecw-into-postgis-database-tp5037040.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From hbobenicio at gmail.com  Tue Feb 26 09:09:43 2013
From: hbobenicio at gmail.com (Hugo Benicio)
Date: Tue, 26 Feb 2013 14:09:43 -0300
Subject: [gdal-dev] Dissolve shapefile using GDAL/OGR
In-Reply-To: <loom.20130226T150433-186@post.gmane.org>
References: <CAKGFd-zX5HftF611LHoWhzv6kVXMcXMAB5PJsxKMJC_D_pXEiA@mail.gmail.com>
	<loom.20130226T150433-186@post.gmane.org>
Message-ID: <CAKGFd-ya0QuY0jJ+7FberUWOE0dckXNjmxXWBwCN0gHNy82RYA@mail.gmail.com>

*Andreas Oxenstierna,*
Thanks for your answer, I'll take a look on PostGIS to see if it can be
useful in my case, but I probably don't need to use a DBMS.

*Jukka Rahkonen,*
Thanks for your answer.
I've tried that command but I'm probably missing Spatialite. Maybe I need
to recompile my GDAL to use it.
That's the output:

ogrinfo WasaReduzidoFinal.shp -dialect sqlite -sql "select
ST_union(Geometry), Lan_ID from WasaReduzidoFinal GROUP BY Lan_ID"
INFO: Open of `WasaReduzidoFinal.shp'
      using driver `ESRI Shapefile' successful.
ERROR 1: Undefined function 'ST_union' used.

*Peter Halls,*
Thanks for your answer.*
*
This is probably what I'm intended to do.
My shapefiles are constructed among a lot of consecutive intersections in a
way that polygons would never overlap, so I'm ok with that.

Thank you all for your quick answers!

Best Regards,
Hugo Ben?cio.


On Tue, Feb 26, 2013 at 11:16 AM, Jukka Rahkonen
<jukka.rahkonen at mmmtike.fi>wrote:

> Hugo Benicio <hbobenicio <at> gmail.com> writes:
>
> >
> > Hi!
> > So, My question is pretty simple.
> > I'm developing a software in C++ that uses GDAL/OGR library to handle
> geoprocessing computations. What I need to do now is to dissolve a
> shapefile by
> a column (similiar to the Quantum GIS tool "Vector > Geoprocessing Tools >
> Dissolve").
> > Does GDAL/OGR already support this operation (or eases this somehow)? Do
> I
> have to implement it by myself? Do I need to use another library to easily
> acomplish this task? (GRASS?).
>
> Sure at least to some extent. The following command is utilising
> Spatialite SQL
> and it is building unions by attribure "YTA". I suppose GDAL needs to be
> build
> with Spatialite and Spatialite with GEOS. I tested with GDAL-dev Windows
> build
> from gisinternals.com.
>
> Test with ogrinfo
>
> C:\GDAL_dev>ogrinfo  union_test.shp -dialect sqlite
> -sql "select ST_union(Geometry),YTA from union_test GROUP BY YTA"
>
> Conversion into shapefile
>
> C:\GDAL_dev>ogr2ogr -f "ESRI Shapefile" union.shp union_test.shp -dialect
> sqlite
> -sql "select ST_union(Geometry),YTA from union_test GROUP BY YTA"
>
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130226/1096dfa5/attachment-0001.html>

From jgomezdans at gmail.com  Tue Feb 26 09:50:18 2013
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Tue, 26 Feb 2013 17:50:18 +0000
Subject: [gdal-dev] Problems linking without curl
Message-ID: <CAMWde5omzL2LYidcxUHtmR7wz5WJDjr1jdj=E8V=FmxDhkzx6A@mail.gmail.com>

Hi,
Trying to compile GDAL on RHEL6 x864_64. It's failing looking for libcurl
when linking. I don't need curl in this machine, and it's not installed. My
configure line is as follows:

./configure --prefix=/home/User/bin/ --with-libtiff=internal
--with-hdf4=/usr/lib64/hdf  --without-curl --without-expat --without-mysql
--without-dwgdirect --without-odbc --with-python --without-oci
--without-sqlite3 --without-oci-include --without-oci-lib --without-grib

Unrelated to curl, in order to configure HDF4, I need the line above.
However, I then need to go into GDALmake.opt and edit the content of
HDF4_INCLUDE to point to /usr/include/hdf.

But how can I get rid of the curl dependency?

Thanks!
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130226/8d20f3be/attachment.html>

From andre+joost at nurfuerspam.de  Tue Feb 26 10:41:47 2013
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Tue, 26 Feb 2013 19:41:47 +0100
Subject: [gdal-dev] Gdal : import .ecw into postgis database
In-Reply-To: <1361897289108-5037040.post@n6.nabble.com>
References: <1361897289108-5037040.post@n6.nabble.com>
Message-ID: <kgj000$u3p$1@ger.gmane.org>

Am 26.02.2013 17:48, schrieb image:
> Hello,
>
> I'm working on windows 7 64bits.
>
> I would like import into my db several .ecw files. Up to know i have
> followed this following tutorial :
>
> http://trac.osgeo.org/osgeo4w/wiki/pkg-gdal-ecw
>
> I have installed the ECW SDK and paste the *dll from
> redistributable\vc90\win32\ to C:\Windows\SysWOW64.
>
> But it does not work...What is the next step? I am on the right path?
>
> Thank you to throw light for me.
>

I just downloaded an ecw file from Geoscience Australia, and it opens in 
QGIS without problems, as well as in gdal-dev by gisinternals.

The drivers are in the bin directory of Quantum GIS. Not sure how 
gdal-dev finds them...

Greetings,
Andr? Joost


From JPalmer at linz.govt.nz  Tue Feb 26 13:49:27 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed, 27 Feb 2013 10:49:27 +1300
Subject: [gdal-dev] ogr WFS GML parse error with WFS 1.1.0
Message-ID: <2034722324.89438.1361915372231.JavaMail.root@s-101-LINZ>

When use WFS to pull a large GML object it fails:

ogrinfo -dialect sqlite -sql "select id, shape from \"v:x1571\" WHERE id = 3241251" WFS:'http://wfs.data.linz.govt.nz/84f646e35be34843abd9cee6085b50d6/v/x1571/wfs'
ERROR 1: XML parsing of GML file failed : mismatched tag at line 2, column 3621825

data parses fine in chrome:

http://wfs.data.linz.govt.nz/84f646e35be34843abd9cee6085b50d6/v/x1571/wfs?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=v:x1571&FILTER=%3CFilter%20xmlns%3D%22http:%2F%2Fwww.opengis.net%2Fogc%22%20xmlns:v%3D%22http:%2F%2Fdata.linz.govt.nz%2Fns%2Fv%22%20xmlns:gml%3D%22http:%2F%2Fwww.opengis.net%2Fgml%22%3E%3CPropertyIsEqualTo%3E%3CPropertyName%3Eid%3C%2FPropertyName%3E%3CLiteral%3E3241251%3C%2FLiteral%3E%3C%2FPropertyIsEqualTo%3E%3C%2FFilter%3E


However if I force WFS 1.0.0 it works:

ogrinfo -dialect sqlite -sql "select id, shape from \"v:x1571\" WHERE id = 3241251" WFS:'http://wfs.data.linz.govt.nz/84f646e35be34843abd9cee6085b50d6/v/x1571/wfs?VERSION=1.0.0'
Any ideas? Maybe axis order issue?

Here's my command run with debug on:

https://gist.github.com/palmerj/958f64ea6601c906235e



________________________________
This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130227/711631da/attachment.html>

From JPalmer at linz.govt.nz  Tue Feb 26 13:57:40 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed, 27 Feb 2013 10:57:40 +1300
Subject: [gdal-dev] ogr WFS GML parse error with WFS 1.1.0
In-Reply-To: <2034722324.89438.1361915372231.JavaMail.root@s-101-LINZ>
References: <2034722324.89438.1361915372231.JavaMail.root@s-101-LINZ>
Message-ID: <1248652931.89619.1361915865171.JavaMail.root@s-101-LINZ>

As a follow up why can't I run:

-sql "select id, ST_SimplifyPreserveTopology(shape, 0.005) from \"v:x1571\" :

for my SQLITE SQL?

I get a message back saying:

ERROR 1: Undefined function 'ST_SimplifyPreserveTopology' used

I also tired just SimplifyPreserveTopology. Same result.

When I put debug on and I don't use the spatialite function it says:

SQLITE: SpatiaLite DB found !
OGR: Unloading VirtualOGR module

Which makes me think I have spatialite support.

Here my gdal-config --dep-libs:

-L/usr/lib -lgeos_c -lodbc -lodbcinst -lexpat -lxerces-c -lpthread -ljasper -lnetcdf -lhdf5 -lmfhdfalt -ldfalt -lgif -ljpeg -lpng -L/usr/lib -lpq -lz -lpthread -lm -lrt -ldl -lspatialite -L/usr/lib/x86_64-linux-gnu -lcurl -Wl,-Bsymbolic-functions -Wl,-z,relro -L/usr/lib -lNCSEcw -lNCSEcwC -lNCSCnet -lNCSUtil -L/opt/FileGDB_API/lib -lFileGDBAPI -L/usr/lib -lxml2

I'm running GDAL trunk from about mid last week.

________________________________
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Jeremy Palmer
Sent: Wednesday, 27 February 2013 10:49 a.m.
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] ogr WFS GML parse error with WFS 1.1.0

When use WFS to pull a large GML object it fails:

ogrinfo -dialect sqlite -sql "select id, shape from \"v:x1571\" WHERE id = 3241251" WFS:'http://wfs.data.linz.govt.nz/84f646e35be34843abd9cee6085b50d6/v/x1571/wfs'
ERROR 1: XML parsing of GML file failed : mismatched tag at line 2, column 3621825

data parses fine in chrome:

http://wfs.data.linz.govt.nz/84f646e35be34843abd9cee6085b50d6/v/x1571/wfs?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=v:x1571&FILTER=%3CFilter%20xmlns%3D%22http:%2F%2Fwww.opengis.net%2Fogc%22%20xmlns:v%3D%22http:%2F%2Fdata.linz.govt.nz%2Fns%2Fv%22%20xmlns:gml%3D%22http:%2F%2Fwww.opengis.net%2Fgml%22%3E%3CPropertyIsEqualTo%3E%3CPropertyName%3Eid%3C%2FPropertyName%3E%3CLiteral%3E3241251%3C%2FLiteral%3E%3C%2FPropertyIsEqualTo%3E%3C%2FFilter%3E


However if I force WFS 1.0.0 it works:

ogrinfo -dialect sqlite -sql "select id, shape from \"v:x1571\" WHERE id = 3241251" WFS:'http://wfs.data.linz.govt.nz/84f646e35be34843abd9cee6085b50d6/v/x1571/wfs?VERSION=1.0.0'
Any ideas? Maybe axis order issue?

Here's my command run with debug on:

https://gist.github.com/palmerj/958f64ea6601c906235e


________________________________
This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130227/f9b47857/attachment.html>

From even.rouault at mines-paris.org  Tue Feb 26 14:09:02 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 26 Feb 2013 23:09:02 +0100
Subject: [gdal-dev] ogr WFS GML parse error with WFS 1.1.0
In-Reply-To: <1248652931.89619.1361915865171.JavaMail.root@s-101-LINZ>
References: <2034722324.89438.1361915372231.JavaMail.root@s-101-LINZ>
	<1248652931.89619.1361915865171.JavaMail.root@s-101-LINZ>
Message-ID: <201302262309.02530.even.rouault@mines-paris.org>

Le mardi 26 f?vrier 2013 22:57:40, Jeremy Palmer a ?crit :
> As a follow up why can't I run:
> 
> -sql "select id, ST_SimplifyPreserveTopology(shape, 0.005) from \"v:x1571\"
> :
> 
> for my SQLITE SQL?

should be fixed by r25691

I haven't looked at your original issue with the GML parsing error. The best 
would be to download the GetFeature answer, and then open it with ogrinfo to 
see if you can reproduce. If so, just go to "line 2, column 3621825" and look 
what's wrong there.

From jukka.rahkonen at mmmtike.fi  Tue Feb 26 14:24:11 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 26 Feb 2013 22:24:11 +0000 (UTC)
Subject: [gdal-dev] ogr WFS GML parse error with WFS 1.1.0
References: <2034722324.89438.1361915372231.JavaMail.root@s-101-LINZ>
Message-ID: <loom.20130226T231909-217@post.gmane.org>

Jeremy Palmer <JPalmer <at> linz.govt.nz> writes:

> 
> 
> When use WFS to pull a large GML object it fails:
> 
> ?
> ogrinfo -dialect sqlite -sql "select id, shape from \"v:x1571\" 
WHERE id = 3241251"
WFS:'http://wfs.data.linz.govt.nz/84f646e35be34843abd9cee6085b50d6/v/x1571/wfs'
> ERROR 1: XML parsing of GML file failed : mismatched tag at line 2, 
column 3621825

I can reproduce, but the mismatched tag is reported to be in another 
column (3621905) for me. If I save the GML from your link on disk and 
run ogrinfo for the local file there is no error at all.

I used gdal-dev version from January 17th.

-Jukka Rahkonen-


From JPalmer at linz.govt.nz  Tue Feb 26 15:38:46 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed, 27 Feb 2013 12:38:46 +1300
Subject: [gdal-dev] ogr WFS GML parse error with WFS 1.1.0
In-Reply-To: <loom.20130226T231909-217@post.gmane.org>
References: <2034722324.89438.1361915372231.JavaMail.root@s-101-LINZ>
	<loom.20130226T231909-217@post.gmane.org>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0F70C15FD4@prdlsmmsg01.ad.linz.govt.nz>

So could it be a http streaming issue?

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Jukka Rahkonen
Sent: Wednesday, 27 February 2013 11:24 a.m.
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] ogr WFS GML parse error with WFS 1.1.0

Jeremy Palmer <JPalmer <at> linz.govt.nz> writes:

>
>
> When use WFS to pull a large GML object it fails:
>
>
> ogrinfo -dialect sqlite -sql "select id, shape from \"v:x1571\"
WHERE id = 3241251"
WFS:'http://wfs.data.linz.govt.nz/84f646e35be34843abd9cee6085b50d6/v/x1571/wfs'
> ERROR 1: XML parsing of GML file failed : mismatched tag at line 2,
column 3621825

I can reproduce, but the mismatched tag is reported to be in another
column (3621905) for me. If I save the GML from your link on disk and
run ogrinfo for the local file there is no error at all.

I used gdal-dev version from January 17th.

-Jukka Rahkonen-

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From JPalmer at linz.govt.nz  Tue Feb 26 16:05:13 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed, 27 Feb 2013 13:05:13 +1300
Subject: [gdal-dev] ogr WFS GML parse error with WFS 1.1.0
In-Reply-To: <201302262309.02530.even.rouault@mines-paris.org>
References: <2034722324.89438.1361915372231.JavaMail.root@s-101-LINZ>
	<1248652931.89619.1361915865171.JavaMail.root@s-101-LINZ>
	<201302262309.02530.even.rouault@mines-paris.org>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0F70C1604F@prdlsmmsg01.ad.linz.govt.nz>

> should be fixed by r25691

Thanks. That works when using SimplifyPreserveTopology :)


This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From jukka.rahkonen at mmmtike.fi  Tue Feb 26 21:23:17 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 27 Feb 2013 05:23:17 +0000 (UTC)
Subject: [gdal-dev] ogr WFS GML parse error with WFS 1.1.0
References: <2034722324.89438.1361915372231.JavaMail.root@s-101-LINZ>
	<loom.20130226T231909-217@post.gmane.org>
	<666FB8D75E95AE42965A0E76A5E5337E0F70C15FD4@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <loom.20130227T061318-367@post.gmane.org>

Jeremy Palmer <JPalmer <at> linz.govt.nz> writes:

> 
> So could it be a http streaming issue?

Actually the error that is reported in your debug log file has happened also in
the same location: "mismatched tag at line 2, column 3621905"

That character in that column seems to be "/" in the beginning of the last
closing tag "</wfs:FeatureCollection>"

</gml:LinearRing>
</gml:interior>
</gml:Polygon>
</gml:polygonMember>
</gml:MultiPolygon>
</v:shape>
</v:x1571>
</gml:featureMembers>
</wfs:FeatureCollection>
 *

-Jukka Rahkonen-


From JPalmer at linz.govt.nz  Wed Feb 27 00:34:43 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed, 27 Feb 2013 21:34:43 +1300
Subject: [gdal-dev] ogr WFS GML parse error with WFS 1.1.0
In-Reply-To: <loom.20130227T061318-367@post.gmane.org>
References: <2034722324.89438.1361915372231.JavaMail.root@s-101-LINZ>
	<loom.20130226T231909-217@post.gmane.org>
	<666FB8D75E95AE42965A0E76A5E5337E0F70C15FD4@prdlsmmsg01.ad.linz.govt.nz>,
	<loom.20130227T061318-367@post.gmane.org>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0F7091EAA2@prdlsmmsg01.ad.linz.govt.nz>

Hi Jukka,

But that's legal XML and GML is it not?

Jeremy
________________________________________
From: gdal-dev-bounces at lists.osgeo.org [gdal-dev-bounces at lists.osgeo.org] On Behalf Of Jukka Rahkonen [jukka.rahkonen at mmmtike.fi]
Sent: Wednesday, 27 February 2013 6:23 p.m.
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] ogr WFS GML parse error with WFS 1.1.0

Jeremy Palmer <JPalmer <at> linz.govt.nz> writes:

>
> So could it be a http streaming issue?

Actually the error that is reported in your debug log file has happened also in
the same location: "mismatched tag at line 2, column 3621905"

That character in that column seems to be "/" in the beginning of the last
closing tag "</wfs:FeatureCollection>"

</gml:LinearRing>
</gml:interior>
</gml:Polygon>
</gml:polygonMember>
</gml:MultiPolygon>
</v:shape>
</v:x1571>
</gml:featureMembers>
</wfs:FeatureCollection>
 *

-Jukka Rahkonen-

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From jukka.rahkonen at mmmtike.fi  Wed Feb 27 01:26:10 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 27 Feb 2013 09:26:10 +0000 (UTC)
Subject: [gdal-dev] ogr WFS GML parse error with WFS 1.1.0
References: <2034722324.89438.1361915372231.JavaMail.root@s-101-LINZ>
	<loom.20130226T231909-217@post.gmane.org>
	<666FB8D75E95AE42965A0E76A5E5337E0F70C15FD4@prdlsmmsg01.ad.linz.govt.nz>,
	<loom.20130227T061318-367@post.gmane.org>
	<666FB8D75E95AE42965A0E76A5E5337E0F7091EAA2@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <loom.20130227T093840-782@post.gmane.org>

Jeremy Palmer <JPalmer <at> linz.govt.nz> writes:

> 
> Hi Jukka,
> 
> But that's legal XML and GML is it not?
> 
> Jeremy

Sorry, I have no idea about that. I am not a developer but just a somewhat
experienced user and if something works it is legal enough for me. I have a
feeling that this GML is OK because it looks pretty much similar to what
Geoserver WFS is sending out, because GDAL can read it OK if first saved on disk
and because Kosmo GIS can also read data from v:x1571 feature type.

-Jukka- 


From Stefan.Blumentrath at nina.no  Wed Feb 27 04:03:03 2013
From: Stefan.Blumentrath at nina.no (SBL)
Date: Wed, 27 Feb 2013 04:03:03 -0800 (PST)
Subject: [gdal-dev] ESRI binary grid (.hdr)
Message-ID: <1361966583933-5037238.post@n6.nabble.com>

Hi,

I have numerous ESRI binary grids in hdr labled format (one .hdr and one
.bil file for each dataset) which I would like to load into GRASS using
r.in.gdal.
There i get the following error-messages:

"ERROR 3: Failed to read scanline 775."
and
"ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 775"

I get the same error-messages when using gdal_translate or (for example)
gdalinfo -stats on the datasets.

In ArcGIS I can convert the data to a different format, so I suspect there
must be something with GDAL. Any ideas?

Thanks in advance.

Stefan



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/ESRI-binary-grid-hdr-tp5037238.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Wed Feb 27 05:33:29 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 27 Feb 2013 14:33:29 +0100
Subject: [gdal-dev] ESRI binary grid (.hdr)
In-Reply-To: <1361966583933-5037238.post@n6.nabble.com>
References: <1361966583933-5037238.post@n6.nabble.com>
Message-ID: <201302271433.29307.even.rouault@mines-paris.org>

Le mercredi 27 f?vrier 2013 13:03:03, SBL a ?crit :
> Hi,
> 
> I have numerous ESRI binary grids in hdr labled format (one .hdr and one
> .bil file for each dataset) which I would like to load into GRASS using
> r.in.gdal.
> There i get the following error-messages:
> 
> "ERROR 3: Failed to read scanline 775."
> and
> "ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 775"
> 
> I get the same error-messages when using gdal_translate or (for example)
> gdalinfo -stats on the datasets.
> 
> In ArcGIS I can convert the data to a different format, so I suspect there
> must be something with GDAL. Any ideas?

The best would be to open a GDAL Trac ticket with the .hdr and .bil attached 
to it.

> 
> Thanks in advance.
> 
> Stefan
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/ESRI-binary-grid-hdr-tp5037238.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Stefan.Blumentrath at nina.no  Wed Feb 27 05:42:19 2013
From: Stefan.Blumentrath at nina.no (SBL)
Date: Wed, 27 Feb 2013 05:42:19 -0800 (PST)
Subject: [gdal-dev] ESRI binary grid (.hdr)
In-Reply-To: <201302271433.29307.even.rouault@mines-paris.org>
References: <1361966583933-5037238.post@n6.nabble.com>
	<201302271433.29307.even.rouault@mines-paris.org>
Message-ID: <1361972539163-5037261.post@n6.nabble.com>

Hi

And thanks for the reply.

Just now I discovered, that the header (.hdr-file) which I got together with
the .bil files was the problem.
Firstly the heder was in the ESRI type of order (see:
http://lists.osgeo.org/pipermail/gdal-dev/2011-November/030939.html) and
secondly it did not match the data properly, which is why I am actually
happy about the error-messages / strictness of GDAL (compared to ArcGIS).
Otherwise I would have encountered problems later in the processing (esp.
wrong values and extent) which would be much worse.

Thanks again!

Cheers
Stefan



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/ESRI-binary-grid-hdr-tp5037238p5037261.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From info at knowhow-la.de  Wed Feb 27 05:57:56 2013
From: info at knowhow-la.de (Helmut Seidel M.A.)
Date: Wed, 27 Feb 2013 14:57:56 +0100
Subject: [gdal-dev] Newby: Compile gdal with perl on Windows / deployment
Message-ID: <512E10E4.5040001@knowhow-la.de>

Hello everybody,

in my comming up perl-project I need to use the Geo::Gdal - module. As I 
understand I need to compile gdal from sources first and then build the 
perl bindings. So far so good, but as I'm not a C/C++ developer I ran 
into a host of problems. The first thing I tried, was to install MinGW 
and compile gdal with the "--with-perl" option, which ran for about two 
hours but broke of with a message complaining that perl 5.8 was not 
found on my system (I have ActivePerl 5.16 installed) - as far as I 
could decipher the message - I tried gdal 1.90 and gdal 1.92.
I then tried to compile it using VC 10 which seemed to work but I didn't 
find a possibility where to put the "--with-perl" option - anyway I 
tried to compile perl using perl Makefile.PL which imediately complained 
about being not able to find gdal-conf (which I couldn't find either). I 
guess there would be lots of complaints after that, but I only got that far.
I'm sure my errors have something to do with setting up paths and 
compilation options, but I dont't know which and where to set them.
So here's my question: has anybody a blow by blow account for C/C++ 
dummies how to set up Geo::Gdal? That would be great!
Another question is how to deploy the finished application to other 
computers.

I hope you could understand all of my English and my questions are not 
too stupid - but I spend two working days on it so far so I'm a little 
desperate now.

Thanks and regards

From benedetta.onori at gmail.com  Wed Feb 27 06:23:31 2013
From: benedetta.onori at gmail.com (B.O)
Date: Wed, 27 Feb 2013 06:23:31 -0800 (PST)
Subject: [gdal-dev] problems with gdal reprojection (from pixel to
	latitude/longitude)
Message-ID: <1361975011981-5037268.post@n6.nabble.com>

I have a satellite images of this type (link to example:
http://navigator.eumetsat.int/smartEditor/preview/msg-level-1-5.jpg). I have
to reproject the image to obtain latitude and longitude values for every
pixel. I use gdal library (http://www.gdal.org/), and I follow some public
example. The problem is that longitude and latitude values do not corrispond
to real values that i suppose...
I link a short version of my code. I do not use class GDALDataset because I
have geotransform matrix yet (values are g0, g1, g2, g3, g4, g5).


OGRSpatialReference *poSRS_Proj = new OGRSpatialReference("WGS84");
poSRS_Proj->importFromEPSG( 4326 );
// Define Geographic coordinate system - set it to WGS84.
OGRSpatialReference *poSRS_Geog = new OGRSpatialReference("WGS84");
poSRS_Geog->importFromEPSG( 4326 ); // WGS84
// Set up the coordinate transform (projected-to-geographic).
OGRCoordinateTransformation *poCT_Proj2Geog;
poCT_Proj2Geog = OGRCreateCoordinateTransformation( poSRS_Proj, poSRS_Geog
);

double lats = g3 + g4 * (row_pixel) + g5 * (column_pixel); 
double lons = g0 + g1 * (row_pixel) + g2 * (column_pixel);

double lat0 = lats;
double lon0 = lons;
// Projected coordinates to latlon
poCT_Proj2Geog->Transform(1, &lat0, &lon0);


Outputs are: latitude = 1.06815e+06, longitude = -1.06815e+06.
I tried several values for row_pixel and column_pixel but i get always the
same problem.
Can someone help me???? Thanks!



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/problems-with-gdal-reprojection-from-pixel-to-latitude-longitude-tp5037268.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ari.jolma at gmail.com  Wed Feb 27 08:17:58 2013
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 27 Feb 2013 18:17:58 +0200
Subject: [gdal-dev] Newby: Compile gdal with perl on Windows / deployment
In-Reply-To: <512E10E4.5040001@knowhow-la.de>
References: <512E10E4.5040001@knowhow-la.de>
Message-ID: <512E31B6.9030003@gmail.com>

Helmut,

First, I don't recommend it to anybody to compile Geo::GDAL on Windows. 
I used to do it regularly using the MinGW/MSYS environment and 
self-compiled Perl (now I think I would use Strawberry Perl). Here are 
some links to instructions I've written (at least some of them):

http://trac.osgeo.org/geoinformatica/wiki/BuildWithMingw

http://trac.osgeo.org/gdal/wiki/Perl

I tried to build some things in Windows lately (Windows 8 and maybe 
64bit) but gave up after some time and frustration. I'm not sure what 
the main frustration was (the Geoinformatica stack contains much more 
than just Geo::GDAL).

I don't know of binary builds other than what I used to do. My own is 
getting a bit old already

http://geoinformatics.aalto.fi/files/Geoinformatica/win32/

Best regards,

Ari

On 02/27/2013 03:57 PM, Helmut Seidel M.A. wrote:
> Hello everybody,
>
> in my comming up perl-project I need to use the Geo::Gdal - module. As 
> I understand I need to compile gdal from sources first and then build 
> the perl bindings. So far so good, but as I'm not a C/C++ developer I 
> ran into a host of problems. The first thing I tried, was to install 
> MinGW and compile gdal with the "--with-perl" option, which ran for 
> about two hours but broke of with a message complaining that perl 5.8 
> was not found on my system (I have ActivePerl 5.16 installed) - as far 
> as I could decipher the message - I tried gdal 1.90 and gdal 1.92.
> I then tried to compile it using VC 10 which seemed to work but I 
> didn't find a possibility where to put the "--with-perl" option - 
> anyway I tried to compile perl using perl Makefile.PL which imediately 
> complained about being not able to find gdal-conf (which I couldn't 
> find either). I guess there would be lots of complaints after that, 
> but I only got that far.
> I'm sure my errors have something to do with setting up paths and 
> compilation options, but I dont't know which and where to set them.
> So here's my question: has anybody a blow by blow account for C/C++ 
> dummies how to set up Geo::Gdal? That would be great!
> Another question is how to deploy the finished application to other 
> computers.
>
> I hope you could understand all of my English and my questions are not 
> too stupid - but I spend two working days on it so far so I'm a little 
> desperate now.
>
> Thanks and regards
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From woodbri at swoodbridge.com  Wed Feb 27 08:59:32 2013
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed, 27 Feb 2013 11:59:32 -0500
Subject: [gdal-dev] Newby: Compile gdal with perl on Windows / deployment
In-Reply-To: <512E31B6.9030003@gmail.com>
References: <512E10E4.5040001@knowhow-la.de> <512E31B6.9030003@gmail.com>
Message-ID: <512E3B74.9060508@swoodbridge.com>

You might want to check on the PostGIS list as Regina has a MinGW/MSYS 
tools for building PostGIS and I think this includes GDAL for the raster 
support, but I may be mistaken.

-Steve

On 2/27/2013 11:17 AM, Ari Jolma wrote:
> Helmut,
>
> First, I don't recommend it to anybody to compile Geo::GDAL on Windows.
> I used to do it regularly using the MinGW/MSYS environment and
> self-compiled Perl (now I think I would use Strawberry Perl). Here are
> some links to instructions I've written (at least some of them):
>
> http://trac.osgeo.org/geoinformatica/wiki/BuildWithMingw
>
> http://trac.osgeo.org/gdal/wiki/Perl
>
> I tried to build some things in Windows lately (Windows 8 and maybe
> 64bit) but gave up after some time and frustration. I'm not sure what
> the main frustration was (the Geoinformatica stack contains much more
> than just Geo::GDAL).
>
> I don't know of binary builds other than what I used to do. My own is
> getting a bit old already
>
> http://geoinformatics.aalto.fi/files/Geoinformatica/win32/
>
> Best regards,
>
> Ari
>
> On 02/27/2013 03:57 PM, Helmut Seidel M.A. wrote:
>> Hello everybody,
>>
>> in my comming up perl-project I need to use the Geo::Gdal - module. As
>> I understand I need to compile gdal from sources first and then build
>> the perl bindings. So far so good, but as I'm not a C/C++ developer I
>> ran into a host of problems. The first thing I tried, was to install
>> MinGW and compile gdal with the "--with-perl" option, which ran for
>> about two hours but broke of with a message complaining that perl 5.8
>> was not found on my system (I have ActivePerl 5.16 installed) - as far
>> as I could decipher the message - I tried gdal 1.90 and gdal 1.92.
>> I then tried to compile it using VC 10 which seemed to work but I
>> didn't find a possibility where to put the "--with-perl" option -
>> anyway I tried to compile perl using perl Makefile.PL which imediately
>> complained about being not able to find gdal-conf (which I couldn't
>> find either). I guess there would be lots of complaints after that,
>> but I only got that far.
>> I'm sure my errors have something to do with setting up paths and
>> compilation options, but I dont't know which and where to set them.
>> So here's my question: has anybody a blow by blow account for C/C++
>> dummies how to set up Geo::Gdal? That would be great!
>> Another question is how to deploy the finished application to other
>> computers.
>>
>> I hope you could understand all of my English and my questions are not
>> too stupid - but I spend two working days on it so far so I'm a little
>> desperate now.
>>
>> Thanks and regards
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From JPalmer at linz.govt.nz  Wed Feb 27 09:39:23 2013
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Thu, 28 Feb 2013 06:39:23 +1300
Subject: [gdal-dev] ogr WFS GML parse error with WFS 1.1.0
In-Reply-To: <loom.20130227T093840-782@post.gmane.org>
References: <2034722324.89438.1361915372231.JavaMail.root@s-101-LINZ>
	<loom.20130226T231909-217@post.gmane.org>
	<666FB8D75E95AE42965A0E76A5E5337E0F70C15FD4@prdlsmmsg01.ad.linz.govt.nz>,
	<loom.20130227T061318-367@post.gmane.org>
	<666FB8D75E95AE42965A0E76A5E5337E0F7091EAA2@prdlsmmsg01.ad.linz.govt.nz>,
	<loom.20130227T093840-782@post.gmane.org>
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0F7091EAA3@prdlsmmsg01.ad.linz.govt.nz>

No problem at all.

I'm sure it has something do with the new streaming option in GDAL/OGR 1.10. If I run the query with the OGR_WFS_USE_STREAMING config set to NO it works:

ogrinfo --config OGR_WFS_USE_STREAMING NO -dialect sqlite -sql "select id, shape from \"v:x1571\" WHERE id = 3241251" WFS:'http://wfs.data.linz.govt.nz/84f646e35be34843abd9cee6085b50d6/v/x1571/wfs'

Cheers,
Jeremy

> Sorry, I have no idea about that. I am not a developer but just a somewhat
> experienced user and if something works it is legal enough for me. I have a
> feeling that this GML is OK because it looks pretty much similar to what
> Geoserver WFS is sending out, because GDAL can read it OK if first saved on disk
> and because Kosmo GIS can also read data from v:x1571 feature type.

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From even.rouault at mines-paris.org  Wed Feb 27 11:11:38 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 27 Feb 2013 20:11:38 +0100
Subject: [gdal-dev] ogr WFS GML parse error with WFS 1.1.0
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0F7091EAA3@prdlsmmsg01.ad.linz.govt.nz>
References: <2034722324.89438.1361915372231.JavaMail.root@s-101-LINZ>
	<loom.20130227T093840-782@post.gmane.org>
	<666FB8D75E95AE42965A0E76A5E5337E0F7091EAA3@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <201302272011.38137.even.rouault@mines-paris.org>

Le mercredi 27 f?vrier 2013 18:39:23, Jeremy Palmer a ?crit :
> No problem at all.
> 
> I'm sure it has something do with the new streaming option in GDAL/OGR
> 1.10. If I run the query with the OGR_WFS_USE_STREAMING config set to NO
> it works:
> 
> ogrinfo --config OGR_WFS_USE_STREAMING NO -dialect sqlite -sql "select id,
> shape from \"v:x1571\" WHERE id = 3241251"
> WFS:'http://wfs.data.linz.govt.nz/84f646e35be34843abd9cee6085b50d6/v/x1571
> /wfs'

This server has a strange behaviour. I've attempted several downloads of 
"http://wfs.data.linz.govt.nz/84f646e35be34843abd9cee6085b50d6/v/x1571/wfs?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=v:x1571&FILTER=%3CFilter%20xmlns%3D%22http:
%2F%2Fwww.opengis.net%2Fogc%22%20xmlns:v%3D%22http:
%2F%2Fdata.linz.govt.nz%2Fns%2Fv%22%20xmlns:gml%3D%22http:
%2F%2Fwww.opengis.net%2Fgml%22%3E%3CPropertyIsEqualTo%3E%3CPropertyName%3Eid%3C%2FPropertyName%3E%3CLiteral%3E3241251%3C%2FLiteral%3E%3C%2FPropertyIsEqualTo%3E%3C%2FFilter%3E" 
with just wget

The interesting thing is that there are not identical. One thing that changes 
is the timestamp of course (and if that was the only thing, that would be OK), 
but not only. See :


$ diff -u dump2_reformat.gml dump4_reformat.gml
--- dump2_reformat.gml	2013-02-27 19:42:32.574353029 +0100
+++ dump4_reformat.gml	2013-02-27 20:01:56.164665700 +0100
@@ -1,5 +1,5 @@
 <?xml version="1.0" encoding="UTF-8"?>
-<wfs:FeatureCollection xmlns:v="http://data.linz.govt.nz/ns/v" 
xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:xlink="http://www.w3.org/1999/xlink" 
xmlns:ows="http://www.opengis.net/ows" xmlns:wfs="http://www.opengis.net/wfs" 
numberOfFeatures="1" timeStamp="2013-02-27T18:38:34.794Z" 
xsi:schemaLocation="http://www.opengis.net/wfs 
http://schemas.opengis.net/wfs/1.1.0/wfs.xsd http://data.linz.govt.nz/ns/v 
http://wfs.data.linz.govt.nz/84f646e35be34843abd9cee6085b50d6/v/x1571/wfs?service=WFS&amp;version=1.1.0&amp;request=DescribeFeatureType&amp;typeName=v%3Ax1571">
+<wfs:FeatureCollection xmlns:ogc="http://www.opengis.net/ogc" 
xmlns:g="http://data.linz.govt.nz/ns/g" xmlns:wfs="http://www.opengis.net/wfs" 
xmlns:v="http://data.linz.govt.nz/ns/v" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:r="http://data.linz.govt.nz/ns/r" xmlns:ows="http://www.opengis.net/ows" 
xmlns:gml="http://www.opengis.net/gml" 
xmlns:xlink="http://www.w3.org/1999/xlink" numberOfFeatures="1" 
timeStamp="2013-02-27T18:59:47.339Z" 
xsi:schemaLocation="http://www.opengis.net/wfs 
http://schemas.opengis.net/wfs/1.1.0/wfs.xsd http://data.linz.govt.nz/ns/v 
http://wfs.data.linz.govt.nz/84f646e35be34843abd9cee6085b50d6/v/x1571/wfs?service=WFS&amp;version=1.1.0&amp;request=DescribeFeatureType&amp;typeName=v%3Ax1571">
   <gml:featureMembers>
     <v:x1571 gml:id="x1571.3241251">
       <v:id>3241251</v:id>
@@ -10,8 +10,8 @@
       <v:land_district>Southland</v:land_district>
       <v:calc_area>10104190696</v:calc_area>
       <v:shape>
-        <gml:MultiPolygon srsDimension="2" srsName="urn:x-
ogc:def:crs:EPSG:4167">
-          <gml:polygonMember>
+        <gml:MultiSurface srsDimension="2" srsName="urn:x-
ogc:def:crs:EPSG:4167">
+          <gml:surfaceMember>
             <gml:Polygon srsDimension="2">
               <gml:exterior>
                 <gml:LinearRing srsDimension="2">
@@ -184,8 +184,8 @@
                 </gml:LinearRing>
               </gml:interior>
             </gml:Polygon>
-          </gml:polygonMember>
-        </gml:MultiPolygon>
+          </gml:surfaceMember>
+        </gml:MultiSurface>
       </v:shape>
     </v:x1571>
   </gml:featureMembers>

As you can see in one download it uses gml:MultiPolygon and in a next one 
gml:MultiSurface !

There's a mechanism in /vsicurl_streaming/ that caches the first megabyte of 
each URL. If in one download it get the opening tag of gml:MultiPolygon and in 
a following one the closing tat of gml:MultiParse, this certainly explains the 
XML parsing error...

The only solution is then to have a less aggressive caching that will discard 
any segment of cached data when the corresponding download is stopped, so not 
to cause chaos if it is restarted later with different content. There's of 
course a risk it will have some impact on performance when OGR drivers will 
open successively the file, but that might be the only reliable option.

> 
> Cheers,
> Jeremy
> 
> > Sorry, I have no idea about that. I am not a developer but just a
> > somewhat experienced user and if something works it is legal enough for
> > me. I have a feeling that this GML is OK because it looks pretty much
> > similar to what Geoserver WFS is sending out, because GDAL can read it
> > OK if first saved on disk and because Kosmo GIS can also read data from
> > v:x1571 feature type.
> 
> This message contains information, which is confidential and may be subject
> to legal privilege. If you are not the intended recipient, you must not
> peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ. Thank You.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From lcelati at latitude-geosystems.com  Wed Feb 27 16:26:57 2013
From: lcelati at latitude-geosystems.com (image)
Date: Wed, 27 Feb 2013 16:26:57 -0800 (PST)
Subject: [gdal-dev] Gdal : import .ecw into postgis database
In-Reply-To: <kgj000$u3p$1@ger.gmane.org>
References: <1361897289108-5037040.post@n6.nabble.com>
	<kgj000$u3p$1@ger.gmane.org>
Message-ID: <1362011217804-5037398.post@n6.nabble.com>

Hello,

I succeed in displaying ecw file with qgis 1.8 (binairies). But i would like
import my ecw file into my postgis database thanks to raster2postgresql. And
when i try to do that i have this following error message : 

http://postgis.17.n6.nabble.com/file/n5002709/SS_error_ecw.JPG

Maybe raster2pgsql uses a gdal version which does not support ecw format? 

Could you throw light for me? Have you got any idea? Thanks. 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Gdal-import-ecw-into-postgis-database-tp5037040p5037398.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From lcelati at latitude-geosystems.com  Thu Feb 28 03:33:32 2013
From: lcelati at latitude-geosystems.com (image)
Date: Thu, 28 Feb 2013 03:33:32 -0800 (PST)
Subject: [gdal-dev] Gdal : import .ecw into postgis database
In-Reply-To: <1362011217804-5037398.post@n6.nabble.com>
References: <1361897289108-5037040.post@n6.nabble.com>
	<kgj000$u3p$1@ger.gmane.org>
	<1362011217804-5037398.post@n6.nabble.com>
Message-ID: <1362051212108-5037478.post@n6.nabble.com>

Hi,

Following to my last post, i found on the web this link : 

http://gis.stackexchange.com/questions/31018/how-to-add-ecw-support-to-gdal-bundled-with-postgis-windows/53109#comment70023_53109

I just paste the raster2pgsql.exe into my C:\Program
Files\PostgreSQL\9.1\gdal-data folder. And i paste gdal19.dll from
C:\Program Files (x86)\Quantum GIS Lisboa\bin toward C:\Program
Files\PostgreSQL\9.1\bin. I rename the dll like libgdal-1.dll.

But it does not work and i can't import ecw with raster2pgsql.I have an
error message saying : application error.


Regards.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Gdal-import-ecw-into-postgis-database-tp5037040p5037478.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From lcelati at latitude-geosystems.com  Thu Feb 28 04:22:33 2013
From: lcelati at latitude-geosystems.com (image)
Date: Thu, 28 Feb 2013 04:22:33 -0800 (PST)
Subject: [gdal-dev] How to test gdalinfo for my postgis 's gdal ?
Message-ID: <1362054153570-5037486.post@n6.nabble.com>

I would like know information regarding gdal version used by my postgis.i
would like test my postgis gdal version with gdalinfo . But how to find  the
.bat file in the  in order to tape  gdalinfo --formats ? Where is the
command file in the postgis directory?  

In advance thank you.

Regards. 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/How-to-test-gdalinfo-for-my-postgis-s-gdal-tp5037486.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From lcelati at latitude-geosystems.com  Thu Feb 28 06:41:07 2013
From: lcelati at latitude-geosystems.com (image)
Date: Thu, 28 Feb 2013 06:41:07 -0800 (PST)
Subject: [gdal-dev] Gdal : import .ecw into postgis database
In-Reply-To: <1362051212108-5037478.post@n6.nabble.com>
References: <1361897289108-5037040.post@n6.nabble.com>
	<kgj000$u3p$1@ger.gmane.org>
	<1362011217804-5037398.post@n6.nabble.com>
	<1362051212108-5037478.post@n6.nabble.com>
Message-ID: <1362062467485-5037519.post@n6.nabble.com>

Hi,

Following to my last post. I just checked raster2pgsal -G. And there is not
ECW in the list, there is only 'ERMapper .ers Labelled'...so it seems my
gdal 's postgis did not compile with the ECW support...;-(
Moreover, when i do a SELECT postgis_full_version(); 

"POSTGIS="2.0.1 r9979" GEOS="3.3.5-CAPI-1.7.5" PROJ="Rel. 4.8.0, 6 March
2012" GDAL="GDAL 1.9.1, released 2012/05/15"

And my qgis 's gdal has been also compiled with gdal 1.9.1.

Moreover, for information, my GDAL_DATA (environment system variable)
pointed to C:\Program Files\PostgreSQL\9.1\gdal-data


Thanks.

Laurent.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Gdal-import-ecw-into-postgis-database-tp5037040p5037519.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From yjacolin at free.fr  Thu Feb 28 07:16:02 2013
From: yjacolin at free.fr (Yves Jacolin (Free))
Date: Thu, 28 Feb 2013 16:16:02 +0100
Subject: [gdal-dev] EDIGEO format
Message-ID: <6308627.K79jHZHfKx@tatras>

Hello,

I am working on EDIGEO files, is this something I have to expect:

$ ogrinfo *.THF
Had to open data source read-only.
INFO: Open of `E0000101.THF'
      using driver `EDIGEO' successful.
FAILURE: Couldn't fetch requested layer E0000201.THF!

ogrinfo E0000201.THF
Had to open data source read-only.
INFO: Open of `E0000201.THF'
      using driver `EDIGEO' successful.
1: COMMUNE_id (Polygon)
2: LIEUDIT_id (Polygon)
3: SECTION_id (Polygon)
...

Thanks,

Y.

From jef at norbit.de  Thu Feb 28 09:51:17 2013
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Thu, 28 Feb 2013 18:51:17 +0100
Subject: [gdal-dev] EDIGEO format
In-Reply-To: <6308627.K79jHZHfKx@tatras>
References: <6308627.K79jHZHfKx@tatras>
Message-ID: <20130228175117.GA27089@norbit.de>

Hi Yves,

On Thu, 28. Feb 2013 at 16:16:02 +0100, Yves Jacolin (Free) wrote:
> I am working on EDIGEO files, is this something I have to expect:

Not sure what you question is.
 
> $ ogrinfo *.THF
> Had to open data source read-only.
> INFO: Open of `E0000101.THF'
>       using driver `EDIGEO' successful.
> FAILURE: Couldn't fetch requested layer E0000201.THF!

This probably expands to

ogrinfo E0000101.THF E0000201.THF

i.e. list the layer "E0000201.THF" in the data source E0000101.THF - which is
probably not what you meant.


J?rgen 

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From Tom.Kralidis at ec.gc.ca  Thu Feb 28 13:40:52 2013
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Ontario])
Date: Thu, 28 Feb 2013 16:40:52 -0500
Subject: [gdal-dev] PostGIS date field output
Message-ID: <D4979196AC320B45BE4A5DD7EE80C3E44F073A@sdow04exmail2.ontario.int.ec.gc.ca>

Hi: we are using 1.9.2 via MapServer WFS to serve out PostGIS data in
GeoJSON, which works very well -- great feature!

I was having issues with GeoJSON output on date fields when hour is <
10. 

Digging deeper:

The column in question is of PostgreSQL type 'timestamp without time
zone'.  When querying the data in psql, I get:

mydatetime: 2013-02-19 01:03:34

When I do an ogrinfo the same is shown as:

mydatetime (DateTime) = 2013/02/19  1:03:34

The month is zero padded, but not the hour.  I would have expected it to
be consistent one way or the other.   Naturally, any format which OGR
writes to carries this format.

Our downstream UI (in this case) has to implement a workaround, as it
expects zero padded hour values.

Is this by design in GDAL/OGR?  Is there any we can do to output hour
values zero padded in this case?  I'd rather not have the front end have
to fix this, and using MapServer WFS out of the box leaves us little
options for custom scripting.

Thanks

..Tom


From woodbri at swoodbridge.com  Thu Feb 28 13:56:11 2013
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Thu, 28 Feb 2013 16:56:11 -0500
Subject: [gdal-dev] PostGIS date field output
In-Reply-To: <D4979196AC320B45BE4A5DD7EE80C3E44F073A@sdow04exmail2.ontario.int.ec.gc.ca>
References: <D4979196AC320B45BE4A5DD7EE80C3E44F073A@sdow04exmail2.ontario.int.ec.gc.ca>
Message-ID: <512FD27B.1040301@swoodbridge.com>

On 2/28/2013 4:40 PM, Kralidis,Tom [Ontario] wrote:
> Hi: we are using 1.9.2 via MapServer WFS to serve out PostGIS data in
> GeoJSON, which works very well -- great feature!
>
> I was having issues with GeoJSON output on date fields when hour is <
> 10.
>
> Digging deeper:
>
> The column in question is of PostgreSQL type 'timestamp without time
> zone'.  When querying the data in psql, I get:
>
> mydatetime: 2013-02-19 01:03:34
>
> When I do an ogrinfo the same is shown as:
>
> mydatetime (DateTime) = 2013/02/19  1:03:34
>
> The month is zero padded, but not the hour.  I would have expected it to
> be consistent one way or the other.   Naturally, any format which OGR
> writes to carries this format.
>
> Our downstream UI (in this case) has to implement a workaround, as it
> expects zero padded hour values.
>
> Is this by design in GDAL/OGR?  Is there any we can do to output hour
> values zero padded in this case?  I'd rather not have the front end have
> to fix this, and using MapServer WFS out of the box leaves us little
> options for custom scripting.

Tom,

Can you cast it to a string in sql so it gets passed through a text?

-Steve W

From pierigis at gmail.com  Thu Feb 28 23:55:30 2013
From: pierigis at gmail.com (Pietro Rossin)
Date: Thu, 28 Feb 2013 23:55:30 -0800 (PST)
Subject: [gdal-dev] gdaladdo very slow
In-Reply-To: <CAPwOVCHBZfcr1CaLG+VxA=VpFjX=-geTCmxWXBKRCj=aC58DZQ@mail.gmail.com>
References: <1361796319202-5036638.post@n6.nabble.com>
	<CAPwOVCHMWZ_kXzhd4btUnKBC7AxO79DR0+rHjOoCzxTZ4dyCwQ@mail.gmail.com>
	<loom.20130226T102433-971@post.gmane.org>
	<CAPwOVCFPVrWF9JG5obd_6a8y8J3rVeXkoE7pzcG-Ku4ER_ZYfQ@mail.gmail.com>
	<CAPwOVCHBZfcr1CaLG+VxA=VpFjX=-geTCmxWXBKRCj=aC58DZQ@mail.gmail.com>
Message-ID: <1362124530939-5037685.post@n6.nabble.com>

Hello
I must mosaic and compress many 1 bit images that should be used mainly by
qgis users and ArcGIS users.
After many attempts I have mosaicked them (983 images/998Mb) by this
procedure

1) make a vrt mosaic
gdalbuildvrt -hidenodata -srcnodata ?0? -vrtnodata "0" test.vrt *.tif

2) make a geotiff (result 1060Mb)
gdal_translate -of Gtiff -co SPARSE_OK=TRUE -a_nodata 0 -co NBITS=1 -co
"TILED=YES" -co "COMPRESS=CCITTFAX4" -co "INTERLEAVE=BAND" -co "TFW=YES"
"test.vrt" "test.tif"

3) add overview
I tried many ways..
a) with external pyramids: gdaladdo -r nearest --config COMPRESS_OVERVIEW
deflate  --config USE_RRD YES immagine.tif 4 8 16 32 64 128 256
It works, a big file aux (1.6Gb) is created, qgis can recognize pyramids but
ArcGIS does not. Processing time less than 2 hours
b) with external pyramids using RRD:
gdaladdo -r nearest --config COMPRESS_OVERVIEW deflate --config HFA_USE_RRD
YES --config USE_RRD YES immagine.tif 4 8 16 32 64 128 256
It works, a small file aux (16Kb) is created and a big rrd file (1.6Gb) is
created too, qgis can recognize pyramids but ArcGIS does not. Processing
time less than 2 hours.
c) using internal pyramids
gdaladdo -r nearest --config COMPRESS_OVERVIEW deflate immagine.tif 2 4 8 16
32 64 128 256
With this option gdaladdo start working but right now it hasn't finished (I
added 1 level); imagine.tif is growing to 2.3Gb and the process is at 60%
after 3 days....
In task manager gdaladdo uses less than 10%CPU all the time...

My computer is old but rather powerful (dual opteron 4Gb ram).

What could it be that gdaladdo is so slow?
And
which is the best way to compress these images so they can e used both in
qgis and arcgis?

Thanks for your patience
Pietro



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdaladdo-very-slow-tp5036638p5037685.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

