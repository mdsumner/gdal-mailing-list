From jsundu at y...  Mon Apr  1 01:16:39 2002
From: jsundu at y... (jsundu)
Date: Wed Nov 21 11:49:16 2007
Subject: compile problems
Message-ID: <a88u07+6ki8@eGroups.com>

Hi all,

I'm trying to compile gdal 1.1.6 on a Redhat 7.2 distro. I am
compiling gdal in /usr/local/src. I am using glibc-2.2.5 and
gcc-3.0.4. Upon initiation of "make" I receive the following after
many other messages. Could someone please tell me what might be wrong?

Thanks,
jay


make[1]: Entering directory `/usr/local/src/gdal/ogr'
c++ -c -Iogrsf_frmts -I. -I../port -Wall -fPIC -O2 
-I/usr/local/include ogrinfo.cpp -o ogrinfo.o
c++ ogrinfo.o ogrsf_frmts/ogrsf_frmts.a ogr.a ../port/cpl.a -lpng -lz
-lm -ldl -L/usr/local/lib -lm -L/usr/local/pgsql/lib -lpq -o ogrinfo
/lib/libresolv.so.2: undefined reference to `__res_nclose@GLIBC_2.2'
/lib/libnsl.so.1: undefined reference to `svc_getreq_poll@GLIBC_2.2'
/lib/libnsl.so.1: undefined reference to `__strndup@GLIBC_2.2'
/lib/libnsl.so.1: undefined reference to
`__rpc_thread_svc_pollfd@GLIBC_2.2.3'
/lib/libnsl.so.1: undefined reference to
`__rpc_thread_svc_max_pollfd@GLIBC_2.2.3'
/lib/libresolv.so.2: undefined reference to `__res_init@GLIBC_2.2'
/lib/libresolv.so.2: undefined reference to `__res_ninit@GLIBC_2.2'
/lib/libresolv.so.2: undefined reference to `__res_state@GLIBC_2.2'
collect2: ld returned 1 exit status
make[1]: *** [ogrinfo] Error 1
make[1]: Leaving directory `/usr/local/src/gdal/ogr'
make: *** [ogr-apps] Error 2



From warmerdam at p...  Mon Apr  1 09:54:51 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] compile problems
References: <a88u07+6ki8@eGroups.com>
Message-ID: <3CA874BB.1010709@p...>

jsundu wrote:
> Hi all,
> 
> I'm trying to compile gdal 1.1.6 on a Redhat 7.2 distro. I am
> compiling gdal in /usr/local/src. I am using glibc-2.2.5 and
> gcc-3.0.4. Upon initiation of "make" I receive the following after
> many other messages. Could someone please tell me what might be wrong?

Jay,

I haven't run into this problem before. I have successfully built
with gcc 3.0.x before, so it isn't clear if that is the problem. Is
it possible that one or more of the libraries you are linking against
was compiled against an incompatible glibc or something? In fact,
looking at it the problem seems that libnsl.so and libresolv.so do
not seem to be finding stuff they require in the glibc that you are
using.

When I run into problems like this, I usually ferret around using the
nm command (which dumps all the symbols in an object or library file)
to find what is calling the missing functions.

eg.
nm core/*.o | grep strndup

However, this doesn't work on stripped shared libraries like your
/usr/lib/libresolve.so and /usr/lib/libnsl.so are likelely to be.

Good luck,

> make[1]: Entering directory `/usr/local/src/gdal/ogr'
> c++ -c -Iogrsf_frmts -I. -I../port -Wall -fPIC -O2 
> -I/usr/local/include ogrinfo.cpp -o ogrinfo.o
> c++ ogrinfo.o ogrsf_frmts/ogrsf_frmts.a ogr.a ../port/cpl.a -lpng -lz
> -lm -ldl -L/usr/local/lib -lm -L/usr/local/pgsql/lib -lpq -o ogrinfo
> /lib/libresolv.so.2: undefined reference to `__res_nclose@GLIBC_2.2'
> /lib/libnsl.so.1: undefined reference to `svc_getreq_poll@GLIBC_2.2'
> /lib/libnsl.so.1: undefined reference to `__strndup@GLIBC_2.2'
> /lib/libnsl.so.1: undefined reference to
> `__rpc_thread_svc_pollfd@GLIBC_2.2.3'
> /lib/libnsl.so.1: undefined reference to
> `__rpc_thread_svc_max_pollfd@GLIBC_2.2.3'
> /lib/libresolv.so.2: undefined reference to `__res_init@GLIBC_2.2'
> /lib/libresolv.so.2: undefined reference to `__res_ninit@GLIBC_2.2'
> /lib/libresolv.so.2: undefined reference to `__res_state@GLIBC_2.2'
> collect2: ld returned 1 exit status
> make[1]: *** [ogrinfo] Error 1
> make[1]: Leaving directory `/usr/local/src/gdal/ogr'
> make: *** [ogr-apps] Error 2



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From warmerdam at p...  Wed Apr  3 17:13:44 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:16 2007
Subject: GDAL meta data
References: <3C56BA4E.6030504@p...> <3CAA0848.BC23AEAF@a...> <3CAA0AEB.4080708@p...> <3CAB535A.BBF75FC9@a...> <3CAB55C1.2040100@p...> <3CAB699C.CB79A810@a...>
Message-ID: <3CAB7E98.3000201@p...>

A. B. wrote:
> Hi Frank,
> 
> 
> I think I did not understand your previous comment. Yes you can go ahead and the
> ability to extract specialized meta-data from ceos input. In fac, I examined gdal code
> (core/gdalmajorobject) and at this moment GetMetadata returns a NULL string if
> a domain is given !!

Ahmed,

It is necessary to override the GetMetadata() method on the SAR_CEOSDataset
class to get the desired behaviour. I have committed the required code to
implement access to raw CEOS record data via the GDAL metadata api. The
inline documentation says:


/************************************************************************/
/* GetMetadata() */
/* */
/* We provide our own GetMetadata() so that we can override */
/* behavior for some very specialized domain names intended to */
/* give us access to raw record data. */
/* */
/* The domain must look like: */
/* ceos-FFF-n-n-n-n:r */
/* */
/* FFF - The file id - one of vol, lea, img, trl or nul. */
/* n-n-n-n - the record type code such as 18-10-18-20 for the */
/* dataset summary record in the leader file. */
/* :r - The zero based record number to fetch (optional) */
/* */
/* Note that only records that are pre-loaded will be */
/* accessable, and this normally means that most image records */
/* are not available. */
/************************************************************************/

The following example script demonstrates use:
#!/usr/bin/env python

import gdal

file = gdal.Open( '/u/data/ceos/ottawa_patch/ottawa_patch.img' )

print file.GetMetadata( 'ceos-vol-192-192-18-18:0' )

md = file.GetMetadata( 'ceos-vol-192-192-18-18' )
print md['RawRecord']


It produces the following results - note that all binary zero characters
are converted to spaces, and that all the prefix data is included in the
returned string. The

warmerda@gdal[988]% testceos.py
{'RawRecord': '\001\300\300\022\022 \001hA CCB-CCT-0002 E AAPP 1.99 input 
RSAT-1-SAR-SGF 1996011223070698 1 1 1 1 1 1 11999122014282700CANADA CCRS 
APP 3 5 
input 
'}
`??qq `hA CCB-CCT-0002 E AAPP 1.99 input RSAT-1-SAR-SGF 19960118 1 1 1 1 
1 1 11999122014282700CANADA CCRS APP 3 5 
input 


Let me know if you have any questions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From Andrew.Loughhead at c...  Thu Apr  4 02:55:30 2002
From: Andrew.Loughhead at c... (Andrew.Loughhead@c...)
Date: Wed Nov 21 11:49:16 2007
Subject: using GIO driver to create grids
Message-ID: <C1324DB9FA4AD31190D500902786B5E6016A1524@x...>

Just wondering if anyone has a working example of using the 
GIO driver to create new ESRI grids, that they could share 
with me, either using the C++ or C interface. Along the lines 
of Franks tutorial is what I'm hoping for. I have code that 
creates a grid and apparently writes to it, but when looked 
at in Arc/Info, the results are entirely nodata. 

thanks 
andrew.


From warmerdam at p...  Thu Apr  4 15:12:53 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] using GIO driver to create grids
References: <C1324DB9FA4AD31190D500902786B5E6016A1524@x...>
Message-ID: <3CACB3C5.7030308@p...>

Andrew.Loughhead@c... wrote:
> 
> Just wondering if anyone has a working example of using the 
> GIO driver to create new ESRI grids, that they could share 
> with me, either using the C++ or C interface. Along the lines 
> of Franks tutorial is what I'm hoping for. I have code that 
> creates a grid and apparently writes to it, but when looked 
> at in Arc/Info, the results are entirely nodata. 

Andrew,

Any possibility you aren't closing the destination dataset properly?

Does gdal_translate to GIO format work?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From Andrew.Loughhead at c...  Fri Apr  5 02:12:45 2002
From: Andrew.Loughhead at c... (Andrew.Loughhead@c...)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] using GIO driver to create grids
Message-ID: <C1324DB9FA4AD31190D500902786B5E6016A1530@x...>

Thanks for the suggestion Frank. The same thing does seem 
to happen in gdal_translate. Some details follow...

I have made a small test grid in Grid with demshd(), which is 
to say that its an integer grid, and that its values are in 
the range 52-248. This is called dshd. Then:

gdal_translate.exe -of GTiff -ot byte dshd dshd.tif
Size is 260, 237
0.Band 1 Type = 5
..10...20...30...40...50...60...70...80...90...100 - done.

and the result is good (loads in Photoshop, looks fine). 
Then to try the reverse:

gdal_translate.exe -of GIO -ot Float32 dshd.tif gdal_dshd
Size is 260, 237
0.Band 1 Type = 1
..10...20...30...40...50...60...70...80...90...100 - done.

and I end up with a grid, it lists in arcinfo, a describe in 
arcinfo shows it as having min=0.0, max=248.0, and of course 
its a Floating Point grid, as GDAL doesn't yet write Integer 
grids. However, when drawn or interrogated, the grid gdal_dshd 
is all nodata. If I make a new grid from it with 
Grid: gdal_dshd2 = int(gdal_dshd), Grid reports that all cells 
in the new grid are nodata. 

I'm using gdal-1.1.6, built with MSVC 6, avgridio.dll is from 
Arcview3.2. 

Anything more I can try to diagnose this? 

Andrew.

> -----Original Message-----
> From: Frank Warmerdam [mailto:warmerdam@p...]
> Sent: Friday, 5 April 2002 6:13 AM
> To: gdal-dev@yahoogroups.com
> Subject: Re: [gdal-dev] using GIO driver to create grids
> 
> 
> ------------------------ Yahoo! Groups Sponsor 
> ---------------------~-->
> Buy Stock for $4.
> No Minimums.
> FREE Money 2002.
> http://us.click.yahoo.com/k6cvND/n97DAA/ySSFAA/E5z3lB/TM
> --------------------------------------------------------------
> -------~->
> 
> Andrew.Loughhead@c... wrote:
> > 
> > Just wondering if anyone has a working example of using the 
> > GIO driver to create new ESRI grids, that they could share 
> > with me, either using the C++ or C interface. Along the lines 
> > of Franks tutorial is what I'm hoping for. I have code that 
> > creates a grid and apparently writes to it, but when looked 
> > at in Arc/Info, the results are entirely nodata. 
> 
> Andrew,
> 
> Any possibility you aren't closing the destination dataset properly?
> 
> Does gdal_translate to GIO format work?
> 
> Best regards,
> 
> -- 
> ---------------------------------------+----------------------
----------------
> I set the clouds in motion - turn up | Frank Warmerdam, 
> warmerdam@p...
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush | Geospatial 
> Programmer for Rent
> 
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


From nhv at y...  Fri Apr  5 05:07:37 2002
From: nhv at y... (Norman Vine)
Date: Wed Nov 21 11:49:16 2007
Subject: subscribe
Message-ID: <000701c1dc89$b71dfa70$0100a8c0@sfdev3>






From warmerdam at p...  Fri Apr  5 09:09:05 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] using GIO driver to create grids
References: <C1324DB9FA4AD31190D500902786B5E6016A1530@x...>
Message-ID: <3CADB001.1030006@p...>

Andrew.Loughhead@c... wrote:
> 
> Thanks for the suggestion Frank. The same thing does seem 
> to happen in gdal_translate. Some details follow...
> 
> I have made a small test grid in Grid with demshd(), which is 
> to say that its an integer grid, and that its values are in 
> the range 52-248. This is called dshd. Then:
> 
> gdal_translate.exe -of GTiff -ot byte dshd dshd.tif
> Size is 260, 237
> 0.Band 1 Type = 5
> ..10...20...30...40...50...60...70...80...90...100 - done.
> 
> and the result is good (loads in Photoshop, looks fine). 
> Then to try the reverse:
> 
> gdal_translate.exe -of GIO -ot Float32 dshd.tif gdal_dshd
> Size is 260, 237
> 0.Band 1 Type = 1
> ..10...20...30...40...50...60...70...80...90...100 - done.
> 
> and I end up with a grid, it lists in arcinfo, a describe in 
> arcinfo shows it as having min=0.0, max=248.0, and of course 
> its a Floating Point grid, as GDAL doesn't yet write Integer 
> grids. However, when drawn or interrogated, the grid gdal_dshd 
> is all nodata. If I make a new grid from it with 
> Grid: gdal_dshd2 = int(gdal_dshd), Grid reports that all cells 
> in the new grid are nodata. 
> 
> I'm using gdal-1.1.6, built with MSVC 6, avgridio.dll is from 
> Arcview3.2. 
> 
> Anything more I can try to diagnose this? 

Andrew,

I will try this out today, and see if I can reproduce the problem.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From eric at i...  Mon Apr  8 13:32:51 2002
From: eric at i... (Eric J. Peters)
Date: Wed Nov 21 11:49:16 2007
Subject: Is this correct??
Message-ID: <20020408123251.A16750@i...>

Hi-

While digging through some code to try to isolate a problem I'm
having, I found the following code in ogrlinestring.cpp:

OGRBoolean OGRLineString::Equal( OGRGeometry * poOther )

{
OGRLineString *poOLine = (OGRLineString *) poOther;

if( poOther == this )
return TRUE;

if( poOther->getGeometryType() != getGeometryType() )
return FALSE;

// we should eventually test the SRS.

if( getNumPoints() != poOLine->getNumPoints() )
return FALSE;

for( int iPoint = 1; iPoint < getNumPoints(); iPoint++ )
{
if( getX(iPoint) != poOLine->getX(iPoint)
|| getY(iPoint) != poOLine->getY(iPoint) 
|| getZ(iPoint) != poOLine->getZ(iPoint) )
return FALSE;
}

return TRUE;
}


My question is regarding the loop at the end. iPoint goes from 1 to
getNumPoints() -- shouldn't this be from 0 to getNumPoints()? Am I missing
something, or is this a bug in the GDAL code?

Thanks,	
-Eric.

--
Eric J. Peters
eric@i...

==




From warmerdam at p...  Mon Apr  8 13:47:15 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] Is this correct??
References: <20020408123251.A16750@i...>
Message-ID: <3CB1D7A3.90102@p...>

Eric J. Peters wrote:
> While digging through some code to try to isolate a problem I'm
> having, I found the following code in ogrlinestring.cpp:
> 
> OGRBoolean OGRLineString::Equal( OGRGeometry * poOther )
> 
> {
> OGRLineString *poOLine = (OGRLineString *) poOther;
> 
> if( poOther == this )
> return TRUE;
> 
> if( poOther->getGeometryType() != getGeometryType() )
> return FALSE;
> 
> // we should eventually test the SRS.
> 
> if( getNumPoints() != poOLine->getNumPoints() )
> return FALSE;
> 
> for( int iPoint = 1; iPoint < getNumPoints(); iPoint++ )
> {
> if( getX(iPoint) != poOLine->getX(iPoint)
> || getY(iPoint) != poOLine->getY(iPoint) 
> || getZ(iPoint) != poOLine->getZ(iPoint) )
> return FALSE;
> }
> 
> return TRUE;
> }
> 
> 
> My question is regarding the loop at the end. iPoint goes from 1 to
> getNumPoints() -- shouldn't this be from 0 to getNumPoints()? Am I missing
> something, or is this a bug in the GDAL code?

Eric,

I believe you are correct. I have changed the code.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From warmerdam at p...  Fri Apr 12 15:54:13 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] using GIO driver to create grids
References: <C1324DB9FA4AD31190D500902786B5E6016A1530@x...>
Message-ID: <3CB73B65.6060309@p...>


Andrew,

Sorry for the delay in getting back to you. I worked on the GIO driver a
bunch last Friday and determined that the WriteGeoreference() function is
corrupting the file (as far as ArcView is concerned anyways). I spent quite
a bit of time with binary dumps of the .hdr files to see what all I should
be changing to update the georeferencing but never quite mastered it. I hope
to try some more but five days have passed without getting back to it so I
thought I should give a status report.

If you need to create files with the GIO driver you can do it by commenting
out the comments of the georeferencing writing function but of course you
will lose any georeferencing in the produced grids.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From ben at v...  Sun Apr 14 21:13:28 2002
From: ben at v... (bdiscoe)
Date: Wed Nov 21 11:49:16 2007
Subject: files remaining open after OGR reads SDTS vectors
Message-ID: <a9d9fo+sn5n@eGroups.com>


I am attempting to add support for reading SDTS files directly from 
their archive, e.g. "FOO.sdts.tar.gz". To do this, my application 
expands the archive into a temporary folder, finds the CATD file, 
reads the data with OGR, then attempts to delete the temporary files.

However, of the 22 files in my SDTS 'transfer', 8 of them are 
refusing to be deleted after OGR has finished reading them:

AHDR.DDF
ARDF.DDF
ARDM.DDF
LE01.DDF
NA01.DDF
NO01.DDF
NP01.DDF
PC01.DDF

I think this is because OGR is forgetting to close the files. As far 
i can tell i am doing everything correctly:

OGRDataSource *datasource = OGRSFDriverRegistrar::Open(fname);
// (read the data from the layers)
delete datasource;

Is there something else i need to do so that the files get closed 
properly? Or is this a bug?

Thanks,
Ben




From warmerdam at p...  Mon Apr 15 09:16:37 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] files remaining open after OGR reads SDTS vectors
References: <a9d9fo+sn5n@eGroups.com>
Message-ID: <3CBAD2B5.2000301@p...>

bdiscoe wrote:
> I think this is because OGR is forgetting to close the files. As far 
> i can tell i am doing everything correctly:
> 
> OGRDataSource *datasource = OGRSFDriverRegistrar::Open(fname);
> // (read the data from the layers)
> delete datasource;
> 
> Is there something else i need to do so that the files get closed 
> properly? Or is this a bug?

Ben,

How embarrasing. I have corrected the OGRSDTSTDataSource destructor to
delete the underlying SDTSTransfer object which should correct the problem.
The corrected file (committed to CVS) is ogr/ogrsf_frmts/sdts/ogrsdtsdatasource.cpp.

Thanks for the pointer,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From Andrew.Loughhead at c...  Tue Apr 16 19:01:57 2002
From: Andrew.Loughhead at c... (Andrew.Loughhead@c...)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] using GIO driver to create grids
Message-ID: <C1324DB9FA4AD31190D500902786B5E6016A157B@x...>

Thanks so much for looking into this Frank, its a relief to 
have it confirmed as a bug. I will probably do as you suggest 
for the time being. 
Andrew

> -----Original Message-----
> From: Frank Warmerdam [mailto:warmerdam@p...]
> Sent: Saturday, 13 April 2002 5:54 AM
> To: gdal-dev@yahoogroups.com
> Subject: Re: [gdal-dev] using GIO driver to create grids
> 
> 
> ------------------------ Yahoo! Groups Sponsor 
> ---------------------~-->
> Buy Stock for $4
> and no minimums.
> FREE Money 2002.
> http://us.click.yahoo.com/k6cvND/n97DAA/ySSFAA/E5z3lB/TM
> --------------------------------------------------------------
> -------~->
> 
> 
> Andrew,
> 
> Sorry for the delay in getting back to you. I worked on the 
> GIO driver a
> bunch last Friday and determined that the WriteGeoreference() 
> function is
> corrupting the file (as far as ArcView is concerned anyways). 
> I spent quite
> a bit of time with binary dumps of the .hdr files to see what 
> all I should
> be changing to update the georeferencing but never quite 
> mastered it. I hope
> to try some more but five days have passed without getting 
> back to it so I
> thought I should give a status report.
> 
> If you need to create files with the GIO driver you can do it 
> by commenting
> out the comments of the georeferencing writing function but 
> of course you
> will lose any georeferencing in the produced grids.
> 
> Best regards,
> 
> -- 
> ---------------------------------------+----------------------
> ----------------
> I set the clouds in motion - turn up | Frank Warmerdam, 
> warmerdam@p...
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush | Geospatial 
> Programmer for Rent
> 
> 
> 
> 
> 
> Your use of Yahoo! Groups is subject to 
> http://docs.yahoo.com/info/terms/ 
> 
> 


From warmerdam at p...  Thu Apr 18 11:12:55 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:16 2007
Subject: GDAL/OGR 1.1.7 Released
Message-ID: <3CBEE277.7000405@p...>


Folks,

The GDAL/OGR package 1.1.7 release is now available for download in source
format. It can be found at:

ftp://ftp.remotesensing.org/pub/gdal/gdal-1.1.7.tar.gz
ftp://ftp.remotesensing.org/pub/gdal/gdal117.zip

GDAL is a translator library for raster geospatial data formats that
is released under an Open Source license. As a library, it presents a
single abstract data model to the calling application for all supported
formats. The related OGR library (which lives within the GDAL source
tree) provides a similar capability for simple features vector data.

The following entries in the NEWS file cover major changes in 1.1.7.

GDAL 1.1.7 - Overview of Changes
--------------------------------

o Add XPM (X11 Pixmap) format.

o Added rough ENVI raster format read support.

o Added --version support (and supporting GDALVersionInfo() function).

o Special hooks for getting raw record data from sar ceos files and Envisat
via the metadata api.

o Upgraded TIFF/GeoTIFF support to CVS version ... includes new extension
API and removes need for private libtiff include files entirely.

o gdal_translate now has scaling option (-scale).

o Added utility documentation.

OGR 1.1.7 - Overview of Changes
-------------------------------

o Added Arc/Info binary coverage format read support.

o Added ogrtindex for building MapServer compatible OGR tile indexes.

o Added default implementation of GetFeature(fid) method on OGRLayer.

o Shape driver now supports reading and creating free standing .dbf files
for layers without geometry.

o Added utility documentation.

o Fixed major memory/file handle leak in SDTS access.

o Added ADSK_GEOM_EXTENT support for OLE DB provider.

o Ensure shapefiles written with correct polygon ring winding direction
plus various other shapefile support fixes.

o GML read/write working reasonable well, including use of .gfs files.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From warmerdam at p...  Thu Apr 18 14:41:06 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:16 2007
Subject: OpenEV_FW 1.4.1 Binary Release For Windows
Message-ID: <3CBF1342.5030708@p...>

Folks,

I have prepared a binary release of OpenEV and a bunch of related tools,
including GDAL, OGR, OGDI and PROJ.4 utilities. It can be downloaded from
one of:

http://prdownloads.sourceforge.net/openev/OpenEV_FW_141.zip
ftp://ftp.remotesensing.org/pub/gdal/openev/OpenEV_FW_141.zip

I have included the README below.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent


Open Source GIS/RS Binary Kit for Windows
=========================================

OpenEV For Windows 98/NT/2000
-----------------------------

VERSION: OpenEV 1.4.1_FW

After unzipping edit the setfw.bat file in a text editor, and change
OPENEV_FW_DIR to point to wherever you put the resulting directory tree.

A sample image, utm.tif, is provided in the directory demo-data under
your install directory. Start OpenEV by running openev.bat in a command
window, then select File, Open and double click on the demo-data directory
in the left column. Select the image utm.tif and then OK.

See the online help for how to use OpenEV (fron the Help menu in OpenEV,
note: you must have a html browser such as Netscape or Internet Explorer
installed).

web page: http://openev.sourceforge.net

email: OpenEV@a...

OpenEV was funded in part by Atlantis Scientific (www.atlsci.com)
and GeoInnovations (www.geoconnections.org).


Other Libraries, and Utilities
------------------------------

o GDAL 1.1.7, including gdalinfo, gdal_translate, and gdaltindex utilities.
- Includes ECW, and OGDI raster support.
o OGR 1.1.7, including ogrinfo, ogr2ogr, and ogrtindex utilities.
- Includes OGDI vector, and GML support.
- Includes SoftmapSF.dll (OpenGIS Simple Features for COM/OLEDB provider)
(just register it using "regsvr32 openev_fw\bin\SoftmapSF.dll")
o Includes sfcdump.exe, an SF OLE DB provider dumper.
o PROJ 4.4.4 plus proj.exe and cs2cs.exe
o Gnuplot plotting package (run pgnuplot).
o OGDI 3.1.0, gltpd, ogdi_import and ogdi_info.
o Python 2.0

About this Package
------------------

This package was prepared by Frank Warmerdam (warmerdam@p...) as a
handy package containing several related packages, with a maximum of
inter-component linkaged enabled. It is considerably more ad-hoc than some
of the more formal release packages, but it may have greater functionality
than formal releases. This package aspires to be a "tool bench" of GIS/RS
tools for the end user.






From tmitchell at l...  Thu Apr 18 16:47:11 2002
From: tmitchell at l... (Tyler Mitchell)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] OpenEV_FW 1.4.1 Binary Release For Windows
Message-ID: <OF1A86F45A.E52609FA-ON88256B9F.0071FAEC@LocalDomain>


Great stuff Frank, I'm checking it out right now. I found that I ended
having to copy the dll's to somewhere else in order to get it to start up.
I got an error from pythonw that it couldn't find, for example,
python20.dll in the path. Then it listed the path, which included the
correct folder. So I was at a lose and copied the dll's from openev_fw\bin
to \winnt\system32. Now to try out the latest greatest OGR support.

Thank you for your commitment to this application.

Tyler



Frank Warmerdam 
<warmerdam@pobox. To: openev-announce <openev-announce@s...>, gistrans list 
com> <gistrans-l@a...>, OpenSource RemoteSensing 
<os-remotesensing@r...>, FreeGIS <freegis-list@i...>, gdal-dev 
04/18/2002 11:41 <gdal-dev@yahoogroups.com> 
AM cc: 
Please respond to Fax to: 
gdal-dev Subject: [gdal-dev] OpenEV_FW 1.4.1 Binary Release For Windows 








Folks,

I have prepared a binary release of OpenEV and a bunch of related tools,
including GDAL, OGR, OGDI and PROJ.4 utilities. It can be downloaded from
one of:

http://prdownloads.sourceforge.net/openev/OpenEV_FW_141.zip
ftp://ftp.remotesensing.org/pub/gdal/openev/OpenEV_FW_141.zip

I have included the README below.

Best regards,

--
---------------------------------------+--------------------------------------

I set the clouds in motion - turn up | Frank Warmerdam,
warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent


Open Source GIS/RS Binary Kit for Windows
=========================================

OpenEV For Windows 98/NT/2000
-----------------------------

VERSION: OpenEV 1.4.1_FW

After unzipping edit the setfw.bat file in a text editor, and change
OPENEV_FW_DIR to point to wherever you put the resulting directory tree.

A sample image, utm.tif, is provided in the directory demo-data under
your install directory. Start OpenEV by running openev.bat in a command
window, then select File, Open and double click on the demo-data directory
in the left column. Select the image utm.tif and then OK.

See the online help for how to use OpenEV (fron the Help menu in OpenEV,
note: you must have a html browser such as Netscape or Internet Explorer
installed).

web page: http://openev.sourceforge.net

email: OpenEV@a...

OpenEV was funded in part by Atlantis Scientific (www.atlsci.com)
and GeoInnovations (www.geoconnections.org).


Other Libraries, and Utilities
------------------------------

o GDAL 1.1.7, including gdalinfo, gdal_translate, and gdaltindex
utilities.
- Includes ECW, and OGDI raster support.
o OGR 1.1.7, including ogrinfo, ogr2ogr, and ogrtindex utilities.
- Includes OGDI vector, and GML support.
- Includes SoftmapSF.dll (OpenGIS Simple Features for COM/OLEDB
provider)
(just register it using "regsvr32 openev_fw\bin\SoftmapSF.dll")
o Includes sfcdump.exe, an SF OLE DB provider dumper.
o PROJ 4.4.4 plus proj.exe and cs2cs.exe
o Gnuplot plotting package (run pgnuplot).
o OGDI 3.1.0, gltpd, ogdi_import and ogdi_info.
o Python 2.0

About this Package
------------------

This package was prepared by Frank Warmerdam (warmerdam@p...) as a
handy package containing several related packages, with a maximum of
inter-component linkaged enabled. It is considerably more ad-hoc than some
of the more formal release packages, but it may have greater functionality
than formal releases. This package aspires to be a "tool bench" of GIS/RS
tools for the end user.





Your use of Yahoo! Groups is subject to the Yahoo! Terms of Service.






From jlawhead at p...  Thu Apr 18 16:16:22 2002
From: jlawhead at p... (Joel Lawhead)
Date: Wed Nov 21 11:49:16 2007
Subject: Virtual dataset - how to?
Message-ID: <NEBBJNOOHMHPPENPIIDJCENICDAA.jlawhead@p...>

charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

Hi,

I've been having fun with GDAL 1.1.7 and Python 2.2.1 on Windows 2000. I was
wondering if anyone could give me an example or pointer to create a virtual
dataset for use with CreateCopy(). I realize Frank is working on rewriting
'gdal_translate' to use virtual datasets and was wondering if there were any
examples out there in C or preferably Python. I'm experimenting with
creating jpegs from other gdal formats.

I haven't located any direct examples in the list archive, gdal example
sources or OpenEV sources. I'm aware of the two-step method to create a JPEG
by doing the resampling in another format but was just curious about the
virtual dataset concept. At first glance it seems like that method might be
faster. I haven't checked the UMN MapServer source code to see whether it
uses the two-step process or virtual datasets to convert data to jpegs. If
I've overlooked anything please let me know.

I've been working with Perl for several years and Python for a couple of
years and in the last year have been introduced to the GIS/remote sensing
world. I started out trying to understand image manipulation using the
Python Imaging Library which lead me to GDAL. I've found GDAL a great tool
for learning about the different geo-spatial data formats.

What would be really nice would be a GDAL Cookbook' on the Yahoo Groups
site. More experienced programmers could post their successful code snippets
(maybe in the 'Files' section?) which would make it easy to find examples to
give us intermediate programmers a little boost. I found the API tutorial
on the GDAL site extremely helpful and would love to see more of those types
of examples. Once I get comfortable with GDAL in Python I'll try to write a
comprehensive tutorial about what I've learned.

Thanks,
Joel

Joel Lawhead, Web Application Developer, PixSell
Phone: (228)688-3391, Fax: (228)688-7262
<jlawhead@p...>
<www.pixsell.com>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20020418/4c851d6c/attachment.html
From warmerdam at p...  Fri Apr 19 11:28:57 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] OpenEV_FW 1.4.1 Binary Release For Windows
References: <OF1A86F45A.E52609FA-ON88256B9F.0071FAEC@LocalDomain>
Message-ID: <3CC037B9.1040209@p...>

Tyler Mitchell wrote:
> Great stuff Frank, I'm checking it out right now. I found that I ended
> having to copy the dll's to somewhere else in order to get it to start up.
> I got an error from pythonw that it couldn't find, for example,
> python20.dll in the path. Then it listed the path, which included the
> correct folder. So I was at a lose and copied the dll's from openev_fw\bin
> to \winnt\system32. Now to try out the latest greatest OGR support.
> 
> Thank you for your commitment to this application.

Tyler,

That really shouldn't be necessary. Is it possible your path has spaces in
or or something else that might be confusing things?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From warmerdam at p...  Fri Apr 19 15:47:32 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] Virtual dataset - how to?
References: <NEBBJNOOHMHPPENPIIDJCENICDAA.jlawhead@p...>
Message-ID: <3CC07454.2060709@p...>

Joel Lawhead wrote:
> I've been having fun with GDAL 1.1.7 and Python 2.2.1 on Windows 2000. I 
> was wondering if anyone could give me an example or pointer to create a 
> virtual dataset for use with CreateCopy(). I realize Frank is working on 
> rewriting 'gdal_translate' to use virtual datasets and was wondering if 
> there were any examples out there in C or preferably Python. I'm 
> experimenting with creating jpegs from other gdal formats.
> 
> I haven't located any direct examples in the list archive, gdal example 
> sources or OpenEV sources. I'm aware of the two-step method to create a 
> JPEG by doing the resampling in another format but was just curious 
> about the virtual dataset concept. At first glance it seems like that 
> method might be faster. I haven't checked the UMN MapServer source code 
> to see whether it uses the two-step process or virtual datasets to 
> convert data to jpegs. If I've overlooked anything please let me know.

Joel,

As you note, once the rewrite of gdal_translate is done to utilize the
virtual datasets the two step process will not longer be needed but for
now it is. Currently there is no programatic way of creating virtual
datasets ... they have to be initialized from the XML .vrt files. The
closest you could get would be to write out a temporary .vrt file with
the description you want.

I had intended to do more today, but I have been distracted by a high
priority task, but what I have got done is add a CreateCopy() method
for VRTDataset. That means "gdal_translate -of VRT utm.tif utm.vrt"
will create a .vrt file that is an image (and still referring to) the
utm.tif file. This .vrt file can then be hand edited to modify some
information.

If you were working with very large files to translate to JPEG with
an altered configuration you could conveivably do:

gdal_translate -of VRT big.tif big.vrt
hand edit big.vrt to take the subset, band combinatoin etc desired.
gdal_translate -of JPG big.vrt big.jpg

But that isn't my intended final solution.

> I've been working with Perl for several years and Python for a couple of 
> years and in the last year have been introduced to the GIS/remote 
> sensing world. I started out trying to understand image manipulation 
> using the Python Imaging Library which lead me to GDAL. I've found GDAL 
> a great tool for learning about the different geo-spatial data formats. 
> 
> What would be really nice would be a GDAL Cookbook' on the Yahoo Groups 
> site. More experienced programmers could post their successful code 
> snippets (maybe in the 'Files' section?) which would make it easy to 
> find examples to give us intermediate programmers a little boost. I 
> found the API tutorial on the GDAL site extremely helpful and would love 
> to see more of those types of examples. Once I get comfortable with 
> GDAL in Python I'll try to write a comprehensive tutorial about what 
> I've learned.

I like the idea, but I am not sure I want to depend on Yahoo groups to hold
it all. I would like to even transition the mailing list off yahoo eventually
since their ads are getting increasingly annoying.

I have been impressed with the MapServer Wiki, and I am wondering if we
should establish something similar for GDAL on remotesensing.org. In
the meantime we could likely colonize a corner of the MapServer Wiki with
GDAL related information. The MapServer Wiki is at:

http://mapserver.gis.umn.edu/cgi-bin/wiki.pl

I also agree with the need for more and better tutorial material of various kinds.
I would be happy to incorporate submissions from GDAL users.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From jlawhead at p...  Fri Apr 19 22:11:53 2002
From: jlawhead at p... (jlawheadus)
Date: Wed Nov 21 11:49:16 2007
Subject: Virtual dataset - how to?
In-Reply-To: <3CC07454.2060709@p...>
Message-ID: <a9qip9+sqam@eGroups.com>

Thanks for the info!

-- Joel

--- In gdal-dev@y..., Frank Warmerdam <warmerdam@p...> wrote:
> Joel Lawhead wrote:
> > I've been having fun with GDAL 1.1.7 and Python 2.2.1 on Windows
2000. I 
> > was wondering if anyone could give me an example or pointer to
create a 
> > virtual dataset for use with CreateCopy(). I realize Frank is
working on 
> > rewriting 'gdal_translate' to use virtual datasets and was
wondering if 
> > there were any examples out there in C or preferably Python. I'm 
> > experimenting with creating jpegs from other gdal formats.
> > 
> > I haven't located any direct examples in the list archive, gdal
example 
> > sources or OpenEV sources. I'm aware of the two-step method to
create a 
> > JPEG by doing the resampling in another format but was just curious 
> > about the virtual dataset concept. At first glance it seems like that 
> > method might be faster. I haven't checked the UMN MapServer source
code 
> > to see whether it uses the two-step process or virtual datasets to 
> > convert data to jpegs. If I've overlooked anything please let me
know.
> 
> Joel,
> 
> As you note, once the rewrite of gdal_translate is done to utilize the
> virtual datasets the two step process will not longer be needed but for
> now it is. Currently there is no programatic way of creating virtual
> datasets ... they have to be initialized from the XML .vrt files. The
> closest you could get would be to write out a temporary .vrt file with
> the description you want.
> 
> I had intended to do more today, but I have been distracted by a high
> priority task, but what I have got done is add a CreateCopy() method
> for VRTDataset. That means "gdal_translate -of VRT utm.tif utm.vrt"
> will create a .vrt file that is an image (and still referring to) the
> utm.tif file. This .vrt file can then be hand edited to modify some
> information.
> 
> If you were working with very large files to translate to JPEG with
> an altered configuration you could conveivably do:
> 
> gdal_translate -of VRT big.tif big.vrt
> hand edit big.vrt to take the subset, band combinatoin etc desired.
> gdal_translate -of JPG big.vrt big.jpg
> 
> But that isn't my intended final solution.
> 
> > I've been working with Perl for several years and Python for a
couple of 
> > years and in the last year have been introduced to the GIS/remote 
> > sensing world. I started out trying to understand image manipulation 
> > using the Python Imaging Library which lead me to GDAL. I've found
GDAL 
> > a great tool for learning about the different geo-spatial data
formats. 
> > 
> > What would be really nice would be a GDAL Cookbook' on the Yahoo
Groups 
> > site. More experienced programmers could post their successful code 
> > snippets (maybe in the 'Files' section?) which would make it easy to 
> > find examples to give us intermediate programmers a little boost. I 
> > found the API tutorial on the GDAL site extremely helpful and
would love 
> > to see more of those types of examples. Once I get comfortable with 
> > GDAL in Python I'll try to write a comprehensive tutorial about what 
> > I've learned.
> 
> I like the idea, but I am not sure I want to depend on Yahoo groups
to hold
> it all. I would like to even transition the mailing list off yahoo
eventually
> since their ads are getting increasingly annoying.
> 
> I have been impressed with the MapServer Wiki, and I am wondering if we
> should establish something similar for GDAL on remotesensing.org. In
> the meantime we could likely colonize a corner of the MapServer Wiki
with
> GDAL related information. The MapServer Wiki is at:
> 
> http://mapserver.gis.umn.edu/cgi-bin/wiki.pl
> 
> I also agree with the need for more and better tutorial material of
various kinds.
> I would be happy to incorporate submissions from GDAL users.
> 
> Best regards,
> 
> -- 
>
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush | Geospatial Programmer for Rent



From warmerdam at p...  Tue Apr 23 09:21:01 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:16 2007
Subject: GDAL: L1B driver
References: <20020423154638.065f7904.dron@a...>
Message-ID: <3CC55FBD.4000702@p...>

Andrey Kiselev wrote:
> Frank,
> 
> I want to contribute driver for the NOAA L1B LAC/GAC files. Is there any
> effort to implement this (but I already have working L1B reader which just
> should by integrated in the GDAL)?
> 
> And another question: how native byte order can be determined? Is there
> functions like SwabShort() or SwabLong() somwere in the library?

Andrey,

There is no other effort on going for NOAA L1B LAC/GAC files that I know of
so please do go ahead and incorporate.

A variety of portability services are provided by cpl_port.h. You can
depend on either CPL_MSB (big endian) or CPL_LSB (little endian) being defined.

The macros CPL_SWAP16(), and CPL_SWAP32() can be used to reverse the byte order
of a 16bit or 32bit integer value. The macros CPL_LSBWORD16() and
CPL_LSBWORD32() can be used to conditionally swap words only if the current
system is not LSB. A wide variety of similar macros also exist in cpl_port.h
including several that operate on pointers to memory to swap.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From warmerdam at p...  Tue Apr 23 09:30:17 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:16 2007
Subject: GDAL and raster calibration
References: <20020420134642.GA14942@ak4719>
Message-ID: <3CC561E9.3010305@p...>

Andrey Kiselev wrote:
> Frank,
> 
> Is it possible to read and write calibration coeffisients when raster
> data processed with GDAL? I can't find note about calibration in `Data
> Model' section of docs. What a best method for this purpose?
> Calibration is important thing and can be linear and stored in two
> values (gain/intercept), poliline with several nodes, polinomial curve
> and, moreover, it can be a lookup table. It will be very good to have a
> possibility to use calibration.

Andrey,

In theory simple gain and intercept values can be returned from a band
via the GetOffset() and GetScale() methods. These are primarily intended
to map between raw pixel values and some linearly related output value with
physical meaning. A common example would be when elevation data is rendered
to 16 bit after applying some offset or scaling operation.

More general models of calibration information should be handled as metadata.
Metadata is a set of string name/value pairs. You would basically pick a
set of names for your particular calibration information and encode the
values into string values.

Within a driver, the SetMetadata() call on a GDALRasterBand or GDALDataSource
can be used to attach metadata to the object in the default domain.

Applications can then fetch the metadata with the GetMetadata() or
GetMetadataItem() calls.

If we were to formalize a model for calibration information we could pick
specific metadata names to be used for calibration information and define
their semantics in the data model documentation; however, in my experience
calibration information for different formats, sensors, and applications
tends to vary quite a bit in organization so I doubt we are ready to do that
yet.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From a_kissel at e...  Tue Apr 23 11:02:33 2002
From: a_kissel at e... (Andrey Kiselev)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] Re: GDAL and raster calibration
In-Reply-To: <3CC561E9.3010305@p...>
References: <20020420134642.GA14942@ak4719>
  <3CC561E9.3010305@p...>
Message-ID: <200204231502.g3NF2YCU025229@a...>

> > Is it possible to read and write calibration coeffisients when raster
> > data processed with GDAL? I can't find note about calibration in `Data
> > Model' section of docs. What a best method for this purpose?
> > Calibration is important thing and can be linear and stored in two
> > values (gain/intercept), poliline with several nodes, polinomial curve
> > and, moreover, it can be a lookup table. It will be very good to have a
> > possibility to use calibration.

> In theory simple gain and intercept values can be returned from a band
> via the GetOffset() and GetScale() methods. These are primarily intended
> to map between raw pixel values and some linearly related output value
> with physical meaning. A common example would be when elevation data is
> rendered to 16 bit after applying some offset or scaling operation.
> 
> More general models of calibration information should be handled as
> metadata. Metadata is a set of string name/value pairs. You would
> basically pick a set of names for your particular calibration information
> and encode the values into string values.

I'm understand that, but it will be better to have special infrastructure
like those for GCP.

> If we were to formalize a model for calibration information we could pick
> specific metadata names to be used for calibration information and define
> their semantics in the data model documentation; however, in my experience
> calibration information for different formats, sensors, and applications
> tends to vary quite a bit in organization so I doubt we are ready to do
> that yet.

Yes, in the NOAA-15 AVHRR data thermal bands calibarted using polynomial
curve but visible band has polyline calibration ;-) Anyway, we should not
forget about this issue.

-- 
Andrey V. Kiselev
Scientific Research Center for Ecological Safety Russian Academy of Sciences
Office phone: +7 812 2307834 ICQ UIN 26871517
Registered Linux user number 169907



From a_kissel at e...  Sat Apr 27 09:27:26 2002
From: a_kissel at e... (Andrey Kiselev)
Date: Wed Nov 21 11:49:16 2007
Subject: IReadBlock() and number of bands
Message-ID: <200204271327.g3RDRQ0K026842@a...>

Frank,

Am I understand correctly that IReadBlock() called for every image band
separately? So if a have nBands pixel interleaved in the input block
(scanline) one will be read nBands times? It is quite ineffective...

Regards,
Andrey

-- 
Andrey V. Kiselev
Scientific Research Center for Ecological Safety Russian Academy of Sciences
Office phone: +7 812 2307834 ICQ UIN 26871517
Registered Linux user number 169907



From warmerdam at p...  Sat Apr 27 10:58:14 2002
From: warmerdam at p... (Frank Warmerdam)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] IReadBlock() and number of bands
References: <200204271327.g3RDRQ0K026842@a...>
Message-ID: <3CCABC86.4000809@p...>

Andrey Kiselev wrote:
> Frank,
> 
> Am I understand correctly that IReadBlock() called for every image band
> separately? So if a have nBands pixel interleaved in the input block
> (scanline) one will be read nBands times? It is quite ineffective...

Andrey,

IReadBlock() is called separately for each raster band. If you have a
pixel interleaved file, and use a simplistic mechanism to access the
band data, reloading the pixel interleaved data for each bands request,
the overhead is substantial. In fact, this is exactly what the Raw dataset
code does for the pixel intereaved case, and it does result in substantial
overhead.

However, when implementing a pixel interleaved format it is possible to
internally have the dataset load the pixel interleaved scanline and then
band pull out the data of interest to avoid multiple loads. This pushes
the responsibility for managing the data access into the driver but I it
need not have a substantial effect on efficiency.

In fact I would like to rework the Rawdataset handling somewhat to more
efficiently handle pixel interleaved data in hyperspectral formats (with
hundreds of bands) where the overview becomes a very serious issue.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@p...
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent




From a_kissel at e...  Sat Apr 27 14:36:16 2002
From: a_kissel at e... (Andrey Kiselev)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] IReadBlock() and number of bands
Message-ID: <NKPJHHJHLHJIJAAA@s...>

>IReadBlock() is called separately for each raster band. If you have a
>pixel interleaved file, and use a simplistic mechanism to access the
>band data, reloading the pixel interleaved data for each bands request,
>the overhead is substantial. In fact, this is exactly what the Raw dataset
>code does for the pixel intereaved case

Not only raw data driver but also geotiff driver works a similar manner.

>However, when implementing a pixel interleaved format it is possible to
>internally have the dataset load the pixel interleaved scanline and then
>band pull out the data of interest to avoid multiple loads. This pushes
>the responsibility for managing the data access into the driver but I it
>need not have a substantial effect on efficiency.

So there isn't drivers implemented in such way? I'm already get the working HRPT/LAC dataset reader, but 5x overhead slightly confuses me.

Regards,
Andrey




Join 18 million Eudora users by signing up for a free Eudora Web-Mail account at http://www.eudoramail.com


From a_kissel at e...  Sat Apr 27 14:57:31 2002
From: a_kissel at e... (Andrey Kiselev)
Date: Wed Nov 21 11:49:16 2007
Subject: [gdal-dev] IReadBlock() and number of bands
Message-ID: <GAHOEMKFEKKIJAAA@s...>

>IReadBlock() is called separately for each raster band. If you have a
>pixel interleaved file, and use a simplistic mechanism to access the
>band data, reloading the pixel interleaved data for each bands request,
>the overhead is substantial. In fact, this is exactly what the Raw dataset
>code does for the pixel intereaved case

Not only raw data driver but also geotiff driver works a similar manner.

>However, when implementing a pixel interleaved format it is possible to
>internally have the dataset load the pixel interleaved scanline and then
>band pull out the data of interest to avoid multiple loads. This pushes
>the responsibility for managing the data access into the driver but I it
>need not have a substantial effect on efficiency.

So there isn't drivers implemented in such way? I'm already get the working HRPT/LAC dataset reader, but 5x overhead slightly confuses me.

Regards,
Andrey




Join 18 million Eudora users by signing up for a free Eudora Web-Mail account at http://www.eudoramail.com


