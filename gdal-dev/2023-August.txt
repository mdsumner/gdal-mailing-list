From mdsumner at gmail.com  Wed Aug  2 00:23:22 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 2 Aug 2023 17:23:22 +1000
Subject: [gdal-dev] STACIT fail to open s3://..tif
Message-ID: <CAAcGz997ZYR0rtwKquGeyFDK0k=DxDdaAznU8_QiUxdbmkWBnw@mail.gmail.com>

I'm using a derived subdataset dsn to try to open a STAC query:

gdalinfo "STACIT:\"
https://explorer.sandbox.dea.ga.gov.au/stac/search?bbox=122.1,-18.28,122.48,-17.91&datetime=2020-01-01/2020-02-29\
":asset=level3,collections=ga_ls_landcover_class_cyear_2"

ERROR 1: Cannot open
s3://dea-public-data/derivative/ga_ls_landcover_class_cyear_2/1-0-0/2020/x_-11/y_-20/ga_ls_landcover_class_cyear_2_1-0-0_au_x-11y-20_2020-01-01_level3.tif
to retrieve band characteristics
gdalinfo failed - unable to open 'STACIT:"
https://explorer.sandbox.dea.ga.gov.au/stac/search?bbox=122.1,-18.28,122.48,-17.91&datetime=2020-01-01/2020-02-29
":asset=level3,collections=ga_ls_landcover_class_cyear_2'.

Am I doing something wrong with the STAC approach?  Similar tasks are
working well with Microsoft Planetary Computer (but I'm generally out of my
depth with STAC itself).

The .tif itself seems fine via the /vsis3/ syntax

gdalinfo
/vsis3/dea-public-data/derivative/ga_ls_landcover_class_cyear_2/1-0-0/2020/x_-11/y_-20/ga_ls_landcover_class_cyear_2_1-0-0_au_x-11y-20_2020-01-01_level3.tif


I've put the calls here in case email problems with the strings:
https://gist.github.com/mdsumner/90f5b509c5cb32bc0f1a26c695baa0bf

I'm using gdal dev GDAL 3.8.0dev-bba8edfc13, released 2023/08/01 (debug
build)

Thanks, Mike


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230802/8b225f89/attachment.htm>

From mdsumner at gmail.com  Wed Aug  2 01:19:02 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 2 Aug 2023 18:19:02 +1000
Subject: [gdal-dev] STACIT fail to open s3://..tif
In-Reply-To: <CAAcGz997ZYR0rtwKquGeyFDK0k=DxDdaAznU8_QiUxdbmkWBnw@mail.gmail.com>
References: <CAAcGz997ZYR0rtwKquGeyFDK0k=DxDdaAznU8_QiUxdbmkWBnw@mail.gmail.com>
Message-ID: <CAAcGz9_moqFkwNYqvrV1ZQv1WS3bwAd=va93OJCEXN8hs_Z_Vg@mail.gmail.com>

Ok so I just did this in staticdataset.cpp and it works ... I'll follow up
on github.

    else if (STARTS_WITH(osFilename.c_str(), "s3://"))
        {
            osRet = "/vsis3/";
            osRet += osFilename.substr(strlen("s3://"));
        }


Thanks!



On Wed, Aug 2, 2023 at 5:23?PM Michael Sumner <mdsumner at gmail.com> wrote:

> I'm using a derived subdataset dsn to try to open a STAC query:
>
> gdalinfo "STACIT:\"
> https://explorer.sandbox.dea.ga.gov.au/stac/search?bbox=122.1,-18.28,122.48,-17.91&datetime=2020-01-01/2020-02-29\
> ":asset=level3,collections=ga_ls_landcover_class_cyear_2"
>
> ERROR 1: Cannot open
> s3://dea-public-data/derivative/ga_ls_landcover_class_cyear_2/1-0-0/2020/x_-11/y_-20/ga_ls_landcover_class_cyear_2_1-0-0_au_x-11y-20_2020-01-01_level3.tif
> to retrieve band characteristics
> gdalinfo failed - unable to open 'STACIT:"
> https://explorer.sandbox.dea.ga.gov.au/stac/search?bbox=122.1,-18.28,122.48,-17.91&datetime=2020-01-01/2020-02-29
> ":asset=level3,collections=ga_ls_landcover_class_cyear_2'.
>
> Am I doing something wrong with the STAC approach?  Similar tasks are
> working well with Microsoft Planetary Computer (but I'm generally out of my
> depth with STAC itself).
>
> The .tif itself seems fine via the /vsis3/ syntax
>
> gdalinfo
> /vsis3/dea-public-data/derivative/ga_ls_landcover_class_cyear_2/1-0-0/2020/x_-11/y_-20/ga_ls_landcover_class_cyear_2_1-0-0_au_x-11y-20_2020-01-01_level3.tif
>
>
> I've put the calls here in case email problems with the strings:
> https://gist.github.com/mdsumner/90f5b509c5cb32bc0f1a26c695baa0bf
>
> I'm using gdal dev GDAL 3.8.0dev-bba8edfc13, released 2023/08/01 (debug
> build)
>
> Thanks, Mike
>
>
> --
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230802/2e859e62/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Aug  7 15:47:35 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 7 Aug 2023 22:47:35 +0000
Subject: [gdal-dev] Test mail
Message-ID: <AM0PR09MB321947E391DC1075C68531FAFD0CA@AM0PR09MB3219.eurprd09.prod.outlook.com>

The last mail that I have received from the list is dated August 2, testing if sending mail to the list succeeds.

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230807/5f289d81/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Aug  7 15:55:18 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 7 Aug 2023 22:55:18 +0000
Subject: [gdal-dev] How to utilize the new GEOS functions of Spatialite
 5.1.0?
In-Reply-To: <AM0PR09MB3219F5BAB1263EFB2C5A7C15FD0CA@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <AM0PR09MB3219D244B515C3F43694C128FD0CA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <AM0PR09MB3219F5BAB1263EFB2C5A7C15FD0CA@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <AM0PR09MB3219BBE07BBE9E4A42F2BAC2FD0CA@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

The new Spatialite version has a bunch of new GEOS based functions

   * GEOSMinimumRotatedRectangle aka ST_OrientedEnvelope
   * GEOSMaximumInscribedCircle
   * GEOSMinimumBoundingCircle
   * GEOSMinimumBoundingRadius
   * GEOSMinimumBoundingCenter
   * GEOSLargestEmptyCircle
   * GEOSMinimumWidth
   * GEOSMinimumClearance
   * GEOSMinimumClearanceLine
   * GeosDensify
   * GeosMakeValid
   * ReducePrecision
   * HilbertCode
   * GeosConcaveHull

I installed gdal-dev version with OSGeo4W and I can see that it is having Spatialite 5.1.0 and GEOS 3.12.0-CAPI-1.18.0. I suppose that the new functions should now work with commands like this, but I get an error instead:

ogrinfo polygon.gpkg -sql "select GEOSMaximumInscribedCircle(geom,1000) from polygon" -dialect SQLite
INFO: Open of `polygon.gpkg'
      using driver `GPKG' successful.
ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(select GEOSMaximumInscribedCircle(geom,1000) from polygon):
  no such function: GEOSMaximumInscribedCircle

I confirmed with the spatialite 5.1.0 Windows binary that this query works:

SELECT ST_AsText(GEOSMaximumInscribedCircle(ST_GeomFromText('POLYGON ((40 180, 110 160, 180 180, 180 120, 140 90, 160 40, 80 10, 70 40, 20 50, 40 180),(60 140, 50 90, 90 140, 60 140))'),10000));
LINESTRING(100 95, 71.95122 117.439024)

However, some functions like GEOSMinimumClearance seem to work.

-Jukka Rahkonen-


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230807/c1e26ce1/attachment.htm>

From even.rouault at spatialys.com  Mon Aug  7 16:49:08 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Aug 2023 01:49:08 +0200
Subject: [gdal-dev] How to utilize the new GEOS functions of Spatialite
 5.1.0?
In-Reply-To: <AM0PR09MB3219BBE07BBE9E4A42F2BAC2FD0CA@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <AM0PR09MB3219D244B515C3F43694C128FD0CA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <AM0PR09MB3219F5BAB1263EFB2C5A7C15FD0CA@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <AM0PR09MB3219BBE07BBE9E4A42F2BAC2FD0CA@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <df4d8a6c-8195-043e-c0fc-b74f90945bfd@spatialys.com>

Jukka,

I believe this is a OSGeo4W specific build issue that doesn't activate 
functionalities of GEOS >= 3.10. I've proposed a potential fix in 
https://github.com/jef-n/OSGeo4W/pull/17

Even

Le 08/08/2023 ? 00:55, Rahkonen Jukka a ?crit?:
>
> Hi,
>
> The new Spatialite version has a bunch of new GEOS based functions
>
> ?? * GEOSMinimumRotatedRectangle aka ST_OrientedEnvelope
> ? ?* GEOSMaximumInscribedCircle
> ? ?* GEOSMinimumBoundingCircle
> ? ?* GEOSMinimumBoundingRadius
> ? ?* GEOSMinimumBoundingCenter
> ? ?* GEOSLargestEmptyCircle
> ? ?* GEOSMinimumWidth
> ? ?* GEOSMinimumClearance
> ? ?* GEOSMinimumClearanceLine
> ? ?* GeosDensify
> ? ?* GeosMakeValid
> ? ?* ReducePrecision
> ? ?* HilbertCode
> ? ?* GeosConcaveHull
>
> I installed gdal-dev version with OSGeo4W and I can see that it is 
> having Spatialite 5.1.0 and GEOS 3.12.0-CAPI-1.18.0. I suppose that 
> the new functions should now work with commands like this, but I get 
> an error instead:
>
> ogrinfo polygon.gpkg -sql "select 
> GEOSMaximumInscribedCircle(geom,1000) from polygon" -dialect SQLite
>
> INFO: Open of `polygon.gpkg'
>
> ????? using driver `GPKG' successful.
>
> ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(select 
> GEOSMaximumInscribedCircle(geom,1000) from polygon):
>
> ? no such function: GEOSMaximumInscribedCircle
>
> I confirmed with the spatialite 5.1.0 Windows binary that this query 
> works:
>
> SELECT ST_AsText(GEOSMaximumInscribedCircle(ST_GeomFromText('POLYGON 
> ((40 180, 110 160, 180 180, 180 120, 140 90, 160 40, 80 10, 70 40, 20 
> 50, 40 180),(60 140, 50 90, 90 140, 60 140))'),10000));
>
> LINESTRING(100 95, 71.95122 117.439024)
>
> However, some functions like GEOSMinimumClearance seem to work.
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230808/d2e9c7ce/attachment-0001.htm>

From izzybitsie at gmail.com  Wed Aug  9 13:29:52 2023
From: izzybitsie at gmail.com (Dori)
Date: Wed, 9 Aug 2023 13:29:52 -0700
Subject: [gdal-dev] convert NETCDF to Geotiff upside down
Message-ID: <CALjPR3cy67N8f7SwLeOMYdyvNY0D_pL8XouZvCgTEhD+a3_2MQ@mail.gmail.com>

Hi,
I tried to convert the NETCDF stored in
https://noaa-gmgsi-pds.s3.amazonaws.com/index.html#GMGSI_LW/202308/08/19/GLOBCOMPLIR_nc.2023080819
 to Geotiff format using following command:

gdal_translate 0ol GTiff -a_srs EPSG:4326 -aullr -180 -72.7 179.9 -72.7 -co
?COMPRESS=LZW? NETCDF:GLOBCOMPLIR_nc.2023080819:data ofn.tif

ofn.tif is upside down.  North latitude points are in South and viceversa.

How can I solve this upside down output?
What causes this?

I did notice that the points in the NETCDF file are not equidistant  what
could be my issue.

Thank you for any hint on how to go about getting the correct Geotiff output
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230809/9f13903c/attachment.htm>

From mdsumner at gmail.com  Wed Aug  9 14:17:40 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 10 Aug 2023 07:17:40 +1000
Subject: [gdal-dev] convert NETCDF to Geotiff upside down
In-Reply-To: <CALjPR3cy67N8f7SwLeOMYdyvNY0D_pL8XouZvCgTEhD+a3_2MQ@mail.gmail.com>
References: <CALjPR3cy67N8f7SwLeOMYdyvNY0D_pL8XouZvCgTEhD+a3_2MQ@mail.gmail.com>
Message-ID: <CAAcGz984dgJXGoWOQq16pysz4kHyLbWw0fyqvD9J6re5i9=qNw@mail.gmail.com>

there is no georeferencing with this one, but as you say it has internal
coordinates (which GDAL interprets as "geolocation arrays")

so, run it through the warper i.e.

gdalwarp NETCDF:GLOBCOMPLIR_nc.2023080819:data ofn.tif

With that you can (and should) set your desired extent (-te), dimensions
(-ts) [or resolution -tr], and crs (-t_crs) but GDAL will produce an output
that works by heuristics if you specify none (or some) of those.

I did the following just for fun to see if the non-downloading pathway
would work it (not sure if the config is required or not, for testing
purposes I set dimension to 1024,0 which means GDAL figures out a sensible
aspect ratio - just remove -ts when you're happy with the result for full
resolution. )

gdalwarp --config AWS_NO_SIGN_REQUEST "YES"
NETCDF:"/vsis3/noaa-gmgsi-pds/GMGSI_LW/2023/08/08/19/GLOBCOMPLIR_nc.2023080819":data
-ts 1024 0 GLOBCOMPLIR_nc.2023080819_test.tif

(some details might not work depending on your GDAL version)

Cheers, Mike

On Thu, Aug 10, 2023 at 6:30?AM Dori <izzybitsie at gmail.com> wrote:

> Hi,
> I tried to convert the NETCDF stored in
> https://noaa-gmgsi-pds.s3.amazonaws.com/index.html#GMGSI_LW/202308/08/19/GLOBCOMPLIR_nc.2023080819
>  to Geotiff format using following command:
>
> gdal_translate 0ol GTiff -a_srs EPSG:4326 -aullr -180 -72.7 179.9 -72.7
> -co ?COMPRESS=LZW? NETCDF:GLOBCOMPLIR_nc.2023080819:data ofn.tif
>
> ofn.tif is upside down.  North latitude points are in South and viceversa.
>
> How can I solve this upside down output?
> What causes this?
>
> I did notice that the points in the NETCDF file are not equidistant  what
> could be my issue.
>
> Thank you for any hint on how to go about getting the correct Geotiff
> output
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230810/0a12f0ef/attachment.htm>

From mdsumner at gmail.com  Wed Aug  9 14:37:36 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 10 Aug 2023 07:37:36 +1000
Subject: [gdal-dev] convert NETCDF to Geotiff upside down
In-Reply-To: <CAAcGz984dgJXGoWOQq16pysz4kHyLbWw0fyqvD9J6re5i9=qNw@mail.gmail.com>
References: <CALjPR3cy67N8f7SwLeOMYdyvNY0D_pL8XouZvCgTEhD+a3_2MQ@mail.gmail.com>
 <CAAcGz984dgJXGoWOQq16pysz4kHyLbWw0fyqvD9J6re5i9=qNw@mail.gmail.com>
Message-ID: <CAAcGz99ss6JMkgTne-B35B-Q4MpBENNO_1ixb222fxgN9oG4vQ@mail.gmail.com>

just a follow up, as far as I can tell the lon,lat arrays are actually
natively in global Mercator, so a four-number extent would suffice  but
these arrays have been materialized rather than preserve that compact
origin (it's very common sadly). You might feed that back to the providers
and/or other users of the data, shipping these lon,lat arrays is
unfortunate when simple georeferencing (extent, expressed as affine
transform and a crs) would do. There's more metadata than data in these
files ...

I've used many tricks to workaround bad formats like these, but now I'd
just say to shove it through the warper because that is now so fast and
reliable.

Cheers, MIke



On Thu, Aug 10, 2023 at 7:17?AM Michael Sumner <mdsumner at gmail.com> wrote:

> there is no georeferencing with this one, but as you say it has internal
> coordinates (which GDAL interprets as "geolocation arrays")
>
> so, run it through the warper i.e.
>
> gdalwarp NETCDF:GLOBCOMPLIR_nc.2023080819:data ofn.tif
>
> With that you can (and should) set your desired extent (-te), dimensions
> (-ts) [or resolution -tr], and crs (-t_crs) but GDAL will produce an output
> that works by heuristics if you specify none (or some) of those.
>
> I did the following just for fun to see if the non-downloading pathway
> would work it (not sure if the config is required or not, for testing
> purposes I set dimension to 1024,0 which means GDAL figures out a sensible
> aspect ratio - just remove -ts when you're happy with the result for full
> resolution. )
>
> gdalwarp --config AWS_NO_SIGN_REQUEST "YES"
> NETCDF:"/vsis3/noaa-gmgsi-pds/GMGSI_LW/2023/08/08/19/GLOBCOMPLIR_nc.2023080819":data
> -ts 1024 0 GLOBCOMPLIR_nc.2023080819_test.tif
>
> (some details might not work depending on your GDAL version)
>
> Cheers, Mike
>
> On Thu, Aug 10, 2023 at 6:30?AM Dori <izzybitsie at gmail.com> wrote:
>
>> Hi,
>> I tried to convert the NETCDF stored in
>> https://noaa-gmgsi-pds.s3.amazonaws.com/index.html#GMGSI_LW/202308/08/19/GLOBCOMPLIR_nc.2023080819
>>  to Geotiff format using following command:
>>
>> gdal_translate 0ol GTiff -a_srs EPSG:4326 -aullr -180 -72.7 179.9 -72.7
>> -co ?COMPRESS=LZW? NETCDF:GLOBCOMPLIR_nc.2023080819:data ofn.tif
>>
>> ofn.tif is upside down.  North latitude points are in South and viceversa.
>>
>> How can I solve this upside down output?
>> What causes this?
>>
>> I did notice that the points in the NETCDF file are not equidistant  what
>> could be my issue.
>>
>> Thank you for any hint on how to go about getting the correct Geotiff
>> output
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> --
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230810/bf06a609/attachment.htm>

From mariusjigmond at hotmail.com  Thu Aug 10 08:31:50 2023
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Thu, 10 Aug 2023 15:31:50 +0000
Subject: [gdal-dev] convert NETCDF to Geotiff upside down
In-Reply-To: <CALjPR3cy67N8f7SwLeOMYdyvNY0D_pL8XouZvCgTEhD+a3_2MQ@mail.gmail.com>
References: <CALjPR3cy67N8f7SwLeOMYdyvNY0D_pL8XouZvCgTEhD+a3_2MQ@mail.gmail.com>
Message-ID: <CY8PR12MB7563DF1E48850E57168A9C3CB213A@CY8PR12MB7563.namprd12.prod.outlook.com>

The following works for the proper orientation but there's a shift. I would consult the documentation as they usually specify conversion params.

gdal_translate -of GTiff -a_srs EPSG:4326 -a_ullr -179.9 -72.7 180 72.7 -co COMPRESS=LZW NETCDF:GLOBCOMPLIR_nc.2023080819:data ofn.tif
________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Dori <izzybitsie at gmail.com>
Sent: Wednesday, August 9, 2023 2:29 PM
To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] convert NETCDF to Geotiff upside down

Hi,
I tried to convert the NETCDF stored in https://noaa-gmgsi-pds.s3.amazonaws.com/index.html#GMGSI_LW/202308/08/19/GLOBCOMPLIR_nc.2023080819  to Geotiff format using following command:

gdal_translate 0ol GTiff -a_srs EPSG:4326 -aullr -180 -72.7 179.9 -72.7 -co ?COMPRESS=LZW? NETCDF:GLOBCOMPLIR_nc.2023080819:data ofn.tif

ofn.tif is upside down.  North latitude points are in South and viceversa.

How can I solve this upside down output?
What causes this?

I did notice that the points in the NETCDF file are not equidistant  what could be my issue.

Thank you for any hint on how to go about getting the correct Geotiff output

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230810/4363ae0c/attachment-0001.htm>

From izzybitsie at gmail.com  Thu Aug 10 16:06:04 2023
From: izzybitsie at gmail.com (Dori)
Date: Thu, 10 Aug 2023 16:06:04 -0700
Subject: [gdal-dev] convert NETCDF to Geotiff upside down
In-Reply-To: <CY8PR12MB7563DF1E48850E57168A9C3CB213A@CY8PR12MB7563.namprd12.prod.outlook.com>
References: <CALjPR3cy67N8f7SwLeOMYdyvNY0D_pL8XouZvCgTEhD+a3_2MQ@mail.gmail.com>
 <CY8PR12MB7563DF1E48850E57168A9C3CB213A@CY8PR12MB7563.namprd12.prod.outlook.com>
Message-ID: <CALjPR3czCxr0KV4+OM02npRkGCMr5KC5Ntxn0nM9wiphDN_J6w@mail.gmail.com>

Thank you all for the helpful information.
I tried the conversion with the -ts and without but I did not see a big
difference in the output Geotiff image.



On Thu, Aug 10, 2023 at 08:31 Marius Jigmond <mariusjigmond at hotmail.com>
wrote:

> The following works for the proper orientation but there's a shift. I
> would consult the documentation as they usually specify conversion params.
>
> gdal_translate -of GTiff -a_srs EPSG:4326 -a_ullr -179.9 -72.7 180 72.7
> -co COMPRESS=LZW NETCDF:GLOBCOMPLIR_nc.2023080819:data ofn.tif
> ------------------------------
> *From:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Dori <
> izzybitsie at gmail.com>
> *Sent:* Wednesday, August 9, 2023 2:29 PM
> *To:* gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
> *Subject:* [gdal-dev] convert NETCDF to Geotiff upside down
>
> Hi,
> I tried to convert the NETCDF stored in
> https://noaa-gmgsi-pds.s3.amazonaws.com/index.html#GMGSI_LW/202308/08/19/GLOBCOMPLIR_nc.2023080819
>  to Geotiff format using following command:
>
> gdal_translate 0ol GTiff -a_srs EPSG:4326 -aullr -180 -72.7 179.9 -72.7
> -co ?COMPRESS=LZW? NETCDF:GLOBCOMPLIR_nc.2023080819:data ofn.tif
>
> ofn.tif is upside down.  North latitude points are in South and viceversa.
>
> How can I solve this upside down output?
> What causes this?
>
> I did notice that the points in the NETCDF file are not equidistant  what
> could be my issue.
>
> Thank you for any hint on how to go about getting the correct Geotiff
> output
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230810/3ae760ec/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Aug 11 01:39:05 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 11 Aug 2023 08:39:05 +0000
Subject: [gdal-dev] Combining gdaltindex and gdal_footprint
Message-ID: <AM0PR09MB3219E97CF3586C2C98483D0DFD10A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

An idea for the developers when they have nothing else to do: It would be nice if gdaltindex  https://gdal.org/programs/gdaltindex.html could utilize the features of gdal_footprint https://gdal.org/programs/gdal_footprint.html and generate an index file of the footprints for a whole directory of files.

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230811/3f162494/attachment.htm>

From pcreso at yahoo.com  Tue Aug 15 17:12:29 2023
From: pcreso at yahoo.com (Brent Wood)
Date: Wed, 16 Aug 2023 00:12:29 +0000 (UTC)
Subject: [gdal-dev] ogr2ogr postgis to sqlite composite primary key
 issueissue
References: <854889559.188807.1692144749912.ref@mail.yahoo.com>
Message-ID: <854889559.188807.1692144749912@mail.yahoo.com>

Hi,
I'm looking to use ogr2ogr to replicate a Postgis schema into a Spatialite database. (Make a snapshot copy of institutional tables on a field laptop with possible no internet access)

I have a script to identify the relevant tables and invoke ogr2ogr to copy each table.
Some of the source (Postgis) tables have a composite primary key. ogr2ogr flags these and says such keys are unsupported. It fails to copy these tables.
What I'd like it to do is copy the data in such cases but ignore the primary key. 

Is this possible?

Thanks,
Brent Wood
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230816/13a6477c/attachment.htm>

From public at postholer.com  Tue Aug 15 17:57:05 2023
From: public at postholer.com (Scott)
Date: Tue, 15 Aug 2023 17:57:05 -0700
Subject: [gdal-dev] ogr2ogr postgis to sqlite composite primary key
 issueissue
In-Reply-To: <854889559.188807.1692144749912@mail.yahoo.com>
References: <854889559.188807.1692144749912.ref@mail.yahoo.com>
 <854889559.188807.1692144749912@mail.yahoo.com>
Message-ID: <a5cb8263-374e-bbec-aba4-8278ae74fd00@postholer.com>

You could build your column list without that specific column and pass 
it to ogr2ogr (bash):

ogr2ogr -sql "select $(psql -d mydb --pset='footer=off' -F',' -qAc 
"select * from table where false" |sed 's/columnToOmit,//g') from table" 
target.gpkg PG:dbname=mydb


On 8/15/23 17:12, Brent Wood via gdal-dev wrote:
> Hi,
> 
> I'm looking to use ogr2ogr to replicate a Postgis schema into a 
> Spatialite database. (Make a snapshot copy of institutional tables on a 
> field laptop with possible no internet access)
> 
> I have a script to identify the relevant tables and invoke ogr2ogr to 
> copy each table.
> 
> Some of the source (Postgis) tables have a composite primary key. 
> ogr2ogr flags these and says such keys are unsupported. It fails to copy 
> these tables.
> 
> What I'd like it to do is copy the data in such cases but ignore the 
> primary key.
> 
> Is this possible?
> 
> 
> Thanks,
> 
> Brent Wood
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From pcreso at yahoo.com  Tue Aug 15 18:26:36 2023
From: pcreso at yahoo.com (Brent Wood)
Date: Wed, 16 Aug 2023 01:26:36 +0000 (UTC)
Subject: [gdal-dev] ogr2ogr postgis to sqlite composite primary key
 issueissue
In-Reply-To: <a5cb8263-374e-bbec-aba4-8278ae74fd00@postholer.com>
References: <854889559.188807.1692144749912.ref@mail.yahoo.com>
 <854889559.188807.1692144749912@mail.yahoo.com>
 <a5cb8263-374e-bbec-aba4-8278ae74fd00@postholer.com>
Message-ID: <954601940.205760.1692149196091@mail.yahoo.com>

 Thanks, 

The primary key on the source tables is on required columns - it is a natural key based on core data so cannot be excluded to have a meaningful dataset exported.

Also, invoking it your way provides a data only export - just the output of a select statement. I'm trying to create replicate data structures populated with the data in the Spatialite database.
It seems that using an intermediate format such as shapefile should work, as this will essentially drop any primasry key anyway, but I'm trying the direct approach first.

Also, your example exports to geopackage, that is not what I'm after, Spatialite is much more than geopackage.

Cheers

Brent
    On Wednesday, August 16, 2023 at 12:57:14 PM GMT+12, Scott <public at postholer.com> wrote:  
 
 You could build your column list without that specific column and pass 
it to ogr2ogr (bash):

ogr2ogr -sql "select $(psql -d mydb --pset='footer=off' -F',' -qAc 
"select * from table where false" |sed 's/columnToOmit,//g') from table" 
target.gpkg PG:dbname=mydb


On 8/15/23 17:12, Brent Wood via gdal-dev wrote:
> Hi,
> 
> I'm looking to use ogr2ogr to replicate a Postgis schema into a 
> Spatialite database. (Make a snapshot copy of institutional tables on a 
> field laptop with possible no internet access)
> 
> I have a script to identify the relevant tables and invoke ogr2ogr to 
> copy each table.
> 
> Some of the source (Postgis) tables have a composite primary key. 
> ogr2ogr flags these and says such keys are unsupported. It fails to copy 
> these tables.
> 
> What I'd like it to do is copy the data in such cases but ignore the 
> primary key.
> 
> Is this possible?
> 
> 
> Thanks,
> 
> Brent Wood
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230816/5f3005b2/attachment.htm>

From public at postholer.com  Tue Aug 15 18:53:57 2023
From: public at postholer.com (Scott)
Date: Tue, 15 Aug 2023 18:53:57 -0700
Subject: [gdal-dev] ogr2ogr postgis to sqlite composite primary key
 issueissue
In-Reply-To: <954601940.205760.1692149196091@mail.yahoo.com>
References: <854889559.188807.1692144749912.ref@mail.yahoo.com>
 <854889559.188807.1692144749912@mail.yahoo.com>
 <a5cb8263-374e-bbec-aba4-8278ae74fd00@postholer.com>
 <954601940.205760.1692149196091@mail.yahoo.com>
Message-ID: <e79bef15-3bce-3646-a8e0-9c9576a5c3f1@postholer.com>

Change target.gpkg to target.sqlite

...and in the -sql use something like "select cast(primary_key as 
integer) as key, [all your other columns] from table"


> Thanks,
> 
> The primary key on the source tables is on required columns - it is a 
> natural key based on core data so cannot be excluded to have a 
> meaningful dataset exported.
> 
> Also, invoking it your way provides a data only export - just the output 
> of a select statement. I'm trying to create replicate data structures 
> populated with the data in the Spatialite database.
> 
> It seems that using an intermediate format such as shapefile should 
> work, as this will essentially drop any primasry key anyway, but I'm 
> trying the direct approach first.
> 
> Also, your example exports to geopackage, that is not what I'm after, 
> Spatialite is much more than geopackage.
> 
> Cheers
> 
> Brent
> 
> On Wednesday, August 16, 2023 at 12:57:14 PM GMT+12, Scott 
> <public at postholer.com> wrote:
> 
> 
> You could build your column list without that specific column and pass
> it to ogr2ogr (bash):
> 
> ogr2ogr -sql "select $(psql -d mydb --pset='footer=off' -F',' -qAc
> "select * from table where false" |sed 's/columnToOmit,//g') from table"
> target.gpkg PG:dbname=mydb
> 
> 
> On 8/15/23 17:12, Brent Wood via gdal-dev wrote:
>  > Hi,
>  >
>  > I'm looking to use ogr2ogr to replicate a Postgis schema into a
>  > Spatialite database. (Make a snapshot copy of institutional tables on a
>  > field laptop with possible no internet access)
>  >
>  > I have a script to identify the relevant tables and invoke ogr2ogr to
>  > copy each table.
>  >
>  > Some of the source (Postgis) tables have a composite primary key.
>  > ogr2ogr flags these and says such keys are unsupported. It fails to copy
>  > these tables.
>  >
>  > What I'd like it to do is copy the data in such cases but ignore the
>  > primary key.
>  >
>  > Is this possible?
>  >
>  >
>  > Thanks,
>  >
>  > Brent Wood
>  >
>  > _______________________________________________
>  > gdal-dev mailing list
>  > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>  > https://lists.osgeo.org/mailman/listinfo/gdal-dev 
> <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev 
> <https://lists.osgeo.org/mailman/listinfo/gdal-dev>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Aug 15 23:37:30 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 16 Aug 2023 06:37:30 +0000
Subject: [gdal-dev] ogr2ogr postgis to sqlite composite primary key
 issueissue
In-Reply-To: <954601940.205760.1692149196091@mail.yahoo.com>
References: <854889559.188807.1692144749912.ref@mail.yahoo.com>
 <854889559.188807.1692144749912@mail.yahoo.com>
 <a5cb8263-374e-bbec-aba4-8278ae74fd00@postholer.com>
 <954601940.205760.1692149196091@mail.yahoo.com>
Message-ID: <AM0PR09MB3219E5BCE6395578DB64D8D0FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Could you share some test data? A "CREATE TABLE..." SQL and an INSERT for one row should be enough. Use minimal number or fields for keeping it simple.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Brent Wood via gdal-dev
L?hetetty: keskiviikko 16. elokuuta 2023 4.27
Vastaanottaja: gdal-dev at lists.osgeo.org; Scott <public at postholer.com>
Aihe: Re: [gdal-dev] ogr2ogr postgis to sqlite composite primary key issueissue

Thanks,

The primary key on the source tables is on required columns - it is a natural key based on core data so cannot be excluded to have a meaningful dataset exported.

Also, invoking it your way provides a data only export - just the output of a select statement. I'm trying to create replicate data structures populated with the data in the Spatialite database.

It seems that using an intermediate format such as shapefile should work, as this will essentially drop any primasry key anyway, but I'm trying the direct approach first.

Also, your example exports to geopackage, that is not what I'm after, Spatialite is much more than geopackage.

Cheers

Brent

On Wednesday, August 16, 2023 at 12:57:14 PM GMT+12, Scott <public at postholer.com<mailto:public at postholer.com>> wrote:


You could build your column list without that specific column and pass
it to ogr2ogr (bash):

ogr2ogr -sql "select $(psql -d mydb --pset='footer=off' -F',' -qAc
"select * from table where false" |sed 's/columnToOmit,//g') from table"
target.gpkg PG:dbname=mydb


On 8/15/23 17:12, Brent Wood via gdal-dev wrote:
> Hi,
>
> I'm looking to use ogr2ogr to replicate a Postgis schema into a
> Spatialite database. (Make a snapshot copy of institutional tables on a
> field laptop with possible no internet access)
>
> I have a script to identify the relevant tables and invoke ogr2ogr to
> copy each table.
>
> Some of the source (Postgis) tables have a composite primary key.
> ogr2ogr flags these and says such keys are unsupported. It fails to copy
> these tables.
>
> What I'd like it to do is copy the data in such cases but ignore the
> primary key.
>
> Is this possible?
>
>
> Thanks,
>
> Brent Wood
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230816/2607a187/attachment-0001.htm>

From stijn+gdal-dev at strict.be  Wed Aug 16 00:29:16 2023
From: stijn+gdal-dev at strict.be (Stijn Tallir)
Date: Wed, 16 Aug 2023 09:29:16 +0200
Subject: [gdal-dev] tps - gdalwarp vs ogr2ogr
Message-ID: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>

Hi,

According to the documentation gdal and ogr use the same algorithm for the
tps-transformation but I don't seem to get the same results using the same
set of gcp's for images and vectors.

I have images that are unreferenced and vector data digitised on these
images (in pixel coordinates).

The images are then georeferenced with +100 gcp's and warped with gdalwarp
using the "tps" option.

When I use the same gcp's (with adjusted y-origin to lower left corner) to
georeference the vector data with ogr2ogr and the "tps" option I get
different results. The vector-result is similar to the image-result but
never exactly the same and differences can be substantial.

Any thoughts?

Stijn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230816/50ffbb23/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Aug 16 01:22:30 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 16 Aug 2023 08:22:30 +0000
Subject: [gdal-dev] tps - gdalwarp vs ogr2ogr
In-Reply-To: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
References: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
Message-ID: <AM0PR09MB32198CC1783B683BF77E07C8FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Without test data it is very hard to say much. I believe that the promise of tps is that the ground control points stay where they are set. The intermediate points follow the least tension surfaces and I do not know how exactly those spline algorithms are defined. Raster data is full of points to warp but probably in the vector data the transformation is done vertex by vertex. I would first check if the GCPs are in the same place in both outputs. Then I would make a test by densifying the vector data before georeferencing to have much more vertices and see if it has any effect on the result.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Stijn Tallir
L?hetetty: keskiviikko 16. elokuuta 2023 10.29
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] tps - gdalwarp vs ogr2ogr

Hi,

According to the documentation gdal and ogr use the same algorithm for the tps-transformation but I don't seem to get the same results using the same set of gcp's for images and vectors.

I have images that are unreferenced and vector data digitised on these images (in pixel coordinates).

The images are then georeferenced with +100 gcp's and warped with gdalwarp using the "tps" option.

When I use the same gcp's (with adjusted y-origin to lower left corner) to georeference the vector data with ogr2ogr and the "tps" option I get different results. The vector-result is similar to the image-result but never exactly the same and differences can be substantial.

Any thoughts?

Stijn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230816/6645efa1/attachment.htm>

From andrew at aitchison.me.uk  Wed Aug 16 02:14:03 2023
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Wed, 16 Aug 2023 10:14:03 +0100 (BST)
Subject: [gdal-dev] tps - gdalwarp vs ogr2ogr
In-Reply-To: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
References: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
Message-ID: <40552695-76ad-648b-6a8c-efc858c5c831@aitchison.me.uk>

On Wed, 16 Aug 2023, Stijn Tallir wrote:

> Hi,
>
> According to the documentation gdal and ogr use the same algorithm for the
> tps-transformation but I don't seem to get the same results using the same
> set of gcp's for images and vectors.
>
> I have images that are unreferenced and vector data digitised on these
> images (in pixel coordinates).
>
> The images are then georeferenced with +100 gcp's and warped with gdalwarp
> using the "tps" option.
>
> When I use the same gcp's (with adjusted y-origin to lower left corner) to
> georeference the vector data with ogr2ogr and the "tps" option I get
> different results. The vector-result is similar to the image-result but
> never exactly the same and differences can be substantial.

Is AREA_OR_POINT set ?

-- 
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk

From stijn+gdal-dev at strict.be  Wed Aug 16 02:28:29 2023
From: stijn+gdal-dev at strict.be (Stijn Tallir)
Date: Wed, 16 Aug 2023 11:28:29 +0200
Subject: [gdal-dev] tps - gdalwarp vs ogr2ogr
In-Reply-To: <40552695-76ad-648b-6a8c-efc858c5c831@aitchison.me.uk>
References: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
 <40552695-76ad-648b-6a8c-efc858c5c831@aitchison.me.uk>
Message-ID: <CAKadDxsZK3Z_S1E4PjVcRQ+_04g7QmZvDNbeUrZJ7hmo4Vso_A@mail.gmail.com>

No, didn't use that option.
The raster image results are correct though. The results are exactly what I
would expect from a tps. The vector results don't exactly match the gcp
"to"-points as you would expect.
Tried the different order transformations to see if the tps was somehow
ignored but these gave different results.

Op wo 16 aug 2023 om 11:14 schreef Andrew C Aitchison <
andrew at aitchison.me.uk>:

> On Wed, 16 Aug 2023, Stijn Tallir wrote:
>
> > Hi,
> >
> > According to the documentation gdal and ogr use the same algorithm for
> the
> > tps-transformation but I don't seem to get the same results using the
> same
> > set of gcp's for images and vectors.
> >
> > I have images that are unreferenced and vector data digitised on these
> > images (in pixel coordinates).
> >
> > The images are then georeferenced with +100 gcp's and warped with
> gdalwarp
> > using the "tps" option.
> >
> > When I use the same gcp's (with adjusted y-origin to lower left corner)
> to
> > georeference the vector data with ogr2ogr and the "tps" option I get
> > different results. The vector-result is similar to the image-result but
> > never exactly the same and differences can be substantial.
>
> Is AREA_OR_POINT set ?
>
> --
> Andrew C. Aitchison                      Kendal, UK
>                     andrew at aitchison.me.uk
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230816/01c26d8f/attachment-0001.htm>

From stijn+gdal-dev at strict.be  Wed Aug 16 02:30:10 2023
From: stijn+gdal-dev at strict.be (Stijn Tallir)
Date: Wed, 16 Aug 2023 11:30:10 +0200
Subject: [gdal-dev] tps - gdalwarp vs ogr2ogr
In-Reply-To: <AM0PR09MB32198CC1783B683BF77E07C8FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
 <AM0PR09MB32198CC1783B683BF77E07C8FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <CAKadDxsT+Wupu7n=uuALHv3Qz00zY-GfZCa9DYpe7-+FFxqsjA@mail.gmail.com>

Hi Jukka,

I thought of the density as an option for the "error" as you suggested and
I made a point-file with a point for every pixel in my original image and
used this as a source for the ogr2ogr transformation. So you could say the
desnity for both sources raster and vector) are then alike.

The results were still the same (and wrong) ...

(sorry for the double e-mail, I didn't respond correctly the first time)

Stijn

Op wo 16 aug 2023 om 10:22 schreef Rahkonen Jukka <
jukka.rahkonen at maanmittauslaitos.fi>:

> Hi,
>
>
>
> Without test data it is very hard to say much. I believe that the promise
> of tps is that the ground control points stay where they are set. The
> intermediate points follow the least tension surfaces and I do not know how
> exactly those spline algorithms are defined. Raster data is full of points
> to warp but probably in the vector data the transformation is done vertex
> by vertex. I would first check if the GCPs are in the same place in both
> outputs. Then I would make a test by densifying the vector data before
> georeferencing to have much more vertices and see if it has any effect on
> the result.
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Stijn
> Tallir
> *L?hetetty:* keskiviikko 16. elokuuta 2023 10.29
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* [gdal-dev] tps - gdalwarp vs ogr2ogr
>
>
>
> Hi,
>
>
>
> According to the documentation gdal and ogr use the same algorithm for the
> tps-transformation but I don't seem to get the same results using the same
> set of gcp's for images and vectors.
>
>
>
> I have images that are unreferenced and vector data digitised on these
> images (in pixel coordinates).
>
>
>
> The images are then georeferenced with +100 gcp's and warped with gdalwarp
> using the "tps" option.
>
>
>
> When I use the same gcp's (with adjusted y-origin to lower left corner) to
> georeference the vector data with ogr2ogr and the "tps" option I get
> different results. The vector-result is similar to the image-result but
> never exactly the same and differences can be substantial.
>
>
>
> Any thoughts?
>
>
>
> Stijn
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230816/05182291/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Aug 16 02:51:55 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 16 Aug 2023 09:51:55 +0000
Subject: [gdal-dev] tps - gdalwarp vs ogr2ogr
In-Reply-To: <CAKadDxuV_6TLqDfX0S-3eWpvD2tZ62tpUFdusu4jEfFLpUR4eQ@mail.gmail.com>
References: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
 <AM0PR09MB32198CC1783B683BF77E07C8FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxuV_6TLqDfX0S-3eWpvD2tZ62tpUFdusu4jEfFLpUR4eQ@mail.gmail.com>
Message-ID: <AM0PR09MB32194542EA59601B78D52766FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

Did you check the ground control points? What is your reference when you say that one result is right, and another wrong? Have you used some other software for comparison? Or do you only know that the results are different?

-Jukka-

L?hett?j?: Stijn Tallir <stijn at strict.be>
L?hetetty: keskiviikko 16. elokuuta 2023 12.27
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] tps - gdalwarp vs ogr2ogr

Hi Jukka,

I thought of the density as an option for the "error" as you suggested and I made a point-file with a point for every pixel in my original image and used this as a source for the ogr2ogr transformation. So you could say the desnity for both sources raster and vector) are then alike.

The results were still the same (and wrong) ...

Stijn


Op wo 16 aug 2023 om 10:22 schreef Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>:
Hi,

Without test data it is very hard to say much. I believe that the promise of tps is that the ground control points stay where they are set. The intermediate points follow the least tension surfaces and I do not know how exactly those spline algorithms are defined. Raster data is full of points to warp but probably in the vector data the transformation is done vertex by vertex. I would first check if the GCPs are in the same place in both outputs. Then I would make a test by densifying the vector data before georeferencing to have much more vertices and see if it has any effect on the result.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Stijn Tallir
L?hetetty: keskiviikko 16. elokuuta 2023 10.29
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] tps - gdalwarp vs ogr2ogr

Hi,

According to the documentation gdal and ogr use the same algorithm for the tps-transformation but I don't seem to get the same results using the same set of gcp's for images and vectors.

I have images that are unreferenced and vector data digitised on these images (in pixel coordinates).

The images are then georeferenced with +100 gcp's and warped with gdalwarp using the "tps" option.

When I use the same gcp's (with adjusted y-origin to lower left corner) to georeference the vector data with ogr2ogr and the "tps" option I get different results. The vector-result is similar to the image-result but never exactly the same and differences can be substantial.

Any thoughts?

Stijn


--
Stijn Tallir - StrICT BV

Wijnveld 8
9112 Sinaai-Waas

GSM: 0486 750220

E-mail: Info at strict.be<mailto:Info at strict.be>
Web: www.strict.be<http://www.strict.be/>

BTW: BE 0567.559.668

[http://www.strict.be/strict_web2.jpg]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230816/7fc8f5fc/attachment-0001.htm>

From stijn+gdal-dev at strict.be  Wed Aug 16 04:16:49 2023
From: stijn+gdal-dev at strict.be (Stijn Tallir)
Date: Wed, 16 Aug 2023 13:16:49 +0200
Subject: [gdal-dev] tps - gdalwarp vs ogr2ogr
In-Reply-To: <AM0PR09MB32194542EA59601B78D52766FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <CAKadDxvOySAyTZpQTrW4iGVEPZcGOP0sGR+r8TMDo0gKLuEXZg@mail.gmail.com>
 <AM0PR09MB32198CC1783B683BF77E07C8FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
 <CAKadDxuV_6TLqDfX0S-3eWpvD2tZ62tpUFdusu4jEfFLpUR4eQ@mail.gmail.com>
 <AM0PR09MB32194542EA59601B78D52766FD15A@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <CAKadDxtf4d-qb1KAFJE7k74khF05+QLgDa7DunHCHwQgtTs7Bw@mail.gmail.com>

Yes, I checked them visually for both raster and vector.

I compared the results also visually. The rasters are transformed in a way
that the end ponts of the gcp's align exactly with the result so that is
why I referred to it as "right". The vector data result is in the
neighbourhood of the end points (sometimes a rather significant distance).

The result is different from order 1-3 transformations so I presume the tps
option isn't ignored.

Stijn

Op wo 16 aug 2023 om 11:52 schreef Rahkonen Jukka <
jukka.rahkonen at maanmittauslaitos.fi>:

> Hi,
>
>
>
> Did you check the ground control points? What is your reference when you
> say that one result is right, and another wrong? Have you used some other
> software for comparison? Or do you only know that the results are different?
>
>
>
> -Jukka-
>
>
>
> *L?hett?j?:* Stijn Tallir <stijn at strict.be>
> *L?hetetty:* keskiviikko 16. elokuuta 2023 12.27
> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> *Kopio:* gdal-dev at lists.osgeo.org
> *Aihe:* Re: [gdal-dev] tps - gdalwarp vs ogr2ogr
>
>
>
> Hi Jukka,
>
>
>
> I thought of the density as an option for the "error" as you suggested and
> I made a point-file with a point for every pixel in my original image and
> used this as a source for the ogr2ogr transformation. So you could say the
> desnity for both sources raster and vector) are then alike.
>
>
>
> The results were still the same (and wrong) ...
>
>
>
> Stijn
>
>
>
>
>
> Op wo 16 aug 2023 om 10:22 schreef Rahkonen Jukka <
> jukka.rahkonen at maanmittauslaitos.fi>:
>
> Hi,
>
>
>
> Without test data it is very hard to say much. I believe that the promise
> of tps is that the ground control points stay where they are set. The
> intermediate points follow the least tension surfaces and I do not know how
> exactly those spline algorithms are defined. Raster data is full of points
> to warp but probably in the vector data the transformation is done vertex
> by vertex. I would first check if the GCPs are in the same place in both
> outputs. Then I would make a test by densifying the vector data before
> georeferencing to have much more vertices and see if it has any effect on
> the result.
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Stijn
> Tallir
> *L?hetetty:* keskiviikko 16. elokuuta 2023 10.29
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* [gdal-dev] tps - gdalwarp vs ogr2ogr
>
>
>
> Hi,
>
>
>
> According to the documentation gdal and ogr use the same algorithm for the
> tps-transformation but I don't seem to get the same results using the same
> set of gcp's for images and vectors.
>
>
>
> I have images that are unreferenced and vector data digitised on these
> images (in pixel coordinates).
>
>
>
> The images are then georeferenced with +100 gcp's and warped with gdalwarp
> using the "tps" option.
>
>
>
> When I use the same gcp's (with adjusted y-origin to lower left corner) to
> georeference the vector data with ogr2ogr and the "tps" option I get
> different results. The vector-result is similar to the image-result but
> never exactly the same and differences can be substantial.
>
>
>
> Any thoughts?
>
>
>
> Stijn
>
>
>
>
> --
>
> Stijn Tallir - StrICT BV
>
>
>
> Wijnveld 8
>
> 9112 Sinaai-Waas
>
>
>
> GSM: 0486 750220
>
>
>
> E-mail: Info at strict.be
>
> Web: www.strict.be
>
>
>
> BTW: BE 0567.559.668
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230816/3b82a242/attachment.htm>

From jennifer.l.small at nasa.gov  Wed Aug 16 08:59:07 2023
From: jennifer.l.small at nasa.gov (Small, Jennifer L. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Wed, 16 Aug 2023 15:59:07 +0000
Subject: [gdal-dev] Inconsistencies in WKT CRS representations
Message-ID: <57B86F67-FD31-45B3-8D99-D0FBE9381029@nasa.gov>

I?m noticing subtle differences between the WKT representations for a given projection when consulting spatialreference.org, epsg.io, and the output from gdalinfo on an orthorectified raster. For example, for Africa Albers (ESRI code 102022):

1) gdalinfo output for a raster, CRS set with ?SetFromUserInput(?ESRI:102022?)?:

PROJCRS["Africa_Albers_Equal_Area_Conic",
    BASEGEOGCRS["WGS 84",
        DATUM["World Geodetic System 1984",
            ELLIPSOID["WGS 84",6378137,298.257223563,
                LENGTHUNIT["metre",1]]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["degree",0.0174532925199433]],
        ID["EPSG",4326]],
    CONVERSION["Albers Equal Area",
        METHOD["Albers Equal Area",
            ID["EPSG",9822]],
        PARAMETER["Latitude of false origin",0,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8821]],
        PARAMETER["Longitude of false origin",25,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8822]],
        PARAMETER["Latitude of 1st standard parallel",20,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8823]],
        PARAMETER["Latitude of 2nd standard parallel",-23,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8824]],
        PARAMETER["Easting at false origin",0,
            LENGTHUNIT["metre",1],
            ID["EPSG",8826]],
        PARAMETER["Northing at false origin",0,
            LENGTHUNIT["metre",1],
            ID["EPSG",8827]]],
    CS[Cartesian,2],
        AXIS["easting",east,
            ORDER[1],
            LENGTHUNIT["metre",1,
                ID["EPSG",9001]]],
        AXIS["northing",north,
            ORDER[2],
            LENGTHUNIT["metre",1,
                ID["EPSG",9001]]]]

2) WKT for ESRI 102022 at https://spatialreference.org/ref/esri/102022/prettywkt/

PROJCS["Africa_Albers_Equal_Area_Conic",
    GEOGCS["GCS_WGS_1984",
        DATUM["WGS_1984",
            SPHEROID["WGS_1984",6378137,298.257223563]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Albers_Conic_Equal_Area"],
    PARAMETER["False_Easting",0],
    PARAMETER["False_Northing",0],
    PARAMETER["longitude_of_center",25],
    PARAMETER["Standard_Parallel_1",20],
    PARAMETER["Standard_Parallel_2",-23],
    PARAMETER["latitude_of_center",0],
    UNIT["Meter",1],
    AUTHORITY["EPSG","102022"]]

3) WKT for ESRI 102022 at https://epsg.io/102022


PROJCS["Africa_Albers_Equal_Area_Conic",

    GEOGCS["WGS 84",

        DATUM["WGS_1984",

            SPHEROID["WGS 84",6378137,298.257223563,

                AUTHORITY["EPSG","7030"]],

            AUTHORITY["EPSG","6326"]],

        PRIMEM["Greenwich",0,

            AUTHORITY["EPSG","8901"]],

        UNIT["degree",0.0174532925199433,

            AUTHORITY["EPSG","9122"]],

        AUTHORITY["EPSG","4326"]],

    PROJECTION["Albers_Conic_Equal_Area"],

    PARAMETER["latitude_of_center",0],

    PARAMETER["longitude_of_center",25],

    PARAMETER["standard_parallel_1",20],

    PARAMETER["standard_parallel_2",-23],

    PARAMETER["false_easting",0],

    PARAMETER["false_northing",0],

    UNIT["metre",1,

        AUTHORITY["EPSG","9001"]],

    AXIS["Easting",EAST],

    AXIS["Northing",NORTH],

    AUTHORITY["ESRI","102022"]]

Note that the projection parameters are all the same (but with slightly different naming conventions), but the CRS AUTHORITY line does not exist in the GDAL version, is EPSG 102022 in the spatialreference.org version, and is ESRI 102022 in the epsg.io version.

Is it best to represent the CRS with WKT rather than importing using SetFromUserInput with EPSG:code or ESRI:code? If so, what source has the definitive WKT, spatialreference.org or epsg.io?


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230816/a1bba1a4/attachment-0001.htm>

From howard at hobu.co  Wed Aug 16 09:08:19 2023
From: howard at hobu.co (Howard Butler)
Date: Wed, 16 Aug 2023 11:08:19 -0500
Subject: [gdal-dev] Inconsistencies in WKT CRS representations
In-Reply-To: <57B86F67-FD31-45B3-8D99-D0FBE9381029@nasa.gov>
References: <57B86F67-FD31-45B3-8D99-D0FBE9381029@nasa.gov>
Message-ID: <18428074-4287-4FA5-8657-D8C3BE9D9928@hobu.co>



> On Aug 16, 2023, at 10:59 AM, Small, Jennifer L. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> Is it best to represent the CRS with WKT rather than importing using SetFromUserInput with EPSG:code or ESRI:code? If so, what source has the definitive WKT, spatialreference.org or epsg.io?

IMO, the definitive definition is 'projinfo'

> projinfo ESRI:102022

spatialreference.org has not been updated in many years and should be considered out of date. I don't know what version of PROJ epsg.io is running. https://epsg.org/ runs GDAL/PROJ too, but I don't know which version, and of course that isn't going to respond to ESRI codes.

Hope this helps,

Howard

From even.rouault at spatialys.com  Wed Aug 16 09:46:13 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Aug 2023 18:46:13 +0200
Subject: [gdal-dev] Inconsistencies in WKT CRS representations
In-Reply-To: <57B86F67-FD31-45B3-8D99-D0FBE9381029@nasa.gov>
References: <57B86F67-FD31-45B3-8D99-D0FBE9381029@nasa.gov>
Message-ID: <e2c15b84-064d-8ea7-7895-494661891bb0@spatialys.com>

Jennifer,

> Note that the projection parameters are all the same (but with 
> slightly different naming conventions), but the CRS AUTHORITY line 
> does not exist in the GDAL version, is EPSG 102022 in the 
> spatialreference.org version, and is ESRI 102022 in the epsg.io version.
>
you must use an outdated version of PROJ as with recent ones 
SetFromUserInput("ESRI:102022") returns

PROJCRS["Africa_Albers_Equal_Area_Conic",
 ??? BASEGEOGCRS["WGS 84",
 ??????? ENSEMBLE["World Geodetic System 1984 ensemble",
 ??????????? MEMBER["World Geodetic System 1984 (Transit)"],
 ??????????? MEMBER["World Geodetic System 1984 (G730)"],
 ??????????? MEMBER["World Geodetic System 1984 (G873)"],
 ??????????? MEMBER["World Geodetic System 1984 (G1150)"],
 ??????????? MEMBER["World Geodetic System 1984 (G1674)"],
 ??????????? MEMBER["World Geodetic System 1984 (G1762)"],
 ??????????? MEMBER["World Geodetic System 1984 (G2139)"],
 ??????????? ELLIPSOID["WGS 84",6378137,298.257223563,
 ??????????????? LENGTHUNIT["metre",1]],
 ??????????? ENSEMBLEACCURACY[2.0]],
 ??????? PRIMEM["Greenwich",0,
 ??????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????? ID["EPSG",4326]],
 ??? CONVERSION["Africa_Albers_Equal_Area_Conic",
 ??????? METHOD["Albers Equal Area",
 ??????????? ID["EPSG",9822]],
 ??????? PARAMETER["Latitude of false origin",0,
 ??????????? ANGLEUNIT["degree",0.0174532925199433],
 ??????????? ID["EPSG",8821]],
 ??????? PARAMETER["Longitude of false origin",25,
 ??????????? ANGLEUNIT["degree",0.0174532925199433],
 ??????????? ID["EPSG",8822]],
 ??????? PARAMETER["Latitude of 1st standard parallel",20,
 ??????????? ANGLEUNIT["degree",0.0174532925199433],
 ??????????? ID["EPSG",8823]],
 ??????? PARAMETER["Latitude of 2nd standard parallel",-23,
 ??????????? ANGLEUNIT["degree",0.0174532925199433],
 ??????????? ID["EPSG",8824]],
 ??????? PARAMETER["Easting at false origin",0,
 ??????????? LENGTHUNIT["metre",1],
 ??????????? ID["EPSG",8826]],
 ??????? PARAMETER["Northing at false origin",0,
 ??????????? LENGTHUNIT["metre",1],
 ??????????? ID["EPSG",8827]]],
 ??? CS[Cartesian,2],
 ??????? AXIS["(E)",east,
 ??????????? ORDER[1],
 ??????????? LENGTHUNIT["metre",1]],
 ??????? AXIS["(N)",north,
 ??????????? ORDER[2],
 ??????????? LENGTHUNIT["metre",1]],
 ??? USAGE[
 ??????? SCOPE["Not known."],
 ??????? AREA["Africa"],
 ??????? BBOX[-35,-25,39,55]],
 ??? ID["ESRI",102022]]

> Is it best to represent the CRS with WKT rather than importing using 
> SetFromUserInput with EPSG:code or ESRI:code?
>
If you use the WKT returned by GDAL/PROJ, then using it through 
SetFromUserInput() will be equivalent as with auth:code

> If so, what source has the definitive WKT, spatialreference.org or 
> epsg.io?
>
Well, none of them as they are generally outdated compared if you use 
the latest of GDAL (actually PROJ). But there are a lot of degree of 
freedoms in WKT (especially on the amount of metadata you include), so 
there's no such thing as a canonical WKT. That said I'd consider the one 
returned by PROJ to be reasonably a reference one.


Just a slight correction to Howard's answer regarding:

  https://epsg.org/  runs GDAL/PROJ too, but I don't know which version, and of course that isn't going to respond to ESRI codes.


Actually, epsg.org does NOT run PROJ. This is their own software stack, 
and I've actually reported to them bugs in their WKT output for some CRS 
in the past (to my knowledge, it is all now fixed now)

Even

>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230816/3d39b3ca/attachment.htm>

From j1 at jimenezshaw.com  Wed Aug 16 09:50:24 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 16 Aug 2023 18:50:24 +0200
Subject: [gdal-dev] Inconsistencies in WKT CRS representations
In-Reply-To: <18428074-4287-4FA5-8657-D8C3BE9D9928@hobu.co>
References: <57B86F67-FD31-45B3-8D99-D0FBE9381029@nasa.gov>
 <18428074-4287-4FA5-8657-D8C3BE9D9928@hobu.co>
Message-ID: <CADRrdKtnPq0WPO6p_vf6L=QnZChUoYBDNCKxkeJUMY5PVA6A-Q@mail.gmail.com>

https://crs-explorer.proj.org/ is using pyproj to generate all the
information, based on the last version of PROJ

In particular, your CRS is here:
https://crs-explorer.proj.org/?searchText=102022&ignoreWorld=false&allowDeprecated=false&authorities=EPSG,ESRI&activeTypes=PROJECTED_CRS

You have links to WKT1 and 2

Cheers,
Javier

On Wed, 16 Aug 2023 at 18:08, Howard Butler <howard at hobu.co> wrote:

>
>
> > On Aug 16, 2023, at 10:59 AM, Small, Jennifer L. (GSFC-618.0)[SCIENCE
> SYSTEMS AND APPLICATIONS INC] via gdal-dev <gdal-dev at lists.osgeo.org>
> wrote:
> >
> > Is it best to represent the CRS with WKT rather than importing using
> SetFromUserInput with EPSG:code or ESRI:code? If so, what source has the
> definitive WKT, spatialreference.org or epsg.io?
>
> IMO, the definitive definition is 'projinfo'
>
> > projinfo ESRI:102022
>
> spatialreference.org has not been updated in many years and should be
> considered out of date. I don't know what version of PROJ epsg.io is
> running. https://epsg.org/ runs GDAL/PROJ too, but I don't know which
> version, and of course that isn't going to respond to ESRI codes.
>
> Hope this helps,
>
> Howard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230816/2dd16199/attachment.htm>

From michaeladamkatz at yahoo.com  Sat Aug 19 04:16:32 2023
From: michaeladamkatz at yahoo.com (Michael Katz)
Date: Sat, 19 Aug 2023 11:16:32 +0000 (UTC)
Subject: [gdal-dev] exceptions when calling proj_create_crs_to_crs() with
 noop
References: <564355260.1860619.1692443792267.ref@mail.yahoo.com>
Message-ID: <564355260.1860619.1692443792267@mail.yahoo.com>

When I call
PJ *p = proj_create_crs_to_crs(? ? PJ_DEFAULT_CTX,? ? "+proj=longlat +ellps=GRS80 +no_defs",? ? "+proj=longlat +datum=WGS84",? ? NULL );
It returns a valid projections with the srs "+proj=noop". However, I see that it throws four exceptions in the process, all like
Exception thrown at 0x752D8712 in MARPLOT Server.exe: Microsoft C++ exception: std::invalid_argument at memory location 0x0682C4B0.
Unfortunately I don't have symbols tied to the built GDAL library I'm using.
Can you tell me if those exceptions are expected, if they indicate something wrong, and if so how I should fix? (Obviously in this case I could note that both srs have "+proj=longlat" in the string and not create the projection at all, but I'd like to leave the code general and let it handle this case with the noop.)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230819/c7efa42b/attachment.htm>

From even.rouault at spatialys.com  Sat Aug 19 09:51:08 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 19 Aug 2023 18:51:08 +0200
Subject: [gdal-dev] exceptions when calling proj_create_crs_to_crs()
 with noop
In-Reply-To: <564355260.1860619.1692443792267@mail.yahoo.com>
References: <564355260.1860619.1692443792267.ref@mail.yahoo.com>
 <564355260.1860619.1692443792267@mail.yahoo.com>
Message-ID: <214696a4-b1c6-1bda-db50-5714c31932e2@spatialys.com>

Michael,

You're not the only one to have reported such issue. Before 
https://github.com/OSGeo/PROJ/pull/3834 which will be in PROJ 9.3, this 
exception is expected. But even with current released versions, the 
exception is caught inside PROJ itself, before it reaches the caller of 
proj_create_crs_to_crs(), and thus it should not be noticed, unless you 
run PROJ under a debugger that catches C++ exceptions. If you receive it 
in a non-debugger environment, then there's something wrong somewhere in 
the building of PROJ (like if C++ exception handling would have been 
disabled?), or mixing it with other software (incompatible runtimes?). I 
haven't encountered such situation myself, and our CI either.

Even

Le 19/08/2023 ? 13:16, Michael Katz via gdal-dev a ?crit?:
> When I call
>
> PJ *p = proj_create_crs_to_crs(
> ? ? PJ_DEFAULT_CTX,
> ? ? "+proj=longlat +ellps=GRS80 +no_defs",
> "+proj=longlat +datum=WGS84",
> ? ? NULL );
>
> It returns a valid projections with the srs "+proj=noop". However, I 
> see that it throws four exceptions in the process, all like
>
> Exception thrown at 0x752D8712 in MARPLOT Server.exe: Microsoft C++ 
> exception: std::invalid_argument at memory location 0x0682C4B0.
>
> Unfortunately I don't have symbols tied to the built GDAL library I'm 
> using.
>
> Can you tell me if those exceptions are expected, if they indicate 
> something wrong, and if so how I should fix? (Obviously in this case I 
> could note that both srs have "+proj=longlat" in the string and not 
> create the projection at all, but I'd like to leave the code general 
> and let it handle this case with the noop.)
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230819/6326bb67/attachment.htm>

From jesse.r.meyer at nasa.gov  Mon Aug 21 12:30:22 2023
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Mon, 21 Aug 2023 19:30:22 +0000
Subject: [gdal-dev] Is SQLITE dialect supported on Memory OGR datasets?
Message-ID: <AAF92069-4F84-4267-B83A-0CB9FC34D931@ndc.nasa.gov>

Hi,

This works:
tc_lyr = execute_SQL(tree_canopy_mem_ds, "select * from trees", spatialFilter=c_geo)

However, this:
tc_lyr = execute_SQL(tree_canopy_mem_ds, "select * from trees", spatialFilter=c_geo, dialect="SQLITE")

Returns:
In Initialize(): sqlite3_step(SELECT _rowid_, * FROM 'trees' LIMIT 1): SQL logic error

Where execute_SQL = ogr.DataSource.ExecuteSQL
Which is naturally a surprise given that I?m not explicitly asking for the rowid, nor to limit the number of returned rows.

The docs claim that the SQLite dialect can be used with any OGR datasource, so I did expect this to work.  The input datasource is GeoPackage, which is based on SQLite, so I assume my install is built with SQLite, though I?d welcome advice on how to explicitly demonstrate this.

My GDAL version install is 3.6.4, on OSX 13.5.

Thanks,
Jesse
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230821/43824e52/attachment.htm>

From jesse.r.meyer at nasa.gov  Mon Aug 21 13:39:38 2023
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Mon, 21 Aug 2023 20:39:38 +0000
Subject: [gdal-dev] [EXTERNAL] [BULK] Is SQLITE dialect supported on
 Memory OGR datasets?
In-Reply-To: <AAF92069-4F84-4267-B83A-0CB9FC34D931@ndc.nasa.gov>
References: <AAF92069-4F84-4267-B83A-0CB9FC34D931@ndc.nasa.gov>
Message-ID: <D20BF0C6-295D-4E4A-9716-7BC9AED7155A@ndc.nasa.gov>

For clarity, the input datasource to THIS method is a memory datasource.  But the source of that datasource was a geopackage (via CopyDataSource).

Best,
Jesse

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of "Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev" <gdal-dev at lists.osgeo.org>
Reply-To: "Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC]" <jesse.r.meyer at nasa.gov>
Date: Monday, August 21, 2023 at 3:30 PM
To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: [EXTERNAL] [BULK] [gdal-dev] Is SQLITE dialect supported on Memory OGR datasets?

Hi,

This works:
tc_lyr = execute_SQL(tree_canopy_mem_ds, "select * from trees", spatialFilter=c_geo)

However, this:
tc_lyr = execute_SQL(tree_canopy_mem_ds, "select * from trees", spatialFilter=c_geo, dialect="SQLITE")

Returns:
In Initialize(): sqlite3_step(SELECT _rowid_, * FROM 'trees' LIMIT 1): SQL logic error

Where execute_SQL = ogr.DataSource.ExecuteSQL

Which is naturally a surprise given that I?m not explicitly asking for the rowid, nor to limit the number of returned rows.

The docs claim that the SQLite dialect can be used with any OGR datasource, so I did expect this to work.  The input datasource is GeoPackage, which is based on SQLite, so I assume my install is built with SQLite, though I?d welcome advice on how to explicitly demonstrate this.

My GDAL version install is 3.6.4, on OSX 13.5.

Thanks,
Jesse
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230821/5f10c7ed/attachment-0001.htm>

From even.rouault at spatialys.com  Mon Aug 21 15:22:30 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 22 Aug 2023 00:22:30 +0200
Subject: [gdal-dev] Is SQLITE dialect supported on Memory OGR datasets?
In-Reply-To: <AAF92069-4F84-4267-B83A-0CB9FC34D931@ndc.nasa.gov>
References: <AAF92069-4F84-4267-B83A-0CB9FC34D931@ndc.nasa.gov>
Message-ID: <e48e5970-ddf2-b6cd-6d63-f41f35851dd6@spatialys.com>

Jesse,

No it wasn't. Fix in https://github.com/OSGeo/gdal/pull/8247

Potential workaround: use a in-memory SQLite or GeoPackage with a 
/vsimem/ filename

Even

Le 21/08/2023 ? 21:30, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND 
APPLICATIONS INC] via gdal-dev a ?crit?:
>
> Hi,
>
> This works:
>
> tc_lyr =execute_SQL(tree_canopy_mem_ds,"select * from 
> trees",/spatialFilter/=c_geo)
>
> However, this:
>
> tc_lyr =execute_SQL(tree_canopy_mem_ds,"select * from 
> trees",/spatialFilter/=c_geo,/dialect/="SQLITE")
>
> Returns:
>
> In Initialize(): sqlite3_step(SELECT _rowid_, * FROM 'trees' LIMIT 1): 
> SQL logic error
>
> Where execute_SQL = ogr.DataSource.ExecuteSQL
>
> Which is naturally a surprise given that I?m not explicitly asking for 
> the rowid, nor to limit the number of returned rows.
>
> The docs claim that the SQLite dialect can be used with any OGR 
> datasource, so I did expect this to work.? The input datasource is 
> GeoPackage, which is based on SQLite, so I assume my install is built 
> with SQLite, though I?d welcome advice on how to explicitly 
> demonstrate this.
>
> My GDAL version install is 3.6.4, on OSX 13.5.
>
> Thanks,
>
> Jesse
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230822/bee799cd/attachment.htm>

From jesse.r.meyer at nasa.gov  Tue Aug 22 07:11:09 2023
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Tue, 22 Aug 2023 14:11:09 +0000
Subject: [gdal-dev] [EXTERNAL] Re: Is SQLITE dialect supported on Memory
 OGR datasets?
In-Reply-To: <e48e5970-ddf2-b6cd-6d63-f41f35851dd6@spatialys.com>
References: <AAF92069-4F84-4267-B83A-0CB9FC34D931@ndc.nasa.gov>
 <e48e5970-ddf2-b6cd-6d63-f41f35851dd6@spatialys.com>
Message-ID: <9790851A-AB47-4613-AB56-20735490C046@ndc.nasa.gov>

As per your workaround suggestion,

Are these intended to work?  The returned datasource is None.  Removing the `/vsimem` preamble returns the disk-backed geopackage datasource as expected.

tree_canopy_mem_ds = ogr.Open('/vsimem/Users/jrmeyer3/Downloads/features.gpkg')

tree_canopy_mem_ds = ogr.GetDriverByName("GPKG").Open('/vsimem/Users/jrmeyer3/Downloads/features.gpkg')


From: Even Rouault <even.rouault at spatialys.com>
Date: Monday, August 21, 2023 at 6:22 PM
To: "Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC]" <jesse.r.meyer at nasa.gov>, "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: [EXTERNAL] Re: [gdal-dev] Is SQLITE dialect supported on Memory OGR datasets?

CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.



Jesse,

No it wasn't. Fix in https://github.com/OSGeo/gdal/pull/8247

Potential workaround: use a in-memory SQLite or GeoPackage with a /vsimem/ filename

Even
Le 21/08/2023 ? 21:30, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev a ?crit :
Hi,

This works:
tc_lyr = execute_SQL(tree_canopy_mem_ds, "select * from trees", spatialFilter=c_geo)

However, this:
tc_lyr = execute_SQL(tree_canopy_mem_ds, "select * from trees", spatialFilter=c_geo, dialect="SQLITE")

Returns:
In Initialize(): sqlite3_step(SELECT _rowid_, * FROM 'trees' LIMIT 1): SQL logic error

Where execute_SQL = ogr.DataSource.ExecuteSQL
Which is naturally a surprise given that I?m not explicitly asking for the rowid, nor to limit the number of returned rows.

The docs claim that the SQLite dialect can be used with any OGR datasource, so I did expect this to work.  The input datasource is GeoPackage, which is based on SQLite, so I assume my install is built with SQLite, though I?d welcome advice on how to explicitly demonstrate this.

My GDAL version install is 3.6.4, on OSX 13.5.

Thanks,
Jesse



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230822/7c64b5b6/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Aug 22 07:43:39 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 22 Aug 2023 16:43:39 +0200
Subject: [gdal-dev] [EXTERNAL] Re: Is SQLITE dialect supported on Memory
 OGR datasets?
In-Reply-To: <9790851A-AB47-4613-AB56-20735490C046@ndc.nasa.gov>
References: <AAF92069-4F84-4267-B83A-0CB9FC34D931@ndc.nasa.gov>
 <e48e5970-ddf2-b6cd-6d63-f41f35851dd6@spatialys.com>
 <9790851A-AB47-4613-AB56-20735490C046@ndc.nasa.gov>
Message-ID: <2fa7456b-b6d3-4939-bcec-835a0f044b9e@spatialys.com>

If the /vsimem/... file hasn't been created, then it won't be opened. 
This is like a regular file system

If you want to copy an existing file to /vsimem/, you can do something like

gdal.FileFromMemBuffer("/vsimem/foo.gpkg", open("source.gpkg", "rb").read())

do something

gdal.Unlink("/vsimem/foo.gpkg")

or you can ogr.GetDriverByName(...).CreataDataSource("/vsimem/foo") to 
create a new one

Even

Le 22/08/2023 ? 16:11, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND 
APPLICATIONS INC] via gdal-dev a ?crit?:
>
> As per your workaround suggestion,
>
> Are these intended to work?? The returned datasource is None.? 
> Removing the `/vsimem` preamble returns the disk-backed geopackage 
> datasource as expected.
>
> tree_canopy_mem_ds 
> =ogr.Open('/vsimem/Users/jrmeyer3/Downloads/features.gpkg')
>
> tree_canopy_mem_ds 
> =ogr.GetDriverByName("GPKG").Open('/vsimem/Users/jrmeyer3/Downloads/features.gpkg')
>
> *From: *Even Rouault <even.rouault at spatialys.com>
> *Date: *Monday, August 21, 2023 at 6:22 PM
> *To: *"Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS 
> INC]" <jesse.r.meyer at nasa.gov>, "gdal-dev at lists.osgeo.org" 
> <gdal-dev at lists.osgeo.org>
> *Subject: *[EXTERNAL] Re: [gdal-dev] Is SQLITE dialect supported on 
> Memory OGR datasets?
>
> *CAUTION:*This email originated from outside of NASA.? Please take 
> care when clicking links or opening attachments. Use the "Report 
> Message" button to report suspicious messages to the NASA?SOC.
>
>
>
> Jesse,
>
> No it wasn't. Fix in https://github.com/OSGeo/gdal/pull/8247
>
> Potential workaround: use a in-memory SQLite or GeoPackage with a 
> /vsimem/ filename
>
> Even
>
> Le 21/08/2023 ? 21:30, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS 
> AND APPLICATIONS INC] via gdal-dev a ?crit?:
>
>     Hi,
>
>     This works:
>
>     tc_lyr =execute_SQL(tree_canopy_mem_ds,"select * from
>     trees",/spatialFilter/=c_geo)
>
>     However, this:
>
>     tc_lyr =execute_SQL(tree_canopy_mem_ds,"select * from
>     trees",/spatialFilter/=c_geo,/dialect/="SQLITE")
>
>     Returns:
>
>     In Initialize(): sqlite3_step(SELECT _rowid_, * FROM 'trees' LIMIT
>     1): SQL logic error
>
>     Where execute_SQL = ogr.DataSource.ExecuteSQL
>
>     Which is naturally a surprise given that I?m not explicitly asking
>     for the rowid, nor to limit the number of returned rows.
>
>     The docs claim that the SQLite dialect can be used with any OGR
>     datasource, so I did expect this to work.? The input datasource is
>     GeoPackage, which is based on SQLite, so I assume my install is
>     built with SQLite, though I?d welcome advice on how to explicitly
>     demonstrate this.
>
>     My GDAL version install is 3.6.4, on OSX 13.5.
>
>     Thanks,
>
>     Jesse
>
>
>
>     _______________________________________________
>
>     gdal-dev mailing list
>
>     gdal-dev at lists.osgeo.org
>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230822/a16bd0fc/attachment.htm>

From kritika.agarwal at enterprisedb.com  Wed Aug 23 02:50:29 2023
From: kritika.agarwal at enterprisedb.com (Kritika Agarwal)
Date: Wed, 23 Aug 2023 15:20:29 +0530
Subject: [gdal-dev] GDAL 3.6.4 not installing on Windows
Message-ID: <CAKs-CO+=kavrpuAZ+crqr-mWgiZAV3CdQPCKZnQYwyWyrCHmrA@mail.gmail.com>

I am trying to build GDAL 3.6.4 on Windows machine with VS2017 installed.

   1. cmake -G "Visual Studio 15 2017" -DCMAKE_BUILD_T YPE=Release
   -DBUILD_SHARED_LIBS=ON -DGDAL_USE_INTERNAL_LIBS=WHEN_NO_EXTERNAL ..
   2. Cmake --build .
   3. Cmake --build . --target install

while running step 3 binaries are not getting installed and getting this
error:

C:\Program Files (x86)\Windows
Kits\10\Include\10.0.17134.0\um\urlmon.h(7902): error C2504: 'IZoneIde
ntifier': base class undefined
[C:\Thirdparty\\gdal-3.6.4\build\port\cpl.vcxproj]

-- 
Warm Regards,
Kritika Agarwal
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230823/fb302898/attachment.htm>

From even.rouault at spatialys.com  Wed Aug 23 14:29:32 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Aug 2023 23:29:32 +0200
Subject: [gdal-dev] Parquet and nest structures (JSON)
In-Reply-To: <81c772af-9a37-23f9-3da6-b2c268f22baa@postholer.com>
References: <CAAYM6--UghBQnVC4ZxyhDSi9cfUg9sXkuUqtNq_ums+cxECmRA@mail.gmail.com>
 <CAOM3y2j1qck3F1ChJzN4=6Sf7UL9peU_DmqyN17ugqx+dTw0qw@mail.gmail.com>
 <61117c09-cd9b-8ede-41e7-39011141ec31@postholer.com>
 <4a425ede-555a-d10a-f434-86d85fba0fe1@spatialys.com>
 <c10f830c-5e7f-c66b-9757-e2f9a987b70d@postholer.com>
 <81c772af-9a37-23f9-3da6-b2c268f22baa@postholer.com>
Message-ID: <0f574df7-5bb7-6bff-2106-c622feedff37@spatialys.com>

Fixed per https://github.com/OSGeo/gdal/pull/8262

The names field seems to be always empty, but sources is now set with 
JSON content:

Layer name: 20230725_211237_00132_5p54t_6194f239-f53a-4f7a-a18d-844d65743ec5
OGRFeature(20230725_211237_00132_5p54t_6194f239-f53a-4f7a-a18d-844d65743ec5):0
 ? id (String) = 852c606ffffffff1100000000000002
 ? updatetime (String) = 2023-05-30T04:27:53.570Z
 ? version (Integer) = 0
 ? names (String(JSON)) = (null)
 ? adminlevel (Integer) = 2
 ? maritime (String) = (null)
 ? subtype (String) = (null)
 ? localitytype (String) = (null)
 ? context (String) = (null)
 ? isocountrycodealpha2 (String) = (null)
 ? isosubcountrycode (String) = (null)
 ? defaultlanugage (String) = (null)
 ? drivingside (String) = (null)
 ? sources (String(JSON)) = [{"dataset":"TomTom","property":""}]
 ? bbox.minx (Real) = 48.784677
 ? bbox.maxx (Real) = 48.8269923
 ? bbox.miny (Real) = 46.4802247
 ? bbox.maxy (Real) = 46.5414734
 ? LINESTRING (48.8269923 46.4802247,48.8266071 46.4804039,48.8254372 
46.4812505,48.8252164 46.4814104,48.8234061 46.4826587,48.8216566 
46.4841915,48.8215642 46.4842765,48.8194513 46.4862188,48.8182389 
46.4877405,48.8181088 46.4879985,48.8174482 46.4893091,48.8167845 
46.4914288,48.8159372 46.4933119,48.8153964 46.4943868,48.8150985 
46.4949785,48.814202 46.4962774,48.8128965 46.497552,48.8083158 
46.5010794,48.806624 46.5026599,48.8060095 46.5032343,48.8027191 
46.5070528,48.7961845 46.5141075,48.7944333 46.5156397,48.7915709 
46.5189831,48.7904141 46.5207267,48.7902339 46.5210552,48.789085 
46.5231499,48.7885665 46.5246226,48.7883522 46.5255083,48.7880446 
46.5267783,48.7873188 46.5292839,48.7871443 46.5320249,48.7870859 
46.5334613,48.7867523 46.5354586,48.7872132 46.5396493,48.7870516 
46.5405174,48.7863996 46.5410276,48.784677 46.5414734)


Le 27/07/2023 ? 23:51, Scott a ?crit?:
> ogr2ogr'ing parquet data to GeoPackage I'm getting the following 
> warnings:
>
> Warning 1: Field names of unhandled type map<string, 
> list<array_element: map<string, string ('array_element')>> ('names')> 
> ignored
> Warning 1: Field sources of unhandled type list<array_element: 
> map<string, string ('array_element')>> ignored
>
> ...using command:
> ogr2ogr -limit 10 -where "adminlevel = 2 and theme = 'admins'" -nln 
> admin -overwrite admin.gpkg 
> /vsis3/overturemaps-us-west-2/release/2023-07-26-alpha.0
>
> It would be nice to save these JSON structures in the .gpkg, but I'm 
> not sure how to go about it.
>
> Any help would be greatly appreciated!
> Scott
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From aborruso at gmail.com  Sat Aug 26 04:06:40 2023
From: aborruso at gmail.com (andy)
Date: Sat, 26 Aug 2023 13:06:40 +0200
Subject: [gdal-dev] compiling gdal: ogr_ODS error
Message-ID: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>

Hi,
if I try to compile gdal 3.7.1 on debian bullseye,

cmake -D GDAL_USE_GEOS=ON -D GDAL_USE_PARQUET=ON ..
cmake --build .

I have this error:

Scanning dependencies of target ogr_ODS
[ 89%] Building CXX object
ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ods_formula_node.cpp.o
[ 89%] Building CXX object
ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ods_formula.cpp.o
[ 89%] Building CXX object
ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ogrodsdatasource.cpp.o
[ 89%] Building CXX object
ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ogrodsdriver.cpp.o
[ 89%] Built target ogr_ODS
Scanning dependencies of target ogr_OGDI
[ 89%] Building CXX object
ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/ogrogdidatasource.cpp.o
In file included from
/home/aborruso/lavagna/tmp/gdal-3.7.1/ogr/ogrsf_frmts/ogdi/ogrogdi.h:41,
                 from
/home/aborruso/lavagna/tmp/gdal-3.7.1/ogr/ogrsf_frmts/ogdi/ogrogdidatasource.cpp:30:
/usr/include/ogdi/ecs.h:9:10: fatal error: rpc/rpc.h: No such file or
directory
    9 | #include <rpc/rpc.h>
      |          ^~~~~~~~~~~
compilation terminated.
gmake[2]: *** [ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/build.make:82:
ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/ogrogdidatasource.cpp.o] Error
1
gmake[1]: *** [CMakeFiles/Makefile2:10535:
ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/all] Error 2
gmake: *** [Makefile:160: all] Error 2

How to solve it?

Thank you

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230826/d998b54a/attachment.htm>

From variablestarlight at gmail.com  Sat Aug 26 04:35:31 2023
From: variablestarlight at gmail.com (=?UTF-8?Q?Hern=c3=a1n_De_Angelis?=)
Date: Sat, 26 Aug 2023 13:35:31 +0200
Subject: [gdal-dev] compiling gdal: ogr_ODS error
In-Reply-To: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
References: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
Message-ID: <1784aef1-3a85-0689-b875-fcb7d3a24ab2@gmail.com>

rpc.h is missing och is not located in a standard path in your system. 
What package provides rpc in your OS? Perhaps installing grpc-devel?


Den 2023-08-26 kl. 13:06, skrev andy:
> Hi,
> if I try to compile gdal 3.7.1 on debian?bullseye,
>
> cmake -D GDAL_USE_GEOS=ON -D GDAL_USE_PARQUET=ON ..
> cmake --build .
>
> I have this error:
>
> Scanning dependencies of target ogr_ODS
> [ 89%] Building CXX object 
> ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ods_formula_node.cpp.o
> [ 89%] Building CXX object 
> ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ods_formula.cpp.o
> [ 89%] Building CXX object 
> ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ogrodsdatasource.cpp.o
> [ 89%] Building CXX object 
> ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ogrodsdriver.cpp.o
> [ 89%] Built target ogr_ODS
> Scanning dependencies of target ogr_OGDI
> [ 89%] Building CXX object 
> ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/ogrogdidatasource.cpp.o
> In file included from 
> /home/aborruso/lavagna/tmp/gdal-3.7.1/ogr/ogrsf_frmts/ogdi/ogrogdi.h:41,
> ? ? ? ? ? ? ? ? ?from 
> /home/aborruso/lavagna/tmp/gdal-3.7.1/ogr/ogrsf_frmts/ogdi/ogrogdidatasource.cpp:30:
> /usr/include/ogdi/ecs.h:9:10: fatal error: rpc/rpc.h: No such file or 
> directory
> ? ? 9 | #include <rpc/rpc.h>
> ? ? ? | ? ? ? ? ?^~~~~~~~~~~
> compilation terminated.
> gmake[2]: *** 
> [ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/build.make:82: 
> ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/ogrogdidatasource.cpp.o] 
> Error 1
> gmake[1]: *** [CMakeFiles/Makefile2:10535: 
> ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/all] Error 2
> gmake: *** [Makefile:160: all] Error 2
>
> How to solve it?
>
> Thank you
>
> -- 
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
> ?in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230826/99eb848b/attachment.htm>

From aborruso at gmail.com  Sat Aug 26 05:51:30 2023
From: aborruso at gmail.com (andy)
Date: Sat, 26 Aug 2023 14:51:30 +0200
Subject: [gdal-dev] compiling gdal: ogr_ODS error
In-Reply-To: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
References: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
Message-ID: <CAHEdGZN4OC_AQj4Sz9NUGM=-8T1b-pKQxZ_6iuj23sXmpNQKWw@mail.gmail.com>

Hi,
if I remove OGDI support "cmake -D GDAL_USE_GEOS=ON -D GDAL_USE_PARQUET=ON
-D OGR_ENABLE_DRIVER_OGDI:BOOL=OFF ..", I have the error below  after
"cmake --build ."

[ 93%] Built target gcore_mdreader
Scanning dependencies of target GDAL
[ 93%] Linking CXX shared library libgdal.so
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function `GetFileSystem(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >&,
std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> > const&)':
ogrparquetdriver.cpp:(.text+0x1193): undefined reference to
`arrow::fs::FileSystemFromUriOrPath(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&,
std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> >*)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function `arrow::fs::FileSystem::FileSystem(arrow::io::IOContext
const&)':
ogrparquetdriver.cpp:(.text._ZN5arrow2fs10FileSystemC2ERKNS_2io9IOContextE[_ZN5arrow2fs10FileSystemC5ERKNS_2io9IOContextE]+0x23):
undefined reference to `vtable for arrow::fs::FileSystem'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function
`VSIArrowFileSystem::VSIArrowFileSystem(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)':
ogrparquetdriver.cpp:(.text._ZN18VSIArrowFileSystemC2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN18VSIArrowFileSystemC5ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0x57):
undefined reference to `arrow::fs::FileSystem::~FileSystem()'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function `VSIArrowFileSystem::Equals(arrow::fs::FileSystem const&)
const':
ogrparquetdriver.cpp:(.text._ZNK18VSIArrowFileSystem6EqualsERKN5arrow2fs10FileSystemE[_ZNK18VSIArrowFileSystem6EqualsERKN5arrow2fs10FileSystemE]+0x2a):
undefined reference to `typeinfo for arrow::fs::FileSystem'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x28):
undefined reference to
`arrow::fs::FileSystem::NormalizePath(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x30):
undefined reference to
`arrow::fs::FileSystem::PathFromUri(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&) const'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x50):
undefined reference to
`arrow::fs::FileSystem::GetFileInfo(std::vector<std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >,
std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> > > > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x60):
undefined reference to
`arrow::fs::FileSystem::GetFileInfoAsync(std::vector<std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >,
std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> > > > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x68):
undefined reference to
`arrow::fs::FileSystem::GetFileInfoGenerator(arrow::fs::FileSelector
const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x88):
undefined reference to
`arrow::fs::FileSystem::DeleteDirContentsAsync(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&, bool)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xa0):
undefined reference to
`arrow::fs::FileSystem::DeleteFiles(std::vector<std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >,
std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> > > > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xc0):
undefined reference to
`arrow::fs::FileSystem::OpenInputStream(arrow::fs::FileInfo const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xd0):
undefined reference to
`arrow::fs::FileSystem::OpenInputFile(arrow::fs::FileInfo const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xd8):
undefined reference to
`arrow::fs::FileSystem::OpenInputStreamAsync(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xe0):
undefined reference to
`arrow::fs::FileSystem::OpenInputStreamAsync(arrow::fs::FileInfo const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xe8):
undefined reference to
`arrow::fs::FileSystem::OpenInputFileAsync(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xf0):
undefined reference to
`arrow::fs::FileSystem::OpenInputFileAsync(arrow::fs::FileInfo const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function `VSIArrowFileSystem::~VSIArrowFileSystem()':
ogrparquetdriver.cpp:(.text._ZN18VSIArrowFileSystemD2Ev[_ZN18VSIArrowFileSystemD5Ev]+0x32):
undefined reference to `arrow::fs::FileSystem::~FileSystem()'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTI18VSIArrowFileSystem[_ZTI18VSIArrowFileSystem]+0x10):
undefined reference to `typeinfo for arrow::fs::FileSystem'
collect2: error: ld returned 1 exit status
gmake[2]: *** [CMakeFiles/GDAL.dir/build.make:2638: libgdal.so.33.3.7.1]
Error 1
gmake[1]: *** [CMakeFiles/Makefile2:4667: CMakeFiles/GDAL.dir/all] Error 2
gmake: *** [Makefile:160: all] Error 2

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230826/d1f94cd7/attachment-0001.htm>

From aborruso at gmail.com  Sat Aug 26 06:37:19 2023
From: aborruso at gmail.com (andy)
Date: Sat, 26 Aug 2023 15:37:19 +0200
Subject: [gdal-dev] compiling gdal: ogr_ODS error
In-Reply-To: <CAHEdGZN4OC_AQj4Sz9NUGM=-8T1b-pKQxZ_6iuj23sXmpNQKWw@mail.gmail.com>
References: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
 <CAHEdGZN4OC_AQj4Sz9NUGM=-8T1b-pKQxZ_6iuj23sXmpNQKWw@mail.gmail.com>
Message-ID: <CAHEdGZO7CipkjWMJ7UQjvMo+-TCsgXMYBoUjPhwzCLKPucS_xA@mail.gmail.com>

If I remove OGDI and PARQUET, I have no error

cmake -D GDAL_USE_GEOS=ON -D OGR_ENABLE_DRIVER_OGDI:BOOL=OFF -D
OGR_ENABLE_DRIVER_PARQUET:BOOL=OFF ..
cmake --build .

I know it's obvious, but it's to see if there was more
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230826/a6fc7580/attachment.htm>

From public at postholer.com  Sat Aug 26 08:02:41 2023
From: public at postholer.com (Scott)
Date: Sat, 26 Aug 2023 08:02:41 -0700
Subject: [gdal-dev] compiling gdal: ogr_ODS error
In-Reply-To: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
References: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
Message-ID: <330c6a07-3022-db36-18b2-c1ebd6d09ae3@postholer.com>

Parquet issue. Do you have apache-arrow installed?
https://arrow.apache.org/docs/index.html

If you cmake it and install it in the default path, gdal should find it. 
I'm using apache-arrow 12.0.1 with gdal 3.7.1. Even solved this for me.

The OGDI may be a different issue. It seems to be looking for RPC which 
may also need to be installed with the dev package.

Those are my *guesses*


On 8/26/23 04:06, andy wrote:
> Hi,
> if I try to compile gdal 3.7.1 on debian?bullseye,
> 
> cmake -D GDAL_USE_GEOS=ON -D GDAL_USE_PARQUET=ON ..
> cmake --build .
> 
> I have this error:
> 
> Scanning dependencies of target ogr_ODS
> [ 89%] Building CXX object 
> ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ods_formula_node.cpp.o
> [ 89%] Building CXX object 
> ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ods_formula.cpp.o
> [ 89%] Building CXX object 
> ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ogrodsdatasource.cpp.o
> [ 89%] Building CXX object 
> ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ogrodsdriver.cpp.o
> [ 89%] Built target ogr_ODS
> Scanning dependencies of target ogr_OGDI
> [ 89%] Building CXX object 
> ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/ogrogdidatasource.cpp.o
> In file included from 
> /home/aborruso/lavagna/tmp/gdal-3.7.1/ogr/ogrsf_frmts/ogdi/ogrogdi.h:41,
>  ? ? ? ? ? ? ? ? ?from 
> /home/aborruso/lavagna/tmp/gdal-3.7.1/ogr/ogrsf_frmts/ogdi/ogrogdidatasource.cpp:30:
> /usr/include/ogdi/ecs.h:9:10: fatal error: rpc/rpc.h: No such file or 
> directory
>  ? ? 9 | #include <rpc/rpc.h>
>  ? ? ? | ? ? ? ? ?^~~~~~~~~~~
> compilation terminated.
> gmake[2]: *** 
> [ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/build.make:82: 
> ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/ogrogdidatasource.cpp.o] 
> Error 1
> gmake[1]: *** [CMakeFiles/Makefile2:10535: 
> ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/all] Error 2
> gmake: *** [Makefile:160: all] Error 2
> 
> How to solve it?
> 
> Thank you
> 
> -- 
> ___________________
> 
> Andrea Borruso
> website: https://medium.com/tantotanto <https://medium.com/tantotanto>
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
> 
> "cercare e saper riconoscere chi e cosa,
>  ?in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
> 
> Italo Calvino
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From andrew at aitchison.me.uk  Sat Aug 26 07:39:05 2023
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Sat, 26 Aug 2023 15:39:05 +0100 (BST)
Subject: [gdal-dev] compiling gdal: ogr_ODS error
In-Reply-To: <1784aef1-3a85-0689-b875-fcb7d3a24ab2@gmail.com>
References: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
 <1784aef1-3a85-0689-b875-fcb7d3a24ab2@gmail.com>
Message-ID: <3caa9e6b-b4c3-c1db-7337-d231a4b8f4f4@aitchison.me.uk>

On Sat, 26 Aug 2023, Hern?n De Angelis wrote:

> rpc.h is missing och is not located in a standard path in your system. What 
> package provides rpc in your OS? Perhaps installing grpc-devel?

My ubuntu has
   /usr/include/ntirpc/rpc/rpc.h	from libntirpc-dev
and
   /usr/include/tirpc/rpc/rpc.h	from libtirpc-dev
and builds the ogdi driver without problem.


> Den 2023-08-26 kl. 13:06, skrev andy:
>> Hi,
>> if I try to compile gdal 3.7.1 on debian?bullseye,
>> 
>> cmake -D GDAL_USE_GEOS=ON -D GDAL_USE_PARQUET=ON ..
>> cmake --build .
>> 
>> I have this error:
>> 
>> Scanning dependencies of target ogr_ODS
>> [ 89%] Building CXX object 
>> ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ods_formula_node.cpp.o
>> [ 89%] Building CXX object 
>> ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ods_formula.cpp.o
>> [ 89%] Building CXX object 
>> ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ogrodsdatasource.cpp.o
>> [ 89%] Building CXX object 
>> ogr/ogrsf_frmts/ods/CMakeFiles/ogr_ODS.dir/ogrodsdriver.cpp.o
>> [ 89%] Built target ogr_ODS
>> Scanning dependencies of target ogr_OGDI
>> [ 89%] Building CXX object 
>> ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/ogrogdidatasource.cpp.o
>> In file included from 
>> /home/aborruso/lavagna/tmp/gdal-3.7.1/ogr/ogrsf_frmts/ogdi/ogrogdi.h:41,
>> ? ? ? ? ? ? ? ? ?from 
>> /home/aborruso/lavagna/tmp/gdal-3.7.1/ogr/ogrsf_frmts/ogdi/ogrogdidatasource.cpp:30:
>> /usr/include/ogdi/ecs.h:9:10: fatal error: rpc/rpc.h: No such file or 
>> directory
>> ? ? 9 | #include <rpc/rpc.h>
>> ? ? ? | ? ? ? ? ?^~~~~~~~~~~
>> compilation terminated.
>> gmake[2]: *** [ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/build.make:82: 
>> ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/ogrogdidatasource.cpp.o] Error 
>> 1
>> gmake[1]: *** [CMakeFiles/Makefile2:10535: 
>> ogr/ogrsf_frmts/ogdi/CMakeFiles/ogr_OGDI.dir/all] Error 2
>> gmake: *** [Makefile:160: all] Error 2
>> 
>> How to solve it?
>> 
>> Thank you
>> 
>> -- 
>> ___________________
>> 
>> Andrea Borruso
>> website: https://medium.com/tantotanto
>> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
>> ___________________
>> 
>> "cercare e saper riconoscere chi e cosa,
>> ?in mezzo all?inferno, non ? inferno,
>> e farlo durare, e dargli spazio"
>> 
>> Italo Calvino
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk

From mirza.nawandish at haritaevi.com  Sat Aug 26 11:14:13 2023
From: mirza.nawandish at haritaevi.com (Shahrukh Mirza Nawandish)
Date: Sat, 26 Aug 2023 21:14:13 +0300
Subject: [gdal-dev] Inquiry about 3D .DGN to KML/GeoJSON Conversion
 Capabilities in GDAL
Message-ID: <19741693073382@mail.yandex.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230826/2b180fda/attachment-0001.htm>

From mirza.nawandish at haritaevi.com  Sat Aug 26 13:40:14 2023
From: mirza.nawandish at haritaevi.com (Shahrukh Mirza Nawandish)
Date: Sat, 26 Aug 2023 23:40:14 +0300
Subject: [gdal-dev] Inquiry about 3D .DGN to KML/GeoJSON Conversion
 Capabilities in GDAL
Message-ID: <329741693082362@mail.yandex.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230826/18490759/attachment.htm>

From aborruso at gmail.com  Sun Aug 27 00:14:34 2023
From: aborruso at gmail.com (andy)
Date: Sun, 27 Aug 2023 09:14:34 +0200
Subject: [gdal-dev] compiling gdal: ogr_ODS error
In-Reply-To: <3caa9e6b-b4c3-c1db-7337-d231a4b8f4f4@aitchison.me.uk>
References: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
 <1784aef1-3a85-0689-b875-fcb7d3a24ab2@gmail.com>
 <3caa9e6b-b4c3-c1db-7337-d231a4b8f4f4@aitchison.me.uk>
Message-ID: <CAHEdGZMAhNAfJk8kahkvaJGA_NmMvt=tiDQfg3O03qKLDdAFTg@mail.gmail.com>

Hi Andrew,

On Sat, 26 Aug 2023 at 16:39, Andrew C Aitchison <andrew at aitchison.me.uk>
wrote:

> My ubuntu has
>    /usr/include/ntirpc/rpc/rpc.h        from libntirpc-dev
> and
>    /usr/include/tirpc/rpc/rpc.h from libtirpc-dev
> and builds the ogdi driver without problem.
>

I have both, but I have those blocking errors and I'm blocked.

Thank you


-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230827/df96a9fd/attachment.htm>

From aborruso at gmail.com  Sun Aug 27 00:42:27 2023
From: aborruso at gmail.com (andy)
Date: Sun, 27 Aug 2023 09:42:27 +0200
Subject: [gdal-dev] compiling gdal: ogr_ODS error
In-Reply-To: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
References: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
Message-ID: <CAHEdGZPTVcWa969YPMbmcgE4FbgU7satsV92bKqauG7k7xXbRA@mail.gmail.com>

Hi scott,

> Parquet issue. Do you have apache-arrow installed?
> https://arrow.apache.org/docs/index.html

I have installed pyarrow and compiled arrow/cpp.
During "cmake -D GDAL_USE_GEOS=ON -D GDAL_USE_PARQUET=ON -D
OGR_ENABLE_DRIVER_OGDI:BOOL=OFF ..", I have

-- Found the ArrowDataset shared library:
/usr/lib/x86_64-linux-gnu/libarrow_dataset.so.1300.0.0
-- Found the ArrowDataset import library: ARROW_DATASET_IMPORT_LIB-NOTFOUND
-- Found the ArrowDataset static library:
/usr/lib/x86_64-linux-gnu/libarrow_dataset.a

The second one is not a blocking error.

When I run "cmake --build ." I have the below error.

Thank you


Scanning dependencies of target GDAL
[ 93%] Linking CXX shared library libgdal.so
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function `GetFileSystem(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >&,
std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> > const&)':
ogrparquetdriver.cpp:(.text+0x1193): undefined reference to
`arrow::fs::FileSystemFromUriOrPath(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&,
std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> >*)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function `arrow::fs::FileSystem::FileSystem(arrow::io::IOContext
const&)':
ogrparquetdriver.cpp:(.text._ZN5arrow2fs10FileSystemC2ERKNS_2io9IOContextE[_ZN5arrow2fs10FileSystemC5ERKNS_2io9IOContextE]+0x23):
undefined reference to `vtable for arrow::fs::FileSystem'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function
`VSIArrowFileSystem::VSIArrowFileSystem(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)':
ogrparquetdriver.cpp:(.text._ZN18VSIArrowFileSystemC2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN18VSIArrowFileSystemC5ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0x57):
undefined reference to `arrow::fs::FileSystem::~FileSystem()'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function `VSIArrowFileSystem::Equals(arrow::fs::FileSystem const&)
const':
ogrparquetdriver.cpp:(.text._ZNK18VSIArrowFileSystem6EqualsERKN5arrow2fs10FileSystemE[_ZNK18VSIArrowFileSystem6EqualsERKN5arrow2fs10FileSystemE]+0x2a):
undefined reference to `typeinfo for arrow::fs::FileSystem'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x28):
undefined reference to
`arrow::fs::FileSystem::NormalizePath(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x30):
undefined reference to
`arrow::fs::FileSystem::PathFromUri(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&) const'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x50):
undefined reference to
`arrow::fs::FileSystem::GetFileInfo(std::vector<std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >,
std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> > > > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x60):
undefined reference to
`arrow::fs::FileSystem::GetFileInfoAsync(std::vector<std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >,
std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> > > > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x68):
undefined reference to
`arrow::fs::FileSystem::GetFileInfoGenerator(arrow::fs::FileSelector
const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x88):
undefined reference to
`arrow::fs::FileSystem::DeleteDirContentsAsync(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&, bool)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xa0):
undefined reference to
`arrow::fs::FileSystem::DeleteFiles(std::vector<std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >,
std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> > > > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xc0):
undefined reference to
`arrow::fs::FileSystem::OpenInputStream(arrow::fs::FileInfo const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xd0):
undefined reference to
`arrow::fs::FileSystem::OpenInputFile(arrow::fs::FileInfo const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xd8):
undefined reference to
`arrow::fs::FileSystem::OpenInputStreamAsync(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xe0):
undefined reference to
`arrow::fs::FileSystem::OpenInputStreamAsync(arrow::fs::FileInfo const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xe8):
undefined reference to
`arrow::fs::FileSystem::OpenInputFileAsync(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xf0):
undefined reference to
`arrow::fs::FileSystem::OpenInputFileAsync(arrow::fs::FileInfo const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function `VSIArrowFileSystem::~VSIArrowFileSystem()':
ogrparquetdriver.cpp:(.text._ZN18VSIArrowFileSystemD2Ev[_ZN18VSIArrowFileSystemD5Ev]+0x32):
undefined reference to `arrow::fs::FileSystem::~FileSystem()'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTI18VSIArrowFileSystem[_ZTI18VSIArrowFileSystem]+0x10):
undefined reference to `typeinfo for arrow::fs::FileSystem'
collect2: error: ld returned 1 exit status
gmake[2]: *** [CMakeFiles/GDAL.dir/build.make:2638: libgdal.so.33.3.7.1]
Error 1
gmake[1]: *** [CMakeFiles/Makefile2:4667: CMakeFiles/GDAL.dir/all] Error 2
gmake: *** [Makefile:160: all] Error 2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230827/812db009/attachment-0001.htm>

From public at postholer.com  Sun Aug 27 08:17:45 2023
From: public at postholer.com (Scott)
Date: Sun, 27 Aug 2023 08:17:45 -0700
Subject: [gdal-dev] compiling gdal: ogr_ODS error
In-Reply-To: <CAHEdGZPTVcWa969YPMbmcgE4FbgU7satsV92bKqauG7k7xXbRA@mail.gmail.com>
References: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
 <CAHEdGZPTVcWa969YPMbmcgE4FbgU7satsV92bKqauG7k7xXbRA@mail.gmail.com>
Message-ID: <07537730-ab07-ea7c-fd82-fd9433923cc1@postholer.com>

Yeah, it's not finding something. FYI, I don't use the 
GDAL_USE_PARQUET=ON, it just finds it. My Arrow/Parquet related output 
looks like this (not real paths):

-- Arrow version: 12.0.1
-- Found the Arrow shared library: /opt/local/lib/libarrow.so.1200.1.0
-- Found the Arrow import library: ARROW_IMPORT_LIB-NOTFOUND
-- Found the Arrow static library: /opt/local/lib/libarrow.a
-- Parquet version: 12.0.1
-- Found the Parquet shared library: /opt/local/lib/libparquet.so.1200.1.0
-- Found the Parquet import library: PARQUET_IMPORT_LIB-NOTFOUND
-- Found the Parquet static library: /opt/local/lib/libparquet.a
-- ArrowAcero version: 12.0.1
-- Found the ArrowAcero shared library: 
/opt/local/lib/libarrow_acero.so.1200.1.0
-- Found the ArrowAcero import library: ARROW_ACERO_IMPORT_LIB-NOTFOUND
-- Found the ArrowAcero static library: /opt/local/lib/libarrow_acero.a
-- ArrowDataset version: 12.0.1
-- Found the ArrowDataset shared library: 
/opt/local/lib/libarrow_dataset.so.1200.1.0
-- Found the ArrowDataset import library: ARROW_DATASET_IMPORT_LIB-NOTFOUND
-- Found the ArrowDataset static library: /opt/local/lib/libarrow_dataset.a



On 8/27/23 00:42, andy wrote:
> Hi scott,
> 
>  > Parquet issue. Do you have apache-arrow installed?
>  > https://arrow.apache.org/docs/index.html 
> <https://arrow.apache.org/docs/index.html>
> 
> I have installed pyarrow and compiled arrow/cpp.
> During "cmake -D GDAL_USE_GEOS=ON -D GDAL_USE_PARQUET=ON -D 
> OGR_ENABLE_DRIVER_OGDI:BOOL=OFF ..", I have
> 
> -- Found the ArrowDataset shared library: 
> /usr/lib/x86_64-linux-gnu/libarrow_dataset.so.1300.0.0
> -- Found the ArrowDataset import library: ARROW_DATASET_IMPORT_LIB-NOTFOUND
> -- Found the ArrowDataset static library: 
> /usr/lib/x86_64-linux-gnu/libarrow_dataset.a
> 
> The second one is not a blocking error.
> 
> When I run "cmake --build ." I have the below error.
> 
> Thank you
> 
> 
> Scanning dependencies of target GDAL
> [ 93%] Linking CXX shared library libgdal.so
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o: in function `GetFileSystem(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':
> ogrparquetdriver.cpp:(.text+0x1193): undefined reference to 
> `arrow::fs::FileSystemFromUriOrPath(std::__cxx11::basic_string<char, 
> std::char_traits<char>, std::allocator<char> > const&, 
> std::__cxx11::basic_string<char, std::char_traits<char>, 
> std::allocator<char> >*)'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o: in function `arrow::fs::FileSystem::FileSystem(arrow::io::IOContext const&)':
> ogrparquetdriver.cpp:(.text._ZN5arrow2fs10FileSystemC2ERKNS_2io9IOContextE[_ZN5arrow2fs10FileSystemC5ERKNS_2io9IOContextE]+0x23): undefined reference to `vtable for arrow::fs::FileSystem'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o: in function `VSIArrowFileSystem::VSIArrowFileSystem(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':
> ogrparquetdriver.cpp:(.text._ZN18VSIArrowFileSystemC2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN18VSIArrowFileSystemC5ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0x57): undefined reference to `arrow::fs::FileSystem::~FileSystem()'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o: in function `VSIArrowFileSystem::Equals(arrow::fs::FileSystem const&) const':
> ogrparquetdriver.cpp:(.text._ZNK18VSIArrowFileSystem6EqualsERKN5arrow2fs10FileSystemE[_ZNK18VSIArrowFileSystem6EqualsERKN5arrow2fs10FileSystemE]+0x2a): undefined reference to `typeinfo for arrow::fs::FileSystem'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x28): undefined reference to `arrow::fs::FileSystem::NormalizePath(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >)'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x30): undefined reference to `arrow::fs::FileSystem::PathFromUri(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) const'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x50): undefined reference to `arrow::fs::FileSystem::GetFileInfo(std::vector<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&)'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x60): undefined reference to `arrow::fs::FileSystem::GetFileInfoAsync(std::vector<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&)'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x68): undefined reference to `arrow::fs::FileSystem::GetFileInfoGenerator(arrow::fs::FileSelector const&)'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x88): undefined reference to `arrow::fs::FileSystem::DeleteDirContentsAsync(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, bool)'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xa0): undefined reference to `arrow::fs::FileSystem::DeleteFiles(std::vector<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&)'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xc0): undefined reference to `arrow::fs::FileSystem::OpenInputStream(arrow::fs::FileInfo const&)'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xd0): undefined reference to `arrow::fs::FileSystem::OpenInputFile(arrow::fs::FileInfo const&)'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xd8): undefined reference to `arrow::fs::FileSystem::OpenInputStreamAsync(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xe0): undefined reference to `arrow::fs::FileSystem::OpenInputStreamAsync(arrow::fs::FileInfo const&)'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xe8): undefined reference to `arrow::fs::FileSystem::OpenInputFileAsync(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xf0): undefined reference to `arrow::fs::FileSystem::OpenInputFileAsync(arrow::fs::FileInfo const&)'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o: in function `VSIArrowFileSystem::~VSIArrowFileSystem()':
> ogrparquetdriver.cpp:(.text._ZN18VSIArrowFileSystemD2Ev[_ZN18VSIArrowFileSystemD5Ev]+0x32): undefined reference to `arrow::fs::FileSystem::~FileSystem()'
> /usr/bin/ld: 
> ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTI18VSIArrowFileSystem[_ZTI18VSIArrowFileSystem]+0x10): undefined reference to `typeinfo for arrow::fs::FileSystem'
> collect2: error: ld returned 1 exit status
> gmake[2]: *** [CMakeFiles/GDAL.dir/build.make:2638: libgdal.so.33.3.7.1] 
> Error 1
> gmake[1]: *** [CMakeFiles/Makefile2:4667: CMakeFiles/GDAL.dir/all] Error 2
> gmake: *** [Makefile:160: all] Error 2
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From aborruso at gmail.com  Sun Aug 27 10:14:28 2023
From: aborruso at gmail.com (andy)
Date: Sun, 27 Aug 2023 19:14:28 +0200
Subject: [gdal-dev] compiling gdal: ogr_ODS error
In-Reply-To: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
References: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
Message-ID: <CAHEdGZP_wz0MduU5K-433x4QnfCKR_SXbaJXdE2TiiqeCOtjOA@mail.gmail.com>

Hi Scott,

Yeah, it's not finding something. FYI, I don't use the
> GDAL_USE_PARQUET=ON, it just finds it.


My Arrow/Parquet related output looks like this (real path):

-- Arrow version: 14.0.0
-- Found the Arrow shared library: /usr/local/lib/libarrow.so.1400.0.0
-- Found the Arrow import library: ARROW_IMPORT_LIB-NOTFOUND
-- Found the Arrow static library: /usr/local/lib/libarrow.a
-- Parquet version: 14.0.0
-- Found the Parquet shared library: /usr/local/lib/libparquet.so.1400.0.0
-- Found the Parquet import library: PARQUET_IMPORT_LIB-NOTFOUND
-- Found the Parquet static library: /usr/local/lib/libparquet.a
-- ArrowAcero version: 13.0.0
-- Found the ArrowAcero shared library:
/usr/lib/x86_64-linux-gnu/libarrow_acero.so.1300.0.0
-- Found the ArrowAcero import library: ARROW_ACERO_IMPORT_LIB-NOTFOUND
-- Found the ArrowAcero static library:
/usr/lib/x86_64-linux-gnu/libarrow_acero.a
-- ArrowDataset version: 13.0.0
-- Found the ArrowDataset shared library:
/usr/lib/x86_64-linux-gnu/libarrow_dataset.so.1300.0.0
-- Found the ArrowDataset import library: ARROW_DATASET_IMPORT_LIB-NOTFOUND
-- Found the ArrowDataset static library:
/usr/lib/x86_64-linux-gnu/libarrow_dataset.a


And I have the errors below.

I have no idea on how to solve these :(

Thank you for your time

Scanning dependencies of target GDAL
[ 93%] Linking CXX shared library libgdal.so
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function `GetFileSystem(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >&,
std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> > const&)':
ogrparquetdriver.cpp:(.text+0x1193): undefined reference to
`arrow::fs::FileSystemFromUriOrPath(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&,
std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> >*)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function `arrow::fs::FileSystem::FileSystem(arrow::io::IOContext
const&)':
ogrparquetdriver.cpp:(.text._ZN5arrow2fs10FileSystemC2ERKNS_2io9IOContextE[_ZN5arrow2fs10FileSystemC5ERKNS_2io9IOContextE]+0x23):
undefined reference to `vtable for arrow::fs::FileSystem'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function
`VSIArrowFileSystem::VSIArrowFileSystem(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)':
ogrparquetdriver.cpp:(.text._ZN18VSIArrowFileSystemC2ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE[_ZN18VSIArrowFileSystemC5ERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE]+0x57):
undefined reference to `arrow::fs::FileSystem::~FileSystem()'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function `VSIArrowFileSystem::Equals(arrow::fs::FileSystem const&)
const':
ogrparquetdriver.cpp:(.text._ZNK18VSIArrowFileSystem6EqualsERKN5arrow2fs10FileSystemE[_ZNK18VSIArrowFileSystem6EqualsERKN5arrow2fs10FileSystemE]+0x2a):
undefined reference to `typeinfo for arrow::fs::FileSystem'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x28):
undefined reference to
`arrow::fs::FileSystem::NormalizePath(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x30):
undefined reference to
`arrow::fs::FileSystem::PathFromUri(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&) const'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x50):
undefined reference to
`arrow::fs::FileSystem::GetFileInfo(std::vector<std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >,
std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> > > > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x60):
undefined reference to
`arrow::fs::FileSystem::GetFileInfoAsync(std::vector<std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >,
std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> > > > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x68):
undefined reference to
`arrow::fs::FileSystem::GetFileInfoGenerator(arrow::fs::FileSelector
const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0x88):
undefined reference to
`arrow::fs::FileSystem::DeleteDirContentsAsync(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&, bool)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xa0):
undefined reference to
`arrow::fs::FileSystem::DeleteFiles(std::vector<std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >,
std::allocator<std::__cxx11::basic_string<char, std::char_traits<char>,
std::allocator<char> > > > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xc0):
undefined reference to
`arrow::fs::FileSystem::OpenInputStream(arrow::fs::FileInfo const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xd0):
undefined reference to
`arrow::fs::FileSystem::OpenInputFile(arrow::fs::FileInfo const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xd8):
undefined reference to
`arrow::fs::FileSystem::OpenInputStreamAsync(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xe0):
undefined reference to
`arrow::fs::FileSystem::OpenInputStreamAsync(arrow::fs::FileInfo const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xe8):
undefined reference to
`arrow::fs::FileSystem::OpenInputFileAsync(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTV18VSIArrowFileSystem[_ZTV18VSIArrowFileSystem]+0xf0):
undefined reference to
`arrow::fs::FileSystem::OpenInputFileAsync(arrow::fs::FileInfo const&)'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:
in function `VSIArrowFileSystem::~VSIArrowFileSystem()':
ogrparquetdriver.cpp:(.text._ZN18VSIArrowFileSystemD2Ev[_ZN18VSIArrowFileSystemD5Ev]+0x32):
undefined reference to `arrow::fs::FileSystem::~FileSystem()'
/usr/bin/ld:
ogr/ogrsf_frmts/parquet/CMakeFiles/ogr_Parquet.dir/ogrparquetdriver.cpp.o:(.data.rel.ro._ZTI18VSIArrowFileSystem[_ZTI18VSIArrowFileSystem]+0x10):
undefined reference to `typeinfo for arrow::fs::FileSystem'
collect2: error: ld returned 1 exit status
gmake[2]: *** [CMakeFiles/GDAL.dir/build.make:2638: libgdal.so.33.3.7.1]
Error 1
gmake[1]: *** [CMakeFiles/Makefile2:4667: CMakeFiles/GDAL.dir/all] Error 2
gmake: *** [Makefile:160: all] Error 2


-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230827/a22e4571/attachment-0001.htm>

From even.rouault at spatialys.com  Mon Aug 28 01:04:19 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 Aug 2023 10:04:19 +0200
Subject: [gdal-dev] compiling gdal: ogr_ODS error
In-Reply-To: <CAHEdGZP_wz0MduU5K-433x4QnfCKR_SXbaJXdE2TiiqeCOtjOA@mail.gmail.com>
References: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
 <CAHEdGZP_wz0MduU5K-433x4QnfCKR_SXbaJXdE2TiiqeCOtjOA@mail.gmail.com>
Message-ID: <e60ded61-c413-dba1-7496-c38af62c2419@spatialys.com>

Andrea,

it seems like you have a mix of Arrow related libs: 13.0 with ArrowAcero 
and ArrowDataset in /usr/lib/x86_64-linux-gnu, and 14.0 for arrow and 
parquet in /usr/local/lib. This is very prone to lead to errors at build 
time or runtime. You should use libraries coming from one single version 
for all those libs.

GDAL builds fine with the .deb of Arrow 13.0 provided by Apache: cf 
https://github.com/OSGeo/gdal/actions/runs/5964693483/job/16180489462

Even

Le 27/08/2023 ? 19:14, andy a ?crit?:
> Hi Scott,
>
>     Yeah, it's not finding something. FYI, I don't use the
>     GDAL_USE_PARQUET=ON, it just finds it. 
>
>
> My Arrow/Parquet related output looks like this (real path):
>
> -- Arrow version: 14.0.0
> -- Found the Arrow shared library: /usr/local/lib/libarrow.so.1400.0.0
> -- Found the Arrow import library: ARROW_IMPORT_LIB-NOTFOUND
> -- Found the Arrow static library: /usr/local/lib/libarrow.a
> -- Parquet version: 14.0.0
> -- Found the Parquet shared library: /usr/local/lib/libparquet.so.1400.0.0
> -- Found the Parquet import library: PARQUET_IMPORT_LIB-NOTFOUND
> -- Found the Parquet static library: /usr/local/lib/libparquet.a
> -- ArrowAcero version: 13.0.0
> -- Found the ArrowAcero shared library: 
> /usr/lib/x86_64-linux-gnu/libarrow_acero.so.1300.0.0
> -- Found the ArrowAcero import library: ARROW_ACERO_IMPORT_LIB-NOTFOUND
> -- Found the ArrowAcero static library: 
> /usr/lib/x86_64-linux-gnu/libarrow_acero.a
> -- ArrowDataset version: 13.0.0
> -- Found the ArrowDataset shared library: 
> /usr/lib/x86_64-linux-gnu/libarrow_dataset.so.1300.0.0
> -- Found the ArrowDataset import library: 
> ARROW_DATASET_IMPORT_LIB-NOTFOUND
> -- Found the ArrowDataset static library: 
> /usr/lib/x86_64-linux-gnu/libarrow_dataset.a
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230828/eeb4f1fd/attachment.htm>

From aborruso at gmail.com  Mon Aug 28 06:45:43 2023
From: aborruso at gmail.com (andy)
Date: Mon, 28 Aug 2023 15:45:43 +0200
Subject: [gdal-dev] compiling gdal: ogr_ODS error
In-Reply-To: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
References: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
Message-ID: <CAHEdGZNN9HFW2As9dnWqqUGXT2PFt0y1B4Bb387Z2FNWUJJKuQ@mail.gmail.com>

Hi Evan,
and thank you.

it seems like you have a mix of Arrow related libs: 13.0 with ArrowAcero
> and ArrowDataset in /usr/lib/x86_64-linux-gnu, and 14.0 for arrow and
> parquet in /usr/local/lib. This is very prone to lead to errors at build
> time or runtime. You should use libraries coming from one single version
> for all those libs.


if I run "dpkg -l | grep arrow"  I have only "13.0.0-1"

ii  apache-arrow-apt-source           13.0.0-1
all          GnuPG archive key of the Apache Arrow archive
ii  gir1.2-arrow-1.0:amd64            13.0.0-1
amd64        Apache Arrow is a data processing library for analysis
ii  gir1.2-arrow-dataset-1.0:amd64    13.0.0-1
amd64        Apache Arrow is a data processing library for analysis
ii  libarrow-acero-dev:amd64          13.0.0-1
amd64        Apache Arrow is a data processing library for analysis
ii  libarrow-acero1300:amd64          13.0.0-1
amd64        Apache Arrow is a data processing library for analysis
ii  libarrow-dataset-dev:amd64        13.0.0-1
amd64        Apache Arrow is a data processing library for analysis
ii  libarrow-dataset-glib-dev:amd64   13.0.0-1
amd64        Apache Arrow is a data processing library for analysis
ii  libarrow-dataset-glib1300:amd64   13.0.0-1
amd64        Apache Arrow is a data processing library for analysis
ii  libarrow-dataset1300:amd64        13.0.0-1
amd64        Apache Arrow is a data processing library for analysis
ii  libarrow-dev:amd64                13.0.0-1
amd64        Apache Arrow is a data processing library for analysis
ii  libarrow-glib-dev:amd64           13.0.0-1
amd64        Apache Arrow is a data processing library for analysis
ii  libarrow-glib1300:amd64           13.0.0-1
amd64        Apache Arrow is a data processing library for analysis
ii  libarrow1300:amd64                13.0.0-1
amd64        Apache Arrow is a data processing library for analysis

I have removed from "/usr/local/lib" these files

./libparquet.so.1400
./libarrow.so.1400.0.0
./libparquet.so.1400.0.0
./libarrow.so.1400

But now, when I run "cmake -D OGR_ENABLE_DRIVER_OGDI:BOOL=OFF  .." I have
the below error.
I have already tried before to run "sudo apt remove libarrow-lite14
libarrow14 libarrow-cpu14 libarrow-gpu14 libparquet14", but I have "E:
Unable to locate package" errors.


Do you have some tips for me, to avoid the reference to 14?

Thank you



CMake Error at /usr/local/lib/cmake/Arrow/ArrowTargets.cmake:88 (message):
  The imported target "Arrow::arrow_shared" references the file

     "/usr/local/lib/libarrow.so.1400.0.0"

  but this file does not exist.  Possible reasons include:

  * The file was deleted, renamed, or moved to another location.

  * An install or uninstall procedure did not complete successfully.

  * The installation package was faulty and contained

     "/usr/local/lib/cmake/Arrow/ArrowTargets.cmake"

  but not all the files it references.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230828/abe6df23/attachment.htm>

From even.rouault at spatialys.com  Mon Aug 28 07:19:52 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 Aug 2023 16:19:52 +0200
Subject: [gdal-dev] compiling gdal: ogr_ODS error
In-Reply-To: <CAHEdGZNN9HFW2As9dnWqqUGXT2PFt0y1B4Bb387Z2FNWUJJKuQ@mail.gmail.com>
References: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
 <CAHEdGZNN9HFW2As9dnWqqUGXT2PFt0y1B4Bb387Z2FNWUJJKuQ@mail.gmail.com>
Message-ID: <25b37b6e-92f9-6ac5-c7a5-b15be250febe@spatialys.com>


> Do you have some tips for me, to avoid the reference to 14?
The below error message suggest you have a dangling 
/usr/local/lib/cmake/Arrow/ArrowTargets.cmake file ==> remove the 
/usr/local/lib/cmake/Arrow directory
>
> Thank you
>
>
>
> CMake Error at /usr/local/lib/cmake/Arrow/ArrowTargets.cmake:88 (message):
> ? The imported target "Arrow::arrow_shared" references the file
>
> ? ? ?"/usr/local/lib/libarrow.so.1400.0.0"
>
> ? but this file does not exist.? Possible reasons include:
>
> ? * The file was deleted, renamed, or moved to another location.
>
> ? * An install or uninstall procedure did not complete successfully.
>
> ? * The installation package was faulty and contained
>
> ? ? ?"/usr/local/lib/cmake/Arrow/ArrowTargets.cmake"
>
> ? but not all the files it references.
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From andrew at aitchison.me.uk  Mon Aug 28 07:31:48 2023
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Mon, 28 Aug 2023 15:31:48 +0100 (BST)
Subject: [gdal-dev] compiling gdal: ogr_ODS error
In-Reply-To: <CAHEdGZNN9HFW2As9dnWqqUGXT2PFt0y1B4Bb387Z2FNWUJJKuQ@mail.gmail.com>
References: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
 <CAHEdGZNN9HFW2As9dnWqqUGXT2PFt0y1B4Bb387Z2FNWUJJKuQ@mail.gmail.com>
Message-ID: <f5e1c5e9-b50a-f208-77c1-88cacf3b8f8e@aitchison.me.uk>

On Mon, 28 Aug 2023, andy wrote:

> I have removed from "/usr/local/lib" these files
>
> ./libparquet.so.1400
> ./libarrow.so.1400.0.0
> ./libparquet.so.1400.0.0
> ./libarrow.so.1400
>
> But now, when I run "cmake -D OGR_ENABLE_DRIVER_OGDI:BOOL=OFF  .." I have
> the below error.
> I have already tried before to run "sudo apt remove libarrow-lite14
> libarrow14 libarrow-cpu14 libarrow-gpu14 libparquet14", but I have "E:
> Unable to locate package" errors.
>
>
> Do you have some tips for me, to avoid the reference to 14?

Have you tried:
 	rm CMakeCache.txt
and re-running cmake ?

-- 
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk

From aborruso at gmail.com  Mon Aug 28 08:01:07 2023
From: aborruso at gmail.com (andy)
Date: Mon, 28 Aug 2023 17:01:07 +0200
Subject: [gdal-dev] compiling gdal: ogr_ODS error
In-Reply-To: <25b37b6e-92f9-6ac5-c7a5-b15be250febe@spatialys.com>
References: <CAHEdGZM22Jc_fFmZHhR0rY4bNfT5bVBZoprnwFv_72J+yvmVWw@mail.gmail.com>
 <CAHEdGZNN9HFW2As9dnWqqUGXT2PFt0y1B4Bb387Z2FNWUJJKuQ@mail.gmail.com>
 <25b37b6e-92f9-6ac5-c7a5-b15be250febe@spatialys.com>
Message-ID: <CAHEdGZNWvUXraB2MEcJHhLx7uvZ5yyGnK0Rj4OgHkFhXSV7eGg@mail.gmail.com>

Hi Even,

On Mon, 28 Aug 2023 at 16:19, Even Rouault <even.rouault at spatialys.com>
wrote:

>
> > Do you have some tips for me, to avoid the reference to 14?
> The below error message suggest you have a dangling
> /usr/local/lib/cmake/Arrow/ArrowTargets.cmake file ==> remove the
> /usr/local/lib/cmake/Arrow directory
>

I have removed all 14 reference folders. Now I have

-- Arrow version: 13.0.0
-- Found the Arrow shared library:
/usr/lib/x86_64-linux-gnu/libarrow.so.1300.0.0
-- Found the Arrow import library: ARROW_IMPORT_LIB-NOTFOUND
-- Found the Arrow static library: /usr/lib/x86_64-linux-gnu/libarrow.a
-- Parquet version: 13.0.0
-- Found the Parquet shared library:
/usr/lib/x86_64-linux-gnu/libparquet.so.1300.0.0
-- Found the Parquet import library: PARQUET_IMPORT_LIB-NOTFOUND
-- Found the Parquet static library: /usr/lib/x86_64-linux-gnu/libparquet.a
-- ArrowAcero version: 13.0.0
-- Found the ArrowAcero shared library:
/usr/lib/x86_64-linux-gnu/libarrow_acero.so.1300.0.0
-- Found the ArrowAcero import library: ARROW_ACERO_IMPORT_LIB-NOTFOUND
-- Found the ArrowAcero static library:
/usr/lib/x86_64-linux-gnu/libarrow_acero.a
-- ArrowDataset version: 13.0.0
-- Found the ArrowDataset shared library:
/usr/lib/x86_64-linux-gnu/libarrow_dataset.so.1300.0.0
-- Found the ArrowDataset import library: ARROW_DATASET_IMPORT_LIB-NOTFOUND
-- Found the ArrowDataset static library:
/usr/lib/x86_64-linux-gnu/libarrow_dataset.a


But when I run "cmake --build ."  I have this much smaller error:

/usr/bin/ld:
ogr/ogrsf_frmts/arrow/CMakeFiles/ogr_Arrow.dir/ogrfeatherwriterlayer.cpp.o:
in function `OGRFeatherWriterLayer::CreateWriter()':
ogrfeatherwriterlayer.cpp:(.text+0x15ee): undefined reference to
`arrow::util::Codec::Create(arrow::Compression::type,
arrow::util::CodecOptions const&)'
collect2: error: ld returned 1 exit status
gmake[2]: *** [CMakeFiles/GDAL.dir/build.make:2638: libgdal.so.33.3.7.1]
Error 1
gmake[1]: *** [CMakeFiles/Makefile2:4667: CMakeFiles/GDAL.dir/all] Error 2
gmake: *** [Makefile:160: all] Error 2

Is it necessary to install also pyarrow?

Thank you
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230828/9228999a/attachment-0001.htm>

From howard at hobu.co  Mon Aug 28 11:05:51 2023
From: howard at hobu.co (Howard Butler)
Date: Mon, 28 Aug 2023 13:05:51 -0500
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
Message-ID: <E8D31672-8161-4351-942C-589E3A89C8D1@hobu.co>

Howard Butler, Even Rouault, and Dan Baston held the monthly GDAL Maintainers Meeting on 08/24/2023. Alessandro was unavailable due to vacation conflicts. 

Fundraising update
----------------------------

Obtaining sponsorship renewals continues to be challenging. Another gold sponsor has dropped supporting GDAL. This brings us to two gold and two bronze level sponsors who have declined to renew their sponsorship for 2023-2024 [1]. This will take away $120,000 of sponsorship funding for the next year. If your corporate organization values the efforts of the GDAL sponsorship program and are willing to step forward to continue support of these activities, please contact me privately and I will be happy to route you through NumFOCUS to help us backfill the hole. If you are a customer of the companies who have dropped supporting GDAL, you might mention your frustration with that fact through your sales or other communication channels.

Maintenance activities update
------------------------------------------

* Dan reports that NASA will be continuing to fund his maintenance efforts and activity level with the project for the next year. Thanks Dan and thanks NASA!

* Dan continued GDAL test refactoring and enhancement to allow tests to be run without ordering dependencies. The ultimate goal of this effort is to enable parallel execution of the test suite to shorten our CI execution times. Specific updates here include providing temppath fixtures for many tests and cleaning up collisions of /vsimem calls.

* Even reports slightly reduced bug and maintenance activity due to vacation season with about 10 tickets addressed.

* Even continued enhancement of parquet/arrow and GeoParquet. This included providing RowGroups and group statistics when writing content, nested parquet datatype support and parquet attribute filtering.

* Even added more epoch handling improvements in PROJ

* Alessandro worked to add a unified subdataset name APIs and align the driver-dependent versions of the same for GDAL. This is to make it easier to present and consume them in applications like QGIS.

* Howard, Dan, and Even had a discussion about GDAL's plugin system. This was continuation of discussion started at [2].

* A short discussion about incrementing GDAL's base C++ level to C++17 was ticketed https://github.com/OSGeo/gdal/issues/8270 please provide feedback if you have opinions about such an increment

* Dan discussed the potential of merging the capabilities of exactextract https://github.com/isciences/exactextract/ into GDAL's base algorithms for providing fast and accurate raster partial pixel polygon overlay statistics. 

* Even discussed the potential of aliasing GIntBig into standard ctypes int64_t. 

The next GDAL Maintainers Meeting is 09/28/2023 at 9:00 EDT. Any PSC members are welcome to join by reaching out to me for an invite.

Howard

[1] https://github.com/OSGeo/gdal/commits/master/doc/source/sponsors/index.rst
[2] https://lists.osgeo.org/pipermail/gdal-dev/2023-May/057290.html 

From mirza.nawandish at haritaevi.com  Tue Aug 29 02:36:33 2023
From: mirza.nawandish at haritaevi.com (Shahrukh Mirza Nawandish)
Date: Tue, 29 Aug 2023 12:36:33 +0300
Subject: [gdal-dev] Inquiry about GDAL's Capabilities for Converting 3D .DGN
 Files to KML/GeoJSON
Message-ID: <569491693301593@mail.yandex.com.tr>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230829/95d1db7f/attachment.htm>

From mateusz at loskot.net  Tue Aug 29 02:46:56 2023
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 29 Aug 2023 11:46:56 +0200
Subject: [gdal-dev] Inquiry about GDAL's Capabilities for Converting 3D
 .DGN Files to KML/GeoJSON
In-Reply-To: <569491693301593@mail.yandex.com.tr>
References: <569491693301593@mail.yandex.com.tr>
Message-ID: <CABUeae_A9Po3iuNNVX6Am9gA9L=Wd+BM1aUSH9+T0EHDFC49AQ@mail.gmail.com>

On Tue, 29 Aug 2023 at 11:36, Shahrukh Mirza Nawandish <
mirza.nawandish at haritaevi.com> wrote:

> Hello everyone,
>
> I am inquiring about GDAL's capabilities in converting 3D .DGN files to
> KML/GeoJSON or any other formats. If GDAL supports this conversion,
>

https://gdal.org/programs/ogr2ogr.html
https://gdal.org/drivers/vector/dgn.html
https://gdal.org/drivers/vector/dgnv8.html
https://gdal.org/drivers/vector/geojson.html
https://gdal.org/drivers/vector/kml.html

-- 
Best regards,
Mateusz Loskot
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230829/dcfb20f2/attachment.htm>

From schwehr at gmail.com  Tue Aug 29 08:34:38 2023
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 29 Aug 2023 08:34:38 -0700
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
In-Reply-To: <E8D31672-8161-4351-942C-589E3A89C8D1@hobu.co>
References: <E8D31672-8161-4351-942C-589E3A89C8D1@hobu.co>
Message-ID: <CACmBxysLzUUdE=ROj5eczN-yJVo8ar-kLa7ZTG=PP4hyJmOnjg@mail.gmail.com>

That's a bummer about funding, but I have to say that the list of work
going on with the GDAL is really exciting!

On Mon, Aug 28, 2023 at 11:06?AM Howard Butler <howard at hobu.co> wrote:

> Howard Butler, Even Rouault, and Dan Baston held the monthly GDAL
> Maintainers Meeting on 08/24/2023. Alessandro was unavailable due to
> vacation conflicts.
>
> Fundraising update
> ----------------------------
>
> Obtaining sponsorship renewals continues to be challenging. Another gold
> sponsor has dropped supporting GDAL. This brings us to two gold and two
> bronze level sponsors who have declined to renew their sponsorship for
> 2023-2024 [1]. This will take away $120,000 of sponsorship funding for the
> next year. If your corporate organization values the efforts of the GDAL
> sponsorship program and are willing to step forward to continue support of
> these activities, please contact me privately and I will be happy to route
> you through NumFOCUS to help us backfill the hole. If you are a customer of
> the companies who have dropped supporting GDAL, you might mention your
> frustration with that fact through your sales or other communication
> channels.
>
> Maintenance activities update
> ------------------------------------------
>
> * Dan reports that NASA will be continuing to fund his maintenance efforts
> and activity level with the project for the next year. Thanks Dan and
> thanks NASA!
>
> * Dan continued GDAL test refactoring and enhancement to allow tests to be
> run without ordering dependencies. The ultimate goal of this effort is to
> enable parallel execution of the test suite to shorten our CI execution
> times. Specific updates here include providing temppath fixtures for many
> tests and cleaning up collisions of /vsimem calls.
>
> * Even reports slightly reduced bug and maintenance activity due to
> vacation season with about 10 tickets addressed.
>
> * Even continued enhancement of parquet/arrow and GeoParquet. This
> included providing RowGroups and group statistics when writing content,
> nested parquet datatype support and parquet attribute filtering.
>
> * Even added more epoch handling improvements in PROJ
>
> * Alessandro worked to add a unified subdataset name APIs and align the
> driver-dependent versions of the same for GDAL. This is to make it easier
> to present and consume them in applications like QGIS.
>
> * Howard, Dan, and Even had a discussion about GDAL's plugin system. This
> was continuation of discussion started at [2].
>
> * A short discussion about incrementing GDAL's base C++ level to C++17 was
> ticketed https://github.com/OSGeo/gdal/issues/8270 please provide
> feedback if you have opinions about such an increment
>
> * Dan discussed the potential of merging the capabilities of exactextract
> https://github.com/isciences/exactextract/ into GDAL's base algorithms
> for providing fast and accurate raster partial pixel polygon overlay
> statistics.
>
> * Even discussed the potential of aliasing GIntBig into standard ctypes
> int64_t.
>
> The next GDAL Maintainers Meeting is 09/28/2023 at 9:00 EDT. Any PSC
> members are welcome to join by reaching out to me for an invite.
>
> Howard
>
> [1]
> https://github.com/OSGeo/gdal/commits/master/doc/source/sponsors/index.rst
> [2] https://lists.osgeo.org/pipermail/gdal-dev/2023-May/057290.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230829/2d6759e5/attachment-0001.htm>

From Adam.Jamison at portbris.com.au  Tue Aug 29 18:25:34 2023
From: Adam.Jamison at portbris.com.au (Adam Jamison)
Date: Wed, 30 Aug 2023 01:25:34 +0000
Subject: [gdal-dev] GDAL / LIBKML / XLSX Layer Style
Message-ID: <MEYP282MB4074833039E3EBF3008CE8EBC6E6A@MEYP282MB4074.AUSP282.PROD.OUTLOOK.COM>

GDAL Guru's,

I'm looking at how to apply some sort of predefined style to a dataset coming from XLSX and going to KML (LIBKML).

My thoughts are XLSX --> VRT --> KML.

I can successfully add OGR_STYLE at each feature and style the features individually, however I'm hoping I can leverage existing styles at the layer / folder level of the KML. (https://gdal.org/drivers/vector/libkml.html#styletable, https://gdal.org/drivers/vector/libkml.html#style)

For the KML file specifically I'd love to be able to append a StyleURL in the format 'sharedstyle.kml#Zone' and somehow bundle the ogr2ogr generated file with this sharedstyle.kml in a kmz...?

Some data sets:

The XLSX data:
ElementId
Name
WKT
1179
Zone1
POLYGON ((530494.56 6944864.63, 530486.431754 6944883.227494, 530497.919033 6944897.30242, 530575.4 6944931.94, 530589.075307 6944920.363282, 530608.620897 6944914.005078, 530494.56 6944864.63))
1180
Zone4
POLYGON ((530640.737164 6944927.90768, 530633.256 6944960.922, 530648.673025 6944964.552847, 530660.54 6944936.48, 530640.737164 6944927.90768))
1181
Zone2
POLYGON ((530494.56 6944864.63, 530501.34 6944857.63, 530665.986727 6944919.946257, 530660.54 6944936.48, 530494.56 6944864.63))


The VRT file (Local.vrt):
<OGRVRTDataSource>
  <OGRVRTLayer name="Zone">
    <SrcDataSource relativeToVRT="1">Local.xlsx</SrcDataSource>
    <FID name="ElementId"/>
    <OpenOptions>
      <OOI key="HEADERS">FORCE</OOI>
    </OpenOptions>
    <SrcSQL>Select ElementId, Name, WKT, '@Zone' as OGR_STYLE from Zone</SrcSQL>
    <GeometryType>wkbPolygon</GeometryType>
    <LayerSRS>EPSG:28356</LayerSRS>
    <GeometryField encoding="WKT" name="Geometry" field="WKT" reportSrcColumn="FALSE" />
    <Field name="ElementId" type="Integer" />
    <Field name="Name" type="String" />
    <Style>OGR_STYLE</Style>
  </OGRVRTLayer>
</OGRVRTDataSource>

Template KML file (Base.kml):
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns=http://www.opengis.net/kml/2.2>
  <Document id="root_doc">
    <Style id="Zone">
      <LineStyle>
        <color>ff0000ff</color>
        <width>15</width>
      </LineStyle>
      <PolyStyle>
        <color>7f7faaaa</color>
        <colorMode>random</colorMode>
      </PolyStyle>
    </Style>
  </Document>
</kml>

Local.ofs:
#OFS-Version: 1.0
#StyleField: "LayerStyle"

DefaultStyle: BRUSH(fc:#000000);PEN(c:#000000)
Zone:      BRUSH(fc:#0000FF);PEN(c:#000000)

ogr2ogr Local.kml Local.vrt Zone -oo HEADERS=FORCE -t_srs EPSG:4326 -f LIBKML -lco FOLDER=NO

How do I append layer level rules to a KML file when using ogr2ogr, things I've tried:
'BRUSH(fc:#0000FF);PEN(c:#000000)', writes a style element to each feature (this will work but not ideal).
'@Zone', generates '#Zone' in the styleurl, but I don't know how to append the style rule to the newly created kml file.
'@styles.kml#Zome', generates '#styles.kml#Zone', just not going to cut it.

https://gdal.org/user/ogr_feature_style.html#styles-table-format
I've tinkered with the .ofs file, documentation on this is a little sparse not sure exactly what to do with it?



Note:
This message is for the named person's use only.  It may contain confidential, proprietary or legally privileged information.  No confidentiality or privilege is waived or lost by any mistransmission.  If you receive this message in error, please immediately delete it and all copies of it from your system, destroy any hard copies of it and notify the sender.  You must not, directly or indirectly, use, disclose, distribute, print, or copy any part of this message if you are not the intended recipient. The Port of Brisbane reserves the right to monitor all e-mail communications through its networks.
If you have received this transmission in error please let us know by contacting us on +61 7 3258 4888 or by reply E-Mail to the sender.
Any views expressed in this message are those of the individual sender, except where the message states otherwise and the sender is authorised to state them to be the views of any such entity.
 
Thank You.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230830/57c4a114/attachment.htm>

From a.pau at creaf.uab.cat  Tue Aug 29 21:21:38 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Wed, 30 Aug 2023 04:21:38 +0000
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
 <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
 <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <AS8PR07MB816801FCB7F295B8301E887EA2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi again,
I hope you have had nice holidays!

In my journey to writing a new driver now I have a doubt.

Our format can be written in two versions:
v1.1: internal offsets and FID are only saved in 4 bytes. So, there is a limited number of FID you can read/write.
v2.0: internal offsets and FID are only saved in 8 bytes. So, there is a huge number of FID you can read/write.

I am interested in proportionate 3 ways of proceeding when a used calls translation from one format to our format.
way 1: force to write V1.1 and stop writing features if the limit is reached.
way 2: force to write V2.0 (and stop writing features if the limit is reached (it will no happen in a near future, I think)).
way 3: leave that the program decides if V1.1 is not enough and then it changes automatically to V2.0. It does it in the middle of the process, when FID or some used internal offset gets the limit.

So, my questions:
1.- Which ogr2ogr parameter is the best for doing that?
	-f? specificating "MiraMon V1.1" or "MiraMonV2.0" or "MiraMon" (automatic way).
      Or there is another way I haven't seen (I've read all options in https://gdal.org/programs/ogr2ogr.html#ogr2ogr)

2.- When using -progress some points appear on screen informing the progress. At the end of the progress (or sometimes driver requires) there is a gap of time that driver is writing some pendant information.
There is any way to inform the user what the process is doing?

Thanks in advance. I appreciate all your always kind answers.
Abel.


-----Mensaje original-----
De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Abel Pau
Enviado el: divendres, 9 de juny de 2023 12:11
Para: Even Rouault <even.rouault at spatialys.com>
CC: gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Hi again.

Finally I managed to use CMake to create a Visual Studio sln. And it's beautiful see all drivers there.
But it's not crear for me what I have to modify (Cmakelist.txt,.. or something else) to include the new driver. I need it to be there to be able to debug.
I created a copy of, let's say, Shape and modified the Cmakelists.txt in an apropriate way... but I miss something because recompiling and rebuilding doesn't change anything and my driver is not in the project.

Anyone can make me a simple list of which files I have to modify?
THANKS in advance!!!

Abel.

-----Mensaje original-----
De: Even Rouault <even.rouault at spatialys.com> Enviado el: divendres, 2 de juny de 2023 20:34
Para: Abel Pau <a.pau at creaf.uab.cat>
CC: gdal-dev at lists.osgeo.org; Howard Butler <howard at hobu.co>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch


> It is indeed desired that the code style of the contribution matches GDAL's style to some degree. GDAL provides a .clang-format file that might be helpful when you are editing to provide some automated conformance.

Cf https://gdal.org/development/dev_practices.html#commit-hooks also to install pre-commit hooks to ensure the formatting is OK & fix it if not.

https://gdal.org/development/rfc/rfc8_devguide.html also gives some hints on the general development practices. Generally try to stick with the conventions you observe in source code of drivers you take inspiration from.

>
> You might be able to build a sln file using GDAL's CMake configuration, but there is no standard documentation about how to do this. Do know that most any configuration you provide must build and work with the standard GDAL CMake configuration which is typically invoked through the command line.

The source of "truth" will be the CMakeLists.txt file.

sln files are just a possible by-product of CMake that isn't stored in git.

You may just google "Cmake visual studio" as there's nothing GDAL specific regarding this topic. ==>
https://learn.microsoft.com/en-us/cpp/build/cmake-projects-in-visual-studio?view=msvc-170
among other links that you'll get

>
>> ?         Once I have a Visual Studio solution (sln) to inspire myself, how should I proceed to create the driver? Is there any pre-existing pattern or template to follow?
> Find an existing raster or vector driver in the project that matches MiraMon's vector or raster format and use it as a skeleton.
>
>> I would like to be able to debug it.
> Familiarize yourself with GDAL's tests (a good place to learn is to look at GDAL's CI configuration), get tests running locally on your machine, and then write tests that provide test coverage for your raster or vector driver.
For vector drivers, the test_ogrsf utility that is built with GDAL is used by most unit tests of vector drivers to check their compliance w.r.t expectations of what a driver should do/not do. Not that of course this is only generic testing. You also need to add tests that check that the content you read from a test file is the one you expect.

-- 
http://www.spatialys.com
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From mdsumner at gmail.com  Wed Aug 30 00:13:20 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 30 Aug 2023 17:13:20 +1000
Subject: [gdal-dev] multidim arraySpecs/GetView
Message-ID: <CAAcGz994UOppOvAO4jRRwM-G_gGDOq6wRLKku4m=YfdVDaVHiA@mail.gmail.com>

Hi, hoping to check my syntax ... or expectations ... I'm expecting this to
subset by step the 20x20 array in this netcdf, but getting no change in
python MultiDimTranslate or at command line:

ds = gdal.OpenEx('gdrivers/data/netcdf/byte_no_cf.nc',
gdal.OF_MULTIDIM_RASTER)

nds = gdal.MultiDimTranslate("/vsimem/array_view.zarr", ds, format="Zarr",
arraySpecs=['name=Band1,view=[::2,::4]'])
nds.GetRootGroup().OpenMDArray("Band1").GetShape()
# (20, 20)

Directly with the python GetView api it works

ds.GetRootGroup().OpenMDArray("Band1").GetView("[::2,::4]").GetShape()
# (10, 5)

Am I specifying the view wrong in MultiDimTranslate?

Thanks, Mike

I've put fuller notes here in case the email is a problem:
https://gist.github.com/mdsumner/028d089ad9a960267347f891c058fc9a

--
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230830/4355ab1d/attachment.htm>

From b.coerver at mailbox.org  Wed Aug 30 01:37:08 2023
From: b.coerver at mailbox.org (b.coerver at mailbox.org)
Date: Wed, 30 Aug 2023 10:37:08 +0200
Subject: [gdal-dev] /vsis3/ on NetCDF from Earthdata
In-Reply-To: <eddd873a-ca44-ed36-a411-237c5a0bf62e@spatialys.com>
References: <69C83C86-2257-5245-94C6-FF0C220C778E@hxcore.ol>
 <5ee6ff23-9368-0854-f818-3c113dea0380@spatialys.com>
 <5B40B60E-3E34-4340-87F8-FFF85590E206@hxcore.ol>
 <12D59BA3-9307-D14D-9AB1-CD944DFE72EE@hxcore.ol>,
 <eddd873a-ca44-ed36-a411-237c5a0bf62e@spatialys.com>
Message-ID: <6D16145A-7278-0D40-8741-2E2C5CACEF25@hxcore.ol>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230830/edc20a2d/attachment-0001.htm>

From j1 at jimenezshaw.com  Wed Aug 30 06:38:56 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 30 Aug 2023 15:38:56 +0200
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <AS8PR07MB816801FCB7F295B8301E887EA2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
 <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
 <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB816801FCB7F295B8301E887EA2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <CADRrdKuk=+TEVh5hXs0AnktoRsGooqoezqdpxyNSt1YtSXU8NQ@mail.gmail.com>

That sounds very similar to BIGTIFF option in GeoTIFF driver.
also a bit like GEOTIFF_VERSION option.
https://gdal.org/drivers/raster/gtiff.html

You can change that in the middle of the writing? wow.

On Wed, 30 Aug 2023 at 06:21, Abel Pau <a.pau at creaf.uab.cat> wrote:

> Hi again,
> I hope you have had nice holidays!
>
> In my journey to writing a new driver now I have a doubt.
>
> Our format can be written in two versions:
> v1.1: internal offsets and FID are only saved in 4 bytes. So, there is a
> limited number of FID you can read/write.
> v2.0: internal offsets and FID are only saved in 8 bytes. So, there is a
> huge number of FID you can read/write.
>
> I am interested in proportionate 3 ways of proceeding when a used calls
> translation from one format to our format.
> way 1: force to write V1.1 and stop writing features if the limit is
> reached.
> way 2: force to write V2.0 (and stop writing features if the limit is
> reached (it will no happen in a near future, I think)).
> way 3: leave that the program decides if V1.1 is not enough and then it
> changes automatically to V2.0. It does it in the middle of the process,
> when FID or some used internal offset gets the limit.
>
> So, my questions:
> 1.- Which ogr2ogr parameter is the best for doing that?
>         -f? specificating "MiraMon V1.1" or "MiraMonV2.0" or "MiraMon"
> (automatic way).
>       Or there is another way I haven't seen (I've read all options in
> https://gdal.org/programs/ogr2ogr.html#ogr2ogr)
>
> 2.- When using -progress some points appear on screen informing the
> progress. At the end of the progress (or sometimes driver requires) there
> is a gap of time that driver is writing some pendant information.
> There is any way to inform the user what the process is doing?
>
> Thanks in advance. I appreciate all your always kind answers.
> Abel.
>
>
> -----Mensaje original-----
> De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Abel Pau
> Enviado el: divendres, 9 de juny de 2023 12:11
> Para: Even Rouault <even.rouault at spatialys.com>
> CC: gdal-dev at lists.osgeo.org
> Asunto: Re: [gdal-dev] Creation of a new driver from scratch
>
> Hi again.
>
> Finally I managed to use CMake to create a Visual Studio sln. And it's
> beautiful see all drivers there.
> But it's not crear for me what I have to modify (Cmakelist.txt,.. or
> something else) to include the new driver. I need it to be there to be able
> to debug.
> I created a copy of, let's say, Shape and modified the Cmakelists.txt in
> an apropriate way... but I miss something because recompiling and
> rebuilding doesn't change anything and my driver is not in the project.
>
> Anyone can make me a simple list of which files I have to modify?
> THANKS in advance!!!
>
> Abel.
>
> -----Mensaje original-----
> De: Even Rouault <even.rouault at spatialys.com> Enviado el: divendres, 2 de
> juny de 2023 20:34
> Para: Abel Pau <a.pau at creaf.uab.cat>
> CC: gdal-dev at lists.osgeo.org; Howard Butler <howard at hobu.co>
> Asunto: Re: [gdal-dev] Creation of a new driver from scratch
>
>
> > It is indeed desired that the code style of the contribution matches
> GDAL's style to some degree. GDAL provides a .clang-format file that might
> be helpful when you are editing to provide some automated conformance.
>
> Cf https://gdal.org/development/dev_practices.html#commit-hooks also to
> install pre-commit hooks to ensure the formatting is OK & fix it if not.
>
> https://gdal.org/development/rfc/rfc8_devguide.html also gives some hints
> on the general development practices. Generally try to stick with the
> conventions you observe in source code of drivers you take inspiration from.
>
> >
> > You might be able to build a sln file using GDAL's CMake configuration,
> but there is no standard documentation about how to do this. Do know that
> most any configuration you provide must build and work with the standard
> GDAL CMake configuration which is typically invoked through the command
> line.
>
> The source of "truth" will be the CMakeLists.txt file.
>
> sln files are just a possible by-product of CMake that isn't stored in git.
>
> You may just google "Cmake visual studio" as there's nothing GDAL specific
> regarding this topic. ==>
>
> https://learn.microsoft.com/en-us/cpp/build/cmake-projects-in-visual-studio?view=msvc-170
> among other links that you'll get
>
> >
> >> ?         Once I have a Visual Studio solution (sln) to inspire myself,
> how should I proceed to create the driver? Is there any pre-existing
> pattern or template to follow?
> > Find an existing raster or vector driver in the project that matches
> MiraMon's vector or raster format and use it as a skeleton.
> >
> >> I would like to be able to debug it.
> > Familiarize yourself with GDAL's tests (a good place to learn is to look
> at GDAL's CI configuration), get tests running locally on your machine, and
> then write tests that provide test coverage for your raster or vector
> driver.
> For vector drivers, the test_ogrsf utility that is built with GDAL is used
> by most unit tests of vector drivers to check their compliance w.r.t
> expectations of what a driver should do/not do. Not that of course this is
> only generic testing. You also need to add tests that check that the
> content you read from a test file is the one you expect.
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230830/81963e22/attachment.htm>

From b.coerver at mailbox.org  Wed Aug 30 07:26:43 2023
From: b.coerver at mailbox.org (b.coerver at mailbox.org)
Date: Wed, 30 Aug 2023 16:26:43 +0200
Subject: [gdal-dev] /vsis3/ on NetCDF from Earthdata
In-Reply-To: <6D16145A-7278-0D40-8741-2E2C5CACEF25@hxcore.ol>
References: <69C83C86-2257-5245-94C6-FF0C220C778E@hxcore.ol>
 <5ee6ff23-9368-0854-f818-3c113dea0380@spatialys.com>
 <5B40B60E-3E34-4340-87F8-FFF85590E206@hxcore.ol>
 <12D59BA3-9307-D14D-9AB1-CD944DFE72EE@hxcore.ol>,
 <eddd873a-ca44-ed36-a411-237c5a0bf62e@spatialys.com>,
 <6D16145A-7278-0D40-8741-2E2C5CACEF25@hxcore.ol>
Message-ID: <D32E0769-FC76-7547-8050-E00AAC18C3AE@hxcore.ol>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230830/d2cc062a/attachment-0001.htm>

From a.pau at creaf.uab.cat  Wed Aug 30 07:37:04 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Wed, 30 Aug 2023 14:37:04 +0000
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <CADRrdKuk=+TEVh5hXs0AnktoRsGooqoezqdpxyNSt1YtSXU8NQ@mail.gmail.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
 <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
 <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB816801FCB7F295B8301E887EA2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <CADRrdKuk=+TEVh5hXs0AnktoRsGooqoezqdpxyNSt1YtSXU8NQ@mail.gmail.com>
Message-ID: <AS8PR07MB81680F99E841FE9187558E84A2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi Javier,
thanks for your answer. It?s very similar, yes. I?ll try to use it in my driver.

While fetching features I have some information in memory (always 64bits variables) and some in memory-disk (it?s a buffer that writes everything in disk when it?s full as many times as needed).
If, in the middle of writing I find that user wants AUTO and I was writing in 32bits but it?s no possible anymore then I translate the written part from 32 to 64 (and I do nothing with the memory part).
At the end when I write the memory part I take care of what option is the good one.
I could always write 64bits format but if it?s not needed it?s a pity to waste disk memory for that.
This consumes time but if you can?t know the number of features (or vertices in 3D, which they also need 64bits offsets) a priori I think that?s the only way to do that or don?t implement AUTO and let user find out that user cannot write 32bits option for a large translation. And make user begin again. I think that if I can save some time it?s better than start again.

For me the best option is knowing at the beginning what option is enough to write every file.

Sorry for the extension of my words.

It remains knowing how to inform user (when I use ?progress) that I am starting again... I suppose that a message in the middle of the % points.

And by the way... how can GDAL know the % if the number of features is not reachable?


Thanks!



De: Javier Jimenez Shaw <j1 at jimenezshaw.com>
Enviado el: dimecres, 30 d?agost de 2023 15:39
Para: Abel Pau <a.pau at creaf.uab.cat>
CC: gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

That sounds very similar to BIGTIFF option in GeoTIFF driver.
also a bit like GEOTIFF_VERSION option.
https://gdal.org/drivers/raster/gtiff.html

You can change that in the middle of the writing? wow.

On Wed, 30 Aug 2023 at 06:21, Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>> wrote:
Hi again,
I hope you have had nice holidays!

In my journey to writing a new driver now I have a doubt.

Our format can be written in two versions:
v1.1: internal offsets and FID are only saved in 4 bytes. So, there is a limited number of FID you can read/write.
v2.0: internal offsets and FID are only saved in 8 bytes. So, there is a huge number of FID you can read/write.

I am interested in proportionate 3 ways of proceeding when a used calls translation from one format to our format.
way 1: force to write V1.1 and stop writing features if the limit is reached.
way 2: force to write V2.0 (and stop writing features if the limit is reached (it will no happen in a near future, I think)).
way 3: leave that the program decides if V1.1 is not enough and then it changes automatically to V2.0. It does it in the middle of the process, when FID or some used internal offset gets the limit.

So, my questions:
1.- Which ogr2ogr parameter is the best for doing that?
        -f? specificating "MiraMon V1.1" or "MiraMonV2.0" or "MiraMon" (automatic way).
      Or there is another way I haven't seen (I've read all options in https://gdal.org/programs/ogr2ogr.html#ogr2ogr)

2.- When using -progress some points appear on screen informing the progress. At the end of the progress (or sometimes driver requires) there is a gap of time that driver is writing some pendant information.
There is any way to inform the user what the process is doing?

Thanks in advance. I appreciate all your always kind answers.
Abel.


-----Mensaje original-----
De: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> En nombre de Abel Pau
Enviado el: divendres, 9 de juny de 2023 12:11
Para: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
CC: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Hi again.

Finally I managed to use CMake to create a Visual Studio sln. And it's beautiful see all drivers there.
But it's not crear for me what I have to modify (Cmakelist.txt,.. or something else) to include the new driver. I need it to be there to be able to debug.
I created a copy of, let's say, Shape and modified the Cmakelists.txt in an apropriate way... but I miss something because recompiling and rebuilding doesn't change anything and my driver is not in the project.

Anyone can make me a simple list of which files I have to modify?
THANKS in advance!!!

Abel.

-----Mensaje original-----
De: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>> Enviado el: divendres, 2 de juny de 2023 20:34
Para: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>
CC: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>; Howard Butler <howard at hobu.co<mailto:howard at hobu.co>>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch


> It is indeed desired that the code style of the contribution matches GDAL's style to some degree. GDAL provides a .clang-format file that might be helpful when you are editing to provide some automated conformance.

Cf https://gdal.org/development/dev_practices.html#commit-hooks also to install pre-commit hooks to ensure the formatting is OK & fix it if not.

https://gdal.org/development/rfc/rfc8_devguide.html also gives some hints on the general development practices. Generally try to stick with the conventions you observe in source code of drivers you take inspiration from.

>
> You might be able to build a sln file using GDAL's CMake configuration, but there is no standard documentation about how to do this. Do know that most any configuration you provide must build and work with the standard GDAL CMake configuration which is typically invoked through the command line.

The source of "truth" will be the CMakeLists.txt file.

sln files are just a possible by-product of CMake that isn't stored in git.

You may just google "Cmake visual studio" as there's nothing GDAL specific regarding this topic. ==>
https://learn.microsoft.com/en-us/cpp/build/cmake-projects-in-visual-studio?view=msvc-170
among other links that you'll get

>
>> ?         Once I have a Visual Studio solution (sln) to inspire myself, how should I proceed to create the driver? Is there any pre-existing pattern or template to follow?
> Find an existing raster or vector driver in the project that matches MiraMon's vector or raster format and use it as a skeleton.
>
>> I would like to be able to debug it.
> Familiarize yourself with GDAL's tests (a good place to learn is to look at GDAL's CI configuration), get tests running locally on your machine, and then write tests that provide test coverage for your raster or vector driver.
For vector drivers, the test_ogrsf utility that is built with GDAL is used by most unit tests of vector drivers to check their compliance w.r.t expectations of what a driver should do/not do. Not that of course this is only generic testing. You also need to add tests that check that the content you read from a test file is the one you expect.

--
http://www.spatialys.com
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230830/6433101c/attachment-0001.htm>

From a.pau at creaf.uab.cat  Wed Aug 30 08:01:19 2023
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Wed, 30 Aug 2023 15:01:19 +0000
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <AS8PR07MB81680F99E841FE9187558E84A2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
 <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
 <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB816801FCB7F295B8301E887EA2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <CADRrdKuk=+TEVh5hXs0AnktoRsGooqoezqdpxyNSt1YtSXU8NQ@mail.gmail.com>
 <AS8PR07MB81680F99E841FE9187558E84A2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <AS8PR07MB81680E5148739901ED7B7C46A2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>

Hi again,
answering the question of number of features I can see that there is a capability for that!
#define OLCFastFeatureCount                                                    \
    "FastFeatureCount" /**< Layer capability for fast feature count retrieval  \

But as Even said it?s not accessible from the driver...

De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Abel Pau
Enviado el: dimecres, 30 d?agost de 2023 16:37
Para: Javier Jimenez Shaw <j1 at jimenezshaw.com>
CC: gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Hi Javier,
thanks for your answer. It?s very similar, yes. I?ll try to use it in my driver.

While fetching features I have some information in memory (always 64bits variables) and some in memory-disk (it?s a buffer that writes everything in disk when it?s full as many times as needed).
If, in the middle of writing I find that user wants AUTO and I was writing in 32bits but it?s no possible anymore then I translate the written part from 32 to 64 (and I do nothing with the memory part).
At the end when I write the memory part I take care of what option is the good one.
I could always write 64bits format but if it?s not needed it?s a pity to waste disk memory for that.
This consumes time but if you can?t know the number of features (or vertices in 3D, which they also need 64bits offsets) a priori I think that?s the only way to do that or don?t implement AUTO and let user find out that user cannot write 32bits option for a large translation. And make user begin again. I think that if I can save some time it?s better than start again.

For me the best option is knowing at the beginning what option is enough to write every file.

Sorry for the extension of my words.

It remains knowing how to inform user (when I use ?progress) that I am starting again... I suppose that a message in the middle of the % points.

And by the way... how can GDAL know the % if the number of features is not reachable?


Thanks!



De: Javier Jimenez Shaw <j1 at jimenezshaw.com<mailto:j1 at jimenezshaw.com>>
Enviado el: dimecres, 30 d?agost de 2023 15:39
Para: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>
CC: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

That sounds very similar to BIGTIFF option in GeoTIFF driver.
also a bit like GEOTIFF_VERSION option.
https://gdal.org/drivers/raster/gtiff.html

You can change that in the middle of the writing? wow.

On Wed, 30 Aug 2023 at 06:21, Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>> wrote:
Hi again,
I hope you have had nice holidays!

In my journey to writing a new driver now I have a doubt.

Our format can be written in two versions:
v1.1: internal offsets and FID are only saved in 4 bytes. So, there is a limited number of FID you can read/write.
v2.0: internal offsets and FID are only saved in 8 bytes. So, there is a huge number of FID you can read/write.

I am interested in proportionate 3 ways of proceeding when a used calls translation from one format to our format.
way 1: force to write V1.1 and stop writing features if the limit is reached.
way 2: force to write V2.0 (and stop writing features if the limit is reached (it will no happen in a near future, I think)).
way 3: leave that the program decides if V1.1 is not enough and then it changes automatically to V2.0. It does it in the middle of the process, when FID or some used internal offset gets the limit.

So, my questions:
1.- Which ogr2ogr parameter is the best for doing that?
        -f? specificating "MiraMon V1.1" or "MiraMonV2.0" or "MiraMon" (automatic way).
      Or there is another way I haven't seen (I've read all options in https://gdal.org/programs/ogr2ogr.html#ogr2ogr)

2.- When using -progress some points appear on screen informing the progress. At the end of the progress (or sometimes driver requires) there is a gap of time that driver is writing some pendant information.
There is any way to inform the user what the process is doing?

Thanks in advance. I appreciate all your always kind answers.
Abel.


-----Mensaje original-----
De: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> En nombre de Abel Pau
Enviado el: divendres, 9 de juny de 2023 12:11
Para: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
CC: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch

Hi again.

Finally I managed to use CMake to create a Visual Studio sln. And it's beautiful see all drivers there.
But it's not crear for me what I have to modify (Cmakelist.txt,.. or something else) to include the new driver. I need it to be there to be able to debug.
I created a copy of, let's say, Shape and modified the Cmakelists.txt in an apropriate way... but I miss something because recompiling and rebuilding doesn't change anything and my driver is not in the project.

Anyone can make me a simple list of which files I have to modify?
THANKS in advance!!!

Abel.

-----Mensaje original-----
De: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>> Enviado el: divendres, 2 de juny de 2023 20:34
Para: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>
CC: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>; Howard Butler <howard at hobu.co<mailto:howard at hobu.co>>
Asunto: Re: [gdal-dev] Creation of a new driver from scratch


> It is indeed desired that the code style of the contribution matches GDAL's style to some degree. GDAL provides a .clang-format file that might be helpful when you are editing to provide some automated conformance.

Cf https://gdal.org/development/dev_practices.html#commit-hooks also to install pre-commit hooks to ensure the formatting is OK & fix it if not.

https://gdal.org/development/rfc/rfc8_devguide.html also gives some hints on the general development practices. Generally try to stick with the conventions you observe in source code of drivers you take inspiration from.

>
> You might be able to build a sln file using GDAL's CMake configuration, but there is no standard documentation about how to do this. Do know that most any configuration you provide must build and work with the standard GDAL CMake configuration which is typically invoked through the command line.

The source of "truth" will be the CMakeLists.txt file.

sln files are just a possible by-product of CMake that isn't stored in git.

You may just google "Cmake visual studio" as there's nothing GDAL specific regarding this topic. ==>
https://learn.microsoft.com/en-us/cpp/build/cmake-projects-in-visual-studio?view=msvc-170
among other links that you'll get

>
>> ?         Once I have a Visual Studio solution (sln) to inspire myself, how should I proceed to create the driver? Is there any pre-existing pattern or template to follow?
> Find an existing raster or vector driver in the project that matches MiraMon's vector or raster format and use it as a skeleton.
>
>> I would like to be able to debug it.
> Familiarize yourself with GDAL's tests (a good place to learn is to look at GDAL's CI configuration), get tests running locally on your machine, and then write tests that provide test coverage for your raster or vector driver.
For vector drivers, the test_ogrsf utility that is built with GDAL is used by most unit tests of vector drivers to check their compliance w.r.t expectations of what a driver should do/not do. Not that of course this is only generic testing. You also need to add tests that check that the content you read from a test file is the one you expect.

--
http://www.spatialys.com
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230830/4b56858f/attachment-0001.htm>

From michaeladamkatz at yahoo.com  Wed Aug 30 13:18:14 2023
From: michaeladamkatz at yahoo.com (Michael Katz)
Date: Wed, 30 Aug 2023 20:18:14 +0000 (UTC)
Subject: [gdal-dev] Universal raster to rgba?
References: <1881301076.2781592.1693426694379.ref@mail.yahoo.com>
Message-ID: <1881301076.2781592.1693426694379@mail.yahoo.com>

In our program, we want the user to be able to open and view any raster map. As I understand it, and as we use it in our program, the GDAL API lets you read all sorts of raster files, but it presents them to you in a general form: a certain number of bands, where the bands can have a certain data type (e.g., a double or an unsigned byte) and a certain meaning (e.g., red or grayscale or transparency). But we are left having to deal with all of the cases in order to transform it into an array of (unsigned byte) rgba pixels (i.e., an image to show on the screen). I was surprised there was no such function, and I also realize that expecting there to be such a function might show my lack of understanding of the range of possible raster file data types. But even if some files don't have a default rgba representation, it would be great to have a function that does its best with any given file. I asked Even R. about it a few years ago and his comment was "probably somebody must have done it". But I haven't found a library. Our current implementation takes care of many common cases but no doubt there are files out there that we display incorrectly even though they have a natural rgba representation. Am I wrong to think there could/should be such a function? Is there such a function?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230830/98fce9e4/attachment.htm>

From even.rouault at spatialys.com  Wed Aug 30 13:56:44 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 30 Aug 2023 22:56:44 +0200
Subject: [gdal-dev] Creation of a new driver from scratch
In-Reply-To: <AS8PR07MB816801FCB7F295B8301E887EA2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>
References: <AS8PR07MB8168572BB98114EAD65C66BFA24EA@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <8F8C922D-5B8F-47AF-B04A-614583EB5823@hobu.co>
 <129234e4-30a1-b26c-2805-789c41dcfb2e@spatialys.com>
 <AS8PR07MB8168D7FEF38279D40572FBD3A251A@AS8PR07MB8168.eurprd07.prod.outlook.com>
 <AS8PR07MB816801FCB7F295B8301E887EA2E6A@AS8PR07MB8168.eurprd07.prod.outlook.com>
Message-ID: <5c508d26-f155-b09e-ea35-d680127a4489@spatialys.com>

Abel,
>
> I am interested in proportionate 3 ways of proceeding when a used calls translation from one format to our format.
> way 1: force to write V1.1 and stop writing features if the limit is reached.
> way 2: force to write V2.0 (and stop writing features if the limit is reached (it will no happen in a near future, I think)).
> way 3: leave that the program decides if V1.1 is not enough and then it changes automatically to V2.0. It does it in the middle of the process, when FID or some used internal offset gets the limit.

Not knowing anything about the ecosystem of the miramon format, but 
ideally I would bend on the side of simplicity if possible, and I would 
just write V2.0 if V1.1 can be considered as a legacy format, that 
deserves perhaps only read-only support (at our times of terabytes+ 
storage capacity, the saving of 4 bytes per feature seems like a 
anachronic concern). But if you really want to use V1.1 when possible 
and V2.0 only when possible, and provided that you implement the writing 
of the final file only at dataset closing as it was my understanding, 
then you know already the max(FID) of features that have been passed to 
CreateFeature, so you could decide automatically the version needed. I 
would strongly discourage starting writing a V1.1 file and then 
switching to V2.0 in the middle of the writing. That sounds like a 
serious complication.

>
> So, my questions:
> 1.- Which ogr2ogr parameter is the best for doing that?
> 	-f? specificating "MiraMon V1.1" or "MiraMonV2.0" or "MiraMon" (automatic way).

If you really need to implement the 2 formats, a dataset creation option 
in a single driver would probably be better.


>        Or there is another way I haven't seen (I've read all options in https://gdal.org/programs/ogr2ogr.html#ogr2ogr)
>
> 2.- When using -progress some points appear on screen informing the progress. At the end of the progress (or sometimes driver requires) there is a gap of time that driver is writing some pendant information.
-progress works by counting the number of features in the source layer, 
and computing the progress percentage at each call to CreateFeature()
> There is any way to inform the user what the process is doing?

Not really. You could possibly implement it using CPLDebug() statements 
if you want to monitor the progress in debug mode (the GeoPackage driver 
implemets something similar during spatial index writing, which can be a 
long operation), but there's nothing dedicated in the OGR API or ogr2ogr 
to monitor the progress of long operations occuring during dataset 
closing, as most drivers don't need that.

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From j1 at jimenezshaw.com  Thu Aug 31 01:19:09 2023
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 31 Aug 2023 10:19:09 +0200
Subject: [gdal-dev] Universal raster to rgba?
In-Reply-To: <1881301076.2781592.1693426694379@mail.yahoo.com>
References: <1881301076.2781592.1693426694379.ref@mail.yahoo.com>
 <1881301076.2781592.1693426694379@mail.yahoo.com>
Message-ID: <CADRrdKuO=2NTt87cjLBx-MEx80DEQV1K0+x2+=UwsRVfC+uBEg@mail.gmail.com>

Hi Michael.

First of all: I do not know a magic function to convert to RGB(A)
>From my experience exactly with this situation, it is never possible to
make everybody happy. I detected several issues:

- Missing metadata.
Many images do not specify the "meaning" of each band. If you have 3 bands
assuming that they are R,G and B probably works, but not always. With
multispectral images there is no enum for Near Infrared, Red Edge, and so
on. So they should be identified in a different way (most of them in the
file name).

- Wrong metadata
There are some images with wrong metadata. Sometimes it could make sense
(kind of). For example, modified lenses remove the infrared filer from the
optics, so the blue band becomes a Near Infrared band... but the firmware
is still telling that it is an RGB jpeg. They look pretty strange in the
screen.

- Composed images.
Multispectral images are some times (many?) stored with one file per band.
That makes RGB complicated
Even when they are all in one file... how do you represent as RGB a file
with 5, 10 or 20 bands?

- Missing bands.
Again, from multispectral sensors, some have Near Infrared, Red and Green
(identified in XMP). There is no blue. How do you fake the blue?

- Not showing information
If you omit some bands from the RGB (like Near Infrared) then you will not
notice any mistake there... because you are looking only to the RGB. That
happened to me.

- Normalizing the ranges.
You want an RGB with 8 bits per band. What do you do with float values?
Normalizing them all is... not easy.

- Gamma correction
Some images do not have gamma correction (or use gamma = 1 if you prefer).
(those images try to measure something -like reflectance-, not look pretty
in the screen). That output is strange of human beings nowadays. How do you
detect that?

- Single float band
There is a complete branch of UX on how to represent those images.
Different color maps. Choosing one means not choosing all the rest.

- Palleted colours
Some format include their own pallete, but some one-band files are just a
classification. Again, endless discussion in UX team.

- ... more cases I am missing
There are more cases that I forgot, or that I am not aware of.


Personally I am kind of ok with QGIS solution in the "Layer Stiling" panel.
I have to select what I want to do. Yes every time, it is not convenient.

If you want to create a function that is doing "its best", great. I do not
know exactly where it would fit in GDAL. I would guess it is going to be a
function full of "ifs" and many lines of code ;)

Cheers,
Javier

On Wed, 30 Aug 2023 at 22:18, Michael Katz via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> In our program, we want the user to be able to open and view any raster
> map. As I understand it, and as we use it in our program, the GDAL API lets
> you read all sorts of raster files, but it presents them to you in a
> general form: a certain number of bands, where the bands can have a certain
> data type (e.g., a double or an unsigned byte) and a certain meaning (e.g.,
> red or grayscale or transparency). But we are left having to deal with all
> of the cases in order to transform it into an array of (unsigned byte) rgba
> pixels (i.e., an image to show on the screen). I was surprised there was no
> such function, and I also realize that expecting there to be such a
> function might show my lack of understanding of the range of possible
> raster file data types. But even if some files don't have a default rgba
> representation, it would be great to have a function that does its best
> with any given file. I asked Even R. about it a few years ago and his
> comment was "probably somebody must have done it". But I haven't found a
> library. Our current implementation takes care of many common cases but no
> doubt there are files out there that we display incorrectly even though
> they have a natural rgba representation. Am I wrong to think there
> could/should be such a function? Is there such a function?
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230831/3bb1c558/attachment.htm>

From even.rouault at spatialys.com  Thu Aug 31 13:14:14 2023
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 31 Aug 2023 22:14:14 +0200
Subject: [gdal-dev] multidim arraySpecs/GetView
In-Reply-To: <CAAcGz994UOppOvAO4jRRwM-G_gGDOq6wRLKku4m=YfdVDaVHiA@mail.gmail.com>
References: <CAAcGz994UOppOvAO4jRRwM-G_gGDOq6wRLKku4m=YfdVDaVHiA@mail.gmail.com>
Message-ID: <3fdb7424-74a9-e7af-da79-046be6f1f064@spatialys.com>

Michael,


> Hi, hoping to check my syntax ... or expectations ... I'm expecting 
> this to subset by step the 20x20 array in this netcdf, but getting no 
> change in python MultiDimTranslate or at command line:
>
> ds = gdal.OpenEx('gdrivers/data/netcdf/byte_no_cf.nc 
> <http://byte_no_cf.nc>', gdal.OF_MULTIDIM_RASTER)
>
> nds = gdal.MultiDimTranslate("/vsimem/array_view.zarr", ds, 
> format="Zarr", arraySpecs=['name=Band1,view=[::2,::4]'])
> nds.GetRootGroup().OpenMDArray("Band1").GetShape()
> # (20, 20)
>
This was a bug. Fixed per https://github.com/OSGeo/gdal/pull/8297

A way of working it around is to use? scaleAxesSpecs=['x(4)', 'y(2)'] 
instead

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230831/8d3c6262/attachment.htm>

From aborruso at gmail.com  Thu Aug 31 14:36:18 2023
From: aborruso at gmail.com (andy)
Date: Thu, 31 Aug 2023 23:36:18 +0200
Subject: [gdal-dev] sqlite dialect: OpenFileGDB and FID Column selection
Message-ID: <CAHEdGZPz22vT2i=_rHLfTtR0fumnx-o8TEZLLq8sYTOO3Kb6=A@mail.gmail.com>

Hi,
if I run

ogr2ogr -f CSV /vsistdout/ data.gdb  -sql "
SELECT OBJECTID from table_EDF_IS limit 1"

I have

OBJECTID,
"1"

Instead, if I run

ogr2ogr -f CSV /vsistdout/ data.gdb  -dialect sqlite  -sql "
SELECT OBJECTID from  table_EDF_IS   limit 1"

I have this error

ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(SELECT OBJECTID from
table_EDF_IS   limit 1): no such column: OBJECTID

What's the way to use sqlite dialect and select OBJECTID/FID field?
If I use ogrinfo I have "FID Column = OBJECTID"

I'm using GDAL 3.8.0dev-c95490018a, released 2023/07/21

Thank you,

Andrea
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230831/c30a1901/attachment.htm>

From michaeladamkatz at yahoo.com  Thu Aug 31 14:46:54 2023
From: michaeladamkatz at yahoo.com (Michael Katz)
Date: Thu, 31 Aug 2023 21:46:54 +0000 (UTC)
Subject: [gdal-dev] Universal raster to rgba?
In-Reply-To: <CADRrdKuO=2NTt87cjLBx-MEx80DEQV1K0+x2+=UwsRVfC+uBEg@mail.gmail.com>
References: <1881301076.2781592.1693426694379.ref@mail.yahoo.com>
 <1881301076.2781592.1693426694379@mail.yahoo.com>
 <CADRrdKuO=2NTt87cjLBx-MEx80DEQV1K0+x2+=UwsRVfC+uBEg@mail.gmail.com>
Message-ID: <498624496.3389646.1693518414640@mail.yahoo.com>

 Hi Javier, thanks for the detailed breakdown. I had a sense of some of those cases but didn't know all. Still, I think there is a use case, like for users of my program, where they have a file that covers a certain region, and they prefer to see *something* rather than nothing.
I imagine a function that can output the rgba along with a list of notes, warnings, and errors, representing three levels of alerts about what was missing from (e.g., metadata, bands), modified from (e.g., precision loss), or had to be assumed about (e.g., metadata) the data to generate the image. A fancier version would let you specify the way that certain decisions would be made, so that would let the user try different settings to play around with things (perhaps like the Layer Settings in QGIS).



    On Thursday, August 31, 2023 at 01:19:28 AM PDT, Javier Jimenez Shaw <j1 at jimenezshaw.com> wrote:  
 
 Hi Michael.
First of all: I do not know a magic function to convert to RGB(A)From my experience exactly with this situation, it is never possible to make everybody happy. I detected several issues:
- Missing metadata.Many images do not specify the "meaning" of each band. If you have 3 bands assuming that they are R,G and B probably works, but not always. With multispectral images there is no enum for Near Infrared, Red Edge, and so on. So they should be identified in a different way (most of them in the file name).
- Wrong metadataThere are some images with wrong metadata. Sometimes it could make sense (kind of). For example, modified lenses remove the infrared filer from the optics, so the blue band becomes a Near Infrared band... but the firmware is still telling that it is an RGB jpeg. They look pretty strange in the screen.

- Composed images.Multispectral images are some times (many?) stored with one file per band. That makes RGB complicatedEven when they are all in one file... how do you represent as RGB a file with 5, 10 or 20 bands?
- Missing bands.Again, from multispectral sensors, some have Near Infrared, Red and Green (identified in XMP). There is no blue. How do you fake the blue?
- Not showing informationIf you omit some bands from the RGB (like Near Infrared) then you will not notice any mistake there... because you are looking only to the RGB. That happened to me.

- Normalizing the ranges.You want an RGB with 8 bits per band. What do you do with float values? Normalizing them all is... not easy.
- Gamma correctionSome images do not have gamma correction (or use gamma = 1 if you prefer). (those images try to measure something -like reflectance-, not look pretty in the screen). That output is strange of human beings nowadays. How do you detect that?

- Single float bandThere is a complete branch of UX on how to represent those images. Different color maps. Choosing one means not choosing all the rest.
- Palleted coloursSome format include their own pallete, but some one-band files are just a classification. Again, endless discussion in UX team.

- ... more cases I am missingThere are more cases that I forgot, or that I am not aware of.


Personally I am kind of ok with QGIS solution in the "Layer Stiling" panel. I have to select what I want to do. Yes every time, it is not convenient.
If you want to create a function that is doing "its best", great. I do not know exactly where it would fit in GDAL. I would guess it is going to be a function full of "ifs" and many lines of code ;)

Cheers,Javier

On Wed, 30 Aug 2023 at 22:18, Michael Katz via gdal-dev <gdal-dev at lists.osgeo.org> wrote:

In our program, we want the user to be able to open and view any raster map. As I understand it, and as we use it in our program, the GDAL API lets you read all sorts of raster files, but it presents them to you in a general form: a certain number of bands, where the bands can have a certain data type (e.g., a double or an unsigned byte) and a certain meaning (e.g., red or grayscale or transparency). But we are left having to deal with all of the cases in order to transform it into an array of (unsigned byte) rgba pixels (i.e., an image to show on the screen). I was surprised there was no such function, and I also realize that expecting there to be such a function might show my lack of understanding of the range of possible raster file data types. But even if some files don't have a default rgba representation, it would be great to have a function that does its best with any given file. I asked Even R. about it a few years ago and his comment was "probably somebody must have done it". But I haven't found a library. Our current implementation takes care of many common cases but no doubt there are files out there that we display incorrectly even though they have a natural rgba representation. Am I wrong to think there could/should be such a function? Is there such a function?
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230831/a1a4c5c9/attachment.htm>

From mdsumner at gmail.com  Thu Aug 31 16:27:57 2023
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 1 Sep 2023 09:27:57 +1000
Subject: [gdal-dev] multidim arraySpecs/GetView
In-Reply-To: <3fdb7424-74a9-e7af-da79-046be6f1f064@spatialys.com>
References: <CAAcGz994UOppOvAO4jRRwM-G_gGDOq6wRLKku4m=YfdVDaVHiA@mail.gmail.com>
 <3fdb7424-74a9-e7af-da79-046be6f1f064@spatialys.com>
Message-ID: <CAAcGz9-6bicsnUXPHStwY6mNM+Nmpj=LXWg2OT_SLZdLOWA7Qg@mail.gmail.com>

Excellent, thanks so much, confirmed it's working.

Cheers, Mike

On Fri, Sep 1, 2023 at 6:14?AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Michael,
>
> Hi, hoping to check my syntax ... or expectations ... I'm expecting this
> to subset by step the 20x20 array in this netcdf, but getting no change in
> python MultiDimTranslate or at command line:
>
> ds = gdal.OpenEx('gdrivers/data/netcdf/byte_no_cf.nc',
> gdal.OF_MULTIDIM_RASTER)
>
> nds = gdal.MultiDimTranslate("/vsimem/array_view.zarr", ds, format="Zarr",
> arraySpecs=['name=Band1,view=[::2,::4]'])
> nds.GetRootGroup().OpenMDArray("Band1").GetShape()
> # (20, 20)
>
> This was a bug. Fixed per https://github.com/OSGeo/gdal/pull/8297
>
> A way of working it around is to use  scaleAxesSpecs=['x(4)', 'y(2)']
> instead
>
> Even
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230901/6a5b7a03/attachment-0001.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Aug 31 22:42:36 2023
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 1 Sep 2023 05:42:36 +0000
Subject: [gdal-dev] sqlite dialect: OpenFileGDB and FID Column selection
In-Reply-To: <CAHEdGZPz22vT2i=_rHLfTtR0fumnx-o8TEZLLq8sYTOO3Kb6=A@mail.gmail.com>
References: <CAHEdGZPz22vT2i=_rHLfTtR0fumnx-o8TEZLLq8sYTOO3Kb6=A@mail.gmail.com>
Message-ID: <AM0PR09MB32194E1E11B2FBE96539F356FDE4A@AM0PR09MB3219.eurprd09.prod.outlook.com>

Hi,

When the SQLite dialect is used, a temporary SQLite database is created. OBJECTID is a feature identifier (FID) and I guess that the FID gets converted into a primary key with the SQLite defaults. So maybe you can find the OBJECTID from ROWID.
I made a simple test and at least this command did find the right feature. Remember that it was just a quick experiment and I did not say that it is reliable.

ogrinfo poly_sdk.gdb -sql "select rowid, shape from poly where rowid=10" -dialect sqlite

-Jukka Rahkonen-


L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta andy
L?hetetty: perjantai 1. syyskuuta 2023 0.36
Vastaanottaja: gdal dev <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] sqlite dialect: OpenFileGDB and FID Column selection

Hi,
if I run

ogr2ogr -f CSV /vsistdout/ data.gdb  -sql "
SELECT OBJECTID from table_EDF_IS limit 1"
I have

OBJECTID,
"1"

Instead, if I run

ogr2ogr -f CSV /vsistdout/ data.gdb  -dialect sqlite  -sql "
SELECT OBJECTID from  table_EDF_IS   limit 1"

I have this error

ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(SELECT OBJECTID from  table_EDF_IS   limit 1): no such column: OBJECTID

What's the way to use sqlite dialect and select OBJECTID/FID field?
If I use ogrinfo I have "FID Column = OBJECTID"

I'm using GDAL 3.8.0dev-c95490018a, released 2023/07/21

Thank you,

Andrea

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230901/18f9e908/attachment.htm>

From aborruso at gmail.com  Thu Aug 31 23:53:36 2023
From: aborruso at gmail.com (andy)
Date: Fri, 1 Sep 2023 08:53:36 +0200
Subject: [gdal-dev] sqlite dialect: OpenFileGDB and FID Column selection
In-Reply-To: <AM0PR09MB32194E1E11B2FBE96539F356FDE4A@AM0PR09MB3219.eurprd09.prod.outlook.com>
References: <CAHEdGZPz22vT2i=_rHLfTtR0fumnx-o8TEZLLq8sYTOO3Kb6=A@mail.gmail.com>
 <AM0PR09MB32194E1E11B2FBE96539F356FDE4A@AM0PR09MB3219.eurprd09.prod.outlook.com>
Message-ID: <CAHEdGZOh2j1sseY+L8E81fDX6g7spfDaH51nE59a67SkXX5sGQ@mail.gmail.com>

Hi Jukka,

On Fri, 1 Sept 2023 at 07:42, Rahkonen Jukka <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> When the SQLite dialect is used, a temporary SQLite database is created.
> OBJECTID is a feature identifier (FID) and I guess that the FID gets
> converted into a primary key with the SQLite defaults. So maybe you can
> find the OBJECTID from ROWID.
>

it works, thank you very much.

Maybe a little related note in the documentation would do. What do you
think about it?

Thank you again
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20230901/b6eaf2fa/attachment.htm>

