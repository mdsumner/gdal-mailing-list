From cpaulik at vandersat.com  Thu Feb  1 02:20:46 2018
From: cpaulik at vandersat.com (Christoph Paulik)
Date: Thu, 01 Feb 2018 11:20:46 +0100
Subject: [gdal-dev] ogr2ogr not recognizing source SRS correctly
Message-ID: <871si5xb7l.fsf@vandersat.com>


Hi,

I've got a shapefile in EPSG:28992 -
http://spatialreference.org/ref/epsg/amersfoort-rd-new/ which I want to
project into a different EPSG.

But this leads to a shift in the projected output if I don't explicitly
specify the s_srs option in ogr2ogr.

So

ogr2ogr AA-maas-EPGS-4326.shp AaMaas.shp -t_srs EPSG:4326 -s_srs EPSG:28992

works correctly

But doing

ogr2ogr AA-maas-EPGS-4326.shp AaMaas.shp -t_srs EPSG:4326

leads to a shift of the shapefile.

The .prj file is of course there.

Should I file a bug or am I doing something wrong?

All the best,
Christoph


-- 

-------------------------------------------------------
Christoph Paulik
VanderSat // Remote Sensing Scientists
Wilhelminastraat 43a, 2011 VK, Haarlem (NL), The Netherlands
W: www.vandersat.com
PGP: 8CFC D7DF 2867 B2DC 749B  1B0A 6E3B A262 5186 A0AC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 832 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180201/5421d2cc/attachment.sig>

From even.rouault at spatialys.com  Thu Feb  1 02:45:59 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 01 Feb 2018 11:45:59 +0100
Subject: [gdal-dev] ogr2ogr not recognizing source SRS correctly
In-Reply-To: <871si5xb7l.fsf@vandersat.com>
References: <871si5xb7l.fsf@vandersat.com>
Message-ID: <5491265.0xB2GvFSjc@even-i700>

On jeudi 1 février 2018 11:20:46 CET Christoph Paulik wrote:
> Hi,
> 
> I've got a shapefile in EPSG:28992 -
> http://spatialreference.org/ref/epsg/amersfoort-rd-new/ which I want to
> project into a different EPSG.
> 
> But this leads to a shift in the projected output if I don't explicitly
> specify the s_srs option in ogr2ogr.
> 
> So
> 
> ogr2ogr AA-maas-EPGS-4326.shp AaMaas.shp -t_srs EPSG:4326 -s_srs EPSG:28992
> 
> works correctly
> 
> But doing
> 
> ogr2ogr AA-maas-EPGS-4326.shp AaMaas.shp -t_srs EPSG:4326
> 
> leads to a shift of the shapefile.
> 
> The .prj file is of course there.
> 
> Should I file a bug or am I doing something wrong?

Christoph,

Shapefiles .prj files do not contain the TOWGS84 clause used to perform datum shifts. With 
currently released GDAL versions, this TOWGS84 clause will be missing when using directly 
the SRS from the source, and you need to explicitly set it with -s_srs EPSG:28992.
The situation should likely be better with GDAL trunk that has improved logic to try figuring 
out the EPSG code (and thus the TOWGS84 clause) from the .proj file

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180201/cfde3c68/attachment.html>

From karl.zinglersen at gmail.com  Thu Feb  1 06:31:27 2018
From: karl.zinglersen at gmail.com (Karl Zinglersen)
Date: Thu, 1 Feb 2018 11:31:27 -0300
Subject: [gdal-dev] Point density gdal_rasterize -add switch
In-Reply-To: <1517343408429-0.post@n6.nabble.com>
References: <CAGjWj4cm1s55k8MpDLCQ-yX297Kp8BR_cCfy9AVv4GPRv4FO=w@mail.gmail.com>
 <1517343408429-0.post@n6.nabble.com>
Message-ID: <CAGjWj4dyxoqqc_sbF+n99fYaWC11tcyFTF-jbMS=6z53GpWWpg@mail.gmail.com>

The rasterization of points, lines and polygons went nicely with -burn 1
-add to a discrete heat map. Thank you, Jukka.

Particularly we where happy with the line density, but have a follow-up
question:
What does the raster values represent?

We did a vector polygon grid test clipping up the lines, where line length
or line count were different, so we guess it is something else.

Karl

Den 30. jan. 2018 17.16 skrev "jratike80" <
jukka.rahkonen at maanmittauslaitos.fi>:

> > Burn works:
> > gdal_rasterize.exe -burn 1 -tr 20 20 -l points c:/Temp/points.shp
> > c:/Temp/out.tif
>
> > Add doesn't
> > gdal_rasterize.exe -add -tr 20 20 -l points c:/Temp/points.shp
> > c:/Temp/out.tif
>
> Hi,
>
> I have never used the -add option but I would try it as
>
> gdal_rasterize.exe -burn 1 -add -tr 20 20 -l points c:/Temp/points.shp
> c:/Temp/out.tif
>
> -Jukka Rahkonen-
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180201/02ce403e/attachment.html>

From kuroismith at gmail.com  Thu Feb  1 19:28:08 2018
From: kuroismith at gmail.com (Zi Chui)
Date: Fri, 2 Feb 2018 11:28:08 +0800
Subject: [gdal-dev] Do RasterIO of VRT format using arbitrary overviews of
	origin files
Message-ID: <CAO9F5F9uRK+VzkRWi86dres5Pfx8hSTHTzB3ax6xkhWysBPHpg@mail.gmail.com>

Hello,

I have some jpeg2000 files, and i know this format support arbitrary
overviews,
GdalRasterBand::RasterIO will automatically use it in downsampling mode.

But i noticed that the vrt file generated by those jp2 files do not
has arbitrary
overviews (GdalRasterBand::HasArbitraryOverviews return FALSE).

So here goes my question, dose GdalRasterBand::RasterIO of VRT format still
using arbitrary overviews of origin files?

It will be very helpful if anyone can answer my question.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180202/87930576/attachment.html>

From even.rouault at spatialys.com  Fri Feb  2 02:34:13 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 02 Feb 2018 11:34:13 +0100
Subject: [gdal-dev] Do RasterIO of VRT format using arbitrary overviews
	of origin files
In-Reply-To: <CAO9F5F9uRK+VzkRWi86dres5Pfx8hSTHTzB3ax6xkhWysBPHpg@mail.gmail.com>
References: <CAO9F5F9uRK+VzkRWi86dres5Pfx8hSTHTzB3ax6xkhWysBPHpg@mail.gmail.com>
Message-ID: <16007093.LLrrj50blu@even-i700>

On vendredi 2 février 2018 11:28:08 CET Zi Chui wrote:
> Hello,
> 
> I have some jpeg2000 files, and i know this format support arbitrary
> overviews,
> GdalRasterBand::RasterIO will automatically use it in downsampling mode.
> 
> But i noticed that the vrt file generated by those jp2 files do not
> has arbitrary
> overviews (GdalRasterBand::HasArbitraryOverviews return FALSE).
> 
> So here goes my question, dose GdalRasterBand::RasterIO of VRT format still
> using arbitrary overviews of origin files?

Yes, even if the VRT driver doesn't expose all capabilities of underlying sources, it is able to 
do efficient dowsampling if the sources support it.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180202/9a1ee94b/attachment.html>

From paulopires16 at gmail.com  Sun Feb  4 03:30:12 2018
From: paulopires16 at gmail.com (Paulo Pires)
Date: Sun, 4 Feb 2018 04:30:12 -0700 (MST)
Subject: [gdal-dev] RGB to PALETTE conversion
In-Reply-To: <1516733177105-0.post@n6.nabble.com>
References: <1516733177105-0.post@n6.nabble.com>
Message-ID: <1517743812326-0.post@n6.nabble.com>

theres any help, please?

RGB to Palette...
CMYK to Palette...

Thanks



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From juliermeopensourcedeveloper at gmail.com  Mon Feb  5 11:54:22 2018
From: juliermeopensourcedeveloper at gmail.com (Julierme Pinheiro)
Date: Mon, 5 Feb 2018 17:54:22 -0200
Subject: [gdal-dev] GeoTIFF NoData
Message-ID: <CAKTKyJ+tPG_xd3T9YMHg4dsG98zfwXbNXOp+eOfw+NG8UmRjOw@mail.gmail.com>

Hi all,

Sorry if my question has been discussed here before. I followed 1
Answer/Option 2 of this post
<https://gis.stackexchange.com/questions/41472/setting-transparency-in-an-sld-file-for-a-4-channel-geotiff>to
convert  an image (GeoTIFF) external pixels RGB(255,255,255) to NoData.

So, I used the following command line using GDAL_TRANSLATE :

gdal_translate -a_nodata 255 -of GTiff
/home/julierme/Desktop/amazonia_sar/amapa/IMG/covmingrad/CSKS4_20161223204711_CSKS4_20170124204700_3_CovMinGrad_rgb.tif
/home/julierme/Desktop/amazonia_sar/amapa/IMG/covmingrad/CSKS4_20161223204711_CSKS4_20170124204700_3_CovMinGrad_rgb_nodata.tif

The reason I am doing this is because I had a boundary/border
RGB(255,225,225) in the image. So, I converted the entire image
(255,255,255) pixels to NoData. Now, here are my two issues:

1 - Even after setting the InputTransparentColor = FFFFFF in Geoserver as
mentioned in the post Option2, the image border is not transparent. The
border, got an ALPHA_BAND=0.0 surrounding the image. Instead of an
ALPHA_BAND, I need a NaN value for the border. So, I need to completely
remove the ALPHA_BAND and set the border to NaN.

2 - What could I do to convert to nodata only the RGB(255,255,255) image
external pixels, without affecting the internal ones?

Thank you for your time in advance.

Julierme
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180205/3c76af2f/attachment.html>

From csmemoe at aquaveo.com  Mon Feb  5 13:39:16 2018
From: csmemoe at aquaveo.com (Chris Smemoe)
Date: Mon, 5 Feb 2018 14:39:16 -0700
Subject: [gdal-dev] RGB to PALETTE conversion
In-Reply-To: <1517743812326-0.post@n6.nabble.com>
Message-ID: <5a78cf05.c844650a.897a2.c6b1@mx.google.com>

Paulo,

Are you trying to convert a file with multiple bands (RGB or RGBA) to a file
with a single band and a color palette?  One possible solution showing how
to do this using GDAL is shown on Stack Exchange at the following location:

https://gis.stackexchange.com/questions/246045/export-geotiff-with-color-tab
le-from-web-service-using-gdal-translate/259414#259414

Somebody might have something better.

I imagine you could use a similar solution to handle CMYK images.

Chris

-----Original Message-----
From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Paulo
Pires
Sent: Sunday, February 04, 2018 4:30 AM
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] RGB to PALETTE conversion

theres any help, please?

RGB to Palette...
CMYK to Palette...

Thanks



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at maanmittauslaitos.fi  Mon Feb  5 13:59:08 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 5 Feb 2018 14:59:08 -0700 (MST)
Subject: [gdal-dev] RGB to PALETTE conversion
In-Reply-To: <1517743812326-0.post@n6.nabble.com>
References: <1516733177105-0.post@n6.nabble.com>
 <1517743812326-0.post@n6.nabble.com>
Message-ID: <1517867948292-0.post@n6.nabble.com>

Paulo Pires wrote
> theres any help, please?
> 
> RGB to Palette...
> CMYK to Palette...
> 
> Thanks

Have you tried http://www.gdal.org/rgb2pct.html?

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From paulopires16 at gmail.com  Mon Feb  5 15:15:21 2018
From: paulopires16 at gmail.com (Paulo Pires)
Date: Mon, 5 Feb 2018 16:15:21 -0700 (MST)
Subject: [gdal-dev] RGB to PALETTE conversion
In-Reply-To: <1517867948292-0.post@n6.nabble.com>
References: <1516733177105-0.post@n6.nabble.com>
 <1517743812326-0.post@n6.nabble.com> <1517867948292-0.post@n6.nabble.com>
Message-ID: <1517872521926-0.post@n6.nabble.com>

Thanks Chris Smemoe and jratike80,

I found a solution, thanks to you both. I create my palette image in
photoshop, then with gdal, I create my VRT fron that image and then, all my
next images with the same colors with rgb2pct...

Like a charm.

If you know best approach, please let-me know.

Thanks, once again!



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Tue Feb  6 04:47:10 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Tue, 6 Feb 2018 12:47:10 +0000
Subject: [gdal-dev] Does ogr2ogr -overwrite truncate also the spatial index
 in GeoPackage?
Message-ID: <59553aa6cae047bc842022dda356b219@C119S212VM042.msvyvi.vaha.local>

Hi,

Title says most of it. Running "ogr2ogr -f gpkg -update -overwrite" for a vector table in GeoPackage gives an error:

ERROR 1: Spatial index already existing

I wonder if the overwrite mode still does the right thing. Is the R-Tree table truncated automatically by the triggers together with the main table? If it is then  the result is a valid spatial index and the only issue is the misleading error message.

-Jukka Rahkonen

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180206/6f1cf8fc/attachment.html>

From even.rouault at spatialys.com  Tue Feb  6 04:53:49 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 06 Feb 2018 13:53:49 +0100
Subject: [gdal-dev] Does ogr2ogr -overwrite truncate also the spatial
	index in GeoPackage?
In-Reply-To: <59553aa6cae047bc842022dda356b219@C119S212VM042.msvyvi.vaha.local>
References: <59553aa6cae047bc842022dda356b219@C119S212VM042.msvyvi.vaha.local>
Message-ID: <3339715.QAezqgNyOU@even-i700>

Jukka,

Which version do you use ? If it is a trunk version before Jan 23, 
you may run into the bug fixed by https://trac.osgeo.org/gdal/
changeset/41325

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180206/e2f6cbf7/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Feb  6 05:02:11 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Tue, 6 Feb 2018 13:02:11 +0000
Subject: [gdal-dev] Does ogr2ogr -overwrite truncate also the spatial
 index in GeoPackage?
Message-ID: <23dcf68f3ed84aa09db0bece4acd8243@C119S212VM042.msvyvi.vaha.local>

Hi,

That was the case, once I updated into recent trunk the error message disappeared.

-Jukka-

Lähettäjä: Even Rouault [mailto:even.rouault at spatialys.com]
Lähetetty: 6. helmikuuta 2018 14:54
Vastaanottaja: gdal-dev at lists.osgeo.org
Kopio: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>
Aihe: Re: [gdal-dev] Does ogr2ogr -overwrite truncate also the spatial index in GeoPackage?


Jukka,



Which version do you use ? If it is a trunk version before Jan 23, you may run into the bug fixed by https://trac.osgeo.org/gdal/changeset/41325



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180206/a553c5ab/attachment.html>

From mikeucfl at gmail.com  Tue Feb  6 11:58:25 2018
From: mikeucfl at gmail.com (mikeucfl)
Date: Tue, 6 Feb 2018 12:58:25 -0700 (MST)
Subject: [gdal-dev] Resulting geometry from OGRGeometry::difference
 somehow got simplified
In-Reply-To: <1516336768660-0.post@n6.nabble.com>
References: <1516052769004-0.post@n6.nabble.com>
 <1516060197261-0.post@n6.nabble.com> <1665900.x00BRY7lc1@even-i700>
 <1516336768660-0.post@n6.nabble.com>
Message-ID: <1517947105337-0.post@n6.nabble.com>

Just to update with what I've figured out so far.

1. The issue surrounds an OGRMultiGeometry that has intersecting interior
rings.
2. The projection of the geometries are in EPSG 4326 (lat/long).
3. Internally in GEOS when the difference operator runs, there is a call to
check if the geometry is valid and it threw an exception saying it wasn't
and spit out a warning to the console that I didn't notice. Geos tried to
fix the geometry and in doing so the values got truncated or rounded to the
hundredths place. I'm guessing some algorithm is thinking the projection is
in meters and is what causes my data to get screwed up.

I have tried fixing the geometry prior to calling difference with a
OGRGeometry::Buffer(0.0) but that still doesn't fix the issue. What seemed
to resolve it was putting the geometry in a different projection that is in
meters (used web mercator), calling Buffer(0.0) and then calling Difference.

So if anyone sees a similar issue, it's something internally with GEOS but I
didn't have enough time to track it down. Re-projecting to something using
meters does help though.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Tue Feb  6 13:48:02 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 6 Feb 2018 14:48:02 -0700 (MST)
Subject: [gdal-dev] Resulting geometry from OGRGeometry::difference
 somehow got simplified
In-Reply-To: <1517947105337-0.post@n6.nabble.com>
References: <1516052769004-0.post@n6.nabble.com>
 <1516060197261-0.post@n6.nabble.com> <1665900.x00BRY7lc1@even-i700>
 <1516336768660-0.post@n6.nabble.com> <1517947105337-0.post@n6.nabble.com>
Message-ID: <1517953682851-0.post@n6.nabble.com>

mikeucfl wrote
> So if anyone sees a similar issue, it's something internally with GEOS but
> I
> didn't have enough time to track it down. Re-projecting to something using
> meters does help though.

Hi,

If you could share couple of problematic geometries for example as WKT then
somebody else could have a try as well.

-Jukka Rahkonen-






--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From palmerjnz at gmail.com  Thu Feb  8 10:09:28 2018
From: palmerjnz at gmail.com (Jeremy Palmer)
Date: Fri, 9 Feb 2018 07:09:28 +1300
Subject: [gdal-dev] Coordinates Axis Order for EPSG:2193
Message-ID: <CAA5WJYkTmJMB2F9OhajE6Gkx-nbNSfCtxDkdT9VkT=ByxCn1Nw@mail.gmail.com>

Is there a way to report the axis order that GDAL understands internally
for automatically swapping coordinates axis order when dealing with OGC/GML
services?

EPSG is defined as North/East order and is correct in
http://epsg-registry.org/export.htm?wkt=urn:ogc:def:crs:EPSG::2193

However when I run gdalsrsinfo  -o wkt -p  "EPSG:2193" using GDAL 2.2.3 it
does return any information relating to axis:

gdalsrsinfo  -o wkt -p  "EPSG:2193"

PROJCS["NZGD2000 / New Zealand Transverse Mercator 2000",
    GEOGCS["NZGD2000",
        DATUM["New_Zealand_Geodetic_Datum_2000",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6167"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4167"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",173],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",1600000],
    PARAMETER["false_northing",10000000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","2193”]]

However back in 2013 the gdalsrs did report it:
https://lists.osgeo.org/pipermail/gdal-dev/2013-March/035624.html.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180209/ae3f59da/attachment.html>

From even.rouault at spatialys.com  Thu Feb  8 10:16:04 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 08 Feb 2018 19:16:04 +0100
Subject: [gdal-dev] Coordinates Axis Order for EPSG:2193
In-Reply-To: <CAA5WJYkTmJMB2F9OhajE6Gkx-nbNSfCtxDkdT9VkT=ByxCn1Nw@mail.gmail.com>
References: <CAA5WJYkTmJMB2F9OhajE6Gkx-nbNSfCtxDkdT9VkT=ByxCn1Nw@mail.gmail.com>
Message-ID: <3514609.SLMPYxP8o2@even-i700>

Hi Jeremy,

> Is there a way to report the axis order that GDAL understands internally
> for automatically swapping coordinates axis order when dealing with OGC/GML
> services?
> 
> EPSG is defined as North/East order and is correct in
> http://epsg-registry.org/export.htm?wkt=urn:ogc:def:crs:EPSG::2193
> 
> However when I run gdalsrsinfo  -o wkt -p  "EPSG:2193" using GDAL 2.2.3 it
> does return any information relating to axis:
> 
> gdalsrsinfo  -o wkt -p  "EPSG:2193"

Yes, use "EPSGA:2193"
note the A after EPSG for Axis

If using EPSG, axis will be stripped off for lat-long geodetic SRS, and northing-easting 
projected SRS.
Whereas EPSGA always retain axis order
The rationale for the EPSG:xxxx behaviour is that most of the time the raster or vector data 
in those "inverted axis" CRS will actually be returned in GIS friendly order, and thus the axis 
info would be misleading.

> 
> However back in 2013 the gdalsrs did report it:
> https://lists.osgeo.org/pipermail/gdal-dev/2013-March/035624.html.

Yes, at that time stripping off was only implemented for lat-long geodetic SRS. It has since 
then being extended to northing-easting projected SRS.

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180208/afd02f7d/attachment.html>

From palmerjnz at gmail.com  Thu Feb  8 10:24:40 2018
From: palmerjnz at gmail.com (Jeremy Palmer)
Date: Fri, 9 Feb 2018 07:24:40 +1300
Subject: [gdal-dev] Coordinates Axis Order for EPSG:2193
In-Reply-To: <3514609.SLMPYxP8o2@even-i700>
References: <CAA5WJYkTmJMB2F9OhajE6Gkx-nbNSfCtxDkdT9VkT=ByxCn1Nw@mail.gmail.com>
 <3514609.SLMPYxP8o2@even-i700>
Message-ID: <CAA5WJY=9Hx4N1chk0E4BsLTekGxc_RJzGWkjEsZaU6OHryqTVQ@mail.gmail.com>

Hi Even,

On Fri, Feb 9, 2018 at 7:16 AM, Even Rouault <even.rouault at spatialys.com>
wrote:
>
>
>
> Yes, use "EPSGA:2193"
>
> note the A after EPSG for Axis
>
>
>
> If using EPSG, axis will be stripped off for lat-long geodetic SRS, and
> northing-easting projected SRS.
>
> Whereas EPSGA always retain axis order
>
> The rationale for the EPSG:xxxx behaviour is that most of the time the
> raster or vector data in those "inverted axis" CRS will actually be
> returned in GIS friendly order, and thus the axis info would be misleading.
>

Thank you, makes perfect sense.

Another day, another another axis order issue :-(

Cheers
Jeremy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180209/3bac3a91/attachment.html>

From jerome.siot at mytimezero.com  Fri Feb  9 05:27:32 2018
From: jerome.siot at mytimezero.com (Jerome Siot)
Date: Fri, 9 Feb 2018 13:27:32 +0000
Subject: [gdal-dev] =?windows-1252?q?S57_objects=92_catalog_reload?=
Message-ID: <DM5PR17MB148297CF8535B1EF1C17F4B483F20@DM5PR17MB1482.namprd17.prod.outlook.com>

Hi,

I would like to change the s57 objects’ catalog while running between two open of  datasources.
How can I make S57ObjectClasses.csv reloaded ?
Or how can I change the loaded S57ObjectClasses ?

--
Merci, Jerome

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180209/3e004082/attachment.html>

From even.rouault at spatialys.com  Fri Feb  9 05:52:38 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 09 Feb 2018 14:52:38 +0100
Subject: [gdal-dev] =?utf-8?q?S57_objects=E2=80=99_catalog_reload?=
In-Reply-To: <DM5PR17MB148297CF8535B1EF1C17F4B483F20@DM5PR17MB1482.namprd17.prod.outlook.com>
References: <DM5PR17MB148297CF8535B1EF1C17F4B483F20@DM5PR17MB1482.namprd17.prod.outlook.com>
Message-ID: <19749376.fGIXBx0gFP@even-i700>

Jerome,

> 
> I would like to change the s57 objects’ catalog while running between two
> open of  datasources. How can I make S57ObjectClasses.csv reloaded ?
> Or how can I change the loaded S57ObjectClasses ?

If your workflow is

open dataset 1
work with it
close dataset 1
change .csv file
open dataset 2
work with it
close dataset 2

then after "change .csv file", you could unload and reload the S57 driver so that the 
S57ClassRegistrar singleton gets destroyed and reloaded, with something like (untested):

GDALDriverManager* poDM = GetGDALDriverManager();
GDALDriver* poDrv = poDM->GetDriverByName("S57");
poDM->DeregisterDriver(poDrv);
delete poDrv;
RegisterOGRS57();

If you need to operate on 2 simultaneously opened datasets with different .csv files, then 
changes would be needed in the S57 driver.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180209/5ed00bed/attachment.html>

From jerome.siot at mytimezero.com  Mon Feb 12 00:50:39 2018
From: jerome.siot at mytimezero.com (Jerome Siot)
Date: Mon, 12 Feb 2018 08:50:39 +0000
Subject: [gdal-dev] =?utf-8?q?S57_objects=E2=80=99_catalog_reload?=
In-Reply-To: <19749376.fGIXBx0gFP@even-i700>
References: <DM5PR17MB148297CF8535B1EF1C17F4B483F20@DM5PR17MB1482.namprd17.prod.outlook.com>
 <19749376.fGIXBx0gFP@even-i700>
Message-ID: <DM5PR17MB1482408C3097EAF3C528ECE983F70@DM5PR17MB1482.namprd17.prod.outlook.com>

Hi Even,
Thank you for your quick answer,
We work with C#, and unfortunately, we didn’t find GDALDriverManager API.

Instead, we tried algorithm you proposed with OGR Driver.DeRegister()/Register() : this does not work, csv change is not taked into account (csv file seems to be cached)

--
Jerome

From: Even Rouault [mailto:even.rouault at spatialys.com]
Sent: Friday, February 9, 2018 2:53 PM
To: gdal-dev at lists.osgeo.org
Cc: Jerome Siot
Subject: Re: [gdal-dev] S57 objects’ catalog reload


Jerome,



>

> I would like to change the s57 objects’ catalog while running between two

> open of datasources. How can I make S57ObjectClasses.csv reloaded ?

> Or how can I change the loaded S57ObjectClasses ?



If your workflow is



open dataset 1

work with it

close dataset 1

change .csv file

open dataset 2

work with it

close dataset 2



then after "change .csv file", you could unload and reload the S57 driver so that the S57ClassRegistrar singleton gets destroyed and reloaded, with something like (untested):



GDALDriverManager* poDM = GetGDALDriverManager();

GDALDriver* poDrv = poDM->GetDriverByName("S57");

poDM->DeregisterDriver(poDrv);

delete poDrv;

RegisterOGRS57();



If you need to operate on 2 simultaneously opened datasets with different .csv files, then changes would be needed in the S57 driver.



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180212/cc95aa1f/attachment.html>

From SnapeM at rpsgroup.com  Mon Feb 12 01:58:12 2018
From: SnapeM at rpsgroup.com (Matthew Snape)
Date: Mon, 12 Feb 2018 09:58:12 +0000
Subject: [gdal-dev] layer union returns a geometry collection
Message-ID: <HE1PR0701MB22523AB44C6C5FCF55DC97C3BFF70@HE1PR0701MB2252.eurprd07.prod.outlook.com>

Hello,

I am performing a union of two layers using OGR from Python...

layerA.Union(layerB, layerC,["PROMOTE_TO_MULTI=YES",])

This returns a layer composed of multipolygon's  except for a single geometrycollection in the form...

GEOMETRYCOLLECTION (POINT (2610469.66 3325023.52),POLYGON ((2610439.3657 3325014.925899999..........

Is this expected behaviour, and if so what is it showing?

Any help appreciated
Thank you.



This e-mail message and any attached file is the property of the sender and is sent in confidence to the addressee only.

Internet communications are not secure and RPS is not responsible for their abuse by third parties, any alteration or corruption in transmission or for any loss or damage caused by a virus or by any other means.

RPS Group Plc, company number: 208 7786 (England). Registered office: 20 Western Avenue Milton Park Abingdon Oxfordshire OX14 4SH.

RPS Group Plc web link: http://www.rpsgroup.com<http://www.rpsgroup.com/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180212/7bd5e46d/attachment-0001.html>

From ari.jolma at gmail.com  Mon Feb 12 02:32:02 2018
From: ari.jolma at gmail.com (Ari Jolma)
Date: Mon, 12 Feb 2018 12:32:02 +0200
Subject: [gdal-dev] layer union returns a geometry collection
In-Reply-To: <HE1PR0701MB22523AB44C6C5FCF55DC97C3BFF70@HE1PR0701MB2252.eurprd07.prod.outlook.com>
References: <HE1PR0701MB22523AB44C6C5FCF55DC97C3BFF70@HE1PR0701MB2252.eurprd07.prod.outlook.com>
Message-ID: <8c45d808-bdaf-f8e7-45b8-80099683723c@gmail.com>

Matthew,

The documentation(1) says "The result layer contains features whose 
geometries represent areas that are either in the input layer, in the 
method layer, or in both.". I assume you a polygon in the input layer B 
which has a common singular point and common area with a polygon in layer C.

Ari

(1) http://gdal.org/classOGRLayer.html#adf0598c7dab1f4dbe3e2735e27450c9c


On 12.02.2018 11:58, Matthew Snape wrote:
>
> Hello,
>
> I am performing a union of two layers using OGR from Python…
>
> layerA.Union(layerB, layerC,["PROMOTE_TO_MULTI=YES",])
>
> This returns a layer composed of multipolygon’s  except for a single 
> geometrycollection in the form…
>
> GEOMETRYCOLLECTION (POINT (2610469.66 3325023.52),POLYGON 
> ((2610439.3657 3325014.925899999……….
>
> Is this expected behaviour, and if so what is it showing?
>
> Any help appreciated
>
> Thank you.
>
> This e-mail message and any attached file is the property of the 
> sender and is sent in confidence to the addressee only.
>
> Internet communications are not secure and RPS is not responsible for 
> their abuse by third parties, any alteration or corruption in 
> transmission or for any loss or damage caused by a virus or by any 
> other means.
>
> RPS Group Plc, company number: 208 7786 (England). Registered office: 
> 20 Western Avenue Milton Park Abingdon Oxfordshire OX14 4SH.
>
> RPS Group Plc web link: http://www.rpsgroup.com <http://www.rpsgroup.com/>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180212/afb35684/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Feb 12 03:01:46 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 12 Feb 2018 04:01:46 -0700 (MST)
Subject: [gdal-dev] layer union returns a geometry collection
In-Reply-To: <HE1PR0701MB22523AB44C6C5FCF55DC97C3BFF70@HE1PR0701MB2252.eurprd07.prod.outlook.com>
References: <HE1PR0701MB22523AB44C6C5FCF55DC97C3BFF70@HE1PR0701MB2252.eurprd07.prod.outlook.com>
Message-ID: <1518433306594-0.post@n6.nabble.com>

Matthew Snape wrote
> Hello,
> 
> I am performing a union of two layers using OGR from Python...
> 
> layerA.Union(layerB, layerC,["PROMOTE_TO_MULTI=YES",])
> 
> This returns a layer composed of multipolygon's  except for a single
> geometrycollection in the form...
> 
> GEOMETRYCOLLECTION (POINT (2610469.66 3325023.52),POLYGON ((2610439.3657
> 3325014.925899999..........
> 
> Is this expected behaviour, and if so what is it showing?
> 
> Any help appreciated
> Thank you.
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev


Hi,

It would help a lot if you could find out and extract those source features
which make up that geometrycollection. Otherwise it is quite impossible to
answer.

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Mon Feb 12 05:43:57 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 12 Feb 2018 14:43:57 +0100
Subject: [gdal-dev] =?utf-8?q?S57_objects=E2=80=99_catalog_reload?=
In-Reply-To: <DM5PR17MB1482408C3097EAF3C528ECE983F70@DM5PR17MB1482.namprd17.prod.outlook.com>
References: <DM5PR17MB148297CF8535B1EF1C17F4B483F20@DM5PR17MB1482.namprd17.prod.outlook.com>
 <19749376.fGIXBx0gFP@even-i700>
 <DM5PR17MB1482408C3097EAF3C528ECE983F70@DM5PR17MB1482.namprd17.prod.outlook.com>
Message-ID: <6548860.OgpfstlcsA@even-i700>

Jerome,

> Thank you for your quick answer,
> We work with C#, and unfortunately, we didn’t find GDALDriverManager API.

There's in fact a more radical solution, and that should be available in C# as it is in the generic 
SWIG .i files

In Python (and likely the same in C#):
gdal.GDALDestroyDriverManager()
gdal.AllRegister()


> 
> Instead, we tried algorithm you proposed with OGR
> Driver.DeRegister()/Register() : this does not work, csv change is not
> taked into account (csv file seems to be cached)

Yes, Driver.DeRegister() just removes the driver from the list of drivers that are tried, but 
that doesn't destroy it.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180212/f84ad50c/attachment.html>

From scheftic at email.arizona.edu  Mon Feb 12 09:40:24 2018
From: scheftic at email.arizona.edu (William Daniel Scheftic)
Date: Mon, 12 Feb 2018 10:40:24 -0700
Subject: [gdal-dev] Build From Source - using wrong libraries
Message-ID: <89cdc88c-ff77-e467-7afb-02b1dae72a00@email.arizona.edu>

Hi,

I'm trying to build gdal using some libraries I had already installed 
for GrADS (hdf4, hdf5, netcdf, xml2, curl, jasper). However, for some 
reason make is keying on other files and libraries in the same directory 
where I installed the GrADS supplementary libraries.  I only want 
specific libraries to be used and to use gdal internals where I can.  I 
configured as such...

./configure --prefix=$HOME --with-libz=internal --with-pcraster=internal 
--with-png=internal --with-pcidsk=internal --with-libtiff=internal 
--with-geotiff=internal --with-jpeg=internal --with-gif=internal 
--with-qhull=internal --with-libjson-c=internal 
--with-hdf4=$HOME/supplibs --with-hdf5=$HOME/supplibs 
--with-netcdf=$HOME/supplibs --with-jasper=$HOME/supplibs 
--with-curl=$HOME/supplibs --with-xml2=$HOME/supplibs 
--with-hide-internal-symbols=yes

Now initially I had a problem with make including the grib2.h I have 
under $HOME/supplibs/include.  Only way I could prevent this is by 
zipping up these files.  I got errors like this...

degrib18/g2clib-1.0.4/grib2.h:210: error: conflicting types for 'g2_addgrid'
/st1/scheftic/supplibs/include/grib2.h:218: note: previous declaration 
of 'g2_addgrid' was here

Now, I was able to get through all of the compiling, but upon linking I 
received this error.

/st1/scheftic/src/gdal-2.2.3/.libs/libgdal.so: undefined reference to 
`png_set_longjmp_fn'

My guess is that the install used the png library I installed for 
GrADS.  However, I configured for the internal version.  Is there anyway 
to prevent these conflicts from occurring?

Thanks,

Bill



From even.rouault at spatialys.com  Mon Feb 12 14:53:12 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 12 Feb 2018 23:53:12 +0100
Subject: [gdal-dev] Vector Tiles in OGR
In-Reply-To: <1521484.TDs4EaFJB7@even-i700>
References: <CAH-RUCSWA55kmEW6=tH0=xb7qUFm9R4oJ6iBSxdeSrnetyRM0g@mail.gmail.com>
 <CAFcOn2_FJ02nGBeBcpkv2BwOPwrafK30hq4zfE_6Jb4rx1K0zQ@mail.gmail.com>
 <1521484.TDs4EaFJB7@even-i700>
Message-ID: <4023185.76Nh0bZ7EP@even-i700>

On lundi 22 janvier 2018 23:40:55 CET Even Rouault wrote:
> Hi,
> 
> > P.S. @Even: Any news on a GDAL/OGR MVT reader?
> 
> Yes, a new OGR MVT reader has just been committed in GDAL trunk:
> http://gdal.org/drv_mvt.html

And the writer part (for MVT and MBTILES) driver is now in trunk

http://gdal.org/drv_mvt.html
http://gdal.org/frmt_mbtiles.html

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180212/ab80d707/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Feb 13 01:06:47 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 13 Feb 2018 02:06:47 -0700 (MST)
Subject: [gdal-dev] Vector Tiles in OGR
In-Reply-To: <4023185.76Nh0bZ7EP@even-i700>
References: <CAH-RUCSWA55kmEW6=tH0=xb7qUFm9R4oJ6iBSxdeSrnetyRM0g@mail.gmail.com>
 <CAPxHBh_-i1i8_85J517SWUo8N1GB9557Om4CvRwi4iMxTXswOQ@mail.gmail.com>
 <CAH-RUCQwki_Di08JCy2C8E8RkR3X3AdLjRQXo-312EWOVobL3g@mail.gmail.com>
 <CAFcOn2-rF8_=wC6Y5dpmmbLHccN2SG6Qqj_GNsEuzbKF+1ocpA@mail.gmail.com>
 <661A1F30-F0B6-4514-92A1-B9782D109958@gmail.com>
 <CAFcOn2_FJ02nGBeBcpkv2BwOPwrafK30hq4zfE_6Jb4rx1K0zQ@mail.gmail.com>
 <1521484.TDs4EaFJB7@even-i700> <4023185.76Nh0bZ7EP@even-i700>
Message-ID: <1518512807456-0.post@n6.nabble.com>

Even Rouault-2 wrote
> On lundi 22 janvier 2018 23:40:55 CET Even Rouault wrote:
>> Hi,
>> 
>> > P.S. @Even: Any news on a GDAL/OGR MVT reader?
>> 
>> Yes, a new OGR MVT reader has just been committed in GDAL trunk:
>> http://gdal.org/drv_mvt.html
> 
> And the writer part (for MVT and MBTILES) driver is now in trunk
> 
> http://gdal.org/drv_mvt.html
> http://gdal.org/frmt_mbtiles.html
> 
> Even

Hi,

At the moment we create MVT tiles from PostGIS with ST_AsMVT to suit with
the national gridset that is based on ETRS-TM35FIN (EPSG:3067) coordinate
system. How difficult would you consider to enhance the driver to split and
write vector tiles according to other gridsets than the Web Mercator one?

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Tue Feb 13 01:39:10 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Feb 2018 10:39:10 +0100
Subject: [gdal-dev] Vector Tiles in OGR
In-Reply-To: <1518512807456-0.post@n6.nabble.com>
References: <CAH-RUCSWA55kmEW6=tH0=xb7qUFm9R4oJ6iBSxdeSrnetyRM0g@mail.gmail.com>
 <4023185.76Nh0bZ7EP@even-i700> <1518512807456-0.post@n6.nabble.com>
Message-ID: <3720347.KoPR1JlW9Z@even-i700>

On mardi 13 février 2018 02:06:47 CET jratike80 wrote:
> Even Rouault-2 wrote
> 
> > On lundi 22 janvier 2018 23:40:55 CET Even Rouault wrote:
> >> Hi,
> >> 
> >> > P.S. @Even: Any news on a GDAL/OGR MVT reader?
> >> 
> >> Yes, a new OGR MVT reader has just been committed in GDAL trunk:
> >> http://gdal.org/drv_mvt.html
> > 
> > And the writer part (for MVT and MBTILES) driver is now in trunk
> > 
> > http://gdal.org/drv_mvt.html
> > http://gdal.org/frmt_mbtiles.html
> > 
> > Even
> 
> Hi,
> 
> At the moment we create MVT tiles from PostGIS with ST_AsMVT to suit with
> the national gridset that is based on ETRS-TM35FIN (EPSG:3067) coordinate
> system. How difficult would you consider to enhance the driver to split and
> write vector tiles according to other gridsets than the Web Mercator one?

Not that much. But is there a standard way of deriving the tiling scheme for that CRS ? I guess 
not. You'd probably need to manually define the coordinate of the left-corner of the tile (0,0) 
in the CRS and the resolution of the tile at zoom level 0.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180213/b68b4c9a/attachment.html>

From sfkeller at gmail.com  Tue Feb 13 03:28:36 2018
From: sfkeller at gmail.com (Stefan Keller)
Date: Tue, 13 Feb 2018 12:28:36 +0100
Subject: [gdal-dev] Vector Tiles in OGR
In-Reply-To: <3720347.KoPR1JlW9Z@even-i700>
References: <CAH-RUCSWA55kmEW6=tH0=xb7qUFm9R4oJ6iBSxdeSrnetyRM0g@mail.gmail.com>
 <4023185.76Nh0bZ7EP@even-i700> <1518512807456-0.post@n6.nabble.com>
 <3720347.KoPR1JlW9Z@even-i700>
Message-ID: <CAFcOn2_t0STYyW9mHDxt3isqCZ=bhfHmKiWAiUDWfNEw2FbQ-w@mail.gmail.com>

Hi all

No there's no standard about non-Webmercator usage of vector tiles.
TileJSON spec. leaves open how CRS is handled which was a wise decision.
So it's up to us to come up with a proposal.

But what's bad is, that TileJSON is not even up-to-date to describe
vector tiles. At least MBTiles spec. recently got updated to 1.3.
I'm a bit frustrated about Mapbox having "no time" not even to update
the MVT specs. It's just delaying innovation.

:Stefan



2018-02-13 10:39 GMT+01:00 Even Rouault <even.rouault at spatialys.com>:
> On mardi 13 février 2018 02:06:47 CET jratike80 wrote:
>
>> Even Rouault-2 wrote
>
>>
>
>> > On lundi 22 janvier 2018 23:40:55 CET Even Rouault wrote:
>
>> >> Hi,
>
>> >>
>
>> >> > P.S. @Even: Any news on a GDAL/OGR MVT reader?
>
>> >>
>
>> >> Yes, a new OGR MVT reader has just been committed in GDAL trunk:
>
>> >> http://gdal.org/drv_mvt.html
>
>> >
>
>> > And the writer part (for MVT and MBTILES) driver is now in trunk
>
>> >
>
>> > http://gdal.org/drv_mvt.html
>
>> > http://gdal.org/frmt_mbtiles.html
>
>> >
>
>> > Even
>
>>
>
>> Hi,
>
>>
>
>> At the moment we create MVT tiles from PostGIS with ST_AsMVT to suit with
>
>> the national gridset that is based on ETRS-TM35FIN (EPSG:3067) coordinate
>
>> system. How difficult would you consider to enhance the driver to split
>> and
>
>> write vector tiles according to other gridsets than the Web Mercator one?
>
>
>
> Not that much. But is there a standard way of deriving the tiling scheme for
> that CRS ? I guess not. You'd probably need to manually define the
> coordinate of the left-corner of the tile (0,0) in the CRS and the
> resolution of the tile at zoom level 0.
>
>
>
> Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From jukka.rahkonen at maanmittauslaitos.fi  Tue Feb 13 03:44:22 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Tue, 13 Feb 2018 11:44:22 +0000
Subject: [gdal-dev] Vector Tiles in OGR
Message-ID: <05ac1644a160475f984944f51d632e63@C119S212VM042.msvyvi.vaha.local>

Even Rouault wrote:

>On mardi 13 février 2018 02:06:47 CET jratike80 wrote:
>> Even Rouault-2 wrote
>> 
>> > On lundi 22 janvier 2018 23:40:55 CET Even Rouault wrote:
>> >> Hi,
>> >> 
>> >> > P.S. @Even: Any news on a GDAL/OGR MVT reader?
>> >> 
>> >> Yes, a new OGR MVT reader has just been committed in GDAL trunk:
>> >> http://gdal.org/drv_mvt.html
>> > 
>> > And the writer part (for MVT and MBTILES) driver is now in trunk
>> > 
>> > http://gdal.org/drv_mvt.html
>> > http://gdal.org/frmt_mbtiles.html
>> > 
>> > Even
>> 
>> Hi,
>> 
>> At the moment we create MVT tiles from PostGIS with ST_AsMVT to suit with
>> the national gridset that is based on ETRS-TM35FIN (EPSG:3067) coordinate
>> system. How difficult would you consider to enhance the driver to split and
>> write vector tiles according to other gridsets than the Web Mercator one?
 
>Not that much. But is there a standard way of deriving the tiling scheme for that CRS ? I guess not. You'd probably need to manually define the >coordinate of the left-corner of the tile (0,0) in the CRS and the resolution of the tile at zoom level 0.
 
There is actually a Finnish national recommendation about the EPSG:3067 tiling schema. The top-left corner of the zero tile is at
-548576 E, 8388608 N, with resolution of 8192 meters.

http://docs.jhs-suositukset.fi/jhs-suositukset/JHS180_liite1/JHS180_liite1.html#H7

-Jukka-

>Even
 
-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Feb 13 08:22:44 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Feb 2018 17:22:44 +0100
Subject: [gdal-dev] Vector Tiles in OGR
In-Reply-To: <05ac1644a160475f984944f51d632e63@C119S212VM042.msvyvi.vaha.local>
References: <05ac1644a160475f984944f51d632e63@C119S212VM042.msvyvi.vaha.local>
Message-ID: <6291607.nJCnUMbdA3@even-i700>

> >> Hi,
> >> 
> >> At the moment we create MVT tiles from PostGIS with ST_AsMVT to suit with
> >> the national gridset that is based on ETRS-TM35FIN (EPSG:3067) coordinate
> >> system. How difficult would you consider to enhance the driver to split
> >> and
> >> write vector tiles according to other gridsets than the Web Mercator one?
> 
>  
> 
> >Not that much. But is there a standard way of deriving the tiling scheme
> >for that CRS ? I guess not. You'd probably need to manually define the
> >>coordinate of the left-corner of the tile (0,0) in the CRS and the
> >resolution of the tile at zoom level 0.
>  
> There is actually a Finnish national recommendation about the EPSG:3067
> tiling schema. The top-left corner of the zero tile is at -548576 E,
> 8388608 N, with resolution of 8192 meters.
> 
> http://docs.jhs-suositukset.fi/jhs-suositukset/JHS180_liite1/JHS180_liite1.h
> tml#H7

OK, I've added a TILING_SCHEME dataset creation option to define such as custom tiling 
scheme. See 
https://trac.osgeo.org/gdal/changeset/41470#file1
for how to use it and how it impacts metadata.json

Note that this is only implement for file tilesets and not for MBTILES output. That could be 
extended for MBTILES, but I was a bit hesitant to do so to avoid incompatibilities with other 
tools.
(Actually by using mb-util you could create a .mbtiles from the file tileset)

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180213/3f15ed46/attachment-0001.html>

From cpaulik at vandersat.com  Tue Feb 13 08:45:18 2018
From: cpaulik at vandersat.com (Christoph Paulik)
Date: Tue, 13 Feb 2018 17:45:18 +0100
Subject: [gdal-dev] Python Interfaces to gdal warp and gdal translate behave
	differently than command line
References: <CAJ38ub+QG4e=GB0uh4=YEoEaNirgJAPrFWoS-K=0Z7EYv3YT6Q@mail.gmail.com>
 <87zi52p0cr.fsf@vandersat.com> <87tvv9q54q.fsf@vandersat.com>
Message-ID: <87bmgs96u9.fsf@vandersat.com>


Hi,

In my original email I had a small (300KB) test geotiff attached but
this was rejected by the mailing list. So here the original email again:

If we warp or translate the a GeoTIFF using the Python API
in the attached python file then the output pixel precision is
truncated (even when 15 digtis precison is specified) depending on the
number of 0 preceding the first non-zero number after the first digit (see
testwarpsmall.py).
The system calls work as expected though.

Tested on gdal 2.2.3.

Example:
1) if                    xres = 0.88888888888889
       ouput Pixel_size = 0.88888888889000
2) if                    xres = 0.08888888888889
       ouput Pixel_size = 0.08888888888900
3) if                    xres = 0.00888888888889
       ouput Pixel_size = 0.00888888888890
4) if                    xres = 0.00088888888889
       ouput Pixel_size = 0.00088888888889

In detail:

$ python testwarpsmall.py 

$ gdalinfo output_test.tif

Driver: GTiff/GeoTIFF
Files: output_test.tif
Size is 11, 11
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-180.000000000000000,-20.000000000137490)
Pixel Size = (0.088888888888900,-0.088888888888900)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-180.0000000, -20.0000000) (180d 0' 0.00"W, 20d 0' 0.00"S)
Lower Left  (-180.0000000, -20.9777778) (180d 0' 0.00"W, 20d58'40.00"S)
Upper Right (-179.0222222, -20.0000000) (179d 1'20.00"W, 20d 0' 0.00"S)
Lower Right (-179.0222222, -20.9777778) (179d 1'20.00"W, 20d58'40.00"S)
Center      (-179.5111111, -20.4888889) (179d30'40.00"W, 20d29'20.00"S)
Band 1 Block=11x11 Type=Int16, ColorInterp=Gray
  NoData Value=0

$ gdal_translate -tr 0.8888888888888888 0.88888888888888888 input_test.tif output_test.tif 
Input file size is 375, 375
0...10...20...30...40...50...60...70...80...90...100 - done.

$ gdalinfo output_test.tif                                                                
Driver: GTiff/GeoTIFF
Files: output_test.tif
Size is 1, 1
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-180.000000000000000,-20.000000000137490)
Pixel Size = (0.888888888888889,-0.888888888888889)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-180.0000000, -20.0000000) (180d 0' 0.00"W, 20d 0' 0.00"S)
Lower Left  (-180.0000000, -20.8888889) (180d 0' 0.00"W, 20d53'20.00"S)
Upper Right (-179.1111111, -20.0000000) (179d 6'40.00"W, 20d 0' 0.00"S)
Lower Right (-179.1111111, -20.8888889) (179d 6'40.00"W, 20d53'20.00"S)
Center      (-179.5555556, -20.4444444) (179d33'20.00"W, 20d26'40.00"S)
Band 1 Block=1x1 Type=Int16, ColorInterp=Gray
  NoData Value=0

-------------- next part --------------
A non-text attachment was scrubbed...
Name: testwarpsmall.py
Type: application/octet-stream
Size: 277 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180213/c6270dcc/attachment.obj>
-------------- next part --------------

-- 

-------------------------------------------------------
Christoph Paulik
VanderSat // Remote Sensing Scientists
Wilhelminastraat 43a, 2011 VK, Haarlem (NL), The Netherlands
W: www.vandersat.com
PGP: 8CFC D7DF 2867 B2DC 749B  1B0A 6E3B A262 5186 A0AC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 832 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180213/c6270dcc/attachment.sig>

From even.rouault at spatialys.com  Tue Feb 13 09:06:37 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Feb 2018 18:06:37 +0100
Subject: [gdal-dev] Python Interfaces to gdal warp and gdal translate
	behave differently than command line
In-Reply-To: <87bmgs96u9.fsf@vandersat.com>
References: <CAJ38ub+QG4e=GB0uh4=YEoEaNirgJAPrFWoS-K=0Z7EYv3YT6Q@mail.gmail.com>
 <87tvv9q54q.fsf@vandersat.com> <87bmgs96u9.fsf@vandersat.com>
Message-ID: <19737972.XJBIbZry1l@even-i700>

On mardi 13 février 2018 17:45:18 CET Christoph Paulik wrote:
> Hi,
> 
> In my original email I had a small (300KB) test geotiff attached but
> this was rejected by the mailing list. So here the original email again:
> 
> If we warp or translate the a GeoTIFF using the Python API
> in the attached python file then the output pixel precision is
> truncated (even when 15 digtis precison is specified) depending on the
> number of 0 preceding the first non-zero number after the first digit (see
> testwarpsmall.py).
> The system calls work as expected though.
> 
> Tested on gdal 2.2.3.
> 
> Example:
> 1) if                    xres = 0.88888888888889
>        ouput Pixel_size = 0.88888888889000
> 2) if                    xres = 0.08888888888889
>        ouput Pixel_size = 0.08888888888900
> 3) if                    xres = 0.00888888888889
>        ouput Pixel_size = 0.00888888888890
> 4) if                    xres = 0.00088888888889
>        ouput Pixel_size = 0.00088888888889
> 

Christoph,

The issue was that the numeric arguments were converted to string with str(x) which doesn't 
use enough precision. I've fixed this in trunk per
https://trac.osgeo.org/gdal/changeset/41472

You could workaround the issue by using:

gdal.Translate('out.tif', 'src.tif', options = '-tr 0.0888888888888888888 
0.0888888888888888888 -projwin -180.0 -20.0 -179 -21')

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180213/a9a0588d/attachment.html>

From palmerjnz at gmail.com  Tue Feb 13 10:42:13 2018
From: palmerjnz at gmail.com (Jeremy Palmer)
Date: Wed, 14 Feb 2018 07:42:13 +1300
Subject: [gdal-dev] Vector Tiles in OGR
In-Reply-To: <6291607.nJCnUMbdA3@even-i700>
References: <05ac1644a160475f984944f51d632e63@C119S212VM042.msvyvi.vaha.local>
 <6291607.nJCnUMbdA3@even-i700>
Message-ID: <CAA5WJY=3dCZ+b_71qBp_W+8r2vgFuY8G4xYkE=5i2_z+XWjOzw@mail.gmail.com>

>
>
>
>
> OK, I've added a TILING_SCHEME dataset creation option to define such as
> custom tiling scheme. See
>
> https://trac.osgeo.org/gdal/changeset/41470#file1
>
> for how to use it and how it impacts metadata.json
>
>
>
> Note that this is only implement for file tilesets and not for MBTILES
> output. That could be extended for MBTILES, but I was a bit hesitant to do
> so to avoid incompatibilities with other tools.
>
> (Actually by using mb-util you could create a .mbtiles from the file
> tileset)
>
>
>
> Even
>
>
Great news. Is it possible to provide a user defined list of resolutions
for the custom scheme which are not power of two? e.g like
https://www.linz.govt.nz/data/linz-data-service/guides-and-documentation/nztm2000-map-tile-service-schema


Cheers
Jeremy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180214/80459b9f/attachment.html>

From even.rouault at spatialys.com  Tue Feb 13 11:00:12 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 13 Feb 2018 20:00:12 +0100
Subject: [gdal-dev] Vector Tiles in OGR
In-Reply-To: <CAA5WJY=3dCZ+b_71qBp_W+8r2vgFuY8G4xYkE=5i2_z+XWjOzw@mail.gmail.com>
References: <05ac1644a160475f984944f51d632e63@C119S212VM042.msvyvi.vaha.local>
 <6291607.nJCnUMbdA3@even-i700>
 <CAA5WJY=3dCZ+b_71qBp_W+8r2vgFuY8G4xYkE=5i2_z+XWjOzw@mail.gmail.com>
Message-ID: <2176750.F9GWGv0OQv@even-i700>

> 
> Great news. Is it possible to provide a user defined list of 
resolutions
> for the custom scheme which are not power of two? 

Not implemented, but could potentially be done

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180213/2f053d3c/attachment-0001.html>

From palmerjnz at gmail.com  Tue Feb 13 11:17:50 2018
From: palmerjnz at gmail.com (Jeremy Palmer)
Date: Wed, 14 Feb 2018 08:17:50 +1300
Subject: [gdal-dev] Vector Tiles in OGR
In-Reply-To: <2176750.F9GWGv0OQv@even-i700>
References: <05ac1644a160475f984944f51d632e63@C119S212VM042.msvyvi.vaha.local>
 <6291607.nJCnUMbdA3@even-i700>
 <CAA5WJY=3dCZ+b_71qBp_W+8r2vgFuY8G4xYkE=5i2_z+XWjOzw@mail.gmail.com>
 <2176750.F9GWGv0OQv@even-i700>
Message-ID: <CAA5WJYnnH4fWN248u_E+uciMcXUYt4wR6bG2tbhuV0p3ssA7VQ@mail.gmail.com>

Ok thanks.

On Wed, Feb 14, 2018 at 8:00 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> >
>
> > Great news. Is it possible to provide a user defined list of resolutions
>
> > for the custom scheme which are not power of two?
>
>
>
> Not implemented, but could potentially be done
>
>
>
> Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180214/5f1c1e84/attachment.html>

From robertofig85 at gmail.com  Tue Feb 13 11:18:35 2018
From: robertofig85 at gmail.com (Roberto Ribeiro)
Date: Tue, 13 Feb 2018 17:18:35 -0200
Subject: [gdal-dev] Installing multiple GDAL versions in Windows?
Message-ID: <CANTZQ+yJw3gM52s5vaffs+yvLnb5FhLnVxBT_5zfPiuVp_dOWw@mail.gmail.com>

How would I go about having multiple GDAL installs in a Windows
environment? Specifically regarding setting the system variables GDAL_DATA
and GDAL_DRIVER_PATH.

Even if I append the value with "gdal_1_path;gdal_2_path;gdal_3_path" etc.,
only the first one is recognized.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180213/d60284b1/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Feb 13 12:13:12 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 13 Feb 2018 13:13:12 -0700 (MST)
Subject: [gdal-dev] Installing multiple GDAL versions in Windows?
In-Reply-To: <CANTZQ+yJw3gM52s5vaffs+yvLnb5FhLnVxBT_5zfPiuVp_dOWw@mail.gmail.com>
References: <CANTZQ+yJw3gM52s5vaffs+yvLnb5FhLnVxBT_5zfPiuVp_dOWw@mail.gmail.com>
Message-ID: <1518552792757-0.post@n6.nabble.com>

Roberto Ribeiro wrote
> How would I go about having multiple GDAL installs in a Windows
> environment? Specifically regarding setting the system variables GDAL_DATA
> and GDAL_DRIVER_PATH.
> 
> Even if I append the value with "gdal_1_path;gdal_2_path;gdal_3_path"
> etc.,
> only the first one is recognized.

Hi,

Install different GDAL versions by unzipping the packages from
gisinternals.com into their own directories and start the version you'd like
with the sdkshell.bat from the main directory.

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Wed Feb 14 07:10:57 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 14 Feb 2018 15:10:57 +0000
Subject: [gdal-dev] Check validity of geometries before writing them into
	vector tiles?
Message-ID: <764a68e60cb8492d9b07a0cec7ee3d0e@C119S212VM042.msvyvi.vaha.local>

Hi,

I admit that my test was somewhat lunatic but I took some random dataset from Finland with 68101 polygons and converted data into MVT with default settings which means that minzoom was 0.  As a result 12196 of the source polygons were written into the 0-level protobuf tile (in EPSG:3067 gridset) and none of the polygons is valid. Most polygons have too few points and those which have enough points have self-intersections.

Perhaps there should be some sort of geometry validator in the writer chain?

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180214/c0df149c/attachment.html>

From even.rouault at spatialys.com  Wed Feb 14 07:15:22 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Feb 2018 16:15:22 +0100
Subject: [gdal-dev] ZSTD compression for GeoTIFF
Message-ID: <3115880.7obzuo6CRD@even-i700>

Hi,

I've just pushed in libtiff upstream, and its internal copy in GDAL, support for zstandard/
zstd compression [1], and the appropriate changes in the GDAL GeoTIFF driver.
This requires building libtiff (or GDAL with its internal libtiff copy) against libzstd >= 1.0
My findings are that single-core compression is at least twice faster with zstd than with 
deflate, for equivalent or better compression rate. Decompression is a bit faster, but not 
that significantly.

So a compelling use case for zstd is potentially in complex processing chains where you 
have many intermediate internal products. At that point of adoption, I'd not recommend it 
for consumer-facing products.

Even

[1] https://github.com/facebook/zstd

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180214/43f54da8/attachment.html>

From even.rouault at spatialys.com  Wed Feb 14 07:34:19 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Feb 2018 16:34:19 +0100
Subject: [gdal-dev] Check validity of geometries before writing them
	into vector tiles?
In-Reply-To: <764a68e60cb8492d9b07a0cec7ee3d0e@C119S212VM042.msvyvi.vaha.local>
References: <764a68e60cb8492d9b07a0cec7ee3d0e@C119S212VM042.msvyvi.vaha.local>
Message-ID: <3794320.f8rFFUcB6E@even-i700>

On mercredi 14 février 2018 15:10:57 CET Rahkonen Jukka (MML) wrote:
> Hi,
> 
> I admit that my test was somewhat lunatic but I took some random dataset
> from Finland with 68101 polygons and converted data into MVT with default
> settings which means that minzoom was 0.  As a result 12196 of the source
> polygons were written into the 0-level protobuf tile (in EPSG:3067 gridset)
> and none of the polygons is valid. Most polygons have too few points and
> those which have enough points have self-intersections.
> 
> Perhaps there should be some sort of geometry validator in the writer chain?

There is some geometry validation, but it is not white&black. In my tests, with the 
ne_10m_admin_1_states_provinces dataset, when I initially implemented very strict 
geometry validation, a number of polygons were completely dropped, so I ended up 
implementing a more relaxed logic: for an outer ring, it after conversion to integer 
coordinates, it is not valid (with GEOSIsValid() testing), then do : buffer( tolerance) followed 
by bufffer(-tolerance) followed by simplifypreservetopology(tolerance) (where tolerance is 2 
* tile_dim_in_crs_unit / EXTENT) followed by a new round of integer coordinates conversion. 
If that's still not valid, keep it.
For an inner ring, drop it if when included in the outer ring, the resulting polygon is not valid

Perhaps you could play with the SIMPLIFICATION and SIMPLIFICATION_MAX_ZOOM options ?

Perhaps you should also use an already simplified layer for the lowest zoom level (see the 
CONF option)

Are you sure you get polygons with less than 4 points ? Normally they should be discarded.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180214/f7d5b601/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Feb 14 07:53:38 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 14 Feb 2018 15:53:38 +0000
Subject: [gdal-dev] Check validity of geometries before writing them
 into vector tiles?
Message-ID: <e77fdd4cf30e432cbe568a0622c0634f@C119S212VM042.msvyvi.vaha.local>

Even Rouault wrote:

> Perhaps you could play with the SIMPLIFICATION and SIMPLIFICATION_MAX_ZOOM options ?
Sure, as I wrote I admit that my test did not make much sense, but trying things before reading the manual sometimes reveals something interesting.  

> Perhaps you should also use an already simplified layer for the lowest zoom level (see the CONF option)
For sure yes, coordinate space of 4096x4096 is far too small for this dataset.

> Are you sure you get polygons with less than 4 points ? Normally they should be discarded.
Quite sure yes by looking at what the ST_IsValidReason from the SQLite dialect prints 
ST_IsValidReason(geometry) (String) = Invalid: Toxic Geometry ... too few points

There are other variants of invalid geometries and actually a few valid as well. Here is one example with an invalid component

  MULTIPOLYGON (((516384 6815744,516384 6815744,532768 6815744,516384 6815744)),
((516384 6815744,516384 6815744)),((516384 6815744,516384 6815744)))

My zero tile is here http://www.latuviitta.org/downloads/0.pbf

-Jukka Rahkonen-

From schwehr at gmail.com  Wed Feb 14 11:00:01 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 14 Feb 2018 11:00:01 -0800
Subject: [gdal-dev] Creating Cloud Optimized GeoTIFFs
In-Reply-To: <CACmBxys3QFMqpjHAgf7m+G0A00O9eqVB2ivVXq19waiNwsgO-A@mail.gmail.com>
References: <CACkcqcUzFPHeZHfO3-d2f6aL4xaxMbTTd6LCf2b+2g_0A=7H8w@mail.gmail.com>
 <37364207.nlYVYg3d7h@even-i700>
 <CACmBxyt6jXDxqHsTddh7tgxzHPQ5UmGNXTx2Fkdr6ZJK1BtCsw@mail.gmail.com>
 <3762097.fEcczomedL@even-i700>
 <CACmBxys3QFMqpjHAgf7m+G0A00O9eqVB2ivVXq19waiNwsgO-A@mail.gmail.com>
Message-ID: <CACmBxyuGR8JCdPcZvbgF4V7_MNYxa9oD2SErn7jzh2OdoUuqBg@mail.gmail.com>

(working from pretty close to head...)

A follow up question on how to create cogeo files...

I appear to need to do additional work to set BLOCK_OFFSET_?_?.  How do I
go about this?

I'm trying to create a cogeo without gdal_translate in java by using create
and createcopy like this:

https://gist.github.com/schwehr/39680bec7fd8e3e3f840122ea3bafc65

However,  I get this failure when checking the result:

validate_cloud_optimized_geotiff.py cogeo.tif
Traceback (most recent call last):
  File "validate_cloud_optimized_geotiff.py", line 144, in validate
    data_offset = int(main_band.GetMetadataItem('BLOCK_OFFSET_0_0', 'TIFF'))
TypeError: int() argument must be a string, a bytes-like object or a
number, not 'NoneType

If I use gdal_translate on the result form the java, it validates.

gdal_translate -co COMPRESS=LZW -co TILED=YES -co COPY_SRC_OVERVIEWS=YES
cogeo.tif cogeo2.tif
validate_cloud_optimized_geotiff.py cogeo2.tif
cogeo2.tif is a valid cloud optimized GeoTIFF

gdalinfo -mdd all -listmdd -mm cogeo.tif > cogeo.tif.info
gdalinfo -mdd all -listmdd -mm cogeo2.tif > cogeo2.tif.info

diff -u cogeo{,2}.tif.info
--- cogeo.tif.info 2018-02-14 10:54:27.050423325 -0800
+++ cogeo2.tif.info 2018-02-14 10:54:41.862227514 -0800
@@ -1,5 +1,5 @@
 Driver: GTiff/GeoTIFF
-Files: cogeo.tif
+Files: cogeo2.tif
 Size is 743, 372
 Coordinate System is:
 GEOGCS["WGS 84",
@@ -19,8 +19,8 @@
 Metadata:
   AREA_OR_POINT=Area
 Metadata (DERIVED_SUBDATASETS):
-  DERIVED_SUBDATASET_1_NAME=DERIVED_SUBDATASET:LOGAMPLITUDE:cogeo.tif
-  DERIVED_SUBDATASET_1_DESC=log10 of amplitude of input bands from
cogeo.tif
+  DERIVED_SUBDATASET_1_NAME=DERIVED_SUBDATASET:LOGAMPLITUDE:cogeo2.tif
+  DERIVED_SUBDATASET_1_DESC=log10 of amplitude of input bands from
cogeo2.tif
 Image Structure Metadata:
   COMPRESSION=LZW
   INTERLEAVE=BAND

gdalinfo -mdd all -listmdd -mm cogeo.tif
Driver: GTiff/GeoTIFF
Files: cogeo.tif
Size is 743, 372
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (116.349975262217256,39.975075059082918)
Pixel Size = (0.000134747292618,-0.000134747292618)
Metadata domains:
  IMAGE_STRUCTURE
  (default)
  DERIVED_SUBDATASETS
Metadata:
  AREA_OR_POINT=Area
Metadata (DERIVED_SUBDATASETS):
  DERIVED_SUBDATASET_1_NAME=DERIVED_SUBDATASET:LOGAMPLITUDE:cogeo.tif
  DERIVED_SUBDATASET_1_DESC=log10 of amplitude of input bands from cogeo.tif
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( 116.3499753,  39.9750751) (116d20'59.91"E, 39d58'30.27"N)
Lower Left  ( 116.3499753,  39.9249491) (116d20'59.91"E, 39d55'29.82"N)
Upper Right ( 116.4500925,  39.9750751) (116d27' 0.33"E, 39d58'30.27"N)
Lower Right ( 116.4500925,  39.9249491) (116d27' 0.33"E, 39d55'29.82"N)
Center      ( 116.4000339,  39.9500121) (116d24' 0.12"E, 39d57' 0.04"N)
Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
  Description = B5
    Computed Min/Max=0.000,0.000
  Overviews: 372x186, 186x93, 93x47, 47x24, 24x12


On Sun, Dec 10, 2017 at 5:34 PM, Kurt Schwehr <schwehr at gmail.com> wrote:

> Thanks Even for the feedback.  There have be a few offline discussions
> going on and Even added some notes to the document on Trac:
>
> https://trac.osgeo.org/gdal/wiki/CloudOptimizedGeoTIFF?
> action=diff&version=11
> <https://www.google.com/url?sa=D&q=https%3A%2F%2Ftrac.osgeo.org%2Fgdal%2Fwiki%2FCloudOptimizedGeoTIFF%3Faction%3Ddiff%26version%3D11>
>
> This stems from me switching Earth Engine from LZW to DEFLATE when
> exporting GeoTIFFs (and I added tiling).  We have a report from a user that
> ENVI 5.4 (and 5.1) Classic can't read the resulting images but QGIS &
> ArcGIS can.  I'm reverting exports back to LZW compression.
>
> On Wed, Nov 15, 2017 at 6:02 AM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> On mardi 14 novembre 2017 14:20:58 CET Kurt Schwehr wrote:
>>
>> > Hi Even,
>>
>> >
>>
>> > I have some follow up questions on Cloud Optimized GeoTIFFs:
>>
>>
>>
>> The main constraint of C.O.G is that all the IFD definitions are at the
>> beginning of the file, to avoid seeking at various points in it. Other
>> parameters are pretty much unspecified.
>>
>>
>>
>> >
>>
>> > * Is there a preferred/better INTERLEAVE if there is more than one band?
>>
>>
>>
>> Depends on access patterns. If as soon as you process one pixel you need
>> to access the value for all bands, then INTERLEAVE=PIXEL is better, and it
>> will result in smaller sizes of StripOffsets/TileOffsets and
>> StripByteCount/TileByteCount arrays
>>
>>
>>
>> > * Is there a preferred tile blocksize? You have 512 in your examples.
>> Are
>>
>> > there any major trade offs between using 128, 256, 512, or 1024 for x
>> and y
>>
>> > block sizes?
>>
>>
>>
>> Too small blocksizes will result in larger ...Offsets and ...ByteCount
>> arrays.
>>
>>
>>
>> > * Should tiles be square? Does it matter?
>>
>>
>>
>> No
>>
>>
>>
>> > * Is it better to skip tiling for small images? If so, at what threshold
>>
>> > do you think the switch should happen? 1024?
>>
>>
>>
>> I'm not sure if that has an importance. But it is not wise to have an
>> image whose one dimension is larger than the corresponding block dimension
>> (as blocks are not truncated)
>>
>>
>>
>> > * Is DEFLATE preferred for compression type over LZW for lossless
>>
>> > compression?
>>
>>
>>
>> Unspecified. DEFLATE is more CPU intensive, but if network times are the
>> limiting factor, it is worth as more eficient
>>
>>
>>
>> > * If the writer isn't constrained by compute power, are there preferred
>>
>> > ZLEVEL and PREDICTOR values? Is there a time cost for decompressing
>>
>> > ZLEVEL=9 over 1?
>>
>>
>>
>> PREDICTOR has neglectable CPU inflence (just a add/diff on integer
>> values), but will not always result in smaller file sizes. Depends on the
>> dataset
>>
>>
>>
>> If I trust https://github.com/inikep/lzbench , the time cost for
>> decompression for Deflate/Zlib doesn't seem to vary much with ZLEVEL. So
>> the higher the better.
>>
>> I don't know for LZW.
>>
>>
>>
>> >
>>
>> > I'm a little confused by this code from validate_cloud_optimized_geoti
>> ff.py:
>>
>> >
>>
>> > if main_band.XSize >= 512 or main_band.YSize >= 512:
>>
>> > if check_tiled:
>>
>> > block_size = main_band.GetBlockSize()
>>
>> > if block_size[0] == main_band.XSize and block_size[0] > 1024:
>>
>> > errors += ["The file is greater than 512xH or Wx512," +
>>
>> > "but is not tiled"]
>>
>> >
>>
>> > Will the above correctly fail an image that is (say) 256x2048 if it is
>> not
>>
>> > tiled?
>>
>>
>>
>> No, it will pass this test. Since in that case block_size[0] == xsize ==
>> 256.
>>
>> But for such a narrow image, it should probably warn if it is not tiled,
>> as the number of strips, if letting to default strip height, will be larger
>> than really necessary.
>>
>>
>>
>> Even
>>
>>
>>
>> --
>>
>> Spatialys - Geospatial professional services
>>
>> http://www.spatialys.com
>>
>
>
>
> --
> --
> http://schwehr.org
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180214/1ee8c61a/attachment-0001.html>

From even.rouault at spatialys.com  Wed Feb 14 11:28:07 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 14 Feb 2018 20:28:07 +0100
Subject: [gdal-dev] Creating Cloud Optimized GeoTIFFs
In-Reply-To: <CACmBxyuGR8JCdPcZvbgF4V7_MNYxa9oD2SErn7jzh2OdoUuqBg@mail.gmail.com>
References: <CACkcqcUzFPHeZHfO3-d2f6aL4xaxMbTTd6LCf2b+2g_0A=7H8w@mail.gmail.com>
 <CACmBxys3QFMqpjHAgf7m+G0A00O9eqVB2ivVXq19waiNwsgO-A@mail.gmail.com>
 <CACmBxyuGR8JCdPcZvbgF4V7_MNYxa9oD2SErn7jzh2OdoUuqBg@mail.gmail.com>
Message-ID: <9220510.SxtU89vhLF@even-i700>

On mercredi 14 février 2018 11:00:01 CET Kurt Schwehr wrote:
> (working from pretty close to head...)
> 
> A follow up question on how to create cogeo files...
> 
> I appear to need to do additional work to set BLOCK_OFFSET_?_?.  How do I
> go about this?
> 
> I'm trying to create a cogeo without gdal_translate in java by using create
> and createcopy like this:
> 
> https://gist.github.com/schwehr/39680bec7fd8e3e3f840122ea3bafc65

I guess the issue is the one mentinoned in
http://gdal.org/java/org/gdal/gdal/Driver.html#CreateCopy-java.lang.String-org.gdal.gdal.Dataset-int-java.util.Vector-org.gdal.gdal.ProgressCallback-

"""
At the end of dataset manipulation, the delete() method *must* be called on the returned dataset otherwise data might not be properly flushed to the disk.
"""

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180214/5fa252e0/attachment.html>

From schwehr at gmail.com  Wed Feb 14 11:35:58 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 14 Feb 2018 11:35:58 -0800
Subject: [gdal-dev] Creating Cloud Optimized GeoTIFFs
In-Reply-To: <9220510.SxtU89vhLF@even-i700>
References: <CACkcqcUzFPHeZHfO3-d2f6aL4xaxMbTTd6LCf2b+2g_0A=7H8w@mail.gmail.com>
 <CACmBxys3QFMqpjHAgf7m+G0A00O9eqVB2ivVXq19waiNwsgO-A@mail.gmail.com>
 <CACmBxyuGR8JCdPcZvbgF4V7_MNYxa9oD2SErn7jzh2OdoUuqBg@mail.gmail.com>
 <9220510.SxtU89vhLF@even-i700>
Message-ID: <CACmBxyt=O7nSmfMrtrsByQXn_qF42-imkkT7kG9YbDwQ+To5qw@mail.gmail.com>

Added the delete and validate works now.  Thanks!

On Wed, Feb 14, 2018 at 11:28 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> On mercredi 14 février 2018 11:00:01 CET Kurt Schwehr wrote:
>
> > (working from pretty close to head...)
>
> >
>
> > A follow up question on how to create cogeo files...
>
> >
>
> > I appear to need to do additional work to set BLOCK_OFFSET_?_?. How do I
>
> > go about this?
>
> >
>
> > I'm trying to create a cogeo without gdal_translate in java by using
> create
>
> > and createcopy like this:
>
> >
>
> > https://gist.github.com/schwehr/39680bec7fd8e3e3f840122ea3bafc65
>
>
>
> I guess the issue is the one mentinoned in
>
> http://gdal.org/java/org/gdal/gdal/Driver.html#CreateCopy-
> java.lang.String-org.gdal.gdal.Dataset-int-java.util.Vector-org.gdal.gdal.
> ProgressCallback-
>
>
>
> """
>
> At the end of dataset manipulation, the delete() method must be called on
> the returned dataset otherwise data might not be properly flushed to the
> disk.
>
> """
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180214/4674739b/attachment.html>

From hellik at web.de  Wed Feb 14 12:00:08 2018
From: hellik at web.de (Helmut Kudrnovsky)
Date: Wed, 14 Feb 2018 13:00:08 -0700 (MST)
Subject: [gdal-dev] ZSTD compression for GeoTIFF
In-Reply-To: <3115880.7obzuo6CRD@even-i700>
References: <3115880.7obzuo6CRD@even-i700>
Message-ID: <1518638408531-0.post@n6.nabble.com>

Even Rouault-2 wrote
> Hi,
> 
> I've just pushed in libtiff upstream, and its internal copy in GDAL,
> support for zstandard/
> zstd compression [1], and the appropriate changes in the GDAL GeoTIFF
> driver.
> This requires building libtiff (or GDAL with its internal libtiff copy)
> against libzstd >= 1.0
> My findings are that single-core compression is at least twice faster with
> zstd than with 
> deflate, for equivalent or better compression rate. Decompression is a bit
> faster, but not 
> that significantly.
> 
> So a compelling use case for zstd is potentially in complex processing
> chains where you 
> have many intermediate internal products. At that point of adoption, I'd
> not recommend it 
> for consumer-facing products.
> 
> Even
> 
> [1] https://github.com/facebook/zstd

 fyi

GRASS trunk has also already implemented ztsd as a raster compression
option.(1)

And it's available for testing already in the OSGeo4W-winGRASS trunk daily
builds.


(1) https://grass.osgeo.org/grass75/manuals/r.compress.html



-----
best regards
Helmut
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From flippmoke at gmail.com  Wed Feb 14 12:04:19 2018
From: flippmoke at gmail.com (Blake Thompson)
Date: Wed, 14 Feb 2018 15:04:19 -0500
Subject: [gdal-dev] Check validity of geometries before writing them
 into vector tiles?
In-Reply-To: <e77fdd4cf30e432cbe568a0622c0634f@C119S212VM042.msvyvi.vaha.local>
References: <e77fdd4cf30e432cbe568a0622c0634f@C119S212VM042.msvyvi.vaha.local>
Message-ID: <CAPxHBh_pVbWZ4pxoM+XtTdG+A7KxkJ22Pc67PhbQzaSiJuZy4Q@mail.gmail.com>

All,

Geometry validity with polygons is really hard. The only solution at Mapbox
we found to fix this properly for Vector Tiles that we create was to modify
an existing algorithm to solve all the potential problems of geometry
validity. The result of this is https://github.com/mapbox/wagyu/ which we
use in our Vector Tile creation scripts now. Unfortunately it doesn't have
great performance when using extremely high numbers of points in polygons.
However, for vector tiles this typically should not be needed if
simplification is done prior to VT creation. If there is supported needed
around this problem I am more then willing to lend my expertise.

Thanks,

Blake Thompson

On Wed, Feb 14, 2018 at 10:53 AM, Rahkonen Jukka (MML) <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Even Rouault wrote:
>
> > Perhaps you could play with the SIMPLIFICATION and
> SIMPLIFICATION_MAX_ZOOM options ?
> Sure, as I wrote I admit that my test did not make much sense, but trying
> things before reading the manual sometimes reveals something interesting.
>
> > Perhaps you should also use an already simplified layer for the lowest
> zoom level (see the CONF option)
> For sure yes, coordinate space of 4096x4096 is far too small for this
> dataset.
>
> > Are you sure you get polygons with less than 4 points ? Normally they
> should be discarded.
> Quite sure yes by looking at what the ST_IsValidReason from the SQLite
> dialect prints
> ST_IsValidReason(geometry) (String) = Invalid: Toxic Geometry ... too few
> points
>
> There are other variants of invalid geometries and actually a few valid as
> well. Here is one example with an invalid component
>
>   MULTIPOLYGON (((516384 6815744,516384 6815744,532768 6815744,516384
> 6815744)),
> ((516384 6815744,516384 6815744)),((516384 6815744,516384 6815744)))
>
> My zero tile is here http://www.latuviitta.org/downloads/0.pbf
>
> -Jukka Rahkonen-
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180214/b063c40e/attachment.html>

From idan at miara.com  Thu Feb 15 07:35:11 2018
From: idan at miara.com (Idan Miara)
Date: Thu, 15 Feb 2018 17:35:11 +0200
Subject: [gdal-dev] gdal2cesium for python3
Message-ID: <CAEDrt39YkLVY+1mOY2ocA_SO+DerXtr=+922ajo+7Nwo8w8gTQ@mail.gmail.com>

Hi,

I'm trying to update gdal2cesium.py to use Python3 (using latest gdal from
QGIS3)
I made the following changes:
I ran 2to3
changed tabs to spaces,

Now it runs, but it gives the following error:

  File "gdal2cesium.py", line 969, in process_tile
    data = ds.ReadRaster(xoff=rx, yoff=ry, xsize=rxsize, ysize=rysize,
buf_xsize=wxsize, buf_ysize=wysize, band_list=list(range(1,
self.dataBandsCount + 1)))
  File
"C:\PROGRA~1\QGIS2~1.99\apps\Python36\lib\site-packages\osgeo\gdal.py",
line 1983, in ReadRaster
    resample_alg, callback, callback_data )
TypeError: Invalid Parameter


I'm not sure why do I get TypeError, as these parameters get their default
values:

resample_alg = GRIORA_NearestNeighbour,
callback = None,
callback_data = None):
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180215/30d5fcfb/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal2cesium.py
Type: application/octet-stream
Size: 47526 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180215/30d5fcfb/attachment-0001.obj>

From even.rouault at spatialys.com  Thu Feb 15 09:29:29 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 15 Feb 2018 18:29:29 +0100
Subject: [gdal-dev] Check validity of geometries before writing them
	into vector tiles?
In-Reply-To: <e77fdd4cf30e432cbe568a0622c0634f@C119S212VM042.msvyvi.vaha.local>
References: <e77fdd4cf30e432cbe568a0622c0634f@C119S212VM042.msvyvi.vaha.local>
Message-ID: <1656734.2Vj8qZb6hF@even-i700>

On mercredi 14 février 2018 15:53:38 CET Rahkonen Jukka (MML) wrote:
> Even Rouault wrote:
> > Perhaps you could play with the SIMPLIFICATION and SIMPLIFICATION_MAX_ZOOM
> > options ?
> Sure, as I wrote I admit that my test did not make much sense, but trying
> things before reading the manual sometimes reveals something interesting.  
> > Perhaps you should also use an already simplified layer for the lowest
> > zoom level (see the CONF option)
> For sure yes, coordinate space of 4096x4096 is far too small for this
> dataset.
> > Are you sure you get polygons with less than 4 points ? Normally they
> > should be discarded.
> Quite sure yes by looking at what the ST_IsValidReason from the SQLite
> dialect prints  ST_IsValidReason(geometry) (String) = Invalid: Toxic
> Geometry ... too few points
> 
> There are other variants of invalid geometries and actually a few valid as
> well. Here is one example with an invalid component
> 
>   MULTIPOLYGON (((516384 6815744,516384 6815744,532768 6815744,516384
> 6815744)), ((516384 6815744,516384 6815744)),((516384 6815744,516384
> 6815744)))
> 
> My zero tile is here http://www.latuviitta.org/downloads/0.pbf

OK, I reproduced the issue with Jukka's provided input dataset. The issue was that for zoom 
level 0 the maximum tile size limit of 500 KB was reached, and the algorithm that reduces 
coordinate precision in the hope of decreasing the tile size didn't validate geometries as well 
as the normal code path. Now fixed, for most cases. The remaining invalid cases are validity 
issues specifici of multipolygons: each polygon should be valid, but duplicate rings / 
intersecting polygons might still appear. This could proably be fixed by unioning the polygons 
and re-encoding the resulting polygon.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180215/d008eea1/attachment.html>

From juliermeopensourcedeveloper at gmail.com  Fri Feb 16 05:59:50 2018
From: juliermeopensourcedeveloper at gmail.com (Julierme Pinheiro)
Date: Fri, 16 Feb 2018 11:59:50 -0200
Subject: [gdal-dev] Gdal WMTS configuration
Message-ID: <CAKTKyJ+xEhgdZDXOxc+uz9JSbaTNQ_TRGg1p_=3Ea3sUEn4s4w@mail.gmail.com>

Hi all,

I am creating a gdal wmts xml file for the tile layers in geoserver using
the following gdal function:

 gdal_translate ""'WMTS:
http://localhost:8080/geoserver/gwc/service/wmts?REQUEST=GetCapabilities,layer=
'$gslayer""
/home/julierme/Desktop/amazonia_sar/amapa/IMG/covmingrad/amapa_north/processadas_gs_xml/$
filenamenoextension.xml -of WMTS

This one output file:

<GDAL_WMTS>
  <GetCapabilitiesUrl>
http://localhost:8080/geoserver/gwc/service/wmts?REQUEST=GetCapabilities
</GetCapabilitiesUrl>

<Layer>amazoniasar_amapanorth_covmingrad:CSKS1_20161120205231_CSKS2_20170216205201_3_CovMinGrad_rgb</Layer>
  <TileMatrixSet>EPSG:4326</TileMatrixSet>
  <InfoFormat>application/vnd.ogc.gml/3.1.1</InfoFormat>
  <DataWindow>
    <UpperLeftX>-51.55010461807251</UpperLeftX>
    <UpperLeftY>3.749183379113674</UpperLeftY>
    <LowerRightX>-51.04091674089432</LowerRightX>
    <LowerRightY>3.231662549078465</LowerRightY>
  </DataWindow>
  <BandsCount>4</BandsCount>
  <Cache />
  <UnsafeSSL>true</UnsafeSSL>
  <ZeroBlockHttpCodes>204,404</ZeroBlockHttpCodes>
  <ZeroBlockOnServerException>true</ZeroBlockOnServerException>
</GDAL_WMTS>

I am seeding the geoserver layers. In order to speed up QGIS rendering
layers, I wonder if I have to insert the GeoWebCache path in the xml file,
as this:
...
<Cache>
    <Path>/var/lib/tomcat7/webapps/geoserver/data/gwc/geowebcache.xml</Path>
 </Cache>

Does the insertion of GeoWebCache path help QGIS to render layers faster?

I am doing some tests, but I would like a feedback on that.

Thank you for your time in advance

Kind regards

Julierme
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180216/b256e757/attachment.html>

From gilpeleg at live.com  Sat Feb 17 00:12:13 2018
From: gilpeleg at live.com (Gil)
Date: Sat, 17 Feb 2018 08:12:13 +0000
Subject: [gdal-dev] Building pyramids with gdaladdo
Message-ID: <HE1PR0402MB3498603812AEF77755399524BACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>

Hey,

I got a gpkg file I converted from tiff using gdal_translate, it originally has level 17 tiles.
I'd like to build it's pyramids till I reach a level with only 1 tile, I tried using gdaladdo, and when I built it with 2-256 factors, I got a result that has level 18-11 where level 11 has two tiles.

I got two problems, I don't understand how I got level 18 after building pyramids upwards?
And I'd like to reach one tile, so I tried using 512, however I get an error asking me to use gpkg_zoom_other, I don't understand why, and I am not sure how to use it?
The error i'm getting is:
Warning 1: Use of overview factor 512 causes gpkg_zoom_other extension to be needed
ERROR 1: Could not find dataset corresponding to ov factor 512

Would appreciate some help routing me in the right direction.

Thanks!



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180217/99b4b34a/attachment.html>

From gilpeleg at live.com  Sat Feb 17 00:36:45 2018
From: gilpeleg at live.com (Gil)
Date: Sat, 17 Feb 2018 08:36:45 +0000
Subject: [gdal-dev] Building pyramids with gdaladdo
In-Reply-To: <00e501d3a7c8$39424ae0$abc6e0a0$@frogmouth.net>
References: <HE1PR0402MB3498603812AEF77755399524BACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>
 <00e501d3a7c8$39424ae0$abc6e0a0$@frogmouth.net>
Message-ID: <HE1PR0402MB34988841C7945C35EAD31F43BACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>

My tiff file is 19968x29952 which I understand when calculated to the 512 level goes un-even, is there anything I can do to go that extra level?
I am converting to JPEG, it works well, I don't understand how I am reaching level 18 when the original has 17.
Conversion is done like this:

gdal_translate.exe -co TILE_FORMAT=JPEG -co TILING_SCHEME=InspireCRS84Quad -co ZOOM_LEVEL_STRATEGY=LOWER -of GPKG C:\myfile.tif C:\myfile.gpkg
gdaladdo -oo TILE_FORMAT=JPEG C:\myfile.gpkg 2 4 8 16 32 64 128 254 512

I am going to display the geopackage with a custom web viewer, that works best when the upper level has only 1 tile.

Thanks.

On 17 February 2018 at 10:20, <bradh at frogmouth.net<mailto:bradh at frogmouth.net>> wrote:
Can you show exactly how you did the conversion and overviews, and the dimensions of the original TIFF file. Are you trying to create tiles in JPEG or PNG? If JPEG, possibly you need to fill your TIFF.

The part about gpkg_zoom_other is telling you that what you are asking for can’t be done without breaking the power-of-two zoom level constraint.  What do you intend to do with your geopackage? The extensions that make sense will depend on the consumers of the file.

Brad
From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>] On Behalf Of Gil
Sent: Saturday, 17 February 2018 7:12 PM
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] Building pyramids with gdaladdo

Hey,

I got a gpkg file I converted from tiff using gdal_translate, it originally has level 17 tiles.
I'd like to build it's pyramids till I reach a level with only 1 tile, I tried using gdaladdo, and when I built it with 2-256 factors, I got a result that has level 18-11 where level 11 has two tiles.

I got two problems, I don't understand how I got level 18 after building pyramids upwards?
And I'd like to reach one tile, so I tried using 512, however I get an error asking me to use gpkg_zoom_other, I don't understand why, and I am not sure how to use it?
The error i'm getting is:
Warning 1: Use of overview factor 512 causes gpkg_zoom_other extension to be needed
ERROR 1: Could not find dataset corresponding to ov factor 512

Would appreciate some help routing me in the right direction.

Thanks!




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180217/92c26b17/attachment.html>

From gilpeleg at live.com  Sat Feb 17 00:36:46 2018
From: gilpeleg at live.com (Gil)
Date: Sat, 17 Feb 2018 08:36:46 +0000
Subject: [gdal-dev] Building pyramids with gdaladdo
In-Reply-To: <00e501d3a7c8$39424ae0$abc6e0a0$@frogmouth.net>
References: <HE1PR0402MB3498603812AEF77755399524BACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>
 <00e501d3a7c8$39424ae0$abc6e0a0$@frogmouth.net>
Message-ID: <HE1PR0402MB349891833AD36F1D691149A5BACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>

My tiff file is 19968x29952 which I understand when calculated to the 512 level goes un-even, is there anything I can do to go that extra level?
I am converting to JPEG, it works well, I don't understand how I am reaching level 18 when the original has 17.
Conversion is done like this:

gdal_translate.exe -co TILE_FORMAT=JPEG -co TILING_SCHEME=InspireCRS84Quad -co ZOOM_LEVEL_STRATEGY=LOWER -of GPKG C:\myfile.tif C:\myfile.gpkg
gdaladdo -oo TILE_FORMAT=JPEG C:\myfile.gpkg 2 4 8 16 32 64 128 254 512

I am going to display the geopackage with a custom web viewer, that works best when the upper level has only 1 tile.

Thanks.

On 17 February 2018 at 10:20, <bradh at frogmouth.net<mailto:bradh at frogmouth.net>> wrote:
Can you show exactly how you did the conversion and overviews, and the dimensions of the original TIFF file. Are you trying to create tiles in JPEG or PNG? If JPEG, possibly you need to fill your TIFF.

The part about gpkg_zoom_other is telling you that what you are asking for can’t be done without breaking the power-of-two zoom level constraint.  What do you intend to do with your geopackage? The extensions that make sense will depend on the consumers of the file.

Brad
From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>] On Behalf Of Gil
Sent: Saturday, 17 February 2018 7:12 PM
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] Building pyramids with gdaladdo

Hey,

I got a gpkg file I converted from tiff using gdal_translate, it originally has level 17 tiles.
I'd like to build it's pyramids till I reach a level with only 1 tile, I tried using gdaladdo, and when I built it with 2-256 factors, I got a result that has level 18-11 where level 11 has two tiles.

I got two problems, I don't understand how I got level 18 after building pyramids upwards?
And I'd like to reach one tile, so I tried using 512, however I get an error asking me to use gpkg_zoom_other, I don't understand why, and I am not sure how to use it?
The error i'm getting is:
Warning 1: Use of overview factor 512 causes gpkg_zoom_other extension to be needed
ERROR 1: Could not find dataset corresponding to ov factor 512

Would appreciate some help routing me in the right direction.

Thanks!




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180217/e00f78d3/attachment-0001.html>

From bradh at frogmouth.net  Sat Feb 17 00:20:50 2018
From: bradh at frogmouth.net (bradh at frogmouth.net)
Date: Sat, 17 Feb 2018 19:20:50 +1100
Subject: [gdal-dev] Building pyramids with gdaladdo
In-Reply-To: <HE1PR0402MB3498603812AEF77755399524BACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>
References: <HE1PR0402MB3498603812AEF77755399524BACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>
Message-ID: <00e501d3a7c8$39424ae0$abc6e0a0$@frogmouth.net>

Can you show exactly how you did the conversion and overviews, and the dimensions of the original TIFF file. Are you trying to create tiles in JPEG or PNG? If JPEG, possibly you need to fill your TIFF.

 

The part about gpkg_zoom_other is telling you that what you are asking for can’t be done without breaking the power-of-two zoom level constraint.  What do you intend to do with your geopackage? The extensions that make sense will depend on the consumers of the file.

 

Brad

From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Gil
Sent: Saturday, 17 February 2018 7:12 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Building pyramids with gdaladdo

 

Hey, 

 

I got a gpkg file I converted from tiff using gdal_translate, it originally has level 17 tiles.

I'd like to build it's pyramids till I reach a level with only 1 tile, I tried using gdaladdo, and when I built it with 2-256 factors, I got a result that has level 18-11 where level 11 has two tiles.

 

I got two problems, I don't understand how I got level 18 after building pyramids upwards?

And I'd like to reach one tile, so I tried using 512, however I get an error asking me to use gpkg_zoom_other, I don't understand why, and I am not sure how to use it?

The error i'm getting is: 

Warning 1: Use of overview factor 512 causes gpkg_zoom_other extension to be needed

ERROR 1: Could not find dataset corresponding to ov factor 512

 

Would appreciate some help routing me in the right direction.

 

Thanks!

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180217/e93b8332/attachment.html>

From bradh at frogmouth.net  Sat Feb 17 02:39:04 2018
From: bradh at frogmouth.net (Brad Hards)
Date: Sat, 17 Feb 2018 21:39:04 +1100
Subject: [gdal-dev] Building pyramids with gdaladdo
In-Reply-To: <HE1PR0402MB349891833AD36F1D691149A5BACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>
Message-ID: <8794c231-bbf5-4148-8acc-ec6b4ac7802b@email.android.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180217/8c05af0f/attachment.html>

From gilpeleg at live.com  Sat Feb 17 03:32:00 2018
From: gilpeleg at live.com (Gil)
Date: Sat, 17 Feb 2018 11:32:00 +0000
Subject: [gdal-dev] Building pyramids with gdaladdo
In-Reply-To: <8794c231-bbf5-4148-8acc-ec6b4ac7802b@email.android.com>
References: <HE1PR0402MB349891833AD36F1D691149A5BACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>
 <8794c231-bbf5-4148-8acc-ec6b4ac7802b@email.android.com>
Message-ID: <HE1PR0402MB34987793120C20BDA7DF6961BACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>

It’s just a typo in the mail, apologies. The result is the same. Any thoughts?

On Sat, 17 Feb 2018 at 12:39 Brad Hards <bradh at frogmouth.net<mailto:bradh at frogmouth.net>> wrote:
Maybe 254 should have been 256...

On 17 Feb. 2018 19:36, Gil <gilpeleg at live.com<mailto:gilpeleg at live.com>> wrote:
My tiff file is 19968x29952 which I understand when calculated to the 512 level goes un-even, is there anything I can do to go that extra level?
I am converting to JPEG, it works well, I don't understand how I am reaching level 18 when the original has 17.
Conversion is done like this:

gdal_translate.exe -co TILE_FORMAT=JPEG -co TILING_SCHEME=InspireCRS84Quad -co ZOOM_LEVEL_STRATEGY=LOWER -of GPKG C:\myfile.tif C:\myfile.gpkg
gdaladdo -oo TILE_FORMAT=JPEG C:\myfile.gpkg 2 4 8 16 32 64 128 254 512

I am going to display the geopackage with a custom web viewer, that works best when the upper level has only 1 tile.

Thanks.

On 17 February 2018 at 10:20, <bradh at frogmouth.net<mailto:bradh at frogmouth.net>> wrote:

Can you show exactly how you did the conversion and overviews, and the dimensions of the original TIFF file. Are you trying to create tiles in JPEG or PNG? If JPEG, possibly you need to fill your TIFF.



The part about gpkg_zoom_other is telling you that what you are asking for can’t be done without breaking the power-of-two zoom level constraint.  What do you intend to do with your geopackage? The extensions that make sense will depend on the consumers of the file.



Brad

From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>] On Behalf Of Gil
Sent: Saturday, 17 February 2018 7:12 PM
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] Building pyramids with gdaladdo



Hey,



I got a gpkg file I converted from tiff using gdal_translate, it originally has level 17 tiles.

I'd like to build it's pyramids till I reach a level with only 1 tile, I tried using gdaladdo, and when I built it with 2-256 factors, I got a result that has level 18-11 where level 11 has two tiles.



I got two problems, I don't understand how I got level 18 after building pyramids upwards?

And I'd like to reach one tile, so I tried using 512, however I get an error asking me to use gpkg_zoom_other, I don't understand why, and I am not sure how to use it?

The error i'm getting is:

Warning 1: Use of overview factor 512 causes gpkg_zoom_other extension to be needed

ERROR 1: Could not find dataset corresponding to ov factor 512



Would appreciate some help routing me in the right direction.



Thanks!








-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180217/2e8a8fb7/attachment-0001.html>

From gilpeleg at live.com  Sat Feb 17 03:32:01 2018
From: gilpeleg at live.com (Gil)
Date: Sat, 17 Feb 2018 11:32:01 +0000
Subject: [gdal-dev] Building pyramids with gdaladdo
In-Reply-To: <8794c231-bbf5-4148-8acc-ec6b4ac7802b@email.android.com>
References: <HE1PR0402MB349891833AD36F1D691149A5BACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>
 <8794c231-bbf5-4148-8acc-ec6b4ac7802b@email.android.com>
Message-ID: <HE1PR0402MB3498A7E17559718E7F117C4CBACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>

It’s just a typo in the mail, apologies. The result is the same. Any thoughts?

On Sat, 17 Feb 2018 at 12:39 Brad Hards <bradh at frogmouth.net<mailto:bradh at frogmouth.net>> wrote:
Maybe 254 should have been 256...

On 17 Feb. 2018 19:36, Gil <gilpeleg at live.com<mailto:gilpeleg at live.com>> wrote:
My tiff file is 19968x29952 which I understand when calculated to the 512 level goes un-even, is there anything I can do to go that extra level?
I am converting to JPEG, it works well, I don't understand how I am reaching level 18 when the original has 17.
Conversion is done like this:

gdal_translate.exe -co TILE_FORMAT=JPEG -co TILING_SCHEME=InspireCRS84Quad -co ZOOM_LEVEL_STRATEGY=LOWER -of GPKG C:\myfile.tif C:\myfile.gpkg
gdaladdo -oo TILE_FORMAT=JPEG C:\myfile.gpkg 2 4 8 16 32 64 128 254 512

I am going to display the geopackage with a custom web viewer, that works best when the upper level has only 1 tile.

Thanks.

On 17 February 2018 at 10:20, <bradh at frogmouth.net<mailto:bradh at frogmouth.net>> wrote:

Can you show exactly how you did the conversion and overviews, and the dimensions of the original TIFF file. Are you trying to create tiles in JPEG or PNG? If JPEG, possibly you need to fill your TIFF.



The part about gpkg_zoom_other is telling you that what you are asking for can’t be done without breaking the power-of-two zoom level constraint.  What do you intend to do with your geopackage? The extensions that make sense will depend on the consumers of the file.



Brad

From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>] On Behalf Of Gil
Sent: Saturday, 17 February 2018 7:12 PM
To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] Building pyramids with gdaladdo



Hey,



I got a gpkg file I converted from tiff using gdal_translate, it originally has level 17 tiles.

I'd like to build it's pyramids till I reach a level with only 1 tile, I tried using gdaladdo, and when I built it with 2-256 factors, I got a result that has level 18-11 where level 11 has two tiles.



I got two problems, I don't understand how I got level 18 after building pyramids upwards?

And I'd like to reach one tile, so I tried using 512, however I get an error asking me to use gpkg_zoom_other, I don't understand why, and I am not sure how to use it?

The error i'm getting is:

Warning 1: Use of overview factor 512 causes gpkg_zoom_other extension to be needed

ERROR 1: Could not find dataset corresponding to ov factor 512



Would appreciate some help routing me in the right direction.



Thanks!








-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180217/020c2c87/attachment.html>

From palmerjnz at gmail.com  Sat Feb 17 23:42:39 2018
From: palmerjnz at gmail.com (Jeremy Palmer)
Date: Sun, 18 Feb 2018 20:42:39 +1300
Subject: [gdal-dev] GDAL way to set open options in QGIS?
Message-ID: <CAA5WJYmmi1SWixdfnjfO_Bi8-3BG9tuvczEmRJYm4TU-vXUehQ@mail.gmail.com>

I'm trying to open the new MBTiles vector tiles driver format in QGIS. Is
it somehow possible to set GDAL open options either within QGIS or some
sort of environment variable?

Cheers
Jeremy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180218/9842dfcd/attachment.html>

From even.rouault at spatialys.com  Sun Feb 18 05:41:56 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 18 Feb 2018 14:41:56 +0100
Subject: [gdal-dev] GDAL way to set open options in QGIS?
In-Reply-To: <CAA5WJYmmi1SWixdfnjfO_Bi8-3BG9tuvczEmRJYm4TU-vXUehQ@mail.gmail.com>
References: <CAA5WJYmmi1SWixdfnjfO_Bi8-3BG9tuvczEmRJYm4TU-vXUehQ@mail.gmail.com>
Message-ID: <1848934.T0tgodoQnW@even-i700>

Jeremy,

As far as I know, there's no GUI way of setting open options in QGIS.
One solution is to create a VRT that contains the open option in it
For example with ogr2vrt.py
https://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/ogr2vrt.py

python ogr2vrt.py your.mbtiles your.vrt -oo ZOOM_LEVEL_AUTO=YES

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180218/5ff52cd1/attachment.html>

From even.rouault at spatialys.com  Sun Feb 18 05:59:45 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 18 Feb 2018 14:59:45 +0100
Subject: [gdal-dev] Building pyramids with gdaladdo
In-Reply-To: <HE1PR0402MB349891833AD36F1D691149A5BACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>
References: <HE1PR0402MB3498603812AEF77755399524BACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>
 <00e501d3a7c8$39424ae0$abc6e0a0$@frogmouth.net>
 <HE1PR0402MB349891833AD36F1D691149A5BACA0@HE1PR0402MB3498.eurprd04.prod.outlook.com>
Message-ID: <5096794.mxCkehuPm8@even-i700>

Gil,

to be able to properly reproduce, could you paste the output of 

gdalinfo myfile.tif

?

Even

> My tiff file is 19968x29952 which I understand when calculated to the 512
> level goes un-even, is there anything I can do to go that extra level?
 I
> am converting to JPEG, it works well, I don't understand how I am reaching
> level 18 when the original has 17. Conversion is done like this:
> 
> gdal_translate.exe -co TILE_FORMAT=JPEG -co TILING_SCHEME=InspireCRS84Quad
> -co ZOOM_LEVEL_STRATEGY=LOWER -of GPKG C:\myfile.tif C:\myfile.gpkg
> gdaladdo -oo TILE_FORMAT=JPEG C:\myfile.gpkg 2 4 8 16 32 64 128 254 512 
> I am going to display the geopackage with a custom web viewer, that works
> best when the upper level has only 1 tile.
 
> Thanks.
> 
> On 17 February 2018 at 10:20,
> <bradh at frogmouth.net<mailto:bradh at frogmouth.net>> wrote:
 Can you show
> exactly how you did the conversion and overviews, and the dimensions of the
> original TIFF file. Are you trying to create tiles in JPEG or PNG? If JPEG,
> possibly you need to fill your TIFF. 
> The part about gpkg_zoom_other is telling you that what you are asking for
> can’t be done without breaking the power-of-two zoom level constraint. 
> What do you intend to do with your geopackage? The extensions that make
> sense will depend on the consumers of the file.
 
> Brad
> From: gdal-dev> [mailto:gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-
bounces at lists.osge
> o.org>] On Behalf Of Gil
 Sent: Saturday, 17 February 2018 7:12 PM
> To: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
> Subject: [gdal-dev] Building pyramids with gdaladdo
> 
> Hey,
> 
> I got a gpkg file I converted from tiff using gdal_translate, it originally
> has level 17 tiles.
 I'd like to build it's pyramids till I reach a level
> with only 1 tile, I tried using gdaladdo, and when I built it with 2-256
> factors, I got a result that has level 18-11 where level 11 has two tiles. 
> I got two problems, I don't understand how I got level 18 after building
> pyramids upwards?
 And I'd like to reach one tile, so I tried using 512,
> however I get an error asking me to use gpkg_zoom_other, I don't understand
> why, and I am not sure how to use it? The error i'm getting is:
> Warning 1: Use of overview factor 512 causes gpkg_zoom_other extension to be
> needed
 ERROR 1: Could not find dataset corresponding to ov factor 512
> 
> Would appreciate some help routing me in the right direction.
> 
> Thanks!
> 
> 
> 
> 


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180218/871aab31/attachment.html>

From palmerjnz at gmail.com  Sun Feb 18 11:39:45 2018
From: palmerjnz at gmail.com (Jeremy Palmer)
Date: Mon, 19 Feb 2018 08:39:45 +1300
Subject: [gdal-dev] GDAL way to set open options in QGIS?
In-Reply-To: <1848934.T0tgodoQnW@even-i700>
References: <CAA5WJYmmi1SWixdfnjfO_Bi8-3BG9tuvczEmRJYm4TU-vXUehQ@mail.gmail.com>
 <1848934.T0tgodoQnW@even-i700>
Message-ID: <CAA5WJYkWtKR_FtH=TmYAzWu4p7KxjFMZgNrBc1AAU+SLMFY3jg@mail.gmail.com>

Thanks Even.

I get a warning message when using ogr2vrt.py on trunk 41534:

jpalmer$ ogr2vrt.py --version
GDAL 2.3.0dev, released 2017/99/99

jpalmer$ ogr2vrt.py parcels.mbtiles parcels.vrt -oo ZOOM_LEVEL_AUTO=YES
Warning 6: driver MBTiles : type 'booleean' for ZOOM_LEVEL_AUTO open option
is not recognized.

Also looks like a spelling mistake in the message.

jpalmer$ ogrinfo parcels.vrt -so
INFO: Open of `parcels.vrt'
      using driver `OGR_VRT' successful.
Metadata:
  bounds=174.1821636,-37.3637475,175.0829141,-36.6128647
  center=174.6325388,-36.9883061,0
  format=pbf
  maxzoom=14
  minzoom=0
  name=parcels
  scheme=tms
  type=overlay
  version=2
  ZOOM_LEVEL=14
Warning 6: driver MBTiles : type 'booleean' for ZOOM_LEVEL_AUTO open option
is not recognized.
1: parcels (Multi Polygon)

Cheers
Jeremy


On Mon, Feb 19, 2018 at 2:41 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Jeremy,
>
>
>
> As far as I know, there's no GUI way of setting open options in QGIS.
>
> One solution is to create a VRT that contains the open option in it
>
> For example with ogr2vrt.py
>
> https://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/ogr2vrt.py
>
>
>
> python ogr2vrt.py your.mbtiles your.vrt -oo ZOOM_LEVEL_AUTO=YES
>
>
>
> Even
>
>
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180219/11a821f5/attachment-0001.html>

From jef at norbit.de  Sun Feb 18 12:18:07 2018
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Sun, 18 Feb 2018 21:18:07 +0100
Subject: [gdal-dev] GDAL way to set open options in QGIS?
In-Reply-To: <CAA5WJYkWtKR_FtH=TmYAzWu4p7KxjFMZgNrBc1AAU+SLMFY3jg@mail.gmail.com>
References: <CAA5WJYmmi1SWixdfnjfO_Bi8-3BG9tuvczEmRJYm4TU-vXUehQ@mail.gmail.com>
 <1848934.T0tgodoQnW@even-i700>
 <CAA5WJYkWtKR_FtH=TmYAzWu4p7KxjFMZgNrBc1AAU+SLMFY3jg@mail.gmail.com>
Message-ID: <20180218201807.f3g2w7wwu2dya4vt@norbit.de>

Hi Jeremy,

On Mon, 19. Feb 2018 at 08:39:45 +1300, Jeremy Palmer wrote:
> jpalmer$ ogr2vrt.py --version
> GDAL 2.3.0dev, released 2017/99/99
> 
> jpalmer$ ogr2vrt.py parcels.mbtiles parcels.vrt -oo ZOOM_LEVEL_AUTO=YES
> Warning 6: driver MBTiles : type 'booleean' for ZOOM_LEVEL_AUTO open option
> is not recognized.
> 
> Also looks like a spelling mistake in the message.

Wasn't just in the message - the typo is fixed in r41535.


Jürgen

-- 
Jürgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstraße 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden             http://www.norbit.de
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 827 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180218/4eb44fb0/attachment.sig>

From palmerjnz at gmail.com  Sun Feb 18 12:47:49 2018
From: palmerjnz at gmail.com (Jeremy Palmer)
Date: Mon, 19 Feb 2018 09:47:49 +1300
Subject: [gdal-dev] GDAL way to set open options in QGIS?
In-Reply-To: <20180218201807.f3g2w7wwu2dya4vt@norbit.de>
References: <CAA5WJYmmi1SWixdfnjfO_Bi8-3BG9tuvczEmRJYm4TU-vXUehQ@mail.gmail.com>
 <1848934.T0tgodoQnW@even-i700>
 <CAA5WJYkWtKR_FtH=TmYAzWu4p7KxjFMZgNrBc1AAU+SLMFY3jg@mail.gmail.com>
 <20180218201807.f3g2w7wwu2dya4vt@norbit.de>
Message-ID: <CAA5WJYnrG0i+3Gw3k8LbpkCVN3zRkCpmQYc09C1puoDi=DCdSw@mail.gmail.com>

Hi  Jürgen,

On 19/02/2018 09:18, "Jürgen E. Fischer"


Wasn't just in the message - the typo is fixed in r41535.


Thanks. Make sense now.

Cheers
Jeremy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180219/80aad125/attachment.html>

From tobias.wendorff at tu-dortmund.de  Sun Feb 18 14:18:30 2018
From: tobias.wendorff at tu-dortmund.de (Tobias Wendorff)
Date: Sun, 18 Feb 2018 23:18:30 +0100
Subject: [gdal-dev] spatialite on Debian: neither lwgeom nor rttopo
Message-ID: <e3afbb1dfcc7665f3145ec33b916e825.squirrel@webmail.tu-dortmund.de>

Hi there!

Did anyone recognize that stable and unstable Debian neither builds
lwgeom nor rttopo in libspatialite by default?

This means: no ST-functions using SQLite dialect.

For lwgeom it might be disabled due to licensing problems. spatialite's
support for rttopo might be unstable, so this is for homebrew only.
But nobody can test it, since it's also disabled by default.

If you manually enable lwgeom in the Debian sources and rebuild the
package, everything works as expected... Didn't try for rttopo, but
should behave equal.

Best regards,
Tobias


From palmerjnz at gmail.com  Sun Feb 18 15:37:31 2018
From: palmerjnz at gmail.com (Jeremy Palmer)
Date: Mon, 19 Feb 2018 12:37:31 +1300
Subject: [gdal-dev] GDAL way to set open options in QGIS?
In-Reply-To: <CAA5WJYnrG0i+3Gw3k8LbpkCVN3zRkCpmQYc09C1puoDi=DCdSw@mail.gmail.com>
References: <CAA5WJYmmi1SWixdfnjfO_Bi8-3BG9tuvczEmRJYm4TU-vXUehQ@mail.gmail.com>
 <1848934.T0tgodoQnW@even-i700>
 <CAA5WJYkWtKR_FtH=TmYAzWu4p7KxjFMZgNrBc1AAU+SLMFY3jg@mail.gmail.com>
 <20180218201807.f3g2w7wwu2dya4vt@norbit.de>
 <CAA5WJYnrG0i+3Gw3k8LbpkCVN3zRkCpmQYc09C1puoDi=DCdSw@mail.gmail.com>
Message-ID: <CAA5WJYk43UqrUc_X5cDWACOm7a1csTPGz5OQf1XRd2_SSx+11g@mail.gmail.com>

I've now added the VRT layer to QGIS 3.0 dev with GDAL 2.3dev, but it
doesn't recognise it as a spatial layer - it just shows up with QGIS table
icon. Here's the VRT file I'm trying to add and the result of ogrinfo:
https://gist.github.com/palmerj/eb25a396fecc181b2da5023c70078198. Could the
invalid geometries be causing the issue?

Note I can add the mbtiles file directly but then it shows all the data
from every zoom level.

On Mon, Feb 19, 2018 at 9:47 AM, Jeremy Palmer <palmerjnz at gmail.com> wrote:

> Hi  Jürgen,
>
> On 19/02/2018 09:18, "Jürgen E. Fischer"
>
>
> Wasn't just in the message - the typo is fixed in r41535.
>
>
> Thanks. Make sense now.
>
> Cheers
> Jeremy
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180219/6ae07310/attachment.html>

From sean at mapbox.com  Sun Feb 18 21:55:16 2018
From: sean at mapbox.com (Sean Gillies)
Date: Sun, 18 Feb 2018 22:55:16 -0700
Subject: [gdal-dev] GDALCreateWarpedVRT and .msk files
Message-ID: <CADPhZXwGi7+yzmvGOGzJUVhuhMa0Pa7kk0gNPSmH7wi_R3EvDQ@mail.gmail.com>

Hi all,

I've noticed that while GDALCreateWarpedVRT does acquire nodata values, and
thereby nodata-derived masks, from the source dataset, it does not pick up
on a source's .msk file and does not acquire a source mask derived from
that sidecar file.

Is this an oversight or intended behavior? Is there a best practice for
adding a .msk derived mask to the VRT?

Thanks,

--

Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180218/2f6fd9fe/attachment.html>

From sebastic at xs4all.nl  Sun Feb 18 22:40:24 2018
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Mon, 19 Feb 2018 07:40:24 +0100
Subject: [gdal-dev] spatialite on Debian: neither lwgeom nor rttopo
In-Reply-To: <e3afbb1dfcc7665f3145ec33b916e825.squirrel@webmail.tu-dortmund.de>
References: <e3afbb1dfcc7665f3145ec33b916e825.squirrel@webmail.tu-dortmund.de>
Message-ID: <769e2bf2-6265-76d2-0efc-fdc6b2ea5b7a@xs4all.nl>

On 02/18/2018 11:18 PM, Tobias Wendorff wrote:
> Did anyone recognize that stable and unstable Debian neither builds
> lwgeom nor rttopo in libspatialite by default?

lwgeom support was disabled to untangle the circular dependency as
documented in the spatialite changelog:

 - Drop build dependency on liblwgeom-dev to untangle
   spatialite->postgis->gdal->spatialite circular dependency.

rttopo support will be available in the next spatialite release, but
it's taking forever to get past 4.4.0-rc1.

There will most likely never be a 4.4.0 final release, and I've also
heard talk about skipping 4.5.0 in favor of going for 5.0.0 instead.

As long as there is no rttopo support in the released spatialite, the
Debian package will not enable the support.

The rttopo 1.1.0 final release also hasn't been published yet, this is
all still work in process in preparation of proper topo support in
spatialite.

> This means: no ST-functions using SQLite dialect.
> 
> For lwgeom it might be disabled due to licensing problems. spatialite's
> support for rttopo might be unstable, so this is for homebrew only.
> But nobody can test it, since it's also disabled by default.

There is no license problem, there is a dependency problem.

> If you manually enable lwgeom in the Debian sources and rebuild the
> package, everything works as expected... Didn't try for rttopo, but
> should behave equal.

Your system will fail to do distribution upgrades to newer stable
releases. Even updating your systems to get the newer postgis or gdal
packages will fail (assuming your on testing/unstable).

You're very much on your own if you choose to re-instate the circular
dependency. As they say: when it breaks you get to keep the pieces.

Kind Regards,

Bas

From even.rouault at spatialys.com  Mon Feb 19 04:31:19 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Feb 2018 13:31:19 +0100
Subject: [gdal-dev] GDAL way to set open options in QGIS?
In-Reply-To: <CAA5WJYk43UqrUc_X5cDWACOm7a1csTPGz5OQf1XRd2_SSx+11g@mail.gmail.com>
References: <CAA5WJYmmi1SWixdfnjfO_Bi8-3BG9tuvczEmRJYm4TU-vXUehQ@mail.gmail.com>
 <CAA5WJYnrG0i+3Gw3k8LbpkCVN3zRkCpmQYc09C1puoDi=DCdSw@mail.gmail.com>
 <CAA5WJYk43UqrUc_X5cDWACOm7a1csTPGz5OQf1XRd2_SSx+11g@mail.gmail.com>
Message-ID: <2915590.AU7Yj0g6CU@even-i700>

Hi Jeremy,

> I've now added the VRT layer to QGIS 3.0 dev with GDAL 2.3dev, but it
> doesn't recognise it as a spatial layer - it just shows up with QGIS table
> icon. Here's the VRT file I'm trying to add and the result of ogrinfo:
> https://gist.github.com/palmerj/eb25a396fecc181b2da5023c70078198. Could the
> invalid geometries be causing the issue?
> 

No, I did reproduce the issue. The reason was that the path to the mbtiles in the VRT was not 
tagged as relative. So either add the -relative switch in your ogr2vrt.py invokation, or grab its 
latest version that should now automatically set it.

> Note I can add the mbtiles file directly but then it shows all the data
> from every zoom level.

Normally only the maximum zoom level

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180219/a2e694d6/attachment-0001.html>

From even.rouault at spatialys.com  Mon Feb 19 04:42:46 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 19 Feb 2018 13:42:46 +0100
Subject: [gdal-dev] GDALCreateWarpedVRT and .msk files
In-Reply-To: <CADPhZXwGi7+yzmvGOGzJUVhuhMa0Pa7kk0gNPSmH7wi_R3EvDQ@mail.gmail.com>
References: <CADPhZXwGi7+yzmvGOGzJUVhuhMa0Pa7kk0gNPSmH7wi_R3EvDQ@mail.gmail.com>
Message-ID: <36184371.QqbEObbW2N@even-i700>

Hi Sean

> 
> I've noticed that while GDALCreateWarpedVRT does acquire nodata values, and
> thereby nodata-derived masks,

I see provision for that in GDALAutoCreateWarpedVRT(), not in GDALCreateWarpedVRT()

> from the source dataset, it does not pick up
> on a source's .msk file and does not acquire a source mask derived from
> that sidecar file.

I haven't tested in the warped VRT case, but I believe that should normally be automatically 
done by
https://github.com/OSGeo/gdal/blob/trunk/gdal/alg/gdalwarpoperation.cpp#L2022

Are you sure the .msk is properly recognized as a GDAL mask dataset by GDAL ? For example 
when ou do gdalinfo on the source dataset. There is a compulsory metadata item that must 
be set on the .msk. See 
"For an external .msk file to be recognized by GDAL," in https://trac.osgeo.org/gdal/wiki/
rfc15_nodatabitmask

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180219/b1021315/attachment.html>

From tobias.wendorff at tu-dortmund.de  Mon Feb 19 06:40:32 2018
From: tobias.wendorff at tu-dortmund.de (Tobias Wendorff)
Date: Mon, 19 Feb 2018 15:40:32 +0100
Subject: [gdal-dev] spatialite on Debian: neither lwgeom nor rttopo
In-Reply-To: <769e2bf2-6265-76d2-0efc-fdc6b2ea5b7a@xs4all.nl>
References: <e3afbb1dfcc7665f3145ec33b916e825.squirrel@webmail.tu-dortmund.de>
 <769e2bf2-6265-76d2-0efc-fdc6b2ea5b7a@xs4all.nl>
Message-ID: <7620ab2f671d45a6345b1ccb2684bd95.squirrel@webmail.tu-dortmund.de>

Hi Sebastiaan,

Am Mo, 19.02.2018, 07:40 schrieb Sebastiaan Couwenberg:
> lwgeom support was disabled to untangle the circular dependency as
> documented in the spatialite changelog:
>
>  - Drop build dependency on liblwgeom-dev to untangle
>    spatialite->postgis->gdal->spatialite circular dependency.

Please excuse my amateurism, but could you explain this in more detail?
I do have a certain understanding of the matter, but I've never had
anything to do with such circular dependencies.

> rttopo support will be available in the next spatialite release, but
> it's taking forever to get past 4.4.0-rc1.

Yes, I have already noticed this: the project has been stagnating
since 2015, but in the last few weeks there have been some bugfixes.

> As long as there is no rttopo support in the released spatialite, the
> Debian package will not enable the support.

I made a backport out of 4.4 RC0 from the experimental branch.
Here it works so far (in a chroot of course).

> You're very much on your own if you choose to re-instate the circular
> dependency. As they say: when it breaks you get to keep the pieces.

Okay, then I keep running my own backport in the chroot. I was just
surprised that so far there has been no major outcry, that it does
not work.

btw: The background was, by the way, that I wanted to run my scripts
coded under the use of OSGeo4W in Debian. I was constantly informed
about missing ST functions :)

Best,
Tobias


From sebastic at xs4all.nl  Mon Feb 19 07:01:19 2018
From: sebastic at xs4all.nl (Bas Couwenberg)
Date: Mon, 19 Feb 2018 16:01:19 +0100
Subject: [gdal-dev] spatialite on Debian: neither lwgeom nor rttopo
In-Reply-To: <7620ab2f671d45a6345b1ccb2684bd95.squirrel@webmail.tu-dortmund.de>
References: <e3afbb1dfcc7665f3145ec33b916e825.squirrel@webmail.tu-dortmund.de>
 <769e2bf2-6265-76d2-0efc-fdc6b2ea5b7a@xs4all.nl>
 <7620ab2f671d45a6345b1ccb2684bd95.squirrel@webmail.tu-dortmund.de>
Message-ID: <9b34c0e7552b141b3c4c107ec44e32a1@xs4all.nl>

On 2018-02-19 15:40, Tobias Wendorff wrote:
> Am Mo, 19.02.2018, 07:40 schrieb Sebastiaan Couwenberg:
>> lwgeom support was disabled to untangle the circular dependency as
>> documented in the spatialite changelog:
>> 
>>  - Drop build dependency on liblwgeom-dev to untangle
>>    spatialite->postgis->gdal->spatialite circular dependency.
> 
> Please excuse my amateurism, but could you explain this in more detail?
> I do have a certain understanding of the matter, but I've never had
> anything to do with such circular dependencies.

Packages involved in the circular dependency cannot be updated because 
the old versions are kept around.

See:

  https://lists.debian.org/debian-gis/2016/02/msg00017.html
  https://lists.debian.org/debian-gis/2015/08/msg00061.html

When performing a distribution upgrade apt will need to update 
libspatialite, which involves removing the old version and installing 
the new.

This will not be possible because gdal requires libspatialite to be 
installed.

Removing gdal before upgrading libspatialite is not possible because 
postgis requires gdal to be installed.

Removing postgis before upgrading libspatialite and gdal is not possible 
because libspatialite requires (liblwgeom from) postgis to be installed.

Kind Regards,

Bas

From tobias.wendorff at tu-dortmund.de  Mon Feb 19 07:06:26 2018
From: tobias.wendorff at tu-dortmund.de (Tobias Wendorff)
Date: Mon, 19 Feb 2018 16:06:26 +0100
Subject: [gdal-dev] spatialite on Debian: neither lwgeom nor rttopo
In-Reply-To: <9b34c0e7552b141b3c4c107ec44e32a1@xs4all.nl>
References: <e3afbb1dfcc7665f3145ec33b916e825.squirrel@webmail.tu-dortmund.de>
 <769e2bf2-6265-76d2-0efc-fdc6b2ea5b7a@xs4all.nl>
 <7620ab2f671d45a6345b1ccb2684bd95.squirrel@webmail.tu-dortmund.de>
 <9b34c0e7552b141b3c4c107ec44e32a1@xs4all.nl>
Message-ID: <e41d6b72b1a8fbab1dcb396d98c769df.squirrel@webmail.tu-dortmund.de>

Am Mo, 19.02.2018, 16:01 schrieb Bas Couwenberg:
> Packages involved in the circular dependency cannot be updated because
> the old versions are kept around.
>
> See:

[snip]

Thanks for your kind and detailed explanation. I will continue to
build and use it in a chroot :)


From palmerjnz at gmail.com  Mon Feb 19 11:16:58 2018
From: palmerjnz at gmail.com (Jeremy Palmer)
Date: Tue, 20 Feb 2018 08:16:58 +1300
Subject: [gdal-dev] GDAL way to set open options in QGIS?
In-Reply-To: <2915590.AU7Yj0g6CU@even-i700>
References: <CAA5WJYmmi1SWixdfnjfO_Bi8-3BG9tuvczEmRJYm4TU-vXUehQ@mail.gmail.com>
 <CAA5WJYnrG0i+3Gw3k8LbpkCVN3zRkCpmQYc09C1puoDi=DCdSw@mail.gmail.com>
 <CAA5WJYk43UqrUc_X5cDWACOm7a1csTPGz5OQf1XRd2_SSx+11g@mail.gmail.com>
 <2915590.AU7Yj0g6CU@even-i700>
Message-ID: <CAA5WJY=zt_waYhcJC42NZs_iwy_gJfX5Aip8cpH2EBfGTUkuQg@mail.gmail.com>

Hi Even,

On Tue, Feb 20, 2018 at 1:31 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

>
> No, I did reproduce the issue. The reason was that the path to the mbtiles
> in the VRT was not tagged as relative. So either add the -relative switch
> in your ogr2vrt.py invokation, or grab its latest version that should now
> automatically set it.
>
>
Thanks Magic.  I've now got it working:
https://gist.github.com/palmerj/a52bc8357acee0cb1ddc622c2dab1e63


> > Note I can add the mbtiles file directly but then it shows all the data
>
> > from every zoom level.
>
>
>

Ok thanks good to know.

Cheers
Jeremy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180220/1434c750/attachment.html>

From sean at mapbox.com  Tue Feb 20 02:22:59 2018
From: sean at mapbox.com (Sean Gillies)
Date: Tue, 20 Feb 2018 03:22:59 -0700
Subject: [gdal-dev] GDALCreateWarpedVRT and .msk files
In-Reply-To: <36184371.QqbEObbW2N@even-i700>
References: <CADPhZXwGi7+yzmvGOGzJUVhuhMa0Pa7kk0gNPSmH7wi_R3EvDQ@mail.gmail.com>
 <36184371.QqbEObbW2N@even-i700>
Message-ID: <CADPhZXxr1ggpuzCVhVo6AjM2fEFTcPSSF+cTjvfGP70SRjmzdA@mail.gmail.com>

Hi Even,

On Mon, Feb 19, 2018 at 5:42 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Sean
>
>
>
> >
>
> > I've noticed that while GDALCreateWarpedVRT does acquire nodata values,
> and
>
> > thereby nodata-derived masks,
>
>
>
> I see provision for that in GDALAutoCreateWarpedVRT(), not in
> GDALCreateWarpedVRT()
>

Yes, sorry, I meant to write GDALAutoCreateWarpedVRT().


>
>
> > from the source dataset, it does not pick up
>
> > on a source's .msk file and does not acquire a source mask derived from
>
> > that sidecar file.
>
>
>
> I haven't tested in the warped VRT case, but I believe that should
> normally be automatically done by
>
> https://github.com/OSGeo/gdal/blob/trunk/gdal/alg/
> gdalwarpoperation.cpp#L2022
>
>
>
> Are you sure the .msk is properly recognized as a GDAL mask dataset by
> GDAL ? For example when ou do gdalinfo on the source dataset. There is a
> compulsory metadata item that must be set on the .msk. See
>
> "For an external .msk file to be recognized by GDAL," in
> https://trac.osgeo.org/gdal/wiki/rfc15_nodatabitmask
>

Yes, gdalinfo detects the mask:

gdalinfo '/vsicurl/
http://oin-hotosm.s3.amazonaws.com/5a324a622553e6000ce5aaf5/0/3fa181a1-425c-4e53-b49f-ea72884da097.tif
'
Driver: GTiff/GeoTIFF
Files: /vsicurl/
http://oin-hotosm.s3.amazonaws.com/5a324a622553e6000ce5aaf5/0/3fa181a1-425c-4e53-b49f-ea72884da097.tif
       /vsicurl/
http://oin-hotosm.s3.amazonaws.com/5a324a622553e6000ce5aaf5/0/3fa181a1-425c-4e53-b49f-ea72884da097.tif.msk
Size is 48948, 15632
...
Band 1 Block=512x512 Type=Byte, ColorInterp=Red
  Overviews: 24474x7816, 12237x3908, 6119x1954, 3060x977, 1530x489,
765x245, 383x123
  Mask Flags: PER_DATASET
  Overviews of mask band: 24474x7816, 12237x3908, 6119x1954, 3060x977,
1530x489, 765x245, 383x123
  Unit Type: metre
Band 2 Block=512x512 Type=Byte, ColorInterp=Green
  Overviews: 24474x7816, 12237x3908, 6119x1954, 3060x977, 1530x489,
765x245, 383x123
  Mask Flags: PER_DATASET
  Overviews of mask band: 24474x7816, 12237x3908, 6119x1954, 3060x977,
1530x489, 765x245, 383x123
  Unit Type: metre
Band 3 Block=512x512 Type=Byte, ColorInterp=Blue
  Overviews: 24474x7816, 12237x3908, 6119x1954, 3060x977, 1530x489,
765x245, 383x123
  Mask Flags: PER_DATASET
  Overviews of mask band: 24474x7816, 12237x3908, 6119x1954, 3060x977,
1530x489, 765x245, 383x123
  Unit Type: metre

I'm using GDAL 2.2.2.

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180220/c76eed0e/attachment.html>

From even.rouault at spatialys.com  Tue Feb 20 03:57:49 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 20 Feb 2018 12:57:49 +0100
Subject: [gdal-dev] GDALCreateWarpedVRT and .msk files
In-Reply-To: <CADPhZXxr1ggpuzCVhVo6AjM2fEFTcPSSF+cTjvfGP70SRjmzdA@mail.gmail.com>
References: <CADPhZXwGi7+yzmvGOGzJUVhuhMa0Pa7kk0gNPSmH7wi_R3EvDQ@mail.gmail.com>
 <36184371.QqbEObbW2N@even-i700>
 <CADPhZXxr1ggpuzCVhVo6AjM2fEFTcPSSF+cTjvfGP70SRjmzdA@mail.gmail.com>
Message-ID: <8054366.I7sMKQn0ta@even-i700>

Sean,

I've just tested with GDAL trunk and latest state of 2.2 branch (but I think that 2.2.2 should behave the same), and when using gdal.AutoCreateWarpedVRT() on your below mentionned dataset, the .msk file is read.

$ CPL_CURL_VERBOSE=YES CPL_VSIL_CURL_ALLOWED_EXTENSIONS=tif,msk FILE=/vsicurl/http://oin-hotosm.s3.amazonaws.com/5a324a622553e6000ce5aaf5/0/3fa181a1-425c-4e53-b49f-ea72884da097.tif python
[...]
>>> from osgeo import gdal
>> import os
>>> file = os.getenv('FILE')
>>> src_ds = gdal.Open(file)
[...]
>>> ds = gdal.AutoCreateWarpedVRT(src_ds)
[...]
* Connected to oin-hotosm.s3.amazonaws.com (52.216.130.219) port 80 (#2)
> GET /5a324a622553e6000ce5aaf5/0/3fa181a1-425c-4e53-b49f-ea72884da097.tif.msk HTTP/1.1
Host: oin-hotosm.s3.amazonaws.com
Range: bytes=49152-114687
Accept: */*

< HTTP/1.1 206 Partial Content
< x-amz-id-2: oXRmqP1A9HzNTn9soSOh9vQJzGUa+lA0GbsAKa0m51H8wvZCgS31y85NAXu60r3MMjRTz1TssYk=
< x-amz-request-id: BC46544B595F1D30
< Date: Tue, 20 Feb 2018 11:52:54 GMT
< Last-Modified: Thu, 14 Dec 2017 09:58:29 GMT
< ETag: "97b96b954a22be9d7bae0bfd1f33922b"
< Accept-Ranges: bytes
< Content-Range: bytes 49152-114687/1730078
< Content-Type: binary/octet-stream
< Content-Length: 65536
< Server: AmazonS3

[...]

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180220/132b4559/attachment.html>

From schwehr at gmail.com  Tue Feb 20 07:23:48 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 20 Feb 2018 07:23:48 -0800
Subject: [gdal-dev] int versus bool in C++ method args
Message-ID: <CACmBxys5SWevoZp67KxL=_VBbJRq2jbmKc+sOYHCmDot-Yk4kQ@mail.gmail.com>

Hi Even,

With https://trac.osgeo.org/gdal/changeset/41510, would it be possible to
use a bool for bDelete since this is a member of a C++ class?  Any C API
call could easily convert from an int to a bool and then we have cleaner
internals for the C++ side of the house.  Or is there some other reason
that had you using an int boolean?

OGRErr          removeCurve( int iIndex, int bDelete = TRUE );

Thanks,
-kurt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180220/dd8f629b/attachment.html>

From even.rouault at spatialys.com  Tue Feb 20 10:37:25 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 20 Feb 2018 19:37:25 +0100
Subject: [gdal-dev] int versus bool in C++ method args
In-Reply-To: <CACmBxys5SWevoZp67KxL=_VBbJRq2jbmKc+sOYHCmDot-Yk4kQ@mail.gmail.com>
References: <CACmBxys5SWevoZp67KxL=_VBbJRq2jbmKc+sOYHCmDot-Yk4kQ@mail.gmail.com>
Message-ID: <2103400.YN9nNteTMB@even-i700>

On mardi 20 février 2018 07:23:48 CET Kurt Schwehr wrote:
> Hi Even,
> 
> With https://trac.osgeo.org/gdal/changeset/41510, would it be possible to
> use a bool for bDelete since this is a member of a C++ class?  Any C API
> call could easily convert from an int to a bool and then we have cleaner
> internals for the C++ side of the house.  Or is there some other reason
> that had you using an int boolean?
> 
> OGRErr          removeCurve( int iIndex, int bDelete = TRUE );*

Hi Kurt,

good point. I blindly copied it from similar OGRGeometryCollection::removeGeometry()

Just changed the new methods to use bool

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180220/2920d638/attachment-0001.html>

From schwehr at gmail.com  Tue Feb 20 10:44:49 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 20 Feb 2018 10:44:49 -0800
Subject: [gdal-dev] int versus bool in C++ method args
In-Reply-To: <2103400.YN9nNteTMB@even-i700>
References: <CACmBxys5SWevoZp67KxL=_VBbJRq2jbmKc+sOYHCmDot-Yk4kQ@mail.gmail.com>
 <2103400.YN9nNteTMB@even-i700>
Message-ID: <CACmBxyvK3=qQSk0WP6h9S0buANteWQpM9s2CSBQxeC-K=uP89A@mail.gmail.com>

Awesome!  Thanks.

On Tue, Feb 20, 2018 at 10:37 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> On mardi 20 février 2018 07:23:48 CET Kurt Schwehr wrote:
>
> > Hi Even,
>
> >
>
> > With https://trac.osgeo.org/gdal/changeset/41510, would it be possible
> to
>
> > use a bool for bDelete since this is a member of a C++ class? Any C API
>
> > call could easily convert from an int to a bool and then we have cleaner
>
> > internals for the C++ side of the house. Or is there some other reason
>
> > that had you using an int boolean?
>
> >
>
> > OGRErr removeCurve( int iIndex, int bDelete = TRUE );*
>
>
>
> Hi Kurt,
>
>
>
> good point. I blindly copied it from similar OGRGeometryCollection::
> removeGeometry()
>
>
>
> Just changed the new methods to use bool
>
>
>
> Even
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180220/c66cfaac/attachment.html>

From schwehr at gmail.com  Wed Feb 21 10:32:38 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 21 Feb 2018 10:32:38 -0800
Subject: [gdal-dev] State and future of GDAL's Java interface
Message-ID: <CACmBxyvZrEEzq-xLBohGSVjNeKjwVggP+5ARu6Bz3Jmw2Z5=mA@mail.gmail.com>

Hi all,

What are peoples thoughts on the SWIG/JNI interface to GDAL?  In using it a
little bit, I have some questions for the community.

1. Many functions drop type safety and go with raw int.  e.g. gdalconst...
Would people be open to using Enums?

2. There are many useful functions that are not SWIG wrapped for Java.
 e.g. I don't see a way to get bytes to or from /vsimem (or others)
directly (without using a raster or vector driver).  Are there thoughts on
adding those?

3. There is no java in autotest.  Are folks up for the addition of some
testing?  I've been working on JUnit 4 tests that I can contribute (and
switch to the GDAL license).  I will start putting what I have in autotest2
soon so at least folks can see what I have

4. What is the minimum version of Java that we must support?  Can we safely
add to the java side using features from newer versions?  e.g. try with
resources in
https://gist.github.com/schwehr/481dfbfad98815c6d45c3d22f12c41d0

Thanks,
-kurt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180221/2bd25262/attachment.html>

From schwehr at gmail.com  Wed Feb 21 12:47:26 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 21 Feb 2018 12:47:26 -0800
Subject: [gdal-dev] State and future of GDAL's Java interface
In-Reply-To: <CACmBxyvZrEEzq-xLBohGSVjNeKjwVggP+5ARu6Bz3Jmw2Z5=mA@mail.gmail.com>
References: <CACmBxyvZrEEzq-xLBohGSVjNeKjwVggP+5ARu6Bz3Jmw2Z5=mA@mail.gmail.com>
Message-ID: <CACmBxytg4+tpT2-Cb+8whGSgJiMJo_8g5XZ2VHX3cShiVHQJdg@mail.gmail.com>

Another area for improvements would seem to be returning List<String>
rather than Vector for things that only return a list of strings.  Yes?

e.g. The @SuppressWarnings("unchecked") is a bummer:

  @Test
  public void fileSystemsPrefixes() throws Exception {
    @SuppressWarnings("unchecked")
    // Convert from Vector.
    List<String> prefixes = gdal.GetFileSystemsPrefixes();
   assertThat(prefixes)
        .containsAllOf(
            "/vsicrypt/",
            "/vsigzip/",


On Wed, Feb 21, 2018 at 10:32 AM, Kurt Schwehr <schwehr at gmail.com> wrote:

> Hi all,
>
> What are peoples thoughts on the SWIG/JNI interface to GDAL?  In using it
> a little bit, I have some questions for the community.
>
> 1. Many functions drop type safety and go with raw int.  e.g. gdalconst...
> Would people be open to using Enums?
>
> 2. There are many useful functions that are not SWIG wrapped for Java.
>  e.g. I don't see a way to get bytes to or from /vsimem (or others)
> directly (without using a raster or vector driver).  Are there thoughts on
> adding those?
>
> 3. There is no java in autotest.  Are folks up for the addition of some
> testing?  I've been working on JUnit 4 tests that I can contribute (and
> switch to the GDAL license).  I will start putting what I have in autotest2
> soon so at least folks can see what I have
>
> 4. What is the minimum version of Java that we must support?  Can we
> safely add to the java side using features from newer versions?  e.g. try
> with resources in https://gist.github.com/schwehr/
> 481dfbfad98815c6d45c3d22f12c41d0
>
> Thanks,
> -kurt
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180221/dc9e599e/attachment.html>

From even.rouault at spatialys.com  Wed Feb 21 13:08:02 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 21 Feb 2018 22:08:02 +0100
Subject: [gdal-dev] State and future of GDAL's Java interface
In-Reply-To: <CACmBxytg4+tpT2-Cb+8whGSgJiMJo_8g5XZ2VHX3cShiVHQJdg@mail.gmail.com>
References: <CACmBxyvZrEEzq-xLBohGSVjNeKjwVggP+5ARu6Bz3Jmw2Z5=mA@mail.gmail.com>
 <CACmBxytg4+tpT2-Cb+8whGSgJiMJo_8g5XZ2VHX3cShiVHQJdg@mail.gmail.com>
Message-ID: <3740298.zuLUOXWRrs@even-i700>

Kurt,

A "refresh" of the GDAL Java API, with its current Java 1.4 taste, would probably not be a bad 
idea for newcomers, but for already existing users, this would probably be more an 
annoyance. So we should probably treat it as we would do with a C++ API breakage. Probably 
material for a GDAL 3.0

Feedback from users could be interested in that respect.

Even


> Another area for improvements would seem to be returning List<String>
> rather than Vector for things that only return a list of strings.  Yes?
> 
> e.g. The @SuppressWarnings("unchecked") is a bummer:
> 
>   @Test
>   public void fileSystemsPrefixes() throws Exception {
>     @SuppressWarnings("unchecked")
>     // Convert from Vector.
>     List<String> prefixes = gdal.GetFileSystemsPrefixes();
>    assertThat(prefixes)
>         .containsAllOf(
>             "/vsicrypt/",
>             "/vsigzip/",
> 
> On Wed, Feb 21, 2018 at 10:32 AM, Kurt Schwehr <schwehr at gmail.com> wrote:
> > Hi all,
> > 
> > What are peoples thoughts on the SWIG/JNI interface to GDAL?  In using it
> > a little bit, I have some questions for the community.
> > 
> > 1. Many functions drop type safety and go with raw int.  e.g. gdalconst...
> > Would people be open to using Enums?
> > 
> > 2. There are many useful functions that are not SWIG wrapped for Java.
> > 
> >  e.g. I don't see a way to get bytes to or from /vsimem (or others)
> > 
> > directly (without using a raster or vector driver).  Are there thoughts on
> > adding those?
> > 
> > 3. There is no java in autotest.  Are folks up for the addition of some
> > testing?  I've been working on JUnit 4 tests that I can contribute (and
> > switch to the GDAL license).  I will start putting what I have in
> > autotest2
> > soon so at least folks can see what I have
> > 
> > 4. What is the minimum version of Java that we must support?  Can we
> > safely add to the java side using features from newer versions?  e.g. try
> > with resources in https://gist.github.com/schwehr/
> > 481dfbfad98815c6d45c3d22f12c41d0
> > 
> > Thanks,
> > -kurt


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180221/25c6cc4f/attachment.html>

From jerryfaust1 at gmail.com  Wed Feb 21 22:34:28 2018
From: jerryfaust1 at gmail.com (Jerry Faust)
Date: Wed, 21 Feb 2018 22:34:28 -0800
Subject: [gdal-dev] ShapeLib/GDAL support for Dates and Booleans
Message-ID: <CACEsS4Qh87f8rwX_dqoFMMyyO28hHPyWVSC-wZePLoadrbWp6w@mail.gmail.com>

Hello.

My name is Jerry Faust, and I'm a recent contributor to MapWinGIS.  We
provide GDAL/OGR layer support, and we use the embedded ShapeLib calls to
work with Shapefiles as our primary data source.  Specifically, we make
direct DBF calls into dbfopen.c through gdal2xx.dll, bypassing the
OGRDatasource/OGRLayer wrappers.

We are looking to add support for Date and Boolean field types, and while I
had thought that perhaps I could add support without having to change
anything within ShapeLib or OGR, alas, I could not.  Inevitably, since the
dates are stored as Integers, having the 'N' field descriptor rather than
the 'D' field descriptor, our code had no way to determine that the field
was a Date as opposed to an Integer.



I believe that the OGR constructs handle these issues through the OGR Field
Definition, but since we bypass those constructs, we get the data back in a
more 'raw' form.  There are similar issues with the Logical field type (not
with ShapeLib, but with OGR).

Interestingly, is appears that ShapeLib is very close to supporting Dates
altogether, with various 'if' and 'switch' statements checking for the 'D'
descriptor.  I presume this is because you have to be able to read
Shapefiles created externally, which would have the 'D' descriptor, but you
don't save them that way.

I have made minimal changes to ShapeLib files (Shapefil.h and dbfopen.c) in
an effort to add raw Date and Logical support, and had to make a couple
small changes to the OGR code as well (making sure that Shapefiles saved
through the modified ShapeLib are still readable with OGR).

I would like to submit these changes for review, in hopes that something
along these lines could be integrated into the official release.  I
acknowledge that there may be things I don't yet understand, and that
perhaps there are better ways to do what I have done, but it's a starting
point.

How would I go about submitting these changes for consideration?

Thank you.


Kind Regards.
Jerry Faust.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180221/761b86e7/attachment-0001.html>

From even.rouault at spatialys.com  Thu Feb 22 01:33:09 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 22 Feb 2018 10:33:09 +0100
Subject: [gdal-dev] ShapeLib/GDAL support for Dates and Booleans
In-Reply-To: <CACEsS4Qh87f8rwX_dqoFMMyyO28hHPyWVSC-wZePLoadrbWp6w@mail.gmail.com>
References: <CACEsS4Qh87f8rwX_dqoFMMyyO28hHPyWVSC-wZePLoadrbWp6w@mail.gmail.com>
Message-ID: <11106375.h8bkrH3CRi@even-i700>

Jerry,
> 
> My name is Jerry Faust, and I'm a recent contributor to MapWinGIS.  We
> provide GDAL/OGR layer support, and we use the embedded ShapeLib calls to
> work with Shapefiles as our primary data source.  Specifically, we make
> direct DBF calls into dbfopen.c through gdal2xx.dll, bypassing the
> OGRDatasource/OGRLayer wrappers.

Note that this shapelib integrated in GDAL is considered as an internal detail of GDAL and 
that some builds might have the shapelib symbols hidden (will be the case in GDAL 2.3 on 
Unix builds)

> 
> We are looking to add support for Date and Boolean field types, and while I
> had thought that perhaps I could add support without having to change
> anything within ShapeLib or OGR, alas, I could not.  Inevitably, since the
> dates are stored as Integers, having the 'N' field descriptor rather than
> the 'D' field descriptor, our code had no way to determine that the field
> was a Date as opposed to an Integer.

Where do you find that dates are stored with N field descriptor ? OGR writes and read them 
with D descriptor, 8 characters width and store values as decimal numbers of value YY * 
10000 + MM * 100 + DD.

> 
> I believe that the OGR constructs handle these issues through the OGR Field
> Definition, but since we bypass those constructs, we get the data back in a
> more 'raw' form.  There are similar issues with the Logical field type (not
> with ShapeLib, but with OGR).

Yes I realized that we haven't upgraded the OGR side to convert DBF Logical field type to 
(OFTInteger, OFSTBoolean). But I failed to find DBF files  in the wild with logical field types.

> I have made minimal changes to ShapeLib files (Shapefil.h and dbfopen.c) in
> an effort to add raw Date and Logical support, and had to make a couple
> small changes to the OGR code as well (making sure that Shapefiles saved
> through the modified ShapeLib are still readable with OGR).
> 
> I would like to submit these changes for review, in hopes that something
> along these lines could be integrated into the official release.  I
> acknowledge that there may be things I don't yet understand, and that
> perhaps there are better ways to do what I have done, but it's a starting
> point.
> 
> How would I go about submitting these changes for consideration?

I'd suggest a pull request against the github mirror at
https://github.com/OSGeo/gdal

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180222/434e6337/attachment.html>

From juliermeopensourcedeveloper at gmail.com  Thu Feb 22 07:17:39 2018
From: juliermeopensourcedeveloper at gmail.com (Julierme Pinheiro)
Date: Thu, 22 Feb 2018 12:17:39 -0300
Subject: [gdal-dev] Constructing GDAL_WMS XML files for TMS servers
Message-ID: <CAKTKyJJyU27n-3ZoJKU4hGwT7NixSDTNZUbJ6iQPC1kBs9AEWQ@mail.gmail.com>

Hi all,

I found this discussion related to my question: http://osgeo-org.1560.x6.
nabble.com/gdal-dev-Constructing-GDAL-WMS-XML-files-for-TMS-servers-
td5033787.html.

I have several sar images in geoserver and I need to create a XML file for
each TMS service in order to load them in Qgis.
For the wmts services I used the folowing gdal function:
gdal_translate "WMTS:http://maps.wien.gv.at/wmts/1.0.0/WMTSCapabilities.
xml,layer=lb" wmts.xml -of WMTS

Now, what about TMS services in geoserver? Is it possible to create the XML
files using gdal_tranlate for a TMS capabilities request as in "
http://localhost:8080/geoserver/gwc/service/tms/1.0.0/"? If so,  how to
that for a specific layer?

Thank you for your time in advance

Kind Regards

Julierme
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180222/3d929984/attachment.html>

From even.rouault at spatialys.com  Thu Feb 22 09:10:49 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 22 Feb 2018 18:10:49 +0100
Subject: [gdal-dev] Constructing GDAL_WMS XML files for TMS servers
In-Reply-To: <CAKTKyJJyU27n-3ZoJKU4hGwT7NixSDTNZUbJ6iQPC1kBs9AEWQ@mail.gmail.com>
References: <CAKTKyJJyU27n-3ZoJKU4hGwT7NixSDTNZUbJ6iQPC1kBs9AEWQ@mail.gmail.com>
Message-ID: <7116276.hSJZKRz8Ws@even-i700>

On jeudi 22 février 2018 12:17:39 CET Julierme Pinheiro wrote:
> Hi all,
> 
> I found this discussion related to my question: http://osgeo-org.1560.x6.
> nabble.com/gdal-dev-Constructing-GDAL-WMS-XML-files-for-TMS-servers-
> td5033787.html.
> 
> I have several sar images in geoserver and I need to create a XML file for
> each TMS service in order to load them in Qgis.
> For the wmts services I used the folowing gdal function:
> gdal_translate "WMTS:http://maps.wien.gv.at/wmts/1.0.0/WMTSCapabilities.
> xml,layer=lb" wmts.xml -of WMTS
> 
> Now, what about TMS services in geoserver? Is it possible to create the XML
> files using gdal_tranlate for a TMS capabilities request as in "
> http://localhost:8080/geoserver/gwc/service/tms/1.0.0/"? If so,  how to
> that for a specific layer?

I haven't a GeoServer installation handy, but normally something like

gdal_translate -of WMS http://localhost:8080/geoserver/gwc/service/tms/1.0.0/{layername} tms.xml

should work

You may need to modify the URL such that it points to a XML document whose root element is <TileMap>

If you do

gdalinfo  http://localhost:8080/geoserver/gwc/service/tms/1.0.0

it should list all the layers as subdatasets

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180222/98f46c7b/attachment.html>

From robertofig85 at gmail.com  Thu Feb 22 14:36:26 2018
From: robertofig85 at gmail.com (Roberto Ribeiro)
Date: Thu, 22 Feb 2018 19:36:26 -0300
Subject: [gdal-dev] Problem while building JPEG12
Message-ID: <CANTZQ+w5_rL-KJhJY7XGpP9U-35W9Bx93fxmCH+EEvCgpfy-eg@mail.gmail.com>

Not entirely sure this question should be posted here, but given that the
wiki gives instructions on how to do it, and at least part of the code was
written by Frank, I'm taking a leap. Sorry if it's the wrong place.

So, the wiki states that building for 12-bits is just a matter of defining
BITS_IN_JSAMPLE to 12, and defining NEED_12_BIT_NAMES. I did so, but while
running make, the wrtarga.c file accuses an error: "Sorry, this code only
copes with 8-bit JSAMPLEs. /* deliberate syntax err */", and this is
breaking the build.

I'm using the latest release from http://www.ijg.org/files/. Now, the wiki
states that support for 12-bit JPEG is a branch that was never implemented
on main trunk, and that I should get this version from maptools.org, but
that website seems to not have been updated in a long while, so I'm
somewhat sketchy of it.

Is it still so that a branch is needed? If so, where to get it? If not,
what to do about the error? I frankly could do without Targa support, if
need be. There is a "without-package" flag in the configure file, would
this be the way?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180222/1f7f60cd/attachment.html>

From nicolas.cadieux at archeotec.ca  Thu Feb 22 23:42:50 2018
From: nicolas.cadieux at archeotec.ca (Nicolas Cadieux)
Date: Fri, 23 Feb 2018 02:42:50 -0500
Subject: [gdal-dev] Resampling rasters with search radius
Message-ID: <0F12B06A-5286-4525-843E-343D013F6654@archeotec.ca>

Hi,

I am creating rasters with Lidar data using GDAL grid. I have very large datasets. This raster has 1m pixels.  For now, I am using nearest neighbours with a 1x1 m. radius. This is fast.

My goal is  then  to make 4 rasters all having the same 30 m pixel posting but I want these new rasters created with the average of a moving window (or search radius) having a 1x1m, 10x10m, 30x30m and 45x45m. (Yes I know that creating a file with a pixel posting of 30m from the average of a 45m search radius is not conventional.)  I know I could do this with GDAL grid from the Lidar but it is much too slow for the size of my data. 

 So the idea was to use GDAL warp with the 1x1m raster. Can I set a search radius size (or moving window size) with GDAL warp?  

If not, should I save my 1x1m raster as a csv point file and use GDAL grid with this new much smaller file that is easier to handle than the Lidar file?

Any ideas?
Thanks
Nicolas

From johan.de.braak at eleaf.com  Tue Feb 27 00:21:56 2018
From: johan.de.braak at eleaf.com (Johan de Braak)
Date: Tue, 27 Feb 2018 01:21:56 -0700 (MST)
Subject: [gdal-dev] Option names in python bindings not interchangeable
Message-ID: <1519719716826-0.post@n6.nabble.com>

Hi,

Why is it that in gdal.WarpOptions the output projection is called dstSRS
while in gdal.RasterizeOptions it is called outputSRS? Is there a difference
and if not, why is not the same name used?

Thanks,

Johan



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From cpaulik at vandersat.com  Tue Feb 27 09:10:11 2018
From: cpaulik at vandersat.com (Christoph Paulik)
Date: Tue, 27 Feb 2018 18:10:11 +0100
Subject: [gdal-dev] gdalbuildvrt with different resolutions
Message-ID: <87371mbbpo.fsf@vandersat.com>


Hi,

Would it be possible/a good idea to add an option to gdalbuildvrt to force all files
to be of the same resolution?

We have files that go into a VRT that should all have the same
resolution and I would like an error to be raised if they do not. We
could of course implement an external check but I think this would be a
good feature for gdal.

An argument like

-resolution same

could force a check.

All the best,
Christoph

-- 

-------------------------------------------------------
Christoph Paulik
VanderSat // Remote Sensing Scientists
Wilhelminastraat 43a, 2011 VK, Haarlem (NL), The Netherlands
W: www.vandersat.com
PGP: 8CFC D7DF 2867 B2DC 749B  1B0A 6E3B A262 5186 A0AC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 832 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180227/cefba33d/attachment.sig>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Feb 28 05:04:57 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 28 Feb 2018 06:04:57 -0700 (MST)
Subject: [gdal-dev] gdalbuildvrt with different resolutions
In-Reply-To: <87371mbbpo.fsf@vandersat.com>
References: <87371mbbpo.fsf@vandersat.com>
Message-ID: <1519823097184-0.post@n6.nabble.com>

Christoph Paulik wrote
> Hi,
> 
> Would it be possible/a good idea to add an option to gdalbuildvrt to force
> all files
> to be of the same resolution?
> 
> We have files that go into a VRT that should all have the same
> resolution and I would like an error to be raised if they do not. We
> could of course implement an external check but I think this would be a
> good feature for gdal.
> 
> An argument like
> 
> -resolution same
> 
> could force a check.
> 
> All the best,
> Christoph

Hi,

The "-skip_different_projection" option in the gdaltindex utility
http://www.gdal.org/gdaltindex.html has some analogy with your suggestion.

You did not define the meaning of "same" and "different" resolutions. Would
you like to give the "right" resolution by hand or should all the files be
pre-scanned so that user gets a list of all different resolutions that
appear in the data?

I feel that your need is rather specific for a general purpose tool like
gdalbuildvrt. What if you write a Python file filtering script and publish
that for example in
https://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples, topped
up with a manual page in the user wiki section? Such script could be made to
filter the source files according to other criteria as well: SRS, band
count, bit depth, metadata etc. 

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From cpaulik at vandersat.com  Wed Feb 28 06:14:51 2018
From: cpaulik at vandersat.com (Christoph Paulik)
Date: Wed, 28 Feb 2018 15:14:51 +0100
Subject: [gdal-dev] gdalbuildvrt with different resolutions
In-Reply-To: <1519823097184-0.post@n6.nabble.com>
References: <87371mbbpo.fsf@vandersat.com> <1519823097184-0.post@n6.nabble.com>
Message-ID: <87y3jd9p5w.fsf@vandersat.com>


Hi,

What I imagined would be the option for getting an error message if not all of the files have
the same resolution.

Something like -allow_projection_difference but the other way around.

Maybe -disallow_different_resolutions is clearer than my previous suggestion. 

All the best,
Christoph

jratike80 writes:

> Christoph Paulik wrote
>> Hi,
>> 
>> Would it be possible/a good idea to add an option to gdalbuildvrt to force
>> all files
>> to be of the same resolution?
>> 
>> We have files that go into a VRT that should all have the same
>> resolution and I would like an error to be raised if they do not. We
>> could of course implement an external check but I think this would be a
>> good feature for gdal.
>> 
>> An argument like
>> 
>> -resolution same
>> 
>> could force a check.
>> 
>> All the best,
>> Christoph
>
> Hi,
>
> The "-skip_different_projection" option in the gdaltindex utility
> http://www.gdal.org/gdaltindex.html has some analogy with your suggestion.
>
> You did not define the meaning of "same" and "different" resolutions. Would
> you like to give the "right" resolution by hand or should all the files be
> pre-scanned so that user gets a list of all different resolutions that
> appear in the data?
>
> I feel that your need is rather specific for a general purpose tool like
> gdalbuildvrt. What if you write a Python file filtering script and publish
> that for example in
> https://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/samples, topped
> up with a manual page in the user wiki section? Such script could be made to
> filter the source files according to other criteria as well: SRS, band
> count, bit depth, metadata etc. 
>
> -Jukka Rahkonen-


-- 

-------------------------------------------------------
Christoph Paulik
VanderSat // Remote Sensing Scientists
Wilhelminastraat 43a, 2011 VK, Haarlem (NL), The Netherlands
W: www.vandersat.com
PGP: 8CFC D7DF 2867 B2DC 749B  1B0A 6E3B A262 5186 A0AC
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 832 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180228/80da11d9/attachment.sig>

