From ian.walberg at airborne.aero  Mon Apr  1 12:49:07 2013
From: ian.walberg at airborne.aero (Ian Walberg)
Date: Mon, 1 Apr 2013 15:49:07 -0400
Subject: [gdal-dev] Lat/Long to WGS84 image co-ordinate conversion
Message-ID: <D12323219CEDB24AA8FAE53FF3F59FB40393C9F7@BE28.exg3.exghost.com>

Folks,

 

I am sure this is the wrong list and I am sure I will describe what we
need wrongly but please be gentle J

 

We are using full up mapserver installations for a number of projects
and now need to build a small application which uses map tiles with city
labels displayed on the tiles.


The application has to be written in native QT/QML and we cannot see a
way of using something like OpenLayers to display the labels.

 

So here is the real question, how do we take the sqlite databases we
have an generate the tile X Y Z and pixel x/y for each city using
existing utilities? We were hoping one of the GDAL or OGR utils did this
but cannot work out which or how.

 

Thanks

 

Ian

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130401/89ac9823/attachment.html>

From nikhil.parupalli at iictechnologies.com  Mon Apr  1 23:43:06 2013
From: nikhil.parupalli at iictechnologies.com (Nikhil Sai Parupalli)
Date: Tue, 2 Apr 2013 06:43:06 +0000
Subject: [gdal-dev] Display of S57 data sets
Message-ID: <139560E1825F4648BDA4F32853B530A7C8D389E4@IICEXHC01.iictechnologies.local>

Hi All,

I could parse the S57 data set to my application written in writing it in Windows C# using VS2010 but I am stuck without a module to display the nautical charts.
Nautical charts are formatted to the NOAA S57 or S60 formats of the original .BSB format.
Does anyone know of a DLL or plug in or source code that I can use to display these chart formats. These particular formats are exclusive to the nautical world as such it is difficult to locate code (dll etc) that I can use. And I am yet to find any examples on how to build your own viewer.



Thanks
Nikhil Sai Parupalli

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130402/8bea0ad8/attachment.html>

From dengo at gmx.net  Tue Apr  2 02:43:41 2013
From: dengo at gmx.net (Dennis Gocke)
Date: Tue, 2 Apr 2013 11:43:41 +0200 (CEST)
Subject: [gdal-dev] GDAL/OGR C# wrapper and UTF8
Message-ID: <trinity-eba9f14f-7e23-43bd-a045-a68e4803668c-1364895821731@3capp-gmx-bs04>

Hi,

I have a few questions regarding the C# wrapper and UTF8 encoded strings.


This is mostly an issue when working with OGR. If I understand correctly strings are supposed to be encoded in UTF8 internally. Some drivers might not follow that rule, but most do, is that correct?


The problem that I have is that almost always the C# wrapper assumes strings to be ANSI encoded.


Only in some cases, when the wrapper handles filepaths, it uses the correct UTF8 encoding, and even then the workaround is a bit strange. For instance when ?converting? a string to OGR it uses Encoding.Default.GetString(Encoding.UTF8.GetBytes(utf8_path)). So it essentially converts the path to a ?wrongly? encoded string, so that when it gets marshaled to unmanaged code which uses ANSI encoding by default, it again results to the correct bytes of a UTF8 encoded string. The reason for the strange workaround probably is that .NET does not support marshaling of strings to unmanaged UTF8 encoded strings, but I think it still would be better to not use automatic marshaling of strings at all and instead convert the string to a correct byte array in .NET and then pass the byte array/pointer to unmanaged code. The same for the reverse direction, get pointer from unmanaged code and convert to managed string using the correct UTF8 encoding.


But as I said above the main problem is that in most cases the default ANSI encoding is used instead of UTF8. Some examples are Layer.SetAttributefilter, Layer.ExecuteSQL, FieldDefn.SetName, FieldDefn.GetName?


Because I don?t really understand how SWIG works, I have created my own .NET C# wraps for these methods using the C API of OGR. That works fine but I thought that others might have the same problems, so I decided to post this.


Also some methods still seem to expect ASCII/ANSI encoded string, is there an easy way to determine what encoding the method expects?
For instance CPLSetConfigOption and everything that has to do with SpatialReference don?t work correctly when using UTF8 encoded strings (Although WKT of SpatialReferences shouldn?t normally contain non-ASCII characters and then of course it does not make a difference.)


Kind regards,
Dennis

From szekerest at gmail.com  Tue Apr  2 03:52:53 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 2 Apr 2013 12:52:53 +0200
Subject: [gdal-dev] GDAL/OGR C# wrapper and UTF8
In-Reply-To: <trinity-eba9f14f-7e23-43bd-a045-a68e4803668c-1364895821731@3capp-gmx-bs04>
References: <trinity-eba9f14f-7e23-43bd-a045-a68e4803668c-1364895821731@3capp-gmx-bs04>
Message-ID: <CACALY+TrPsppZ+LS9-EVnMwiUuOs-x7foJSdJGvHc649uiQq=Q@mail.gmail.com>

2013/4/2 Dennis Gocke <dengo at gmx.net>

> Hi,
>
> I have a few questions regarding the C# wrapper and UTF8 encoded strings.
>
>
> This is mostly an issue when working with OGR. If I understand correctly
> strings are supposed to be encoded in UTF8 internally. Some drivers might
> not follow that rule, but most do, is that correct?
>
>
> The problem that I have is that almost always the C# wrapper assumes
> strings to be ANSI encoded.
>
>
> Only in some cases, when the wrapper handles filepaths, it uses the
> correct UTF8 encoding, and even then the workaround is a bit strange. For
> instance when ?converting? a string to OGR it uses
> Encoding.Default.GetString(Encoding.UTF8.GetBytes(utf8_path)). So it
> essentially converts the path to a ?wrongly? encoded string, so that when
> it gets marshaled to unmanaged code which uses ANSI encoding by default, it
> again results to the correct bytes of a UTF8 encoded string. The reason for
> the strange workaround probably is that .NET does not support marshaling of
> strings to unmanaged UTF8 encoded strings, but I think it still would be
> better to not use automatic marshaling of strings at all and instead
> convert the string to a correct byte array in .NET and then pass the byte
> array/pointer to unmanaged code. The same for the reverse direction, get
> pointer from unmanaged code and convert to managed string using the correct
> UTF8 encoding.
>
>
Hi Dennis,

I don't exactly follow your statements, it might be reasonable to get some
examples to make sure about the issue. The utf8_path parameter is
essentially an unicode string at the managed side and the .NET default
marshaler doesn't seem to be capable to convert it to UTF8 by default. It's
true that we might probably pass the byte array returned by
Encoding.UTF8.GetBytes(utf8_path) to GDAL directly, but I guess it'd
require an extra work either by using Marshal.Copy or pinning the array
with a handle to make sure the garbage collector won't collect it until the
unmanaged function call completes.


>
> But as I said above the main problem is that in most cases the default
> ANSI encoding is used instead of UTF8. Some examples are
> Layer.SetAttributefilter, Layer.ExecuteSQL, FieldDefn.SetName,
> FieldDefn.GetName?
>
>
As far as I remember only the pathnames are treated as utf8 in GDAL, but it
might have been changed since I last reviewed the code. Encoding of the
fieldnames is somewhat driver specific which should probably be handled at
application level.


>
> Because I don?t really understand how SWIG works, I have created my own
> .NET C# wraps for these methods using the C API of OGR. That works fine but
> I thought that others might have the same problems, so I decided to post
> this.
>
>
Do you have an example which demonstrates the incorrect behaviour of the
current code?

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130402/02041e35/attachment.html>

From sylvain_duclos at yahoo.com  Tue Apr  2 05:17:28 2013
From: sylvain_duclos at yahoo.com (s duclos)
Date: Tue, 2 Apr 2013 05:17:28 -0700 (PDT)
Subject: [gdal-dev] Display of S57 data sets
In-Reply-To: <139560E1825F4648BDA4F32853B530A7C8D389E4@IICEXHC01.iictechnologies.local>
References: <139560E1825F4648BDA4F32853B530A7C8D389E4@IICEXHC01.iictechnologies.local>
Message-ID: <1364905048.91558.YahooMailNeo@web122205.mail.ne1.yahoo.com>

Nikhil,

You can find S52 rendering in OpenEV CVS in openev/contrib/S52.

This work is base on very old S52 specs.

Note that S57/S52 specs are in the process of been replace by S-100/S-101.

For further info e-mail me directly as S52 as little to do with GDAL.


rgds,

Sylvain.








>________________________________
> From: Nikhil Sai Parupalli <nikhil.parupalli at iictechnologies.com>
>To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org> 
>Cc: Frank Warmerdam <warmerdam at pobox.com>; s duclos <sylvain_duclos at yahoo.com> 
>Sent: Tuesday, April 2, 2013 2:43:06 AM
>Subject: Display of S57 data sets
> 
>
> 
>Hi All,
>?
>I could parse the S57 data set to my application written in writing it in Windows C# using VS2010 but I am stuck without a module to display the nautical charts. 
>Nautical charts are formatted to the NOAA S57 or S60 formats of the original .BSB format.
>Does anyone know of a DLL or plug in or source code that I can use to display these chart formats. These particular formats are exclusive to the nautical world as such it is difficult to locate code (dll etc) that I can use. And I am yet to find any examples on how to build your own viewer.
>?
>?
>?
>Thanks 
>Nikhil Sai Parupalli
>?
>
>

From dengo at gmx.net  Tue Apr  2 07:41:53 2013
From: dengo at gmx.net (Dennis Gocke)
Date: Tue, 2 Apr 2013 16:41:53 +0200 (CEST)
Subject: [gdal-dev] GDAL/OGR C# wrapper and UTF8
Message-ID: <trinity-8319b2b4-b89c-42b7-9e03-081f873e6c60-1364913712880@3capp-gmx-bs55>

Thanks for the quick reply.

Let's back up a bit. Just take the following two methods of the Feature class in the OGR wrapper:
public string GetFieldAsString(int id);
public void SetField(int id, string value);

For these two the wrapper also uses no special encoding, which means that ANSI is used when strings are marshaled from/to unmanaged code.

As I understood it, this is incorrect for some time now. As stated in http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode:
"It is declared that OGR string attribute values will be in UTF-8. This means that OGR drivers are responsible for translating format specific representations to UTF-8 when reading, and back to the format specific representation when writing."

I created a workaround for these two methods in the wrapper for myself many months ago, that's why I forgot to mention these in my previous post.

Only if we agree that the wrapper is doing it wrong for these two essential methods it makes sense to discuss the other methods.
For instance if you take the Attribute Filter: Assuming you have a feature with attribute Name='M?nchen'. Because GetFieldAsString uses wrong Encoding you will get 'M??nchen'. Using this for an Attribute Filter "Name = 'M??nchen'" will work, because SetAttributeFilter also uses ANSI encoding, meaning that the problem will cancel itself out. But if GetFieldAsString would correctly use UTF8 encoding, it only makes sense that SetAttributeFilter would also use UTF8 encoding, otherwise "Name = 'M?nchen'" will obviously not work.

I somehow hoped or assumed that this 'redesign' mentioned in rfc23 has progressed since then, so that a consistent encoding is also used for the other methods.

And it seemed to have apart from the C# wrapper.

I might be wrong, but if I am I still think it would be greatly beneficial if a consistent encoding is also used for Field Names, Attibute Filter, SQL statements, etc...

Regarding marshaling strings. Marshal.Copy and pinning is not explicitly needed, because when managed arrays are marshaled they are automatically pinned.
So just converting strings to UTF8 encoded managed byte arrays (byte[]) and passing the array instead of the string will work fine.
One just needs to be careful that the byte array needs to be zero-terminated.
This is what I use:
        public static byte[] StringToUtf8Bytes(string str)
        {
            if (str == null)
            {
                return null;
            }

            Encoding encoder = Encoding.UTF8;
            int strLen = str.Length;
            int nativeLength = encoder.GetMaxByteCount(strLen);
            byte[] bytes = new byte[nativeLength + 1]; // zero terminated
            encoder.GetBytes(str, 0, str.Length, bytes, 0);
            return bytes;
        }
		
As far as examples go: Any Shapefile should do. Although the DBF might be in different encodings OGR internally always converts the field attribute strings to UTF8, but the C# wrapper then interprets the strings as being in ANSI.
(Funny enough when you have an ANSI encoded DBF and set the Config Option SHAPE_ENCODING to UTF8 the C# wrapper will 'correct' the mistake done by the Config Option which forces the wrong encoding in this case. Before I understood that the problem was actually the C# wrapper this was driving me crazy.)
		
Best regards,
Dennis

From ragi at burhum.com  Tue Apr  2 10:13:33 2013
From: ragi at burhum.com (rburhum)
Date: Tue, 2 Apr 2013 10:13:33 -0700 (PDT)
Subject: [gdal-dev] GDAL/OGR C# wrapper and UTF8
In-Reply-To: <trinity-8319b2b4-b89c-42b7-9e03-081f873e6c60-1364913712880@3capp-gmx-bs55>
References: <trinity-eba9f14f-7e23-43bd-a045-a68e4803668c-1364895821731@3capp-gmx-bs04>
	<CACALY+TrPsppZ+LS9-EVnMwiUuOs-x7foJSdJGvHc649uiQq=Q@mail.gmail.com>
	<trinity-8319b2b4-b89c-42b7-9e03-081f873e6c60-1364913712880@3capp-gmx-bs55>
Message-ID: <1364922813054-5044112.post@n6.nabble.com>

Hello Tamas and Dennis,

Indeed the C# bindings to not handle UTF8 characters correctly. I submitted
a bug report about it a couple of months ago with a reproducible case.

http://trac.osgeo.org/gdal/ticket/4971

For the case that I submitted, the values for the fields in C-API GDAL are
coming out with correct utf8 strings, but the bindings just blindly copy the
utf8 chars into a UTF-16 strings. In order to work around the problem, I had
to pick out the relevant bits from the incorrect UTF-16 string, copy them to
a byte array, and re-encoded from UTF8 --> UTF16 correctly. It is all in the
ticket and I would happy to elaborate more if needed.

- Ragi



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-GDAL-OGR-C-wrapper-and-UTF8-tp5044028p5044112.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From szekerest at gmail.com  Tue Apr  2 10:29:08 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 2 Apr 2013 19:29:08 +0200
Subject: [gdal-dev] GDAL/OGR C# wrapper and UTF8
In-Reply-To: <1364922813054-5044112.post@n6.nabble.com>
References: <trinity-eba9f14f-7e23-43bd-a045-a68e4803668c-1364895821731@3capp-gmx-bs04>
	<CACALY+TrPsppZ+LS9-EVnMwiUuOs-x7foJSdJGvHc649uiQq=Q@mail.gmail.com>
	<trinity-8319b2b4-b89c-42b7-9e03-081f873e6c60-1364913712880@3capp-gmx-bs55>
	<1364922813054-5044112.post@n6.nabble.com>
Message-ID: <CACALY+RvQ_TeoaJg1sAGnLo=N3CjLNE8dAyZwEO5hWuQoDqHdA@mail.gmail.com>

Thanks for you all,

I'll be trying to provide a fix for these issues this week.

Best regards,

Tamas




2013/4/2 rburhum <ragi at burhum.com>

> Hello Tamas and Dennis,
>
> Indeed the C# bindings to not handle UTF8 characters correctly. I submitted
> a bug report about it a couple of months ago with a reproducible case.
>
> http://trac.osgeo.org/gdal/ticket/4971
>
> For the case that I submitted, the values for the fields in C-API GDAL are
> coming out with correct utf8 strings, but the bindings just blindly copy
> the
> utf8 chars into a UTF-16 strings. In order to work around the problem, I
> had
> to pick out the relevant bits from the incorrect UTF-16 string, copy them
> to
> a byte array, and re-encoded from UTF8 --> UTF16 correctly. It is all in
> the
> ticket and I would happy to elaborate more if needed.
>
> - Ragi
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-GDAL-OGR-C-wrapper-and-UTF8-tp5044028p5044112.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130402/9269fbd3/attachment.html>

From dengo at gmx.net  Wed Apr  3 01:02:47 2013
From: dengo at gmx.net (Dennis Gocke)
Date: Wed, 3 Apr 2013 10:02:47 +0200 (CEST)
Subject: [gdal-dev] GDAL/OGR C# wrapper and UTF8
Message-ID: <trinity-3da21165-b922-45be-b80b-b4498655c781-1364976167219@3capp-gmx-bs20>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130403/af3425b8/attachment.html>

From dengo at gmx.net  Wed Apr  3 02:13:22 2013
From: dengo at gmx.net (Dennis Gocke)
Date: Wed, 3 Apr 2013 11:13:22 +0200 (CEST)
Subject: [gdal-dev] GDAL/OGR C# wrapper and UTF8
Message-ID: <trinity-0e48f79d-0095-48d5-8af8-67c2cbe3a13b-1364980402420@3capp-gmx-bs28>

Tamas,
If you don't mind me asking, what exactly is your plan?
Are you planning to just fix the methods related to setting and getting of feature string attributes or are you planning to use UTF8 encoding for other methods too?

This is a very delicate problem, because if we assume that an unmanaged string is UTF8 encoded but is actually ANSI encoded and use Encoding.UTF8.GetString() information might actually be lost that can not be recovered retroactively by calling Encoding.Default.GetString(Encoding.UTF8.GetBytes(str)).
This is not the case for the other way around when assuming ANSI encoding when it is actually UTF8 encoded where Encoding.UTF8.GetString(Encoding.Default.GetBytes(str)) will recover the correct string.

I think it would be very desirable, if GDAL/OGR in general would use a consistent string encoding internally for all methods or at least provide information about when which encoding is used if that's at all possible.

Best regards,
Dennis

From mlangley at geoplex.com.au  Wed Apr  3 04:08:05 2013
From: mlangley at geoplex.com.au (Matt L)
Date: Wed, 3 Apr 2013 04:08:05 -0700 (PDT)
Subject: [gdal-dev] Writing a GML file containing multiple layers
Message-ID: <1364987285452-5044264.post@n6.nabble.com>

Hi Everyone,

I am attempting to use ogr2ogr to convert GeoJSON to GML. It works well for
a single json file. But I would like to convert several files, such that
each input file ends up as a separate layer in a single GML output file.

The GML help doc seems to suggest that GML can be written with multiple
layers - i.e. "On export all layers are written to a single GML file all in
a single feature collection. Each layer's name is used as the element name
for objects from that layer."

I tired at first by simply adding additional json files to the command line
:

ogr2ogr -f GML output.gml roads.json buildings.json

But this fails with the error :

"FAILURE: Couldn't fetch requested layer 'buildings.json'!"

(this is a valid file by the way - and can be converted on it's own).

Can anyone shed any light on this? Is it possible to write multiple layers
(for example, from an input file representing roads, and an input file
representing buildings) to a GML file using ogr2ogr? If not, can this be
done in code somehow?

Any help greatly appreciated.

Regards,
Matt



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Writing-a-GML-file-containing-multiple-layers-tp5044264.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Wed Apr  3 04:22:22 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 03 Apr 2013 13:22:22 +0200
Subject: [gdal-dev] Writing a GML file containing multiple layers
In-Reply-To: <1364987285452-5044264.post@n6.nabble.com>
References: <1364987285452-5044264.post@n6.nabble.com>
Message-ID: <1364988142.515c10ee3fe0f@imp.free.fr>

Selon Matt L <mlangley at geoplex.com.au>:

> Hi Everyone,
>
> I am attempting to use ogr2ogr to convert GeoJSON to GML. It works well for
> a single json file. But I would like to convert several files, such that
> each input file ends up as a separate layer in a single GML output file.
>
> The GML help doc seems to suggest that GML can be written with multiple
> layers - i.e. "On export all layers are written to a single GML file all in
> a single feature collection. Each layer's name is used as the element name
> for objects from that layer."
>
> I tired at first by simply adding additional json files to the command line
> :
>
> ogr2ogr -f GML output.gml roads.json buildings.json
>
> But this fails with the error :
>
> "FAILURE: Couldn't fetch requested layer 'buildings.json'!"
>
> (this is a valid file by the way - and can be converted on it's own).
>
> Can anyone shed any light on this? Is it possible to write multiple layers
> (for example, from an input file representing roads, and an input file
> representing buildings) to a GML file using ogr2ogr? If not, can this be
> done in code somehow?

You cannot specify several input datasources to ogr2ogr. As the error message
suggests the 3rd name "buildings.json" is interpretated as a layer name of
roads.json.
To do what you want to do, you could for example convert both JSONs to
shapefiles (in a directory) and convert the shapefile directory (which will be
seen as a multilayer datasource) as GML

ogr2ogr temp_shapefiles roads.json -nln roads
ogr2ogr -update temp_shapefiles buildings.json -nln buildings
ogr2ogr -f GML output_gml temp_shapefiles

Another way is to create a OGR VRT that has 2 layers made of roads.json and
buildings.json and convert it to GML with ogr2ogr. See
http://gdal.org/ogr/drv_vrt.html for the syntax of OGR VRT files.

>
> Any help greatly appreciated.
>
> Regards,
> Matt
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.n6.nabble.com/Writing-a-GML-file-containing-multiple-layers-tp5044264.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From mlangley at geoplex.com.au  Wed Apr  3 04:32:13 2013
From: mlangley at geoplex.com.au (Matt Langley)
Date: Wed, 3 Apr 2013 04:32:13 -0700 (PDT)
Subject: [gdal-dev] Writing a GML file containing multiple layers
In-Reply-To: <1364988142.515c10ee3fe0f@imp.free.fr>
References: <1364987285452-5044264.post@n6.nabble.com>
	<1364988142.515c10ee3fe0f@imp.free.fr>
Message-ID: <1364988733527-5044268.post@n6.nabble.com>

Thanks Even,

The 10 char limit on fields names with shapefiles is a problem in my case.
So I will try the VRT format as you have suggested.

Are shapefile and VRT the only formats that can be represented as a multi
layer datasource?

Again - thanks for your help.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Writing-a-GML-file-containing-multiple-layers-tp5044264p5044268.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From t.finegan at motorolasolutions.com  Wed Apr  3 10:25:04 2013
From: t.finegan at motorolasolutions.com (Finegan Thomas-QTF001)
Date: Wed, 3 Apr 2013 17:25:04 +0000
Subject: [gdal-dev] 1.9.2 csharp and python interfaces
Message-ID: <949771C137D0BE47A1BEFA6DAE4AA0C65B5468FF@BL2PRD0410MB375.namprd04.prod.outlook.com>

Hello,
On Windows, none of the swig interfaces are built with the default target. I have to "cd swig" then run nmake from there. Is there a reason the C# and other wrappers are not built by default?

On Windows, when I run nmake from the swig directory I get:

osr\OsrPINVOKE.cs(192,10): error CS0111: Type 'OSGeo.OSR.OsrPINVOKE' already
        defines a member called 'OsrPINVOKE' with the same parameter types
osr\OsrPINVOKE.cs(188,10): (Location of symbol related to previous error)

Please help me fix the problem with OsrPINVOKE being defined twice.

Thank you,
Tom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130403/a6554b5b/attachment.html>

From Tyler.Mitchell at actian.com  Wed Apr  3 11:16:31 2013
From: Tyler.Mitchell at actian.com (Tyler Mitchell)
Date: Wed, 3 Apr 2013 14:16:31 -0400
Subject: [gdal-dev] DDS driver plugin?
Message-ID: <17E441FF-5ED3-46CB-B861-113987A4619C@actian.com>

Howdy, just wondering if anyone has a plugin DLL or dylib of the GDAL DDS driver handy they could share?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130403/e6b8578e/attachment.html>

From scott at agi.com  Wed Apr  3 11:36:14 2013
From: scott at agi.com (Reynolds, Scott)
Date: Wed, 3 Apr 2013 18:36:14 +0000
Subject: [gdal-dev] gdalwarp problem(s)
Message-ID: <E1110E7296E25A4FB3DE0B680FC4EF921CA4A19E@BY2PRD0710MB376.namprd07.prod.outlook.com>

Hi,

I've downloaded the file 27002570PAS_dem.zip from ftp://pamap.pasda.psu.edu/pamap_lidar/cycle1/DEM/South/2008/20000000/ and have attempted to warp the data to WGS84 using gdalwarp.  The output should be around 75W but is being warped to 91W.  I'm using gdalwarp 1.9.2 which was installed as part of OSGeo4W.  Any ideas?

Thanks,
Scott



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130403/521c9a34/attachment-0001.html>

From szekerest at gmail.com  Wed Apr  3 11:51:54 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 3 Apr 2013 20:51:54 +0200
Subject: [gdal-dev] 1.9.2 csharp and python interfaces
In-Reply-To: <949771C137D0BE47A1BEFA6DAE4AA0C65B5468FF@BL2PRD0410MB375.namprd04.prod.outlook.com>
References: <949771C137D0BE47A1BEFA6DAE4AA0C65B5468FF@BL2PRD0410MB375.namprd04.prod.outlook.com>
Message-ID: <CACALY+Q-k53GP7DG6Ap-v5XfhQKh+Zm56uUnUNe34ShD2FW24Q@mail.gmail.com>

Hi,

What is the MSVC and the SWIG version are you using?  I confirm
MSVC2003/2005/2008/2010 + SWIG1.3.39 compiles successfully.

Best regards,

Tamas


2013/4/3 Finegan Thomas-QTF001 <t.finegan at motorolasolutions.com>

>  Hello,****
>
> On Windows, none of the swig interfaces are built with the default target.
> I have to ?cd swig? then run nmake from there. Is there a reason the C# and
> other wrappers are not built by default?****
>
> ** **
>
> On Windows, when I run nmake from the swig directory I get:****
>
> ** **
>
> osr\OsrPINVOKE.cs(192,10): error CS0111: Type 'OSGeo.OSR.OsrPINVOKE'
> already****
>
>         defines a member called 'OsrPINVOKE' with the same parameter types
> ****
>
> osr\OsrPINVOKE.cs(188,10): (Location of symbol related to previous error)*
> ***
>
> ** **
>
> Please help me fix the problem with OsrPINVOKE being defined twice.****
>
> ** **
>
> Thank you,****
>
> Tom****
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130403/b4024827/attachment.html>

From ragi at burhum.com  Wed Apr  3 12:17:16 2013
From: ragi at burhum.com (rburhum)
Date: Wed, 3 Apr 2013 12:17:16 -0700 (PDT)
Subject: [gdal-dev] GDAL/OGR C# wrapper and UTF8
In-Reply-To: <trinity-0e48f79d-0095-48d5-8af8-67c2cbe3a13b-1364980402420@3capp-gmx-bs28>
References: <trinity-eba9f14f-7e23-43bd-a045-a68e4803668c-1364895821731@3capp-gmx-bs04>
	<CACALY+TrPsppZ+LS9-EVnMwiUuOs-x7foJSdJGvHc649uiQq=Q@mail.gmail.com>
	<trinity-0e48f79d-0095-48d5-8af8-67c2cbe3a13b-1364980402420@3capp-gmx-bs28>
Message-ID: <1365016636931-5044395.post@n6.nabble.com>

Hello Tamas and Dennis,

This is my personal opinion and there may tons of people that disagree, but
I think it is more sane to always assume UTF8 encoding. There is
functionality among the various drivers to accept/return strings in
different encodings (through the CPL_Recode mechanism) but they all do it
with different parameters (e.g. "PGCLIENTENCODING" in PostgreSQL,
"SHAPE_ENCODING" in ESRI Shapefiles, etc). Overly complicated for
programmatic access.

Strings being set should use UTF8 encoding. Strings being read should assume
UTF8 encoding. Not sure about the column names, layer names and such, but I
would rather find the drivers that are not assuming utf8 and fix those than
doing some extra complicated magic in the C# bindings. It simplifies logic
greatly.

If the underlying data store is using Windows-1252 encoding internally, that
should be handled and abstracted out by the driver itself (by doing the
conversions into utf8), not the bindings.

My two cents,

- Ragi



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-GDAL-OGR-C-wrapper-and-UTF8-tp5044028p5044395.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Wed Apr  3 12:23:20 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 3 Apr 2013 12:23:20 -0700
Subject: [gdal-dev] GDAL/OGR C# wrapper and UTF8
In-Reply-To: <1365016636931-5044395.post@n6.nabble.com>
References: <trinity-eba9f14f-7e23-43bd-a045-a68e4803668c-1364895821731@3capp-gmx-bs04>
	<CACALY+TrPsppZ+LS9-EVnMwiUuOs-x7foJSdJGvHc649uiQq=Q@mail.gmail.com>
	<trinity-0e48f79d-0095-48d5-8af8-67c2cbe3a13b-1364980402420@3capp-gmx-bs28>
	<1365016636931-5044395.post@n6.nabble.com>
Message-ID: <CA+YzLBet3MuyMUFizWyGA6ns20c6sfU-HQiuwqtOZQ4ZpYPT2g@mail.gmail.com>

Guys,

Certainly the intention of RFC 23:

  http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode

Was that we consider OGR string fields to be utf8 and I believe that should
be the default assumption.

Best regards,
Frank



On Wed, Apr 3, 2013 at 12:17 PM, rburhum <ragi at burhum.com> wrote:

> Hello Tamas and Dennis,
>
> This is my personal opinion and there may tons of people that disagree, but
> I think it is more sane to always assume UTF8 encoding. There is
> functionality among the various drivers to accept/return strings in
> different encodings (through the CPL_Recode mechanism) but they all do it
> with different parameters (e.g. "PGCLIENTENCODING" in PostgreSQL,
> "SHAPE_ENCODING" in ESRI Shapefiles, etc). Overly complicated for
> programmatic access.
>
> Strings being set should use UTF8 encoding. Strings being read should
> assume
> UTF8 encoding. Not sure about the column names, layer names and such, but I
> would rather find the drivers that are not assuming utf8 and fix those than
> doing some extra complicated magic in the C# bindings. It simplifies logic
> greatly.
>
> If the underlying data store is using Windows-1252 encoding internally,
> that
> should be handled and abstracted out by the driver itself (by doing the
> conversions into utf8), not the bindings.
>
> My two cents,
>
> - Ragi
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-GDAL-OGR-C-wrapper-and-UTF8-tp5044028p5044395.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130403/4d66c16b/attachment.html>

From szekerest at gmail.com  Wed Apr  3 12:54:41 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 3 Apr 2013 21:54:41 +0200
Subject: [gdal-dev] GDAL/OGR C# wrapper and UTF8
In-Reply-To: <CA+YzLBet3MuyMUFizWyGA6ns20c6sfU-HQiuwqtOZQ4ZpYPT2g@mail.gmail.com>
References: <trinity-eba9f14f-7e23-43bd-a045-a68e4803668c-1364895821731@3capp-gmx-bs04>
	<CACALY+TrPsppZ+LS9-EVnMwiUuOs-x7foJSdJGvHc649uiQq=Q@mail.gmail.com>
	<trinity-0e48f79d-0095-48d5-8af8-67c2cbe3a13b-1364980402420@3capp-gmx-bs28>
	<1365016636931-5044395.post@n6.nabble.com>
	<CA+YzLBet3MuyMUFizWyGA6ns20c6sfU-HQiuwqtOZQ4ZpYPT2g@mail.gmail.com>
Message-ID: <CACALY+SNsAS+isUTjtjw2cLrjEOneLwz4GsTgs-yum0fVPMxSA@mail.gmail.com>

Frank,

We seem to consider only a subset of the parameters (filenames and fileds)
that should be utf8 encoded. But it seems that's not enough. For example
treating fields as utf8 would also require to modify SetAttibuteFilter to
provide match with the same value returned from GetFieldAsString. In this
regard that would be more sufficient to treat all strings as being utf8 in
GDAL. With regards to C# that would mean to convert all strings between
Unicode and UTF8.

Best regards,

Tamas




2013/4/3 Frank Warmerdam <warmerdam at pobox.com>

> Guys,
>
> Certainly the intention of RFC 23:
>
>   http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode
>
> Was that we consider OGR string fields to be utf8 and I believe that
> should be the default assumption.
>
> Best regards,
> Frank
>
>
>
> On Wed, Apr 3, 2013 at 12:17 PM, rburhum <ragi at burhum.com> wrote:
>
>> Hello Tamas and Dennis,
>>
>> This is my personal opinion and there may tons of people that disagree,
>> but
>> I think it is more sane to always assume UTF8 encoding. There is
>> functionality among the various drivers to accept/return strings in
>> different encodings (through the CPL_Recode mechanism) but they all do it
>> with different parameters (e.g. "PGCLIENTENCODING" in PostgreSQL,
>> "SHAPE_ENCODING" in ESRI Shapefiles, etc). Overly complicated for
>> programmatic access.
>>
>> Strings being set should use UTF8 encoding. Strings being read should
>> assume
>> UTF8 encoding. Not sure about the column names, layer names and such, but
>> I
>> would rather find the drivers that are not assuming utf8 and fix those
>> than
>> doing some extra complicated magic in the C# bindings. It simplifies logic
>> greatly.
>>
>> If the underlying data store is using Windows-1252 encoding internally,
>> that
>> should be handled and abstracted out by the driver itself (by doing the
>> conversions into utf8), not the bindings.
>>
>> My two cents,
>>
>> - Ragi
>>
>>
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.n6.nabble.com/gdal-dev-GDAL-OGR-C-wrapper-and-UTF8-tp5044028p5044395.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130403/49fb1314/attachment.html>

From warmerdam at pobox.com  Wed Apr  3 14:07:54 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 3 Apr 2013 14:07:54 -0700
Subject: [gdal-dev] GDAL/OGR C# wrapper and UTF8
In-Reply-To: <CACALY+SNsAS+isUTjtjw2cLrjEOneLwz4GsTgs-yum0fVPMxSA@mail.gmail.com>
References: <trinity-eba9f14f-7e23-43bd-a045-a68e4803668c-1364895821731@3capp-gmx-bs04>
	<CACALY+TrPsppZ+LS9-EVnMwiUuOs-x7foJSdJGvHc649uiQq=Q@mail.gmail.com>
	<trinity-0e48f79d-0095-48d5-8af8-67c2cbe3a13b-1364980402420@3capp-gmx-bs28>
	<1365016636931-5044395.post@n6.nabble.com>
	<CA+YzLBet3MuyMUFizWyGA6ns20c6sfU-HQiuwqtOZQ4ZpYPT2g@mail.gmail.com>
	<CACALY+SNsAS+isUTjtjw2cLrjEOneLwz4GsTgs-yum0fVPMxSA@mail.gmail.com>
Message-ID: <CA+YzLBegYxLrTpQpoXpAp+Fz2iivhqZ8x15V=T2XUAQ5w-ktig@mail.gmail.com>

On Wed, Apr 3, 2013 at 12:54 PM, Tamas Szekeres <szekerest at gmail.com> wrote:

> Frank,
>
> We seem to consider only a subset of the parameters (filenames and fileds)
> that should be utf8 encoded. But it seems that's not enough. For example
> treating fields as utf8 would also require to modify SetAttibuteFilter to
> provide match with the same value returned from GetFieldAsString. In this
> regard that would be more sufficient to treat all strings as being utf8 in
> GDAL. With regards to C# that would mean to convert all strings between
> Unicode and UTF8.
>
>
Tamas,

I agree that the argument to SetAttributeFilter() should also be considered
UTF8.

I can't, off hand, think of any strings that should not be considered to be
UTF8.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130403/37e3b89d/attachment.html>

From dengo at gmx.net  Wed Apr  3 14:38:20 2013
From: dengo at gmx.net (Dennis Gocke)
Date: Wed, 3 Apr 2013 23:38:20 +0200
Subject: [gdal-dev] GDAL/OGR C# wrapper and UTF8
In-Reply-To: <CA+YzLBegYxLrTpQpoXpAp+Fz2iivhqZ8x15V=T2XUAQ5w-ktig@mail.gmail.com>
References: <trinity-eba9f14f-7e23-43bd-a045-a68e4803668c-1364895821731@3capp-gmx-bs04>
	<CACALY+TrPsppZ+LS9-EVnMwiUuOs-x7foJSdJGvHc649uiQq=Q@mail.gmail.com>
	<trinity-0e48f79d-0095-48d5-8af8-67c2cbe3a13b-1364980402420@3capp-gmx-bs28>
	<1365016636931-5044395.post@n6.nabble.com>
	<CA+YzLBet3MuyMUFizWyGA6ns20c6sfU-HQiuwqtOZQ4ZpYPT2g@mail.gmail.com>
	<CACALY+SNsAS+isUTjtjw2cLrjEOneLwz4GsTgs-yum0fVPMxSA@mail.gmail.com>
	<CA+YzLBegYxLrTpQpoXpAp+Fz2iivhqZ8x15V=T2XUAQ5w-ktig@mail.gmail.com>
Message-ID: <CALqbEi6tX2d-Dj4th7VhWPoXwHWXdea8HSWqSTKK5kg48SRxSA@mail.gmail.com>

Hi Frank,

it?s nice to hear that the intention/plan is to have a consistent encoding
for all strings.

When I did my own C# wraps of the C API to circumvent the problem with the
current C# wrapper I did some experimenting.
Although you wouldn't normally have any non ASCII characters in WKT strings
(SpatialReferences) it seems OSR has problems when using UTF8 encoding.
Problem with Proj4 library?

That's why I stuck with ANSI for all OSR related strings.

Another thing I found was CPLSetConfigOption. Although you might use it to
set the directory paths (i.e. Plugins) it only works when using ANSI
encoding. It somehow knows that config options are supposed to be ANSI
encoded and will reencode them to UTF8 right before using them as
file/folder paths. Also that means having the plugins in a folder with
non-ANSI characters will not work, because you can not specify it
via CPLSetConfigOption.

Greetings,
Dennis


On Wed, Apr 3, 2013 at 11:07 PM, Frank Warmerdam <warmerdam at pobox.com>wrote:

>
>
>
> On Wed, Apr 3, 2013 at 12:54 PM, Tamas Szekeres <szekerest at gmail.com>wrote:
>
>> Frank,
>>
>> We seem to consider only a subset of the parameters (filenames and
>> fileds) that should be utf8 encoded. But it seems that's not enough. For
>> example treating fields as utf8 would also require to modify
>> SetAttibuteFilter to provide match with the same value returned from
>> GetFieldAsString. In this regard that would be more sufficient to treat all
>> strings as being utf8 in GDAL. With regards to C# that would mean to
>> convert all strings between Unicode and UTF8.
>>
>>
> Tamas,
>
> I agree that the argument to SetAttributeFilter() should also be
> considered UTF8.
>
> I can't, off hand, think of any strings that should not be considered to
> be UTF8.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130403/d41af832/attachment-0001.html>

From sfkeller at gmail.com  Wed Apr  3 15:15:57 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Thu, 4 Apr 2013 00:15:57 +0200
Subject: [gdal-dev] A geocoding client API in GDAL/OGR
In-Reply-To: <201212300944.31241.even.rouault@mines-paris.org>
References: <201212300944.31241.even.rouault@mines-paris.org>
Message-ID: <CAFcOn290HPcooLmP94PS2wz4w6_f=N2wofkzT2+h_ZLvGY5Trw@mail.gmail.com>

Hi Even

Cool stuff!
Unfortunately Yahoo cut the free geocoding service and offers now paid-only
"BOSS" services...

Yours, Stefan


2012/12/30 Even Rouault <even.rouault at mines-paris.org>

> Hi all,
>
> A new API has been added to GDAL/OGR to use geocoding services, such as
> OpenStreetMap Nominatim, MapQuest Nominatim, Yahoo! PlaceFinder, GeoNames
> or
> Bing.
>
> For more details, see
> http://erouault.blogspot.fr/2012/12/a-geocoding-client-api-in-gdalogr.html
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130404/c2c410d5/attachment.html>

From peifer at gmx.eu  Wed Apr  3 17:31:43 2013
From: peifer at gmx.eu (Hermann Peifer)
Date: Wed, 03 Apr 2013 21:31:43 -0300
Subject: [gdal-dev] gdalwarp problem(s)
In-Reply-To: <E1110E7296E25A4FB3DE0B680FC4EF921CA4A19E@BY2PRD0710MB376.namprd07.prod.outlook.com>
References: <E1110E7296E25A4FB3DE0B680FC4EF921CA4A19E@BY2PRD0710MB376.namprd07.prod.outlook.com>
Message-ID: <515CC9EF.3060102@gmx.eu>

Hi,

gdalinfo 27002570PAS_dem.tif tells me:
...
PARAMETER["false_easting",6458320.416666666],
...
UNIT["us_survey_feet",0.3048006096012192],

gdalwarp 27002570PAS_dem.tif out.tif -t_srs epsg:4326 tells me in DEBUG 
mode:

OGRCT: Source: +proj=lcc +lat_1=40.96666666666667 
+lat_2=39.93333333333333 +lat_0=39.33333333333334 +lon_0=-77.75 
+x_0=1968500 +y_0=0 +datum=NAD83 +units=us-ft +no_defs

My wild guess is that there is something going wrong with the false 
easting value and the metre/feet conversion.

Hermann

On 2013-04-03 15:36, Reynolds, Scott wrote:
> Hi,
>
> I?ve downloaded the file 27002570PAS_dem.zip from
> ftp://pamap.pasda.psu.edu/pamap_lidar/cycle1/DEM/South/2008/20000000/
> and have attempted to warp the data to WGS84 using gdalwarp.  The output
> should be around 75W but is being warped to 91W.  I?m using gdalwarp
> 1.9.2 which was installed as part of OSGeo4W. Any ideas?
>
> Thanks,
>
> Scott
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From mlangley at geoplex.com.au  Wed Apr  3 22:46:58 2013
From: mlangley at geoplex.com.au (Matt Langley)
Date: Wed, 3 Apr 2013 22:46:58 -0700 (PDT)
Subject: [gdal-dev] OGR GML writer dataset creation options not working
Message-ID: <1365054418179-5044462.post@n6.nabble.com>

I'm trying to convert some shapefiles to GML using both ogr2ogr and python
code. In both cases I'm having trouble making the 'dataset creation options'
work preoperly.

Setting the XSISCHEMAURI seems to work. i.e

/ogr2ogr -f GML test.gml shape_folder -dsco XSISCHEMAURI=http:\\mytest.com/

If I set PREFIX to something other than 'ogr' I still see 'ogr' as the
prefix in the output files. i.e.

/ogr2ogr -f GML test.gml shape_folder -dsco PREFIX=tst/

If I set the format to GML3 I am still getting an output XSD for GML2. i.e.

/ogr2ogr -f GML test.gml shape_folder -dsco FORMAT=GML3/

I also can't seem to get XSISCHEMA, TARGET_NAMESPACE, GML3_LONGSRS or
SPACE_INDENTATION to work.

I'm sure I am doing something wrong. Have been playing with this all day and
can't work out what. I get the same behaviour setting these options in
python code when calling the CreateDataSource method.

I have a very recent standard install of FWTools (2.4.7).

Help appreciated, as I need to be able to set the FORMAT, TARGET_NAMESPACE
etc.

Cheers,
Matt



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/OGR-GML-writer-dataset-creation-options-not-working-tp5044462.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mlangley at geoplex.com.au  Wed Apr  3 23:02:34 2013
From: mlangley at geoplex.com.au (Matt Langley)
Date: Wed, 3 Apr 2013 23:02:34 -0700 (PDT)
Subject: [gdal-dev] OGR GML writer dataset creation options not working
In-Reply-To: <1365054418179-5044462.post@n6.nabble.com>
References: <1365054418179-5044462.post@n6.nabble.com>
Message-ID: <1365055354132-5044464.post@n6.nabble.com>

I also should note, that when trying to apply mutliple -dsco options I have
used this syntax:

ogr2ogr -f GML test.gml shape_folder -dsco PREFIX=tst -dsco
TARGET_NAMESPACE=http://tst.com.au/

In the case above neither the PREFIX or TARGET_NAMESPACE seem to get set in
the output.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/OGR-GML-writer-dataset-creation-options-not-working-tp5044462p5044464.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Thu Apr  4 01:03:43 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 04 Apr 2013 10:03:43 +0200
Subject: [gdal-dev] OGR GML writer dataset creation options not working
In-Reply-To: <1365054418179-5044462.post@n6.nabble.com>
References: <1365054418179-5044462.post@n6.nabble.com>
Message-ID: <1365062623.515d33df21f3d@imp.free.fr>

Selon Matt Langley <mlangley at geoplex.com.au>:

> I'm trying to convert some shapefiles to GML using both ogr2ogr and python
> code. In both cases I'm having trouble making the 'dataset creation options'
> work preoperly.
>
> Setting the XSISCHEMAURI seems to work. i.e
>
> /ogr2ogr -f GML test.gml shape_folder -dsco XSISCHEMAURI=http:mytest.com/
>
> If I set PREFIX to something other than 'ogr' I still see 'ogr' as the
> prefix in the output files. i.e.
>
> /ogr2ogr -f GML test.gml shape_folder -dsco PREFIX=tst/
>
> If I set the format to GML3 I am still getting an output XSD for GML2. i.e.
>
> /ogr2ogr -f GML test.gml shape_folder -dsco FORMAT=GML3/
>
> I also can't seem to get XSISCHEMA, TARGET_NAMESPACE, GML3_LONGSRS or
> SPACE_INDENTATION to work.
>
> I'm sure I am doing something wrong. Have been playing with this all day and
> can't work out what. I get the same behaviour setting these options in
> python code when calling the CreateDataSource method.
>
> I have a very recent standard install of FWTools (2.4.7).

FWTools is not exactly "recent". It is no longer maintained and ships with a pre
version of GDAL 1.6 if I remember correctly. The options PREFIX and
TARGET_NAMESPACE are documented as being available in GDAL 1.10, which is not
yet released (in a few weeks hopefully). However they are already implemented in
the current developmenet version. If you want a Windows build of it, have a look
at http://gisinternals.com/sdk/ (the "MSVCXXXX (WinYY) -development" packages at
the top of the first array)










From raghavendra at vizexperts.com  Thu Apr  4 04:52:40 2013
From: raghavendra at vizexperts.com (ryagz)
Date: Thu, 4 Apr 2013 04:52:40 -0700 (PDT)
Subject: [gdal-dev] PGRasterDataset taking too much time to Open Dataset
Message-ID: <1365076360768-5044548.post@n6.nabble.com>

Hi,

I am having a postgis raster table which has raster data about 40 GB, when i
try to load the dataset its taking too much time (about 40 mins) in the
function "GDALDataset* PostGISRasterDataset::Open(GDALOpenInfo* poOpenInfo)
" . 

When i digged into the code i found out that in the function "GBool
PostGISRasterDataset::SetRasterProperties(const char *
pszValidConnectionString)" 
there is an sql query issued on the database to get raster properties

    if (pszWhere == NULL) {
        osCommand.Printf(
            "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
xmax, "
            "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select
st_srid(%s) srid, "
            "st_extent(%s::geometry) geom, max(ST_NumBands(rast)) nbband
from %s.%s "
            "group by st_srid(%s)) foo", pszColumn, pszColumn, pszSchema, 
            pszTable, pszColumn);
    }

    else {
        osCommand.Printf(
            "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
xmax, "
            "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select
st_srid(%s) srid, "
            "st_extent(%s::geometry) geom, max(ST_NumBands(rast)) nbband
from %s.%s "
            "where %s group by st_srid(%s)) foo", pszColumn, pszColumn,
pszSchema, 
            pszTable, pszWhere, pszColumn);
    }

This sql query is causing all the delay because its going to scan the entire
table and get the raster properties. One idea what i would like to propose
is if the user has already applied the function  AddRasterConstraints on the
raster table then all the raster properties which are required will be
readily available in raster_columns table which is present in public schema.

So for the cases where RasterConstraints is already applied we could have
the sql query some thing like this:

    if (pszWhere == NULL) {
        osCommand.Printf(
            "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
xmax, "
            "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select srid
srid, "
            "extent geom, num_bands nbband from raster_columns where
r_table_schema = '%s' "
            "and r_table_name = '%s') foo", pszSchema, pszTable);
    }

    else {

        osCommand.Printf(
            "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
xmax, "
            "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select srid
srid, "
            "extent geom, num_bands nbband from raster_columns where
r_table_schema = '%s' "
            "and r_table_name = '%s' where %s) foo", pszSchema, pszTable,
pszWhere);
    }

I have tested the above mentioned sql query with the same table of 40GB
size, the Dataset open speed has drastically improved, Now Dataset Open
happens in couple of seconds.

Please let me know if this is better way to do the required operation. If
so, is it possible to add it in GDAL tree and add to GDAL 1.10 release.

Thanks,
Ryagz





--
View this message in context: http://osgeo-org.1560.n6.nabble.com/PGRasterDataset-taking-too-much-time-to-Open-Dataset-tp5044548.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From raghavendra at vizexperts.com  Thu Apr  4 04:53:28 2013
From: raghavendra at vizexperts.com (ryagz)
Date: Thu, 4 Apr 2013 04:53:28 -0700 (PDT)
Subject: [gdal-dev] PGRasterDataset taking too much time to Open Dataset
Message-ID: <1365076408798-5044549.post@n6.nabble.com>

Hi,

I am having a postgis raster table which has raster data about 40 GB, when i
try to load the dataset its taking too much time (about 40 mins) in the
function "GDALDataset* PostGISRasterDataset::Open(GDALOpenInfo* poOpenInfo)
" . 

When i digged into the code i found out that in the function "GBool
PostGISRasterDataset::SetRasterProperties(const char *
pszValidConnectionString)" 
there is an sql query issued on the database to get raster properties

    if (pszWhere == NULL) {
        osCommand.Printf(
            "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
xmax, "
            "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select
st_srid(%s) srid, "
            "st_extent(%s::geometry) geom, max(ST_NumBands(rast)) nbband
from %s.%s "
            "group by st_srid(%s)) foo", pszColumn, pszColumn, pszSchema, 
            pszTable, pszColumn);
    }

    else {
        osCommand.Printf(
            "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
xmax, "
            "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select
st_srid(%s) srid, "
            "st_extent(%s::geometry) geom, max(ST_NumBands(rast)) nbband
from %s.%s "
            "where %s group by st_srid(%s)) foo", pszColumn, pszColumn,
pszSchema, 
            pszTable, pszWhere, pszColumn);
    }

This sql query is causing all the delay because its going to scan the entire
table and get the raster properties. One idea what i would like to propose
is if the user has already applied the function  AddRasterConstraints on the
raster table then all the raster properties which are required will be
readily available in raster_columns table which is present in public schema.

So for the cases where RasterConstraints is already applied we could have
the sql query some thing like this:

    if (pszWhere == NULL) {
        osCommand.Printf(
            "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
xmax, "
            "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select srid
srid, "
            "extent geom, num_bands nbband from raster_columns where
r_table_schema = '%s' "
            "and r_table_name = '%s') foo", pszSchema, pszTable);
    }

    else {

        osCommand.Printf(
            "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
xmax, "
            "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select srid
srid, "
            "extent geom, num_bands nbband from raster_columns where
r_table_schema = '%s' "
            "and r_table_name = '%s' where %s) foo", pszSchema, pszTable,
pszWhere);
    }

I have tested the above mentioned sql query with the same table of 40GB
size, the Dataset open speed has drastically improved, Now Dataset Open
happens in couple of seconds.

Please let me know if this is better way to do the required operation. If
so, is it possible to add it in GDAL tree and add to GDAL 1.10 release.

Thanks,
Ryagz





--
View this message in context: http://osgeo-org.1560.n6.nabble.com/PGRasterDataset-taking-too-much-time-to-Open-Dataset-tp5044549.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Thu Apr  4 05:08:58 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 04 Apr 2013 14:08:58 +0200
Subject: [gdal-dev] PGRasterDataset taking too much time to Open Dataset
In-Reply-To: <1365076408798-5044549.post@n6.nabble.com>
References: <1365076408798-5044549.post@n6.nabble.com>
Message-ID: <1365077338.515d6d5acc78c@imp.free.fr>

Selon ryagz <raghavendra at vizexperts.com>:

> Hi,
>
> I am having a postgis raster table which has raster data about 40 GB, when i
> try to load the dataset its taking too much time (about 40 mins) in the
> function "GDALDataset* PostGISRasterDataset::Open(GDALOpenInfo* poOpenInfo)
> " .
>
> When i digged into the code i found out that in the function "GBool
> PostGISRasterDataset::SetRasterProperties(const char *
> pszValidConnectionString)"
> there is an sql query issued on the database to get raster properties
>
>     if (pszWhere == NULL) {
>         osCommand.Printf(
>             "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
> xmax, "
>             "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select
> st_srid(%s) srid, "
>             "st_extent(%s::geometry) geom, max(ST_NumBands(rast)) nbband
> from %s.%s "
>             "group by st_srid(%s)) foo", pszColumn, pszColumn, pszSchema,
>             pszTable, pszColumn);
>     }
>
>     else {
>         osCommand.Printf(
>             "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
> xmax, "
>             "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select
> st_srid(%s) srid, "
>             "st_extent(%s::geometry) geom, max(ST_NumBands(rast)) nbband
> from %s.%s "
>             "where %s group by st_srid(%s)) foo", pszColumn, pszColumn,
> pszSchema,
>             pszTable, pszWhere, pszColumn);
>     }
>
> This sql query is causing all the delay because its going to scan the entire
> table and get the raster properties. One idea what i would like to propose
> is if the user has already applied the function  AddRasterConstraints on the
> raster table then all the raster properties which are required will be
> readily available in raster_columns table which is present in public schema.
>
> So for the cases where RasterConstraints is already applied we could have
> the sql query some thing like this:
>
>     if (pszWhere == NULL) {
>         osCommand.Printf(
>             "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
> xmax, "
>             "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select srid
> srid, "
>             "extent geom, num_bands nbband from raster_columns where
> r_table_schema = '%s' "
>             "and r_table_name = '%s') foo", pszSchema, pszTable);
>     }
>
>     else {
>
>         osCommand.Printf(
>             "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
> xmax, "
>             "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select srid
> srid, "
>             "extent geom, num_bands nbband from raster_columns where
> r_table_schema = '%s' "
>             "and r_table_name = '%s' where %s) foo", pszSchema, pszTable,
> pszWhere);
>     }
>
> I have tested the above mentioned sql query with the same table of 40GB
> size, the Dataset open speed has drastically improved, Now Dataset Open
> happens in couple of seconds.
>
> Please let me know if this is better way to do the required operation. If
> so, is it possible to add it in GDAL tree and add to GDAL 1.10 release.

Could you check that it isn't already a known issue in the Trac database. I can
see a few PostgisRaster tickets in
http://trac.osgeo.org/gdal/report/1?asc=0&sort=ticket , but at first sight, I'm
not sure if your issue really intersects one of those. If not, please file a
ticket with all the above details and add "jorgearevalo" in CC. I'm not sure if
it will be fixed for 1.10 however.





From even.rouault at mines-paris.org  Thu Apr  4 05:10:55 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 04 Apr 2013 14:10:55 +0200
Subject: [gdal-dev] PGRasterDataset taking too much time to Open Dataset
In-Reply-To: <1365076408798-5044549.post@n6.nabble.com>
References: <1365076408798-5044549.post@n6.nabble.com>
Message-ID: <1365077455.515d6dcf9eecf@imp.free.fr>

Selon ryagz <raghavendra at vizexperts.com>:

> Hi,
>
> I am having a postgis raster table which has raster data about 40 GB, when i
> try to load the dataset its taking too much time (about 40 mins) in the
> function "GDALDataset* PostGISRasterDataset::Open(GDALOpenInfo* poOpenInfo)
> " .
>
> When i digged into the code i found out that in the function "GBool
> PostGISRasterDataset::SetRasterProperties(const char *
> pszValidConnectionString)"
> there is an sql query issued on the database to get raster properties
>
>     if (pszWhere == NULL) {
>         osCommand.Printf(
>             "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
> xmax, "
>             "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select
> st_srid(%s) srid, "
>             "st_extent(%s::geometry) geom, max(ST_NumBands(rast)) nbband
> from %s.%s "
>             "group by st_srid(%s)) foo", pszColumn, pszColumn, pszSchema,
>             pszTable, pszColumn);
>     }
>
>     else {
>         osCommand.Printf(
>             "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
> xmax, "
>             "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select
> st_srid(%s) srid, "
>             "st_extent(%s::geometry) geom, max(ST_NumBands(rast)) nbband
> from %s.%s "
>             "where %s group by st_srid(%s)) foo", pszColumn, pszColumn,
> pszSchema,
>             pszTable, pszWhere, pszColumn);
>     }
>
> This sql query is causing all the delay because its going to scan the entire
> table and get the raster properties. One idea what i would like to propose
> is if the user has already applied the function  AddRasterConstraints on the
> raster table then all the raster properties which are required will be
> readily available in raster_columns table which is present in public schema.
>
> So for the cases where RasterConstraints is already applied we could have
> the sql query some thing like this:
>
>     if (pszWhere == NULL) {
>         osCommand.Printf(
>             "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
> xmax, "
>             "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select srid
> srid, "
>             "extent geom, num_bands nbband from raster_columns where
> r_table_schema = '%s' "
>             "and r_table_name = '%s') foo", pszSchema, pszTable);
>     }
>
>     else {
>
>         osCommand.Printf(
>             "select srid, nbband, st_xmin(geom) as xmin, st_xmax(geom) as
> xmax, "
>             "st_ymin(geom) as ymin, st_ymax(geom) as ymax from (select srid
> srid, "
>             "extent geom, num_bands nbband from raster_columns where
> r_table_schema = '%s' "
>             "and r_table_name = '%s' where %s) foo", pszSchema, pszTable,
> pszWhere);
>     }
>
> I have tested the above mentioned sql query with the same table of 40GB
> size, the Dataset open speed has drastically improved, Now Dataset Open
> happens in couple of seconds.
>
> Please let me know if this is better way to do the required operation. If
> so, is it possible to add it in GDAL tree and add to GDAL 1.10 release.

Could you check that it isn't already a known issue in the Trac database. I can
see a few PostgisRaster tickets in
http://trac.osgeo.org/gdal/report/1?asc=0&sort=ticket , but at first sight, I'm
not sure if your issue really intersects one of those. If not, please file a
ticket with all the above details and add "jorgearevalo" in CC. I'm not sure if
it will be fixed for 1.10 however.









From raghavendra at vizexperts.com  Thu Apr  4 05:35:04 2013
From: raghavendra at vizexperts.com (ryagz)
Date: Thu, 4 Apr 2013 05:35:04 -0700 (PDT)
Subject: [gdal-dev] PGRasterDataset taking too much time to Open Dataset
In-Reply-To: <1365077455.515d6dcf9eecf@imp.free.fr>
References: <1365076408798-5044549.post@n6.nabble.com>
	<1365077455.515d6dcf9eecf@imp.free.fr>
Message-ID: <1365078904857-5044556.post@n6.nabble.com>

I am new to rising a ticket, i tried logging in with my osgeo.org(the current
mailing list) credentials but its not logging in. Which credentials should i
use or should i register separately somewhere to raise a ticket in 
http://trac.osgeo.org/gdal/report/1?asc=0&sort=ticket ?

Thanks,
Ryagz



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/PGRasterDataset-taking-too-much-time-to-Open-Dataset-tp5044549p5044556.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Thu Apr  4 05:54:41 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 04 Apr 2013 14:54:41 +0200
Subject: [gdal-dev] PGRasterDataset taking too much time to Open Dataset
In-Reply-To: <1365078904857-5044556.post@n6.nabble.com>
References: <1365076408798-5044549.post@n6.nabble.com>
	<1365077455.515d6dcf9eecf@imp.free.fr>
	<1365078904857-5044556.post@n6.nabble.com>
Message-ID: <1365080081.515d781172ea6@imp.free.fr>

Selon ryagz <raghavendra at vizexperts.com>:

> I am new to rising a ticket, i tried logging in with my osgeo.org(the current
> mailing list) credentials but its not logging in. Which credentials should i
> use or should i register separately somewhere to raise a ticket in
> http://trac.osgeo.org/gdal/report/1?asc=0&sort=ticket ?

Yoiu need to have a OSGeo userid that you can create from the link provided in
www.osgeo.org/osgeo_userid

Then go to http://trac.osgeo.org/gdal/newticket and login with the account
created above.

>
> Thanks,
> Ryagz
>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.n6.nabble.com/PGRasterDataset-taking-too-much-time-to-Open-Dataset-tp5044549p5044556.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From Moses.Gone at t-systems.com  Thu Apr  4 06:02:42 2013
From: Moses.Gone at t-systems.com (Moses.Gone at t-systems.com)
Date: Thu, 4 Apr 2013 15:02:42 +0200
Subject: [gdal-dev] Bulding GDAL with SDE and python support on solaris 9
In-Reply-To: <2D55B4FBCD59D045AC382D3F65435B790382F9973689@HE101453.emea1.cds.t-internal.com>
References: <2D55B4FBCD59D045AC382D3F65435B790382F9973689@HE101453.emea1.cds.t-internal.com>
Message-ID: <2D55B4FBCD59D045AC382D3F65435B790382F99736B1@HE101453.emea1.cds.t-internal.com>


Hallo forum,
I would like to build GDAL for a solaris machine(5.9) with the following support
ArcSDE 9.3.1 and python (since I intent to use the gdal_retile and gdal_translate utilities). However I keep on having errors when trying to do make.

ld: fatal: Symbol referencing errors. No output written to .libs/gdalinfo
collect2: ld returned 1 exit status
gmake[1]: *** [gdalinfo] Error 1

The problem is almost similar to whats described here: http://osgeo-org.1560.n6.nabble.com/Compiling-Mapserver-5-4-2-on-Solaris-10-with-ArcSDE-9-3-1-SDK-td4230248.html

Is there a binary already available somewhere out there?

Could someone help me out here.

Regards,
Moses



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130404/31ba5e6c/attachment.html>

From jertol52 at gmail.com  Thu Apr  4 06:51:13 2013
From: jertol52 at gmail.com (Tom Finegan)
Date: Thu, 4 Apr 2013 07:51:13 -0600
Subject: [gdal-dev] c# interface
In-Reply-To: <CACALY+Q-k53GP7DG6Ap-v5XfhQKh+Zm56uUnUNe34ShD2FW24Q@mail.gmail.com>
References: <949771C137D0BE47A1BEFA6DAE4AA0C65B5468FF@BL2PRD0410MB375.namprd04.prod.outlook.com>
	<CACALY+Q-k53GP7DG6Ap-v5XfhQKh+Zm56uUnUNe34ShD2FW24Q@mail.gmail.com>
Message-ID: <7EC73A4A-F6E4-423C-B288-22A6321F5990@gmail.com>

Hello,
I was able to build the c# interface dll-s using swig 1.3.39. gdal_csharp, ogr_csharp and osr_csharp.dll all register successfully and I referenced them in my c# project, however I have 2 questions:

1. When I register the dlls, I get a dialog asking me which ArcGIS Installation to use. Why do I get this "Register ArcGIS Assembly" dialog? Registration succeeds if I choose ArcEngine.

2. OSGeo.OGR.Ogr.Open() returns a null DataSource. I get no error output, no exception, just a null return value. Any ideas?

Thank you,
Tom

From waelinsat at gmail.com  Thu Apr  4 07:13:46 2013
From: waelinsat at gmail.com (Wael Tarhouni)
Date: Thu, 4 Apr 2013 15:13:46 +0100
Subject: [gdal-dev] Apply a style to a GeoServer Layer without creatinig SLD
	file
Message-ID: <CAPBhV0fwxdk1enmt5ZxMPwV9HmE-3-QYTZDEGCat7nUCcsu7XA@mail.gmail.com>

Hi All;

There's any way to apply a style to a layer without creating an SLD File
physically on GeoServer (i mean a style flow).

Regards

-- 
Wael Tarhouni
Ing?nieur en R?seaux informatiques et T?l?communications de l'INSAT

(+216) 22 239 551
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130404/9de82f01/attachment.html>

From jertol52 at gmail.com  Thu Apr  4 07:25:56 2013
From: jertol52 at gmail.com (Tom Finegan)
Date: Thu, 4 Apr 2013 08:25:56 -0600
Subject: [gdal-dev] c# interface
Message-ID: <AE70AB2A-9017-407A-B23C-4849A7A6638E@yahoo.com>

Well, I figured out my one issue where Ogr.Open() was returning a null dataset. This was because I had not called OSGeo.OGR.Ogr.RegisterAll(). I had mistakenly called OSGeo.GDAL.Gdal.AllRegister() instead, which does not register the OGR drivers. Without an OGR driver registered, Ogr was not able to read my shapefile in Ogr.Open.

I still do have one question regarding registering gdal_csharp.dll. Why do I get a dialog titled "Register ArcGIS Assembly" when I run regedit?

Thank you,
Tom
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130404/869fab1c/attachment.html>

From chaoyuejoy at gmail.com  Thu Apr  4 08:15:52 2013
From: chaoyuejoy at gmail.com (Chao YUE)
Date: Thu, 4 Apr 2013 17:15:52 +0200
Subject: [gdal-dev] extract information from polygon shapefile based on
 raster grid?
In-Reply-To: <CALQGVr3wvhHeaUQmF7az9PmGWm7GQkLdeYC-LoZAFuG1t9hnUA@mail.gmail.com>
References: <CAAN-aRFc7C76WhiF0cc2n-OdVUH8KQGus73xbs1JnLFNfvCMNQ@mail.gmail.com>
	<CAKMUAtCb0mjPWXu47ZCzmru4DFXV6uuY5tegp4o20RjuBcEssA@mail.gmail.com>
	<CALQGVr3wvhHeaUQmF7az9PmGWm7GQkLdeYC-LoZAFuG1t9hnUA@mail.gmail.com>
Message-ID: <CAAN-aRGO4Hej1hp_pyPH3KO8GPhUgoifhktpWreg_vKL23smJQ@mail.gmail.com>

Dear Jan and Doug,

Thanks for all these ideas. Finally I report back.
Finally I find a point shapefile data equivalent to the previous ploygon
ones.
So I take the easy approach (which must be computationally unoptimized):
1. read all the attribute data to a csv or pandas dataframe object (
http://pandas.pydata.org/)
2. search each (latitude,longtitude) pair, then assign to the column
"geoindex" the tuple which is used to
    index the final numpy array which is going to store the statiscal
information data.
3. use pandas.DataFrame.groupby('geoindex').agg(np.men, np.std, np.sum)
etc, to generate the
    generate the statiscal information I want.
4. then create an empty numpy array which conforms to the geospatial extent
of the area but with 0.5 degree
    resolution, and assign the array element values by uisng the geoindex
information in the dataframe.

if anybody is interested in this simple way, I put below a function used to
extract the statistical information.

def
dataframe_extract_statistic_info(df,target_field=None,groupby_field='geoindex'):

"""
    Extract information for target_field in dataframe "df" grouped
by

groupby_field.



Arguments:

----------
    1. target_field: the field for statistical
information.
    2. groupby_field: the field used to group
data.



Notes:

------
    1. extracted statstical information
are:
        sum, mean, std, 95percentile, 50percentile(median),
5percentile
    2. the groupby method will drop the null row in the
groupby_field

automatically.

"""
    df_size_grp =
df.groupby(groupby_field)
    dft =
df_size_grp[target_field].agg([np.sum,np.mean,np.std])
    df_number =
df_size_grp.size()
    dft['number'] =
df_number


    dflist =
[]
    statnamelist =
['per95','median','per05']
    perlist =
[95,50,5]
    func_dict =
{}
    for name,per in
zip(statnamelist,perlist):
        dflist.append(df_size_grp[target_field].agg({name:lambda x:
np.percentile(x.values,per)}))

dflist.extend([dft])
    dfall =
pa.concat(dflist,axis=1)
    return
dfall


cheers,

Chao


On Thu, Mar 28, 2013 at 1:39 PM, Newcomb, Doug <doug_newcomb at fws.gov> wrote:

> Chao,
> Depending on how detailed you want your stats to be, it might be easier
>  run the zonal statistics plugin in qgis or run v.rast.stats in GRASS 70.
>
>
> Doug
>
> On Wed, Mar 27, 2013 at 6:38 PM, Jan Heckman <jan.heckman at gmail.com>wrote:
>
>> Hello Chao,
>>
>> I may not understand your wish quite well, but I think you need some
>> datastructure which conforms to the elements of the grid and receives
>> addtional information derived from a number of shapes with attributes.
>> Your output could be another shapefile,  with the summed results as
>> attributes, like the number of fires.
>> In the case that the only spatial relationship between shapes and
>> gridelements is whether or not a shape falls inside, you can indeed
>> simplify the polygon shape to pointshapes (centerpoints) which can be
>> converted to a raster of 1's and 0's. Then you could use a dictionary to
>> put the shapeattributes in the right place. I see a problem when several
>> shapes fall into the same grid-element, having different attribute values.
>> So you would be better off with a way of rasterbuilding, where each
>> attribute is summed per gridelement over all the shapes that fall inside.
>> Such routines exist at least in several programs.
>> Alternatively, you can make a polygon shapefile which conforms to the
>> rasterelements, then do a spatial join between your (centerpoint) shapefile
>> and and the rastershape (effectively adding a field to the pointshapes
>> which is the index into the grid), then add the several attribute data per
>> gridelement by e.g. making a pivot table.
>> If you have to work with shapes that are larger than the gridelements,
>> you would need another solution; there would be a choice between sampling
>> the shapes or distributing shape attributes proportionally to calculated
>> overlap with (polygonal) gridelements.
>>
>> So, more simply still,  assuming the grid is regular and it is possible
>> to compute the gridindex from pointcoordinates:
>>
>> Add an index field to the centerpoint shape which has the attributes;
>> calculate the gridindex from the coordinates and put this into the index
>> field;
>> bring the table e.g. into excel;
>> do a pivot table for the attributes (count or sum).
>> If necessary, add the centerpoint coordinates to the resulting table;
>> convert the table into a new point shape with the desired attributes.
>>
>> Hope I got you right and this helps,
>> Jan
>>
>> On Wed, Mar 27, 2013 at 9:52 PM, Chao YUE <chaoyuejoy at gmail.com> wrote:
>>
>>> Dear all,
>>>
>>> I am using the python binding of GDAL for reading polygon shapefiles.
>>>
>>> I have a polygon shapefile which contains the fire polygon and burned
>>> area, with typical fires burning on 10-100ha.
>>> my model simulation result is based on 0.5degree X 0.5degree. So I need
>>> to extract from this shapefile on each gridcell
>>> of the 0.5d X 0.5 grid the information about like number of fires and
>>> mean fire size etc.
>>>
>>> The approach I am thinking currently is to calculate the center of each
>>> of fire polygon, and check which 0.5d X 0.5d gridcell
>>> it falls in, then build a huge dictionary with key as the numpy index of
>>> the 0.5dX0.5d array, with the dictionary values as
>>> the list(or array or pandas dataframe) which include the information of
>>> all the polygons falling within the the same grid cell.
>>>
>>> I don't know if there is a better approach than this? I appreciate any
>>> comments.
>>>
>>> best regards,
>>>
>>> Chao
>>>
>>> --
>>>
>>> ***********************************************************************************
>>> Chao YUE
>>> Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
>>> UMR 1572 CEA-CNRS-UVSQ
>>> Batiment 712 - Pe 119
>>> 91191 GIF Sur YVETTE Cedex
>>> Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
>>>
>>> ************************************************************************************
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb at fws.gov
>
> ---------------------------------------------------------------------------------------------------------
> The opinions I express are my own and are not representative of the
> official policy of the U.S.Fish and Wildlife Service or Dept. of the
> Interior.   Life is too short for undocumented, proprietary data formats.
>



-- 
***********************************************************************************
Chao YUE
Laboratoire des Sciences du Climat et de l'Environnement (LSCE-IPSL)
UMR 1572 CEA-CNRS-UVSQ
Batiment 712 - Pe 119
91191 GIF Sur YVETTE Cedex
Tel: (33) 01 69 08 29 02; Fax:01.69.08.77.16
************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130404/c64e30d9/attachment-0001.html>

From aperi2007 at gmail.com  Thu Apr  4 10:57:05 2013
From: aperi2007 at gmail.com (Andrea Peri)
Date: Thu, 4 Apr 2013 19:57:05 +0200
Subject: [gdal-dev] OGR-SQL and wildcard usage on mapserver fiflter
Message-ID: <CABqTJk-uwLVprx74xT1WmYy2dmmv0j9f=s6WQo0r2NLHa2-kbA@mail.gmail.com>

Hi,

I'm try-ing to apply this kind of filter on a mapserver mapfile on a
gdal/ogr spatialite dataset.

    FILTER "WHERE ID_ING LIKE '%idtpn%'"

and defining

 METADATA
      'default_idtpn' '%'

But I'm having an error with this log.

msOGRFileWhichShapes(): OGR error. SetAttributeFilter(ID_ING LIKE '%')
failed on layer rt_speleologia.idingrotte.rt.

It seem to be a gdal error.

So I like to know if the sintax

.. WHERE ID_ING LIKE '%'

Is acceptable for the OGR SQL dialect.

Thx in advance,


-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130404/31913b6c/attachment.html>

From jan.heckman at gmail.com  Thu Apr  4 13:14:29 2013
From: jan.heckman at gmail.com (Jan Heckman)
Date: Thu, 4 Apr 2013 22:14:29 +0200
Subject: [gdal-dev] Feature request: gauss and other interpolations in
	gdalwarp
In-Reply-To: <5154290F.2020402@uva.nl>
References: <51223405.1000005@uva.nl> <5122541B.7070908@uva.nl>
	<CAEUMa-f0pqvnVLDisp3kUKHA4ovvtc+m-qsQosvX9cXEeDjnaw@mail.gmail.com>
	<5154290F.2020402@uva.nl>
Message-ID: <CAKMUAtCCN9odSt3kRFpKyDmZ73Od=2Wd4tsrxddC+Q2+rqg1ew@mail.gmail.com>

Hello Jan,

There hasn't been a lot of response to your question, so I take the liberty
to give you my thoughts, for what they are worth.

My first guess was that you need something like a bilateral
filter<http://en.wikipedia.org/wiki/Bilateral_filter>.
Noise (detail) reduction is combined with edge preservation (readability).
If so, the code is quite simple and parameters can be used to optimize
results. It would have to be combined with a filter reducing the number of
pixels.
I'm not too sure about a (more or less) complete set of filters, i.e.
there's a lot of filters and I am not familiar with what might be thought
of as a complete set (gimp and image magick could be used as a source,
probably). However, see below, 'imageworsener'.

Maybe a test tile could serve to do a few tests. After that, I can take a
look at the work needed to incorporate filters in a fairly general way to
allow adding more filters.
Completely general appears unlikely and quite a strain on parameter
passing, documentation, support.

I've been reading up a bit on the subject of image downsampling /
upsampling. There is plenty afoot which might make you consider a different
approach from using a set of images, like this paper on multiscale edge
preserving <http://www.cs.huji.ac.il/~danix/epd/> as part of a stanford
course <http://www.stanford.edu/class/cs448f/lectures/> on filtering/image
manipulation.

There is signalprocessing analog with (down)sampling audio which would
separate low from high frequency signals and recombine them depending on
the required scale.
Don't know if that could be done continuously instead of just for integral
pixel reductions.
Would be great if this can be done in a server, perhaps using graphics
cards to speed up the image (re)construction.

There is public domain program on the subject, called
imageworsener<http://entropymine.com/imageworsener/>.
There are a lot of considered options, and source code. So this might be a
point of departure, either by incorporating it into gdal(warp), or vice
versa.

Hope this helps some,
Best regards,
Jan

On Thu, Mar 28, 2013 at 12:27 PM, Jan Hartmann <j.l.h.hartmann at uva.nl>wrote:

>  Perhaps I should clarify a bit what I meant, I haven't had any reactions
> until now, positive or negative, and it is important for me.
>
> I use Gdalwarp and gdaladdo extensively for goereferencing and tiling
> large historical maps serieses (raster scans). To display them efficiently,
> I need to create layers at different scale levels, e.g. if the original
> maps have a pixel size of 10 meters, I need to resample them to rasters
> with pixel sizes of 20, 40, 80 , 160, 320 and 640 meters, and tile all
> those maps appropriately. So the original maps have to be resampled quite
> drastically. In Gdalwarp there is no adequeate resampling algorithm, and
> you end up with very grainy map at those lower resolutions. Gdaladdo has
> several more algorithms, with gauss in many cases the most efficient.
> However, even with the gauss filter, maps resampled at very low resolutions
> turn out too hazy. For an example see the 1930 map of the Netherlands:
>
>  http://mapserver.sara.nl/topo/triang/
>
> If you zoom in to more detailed levels, you'll see the way the image
> sharpens. For the effect on black-white image choose the TMK-map (1850)
> with the top-center button. Filters like "unsharp mask" would perform much
> better in these cases.
>
> So I would like to propose two enhancements to gdal:
>
> - add additional filters to gdalwarp, gauss and the filters mentioned
> below.
> - implement more filters for gdalwarp and gdaladdo, e.g. "unsharp mask",
> or the "mode" filter asked by Jack below. Perhaps even add the possibility
> to specify parameters, like in ImageMagick
>
> I don't know how difficult is, and whether the gdal devs would find this
> really an improvement for gdal. I could do this with some ImageMagick or
> Gimp scripts, but it would be a kludge. As we are going to georeference the
> complete cadastral and topographical map base of the Netherlands from 1832
> to 1994 the next few years (millions of map-scans), this exentsion of gdal
> would come in very handy. And funding it will really be no problem at all.
>
> I would appreciate any kind of comment on this, positive or negative.
>
> Regards,
>
> Jan
>
> Dr. J. Hartmann
> Department of Geography
> University of Amsterdam
>
>  On 03/27/2013 10:13 PM, John Twilley wrote:
>
> I'm interested in this feature request as well.  Adding the mode
> resampling algorithm to gdalwarp would be very beneficial to my projects,
> right up there with being able to access the warp API from Python.  Is this
> at all possible?  Should I submit a feature request on Trac, or what?  Just
> let me know!
>
>  Jack.
>
> --
> mathuin at gmail dot com
>
>
> On Mon, Feb 18, 2013 at 8:17 AM, Jan Hartmann <j.l.h.hartmann at uva.nl>wrote:
>
>>
>>  Hi devs,
>>
>> Would it be possible to add gauss and other interpolations to gdalwarp?
>> At the moment I georeference large scans to 2000*2000 tiles at the most
>> detailed scale, and then create 2000*2000 tiles at resolutions of 2, 4 6
>> etc  times the original scale, using gdaladdo and gauss or other
>> interpolations. It would help immensely if I could do that directly with
>> gdalwarp.
>>
>>
>> Funding would probably no problem. The question is: can and should it be
>> done?
>>
>> Jan
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130404/f4637fac/attachment.html>

From stefano.iacovella at gmail.com  Fri Apr  5 00:32:34 2013
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Fri, 5 Apr 2013 09:32:34 +0200
Subject: [gdal-dev] Apply a style to a GeoServer Layer without creatinig
 SLD file
In-Reply-To: <CAPBhV0fwxdk1enmt5ZxMPwV9HmE-3-QYTZDEGCat7nUCcsu7XA@mail.gmail.com>
References: <CAPBhV0fwxdk1enmt5ZxMPwV9HmE-3-QYTZDEGCat7nUCcsu7XA@mail.gmail.com>
Message-ID: <CAG9OqYoQQnDR4B3cszbmEgrvhY0PV1XLKP1ez2EbLank-6K-og@mail.gmail.com>

2013/4/4 Wael Tarhouni <waelinsat at gmail.com>

> There's any way to apply a style to a layer without creating an SLD File
> physically on GeoServer (i mean a style flow).
>
> Regards


Hi,

your question should probably sent to geoserver.users mailing list.
Anyway I guess you mean sending a GetMap to WMS with a style not stored in
a file.
You can use sld_boby parameter and valorize it with xml code representing a
valid style for the layer.

Have a look at
http://docs.geoserver.org/stable/en/user/services/wms/reference.html#getmap

Cheers,

Stefano

---------------------------------------------------
41.95581N 12.52854E


http://www.linkedin.com/in/stefanoiacovella

http://twitter.com/#!/Iacovellas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130405/ebc81298/attachment.html>

From dengo at gmx.net  Fri Apr  5 00:55:31 2013
From: dengo at gmx.net (Dennis Gocke)
Date: Fri, 5 Apr 2013 09:55:31 +0200
Subject: [gdal-dev] Crash: [GDAL 1.10dev] empty shapefile with spatial index
Message-ID: <CALqbEi4sqZ8gTxC8JCr-OR4D=_KPzfD4V3VeLTyL+g0_VygEjw@mail.gmail.com>

Hi,

I've encountered a serious problem with an empty shapefile (no features)
that already has sbn, sbx files generated. When trying to create a feature
there is an Access Violation and the program crashes without any chance to
catch the exception.
The shapefile was exported with ArcCatalog, but the same happens when
creating an empty shapefile with OGR and then creating spatial index on it
with ArcCatalog.

Trying "DROP SPATIAL INDEX ON.." in OGR also produces the same crash.

When manually deleting the sbn, sbx files before opening the shapefile with
OGR, everything works fine.

I am using the C# wrapper, but I am sure the problem is in OGR itself.
The lines that can be used to reproduce the crash:

DataSource ds = Ogr.Open(@"D:\test\IndustryA_O.shp", 1);
Layer layer = ds.GetLayerByIndex(0);
FeatureDefn featureDefn = layer.GetLayerDefn();
Feature newFeature = new Feature(featureDefn);
layer.CreateFeature(newFeature);  // <-- Crash

Using GDAL 1.9.2 does not produce the crash, but this was to be expected
because 1.9.2 just ignores the spatial index.

I've also attached the shapefile. Hopefully this works with the mailing
list.

Regards,
Dennis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130405/429fe89e/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Crash_Empty_Shapefile_SpatialIndex.zip
Type: application/zip
Size: 1290 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130405/429fe89e/attachment.zip>

From CABO at NIRAS.DK  Fri Apr  5 01:06:55 2013
From: CABO at NIRAS.DK (=?iso-8859-1?Q?Casper_B=F8rgesen_=28CABO=29?=)
Date: Fri, 5 Apr 2013 08:06:55 +0000
Subject: [gdal-dev] C# ogr_wrap.dll exception with ogr.OGRERR_NONE
Message-ID: <BCF6B63AE0B25941A7F56567B58A28053518CE26@allkexa1.NIRAS.INT>

I am experiencing some problems with C# and GDAL/OGR.
I have a program where I just initialize GDAL/OGR with this command:

    OSGeo.OGR.Ogr.AllRegister();

    // Here follows some IO and data processing, and its working just fine.

Now I add a simple line to my program:

    OSGeo.OGR.Ogr.AllRegister();
    var a = OSGeo.OGR.Ogr.OGRERR_NONE

    // Here follows some IO and data processing, and it used to be working.

The type initializer for 'OSGeo.OGR.Ogr' threw an exception.
...The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception.
...... The type initializer for 'SWIGExceptionHelper' threw an exception.
......... Unable to load DLL 'ogr_wrap': The specified module could not be found. (Exception from HRESULT: 0x8007007E)

Can anyone push me in the right direction so I can determine why using Ogr.OGRERR_NONE would break my program?

Regards Casper
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130405/8ebde510/attachment-0001.html>

From CABO at NIRAS.DK  Fri Apr  5 01:29:01 2013
From: CABO at NIRAS.DK (=?iso-8859-1?Q?Casper_B=F8rgesen_=28CABO=29?=)
Date: Fri, 5 Apr 2013 08:29:01 +0000
Subject: [gdal-dev] C# ogr_wrap.dll exception with ogr.OGRERR_NONE
In-Reply-To: <BCF6B63AE0B25941A7F56567B58A28053518CE26@allkexa1.NIRAS.INT>
References: <BCF6B63AE0B25941A7F56567B58A28053518CE26@allkexa1.NIRAS.INT>
Message-ID: <BCF6B63AE0B25941A7F56567B58A28053518CE7A@allkexa1.NIRAS.INT>

Maybe I should state that I'm using GDAL 1.9.2 with VS2010.

From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Casper B?rgesen (CABO)
Sent: 5. april 2013 10:07
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] C# ogr_wrap.dll exception with ogr.OGRERR_NONE

I am experiencing some problems with C# and GDAL/OGR.
I have a program where I just initialize GDAL/OGR with this command:

    OSGeo.OGR.Ogr.AllRegister();

    // Here follows some IO and data processing, and its working just fine.

Now I add a simple line to my program:

    OSGeo.OGR.Ogr.AllRegister();
    var a = OSGeo.OGR.Ogr.OGRERR_NONE

    // Here follows some IO and data processing, and it used to be working.

The type initializer for 'OSGeo.OGR.Ogr' threw an exception.
...The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception.
...... The type initializer for 'SWIGExceptionHelper' threw an exception.
......... Unable to load DLL 'ogr_wrap': The specified module could not be found. (Exception from HRESULT: 0x8007007E)

Can anyone push me in the right direction so I can determine why using Ogr.OGRERR_NONE would break my program?

Regards Casper
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130405/43564f5b/attachment.html>

From szekerest at gmail.com  Fri Apr  5 02:34:09 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri, 5 Apr 2013 11:34:09 +0200
Subject: [gdal-dev] C# ogr_wrap.dll exception with ogr.OGRERR_NONE
In-Reply-To: <BCF6B63AE0B25941A7F56567B58A28053518CE26@allkexa1.NIRAS.INT>
References: <BCF6B63AE0B25941A7F56567B58A28053518CE26@allkexa1.NIRAS.INT>
Message-ID: <CACALY+RDYCPbhdJRXTkKcBxevd5mx9qwv5Xv2-78a5cv2ozPTA@mail.gmail.com>

Hi,

Make sure all the dependent dll-s like ogr_wrap.dll, gdal19.dll proj.dll
... are available in the appllication directory or the location added in
the PATH environment variable.

Best regards,

Tamas



2013/4/5 Casper B?rgesen (CABO) <CABO at niras.dk>

>  I am experiencing some problems with C# and GDAL/OGR.****
>
> I have a program where I just initialize GDAL/OGR with this command:****
>
> ** **
>
>     OSGeo.OGR.Ogr.AllRegister();****
>
> ** **
>
>     // Here follows some IO and data processing, and its working just fine.
> ****
>
> ** **
>
> Now I add a simple line to my program:****
>
> ** **
>
>     OSGeo.OGR.Ogr.AllRegister();****
>
>     var a = OSGeo.OGR.Ogr.OGRERR_NONE****
>
> ** **
>
>     // Here follows some IO and data processing, and it used to be working.
> ****
>
> ** **
>
> The type initializer for 'OSGeo.OGR.Ogr' threw an exception.****
>
> ?The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception.****
>
> ?? The type initializer for 'SWIGExceptionHelper' threw an exception.****
>
> ??? Unable to load DLL 'ogr_wrap': The specified module could not be
> found. (Exception from HRESULT: 0x8007007E)****
>
> ** **
>
> Can anyone push me in the right direction so I can determine why using
> Ogr.OGRERR_NONE would break my program?****
>
> ** **
>
> Regards Casper****
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130405/54848666/attachment.html>

From even.rouault at mines-paris.org  Fri Apr  5 03:07:13 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 05 Apr 2013 12:07:13 +0200
Subject: [gdal-dev] Crash: [GDAL 1.10dev] empty shapefile with spatial
	index
In-Reply-To: <CALqbEi4sqZ8gTxC8JCr-OR4D=_KPzfD4V3VeLTyL+g0_VygEjw@mail.gmail.com>
References: <CALqbEi4sqZ8gTxC8JCr-OR4D=_KPzfD4V3VeLTyL+g0_VygEjw@mail.gmail.com>
Message-ID: <1365156433.515ea2519e50e@imp.free.fr>

Selon Dennis Gocke <dengo at gmx.net>:

> Hi,
>
> I've encountered a serious problem with an empty shapefile (no features)
> that already has sbn, sbx files generated. When trying to create a feature
> there is an Access Violation and the program crashes without any chance to
> catch the exception.
> The shapefile was exported with ArcCatalog, but the same happens when
> creating an empty shapefile with OGR and then creating spatial index on it
> with ArcCatalog.
>
> Trying "DROP SPATIAL INDEX ON.." in OGR also produces the same crash.
>
> When manually deleting the sbn, sbx files before opening the shapefile with
> OGR, everything works fine.
>
> I am using the C# wrapper, but I am sure the problem is in OGR itself.
> The lines that can be used to reproduce the crash:
>
> DataSource ds = Ogr.Open(@"D:\test\IndustryA_O.shp", 1);
> Layer layer = ds.GetLayerByIndex(0);
> FeatureDefn featureDefn = layer.GetLayerDefn();
> Feature newFeature = new Feature(featureDefn);
> layer.CreateFeature(newFeature);  // <-- Crash
>
> Using GDAL 1.9.2 does not produce the crash, but this was to be expected
> because 1.9.2 just ignores the spatial index.
>
> I've also attached the shapefile. Hopefully this works with the mailing
> list.

Thanks for the precise report. I've managed to reproduce and committed a fix in
r25862.

>
> Regards,
> Dennis
>



From dengo at gmx.net  Fri Apr  5 04:12:13 2013
From: dengo at gmx.net (Dennis Gocke)
Date: Fri, 5 Apr 2013 13:12:13 +0200
Subject: [gdal-dev] Crash: [GDAL 1.10dev] empty shapefile with spatial
	index
In-Reply-To: <1365156433.515ea2519e50e@imp.free.fr>
References: <CALqbEi4sqZ8gTxC8JCr-OR4D=_KPzfD4V3VeLTyL+g0_VygEjw@mail.gmail.com>
	<1365156433.515ea2519e50e@imp.free.fr>
Message-ID: <CALqbEi6RbFAyPX17J1ifHiLAUH8Lmnm7=34hd3FdgEx9ANQmkw@mail.gmail.com>

Wow, that was fast, Thanks.

I just remembered something else I stumbled upon related to the shapefile
driver.

It's more of an user/programmer error, but it might be interesting
nonetheless.
After deleting features we normally Execute the "REPACK LayerName".
The problem is that when LayerName is not in the correct case sensitivity,
it does not work.
Which is understandable because on non-windows filesystems there might
actually be different files.

The funny thing is, when you open the DataSource/Layer with incorrect case
sensitivity in the filepath, it first seems that everything is fine, but
when you call "REPACK " + layer.GetName() it does not work, because
layer.GetName() will return the same wrong case sensitivity that was
provided when the DataSource was opened.

And there is another thing. Once someone had managed to have the different
files belonging to the same shapefile (shp, dbf) in different case
sensitivies (e.g. data.shp and DATA.dbf). As above everything except the
REPACK seemed to work fine, but the REPACK did not work. I think in this
case "REPACK data"/"REPACK DATA" either did nothing like above or it even
threw an error. That depended on how the datasource was opened with
Open("DATA.shp", 1) or Open("data.shp", 1). But in this case neither
combination worked.

Let me know if you would like more details on this.

Cheers,
Dennis


On Fri, Apr 5, 2013 at 12:07 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Selon Dennis Gocke <dengo at gmx.net>:
>
> > Hi,
> >
> > I've encountered a serious problem with an empty shapefile (no features)
> > that already has sbn, sbx files generated. When trying to create a
> feature
> > there is an Access Violation and the program crashes without any chance
> to
> > catch the exception.
> > The shapefile was exported with ArcCatalog, but the same happens when
> > creating an empty shapefile with OGR and then creating spatial index on
> it
> > with ArcCatalog.
> >
> > Trying "DROP SPATIAL INDEX ON.." in OGR also produces the same crash.
> >
> > When manually deleting the sbn, sbx files before opening the shapefile
> with
> > OGR, everything works fine.
> >
> > I am using the C# wrapper, but I am sure the problem is in OGR itself.
> > The lines that can be used to reproduce the crash:
> >
> > DataSource ds = Ogr.Open(@"D:\test\IndustryA_O.shp", 1);
> > Layer layer = ds.GetLayerByIndex(0);
> > FeatureDefn featureDefn = layer.GetLayerDefn();
> > Feature newFeature = new Feature(featureDefn);
> > layer.CreateFeature(newFeature);  // <-- Crash
> >
> > Using GDAL 1.9.2 does not produce the crash, but this was to be expected
> > because 1.9.2 just ignores the spatial index.
> >
> > I've also attached the shapefile. Hopefully this works with the mailing
> > list.
>
> Thanks for the precise report. I've managed to reproduce and committed a
> fix in
> r25862.
>
> >
> > Regards,
> > Dennis
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130405/56279a06/attachment.html>

From even.rouault at mines-paris.org  Fri Apr  5 13:33:26 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 5 Apr 2013 22:33:26 +0200
Subject: [gdal-dev] Crash: [GDAL 1.10dev] empty shapefile with spatial
	index
In-Reply-To: <CALqbEi6RbFAyPX17J1ifHiLAUH8Lmnm7=34hd3FdgEx9ANQmkw@mail.gmail.com>
References: <CALqbEi4sqZ8gTxC8JCr-OR4D=_KPzfD4V3VeLTyL+g0_VygEjw@mail.gmail.com>
	<1365156433.515ea2519e50e@imp.free.fr>
	<CALqbEi6RbFAyPX17J1ifHiLAUH8Lmnm7=34hd3FdgEx9ANQmkw@mail.gmail.com>
Message-ID: <201304052233.26987.even.rouault@mines-paris.org>

Le vendredi 05 avril 2013 13:12:13, Dennis Gocke a ?crit :
> Wow, that was fast, Thanks.
> 
> I just remembered something else I stumbled upon related to the shapefile
> driver.
> 
> It's more of an user/programmer error, but it might be interesting
> nonetheless.
> After deleting features we normally Execute the "REPACK LayerName".
> The problem is that when LayerName is not in the correct case sensitivity,
> it does not work.
> Which is understandable because on non-windows filesystems there might
> actually be different files.
> 
> The funny thing is, when you open the DataSource/Layer with incorrect case
> sensitivity in the filepath, it first seems that everything is fine, but
> when you call "REPACK " + layer.GetName() it does not work, because
> layer.GetName() will return the same wrong case sensitivity that was
> provided when the DataSource was opened.
> 
> And there is another thing. Once someone had managed to have the different
> files belonging to the same shapefile (shp, dbf) in different case
> sensitivies (e.g. data.shp and DATA.dbf). As above everything except the
> REPACK seemed to work fine, but the REPACK did not work. I think in this
> case "REPACK data"/"REPACK DATA" either did nothing like above or it even
> threw an error. That depended on how the datasource was opened with
> Open("DATA.shp", 1) or Open("data.shp", 1). But in this case neither
> combination worked.
> 
> Let me know if you would like more details on this.

Well, this mix of filename cases is certainly something that I would avoid 
because it will likely trigger a number of issues. That said, the fix for that 
particular case was easy so I've committed it. But it is only for Windows. On 
Linux, foo.shp and FOO.DBF in the same directory are going to be considered as 
two different layers.

From etourigny.dev at gmail.com  Sun Apr  7 13:19:57 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun, 7 Apr 2013 17:19:57 -0300
Subject: [gdal-dev] Feature request: gauss and other interpolations in
	gdalwarp
In-Reply-To: <CAEUMa-f0pqvnVLDisp3kUKHA4ovvtc+m-qsQosvX9cXEeDjnaw@mail.gmail.com>
References: <51223405.1000005@uva.nl> <5122541B.7070908@uva.nl>
	<CAEUMa-f0pqvnVLDisp3kUKHA4ovvtc+m-qsQosvX9cXEeDjnaw@mail.gmail.com>
Message-ID: <CA+TxYvPoKwQ_58_X0Bk-CMTM=cy9_bdiBxMB+to-zi2ivvmSnw@mail.gmail.com>

I have implemented mode and average warping algorithms, based on those used
in overview creation.

http://trac.osgeo.org/gdal/ticket/5049

This code has been tested on a few datasets (see attachments) with all
datatypes (Byte, Int, Float) but not all cases have been looked into (e.g.
color tables, various projections).

Any feedback and testing would be appreciated.

Cheers
Etienne


On Wed, Mar 27, 2013 at 6:13 PM, John Twilley <mathuin at gmail.com> wrote:

> I'm interested in this feature request as well.  Adding the mode
> resampling algorithm to gdalwarp would be very beneficial to my projects,
> right up there with being able to access the warp API from Python.  Is this
> at all possible?  Should I submit a feature request on Trac, or what?  Just
> let me know!
>
> Jack.
>
> --
> mathuin at gmail dot com
>
>
> On Mon, Feb 18, 2013 at 8:17 AM, Jan Hartmann <j.l.h.hartmann at uva.nl>wrote:
>
>>
>>  Hi devs,
>>
>> Would it be possible to add gauss and other interpolations to gdalwarp?
>> At the moment I georeference large scans to 2000*2000 tiles at the most
>> detailed scale, and then create 2000*2000 tiles at resolutions of 2, 4 6
>> etc  times the original scale, using gdaladdo and gauss or other
>> interpolations. It would help immensely if I could do that directly with
>> gdalwarp.
>>
>>
>> Funding would probably no problem. The question is: can and should it be
>> done?
>>
>> Jan
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130407/2c4f192b/attachment.html>

From p.scadden at gns.cri.nz  Sun Apr  7 17:18:36 2013
From: p.scadden at gns.cri.nz (Phil Scadden)
Date: Mon, 08 Apr 2013 12:18:36 +1200
Subject: [gdal-dev] Unable to open datasource SDE - but I have plugin all
 installed etc etc. What I am I missing.
Message-ID: <51620CDC.3020302@gns.cri.nz>


I have gdal 1.9.2. I have copied in the 3 SDE dlls. I have copied 
OGR_SDE and GDAL_SDE dlls in the plugins 1.9 area and I have got around 
the requests for debug MS dlls. At the end of all that, I still get:

Unable to open datasource `SDE: etc' with the following drivers.
   -> ESRI Shapefile
   -> MapInfo File
   -> UK .NTF
   -> SDTS
   -> TIGER
   -> S57
   -> DGN
   -> VRT
   -> REC
   -> Memory
   -> BNA
   -> CSV
   -> NAS
   -> GML
   -> GPX
   -> LIBKML
   -> KML
   -> GeoJSON
   -> Interlis 1
   -> Interlis 2
   -> GMT
   -> SQLite
   -> ODBC
   -> PGeo
   -> MSSQLSpatial
   -> OGDI
   -> PostgreSQL
   -> MySQL
   -> PCIDSK
   -> XPlane
   -> AVCBin
   -> AVCE00
   -> DXF
   -> Geoconcept
   -> GeoRSS
   -> GPSTrackMaker
   -> VFK
   -> PGDump
   -> GPSBabel
   -> SUA
   -> OpenAir
   -> PDS
   -> WFS
   -> HTF
   -> AeronavFAA
   -> Geomedia
   -> EDIGEO
   -> GFT
   -> SVG
   -> CouchDB
   -> Idrisi
   -> ARCGEN
   -> SEGUKOOA
   -> SEGY
   -> XLS

What else do I have to do??


Notice: This email and any attachments are confidential.
If received in error please destroy and immediately notify us.
Do not copy or disclose the contents.


From mathuin at gmail.com  Sun Apr  7 23:17:32 2013
From: mathuin at gmail.com (John Twilley)
Date: Sun, 7 Apr 2013 23:17:32 -0700
Subject: [gdal-dev] Feature request: gauss and other interpolations in
	gdalwarp
In-Reply-To: <CA+TxYvPoKwQ_58_X0Bk-CMTM=cy9_bdiBxMB+to-zi2ivvmSnw@mail.gmail.com>
References: <51223405.1000005@uva.nl> <5122541B.7070908@uva.nl>
	<CAEUMa-f0pqvnVLDisp3kUKHA4ovvtc+m-qsQosvX9cXEeDjnaw@mail.gmail.com>
	<CA+TxYvPoKwQ_58_X0Bk-CMTM=cy9_bdiBxMB+to-zi2ivvmSnw@mail.gmail.com>
Message-ID: <CAEUMa-cN6krR7Nm-tVhWf3GoU-JddjaJvMTuhV_AtaRab_+7cg@mail.gmail.com>

Thank you, Etienne, for writing this code.  I greatly appreciate it!

I updated my svn checkout, then applied your patch with no errors.  I tried
to warp my landcover files which use color tables (which is why mode is so
important to me) and they did not work.  Here is the output:

jmt at nala:~/git/mathuin/TopoMC$ /home/jmt/svn/gdal/apps/.libs/gdalwarp
--debug -multi -tr 6 6 -te 2087232 2395968 2104512 2410176 -r mode
regions/Provincetown/Datasets/L1L.tif L1L-new.tif
Copying color table from regions/Provincetown/Datasets/L1L.tif to new file.
Creating output file that is 2880P x 2368L.
Processing input file regions/Provincetown/Datasets/L1L.tif.
Warning: Input file regions/Provincetown/Datasets/L1L.tif has a color
table, which will likely lead to bad results when using a resampling method
other than nearest neighbour. Converting the dataset prior to 24/32 bit is
advised.
ERROR 5: GDALWarpOptions.Validate()
  eResampleArg=6 is not a supported value.
jmt at nala:~/git/mathuin/TopoMC$

Let me know if I can provide any additional information to help you out!

Jack.

-- 
mathuin at gmail dot com


On Sun, Apr 7, 2013 at 1:19 PM, Etienne Tourigny <etourigny.dev at gmail.com>wrote:

> I have implemented mode and average warping algorithms, based on those
> used in overview creation.
>
> http://trac.osgeo.org/gdal/ticket/5049
>
> This code has been tested on a few datasets (see attachments) with all
> datatypes (Byte, Int, Float) but not all cases have been looked into (e.g.
> color tables, various projections).
>
> Any feedback and testing would be appreciated.
>
> Cheers
> Etienne
>
>
> On Wed, Mar 27, 2013 at 6:13 PM, John Twilley <mathuin at gmail.com> wrote:
>
>> I'm interested in this feature request as well.  Adding the mode
>> resampling algorithm to gdalwarp would be very beneficial to my projects,
>> right up there with being able to access the warp API from Python.  Is this
>> at all possible?  Should I submit a feature request on Trac, or what?  Just
>> let me know!
>>
>> Jack.
>>
>> --
>> mathuin at gmail dot com
>>
>>
>> On Mon, Feb 18, 2013 at 8:17 AM, Jan Hartmann <j.l.h.hartmann at uva.nl>wrote:
>>
>>>
>>>  Hi devs,
>>>
>>> Would it be possible to add gauss and other interpolations to gdalwarp?
>>> At the moment I georeference large scans to 2000*2000 tiles at the most
>>> detailed scale, and then create 2000*2000 tiles at resolutions of 2, 4 6
>>> etc  times the original scale, using gdaladdo and gauss or other
>>> interpolations. It would help immensely if I could do that directly with
>>> gdalwarp.
>>>
>>>
>>> Funding would probably no problem. The question is: can and should it be
>>> done?
>>>
>>> Jan
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130407/01f36640/attachment.html>

From Stefan.Blumentrath at nina.no  Mon Apr  8 04:16:22 2013
From: Stefan.Blumentrath at nina.no (SBL)
Date: Mon, 8 Apr 2013 04:16:22 -0700 (PDT)
Subject: [gdal-dev] Compile GDAL/OGR with SOSI support
Message-ID: <1365419782783-5045207.post@n6.nabble.com>

Hi

Can somebody give me a hint on how to compile GDAL/OGR with support for the
Norwegian SOSI format?
I tried to find a solution in http://trac.osgeo.org/gdal/ticket/3638 as good
as I can, but without success...

I do have the (binary version of the) fyba library, but there is no
--with-sosi option (neither in GDAL 1.8 nor 1.9) when configuring GDAL...

I also tried:
CFLAGS="-DSOSI_ENABLED" ./configure

But compiling GDAL that way did not ask for libfyba and there is no support
for SOSI with GDAL/OGR compiled and installed that way...

SOSI is not listed after configuration and neither on:
ogrinfo --formats

Consequently, ogrinfo does not read .sos files either...

Do I have to link to libfyba when compiling and if so, how?

I am grateful for any help!

Cheers
Stefan




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Compile-GDAL-OGR-with-SOSI-support-tp5045207.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From Stefan.Blumentrath at nina.no  Mon Apr  8 04:36:41 2013
From: Stefan.Blumentrath at nina.no (SBL)
Date: Mon, 8 Apr 2013 04:36:41 -0700 (PDT)
Subject: [gdal-dev] Compile GDAL/OGR with SOSI support
In-Reply-To: <1365419782783-5045207.post@n6.nabble.com>
References: <1365419782783-5045207.post@n6.nabble.com>
Message-ID: <1365421001566-5045212.post@n6.nabble.com>

Should have mentioned: I am working on Ubuntu 12.04 (32 and 64 bit)...



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Compile-GDAL-OGR-with-SOSI-support-tp5045207p5045212.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From dengo at gmx.net  Mon Apr  8 06:19:02 2013
From: dengo at gmx.net (Dennis Gocke)
Date: Mon, 8 Apr 2013 15:19:02 +0200
Subject: [gdal-dev] OGR field names encoding and SetAttributeFilter
Message-ID: <CALqbEi4q=D+Z1KwFwgjB11u7CN-_qFNGZjc2NhXH_820kEGmig@mail.gmail.com>

Hi,
I've stumbled upon an issue related to the encoding of OGR field names.
Assuming OGR uses UTF8 encoding internally for not only field values but
also for field names, there is a problem with SetAttributeFilter.
I haven't found a definitive statement that UTF8 encoding is also used for
field names, but in my opinion this would only make sense and it seems to
work correctly when assuming UTF8 encoding for field names.
But there is an issue with SetAttributeFilter at least with the shapefile
driver.
I have created both an ANSI and an UTF8 encoded shapefile.
The shapefiles have the text fields ?Name? and ????? (Note that the byte
codes for ????? are different in ANSI and UTF8). In each shapefile I
created two features. One has set the text values to ?v???? and the other
to ?other?. The field names and field values are correctly returned (both
times assuming that OGR returns UTF8 encoded strings for field names and
field values). If I would use ANSI encoding for the field names I would not
get the correct field names in neither case.
So everything seems fine so far.
So next I tried setting different attribute filters, again assuming that I
need to provide the filter UTF8 encoded:
Name = ?v???? -> no error, correctly filtered
??? = ?v???? -> error (SQL Expression Parsing Error: syntax error)
The error is probably because it seems to think that no field with the name
"???" exists.
Trying to set the attribute filter ANSI encoded does not work either.
I realize that using non-ASCII characters for fieldnames probably isn?t a
good idea at all, but still it would be nice if it would work.

While I was doing this test I noticed another problem with the attribute
filter. It seems when coincidently filtering by ?FieldName1 = ?FieldName2??
it actually does ?FieldName1 = FieldName2? instead. In my opinion this is
not correct.
Now it gets really weird:
Although the filter ?Name = ???? produces a SQL Expression Parsing Error
(which is to be expected because the filter ???? = ..? also did), using the
filter ?Name = ?????? will work but it actually does ?Name = ????.
I have attached the two shapefiles.
Another small issue:
I just realized that when REPACKing a shapefile that has a non-default
encoding and therefor there is a *.cpg file, a *_repack.cpg file gets
created and is not deleted.

Although I normally use the C# wrapper I have done these tests using the
OGR C API directly, so that I had full control of the used string encodings.
Best regards,
Dennis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130408/4d2852cb/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Shape_Field_Name_Encoding.zip
Type: application/zip
Size: 1318 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130408/4d2852cb/attachment-0001.zip>

From grb at skogoglandskap.no  Mon Apr  8 06:50:47 2013
From: grb at skogoglandskap.no (Graeme B. Bell)
Date: Mon, 8 Apr 2013 13:50:47 +0000
Subject: [gdal-dev] Compile GDAL/OGR with SOSI support
In-Reply-To: <mailman.31315.1365427154.1025.gdal-dev@lists.osgeo.org>
References: <mailman.31315.1365427154.1025.gdal-dev@lists.osgeo.org>
Message-ID: <C9A67673-5322-4DA9-89F8-4A67732E94A1@skogoglandskap.no>


Hi there

> Can somebody give me a hint on how to compile GDAL/OGR with support for the
> Norwegian SOSI format?


Not sure about this since I haven't done it myself, but some things to investigate would be: 

1

grep -r "sosi" in the source. For me, with the svn version of gdal, this brings up:

nmake.opt:#SOSI_INC_DIR = e:/sosi
nmake.opt:#SOSI_LIBS = e:/sosi/FYBA.lib e:/sosi/GM.lib e:/sosi/UT.lib

you could edit it to reflect your local libraries and try again. 


2

http://trac.osgeo.org/gdal/ticket/3638
"	? To actually include SOSI support on windows you will have to edit the makefile.vc files in ogrsf_frmts to include:
		? "sosi" in DIRLIST
		? "sosi\*.obj" and the three FYBA .lib files in the "lib" list
	? and ogrsf_frmts/generic to include:
		? "-DSOSI_ENABLED" in BASEFORMATS (or make it optional)"

Did you do this?

3

Save the compiler output to a log and grep for 'sosi' to see if an error is preventing the compile. 

4
 
Contact the devs directly, ask for advice. Create an account on trac, file a bug, or message them directly. 

http://trac.osgeo.org/gdal/ticket/3638

In particular, 'relet' may be able to walk you through whatever he/she did to build it on linux, if you ask nicely.

Graeme.


> Message: 4
> Date: Mon, 8 Apr 2013 04:16:22 -0700 (PDT)
> From: SBL <Stefan.Blumentrath at nina.no>
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] Compile GDAL/OGR with SOSI support
> Message-ID: <1365419782783-5045207.post at n6.nabble.com>
> Content-Type: text/plain; charset=us-ascii
> 
> Hi
> 
> Can somebody give me a hint on how to compile GDAL/OGR with support for the
> Norwegian SOSI format?
> I tried to find a solution in http://trac.osgeo.org/gdal/ticket/3638 as good
> as I can, but without success...
> 
> I do have the (binary version of the) fyba library, but there is no
> --with-sosi option (neither in GDAL 1.8 nor 1.9) when configuring GDAL...
> 
> I also tried:
> CFLAGS="-DSOSI_ENABLED" ./configure


From even.rouault at mines-paris.org  Mon Apr  8 07:35:05 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 08 Apr 2013 16:35:05 +0200
Subject: [gdal-dev] OGR field names encoding and SetAttributeFilter
In-Reply-To: <CALqbEi4q=D+Z1KwFwgjB11u7CN-_qFNGZjc2NhXH_820kEGmig@mail.gmail.com>
References: <CALqbEi4q=D+Z1KwFwgjB11u7CN-_qFNGZjc2NhXH_820kEGmig@mail.gmail.com>
Message-ID: <1365431705.5162d599c7493@imp.free.fr>

Hi,

yes, I believe that the current SQL parser doesn't accept non-ASCII litterals
for column names. Not sure why.

As far as "Fieldname1 = 'Fieldname2'" being interpreted as "Fieldname1 =
Fieldname2", yes this is a non-compliance of OGR SQL with respect to the SQL
standard. I had created a ticket with a patch about that a few months ago.
Something to consider to apply for GDAL 2.0 because bringing into compliance
with the SQL standard has the potential to break backward compatibility of
existing users of GDAL.

About the repacking of shapefiles with .cpg, could you create a ticket about
that ? thanks.

Best regards,

Even

From etourigny.dev at gmail.com  Mon Apr  8 08:55:33 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 8 Apr 2013 12:55:33 -0300
Subject: [gdal-dev] Feature request: gauss and other interpolations in
	gdalwarp
In-Reply-To: <CAEUMa-cN6krR7Nm-tVhWf3GoU-JddjaJvMTuhV_AtaRab_+7cg@mail.gmail.com>
References: <51223405.1000005@uva.nl> <5122541B.7070908@uva.nl>
	<CAEUMa-f0pqvnVLDisp3kUKHA4ovvtc+m-qsQosvX9cXEeDjnaw@mail.gmail.com>
	<CA+TxYvPoKwQ_58_X0Bk-CMTM=cy9_bdiBxMB+to-zi2ivvmSnw@mail.gmail.com>
	<CAEUMa-cN6krR7Nm-tVhWf3GoU-JddjaJvMTuhV_AtaRab_+7cg@mail.gmail.com>
Message-ID: <CA+TxYvNmATeqO0O9OCJHyn7kE+7TUkaZVoC28H8xnzfzoBbGfA@mail.gmail.com>

Please upload your file to the ticket (or just a small subset if the file
is sensitive, or a way to generate a similar file, or send it to me).

It is probably because of the color table which I have not tested for.

Etienne


On Mon, Apr 8, 2013 at 3:17 AM, John Twilley <mathuin at gmail.com> wrote:

> Thank you, Etienne, for writing this code.  I greatly appreciate it!
>
> I updated my svn checkout, then applied your patch with no errors.  I
> tried to warp my landcover files which use color tables (which is why mode
> is so important to me) and they did not work.  Here is the output:
>
> jmt at nala:~/git/mathuin/TopoMC$ /home/jmt/svn/gdal/apps/.libs/gdalwarp
> --debug -multi -tr 6 6 -te 2087232 2395968 2104512 2410176 -r mode
> regions/Provincetown/Datasets/L1L.tif L1L-new.tif
> Copying color table from regions/Provincetown/Datasets/L1L.tif to new file.
> Creating output file that is 2880P x 2368L.
> Processing input file regions/Provincetown/Datasets/L1L.tif.
> Warning: Input file regions/Provincetown/Datasets/L1L.tif has a color
> table, which will likely lead to bad results when using a resampling method
> other than nearest neighbour. Converting the dataset prior to 24/32 bit is
> advised.
> ERROR 5: GDALWarpOptions.Validate()
>   eResampleArg=6 is not a supported value.
> jmt at nala:~/git/mathuin/TopoMC$
>
> Let me know if I can provide any additional information to help you out!
>
> Jack.
>
> --
> mathuin at gmail dot com
>
>
> On Sun, Apr 7, 2013 at 1:19 PM, Etienne Tourigny <etourigny.dev at gmail.com>wrote:
>
>> I have implemented mode and average warping algorithms, based on those
>> used in overview creation.
>>
>> http://trac.osgeo.org/gdal/ticket/5049
>>
>> This code has been tested on a few datasets (see attachments) with all
>> datatypes (Byte, Int, Float) but not all cases have been looked into (e.g.
>> color tables, various projections).
>>
>> Any feedback and testing would be appreciated.
>>
>> Cheers
>> Etienne
>>
>>
>> On Wed, Mar 27, 2013 at 6:13 PM, John Twilley <mathuin at gmail.com> wrote:
>>
>>> I'm interested in this feature request as well.  Adding the mode
>>> resampling algorithm to gdalwarp would be very beneficial to my projects,
>>> right up there with being able to access the warp API from Python.  Is this
>>> at all possible?  Should I submit a feature request on Trac, or what?  Just
>>> let me know!
>>>
>>> Jack.
>>>
>>> --
>>> mathuin at gmail dot com
>>>
>>>
>>> On Mon, Feb 18, 2013 at 8:17 AM, Jan Hartmann <j.l.h.hartmann at uva.nl>wrote:
>>>
>>>>
>>>>  Hi devs,
>>>>
>>>> Would it be possible to add gauss and other interpolations to gdalwarp?
>>>> At the moment I georeference large scans to 2000*2000 tiles at the most
>>>> detailed scale, and then create 2000*2000 tiles at resolutions of 2, 4 6
>>>> etc  times the original scale, using gdaladdo and gauss or other
>>>> interpolations. It would help immensely if I could do that directly with
>>>> gdalwarp.
>>>>
>>>>
>>>> Funding would probably no problem. The question is: can and should it
>>>> be done?
>>>>
>>>> Jan
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130408/e0f92e5b/attachment.html>

From Stefan.Blumentrath at nina.no  Mon Apr  8 15:18:55 2013
From: Stefan.Blumentrath at nina.no (SBL)
Date: Mon, 8 Apr 2013 15:18:55 -0700 (PDT)
Subject: [gdal-dev] Compile GDAL/OGR with SOSI support
In-Reply-To: <C9A67673-5322-4DA9-89F8-4A67732E94A1@skogoglandskap.no>
References: <1365419782783-5045207.post@n6.nabble.com>
	<C9A67673-5322-4DA9-89F8-4A67732E94A1@skogoglandskap.no>
Message-ID: <1365459535900-5045358.post@n6.nabble.com>

Hi again

And thanks for the feedback I got so far.

I read the webside J?rn recommended and tried and ended up with Graeme`s
suggestion 4 because 3 did not reveal anything new. (1 and 2 are windows
related while I am on Ubuntu Linux).

By try and error I managed at least to let "make" look for the SOSI driver,
when compiling GDAL/OGR with:
CFLAGS="-DSOSI_ENABLED" CXXFLAGS="-DSOSI_ENABLED" CPPFLAGS="-DSOSI_ENABLED"
./configure

But then on "make" I get several of the following error messages:

.libs/libgdal.so: undefined reference to `RegisterOGRSOSI'
collect2: ld returned 1 exit status
make[1]: *** [gdaltindex] Error 1
make[1]: *** Waiting for unfinished jobs....

Any ideas?

Cheers
Stefan



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Compile-GDAL-OGR-with-SOSI-support-tp5045207p5045358.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From dengo at gmx.net  Tue Apr  9 02:01:19 2013
From: dengo at gmx.net (Dennis Gocke)
Date: Tue, 9 Apr 2013 11:01:19 +0200
Subject: [gdal-dev] OGR field names encoding and SetAttributeFilter
In-Reply-To: <201304082153.41913.even.rouault@mines-paris.org>
References: <CALqbEi4q=D+Z1KwFwgjB11u7CN-_qFNGZjc2NhXH_820kEGmig@mail.gmail.com>
	<1365431705.5162d599c7493@imp.free.fr>
	<201304082153.41913.even.rouault@mines-paris.org>
Message-ID: <CALqbEi7=Zcd571SEWNcRVz+0f98C81Pge7t=jgTbHEXGt=1B9g@mail.gmail.com>

Thanks Even.
It's strange that the SQL parser does not accept non-ASCII literals when
writing "FieldName = .." but when writing
"'Fieldname' = .." it does. It think this is not good, because it more or
less encourages the wrong use of ' when specifying field names.
Is there a reason for this strange behaviour that I'm missing? Perhaps this
is because without the ' it would confuse the SQL parser when some special
literals are within the field name (e.g. spaces).

I just noticed you can also use " when specifying field names in OGR, so
it's not so bad. This is for instance like in ArcMap, but there " can only
be used when specifying field names and not for specifying strings where '
needs to be used. It would be nice if OGR would differentiate between ' and
", but I agree that might break stuff for people that are used to the
current behaviour of OGR.
So to complete the same example as in the original message (??? is the name
of a field, v??? is just a string value):
Name = ?v???? -> no error, correctly filtered
??? = ?v???? -> error (SQL Expression Parsing Error: syntax error) (Would
be nice if this would work)
'???' = ?v???? -> no error, but it actually filters ??? = ?v???? (IMO this
should only compare the strings and therefor return no results)
"???" = ?v???? -> no error, and it correctly filters ??? = ?v????
"???" = "v???" -> no error, but it actually filters ??? = ?v???? (I would
prefer a parsing error here)
Regards,
Dennis


On Mon, Apr 8, 2013 at 9:53 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> > About the repacking of shapefiles with .cpg, could you create a ticket
> > about that ? thanks.
>
> I've just fixed that issue in trunk, so you don't need to create a ticket.
>
> >
> > Best regards,
> >
> > Even
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130409/02e3e62b/attachment.html>

From jmckenna at gatewaygeomatics.com  Tue Apr  9 04:29:43 2013
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue, 09 Apr 2013 08:29:43 -0300
Subject: [gdal-dev] Compile GDAL/OGR with SOSI support
In-Reply-To: <C9A67673-5322-4DA9-89F8-4A67732E94A1@skogoglandskap.no>
References: <mailman.31315.1365427154.1025.gdal-dev@lists.osgeo.org>
	<C9A67673-5322-4DA9-89F8-4A67732E94A1@skogoglandskap.no>
Message-ID: <5163FBA7.5030704@gatewaygeomatics.com>

Hi Graeme,

It would be great if you could place your SOSI build steps on the
BuildHints wiki: http://trac.osgeo.org/gdal/wiki/BuildHints

Thanks,

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/

On 2013-04-08 10:50 AM, Graeme B. Bell wrote:
> 
> Hi there
> 
>> Can somebody give me a hint on how to compile GDAL/OGR with support for the
>> Norwegian SOSI format?
> 
> 
> Not sure about this since I haven't done it myself, but some things to investigate would be: 
> 
> 1
> 
> grep -r "sosi" in the source. For me, with the svn version of gdal, this brings up:
> 
> nmake.opt:#SOSI_INC_DIR = e:/sosi
> nmake.opt:#SOSI_LIBS = e:/sosi/FYBA.lib e:/sosi/GM.lib e:/sosi/UT.lib
> 
> you could edit it to reflect your local libraries and try again. 
> 
> 
> 2
> 
> http://trac.osgeo.org/gdal/ticket/3638
> "	? To actually include SOSI support on windows you will have to edit the makefile.vc files in ogrsf_frmts to include:
> 		? "sosi" in DIRLIST
> 		? "sosi\*.obj" and the three FYBA .lib files in the "lib" list
> 	? and ogrsf_frmts/generic to include:
> 		? "-DSOSI_ENABLED" in BASEFORMATS (or make it optional)"
> 
> Did you do this?
> 
> 3
> 
> Save the compiler output to a log and grep for 'sosi' to see if an error is preventing the compile. 
> 
> 4
>  
> Contact the devs directly, ask for advice. Create an account on trac, file a bug, or message them directly. 
> 
> http://trac.osgeo.org/gdal/ticket/3638
> 
> In particular, 'relet' may be able to walk you through whatever he/she did to build it on linux, if you ask nicely.
> 
> Graeme.
> 
> 
>> Message: 4
>> Date: Mon, 8 Apr 2013 04:16:22 -0700 (PDT)
>> From: SBL <Stefan.Blumentrath at nina.no>
>> To: gdal-dev at lists.osgeo.org
>> Subject: [gdal-dev] Compile GDAL/OGR with SOSI support
>> Message-ID: <1365419782783-5045207.post at n6.nabble.com>
>> Content-Type: text/plain; charset=us-ascii
>>
>> Hi
>>
>> Can somebody give me a hint on how to compile GDAL/OGR with support for the
>> Norwegian SOSI format?
>> I tried to find a solution in http://trac.osgeo.org/gdal/ticket/3638 as good
>> as I can, but without success...
>>
>> I do have the (binary version of the) fyba library, but there is no
>> --with-sosi option (neither in GDAL 1.8 nor 1.9) when configuring GDAL...
>>
>> I also tried:
>> CFLAGS="-DSOSI_ENABLED" ./configure
> 


From dengo at gmx.net  Tue Apr  9 05:21:34 2013
From: dengo at gmx.net (Dennis Gocke)
Date: Tue, 9 Apr 2013 14:21:34 +0200
Subject: [gdal-dev] OGR field names encoding and SetAttributeFilter
In-Reply-To: <CALqbEi7=Zcd571SEWNcRVz+0f98C81Pge7t=jgTbHEXGt=1B9g@mail.gmail.com>
References: <CALqbEi4q=D+Z1KwFwgjB11u7CN-_qFNGZjc2NhXH_820kEGmig@mail.gmail.com>
	<1365431705.5162d599c7493@imp.free.fr>
	<201304082153.41913.even.rouault@mines-paris.org>
	<CALqbEi7=Zcd571SEWNcRVz+0f98C81Pge7t=jgTbHEXGt=1B9g@mail.gmail.com>
Message-ID: <CALqbEi7q_02iE-giwT9AEai8x4LCW2ORHWvepHENvNv5MARARA@mail.gmail.com>

I've done the same test with a PostGIS DB as an example where the filter is
evaluated on the server and not by OGR.

Regarding encoding, everything worked fine when always assuming UTF8
encoding for field names, field values and AttributeFilter.

Although Postgre accepts something like Name = ?v???? it also does not
accept ??? = ?v????, but "???" = ?v???? works fine.
So It's probably best practice to always use " when specifying field names.
In that regard the OGR QueryFilter works OK.

But Postgre correctly differentiates between " and '.

Cheers,
Dennis



On Tue, Apr 9, 2013 at 11:01 AM, Dennis Gocke <dengo at gmx.net> wrote:

> Thanks Even.
> It's strange that the SQL parser does not accept non-ASCII literals when
> writing "FieldName = .." but when writing
> "'Fieldname' = .." it does. It think this is not good, because it more or
> less encourages the wrong use of ' when specifying field names.
> Is there a reason for this strange behaviour that I'm missing? Perhaps
> this is because without the ' it would confuse the SQL parser when some
> special literals are within the field name (e.g. spaces).
>
> I just noticed you can also use " when specifying field names in OGR, so
> it's not so bad. This is for instance like in ArcMap, but there " can only
> be used when specifying field names and not for specifying strings where '
> needs to be used. It would be nice if OGR would differentiate between ' and
> ", but I agree that might break stuff for people that are used to the
> current behaviour of OGR.
>  So to complete the same example as in the original message (??? is the
> name of a field, v??? is just a string value):
> Name = ?v???? -> no error, correctly filtered
> ??? = ?v???? -> error (SQL Expression Parsing Error: syntax error) (Would
> be nice if this would work)
> '???' = ?v???? -> no error, but it actually filters ??? = ?v???? (IMO this
> should only compare the strings and therefor return no results)
> "???" = ?v???? -> no error, and it correctly filters ??? = ?v????
> "???" = "v???" -> no error, but it actually filters ??? = ?v???? (I would
> prefer a parsing error here)
> Regards,
> Dennis
>
>
> On Mon, Apr 8, 2013 at 9:53 PM, Even Rouault <even.rouault at mines-paris.org
> > wrote:
>
>> > About the repacking of shapefiles with .cpg, could you create a ticket
>> > about that ? thanks.
>>
>> I've just fixed that issue in trunk, so you don't need to create a ticket.
>>
>> >
>> > Best regards,
>> >
>> > Even
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev at lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130409/5cb7723d/attachment.html>

From etourigny.dev at gmail.com  Tue Apr  9 06:01:12 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 9 Apr 2013 10:01:12 -0300
Subject: [gdal-dev] Feature request: gauss and other interpolations in
	gdalwarp
In-Reply-To: <CAEUMa-cN6krR7Nm-tVhWf3GoU-JddjaJvMTuhV_AtaRab_+7cg@mail.gmail.com>
References: <51223405.1000005@uva.nl> <5122541B.7070908@uva.nl>
	<CAEUMa-f0pqvnVLDisp3kUKHA4ovvtc+m-qsQosvX9cXEeDjnaw@mail.gmail.com>
	<CA+TxYvPoKwQ_58_X0Bk-CMTM=cy9_bdiBxMB+to-zi2ivvmSnw@mail.gmail.com>
	<CAEUMa-cN6krR7Nm-tVhWf3GoU-JddjaJvMTuhV_AtaRab_+7cg@mail.gmail.com>
Message-ID: <CA+TxYvNQu7fHTzKyWsGcRvw4_1GKG-=e1GXOeMNnLf-gD1M7bA@mail.gmail.com>

The patch works successfully - it was a build environment problem.


On Mon, Apr 8, 2013 at 3:17 AM, John Twilley <mathuin at gmail.com> wrote:

> Thank you, Etienne, for writing this code.  I greatly appreciate it!
>
> I updated my svn checkout, then applied your patch with no errors.  I
> tried to warp my landcover files which use color tables (which is why mode
> is so important to me) and they did not work.  Here is the output:
>
> jmt at nala:~/git/mathuin/TopoMC$ /home/jmt/svn/gdal/apps/.libs/gdalwarp
> --debug -multi -tr 6 6 -te 2087232 2395968 2104512 2410176 -r mode
> regions/Provincetown/Datasets/L1L.tif L1L-new.tif
> Copying color table from regions/Provincetown/Datasets/L1L.tif to new file.
> Creating output file that is 2880P x 2368L.
> Processing input file regions/Provincetown/Datasets/L1L.tif.
> Warning: Input file regions/Provincetown/Datasets/L1L.tif has a color
> table, which will likely lead to bad results when using a resampling method
> other than nearest neighbour. Converting the dataset prior to 24/32 bit is
> advised.
> ERROR 5: GDALWarpOptions.Validate()
>   eResampleArg=6 is not a supported value.
> jmt at nala:~/git/mathuin/TopoMC$
>
> Let me know if I can provide any additional information to help you out!
>
> Jack.
>
> --
> mathuin at gmail dot com
>
>
> On Sun, Apr 7, 2013 at 1:19 PM, Etienne Tourigny <etourigny.dev at gmail.com>wrote:
>
>> I have implemented mode and average warping algorithms, based on those
>> used in overview creation.
>>
>> http://trac.osgeo.org/gdal/ticket/5049
>>
>> This code has been tested on a few datasets (see attachments) with all
>> datatypes (Byte, Int, Float) but not all cases have been looked into (e.g.
>> color tables, various projections).
>>
>> Any feedback and testing would be appreciated.
>>
>> Cheers
>> Etienne
>>
>>
>> On Wed, Mar 27, 2013 at 6:13 PM, John Twilley <mathuin at gmail.com> wrote:
>>
>>> I'm interested in this feature request as well.  Adding the mode
>>> resampling algorithm to gdalwarp would be very beneficial to my projects,
>>> right up there with being able to access the warp API from Python.  Is this
>>> at all possible?  Should I submit a feature request on Trac, or what?  Just
>>> let me know!
>>>
>>> Jack.
>>>
>>> --
>>> mathuin at gmail dot com
>>>
>>>
>>> On Mon, Feb 18, 2013 at 8:17 AM, Jan Hartmann <j.l.h.hartmann at uva.nl>wrote:
>>>
>>>>
>>>>  Hi devs,
>>>>
>>>> Would it be possible to add gauss and other interpolations to gdalwarp?
>>>> At the moment I georeference large scans to 2000*2000 tiles at the most
>>>> detailed scale, and then create 2000*2000 tiles at resolutions of 2, 4 6
>>>> etc  times the original scale, using gdaladdo and gauss or other
>>>> interpolations. It would help immensely if I could do that directly with
>>>> gdalwarp.
>>>>
>>>>
>>>> Funding would probably no problem. The question is: can and should it
>>>> be done?
>>>>
>>>> Jan
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130409/92bc6e42/attachment-0001.html>

From etourigny.dev at gmail.com  Tue Apr  9 10:06:28 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 9 Apr 2013 14:06:28 -0300
Subject: [gdal-dev] Feature request: gauss and other interpolations in
	gdalwarp
In-Reply-To: <CA+TxYvNQu7fHTzKyWsGcRvw4_1GKG-=e1GXOeMNnLf-gD1M7bA@mail.gmail.com>
References: <51223405.1000005@uva.nl> <5122541B.7070908@uva.nl>
	<CAEUMa-f0pqvnVLDisp3kUKHA4ovvtc+m-qsQosvX9cXEeDjnaw@mail.gmail.com>
	<CA+TxYvPoKwQ_58_X0Bk-CMTM=cy9_bdiBxMB+to-zi2ivvmSnw@mail.gmail.com>
	<CAEUMa-cN6krR7Nm-tVhWf3GoU-JddjaJvMTuhV_AtaRab_+7cg@mail.gmail.com>
	<CA+TxYvNQu7fHTzKyWsGcRvw4_1GKG-=e1GXOeMNnLf-gD1M7bA@mail.gmail.com>
Message-ID: <CA+TxYvNzJ75sk3AAyVrviWTRVeL-91jwEzdP8KMxW63Up6Sryw@mail.gmail.com>

I have committed new warping methods average and mode to trunk, this will
be part of gdal-1.10


On Tue, Apr 9, 2013 at 10:01 AM, Etienne Tourigny
<etourigny.dev at gmail.com>wrote:

> The patch works successfully - it was a build environment problem.
>
>
> On Mon, Apr 8, 2013 at 3:17 AM, John Twilley <mathuin at gmail.com> wrote:
>
>> Thank you, Etienne, for writing this code.  I greatly appreciate it!
>>
>> I updated my svn checkout, then applied your patch with no errors.  I
>> tried to warp my landcover files which use color tables (which is why mode
>> is so important to me) and they did not work.  Here is the output:
>>
>> jmt at nala:~/git/mathuin/TopoMC$ /home/jmt/svn/gdal/apps/.libs/gdalwarp
>> --debug -multi -tr 6 6 -te 2087232 2395968 2104512 2410176 -r mode
>> regions/Provincetown/Datasets/L1L.tif L1L-new.tif
>> Copying color table from regions/Provincetown/Datasets/L1L.tif to new
>> file.
>> Creating output file that is 2880P x 2368L.
>> Processing input file regions/Provincetown/Datasets/L1L.tif.
>> Warning: Input file regions/Provincetown/Datasets/L1L.tif has a color
>> table, which will likely lead to bad results when using a resampling method
>> other than nearest neighbour. Converting the dataset prior to 24/32 bit is
>> advised.
>> ERROR 5: GDALWarpOptions.Validate()
>>   eResampleArg=6 is not a supported value.
>> jmt at nala:~/git/mathuin/TopoMC$
>>
>> Let me know if I can provide any additional information to help you out!
>>
>> Jack.
>>
>> --
>> mathuin at gmail dot com
>>
>>
>> On Sun, Apr 7, 2013 at 1:19 PM, Etienne Tourigny <etourigny.dev at gmail.com
>> > wrote:
>>
>>> I have implemented mode and average warping algorithms, based on those
>>> used in overview creation.
>>>
>>> http://trac.osgeo.org/gdal/ticket/5049
>>>
>>> This code has been tested on a few datasets (see attachments) with all
>>> datatypes (Byte, Int, Float) but not all cases have been looked into (e.g.
>>> color tables, various projections).
>>>
>>> Any feedback and testing would be appreciated.
>>>
>>> Cheers
>>> Etienne
>>>
>>>
>>> On Wed, Mar 27, 2013 at 6:13 PM, John Twilley <mathuin at gmail.com> wrote:
>>>
>>>> I'm interested in this feature request as well.  Adding the mode
>>>> resampling algorithm to gdalwarp would be very beneficial to my projects,
>>>> right up there with being able to access the warp API from Python.  Is this
>>>> at all possible?  Should I submit a feature request on Trac, or what?  Just
>>>> let me know!
>>>>
>>>> Jack.
>>>>
>>>> --
>>>> mathuin at gmail dot com
>>>>
>>>>
>>>> On Mon, Feb 18, 2013 at 8:17 AM, Jan Hartmann <j.l.h.hartmann at uva.nl>wrote:
>>>>
>>>>>
>>>>>  Hi devs,
>>>>>
>>>>> Would it be possible to add gauss and other interpolations to
>>>>> gdalwarp? At the moment I georeference large scans to 2000*2000 tiles at
>>>>> the most detailed scale, and then create 2000*2000 tiles at resolutions of
>>>>> 2, 4 6 etc  times the original scale, using gdaladdo and gauss or other
>>>>> interpolations. It would help immensely if I could do that directly with
>>>>> gdalwarp.
>>>>>
>>>>>
>>>>> Funding would probably no problem. The question is: can and should it
>>>>> be done?
>>>>>
>>>>> Jan
>>>>>
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130409/14c107aa/attachment.html>

From even.rouault at mines-paris.org  Tue Apr  9 11:34:40 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 9 Apr 2013 20:34:40 +0200
Subject: [gdal-dev] Feature request: gauss and other interpolations in
	gdalwarp
In-Reply-To: <CA+TxYvNzJ75sk3AAyVrviWTRVeL-91jwEzdP8KMxW63Up6Sryw@mail.gmail.com>
References: <51223405.1000005@uva.nl>
	<CA+TxYvNQu7fHTzKyWsGcRvw4_1GKG-=e1GXOeMNnLf-gD1M7bA@mail.gmail.com>
	<CA+TxYvNzJ75sk3AAyVrviWTRVeL-91jwEzdP8KMxW63Up6Sryw@mail.gmail.com>
Message-ID: <201304092034.40806.even.rouault@mines-paris.org>

Le mardi 09 avril 2013 19:06:28, Etienne Tourigny a ?crit :
> I have committed new warping methods average and mode to trunk, this will
> be part of gdal-1.10

Hi Etienne,

It would be good if you could extend the autotest suite to add tests for those 
new warping methods. For that, you can likely take inspiration from the first 
tests of autotest/warp/warp.py. "Reference" images based on utmsmall.tif 
reference image is a bit big, but you can likely start from a smaller source 
image like byte.tif instead that will produce reference images of reasonable 
size to be put in svn.

Regarding nAlgo == 2 (mode with foating point data), the allocations of 
pafVals and panSums have the potential to fail if warping is done on a large 
image whose floating point values are rarely identical. So I think that 
VSIRealloc shoud be used instead with a test on the result to fail properly. 
I'm also a bit doubtfull about the practical usefulness of this case on real 
data. There might also be a performance issue due to the loop "//Check array 
for existing entry" that is at the most inner level of the algorithm. Unless 
you have a practical use case, my personnal opinion would be to refuse to run 
mode resampling on floating point data, or implement it with a tolerance 
parameter to avoid strict floating point comparison (if that makes sense), but 
even that wouldn't guarantee reasonable performance and memory consumption.

As far as mode resampling is concerned, it would likely run correctly for 
images with color tables, so I believe that the warning in gdalwarp.cpp at 
line 1048 could be shut down in that case too (in addition to nearest 
resampling)


Best regards,

Even

From even.rouault at mines-paris.org  Tue Apr  9 14:50:34 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 9 Apr 2013 23:50:34 +0200
Subject: [gdal-dev] Feature request: gauss and other interpolations in
	gdalwarp
In-Reply-To: <201304092034.40806.even.rouault@mines-paris.org>
References: <51223405.1000005@uva.nl>
	<CA+TxYvNzJ75sk3AAyVrviWTRVeL-91jwEzdP8KMxW63Up6Sryw@mail.gmail.com>
	<201304092034.40806.even.rouault@mines-paris.org>
Message-ID: <201304092350.34309.even.rouault@mines-paris.org>

Le mardi 09 avril 2013 20:34:40, Even Rouault a ?crit :
> Le mardi 09 avril 2013 19:06:28, Etienne Tourigny a ?crit :
> > I have committed new warping methods average and mode to trunk, this will
> > be part of gdal-1.10
> 
> Hi Etienne,
> 
> It would be good if you could extend the autotest suite to add tests for
> those new warping methods. For that, you can likely take inspiration from
> the first tests of autotest/warp/warp.py. "Reference" images based on
> utmsmall.tif reference image is a bit big, but you can likely start from a
> smaller source image like byte.tif instead that will produce reference
> images of reasonable size to be put in svn.
> 
> Regarding nAlgo == 2 (mode with foating point data), the allocations of
> pafVals and panSums have the potential to fail if warping is done on a
> large image whose floating point values are rarely identical. So I think
> that VSIRealloc shoud be used instead with a test on the result to fail
> properly. I'm also a bit doubtfull about the practical usefulness of this
> case on real data. There might also be a performance issue due to the loop
> "//Check array for existing entry" that is at the most inner level of the
> algorithm. 

I stand corrected on the above comment about big memory consumption. The size 
of the array is limited to the number of source pixels needed to compute a 
target pixel, so unless you do extreme subsampling, that should be OK.

I've just noticed however that pafVals and panSums aren't free'd, so there's a 
memory leak currently. And the CPLRealloc() are a bit weird as currently coded 
:

                        
                        int      nMaxNumPx = 0;
                        float*   pafVals = NULL;
                        int*     panSums = NULL;
                        
                        if (nNumPx > nMaxNumPx)
                        {
                            pafVals = (float*) CPLRealloc(pafVals, nNumPx * 
sizeof(float));
                            panSums = (int*) CPLRealloc(panSums, nNumPx * 
sizeof(int));
                            nMaxNumPx = nNumPx;
                        }

The test is always true, so CPLMalloc() would be clearer. But I think there 
was a will to move nMaxNumPx, pafVals, panSums before the top loops. So that 
should likely be done.

From etourigny.dev at gmail.com  Tue Apr  9 14:54:58 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 9 Apr 2013 18:54:58 -0300
Subject: [gdal-dev] Feature request: gauss and other interpolations in
	gdalwarp
In-Reply-To: <201304092034.40806.even.rouault@mines-paris.org>
References: <51223405.1000005@uva.nl>
	<CA+TxYvNQu7fHTzKyWsGcRvw4_1GKG-=e1GXOeMNnLf-gD1M7bA@mail.gmail.com>
	<CA+TxYvNzJ75sk3AAyVrviWTRVeL-91jwEzdP8KMxW63Up6Sryw@mail.gmail.com>
	<201304092034.40806.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvPwt641d=0ohGs483jrZQ0a3fyXvqX3P8jYGDerBuNpwg@mail.gmail.com>

Hi Even,

Thanks for your input


On Tue, Apr 9, 2013 at 3:34 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mardi 09 avril 2013 19:06:28, Etienne Tourigny a ?crit :
> > I have committed new warping methods average and mode to trunk, this will
> > be part of gdal-1.10
>
> Hi Etienne,
>
> It would be good if you could extend the autotest suite to add tests for
> those
> new warping methods. For that, you can likely take inspiration from the
> first
> tests of autotest/warp/warp.py. "Reference" images based on utmsmall.tif
> reference image is a bit big, but you can likely start from a smaller
> source
> image like byte.tif instead that will produce reference images of
> reasonable
> size to be put in svn.
>

I will do that, thanks


>
> Regarding nAlgo == 2 (mode with foating point data), the allocations of
> pafVals and panSums have the potential to fail if warping is done on a
> large
> image whose floating point values are rarely identical. So I think that
> VSIRealloc shoud be used instead with a test on the result to fail
> properly.
> I'm also a bit doubtfull about the practical usefulness of this case on
> real
> data. There might also be a performance issue due to the loop "//Check
> array
> for existing entry" that is at the most inner level of the algorithm.
> Unless
> you have a practical use case, my personnal opinion would be to refuse to
> run
> mode resampling on floating point data, or implement it with a tolerance
> parameter to avoid strict floating point comparison (if that makes sense),
> but
> even that wouldn't guarantee reasonable performance and memory consumption.
>

The logic was copied from existing code for overviews...
It is rather inefficient when dealing with floating-point or even integer
(16/32 bits).

You are right that it is not really practical, but I decided to go ahead
and implement it anyway.
Mostly I implemented it to deal with 16 and 32 bit integers, and was lazy
to implement an integer-only solution.

So here is my suggestion : modify this to use 32-bit integers instead, and
refuse to run with floating-point data.
The same could be done to overviews, although that *might* cause some
regressions (although as you point out, mode resampling doesn't make sense
for floating-point data).
Or another solution is to implement a new integer algorithm, and leave the
floating-point one around but print a warning.



>
> As far as mode resampling is concerned, it would likely run correctly for
> images with color tables, so I believe that the warning in gdalwarp.cpp at
> line 1048 could be shut down in that case too (in addition to nearest
> resampling)
>

I have tested with a color table, and mode resampling does work. I forgot
to update gdalwarp for this case, thanks.


>
>
> Best regards,
>
> Even
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130409/a282fac7/attachment.html>

From etourigny.dev at gmail.com  Tue Apr  9 14:57:04 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 9 Apr 2013 18:57:04 -0300
Subject: [gdal-dev] Feature request: gauss and other interpolations in
	gdalwarp
In-Reply-To: <201304092350.34309.even.rouault@mines-paris.org>
References: <51223405.1000005@uva.nl>
	<CA+TxYvNzJ75sk3AAyVrviWTRVeL-91jwEzdP8KMxW63Up6Sryw@mail.gmail.com>
	<201304092034.40806.even.rouault@mines-paris.org>
	<201304092350.34309.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvPJZdgi9GEx6-G=EdTHwU-P8vYb2S2A9jCmP5de_HG8aA@mail.gmail.com>

On Tue, Apr 9, 2013 at 6:50 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mardi 09 avril 2013 20:34:40, Even Rouault a ?crit :
> > Le mardi 09 avril 2013 19:06:28, Etienne Tourigny a ?crit :
> > > I have committed new warping methods average and mode to trunk, this
> will
> > > be part of gdal-1.10
> >
> > Hi Etienne,
> >
> > It would be good if you could extend the autotest suite to add tests for
> > those new warping methods. For that, you can likely take inspiration from
> > the first tests of autotest/warp/warp.py. "Reference" images based on
> > utmsmall.tif reference image is a bit big, but you can likely start from
> a
> > smaller source image like byte.tif instead that will produce reference
> > images of reasonable size to be put in svn.
> >
> > Regarding nAlgo == 2 (mode with foating point data), the allocations of
> > pafVals and panSums have the potential to fail if warping is done on a
> > large image whose floating point values are rarely identical. So I think
> > that VSIRealloc shoud be used instead with a test on the result to fail
> > properly. I'm also a bit doubtfull about the practical usefulness of this
> > case on real data. There might also be a performance issue due to the
> loop
> > "//Check array for existing entry" that is at the most inner level of the
> > algorithm.
>
> I stand corrected on the above comment about big memory consumption. The
> size
> of the array is limited to the number of source pixels needed to compute a
> target pixel, so unless you do extreme subsampling, that should be OK.
>
yes

>
> I've just noticed however that pafVals and panSums aren't free'd, so
> there's a
> memory leak currently. And the CPLRealloc() are a bit weird as currently
> coded
> :
>
>
>                         int      nMaxNumPx = 0;
>                         float*   pafVals = NULL;
>                         int*     panSums = NULL;
>
>                         if (nNumPx > nMaxNumPx)
>                         {
>                             pafVals = (float*) CPLRealloc(pafVals, nNumPx *
> sizeof(float));
>                             panSums = (int*) CPLRealloc(panSums, nNumPx *
> sizeof(int));
>                             nMaxNumPx = nNumPx;
>                         }
>
> The test is always true, so CPLMalloc() would be clearer. But I think there
> was a will to move nMaxNumPx, pafVals, panSums before the top loops. So
> that
> should likely be done.
>

I thought it is weird also, but again copied over from overview code.

I thought about running valgrind, but then forgot. I will take your
suggestions into consideration, thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130409/e5fdc657/attachment.html>

From j.l.h.hartmann at uva.nl  Wed Apr 24 00:51:51 2013
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed, 24 Apr 2013 09:51:51 +0200
Subject: [gdal-dev] Feature request: gauss and other interpolations in
 gdalwarp
In-Reply-To: <CA+TxYvPJZdgi9GEx6-G=EdTHwU-P8vYb2S2A9jCmP5de_HG8aA@mail.gmail.com>
References: <51223405.1000005@uva.nl>
	<CA+TxYvNzJ75sk3AAyVrviWTRVeL-91jwEzdP8KMxW63Up6Sryw@mail.gmail.com>
	<201304092034.40806.even.rouault@mines-paris.org>
	<201304092350.34309.even.rouault@mines-paris.org>
	<CA+TxYvPJZdgi9GEx6-G=EdTHwU-P8vYb2S2A9jCmP5de_HG8aA@mail.gmail.com>
Message-ID: <51778F17.3010209@uva.nl>

Hi folks, just a general question: I opened this thread asking to 
implement a few gdaladdo filters in gdalwarp, and am happy to see that 
happen now. Would it be possible to add a few new filters to 
gdalwarp/gdaladdo? I'm thinking about the gauss filter for gdalwarp, and 
the unsharp mask filter for gdaladdo and gdalwarp. Funding would be no 
problem, but the question remains: does this make sense to you, and is 
there someone willing and able to implement it?

Jan

On 04/09/2013 11:57 PM, Etienne Tourigny wrote:
>
>
>
> On Tue, Apr 9, 2013 at 6:50 PM, Even Rouault 
> <even.rouault at mines-paris.org <mailto:even.rouault at mines-paris.org>> 
> wrote:
>
>     Le mardi 09 avril 2013 20:34:40, Even Rouault a ?crit :
>     > Le mardi 09 avril 2013 19:06:28, Etienne Tourigny a ?crit :
>     > > I have committed new warping methods average and mode to
>     trunk, this will
>     > > be part of gdal-1.10
>     >
>     > Hi Etienne,
>     >
>     > It would be good if you could extend the autotest suite to add
>     tests for
>     > those new warping methods. For that, you can likely take
>     inspiration from
>     > the first tests of autotest/warp/warp.py. "Reference" images
>     based on
>     > utmsmall.tif reference image is a bit big, but you can likely
>     start from a
>     > smaller source image like byte.tif instead that will produce
>     reference
>     > images of reasonable size to be put in svn.
>     >
>     > Regarding nAlgo == 2 (mode with foating point data), the
>     allocations of
>     > pafVals and panSums have the potential to fail if warping is
>     done on a
>     > large image whose floating point values are rarely identical. So
>     I think
>     > that VSIRealloc shoud be used instead with a test on the result
>     to fail
>     > properly. I'm also a bit doubtfull about the practical
>     usefulness of this
>     > case on real data. There might also be a performance issue due
>     to the loop
>     > "//Check array for existing entry" that is at the most inner
>     level of the
>     > algorithm.
>
>     I stand corrected on the above comment about big memory
>     consumption. The size
>     of the array is limited to the number of source pixels needed to
>     compute a
>     target pixel, so unless you do extreme subsampling, that should be OK.
>
> yes
>
>
>     I've just noticed however that pafVals and panSums aren't free'd,
>     so there's a
>     memory leak currently. And the CPLRealloc() are a bit weird as
>     currently coded
>     :
>
>
>                             int      nMaxNumPx = 0;
>                             float*   pafVals = NULL;
>                             int*     panSums = NULL;
>
>                             if (nNumPx > nMaxNumPx)
>                             {
>                                 pafVals = (float*) CPLRealloc(pafVals,
>     nNumPx *
>     sizeof(float));
>                                 panSums = (int*) CPLRealloc(panSums,
>     nNumPx *
>     sizeof(int));
>                                 nMaxNumPx = nNumPx;
>                             }
>
>     The test is always true, so CPLMalloc() would be clearer. But I
>     think there
>     was a will to move nMaxNumPx, pafVals, panSums before the top
>     loops. So that
>     should likely be done.
>
>
> I thought it is weird also, but again copied over from overview code.
>
> I thought about running valgrind, but then forgot. I will take your 
> suggestions into consideration, thanks!
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130424/15a23db7/attachment-0001.html>

From Stefan.Blumentrath at nina.no  Wed Apr 10 01:26:17 2013
From: Stefan.Blumentrath at nina.no (SBL)
Date: Wed, 10 Apr 2013 01:26:17 -0700 (PDT)
Subject: [gdal-dev] Compile GDAL/OGR with SOSI support
In-Reply-To: <5163FBA7.5030704@gatewaygeomatics.com>
References: <1365419782783-5045207.post@n6.nabble.com>
	<C9A67673-5322-4DA9-89F8-4A67732E94A1@skogoglandskap.no>
	<5163FBA7.5030704@gatewaygeomatics.com>
Message-ID: <1365582377248-5045729.post@n6.nabble.com>

HiSome updates on this issue:Thomas Hirsch updated the source of the FYBA
library:https://github.com/kartverket/fyba/commit/a9cd3e740e78f319f73b74348ac71876805d7a5aFollowing
the instructions there, libfyba can be build on Ubuntu 12.04.So, now I have
the fyba library in /usr/local/libAs a next step I edited some of the GDAL
makefiles analog to the builds hints  for windows:In GDALmake.opt.in I added
in the list of libs (line 42):
$(SOSI_LIBS)
Further down I added a section for SOSI-support:
## SOSI#SOSI_INC_DIR = -I/usr/local/include/fybaSOSI_LIBS =
/usr/local/lib/libfyba.a \	/usr/local/lib/libfygm.a \
/usr/local/lib/libfyut.aHAVE_SOSI = YES
In ogr/ogrsf_frmts/GNUmakefile I added 
sosi
to the SUBDIRS anda line 
SUBDIRS-$(HAVE_SOSI)	+= sosi
Finally I added in ogr/ogrsf_frmts/generic/GNUmakefile a line
-DSOSI_ENABLED \
In the list of BASEFORMATS.Now also 'make' runs, but 'make install' throws
an error:
make -C sosimake[3]: Entering directory
`/data/home/stefan/src/gdal_1_8/gdal/ogr/ogrsf_frmts/sosi'make[3]: *** No
targets specified and no makefile found.  Stop.make[3]: Leaving directory
`/data/home/stefan/src/gdal_1_8/gdal/ogr/ogrsf_frmts/sosi'make[2]: ***
[sosi-target] Error 2make[2]: Leaving directory
`/data/home/stefan/src/gdal_1_8/gdal/ogr/ogrsf_frmts'make[1]: *** [sublibs]
Error 2make[1]: Leaving directory
`/data/home/stefan/src/gdal_1_8/gdal/ogr'make: *** [ogr-target] Error 2
So I added a makefile in the sosi subdir containing:
include ../../../GDALmake.optOBJ	=	ogrsosidriver.o ogrsosidatasource.o
ogrsosilayer.o fyba_melding.o \EXTRAFLAGS =	-I.. -I..\..
-I$(SOSI_INC_DIR)GDAL_ROOT	=	..\..\..default:	$(OBJ)clean:	rm -f $(OBJ)
Compiled without libtool (because I got a libtool error on make or make
install) I get the following error messages:
In file included from ogr_sosi.h:34:0,                 from
ogrsosidatasource.cpp:30:/usr/local/include/fyba/fyba.h:88:24: fatal error:
../GM/fygm.h: No such file or directorycompilation terminated.In file
included from ogr_sosi.h:34:0,                 from
ogrsosidriver.cpp:30:/usr/local/include/fyba/fyba.h:88:24: fatal error:
../GM/fygm.h: No such file or directorycompilation terminated.In file
included from ogr_sosi.h:34:0,                 from
ogrsosilayer.cpp:30:/usr/local/include/fyba/fyba.h:88:24: fatal error:
../GM/fygm.h: No such file or directorycompilation
terminated.fyba_melding.cpp:30:21: fatal error: windows.h: No such file or
directorycompilation terminated.make[3]: *** [ogrsosidriver.o] Error
1make[3]: *** Waiting for unfinished jobs....make[3]: *** [ogrsosilayer.o]
Error 1make[3]: *** [ogrsosidatasource.o] Error 1make[3]: ***
[fyba_melding.o] Error 1make[2]: *** [sosi-target] Error 2make[2]: ***
Waiting for unfinished jobs....
Now it seems some paths in ogr_sosi.h and fyba.h are in the disorder...Maybe
something to be fixed in the FYBA lib?CheersStefanP.S.: Sorry for the long
post...



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Compile-GDAL-OGR-with-SOSI-support-tp5045207p5045729.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130410/c3e754ba/attachment.html>

From apsmith2367 at gmail.com  Wed Apr 10 10:38:34 2013
From: apsmith2367 at gmail.com (deuce2367)
Date: Wed, 10 Apr 2013 10:38:34 -0700 (PDT)
Subject: [gdal-dev] OGR/MySQL Layer executes SQL query twice
Message-ID: <1365615514200-5045876.post@n6.nabble.com>

Hi,

I'm using Mapserver 6.0.2 and GDAL 1.7.2 and have created a mapfile with an
OGR/MySQL layer.  The SQL query that retrieves the spatial data is fairly
slow, takes about 8-10 seconds.  I've noticed that whenever I render the
layer (via the mapserv binary or via the shp2img utility) that the query
executes two times.  I thought this was maybe some sort of
introspection/reflection issue where perhaps OGR is trying to characterize
the data somehow so I made sure to create and populate the geometry_columns
table but that doesn't seem to help, it's still running the SQL query twice. 
Incidentally it's also performing 2 describes and 2 'select from
geometry_columns...' as well. 

Is this normal and expected? 

I apologize if this is a repeat, I didn't find any references to this
observation in my searches.  Appreciate any help, 

-Andy Smith 

p.s.  I posted this to the mapserver forum but realized this question
pertained more to GDAL/OGR...  



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/OGR-MySQL-Layer-executes-SQL-query-twice-tp5045876.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Wed Apr 10 12:48:10 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 10 Apr 2013 21:48:10 +0200
Subject: [gdal-dev] Proposed schedule for GDAL 1.10RC1
Message-ID: <201304102148.10318.even.rouault@mines-paris.org>

Hi,

As things seem to have gone well with beta2, I suggest we tag RC1 this week 
end. What do you think ?

Best regards,

Even

From jesse at gaiagps.com  Wed Apr 10 12:55:59 2013
From: jesse at gaiagps.com (Jesse Crocker)
Date: Wed, 10 Apr 2013 12:55:59 -0700
Subject: [gdal-dev] efficiently slicing tiles
Message-ID: <0AD71712-F3CE-4B30-A5B1-61E2C065E74A@gaiagps.com>

Hello,
Im working a project using gdal to slice TMS style png tiles.  The code currently works, but I'm running into some trouble optimizing to run fast enough for use on mobile devices.
My current strategy:
Open the source data(currently testing with BSB):
Get the transform, using GDALGetGeoTransform, and get the inverse transform
get coordinate transformers from dataset coordinates to lat/lon
store all that for when tiles are needed

When a tile is needed:
Determine the pixel coordinates of the source data that is needed, taking into account a clip line for the data that is not at the edge of the source image.
Create a new VRT using VRTCreate(tileSize, tileSize)
Copy data to the VRT: 
    VRTAddSimpleSource(destBand, sourceBand,
                       sourceDataRegion.origin.x, sourceDataRegion.origin.y,
                       sourceDataRegion.size.width, sourceDataRegion.size.height,
                       destDataRegion.origin.x, destDataRegion.origin.y,
                       destDataRegion.size.width,  destDataRegion.size.height,
                       "NEAREST",
                       VRT_NODATA_UNSET
                       );

Create a copy the VRT slice as PNG
  GDALDriverH pngDriver = GDALGetDriverByName("PNG");
  GDALDatasetH pngCopy = GDALCreateCopy(pngDriver, path.UTF8String, datasetToWrite, false, NULL, NULL, NULL);
  GDALClose(pngCopy);


Currently GDALCreateCopy is using 70% of the total CPU time

I've tried reusing the same VRT, but did not see a significant speed increase from that.

Is there a more CPU efficient way to do this?  Should I be creating a vet of the whole dataset warped to the target CRS using GDALAutoCreateWarpedVRT then slicing tiles from that?

Any suggestions for optimizing this would be greatly appreciated.

Also see that attached screenshot at https://s3.amazonaws.com/com.gaiagps.static/Screenshot_4_9_13_4_58_PM.png for a breakdown of CPU usage

Thanks,
Jesse Crocker
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130410/e032be6e/attachment.html>

From warmerdam at pobox.com  Wed Apr 10 17:42:33 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 10 Apr 2013 17:42:33 -0700
Subject: [gdal-dev] Proposed schedule for GDAL 1.10RC1
In-Reply-To: <201304102148.10318.even.rouault@mines-paris.org>
References: <201304102148.10318.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBd5XGHDfwpM54V78aGr9yPhEcGcBbhKo7zDhXoJmVCNwQ@mail.gmail.com>

Sounds good to me.
 On Apr 10, 2013 12:49 PM, "Even Rouault" <even.rouault at mines-paris.org>
wrote:

> Hi,
>
> As things seem to have gone well with beta2, I suggest we tag RC1 this week
> end. What do you think ?
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130410/e1479a00/attachment.html>

From dmorissette at mapgears.com  Wed Apr 10 18:29:34 2013
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 10 Apr 2013 21:29:34 -0400
Subject: [gdal-dev] Proposed schedule for GDAL 1.10RC1
In-Reply-To: <201304102148.10318.even.rouault@mines-paris.org>
References: <201304102148.10318.even.rouault@mines-paris.org>
Message-ID: <516611FE.7060907@mapgears.com>

On 13-04-10 3:48 PM, Even Rouault wrote:
> Hi,
>
> As things seem to have gone well with beta2, I suggest we tag RC1 this week
> end. What do you think ?
>

+1


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From kassies at gmail.com  Thu Apr 11 05:16:59 2013
From: kassies at gmail.com (Rutger)
Date: Thu, 11 Apr 2013 05:16:59 -0700 (PDT)
Subject: [gdal-dev] OGR ExportToJson behavior & shapefile difference
Message-ID: <1365682619507-5046049.post@n6.nabble.com>

Dear list,

I am trying to make a Python script which gives me the difference between
two Shapefiles. With different i mean any change in attributes or geometry,
but ignoring the FID. I have a working solution which i'll describe below.
On the way i discovered some inconsistent behavior in the ExportToJson()
function, perhaps a bug, im not sure. 

My method exists of loading all features in a Python set() and then using
new_set.difference(old_set) to get the difference. 

I dump each feature with ExportToJson, convert it to a dict, pop-out the
FID, and convert it back to json (because you cant add a dict in a set). So:

/tmpdct = json.loads(ft.ExportToJson())
ftid = tmpdct.pop('id')
old_set.add(json.dumps(tmpdct))/

This works well, but the strange thing is that the Json-code for the first
feature (with FID=0) doesnt contain the 'id', all further features do. Is
this behavior to be expected or should i file a ticket? I made a gist with
some sample code replicating the issue:
http://nbviewer.ipython.org/5362782 <http://nbviewer.ipython.org/5362782>  

The json export for the features would looks like this:
/{"geometry": null, "type": "Feature", "properties": {"Name": "Test1"}}
{"geometry": null, "type": "Feature", "properties": {"Name": "Test2"}, "id":
1}
{"geometry": null, "type": "Feature", "properties": {"Name": "Test3"}, "id":
2}
etc.../

The behavior is still there if you add a geometry, i just left the geom out
for convenience.

The resulting 'difference set' can then be used to find and copy changed
features to a new shapefile. Alltough it works well, all the converting to
json and dicts seems far from ideal to me, so i'd be glad to hear if anyone
has a better workflow to get this done.

Regards,
Rutger






--
View this message in context: http://osgeo-org.1560.x6.nabble.com/OGR-ExportToJson-behavior-shapefile-difference-tp5046049.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Thu Apr 11 11:07:36 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 11 Apr 2013 20:07:36 +0200
Subject: [gdal-dev] OGR ExportToJson behavior & shapefile difference
In-Reply-To: <1365682619507-5046049.post@n6.nabble.com>
References: <1365682619507-5046049.post@n6.nabble.com>
Message-ID: <201304112007.37042.even.rouault@mines-paris.org>

Le jeudi 11 avril 2013 14:16:59, Rutger a ?crit :
> Dear list,
> 
> I am trying to make a Python script which gives me the difference between
> two Shapefiles. With different i mean any change in attributes or geometry,
> but ignoring the FID. I have a working solution which i'll describe below.
> On the way i discovered some inconsistent behavior in the ExportToJson()
> function, perhaps a bug, im not sure.
> 
> My method exists of loading all features in a Python set() and then using
> new_set.difference(old_set) to get the difference.
> 
> I dump each feature with ExportToJson, convert it to a dict, pop-out the
> FID, and convert it back to json (because you cant add a dict in a set).
> So:
> 
> /tmpdct = json.loads(ft.ExportToJson())
> ftid = tmpdct.pop('id')
> old_set.add(json.dumps(tmpdct))/
> 
> This works well, but the strange thing is that the Json-code for the first
> feature (with FID=0) doesnt contain the 'id', all further features do. Is
> this behavior to be expected or should i file a ticket? I made a gist with
> some sample code replicating the issue:
> http://nbviewer.ipython.org/5362782 <http://nbviewer.ipython.org/5362782>

Fixed by r25899

From Stefan.Blumentrath at nina.no  Fri Apr 12 02:26:23 2013
From: Stefan.Blumentrath at nina.no (SBL)
Date: Fri, 12 Apr 2013 02:26:23 -0700 (PDT)
Subject: [gdal-dev] Compile GDAL/OGR with SOSI support
In-Reply-To: <1365582377248-5045729.post@n6.nabble.com>
References: <1365419782783-5045207.post@n6.nabble.com>
	<C9A67673-5322-4DA9-89F8-4A67732E94A1@skogoglandskap.no>
	<5163FBA7.5030704@gatewaygeomatics.com>
	<1365582377248-5045729.post@n6.nabble.com>
Message-ID: <1365758783301-5046341.post@n6.nabble.com>

Hi

New update on this issue:

Now I finally managed to build GDAL/OGR with SOSI support on Ubuntu 12.04,
thanks to the Help of Thomas.

First I compiled the new Version he provided for the FYBA-lib:



Then some changes in the GNUmakefiles in the GDAL-source were necessary.
A version with these changes can (at the moment) be found on:
https://github.com/kartverket/gdal

So I did:



Please note that in the GDAL-version above, SOSI-support is allways
activated.

It would be great if the changes could be somehow re-integrated into the
gdal-project, in a modified way which will offer a --with-sosi option on
./configure (optimal also with feedback like "SOSI support:   yes/no").

The SOSI-driver has been successfully tested with recent SOSI-files...

Cheers
Stefan




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Compile-GDAL-OGR-with-SOSI-support-tp5045207p5046341.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jmckenna at gatewaygeomatics.com  Fri Apr 12 05:32:34 2013
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 12 Apr 2013 09:32:34 -0300
Subject: [gdal-dev] Compile GDAL/OGR with SOSI support
In-Reply-To: <1365758783301-5046341.post@n6.nabble.com>
References: <1365419782783-5045207.post@n6.nabble.com>
	<C9A67673-5322-4DA9-89F8-4A67732E94A1@skogoglandskap.no>
	<5163FBA7.5030704@gatewaygeomatics.com>
	<1365582377248-5045729.post@n6.nabble.com>
	<1365758783301-5046341.post@n6.nabble.com>
Message-ID: <5167FEE2.2090207@gatewaygeomatics.com>

Hello Stefan,

Maybe you can document your steps on the GDAL BuildHints wiki
(http://trac.osgeo.org/gdal/wiki/BuildHints) - create a new page in the
"External Library Issues" section.  Emails are long forgotten (hard to
find), but creating a wiki page will make it easy for others to follow
your great steps.

-jeff



On 2013-04-12 6:26 AM, SBL wrote:
> Hi
> 
> New update on this issue:
> 
> Now I finally managed to build GDAL/OGR with SOSI support on Ubuntu 12.04,
> thanks to the Help of Thomas.
> 
> First I compiled the new Version he provided for the FYBA-lib:
> 
> 
> 
> Then some changes in the GNUmakefiles in the GDAL-source were necessary.
> A version with these changes can (at the moment) be found on:
> https://github.com/kartverket/gdal
> 
> So I did:
> 
> 
> 
> Please note that in the GDAL-version above, SOSI-support is allways
> activated.
> 
> It would be great if the changes could be somehow re-integrated into the
> gdal-project, in a modified way which will offer a --with-sosi option on
> ./configure (optimal also with feedback like "SOSI support:   yes/no").
> 
> The SOSI-driver has been successfully tested with recent SOSI-files...
> 
> Cheers
> Stefan
> 
> 

-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/

From aperi2007 at gmail.com  Sat Apr 13 13:10:07 2013
From: aperi2007 at gmail.com (Andrea Peri)
Date: Sat, 13 Apr 2013 22:10:07 +0200
Subject: [gdal-dev] gdal_translate using a wms as input
Message-ID: <CABqTJk8SbFRuDKutBKG659RZ8UiVchgzMCY7bpDnE-YdpeCLqg@mail.gmail.com>

Hi,

I'm try-ing to get a raster from a wms service using gdal_translate

this is the call I'm doing:

gdal_translate -of GTiff -co "TFW=Y
ES" -srcwin 0 0 377 283 "WMS:
http://www502.regione.toscana.it/cartografia/wmsras
ter/com.rt.wms.RTmap/wms?map=wmsofc&language=ita&&SERVICE=WMS&VERSION=1.3.0&REQU
EST=GetMap&BBOX=1671200.0,4680000.0,1672800.0,4681200.0&CRS=EPSG:3003&WIDTH=377&
HEIGHT=283&LAYERS=rt_ofc.10k10&STYLES=&FORMAT=image/jpeg&DPI=96&MAP_RESOLUTION=9
6&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE" output_01J31.tif

But it give me this error:

Input file size is 1073741824, 805306368
0ERROR 2:
jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE,
band 2: Out of memory in InitBlockInfo().
ERROR 2:
jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE, b
and 3: Out of memory in InitBlockInfo().
ERROR 2:
jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE, b
and 4: Out of memory in InitBlockInfo().
ERROR 2:
jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE, b
and 2: Out of memory in InitBlockInfo().
ERROR 2:
jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE, b
and 2: Out of memory in InitBlockInfo().
ERROR 2:
jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE, b
and 2: Out of memory in InitBlockInfo().
ERROR 2:
jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE, b
and 3: Out of memory in InitBlockInfo().
ERROR 2:
jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE, b
and 3: Out of memory in InitBlockInfo().
ERROR 2:
jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE, b
and 3: Out of memory in InitBlockInfo().
ERROR 2:
jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE, b
and 4: Out of memory in InitBlockInfo().
ERROR 2:
jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE, b
and 4: Out of memory in InitBlockInfo().
ERROR 2:
jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE, b
and 4: Out of memory in InitBlockInfo().
ERROR 2:
jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE, b
and 2: Out of memory in InitBlockInfo().
ERROR 2:
jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE, b
and 2: Out of memory in InitBlockInfo().
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0

If I try the sam wms request on a browser it work so
I don't understand what is wrong.

Any help is welcome,
thx

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130413/6279e13d/attachment.html>

From even.rouault at mines-paris.org  Sat Apr 13 13:21:09 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 13 Apr 2013 22:21:09 +0200
Subject: [gdal-dev] gdal_translate using a wms as input
In-Reply-To: <CABqTJk8SbFRuDKutBKG659RZ8UiVchgzMCY7bpDnE-YdpeCLqg@mail.gmail.com>
References: <CABqTJk8SbFRuDKutBKG659RZ8UiVchgzMCY7bpDnE-YdpeCLqg@mail.gmail.com>
Message-ID: <201304132221.09518.even.rouault@mines-paris.org>

Le samedi 13 avril 2013 22:10:07, Andrea Peri a ?crit :
> Hi,
> 
> I'm try-ing to get a raster from a wms service using gdal_translate
> 
> this is the call I'm doing:
> 
> gdal_translate -of GTiff -co "TFW=Y
> ES" -srcwin 0 0 377 283 "WMS:
> http://www502.regione.toscana.it/cartografia/wmsras
> ter/com.rt.wms.RTmap/wms?map=wmsofc&language=ita&&SERVICE=WMS&VERSION=1.3.0
> &REQU
> EST=GetMap&BBOX=1671200.0,4680000.0,1672800.0,4681200.0&CRS=EPSG:3003&WIDT
> H=377&
> HEIGHT=283&LAYERS=rt_ofc.10k10&STYLES=&FORMAT=image/jpeg&DPI=96&MAP_RESOLU
> TION=9 6&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE" output_01J31.tif
> 
> But it give me this error:
> 
> Input file size is 1073741824, 805306368
> 0ERROR 2:
> jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE,
> band 2: Out of memory in InitBlockInfo().

> 
> If I try the sam wms request on a browser it work so
> I don't understand what is wrong.

This is due how GDAL manages rasters. It allocates a block cache array. For 
such huge rasters as WMS layers, the dimensions of the block cache can be huge 
themselves. In your case, the block cache dimensions are (1073741824 / 64 / 
1024) * (805306368 / 64 / 1024) = 16 384 * 12 288 = 201 millions blocks --> 
800 MB on a 32 bit OS.
I've tested the above on a Linux 64bit machine, and it works due to more 
virtual memory available (on Linux, the 800 MB, well 1.6 GB on 64bit, wouldn't 
actually be allocated right away, but only reserved due to virtual memory 
overcommit mechanism ).
The way the block cache is managed is clearly not satisfactory for huge 
rasters such as WMS. There's a proposed RFC ( 
http://trac.osgeo.org/gdal/wiki/rfc26_blockcache ) to address that, but it is 
not yet implemented.


> 
> Any help is welcome,
> thx

From Tyler.Mitchell at actian.com  Sat Apr 13 13:27:57 2013
From: Tyler.Mitchell at actian.com (Tyler Mitchell)
Date: Sat, 13 Apr 2013 13:27:57 -0700
Subject: [gdal-dev] gdal_translate using a wms as input
In-Reply-To: <201304132221.09518.even.rouault@mines-paris.org>
References: <CABqTJk8SbFRuDKutBKG659RZ8UiVchgzMCY7bpDnE-YdpeCLqg@mail.gmail.com>
	<201304132221.09518.even.rouault@mines-paris.org>
Message-ID: <3AD9ACA4-AF6C-4673-B0DD-F7B712FAE898@actian.com>

I'm not at my desk right now but I thought adding -outsize x y would do the trick?


On 2013-04-13, at 1:21 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:

> Le samedi 13 avril 2013 22:10:07, Andrea Peri a ?crit :
>> Hi,
>> 
>> I'm try-ing to get a raster from a wms service using gdal_translate
>> 
>> this is the call I'm doing:
>> 
>> gdal_translate -of GTiff -co "TFW=Y
>> ES" -srcwin 0 0 377 283 "WMS:
>> http://www502.regione.toscana.it/cartografia/wmsras
>> ter/com.rt.wms.RTmap/wms?map=wmsofc&language=ita&&SERVICE=WMS&VERSION=1.3.0
>> &REQU
>> EST=GetMap&BBOX=1671200.0,4680000.0,1672800.0,4681200.0&CRS=EPSG:3003&WIDT
>> H=377&
>> HEIGHT=283&LAYERS=rt_ofc.10k10&STYLES=&FORMAT=image/jpeg&DPI=96&MAP_RESOLU
>> TION=9 6&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE" output_01J31.tif
>> 
>> But it give me this error:
>> 
>> Input file size is 1073741824, 805306368
>> 0ERROR 2:
>> jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE,
>> band 2: Out of memory in InitBlockInfo().
> 
>> 
>> If I try the sam wms request on a browser it work so
>> I don't understand what is wrong.
> 
> This is due how GDAL manages rasters. It allocates a block cache array. For 
> such huge rasters as WMS layers, the dimensions of the block cache can be huge 
> themselves. In your case, the block cache dimensions are (1073741824 / 64 / 
> 1024) * (805306368 / 64 / 1024) = 16 384 * 12 288 = 201 millions blocks --> 
> 800 MB on a 32 bit OS.
> I've tested the above on a Linux 64bit machine, and it works due to more 
> virtual memory available (on Linux, the 800 MB, well 1.6 GB on 64bit, wouldn't 
> actually be allocated right away, but only reserved due to virtual memory 
> overcommit mechanism ).
> The way the block cache is managed is clearly not satisfactory for huge 
> rasters such as WMS. There's a proposed RFC ( 
> http://trac.osgeo.org/gdal/wiki/rfc26_blockcache ) to address that, but it is 
> not yet implemented.
> 
> 
>> 
>> Any help is welcome,
>> thx
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Sat Apr 13 13:49:58 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 13 Apr 2013 22:49:58 +0200
Subject: [gdal-dev] gdal_translate using a wms as input
In-Reply-To: <3AD9ACA4-AF6C-4673-B0DD-F7B712FAE898@actian.com>
References: <CABqTJk8SbFRuDKutBKG659RZ8UiVchgzMCY7bpDnE-YdpeCLqg@mail.gmail.com>
	<201304132221.09518.even.rouault@mines-paris.org>
	<3AD9ACA4-AF6C-4673-B0DD-F7B712FAE898@actian.com>
Message-ID: <201304132249.58379.even.rouault@mines-paris.org>

Le samedi 13 avril 2013 22:27:57, Tyler Mitchell a ?crit :
> I'm not at my desk right now but I thought adding -outsize x y would do the
> trick?

No, because -outsize is used to set the dimensions of the in-memory temporary 
VRT dataset, but this doesn't change how the source raster is managed.

From even.rouault at mines-paris.org  Sat Apr 13 15:18:13 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 14 Apr 2013 00:18:13 +0200
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 1 available for testing
Message-ID: <201304140018.13802.even.rouault@mines-paris.org>

Hi,

After two betas, the first release candidate for GDAL/OGR 1.10.0 is ready. 
Please test and report any problems promptly. Soon I will initiate a motion to 
declare this release candidate the final release and PSC members can vote on 
that after doing some checks themselves.

Source Code:
  http://download.osgeo.org/gdal/gdal-1.10.0RC1.tar.gz
  http://download.osgeo.org/gdal/gdal-1.10.0RC1.tar.gz.md5
  http://download.osgeo.org/gdal/gdal1100RC1.zip
  http://download.osgeo.org/gdal/gdal1100RC1.zip.md5

Autotest Suite:
  http://download.osgeo.org/gdal/gdalautotest-1.10.0.tar.gz

Documentation:
  http://download.osgeo.org/gdal/gdal1100doc.zip

NEWS:
  http://svn.osgeo.org/gdal/tags/1.10.0/gdal/NEWS

There is now a 1.10 branch in SVN, so new development can continue on trunk.  
Any bug fixes needed for a new 1.10.0 release candidate must be applied in both 
1.10 branch and trunk.

Best regards,

Even

From aperi2007 at gmail.com  Sat Apr 13 15:33:55 2013
From: aperi2007 at gmail.com (Andrea Peri)
Date: Sun, 14 Apr 2013 00:33:55 +0200
Subject: [gdal-dev] gdal_translate using a wms as input
In-Reply-To: <201304132249.58379.even.rouault@mines-paris.org>
References: <CABqTJk8SbFRuDKutBKG659RZ8UiVchgzMCY7bpDnE-YdpeCLqg@mail.gmail.com>
	<201304132221.09518.even.rouault@mines-paris.org>
	<3AD9ACA4-AF6C-4673-B0DD-F7B712FAE898@actian.com>
	<201304132249.58379.even.rouault@mines-paris.org>
Message-ID: <CABqTJk_OMDnqqhwB_tK2_2JAQi74gSaEN6=jrSmV1wvak5QnFg@mail.gmail.com>

Hi even,

thx for hints.

I try it on a linux 64bit and effectively the error was disappeared.

But the result is a full black (empty ?) image .
The same wms request applied to a browser give a visible image.

This could be a problem of my pc only ?

Thx
Andrea.



2013/4/13 Even Rouault <even.rouault at mines-paris.org>

> Le samedi 13 avril 2013 22:27:57, Tyler Mitchell a ?crit :
> > I'm not at my desk right now but I thought adding -outsize x y would do
> the
> > trick?
>
> No, because -outsize is used to set the dimensions of the in-memory
> temporary
> VRT dataset, but this doesn't change how the source raster is managed.
>



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130414/b04c79e3/attachment.html>

From even.rouault at mines-paris.org  Sat Apr 13 15:40:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 14 Apr 2013 00:40:16 +0200
Subject: [gdal-dev] gdal_translate using a wms as input
In-Reply-To: <CABqTJk_OMDnqqhwB_tK2_2JAQi74gSaEN6=jrSmV1wvak5QnFg@mail.gmail.com>
References: <CABqTJk8SbFRuDKutBKG659RZ8UiVchgzMCY7bpDnE-YdpeCLqg@mail.gmail.com>
	<201304132249.58379.even.rouault@mines-paris.org>
	<CABqTJk_OMDnqqhwB_tK2_2JAQi74gSaEN6=jrSmV1wvak5QnFg@mail.gmail.com>
Message-ID: <201304140040.16157.even.rouault@mines-paris.org>

Le dimanche 14 avril 2013 00:33:55, Andrea Peri a ?crit :
> Hi even,
> 
> thx for hints.
> 
> I try it on a linux 64bit and effectively the error was disappeared.
> 
> But the result is a full black (empty ?) image .
> The same wms request applied to a browser give a visible image.
> 
> This could be a problem of my pc only ?

No, but perhaps the -srcwin 0 0 377 283 is incorrect. This will extract the 
top 377x283 pixels of the most resoluted level of the WMS layer, so it is 
likely to be a blank area since it is at the border of the WMS layer.

From aperi2007 at gmail.com  Sun Apr 14 04:17:30 2013
From: aperi2007 at gmail.com (Andrea Peri)
Date: Sun, 14 Apr 2013 13:17:30 +0200
Subject: [gdal-dev] gdal_translate using a wms as input
In-Reply-To: <201304140040.16157.even.rouault@mines-paris.org>
References: <CABqTJk8SbFRuDKutBKG659RZ8UiVchgzMCY7bpDnE-YdpeCLqg@mail.gmail.com>
	<201304132249.58379.even.rouault@mines-paris.org>
	<CABqTJk_OMDnqqhwB_tK2_2JAQi74gSaEN6=jrSmV1wvak5QnFg@mail.gmail.com>
	<201304140040.16157.even.rouault@mines-paris.org>
Message-ID: <CABqTJk-+u7gp9ksN6M5zduNHqtdN0MmucixYezgOk5-2EjGLfQ@mail.gmail.com>

Even, thx for response

Perhaps I miss the real mean of the parameter -srcwin.

I guess that setting -srcwin 0 0 377 283 for a wms image of
...WIDTH=377&HEIGHT=283&...

mean "take all the image".

don't ?

Many thx,

Andrea.



2013/4/14 Even Rouault <even.rouault at mines-paris.org>

> Le dimanche 14 avril 2013 00:33:55, Andrea Peri a ?crit :
> > Hi even,
> >
> > thx for hints.
> >
> > I try it on a linux 64bit and effectively the error was disappeared.
> >
> > But the result is a full black (empty ?) image .
> > The same wms request applied to a browser give a visible image.
> >
> > This could be a problem of my pc only ?
>
> No, but perhaps the -srcwin 0 0 377 283 is incorrect. This will extract the
> top 377x283 pixels of the most resoluted level of the WMS layer, so it is
> likely to be a blank area since it is at the border of the WMS layer.
>



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130414/47b9768d/attachment-0001.html>

From ari.jolma at gmail.com  Sun Apr 14 06:58:22 2013
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sun, 14 Apr 2013 16:58:22 +0300
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 1 available for
 testing
In-Reply-To: <201304140018.13802.even.rouault@mines-paris.org>
References: <201304140018.13802.even.rouault@mines-paris.org>
Message-ID: <516AB5FE.6010606@gmail.com>

Even,

Sorry for looking at this so late but I think the Perl version should be 
1.901 because Perl versions are floating point numbers and a newer 
version needs to have a bigger number. This change should not affect 
building and using the Perl bindings.

In gdal_perl.i there is a note about a need to match the three first 
numbers of the module version and the GDAL version but I don't remember 
why it is there, probably it can be removed.

GDAL 1.11 should then have Perl module version number 1.9011.

Otherwise the release candidate seems fine.

Regards,

Ari

On 04/14/2013 01:18 AM, Even Rouault wrote:
> Hi,
>
> After two betas, the first release candidate for GDAL/OGR 1.10.0 is ready.
> Please test and report any problems promptly. Soon I will initiate a motion to
> declare this release candidate the final release and PSC members can vote on
> that after doing some checks themselves.
>
> Source Code:
>    http://download.osgeo.org/gdal/gdal-1.10.0RC1.tar.gz
>    http://download.osgeo.org/gdal/gdal-1.10.0RC1.tar.gz.md5
>    http://download.osgeo.org/gdal/gdal1100RC1.zip
>    http://download.osgeo.org/gdal/gdal1100RC1.zip.md5
>
> Autotest Suite:
>    http://download.osgeo.org/gdal/gdalautotest-1.10.0.tar.gz
>
> Documentation:
>    http://download.osgeo.org/gdal/gdal1100doc.zip
>
> NEWS:
>    http://svn.osgeo.org/gdal/tags/1.10.0/gdal/NEWS
>
> There is now a 1.10 branch in SVN, so new development can continue on trunk.
> Any bug fixes needed for a new 1.10.0 release candidate must be applied in both
> 1.10 branch and trunk.
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From sfkeller at gmail.com  Sun Apr 14 07:18:03 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun, 14 Apr 2013 16:18:03 +0200
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 1 available for
	testing
In-Reply-To: <201304140018.13802.even.rouault@mines-paris.org>
References: <201304140018.13802.even.rouault@mines-paris.org>
Message-ID: <CAFcOn2_ckB+ES7xBCMwp2GwNR0de=su5uQwiEa_HKSeTVP2EoQ@mail.gmail.com>

Hi Even

Cool stuff to come.

Regarding the geocoding on 2013/4/4 I wrote to you and the GDAL DEV list
> Unfortunately Yahoo cut the free geocoding service and offers now
paid-only "BOSS" services...
>
> Yours, Stefan

In the API doc and the code I still see the old and ceased Yahoo
Placefinder which was recently replaced by another now paid service.

Yours, Stefan


2013/4/14 Even Rouault <even.rouault at mines-paris.org>

> Hi,
>
> After two betas, the first release candidate for GDAL/OGR 1.10.0 is ready.
> Please test and report any problems promptly. Soon I will initiate a
> motion to
> declare this release candidate the final release and PSC members can vote
> on
> that after doing some checks themselves.
>
> Source Code:
>   http://download.osgeo.org/gdal/gdal-1.10.0RC1.tar.gz
>   http://download.osgeo.org/gdal/gdal-1.10.0RC1.tar.gz.md5
>   http://download.osgeo.org/gdal/gdal1100RC1.zip
>   http://download.osgeo.org/gdal/gdal1100RC1.zip.md5
>
> Autotest Suite:
>   http://download.osgeo.org/gdal/gdalautotest-1.10.0.tar.gz
>
> Documentation:
>   http://download.osgeo.org/gdal/gdal1100doc.zip
>
> NEWS:
>   http://svn.osgeo.org/gdal/tags/1.10.0/gdal/NEWS
>
> There is now a 1.10 branch in SVN, so new development can continue on
> trunk.
> Any bug fixes needed for a new 1.10.0 release candidate must be applied in
> both
> 1.10 branch and trunk.
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130414/5e6c33b2/attachment.html>

From even.rouault at mines-paris.org  Sun Apr 14 08:49:52 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 14 Apr 2013 17:49:52 +0200
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 1 available for
	testing
In-Reply-To: <516AB5FE.6010606@gmail.com>
References: <201304140018.13802.even.rouault@mines-paris.org>
	<516AB5FE.6010606@gmail.com>
Message-ID: <201304141749.52248.even.rouault@mines-paris.org>

Le dimanche 14 avril 2013 15:58:22, Ari Jolma a ?crit :
> Even,
> 
> Sorry for looking at this so late but I think the Perl version should be
> 1.901 because Perl versions are floating point numbers and a newer
> version needs to have a bigger number. This change should not affect
> building and using the Perl bindings.

Hum, currently there are 2 version numbers :

    our $VERSION = '1.10';
    our $GDAL_VERSION = '1.10.0';

Do you mean only to change the $VERSION one ? I see that for GDAL 1.9.2, it 
was our $VERSION = '1.92'; so if VERSION must be greater, perhaps this :

    our $VERSION = '1.991100';
    our $GDAL_VERSION = '1.10.0';

> 
> In gdal_perl.i there is a note about a need to match the three first
> numbers of the module version and the GDAL version but I don't remember
> why it is there, probably it can be removed.

I'm not sure of the implication of this comment indeed, so I'd be more 
confortable if you could experiment and commit the right fix (and remove/ammend 
the comment if it doesn't apply)

> 
> GDAL 1.11 should then have Perl module version number 1.9011.

Hopefully, the next major version will be 2.0

From even.rouault at mines-paris.org  Sun Apr 14 08:54:21 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 14 Apr 2013 17:54:21 +0200
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 1 available for
	testing
In-Reply-To: <CAFcOn2_ckB+ES7xBCMwp2GwNR0de=su5uQwiEa_HKSeTVP2EoQ@mail.gmail.com>
References: <201304140018.13802.even.rouault@mines-paris.org>
	<CAFcOn2_ckB+ES7xBCMwp2GwNR0de=su5uQwiEa_HKSeTVP2EoQ@mail.gmail.com>
Message-ID: <201304141754.21885.even.rouault@mines-paris.org>

Le dimanche 14 avril 2013 16:18:03, Stefan Keller a ?crit :
> Hi Even
> 
> Cool stuff to come.
> 
> Regarding the geocoding on 2013/4/4 I wrote to you and the GDAL DEV list
> 
> > Unfortunately Yahoo cut the free geocoding service and offers now
> 
> paid-only "BOSS" services...
> 
> > Yours, Stefan
> 
> In the API doc and the code I still see the old and ceased Yahoo
> Placefinder which was recently replaced by another now paid service.

Well, those services are all more or less ephemeral, so the code will likely 
always be a bit behind them. And looking at  
http://developer.yahoo.com/boss/geo/ , I see they still mention the 
PlaceFinder protocol, with a fee indeed, so the code might still be relevant.

From even.rouault at mines-paris.org  Sun Apr 14 09:10:53 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 14 Apr 2013 18:10:53 +0200
Subject: [gdal-dev] gdal_translate using a wms as input
In-Reply-To: <CABqTJk-+u7gp9ksN6M5zduNHqtdN0MmucixYezgOk5-2EjGLfQ@mail.gmail.com>
References: <CABqTJk8SbFRuDKutBKG659RZ8UiVchgzMCY7bpDnE-YdpeCLqg@mail.gmail.com>
	<201304140040.16157.even.rouault@mines-paris.org>
	<CABqTJk-+u7gp9ksN6M5zduNHqtdN0MmucixYezgOk5-2EjGLfQ@mail.gmail.com>
Message-ID: <201304141810.53223.even.rouault@mines-paris.org>

Le dimanche 14 avril 2013 13:17:30, Andrea Peri a ?crit :
> Even, thx for response
> 
> Perhaps I miss the real mean of the parameter -srcwin.
> 
> I guess that setting -srcwin 0 0 377 283 for a wms image of
> ...WIDTH=377&HEIGHT=283&...

Ah, I didn't notice those parameters. Well, they will be ignored by the GDAL 
WMS driver. You can check by looking at gdalinfo :

$ gdalinfo 
"WMS:http://www502.regione.toscana.it/cartografia/wmsraster/com.rt.wms.RTmap/wms?map=wmsofc&language=ita&&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&BBOX=1671200.0,4680000.0,1672800.0,4681200.0&CRS=EPSG:3003&WIDTH=377&HEIGHT=283&LAYERS=rt_ofc.10k10&STYLES=&FORMAT=image/jpeg&DPI=96&MAP_RESOLUTION=96&FORMAT_OPTIONS=dpi:96&TRANSPARENT=TRUE"
Driver: WMS/OGC Web Map Service
Files: none associated
Size is 1073741824, 805306368

Actually, as your string is a full WMS GetMap request, you can directly do 
this :

export GDAL_SKIP=WMS
gdal_translate -of GTiff -co "TFW=YES" "http://...." output_01J31.tif

Note the removal of "WMS:" prefix in front of the URL, and the GDAL_SKIP=WMS, 
since the WMS driver would also try to recognize the string as a description 
string of the WMS service, which you don't want. You just want the JPEG driver 
to recognize the image resulting of the GetMap query.

From ari.jolma at gmail.com  Sun Apr 14 11:13:01 2013
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sun, 14 Apr 2013 21:13:01 +0300
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 1 available for
 testing
In-Reply-To: <201304141749.52248.even.rouault@mines-paris.org>
References: <201304140018.13802.even.rouault@mines-paris.org>
	<516AB5FE.6010606@gmail.com>
	<201304141749.52248.even.rouault@mines-paris.org>
Message-ID: <516AF1AD.7070508@gmail.com>

On 04/14/2013 06:49 PM, Even Rouault wrote:
> Le dimanche 14 avril 2013 15:58:22, Ari Jolma a ?crit :
>> Even,
>>
>> Sorry for looking at this so late but I think the Perl version should be
>> 1.901 because Perl versions are floating point numbers and a newer
>> version needs to have a bigger number. This change should not affect
>> building and using the Perl bindings.
> Hum, currently there are 2 version numbers :
>
>      our $VERSION = '1.10';
>      our $GDAL_VERSION = '1.10.0';
>
> Do you mean only to change the $VERSION one ? I see that for GDAL 1.9.2, it
> was our $VERSION = '1.92'; so if VERSION must be greater, perhaps this :
>
>      our $VERSION = '1.991100';
>      our $GDAL_VERSION = '1.10.0';

You're right. There may eventually be GDAL 1.9.9 (hopefully not 
1.9.10...), thus 1.991 would be ok.

The GDAL_VERSION is to record the GDAL from which the Perl module is 
from. It is to support the - maybe unlikely - scenario that the Perl 
module is built against a GDAL already installed in the system.

>
>> In gdal_perl.i there is a note about a need to match the three first
>> numbers of the module version and the GDAL version but I don't remember
>> why it is there, probably it can be removed.
> I'm not sure of the implication of this comment indeed, so I'd be more
> confortable if you could experiment and commit the right fix (and remove/ammend
> the comment if it doesn't apply)

I'll do that.

>
>> GDAL 1.11 should then have Perl module version number 1.9011.
> Hopefully, the next major version will be 2.0

Then the version number of Perl module should be 2.000, 2.001, 2.002 etc.

Ari


From even.rouault at mines-paris.org  Sun Apr 14 12:25:18 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 14 Apr 2013 21:25:18 +0200
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 2 available for testing
Message-ID: <201304142125.18571.even.rouault@mines-paris.org>

Hi,

After the issue found by Ari about Perl module versionning in RC1, I've 
prepared a second release candidate for GDAL/OGR 1.10.0.
Please test and report any problems promptly. Soon I will initiate a motion to 
declare this release candidate the final release and PSC members can vote on 
that after doing some checks themselves.

Source Code:
  http://download.osgeo.org/gdal/gdal-1.10.0RC2.tar.gz
  http://download.osgeo.org/gdal/gdal-1.10.0RC2.tar.gz.md5
  http://download.osgeo.org/gdal/gdal1100RC2.zip
  http://download.osgeo.org/gdal/gdal1100RC2.zip.md5

Autotest Suite:
  http://download.osgeo.org/gdal/gdalautotest-1.10.0.tar.gz

Documentation:
  http://download.osgeo.org/gdal/gdal1100doc.zip

NEWS:
  http://svn.osgeo.org/gdal/tags/1.10.0/gdal/NEWS

Best regards,

Even

From ustroetz at gmail.com  Sun Apr 14 13:12:29 2013
From: ustroetz at gmail.com (=?iso-8859-1?Q?Ulrich_Str=F6tz?=)
Date: Sun, 14 Apr 2013 13:12:29 -0700
Subject: [gdal-dev] OGR OSM-driver unable to open datasource
Message-ID: <3093A025-4C79-4B76-A5DC-C7B0F683935D@gmail.com>

I want to read an OSM file with OGR. I use Version GDAL 1.9.1, released 2012/05/15.

To read a SQLITE file works fine:

$ ogrinfo test.sqlite
INFO: Open of `test.sqlite'
      using driver `SQLite' successful.
1: aaa (Point)
When I try to read a OSM File it fails to open the datasource:

$ ogrinfo test.osm
FAILURE:
Unable to open datasource `test.osm' with the following drivers.
  -> ESRI Shapefile
  -> MapInfo File
  ...
The OSM file itself is not broken (I opened it in QGIS).

What am I doing wrong?

Thanks,

Uli


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130414/b5d32b8e/attachment.html>

From even.rouault at mines-paris.org  Sun Apr 14 13:16:18 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 14 Apr 2013 22:16:18 +0200
Subject: [gdal-dev] OGR OSM-driver unable to open datasource
In-Reply-To: <3093A025-4C79-4B76-A5DC-C7B0F683935D@gmail.com>
References: <3093A025-4C79-4B76-A5DC-C7B0F683935D@gmail.com>
Message-ID: <201304142216.18358.even.rouault@mines-paris.org>

Le dimanche 14 avril 2013 22:12:29, Ulrich Str?tz a ?crit :
> I want to read an OSM file with OGR. I use Version GDAL 1.9.1, released
> 2012/05/15.
> 
> To read a SQLITE file works fine:
> 
> $ ogrinfo test.sqlite
> INFO: Open of `test.sqlite'
>       using driver `SQLite' successful.
> 1: aaa (Point)
> When I try to read a OSM File it fails to open the datasource:
> 
> $ ogrinfo test.osm
> FAILURE:
> Unable to open datasource `test.osm' with the following drivers.
>   -> ESRI Shapefile
>   -> MapInfo File
>   ...
> The OSM file itself is not broken (I opened it in QGIS).
> 
> What am I doing wrong?

You are just not using the appropriate GDAL version ;-) The OSM driver is new 
to GDAL/OGR 1.10.0, which should be released within a few days. You can try 
the RC2 by the way : http://download.osgeo.org/gdal/gdal-1.10.0RC2.tar.gz

> 
> Thanks,
> 
> Uli

From Tyler.Mitchell at actian.com  Sun Apr 14 14:31:19 2013
From: Tyler.Mitchell at actian.com (Tyler Mitchell)
Date: Sun, 14 Apr 2013 14:31:19 -0700
Subject: [gdal-dev] OGR OSM-driver unable to open datasource
In-Reply-To: <201304142216.18358.even.rouault@mines-paris.org>
References: <3093A025-4C79-4B76-A5DC-C7B0F683935D@gmail.com>
	<201304142216.18358.even.rouault@mines-paris.org>
Message-ID: <27BC760E-E9F8-4C48-A4D6-5463F7DF9169@actian.com>

ogrinfo --formats 
Should tell all too :)

On 2013-04-14, at 1:17 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:

> Le dimanche 14 avril 2013 22:12:29, Ulrich Str?tz a ?crit :
>> I want to read an OSM file with OGR. I use Version GDAL 1.9.1, released
>> 2012/05/15.
>> 
>> To read a SQLITE file works fine:
>> 
>> $ ogrinfo test.sqlite
>> INFO: Open of `test.sqlite'
>>      using driver `SQLite' successful.
>> 1: aaa (Point)
>> When I try to read a OSM File it fails to open the datasource:
>> 
>> $ ogrinfo test.osm
>> FAILURE:
>> Unable to open datasource `test.osm' with the following drivers.
>>  -> ESRI Shapefile
>>  -> MapInfo File
>>  ...
>> The OSM file itself is not broken (I opened it in QGIS).
>> 
>> What am I doing wrong?
> 
> You are just not using the appropriate GDAL version ;-) The OSM driver is new 
> to GDAL/OGR 1.10.0, which should be released within a few days. You can try 
> the RC2 by the way : http://download.osgeo.org/gdal/gdal-1.10.0RC2.tar.gz
> 
>> 
>> Thanks,
>> 
>> Uli
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jmckenna at gatewaygeomatics.com  Mon Apr 15 11:58:19 2013
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon, 15 Apr 2013 15:58:19 -0300
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 2 available for
 testing
In-Reply-To: <201304142125.18571.even.rouault@mines-paris.org>
References: <201304142125.18571.even.rouault@mines-paris.org>
Message-ID: <516C4DCB.4050702@gatewaygeomatics.com>

Hi Even, RC2 passes my Windows tests.

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


On 2013-04-14 4:25 PM, Even Rouault wrote:
> Hi,
> 
> After the issue found by Ari about Perl module versionning in RC1, I've 
> prepared a second release candidate for GDAL/OGR 1.10.0.
> Please test and report any problems promptly. Soon I will initiate a motion to 
> declare this release candidate the final release and PSC members can vote on 
> that after doing some checks themselves.
> 
> Source Code:
>   http://download.osgeo.org/gdal/gdal-1.10.0RC2.tar.gz
>   http://download.osgeo.org/gdal/gdal-1.10.0RC2.tar.gz.md5
>   http://download.osgeo.org/gdal/gdal1100RC2.zip
>   http://download.osgeo.org/gdal/gdal1100RC2.zip.md5
> 
> Autotest Suite:
>   http://download.osgeo.org/gdal/gdalautotest-1.10.0.tar.gz
> 
> Documentation:
>   http://download.osgeo.org/gdal/gdal1100doc.zip
> 
> NEWS:
>   http://svn.osgeo.org/gdal/tags/1.10.0/gdal/NEWS
> 
> Best regards,
> 
> Even



From eadam at co.lincoln.or.us  Mon Apr 15 14:47:33 2013
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Mon, 15 Apr 2013 14:47:33 -0700
Subject: [gdal-dev] TIFFMergeFieldInfo error when adding overviews to large
	tiff
Message-ID: <CACqBkM9PpAjgXgS4E9_iS0rNo0TetWUd0hONTUZDYBbGq86NKg@mail.gmail.com>

Hi all,

I'm adding internal overviews to a ~20G tiff file and I get this error
(1000+ times):
gdaladdo topo_mosaic_4326.tif 2 4 8 16 32 64 128 256 512 1024 --config
COMPRESS_OVERVIEW PACKBITS
ERROR 1: topo_mosaic_4326.tif:Failed to allocate memory for for fields
array (1410046 elements of 16 bytes each)
gdaladdo still completes and the file seems to work fine.  What does
that error mean?  Does it impact the output file or overviews?  Is
there a different way I should approach this?  Are there any general
rules for which compression to select?  I've found JPEG-In-TIFF, using
PHOTOMETRIC=YCBCR to work very well for RGB, but otherwise I'm unsure
of the best compression for the type of raster (in this case single
band, byte, colormap).

I just checked my version and I am running 1.9.0 on a older modest XP
laptop (I figured that I would have been running something more
recent).  I can try again with a nightly or compile on Ubuntu or use a
computer with more resources (the process takes a long time to run, so
reporting back on those will take some time).

Here is information (I've omitted some previous mosaicing and
reprojecting) of how I got to this point and some gdalinfo reports:
gdal_translate mosaic_4326.vrt topo_mosaic_4326.tif -co
COMPRESS=PACKBITS -co TILED=YES -co BIGTIFF=YES --config GDAL_CACHEMAX
400

gdaladdo topo_mosaic_4326.tif 2 4 8 16 32 64 128 256 512 1024 --config
COMPRESS_OVERVIEW PACKBITS
ERROR 1: topo_mosaic_4326.tif:Failed to allocate memory for for fields
array (1410046 elements of 16 bytes each)

original input files:
>gdalinfo ID_Cuddy_Mountain_20110715_TM_geo.tif
Driver: GTiff/GeoTIFF
Files: ID_Cuddy_Mountain_20110715_TM_geo.tif
Size is 4880, 6845
Coordinate System is:
PROJCS["NAD83 / UTM zone 11N",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-117],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26911"]]
Origin = (509873.309826691810000,4969095.033418485900000)
Pixel Size = (2.032010116947724,-2.032010116947745)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  509873.310, 4969095.033) (116d52'30.00"W, 44d52'30.74"N)
Lower Left  (  509873.310, 4955185.924) (116d52'30.97"W, 44d44'59.97"N)
Upper Right (  519789.519, 4969095.033) (116d44'58.04"W, 44d52'30.00"N)
Lower Right (  519789.519, 4955185.924) (116d44'59.99"W, 44d44'59.23"N)
Center      (  514831.415, 4962140.479) (116d48'44.75"W, 44d48'45.05"N)
Band 1 Block=4880x1 Type=Byte, ColorInterp=Palette
  NoData Value=195
  Color Table (RGB with 256 entries)
    0: 0,0,0,255
    1: 128,0,0,255
    2: 0,128,0,255
    3: 128,128,0,255
...
  254: 0,255,255,255
  255: 255,255,255,255

final output file with overviews:
>gdalinfo -checksum topo_mosaic_4326.tif
Driver: GTiff/GeoTIFF
Files: topo_mosaic_4326.tif
Size is 398449, 210532
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-124.732439702451200,46.380533997595272)
Pixel Size = (0.000020993062915,-0.000020993062915)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=PACKBITS
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-124.7324397,  46.3805340) (124d43'56.78"W, 46d22'49.92"N)
Lower Left  (-124.7324397,  41.9608225) (124d43'56.78"W, 41d57'38.96"N)
Upper Right (-116.3677748,  46.3805340) (116d22' 3.99"W, 46d22'49.92"N)
Lower Right (-116.3677748,  41.9608225) (116d22' 3.99"W, 41d57'38.96"N)
Center      (-120.5501072,  44.1706782) (120d33' 0.39"W, 44d10'14.44"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Palette
  Checksum=45365
  NoData Value=195
  Overviews: 199225x105266, 99613x52633, 49807x26317, 24904x13159, 12452x6580, 6
226x3290, 3113x1645, 1557x823, 779x412, 390x206
  Overviews checksum: 27605, 16665, 58099, 63342, 4876, 64021, 44152, 14528, 574
63, 15006
  Color Table (RGB with 256 entries)
    0: 0,0,0,255
    1: 128,0,0,255
    2: 0,128,0,255
    3: 128,128,0,255
...
  253: 255,0,255,255
  254: 0,255,255,255
  255: 255,255,255,255

Best Regards, Eli

From dshean at gmail.com  Mon Apr 15 21:52:08 2013
From: dshean at gmail.com (David Shean)
Date: Mon, 15 Apr 2013 21:52:08 -0700
Subject: [gdal-dev] Feature request: gauss and other interpolations in
	gdalwarp
In-Reply-To: <51778F17.3010209@uva.nl>
References: <51223405.1000005@uva.nl>
	<CA+TxYvNzJ75sk3AAyVrviWTRVeL-91jwEzdP8KMxW63Up6Sryw@mail.gmail.com>
	<201304092034.40806.even.rouault@mines-paris.org>
	<201304092350.34309.even.rouault@mines-paris.org>
	<CA+TxYvPJZdgi9GEx6-G=EdTHwU-P8vYb2S2A9jCmP5de_HG8aA@mail.gmail.com>
	<51778F17.3010209@uva.nl>
Message-ID: <577E980D-2F3A-42D3-8FDD-E545876A7298@gmail.com>

Hi Etienne and Jan,
For what it's worth, I would also use a gdalwarp gauss interpolation method.  I've found that the gdaladdo gauss interpolation provides the best anti-aliased downsampling, especially for rasters that contain many small nodata holes surrounded by valid data.  Cubic and lanczos both propagate the nodata holes.

However, in order to obtain optimal results with gdaladdo gauss, I have to iteratively build overviews using the 3x3 gaussian kernel (gdaladdo 2 4 8).  As far as I understand, this is providing gaussian pyramid downsampling with simple edge-inward inpainting of the nodata holes.  A single downsampling step with the larger gaussian kernels (gdaladdo 8) doesn't provide the same output quality.  So I suppose I would be most interested in an implementation of a more generalized iterative gaussian resampling for gdalwarp, allowing for arbitrary output resolution (not limited to integer steps).

I understand that this is likely a special use case, and my BuildOverviews/FillNodata hack for downsampling and filling remaining holes works for now.  Regardless, I appreciate the new interpolation options.  Thanks.
-David

On Apr 24, 2013, at 12:51 AM, Jan Hartmann <j.l.h.hartmann at uva.nl> wrote:

> Hi folks, just a general question: I opened this thread asking to implement a few gdaladdo filters in gdalwarp, and am happy to see that happen now. Would it be possible to add a few new filters to gdalwarp/gdaladdo? I'm thinking about the gauss filter for gdalwarp, and the unsharp mask filter for gdaladdo and gdalwarp. Funding would be no problem, but the question remains: does this make sense to you, and is there someone willing and able to implement it?
> 
> Jan
> 
> On 04/09/2013 11:57 PM, Etienne Tourigny wrote:
>> 
>> 
>> 
>> On Tue, Apr 9, 2013 at 6:50 PM, Even Rouault <even.rouault at mines-paris.org> wrote:
>> Le mardi 09 avril 2013 20:34:40, Even Rouault a ?crit :
>> > Le mardi 09 avril 2013 19:06:28, Etienne Tourigny a ?crit :
>> > > I have committed new warping methods average and mode to trunk, this will
>> > > be part of gdal-1.10
>> >
>> > Hi Etienne,
>> >
>> > It would be good if you could extend the autotest suite to add tests for
>> > those new warping methods. For that, you can likely take inspiration from
>> > the first tests of autotest/warp/warp.py. "Reference" images based on
>> > utmsmall.tif reference image is a bit big, but you can likely start from a
>> > smaller source image like byte.tif instead that will produce reference
>> > images of reasonable size to be put in svn.
>> >
>> > Regarding nAlgo == 2 (mode with foating point data), the allocations of
>> > pafVals and panSums have the potential to fail if warping is done on a
>> > large image whose floating point values are rarely identical. So I think
>> > that VSIRealloc shoud be used instead with a test on the result to fail
>> > properly. I'm also a bit doubtfull about the practical usefulness of this
>> > case on real data. There might also be a performance issue due to the loop
>> > "//Check array for existing entry" that is at the most inner level of the
>> > algorithm.
>> 
>> I stand corrected on the above comment about big memory consumption. The size
>> of the array is limited to the number of source pixels needed to compute a
>> target pixel, so unless you do extreme subsampling, that should be OK.
>> yes 
>> 
>> I've just noticed however that pafVals and panSums aren't free'd, so there's a
>> memory leak currently. And the CPLRealloc() are a bit weird as currently coded
>> :
>> 
>> 
>>                         int      nMaxNumPx = 0;
>>                         float*   pafVals = NULL;
>>                         int*     panSums = NULL;
>> 
>>                         if (nNumPx > nMaxNumPx)
>>                         {
>>                             pafVals = (float*) CPLRealloc(pafVals, nNumPx *
>> sizeof(float));
>>                             panSums = (int*) CPLRealloc(panSums, nNumPx *
>> sizeof(int));
>>                             nMaxNumPx = nNumPx;
>>                         }
>> 
>> The test is always true, so CPLMalloc() would be clearer. But I think there
>> was a will to move nMaxNumPx, pafVals, panSums before the top loops. So that
>> should likely be done.
>> 
>> I thought it is weird also, but again copied over from overview code. 
>> 
>> I thought about running valgrind, but then forgot. I will take your suggestions into consideration, thanks!
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130415/e934dc29/attachment.html>

From even.rouault at mines-paris.org  Tue Apr 16 10:18:29 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 16 Apr 2013 19:18:29 +0200
Subject: [gdal-dev] TIFFMergeFieldInfo error when adding overviews to
	large tiff
In-Reply-To: <CACqBkM9PpAjgXgS4E9_iS0rNo0TetWUd0hONTUZDYBbGq86NKg@mail.gmail.com>
References: <CACqBkM9PpAjgXgS4E9_iS0rNo0TetWUd0hONTUZDYBbGq86NKg@mail.gmail.com>
Message-ID: <201304161918.30048.even.rouault@mines-paris.org>

Le lundi 15 avril 2013 23:47:33, Eli Adam a ?crit :
> Hi all,
> 
> I'm adding internal overviews to a ~20G tiff file and I get this error
> (1000+ times):
> gdaladdo topo_mosaic_4326.tif 2 4 8 16 32 64 128 256 512 1024 --config
> COMPRESS_OVERVIEW PACKBITS
> ERROR 1: topo_mosaic_4326.tif:Failed to allocate memory for for fields
> array (1410046 elements of 16 bytes each)
> gdaladdo still completes and the file seems to work fine.  What does
> that error mean?  Does it impact the output file or overviews?  Is
> there a different way I should approach this?  Are there any general
> rules for which compression to select?  I've found JPEG-In-TIFF, using
> PHOTOMETRIC=YCBCR to work very well for RGB, but otherwise I'm unsure
> of the best compression for the type of raster (in this case single
> band, byte, colormap).

That's interesting. I've tried to reproduce your setup with an artificial blank 
input file of the same dimensions and here's what I get (after several hours):

$ gdaladdo topo_mosaic_4326.tif 2 4 8 16 32 64 128 256 512 1024 --config 
COMPRESS_OVERVIEW PACKBITS
0...10...20...30...40...50...60...70...80...90...100 - done.
Current VSI memory usage        : 0 bytes
Maximum VSI memory usage        : 2361761086 bytes
Number of calls to VSIMalloc()  : 43981823
Number of calls to VSICalloc()  : 1259
Number of calls to VSIRealloc() : 17378556
Number of calls to VSIFree()    : 43983082
VSIMalloc + VSICalloc - VSIFree : 0

The interesting part is the memory usage report. It is based on an 
instrumented version of GDAL that instruments each memory allocation routine. 
This is with the internal version of libtiff that redirects the TIFF memory 
allocation routines to the GDAL ones. So apparently there wouldn't be a memory 
leak (some valgrind'ing should be done on a smaller file to confirm), but a 
maximum memory usage of 2.3 GB ! No wonder why it fails on a Windows 32 bit 
(my test was done a Linux 64bit). I'm not sure why such a high memory use 
occurs. Some investigation should be done.

As far as the error message you've seen, I wouldn't swear that there's not 
some pixel corruption in the result you get...

As a potential track for a workaround (completely untested), perhaps you could 
try to do :

$ gdaladdo topo_mosaic_4326.tif 2 --config COMPRESS_OVERVIEW PACKBITS
$ gdaladdo topo_mosaic_4326.tif 4 --config COMPRESS_OVERVIEW PACKBITS
$ gdaladdo topo_mosaic_4326.tif 8 --config COMPRESS_OVERVIEW PACKBITS
$ gdaladdo topo_mosaic_4326.tif 16 --config COMPRESS_OVERVIEW PACKBITS
etc..




From even.rouault at mines-paris.org  Tue Apr 16 10:39:36 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 16 Apr 2013 19:39:36 +0200
Subject: [gdal-dev] Motion: Promote 1.10.0RC2 for release
Message-ID: <201304161939.36708.even.rouault@mines-paris.org>

Motion: GDAL/OGR 1.10.0RC2 is promoted to be the official 1.10.0 final release.

---

No issue has been specifically reported on RC2 so far, so I invite PSC members 
to vote on this motion after doing your own testing and validation. Input from 
everyone else who can test it is also very welcome.

I'll start the voting with my :

+1 Even

From warmerdam at pobox.com  Tue Apr 16 11:42:49 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 16 Apr 2013 11:42:49 -0700
Subject: [gdal-dev] Motion: Promote 1.10.0RC2 for release
In-Reply-To: <201304161939.36708.even.rouault@mines-paris.org>
References: <201304161939.36708.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBcP169HbJ+sSzq=GQFWeCup8+E-unuW8XcYR2EWZ15RZA@mail.gmail.com>

On Tue, Apr 16, 2013 at 10:39 AM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Motion: GDAL/OGR 1.10.0RC2 is promoted to be the official 1.10.0 final
> release.
>
> ---
>
> No issue has been specifically reported on RC2 so far, so I invite PSC
> members
> to vote on this motion after doing your own testing and validation. Input
> from
> everyone else who can test it is also very welcome.


+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130416/e0860fc7/attachment-0001.html>

From eadam at co.lincoln.or.us  Tue Apr 16 13:07:52 2013
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Tue, 16 Apr 2013 13:07:52 -0700
Subject: [gdal-dev] TIFFMergeFieldInfo error when adding overviews to
 large tiff
In-Reply-To: <201304161918.30048.even.rouault@mines-paris.org>
References: <CACqBkM9PpAjgXgS4E9_iS0rNo0TetWUd0hONTUZDYBbGq86NKg@mail.gmail.com>
	<201304161918.30048.even.rouault@mines-paris.org>
Message-ID: <CACqBkM8AT3D0ks3wFxjTx-=d2B0JXAH0AJmPKvcNnKqbAP4Jxg@mail.gmail.com>

Even,

Thanks for checking into this and the ideas.

Eli

On Tue, Apr 16, 2013 at 10:18 AM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le lundi 15 avril 2013 23:47:33, Eli Adam a ?crit :
>> Hi all,
>>
>> I'm adding internal overviews to a ~20G tiff file and I get this error
>> (1000+ times):
>> gdaladdo topo_mosaic_4326.tif 2 4 8 16 32 64 128 256 512 1024 --config
>> COMPRESS_OVERVIEW PACKBITS
>> ERROR 1: topo_mosaic_4326.tif:Failed to allocate memory for for fields
>> array (1410046 elements of 16 bytes each)
>> gdaladdo still completes and the file seems to work fine.  What does
>> that error mean?  Does it impact the output file or overviews?  Is
>> there a different way I should approach this?  Are there any general
>> rules for which compression to select?  I've found JPEG-In-TIFF, using
>> PHOTOMETRIC=YCBCR to work very well for RGB, but otherwise I'm unsure
>> of the best compression for the type of raster (in this case single
>> band, byte, colormap).
>
> That's interesting. I've tried to reproduce your setup with an artificial blank
> input file of the same dimensions and here's what I get (after several hours):
>
> $ gdaladdo topo_mosaic_4326.tif 2 4 8 16 32 64 128 256 512 1024 --config
> COMPRESS_OVERVIEW PACKBITS
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> Current VSI memory usage        : 0 bytes
> Maximum VSI memory usage        : 2361761086 bytes
> Number of calls to VSIMalloc()  : 43981823
> Number of calls to VSICalloc()  : 1259
> Number of calls to VSIRealloc() : 17378556
> Number of calls to VSIFree()    : 43983082
> VSIMalloc + VSICalloc - VSIFree : 0
>
> The interesting part is the memory usage report. It is based on an
> instrumented version of GDAL that instruments each memory allocation routine.
> This is with the internal version of libtiff that redirects the TIFF memory
> allocation routines to the GDAL ones. So apparently there wouldn't be a memory
> leak (some valgrind'ing should be done on a smaller file to confirm), but a
> maximum memory usage of 2.3 GB ! No wonder why it fails on a Windows 32 bit
> (my test was done a Linux 64bit). I'm not sure why such a high memory use
> occurs. Some investigation should be done.
>
> As far as the error message you've seen, I wouldn't swear that there's not
> some pixel corruption in the result you get...
>
> As a potential track for a workaround (completely untested), perhaps you could
> try to do :
>
> $ gdaladdo topo_mosaic_4326.tif 2 --config COMPRESS_OVERVIEW PACKBITS
> $ gdaladdo topo_mosaic_4326.tif 4 --config COMPRESS_OVERVIEW PACKBITS
> $ gdaladdo topo_mosaic_4326.tif 8 --config COMPRESS_OVERVIEW PACKBITS
> $ gdaladdo topo_mosaic_4326.tif 16 --config COMPRESS_OVERVIEW PACKBITS
> etc..
>
>
>

From bontepaarden at gmail.com  Tue Apr 16 14:09:51 2013
From: bontepaarden at gmail.com (Paul Meems)
Date: Tue, 16 Apr 2013 23:09:51 +0200
Subject: [gdal-dev] Convert and make ecw transparent - Part 2
Message-ID: <CAHNf2YQhRA+5ncSh_Z8sh7A3SW89wvCG9zd=3j9EtpD6Vi+HQA@mail.gmail.com>

Hi All,

I'm still working on my process to make my ecw ready for GeoServer and
enable transparency.
I've written about it before and got some valuable feedback that allowed me
to convert my first ecw.
I now have a second ecw that doesn't work properly with my first steps. For
this ecw the resulting artifacts are too big.

I have an aerial photo in ECW format which is composed from several smaller
photos (mosaic) giving me large white areas in the corners. These white
areas need to be one color so Geoserver can make it transparent and I can
put a second layer beneath it. I've tried this with my first ecw file and
it is working great in Geoserver.

These are the steps that I take to end up with a tiff file with correct
nodata values and compression:
*Step 1*: Convert the ecw to tiff and make all white pixels true white:
nearblack -of GTiff -white -o white.tif my.ecw
*Step 2*: Mark white pixels as transparent
gdalwarp --config GDAL_CACHEMAX 500 -wm 500 -multi -of GTiff -srcnodata
"255 255 255" -dstnodata "255 255 255" -co tiled=yes -co "BLOCKXSIZE=512"
-co "BLOCKYSIZE=512" -s_srs EPSG:28992 -overwrite white.tif nodata.tif
*Step 3*: Compress
gdal_translate -of GTiff -a_srs EPSG:28992 -co "TILED=YES" -co
"BIGTIFF=YES" -co "PROFILE=GEOTIFF" -co "BLOCKXSIZE=512" -co
"BLOCKYSIZE=512" -co "COMPRESS=JPEG" -co "JPEG_QUALITY=80" -co
"PHOTOMETRIC=YCBCR" --config GDAL_TIFF_INTERNAL_MASK YES nodata.tif
compressed.tif
*Step 4*: Add overviews
gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW BAND compressed.tif
2 4 8 16 32 64 128 256

I only do step 2 because nearblack doesn't set the nodata value. Why is
that? Doesn't it make sense to do so or is it technically not possible?

My input ECW file is 3.5GB, white.tif (created by nearblack) is 75GB. After
compression and adding overviews I have a 3.8GB tiff file. This tiff file
has white artifacts at the edge of the photo data and nodata.
I don't understand why. My input file (nodata.tif) for the compression has
proper nodata values set, why doesn't the compression step retain them? I
can imagine due to the compression algorithm some nodata values are changed
but isn't it possible to reset them again before saving?

Because of the artifacts I created a masked tif after step 2 from
nodata.tif. In this masked tiff all data that is not nodata is set to
black. Next I run gdal_polygonize.py on this masked data and after 7 days!
I end up with a 110mb shapefile. I have such a large shapefile because step
2 also set some white pixels in the photo area to nodata and those pixels
are also converted to shapes.
After some vector processing I finally have my outline of my photo area as
a shapefile.
Now I clip the result of step 4 with this shapefile:
*Step 5*: Clip raster with shapefile:
gdalwarp -cutline clip.shp -cl clip -crop_to_cutline --config GDAL_CACHEMAX
500 -wm 500 -multi -of GTiff -srcnodata "255 255 255" -dstnodata "255 255
255" -co tiled=yes -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512" -s_srs
EPSG:28992 compressed.tif crop.tif

This cropped file looks great, the artifacts are gone but the overviews are
lost.
So I call gdal_addo again:
gdaladdo -r average -ro --config COMPRESS_OVERVIEW JPEG --config
PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL crop.tif 2 4
8 16 32 64 128 256
Now the artifacts are back again ;(
Now I tried again without compression:
gdaladdo -r average -ro crop.tif 2 4 8 16 32 64 128 256
This results in a huge .ovr file, it is still processing. But at 25% the
size is already 7.2GB

Meanwhile I tried something else:
Because I already have my cutline I've tried combining all steps in to one
command and use the output of step 2 as my input:
gdalwarp -cutline clip.shp -cl clip -crop_to_cutline --config GDAL_CACHEMAX
1500 -wm 500 -multi -wo "USE_OPENCL=TRUE" -of GTiff -srcnodata "255 255
255" -dstnodata "255 255 255" -co tiled=yes -co "BLOCKXSIZE=512" -co
"BLOCKYSIZE=512" -co "BIGTIFF=YES" -co "PROFILE=GEOTIFF" -co
"COMPRESS=JPEG" -co "JPEG_QUALITY=80" -co "PHOTOMETRIC=YCBCR" --config
GDAL_TIFF_INTERNAL_MASK YES -s_srs EPSG:28992 nodata.tif cropped.tif
This time I've used USE_OPENCL=TRUE but it doesn't seems to work. Most
likely my version of gdal doesn't have openCL enabled.
I also increased the GDAL_CACHEMAX. I'm not sure what a good value would
be. I'm running gdal v1.10-64Bit on WinVista64 with 8GB RAM.
While running above command I still have 3GB to spare.
The above step also results in a good tiff file of just 3.1GB, but without
overviews so it loads very slowly.

I see a few enhancements. The first one is to use faster hardware. I've
ordered a fast SSD, it will arrive in a few days.
Hopefully this will speed up my steps.
But the best optimization would be if step 1 and 2 could be combined and if
I don't need to create a masked file to get a cutline.
The combined step only takes 6 hours so that is acceptable, but all goes
wrong when I add overviews which introduces the artifacts again.
All steps mentioned here took me almost 4 weeks of computer processing
time. And still the result is not what I need ;(

So if anybody can help me with adding overviews to my cropped.tif without
loosing compression but also without introducing artifacts I would be very
happy.

Sorry for the verbose mail. I really would like to read your thoughts about
this.

Thanks,

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130416/c517180a/attachment.html>

From even.rouault at mines-paris.org  Tue Apr 16 14:11:22 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 16 Apr 2013 23:11:22 +0200
Subject: [gdal-dev] TIFFMergeFieldInfo error when adding overviews to
	large tiff
In-Reply-To: <CACqBkM8AT3D0ks3wFxjTx-=d2B0JXAH0AJmPKvcNnKqbAP4Jxg@mail.gmail.com>
References: <CACqBkM9PpAjgXgS4E9_iS0rNo0TetWUd0hONTUZDYBbGq86NKg@mail.gmail.com>
	<201304161918.30048.even.rouault@mines-paris.org>
	<CACqBkM8AT3D0ks3wFxjTx-=d2B0JXAH0AJmPKvcNnKqbAP4Jxg@mail.gmail.com>
Message-ID: <201304162311.22195.even.rouault@mines-paris.org>

Le mardi 16 avril 2013 22:07:52, Eli Adam a ?crit :
> Even,
> 
> Thanks for checking into this and the ideas.

I've investigated a bit and I've discovered that while computing overviews, 
libtiff constantly switches from TIFF "directories" (main image, first 
overview,second overview, etc...). While doing this, it calls each time client 
code to install its own TIFF tags (libgeotiff for the geotiff tags, GDAL for the 
GDAL specific TIFF tags), but doesn't reset its array of existing tags. So each 
time the tags are added again and again, hence the huge memory allocation.

Could you test the attached patch (assuming you build GDAL with internal 
libtiff) ?

It would be good if you could also open a ticket in Trac about that issue.

Even

> 
> Eli
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: libtiff_fix_growing_customfields.patch
Type: text/x-patch
Size: 1004 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130416/a38789d3/attachment.bin>

From even.rouault at mines-paris.org  Tue Apr 16 14:26:52 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 16 Apr 2013 23:26:52 +0200
Subject: [gdal-dev] Convert and make ecw transparent - Part 2
In-Reply-To: <CAHNf2YQhRA+5ncSh_Z8sh7A3SW89wvCG9zd=3j9EtpD6Vi+HQA@mail.gmail.com>
References: <CAHNf2YQhRA+5ncSh_Z8sh7A3SW89wvCG9zd=3j9EtpD6Vi+HQA@mail.gmail.com>
Message-ID: <201304162326.52126.even.rouault@mines-paris.org>

Le mardi 16 avril 2013 23:09:51, Paul Meems a ?crit :
> Hi All,
> 
> I'm still working on my process to make my ecw ready for GeoServer and
> enable transparency.
> I've written about it before and got some valuable feedback that allowed me
> to convert my first ecw.
> I now have a second ecw that doesn't work properly with my first steps. For
> this ecw the resulting artifacts are too big.
> 
> I have an aerial photo in ECW format which is composed from several smaller
> photos (mosaic) giving me large white areas in the corners. These white
> areas need to be one color so Geoserver can make it transparent and I can
> put a second layer beneath it. I've tried this with my first ecw file and
> it is working great in Geoserver.
> 
> These are the steps that I take to end up with a tiff file with correct
> nodata values and compression:
> *Step 1*: Convert the ecw to tiff and make all white pixels true white:
> nearblack -of GTiff -white -o white.tif my.ecw
> *Step 2*: Mark white pixels as transparent
> gdalwarp --config GDAL_CACHEMAX 500 -wm 500 -multi -of GTiff -srcnodata
> "255 255 255" -dstnodata "255 255 255" -co tiled=yes -co "BLOCKXSIZE=512"
> -co "BLOCKYSIZE=512" -s_srs EPSG:28992 -overwrite white.tif nodata.tif
> *Step 3*: Compress
> gdal_translate -of GTiff -a_srs EPSG:28992 -co "TILED=YES" -co
> "BIGTIFF=YES" -co "PROFILE=GEOTIFF" -co "BLOCKXSIZE=512" -co
> "BLOCKYSIZE=512" -co "COMPRESS=JPEG" -co "JPEG_QUALITY=80" -co
> "PHOTOMETRIC=YCBCR" --config GDAL_TIFF_INTERNAL_MASK YES nodata.tif
> compressed.tif
> *Step 4*: Add overviews
> gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
> PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW BAND compressed.tif
> 2 4 8 16 32 64 128 256
> 
> I only do step 2 because nearblack doesn't set the nodata value. Why is
> that? Doesn't it make sense to do so or is it technically not possible?
> 
> My input ECW file is 3.5GB, white.tif (created by nearblack) is 75GB. After
> compression and adding overviews I have a 3.8GB tiff file. This tiff file
> has white artifacts at the edge of the photo data and nodata.
> I don't understand why. My input file (nodata.tif) for the compression has
> proper nodata values set, why doesn't the compression step retain them? I
> can imagine due to the compression algorithm some nodata values are changed
> but isn't it possible to reset them again before saving?
> 
> Because of the artifacts I created a masked tif after step 2 from
> nodata.tif. In this masked tiff all data that is not nodata is set to
> black. Next I run gdal_polygonize.py on this masked data and after 7 days!
> I end up with a 110mb shapefile. I have such a large shapefile because step
> 2 also set some white pixels in the photo area to nodata and those pixels
> are also converted to shapes.
> After some vector processing I finally have my outline of my photo area as
> a shapefile.
> Now I clip the result of step 4 with this shapefile:
> *Step 5*: Clip raster with shapefile:
> gdalwarp -cutline clip.shp -cl clip -crop_to_cutline --config GDAL_CACHEMAX
> 500 -wm 500 -multi -of GTiff -srcnodata "255 255 255" -dstnodata "255 255
> 255" -co tiled=yes -co "BLOCKXSIZE=512" -co "BLOCKYSIZE=512" -s_srs
> EPSG:28992 compressed.tif crop.tif
> 
> This cropped file looks great, the artifacts are gone but the overviews are
> lost.
> So I call gdal_addo again:
> gdaladdo -r average -ro --config COMPRESS_OVERVIEW JPEG --config
> PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL crop.tif 2 4
> 8 16 32 64 128 256
> Now the artifacts are back again ;(
> Now I tried again without compression:
> gdaladdo -r average -ro crop.tif 2 4 8 16 32 64 128 256
> This results in a huge .ovr file, it is still processing. But at 25% the
> size is already 7.2GB
> 
> Meanwhile I tried something else:
> Because I already have my cutline I've tried combining all steps in to one
> command and use the output of step 2 as my input:
> gdalwarp -cutline clip.shp -cl clip -crop_to_cutline --config GDAL_CACHEMAX
> 1500 -wm 500 -multi -wo "USE_OPENCL=TRUE" -of GTiff -srcnodata "255 255
> 255" -dstnodata "255 255 255" -co tiled=yes -co "BLOCKXSIZE=512" -co
> "BLOCKYSIZE=512" -co "BIGTIFF=YES" -co "PROFILE=GEOTIFF" -co
> "COMPRESS=JPEG" -co "JPEG_QUALITY=80" -co "PHOTOMETRIC=YCBCR" --config
> GDAL_TIFF_INTERNAL_MASK YES -s_srs EPSG:28992 nodata.tif cropped.tif
> This time I've used USE_OPENCL=TRUE but it doesn't seems to work. Most
> likely my version of gdal doesn't have openCL enabled.
> I also increased the GDAL_CACHEMAX. I'm not sure what a good value would
> be. I'm running gdal v1.10-64Bit on WinVista64 with 8GB RAM.
> While running above command I still have 3GB to spare.
> The above step also results in a good tiff file of just 3.1GB, but without
> overviews so it loads very slowly.
> 
> I see a few enhancements. The first one is to use faster hardware. I've
> ordered a fast SSD, it will arrive in a few days.
> Hopefully this will speed up my steps.
> But the best optimization would be if step 1 and 2 could be combined and if
> I don't need to create a masked file to get a cutline.
> The combined step only takes 6 hours so that is acceptable, but all goes
> wrong when I add overviews which introduces the artifacts again.
> All steps mentioned here took me almost 4 weeks of computer processing
> time. And still the result is not what I need ;(
> 
> So if anybody can help me with adding overviews to my cropped.tif without
> loosing compression but also without introducing artifacts I would be very
> happy.
> 
> Sorry for the verbose mail. I really would like to read your thoughts about
> this.

Sorry, but I didn't read carefully your email ;-)

Well, as I said before, you should really try your experiments on small images 
before going to the full resolution images... It would save some megawatts for 
the planet ;-)

I think you're fighting a lost battle. JPEG compression is lossy. So no matter 
what you do, you'll get artifacts at the edge between the imagery and the 
nodata area. Unless you use a mask. But GeoServer doesn't yet use the GDAL 
mask API. So the idea would be to enhance GeoServer to make better use of 
GDAL. Or to add a VRT "driver" in Image IO/EXT so that you can trick a 
RGB+Mask as a RGBA.


> 
> Thanks,
> 
> Paul

From eadam at co.lincoln.or.us  Tue Apr 16 15:01:41 2013
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Tue, 16 Apr 2013 15:01:41 -0700
Subject: [gdal-dev] TIFFMergeFieldInfo error when adding overviews to
 large tiff
In-Reply-To: <201304162311.22195.even.rouault@mines-paris.org>
References: <CACqBkM9PpAjgXgS4E9_iS0rNo0TetWUd0hONTUZDYBbGq86NKg@mail.gmail.com>
	<201304161918.30048.even.rouault@mines-paris.org>
	<CACqBkM8AT3D0ks3wFxjTx-=d2B0JXAH0AJmPKvcNnKqbAP4Jxg@mail.gmail.com>
	<201304162311.22195.even.rouault@mines-paris.org>
Message-ID: <CACqBkM_0PJqs1goKiNE_eBNRh2xg9zFw3NMM7uMMYnA2O8hzPA@mail.gmail.com>

On Tue, Apr 16, 2013 at 2:11 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> I've investigated a bit and I've discovered that while computing overviews,
> libtiff constantly switches from TIFF "directories" (main image, first
> overview,second overview, etc...). While doing this, it calls each time client
> code to install its own TIFF tags (libgeotiff for the geotiff tags, GDAL for the
> GDAL specific TIFF tags), but doesn't reset its array of existing tags. So each
> time the tags are added again and again, hence the huge memory allocation.
>
> Could you test the attached patch (assuming you build GDAL with internal
> libtiff) ?

I can apply and test this on linux but don't know how to do it on
windows.  I usually use the nightly windows builds from Tamas.  Should
I test this on linux?

>
> It would be good if you could also open a ticket in Trac about that issue.

I've opened a ticket, http://trac.osgeo.org/gdal/ticket/5054

Eli

From mwtoews at gmail.com  Tue Apr 16 19:08:02 2013
From: mwtoews at gmail.com (Mike Toews)
Date: Wed, 17 Apr 2013 14:08:02 +1200
Subject: [gdal-dev] ogr.GeometryTypeToName oddness
Message-ID: <CAM2FmMosmVuxcOMkGVTbyNnok=ffdKdchovUabNWyVSHM_NrDQ@mail.gmail.com>

With the Python module for GDAL 1.9.2 for Python 2.7, Windows 64-bit,
downloaded from http://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal I see
this oddness:

from osgeo import ogr
for name in dir(ogr):
    if name.startswith('wkb'):
        i = getattr(ogr, name)
        print('%s : %d : %r' % (name, i, ogr.GeometryTypeToName(i)))

wkb25Bit : -2147483648 : 'Unknown (any)'
wkb25DBit : -2147483648 : 'Unknown (any)'
wkbGeometryCollection : 7 : '3D Geometry Collection'
wkbGeometryCollection25D : -2147483641 : 'Geometry Collection'
wkbLineString : 2 : '3D Line String'
wkbLineString25D : -2147483646 : 'Line String'
wkbLinearRing : 101 : 'Unrecognised: 101'
wkbMultiLineString : 5 : '3D Multi Line String'
wkbMultiLineString25D : -2147483643 : 'Multi Line String'
wkbMultiPoint : 4 : '3D Multi Point'
wkbMultiPoint25D : -2147483644 : 'Multi Point'
wkbMultiPolygon : 6 : '3D Multi Polygon'
wkbMultiPolygon25D : -2147483642 : 'Multi Polygon'
wkbNDR : 1 : '3D Point'
wkbNone : 100 : 'None'
wkbPoint : 1 : '3D Point'
wkbPoint25D : -2147483647 : 'Point'
wkbPolygon : 3 : '3D Polygon'
wkbPolygon25D : -2147483645 : 'Polygon'
wkbUnknown : 0 : '3D Unknown (any)'
wkbXDR : 0 : '3D Unknown (any)'

A few observations:

 - The 2D geometries (e.g. wkbLineString) are reported as 3D
geometries by ogr.GeometryTypeToName(), but this is false.
Furthermore, other OGR documents refer to these geometries as so
called 2.5D geometries, and not true 3D geometries.

- The 2.5D geometries (e.g. wkbLineString25D) are simply reported as
their geometry type, and no mention of dimensions.

It seems the "3D " name prepending logic is reversed.

-Mike

From even.rouault at mines-paris.org  Tue Apr 16 23:07:39 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 17 Apr 2013 08:07:39 +0200
Subject: [gdal-dev] ogr.GeometryTypeToName oddness
In-Reply-To: <CAM2FmMosmVuxcOMkGVTbyNnok=ffdKdchovUabNWyVSHM_NrDQ@mail.gmail.com>
References: <CAM2FmMosmVuxcOMkGVTbyNnok=ffdKdchovUabNWyVSHM_NrDQ@mail.gmail.com>
Message-ID: <201304170807.39513.even.rouault@mines-paris.org>

Le mercredi 17 avril 2013 04:08:02, Mike Toews a ?crit :
> With the Python module for GDAL 1.9.2 for Python 2.7, Windows 64-bit,
> downloaded from http://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal I see
> this oddness:
> 
> from osgeo import ogr
> for name in dir(ogr):
>     if name.startswith('wkb'):
>         i = getattr(ogr, name)
>         print('%s : %d : %r' % (name, i, ogr.GeometryTypeToName(i)))
> 
> wkb25Bit : -2147483648 : 'Unknown (any)'
> wkb25DBit : -2147483648 : 'Unknown (any)'
> wkbGeometryCollection : 7 : '3D Geometry Collection'
> wkbGeometryCollection25D : -2147483641 : 'Geometry Collection'
> wkbLineString : 2 : '3D Line String'
> wkbLineString25D : -2147483646 : 'Line String'
> wkbLinearRing : 101 : 'Unrecognised: 101'
> wkbMultiLineString : 5 : '3D Multi Line String'
> wkbMultiLineString25D : -2147483643 : 'Multi Line String'
> wkbMultiPoint : 4 : '3D Multi Point'
> wkbMultiPoint25D : -2147483644 : 'Multi Point'
> wkbMultiPolygon : 6 : '3D Multi Polygon'
> wkbMultiPolygon25D : -2147483642 : 'Multi Polygon'
> wkbNDR : 1 : '3D Point'
> wkbNone : 100 : 'None'
> wkbPoint : 1 : '3D Point'
> wkbPoint25D : -2147483647 : 'Point'
> wkbPolygon : 3 : '3D Polygon'
> wkbPolygon25D : -2147483645 : 'Polygon'
> wkbUnknown : 0 : '3D Unknown (any)'
> wkbXDR : 0 : '3D Unknown (any)'
> 
> A few observations:
> 
>  - The 2D geometries (e.g. wkbLineString) are reported as 3D
> geometries by ogr.GeometryTypeToName(), but this is false.
> Furthermore, other OGR documents refer to these geometries as so
> called 2.5D geometries, and not true 3D geometries.
> 
> - The 2.5D geometries (e.g. wkbLineString25D) are simply reported as
> their geometry type, and no mention of dimensions.
> 
> It seems the "3D " name prepending logic is reversed.

Known issue : see http://trac.osgeo.org/gdal/ticket/4871

> 
> -Mike
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From wsvries at xs4all.nl  Wed Apr 17 04:23:01 2013
From: wsvries at xs4all.nl (wsvries)
Date: Wed, 17 Apr 2013 13:23:01 +0200
Subject: [gdal-dev] lib to get from GDAL/geotiff to PROJ4
Message-ID: <7b661e56438ddfa53539ce28b36c92bf@xs4all.nl>

Hi,
I am working on an application (adding terrain info to maps for 3D 
rendering) that does some heavy projection calculations using the proj4 
libs.
Input for now is geotiff.
I have Googled a lot, but I was not able to find any libs that can 
output proj4 strings based on geotiff input.
I have seen (GDAL based) utilities that are able to do that but no libs 
to use in my application.
Any hint is welcome.
Thanks.

From etourigny.dev at gmail.com  Wed Apr 17 04:48:38 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 17 Apr 2013 08:48:38 -0300
Subject: [gdal-dev] lib to get from GDAL/geotiff to PROJ4
In-Reply-To: <7b661e56438ddfa53539ce28b36c92bf@xs4all.nl>
References: <7b661e56438ddfa53539ce28b36c92bf@xs4all.nl>
Message-ID: <CA+TxYvNLTWFLOk6OXNmMXpXddyPDF3okRu76PsA65sZYedSkxQ@mail.gmail.com>

You can have a look at the code used by the gdalsrsinfo , which basically
opens a GDAL/OGR datasource and outputs the proj4 (or wkt) string.

Assuming you use c/c++ of course...

http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdalsrsinfo.cpp

Here is the relevant code (some declarations missing)

poGDALDS = (GDALDataset *) GDALOpen( pszInput, GA_ReadOnly );
    if ( poGDALDS != NULL && poGDALDS->GetProjectionRef( ) != NULL ) {
        pszProjection = (char *) poGDALDS->GetProjectionRef( );
        if( oSRS.importFromWkt( &pszProjection ) == CE_None ) {
            CPLDebug( "gdalsrsinfo", "got SRS from GDAL" );
            bGotSRS = TRUE;
        }
GDALClose( (GDALDatasetH) poGDALDS );
        if ( ! bGotSRS )
            CPLDebug( "gdalsrsinfo", "did not open with GDAL" );
    }

 oSRS.exportToProj4( &pszOutput );
        printf( "\'%s\'\n", pszOutput );


On Wed, Apr 17, 2013 at 8:23 AM, wsvries <wsvries at xs4all.nl> wrote:

> Hi,
> I am working on an application (adding terrain info to maps for 3D
> rendering) that does some heavy projection calculations using the proj4
> libs.
> Input for now is geotiff.
> I have Googled a lot, but I was not able to find any libs that can output
> proj4 strings based on geotiff input.
> I have seen (GDAL based) utilities that are able to do that but no libs to
> use in my application.
> Any hint is welcome.
> Thanks.
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130417/1bb67b92/attachment.html>

From wsvries at xs4all.nl  Wed Apr 17 06:44:11 2013
From: wsvries at xs4all.nl (wsvries)
Date: Wed, 17 Apr 2013 15:44:11 +0200
Subject: [gdal-dev] lib to get from GDAL/geotiff to PROJ4
In-Reply-To: <CA+TxYvNLTWFLOk6OXNmMXpXddyPDF3okRu76PsA65sZYedSkxQ@mail.gmail.com>
References: <7b661e56438ddfa53539ce28b36c92bf@xs4all.nl>
	<CA+TxYvNLTWFLOk6OXNmMXpXddyPDF3okRu76PsA65sZYedSkxQ@mail.gmail.com>
Message-ID: <171bc8ee38dc3c42b420bc6333d96921@xs4all.nl>

Thanks.
I took the code you mentioned, installed the gdal libdev and run G++ on 
it and voila!


Etienne Tourigny schreef op 2013-04-17 13:48:
> You can have a look at the code used by the gdalsrsinfo , which
> basically opens a GDAL/OGR datasource and outputs the proj4 (or wkt)
> string.
> 
> Assuming you use c/c++ of course...
> 
> http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdalsrsinfo.cpp [2]
> 
> Here is the relevant code (some declarations missing)
> 
> poGDALDS = (GDALDataset *) GDALOpen( pszInput, GA_ReadOnly );
>  ? ?if ( poGDALDS != NULL && poGDALDS->GetProjectionRef( ) != NULL ) {
>  ? ? ? ?pszProjection = (char *) poGDALDS->GetProjectionRef( );
>  ? ? ? ?if( oSRS.importFromWkt( &pszProjection ) == CE_None ) {
>  ? ? ? ? ? ?CPLDebug( "gdalsrsinfo", "got SRS from GDAL" );
>  ? ? ? ? ? ?bGotSRS = TRUE;
>  ? ? ? ?}
> GDALClose( (GDALDatasetH) poGDALDS );
>  ? ? ? ?if ( ! bGotSRS )?
>  ? ? ? ? ? ?CPLDebug( "gdalsrsinfo", "did not open with GDAL" );
>  ? ?} ??
> 
> ?oSRS.exportToProj4( &pszOutput );
>  ? ? ? ?printf( "'%s'n", pszOutput );
> 
> On Wed, Apr 17, 2013 at 8:23 AM, wsvries <wsvries at xs4all.nl> wrote:
> 
>> Hi,
>> I am working on an application (adding terrain info to maps for 3D 
>> rendering) that does some heavy projection calculations using the 
>> proj4 libs.
>> Input for now is geotiff.
>> I have Googled a lot, but I was not able to find any libs that can 
>> output proj4 strings based on geotiff input.
>> I have seen (GDAL based) utilities that are able to do that but no 
>> libs to use in my application.
>> Any hint is welcome.
>> Thanks.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev [1]
> 
> 
> 
> Links:
> ------
> [1] http://lists.osgeo.org/mailman/listinfo/gdal-dev
> [2] http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdalsrsinfo.cpp

From lauramail at iol.it  Wed Apr 17 08:29:07 2013
From: lauramail at iol.it (laura0)
Date: Wed, 17 Apr 2013 08:29:07 -0700 (PDT)
Subject: [gdal-dev] MODIS reprojection
Message-ID: <1366212547290-5047700.post@n6.nabble.com>

Hi,
I'm working with GDAL tool in order to use MODIS (MOD14.A2 and MYD14.A2)
data but I have problems with reprojection in UTM 32. The lat/lon pixel
coordinates I get are not correct (similar but a bit shifted). 
This is what I have done:
In order to geolocate swaths, there is a separate product that contains two
arrays, Latitude and Longitude. Each row, column in these arrays contains
the lat and lon for each corresponding data pixel. I have used gdal to get
from this product, the following information:
Coordinate System is `'
GCP[  0]: Id=, Info=
          (0.5,0.5) -> (36.5436744689941,25.0500869750977,0)
GCP[  1]: Id=, Info=
          (123.5,0.5) -> (32.4521675109863,24.7417182922363,0)
GCP[  2]: Id=, Info=
....
....
GCP[143]

and then I added ALL these rows as option to the command gdal_translate -of
Gtiff -co "tfw=yes" -gcp 0.5 0.5 36.5436744689941 25.0500869750977 -gcp
123.5 0.5 32.4521675109863 24.7417182922363 ...
MOD14.A2013078.2035.005.NRT.hdf_001_0.gaiag.tif temp.tif

with gdalwarp -t_srs "+proj=utm +zone=32 +datum=WGS84" temp.tif output.tif I
get an image that looks ok but the lat/lon coordinates are still not precise
(particularly for longitude).

Can someone help me?
Thanks

Laura



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/MODIS-reprojection-tp5047700.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From eadam at co.lincoln.or.us  Wed Apr 17 08:34:13 2013
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Wed, 17 Apr 2013 08:34:13 -0700
Subject: [gdal-dev] Neatline for USGS PDF maps
In-Reply-To: <201301191714.32174.even.rouault@mines-paris.org>
References: <CACqBkM-rto=X75f_oZUDVrdOWVTmBx6ZKues=e6taqkh1EwWKg@mail.gmail.com>
	<201301191628.53993.even.rouault@mines-paris.org>
	<201301191714.32174.even.rouault@mines-paris.org>
Message-ID: <CACqBkM8PrrUY_uNL8Jezg8QQCuOtucF78cyuHSqXHcVeuyj5hw@mail.gmail.com>

I found this in drafts and it appears I failed to send it.  Sorry for
delay.  Sent partly for the list archives at this point.

On Sat, Jan 19, 2013 at 8:14 AM, Even Rouault
<even.rouault at mines-paris.org> wrote:
>> Looking more closely at those files, I see that there are various
>> registration blocks. The algorithm up to now was to select the
>> registration block whose neatline covered the most area in terms of
>> pixels. In the case of
>> OR_Newport_North_20110824_TM_geo.pdf, those blocks are :
>> "UTM Grid and Projection"
>> "Orthoimage"
>> "Map Layers"
>> "Adjoining Quadrangles Diagram"
>>
>> The number and names of blocks may change, but in all USGS topo PDFs
>> samples I've tried, the "Map Layers" is always present and seems to the
>> one that lead to the best results, so I've just pushed a change to select
>> it when it is found.

--config GDAL_PDF_NEATLINE is very helpful.  Did you find the
registration name blocks with one of the supporting PDF libraries?  Is
it possible to find these multiple registration name blocks from gdal?
 (I tried: gdalinfo --debug on without success.)

Thanks for the many recent improvements for the USGS topo PDFs.
--config GDAL_PDF_RENDERING_OPTIONS is very useful.

>>
>> You can use the following Python script to automate fetching the neatline
>> and launching gdalwarp to use it :
>>
>> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
>>
>> from osgeo import gdal
>> import os
>> import sys
>>
>> ds = gdal.Open(sys.argv[1])
>> neatline_wkt = ds.GetMetadataItem("NEATLINE")
>> ds = None
>>
>> f = open('cutline.csv', 'wt')
>> f.write('id,WKT\n')
>> f.write('1,"%s"\n' % neatline_wkt)
>> f.close()
>>
>> os.system('gdalwarp %s %s.tif ' % (sys.argv[1], sys.argv[1]) +
>>           '-crop_to_cutline -cutline cutline.csv -overwrite')
>>
>> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

This is great.  I've added it to the wiki,
http://trac.osgeo.org/gdal/wiki/USGS_PDF_Topo

>
> If you're interested in only the raster part, let's imagine that the above
> script is called cutline.py, you can try the following :
>
> export GDAL_PDF_RENDERING_OPTIONS=RASTER
> (or set GDAL_PDF_RENDERING_OPTIONS=RASTER on windows)
>
> python cutline.py your.pdf
>
> nearblack your.pdf -o your_rgba.pdf -of GTiff -setalpha -color 0,0,0 \
>                 -color 255,255,255
>

I interpreted the above as:
nearblack your.tif -o your_rgba.tif -of GTiff -setalpha -color 0,0,0
-color 255,255,255
Where your.tif is the output from cutline.py and your_rgba.tif is the
output from nearblack.

Thanks, Eli


>>
>> Best regards,
>>
>> Even
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Wed Apr 17 10:42:28 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 17 Apr 2013 19:42:28 +0200
Subject: [gdal-dev] Neatline for USGS PDF maps
In-Reply-To: <CACqBkM8PrrUY_uNL8Jezg8QQCuOtucF78cyuHSqXHcVeuyj5hw@mail.gmail.com>
References: <CACqBkM-rto=X75f_oZUDVrdOWVTmBx6ZKues=e6taqkh1EwWKg@mail.gmail.com>
	<201301191714.32174.even.rouault@mines-paris.org>
	<CACqBkM8PrrUY_uNL8Jezg8QQCuOtucF78cyuHSqXHcVeuyj5hw@mail.gmail.com>
Message-ID: <201304171942.28480.even.rouault@mines-paris.org>

Le mercredi 17 avril 2013 17:34:13, Eli Adam a ?crit :
> I found this in drafts and it appears I failed to send it.  Sorry for
> delay.  Sent partly for the list archives at this point.
> 
> On Sat, Jan 19, 2013 at 8:14 AM, Even Rouault
> 
> <even.rouault at mines-paris.org> wrote:
> >> Looking more closely at those files, I see that there are various
> >> registration blocks. The algorithm up to now was to select the
> >> registration block whose neatline covered the most area in terms of
> >> pixels. In the case of
> >> OR_Newport_North_20110824_TM_geo.pdf, those blocks are :
> >> "UTM Grid and Projection"
> >> "Orthoimage"
> >> "Map Layers"
> >> "Adjoining Quadrangles Diagram"
> >> 
> >> The number and names of blocks may change, but in all USGS topo PDFs
> >> samples I've tried, the "Map Layers" is always present and seems to the
> >> one that lead to the best results, so I've just pushed a change to
> >> select it when it is found.
> 
> --config GDAL_PDF_NEATLINE is very helpful.  Did you find the
> registration name blocks with one of the supporting PDF libraries?  Is
> it possible to find these multiple registration name blocks from gdal?
>  (I tried: gdalinfo --debug on without success.)
> 

I can see them in the "PDF: Description = " lines

$ gdalinfo --debug on ~/gdal/data/geopdf/OR_Newport_North_20110824_TM_geo.pdf
PDF: DPI guessed from contents stream = 600.0509320574655
PDF: OGC Encoding Best Practice style detected
PDF: LGIDict Version : 2.3
PDF: Description = UTM Grid and Projection
PDF: This is the largest neatline for now
PDF: LGIDict Version : 2.3
PDF: Description = Orthoimage
PDF: Not the largest neatline. Skipping it
PDF: LGIDict Version : 2.3
PDF: Description = Map Layers
PDF: The "Map Layers" registration will be selected
PDF: LGIDict Version : 2.3
PDF: Description = Adjoining Quadrangles Diagram
PDF: Not the largest neatline. Skipping it
PDF: Description = Map Layers
[...]

From even.rouault at mines-paris.org  Wed Apr 17 11:21:50 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 17 Apr 2013 20:21:50 +0200
Subject: [gdal-dev] TIFFMergeFieldInfo error when adding overviews to
	large tiff
In-Reply-To: <CACqBkM_0PJqs1goKiNE_eBNRh2xg9zFw3NMM7uMMYnA2O8hzPA@mail.gmail.com>
References: <CACqBkM9PpAjgXgS4E9_iS0rNo0TetWUd0hONTUZDYBbGq86NKg@mail.gmail.com>
	<201304162311.22195.even.rouault@mines-paris.org>
	<CACqBkM_0PJqs1goKiNE_eBNRh2xg9zFw3NMM7uMMYnA2O8hzPA@mail.gmail.com>
Message-ID: <201304172021.50792.even.rouault@mines-paris.org>

Le mercredi 17 avril 2013 00:01:41, Eli Adam a ?crit :
> On Tue, Apr 16, 2013 at 2:11 PM, Even Rouault
> 
> <even.rouault at mines-paris.org> wrote:
> > I've investigated a bit and I've discovered that while computing
> > overviews, libtiff constantly switches from TIFF "directories" (main
> > image, first overview,second overview, etc...). While doing this, it
> > calls each time client code to install its own TIFF tags (libgeotiff for
> > the geotiff tags, GDAL for the GDAL specific TIFF tags), but doesn't
> > reset its array of existing tags. So each time the tags are added again
> > and again, hence the huge memory allocation.
> > 
> > Could you test the attached patch (assuming you build GDAL with internal
> > libtiff) ?
> 
> I can apply and test this on linux but don't know how to do it on
> windows.  I usually use the nightly windows builds from Tamas.  Should
> I test this on linux?

It would have been good to test this on the environmenet on which you got the 
problem, but while it isn't committed, I can see it is not really doable for 
you.

> 
> > It would be good if you could also open a ticket in Trac about that
> > issue.
> 
> I've opened a ticket, http://trac.osgeo.org/gdal/ticket/5054

Thanks. I've attached my patch and I'm waiting for the review of a libtiff 
committer (a.k.a. Frank) before committing it in GDAL.

> 
> Eli

From tannasko at gmail.com  Wed Apr 17 23:39:16 2013
From: tannasko at gmail.com (tanasko)
Date: Wed, 17 Apr 2013 23:39:16 -0700 (PDT)
Subject: [gdal-dev] ECW support on Fedora Linux - error
In-Reply-To: <5050ED7A.6030109@gatewaygeomatics.com>
References: <1343399620972-4991388.post@n6.nabble.com>
	<1347381748551-5001142.post@n6.nabble.com>
	<CA+rY5eKjyhVm_U6saYJ-QdSqpLFMW+ihrpJZ_PKso5UW9hf09w@mail.gmail.com>
	<5050ED7A.6030109@gatewaygeomatics.com>
Message-ID: <1366267156093-5047841.post@n6.nabble.com>

Can you explain the process by which you get your GIS supports ECV, please. I
use Ubuntu 12.10 and 1.80 Quantum GIS. In the drop-down list I have ECW,
select it, and QGIS crashes with message: basic_string::_S_createPleas,
help.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ECW-support-on-Fedora-Linux-error-tp4991388p5047841.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130417/5a5ac820/attachment.html>

From dasfabirad at googlemail.com  Thu Apr 18 00:38:47 2013
From: dasfabirad at googlemail.com (lanufabi)
Date: Thu, 18 Apr 2013 00:38:47 -0700 (PDT)
Subject: [gdal-dev] ECW support on Fedora Linux - error
In-Reply-To: <1366267156093-5047841.post@n6.nabble.com>
References: <1343399620972-4991388.post@n6.nabble.com>
	<1347381748551-5001142.post@n6.nabble.com>
	<CA+rY5eKjyhVm_U6saYJ-QdSqpLFMW+ihrpJZ_PKso5UW9hf09w@mail.gmail.com>
	<5050ED7A.6030109@gatewaygeomatics.com>
	<1366267156093-5047841.post@n6.nabble.com>
Message-ID: <1366270727114-5047862.post@n6.nabble.com>

Hey tanasko,
can you check whether your libecwj2 package includes
libecwj2-3.3-wcharfix.patch ? From which repository did you install qgis +
gdal? Please post the output of
$ gdalinfo --formats |grep ECW

Gr
Fabian



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ECW-support-on-Fedora-Linux-error-tp4991388p5047862.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From tannasko at gmail.com  Thu Apr 18 01:13:26 2013
From: tannasko at gmail.com (tanasko)
Date: Thu, 18 Apr 2013 01:13:26 -0700 (PDT)
Subject: [gdal-dev] ECW support on Fedora Linux - error
In-Reply-To: <1366270727114-5047862.post@n6.nabble.com>
References: <1343399620972-4991388.post@n6.nabble.com>
	<1347381748551-5001142.post@n6.nabble.com>
	<CA+rY5eKjyhVm_U6saYJ-QdSqpLFMW+ihrpJZ_PKso5UW9hf09w@mail.gmail.com>
	<5050ED7A.6030109@gatewaygeomatics.com>
	<1366267156093-5047841.post@n6.nabble.com>
	<1366270727114-5047862.post@n6.nabble.com>
Message-ID: <CAAJeQgsxEUz5XV4Tuu_GCEpTz1Nn=TqbsieZA+Jxx-aJ9t4ZxA@mail.gmail.com>

I did everything according to the instructions from this link:
http://wiki.openstreetmap.org/wiki/ECW#Howto_install_gdal_with_ECW_support

gdalinfo --formats |grep ECW
  ECW (rw): ERDAS Compressed Wavelets (SDK 3.x)
  JP2ECW (rw+v): ERDAS JPEG2000 (SDK 3.x)



2013/4/18 lanufabi [via OSGeo.org] <ml-node+s1560n5047862h78 at n6.nabble.com>

> Hey tanasko,
> can you check whether your libecwj2 package includes
> libecwj2-3.3-wcharfix.patch ? From which repository did you install qgis +
> gdal? Please post the output of
> $ gdalinfo --formats |grep ECW
>
> Gr
> Fabian
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1560.x6.nabble.com/ECW-support-on-Fedora-Linux-error-tp4991388p5047862.html
>  To unsubscribe from ECW support on Fedora Linux - error, click here<http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=4991388&code=dGFubmFza29AZ21haWwuY29tfDQ5OTEzODh8LTExNzgzMTI0NDA=>
> .
> NAML<http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ECW-support-on-Fedora-Linux-error-tp4991388p5047872.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130418/efba6618/attachment.html>

From dengo at gmx.net  Thu Apr 18 01:47:58 2013
From: dengo at gmx.net (Dennis Gocke)
Date: Thu, 18 Apr 2013 10:47:58 +0200
Subject: [gdal-dev] 1.10 Issues with Geocing API and OSM Driver
Message-ID: <CALqbEi5vp8U6-aQH9qZWDqERdXUdZGFsdi5s7uvHnMLSOKm8rQ@mail.gmail.com>

Hi,

I?ve encountered some issues. My tests are done with the latest 1.10
version.

The first issue is related to the new Geocoding API. Great work btw.

When using the MAPQUEST_NOMINATIM or GEONAMES service only the first
feature in the resulting layer gets a geometry. The other features only
report NULL as geometry. I think there might be a bug. When using the
OSM_NOMINATIM service all features have geometries.

The other two services, that are hardcoded, don?t seem to work at all. But
this is probably known and more of an issue on the server side. Calling
OGRGeocode on a YAHOO session produces the error ?Line 17: Didn't find
expected '=' for value of attribute '/'.? When using BING OGRGeocode does
not produce an error but the returned Layer is just NULL.

The other issue is with reading an OSM file.

Firstly I have some questions regarding the interleaved reading.

For the driver to work with larger OSM files, the config option
OGR_INTERLEAVED_READING should be set and the interleaved reading scheme
should be used, correct?

Are there other drivers that would benefit from the interleaved reading
scheme?

Does this config option affect other drivers at all?

Currently I only use the interleaved reading and set this config option
only temporarily while reading the OSM file.

The issue I?m having is that I sometimes get a Failure on GetNextFeature
like ?Too many members referenced in relation 32572?. What consequences
does this failure have?

If I just continue with the next layer in the interleaved reading scheme
get more features, but did I miss some features because of the failure?

If anyone is interested I can send a small test file where the failure can
be reproduced.

And finally I have a small suggestion regarding the osmconf.ini. I think
the waterway attribute should be default for lines as it usually is
important to differentiate for rivers ect.
Something like:
# keys to report as OGR fields
attributes=name,highway,waterway,aerialway,barrier,man_made

Kind regards,
Dennis
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130418/e49a2270/attachment.html>

From kassies at gmail.com  Thu Apr 18 02:10:34 2013
From: kassies at gmail.com (Rutger)
Date: Thu, 18 Apr 2013 02:10:34 -0700 (PDT)
Subject: [gdal-dev] MODIS reprojection
In-Reply-To: <1366212547290-5047700.post@n6.nabble.com>
References: <1366212547290-5047700.post@n6.nabble.com>
Message-ID: <1366276234994-5047887.post@n6.nabble.com>

Hey Laura,

Since the MxD14.A2 products are already projected in the sinusoidal
projection there is no need to warp using GCP's. Fitting a polynomial
through some GCP's will always be less accurate then using the projection
the data is already in.

Somewhere in the metadata in the HDF there should be a boundingbox (corner
coordinates, in sinusoidal projection) for the specific tile you are using,
you can then assign these with the projection using gdal_translate. Once
assigned, you can use gdalwarp in the same way as you already described.

Youre gdal_translate command should look somewhat like this:
gdal_translate -of "VRT" -a_srs "+proj=sinu +lon_0=0 +x_0=0 +y_0=0
+a=6371007.181 +b=6371007.181 +units=m +no_defs" -a_ullr 2223901.039333
-3335851.559000 3335851.559000 -4447802.078667 <input HDF subdataset>
<output vrt file>

You can get the correct subdataset reference by running gdalinfo on you HDF.
The coordinates i used are for tile h20v12, so make sure you use the ones
from your tile. I used a vrt as output which you can use as an input for
gdal_translate, but its also fine to use Geotiff or anything else you
prefer.

Hope this helps.

Regards,
Rutger










--
View this message in context: http://osgeo-org.1560.x6.nabble.com/MODIS-reprojection-tp5047700p5047887.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jrepetto at free.fr  Thu Apr 18 03:02:08 2013
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 18 Apr 2013 12:02:08 +0200
Subject: [gdal-dev] ECW support on Fedora Linux - error
In-Reply-To: <CAAJeQgsxEUz5XV4Tuu_GCEpTz1Nn=TqbsieZA+Jxx-aJ9t4ZxA@mail.gmail.com>
References: <1343399620972-4991388.post@n6.nabble.com>
	<1347381748551-5001142.post@n6.nabble.com>
	<CA+rY5eKjyhVm_U6saYJ-QdSqpLFMW+ihrpJZ_PKso5UW9hf09w@mail.gmail.com>
	<5050ED7A.6030109@gatewaygeomatics.com>
	<1366267156093-5047841.post@n6.nabble.com>
	<1366270727114-5047862.post@n6.nabble.com>
	<CAAJeQgsxEUz5XV4Tuu_GCEpTz1Nn=TqbsieZA+Jxx-aJ9t4ZxA@mail.gmail.com>
Message-ID: <516FC4A0.4080002@free.fr>

Le 18/04/2013 10:13, tanasko a ?crit :
> I did everything according to the instructions from this link:
> http://wiki.openstreetmap.org/wiki/ECW#Howto_install_gdal_with_ECW_support

The libecwj2-3.3-wcharfix.patch patch is missing on this page.


From tannasko at gmail.com  Thu Apr 18 03:15:31 2013
From: tannasko at gmail.com (tanasko)
Date: Thu, 18 Apr 2013 03:15:31 -0700 (PDT)
Subject: [gdal-dev] ECW support on Fedora Linux - error
In-Reply-To: <516FC4A0.4080002@free.fr>
References: <1343399620972-4991388.post@n6.nabble.com>
	<1347381748551-5001142.post@n6.nabble.com>
	<CA+rY5eKjyhVm_U6saYJ-QdSqpLFMW+ihrpJZ_PKso5UW9hf09w@mail.gmail.com>
	<5050ED7A.6030109@gatewaygeomatics.com>
	<1366267156093-5047841.post@n6.nabble.com>
	<1366270727114-5047862.post@n6.nabble.com>
	<CAAJeQgsxEUz5XV4Tuu_GCEpTz1Nn=TqbsieZA+Jxx-aJ9t4ZxA@mail.gmail.com>
	<516FC4A0.4080002@free.fr>
Message-ID: <CAAJeQgvk0nhxhN_-19fM7VFucDtoS0uTwcmM2dborvgEtSgZ9A@mail.gmail.com>

OK, how can I apply this patch? Please provide step-by step instructions.


2013/4/18 Jean-Claude Repetto [via OSGeo.org] <
ml-node+s1560n5047904h80 at n6.nabble.com>

> Le 18/04/2013 10:13, tanasko a ?crit :
> > I did everything according to the instructions from this link:
> >
> http://wiki.openstreetmap.org/wiki/ECW#Howto_install_gdal_with_ECW_support
>
> The libecwj2-3.3-wcharfix.patch patch is missing on this page.
>
> _______________________________________________
> gdal-dev mailing list
> [hidden email] <http://user/SendEmail.jtp?type=node&node=5047904&i=0>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1560.x6.nabble.com/ECW-support-on-Fedora-Linux-error-tp4991388p5047904.html
>  To unsubscribe from ECW support on Fedora Linux - error, click here<http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=4991388&code=dGFubmFza29AZ21haWwuY29tfDQ5OTEzODh8LTExNzgzMTI0NDA=>
> .
> NAML<http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ECW-support-on-Fedora-Linux-error-tp4991388p5047905.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130418/26d3af48/attachment-0001.html>

From even.rouault at mines-paris.org  Thu Apr 18 04:11:15 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 18 Apr 2013 13:11:15 +0200
Subject: [gdal-dev] 1.10 Issues with Geocing API and OSM Driver
In-Reply-To: <CALqbEi5vp8U6-aQH9qZWDqERdXUdZGFsdi5s7uvHnMLSOKm8rQ@mail.gmail.com>
References: <CALqbEi5vp8U6-aQH9qZWDqERdXUdZGFsdi5s7uvHnMLSOKm8rQ@mail.gmail.com>
Message-ID: <1366283475.516fd4d320b51@imp.free.fr>

Selon Dennis Gocke <dengo at gmx.net>:

> Hi,
>
> I?ve encountered some issues. My tests are done with the latest 1.10
> version.
>
> The first issue is related to the new Geocoding API. Great work btw.
>
> When using the MAPQUEST_NOMINATIM or GEONAMES service only the first
> feature in the resulting layer gets a geometry. The other features only
> report NULL as geometry. I think there might be a bug. When using the
> OSM_NOMINATIM service all features have geometries.

Could you point to a specific request you've issued ?

>
> The other two services, that are hardcoded, don?t seem to work at all. But
> this is probably known and more of an issue on the server side. Calling
> OGRGeocode on a YAHOO session produces the error ?Line 17: Didn't find
> expected '=' for value of attribute '/'.?

Yahoo has retired their free service after the support for it had been added. It
might still survive as a paying service however

 When using BING OGRGeocode does
> not produce an error but the returned Layer is just NULL.

Could you point to a specific request you've issued ?

>
> The other issue is with reading an OSM file.
>
> Firstly I have some questions regarding the interleaved reading.
>
> For the driver to work with larger OSM files, the config option
> OGR_INTERLEAVED_READING should be set and the interleaved reading scheme
> should be used, correct?

Yes. If you define OGR_INTERLEAVED_READING to YES, then you should apply the
pattern given in the "Interleaved reading" paragraph of
http://gdal.org/ogr/drv_osm.html

>
> Are there other drivers that would benefit from the interleaved reading
> scheme?

The GML driver has a similar capability. See "Performance issues with large
multi-layer GML files" section of http://gdal.org/ogr/drv_gml.html

>
> Does this config option affect other drivers at all?

No

>
> Currently I only use the interleaved reading and set this config option
> only temporarily while reading the OSM file.
>
> The issue I?m having is that I sometimes get a Failure on GetNextFeature
> like ?Too many members referenced in relation 32572?. What consequences
> does this failure have?

Interesting. This means that your OSM file has a <relation> with more than 2000
<member> in it, which is documented as something that should be avoided
(http://wiki.openstreetmap.org/wiki/Relation indicates 300 as the recommanded
max size, and the OSM XML parser currently implements a limit of 2000). How was
that OSM file generated ? Could you create a Trac ticket and share it ?

Anyway, I'll try to see if the limit can be dynamically increased.

>
> If I just continue with the next layer in the interleaved reading scheme
> get more features, but did I miss some features because of the failure?
>
> If anyone is interested I can send a small test file where the failure can
> be reproduced.
>
> And finally I have a small suggestion regarding the osmconf.ini. I think
> the waterway attribute should be default for lines as it usually is
> important to differentiate for rivers ect.
> Something like:
> # keys to report as OGR fields
> attributes=name,highway,waterway,aerialway,barrier,man_made

Could you create a Trac ticket about that ?

>
> Kind regards,
> Dennis
>



From even.rouault at mines-paris.org  Thu Apr 18 04:19:28 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 18 Apr 2013 13:19:28 +0200
Subject: [gdal-dev] Retracting 1.10.0 RC2
Message-ID: <1366283968.516fd6c05bd5b@imp.free.fr>

Hi,

I'm changing my vote to -1 because of the issue reported in
http://trac.osgeo.org/gdal/ticket/5029#comment:23 (a late regression that I've
introduced in ECW/JP2ECW write support with SDK v5).

I'd like to also investigate the issue raised with the OSM read support in
http://lists.osgeo.org/pipermail/gdal-dev/2013-April/035984.html

I'll try to re-issue a RC3 tonight with the fix(es). In the meantime, please
continue with your tests.

Best regards,

Even




From lauramail at iol.it  Thu Apr 18 05:04:08 2013
From: lauramail at iol.it (lauramail at iol.it)
Date: Thu, 18 Apr 2013 14:04:08 +0200 (CEST)
Subject: [gdal-dev] R: Re:  MODIS reprojection
Message-ID: <1412585579.3596631366286648609.JavaMail.actor@webmail12>

Hi Rutger,
thank you for your reply.
The metadata in the HDF show me these bounding box:
EASTBOUNDINGCOORDINATE=36.5436731054265
NORTHBOUNDINGCOORDINATE=43.0619355408597
SOUTHBOUNDINGCOORDINATE=21.8438333503548
WESTBOUNDINGCOORDINATE=6.83616802377613

and the first test has been:
gdal_translate -of Gtiff -co "tfw=yes" -a_ullr WESTBOUNDINGCOORDINATE 
NORTHBOUNDINGCOORDINATE EASTBOUNDINGCOORDINATE SOUTHBOUNDINGCOORDINATE input.
tif temp.tif
gdalwarp -t_srs "+proj=utm +zone=32 +datum=WGS84" temp.tif output.tif

but with bad results. Then I read that in order to geolocate swaths, there is 
a separate product called MOD03 with lat/lon matrix and I tried as my previous 
post. It is not clear for me now  which values should I put here (I copy from 
your reply)
" +a=6371007.181 +b=6371007.181 +units=m +no_defs" -a_ullr 2223901.039333
-3335851.559000 3335851.559000 -4447802.078667"
your coordinates in option -a_ullr are totally different from mine, I guess 
you have them in sinusoidal projection but I do not see anything similar.

Regards,
Laura


>----Messaggio originale----
>Da: kassies at gmail.com
>Data: 18/04/2013 11.10
>A: <gdal-dev at lists.osgeo.org>
>Ogg: Re: [gdal-dev] MODIS reprojection
>
>Hey Laura,
>
>Since the MxD14.A2 products are already projected in the sinusoidal
>projection there is no need to warp using GCP's. Fitting a polynomial
>through some GCP's will always be less accurate then using the projection
>the data is already in.
>
>Somewhere in the metadata in the HDF there should be a boundingbox (corner
>coordinates, in sinusoidal projection) for the specific tile you are using,
>you can then assign these with the projection using gdal_translate. Once
>assigned, you can use gdalwarp in the same way as you already described.
>
>Youre gdal_translate command should look somewhat like this:
>gdal_translate -of "VRT" -a_srs "+proj=sinu +lon_0=0 +x_0=0 +y_0=0
>+a=6371007.181 +b=6371007.181 +units=m +no_defs" -a_ullr 2223901.039333
>-3335851.559000 3335851.559000 -4447802.078667 <input HDF subdataset>
><output vrt file>
>
>You can get the correct subdataset reference by running gdalinfo on you HDF.
>The coordinates i used are for tile h20v12, so make sure you use the ones
>from your tile. I used a vrt as output which you can use as an input for
>gdal_translate, but its also fine to use Geotiff or anything else you
>prefer.
>
>Hope this helps.
>
>Regards,
>Rutger
>
>
>
>
>
>
>
>
>
>
>--
>View this message in context: http://osgeo-org.1560.x6.nabble.com/MODIS-
reprojection-tp5047700p5047887.html
>Sent from the GDAL - Dev mailing list archive at Nabble.com.
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From kassies at gmail.com  Thu Apr 18 05:27:33 2013
From: kassies at gmail.com (Rutger)
Date: Thu, 18 Apr 2013 05:27:33 -0700 (PDT)
Subject: [gdal-dev] R: Re:  MODIS reprojection
In-Reply-To: <1412585579.3596631366286648609.JavaMail.actor@webmail12>
References: <1412585579.3596631366286648609.JavaMail.actor@webmail12>
Message-ID: <1366288053458-5047956.post@n6.nabble.com>

Hey Laura,

The coordinates you found seem to be geographic (latitude/longitude), not
sinusoidal.

The MOD03 file is still unprojected, sometimes referred to as a swath or
granule. It contains the original sensor scans which dont yet have a defined
projection. It should be used only with other, lower level, swath products
like the MOD02HKM, MOD02QKM etc. I cant be used together with your MxD14A2
product. 

The table on this website shows the 'raster type' for most MODIS Land
products:
https://lpdaac.usgs.gov/products/modis_products_table

Your higher level product is already projected (Sinusoidal tiles). I have
downloaded a MYD14A2 hdf and somewhere (with gdalinfo towards the end) there
should be two tags like:

UpperLeftPointMtrs=(1111950.519667,5559752.598333)
LowerRightMtrs=(2223901.039333,4447802.078667)

These are for tile h19v04. If you mention which tile you are using, or point
me to a file (on ftp://e4ftl01.cr.usgs.gov/MOLA/MYD14A2.005/), i wouldnt
mind looking it up for you. Although for your own confidence it would good
if you can replicate it yourself.

Let me know how it works out.

Regards,
Rutger





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-R-Re-MODIS-reprojection-tp5047949p5047956.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From dengo at gmx.net  Thu Apr 18 07:04:50 2013
From: dengo at gmx.net (Dennis Gocke)
Date: Thu, 18 Apr 2013 16:04:50 +0200
Subject: [gdal-dev] 1.10 Issues with Geocing API and OSM Driver
In-Reply-To: <1366283475.516fd4d320b51@imp.free.fr>
References: <CALqbEi5vp8U6-aQH9qZWDqERdXUdZGFsdi5s7uvHnMLSOKm8rQ@mail.gmail.com>
	<1366283475.516fd4d320b51@imp.free.fr>
Message-ID: <CALqbEi5dtf9RzkCeq7Ve4cy8TPRRG15W9fEJ_5QhNu5S=wDp_w@mail.gmail.com>

Thanks for the information Even.

I have created two tickets related to the OSM Driver issues.


Regarding the problems with the geocoding services.
It isn't really query dependant. A specific service behaves the same for
all queries I tested.

Anyway here is how it can be reproduced:

MAPQUEST:
session = OGRGeocodeCreateSession({"SERVICE=MAPQUEST_NOMINATIM"});
layer = OGRGeocode(session, "london", null, null);

-> only first feature in layer has geometry



GEONAMES:
session = OGRGeocodeCreateSession({"SERVICE=GEONAMES", "USERNAME=demo"});
layer = OGRGeocode(session, "london", null, null);

-> only first feature in layer has geometry



BING:
session = OGRGeocodeCreateSession({"SERVICE=BING", "KEY=BingMapsKey"});
layer = OGRGeocode(session, "london", null, null);

-> layer is null and CPLGetLastErrorType does not report any error



Best regards,
Dennis


On Thu, Apr 18, 2013 at 1:11 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Selon Dennis Gocke <dengo at gmx.net>:
>
> > Hi,
> >
> > I ve encountered some issues. My tests are done with the latest 1.10
> > version.
> >
> > The first issue is related to the new Geocoding API. Great work btw.
> >
> > When using the MAPQUEST_NOMINATIM or GEONAMES service only the first
> > feature in the resulting layer gets a geometry. The other features only
> > report NULL as geometry. I think there might be a bug. When using the
> > OSM_NOMINATIM service all features have geometries.
>
> Could you point to a specific request you've issued ?
>
> >
> > The other two services, that are hardcoded, don t seem to work at all.
> But
> > this is probably known and more of an issue on the server side. Calling
> > OGRGeocode on a YAHOO session produces the error  Line 17: Didn't find
> > expected '=' for value of attribute '/'.
>
> Yahoo has retired their free service after the support for it had been
> added. It
> might still survive as a paying service however
>
>  When using BING OGRGeocode does
> > not produce an error but the returned Layer is just NULL.
>
> Could you point to a specific request you've issued ?
>
> >
> > The other issue is with reading an OSM file.
> >
> > Firstly I have some questions regarding the interleaved reading.
> >
> > For the driver to work with larger OSM files, the config option
> > OGR_INTERLEAVED_READING should be set and the interleaved reading scheme
> > should be used, correct?
>
> Yes. If you define OGR_INTERLEAVED_READING to YES, then you should apply
> the
> pattern given in the "Interleaved reading" paragraph of
> http://gdal.org/ogr/drv_osm.html
>
> >
> > Are there other drivers that would benefit from the interleaved reading
> > scheme?
>
> The GML driver has a similar capability. See "Performance issues with large
> multi-layer GML files" section of http://gdal.org/ogr/drv_gml.html
>
> >
> > Does this config option affect other drivers at all?
>
> No
>
> >
> > Currently I only use the interleaved reading and set this config option
> > only temporarily while reading the OSM file.
> >
> > The issue I m having is that I sometimes get a Failure on GetNextFeature
> > like  Too many members referenced in relation 32572 . What consequences
> > does this failure have?
>
> Interesting. This means that your OSM file has a <relation> with more than
> 2000
> <member> in it, which is documented as something that should be avoided
> (http://wiki.openstreetmap.org/wiki/Relation indicates 300 as the
> recommanded
> max size, and the OSM XML parser currently implements a limit of 2000).
> How was
> that OSM file generated ? Could you create a Trac ticket and share it ?
>
> Anyway, I'll try to see if the limit can be dynamically increased.
>
> >
> > If I just continue with the next layer in the interleaved reading scheme
> > get more features, but did I miss some features because of the failure?
> >
> > If anyone is interested I can send a small test file where the failure
> can
> > be reproduced.
> >
> > And finally I have a small suggestion regarding the osmconf.ini. I think
> > the waterway attribute should be default for lines as it usually is
> > important to differentiate for rivers ect.
> > Something like:
> > # keys to report as OGR fields
> > attributes=name,highway,waterway,aerialway,barrier,man_made
>
> Could you create a Trac ticket about that ?
>
> >
> > Kind regards,
> > Dennis
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130418/c5198294/attachment.html>

From etourigny.dev at gmail.com  Thu Apr 18 07:18:30 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 18 Apr 2013 11:18:30 -0300
Subject: [gdal-dev] MODIS reprojection
In-Reply-To: <1366276234994-5047887.post@n6.nabble.com>
References: <1366212547290-5047700.post@n6.nabble.com>
	<1366276234994-5047887.post@n6.nabble.com>
Message-ID: <CA+TxYvNFe0VFJWRDcPGb13h2YjzOTjGijoZ0SQToGxd6X-0Vtg@mail.gmail.com>

I use a similar command, without the -a_ullr argument

e.g.

gdal_translate -a_srs '+proj=sinu +R=6371007.181 +nadgrids=@null +wktext'
<input HDF subdataset> <output tiff file>

On Thu, Apr 18, 2013 at 6:10 AM, Rutger <kassies at gmail.com> wrote:

> Hey Laura,
>
> Since the MxD14.A2 products are already projected in the sinusoidal
> projection there is no need to warp using GCP's. Fitting a polynomial
> through some GCP's will always be less accurate then using the projection
> the data is already in.
>
> Somewhere in the metadata in the HDF there should be a boundingbox (corner
> coordinates, in sinusoidal projection) for the specific tile you are using,
> you can then assign these with the projection using gdal_translate. Once
> assigned, you can use gdalwarp in the same way as you already described.
>
> Youre gdal_translate command should look somewhat like this:
> gdal_translate -of "VRT" -a_srs "+proj=sinu +lon_0=0 +x_0=0 +y_0=0
> +a=6371007.181 +b=6371007.181 +units=m +no_defs" -a_ullr 2223901.039333
> -3335851.559000 3335851.559000 -4447802.078667 <input HDF subdataset>
> <output vrt file>
>
> You can get the correct subdataset reference by running gdalinfo on you
> HDF.
> The coordinates i used are for tile h20v12, so make sure you use the ones
> from your tile. I used a vrt as output which you can use as an input for
> gdal_translate, but its also fine to use Geotiff or anything else you
> prefer.
>
> Hope this helps.
>
> Regards,
> Rutger
>
>
>
>
>
>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/MODIS-reprojection-tp5047700p5047887.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130418/3593f26d/attachment-0001.html>

From lauramail at iol.it  Thu Apr 18 07:24:49 2013
From: lauramail at iol.it (laura0)
Date: Thu, 18 Apr 2013 07:24:49 -0700 (PDT)
Subject: [gdal-dev] R: Re: MODIS reprojection
Message-ID: <1550340974.3709891366295069194.JavaMail.actor@webmail12>

If I try your command I get
ERROR 1: Unable to compute a transformation between pixel/line
and georeferenced coordinates for temp.tif.There is no affine transformation and no GCPs.


----Messaggio originale----

Da: ml-node+s1560n5047999h80 at n6.nabble.com

Data: 18/04/2013 16.18

A: "laura0"<lauramail at iol.it>

Ogg: Re: MODIS reprojection





	I use a similar command, without the -a_ullr argument
e.g.
gdal_translate -a_srs '+proj=sinu +R=6371007.181 +nadgrids=@null +wktext' <input HDF subdataset> <output tiff file>

On Thu, Apr 18, 2013 at 6:10 AM, Rutger <[hidden email]> wrote:

Hey Laura,



Since the MxD14.A2 products are already projected in the sinusoidal

projection there is no need to warp using GCP's. Fitting a polynomial

through some GCP's will always be less accurate then using the projection

the data is already in.



Somewhere in the metadata in the HDF there should be a boundingbox (corner

coordinates, in sinusoidal projection) for the specific tile you are using,

you can then assign these with the projection using gdal_translate. Once

assigned, you can use gdalwarp in the same way as you already described.



Youre gdal_translate command should look somewhat like this:

gdal_translate -of "VRT" -a_srs "+proj=sinu +lon_0=0 +x_0=0 +y_0=0

+a=<a href="tel:6371007.181" value="+556371007181">6371007.181 +b=<a href="tel:6371007.181" value="+556371007181">6371007.181 +units=m +no_defs" -a_ullr 2223901.039333

-3335851.559000 3335851.559000 -4447802.078667 <input HDF subdataset>

<output vrt file>



You can get the correct subdataset reference by running gdalinfo on you HDF.

The coordinates i used are for tile h20v12, so make sure you use the ones

from your tile. I used a vrt as output which you can use as an input for

gdal_translate, but its also fine to use Geotiff or anything else you

prefer.



Hope this helps.



Regards,

Rutger





















--

View this message in context: http://osgeo-org.1560.x6.nabble.com/MODIS-reprojection-tp5047700p5047887.html

Sent from the GDAL - Dev mailing list archive at Nabble.com.

_______________________________________________

gdal-dev mailing list

[hidden email]

http://lists.osgeo.org/mailman/listinfo/gdal-dev




_______________________________________________

gdal-dev mailing list

[hidden email]

http://lists.osgeo.org/mailman/listinfo/gdal-dev

	
	
	
	

	

	
	
		If you reply to this email, your message will be added to the discussion below:
		http://osgeo-org.1560.x6.nabble.com/MODIS-reprojection-tp5047700p5047999.html
	
	
		
		To unsubscribe from MODIS reprojection, click here.

		NAML
	



 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/R-Re-MODIS-reprojection-tp5048000.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130418/0e5e8b4b/attachment.html>

From dmorissette at mapgears.com  Thu Apr 18 07:33:22 2013
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 18 Apr 2013 10:33:22 -0400
Subject: [gdal-dev] Motion: Promote 1.10.0RC2 for release
In-Reply-To: <201304161939.36708.even.rouault@mines-paris.org>
References: <201304161939.36708.even.rouault@mines-paris.org>
Message-ID: <51700432.2010808@mapgears.com>

+0.5 I didn't have a chance to test, but I am very supportive as 
everything seems right.

On 13-04-16 1:39 PM, Even Rouault wrote:
> Motion: GDAL/OGR 1.10.0RC2 is promoted to be the official 1.10.0 final release.
>
> ---
>
> No issue has been specifically reported on RC2 so far, so I invite PSC members
> to vote on this motion after doing your own testing and validation. Input from
> everyone else who can test it is also very welcome.
>
> I'll start the voting with my :
>
> +1 Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From kassies at gmail.com  Thu Apr 18 08:10:39 2013
From: kassies at gmail.com (Rutger)
Date: Thu, 18 Apr 2013 08:10:39 -0700 (PDT)
Subject: [gdal-dev] MODIS reprojection
In-Reply-To: <CA+TxYvNFe0VFJWRDcPGb13h2YjzOTjGijoZ0SQToGxd6X-0Vtg@mail.gmail.com>
References: <1366212547290-5047700.post@n6.nabble.com>
	<1366276234994-5047887.post@n6.nabble.com>
	<CA+TxYvNFe0VFJWRDcPGb13h2YjzOTjGijoZ0SQToGxd6X-0Vtg@mail.gmail.com>
Message-ID: <1366297839492-5048019.post@n6.nabble.com>

Hey,


Etienne Tourigny-3 wrote
> I use a similar command, without the -a_ullr argument

And does it then capture the correct corner coordinates? If i run your
command it does assign the sinusoidal projection, but takes the pixel
coordinates (eg 0-2048) as the corner coordinates instead of the sinusoidal
ones. 

@Laura, 
Indeed we are talking about different products, sorry for the confusion. You
mentioned in your first email the products MYD14.A2 and MOD14.A2. I thought
you meant the "MYD14 A2" product, but you attached a "MYD14" product, which
is different. Its obvious where the confusion comes from. :)

These are all the fire products:
MYD14 	Aqua 	Thermal Anomalies & Fire 	Swath 	1000m 	5 min
MOD14A2 	Terra 	Thermal Anomalies & Fire 	Tile 	1000m 	8 day
MYD14A2 	Aqua 	Thermal Anomalies & Fire 	Tile 	1000m 	8 day
MOD14A1 	Terra 	Thermal Anomalies & Fire 	Tile 	1000m 	Daily
MYD14A1 	Aqua 	Thermal Anomalies & Fire 	Tile 	1000m 	Daily
MOD14 	Terra 	Thermal Anomalies & Fire 	Swath 	1000m 	5 min

The "MOD14" & "MYD14" products are indeed swath, and should be used together
with the MOD03 with the same timestamp. 

I think the best way to process them is by using "MRT Swath" which you can
download at:
https://lpdaac.usgs.gov/tools

MRT Swath is way beyond the scope of this mailing list, but feel free to
send me a direct email about it if you have questions.

I have used Pyresample as an alternative which works very well, but requires
the use of Python:
http://code.google.com/p/pyresample/

To end with an actual GDAL related solution, there is an option to warp an
image using gdalwarp and so-called "geolocation arrays". I can get it to
work with the MODIS swaths, but i dont like the results at all. It is
previously discussed at:
http://osgeo-org.1560.x6.nabble.com/gdal-dev-reproject-python-numpy-binary-swath-lat-lon-td4978609.html

The MODIS swath products arent equally gridded and still contain what is
called the 'bow-tie' effect. (overlapping scans at high zenith angles). I
dont know if the GDAL geoloc option is supposed to handle this properly. The
image a posted earlier in the thread mentioned above clearly shows artifacts
which i cannot explain or resolve. 


Regards,
Rutger



 




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/MODIS-reprojection-tp5047700p5048019.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From etourigny.dev at gmail.com  Thu Apr 18 10:55:32 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 18 Apr 2013 14:55:32 -0300
Subject: [gdal-dev] MODIS reprojection
In-Reply-To: <1366297839492-5048019.post@n6.nabble.com>
References: <1366212547290-5047700.post@n6.nabble.com>
	<1366276234994-5047887.post@n6.nabble.com>
	<CA+TxYvNFe0VFJWRDcPGb13h2YjzOTjGijoZ0SQToGxd6X-0Vtg@mail.gmail.com>
	<1366297839492-5048019.post@n6.nabble.com>
Message-ID: <CA+TxYvMRuMGmnPwssPWe0jw9vSS0fQS_=Oszf2QDLkYNfLCo_w@mail.gmail.com>

On Thu, Apr 18, 2013 at 12:10 PM, Rutger <kassies at gmail.com> wrote:

> Hey,
>
>
> Etienne Tourigny-3 wrote
> > I use a similar command, without the -a_ullr argument
>
> And does it then capture the correct corner coordinates? If i run your
> command it does assign the sinusoidal projection, but takes the pixel
> coordinates (eg 0-2048) as the corner coordinates instead of the sinusoidal
> ones.
>

Actually, I used this with the level-3 tiled products  such as MCD12Q1 or
MCD45A1. Never tried with level-2 or swath products.
Yes the corners are fine, I can convert a few of them to WGS84 and then
stitch them together with gdalwarp.

Etienne


> @Laura,
> Indeed we are talking about different products, sorry for the confusion.
> You
> mentioned in your first email the products MYD14.A2 and MOD14.A2. I thought
> you meant the "MYD14 A2" product, but you attached a "MYD14" product, which
> is different. Its obvious where the confusion comes from. :)
>
> These are all the fire products:
> MYD14   Aqua    Thermal Anomalies & Fire        Swath   1000m   5 min
> MOD14A2         Terra   Thermal Anomalies & Fire        Tile    1000m   8
> day
> MYD14A2         Aqua    Thermal Anomalies & Fire        Tile    1000m   8
> day
> MOD14A1         Terra   Thermal Anomalies & Fire        Tile    1000m
> Daily
> MYD14A1         Aqua    Thermal Anomalies & Fire        Tile    1000m
> Daily
> MOD14   Terra   Thermal Anomalies & Fire        Swath   1000m   5 min
>
> The "MOD14" & "MYD14" products are indeed swath, and should be used
> together
> with the MOD03 with the same timestamp.
>
> I think the best way to process them is by using "MRT Swath" which you can
> download at:
> https://lpdaac.usgs.gov/tools
>
> MRT Swath is way beyond the scope of this mailing list, but feel free to
> send me a direct email about it if you have questions.
>
> I have used Pyresample as an alternative which works very well, but
> requires
> the use of Python:
> http://code.google.com/p/pyresample/
>
> To end with an actual GDAL related solution, there is an option to warp an
> image using gdalwarp and so-called "geolocation arrays". I can get it to
> work with the MODIS swaths, but i dont like the results at all. It is
> previously discussed at:
>
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-reproject-python-numpy-binary-swath-lat-lon-td4978609.html
>
> The MODIS swath products arent equally gridded and still contain what is
> called the 'bow-tie' effect. (overlapping scans at high zenith angles). I
> dont know if the GDAL geoloc option is supposed to handle this properly.
> The
> image a posted earlier in the thread mentioned above clearly shows
> artifacts
> which i cannot explain or resolve.
>
>
> Regards,
> Rutger
>
>
>
>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/MODIS-reprojection-tp5047700p5048019.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130418/0115def9/attachment.html>

From even.rouault at mines-paris.org  Thu Apr 18 12:19:32 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 18 Apr 2013 21:19:32 +0200
Subject: [gdal-dev] 1.10 Issues with Geocing API and OSM Driver
In-Reply-To: <CALqbEi5dtf9RzkCeq7Ve4cy8TPRRG15W9fEJ_5QhNu5S=wDp_w@mail.gmail.com>
References: <CALqbEi5vp8U6-aQH9qZWDqERdXUdZGFsdi5s7uvHnMLSOKm8rQ@mail.gmail.com>
	<1366283475.516fd4d320b51@imp.free.fr>
	<CALqbEi5dtf9RzkCeq7Ve4cy8TPRRG15W9fEJ_5QhNu5S=wDp_w@mail.gmail.com>
Message-ID: <201304182119.32513.even.rouault@mines-paris.org>

Le jeudi 18 avril 2013 16:04:50, Dennis Gocke a ?crit :
> Thanks for the information Even.
> 
> I have created two tickets related to the OSM Driver issues.
> 
> 
> Regarding the problems with the geocoding services.
> It isn't really query dependant. A specific service behaves the same for
> all queries I tested.
> 
> Anyway here is how it can be reproduced:
> 
> MAPQUEST:
> session = OGRGeocodeCreateSession({"SERVICE=MAPQUEST_NOMINATIM"});
> layer = OGRGeocode(session, "london", null, null);
> 
> -> only first feature in layer has geometry
> 
> 
> 
> GEONAMES:
> session = OGRGeocodeCreateSession({"SERVICE=GEONAMES", "USERNAME=demo"});
> layer = OGRGeocode(session, "london", null, null);
> 
> -> only first feature in layer has geometry
> 
> 
> 
> BING:
> session = OGRGeocodeCreateSession({"SERVICE=BING", "KEY=BingMapsKey"});
> layer = OGRGeocode(session, "london", null, null);
> 
> -> layer is null and CPLGetLastErrorType does not report any error
> 

I've created http://trac.osgeo.org/gdal/ticket/5057.

Issue confirmed (and fixed) for OSM_NOMINATIM, MAPQUEST_NOMINATIM and GEONAMES. 
But for BING, I get a non-NULL layer with my trial key... My hypothesis is 
that your key is wrong ?


From dengo at gmx.net  Thu Apr 18 12:58:03 2013
From: dengo at gmx.net (Dennis Gocke)
Date: Thu, 18 Apr 2013 21:58:03 +0200
Subject: [gdal-dev] 1.10 Issues with Geocing API and OSM Driver
In-Reply-To: <201304182119.32513.even.rouault@mines-paris.org>
References: <CALqbEi5vp8U6-aQH9qZWDqERdXUdZGFsdi5s7uvHnMLSOKm8rQ@mail.gmail.com>
	<1366283475.516fd4d320b51@imp.free.fr>
	<CALqbEi5dtf9RzkCeq7Ve4cy8TPRRG15W9fEJ_5QhNu5S=wDp_w@mail.gmail.com>
	<201304182119.32513.even.rouault@mines-paris.org>
Message-ID: <CALqbEi60TXyUbAY=xggi6FeCdD7dQKxyc2kTXmm+iOgzimfs=A@mail.gmail.com>

Great work Even.

Yes, you are right with the BING service. I did not use the correct key.
But perhaps it would be good to have some kind of error message in this
case.

Cheers,
Dennis


On Thu, Apr 18, 2013 at 9:19 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le jeudi 18 avril 2013 16:04:50, Dennis Gocke a ?crit :
> > Thanks for the information Even.
> >
> > I have created two tickets related to the OSM Driver issues.
> >
> >
> > Regarding the problems with the geocoding services.
> > It isn't really query dependant. A specific service behaves the same for
> > all queries I tested.
> >
> > Anyway here is how it can be reproduced:
> >
> > MAPQUEST:
> > session = OGRGeocodeCreateSession({"SERVICE=MAPQUEST_NOMINATIM"});
> > layer = OGRGeocode(session, "london", null, null);
> >
> > -> only first feature in layer has geometry
> >
> >
> >
> > GEONAMES:
> > session = OGRGeocodeCreateSession({"SERVICE=GEONAMES", "USERNAME=demo"});
> > layer = OGRGeocode(session, "london", null, null);
> >
> > -> only first feature in layer has geometry
> >
> >
> >
> > BING:
> > session = OGRGeocodeCreateSession({"SERVICE=BING", "KEY=BingMapsKey"});
> > layer = OGRGeocode(session, "london", null, null);
> >
> > -> layer is null and CPLGetLastErrorType does not report any error
> >
>
> I've created http://trac.osgeo.org/gdal/ticket/5057.
>
> Issue confirmed (and fixed) for OSM_NOMINATIM, MAPQUEST_NOMINATIM and
> GEONAMES.
> But for BING, I get a non-NULL layer with my trial key... My hypothesis is
> that your key is wrong ?
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130418/8e5ae9cf/attachment.html>

From even.rouault at mines-paris.org  Thu Apr 18 13:26:06 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 18 Apr 2013 22:26:06 +0200
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 3 available
Message-ID: <201304182226.07009.even.rouault@mines-paris.org>

Hi,

I've prepared a third (and hopefully last) release candidate for GDAL/OGR 
1.10.0.

The fixes added since RC2 are :
#5029: Fixed problem with JP2 write with ECW SDK 5.0
#5055: OSM driver: Too many members referenced
#5056: OSM waterway
#5057: Geocoder only reports geometry on first feature

Please test and report any problems promptly. Soon I will initiate a motion to 
declare this release candidate the final release and PSC members can vote on 
that after doing some checks themselves.

Source Code:
  http://download.osgeo.org/gdal/gdal-1.10.0RC3.tar.gz
  http://download.osgeo.org/gdal/gdal-1.10.0RC3.tar.gz.md5
  http://download.osgeo.org/gdal/gdal1100RC3.zip
  http://download.osgeo.org/gdal/gdal1100RC3.zip.md5

Autotest Suite:
  http://download.osgeo.org/gdal/gdalautotest-1.10.0.tar.gz

Documentation:
  http://download.osgeo.org/gdal/gdal1100doc.zip

NEWS:
  http://svn.osgeo.org/gdal/tags/1.10.0/gdal/NEWS

Best regards,

Even

From gcpp.kalxas at gmail.com  Thu Apr 18 16:18:49 2013
From: gcpp.kalxas at gmail.com (Angelos Tzotsos)
Date: Fri, 19 Apr 2013 02:18:49 +0300
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 3 available
In-Reply-To: <201304182226.07009.even.rouault@mines-paris.org>
References: <201304182226.07009.even.rouault@mines-paris.org>
Message-ID: <51707F59.6030107@gmail.com>

Hi,

Testing rpm binaries for openSUSE are available here:
https://build.opensuse.org/package/show?package=libgdal&project=home%3Atzotsos%3AApplication%3AGeo

repository:
http://download.opensuse.org/repositories/home:/tzotsos:/Application:/Geo/

As long as there is a final release this will replace
https://build.opensuse.org/package/show?package=libgdal&project=Application%3AGeo
and will be available on CentOS, RHEL, SLE, openSUSE and ScientificLinux.

Cheers,
Angelos

On 04/18/2013 11:26 PM, Even Rouault wrote:
> Hi,
>
> I've prepared a third (and hopefully last) release candidate for GDAL/OGR
> 1.10.0.
>
> The fixes added since RC2 are :
> #5029: Fixed problem with JP2 write with ECW SDK 5.0
> #5055: OSM driver: Too many members referenced
> #5056: OSM waterway
> #5057: Geocoder only reports geometry on first feature
>
> Please test and report any problems promptly. Soon I will initiate a motion to
> declare this release candidate the final release and PSC members can vote on
> that after doing some checks themselves.
>
> Source Code:
>    http://download.osgeo.org/gdal/gdal-1.10.0RC3.tar.gz
>    http://download.osgeo.org/gdal/gdal-1.10.0RC3.tar.gz.md5
>    http://download.osgeo.org/gdal/gdal1100RC3.zip
>    http://download.osgeo.org/gdal/gdal1100RC3.zip.md5
>
> Autotest Suite:
>    http://download.osgeo.org/gdal/gdalautotest-1.10.0.tar.gz
>
> Documentation:
>    http://download.osgeo.org/gdal/gdal1100doc.zip
>
> NEWS:
>    http://svn.osgeo.org/gdal/tags/1.10.0/gdal/NEWS
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Angelos Tzotsos
Remote Sensing Laboratory
National Technical University of Athens
http://users.ntua.gr/tzotsos


From emmanuel.sambale at gmail.com  Thu Apr 18 19:46:21 2013
From: emmanuel.sambale at gmail.com (maning sambale)
Date: Fri, 19 Apr 2013 10:46:21 +0800
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 3 available
In-Reply-To: <201304182226.07009.even.rouault@mines-paris.org>
References: <201304182226.07009.even.rouault@mines-paris.org>
Message-ID: <CAPzumuGtE6J_hxiPbnbgaabobOWtVZtaBwXstwM=ZqQE4HsDJA@mail.gmail.com>

Dear Even,

On Fri, Apr 19, 2013 at 4:26 AM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> #5056: OSM waterway
One issue with adding waterway as lines is that the tag
waterway=riverbank is usually for polygon and multi-polygons
(relations).
Is there a way within the osmconf.ini for instance to limit to a
specific key:value pair like waterway=riverbank as multipolygon?


--
cheers,
maning
------------------------------------------------------
"Freedom is still the most radical idea of all" -N.Branden
wiki: http://esambale.wikispaces.com/
blog: http://epsg4253.wordpress.com/
------------------------------------------------------

From jukka.rahkonen at mmmtike.fi  Fri Apr 19 02:20:22 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 19 Apr 2013 09:20:22 +0000 (UTC)
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 3 available
References: <201304182226.07009.even.rouault@mines-paris.org>
	<CAPzumuGtE6J_hxiPbnbgaabobOWtVZtaBwXstwM=ZqQE4HsDJA@mail.gmail.com>
Message-ID: <loom.20130419T084253-981@post.gmane.org>

maning sambale <emmanuel.sambale <at> gmail.com> writes:

> 
> Dear Even,
> 
> On Fri, Apr 19, 2013 at 4:26 AM, Even Rouault
> <even.rouault <at> mines-paris.org> wrote:
> > #5056: OSM waterway
> One issue with adding waterway as lines is that the tag
> waterway=riverbank is usually for polygon and multi-polygons
> (relations).
> Is there a way within the osmconf.ini for instance to limit to a
> specific key:value pair like waterway=riverbank as multipolygon?

Tags are set for each OSM layer (points, lines, multipolygons,
multilinestrings and other_relations) individually in osmconf.ini. Including
waterway in the tags for the lines layer does not change waterway=riverbank
into lines if they are modeled as polygons in OSM data. They won't appear in
the multipolygons layer either without adding the waterway tag also into the
multipolygons section in the osmconf.ini.

I guess it would be hard to handle special rules for individual tag=value
combinations in the osmconf.ini file without making it as messy as the
OpenStreetMap map features wiki. Fortunately they can be handled nicely by
utilizing OGR SQL support but that may not be ideal for some automated
processes.

-Jukka Rahkonen-



From max at geoinova.com  Fri Apr 19 04:05:57 2013
From: max at geoinova.com (Maksim Sestic)
Date: Fri, 19 Apr 2013 04:05:57 -0700 (PDT)
Subject: [gdal-dev] GDAL Dataset to .NET Bitmap - PixelFormat issue
Message-ID: <1366369557431-5048271.post@n6.nabble.com>

Hi all,

I'm wodering whether it's possible to compute a proper
System.Drawing.PixelFormat out of GDAL Dataset. I'm also aware of existing
C# examples, but they won't allow for pinpointing specific PixelFormats.
Please see attached 3 different RGB bitmaps: 16-bit, 24-bit and 32-bit. Is
it possible to tell the difference by inspecting the GDAL Dataset?

output_16bpp_gs.bmp
<http://osgeo-org.1560.x6.nabble.com/file/n5048271/output_16bpp_gs.bmp>  
output_24bpp_rgb.bmp
<http://osgeo-org.1560.x6.nabble.com/file/n5048271/output_24bpp_rgb.bmp>  
output_32bpp_rgb.bmp
<http://osgeo-org.1560.x6.nabble.com/file/n5048271/output_32bpp_rgb.bmp>  

Regards,
Maksim Sestic



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/GDAL-Dataset-to-NET-Bitmap-PixelFormat-issue-tp5048271.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jmckenna at gatewaygeomatics.com  Fri Apr 19 06:13:27 2013
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri, 19 Apr 2013 10:13:27 -0300
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 3 available
In-Reply-To: <201304182226.07009.even.rouault@mines-paris.org>
References: <201304182226.07009.even.rouault@mines-paris.org>
Message-ID: <517142F7.4090301@gatewaygeomatics.com>

On 2013-04-18 5:26 PM, Even Rouault wrote:
> Hi,
> 
> I've prepared a third (and hopefully last) release candidate for GDAL/OGR 
> 1.10.0.

Good on Windows.

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/

From even.rouault at mines-paris.org  Fri Apr 19 11:41:48 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 19 Apr 2013 20:41:48 +0200
Subject: [gdal-dev] Motion: Promote 1.10.0RC3 for release
Message-ID: <201304192041.48855.even.rouault@mines-paris.org>

Motion: GDAL/OGR 1.10.0RC3 is promoted to be the official 1.10.0 final release.

---

No issue has been specifically reported on RC3 so far (*), so I invite PSC 
members to vote on this motion after doing your own testing and validation. 

I'll start the voting with my :

+1 Even

(*) To be exact, http://trac.osgeo.org/gdal/ticket/5058 has been reported, but 
I couldn't reproduce.

From even.rouault at mines-paris.org  Fri Apr 19 14:02:01 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 19 Apr 2013 23:02:01 +0200
Subject: [gdal-dev] Retracting 1.10.0 RC3
Message-ID: <201304192302.01590.even.rouault@mines-paris.org>

Hi,

Sorry for the spam... Actually, I'm changing my vote to -1 because the issue 
reported in http://trac.osgeo.org/gdal/ticket/5058 is in fact reproducable and 
a regression.

I'll re-issue a RC4 with the fix later.

Best regards,

Even

From even.rouault at mines-paris.org  Fri Apr 19 14:41:17 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 19 Apr 2013 23:41:17 +0200
Subject: [gdal-dev] Motion: Promote 1.10.0RC4 for release
Message-ID: <201304192341.17680.even.rouault@mines-paris.org>

Motion: GDAL/OGR 1.10.0RC4 is promoted to be the official 1.10.0 final release.

---

I'll start the voting again with my :

+1 Even

---

#5058 is now fixed and is the only change w.r.t. RC3, so I'm both announcing 
the availability of RC4 and inviting PSC members to vote on this motion.

Source Code:
  http://download.osgeo.org/gdal/gdal-1.10.0RC4.tar.gz
  http://download.osgeo.org/gdal/gdal-1.10.0RC4.tar.gz.md5
  http://download.osgeo.org/gdal/gdal1100RC4.zip
  http://download.osgeo.org/gdal/gdal1100RC4.zip.md5

Autotest Suite:
  http://download.osgeo.org/gdal/gdalautotest-1.10.0.tar.gz

Documentation:
  http://download.osgeo.org/gdal/gdal1100doc.zip

NEWS:
  http://svn.osgeo.org/gdal/tags/1.10.0/gdal/NEWS

From hobu.inc at gmail.com  Fri Apr 19 14:47:57 2013
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri, 19 Apr 2013 16:47:57 -0500
Subject: [gdal-dev] Motion: Promote 1.10.0RC4 for release
In-Reply-To: <201304192341.17680.even.rouault@mines-paris.org>
References: <201304192341.17680.even.rouault@mines-paris.org>
Message-ID: <C62EA18A-EEFE-4569-B0E9-E6B0A21296EF@gmail.com>


On Apr 19, 2013, at 4:41 PM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Motion: GDAL/OGR 1.10.0RC4 is promoted to be the official 1.10.0 final release.
> 
> ---
> 
> I'll start the voting again with my :
> 
> +1 Even

+ 1 Howard

Thanks so much for continuing to propel GDAL forward. Your hard work is very much appreciated.

Howard

From raghavendra at vizexperts.com  Fri Apr 19 21:47:39 2013
From: raghavendra at vizexperts.com (ryagz)
Date: Fri, 19 Apr 2013 21:47:39 -0700 (PDT)
Subject: [gdal-dev] Merge overviews from multiple files
Message-ID: <1366433259575-5048389.post@n6.nabble.com>

Hi,

I have downloaded some raster data which has given me overview levels as
different tiff files, how can i merge them into a single tiff file. so that
when i load that file with gdal proper overviews are picked.

Ryagz



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Merge-overviews-from-multiple-files-tp5048389.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From eadam at co.lincoln.or.us  Sat Apr 20 09:19:14 2013
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Sat, 20 Apr 2013 09:19:14 -0700
Subject: [gdal-dev] Merge overviews from multiple files
In-Reply-To: <1366433259575-5048389.post@n6.nabble.com>
References: <1366433259575-5048389.post@n6.nabble.com>
Message-ID: <CACqBkM-BfOC5UyMWwW7rXxB6F8+iQ_SsDXUGG3=-Y52Sr+gBfA@mail.gmail.com>

On Fri, Apr 19, 2013 at 9:47 PM, ryagz <raghavendra at vizexperts.com> wrote:

> Hi,
>
> I have downloaded some raster data which has given me overview levels as
> different tiff files, how can i merge them into a single tiff file. so that
> when i load that file with gdal proper overviews are picked.
>

If your files are named file.tif, file.tif.ovr, file.tif.ovr.ovr, etc I
think that GDAL will automatically read the overviews.  gdalinfo file.tif
will show if GDAL reports the presence of the overviews.

A VRT could be used to combine the various files then gdal_translate that.
gdal_translate with COPY_SRC_OVERVIEWS=YES could create a single tif with
the overviews (more details, http://www.gdal.org/frmt_gtiff.html).  I'm not
sure if COPY_SRC_OVERVIEWS will work on external overviews.

Eli



>
> Ryagz
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Merge-overviews-from-multiple-files-tp5048389.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130420/2a304965/attachment.html>

From dasfabirad at gmail.com  Sun Apr 21 01:33:03 2013
From: dasfabirad at gmail.com (lanufabi)
Date: Sun, 21 Apr 2013 01:33:03 -0700 (PDT)
Subject: [gdal-dev] ECW support on Fedora Linux - error
In-Reply-To: <CAAJeQgvk0nhxhN_-19fM7VFucDtoS0uTwcmM2dborvgEtSgZ9A@mail.gmail.com>
References: <1343399620972-4991388.post@n6.nabble.com>
	<1347381748551-5001142.post@n6.nabble.com>
	<CA+rY5eKjyhVm_U6saYJ-QdSqpLFMW+ihrpJZ_PKso5UW9hf09w@mail.gmail.com>
	<5050ED7A.6030109@gatewaygeomatics.com>
	<1366267156093-5047841.post@n6.nabble.com>
	<1366270727114-5047862.post@n6.nabble.com>
	<CAAJeQgsxEUz5XV4Tuu_GCEpTz1Nn=TqbsieZA+Jxx-aJ9t4ZxA@mail.gmail.com>
	<516FC4A0.4080002@free.fr>
	<CAAJeQgvk0nhxhN_-19fM7VFucDtoS0uTwcmM2dborvgEtSgZ9A@mail.gmail.com>
Message-ID: <1366533183978-5048546.post@n6.nabble.com>

 Hey,
at the moment I haven't enough time. I will try to give instructions next
days.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/ECW-support-on-Fedora-Linux-error-tp4991388p5048546.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From sfkeller at gmail.com  Sun Apr 21 08:49:28 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun, 21 Apr 2013 17:49:28 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write FileGDB
In-Reply-To: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
Message-ID: <CAFcOn28pg176ZAgOZ-4Aow+Ri7U6U1OR8k2MiDorpx4nfu0vPw@mail.gmail.com>

When trying to use ogr2ogr (ver. 1.9) to convert a Shapefile (geometry type
Polygon) to file geodatabase (FileGDB) I'm getting an error like "FGDB
layers cannot be created with a wkbUnknown layer geometry type.":

$ ogr2ogr -f filegdb out.gdb polygon.shp

When adding -nlt it seems to work:

$ ogr2ogr -f filegdb out.gdb polygon.shp -nlt POLYGON

This is to a) an usual OGR behavior, and b) a show stopper for my script
because I don't know before hand (and won't check with ogrinfo) what
geometry type the input source is. Seems like there is a problem in the
FileGDB driver.

Can anybody confirm and explain this bug?

Yours, Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130421/4bea1b4d/attachment.html>

From even.rouault at mines-paris.org  Sun Apr 21 08:56:53 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 21 Apr 2013 17:56:53 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write
	FileGDB
In-Reply-To: <CAFcOn28pg176ZAgOZ-4Aow+Ri7U6U1OR8k2MiDorpx4nfu0vPw@mail.gmail.com>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<CAFcOn28pg176ZAgOZ-4Aow+Ri7U6U1OR8k2MiDorpx4nfu0vPw@mail.gmail.com>
Message-ID: <201304211756.53827.even.rouault@mines-paris.org>

Le dimanche 21 avril 2013 17:49:28, Stefan Keller a ?crit :
> When trying to use ogr2ogr (ver. 1.9) to convert a Shapefile (geometry type
> Polygon) to file geodatabase (FileGDB) I'm getting an error like "FGDB
> layers cannot be created with a wkbUnknown layer geometry type.":
> 
> $ ogr2ogr -f filegdb out.gdb polygon.shp
> 
> When adding -nlt it seems to work:
> 
> $ ogr2ogr -f filegdb out.gdb polygon.shp -nlt POLYGON
> 
> This is to a) an usual OGR behavior, and b) a show stopper for my script
> because I don't know before hand (and won't check with ogrinfo) what
> geometry type the input source is. Seems like there is a problem in the
> FileGDB driver.
> 
> Can anybody confirm and explain this bug?

Stefan,

I don't confirm that behaviour with either 1.9.2 or 1.10.0. Conversion works 
fine for me without specifying -nlt. What is the geometry type reported by 
ogrinfo on polygon.shp ?

Even

From sfkeller at gmail.com  Sun Apr 21 10:10:49 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun, 21 Apr 2013 19:10:49 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write
	FileGDB
In-Reply-To: <201304211756.53827.even.rouault@mines-paris.org>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<CAFcOn28pg176ZAgOZ-4Aow+Ri7U6U1OR8k2MiDorpx4nfu0vPw@mail.gmail.com>
	<201304211756.53827.even.rouault@mines-paris.org>
Message-ID: <CAFcOn2_rB-+Ozvq6fup2UTdq0qCb6EcpTi_02491ogeJ3Hd_dA@mail.gmail.com>

Many thanks for the quick reply, Even!

You're right, it seems to work with Shapefile - but not for the WFS reader
(and own server) we are testing...

Below you find the GML output of our WFS source.

So is the "fault" in the WFS reader - or even in our WFS Response XML?

Yours, Stefan


Testing OpenPOIMap WFS Service
--------------------------------------------------

Get all hostels of Switzerland from OpenStreetMap database
("tourism=hostel"). Response edited:

GetCapabilities:
http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E&SERVICE=WFS&REQUEST=GetCapabilities
Response => (...)

GetFeature:
http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E&SERVICE=WFS&VERSION=1.0.0&REQUEST=GetFeature&TYPENAME=pois&SRSNAME=EPSG:4326

Response =>
<wfs:FeatureCollection
  xmlns:fs="http://example.com/featureserver"
  xmlns:wfs="http://www.opengis.net/wfs"
  xmlns:gml="http://www.opengis.net/gml"
  xmlns:ogc="http://www.opengis.net/ogc"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.opengis.net/wfs
http://schemas.opengeospatial.net//wfs/1.0.0/WFS-basic.xsd">

  <gml:featureMember gml:id="-324390">
    <fs:pois fid="-324390">
      <fs:way>
        <gml:Point srsName="EPSG:4326">
          <gml:coordinates decimal="." cs="," ts="
">6.59728931318,46.5195096642</gml:coordinates>
        </gml:Point>
      </fs:way>
      <fs:shop>None</fs:shop>
      <fs:amenity>None</fs:amenity>
      <fs:surface>None</fs:surface>
      <fs:street>None</fs:street>
      ...
    </fs:pois>
  </gml:featureMember>
  ...
</wfs:FeatureCollection>


2013/4/21 Even Rouault <even.rouault at mines-paris.org>

> Le dimanche 21 avril 2013 17:49:28, Stefan Keller a ?crit :
> > When trying to use ogr2ogr (ver. 1.9) to convert a Shapefile (geometry
> type
> > Polygon) to file geodatabase (FileGDB) I'm getting an error like "FGDB
> > layers cannot be created with a wkbUnknown layer geometry type.":
> >
> > $ ogr2ogr -f filegdb out.gdb polygon.shp
> >
> > When adding -nlt it seems to work:
> >
> > $ ogr2ogr -f filegdb out.gdb polygon.shp -nlt POLYGON
> >
> > This is to a) an usual OGR behavior, and b) a show stopper for my script
> > because I don't know before hand (and won't check with ogrinfo) what
> > geometry type the input source is. Seems like there is a problem in the
> > FileGDB driver.
> >
> > Can anybody confirm and explain this bug?
>
> Stefan,
>
> I don't confirm that behaviour with either 1.9.2 or 1.10.0. Conversion
> works
> fine for me without specifying -nlt. What is the geometry type reported by
> ogrinfo on polygon.shp ?
>
> Even
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130421/6620646f/attachment.html>

From sfkeller at gmail.com  Sun Apr 21 10:20:18 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun, 21 Apr 2013 19:20:18 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write
	FileGDB
In-Reply-To: <CAFcOn2_rB-+Ozvq6fup2UTdq0qCb6EcpTi_02491ogeJ3Hd_dA@mail.gmail.com>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<CAFcOn28pg176ZAgOZ-4Aow+Ri7U6U1OR8k2MiDorpx4nfu0vPw@mail.gmail.com>
	<201304211756.53827.even.rouault@mines-paris.org>
	<CAFcOn2_rB-+Ozvq6fup2UTdq0qCb6EcpTi_02491ogeJ3Hd_dA@mail.gmail.com>
Message-ID: <CAFcOn29-xOv=p1O69Ah4E+i9A=6jXdgWSox339wTs=VVK6w=nQ@mail.gmail.com>

Weird enough, this ogrinfo command works

$ ogrinfo -ro WFS:
http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E
INFO: Open of `WFS:
http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E'
      using driver `WFS' successful.
1: pois (Point)

This works too but stumbles over any additional URL parameters:
$ ogrinfo -ro WFS:
http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E&SERVICE=WFS&TYPENAME=pois
INFO: Open of `WFS:
http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E'
      using driver `WFS' successful.
1: pois (Point)
'SERVICE' is not recognized as an internal or external command,
operable program or batch file.
'TYPENAME' is not recognized as an internal or external command,
operable program or batch file.

Yours, Stefan


2013/4/21 Stefan Keller <sfkeller at gmail.com>

> Many thanks for the quick reply, Even!
>
> You're right, it seems to work with Shapefile - but not for the WFS reader
> (and own server) we are testing...
>
> Below you find the GML output of our WFS source.
>
> So is the "fault" in the WFS reader - or even in our WFS Response XML?
>
> Yours, Stefan
>
>
> Testing OpenPOIMap WFS Service
> --------------------------------------------------
>
> Get all hostels of Switzerland from OpenStreetMap database
> ("tourism=hostel"). Response edited:
>
> GetCapabilities:
> http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E&SERVICE=WFS&REQUEST=GetCapabilities
> Response => (...)
>
> GetFeature:
> http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E&SERVICE=WFS&VERSION=1.0.0&REQUEST=GetFeature&TYPENAME=pois&SRSNAME=EPSG:4326
>
> Response =>
> <wfs:FeatureCollection
>   xmlns:fs="http://example.com/featureserver"
>   xmlns:wfs="http://www.opengis.net/wfs"
>   xmlns:gml="http://www.opengis.net/gml"
>   xmlns:ogc="http://www.opengis.net/ogc"
>   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>   xsi:schemaLocation="http://www.opengis.net/wfs
> http://schemas.opengeospatial.net//wfs/1.0.0/WFS-basic.xsd">
>
>   <gml:featureMember gml:id="-324390">
>     <fs:pois fid="-324390">
>       <fs:way>
>         <gml:Point srsName="EPSG:4326">
>           <gml:coordinates decimal="." cs="," ts="
> ">6.59728931318,46.5195096642</gml:coordinates>
>         </gml:Point>
>       </fs:way>
>       <fs:shop>None</fs:shop>
>       <fs:amenity>None</fs:amenity>
>       <fs:surface>None</fs:surface>
>       <fs:street>None</fs:street>
>       ...
>     </fs:pois>
>   </gml:featureMember>
>   ...
> </wfs:FeatureCollection>
>
>
> 2013/4/21 Even Rouault <even.rouault at mines-paris.org>
>
>> Le dimanche 21 avril 2013 17:49:28, Stefan Keller a ?crit :
>> > When trying to use ogr2ogr (ver. 1.9) to convert a Shapefile (geometry
>> type
>> > Polygon) to file geodatabase (FileGDB) I'm getting an error like "FGDB
>> > layers cannot be created with a wkbUnknown layer geometry type.":
>> >
>> > $ ogr2ogr -f filegdb out.gdb polygon.shp
>> >
>> > When adding -nlt it seems to work:
>> >
>> > $ ogr2ogr -f filegdb out.gdb polygon.shp -nlt POLYGON
>> >
>> > This is to a) an usual OGR behavior, and b) a show stopper for my script
>> > because I don't know before hand (and won't check with ogrinfo) what
>> > geometry type the input source is. Seems like there is a problem in the
>> > FileGDB driver.
>> >
>> > Can anybody confirm and explain this bug?
>>
>> Stefan,
>>
>> I don't confirm that behaviour with either 1.9.2 or 1.10.0. Conversion
>> works
>> fine for me without specifying -nlt. What is the geometry type reported by
>> ogrinfo on polygon.shp ?
>>
>> Even
>>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130421/39614d6e/attachment-0001.html>

From sfkeller at gmail.com  Sun Apr 21 10:44:19 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun, 21 Apr 2013 19:44:19 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write
	FileGDB
In-Reply-To: <CAFcOn29-xOv=p1O69Ah4E+i9A=6jXdgWSox339wTs=VVK6w=nQ@mail.gmail.com>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<CAFcOn28pg176ZAgOZ-4Aow+Ri7U6U1OR8k2MiDorpx4nfu0vPw@mail.gmail.com>
	<201304211756.53827.even.rouault@mines-paris.org>
	<CAFcOn2_rB-+Ozvq6fup2UTdq0qCb6EcpTi_02491ogeJ3Hd_dA@mail.gmail.com>
	<CAFcOn29-xOv=p1O69Ah4E+i9A=6jXdgWSox339wTs=VVK6w=nQ@mail.gmail.com>
Message-ID: <CAFcOn2-GW6E0soH9p_6A-708Od=Gp_WmMhmYBfCuSGL6+si_8A@mail.gmail.com>

I got the real problem: It occurs with this WFS source:
http://maps.zh.ch/wfs/FnsNSWFS?SERVICE=WFS&REQUEST=GetCapabilities

=> ogrinfo reports no geometry with this WFS:

$ ogrinfo -ro WFS:http://maps.zh.ch/wfs/FnsNSWFS?TYPENAME=svo_zonen
INFO: Open of `WFS:http://maps.zh.ch/wfs/FnsNSWFS?TYPENAME=svo_zonen'
      using driver `WFS' successful.
1: svo_zonen

Should be
1: svo_zonen (Polygon)

No geometry reported here in parantheses. So it's a configuration or
installation problem of the WFS server (ArcGIS)

In QGIS this works (QGIS reader seems to guess somehow the geometry type).

Yours, Stefan

P.S. Still unsure why the OGR WFS reader stumbles over additional WFS URL
parameters appended. Could be because of the key parameter?

$ ogrinfo -ro WFS:
http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E&SERVICE=WFS
INFO: Open of `WFS:
http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E'
      using driver `WFS' successful.
1: pois (Point)
'SERVICE' is not recognized as an internal or external command,
operable program or batch file.



2013/4/21 Stefan Keller <sfkeller at gmail.com>

> Weird enough, this ogrinfo command works
>
> $ ogrinfo -ro WFS:
> http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E
> INFO: Open of `WFS:
> http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E
> '
>       using driver `WFS' successful.
> 1: pois (Point)
>
> This works too but stumbles over any additional URL parameters:
> $ ogrinfo -ro WFS:
> http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E&SERVICE=WFS&TYPENAME=pois
> INFO: Open of `WFS:
> http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E
> '
>       using driver `WFS' successful.
> 1: pois (Point)
> 'SERVICE' is not recognized as an internal or external command,
> operable program or batch file.
> 'TYPENAME' is not recognized as an internal or external command,
> operable program or batch file.
>
> Yours, Stefan
>
>
> 2013/4/21 Stefan Keller <sfkeller at gmail.com>
>
>> Many thanks for the quick reply, Even!
>>
>> You're right, it seems to work with Shapefile - but not for the WFS
>> reader (and own server) we are testing...
>>
>> Below you find the GML output of our WFS source.
>>
>> So is the "fault" in the WFS reader - or even in our WFS Response XML?
>>
>> Yours, Stefan
>>
>>
>> Testing OpenPOIMap WFS Service
>> --------------------------------------------------
>>
>> Get all hostels of Switzerland from OpenStreetMap database
>> ("tourism=hostel"). Response edited:
>>
>> GetCapabilities:
>> http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E&SERVICE=WFS&REQUEST=GetCapabilities
>> Response => (...)
>>
>> GetFeature:
>> http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E&SERVICE=WFS&VERSION=1.0.0&REQUEST=GetFeature&TYPENAME=pois&SRSNAME=EPSG:4326
>>
>> Response =>
>> <wfs:FeatureCollection
>>   xmlns:fs="http://example.com/featureserver"
>>   xmlns:wfs="http://www.opengis.net/wfs"
>>   xmlns:gml="http://www.opengis.net/gml"
>>   xmlns:ogc="http://www.opengis.net/ogc"
>>   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>>   xsi:schemaLocation="http://www.opengis.net/wfs
>> http://schemas.opengeospatial.net//wfs/1.0.0/WFS-basic.xsd">
>>
>>   <gml:featureMember gml:id="-324390">
>>     <fs:pois fid="-324390">
>>       <fs:way>
>>         <gml:Point srsName="EPSG:4326">
>>           <gml:coordinates decimal="." cs="," ts="
>> ">6.59728931318,46.5195096642</gml:coordinates>
>>         </gml:Point>
>>       </fs:way>
>>        <fs:shop>None</fs:shop>
>>       <fs:amenity>None</fs:amenity>
>>       <fs:surface>None</fs:surface>
>>       <fs:street>None</fs:street>
>>       ...
>>     </fs:pois>
>>   </gml:featureMember>
>>   ...
>> </wfs:FeatureCollection>
>>
>>
>> 2013/4/21 Even Rouault <even.rouault at mines-paris.org>
>>
>>> Le dimanche 21 avril 2013 17:49:28, Stefan Keller a ?crit :
>>> > When trying to use ogr2ogr (ver. 1.9) to convert a Shapefile (geometry
>>> type
>>> > Polygon) to file geodatabase (FileGDB) I'm getting an error like "FGDB
>>> > layers cannot be created with a wkbUnknown layer geometry type.":
>>> >
>>> > $ ogr2ogr -f filegdb out.gdb polygon.shp
>>> >
>>> > When adding -nlt it seems to work:
>>> >
>>> > $ ogr2ogr -f filegdb out.gdb polygon.shp -nlt POLYGON
>>> >
>>> > This is to a) an usual OGR behavior, and b) a show stopper for my
>>> script
>>> > because I don't know before hand (and won't check with ogrinfo) what
>>> > geometry type the input source is. Seems like there is a problem in the
>>> > FileGDB driver.
>>> >
>>> > Can anybody confirm and explain this bug?
>>>
>>> Stefan,
>>>
>>> I don't confirm that behaviour with either 1.9.2 or 1.10.0. Conversion
>>> works
>>> fine for me without specifying -nlt. What is the geometry type reported
>>> by
>>> ogrinfo on polygon.shp ?
>>>
>>> Even
>>>
>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130421/9547383f/attachment.html>

From even.rouault at mines-paris.org  Sun Apr 21 10:44:55 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 21 Apr 2013 19:44:55 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write
	FileGDB
In-Reply-To: <CAFcOn29-xOv=p1O69Ah4E+i9A=6jXdgWSox339wTs=VVK6w=nQ@mail.gmail.com>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<CAFcOn2_rB-+Ozvq6fup2UTdq0qCb6EcpTi_02491ogeJ3Hd_dA@mail.gmail.com>
	<CAFcOn29-xOv=p1O69Ah4E+i9A=6jXdgWSox339wTs=VVK6w=nQ@mail.gmail.com>
Message-ID: <201304211944.55876.even.rouault@mines-paris.org>

Le dimanche 21 avril 2013 19:20:18, Stefan Keller a ?crit :
> Weird enough, this ogrinfo command works
> 
> $ ogrinfo -ro WFS:
> http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E
> INFO: Open of `WFS:
> http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E
> ' using driver `WFS' successful.
> 1: pois (Point)
> 
> This works too but stumbles over any additional URL parameters:
> $ ogrinfo -ro WFS:
> http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E
> &SERVICE=WFS&TYPENAME=pois INFO: Open of `WFS:
> http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E
> ' using driver `WFS' successful.
> 1: pois (Point)
> 'SERVICE' is not recognized as an internal or external command,
> operable program or batch file.
> 'TYPENAME' is not recognized as an internal or external command,
> operable program or batch file.

The issue is just a misuse of the shell syntax. You need to enclose your 
WFS:xxx connection string between double quotes if it has & character in it.

ogr2ogr -f filegdb pois.gdb 
"WFS:http://openpoimap.ch/featureserver/workspace.cgi?key=HG4kFX2kEEqBSqvcswuh2E&TYPENAME=pois"

From even.rouault at mines-paris.org  Sun Apr 21 10:52:50 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 21 Apr 2013 19:52:50 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write
	FileGDB
In-Reply-To: <CAFcOn2-GW6E0soH9p_6A-708Od=Gp_WmMhmYBfCuSGL6+si_8A@mail.gmail.com>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<CAFcOn29-xOv=p1O69Ah4E+i9A=6jXdgWSox339wTs=VVK6w=nQ@mail.gmail.com>
	<CAFcOn2-GW6E0soH9p_6A-708Od=Gp_WmMhmYBfCuSGL6+si_8A@mail.gmail.com>
Message-ID: <201304211952.51038.even.rouault@mines-paris.org>

Le dimanche 21 avril 2013 19:44:19, Stefan Keller a ?crit :
> I got the real problem: It occurs with this WFS source:
> http://maps.zh.ch/wfs/FnsNSWFS?SERVICE=WFS&REQUEST=GetCapabilities
> 
> => ogrinfo reports no geometry with this WFS:
> 
> $ ogrinfo -ro WFS:http://maps.zh.ch/wfs/FnsNSWFS?TYPENAME=svo_zonen
> INFO: Open of `WFS:http://maps.zh.ch/wfs/FnsNSWFS?TYPENAME=svo_zonen'
>       using driver `WFS' successful.
> 1: svo_zonen
> 
> Should be
> 1: svo_zonen (Polygon)
> 
> No geometry reported here in parantheses. So it's a configuration or
> installation problem of the WFS server (ArcGIS)
> 
> In QGIS this works (QGIS reader seems to guess somehow the geometry type).

Yes, when examining the 
"http://maps.zh.ch/wfs/FnsNSWFS?TYPENAME=svo_zonen&SERVICE=WFS&VERSION=1.1.0&REQUEST=DescribeFeatureType" 
you can see :

          <element name="msGeometry" type="gml:GeometryPropertyType" 
minOccurs="0" maxOccurs="1"/>

So the geometry type is undefined. OGR then reports a unknown geometry type. 
There could be a mix of geometries in such a layer.

I guess that QGIS will inspect the whole layer content after having downloaded 
it to determine the geometry type, but the OGR WFS driver doesn't do that for 
effeciency purposes. It can operate on arbitrarily huge layers in streaming 
mode (true for OGR 1.10)


From sfkeller at gmail.com  Sun Apr 21 13:18:38 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun, 21 Apr 2013 22:18:38 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write
	FileGDB
In-Reply-To: <201304211952.51038.even.rouault@mines-paris.org>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<CAFcOn29-xOv=p1O69Ah4E+i9A=6jXdgWSox339wTs=VVK6w=nQ@mail.gmail.com>
	<CAFcOn2-GW6E0soH9p_6A-708Od=Gp_WmMhmYBfCuSGL6+si_8A@mail.gmail.com>
	<201304211952.51038.even.rouault@mines-paris.org>
Message-ID: <CAFcOn29neT_=nYQROTw77vOXFtGczSqXmfna3XZb=nNVk15dLQ@mail.gmail.com>

Hi Even

You're right about the parantheses of URLs with & in the shell.

2013/4/21 Even Rouault <even.rouault at mines-paris.org>
> So the geometry type is undefined. OGR then reports a unknown geometry
type.
> There could be a mix of geometries in such a layer.

Yes that's it.
To be specific, every feature/object/instance has a gml:Box and a
gml:Polygon (see below).
That's a weird output from this ArcGIS server stuff and an incomplete
response of DescribeFeatureType.

Yours, Stefan

----
Response from "
http://maps.zh.ch/wfs/FnsNSWFS?SERVICE=WFS&VERSION=1.0.0&EQUEST=GetFeature&TYPENAME=svo_zonen
"
  <...>
  <gml:featureMember>
    <ms:svo_zonen fid="svo_zonen.4896">
      <gml:boundedBy>
        <gml:Box srsName="EPSG:21781">
          <gml:coordinates>693970.812500,273550.094000
694049.875000,273650.312500</gml:coordinates>
        </gml:Box>
      </gml:boundedBy>
      <ms:msGeometry>
      <gml:Polygon srsName="EPSG:21781">
        <gml:outerBoundaryIs>
          <gml:LinearRing>
            <gml:coordinates>694037.000000,273550.094000
694021.625000,...</gml:coordinates>
          </gml:LinearRing>
        </gml:outerBoundaryIs>
      </gml:Polygon>
      </ms:msGeometry>
      <ms:geodb_oid>4896</ms:geodb_oid>
      <ms:objectid>49</ms:objectid>
      <ms:svozoneoid>141</ms:svozoneoid>
      ...
    </ms:svo_zonen>
  </gml:featureMember>
  ...


2013/4/21 Even Rouault <even.rouault at mines-paris.org>

> Le dimanche 21 avril 2013 19:44:19, Stefan Keller a ?crit :
> > I got the real problem: It occurs with this WFS source:
> > http://maps.zh.ch/wfs/FnsNSWFS?SERVICE=WFS&REQUEST=GetCapabilities
> >
> > => ogrinfo reports no geometry with this WFS:
> >
> > $ ogrinfo -ro WFS:http://maps.zh.ch/wfs/FnsNSWFS?TYPENAME=svo_zonen
> > INFO: Open of `WFS:http://maps.zh.ch/wfs/FnsNSWFS?TYPENAME=svo_zonen'
> >       using driver `WFS' successful.
> > 1: svo_zonen
> >
> > Should be
> > 1: svo_zonen (Polygon)
> >
> > No geometry reported here in parantheses. So it's a configuration or
> > installation problem of the WFS server (ArcGIS)
> >
> > In QGIS this works (QGIS reader seems to guess somehow the geometry
> type).
>
> Yes, when examining the
> "
> http://maps.zh.ch/wfs/FnsNSWFS?TYPENAME=svo_zonen&SERVICE=WFS&VERSION=1.1.0&REQUEST=DescribeFeatureType
> "
> you can see :
>
>           <element name="msGeometry" type="gml:GeometryPropertyType"
> minOccurs="0" maxOccurs="1"/>
>
> So the geometry type is undefined. OGR then reports a unknown geometry
> type.
> There could be a mix of geometries in such a layer.
>
> I guess that QGIS will inspect the whole layer content after having
> downloaded
> it to determine the geometry type, but the OGR WFS driver doesn't do that
> for
> effeciency purposes. It can operate on arbitrarily huge layers in streaming
> mode (true for OGR 1.10)
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130421/ce9ccc65/attachment.html>

From even.rouault at mines-paris.org  Sun Apr 21 13:24:09 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 21 Apr 2013 22:24:09 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write
	FileGDB
In-Reply-To: <CAFcOn29neT_=nYQROTw77vOXFtGczSqXmfna3XZb=nNVk15dLQ@mail.gmail.com>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<201304211952.51038.even.rouault@mines-paris.org>
	<CAFcOn29neT_=nYQROTw77vOXFtGczSqXmfna3XZb=nNVk15dLQ@mail.gmail.com>
Message-ID: <201304212224.09619.even.rouault@mines-paris.org>

Le dimanche 21 avril 2013 22:18:38, Stefan Keller a ?crit :
> Hi Even
> 
> You're right about the parantheses of URLs with & in the shell.
> 
> 2013/4/21 Even Rouault <even.rouault at mines-paris.org>
> 
> > So the geometry type is undefined. OGR then reports a unknown geometry
> 
> type.
> 
> > There could be a mix of geometries in such a layer.
> 
> Yes that's it.
> To be specific, every feature/object/instance has a gml:Box and a
> gml:Polygon (see below).
> That's a weird output from this ArcGIS server stuff and an incomplete
> response of DescribeFeatureType.

There's nothing wrong in the GetFeature output. It is completely legitimate 
and usual to have a gml:Box inside a gml:boundedBy.
The DescribeFeatureType is also valid, but it could be made more specific by 
reporting type="gml:SurfacePropertyType" instead of 
type="gml:GeometryPropertyType"

From sfkeller at gmail.com  Sun Apr 21 13:39:09 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun, 21 Apr 2013 22:39:09 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write
	FileGDB
In-Reply-To: <201304212224.09619.even.rouault@mines-paris.org>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<201304211952.51038.even.rouault@mines-paris.org>
	<CAFcOn29neT_=nYQROTw77vOXFtGczSqXmfna3XZb=nNVk15dLQ@mail.gmail.com>
	<201304212224.09619.even.rouault@mines-paris.org>
Message-ID: <CAFcOn28K0zvOyWRnOpmAUC1Yh52gYjkmFPP=H3+Bjv7NwAVOvQ@mail.gmail.com>

2013/4/21 Even Rouault <even.rouault at mines-paris.org>
> There's nothing wrong in the GetFeature output. It is completely
legitimate
> and usual to have a gml:Box inside a gml:boundedBy.
> The DescribeFeatureType is also valid, but it could be made more specific
by
> reporting type="gml:SurfacePropertyType" instead of
> type="gml:GeometryPropertyType"

I see.

To me GetCapabilities of http://http://maps.zh.ch/wfs/FnsNSWFS should also
be more specific. Currently there's no geometry hint (and it even issues
warnings about missing EXTENT).

So,given it's DescribeFeatureType would report
type="gml:SurfacePropertyType" would the WFS reader of GDAL work?

I thought, most WFS clients/converters read GetCapabilities, not
DescribeFeatureType.

Yours, Stefan


2013/4/21 Even Rouault <even.rouault at mines-paris.org>

> Le dimanche 21 avril 2013 22:18:38, Stefan Keller a ?crit :
> > Hi Even
> >
> > You're right about the parantheses of URLs with & in the shell.
> >
> > 2013/4/21 Even Rouault <even.rouault at mines-paris.org>
> >
> > > So the geometry type is undefined. OGR then reports a unknown geometry
> >
> > type.
> >
> > > There could be a mix of geometries in such a layer.
> >
> > Yes that's it.
> > To be specific, every feature/object/instance has a gml:Box and a
> > gml:Polygon (see below).
> > That's a weird output from this ArcGIS server stuff and an incomplete
> > response of DescribeFeatureType.
>
> There's nothing wrong in the GetFeature output. It is completely legitimate
> and usual to have a gml:Box inside a gml:boundedBy.
> The DescribeFeatureType is also valid, but it could be made more specific
> by
> reporting type="gml:SurfacePropertyType" instead of
> type="gml:GeometryPropertyType"
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130421/b6126b1c/attachment.html>

From even.rouault at mines-paris.org  Sun Apr 21 13:43:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 21 Apr 2013 22:43:16 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write
	FileGDB
In-Reply-To: <CAFcOn28K0zvOyWRnOpmAUC1Yh52gYjkmFPP=H3+Bjv7NwAVOvQ@mail.gmail.com>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<201304212224.09619.even.rouault@mines-paris.org>
	<CAFcOn28K0zvOyWRnOpmAUC1Yh52gYjkmFPP=H3+Bjv7NwAVOvQ@mail.gmail.com>
Message-ID: <201304212243.16044.even.rouault@mines-paris.org>

Le dimanche 21 avril 2013 22:39:09, Stefan Keller a ?crit :
> 2013/4/21 Even Rouault <even.rouault at mines-paris.org>
> 
> > There's nothing wrong in the GetFeature output. It is completely
> 
> legitimate
> 
> > and usual to have a gml:Box inside a gml:boundedBy.
> > The DescribeFeatureType is also valid, but it could be made more specific
> 
> by
> 
> > reporting type="gml:SurfacePropertyType" instead of
> > type="gml:GeometryPropertyType"
> 
> I see.
> 
> To me GetCapabilities of http://http://maps.zh.ch/wfs/FnsNSWFS should also
> be more specific. Currently there's no geometry hint (and it even issues
> warnings about missing EXTENT).
> 
> So,given it's DescribeFeatureType would report
> type="gml:SurfacePropertyType" would the WFS reader of GDAL work?

Yes (well, to be pedantic, it does already work currently)

> 
> I thought, most WFS clients/converters read GetCapabilities, not
> DescribeFeatureType.

The output of GetCapabilities cannot be used to guess the layer geometry type, 
since there's no element to indicate it. You have to read the output of 
DescribeFeatureType for that (or fallback to the features themselves).

From sfkeller at gmail.com  Sun Apr 21 16:15:56 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Mon, 22 Apr 2013 01:15:56 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write
	FileGDB
In-Reply-To: <201304212243.16044.even.rouault@mines-paris.org>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<201304212224.09619.even.rouault@mines-paris.org>
	<CAFcOn28K0zvOyWRnOpmAUC1Yh52gYjkmFPP=H3+Bjv7NwAVOvQ@mail.gmail.com>
	<201304212243.16044.even.rouault@mines-paris.org>
Message-ID: <CAFcOn2-GzfXk=gE1NObQF7EPavnPpN+Juogxd2KUbEMKb54Onw@mail.gmail.com>

Ok. I now see it's something which can be corrected at the WFS server side
[1].

In Mapserver one can configure:
  gml_geometries "geometry"
  gml_geometry_type "polygon"
... to set the geometry type explicitly to type="gml:polygonPropertyType".

Yours, Stefan

[1]
http://osgeo-org.1560.x6.nabble.com/UMN-MAPSERVER-DEV-change-in-WFS-DescribeFeatureType-response-MS-4-6-td4309674.html



2013/4/21 Even Rouault <even.rouault at mines-paris.org>

> Le dimanche 21 avril 2013 22:39:09, Stefan Keller a ?crit :
> > 2013/4/21 Even Rouault <even.rouault at mines-paris.org>
> >
> > > There's nothing wrong in the GetFeature output. It is completely
> >
> > legitimate
> >
> > > and usual to have a gml:Box inside a gml:boundedBy.
> > > The DescribeFeatureType is also valid, but it could be made more
> specific
> >
> > by
> >
> > > reporting type="gml:SurfacePropertyType" instead of
> > > type="gml:GeometryPropertyType"
> >
> > I see.
> >
> > To me GetCapabilities of http://http://maps.zh.ch/wfs/FnsNSWFS should
> also
> > be more specific. Currently there's no geometry hint (and it even issues
> > warnings about missing EXTENT).
> >
> > So,given it's DescribeFeatureType would report
> > type="gml:SurfacePropertyType" would the WFS reader of GDAL work?
>
> Yes (well, to be pedantic, it does already work currently)
>
> >
> > I thought, most WFS clients/converters read GetCapabilities, not
> > DescribeFeatureType.
>
> The output of GetCapabilities cannot be used to guess the layer geometry
> type,
> since there's no element to indicate it. You have to read the output of
> DescribeFeatureType for that (or fallback to the features themselves).
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130422/45c9de27/attachment-0001.html>

From raghavendra at vizexperts.com  Sun Apr 21 22:03:24 2013
From: raghavendra at vizexperts.com (ryagz)
Date: Sun, 21 Apr 2013 22:03:24 -0700 (PDT)
Subject: [gdal-dev] Merge overviews from multiple files
In-Reply-To: <CACqBkM-BfOC5UyMWwW7rXxB6F8+iQ_SsDXUGG3=-Y52Sr+gBfA@mail.gmail.com>
References: <1366433259575-5048389.post@n6.nabble.com>
	<CACqBkM-BfOC5UyMWwW7rXxB6F8+iQ_SsDXUGG3=-Y52Sr+gBfA@mail.gmail.com>
Message-ID: <1366607004728-5048648.post@n6.nabble.com>

Thats great It did work, I added .ovr as an extenstion(level 1 -.ovr, level 2
- .ovr.ovr etc) to each overview file. And used gdal_translate with -co
COPY_SRC_OVERVIEWS=YES. The output file generated has got all the overviews
into one file.

Thanks Eli...



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Merge-overviews-from-multiple-files-tp5048389p5048648.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Mon Apr 22 00:57:47 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 22 Apr 2013 07:57:47 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Missing_geometry_type_when_using_ogr2ogr_to_?=
	=?utf-8?q?write=09FileGDB?=
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<CAFcOn29-xOv=p1O69Ah4E+i9A=6jXdgWSox339wTs=VVK6w=nQ@mail.gmail.com>
	<CAFcOn2-GW6E0soH9p_6A-708Od=Gp_WmMhmYBfCuSGL6+si_8A@mail.gmail.com>
	<201304211952.51038.even.rouault@mines-paris.org>
Message-ID: <loom.20130422T085616-708@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> 
> Yes, when examining the
> 
>
"http://maps.zh.ch/wfs/FnsNSWFS?TYPENAME=svo_zonen&SERVICE=WFS&VERSION=1.1.0&REQUEST=DescribeFeatureType"

> you can see :
> 
>           <element name="msGeometry" type="gml:GeometryPropertyType" 
> minOccurs="0" maxOccurs="1"/>
> 
> So the geometry type is undefined. OGR then reports a unknown geometry type. 
> There could be a mix of geometries in such a layer.

Just for information, it is not uncommon that WFS servers advertise a
general geometry type "gml:GeometryPropertyType" even the layer contains
only one geometry type and therefore WFS clients should be aware of this.
General geometry type comes more or less automatically when setting up a WFS
service on top of Oracle because by default Oracle can hold any geometries
in the geometry column. It is possible to set a geometry type constraint
when creating a spatial index but it is not important for Oracle and
therefore the constraint is often missing. Even if it exists it is a bit
complicated to query. For example Geoserver knows how to do this check but
GDAL OCI driver does not. If someone gets interested in improving the OCI
driver, here is a basic part of the query.

select idxmeta.sdo_layer_gtype from all_sdo_index_info idxinfo,
all_sdo_index_metadata idxmeta
where idxinfo.index_name=idxmeta.sdo_index_name
and idxinfo.table_name='TABLE_NAME'

If WFS client cannot handle mixed geometry types on one layer then it could
perhaps take the first not empty geometry from the WFS response and initiate
the layer to use that geometry type. To be on a safe side it might create a
multipolygon or multilinestring layer even if the first feature is simple.
Another geometry type appearing later in the data will lead to an error but
it cannot be avoided anyway if client cannot handle mixed layers.

-Jukka Rahkonen-


From sfkeller at gmail.com  Mon Apr 22 07:02:56 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Mon, 22 Apr 2013 16:02:56 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write
	FileGDB
In-Reply-To: <loom.20130422T085616-708@post.gmane.org>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<CAFcOn29-xOv=p1O69Ah4E+i9A=6jXdgWSox339wTs=VVK6w=nQ@mail.gmail.com>
	<CAFcOn2-GW6E0soH9p_6A-708Od=Gp_WmMhmYBfCuSGL6+si_8A@mail.gmail.com>
	<201304211952.51038.even.rouault@mines-paris.org>
	<loom.20130422T085616-708@post.gmane.org>
Message-ID: <CAFcOn28t7tCz+asRbM=5ZoR=-wXiBd_3v2A58eqnrWGwTGk=TQ@mail.gmail.com>

Hi Jukka and Even

I also thought about this, i.e. to delay the determination of the geometry
type check to the first occurrence, in case when the abstract gml:
GeometryPropertyType has been announced in DescribeFeature.

I know that QGIS, ArcGIS Desktop and Gaia clients can read the WFS
mentioned below. And I'm almost sure they don't read the whole data stream
in order to determine that's a polygon type. It's only OGR in my test suite
which can't cope with this an needs a manual configuration ("-nlt POLYGON")
which is no option for me since it's inside an automated script.

On the other hand and from a higher level perspective something it's clear
to me: The original feature set (here e.g. svo_zonen) is of type
gml:Polygon. If the WFS doesn't expose and explain this as gml:Polygon to
others, there's a problem with this server.

Yours, Stefan


2013/4/22 Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>

> Even Rouault <even.rouault <at> mines-paris.org> writes:
>
>
> >
> > Yes, when examining the
> >
> >
> "
> http://maps.zh.ch/wfs/FnsNSWFS?TYPENAME=svo_zonen&SERVICE=WFS&VERSION=1.1.0&REQUEST=DescribeFeatureType
> "
>
> > you can see :
> >
> >           <element name="msGeometry" type="gml:GeometryPropertyType"
> > minOccurs="0" maxOccurs="1"/>
> >
> > So the geometry type is undefined. OGR then reports a unknown geometry
> type.
> > There could be a mix of geometries in such a layer.
>
> Just for information, it is not uncommon that WFS servers advertise a
> general geometry type "gml:GeometryPropertyType" even the layer contains
> only one geometry type and therefore WFS clients should be aware of this.
> General geometry type comes more or less automatically when setting up a
> WFS
> service on top of Oracle because by default Oracle can hold any geometries
> in the geometry column. It is possible to set a geometry type constraint
> when creating a spatial index but it is not important for Oracle and
> therefore the constraint is often missing. Even if it exists it is a bit
> complicated to query. For example Geoserver knows how to do this check but
> GDAL OCI driver does not. If someone gets interested in improving the OCI
> driver, here is a basic part of the query.
>
> select idxmeta.sdo_layer_gtype from all_sdo_index_info idxinfo,
> all_sdo_index_metadata idxmeta
> where idxinfo.index_name=idxmeta.sdo_index_name
> and idxinfo.table_name='TABLE_NAME'
>
> If WFS client cannot handle mixed geometry types on one layer then it could
> perhaps take the first not empty geometry from the WFS response and
> initiate
> the layer to use that geometry type. To be on a safe side it might create a
> multipolygon or multilinestring layer even if the first feature is simple.
> Another geometry type appearing later in the data will lead to an error but
> it cannot be avoided anyway if client cannot handle mixed layers.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130422/3e036548/attachment.html>

From even.rouault at mines-paris.org  Mon Apr 22 10:50:53 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 22 Apr 2013 19:50:53 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write
	FileGDB
In-Reply-To: <CAFcOn28t7tCz+asRbM=5ZoR=-wXiBd_3v2A58eqnrWGwTGk=TQ@mail.gmail.com>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<loom.20130422T085616-708@post.gmane.org>
	<CAFcOn28t7tCz+asRbM=5ZoR=-wXiBd_3v2A58eqnrWGwTGk=TQ@mail.gmail.com>
Message-ID: <201304221950.54178.even.rouault@mines-paris.org>

Le lundi 22 avril 2013 16:02:56, Stefan Keller a ?crit :
> Hi Jukka and Even
> 
> I also thought about this, i.e. to delay the determination of the geometry
> type check to the first occurrence, in case when the abstract gml:
> GeometryPropertyType has been announced in DescribeFeature.
> 
> I know that QGIS, ArcGIS Desktop and Gaia clients can read the WFS
> mentioned below. And I'm almost sure they don't read the whole data stream
> in order to determine that's a polygon type. It's only OGR in my test suite
> which can't cope with this an needs a manual configuration ("-nlt POLYGON")
> which is no option for me since it's inside an automated script.
> 
> On the other hand and from a higher level perspective something it's clear
> to me: The original feature set (here e.g. svo_zonen) is of type
> gml:Polygon. If the WFS doesn't expose and explain this as gml:Polygon to
> others, there's a problem with this server.

I think that the current behaviour of the OGR WFS driver is perfectly correct. 
A layer with a geometry of GeometryPropertyType could contain any type of 
geometry (even if in practice most servers will only throw the same geometry 
type for all features).
What could be done is to have a "-nlt guess" mode in ogr2ogr, that, in case 
the source layer has an unknown geometry type, would retrieve the first feature 
of the source layer to find the geometry type and create the target layer 
geometry type.

> 
> Yours, Stefan
> 
> 
> 2013/4/22 Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>
> 
> > Even Rouault <even.rouault <at> mines-paris.org> writes:
> > > Yes, when examining the
> > 
> > "
> > http://maps.zh.ch/wfs/FnsNSWFS?TYPENAME=svo_zonen&SERVICE=WFS&VERSION=1.1
> > .0&REQUEST=DescribeFeatureType "
> > 
> > > you can see :
> > >           <element name="msGeometry" type="gml:GeometryPropertyType"
> > > 
> > > minOccurs="0" maxOccurs="1"/>
> > > 
> > > So the geometry type is undefined. OGR then reports a unknown geometry
> > 
> > type.
> > 
> > > There could be a mix of geometries in such a layer.
> > 
> > Just for information, it is not uncommon that WFS servers advertise a
> > general geometry type "gml:GeometryPropertyType" even the layer contains
> > only one geometry type and therefore WFS clients should be aware of this.
> > General geometry type comes more or less automatically when setting up a
> > WFS
> > service on top of Oracle because by default Oracle can hold any
> > geometries in the geometry column. It is possible to set a geometry type
> > constraint when creating a spatial index but it is not important for
> > Oracle and therefore the constraint is often missing. Even if it exists
> > it is a bit complicated to query. For example Geoserver knows how to do
> > this check but GDAL OCI driver does not. If someone gets interested in
> > improving the OCI driver, here is a basic part of the query.
> > 
> > select idxmeta.sdo_layer_gtype from all_sdo_index_info idxinfo,
> > all_sdo_index_metadata idxmeta
> > where idxinfo.index_name=idxmeta.sdo_index_name
> > and idxinfo.table_name='TABLE_NAME'
> > 
> > If WFS client cannot handle mixed geometry types on one layer then it
> > could perhaps take the first not empty geometry from the WFS response
> > and initiate
> > the layer to use that geometry type. To be on a safe side it might create
> > a multipolygon or multilinestring layer even if the first feature is
> > simple. Another geometry type appearing later in the data will lead to
> > an error but it cannot be avoided anyway if client cannot handle mixed
> > layers.
> > 
> > -Jukka Rahkonen-
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jukka.rahkonen at mmmtike.fi  Mon Apr 22 12:24:56 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 22 Apr 2013 19:24:56 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Missing_geometry_type_when_using_ogr2ogr_to_?=
	=?utf-8?q?write=09FileGDB?=
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<loom.20130422T085616-708@post.gmane.org>
	<CAFcOn28t7tCz+asRbM=5ZoR=-wXiBd_3v2A58eqnrWGwTGk=TQ@mail.gmail.com>
	<201304221950.54178.even.rouault@mines-paris.org>
Message-ID: <loom.20130422T211227-99@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> What could be done is to have a "-nlt guess" mode in ogr2ogr, that, in case 
> the source layer has an unknown geometry type, would retrieve the first
feature 
> of the source layer to find the geometry type and create the target layer 
> geometry type.

I guess that it would work for most cases. However, I know that in real life
the geometry of the first feature can be empty. It is also possible that WFS
feature type really contains mixed geometries. For handling them
automatically I would perhaps use Spatialite as an interim target and sort
the features by geometry types before moving them further.

-Jukka Rahkonen-


From sfkeller at gmail.com  Mon Apr 22 14:42:25 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Mon, 22 Apr 2013 23:42:25 +0200
Subject: [gdal-dev] Missing geometry type when using ogr2ogr to write
	FileGDB
In-Reply-To: <loom.20130422T211227-99@post.gmane.org>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<loom.20130422T085616-708@post.gmane.org>
	<CAFcOn28t7tCz+asRbM=5ZoR=-wXiBd_3v2A58eqnrWGwTGk=TQ@mail.gmail.com>
	<201304221950.54178.even.rouault@mines-paris.org>
	<loom.20130422T211227-99@post.gmane.org>
Message-ID: <CAFcOn28zJ=dzG94RQN-+NE-oQKHzc=xYtxt9LF+KyDBoei6UwQ@mail.gmail.com>

Hi Jukka and Even

After all, I agree with Even that OGR behaves correctly in this case.
And I think "-nlt guess" is a good proposal.
I'm also aware what Jukka says that mixed geometries are allowd.
But I always wondered which current implementation can cope with this -
except Spatialite/SQLite (which is a (nice) bucket anyway).

Yours, Stefan

2013/4/22 Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>

> Even Rouault <even.rouault <at> mines-paris.org> writes:
>
> > What could be done is to have a "-nlt guess" mode in ogr2ogr, that, in
> case
> > the source layer has an unknown geometry type, would retrieve the first
> feature
> > of the source layer to find the geometry type and create the target layer
> > geometry type.
>
> I guess that it would work for most cases. However, I know that in real
> life
> the geometry of the first feature can be empty. It is also possible that
> WFS
> feature type really contains mixed geometries. For handling them
> automatically I would perhaps use Spatialite as an interim target and sort
> the features by geometry types before moving them further.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130422/7f936d33/attachment.html>

From wsvries at xs4all.nl  Tue Apr 23 04:37:52 2013
From: wsvries at xs4all.nl (Wim de Vries)
Date: Tue, 23 Apr 2013 13:37:52 +0200
Subject: [gdal-dev] GetGeoTransform() valid?
In-Reply-To: <CAFcOn28zJ=dzG94RQN-+NE-oQKHzc=xYtxt9LF+KyDBoei6UwQ@mail.gmail.com>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<loom.20130422T085616-708@post.gmane.org>
	<CAFcOn28t7tCz+asRbM=5ZoR=-wXiBd_3v2A58eqnrWGwTGk=TQ@mail.gmail.com>
	<201304221950.54178.even.rouault@mines-paris.org>
	<loom.20130422T211227-99@post.gmane.org>
	<CAFcOn28zJ=dzG94RQN-+NE-oQKHzc=xYtxt9LF+KyDBoei6UwQ@mail.gmail.com>
Message-ID: <51767290.30504@xs4all.nl>

Hi,
I want to go from x,y (pixels) to lon,lat and vice versa, using geotiffs.
I have found the GetGeoTransform() 
<http://www.gdal.org/classGDALDataset.html#af9593cc241e7d140f5f3c4798a43a668> 
function, but the documentations says:

"NOTE: GetGeoTransform() 
<http://www.gdal.org/classGDALDataset.html#af9593cc241e7d140f5f3c4798a43a668> 
isn't expressive enough to handle the variety of OGC Grid Coverages 
pixel/line to projection transformation schemes. Eventually this method 
will be depreciated in favour of a more general scheme."

I googled a lot, but cannot find out what is meant exactly by "OGC Grid 
Coverages". I am just working with a simple cartesian x,y grid.

Anyone willing to explain a bit more.
Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130423/4cab3ef3/attachment.html>

From jgrn at illinois.edu  Tue Apr 23 09:47:46 2013
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Tue, 23 Apr 2013 11:47:46 -0500
Subject: [gdal-dev] Cropping to another image?
Message-ID: <CABG0rftTBeZvat3Q5xy3v6HDbOd+nbnhLUCxgfzHzf1asL2wgQ@mail.gmail.com>

GDALers:

Is there a way to easily crop one image to the the extent of another image?

--j

--
Jonathan A. Greenberg, PhD
Assistant Professor
Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
607 South Mathews Avenue, MC 150
Urbana, IL 61801
Phone: 217-300-1924
http://www.geog.illinois.edu/~jgrn/
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007

From even.rouault at mines-paris.org  Tue Apr 23 10:56:16 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 23 Apr 2013 19:56:16 +0200
Subject: [gdal-dev] [REMINDER] Motion: Promote 1.10.0RC4 for release
In-Reply-To: <201304192341.17680.even.rouault@mines-paris.org>
References: <201304192341.17680.even.rouault@mines-paris.org>
Message-ID: <201304231956.16099.even.rouault@mines-paris.org>

Le vendredi 19 avril 2013 23:41:17, Even Rouault a ?crit :
> Motion: GDAL/OGR 1.10.0RC4 is promoted to be the official 1.10.0 final
> release.
> 
> ---

Hi,

only my vote and Howard's up to now... Would be good if we could get a few 
additional votes.

Thanks,

Even

From dmorissette at mapgears.com  Tue Apr 23 11:07:55 2013
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 23 Apr 2013 14:07:55 -0400
Subject: [gdal-dev] [REMINDER] Motion: Promote 1.10.0RC4 for release
In-Reply-To: <201304231956.16099.even.rouault@mines-paris.org>
References: <201304192341.17680.even.rouault@mines-paris.org>
	<201304231956.16099.even.rouault@mines-paris.org>
Message-ID: <5176CDFB.1000702@mapgears.com>

+1

Daniel

On 13-04-23 1:56 PM, Even Rouault wrote:
> Le vendredi 19 avril 2013 23:41:17, Even Rouault a ?crit :
>> Motion: GDAL/OGR 1.10.0RC4 is promoted to be the official 1.10.0 final
>> release.
>>
>> ---
>
> Hi,
>
> only my vote and Howard's up to now... Would be good if we could get a few
> additional votes.
>
> Thanks,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From doug_newcomb at fws.gov  Tue Apr 23 11:15:25 2013
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Tue, 23 Apr 2013 14:15:25 -0400
Subject: [gdal-dev] Cropping to another image?
In-Reply-To: <CABG0rftTBeZvat3Q5xy3v6HDbOd+nbnhLUCxgfzHzf1asL2wgQ@mail.gmail.com>
References: <CABG0rftTBeZvat3Q5xy3v6HDbOd+nbnhLUCxgfzHzf1asL2wgQ@mail.gmail.com>
Message-ID: <CALQGVr1Abv2OubqRFVWF1=LjkFtNqRcW_19ebDBE5Vf6VcrpCQ@mail.gmail.com>

--j,
I you wanted to use the gdal utility programs , you can use gdalinfo to get
the extent of the first image and use gdal_translate -projwin with the
coordinates you captured from the first command.  There are a couple of
ways to pythonify those two commands or other python methods  into a single
script for batch processing, see http://www.gdal.org/gdal_tutorial.html


Doug


On Tue, Apr 23, 2013 at 12:47 PM, Jonathan Greenberg <jgrn at illinois.edu>wrote:

> GDALers:
>
> Is there a way to easily crop one image to the the extent of another image?
>
> --j
>
> --
> Jonathan A. Greenberg, PhD
> Assistant Professor
> Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
> Department of Geography and Geographic Information Science
> University of Illinois at Urbana-Champaign
> 607 South Mathews Avenue, MC 150
> Urbana, IL 61801
> Phone: 217-300-1924
> http://www.geog.illinois.edu/~jgrn/
> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130423/bb2c376f/attachment.html>

From szekerest at gmail.com  Tue Apr 23 12:49:47 2013
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 23 Apr 2013 21:49:47 +0200
Subject: [gdal-dev] Motion: Promote 1.10.0RC4 for release
In-Reply-To: <201304192341.17680.even.rouault@mines-paris.org>
References: <201304192341.17680.even.rouault@mines-paris.org>
Message-ID: <CACALY+T_9L61qQJhwvc-KmhCYuWC5L_c-1xTRo10j6zsKt2Jqw@mail.gmail.com>

+1

Tamas



2013/4/19 Even Rouault <even.rouault at mines-paris.org>

> Motion: GDAL/OGR 1.10.0RC4 is promoted to be the official 1.10.0 final
> release.
>
> ---
>
> I'll start the voting again with my :
>
> +1 Even
>
> ---
>
> #5058 is now fixed and is the only change w.r.t. RC3, so I'm both
> announcing
> the availability of RC4 and inviting PSC members to vote on this motion.
>
> Source Code:
>   http://download.osgeo.org/gdal/gdal-1.10.0RC4.tar.gz
>   http://download.osgeo.org/gdal/gdal-1.10.0RC4.tar.gz.md5
>   http://download.osgeo.org/gdal/gdal1100RC4.zip
>   http://download.osgeo.org/gdal/gdal1100RC4.zip.md5
>
> Autotest Suite:
>   http://download.osgeo.org/gdal/gdalautotest-1.10.0.tar.gz
>
> Documentation:
>   http://download.osgeo.org/gdal/gdal1100doc.zip
>
> NEWS:
>   http://svn.osgeo.org/gdal/tags/1.10.0/gdal/NEWS
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130423/d8cea779/attachment.html>

From gdal at stripfamily.net  Tue Apr 23 12:52:39 2013
From: gdal at stripfamily.net (David Strip)
Date: Tue, 23 Apr 2013 13:52:39 -0600
Subject: [gdal-dev] translating palettes in geotiff
Message-ID: <5176E687.3010004@stripfamily.net>

I have a paletted geotiff that I want to modify by mapping palette 
entries to a new palette.
Thus, I have an input palette, an output palette, and a geotiff.  I have 
a mapping (many to 1, if it matters) from the input palette to the 
output palette. Each pixel in the output geotiff will have a value 
equivalent to mapping the input geotiff's pixel value through the map.

I've looked over the utilities and none seems to have this capability. 
It would be pretty easy, I think to write code using gdal to do this, 
but if one of the utilities will handle this case, that's even better.

Thanks.


From warmerdam at pobox.com  Tue Apr 23 12:58:33 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 23 Apr 2013 12:58:33 -0700
Subject: [gdal-dev] [REMINDER] Motion: Promote 1.10.0RC4 for release
In-Reply-To: <201304231956.16099.even.rouault@mines-paris.org>
References: <201304192341.17680.even.rouault@mines-paris.org>
	<201304231956.16099.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBehTOJYrjiZrKU6_8gN+d4bgJTWeZ5pyv4_Dri4Or52Gg@mail.gmail.com>

+1 Frank

I had hoped to get to more serious testing but did not.

Best regards,
Frank


On Tue, Apr 23, 2013 at 10:56 AM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Le vendredi 19 avril 2013 23:41:17, Even Rouault a ?crit :
> > Motion: GDAL/OGR 1.10.0RC4 is promoted to be the official 1.10.0 final
> > release.
> >
> > ---
>
> Hi,
>
> only my vote and Howard's up to now... Would be good if we could get a few
> additional votes.
>
> Thanks,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130423/51c73cab/attachment.html>

From daniel.clewley at gmail.com  Tue Apr 23 13:01:27 2013
From: daniel.clewley at gmail.com (Daniel Clewley)
Date: Tue, 23 Apr 2013 13:01:27 -0700
Subject: [gdal-dev] Cropping to another image?
In-Reply-To: <mailman.55.1366743611.29775.gdal-dev@lists.osgeo.org>
References: <mailman.55.1366743611.29775.gdal-dev@lists.osgeo.org>
Message-ID: <5176E897.3080602@gmail.com>

Hi,

I did something similar to what Doug suggested using the GDAL python 
bindings to get the size, projection and pixel size of an image, then 
cropping and re projecting to match using gdalwarp.
You can view the code at:

https://bitbucket.org/petebunting/rsgis_scripts/src/c999df5483d3ed988feac016008f7623a28a484e/GDAL/subsetImage2Image.py?at=default

Hope this helps,

Thanks,

Dan

On 23/04/13 12:00, gdal-dev-request at lists.osgeo.org wrote:
> Message: 7 Date: Tue, 23 Apr 2013 14:15:25 -0400 From: "Newcomb, Doug" 
> <doug_newcomb at fws.gov> To: Jonathan Greenberg <jgrn at illinois.edu> Cc: 
> gdal dev <gdal-dev at lists.osgeo.org> Subject: Re: [gdal-dev] Cropping 
> to another image? Message-ID: 
> <CALQGVr1Abv2OubqRFVWF1=LjkFtNqRcW_19ebDBE5Vf6VcrpCQ at mail.gmail.com> 
> Content-Type: text/plain; charset="iso-8859-1" --j, I you wanted to 
> use the gdal utility programs , you can use gdalinfo to get the extent 
> of the first image and use gdal_translate -projwin with the 
> coordinates you captured from the first command. There are a couple of 
> ways to pythonify those two commands or other python methods into a 
> single script for batch processing, see 
> http://www.gdal.org/gdal_tutorial.html Doug On Tue, Apr 23, 2013 at 
> 12:47 PM, Jonathan Greenberg <jgrn at illinois.edu>wrote:
>> >GDALers:
>> >
>> >Is there a way to easily crop one image to the the extent of another image?
>> >
>> >--j
>> >
>> >--
>> >Jonathan A. Greenberg, PhD
>> >Assistant Professor
>> >Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
>> >Department of Geography and Geographic Information Science
>> >University of Illinois at Urbana-Champaign
>> >607 South Mathews Avenue, MC 150
>> >Urbana, IL 61801
>> >Phone: 217-300-1924
>> >http://www.geog.illinois.edu/~jgrn/
>> >AIM: jgrn307, MSN:jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
>> >_______________________________________________
>> >gdal-dev mailing list
>> >gdal-dev at lists.osgeo.org
>> >http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >


From even.rouault at mines-paris.org  Tue Apr 23 13:11:20 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 23 Apr 2013 22:11:20 +0200
Subject: [gdal-dev] translating palettes in geotiff
In-Reply-To: <5176E687.3010004@stripfamily.net>
References: <5176E687.3010004@stripfamily.net>
Message-ID: <201304232211.20854.even.rouault@mines-paris.org>

Le mardi 23 avril 2013 21:52:39, David Strip a ?crit :
> I have a paletted geotiff that I want to modify by mapping palette
> entries to a new palette.
> Thus, I have an input palette, an output palette, and a geotiff.  I have
> a mapping (many to 1, if it matters) from the input palette to the
> output palette. Each pixel in the output geotiff will have a value
> equivalent to mapping the input geotiff's pixel value through the map.
> 
> I've looked over the utilities and none seems to have this capability.
> It would be pretty easy, I think to write code using gdal to do this,
> but if one of the utilities will handle this case, that's even better.
> 

One possibility would be to use a VRT file where you specify a <LUT> element to 
map the indices from the input palette to the indices of the output palette. 
See http://www.gdal.org/gdal_vrttut.html for the syntax.

> Thanks.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jukka.rahkonen at mmmtike.fi  Tue Apr 23 13:12:14 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 23 Apr 2013 20:12:14 +0000 (UTC)
Subject: [gdal-dev] translating palettes in geotiff
References: <5176E687.3010004@stripfamily.net>
Message-ID: <loom.20130423T220547-594@post.gmane.org>

David Strip <gdal <at> stripfamily.net> writes:

> 
> I have a paletted geotiff that I want to modify by mapping palette 
> entries to a new palette.
> Thus, I have an input palette, an output palette, and a geotiff.  I have 
> a mapping (many to 1, if it matters) from the input palette to the 
> output palette. Each pixel in the output geotiff will have a value 
> equivalent to mapping the input geotiff's pixel value through the map.
> 
> I've looked over the utilities and none seems to have this capability. 
> It would be pretty easy, I think to write code using gdal to do this, 
> but if one of the utilities will handle this case, that's even better.
> 
> Thanks.

Hi,

Try gdal_translate. Write your paletted image into .vrt file, open and edit
the palette with text editor and convert the modified .vrt file into a new
geotiff.

rgb2pct.py utility http://www.gdal.org/rgb2pct.html is doing kind of similar
thing with the -pct option.

-Jukka Rahkonen-
 





From even.rouault at mines-paris.org  Tue Apr 23 13:38:11 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 23 Apr 2013 22:38:11 +0200
Subject: [gdal-dev] translating palettes in geotiff
In-Reply-To: <5176F0BA.70409@stripfamily.net>
References: <5176E687.3010004@stripfamily.net>
	<201304232211.20854.even.rouault@mines-paris.org>
	<5176F0BA.70409@stripfamily.net>
Message-ID: <201304232238.11381.even.rouault@mines-paris.org>

Le mardi 23 avril 2013 22:36:10, David Strip a ?crit :
> On 4/23/2013 2:11 PM, Even Rouault wrote:
> > Le mardi 23 avril 2013 21:52:39, David Strip a ?crit :
> >> I have a paletted geotiff that I want to modify by mapping palette
> >> entries to a new palette.
> >> Thus, I have an input palette, an output palette, and a geotiff.  I have
> >> a mapping (many to 1, if it matters) from the input palette to the
> >> output palette. Each pixel in the output geotiff will have a value
> >> equivalent to mapping the input geotiff's pixel value through the map.
> >> 
> >> I've looked over the utilities and none seems to have this capability.
> >> It would be pretty easy, I think to write code using gdal to do this,
> >> but if one of the utilities will handle this case, that's even better.
> > 
> > One possibility would be to use a VRT file where you specify a <LUT>
> > element to map the indices from the input palette to the indices of the
> > output palette. See http://www.gdal.org/gdal_vrttut.html for the syntax.
> 
> I was wondering whether a vrt would do the trick, but I'm not that
> familiar. If I'm reading this right, the path is something like
> translate from geotiff to vrt
> add the LUT
> translate from vrt back to geotiff.
> 
> If I'm going to be doing this a lot, with input files of the same size,
> all I need to do is create the .vrt as above, then edit the
> SourceFileName tag to point to the appropriate input file.

Yes, actually you need to mix my above solution with Jukka's one since, in 
addition to the LUT that will do the mapping of pixel values, you also need to 
add the new color table in the VRT.

> 
> Is that right?
> Many thanks

From gdal at stripfamily.net  Tue Apr 23 13:39:07 2013
From: gdal at stripfamily.net (David Strip)
Date: Tue, 23 Apr 2013 14:39:07 -0600
Subject: [gdal-dev] translating palettes in geotiff
In-Reply-To: <201304232211.20854.even.rouault@mines-paris.org>
References: <5176E687.3010004@stripfamily.net>
	<201304232211.20854.even.rouault@mines-paris.org>
Message-ID: <5176F16B.7020503@stripfamily.net>

On 4/23/2013 2:11 PM, Even Rouault wrote:
> Le mardi 23 avril 2013 21:52:39, David Strip a ?crit :
>> I have a paletted geotiff that I want to modify by mapping palette
>> entries to a new palette.
>> Thus, I have an input palette, an output palette, and a geotiff.  I have
>> a mapping (many to 1, if it matters) from the input palette to the
>> output palette. Each pixel in the output geotiff will have a value
>> equivalent to mapping the input geotiff's pixel value through the map.
>>
>> I've looked over the utilities and none seems to have this capability.
>> It would be pretty easy, I think to write code using gdal to do this,
>> but if one of the utilities will handle this case, that's even better.
>>
> One possibility would be to use a VRT file where you specify a <LUT> element to
> map the indices from the input palette to the indices of the output palette.
> See http://www.gdal.org/gdal_vrttut.html for the syntax.
I was wondering whether a vrt would do the trick, but I'm not that 
familiar. If I'm reading this right, the path is something like
translate from geotiff to vrt
add the LUT
translate from vrt back to geotiff.

If I'm going to be doing this a lot, with input files of the same size, 
all I need to do is create the .vrt as above, then edit the 
SourceFileName tag to point to the appropriate input file.

Is that right?
Many thanks




From gdal at stripfamily.net  Tue Apr 23 13:46:46 2013
From: gdal at stripfamily.net (David Strip)
Date: Tue, 23 Apr 2013 14:46:46 -0600
Subject: [gdal-dev] translating palettes in geotiff
In-Reply-To: <loom.20130423T220547-594@post.gmane.org>
References: <5176E687.3010004@stripfamily.net>
	<loom.20130423T220547-594@post.gmane.org>
Message-ID: <5176F336.2050007@stripfamily.net>

On 4/23/2013 2:12 PM, Jukka Rahkonen wrote:
> rgb2pct.py utilityhttp://www.gdal.org/rgb2pct.html  is doing kind of similar
> thing with the -pct option.
>
> -Jukka Rahkonen-

I looked at the reference, but don't see how this would work. Seems like 
I would have to first translate the geotiff to an RGB, but even then I 
don't see how the pct option would let me do an arbitrary mapping of 
colors. Wouldn't the underlying algorithm look for a best match against 
the palette?


From jukka.rahkonen at mmmtike.fi  Tue Apr 23 14:14:12 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 23 Apr 2013 21:14:12 +0000 (UTC)
Subject: [gdal-dev] translating palettes in geotiff
References: <5176E687.3010004@stripfamily.net>
	<loom.20130423T220547-594@post.gmane.org>
	<5176F336.2050007@stripfamily.net>
Message-ID: <loom.20130423T230829-49@post.gmane.org>

David Strip <gdal <at> stripfamily.net> writes:

> 
> On 4/23/2013 2:12 PM, Jukka Rahkonen wrote:
> > rgb2pct.py utilityhttp://www.gdal.org/rgb2pct.html  is doing kind of similar
> > thing with the -pct option.
> >
> > -Jukka Rahkonen-
> 
> I looked at the reference, but don't see how this would work. Seems like 
> I would have to first translate the geotiff to an RGB, but even then I 
> don't see how the pct option would let me do an arbitrary mapping of 
> colors. Wouldn't the underlying algorithm look for a best match against 
> the palette?

By kind of similar I meant that rgb2pct.py takes the source image and a
ready made palette from a file and writes out a new image by applying that
palette. I am not a programmer but I have seen that they can do even bigger
miracles than to modify some python script to use a paletted image as source
instead of RGB image.

-Jukka-







From gdal at stripfamily.net  Tue Apr 23 14:20:42 2013
From: gdal at stripfamily.net (David Strip)
Date: Tue, 23 Apr 2013 15:20:42 -0600
Subject: [gdal-dev] translating palettes in geotiff
In-Reply-To: <201304232238.11381.even.rouault@mines-paris.org>
References: <5176E687.3010004@stripfamily.net>
	<201304232211.20854.even.rouault@mines-paris.org>
	<5176F0BA.70409@stripfamily.net>
	<201304232238.11381.even.rouault@mines-paris.org>
Message-ID: <5176FB2A.30801@stripfamily.net>

 From Even's advice, I was able to piece together this workflow.
Given an input geotiff  image.gtif
gdaltranslate -of image.gtif image.vrt

Then open image.vrt in a text editor and look for the color table by 
searching for the tag <ColorTable> (actually you probably don't need to 
search, it's near the top)
Replace the contents of the color palette with the palette entries you 
want on output.

Then below the color table look for <SimpleSource> and replace it with 
<ComplexSource>
Look for </SimpleSource> and replace with <ComplexSource>
Add a new line above </ComplexSource> that looks like
<LUT>input_color_index:output_color_index, 
input_color_index:output_color_index, ... </LUT>
for example if you want to map input palette entry 1 to output entry 10, 
input 3, to output 5, ...
<LUT>1:10, 3:5, ...<LUT>
You will need to map EVERY input color that occurs in your image to an 
output color or else gdal_translate will interpolate a color for you, 
and you don't want that.
Now that you've edited the file run
gdal_translate -of gtiff image.vrt mapped_image.gtif

And you're done.


From gdal at stripfamily.net  Tue Apr 23 14:50:47 2013
From: gdal at stripfamily.net (David Strip)
Date: Tue, 23 Apr 2013 15:50:47 -0600
Subject: [gdal-dev] translating palettes in geotiff - followup
In-Reply-To: <5176FB2A.30801@stripfamily.net>
References: <5176E687.3010004@stripfamily.net>
	<201304232211.20854.even.rouault@mines-paris.org>
	<5176F0BA.70409@stripfamily.net>
	<201304232238.11381.even.rouault@mines-paris.org>
	<5176FB2A.30801@stripfamily.net>
Message-ID: <51770237.2070504@stripfamily.net>

In my previous email, I laid out a process that seems to work for me. 
Now I realize that while this works for a single input file, how do I 
generalize it to work on a set of tiles?
At first I naively thought I could just replace the SourceFileName and 
re-run the gdal_translate -of gtiff step, but since the location is 
embedded in the vrt, every tile would end up in the same place.
How do I generalize this process so I can reuse the edits to the .vrt?

On 4/23/2013 3:20 PM, David Strip wrote:
> From Even's advice, I was able to piece together this workflow.
> Given an input geotiff  image.gtif
> gdaltranslate -of image.gtif image.vrt
>
> Then open image.vrt in a text editor and look for the color table by 
> searching for the tag <ColorTable> (actually you probably don't need 
> to search, it's near the top)
> Replace the contents of the color palette with the palette entries you 
> want on output.
>
> Then below the color table look for <SimpleSource> and replace it with 
> <ComplexSource>
> Look for </SimpleSource> and replace with <ComplexSource>
> Add a new line above </ComplexSource> that looks like
> <LUT>input_color_index:output_color_index, 
> input_color_index:output_color_index, ... </LUT>
> for example if you want to map input palette entry 1 to output entry 
> 10, input 3, to output 5, ...
> <LUT>1:10, 3:5, ...<LUT>
> You will need to map EVERY input color that occurs in your image to an 
> output color or else gdal_translate will interpolate a color for you, 
> and you don't want that.
> Now that you've edited the file run
> gdal_translate -of gtiff image.vrt mapped_image.gtif
>
> And you're done.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From petebunting at mac.com  Tue Apr 23 13:57:52 2013
From: petebunting at mac.com (Peter Bunting)
Date: Wed, 24 Apr 2013 08:57:52 +1200
Subject: [gdal-dev] GDAL Raster Attribute Tables.
Message-ID: <2FE71558-30D7-4CA3-A540-F9D4C7A5AFFC@mac.com>

Hi All,

We were wondering if there is any interest in the GDAL community for improving the Raster Attribute Implementation? Within our group of collaborators we have been representing image segmentations as clump files often large attribute tables containing millions of rows and numerous columns of data used for classification. We are finding the current approach that reads a single value at a time with the whole attribute table in memory to be quite poor performance wise and resource (i.e., memory) hungry. 

We would like to propose a new implementation that allows reading and writing of whole chunks of a single column within the attribute table more like RasterIO.

If we were to create a patch, would the GDAL community be receptive to this? We were thinking this would be incorporated within the interface changes in GDAL 2.0. It has been muted that OGR might be merged into GDAL in version 2.0 if this were to occurred how would attribute tables be dealt with and are the changes we proposing something that needs to be considered in that wider context also?

Sam Gillingham and Pete Bunting

****************************************************
* Dr Pete Bunting
* Senior Lecturer in Remote Sensing
* Institute of Geography and Earth Sciences
* Aberystwyth University
* Aberystwyth
* Ceredigion
* SY23 3DB
* UK
* 
* Ph: +44 (0) 1970 622615
* Mob: +44 (0) 7917 842743
* NZ Ph: +64 (0) 4 280 7430
* Email: pfb at aber.ac.uk
****************************************************

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130424/3ee10fbc/attachment.html>

From warmerdam at pobox.com  Tue Apr 23 15:16:35 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 23 Apr 2013 15:16:35 -0700
Subject: [gdal-dev] GDAL Raster Attribute Tables.
In-Reply-To: <2FE71558-30D7-4CA3-A540-F9D4C7A5AFFC@mac.com>
References: <2FE71558-30D7-4CA3-A540-F9D4C7A5AFFC@mac.com>
Message-ID: <CA+YzLBeYoVyOVwr=Bb9dFyHv6i2RQe49XA6rVAZZifBA9vd-iw@mail.gmail.com>

On Tue, Apr 23, 2013 at 1:57 PM, Peter Bunting <petebunting at mac.com> wrote:

> Hi All,
>
> We were wondering if there is any interest in the GDAL community for
> improving the Raster Attribute Implementation? Within our group of
> collaborators we have been representing image segmentations as clump files
> often large attribute tables containing millions of rows and numerous
> columns of data used for classification. We are finding the current
> approach that reads a single value at a time with the whole attribute table
> in memory to be quite poor performance wise and resource (i.e., memory)
> hungry.
>

Peter,

You do seem to be pushing raster attribute tables well beyond the expected
use cases.


>
> We would like to propose a new implementation that allows reading and
> writing of whole chunks of a single column within the attribute table more
> like RasterIO.
>

> If we were to create a patch, would the GDAL community be receptive to
> this? We were thinking this would be incorporated within the interface
> changes in GDAL 2.0.
>

I would be receptive to additional read (and perhaps write) methods for
chunks of the attribute table at a time if it can be done with a minimum of
distruption of the existing api.


> It has been muted that OGR might be merged into GDAL in version 2.0 if
> this were to occurred how would attribute tables be dealt with and are the
> changes we proposing something that needs to be considered in that wider
> context also?
>

I had not been contemplating treating raster attribute tables as OGR layers.

I must confess that I'm still not certain that pushing raster attribute
tables to be very large is a good idea.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130423/1d004c21/attachment.html>

From warmerdam at pobox.com  Tue Apr 23 15:17:41 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 23 Apr 2013 15:17:41 -0700
Subject: [gdal-dev] GDAL Raster Attribute Tables.
In-Reply-To: <CA+YzLBeYoVyOVwr=Bb9dFyHv6i2RQe49XA6rVAZZifBA9vd-iw@mail.gmail.com>
References: <2FE71558-30D7-4CA3-A540-F9D4C7A5AFFC@mac.com>
	<CA+YzLBeYoVyOVwr=Bb9dFyHv6i2RQe49XA6rVAZZifBA9vd-iw@mail.gmail.com>
Message-ID: <CA+YzLBdxUnXZm9gwQ87C+zXmAfSO-WMVtch8FJ2=T8L4iLnE9w@mail.gmail.com>

Peter,

Actually, I should have added that I think a following stage should be for
you to prepare a formal detailed RFC proposal for voting on by the PSC
rather than just throwing a patch at us since this is an API change.

Best regards,
Frank


On Tue, Apr 23, 2013 at 3:16 PM, Frank Warmerdam <warmerdam at pobox.com>wrote:

>
>
>
> On Tue, Apr 23, 2013 at 1:57 PM, Peter Bunting <petebunting at mac.com>wrote:
>
>> Hi All,
>>
>> We were wondering if there is any interest in the GDAL community for
>> improving the Raster Attribute Implementation? Within our group of
>> collaborators we have been representing image segmentations as clump files
>> often large attribute tables containing millions of rows and numerous
>> columns of data used for classification. We are finding the current
>> approach that reads a single value at a time with the whole attribute table
>> in memory to be quite poor performance wise and resource (i.e., memory)
>> hungry.
>>
>
> Peter,
>
> You do seem to be pushing raster attribute tables well beyond the expected
> use cases.
>
>
>>
>> We would like to propose a new implementation that allows reading and
>> writing of whole chunks of a single column within the attribute table more
>> like RasterIO.
>>
>
>> If we were to create a patch, would the GDAL community be receptive to
>> this? We were thinking this would be incorporated within the interface
>> changes in GDAL 2.0.
>>
>
> I would be receptive to additional read (and perhaps write) methods for
> chunks of the attribute table at a time if it can be done with a minimum of
> distruption of the existing api.
>
>
>> It has been muted that OGR might be merged into GDAL in version 2.0 if
>> this were to occurred how would attribute tables be dealt with and are the
>> changes we proposing something that needs to be considered in that wider
>> context also?
>>
>
> I had not been contemplating treating raster attribute tables as OGR
> layers.
>
> I must confess that I'm still not certain that pushing raster attribute
> tables to be very large is a good idea.
>
> Best regards,
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130423/cc2e7d58/attachment-0001.html>

From petebunting at mac.com  Tue Apr 23 16:03:20 2013
From: petebunting at mac.com (Peter Bunting)
Date: Wed, 24 Apr 2013 11:03:20 +1200
Subject: [gdal-dev] GDAL Raster Attribute Tables.
In-Reply-To: <CA+YzLBdxUnXZm9gwQ87C+zXmAfSO-WMVtch8FJ2=T8L4iLnE9w@mail.gmail.com>
References: <2FE71558-30D7-4CA3-A540-F9D4C7A5AFFC@mac.com>
	<CA+YzLBeYoVyOVwr=Bb9dFyHv6i2RQe49XA6rVAZZifBA9vd-iw@mail.gmail.com>
	<CA+YzLBdxUnXZm9gwQ87C+zXmAfSO-WMVtch8FJ2=T8L4iLnE9w@mail.gmail.com>
Message-ID: <B254502A-B75B-49DB-B94F-9CD8D4040734@mac.com>

Thanks Frank, 

Sam and I will prepare a RFC and pass it around. Should we post it to the mailing list or add directly to the trac?

Best wishes, 

Pete
On 24 Apr 2013, at 10:17, Frank Warmerdam <warmerdam at pobox.com> wrote:

> Peter,
> 
> Actually, I should have added that I think a following stage should be for you to prepare a formal detailed RFC proposal for voting on by the PSC rather than just throwing a patch at us since this is an API change. 
> 
> Best regards,
> Frank
> 
> 
> On Tue, Apr 23, 2013 at 3:16 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:
> 
> 
> 
> On Tue, Apr 23, 2013 at 1:57 PM, Peter Bunting <petebunting at mac.com> wrote:
> Hi All,
> 
> We were wondering if there is any interest in the GDAL community for improving the Raster Attribute Implementation? Within our group of collaborators we have been representing image segmentations as clump files often large attribute tables containing millions of rows and numerous columns of data used for classification. We are finding the current approach that reads a single value at a time with the whole attribute table in memory to be quite poor performance wise and resource (i.e., memory) hungry. 
> 
> Peter,
> 
> You do seem to be pushing raster attribute tables well beyond the expected use cases. 
>  
> 
> We would like to propose a new implementation that allows reading and writing of whole chunks of a single column within the attribute table more like RasterIO. 
> 
> If we were to create a patch, would the GDAL community be receptive to this? We were thinking this would be incorporated within the interface changes in GDAL 2.0.
> 
> I would be receptive to additional read (and perhaps write) methods for chunks of the attribute table at a time if it can be done with a minimum of distruption of the existing api. 
>   
> It has been muted that OGR might be merged into GDAL in version 2.0 if this were to occurred how would attribute tables be dealt with and are the changes we proposing something that needs to be considered in that wider context also?
> 
> I had not been contemplating treating raster attribute tables as OGR layers.
>  
> I must confess that I'm still not certain that pushing raster attribute tables to be very large is a good idea. 
> 
> Best regards,
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> 
> 
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130424/f26ecf33/attachment.html>

From warmerdam at pobox.com  Tue Apr 23 17:07:54 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 23 Apr 2013 17:07:54 -0700
Subject: [gdal-dev] GetGeoTransform() valid?
In-Reply-To: <51767290.30504@xs4all.nl>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<loom.20130422T085616-708@post.gmane.org>
	<CAFcOn28t7tCz+asRbM=5ZoR=-wXiBd_3v2A58eqnrWGwTGk=TQ@mail.gmail.com>
	<201304221950.54178.even.rouault@mines-paris.org>
	<loom.20130422T211227-99@post.gmane.org>
	<CAFcOn28zJ=dzG94RQN-+NE-oQKHzc=xYtxt9LF+KyDBoei6UwQ@mail.gmail.com>
	<51767290.30504@xs4all.nl>
Message-ID: <CA+YzLBeZ=zH51UJ2Y8pBL2OkUUnsy4xQJaYhE3=Y073krOxw9g@mail.gmail.com>

Wim,

I have remove the comment you quoted.  It is from the distant past.  What
you should understand is that this isn't the *only* way to express
georeferencing for GDAL images.  You can also use Ground Control Points,
RPCs and geolocation arrays.  However GeoTransforms are the most common way
and sufficient for many situations.

Is the relationship between your images and geographic (lat/long)
coordinate space affine?  If so, a geotransform will do just fine.  (ie. is
the pixel spacing uniform over the image in terms of decimal degrees)

Best regards,
Frank



On Tue, Apr 23, 2013 at 4:37 AM, Wim de Vries <wsvries at xs4all.nl> wrote:

>  Hi,
> I want to go from x,y (pixels) to lon,lat and vice versa, using geotiffs.
> I have found the GetGeoTransform()<http://www.gdal.org/classGDALDataset.html#af9593cc241e7d140f5f3c4798a43a668>function, but the documentations says:
>
> "NOTE: GetGeoTransform()<http://www.gdal.org/classGDALDataset.html#af9593cc241e7d140f5f3c4798a43a668>isn't expressive enough to handle the variety of OGC Grid Coverages
> pixel/line to projection transformation schemes. Eventually this method
> will be depreciated in favour of a more general scheme."
>
> I googled a lot, but cannot find out what is meant exactly by "OGC Grid
> Coverages". I am just working with a simple cartesian x,y grid.
>
> Anyone willing to explain a bit more.
> Thanks.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130423/7ab4c570/attachment.html>

From wsvries at xs4all.nl  Wed Apr 24 00:21:51 2013
From: wsvries at xs4all.nl (Wim de Vries)
Date: Wed, 24 Apr 2013 09:21:51 +0200
Subject: [gdal-dev] GetGeoTransform() valid?
In-Reply-To: <CA+YzLBeZ=zH51UJ2Y8pBL2OkUUnsy4xQJaYhE3=Y073krOxw9g@mail.gmail.com>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<loom.20130422T085616-708@post.gmane.org>
	<CAFcOn28t7tCz+asRbM=5ZoR=-wXiBd_3v2A58eqnrWGwTGk=TQ@mail.gmail.com>
	<201304221950.54178.even.rouault@mines-paris.org>
	<loom.20130422T211227-99@post.gmane.org>
	<CAFcOn28zJ=dzG94RQN-+NE-oQKHzc=xYtxt9LF+KyDBoei6UwQ@mail.gmail.com>
	<51767290.30504@xs4all.nl>
	<CA+YzLBeZ=zH51UJ2Y8pBL2OkUUnsy4xQJaYhE3=Y073krOxw9g@mail.gmail.com>
Message-ID: <5177880F.2060600@xs4all.nl>

Thanks for taking the time to answer.
On 04/24/2013 02:07 AM, Frank Warmerdam wrote:
...
> Is the relationship between your images and geographic (lat/long) 
> coordinate space affine?  If so, a geotransform will do just fine. 
>  (ie. is the pixel spacing uniform over the image in terms of decimal 
> degrees)
If I understand you correctly, it cannot be used for e.g. a lambert 
conformal > cartesian (eg. bitmap x,y pixels), because lons are not 
parallel and lats are bend when being projected.

regards,
wim


BTW; I want to use GDAL for an OS flight navigation project 
(http://openflightnav.org/)

>
> Best regards,
> Frank
>
>
>
> On Tue, Apr 23, 2013 at 4:37 AM, Wim de Vries <wsvries at xs4all.nl 
> <mailto:wsvries at xs4all.nl>> wrote:
>
>     Hi,
>     I want to go from x,y (pixels) to lon,lat and vice versa, using
>     geotiffs.
>     I have found the GetGeoTransform()
>     <http://www.gdal.org/classGDALDataset.html#af9593cc241e7d140f5f3c4798a43a668>
>     function, but the documentations says:
>
>     "NOTE: GetGeoTransform()
>     <http://www.gdal.org/classGDALDataset.html#af9593cc241e7d140f5f3c4798a43a668>
>     isn't expressive enough to handle the variety of OGC Grid
>     Coverages pixel/line to projection transformation schemes.
>     Eventually this method will be depreciated in favour of a more
>     general scheme."
>
>     I googled a lot, but cannot find out what is meant exactly by "OGC
>     Grid Coverages". I am just working with a simple cartesian x,y grid.
>
>     Anyone willing to explain a bit more.
>     Thanks.
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam at pobox.com <mailto:warmerdam at pobox.com>
> light and sound - activate the windows | http://pobox.com/~warmerdam 
> <http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Software Developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130424/09eda1ff/attachment.html>

From warmerdam at pobox.com  Wed Apr 24 00:26:09 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 24 Apr 2013 00:26:09 -0700
Subject: [gdal-dev] GetGeoTransform() valid?
In-Reply-To: <5177880F.2060600@xs4all.nl>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<loom.20130422T085616-708@post.gmane.org>
	<CAFcOn28t7tCz+asRbM=5ZoR=-wXiBd_3v2A58eqnrWGwTGk=TQ@mail.gmail.com>
	<201304221950.54178.even.rouault@mines-paris.org>
	<loom.20130422T211227-99@post.gmane.org>
	<CAFcOn28zJ=dzG94RQN-+NE-oQKHzc=xYtxt9LF+KyDBoei6UwQ@mail.gmail.com>
	<51767290.30504@xs4all.nl>
	<CA+YzLBeZ=zH51UJ2Y8pBL2OkUUnsy4xQJaYhE3=Y073krOxw9g@mail.gmail.com>
	<5177880F.2060600@xs4all.nl>
Message-ID: <CA+YzLBd=8kaX+0QPbNkC8rf_ipj1YFeC9oCrm2Jnyr_y+X68hA@mail.gmail.com>

On Wed, Apr 24, 2013 at 12:21 AM, Wim de Vries <wsvries at xs4all.nl> wrote:

>  Thanks for taking the time to answer.
> On 04/24/2013 02:07 AM, Frank Warmerdam wrote:
>  ...
>
>  Is the relationship between your images and geographic (lat/long)
> coordinate space affine?  If so, a geotransform will do just fine.  (ie. is
> the pixel spacing uniform over the image in terms of decimal degrees)
>
> If I understand you correctly, it cannot be used for e.g. a lambert
> conformal > cartesian (eg. bitmap x,y pixels), because lons are not
> parallel and lats are bend when being projected.
>

Wim,

Well, it can potentially be but that is a more complicated case.  You need
to also provide a proper definition of the lambert conformal coordinate
system, and then the affine transformation from pixel/line coordinates to
meter coordinates in that projected coordinate system.

For instance, another projected example is seen in this file.  The
coordiante system is transverse mercator with particular parameters and the
geotransform relates to the origin and pixel size given below.  Given this
information GDAL knows how to relate pixels to lat/long as you can see in
the corners reported.

Size is 512, 512
Coordinate System is:
PROJCS["NAD27 / UTM zone 11N",
    GEOGCS["NAD27",
        DATUM["North_American_Datum_1927",
            SPHEROID["Clarke 1866",6378206.4,294.9786982139006,
                AUTHORITY["EPSG","7008"]],
            AUTHORITY["EPSG","6267"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4267"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-117],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26711"]]
Origin = (440720.000000000000000,3751320.000000000000000)
Pixel Size = (60.000000000000000,-60.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  440720.000, 3751320.000) (117d38'28.21"W, 33d54' 8.47"N)
Lower Left  (  440720.000, 3720600.000) (117d38'20.79"W, 33d37'31.04"N)
Upper Right (  471440.000, 3751320.000) (117d18'32.07"W, 33d54'13.08"N)
Lower Right (  471440.000, 3720600.000) (117d18'28.50"W, 33d37'35.61"N)
Center      (  456080.000, 3735960.000) (117d28'27.39"W, 33d45'52.46"N)
Band 1 Block=512x16 Type=Byte, ColorInterp=Gray

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130424/f5e1e233/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Wed Apr 24 05:34:44 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 24 Apr 2013 12:34:44 +0000 (UTC)
Subject: [gdal-dev] translating palettes in geotiff - followup
References: <5176E687.3010004@stripfamily.net>
	<201304232211.20854.even.rouault@mines-paris.org>
	<5176F0BA.70409@stripfamily.net>
	<201304232238.11381.even.rouault@mines-paris.org>
	<5176FB2A.30801@stripfamily.net> <51770237.2070504@stripfamily.net>
Message-ID: <loom.20130424T142332-894@post.gmane.org>

David Strip <gdal <at> stripfamily.net> writes:

> 
> In my previous email, I laid out a process that seems to work for me. 
> Now I realize that while this works for a single input file, how do I 
> generalize it to work on a set of tiles?
> At first I naively thought I could just replace the SourceFileName and 
> re-run the gdal_translate -of gtiff step, but since the location is 
> embedded in the vrt, every tile would end up in the same place.
> How do I generalize this process so I can reuse the edits to the .vrt?

Partial solution could be to use gdalbuildvrt
http://www.gdal.org/gdalbuildvrt.html
Running gdalbuildvrt alltiles.vrt *.tif will create a vrt file with one
common colortable and all tif files as separate SimpleSources. Changing them
into ComplexSources and adding LUT blocks should be doable with a clever
test editor. However, after running gdalbuildvrt you will have one dataset
instead of bunch of tiles and if you want tiles back you will need to split
the "alltiles.vrt" file somehow. If you do not need tiles you can avoid this
and convert the whole vrt file into one single geotiff.

-Jukka Rahkonen-




From wsvries at xs4all.nl  Wed Apr 24 05:38:24 2013
From: wsvries at xs4all.nl (Wim de Vries)
Date: Wed, 24 Apr 2013 14:38:24 +0200
Subject: [gdal-dev] GetGeoTransform() valid?
In-Reply-To: <CA+YzLBd=8kaX+0QPbNkC8rf_ipj1YFeC9oCrm2Jnyr_y+X68hA@mail.gmail.com>
References: <CAFcOn2-JrcSMhzeY4kBAzZaeUBBZCNhjZJM1=hC7bBVn97W9ZQ@mail.gmail.com>
	<loom.20130422T085616-708@post.gmane.org>
	<CAFcOn28t7tCz+asRbM=5ZoR=-wXiBd_3v2A58eqnrWGwTGk=TQ@mail.gmail.com>
	<201304221950.54178.even.rouault@mines-paris.org>
	<loom.20130422T211227-99@post.gmane.org>
	<CAFcOn28zJ=dzG94RQN-+NE-oQKHzc=xYtxt9LF+KyDBoei6UwQ@mail.gmail.com>
	<51767290.30504@xs4all.nl>
	<CA+YzLBeZ=zH51UJ2Y8pBL2OkUUnsy4xQJaYhE3=Y073krOxw9g@mail.gmail.com>
	<5177880F.2060600@xs4all.nl>
	<CA+YzLBd=8kaX+0QPbNkC8rf_ipj1YFeC9oCrm2Jnyr_y+X68hA@mail.gmail.com>
Message-ID: <5177D240.6040407@xs4all.nl>

On 04/24/2013 09:26 AM, Frank Warmerdam wrote:
>
> On Wed, Apr 24, 2013 at 12:21 AM, Wim de Vries <wsvries at xs4all.nl 
> <mailto:wsvries at xs4all.nl>> wrote:
>
>     Thanks for taking the time to answer.
>     On 04/24/2013 02:07 AM, Frank Warmerdam wrote:
>     ...
>
>>     Is the relationship between your images and geographic (lat/long)
>>     coordinate space affine?  If so, a geotransform will do just
>>     fine.  (ie. is the pixel spacing uniform over the image in terms
>>     of decimal degrees)
>     If I understand you correctly, it cannot be used for e.g. a
>     lambert conformal > cartesian (eg. bitmap x,y pixels), because
>     lons are not parallel and lats are bend when being projected.
>
>
>
> Well, it can potentially be but that is a more complicated case.  You 
> need to also provide a proper definition of the lambert conformal 
> coordinate system, and then the affine transformation from pixel/line 
> coordinates to meter coordinates in that projected coordinate system.
>
> For instance, another projected example is seen in this file.  The 
> coordiante system is transverse mercator with particular parameters 
> and the geotransform relates to the origin and pixel size given below. 
>  Given this information GDAL knows how to relate pixels to lat/long as 
> you can see in the corners reported.
Thanks.
I did use PROJ4, but with GDAL I can simply read-in geotiffs (these give 
info as you indicate below).
So, I can use getGeoTransform as long as the info (as below) is available.
Only thing to do is getting from meters to pixels (60mtr/pix in the 
example below for both x,y) and vice versa,
cartesian 0,0 being at 0lon 0lat?


>
> Size is 512, 512
> Coordinate System is:
> PROJCS["NAD27 / UTM zone 11N",
>     GEOGCS["NAD27",
>         DATUM["North_American_Datum_1927",
>             SPHEROID["Clarke 1866",6378206.4,294.9786982139006,
>                 AUTHORITY["EPSG","7008"]],
>             AUTHORITY["EPSG","6267"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4267"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-117],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","26711"]]
> Origin = (440720.000000000000000,3751320.000000000000000)
> Pixel Size = (60.000000000000000,-60.000000000000000)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  440720.000, 3751320.000) (117d38'28.21"W, 33d54' 8.47"N)
> Lower Left  (  440720.000, 3720600.000) (117d38'20.79"W, 33d37'31.04"N)
> Upper Right (  471440.000, 3751320.000) (117d18'32.07"W, 33d54'13.08"N)
> Lower Right (  471440.000, 3720600.000) (117d18'28.50"W, 33d37'35.61"N)
> Center      (  456080.000, 3735960.000) (117d28'27.39"W, 33d45'52.46"N)
> Band 1 Block=512x16 Type=Byte, ColorInterp=Gray
>
> Best regards,
>
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam at pobox.com <mailto:warmerdam at pobox.com>
> light and sound - activate the windows | http://pobox.com/~warmerdam 
> <http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Software Developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130424/9878db76/attachment.html>

From dmorissette at mapgears.com  Wed Apr 24 05:42:35 2013
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 24 Apr 2013 08:42:35 -0400
Subject: [gdal-dev] [REMINDER] Motion: Promote 1.10.0RC4 for release
In-Reply-To: <5176CDFB.1000702@mapgears.com>
References: <201304192341.17680.even.rouault@mines-paris.org>
	<201304231956.16099.even.rouault@mines-paris.org>
	<5176CDFB.1000702@mapgears.com>
Message-ID: <5177D33B.4070709@mapgears.com>

Even,

Is the Spatialite issue in http://trac.osgeo.org/gdal/ticket/5060 a new 
regression in GDAL 1.10 or has this been around for a while?

If it is new in GDAL 1.10 then I am thinking of turning my vote to -1 
because this seems to be preventing the use of Spatialite with MapServer 
in mapfiles that used to work in the past (if I understood the comments 
in https://github.com/mapserver/mapserver/issues/4636 correctly)

What do you think?

Daniel

On 13-04-23 2:07 PM, Daniel Morissette wrote:
> +1
>
> Daniel
>
> On 13-04-23 1:56 PM, Even Rouault wrote:
>> Le vendredi 19 avril 2013 23:41:17, Even Rouault a ?crit :
>>> Motion: GDAL/OGR 1.10.0RC4 is promoted to be the official 1.10.0 final
>>> release.
>>>
>>> ---
>>
>> Hi,
>>
>> only my vote and Howard's up to now... Would be good if we could get a
>> few
>> additional votes.
>>
>> Thanks,
>>
>> Even
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From ancz at bas.ac.uk  Wed Apr 24 09:54:11 2013
From: ancz at bas.ac.uk (Cziferszky, Andreas)
Date: Wed, 24 Apr 2013 17:54:11 +0100
Subject: [gdal-dev] gdal re-projeciton problem with Polar Stereographic
	projections
In-Reply-To: <40829B0E077C1145A6DE44D39B3830A922B66D65F5@nerckwmb1.ad.nerc.ac.uk>
References: <1DCCED50D0696A498958BA6B254456E222FE166F6D@nerckwmb1.ad.nerc.ac.uk>,
	<40829B0E077C1145A6DE44D39B3830A922B66D65F5@nerckwmb1.ad.nerc.ac.uk>
Message-ID: <1DCCED50D0696A498958BA6B254456E222FE166F6F@nerckwmb1.ad.nerc.ac.uk>

Hi list,

We are experiencing problems with GeoTIFF images generated by gdalwarp (v1.9.2) while map projecting towards a Polar Stereographic projection, particularly EPSG:3031 (although other PS map projections showed the same effect). The source image is a World Mercator (EPSG:3395) projected GeoTIFF which displays and reports map proejction info correctly in QGIS, ArcMap, and others. Running

gdalwarp -s_srs EPSG:3395 -t_srs EPSG:3031 test.3395.tif test.3031.tif

generates a GeoTIFF whose map projection info cannot be read using ArcMap (v10.1 in our case). For the out image gdalinfo is reporting

>gdalinfo test.3031.tif
Driver: GTiff/GeoTIFF
Files: test.3031.tif
Size is 398, 398
Coordinate System is:
LOCAL_CS["WGS 84 / Antarctic Polar Stereographic",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    AUTHORITY["EPSG","3031"],
    UNIT["metre",1]]
....

Two items seem to be wrong/missing:
1) The LOCAL_CS definition instead of an expected PROJCS definition
2) No projection parameters like PROJECTION["Polar Stereographic..."], PARAMETER["central_meridian",0], UNIT["metre",1,..].. exist, only the AUTHORITY including EPSG code 3031.

In addition, it appears that some (not all) GeoTIFF files projected using gdalwarp (1.9.1) into Polar Stereographic (EPSG:3031) as above cause problems when publishing via the Geoserver admin GUI (v2.2.x).  The problem appears when trying to save the raster layer's properties - the native SRS appears undefined, presumably because Geotools has had issues with the LOCAL_CS header, so that only "reproject native to declared" actually works.  The other two options ("keep native"  and "force declared") cause a stack trace, and failure to save the layer properties.

Files are available at ftp://ftp.bas.ac.uk/ancz/test.3395.tif and ftp://ftp.bas.ac.uk/ancz/test.3031.tif

Any help appreciated.
Andreas

This message (and any attachments) is for the recipient only. NERC is subject to the Freedom of Information Act 2000 and the contents of this email and any reply you make may be disclosed by NERC unless it is exempt from release under the Act. Any material supplied to NERC may be stored in an electronic records management system.

From warmerdam at pobox.com  Wed Apr 24 10:38:57 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 24 Apr 2013 10:38:57 -0700
Subject: [gdal-dev] gdal re-projeciton problem with Polar Stereographic
	projections
In-Reply-To: <1DCCED50D0696A498958BA6B254456E222FE166F6F@nerckwmb1.ad.nerc.ac.uk>
References: <1DCCED50D0696A498958BA6B254456E222FE166F6D@nerckwmb1.ad.nerc.ac.uk>
	<40829B0E077C1145A6DE44D39B3830A922B66D65F5@nerckwmb1.ad.nerc.ac.uk>
	<1DCCED50D0696A498958BA6B254456E222FE166F6F@nerckwmb1.ad.nerc.ac.uk>
Message-ID: <CA+YzLBfxEk9QW-Q75TOUFE4pcwbue=RTPNY+ZMjBbETYRaKVvA@mail.gmail.com>

Andreas,

I have downloaded test.3031.tif and run gdalinfo (trunk) against it and get
the right results:

Driver: GTiff/GeoTIFF
Files: test.3031.tif
Size is 398, 398
Coordinate System is:
PROJCS["WGS 84 / Antarctic Polar Stereographic",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Polar_Stereographic"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","3031"]]
Origin = (-2054532.574583648238331,1166857.038436320610344)
Pixel Size = (125.204255282867464,-125.204255282867464)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-2054532.575, 1166857.038) (119d35'38.75"W, 49d32' 9.40"N)
Lower Left  (-2054532.575, 1117025.745) (118d31'56.70"W, 49d55' 6.39"N)
Upper Right (-2004701.281, 1166857.038) (120d12' 7.15"W, 50d13' 9.00"N)
Lower Right (-2004701.281, 1117025.745) (119d 7'36.07"W, 50d36'37.86"N)
Center      (-2029616.928, 1141941.392) (119d21'49.67"W, 50d 4'21.54"N)
Band 1 Block=398x10 Type=UInt16, ColorInterp=Gray


I don't know if this was something fixed after 1.9.2 or if the problem is
the configuration of your coordinate system support files (ie pcs.csv).
 I'd encourage you to upgrade.  to 1.10.0 (the RC3 is available).

With regard to using this in GeoServer, somewhat strangely I am in the
midst of preparing a patch for GeoTools so that the WKT representation of
this produced by GDAL will work with GeoTools (and so GeoServer).  I
haven't yet filed the bug against GeoTools for this since I am still
working to get this through review internally here.

The gist of the change is that GeoTools does not recognise the
latitude_of_origin as also being the latitude of true scale - it uses the
pole for that.  Here is a patch against (I think) GeoTools 8.1.


====
//depot/google3/third_party/java_src/geotools/gt_referencing/java/org/geotools/referencing/operation/projection/PolarStereographic.java#1
-
/google/src/cloud/warmerdam/ee2/google3/third_party/java_src/geotools/gt_referencing/java/org/geotools/referencing/operation/projection/PolarStereographic.java
====
137,138c137,146
<             // Polar A case
<             latitudeTrueScale = (latitudeOfOrigin < 0) ? -PI/2 : PI/2;
---
>             // If we do not have standard_parallel, but we do have a
reasonable
>             // value for latitude of origin, then use that as the
latitude of
>             // true scale as documented at:
>             //
http://www.remotesensing.org/geotiff/proj_list/polar_stereographic.html
>             if (abs(latitudeOfOrigin) > PI / 4) {
>               latitudeTrueScale = latitudeOfOrigin;
>             } else {
>               // Polar A case
>               latitudeTrueScale = (latitudeOfOrigin < 0) ? -PI / 2 : PI /
2;
>             }
155d162
<         this.latitudeOfOrigin = (southPole) ? -(PI/2) : +(PI/2);
161c168
<         if (abs(latitudeTrueScale - PI/2) >= EPSILON) {
---
>         if (abs(latitudeTrueScale - PI / 2) >= EPSILON) {
386c393,397
<                 y = latitudeOfOrigin;
---
>                 if (southPole) {
>                   y = -(PI / 2);
>                 } else {
>                   y = (PI / 2);
>                 }

You can also manually manipulate the WKT coordinate system definition to
get it to work with GeoTools.  As a hackaround I used:

>       if (wkt.contains("Polar_Stereographic")) {
>         wkt = wkt
>             .replace("latitude_of_origin", "Standard_Parallel_1")
>             .replace("Polar_Stereographic", "Polar Stereographic (variant
B)")
>             .replace(",PARAMETER[\"scale_factor\",1]", "");
>       }

Lastly I will note that ESRI represents Polar Stereographic slightly
differently than GDAL.  It uses standard_parallel_1 instead of
latitude_of_origin for the latitude of true scale.  GDAL normally knows how
to make this adjustment when converting.


Best regards,
Frank

On Wed, Apr 24, 2013 at 9:54 AM, Cziferszky, Andreas <ancz at bas.ac.uk> wrote:

> Hi list,
>
> We are experiencing problems with GeoTIFF images generated by gdalwarp
> (v1.9.2) while map projecting towards a Polar Stereographic projection,
> particularly EPSG:3031 (although other PS map projections showed the same
> effect). The source image is a World Mercator (EPSG:3395) projected GeoTIFF
> which displays and reports map proejction info correctly in QGIS, ArcMap,
> and others. Running
>
> gdalwarp -s_srs EPSG:3395 -t_srs EPSG:3031 test.3395.tif test.3031.tif
>
> generates a GeoTIFF whose map projection info cannot be read using ArcMap
> (v10.1 in our case). For the out image gdalinfo is reporting
>
> >gdalinfo test.3031.tif
> Driver: GTiff/GeoTIFF
> Files: test.3031.tif
> Size is 398, 398
> Coordinate System is:
> LOCAL_CS["WGS 84 / Antarctic Polar Stereographic",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4326"]],
>     AUTHORITY["EPSG","3031"],
>     UNIT["metre",1]]
> ....
>
> Two items seem to be wrong/missing:
> 1) The LOCAL_CS definition instead of an expected PROJCS definition
> 2) No projection parameters like PROJECTION["Polar Stereographic..."],
> PARAMETER["central_meridian",0], UNIT["metre",1,..].. exist, only the
> AUTHORITY including EPSG code 3031.
>
> In addition, it appears that some (not all) GeoTIFF files projected using
> gdalwarp (1.9.1) into Polar Stereographic (EPSG:3031) as above cause
> problems when publishing via the Geoserver admin GUI (v2.2.x).  The problem
> appears when trying to save the raster layer's properties - the native SRS
> appears undefined, presumably because Geotools has had issues with the
> LOCAL_CS header, so that only "reproject native to declared" actually
> works.  The other two options ("keep native"  and "force declared") cause a
> stack trace, and failure to save the layer properties.
>
> Files are available at ftp://ftp.bas.ac.uk/ancz/test.3395.tif and
> ftp://ftp.bas.ac.uk/ancz/test.3031.tif
>
> Any help appreciated.
> Andreas
>
> This message (and any attachments) is for the recipient only. NERC is
> subject to the Freedom of Information Act 2000 and the contents of this
> email and any reply you make may be disclosed by NERC unless it is exempt
> from release under the Act. Any material supplied to NERC may be stored in
> an electronic records management system.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130424/2a00beef/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Apr 24 12:08:01 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 24 Apr 2013 21:08:01 +0200
Subject: [gdal-dev] [REMINDER] Motion: Promote 1.10.0RC4 for release -->
	RETRACTED
In-Reply-To: <5177D33B.4070709@mapgears.com>
References: <201304192341.17680.even.rouault@mines-paris.org>
	<5176CDFB.1000702@mapgears.com> <5177D33B.4070709@mapgears.com>
Message-ID: <201304242108.01636.even.rouault@mines-paris.org>

Le mercredi 24 avril 2013 14:42:35, Daniel Morissette a ?crit :
> Even,
> 
> Is the Spatialite issue in http://trac.osgeo.org/gdal/ticket/5060 a new
> regression in GDAL 1.10 or has this been around for a while?
> 
> If it is new in GDAL 1.10 then I am thinking of turning my vote to -1
> because this seems to be preventing the use of Spatialite with MapServer
> in mapfiles that used to work in the past (if I understood the comments
> in https://github.com/mapserver/mapserver/issues/4636 correctly)
> 
> What do you think?

I somehow thought support for spatialite views was new in 1.10, but it 
actually worked in 1.9, so it is a regression (related to the new support in 
1.10 for views with several geometry columns). So I'm also -1 and am issuing a 
RC5 with that fix (and a couple of others that went in the branch in between) 
right now.

From even.rouault at mines-paris.org  Wed Apr 24 12:09:27 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 24 Apr 2013 21:09:27 +0200
Subject: [gdal-dev] Motion: Promote 1.10.0RC5 for release
Message-ID: <201304242109.27989.even.rouault@mines-paris.org>

Motion: GDAL/OGR 1.10.0RC5 is promoted to be the official 1.10.0 final release.

---

I'll start the voting again with my :

+1 Even

---

The changes since RC4 are :
- #5060: Spatialite: avoid spatiliate views to emit (hidden) errors that cause 
troubles to MapServer OGR input driver  (which was the regression w.r.t. 1.9 
that triggered this RC5)
- #5059: GTiff: add validation of source overview characteristics with 
COPY_SRC_OVERVIEWS
- #2848: L1B: recognize NOAA-9/14 datasets whose dataset name in TBM header is 
encoded in EBCDIC and not in ASCII

I'm inviting - one more time (...) - PSC members to vote on this new motion.

Source Code:
  http://download.osgeo.org/gdal/gdal-1.10.0RC5.tar.gz
  http://download.osgeo.org/gdal/gdal-1.10.0RC5.tar.gz.md5
  http://download.osgeo.org/gdal/gdal1100RC5.zip
  http://download.osgeo.org/gdal/gdal1100RC5.zip.md5

Autotest Suite:
  http://download.osgeo.org/gdal/gdalautotest-1.10.0.tar.gz

Documentation:
  http://download.osgeo.org/gdal/gdal1100doc.zip

NEWS:
  http://svn.osgeo.org/gdal/tags/1.10.0/gdal/NEWS

Best regards,

Even

From sfkeller at gmail.com  Wed Apr 24 13:00:34 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Wed, 24 Apr 2013 22:00:34 +0200
Subject: [gdal-dev] MODIS Cloud Mask reprojection
Message-ID: <CAFcOn2_YjJMP700trj=nMjrA646zbXEf5JgLUUyg1rX6jJ3Htw@mail.gmail.com>

Hi Rudger

I have a similar problem like Laure in the former thread "MODIS
reprojection".
I'd like to process the most recent, high resolution and free cloud data of
middle Europe.
=> I think it's MODIS Terra and Acqua, right?

Below you see the result of rhe metadata of my input file.
How can I convert this to say EPSG:3857 (Mercator/Google)?
When I try gdalwarp and gdal_translate the resulting image is distorted and
shifted.
=> Do I need to preprocess this swath first using MRT Swath?

Yours, Stefan


$ gdalinfo -nogcp HDF4_EOS:EOS_SWATH:"modis.hdf":mod35:Cloud_Mask
Driver: HDF4Image/HDF4 Dataset
Files: test1.hdf
Size is 1354, 2030
Coordinate System is `'
Metadata:
  _FillValue=0
  add_offset=0
  ALGORITHMPACKAGEACCEPTANCEDATE=June 1997
  ALGORITHMPACKAGEMATURITYCODE=at-launch
  ALGORITHMPACKAGENAME=ATBD-MOD-06
  ALGORITHMPACKAGEVERSION=2
  ANCILLARYINPUTPOINTER=MOD03.A2013112.1055.005.2013112115237.NRT.hdf
  ANCILLARYINPUTTYPE=Geolocation
  ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
  ASSOCIATEDPLATFORMSHORTNAME=Terra
  ASSOCIATEDSENSORSHORTNAME=MODIS
  AUTOMATICQUALITYFLAG=Passed
  AUTOMATICQUALITYFLAGEXPLANATION=Passed if useable, Failed if not useable
  Cell_Across_Swath_Sampling=1, 1354, 1
  Cell_Along_Swath_Sampling=1, 2030, 1
  ClearPct250m=   33.62
  CLOUD_MASK_ALGORITHM_VERSION_NUMBER=    1.00
  CloudCoverPct250m=   66.38
  DAYNIGHTFLAG=Day
  DayProcessedPct=  100.00
  description=




 Bit fields within each byte are numbered from the left:

 7, 6, 5, 4, 3, 2, 1, 0.

 The left-most bit (bit 7) is the most significant bit.

 The right-most bit (bit 0) is the least significant bit.



 bit field       Description                             Key

 ---------       -----------                             ---



 0               Cloud Mask Flag                      0 = Not  determined

                                                      1 = Determined



 2, 1            Unobstructed FOV Quality Flag        00 = Cloudy

                                                      01 = Uncertain

                                                      10 = Probably  Clear

                                                      11 = Confident  Clear

                 PROCESSING PATH

                 ---------------

 3               Day or Night Path                    0 = Night  / 1 = Day

 4               Sunglint Path                        0 = Yes    / 1 = No

 5               Snow/Ice Background Path             0 = Yes    / 1 = No

 7, 6            Land or Water Path                   00 = Water

                                                      01 = Coastal

                                                      10 = Desert

                                                      11 = Land

 ____ END BYTE 1 ______________ ___________________________________________



 bit field       Description                             Key

 ---------       -----------                             ---



                 ADDITIONAL INFORMATION

                 ----------------------

 0               Non- cloud obstruction Flag              0 = Yes / 1 = No

 1               Thin Cirrus Detected  (Solar)           0 =  Yes / 1 = No

 2               Shadow Found                            0 =  Yes / 1 = No

 3               Thin Cirrus Detected  (Infrared)        0 =  Yes / 1 = No

 4               Adjacent Cloud Detected **              0 =  Yes / 1 = No

                 ** Implemented Post Launch to

                    Indicate cloud found within

                    surrounding 1 km pixels *



                 1-km CLOUD FLAGS

                 ----------------

 5               Cloud Flag -  IR Threshold               0 = Yes / 1 = No

 6               High Cloud Flag -  CO2 Test              0 = Yes / 1 = No

 7               High Cloud Flag -  6.7 micron Test       0 = Yes / 1 = No

 ____ END BYTE 2 ______________ ___________________________________________



 bit field       Description                             Key

 ---------       -----------                             ---



 0               High Cloud Flag -  1.38 micron Test      0 = Yes / 1 = No

 1               High Cloud Flag - 3.7- 12 micron Test    0 = Yes / 1 = No

 2               Cloud Flag -  IR Temperature             0 = Yes / 1 = No

                              Difference

 3               Cloud Flag - 3.7- 11 micron Test         0 = Yes / 1 = No

 4               Cloud Flag -  Visible Reflectance Test   0 = Yes / 1 = No

 5               Cloud Flag -  Visible Reflectance        0 = Yes / 1 = No

                              Ratio Test

 6               Cloud Flag -  NDVI Final Confidence      0 = Yes / 1 = No

                              Confirmation Test

 7               Cloud Flag - Night 7.3- 11 micron Test   0 = Yes / 1 = No

 ____ END BYTE 3 ______________ ___________________________________________



 bit field       Description                             Key

 ---------       -----------                             ---



                 ADDITIONAL TESTS

                 ----------------

 0               Cloud Flag -  Spare                      0 = Yes / 1 = No

 1               Cloud Flag -  Spatial Variability        0 = Yes / 1 = No

 2               Final Confidence Confirmation Test      0 =  Yes / 1 = No

 3               Cloud Flag -  Night Water                0 = Yes / 1 = No

                              Spatial Variability

 4               Suspended Dust Flag                     0 =  Yes / 1 = No



 5-7             Spares

 ____ END BYTE 4 ______________ ___________________________________________



 bit field       Description                             Key

 ---------       -----------                             ---



                 250-m Cloud Flag - Visible Tests

                 --------------------------------

 0               Element(1,1)                            0 =  Yes / 1 = No

 1               Element(1,2)                            0 =  Yes / 1 = No

 2               Element(1,3)                            0 =  Yes / 1 = No

 3               Element(1,4)                            0 =  Yes / 1 = No

 4               Element(2,1)                            0 =  Yes / 1 = No

 5               Element(2,2)                            0 =  Yes / 1 = No

 6               Element(2,3)                            0 =  Yes / 1 = No

 7               Element(2,4)                            0 =  Yes / 1 = No

 ____ END BYTE 5 ______________ ___________________________________________



 bit field       Description                             Key

 ----------      -----------                             ---



 0               Element(3,1)                            0 =  Yes / 1 = No

 1               Element(3,2)                            0 =  Yes / 1 = No

 2               Element(3,3)                            0 =  Yes / 1 = No

 3               Element(3,4)                            0 =  Yes / 1 = No

 4               Element(4,1)                            0 =  Yes / 1 = No

 5               Element(4,2)                            0 =  Yes / 1 = No

 6               Element(4,3)                            0 =  Yes / 1 = No

 7               Element(4,4)                            0 =  Yes / 1 = No

 ____ END BYTE 6 ______________ ___________________________________________


  DESCRREVISION=5.0
  EASTBOUNDINGCOORDINATE=27.983792228394
  EQUATORCROSSINGDATE=2013-04-22
  EQUATORCROSSINGLONGITUDE=-10.5355310197622
  EQUATORCROSSINGTIME=11:12:10.638063
  EXCLUSIONGRINGFLAG=N
  Geolocation_Pointer=External MODIS geolocation product
  GRINGPOINTLATITUDE=63.2076139095873, 57.1960273665282, 41.0114451068176,
44.9126646972378
  GRINGPOINTLONGITUDE=-14.1048478023953, 27.9851830412684,
14.6542811157768, -14.2028294853094
  GRINGPOINTSEQUENCENO=1, 2, 3, 4
  HDFEOSVersion=HDFEOS_V2.9
  HighConfidentClearPct=    2.09
  history=$Id: MOD35.V2.CDL,v 1.1.2.5 2002/09/16 18:24:50 raf Exp $


  INPUTPOINTER=MOD03.A2013112.1055.005.2013112115237.NRT.hdf,
MOD021KM.A2013112.1055.005.2013112115616.NRT.hdf,
MOD02QKM.A2013112.1055.005.2013112115616.NRT.hdf, goge1_2_img.v1,
ecosystem.img.v1, thresholds.dat.terra.v13, gfs.t06.130422.pgrbf06,
oisst.20130417, eng.130421, NISE_SSMISF17_20130421.HDFEOS,
destripe_config_terra.dat.v2
  INSTRUMENTNAME=Moderate Resolution Imaging Spectroradiometer
  LandProcessedPct=   56.56
  LOCALGRANULEID=MOD35_L2.A2013112.1055.005.2013112115902.NRT.hdf
  LOCALINPUTGRANULEID=MOD03.A2013112.1055.005.2013112115237.NRT.hdf,
MOD021KM.A2013112.1055.005.2013112115616.NRT.hdf,
MOD02QKM.A2013112.1055.005.2013112115616.NRT.hdf, goge1_2_img.v1,
ecosystem.img.v1, thresholds.dat.terra.v13, gfs.t06.130422.pgrbf06,
oisst.20130417, eng.130421, NISE_SSMISF17_20130421.HDFEOS
  LOCALVERSIONID=005
  long_name=MODIS Cloud Mask and Spectral Test Results
  LONGNAME=MODIS/Terra Cloud Mask and Spectral Test Results 5-Min L2 Swath
250m and 1km
  LowConfidentClearPct=   71.01
  Maximum_Number_of_1km_Frames=1354
  MaxSolarZenithAngle=   54.95
  MinSolarZenithAngle=   28.82
  NightProcessedPct=    0.00
  NonCloudObstructionFoundPct=    0.64
  NORTHBOUNDINGCOORDINATE=63.2313776766876
  Number_of_Instrument_Scans=2030
  ORBITNUMBER=70979
  Parameter_Type=Output
  PARAMETERNAME=Cloud_Mask
  PGEVERSION=PGE03:5.3.11
  PROCESSINGENVIRONMENT=Linux nrt1min104 2.6.18-238.19.1.el5PAE #1 SMP Fri
Jul 15 08:15:44 EDT 2011 i686 i686 i386 GNU/Linux
  PRODUCTIONDATETIME=2013-04-22T11:59:02.000Z
  PRODUCTIONHISTORY=PGE03:5.3.11
  QAPERCENTMISSINGDATA=0
  RANGEBEGINNINGDATE=2013-04-22
  RANGEBEGINNINGTIME=10:55:00.000000
  RANGEENDINGDATE=2013-04-22
  RANGEENDINGTIME=11:00:00.000000
  RCS_Id= $Id: thresholds.dat.terra.v13,v 1.1 2005/02/22 22:05:40 gumley
Exp $
  REPROCESSINGACTUAL=Near Real Time
  REPROCESSINGPLANNED=further update is anticipated
  scale_factor=1
  SCIENCEQUALITYFLAG=Not Investigated
  SCIENCEQUALITYFLAGEXPLANATION=See
http://modis-atmos.gsfc.nasa.gov/validation.html for more details on MODIS
Atmosphere data quality.
  ShadowFoundPct=    0.03
  SHORTNAME=MOD35_L2
  Snow_IceSurfaceProcessedPct=    0.16
  SOUTHBOUNDINGCOORDINATE=41.1487274178468
  SuccessfulRetrievalPct=  100.00
  SunglintProcessedPct=   13.53
  ThinCirrusIR_FoundPct=    6.77
  ThinCirrusSolarFoundPct=   27.58
  title=MODIS Level 2 Cloud Mask


  UncertainConfidentClearPct=    2.96
  units=none
  UW_DESTRIPE_CONFIG=# Terra MODIS destriping configuration $Id:
destripe_config_terra.dat.v2,v 1.2 2007/12/20 gumley Exp $
  UW_DESTRIPE_LWIR=$Id: hdf_destripe_new.f90,v 1.8 2004/06/24 14:25:27
gumley Exp $
  valid_range=0, 255
  VERSIONID=5
  VeryHighConfidentClearPct=   23.94
  WaterProcessedPct=   43.44
  WESTBOUNDINGCOORDINATE=-14.2008628227747
Geolocation:
  LINE_OFFSET=2
  LINE_STEP=5
  PIXEL_OFFSET=2
  PIXEL_STEP=5
  X_BAND=1
  X_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"test1.hdf":mod35:Longitude
  Y_BAND=1
  Y_DATASET=HDF4_EOS:EOS_SWATH_GEOL:"test1.hdf":mod35:Latitude
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 2030.0)
Upper Right ( 1354.0,    0.0)
Lower Right ( 1354.0, 2030.0)
Center      (  677.0, 1015.0)
Band 1 Block=1354x738 Type=Byte, ColorInterp=Gray
  Description = MODIS Cloud Mask and Spectral Test Results
  NoData Value=0
  Unit Type: none
Band 2 Block=1354x738 Type=Byte, ColorInterp=Gray
  Description = MODIS Cloud Mask and Spectral Test Results
  NoData Value=0
  Unit Type: none
Band 3 Block=1354x738 Type=Byte, ColorInterp=Gray
  Description = MODIS Cloud Mask and Spectral Test Results
  NoData Value=0
  Unit Type: none
Band 4 Block=1354x738 Type=Byte, ColorInterp=Gray
  Description = MODIS Cloud Mask and Spectral Test Results
  NoData Value=0
  Unit Type: none
Band 5 Block=1354x738 Type=Byte, ColorInterp=Gray
  Description = MODIS Cloud Mask and Spectral Test Results
  NoData Value=0
  Unit Type: none
Band 6 Block=1354x738 Type=Byte, ColorInterp=Gray
  Description = MODIS Cloud Mask and Spectral Test Results
  NoData Value=0
  Unit Type: none
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130424/ed2deb89/attachment-0001.html>

From dmorissette at mapgears.com  Wed Apr 24 13:07:33 2013
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed, 24 Apr 2013 16:07:33 -0400
Subject: [gdal-dev] Motion: Promote 1.10.0RC5 for release
In-Reply-To: <201304242109.27989.even.rouault@mines-paris.org>
References: <201304242109.27989.even.rouault@mines-paris.org>
Message-ID: <51783B85.9050501@mapgears.com>

+1

Thank you!

Daniel


On 13-04-24 3:09 PM, Even Rouault wrote:
> Motion: GDAL/OGR 1.10.0RC5 is promoted to be the official 1.10.0 final release.
>
> ---
>
> I'll start the voting again with my :
>
> +1 Even
>
> ---
>
> The changes since RC4 are :
> - #5060: Spatialite: avoid spatiliate views to emit (hidden) errors that cause
> troubles to MapServer OGR input driver  (which was the regression w.r.t. 1.9
> that triggered this RC5)
> - #5059: GTiff: add validation of source overview characteristics with
> COPY_SRC_OVERVIEWS
> - #2848: L1B: recognize NOAA-9/14 datasets whose dataset name in TBM header is
> encoded in EBCDIC and not in ASCII
>
> I'm inviting - one more time (...) - PSC members to vote on this new motion.
>
> Source Code:
>    http://download.osgeo.org/gdal/gdal-1.10.0RC5.tar.gz
>    http://download.osgeo.org/gdal/gdal-1.10.0RC5.tar.gz.md5
>    http://download.osgeo.org/gdal/gdal1100RC5.zip
>    http://download.osgeo.org/gdal/gdal1100RC5.zip.md5
>
> Autotest Suite:
>    http://download.osgeo.org/gdal/gdalautotest-1.10.0.tar.gz
>
> Documentation:
>    http://download.osgeo.org/gdal/gdal1100doc.zip
>
> NEWS:
>    http://svn.osgeo.org/gdal/tags/1.10.0/gdal/NEWS
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From dshean at gmail.com  Wed Apr 24 17:10:36 2013
From: dshean at gmail.com (David Shean)
Date: Wed, 24 Apr 2013 17:10:36 -0700
Subject: [gdal-dev] gdal re-projeciton problem with Polar Stereographic
	projections
In-Reply-To: <CA+YzLBfxEk9QW-Q75TOUFE4pcwbue=RTPNY+ZMjBbETYRaKVvA@mail.gmail.com>
References: <1DCCED50D0696A498958BA6B254456E222FE166F6D@nerckwmb1.ad.nerc.ac.uk>
	<40829B0E077C1145A6DE44D39B3830A922B66D65F5@nerckwmb1.ad.nerc.ac.uk>
	<1DCCED50D0696A498958BA6B254456E222FE166F6F@nerckwmb1.ad.nerc.ac.uk>
	<CA+YzLBfxEk9QW-Q75TOUFE4pcwbue=RTPNY+ZMjBbETYRaKVvA@mail.gmail.com>
Message-ID: <1C98AD7C-47D5-47F4-B325-99EFCC047DE2@gmail.com>

Frank and Andreas,
I've experienced similar issues for years when using EPSG codes for polar stereographic projections (e.g., EPSG:3031, EPSG:3413).  Thanks for reporting Andreas. 

My workaround for this issue is to provide the full proj4 string to gdalwarp instead of the EPSG code.  This string can be extracted with gdalsrsinfo utility or the osr ImportFromEPSG method.

I just performed a quick test with trunk gdalwarp (GDAL 1.10.0, released 2013/04/13) with -t_srs EPSG:3413, and experienced the same issues described by Andreas.  Using a UTM code for -t_srs EPSG:32622 works fine, with appropriate PROJCS tags in the output gtiff.
-David

On Apr 24, 2013, at 10:38 AM, Frank Warmerdam <warmerdam at pobox.com> wrote:

> Andreas,
> 
> I have downloaded test.3031.tif and run gdalinfo (trunk) against it and get the right results:
> 
> Driver: GTiff/GeoTIFF
> Files: test.3031.tif
> Size is 398, 398
> Coordinate System is:
> PROJCS["WGS 84 / Antarctic Polar Stereographic",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Polar_Stereographic"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",0],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","3031"]]
> Origin = (-2054532.574583648238331,1166857.038436320610344)
> Pixel Size = (125.204255282867464,-125.204255282867464)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (-2054532.575, 1166857.038) (119d35'38.75"W, 49d32' 9.40"N)
> Lower Left  (-2054532.575, 1117025.745) (118d31'56.70"W, 49d55' 6.39"N)
> Upper Right (-2004701.281, 1166857.038) (120d12' 7.15"W, 50d13' 9.00"N)
> Lower Right (-2004701.281, 1117025.745) (119d 7'36.07"W, 50d36'37.86"N)
> Center      (-2029616.928, 1141941.392) (119d21'49.67"W, 50d 4'21.54"N)
> Band 1 Block=398x10 Type=UInt16, ColorInterp=Gray
> 
> 
> I don't know if this was something fixed after 1.9.2 or if the problem is the configuration of your coordinate system support files (ie pcs.csv).  I'd encourage you to upgrade.  to 1.10.0 (the RC3 is available). 
> 
> With regard to using this in GeoServer, somewhat strangely I am in the midst of preparing a patch for GeoTools so that the WKT representation of this produced by GDAL will work with GeoTools (and so GeoServer).  I haven't yet filed the bug against GeoTools for this since I am still working to get this through review internally here.  
> 
> The gist of the change is that GeoTools does not recognise the latitude_of_origin as also being the latitude of true scale - it uses the pole for that.  Here is a patch against (I think) GeoTools 8.1.  
> 
> 
> ==== //depot/google3/third_party/java_src/geotools/gt_referencing/java/org/geotools/referencing/operation/projection/PolarStereographic.java#1 - /google/src/cloud/warmerdam/ee2/google3/third_party/java_src/geotools/gt_referencing/java/org/geotools/referencing/operation/projection/PolarStereographic.java ====
> 137,138c137,146
> <             // Polar A case
> <             latitudeTrueScale = (latitudeOfOrigin < 0) ? -PI/2 : PI/2;
> ---
> >             // If we do not have standard_parallel, but we do have a reasonable
> >             // value for latitude of origin, then use that as the latitude of
> >             // true scale as documented at:
> >             // http://www.remotesensing.org/geotiff/proj_list/polar_stereographic.html
> >             if (abs(latitudeOfOrigin) > PI / 4) {
> >               latitudeTrueScale = latitudeOfOrigin;
> >             } else {
> >               // Polar A case
> >               latitudeTrueScale = (latitudeOfOrigin < 0) ? -PI / 2 : PI / 2;
> >             }
> 155d162
> <         this.latitudeOfOrigin = (southPole) ? -(PI/2) : +(PI/2);
> 161c168
> <         if (abs(latitudeTrueScale - PI/2) >= EPSILON) {
> ---
> >         if (abs(latitudeTrueScale - PI / 2) >= EPSILON) {
> 386c393,397
> <                 y = latitudeOfOrigin;
> ---
> >                 if (southPole) {
> >                   y = -(PI / 2);
> >                 } else {
> >                   y = (PI / 2);
> >                 }
> 
> You can also manually manipulate the WKT coordinate system definition to get it to work with GeoTools.  As a hackaround I used:
> 
> >       if (wkt.contains("Polar_Stereographic")) {
> >         wkt = wkt
> >             .replace("latitude_of_origin", "Standard_Parallel_1")
> >             .replace("Polar_Stereographic", "Polar Stereographic (variant B)")
> >             .replace(",PARAMETER[\"scale_factor\",1]", "");
> >       }
> 
> Lastly I will note that ESRI represents Polar Stereographic slightly differently than GDAL.  It uses standard_parallel_1 instead of latitude_of_origin for the latitude of true scale.  GDAL normally knows how to make this adjustment when converting. 
> 
> 
> Best regards,
> Frank
> 
> On Wed, Apr 24, 2013 at 9:54 AM, Cziferszky, Andreas <ancz at bas.ac.uk> wrote:
> Hi list,
> 
> We are experiencing problems with GeoTIFF images generated by gdalwarp (v1.9.2) while map projecting towards a Polar Stereographic projection, particularly EPSG:3031 (although other PS map projections showed the same effect). The source image is a World Mercator (EPSG:3395) projected GeoTIFF which displays and reports map proejction info correctly in QGIS, ArcMap, and others. Running
> 
> gdalwarp -s_srs EPSG:3395 -t_srs EPSG:3031 test.3395.tif test.3031.tif
> 
> generates a GeoTIFF whose map projection info cannot be read using ArcMap (v10.1 in our case). For the out image gdalinfo is reporting
> 
> >gdalinfo test.3031.tif
> Driver: GTiff/GeoTIFF
> Files: test.3031.tif
> Size is 398, 398
> Coordinate System is:
> LOCAL_CS["WGS 84 / Antarctic Polar Stereographic",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4326"]],
>     AUTHORITY["EPSG","3031"],
>     UNIT["metre",1]]
> ....
> 
> Two items seem to be wrong/missing:
> 1) The LOCAL_CS definition instead of an expected PROJCS definition
> 2) No projection parameters like PROJECTION["Polar Stereographic..."], PARAMETER["central_meridian",0], UNIT["metre",1,..].. exist, only the AUTHORITY including EPSG code 3031.
> 
> In addition, it appears that some (not all) GeoTIFF files projected using gdalwarp (1.9.1) into Polar Stereographic (EPSG:3031) as above cause problems when publishing via the Geoserver admin GUI (v2.2.x).  The problem appears when trying to save the raster layer's properties - the native SRS appears undefined, presumably because Geotools has had issues with the LOCAL_CS header, so that only "reproject native to declared" actually works.  The other two options ("keep native"  and "force declared") cause a stack trace, and failure to save the layer properties.
> 
> Files are available at ftp://ftp.bas.ac.uk/ancz/test.3395.tif and ftp://ftp.bas.ac.uk/ancz/test.3031.tif
> 
> Any help appreciated.
> Andreas
> 
> This message (and any attachments) is for the recipient only. NERC is subject to the Freedom of Information Act 2000 and the contents of this email and any reply you make may be disclosed by NERC unless it is exempt from release under the Act. Any material supplied to NERC may be stored in an electronic records management system.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130424/61133c8f/attachment.html>

From warmerdam at pobox.com  Wed Apr 24 17:41:20 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 24 Apr 2013 17:41:20 -0700
Subject: [gdal-dev] gdal re-projeciton problem with Polar Stereographic
	projections
In-Reply-To: <1C98AD7C-47D5-47F4-B325-99EFCC047DE2@gmail.com>
References: <1DCCED50D0696A498958BA6B254456E222FE166F6D@nerckwmb1.ad.nerc.ac.uk>
	<40829B0E077C1145A6DE44D39B3830A922B66D65F5@nerckwmb1.ad.nerc.ac.uk>
	<1DCCED50D0696A498958BA6B254456E222FE166F6F@nerckwmb1.ad.nerc.ac.uk>
	<CA+YzLBfxEk9QW-Q75TOUFE4pcwbue=RTPNY+ZMjBbETYRaKVvA@mail.gmail.com>
	<1C98AD7C-47D5-47F4-B325-99EFCC047DE2@gmail.com>
Message-ID: <CA+YzLBdTYYbxA_-j70c47_dQCmjSJa+F=Q-VbraNW3Pj+4dyDQ@mail.gmail.com>

Folks,

It seems I neglected to review the output from the gdalinfo I posted before
closely.  I now notice it reports the latitude_of_origin as 0 isntead of
-71 as it ought to for EPSG:3031.  I believe this is a bug in the GeoTIFF
code for reconsituting an SRS.  On the other hand my "gdalsrsinfo
EPSG:3031" does produce the latitude_of_origin as -71 as desired.

Andreas, could you file a bug on this issue?

Best regards,
Frank



On Wed, Apr 24, 2013 at 5:10 PM, David Shean <dshean at gmail.com> wrote:

> Frank and Andreas,
> I've experienced similar issues for years when using EPSG codes for polar
> stereographic projections (e.g., EPSG:3031, EPSG:3413).  Thanks for
> reporting Andreas.
>
> My workaround for this issue is to provide the full proj4 string to
> gdalwarp instead of the EPSG code.  This string can be extracted with
> gdalsrsinfo utility or the osr ImportFromEPSG method.
>
> I just performed a quick test with trunk gdalwarp (GDAL 1.10.0, released
> 2013/04/13) with -t_srs EPSG:3413, and experienced the same issues
> described by Andreas.  Using a UTM code for -t_srs EPSG:32622 works fine,
> with appropriate PROJCS tags in the output gtiff.
> -David
>
> On Apr 24, 2013, at 10:38 AM, Frank Warmerdam <warmerdam at pobox.com> wrote:
>
> Andreas,
>
> I have downloaded test.3031.tif and run gdalinfo (trunk) against it and
> get the right results:
>
> Driver: GTiff/GeoTIFF
> Files: test.3031.tif
> Size is 398, 398
> Coordinate System is:
> PROJCS["WGS 84 / Antarctic Polar Stereographic",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Polar_Stereographic"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",0],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","3031"]]
> Origin = (-2054532.574583648238331,1166857.038436320610344)
> Pixel Size = (125.204255282867464,-125.204255282867464)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (-2054532.575, 1166857.038) (119d35'38.75"W, 49d32' 9.40"N)
> Lower Left  (-2054532.575, 1117025.745) (118d31'56.70"W, 49d55' 6.39"N)
> Upper Right (-2004701.281, 1166857.038) (120d12' 7.15"W, 50d13' 9.00"N)
> Lower Right (-2004701.281, 1117025.745) (119d 7'36.07"W, 50d36'37.86"N)
> Center      (-2029616.928, 1141941.392) (119d21'49.67"W, 50d 4'21.54"N)
> Band 1 Block=398x10 Type=UInt16, ColorInterp=Gray
>
>
> I don't know if this was something fixed after 1.9.2 or if the problem is
> the configuration of your coordinate system support files (ie pcs.csv).
>  I'd encourage you to upgrade.  to 1.10.0 (the RC3 is available).
>
> With regard to using this in GeoServer, somewhat strangely I am in the
> midst of preparing a patch for GeoTools so that the WKT representation of
> this produced by GDAL will work with GeoTools (and so GeoServer).  I
> haven't yet filed the bug against GeoTools for this since I am still
> working to get this through review internally here.
>
> The gist of the change is that GeoTools does not recognise the
> latitude_of_origin as also being the latitude of true scale - it uses the
> pole for that.  Here is a patch against (I think) GeoTools 8.1.
>
>
> ====
> //depot/google3/third_party/java_src/geotools/gt_referencing/java/org/geotools/referencing/operation/projection/PolarStereographic.java#1
> -
> /google/src/cloud/warmerdam/ee2/google3/third_party/java_src/geotools/gt_referencing/java/org/geotools/referencing/operation/projection/PolarStereographic.java
> ====
> 137,138c137,146
> <             // Polar A case
> <             latitudeTrueScale = (latitudeOfOrigin < 0) ? -PI/2 : PI/2;
> ---
> >             // If we do not have standard_parallel, but we do have a
> reasonable
> >             // value for latitude of origin, then use that as the
> latitude of
> >             // true scale as documented at:
> >             //
> http://www.remotesensing.org/geotiff/proj_list/polar_stereographic.html
> >             if (abs(latitudeOfOrigin) > PI / 4) {
> >               latitudeTrueScale = latitudeOfOrigin;
> >             } else {
> >               // Polar A case
> >               latitudeTrueScale = (latitudeOfOrigin < 0) ? -PI / 2 : PI
> / 2;
> >             }
> 155d162
> <         this.latitudeOfOrigin = (southPole) ? -(PI/2) : +(PI/2);
> 161c168
> <         if (abs(latitudeTrueScale - PI/2) >= EPSILON) {
> ---
> >         if (abs(latitudeTrueScale - PI / 2) >= EPSILON) {
> 386c393,397
> <                 y = latitudeOfOrigin;
> ---
> >                 if (southPole) {
> >                   y = -(PI / 2);
> >                 } else {
> >                   y = (PI / 2);
> >                 }
>
> You can also manually manipulate the WKT coordinate system definition to
> get it to work with GeoTools.  As a hackaround I used:
>
> >       if (wkt.contains("Polar_Stereographic")) {
> >         wkt = wkt
> >             .replace("latitude_of_origin", "Standard_Parallel_1")
> >             .replace("Polar_Stereographic", "Polar Stereographic
> (variant B)")
> >             .replace(",PARAMETER[\"scale_factor\",1]", "");
> >       }
>
> Lastly I will note that ESRI represents Polar Stereographic slightly
> differently than GDAL.  It uses standard_parallel_1 instead of
> latitude_of_origin for the latitude of true scale.  GDAL normally knows how
> to make this adjustment when converting.
>
>
> Best regards,
> Frank
>
> On Wed, Apr 24, 2013 at 9:54 AM, Cziferszky, Andreas <ancz at bas.ac.uk>wrote:
>
>> Hi list,
>>
>> We are experiencing problems with GeoTIFF images generated by gdalwarp
>> (v1.9.2) while map projecting towards a Polar Stereographic projection,
>> particularly EPSG:3031 (although other PS map projections showed the same
>> effect). The source image is a World Mercator (EPSG:3395) projected GeoTIFF
>> which displays and reports map proejction info correctly in QGIS, ArcMap,
>> and others. Running
>>
>> gdalwarp -s_srs EPSG:3395 -t_srs EPSG:3031 test.3395.tif test.3031.tif
>>
>> generates a GeoTIFF whose map projection info cannot be read using ArcMap
>> (v10.1 in our case). For the out image gdalinfo is reporting
>>
>> >gdalinfo test.3031.tif
>> Driver: GTiff/GeoTIFF
>> Files: test.3031.tif
>> Size is 398, 398
>> Coordinate System is:
>> LOCAL_CS["WGS 84 / Antarctic Polar Stereographic",
>>     GEOGCS["WGS 84",
>>         DATUM["WGS_1984",
>>             SPHEROID["WGS 84",6378137,298.257223563,
>>                 AUTHORITY["EPSG","7030"]],
>>             AUTHORITY["EPSG","6326"]],
>>         PRIMEM["Greenwich",0],
>>         UNIT["degree",0.0174532925199433],
>>         AUTHORITY["EPSG","4326"]],
>>     AUTHORITY["EPSG","3031"],
>>     UNIT["metre",1]]
>> ....
>>
>> Two items seem to be wrong/missing:
>> 1) The LOCAL_CS definition instead of an expected PROJCS definition
>> 2) No projection parameters like PROJECTION["Polar Stereographic..."],
>> PARAMETER["central_meridian",0], UNIT["metre",1,..].. exist, only the
>> AUTHORITY including EPSG code 3031.
>>
>> In addition, it appears that some (not all) GeoTIFF files projected using
>> gdalwarp (1.9.1) into Polar Stereographic (EPSG:3031) as above cause
>> problems when publishing via the Geoserver admin GUI (v2.2.x).  The problem
>> appears when trying to save the raster layer's properties - the native SRS
>> appears undefined, presumably because Geotools has had issues with the
>> LOCAL_CS header, so that only "reproject native to declared" actually
>> works.  The other two options ("keep native"  and "force declared") cause a
>> stack trace, and failure to save the layer properties.
>>
>> Files are available at ftp://ftp.bas.ac.uk/ancz/test.3395.tif and
>> ftp://ftp.bas.ac.uk/ancz/test.3031.tif
>>
>> Any help appreciated.
>> Andreas
>>
>> This message (and any attachments) is for the recipient only. NERC is
>> subject to the Freedom of Information Act 2000 and the contents of this
>> email and any reply you make may be disclosed by NERC unless it is exempt
>> from release under the Act. Any material supplied to NERC may be stored in
>> an electronic records management system.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>  _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130424/143dac7c/attachment-0001.html>

From Stefan.Blumentrath at nina.no  Thu Apr 25 01:58:33 2013
From: Stefan.Blumentrath at nina.no (SBL)
Date: Thu, 25 Apr 2013 01:58:33 -0700 (PDT)
Subject: [gdal-dev] Compile GDAL/OGR with SOSI support
In-Reply-To: <5167FEE2.2090207@gatewaygeomatics.com>
References: <1365419782783-5045207.post@n6.nabble.com>
	<C9A67673-5322-4DA9-89F8-4A67732E94A1@skogoglandskap.no>
	<5163FBA7.5030704@gatewaygeomatics.com>
	<1365582377248-5045729.post@n6.nabble.com>
	<1365758783301-5046341.post@n6.nabble.com>
	<5167FEE2.2090207@gatewaygeomatics.com>
Message-ID: <1366880313569-5049558.post@n6.nabble.com>

Done.

See:  http://trac.osgeo.org/gdal/wiki/SOSI
<http://trac.osgeo.org/gdal/wiki/SOSI>  

Cheers
Stefan



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Compile-GDAL-OGR-with-SOSI-support-tp5045207p5049558.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From emmanuel.sambale at gmail.com  Thu Apr 25 03:59:28 2013
From: emmanuel.sambale at gmail.com (maning sambale)
Date: Thu, 25 Apr 2013 18:59:28 +0800
Subject: [gdal-dev] create only line shapefile
Message-ID: <CAPzumuGjW9eYF9VeUu9UTKsNZfFHbfoqUwHFCrzwZ3Fad4p-FQ@mail.gmail.com>

I have this syntax:

ogr2ogr -f "ESRI Shapefile" test_osm.shp philippines.osm.pbf -lco SHPT=ARC \
-skipfailures -progress --config OSM_CONFIG_FILE osmconf.ini \
-select name,highway,oneway,maxspeed,access,lanes \
-where "highway is not null" -clipsrc ph_province.shp \
-clipsrcsql "SELECT * FROM ph_province WHERE provname='metro_manila'"

I basically want to extract just the highways in the metro_manila polygon.
But I still get 4 shapefiles (point, line, multilinestrings,
multipolygons, other_relations).
Except for the line.shp, all the other shapefiles are empty.

I defined -lco SHPT=ARC.

How do I just get the lines.shp?


--
cheers,
maning
------------------------------------------------------
"Freedom is still the most radical idea of all" -N.Branden
wiki: http://esambale.wikispaces.com/
blog: http://epsg4253.wordpress.com/
------------------------------------------------------

From jefflacostegdal at gmail.com  Thu Apr 25 07:07:05 2013
From: jefflacostegdal at gmail.com (Jeff Lacoste)
Date: Thu, 25 Apr 2013 10:07:05 -0400
Subject: [gdal-dev] Geopdf dependency on Poppler and Visual Studio 2012
Message-ID: <CAFOE_Bd7CfSHTGhKg8jSTxxv8-nhNi88gN4G+LbCcrjZ=ZVMPw@mail.gmail.com>

Hi,

I'm trying to build GDAL using Visual Studio 2012 and run into an issue
with Geopdf format.
This format depends on Poppler (or podofo) 3rd party component.
Is there a VS 2012 compatible Poppler library for win32 and x64 bits ?

I downloaded the Poppler library from http://vbkto.dyndns.org:1280/sdk/ but
it appears
to be a static .lib built using Visual Studio 2010. If it was a stub .lib
(with run time .dll) I can
consume it from Visual Studio 2012, but its unfortunately a static .lib
(that VS 2012 can not link without errors).


Thanks
Jeff
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130425/84ec4148/attachment.html>

From jluis at ualg.pt  Thu Apr 25 07:40:33 2013
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu, 25 Apr 2013 15:40:33 +0100
Subject: [gdal-dev] Geopdf dependency on Poppler and Visual Studio 2012
In-Reply-To: <CAFOE_Bd7CfSHTGhKg8jSTxxv8-nhNi88gN4G+LbCcrjZ=ZVMPw@mail.gmail.com>
References: <CAFOE_Bd7CfSHTGhKg8jSTxxv8-nhNi88gN4G+LbCcrjZ=ZVMPw@mail.gmail.com>
Message-ID: <51794061.1050609@ualg.pt>

Jeff,

I built it from from source (from the git repo actually) and don't 
remember to have had any particular problem. They provide a cmake 
solution, which creates only a static lib but it linked fine with my 
VS2012 GDAL build.

Joaquim

> Hi,
>
> I'm trying to build GDAL using Visual Studio 2012 and run into an 
> issue with Geopdf format.
> This format depends on Poppler (or podofo) 3rd party component.
> Is there a VS 2012 compatible Poppler library for win32 and x64 bits ?
>
> I downloaded the Poppler library from 
> http://vbkto.dyndns.org:1280/sdk/ but it appears
> to be a static .lib built using Visual Studio 2010. If it was a stub 
> .lib (with run time .dll) I can
> consume it from Visual Studio 2012, but its unfortunately a static 
> .lib (that VS 2012 can not link without errors).
>
>
> Thanks
> Jeff
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130425/c991b960/attachment.html>

From jukka.rahkonen at mmmtike.fi  Thu Apr 25 10:13:38 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 25 Apr 2013 17:13:38 +0000 (UTC)
Subject: [gdal-dev] create only line shapefile
References: <CAPzumuGjW9eYF9VeUu9UTKsNZfFHbfoqUwHFCrzwZ3Fad4p-FQ@mail.gmail.com>
Message-ID: <loom.20130425T190828-760@post.gmane.org>

maning sambale <emmanuel.sambale <at> gmail.com> writes:

> 
> I have this syntax:
> 
> ogr2ogr -f "ESRI Shapefile" test_osm.shp philippines.osm.pbf -lco SHPT=ARC \
> -skipfailures -progress --config OSM_CONFIG_FILE osmconf.ini \
> -select name,highway,oneway,maxspeed,access,lanes \
> -where "highway is not null" -clipsrc ph_province.shp \
> -clipsrcsql "SELECT * FROM ph_province WHERE provname='metro_manila'"
> 
> I basically want to extract just the highways in the metro_manila polygon.
> But I still get 4 shapefiles (point, line, multilinestrings,
> multipolygons, other_relations).
> Except for the line.shp, all the other shapefiles are empty.
> 
> I defined -lco SHPT=ARC.
> 
> How do I just get the lines.shp?

Try with -sql instead of -select and -where

-sql "select name, highway, oneway, maxspeed, access, lanes from lines where
highway is not null"

-Jukka Rahkonen-


From etourigny.dev at gmail.com  Thu Apr 25 15:59:28 2013
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 25 Apr 2013 19:59:28 -0300
Subject: [gdal-dev] Compile GDAL/OGR with SOSI support
In-Reply-To: <1366880313569-5049558.post@n6.nabble.com>
References: <1365419782783-5045207.post@n6.nabble.com>
	<C9A67673-5322-4DA9-89F8-4A67732E94A1@skogoglandskap.no>
	<5163FBA7.5030704@gatewaygeomatics.com>
	<1365582377248-5045729.post@n6.nabble.com>
	<1365758783301-5046341.post@n6.nabble.com>
	<5167FEE2.2090207@gatewaygeomatics.com>
	<1366880313569-5049558.post@n6.nabble.com>
Message-ID: <CA+TxYvOjUDrE3ZOBYBeKKbdjV5BHJhm3wn_be5+TZ2Eqw1eYBg@mail.gmail.com>

Whoever is responsible for the GDAL SOSI driver (at the github project
linked in the wiki) should consider contributing their code to the main
gdal codebase (dev version/trunk of course)

Cheers
Etienne

On Thu, Apr 25, 2013 at 5:58 AM, SBL <Stefan.Blumentrath at nina.no> wrote:

> Done.
>
> See:  http://trac.osgeo.org/gdal/wiki/SOSI
> <http://trac.osgeo.org/gdal/wiki/SOSI>
>
> Cheers
> Stefan
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Compile-GDAL-OGR-with-SOSI-support-tp5045207p5049558.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130425/86c367ad/attachment.html>

From emmanuel.sambale at gmail.com  Thu Apr 25 19:25:29 2013
From: emmanuel.sambale at gmail.com (maning sambale)
Date: Fri, 26 Apr 2013 10:25:29 +0800
Subject: [gdal-dev] create only line shapefile
In-Reply-To: <loom.20130425T190828-760@post.gmane.org>
References: <CAPzumuGjW9eYF9VeUu9UTKsNZfFHbfoqUwHFCrzwZ3Fad4p-FQ@mail.gmail.com>
	<loom.20130425T190828-760@post.gmane.org>
Message-ID: <CAPzumuEGbndNZEgR8ijo50+SPD4UXagC=4r1+P7Hey9xYihrOw@mail.gmail.com>

Thanks Jukka!  Works flawlessly and it seems to be much faster even
with the clipping.

On Fri, Apr 26, 2013 at 1:13 AM, Jukka Rahkonen
<jukka.rahkonen at mmmtike.fi> wrote:
> maning sambale <emmanuel.sambale <at> gmail.com> writes:
>
>>
>> I have this syntax:
>>
>> ogr2ogr -f "ESRI Shapefile" test_osm.shp philippines.osm.pbf -lco SHPT=ARC \
>> -skipfailures -progress --config OSM_CONFIG_FILE osmconf.ini \
>> -select name,highway,oneway,maxspeed,access,lanes \
>> -where "highway is not null" -clipsrc ph_province.shp \
>> -clipsrcsql "SELECT * FROM ph_province WHERE provname='metro_manila'"
>>
>> I basically want to extract just the highways in the metro_manila polygon.
>> But I still get 4 shapefiles (point, line, multilinestrings,
>> multipolygons, other_relations).
>> Except for the line.shp, all the other shapefiles are empty.
>>
>> I defined -lco SHPT=ARC.
>>
>> How do I just get the lines.shp?
>
> Try with -sql instead of -select and -where
>
> -sql "select name, highway, oneway, maxspeed, access, lanes from lines where
> highway is not null"
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
cheers,
maning
------------------------------------------------------
"Freedom is still the most radical idea of all" -N.Branden
wiki: http://esambale.wikispaces.com/
blog: http://epsg4253.wordpress.com/
------------------------------------------------------

From abhinav at vizexperts.com  Thu Apr 25 22:08:59 2013
From: abhinav at vizexperts.com (Abhinav)
Date: Thu, 25 Apr 2013 22:08:59 -0700 (PDT)
Subject: [gdal-dev] Regarding ogr Layer Attribute properties corruption
Message-ID: <1366952939016-5049795.post@n6.nabble.com>

Hi All,

When I write the OGR layer and read that back, layer attributes properties
are getting lost like width, precision .These properties are coming zero(0)
for every attribute. I am trying to write ogrlayer to sqlite file. Is this
the issue with sqlite driver or gdal itself?

Regards
Abhinav



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Regarding-ogr-Layer-Attribute-properties-corruption-tp5049795.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From kassies at gmail.com  Thu Apr 25 23:38:30 2013
From: kassies at gmail.com (Rutger)
Date: Thu, 25 Apr 2013 23:38:30 -0700 (PDT)
Subject: [gdal-dev] MODIS Cloud Mask reprojection
In-Reply-To: <CAFcOn2_YjJMP700trj=nMjrA646zbXEf5JgLUUyg1rX6jJ3Htw@mail.gmail.com>
References: <CAFcOn2_YjJMP700trj=nMjrA646zbXEf5JgLUUyg1rX6jJ3Htw@mail.gmail.com>
Message-ID: <1366958310013-5049805.post@n6.nabble.com>

Hey Stefan,

You indeed need to use MRT Swath (or one of the alternatives i mentioned to
Laura, but i would start with MRT Swath), which also means you need the
appropriate MOD03 file for the geolocation arrays. Looking at the meta data
is should be this one:
MOD03.A2013112.1055.005.2013112115237.NRT.hdf

The information is encoded using bitflags. So some post processing is needed
after extracting the bands. A lot of Remote Sensing software can do such
'bitwise' operations, but any programming language as well, so reading the
data with GDAL in for example Python would also work.


Regards,
Rutger



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-MODIS-Cloud-Mask-reprojection-tp5049452p5049805.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jonas.eberle at gmx.de  Thu Apr 25 23:58:42 2013
From: jonas.eberle at gmx.de (Jonas Eberle)
Date: Fri, 26 Apr 2013 01:58:42 -0500 (CDT)
Subject: [gdal-dev] MODIS reprojection
In-Reply-To: <1366297839492-5048019.post@n6.nabble.com>
References: <1366212547290-5047700.post@n6.nabble.com>
	<1366276234994-5047887.post@n6.nabble.com>
	<CA+TxYvNFe0VFJWRDcPGb13h2YjzOTjGijoZ0SQToGxd6X-0Vtg@mail.gmail.com>
	<1366297839492-5048019.post@n6.nabble.com>
Message-ID: <228704168.105019.1366959522118.JavaMail.root@eberle-mail.de>

Hi Rutger, 

> I have used Pyresample as an alternative which works very well, but requires
> the use of Python:
> http://code.google.com/p/pyresample/

do you have an example how to reproject MODIS Swath data with this pyresample software?

Thanks in adavance. 

Regards,
Jonas

From jefflacostegdal at gmail.com  Fri Apr 26 05:28:26 2013
From: jefflacostegdal at gmail.com (Jeff Lacoste)
Date: Fri, 26 Apr 2013 08:28:26 -0400
Subject: [gdal-dev] Geopdf dependency on Poppler and Visual Studio 2012
In-Reply-To: <51794061.1050609@ualg.pt>
References: <CAFOE_Bd7CfSHTGhKg8jSTxxv8-nhNi88gN4G+LbCcrjZ=ZVMPw@mail.gmail.com>
	<51794061.1050609@ualg.pt>
Message-ID: <CAFOE_Bf3tiQUO1yypWWub4a8minkX7QQkdSQAVO37br4ePQZwg@mail.gmail.com>

Thanks Joaquim. I now managed to build Poppler using freetype as its only
dependency.
Do we know if GDAL GeoPdf driver needs 'Poppler' to be built with other
dependencies that can come with Poppler: lcms, icon, openjpeg, tiff, etc.
To have Geopdf driver work correctly using 'Poppler' are these dependencies
needed ? or all it needs is 'Freetype' and 'enable-xpdf-headers' ?

Thanks
Jeff


On Thu, Apr 25, 2013 at 10:40 AM, Joaquim Luis <jluis at ualg.pt> wrote:

>  Jeff,
>
> I built it from from source (from the git repo actually) and don't
> remember to have had any particular problem. They provide a cmake solution,
> which creates only a static lib but it linked fine with my VS2012 GDAL
> build.
>
> Joaquim
>
>  Hi,
>
>  I'm trying to build GDAL using Visual Studio 2012 and run into an issue
> with Geopdf format.
> This format depends on Poppler (or podofo) 3rd party component.
> Is there a VS 2012 compatible Poppler library for win32 and x64 bits ?
>
>  I downloaded the Poppler library from http://vbkto.dyndns.org:1280/sdk/ but
> it appears
> to be a static .lib built using Visual Studio 2010. If it was a stub .lib
> (with run time .dll) I can
> consume it from Visual Studio 2012, but its unfortunately a static .lib
> (that VS 2012 can not link without errors).
>
>
>  Thanks
> Jeff
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130426/f2f08ed5/attachment.html>

From jukka.rahkonen at mmmtike.fi  Fri Apr 26 06:22:51 2013
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 26 Apr 2013 13:22:51 +0000 (UTC)
Subject: [gdal-dev] Regarding ogr Layer Attribute properties corruption
References: <1366952939016-5049795.post@n6.nabble.com>
Message-ID: <loom.20130426T152101-429@post.gmane.org>

Abhinav <abhinav <at> vizexperts.com> writes:

> 
> Hi All,
> 
> When I write the OGR layer and read that back, layer attributes properties
> are getting lost like width, precision .These properties are coming zero(0)
> for every attribute. I am trying to write ogrlayer to sqlite file. Is this
> the issue with sqlite driver or gdal itself?

More details would be appreciated. Like the exact command if you are using
org2ogr or some code if you are doing it with your own program.

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Fri Apr 26 11:21:22 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 26 Apr 2013 20:21:22 +0200
Subject: [gdal-dev] Regarding ogr Layer Attribute properties corruption
In-Reply-To: <1366952939016-5049795.post@n6.nabble.com>
References: <1366952939016-5049795.post@n6.nabble.com>
Message-ID: <201304262021.23035.even.rouault@mines-paris.org>

Le vendredi 26 avril 2013 07:08:59, Abhinav a ?crit :
> Hi All,
> 
> When I write the OGR layer and read that back, layer attributes properties
> are getting lost like width, precision .These properties are coming zero(0)
> for every attribute. I am trying to write ogrlayer to sqlite file. Is this
> the issue with sqlite driver or gdal itself?

Indeed, the OGR SQLite driver doesn't implement support for width and 
precision currently. This could be potentially implemented, but SQLite has a 
weak typing system as explained in http://www.sqlite.org/datatype3.html


> 
> Regards
> Abhinav
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Regarding-ogr-Layer-Attribute-properti
> es-corruption-tp5049795.html Sent from the GDAL - Dev mailing list archive
> at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From sfkeller at gmail.com  Sat Apr 27 17:30:34 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun, 28 Apr 2013 02:30:34 +0200
Subject: [gdal-dev] MODIS Cloud Mask reprojection
In-Reply-To: <1366958310013-5049805.post@n6.nabble.com>
References: <CAFcOn2_YjJMP700trj=nMjrA646zbXEf5JgLUUyg1rX6jJ3Htw@mail.gmail.com>
	<1366958310013-5049805.post@n6.nabble.com>
Message-ID: <CAFcOn2_xgQMXy1W8LdHXY69-yPbTCL9_0R_Y_vEy9WE6Ha_S5A@mail.gmail.com>

Hi Rutger

Many thanks for your answer.
I would like to do the processing of this nice NASA product entirely in
GDAL and Python.
Do you als have hints (code snippets) to achieve this?

Yours,
Stefan



2013/4/26 Rutger <kassies at gmail.com>

> Hey Stefan,
>
> You indeed need to use MRT Swath (or one of the alternatives i mentioned to
> Laura, but i would start with MRT Swath), which also means you need the
> appropriate MOD03 file for the geolocation arrays. Looking at the meta data
> is should be this one:
> MOD03.A2013112.1055.005.2013112115237.NRT.hdf
>
> The information is encoded using bitflags. So some post processing is
> needed
> after extracting the bands. A lot of Remote Sensing software can do such
> 'bitwise' operations, but any programming language as well, so reading the
> data with GDAL in for example Python would also work.
>
>
> Regards,
> Rutger
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-MODIS-Cloud-Mask-reprojection-tp5049452p5049805.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130428/0883dba1/attachment.html>

From even.rouault at mines-paris.org  Sun Apr 28 05:13:27 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 28 Apr 2013 14:13:27 +0200
Subject: [gdal-dev] Geopdf dependency on Poppler and Visual Studio 2012
In-Reply-To: <CAFOE_Bf3tiQUO1yypWWub4a8minkX7QQkdSQAVO37br4ePQZwg@mail.gmail.com>
References: <CAFOE_Bd7CfSHTGhKg8jSTxxv8-nhNi88gN4G+LbCcrjZ=ZVMPw@mail.gmail.com>
	<51794061.1050609@ualg.pt>
	<CAFOE_Bf3tiQUO1yypWWub4a8minkX7QQkdSQAVO37br4ePQZwg@mail.gmail.com>
Message-ID: <201304281413.27671.even.rouault@mines-paris.org>

Le vendredi 26 avril 2013 14:28:26, Jeff Lacoste a ?crit :
> Thanks Joaquim. I now managed to build Poppler using freetype as its only
> dependency.
> Do we know if GDAL GeoPdf driver needs 'Poppler' to be built with other
> dependencies that can come with Poppler: lcms, icon, openjpeg, tiff, etc.
> To have Geopdf driver work correctly using 'Poppler' are these dependencies
> needed ? or all it needs is 'Freetype' and 'enable-xpdf-headers' ?

Technically, the GDAL PDF driver only requires Poppler to be configured with 
enable-xpdf-headers to compile against it. The other dependencies will be 
needed depending on the PDF documents you'll read. Freetype seems usefull 
indeed. 

From radim.blazek at gmail.com  Sun Apr 28 11:40:12 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Sun, 28 Apr 2013 20:40:12 +0200
Subject: [gdal-dev] OGR slow with network files on Windows
Message-ID: <CAEMrtYrG5fA1+RLif82T_RK+nWuiNAOLniw8yQuN2NVqYJ0Xhg@mail.gmail.com>

Hello,
I am working on #6448 QGIS issue - Extremely slow shapefile reading
over network. You can find my latest observations in
http://hub.qgis.org/issues/6448#note-19

Long story short, OGR does not buffer I/O and Windows does not always
cache network files.

I have few questions for OGR developers:
1. Are there my OGR related notes in the issue comment correct?
2. Would it be possible to implement buffering in VSI?
3. Is it VSI cache (if VSI_CACHE_SIZE is set to some small number)
suitable to be used as buffer?
4. Would it be possible to implement buffering or to extend VSI cache
for writing (to allow editing)?
5. Have you considered to increase CHUNK_SIZE (currently 32768)? Where
does that size comes from? I saw that XP is using 32768 but from what
I have read, SMB1 block size limit was 64K but SMB2 should not have
that limit. E.g. gvSIG 2.0.0 is using via its BigByteBuffer2 class
block size 61440.

Radim

From even.rouault at mines-paris.org  Sun Apr 28 12:26:46 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 28 Apr 2013 21:26:46 +0200
Subject: [gdal-dev] OGR slow with network files on Windows
In-Reply-To: <CAEMrtYrG5fA1+RLif82T_RK+nWuiNAOLniw8yQuN2NVqYJ0Xhg@mail.gmail.com>
References: <CAEMrtYrG5fA1+RLif82T_RK+nWuiNAOLniw8yQuN2NVqYJ0Xhg@mail.gmail.com>
Message-ID: <201304282126.46546.even.rouault@mines-paris.org>

Le dimanche 28 avril 2013 20:40:12, Radim Blazek a ?crit :
> Hello,
> I am working on #6448 QGIS issue - Extremely slow shapefile reading
> over network. You can find my latest observations in
> http://hub.qgis.org/issues/6448#note-19
> 
> Long story short, OGR does not buffer I/O and Windows does not always
> cache network files.
> 
> I have few questions for OGR developers:
> 1. Are there my OGR related notes in the issue comment correct?

Yes. One observation about MITAB not benefiting from VSI_CACHE is that MITAB 
uses the standard VSI API (which is just a thin wrapper around C standard 
FILE* API), whereas the Shapefile driver uses the VSI Virtual File API. And 
VSICache is a virtual file system handled by the VSI Virtual File API.

> 2. Would it be possible to implement buffering in VSI?

For the sake of exhaustivity, I should mention there's a 
VSIBufferedReaderHandle object that implements *backwards* buffering. It is 
currently used by the /vsigzip/ layer to allow backward reading of small 
amounts (gzip streams aren't naturaly seekable. /vsigzip/ has some extension 
support for seeking, but this is still rather slow, hence 
VSIBufferedReaderHandle ) .

> 3. Is it VSI cache (if VSI_CACHE_SIZE is set to some small number)
> suitable to be used as buffer?

Yes, I think so.

> 4. Would it be possible to implement buffering or to extend VSI cache
> for writing (to allow editing)?

Yes, I don't see any reason why VSICache couldn't be extended for writing. It 
should be just a matter of coding it.

> 5. Have you considered to increase CHUNK_SIZE (currently 32768)? Where
> does that size comes from? I saw that XP is using 32768 but from what
> I have read, SMB1 block size limit was 64K but SMB2 should not have
> that limit. E.g. gvSIG 2.0.0 is using via its BigByteBuffer2 class
> block size 61440.

I have not a particular informed opinion on this. Did you try experimenting 
increasing CHUNK_SIZE to see if this improves performance ?

Even

From ritvik at umd.edu  Sun Apr 28 13:54:58 2013
From: ritvik at umd.edu (Ritvik Sahajpal)
Date: Sun, 28 Apr 2013 16:54:58 -0400
Subject: [gdal-dev] Use GDAL to combine (rather than mosaic) rasters
Message-ID: <CAM=aLRgErohFS4saLC3nNdxWoQPvnYQUxzhL_oE9g9eWeZ1Lqw@mail.gmail.com>

Is there a GDAL command which can combine multiple rasters so that so a
unique output value is assigned to each unique combination of input values,
like the combine command in ArcGIS?

gdal_merge seems to mosaic rasters so it is not exactly what I need.

thanks!

rit
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130428/43f3f2b3/attachment.html>

From chaitanya.ch at gmail.com  Sun Apr 28 19:53:09 2013
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon, 29 Apr 2013 08:23:09 +0530
Subject: [gdal-dev] Use GDAL to combine (rather than mosaic) rasters
In-Reply-To: <CAM=aLRgErohFS4saLC3nNdxWoQPvnYQUxzhL_oE9g9eWeZ1Lqw@mail.gmail.com>
References: <CAM=aLRgErohFS4saLC3nNdxWoQPvnYQUxzhL_oE9g9eWeZ1Lqw@mail.gmail.com>
Message-ID: <CAMKgpOZbCrgHfFmU0DR3duS97PEkP1+jB5usBh+5jOOZsk31cQ@mail.gmail.com>

Ritvik,

You can use gdal_calc.py to perform computations with multiple rasters. It
is not among the officially released scripts.
http://trac.osgeo.org/gdal/browser/branches/1.10/gdal/swig/python/scripts/gdal_calc.py
You can download the script from that page. The usage is described in the
comments.


On Mon, Apr 29, 2013 at 2:24 AM, Ritvik Sahajpal <ritvik at umd.edu> wrote:

> Is there a GDAL command which can combine multiple rasters so that so a
> unique output value is assigned to each unique combination of input values,
> like the combine command in ArcGIS?
>
> gdal_merge seems to mosaic rasters so it is not exactly what I need.
>
> thanks!
>
> rit
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130429/2b39f982/attachment.html>

From ancz at bas.ac.uk  Sun Apr 28 23:08:52 2013
From: ancz at bas.ac.uk (Cziferszky, Andreas)
Date: Mon, 29 Apr 2013 07:08:52 +0100
Subject: [gdal-dev] gdal re-projeciton problem with Polar Stereographic
 projections
Message-ID: <1DCCED50D0696A498958BA6B254456E22300CCDD05@nerckwmb1.ad.nerc.ac.uk>

Frank, David,

thanks a lot for your comments. It took me a while to install the 1.10.0RC3 (sorry, no Linux expert).

Unfortunately I cannot reproduce the results your are getting Frank. Your gdalinfo example is actually exactly what I would hope for. But like David I am still missing the PROJCS tag and the projection details in gdalinfo (same as my original example). I also made sure that the pcs.csv file is the original one without any modifications. So I am kind of clueless here.

Just for information: I also went back to previous versions of gdal we had installed on our servers. Various versions between as early as 1.6.2 up to 1.8.1 all had at PROJCS instead of LOCAL_CS reported by gdalinfo. So something must have changed either with gdalinfo or gdalwarp starting with 1.9.x. I also compared the pcs.csv of various versions up from 1.6.2 but the entry for 3031 was the same in all - no change there.

As for your suggestion, David, using a proj4 string as the proj definition: I have tried this as well before and it seems to be a good compromise. For the image generated like thie (-t_srs "+proj=stere +lat_0=-90 +lat_ts=-71 +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs") gdalinfo is reporting
..
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["unknown",
            SPHEROID["WGS84",6378137,298.257223563],
            TOWGS84[0,0,0,0,0,0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Polar_Stereographic"],
    PARAMETER["latitude_of_origin",-71],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
..
So the projection name is missing and the EPSG code 3031 is missing - that's kind of obvious but unfortunately incomplete. ArcGIS is reporting a custom Polar Stereographic (PS) projection (which is kind of ok and is probably related to Frank's comment regarding different PS presentations) but QGIS is reporting a EPSG:4326 projection which is of course wrong - most likely because of the missing parameters.

I guess I am going to file a bug report unless you maybe have any more suggestions.

Again thanks a lot for your help.

Andreas

This message (and any attachments) is for the recipient only. NERC is subject to the Freedom of Information Act 2000 and the contents of this email and any reply you make may be disclosed by NERC unless it is exempt from release under the Act. Any material supplied to NERC may be stored in an electronic records management system.

From radim.blazek at gmail.com  Mon Apr 29 00:49:11 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Mon, 29 Apr 2013 09:49:11 +0200
Subject: [gdal-dev] OGR slow with network files on Windows
In-Reply-To: <201304282126.46546.even.rouault@mines-paris.org>
References: <CAEMrtYrG5fA1+RLif82T_RK+nWuiNAOLniw8yQuN2NVqYJ0Xhg@mail.gmail.com>
	<201304282126.46546.even.rouault@mines-paris.org>
Message-ID: <CAEMrtYr2VhCa8Hor754waA5F__uvYq7BKNT-aYD7cgV=_rGmow@mail.gmail.com>

On Sun, Apr 28, 2013 at 9:26 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le dimanche 28 avril 2013 20:40:12, Radim Blazek a ?crit :
>> Hello,
>> I am working on #6448 QGIS issue - Extremely slow shapefile reading
>> over network. You can find my latest observations in
>> http://hub.qgis.org/issues/6448#note-19
>>
>> Long story short, OGR does not buffer I/O and Windows does not always
>> cache network files.
>>
>> I have few questions for OGR developers:
>> 1. Are there my OGR related notes in the issue comment correct?
>
> Yes. One observation about MITAB not benefiting from VSI_CACHE is that MITAB
> uses the standard VSI API (which is just a thin wrapper around C standard
> FILE* API), whereas the Shapefile driver uses the VSI Virtual File API. And
> VSICache is a virtual file system handled by the VSI Virtual File API.
>
>> 2. Would it be possible to implement buffering in VSI?
>
> For the sake of exhaustivity, I should mention there's a
> VSIBufferedReaderHandle object that implements *backwards* buffering. It is
> currently used by the /vsigzip/ layer to allow backward reading of small
> amounts (gzip streams aren't naturaly seekable. /vsigzip/ has some extension
> support for seeking, but this is still rather slow, hence
> VSIBufferedReaderHandle ) .
>
>> 3. Is it VSI cache (if VSI_CACHE_SIZE is set to some small number)
>> suitable to be used as buffer?
>
> Yes, I think so.

Do you prefer VSI cache for buffering to implementation of another
buffering mechanism as long term solution?

>> 4. Would it be possible to implement buffering or to extend VSI cache
>> for writing (to allow editing)?
>
> Yes, I don't see any reason why VSICache couldn't be extended for writing. It
> should be just a matter of coding it.
>
>> 5. Have you considered to increase CHUNK_SIZE (currently 32768)? Where
>> does that size comes from? I saw that XP is using 32768 but from what
>> I have read, SMB1 block size limit was 64K but SMB2 should not have
>> that limit. E.g. gvSIG 2.0.0 is using via its BigByteBuffer2 class
>> block size 61440.
>
> I have not a particular informed opinion on this. Did you try experimenting
> increasing CHUNK_SIZE to see if this improves performance ?

No, CHUNK_SIZE cannot be set as environment variable and I am using
precompiled osgeo4w. Maybe it is not that important. However, it could
be useful to change it be read from environment variable so that it
would be easy to experiment or to force higher value if necessary.

Radim

> Even

From even.rouault at mines-paris.org  Mon Apr 29 01:23:31 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 29 Apr 2013 10:23:31 +0200
Subject: [gdal-dev] OGR slow with network files on Windows
In-Reply-To: <CAEMrtYr2VhCa8Hor754waA5F__uvYq7BKNT-aYD7cgV=_rGmow@mail.gmail.com>
References: <CAEMrtYrG5fA1+RLif82T_RK+nWuiNAOLniw8yQuN2NVqYJ0Xhg@mail.gmail.com>
	<201304282126.46546.even.rouault@mines-paris.org>
	<CAEMrtYr2VhCa8Hor754waA5F__uvYq7BKNT-aYD7cgV=_rGmow@mail.gmail.com>
Message-ID: <1367223811.517e2e0331817@imp.free.fr>


> Do you prefer VSI cache for buffering to implementation of another
> buffering mechanism as long term solution?

>From my understanding of the code (FrankW is the author of VSI Cache), VSI cache
is currently both a cache and buffering mechanism. There's perhaps a small
penalty of having the caching part when you only need buffering, because, per
file, there's an array of pointers whose size is file_size / CHUNK_SIZE When a
chunk is cached, it points to a structure that holds CHUNK_SIZE bytes. There's
also a linked list of cached chunks to implement a Least Recently Used strategy
and evict old chunks when the cache size is reached.

Personnaly I'd avoid introducing another VSI mechanism for the sake of
maintanibility.

> > I have not a particular informed opinion on this. Did you try experimenting
> > increasing CHUNK_SIZE to see if this improves performance ?
>
> No, CHUNK_SIZE cannot be set as environment variable and I am using
> precompiled osgeo4w. Maybe it is not that important. However, it could
> be useful to change it be read from environment variable so that it
> would be easy to experiment or to force higher value if necessary.

Time to compile your own GDAL then ;-)

I'm also wondering if setting unconditionnaly VSI_CACHE might not have some
theoretical penalty for fast access storage when there is a lot of seeking and
reading by small amounts (I believe this is the typical I/O pattern when you
display a JPEG2000). It might be relevant to have an option to enable
caching/buffering for files only located on SMB folders.

Even

From radim.blazek at gmail.com  Mon Apr 29 01:41:43 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Mon, 29 Apr 2013 10:41:43 +0200
Subject: [gdal-dev] OGR slow with network files on Windows
In-Reply-To: <1367223811.517e2e0331817@imp.free.fr>
References: <CAEMrtYrG5fA1+RLif82T_RK+nWuiNAOLniw8yQuN2NVqYJ0Xhg@mail.gmail.com>
	<201304282126.46546.even.rouault@mines-paris.org>
	<CAEMrtYr2VhCa8Hor754waA5F__uvYq7BKNT-aYD7cgV=_rGmow@mail.gmail.com>
	<1367223811.517e2e0331817@imp.free.fr>
Message-ID: <CAEMrtYpZNkBT63jkRaPH9x6_QfQuORdod7pEe92AHcCnOCvL4w@mail.gmail.com>

On Mon, Apr 29, 2013 at 10:23 AM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> I'm also wondering if setting unconditionnaly VSI_CACHE might not have some
> theoretical penalty for fast access storage when there is a lot of seeking and
> reading by small amounts (I believe this is the typical I/O pattern when you
> display a JPEG2000). It might be relevant to have an option to enable
> caching/buffering for files only located on SMB folders.

How do you recognize if a file is SMB?

Radim

From even.rouault at mines-paris.org  Mon Apr 29 01:55:50 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 29 Apr 2013 10:55:50 +0200
Subject: [gdal-dev] OGR slow with network files on Windows
In-Reply-To: <CAEMrtYpZNkBT63jkRaPH9x6_QfQuORdod7pEe92AHcCnOCvL4w@mail.gmail.com>
References: <CAEMrtYrG5fA1+RLif82T_RK+nWuiNAOLniw8yQuN2NVqYJ0Xhg@mail.gmail.com>
	<201304282126.46546.even.rouault@mines-paris.org>
	<CAEMrtYr2VhCa8Hor754waA5F__uvYq7BKNT-aYD7cgV=_rGmow@mail.gmail.com>
	<1367223811.517e2e0331817@imp.free.fr>
	<CAEMrtYpZNkBT63jkRaPH9x6_QfQuORdod7pEe92AHcCnOCvL4w@mail.gmail.com>
Message-ID: <1367225750.517e359675640@imp.free.fr>

Selon Radim Blazek <radim.blazek at gmail.com>:

> On Mon, Apr 29, 2013 at 10:23 AM, Even Rouault
> <even.rouault at mines-paris.org> wrote:
> > I'm also wondering if setting unconditionnaly VSI_CACHE might not have some
> > theoretical penalty for fast access storage when there is a lot of seeking
> and
> > reading by small amounts (I believe this is the typical I/O pattern when
> you
> > display a JPEG2000). It might be relevant to have an option to enable
> > caching/buffering for files only located on SMB folders.
>
> How do you recognize if a file is SMB?

I was wondering that too and hoped you would known the answer ;-) There's
perhaps a Windows API for that... ?

FWIK SMB filenames are in the form "servershared_folderxxxx" , but it can be
mounted on a drive, so it becomes "X:shared_folderxxxx". Perhaps there's a way
of resolving this to the original name ?

But I'm not sure it is really needed either. Perhaps the theoretical performance
loss is neglectable in practice. I'm just throwing thoughts.


From radim.blazek at gmail.com  Mon Apr 29 02:07:07 2013
From: radim.blazek at gmail.com (Radim Blazek)
Date: Mon, 29 Apr 2013 11:07:07 +0200
Subject: [gdal-dev] OGR slow with network files on Windows
In-Reply-To: <1367225750.517e359675640@imp.free.fr>
References: <CAEMrtYrG5fA1+RLif82T_RK+nWuiNAOLniw8yQuN2NVqYJ0Xhg@mail.gmail.com>
	<201304282126.46546.even.rouault@mines-paris.org>
	<CAEMrtYr2VhCa8Hor754waA5F__uvYq7BKNT-aYD7cgV=_rGmow@mail.gmail.com>
	<1367223811.517e2e0331817@imp.free.fr>
	<CAEMrtYpZNkBT63jkRaPH9x6_QfQuORdod7pEe92AHcCnOCvL4w@mail.gmail.com>
	<1367225750.517e359675640@imp.free.fr>
Message-ID: <CAEMrtYpOwBD9moGsmnES5S2SFH4Jnmxghq_PJm8GKHx1=sOw-w@mail.gmail.com>

On Mon, Apr 29, 2013 at 10:55 AM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Selon Radim Blazek <radim.blazek at gmail.com>:
>
>> On Mon, Apr 29, 2013 at 10:23 AM, Even Rouault
>> <even.rouault at mines-paris.org> wrote:
>> > I'm also wondering if setting unconditionnaly VSI_CACHE might not have some
>> > theoretical penalty for fast access storage when there is a lot of seeking
>> and
>> > reading by small amounts (I believe this is the typical I/O pattern when
>> you
>> > display a JPEG2000). It might be relevant to have an option to enable
>> > caching/buffering for files only located on SMB folders.
>>
>> How do you recognize if a file is SMB?
>
> I was wondering that too and hoped you would known the answer ;-) There's
> perhaps a Windows API for that... ?

There seems to be: GetVolumePathName + GetDriveType which should be
DRIVE_REMOTE.
maybe also PathIsNetworkPath.

It seems to me that VSI cache as buffer (small VSI_CACHE_SIZE) should
always be used on Windows by default with network files. It should go
to OGR, I think.

Radim

> FWIK SMB filenames are in the form "servershared_folderxxxx" , but it can be
> mounted on a drive, so it becomes "X:shared_folderxxxx". Perhaps there's a way
> of resolving this to the original name ?
>
> But I'm not sure it is really needed either. Perhaps the theoretical performance
> loss is neglectable in practice. I'm just throwing thoughts.
>

From jefflacostegdal at gmail.com  Mon Apr 29 06:31:58 2013
From: jefflacostegdal at gmail.com (Jeff Lacoste)
Date: Mon, 29 Apr 2013 09:31:58 -0400
Subject: [gdal-dev] Geopdf dependency on Poppler and Visual Studio 2012
In-Reply-To: <201304281413.27671.even.rouault@mines-paris.org>
References: <CAFOE_Bd7CfSHTGhKg8jSTxxv8-nhNi88gN4G+LbCcrjZ=ZVMPw@mail.gmail.com>
	<51794061.1050609@ualg.pt>
	<CAFOE_Bf3tiQUO1yypWWub4a8minkX7QQkdSQAVO37br4ePQZwg@mail.gmail.com>
	<201304281413.27671.even.rouault@mines-paris.org>
Message-ID: <CAFOE_Bf4DX0jmpqt6mSBOXWweGE9xkuSqYJ63Rks5x72JK3h5Q@mail.gmail.com>

Thanks Even. I'll stick then with 'FreeType' and enable the xpdf headers.

Jeff


On Sun, Apr 28, 2013 at 8:13 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le vendredi 26 avril 2013 14:28:26, Jeff Lacoste a ?crit :
> > Thanks Joaquim. I now managed to build Poppler using freetype as its only
> > dependency.
> > Do we know if GDAL GeoPdf driver needs 'Poppler' to be built with other
> > dependencies that can come with Poppler: lcms, icon, openjpeg, tiff, etc.
> > To have Geopdf driver work correctly using 'Poppler' are these
> dependencies
> > needed ? or all it needs is 'Freetype' and 'enable-xpdf-headers' ?
>
> Technically, the GDAL PDF driver only requires Poppler to be configured
> with
> enable-xpdf-headers to compile against it. The other dependencies will be
> needed depending on the PDF documents you'll read. Freetype seems usefull
> indeed.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130429/6706b9d2/attachment.html>

From sfkeller at gmail.com  Mon Apr 29 08:31:19 2013
From: sfkeller at gmail.com (Stefan Keller)
Date: Mon, 29 Apr 2013 17:31:19 +0200
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 3 available
In-Reply-To: <517142F7.4090301@gatewaygeomatics.com>
References: <201304182226.07009.even.rouault@mines-paris.org>
	<517142F7.4090301@gatewaygeomatics.com>
Message-ID: <CAFcOn2_g-KaHALSQrbwhpHc-W3GUMgRuAK1=eC7y3mu6BDS-dA@mail.gmail.com>

Hi all

Thanks for your tremendous work!
Just curious: Is there an estimate (in days,weeks months) about the next
stable release?

Yours, Stefan


2013/4/19 Jeff McKenna <jmckenna at gatewaygeomatics.com>

> On 2013-04-18 5:26 PM, Even Rouault wrote:
> > Hi,
> >
> > I've prepared a third (and hopefully last) release candidate for GDAL/OGR
> > 1.10.0.
>
> Good on Windows.
>
> -jeff
>
>
>
> --
> Jeff McKenna
> MapServer Consulting and Training Services
> http://www.gatewaygeomatics.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130429/083d68b1/attachment.html>

From warmerdam at pobox.com  Mon Apr 29 10:52:08 2013
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 29 Apr 2013 10:52:08 -0700
Subject: [gdal-dev] Motion: Promote 1.10.0RC5 for release
In-Reply-To: <201304242109.27989.even.rouault@mines-paris.org>
References: <201304242109.27989.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBd6NFYQDAm-RqvuZPJcb9U9o1qxHY6BZEtW_9Hk=a1SWQ@mail.gmail.com>

On Wed, Apr 24, 2013 at 12:09 PM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Motion: GDAL/OGR 1.10.0RC5 is promoted to be the official 1.10.0 final
> release.
>

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130429/324b83f0/attachment.html>

From even.rouault at mines-paris.org  Mon Apr 29 10:56:49 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 29 Apr 2013 19:56:49 +0200
Subject: [gdal-dev] Motion: Promote 1.10.0RC5 for release --> PASSED
In-Reply-To: <201304242109.27989.even.rouault@mines-paris.org>
References: <201304242109.27989.even.rouault@mines-paris.org>
Message-ID: <201304291956.49806.even.rouault@mines-paris.org>

Le mercredi 24 avril 2013 21:09:27, Even Rouault a ?crit :
> Motion: GDAL/OGR 1.10.0RC5 is promoted to be the official 1.10.0 final
> release.
> 

I declare this motion passed with support from DanielM, FrankW and myself. The 
release announcement will follow closely.

From even.rouault at mines-paris.org  Mon Apr 29 11:08:07 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 29 Apr 2013 20:08:07 +0200
Subject: [gdal-dev] GDAL/OGR 1.10.0 Release Candidate 3 available
In-Reply-To: <CAFcOn2_g-KaHALSQrbwhpHc-W3GUMgRuAK1=eC7y3mu6BDS-dA@mail.gmail.com>
References: <201304182226.07009.even.rouault@mines-paris.org>
	<517142F7.4090301@gatewaygeomatics.com>
	<CAFcOn2_g-KaHALSQrbwhpHc-W3GUMgRuAK1=eC7y3mu6BDS-dA@mail.gmail.com>
Message-ID: <201304292008.07897.even.rouault@mines-paris.org>

Le lundi 29 avril 2013 17:31:19, Stefan Keller a ?crit :
> Hi all
> 
> Thanks for your tremendous work!
> Just curious: Is there an estimate (in days,weeks months) about the next
> stable release?

No strong rules, but usually when someone feels the need to wear his release 
manager cap (for a specific fix he wants in a release or generally when enough 
fixes have been accumulated), or when enough users loudly ask for a release ;-) 
But, now, it is time to take a breath and appreciate the fresh new release :-)

> 
> Yours, Stefan
> 
> 
> 2013/4/19 Jeff McKenna <jmckenna at gatewaygeomatics.com>
> 
> > On 2013-04-18 5:26 PM, Even Rouault wrote:
> > > Hi,
> > > 
> > > I've prepared a third (and hopefully last) release candidate for
> > > GDAL/OGR 1.10.0.
> > 
> > Good on Windows.
> > 
> > -jeff
> > 
> > 
> > 
> > --
> > Jeff McKenna
> > MapServer Consulting and Training Services
> > http://www.gatewaygeomatics.com/
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Mon Apr 29 11:42:44 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 29 Apr 2013 20:42:44 +0200
Subject: [gdal-dev] GDAL/OGR 1.10.0 released
Message-ID: <201304292042.44987.even.rouault@mines-paris.org>

The GDAL/OGR team is pleased to announce the release of GDAL/OGR 1.10.0.

This is a major new release including the following major new features:

 * New GDAL drivers:
   - ARG: read/write support for the Azavea Raster Grid format (#4591)
   - CTable2: read/write support for CTable2 datum grid shift format
   - DDS: write-only support for DirectDraw Surface format (#5017)
   - IRIS: read support for products generated by the IRIS weather radar
             software (#4854)
   - MAP:  read OziExplorer .map files (#3380)
   - MBTiles: read-only support for MBTiles rasters
 * New OGR drivers:
   - ElasticSearch: write-only support to write into ElasticSearch databases
   - ODS : read/write support for OpenOffice .ods (Open Document Spreadsheets)
   - OSM : read-only support for .osm / .pbf OpenStreetMap files
   - PDF: read/write support for vector/structured PDF files
   - XLSX: read/write support for MS Excel 2007 and later Open Office XML .xlsx
              spreadsheets
 * RFC 39: OGR Layer algebra methods :
         http://trac.osgeo.org/gdal/wiki/rfc39_ogr_layer_algebra
 * SQL SQLite dialect : http://gdal.org/ogr/ogr_sql_sqlite.html
 * Make GDAL loadable as a SQLite3 extension (named VirtualOGR) (#4782)
 * /vsicurl_streaming/: new virtual file system handler designed to read in
   streaming mode dynamically generated files
 * GDAL API_PROXY mechanism to run GDAL drivers in a separate process:
         http://gdal.org/gdal_api_proxy.html
 * Significantly improved drivers : PDF, SQLite, JP2OpenJPEG
 * Geocoding client : http://gdal.org/ogr/ogr__geocoding_8h.html
 * Upgrade to EPSG 8.0 database

Complete news on the new release can be found at:

  http://trac.osgeo.org/gdal/wiki/Release/1.10.0-News

The new release can be downloaded from:
  * http://download.osgeo.org/gdal/1.10.0/gdal1100.zip - source as a zip
  * http://download.osgeo.org/gdal/1.10.0/gdal-1.10.0.tar.gz - source as 
.tar.gz
  * http://download.osgeo.org/gdal/1.10.0/gdalautotest-1.10.0.tar.gz - test 
suite
  * http://download.osgeo.org/gdal/1.10.0/gdal1100doc.zip - documentation / 
website

From now, http://download.osgeo.org/gdal/CURRENT link also point to the latest 
release.

Best regards,

Even

From rcavaco at sig2000.pt  Mon Apr 29 13:29:09 2013
From: rcavaco at sig2000.pt (Rui Cavaco)
Date: Mon, 29 Apr 2013 21:29:09 +0100
Subject: [gdal-dev] Build GDAL with OCI support on Linux
Message-ID: <517ED815.7040907@sig2000.pt>

Hello!

I'm trying to get OCI support in GDAL / OGR in Ubuntu 12.04 32-bit.

I've successfully installed Oracle Instant Client 11_2 . SQLPlus works 
flawlessly.
Building GDAL also ended with no errors.

But executing ogrinfo --formats, OCI format is not listed.

Building script is:

export LDFLAGS="-Wl,-no-as-needed"
./configure \
   --with-python --with-libkml=no --with-geotiff=internal \
   --with-threads --with-libtiff=internal --with-geotiff=internal 
--with-jpeg=internal --with-gif=internal --with-png=internal 
--with-libz=internal \
   --with-oci=yes \
--with-oci-include=/usr/lib/oracle/instantclient_11_2/sdk/include \
   --with-oci-lib=/usr/lib/oracle/instantclient_11_2
make
sudo make install

Environment variables:

LD_LIBRARY_PATH=/usr/local/pgsql/lib:/usr/lib/oracle/instantclient_11_2:/usr/local/lib:
PATH=/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/lib/oracle/instantclient_11_2

In Config.log, we can see:

configure:22485: checking for Oracle OCI headers in 
/usr/lib/oracle/instantclient_11_2/sdk/include
configure:22518: g++ -c -g -O2 
-I/usr/lib/oracle/instantclient_11_2/sdk/include conftest.cpp >&5
configure:22518: $? = 0
configure:22531: result: yes
configure:22552: checking for Oracle OCI libraries in 
/usr/lib/oracle/instantclient_11_2
configure:22578: g++ -o conftest -g -O2 
-I/usr/lib/oracle/instantclient_11_2/sdk/include -Wl,-no-as-needed 
-L/usr/lib/oracle/instantclient_11_2 -lclntsh conftest.cpp -L/usr/lib 
-lpq -lpthread -lm -lrt -ldl  >&5
configure:22578: $? = 0
configure:22582: result: yes
configure:22626: checking if Oracle OCI version is >= 10.0.1
configure:22646: result: yes
configure:22649: checking for Oracle version >= 10.x to use -lnnz10 flag
configure:22654: result: yes
configure:22675: checking if Oracle support is enabled
configure:22689: result: yes

configure:24105: checking for Oracle OCI headers in 
/usr/lib/oracle/instantclient_11_2/sdk/include
configure:24138: g++ -c -g -O2 
-I/usr/lib/oracle/instantclient_11_2/sdk/include conftest.cpp >&5
configure:24138: $? = 0
configure:24151: result: yes
configure:24172: checking for Oracle OCI libraries in 
/usr/lib/oracle/instantclient_11_2
configure:24198: g++ -o conftest -g -O2 
-I/usr/lib/oracle/instantclient_11_2/sdk/include -Wl,-no-as-needed 
-L/usr/lib/oracle/instantclient_11_2 -lclntsh conftest.cpp -lexpat 
-L/usr/lib -lpq -lpthread -lm -lrt -ldl  >&5
configure:24198: $? = 0
configure:24202: result: yes
configure:24246: checking if Oracle OCI version is >= 8.1.7
configure:24266: result: yes
configure:24269: checking for Oracle version >= 10.x to use -lnnz10 flag
configure:24274: result: yes
configure:24295: checking if Oracle support is enabled
configure:24309: result: yes

Apparently, no errors to be found.

But OGR tools cannot access Oracle datasources.

Hoping to get some help on this,

-- 
Rui Cavaco
Mail: rcavaco at sig2000.pt

From ivan.lucena at princeton-ma.us  Mon Apr 29 13:53:34 2013
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon, 29 Apr 2013 15:53:34 -0500
Subject: [gdal-dev] =?iso-8859-1?q?Build_GDAL_with_OCI_support_on_Linux?=
In-Reply-To: <517ED815.7040907@sig2000.pt>
References: <517ED815.7040907@sig2000.pt>
Message-ID: <20130429205334.31221.qmail@s466.sureserver.com>

Hi Rui,


>  -------Original Message-------
>  From: Rui Cavaco <rcavaco at sig2000.pt>
>  To: gdal-dev at lists.osgeo.org
>  Subject: [gdal-dev] Build GDAL with OCI support on Linux
>  Sent: Apr 29 '13 15:29
>  
>  Hello!
>  
>  I'm trying to get OCI support in GDAL / OGR in Ubuntu 12.04 32-bit.
>  
>  I've successfully installed Oracle Instant Client 11_2 . SQLPlus works
>  flawlessly.
>  Building GDAL also ended with no errors.
>  
>  But executing ogrinfo --formats, OCI format is not listed.
>  
>  Building script is:
>  
>  export LDFLAGS="-Wl,-no-as-needed"
>  ./configure \
>  ?? --with-python --with-libkml=no --with-geotiff=internal \
>  ?? --with-threads --with-libtiff=internal --with-geotiff=internal
>  --with-jpeg=internal --with-gif=internal --with-png=internal
>  --with-libz=internal \
>  ?? --with-oci=yes \
>  --with-oci-include=/usr/lib/oracle/instantclient_11_2/sdk/include \
>  ?? --with-oci-lib=/usr/lib/oracle/instantclient_11_2
>  make
>  sudo make install
>  
>  Environment variables:
>  
>  LD_LIBRARY_PATH=/usr/local/pgsql/lib:/usr/lib/oracle/instantclient_11_2:/usr/local/lib:
>  PATH=/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/lib/oracle/instantclient_11_2
>  
>  In Config.log, we can see:
>  
>  configure:22485: checking for Oracle OCI headers in
>  /usr/lib/oracle/instantclient_11_2/sdk/include
>  configure:22518: g++ -c -g -O2
>  -I/usr/lib/oracle/instantclient_11_2/sdk/include conftest.cpp >&5
>  configure:22518: $? = 0
>  configure:22531: result: yes
>  configure:22552: checking for Oracle OCI libraries in
>  /usr/lib/oracle/instantclient_11_2
>  configure:22578: g++ -o conftest -g -O2
>  -I/usr/lib/oracle/instantclient_11_2/sdk/include -Wl,-no-as-needed
>  -L/usr/lib/oracle/instantclient_11_2 -lclntsh conftest.cpp -L/usr/lib
>  -lpq -lpthread -lm -lrt -ldl??>&5
>  configure:22578: $? = 0
>  configure:22582: result: yes
>  configure:22626: checking if Oracle OCI version is >= 10.0.1
>  configure:22646: result: yes
>  configure:22649: checking for Oracle version >= 10.x to use -lnnz10 flag
>  configure:22654: result: yes
>  configure:22675: checking if Oracle support is enabled
>  configure:22689: result: yes
>  
>  configure:24105: checking for Oracle OCI headers in
>  /usr/lib/oracle/instantclient_11_2/sdk/include
>  configure:24138: g++ -c -g -O2
>  -I/usr/lib/oracle/instantclient_11_2/sdk/include conftest.cpp >&5
>  configure:24138: $? = 0
>  configure:24151: result: yes
>  configure:24172: checking for Oracle OCI libraries in
>  /usr/lib/oracle/instantclient_11_2
>  configure:24198: g++ -o conftest -g -O2
>  -I/usr/lib/oracle/instantclient_11_2/sdk/include -Wl,-no-as-needed
>  -L/usr/lib/oracle/instantclient_11_2 -lclntsh conftest.cpp -lexpat
>  -L/usr/lib -lpq -lpthread -lm -lrt -ldl??>&5
>  configure:24198: $? = 0
>  configure:24202: result: yes
>  configure:24246: checking if Oracle OCI version is >= 8.1.7
>  configure:24266: result: yes
>  configure:24269: checking for Oracle version >= 10.x to use -lnnz10 flag
>  configure:24274: result: yes
>  configure:24295: checking if Oracle support is enabled
>  configure:24309: result: yes
>  
>  Apparently, no errors to be found.
>  
>  But OGR tools cannot access Oracle datasources.
>  

What is the command line and the error message that tells you that?

Can you see OCI as one of the driver when you run "ogrinfo --formats" ?

There was a discussion about building GDAL on Ubuntu on OTN:

https://forums.oracle.com/forums/thread.jspa?threadID=1128217&tstart=0&messageID=10658264#10658264

Regards,

Ivan

>  Hoping to get some help on this,
>  
>  --
>  Rui Cavaco
>  Mail: rcavaco at sig2000.pt
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev at lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  


From rcavaco at sig2000.pt  Mon Apr 29 16:12:34 2013
From: rcavaco at sig2000.pt (Rui Cavaco)
Date: Tue, 30 Apr 2013 00:12:34 +0100
Subject: [gdal-dev] Build GDAL with OCI support on Linux
In-Reply-To: <20130429205334.31221.qmail@s466.sureserver.com>
References: <517ED815.7040907@sig2000.pt>,
	<20130429205334.31221.qmail@s466.sureserver.com>
Message-ID: <C1E3A80E3214704F8D3425B71F209F0B016376F9@PTAEXMBX18.ptasp.local>


Hi Ivan, thanks for your quick reply!

Yes, ogrinfo --formats doesn't list OCI. 

I'll check the thread in OTN you mentioned, it seems it has something specific about Ubuntu. I'll feedback the results.

Many thanks!
--
Rui Cavaco
___________________________
SIG2000, Sist. de Infor. Geogr?fica, Lda.
Rua do Campo Alegre, 1306 Sala 308/107 4150 - 174 Porto
Tel.: + 351 22 606 75 77
Fax: + 351 22 606 75 78
Mail: rcavaco at sig2000.pt
________________________________________
De: Ivan Lucena [ivan.lucena at princeton-ma.us]
Enviado: segunda-feira, 29 de Abril de 2013 21:53
Para: Rui Cavaco; ""
Assunto: Re: [gdal-dev] Build GDAL with OCI support on Linux

Hi Rui,


>  -------Original Message-------
>  From: Rui Cavaco <rcavaco at sig2000.pt>
>  To: gdal-dev at lists.osgeo.org
>  Subject: [gdal-dev] Build GDAL with OCI support on Linux
>  Sent: Apr 29 '13 15:29
>
>  Hello!
>
>  I'm trying to get OCI support in GDAL / OGR in Ubuntu 12.04 32-bit.
>
>  I've successfully installed Oracle Instant Client 11_2 . SQLPlus works
>  flawlessly.
>  Building GDAL also ended with no errors.
>
>  But executing ogrinfo --formats, OCI format is not listed.
>
>  Building script is:
>
>  export LDFLAGS="-Wl,-no-as-needed"
>  ./configure \
>     --with-python --with-libkml=no --with-geotiff=internal \
>     --with-threads --with-libtiff=internal --with-geotiff=internal
>  --with-jpeg=internal --with-gif=internal --with-png=internal
>  --with-libz=internal \
>     --with-oci=yes \
>  --with-oci-include=/usr/lib/oracle/instantclient_11_2/sdk/include \
>     --with-oci-lib=/usr/lib/oracle/instantclient_11_2
>  make
>  sudo make install
>
>  Environment variables:
>
>  LD_LIBRARY_PATH=/usr/local/pgsql/lib:/usr/lib/oracle/instantclient_11_2:/usr/local/lib:
>  PATH=/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/lib/oracle/instantclient_11_2
>
>  In Config.log, we can see:
>
>  configure:22485: checking for Oracle OCI headers in
>  /usr/lib/oracle/instantclient_11_2/sdk/include
>  configure:22518: g++ -c -g -O2
>  -I/usr/lib/oracle/instantclient_11_2/sdk/include conftest.cpp >&5
>  configure:22518: $? = 0
>  configure:22531: result: yes
>  configure:22552: checking for Oracle OCI libraries in
>  /usr/lib/oracle/instantclient_11_2
>  configure:22578: g++ -o conftest -g -O2
>  -I/usr/lib/oracle/instantclient_11_2/sdk/include -Wl,-no-as-needed
>  -L/usr/lib/oracle/instantclient_11_2 -lclntsh conftest.cpp -L/usr/lib
>  -lpq -lpthread -lm -lrt -ldl  >&5
>  configure:22578: $? = 0
>  configure:22582: result: yes
>  configure:22626: checking if Oracle OCI version is >= 10.0.1
>  configure:22646: result: yes
>  configure:22649: checking for Oracle version >= 10.x to use -lnnz10 flag
>  configure:22654: result: yes
>  configure:22675: checking if Oracle support is enabled
>  configure:22689: result: yes
>
>  configure:24105: checking for Oracle OCI headers in
>  /usr/lib/oracle/instantclient_11_2/sdk/include
>  configure:24138: g++ -c -g -O2
>  -I/usr/lib/oracle/instantclient_11_2/sdk/include conftest.cpp >&5
>  configure:24138: $? = 0
>  configure:24151: result: yes
>  configure:24172: checking for Oracle OCI libraries in
>  /usr/lib/oracle/instantclient_11_2
>  configure:24198: g++ -o conftest -g -O2
>  -I/usr/lib/oracle/instantclient_11_2/sdk/include -Wl,-no-as-needed
>  -L/usr/lib/oracle/instantclient_11_2 -lclntsh conftest.cpp -lexpat
>  -L/usr/lib -lpq -lpthread -lm -lrt -ldl  >&5
>  configure:24198: $? = 0
>  configure:24202: result: yes
>  configure:24246: checking if Oracle OCI version is >= 8.1.7
>  configure:24266: result: yes
>  configure:24269: checking for Oracle version >= 10.x to use -lnnz10 flag
>  configure:24274: result: yes
>  configure:24295: checking if Oracle support is enabled
>  configure:24309: result: yes
>
>  Apparently, no errors to be found.
>
>  But OGR tools cannot access Oracle datasources.
>

What is the command line and the error message that tells you that?

Can you see OCI as one of the driver when you run "ogrinfo --formats" ?

There was a discussion about building GDAL on Ubuntu on OTN:

https://forums.oracle.com/forums/thread.jspa?threadID=1128217&tstart=0&messageID=10658264#10658264

Regards,

Ivan

>  Hoping to get some help on this,
>
>  --
>  Rui Cavaco
>  Mail: rcavaco at sig2000.pt
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev at lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Mon Apr 29 16:16:13 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 30 Apr 2013 01:16:13 +0200
Subject: [gdal-dev] Build GDAL with OCI support on Linux
In-Reply-To: <C1E3A80E3214704F8D3425B71F209F0B016376F9@PTAEXMBX18.ptasp.local>
References: <517ED815.7040907@sig2000.pt>
	<20130429205334.31221.qmail@s466.sureserver.com>
	<C1E3A80E3214704F8D3425B71F209F0B016376F9@PTAEXMBX18.ptasp.local>
Message-ID: <201304300116.13164.even.rouault@mines-paris.org>

Le mardi 30 avril 2013 01:12:34, Rui Cavaco a ?crit :
> Hi Ivan, thanks for your quick reply!
> 
> Yes, ogrinfo --formats doesn't list OCI.

Did you try a "make clean" ? Because if you configured in serveral times, it is 
possible that the code that registers the driver didn't get recompiled.

> 
> I'll check the thread in OTN you mentioned, it seems it has something
> specific about Ubuntu. I'll feedback the results.
> 
> Many thanks!
> --
> Rui Cavaco
> ___________________________
> SIG2000, Sist. de Infor. Geogr?fica, Lda.
> Rua do Campo Alegre, 1306 Sala 308/107 4150 - 174 Porto
> Tel.: + 351 22 606 75 77
> Fax: + 351 22 606 75 78
> Mail: rcavaco at sig2000.pt
> ________________________________________
> De: Ivan Lucena [ivan.lucena at princeton-ma.us]
> Enviado: segunda-feira, 29 de Abril de 2013 21:53
> Para: Rui Cavaco; ""
> Assunto: Re: [gdal-dev] Build GDAL with OCI support on Linux
> 
> Hi Rui,
> 
> >  -------Original Message-------
> >  From: Rui Cavaco <rcavaco at sig2000.pt>
> >  To: gdal-dev at lists.osgeo.org
> >  Subject: [gdal-dev] Build GDAL with OCI support on Linux
> >  Sent: Apr 29 '13 15:29
> >  
> >  Hello!
> >  
> >  I'm trying to get OCI support in GDAL / OGR in Ubuntu 12.04 32-bit.
> >  
> >  I've successfully installed Oracle Instant Client 11_2 . SQLPlus works
> >  flawlessly.
> >  Building GDAL also ended with no errors.
> >  
> >  But executing ogrinfo --formats, OCI format is not listed.
> >  
> >  Building script is:
> >  
> >  export LDFLAGS="-Wl,-no-as-needed"
> >  ./configure \
> >  
> >     --with-python --with-libkml=no --with-geotiff=internal \
> >     --with-threads --with-libtiff=internal --with-geotiff=internal
> >  
> >  --with-jpeg=internal --with-gif=internal --with-png=internal
> >  --with-libz=internal \
> >  
> >     --with-oci=yes \
> >  
> >  --with-oci-include=/usr/lib/oracle/instantclient_11_2/sdk/include \
> >  
> >     --with-oci-lib=/usr/lib/oracle/instantclient_11_2
> >  
> >  make
> >  sudo make install
> >  
> >  Environment variables:
> >  
> >  LD_LIBRARY_PATH=/usr/local/pgsql/lib:/usr/lib/oracle/instantclient_11_2:
> >  /usr/local/lib:
> >  PATH=/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:
> >  /usr/bin:/sbin:/bin:/usr/games:/usr/lib/oracle/instantclient_11_2
> >  
> >  In Config.log, we can see:
> >  
> >  configure:22485: checking for Oracle OCI headers in
> >  /usr/lib/oracle/instantclient_11_2/sdk/include
> >  configure:22518: g++ -c -g -O2
> >  -I/usr/lib/oracle/instantclient_11_2/sdk/include conftest.cpp >&5
> >  configure:22518: $? = 0
> >  configure:22531: result: yes
> >  configure:22552: checking for Oracle OCI libraries in
> >  /usr/lib/oracle/instantclient_11_2
> >  configure:22578: g++ -o conftest -g -O2
> >  -I/usr/lib/oracle/instantclient_11_2/sdk/include -Wl,-no-as-needed
> >  -L/usr/lib/oracle/instantclient_11_2 -lclntsh conftest.cpp -L/usr/lib
> >  -lpq -lpthread -lm -lrt -ldl  >&5
> >  configure:22578: $? = 0
> >  configure:22582: result: yes
> >  configure:22626: checking if Oracle OCI version is >= 10.0.1
> >  configure:22646: result: yes
> >  configure:22649: checking for Oracle version >= 10.x to use -lnnz10 flag
> >  configure:22654: result: yes
> >  configure:22675: checking if Oracle support is enabled
> >  configure:22689: result: yes
> >  
> >  configure:24105: checking for Oracle OCI headers in
> >  /usr/lib/oracle/instantclient_11_2/sdk/include
> >  configure:24138: g++ -c -g -O2
> >  -I/usr/lib/oracle/instantclient_11_2/sdk/include conftest.cpp >&5
> >  configure:24138: $? = 0
> >  configure:24151: result: yes
> >  configure:24172: checking for Oracle OCI libraries in
> >  /usr/lib/oracle/instantclient_11_2
> >  configure:24198: g++ -o conftest -g -O2
> >  -I/usr/lib/oracle/instantclient_11_2/sdk/include -Wl,-no-as-needed
> >  -L/usr/lib/oracle/instantclient_11_2 -lclntsh conftest.cpp -lexpat
> >  -L/usr/lib -lpq -lpthread -lm -lrt -ldl  >&5
> >  configure:24198: $? = 0
> >  configure:24202: result: yes
> >  configure:24246: checking if Oracle OCI version is >= 8.1.7
> >  configure:24266: result: yes
> >  configure:24269: checking for Oracle version >= 10.x to use -lnnz10 flag
> >  configure:24274: result: yes
> >  configure:24295: checking if Oracle support is enabled
> >  configure:24309: result: yes
> >  
> >  Apparently, no errors to be found.
> >  
> >  But OGR tools cannot access Oracle datasources.
> 
> What is the command line and the error message that tells you that?
> 
> Can you see OCI as one of the driver when you run "ogrinfo --formats" ?
> 
> There was a discussion about building GDAL on Ubuntu on OTN:
> 
> https://forums.oracle.com/forums/thread.jspa?threadID=1128217&tstart=0&mess
> ageID=10658264#10658264
> 
> Regards,
> 
> Ivan
> 
> >  Hoping to get some help on this,
> >  
> >  --
> >  Rui Cavaco
> >  Mail: rcavaco at sig2000.pt
> >  _______________________________________________
> >  gdal-dev mailing list
> >  gdal-dev at lists.osgeo.org
> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From stefano.iacovella at gmail.com  Mon Apr 29 23:35:57 2013
From: stefano.iacovella at gmail.com (Stefano Iacovella)
Date: Tue, 30 Apr 2013 08:35:57 +0200
Subject: [gdal-dev] Build GDAL with OCI support on Linux
In-Reply-To: <201304300116.13164.even.rouault@mines-paris.org>
References: <517ED815.7040907@sig2000.pt>
	<20130429205334.31221.qmail@s466.sureserver.com>
	<C1E3A80E3214704F8D3425B71F209F0B016376F9@PTAEXMBX18.ptasp.local>
	<201304300116.13164.even.rouault@mines-paris.org>
Message-ID: <CAG9OqYp9BdSF8sz2xGouW=b-w4oZtr3JC6B1XODp7EtQx3iw5Q@mail.gmail.com>

You may also want to add path to instantclient in /etc/ld.so.conf.d
Just add a file, i.e oracle.conf, and insert inside it path to oracle
instant client installation.
You may also want to check if
ldd /usr/local/bin/gdalinfo

lists reference to oracle libraries.


Cheers,

Stefano

---------------------------------------------------
41.95581N 12.52854E


http://www.linkedin.com/in/stefanoiacovella

http://twitter.com/#!/Iacovellas


2013/4/30 Even Rouault <even.rouault at mines-paris.org>

> Le mardi 30 avril 2013 01:12:34, Rui Cavaco a ?crit :
> > Hi Ivan, thanks for your quick reply!
> >
> > Yes, ogrinfo --formats doesn't list OCI.
>
> Did you try a "make clean" ? Because if you configured in serveral times,
> it is
> possible that the code that registers the driver didn't get recompiled.
>
> >
> > I'll check the thread in OTN you mentioned, it seems it has something
> > specific about Ubuntu. I'll feedback the results.
> >
> > Many thanks!
> > --
> > Rui Cavaco
> > ___________________________
> > SIG2000, Sist. de Infor. Geogr?fica, Lda.
> > Rua do Campo Alegre, 1306 Sala 308/107 4150 - 174 Porto
> > Tel.: + 351 22 606 75 77
> > Fax: + 351 22 606 75 78
> > Mail: rcavaco at sig2000.pt
> > ________________________________________
> > De: Ivan Lucena [ivan.lucena at princeton-ma.us]
> > Enviado: segunda-feira, 29 de Abril de 2013 21:53
> > Para: Rui Cavaco; ""
> > Assunto: Re: [gdal-dev] Build GDAL with OCI support on Linux
> >
> > Hi Rui,
> >
> > >  -------Original Message-------
> > >  From: Rui Cavaco <rcavaco at sig2000.pt>
> > >  To: gdal-dev at lists.osgeo.org
> > >  Subject: [gdal-dev] Build GDAL with OCI support on Linux
> > >  Sent: Apr 29 '13 15:29
> > >
> > >  Hello!
> > >
> > >  I'm trying to get OCI support in GDAL / OGR in Ubuntu 12.04 32-bit.
> > >
> > >  I've successfully installed Oracle Instant Client 11_2 . SQLPlus works
> > >  flawlessly.
> > >  Building GDAL also ended with no errors.
> > >
> > >  But executing ogrinfo --formats, OCI format is not listed.
> > >
> > >  Building script is:
> > >
> > >  export LDFLAGS="-Wl,-no-as-needed"
> > >  ./configure \
> > >
> > >     --with-python --with-libkml=no --with-geotiff=internal \
> > >     --with-threads --with-libtiff=internal --with-geotiff=internal
> > >
> > >  --with-jpeg=internal --with-gif=internal --with-png=internal
> > >  --with-libz=internal \
> > >
> > >     --with-oci=yes \
> > >
> > >  --with-oci-include=/usr/lib/oracle/instantclient_11_2/sdk/include \
> > >
> > >     --with-oci-lib=/usr/lib/oracle/instantclient_11_2
> > >
> > >  make
> > >  sudo make install
> > >
> > >  Environment variables:
> > >
> > >
>  LD_LIBRARY_PATH=/usr/local/pgsql/lib:/usr/lib/oracle/instantclient_11_2:
> > >  /usr/local/lib:
> > >
>  PATH=/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:
> > >  /usr/bin:/sbin:/bin:/usr/games:/usr/lib/oracle/instantclient_11_2
> > >
> > >  In Config.log, we can see:
> > >
> > >  configure:22485: checking for Oracle OCI headers in
> > >  /usr/lib/oracle/instantclient_11_2/sdk/include
> > >  configure:22518: g++ -c -g -O2
> > >  -I/usr/lib/oracle/instantclient_11_2/sdk/include conftest.cpp >&5
> > >  configure:22518: $? = 0
> > >  configure:22531: result: yes
> > >  configure:22552: checking for Oracle OCI libraries in
> > >  /usr/lib/oracle/instantclient_11_2
> > >  configure:22578: g++ -o conftest -g -O2
> > >  -I/usr/lib/oracle/instantclient_11_2/sdk/include -Wl,-no-as-needed
> > >  -L/usr/lib/oracle/instantclient_11_2 -lclntsh conftest.cpp -L/usr/lib
> > >  -lpq -lpthread -lm -lrt -ldl  >&5
> > >  configure:22578: $? = 0
> > >  configure:22582: result: yes
> > >  configure:22626: checking if Oracle OCI version is >= 10.0.1
> > >  configure:22646: result: yes
> > >  configure:22649: checking for Oracle version >= 10.x to use -lnnz10
> flag
> > >  configure:22654: result: yes
> > >  configure:22675: checking if Oracle support is enabled
> > >  configure:22689: result: yes
> > >
> > >  configure:24105: checking for Oracle OCI headers in
> > >  /usr/lib/oracle/instantclient_11_2/sdk/include
> > >  configure:24138: g++ -c -g -O2
> > >  -I/usr/lib/oracle/instantclient_11_2/sdk/include conftest.cpp >&5
> > >  configure:24138: $? = 0
> > >  configure:24151: result: yes
> > >  configure:24172: checking for Oracle OCI libraries in
> > >  /usr/lib/oracle/instantclient_11_2
> > >  configure:24198: g++ -o conftest -g -O2
> > >  -I/usr/lib/oracle/instantclient_11_2/sdk/include -Wl,-no-as-needed
> > >  -L/usr/lib/oracle/instantclient_11_2 -lclntsh conftest.cpp -lexpat
> > >  -L/usr/lib -lpq -lpthread -lm -lrt -ldl  >&5
> > >  configure:24198: $? = 0
> > >  configure:24202: result: yes
> > >  configure:24246: checking if Oracle OCI version is >= 8.1.7
> > >  configure:24266: result: yes
> > >  configure:24269: checking for Oracle version >= 10.x to use -lnnz10
> flag
> > >  configure:24274: result: yes
> > >  configure:24295: checking if Oracle support is enabled
> > >  configure:24309: result: yes
> > >
> > >  Apparently, no errors to be found.
> > >
> > >  But OGR tools cannot access Oracle datasources.
> >
> > What is the command line and the error message that tells you that?
> >
> > Can you see OCI as one of the driver when you run "ogrinfo --formats" ?
> >
> > There was a discussion about building GDAL on Ubuntu on OTN:
> >
> >
> https://forums.oracle.com/forums/thread.jspa?threadID=1128217&tstart=0&mess
> > ageID=10658264#10658264
> >
> > Regards,
> >
> > Ivan
> >
> > >  Hoping to get some help on this,
> > >
> > >  --
> > >  Rui Cavaco
> > >  Mail: rcavaco at sig2000.pt
> > >  _______________________________________________
> > >  gdal-dev mailing list
> > >  gdal-dev at lists.osgeo.org
> > >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130430/47a8db13/attachment-0001.html>

From rcavaco at sig2000.pt  Tue Apr 30 04:21:33 2013
From: rcavaco at sig2000.pt (Rui Cavaco)
Date: Tue, 30 Apr 2013 12:21:33 +0100
Subject: [gdal-dev] Build GDAL with OCI support on Linux
In-Reply-To: <CAG9OqYp9BdSF8sz2xGouW=b-w4oZtr3JC6B1XODp7EtQx3iw5Q@mail.gmail.com>
References: <517ED815.7040907@sig2000.pt>
	<20130429205334.31221.qmail@s466.sureserver.com>
	<C1E3A80E3214704F8D3425B71F209F0B016376F9@PTAEXMBX18.ptasp.local>
	<201304300116.13164.even.rouault@mines-paris.org>
	<CAG9OqYp9BdSF8sz2xGouW=b-w4oZtr3JC6B1XODp7EtQx3iw5Q@mail.gmail.com>
Message-ID: <517FA93D.2090209@sig2000.pt>

Hi Even, Stefano, Ivan, Peter.

Thank you all for your quick replies!

Even's suggestion of using make clean did the trick!

After 'make clean' and building again the "OCI" label appeared in the 
ogrinfo -formats result.
Indeed, I had many previously failed building attempts, specially before 
I completely decided which compile options
I truly needed!

Stefano suggestion of having /etc/ld.so.conf.d/oracle.conf: the file was 
already in place.

Also important was the advice from Peter Halls (p.halls at york.ac.uk) to 
pay attention to have defined these two
env. variables: ORACLE_HOME and TNS_ADMIN.

ORACLE_HOME was set during Oracle Instant Client setup, but TNS_ADMIN 
was not. TNS_ADMIN should point
to tnsnames.ora file directory, necessary to use TNS-based (simpler) 
connection strings to Oracle.

Again, thank you all very much!

On 04/30/2013 07:35 AM, Stefano Iacovella wrote:
> You may also want to add path to instantclient in /etc/ld.so.conf.d
> Just add a file, i.e oracle.conf, and insert inside it path to oracle 
> instant client installation.
> You may also want to check if
> ldd /usr/local/bin/gdalinfo
>
> lists reference to oracle libraries.
>
>
> Cheers,
>
> Stefano
>
> ---------------------------------------------------
> 41.95581N 12.52854E
>
>
> http://www.linkedin.com/in/stefanoiacovella
>
> http://twitter.com/#!/Iacovellas <http://twitter.com/#%21/Iacovellas>
>
>
> 2013/4/30 Even Rouault <even.rouault at mines-paris.org 
> <mailto:even.rouault at mines-paris.org>>
>
>     Le mardi 30 avril 2013 01:12:34, Rui Cavaco a ?crit :
>     > Hi Ivan, thanks for your quick reply!
>     >
>     > Yes, ogrinfo --formats doesn't list OCI.
>
>     Did you try a "make clean" ? Because if you configured in serveral
>     times, it is
>     possible that the code that registers the driver didn't get
>     recompiled.
>
>     >
>     > I'll check the thread in OTN you mentioned, it seems it has
>     something
>     > specific about Ubuntu. I'll feedback the results.
>     >
>     > Many thanks!
>     > --
>     > Rui Cavaco
>     > ___________________________
>     > SIG2000, Sist. de Infor. Geogr?fica, Lda.
>     > Rua do Campo Alegre, 1306 Sala 308/107 4150 - 174 Porto
>     > Tel.: + 351 22 606 75 77 <tel:%2B%20351%2022%20606%2075%2077>
>     > Fax: + 351 22 606 75 78 <tel:%2B%20351%2022%20606%2075%2078>
>     > Mail: rcavaco at sig2000.pt <mailto:rcavaco at sig2000.pt>
>     > ________________________________________
>     > De: Ivan Lucena [ivan.lucena at princeton-ma.us
>     <mailto:ivan.lucena at princeton-ma.us>]
>     > Enviado: segunda-feira, 29 de Abril de 2013 21:53
>     > Para: Rui Cavaco; ""
>     > Assunto: Re: [gdal-dev] Build GDAL with OCI support on Linux
>     >
>     > Hi Rui,
>     >
>     > >  -------Original Message-------
>     > >  From: Rui Cavaco <rcavaco at sig2000.pt <mailto:rcavaco at sig2000.pt>>
>     > >  To: gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     > >  Subject: [gdal-dev] Build GDAL with OCI support on Linux
>     > >  Sent: Apr 29 '13 15:29
>     > >
>     > >  Hello!
>     > >
>     > >  I'm trying to get OCI support in GDAL / OGR in Ubuntu 12.04
>     32-bit.
>     > >
>     > >  I've successfully installed Oracle Instant Client 11_2 .
>     SQLPlus works
>     > >  flawlessly.
>     > >  Building GDAL also ended with no errors.
>     > >
>     > >  But executing ogrinfo --formats, OCI format is not listed.
>     > >
>     > >  Building script is:
>     > >
>     > >  export LDFLAGS="-Wl,-no-as-needed"
>     > >  ./configure \
>     > >
>     > >     --with-python --with-libkml=no --with-geotiff=internal \
>     > >     --with-threads --with-libtiff=internal --with-geotiff=internal
>     > >
>     > >  --with-jpeg=internal --with-gif=internal --with-png=internal
>     > >  --with-libz=internal \
>     > >
>     > >     --with-oci=yes \
>     > >
>     > >
>      --with-oci-include=/usr/lib/oracle/instantclient_11_2/sdk/include \
>     > >
>     > > --with-oci-lib=/usr/lib/oracle/instantclient_11_2
>     > >
>     > >  make
>     > >  sudo make install
>     > >
>     > >  Environment variables:
>     > >
>     > >
>      LD_LIBRARY_PATH=/usr/local/pgsql/lib:/usr/lib/oracle/instantclient_11_2:
>     > >  /usr/local/lib:
>     > >
>      PATH=/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:
>     > >  /usr/bin:/sbin:/bin:/usr/games:/usr/lib/oracle/instantclient_11_2
>     > >
>     > >  In Config.log, we can see:
>     > >
>     > >  configure:22485: checking for Oracle OCI headers in
>     > >  /usr/lib/oracle/instantclient_11_2/sdk/include
>     > >  configure:22518: g++ -c -g -O2
>     > >  -I/usr/lib/oracle/instantclient_11_2/sdk/include conftest.cpp >&5
>     > >  configure:22518: $? = 0
>     > >  configure:22531: result: yes
>     > >  configure:22552: checking for Oracle OCI libraries in
>     > >  /usr/lib/oracle/instantclient_11_2
>     > >  configure:22578: g++ -o conftest -g -O2
>     > >  -I/usr/lib/oracle/instantclient_11_2/sdk/include
>     -Wl,-no-as-needed
>     > >  -L/usr/lib/oracle/instantclient_11_2 -lclntsh conftest.cpp
>     -L/usr/lib
>     > >  -lpq -lpthread -lm -lrt -ldl  >&5
>     > >  configure:22578: $? = 0
>     > >  configure:22582: result: yes
>     > >  configure:22626: checking if Oracle OCI version is >= 10.0.1
>     > >  configure:22646: result: yes
>     > >  configure:22649: checking for Oracle version >= 10.x to use
>     -lnnz10 flag
>     > >  configure:22654: result: yes
>     > >  configure:22675: checking if Oracle support is enabled
>     > >  configure:22689: result: yes
>     > >
>     > >  configure:24105: checking for Oracle OCI headers in
>     > >  /usr/lib/oracle/instantclient_11_2/sdk/include
>     > >  configure:24138: g++ -c -g -O2
>     > >  -I/usr/lib/oracle/instantclient_11_2/sdk/include conftest.cpp >&5
>     > >  configure:24138: $? = 0
>     > >  configure:24151: result: yes
>     > >  configure:24172: checking for Oracle OCI libraries in
>     > >  /usr/lib/oracle/instantclient_11_2
>     > >  configure:24198: g++ -o conftest -g -O2
>     > >  -I/usr/lib/oracle/instantclient_11_2/sdk/include
>     -Wl,-no-as-needed
>     > >  -L/usr/lib/oracle/instantclient_11_2 -lclntsh conftest.cpp
>     -lexpat
>     > >  -L/usr/lib -lpq -lpthread -lm -lrt -ldl  >&5
>     > >  configure:24198: $? = 0
>     > >  configure:24202: result: yes
>     > >  configure:24246: checking if Oracle OCI version is >= 8.1.7
>     > >  configure:24266: result: yes
>     > >  configure:24269: checking for Oracle version >= 10.x to use
>     -lnnz10 flag
>     > >  configure:24274: result: yes
>     > >  configure:24295: checking if Oracle support is enabled
>     > >  configure:24309: result: yes
>     > >
>     > >  Apparently, no errors to be found.
>     > >
>     > >  But OGR tools cannot access Oracle datasources.
>     >
>     > What is the command line and the error message that tells you that?
>     >
>     > Can you see OCI as one of the driver when you run "ogrinfo
>     --formats" ?
>     >
>     > There was a discussion about building GDAL on Ubuntu on OTN:
>     >
>     >
>     https://forums.oracle.com/forums/thread.jspa?threadID=1128217&tstart=0&mess
>     > ageID=10658264#10658264
>     >
>     > Regards,
>     >
>     > Ivan
>     >
>     > >  Hoping to get some help on this,
>     > >
>     > >  --
>     > >  Rui Cavaco
>     > >  Mail: rcavaco at sig2000.pt <mailto:rcavaco at sig2000.pt>
>     > >  _______________________________________________
>     > >  gdal-dev mailing list
>     > > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>     >
>     > _______________________________________________
>     > gdal-dev mailing list
>     > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


-- 
Rui Cavaco
___________________________
SIG2000, Sist. de Infor. Geogr?fica, Lda.
Rua do Campo Alegre, 1306 Sala 308/107 4150 - 174 Porto
Tel.: + 351 22 606 75 77
Fax: + 351 22 606 75 78
Mail: rcavaco at sig2000.pt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130430/1dbf00f7/attachment.html>

From roberto at geodev.com.br  Tue Apr 30 08:41:33 2013
From: roberto at geodev.com.br (Roberto Oliveira Santos)
Date: Tue, 30 Apr 2013 12:41:33 -0300
Subject: [gdal-dev] Vaisala IRIS format driver
Message-ID: <CACVR3CwEY6L5JSEzZvcf+xwKeHf_2wu_Z7vK-jaYz9c5gakLdA@mail.gmail.com>

Hello Roger and fellows,

I'm experimenting the new Vaisala IRIS format driver with some of my data
and I have a doubt.

I tried to use it against the volumetric data and it reads all metadata
from file but does not bring any information about reference system, origin
and pixel's size. I think it's correct because I'm reading the raw data
from radar. My question is: how to attach these information to data?

Below I'm sending the output of gdalinfo.

Any feedback would be appreciated.

Kind regards,

Roberto

$ gdalinfo TXS130430143000.RAW2HS1
Driver: IRIS/IRIS data (.PPI, .CAPPi etc)
Files: TXS130430143000.RAW2HS1
Size is 240, 240
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["unnamed ellipse",
        DATUM["unknown",
            SPHEROID["unnamed",6371000,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Azimuthal_Equidistant"],
    PARAMETER["latitude_of_center",0],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0]]
Origin = (-0.000000000000000,0.000000000000000)
Pixel Size = (0.000000000000000,-0.000000000000000)
Metadata:
  COMPOSITED_PRODUCT=NO
  DATA_TYPE=Data type is not applicable
  DATA_TYPE_CODE=NULL
  DATA_TYPE_INPUT=Data type is not applicable
  DATA_TYPE_INPUT_CODE=NULL
  GROUND_HEIGHT=1016 m
  INGEST_HARDWARE_NAME=...
  INGEST_SITE_IRIS_VERSION=8.12
  INGEST_SITE_NAME=...
  NYQUIST_VELOCITY=6.66 m/s
  PRF=250 Hz
  PRODUCT=RAW
  PRODUCT_CONFIGURATION_NAME=SURV480
  PRODUCT_ID=15
  PRODUCT_SITE_IRIS_VERSION=8.12
  PRODUCT_SITE_NAME=...
  RADAR_HEIGHT=1046 m
  TASK_NAME=SURV480
  TIME_INPUT_INGEST_SWEEP=2013-04-30 14:30:00
  TIME_PRODUCT_GENERATED=2013-04-30 14:30:26
  WAVELENGTH=10.66 cm
Corner Coordinates:
Upper Left  (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
Lower Left  (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
Upper Right (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
Lower Right (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
Center      (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
Band 1 Block=240x1 Type=Float32, ColorInterp=Undefined
  NoData Value=-9999
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130430/70977e55/attachment-0001.html>

From josh at snorfalorpagus.net  Tue Apr 30 08:53:04 2013
From: josh at snorfalorpagus.net (Joshua Arnott)
Date: Tue, 30 Apr 2013 16:53:04 +0100
Subject: [gdal-dev] Creating prepared geometries from Python
Message-ID: <CADb3=VGxY81X8CiKaS8HXbyE8+xvK_JrZV4O9R+UATDgDnzCwg@mail.gmail.com>

Dear list,

Is it possible to create a prepared geometry object using the Python SWIG
geos.ogr module? It seems that Shapely and GeoDjango both have this
functionality, but I can't see any mention of it in the standard Python
module source or documentation. Unless I'm missing something, this seems
somewhat of an oversight.

http://toblerity.github.io/shapely/manual.html#prepared-geometry-operations
https://docs.djangoproject.com/en/dev/ref/contrib/gis/geos/#prepared-geometries

Regards,

Josh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130430/0678682b/attachment.html>

From even.rouault at mines-paris.org  Tue Apr 30 11:09:05 2013
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 30 Apr 2013 20:09:05 +0200
Subject: [gdal-dev] Creating prepared geometries from Python
In-Reply-To: <CADb3=VGxY81X8CiKaS8HXbyE8+xvK_JrZV4O9R+UATDgDnzCwg@mail.gmail.com>
References: <CADb3=VGxY81X8CiKaS8HXbyE8+xvK_JrZV4O9R+UATDgDnzCwg@mail.gmail.com>
Message-ID: <201304302009.05366.even.rouault@mines-paris.org>

Le mardi 30 avril 2013 17:53:04, Joshua Arnott a ?crit :
> Dear list,
> 
> Is it possible to create a prepared geometry object using the Python SWIG
> geos.ogr module? It seems that Shapely and GeoDjango both have this
> functionality, but I can't see any mention of it in the standard Python
> module source or documentation. Unless I'm missing something, this seems
> somewhat of an oversight.
> 
> http://toblerity.github.io/shapely/manual.html#prepared-geometry-operations
> https://docs.djangoproject.com/en/dev/ref/contrib/gis/geos/#prepared-geomet
> ries

There's currently no access to GEOS prepared geometries in OGR. They are just 
internally used by OGR since GDAL 1.10 to evaluate the layer spatial filter.

> 
> Regards,
> 
> Josh

From jorgearevalo at libregis.org  Tue Apr 30 12:55:05 2013
From: jorgearevalo at libregis.org (=?utf-8?Q?Jorge_Ar=C3=A9valo?=)
Date: Tue, 30 Apr 2013 21:55:05 +0200
Subject: [gdal-dev] Anyone interested in mentoring my project?
Message-ID: <7BF6582664C242F2BBFB3A4102DCB4ED@libregis.org>

Hello, 

I've applied as student to Google Summer of Code, with this project (GDAL/OGR on the web): http://www.google-melange.com/gsoc/proposal/review/google/gsoc2013/jorgearevalo/10002

The project has no assigned mentor on the ideas page (http://trac.osgeo.org/gdal/wiki/SummerOfCode). So, is anyone interested in mentoring it?

Best regards, 

-- 
Jorge Arevalo
Freelance developer

http://www.krop.com/jorgearevalo
http://about.me/jorgeas80

Enviado con Sparrow (http://www.sparrowmailapp.com/?sig)



From rveciana at gmail.com  Tue Apr 30 13:56:38 2013
From: rveciana at gmail.com (Roger Veciana i Rovira)
Date: Tue, 30 Apr 2013 22:56:38 +0200
Subject: [gdal-dev] Vaisala IRIS format driver
In-Reply-To: <CACVR3CwEY6L5JSEzZvcf+xwKeHf_2wu_Z7vK-jaYz9c5gakLdA@mail.gmail.com>
References: <CACVR3CwEY6L5JSEzZvcf+xwKeHf_2wu_Z7vK-jaYz9c5gakLdA@mail.gmail.com>
Message-ID: <CAJx2no=2T6Tkp-18A==cbbcWXfvqqQx2c6YvHoUABuNreYvO8A@mail.gmail.com>

Hello Roberto,

The driver reads IRIS products, not IRIS raw data.
If I understand well your problem, you are trying to read the direct
information from the radar, stored in azimouth, distance, and antenna
elevation. The driver is intended to read the procesated rasters already
projected and with constant altitudes.
The driver opens your file since I think that the header is common in some
parts, but of course, can't find the projection if the data is no actually
projected.
Have you tried with some CAPPI, PPI or similar product?

I'm really interested in having some feedback with this, so ask as much as
you need.

Roger


2013/4/30 Roberto Oliveira Santos <roberto at geodev.com.br>

> Hello Roger and fellows,
>
> I'm experimenting the new Vaisala IRIS format driver with some of my data
> and I have a doubt.
>
> I tried to use it against the volumetric data and it reads all metadata
> from file but does not bring any information about reference system, origin
> and pixel's size. I think it's correct because I'm reading the raw data
> from radar. My question is: how to attach these information to data?
>
> Below I'm sending the output of gdalinfo.
>
> Any feedback would be appreciated.
>
> Kind regards,
>
> Roberto
>
> $ gdalinfo TXS130430143000.RAW2HS1
> Driver: IRIS/IRIS data (.PPI, .CAPPi etc)
> Files: TXS130430143000.RAW2HS1
> Size is 240, 240
> Coordinate System is:
> PROJCS["unnamed",
>     GEOGCS["unnamed ellipse",
>         DATUM["unknown",
>             SPHEROID["unnamed",6371000,0]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>     PROJECTION["Azimuthal_Equidistant"],
>     PARAMETER["latitude_of_center",0],
>     PARAMETER["longitude_of_center",0],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0]]
> Origin = (-0.000000000000000,0.000000000000000)
> Pixel Size = (0.000000000000000,-0.000000000000000)
> Metadata:
>   COMPOSITED_PRODUCT=NO
>   DATA_TYPE=Data type is not applicable
>   DATA_TYPE_CODE=NULL
>   DATA_TYPE_INPUT=Data type is not applicable
>   DATA_TYPE_INPUT_CODE=NULL
>   GROUND_HEIGHT=1016 m
>   INGEST_HARDWARE_NAME=...
>   INGEST_SITE_IRIS_VERSION=8.12
>   INGEST_SITE_NAME=...
>   NYQUIST_VELOCITY=6.66 m/s
>   PRF=250 Hz
>   PRODUCT=RAW
>   PRODUCT_CONFIGURATION_NAME=SURV480
>   PRODUCT_ID=15
>   PRODUCT_SITE_IRIS_VERSION=8.12
>   PRODUCT_SITE_NAME=...
>   RADAR_HEIGHT=1046 m
>   TASK_NAME=SURV480
>   TIME_INPUT_INGEST_SWEEP=2013-04-30 14:30:00
>   TIME_PRODUCT_GENERATED=2013-04-30 14:30:26
>   WAVELENGTH=10.66 cm
> Corner Coordinates:
> Upper Left  (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
> Lower Left  (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
> Upper Right (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
> Lower Right (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
> Center      (   0.0000000,   0.0000000) (  0d 0' 0.01"E,  0d 0' 0.01"N)
> Band 1 Block=240x1 Type=Float32, ColorInterp=Undefined
>   NoData Value=-9999
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130430/c02a29d3/attachment.html>

From petebunting at mac.com  Tue Apr 30 16:29:30 2013
From: petebunting at mac.com (Peter Bunting)
Date: Wed, 01 May 2013 11:29:30 +1200
Subject: [gdal-dev] GDAL Raster Attribute Tables.
In-Reply-To: <B254502A-B75B-49DB-B94F-9CD8D4040734@mac.com>
References: <2FE71558-30D7-4CA3-A540-F9D4C7A5AFFC@mac.com>
	<CA+YzLBeYoVyOVwr=Bb9dFyHv6i2RQe49XA6rVAZZifBA9vd-iw@mail.gmail.com>
	<CA+YzLBdxUnXZm9gwQ87C+zXmAfSO-WMVtch8FJ2=T8L4iLnE9w@mail.gmail.com>
	<B254502A-B75B-49DB-B94F-9CD8D4040734@mac.com>
Message-ID: <48E640BA-0BD7-4D07-AD12-3101F4EE8E02@mac.com>

Hi All, 

Sam and I have prepared an RFC for our proposal for improving raster attribute table (RAT) support and put it on the trac.

http://trac.osgeo.org/gdal/wiki/rfc40_enhanced_rat_support

We'd be keen to here feedback on our proposal. 

Best wishes, 

Pete

****************************************************
* Dr Pete Bunting
* Senior Lecturer in Remote Sensing
* Institute of Geography and Earth Sciences
* Aberystwyth University
* Aberystwyth
* Ceredigion
* SY23 3DB
* UK
* 
* Ph: +44 (0) 1970 622615
* Mob: +44 (0) 7917 842743
* NZ Ph: +64 (0) 4 280 7430
* Email: pfb at aber.ac.uk
****************************************************

On 24 Apr 2013, at 11:03, Peter Bunting <petebunting at mac.com> wrote:

> Thanks Frank, 
> 
> Sam and I will prepare a RFC and pass it around. Should we post it to the mailing list or add directly to the trac?
> 
> Best wishes, 
> 
> Pete
> On 24 Apr 2013, at 10:17, Frank Warmerdam <warmerdam at pobox.com> wrote:
> 
>> Peter,
>> 
>> Actually, I should have added that I think a following stage should be for you to prepare a formal detailed RFC proposal for voting on by the PSC rather than just throwing a patch at us since this is an API change. 
>> 
>> Best regards,
>> Frank
>> 
>> 
>> On Tue, Apr 23, 2013 at 3:16 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:
>> 
>> 
>> 
>> On Tue, Apr 23, 2013 at 1:57 PM, Peter Bunting <petebunting at mac.com> wrote:
>> Hi All,
>> 
>> We were wondering if there is any interest in the GDAL community for improving the Raster Attribute Implementation? Within our group of collaborators we have been representing image segmentations as clump files often large attribute tables containing millions of rows and numerous columns of data used for classification. We are finding the current approach that reads a single value at a time with the whole attribute table in memory to be quite poor performance wise and resource (i.e., memory) hungry. 
>> 
>> Peter,
>> 
>> You do seem to be pushing raster attribute tables well beyond the expected use cases. 
>>  
>> 
>> We would like to propose a new implementation that allows reading and writing of whole chunks of a single column within the attribute table more like RasterIO. 
>> 
>> If we were to create a patch, would the GDAL community be receptive to this? We were thinking this would be incorporated within the interface changes in GDAL 2.0.
>> 
>> I would be receptive to additional read (and perhaps write) methods for chunks of the attribute table at a time if it can be done with a minimum of distruption of the existing api. 
>>   
>> It has been muted that OGR might be merged into GDAL in version 2.0 if this were to occurred how would attribute tables be dealt with and are the changes we proposing something that needs to be considered in that wider context also?
>> 
>> I had not been contemplating treating raster attribute tables as OGR layers.
>>  
>> I must confess that I'm still not certain that pushing raster attribute tables to be very large is a good idea. 
>> 
>> Best regards,
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
>> 
>> 
>> 
>> -- 
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20130501/e45fc125/attachment.html>

From ivan.lucena at princeton-ma.us  Tue Apr 30 18:43:17 2013
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Tue, 30 Apr 2013 20:43:17 -0500
Subject: [gdal-dev] =?iso-8859-1?q?GDAL_Raster_Attribute_Tables=2E?=
In-Reply-To: <48E640BA-0BD7-4D07-AD12-3101F4EE8E02@mac.com>
References: <2FE71558-30D7-4CA3-A540-F9D4C7A5AFFC@mac.com>
	<CA+YzLBeYoVyOVwr=Bb9dFyHv6i2RQe49XA6rVAZZifBA9vd-iw@mail.gmail.com>
	<CA+YzLBdxUnXZm9gwQ87C+zXmAfSO-WMVtch8FJ2=T8L4iLnE9w@mail.gmail.com>
	<B254502A-B75B-49DB-B94F-9CD8D4040734@mac.com>
	<48E640BA-0BD7-4D07-AD12-3101F4EE8E02@mac.com>
Message-ID: <20130501014319.2365.qmail@s466.sureserver.com>

Hi Peter,

Your RFC only mentions HFA driver but there other drivers that uses RAT as we can see by searching for GetDefaultRAT();

\frmts\aigrid\aigdataset.cpp(105):    virtual const GDALRasterAttributeTable *GetDefaultRAT();
\frmts\georaster\georaster_priv.h(250):    virtual const       GDALRasterAttributeTable *GetDefaultRAT();
\frmts\hfa\hfadataset.cpp(398):    virtual const GDALRasterAttributeTable *GetDefaultRAT();
\frmts\idrisi\IdrisiDataset.cpp(347):    virtual const GDALRasterAttributeTable *GetDefaultRAT();
\frmts\nitf\nitfdataset.h(300):        /*virtual const GDALRasterAttributeTable *GetDefaultRAT();
\frmts\raw\idadataset.cpp(119):    virtual const GDALRasterAttributeTable *GetDefaultRAT();

I don't know much about the IDA and AIG drivers. The GeoRaster driver uses regular database table to store Value Attribute Tables. The only way to do that is by implementing GetDefaultRAT() and SetDefaultRAT() and I completely agree that loading a large table at once in memory could be prohibitive. The NITF driver seems to have not implemented RAT support, the lines are commented. And if I remember correctly the Idrisi driver only uses RAT to share CategoryNames+ColorTable with ArcGIS.

But I think you have mentioned something about using OGR API to query and access the RAT. I liked that idea. 

Best regards,

Ivan

 

>  -------Original Message-------
>  From: Peter Bunting <petebunting at mac.com>
>  To: Frank Warmerdam <warmerdam at pobox.com>
>  Cc: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
>  Subject: Re: [gdal-dev] GDAL Raster Attribute Tables.
>  Sent: Apr 30 '13 18:29
>  
>  Hi All,
>  
>  
>  Sam and I have prepared an RFC for our proposal for improving raster
>  attribute table (RAT) support and put it on the trac.
>  
>  
>  [LINK: http://trac.osgeo.org/gdal/wiki/rfc40_enhanced_rat_support]
>  http://trac.osgeo.org/gdal/wiki/rfc40_enhanced_rat_support
>  
>  
>  We'd be keen to here feedback on our proposal.
>  
>  
>  Best wishes,
>  
>  
>  Pete
>  
>  
>  ****************************************************
>  * Dr Pete Bunting
>  * Senior Lecturer in Remote Sensing
>  * Institute of Geography and Earth Sciences
>  * Aberystwyth University
>  * Aberystwyth
>  * Ceredigion
>  * SY23 3DB
>  * UK
>  *
>  * Ph: +44 (0) 1970 622615
>  * Mob: +44 (0) 7917 842743
>  * NZ Ph: +64 (0) 4 280 7430
>  * Email: [LINK: mailto:pfb at aber.ac.uk] pfb at aber.ac.uk
>  ****************************************************
>  
>  
>  On 24 Apr 2013, at 11:03, Peter Bunting <[LINK: mailto:petebunting at mac.com]
>  petebunting at mac.com> wrote:
>  
>  Thanks Frank,
>  
>  
>  Sam and I will prepare a RFC and pass it around. Should we post it to the
>  mailing list or add directly to the trac?
>  
>  
>  Best wishes,
>  
>  
>  Pete
>  
>  
>  On 24 Apr 2013, at 10:17, Frank Warmerdam <[LINK:
>  mailto:warmerdam at pobox.com] warmerdam at pobox.com> wrote:
>  
>  Peter,
>  
>  
>  Actually, I should have added that I think a following stage should be for
>  you to prepare a formal detailed RFC proposal for voting on by the PSC
>  rather than just throwing a patch at us since this is an API change.
>  
>  
>  Best regards,
>  Frank
>  
>  
>  On Tue, Apr 23, 2013 at 3:16 PM, Frank Warmerdam <[LINK:
>  mailto:warmerdam at pobox.com] warmerdam at pobox.com> wrote:
>  
>  
>  On Tue, Apr 23, 2013 at 1:57 PM, Peter Bunting <[LINK:
>  mailto:petebunting at mac.com] petebunting at mac.com> wrote:
>  
>  
>  Hi All,
>  
>  We were wondering if there is any interest in the GDAL community for
>  improving the Raster Attribute Implementation? Within our group of
>  collaborators we have been representing image segmentations as clump files
>  often large attribute tables containing millions of rows and numerous
>  columns of data used for classification. We are finding the current
>  approach that reads a single value at a time with the whole attribute table
>  in memory to be quite poor performance wise and resource (i.e., memory)
>  hungry.
>  
>  
>  Peter,
>  
>  
>  You do seem to be pushing raster attribute tables well beyond the expected
>  use cases.
>  
>  
>  We would like to propose a new implementation that allows reading and
>  writing of whole chunks of a single column within the attribute table more
>  like RasterIO.
>  
>  
>  If we were to create a patch, would the GDAL community be receptive to
>  this? We were thinking this would be incorporated within the interface
>  changes in GDAL 2.0.
>  
>  
>  I would be receptive to additional read (and perhaps write) methods for
>  chunks of the attribute table at a time if it can be done with a minimum of
>  distruption of the existing api.
>  
>  
>  It has been muted that OGR might be merged into GDAL in version 2.0 if this
>  were to occurred how would attribute tables be dealt with and are the
>  changes we proposing something that needs to be considered in that wider
>  context also?
>  
>  
>  I had not been contemplating treating raster attribute tables as OGR
>  layers.
>  
>  I must confess that I'm still not certain that pushing raster attribute
>  tables to be very large is a good idea.
>  
>  
>  Best
>  regards,---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up   | Frank Warmerdam, [LINK:
>  mailto:warmerdam at pobox.com] warmerdam at pobox.com
>  light and sound - activate the windows | [LINK:
>  http://pobox.com/~warmerdam] http://pobox.com/~warmerdam
>  and watch the world go round - Rush    | Geospatial Software Developer
>  
>  
>  --
>  ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up   | Frank Warmerdam, [LINK:
>  mailto:warmerdam at pobox.com] warmerdam at pobox.com
>  light and sound - activate the windows | [LINK:
>  http://pobox.com/~warmerdam] http://pobox.com/~warmerdam
>  and watch the world go round - Rush    | Geospatial Software Developer
>  
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: mailto:gdal-dev at lists.osgeo.org] gdal-dev at lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev at lists.osgeo.org] gdal-dev at lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev

